(self.webpackChunktiles=self.webpackChunktiles||[]).push([[455],{3455:(Xh,bc,da)=>{"use strict";da.r(bc),da.d(bc,{MapGridModule:()=>D0});var Ri=da(6814),ne=da(7664);const k=class F{constructor(L){this.type=L,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}},_=class T{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};function l(re,L){return re>L?1:re<L?-1:0}function i(re,L,Z){if(re[0]<=L)return 0;const fe=re.length;if(L<=re[fe-1])return fe-1;if("function"==typeof Z){for(let _e=1;_e<fe;++_e){const Ue=re[_e];if(Ue===L)return _e;if(Ue<L)return Z(L,re[_e-1],Ue)>0?_e-1:_e}return fe-1}if(Z>0){for(let _e=1;_e<fe;++_e)if(re[_e]<L)return _e-1;return fe-1}if(Z<0){for(let _e=1;_e<fe;++_e)if(re[_e]<=L)return _e;return fe-1}for(let _e=1;_e<fe;++_e){if(re[_e]==L)return _e;if(re[_e]<L)return re[_e-1]-L<L-re[_e]?_e-1:_e}return fe-1}function s(re,L){const Z=re.length;if(Z!==L.length)return!1;for(let fe=0;fe<Z;fe++)if(re[fe]!==L[fe])return!1;return!0}function c(){return!0}function y(){return!1}function d(){}function x(re){for(const L in re)delete re[L]}function v(re){let L;for(L in re)return!1;return!L}const h=class b extends _{constructor(L){super(),this.eventTarget_=L,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(L,Z){if(!L||!Z)return;const fe=this.listeners_||(this.listeners_={}),_e=fe[L]||(fe[L]=[]);_e.includes(Z)||_e.push(Z)}dispatchEvent(L){const Z="string"==typeof L,fe=Z?L:L.type,_e=this.listeners_&&this.listeners_[fe];if(!_e)return;const Ue=Z?new k(L):L;Ue.target||(Ue.target=this.eventTarget_||this);const Xe=this.dispatching_||(this.dispatching_={}),lt=this.pendingRemovals_||(this.pendingRemovals_={});let bt;fe in Xe||(Xe[fe]=0,lt[fe]=0),++Xe[fe];for(let Ht=0,Wt=_e.length;Ht<Wt;++Ht)if(bt="handleEvent"in _e[Ht]?_e[Ht].handleEvent(Ue):_e[Ht].call(this,Ue),!1===bt||Ue.propagationStopped){bt=!1;break}if(0==--Xe[fe]){let Ht=lt[fe];for(delete lt[fe];Ht--;)this.removeEventListener(fe,d);delete Xe[fe]}return bt}disposeInternal(){this.listeners_&&x(this.listeners_)}getListeners(L){return this.listeners_&&this.listeners_[L]||void 0}hasListener(L){return!!this.listeners_&&(L?L in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(L,Z){if(!this.listeners_)return;const fe=this.listeners_[L];if(!fe)return;const _e=fe.indexOf(Z);-1!==_e&&(this.pendingRemovals_&&L in this.pendingRemovals_?(fe[_e]=d,++this.pendingRemovals_[L]):(fe.splice(_e,1),0===fe.length&&delete this.listeners_[L]))}};function w(re,L,Z,fe,_e){if(fe&&fe!==re&&(Z=Z.bind(fe)),_e){const Xe=Z;Z=function(){re.removeEventListener(L,Z),Xe.apply(this,arguments)}}const Ue={target:re,type:L,listener:Z};return re.addEventListener(L,Z),Ue}function E(re,L,Z,fe){return w(re,L,Z,fe,!0)}function P(re){re&&re.target&&(re.target.removeEventListener(re.type,re.listener),x(re))}const z=class I extends h{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent("change")}getRevision(){return this.revision_}onInternal(L,Z){if(Array.isArray(L)){const fe=L.length,_e=new Array(fe);for(let Ue=0;Ue<fe;++Ue)_e[Ue]=w(this,L[Ue],Z);return _e}return w(this,L,Z)}onceInternal(L,Z){let fe;if(Array.isArray(L)){const _e=L.length;fe=new Array(_e);for(let Ue=0;Ue<_e;++Ue)fe[Ue]=E(this,L[Ue],Z)}else fe=E(this,L,Z);return Z.ol_key=fe,fe}unInternal(L,Z){const fe=Z.ol_key;if(fe)!function O(re){if(Array.isArray(re))for(let L=0,Z=re.length;L<Z;++L)P(re[L]);else P(re)}(fe);else if(Array.isArray(L))for(let _e=0,Ue=L.length;_e<Ue;++_e)this.removeEventListener(L[_e],Z);else this.removeEventListener(L,Z)}};function U(){throw new Error("Unimplemented abstract method.")}let R=0;function j(re){return re.ol_uid||(re.ol_uid=String(++R))}class B extends k{constructor(L,Z,fe){super(L),this.key=Z,this.oldValue=fe}}const q=class V extends z{constructor(L){super(),j(this),this.values_=null,void 0!==L&&this.setProperties(L)}get(L){let Z;return this.values_&&this.values_.hasOwnProperty(L)&&(Z=this.values_[L]),Z}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(L,Z){let fe;fe=`change:${L}`,this.hasListener(fe)&&this.dispatchEvent(new B(fe,L,Z)),fe="propertychange",this.hasListener(fe)&&this.dispatchEvent(new B(fe,L,Z))}addChangeListener(L,Z){this.addEventListener(`change:${L}`,Z)}removeChangeListener(L,Z){this.removeEventListener(`change:${L}`,Z)}set(L,Z,fe){const _e=this.values_||(this.values_={});if(fe)_e[L]=Z;else{const Ue=_e[L];_e[L]=Z,Ue!==Z&&this.notify(L,Ue)}}setProperties(L,Z){for(const fe in L)this.set(fe,L[fe],Z)}applyProperties(L){L.values_&&Object.assign(this.values_||(this.values_={}),L.values_)}unset(L,Z){if(this.values_&&L in this.values_){const fe=this.values_[L];delete this.values_[L],v(this.values_)&&(this.values_=null),Z||this.notify(L,fe)}}};class ee extends k{constructor(L,Z,fe){super(L),this.element=Z,this.index=fe}}const J=class $ extends q{constructor(L,Z){if(super(),this.unique_=!!(Z=Z||{}).unique,this.array_=L||[],this.unique_)for(let fe=0,_e=this.array_.length;fe<_e;++fe)this.assertUnique_(this.array_[fe],fe);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(L){for(let Z=0,fe=L.length;Z<fe;++Z)this.push(L[Z]);return this}forEach(L){const Z=this.array_;for(let fe=0,_e=Z.length;fe<_e;++fe)L(Z[fe],fe,Z)}getArray(){return this.array_}item(L){return this.array_[L]}getLength(){return this.get("length")}insertAt(L,Z){if(L<0||L>this.getLength())throw new Error("Index out of bounds: "+L);this.unique_&&this.assertUnique_(Z),this.array_.splice(L,0,Z),this.updateLength_(),this.dispatchEvent(new ee("add",Z,L))}pop(){return this.removeAt(this.getLength()-1)}push(L){this.unique_&&this.assertUnique_(L);const Z=this.getLength();return this.insertAt(Z,L),this.getLength()}remove(L){const Z=this.array_;for(let fe=0,_e=Z.length;fe<_e;++fe)if(Z[fe]===L)return this.removeAt(fe)}removeAt(L){if(L<0||L>=this.getLength())return;const Z=this.array_[L];return this.array_.splice(L,1),this.updateLength_(),this.dispatchEvent(new ee("remove",Z,L)),Z}setAt(L,Z){if(L>=this.getLength())return void this.insertAt(L,Z);if(L<0)throw new Error("Index out of bounds: "+L);this.unique_&&this.assertUnique_(Z,L);const _e=this.array_[L];this.array_[L]=Z,this.dispatchEvent(new ee("remove",_e,L)),this.dispatchEvent(new ee("add",Z,L))}updateLength_(){this.set("length",this.array_.length)}assertUnique_(L,Z){for(let fe=0,_e=this.array_.length;fe<_e;++fe)if(this.array_[fe]===L&&fe!==Z)throw new Error("Duplicate item added to a unique collection")}};function ae(re,L){if(!re)throw new Error(L)}function ce(re,L,Z){return Math.min(Math.max(re,L),Z)}function le(re,L,Z,fe,_e,Ue){const Xe=_e-Z,lt=Ue-fe;if(0!==Xe||0!==lt){const bt=((re-Z)*Xe+(L-fe)*lt)/(Xe*Xe+lt*lt);bt>1?(Z=_e,fe=Ue):bt>0&&(Z+=Xe*bt,fe+=lt*bt)}return pe(re,L,Z,fe)}function pe(re,L,Z,fe){const _e=Z-re,Ue=fe-L;return _e*_e+Ue*Ue}function ye(re){return re*Math.PI/180}function ve(re,L){const Z=re%L;return Z*L<0?Z+L:Z}function xe(re,L,Z){return re+Z*(L-re)}function Ce(re,L){const Z=Math.pow(10,L);return Math.round(re*Z)/Z}function be(re,L){return Math.floor(Ce(re,L))}function ue(re,L){return Math.ceil(Ce(re,L))}const ge=class se extends q{constructor(L){super(),this.background_=L.background;const Z=Object.assign({},L);"object"==typeof L.properties&&(delete Z.properties,Object.assign(Z,L.properties)),Z.opacity=void 0!==L.opacity?L.opacity:1,ae("number"==typeof Z.opacity,"Layer opacity must be a number"),Z.visible=void 0===L.visible||L.visible,Z.zIndex=L.zIndex,Z.maxResolution=void 0!==L.maxResolution?L.maxResolution:1/0,Z.minResolution=void 0!==L.minResolution?L.minResolution:0,Z.minZoom=void 0!==L.minZoom?L.minZoom:-1/0,Z.maxZoom=void 0!==L.maxZoom?L.maxZoom:1/0,this.className_=void 0!==Z.className?Z.className:"ol-layer",delete Z.className,this.setProperties(Z),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(L){const Z=this.state_||{layer:this,managed:void 0===L||L},fe=this.getZIndex();return Z.opacity=ce(Math.round(100*this.getOpacity())/100,0,1),Z.visible=this.getVisible(),Z.extent=this.getExtent(),Z.zIndex=void 0!==fe||Z.managed?fe:1/0,Z.maxResolution=this.getMaxResolution(),Z.minResolution=Math.max(this.getMinResolution(),0),Z.minZoom=this.getMinZoom(),Z.maxZoom=this.getMaxZoom(),this.state_=Z,Z}getLayersArray(L){return U()}getLayerStatesArray(L){return U()}getExtent(){return this.get("extent")}getMaxResolution(){return this.get("maxResolution")}getMinResolution(){return this.get("minResolution")}getMinZoom(){return this.get("minZoom")}getMaxZoom(){return this.get("maxZoom")}getOpacity(){return this.get("opacity")}getSourceState(){return U()}getVisible(){return this.get("visible")}getZIndex(){return this.get("zIndex")}setBackground(L){this.background_=L,this.changed()}setExtent(L){this.set("extent",L)}setMaxResolution(L){this.set("maxResolution",L)}setMinResolution(L){this.set("minResolution",L)}setMaxZoom(L){this.set("maxZoom",L)}setMinZoom(L){this.set("minZoom",L)}setOpacity(L){ae("number"==typeof L,"Layer opacity must be a number"),this.set("opacity",L)}setVisible(L){this.set("visible",L)}setZIndex(L){this.set("zIndex",L)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}},Se={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},Pe=42,Fe=256,Me={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937},Ne=class Le{constructor(L){this.code_=L.code,this.units_=L.units,this.extent_=void 0!==L.extent?L.extent:null,this.worldExtent_=void 0!==L.worldExtent?L.worldExtent:null,this.axisOrientation_=void 0!==L.axisOrientation?L.axisOrientation:"enu",this.global_=void 0!==L.global&&L.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=L.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=L.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Me[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(L){this.global_=L,this.canWrapX_=!(!L||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(L){this.defaultTileGrid_=L}setExtent(L){this.extent_=L,this.canWrapX_=!(!this.global_||!L)}setWorldExtent(L){this.worldExtent_=L}setGetPointResolution(L){this.getPointResolutionFunc_=L}getPointResolutionFunc(){return this.getPointResolutionFunc_}},Re=6378137,He=Math.PI*Re,Ze=[-He,-He,He,He],nt=[-180,-85,180,85],ft=Re*Math.log(Math.tan(Math.PI/2));class ht extends Ne{constructor(L){super({code:L,units:"m",extent:Ze,global:!0,worldExtent:nt,getPointResolution:function(Z,fe){return Z/Math.cosh(fe[1]/Re)}})}}const Tt=[new ht("EPSG:3857"),new ht("EPSG:102100"),new ht("EPSG:102113"),new ht("EPSG:900913"),new ht("http://www.opengis.net/def/crs/EPSG/0/3857"),new ht("http://www.opengis.net/gml/srs/epsg.xml#3857")];function At(re,L,Z){const fe=re.length;Z=Z>1?Z:2,void 0===L&&(L=Z>2?re.slice():new Array(fe));for(let _e=0;_e<fe;_e+=Z){L[_e]=He*re[_e]/180;let Ue=Re*Math.log(Math.tan(Math.PI*(+re[_e+1]+90)/360));Ue>ft?Ue=ft:Ue<-ft&&(Ue=-ft),L[_e+1]=Ue}return L}function _t(re,L,Z){const fe=re.length;Z=Z>1?Z:2,void 0===L&&(L=Z>2?re.slice():new Array(fe));for(let _e=0;_e<fe;_e+=Z)L[_e]=180*re[_e]/He,L[_e+1]=360*Math.atan(Math.exp(re[_e+1]/Re))/Math.PI-90;return L}const it=[-180,-90,180,90],Pt=6378137*Math.PI/180;class jt extends Ne{constructor(L,Z){super({code:L,units:"degrees",extent:it,axisOrientation:Z,global:!0,metersPerUnit:Pt,worldExtent:it})}}const Ut=[new jt("CRS:84"),new jt("EPSG:4326","neu"),new jt("urn:ogc:def:crs:OGC:1.3:CRS84"),new jt("urn:ogc:def:crs:OGC:2:84"),new jt("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new jt("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new jt("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Rt={},$e={};function ct(re,L,Z){const fe=re.getCode(),_e=L.getCode();fe in $e||($e[fe]={}),$e[fe][_e]=Z}const ut={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Qe(re){const L=[1/0,1/0,-1/0,-1/0];for(let Z=0,fe=re.length;Z<fe;++Z)cn(L,re[Z]);return L}function vt(re,L,Z){let fe,_e;return fe=L<re[0]?re[0]-L:re[2]<L?L-re[2]:0,_e=Z<re[1]?re[1]-Z:re[3]<Z?Z-re[3]:0,fe*fe+_e*_e}function Lt(re,L){return Ot(re,L[0],L[1])}function Ot(re,L,Z){return re[0]<=L&&L<=re[2]&&re[1]<=Z&&Z<=re[3]}function Nt(re,L){const Xe=L[0],lt=L[1];let bt=ut.UNKNOWN;return Xe<re[0]?bt|=ut.LEFT:Xe>re[2]&&(bt|=ut.RIGHT),lt<re[1]?bt|=ut.BELOW:lt>re[3]&&(bt|=ut.ABOVE),bt===ut.UNKNOWN&&(bt=ut.INTERSECTING),bt}function Vt(re,L,Z,fe,_e){return _e?(_e[0]=re,_e[1]=L,_e[2]=Z,_e[3]=fe,_e):[re,L,Z,fe]}function nn(re){return Vt(1/0,1/0,-1/0,-1/0,re)}function Gn(re,L){return re[0]==L[0]&&re[2]==L[2]&&re[1]==L[1]&&re[3]==L[3]}function cn(re,L){L[0]<re[0]&&(re[0]=L[0]),L[0]>re[2]&&(re[2]=L[0]),L[1]<re[1]&&(re[1]=L[1]),L[1]>re[3]&&(re[3]=L[1])}function hn(re,L,Z,fe,_e){for(;Z<fe;Z+=_e)Ln(re,L[Z],L[Z+1]);return re}function Ln(re,L,Z){re[0]=Math.min(re[0],L),re[1]=Math.min(re[1],Z),re[2]=Math.max(re[2],L),re[3]=Math.max(re[3],Z)}function Pn(re,L){let Z;return Z=L(jn(re)),!!(Z||(Z=L(Fn(re)),Z)||(Z=L(Hn(re)),Z)||(Z=L(Mn(re)),Z))&&Z}function Nn(re){let L=0;return lr(re)||(L=Wn(re)*nr(re)),L}function jn(re){return[re[0],re[1]]}function Fn(re){return[re[2],re[1]]}function Jn(re){return[(re[0]+re[2])/2,(re[1]+re[3])/2]}function Zn(re,L){let Z;if("bottom-left"===L)Z=jn(re);else if("bottom-right"===L)Z=Fn(re);else if("top-left"===L)Z=Mn(re);else{if("top-right"!==L)throw new Error("Invalid corner");Z=Hn(re)}return Z}function rr(re,L,Z,fe,_e){const[Ue,Xe,lt,bt,Ht,Wt,pn,On]=dr(re,L,Z,fe);return Vt(Math.min(Ue,lt,Ht,pn),Math.min(Xe,bt,Wt,On),Math.max(Ue,lt,Ht,pn),Math.max(Xe,bt,Wt,On),_e)}function dr(re,L,Z,fe){const _e=L*fe[0]/2,Ue=L*fe[1]/2,Xe=Math.cos(Z),lt=Math.sin(Z),bt=_e*Xe,Ht=_e*lt,Wt=Ue*Xe,pn=Ue*lt,On=re[0],tr=re[1];return[On-bt+pn,tr-Ht-Wt,On-bt-pn,tr-Ht+Wt,On+bt-pn,tr+Ht+Wt,On+bt+pn,tr+Ht-Wt,On-bt+pn,tr-Ht-Wt]}function nr(re){return re[3]-re[1]}function ln(re,L,Z){const fe=Z||[1/0,1/0,-1/0,-1/0];return $n(re,L)?(fe[0]=re[0]>L[0]?re[0]:L[0],fe[1]=re[1]>L[1]?re[1]:L[1],fe[2]=re[2]<L[2]?re[2]:L[2],fe[3]=re[3]<L[3]?re[3]:L[3]):nn(fe),fe}function Mn(re){return[re[0],re[3]]}function Hn(re){return[re[2],re[3]]}function Wn(re){return re[2]-re[0]}function $n(re,L){return re[0]<=L[2]&&re[2]>=L[0]&&re[1]<=L[3]&&re[3]>=L[1]}function lr(re){return re[2]<re[0]||re[3]<re[1]}function fn(re,L){let Z=!0;for(let fe=re.length-1;fe>=0;--fe)if(re[fe]!=L[fe]){Z=!1;break}return Z}function yn(re,L){const Z=Math.cos(L),fe=Math.sin(L),Ue=re[1]*Z+re[0]*fe;return re[0]=re[0]*Z-re[1]*fe,re[1]=Ue,re}const cr=6371008.8;function Ar(re,L,Z){Z=Z||cr;const fe=ye(re[1]),_e=ye(L[1]),Ue=(_e-fe)/2,Xe=ye(L[0]-re[0])/2,lt=Math.sin(Ue)*Math.sin(Ue)+Math.sin(Xe)*Math.sin(Xe)*Math.cos(fe)*Math.cos(_e);return 2*Z*Math.atan2(Math.sqrt(lt),Math.sqrt(1-lt))}const Qr={info:1,warn:2,error:3,none:4};let Fi=Qr.info;function Gi(...re){Fi>Qr.warn||console.warn(...re)}let qa=!0;function ti(re){qa=!(void 0===re||re)}function _a(re,L){if(void 0!==L)for(let Z=0,fe=re.length;Z<fe;++Z)L[Z]=re[Z];else L=re.slice();return L}function vo(re,L){if(void 0!==L&&re!==L){for(let Z=0,fe=re.length;Z<fe;++Z)L[Z]=re[Z];re=L}return re}function ka(re){(function qe(re,L){Rt[re]=L})(re.getCode(),re),ct(re,re,_a)}function ma(re){return"string"==typeof re?function et(re){return Rt[re]||Rt[re.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(re):re||null}function Na(re,L,Z,fe){let _e;const Ue=(re=ma(re)).getPointResolutionFunc();if(Ue){if(_e=Ue(L,Z),fe&&fe!==re.getUnits()){const Xe=re.getMetersPerUnit();Xe&&(_e=_e*Xe/Me[fe])}}else{const Xe=re.getUnits();if("degrees"==Xe&&!fe||"degrees"==fe)_e=L;else{const lt=yo(re,ma("EPSG:4326"));if(lt===vo&&"degrees"!==Xe)_e=L*re.getMetersPerUnit();else{let Ht=[Z[0]-L/2,Z[1],Z[0]+L/2,Z[1],Z[0],Z[1]-L/2,Z[0],Z[1]+L/2];Ht=lt(Ht,Ht,2),_e=(Ar(Ht.slice(0,2),Ht.slice(2,4))+Ar(Ht.slice(4,6),Ht.slice(6,8)))/2}const bt=fe?Me[fe]:re.getMetersPerUnit();void 0!==bt&&(_e/=bt)}}return _e}function Ho(re){(function vs(re){re.forEach(ka)})(re),re.forEach(function(L){re.forEach(function(Z){L!==Z&&ct(L,Z,_a)})})}function co(re,L){return re?"string"==typeof re?ma(re):re:ma(L)}function ki(re,L){return ti(),Lo(re,"EPSG:4326",void 0!==L?L:"EPSG:3857")}function wa(re,L){const Z=Lo(re,void 0!==L?L:"EPSG:3857","EPSG:4326"),fe=Z[0];return(fe<-180||fe>180)&&(Z[0]=ve(fe+180,360)-180),Z}function fo(re,L){if(re===L)return!0;const Z=re.getUnits()===L.getUnits();return(re.getCode()===L.getCode()||yo(re,L)===_a)&&Z}function yo(re,L){let _e=function Ge(re,L){let Z;return re in $e&&L in $e[re]&&(Z=$e[re][L]),Z}(re.getCode(),L.getCode());return _e||(_e=vo),_e}function oo(re,L){return yo(ma(re),ma(L))}function Lo(re,L,Z){return oo(L,Z)(re,void 0,re.length)}let va=null;function xs(re,L){return re}function ss(re,L){return qa&&!fn(re,[0,0])&&re[0]>=-180&&re[0]<=180&&re[1]>=-90&&re[1]<=90&&(qa=!1,Gi("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),re}function Io(re,L){return re}function Wo(re,L,Z){return function(fe,_e,Ue,Xe,lt){if(!fe)return;if(!_e&&!L)return fe;const bt=L?0:Ue[0]*_e,Ht=L?0:Ue[1]*_e,Wt=lt?lt[0]:0,pn=lt?lt[1]:0;let On=re[0]+bt/2+Wt,tr=re[2]-bt/2+Wt,ar=re[1]+Ht/2+pn,Tr=re[3]-Ht/2+pn;On>tr&&(On=(tr+On)/2,tr=On),ar>Tr&&(ar=(Tr+ar)/2,Tr=ar);let Ir=ce(fe[0],On,tr),Br=ce(fe[1],ar,Tr);if(Xe&&Z&&_e){const zr=30*_e;Ir+=-zr*Math.log(1+Math.max(0,On-fe[0])/zr)+zr*Math.log(1+Math.max(0,fe[0]-tr)/zr),Br+=-zr*Math.log(1+Math.max(0,ar-fe[1])/zr)+zr*Math.log(1+Math.max(0,fe[1]-Tr)/zr)}return[Ir,Br]}}function bl(re){return re}function bs(re,L,Z,fe){const _e=Wn(L)/Z[0],Ue=nr(L)/Z[1];return fe?Math.min(re,Math.max(_e,Ue)):Math.min(re,Math.min(_e,Ue))}function il(re,L,Z){let fe=Math.min(re,L);return fe*=Math.log(1+50*Math.max(0,re/L-1))/50+1,Z&&(fe=Math.max(fe,Z),fe/=Math.log(1+50*Math.max(0,Z/re-1))/50+1),ce(fe,Z/2,2*L)}function Xl(re,L,Z,fe,_e){return Z=void 0===Z||Z,function(Ue,Xe,lt,bt){if(void 0!==Ue){const Ht=fe?bs(re,fe,lt,_e):re;return Z&&bt?il(Ue,Ht,L):ce(Ue,L,Ht)}}}function ls(re){if(void 0!==re)return 0}function us(re){if(void 0!==re)return re}function mi(re){return Math.pow(re,3)}function Zo(re){return 1-mi(1-re)}function Tu(re){return 3*re*re-2*re*re*re}function Kl(re){return re}function Ea(re,L){const Z=L[0],fe=L[1];return L[0]=re[0]*Z+re[2]*fe+re[4],L[1]=re[1]*Z+re[3]*fe+re[5],L}function ws(re,L,Z,fe,_e,Ue,Xe,lt){const bt=Math.sin(Ue),Ht=Math.cos(Ue);return re[0]=fe*Ht,re[1]=_e*bt,re[2]=-fe*bt,re[3]=_e*Ht,re[4]=Xe*fe*Ht-lt*fe*bt+L,re[5]=Xe*_e*bt+lt*_e*Ht+Z,re}function Ql(re,L){const Z=function wl(re){return re[0]*re[3]-re[1]*re[2]}(L);ae(0!==Z,"Transformation matrix cannot be inverted");const fe=L[0],_e=L[1],Ue=L[2],Xe=L[3],lt=L[4],bt=L[5];return re[0]=Xe/Z,re[1]=-_e/Z,re[2]=-Ue/Z,re[3]=fe/Z,re[4]=(Ue*bt-Xe*lt)/Z,re[5]=-(fe*bt-_e*lt)/Z,re}!function rl(){Ho(Tt),Ho(Ut),function as(re,L,Z,fe){re.forEach(function(_e){L.forEach(function(Ue){ct(_e,Ue,Z),ct(Ue,_e,fe)})})}(Ut,Tt,At,_t)}(),new Array(6);const Us=[1e6,1e6,1e6,1e6,2,2];const Di=[1,0,0,1,0,0],Wa=class Vs extends q{constructor(){super(),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=function m(re){let Z,fe,_e,L=!1;return function(){const Ue=Array.prototype.slice.call(arguments);return(!L||this!==_e||!s(Ue,fe))&&(L=!0,_e=this,fe=Ue,Z=re.apply(this,arguments)),Z}}((L,Z,fe)=>{if(!fe)return this.getSimplifiedGeometry(Z);const _e=this.clone();return _e.applyTransform(fe),_e.getSimplifiedGeometry(Z)})}simplifyTransformed(L,Z){return this.simplifyTransformedInternal(this.getRevision(),L,Z)}clone(){return U()}closestPointXY(L,Z,fe,_e){return U()}containsXY(L,Z){const fe=this.getClosestPoint([L,Z]);return fe[0]===L&&fe[1]===Z}getClosestPoint(L,Z){return this.closestPointXY(L[0],L[1],Z=Z||[NaN,NaN],1/0),Z}intersectsCoordinate(L){return this.containsXY(L[0],L[1])}computeExtent(L){return U()}getExtent(L){if(this.extentRevision_!=this.getRevision()){const Z=this.computeExtent(this.extent_);(isNaN(Z[0])||isNaN(Z[1]))&&nn(Z),this.extentRevision_=this.getRevision()}return function Cr(re,L){return L?(L[0]=re[0],L[1]=re[1],L[2]=re[2],L[3]=re[3],L):re}(this.extent_,L)}rotate(L,Z){U()}scale(L,Z,fe){U()}simplify(L){return this.getSimplifiedGeometry(L*L)}getSimplifiedGeometry(L){return U()}getType(){return U()}applyTransform(L){U()}intersectsExtent(L){return U()}translate(L,Z){U()}transform(L,Z){const fe=ma(L),_e="tile-pixels"==fe.getUnits()?function(Ue,Xe,lt){const bt=fe.getExtent(),Ht=fe.getWorldExtent(),Wt=nr(Ht)/nr(bt);return ws(Di,Ht[0],Ht[3],Wt,-Wt,0,0,0),function ll(re,L,Z,fe,_e,Ue){Ue=Ue||[];let Xe=0;for(let lt=L;lt<Z;lt+=fe){const bt=re[lt],Ht=re[lt+1];Ue[Xe++]=_e[0]*bt+_e[2]*Ht+_e[4],Ue[Xe++]=_e[1]*bt+_e[3]*Ht+_e[5]}Ue&&Ue.length!=Xe&&(Ue.length=Xe)}(Ue,0,Ue.length,lt,Di,Xe),oo(fe,Z)(Ue,Xe,lt)}:oo(fe,Z);return this.applyTransform(_e),this}};function Ii(re){let L;return"XY"==re?L=2:"XYZ"==re||"XYM"==re?L=3:"XYZM"==re&&(L=4),L}const Gs=class Xo extends Wa{constructor(){super(),this.layout="XY",this.stride=2}computeExtent(L){return function an(re,L,Z,fe,_e){return hn(nn(_e),re,L,Z,fe)}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,L)}getCoordinates(){return U()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(L){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),L<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&L<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const Z=this.getSimplifiedGeometryInternal(L);return Z.getFlatCoordinates().length<this.flatCoordinates.length?Z:(this.simplifiedGeometryMaxMinSquaredTolerance=L,this)}getSimplifiedGeometryInternal(L){return this}getStride(){return this.stride}setFlatCoordinates(L,Z){this.stride=Ii(L),this.layout=L,this.flatCoordinates=Z}setCoordinates(L,Z){U()}setLayout(L,Z,fe){let _e;if(L)_e=Ii(L);else{for(let Ue=0;Ue<fe;++Ue){if(0===Z.length)return this.layout="XY",void(this.stride=2);Z=Z[0]}_e=Z.length,L=function Ai(re){let L;return 2==re?L="XY":3==re?L="XYZ":4==re&&(L="XYZM"),L}(_e)}this.layout=L,this.stride=_e}applyTransform(L){this.flatCoordinates&&(L(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(L,Z){const fe=this.getFlatCoordinates();if(fe){const _e=this.getStride();(function ul(re,L,Z,fe,_e,Ue,Xe){Xe=Xe||[];const lt=Math.cos(_e),bt=Math.sin(_e),Ht=Ue[0],Wt=Ue[1];let pn=0;for(let On=L;On<Z;On+=fe){const tr=re[On]-Ht,ar=re[On+1]-Wt;Xe[pn++]=Ht+tr*lt-ar*bt,Xe[pn++]=Wt+tr*bt+ar*lt;for(let Tr=On+2;Tr<On+fe;++Tr)Xe[pn++]=re[Tr]}Xe&&Xe.length!=pn&&(Xe.length=pn)})(fe,0,fe.length,_e,L,Z,fe),this.changed()}}scale(L,Z,fe){void 0===Z&&(Z=L),fe||(fe=Jn(this.getExtent()));const _e=this.getFlatCoordinates();if(_e){const Ue=this.getStride();(function Pl(re,L,Z,fe,_e,Ue,Xe,lt){lt=lt||[];const bt=Xe[0],Ht=Xe[1];let Wt=0;for(let pn=L;pn<Z;pn+=fe){const tr=re[pn+1]-Ht;lt[Wt++]=bt+_e*(re[pn]-bt),lt[Wt++]=Ht+Ue*tr;for(let ar=pn+2;ar<pn+fe;++ar)lt[Wt++]=re[ar]}lt&&lt.length!=Wt&&(lt.length=Wt)})(_e,0,_e.length,Ue,L,Z,fe,_e),this.changed()}}translate(L,Z){const fe=this.getFlatCoordinates();if(fe){const _e=this.getStride();(function eu(re,L,Z,fe,_e,Ue,Xe){Xe=Xe||[];let lt=0;for(let bt=L;bt<Z;bt+=fe){Xe[lt++]=re[bt]+_e,Xe[lt++]=re[bt+1]+Ue;for(let Ht=bt+2;Ht<bt+fe;++Ht)Xe[lt++]=re[Ht]}Xe&&Xe.length!=lt&&(Xe.length=lt)})(fe,0,fe.length,_e,L,Z,fe),this.changed()}}};function Tl(re,L,Z,fe,_e,Ue,Xe){const lt=re[L],bt=re[L+1],Ht=re[Z]-lt,Wt=re[Z+1]-bt;let pn;if(0===Ht&&0===Wt)pn=L;else{const On=((_e-lt)*Ht+(Ue-bt)*Wt)/(Ht*Ht+Wt*Wt);if(On>1)pn=Z;else{if(On>0){for(let tr=0;tr<fe;++tr)Xe[tr]=xe(re[L+tr],re[Z+tr],On);return void(Xe.length=fe)}pn=L}}for(let On=0;On<fe;++On)Xe[On]=re[pn+On];Xe.length=fe}function Ol(re,L,Z,fe,_e){let Ue=re[L],Xe=re[L+1];for(L+=fe;L<Z;L+=fe){const lt=re[L],bt=re[L+1],Ht=pe(Ue,Xe,lt,bt);Ht>_e&&(_e=Ht),Ue=lt,Xe=bt}return _e}function xo(re,L,Z,fe,_e,Ue,Xe,lt,bt,Ht,Wt){if(L==Z)return Ht;let pn,On;if(0===_e){if(On=pe(Xe,lt,re[L],re[L+1]),On<Ht){for(pn=0;pn<fe;++pn)bt[pn]=re[L+pn];return bt.length=fe,On}return Ht}Wt=Wt||[NaN,NaN];let tr=L+fe;for(;tr<Z;)if(Tl(re,tr-fe,tr,fe,Xe,lt,Wt),On=pe(Xe,lt,Wt[0],Wt[1]),On<Ht){for(Ht=On,pn=0;pn<fe;++pn)bt[pn]=Wt[pn];bt.length=fe,tr+=fe}else tr+=fe*Math.max((Math.sqrt(On)-Math.sqrt(Ht))/_e|0,1);if(Ue&&(Tl(re,Z-fe,L,fe,Xe,lt,Wt),On=pe(Xe,lt,Wt[0],Wt[1]),On<Ht)){for(Ht=On,pn=0;pn<fe;++pn)bt[pn]=Wt[pn];bt.length=fe}return Ht}function Al(re,L,Z,fe){for(let _e=0,Ue=Z.length;_e<Ue;++_e){const Xe=Z[_e];for(let lt=0;lt<fe;++lt)re[L++]=Xe[lt]}return L}function Qa(re,L){return L*Math.round(re/L)}function Hs(re,L,Z,fe,_e,Ue,Xe){if(L==Z)return Xe;let Ht,Wt,lt=Qa(re[L],_e),bt=Qa(re[L+1],_e);L+=fe,Ue[Xe++]=lt,Ue[Xe++]=bt;do{if(Ht=Qa(re[L],_e),Wt=Qa(re[L+1],_e),(L+=fe)==Z)return Ue[Xe++]=Ht,Ue[Xe++]=Wt,Xe}while(Ht==lt&&Wt==bt);for(;L<Z;){const pn=Qa(re[L],_e),On=Qa(re[L+1],_e);if(L+=fe,pn==Ht&&On==Wt)continue;const tr=Ht-lt,ar=Wt-bt,Tr=pn-lt,Ir=On-bt;tr*Ir==ar*Tr&&(tr<0&&Tr<tr||tr==Tr||tr>0&&Tr>tr)&&(ar<0&&Ir<ar||ar==Ir||ar>0&&Ir>ar)?(Ht=pn,Wt=On):(Ue[Xe++]=Ht,Ue[Xe++]=Wt,lt=Ht,bt=Wt,Ht=pn,Wt=On)}return Ue[Xe++]=Ht,Ue[Xe++]=Wt,Xe}function fs(re,L,Z,fe,_e){_e=void 0!==_e?_e:[];let Ue=0;for(let Xe=L;Xe<Z;Xe+=fe)_e[Ue++]=re.slice(Xe,Xe+fe);return _e.length=Ue,_e}function qi(re,L,Z,fe){let _e=0,Ue=re[Z-fe],Xe=re[Z-fe+1];for(;L<Z;L+=fe){const lt=re[L],bt=re[L+1];_e+=Xe*lt-Ue*bt,Ue=lt,Xe=bt}return _e/2}class qs extends Gs{constructor(L,Z){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===Z||Array.isArray(L[0])?this.setCoordinates(L,Z):this.setFlatCoordinates(Z,L)}clone(){return new qs(this.flatCoordinates.slice(),this.layout)}closestPointXY(L,Z,fe,_e){return _e<vt(this.getExtent(),L,Z)?_e:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ol(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),xo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,L,Z,fe,_e))}getArea(){return qi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return fs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(L){const Z=[];return Z.length=function Bi(re,L,Z,fe,_e,Ue,Xe){const lt=(Z-L)/fe;if(lt<3){for(;L<Z;L+=fe)Ue[Xe++]=re[L],Ue[Xe++]=re[L+1];return Xe}const bt=new Array(lt);bt[0]=1,bt[lt-1]=1;const Ht=[L,Z-fe];let Wt=0;for(;Ht.length>0;){const pn=Ht.pop(),On=Ht.pop();let tr=0;const ar=re[On],Tr=re[On+1],Ir=re[pn],Br=re[pn+1];for(let zr=On+fe;zr<pn;zr+=fe){const Xr=le(re[zr],re[zr+1],ar,Tr,Ir,Br);Xr>tr&&(Wt=zr,tr=Xr)}tr>_e&&(bt[(Wt-L)/fe]=1,On+fe<Wt&&Ht.push(On,Wt),Wt+fe<pn&&Ht.push(Wt,pn))}for(let pn=0;pn<lt;++pn)bt[pn]&&(Ue[Xe++]=re[L+pn*fe],Ue[Xe++]=re[L+pn*fe+1]);return Xe}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,L,Z,0),new qs(Z,"XY")}getType(){return"LinearRing"}intersectsExtent(L){return!1}setCoordinates(L,Z){this.setLayout(Z,L,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Al(this.flatCoordinates,0,L,this.stride),this.changed()}}const nu=qs;class hs extends Gs{constructor(L,Z){super(),this.setCoordinates(L,Z)}clone(){const L=new hs(this.flatCoordinates.slice(),this.layout);return L.applyProperties(this),L}closestPointXY(L,Z,fe,_e){const Ue=this.flatCoordinates,Xe=pe(L,Z,Ue[0],Ue[1]);if(Xe<_e){const lt=this.stride;for(let bt=0;bt<lt;++bt)fe[bt]=Ue[bt];return fe.length=lt,Xe}return _e}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(L){return function gn(re,L){const Z=re[0],fe=re[1];return Vt(Z,fe,Z,fe,L)}(this.flatCoordinates,L)}getType(){return"Point"}intersectsExtent(L){return Ot(L,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(L,Z){this.setLayout(Z,L,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function $a(re,L,Z,fe){for(let _e=0,Ue=Z.length;_e<Ue;++_e)re[L++]=Z[_e];return L}(this.flatCoordinates,0,L),this.changed()}}const Ws=hs;function hl(re,L,Z,fe,_e){return!Pn(_e,function(Xe){return!zo(re,L,Z,fe,Xe[0],Xe[1])})}function zo(re,L,Z,fe,_e,Ue){let Xe=0,lt=re[Z-fe],bt=re[Z-fe+1];for(;L<Z;L+=fe){const Ht=re[L],Wt=re[L+1];bt<=Ue?Wt>Ue&&(Ht-lt)*(Ue-bt)-(_e-lt)*(Wt-bt)>0&&Xe++:Wt<=Ue&&(Ht-lt)*(Ue-bt)-(_e-lt)*(Wt-bt)<0&&Xe--,lt=Ht,bt=Wt}return 0!==Xe}function Or(re,L,Z,fe,_e,Ue){if(0===Z.length||!zo(re,L,Z[0],fe,_e,Ue))return!1;for(let Xe=1,lt=Z.length;Xe<lt;++Xe)if(zo(re,Z[Xe-1],Z[Xe],fe,_e,Ue))return!1;return!0}function wo(re,L,Z,fe,_e){const Ue=hn([1/0,1/0,-1/0,-1/0],re,L,Z,fe);return!!$n(_e,Ue)&&(!!(function St(re,L){return re[0]<=L[0]&&L[2]<=re[2]&&re[1]<=L[1]&&L[3]<=re[3]}(_e,Ue)||Ue[0]>=_e[0]&&Ue[2]<=_e[2]||Ue[1]>=_e[1]&&Ue[3]<=_e[3])||function Ys(re,L,Z,fe,_e){let Ue;for(L+=fe;L<Z;L+=fe)if(Ue=_e(re.slice(L-fe,L),re.slice(L,L+fe)),Ue)return Ue;return!1}(re,L,Z,fe,function(Xe,lt){return function Sn(re,L,Z){let fe=!1;const _e=Nt(re,L),Ue=Nt(re,Z);if(_e===ut.INTERSECTING||Ue===ut.INTERSECTING)fe=!0;else{const Xe=re[0],lt=re[1],bt=re[2],Ht=re[3],On=Z[0],tr=Z[1],ar=(tr-L[1])/(On-L[0]);let Tr,Ir;Ue&ut.ABOVE&&!(_e&ut.ABOVE)&&(Tr=On-(tr-Ht)/ar,fe=Tr>=Xe&&Tr<=bt),!fe&&Ue&ut.RIGHT&&!(_e&ut.RIGHT)&&(Ir=tr-(On-bt)*ar,fe=Ir>=lt&&Ir<=Ht),!fe&&Ue&ut.BELOW&&!(_e&ut.BELOW)&&(Tr=On-(tr-lt)/ar,fe=Tr>=Xe&&Tr<=bt),!fe&&Ue&ut.LEFT&&!(_e&ut.LEFT)&&(Ir=tr-(On-Xe)*ar,fe=Ir>=lt&&Ir<=Ht)}return fe}(_e,Xe,lt)}))}function Ya(re,L,Z,fe,_e){return!!(wo(re,L,Z,fe,_e)||zo(re,L,Z,fe,_e[0],_e[1])||zo(re,L,Z,fe,_e[0],_e[3])||zo(re,L,Z,fe,_e[2],_e[1])||zo(re,L,Z,fe,_e[2],_e[3]))}function As(re,L,Z,fe){for(;L<Z-fe;){for(let _e=0;_e<fe;++_e){const Ue=re[L+_e];re[L+_e]=re[Z-fe+_e],re[Z-fe+_e]=Ue}L+=fe,Z-=fe}}function dl(re,L,Z,fe){let _e=0,Ue=re[Z-fe],Xe=re[Z-fe+1];for(;L<Z;L+=fe){const lt=re[L],bt=re[L+1];_e+=(lt-Ue)*(bt+Xe),Ue=lt,Xe=bt}return 0===_e?void 0:_e>0}function Aa(re,L,Z,fe,_e){_e=void 0!==_e&&_e;for(let Ue=0,Xe=Z.length;Ue<Xe;++Ue){const lt=Z[Ue],bt=dl(re,L,lt,fe);(0===Ue?_e&&bt||!_e&&!bt:_e&&!bt||!_e&&bt)&&As(re,L,lt,fe),L=lt}return L}class Ma extends Gs{constructor(L,Z,fe){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==Z&&fe?(this.setFlatCoordinates(Z,L),this.ends_=fe):this.setCoordinates(L,Z)}appendLinearRing(L){this.flatCoordinates?function n(re,L){const Z=Array.isArray(L)?L:[L],fe=Z.length;for(let _e=0;_e<fe;_e++)re[re.length]=Z[_e]}(this.flatCoordinates,L.getFlatCoordinates()):this.flatCoordinates=L.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const L=new Ma(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return L.applyProperties(this),L}closestPointXY(L,Z,fe,_e){return _e<vt(this.getExtent(),L,Z)?_e:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function kl(re,L,Z,fe,_e){for(let Ue=0,Xe=Z.length;Ue<Xe;++Ue){const lt=Z[Ue];_e=Ol(re,L,lt,fe,_e),L=lt}return _e}(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function Ts(re,L,Z,fe,_e,Ue,Xe,lt,bt,Ht,Wt){Wt=Wt||[NaN,NaN];for(let pn=0,On=Z.length;pn<On;++pn){const tr=Z[pn];Ht=xo(re,L,tr,fe,_e,Ue,Xe,lt,bt,Ht,Wt),L=tr}return Ht}(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,L,Z,fe,_e))}containsXY(L,Z){return Or(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,L,Z)}getArea(){return function Do(re,L,Z,fe){let _e=0;for(let Ue=0,Xe=Z.length;Ue<Xe;++Ue){const lt=Z[Ue];_e+=qi(re,L,lt,fe),L=lt}return _e}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(L){let Z;return void 0!==L?(Z=this.getOrientedFlatCoordinates().slice(),Aa(Z,0,this.ends_,this.stride,L)):Z=this.flatCoordinates,function _o(re,L,Z,fe,_e){_e=void 0!==_e?_e:[];let Ue=0;for(let Xe=0,lt=Z.length;Xe<lt;++Xe){const bt=Z[Xe];_e[Ue++]=fs(re,L,bt,fe,_e[Ue]),L=bt}return _e.length=Ue,_e}(Z,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const L=Jn(this.getExtent());this.flatInteriorPoint_=function ds(re,L,Z,fe,_e,Ue,Xe){let lt,bt,Ht,Wt,pn,On,tr;const ar=_e[Ue+1],Tr=[];for(let zr=0,ri=Z.length;zr<ri;++zr){const Jr=Z[zr];for(Wt=re[Jr-fe],On=re[Jr-fe+1],lt=L;lt<Jr;lt+=fe)pn=re[lt],tr=re[lt+1],(ar<=On&&tr<=ar||On<=ar&&ar<=tr)&&(Ht=(ar-On)/(tr-On)*(pn-Wt)+Wt,Tr.push(Ht)),Wt=pn,On=tr}let Ir=NaN,Br=-1/0;for(Tr.sort(l),Wt=Tr[0],lt=1,bt=Tr.length;lt<bt;++lt){pn=Tr[lt];const zr=Math.abs(pn-Wt);zr>Br&&(Ht=(Wt+pn)/2,Or(re,L,Z,fe,Ht,ar)&&(Ir=Ht,Br=zr)),Wt=pn}return isNaN(Ir)&&(Ir=_e[Ue]),Xe?(Xe.push(Ir,ar,Br),Xe):[Ir,ar,Br]}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,L,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Ws(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(L){return L<0||this.ends_.length<=L?null:new nu(this.flatCoordinates.slice(0===L?0:this.ends_[L-1],this.ends_[L]),this.layout)}getLinearRings(){const L=this.layout,Z=this.flatCoordinates,fe=this.ends_,_e=[];let Ue=0;for(let Xe=0,lt=fe.length;Xe<lt;++Xe){const bt=fe[Xe],Ht=new nu(Z.slice(Ue,bt),L);_e.push(Ht),Ue=bt}return _e}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const L=this.flatCoordinates;!function Ms(re,L,Z,fe,_e){_e=void 0!==_e&&_e;for(let Ue=0,Xe=Z.length;Ue<Xe;++Ue){const lt=Z[Ue],bt=dl(re,L,lt,fe);if(0===Ue){if(_e&&bt||!_e&&!bt)return!1}else if(_e&&!bt||!_e&&bt)return!1;L=lt}return!0}(L,0,this.ends_,this.stride)?(this.orientedFlatCoordinates_=L.slice(),this.orientedFlatCoordinates_.length=Aa(this.orientedFlatCoordinates_,0,this.ends_,this.stride)):this.orientedFlatCoordinates_=L,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(L){const Z=[],fe=[];return Z.length=function eo(re,L,Z,fe,_e,Ue,Xe,lt){for(let bt=0,Ht=Z.length;bt<Ht;++bt){const Wt=Z[bt];Xe=Hs(re,L,Wt,fe,_e,Ue,Xe),lt.push(Xe),L=Wt}return Xe}(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(L),Z,0,fe),new Ma(Z,"XY",fe)}getType(){return"Polygon"}intersectsExtent(L){return function $o(re,L,Z,fe,_e){if(!Ya(re,L,Z[0],fe,_e))return!1;if(1===Z.length)return!0;for(let Ue=1,Xe=Z.length;Ue<Xe;++Ue)if(hl(re,Z[Ue-1],Z[Ue],fe,_e)&&!wo(re,Z[Ue-1],Z[Ue],fe,_e))return!1;return!0}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,L)}setCoordinates(L,Z){this.setLayout(Z,L,2),this.flatCoordinates||(this.flatCoordinates=[]);const fe=function bo(re,L,Z,fe,_e){_e=_e||[];let Ue=0;for(let Xe=0,lt=Z.length;Xe<lt;++Xe){const bt=Al(re,L,Z[Xe],fe);_e[Ue++]=bt,L=bt}return _e.length=Ue,_e}(this.flatCoordinates,0,L,this.stride,this.ends_);this.flatCoordinates.length=0===fe.length?0:fe[fe.length-1],this.changed()}}const Sl=Ma;function to(re){if(lr(re))throw new Error("Cannot create polygon from empty extent");const L=re[0],Z=re[1],fe=re[2],_e=re[3],Ue=[L,Z,L,_e,fe,_e,fe,Z,L,Z];return new Ma(Ue,"XY",[Ue.length])}function Cs(re,L){setTimeout(function(){re(L)},0)}function Vr(re,L,Z,fe,_e){const Ue=Math.cos(-_e);let Xe=Math.sin(-_e),lt=re[0]*Ue-re[1]*Xe,bt=re[1]*Ue+re[0]*Xe;return lt+=(L[0]/2-Z[0])*fe,bt+=(Z[1]-L[1]/2)*fe,Xe=-Xe,[lt*Ue-bt*Xe,bt*Ue+lt*Xe]}const Yr=class es extends q{constructor(L){super(),L=Object.assign({},L),this.hints_=[0,0],this.animations_=[],this.projection_=co(L.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.nextCenter_=null,this.cancelAnchor_=void 0,L.projection&&ti(),L.center&&(L.center=ss(L.center)),L.extent&&(L.extent=Io(L.extent)),this.applyOptions_(L)}applyOptions_(L){const Z=Object.assign({},L);for(const lt in Se)delete Z[lt];this.setProperties(Z,!0);const fe=function ts(re){let L,Z,fe,Xe=void 0!==re.minZoom?re.minZoom:0,lt=void 0!==re.maxZoom?re.maxZoom:28;const bt=void 0!==re.zoomFactor?re.zoomFactor:2,Ht=void 0!==re.multiWorld&&re.multiWorld,Wt=void 0===re.smoothResolutionConstraint||re.smoothResolutionConstraint,pn=void 0!==re.showFullExtent&&re.showFullExtent,On=co(re.projection,"EPSG:3857"),tr=On.getExtent();let ar=re.constrainOnlyCenter,Tr=re.extent;if(!Ht&&!Tr&&On.isGlobal()&&(ar=!1,Tr=tr),void 0!==re.resolutions){const Ir=re.resolutions;Z=Ir[Xe],fe=void 0!==Ir[lt]?Ir[lt]:Ir[Ir.length-1],L=re.constrainResolution?function al(re,L,Z,fe){return L=void 0===L||L,function(_e,Ue,Xe,lt){if(void 0!==_e){const bt=re[0],Ht=re[re.length-1],Wt=Z?bs(bt,Z,Xe,fe):bt;if(lt)return L?il(_e,Wt,Ht):ce(_e,Ht,Wt);const pn=Math.min(Wt,_e),On=Math.floor(i(re,pn,Ue));return re[On]>Wt&&On<re.length-1?re[On+1]:re[On]}}}(Ir,Wt,!ar&&Tr,pn):Xl(Z,fe,Wt,!ar&&Tr,pn)}else{const Br=(tr?Math.max(Wn(tr),nr(tr)):360*Me.degrees/On.getMetersPerUnit())/Fe/Math.pow(2,0),zr=Br/Math.pow(2,28);Z=re.maxResolution,void 0!==Z?Xe=0:Z=Br/Math.pow(bt,Xe),fe=re.minResolution,void 0===fe&&(fe=void 0!==re.maxZoom?void 0!==re.maxResolution?Z/Math.pow(bt,lt):Br/Math.pow(bt,lt):zr),lt=Xe+Math.floor(Math.log(Z/fe)/Math.log(bt)),fe=Z/Math.pow(bt,lt-Xe),L=re.constrainResolution?function Yo(re,L,Z,fe,_e,Ue){return fe=void 0===fe||fe,Z=void 0!==Z?Z:0,function(Xe,lt,bt,Ht){if(void 0!==Xe){const Wt=_e?bs(L,_e,bt,Ue):L;if(Ht)return fe?il(Xe,Wt,Z):ce(Xe,Z,Wt);const pn=1e-9,On=Math.ceil(Math.log(L/Wt)/Math.log(re)-pn),tr=-lt*(.5-pn)+.5,ar=Math.min(Wt,Xe),Tr=Math.floor(Math.log(L/ar)/Math.log(re)+tr),Ir=Math.max(On,Tr);return ce(L/Math.pow(re,Ir),Z,Wt)}}}(bt,Z,fe,Wt,!ar&&Tr,pn):Xl(Z,fe,Wt,!ar&&Tr,pn)}return{constraint:L,maxResolution:Z,minResolution:fe,minZoom:Xe,zoomFactor:bt}}(L);this.maxResolution_=fe.maxResolution,this.minResolution_=fe.minResolution,this.zoomFactor_=fe.zoomFactor,this.resolutions_=L.resolutions,this.padding_=L.padding,this.minZoom_=fe.minZoom;const _e=function El(re){if(void 0!==re.extent)return Wo(re.extent,re.constrainOnlyCenter,void 0===re.smoothExtentConstraint||re.smoothExtentConstraint);const L=co(re.projection,"EPSG:3857");if(!0!==re.multiWorld&&L.isGlobal()){const Z=L.getExtent().slice();return Z[0]=-1/0,Z[2]=1/0,Wo(Z,!1,!1)}return bl}(L),Ue=fe.constraint,Xe=function Ji(re){if(void 0===re.enableRotation||re.enableRotation){const Z=re.constrainRotation;return void 0===Z||!0===Z?function js(re){const L=void 0===re?ye(5):re;return function(Z,fe){return fe||void 0===Z?Z:Math.abs(Z)<=L?0:Z}}():!1===Z?us:"number"==typeof Z?function _s(re){const L=2*Math.PI/re;return function(Z,fe){return fe?Z:void 0!==Z?Z=Math.floor(Z/L+.5)*L:void 0}}(Z):us}return ls}(L);this.constraints_={center:_e,resolution:Ue,rotation:Xe},this.setRotation(void 0!==L.rotation?L.rotation:0),this.setCenterInternal(void 0!==L.center?L.center:null),void 0!==L.resolution?this.setResolution(L.resolution):void 0!==L.zoom&&this.setZoom(L.zoom)}get padding(){return this.padding_}set padding(L){let Z=this.padding_;this.padding_=L;const fe=this.getCenterInternal();if(fe){const _e=L||[0,0,0,0];Z=Z||[0,0,0,0];const Ue=this.getResolution();this.setCenterInternal([fe[0]+Ue/2*(_e[3]-Z[3]+Z[1]-_e[1]),fe[1]-Ue/2*(_e[0]-Z[0]+Z[2]-_e[2])])}}getUpdatedOptions_(L){const Z=this.getProperties();return void 0!==Z.resolution?Z.resolution=this.getResolution():Z.zoom=this.getZoom(),Z.center=this.getCenterInternal(),Z.rotation=this.getRotation(),Object.assign({},Z,L)}animate(L){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const Z=new Array(arguments.length);for(let fe=0;fe<Z.length;++fe){let _e=arguments[fe];_e.center&&(_e=Object.assign({},_e),_e.center=ss(_e.center,this.getProjection())),_e.anchor&&(_e=Object.assign({},_e),_e.anchor=ss(_e.anchor,this.getProjection())),Z[fe]=_e}this.animateInternal.apply(this,Z)}animateInternal(L){let fe,Z=arguments.length;Z>1&&"function"==typeof arguments[Z-1]&&(fe=arguments[Z-1],--Z);let _e=0;for(;_e<Z&&!this.isDef();++_e){const Wt=arguments[_e];Wt.center&&this.setCenterInternal(Wt.center),void 0!==Wt.zoom?this.setZoom(Wt.zoom):Wt.resolution&&this.setResolution(Wt.resolution),void 0!==Wt.rotation&&this.setRotation(Wt.rotation)}if(_e===Z)return void(fe&&Cs(fe,!0));let Ue=Date.now(),Xe=this.targetCenter_.slice(),lt=this.targetResolution_,bt=this.targetRotation_;const Ht=[];for(;_e<Z;++_e){const Wt=arguments[_e],pn={start:Ue,complete:!1,anchor:Wt.anchor,duration:void 0!==Wt.duration?Wt.duration:1e3,easing:Wt.easing||Tu,callback:fe};if(Wt.center&&(pn.sourceCenter=Xe,pn.targetCenter=Wt.center.slice(),Xe=pn.targetCenter),void 0!==Wt.zoom?(pn.sourceResolution=lt,pn.targetResolution=this.getResolutionForZoom(Wt.zoom),lt=pn.targetResolution):Wt.resolution&&(pn.sourceResolution=lt,pn.targetResolution=Wt.resolution,lt=pn.targetResolution),void 0!==Wt.rotation){pn.sourceRotation=bt;const On=ve(Wt.rotation-bt+Math.PI,2*Math.PI)-Math.PI;pn.targetRotation=bt+On,bt=pn.targetRotation}(re=pn).sourceCenter&&re.targetCenter&&!fn(re.sourceCenter,re.targetCenter)||re.sourceResolution!==re.targetResolution||re.sourceRotation!==re.targetRotation?Ue+=pn.duration:pn.complete=!0,Ht.push(pn)}var re;this.animations_.push(Ht),this.setHint(0,1),this.updateAnimations_()}getAnimating(){return this.hints_[0]>0}getInteracting(){return this.hints_[1]>0}cancelAnimations(){let L;this.setHint(0,-this.hints_[0]);for(let Z=0,fe=this.animations_.length;Z<fe;++Z){const _e=this.animations_[Z];if(_e[0].callback&&Cs(_e[0].callback,!1),!L)for(let Ue=0,Xe=_e.length;Ue<Xe;++Ue){const lt=_e[Ue];if(!lt.complete){L=lt.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=L,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const L=Date.now();let Z=!1;for(let fe=this.animations_.length-1;fe>=0;--fe){const _e=this.animations_[fe];let Ue=!0;for(let Xe=0,lt=_e.length;Xe<lt;++Xe){const bt=_e[Xe];if(bt.complete)continue;let Wt=bt.duration>0?(L-bt.start)/bt.duration:1;Wt>=1?(bt.complete=!0,Wt=1):Ue=!1;const pn=bt.easing(Wt);if(bt.sourceCenter){const On=bt.sourceCenter[0],tr=bt.sourceCenter[1],ar=bt.targetCenter[0],Tr=bt.targetCenter[1];this.nextCenter_=bt.targetCenter,this.targetCenter_=[On+pn*(ar-On),tr+pn*(Tr-tr)]}if(bt.sourceResolution&&bt.targetResolution){const On=1===pn?bt.targetResolution:bt.sourceResolution+pn*(bt.targetResolution-bt.sourceResolution);if(bt.anchor){const tr=this.getViewportSize_(this.getRotation()),ar=this.constraints_.resolution(On,0,tr,!0);this.targetCenter_=this.calculateCenterZoom(ar,bt.anchor)}this.nextResolution_=bt.targetResolution,this.targetResolution_=On,this.applyTargetState_(!0)}if(void 0!==bt.sourceRotation&&void 0!==bt.targetRotation){const On=1===pn?ve(bt.targetRotation+Math.PI,2*Math.PI)-Math.PI:bt.sourceRotation+pn*(bt.targetRotation-bt.sourceRotation);if(bt.anchor){const tr=this.constraints_.rotation(On,!0);this.targetCenter_=this.calculateCenterRotate(tr,bt.anchor)}this.nextRotation_=bt.targetRotation,this.targetRotation_=On}if(this.applyTargetState_(!0),Z=!0,!bt.complete)break}if(Ue){this.animations_[fe]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const Xe=_e[0].callback;Xe&&Cs(Xe,!0)}}this.animations_=this.animations_.filter(Boolean),Z&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(L,Z){let fe;const _e=this.getCenterInternal();return void 0!==_e&&(fe=[_e[0]-Z[0],_e[1]-Z[1]],yn(fe,L-this.getRotation()),function _n(re,L){re[0]+=+L[0],re[1]+=+L[1]}(fe,Z)),fe}calculateCenterZoom(L,Z){let fe;const _e=this.getCenterInternal(),Ue=this.getResolution();return void 0!==_e&&void 0!==Ue&&(fe=[Z[0]-L*(Z[0]-_e[0])/Ue,Z[1]-L*(Z[1]-_e[1])/Ue]),fe}getViewportSize_(L){const Z=this.viewportSize_;if(L){const fe=Z[0],_e=Z[1];return[Math.abs(fe*Math.cos(L))+Math.abs(_e*Math.sin(L)),Math.abs(fe*Math.sin(L))+Math.abs(_e*Math.cos(L))]}return Z}setViewportSize(L){this.viewportSize_=Array.isArray(L)?L.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const L=this.getCenterInternal();return L&&xs(L,this.getProjection())}getCenterInternal(){return this.get(Se.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(L){return void 0!==L?(L[0]=this.hints_[0],L[1]=this.hints_[1],L):this.hints_.slice()}calculateExtent(L){return function Vu(re,L){return re}(this.calculateExtentInternal(L),this.getProjection())}calculateExtentInternal(L){L=L||this.getViewportSizeMinusPadding_();const Z=this.getCenterInternal();ae(Z,"The view center is not defined");const fe=this.getResolution();ae(void 0!==fe,"The view resolution is not defined");const _e=this.getRotation();return ae(void 0!==_e,"The view rotation is not defined"),rr(Z,fe,_e,L)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(L){this.applyOptions_(this.getUpdatedOptions_({maxZoom:L}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(L){this.applyOptions_(this.getUpdatedOptions_({minZoom:L}))}setConstrainResolution(L){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:L}))}getProjection(){return this.projection_}getResolution(){return this.get(Se.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(L,Z){return this.getResolutionForExtentInternal(Io(L,this.getProjection()),Z)}getResolutionForExtentInternal(L,Z){Z=Z||this.getViewportSizeMinusPadding_();const fe=Wn(L)/Z[0],_e=nr(L)/Z[1];return Math.max(fe,_e)}getResolutionForValueFunction(L){L=L||2;const Z=this.getConstrainedResolution(this.maxResolution_),_e=Math.log(Z/this.minResolution_)/Math.log(L);return function(Ue){return Z/Math.pow(L,Ue*_e)}}getRotation(){return this.get(Se.ROTATION)}getValueForResolutionFunction(L){const Z=Math.log(L||2),fe=this.getConstrainedResolution(this.maxResolution_),Ue=Math.log(fe/this.minResolution_)/Z;return function(Xe){return Math.log(fe/Xe)/Z/Ue}}getViewportSizeMinusPadding_(L){let Z=this.getViewportSize_(L);const fe=this.padding_;return fe&&(Z=[Z[0]-fe[1]-fe[3],Z[1]-fe[0]-fe[2]]),Z}getState(){const L=this.getProjection(),Z=this.getResolution(),fe=this.getRotation();let _e=this.getCenterInternal();const Ue=this.padding_;if(Ue){const Xe=this.getViewportSizeMinusPadding_();_e=Vr(_e,this.getViewportSize_(),[Xe[0]/2+Ue[3],Xe[1]/2+Ue[0]],Z,fe)}return{center:_e.slice(0),projection:void 0!==L?L:null,resolution:Z,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:fe,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let L;const Z=this.getResolution();return void 0!==Z&&(L=this.getZoomForResolution(Z)),L}getZoomForResolution(L){let fe,_e,Z=this.minZoom_||0;if(this.resolutions_){const Ue=i(this.resolutions_,L,1);Z=Ue,fe=this.resolutions_[Ue],_e=Ue==this.resolutions_.length-1?2:fe/this.resolutions_[Ue+1]}else fe=this.maxResolution_,_e=this.zoomFactor_;return Z+Math.log(fe/L)/Math.log(_e)}getResolutionForZoom(L){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const Z=ce(Math.floor(L),0,this.resolutions_.length-2);return this.resolutions_[Z]/Math.pow(this.resolutions_[Z]/this.resolutions_[Z+1],ce(L-Z,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,L-this.minZoom_)}fit(L,Z){let fe;if(ae(Array.isArray(L)||"function"==typeof L.getSimplifiedGeometry,"Invalid extent or geometry provided as `geometry`"),Array.isArray(L))ae(!lr(L),"Cannot fit empty extent provided as `geometry`"),fe=to(Io(L,this.getProjection()));else if("Circle"===L.getType()){const _e=Io(L.getExtent(),this.getProjection());fe=to(_e),fe.rotate(this.getRotation(),Jn(_e))}else{const _e=function _u(){return va}();fe=_e?L.clone().transform(_e,this.getProjection()):L}this.fitInternal(fe,Z)}rotatedExtentForGeometry(L){const Z=this.getRotation(),fe=Math.cos(Z),_e=Math.sin(-Z),Ue=L.getFlatCoordinates(),Xe=L.getStride();let lt=1/0,bt=1/0,Ht=-1/0,Wt=-1/0;for(let pn=0,On=Ue.length;pn<On;pn+=Xe){const tr=Ue[pn]*fe-Ue[pn+1]*_e,ar=Ue[pn]*_e+Ue[pn+1]*fe;lt=Math.min(lt,tr),bt=Math.min(bt,ar),Ht=Math.max(Ht,tr),Wt=Math.max(Wt,ar)}return[lt,bt,Ht,Wt]}fitInternal(L,Z){let fe=(Z=Z||{}).size;fe||(fe=this.getViewportSizeMinusPadding_());const _e=void 0!==Z.padding?Z.padding:[0,0,0,0],Ue=void 0!==Z.nearest&&Z.nearest;let Xe;Xe=void 0!==Z.minResolution?Z.minResolution:void 0!==Z.maxZoom?this.getResolutionForZoom(Z.maxZoom):0;const lt=this.rotatedExtentForGeometry(L);let bt=this.getResolutionForExtentInternal(lt,[fe[0]-_e[1]-_e[3],fe[1]-_e[0]-_e[2]]);bt=isNaN(bt)?Xe:Math.max(bt,Xe),bt=this.getConstrainedResolution(bt,Ue?0:1);const Ht=this.getRotation(),Wt=Math.sin(Ht),pn=Math.cos(Ht),On=Jn(lt);On[0]+=(_e[1]-_e[3])/2*bt,On[1]+=(_e[0]-_e[2])/2*bt;const Tr=this.getConstrainedCenter([On[0]*pn-On[1]*Wt,On[1]*pn+On[0]*Wt],bt),Ir=Z.callback?Z.callback:d;void 0!==Z.duration?this.animateInternal({resolution:bt,center:Tr,duration:Z.duration,easing:Z.easing},Ir):(this.targetResolution_=bt,this.targetCenter_=Tr,this.applyTargetState_(!1,!0),Cs(Ir,!0))}centerOn(L,Z,fe){this.centerOnInternal(ss(L,this.getProjection()),Z,fe)}centerOnInternal(L,Z,fe){this.setCenterInternal(Vr(L,Z,fe,this.getResolution(),this.getRotation()))}calculateCenterShift(L,Z,fe,_e){let Ue;const Xe=this.padding_;if(Xe&&L){const lt=this.getViewportSizeMinusPadding_(-fe),bt=Vr(L,_e,[lt[0]/2+Xe[3],lt[1]/2+Xe[0]],Z,fe);Ue=[L[0]-bt[0],L[1]-bt[1]]}return Ue}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(L){const Z=xs(this.targetCenter_,this.getProjection());this.setCenter([Z[0]+L[0],Z[1]+L[1]])}adjustCenterInternal(L){const Z=this.targetCenter_;this.setCenterInternal([Z[0]+L[0],Z[1]+L[1]])}adjustResolution(L,Z){Z=Z&&ss(Z,this.getProjection()),this.adjustResolutionInternal(L,Z)}adjustResolutionInternal(L,Z){const fe=this.getAnimating()||this.getInteracting(),_e=this.getViewportSize_(this.getRotation()),Ue=this.constraints_.resolution(this.targetResolution_*L,0,_e,fe);Z&&(this.targetCenter_=this.calculateCenterZoom(Ue,Z)),this.targetResolution_*=L,this.applyTargetState_()}adjustZoom(L,Z){this.adjustResolution(Math.pow(this.zoomFactor_,-L),Z)}adjustRotation(L,Z){Z&&(Z=ss(Z,this.getProjection())),this.adjustRotationInternal(L,Z)}adjustRotationInternal(L,Z){const fe=this.getAnimating()||this.getInteracting(),_e=this.constraints_.rotation(this.targetRotation_+L,fe);Z&&(this.targetCenter_=this.calculateCenterRotate(_e,Z)),this.targetRotation_+=L,this.applyTargetState_()}setCenter(L){this.setCenterInternal(L&&ss(L,this.getProjection()))}setCenterInternal(L){this.targetCenter_=L,this.applyTargetState_()}setHint(L,Z){return this.hints_[L]+=Z,this.changed(),this.hints_[L]}setResolution(L){this.targetResolution_=L,this.applyTargetState_()}setRotation(L){this.targetRotation_=L,this.applyTargetState_()}setZoom(L){this.setResolution(this.getResolutionForZoom(L))}applyTargetState_(L,Z){const fe=this.getAnimating()||this.getInteracting()||Z,_e=this.constraints_.rotation(this.targetRotation_,fe),Ue=this.getViewportSize_(_e),Xe=this.constraints_.resolution(this.targetResolution_,0,Ue,fe),lt=this.constraints_.center(this.targetCenter_,Xe,Ue,fe,this.calculateCenterShift(this.targetCenter_,Xe,_e,Ue));this.get(Se.ROTATION)!==_e&&this.set(Se.ROTATION,_e),this.get(Se.RESOLUTION)!==Xe&&(this.set(Se.RESOLUTION,Xe),this.set("zoom",this.getZoom(),!0)),(!lt||!this.get(Se.CENTER)||!fn(this.get(Se.CENTER),lt))&&this.set(Se.CENTER,lt),this.getAnimating()&&!L&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(L,Z,fe){L=void 0!==L?L:200;const _e=Z||0,Ue=this.constraints_.rotation(this.targetRotation_),Xe=this.getViewportSize_(Ue),lt=this.constraints_.resolution(this.targetResolution_,_e,Xe),bt=this.constraints_.center(this.targetCenter_,lt,Xe,!1,this.calculateCenterShift(this.targetCenter_,lt,Ue,Xe));if(0===L&&!this.cancelAnchor_)return this.targetResolution_=lt,this.targetRotation_=Ue,this.targetCenter_=bt,void this.applyTargetState_();fe=fe||(0===L?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==lt||this.getRotation()!==Ue||!this.getCenterInternal()||!fn(this.getCenterInternal(),bt))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:Ue,center:bt,resolution:lt,duration:L,easing:Zo,anchor:fe}))}beginInteraction(){this.resolveConstraints(0),this.setHint(1,1)}endInteraction(L,Z,fe){fe=fe&&ss(fe,this.getProjection()),this.endInteractionInternal(L,Z,fe)}endInteractionInternal(L,Z,fe){this.getInteracting()&&(this.setHint(1,-1),this.resolveConstraints(L,Z,fe))}getConstrainedCenter(L,Z){const fe=this.getViewportSize_(this.getRotation());return this.constraints_.center(L,Z||this.getResolution(),fe)}getConstrainedZoom(L,Z){const fe=this.getResolutionForZoom(L);return this.getZoomForResolution(this.getConstrainedResolution(fe,Z))}getConstrainedResolution(L,Z){Z=Z||0;const fe=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(L,Z,fe)}};function Fo(re,L){if(!re.visible)return!1;const Z=L.resolution;if(Z<re.minResolution||Z>=re.maxResolution)return!1;const fe=L.zoom;return fe>re.minZoom&&fe<=re.maxZoom}const Bo=class To extends ge{constructor(L){const Z=Object.assign({},L);delete Z.source,super(Z),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,L.render&&(this.render=L.render),L.map&&this.setMap(L.map),this.addChangeListener("source",this.handleSourcePropertyChange_),this.setSource(L.source?L.source:null)}getLayersArray(L){return(L=L||[]).push(this),L}getLayerStatesArray(L){return(L=L||[]).push(this.getLayerState()),L}getSource(){return this.get("source")||null}getRenderSource(){return this.getSource()}getSourceState(){const L=this.getSource();return L?L.getState():"undefined"}handleSourceChange_(){this.changed(),!this.sourceReady_&&"ready"===this.getSource().getState()&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(P(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const L=this.getSource();L&&(this.sourceChangeKey_=w(L,"change",this.handleSourceChange_,this),"ready"===L.getState()&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(L){return this.renderer_?this.renderer_.getFeatures(L):Promise.resolve([])}getData(L){return this.renderer_&&this.rendered?this.renderer_.getData(L):null}isVisible(L){let Z;const fe=this.getMapInternal();let _e;!L&&fe&&(L=fe.getView()),Z=L instanceof Yr?{viewState:L.getState(),extent:L.calculateExtent()}:L,!Z.layerStatesArray&&fe&&(Z.layerStatesArray=fe.getLayerGroup().getLayerStatesArray()),_e=Z.layerStatesArray?Z.layerStatesArray.find(Xe=>Xe.layer===this):this.getLayerState();const Ue=this.getExtent();return Fo(_e,Z.viewState)&&(!Ue||$n(Ue,Z.extent))}getAttributions(L){if(!this.isVisible(L))return[];let Z;const fe=this.getSource();if(fe&&(Z=fe.getAttributions()),!Z)return[];let Ue=Z(L instanceof Yr?L.getViewStateAndExtent():L);return Array.isArray(Ue)||(Ue=[Ue]),Ue}render(L,Z){const fe=this.getRenderer();return fe.prepareFrame(L)?(this.rendered=!0,fe.renderFrame(L,Z)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(L,Z){}renderDeferred(L){const Z=this.getRenderer();Z&&Z.renderDeferred(L)}setMapInternal(L){L||this.unrender(),this.set("map",L)}getMapInternal(){return this.get("map")}setMap(L){this.mapPrecomposeKey_&&(P(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),L||this.changed(),this.mapRenderKey_&&(P(this.mapRenderKey_),this.mapRenderKey_=null),L&&(this.mapPrecomposeKey_=w(L,"precompose",function(Z){const _e=Z.frameState.layerStatesArray,Ue=this.getLayerState(!1);ae(!_e.some(function(Xe){return Xe.layer===Ue.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),_e.push(Ue)},this),this.mapRenderKey_=w(this,"change",L.render,L),this.changed())}setSource(L){this.set("source",L)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};var ya=da(1414);const fi_IDLE=0,fi_LOADING=1,fi_LOADED=2,fi_ERROR=3;function Su(re){return re[0]>0&&re[1]>0}function hi(re,L){return Array.isArray(re)?re:(void 0===L?L=[re,re]:(L[0]=re,L[1]=re),L)}class Wi{constructor(L){this.opacity_=L.opacity,this.rotateWithView_=L.rotateWithView,this.rotation_=L.rotation,this.scale_=L.scale,this.scaleArray_=hi(L.scale),this.displacement_=L.displacement,this.declutterMode_=L.declutterMode}clone(){const L=this.getScale();return new Wi({opacity:this.getOpacity(),scale:Array.isArray(L)?L.slice():L,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return U()}getImage(L){return U()}getHitDetectionImage(){return U()}getPixelRatio(L){return 1}getImageState(){return U()}getImageSize(){return U()}getOrigin(){return U()}getSize(){return U()}setDisplacement(L){this.displacement_=L}setOpacity(L){this.opacity_=L}setRotateWithView(L){this.rotateWithView_=L}setRotation(L){this.rotation_=L}setScale(L){this.scale_=L,this.scaleArray_=hi(L)}listenImageChange(L){U()}load(){U()}unlistenImageChange(L){U()}ready(){return Promise.resolve()}}const so=Wi,No={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var Ls={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"],whitepoint:{2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}}};Ls.max=Ls.whitepoint[2].D65,Ls.rgb=function(re,L){var Ue,Xe,lt,Z=re[0]/(L=L||Ls.whitepoint[2].E)[0],fe=re[1]/L[1],_e=re[2]/L[2];return Xe=-.96924363628087*Z+1.87596750150772*fe+.041555057407175*_e,lt=.055630079696993*Z+-.20397695888897*fe+1.056971514242878*_e,Ue=(Ue=3.240969941904521*Z+-1.537383177570093*fe+-.498610760293*_e)>.0031308?1.055*Math.pow(Ue,1/2.4)-.055:Ue*=12.92,Xe=Xe>.0031308?1.055*Math.pow(Xe,1/2.4)-.055:Xe*=12.92,lt=lt>.0031308?1.055*Math.pow(lt,1/2.4)-.055:lt*=12.92,[255*(Ue=Math.min(Math.max(0,Ue),1)),255*(Xe=Math.min(Math.max(0,Xe),1)),255*(lt=Math.min(Math.max(0,lt),1))]},No.xyz=function(re,L){var Z=re[0]/255,fe=re[1]/255,_e=re[2]/255;return[(.41239079926595*(Z=Z>.04045?Math.pow((Z+.055)/1.055,2.4):Z/12.92)+.35758433938387*(fe=fe>.04045?Math.pow((fe+.055)/1.055,2.4):fe/12.92)+.18048078840183*(_e=_e>.04045?Math.pow((_e+.055)/1.055,2.4):_e/12.92))*(L=L||Ls.whitepoint[2].E)[0],(.21263900587151*Z+.71516867876775*fe+.072192315360733*_e)*L[1],(.019330818715591*Z+.11919477979462*fe+.95053215224966*_e)*L[2]]};const tt=Ls,at={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(re,L,Z){var fe,_e,Ue,Ht,pn,On,tr;return 0===(Ue=re[0])?[0,0,0]:(fe=re[1]/(13*Ue)+4*(pn=tt.whitepoint[Z=Z||2][L=L||"D65"][0])/(pn+15*(On=tt.whitepoint[Z][L][1])+3*(tr=tt.whitepoint[Z][L][2]))||0,_e=re[2]/(13*Ue)+9*On/(pn+15*On+3*tr)||0,[9*(Ht=Ue>8?On*Math.pow((Ue+16)/116,3):On*Ue*.0011070564598794539)*fe/(4*_e)||0,Ht,Ht*(12-3*fe-20*_e)/(4*_e)||0])}};tt.luv=function(re,L,Z){var fe,_e,Ue,bt,Ht,Wt,pn,On,tr,ar,Tr;ar=4*(pn=tt.whitepoint[Z=Z||2][L=L||"D65"][0])/(pn+15*(On=tt.whitepoint[Z][L][1])+3*(tr=tt.whitepoint[Z][L][2])),Tr=9*On/(pn+15*On+3*tr),fe=4*(bt=re[0])/(bt+15*(Ht=re[1])+3*(Wt=re[2]))||0,_e=9*Ht/(bt+15*Ht+3*Wt)||0;var zr=Ht/On;return[Ue=zr<=.008856451679035631?903.2962962962961*zr:116*Math.pow(zr,1/3)-16,13*Ue*(fe-ar),13*Ue*(_e-Tr)]};var dt={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(re){var Xe,Z=re[1];return Xe=re[2]/360*2*Math.PI,[re[0],Z*Math.cos(Xe),Z*Math.sin(Xe)]},xyz:function(re){return at.xyz(dt.luv(re))}};const N=dt;at.lchuv=function(re){var L=re[0],Z=re[1],fe=re[2],_e=Math.sqrt(Z*Z+fe*fe),Xe=360*Math.atan2(fe,Z)/2/Math.PI;return Xe<0&&(Xe+=360),[L,_e,Xe]},tt.lchuv=function(re){return at.lchuv(tt.luv(re))};const W={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},H=function G(re){var L,_e,Z=[],fe=1;if("number"==typeof re)return{space:"rgb",values:[re>>>16,(65280&re)>>>8,255&re],alpha:1};if("number"==typeof re)return{space:"rgb",values:[re>>>16,(65280&re)>>>8,255&re],alpha:1};if(re=String(re).toLowerCase(),W[re])Z=W[re].slice(),_e="rgb";else if("transparent"===re)fe=0,_e="rgb",Z=[0,0,0];else if("#"===re[0]){var Ue=re.slice(1),Xe=Ue.length;fe=1,Xe<=4?(Z=[parseInt(Ue[0]+Ue[0],16),parseInt(Ue[1]+Ue[1],16),parseInt(Ue[2]+Ue[2],16)],4===Xe&&(fe=parseInt(Ue[3]+Ue[3],16)/255)):(Z=[parseInt(Ue[0]+Ue[1],16),parseInt(Ue[2]+Ue[3],16),parseInt(Ue[4]+Ue[5],16)],8===Xe&&(fe=parseInt(Ue[6]+Ue[7],16)/255)),Z[0]||(Z[0]=0),Z[1]||(Z[1]=0),Z[2]||(Z[2]=0),_e="rgb"}else if(L=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(re)){var Ht="cmyk"===(_e=L[1].replace(/a$/,""))?4:"gray"===_e?1:3;Z=L[2].trim().split(/\s*[,\/]\s*|\s+/),"color"===_e&&(_e=Z.shift()),fe=(Z=Z.map(function(Wt,pn){if("%"===Wt[Wt.length-1])return Wt=parseFloat(Wt)/100,3===pn?Wt:"rgb"===_e?255*Wt:"h"===_e[0]||"l"===_e[0]&&!pn?100*Wt:"lab"===_e?125*Wt:"lch"===_e?pn<2?150*Wt:360*Wt:"o"!==_e[0]||pn?"oklab"===_e?.4*Wt:"oklch"===_e?pn<2?.4*Wt:360*Wt:Wt:Wt;if("h"===_e[pn]||2===pn&&"h"===_e[_e.length-1]){if(void 0!==C[Wt])return C[Wt];if(Wt.endsWith("deg"))return parseFloat(Wt);if(Wt.endsWith("turn"))return 360*parseFloat(Wt);if(Wt.endsWith("grad"))return 360*parseFloat(Wt)/400;if(Wt.endsWith("rad"))return 180*parseFloat(Wt)/Math.PI}return"none"===Wt?0:parseFloat(Wt)})).length>Ht?Z.pop():1}else/[0-9](?:\s|\/|,)/.test(re)&&(Z=re.match(/([0-9]+)/g).map(function(Wt){return parseFloat(Wt)}),_e=re.match(/([a-z])/gi)?.join("")?.toLowerCase()||"rgb");return{space:_e,values:Z,alpha:fe}};var C={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};const Q={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(re){var _e,Ue,Xe,lt,bt,L=re[0]/360,Z=re[1]/100,fe=re[2]/100,Ht=0;if(0===Z)return[bt=255*fe,bt,bt];for(_e=2*fe-(Ue=fe<.5?fe*(1+Z):fe+Z-fe*Z),lt=[0,0,0];Ht<3;)(Xe=L+1/3*-(Ht-1))<0?Xe++:Xe>1&&Xe--,lt[Ht++]=255*(bt=6*Xe<1?_e+6*(Ue-_e)*Xe:2*Xe<1?Ue:3*Xe<2?_e+(Ue-_e)*(2/3-Xe)*6:_e);return lt}};No.hsl=function(re){var lt,Ht,L=re[0]/255,Z=re[1]/255,fe=re[2]/255,_e=Math.min(L,Z,fe),Ue=Math.max(L,Z,fe),Xe=Ue-_e;return Ue===_e?lt=0:L===Ue?lt=(Z-fe)/Xe:Z===Ue?lt=2+(fe-L)/Xe:fe===Ue&&(lt=4+(L-Z)/Xe),(lt=Math.min(60*lt,360))<0&&(lt+=360),Ht=(_e+Ue)/2,[lt,100*(Ue===_e?0:Ht<=.5?Xe/(Ue+_e):Xe/(2-Ue-_e)),100*Ht]};const Ae=1024,De={};let je=0;function Ye(re){if(4===re.length)return re;const L=re.slice();return L[3]=1,L}function Ke(re){const L=tt.lchuv(No.xyz(re));return L[3]=re[3],L}function mt(re){if(De.hasOwnProperty(re))return De[re];if(je>=Ae){let Z=0;for(const fe in De)3&Z++||(delete De[fe],--je)}const L=function oe(re){Array.isArray(re)&&re.raw&&(re=String.raw(...arguments)),re instanceof Number&&(re=+re);var L,_e=H(re);if(!_e.space)return[];const Ue="h"===_e.space[0]?Q.min:No.min,Xe="h"===_e.space[0]?Q.max:No.max;return(L=Array(3))[0]=Math.min(Math.max(_e.values[0],Ue[0]),Xe[0]),L[1]=Math.min(Math.max(_e.values[1],Ue[1]),Xe[1]),L[2]=Math.min(Math.max(_e.values[2],Ue[2]),Xe[2]),"h"===_e.space[0]&&(L=Q.rgb(L)),L.push(Math.min(Math.max(_e.alpha,0),1)),L}(re);if(4!==L.length)throw new Error('Failed to parse "'+re+'" as color');for(const Z of L)if(isNaN(Z))throw new Error('Failed to parse "'+re+'" as color');return Et(L),De[re]=L,++je,L}function xt(re){return Array.isArray(re)?re:mt(re)}function Et(re){return re[0]=ce(re[0]+.5|0,0,255),re[1]=ce(re[1]+.5|0,0,255),re[2]=ce(re[2]+.5|0,0,255),re[3]=ce(re[3],0,1),re}function Dt(re){let L=re[0];L!=(0|L)&&(L=L+.5|0);let Z=re[1];Z!=(0|Z)&&(Z=Z+.5|0);let fe=re[2];return fe!=(0|fe)&&(fe=fe+.5|0),"rgba("+L+","+Z+","+fe+","+(void 0===re[3]?1:Math.round(1e3*re[3])/1e3)+")"}const qt=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",Ft=qt.includes("firefox"),Kt=(qt.includes("safari")&&!qt.includes("chrom")&&(qt.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(qt)),qt.includes("webkit")&&!qt.includes("edge")),kn=qt.includes("macintosh"),En=typeof devicePixelRatio<"u"?devicePixelRatio:1,Bn=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,qn=typeof Image<"u"&&Image.prototype.decode,gr=function(){let re=!1;try{const L=Object.defineProperty({},"passive",{get:function(){re=!0}});window.addEventListener("_",null,L),window.removeEventListener("_",null,L)}catch{}return re}();function wr(re,L,Z,fe){let _e;return _e=Z&&Z.length?Z.shift():Bn?new OffscreenCanvas(re||300,L||300):document.createElement("canvas"),re&&(_e.width=re),L&&(_e.height=L),_e.getContext("2d",fe)}let sr;function _r(){return sr||(sr=wr(1,1)),sr}function Dr(re){const L=re.canvas;L.width=1,L.height=1,re.clearRect(0,0,1,1)}function br(re,L){const Z=L.parentNode;Z&&Z.replaceChild(re,L)}function jr(re){return re&&re.parentNode?re.parentNode.removeChild(re):null}function Ua(re,L,Z){return L+":"+re+":"+(Z?xt(Z):"null")}const aa=new class ga{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let L=0;for(const Z in this.cache_)!(3&L++)&&!this.cache_[Z].hasListener()&&(delete this.cache_[Z],delete this.patternCache_[Z],--this.cacheSize_)}}get(L,Z,fe){const _e=Ua(L,Z,fe);return _e in this.cache_?this.cache_[_e]:null}getPattern(L,Z,fe){const _e=Ua(L,Z,fe);return _e in this.patternCache_?this.patternCache_[_e]:null}set(L,Z,fe,_e,Ue){const Xe=Ua(L,Z,fe),lt=Xe in this.cache_;this.cache_[Xe]=_e,Ue&&(_e.getImageState()===fi_IDLE&&_e.load(),_e.getImageState()===fi_LOADING?_e.ready().then(()=>{this.patternCache_[Xe]=_r().createPattern(_e.getImage(1),"repeat")}):this.patternCache_[Xe]=_r().createPattern(_e.getImage(1),"repeat")),lt||++this.cacheSize_}setSize(L){this.maxCacheSize_=L,this.expire()}};let Ni=null;class wi extends h{constructor(L,Z,fe,_e,Ue){super(),this.hitDetectionImage_=null,this.image_=L,this.crossOrigin_=fe,this.canvas_={},this.color_=Ue,this.imageState_=void 0===_e?fi_IDLE:_e,this.size_=L&&L.width&&L.height?[L.width,L.height]:null,this.src_=Z,this.ready_=null}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===fi_LOADED){Ni||(Ni=wr(1,1,void 0,{willReadFrequently:!0})),Ni.drawImage(this.image_,0,0);try{Ni.getImageData(0,0,1,1),this.tainted_=!1}catch{Ni=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent("change")}handleImageError_(){this.imageState_=fi_ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=fi_LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(L){return this.image_||this.initializeImage_(),this.replaceColor_(L),this.canvas_[L]?this.canvas_[L]:this.image_}getPixelRatio(L){return this.replaceColor_(L),this.canvas_[L]?L:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const L=this.size_[0],Z=this.size_[1],fe=wr(L,Z);fe.fillRect(0,0,L,Z),this.hitDetectionImage_=fe.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===fi_IDLE){this.image_||this.initializeImage_(),this.imageState_=fi_LOADING;try{void 0!==this.src_&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&function pi(re,L){return L&&(re.src=L),re.src&&qn?new Promise((Z,fe)=>re.decode().then(()=>Z(re)).catch(_e=>re.complete&&re.width?Z(re):fe(_e))):function li(re,L){return new Promise((Z,fe)=>{function _e(){Xe(),Z(re)}function Ue(){Xe(),fe(new Error("Image load error"))}function Xe(){re.removeEventListener("load",_e),re.removeEventListener("error",Ue)}re.addEventListener("load",_e),re.addEventListener("error",Ue),L&&(re.src=L)})}(re)}(this.image_,this.src_).then(L=>{this.image_=L,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(L){if(!this.color_||this.canvas_[L]||this.imageState_!==fi_LOADED)return;const Z=this.image_,fe=document.createElement("canvas");fe.width=Math.ceil(Z.width*L),fe.height=Math.ceil(Z.height*L);const _e=fe.getContext("2d");_e.scale(L,L),_e.drawImage(Z,0,0),_e.globalCompositeOperation="multiply",_e.fillStyle=function de(re){return"string"==typeof re?re:Dt(re)}(this.color_),_e.fillRect(0,0,fe.width/L,fe.height/L),_e.globalCompositeOperation="destination-in",_e.drawImage(Z,0,0),this.canvas_[L]=fe}ready(){return this.ready_||(this.ready_=new Promise(L=>{this.imageState_===fi_LOADED||this.imageState_===fi_ERROR?L():this.addEventListener("change",function Z(){(this.imageState_===fi_LOADED||this.imageState_===fi_ERROR)&&(this.removeEventListener("change",Z),L())})})),this.ready_}}function ra(re,L,Z,fe,_e,Ue){let Xe=void 0===L?void 0:aa.get(L,Z,_e);return Xe||(Xe=new wi(re,re&&"src"in re?re.src||void 0:L,Z,fe,_e),aa.set(L,Z,_e,Xe,Ue)),Ue&&Xe&&!aa.getPattern(L,Z,_e)&&aa.set(L,Z,_e,Xe,Ue),Xe}function Si(re){return re?Array.isArray(re)?Dt(re):"object"==typeof re&&"src"in re?function ua(re){if(!re.offset||!re.size)return aa.getPattern(re.src,"anonymous",re.color);const L=re.src+":"+re.offset,Z=aa.getPattern(L,void 0,re.color);if(Z)return Z;const fe=aa.get(re.src,"anonymous",null);if(fe.getImageState()!==fi_LOADED)return null;const _e=wr(re.size[0],re.size[1]);return _e.drawImage(fe.getImage(1),re.offset[0],re.offset[1],re.size[0],re.size[1],0,0,re.size[0],re.size[1]),ra(_e.canvas,L,void 0,fi_LOADED,re.color,!0),aa.getPattern(L,void 0,re.color)}(re):re:null}const ia="ol-hidden",Is="ol-unselectable",Ti="ol-control",zl="ol-collapsed",Eu=(new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),new q);class hh extends so{constructor(L){super({opacity:1,rotateWithView:void 0!==L.rotateWithView&&L.rotateWithView,rotation:void 0!==L.rotation?L.rotation:0,scale:void 0!==L.scale?L.scale:1,displacement:void 0!==L.displacement?L.displacement:[0,0],declutterMode:L.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=void 0!==L.fill?L.fill:null,this.origin_=[0,0],this.points_=L.points,this.radius_=L.radius,this.radius2_=L.radius2,this.angle_=void 0!==L.angle?L.angle:0,this.stroke_=void 0!==L.stroke?L.stroke:null,this.imageState_=this.fill_&&this.fill_.loading()?fi_LOADING:fi_LOADED,this.imageState_===fi_LOADING&&this.ready().then(()=>this.imageState_=fi_LOADED),this.render()}clone(){const L=this.getScale(),Z=new hh({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(L)?L.slice():L,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return Z.setOpacity(this.getOpacity()),Z}getAnchor(){const L=this.size_,Z=this.getDisplacement(),fe=this.getScaleArray();return[L[0]/2-Z[0]/fe[0],L[1]/2+Z[1]/fe[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(L){this.fill_=L,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(L){let Z=this.canvases_[L];if(!Z){const fe=this.renderOptions_,_e=wr(fe.size*L,fe.size*L);this.draw_(fe,_e,L),Z=_e.canvas,this.canvases_[L]=Z}return Z}getPixelRatio(L){return L}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(L){this.stroke_=L,this.render()}listenImageChange(L){}load(){}unlistenImageChange(L){}calculateLineJoinSize_(L,Z,fe){if(0===Z||this.points_===1/0||"bevel"!==L&&"miter"!==L)return Z;let _e=this.radius_,Ue=void 0===this.radius2_?_e:this.radius2_;if(_e<Ue){const Ci=_e;_e=Ue,Ue=Ci}const lt=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),bt=Ue*Math.sin(lt),Wt=_e-Math.sqrt(Ue*Ue-bt*bt),pn=Math.sqrt(bt*bt+Wt*Wt),On=pn/bt;if("miter"===L&&On<=fe)return On*Z;const tr=Z/2/On,ar=Z/2*(Wt/pn),Ir=Math.sqrt((_e+tr)*(_e+tr)+ar*ar)-_e;if(void 0===this.radius2_||"bevel"===L)return 2*Ir;const Br=_e*Math.sin(lt),ri=Ue-Math.sqrt(_e*_e-Br*Br),Xr=Math.sqrt(Br*Br+ri*ri)/Br;return Xr<=fe?2*Math.max(Ir,Xr*Z/2-Ue-_e):2*Ir}createRenderOptions(){let Xe,L="round",Z="round",fe=0,_e=null,Ue=0,lt=0;this.stroke_&&(Xe=Si(this.stroke_.getColor()??"#000"),lt=this.stroke_.getWidth()??1,_e=this.stroke_.getLineDash(),Ue=this.stroke_.getLineDashOffset()??0,Z=this.stroke_.getLineJoin()??"round",L=this.stroke_.getLineCap()??"round",fe=this.stroke_.getMiterLimit()??10);const bt=this.calculateLineJoinSize_(Z,lt,fe),Ht=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:Xe,strokeWidth:lt,size:Math.ceil(2*Ht+bt),lineCap:L,lineDash:_e,lineDashOffset:Ue,lineJoin:Z,miterLimit:fe}}render(){this.renderOptions_=this.createRenderOptions();const L=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[L,L]}draw_(L,Z,fe){if(Z.scale(fe,fe),Z.translate(L.size/2,L.size/2),this.createPath_(Z),this.fill_){let _e=this.fill_.getColor();null===_e&&(_e="#000"),Z.fillStyle=Si(_e),Z.fill()}L.strokeStyle&&(Z.strokeStyle=L.strokeStyle,Z.lineWidth=L.strokeWidth,L.lineDash&&(Z.setLineDash(L.lineDash),Z.lineDashOffset=L.lineDashOffset),Z.lineCap=L.lineCap,Z.lineJoin=L.lineJoin,Z.miterLimit=L.miterLimit,Z.stroke())}createHitDetectionCanvas_(L){let Z;if(this.fill_){let fe=this.fill_.getColor(),_e=0;"string"==typeof fe&&(fe=xt(fe)),null===fe?_e=1:Array.isArray(fe)&&(_e=4===fe.length?fe[3]:1),0===_e&&(Z=wr(L.size,L.size),this.drawHitDetectionCanvas_(L,Z))}return Z?Z.canvas:this.getImage(1)}createPath_(L){let Z=this.points_;const fe=this.radius_;if(Z===1/0)L.arc(0,0,fe,0,2*Math.PI);else{const _e=void 0===this.radius2_?fe:this.radius2_;void 0!==this.radius2_&&(Z*=2);const Ue=this.angle_-Math.PI/2,Xe=2*Math.PI/Z;for(let lt=0;lt<Z;lt++){const bt=Ue+lt*Xe,Ht=lt%2==0?fe:_e;L.lineTo(Ht*Math.cos(bt),Ht*Math.sin(bt))}L.closePath()}}drawHitDetectionCanvas_(L,Z){Z.translate(L.size/2,L.size/2),this.createPath_(Z),Z.fillStyle="#000",Z.fill(),L.strokeStyle&&(Z.strokeStyle=L.strokeStyle,Z.lineWidth=L.strokeWidth,L.lineDash&&(Z.setLineDash(L.lineDash),Z.lineDashOffset=L.lineDashOffset),Z.lineJoin=L.lineJoin,Z.miterLimit=L.miterLimit,Z.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}const Jh=hh;class Cf extends Jh{constructor(L){super({points:1/0,fill:(L=L||{radius:5}).fill,radius:L.radius,stroke:L.stroke,scale:void 0!==L.scale?L.scale:1,rotation:void 0!==L.rotation?L.rotation:0,rotateWithView:void 0!==L.rotateWithView&&L.rotateWithView,displacement:void 0!==L.displacement?L.displacement:[0,0],declutterMode:L.declutterMode})}clone(){const L=this.getScale(),Z=new Cf({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(L)?L.slice():L,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return Z.setOpacity(this.getOpacity()),Z}setRadius(L){this.radius_=L,this.render()}}const dh=Cf;class Wc{constructor(L){L=L||{},this.patternImage_=null,this.color_=null,void 0!==L.color&&this.setColor(L.color)}clone(){const L=this.getColor();return new Wc({color:Array.isArray(L)?L.slice():L||void 0})}getColor(){return this.color_}setColor(L){if(null!==L&&"object"==typeof L&&"src"in L){const Z=ra(null,L.src,"anonymous",void 0,L.offset?null:L.color?L.color:null,!(L.offset&&L.size));Z.ready().then(()=>{this.patternImage_=null}),Z.getImageState()===fi_IDLE&&Z.load(),Z.getImageState()===fi_LOADING&&(this.patternImage_=Z)}this.color_=L}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}const Lf=Wc;class Yc{constructor(L){this.color_=void 0!==(L=L||{}).color?L.color:null,this.lineCap_=L.lineCap,this.lineDash_=void 0!==L.lineDash?L.lineDash:null,this.lineDashOffset_=L.lineDashOffset,this.lineJoin_=L.lineJoin,this.miterLimit_=L.miterLimit,this.width_=L.width}clone(){const L=this.getColor();return new Yc({color:Array.isArray(L)?L.slice():L||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(L){this.color_=L}setLineCap(L){this.lineCap_=L}setLineDash(L){this.lineDash_=L}setLineDashOffset(L){this.lineDashOffset_=L}setLineJoin(L){this.lineJoin_=L}setMiterLimit(L){this.miterLimit_=L}setWidth(L){this.width_=L}}const qu=Yc;class Za{constructor(L){L=L||{},this.geometry_=null,this.geometryFunction_=Qh,void 0!==L.geometry&&this.setGeometry(L.geometry),this.fill_=void 0!==L.fill?L.fill:null,this.image_=void 0!==L.image?L.image:null,this.renderer_=void 0!==L.renderer?L.renderer:null,this.hitDetectionRenderer_=void 0!==L.hitDetectionRenderer?L.hitDetectionRenderer:null,this.stroke_=void 0!==L.stroke?L.stroke:null,this.text_=void 0!==L.text?L.text:null,this.zIndex_=L.zIndex}clone(){let L=this.getGeometry();return L&&"object"==typeof L&&(L=L.clone()),new Za({geometry:L??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(L){this.renderer_=L}setHitDetectionRenderer(L){this.hitDetectionRenderer_=L}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(L){this.fill_=L}getImage(){return this.image_}setImage(L){this.image_=L}getStroke(){return this.stroke_}setStroke(L){this.stroke_=L}getText(){return this.text_}setText(L){this.text_=L}getZIndex(){return this.zIndex_}setGeometry(L){"function"==typeof L?this.geometryFunction_=L:"string"==typeof L?this.geometryFunction_=function(Z){return Z.get(L)}:L?void 0!==L&&(this.geometryFunction_=function(){return L}):this.geometryFunction_=Qh,this.geometry_=L}setZIndex(L){this.zIndex_=L}}let If=null;function $h(re,L){if(!If){const Z=new Lf({color:"rgba(255,255,255,0.4)"}),fe=new qu({color:"#3399CC",width:1.25});If=[new Za({image:new dh({fill:Z,stroke:fe,radius:5}),fill:Z,stroke:fe})]}return If}function Qh(re){return re.getGeometry()}const Pf=Za;function Of(re,L,Z,fe){return void 0!==Z&&void 0!==fe?[Z/re,fe/L]:void 0!==Z?Z/re:void 0!==fe?fe/L:1}class ph extends so{constructor(L){super({opacity:void 0!==(L=L||{}).opacity?L.opacity:1,rotation:void 0!==L.rotation?L.rotation:0,scale:void 0!==L.scale?L.scale:1,displacement:void 0!==L.displacement?L.displacement:[0,0],rotateWithView:void 0!==L.rotateWithView&&L.rotateWithView,declutterMode:L.declutterMode}),this.anchor_=void 0!==L.anchor?L.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==L.anchorOrigin?L.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==L.anchorXUnits?L.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==L.anchorYUnits?L.anchorYUnits:"fraction",this.crossOrigin_=void 0!==L.crossOrigin?L.crossOrigin:null;const Xe=void 0!==L.img?L.img:null;let bt,lt=L.src;if(ae(!(void 0!==lt&&Xe),"`image` and `src` cannot be provided at the same time"),(void 0===lt||0===lt.length)&&Xe&&(lt=Xe.src||j(Xe)),ae(void 0!==lt&&lt.length>0,"A defined and non-empty `src` or `image` must be provided"),ae(!((void 0!==L.width||void 0!==L.height)&&void 0!==L.scale),"`width` or `height` cannot be provided together with `scale`"),void 0!==L.src?bt=fi_IDLE:void 0!==Xe&&(bt="complete"in Xe?Xe.complete?Xe.src?fi_LOADED:fi_IDLE:fi_LOADING:fi_LOADED),this.color_=void 0!==L.color?xt(L.color):null,this.iconImage_=ra(Xe,lt,this.crossOrigin_,bt,this.color_),this.offset_=void 0!==L.offset?L.offset:[0,0],this.offsetOrigin_=void 0!==L.offsetOrigin?L.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==L.size?L.size:null,void 0!==L.width||void 0!==L.height){let Ht,Wt;if(L.size)[Ht,Wt]=L.size;else{const pn=this.getImage(1);if(pn.width&&pn.height)Ht=pn.width,Wt=pn.height;else if(pn instanceof HTMLImageElement){this.initialOptions_=L;const On=()=>{if(this.unlistenImageChange(On),!this.initialOptions_)return;const tr=this.iconImage_.getSize();this.setScale(Of(tr[0],tr[1],L.width,L.height))};return void this.listenImageChange(On)}}void 0!==Ht&&this.setScale(Of(Ht,Wt,L.width,L.height))}}clone(){let L,Z,fe;return this.initialOptions_?(Z=this.initialOptions_.width,fe=this.initialOptions_.height):(L=this.getScale(),L=Array.isArray(L)?L.slice():L),new ph({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:L,width:Z,height:fe,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let L=this.normalizedAnchor_;if(!L){L=this.anchor_;const _e=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!_e)return null;L=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(L[0]*=_e[0]),"fraction"==this.anchorYUnits_&&(L[1]*=_e[1])}if("top-left"!=this.anchorOrigin_){if(!_e)return null;L===this.anchor_&&(L=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(L[0]=-L[0]+_e[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(L[1]=-L[1]+_e[1])}this.normalizedAnchor_=L}const Z=this.getDisplacement(),fe=this.getScaleArray();return[L[0]-Z[0]/fe[0],L[1]+Z[1]/fe[1]]}setAnchor(L){this.anchor_=L,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(L){return this.iconImage_.getImage(L)}getPixelRatio(L){return this.iconImage_.getPixelRatio(L)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let L=this.offset_;if("top-left"!=this.offsetOrigin_){const Z=this.getSize(),fe=this.iconImage_.getSize();if(!Z||!fe)return null;L=L.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(L[0]=fe[0]-Z[0]-L[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(L[1]=fe[1]-Z[1]-L[1])}return this.origin_=L,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const L=this.getScaleArray();return this.size_?this.size_[0]*L[0]:this.iconImage_.getImageState()==fi_LOADED?this.iconImage_.getSize()[0]*L[0]:void 0}getHeight(){const L=this.getScaleArray();return this.size_?this.size_[1]*L[1]:this.iconImage_.getImageState()==fi_LOADED?this.iconImage_.getSize()[1]*L[1]:void 0}setScale(L){delete this.initialOptions_,super.setScale(L)}listenImageChange(L){this.iconImage_.addEventListener("change",L)}load(){this.iconImage_.load()}unlistenImageChange(L){this.iconImage_.removeEventListener("change",L)}ready(){return this.iconImage_.ready()}}const Rf=ph;class ou{constructor(L){this.font_=(L=L||{}).font,this.rotation_=L.rotation,this.rotateWithView_=L.rotateWithView,this.scale_=L.scale,this.scaleArray_=hi(void 0!==L.scale?L.scale:1),this.text_=L.text,this.textAlign_=L.textAlign,this.justify_=L.justify,this.repeat_=L.repeat,this.textBaseline_=L.textBaseline,this.fill_=void 0!==L.fill?L.fill:new Lf({color:"#333"}),this.maxAngle_=void 0!==L.maxAngle?L.maxAngle:Math.PI/4,this.placement_=void 0!==L.placement?L.placement:"point",this.overflow_=!!L.overflow,this.stroke_=void 0!==L.stroke?L.stroke:null,this.offsetX_=void 0!==L.offsetX?L.offsetX:0,this.offsetY_=void 0!==L.offsetY?L.offsetY:0,this.backgroundFill_=L.backgroundFill?L.backgroundFill:null,this.backgroundStroke_=L.backgroundStroke?L.backgroundStroke:null,this.padding_=void 0===L.padding?null:L.padding,this.declutterMode_=L.declutterMode}clone(){const L=this.getScale();return new ou({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(L)?L.slice():L,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(L){this.overflow_=L}setFont(L){this.font_=L}setMaxAngle(L){this.maxAngle_=L}setOffsetX(L){this.offsetX_=L}setOffsetY(L){this.offsetY_=L}setPlacement(L){this.placement_=L}setRepeat(L){this.repeat_=L}setRotateWithView(L){this.rotateWithView_=L}setFill(L){this.fill_=L}setRotation(L){this.rotation_=L}setScale(L){this.scale_=L,this.scaleArray_=hi(void 0!==L?L:1)}setStroke(L){this.stroke_=L}setText(L){this.text_=L}setTextAlign(L){this.textAlign_=L}setJustify(L){this.justify_=L}setTextBaseline(L){this.textBaseline_=L}setBackgroundFill(L){this.backgroundFill_=L}setBackgroundStroke(L){this.backgroundStroke_=L}setPadding(L){this.padding_=L}}const Zc=ou;let rc=0;const Mc=0,no=1<<rc++,ii=1<<rc++,ml=1<<rc++,Uo=1<<rc++,su=1<<rc++,ic=1<<rc++,ms=Math.pow(2,6)-1,ac={[no]:"boolean",[ii]:"number",[ml]:"string",[Uo]:"color",[su]:"number[]",[ic]:"size"},vp=Object.keys(ac).map(Number).sort(l);function zi(re){const L=[];for(const Z of vp)Df(re,Z)&&L.push(ac[Z]);return 0===L.length?"untyped":L.length<3?L.join(" or "):L.slice(0,-1).join(", ")+", or "+L[L.length-1]}function Df(re,L){return(re&L)===L}function Bl(re,L){return!!(re&L)}function oc(re,L){return re===L}class Nl{constructor(L,Z){this.type=L,this.value=Z}}class Xc{constructor(L,Z,...fe){this.type=L,this.operator=Z,this.args=fe}}function gh(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,style:{}}}function $i(re,L,Z){switch(typeof re){case"boolean":return new Nl(no,re);case"number":return new Nl(Z===ic?ic:ii,re);case"string":{let _e=ml;return function It(re){try{return mt(re),!0}catch{return!1}}(re)&&(_e|=Uo),oc(_e&Z,Mc)||(_e&=Z),new Nl(_e,re)}}if(!Array.isArray(re))throw new Error("Expression must be an array or a primitive value");if(0===re.length)throw new Error("Empty expression");if("string"==typeof re[0])return function Tp(re,L,Z){const fe=re[0],_e=mh[fe];if(!_e)throw new Error(`Unknown operator: ${fe}`);return _e(re,L,Z)}(re,L,Z);for(const _e of re)if("number"!=typeof _e)throw new Error("Expected an array of numbers");let fe=su;return 2===re.length?fe|=ic:(3===re.length||4===re.length)&&(fe|=Uo),Z&&(fe&=Z),new Nl(fe,re)}const kr={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string"},mh={[kr.Get]:vi(([re,L])=>void 0!==L?function td(re){switch(re){case"string":return ml;case"color":return Uo;case"number":return ii;case"boolean":return no;case"number[]":return su;default:throw new Error(`Unrecognized type hint: ${re}`)}}(L.value):ms,Li(1,2),function yp(re,L){const Z=$i(re[1],L);if(!(Z instanceof Nl))throw new Error("Expected a literal argument for get operation");if("string"!=typeof Z.value)throw new Error("Expected a string argument for get operation");return L.properties.add(Z.value),3===re.length?[Z,$i(re[2],L)]:[Z]}),[kr.Var]:vi(([re])=>re.type,Li(1,1),function nd(re,L,Z,fe){const _e=re[1];if("string"!=typeof _e)throw new Error("Expected a string argument for var operation");if(L.variables.add(_e),!("variables"in L.style)||void 0===L.style.variables[_e])return[new Nl(ms,_e)];const Xe=$i(L.style.variables[_e],L);if(Xe.value=_e,fe&&!Bl(fe,Xe.type))throw new Error(`The variable ${_e} has type ${zi(Xe.type)} but the following type was expected: ${zi(fe)}`);return[Xe]}),[kr.Id]:vi(ii|ml,sc,function Kc(re,L){L.featureId=!0}),[kr.Concat]:vi(ml,Li(2,1/0),Zi(ms)),[kr.GeometryType]:vi(ml,sc,function xp(re,L){L.geometryType=!0}),[kr.Resolution]:vi(ii,sc),[kr.Zoom]:vi(ii,sc),[kr.Time]:vi(ii,sc),[kr.Any]:vi(no,Li(2,1/0),Zi(no)),[kr.All]:vi(no,Li(2,1/0),Zi(no)),[kr.Not]:vi(no,Li(1,1),Zi(no)),[kr.Equal]:vi(no,Li(2,2),Zi(ms),lu),[kr.NotEqual]:vi(no,Li(2,2),Zi(ms),lu),[kr.GreaterThan]:vi(no,Li(2,2),Zi(ms),lu),[kr.GreaterThanOrEqualTo]:vi(no,Li(2,2),Zi(ms),lu),[kr.LessThan]:vi(no,Li(2,2),Zi(ms),lu),[kr.LessThanOrEqualTo]:vi(no,Li(2,2),Zi(ms),lu),[kr.Multiply]:vi(re=>{let L=ii|Uo;for(let Z=0;Z<re.length;Z++)L&=re[Z].type;return L},Li(2,1/0),Zi(ii|Uo),lu),[kr.Coalesce]:vi(re=>{let L=ms;for(let Z=1;Z<re.length;Z+=2)L&=re[Z].type;return L&=re[re.length-1].type,L},Li(2,1/0),Zi(ms),lu),[kr.Divide]:vi(ii,Li(2,2),Zi(ii)),[kr.Add]:vi(ii,Li(2,1/0),Zi(ii)),[kr.Subtract]:vi(ii,Li(2,2),Zi(ii)),[kr.Clamp]:vi(ii,Li(3,3),Zi(ii)),[kr.Mod]:vi(ii,Li(2,2),Zi(ii)),[kr.Pow]:vi(ii,Li(2,2),Zi(ii)),[kr.Abs]:vi(ii,Li(1,1),Zi(ii)),[kr.Floor]:vi(ii,Li(1,1),Zi(ii)),[kr.Ceil]:vi(ii,Li(1,1),Zi(ii)),[kr.Round]:vi(ii,Li(1,1),Zi(ii)),[kr.Sin]:vi(ii,Li(1,1),Zi(ii)),[kr.Cos]:vi(ii,Li(1,1),Zi(ii)),[kr.Atan]:vi(ii,Li(1,2),Zi(ii)),[kr.Sqrt]:vi(ii,Li(1,1),Zi(ii)),[kr.Match]:vi(re=>{let L=ms;for(let Z=2;Z<re.length;Z+=2)L&=re[Z].type;return L&=re[re.length-1].type,L},Li(4,1/0),rd,function bp(re,L,Z,fe){const _e=re.length-1;let Xe=$i(re[1],L).type;const lt=$i(re[re.length-1],L);let bt=void 0!==fe?fe&lt.type:lt.type;const Ht=new Array(_e-2);for(let pn=0;pn<_e-2;pn+=2){const On=$i(re[pn+2],L),tr=$i(re[pn+3],L);Xe&=On.type,bt&=tr.type,Ht[pn]=On,Ht[pn+1]=tr}const Wt=ml|ii|no;if(!Bl(Wt,Xe))throw new Error(`Expected an input of type ${zi(Wt)} for the interpolate operation, got ${zi(Xe)} instead`);if(Xe&=Wt,oc(bt,Mc))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(re));for(let pn=0;pn<_e-2;pn+=2){const On=$i(re[pn+2],L,Xe),tr=$i(re[pn+3],L,bt);Ht[pn]=On,Ht[pn+1]=tr}return[$i(re[1],L,Xe),...Ht,$i(re[re.length-1],L,bt)]}),[kr.Between]:vi(no,Li(3,3),Zi(ii)),[kr.Interpolate]:vi(re=>{let L=Uo|ii;for(let Z=3;Z<re.length;Z+=2)L&=re[Z].type;return L},Li(6,1/0),rd,function _p(re,L,Z,fe){const _e=re[1];let Ue;switch(_e[0]){case"linear":Ue=1;break;case"exponential":if(Ue=_e[1],"number"!=typeof Ue)throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(Ue)} instead`);break;default:Ue=null}if(!Ue)throw new Error(`Invalid interpolation type: ${JSON.stringify(_e)}`);Ue=$i(Ue,L);let Xe=$i(re[2],L);if(!Bl(ii,Xe.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${zi(Xe.type)} instead`);Xe=$i(re[2],L,ii);const lt=new Array(re.length-3);for(let bt=0;bt<lt.length;bt+=2){let Ht=$i(re[bt+3],L);if(!Bl(ii,Ht.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${zi(Ht.type)} at position ${bt+2} instead`);let Wt=$i(re[bt+4],L);if(!Bl(ii|Uo,Wt.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${zi(Wt.type)} at position ${bt+3} instead`);Ht=$i(re[bt+3],L,ii),Wt=$i(re[bt+4],L,ii|Uo),lt[bt]=Ht,lt[bt+1]=Wt}return[Ue,Xe,...lt]}),[kr.Case]:vi(re=>{let L=ms;for(let Z=1;Z<re.length;Z+=2)L&=re[Z].type;return L&=re[re.length-1].type,L},Li(3,1/0),function jl(re,L){const fe=re.length-1;if(fe%2==0)throw new Error(`An odd amount of arguments was expected for operation ${re[0]}, got ${JSON.stringify(fe)} instead`)},function wp(re,L,Z,fe){const _e=$i(re[re.length-1],L,fe);let Ue=void 0!==fe?fe&_e.type:_e.type;const Xe=new Array(re.length-1);for(let lt=0;lt<Xe.length-1;lt+=2){const bt=$i(re[lt+1],L),Ht=$i(re[lt+2],L,fe);if(!Bl(no,bt.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${zi(bt.type)} at position ${lt} instead`);Ue&=Ht.type,Xe[lt]=bt,Xe[lt+1]=Ht}if(oc(Ue,Mc))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(re));for(let lt=0;lt<Xe.length-1;lt+=2)Xe[lt+1]=$i(re[lt+2],L,Ue);return Xe[Xe.length-1]=$i(re[re.length-1],L,Ue),Xe}),[kr.In]:vi(no,Li(2,2),function id(re,L){let Z=re[2];if(!Array.isArray(Z))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if("string"==typeof Z[0]){if("literal"!==Z[0])throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(Z[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');Z=Z[1]}let fe=ml|ii;const _e=new Array(Z.length);for(let Xe=0;Xe<_e.length;Xe++){const lt=$i(Z[Xe],L);fe&=lt.type,_e[Xe]=lt}if(oc(fe,Mc))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(re));return[$i(re[1],L,fe),..._e]}),[kr.Number]:vi(ii,Li(1,1/0),Zi(ms)),[kr.String]:vi(ml,Li(1,1/0),Zi(ms)),[kr.Array]:vi(re=>2===re.length?su|ic:3===re.length||4===re.length?su|Uo:su,Li(1,1/0),Zi(ii)),[kr.Color]:vi(Uo,Li(1,4),Zi(ii)),[kr.Band]:vi(ii,Li(1,3),Zi(ii)),[kr.Palette]:vi(Uo,Li(2,2),function Sc(re,L){const Z=$i(re[1],L,ii);if(Z.type!==ii)throw new Error(`The first argument of palette must be an number, got ${zi(Z.type)} instead`);const fe=re[2];if(!Array.isArray(fe))throw new Error("The second argument of palette must be an array");const _e=new Array(fe.length);for(let Ue=0;Ue<_e.length;Ue++){const Xe=$i(fe[Ue],L,Uo);if(!(Xe instanceof Nl))throw new Error(`The palette color at index ${Ue} must be a literal value`);if(!Bl(Xe.type,Uo))throw new Error(`The palette color at index ${Ue} should be of type color, got ${zi(Xe.type)} instead`);_e[Ue]=Xe}return[Z,..._e]}),[kr.ToString]:vi(ml,Li(1,1),Zi(no|ii|ml|Uo))};function sc(re,L){if(1!==re.length)throw new Error(`Expected no arguments for ${re[0]} operation`);return[]}function Li(re,L){return function(Z,fe){const _e=Z[0],Ue=Z.length-1;if(re===L){if(Ue!==re)throw new Error(`Expected ${re} argument${1===re?"":"s"} for ${_e}, got ${Ue}`)}else if(Ue<re||Ue>L)throw new Error(`Expected ${L===1/0?`${re} or more`:`${re} to ${L}`} arguments for ${_e}, got ${Ue}`)}}function Zi(re){return function(L,Z){const fe=L[0],_e=L.length-1,Ue=new Array(_e);for(let Xe=0;Xe<_e;++Xe){const lt=$i(L[Xe+1],Z);if(!Bl(re,lt.type)){const bt=zi(re),Ht=zi(lt.type);throw new Error(`Unexpected type for argument ${Xe} of ${fe} operation, got ${bt} but expected ${Ht}`)}lt.type&=re,Ue[Xe]=lt}return Ue}}function lu(re,L,Z){const fe=re[0],_e=re.length-1;let Ue=ms;for(let lt=0;lt<Z.length;++lt)Ue&=Z[lt].type;if(Ue===Mc)throw new Error(`No common type could be found for arguments of ${fe} operation`);const Xe=new Array(_e);for(let lt=0;lt<_e;++lt)Xe[lt]=$i(re[lt+1],L,Ue);return Xe}function rd(re,L){const fe=re.length-1;if(fe%2==1)throw new Error(`An even amount of arguments was expected for operation ${re[0]}, got ${JSON.stringify(fe)} instead`)}function vi(re,...L){return function(Z,fe,_e){const Ue=Z[0];let Xe=[];for(let bt=0;bt<L.length;bt++)Xe=L[bt](Z,fe,Xe,_e)||Xe;let lt="function"==typeof re?re(Xe):re;if(void 0!==_e){if(!Bl(lt,_e))throw new Error(`The following expression was expected to return ${zi(_e)}, but returns ${zi(lt)} instead: ${JSON.stringify(Z)}`);lt&=_e}if(lt===Mc)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(Z)}`);return new Xc(lt,Ue,...Xe)}}function vh(re){if(!re)return"";const L=re.getType();switch(L){case"Point":case"LineString":case"Polygon":return L;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return L.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return vh(re.getGeometries()[0]);default:return""}}function Cu(re,L,Z){const fe=$i(re,Z);if(!Bl(L,fe.type)){const _e=zi(L),Ue=zi(fe.type);throw new Error(`Expected expression to be of type ${_e}, got ${Ue}`)}return Ul(fe,Z)}function Ul(re,L){if(re instanceof Nl){if(re.type===Uo&&"string"==typeof re.value){const fe=mt(re.value);return function(){return fe}}return function(){return re.value}}const Z=re.operator;switch(Z){case kr.Number:case kr.String:case kr.Coalesce:return function Ec(re,L){const Z=re.operator,fe=re.args.length,_e=new Array(fe);for(let Ue=0;Ue<fe;++Ue)_e[Ue]=Ul(re.args[Ue],L);switch(Z){case kr.Coalesce:return Ue=>{for(let Xe=0;Xe<fe;++Xe){const lt=_e[Xe](Ue);if(typeof lt<"u"&&null!==lt)return lt}throw new Error("Expected one of the values to be non-null")};case kr.Number:case kr.String:return Ue=>{for(let Xe=0;Xe<fe;++Xe){const lt=_e[Xe](Ue);if(typeof lt===Z)return lt}throw new Error(`Expected one of the values to be a ${Z}`)};default:throw new Error(`Unsupported assertion operator ${Z}`)}}(re,L);case kr.Get:case kr.Var:return function kp(re,L){const fe=re.args[0].value;switch(re.operator){case kr.Get:return _e=>_e.properties[fe];case kr.Var:return _e=>_e.variables[fe];default:throw new Error(`Unsupported accessor operator ${re.operator}`)}}(re);case kr.Id:return fe=>fe.featureId;case kr.GeometryType:return fe=>fe.geometryType;case kr.Concat:{const fe=re.args.map(_e=>Ul(_e,L));return _e=>"".concat(...fe.map(Ue=>Ue(_e).toString()))}case kr.Resolution:return fe=>fe.resolution;case kr.Any:case kr.All:case kr.Between:case kr.In:case kr.Not:return function Jc(re,L){const Z=re.operator,fe=re.args.length,_e=new Array(fe);for(let Ue=0;Ue<fe;++Ue)_e[Ue]=Ul(re.args[Ue],L);switch(Z){case kr.Any:return Ue=>{for(let Xe=0;Xe<fe;++Xe)if(_e[Xe](Ue))return!0;return!1};case kr.All:return Ue=>{for(let Xe=0;Xe<fe;++Xe)if(!_e[Xe](Ue))return!1;return!0};case kr.Between:return Ue=>{const Xe=_e[0](Ue),lt=_e[1](Ue),bt=_e[2](Ue);return Xe>=lt&&Xe<=bt};case kr.In:return Ue=>{const Xe=_e[0](Ue);for(let lt=1;lt<fe;++lt)if(Xe===_e[lt](Ue))return!0;return!1};case kr.Not:return Ue=>!_e[0](Ue);default:throw new Error(`Unsupported logical operator ${Z}`)}}(re,L);case kr.Equal:case kr.NotEqual:case kr.LessThan:case kr.LessThanOrEqualTo:case kr.GreaterThan:case kr.GreaterThanOrEqualTo:return function xh(re,L){const Z=re.operator,fe=Ul(re.args[0],L),_e=Ul(re.args[1],L);switch(Z){case kr.Equal:return Ue=>fe(Ue)===_e(Ue);case kr.NotEqual:return Ue=>fe(Ue)!==_e(Ue);case kr.LessThan:return Ue=>fe(Ue)<_e(Ue);case kr.LessThanOrEqualTo:return Ue=>fe(Ue)<=_e(Ue);case kr.GreaterThan:return Ue=>fe(Ue)>_e(Ue);case kr.GreaterThanOrEqualTo:return Ue=>fe(Ue)>=_e(Ue);default:throw new Error(`Unsupported comparison operator ${Z}`)}}(re,L);case kr.Multiply:case kr.Divide:case kr.Add:case kr.Subtract:case kr.Clamp:case kr.Mod:case kr.Pow:case kr.Abs:case kr.Floor:case kr.Ceil:case kr.Round:case kr.Sin:case kr.Cos:case kr.Atan:case kr.Sqrt:return function Vl(re,L){const Z=re.operator,fe=re.args.length,_e=new Array(fe);for(let Ue=0;Ue<fe;++Ue)_e[Ue]=Ul(re.args[Ue],L);switch(Z){case kr.Multiply:return Ue=>{let Xe=1;for(let lt=0;lt<fe;++lt)Xe*=_e[lt](Ue);return Xe};case kr.Divide:return Ue=>_e[0](Ue)/_e[1](Ue);case kr.Add:return Ue=>{let Xe=0;for(let lt=0;lt<fe;++lt)Xe+=_e[lt](Ue);return Xe};case kr.Subtract:return Ue=>_e[0](Ue)-_e[1](Ue);case kr.Clamp:return Ue=>{const Xe=_e[0](Ue),lt=_e[1](Ue);if(Xe<lt)return lt;const bt=_e[2](Ue);return Xe>bt?bt:Xe};case kr.Mod:return Ue=>_e[0](Ue)%_e[1](Ue);case kr.Pow:return Ue=>Math.pow(_e[0](Ue),_e[1](Ue));case kr.Abs:return Ue=>Math.abs(_e[0](Ue));case kr.Floor:return Ue=>Math.floor(_e[0](Ue));case kr.Ceil:return Ue=>Math.ceil(_e[0](Ue));case kr.Round:return Ue=>Math.round(_e[0](Ue));case kr.Sin:return Ue=>Math.sin(_e[0](Ue));case kr.Cos:return Ue=>Math.cos(_e[0](Ue));case kr.Atan:return 2===fe?Ue=>Math.atan2(_e[0](Ue),_e[1](Ue)):Ue=>Math.atan(_e[0](Ue));case kr.Sqrt:return Ue=>Math.sqrt(_e[0](Ue));default:throw new Error(`Unsupported numeric operator ${Z}`)}}(re,L);case kr.Case:return function Ap(re,L){const Z=re.args.length,fe=new Array(Z);for(let _e=0;_e<Z;++_e)fe[_e]=Ul(re.args[_e],L);return _e=>{for(let Ue=0;Ue<Z-1;Ue+=2)if(fe[Ue](_e))return fe[Ue+1](_e);return fe[Z-1](_e)}}(re,L);case kr.Match:return function Mp(re,L){const Z=re.args.length,fe=new Array(Z);for(let _e=0;_e<Z;++_e)fe[_e]=Ul(re.args[_e],L);return _e=>{const Ue=fe[0](_e);for(let Xe=1;Xe<Z;Xe+=2)if(Ue===fe[Xe](_e))return fe[Xe+1](_e);return fe[Z-1](_e)}}(re,L);case kr.Interpolate:return function Sp(re,L){const Z=re.args.length,fe=new Array(Z);for(let _e=0;_e<Z;++_e)fe[_e]=Ul(re.args[_e],L);return _e=>{const Ue=fe[0](_e),Xe=fe[1](_e);let lt,bt;for(let Ht=2;Ht<Z;Ht+=2){const Wt=fe[Ht](_e);let pn=fe[Ht+1](_e);const On=Array.isArray(pn);if(On&&(pn=Ye(pn)),Wt>=Xe)return 2===Ht?pn:On?Ep(Ue,Xe,lt,bt,Wt,pn):Cc(Ue,Xe,lt,bt,Wt,pn);lt=Wt,bt=pn}return bt}}(re,L);case kr.ToString:return function $c(re,L){const Z=re.operator,fe=re.args.length,_e=new Array(fe);for(let Ue=0;Ue<fe;++Ue)_e[Ue]=Ul(re.args[Ue],L);if(Z===kr.ToString)return Ue=>{const Xe=_e[0](Ue);return re.args[0].type===Uo?Dt(Xe):Xe.toString()};throw new Error(`Unsupported convert operator ${Z}`)}(re,L);default:throw new Error(`Unsupported operator ${Z}`)}}function Cc(re,L,Z,fe,_e,Ue){const Xe=_e-Z;if(0===Xe)return fe;const lt=L-Z;return fe+(1===re?lt/Xe:(Math.pow(re,lt)-1)/(Math.pow(re,Xe)-1))*(Ue-fe)}function Ep(re,L,Z,fe,_e,Ue){if(_e-Z==0)return fe;const lt=Ke(fe),bt=Ke(Ue);let Ht=bt[2]-lt[2];return Ht>180?Ht-=360:Ht<-180&&(Ht+=360),Et(function st(re){const L=tt.rgb(N.xyz(re));return L[3]=re[3],L}([Cc(re,L,Z,lt[0],_e,bt[0]),Cc(re,L,Z,lt[1],_e,bt[1]),lt[2]+Cc(re,L,Z,0,_e,Ht),Cc(re,L,Z,fe[3],_e,Ue[3])]))}function Cp(re){return!0}function Lp(re){const L=gh(),Z=function od(re,L){const Z=re.length,fe=new Array(Z);for(let _e=0;_e<Z;++_e){const Ue=re[_e],Xe="filter"in Ue?Cu(Ue.filter,no,L):Cp;let lt;if(Array.isArray(Ue.style)){const bt=Ue.style.length;lt=new Array(bt);for(let Ht=0;Ht<bt;++Ht)lt[Ht]=Ao(Ue.style[Ht],L)}else lt=[Ao(Ue.style,L)];fe[_e]={filter:Xe,styles:lt}}return function(_e){const Ue=[];let Xe=!1;for(let lt=0;lt<Z;++lt)if((0,fe[lt].filter)(_e)&&(!re[lt].else||!Xe)){Xe=!0;for(const Ht of fe[lt].styles){const Wt=Ht(_e);Wt&&Ue.push(Wt)}}return Ue}}(re,L),fe={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""};return function(_e,Ue){if(fe.properties=_e.getPropertiesInternal(),fe.resolution=Ue,L.featureId){const Xe=_e.getId();fe.featureId=void 0!==Xe?Xe:null}return L.geometryType&&(fe.geometryType=vh(_e.getGeometry())),Z(fe)}}function ad(re){const L=gh(),Z=re.length,fe=new Array(Z);for(let Xe=0;Xe<Z;++Xe)fe[Xe]=Ao(re[Xe],L);const _e={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""},Ue=new Array(Z);return function(Xe,lt){if(_e.properties=Xe.getPropertiesInternal(),_e.resolution=lt,L.featureId){const Ht=Xe.getId();_e.featureId=void 0!==Ht?Ht:null}let bt=0;for(let Ht=0;Ht<Z;++Ht){const Wt=fe[Ht](_e);Wt&&(Ue[bt]=Wt,bt+=1)}return Ue.length=bt,Ue}}function Ao(re,L){const Z=Qc(re,"",L),fe=Lc(re,"",L),_e=function Ip(re,L){const Z="text-",fe=Lu(re,Z+"value",L);if(!fe)return null;const _e=Qc(re,Z,L),Ue=Qc(re,Z+"background-",L),Xe=Lc(re,Z,L),lt=Lc(re,Z+"background-",L),bt=Lu(re,Z+"font",L),Ht=Zs(re,Z+"max-angle",L),Wt=Zs(re,Z+"offset-x",L),pn=Zs(re,Z+"offset-y",L),On=ef(re,Z+"overflow",L),tr=Lu(re,Z+"placement",L),ar=Zs(re,Z+"repeat",L),Tr=tf(re,Z+"scale",L),Ir=ef(re,Z+"rotate-with-view",L),Br=Zs(re,Z+"rotation",L),zr=Lu(re,Z+"align",L),ri=Lu(re,Z+"justify",L),Jr=Lu(re,Z+"baseline",L),Xr=Ic(re,Z+"padding",L),Ci=Pu(re,Z+"declutter-mode"),yi=new Zc({declutterMode:Ci});return function(di){if(yi.setText(fe(di)),_e&&yi.setFill(_e(di)),Ue&&yi.setBackgroundFill(Ue(di)),Xe&&yi.setStroke(Xe(di)),lt&&yi.setBackgroundStroke(lt(di)),bt&&yi.setFont(bt(di)),Ht&&yi.setMaxAngle(Ht(di)),Wt&&yi.setOffsetX(Wt(di)),pn&&yi.setOffsetY(pn(di)),On&&yi.setOverflow(On(di)),tr){const xi=tr(di);if("point"!==xi&&"line"!==xi)throw new Error("Expected point or line for text-placement");yi.setPlacement(xi)}if(ar&&yi.setRepeat(ar(di)),Tr&&yi.setScale(Tr(di)),Ir&&yi.setRotateWithView(Ir(di)),Br&&yi.setRotation(Br(di)),zr){const xi=zr(di);if("left"!==xi&&"center"!==xi&&"right"!==xi&&"end"!==xi&&"start"!==xi)throw new Error("Expected left, right, center, start, or end for text-align");yi.setTextAlign(xi)}if(ri){const xi=ri(di);if("left"!==xi&&"right"!==xi&&"center"!==xi)throw new Error("Expected left, right, or center for text-justify");yi.setJustify(xi)}if(Jr){const xi=Jr(di);if("bottom"!==xi&&"top"!==xi&&"middle"!==xi&&"alphabetic"!==xi&&"hanging"!==xi)throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");yi.setTextBaseline(xi)}return Xr&&yi.setPadding(Xr(di)),yi}}(re,L),Ue=function sd(re,L){return"icon-src"in re?function Pp(re,L){const Z="icon-",fe=Z+"src",_e=fd(re[fe],fe),Ue=Xa(re,Z+"anchor",L),Xe=tf(re,Z+"scale",L),lt=Zs(re,Z+"opacity",L),bt=Xa(re,Z+"displacement",L),Ht=Zs(re,Z+"rotation",L),Wt=ef(re,Z+"rotate-with-view",L),pn=Th(re,Z+"anchor-origin"),On=kh(re,Z+"anchor-x-units"),tr=kh(re,Z+"anchor-y-units"),ar=function cd(re,L){const Z=re[L];if(void 0!==Z)return hd(Z,L)}(re,Z+"color"),Tr=function wh(re,L){const Z=re[L];if(void 0!==Z){if("string"!=typeof Z)throw new Error(`Expected a string for ${L}`);return Z}}(re,Z+"cross-origin"),Ir=function Iu(re,L){const Z=re[L];if(void 0!==Z)return nf(Z,L)}(re,Z+"offset"),Br=Th(re,Z+"offset-origin"),zr=lc(re,Z+"width"),ri=lc(re,Z+"height"),Jr=function ca(re,L){const Z=re[L];if(void 0!==Z){if("number"==typeof Z)return hi(Z);if(!Array.isArray(Z))throw new Error(`Expected a number or size array for ${L}`);if(2!==Z.length||"number"!=typeof Z[0]||"number"!=typeof Z[1])throw new Error(`Expected a number or size array for ${L}`);return Z}}(re,Z+"size"),Xr=Pu(re,Z+"declutter-mode"),Ci=new Rf({src:_e,anchorOrigin:pn,anchorXUnits:On,anchorYUnits:tr,color:ar,crossOrigin:Tr,offset:Ir,offsetOrigin:Br,height:ri,width:zr,size:Jr,declutterMode:Xr});return function(yi){return lt&&Ci.setOpacity(lt(yi)),bt&&Ci.setDisplacement(bt(yi)),Ht&&Ci.setRotation(Ht(yi)),Wt&&Ci.setRotateWithView(Wt(yi)),Xe&&Ci.setScale(Xe(yi)),Ue&&Ci.setAnchor(Ue(yi)),Ci}}(re,L):"shape-points"in re?function ld(re,L){const Z="shape-",fe=Z+"points",_e=Z+"radius",Ue=Ah(re[fe],fe),Xe=Ah(re[_e],_e),lt=Qc(re,Z,L),bt=Lc(re,Z,L),Ht=tf(re,Z+"scale",L),Wt=Xa(re,Z+"displacement",L),pn=Zs(re,Z+"rotation",L),On=ef(re,Z+"rotate-with-view",L),tr=lc(re,Z+"radius2"),ar=lc(re,Z+"angle"),Tr=Pu(re,Z+"declutter-mode"),Ir=new Jh({points:Ue,radius:Xe,radius2:tr,angle:ar,declutterMode:Tr});return function(Br){return lt&&Ir.setFill(lt(Br)),bt&&Ir.setStroke(bt(Br)),Wt&&Ir.setDisplacement(Wt(Br)),pn&&Ir.setRotation(pn(Br)),On&&Ir.setRotateWithView(On(Br)),Ht&&Ir.setScale(Ht(Br)),Ir}}(re,L):"circle-radius"in re?function Op(re,L){const Z="circle-",fe=Qc(re,Z,L),_e=Lc(re,Z,L),Ue=Zs(re,Z+"radius",L),Xe=tf(re,Z+"scale",L),lt=Xa(re,Z+"displacement",L),bt=Zs(re,Z+"rotation",L),Ht=ef(re,Z+"rotate-with-view",L),Wt=Pu(re,Z+"declutter-mode"),pn=new dh({radius:5,declutterMode:Wt});return function(On){return Ue&&pn.setRadius(Ue(On)),fe&&pn.setFill(fe(On)),_e&&pn.setStroke(_e(On)),lt&&pn.setDisplacement(lt(On)),bt&&pn.setRotation(bt(On)),Ht&&pn.setRotateWithView(Ht(On)),Xe&&pn.setScale(Xe(On)),pn}}(re,L):null}(re,L),Xe=Zs(re,"z-index",L);if(!(Z||fe||_e||Ue||v(re)))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(re));const lt=new Pf;return function(bt){let Ht=!0;if(Z){const Wt=Z(bt);Wt&&(Ht=!1),lt.setFill(Wt)}if(fe){const Wt=fe(bt);Wt&&(Ht=!1),lt.setStroke(Wt)}if(_e){const Wt=_e(bt);Wt&&(Ht=!1),lt.setText(Wt)}if(Ue){const Wt=Ue(bt);Wt&&(Ht=!1),lt.setImage(Wt)}return Xe&&lt.setZIndex(Xe(bt)),Ht?null:lt}}function Qc(re,L,Z){let fe;if(fe=L+"fill-pattern-src"in re?function ud(re,L,Z){const fe=Lu(re,L+"pattern-src",Z),_e=_h(re,L+"pattern-offset",Z),Ue=_h(re,L+"pattern-size",Z),Xe=bh(re,L+"color",Z);return function(lt){return{src:fe(lt),offset:_e&&_e(lt),size:Ue&&Ue(lt),color:Xe&&Xe(lt)}}}(re,L+"fill-",Z):bh(re,L+"fill-color",Z),!fe)return null;const _e=new Lf;return function(Ue){const Xe=fe(Ue);return"none"===Xe?null:(_e.setColor(Xe),_e)}}function Lc(re,L,Z){const fe=Zs(re,L+"stroke-width",Z),_e=bh(re,L+"stroke-color",Z);if(!fe&&!_e)return null;const Ue=Lu(re,L+"stroke-line-cap",Z),Xe=Lu(re,L+"stroke-line-join",Z),lt=Ic(re,L+"stroke-line-dash",Z),bt=Zs(re,L+"stroke-line-dash-offset",Z),Ht=Zs(re,L+"stroke-miter-limit",Z),Wt=new qu;return function(pn){if(_e){const On=_e(pn);if("none"===On)return null;Wt.setColor(On)}if(fe&&Wt.setWidth(fe(pn)),Ue){const On=Ue(pn);if("butt"!==On&&"round"!==On&&"square"!==On)throw new Error("Expected butt, round, or square line cap");Wt.setLineCap(On)}if(Xe){const On=Xe(pn);if("bevel"!==On&&"round"!==On&&"miter"!==On)throw new Error("Expected bevel, round, or miter line join");Wt.setLineJoin(On)}return lt&&Wt.setLineDash(lt(pn)),bt&&Wt.setLineDashOffset(bt(pn)),Ht&&Wt.setMiterLimit(Ht(pn)),Wt}}function Zs(re,L,Z){if(!(L in re))return;const fe=Cu(re[L],ii,Z);return function(_e){return Ah(fe(_e),L)}}function Lu(re,L,Z){if(!(L in re))return null;const fe=Cu(re[L],ml,Z);return function(_e){return fd(fe(_e),L)}}function ef(re,L,Z){if(!(L in re))return null;const fe=Cu(re[L],no,Z);return function(_e){const Ue=fe(_e);if("boolean"!=typeof Ue)throw new Error(`Expected a boolean for ${L}`);return Ue}}function bh(re,L,Z){if(!(L in re))return null;const fe=Cu(re[L],Uo|ml,Z);return function(_e){return hd(fe(_e),L)}}function Ic(re,L,Z){if(!(L in re))return null;const fe=Cu(re[L],su,Z);return function(_e){return nf(fe(_e),L)}}function Xa(re,L,Z){if(!(L in re))return null;const fe=Cu(re[L],su,Z);return function(_e){const Ue=nf(fe(_e),L);if(2!==Ue.length)throw new Error(`Expected two numbers for ${L}`);return Ue}}function _h(re,L,Z){if(!(L in re))return null;const fe=Cu(re[L],su,Z);return function(_e){return dd(fe(_e),L)}}function tf(re,L,Z){if(!(L in re))return null;const fe=Cu(re[L],su|ii,Z);return function(_e){return function Rp(re,L){return"number"==typeof re?re:dd(re,L)}(fe(_e),L)}}function lc(re,L){const Z=re[L];if(void 0!==Z){if("number"!=typeof Z)throw new Error(`Expected a number for ${L}`);return Z}}function Th(re,L){const Z=re[L];if(void 0!==Z){if("bottom-left"!==Z&&"bottom-right"!==Z&&"top-left"!==Z&&"top-right"!==Z)throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${L}`);return Z}}function kh(re,L){const Z=re[L];if(void 0!==Z){if("pixels"!==Z&&"fraction"!==Z)throw new Error(`Expected pixels or fraction for ${L}`);return Z}}function Pu(re,L){const Z=re[L];if(void 0!==Z){if("string"!=typeof Z)throw new Error(`Expected a string for ${L}`);if("declutter"!==Z&&"obstacle"!==Z&&"none"!==Z)throw new Error(`Expected declutter, obstacle, or none for ${L}`);return Z}}function nf(re,L){if(!Array.isArray(re))throw new Error(`Expected an array for ${L}`);const Z=re.length;for(let fe=0;fe<Z;++fe)if("number"!=typeof re[fe])throw new Error(`Expected an array of numbers for ${L}`);return re}function fd(re,L){if("string"!=typeof re)throw new Error(`Expected a string for ${L}`);return re}function Ah(re,L){if("number"!=typeof re)throw new Error(`Expected a number for ${L}`);return re}function hd(re,L){if("string"==typeof re)return re;const Z=nf(re,L),fe=Z.length;if(fe<3||fe>4)throw new Error(`Expected a color with 3 or 4 values for ${L}`);return Z}function dd(re,L){const Z=nf(re,L);if(2!==Z.length)throw new Error(`Expected an array of two numbers for ${L}`);return Z}const zf=class Dp extends Bo{constructor(L){L=L||{};const Z=Object.assign({},L);delete Z.style,delete Z.renderBuffer,delete Z.updateWhileAnimating,delete Z.updateWhileInteracting,super(Z),this.declutter_=L.declutter?String(L.declutter):void 0,this.renderBuffer_=void 0!==L.renderBuffer?L.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(L.style),this.updateWhileAnimating_=void 0!==L.updateWhileAnimating&&L.updateWhileAnimating,this.updateWhileInteracting_=void 0!==L.updateWhileInteracting&&L.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(L){return super.getFeatures(L)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get("renderOrder")}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(L,Z){const fe=this.getDeclutter();fe in L.declutter||(L.declutter[fe]=new ya(9)),this.getRenderer().renderDeclutter(L,Z)}setRenderOrder(L){this.set("renderOrder",L)}setStyle(L){this.style_=void 0===L?$h:L;const Z=function zp(re){if(void 0===re)return $h;if(!re)return null;if("function"==typeof re||re instanceof Pf)return re;if(!Array.isArray(re))return ad([re]);if(0===re.length)return[];const L=re.length,Z=re[0];if(Z instanceof Pf){const _e=new Array(L);for(let Ue=0;Ue<L;++Ue){const Xe=re[Ue];if(!(Xe instanceof Pf))throw new Error("Expected a list of style instances");_e[Ue]=Xe}return _e}if("style"in Z){const _e=new Array(L);for(let Ue=0;Ue<L;++Ue){const Xe=re[Ue];if(!("style"in Xe))throw new Error("Expected a list of rules with a style property");_e[Ue]=Xe}return Lp(_e)}return ad(re)}(L);this.styleFunction_=null===L?void 0:function mp(re){let L;if("function"==typeof re)L=re;else{let Z;Array.isArray(re)?Z=re:(ae("function"==typeof re.getZIndex,"Expected an `Style` or an array of `Style`"),Z=[re]),L=function(){return Z}}return L}(Z),this.changed()}};function gd(re,L){aa.expire()}const Mh=class Pc extends _{constructor(L){super(),this.map_=L}dispatchRenderEvent(L,Z){U()}calculateMatrices2D(L){const Z=L.viewState,fe=L.coordinateToPixelTransform,_e=L.pixelToCoordinateTransform;ws(fe,L.size[0]/2,L.size[1]/2,1/Z.resolution,-1/Z.resolution,-Z.rotation,-Z.center[0],-Z.center[1]),Ql(_e,fe)}forEachFeatureAtCoordinate(L,Z,fe,_e,Ue,Xe,lt,bt){let Ht;const Wt=Z.viewState;function pn(Jr,Xr,Ci,yi){return Ue.call(Xe,Xr,Jr?Ci:null,yi)}const On=Wt.projection,tr=function fr(re,L){if(L.canWrapX()){const Z=Wn(L.getExtent()),fe=function vr(re,L,Z){const fe=L.getExtent();let _e=0;return L.canWrapX()&&(re[0]<fe[0]||re[0]>fe[2])&&(Z=Z||Wn(fe),_e=Math.floor((re[0]-fe[0])/Z)),_e}(re,L,Z);fe&&(re[0]-=fe*Z)}return re}(L.slice(),On),ar=[[0,0]];if(On.canWrapX()&&_e){const Xr=Wn(On.getExtent());ar.push([-Xr,0],[Xr,0])}const Tr=Z.layerStatesArray,Ir=Tr.length,Br=[],zr=[];for(let Jr=0;Jr<ar.length;Jr++)for(let Xr=Ir-1;Xr>=0;--Xr){const Ci=Tr[Xr],yi=Ci.layer;if(yi.hasRenderer()&&Fo(Ci,Wt)&&lt.call(bt,yi)){const di=yi.getRenderer(),xi=yi.getSource();if(di&&xi){const Eo=xi.getWrapX()?tr:L,$s=pn.bind(null,Ci.managed);zr[0]=Eo[0]+ar[Jr][0],zr[1]=Eo[1]+ar[Jr][1],Ht=di.forEachFeatureAtCoordinate(zr,Z,fe,$s,Br)}if(Ht)return Ht}}if(0===Br.length)return;const ri=1/Br.length;return Br.forEach((Jr,Xr)=>Jr.distanceSq+=Xr*ri),Br.sort((Jr,Xr)=>Jr.distanceSq-Xr.distanceSq),Br.some(Jr=>Ht=Jr.callback(Jr.feature,Jr.layer,Jr.geometry)),Ht}hasFeatureAtCoordinate(L,Z,fe,_e,Ue,Xe){return void 0!==this.forEachFeatureAtCoordinate(L,Z,fe,_e,c,this,Ue,Xe)}getMap(){return this.map_}renderFrame(L){U()}scheduleExpireIconCache(L){aa.canExpireCache()&&L.postRenderFunctions.push(gd)}},md=class Fp extends k{constructor(L,Z,fe,_e){super(L),this.inversePixelTransform=Z,this.frameState=fe,this.context=_e}},vd=class Bp extends Mh{constructor(L){super(L),this.fontChangeListenerKey_=w(Eu,"propertychange",L.redrawText.bind(L)),this.element_=document.createElement("div");const Z=this.element_.style;Z.position="absolute",Z.width="100%",Z.height="100%",Z.zIndex="0",this.element_.className=Is+" ol-layers";const fe=L.getViewport();fe.insertBefore(this.element_,fe.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(L,Z){const fe=this.getMap();if(fe.hasListener(L)){const _e=new md(L,void 0,Z);fe.dispatchEvent(_e)}}disposeInternal(){P(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(L){if(!L)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(L),this.dispatchRenderEvent("precompose",L);const Z=L.layerStatesArray.sort(function(lt,bt){return lt.zIndex-bt.zIndex});Z.some(lt=>lt.layer instanceof zf&&lt.layer.getDeclutter())&&(L.declutter={});const _e=L.viewState;this.children_.length=0;const Ue=[];let Xe=null;for(let lt=0,bt=Z.length;lt<bt;++lt){const Ht=Z[lt];L.layerIndex=lt;const Wt=Ht.layer,pn=Wt.getSourceState();if(!Fo(Ht,_e)||"ready"!=pn&&"undefined"!=pn){Wt.unrender();continue}const On=Wt.render(L,Xe);On&&(On!==Xe&&(this.children_.push(On),Xe=On),Ue.push(Ht))}this.declutter(L,Ue),function Gr(re,L){const Z=re.childNodes;for(let fe=0;;++fe){const _e=Z[fe],Ue=L[fe];if(!_e&&!Ue)break;if(_e!==Ue){if(!_e){re.appendChild(Ue);continue}if(!Ue){re.removeChild(_e),--fe;continue}re.insertBefore(Ue,_e)}}}(this.element_,this.children_),this.dispatchRenderEvent("postcompose",L),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(L)}declutter(L,Z){if(L.declutter){for(let fe=Z.length-1;fe>=0;--fe){const _e=Z[fe],Ue=_e.layer;Ue.getDeclutter()&&Ue.renderDeclutter(L,_e)}Z.forEach(fe=>fe.layer.renderDeferred(L))}}};class Ou extends k{constructor(L,Z){super(L),this.layer=Z}}class Oc extends ge{constructor(L){L=L||{};const Z=Object.assign({},L);delete Z.layers;let fe=L.layers;super(Z),this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener("layers",this.handleLayersChanged_),fe?Array.isArray(fe)?fe=new J(fe.slice(),{unique:!0}):ae("function"==typeof fe.getArray,"Expected `layers` to be an array or a `Collection`"):fe=new J(void 0,{unique:!0}),this.setLayers(fe)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(P),this.layersListenerKeys_.length=0;const L=this.getLayers();this.layersListenerKeys_.push(w(L,"add",this.handleLayersAdd_,this),w(L,"remove",this.handleLayersRemove_,this));for(const fe in this.listenerKeys_)this.listenerKeys_[fe].forEach(P);x(this.listenerKeys_);const Z=L.getArray();for(let fe=0,_e=Z.length;fe<_e;fe++){const Ue=Z[fe];this.registerLayerListeners_(Ue),this.dispatchEvent(new Ou("addlayer",Ue))}this.changed()}registerLayerListeners_(L){const Z=[w(L,"propertychange",this.handleLayerChange_,this),w(L,"change",this.handleLayerChange_,this)];L instanceof Oc&&Z.push(w(L,"addlayer",this.handleLayerGroupAdd_,this),w(L,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[j(L)]=Z}handleLayerGroupAdd_(L){this.dispatchEvent(new Ou("addlayer",L.layer))}handleLayerGroupRemove_(L){this.dispatchEvent(new Ou("removelayer",L.layer))}handleLayersAdd_(L){const Z=L.element;this.registerLayerListeners_(Z),this.dispatchEvent(new Ou("addlayer",Z)),this.changed()}handleLayersRemove_(L){const Z=L.element,fe=j(Z);this.listenerKeys_[fe].forEach(P),delete this.listenerKeys_[fe],this.dispatchEvent(new Ou("removelayer",Z)),this.changed()}getLayers(){return this.get("layers")}setLayers(L){const Z=this.getLayers();if(Z){const fe=Z.getArray();for(let _e=0,Ue=fe.length;_e<Ue;++_e)this.dispatchEvent(new Ou("removelayer",fe[_e]))}this.set("layers",L)}getLayersArray(L){return L=void 0!==L?L:[],this.getLayers().forEach(function(Z){Z.getLayersArray(L)}),L}getLayerStatesArray(L){const Z=void 0!==L?L:[],fe=Z.length;this.getLayers().forEach(function(Xe){Xe.getLayerStatesArray(Z)});const _e=this.getLayerState();let Ue=_e.zIndex;!L&&void 0===_e.zIndex&&(Ue=0);for(let Xe=fe,lt=Z.length;Xe<lt;Xe++){const bt=Z[Xe];bt.opacity*=_e.opacity,bt.visible=bt.visible&&_e.visible,bt.maxResolution=Math.min(bt.maxResolution,_e.maxResolution),bt.minResolution=Math.max(bt.minResolution,_e.minResolution),bt.minZoom=Math.max(bt.minZoom,_e.minZoom),bt.maxZoom=Math.min(bt.maxZoom,_e.maxZoom),void 0!==_e.extent&&(bt.extent=void 0!==bt.extent?ln(bt.extent,_e.extent):_e.extent),void 0===bt.zIndex&&(bt.zIndex=Ue)}return Z}getSourceState(){return"ready"}}const Wu=Oc,Mo=class rf extends k{constructor(L,Z,fe){super(L),this.map=Z,this.frameState=void 0!==fe?fe:null}},vl=class af extends Mo{constructor(L,Z,fe,_e,Ue,Xe){super(L,Z,Ue),this.originalEvent=fe,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==_e&&_e,this.activePointers=Xe}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(L){this.pixel_=L}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(L){this.coordinate_=L}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},Pi={SINGLECLICK:"singleclick",CLICK:"click",DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Os=class Ff extends h{constructor(L,Z){super(L),this.map_=L,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===Z?1:Z,this.down_=null;const fe=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=fe,this.pointerdownListenerKey_=w(fe,"pointerdown",this.handlePointerDown_,this),this.relayedListenerKey_=w(fe,"pointermove",this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener("touchmove",this.boundHandleTouchMove_,!!gr&&{passive:!1})}emulateClick_(L){let Z=new vl(Pi.CLICK,this.map_,L);this.dispatchEvent(Z),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,Z=new vl(Pi.DBLCLICK,this.map_,L),this.dispatchEvent(Z)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const fe=new vl(Pi.SINGLECLICK,this.map_,L);this.dispatchEvent(fe)},250)}updateActivePointers_(L){const Z=L,fe=Z.pointerId;if(Z.type==Pi.POINTERUP||Z.type==Pi.POINTERCANCEL){delete this.trackedTouches_[fe];for(const _e in this.trackedTouches_)if(this.trackedTouches_[_e].target!==Z.target){delete this.trackedTouches_[_e];break}}else(Z.type==Pi.POINTERDOWN||Z.type==Pi.POINTERMOVE)&&(this.trackedTouches_[fe]=Z);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(L){this.updateActivePointers_(L);const Z=new vl(Pi.POINTERUP,this.map_,L,void 0,void 0,this.activePointers_);this.dispatchEvent(Z),this.emulateClicks_&&!Z.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(L)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(P),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(L){return 0===L.button}handlePointerDown_(L){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(L);const Z=new vl(Pi.POINTERDOWN,this.map_,L,void 0,void 0,this.activePointers_);if(this.dispatchEvent(Z),this.down_=new PointerEvent(L.type,L),Object.defineProperty(this.down_,"target",{writable:!1,value:L.target}),0===this.dragListenerKeys_.length){const fe=this.map_.getOwnerDocument();this.dragListenerKeys_.push(w(fe,Pi.POINTERMOVE,this.handlePointerMove_,this),w(fe,Pi.POINTERUP,this.handlePointerUp_,this),w(this.element_,Pi.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==fe&&this.dragListenerKeys_.push(w(this.element_.getRootNode(),Pi.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(L){if(this.isMoving_(L)){this.updateActivePointers_(L),this.dragging_=!0;const Z=new vl(Pi.POINTERDRAG,this.map_,L,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(Z)}}relayMoveEvent_(L){this.originalPointerMoveEvent_=L;const Z=!(!this.down_||!this.isMoving_(L));this.dispatchEvent(new vl(Pi.POINTERMOVE,this.map_,L,Z))}handleTouchMove_(L){const Z=this.originalPointerMoveEvent_;(!Z||Z.defaultPrevented)&&("boolean"!=typeof L.cancelable||!0===L.cancelable)&&L.preventDefault()}isMoving_(L){return this.dragging_||Math.abs(L.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(L.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(P(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener("touchmove",this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(P(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(P),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},Bf=1/0,xd=class yd{constructor(L,Z){this.priorityFunction_=L,this.keyFunction_=Z,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,x(this.queuedElements_)}dequeue(){const L=this.elements_,Z=this.priorities_,fe=L[0];1==L.length?(L.length=0,Z.length=0):(L[0]=L.pop(),Z[0]=Z.pop(),this.siftUp_(0));const _e=this.keyFunction_(fe);return delete this.queuedElements_[_e],fe}enqueue(L){ae(!(this.keyFunction_(L)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const Z=this.priorityFunction_(L);return Z!=Bf&&(this.elements_.push(L),this.priorities_.push(Z),this.queuedElements_[this.keyFunction_(L)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(L){return 2*L+1}getRightChildIndex_(L){return 2*L+2}getParentIndex_(L){return L-1>>1}heapify_(){let L;for(L=(this.elements_.length>>1)-1;L>=0;L--)this.siftUp_(L)}isEmpty(){return 0===this.elements_.length}isKeyQueued(L){return L in this.queuedElements_}isQueued(L){return this.isKeyQueued(this.keyFunction_(L))}siftUp_(L){const Z=this.elements_,fe=this.priorities_,_e=Z.length,Ue=Z[L],Xe=fe[L],lt=L;for(;L<_e>>1;){const bt=this.getLeftChildIndex_(L),Ht=this.getRightChildIndex_(L),Wt=Ht<_e&&fe[Ht]<fe[bt]?Ht:bt;Z[L]=Z[Wt],fe[L]=fe[Wt],L=Wt}Z[L]=Ue,fe[L]=Xe,this.siftDown_(lt,L)}siftDown_(L,Z){const fe=this.elements_,_e=this.priorities_,Ue=fe[Z],Xe=_e[Z];for(;Z>L;){const lt=this.getParentIndex_(Z);if(!(_e[lt]>Xe))break;fe[Z]=fe[lt],_e[Z]=_e[lt],Z=lt}fe[Z]=Ue,_e[Z]=Xe}reprioritize(){const L=this.priorityFunction_,Z=this.elements_,fe=this.priorities_;let _e=0;const Ue=Z.length;let Xe,lt,bt;for(lt=0;lt<Ue;++lt)Xe=Z[lt],bt=L(Xe),bt==Bf?delete this.queuedElements_[this.keyFunction_(Xe)]:(fe[_e]=bt,Z[_e++]=Xe);Z.length=_e,fe.length=_e,this.heapify_()}},Np=class Sh extends xd{constructor(L,Z){super(function(fe){return L.apply(null,fe)},function(fe){return fe[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=Z,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(L){const Z=super.enqueue(L);return Z&&L[0].addEventListener("change",this.boundHandleTileChange_),Z}getTilesLoading(){return this.tilesLoading_}handleTileChange(L){const Z=L.target,fe=Z.getState();if(2===fe||3===fe||4===fe){3!==fe&&Z.removeEventListener("change",this.boundHandleTileChange_);const _e=Z.getKey();_e in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[_e],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(L,Z){let _e,Ue,Xe,fe=0;for(;this.tilesLoading_<L&&fe<Z&&this.getCount()>0;)Ue=this.dequeue()[0],Xe=Ue.getKey(),_e=Ue.getState(),0===_e&&!(Xe in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[Xe]=!0,++this.tilesLoading_,++fe,Ue.load())}};var Yu=da(5861);const of=class Gl extends q{constructor(L){super();const Z=L.element;Z&&!L.target&&!Z.style.pointerEvents&&(Z.style.pointerEvents="auto"),this.element=Z||null,this.target_=null,this.map_=null,this.listenerKeys=[],L.render&&(this.render=L.render),L.target&&this.setTarget(L.target)}disposeInternal(){jr(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(L){this.map_&&jr(this.element);for(let Z=0,fe=this.listenerKeys.length;Z<fe;++Z)P(this.listenerKeys[Z]);this.listenerKeys.length=0,this.map_=L,L&&((this.target_?this.target_:L.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==d&&this.listenerKeys.push(w(L,"postrender",this.render,this)),L.render())}render(L){}setTarget(L){this.target_="string"==typeof L?document.getElementById(L):L}},wd=class _d extends of{constructor(L){L=L||{},super({element:document.createElement("div"),render:L.render,target:L.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===L.collapsed||L.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==L.collapsible,this.collapsible_=void 0===L.collapsible||L.collapsible,this.collapsible_||(this.collapsed_=!1);const Z=void 0!==L.className?L.className:"ol-attribution",fe=void 0!==L.tipLabel?L.tipLabel:"Attributions",_e=void 0!==L.expandClassName?L.expandClassName:Z+"-expand",Ue=void 0!==L.collapseLabel?L.collapseLabel:"\u203a",Xe=void 0!==L.collapseClassName?L.collapseClassName:Z+"-collapse";"string"==typeof Ue?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=Ue,this.collapseLabel_.className=Xe):this.collapseLabel_=Ue;const lt=void 0!==L.label?L.label:"i";"string"==typeof lt?(this.label_=document.createElement("span"),this.label_.textContent=lt,this.label_.className=_e):this.label_=lt;const bt=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=fe,this.toggleButton_.appendChild(bt),this.toggleButton_.addEventListener("click",this.handleClick_.bind(this),!1);const Wt=this.element;Wt.className=Z+" "+Is+" "+Ti+(this.collapsed_&&this.collapsible_?" "+zl:"")+(this.collapsible_?"":" ol-uncollapsible"),Wt.appendChild(this.toggleButton_),Wt.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(L){const Z=Array.from(new Set(this.getMap().getAllLayers().flatMap(_e=>_e.getAttributions(L)))),fe=!this.getMap().getAllLayers().some(_e=>_e.getSource()&&!1===_e.getSource().getAttributionsCollapsible());return this.overrideCollapsible_||this.setCollapsible(fe),Z}updateElement_(L){var Z=this;return(0,Yu.Z)(function*(){if(!L)return void(Z.renderedVisible_&&(Z.element.style.display="none",Z.renderedVisible_=!1));const fe=yield Promise.all(Z.collectSourceAttributions_(L).map(Ue=>function g(re){return function L(){let Z;try{Z=re()}catch(fe){return Promise.reject(fe)}return Z instanceof Promise?Z:Promise.resolve(Z)}()}(()=>Ue))),_e=fe.length>0;if(Z.renderedVisible_!=_e&&(Z.element.style.display=_e?"":"none",Z.renderedVisible_=_e),!s(fe,Z.renderedAttributions_)){!function Mr(re){for(;re.lastChild;)re.removeChild(re.lastChild)}(Z.ulElement_);for(let Ue=0,Xe=fe.length;Ue<Xe;++Ue){const lt=document.createElement("li");lt.innerHTML=fe[Ue],Z.ulElement_.appendChild(lt)}Z.renderedAttributions_=fe}})()}handleClick_(L){L.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(zl),this.collapsed_?br(this.collapseLabel_,this.label_):br(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(L){this.collapsible_!==L&&(this.collapsible_=L,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(L){this.userCollapsed_=L,this.collapsible_&&this.collapsed_!==L&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(L){this.updateElement_(L.frameState)}},Td=class jp extends of{constructor(L){L=L||{},super({element:document.createElement("div"),render:L.render,target:L.target});const Z=void 0!==L.className?L.className:"ol-rotate",fe=void 0!==L.label?L.label:"\u21e7",_e=void 0!==L.compassClassName?L.compassClassName:"ol-compass";this.label_=null,"string"==typeof fe?(this.label_=document.createElement("span"),this.label_.className=_e,this.label_.textContent=fe):(this.label_=fe,this.label_.classList.add(_e));const Ue=L.tipLabel?L.tipLabel:"Reset rotation",Xe=document.createElement("button");Xe.className=Z+"-reset",Xe.setAttribute("type","button"),Xe.title=Ue,Xe.appendChild(this.label_),Xe.addEventListener("click",this.handleClick_.bind(this),!1);const bt=this.element;bt.className=Z+" "+Is+" "+Ti,bt.appendChild(Xe),this.callResetNorth_=L.resetNorth?L.resetNorth:void 0,this.duration_=void 0!==L.duration?L.duration:250,this.autoHide_=void 0===L.autoHide||L.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(ia)}handleClick_(L){L.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const Z=this.getMap().getView();if(!Z)return;const fe=Z.getRotation();void 0!==fe&&(this.duration_>0&&fe%(2*Math.PI)!=0?Z.animate({rotation:0,duration:this.duration_,easing:Zo}):Z.setRotation(0))}render(L){const Z=L.frameState;if(!Z)return;const fe=Z.viewState.rotation;if(fe!=this.rotation_){const _e="rotate("+fe+"rad)";if(this.autoHide_){const Ue=this.element.classList.contains(ia);Ue||0!==fe?Ue&&0!==fe&&this.element.classList.remove(ia):this.element.classList.add(ia)}this.label_.style.transform=_e}this.rotation_=fe}},Ad=class kd extends of{constructor(L){L=L||{},super({element:document.createElement("div"),target:L.target});const Z=void 0!==L.className?L.className:"ol-zoom",fe=void 0!==L.delta?L.delta:1,_e=void 0!==L.zoomInClassName?L.zoomInClassName:Z+"-in",Ue=void 0!==L.zoomOutClassName?L.zoomOutClassName:Z+"-out",Xe=void 0!==L.zoomInLabel?L.zoomInLabel:"+",lt=void 0!==L.zoomOutLabel?L.zoomOutLabel:"\u2013",bt=void 0!==L.zoomInTipLabel?L.zoomInTipLabel:"Zoom in",Ht=void 0!==L.zoomOutTipLabel?L.zoomOutTipLabel:"Zoom out",Wt=document.createElement("button");Wt.className=_e,Wt.setAttribute("type","button"),Wt.title=bt,Wt.appendChild("string"==typeof Xe?document.createTextNode(Xe):Xe),Wt.addEventListener("click",this.handleClick_.bind(this,fe),!1);const pn=document.createElement("button");pn.className=Ue,pn.setAttribute("type","button"),pn.title=Ht,pn.appendChild("string"==typeof lt?document.createTextNode(lt):lt),pn.addEventListener("click",this.handleClick_.bind(this,-fe),!1);const tr=this.element;tr.className=Z+" "+Is+" "+Ti,tr.appendChild(Wt),tr.appendChild(pn),this.duration_=void 0!==L.duration?L.duration:250}handleClick_(L,Z){Z.preventDefault(),this.zoomByDelta_(L)}zoomByDelta_(L){const fe=this.getMap().getView();if(!fe)return;const _e=fe.getZoom();if(void 0!==_e){const Ue=fe.getConstrainedZoom(_e+L);this.duration_>0?(fe.getAnimating()&&fe.cancelAnimations(),fe.animate({zoom:Ue,duration:this.duration_,easing:Zo})):fe.setZoom(Ue)}}};function Nf(re,L,Z,fe){const _e=re.getZoom();if(void 0===_e)return;const Ue=re.getConstrainedZoom(_e+L),Xe=re.getResolutionForZoom(Ue);re.getAnimating()&&re.cancelAnimations(),re.animate({resolution:Xe,anchor:Z,duration:void 0!==fe?fe:250,easing:Zo})}const uu=class Up extends q{constructor(L){super(),L&&L.handleEvent&&(this.handleEvent=L.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get("active")}getMap(){return this.map_}handleEvent(L){return!0}setActive(L){this.set("active",L)}setMap(L){this.map_=L}},jf=class Cd extends uu{constructor(L){super(),this.delta_=(L=L||{}).delta?L.delta:1,this.duration_=void 0!==L.duration?L.duration:250}handleEvent(L){let Z=!1;if(L.type==Pi.DBLCLICK){const fe=L.originalEvent,Ue=L.coordinate,Xe=fe.shiftKey?-this.delta_:this.delta_;Nf(L.map.getView(),Xe,Ue,this.duration_),fe.preventDefault(),Z=!0}return!Z}};function Dc(re){const L=re.length;let Z=0,fe=0;for(let _e=0;_e<L;_e++)Z+=re[_e].clientX,fe+=re[_e].clientY;return{clientX:Z/L,clientY:fe/L}}const Hl=class Ld extends uu{constructor(L){super(L=L||{}),L.handleDownEvent&&(this.handleDownEvent=L.handleDownEvent),L.handleDragEvent&&(this.handleDragEvent=L.handleDragEvent),L.handleMoveEvent&&(this.handleMoveEvent=L.handleMoveEvent),L.handleUpEvent&&(this.handleUpEvent=L.handleUpEvent),L.stopDown&&(this.stopDown=L.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(L){return!1}handleDragEvent(L){}handleEvent(L){if(!L.originalEvent)return!0;let Z=!1;if(this.updateTrackedPointers_(L),this.handlingDownUpSequence){if(L.type==Pi.POINTERDRAG)this.handleDragEvent(L),L.originalEvent.preventDefault();else if(L.type==Pi.POINTERUP){const fe=this.handleUpEvent(L);this.handlingDownUpSequence=fe&&this.targetPointers.length>0}}else if(L.type==Pi.POINTERDOWN){const fe=this.handleDownEvent(L);this.handlingDownUpSequence=fe,Z=this.stopDown(fe)}else L.type==Pi.POINTERMOVE&&this.handleMoveEvent(L);return!Z}handleMoveEvent(L){}handleUpEvent(L){return!1}stopDown(L){return L}updateTrackedPointers_(L){L.activePointers&&(this.targetPointers=L.activePointers)}};function zc(re){const L=arguments;return function(Z){let fe=!0;for(let _e=0,Ue=L.length;_e<Ue&&(fe=fe&&L[_e](Z),fe);++_e);return fe}}const Vp=function(re){const L=re.originalEvent;return L.altKey&&!(L.metaKey||L.ctrlKey)&&L.shiftKey},Id=function(re){return!re.map.getTargetElement().hasAttribute("tabindex")||function(re){const L=re.map.getTargetElement(),Z=re.map.getOwnerDocument().activeElement;return L.contains(Z)}(re)},Fc=c,Uf=function(re){const L=re.originalEvent;return 0==L.button&&!(Kt&&kn&&L.ctrlKey)},Eh=function(re){const L=re.originalEvent;return!L.altKey&&!(L.metaKey||L.ctrlKey)&&!L.shiftKey},Yp=function(re){const L=re.originalEvent;return!L.altKey&&!(L.metaKey||L.ctrlKey)&&L.shiftKey},Od=function(re){const L=re.originalEvent,Z=L.target.tagName;return"INPUT"!==Z&&"SELECT"!==Z&&"TEXTAREA"!==Z&&!L.target.isContentEditable},Bc=function(re){const L=re.originalEvent;return ae(void 0!==L,"mapBrowserEvent must originate from a pointer event"),"mouse"==L.pointerType},Nc=function(re){const L=re.originalEvent;return ae(void 0!==L,"mapBrowserEvent must originate from a pointer event"),L.isPrimary&&0===L.button},Qi=class uf extends Hl{constructor(L){super({stopDown:y}),this.kinetic_=(L=L||{}).kinetic,this.lastCentroid=null,this.panning_=!1;const Z=L.condition?L.condition:zc(Eh,Nc);this.condition_=L.onFocusOnly?zc(Id,Z):Z,this.noKinetic_=!1}handleDragEvent(L){const Z=L.map;this.panning_||(this.panning_=!0,Z.getView().beginInteraction());const fe=this.targetPointers,_e=Z.getEventPixel(Dc(fe));if(fe.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(_e[0],_e[1]),this.lastCentroid){const Ue=[this.lastCentroid[0]-_e[0],_e[1]-this.lastCentroid[1]],lt=L.map.getView();(function zn(re,L){re[0]*=L,re[1]*=L})(Ue,lt.getResolution()),yn(Ue,lt.getRotation()),lt.adjustCenterInternal(Ue)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=_e,this.lastPointersCount_=fe.length,L.originalEvent.preventDefault()}handleUpEvent(L){const Z=L.map,fe=Z.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const _e=this.kinetic_.getDistance(),Ue=this.kinetic_.getAngle(),Xe=fe.getCenterInternal(),lt=Z.getPixelFromCoordinateInternal(Xe),bt=Z.getCoordinateFromPixelInternal([lt[0]-_e*Math.cos(Ue),lt[1]-_e*Math.sin(Ue)]);fe.animateInternal({center:fe.getConstrainedCenter(bt),duration:500,easing:Zo})}return this.panning_&&(this.panning_=!1,fe.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(L){if(this.targetPointers.length>0&&this.condition_(L)){const fe=L.map.getView();return this.lastCentroid=null,fe.getAnimating()&&fe.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}},Ch=class Zp extends Hl{constructor(L){L=L||{},super({stopDown:y}),this.condition_=L.condition?L.condition:Vp,this.lastAngle_=void 0,this.duration_=void 0!==L.duration?L.duration:250}handleDragEvent(L){if(!Bc(L))return;const Z=L.map,fe=Z.getView();if(fe.getConstraints().rotation===ls)return;const _e=Z.getSize(),Ue=L.pixel,Xe=Math.atan2(_e[1]/2-Ue[1],Ue[0]-_e[0]/2);void 0!==this.lastAngle_&&fe.adjustRotationInternal(-(Xe-this.lastAngle_)),this.lastAngle_=Xe}handleUpEvent(L){return!Bc(L)||(L.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(L){return!!(Bc(L)&&Uf(L)&&this.condition_(L))&&(L.map.getView().beginInteraction(),this.lastAngle_=void 0,!0)}},Xp=class jc extends _{constructor(L){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+L,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const L=this.startPixel_,Z=this.endPixel_,_e=this.element_.style;_e.left=Math.min(L[0],Z[0])+"px",_e.top=Math.min(L[1],Z[1])+"px",_e.width=Math.abs(Z[0]-L[0])+"px",_e.height=Math.abs(Z[1]-L[1])+"px"}setMap(L){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const Z=this.element_.style;Z.left="inherit",Z.top="inherit",Z.width="inherit",Z.height="inherit"}this.map_=L,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(L,Z){this.startPixel_=L,this.endPixel_=Z,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const L=this.startPixel_,Z=this.endPixel_,_e=[L,[L[0],Z[1]],Z,[Z[0],L[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);_e[4]=_e[0].slice(),this.geometry_?this.geometry_.setCoordinates([_e]):this.geometry_=new Sl([_e])}getGeometry(){return this.geometry_}};class Gf extends k{constructor(L,Z,fe){super(L),this.coordinate=Z,this.mapBrowserEvent=fe}}const Jp=class Kp extends Hl{constructor(L){super(),this.box_=new Xp((L=L||{}).className||"ol-dragbox"),this.minArea_=void 0!==L.minArea?L.minArea:64,L.onBoxEnd&&(this.onBoxEnd=L.onBoxEnd),this.startPixel_=null,this.condition_=L.condition?L.condition:Uf,this.boxEndCondition_=L.boxEndCondition?L.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(L,Z,fe){const _e=fe[0]-Z[0],Ue=fe[1]-Z[1];return _e*_e+Ue*Ue>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(L){this.startPixel_&&(this.box_.setPixels(this.startPixel_,L.pixel),this.dispatchEvent(new Gf("boxdrag",L.coordinate,L)))}handleUpEvent(L){if(!this.startPixel_)return!1;this.box_.setMap(null);const Z=this.boxEndCondition_(L,this.startPixel_,L.pixel);return Z&&this.onBoxEnd(L),this.dispatchEvent(new Gf(Z?"boxend":"boxcancel",L.coordinate,L)),!1}handleDownEvent(L){return!!this.condition_(L)&&(this.startPixel_=L.pixel,this.box_.setMap(L.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Gf("boxstart",L.coordinate,L)),!0)}onBoxEnd(L){}setActive(L){L||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Gf("boxcancel",this.startPixel_,null)),this.startPixel_=null)),super.setActive(L)}},Qp=class $p extends Jp{constructor(L){super({condition:(L=L||{}).condition?L.condition:Yp,className:L.className||"ol-dragzoom",minArea:L.minArea}),this.duration_=void 0!==L.duration?L.duration:200,this.out_=void 0!==L.out&&L.out}onBoxEnd(L){const fe=this.getMap().getView();let _e=this.getGeometry();if(this.out_){const Ue=fe.rotatedExtentForGeometry(_e),Xe=fe.getResolutionForExtentInternal(Ue),lt=fe.getResolution()/Xe;_e=_e.clone(),_e.scale(lt*lt)}fe.fitInternal(_e,{duration:this.duration_,easing:Zo})}},zd=class Dd extends uu{constructor(L){super(),L=L||{},this.defaultCondition_=function(Z){return Eh(Z)&&Od(Z)},this.condition_=void 0!==L.condition?L.condition:this.defaultCondition_,this.duration_=void 0!==L.duration?L.duration:100,this.pixelDelta_=void 0!==L.pixelDelta?L.pixelDelta:128}handleEvent(L){let Z=!1;if("keydown"==L.type){const fe=L.originalEvent,_e=fe.key;if(this.condition_(L)&&("ArrowDown"==_e||"ArrowLeft"==_e||"ArrowRight"==_e||"ArrowUp"==_e)){const Xe=L.map.getView(),lt=Xe.getResolution()*this.pixelDelta_;let bt=0,Ht=0;"ArrowDown"==_e?Ht=-lt:"ArrowLeft"==_e?bt=-lt:"ArrowRight"==_e?bt=lt:Ht=lt;const Wt=[bt,Ht];yn(Wt,Xe.getRotation()),function Ed(re,L,Z){const fe=re.getCenterInternal();fe&&re.animateInternal({duration:void 0!==Z?Z:250,easing:Kl,center:re.getConstrainedCenter([fe[0]+L[0],fe[1]+L[1]])})}(Xe,Wt,this.duration_),fe.preventDefault(),Z=!0}}return!Z}},Hf=class Fd extends uu{constructor(L){super(),this.condition_=(L=L||{}).condition?L.condition:function(Z){return!function(re){const L=re.originalEvent;return kn?L.metaKey:L.ctrlKey}(Z)&&Od(Z)},this.delta_=L.delta?L.delta:1,this.duration_=void 0!==L.duration?L.duration:100}handleEvent(L){let Z=!1;if("keydown"==L.type||"keypress"==L.type){const fe=L.originalEvent,_e=fe.key;if(this.condition_(L)&&("+"===_e||"-"===_e)){const Xe="+"===_e?this.delta_:-this.delta_;Nf(L.map.getView(),Xe,void 0,this.duration_),fe.preventDefault(),Z=!0}}return!Z}},Lh=class cc{constructor(L,Z,fe){this.decay_=L,this.minVelocity_=Z,this.delay_=fe,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(L,Z){this.points_.push(L,Z,Date.now())}end(){if(this.points_.length<6)return!1;const L=Date.now()-this.delay_,Z=this.points_.length-3;if(this.points_[Z+2]<L)return!1;let fe=Z-3;for(;fe>0&&this.points_[fe+2]>L;)fe-=3;const _e=this.points_[Z+2]-this.points_[fe+2];if(_e<1e3/60)return!1;const Ue=this.points_[Z]-this.points_[fe],Xe=this.points_[Z+1]-this.points_[fe+1];return this.angle_=Math.atan2(Xe,Ue),this.initialVelocity_=Math.sqrt(Ue*Ue+Xe*Xe)/_e,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}},Bd=class Uc extends uu{constructor(L){super(L=L||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==L.maxDelta?L.maxDelta:1,this.duration_=void 0!==L.duration?L.duration:250,this.timeout_=void 0!==L.timeout?L.timeout:80,this.useAnchor_=void 0===L.useAnchor||L.useAnchor,this.constrainResolution_=void 0!==L.constrainResolution&&L.constrainResolution;const Z=L.condition?L.condition:Fc;this.condition_=L.onFocusOnly?zc(Id,Z):Z,this.lastAnchor_=null,this.startTime_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const L=this.getMap();L&&L.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(L){if(!this.condition_(L)||"wheel"!==L.type)return!0;const fe=L.map,_e=L.originalEvent;let Ue;if(_e.preventDefault(),this.useAnchor_&&(this.lastAnchor_=L.coordinate),"wheel"==L.type&&(Ue=_e.deltaY,Ft&&_e.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(Ue/=En),_e.deltaMode===WheelEvent.DOM_DELTA_LINE&&(Ue*=40)),0===Ue)return!1;this.lastDelta_=Ue;const Xe=Date.now();void 0===this.startTime_&&(this.startTime_=Xe),(!this.mode_||Xe-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(Ue)<4?"trackpad":"wheel");const lt=fe.getView();if("trackpad"===this.mode_&&!lt.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(lt.getAnimating()&&lt.cancelAnimations(),lt.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),lt.adjustZoom(-Ue/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=Xe,!1;this.totalDelta_+=Ue;const bt=Math.max(this.timeout_-(Xe-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,fe),bt),!1}handleWheelZoom_(L){const Z=L.getView();Z.getAnimating()&&Z.cancelAnimations();let fe=-ce(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(Z.getConstrainResolution()||this.constrainResolution_)&&(fe=fe?fe>0?1:-1:0),Nf(Z,fe,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(L){this.useAnchor_=L,L||(this.lastAnchor_=null)}},Nd=class Ka extends Hl{constructor(L){const Z=L=L||{};Z.stopDown||(Z.stopDown=y),super(Z),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==L.threshold?L.threshold:.3,this.duration_=void 0!==L.duration?L.duration:250}handleDragEvent(L){let Z=0;const fe=this.targetPointers[0],_e=this.targetPointers[1],Ue=Math.atan2(_e.clientY-fe.clientY,_e.clientX-fe.clientX);if(void 0!==this.lastAngle_){const bt=Ue-this.lastAngle_;this.rotationDelta_+=bt,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),Z=bt}this.lastAngle_=Ue;const Xe=L.map,lt=Xe.getView();lt.getConstraints().rotation!==ls&&(this.anchor_=Xe.getCoordinateFromPixelInternal(Xe.getEventPixel(Dc(this.targetPointers))),this.rotating_&&(Xe.render(),lt.adjustRotationInternal(Z,this.anchor_)))}handleUpEvent(L){return!(this.targetPointers.length<2&&(L.map.getView().endInteraction(this.duration_),1))}handleDownEvent(L){if(this.targetPointers.length>=2){const Z=L.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||Z.getView().beginInteraction(),!0}return!1}},jd=class xa extends Hl{constructor(L){const Z=L=L||{};Z.stopDown||(Z.stopDown=y),super(Z),this.anchor_=null,this.duration_=void 0!==L.duration?L.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(L){let Z=1;const fe=this.targetPointers[0],_e=this.targetPointers[1],Ue=fe.clientX-_e.clientX,Xe=fe.clientY-_e.clientY,lt=Math.sqrt(Ue*Ue+Xe*Xe);void 0!==this.lastDistance_&&(Z=this.lastDistance_/lt),this.lastDistance_=lt;const bt=L.map,Ht=bt.getView();1!=Z&&(this.lastScaleDelta_=Z),this.anchor_=bt.getCoordinateFromPixelInternal(bt.getEventPixel(Dc(this.targetPointers))),bt.render(),Ht.adjustResolutionInternal(Z,this.anchor_)}handleUpEvent(L){return!(this.targetPointers.length<2)||(L.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),!1)}handleDownEvent(L){if(this.targetPointers.length>=2){const Z=L.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||Z.getView().beginInteraction(),!0}return!1}};function ff(re){re=re||{};const L=new J,Z=new Lh(-.005,.05,100);return(void 0===re.altShiftDragRotate||re.altShiftDragRotate)&&L.push(new Ch),(void 0===re.doubleClickZoom||re.doubleClickZoom)&&L.push(new jf({delta:re.zoomDelta,duration:re.zoomDuration})),(void 0===re.dragPan||re.dragPan)&&L.push(new Qi({onFocusOnly:re.onFocusOnly,kinetic:Z})),(void 0===re.pinchRotate||re.pinchRotate)&&L.push(new Nd),(void 0===re.pinchZoom||re.pinchZoom)&&L.push(new jd({duration:re.zoomDuration})),(void 0===re.keyboard||re.keyboard)&&(L.push(new zd),L.push(new Hf({delta:re.zoomDelta,duration:re.zoomDuration}))),(void 0===re.mouseWheelZoom||re.mouseWheelZoom)&&L.push(new Bd({onFocusOnly:re.onFocusOnly,duration:re.zoomDuration})),(void 0===re.shiftDragZoom||re.shiftDragZoom)&&L.push(new Qp({duration:re.zoomDuration})),L}function Ih(re){re instanceof Bo?re.setMapInternal(null):re instanceof Wu&&re.getLayers().forEach(Ih)}function Ph(re,L){if(re instanceof Bo)re.setMapInternal(L);else if(re instanceof Wu){const Z=re.getLayers().getArray();for(let fe=0,_e=Z.length;fe<_e;++fe)Ph(Z[fe],L)}}const Du=class Ud extends q{constructor(L){super();const Z=function Oh(re){let L=null;void 0!==re.keyboardEventTarget&&(L="string"==typeof re.keyboardEventTarget?document.getElementById(re.keyboardEventTarget):re.keyboardEventTarget);const Z={},fe=re.layers&&"function"==typeof re.layers.getLayers?re.layers:new Wu({layers:re.layers});let _e,Ue,Xe;return Z.layergroup=fe,Z.target=re.target,Z.view=re.view instanceof Yr?re.view:new Yr,void 0!==re.controls&&(Array.isArray(re.controls)?_e=new J(re.controls.slice()):(ae("function"==typeof re.controls.getArray,"Expected `controls` to be an array or an `ol/Collection.js`"),_e=re.controls)),void 0!==re.interactions&&(Array.isArray(re.interactions)?Ue=new J(re.interactions.slice()):(ae("function"==typeof re.interactions.getArray,"Expected `interactions` to be an array or an `ol/Collection.js`"),Ue=re.interactions)),void 0!==re.overlays?Array.isArray(re.overlays)?Xe=new J(re.overlays.slice()):(ae("function"==typeof re.overlays.getArray,"Expected `overlays` to be an array or an `ol/Collection.js`"),Xe=re.overlays):Xe=new J,{controls:_e,interactions:Ue,keyboardEventTarget:L,overlays:Xe,values:Z}}(L=L||{});this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==L.maxTilesLoading?L.maxTilesLoading:16,this.pixelRatio_=void 0!==L.pixelRatio?L.pixelRatio:En,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=L.moveTolerance,this.keyboardEventTarget_=Z.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=Z.controls||function Md(re){re=re||{};const L=new J;return(void 0===re.zoom||re.zoom)&&L.push(new Ad(re.zoomOptions)),(void 0===re.rotate||re.rotate)&&L.push(new Td(re.rotateOptions)),(void 0===re.attribution||re.attribution)&&L.push(new wd(re.attributionOptions)),L}(),this.interactions=Z.interactions||ff({onFocusOnly:!0}),this.overlays_=Z.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Np(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener("layergroup",this.handleLayerGroupChanged_),this.addChangeListener("view",this.handleViewChanged_),this.addChangeListener("size",this.handleSizeChanged_),this.addChangeListener("target",this.handleTargetChanged_),this.setProperties(Z.values);const fe=this;L.view&&!(L.view instanceof Yr)&&L.view.then(function(_e){fe.setView(new Yr(_e))}),this.controls.addEventListener("add",_e=>{_e.element.setMap(this)}),this.controls.addEventListener("remove",_e=>{_e.element.setMap(null)}),this.interactions.addEventListener("add",_e=>{_e.element.setMap(this)}),this.interactions.addEventListener("remove",_e=>{_e.element.setMap(null)}),this.overlays_.addEventListener("add",_e=>{this.addOverlayInternal_(_e.element)}),this.overlays_.addEventListener("remove",_e=>{const Ue=_e.element.getId();void 0!==Ue&&delete this.overlayIdIndex_[Ue.toString()],_e.element.setMap(null)}),this.controls.forEach(_e=>{_e.setMap(this)}),this.interactions.forEach(_e=>{_e.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(L){this.getControls().push(L)}addInteraction(L){this.getInteractions().push(L)}addLayer(L){this.getLayerGroup().getLayers().push(L)}handleLayerAdd_(L){Ph(L.layer,this)}addOverlay(L){this.getOverlays().push(L)}addOverlayInternal_(L){const Z=L.getId();void 0!==Z&&(this.overlayIdIndex_[Z.toString()]=L),L.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(L,Z,fe){if(!this.frameState_||!this.renderer_)return;const _e=this.getCoordinateFromPixelInternal(L);return this.renderer_.forEachFeatureAtCoordinate(_e,this.frameState_,void 0!==(fe=void 0!==fe?fe:{}).hitTolerance?fe.hitTolerance:0,!1!==fe.checkWrapped,Z,null,void 0!==fe.layerFilter?fe.layerFilter:c,null)}getFeaturesAtPixel(L,Z){const fe=[];return this.forEachFeatureAtPixel(L,function(_e){fe.push(_e)},Z),fe}getAllLayers(){const L=[];return function Z(fe){fe.forEach(function(_e){_e instanceof Wu?Z(_e.getLayers()):L.push(_e)})}(this.getLayers()),L}hasFeatureAtPixel(L,Z){if(!this.frameState_||!this.renderer_)return!1;const fe=this.getCoordinateFromPixelInternal(L);return this.renderer_.hasFeatureAtCoordinate(fe,this.frameState_,void 0!==(Z=void 0!==Z?Z:{}).hitTolerance?Z.hitTolerance:0,!1!==Z.checkWrapped,void 0!==Z.layerFilter?Z.layerFilter:c,null)}getEventCoordinate(L){return this.getCoordinateFromPixel(this.getEventPixel(L))}getEventCoordinateInternal(L){return this.getCoordinateFromPixelInternal(this.getEventPixel(L))}getEventPixel(L){const fe=this.viewport_.getBoundingClientRect(),_e=this.getSize(),lt="changedTouches"in L?L.changedTouches[0]:L;return[(lt.clientX-fe.left)/(fe.width/_e[0]),(lt.clientY-fe.top)/(fe.height/_e[1])]}getTarget(){return this.get("target")}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(L){return xs(this.getCoordinateFromPixelInternal(L),this.getView().getProjection())}getCoordinateFromPixelInternal(L){const Z=this.frameState_;return Z?Ea(Z.pixelToCoordinateTransform,L.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(L){const Z=this.overlayIdIndex_[L.toString()];return void 0!==Z?Z:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get("layergroup")}setLayers(L){const Z=this.getLayerGroup();if(L instanceof J)return void Z.setLayers(L);const fe=Z.getLayers();fe.clear(),fe.extend(L)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const L=this.getLayerGroup().getLayerStatesArray();for(let Z=0,fe=L.length;Z<fe;++Z){const _e=L[Z];if(!_e.visible)continue;const Ue=_e.layer.getRenderer();if(Ue&&!Ue.ready)return!0;const Xe=_e.layer.getSource();if(Xe&&Xe.loading)return!0}return!1}getPixelFromCoordinate(L){const Z=ss(L,this.getView().getProjection());return this.getPixelFromCoordinateInternal(Z)}getPixelFromCoordinateInternal(L){const Z=this.frameState_;return Z?Ea(Z.coordinateToPixelTransform,L.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get("size")}getView(){return this.get("view")}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const L=this.getTargetElement();return L?L.ownerDocument:document}getTilePriority(L,Z,fe,_e){return function bd(re,L,Z,fe,_e){if(!re||!(Z in re.wantedTiles)||!re.wantedTiles[Z][L.getKey()])return Bf;const Ue=re.viewState.center,Xe=fe[0]-Ue[0],lt=fe[1]-Ue[1];return 65536*Math.log(_e)+Math.sqrt(Xe*Xe+lt*lt)/_e}(this.frameState_,L,Z,fe,_e)}handleBrowserEvent(L,Z){const fe=new vl(Z=Z||L.type,this,L);this.handleMapBrowserEvent(fe)}handleMapBrowserEvent(L){if(!this.frameState_)return;const Z=L.originalEvent,fe=Z.type;if("pointerdown"===fe||"wheel"===fe||"keydown"===fe){const _e=this.getOwnerDocument(),Ue=this.viewport_.getRootNode?this.viewport_.getRootNode():_e,Xe=Z.target;if(this.overlayContainerStopEvent_.contains(Xe)||!(Ue===_e?_e.documentElement:Ue).contains(Xe))return}if(L.frameState=this.frameState_,!1!==this.dispatchEvent(L)){const _e=this.getInteractions().getArray().slice();for(let Ue=_e.length-1;Ue>=0;Ue--){const Xe=_e[Ue];if(Xe.getMap()===this&&Xe.getActive()&&this.getTargetElement()&&(!Xe.handleEvent(L)||L.propagationStopped))break}}}handlePostRender(){const L=this.frameState_,Z=this.tileQueue_;if(!Z.isEmpty()){let _e=this.maxTilesLoading_,Ue=_e;if(L){const Xe=L.viewHints;if(Xe[0]||Xe[1]){const lt=Date.now()-L.time>8;_e=lt?0:8,Ue=lt?0:2}}Z.getTilesLoading()<_e&&(Z.reprioritize(),Z.loadMoreTiles(_e,Ue))}L&&this.renderer_&&!L.animate&&(!0===this.renderComplete_?(this.hasListener("rendercomplete")&&this.renderer_.dispatchRenderEvent("rendercomplete",L),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new Mo("loadend",this,L)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new Mo("loadstart",this,L))));const fe=this.postRenderFunctions_;for(let _e=0,Ue=fe.length;_e<Ue;++_e)fe[_e](this,L);fe.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let fe=0,_e=this.targetChangeHandlerKeys_.length;fe<_e;++fe)P(this.targetChangeHandlerKeys_[fe]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener("contextmenu",this.boundHandleBrowserEvent_),this.viewport_.removeEventListener("wheel",this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,jr(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const fe=this.targetElement_.getRootNode();fe instanceof ShadowRoot&&this.resizeObserver_.unobserve(fe.host),this.setSize(void 0)}const L=this.getTarget(),Z="string"==typeof L?document.getElementById(L):L;if(this.targetElement_=Z,Z){Z.appendChild(this.viewport_),this.renderer_||(this.renderer_=new vd(this)),this.mapBrowserEventHandler_=new Os(this,this.moveTolerance_);for(const Ue in Pi)this.mapBrowserEventHandler_.addEventListener(Pi[Ue],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener("contextmenu",this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener("wheel",this.boundHandleBrowserEvent_,!!gr&&{passive:!1});const fe=this.keyboardEventTarget_?this.keyboardEventTarget_:Z;this.targetChangeHandlerKeys_=[w(fe,"keydown",this.handleBrowserEvent,this),w(fe,"keypress",this.handleBrowserEvent,this)];const _e=Z.getRootNode();_e instanceof ShadowRoot&&this.resizeObserver_.observe(_e.host),this.resizeObserver_.observe(Z)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(P(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(P(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const L=this.getView();L&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=w(L,"propertychange",this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=w(L,"change",this.handleViewPropertyChanged_,this),L.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(P),this.layerGroupPropertyListenerKeys_=null);const L=this.getLayerGroup();L&&(this.handleLayerAdd_(new Ou("addlayer",L)),this.layerGroupPropertyListenerKeys_=[w(L,"propertychange",this.render,this),w(L,"change",this.render,this),w(L,"addlayer",this.handleLayerAdd_,this),w(L,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const L=this.getLayerGroup().getLayerStatesArray();for(let Z=0,fe=L.length;Z<fe;++Z){const _e=L[Z].layer;_e.hasRenderer()&&_e.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(L){return this.getControls().remove(L)}removeInteraction(L){return this.getInteractions().remove(L)}removeLayer(L){return this.getLayerGroup().getLayers().remove(L)}handleLayerRemove_(L){Ih(L.layer)}removeOverlay(L){return this.getOverlays().remove(L)}renderFrame_(L){const Z=this.getSize(),fe=this.getView(),_e=this.frameState_;let Ue=null;if(void 0!==Z&&Su(Z)&&fe&&fe.isDef()){const Xe=fe.getHints(this.frameState_?this.frameState_.viewHints:void 0),lt=fe.getState();if(Ue={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:rr(lt.center,lt.resolution,lt.rotation,Z),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:Z,tileQueue:this.tileQueue_,time:L,usedTiles:{},viewState:lt,viewHints:Xe,wantedTiles:{},mapId:j(this),renderTargets:{}},lt.nextCenter&&lt.nextResolution){const bt=isNaN(lt.nextRotation)?lt.rotation:lt.nextRotation;Ue.nextExtent=rr(lt.nextCenter,lt.nextResolution,bt,Z)}}this.frameState_=Ue,this.renderer_.renderFrame(Ue),Ue&&(Ue.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,Ue.postRenderFunctions),_e&&(!this.previousExtent_||!lr(this.previousExtent_)&&!Gn(Ue.extent,this.previousExtent_))&&(this.dispatchEvent(new Mo("movestart",this,_e)),this.previousExtent_=nn(this.previousExtent_)),this.previousExtent_&&!Ue.viewHints[0]&&!Ue.viewHints[1]&&!Gn(Ue.extent,this.previousExtent_)&&(this.dispatchEvent(new Mo("moveend",this,Ue)),function kt(re,L){L?(L[0]=re[0],L[1]=re[1],L[2]=re[2],L[3]=re[3]):re.slice()}(Ue.extent,this.previousExtent_))),this.dispatchEvent(new Mo("postrender",this,Ue)),this.renderComplete_=this.hasListener("loadstart")||this.hasListener("loadend")||this.hasListener("rendercomplete")?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(L){const Z=this.getLayerGroup();Z&&this.handleLayerRemove_(new Ou("removelayer",Z)),this.set("layergroup",L)}setSize(L){this.set("size",L)}setTarget(L){this.set("target",L)}setView(L){if(!L||L instanceof Yr)return void this.set("view",L);this.set("view",new Yr);const Z=this;L.then(function(fe){Z.setView(new Yr(fe))})}updateSize(){const L=this.getTargetElement();let Z;if(L){const _e=getComputedStyle(L),Ue=L.offsetWidth-parseFloat(_e.borderLeftWidth)-parseFloat(_e.paddingLeft)-parseFloat(_e.paddingRight)-parseFloat(_e.borderRightWidth),Xe=L.offsetHeight-parseFloat(_e.borderTopWidth)-parseFloat(_e.paddingTop)-parseFloat(_e.paddingBottom)-parseFloat(_e.borderBottomWidth);!isNaN(Ue)&&!isNaN(Xe)&&(Z=[Ue,Xe],!Su(Z)&&(L.offsetWidth||L.offsetHeight||L.getClientRects().length)&&Gi("No map visible because the map container's width or height are 0."))}const fe=this.getSize();Z&&(!fe||!s(Z,fe))&&(this.setSize(Z),this.updateViewportSize_(Z))}updateViewportSize_(L){const Z=this.getView();Z&&Z.setViewportSize(L)}},Ja=class Vd extends Bo{constructor(L){L=L||{};const Z=Object.assign({},L);delete Z.preload,delete Z.useInterimTilesOnError,super(Z),this.setPreload(void 0!==L.preload?L.preload:0),this.setUseInterimTilesOnError(void 0===L.useInterimTilesOnError||L.useInterimTilesOnError)}getPreload(){return this.get("preload")}setPreload(L){this.set("preload",L)}getUseInterimTilesOnError(){return this.get("useInterimTilesOnError")}setUseInterimTilesOnError(L){this.set("useInterimTilesOnError",L)}getData(L){return super.getData(L)}},zu=class hf extends z{constructor(L){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=L}getFeatures(L){return U()}getData(L){return null}prepareFrame(L){return U()}renderFrame(L,Z){return U()}loadedTileCallback(L,Z,fe){L[Z]||(L[Z]={}),L[Z][fe.tileCoord.toString()]=fe}createLoadedTileFinder(L,Z,fe){return(_e,Ue)=>{const Xe=this.loadedTileCallback.bind(this,fe,_e);return L.forEachLoadedTile(Z,_e,Ue,Xe)}}forEachFeatureAtCoordinate(L,Z,fe,_e,Ue){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(L){const Z=L.target;(Z.getState()===fi_LOADED||Z.getState()===fi_ERROR)&&this.renderIfReadyAndVisible()}loadImage(L){let Z=L.getState();return Z!=fi_LOADED&&Z!=fi_ERROR&&L.addEventListener("change",this.boundHandleImageChange_),Z==fi_IDLE&&(L.load(),Z=L.getState()),Z==fi_LOADED}renderIfReadyAndVisible(){const L=this.getLayer();L&&L.getVisible()&&"ready"===L.getSourceState()&&L.changed()}renderDeferred(L){}disposeInternal(){delete this.layer_,super.disposeInternal()}},Wf=class qf{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(_r(),{get:(L,Z)=>{if("function"==typeof _r()[Z])return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(Z),this.pushMethodArgs_},set:(L,Z,fe)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(Z,fe),!0)})}pushMethodArgs_=(...L)=>(this.instructions_[this.zIndex+this.offset_].push(L),this);pushFunction(L){this.instructions_[this.zIndex+this.offset_].push(L)}getContext(){return this.context_}draw(L){this.instructions_.forEach(Z=>{for(let fe=0,_e=Z.length;fe<_e;++fe){const Ue=Z[fe];if("function"==typeof Ue){Ue(L);continue}const Xe=Z[++fe];if("function"==typeof L[Ue])L[Ue](...Xe);else{if("function"==typeof Xe){L[Ue]=Xe(L);continue}L[Ue]=Xe}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}};let ql=null;const qd=class Hd extends zu{constructor(L){super(L),this.container=null,this.tempTransform=[1,0,0,1,0,0],this.pixelTransform=[1,0,0,1,0,0],this.inversePixelTransform=[1,0,0,1,0,0],this.context=null,this.deferredContext_=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(L,Z,fe){let _e;ql||function Fu(){ql=wr(1,1,void 0,{willReadFrequently:!0})}(),ql.clearRect(0,0,1,1);try{ql.drawImage(L,Z,fe,1,1,0,0,1,1),_e=ql.getImageData(0,0,1,1).data}catch{return ql=null,null}return _e}getBackground(L){let fe=this.getLayer().getBackground();return"function"==typeof fe&&(fe=fe(L.viewState.resolution)),fe||void 0}useContainer(L,Z,fe){const _e=this.getLayer().getClassName();let Ue,Xe;if(L&&L.className===_e&&(!fe||L&&L.style.backgroundColor&&s(xt(L.style.backgroundColor),xt(fe)))){const lt=L.firstElementChild;lt instanceof HTMLCanvasElement&&(Xe=lt.getContext("2d"))}if(Xe&&Xe.canvas.style.transform===Z?(this.container=L,this.context=Xe,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){Ue=document.createElement("div"),Ue.className=_e;let lt=Ue.style;lt.position="absolute",lt.width="100%",lt.height="100%",Xe=wr();const bt=Xe.canvas;Ue.appendChild(bt),lt=bt.style,lt.position="absolute",lt.left="0",lt.transformOrigin="top left",this.container=Ue,this.context=Xe}!this.containerReused&&fe&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=fe)}clipUnrotated(L,Z,fe){const _e=Mn(fe),Ue=Hn(fe),Xe=Fn(fe),lt=jn(fe);Ea(Z.coordinateToPixelTransform,_e),Ea(Z.coordinateToPixelTransform,Ue),Ea(Z.coordinateToPixelTransform,Xe),Ea(Z.coordinateToPixelTransform,lt);const bt=this.inversePixelTransform;Ea(bt,_e),Ea(bt,Ue),Ea(bt,Xe),Ea(bt,lt),L.save(),L.beginPath(),L.moveTo(Math.round(_e[0]),Math.round(_e[1])),L.lineTo(Math.round(Ue[0]),Math.round(Ue[1])),L.lineTo(Math.round(Xe[0]),Math.round(Xe[1])),L.lineTo(Math.round(lt[0]),Math.round(lt[1])),L.clip()}prepareContainer(L,Z){const fe=L.extent,_e=L.viewState.resolution,Ue=L.viewState.rotation,Xe=L.pixelRatio,lt=Math.round(Wn(fe)/_e*Xe),bt=Math.round(nr(fe)/_e*Xe);ws(this.pixelTransform,L.size[0]/2,L.size[1]/2,1/Xe,1/Xe,Ue,-lt/2,-bt/2),Ql(this.inversePixelTransform,this.pixelTransform);const Ht=function sl(re){return"matrix("+re.map((Z,fe)=>Math.round(Z*Us[fe])/Us[fe]).join(", ")+")"}(this.pixelTransform);if(this.useContainer(Z,Ht,this.getBackground(L)),!this.containerReused){const Wt=this.context.canvas;Wt.width!=lt||Wt.height!=bt?(Wt.width=lt,Wt.height=bt):this.context.clearRect(0,0,lt,bt),Ht!==Wt.style.transform&&(Wt.style.transform=Ht)}}dispatchRenderEvent_(L,Z,fe){const _e=this.getLayer();if(_e.hasListener(L)){const Ue=new md(L,this.inversePixelTransform,fe,Z);_e.dispatchEvent(Ue)}}preRender(L,Z){this.frameState=Z,!Z.declutter&&this.dispatchRenderEvent_("prerender",L,Z)}postRender(L,Z){Z.declutter||this.dispatchRenderEvent_("postrender",L,Z)}renderDeferredInternal(L){}getRenderContext(L){return L.declutter&&!this.deferredContext_&&(this.deferredContext_=new Wf),L.declutter?this.deferredContext_.getContext():this.context}renderDeferred(L){L.declutter&&(this.dispatchRenderEvent_("prerender",this.context,L),L.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(L),this.dispatchRenderEvent_("postrender",this.context,L))}getRenderTransform(L,Z,fe,_e,Ue,Xe,lt){const Wt=_e/Z;return ws(this.tempTransform,Ue/2,Xe/2,Wt,-Wt,-fe,-L[0]+lt,-L[1])}disposeInternal(){delete this.frameState,super.disposeInternal()}},ro=class e0 extends h{constructor(L,Z,fe){super(),fe=fe||{},this.tileCoord=L,this.state=Z,this.interimTile=null,this.key="",this.transition_=void 0===fe.transition?250:fe.transition,this.transitionStarts_={},this.interpolate=!!fe.interpolate}changed(){this.dispatchEvent("change")}release(){3===this.state&&this.setState(4)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let L=this.interimTile;if(!L)return this;do{if(2==L.getState())return this.transition_=0,L;L=L.interimTile}while(L);return this}refreshInterimChain(){let L=this.interimTile;if(!L)return;let Z=this;do{if(2==L.getState()){L.interimTile=null;break}1==L.getState()?Z=L:0==L.getState()?Z.interimTile=L.interimTile:Z=L,L=Z.interimTile}while(L)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(L){if(3!==this.state&&this.state>L)throw new Error("Tile load sequence violation");this.state=L,this.changed()}load(){U()}getAlpha(L,Z){if(!this.transition_)return 1;let fe=this.transitionStarts_[L];if(fe){if(-1===fe)return 1}else fe=Z,this.transitionStarts_[L]=fe;const _e=Z-fe+1e3/60;return _e>=this.transition_?1:mi(_e/this.transition_)}inTransition(L){return!!this.transition_&&-1!==this.transitionStarts_[L]}endTransition(L){this.transition_&&(this.transitionStarts_[L]=-1)}},A=class Xu extends ro{constructor(L,Z,fe,_e,Ue,Xe){super(L,Z,Xe),this.crossOrigin_=_e,this.src_=fe,this.key=fe,this.image_=new Image,null!==_e&&(this.image_.crossOrigin=_e),this.unlisten_=null,this.tileLoadFunction_=Ue}getImage(){return this.image_}setImage(L){this.image_=L,this.state=2,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=3,this.unlistenImage_(),this.image_=function Wd(){const re=wr(1,1);return re.fillStyle="rgba(0,0,0,0)",re.fillRect(0,0,1,1),re.canvas}(),this.changed()}handleImageLoad_(){const L=this.image_;this.state=L.naturalWidth&&L.naturalHeight?2:4,this.unlistenImage_(),this.changed()}load(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=function si(re,L,Z){const fe=re;let _e=!0,Ue=!1,Xe=!1;const lt=[E(fe,"load",function(){Xe=!0,Ue||L()})];return fe.src&&qn?(Ue=!0,fe.decode().then(function(){_e&&L()}).catch(function(bt){_e&&(Xe?L():Z())})):lt.push(E(fe,"error",Z)),function(){_e=!1,lt.forEach(P)}}(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}},ze=class Ee{constructor(L,Z,fe,_e,Ue,Xe){this.sourceProj_=L,this.targetProj_=Z;let lt={};const bt=oo(this.targetProj_,this.sourceProj_);this.transformInv_=function(zr){const ri=zr[0]+"/"+zr[1];return lt[ri]||(lt[ri]=bt(zr)),lt[ri]},this.maxSourceExtent_=_e,this.errorThresholdSquared_=Ue*Ue,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!_e&&!!this.sourceProj_.getExtent()&&Wn(_e)>=Wn(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Wn(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Wn(this.targetProj_.getExtent()):null;const Ht=Mn(fe),Wt=Hn(fe),pn=Fn(fe),On=jn(fe),tr=this.transformInv_(Ht),ar=this.transformInv_(Wt),Tr=this.transformInv_(pn),Ir=this.transformInv_(On),Br=10+(Xe?Math.max(0,Math.ceil(Math.log2(Nn(fe)/(Xe*Xe*256*256)))):0);if(this.addQuad_(Ht,Wt,pn,On,tr,ar,Tr,Ir,Br),this.wrapsXInSource_){let zr=1/0;this.triangles_.forEach(function(ri,Jr,Xr){zr=Math.min(zr,ri.source[0][0],ri.source[1][0],ri.source[2][0])}),this.triangles_.forEach(ri=>{if(Math.max(ri.source[0][0],ri.source[1][0],ri.source[2][0])-zr>this.sourceWorldWidth_/2){const Jr=[[ri.source[0][0],ri.source[0][1]],[ri.source[1][0],ri.source[1][1]],[ri.source[2][0],ri.source[2][1]]];Jr[0][0]-zr>this.sourceWorldWidth_/2&&(Jr[0][0]-=this.sourceWorldWidth_),Jr[1][0]-zr>this.sourceWorldWidth_/2&&(Jr[1][0]-=this.sourceWorldWidth_),Jr[2][0]-zr>this.sourceWorldWidth_/2&&(Jr[2][0]-=this.sourceWorldWidth_);const Xr=Math.min(Jr[0][0],Jr[1][0],Jr[2][0]);Math.max(Jr[0][0],Jr[1][0],Jr[2][0])-Xr<this.sourceWorldWidth_/2&&(ri.source=Jr)}})}lt={}}addTriangle_(L,Z,fe,_e,Ue,Xe){this.triangles_.push({source:[_e,Ue,Xe],target:[L,Z,fe]})}addQuad_(L,Z,fe,_e,Ue,Xe,lt,bt,Ht){const Wt=Qe([Ue,Xe,lt,bt]),pn=this.sourceWorldWidth_?Wn(Wt)/this.sourceWorldWidth_:null,On=this.sourceWorldWidth_,tr=this.sourceProj_.canWrapX()&&pn>.5&&pn<1;let ar=!1;if(Ht>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(ar=Wn(Qe([L,Z,fe,_e]))/this.targetWorldWidth_>.25||ar),!tr&&this.sourceProj_.isGlobal()&&pn&&(ar=pn>.25||ar)),!ar&&this.maxSourceExtent_&&isFinite(Wt[0])&&isFinite(Wt[1])&&isFinite(Wt[2])&&isFinite(Wt[3])&&!$n(Wt,this.maxSourceExtent_))return;let Tr=0;if(!(ar||isFinite(Ue[0])&&isFinite(Ue[1])&&isFinite(Xe[0])&&isFinite(Xe[1])&&isFinite(lt[0])&&isFinite(lt[1])&&isFinite(bt[0])&&isFinite(bt[1])))if(Ht>0)ar=!0;else if(Tr=(isFinite(Ue[0])&&isFinite(Ue[1])?0:8)+(isFinite(Xe[0])&&isFinite(Xe[1])?0:4)+(isFinite(lt[0])&&isFinite(lt[1])?0:2)+(isFinite(bt[0])&&isFinite(bt[1])?0:1),1!=Tr&&2!=Tr&&4!=Tr&&8!=Tr)return;if(Ht>0){if(!ar){const Br=this.transformInv_([(L[0]+fe[0])/2,(L[1]+fe[1])/2]);let zr;zr=tr?(ve(Ue[0],On)+ve(lt[0],On))/2-ve(Br[0],On):(Ue[0]+lt[0])/2-Br[0];const ri=(Ue[1]+lt[1])/2-Br[1];ar=zr*zr+ri*ri>this.errorThresholdSquared_}if(ar){if(Math.abs(L[0]-fe[0])<=Math.abs(L[1]-fe[1])){const Ir=[(Z[0]+fe[0])/2,(Z[1]+fe[1])/2],Br=this.transformInv_(Ir),zr=[(_e[0]+L[0])/2,(_e[1]+L[1])/2],ri=this.transformInv_(zr);this.addQuad_(L,Z,Ir,zr,Ue,Xe,Br,ri,Ht-1),this.addQuad_(zr,Ir,fe,_e,ri,Br,lt,bt,Ht-1)}else{const Ir=[(L[0]+Z[0])/2,(L[1]+Z[1])/2],Br=this.transformInv_(Ir),zr=[(fe[0]+_e[0])/2,(fe[1]+_e[1])/2],ri=this.transformInv_(zr);this.addQuad_(L,Ir,zr,_e,Ue,Br,ri,bt,Ht-1),this.addQuad_(Ir,Z,fe,zr,Br,Xe,lt,ri,Ht-1)}return}}if(tr){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}11&Tr||this.addTriangle_(L,fe,_e,Ue,lt,bt),14&Tr||this.addTriangle_(L,fe,Z,Ue,lt,Xe),Tr&&(13&Tr||this.addTriangle_(Z,_e,L,Xe,bt,Ue),7&Tr||this.addTriangle_(Z,_e,fe,Xe,bt,lt))}calculateSourceExtent(){const L=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(Z,fe,_e){const Ue=Z.source;cn(L,Ue[0]),cn(L,Ue[1]),cn(L,Ue[2])}),L}getTriangles(){return this.triangles_}};let We;const rt=[];function gt(re,L,Z,fe,_e){re.beginPath(),re.moveTo(0,0),re.lineTo(L,Z),re.lineTo(fe,_e),re.closePath(),re.save(),re.clip(),re.fillRect(0,0,Math.max(L,fe)+1,Math.max(Z,_e)),re.restore()}function Mt(re,L){return Math.abs(re[4*L]-210)>2||Math.abs(re[4*L+3]-191.25)>2}function Gt(re,L,Z,fe){const _e=Lo(Z,L,re);let Ue=Na(L,fe,Z);const Xe=L.getMetersPerUnit();void 0!==Xe&&(Ue*=Xe);const lt=re.getMetersPerUnit();void 0!==lt&&(Ue/=lt);const bt=re.getExtent();if(!bt||Lt(bt,_e)){const Ht=Na(re,Ue,_e)/Ue;isFinite(Ht)&&Ht>0&&(Ue/=Ht)}return Ue}const xn=class mn extends ro{constructor(L,Z,fe,_e,Ue,Xe,lt,bt,Ht,Wt,pn,On){super(Ue,0,On),this.renderEdges_=void 0!==pn&&pn,this.pixelRatio_=lt,this.gutter_=bt,this.canvas_=null,this.sourceTileGrid_=Z,this.targetTileGrid_=_e,this.wrappedTileCoord_=Xe||Ue,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=L.canWrapX()?L.getExtent():void 0;const tr=_e.getTileCoordExtent(this.wrappedTileCoord_),ar=this.targetTileGrid_.getExtent();let Tr=this.sourceTileGrid_.getExtent();const Ir=ar?ln(tr,ar):tr;if(0===Nn(Ir))return void(this.state=4);const Br=L.getExtent();Br&&(Tr=Tr?ln(Tr,Br):Br);const zr=_e.getResolution(this.wrappedTileCoord_[0]),ri=function $t(re,L,Z,fe){const _e=Jn(Z);let Ue=Gt(re,L,_e,fe);return(!isFinite(Ue)||Ue<=0)&&Pn(Z,function(Xe){return Ue=Gt(re,L,Xe,fe),isFinite(Ue)&&Ue>0}),Ue}(L,fe,Ir,zr);if(!isFinite(ri)||ri<=0)return void(this.state=4);if(this.triangulation_=new ze(L,fe,Ir,Tr,ri*(void 0!==Wt?Wt:.5),zr),0===this.triangulation_.getTriangles().length)return void(this.state=4);this.sourceZ_=Z.getZForResolution(ri);let Xr=this.triangulation_.calculateSourceExtent();if(Tr&&(L.canWrapX()?(Xr[1]=ce(Xr[1],Tr[1],Tr[3]),Xr[3]=ce(Xr[3],Tr[1],Tr[3])):Xr=ln(Xr,Tr)),Nn(Xr)){let Ci=0,yi=0;L.canWrapX()&&(Ci=Wn(Br),yi=Math.floor((Xr[0]-Br[0])/Ci)),function un(re,L,Z){if(L.canWrapX()){const fe=L.getExtent();if(!isFinite(re[0])||!isFinite(re[2]))return[[fe[0],re[1],fe[2],re[3]]];!function Yt(re,L){const Z=L.getExtent(),fe=Jn(re);if(L.canWrapX()&&(fe[0]<Z[0]||fe[0]>=Z[2])){const _e=Wn(Z),Xe=Math.floor((fe[0]-Z[0])/_e)*_e;re[0]-=Xe,re[2]-=Xe}}(re,L);const _e=Wn(fe);if(Wn(re)>_e&&!Z)return[[fe[0],re[1],fe[2],re[3]]];if(re[0]<fe[0])return[[re[0]+_e,re[1],fe[2],re[3]],[fe[0],re[1],re[2],re[3]]];if(re[2]>fe[2])return[[re[0],re[1],fe[2],re[3]],[fe[0],re[1],re[2]-_e,re[3]]]}return[re]}(Xr.slice(),L,!0).forEach(xi=>{const Eo=Z.getTileRangeForExtentAndZ(xi,this.sourceZ_);for(let $s=Eo.minX;$s<=Eo.maxX;$s++)for(let zs=Eo.minY;zs<=Eo.maxY;zs++){const Qs=Ht(this.sourceZ_,$s,zs,lt);Qs&&this.sourceTiles_.push({tile:Qs,offset:yi*Ci})}++yi}),0===this.sourceTiles_.length&&(this.state=4)}else this.state=4}getImage(){return this.canvas_}reproject_(){const L=[];if(this.sourceTiles_.forEach(Z=>{const fe=Z.tile;if(fe&&2==fe.getState()){const _e=this.sourceTileGrid_.getTileCoordExtent(fe.tileCoord);_e[0]+=Z.offset,_e[2]+=Z.offset;const Ue=this.clipExtent_?.slice();Ue&&(Ue[0]+=Z.offset,Ue[2]+=Z.offset),L.push({extent:_e,clipExtent:Ue,image:fe.getImage()})}}),this.sourceTiles_.length=0,0===L.length)this.state=3;else{const Z=this.wrappedTileCoord_[0],fe=this.targetTileGrid_.getTileSize(Z),_e="number"==typeof fe?fe:fe[0],Ue="number"==typeof fe?fe:fe[1],Xe=this.targetTileGrid_.getResolution(Z),lt=this.sourceTileGrid_.getResolution(this.sourceZ_),bt=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function Zt(re,L,Z,fe,_e,Ue,Xe,lt,bt,Ht,Wt,pn,On,tr){const ar=wr(Math.round(Z*re),Math.round(Z*L),rt);if(pn||(ar.imageSmoothingEnabled=!1),0===bt.length)return ar.canvas;function Tr(Xr){return Math.round(Xr*Z)/Z}ar.scale(Z,Z),ar.globalCompositeOperation="lighter";const Ir=[1/0,1/0,-1/0,-1/0];let Br;bt.forEach(function(Xr,Ci,yi){!function An(re,L){L[0]<re[0]&&(re[0]=L[0]),L[2]>re[2]&&(re[2]=L[2]),L[1]<re[1]&&(re[1]=L[1]),L[3]>re[3]&&(re[3]=L[3])}(Ir,Xr.extent)});const zr=Z/fe,ri=(pn?1:1+Math.pow(2,-24))/zr;if(!On||1!==bt.length||0!==Ht){if(Br=wr(Math.round(Wn(Ir)*zr),Math.round(nr(Ir)*zr),rt),pn||(Br.imageSmoothingEnabled=!1),_e&&tr){const Xr=(_e[0]-Ir[0])*zr,Ci=-(_e[3]-Ir[3])*zr,yi=Wn(_e)*zr,di=nr(_e)*zr;Br.rect(Xr,Ci,yi,di),Br.clip()}bt.forEach(function(Xr,Ci,yi){if(Xr.image.width>0&&Xr.image.height>0){if(Xr.clipExtent){Br.save();const zs=(Xr.clipExtent[0]-Ir[0])*zr,Qs=-(Xr.clipExtent[3]-Ir[3])*zr,mu=Wn(Xr.clipExtent)*zr,Nu=nr(Xr.clipExtent)*zr;Br.rect(pn?zs:Math.round(zs),pn?Qs:Math.round(Qs),pn?mu:Math.round(zs+mu)-Math.round(zs),pn?Nu:Math.round(Qs+Nu)-Math.round(Qs)),Br.clip()}const di=(Xr.extent[0]-Ir[0])*zr,xi=-(Xr.extent[3]-Ir[3])*zr,Eo=Wn(Xr.extent)*zr,$s=nr(Xr.extent)*zr;Br.drawImage(Xr.image,Ht,Ht,Xr.image.width-2*Ht,Xr.image.height-2*Ht,pn?di:Math.round(di),pn?xi:Math.round(xi),pn?Eo:Math.round(di+Eo)-Math.round(di),pn?$s:Math.round(xi+$s)-Math.round(xi)),Xr.clipExtent&&Br.restore()}})}const Jr=Mn(Xe);return lt.getTriangles().forEach(function(Xr,Ci,yi){const di=Xr.source,xi=Xr.target;let Eo=di[0][0],$s=di[0][1],zs=di[1][0],Qs=di[1][1],mu=di[2][0],Nu=di[2][1];const ao=Tr((xi[0][0]-Jr[0])/Ue),ju=Tr(-(xi[0][1]-Jr[1])/Ue),Zl=Tr((xi[1][0]-Jr[0])/Ue),Qu=Tr(-(xi[1][1]-Jr[1])/Ue),Cl=Tr((xi[2][0]-Jr[0])/Ue),vu=Tr(-(xi[2][1]-Jr[1])/Ue),Fs=Eo,Bs=$s;Eo=0,$s=0,zs-=Fs,Qs-=Bs,mu-=Fs,Nu-=Bs;const Uu=function we(re){const L=re.length;for(let fe=0;fe<L;fe++){let _e=fe,Ue=Math.abs(re[fe][fe]);for(let lt=fe+1;lt<L;lt++){const bt=Math.abs(re[lt][fe]);bt>Ue&&(Ue=bt,_e=lt)}if(0===Ue)return null;const Xe=re[_e];re[_e]=re[fe],re[fe]=Xe;for(let lt=fe+1;lt<L;lt++){const bt=-re[lt][fe]/re[fe][fe];for(let Ht=fe;Ht<L+1;Ht++)fe==Ht?re[lt][Ht]=0:re[lt][Ht]+=bt*re[fe][Ht]}}const Z=new Array(L);for(let fe=L-1;fe>=0;fe--){Z[fe]=re[fe][L]/re[fe][fe];for(let _e=fe-1;_e>=0;_e--)re[_e][L]-=re[_e][fe]*Z[fe]}return Z}([[zs,Qs,0,0,Zl-ao],[mu,Nu,0,0,Cl-ao],[0,0,zs,Qs,Qu-ju],[0,0,mu,Nu,vu-ju]]);if(!Uu)return;if(ar.save(),ar.beginPath(),function Ct(){if(void 0===We){const re=wr(6,6,rt);re.globalCompositeOperation="lighter",re.fillStyle="rgba(210, 0, 0, 0.75)",gt(re,4,5,4,0),gt(re,4,5,0,5);const L=re.getImageData(0,0,3,3).data;We=Mt(L,0)||Mt(L,4)||Mt(L,8),Dr(re),rt.push(re.canvas)}return We}()||!pn){ar.moveTo(Zl,Qu);const el=4,vc=ao-Zl,Wh=ju-Qu;for(let xu=0;xu<el;xu++)ar.lineTo(Zl+Tr((xu+1)*vc/el),Qu+Tr(xu*Wh/(el-1))),xu!=el-1&&ar.lineTo(Zl+Tr((xu+1)*vc/el),Qu+Tr((xu+1)*Wh/(el-1)));ar.lineTo(Cl,vu)}else ar.moveTo(Zl,Qu),ar.lineTo(ao,ju),ar.lineTo(Cl,vu);let yu;if(ar.clip(),ar.transform(Uu[0],Uu[2],Uu[1],Uu[3],ao,ju),ar.translate(Ir[0]-Fs,Ir[3]-Bs),Br)yu=Br.canvas,ar.scale(ri,-ri);else{const el=bt[0],vc=el.extent;yu=el.image,ar.scale(Wn(vc)/yu.width,-nr(vc)/yu.height)}ar.drawImage(yu,0,0),ar.restore()}),Br&&(Dr(Br),rt.push(Br.canvas)),Wt&&(ar.save(),ar.globalCompositeOperation="source-over",ar.strokeStyle="black",ar.lineWidth=1,lt.getTriangles().forEach(function(Xr,Ci,yi){const di=Xr.target,xi=(di[0][0]-Jr[0])/Ue,Eo=-(di[0][1]-Jr[1])/Ue,$s=(di[1][0]-Jr[0])/Ue,zs=-(di[1][1]-Jr[1])/Ue,Qs=(di[2][0]-Jr[0])/Ue,mu=-(di[2][1]-Jr[1])/Ue;ar.beginPath(),ar.moveTo($s,zs),ar.lineTo(xi,Eo),ar.lineTo(Qs,mu),ar.closePath(),ar.stroke()}),ar.restore()),ar.canvas}(_e,Ue,this.pixelRatio_,lt,this.sourceTileGrid_.getExtent(),Xe,bt,this.triangulation_,L,this.gutter_,this.renderEdges_,this.interpolate),this.state=2}this.changed()}load(){if(0==this.state){this.state=1,this.changed();let L=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:Z})=>{const fe=Z.getState();if(0==fe||1==fe){L++;const _e=w(Z,"change",function(Ue){const Xe=Z.getState();(2==Xe||3==Xe||4==Xe)&&(P(_e),L--,0===L&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(_e)}}),0===L?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:Z},fe,_e){0==Z.getState()&&Z.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(P),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Dr(this.canvas_.getContext("2d")),rt.push(this.canvas_),this.canvas_=null),super.release()}};class Rn{constructor(L,Z,fe,_e){this.minX=L,this.maxX=Z,this.minY=fe,this.maxY=_e}contains(L){return this.containsXY(L[1],L[2])}containsTileRange(L){return this.minX<=L.minX&&L.maxX<=this.maxX&&this.minY<=L.minY&&L.maxY<=this.maxY}containsXY(L,Z){return this.minX<=L&&L<=this.maxX&&this.minY<=Z&&Z<=this.maxY}equals(L){return this.minX==L.minX&&this.minY==L.minY&&this.maxX==L.maxX&&this.maxY==L.maxY}extend(L){L.minX<this.minX&&(this.minX=L.minX),L.maxX>this.maxX&&(this.maxX=L.maxX),L.minY<this.minY&&(this.minY=L.minY),L.maxY>this.maxY&&(this.maxY=L.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(L){return this.minX<=L.maxX&&this.maxX>=L.minX&&this.minY<=L.maxY&&this.maxY>=L.minY}}function In(re,L,Z,fe,_e){return void 0!==_e?(_e.minX=re,_e.maxX=L,_e.minY=Z,_e.maxY=fe,_e):new Rn(re,L,Z,fe)}const Yn=Rn,ir=class Kn extends qd{constructor(L){super(L),this.extentChanged=!0,this.renderedExtent_=null,this.renderedProjection=null,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=[1/0,1/0,-1/0,-1/0],this.tmpTileRange_=new Yn(0,0,0,0)}isDrawableTile(L){const Z=this.getLayer(),fe=L.getState(),_e=Z.getUseInterimTilesOnError();return 2==fe||4==fe||3==fe&&!_e}getTile(L,Z,fe,_e){const Ue=_e.pixelRatio,Xe=_e.viewState.projection,lt=this.getLayer();let Ht=lt.getSource().getTile(L,Z,fe,Ue,Xe);return 3==Ht.getState()&&lt.getUseInterimTilesOnError()&&lt.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(Ht)||(Ht=Ht.getInterimTile()),Ht}getData(L){const Z=this.frameState;if(!Z)return null;const fe=this.getLayer(),_e=Ea(Z.pixelToCoordinateTransform,L.slice()),Ue=fe.getExtent();if(Ue&&!Lt(Ue,_e))return null;const Xe=Z.pixelRatio,lt=Z.viewState.projection,bt=Z.viewState,Ht=fe.getRenderSource(),Wt=Ht.getTileGridForProjection(bt.projection),pn=Ht.getTilePixelRatio(Z.pixelRatio);for(let On=Wt.getZForResolution(bt.resolution);On>=Wt.getMinZoom();--On){const tr=Wt.getTileCoordForCoordAndZ(_e,On),ar=Ht.getTile(On,tr[1],tr[2],Xe,lt);if(!(ar instanceof A||ar instanceof xn)||ar instanceof xn&&4===ar.getState())return null;if(2!==ar.getState())continue;const Tr=Wt.getOrigin(On),Ir=hi(Wt.getTileSize(On)),Br=Wt.getResolution(On),zr=Math.floor(pn*((_e[0]-Tr[0])/Br-tr[1]*Ir[0])),ri=Math.floor(pn*((Tr[1]-_e[1])/Br-tr[2]*Ir[1])),Jr=Math.round(pn*Ht.getGutterForProjection(bt.projection));return this.getImageData(ar.getImage(),zr+Jr,ri+Jr)}return null}loadedTileCallback(L,Z,fe){return!!this.isDrawableTile(fe)&&super.loadedTileCallback(L,Z,fe)}prepareFrame(L){return!!this.getLayer().getSource()}renderFrame(L,Z){const fe=L.layerStatesArray[L.layerIndex],_e=L.viewState,Ue=_e.projection,Xe=_e.resolution,lt=_e.center,bt=_e.rotation,Ht=L.pixelRatio,Wt=this.getLayer(),pn=Wt.getSource(),On=pn.getRevision(),tr=pn.getTileGridForProjection(Ue),ar=tr.getZForResolution(Xe,pn.zDirection),Tr=tr.getResolution(ar);let Ir=L.extent;const Br=L.viewState.resolution,zr=pn.getTilePixelRatio(Ht);this.prepareContainer(L,Z);const ri=this.context.canvas.width,Jr=this.context.canvas.height,Xr=fe.extent&&Io(fe.extent);Xr&&(Ir=ln(Ir,Io(fe.extent)));const Ci=Tr*ri/2/zr,yi=Tr*Jr/2/zr,di=[lt[0]-Ci,lt[1]-yi,lt[0]+Ci,lt[1]+yi],xi=tr.getTileRangeForExtentAndZ(Ir,ar),Eo={};Eo[ar]={};const $s=this.createLoadedTileFinder(pn,Ue,Eo),zs=this.tmpExtent,Qs=this.tmpTileRange_;this.newTiles_=!1;const mu=bt?dr(_e.center,Br,bt,L.size):void 0;for(let vu=xi.minX;vu<=xi.maxX;++vu)for(let Fs=xi.minY;Fs<=xi.maxY;++Fs){if(bt&&!tr.tileCoordIntersectsViewport([ar,vu,Fs],mu))continue;const Bs=this.getTile(ar,vu,Fs,L);if(this.isDrawableTile(Bs)){const yu=j(this);if(2==Bs.getState()){Eo[ar][Bs.tileCoord.toString()]=Bs;let el=Bs.inTransition(yu);el&&1!==fe.opacity&&(Bs.endTransition(yu),el=!1),!this.newTiles_&&(el||!this.renderedTiles.includes(Bs))&&(this.newTiles_=!0)}if(1===Bs.getAlpha(yu,L.time))continue}const qh=tr.getTileCoordChildTileRange(Bs.tileCoord,Qs,zs);let Uu=!1;qh&&(Uu=$s(ar+1,qh)),Uu||tr.forEachTileCoordParentTileRange(Bs.tileCoord,$s,Qs,zs)}const Nu=Tr/Xe*Ht/zr,ao=this.getRenderContext(L);ws(this.tempTransform,ri/2,Jr/2,Nu,Nu,0,-ri/2,-Jr/2),Xr&&this.clipUnrotated(ao,L,Xr),pn.getInterpolate()||(ao.imageSmoothingEnabled=!1),this.preRender(ao,L),this.renderedTiles.length=0;let Zl,Qu,Cl,ju=Object.keys(Eo).map(Number);ju.sort(l),1!==fe.opacity||this.containerReused&&!pn.getOpaque(L.viewState.projection)?(Zl=[],Qu=[]):ju=ju.reverse();for(let vu=ju.length-1;vu>=0;--vu){const Fs=ju[vu],Bs=pn.getTilePixelSize(Fs,Ht,Ue),Uu=tr.getResolution(Fs)/Tr,yu=Bs[0]*Uu*Nu,el=Bs[1]*Uu*Nu,vc=tr.getTileCoordForCoordAndZ(Mn(di),Fs),Wh=tr.getTileCoordExtent(vc),xu=Ea(this.tempTransform,[zr*(Wh[0]-di[0])/Tr,zr*(di[3]-Wh[3])/Tr]),z0=zr*pn.getGutterForProjection(Ue),E0=Eo[Fs];for(const F0 in E0){const oh=E0[F0],C0=oh.tileCoord,L0=vc[1]-C0[1],B0=Math.round(xu[0]-(L0-1)*yu),I0=vc[2]-C0[2],N0=Math.round(xu[1]-(I0-1)*el),yc=Math.round(xu[0]-L0*yu),xc=Math.round(xu[1]-I0*el),Yh=B0-yc,Zh=N0-xc,P0=ar===Fs,O0=P0&&1!==oh.getAlpha(j(this),L.time);let _0=!1;if(!O0)if(Zl){Cl=[yc,xc,yc+Yh,xc,yc+Yh,xc+Zh,yc,xc+Zh];for(let dp=0,j0=Zl.length;dp<j0;++dp)if(ar!==Fs&&Fs<Qu[dp]){const bu=Zl[dp];$n([yc,xc,yc+Yh,xc+Zh],[bu[0],bu[3],bu[4],bu[7]])&&(_0||(ao.save(),_0=!0),ao.beginPath(),ao.moveTo(Cl[0],Cl[1]),ao.lineTo(Cl[2],Cl[3]),ao.lineTo(Cl[4],Cl[5]),ao.lineTo(Cl[6],Cl[7]),ao.moveTo(bu[6],bu[7]),ao.lineTo(bu[4],bu[5]),ao.lineTo(bu[2],bu[3]),ao.lineTo(bu[0],bu[1]),ao.clip())}Zl.push(Cl),Qu.push(Fs)}else ao.clearRect(yc,xc,Yh,Zh);this.drawTileImage(oh,L,yc,xc,Yh,Zh,z0,P0),Zl&&!O0?(_0&&ao.restore(),this.renderedTiles.unshift(oh)):this.renderedTiles.push(oh),this.updateUsedTiles(L.usedTiles,pn,oh)}}return this.renderedRevision=On,this.renderedResolution=Tr,this.extentChanged=!this.renderedExtent_||!Gn(this.renderedExtent_,di),this.renderedExtent_=di,this.renderedPixelRatio=Ht,this.renderedProjection=Ue,this.manageTilePyramid(L,pn,tr,Ht,Ue,Ir,ar,Wt.getPreload()),this.scheduleExpireCache(L,pn),this.postRender(this.context,L),fe.extent&&ao.restore(),ao.imageSmoothingEnabled=!0,this.container}drawTileImage(L,Z,fe,_e,Ue,Xe,lt,bt){const Ht=this.getTileImage(L);if(!Ht)return;const Wt=this.getRenderContext(Z),pn=j(this),On=Z.layerStatesArray[Z.layerIndex],tr=On.opacity*(bt?L.getAlpha(pn,Z.time):1),ar=tr!==Wt.globalAlpha;ar&&(Wt.save(),Wt.globalAlpha=tr),Wt.drawImage(Ht,lt,lt,Ht.width-2*lt,Ht.height-2*lt,fe,_e,Ue,Xe),ar&&Wt.restore(),tr!==On.opacity?Z.animate=!0:bt&&L.endTransition(pn)}getImage(){const L=this.context;return L?L.canvas:null}getTileImage(L){return L.getImage()}scheduleExpireCache(L,Z){if(Z.canExpireCache()){const fe=function(_e,Ue,Xe){const lt=j(_e);lt in Xe.usedTiles&&_e.expireCache(Xe.viewState.projection,Xe.usedTiles[lt])}.bind(null,Z);L.postRenderFunctions.push(fe)}}updateUsedTiles(L,Z,fe){const _e=j(Z);_e in L||(L[_e]={}),L[_e][fe.getKey()]=!0}manageTilePyramid(L,Z,fe,_e,Ue,Xe,lt,bt,Ht){const Wt=j(Z);Wt in L.wantedTiles||(L.wantedTiles[Wt]={});const pn=L.wantedTiles[Wt],On=L.tileQueue,tr=fe.getMinZoom(),ar=L.viewState.rotation,Tr=ar?dr(L.viewState.center,L.viewState.resolution,ar,L.size):void 0;let Br,zr,ri,Jr,Xr,Ci,Ir=0;for(Ci=tr;Ci<=lt;++Ci)for(zr=fe.getTileRangeForExtentAndZ(Xe,Ci,zr),ri=fe.getResolution(Ci),Jr=zr.minX;Jr<=zr.maxX;++Jr)for(Xr=zr.minY;Xr<=zr.maxY;++Xr)ar&&!fe.tileCoordIntersectsViewport([Ci,Jr,Xr],Tr)||(lt-Ci<=bt?(++Ir,Br=Z.getTile(Ci,Jr,Xr,_e,Ue),0==Br.getState()&&(pn[Br.getKey()]=!0,On.isKeyQueued(Br.getKey())||On.enqueue([Br,Wt,fe.getTileCoordCenter(Br.tileCoord),ri])),void 0!==Ht&&Ht(Br)):Z.useTile(Ci,Jr,Xr,Ue));Z.updateCacheSize(Ir,Ue)}},yr=class ur extends Ja{constructor(L){super(L)}createRenderer(){return new ir(this)}},Er=class Rr{constructor(L){this.highWaterMark=void 0!==L?L:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(L){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(L){return this.entries_.hasOwnProperty(L)}forEach(L){let Z=this.oldest_;for(;Z;)L(Z.value_,Z.key_,this),Z=Z.newer}get(L,Z){const fe=this.entries_[L];return ae(void 0!==fe,"Tried to get a value for a key that does not exist in the cache"),fe===this.newest_||(fe===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(fe.newer.older=fe.older,fe.older.newer=fe.newer),fe.newer=null,fe.older=this.newest_,this.newest_.newer=fe,this.newest_=fe),fe.value_}remove(L){const Z=this.entries_[L];return ae(void 0!==Z,"Tried to get a value for a key that does not exist in the cache"),Z===this.newest_?(this.newest_=Z.older,this.newest_&&(this.newest_.newer=null)):Z===this.oldest_?(this.oldest_=Z.newer,this.oldest_&&(this.oldest_.older=null)):(Z.newer.older=Z.older,Z.older.newer=Z.newer),delete this.entries_[L],--this.count_,Z.value_}getCount(){return this.count_}getKeys(){const L=new Array(this.count_);let fe,Z=0;for(fe=this.newest_;fe;fe=fe.older)L[Z++]=fe.key_;return L}getValues(){const L=new Array(this.count_);let fe,Z=0;for(fe=this.newest_;fe;fe=fe.older)L[Z++]=fe.value_;return L}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(L){return this.entries_[L]?.value_}pop(){const L=this.oldest_;return delete this.entries_[L.key_],L.newer&&(L.newer.older=null),this.oldest_=L.newer,this.oldest_||(this.newest_=null),--this.count_,L.value_}replace(L,Z){this.get(L),this.entries_[L].value_=Z}set(L,Z){ae(!(L in this.entries_),"Tried to set a value for a key that is used already");const fe={key_:L,newer:null,older:this.newest_,value_:Z};this.newest_?this.newest_.newer=fe:this.oldest_=fe,this.newest_=fe,this.entries_[L]=fe,++this.count_}setSize(L){this.highWaterMark=L}};function Nr(re,L,Z,fe){return void 0!==fe?(fe[0]=re,fe[1]=L,fe[2]=Z,fe):[re,L,Z]}function Ur(re,L,Z){return re+"/"+L+"/"+Z}function ai(re){return Ur(re[0],re[1],re[2])}const ci=class Ei extends Er{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(L){for(;this.canExpireCache()&&!(this.peekLast().getKey()in L);)this.pop().release()}pruneExceptNewestZ(){if(0===this.getCount())return;const fe=function oi(re){return re.split("/").map(Number)}(this.peekFirstKey())[0];this.forEach(_e=>{_e.tileCoord[0]!==fe&&(this.remove(ai(_e.tileCoord)),_e.release())})}};function Xi(re){return re?Array.isArray(re)?function(L){return re}:"function"==typeof re?re:function(L){return[re]}:null}const fa=class ni extends q{constructor(L){super(),this.projection=ma(L.projection),this.attributions_=Xi(L.attributions),this.attributionsCollapsible_=void 0===L.attributionsCollapsible||L.attributionsCollapsible,this.loading=!1,this.state_=void 0!==L.state?L.state:"ready",this.wrapX_=void 0!==L.wrapX&&L.wrapX,this.interpolate_=!!L.interpolate,this.viewResolver=null,this.viewRejector=null;const Z=this;this.viewPromise_=new Promise(function(fe,_e){Z.viewResolver=fe,Z.viewRejector=_e})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(L){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(L){this.attributions_=Xi(L),this.changed()}setState(L){this.state_=L,this.changed()}},Ki=[0,0,0],Va=class sa{constructor(L){let Z;if(this.minZoom=void 0!==L.minZoom?L.minZoom:0,this.resolutions_=L.resolutions,ae(function f(re,L,Z){const fe=L||l;return re.every(function(_e,Ue){if(0===Ue)return!0;const Xe=fe(re[Ue-1],_e);return!(Xe>0||Z&&0===Xe)})}(this.resolutions_,(_e,Ue)=>Ue-_e,!0),"`resolutions` must be sorted in descending order"),!L.origins)for(let _e=0,Ue=this.resolutions_.length-1;_e<Ue;++_e)if(Z){if(this.resolutions_[_e]/this.resolutions_[_e+1]!==Z){Z=void 0;break}}else Z=this.resolutions_[_e]/this.resolutions_[_e+1];this.zoomFactor_=Z,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==L.origin?L.origin:null,this.origins_=null,void 0!==L.origins&&(this.origins_=L.origins,ae(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const fe=L.extent;void 0!==fe&&!this.origin_&&!this.origins_&&(this.origin_=Mn(fe)),ae(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,void 0!==L.tileSizes&&(this.tileSizes_=L.tileSizes,ae(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=void 0!==L.tileSize?L.tileSize:this.tileSizes_?null:Fe,ae(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=void 0!==fe?fe:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==L.sizes?this.fullTileRanges_=L.sizes.map((_e,Ue)=>{const Xe=new Yn(Math.min(0,_e[0]),Math.max(_e[0]-1,-1),Math.min(0,_e[1]),Math.max(_e[1]-1,-1));if(fe){const lt=this.getTileRangeForExtentAndZ(fe,Ue);Xe.minX=Math.max(lt.minX,Xe.minX),Xe.maxX=Math.min(lt.maxX,Xe.maxX),Xe.minY=Math.max(lt.minY,Xe.minY),Xe.maxY=Math.min(lt.maxY,Xe.maxY)}return Xe}):fe&&this.calculateTileRanges_(fe)}forEachTileCoord(L,Z,fe){const _e=this.getTileRangeForExtentAndZ(L,Z);for(let Ue=_e.minX,Xe=_e.maxX;Ue<=Xe;++Ue)for(let lt=_e.minY,bt=_e.maxY;lt<=bt;++lt)fe([Z,Ue,lt])}forEachTileCoordParentTileRange(L,Z,fe,_e){let Ue,Xe,lt,bt=null,Ht=L[0]-1;for(2===this.zoomFactor_?(Xe=L[1],lt=L[2]):bt=this.getTileCoordExtent(L,_e);Ht>=this.minZoom;){if(void 0!==Xe&&void 0!==lt?(Xe=Math.floor(Xe/2),lt=Math.floor(lt/2),Ue=In(Xe,Xe,lt,lt,fe)):Ue=this.getTileRangeForExtentAndZ(bt,Ht,fe),Z(Ht,Ue))return!0;--Ht}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(L){return this.origin_?this.origin_:this.origins_[L]}getResolution(L){return this.resolutions_[L]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(L,Z,fe){if(L[0]<this.maxZoom){if(2===this.zoomFactor_){const Ue=2*L[1],Xe=2*L[2];return In(Ue,Ue+1,Xe,Xe+1,Z)}const _e=this.getTileCoordExtent(L,fe||this.tmpExtent_);return this.getTileRangeForExtentAndZ(_e,L[0]+1,Z)}return null}getTileRangeForTileCoordAndZ(L,Z,fe){if(Z>this.maxZoom||Z<this.minZoom)return null;const _e=L[0],Ue=L[1],Xe=L[2];if(Z===_e)return In(Ue,Xe,Ue,Xe,fe);if(this.zoomFactor_){const bt=Math.pow(this.zoomFactor_,Z-_e),Ht=Math.floor(Ue*bt),Wt=Math.floor(Xe*bt);return Z<_e?In(Ht,Ht,Wt,Wt,fe):In(Ht,Math.floor(bt*(Ue+1))-1,Wt,Math.floor(bt*(Xe+1))-1,fe)}const lt=this.getTileCoordExtent(L,this.tmpExtent_);return this.getTileRangeForExtentAndZ(lt,Z,fe)}getTileRangeForExtentAndZ(L,Z,fe){this.getTileCoordForXYAndZ_(L[0],L[3],Z,!1,Ki);const _e=Ki[1],Ue=Ki[2];return this.getTileCoordForXYAndZ_(L[2],L[1],Z,!0,Ki),In(_e,Ki[1],Ue,Ki[2],fe)}getTileCoordCenter(L){const Z=this.getOrigin(L[0]),fe=this.getResolution(L[0]),_e=hi(this.getTileSize(L[0]),this.tmpSize_);return[Z[0]+(L[1]+.5)*_e[0]*fe,Z[1]-(L[2]+.5)*_e[1]*fe]}getTileCoordExtent(L,Z){const fe=this.getOrigin(L[0]),_e=this.getResolution(L[0]),Ue=hi(this.getTileSize(L[0]),this.tmpSize_),Xe=fe[0]+L[1]*Ue[0]*_e,lt=fe[1]-(L[2]+1)*Ue[1]*_e;return Vt(Xe,lt,Xe+Ue[0]*_e,lt+Ue[1]*_e,Z)}getTileCoordForCoordAndResolution(L,Z,fe){return this.getTileCoordForXYAndResolution_(L[0],L[1],Z,!1,fe)}getTileCoordForXYAndResolution_(L,Z,fe,_e,Ue){const Xe=this.getZForResolution(fe),lt=fe/this.getResolution(Xe),bt=this.getOrigin(Xe),Ht=hi(this.getTileSize(Xe),this.tmpSize_);let Wt=lt*(L-bt[0])/fe/Ht[0],pn=lt*(bt[1]-Z)/fe/Ht[1];return _e?(Wt=ue(Wt,5)-1,pn=ue(pn,5)-1):(Wt=be(Wt,5),pn=be(pn,5)),Nr(Xe,Wt,pn,Ue)}getTileCoordForXYAndZ_(L,Z,fe,_e,Ue){const Xe=this.getOrigin(fe),lt=this.getResolution(fe),bt=hi(this.getTileSize(fe),this.tmpSize_);let Ht=(L-Xe[0])/lt/bt[0],Wt=(Xe[1]-Z)/lt/bt[1];return _e?(Ht=ue(Ht,5)-1,Wt=ue(Wt,5)-1):(Ht=be(Ht,5),Wt=be(Wt,5)),Nr(fe,Ht,Wt,Ue)}getTileCoordForCoordAndZ(L,Z,fe){return this.getTileCoordForXYAndZ_(L[0],L[1],Z,!1,fe)}getTileCoordResolution(L){return this.resolutions_[L[0]]}getTileSize(L){return this.tileSize_?this.tileSize_:this.tileSizes_[L]}getFullTileRange(L){return this.fullTileRanges_?this.fullTileRanges_[L]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,L):null}getZForResolution(L,Z){return ce(i(this.resolutions_,L,Z||0),this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(L,Z){return Ya(Z,0,Z.length,2,this.getTileCoordExtent(L))}calculateTileRanges_(L){const Z=this.resolutions_.length,fe=new Array(Z);for(let _e=this.minZoom;_e<Z;++_e)fe[_e]=this.getTileRangeForExtentAndZ(L,_e);this.fullTileRanges_=fe}};function ba(re){let L=re.getDefaultTileGrid();return L||(L=function go(re,L,Z,fe){return function So(re,L,Z,fe){fe=void 0!==fe?fe:"top-left";const _e=Vo(re,L,Z);return new Va({extent:re,origin:Zn(re,fe),resolutions:_e,tileSize:Z})}(Ga(re),L,Z,fe)}(re),re.setDefaultTileGrid(L)),L}function Vo(re,L,Z,fe){L=void 0!==L?L:Pe,Z=hi(void 0!==Z?Z:Fe);const _e=nr(re),Ue=Wn(re);fe=fe>0?fe:Math.max(Ue/Z[0],_e/Z[1]);const Xe=L+1,lt=new Array(Xe);for(let bt=0;bt<Xe;++bt)lt[bt]=fe/Math.pow(2,bt);return lt}function Ga(re){let L=(re=ma(re)).getExtent();if(!L){const Z=180*Me.degrees/re.getMetersPerUnit();L=Vt(-Z,-Z,Z,Z)}return L}class uo extends k{constructor(L,Z){super(L),this.tile=Z}}const io=class mo extends fa{constructor(L){super({attributions:L.attributions,attributionsCollapsible:L.attributionsCollapsible,projection:L.projection,state:L.state,wrapX:L.wrapX,interpolate:L.interpolate}),this.opaque_=void 0!==L.opaque&&L.opaque,this.tilePixelRatio_=void 0!==L.tilePixelRatio?L.tilePixelRatio:1,this.tileGrid=void 0!==L.tileGrid?L.tileGrid:null,this.tileGrid&&hi(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tileCache=new ci(L.cacheSize||0),this.tmpSize=[0,0],this.key_=L.key||"",this.tileOptions={transition:L.transition,interpolate:L.interpolate},this.zDirection=L.zDirection?L.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(L,Z){const fe=this.getTileCacheForProjection(L);fe&&fe.expireCache(Z)}forEachLoadedTile(L,Z,fe,_e){const Ue=this.getTileCacheForProjection(L);if(!Ue)return!1;let lt,bt,Ht,Xe=!0;for(let Wt=fe.minX;Wt<=fe.maxX;++Wt)for(let pn=fe.minY;pn<=fe.maxY;++pn)bt=Ur(Z,Wt,pn),Ht=!1,Ue.containsKey(bt)&&(lt=Ue.get(bt),Ht=2===lt.getState(),Ht&&(Ht=!1!==_e(lt))),Ht||(Xe=!1);return Xe}getGutterForProjection(L){return 0}getKey(){return this.key_}setKey(L){this.key_!==L&&(this.key_=L,this.changed())}getOpaque(L){return this.opaque_}getResolutions(L){const Z=L?this.getTileGridForProjection(L):this.tileGrid;return Z?Z.getResolutions():null}getTile(L,Z,fe,_e,Ue){return U()}getTileGrid(){return this.tileGrid}getTileGridForProjection(L){return this.tileGrid?this.tileGrid:ba(L)}getTileCacheForProjection(L){const Z=this.getProjection();return ae(null===Z||fo(Z,L),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(L){return this.tilePixelRatio_}getTilePixelSize(L,Z,fe){const _e=this.getTileGridForProjection(fe),Ue=this.getTilePixelRatio(Z),Xe=hi(_e.getTileSize(L),this.tmpSize);return 1==Ue?Xe:function ko(re,L,Z){return void 0===Z&&(Z=[0,0]),Z[0]=re[0]*L+.5|0,Z[1]=re[1]*L+.5|0,Z}(Xe,Ue,this.tmpSize)}getTileCoordForTileUrlFunction(L,Z){Z=void 0!==Z?Z:this.getProjection();const fe=this.getTileGridForProjection(Z);return this.getWrapX()&&Z.isGlobal()&&(L=function lo(re,L,Z){const fe=L[0],_e=re.getTileCoordCenter(L),Ue=Ga(Z);if(!Lt(Ue,_e)){const Xe=Wn(Ue),lt=Math.ceil((Ue[0]-_e[0])/Xe);return _e[0]+=Xe*lt,re.getTileCoordForCoordAndZ(_e,fe)}return L}(fe,L,Z)),function Zr(re,L){const Z=re[0],fe=re[1],_e=re[2];if(L.getMinZoom()>Z||Z>L.getMaxZoom())return!1;const Ue=L.getFullTileRange(Z);return!Ue||Ue.containsXY(fe,_e)}(L,fe)?L:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(L,Z){const fe=this.getTileCacheForProjection(Z);L>fe.highWaterMark&&(fe.highWaterMark=L)}useTile(L,Z,fe,_e){}};function gi(re,L){const Z=/\{z\}/g,fe=/\{x\}/g,_e=/\{y\}/g,Ue=/\{-y\}/g;return function(Xe,lt,bt){if(Xe)return re.replace(Z,Xe[0].toString()).replace(fe,Xe[1].toString()).replace(_e,Xe[2].toString()).replace(Ue,function(){const Wt=L.getFullTileRange(Xe[0]);if(!Wt)throw new Error("The {-y} placeholder requires a tile grid with extent");return(Wt.getHeight()-Xe[2]-1).toString()})}}class ha extends io{constructor(L){super({attributions:L.attributions,cacheSize:L.cacheSize,opaque:L.opaque,projection:L.projection,state:L.state,tileGrid:L.tileGrid,tilePixelRatio:L.tilePixelRatio,wrapX:L.wrapX,transition:L.transition,interpolate:L.interpolate,key:L.key,attributionsCollapsible:L.attributionsCollapsible,zDirection:L.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===ha.prototype.tileUrlFunction,this.tileLoadFunction=L.tileLoadFunction,L.tileUrlFunction&&(this.tileUrlFunction=L.tileUrlFunction),this.urls=null,L.urls?this.setUrls(L.urls):L.url&&this.setUrl(L.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(L){const Z=L.target,fe=j(Z),_e=Z.getState();let Ue;1==_e?(this.tileLoadingKeys_[fe]=!0,Ue="tileloadstart"):fe in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[fe],Ue=3==_e?"tileloaderror":2==_e?"tileloadend":void 0),null!=Ue&&this.dispatchEvent(new uo(Ue,Z))}setTileLoadFunction(L){this.tileCache.clear(),this.tileLoadFunction=L,this.changed()}setTileUrlFunction(L,Z){this.tileUrlFunction=L,this.tileCache.pruneExceptNewestZ(),typeof Z<"u"?this.setKey(Z):this.changed()}setUrl(L){const Z=function Sa(re){const L=[];let Z=/\{([a-z])-([a-z])\}/.exec(re);if(Z){const fe=Z[1].charCodeAt(0),_e=Z[2].charCodeAt(0);let Ue;for(Ue=fe;Ue<=_e;++Ue)L.push(re.replace(Z[0],String.fromCharCode(Ue)));return L}if(Z=/\{(\d+)-(\d+)\}/.exec(re),Z){const fe=parseInt(Z[2],10);for(let _e=parseInt(Z[1],10);_e<=fe;_e++)L.push(re.replace(Z[0],_e.toString()));return L}return L.push(re),L}(L);this.urls=Z,this.setUrls(Z)}setUrls(L){this.urls=L;const Z=L.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function Oi(re,L){const Z=re.length,fe=new Array(Z);for(let _e=0;_e<Z;++_e)fe[_e]=gi(re[_e],L);return function Ia(re){return 1===re.length?re[0]:function(L,Z,fe){if(!L)return;const _e=function ei(re){return(re[1]<<re[0])+re[2]}(L),Ue=ve(_e,re.length);return re[Ue](L,Z,fe)}}(fe)}(L,this.tileGrid),Z):this.setKey(Z)}tileUrlFunction(L,Z,fe){}useTile(L,Z,fe){const _e=Ur(L,Z,fe);this.tileCache.containsKey(_e)&&this.tileCache.get(_e)}}const Ui=ha;function is(re,L){re.getImage().src=L}const Rs=class Pa extends Ui{constructor(L){super({attributions:L.attributions,cacheSize:L.cacheSize,opaque:L.opaque,projection:L.projection,state:L.state,tileGrid:L.tileGrid,tileLoadFunction:L.tileLoadFunction?L.tileLoadFunction:is,tilePixelRatio:L.tilePixelRatio,tileUrlFunction:L.tileUrlFunction,url:L.url,urls:L.urls,wrapX:L.wrapX,transition:L.transition,interpolate:void 0===L.interpolate||L.interpolate,key:L.key,attributionsCollapsible:L.attributionsCollapsible,zDirection:L.zDirection}),this.crossOrigin=void 0!==L.crossOrigin?L.crossOrigin:null,this.tileClass=void 0!==L.tileClass?L.tileClass:A,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=L.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const L in this.tileCacheForProjection)if(this.tileCacheForProjection[L].canExpireCache())return!0;return!1}expireCache(L,Z){const fe=this.getTileCacheForProjection(L);this.tileCache.expireCache(this.tileCache==fe?Z:{});for(const _e in this.tileCacheForProjection){const Ue=this.tileCacheForProjection[_e];Ue.expireCache(Ue==fe?Z:{})}}getGutterForProjection(L){return this.getProjection()&&L&&!fo(this.getProjection(),L)?0:this.getGutter()}getGutter(){return 0}getKey(){let L=super.getKey();return this.getInterpolate()||(L+=":disable-interpolation"),L}getOpaque(L){return!(this.getProjection()&&L&&!fo(this.getProjection(),L))&&super.getOpaque(L)}getTileGridForProjection(L){const Z=this.getProjection();if(this.tileGrid&&(!Z||fo(Z,L)))return this.tileGrid;const fe=j(L);return fe in this.tileGridForProjection||(this.tileGridForProjection[fe]=ba(L)),this.tileGridForProjection[fe]}getTileCacheForProjection(L){const Z=this.getProjection();if(!Z||fo(Z,L))return this.tileCache;const fe=j(L);return fe in this.tileCacheForProjection||(this.tileCacheForProjection[fe]=new ci(this.tileCache.highWaterMark)),this.tileCacheForProjection[fe]}createTile_(L,Z,fe,_e,Ue,Xe){const lt=[L,Z,fe],bt=this.getTileCoordForTileUrlFunction(lt,Ue),Ht=bt?this.tileUrlFunction(bt,_e,Ue):void 0,Wt=new this.tileClass(lt,void 0!==Ht?0:4,void 0!==Ht?Ht:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return Wt.key=Xe,Wt.addEventListener("change",this.handleTileChange.bind(this)),Wt}getTile(L,Z,fe,_e,Ue){const Xe=this.getProjection();if(!Xe||!Ue||fo(Xe,Ue))return this.getTileInternal(L,Z,fe,_e,Xe||Ue);const lt=this.getTileCacheForProjection(Ue),bt=[L,Z,fe];let Ht;const Wt=ai(bt);lt.containsKey(Wt)&&(Ht=lt.get(Wt));const pn=this.getKey();if(Ht&&Ht.key==pn)return Ht;const On=this.getTileGridForProjection(Xe),tr=this.getTileGridForProjection(Ue),ar=this.getTileCoordForTileUrlFunction(bt,Ue),Tr=new xn(Xe,On,Ue,tr,bt,ar,this.getTilePixelRatio(_e),this.getGutter(),(Ir,Br,zr,ri)=>this.getTileInternal(Ir,Br,zr,ri,Xe),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return Tr.key=pn,Ht?(Tr.interimTile=Ht,Tr.refreshInterimChain(),lt.replace(Wt,Tr)):lt.set(Wt,Tr),Tr}getTileInternal(L,Z,fe,_e,Ue){let Xe=null;const lt=Ur(L,Z,fe),bt=this.getKey();if(this.tileCache.containsKey(lt)){if(Xe=this.tileCache.get(lt),Xe.key!=bt){const Ht=Xe;Xe=this.createTile_(L,Z,fe,_e,Ue,bt),Xe.interimTile=0==Ht.getState()?Ht.interimTile:Ht,Xe.refreshInterimChain(),this.tileCache.replace(lt,Xe)}}else Xe=this.createTile_(L,Z,fe,_e,Ue,bt),this.tileCache.set(lt,Xe);return Xe}setRenderReprojectionEdges(L){if(this.renderReprojectionEdges_!=L){this.renderReprojectionEdges_=L;for(const Z in this.tileCacheForProjection)this.tileCacheForProjection[Z].clear();this.changed()}}setTileGridForProjection(L,Z){const fe=ma(L);if(fe){const _e=j(fe);_e in this.tileGridForProjection||(this.tileGridForProjection[_e]=Z)}}clear(){super.clear();for(const L in this.tileCacheForProjection)this.tileCacheForProjection[L].clear()}},yl=class Go extends Rs{constructor(L){const Z=void 0!==(L=L||{}).projection?L.projection:"EPSG:3857",fe=void 0!==L.tileGrid?L.tileGrid:function po(re){const L=re||{},Z=L.extent||ma("EPSG:3857").getExtent(),fe={extent:Z,minZoom:L.minZoom,tileSize:L.tileSize,resolutions:Vo(Z,L.maxZoom,L.tileSize,L.maxResolution)};return new Va(fe)}({extent:Ga(Z),maxResolution:L.maxResolution,maxZoom:L.maxZoom,minZoom:L.minZoom,tileSize:L.tileSize});super({attributions:L.attributions,cacheSize:L.cacheSize,crossOrigin:L.crossOrigin,interpolate:L.interpolate,opaque:L.opaque,projection:Z,reprojectionErrorThreshold:L.reprojectionErrorThreshold,tileGrid:fe,tileLoadFunction:L.tileLoadFunction,tilePixelRatio:L.tilePixelRatio,tileUrlFunction:L.tileUrlFunction,url:L.url,urls:L.urls,wrapX:void 0===L.wrapX||L.wrapX,transition:L.transition,attributionsCollapsible:L.attributionsCollapsible,zDirection:L.zDirection}),this.gutter_=void 0!==L.gutter?L.gutter:0}getGutter(){return this.gutter_}};var en=da(5849),Ha=da(9862);let xl=(()=>{class re{constructor(Z){this.http=Z,this.baseUrl="https://tiles.lapig.iesa.ufg.br/api/layers/sentinel"}getSentinelLayer(Z,fe,_e,Ue,Xe,lt,bt){let Ht={};return void 0!==lt&&(Ht.latitude=lt),void 0!==bt&&(Ht.longitude=bt),this.http.get(`${this.baseUrl}/${Z}/${fe}/${_e}/${Ue}/${Xe}`,{params:Ht})}static#e=this.\u0275fac=function(fe){return new(fe||re)(en.LFG(Ha.eN))};static#t=this.\u0275prov=en.Yz7({token:re,factory:re.\u0275fac,providedIn:"root"})}return re})();var Xs=da(1735),Ks=da(6306),Bu=da(8504);const Yf=["plot"],fc=["*"];class Vi{static setModuleName(L){Vi.moduleName=L}static getModuleName(){return Vi.moduleName}static setPlotly(L){if("object"==typeof L&&"function"!=typeof L.react)throw new Error("Invalid plotly.js version. Please, use any version above 1.40.0");Vi.plotly=L}static insert(L){return-1===Vi.instances.indexOf(L)&&Vi.instances.push(L),L}static remove(L){const Z=Vi.instances.indexOf(L);Z>=0&&(Vi.instances.splice(Z,1),Vi.plotly.purge(L))}getInstanceByDivId(L){for(const Z of Vi.instances)if(Z&&Z.id===L)return Z}getPlotly(){var L=this;return(0,Yu.Z)(function*(){return yield L.waitFor(()=>"waiting"!==L._getPlotly()),L._getPlotly()})()}_getPlotly(){if(typeof Vi.plotly>"u")throw new Error("ViaCDN"===Vi.moduleName?"Error loading Peer dependency plotly.js from CDN url":"Peer dependency plotly.js isn't installed");return Vi.plotly}waitFor(L){return new Promise(Z=>{const fe=()=>{L()?Z():setTimeout(fe,10)};fe()})}newPlot(L,Z,fe,_e,Ue){var Xe=this;return(0,Yu.Z)(function*(){if(yield Xe.waitFor(()=>"waiting"!==Xe._getPlotly()),Ue){const lt={data:Z,layout:fe,config:_e,frames:Ue};return Xe._getPlotly().newPlot(L,lt).then(()=>Vi.insert(L))}return Xe._getPlotly().newPlot(L,Z,fe,_e).then(()=>Vi.insert(L))})()}plot(L,Z,fe,_e,Ue){if(Ue){const Xe={data:Z,layout:fe,config:_e,frames:Ue};return this._getPlotly().newPlot(L,Xe)}return this._getPlotly().newPlot(L,Z,fe,_e)}update(L,Z,fe,_e,Ue){if(Ue){const Xe={data:Z,layout:fe,config:_e,frames:Ue};return this._getPlotly().react(L,Xe)}return this._getPlotly().react(L,Z,fe,_e)}resize(L){return this._getPlotly().Plots.resize(L)}}Vi.instances=[],Vi.plotly=void 0,Vi.moduleName=void 0,Vi.\u0275fac=function(L){return new(L||Vi)},Vi.\u0275prov=en.Yz7({token:Vi,factory:Vi.\u0275fac,providedIn:"root"});let df=(()=>{class re{constructor(){this._isLoading=!1}get isLoading(){return this._isLoading}load(Z){return this._isLoading=!0,new Promise(fe=>{fe(!0)})}}return re.\u0275fac=function(Z){return new(Z||re)},re.\u0275prov=en.Yz7({token:re,factory:re.\u0275fac,providedIn:"root"}),re})(),pf=(()=>{class re{constructor(Z,fe,_e,Ue){this.plotly=Z,this.themeLoader=fe,this.iterableDiffers=_e,this.keyValueDiffers=Ue,this.defaultClassName="js-plotly-plot",this.theme="none",this.revision=0,this.debug=!1,this.useResizeHandler=!1,this.updateOnLayoutChange=!0,this.updateOnDataChange=!0,this.updateOnlyWithRevision=!1,this.initialized=new en.vpe,this.update=new en.vpe,this.purge=new en.vpe,this.error=new en.vpe,this.afterExport=new en.vpe,this.afterPlot=new en.vpe,this.animated=new en.vpe,this.animatingFrame=new en.vpe,this.animationInterrupted=new en.vpe,this.autoSize=new en.vpe,this.beforeExport=new en.vpe,this.beforeHover=new en.vpe,this.buttonClicked=new en.vpe,this.click=new en.vpe,this.plotlyClick=new en.vpe,this.clickAnnotation=new en.vpe,this.deselect=new en.vpe,this.doubleClick=new en.vpe,this.framework=new en.vpe,this.hover=new en.vpe,this.legendClick=new en.vpe,this.legendDoubleClick=new en.vpe,this.react=new en.vpe,this.relayout=new en.vpe,this.relayouting=new en.vpe,this.restyle=new en.vpe,this.redraw=new en.vpe,this.selected=new en.vpe,this.selecting=new en.vpe,this.sliderChange=new en.vpe,this.sliderEnd=new en.vpe,this.sliderStart=new en.vpe,this.sunburstclick=new en.vpe,this.transitioning=new en.vpe,this.transitionInterrupted=new en.vpe,this.unhover=new en.vpe,this.treemapclick=new en.vpe,this.webglcontextlost=new en.vpe,this.eventNames=["afterExport","afterPlot","animated","animatingFrame","animationInterrupted","autoSize","beforeExport","beforeHover","buttonClicked","clickAnnotation","deselect","doubleClick","framework","hover","legendClick","legendDoubleClick","react","relayout","relayouting","restyle","redraw","selected","selecting","sliderChange","sliderEnd","sliderStart","sunburstclick","transitioning","transitionInterrupted","unhover","treemapclick","webglcontextlost"]}ngOnInit(){this.createPlot().then(()=>{const Z=this.createFigure();this.initialized.emit(Z)}),this.click.observers.length>0&&console.error("DEPRECATED: Reconsider using `(plotlyClick)` instead of `(click)` to avoid event conflict. Please check https://github.com/plotly/angular-plotly.js#FAQ")}ngOnDestroy(){if("function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0),this.plotlyInstance){const Z=this.createFigure();this.purge.emit(Z),Vi.remove(this.plotlyInstance)}}ngOnChanges(Z){let fe=!1;const _e=Z.revision;_e&&!_e.isFirstChange()&&(fe=!0);const Ue=Z.debug;Ue&&!Ue.isFirstChange()&&(fe=!0),fe&&this.updatePlot(),this.updateWindowResizeHandler()}ngDoCheck(){if(this.updateOnlyWithRevision)return!1;let Z=!1;this.updateOnLayoutChange&&(this.layoutDiffer?this.layoutDiffer.diff(this.layout)&&(Z=!0):this.layoutDiffer=this.layout?this.keyValueDiffers.find(this.layout).create():void 0),this.updateOnDataChange&&(this.dataDiffer?this.dataDiffer.diff(this.data)&&(Z=!0):this.dataDiffer=Array.isArray(this.data)?this.iterableDiffers.find(this.data).create(this.dataDifferTrackBy):void 0),Z&&this.plotlyInstance&&this.updatePlot()}getData(){return this.data??[]}getWindow(){return window}getClassName(){let Z=[this.defaultClassName];return Array.isArray(this.className)?Z=Z.concat(this.className):this.className&&Z.push(this.className),Z.join(" ")}createPlot(){return this.plotly.newPlot(this.plotEl.nativeElement,this.getData(),this.layout,this.config,this.frames).then(Z=>{this.plotlyInstance=Z,this.getWindow().gd=this.debug?Z:void 0,this.eventNames.forEach(fe=>{const _e=`plotly_${fe.toLowerCase()}`,Ue=this[fe];Z.on(_e,Xe=>Ue.emit(Xe))}),Z.on("plotly_click",fe=>{this.plotlyClick.emit(fe)}),this.updateWindowResizeHandler()},Z=>{console.error("Error while plotting:",Z),this.error.emit(Z)})}createFigure(){const Z=this.plotlyInstance;return{data:Z.data,layout:Z.layout,frames:Z._transitionData?Z._transitionData._frames:null}}updatePlot(){if(!this.plotlyInstance){const fe=new Error("Plotly component wasn't initialized");throw this.error.emit(fe),fe}const Z={...this.layout};return this.plotly.update(this.plotlyInstance,this.getData(),Z,this.config,this.frames).then(()=>{const fe=this.createFigure();this.update.emit(fe)},fe=>{console.error("Error while updating plot:",fe),this.error.emit(fe)})}updateWindowResizeHandler(){this.useResizeHandler?void 0===this.resizeHandler&&(this.resizeHandler=()=>this.plotly.resize(this.plotlyInstance),this.getWindow().addEventListener("resize",this.resizeHandler)):"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0)}dataDifferTrackBy(Z,fe){const _e=Object.assign({},fe,{uid:""});return JSON.stringify(_e)}loadTheme(){void 0!==this.layout&&console.warn("You fulfill both `theme` and `layout` properties. This will overwrite the `layout` data with the `theme` data."),this.themeLoader.load(this.theme).then(Z=>this.layout=Z)}}return re.\u0275fac=function(Z){return new(Z||re)(en.Y36(Vi),en.Y36(df),en.Y36(en.ZZ4),en.Y36(en.aQg))},re.\u0275cmp=en.Xpm({type:re,selectors:[["plotly-plot"]],viewQuery:function(Z,fe){if(1&Z&&en.Gf(Yf,7),2&Z){let _e;en.iGM(_e=en.CRH())&&(fe.plotEl=_e.first)}},inputs:{data:"data",layout:"layout",config:"config",frames:"frames",style:"style",theme:"theme",divId:"divId",revision:"revision",className:"className",debug:"debug",useResizeHandler:"useResizeHandler",updateOnLayoutChange:"updateOnLayoutChange",updateOnDataChange:"updateOnDataChange",updateOnlyWithRevision:"updateOnlyWithRevision"},outputs:{initialized:"initialized",update:"update",purge:"purge",error:"error",afterExport:"afterExport",afterPlot:"afterPlot",animated:"animated",animatingFrame:"animatingFrame",animationInterrupted:"animationInterrupted",autoSize:"autoSize",beforeExport:"beforeExport",beforeHover:"beforeHover",buttonClicked:"buttonClicked",click:"click",plotlyClick:"plotlyClick",clickAnnotation:"clickAnnotation",deselect:"deselect",doubleClick:"doubleClick",framework:"framework",hover:"hover",legendClick:"legendClick",legendDoubleClick:"legendDoubleClick",react:"react",relayout:"relayout",relayouting:"relayouting",restyle:"restyle",redraw:"redraw",selected:"selected",selecting:"selecting",sliderChange:"sliderChange",sliderEnd:"sliderEnd",sliderStart:"sliderStart",sunburstclick:"sunburstclick",transitioning:"transitioning",transitionInterrupted:"transitionInterrupted",unhover:"unhover",treemapclick:"treemapclick",webglcontextlost:"webglcontextlost"},features:[en._Bn([Vi]),en.TTD],ngContentSelectors:fc,decls:3,vars:3,consts:[[3,"ngClass","ngStyle"],["plot",""]],template:function(Z,fe){1&Z&&(en.F$t(),en.TgZ(0,"div",0,1),en.Hsn(2),en.qZA()),2&Z&&(en.Q6J("ngClass",fe.getClassName())("ngStyle",fe.style),en.uIk("id",fe.divId))},dependencies:[Ri.mk,Ri.PC],encapsulation:2}),re})(),fu=(()=>{class re{constructor(){}}return re.\u0275fac=function(Z){return new(Z||re)},re.\u0275mod=en.oAB({type:re}),re.\u0275inj=en.cJS({providers:[Vi],imports:[Ri.ez]}),re})(),hc=(()=>{class re{constructor(){if(!this.isValid())throw new Error("Invalid PlotlyJS object. Please check https://github.com/plotly/angular-plotly.js#quick-start to see how to add PlotlyJS to your project.");Vi.setPlotly(re.plotlyjs)}isValid(){return void 0!==re.plotlyjs&&("function"==typeof re.plotlyjs.plot||"function"==typeof re.plotlyjs.newPlot)}}return re.plotlyjs={},re.\u0275fac=function(Z){return new(Z||re)},re.\u0275mod=en.oAB({type:re}),re.\u0275inj=en.cJS({providers:[Vi],imports:[Ri.ez,fu,fu]}),re})();class Oa{constructor(L){this.plotlyService=L,Vi.setModuleName("ViaCDN")}static setPlotlyVersion(L,Z="plotly",fe=""){if("latest"!==L&&!/^(strict-)?\d\.\d{1,2}\.\d{1,2}$/.test(L))throw new Error("Invalid plotly version. Please set 'latest' or version number (i.e.: 1.4.3) or strict version number (i.e.: strict-1.4.3)");Oa.loadViaCDN(Z,fe),Oa.plotlyVersion=L}static setPlotlyBundle(L){if(!(null===L||Oa.plotlyBundleNames.indexOf(L)>=0)){const fe=Oa.plotlyBundleNames.map(_e=>`"${_e}"`).join(", ");throw new Error(`Invalid plotly bundle. Please set to null for full or ${fe} for a partial bundle.`)}Oa.plotlyBundle=L}static loadViaCDN(L="plotly",Z=""){Vi.setPlotly("waiting"),setTimeout(()=>{let _e="";switch(L){case"cloudflare":if("latest"==Oa.plotlyVersion)throw new Error("As cloudflare hosts version specific files, 'latest' as a version is not supported. Please specify a version or you can choose 'plotly' as a CDN provider.");_e=null==Oa.plotlyBundle?`https://cdnjs.cloudflare.com/ajax/libs/plotly.js/${Oa.plotlyVersion}/plotly.min.js`:`https://cdnjs.cloudflare.com/ajax/libs/plotly.js/${Oa.plotlyVersion}/plotly-${Oa.plotlyBundle}.min.js`;break;case"custom":if(!Z||"string"!=typeof Z)throw new Error("Invalid or missing CDN URL. Please provide a CDN URL in case of custom provider. Alternatively, you can choose from 'plotly' or 'cloudflare'.");_e=Z;break;default:_e=null==Oa.plotlyBundle?`https://cdn.plot.ly/plotly-${Oa.plotlyVersion}.min.js`:`https://cdn.plot.ly/plotly-${Oa.plotlyBundle}-${Oa.plotlyVersion}.min.js`}const Ue=document.createElement("script");Ue.type="text/javascript",Ue.src=_e,Ue.onerror=()=>console.error(`Error loading plotly.js library from ${_e}`),document.getElementsByTagName("head")[0].appendChild(Ue);let lt=200;const bt=()=>{const Ht=window.Plotly;if(Ht)Vi.setPlotly(Ht);else{if(!(lt>0))throw new Error(`Error loading plotly.js library from ${_e}. Timeout.`);lt--,setTimeout(bt,50)}};bt()})}}function gf(re,L){if(1&re&&en._UZ(0,"plotly-plot",1),2&re){const Z=en.oxw();en.Q6J("data",Z.plotlyData)("layout",Z.layout)}}Oa.plotlyBundle=void 0,Oa.plotlyVersion="latest",Oa.plotlyBundleNames=["basic","cartesian","geo","gl3d","gl2d","mapbox","finance"],Oa.\u0275fac=function(L){return new(L||Oa)(en.LFG(Vi))},Oa.\u0275mod=en.oAB({type:Oa}),Oa.\u0275inj=en.cJS({providers:[Vi],imports:[Ri.ez,fu,fu]});let Zf=(()=>{class re{constructor(Z){this.http=Z,this.layout={title:"Sentinel 2 Timeseries",xaxis:{title:"Date",ticks:{color:"#495057"},grid:{color:"#ebedef"}},yaxis:{title:"NDVI",min:0,max:1.2,type:"linear"},yaxis2:{title:"Precipitation (mm)",overlaying:"y",side:"right",type:"linear"}}}ngOnChanges(Z){Z.lat&&Z.lon&&this.isValidLatLon()&&this.loadTimeseries()}isValidLatLon(){return void 0!==this.lat&&void 0!==this.lon&&!isNaN(this.lat)&&!isNaN(this.lon)}loadTimeseries(){this.http.get(`https://tiles.lapig.iesa.ufg.br/api/timeseries/sentinel2/${this.lat}/${this.lon}`).pipe((0,Ks.K)(fe=>(console.error("Error fetching timeseries:",fe),(0,Bu._)(fe)))).subscribe(fe=>{console.log(fe),this.plotlyData=fe})}static#e=this.\u0275fac=function(fe){return new(fe||re)(en.Y36(Ha.eN))};static#t=this.\u0275cmp=en.Xpm({type:re,selectors:[["app-sentinel-timeseries"]],inputs:{lat:"lat",lon:"lon"},standalone:!0,features:[en.TTD,en.jDz],decls:1,vars:1,consts:[[3,"data","layout",4,"ngIf"],[3,"data","layout"]],template:function(fe,_e){1&fe&&en.YNc(0,gf,1,2,"plotly-plot",0),2&fe&&en.Q6J("ngIf",_e.plotlyData)},dependencies:[fu,pf,Ri.O5]})}return re})();var hu=da(95),Ds=da(5219),Ku=da(4480),du=da(2332);const Xf=["container"];function Vc(re,L){if(1&re&&en._UZ(0,"span",8),2&re){const Z=en.oxw(2).$implicit;en.Tol(Z.icon),en.Q6J("ngClass","p-button-icon p-button-icon-left"),en.uIk("data-pc-section","icon")}}function Kf(re,L){if(1&re&&(en.ynx(0),en.YNc(1,Vc,1,4,"span",6),en.TgZ(2,"span",7),en._uU(3),en.qZA(),en.BQk()),2&re){const Z=en.oxw().$implicit,fe=en.oxw();en.xp6(1),en.Q6J("ngIf",Z.icon),en.xp6(1),en.uIk("data-pc-section","label"),en.xp6(1),en.Oqu(fe.getOptionLabel(Z))}}function Jf(re,L){1&re&&en.GkF(0)}const mf=(re,L)=>({$implicit:re,index:L});function vf(re,L){if(1&re&&en.YNc(0,Jf,1,0,"ng-container",9),2&re){const Z=en.oxw(),fe=Z.$implicit,_e=Z.index,Ue=en.oxw();en.Q6J("ngTemplateOutlet",Ue.selectButtonTemplate)("ngTemplateOutletContext",en.WLB(2,mf,fe,_e))}}const dc=(re,L,Z)=>({"p-highlight":re,"p-disabled":L,"p-button-icon-only":Z});function yf(re,L){if(1&re){const Z=en.EpF();en.TgZ(0,"div",3),en.NdJ("click",function(_e){const Ue=en.CHM(Z),Xe=Ue.$implicit,lt=Ue.index,bt=en.oxw();return en.KtG(bt.onOptionSelect(_e,Xe,lt))})("keydown",function(_e){const Ue=en.CHM(Z),Xe=Ue.$implicit,lt=Ue.index,bt=en.oxw();return en.KtG(bt.onKeyDown(_e,Xe,lt))})("focus",function(_e){const Xe=en.CHM(Z).index,lt=en.oxw();return en.KtG(lt.onFocus(_e,Xe))})("blur",function(){en.CHM(Z);const _e=en.oxw();return en.KtG(_e.onBlur())}),en.YNc(1,Kf,4,3,"ng-container",4)(2,vf,1,5,"ng-template",null,5,en.W1O),en.qZA()}if(2&re){const Z=L.$implicit,fe=L.index,_e=en.MAs(3),Ue=en.oxw();en.Tol(Z.styleClass),en.Q6J("role",Ue.multiple?"checkbox":"radio")("ngClass",en.kEZ(14,dc,Ue.isSelected(Z),Ue.disabled||Ue.isOptionDisabled(Z),Z.icon&&!Ue.getOptionLabel(Z))),en.uIk("tabindex",fe===Ue.focusedIndex?"0":"-1")("aria-label",Z.label)("aria-checked",Ue.isSelected(Z))("aria-disabled",Ue.optionDisabled)("aria-pressed",Ue.isSelected(Z))("title",Z.title)("aria-labelledby",Ue.getOptionLabel(Z))("data-pc-section","button"),en.xp6(1),en.Q6J("ngIf",!Ue.itemTemplate)("ngIfElse",_e)}}const pc={provide:hu.JU,useExisting:(0,en.Gpc)(()=>gc),multi:!0};let gc=(()=>{class re{cd;options;optionLabel;optionValue;optionDisabled;unselectable=!1;tabindex=0;multiple;allowEmpty=!0;style;styleClass;ariaLabelledBy;disabled;dataKey;onOptionClick=new en.vpe;onChange=new en.vpe;container;itemTemplate;get selectButtonTemplate(){return this.itemTemplate?.template}get equalityKey(){return this.optionValue?null:this.dataKey}value;onModelChange=()=>{};onModelTouched=()=>{};focusedIndex=0;constructor(Z){this.cd=Z}getOptionLabel(Z){return this.optionLabel?du.gb.resolveFieldData(Z,this.optionLabel):null!=Z.label?Z.label:Z}getOptionValue(Z){return this.optionValue?du.gb.resolveFieldData(Z,this.optionValue):this.optionLabel||void 0===Z.value?Z:Z.value}isOptionDisabled(Z){return this.optionDisabled?du.gb.resolveFieldData(Z,this.optionDisabled):void 0!==Z.disabled&&Z.disabled}writeValue(Z){this.value=Z,this.cd.markForCheck()}registerOnChange(Z){this.onModelChange=Z}registerOnTouched(Z){this.onModelTouched=Z}setDisabledState(Z){this.disabled=Z,this.cd.markForCheck()}onOptionSelect(Z,fe,_e){if(this.disabled||this.isOptionDisabled(fe))return;let Ue=this.isSelected(fe);if(Ue&&this.unselectable)return;let lt,Xe=this.getOptionValue(fe);if(this.multiple)lt=Ue?this.value.filter(bt=>!du.gb.equals(bt,Xe,this.equalityKey)):this.value?[...this.value,Xe]:[Xe];else{if(Ue&&!this.allowEmpty)return;lt=Ue?null:Xe}this.focusedIndex=_e,this.value=lt,this.onModelChange(this.value),this.onChange.emit({originalEvent:Z,value:this.value}),this.onOptionClick.emit({originalEvent:Z,option:fe,index:_e})}onKeyDown(Z,fe,_e){switch(Z.code){case"Space":this.onOptionSelect(Z,fe,_e),Z.preventDefault();break;case"ArrowDown":case"ArrowRight":this.changeTabIndexes(Z,"next"),Z.preventDefault();break;case"ArrowUp":case"ArrowLeft":this.changeTabIndexes(Z,"prev"),Z.preventDefault()}}changeTabIndexes(Z,fe){let _e,Ue;for(let Xe=0;Xe<=this.container.nativeElement.children.length-1;Xe++)"0"===this.container.nativeElement.children[Xe].getAttribute("tabindex")&&(_e={elem:this.container.nativeElement.children[Xe],index:Xe});Ue="prev"===fe?0===_e.index?this.container.nativeElement.children.length-1:_e.index-1:_e.index===this.container.nativeElement.children.length-1?0:_e.index+1,this.focusedIndex=Ue,this.container.nativeElement.children[Ue].focus()}onFocus(Z,fe){this.focusedIndex=fe}onBlur(){this.onModelTouched()}removeOption(Z){this.value=this.value.filter(fe=>!du.gb.equals(fe,this.getOptionValue(Z),this.dataKey))}isSelected(Z){let fe=!1;const _e=this.getOptionValue(Z);if(this.multiple){if(this.value&&Array.isArray(this.value))for(let Ue of this.value)if(du.gb.equals(Ue,_e,this.dataKey)){fe=!0;break}}else fe=du.gb.equals(this.getOptionValue(Z),this.value,this.equalityKey);return fe}static \u0275fac=function(fe){return new(fe||re)(en.Y36(en.sBO))};static \u0275cmp=en.Xpm({type:re,selectors:[["p-selectButton"]],contentQueries:function(fe,_e,Ue){if(1&fe&&en.Suo(Ue,Ds.jx,5),2&fe){let Xe;en.iGM(Xe=en.CRH())&&(_e.itemTemplate=Xe.first)}},viewQuery:function(fe,_e){if(1&fe&&en.Gf(Xf,5),2&fe){let Ue;en.iGM(Ue=en.CRH())&&(_e.container=Ue.first)}},hostAttrs:[1,"p-element"],inputs:{options:"options",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",unselectable:"unselectable",tabindex:"tabindex",multiple:"multiple",allowEmpty:"allowEmpty",style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",disabled:"disabled",dataKey:"dataKey"},outputs:{onOptionClick:"onOptionClick",onChange:"onChange"},features:[en._Bn([pc])],decls:3,vars:8,consts:[["role","group",3,"ngClass","ngStyle"],["container",""],["pRipple","","class","p-button p-component",3,"role","class","ngClass","click","keydown","focus","blur",4,"ngFor","ngForOf"],["pRipple","",1,"p-button","p-component",3,"role","ngClass","click","keydown","focus","blur"],[4,"ngIf","ngIfElse"],["customcontent",""],[3,"ngClass","class",4,"ngIf"],[1,"p-button-label"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(fe,_e){1&fe&&(en.TgZ(0,"div",0,1),en.YNc(2,yf,4,18,"div",2),en.qZA()),2&fe&&(en.Tol(_e.styleClass),en.Q6J("ngClass","p-selectbutton p-buttonset p-component")("ngStyle",_e.style),en.uIk("aria-labelledby",_e.ariaLabelledBy)("data-pc-name","selectbutton")("data-pc-section","root"),en.xp6(2),en.Q6J("ngForOf",_e.options))},dependencies:[Ri.mk,Ri.sg,Ri.O5,Ri.tP,Ri.PC,Ku.H],styles:['@layer primeng{.p-button{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label{flex:1 1 auto}.p-button-icon-right{order:1}.p-button:disabled{cursor:default;pointer-events:none}.p-button-icon-only{justify-content:center}.p-button-icon-only:after{content:"p";visibility:hidden;clip:rect(0 0 0 0);width:0}.p-button-vertical{flex-direction:column}.p-button-icon-bottom{order:2}.p-buttonset .p-button{margin:0}.p-buttonset .p-button:not(:last-child){border-right:0 none}.p-buttonset .p-button:not(:first-of-type):not(:last-of-type){border-radius:0}.p-buttonset .p-button:first-of-type{border-top-right-radius:0;border-bottom-right-radius:0}.p-buttonset .p-button:last-of-type{border-top-left-radius:0;border-bottom-left-radius:0}.p-buttonset .p-button:focus{position:relative;z-index:1}p-button[iconpos=right] spinnericon{order:1}}\n'],encapsulation:2,changeDetection:0})}return re})(),xf=(()=>{class re{static \u0275fac=function(fe){return new(fe||re)};static \u0275mod=en.oAB({type:re});static \u0275inj=en.cJS({imports:[Ri.ez,Ku.T,Ds.m8,Ds.m8]})}return re})();function Yd(re,L){if(1&re&&(en.TgZ(0,"h4",9),en._uU(1),en.ALo(2,"number"),en.ALo(3,"number"),en.qZA()),2&re){const Z=en.oxw();en.xp6(1),en.AsE("Latitude: ",en.lcZ(2,2,Z.lat),", Longitude: ",en.lcZ(3,4,Z.lon),"")}}function Dh(re,L){if(1&re&&(en.TgZ(0,"div",10),en._UZ(1,"div",11),en.qZA()),2&re){const Z=L.$implicit;en.xp6(1),en.Q6J("id",Z.id)}}function Zd(re,L){if(1&re&&en._UZ(0,"app-sentinel-timeseries",12),2&re){const Z=en.oxw();en.Q6J("lat",Z.lat)("lon",Z.lon)}}const bf=(new Date).getFullYear(),zh=(new Date).getMonth()+1,Xd={collections:[{name:"s2_harmonized",visparam:["tvi-green","tvi-red","tvi-rgb"],period:["WET","DRY","MONTH"],year:Array.from({length:bf-2019+1},(re,L)=>2019+L),month:["01","02","03","04","05","06","07","08","09","10","11","12"]},{name:"landsat",visparam:["landsat-tvi-false","landsat-tvi-true","landsat-tvi-agri"],period:["WET","DRY","MONTH"],year:Array.from({length:bf-1985+1},(re,L)=>1985+L),month:["01","02","03","04","05","06","07","08","09","10","11","12"]}]};let Fh=(()=>{class re{constructor(Z,fe){this.layerService=Z,this.pointService=fe,this.sentinelMaps=[],this.landsatMaps=[],this.centerCoordinates=ki([-57.149819,-21.329828]),this.mapsInstances=[],this.lat=null,this.lon=null,this.sentinelPeriods=["WET","DRY","MONTH"],this.landsatPeriods=["WET","DRY","MONTH"],this.sentinelVisParams=["tvi-green","tvi-red","tvi-rgb"],this.landsatVisParams=["landsat-tvi-false","landsat-tvi-true","landsat-tvi-agri"],this.selectedSentinelPeriod=this.sentinelPeriods[0],this.selectedLandsatPeriod=this.landsatPeriods[0],this.selectedSentinelVisParam=this.sentinelVisParams[0],this.selectedLandsatVisParam=this.landsatVisParams[0]}ngOnInit(){this.initializeMaps(),this.pointService.setPoint({lat:-21.329828,lon:-57.149819}),this.pointService.point$.subscribe({next:Z=>{Z.lat&&Z.lon&&(this.lat=Z.lat,this.lon=Z.lon,this.updateCenterCoordinates([Z.lon,Z.lat]))}})}initializeMaps(){this.createMaps("sentinel",this.selectedSentinelPeriod,this.selectedSentinelVisParam),this.createMaps("landsat",this.selectedLandsatPeriod,this.selectedLandsatVisParam)}createMaps(Z,fe,_e){"sentinel"===Z?this.sentinelMaps=[]:this.landsatMaps=[];const Ue=Xd.collections.find(Xe=>Xe.name===("sentinel"===Z?"s2_harmonized":"landsat"));if(Ue)for(let Xe of Ue.year)if("MONTH"===fe)for(let lt of Ue.month){if(Xe===bf&&parseInt(lt,10)>zh)break;this.addMap(Z,`${Z}-map-${lt}-${Xe}`,"MONTH",Xe,_e,lt)}else this.addMap(Z,`${Z}-map-${fe}-${Xe}`,fe,Xe,_e)}addMap(Z,fe,_e,Ue,Xe,lt){"sentinel"===Z?this.sentinelMaps.push("MONTH"===_e?{month:lt,year:Ue,id:fe}:{period:_e,year:Ue,id:fe}):this.landsatMaps.push("MONTH"===_e?{month:lt,year:Ue,id:fe}:{period:_e,year:Ue,id:fe}),this.createMap(fe,_e,Ue,Z,Xe,lt)}createMap(Z,fe,_e,Ue,Xe,lt){setTimeout(()=>{const bt=`https://tm{1-5}.lapig.iesa.ufg.br/api/layers/${"sentinel"===Ue?"s2_harmonized":"landsat"}/{x}/{y}/{z}?period=${fe}&year=${_e}&visparam=${Xe}${"MONTH"===fe?`&month=${lt}`:""}`;console.log("url",bt);const Ht=new Du({target:Z,layers:[new yr({source:new yl({url:bt,attributions:`${"MONTH"===fe?`Month ${lt}`:fe} - ${_e}`,attributionsCollapsible:!1})})],view:new Yr({center:this.centerCoordinates,zoom:13}),interactions:ff().extend([new Hl({handleDownEvent:Wt=>{const pn=wa(Wt.coordinate);return this.updateCenterCoordinates(pn),!0}})])});this.mapsInstances.push({id:Z,map:Ht})},0)}updateCenterCoordinates(Z){this.centerCoordinates=ki(Z),this.updateMaps()}updateMaps(){for(let Z of this.mapsInstances)Z.map.getView().setCenter(this.centerCoordinates)}updateSentinelMaps(){this.mapsInstances=this.mapsInstances.filter(Z=>!Z.id.startsWith("sentinel-map")),this.createMaps("sentinel",this.selectedSentinelPeriod,this.selectedSentinelVisParam)}updateLandsatMaps(){this.mapsInstances=this.mapsInstances.filter(Z=>!Z.id.startsWith("landsat-map")),this.createMaps("landsat",this.selectedLandsatPeriod,this.selectedLandsatVisParam)}static#e=this.\u0275fac=function(fe){return new(fe||re)(en.Y36(xl),en.Y36(Xs.H))};static#t=this.\u0275cmp=en.Xpm({type:re,selectors:[["app-map-grid"]],decls:13,vars:7,consts:[["class","text-center card",4,"ngIf"],[1,"flex","justify-content-evenly","align-content-center"],["for","period-type-sant"],["id","period-type-sant",1,"w-full",3,"options","ngModel","ngModelChange","onChange"],["for","vis-params-sant"],["id","vis-params-sant",1,"w-full",3,"options","ngModel","ngModelChange","onChange"],[1,"map-grid","mt-3"],["class","map-item",4,"ngFor","ngForOf"],[3,"lat","lon",4,"ngIf"],[1,"text-center","card"],[1,"map-item"],[1,"map-container",3,"id"],[3,"lat","lon"]],template:function(fe,_e){1&fe&&(en.YNc(0,Yd,4,6,"h4",0),en.TgZ(1,"div",1)(2,"span")(3,"label",2),en._uU(4,"Period Type"),en.qZA(),en.TgZ(5,"p-selectButton",3),en.NdJ("ngModelChange",function(Xe){return _e.selectedSentinelPeriod=Xe})("onChange",function(){return _e.updateSentinelMaps()}),en.qZA()(),en.TgZ(6,"span")(7,"label",4),en._uU(8,"Visualization Params"),en.qZA(),en.TgZ(9,"p-selectButton",5),en.NdJ("ngModelChange",function(Xe){return _e.selectedSentinelVisParam=Xe})("onChange",function(){return _e.updateSentinelMaps()}),en.qZA()()(),en.TgZ(10,"div",6),en.YNc(11,Dh,2,1,"div",7),en.qZA(),en.YNc(12,Zd,1,2,"app-sentinel-timeseries",8)),2&fe&&(en.Q6J("ngIf",_e.lat&&_e.lon),en.xp6(5),en.Q6J("options",_e.sentinelPeriods)("ngModel",_e.selectedSentinelPeriod),en.xp6(4),en.Q6J("options",_e.sentinelVisParams)("ngModel",_e.selectedSentinelVisParam),en.xp6(2),en.Q6J("ngForOf",_e.sentinelMaps),en.xp6(1),en.Q6J("ngIf",_e.lat&&_e.lon))},dependencies:[Ri.sg,Ri.O5,Zf,hu.JJ,hu.On,gc,Ri.JJ],styles:[".map-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.map-item[_ngcontent-%COMP%]{flex:1 1 20%;margin:1px;text-align:center}.map-container[_ngcontent-%COMP%]{width:100%;height:300px}"]})}return re})();function Kd(re,L){1&re&&en.GkF(0)}function Bh(re,L){if(1&re&&(en.TgZ(0,"div",8),en.Hsn(1,1),en.YNc(2,Kd,1,0,"ng-container",6),en.qZA()),2&re){const Z=en.oxw();en.xp6(2),en.Q6J("ngTemplateOutlet",Z.headerTemplate)}}function t0(re,L){1&re&&en.GkF(0)}function _f(re,L){if(1&re&&(en.TgZ(0,"div",9),en._uU(1),en.YNc(2,t0,1,0,"ng-container",6),en.qZA()),2&re){const Z=en.oxw();en.xp6(1),en.hij(" ",Z.header," "),en.xp6(1),en.Q6J("ngTemplateOutlet",Z.titleTemplate)}}function Ba(re,L){1&re&&en.GkF(0)}function Wl(re,L){if(1&re&&(en.TgZ(0,"div",10),en._uU(1),en.YNc(2,Ba,1,0,"ng-container",6),en.qZA()),2&re){const Z=en.oxw();en.xp6(1),en.hij(" ",Z.subheader," "),en.xp6(1),en.Q6J("ngTemplateOutlet",Z.subtitleTemplate)}}function n0(re,L){1&re&&en.GkF(0)}function Ju(re,L){1&re&&en.GkF(0)}function Nh(re,L){if(1&re&&(en.TgZ(0,"div",11),en.Hsn(1,2),en.YNc(2,Ju,1,0,"ng-container",6),en.qZA()),2&re){const Z=en.oxw();en.xp6(2),en.Q6J("ngTemplateOutlet",Z.footerTemplate)}}const Jd=["*",[["p-header"]],[["p-footer"]]],$f=["*","p-header","p-footer"];let pu=(()=>{class re{el;header;subheader;style;styleClass;headerFacet;footerFacet;templates;headerTemplate;titleTemplate;subtitleTemplate;contentTemplate;footerTemplate;constructor(Z){this.el=Z}ngAfterContentInit(){this.templates.forEach(Z=>{switch(Z.getType()){case"header":this.headerTemplate=Z.template;break;case"title":this.titleTemplate=Z.template;break;case"subtitle":this.subtitleTemplate=Z.template;break;case"content":default:this.contentTemplate=Z.template;break;case"footer":this.footerTemplate=Z.template}})}getBlockableElement(){return this.el.nativeElement.children[0]}static \u0275fac=function(fe){return new(fe||re)(en.Y36(en.SBq))};static \u0275cmp=en.Xpm({type:re,selectors:[["p-card"]],contentQueries:function(fe,_e,Ue){if(1&fe&&(en.Suo(Ue,Ds.h4,5),en.Suo(Ue,Ds.$_,5),en.Suo(Ue,Ds.jx,4)),2&fe){let Xe;en.iGM(Xe=en.CRH())&&(_e.headerFacet=Xe.first),en.iGM(Xe=en.CRH())&&(_e.footerFacet=Xe.first),en.iGM(Xe=en.CRH())&&(_e.templates=Xe)}},hostAttrs:[1,"p-element"],inputs:{header:"header",subheader:"subheader",style:"style",styleClass:"styleClass"},ngContentSelectors:$f,decls:9,vars:10,consts:[[3,"ngClass","ngStyle"],["class","p-card-header",4,"ngIf"],[1,"p-card-body"],["class","p-card-title",4,"ngIf"],["class","p-card-subtitle",4,"ngIf"],[1,"p-card-content"],[4,"ngTemplateOutlet"],["class","p-card-footer",4,"ngIf"],[1,"p-card-header"],[1,"p-card-title"],[1,"p-card-subtitle"],[1,"p-card-footer"]],template:function(fe,_e){1&fe&&(en.F$t(Jd),en.TgZ(0,"div",0),en.YNc(1,Bh,3,1,"div",1),en.TgZ(2,"div",2),en.YNc(3,_f,3,2,"div",3)(4,Wl,3,2,"div",4),en.TgZ(5,"div",5),en.Hsn(6),en.YNc(7,n0,1,0,"ng-container",6),en.qZA(),en.YNc(8,Nh,3,1,"div",7),en.qZA()()),2&fe&&(en.Tol(_e.styleClass),en.Q6J("ngClass","p-card p-component")("ngStyle",_e.style),en.uIk("data-pc-name","card"),en.xp6(1),en.Q6J("ngIf",_e.headerFacet||_e.headerTemplate),en.xp6(2),en.Q6J("ngIf",_e.header||_e.titleTemplate),en.xp6(1),en.Q6J("ngIf",_e.subheader||_e.subtitleTemplate),en.xp6(3),en.Q6J("ngTemplateOutlet",_e.contentTemplate),en.xp6(1),en.Q6J("ngIf",_e.footerFacet||_e.footerTemplate))},dependencies:[Ri.mk,Ri.O5,Ri.tP,Ri.PC],styles:["@layer primeng{.p-card-header img{width:100%}}\n"],encapsulation:2,changeDetection:0})}return re})(),Qf=(()=>{class re{static \u0275fac=function(fe){return new(fe||re)};static \u0275mod=en.oAB({type:re});static \u0275inj=en.cJS({imports:[Ri.ez,Ds.m8]})}return re})(),wf=(()=>{class re{constructor(Z,fe){this.layerService=Z,this.pointService=fe,this.periods=["WET","DRY"],this.years=[2017,2018,2019,2020,2021,2022,2023],this.months=["02","09"],this.maps=[],this.centerCoordinates=ki([-57.149819,-21.329828]),this.mapsInstances=[]}ngOnInit(){this.initializeMaps(),this.pointService.point$.subscribe({next:Z=>{Z.lat&&Z.lon&&this.updateCenterCoordinates([Z.lon,Z.lat])}})}initializeMaps(){for(let Z of this.years)for(let fe of this.months){let _e="02"===fe?"WET":"DRY",Ue=`map-${_e}-${Z}`;this.maps.push({period:_e,year:Z,id:Ue}),this.createMap(Ue,_e,Z)}}createMap(Z,fe,_e){setTimeout(()=>{const Ue=new Du({target:Z,layers:[new yr({source:new yl({url:`https://tm{1-5}.lapig.iesa.ufg.br/api/layers/s2_harmonized/${fe}/${_e}/{x}/{y}/{z}`,attributions:`${fe} - ${_e}`,attributionsCollapsible:!1})})],view:new Yr({center:this.centerCoordinates,zoom:13}),interactions:ff().extend([new Hl({handleDownEvent:Xe=>{const lt=wa(Xe.coordinate);return this.updateCenterCoordinates(lt),!0}})])});this.mapsInstances.push(Ue)},0)}updateCenterCoordinates(Z){this.centerCoordinates=ki(Z),this.updateMaps()}updateMaps(){for(let Z of this.mapsInstances)Z.getView().setCenter(this.centerCoordinates)}static#e=this.\u0275fac=function(fe){return new(fe||re)(en.Y36(xl),en.Y36(Xs.H))};static#t=this.\u0275cmp=en.Xpm({type:re,selectors:[["app-map-grid"]],decls:7,vars:0,consts:[[1,"text-center"]],template:function(fe,_e){1&fe&&(en.TgZ(0,"p-card")(1,"h1",0),en._uU(2,"Sentinel 2 Images"),en.qZA(),en.TgZ(3,"p"),en._uU(4,"This component displays multiple map instances based on different periods and years."),en.qZA(),en.TgZ(5,"p"),en._uU(6," The Map Grid Component initializes multiple maps for the specified periods (WET and DRY) and years (2017 to 2023). It uses OpenLayers to render map tiles from a remote server. Users can interact with the maps to update center coordinates. "),en.qZA()())},dependencies:[pu],encapsulation:2})}return re})();function eh(re,L){if(1&re&&en._UZ(0,"plotly-plot",1),2&re){const Z=en.oxw();en.Q6J("data",Z.plotlyData)("layout",Z.layout)}}let Tf=(()=>{class re{constructor(Z){this.http=Z,this.layout={title:"Landsat Timeseries",xaxis:{title:"Date",ticks:{color:"#495057"},grid:{color:"#ebedef"}},yaxis:{title:"NDVI",min:0,max:1.2,type:"linear"},yaxis2:{title:"Precipitation (mm)",overlaying:"y",side:"right",type:"linear"}}}ngOnChanges(Z){Z.lat&&Z.lon&&this.isValidLatLon()&&this.loadTimeseries()}isValidLatLon(){return void 0!==this.lat&&void 0!==this.lon&&!isNaN(this.lat)&&!isNaN(this.lon)}loadTimeseries(){this.http.get(`https://tiles.lapig.iesa.ufg.br/api/timeseries/landsat/${this.lat}/${this.lon}`).pipe((0,Ks.K)(fe=>(console.error("Error fetching timeseries:",fe),(0,Bu._)(fe)))).subscribe(fe=>{console.log(fe),this.plotlyData=fe})}static#e=this.\u0275fac=function(fe){return new(fe||re)(en.Y36(Ha.eN))};static#t=this.\u0275cmp=en.Xpm({type:re,selectors:[["app-landsat-timeseries"]],inputs:{lat:"lat",lon:"lon"},standalone:!0,features:[en.TTD,en.jDz],decls:1,vars:1,consts:[[3,"data","layout",4,"ngIf"],[3,"data","layout"]],template:function(fe,_e){1&fe&&en.YNc(0,eh,1,2,"plotly-plot",0),2&fe&&en.Q6J("ngIf",_e.plotlyData)},dependencies:[fu,pf,Ri.O5]})}return re})();function jh(re,L){if(1&re&&(en.TgZ(0,"h4",9),en._uU(1),en.ALo(2,"number"),en.ALo(3,"number"),en.qZA()),2&re){const Z=en.oxw();en.xp6(1),en.AsE("Latitude: ",en.lcZ(2,2,Z.lat),", Longitude: ",en.lcZ(3,4,Z.lon),"")}}function $d(re,L){if(1&re&&(en.TgZ(0,"div",10),en._UZ(1,"div",11),en.qZA()),2&re){const Z=L.$implicit;en.xp6(1),en.Q6J("id",Z.id)}}function kf(re,L){if(1&re&&en._UZ(0,"app-landsat-timeseries",12),2&re){const Z=en.oxw();en.Q6J("lat",Z.lat)("lon",Z.lon)}}const th=(new Date).getFullYear(),Qd=(new Date).getMonth()+1,ep={collections:[{name:"s2_harmonized",visparam:["tvi-green","tvi-red","tvi-rgb"],period:["WET","DRY","MONTH"],year:Array.from({length:th-2019+1},(re,L)=>2019+L),month:["01","02","03","04","05","06","07","08","09","10","11","12"]},{name:"landsat",visparam:["landsat-tvi-false","landsat-tvi-true","landsat-tvi-agri"],period:["WET","DRY","MONTH"],year:Array.from({length:th-1985+1},(re,L)=>1985+L),month:["01","02","03","04","05","06","07","08","09","10","11","12"]}]};let tp=(()=>{class re{constructor(Z,fe){this.layerService=Z,this.pointService=fe,this.sentinelMaps=[],this.landsatMaps=[],this.centerCoordinates=ki([-57.149819,-21.329828]),this.mapsInstances=[],this.lat=null,this.lon=null,this.sentinelPeriods=["WET","DRY","MONTH"],this.landsatPeriods=["WET","DRY","MONTH"],this.sentinelVisParams=["tvi-green","tvi-red","tvi-rgb"],this.landsatVisParams=["landsat-tvi-false","landsat-tvi-true","landsat-tvi-agri"],this.selectedSentinelPeriod=this.sentinelPeriods[0],this.selectedLandsatPeriod=this.landsatPeriods[0],this.selectedSentinelVisParam=this.sentinelVisParams[0],this.selectedLandsatVisParam=this.landsatVisParams[0]}ngOnInit(){this.initializeMaps(),this.pointService.setPoint({lat:-21.329828,lon:-57.149819}),this.pointService.point$.subscribe({next:Z=>{Z.lat&&Z.lon&&(this.lat=Z.lat,this.lon=Z.lon,this.updateCenterCoordinates([Z.lon,Z.lat]))}})}initializeMaps(){this.createMaps("sentinel",this.selectedSentinelPeriod,this.selectedSentinelVisParam),this.createMaps("landsat",this.selectedLandsatPeriod,this.selectedLandsatVisParam)}createMaps(Z,fe,_e){"sentinel"===Z?this.sentinelMaps=[]:this.landsatMaps=[];const Ue=ep.collections.find(Xe=>Xe.name===("sentinel"===Z?"s2_harmonized":"landsat"));if(Ue)for(let Xe of Ue.year)if("MONTH"===fe)for(let lt of Ue.month){if(Xe===th&&parseInt(lt,10)>Qd)break;this.addMap(Z,`${Z}-map-${lt}-${Xe}`,"MONTH",Xe,_e,lt)}else this.addMap(Z,`${Z}-map-${fe}-${Xe}`,fe,Xe,_e)}addMap(Z,fe,_e,Ue,Xe,lt){"sentinel"===Z?this.sentinelMaps.push("MONTH"===_e?{month:lt,year:Ue,id:fe}:{period:_e,year:Ue,id:fe}):this.landsatMaps.push("MONTH"===_e?{month:lt,year:Ue,id:fe}:{period:_e,year:Ue,id:fe}),this.createMap(fe,_e,Ue,Z,Xe,lt)}createMap(Z,fe,_e,Ue,Xe,lt){setTimeout(()=>{const bt=`https://tm{1-5}.lapig.iesa.ufg.br/api/layers/${"sentinel"===Ue?"s2_harmonized":"landsat"}/{x}/{y}/{z}?period=${fe}&year=${_e}&visparam=${Xe}${"MONTH"===fe?`&month=${lt}`:""}`;console.log("url",bt);const Ht=new Du({target:Z,layers:[new yr({source:new yl({url:bt,attributions:`${"MONTH"===fe?`Month ${lt}`:fe} - ${_e}`,attributionsCollapsible:!1})})],view:new Yr({center:this.centerCoordinates,zoom:13}),interactions:ff().extend([new Hl({handleDownEvent:Wt=>{const pn=wa(Wt.coordinate);return this.updateCenterCoordinates(pn),!0}})])});this.mapsInstances.push({id:Z,map:Ht})},0)}updateCenterCoordinates(Z){this.centerCoordinates=ki(Z),this.updateMaps()}updateMaps(){for(let Z of this.mapsInstances)Z.map.getView().setCenter(this.centerCoordinates)}updateSentinelMaps(){this.mapsInstances=this.mapsInstances.filter(Z=>!Z.id.startsWith("sentinel-map")),this.createMaps("sentinel",this.selectedSentinelPeriod,this.selectedSentinelVisParam)}updateLandsatMaps(){this.mapsInstances=this.mapsInstances.filter(Z=>!Z.id.startsWith("landsat-map")),this.createMaps("landsat",this.selectedLandsatPeriod,this.selectedLandsatVisParam)}static#e=this.\u0275fac=function(fe){return new(fe||re)(en.Y36(xl),en.Y36(Xs.H))};static#t=this.\u0275cmp=en.Xpm({type:re,selectors:[["app-map-grid-landsat"]],decls:11,vars:7,consts:[["class","text-center card",4,"ngIf"],[1,"flex","justify-content-center","align-content-center"],["for","period-type-land"],["id","period-type-land",1,"w-full",3,"options","ngModel","ngModelChange","onChange"],["for","vis-params-land"],["id","vis-params-land",1,"w-full",3,"options","ngModel","ngModelChange","onChange"],[1,"map-grid","mt-3"],["class","map-item",4,"ngFor","ngForOf"],[3,"lat","lon",4,"ngIf"],[1,"text-center","card"],[1,"map-item"],[1,"map-container",3,"id"],[3,"lat","lon"]],template:function(fe,_e){1&fe&&(en.YNc(0,jh,4,6,"h4",0),en.TgZ(1,"div",1)(2,"label",2),en._uU(3,"Period Type"),en.qZA(),en.TgZ(4,"p-selectButton",3),en.NdJ("ngModelChange",function(Xe){return _e.selectedLandsatPeriod=Xe})("onChange",function(){return _e.updateLandsatMaps()}),en.qZA(),en.TgZ(5,"label",4),en._uU(6,"Visualization Params"),en.qZA(),en.TgZ(7,"p-selectButton",5),en.NdJ("ngModelChange",function(Xe){return _e.selectedLandsatVisParam=Xe})("onChange",function(){return _e.updateLandsatMaps()}),en.qZA()(),en.TgZ(8,"div",6),en.YNc(9,$d,2,1,"div",7),en.qZA(),en.YNc(10,kf,1,2,"app-landsat-timeseries",8)),2&fe&&(en.Q6J("ngIf",_e.lat&&_e.lon),en.xp6(4),en.Q6J("options",_e.landsatPeriods)("ngModel",_e.selectedLandsatPeriod),en.xp6(3),en.Q6J("options",_e.landsatVisParams)("ngModel",_e.selectedLandsatVisParam),en.xp6(2),en.Q6J("ngForOf",_e.landsatMaps),en.xp6(1),en.Q6J("ngIf",_e.lat&&_e.lon))},dependencies:[Ri.sg,Ri.O5,Tf,hu.JJ,hu.On,gc,Ri.JJ],styles:[".map-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.map-item[_ngcontent-%COMP%]{flex:1 1 20%;margin:1px;text-align:center}.map-container[_ngcontent-%COMP%]{width:100%;height:300px}"]})}return re})(),np=(()=>{class re{static#e=this.\u0275fac=function(fe){return new(fe||re)};static#t=this.\u0275mod=en.oAB({type:re});static#n=this.\u0275inj=en.cJS({imports:[ne.Bz.forChild([{path:"",data:{breadcrumb:"Maps"},component:wf},{path:"sentinel",data:{breadcrumb:"Maps"},component:Fh},{path:"landsat",data:{breadcrumb:"Maps"},component:tp},{path:"**",redirectTo:"/notfound"}]),ne.Bz]})}return re})();var Js=da(3162);function nh(re,L){if(1&re&&en._UZ(0,"plotly-plot",1),2&re){const Z=en.oxw();en.Q6J("data",Z.plotlyData)("layout",Z.layout)}}let rp=(()=>{class re{constructor(Z){this.http=Z,this.layout={title:"MODIS 2 Timeseries",xaxis:{title:"Date",ticks:{color:"#495057"},grid:{color:"#ebedef"}},yaxis:{title:"NDVI",min:0,max:1.2,type:"linear"},yaxis2:{title:"Precipitation (mm)",overlaying:"y",side:"right",type:"linear"}}}ngOnChanges(Z){Z.lat&&Z.lon&&this.isValidLatLon()&&this.loadTimeseries()}isValidLatLon(){return void 0!==this.lat&&void 0!==this.lon&&!isNaN(this.lat)&&!isNaN(this.lon)}loadTimeseries(){this.http.get(`https://tiles.lapig.iesa.ufg.br/api/timeseries/modis/${this.lat}/${this.lon}`).pipe((0,Ks.K)(fe=>(console.error("Error fetching timeseries:",fe),(0,Bu._)(fe)))).subscribe(fe=>{console.log(fe),this.plotlyData=fe})}static#e=this.\u0275fac=function(fe){return new(fe||re)(en.Y36(Ha.eN))};static#t=this.\u0275cmp=en.Xpm({type:re,selectors:[["app-modis-timeseries"]],inputs:{lat:"lat",lon:"lon"},standalone:!0,features:[en.TTD,en.jDz],decls:1,vars:1,consts:[[3,"data","layout",4,"ngIf"],[3,"data","layout"]],template:function(fe,_e){1&fe&&en.YNc(0,nh,1,2,"plotly-plot",0),2&fe&&en.Q6J("ngIf",_e.plotlyData)},dependencies:[fu,pf,Ri.O5]})}return re})();var Yl=da(4713);let r0=(()=>{class re extends Yl.s{static \u0275fac=(()=>{let Z;return function(_e){return(Z||(Z=en.n5z(re)))(_e||re)}})();static \u0275cmp=en.Xpm({type:re,selectors:[["ChevronLeftIcon"]],standalone:!0,features:[en.qOj,en.jDz],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M9.61296 13C9.50997 13.0005 9.40792 12.9804 9.3128 12.9409C9.21767 12.9014 9.13139 12.8433 9.05902 12.7701L3.83313 7.54416C3.68634 7.39718 3.60388 7.19795 3.60388 6.99022C3.60388 6.78249 3.68634 6.58325 3.83313 6.43628L9.05902 1.21039C9.20762 1.07192 9.40416 0.996539 9.60724 1.00012C9.81032 1.00371 10.0041 1.08597 10.1477 1.22959C10.2913 1.37322 10.3736 1.56698 10.3772 1.77005C10.3808 1.97313 10.3054 2.16968 10.1669 2.31827L5.49496 6.99022L10.1669 11.6622C10.3137 11.8091 10.3962 12.0084 10.3962 12.2161C10.3962 12.4238 10.3137 12.6231 10.1669 12.7701C10.0945 12.8433 10.0083 12.9014 9.91313 12.9409C9.81801 12.9804 9.71596 13.0005 9.61296 13Z","fill","currentColor"]],template:function(fe,_e){1&fe&&(en.O4$(),en.TgZ(0,"svg",0),en._UZ(1,"path",1),en.qZA()),2&fe&&(en.Tol(_e.getClassNames()),en.uIk("aria-label",_e.ariaLabel)("aria-hidden",_e.ariaHidden)("role",_e.role))},encapsulation:2})}return re})(),ip=(()=>{class re extends Yl.s{static \u0275fac=(()=>{let Z;return function(_e){return(Z||(Z=en.n5z(re)))(_e||re)}})();static \u0275cmp=en.Xpm({type:re,selectors:[["ChevronRightIcon"]],standalone:!0,features:[en.qOj,en.jDz],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M4.38708 13C4.28408 13.0005 4.18203 12.9804 4.08691 12.9409C3.99178 12.9014 3.9055 12.8433 3.83313 12.7701C3.68634 12.6231 3.60388 12.4238 3.60388 12.2161C3.60388 12.0084 3.68634 11.8091 3.83313 11.6622L8.50507 6.99022L3.83313 2.31827C3.69467 2.16968 3.61928 1.97313 3.62287 1.77005C3.62645 1.56698 3.70872 1.37322 3.85234 1.22959C3.99596 1.08597 4.18972 1.00371 4.3928 1.00012C4.59588 0.996539 4.79242 1.07192 4.94102 1.21039L10.1669 6.43628C10.3137 6.58325 10.3962 6.78249 10.3962 6.99022C10.3962 7.19795 10.3137 7.39718 10.1669 7.54416L4.94102 12.7701C4.86865 12.8433 4.78237 12.9014 4.68724 12.9409C4.59212 12.9804 4.49007 13.0005 4.38708 13Z","fill","currentColor"]],template:function(fe,_e){1&fe&&(en.O4$(),en.TgZ(0,"svg",0),en._UZ(1,"path",1),en.qZA()),2&fe&&(en.Tol(_e.getClassNames()),en.uIk("aria-label",_e.ariaLabel)("aria-hidden",_e.ariaHidden)("role",_e.role))},encapsulation:2})}return re})();var mc=da(7778),Gc=da(3259);let R0=(()=>{class re{static \u0275fac=function(fe){return new(fe||re)};static \u0275mod=en.oAB({type:re});static \u0275inj=en.cJS({imports:[Ri.ez,Ds.m8,Gc.z,Ku.T,mc.q,r0,ip,Ds.m8]})}return re})();hc.plotlyjs=Js;let D0=(()=>{class re{static#e=this.\u0275fac=function(fe){return new(fe||re)};static#t=this.\u0275mod=en.oAB({type:re});static#n=this.\u0275inj=en.cJS({imports:[Ri.ez,np,Qf,hc,rp,Tf,Zf,R0,hu.u5,xf]})}return re})()},3162:Xh=>{self,Xh.exports=function(){var bc={79288:function(ne,F,e){"use strict";var M=e(3400),k={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var o in k){var T=o.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");M.addStyleRule(T,k[o])}},86712:function(ne,F,e){"use strict";ne.exports=e(84224)},37240:function(ne,F,e){"use strict";ne.exports=e(51132)},29744:function(ne,F,e){"use strict";ne.exports=e(94456)},29352:function(ne,F,e){"use strict";ne.exports=e(67244)},96144:function(ne,F,e){"use strict";ne.exports=e(97776)},53219:function(ne,F,e){"use strict";ne.exports=e(61712)},4624:function(ne,F,e){"use strict";ne.exports=e(95856)},54543:function(ne,F,e){"use strict";ne.exports=e(54272)},45e3:function(ne,F,e){"use strict";ne.exports=e(85404)},62300:function(ne,F,e){"use strict";ne.exports=e(26048)},6920:function(ne,F,e){"use strict";ne.exports=e(66240)},10264:function(ne,F,e){"use strict";ne.exports=e(40448)},32016:function(ne,F,e){"use strict";ne.exports=e(64884)},27528:function(ne,F,e){"use strict";ne.exports=e(15088)},75556:function(ne,F,e){"use strict";ne.exports=e(76744)},39204:function(ne,F,e){"use strict";ne.exports=e(94704)},73996:function(ne,F,e){"use strict";ne.exports=e(62396)},16489:function(ne,F,e){"use strict";ne.exports=e(32028)},5e3:function(ne,F,e){"use strict";ne.exports=e(81932)},77280:function(ne,F,e){"use strict";ne.exports=e(45536)},33992:function(ne,F,e){"use strict";ne.exports=e(42600)},17600:function(ne,F,e){"use strict";ne.exports=e(21536)},49116:function(ne,F,e){"use strict";ne.exports=e(65664)},46808:function(ne,F,e){"use strict";ne.exports=e(29044)},36168:function(ne,F,e){"use strict";ne.exports=e(48928)},13792:function(ne,F,e){"use strict";var M=e(32016);M.register([e(37240),e(29352),e(5e3),e(33992),e(17600),e(49116),e(6920),e(67484),e(79440),e(39204),e(83096),e(36168),e(20260),e(63560),e(65832),e(46808),e(73996),e(48824),e(89904),e(25120),e(13752),e(4340),e(62300),e(29800),e(8363),e(54543),e(86636),e(42192),e(32140),e(77280),e(89296),e(56816),e(70192),e(45e3),e(27528),e(84764),e(3920),e(50248),e(4624),e(69967),e(10264),e(86152),e(53219),e(81604),e(63796),e(29744),e(89336),e(86712),e(75556),e(16489),e(97312),e(96144)]),ne.exports=M},3920:function(ne,F,e){"use strict";ne.exports=e(43480)},25120:function(ne,F,e){"use strict";ne.exports=e(6296)},4340:function(ne,F,e){"use strict";ne.exports=e(7404)},86152:function(ne,F,e){"use strict";ne.exports=e(65456)},56816:function(ne,F,e){"use strict";ne.exports=e(22020)},89296:function(ne,F,e){"use strict";ne.exports=e(29928)},20260:function(ne,F,e){"use strict";ne.exports=e(75792)},32140:function(ne,F,e){"use strict";ne.exports=e(156)},84764:function(ne,F,e){"use strict";ne.exports=e(45499)},48824:function(ne,F,e){"use strict";ne.exports=e(3296)},69967:function(ne,F,e){"use strict";ne.exports=e(4184)},8363:function(ne,F,e){"use strict";ne.exports=e(36952)},86636:function(ne,F,e){"use strict";ne.exports=e(38983)},70192:function(ne,F,e){"use strict";ne.exports=e(11572)},81604:function(ne,F,e){"use strict";ne.exports=e(76924)},63796:function(ne,F,e){"use strict";ne.exports=e(62944)},89336:function(ne,F,e){"use strict";ne.exports=e(95443)},67484:function(ne,F,e){"use strict";ne.exports=e(34864)},97312:function(ne,F,e){"use strict";ne.exports=e(76272)},42192:function(ne,F,e){"use strict";ne.exports=e(97924)},29800:function(ne,F,e){"use strict";ne.exports=e(15436)},63560:function(ne,F,e){"use strict";ne.exports=e(5621)},89904:function(ne,F,e){"use strict";ne.exports=e(91304)},50248:function(ne,F,e){"use strict";ne.exports=e(41724)},65832:function(ne,F,e){"use strict";ne.exports=e(31991)},79440:function(ne,F,e){"use strict";ne.exports=e(22869)},13752:function(ne,F,e){"use strict";ne.exports=e(67776)},83096:function(ne,F,e){"use strict";ne.exports=e(95952)},72196:function(ne){"use strict";ne.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},13916:function(ne,F,e){"use strict";var M=e(72196),k=e(25376),o=e(33816),T=e(31780).templatedArray;e(36208),ne.exports=T("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:k({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:M.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:M.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",o.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",o.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",o.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",o.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:k({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},90272:function(ne,F,e){"use strict";var M=e(3400),k=e(54460),o=e(23816).draw;function T(p){M.filterVisible(p._fullLayout.annotations).forEach(function(t){var i=k.getFromId(p,t.xref),r=k.getFromId(p,t.yref),n=k.getRefType(t.xref),a=k.getRefType(t.yref);t._extremes={},"range"===n&&_(t,i),"range"===a&&_(t,r)})}function _(p,l){var t,i=l._id,r=i.charAt(0),n=p[r],a=p["a"+r],f=p["_"+r+"padplus"],c=p["_"+r+"padminus"],y={x:1,y:-1}[r]*p[r+"shift"],d=3*p.arrowsize*p.arrowwidth||0,m=d+y,g=d-y,x=3*p.startarrowsize*p.arrowwidth||0,v=x+y,b=x-y;if(p["a"+r+"ref"]===p[r+"ref"]){var h=k.findExtremes(l,[l.r2c(n)],{ppadplus:m,ppadminus:g}),S=k.findExtremes(l,[l.r2c(a)],{ppadplus:Math.max(f,v),ppadminus:Math.max(c,b)});t={min:[h.min[0],S.min[0]],max:[h.max[0],S.max[0]]}}else v=a?v+a:v,b=a?b-a:b,t=k.findExtremes(l,[l.r2c(n)],{ppadplus:Math.max(f,m,v),ppadminus:Math.max(c,g,b)});p._extremes[i]=t}ne.exports=function(p){if(M.filterVisible(p._fullLayout.annotations).length&&p._fullData.length)return M.syncOrAsync([o,T],p)}},42300:function(ne,F,e){"use strict";var M=e(3400),k=e(24040),o=e(31780).arrayEditor;function T(p,l){var t,i,r,n,a,s,u,f=p._fullLayout.annotations,c=[],y=[],d=[],m=(l||[]).length;for(t=0;t<f.length;t++)if(n=(r=f[t]).clicktoshow){for(i=0;i<m;i++)if(s=(a=l[i]).xaxis,u=a.yaxis,s._id===r.xref&&u._id===r.yref&&s.d2r(a.x)===_(r._xclick,s)&&u.d2r(a.y)===_(r._yclick,u)){(r.visible?"onout"===n?y:d:c).push(t);break}i===m&&r.visible&&"onout"===n&&y.push(t)}return{on:c,off:y,explicitOff:d}}function _(p,l){return"log"===l.type?l.l2r(p):l.d2r(p)}ne.exports={hasClickToShow:function(p,l){var t=T(p,l);return t.on.length>0||t.explicitOff.length>0},onClick:function(p,l){var t,i,r=T(p,l),n=r.on,a=r.off.concat(r.explicitOff),s={},u=p._fullLayout.annotations;if(n.length||a.length){for(t=0;t<n.length;t++)(i=o(p.layout,"annotations",u[n[t]])).modifyItem("visible",!0),M.extendFlat(s,i.getUpdateObj());for(t=0;t<a.length;t++)(i=o(p.layout,"annotations",u[a[t]])).modifyItem("visible",!1),M.extendFlat(s,i.getUpdateObj());return k.call("update",p,{},s)}}}},87192:function(ne,F,e){"use strict";var M=e(3400),k=e(76308);ne.exports=function(o,T,_,p){p("opacity");var l=p("bgcolor"),t=p("bordercolor"),i=k.opacity(t);p("borderpad");var r=p("borderwidth"),n=p("showarrow");if(p("text",n?" ":_._dfltTitle.annotation),p("textangle"),M.coerceFont(p,"font",_.font),p("width"),p("align"),p("height")&&p("valign"),n){var a,s,u=p("arrowside");-1!==u.indexOf("end")&&(a=p("arrowhead"),s=p("arrowsize")),-1!==u.indexOf("start")&&(p("startarrowhead",a),p("startarrowsize",s)),p("arrowcolor",i?T.bordercolor:k.defaultLine),p("arrowwidth",2*(i&&r||1)),p("standoff"),p("startstandoff")}var f=p("hovertext"),c=_.hoverlabel||{};if(f){var y=p("hoverlabel.bgcolor",c.bgcolor||(k.opacity(l)?k.rgb(l):k.defaultLine)),d=p("hoverlabel.bordercolor",c.bordercolor||k.contrast(y)),m=M.extendFlat({},c.font);m.color||(m.color=d),M.coerceFont(p,"hoverlabel.font",m)}p("captureevents",!!f)}},26828:function(ne,F,e){"use strict";var M=e(38248),k=e(36896);ne.exports=function(o,T,_,p){T=T||{};var l="log"===_&&"linear"===T.type;if(l||"linear"===_&&"log"===T.type)for(var i,r,n=o._fullLayout.annotations,a=T._id.charAt(0),s=0;s<n.length;s++)r="annotations["+s+"].",(i=n[s])[a+"ref"]===T._id&&u(a),i["a"+a+"ref"]===T._id&&u("a"+a);function u(f){var c=i[f],y=null;y=l?k(c,T.range):Math.pow(10,c),M(y)||(y=null),p(r+f,y)}}},45216:function(ne,F,e){"use strict";var M=e(3400),k=e(54460),o=e(51272),T=e(87192),_=e(13916);function p(l,t,i){function r(S,w){return M.coerce(l,t,_,S,w)}var n=r("visible"),a=r("clicktoshow");if(n||a){T(l,t,i,r);for(var s=t.showarrow,u=["x","y"],f=[-10,-30],c={_fullLayout:i},y=0;y<2;y++){var d=u[y],m=k.coerceRef(l,t,c,d,"","paper");if("paper"!==m&&k.getFromId(c,m)._annIndices.push(t._index),k.coercePosition(t,c,r,m,d,.5),s){var g="a"+d,x=k.coerceRef(l,t,c,g,"pixel",["pixel","paper"]);"pixel"!==x&&x!==m&&(x=t[g]="pixel"),k.coercePosition(t,c,r,x,g,"pixel"===x?f[y]:.4)}r(d+"anchor"),r(d+"shift")}if(M.noneOrAll(l,t,["x","y"]),s&&M.noneOrAll(l,t,["ax","ay"]),a){var b=r("xclick"),h=r("yclick");t._xclick=void 0===b?t.x:k.cleanPosition(b,c,t.xref),t._yclick=void 0===h?t.y:k.cleanPosition(h,c,t.yref)}}}ne.exports=function(l,t){o(l,t,{name:"annotations",handleItemDefaults:p})}},23816:function(ne,F,e){"use strict";var M=e(33428),k=e(24040),o=e(7316),T=e(3400),_=T.strTranslate,p=e(54460),l=e(76308),t=e(43616),i=e(93024),r=e(72736),n=e(93972),a=e(86476),s=e(31780).arrayEditor,u=e(33652);function f(d,m){var g=d._fullLayout.annotations[m]||{},x=p.getFromId(d,g.xref),v=p.getFromId(d,g.yref);x&&x.setScale(),v&&v.setScale(),y(d,g,m,!1,x,v)}function c(d,m,g,x,v){var b=v[g],h=v[g+"ref"],S=-1!==g.indexOf("y"),w="domain"===p.getRefType(h),E=S?x.h:x.w;return d?w?b+(S?-m:m)/d._length:d.p2r(d.r2p(b)+m):b+(S?-m:m)/E}function y(d,m,g,x,v,b){var h,S,w=d._fullLayout,E=d._fullLayout._size,P=d._context.edits;x?(h="annotation-"+x,S=x+".annotations"):(h="annotation",S="annotations");var I=s(d.layout,S,m),O=I.modifyBase,z=I.modifyItem,U=I.getUpdateObj;w._infolayer.selectAll("."+h+'[data-index="'+g+'"]').remove();var R="clip"+w._uid+"_ann"+g;if(m._input&&!1!==m.visible){var j={x:{},y:{}},Y=+m.textangle||0,B=w._infolayer.append("g").classed(h,!0).attr("data-index",String(g)).style("opacity",m.opacity),V=B.append("g").classed("annotation-text-g",!0),q=P[m.showarrow?"annotationTail":"annotationPosition"],ie=m.captureevents||P.annotationText||q,te=V.append("g").style("pointer-events",ie?"all":null).call(n,"pointer").on("click",function(){d._dragging=!1,d.emit("plotly_clickannotation",Te(M.event))});m.hovertext&&te.on("mouseover",function(){var xe=m.hoverlabel,Ce=xe.font,Oe=this.getBoundingClientRect(),be=d.getBoundingClientRect();i.loneHover({x0:Oe.left-be.left,x1:Oe.right-be.left,y:(Oe.top+Oe.bottom)/2-be.top,text:m.hovertext,color:xe.bgcolor,borderColor:xe.bordercolor,fontFamily:Ce.family,fontSize:Ce.size,fontColor:Ce.color,fontWeight:Ce.weight,fontStyle:Ce.style,fontVariant:Ce.variant,fontShadow:Ce.fontShadow,fontLineposition:Ce.fontLineposition,fontTextcase:Ce.fontTextcase},{container:w._hoverlayer.node(),outerContainer:w._paper.node(),gd:d})}).on("mouseout",function(){i.loneUnhover(w._hoverlayer.node())});var ee=m.borderwidth,J=ee+m.borderpad,X=te.append("rect").attr("class","bg").style("stroke-width",ee+"px").call(l.stroke,m.bordercolor).call(l.fill,m.bgcolor),ae=m.width||m.height,ce=w._topclips.selectAll("#"+R).data(ae?[0]:[]);ce.enter().append("clipPath").classed("annclip",!0).attr("id",R).append("rect"),ce.exit().remove();var le=m.font,pe=w._meta?T.templateString(m.text,w._meta):m.text,we=te.append("text").classed("annotation-text",!0).text(pe);P.annotationText?we.call(r.makeEditable,{delegate:te,gd:d}).call(ye).on("edit",function(xe){m.text=xe,this.call(ye),z("text",xe),v&&v.autorange&&O(v._name+".autorange",!0),b&&b.autorange&&O(b._name+".autorange",!0),k.call("_guiRelayout",d,U())}):we.call(ye)}else M.selectAll("#"+R).remove();function Te(xe){var Ce={index:g,annotation:m._input,fullAnnotation:m,event:xe};return x&&(Ce.subplotId=x),Ce}function ye(xe){return xe.call(t.font,le).attr({"text-anchor":{left:"start",right:"end"}[m.align]||"middle"}),r.convertToTspans(xe,d,ve),xe}function ve(){var xe=we.selectAll("a");1===xe.size()&&xe.text()===we.text()&&te.insert("a",":first-child").attr({"xlink:xlink:href":xe.attr("xlink:href"),"xlink:xlink:show":xe.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(X.node());var Ce=te.select(".annotation-text-math-group"),Oe=!Ce.empty(),be=t.bBox((Oe?Ce:we).node()),ue=be.width,se=be.height,ge=m.width||ue,Ie=m.height||se,ke=Math.round(ge+2*J),Se=Math.round(Ie+2*J);function Pe(kt,vt){return"auto"===vt&&(vt=kt<.3333333333333333?"left":kt>.6666666666666666?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[vt]}for(var Fe=!1,Be=["x","y"],me=0;me<Be.length;me++){var Me,Le,Ne,Re,He,Ze=Be[me],nt=m[Ze+"ref"]||Ze,ft=m["a"+Ze+"ref"],ht={x:v,y:b}[Ze],Tt=(Y+("x"===Ze?0:-90))*Math.PI/180,At=ke*Math.cos(Tt),_t=Se*Math.sin(Tt),ot=Math.abs(At)+Math.abs(_t),it=m[Ze+"anchor"],Pt=m[Ze+"shift"]*("x"===Ze?1:-1),jt=j[Ze],Ut=p.getRefType(nt);if(ht&&"domain"!==Ut){var Rt=ht.r2fraction(m[Ze]);(Rt<0||Rt>1)&&(ft===nt?((Rt=ht.r2fraction(m["a"+Ze]))<0||Rt>1)&&(Fe=!0):Fe=!0),Me=ht._offset+ht.r2p(m[Ze]),Re=.5}else{var Je="domain"===Ut;"x"===Ze?(Ne=m[Ze],Me=Je?ht._offset+ht._length*Ne:Me=E.l+E.w*Ne):(Ne=1-m[Ze],Me=Je?ht._offset+ht._length*Ne:Me=E.t+E.h*Ne),Re=m.showarrow?.5:Ne}if(m.showarrow){jt.head=Me;var et=m["a"+Ze];if(He=At*Pe(.5,m.xanchor)-_t*Pe(.5,m.yanchor),ft===nt){var qe=p.getRefType(ft);"domain"===qe?("y"===Ze&&(et=1-et),jt.tail=ht._offset+ht._length*et):jt.tail="paper"===qe?"y"===Ze?E.t+E.h*(et=1-et):E.l+E.w*et:ht._offset+ht.r2p(et),Le=He}else jt.tail=Me+et,Le=He+et;jt.text=jt.tail+He;var $e=w["x"===Ze?"width":"height"];if("paper"===nt&&(jt.head=T.constrain(jt.head,1,$e-1)),"pixel"===ft){var pt=-Math.max(jt.tail-3,jt.text),ct=Math.min(jt.tail+3,jt.text)-$e;pt>0?(jt.tail+=pt,jt.text+=pt):ct>0&&(jt.tail-=ct,jt.text-=ct)}jt.tail+=Pt,jt.head+=Pt}else Le=He=ot*Pe(Re,it),jt.text=Me+He;jt.text+=Pt,He+=Pt,m["_"+Ze+"padplus"]=ot/2+(Le+=Pt),m["_"+Ze+"padminus"]=ot/2-Le,m["_"+Ze+"size"]=ot,m["_"+Ze+"shift"]=He}if(Fe)te.remove();else{var Ve=0,Ge=0;"left"!==m.align&&(Ve=(ge-ue)*("center"===m.align?.5:1)),"top"!==m.valign&&(Ge=(Ie-se)*("middle"===m.valign?.5:1)),Oe?Ce.select("svg").attr({x:J+Ve-1,y:J+Ge}).call(t.setClipUrl,ae?R:null,d):we.call(r.positionText,J+Ve-be.left,J+Ge-be.top).call(t.setClipUrl,ae?R:null,d),ce.select("rect").call(t.setRect,J,J,ge,Ie),X.call(t.setRect,ee/2,ee/2,ke-ee,Se-ee),te.call(t.setTranslate,Math.round(j.x.text-ke/2),Math.round(j.y.text-Se/2)),V.attr({transform:"rotate("+Y+","+j.x.text+","+j.y.text+")"});var yt,wt=function(kt,vt){B.selectAll(".annotation-arrow-g").remove();var Lt=j.x.head,St=j.y.head,Ot=j.x.tail+kt,Nt=j.y.tail+vt,Bt=j.x.text+kt,Vt=j.y.text+vt,nn=T.rotationXYMatrix(Y,Bt,Vt),gn=T.apply2DTransform(nn),Jt=T.apply2DTransform2(nn),an=+X.attr("width"),Xt=+X.attr("height"),Gn=Bt-.5*an,Dn=Gn+an,An=Vt-.5*Xt,cn=An+Xt,bn=[[Gn,An,Gn,cn],[Gn,cn,Dn,cn],[Dn,cn,Dn,An],[Dn,An,Gn,An]].map(Jt);if(!bn.reduce(function(dr,nr){return dr^!!T.segmentsIntersect(Lt,St,Lt+1e6,St+1e6,nr[0],nr[1],nr[2],nr[3])},!1)){bn.forEach(function(dr){var nr=T.segmentsIntersect(Ot,Nt,Lt,St,dr[0],dr[1],dr[2],dr[3]);nr&&(Ot=nr.x,Nt=nr.y)});var hn=m.arrowwidth,wn=m.arrowcolor,Ln=m.arrowside,Pn=B.append("g").style({opacity:l.opacity(wn)}).classed("annotation-arrow-g",!0),Nn=Pn.append("path").attr("d","M"+Ot+","+Nt+"L"+Lt+","+St).style("stroke-width",hn+"px").call(l.stroke,l.rgb(wn));if(u(Nn,Ln,m),P.annotationPosition&&Nn.node().parentNode&&!x){var jn=Lt,Fn=St;if(m.standoff){var Jn=Math.sqrt(Math.pow(Lt-Ot,2)+Math.pow(St-Nt,2));jn+=m.standoff*(Ot-Lt)/Jn,Fn+=m.standoff*(Nt-St)/Jn}var Zn,hr,rr=Pn.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Ot-jn)+","+(Nt-Fn),transform:_(jn,Fn)}).style("stroke-width",hn+6+"px").call(l.stroke,"rgba(0,0,0,0)").call(l.fill,"rgba(0,0,0,0)");a.init({element:rr.node(),gd:d,prepFn:function(){var dr=t.getTranslate(te);Zn=dr.x,hr=dr.y,v&&v.autorange&&O(v._name+".autorange",!0),b&&b.autorange&&O(b._name+".autorange",!0)},moveFn:function(dr,nr){var Sr=gn(Zn,hr),ln=Sr[0]+dr,dn=Sr[1]+nr;te.call(t.setTranslate,ln,dn),z("x",c(v,dr,"x",E,m)),z("y",c(b,nr,"y",E,m)),m.axref===m.xref&&z("ax",c(v,dr,"ax",E,m)),m.ayref===m.yref&&z("ay",c(b,nr,"ay",E,m)),Pn.attr("transform",_(dr,nr)),V.attr({transform:"rotate("+Y+","+ln+","+dn+")"})},doneFn:function(){k.call("_guiRelayout",d,U());var dr=document.querySelector(".js-notes-box-panel");dr&&dr.redraw(dr.selectedObj)}})}}};m.showarrow&&wt(0,0),q&&a.init({element:te.node(),gd:d,prepFn:function(){yt=V.attr("transform")},moveFn:function(kt,vt){var Lt="pointer";if(m.showarrow)z("ax",m.axref===m.xref?c(v,kt,"ax",E,m):m.ax+kt),z("ay",m.ayref===m.yref?c(b,vt,"ay",E.w,m):m.ay+vt),wt(kt,vt);else{if(x)return;var St,Ot;if(v)St=c(v,kt,"x",E,m);else{var Nt=m._xsize/E.w;St=a.align(m.x+(m._xshift-m.xshift)/E.w-Nt/2+kt/E.w,Nt,0,1,m.xanchor)}if(b)Ot=c(b,vt,"y",E,m);else{var Vt=m._ysize/E.h;Ot=a.align(m.y-(m._yshift+m.yshift)/E.h-Vt/2-vt/E.h,Vt,0,1,m.yanchor)}z("x",St),z("y",Ot),v&&b||(Lt=a.getCursor(v?.5:St,b?.5:Ot,m.xanchor,m.yanchor))}V.attr({transform:_(kt,vt)+yt}),n(te,Lt)},clickFn:function(kt,vt){m.captureevents&&d.emit("plotly_clickannotation",Te(vt))},doneFn:function(){n(te),k.call("_guiRelayout",d,U());var kt=document.querySelector(".js-notes-box-panel");kt&&kt.redraw(kt.selectedObj)}})}}}ne.exports={draw:function(d){var m=d._fullLayout;m._infolayer.selectAll(".annotation").remove();for(var g=0;g<m.annotations.length;g++)m.annotations[g].visible&&f(d,g);return o.previousPromises(d)},drawOne:f,drawRaw:y}},33652:function(ne,F,e){"use strict";var M=e(33428),k=e(76308),o=e(72196),T=e(3400),_=T.strScale,p=T.strRotate,l=T.strTranslate;ne.exports=function(t,i,r){var n,a,s,u,f=t.node(),c=o[r.arrowhead||0],y=o[r.startarrowhead||0],d=(r.arrowwidth||1)*(r.arrowsize||1),m=(r.arrowwidth||1)*(r.startarrowsize||1),g=i.indexOf("start")>=0,x=i.indexOf("end")>=0,v=c.backoff*d+r.standoff,b=y.backoff*m+r.startstandoff;if("line"===f.nodeName){n={x:+t.attr("x1"),y:+t.attr("y1")},a={x:+t.attr("x2"),y:+t.attr("y2")};var h=n.x-a.x,S=n.y-a.y;if(u=(s=Math.atan2(S,h))+Math.PI,v&&b&&v+b>Math.sqrt(h*h+S*S))return void B();if(v){if(v*v>h*h+S*S)return void B();var w=v*Math.cos(s),E=v*Math.sin(s);a.x+=w,a.y+=E,t.attr({x2:a.x,y2:a.y})}if(b){if(b*b>h*h+S*S)return void B();var P=b*Math.cos(s),I=b*Math.sin(s);n.x-=P,n.y-=I,t.attr({x1:n.x,y1:n.y})}}else if("path"===f.nodeName){var O=f.getTotalLength(),z="";if(O<v+b)return void B();var U=f.getPointAtLength(0),R=f.getPointAtLength(.1);s=Math.atan2(U.y-R.y,U.x-R.x),n=f.getPointAtLength(Math.min(b,O)),z="0px,"+b+"px,";var j=f.getPointAtLength(O),Y=f.getPointAtLength(O-.1);u=Math.atan2(j.y-Y.y,j.x-Y.x),a=f.getPointAtLength(Math.max(0,O-v)),t.style("stroke-dasharray",z+=O-(z?b+v:v)+"px,"+O+"px")}function B(){t.style("stroke-dasharray","0px,100px")}function V(q,ie,te,ee){q.path&&(q.noRotate&&(te=0),M.select(f.parentNode).append("path").attr({class:t.attr("class"),d:q.path,transform:l(ie.x,ie.y)+p(180*te/Math.PI)+_(ee)}).style({fill:k.rgb(r.arrowcolor),"stroke-width":0}))}g&&V(y,n,s,m),x&&V(c,a,u,d)}},79180:function(ne,F,e){"use strict";var M=e(23816),k=e(42300);ne.exports={moduleType:"component",name:"annotations",layoutAttributes:e(13916),supplyLayoutDefaults:e(45216),includeBasePlot:e(36632)("annotations"),calcAutorange:e(90272),draw:M.draw,drawOne:M.drawOne,drawRaw:M.drawRaw,hasClickToShow:k.hasClickToShow,onClick:k.onClick,convertCoords:e(26828)}},45899:function(ne,F,e){"use strict";var M=e(13916),k=e(67824).overrideAll,o=e(31780).templatedArray;ne.exports=k(o("annotation",{visible:M.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:M.xanchor,xshift:M.xshift,yanchor:M.yanchor,yshift:M.yshift,text:M.text,textangle:M.textangle,font:M.font,width:M.width,height:M.height,opacity:M.opacity,align:M.align,valign:M.valign,bgcolor:M.bgcolor,bordercolor:M.bordercolor,borderpad:M.borderpad,borderwidth:M.borderwidth,showarrow:M.showarrow,arrowcolor:M.arrowcolor,arrowhead:M.arrowhead,startarrowhead:M.startarrowhead,arrowside:M.arrowside,arrowsize:M.arrowsize,startarrowsize:M.startarrowsize,arrowwidth:M.arrowwidth,standoff:M.standoff,startstandoff:M.startstandoff,hovertext:M.hovertext,hoverlabel:M.hoverlabel,captureevents:M.captureevents}),"calc","from-root")},42456:function(ne,F,e){"use strict";var M=e(3400),k=e(54460);function o(T,_){var p=_.fullSceneLayout.domain,l=_.fullLayout._size,t={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};T._xa={},M.extendFlat(T._xa,t),k.setConvert(T._xa),T._xa._offset=l.l+p.x[0]*l.w,T._xa.l2p=function(){return.5*(1+T._pdata[0]/T._pdata[3])*l.w*(p.x[1]-p.x[0])},T._ya={},M.extendFlat(T._ya,t),k.setConvert(T._ya),T._ya._offset=l.t+(1-p.y[1])*l.h,T._ya.l2p=function(){return.5*(1-T._pdata[1]/T._pdata[3])*l.h*(p.y[1]-p.y[0])}}ne.exports=function(T){for(var _=T.fullSceneLayout.annotations,p=0;p<_.length;p++)o(_[p],T);T.fullLayout._infolayer.selectAll(".annotation-"+T.id).remove()}},52808:function(ne,F,e){"use strict";var M=e(3400),k=e(54460),o=e(51272),T=e(87192),_=e(45899);function p(l,t,i,r){function n(s,u){return M.coerce(l,t,_,s,u)}function a(s){var u=s+"axis",f={_fullLayout:{}};return f._fullLayout[u]=i[u],k.coercePosition(t,f,n,s,s,.5)}n("visible")&&(T(l,t,r.fullLayout,n),a("x"),a("y"),a("z"),M.noneOrAll(l,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",n("xanchor"),n("yanchor"),n("xshift"),n("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",n("ax",-10),n("ay",-30),M.noneOrAll(l,t,["ax","ay"])))}ne.exports=function(l,t,i){o(l,t,{name:"annotations",handleItemDefaults:p,fullLayout:i.fullLayout})}},71836:function(ne,F,e){"use strict";var M=e(23816).drawRaw,k=e(94424),o=["x","y","z"];ne.exports=function(T){for(var _=T.fullSceneLayout,p=T.dataScale,l=_.annotations,t=0;t<l.length;t++){for(var i=l[t],r=!1,n=0;n<3;n++){var a=o[n],u=_[a+"axis"].r2fraction(i[a]);if(u<0||u>1){r=!0;break}}r?T.fullLayout._infolayer.select(".annotation-"+T.id+'[data-index="'+t+'"]').remove():(i._pdata=k(T.glplot.cameraParams,[_.xaxis.r2l(i.x)*p[0],_.yaxis.r2l(i.y)*p[1],_.zaxis.r2l(i.z)*p[2]]),M(T.graphDiv,i,t,T.id,i._xa,i._ya))}}},56864:function(ne,F,e){"use strict";var M=e(24040),k=e(3400);ne.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e(45899)}}},layoutAttributes:e(45899),handleDefaults:e(52808),includeBasePlot:function(o,T){var _=M.subplotsRegistry.gl3d;if(_)for(var p=_.attrRegex,l=Object.keys(o),t=0;t<l.length;t++){var i=l[t];p.test(i)&&(o[i].annotations||[]).length&&(k.pushUnique(T._basePlotModules,_),k.pushUnique(T._subplots.gl3d,i))}},convert:e(42456),draw:e(71836)}},54976:function(ne,F,e){"use strict";ne.exports=e(38700),e(15168),e(67020),e(89792),e(55668),e(65168),e(2084),e(26368),e(24747),e(65616),e(30632),e(73040),e(1104),e(51456),e(4592),e(45348)},97776:function(ne,F,e){"use strict";var M=e(54976),k=e(3400),o=e(39032),T=o.EPOCHJD,_=o.ONEDAY,p={valType:"enumerated",values:k.sortObjectKeys(M.calendars),editType:"calc",dflt:"gregorian"},l=function(d,m,g,x){var v={};return v[g]=p,k.coerce(d,m,v,g,x)},t="##",i={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:t,w:t,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},r={};function n(d){return r[d]||(r[d]=M.instance(d))}function a(d){return k.extendFlat({},p,{description:d})}function s(d){return"Sets the calendar system to use with `"+d+"` date data."}var u={xcalendar:a(s("x"))},f=k.extendFlat({},u,{ycalendar:a(s("y"))}),c=k.extendFlat({},f,{zcalendar:a(s("z"))}),y=a(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));ne.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:f,bar:f,box:f,heatmap:f,contour:f,histogram:f,histogram2d:f,histogram2dcontour:f,scatter3d:c,surface:c,mesh3d:c,scattergl:f,ohlc:u,candlestick:u},layout:{calendar:a(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:y},yaxis:{calendar:y},scene:{xaxis:{calendar:y},yaxis:{calendar:y},zaxis:{calendar:y}},polar:{radialaxis:{calendar:y}}},transforms:{filter:{valuecalendar:a(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:a(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:p,handleDefaults:l,handleTraceDefaults:function(d,m,g,x){for(var v=0;v<g.length;v++)l(d,m,g[v]+"calendar",x.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:n,worldCalFmt:function(d,m,g){for(var x,v,b,h,S,w=Math.floor((m+.05)/_)+T,E=n(g).fromJD(w),P=0;-1!==(P=d.indexOf("%",P));)"0"===(x=d.charAt(P+1))||"-"===x||"_"===x?(b=3,v=d.charAt(P+2),"_"===x&&(x="-")):(v=x,x="0",b=2),(h=i[v])?(S=h===t?t:E.formatDate(h[x]),d=d.substr(0,P)+S+d.substr(P+b),P+=S.length):P+=b;return d}}},22548:function(ne,F){"use strict";F.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],F.defaultLine="#444",F.lightLine="#eee",F.background="#fff",F.borderLine="#BEC8D9",F.lightFraction=90.9090909090909},76308:function(ne,F,e){"use strict";var M=e(49760),k=e(38248),o=e(38116).isTypedArray,T=ne.exports={},_=e(22548);T.defaults=_.defaults;var p=T.defaultLine=_.defaultLine;T.lightLine=_.lightLine;var l=T.background=_.background;function t(i){if(k(i)||"string"!=typeof i)return i;var r=i.trim();if("rgb"!==r.substr(0,3))return i;var n=r.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return i;var a=n[1].trim().split(/\s*[\s,]\s*/),s="a"===r.charAt(3)&&4===a.length;if(!s&&3!==a.length)return i;for(var u=0;u<a.length;u++){if(!(a[u].length&&(a[u]=Number(a[u]),a[u]>=0)))return i;if(3===u)a[u]>1&&(a[u]=1);else if(a[u]>=1)return i}var f=Math.round(255*a[0])+", "+Math.round(255*a[1])+", "+Math.round(255*a[2]);return s?"rgba("+f+", "+a[3]+")":"rgb("+f+")"}T.tinyRGB=function(i){var r=i.toRgb();return"rgb("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+")"},T.rgb=function(i){return T.tinyRGB(M(i))},T.opacity=function(i){return i?M(i).getAlpha():0},T.addOpacity=function(i,r){var n=M(i).toRgb();return"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+r+")"},T.combine=function(i,r){var n=M(i).toRgb();if(1===n.a)return M(i).toRgbString();var a=M(r||l).toRgb(),s=1===a.a?a:{r:255*(1-a.a)+a.r*a.a,g:255*(1-a.a)+a.g*a.a,b:255*(1-a.a)+a.b*a.a};return M({r:s.r*(1-n.a)+n.r*n.a,g:s.g*(1-n.a)+n.g*n.a,b:s.b*(1-n.a)+n.b*n.a}).toRgbString()},T.interpolate=function(i,r,n){var a=M(i).toRgb(),s=M(r).toRgb();return M({r:n*a.r+(1-n)*s.r,g:n*a.g+(1-n)*s.g,b:n*a.b+(1-n)*s.b}).toRgbString()},T.contrast=function(i,r,n){var a=M(i);return 1!==a.getAlpha()&&(a=M(T.combine(i,l))),(a.isDark()?r?a.lighten(r):l:n?a.darken(n):p).toString()},T.stroke=function(i,r){var n=M(r);i.style({stroke:T.tinyRGB(n),"stroke-opacity":n.getAlpha()})},T.fill=function(i,r){var n=M(r);i.style({fill:T.tinyRGB(n),"fill-opacity":n.getAlpha()})},T.clean=function(i){if(i&&"object"==typeof i){var r,n,a,s,u=Object.keys(i);for(r=0;r<u.length;r++)if(s=i[a=u[r]],"color"===a.substr(a.length-5))if(Array.isArray(s))for(n=0;n<s.length;n++)s[n]=t(s[n]);else i[a]=t(s);else if("colorscale"===a.substr(a.length-10)&&Array.isArray(s))for(n=0;n<s.length;n++)Array.isArray(s[n])&&(s[n][1]=t(s[n][1]));else if(Array.isArray(s)){var f=s[0];if(!Array.isArray(f)&&f&&"object"==typeof f)for(n=0;n<s.length;n++)T.clean(s[n])}else s&&"object"==typeof s&&!o(s)&&T.clean(s)}}},42996:function(ne,F,e){"use strict";var M=e(94724),k=e(25376),o=e(92880).extendFlat,T=e(67824).overrideAll;ne.exports=T({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:M.linecolor,outlinewidth:M.linewidth,bordercolor:M.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:M.minor.tickmode,nticks:M.nticks,tick0:M.tick0,dtick:M.dtick,tickvals:M.tickvals,ticktext:M.ticktext,ticks:o({},M.ticks,{dflt:""}),ticklabeloverflow:o({},M.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:M.ticklen,tickwidth:M.tickwidth,tickcolor:M.tickcolor,ticklabelstep:M.ticklabelstep,showticklabels:M.showticklabels,labelalias:M.labelalias,tickfont:k({}),tickangle:M.tickangle,tickformat:M.tickformat,tickformatstops:M.tickformatstops,tickprefix:M.tickprefix,showtickprefix:M.showtickprefix,ticksuffix:M.ticksuffix,showticksuffix:M.showticksuffix,separatethousands:M.separatethousands,exponentformat:M.exponentformat,minexponent:M.minexponent,showexponent:M.showexponent,title:{text:{valType:"string"},font:k({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:k({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},63964:function(ne){"use strict";ne.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},64013:function(ne,F,e){"use strict";var M=e(3400),k=e(31780),o=e(26332),T=e(25404),_=e(95936),p=e(42568),l=e(42996);ne.exports=function(t,i,r){var n=k.newContainer(i,"colorbar"),a=t.colorbar||{};function s(z,U){return M.coerce(a,n,l,z,U)}var u=r.margin||{t:0,b:0,l:0,r:0},f=r.width-u.l-u.r,c=r.height-u.t-u.b,y="v"===s("orientation"),d=s("thicknessmode");s("thickness","fraction"===d?30/(y?f:c):30);var m=s("lenmode");s("len","fraction"===m?1:y?c:f);var g,x,v,b="paper"===s("yref"),h="paper"===s("xref"),S="left";y?(v="middle",S=h?"left":"right",g=h?1.02:1,x=.5):(v=b?"bottom":"top",S="center",g=.5,x=b?1.02:1),M.coerce(a,n,{x:{valType:"number",min:h?-2:0,max:h?3:1,dflt:g}},"x"),M.coerce(a,n,{y:{valType:"number",min:b?-2:0,max:b?3:1,dflt:x}},"y"),s("xanchor",S),s("xpad"),s("yanchor",v),s("ypad"),M.noneOrAll(a,n,["x","y"]),s("outlinecolor"),s("outlinewidth"),s("bordercolor"),s("borderwidth"),s("bgcolor");var w=M.coerce(a,n,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:y?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");s("ticklabeloverflow",-1!==w.indexOf("inside")?"hide past domain":"hide past div"),o(a,n,s,"linear");var E=r.font,P={noAutotickangles:!0,outerTicks:!1,font:E};-1!==w.indexOf("inside")&&(P.bgColor="black"),p(a,n,s,"linear",P),_(a,n,s,"linear",P),T(a,n,s,"linear",P),s("title.text",r._dfltTitle.colorbar);var I=n.showticklabels?n.tickfont:E,O=M.extendFlat({},E,{family:I.family,size:M.bigFont(I.size)});M.coerceFont(s,"title.font",O),s("title.side",y?"top":"right")}},37848:function(ne,F,e){"use strict";var M=e(33428),k=e(49760),o=e(7316),T=e(24040),_=e(54460),p=e(86476),l=e(3400),t=l.strTranslate,i=e(92880).extendFlat,r=e(93972),n=e(43616),a=e(76308),s=e(81668),u=e(72736),f=e(94288).flipScale,c=e(28336),y=e(37668),d=e(94724),m=e(84284),g=m.LINE_SPACING,x=m.FROM_TL,v=m.FROM_BR,b=e(63964).cn;ne.exports={draw:function(h){var S=h._fullLayout._infolayer.selectAll("g."+b.colorbar).data(function(w){var E,P,I,O,z=w._fullLayout,U=w.calcdata,R=[];function j(ae){return i(ae,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function Y(){"function"==typeof O.calc?O.calc(w,I,E):(E._fillgradient=P.reversescale?f(P.colorscale):P.colorscale,E._zrange=[P[O.min],P[O.max]])}for(var B=0;B<U.length;B++)if((I=U[B][0].trace)._module){var q=I._module.colorbar;if(!0===I.visible&&q)for(var ie=Array.isArray(q),te=ie?q:[q],ee=0;ee<te.length;ee++){var $=(O=te[ee]).container;(P=$?I[$]:I)&&P.showscale&&((E=j(P.colorbar))._id="cb"+I.uid+(ie&&$?"-"+$:""),E._traceIndex=I.index,E._propPrefix=($?$+".":"")+"colorbar.",E._meta=I._meta,Y(),R.push(E))}}for(var J in z._colorAxes)if((P=z[J]).showscale){var X=z._colorAxes[J];(E=j(P.colorbar))._id="cb"+J,E._propPrefix=J+".colorbar.",E._meta=z._meta,O={min:"cmin",max:"cmax"},"heatmap"!==X[0]&&(O.calc=(I=X[1])._module.colorbar.calc),Y(),R.push(E)}return R}(h),function(w){return w._id});S.enter().append("g").attr("class",function(w){return w._id}).classed(b.colorbar,!0),S.each(function(w){var E=M.select(this);l.ensureSingle(E,"rect",b.cbbg),l.ensureSingle(E,"g",b.cbfills),l.ensureSingle(E,"g",b.cblines),l.ensureSingle(E,"g",b.cbaxis,function(I){I.classed(b.crisp,!0)}),l.ensureSingle(E,"g",b.cbtitleunshift,function(I){I.append("g").classed(b.cbtitle,!0)}),l.ensureSingle(E,"rect",b.cboutline);var I,O,z,U,R,j,Y,B,P=function(I,O,z){var U="v"===O.orientation,R=O.len,j=O.lenmode,Y=O.thickness,B=O.thicknessmode,V=O.outlinewidth,q=O.borderwidth,ie=O.bgcolor,te=O.xanchor,ee=O.yanchor,$=O.xpad,J=O.ypad,X=O.x,ae=U?O.y:1-O.y,ce="paper"===O.yref,le="paper"===O.xref,pe=z._fullLayout,we=pe._size,Te=O._fillcolor,ye=O._line,ve=O.title,xe=ve.side,Ce=O._zrange||M.extent(("function"==typeof Te?Te:ye.color).domain()),Oe="function"==typeof ye.color?ye.color:function(){return ye.color},be="function"==typeof Te?Te:function(){return Te},ue=O._levels,se=function(qe,$e,pt){var ct,Ve,Ge=$e._levels,ut=[],Qe=[],yt=Ge.end+Ge.size/100,wt=Ge.size,kt=1.001*pt[0]-.001*pt[1],vt=1.001*pt[1]-.001*pt[0];for(Ve=0;Ve<1e5&&(ct=Ge.start+Ve*wt,!(wt>0?ct>=yt:ct<=yt));Ve++)ct>kt&&ct<vt&&ut.push(ct);if($e._fillgradient)Qe=[0];else if("function"==typeof $e._fillcolor){var Lt=$e._filllevels;if(Lt)for(yt=Lt.end+Lt.size/100,wt=Lt.size,Ve=0;Ve<1e5&&(ct=Lt.start+Ve*wt,!(wt>0?ct>=yt:ct<=yt));Ve++)ct>pt[0]&&ct<pt[1]&&Qe.push(ct);else(Qe=ut.map(function(St){return St-Ge.size/2})).push(Qe[Qe.length-1]+Ge.size)}else $e._fillcolor&&"string"==typeof $e._fillcolor&&(Qe=[0]);return Ge.size<0&&(ut.reverse(),Qe.reverse()),{line:ut,fill:Qe}}(0,O,Ce),ge=se.fill,Ie=se.line,ke=Math.round(Y*("fraction"===B?U?we.w:we.h:1)),Se=ke/(U?we.w:we.h),Pe=Math.round(R*("fraction"===j?U?we.h:we.w:1)),Fe=Pe/(U?we.h:we.w),Be=le?we.w:z._fullLayout.width,me=ce?we.h:z._fullLayout.height,Me=Math.round(U?X*Be+$:ae*me+J),Le={center:.5,right:1}[te]||0,Ne={top:1,middle:.5}[ee]||0,Re=U?X-Le*Se:ae-Ne*Se,He=U?ae-Ne*Fe:X-Le*Fe,Ze=Math.round(U?me*(1-He):Be*He);O._lenFrac=Fe,O._thickFrac=Se,O._uFrac=Re,O._vFrac=He;var nt=O._axis=function(qe,$e,pt){var ct=qe._fullLayout,Ve="v"===$e.orientation,Ge={type:"linear",range:pt,tickmode:$e.tickmode,nticks:$e.nticks,tick0:$e.tick0,dtick:$e.dtick,tickvals:$e.tickvals,ticktext:$e.ticktext,ticks:$e.ticks,ticklen:$e.ticklen,tickwidth:$e.tickwidth,tickcolor:$e.tickcolor,showticklabels:$e.showticklabels,labelalias:$e.labelalias,ticklabelposition:$e.ticklabelposition,ticklabeloverflow:$e.ticklabeloverflow,ticklabelstep:$e.ticklabelstep,tickfont:$e.tickfont,tickangle:$e.tickangle,tickformat:$e.tickformat,exponentformat:$e.exponentformat,minexponent:$e.minexponent,separatethousands:$e.separatethousands,showexponent:$e.showexponent,showtickprefix:$e.showtickprefix,tickprefix:$e.tickprefix,showticksuffix:$e.showticksuffix,ticksuffix:$e.ticksuffix,title:$e.title,showline:!0,anchor:"free",side:Ve?"right":"bottom",position:1},ut=Ve?"y":"x",Qe={type:"linear",_id:ut+$e._id},yt={letter:ut,font:ct.font,noAutotickangles:"y"===ut,noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:ct.calendar};function wt(kt,vt){return l.coerce(Ge,Qe,d,kt,vt)}return c(Ge,Qe,wt,yt,ct),y(Ge,Qe,wt,yt),Qe}(z,O,Ce);nt.position=Se+(U?X+$/we.w:ae+J/we.h);var ft=-1!==["top","bottom"].indexOf(xe);if(U&&ft&&(nt.title.side=xe,nt.titlex=X+$/we.w,nt.titley=He+("top"===ve.side?Fe-J/we.h:J/we.h)),U||ft||(nt.title.side=xe,nt.titley=ae+J/we.h,nt.titlex=He+$/we.w),ye.color&&"auto"===O.tickmode){nt.tickmode="linear",nt.tick0=ue.start;var ht=ue.size,Tt=l.constrain(Pe/50,4,15)+1,At=(Ce[1]-Ce[0])/((O.nticks||Tt)*ht);if(At>1){var _t=Math.pow(10,Math.floor(Math.log(At)/Math.LN10));ht*=_t*l.roundUp(At/_t,[2,5,10]),(Math.abs(ue.start)/ue.size+1e-6)%1<2e-6&&(nt.tick0=0)}nt.dtick=ht}nt.domain=U?[He+J/we.h,He+Fe-J/we.h]:[He+$/we.w,He+Fe-$/we.w],nt.setScale(),I.attr("transform",t(Math.round(we.l),Math.round(we.t)));var ot,it=I.select("."+b.cbtitleunshift).attr("transform",t(-Math.round(we.l),-Math.round(we.t))),Pt=nt.ticklabelposition,jt=nt.title.font.size,Ut=I.select("."+b.cbaxis),Rt=0,Je=0;function et(qe,$e){var pt={propContainer:nt,propName:O._propPrefix+"title",traceIndex:O._traceIndex,_meta:O._meta,placeholder:pe._dfltTitle.colorbar,containerGroup:I.select("."+b.cbtitle)},ct="h"===qe.charAt(0)?qe.substr(1):"h"+qe;I.selectAll("."+ct+",."+ct+"-math-group").remove(),s.draw(z,qe,i(pt,$e||{}))}return l.syncOrAsync([o.previousPromises,function(){var qe,$e;(U&&ft||!U&&!ft)&&("top"===xe&&(qe=$+we.l+Be*X,$e=J+we.t+me*(1-He-Fe)+3+.75*jt),"bottom"===xe&&(qe=$+we.l+Be*X,$e=J+we.t+me*(1-He)-3-.25*jt),"right"===xe&&($e=J+we.t+me*ae+3+.75*jt,qe=$+we.l+Be*He),et(nt._id+"title",{attributes:{x:qe,y:$e,"text-anchor":U?"start":"middle"}}))},function(){if(!U&&!ft||U&&ft){var qe,$e=I.select("."+b.cbtitle),pt=$e.select("text"),ct=[-V/2,V/2],Ve=$e.select(".h"+nt._id+"title-math-group").node(),Ge=15.6;if(pt.node()&&(Ge=parseInt(pt.node().style.fontSize,10)*g),Ve?(qe=n.bBox(Ve),Je=qe.width,(Rt=qe.height)>Ge&&(ct[1]-=(Rt-Ge)/2)):pt.node()&&!pt.classed(b.jsPlaceholder)&&(qe=n.bBox(pt.node()),Je=qe.width,Rt=qe.height),U){if(Rt){if(Rt+=5,"top"===xe)nt.domain[1]-=Rt/we.h,ct[1]*=-1;else{nt.domain[0]+=Rt/we.h;var ut=u.lineCount(pt);ct[1]+=(1-ut)*Ge}$e.attr("transform",t(ct[0],ct[1])),nt.setScale()}}else Je&&("right"===xe&&(nt.domain[0]+=(Je+jt/2)/we.w),$e.attr("transform",t(ct[0],ct[1])),nt.setScale())}I.selectAll("."+b.cbfills+",."+b.cblines).attr("transform",U?t(0,Math.round(we.h*(1-nt.domain[1]))):t(Math.round(we.w*nt.domain[0]),0)),Ut.attr("transform",U?t(0,Math.round(-we.t)):t(Math.round(-we.l),0));var Qe=I.select("."+b.cbfills).selectAll("rect."+b.cbfill).attr("style","").data(ge);Qe.enter().append("rect").classed(b.cbfill,!0).attr("style",""),Qe.exit().remove();var yt=Ce.map(nt.c2p).map(Math.round).sort(function(St,Ot){return St-Ot});Qe.each(function(St,Ot){var Nt=[0===Ot?Ce[0]:(ge[Ot]+ge[Ot-1])/2,Ot===ge.length-1?Ce[1]:(ge[Ot]+ge[Ot+1])/2].map(nt.c2p).map(Math.round);U&&(Nt[1]=l.constrain(Nt[1]+(Nt[1]>Nt[0])?1:-1,yt[0],yt[1]));var Bt=M.select(this).attr(U?"x":"y",Me).attr(U?"y":"x",M.min(Nt)).attr(U?"width":"height",Math.max(ke,2)).attr(U?"height":"width",Math.max(M.max(Nt)-M.min(Nt),2));if(O._fillgradient)n.gradient(Bt,z,O._id,U?"vertical":"horizontalreversed",O._fillgradient,"fill");else{var Vt=be(St).replace("e-","");Bt.attr("fill",k(Vt).toHexString())}});var wt=I.select("."+b.cblines).selectAll("path."+b.cbline).data(ye.color&&ye.width?Ie:[]);wt.enter().append("path").classed(b.cbline,!0),wt.exit().remove(),wt.each(function(St){var Ot=Me,Nt=Math.round(nt.c2p(St))+ye.width/2%1;M.select(this).attr("d","M"+(U?Ot+","+Nt:Nt+","+Ot)+(U?"h":"v")+ke).call(n.lineGroupStyle,ye.width,Oe(St),ye.dash)}),Ut.selectAll("g."+nt._id+"tick,path").remove();var kt=Me+ke+(V||0)/2-("outside"===O.ticks?1:0),vt=_.calcTicks(nt),Lt=_.getTickSigns(nt)[2];return _.drawTicks(z,nt,{vals:"inside"===nt.ticks?_.clipEnds(nt,vt):vt,layer:Ut,path:_.makeTickPath(nt,kt,Lt),transFn:_.makeTransTickFn(nt)}),_.drawLabels(z,nt,{vals:vt,layer:Ut,transFn:_.makeTransTickLabelFn(nt),labelFns:_.makeLabelFns(nt,kt)})},function(){if(U&&!ft||!U&&ft){var qe,$e,pt=nt.position||0,ct=nt._offset+nt._length/2;if("right"===xe)$e=ct,qe=we.l+Be*pt+10+jt*(nt.showticklabels?1:.5);else if(qe=ct,"bottom"===xe&&($e=we.t+me*pt+10+(-1===Pt.indexOf("inside")?nt.tickfont.size:0)+("intside"!==nt.ticks&&O.ticklen||0)),"top"===xe){var Ve=ve.text.split("<br>").length;$e=we.t+me*pt+10-ke-g*jt*Ve}et((U?"h":"v")+nt._id+"title",{avoid:{selection:M.select(z).selectAll("g."+nt._id+"tick"),side:xe,offsetTop:U?0:we.t,offsetLeft:U?we.l:0,maxShift:U?pe.width:pe.height},attributes:{x:qe,y:$e,"text-anchor":"middle"},transform:{rotate:U?-90:0,offset:0}})}},o.previousPromises,function(){var qe,$e=ke+V/2;-1===Pt.indexOf("inside")&&(qe=n.bBox(Ut.node()),$e+=U?qe.width:qe.height),ot=it.select("text");var pt=0,ct=U&&"top"===xe,Ve=!U&&"right"===xe,Ge=0;if(ot.node()&&!ot.classed(b.jsPlaceholder)){var ut,Qe=it.select(".h"+nt._id+"title-math-group").node();Qe&&(U&&ft||!U&&!ft)?(pt=(qe=n.bBox(Qe)).width,ut=qe.height):(pt=(qe=n.bBox(it.node())).right-we.l-(U?Me:Ze),ut=qe.bottom-we.t-(U?Ze:Me),U||"top"!==xe||($e+=qe.height,Ge=qe.height)),Ve&&(ot.attr("transform",t(pt/2+jt/2,0)),pt*=2),$e=Math.max($e,U?pt:ut)}var yt=2*(U?$:J)+$e+q+V/2,wt=0;!U&&ve.text&&"bottom"===ee&&ae<=0&&(yt+=wt=yt/2,Ge+=wt),pe._hColorbarMoveTitle=wt,pe._hColorbarMoveCBTitle=Ge;var kt=q+V,vt=(U?Me:Ze)-kt/2-(U?$:0),Lt=(U?Ze:Me)-(U?Pe:J+Ge-wt);I.select("."+b.cbbg).attr("x",vt).attr("y",Lt).attr(U?"width":"height",Math.max(yt-wt,2)).attr(U?"height":"width",Math.max(Pe+kt,2)).call(a.fill,ie).call(a.stroke,O.bordercolor).style("stroke-width",q);var St=Ve?Math.max(pt-10,0):0;I.selectAll("."+b.cboutline).attr("x",(U?Me:Ze+$)+St).attr("y",(U?Ze+J-Pe:Me)+(ct?Rt:0)).attr(U?"width":"height",Math.max(ke,2)).attr(U?"height":"width",Math.max(Pe-(U?2*J+Rt:2*$+St),2)).call(a.stroke,O.outlinecolor).style({fill:"none","stroke-width":V});var Ot=U?Le*yt:0,Nt=U?0:(1-Ne)*yt-Ge;if(I.attr("transform",t(Ot=le?we.l-Ot:-Ot,Nt=ce?we.t-Nt:-Nt)),!U&&(q||k(ie).getAlpha()&&!k.equals(pe.paper_bgcolor,ie))){var Bt=Ut.selectAll("text"),Vt=Bt[0].length,nn=I.select("."+b.cbbg).node(),gn=n.bBox(nn),Jt=n.getTranslate(I);Bt.each(function(Ln,Pn){var Nn=Vt-1;if(0===Pn||Pn===Nn){var jn,Fn=n.bBox(this),Jn=n.getTranslate(this);Pn===Nn?(jn=gn.right+Jt.x+Ze-q-2+X-(Fn.right+Jn.x))>0&&(jn=0):0===Pn&&(jn=gn.left+Jt.x+Ze+q+2-(Fn.left+Jn.x))<0&&(jn=0),jn&&(Vt<3?this.setAttribute("transform","translate("+jn+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var an={},Xt=x[te],Gn=v[te],Dn=x[ee],An=v[ee],cn=yt-ke;U?("pixels"===j?(an.y=ae,an.t=Pe*Dn,an.b=Pe*An):(an.t=an.b=0,an.yt=ae+R*Dn,an.yb=ae-R*An),"pixels"===B?(an.x=X,an.l=yt*Xt,an.r=yt*Gn):(an.l=cn*Xt,an.r=cn*Gn,an.xl=X-Y*Xt,an.xr=X+Y*Gn)):("pixels"===j?(an.x=X,an.l=Pe*Xt,an.r=Pe*Gn):(an.l=an.r=0,an.xl=X+R*Xt,an.xr=X-R*Gn),"pixels"===B?(an.y=1-ae,an.t=yt*Dn,an.b=yt*An):(an.t=cn*Dn,an.b=cn*An,an.yt=ae-Y*Dn,an.yb=ae+Y*An));var bn=O.y<.5?"b":"t",hn=O.x<.5?"l":"r";z._fullLayout._reservedMargin[O._id]={};var wn={r:pe.width-vt-Ot,l:vt+an.r,b:pe.height-Lt-Nt,t:Lt+an.b};le&&ce?o.autoMargin(z,O._id,an):le?z._fullLayout._reservedMargin[O._id][bn]=wn[bn]:ce||U?z._fullLayout._reservedMargin[O._id][hn]=wn[hn]:z._fullLayout._reservedMargin[O._id][bn]=wn[bn]}],z)}(E,w,h);P&&P.then&&(h._promises||[]).push(P),h._context.edits.colorbarPosition&&(Y="v"===(O=w).orientation,B=(z=h)._fullLayout._size,p.init({element:(I=E).node(),gd:z,prepFn:function(){U=I.attr("transform"),r(I)},moveFn:function(V,q){I.attr("transform",U+t(V,q)),R=p.align((Y?O._uFrac:O._vFrac)+V/B.w,Y?O._thickFrac:O._lenFrac,0,1,O.xanchor),j=p.align((Y?O._vFrac:1-O._uFrac)-q/B.h,Y?O._lenFrac:O._thickFrac,0,1,O.yanchor);var ie=p.getCursor(R,j,O.xanchor,O.yanchor);r(I,ie)},doneFn:function(){if(r(I),void 0!==R&&void 0!==j){var V={};V[O._propPrefix+"x"]=R,V[O._propPrefix+"y"]=j,void 0!==O._traceIndex?T.call("_guiRestyle",z,V,O._traceIndex):T.call("_guiRelayout",z,V)}}}))}),S.exit().each(function(w){o.autoMargin(h,w._id)}).remove(),S.order()}}},90553:function(ne,F,e){"use strict";var M=e(3400);ne.exports=function(k){return M.isPlainObject(k.colorbar)}},55080:function(ne,F,e){"use strict";ne.exports={moduleType:"component",name:"colorbar",attributes:e(42996),supplyDefaults:e(64013),draw:e(37848).draw,hasColorbar:e(90553)}},49084:function(ne,F,e){"use strict";var M=e(42996),k=e(53756).counter,o=e(95376),T=e(88304).scales;function _(p){return"`"+p+"`"}o(T),ne.exports=function(p,l){p=p||"";var t,i=(l=l||{}).cLetter||"c",r="noScale"in l?l.noScale:"marker.line"===p,n="showScaleDflt"in l?l.showScaleDflt:"z"===i,a="string"==typeof l.colorscaleDflt?T[l.colorscaleDflt]:null,s=l.editTypeOverride||"",u=p?p+".":"";"colorAttr"in l?t=l.colorAttr:_(u+(t={z:"z",c:"color"}[i]));var f=i+"auto",c=i+"min",y=i+"max",d=i+"mid",m=(_(u+f),_(u+c),_(u+y),{});m[c]=m[y]=void 0;var g={};g[f]=!1;var x={};return"color"===t&&(x.color={valType:"color",arrayOk:!0,editType:s||"style"},l.anim&&(x.color.anim=!0)),x[f]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:m},x[c]={valType:"number",dflt:null,editType:s||"plot",impliedEdits:g},x[y]={valType:"number",dflt:null,editType:s||"plot",impliedEdits:g},x[d]={valType:"number",dflt:null,editType:"calc",impliedEdits:m},x.colorscale={valType:"colorscale",editType:"calc",dflt:a,impliedEdits:{autocolorscale:!1}},x.autocolorscale={valType:"boolean",dflt:!1!==l.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},x.reversescale={valType:"boolean",dflt:!1,editType:"plot"},r||(x.showscale={valType:"boolean",dflt:n,editType:"calc"},x.colorbar=M),l.noColorAxis||(x.coloraxis={valType:"subplotid",regex:k("coloraxis"),dflt:null,editType:"calc"}),x}},47128:function(ne,F,e){"use strict";var M=e(38248),k=e(3400),o=e(94288).extractOpts;ne.exports=function(T,_,p){var t=T._fullLayout,i=p.vals,r=p.containerStr,n=r?k.nestedProperty(_,r).get():_,a=o(n),s=!1!==a.auto,u=a.min,f=a.max,c=a.mid,y=function(){return k.aggNums(Math.min,null,i)},d=function(){return k.aggNums(Math.max,null,i)};void 0===u?u=y():s&&(u=n._colorAx&&M(u)?Math.min(u,y()):y()),void 0===f?f=d():s&&(f=n._colorAx&&M(f)?Math.max(f,d()):d()),s&&void 0!==c&&(f-c>c-u?u=c-(f-c):f-c<c-u&&(f=c+(c-u))),u===f&&(u-=.5,f+=.5),a._sync("min",u),a._sync("max",f),a.autocolorscale&&a._sync("colorscale",u*f<0?t.colorscale.diverging:u>=0?t.colorscale.sequential:t.colorscale.sequentialminus)}},95504:function(ne,F,e){"use strict";var M=e(3400),k=e(94288).hasColorscale,o=e(94288).extractOpts;ne.exports=function(T,_){function p(s,u){var f=s["_"+u];void 0!==f&&(s[u]=f)}function l(s,u){var f=u.container?M.nestedProperty(s,u.container).get():s;if(f)if(f.coloraxis)f._colorAx=_[f.coloraxis];else{var c=o(f),y=c.auto;(y||void 0===c.min)&&p(f,u.min),(y||void 0===c.max)&&p(f,u.max),c.autocolorscale&&p(f,"colorscale")}}for(var t=0;t<T.length;t++){var i=T[t],r=i._module.colorbar;if(r)if(Array.isArray(r))for(var n=0;n<r.length;n++)l(i,r[n]);else l(i,r);k(i,"marker.line")&&l(i,{container:"marker.line",min:"cmin",max:"cmax"})}for(var a in _._colorAxes)l(_[a],{min:"cmin",max:"cmax"})}},27260:function(ne,F,e){"use strict";var M=e(38248),k=e(3400),o=e(90553),T=e(64013),_=e(88304).isValid,p=e(24040).traceIs;function l(t,i){var r=i.slice(0,i.length-1);return i?k.nestedProperty(t,r).get()||{}:t}ne.exports=function t(i,r,n,a,s){var u=s.prefix,f=s.cLetter,c="_module"in r,y=l(i,u),d=l(r,u),m=l(r._template||{},u)||{},g=function(){return delete i.coloraxis,delete r.coloraxis,t(i,r,n,a,s)};if(c){var x=n._colorAxes||{},v=a(u+"coloraxis");if(v){var b=p(r,"contour")&&k.nestedProperty(r,"contours.coloring").get()||"heatmap",h=x[v];return void(h?(h[2].push(g),h[0]!==b&&(h[0]=!1,k.warn(["Ignoring coloraxis:",v,"setting","as it is linked to incompatible colorscales."].join(" ")))):x[v]=[b,r,[g]])}}var S=y[f+"min"],w=y[f+"max"],E=M(S)&&M(w)&&S<w;a(u+f+"auto",!E)?a(u+f+"mid"):(a(u+f+"min"),a(u+f+"max"));var P,I,O=y.colorscale,z=m.colorscale;void 0!==O&&(P=!_(O)),void 0!==z&&(P=!_(z)),a(u+"autocolorscale",P),a(u+"colorscale"),a(u+"reversescale"),"marker.line."!==u&&(u&&c&&(I=o(y)),a(u+"showscale",I)&&(u&&m&&(d._template=m),T(y,d,n)))}},94288:function(ne,F,e){"use strict";var M=e(33428),k=e(49760),o=e(38248),T=e(3400),_=e(76308),p=e(88304).isValid,l=["showscale","autocolorscale","colorscale","reversescale","colorbar"],t=["min","max","mid","auto"];function i(u){var f,c,y,d=u._colorAx,m=d||u,g={};for(c=0;c<l.length;c++)g[y=l[c]]=m[y];if(d)for(f="c",c=0;c<t.length;c++)g[y=t[c]]=m["c"+y];else{var x;for(c=0;c<t.length;c++)((x="c"+(y=t[c]))in m||(x="z"+y)in m)&&(g[y]=m[x]);f=x.charAt(0)}return g._sync=function(v,b){var h=-1!==t.indexOf(v)?f+v:v;m[h]=m["_"+h]=b},g}function r(u){for(var f=i(u),c=f.min,y=f.max,d=f.reversescale?n(f.colorscale):f.colorscale,m=d.length,g=new Array(m),x=new Array(m),v=0;v<m;v++){var b=d[v];g[v]=c+b[0]*(y-c),x[v]=b[1]}return{domain:g,range:x}}function n(u){for(var f=u.length,c=new Array(f),y=f-1,d=0;y>=0;y--,d++){var m=u[y];c[d]=[1-m[0],m[1]]}return c}function a(u,f){f=f||{};for(var c=u.domain,y=u.range,d=y.length,m=new Array(d),g=0;g<d;g++){var x=k(y[g]).toRgb();m[g]=[x.r,x.g,x.b,x.a]}var v,b=M.scale.linear().domain(c).range(m).clamp(!0),h=f.noNumericCheck,S=f.returnArray;return(v=h&&S?b:h?function(w){return s(b(w))}:S?function(w){return o(w)?b(w):k(w).isValid()?w:_.defaultLine}:function(w){return o(w)?s(b(w)):k(w).isValid()?w:_.defaultLine}).domain=b.domain,v.range=function(){return y},v}function s(u){return k({r:u[0],g:u[1],b:u[2],a:u[3]}).toRgbString()}ne.exports={hasColorscale:function(u,f,c){var y=f?T.nestedProperty(u,f).get()||{}:u,d=y[c||"color"];d&&d._inputArray&&(d=d._inputArray);var m=!1;if(T.isArrayOrTypedArray(d))for(var g=0;g<d.length;g++)if(o(d[g])){m=!0;break}return T.isPlainObject(y)&&(m||!0===y.showscale||o(y.cmin)&&o(y.cmax)||p(y.colorscale)||T.isPlainObject(y.colorbar))},extractOpts:i,extractScale:r,flipScale:n,makeColorScaleFunc:a,makeColorScaleFuncFromTrace:function(u,f){return a(r(u),f)}}},8932:function(ne,F,e){"use strict";var M=e(88304),k=e(94288);ne.exports={moduleType:"component",name:"colorscale",attributes:e(49084),layoutAttributes:e(92332),supplyLayoutDefaults:e(51608),handleDefaults:e(27260),crossTraceDefaults:e(95504),calc:e(47128),scales:M.scales,defaultScale:M.defaultScale,getScale:M.get,isValidScale:M.isValid,hasColorscale:k.hasColorscale,extractOpts:k.extractOpts,extractScale:k.extractScale,flipScale:k.flipScale,makeColorScaleFunc:k.makeColorScaleFunc,makeColorScaleFuncFromTrace:k.makeColorScaleFuncFromTrace}},92332:function(ne,F,e){"use strict";var M=e(92880).extendFlat,k=e(49084),o=e(88304).scales;ne.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:o.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:o.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:o.RdBu,editType:"calc"}},coloraxis:M({_isSubplotObj:!0,editType:"calc"},k("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},51608:function(ne,F,e){"use strict";var M=e(3400),k=e(31780),o=e(92332),T=e(27260);ne.exports=function(_,p){function l(f,c){return M.coerce(_,p,o,f,c)}l("colorscale.sequential"),l("colorscale.sequentialminus"),l("colorscale.diverging");var t,i,r=p._colorAxes;function n(f,c){return M.coerce(t,i,o.coloraxis,f,c)}for(var a in r){var s=r[a];if(s[0])t=_[a]||{},(i=k.newContainer(p,a,"coloraxis"))._name=a,T(t,i,p,n,{prefix:"",cLetter:"c"});else{for(var u=0;u<s[2].length;u++)s[2][u]();delete p._colorAxes[a]}}}},88304:function(ne,F,e){"use strict";var M=e(49760),k={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},o=k.RdBu;function T(_){var p=0;if(!Array.isArray(_)||_.length<2||!_[0]||!_[_.length-1]||0!=+_[0][0]||1!=+_[_.length-1][0])return!1;for(var l=0;l<_.length;l++){var t=_[l];if(2!==t.length||+t[0]<p||!M(t[1]).isValid())return!1;p=+t[0]}return!0}ne.exports={scales:k,defaultScale:o,get:function(_,p){if(p||(p=o),!_)return p;function l(){try{_=k[_]||JSON.parse(_)}catch{_=p}}return"string"==typeof _&&(l(),"string"==typeof _&&l()),T(_)?_:p},isValid:function(_){return void 0!==k[_]||T(_)}}},78316:function(ne){"use strict";ne.exports=function(F,e,M,k,o){var T=(F-M)/(k-M),_=T+e/(k-M),p=(T+_)/2;return"left"===o||"bottom"===o?T:"center"===o||"middle"===o?p:"right"===o||"top"===o?_:T<.6666666666666666-p?T:_>1.3333333333333333-p?_:p}},67416:function(ne,F,e){"use strict";var M=e(3400),k=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];ne.exports=function(o,T,_,p){return o="left"===_?0:"center"===_?1:"right"===_?2:M.constrain(Math.floor(3*o),0,2),T="bottom"===p?0:"middle"===p?1:"top"===p?2:M.constrain(Math.floor(3*T),0,2),k[T][o]}},72760:function(ne,F){"use strict";F.selectMode=function(e){return"lasso"===e||"select"===e},F.drawMode=function(e){return"drawclosedpath"===e||"drawopenpath"===e||"drawline"===e||"drawrect"===e||"drawcircle"===e},F.openMode=function(e){return"drawline"===e||"drawopenpath"===e},F.rectMode=function(e){return"select"===e||"drawline"===e||"drawrect"===e||"drawcircle"===e},F.freeMode=function(e){return"lasso"===e||"drawclosedpath"===e||"drawopenpath"===e},F.selectingOrDrawing=function(e){return F.freeMode(e)||F.rectMode(e)}},86476:function(ne,F,e){"use strict";var M=e(29128),k=e(52264),o=e(89184),T=e(3400).removeElement,_=e(33816),p=ne.exports={};p.align=e(78316),p.getCursor=e(67416);var l=e(2616);function t(){var r=document.createElement("div");r.className="dragcover";var n=r.style;return n.position="fixed",n.left=0,n.right=0,n.top=0,n.bottom=0,n.zIndex=999999999,n.background="none",document.body.appendChild(r),r}function i(r){return M(r.changedTouches?r.changedTouches[0]:r,document.body)}p.unhover=l.wrapped,p.unhoverRaw=l.raw,p.init=function(r){var n,a,s,u,f,c,y,d,m=r.gd,g=1,x=m._context.doubleClickDelay,v=r.element;m._mouseDownTime||(m._mouseDownTime=0),v.style.pointerEvents="all",v.onmousedown=h,o?(v._ontouchstart&&v.removeEventListener("touchstart",v._ontouchstart),v._ontouchstart=h,v.addEventListener("touchstart",h,{passive:!1})):v.ontouchstart=h;var b=r.clampFn||function(E,P,I){return Math.abs(E)<I&&(E=0),Math.abs(P)<I&&(P=0),[E,P]};function h(E){m._dragged=!1,m._dragging=!0;var P=i(E);n=P[0],a=P[1],y=E.target,c=E,d=2===E.buttons||E.ctrlKey,void 0===E.clientX&&void 0===E.clientY&&(E.clientX=n,E.clientY=a),(s=(new Date).getTime())-m._mouseDownTime<x?g+=1:(g=1,m._mouseDownTime=s),r.prepFn&&r.prepFn(E,n,a),k&&!d?(f=t()).style.cursor=window.getComputedStyle(v).cursor:k||(f=document,u=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(v).cursor),document.addEventListener("mouseup",w),document.addEventListener("touchend",w),!1!==r.dragmode&&(E.preventDefault(),document.addEventListener("mousemove",S),document.addEventListener("touchmove",S,{passive:!1}))}function S(E){E.preventDefault();var P=i(E),O=b(P[0]-n,P[1]-a,r.minDrag||_.MINDRAG),z=O[0],U=O[1];(z||U)&&(m._dragged=!0,p.unhover(m,E)),m._dragged&&r.moveFn&&!d&&(m._dragdata={element:v,dx:z,dy:U},r.moveFn(z,U))}function w(E){if(delete m._dragdata,!1!==r.dragmode&&(E.preventDefault(),document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S)),document.removeEventListener("mouseup",w),document.removeEventListener("touchend",w),k?T(f):u&&(f.documentElement.style.cursor=u,u=null),m._dragging){if(m._dragging=!1,(new Date).getTime()-m._mouseDownTime>x&&(g=Math.max(g-1,1)),m._dragged)r.doneFn&&r.doneFn();else if(r.clickFn&&r.clickFn(g,c),!d){var P;try{P=new MouseEvent("click",E)}catch{var I=i(E);(P=document.createEvent("MouseEvents")).initMouseEvent("click",E.bubbles,E.cancelable,E.view,E.detail,E.screenX,E.screenY,I[0],I[1],E.ctrlKey,E.altKey,E.shiftKey,E.metaKey,E.button,E.relatedTarget)}y.dispatchEvent(P)}m._dragging=!1,m._dragged=!1}else m._dragged=!1}},p.coverSlip=t},2616:function(ne,F,e){"use strict";var M=e(95924),k=e(91200),o=e(52200).getGraphDiv,T=e(92456),_=ne.exports={};_.wrapped=function(p,l,t){(p=o(p))._fullLayout&&k.clear(p._fullLayout._uid+T.HOVERID),_.raw(p,l,t)},_.raw=function(p,l){var t=p._fullLayout,i=p._hoverdata;l||(l={}),l.target&&!p._dragged&&!1===M.triggerHandler(p,"plotly_beforehover",l)||(t._hoverlayer.selectAll("g").remove(),t._hoverlayer.selectAll("line").remove(),t._hoverlayer.selectAll("circle").remove(),p._hoverdata=void 0,l.target&&i&&p.emit("plotly_unhover",{event:l,points:i}))}},98192:function(ne,F){"use strict";F.u={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},F.c={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},43616:function(ne,F,e){"use strict";var M=e(33428),k=e(3400),o=k.numberFormat,T=e(38248),_=e(49760),p=e(24040),l=e(76308),t=e(8932),i=k.strTranslate,r=e(72736),n=e(9616),a=e(84284).LINE_SPACING,s=e(13448).DESELECTDIM,u=e(43028),f=e(7152),c=e(10624).appendArrayPointValue,y=ne.exports={};function d(be){return"none"===be?void 0:be}y.font=function(be,ue){var se=ue.variant,ge=ue.style,Ie=ue.weight,ke=ue.color,Se=ue.size,Pe=ue.family,Fe=ue.shadow,Be=ue.lineposition,me=ue.textcase;Pe&&be.style("font-family",Pe),Se+1&&be.style("font-size",Se+"px"),ke&&be.call(l.fill,ke),Ie&&be.style("font-weight",Ie),ge&&be.style("font-style",ge),se&&be.style("font-variant",se),me&&be.style("text-transform",d(m[me])),Fe&&be.style("text-shadow","auto"===Fe?r.makeTextShadow(l.contrast(ke)):d(Fe)),Be&&be.style("text-decoration-line",d(Be.replace("under","underline").replace("over","overline").replace("through","line-through").split("+").join(" ")))};var m={normal:"none",lower:"lowercase",upper:"uppercase","word caps":"capitalize"};function g(be,ue,se,ge){var Ie=ue.fillpattern,ke=ue.fillgradient,Se=Ie&&y.getPatternAttr(Ie.shape,0,"");if(Se){var Pe=y.getPatternAttr(Ie.bgcolor,0,null),Fe=y.getPatternAttr(Ie.fgcolor,0,null),Be=Ie.fgopacity,me=y.getPatternAttr(Ie.size,0,8),Me=y.getPatternAttr(Ie.solidity,0,.3);y.pattern(be,"point",se,ue.uid,Se,me,Me,void 0,Ie.fillmode,Pe,Fe,Be)}else if(ke&&"none"!==ke.type){var Ne,Re,He=ke.type,Ze="scatterfill-"+ue.uid;ge&&(Ze="legendfill-"+ue.uid),ge||void 0===ke.start&&void 0===ke.stop?("horizontal"===He&&(He+="reversed"),be.call(y.gradient,se,Ze,He,ke.colorscale,"fill")):("horizontal"===He?(Ne={x:ke.start,y:0},Re={x:ke.stop,y:0}):"vertical"===He&&(Ne={x:0,y:ke.start},Re={x:0,y:ke.stop}),Ne.x=ue._xA.c2p(void 0===Ne.x?ue._extremes.x.min[0].val:Ne.x,!0),Ne.y=ue._yA.c2p(void 0===Ne.y?ue._extremes.y.min[0].val:Ne.y,!0),Re.x=ue._xA.c2p(void 0===Re.x?ue._extremes.x.max[0].val:Re.x,!0),Re.y=ue._yA.c2p(void 0===Re.y?ue._extremes.y.max[0].val:Re.y,!0),be.call(w,se,Ze,"linear",ke.colorscale,"fill",Ne,Re,!0,!1))}else ue.fillcolor&&be.call(l.fill,ue.fillcolor)}y.setPosition=function(be,ue,se){be.attr("x",ue).attr("y",se)},y.setSize=function(be,ue,se){be.attr("width",ue).attr("height",se)},y.setRect=function(be,ue,se,ge,Ie){be.call(y.setPosition,ue,se).call(y.setSize,ge,Ie)},y.translatePoint=function(be,ue,se,ge){var Ie=se.c2p(be.x),ke=ge.c2p(be.y);return!!(T(Ie)&&T(ke)&&ue.node())&&("text"===ue.node().nodeName?ue.attr("x",Ie).attr("y",ke):ue.attr("transform",i(Ie,ke)),!0)},y.translatePoints=function(be,ue,se){be.each(function(ge){var Ie=M.select(this);y.translatePoint(ge,Ie,ue,se)})},y.hideOutsideRangePoint=function(be,ue,se,ge,Ie,ke){ue.attr("display",se.isPtWithinRange(be,Ie)&&ge.isPtWithinRange(be,ke)?null:"none")},y.hideOutsideRangePoints=function(be,ue){if(ue._hasClipOnAxisFalse){var se=ue.xaxis,ge=ue.yaxis;be.each(function(Ie){var ke=Ie[0].trace,Se=ke.xcalendar,Pe=ke.ycalendar,Fe=p.traceIs(ke,"bar-like")?".bartext":".point,.textpoint";be.selectAll(Fe).each(function(Be){y.hideOutsideRangePoint(Be,M.select(this),se,ge,Se,Pe)})})}},y.crispRound=function(be,ue,se){return ue&&T(ue)?be._context.staticPlot?ue:ue<1?1:Math.round(ue):se||0},y.singleLineStyle=function(be,ue,se,ge,Ie){ue.style("fill","none");var ke=(((be||[])[0]||{}).trace||{}).line||{},Se=se||ke.width||0,Pe=Ie||ke.dash||"";l.stroke(ue,ge||ke.color),y.dashLine(ue,Pe,Se)},y.lineGroupStyle=function(be,ue,se,ge){be.style("fill","none").each(function(Ie){var ke=(((Ie||[])[0]||{}).trace||{}).line||{},Se=ue||ke.width||0,Pe=ge||ke.dash||"";M.select(this).call(l.stroke,se||ke.color).call(y.dashLine,Pe,Se)})},y.dashLine=function(be,ue,se){ue=y.dashStyle(ue,se=+se||0),be.style({"stroke-dasharray":ue,"stroke-width":se+"px"})},y.dashStyle=function(be,ue){ue=+ue||1;var se=Math.max(ue,3);return"solid"===be?be="":"dot"===be?be=se+"px,"+se+"px":"dash"===be?be=3*se+"px,"+3*se+"px":"longdash"===be?be=5*se+"px,"+5*se+"px":"dashdot"===be?be=3*se+"px,"+se+"px,"+se+"px,"+se+"px":"longdashdot"===be&&(be=5*se+"px,"+2*se+"px,"+se+"px,"+2*se+"px"),be},y.singleFillStyle=function(be,ue){var se=M.select(be.node());g(be,((se.data()[0]||[])[0]||{}).trace||{},ue,!1)},y.fillGroupStyle=function(be,ue,se){be.style("stroke-width",0).each(function(ge){var Ie=M.select(this);ge[0].trace&&g(Ie,ge[0].trace,ue,se)})};var x=e(71984);y.symbolNames=[],y.symbolFuncs=[],y.symbolBackOffs=[],y.symbolNeedLines={},y.symbolNoDot={},y.symbolNoFill={},y.symbolList=[],Object.keys(x).forEach(function(be){var ue=x[be],se=ue.n;y.symbolList.push(se,String(se),be,se+100,String(se+100),be+"-open"),y.symbolNames[se]=be,y.symbolFuncs[se]=ue.f,y.symbolBackOffs[se]=ue.backoff||0,ue.needLine&&(y.symbolNeedLines[se]=!0),ue.noDot?y.symbolNoDot[se]=!0:y.symbolList.push(se+200,String(se+200),be+"-dot",se+300,String(se+300),be+"-open-dot"),ue.noFill&&(y.symbolNoFill[se]=!0)});var v=y.symbolNames.length;function b(be,ue,se,ge){return y.symbolFuncs[be%100](ue,se,ge)+(be>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}y.symbolNumber=function(be){if(T(be))be=+be;else if("string"==typeof be){var ue=0;be.indexOf("-open")>0&&(ue=100,be=be.replace("-open","")),be.indexOf("-dot")>0&&(ue+=200,be=be.replace("-dot","")),(be=y.symbolNames.indexOf(be))>=0&&(be+=ue)}return be%100>=v||be>=400?0:Math.floor(Math.max(be,0))};var h=o("~f"),S={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};function w(be,ue,se,ge,Ie,ke,Se,Pe,Fe,Be){var me,Me=Ie.length;"linear"===ge?me={node:"linearGradient",attrs:{x1:Se.x,y1:Se.y,x2:Pe.x,y2:Pe.y,gradientUnits:Fe?"userSpaceOnUse":"objectBoundingBox"},reversed:Be}:"radial"===ge&&(me={node:"radialGradient",reversed:Be});for(var Le=new Array(Me),Ne=0;Ne<Me;Ne++)me.reversed?Le[Me-1-Ne]=[h(100*(1-Ie[Ne][0])),Ie[Ne][1]]:Le[Ne]=[h(100*Ie[Ne][0]),Ie[Ne][1]];var Re=ue._fullLayout,He="g"+Re._uid+"-"+se,Ze=Re._defs.select(".gradients").selectAll("#"+He).data([ge+Le.join(";")],k.identity);Ze.exit().remove(),Ze.enter().append(me.node).each(function(){var nt=M.select(this);me.attrs&&nt.attr(me.attrs),nt.attr("id",He);var ft=nt.selectAll("stop").data(Le);ft.exit().remove(),ft.enter().append("stop"),ft.each(function(ht){var Tt=_(ht[1]);M.select(this).attr({offset:ht[0]+"%","stop-color":l.tinyRGB(Tt),"stop-opacity":Tt.getAlpha()})})}),be.style(ke,ee(He,ue)).style(ke+"-opacity",null),be.classed("gradient_filled",!0)}y.gradient=function(be,ue,se,ge,Ie,ke){var Se=S[ge];return w(be,ue,se,Se.type,Ie,ke,Se.start,Se.stop,!1,Se.reversed)},y.pattern=function(be,ue,se,ge,Ie,ke,Se,Pe,Fe,Be,me,Me){var Le="legend"===ue;Pe&&("overlay"===Fe?me=l.contrast(Be=Pe):(Be=void 0,me=Pe));var Ne,Re,He,Ze,nt,ft,ht,Tt,At,_t=se._fullLayout,ot="p"+_t._uid+"-"+ge,it={},Pt=_(me),jt=l.tinyRGB(Pt),Ut=Me*Pt.getAlpha();switch(Ie){case"/":Ne=ke*Math.sqrt(2),Re=ke*Math.sqrt(2),ft="path",it={d:He="M-"+Ne/4+","+Re/4+"l"+Ne/2+",-"+Re/2+"M0,"+Re+"L"+Ne+",0M"+Ne/4*3+","+Re/4*5+"l"+Ne/2+",-"+Re/2,opacity:Ut,stroke:jt,"stroke-width":(Ze=Se*ke)+"px"};break;case"\\":Ne=ke*Math.sqrt(2),Re=ke*Math.sqrt(2),ft="path",it={d:He="M"+Ne/4*3+",-"+Re/4+"l"+Ne/2+","+Re/2+"M0,0L"+Ne+","+Re+"M-"+Ne/4+","+Re/4*3+"l"+Ne/2+","+Re/2,opacity:Ut,stroke:jt,"stroke-width":(Ze=Se*ke)+"px"};break;case"x":Ne=ke*Math.sqrt(2),Re=ke*Math.sqrt(2),He="M-"+Ne/4+","+Re/4+"l"+Ne/2+",-"+Re/2+"M0,"+Re+"L"+Ne+",0M"+Ne/4*3+","+Re/4*5+"l"+Ne/2+",-"+Re/2+"M"+Ne/4*3+",-"+Re/4+"l"+Ne/2+","+Re/2+"M0,0L"+Ne+","+Re+"M-"+Ne/4+","+Re/4*3+"l"+Ne/2+","+Re/2,Ze=ke-ke*Math.sqrt(1-Se),ft="path",it={d:He,opacity:Ut,stroke:jt,"stroke-width":Ze+"px"};break;case"|":ft="path",ft="path",it={d:He="M"+(Ne=ke)/2+",0L"+Ne/2+","+(Re=ke),opacity:Ut,stroke:jt,"stroke-width":(Ze=Se*ke)+"px"};break;case"-":ft="path",ft="path",it={d:He="M0,"+(Re=ke)/2+"L"+(Ne=ke)+","+Re/2,opacity:Ut,stroke:jt,"stroke-width":(Ze=Se*ke)+"px"};break;case"+":ft="path",He="M"+(Ne=ke)/2+",0L"+Ne/2+","+(Re=ke)+"M0,"+Re/2+"L"+Ne+","+Re/2,Ze=ke-ke*Math.sqrt(1-Se),ft="path",it={d:He,opacity:Ut,stroke:jt,"stroke-width":Ze+"px"};break;case".":Ne=ke,Re=ke,Se<Math.PI/4?nt=Math.sqrt(Se*ke*ke/Math.PI):(ht=Se,Tt=Math.PI/4,nt=(At=ke/2)+(ke/Math.sqrt(2)-At)*(ht-Tt)/(1-Tt)),ft="circle",it={cx:Ne/2,cy:Re/2,r:nt,opacity:Ut,fill:jt}}var Rt=[Ie||"noSh",Be||"noBg",me||"noFg",ke,Se].join(";"),Je=_t._defs.select(".patterns").selectAll("#"+ot).data([Rt],k.identity);Je.exit().remove(),Je.enter().append("pattern").each(function(){var et=M.select(this);if(et.attr({id:ot,width:Ne+"px",height:Re+"px",patternUnits:"userSpaceOnUse",patternTransform:Le?"scale(0.8)":""}),Be){var qe=_(Be),$e=l.tinyRGB(qe),pt=qe.getAlpha(),ct=et.selectAll("rect").data([0]);ct.exit().remove(),ct.enter().append("rect").attr({width:Ne+"px",height:Re+"px",fill:$e,"fill-opacity":pt})}var Ve=et.selectAll(ft).data([0]);Ve.exit().remove(),Ve.enter().append(ft).attr(it)}),be.style("fill",ee(ot,se)).style("fill-opacity",null),be.classed("pattern_filled",!0)},y.initGradients=function(be){k.ensureSingle(be._fullLayout._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),M.select(be).selectAll(".gradient_filled").classed("gradient_filled",!1)},y.initPatterns=function(be){k.ensureSingle(be._fullLayout._defs,"g","patterns").selectAll("pattern").remove(),M.select(be).selectAll(".pattern_filled").classed("pattern_filled",!1)},y.getPatternAttr=function(be,ue,se){return be&&k.isArrayOrTypedArray(be)?ue<be.length?be[ue]:se:be},y.pointStyle=function(be,ue,se,ge){if(be.size()){var Ie=y.makePointStyleFns(ue);be.each(function(ke){y.singlePointStyle(ke,M.select(this),ue,Ie,se,ge)})}},y.singlePointStyle=function(be,ue,se,ge,Ie,ke){var Se=se.marker,Pe=Se.line;if(ke&&ke.i>=0&&void 0===be.i&&(be.i=ke.i),ue.style("opacity",ge.selectedOpacityFn?ge.selectedOpacityFn(be):void 0===be.mo?Se.opacity:be.mo),ge.ms2mrc){var Fe;Fe="various"===be.ms||"various"===Se.size?3:ge.ms2mrc(be.ms),be.mrc=Fe,ge.selectedSizeFn&&(Fe=be.mrc=ge.selectedSizeFn(be));var Be=y.symbolNumber(be.mx||Se.symbol)||0;be.om=Be%200>=100;var me=Oe(be,se),Me=X(be,se);ue.attr("d",b(Be,Fe,me,Me))}var Le,Ne,Re,He=!1;if(be.so?(Re=Pe.outlierwidth,Ne=Pe.outliercolor,Le=Se.outliercolor):(Re=(be.mlw+1||(Pe||{}).width+1||(be.trace?(be.trace.marker.line||{}).width:0)+1)-1||0,Ne="mlc"in be?be.mlcc=ge.lineScale(be.mlc):k.isArrayOrTypedArray(Pe.color)?l.defaultLine:Pe.color,k.isArrayOrTypedArray(Se.color)&&(Le=l.defaultLine,He=!0),Le="mc"in be?be.mcc=ge.markerScale(be.mc):Se.color||Se.colors||"rgba(0,0,0,0)",ge.selectedColorFn&&(Le=ge.selectedColorFn(be))),be.om)ue.call(l.stroke,Le).style({"stroke-width":(Re||1)+"px",fill:"none"});else{ue.style("stroke-width",(be.isBlank?0:Re)+"px");var nt=Se.gradient,ft=be.mgt;ft?He=!0:ft=nt&&nt.type,k.isArrayOrTypedArray(ft)&&(S[ft=ft[0]]||(ft=0));var ht=Se.pattern,Tt=ht&&y.getPatternAttr(ht.shape,be.i,"");if(ft&&"none"!==ft){var At=be.mgc;At?He=!0:At=nt.color;var _t=se.uid;He&&(_t+="-"+be.i),y.gradient(ue,Ie,_t,ft,[[0,At],[1,Le]],"fill")}else if(Tt){var ot=!1,it=ht.fgcolor;!it&&ke&&ke.color&&(it=ke.color,ot=!0);var Pt=y.getPatternAttr(it,be.i,ke&&ke.color||null),jt=y.getPatternAttr(ht.bgcolor,be.i,null),Ut=ht.fgopacity,Rt=y.getPatternAttr(ht.size,be.i,8),Je=y.getPatternAttr(ht.solidity,be.i,.3);ot=ot||be.mcc||k.isArrayOrTypedArray(ht.shape)||k.isArrayOrTypedArray(ht.bgcolor)||k.isArrayOrTypedArray(ht.fgcolor)||k.isArrayOrTypedArray(ht.size)||k.isArrayOrTypedArray(ht.solidity);var et=se.uid;ot&&(et+="-"+be.i),y.pattern(ue,"point",Ie,et,Tt,Rt,Je,be.mcc,ht.fillmode,jt,Pt,Ut)}else k.isArrayOrTypedArray(Le)?l.fill(ue,Le[be.i]):l.fill(ue,Le);Re&&l.stroke(ue,Ne)}},y.makePointStyleFns=function(be){var ue={},se=be.marker;return ue.markerScale=y.tryColorscale(se,""),ue.lineScale=y.tryColorscale(se,"line"),p.traceIs(be,"symbols")&&(ue.ms2mrc=u.isBubble(be)?f(be):function(){return(se.size||6)/2}),be.selectedpoints&&k.extendFlat(ue,y.makeSelectedPointStyleFns(be)),ue},y.makeSelectedPointStyleFns=function(be){var ue={},Ie=be.marker||{},ke=(be.selected||{}).marker||{},Se=(be.unselected||{}).marker||{},Fe=ke.opacity,Be=Se.opacity,me=void 0!==Fe,Me=void 0!==Be;(k.isArrayOrTypedArray(Ie.opacity)||me||Me)&&(ue.selectedOpacityFn=function(Tt){var At=void 0===Tt.mo?Ie.opacity:Tt.mo;return Tt.selected?me?Fe:At:Me?Be:s*At});var Le=Ie.color,Ne=ke.color,Re=Se.color;(Ne||Re)&&(ue.selectedColorFn=function(Tt){var At=Tt.mcc||Le;return Tt.selected?Ne||At:Re||At});var He=Ie.size,Ze=ke.size,nt=Se.size,ft=void 0!==Ze,ht=void 0!==nt;return p.traceIs(be,"symbols")&&(ft||ht)&&(ue.selectedSizeFn=function(Tt){var At=Tt.mrc||He/2;return Tt.selected?ft?Ze/2:At:ht?nt/2:At}),ue},y.makeSelectedTextStyleFns=function(be){var ue={},Pe=(be.textfont||{}).color,Fe=((be.selected||{}).textfont||{}).color,Be=((be.unselected||{}).textfont||{}).color;return ue.selectedTextColorFn=function(me){var Me=me.tc||Pe;return me.selected?Fe||Me:Be||(Fe?Me:l.addOpacity(Me,s))},ue},y.selectedPointStyle=function(be,ue){if(be.size()&&ue.selectedpoints){var se=y.makeSelectedPointStyleFns(ue),ge=ue.marker||{},Ie=[];se.selectedOpacityFn&&Ie.push(function(ke,Se){ke.style("opacity",se.selectedOpacityFn(Se))}),se.selectedColorFn&&Ie.push(function(ke,Se){l.fill(ke,se.selectedColorFn(Se))}),se.selectedSizeFn&&Ie.push(function(ke,Se){var Pe=Se.mx||ge.symbol||0,Fe=se.selectedSizeFn(Se);ke.attr("d",b(y.symbolNumber(Pe),Fe,Oe(Se,ue),X(Se,ue))),Se.mrc2=Fe}),Ie.length&&be.each(function(ke){for(var Se=M.select(this),Pe=0;Pe<Ie.length;Pe++)Ie[Pe](Se,ke)})}},y.tryColorscale=function(be,ue){var se=ue?k.nestedProperty(be,ue).get():be;return se&&(se.colorscale||se._colorAx)&&k.isArrayOrTypedArray(se.color)?t.makeColorScaleFuncFromTrace(se):k.identity};var E,P,I={start:1,end:-1,middle:0,bottom:1,top:-1};function O(be,ue,se,ge,Ie){var ke=M.select(be.node().parentNode),Se=-1!==ue.indexOf("top")?"top":-1!==ue.indexOf("bottom")?"bottom":"middle",Pe=-1!==ue.indexOf("left")?"end":-1!==ue.indexOf("right")?"start":"middle",Fe=ge?ge/.8+1:0,Be=(r.lineCount(be)-1)*a+1,me=I[Pe]*Fe,Me=.75*se+I[Se]*Fe+(I[Se]-1)*Be*se/2;be.attr("text-anchor",Pe),Ie||ke.attr("transform",i(me,Me))}function z(be,ue){var se=be.ts||ue.textfont.size;return T(se)&&se>0?se:0}function U(be,ue,se){return se&&(be=q(be)),ue?j(be[1]):R(be[0])}function R(be){var ue=M.round(be,2);return E=ue,ue}function j(be){var ue=M.round(be,2);return P=ue,ue}function Y(be,ue,se,ge){var Ie=be[0]-ue[0],ke=be[1]-ue[1],Se=se[0]-ue[0],Pe=se[1]-ue[1],Fe=Math.pow(Ie*Ie+ke*ke,.25),Be=Math.pow(Se*Se+Pe*Pe,.25),me=(Be*Be*Ie-Fe*Fe*Se)*ge,Me=(Be*Be*ke-Fe*Fe*Pe)*ge,Le=3*Be*(Fe+Be),Ne=3*Fe*(Fe+Be);return[[R(ue[0]+(Le&&me/Le)),j(ue[1]+(Le&&Me/Le))],[R(ue[0]-(Ne&&me/Ne)),j(ue[1]-(Ne&&Me/Ne))]]}y.textPointStyle=function(be,ue,se){if(be.size()){var ge;if(ue.selectedpoints){var Ie=y.makeSelectedTextStyleFns(ue);ge=Ie.selectedTextColorFn}var ke=ue.texttemplate,Se=se._fullLayout;be.each(function(Pe){var Fe=M.select(this),Be=ke?k.extractOption(Pe,ue,"txt","texttemplate"):k.extractOption(Pe,ue,"tx","text");if(Be||0===Be){if(ke){var me=ue._module.formatLabels,Me=me?me(Pe,ue,Se):{},Le={};c(Le,ue,Pe.i),Be=k.texttemplateString(Be,Me,Se._d3locale,Le,Pe,ue._meta||{})}var Re=Pe.tp||ue.textposition,He=z(Pe,ue),Ze=ge?ge(Pe):Pe.tc||ue.textfont.color;Fe.call(y.font,{family:Pe.tf||ue.textfont.family,weight:Pe.tw||ue.textfont.weight,style:Pe.ty||ue.textfont.style,variant:Pe.tv||ue.textfont.variant,textcase:Pe.tC||ue.textfont.textcase,lineposition:Pe.tE||ue.textfont.lineposition,shadow:Pe.tS||ue.textfont.shadow,size:He,color:Ze}).text(Be).call(r.convertToTspans,se).call(O,Re,He,Pe.mrc)}else Fe.remove()})}},y.selectedTextStyle=function(be,ue){if(be.size()&&ue.selectedpoints){var se=y.makeSelectedTextStyleFns(ue);be.each(function(ge){var Ie=M.select(this),ke=se.selectedTextColorFn(ge),Se=ge.tp||ue.textposition,Pe=z(ge,ue);l.fill(Ie,ke);var Fe=p.traceIs(ue,"bar-like");O(Ie,Se,Pe,ge.mrc2||ge.mrc,Fe)})}},y.smoothopen=function(be,ue){if(be.length<3)return"M"+be.join("L");var se,ge="M"+be[0],Ie=[];for(se=1;se<be.length-1;se++)Ie.push(Y(be[se-1],be[se],be[se+1],ue));for(ge+="Q"+Ie[0][0]+" "+be[1],se=2;se<be.length-1;se++)ge+="C"+Ie[se-2][1]+" "+Ie[se-1][0]+" "+be[se];return ge+"Q"+Ie[be.length-3][1]+" "+be[be.length-1]},y.smoothclosed=function(be,ue){if(be.length<3)return"M"+be.join("L")+"Z";var se,ge="M"+be[0],Ie=be.length-1,ke=[Y(be[Ie],be[0],be[1],ue)];for(se=1;se<Ie;se++)ke.push(Y(be[se-1],be[se],be[se+1],ue));for(ke.push(Y(be[Ie-1],be[Ie],be[0],ue)),se=1;se<=Ie;se++)ge+="C"+ke[se-1][1]+" "+ke[se][0]+" "+be[se];return ge+"C"+ke[Ie][1]+" "+ke[0][0]+" "+be[0]+"Z"};var B={hv:function(be,ue,se){return"H"+R(ue[0])+"V"+U(ue,1,se)},vh:function(be,ue,se){return"V"+j(ue[1])+"H"+U(ue,0,se)},hvh:function(be,ue,se){return"H"+R((be[0]+ue[0])/2)+"V"+j(ue[1])+"H"+U(ue,0,se)},vhv:function(be,ue,se){return"V"+j((be[1]+ue[1])/2)+"H"+R(ue[0])+"V"+U(ue,1,se)}},V=function(be,ue,se){return"L"+U(ue,0,se)+","+U(ue,1,se)};function q(be,ue){var se=be.backoff,ge=be.trace,Ie=be.d,ke=be.i;if(se&&ge&&ge.marker&&ge.marker.angle%360==0&&ge.line&&"spline"!==ge.line.shape){var Se=k.isArrayOrTypedArray(se),Pe=be,Fe=ue?ue[0]:E||0,Be=ue?ue[1]:P||0,me=Pe[0],Me=Pe[1],Re=Math.atan2(Me-Be,me-Fe),He=Se?se[ke]:se;if("auto"===He){var Ze=Pe.i;"scatter"===ge.type&&Ze--;var nt=Pe.marker,ft=nt.symbol;k.isArrayOrTypedArray(ft)&&(ft=ft[Ze]);var ht=nt.size;k.isArrayOrTypedArray(ht)&&(ht=ht[Ze]),He=nt?y.symbolBackOffs[y.symbolNumber(ft)]*ht:0,He+=y.getMarkerStandoff(Ie[Ze],ge)||0}var Tt=me-He*Math.cos(Re),At=Me-He*Math.sin(Re);(Tt<=me&&Tt>=Fe||Tt>=me&&Tt<=Fe)&&(At<=Me&&At>=Be||At>=Me&&At<=Be)&&(be=[Tt,At])}return be}y.steps=function(be){var ue=B[be]||V;return function(se){for(var ge="M"+R(se[0][0])+","+j(se[0][1]),Ie=se.length,ke=1;ke<Ie;ke++)ge+=ue(se[ke-1],se[ke],ke===Ie-1);return ge}},y.applyBackoff=q,y.makeTester=function(){var be=k.ensureSingleById(M.select("body"),"svg","js-plotly-tester",function(se){se.attr(n.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),ue=k.ensureSingle(be,"path","js-reference-point",function(se){se.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});y.tester=be,y.testref=ue},y.savedBBoxes={};var ie=0;function te(be){var ue=be.getAttribute("data-unformatted");if(null!==ue)return ue+be.getAttribute("data-math")+be.getAttribute("text-anchor")+be.getAttribute("style")}function ee(be,ue){if(!be)return null;var se=ue._context,ge=se._exportedPlot?"":se._baseUrl||"";return ge?"url('"+ge+"#"+be+"')":"url(#"+be+")"}y.bBox=function(be,ue,se){var ge,Ie,ke;if(se||(se=te(be)),se){if(ge=y.savedBBoxes[se])return k.extendFlat({},ge)}else if(1===be.childNodes.length){var Se=be.childNodes[0];if(se=te(Se)){var Pe=+Se.getAttribute("x")||0,Fe=+Se.getAttribute("y")||0,Be=Se.getAttribute("transform");if(!Be){var me=y.bBox(Se,!1,se);return Pe&&(me.left+=Pe,me.right+=Pe),Fe&&(me.top+=Fe,me.bottom+=Fe),me}if(ge=y.savedBBoxes[se+="~"+Pe+"~"+Fe+"~"+Be])return k.extendFlat({},ge)}}ue?Ie=be:(ke=y.tester.node(),Ie=be.cloneNode(!0),ke.appendChild(Ie)),M.select(Ie).attr("transform",null).call(r.positionText,0,0);var Me=Ie.getBoundingClientRect(),Le=y.testref.node().getBoundingClientRect();ue||ke.removeChild(Ie);var Ne={height:Me.height,width:Me.width,left:Me.left-Le.left,top:Me.top-Le.top,right:Me.right-Le.left,bottom:Me.bottom-Le.top};return ie>=1e4&&(y.savedBBoxes={},ie=0),se&&(y.savedBBoxes[se]=Ne),ie++,k.extendFlat({},Ne)},y.setClipUrl=function(be,ue,se){be.attr("clip-path",ee(ue,se))},y.getTranslate=function(be){var ue=(be[be.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(se,ge,Ie){return[ge,Ie].join(" ")}).split(" ");return{x:+ue[0]||0,y:+ue[1]||0}},y.setTranslate=function(be,ue,se){var Ie=be.attr?"attr":"setAttribute",ke=be[be.attr?"attr":"getAttribute"]("transform")||"";return ue=ue||0,se=se||0,ke=ke.replace(/(\btranslate\(.*?\);?)/,"").trim(),ke=(ke+=i(ue,se)).trim(),be[Ie]("transform",ke),ke},y.getScale=function(be){var ue=(be[be.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(se,ge,Ie){return[ge,Ie].join(" ")}).split(" ");return{x:+ue[0]||1,y:+ue[1]||1}},y.setScale=function(be,ue,se){var Ie=be.attr?"attr":"setAttribute",ke=be[be.attr?"attr":"getAttribute"]("transform")||"";return ue=ue||1,se=se||1,ke=ke.replace(/(\bscale\(.*?\);?)/,"").trim(),ke=(ke+="scale("+ue+","+se+")").trim(),be[Ie]("transform",ke),ke};var $=/\s*sc.*/;y.setPointGroupScale=function(be,ue,se){if(ue=ue||1,se=se||1,be){var ge=1===ue&&1===se?"":"scale("+ue+","+se+")";be.each(function(){var Ie=(this.getAttribute("transform")||"").replace($,"");Ie=(Ie+=ge).trim(),this.setAttribute("transform",Ie)})}};var J=/translate\([^)]*\)\s*$/;function X(be,ue){var se;return be&&(se=be.mf),void 0===se&&(se=ue.marker&&ue.marker.standoff||0),ue._geo||ue._xA?se:-se}y.setTextPointsScale=function(be,ue,se){be&&be.each(function(){var ge,Ie=M.select(this),ke=Ie.select("text");if(ke.node()){var Se=parseFloat(ke.attr("x")||0),Pe=parseFloat(ke.attr("y")||0),Fe=(Ie.attr("transform")||"").match(J);ge=1===ue&&1===se?[]:[i(Se,Pe),"scale("+ue+","+se+")",i(-Se,-Pe)],Fe&&ge.push(Fe),Ie.attr("transform",ge.join(""))}})},y.getMarkerStandoff=X;var ae,ce,le,pe,we,Te,ye=Math.atan2,ve=Math.cos,xe=Math.sin;function Ce(be,ue){var se=ue[0],ge=ue[1];return[se*ve(be)-ge*xe(be),se*xe(be)+ge*ve(be)]}function Oe(be,ue){var se,ge,Ie=be.ma;void 0===Ie&&((Ie=ue.marker.angle)&&!k.isArrayOrTypedArray(Ie)||(Ie=0));var ke=ue.marker.angleref;if("previous"===ke||"north"===ke){if(ue._geo){var Se=ue._geo.project(be.lonlat);se=Se[0],ge=Se[1]}else{var Pe=ue._xA,Fe=ue._yA;if(!Pe||!Fe)return 90;se=Pe.c2p(be.x),ge=Fe.c2p(be.y)}if(ue._geo){var Be,me=be.lonlat[0],Me=be.lonlat[1],Le=ue._geo.project([me,Me+1e-5]),Ne=ue._geo.project([me+1e-5,Me]),Re=ye(Ne[1]-ge,Ne[0]-se),He=ye(Le[1]-ge,Le[0]-se);if("north"===ke)Be=Ie/180*Math.PI;else if("previous"===ke){var Ze=me/180*Math.PI,nt=Me/180*Math.PI,ft=ae/180*Math.PI,ht=ce/180*Math.PI,Tt=ft-Ze,At=ve(ht)*xe(Tt),_t=xe(ht)*ve(nt)-ve(ht)*xe(nt)*ve(Tt);Be=-ye(At,_t)-Math.PI,ae=me,ce=Me}var ot=Ce(Re,[ve(Be),0]),it=Ce(He,[xe(Be),0]);Ie=ye(ot[1]+it[1],ot[0]+it[0])/Math.PI*180,"previous"!==ke||Te===ue.uid&&be.i===we+1||(Ie=null)}if("previous"===ke&&!ue._geo)if(Te===ue.uid&&be.i===we+1&&T(se)&&T(ge)){var Pt=se-le,jt=ge-pe,Ut=ue.line&&ue.line.shape||"",Rt=Ut.slice(Ut.length-1);"h"===Rt&&(jt=0),"v"===Rt&&(Pt=0),Ie+=ye(jt,Pt)/Math.PI*180+90}else Ie=null}return le=se,pe=ge,we=be.i,Te=ue.uid,Ie}y.getMarkerAngle=Oe},71984:function(ne,F,e){"use strict";var M,k,o,T,_=e(21984),p=e(33428).round,l="M0,0Z",t=Math.sqrt(2),i=Math.sqrt(3),r=Math.PI,n=Math.cos,a=Math.sin;function s(f){return null===f}function u(f,c,y){if(!(f&&f%360!=0||c))return y;if(o===f&&T===c&&M===y)return k;function d(z,U){var R=n(z),j=a(z),Y=U[0],B=U[1]+(c||0);return[Y*R-B*j,Y*j+B*R]}o=f,T=c,M=y;for(var m=f/180*r,g=0,x=0,v=_(y),b="",h=0;h<v.length;h++){var S=v[h],w=S[0],E=g,P=x;if("M"===w||"L"===w)g=+S[1],x=+S[2];else if("m"===w||"l"===w)g+=+S[1],x+=+S[2];else if("H"===w)g=+S[1];else if("h"===w)g+=+S[1];else if("V"===w)x=+S[1];else if("v"===w)x+=+S[1];else if("A"===w){g=+S[1],x=+S[2];var I=d(m,[+S[6],+S[7]]);S[6]=I[0],S[7]=I[1],S[3]=+S[3]+f}"H"!==w&&"V"!==w||(w="L"),"h"!==w&&"v"!==w||(w="l"),"m"!==w&&"l"!==w||(g-=E,x-=P);var O=d(m,[g,x]);"H"!==w&&"V"!==w||(w="L"),"M"!==w&&"L"!==w&&"m"!==w&&"l"!==w||(S[1]=O[0],S[2]=O[1]),S[0]=w,b+=S[0]+S.slice(1).join(",")}return k=b,b}ne.exports={circle:{n:0,f:function(f,c,y){if(s(c))return l;var d=p(f,2),m="M"+d+",0A"+d+","+d+" 0 1,1 0,-"+d+"A"+d+","+d+" 0 0,1 "+d+",0Z";return y?u(c,y,m):m}},square:{n:1,f:function(f,c,y){if(s(c))return l;var d=p(f,2);return u(c,y,"M"+d+","+d+"H-"+d+"V-"+d+"H"+d+"Z")}},diamond:{n:2,f:function(f,c,y){if(s(c))return l;var d=p(1.3*f,2);return u(c,y,"M"+d+",0L0,"+d+"L-"+d+",0L0,-"+d+"Z")}},cross:{n:3,f:function(f,c,y){if(s(c))return l;var d=p(.4*f,2),m=p(1.2*f,2);return u(c,y,"M"+m+","+d+"H"+d+"V"+m+"H-"+d+"V"+d+"H-"+m+"V-"+d+"H-"+d+"V-"+m+"H"+d+"V-"+d+"H"+m+"Z")}},x:{n:4,f:function(f,c,y){if(s(c))return l;var d=p(.8*f/t,2),m="l"+d+","+d,g="l"+d+",-"+d,x="l-"+d+",-"+d,v="l-"+d+","+d;return u(c,y,"M0,"+d+m+g+x+g+x+v+x+v+m+v+m+"Z")}},"triangle-up":{n:5,f:function(f,c,y){if(s(c))return l;var d=p(2*f/i,2);return u(c,y,"M-"+d+","+p(f/2,2)+"H"+d+"L0,-"+p(f,2)+"Z")}},"triangle-down":{n:6,f:function(f,c,y){if(s(c))return l;var d=p(2*f/i,2);return u(c,y,"M-"+d+",-"+p(f/2,2)+"H"+d+"L0,"+p(f,2)+"Z")}},"triangle-left":{n:7,f:function(f,c,y){if(s(c))return l;var d=p(2*f/i,2);return u(c,y,"M"+p(f/2,2)+",-"+d+"V"+d+"L-"+p(f,2)+",0Z")}},"triangle-right":{n:8,f:function(f,c,y){if(s(c))return l;var d=p(2*f/i,2);return u(c,y,"M-"+p(f/2,2)+",-"+d+"V"+d+"L"+p(f,2)+",0Z")}},"triangle-ne":{n:9,f:function(f,c,y){if(s(c))return l;var d=p(.6*f,2),m=p(1.2*f,2);return u(c,y,"M-"+m+",-"+d+"H"+d+"V"+m+"Z")}},"triangle-se":{n:10,f:function(f,c,y){if(s(c))return l;var d=p(.6*f,2),m=p(1.2*f,2);return u(c,y,"M"+d+",-"+m+"V"+d+"H-"+m+"Z")}},"triangle-sw":{n:11,f:function(f,c,y){if(s(c))return l;var d=p(.6*f,2),m=p(1.2*f,2);return u(c,y,"M"+m+","+d+"H-"+d+"V-"+m+"Z")}},"triangle-nw":{n:12,f:function(f,c,y){if(s(c))return l;var d=p(.6*f,2),m=p(1.2*f,2);return u(c,y,"M-"+d+","+m+"V-"+d+"H"+m+"Z")}},pentagon:{n:13,f:function(f,c,y){if(s(c))return l;var d=p(.951*f,2),m=p(.588*f,2),g=p(-f,2),x=p(-.309*f,2);return u(c,y,"M"+d+","+x+"L"+m+","+p(.809*f,2)+"H-"+m+"L-"+d+","+x+"L0,"+g+"Z")}},hexagon:{n:14,f:function(f,c,y){if(s(c))return l;var d=p(f,2),m=p(f/2,2),g=p(f*i/2,2);return u(c,y,"M"+g+",-"+m+"V"+m+"L0,"+d+"L-"+g+","+m+"V-"+m+"L0,-"+d+"Z")}},hexagon2:{n:15,f:function(f,c,y){if(s(c))return l;var d=p(f,2),m=p(f/2,2),g=p(f*i/2,2);return u(c,y,"M-"+m+","+g+"H"+m+"L"+d+",0L"+m+",-"+g+"H-"+m+"L-"+d+",0Z")}},octagon:{n:16,f:function(f,c,y){if(s(c))return l;var d=p(.924*f,2),m=p(.383*f,2);return u(c,y,"M-"+m+",-"+d+"H"+m+"L"+d+",-"+m+"V"+m+"L"+m+","+d+"H-"+m+"L-"+d+","+m+"V-"+m+"Z")}},star:{n:17,f:function(f,c,y){if(s(c))return l;var d=1.4*f,m=p(.225*d,2),g=p(.951*d,2),x=p(.363*d,2),v=p(.588*d,2),b=p(-d,2),h=p(-.309*d,2),S=p(.118*d,2),w=p(.809*d,2);return u(c,y,"M"+m+","+h+"H"+g+"L"+x+","+S+"L"+v+","+w+"L0,"+p(.382*d,2)+"L-"+v+","+w+"L-"+x+","+S+"L-"+g+","+h+"H-"+m+"L0,"+b+"Z")}},hexagram:{n:18,f:function(f,c,y){if(s(c))return l;var d=p(.66*f,2),m=p(.38*f,2),g=p(.76*f,2);return u(c,y,"M-"+g+",0l-"+m+",-"+d+"h"+g+"l"+m+",-"+d+"l"+m+","+d+"h"+g+"l-"+m+","+d+"l"+m+","+d+"h-"+g+"l-"+m+","+d+"l-"+m+",-"+d+"h-"+g+"Z")}},"star-triangle-up":{n:19,f:function(f,c,y){if(s(c))return l;var d=p(f*i*.8,2),m=p(.8*f,2),g=p(1.6*f,2),x=p(4*f,2),v="A "+x+","+x+" 0 0 1 ";return u(c,y,"M-"+d+","+m+v+d+","+m+v+"0,-"+g+v+"-"+d+","+m+"Z")}},"star-triangle-down":{n:20,f:function(f,c,y){if(s(c))return l;var d=p(f*i*.8,2),m=p(.8*f,2),g=p(1.6*f,2),x=p(4*f,2),v="A "+x+","+x+" 0 0 1 ";return u(c,y,"M"+d+",-"+m+v+"-"+d+",-"+m+v+"0,"+g+v+d+",-"+m+"Z")}},"star-square":{n:21,f:function(f,c,y){if(s(c))return l;var d=p(1.1*f,2),m=p(2*f,2),g="A "+m+","+m+" 0 0 1 ";return u(c,y,"M-"+d+",-"+d+g+"-"+d+","+d+g+d+","+d+g+d+",-"+d+g+"-"+d+",-"+d+"Z")}},"star-diamond":{n:22,f:function(f,c,y){if(s(c))return l;var d=p(1.4*f,2),m=p(1.9*f,2),g="A "+m+","+m+" 0 0 1 ";return u(c,y,"M-"+d+",0"+g+"0,"+d+g+d+",0"+g+"0,-"+d+g+"-"+d+",0Z")}},"diamond-tall":{n:23,f:function(f,c,y){if(s(c))return l;var d=p(.7*f,2),m=p(1.4*f,2);return u(c,y,"M0,"+m+"L"+d+",0L0,-"+m+"L-"+d+",0Z")}},"diamond-wide":{n:24,f:function(f,c,y){if(s(c))return l;var d=p(1.4*f,2),m=p(.7*f,2);return u(c,y,"M0,"+m+"L"+d+",0L0,-"+m+"L-"+d+",0Z")}},hourglass:{n:25,f:function(f,c,y){if(s(c))return l;var d=p(f,2);return u(c,y,"M"+d+","+d+"H-"+d+"L"+d+",-"+d+"H-"+d+"Z")},noDot:!0},bowtie:{n:26,f:function(f,c,y){if(s(c))return l;var d=p(f,2);return u(c,y,"M"+d+","+d+"V-"+d+"L-"+d+","+d+"V-"+d+"Z")},noDot:!0},"circle-cross":{n:27,f:function(f,c,y){if(s(c))return l;var d=p(f,2);return u(c,y,"M0,"+d+"V-"+d+"M"+d+",0H-"+d+"M"+d+",0A"+d+","+d+" 0 1,1 0,-"+d+"A"+d+","+d+" 0 0,1 "+d+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(f,c,y){if(s(c))return l;var d=p(f,2),m=p(f/t,2);return u(c,y,"M"+m+","+m+"L-"+m+",-"+m+"M"+m+",-"+m+"L-"+m+","+m+"M"+d+",0A"+d+","+d+" 0 1,1 0,-"+d+"A"+d+","+d+" 0 0,1 "+d+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(f,c,y){if(s(c))return l;var d=p(f,2);return u(c,y,"M0,"+d+"V-"+d+"M"+d+",0H-"+d+"M"+d+","+d+"H-"+d+"V-"+d+"H"+d+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(f,c,y){if(s(c))return l;var d=p(f,2);return u(c,y,"M"+d+","+d+"L-"+d+",-"+d+"M"+d+",-"+d+"L-"+d+","+d+"M"+d+","+d+"H-"+d+"V-"+d+"H"+d+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(f,c,y){if(s(c))return l;var d=p(1.3*f,2);return u(c,y,"M"+d+",0L0,"+d+"L-"+d+",0L0,-"+d+"ZM0,-"+d+"V"+d+"M-"+d+",0H"+d)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(f,c,y){if(s(c))return l;var d=p(1.3*f,2),m=p(.65*f,2);return u(c,y,"M"+d+",0L0,"+d+"L-"+d+",0L0,-"+d+"ZM-"+m+",-"+m+"L"+m+","+m+"M-"+m+","+m+"L"+m+",-"+m)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(f,c,y){if(s(c))return l;var d=p(1.4*f,2);return u(c,y,"M0,"+d+"V-"+d+"M"+d+",0H-"+d)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(f,c,y){if(s(c))return l;var d=p(f,2);return u(c,y,"M"+d+","+d+"L-"+d+",-"+d+"M"+d+",-"+d+"L-"+d+","+d)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(f,c,y){if(s(c))return l;var d=p(1.2*f,2),m=p(.85*f,2);return u(c,y,"M0,"+d+"V-"+d+"M"+d+",0H-"+d+"M"+m+","+m+"L-"+m+",-"+m+"M"+m+",-"+m+"L-"+m+","+m)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(f,c,y){if(s(c))return l;var d=p(f/2,2),m=p(f,2);return u(c,y,"M"+d+","+m+"V-"+m+"M"+(d-m)+",-"+m+"V"+m+"M"+m+","+d+"H-"+m+"M-"+m+","+(d-m)+"H"+m)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(f,c,y){if(s(c))return l;var d=p(1.2*f,2),m=p(1.6*f,2),g=p(.8*f,2);return u(c,y,"M-"+d+","+g+"L0,0M"+d+","+g+"L0,0M0,-"+m+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(f,c,y){if(s(c))return l;var d=p(1.2*f,2),m=p(1.6*f,2),g=p(.8*f,2);return u(c,y,"M-"+d+",-"+g+"L0,0M"+d+",-"+g+"L0,0M0,"+m+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(f,c,y){if(s(c))return l;var d=p(1.2*f,2),m=p(1.6*f,2),g=p(.8*f,2);return u(c,y,"M"+g+","+d+"L0,0M"+g+",-"+d+"L0,0M-"+m+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(f,c,y){if(s(c))return l;var d=p(1.2*f,2),m=p(1.6*f,2),g=p(.8*f,2);return u(c,y,"M-"+g+","+d+"L0,0M-"+g+",-"+d+"L0,0M"+m+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(f,c,y){if(s(c))return l;var d=p(1.4*f,2);return u(c,y,"M"+d+",0H-"+d)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(f,c,y){if(s(c))return l;var d=p(1.4*f,2);return u(c,y,"M0,"+d+"V-"+d)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(f,c,y){if(s(c))return l;var d=p(f,2);return u(c,y,"M"+d+",-"+d+"L-"+d+","+d)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(f,c,y){if(s(c))return l;var d=p(f,2);return u(c,y,"M"+d+","+d+"L-"+d+",-"+d)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(f,c,y){if(s(c))return l;var d=p(f,2);return u(c,y,"M0,0L-"+d+","+p(2*f,2)+"H"+d+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(f,c,y){if(s(c))return l;var d=p(f,2);return u(c,y,"M0,0L-"+d+",-"+p(2*f,2)+"H"+d+"Z")},noDot:!0},"arrow-left":{n:47,f:function(f,c,y){if(s(c))return l;var d=p(2*f,2),m=p(f,2);return u(c,y,"M0,0L"+d+",-"+m+"V"+m+"Z")},noDot:!0},"arrow-right":{n:48,f:function(f,c,y){if(s(c))return l;var d=p(2*f,2),m=p(f,2);return u(c,y,"M0,0L-"+d+",-"+m+"V"+m+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(f,c,y){if(s(c))return l;var d=p(f,2);return u(c,y,"M-"+d+",0H"+d+"M0,0L-"+d+","+p(2*f,2)+"H"+d+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(f,c,y){if(s(c))return l;var d=p(f,2);return u(c,y,"M-"+d+",0H"+d+"M0,0L-"+d+",-"+p(2*f,2)+"H"+d+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(f,c,y){if(s(c))return l;var d=p(2*f,2),m=p(f,2);return u(c,y,"M0,-"+m+"V"+m+"M0,0L"+d+",-"+m+"V"+m+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(f,c,y){if(s(c))return l;var d=p(2*f,2),m=p(f,2);return u(c,y,"M0,-"+m+"V"+m+"M0,0L-"+d+",-"+m+"V"+m+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(f,c,y){if(s(c))return l;var d=r/2.5,m=2*f*n(d),g=2*f*a(d);return u(c,y,"M0,0L"+-m+","+g+"L"+m+","+g+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(f,c,y){if(s(c))return l;var d=r/4,m=2*f*n(d),g=2*f*a(d);return u(c,y,"M0,0L"+-m+","+g+"A "+2*f+","+2*f+" 0 0 1 "+m+","+g+"Z")},backoff:.4,noDot:!0}}},97644:function(ne){"use strict";ne.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},14880:function(ne,F,e){"use strict";var M=e(38248),k=e(24040),o=e(54460),T=e(3400),_=e(93792);function p(l,t,i,r){var n=t["error_"+r]||{},a=[];if(n.visible&&-1!==["linear","log"].indexOf(i.type)){for(var s=_(n),u=0;u<l.length;u++){var f=l[u],c=f.i;if(void 0===c)c=u;else if(null===c)continue;var y=f[r];if(M(i.c2l(y))){var d=s(y,c);if(M(d[0])&&M(d[1])){var m=f[r+"s"]=y-d[0],g=f[r+"h"]=y+d[1];a.push(m,g)}}}var v=t._extremes[i._id],b=o.findExtremes(i,a,T.extendFlat({tozero:v.opts.tozero},{padded:!0}));v.min=v.min.concat(b.min),v.max=v.max.concat(b.max)}}ne.exports=function(l){for(var t=l.calcdata,i=0;i<t.length;i++){var r=t[i],n=r[0].trace;if(!0===n.visible&&k.traceIs(n,"errorBarsOK")){var a=o.getFromId(l,n.xaxis),s=o.getFromId(l,n.yaxis);p(r,n,a,"x"),p(r,n,s,"y")}}}},93792:function(ne){"use strict";function F(e,M){return"percent"===e?function(k){return Math.abs(k*M/100)}:"constant"===e?function(){return Math.abs(M)}:"sqrt"===e?function(k){return Math.sqrt(Math.abs(k))}:void 0}ne.exports=function(e){var M=e.type,k=e.symmetric;if("data"===M){var o=e.array||[];if(k)return function(l,t){var i=+o[t];return[i,i]};var T=e.arrayminus||[];return function(l,t){var i=+o[t],r=+T[t];return isNaN(i)&&isNaN(r)?[NaN,NaN]:[r||0,i||0]}}var _=F(M,e.value),p=F(M,e.valueminus);return k||void 0===e.valueminus?function(l){var t=_(l);return[t,t]}:function(l){return[p(l),_(l)]}}},65200:function(ne,F,e){"use strict";var M=e(38248),k=e(24040),o=e(3400),T=e(31780),_=e(97644);ne.exports=function(p,l,t,i){var r="error_"+i.axis,n=T.newContainer(l,r),a=p[r]||{};function s(y,d){return o.coerce(a,n,_,y,d)}if(!1!==s("visible",void 0!==a.array||void 0!==a.value||"sqrt"===a.type)){var u=s("type","array"in a?"data":"percent"),f=!0;"sqrt"!==u&&(f=s("symmetric",!(("data"===u?"arrayminus":"valueminus")in a))),"data"===u?(s("array"),s("traceref"),f||(s("arrayminus"),s("tracerefminus"))):"percent"!==u&&"constant"!==u||(s("value"),f||s("valueminus"));var c="copy_"+i.inherit+"style";i.inherit&&(l["error_"+i.inherit]||{}).visible&&s(c,!(a.color||M(a.thickness)||M(a.width))),i.inherit&&n[c]||(s("color",t),s("thickness"),s("width",k.traceIs(l,"gl3d")?0:4))}}},64968:function(ne,F,e){"use strict";var M=e(3400),k=e(67824).overrideAll,o=e(97644),T={error_x:M.extendFlat({},o),error_y:M.extendFlat({},o)};delete T.error_x.copy_zstyle,delete T.error_y.copy_zstyle,delete T.error_y.copy_ystyle;var _={error_x:M.extendFlat({},o),error_y:M.extendFlat({},o),error_z:M.extendFlat({},o)};delete _.error_x.copy_ystyle,delete _.error_y.copy_ystyle,delete _.error_z.copy_ystyle,delete _.error_z.copy_zstyle,ne.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:T,bar:T,histogram:T,scatter3d:k(_,"calc","nested"),scattergl:k(T,"calc","nested")}},supplyDefaults:e(65200),calc:e(14880),makeComputeError:e(93792),plot:e(78512),style:e(92036),hoverInfo:function(p,l,t){(l.error_y||{}).visible&&(t.yerr=p.yh-p.y,l.error_y.symmetric||(t.yerrneg=p.y-p.ys)),(l.error_x||{}).visible&&(t.xerr=p.xh-p.x,l.error_x.symmetric||(t.xerrneg=p.x-p.xs))}}},78512:function(ne,F,e){"use strict";var M=e(33428),k=e(38248),o=e(43616),T=e(43028);ne.exports=function(_,p,l,t){var i=l.xaxis,r=l.yaxis,n=t&&t.duration>0,a=_._context.staticPlot;p.each(function(s){var u,f=s[0].trace,c=f.error_x||{},y=f.error_y||{};f.ids&&(u=function(x){return x.id});var d=T.hasMarkers(f)&&f.marker.maxdisplayed>0;y.visible||c.visible||(s=[]);var m=M.select(this).selectAll("g.errorbar").data(s,u);if(m.exit().remove(),s.length){c.visible||m.selectAll("path.xerror").remove(),y.visible||m.selectAll("path.yerror").remove(),m.style("opacity",1);var g=m.enter().append("g").classed("errorbar",!0);n&&g.style("opacity",0).transition().duration(t.duration).style("opacity",1),o.setClipUrl(m,l.layerClipId,_),m.each(function(x){var I,O,z,U,v=M.select(this),b=(z=r,U={x:(O=i).c2p((I=x).x),y:z.c2p(I.y)},void 0!==I.yh&&(U.yh=z.c2p(I.yh),U.ys=z.c2p(I.ys),k(U.ys)||(U.noYS=!0,U.ys=z.c2p(I.ys,!0))),void 0!==I.xh&&(U.xh=O.c2p(I.xh),U.xs=O.c2p(I.xs),k(U.xs)||(U.noXS=!0,U.xs=O.c2p(I.xs,!0))),U);if(!d||x.vis){var h,S=v.select("path.yerror");if(y.visible&&k(b.x)&&k(b.yh)&&k(b.ys)){var w=y.width;h="M"+(b.x-w)+","+b.yh+"h"+2*w+"m-"+w+",0V"+b.ys,b.noYS||(h+="m-"+w+",0h"+2*w),S.size()?n&&(S=S.transition().duration(t.duration).ease(t.easing)):S=v.append("path").style("vector-effect",a?"none":"non-scaling-stroke").classed("yerror",!0),S.attr("d",h)}else S.remove();var E=v.select("path.xerror");if(c.visible&&k(b.y)&&k(b.xh)&&k(b.xs)){var P=(c.copy_ystyle?y:c).width;h="M"+b.xh+","+(b.y-P)+"v"+2*P+"m0,-"+P+"H"+b.xs,b.noXS||(h+="m0,-"+P+"v"+2*P),E.size()?n&&(E=E.transition().duration(t.duration).ease(t.easing)):E=v.append("path").style("vector-effect",a?"none":"non-scaling-stroke").classed("xerror",!0),E.attr("d",h)}else E.remove()}})}})}},92036:function(ne,F,e){"use strict";var M=e(33428),k=e(76308);ne.exports=function(o){o.each(function(T){var _=T[0].trace,p=_.error_y||{},l=_.error_x||{},t=M.select(this);t.selectAll("path.yerror").style("stroke-width",p.thickness+"px").call(k.stroke,p.color),l.copy_ystyle&&(l=p),t.selectAll("path.xerror").style("stroke-width",l.thickness+"px").call(k.stroke,l.color)})}},55756:function(ne,F,e){"use strict";var M=e(25376),k=e(65460).hoverlabel,o=e(92880).extendFlat;ne.exports={hoverlabel:{bgcolor:o({},k.bgcolor,{arrayOk:!0}),bordercolor:o({},k.bordercolor,{arrayOk:!0}),font:M({arrayOk:!0,editType:"none"}),align:o({},k.align,{arrayOk:!0}),namelength:o({},k.namelength,{arrayOk:!0}),editType:"none"}}},55056:function(ne,F,e){"use strict";var M=e(3400),k=e(24040);function o(T,_,p,l){l=l||M.identity,Array.isArray(T)&&(_[0][p]=l(T))}ne.exports=function(T){var _=T.calcdata,p=T._fullLayout;function l(a){return function(s){return M.coerceHoverinfo({hoverinfo:s},{_module:a._module},p)}}for(var t=0;t<_.length;t++){var i=_[t],r=i[0].trace;if(!k.traceIs(r,"pie-like")){var n=k.traceIs(r,"2dMap")?o:M.fillArray;n(r.hoverinfo,i,"hi",l(r)),r.hovertemplate&&n(r.hovertemplate,i,"ht"),r.hoverlabel&&(n(r.hoverlabel.bgcolor,i,"hbg"),n(r.hoverlabel.bordercolor,i,"hbc"),n(r.hoverlabel.font.size,i,"hts"),n(r.hoverlabel.font.color,i,"htc"),n(r.hoverlabel.font.family,i,"htf"),n(r.hoverlabel.font.weight,i,"htw"),n(r.hoverlabel.font.style,i,"hty"),n(r.hoverlabel.font.variant,i,"htv"),n(r.hoverlabel.namelength,i,"hnl"),n(r.hoverlabel.align,i,"hta"))}}}},62376:function(ne,F,e){"use strict";var M=e(24040),k=e(83292).hover;ne.exports=function(o,T,_){var p=M.getComponentMethod("annotations","onClick")(o,o._hoverdata);function l(){o.emit("plotly_click",{points:o._hoverdata,event:T})}void 0!==_&&k(o,T,_,!0),o._hoverdata&&T&&T.target&&(p&&p.then?p.then(l):l(),T.stopImmediatePropagation&&T.stopImmediatePropagation())}},92456:function(ne){"use strict";ne.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},95448:function(ne,F,e){"use strict";var M=e(3400),k=e(55756),o=e(16132);ne.exports=function(T,_,p,l){var t=M.extendFlat({},l.hoverlabel);_.hovertemplate&&(t.namelength=-1),o(T,_,function(i,r){return M.coerce(T,_,k,i,r)},t)}},10624:function(ne,F,e){"use strict";var M=e(3400);F.getSubplot=function(l){return l.subplot||l.xaxis+l.yaxis||l.geo},F.isTraceInSubplots=function(l,t){if("splom"===l.type){for(var i=l.xaxes||[],r=l.yaxes||[],n=0;n<i.length;n++)for(var a=0;a<r.length;a++)if(-1!==t.indexOf(i[n]+r[a]))return!0;return!1}return-1!==t.indexOf(F.getSubplot(l))},F.flat=function(l,t){for(var i=new Array(l.length),r=0;r<l.length;r++)i[r]=t;return i},F.p2c=function(l,t){for(var i=new Array(l.length),r=0;r<l.length;r++)i[r]=l[r].p2c(t);return i},F.getDistanceFunction=function(l,t,i,r){return"closest"===l?r||F.quadrature(t,i):"x"===l.charAt(0)?t:i},F.getClosest=function(l,t,i){if(!1!==i.index)i.index>=0&&i.index<l.length?i.distance=0:i.index=!1;else for(var r=0;r<l.length;r++){var n=t(l[r]);n<=i.distance&&(i.index=r,i.distance=n)}return i},F.inbox=function(l,t,i){return l*t<0||0===l?i:1/0},F.quadrature=function(l,t){return function(i){var r=l(i),n=t(i);return Math.sqrt(r*r+n*n)}},F.makeEventData=function(l,t,i){var r="index"in l?l.index:l.pointNumber,n={data:t._input,fullData:t,curveNumber:t.index,pointNumber:r};if(t._indexToPoints){var a=t._indexToPoints[r];1===a.length?n.pointIndex=a[0]:n.pointIndices=a}else n.pointIndex=r;return t._module.eventData?n=t._module.eventData(n,l,t,i,r):("xVal"in l?n.x=l.xVal:"x"in l&&(n.x=l.x),"yVal"in l?n.y=l.yVal:"y"in l&&(n.y=l.y),l.xa&&(n.xaxis=l.xa),l.ya&&(n.yaxis=l.ya),void 0!==l.zLabelVal&&(n.z=l.zLabelVal)),F.appendArrayPointValue(n,t,r),n},F.appendArrayPointValue=function(l,t,i){var r=t._arrayAttrs;if(r)for(var n=0;n<r.length;n++){var a=r[n],s=o(a);if(void 0===l[s]){var u=T(M.nestedProperty(t,a).get(),i);void 0!==u&&(l[s]=u)}}},F.appendArrayMultiPointValues=function(l,t,i){var r=t._arrayAttrs;if(r)for(var n=0;n<r.length;n++){var a=r[n],s=o(a);if(void 0===l[s]){for(var u=M.nestedProperty(t,a).get(),f=new Array(i.length),c=0;c<i.length;c++)f[c]=T(u,i[c]);l[s]=f}}};var k={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function o(l){return k[l]||l}function T(l,t){return Array.isArray(t)?Array.isArray(l)&&Array.isArray(l[t[0]])?l[t[0]][t[1]]:void 0:l[t]}var _={x:!0,y:!0},p={"x unified":!0,"y unified":!0};F.isUnifiedHover=function(l){return"string"==typeof l&&!!p[l]},F.isXYhover=function(l){return"string"==typeof l&&!!_[l]}},83292:function(ne,F,e){"use strict";var M=e(33428),k=e(38248),o=e(49760),T=e(3400),_=T.pushUnique,p=T.strTranslate,l=T.strRotate,t=e(95924),i=e(72736),r=e(72213),n=e(43616),a=e(76308),s=e(86476),u=e(54460),f=e(24040),c=e(10624),y=e(92456),d=e(77864),m=e(31140),g=y.YANGLE,x=Math.PI*g/180,v=1/Math.sin(x),b=Math.cos(x),h=Math.sin(x),S=y.HOVERARROWSIZE,w=y.HOVERTEXTPAD,E={box:!0,ohlc:!0,violin:!0,candlestick:!0},P={scatter:!0,scattergl:!0,splom:!0};function I(X,ae){return X.distance-ae.distance}function O(X){return[X.trace.index,X.index,X.x0,X.y0,X.name,X.attr,X.xa?X.xa._id:"",X.ya?X.ya._id:""].join(",")}F.hover=function(X,ae,ce,le){X=T.getGraphDiv(X);var pe=ae.target;T.throttle(X._fullLayout._uid+y.HOVERID,y.HOVERMINTIME,function(){!function(we,Te,ye,ve,xe){ye||(ye="xy");var Ce,Oe,be,ue=Array.isArray(ye)?ye:[ye],se=we._fullLayout,ge=se.hoversubplots,Ie=se._plots||[],ke=Ie[ye],Se=se._has("cartesian"),Pe=Te.hovermode||se.hovermode,Fe="x"===(Pe||"").charAt(0),Be="y"===(Pe||"").charAt(0);if(Se&&(Fe||Be)&&"axis"===ge)for(var me=ue.length,Me=0;Me<me;Me++)if(Ie[Ce=ue[Me]]){Oe=u.getFromId(we,Ce,"x"),be=u.getFromId(we,Ce,"y");var Le=(Fe?Oe:be)._subplotsWith;if(Le&&Le.length)for(var Ne=0;Ne<Le.length;Ne++)_(ue,Le[Ne])}if(ke&&"single"!==ge){var Re=ke.overlays.map(function(Yt){return Yt.id});ue=ue.concat(Re)}for(var He=ue.length,Ze=new Array(He),nt=new Array(He),ft=!1,ht=0;ht<He;ht++)if(Ie[Ce=ue[ht]])ft=!0,Ze[ht]=Ie[Ce].xaxis,nt[ht]=Ie[Ce].yaxis;else{if(!se[Ce]||!se[Ce]._subplot)return void T.warn("Unrecognized subplot: "+Ce);var Tt=se[Ce]._subplot;Ze[ht]=Tt.xaxis,nt[ht]=Tt.yaxis}if(Pe&&!ft&&(Pe="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(Pe)||!we.calcdata||we.querySelector(".zoombox")||we._dragging)return s.unhoverRaw(we,Te);var At=se.hoverdistance;-1===At&&(At=1/0);var _t=se.spikedistance;-1===_t&&(_t=1/0);var ot,it,Pt,jt,Ut,Rt,Je,et,qe,$e,pt,ct,Ve,Ge=[],ut=[],Qe={hLinePoint:null,vLinePoint:null},yt=!1;if(Array.isArray(Te))for(Pe="array",Pt=0;Pt<Te.length;Pt++)(Ut=we.calcdata[Te[Pt].curveNumber||0])&&(Rt=Ut[0].trace,"skip"!==Ut[0].trace.hoverinfo&&(ut.push(Ut),"h"===Rt.orientation&&(yt=!0)));else{var wt,kt,vt=we.calcdata.slice();for(vt.sort(function(Yt,un){return(Yt[0].trace.zorder||0)-(un[0].trace.zorder||0)}),jt=0;jt<vt.length;jt++)"skip"!==(Rt=(Ut=vt[jt])[0].trace).hoverinfo&&c.isTraceInSubplots(Rt,ue)&&(ut.push(Ut),"h"===Rt.orientation&&(yt=!0));if(xe){if(!1===t.triggerHandler(we,"plotly_beforehover",Te))return;var Lt=xe.getBoundingClientRect();wt=Te.clientX-Lt.left,kt=Te.clientY-Lt.top,se._calcInverseTransform(we);var St=T.apply3DTransform(se._invTransform)(wt,kt);if(kt=St[1],(wt=St[0])<0||wt>Ze[0]._length||kt<0||kt>nt[0]._length)return s.unhoverRaw(we,Te)}else wt="xpx"in Te?Te.xpx:Ze[0]._length/2,kt="ypx"in Te?Te.ypx:nt[0]._length/2;if(Te.pointerX=wt+Ze[0]._offset,Te.pointerY=kt+nt[0]._offset,ot="xval"in Te?c.flat(ue,Te.xval):c.p2c(Ze,wt),it="yval"in Te?c.flat(ue,Te.yval):c.p2c(nt,kt),!k(ot[0])||!k(it[0]))return T.warn("Fx.hover failed",Te,we),s.unhoverRaw(we,Te)}var Ot=1/0;function Nt(Yt,un){for(jt=0;jt<ut.length;jt++)if((Ut=ut[jt])&&Ut[0]&&Ut[0].trace&&!0===(Rt=Ut[0].trace).visible&&0!==Rt._length&&-1===["carpet","contourcarpet"].indexOf(Rt._module.name)){if(c.isUnifiedHover(qe=Pe)&&(qe=qe.charAt(0)),"splom"===Rt.type?Je=ue[et=0]:(Je=c.getSubplot(Rt),et=ue.indexOf(Je)),ct={cd:Ut,trace:Rt,xa:Ze[et],ya:nt[et],maxHoverDistance:At,maxSpikeDistance:_t,index:!1,distance:Math.min(Ot,At),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:a.defaultLine,name:Rt.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},se[Je]&&(ct.subplot=se[Je]._subplot),se._splomScenes&&se._splomScenes[Rt.uid]&&(ct.scene=se._splomScenes[Rt.uid]),"array"===qe){var _n=Te[jt];"pointNumber"in _n?(ct.index=_n.pointNumber,qe="closest"):(qe="","xval"in _n&&($e=_n.xval,qe="x"),"yval"in _n&&(pt=_n.yval,qe=qe?"closest":"y"))}else void 0!==Yt&&void 0!==un?($e=Yt,pt=un):($e=ot[et],pt=it[et]);if(Ve=Ge.length,0!==At)if(Rt._module&&Rt._module.hoverPoints){var Tn=Rt._module.hoverPoints(ct,$e,pt,qe,{finiteRange:!0,hoverLayer:se._hoverlayer,hoversubplots:ge,gd:we});if(Tn)for(var Cn,vn=0;vn<Tn.length;vn++)k((Cn=Tn[vn]).x0)&&k(Cn.y0)&&Ge.push(B(Cn,Pe))}else T.log("Unrecognized trace type in hover:",Rt);if("closest"===Pe&&Ge.length>Ve&&(Ge.splice(0,Ve),Ot=Ge[0].distance),Se&&0!==_t&&0===Ge.length){ct.distance=_t,ct.index=!1;var rn=Rt._module.hoverPoints(ct,$e,pt,"closest",{hoverLayer:se._hoverlayer});if(rn&&(rn=rn.filter(function(Xn){return Xn.spikeDistance<=_t})),rn&&rn.length){var tn,fn=rn.filter(function(Xn){return Xn.xa.showspikes&&"hovered data"!==Xn.xa.spikesnap});if(fn.length){var yn=fn[0];k(yn.x0)&&k(yn.y0)&&(tn=Vt(yn),(!Qe.vLinePoint||Qe.vLinePoint.spikeDistance>tn.spikeDistance)&&(Qe.vLinePoint=tn))}var zn=rn.filter(function(Xn){return Xn.ya.showspikes&&"hovered data"!==Xn.ya.spikesnap});if(zn.length){var Vn=zn[0];k(Vn.x0)&&k(Vn.y0)&&(tn=Vt(Vn),(!Qe.hLinePoint||Qe.hLinePoint.spikeDistance>tn.spikeDistance)&&(Qe.hLinePoint=tn))}}}}}function Bt(Yt,un,_n){for(var Tn,Cn=null,vn=1/0,rn=0;rn<Yt.length;rn++)Oe&&Oe._id!==Yt[rn].xa._id||be&&be._id!==Yt[rn].ya._id||(Tn=Yt[rn].spikeDistance,_n&&0===rn&&(Tn=-1/0),Tn<=vn&&Tn<=un&&(Cn=Yt[rn],vn=Tn));return Cn}function Vt(Yt){return Yt?{xa:Yt.xa,ya:Yt.ya,x:void 0!==Yt.xSpike?Yt.xSpike:(Yt.x0+Yt.x1)/2,y:void 0!==Yt.ySpike?Yt.ySpike:(Yt.y0+Yt.y1)/2,distance:Yt.distance,spikeDistance:Yt.spikeDistance,curveNumber:Yt.trace.index,color:Yt.color,pointNumber:Yt.index}:null}Nt();var nn={fullLayout:se,container:se._hoverlayer,event:Te},gn=we._spikepoints;we._spikepoints={vLinePoint:Qe.vLinePoint,hLinePoint:Qe.hLinePoint};var an=function(){var Yt=Ge.filter(function(_n){return Oe&&Oe._id===_n.xa._id&&be&&be._id===_n.ya._id}),un=Ge.filter(function(_n){return!(Oe&&Oe._id===_n.xa._id&&be&&be._id===_n.ya._id)});Yt.sort(I),un.sort(I),Ge=function(_n,Tn){for(var Cn=Tn.charAt(0),vn=[],rn=[],tn=[],fn=0;fn<_n.length;fn++){var yn=_n[fn];f.traceIs(yn.trace,"bar-like")||f.traceIs(yn.trace,"box-violin")?tn.push(yn):yn.trace[Cn+"period"]?rn.push(yn):vn.push(yn)}return vn.concat(rn).concat(tn)}(Ge=Yt.concat(un),Pe)};an();var Xt=Pe.charAt(0),Gn=("x"===Xt||"y"===Xt)&&Ge[0]&&P[Ge[0].trace.type];if(Se&&0!==_t&&0!==Ge.length){var Dn=Bt(Ge.filter(function(Yt){return Yt.ya.showspikes}),_t,Gn);Qe.hLinePoint=Vt(Dn);var An=Bt(Ge.filter(function(Yt){return Yt.xa.showspikes}),_t,Gn);Qe.vLinePoint=Vt(An)}if(0===Ge.length){var cn=s.unhoverRaw(we,Te);return!Se||null===Qe.hLinePoint&&null===Qe.vLinePoint||q(gn)&&V(we,Qe,nn),cn}if(Se&&q(gn)&&V(we,Qe,nn),c.isXYhover(qe)&&0!==Ge[0].length&&"splom"!==Ge[0].trace.type){var bn=Ge[0],hn=(Ge=E[bn.trace.type]?Ge.filter(function(Yt){return Yt.trace.index===bn.trace.index}):[bn]).length;Nt(te("x",bn,se),te("y",bn,se));var wn,Ln=[],Pn={},Nn=0,jn=function(Yt){var un=E[Yt.trace.type]?O(Yt):Yt.trace.index;if(Pn[un]){var _n=Pn[un]-1,Tn=Ln[_n];_n>0&&Math.abs(Yt.distance)<Math.abs(Tn.distance)&&(Ln[_n]=Yt)}else Nn++,Pn[un]=Nn,Ln.push(Yt)};for(wn=0;wn<hn;wn++)jn(Ge[wn]);for(wn=Ge.length-1;wn>hn-1;wn--)jn(Ge[wn]);Ge=Ln,an()}var Fn=we._hoverdata,Jn=[],Zn=ee(we),hr=$(we);for(Pt=0;Pt<Ge.length;Pt++){var rr=Ge[Pt],dr=c.makeEventData(rr,rr.trace,rr.cd);if(!1!==rr.hovertemplate){var nr=!1;rr.cd[rr.index]&&rr.cd[rr.index].ht&&(nr=rr.cd[rr.index].ht),rr.hovertemplate=nr||rr.trace.hovertemplate||!1}if(rr.xa&&rr.ya){var Sr=rr.x0+rr.xa._offset,ln=rr.x1+rr.xa._offset,dn=rr.y0+rr.ya._offset,Un=rr.y1+rr.ya._offset,Mn=Math.min(Sr,ln),Hn=Math.max(Sr,ln),Wn=Math.min(dn,Un),$n=Math.max(dn,Un);dr.bbox={x0:Mn+hr,x1:Hn+hr,y0:Wn+Zn,y1:$n+Zn}}rr.eventData=[dr],Jn.push(dr)}we._hoverdata=Jn;var lr="y"===Pe&&(ut.length>1||Ge.length>1)||"closest"===Pe&&yt&&Ge.length>1,Cr=a.combine(se.plot_bgcolor||a.background,se.paper_bgcolor),sn=U(Ge,{gd:we,hovermode:Pe,rotateLabels:lr,bgColor:Cr,container:se._hoverlayer,outerContainer:se._paper.node(),commonLabelOpts:se.hoverlabel,hoverdistance:se.hoverdistance}),Sn=sn.hoverLabels;if(c.isUnifiedHover(Pe)||(function(Yt,un,_n,Tn){var Cn,vn,rn,tn,fn,yn,zn,Vn=un?"xa":"ya",Xn=un?"ya":"xa",Qn=0,pr=1,or=Yt.size(),fr=new Array(or),vr=0,cr=Tn.minX,Ar=Tn.maxX,Fr=Tn.minY,Lr=Tn.maxY,xr=function(ti){return ti*_n._invScaleX},Pr=function(ti){return ti*_n._invScaleY};function qr(ti){var _a=ti[0],vo=ti[ti.length-1];if(rn=vo.pos+vo.dp+vo.size-_a.pmax,(vn=_a.pmin-_a.pos-_a.dp+_a.size)>.01){for(fn=ti.length-1;fn>=0;fn--)ti[fn].dp+=vn;Cn=!1}if(!(rn<.01)){if(vn<-.01){for(fn=ti.length-1;fn>=0;fn--)ti[fn].dp-=rn;Cn=!1}if(Cn){var ka=0;for(tn=0;tn<ti.length;tn++)(yn=ti[tn]).pos+yn.dp+yn.size>_a.pmax&&ka++;for(tn=ti.length-1;tn>=0&&!(ka<=0);tn--)(yn=ti[tn]).pos>_a.pmax-1&&(yn.del=!0,ka--);for(tn=0;tn<ti.length&&!(ka<=0);tn++)if((yn=ti[tn]).pos<_a.pmin+1)for(yn.del=!0,ka--,rn=2*yn.size,fn=ti.length-1;fn>=0;fn--)ti[fn].dp-=rn;for(tn=ti.length-1;tn>=0&&!(ka<=0);tn--)(yn=ti[tn]).pos+yn.dp+yn.size>_a.pmax&&(yn.del=!0,ka--)}}}for(Yt.each(function(ti){var _a=ti[Vn],vo=ti[Xn],ka="x"===_a._id.charAt(0),vs=_a.range;0===vr&&vs&&vs[0]>vs[1]!==ka&&(pr=-1);var ma=0,Na=ka?_n.width:_n.height;if("x"===_n.hovermode||"y"===_n.hovermode){var Ho,as,tl=j(ti,un),co=ti.anchor,Co="end"===co?-1:1;if("middle"===co)as=(Ho=ti.crossPos+(ka?Pr(tl.y-ti.by/2):xr(ti.bx/2+ti.tx2width/2)))+(ka?Pr(ti.by):xr(ti.bx));else if(ka)as=(Ho=ti.crossPos+Pr(S+tl.y)-Pr(ti.by/2-S))+Pr(ti.by);else{var os=xr(Co*S+tl.x),ki=os+xr(Co*ti.bx);Ho=ti.crossPos+Math.min(os,ki),as=ti.crossPos+Math.max(os,ki)}ka?void 0!==Fr&&void 0!==Lr&&Math.min(as,Lr)-Math.max(Ho,Fr)>1&&("left"===vo.side?(ma=vo._mainLinePosition,Na=_n.width):Na=vo._mainLinePosition):void 0!==cr&&void 0!==Ar&&Math.min(as,Ar)-Math.max(Ho,cr)>1&&("top"===vo.side?(ma=vo._mainLinePosition,Na=_n.height):Na=vo._mainLinePosition)}fr[vr++]=[{datum:ti,traceIndex:ti.trace.index,dp:0,pos:ti.pos,posref:ti.posref,size:ti.by*(ka?v:1)/2,pmin:ma,pmax:Na}]}),fr.sort(function(ti,_a){return ti[0].posref-_a[0].posref||pr*(_a[0].traceIndex-ti[0].traceIndex)});!Cn&&Qn<=or;){for(Qn++,Cn=!0,tn=0;tn<fr.length-1;){var Qr=fr[tn],Fi=fr[tn+1],ta=Qr[Qr.length-1],Ta=Fi[0];if((vn=ta.pos+ta.dp+ta.size-Ta.pos-Ta.dp+Ta.size)>.01&&ta.pmin===Ta.pmin&&ta.pmax===Ta.pmax){for(fn=Fi.length-1;fn>=0;fn--)Fi[fn].dp+=vn;for(Qr.push.apply(Qr,Fi),fr.splice(tn+1,1),zn=0,fn=Qr.length-1;fn>=0;fn--)zn+=Qr[fn].dp;for(rn=zn/Qr.length,fn=Qr.length-1;fn>=0;fn--)Qr[fn].dp-=rn;Cn=!1}else tn++}fr.forEach(qr)}for(tn=fr.length-1;tn>=0;tn--){var Gi=fr[tn];for(fn=Gi.length-1;fn>=0;fn--){var pa=Gi[fn],qa=pa.datum;qa.offset=pa.dp,qa.del=pa.del}}}(Sn,lr,se,sn.commonLabelBoundingBox),Y(Sn,lr,se._invScaleX,se._invScaleY)),xe&&xe.tagName){var zt=f.getComponentMethod("annotations","hasClickToShow")(we,Jn);r(M.select(xe),zt?"pointer":"")}xe&&!ve&&function(Yt,un,_n){if(!_n||_n.length!==Yt._hoverdata.length)return!0;for(var Tn=_n.length-1;Tn>=0;Tn--){var Cn=_n[Tn],vn=Yt._hoverdata[Tn];if(Cn.curveNumber!==vn.curveNumber||String(Cn.pointNumber)!==String(vn.pointNumber)||String(Cn.pointNumbers)!==String(vn.pointNumbers))return!0}return!1}(we,0,Fn)&&(Fn&&we.emit("plotly_unhover",{event:Te,points:Fn}),we.emit("plotly_hover",{event:Te,points:we._hoverdata,xaxes:Ze,yaxes:nt,xvals:ot,yvals:it}))}(X,ae,ce,le,pe)})},F.loneHover=function(X,ae){var ce=!0;Array.isArray(X)||(ce=!1,X=[X]);var le=ae.gd,pe=ee(le),we=$(le),Te=U(X.map(function(xe){var Ce=xe._x0||xe.x0||xe.x||0,Oe=xe._x1||xe.x1||xe.x||0,be=xe._y0||xe.y0||xe.y||0,ue=xe._y1||xe.y1||xe.y||0,se=xe.eventData;if(se){var ge=Math.min(Ce,Oe),Ie=Math.max(Ce,Oe),ke=Math.min(be,ue),Se=Math.max(be,ue),Pe=xe.trace;if(f.traceIs(Pe,"gl3d")){var Fe=le._fullLayout[Pe.scene]._scene.container,Be=Fe.offsetLeft,me=Fe.offsetTop;ge+=Be,Ie+=Be,ke+=me,Se+=me}se.bbox={x0:ge+we,x1:Ie+we,y0:ke+pe,y1:Se+pe},ae.inOut_bbox&&ae.inOut_bbox.push(se.bbox)}else se=!1;return{color:xe.color||a.defaultLine,x0:xe.x0||xe.x||0,x1:xe.x1||xe.x||0,y0:xe.y0||xe.y||0,y1:xe.y1||xe.y||0,xLabel:xe.xLabel,yLabel:xe.yLabel,zLabel:xe.zLabel,text:xe.text,name:xe.name,idealAlign:xe.idealAlign,borderColor:xe.borderColor,fontFamily:xe.fontFamily,fontSize:xe.fontSize,fontColor:xe.fontColor,fontWeight:xe.fontWeight,fontStyle:xe.fontStyle,fontVariant:xe.fontVariant,nameLength:xe.nameLength,textAlign:xe.textAlign,trace:xe.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:xe.hovertemplate||!1,hovertemplateLabels:xe.hovertemplateLabels||!1,eventData:se}}),{gd:le,hovermode:"closest",rotateLabels:!1,bgColor:ae.bgColor||a.background,container:M.select(ae.container),outerContainer:ae.outerContainer||ae.container}).hoverLabels,ye=0,ve=0;return Te.sort(function(xe,Ce){return xe.y0-Ce.y0}).each(function(xe,Ce){var Oe=xe.y0-xe.by/2;xe.offset=Oe-5<ye?ye-Oe+5:0,ye=Oe+xe.by+xe.offset,Ce===ae.anchorIndex&&(ve=xe.offset)}).each(function(xe){xe.offset-=ve}),Y(Te,!1,le._fullLayout._invScaleX,le._fullLayout._invScaleY),ce?Te:Te.node()};var z=/<extra>([\s\S]*)<\/extra>/;function U(X,ae){var ce=ae.gd,le=ce._fullLayout,pe=ae.hovermode,we=ae.rotateLabels,Te=ae.bgColor,ye=ae.container,ve=ae.outerContainer,xe=ae.commonLabelOpts||{};if(0===X.length)return[[]];var Ce=ae.fontFamily||y.HOVERFONT,Oe=ae.fontSize||y.HOVERFONTSIZE,be=ae.fontWeight||le.font.weight,ue=ae.fontStyle||le.font.style,se=ae.fontVariant||le.font.variant,ge=ae.fontTextcase||le.font.textcase,Ie=ae.fontLineposition||le.font.lineposition,ke=ae.fontShadow||le.font.shadow,Se=X[0],Pe=Se.xa,Fe=Se.ya,Be=pe.charAt(0),me=Be+"Label",Me=Se[me];if(void 0===Me&&"multicategory"===Pe.type)for(var Le=0;Le<X.length&&void 0===(Me=X[Le][me]);Le++);var Ne=J(ce,ve),Re=Ne.top,He=Ne.width,Ze=Ne.height,nt=void 0!==Me&&Se.distance<=ae.hoverdistance&&("x"===pe||"y"===pe);if(nt){var ft,ht,Tt=!0;for(ft=0;ft<X.length;ft++)if(Tt&&void 0===X[ft].zLabel&&(Tt=!1),ht=X[ft].hoverinfo||X[ft].trace.hoverinfo){var At=Array.isArray(ht)?ht:ht.split("+");if(-1===At.indexOf("all")&&-1===At.indexOf(pe)){nt=!1;break}}Tt&&(nt=!1)}var _t=ye.selectAll("g.axistext").data(nt?[0]:[]);_t.enter().append("g").classed("axistext",!0),_t.exit().remove();var ot={minX:0,maxX:0,minY:0,maxY:0};if(_t.each(function(){var Xt=M.select(this),Gn=T.ensureSingle(Xt,"path","",function(Mn){Mn.style({"stroke-width":"1px"})}),Dn=T.ensureSingle(Xt,"text","",function(Mn){Mn.attr("data-notex",1)}),An=xe.bgcolor||a.defaultLine,cn=xe.bordercolor||a.contrast(An),bn=a.contrast(An),hn=xe.font,wn={weight:hn.weight||be,style:hn.style||ue,variant:hn.variant||se,textcase:hn.textcase||ge,lineposition:hn.lineposition||Ie,shadow:hn.shadow||ke,family:hn.family||Ce,size:hn.size||Oe,color:hn.color||bn};Gn.style({fill:An,stroke:cn}),Dn.text(Me).call(n.font,wn).call(i.positionText,0,0).call(i.convertToTspans,ce),Xt.attr("transform","");var Ln,Pn,Nn=J(ce,Dn.node());if("x"===pe){var jn="top"===Pe.side?"-":"";Dn.attr("text-anchor","middle").call(i.positionText,0,"top"===Pe.side?Re-Nn.bottom-S-w:Re-Nn.top+S+w),Pn=Fe._offset+("top"===Pe.side?0:Fe._length);var Fn=Nn.width/2+w,Jn=Ln=Pe._offset+(Se.x0+Se.x1)/2;Ln<Fn?Jn=Fn:Ln>le.width-Fn&&(Jn=le.width-Fn),Gn.attr("d","M"+(Ln-Jn)+",0L"+(Ln-Jn+S)+","+jn+S+"H"+Fn+"v"+jn+(2*w+Nn.height)+"H"+-Fn+"V"+jn+S+"H"+(Ln-Jn-S)+"Z"),ot.minX=(Ln=Jn)-Fn,ot.maxX=Ln+Fn,"top"===Pe.side?(ot.minY=Pn-(2*w+Nn.height),ot.maxY=Pn-w):(ot.minY=Pn+w,ot.maxY=Pn+(2*w+Nn.height))}else{var Zn,hr,rr;"right"===Fe.side?(Zn="start",hr=1,rr="",Ln=Pe._offset+Pe._length):(Zn="end",hr=-1,rr="-",Ln=Pe._offset),Pn=Fe._offset+(Se.y0+Se.y1)/2,Dn.attr("text-anchor",Zn),Gn.attr("d","M0,0L"+rr+S+","+S+"V"+(w+Nn.height/2)+"h"+rr+(2*w+Nn.width)+"V-"+(w+Nn.height/2)+"H"+rr+S+"V-"+S+"Z"),ot.minY=Pn-(w+Nn.height/2),ot.maxY=Pn+(w+Nn.height/2),"right"===Fe.side?(ot.minX=Ln+S,ot.maxX=Ln+S+(2*w+Nn.width)):(ot.minX=Ln-S-(2*w+Nn.width),ot.maxX=Ln-S);var dr,nr=Nn.height/2,Sr=Re-Nn.top-nr,ln="clip"+le._uid+"commonlabel"+Fe._id;if(Ln<Nn.width+2*w+S){dr="M-"+(S+w)+"-"+nr+"h-"+(Nn.width-w)+"V"+nr+"h"+(Nn.width-w)+"Z";var dn=Nn.width-Ln+w;i.positionText(Dn,dn,Sr),"end"===Zn&&Dn.selectAll("tspan").each(function(){var Mn=M.select(this),Hn=n.tester.append("text").text(Mn.text()).call(n.font,wn),Wn=J(ce,Hn.node());Math.round(Wn.width)<Math.round(Nn.width)&&Mn.attr("x",dn-Wn.width),Hn.remove()})}else i.positionText(Dn,hr*(w+S),Sr),dr=null;var Un=le._topclips.selectAll("#"+ln).data(dr?[0]:[]);Un.enter().append("clipPath").attr("id",ln).append("path"),Un.exit().remove(),Un.select("path").attr("d",dr),n.setClipUrl(Dn,dr?ln:null,ce)}Xt.attr("transform",p(Ln,Pn))}),c.isUnifiedHover(pe)){ye.selectAll("g.hovertext").remove();var it=X.filter(function(Xt){return"none"!==Xt.hoverinfo});if(0===it.length)return[];var Pt=le.hoverlabel,jt=Pt.font,Rt={font:jt};d({showlegend:!0,legend:{title:{text:Me,font:jt},font:jt,bgcolor:Pt.bgcolor,bordercolor:Pt.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:le.legend?le.legend.traceorder:void 0,orientation:"v"}},Rt,ce._fullData);var Je=Rt.legend;Je.entries=[];for(var et=0;et<it.length;et++){var qe=it[et];if("none"!==qe.hoverinfo){var $e=R(qe,!0,pe,le,Me),pt=$e[0],ct=$e[1];qe.name=ct,qe.text=""!==ct?ct+" : "+pt:pt;var Ve=qe.cd[qe.index];Ve&&(Ve.mc&&(qe.mc=Ve.mc),Ve.mcc&&(qe.mc=Ve.mcc),Ve.mlc&&(qe.mlc=Ve.mlc),Ve.mlcc&&(qe.mlc=Ve.mlcc),Ve.mlw&&(qe.mlw=Ve.mlw),Ve.mrc&&(qe.mrc=Ve.mrc),Ve.dir&&(qe.dir=Ve.dir)),qe._distinct=!0,Je.entries.push([qe])}}Je.entries.sort(function(Xt,Gn){return Xt[0].trace.index-Gn[0].trace.index}),Je.layer=ye,Je._inHover=!0,Je._groupTitleFont=Pt.grouptitlefont,m(ce,Je);var Ge,ut,Qe,yt,wt=ye.select("g.legend"),kt=J(ce,wt.node()),vt=kt.width+2*w,Lt=kt.height+2*w,St=it[0],Ot=(St.x0+St.x1)/2,Nt=(St.y0+St.y1)/2,Bt=!(f.traceIs(St.trace,"bar-like")||f.traceIs(St.trace,"box-violin"));"y"===Be?Bt?(ut=Nt-w,Ge=Nt+w):(ut=Math.min.apply(null,it.map(function(Xt){return Math.min(Xt.y0,Xt.y1)})),Ge=Math.max.apply(null,it.map(function(Xt){return Math.max(Xt.y0,Xt.y1)}))):ut=Ge=T.mean(it.map(function(Xt){return(Xt.y0+Xt.y1)/2}))-Lt/2,"x"===Be?Bt?(Qe=Ot+w,yt=Ot-w):(Qe=Math.max.apply(null,it.map(function(Xt){return Math.max(Xt.x0,Xt.x1)})),yt=Math.min.apply(null,it.map(function(Xt){return Math.min(Xt.x0,Xt.x1)}))):Qe=yt=T.mean(it.map(function(Xt){return(Xt.x0+Xt.x1)/2}))-vt/2;var Vt,nn,gn=Pe._offset,Jt=Fe._offset;return yt+=gn-vt,ut+=Jt-Lt,Vt=(Qe+=gn)+vt<He&&Qe>=0?Qe:yt+vt<He&&yt>=0?yt:gn+vt<He?gn:Qe-Ot<Ot-yt+vt?He-vt:0,nn=(Ge+=Jt)+Lt<Ze&&Ge>=0?Ge:ut+Lt<Ze&&ut>=0?ut:Jt+Lt<Ze?Jt:Ge-Nt<Nt-ut+Lt?Ze-Lt:0,wt.attr("transform",p((Vt+=w)-1,(nn+=w)-1)),wt}var an=ye.selectAll("g.hovertext").data(X,function(Xt){return O(Xt)});return an.enter().append("g").classed("hovertext",!0).each(function(){var Xt=M.select(this);Xt.append("rect").call(a.fill,a.addOpacity(Te,.8)),Xt.append("text").classed("name",!0),Xt.append("path").style("stroke-width","1px"),Xt.append("text").classed("nums",!0).call(n.font,{weight:be,style:ue,variant:se,textcase:ge,lineposition:Ie,shadow:ke,family:Ce,size:Oe})}),an.exit().remove(),an.each(function(Xt){var Gn=M.select(this).attr("transform",""),Dn=Xt.color;Array.isArray(Dn)&&(Dn=Dn[Xt.eventData[0].pointNumber]);var An=Xt.bgcolor||Dn,cn=a.combine(a.opacity(An)?An:a.defaultLine,Te),bn=a.combine(a.opacity(Dn)?Dn:a.defaultLine,Te),hn=Xt.borderColor||a.contrast(cn),wn=R(Xt,nt,pe,le,Me,Gn),Ln=wn[0],Pn=wn[1],Nn=Gn.select("text.nums").call(n.font,{family:Xt.fontFamily||Ce,size:Xt.fontSize||Oe,color:Xt.fontColor||hn,weight:Xt.fontWeight||be,style:Xt.fontStyle||ue,variant:Xt.fontVariant||se,textcase:Xt.fontTextcase||ge,lineposition:Xt.fontLineposition||Ie,shadow:Xt.fontShadow||ke}).text(Ln).attr("data-notex",1).call(i.positionText,0,0).call(i.convertToTspans,ce),jn=Gn.select("text.name"),Fn=0,Jn=0;if(Pn&&Pn!==Ln){jn.call(n.font,{family:Xt.fontFamily||Ce,size:Xt.fontSize||Oe,color:bn,weight:Xt.fontWeight||be,style:Xt.fontStyle||ue,variant:Xt.fontVariant||se,textcase:Xt.fontTextcase||ge,lineposition:Xt.fontLineposition||Ie,shadow:Xt.fontShadow||ke}).text(Pn).attr("data-notex",1).call(i.positionText,0,0).call(i.convertToTspans,ce);var Zn=J(ce,jn.node());Fn=Zn.width+2*w,Jn=Zn.height+2*w}else jn.remove(),Gn.select("rect").remove();Gn.select("path").style({fill:cn,stroke:hn});var hr=Xt.xa._offset+(Xt.x0+Xt.x1)/2,rr=Xt.ya._offset+(Xt.y0+Xt.y1)/2,dr=Math.abs(Xt.x1-Xt.x0),nr=Math.abs(Xt.y1-Xt.y0),Sr=J(ce,Nn.node()),ln=Sr.width/le._invScaleX,dn=Sr.height/le._invScaleY;Xt.ty0=(Re-Sr.top)/le._invScaleY,Xt.bx=ln+2*w,Xt.by=Math.max(dn+2*w,Jn),Xt.anchor="start",Xt.txwidth=ln,Xt.tx2width=Fn,Xt.offset=0;var Un,Mn,Hn=(ln+S+w+Fn)*le._invScaleX;if(we)Xt.pos=hr,Un=rr+nr/2+Hn<=Ze,Mn=rr-nr/2-Hn>=0,"top"!==Xt.idealAlign&&Un||!Mn?Un?(rr+=nr/2,Xt.anchor="start"):Xt.anchor="middle":(rr-=nr/2,Xt.anchor="end"),Xt.crossPos=rr;else{if(Xt.pos=rr,Un=hr+dr/2+Hn<=He,Mn=hr-dr/2-Hn>=0,"left"!==Xt.idealAlign&&Un||!Mn)if(Un)hr+=dr/2,Xt.anchor="start";else{Xt.anchor="middle";var Wn=Hn/2,$n=hr+Wn-He,lr=hr-Wn;$n>0&&(hr-=$n),lr<0&&(hr+=-lr)}else hr-=dr/2,Xt.anchor="end";Xt.crossPos=hr}Nn.attr("text-anchor",Xt.anchor),Fn&&jn.attr("text-anchor",Xt.anchor),Gn.attr("transform",p(hr,rr)+(we?l(g):""))}),{hoverLabels:an,commonLabelBoundingBox:ot}}function R(X,ae,ce,le,pe,we){var Te="",ye="";void 0!==X.nameOverride&&(X.name=X.nameOverride),X.name&&(X.trace._meta&&(X.name=T.templateString(X.name,X.trace._meta)),Te=ie(X.name,X.nameLength));var ve=ce.charAt(0);void 0!==X.zLabel?(void 0!==X.xLabel&&(ye+="x: "+X.xLabel+"<br>"),void 0!==X.yLabel&&(ye+="y: "+X.yLabel+"<br>"),"choropleth"!==X.trace.type&&"choroplethmapbox"!==X.trace.type&&(ye+=(ye?"z: ":"")+X.zLabel)):ae&&X[ve+"Label"]===pe?ye=X[("x"===ve?"y":"x")+"Label"]||"":void 0===X.xLabel?void 0!==X.yLabel&&"scattercarpet"!==X.trace.type&&(ye=X.yLabel):ye=void 0===X.yLabel?X.xLabel:"("+X.xLabel+", "+X.yLabel+")",!X.text&&0!==X.text||Array.isArray(X.text)||(ye+=(ye?"<br>":"")+X.text),void 0!==X.extraText&&(ye+=(ye?"<br>":"")+X.extraText),we&&""===ye&&!X.hovertemplate&&(""===Te&&we.remove(),ye=Te);var Ce=X.hovertemplate||!1;if(Ce){var Oe=X.hovertemplateLabels||X;X[ve+"Label"]!==pe&&(Oe[ve+"other"]=Oe[ve+"Val"],Oe[ve+"otherLabel"]=Oe[ve+"Label"]),ye=(ye=T.hovertemplateString(Ce,Oe,le._d3locale,X.eventData[0]||{},X.trace._meta)).replace(z,function(be,ue){return Te=ie(ue,X.nameLength),""})}return[ye,Te]}function j(X,ae){var ce=0,le=X.offset;return ae&&(le*=-h,ce=X.offset*b),{x:ce,y:le}}function Y(X,ae,ce,le){var pe=function(Te){return Te*ce},we=function(Te){return Te*le};X.each(function(Te){var ye=M.select(this);if(Te.del)return ye.remove();var ve,xe,Ce,Oe,be=ye.select("text.nums"),ue=Te.anchor,se="end"===ue?-1:1,ge=(Oe=(Ce=(xe={start:1,end:-1,middle:0}[(ve=Te).anchor])*(S+w))+xe*(ve.txwidth+w),"middle"===ve.anchor&&(Ce-=ve.tx2width/2,Oe+=ve.txwidth/2+w),{alignShift:xe,textShiftX:Ce,text2ShiftX:Oe}),Ie=j(Te,ae),ke=Ie.x,Se=Ie.y,Pe="middle"===ue;ye.select("path").attr("d",Pe?"M-"+pe(Te.bx/2+Te.tx2width/2)+","+we(Se-Te.by/2)+"h"+pe(Te.bx)+"v"+we(Te.by)+"h-"+pe(Te.bx)+"Z":"M0,0L"+pe(se*S+ke)+","+we(S+Se)+"v"+we(Te.by/2-S)+"h"+pe(se*Te.bx)+"v-"+we(Te.by)+"H"+pe(se*S+ke)+"V"+we(Se-S)+"Z");var Fe=ke+ge.textShiftX,Be=Se+Te.ty0-Te.by/2+w,me=Te.textAlign||"auto";"auto"!==me&&("left"===me&&"start"!==ue?(be.attr("text-anchor","start"),Fe=Pe?-Te.bx/2-Te.tx2width/2+w:-Te.bx-w):"right"===me&&"end"!==ue&&(be.attr("text-anchor","end"),Fe=Pe?Te.bx/2-Te.tx2width/2-w:Te.bx+w)),be.call(i.positionText,pe(Fe),we(Be)),Te.tx2width&&(ye.select("text.name").call(i.positionText,pe(ge.text2ShiftX+ge.alignShift*w+ke),we(Se+Te.ty0-Te.by/2+w)),ye.select("rect").call(n.setRect,pe(ge.text2ShiftX+(ge.alignShift-1)*Te.tx2width/2+ke),we(Se-Te.by/2-1),pe(Te.tx2width),we(Te.by+2)))})}function B(X,ae){var ce=X.index,le=X.trace||{},pe=X.cd[0],we=X.cd[ce]||{};function Te(be){return be||k(be)&&0===be}var ye=Array.isArray(ce)?function(be,ue){var se=T.castOption(pe,ce,be);return Te(se)?se:T.extractOption({},le,"",ue)}:function(be,ue){return T.extractOption(we,le,be,ue)};function ve(be,ue,se){var ge=ye(ue,se);Te(ge)&&(X[be]=ge)}if(ve("hoverinfo","hi","hoverinfo"),ve("bgcolor","hbg","hoverlabel.bgcolor"),ve("borderColor","hbc","hoverlabel.bordercolor"),ve("fontFamily","htf","hoverlabel.font.family"),ve("fontSize","hts","hoverlabel.font.size"),ve("fontColor","htc","hoverlabel.font.color"),ve("fontWeight","htw","hoverlabel.font.weight"),ve("fontStyle","hty","hoverlabel.font.style"),ve("fontVariant","htv","hoverlabel.font.variant"),ve("nameLength","hnl","hoverlabel.namelength"),ve("textAlign","hta","hoverlabel.align"),X.posref="y"===ae||"closest"===ae&&"h"===le.orientation?X.xa._offset+(X.x0+X.x1)/2:X.ya._offset+(X.y0+X.y1)/2,X.x0=T.constrain(X.x0,0,X.xa._length),X.x1=T.constrain(X.x1,0,X.xa._length),X.y0=T.constrain(X.y0,0,X.ya._length),X.y1=T.constrain(X.y1,0,X.ya._length),void 0!==X.xLabelVal&&(X.xLabel="xLabel"in X?X.xLabel:u.hoverLabelText(X.xa,X.xLabelVal,le.xhoverformat),X.xVal=X.xa.c2d(X.xLabelVal)),void 0!==X.yLabelVal&&(X.yLabel="yLabel"in X?X.yLabel:u.hoverLabelText(X.ya,X.yLabelVal,le.yhoverformat),X.yVal=X.ya.c2d(X.yLabelVal)),void 0!==X.zLabelVal&&void 0===X.zLabel&&(X.zLabel=String(X.zLabelVal)),!(isNaN(X.xerr)||"log"===X.xa.type&&X.xerr<=0)){var xe=u.tickText(X.xa,X.xa.c2l(X.xerr),"hover").text;X.xLabel+=void 0!==X.xerrneg?" +"+xe+" / -"+u.tickText(X.xa,X.xa.c2l(X.xerrneg),"hover").text:" \xb1 "+xe,"x"===ae&&(X.distance+=1)}if(!(isNaN(X.yerr)||"log"===X.ya.type&&X.yerr<=0)){var Ce=u.tickText(X.ya,X.ya.c2l(X.yerr),"hover").text;X.yLabel+=void 0!==X.yerrneg?" +"+Ce+" / -"+u.tickText(X.ya,X.ya.c2l(X.yerrneg),"hover").text:" \xb1 "+Ce,"y"===ae&&(X.distance+=1)}var Oe=X.hoverinfo||X.trace.hoverinfo;return Oe&&"all"!==Oe&&(-1===(Oe=Array.isArray(Oe)?Oe:Oe.split("+")).indexOf("x")&&(X.xLabel=void 0),-1===Oe.indexOf("y")&&(X.yLabel=void 0),-1===Oe.indexOf("z")&&(X.zLabel=void 0),-1===Oe.indexOf("text")&&(X.text=void 0),-1===Oe.indexOf("name")&&(X.name=void 0)),X}function V(X,ae,ce){var le,pe,we=ce.container,Te=ce.fullLayout,ye=Te._size,ve=ce.event,xe=!!ae.hLinePoint,Ce=!!ae.vLinePoint;if(we.selectAll(".spikeline").remove(),Ce||xe){var Oe=a.combine(Te.plot_bgcolor,Te.paper_bgcolor);if(xe){var be,ue,se=ae.hLinePoint;le=se&&se.xa,"cursor"===(pe=se&&se.ya).spikesnap?(be=ve.pointerX,ue=ve.pointerY):(be=le._offset+se.x,ue=pe._offset+se.y);var ge,Ie,ke=o.readability(se.color,Oe)<1.5?a.contrast(Oe):se.color,Se=pe.spikemode,Pe=pe.spikethickness,Fe=pe.spikecolor||ke,Be=u.getPxPosition(X,pe);if(-1!==Se.indexOf("toaxis")||-1!==Se.indexOf("across")){if(-1!==Se.indexOf("toaxis")&&(ge=Be,Ie=be),-1!==Se.indexOf("across")){var me=pe._counterDomainMin,Me=pe._counterDomainMax;"free"===pe.anchor&&(me=Math.min(me,pe.position),Me=Math.max(Me,pe.position)),ge=ye.l+me*ye.w,Ie=ye.l+Me*ye.w}we.insert("line",":first-child").attr({x1:ge,x2:Ie,y1:ue,y2:ue,"stroke-width":Pe,stroke:Fe,"stroke-dasharray":n.dashStyle(pe.spikedash,Pe)}).classed("spikeline",!0).classed("crisp",!0),we.insert("line",":first-child").attr({x1:ge,x2:Ie,y1:ue,y2:ue,"stroke-width":Pe+2,stroke:Oe}).classed("spikeline",!0).classed("crisp",!0)}-1!==Se.indexOf("marker")&&we.insert("circle",":first-child").attr({cx:Be+("right"!==pe.side?Pe:-Pe),cy:ue,r:Pe,fill:Fe}).classed("spikeline",!0)}if(Ce){var Le,Ne,Re=ae.vLinePoint;pe=Re&&Re.ya,"cursor"===(le=Re&&Re.xa).spikesnap?(Le=ve.pointerX,Ne=ve.pointerY):(Le=le._offset+Re.x,Ne=pe._offset+Re.y);var He,Ze,nt=o.readability(Re.color,Oe)<1.5?a.contrast(Oe):Re.color,ft=le.spikemode,ht=le.spikethickness,Tt=le.spikecolor||nt,At=u.getPxPosition(X,le);if(-1!==ft.indexOf("toaxis")||-1!==ft.indexOf("across")){if(-1!==ft.indexOf("toaxis")&&(He=At,Ze=Ne),-1!==ft.indexOf("across")){var _t=le._counterDomainMin,ot=le._counterDomainMax;"free"===le.anchor&&(_t=Math.min(_t,le.position),ot=Math.max(ot,le.position)),He=ye.t+(1-ot)*ye.h,Ze=ye.t+(1-_t)*ye.h}we.insert("line",":first-child").attr({x1:Le,x2:Le,y1:He,y2:Ze,"stroke-width":ht,stroke:Tt,"stroke-dasharray":n.dashStyle(le.spikedash,ht)}).classed("spikeline",!0).classed("crisp",!0),we.insert("line",":first-child").attr({x1:Le,x2:Le,y1:He,y2:Ze,"stroke-width":ht+2,stroke:Oe}).classed("spikeline",!0).classed("crisp",!0)}-1!==ft.indexOf("marker")&&we.insert("circle",":first-child").attr({cx:Le,cy:At-("top"!==le.side?ht:-ht),r:ht,fill:Tt}).classed("spikeline",!0)}}}function q(X,ae){return!ae||ae.vLinePoint!==X._spikepoints.vLinePoint||ae.hLinePoint!==X._spikepoints.hLinePoint}function ie(X,ae){return i.plainText(X||"",{len:ae,allowedTags:["br","sub","sup","b","i","em"]})}function te(X,ae,ce){var le=ae[X+"a"],pe=ae[X+"Val"],we=ae.cd[0];if("category"===le.type||"multicategory"===le.type)pe=le._categoriesMap[pe];else if("date"===le.type){var Te=ae.trace[X+"periodalignment"];if(Te){var ye=ae.cd[ae.index],ve=ye[X+"Start"];void 0===ve&&(ve=ye[X]);var xe=ye[X+"End"];void 0===xe&&(xe=ye[X]);var Ce=xe-ve;"end"===Te?pe+=Ce:"middle"===Te&&(pe+=Ce/2)}pe=le.d2c(pe)}return we&&we.t&&we.t.posLetter===le._id&&("group"!==ce.boxmode&&"group"!==ce.violinmode||(pe+=we.t.dPos)),pe}function ee(X){return X.offsetTop+X.clientTop}function $(X){return X.offsetLeft+X.clientLeft}function J(X,ae){var ce=X._fullLayout,le=ae.getBoundingClientRect(),pe=le.left,we=le.top,Te=pe+le.width,ye=we+le.height,ve=T.apply3DTransform(ce._invTransform)(pe,we),xe=T.apply3DTransform(ce._invTransform)(Te,ye),Ce=ve[0],Oe=ve[1],be=xe[0],ue=xe[1];return{x:Ce,y:Oe,width:be-Ce,height:ue-Oe,top:Math.min(Oe,ue),left:Math.min(Ce,be),right:Math.max(Ce,be),bottom:Math.max(Oe,ue)}}},16132:function(ne,F,e){"use strict";var M=e(3400),k=e(76308),o=e(10624).isUnifiedHover;ne.exports=function(T,_,p,l){l=l||{};var t=_.legend;function i(r){l.font[r]||(l.font[r]=t?_.legend.font[r]:_.font[r])}_&&o(_.hovermode)&&(l.font||(l.font={}),i("size"),i("family"),i("color"),i("weight"),i("style"),i("variant"),t?(l.bgcolor||(l.bgcolor=k.combine(_.legend.bgcolor,_.paper_bgcolor)),l.bordercolor||(l.bordercolor=_.legend.bordercolor)):l.bgcolor||(l.bgcolor=_.paper_bgcolor)),p("hoverlabel.bgcolor",l.bgcolor),p("hoverlabel.bordercolor",l.bordercolor),p("hoverlabel.namelength",l.namelength),M.coerceFont(p,"hoverlabel.font",l.font),p("hoverlabel.align",l.align)}},41008:function(ne,F,e){"use strict";var M=e(3400),k=e(65460);ne.exports=function(o,T){function _(p,l){return void 0!==T[p]?T[p]:M.coerce(o,T,k,p,l)}return _("clickmode"),_("hoversubplots"),_("hovermode")}},93024:function(ne,F,e){"use strict";var M=e(33428),k=e(3400),o=e(86476),T=e(10624),_=e(65460),p=e(83292);ne.exports={moduleType:"component",name:"fx",constants:e(92456),schema:{layout:_},attributes:e(55756),layoutAttributes:_,supplyLayoutGlobalDefaults:e(81976),supplyDefaults:e(95448),supplyLayoutDefaults:e(88336),calc:e(55056),getDistanceFunction:T.getDistanceFunction,getClosest:T.getClosest,inbox:T.inbox,quadrature:T.quadrature,appendArrayPointValue:T.appendArrayPointValue,castHoverOption:function(l,t,i){return k.castOption(l,t,"hoverlabel."+i)},castHoverinfo:function(l,t,i){return k.castOption(l,i,"hoverinfo",function(r){return k.coerceHoverinfo({hoverinfo:r},{_module:l._module},t)})},hover:p.hover,unhover:o.unhover,loneHover:p.loneHover,loneUnhover:function(l){var t=k.isD3Selection(l)?l:M.select(l);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()},click:e(62376)}},65460:function(ne,F,e){"use strict";var M=e(92456),k=e(25376),o=k({editType:"none"});o.family.dflt=M.HOVERFONT,o.size.dflt=M.HOVERFONTSIZE,ne.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoversubplots:{valType:"enumerated",values:["single","overlaying","axis"],dflt:"overlaying",editType:"none"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:o,grouptitlefont:k({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},88336:function(ne,F,e){"use strict";var M=e(3400),k=e(65460),o=e(41008),T=e(16132);ne.exports=function(_,p){function l(n,a){return M.coerce(_,p,k,n,a)}o(_,p)&&(l("hoverdistance"),l("spikedistance")),"select"===l("dragmode")&&l("selectdirection");var t=p._has("mapbox"),i=p._has("geo"),r=p._basePlotModules.length;"zoom"===p.dragmode&&((t||i)&&1===r||t&&i&&2===r)&&(p.dragmode="pan"),T(_,p,l),M.coerceFont(l,"hoverlabel.grouptitlefont",p.hoverlabel.font)}},81976:function(ne,F,e){"use strict";var M=e(3400),k=e(16132),o=e(65460);ne.exports=function(T,_){k(T,_,function(p,l){return M.coerce(T,_,o,p,l)})}},12704:function(ne,F,e){"use strict";var M=e(3400),k=e(53756).counter,o=e(86968).u,T=e(33816).idRegex,_=e(31780),p={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[k("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:o({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function l(r,n,a){var s=n[a+"axes"],u=Object.keys((r._splomAxes||{})[a]||{});return Array.isArray(s)?s:u.length?u:void 0}function t(r,n,a,s,u,f){var c=n(r+"gap",a),y=n("domain."+r);n(r+"side",s);for(var d=new Array(u),m=y[0],g=(y[1]-m)/(u-c),x=g*(1-c),v=0;v<u;v++){var b=m+g*v;d[f?u-1-v:v]=[b,b+x]}return d}function i(r,n,a,s,u){var f,c=new Array(a);function y(d,m){-1!==n.indexOf(m)&&void 0===s[m]?(c[d]=m,s[m]=d):c[d]=""}if(Array.isArray(r))for(f=0;f<a;f++)y(f,r[f]);else for(y(0,u),f=1;f<a;f++)y(f,u+(f+1));return c}ne.exports={moduleType:"component",name:"grid",schema:{layout:{grid:p}},layoutAttributes:p,sizeDefaults:function(r,n){var a=r.grid||{},s=l(n,a,"x"),u=l(n,a,"y");if(r.grid||s||u){var f,c,y=Array.isArray(a.subplots)&&Array.isArray(a.subplots[0]),d=Array.isArray(s),m=Array.isArray(u),g=d&&s!==a.xaxes&&m&&u!==a.yaxes;y?(f=a.subplots.length,c=a.subplots[0].length):(m&&(f=u.length),d&&(c=s.length));var x=_.newContainer(n,"grid"),v=I("rows",f),b=I("columns",c);if(v*b>1){y||d||m||"independent"===I("pattern")&&(y=!0),x._hasSubplotGrid=y;var h,S,w="top to bottom"===I("roworder"),P=y?.3:.1;g&&n._splomGridDflt&&(h=n._splomGridDflt.xside,S=n._splomGridDflt.yside),x._domains={x:t("x",I,y?.2:.1,h,b),y:t("y",I,P,S,v,w)}}else delete n.grid}function I(O,z){return M.coerce(a,x,p,O,z)}},contentDefaults:function(r,n){var a=n.grid;if(a&&a._domains){var s,u,f,c,y,d,m,g=r.grid||{},x=n._subplots,v=a._hasSubplotGrid,b=a.rows,h=a.columns,S="independent"===a.pattern,w=a._axisMap={};if(v){var E=g.subplots||[];d=a.subplots=new Array(b);var P=1;for(s=0;s<b;s++){var I=d[s]=new Array(h),O=E[s]||[];for(u=0;u<h;u++)if(S?(y=1===P?"xy":"x"+P+"y"+P,P++):y=O[u],I[u]="",-1!==x.cartesian.indexOf(y)){if(m=y.indexOf("y"),f=y.slice(0,m),c=y.slice(m),void 0!==w[f]&&w[f]!==u||void 0!==w[c]&&w[c]!==s)continue;I[u]=y,w[f]=u,w[c]=s}}}else{var z=l(n,g,"x"),U=l(n,g,"y");a.xaxes=i(z,x.xaxis,h,w,"x"),a.yaxes=i(U,x.yaxis,b,w,"y")}var R=a._anchors={},j="top to bottom"===a.roworder;for(var Y in w){var B,V,q,ie=Y.charAt(0),te=a[ie+"side"];if(te.length<8)R[Y]="free";else if("x"===ie){if("t"===te.charAt(0)===j?(B=0,V=1,q=b):(B=b-1,V=-1,q=-1),v){var ee=w[Y];for(s=B;s!==q;s+=V)if((y=d[s][ee])&&(m=y.indexOf("y"),y.slice(0,m)===Y)){R[Y]=y.slice(m);break}}else for(s=B;s!==q;s+=V)if(-1!==x.cartesian.indexOf(Y+(c=a.yaxes[s]))){R[Y]=c;break}}else if("l"===te.charAt(0)?(B=0,V=1,q=h):(B=h-1,V=-1,q=-1),v){var $=w[Y];for(s=B;s!==q;s+=V)if((y=d[$][s])&&(m=y.indexOf("y"),y.slice(m)===Y)){R[Y]=y.slice(0,m);break}}else for(s=B;s!==q;s+=V)if(-1!==x.cartesian.indexOf((f=a.xaxes[s])+Y)){R[Y]=f;break}}}}}},65760:function(ne,F,e){"use strict";var M=e(33816),k=e(31780).templatedArray;e(36208),ne.exports=k("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",M.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",M.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},63556:function(ne,F,e){"use strict";var M=e(38248),k=e(36896);ne.exports=function(o,T,_,p){T=T||{};var l="log"===_&&"linear"===T.type;if(l||"linear"===_&&"log"===T.type)for(var i,r,n=o._fullLayout.images,a=T._id.charAt(0),s=0;s<n.length;s++)if(r="images["+s+"].",(i=n[s])[a+"ref"]===T._id){var u=i[a],f=i["size"+a],c=null,y=null;if(l){c=k(u,T.range);var d=f/Math.pow(10,c)/2;y=2*Math.log(d+Math.sqrt(1+d*d))/Math.LN10}else y=(c=Math.pow(10,u))*(Math.pow(10,f/2)-Math.pow(10,-f/2));M(c)?M(y)||(y=null):(c=null,y=null),p(r+a,c),p(r+"size"+a,y)}}},25024:function(ne,F,e){"use strict";var M=e(3400),k=e(54460),o=e(51272),T=e(65760);function _(p,l,t){function i(c,y){return M.coerce(p,l,T,c,y)}var r=i("source");if(!i("visible",!!r))return l;i("layer"),i("xanchor"),i("yanchor"),i("sizex"),i("sizey"),i("sizing"),i("opacity");for(var n={_fullLayout:t},a=["x","y"],s=0;s<2;s++){var u=a[s],f=k.coerceRef(p,l,n,u,"paper",void 0);"paper"!==f&&k.getFromId(n,f)._imgIndices.push(l._index),k.coercePosition(l,n,i,f,u,0)}return l}ne.exports=function(p,l){o(p,l,{name:"images",handleItemDefaults:_})}},60963:function(ne,F,e){"use strict";var M=e(33428),k=e(43616),o=e(54460),T=e(79811),_=e(9616);ne.exports=function(p){var l,t,i=p._fullLayout,r=[],n={},a=[];for(t=0;t<i.images.length;t++){var s=i.images[t];if(s.visible)if("below"===s.layer&&"paper"!==s.xref&&"paper"!==s.yref){l=T.ref2id(s.xref)+T.ref2id(s.yref);var u=i._plots[l];if(!u){a.push(s);continue}u.mainplot&&(l=u.mainplot.id),n[l]||(n[l]=[]),n[l].push(s)}else"above"===s.layer?r.push(s):a.push(s)}var f={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},c={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function y(h){var S=M.select(this);if(this._imgSrc!==h.source)if(S.attr("xmlns",_.svg),h.source&&"data:"===h.source.slice(0,5))S.attr("xlink:href",h.source),this._imgSrc=h.source;else{var w=new Promise(function(E){var P=new Image;function I(){S.remove(),E()}this.img=P,P.setAttribute("crossOrigin","anonymous"),P.onerror=I,P.onload=function(){var O=document.createElement("canvas");O.width=this.width,O.height=this.height,O.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var z=O.toDataURL("image/png");S.attr("xlink:href",z),E()},S.on("error",I),P.src=h.source,this._imgSrc=h.source}.bind(this));p._promises.push(w)}}function d(h){var S,w,E=M.select(this),P=o.getFromId(p,h.xref),I=o.getFromId(p,h.yref),O="domain"===o.getRefType(h.xref),z="domain"===o.getRefType(h.yref),U=i._size;S=void 0!==P?"string"==typeof h.xref&&O?P._length*h.sizex:Math.abs(P.l2p(h.sizex)-P.l2p(0)):h.sizex*U.w,w=void 0!==I?"string"==typeof h.yref&&z?I._length*h.sizey:Math.abs(I.l2p(h.sizey)-I.l2p(0)):h.sizey*U.h;var R,j,Y=S*f[h.xanchor].offset,B=w*c[h.yanchor].offset,V=f[h.xanchor].sizing+c[h.yanchor].sizing;switch(R=void 0!==P?"string"==typeof h.xref&&O?P._length*h.x+P._offset:P.r2p(h.x)+P._offset:h.x*U.w+U.l,R+=Y,j=void 0!==I?"string"==typeof h.yref&&z?I._length*(1-h.y)+I._offset:I.r2p(h.y)+I._offset:U.h-h.y*U.h+U.t,j+=B,h.sizing){case"fill":V+=" slice";break;case"stretch":V="none"}E.attr({x:R,y:j,width:S,height:w,preserveAspectRatio:V,opacity:h.opacity});var q=(P&&"domain"!==o.getRefType(h.xref)?P._id:"")+(I&&"domain"!==o.getRefType(h.yref)?I._id:"");k.setClipUrl(E,q?"clip"+i._uid+q:null,p)}var m=i._imageLowerLayer.selectAll("image").data(a),g=i._imageUpperLayer.selectAll("image").data(r);m.enter().append("image"),g.enter().append("image"),m.exit().remove(),g.exit().remove(),m.each(function(h){y.bind(this)(h),d.bind(this)(h)}),g.each(function(h){y.bind(this)(h),d.bind(this)(h)});var x=Object.keys(i._plots);for(t=0;t<x.length;t++){var v=i._plots[l=x[t]];if(v.imagelayer){var b=v.imagelayer.selectAll("image").data(n[l]||[]);b.enter().append("image"),b.exit().remove(),b.each(function(h){y.bind(this)(h),d.bind(this)(h)})}}}},7402:function(ne,F,e){"use strict";ne.exports={moduleType:"component",name:"images",layoutAttributes:e(65760),supplyLayoutDefaults:e(25024),includeBasePlot:e(36632)("images"),draw:e(60963),convertCoords:e(63556)}},3800:function(ne,F,e){"use strict";var M=e(25376),k=e(22548);ne.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:M({editType:"legend"}),grouptitlefont:M({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},indentation:{valType:"number",min:-15,dflt:0,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:M({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}},65196:function(ne){"use strict";ne.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},77864:function(ne,F,e){"use strict";var M=e(24040),k=e(3400),o=e(31780),T=e(45464),_=e(3800),p=e(64859),l=e(42451);function t(i,r,n,a){var s=r[i]||{},u=o.newContainer(n,i);function f(V,q){return k.coerce(s,u,_,V,q)}var c=k.coerceFont(f,"font",n.font);if(f("bgcolor",n.paper_bgcolor),f("bordercolor"),f("visible")){for(var y,d=function(V,q){return k.coerce(y._input,y,T,V,q)},m=n.font||{},g=k.coerceFont(f,"grouptitlefont",m,{overrideDflt:{size:Math.round(1.1*m.size)}}),x=0,v=!1,b="normal",h=(n.shapes||[]).filter(function(V){return V.showlegend}),S=a.concat(h).filter(function(V){return i===(V.legend||"legend")}),w=0;w<S.length;w++)if((y=S[w]).visible){var E=y._isShape;(y.showlegend||y._dfltShowLegend&&!(y._module&&y._module.attributes&&y._module.attributes.showlegend&&!1===y._module.attributes.showlegend.dflt))&&(x++,y.showlegend&&(v=!0,(!E&&M.traceIs(y,"pie-like")||!0===y._input.showlegend)&&x++),k.coerceFont(d,"legendgrouptitle.font",g)),(!E&&M.traceIs(y,"bar")&&"stack"===n.barmode||-1!==["tonextx","tonexty"].indexOf(y.fill))&&(b=l.isGrouped({traceorder:b})?"grouped+reversed":"reversed"),void 0!==y.legendgroup&&""!==y.legendgroup&&(b=l.isReversed({traceorder:b})?"reversed+grouped":"grouped")}var P=k.coerce(r,n,p,"showlegend",v&&x>("legend"===i?1:0));if(!1===P&&(n[i]=void 0),(!1!==P||s.uirevision)&&(f("uirevision",n.uirevision),!1!==P)){f("borderwidth");var I,O,z,U="h"===f("orientation"),R="paper"===f("yref"),j="paper"===f("xref"),Y="left";if(U?(I=0,M.getComponentMethod("rangeslider","isVisible")(r.xaxis)?R?(O=1.1,z="bottom"):(O=1,z="top"):R?(O=-.1,z="top"):(O=0,z="bottom")):(O=1,z="auto",j?I=1.02:(I=1,Y="right")),k.coerce(s,u,{x:{valType:"number",editType:"legend",min:j?-2:0,max:j?3:1,dflt:I}},"x"),k.coerce(s,u,{y:{valType:"number",editType:"legend",min:R?-2:0,max:R?3:1,dflt:O}},"y"),f("traceorder",b),l.isGrouped(n[i])&&f("tracegroupgap"),f("entrywidth"),f("entrywidthmode"),f("indentation"),f("itemsizing"),f("itemwidth"),f("itemclick"),f("itemdoubleclick"),f("groupclick"),f("xanchor",Y),f("yanchor",z),f("valign"),k.noneOrAll(s,u,["x","y"]),f("title.text")){f("title.side",U?"left":"top");var B=k.extendFlat({},c,{size:k.bigFont(c.size)});k.coerceFont(f,"title.font",B)}}}}ne.exports=function(i,r,n){var a,s=n.slice(),u=r.shapes;if(u)for(a=0;a<u.length;a++){var f=u[a];f.showlegend&&s.push({_input:f._input,visible:f.visible,showlegend:f.showlegend,legend:f.legend})}var y=["legend"];for(a=0;a<s.length;a++)k.pushUnique(y,s[a].legend);for(r._legends=[],a=0;a<y.length;a++){var d=y[a];t(d,i,r,s),r[d]&&r[d].visible&&(r[d]._id=d),r._legends.push(d)}}},31140:function(ne,F,e){"use strict";var M=e(33428),k=e(3400),o=e(7316),T=e(24040),_=e(95924),p=e(86476),l=e(43616),t=e(76308),i=e(72736),r=e(33048),n=e(65196),a=e(84284),s=a.LINE_SPACING,u=a.FROM_TL,f=a.FROM_BR,c=e(35456),y=e(2012),d=e(42451),m=1,g=/^legend[0-9]*$/;function x(z,U){var R,j,Y=U||{},B=z._fullLayout,V=O(Y),q=Y._inHover;if(q?(j=Y.layer,R="hover"):(j=B._infolayer,R=V),j){var ie;if(R+=B._uid,z._legendMouseDownTime||(z._legendMouseDownTime=0),q){if(!Y.entries)return;ie=c(Y.entries,Y)}else{for(var te=(z.calcdata||[]).slice(),ee=B.shapes,$=0;$<ee.length;$++){var J=ee[$];J.showlegend&&te.push([{trace:{_isShape:!0,_fullInput:J,index:J._index,name:J.name||J.label.text||"shape "+J._index,legend:J.legend,legendgroup:J.legendgroup,legendgrouptitle:J.legendgrouptitle,legendrank:J.legendrank,legendwidth:J.legendwidth,showlegend:J.showlegend,visible:J.visible,opacity:J.opacity,mode:"line"===J.type?"lines":"markers",line:J.line,marker:{line:J.line,color:J.fillcolor,size:12,symbol:"rect"===J.type?"square":"circle"===J.type?"circle":"hexagon2"}}}])}ie=B.showlegend&&c(te,Y,B._legends.length>1)}var ae=B.hiddenlabels||[];if(!(q||B.showlegend&&ie.length))return j.selectAll("."+V).remove(),B._topdefs.select("#"+R).remove(),o.autoMargin(z,V);var ce=k.ensureSingle(j,"g",V,function(Oe){q||Oe.attr("pointer-events","all")}),le=k.ensureSingleById(B._topdefs,"clipPath",R,function(Oe){Oe.append("rect")}),pe=k.ensureSingle(ce,"rect","bg",function(Oe){Oe.attr("shape-rendering","crispEdges")});pe.call(t.stroke,Y.bordercolor).call(t.fill,Y.bgcolor).style("stroke-width",Y.borderwidth+"px");var we,Te=k.ensureSingle(ce,"g","scrollbox"),ye=Y.title;Y._titleWidth=0,Y._titleHeight=0,ye.text?((we=k.ensureSingle(Te,"text",V+"titletext")).attr("text-anchor","start").call(l.font,ye.font).text(ye.text),E(we,Te,z,Y,m)):Te.selectAll("."+V+"titletext").remove();var ve=k.ensureSingle(ce,"rect","scrollbar",function(Oe){Oe.attr(n.scrollBarEnterAttrs).call(t.fill,n.scrollBarColor)}),xe=Te.selectAll("g.groups").data(ie);xe.enter().append("g").attr("class","groups"),xe.exit().remove();var Ce=xe.selectAll("g.traces").data(k.identity);Ce.enter().append("g").attr("class","traces"),Ce.exit().remove(),Ce.style("opacity",function(Oe){var be=Oe[0].trace;return T.traceIs(be,"pie-like")?-1!==ae.indexOf(Oe[0].label)?.5:1:"legendonly"===be.visible?.5:1}).each(function(){M.select(this).call(h,z,Y)}).call(y,z,Y).each(function(){q||M.select(this).call(w,z,V)}),k.syncOrAsync([o.previousPromises,function(){return function(Oe,be,ue,se){var ge=Oe._fullLayout,Ie=O(se);se||(se=ge[Ie]);var ke=ge._size,Se=d.isVertical(se),Pe=d.isGrouped(se),Fe="fraction"===se.entrywidthmode,Be=se.borderwidth,me=2*Be,Me=n.itemGap,Le=se.indentation+se.itemwidth+2*Me,Ne=2*(Be+Me),Re=I(se),He=se.y<0||0===se.y&&"top"===Re,Ze=se.y>1||1===se.y&&"bottom"===Re,nt=se.tracegroupgap,ft={};se._maxHeight=Math.max(He||Ze?ge.height/2:ke.h,30);var ht=0;se._width=0,se._height=0;var wt,kt,vt,Lt,Tt=(kt=0,vt=0,(Lt=(wt=se).title.side)&&(-1!==Lt.indexOf("left")&&(kt=wt._titleWidth),-1!==Lt.indexOf("top")&&(vt=wt._titleHeight)),[kt,vt]);if(Se)ue.each(function(wt){var kt=wt[0].height;l.setTranslate(this,Be+Tt[0],Be+Tt[1]+se._height+kt/2+Me),se._height+=kt,se._width=Math.max(se._width,wt[0].width)}),ht=Le+se._width,se._width+=Me+Le+me,se._height+=Ne,Pe&&(be.each(function(wt,kt){l.setTranslate(this,0,kt*se.tracegroupgap)}),se._height+=(se._lgroupsLength-1)*se.tracegroupgap);else{var At=P(se),it=Ze||He,Pt=ge.width/2;se._maxWidth=Math.max(se.x<0||0===se.x&&"right"===At?it&&"left"===At?ke.l+ke.w:Pt:se.x>1||1===se.x&&"left"===At?it&&"right"===At?ke.r+ke.w:Pt:ke.w,2*Le);var jt=0,Ut=0;ue.each(function(wt){var kt=v(wt,se,Le);jt=Math.max(jt,kt),Ut+=kt}),ht=null;var Rt=0;if(Pe){var Je=0,et=0,qe=0;be.each(function(){var wt=0,kt=0;M.select(this).selectAll("g.traces").each(function(Lt){var St=v(Lt,se,Le),Ot=Lt[0].height;l.setTranslate(this,Tt[0],Tt[1]+Be+Me+Ot/2+kt),kt+=Ot,wt=Math.max(wt,St),ft[Lt[0].trace.legendgroup]=wt});var vt=wt+Me;et>0&&vt+Be+et>se._maxWidth?(Rt=Math.max(Rt,et),et=0,qe+=Je+nt,Je=kt):Je=Math.max(Je,kt),l.setTranslate(this,et,qe),et+=vt}),se._width=Math.max(Rt,et)+Be,se._height=qe+Je+Ne}else{var $e=ue.size(),pt=Ut+me+($e-1)*Me<se._maxWidth,ct=0,Ve=0,Ge=0,ut=0;ue.each(function(wt){var kt=wt[0].height,vt=v(wt,se,Le),Lt=pt?vt:jt;Fe||(Lt+=Me),Lt+Be+Ve-Me>=se._maxWidth&&(Rt=Math.max(Rt,ut),Ve=0,Ge+=ct,se._height+=ct,ct=0),l.setTranslate(this,Tt[0]+Be+Ve,Tt[1]+Be+Ge+kt/2+Me),ut=Ve+vt+Me,Ve+=Lt,ct=Math.max(ct,kt)}),pt?(se._width=Ve+me,se._height=ct+Ne):(se._width=Math.max(Rt,ut)+me,se._height+=ct+Ne)}}se._width=Math.ceil(Math.max(se._width+Tt[0],se._titleWidth+2*(Be+n.titlePad))),se._height=Math.ceil(Math.max(se._height+Tt[1],se._titleHeight+2*(Be+n.itemGap))),se._effHeight=Math.min(se._height,se._maxHeight);var Qe=Oe._context.edits,yt=Qe.legendText||Qe.legendPosition;ue.each(function(wt){var kt=M.select(this).select("."+Ie+"toggle"),vt=wt[0].height,Lt=wt[0].trace.legendgroup,St=v(wt,se,Le);Pe&&""!==Lt&&(St=ft[Lt]);var Ot=yt?Le:ht||St;Se||Fe||(Ot+=Me/2),l.setRect(kt,0,-vt/2,Ot,vt)})}(z,xe,Ce,Y)},function(){var Oe,be,ue,se,ge=B._size,Ie=Y.borderwidth,ke="paper"===Y.xref,Se="paper"===Y.yref;if(ye.text&&function(it,Pt,jt){if("top center"===Pt.title.side||"top right"===Pt.title.side){var Ut=Pt.title.font.size*s,Rt=0,Je=it.node(),et=l.bBox(Je).width;"top center"===Pt.title.side?Rt=.5*(Pt._width-2*jt-2*n.titlePad-et):"top right"===Pt.title.side&&(Rt=Pt._width-2*jt-2*n.titlePad-et),i.positionText(it,jt+n.titlePad+Rt,jt+Ut)}}(we,Y,Ie),!q){var Pe,Fe;if(Pe=ke?ge.l+ge.w*Y.x-u[P(Y)]*Y._width:B.width*Y.x-u[P(Y)]*Y._width,Fe=Se?ge.t+ge.h*(1-Y.y)-u[I(Y)]*Y._effHeight:B.height*(1-Y.y)-u[I(Y)]*Y._effHeight,function(it,Pt,jt,Ut){var Rt=it._fullLayout,Je=Rt[Pt],et=P(Je),qe=I(Je),$e="paper"===Je.xref,pt="paper"===Je.yref;it._fullLayout._reservedMargin[Pt]={};var ct=Je.y<.5?"b":"t",Ve=Je.x<.5?"l":"r",Ge={r:Rt.width-jt,l:jt+Je._width,b:Rt.height-Ut,t:Ut+Je._effHeight};if($e&&pt)return o.autoMargin(it,Pt,{x:Je.x,y:Je.y,l:Je._width*u[et],r:Je._width*f[et],b:Je._effHeight*f[qe],t:Je._effHeight*u[qe]});$e?it._fullLayout._reservedMargin[Pt][ct]=Ge[ct]:pt||"v"===Je.orientation?it._fullLayout._reservedMargin[Pt][Ve]=Ge[Ve]:it._fullLayout._reservedMargin[Pt][ct]=Ge[ct]}(z,V,Pe,Fe))return;if(B.margin.autoexpand){var me=Pe,Me=Fe;Pe=ke?k.constrain(Pe,0,B.width-Y._width):me,Fe=Se?k.constrain(Fe,0,B.height-Y._effHeight):Me,Pe!==me&&k.log("Constrain "+V+".x to make legend fit inside graph"),Fe!==Me&&k.log("Constrain "+V+".y to make legend fit inside graph")}l.setTranslate(ce,Pe,Fe)}if(ve.on(".drag",null),ce.on("wheel",null),q||Y._height<=Y._maxHeight||z._context.staticPlot){var Le=Y._effHeight;q&&(Le=Y._height),pe.attr({width:Y._width-Ie,height:Le-Ie,x:Ie/2,y:Ie/2}),l.setTranslate(Te,0,0),le.select("rect").attr({width:Y._width-2*Ie,height:Le-2*Ie,x:Ie,y:Ie}),l.setClipUrl(Te,R,z),l.setRect(ve,0,0,0,0),delete Y._scrollY}else{var Ne,He,Ze=Math.max(n.scrollBarMinHeight,Y._effHeight*Y._effHeight/Y._height),nt=Y._effHeight-Ze-2*n.scrollBarMargin,ft=Y._height-Y._effHeight,ht=nt/ft,Tt=Math.min(Y._scrollY||0,ft);pe.attr({width:Y._width-2*Ie+n.scrollBarWidth+n.scrollBarMargin,height:Y._effHeight-Ie,x:Ie/2,y:Ie/2}),le.select("rect").attr({width:Y._width-2*Ie+n.scrollBarWidth+n.scrollBarMargin,height:Y._effHeight-2*Ie,x:Ie,y:Ie+Tt}),l.setClipUrl(Te,R,z),ot(Tt,Ze,ht),ce.on("wheel",function(){ot(Tt=k.constrain(Y._scrollY+M.event.deltaY/nt*ft,0,ft),Ze,ht),0!==Tt&&Tt!==ft&&M.event.preventDefault()});var At=M.behavior.drag().on("dragstart",function(){var it=M.event.sourceEvent;Ne="touchstart"===it.type?it.changedTouches[0].clientY:it.clientY,He=Tt}).on("drag",function(){var it=M.event.sourceEvent;2===it.buttons||it.ctrlKey||ot(Tt=k.constrain((("touchmove"===it.type?it.changedTouches[0].clientY:it.clientY)-Ne)/ht+He,0,ft),Ze,ht)});ve.call(At);var _t=M.behavior.drag().on("dragstart",function(){var it=M.event.sourceEvent;"touchstart"===it.type&&(Ne=it.changedTouches[0].clientY,He=Tt)}).on("drag",function(){var it=M.event.sourceEvent;"touchmove"===it.type&&ot(Tt=k.constrain((Ne-it.changedTouches[0].clientY)/ht+He,0,ft),Ze,ht)});Te.call(_t)}function ot(it,Pt,jt){Y._scrollY=z._fullLayout[V]._scrollY=it,l.setTranslate(Te,0,-it),l.setRect(ve,Y._width,n.scrollBarMargin+it*jt,n.scrollBarWidth,Pt),le.select("rect").attr("y",Ie+it)}z._context.edits.legendPosition&&(ce.classed("cursor-move",!0),p.init({element:ce.node(),gd:z,prepFn:function(it){if(it.target!==ve.node()){var Pt=l.getTranslate(ce);ue=Pt.x,se=Pt.y}},moveFn:function(it,Pt){if(void 0!==ue&&void 0!==se){var jt=ue+it,Ut=se+Pt;l.setTranslate(ce,jt,Ut),Oe=p.align(jt,Y._width,ge.l,ge.l+ge.w,Y.xanchor),be=p.align(Ut+Y._height,-Y._height,ge.t+ge.h,ge.t,Y.yanchor)}},doneFn:function(){if(void 0!==Oe&&void 0!==be){var it={};it[V+".x"]=Oe,it[V+".y"]=be,T.call("_guiRelayout",z,it)}},clickFn:function(it,Pt){var jt=j.selectAll("g.traces").filter(function(){var Ut=this.getBoundingClientRect();return Pt.clientX>=Ut.left&&Pt.clientX<=Ut.right&&Pt.clientY>=Ut.top&&Pt.clientY<=Ut.bottom});jt.size()>0&&b(z,ce,jt,it,Pt)}}))}],z)}}function v(z,U,R){var j=z[0],V=j.trace.legendwidth||U.entrywidth;return"fraction"===U.entrywidthmode?U._maxWidth*V:R+(V||j.width)}function b(z,U,R,j,Y){var B=R.data()[0][0].trace,V={event:Y,node:R.node(),curveNumber:B.index,expandedIndex:B._expandedIndex,data:z.data,layout:z.layout,frames:z._transitionData._frames,config:z._context,fullData:z._fullData,fullLayout:z._fullLayout};B._group&&(V.group=B._group),T.traceIs(B,"pie-like")&&(V.label=R.datum()[0].label);var q=_.triggerHandler(z,"plotly_legendclick",V);if(1===j){if(!1===q)return;U._clickTimeout=setTimeout(function(){z._fullLayout&&r(R,z,j)},z._context.doubleClickDelay)}else 2===j&&(U._clickTimeout&&clearTimeout(U._clickTimeout),z._legendMouseDownTime=0,!1!==_.triggerHandler(z,"plotly_legenddoubleclick",V)&&!1!==q&&r(R,z,j))}function h(z,U,R){var j,Y,B=O(R),V=z.data()[0][0],q=V.trace,ie=T.traceIs(q,"pie-like"),te=!R._inHover&&U._context.edits.legendText&&!ie,ee=R._maxNameLength;V.groupTitle?(j=V.groupTitle.text,Y=V.groupTitle.font):(Y=R.font,R.entries?j=V.text:(j=ie?V.label:q.name,q._meta&&(j=k.templateString(j,q._meta))));var $=k.ensureSingle(z,"text",B+"text");$.attr("text-anchor","start").call(l.font,Y).text(te?S(j,ee):j),i.positionText($,R.indentation+R.itemwidth+2*n.itemGap,0),te?$.call(i.makeEditable,{gd:U,text:j}).call(E,z,U,R).on("edit",function(X){this.text(S(X,ee)).call(E,z,U,R);var ae=V.trace._fullInput||{},ce={};if(T.hasTransform(ae,"groupby")){var le=T.getTransformIndices(ae,"groupby"),we=k.keyedContainer(ae,"transforms["+le[le.length-1]+"].styles","target","value.name");we.set(V.trace._group,X),ce=we.constructUpdate()}else ce.name=X;return ae._isShape?T.call("_guiRelayout",U,"shapes["+q.index+"].name",ce.name):T.call("_guiRestyle",U,ce,q.index)}):E($,z,U,R)}function S(z,U){var R=Math.max(4,U);if(z&&z.trim().length>=R/2)return z;for(var j=R-(z=z||"").length;j>0;j--)z+=" ";return z}function w(z,U,R){var j,Y=U._context.doubleClickDelay,B=1,V=k.ensureSingle(z,"rect",R+"toggle",function(q){U._context.staticPlot||q.style("cursor","pointer").attr("pointer-events","all"),q.call(t.fill,"rgba(0,0,0,0)")});U._context.staticPlot||(V.on("mousedown",function(){(j=(new Date).getTime())-U._legendMouseDownTime<Y?B+=1:(B=1,U._legendMouseDownTime=j)}),V.on("mouseup",function(){if(!U._dragged&&!U._editing){var q=U._fullLayout[R];(new Date).getTime()-U._legendMouseDownTime>Y&&(B=Math.max(B-1,1)),b(U,q,z,B,M.event)}}))}function E(z,U,R,j,Y){j._inHover&&z.attr("data-notex",!0),i.convertToTspans(z,R,function(){!function(B,V,q,ie){var te=B.data()[0][0];if(q._inHover||!te||te.trace.showlegend){var ee=B.select("g[class*=math-group]"),$=ee.node(),J=O(q);q||(q=V._fullLayout[J]);var X,ae,ce=q.borderwidth,le=(ie===m?q.title.font:te.groupTitle?te.groupTitle.font:q.font).size*s;if($){var pe=l.bBox($);X=pe.height,ae=pe.width,ie===m?l.setTranslate(ee,ce,ce+.75*X):l.setTranslate(ee,0,.25*X)}else{var Te=B.select("."+J+(ie===m?"title":"")+"text"),ye=i.lineCount(Te),ve=Te.node();if(X=le*ye,ae=ve?l.bBox(ve).width:0,ie===m)"left"===q.title.side&&(ae+=2*n.itemGap),i.positionText(Te,ce+n.titlePad,ce+le);else{var xe=2*n.itemGap+q.indentation+q.itemwidth;te.groupTitle&&(xe=n.itemGap,ae-=q.indentation+q.itemwidth),i.positionText(Te,xe,-le*((ye-1)/2-.3))}}ie===m?(q._titleWidth=ae,q._titleHeight=X):(te.lineHeight=le,te.height=Math.max(X,16)+3,te.width=ae)}else B.remove()}(U,R,j,Y)})}function P(z){return k.isRightAnchor(z)?"right":k.isCenterAnchor(z)?"center":"left"}function I(z){return k.isBottomAnchor(z)?"bottom":k.isMiddleAnchor(z)?"middle":"top"}function O(z){return z._id||"legend"}ne.exports=function(z,U){if(U)x(z,U);else{var R=z._fullLayout,j=R._legends;R._infolayer.selectAll('[class^="legend"]').each(function(){var V=M.select(this),q=V.attr("class").split(" ")[0];q.match(g)&&-1===j.indexOf(q)&&V.remove()});for(var Y=0;Y<j.length;Y++)x(z,z._fullLayout[j[Y]])}}},35456:function(ne,F,e){"use strict";var M=e(24040),k=e(42451);ne.exports=function(o,T,_){var p,l,t=T._inHover,i=k.isGrouped(T),r=k.isReversed(T),n={},a=[],s=!1,u={},f=0,c=0;function y(j,Y,B){if(!1!==T.visible&&(!_||j===T._id))if(""!==Y&&k.isGrouped(T))-1===a.indexOf(Y)?(a.push(Y),s=!0,n[Y]=[B]):n[Y].push(B);else{var V="~~i"+f;a.push(V),n[V]=[B],f++}}for(p=0;p<o.length;p++){var d=o[p],m=d[0],g=m.trace,x=g.legend,v=g.legendgroup;if(t||g.visible&&g.showlegend)if(M.traceIs(g,"pie-like"))for(u[v]||(u[v]={}),l=0;l<d.length;l++){var b=d[l].label;u[v][b]||(y(x,v,{label:b,color:d[l].color,i:d[l].i,trace:g,pts:d[l].pts}),u[v][b]=!0,c=Math.max(c,(b||"").length))}else y(x,v,m),c=Math.max(c,(g.name||"").length)}if(!a.length)return[];var h=!s||!i,S=[];for(p=0;p<a.length;p++){var w=n[a[p]];S.push(h?w[0]:w)}for(h&&(S=[S]),p=0;p<S.length;p++){var E=1/0;for(l=0;l<S[p].length;l++){var P=S[p][l].trace.legendrank;E>P&&(E=P)}S[p][0]._groupMinRank=E,S[p][0]._preGroupSort=p}var I=function(j,Y){return j.trace.legendrank-Y.trace.legendrank||j._preSort-Y._preSort};for(S.forEach(function(j,Y){j[0]._preGroupSort=Y}),S.sort(function(j,Y){return j[0]._groupMinRank-Y[0]._groupMinRank||j[0]._preGroupSort-Y[0]._preGroupSort}),p=0;p<S.length;p++){S[p].forEach(function(j,Y){j._preSort=Y}),S[p].sort(I);var O=S[p][0].trace,z=null;for(l=0;l<S[p].length;l++){var U=S[p][l].trace.legendgrouptitle;if(U&&U.text){z=U,t&&(U.font=T._groupTitleFont);break}}if(r&&S[p].reverse(),z){var R=!1;for(l=0;l<S[p].length;l++)if(M.traceIs(S[p][l].trace,"pie-like")){R=!0;break}S[p].unshift({i:-1,groupTitle:z,noClick:R,trace:{showlegend:O.showlegend,legendgroup:O.legendgroup,visible:"toggleitem"===T.groupclick||O.visible}})}for(l=0;l<S[p].length;l++)S[p][l]=[S[p][l]]}return T._lgroupsLength=S.length,T._maxNameLength=c,S}},33048:function(ne,F,e){"use strict";var M=e(24040),k=e(3400),o=k.pushUnique,T=!0;ne.exports=function(_,p,l){var t=p._fullLayout;if(!p._dragged&&!p._editing){var i,r=t.legend.itemclick,n=t.legend.itemdoubleclick,a=t.legend.groupclick;if(1===l&&"toggle"===r&&"toggleothers"===n&&T&&p.data&&p._context.showTips&&k.notifier(k._(p,"Double-click on legend to isolate one trace"),"long"),T=!1,1===l?i=r:2===l&&(i=n),i){var s="togglegroup"===a,u=t.hiddenlabels?t.hiddenlabels.slice():[],f=_.data()[0][0];if(!f.groupTitle||!f.noClick){var c=p._fullData,y=(t.shapes||[]).filter(function(be){return be.showlegend}),d=c.concat(y),m=f.trace;m._isShape&&(m=m._fullInput);var g,x,v,b,h,S=m.legendgroup,w={},E=[],P=[],I=[],O=(t.shapes||[]).map(function(be){return be._input}),z=!1,U=m.legend,R=m._fullInput;if(R&&R._isShape||!M.traceIs(m,"pie-like")){var j,Y=S&&S.length,B=[];if(Y)for(g=0;g<d.length;g++)(j=d[g]).visible&&j.legendgroup===S&&B.push(g);if("toggle"===i){var V;switch(m.visible){case!0:V="legendonly";break;case!1:V=!1;break;case"legendonly":V=!0}if(Y)if(s)for(g=0;g<d.length;g++){var q=d[g];!1!==q.visible&&q.legendgroup===S&&Oe(q,V)}else Oe(m,V);else Oe(m,V)}else if("toggleothers"===i){var ie,te,$,J=!0;for(g=0;g<d.length;g++)if(ie=($=d[g])===m,te=!0!==$.showlegend,!(ie||te||Y&&$.legendgroup===S||$.legend!==U||!0!==$.visible||M.traceIs($,"notLegendIsolatable"))){J=!1;break}for(g=0;g<d.length;g++)if(!1!==($=d[g]).visible&&$.legend===U&&!M.traceIs($,"notLegendIsolatable"))switch(m.visible){case"legendonly":Oe($,!0);break;case!0:te=!0!==$.showlegend&&!$.legendgroup,Oe($,!!((ie=$===m)||Y&&$.legendgroup===S||te)||!!J||"legendonly")}}for(g=0;g<P.length;g++)if(v=P[g]){var X=v.constructUpdate(),ae=Object.keys(X);for(x=0;x<ae.length;x++)(w[b=ae[x]]=w[b]||[])[I[g]]=X[b]}for(h=Object.keys(w),g=0;g<h.length;g++)for(b=h[g],x=0;x<E.length;x++)w[b].hasOwnProperty(x)||(w[b][x]=void 0);z?M.call("_guiUpdate",p,w,{shapes:O},E):M.call("_guiRestyle",p,w,E)}else{var ce=f.label,le=u.indexOf(ce);if("toggle"===i)-1===le?u.push(ce):u.splice(le,1);else if("toggleothers"===i){var pe=-1!==le,we=[];for(g=0;g<p.calcdata.length;g++){var Te=p.calcdata[g];for(x=0;x<Te.length;x++){var ye=Te[x].label;U===Te[0].trace.legend&&ce!==ye&&(-1===u.indexOf(ye)&&(pe=!0),o(u,ye),we.push(ye))}}if(!pe)for(var ve=0;ve<we.length;ve++){var xe=u.indexOf(we[ve]);-1!==xe&&u.splice(xe,1)}}M.call("_guiRelayout",p,"hiddenlabels",u)}}}}function Ce(be,ue){var se=E.indexOf(be),ge=w.visible;return ge||(ge=w.visible=[]),-1===E.indexOf(be)&&(E.push(be),se=E.length-1),ge[se]=ue,se}function Oe(be,ue){if(!f.groupTitle||s){var ge=be._fullInput||be,Ie=ge._isShape,ke=ge.index;if(void 0===ke&&(ke=ge._index),M.hasTransform(ge,"groupby")){var Se=P[ke];if(!Se){var Pe=M.getTransformIndices(ge,"groupby");Se=k.keyedContainer(ge,"transforms["+Pe[Pe.length-1]+"].styles","target","value.visible"),P[ke]=Se}var Be=Se.get(be._group);void 0===Be&&(Be=!0),!1!==Be&&Se.set(be._group,ue),I[ke]=Ce(ke,!1!==ge.visible)}else{var me=!1!==ge.visible&&ue;Ie?(O[ke].visible=me,z=!0):Ce(ke,me)}}}}},42451:function(ne,F){"use strict";F.isGrouped=function(e){return-1!==(e.traceorder||"").indexOf("grouped")},F.isVertical=function(e){return"h"!==e.orientation},F.isReversed=function(e){return-1!==(e.traceorder||"").indexOf("reversed")}},2780:function(ne,F,e){"use strict";ne.exports={moduleType:"component",name:"legend",layoutAttributes:e(3800),supplyLayoutDefaults:e(77864),draw:e(31140),style:e(2012)}},2012:function(ne,F,e){"use strict";var M=e(33428),k=e(24040),o=e(3400),T=o.strTranslate,_=e(43616),p=e(76308),l=e(94288).extractOpts,t=e(43028),i=e(10528),r=e(69656).castOption,n=e(65196);function a(f,c){return(c?"radial":"horizontal")+(f?"":"reversed")}function s(f){var c=f[0].trace,y=c.contours,d=t.hasLines(c),m=t.hasMarkers(c),g=c.visible&&c.fill&&"none"!==c.fill,x=!1,v=!1;if(y){var b=y.coloring;"lines"===b?x=!0:d="none"===b||"heatmap"===b||y.showlines,"constraint"===y.type?g="="!==y._operation:"fill"!==b&&"heatmap"!==b||(v=!0)}return{showMarker:m,showLine:d,showFill:g,showGradientLine:x,showGradientFill:v,anyLine:d||x,anyFill:g||v}}function u(f,c,y){return f&&o.isArrayOrTypedArray(f)?c:f>y?y:f}ne.exports=function(f,c,y){y||(y=c._fullLayout.legend);var m="constant"===y.itemsizing,g=y.itemwidth,v=T((g+2*n.itemGap)/2,0),b=function(w,E,P,I){var O;if(w+1)O=w;else{if(!(E&&E.width>0))return 0;O=E.width}return m?I:Math.min(O,P)};function h(w,E,P){var I=w[0].trace,O=I.marker||{},z=O.line||{},U=O.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",R=P?I.visible&&I.type===P:k.traceIs(I,"bar"),j=M.select(E).select("g.legendpoints").selectAll("path.legend"+P).data(R?[w]:[]);j.enter().append("path").classed("legend"+P,!0).attr("d",U).attr("transform",v),j.exit().remove(),j.each(function(Y){var B=M.select(this),V=Y[0],q=b(V.mlw,O.line,5,2);B.style("stroke-width",q+"px");var ie=V.mcc;if(!y._inHover&&"mc"in V){var te=l(O),ee=te.mid;void 0===ee&&(ee=(te.max+te.min)/2),ie=_.tryColorscale(O,"")(ee)}var $=ie||V.mc||O.color,J=O.pattern,X=J&&_.getPatternAttr(J.shape,0,"");if(X){var ae=_.getPatternAttr(J.bgcolor,0,null),ce=_.getPatternAttr(J.fgcolor,0,null),le=J.fgopacity,pe=u(J.size,8,10),we=u(J.solidity,.5,1);B.call(_.pattern,"legend",c,"legend-"+I.uid,X,pe,we,ie,J.fillmode,ae,ce,le)}else B.call(p.fill,$);q&&p.stroke(B,V.mlc||z.color)})}function S(w,E,P){var I=w[0],O=I.trace,z=P?O.visible&&O.type===P:k.traceIs(O,P),U=M.select(E).select("g.legendpoints").selectAll("path.legend"+P).data(z?[w]:[]);if(U.enter().append("path").classed("legend"+P,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",v),U.exit().remove(),U.size()){var R=O.marker||{},j=b(r(R.line.width,I.pts),R.line,5,2),Y="pieLike",B=o.minExtend(O,{marker:{line:{width:j}}},Y),V=o.minExtend(I,{trace:B},Y);i(U,V,B,c)}}f.each(function(w){var E=M.select(this),P=o.ensureSingle(E,"g","layers");P.style("opacity",w[0].trace.opacity);var O=y.valign,z=w[0].lineHeight,U=w[0].height;P.attr("transform","middle"===O&&0===y.indentation||!z||!U?null:T(y.indentation,{top:1,bottom:-1}[O]*(.5*(z-U+3))||0)),P.selectAll("g.legendfill").data([w]).enter().append("g").classed("legendfill",!0),P.selectAll("g.legendlines").data([w]).enter().append("g").classed("legendlines",!0);var Y=P.selectAll("g.legendsymbols").data([w]);Y.enter().append("g").classed("legendsymbols",!0),Y.selectAll("g.legendpoints").data([w]).enter().append("g").classed("legendpoints",!0)}).each(function(w){var E,P=w[0].trace,I=[];if(P.visible)switch(P.type){case"histogram2d":case"heatmap":I=[["M-15,-2V4H15V-2Z"]],E=!0;break;case"choropleth":case"choroplethmapbox":I=[["M-6,-6V6H6V-6Z"]],E=!0;break;case"densitymapbox":I=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],E="radial";break;case"cone":I=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],E=!1;break;case"streamtube":I=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],E=!1;break;case"surface":I=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],E=!0;break;case"mesh3d":I=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!1;break;case"volume":I=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!0;break;case"isosurface":I=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],E=!1}var O=M.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(I);O.enter().append("path").classed("legend3dandfriends",!0).attr("transform",v).style("stroke-miterlimit",1),O.exit().remove(),O.each(function(z,U){var R,j=M.select(this),Y=l(P),B=Y.colorscale,V=Y.reversescale;if(B){if(!E){var q=B.length;R=0===U?B[V?q-1:0][1]:1===U?B[V?0:q-1][1]:B[Math.floor((q-1)/2)][1]}}else{var ie=P.vertexcolor||P.facecolor||P.color;R=o.isArrayOrTypedArray(ie)?ie[U]||ie[0]:ie}j.attr("d",z[0]),R?j.call(p.fill,R):j.call(function(te){te.size()&&_.gradient(te,c,"legendfill-"+P.uid,a(V,"radial"===E),B,"fill")})})}).each(function(w){var E=w[0].trace,P="waterfall"===E.type;if(w[0]._distinct&&P){var I=w[0].trace[w[0].dir].marker;return w[0].mc=I.color,w[0].mlw=I.line.width,w[0].mlc=I.line.color,h(w,this,"waterfall")}var O=[];E.visible&&P&&(O=w[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var z=M.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(O);z.enter().append("path").classed("legendwaterfall",!0).attr("transform",v).style("stroke-miterlimit",1),z.exit().remove(),z.each(function(U){var R=M.select(this),j=E[U[0]].marker,Y=b(void 0,j.line,5,2);R.attr("d",U[1]).style("stroke-width",Y+"px").call(p.fill,j.color),Y&&R.call(p.stroke,j.line.color)})}).each(function(w){h(w,this,"funnel")}).each(function(w){h(w,this)}).each(function(w){var E=w[0].trace,P=M.select(this).select("g.legendpoints").selectAll("path.legendbox").data(E.visible&&k.traceIs(E,"box-violin")?[w]:[]);P.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",v),P.exit().remove(),P.each(function(){var I=M.select(this);if("all"!==E.boxpoints&&"all"!==E.points||0!==p.opacity(E.fillcolor)||0!==p.opacity((E.line||{}).color)){var O=b(void 0,E.line,5,2);I.style("stroke-width",O+"px").call(p.fill,E.fillcolor),O&&p.stroke(I,E.line.color)}else{var z=o.minExtend(E,{marker:{size:m?12:o.constrain(E.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});P.call(_.pointStyle,z,c)}})}).each(function(w){S(w,this,"funnelarea")}).each(function(w){S(w,this,"pie")}).each(function(w){var E,P,I=s(w),O=I.showFill,z=I.showLine,U=I.showGradientLine,R=I.showGradientFill,j=I.anyFill,Y=I.anyLine,B=w[0],V=B.trace,q=l(V),ie=q.colorscale,te=q.reversescale,ee=t.hasMarkers(V)||!j?"M5,0":Y?"M5,-2":"M5,-3",$=M.select(this),J=$.select(".legendfill").selectAll("path").data(O||R?[w]:[]);if(J.enter().append("path").classed("js-fill",!0),J.exit().remove(),J.attr("d",ee+"h"+g+"v6h-"+g+"z").call(function(ce){ce.size()&&(O?_.fillGroupStyle(ce,c,!0):_.gradient(ce,c,"legendfill-"+V.uid,a(te),ie,"fill"))}),z||U){var X=b(void 0,V.line,10,5);P=o.minExtend(V,{line:{width:X}}),E=[o.minExtend(B,{trace:P})]}var ae=$.select(".legendlines").selectAll("path").data(z||U?[E]:[]);ae.enter().append("path").classed("js-line",!0),ae.exit().remove(),ae.attr("d",ee+(U?"l"+g+",0.0001":"h"+g)).call(z?_.lineGroupStyle:function(ce){if(ce.size()){var le="legendline-"+V.uid;_.lineGroupStyle(ce),_.gradient(ce,c,le,a(te),ie,"stroke")}})}).each(function(w){var E,P,I=s(w),U=I.showLine,R=I.showMarker,j=w[0],Y=j.trace,B=!R&&!I.anyLine&&!I.anyFill&&t.hasText(Y);function V(ae,ce,le,pe){var we=o.nestedProperty(Y,ae).get(),Te=o.isArrayOrTypedArray(we)&&ce?ce(we):we;if(m&&Te&&void 0!==pe&&(Te=pe),le){if(Te<le[0])return le[0];if(Te>le[1])return le[1]}return Te}function q(ae){return j._distinct&&j.index&&ae[j.index]?ae[j.index]:ae[0]}if(R||B||U){var ie={},te={};if(R){ie.mc=V("marker.color",q),ie.mx=V("marker.symbol",q),ie.mo=V("marker.opacity",o.mean,[.2,1]),ie.mlc=V("marker.line.color",q),ie.mlw=V("marker.line.width",o.mean,[0,5],2),te.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var ee=V("marker.size",o.mean,[2,16],12);ie.ms=ee,te.marker.size=ee}U&&(te.line={width:V("line.width",q,[0,10],5)}),B&&(ie.tx="Aa",ie.tp=V("textposition",q),ie.ts=10,ie.tc=V("textfont.color",q),ie.tf=V("textfont.family",q),ie.tw=V("textfont.weight",q),ie.ty=V("textfont.style",q),ie.tv=V("textfont.variant",q),ie.tC=V("textfont.textcase",q),ie.tE=V("textfont.lineposition",q),ie.tS=V("textfont.shadow",q)),E=[o.minExtend(j,ie)],(P=o.minExtend(Y,te)).selectedpoints=null,P.texttemplate=null}var $=M.select(this).select("g.legendpoints"),J=$.selectAll("path.scatterpts").data(R?E:[]);J.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",v),J.exit().remove(),J.call(_.pointStyle,P,c),R&&(E[0].mrc=3);var X=$.selectAll("g.pointtext").data(B?E:[]);X.enter().append("g").classed("pointtext",!0).append("text").attr("transform",v),X.exit().remove(),X.selectAll("text").call(_.textPointStyle,P,c)}).each(function(w){var E=w[0].trace,P=M.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(E.visible&&"candlestick"===E.type?[w,w]:[]);P.enter().append("path").classed("legendcandle",!0).attr("d",function(I,O){return O?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",v).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(I,O){var z=M.select(this),U=E[O?"increasing":"decreasing"],R=b(void 0,U.line,5,2);z.style("stroke-width",R+"px").call(p.fill,U.fillcolor),R&&p.stroke(z,U.line.color)})}).each(function(w){var E=w[0].trace,P=M.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(E.visible&&"ohlc"===E.type?[w,w]:[]);P.enter().append("path").classed("legendohlc",!0).attr("d",function(I,O){return O?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",v).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(I,O){var z=M.select(this),U=E[O?"increasing":"decreasing"],R=b(void 0,U.line,5,2);z.style("fill","none").call(_.dashLine,U.line.dash,R),R&&p.stroke(z,U.line.color)})})}},66540:function(ne,F,e){"use strict";e(76052),ne.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},44248:function(ne,F,e){"use strict";var M=e(24040),k=e(7316),o=e(79811),T=e(9224),_=e(4016).eraseActiveShape,p=e(3400),l=p._,t=ne.exports={};function i(d,m){var g,x,v=m.currentTarget,b=v.getAttribute("data-attr"),h=v.getAttribute("data-val")||!0,S=d._fullLayout,w={},E=o.list(d,null,!0),P=S._cartesianSpikesEnabled;if("zoom"===b){var I,O="in"===h?.5:2,z=(1+O)/2,U=(1-O)/2;for(x=0;x<E.length;x++)if(!(g=E[x]).fixedrange)if(I=g._name,"auto"===h)w[I+".autorange"]=!0;else if("reset"===h)void 0===g._rangeInitial0&&void 0===g._rangeInitial1?w[I+".autorange"]=!0:void 0===g._rangeInitial0?(w[I+".autorange"]=g._autorangeInitial,w[I+".range"]=[null,g._rangeInitial1]):void 0===g._rangeInitial1?(w[I+".range"]=[g._rangeInitial0,null],w[I+".autorange"]=g._autorangeInitial):w[I+".range"]=[g._rangeInitial0,g._rangeInitial1],void 0!==g._showSpikeInitial&&(w[I+".showspikes"]=g._showSpikeInitial,"on"!==P||g._showSpikeInitial||(P="off"));else{var R=[g.r2l(g.range[0]),g.r2l(g.range[1])],j=[z*R[0]+U*R[1],z*R[1]+U*R[0]];w[I+".range[0]"]=g.l2r(j[0]),w[I+".range[1]"]=g.l2r(j[1])}}else"hovermode"!==b||"x"!==h&&"y"!==h||v.setAttribute("data-val",h=S._isHoriz?"y":"x"),w[b]=h;S._cartesianSpikesEnabled=P,M.call("_guiRelayout",d,w)}function r(d,m){for(var g=m.currentTarget,x=g.getAttribute("data-attr"),v=g.getAttribute("data-val")||!0,b=d._fullLayout._subplots.gl3d||[],h={},S=x.split("."),w=0;w<b.length;w++)h[b[w]+"."+S[1]]=v;h.dragmode="pan"===v?v:"zoom",M.call("_guiRelayout",d,h)}function n(d,m){for(var g=m.currentTarget.getAttribute("data-attr"),x="resetLastSave"===g,v="resetDefault"===g,b=d._fullLayout,h=b._subplots.gl3d||[],S={},w=0;w<h.length;w++){var E,P=h[w],I=P+".camera",O=P+".aspectratio",z=P+".aspectmode",U=b[P]._scene;x?(S[I+".up"]=U.viewInitial.up,S[I+".eye"]=U.viewInitial.eye,S[I+".center"]=U.viewInitial.center,E=!0):v&&(S[I+".up"]=null,S[I+".eye"]=null,S[I+".center"]=null,E=!0),E&&(S[O+".x"]=U.viewInitial.aspectratio.x,S[O+".y"]=U.viewInitial.aspectratio.y,S[O+".z"]=U.viewInitial.aspectratio.z,S[z]=U.viewInitial.aspectmode)}M.call("_guiRelayout",d,S)}function a(d,m){var g=m.currentTarget,x=g._previousVal,v=d._fullLayout,b=v._subplots.gl3d||[],h=["xaxis","yaxis","zaxis"],S={},w={};if(x)w=x,g._previousVal=null;else{for(var E=0;E<b.length;E++){var P=b[E],I=v[P],O=P+".hovermode";S[O]=I.hovermode,w[O]=!1;for(var z=0;z<3;z++){var U=h[z],R=P+"."+U+".showspikes";w[R]=!1,S[R]=I[U].showspikes}}g._previousVal=S}return w}function s(d,m){for(var g=m.currentTarget,x=g.getAttribute("data-attr"),v=g.getAttribute("data-val")||!0,b=d._fullLayout,h=b._subplots.geo||[],S=0;S<h.length;S++){var w=h[S];if("zoom"===x){var P=b[w].projection.scale;M.call("_guiRelayout",d,w+".projection.scale","in"===v?2*P:.5*P)}}"reset"===x&&y(d,"geo")}function u(d){var m=d._fullLayout;return!m.hovermode&&(m._has("cartesian")?m._isHoriz?"y":"x":"closest")}function f(d){var m=u(d);M.call("_guiRelayout",d,"hovermode",m)}function c(d,m){for(var g=m.currentTarget.getAttribute("data-val"),x=d._fullLayout,v=x._subplots.mapbox||[],b={},h=0;h<v.length;h++){var S=v[h],w=x[S].zoom;b[S+".zoom"]="in"===g?1.05*w:w/1.05}M.call("_guiRelayout",d,b)}function y(d,m){for(var g=d._fullLayout,x=g._subplots[m]||[],v={},b=0;b<x.length;b++)for(var h=x[b],S=g[h]._subplot.viewInitial,w=Object.keys(S),E=0;E<w.length;E++){var P=w[E];v[h+"."+P]=S[P]}M.call("_guiRelayout",d,v)}t.toImage={name:"toImage",title:function(d){return l(d,"png"===((d._context.toImageButtonOptions||{}).format||"png")?"Download plot as a png":"Download plot")},icon:T.camera,click:function(d){var m=d._context.toImageButtonOptions,g={format:m.format||"png"};p.notifier(l(d,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==g.format&&p.isIE()&&(p.notifier(l(d,"IE only supports svg.  Changing format to svg."),"long"),g.format="svg"),["filename","width","height","scale"].forEach(function(x){x in m&&(g[x]=m[x])}),M.call("downloadImage",d,g).then(function(x){p.notifier(l(d,"Snapshot succeeded")+" - "+x,"long")}).catch(function(){p.notifier(l(d,"Sorry, there was a problem downloading your snapshot!"),"long")})}},t.sendDataToCloud={name:"sendDataToCloud",title:function(d){return l(d,"Edit in Chart Studio")},icon:T.disk,click:function(d){k.sendDataToCloud(d)}},t.editInChartStudio={name:"editInChartStudio",title:function(d){return l(d,"Edit in Chart Studio")},icon:T.pencil,click:function(d){k.sendDataToCloud(d)}},t.zoom2d={name:"zoom2d",_cat:"zoom",title:function(d){return l(d,"Zoom")},attr:"dragmode",val:"zoom",icon:T.zoombox,click:i},t.pan2d={name:"pan2d",_cat:"pan",title:function(d){return l(d,"Pan")},attr:"dragmode",val:"pan",icon:T.pan,click:i},t.select2d={name:"select2d",_cat:"select",title:function(d){return l(d,"Box Select")},attr:"dragmode",val:"select",icon:T.selectbox,click:i},t.lasso2d={name:"lasso2d",_cat:"lasso",title:function(d){return l(d,"Lasso Select")},attr:"dragmode",val:"lasso",icon:T.lasso,click:i},t.drawclosedpath={name:"drawclosedpath",title:function(d){return l(d,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:T.drawclosedpath,click:i},t.drawopenpath={name:"drawopenpath",title:function(d){return l(d,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:T.drawopenpath,click:i},t.drawline={name:"drawline",title:function(d){return l(d,"Draw line")},attr:"dragmode",val:"drawline",icon:T.drawline,click:i},t.drawrect={name:"drawrect",title:function(d){return l(d,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:T.drawrect,click:i},t.drawcircle={name:"drawcircle",title:function(d){return l(d,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:T.drawcircle,click:i},t.eraseshape={name:"eraseshape",title:function(d){return l(d,"Erase active shape")},icon:T.eraseshape,click:_},t.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(d){return l(d,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:i},t.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(d){return l(d,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:i},t.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(d){return l(d,"Autoscale")},attr:"zoom",val:"auto",icon:T.autoscale,click:i},t.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(d){return l(d,"Reset axes")},attr:"zoom",val:"reset",icon:T.home,click:i},t.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(d){return l(d,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:i},t.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(d){return l(d,"Compare data on hover")},attr:"hovermode",val:function(d){return d._fullLayout._isHoriz?"y":"x"},icon:T.tooltip_compare,gravity:"ne",click:i},t.zoom3d={name:"zoom3d",_cat:"zoom",title:function(d){return l(d,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:T.zoombox,click:r},t.pan3d={name:"pan3d",_cat:"pan",title:function(d){return l(d,"Pan")},attr:"scene.dragmode",val:"pan",icon:T.pan,click:r},t.orbitRotation={name:"orbitRotation",title:function(d){return l(d,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:T["3d_rotate"],click:r},t.tableRotation={name:"tableRotation",title:function(d){return l(d,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:T["z-axis"],click:r},t.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(d){return l(d,"Reset camera to default")},attr:"resetDefault",icon:T.home,click:n},t.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(d){return l(d,"Reset camera to last save")},attr:"resetLastSave",icon:T.movie,click:n},t.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(d){return l(d,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(d,m){var g=a(d,m);M.call("_guiRelayout",d,g)}},t.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(d){return l(d,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:s},t.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(d){return l(d,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:s},t.resetGeo={name:"resetGeo",_cat:"reset",title:function(d){return l(d,"Reset")},attr:"reset",val:null,icon:T.autoscale,click:s},t.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(d){return l(d,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:f},t.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(d){return l(d,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:f},t.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(d){return l(d,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:f},t.resetViewSankey={name:"resetSankeyGroup",title:function(d){return l(d,"Reset view")},icon:T.home,click:function(d){for(var m={"node.groups":[],"node.x":[],"node.y":[]},g=0;g<d._fullData.length;g++){var x=d._fullData[g]._viewInitial;m["node.groups"].push(x.node.groups.slice()),m["node.x"].push(x.node.x.slice()),m["node.y"].push(x.node.y.slice())}M.call("restyle",d,m)}},t.toggleHover={name:"toggleHover",title:function(d){return l(d,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(d,m){var g=a(d,m);g.hovermode=u(d),M.call("_guiRelayout",d,g)}},t.resetViews={name:"resetViews",title:function(d){return l(d,"Reset views")},icon:T.home,click:function(d,m){var g=m.currentTarget;g.setAttribute("data-attr","zoom"),g.setAttribute("data-val","reset"),i(d,m),g.setAttribute("data-attr","resetLastSave"),n(d,m),y(d,"geo"),y(d,"mapbox")}},t.toggleSpikelines={name:"toggleSpikelines",title:function(d){return l(d,"Toggle Spike Lines")},icon:T.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(d){var m=d._fullLayout;m._cartesianSpikesEnabled="on"===m._cartesianSpikesEnabled?"off":"on",M.call("_guiRelayout",d,function(x){for(var v="on"===x._fullLayout._cartesianSpikesEnabled,b=o.list(x,null,!0),h={},S=0;S<b.length;S++){var w=b[S];h[w._name+".showspikes"]=!!v||w._showSpikeInitial}return h}(d))}},t.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(d){return l(d,"Reset view")},attr:"reset",icon:T.home,click:function(d){y(d,"mapbox")}},t.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(d){return l(d,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:c},t.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(d){return l(d,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:c}},76052:function(ne,F,e){"use strict";var M=e(44248),k=Object.keys(M),o=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],T=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(o),_=[];k.forEach(function(p){!function(l){if(-1===T.indexOf(l._cat||l.name)){var t=l.name,i=(l._cat||l.name).toLowerCase();-1===_.indexOf(t)&&_.push(t),-1===_.indexOf(i)&&_.push(i)}}(M[p])}),_.sort(),ne.exports={DRAW_MODES:o,backButtons:T,foreButtons:_}},90824:function(ne,F,e){"use strict";var M=e(3400),k=e(76308),o=e(31780),T=e(66540);ne.exports=function(_,p){var l=_.modebar||{},t=o.newContainer(p,"modebar");function i(n,a){return M.coerce(l,t,T,n,a)}i("orientation"),i("bgcolor",k.addOpacity(p.paper_bgcolor,.5));var r=k.contrast(k.rgb(p.modebar.bgcolor));i("color",k.addOpacity(r,.3)),i("activecolor",k.addOpacity(r,.7)),i("uirevision",p.uirevision),i("add"),i("remove")}},45460:function(ne,F,e){"use strict";ne.exports={moduleType:"component",name:"modebar",layoutAttributes:e(66540),supplyLayoutDefaults:e(90824),manage:e(18816)}},18816:function(ne,F,e){"use strict";var M=e(79811),k=e(43028),o=e(24040),T=e(10624).isUnifiedHover,_=e(66400),p=e(44248),l=e(76052).DRAW_MODES,t=e(3400).extendDeep;ne.exports=function(i){var r=i._fullLayout,n=i._context,a=r._modeBar;if(n.displayModeBar||n.watermark){if(!Array.isArray(n.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(n.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var s,u=n.modeBarButtons;s=Array.isArray(u)&&u.length?function(f){for(var c=t([],f),y=0;y<c.length;y++)for(var d=c[y],m=0;m<d.length;m++){var g=d[m];if("string"==typeof g){if(void 0===p[g])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));c[y][m]=p[g]}}return c}(u):!n.displayModeBar&&n.watermark?[]:function(f){var c=f._fullLayout,y=f._fullData,d=f._context;function m(we,Te){if("string"==typeof Te){if(Te.toLowerCase()===we.toLowerCase())return!0}else if(Te.name===we||(Te._cat||Te.name)===we.toLowerCase())return!0;return!1}var g=c.modebar.add;"string"==typeof g&&(g=[g]);var x=c.modebar.remove;"string"==typeof x&&(x=[x]);var v=d.modeBarButtonsToAdd.concat(g.filter(function(we){for(var Te=0;Te<d.modeBarButtonsToRemove.length;Te++)if(m(we,d.modeBarButtonsToRemove[Te]))return!1;return!0})),b=d.modeBarButtonsToRemove.concat(x.filter(function(we){for(var Te=0;Te<d.modeBarButtonsToAdd.length;Te++)if(m(we,d.modeBarButtonsToAdd[Te]))return!1;return!0})),h=c._has("cartesian"),S=c._has("gl3d"),w=c._has("geo"),E=c._has("pie"),P=c._has("funnelarea"),I=c._has("gl2d"),O=c._has("ternary"),z=c._has("mapbox"),U=c._has("polar"),R=c._has("smith"),j=c._has("sankey"),Y=function(we){for(var Te=M.list({_fullLayout:we},null,!0),ye=0;ye<Te.length;ye++)if(!Te[ye].fixedrange)return!1;return!0}(c),B=T(c.hovermode),V=[];function q(we){if(we.length){for(var Te=[],ye=0;ye<we.length;ye++){for(var ve=we[ye],xe=p[ve],Ce=xe.name.toLowerCase(),Oe=(xe._cat||xe.name).toLowerCase(),be=!1,ue=0;ue<b.length;ue++){var se=b[ue].toLowerCase();if(se===Ce||se===Oe){be=!0;break}}be||Te.push(p[ve])}V.push(Te)}}var ie=["toImage"];d.showEditInChartStudio?ie.push("editInChartStudio"):d.showSendToCloud&&ie.push("sendDataToCloud"),q(ie);var te=[],ee=[],$=[],J=[];(h||I||E||P||O)+w+S+z+U+R>1?(ee=["toggleHover"],$=["resetViews"]):w?(te=["zoomInGeo","zoomOutGeo"],ee=["hoverClosestGeo"],$=["resetGeo"]):S?(ee=["hoverClosest3d"],$=["resetCameraDefault3d","resetCameraLastSave3d"]):z?(te=["zoomInMapbox","zoomOutMapbox"],ee=["toggleHover"],$=["resetViewMapbox"]):I?ee=["hoverClosestGl2d"]:E?ee=["hoverClosestPie"]:j?(ee=["hoverClosestCartesian","hoverCompareCartesian"],$=["resetViewSankey"]):ee=["toggleHover"],h&&(ee=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(we){for(var Te=0;Te<we.length;Te++)if(!o.traceIs(we[Te],"noHover"))return!1;return!0}(y)||B)&&(ee=[]),!h&&!I||Y||(te=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==$[0]&&($=["resetScale2d"])),S?J=["zoom3d","pan3d","orbitRotation","tableRotation"]:(h||I)&&!Y||O?J=["zoom2d","pan2d"]:z||w?J=["pan2d"]:U&&(J=["zoom2d"]),function(we){for(var Te=!1,ye=0;ye<we.length&&!Te;ye++){var ve=we[ye];ve._module&&ve._module.selectPoints&&(o.traceIs(ve,"scatter-like")?(k.hasMarkers(ve)||k.hasText(ve))&&(Te=!0):o.traceIs(ve,"box-violin")&&"all"!==ve.boxpoints&&"all"!==ve.points||(Te=!0))}return Te}(y)&&J.push("select2d","lasso2d");var X=[],ae=function(we){-1===X.indexOf(we)&&-1!==ee.indexOf(we)&&X.push(we)};if(Array.isArray(v)){for(var ce=[],le=0;le<v.length;le++){var pe=v[le];"string"==typeof pe?(pe=pe.toLowerCase(),-1!==l.indexOf(pe)?(c._has("mapbox")||c._has("cartesian"))&&J.push(pe):"togglespikelines"===pe?ae("toggleSpikelines"):"togglehover"===pe?ae("toggleHover"):"hovercompare"===pe?ae("hoverCompareCartesian"):"hoverclosest"===pe?(ae("hoverClosestCartesian"),ae("hoverClosestGeo"),ae("hoverClosest3d"),ae("hoverClosestGl2d"),ae("hoverClosestPie")):"v1hovermode"===pe&&(ae("toggleHover"),ae("hoverClosestCartesian"),ae("hoverCompareCartesian"),ae("hoverClosestGeo"),ae("hoverClosest3d"),ae("hoverClosestGl2d"),ae("hoverClosestPie"))):ce.push(pe)}v=ce}return q(J),q(te.concat($)),q(X),function(we,Te){if(Te.length)if(Array.isArray(Te[0]))for(var ye=0;ye<Te.length;ye++)we.push(Te[ye]);else we.push(Te);return we}(V,v)}(i),a?a.update(i,s):r._modeBar=_(i,s)}else a&&(a.destroy(),delete r._modeBar)}},66400:function(ne,F,e){"use strict";var M=e(33428),k=e(38248),o=e(3400),T=e(9224),_=e(25788).version,p=new DOMParser;function l(i){this.container=i.container,this.element=document.createElement("div"),this.update(i.graphInfo,i.buttons),this.container.appendChild(this.element)}var t=l.prototype;t.update=function(i,r){this.graphInfo=i;var n=this.graphInfo._context,a=this.graphInfo._fullLayout,s="modebar-"+a._uid;this.element.setAttribute("id",s),this._uid=s,this.element.className="modebar","hover"===n.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===a.modebar.orientation&&(this.element.className+=" vertical",r=r.reverse());var u=a.modebar,f="hover"===n.displayModeBar?".js-plotly-plot .plotly:hover ":"";o.deleteRelatedStyleRule(s),o.addRelatedStyleRule(s,f+"#"+s+" .modebar-group","background-color: "+u.bgcolor),o.addRelatedStyleRule(s,"#"+s+" .modebar-btn .icon path","fill: "+u.color),o.addRelatedStyleRule(s,"#"+s+" .modebar-btn:hover .icon path","fill: "+u.activecolor),o.addRelatedStyleRule(s,"#"+s+" .modebar-btn.active .icon path","fill: "+u.activecolor);var c=!this.hasButtons(r),y=this.hasLogo!==n.displaylogo,d=this.locale!==n.locale;if(this.locale=n.locale,(c||y||d)&&(this.removeAllButtons(),this.updateButtons(r),n.watermark||n.displaylogo)){var m=this.getLogo();n.watermark&&(m.className=m.className+" watermark"),"v"===a.modebar.orientation?this.element.insertBefore(m,this.element.childNodes[0]):this.element.appendChild(m),this.hasLogo=!0}this.updateActiveButton()},t.updateButtons=function(i){var r=this;this.buttons=i,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(n){var a=r.createGroup();n.forEach(function(s){var u=s.name;if(!u)throw new Error("must provide button 'name' in button config");if(-1!==r.buttonsNames.indexOf(u))throw new Error("button name '"+u+"' is taken");r.buttonsNames.push(u);var f=r.createButton(s);r.buttonElements.push(f),a.appendChild(f)}),r.element.appendChild(a)})},t.createGroup=function(){var i=document.createElement("div");return i.className="modebar-group",i},t.createButton=function(i){var r=this,n=document.createElement("a");n.setAttribute("rel","tooltip"),n.className="modebar-btn";var a=i.title;void 0===a?a=i.name:"function"==typeof a&&(a=a(this.graphInfo)),(a||0===a)&&n.setAttribute("data-title",a),void 0!==i.attr&&n.setAttribute("data-attr",i.attr);var s=i.val;if(void 0!==s&&("function"==typeof s&&(s=s(this.graphInfo)),n.setAttribute("data-val",s)),"function"!=typeof i.click)throw new Error("must provide button 'click' function in button config");n.addEventListener("click",function(f){i.click(r.graphInfo,f),r.updateActiveButton(f.currentTarget)}),n.setAttribute("data-toggle",i.toggle||!1),i.toggle&&M.select(n).classed("active",!0);var u=i.icon;return n.appendChild("function"==typeof u?u():this.createIcon(u||T.question)),n.setAttribute("data-gravity",i.gravity||"n"),n},t.createIcon=function(i){var r,n=k(i.height)?Number(i.height):i.ascent-i.descent,a="http://www.w3.org/2000/svg";if(i.path){(r=document.createElementNS(a,"svg")).setAttribute("viewBox",[0,0,i.width,n].join(" ")),r.setAttribute("class","icon");var s=document.createElementNS(a,"path");s.setAttribute("d",i.path),i.transform?s.setAttribute("transform",i.transform):void 0!==i.ascent&&s.setAttribute("transform","matrix(1 0 0 -1 0 "+i.ascent+")"),r.appendChild(s)}return i.svg&&(r=p.parseFromString(i.svg,"application/xml").childNodes[0]),r.setAttribute("height","1em"),r.setAttribute("width","1em"),r},t.updateActiveButton=function(i){var r=this.graphInfo._fullLayout,n=void 0!==i?i.getAttribute("data-attr"):null;this.buttonElements.forEach(function(a){var s=a.getAttribute("data-val")||!0,u=a.getAttribute("data-attr"),f="true"===a.getAttribute("data-toggle"),c=M.select(a);if(f)u===n&&c.classed("active",!c.classed("active"));else{var y=null===u?u:o.nestedProperty(r,u).get();c.classed("active",y===s)}})},t.hasButtons=function(i){var r=this.buttons;if(!r||i.length!==r.length)return!1;for(var n=0;n<i.length;++n){if(i[n].length!==r[n].length)return!1;for(var a=0;a<i[n].length;a++)if(i[n][a].name!==r[n][a].name)return!1}return!0},t.getLogo=function(){var i=this.createGroup(),r=document.createElement("a");return r.href="https://plotly.com/",r.target="_blank",r.setAttribute("data-title",o._(this.graphInfo,"Produced with Plotly.js")+" (v"+_+")"),r.className="modebar-btn plotlyjsicon modebar-btn--logo",r.appendChild(this.createIcon(T.newplotlylogo)),i.appendChild(r),i},t.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},t.destroy=function(){o.removeElement(this.container.querySelector(".modebar")),o.deleteRelatedStyleRule(this._uid)},ne.exports=function(i,r){var n=i._fullLayout,a=new l({graphInfo:i,container:n._modebardiv.node(),buttons:r});return n._privateplot&&M.select(a.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),a}},26680:function(ne,F,e){"use strict";var M=e(25376),k=e(22548),o=(0,e(31780).templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});ne.exports={visible:{valType:"boolean",editType:"plot"},buttons:o,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:M({editType:"plot"}),bgcolor:{valType:"color",dflt:k.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},85984:function(ne){"use strict";ne.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},22148:function(ne,F,e){"use strict";var M=e(3400),k=e(76308),o=e(31780),T=e(51272),_=e(26680),p=e(85984);function l(t,i,r,n){var a=n.calendar;function s(f,c){return M.coerce(t,i,_.buttons,f,c)}if(s("visible")){var u=s("step");"all"!==u&&(!a||"gregorian"===a||"month"!==u&&"year"!==u?s("stepmode"):i.stepmode="backward",s("count")),s("label")}}ne.exports=function(t,i,r,n,a){var s=t.rangeselector||{},u=o.newContainer(i,"rangeselector");function f(d,m){return M.coerce(s,u,_,d,m)}if(f("visible",T(s,u,{name:"buttons",handleItemDefaults:l,calendar:a}).length>0)){var c=function(d,m,g){for(var x=g.filter(function(S){return m[S].anchor===d._id}),v=0,b=0;b<x.length;b++){var h=m[x[b]].domain;h&&(v=Math.max(h[1],v))}return[d.domain[0],v+p.yPad]}(i,r,n);f("x",c[0]),f("y",c[1]),M.noneOrAll(t,i,["x","y"]),f("xanchor"),f("yanchor"),M.coerceFont(f,"font",r.font);var y=f("bgcolor");f("activecolor",k.contrast(y,p.lightAmount,p.darkAmount)),f("bordercolor"),f("borderwidth")}}},50216:function(ne,F,e){"use strict";var M=e(33428),k=e(24040),o=e(7316),T=e(76308),_=e(43616),p=e(3400),l=p.strTranslate,t=e(72736),i=e(79811),r=e(84284),n=r.LINE_SPACING,a=r.FROM_TL,s=r.FROM_BR,u=e(85984),f=e(48040);function c(m){return m._id}function y(m,g,x){var b,h,v=p.ensureSingle(m,"rect","selector-rect",function(b){b.attr("shape-rendering","crispEdges")});v.attr({rx:u.rx,ry:u.ry}),v.call(T.stroke,g.bordercolor).call(T.fill,(b=g,h=x,h._isActive||h._isHovered?b.activecolor:b.bgcolor)).style("stroke-width",g.borderwidth+"px")}function d(m,g,x,v){var b,h;p.ensureSingle(m,"text","selector-text",function(S){S.attr("text-anchor","middle")}).call(_.font,g.font).text((b=x,h=v._fullLayout._meta,b.label?h?p.templateString(b.label,h):b.label:"all"===b.step?"all":b.count+b.step.charAt(0))).call(function(S){t.convertToTspans(S,v)})}ne.exports=function(m){var g=m._fullLayout._infolayer.selectAll(".rangeselector").data(function(x){for(var v=i.list(x,"x",!0),b=[],h=0;h<v.length;h++){var S=v[h];S.rangeselector&&S.rangeselector.visible&&b.push(S)}return b}(m),c);g.enter().append("g").classed("rangeselector",!0),g.exit().remove(),g.style({cursor:"pointer","pointer-events":"all"}),g.each(function(x){var v=M.select(this),b=x,h=b.rangeselector,S=v.selectAll("g.button").data(p.filterVisible(h.buttons));S.enter().append("g").classed("button",!0),S.exit().remove(),S.each(function(w){var E=M.select(this),P=f(b,w);w._isActive=function(I,O,z){if("all"===O.step)return!0===I.autorange;var U=Object.keys(z);return I.range[0]===z[U[0]]&&I.range[1]===z[U[1]]}(b,w,P),E.call(y,h,w),E.call(d,h,w,m),E.on("click",function(){m._dragged||k.call("_guiRelayout",m,P)}),E.on("mouseover",function(){w._isHovered=!0,E.call(y,h,w)}),E.on("mouseout",function(){w._isHovered=!1,E.call(y,h,w)})}),function(w,E,P,I,O){var z=0,U=0,R=P.borderwidth;E.each(function(){var ie=M.select(this).select(".selector-text"),ee=Math.max(P.font.size*n*t.lineCount(ie),16)+3;U=Math.max(U,ee)}),E.each(function(){var ie=M.select(this),te=ie.select(".selector-rect"),ee=ie.select(".selector-text"),$=ee.node()&&_.bBox(ee.node()).width,J=P.font.size*n,X=t.lineCount(ee),ae=Math.max($+10,u.minButtonWidth);ie.attr("transform",l(R+z,R)),te.attr({x:0,y:0,width:ae,height:U}),t.positionText(ee,ae/2,U/2-(X-1)*J/2+3),z+=ae+5});var j=w._fullLayout._size,Y=j.l+j.w*P.x,B=j.t+j.h*(1-P.y),V="left";p.isRightAnchor(P)&&(Y-=z,V="right"),p.isCenterAnchor(P)&&(Y-=z/2,V="center");var q="top";p.isBottomAnchor(P)&&(B-=U,q="bottom"),p.isMiddleAnchor(P)&&(B-=U/2,q="middle"),z=Math.ceil(z),U=Math.ceil(U),Y=Math.round(Y),B=Math.round(B),o.autoMargin(w,I+"-range-selector",{x:P.x,y:P.y,l:z*a[V],r:z*s[V],b:U*s[q],t:U*a[q]}),O.attr("transform",l(Y,B))}(m,S,h,b._name,v)})}},48040:function(ne,F,e){"use strict";var M=e(73220),k=e(3400).titleCase;ne.exports=function(o,T){var _=o._name,p={};if("all"===T.step)p[_+".autorange"]=!0;else{var l=function(t,i){var r,n=t.range,a=new Date(t.r2l(n[1])),u=M["utc"+k(i.step)],f=i.count;switch(i.stepmode){case"backward":r=t.l2r(+u.offset(a,-f));break;case"todate":var c=u.offset(a,-f);r=t.l2r(+u.ceil(c))}return[r,n[1]]}(o,T);p[_+".range[0]"]=l[0],p[_+".range[1]"]=l[1]}return p}},41152:function(ne,F,e){"use strict";ne.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e(26680)}}},layoutAttributes:e(26680),handleDefaults:e(22148),draw:e(50216)}},11200:function(ne,F,e){"use strict";var M=e(22548);ne.exports={bgcolor:{valType:"color",dflt:M.background,editType:"plot"},bordercolor:{valType:"color",dflt:M.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},26652:function(ne,F,e){"use strict";var M=e(79811).list,k=e(19280).getAutoRange,o=e(74636);ne.exports=function(T){for(var _=M(T,"x",!0),p=0;p<_.length;p++){var l=_[p],t=l[o.name];t&&t.visible&&t.autorange&&(t._input.autorange=!0,t._input.range=t.range=k(T,l))}}},74636:function(ne){"use strict";ne.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},94040:function(ne,F,e){"use strict";var M=e(3400),k=e(31780),o=e(79811),T=e(11200),_=e(10936);ne.exports=function(p,l,t){var i=p[t],r=l[t];if(i.rangeslider||l._requestRangeslider[r._id]){M.isPlainObject(i.rangeslider)||(i.rangeslider={});var n,a,s=i.rangeslider,u=k.newContainer(r,"rangeslider");if(v("visible")){v("bgcolor",l.plot_bgcolor),v("bordercolor"),v("borderwidth"),v("thickness"),v("autorange",!r.isValidRange(s.range)),v("range");var f=l._subplots;if(f)for(var c=f.cartesian.filter(function(h){return h.substr(0,h.indexOf("y"))===o.name2id(t)}).map(function(h){return h.substr(h.indexOf("y"),h.length)}),y=M.simpleMap(c,o.id2name),d=0;d<y.length;d++){var m=y[d];n=s[m]||{},a=k.newContainer(u,m,"yaxis");var g,x=l[m];n.range&&x.isValidRange(n.range)&&(g="fixed"),"match"!==b("rangemode",g)&&b("range",x.range.slice())}u._input=s}}function v(h,S){return M.coerce(s,u,T,h,S)}function b(h,S){return M.coerce(n,a,_,h,S)}}},20060:function(ne,F,e){"use strict";var M=e(33428),k=e(24040),o=e(7316),T=e(3400),_=T.strTranslate,p=e(43616),l=e(76308),t=e(81668),i=e(57952),r=e(79811),n=e(86476),a=e(93972),s=e(74636);function u(x){return"number"==typeof x.clientX?x.clientX:x.touches&&x.touches.length>0?x.touches[0].clientX:0}function f(x,v,b,h){var S=T.ensureSingle(x,"rect",s.bgClassName,function(I){I.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),w=h.borderwidth%2==0?h.borderwidth:h.borderwidth-1,E=-h._offsetShift,P=p.crispRound(v,h.borderwidth);S.attr({width:h._width+w,height:h._height+w,transform:_(E,E),"stroke-width":P}).call(l.stroke,h.bordercolor).call(l.fill,h.bgcolor)}function c(x,v,b,h){T.ensureSingleById(v._fullLayout._topdefs,"clipPath",h._clipId,function(w){w.append("rect").attr({x:0,y:0})}).select("rect").attr({width:h._width,height:h._height})}function y(x,v,b,h){var S,w=v.calcdata,E=x.selectAll("g."+s.rangePlotClassName).data(b._subplotsWith,T.identity);E.enter().append("g").attr("class",function(P){return s.rangePlotClassName+" "+P}).call(p.setClipUrl,h._clipId,v),E.order(),E.exit().remove(),E.each(function(P,I){var O=M.select(this),z=0===I,U=r.getFromId(v,P,"y"),R=U._name,j=h[R],Y={data:[],layout:{xaxis:{type:b.type,domain:[0,1],range:h.range.slice(),calendar:b.calendar},width:h._width,height:h._height,margin:{t:0,b:0,l:0,r:0}},_context:v._context};b.rangebreaks&&(Y.layout.xaxis.rangebreaks=b.rangebreaks),Y.layout[R]={type:U.type,domain:[0,1],range:"match"!==j.rangemode?j.range.slice():U.range.slice(),calendar:U.calendar},U.rangebreaks&&(Y.layout[R].rangebreaks=U.rangebreaks),o.supplyDefaults(Y);var B=Y._fullLayout.xaxis,V=Y._fullLayout[R];B.clearCalc(),B.setScale(),V.clearCalc(),V.setScale();var q={id:P,plotgroup:O,xaxis:B,yaxis:V,isRangePlot:!0};z?S=q:(q.mainplot="xy",q.mainplotinfo=S),i.rangePlot(v,q,function(ie,te){for(var ee=[],$=0;$<ie.length;$++){var J=ie[$],X=J[0].trace;X.xaxis+X.yaxis===te&&ee.push(J)}return ee}(w,P))})}function d(x,v,b,h,S){T.ensureSingle(x,"rect",s.maskMinClassName,function(w){w.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",h._height).call(l.fill,s.maskColor),T.ensureSingle(x,"rect",s.maskMaxClassName,function(w){w.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",h._height).call(l.fill,s.maskColor),"match"!==S.rangemode&&(T.ensureSingle(x,"rect",s.maskMinOppAxisClassName,function(w){w.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",h._width).call(l.fill,s.maskOppAxisColor),T.ensureSingle(x,"rect",s.maskMaxOppAxisClassName,function(w){w.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",h._width).style("border-top",s.maskOppBorder).call(l.fill,s.maskOppAxisColor))}function m(x,v,b,h){v._context.staticPlot||T.ensureSingle(x,"rect",s.slideBoxClassName,function(S){S.attr({y:0,cursor:s.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:h._height,fill:s.slideBoxFill})}function g(x,v,b,h){var S=T.ensureSingle(x,"g",s.grabberMinClassName),w=T.ensureSingle(x,"g",s.grabberMaxClassName),E={x:0,width:s.handleWidth,rx:s.handleRadius,fill:l.background,stroke:l.defaultLine,"stroke-width":s.handleStrokeWidth,"shape-rendering":"crispEdges"},P={y:Math.round(h._height/4),height:Math.round(h._height/2)};T.ensureSingle(S,"rect",s.handleMinClassName,function(O){O.attr(E)}).attr(P),T.ensureSingle(w,"rect",s.handleMaxClassName,function(O){O.attr(E)}).attr(P);var I={width:s.grabAreaWidth,x:0,y:0,fill:s.grabAreaFill,cursor:v._context.staticPlot?void 0:s.grabAreaCursor};T.ensureSingle(S,"rect",s.grabAreaMinClassName,function(O){O.attr(I)}).attr("height",h._height),T.ensureSingle(w,"rect",s.grabAreaMaxClassName,function(O){O.attr(I)}).attr("height",h._height)}ne.exports=function(x){for(var v=x._fullLayout,b=v._rangeSliderData,h=0;h<b.length;h++){var S=b[h][s.name];S._clipId=S._id+"-"+v._uid}var w=v._infolayer.selectAll("g."+s.containerClassName).data(b,function(E){return E._name});w.exit().each(function(E){v._topdefs.select("#"+E[s.name]._clipId).remove()}).remove(),0!==b.length&&(w.enter().append("g").classed(s.containerClassName,!0).attr("pointer-events","all"),w.each(function(E){var P=M.select(this),I=E[s.name],O=v[r.id2name(E.anchor)],z=I[r.id2name(E.anchor)];if(I.range){var U,R=T.simpleMap(I.range,E.r2l),j=T.simpleMap(E.range,E.r2l);U=j[0]<j[1]?[Math.min(R[0],j[0]),Math.max(R[1],j[1])]:[Math.max(R[0],j[0]),Math.min(R[1],j[1])],I.range=I._input.range=T.simpleMap(U,E.l2r)}E.cleanRange("rangeslider.range");var Y=v._size,B=E.domain;I._width=Y.w*(B[1]-B[0]);var V=Math.round(Y.l+Y.w*B[0]),q=Math.round(Y.t+Y.h*(1-E._counterDomainMin)+("bottom"===E.side?E._depth:0)+I._offsetShift+s.extraPad);P.attr("transform",_(V,q)),I._rl=T.simpleMap(I.range,E.r2l);var ie=I._rl[0],te=I._rl[1],ee=te-ie;if(I.p2d=function(Te){return Te/I._width*ee+ie},I.d2p=function(Te){return(Te-ie)/ee*I._width},E.rangebreaks){var $=E.locateBreaks(ie,te);if($.length){var J,X,ae=0;for(J=0;J<$.length;J++)ae+=(X=$[J]).max-X.min;var ce=I._width/(te-ie-ae),le=[-ce*ie];for(J=0;J<$.length;J++)le.push(le[le.length-1]-ce*((X=$[J]).max-X.min));for(I.d2p=function(Te){for(var ye=le[0],ve=0;ve<$.length;ve++){var xe=$[ve];if(Te>=xe.max)ye=le[ve+1];else if(Te<xe.min)break}return ye+ce*Te},J=0;J<$.length;J++)(X=$[J]).pmin=I.d2p(X.min),X.pmax=I.d2p(X.max);I.p2d=function(Te){for(var ye=le[0],ve=0;ve<$.length;ve++){var xe=$[ve];if(Te>=xe.pmax)ye=le[ve+1];else if(Te<xe.pmin)break}return(Te-ye)/ce}}}if("match"!==z.rangemode){var pe=O.r2l(z.range[0]),we=O.r2l(z.range[1])-pe;I.d2pOppAxis=function(Te){return(Te-pe)/we*I._height}}P.call(f,x,E,I).call(c,x,E,I).call(y,x,E,I).call(d,x,E,I,z).call(m,x,E,I).call(g,x,E,I),function(Te,ye,ve,xe){if(!ye._context.staticPlot){var Ce=Te.select("rect."+s.slideBoxClassName).node(),Oe=Te.select("rect."+s.grabAreaMinClassName).node(),be=Te.select("rect."+s.grabAreaMaxClassName).node();Te.on("mousedown",ue),Te.on("touchstart",ue)}function ue(){var se=M.event,ge=se.target,Ie=u(se),ke=Ie-Te.node().getBoundingClientRect().left,Se=xe.d2p(ve._rl[0]),Pe=xe.d2p(ve._rl[1]),Fe=n.coverSlip();function Be(Me){var Le,Ne,Re,He=+u(Me)-Ie;switch(ge){case Ce:if(Re="ew-resize",Se+He>ve._length||Pe+He<0)return;Le=Se+He,Ne=Pe+He;break;case Oe:if(Re="col-resize",Se+He>ve._length)return;Le=Se+He,Ne=Pe;break;case be:if(Re="col-resize",Pe+He<0)return;Le=Se,Ne=Pe+He;break;default:Re="ew-resize",Le=ke,Ne=ke+He}if(Ne<Le){var Ze=Ne;Ne=Le,Le=Ze}xe._pixelMin=Le,xe._pixelMax=Ne,a(M.select(Fe),Re),function(nt,ft,ht,Tt){function At(it){return ht.l2r(T.constrain(it,Tt._rl[0],Tt._rl[1]))}var _t=At(Tt.p2d(Tt._pixelMin)),ot=At(Tt.p2d(Tt._pixelMax));window.requestAnimationFrame(function(){k.call("_guiRelayout",ft,ht._name+".range",[_t,ot])})}(0,ye,ve,xe)}function me(){Fe.removeEventListener("mousemove",Be),Fe.removeEventListener("mouseup",me),this.removeEventListener("touchmove",Be),this.removeEventListener("touchend",me),T.removeElement(Fe)}this.addEventListener("touchmove",Be),this.addEventListener("touchend",me),Fe.addEventListener("mousemove",Be),Fe.addEventListener("mouseup",me)}}(P,x,E,I),function(Te,ye,ve,xe,Ce,Oe){var be=s.handleWidth/2;function ue(Me){return T.constrain(Me,0,xe._width)}function se(Me){return T.constrain(Me,0,xe._height)}function ge(Me){return T.constrain(Me,-be,xe._width+be)}var Ie=ue(xe.d2p(ve._rl[0])),ke=ue(xe.d2p(ve._rl[1]));if(Te.select("rect."+s.slideBoxClassName).attr("x",Ie).attr("width",ke-Ie),Te.select("rect."+s.maskMinClassName).attr("width",Ie),Te.select("rect."+s.maskMaxClassName).attr("x",ke).attr("width",xe._width-ke),"match"!==Oe.rangemode){var Se=xe._height-se(xe.d2pOppAxis(Ce._rl[1])),Pe=xe._height-se(xe.d2pOppAxis(Ce._rl[0]));Te.select("rect."+s.maskMinOppAxisClassName).attr("x",Ie).attr("height",Se).attr("width",ke-Ie),Te.select("rect."+s.maskMaxOppAxisClassName).attr("x",Ie).attr("y",Pe).attr("height",xe._height-Pe).attr("width",ke-Ie),Te.select("rect."+s.slideBoxClassName).attr("y",Se).attr("height",Pe-Se)}var Be=Math.round(ge(Ie-be))-.5,me=Math.round(ge(ke-be))+.5;Te.select("g."+s.grabberMinClassName).attr("transform",_(Be,.5)),Te.select("g."+s.grabberMaxClassName).attr("transform",_(me,.5))}(P,0,E,I,O,z),"bottom"===E.side&&t.draw(x,E._id+"title",{propContainer:E,propName:E._name+".title",placeholder:v._dfltTitle.x,attributes:{x:E._offset+E._length/2,y:q+I._height+I._offsetShift+10+1.5*E.title.font.size,"text-anchor":"middle"}})}))}},97944:function(ne,F,e){"use strict";var M=e(79811),k=e(72736),o=e(74636),T=e(84284).LINE_SPACING,_=o.name;function p(l){var t=l&&l[_];return t&&t.visible}F.isVisible=p,F.makeData=function(l){var t=M.list({_fullLayout:l},"x",!0),i=l.margin,r=[];if(!l._has("gl2d"))for(var n=0;n<t.length;n++){var a=t[n];if(p(a)){r.push(a);var s=a[_];s._id=_+a._id,s._height=(l.height-i.b-i.t)*s.thickness,s._offsetShift=Math.floor(s.borderwidth/2)}}l._rangeSliderData=r},F.autoMarginOpts=function(l,t){var i=l._fullLayout,r=t[_],n=t._id.charAt(0),a=0,s=0;return"bottom"===t.side&&(a=t._depth,t.title.text!==i._dfltTitle[n]&&(s=1.5*t.title.font.size+10+r._offsetShift,s+=(t.title.text.match(k.BR_TAG_ALL)||[]).length*t.title.font.size*T)),{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:r._height+a+Math.max(i.margin.b,s),pad:o.extraPad+2*r._offsetShift}}},49692:function(ne,F,e){"use strict";var M=e(3400),k=e(11200),o=e(10936),T=e(97944);ne.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:M.extendFlat({},k,{yaxis:o})}}},layoutAttributes:e(11200),handleDefaults:e(94040),calcAutorange:e(26652),draw:e(20060),isVisible:T.isVisible,makeData:T.makeData,autoMarginOpts:T.autoMarginOpts}},10936:function(ne){"use strict";ne.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},93956:function(ne,F,e){"use strict";var M=e(13916),k=e(52904).line,o=e(98192).u,T=e(92880).extendFlat,_=e(67824).overrideAll,p=e(31780).templatedArray;e(36208),ne.exports=_(p("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:T({},M.xref,{}),yref:T({},M.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:k.color,width:T({},k.width,{min:1,dflt:1}),dash:T({},o,{dflt:"dot"})}}),"arraydraw","from-root")},83280:function(ne){"use strict";ne.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},74224:function(ne,F,e){"use strict";var M=e(3400),k=e(54460),o=e(51272),T=e(93956),_=e(65152);function p(l,t,i){function r(E,P){return M.coerce(l,t,T,E,P)}var n=r("path"),a="path"!==r("type",n?"path":"rect");a&&delete t.path,r("opacity"),r("line.color"),r("line.width"),r("line.dash");for(var s=["x","y"],u=0;u<2;u++){var f,c,y,d=s[u],m={_fullLayout:i},g=k.coerceRef(l,t,m,d);if((f=k.getFromId(m,g))._selectionIndices.push(t._index),y=_.rangeToShapePosition(f),c=_.shapePositionToRange(f),a){var x=d+"0",v=d+"1",b=l[x],h=l[v];l[x]=c(l[x],!0),l[v]=c(l[v],!0),k.coercePosition(t,m,r,g,x),k.coercePosition(t,m,r,g,v);var S=t[x],w=t[v];void 0!==S&&void 0!==w&&(t[x]=y(S),t[v]=y(w),l[x]=b,l[v]=h)}}a&&M.noneOrAll(l,t,["x0","x1","y0","y1"])}ne.exports=function(l,t){o(l,t,{name:"selections",handleItemDefaults:p});for(var i=t.selections,r=0;r<i.length;r++){var n=i[r];n&&void 0===n.path&&(void 0!==n.x0&&void 0!==n.x1&&void 0!==n.y0&&void 0!==n.y1||(t.selections[r]=null))}}},23640:function(ne,F,e){"use strict";var M=e(9856).readPaths,k=e(55496),o=e(1936).clearOutlineControllers,T=e(76308),_=e(43616),p=e(31780).arrayEditor,l=e(65152),t=l.getPathString;function i(u){var f=u._fullLayout;for(var c in o(u),f._selectionLayer.selectAll("path").remove(),f._plots){var y=f._plots[c].selectionLayer;y&&y.selectAll("path").remove()}for(var d=0;d<f.selections.length;d++)n(u,d)}function r(u){return u._context.editSelection}function n(u,f){u._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+f+'"]').remove();var c=l.makeSelectionsOptionsAndPlotinfo(u,f),y=c.options,d=c.plotinfo;y._input&&function(m){var g=t(u,y),x={"data-index":f,"fill-rule":"evenodd",d:g},v=y.opacity,b="rgba(0,0,0,0)",h=y.line.color||T.contrast(u._fullLayout.plot_bgcolor),S=y.line.width,w=y.line.dash;S||(S=5,w="solid");var E=r(u)&&u._fullLayout._activeSelectionIndex===f;E&&(b=u._fullLayout.activeselection.fillcolor,v=u._fullLayout.activeselection.opacity);for(var P=[],I=1;I>=0;I--){var O=m.append("path").attr(x).style("opacity",I?.1:v).call(T.stroke,h).call(T.fill,b).call(_.dashLine,I?"solid":w,I?4+S:S);if(a(O,u,y),E){var z=p(u.layout,"selections",y);O.style({cursor:"move"});var U={element:O.node(),plotinfo:d,gd:u,editHelpers:z,isActiveSelection:!0},R=M(g,u);k(R,O,U)}else O.style("pointer-events",I?"all":"none");P[I]=O}var j=P[0];P[1].node().addEventListener("click",function(){return function(Y,B){if(r(Y)){var V=+B.node().getAttribute("data-index");if(V>=0){if(V===Y._fullLayout._activeSelectionIndex)return void s(Y);Y._fullLayout._activeSelectionIndex=V,Y._fullLayout._deactivateSelection=s,i(Y)}}}(u,j)})}(u._fullLayout._selectionLayer)}function a(u,f,c){_.setClipUrl(u,"clip"+f._fullLayout._uid+(c.xref+c.yref),f)}function s(u){r(u)&&u._fullLayout._activeSelectionIndex>=0&&(o(u),delete u._fullLayout._activeSelectionIndex,i(u))}ne.exports={draw:i,drawOne:n,activateLastSelection:function(u){r(u)&&(u._fullLayout._activeSelectionIndex=u._fullLayout.selections.length-1,u._fullLayout._deactivateSelection=s,i(u))}}},34200:function(ne,F,e){"use strict";var M=e(98192).u,k=e(92880).extendFlat;ne.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:k({},M,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},81004:function(ne){"use strict";ne.exports=function(F,e,M){M("newselection.mode"),M("newselection.line.width")&&(M("newselection.line.color"),M("newselection.line.dash")),M("activeselection.fillcolor"),M("activeselection.opacity")}},5968:function(ne,F,e){"use strict";var M=e(72760).selectMode,k=e(1936).clearOutline,o=e(9856),T=o.readPaths,_=o.writePaths,p=o.fixDatesForPaths;ne.exports=function(l,t){if(l.length){var i=l[0][0];if(i){var r=i.getAttribute("d"),n=t.gd,a=n._fullLayout.newselection,s=t.plotinfo,u=s.xaxis,f=s.yaxis,c=t.isActiveSelection,y=t.dragmode,d=(n.layout||{}).selections||[];if(!M(y)&&void 0!==c){var m=n._fullLayout._activeSelectionIndex;if(m<d.length)switch(n._fullLayout.selections[m].type){case"rect":y="select";break;case"path":y="lasso"}}var g,x=T(r,n,s,c),v={xref:u._id,yref:f._id,opacity:a.opacity,line:{color:a.line.color,width:a.line.width,dash:a.line.dash}};1===x.length&&(g=x[0]),g&&5===g.length&&"select"===y?(v.type="rect",v.x0=g[0][1],v.y0=g[0][2],v.x1=g[2][1],v.y1=g[2][2]):(v.type="path",u&&f&&p(x,u,f),v.path=_(x),g=null),k(n);for(var b=t.editHelpers,h=(b||{}).modifyItem,S=[],w=0;w<d.length;w++){var E=n._fullLayout.selections[w];if(E){if(S[w]=E._input,void 0!==c&&w===n._fullLayout._activeSelectionIndex){var P=v;switch(E.type){case"rect":h("x0",P.x0),h("x1",P.x1),h("y0",P.y0),h("y1",P.y1);break;case"path":h("path",P.path)}}}else S[w]=E}return void 0===c?(S.push(v),S):b?b.getUpdateObj():{}}}}},5840:function(ne,F,e){"use strict";var M=e(3400).strTranslate;function k(o,T){switch(o.type){case"log":return o.p2d(T);case"date":return o.p2r(T,0,o.calendar);default:return o.p2r(T)}}ne.exports={p2r:k,r2p:function(o,T){switch(o.type){case"log":return o.d2p(T);case"date":return o.r2p(T,0,o.calendar);default:return o.r2p(T)}},axValue:function(o){var T="y"===o._id.charAt(0)?1:0;return function(_){return k(o,_[T])}},getTransform:function(o){return M(o.xaxis._offset,o.yaxis._offset)}}},22676:function(ne,F,e){"use strict";var M=e(23640),k=e(43156);ne.exports={moduleType:"component",name:"selections",layoutAttributes:e(93956),supplyLayoutDefaults:e(74224),supplyDrawNewSelectionDefaults:e(81004),includeBasePlot:e(36632)("selections"),draw:M.draw,drawOne:M.drawOne,reselect:k.reselect,prepSelect:k.prepSelect,clearOutline:k.clearOutline,clearSelectionsCache:k.clearSelectionsCache,selectOnClick:k.selectOnClick}},43156:function(ne,F,e){"use strict";var M=e(14756),k=e(61456),o=e(24040),T=e(43616).dashStyle,_=e(76308),p=e(93024),l=e(10624).makeEventData,t=e(72760),i=t.freeMode,r=t.rectMode,n=t.drawMode,a=t.openMode,s=t.selectMode,u=e(65152),f=e(85448),c=e(55496),y=e(1936).clearOutline,d=e(9856),m=d.handleEllipse,g=d.readPaths,x=e(93940).newShapes,v=e(5968),b=e(23640).activateLastSelection,h=e(3400),S=h.sorterAsc,w=e(92065),E=e(91200),P=e(79811).getFromId,I=e(73696),O=e(39172).redrawReglTraces,z=e(83280),U=z.MINSELECT,R=w.filter,j=w.tester,Y=e(5840),B=Y.p2r,V=Y.axValue,q=Y.getTransform;function ie(Be){return void 0!==Be.subplot}function te(Be,me,Me,Le,Ne,Re,He){var Ze,nt,ft,ht,Tt,At,_t,ot,it,$e,Pt=me._hoverdata,jt=me._fullLayout.clickmode.indexOf("event")>-1,Ut=[];if(($e=Pt)&&Array.isArray($e)&&!0!==$e[0].hoverOnBox){X(Be,me,Re);var Rt=function($e,pt){var ct,Ve,Ge=$e[0],ut=-1,Qe=[];for(Ve=0;Ve<pt.length;Ve++)if(Ge.fullData._expandedIndex===(ct=pt[Ve]).cd[0].trace._expandedIndex){if(!0===Ge.hoverOnBox)break;void 0!==Ge.pointNumber?ut=Ge.pointNumber:void 0!==Ge.binNumber&&(ut=Ge.binNumber,Qe=Ge.pointNumbers);break}return{pointNumber:ut,pointNumbers:Qe,searchInfo:ct}}(Pt,Ze=le(me,Me,Le,Ne));if(Rt.pointNumbers.length>0?function($e,pt){var ct,Ve,Ge,ut=[];for(Ge=0;Ge<$e.length;Ge++)(ct=$e[Ge]).cd[0].trace.selectedpoints&&ct.cd[0].trace.selectedpoints.length>0&&ut.push(ct);if(1===ut.length&&ut[0]===pt.searchInfo&&(Ve=pt.searchInfo.cd[0].trace).selectedpoints.length===pt.pointNumbers.length){for(Ge=0;Ge<pt.pointNumbers.length;Ge++)if(Ve.selectedpoints.indexOf(pt.pointNumbers[Ge])<0)return!1;return!0}return!1}(Ze,Rt):function($e){var pt,ct,Ve=0;for(ct=0;ct<$e.length;ct++)if((pt=$e[ct].cd[0].trace).selectedpoints&&(pt.selectedpoints.length>1||(Ve+=pt.selectedpoints.length)>1))return!1;return 1===Ve}(Ze)&&(At=we(Rt))){for(He&&He.remove(),it=0;it<Ze.length;it++)(nt=Ze[it])._module.selectPoints(nt,!1);Te(me,Ze),ae(Re),jt&&Fe(me)}else{for(_t=Be.shiftKey&&(void 0!==At?At:we(Rt)),ft=function($e,pt,ct){return{pointNumber:$e,searchInfo:pt,subtract:!!ct}}(Rt.pointNumber,Rt.searchInfo,_t),ht=J(Re.selectionDefs.concat([ft])),it=0;it<Ze.length;it++)if(Tt=ve(Ze[it]._module.selectPoints(Ze[it],ht),Ze[it]),Ut.length)for(var Je=0;Je<Tt.length;Je++)Ut.push(Tt[Je]);else Ut=Tt;if(Te(me,Ze,ot={points:Ut}),ft&&Re&&Re.selectionDefs.push(ft),He){var et=Re.mergedPolygons,qe=a(Re.dragmode);c(xe(et,qe),He,Re)}jt&&Pe(me,ot)}}}function ee(Be){return"pointNumber"in Be&&"searchInfo"in Be}function $(Be){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(me,Me,Le,Ne){return Ne.cd[0].trace._expandedIndex===Be.searchInfo.cd[0].trace._expandedIndex&&Le===Be.pointNumber},isRect:!1,degenerate:!1,subtract:!!Be.subtract}}function J(Be){if(Be.length){for(var me=[],Me=ee(Be[0])?0:Be[0][0][0],Le=Me,Ne=ee(Be[0])?0:Be[0][0][1],Re=Ne,He=0;He<Be.length;He++)if(ee(Be[He]))me.push($(Be[He]));else{var Ze=j(Be[He]);Ze.subtract=!!Be[He].subtract,me.push(Ze),Me=Math.min(Me,Ze.xmin),Le=Math.max(Le,Ze.xmax),Ne=Math.min(Ne,Ze.ymin),Re=Math.max(Re,Ze.ymax)}return{xmin:Me,xmax:Le,ymin:Ne,ymax:Re,pts:[],contains:function(nt,ft,ht,Tt){for(var At=!1,_t=0;_t<me.length;_t++)me[_t].contains(nt,ft,ht,Tt)&&(At=!me[_t].subtract);return At},isRect:!1,degenerate:!1}}}function X(Be,me,Me){var Le=me._fullLayout,Ne=Me.plotinfo,Re=Me.dragmode,He=Le._lastSelectedSubplot&&Le._lastSelectedSubplot===Ne.id,Ze=(Be.shiftKey||Be.altKey)&&!(n(Re)&&a(Re));He&&Ze&&Ne.selection&&Ne.selection.selectionDefs&&!Me.selectionDefs?(Me.selectionDefs=Ne.selection.selectionDefs,Me.mergedPolygons=Ne.selection.mergedPolygons):Ze&&Ne.selection||ae(Me),He||(y(me),Le._lastSelectedSubplot=Ne.id)}function ae(Be,me){var Me=Be.dragmode,Le=Be.plotinfo,Ne=Be.gd;Ne._fullLayout._activeShapeIndex>=0&&Ne._fullLayout._deactivateShape(Ne),Ne._fullLayout._activeSelectionIndex>=0&&Ne._fullLayout._deactivateSelection(Ne);var Re=Ne._fullLayout._zoomlayer,He=n(Me),Ze=s(Me);if(He||Ze){var nt,ft,ht=Re.selectAll(".select-outline-"+Le.id);ht&&Ne._fullLayout._outlining&&(He&&(nt=x(ht,Be)),nt&&o.call("_guiRelayout",Ne,{shapes:nt}),Ze&&!ie(Be)&&(ft=v(ht,Be)),ft&&(Ne._fullLayout._noEmitSelectedAtStart=!0,o.call("_guiRelayout",Ne,{selections:ft}).then(function(){me&&b(Ne)})),Ne._fullLayout._outlining=!1)}Le.selection={},Le.selection.selectionDefs=Be.selectionDefs=[],Le.selection.mergedPolygons=Be.mergedPolygons=[]}function ce(Be){return Be._id}function le(Be,me,Me,Le){if(!Be.calcdata)return[];var Ne,Re,He,Ze=[],nt=me.map(ce),ft=Me.map(ce);for(He=0;He<Be.calcdata.length;He++)if(!0===(Re=(Ne=Be.calcdata[He])[0].trace).visible&&Re._module&&Re._module.selectPoints)if(!ie({subplot:Le})||Re.subplot!==Le&&Re.geo!==Le)if("splom"===Re.type){if(Re._xaxes[nt[0]]&&Re._yaxes[ft[0]]){var ht=pe(Re._module,Ne,me[0],Me[0]);ht.scene=Be._fullLayout._splomScenes[Re.uid],Ze.push(ht)}}else if("sankey"===Re.type){var Tt=pe(Re._module,Ne,me[0],Me[0]);Ze.push(Tt)}else{if(!(-1!==nt.indexOf(Re.xaxis)||Re._xA&&Re._xA.overlaying)||!(-1!==ft.indexOf(Re.yaxis)||Re._yA&&Re._yA.overlaying))continue;Ze.push(pe(Re._module,Ne,P(Be,Re.xaxis),P(Be,Re.yaxis)))}else Ze.push(pe(Re._module,Ne,me[0],Me[0]));return Ze}function pe(Be,me,Me,Le){return{_module:Be,cd:me,xaxis:Me,yaxis:Le}}function we(Be){var me=Be.searchInfo.cd[0].trace,Le=Be.pointNumbers;return!!me.selectedpoints&&me.selectedpoints.indexOf(Le.length>0?Le[0]:Be.pointNumber)>-1}function Te(Be,me,Me){var Le,Ne;for(Le=0;Le<me.length;Le++){var Re=me[Le].cd[0].trace._fullInput,He=Be._fullLayout._tracePreGUI[Re.uid]||{};void 0===He.selectedpoints&&(He.selectedpoints=Re._input.selectedpoints||null)}if(Me){var Ze=Me.points||[];for(Le=0;Le<me.length;Le++)(Ne=me[Le].cd[0].trace)._input.selectedpoints=Ne._fullInput.selectedpoints=[],Ne._fullInput!==Ne&&(Ne.selectedpoints=[]);for(var nt=0;nt<Ze.length;nt++){var ft=Ze[nt],ht=ft.data,Tt=ft.fullData,At=ft.pointIndex,_t=ft.pointIndices;_t?([].push.apply(ht.selectedpoints,_t),Ne._fullInput!==Ne&&[].push.apply(Tt.selectedpoints,_t)):(ht.selectedpoints.push(At),Ne._fullInput!==Ne&&Tt.selectedpoints.push(At))}}else for(Le=0;Le<me.length;Le++)delete(Ne=me[Le].cd[0].trace).selectedpoints,delete Ne._input.selectedpoints,Ne._fullInput!==Ne&&delete Ne._fullInput.selectedpoints;!function(ot,it){for(var Pt=!1,jt=0;jt<it.length;jt++){var Ut=it[jt],Rt=Ut.cd;o.traceIs(Rt[0].trace,"regl")&&(Pt=!0);var Je=Ut._module,et=Je.styleOnSelect||Je.style;et&&(et(ot,Rt,Rt[0].node3),Rt[0].nodeRangePlot3&&et(ot,Rt,Rt[0].nodeRangePlot3))}Pt&&(I(ot),O(ot))}(Be,me)}function ye(Be,me,Me){for(var Le=(Me?M.difference:M.union)({regions:Be},{regions:[me]}).regions.reverse(),Ne=0;Ne<Le.length;Ne++){var Re=Le[Ne];Re.subtract=ge(Re,Le.slice(0,Ne))}return Le}function ve(Be,me){if(Array.isArray(Be))for(var Me=me.cd,Le=me.cd[0].trace,Ne=0;Ne<Be.length;Ne++)Be[Ne]=l(Be[Ne],Le,Me);return Be}function xe(Be,me){for(var Me=[],Le=0;Le<Be.length;Le++){Me[Le]=[];for(var Ne=0;Ne<Be[Le].length;Ne++){Me[Le][Ne]=[],Me[Le][Ne][0]=Ne?"L":"M";for(var Re=0;Re<Be[Le][Ne].length;Re++)Me[Le][Ne].push(Be[Le][Ne][Re])}me||Me[Le].push(["Z",Me[Le][0][1],Me[Le][0][2]])}return Me}function Ce(Be,me){for(var Me,Le,Ne=[],Re=[],He=0;He<me.length;He++){var Ze=me[He];Le=Ze._module.selectPoints(Ze,Be),Re.push(Le),Me=ve(Le,Ze),Ne=Ne.concat(Me)}return Ne}function Oe(Be,me,Me,Le,Ne){var Re,He,Ze,nt=!!Le;Ne&&(Re=Ne.plotinfo,He=Ne.xaxes[0]._id,Ze=Ne.yaxes[0]._id);var ft=[],ht=[],Tt=se(Be),At=Be._fullLayout;if(Re){var _t=At._zoomlayer,ot=At.dragmode,it=n(ot),Pt=s(ot);if(it||Pt){var jt=P(Be,He,"x"),Ut=P(Be,Ze,"y");if(jt&&Ut){var Rt=_t.selectAll(".select-outline-"+Re.id);if(Rt&&Be._fullLayout._outlining&&Rt.length){for(var Je=Rt[0][0].getAttribute("d"),et=g(Je,Be,Re),qe=[],$e=0;$e<et.length;$e++){for(var pt=et[$e],ct=[],Ve=0;Ve<pt.length;Ve++)ct.push([Ie(jt,pt[Ve][1]),Ie(Ut,pt[Ve][2])]);ct.xref=He,ct.yref=Ze,ct.subtract=ge(ct,qe),qe.push(ct)}Tt=Tt.concat(qe)}}}}var Ge=He&&Ze?[He+Ze]:At._subplots.cartesian;!function(Nn){var jn=Nn.calcdata;if(jn)for(var Fn=0;Fn<jn.length;Fn++){var Zn=Nn._fullLayout._splomScenes;if(Zn){var hr=Zn[jn[Fn][0].trace.uid];hr&&(hr.selectBatch=[])}}}(Be);for(var ut={},Qe=0;Qe<Ge.length;Qe++){var yt=Ge[Qe],wt=yt.indexOf("y"),kt=yt.slice(0,wt),vt=yt.slice(wt),Lt=He&&Ze?Me:void 0;if(Lt=ue(Tt,kt,vt,Lt)){var St=Le;if(!nt){var Ot=P(Be,kt,"x"),Nt=P(Be,vt,"y");St=le(Be,[Ot],[Nt],yt);for(var Bt=0;Bt<St.length;Bt++){var Vt=St[Bt],nn=Vt.cd[0],gn=nn.trace;if("scattergl"===Vt._module.name&&!nn.t.xpx){var Jt=gn.x,an=gn.y,Xt=gn._length;nn.t.xpx=[],nn.t.ypx=[];for(var Gn=0;Gn<Xt;Gn++)nn.t.xpx[Gn]=Ot.c2p(Jt[Gn]),nn.t.ypx[Gn]=Nt.c2p(an[Gn])}"splom"===Vt._module.name&&(ut[gn.uid]||(ut[gn.uid]=!0))}}var Dn=Ce(Lt,St);ft=ft.concat(Dn),ht=ht.concat(St)}}var An={points:ft};Te(Be,ht,An);var cn=At.clickmode.indexOf("event")>-1&&me;if(!Re&&me){var bn=se(Be,!0);if(bn.length){var hn=bn[0].xref,wn=bn[0].yref;if(hn&&wn){var Ln=ke(bn);Se([P(Be,hn,"x"),P(Be,wn,"y")])(An,Ln)}}Be._fullLayout._noEmitSelectedAtStart?Be._fullLayout._noEmitSelectedAtStart=!1:cn&&Pe(Be,An),At._reselect=!1}if(!Re&&At._deselect){var Pn=At._deselect;(function(Nn,jn,Fn){for(var Jn=0;Jn<Fn.length;Jn++){var Zn=Fn[Jn];if(Zn.xaxis&&Zn.xaxis._id===Nn&&Zn.yaxis&&Zn.yaxis._id===jn)return!0}return!1})(He=Pn.xref,Ze=Pn.yref,ht)||be(Be,He,Ze,Le),cn&&(An.points.length?Pe(Be,An):Fe(Be)),At._deselect=!1}return{eventData:An,selectionTesters:Me}}function be(Be,me,Me,Le){Le=le(Be,[P(Be,me,"x")],[P(Be,Me,"y")],me+Me);for(var Ne=0;Ne<Le.length;Ne++){var Re=Le[Ne];Re._module.selectPoints(Re,!1)}Te(Be,Le)}function ue(Be,me,Me,Le){for(var Ne,Re=0;Re<Be.length;Re++){var He=Be[Re];me===He.xref&&Me===He.yref&&(Ne?Le=J(Ne=ye(Ne,He,!!He.subtract)):(Ne=[He],Le=j(He)))}return Le}function se(Be,me){for(var Me=[],Le=Be._fullLayout,Ne=Le.selections,Re=Ne.length,He=0;He<Re;He++)if(!me||He===Le._activeSelectionIndex){var Ze=Ne[He];if(Ze){var nt,ft,ht,Tt,At,_t=Ze.xref,ot=Ze.yref,it=P(Be,_t,"x"),Pt=P(Be,ot,"y");if("rect"===Ze.type){At=[];var jt=Ie(it,Ze.x0),Ut=Ie(it,Ze.x1),Rt=Ie(Pt,Ze.y0),Je=Ie(Pt,Ze.y1);At=[[jt,Rt],[jt,Je],[Ut,Je],[Ut,Rt]],nt=Math.min(jt,Ut),ft=Math.max(jt,Ut),ht=Math.min(Rt,Je),Tt=Math.max(Rt,Je),At.xmin=nt,At.xmax=ft,At.ymin=ht,At.ymax=Tt,At.xref=_t,At.yref=ot,At.subtract=!1,At.isRect=!0,Me.push(At)}else if("path"===Ze.type)for(var et=Ze.path.split("Z"),qe=[],$e=0;$e<et.length;$e++){var pt=et[$e];if(pt){var ct=u.extractPathCoords(pt+="Z",f.paramIsX,"raw"),Ve=u.extractPathCoords(pt,f.paramIsY,"raw");nt=1/0,ft=-1/0,ht=1/0,Tt=-1/0,At=[];for(var Ge=0;Ge<ct.length;Ge++){var ut=Ie(it,ct[Ge]),Qe=Ie(Pt,Ve[Ge]);At.push([ut,Qe]),nt=Math.min(ut,nt),ft=Math.max(ut,ft),ht=Math.min(Qe,ht),Tt=Math.max(Qe,Tt)}At.xmin=nt,At.xmax=ft,At.ymin=ht,At.ymax=Tt,At.xref=_t,At.yref=ot,At.subtract=ge(At,qe),qe.push(At),Me.push(At)}}}}return Me}function ge(Be,me){for(var Me=!1,Le=0;Le<me.length;Le++)for(var Ne=me[Le],Re=0;Re<Be.length;Re++)if(k(Be[Re],Ne)){Me=!Me;break}return Me}function Ie(Be,me){return"date"===Be.type&&(me=me.replace("_"," ")),"log"===Be.type?Be.c2p(me):Be.r2p(me,null,Be.calendar)}function ke(Be){for(var me=Be.length,Me=[],Le=0;Le<me;Le++){var Ne=Be[Le];Me=(Me=Me.concat(Ne)).concat([Ne[0]])}return(Re=Me).isRect=5===Re.length&&Re[0][0]===Re[4][0]&&Re[0][1]===Re[4][1]&&Re[0][0]===Re[1][0]&&Re[2][0]===Re[3][0]&&Re[0][1]===Re[3][1]&&Re[1][1]===Re[2][1]||Re[0][1]===Re[1][1]&&Re[2][1]===Re[3][1]&&Re[0][0]===Re[3][0]&&Re[1][0]===Re[2][0],Re.isRect&&(Re.xmin=Math.min(Re[0][0],Re[2][0]),Re.xmax=Math.max(Re[0][0],Re[2][0]),Re.ymin=Math.min(Re[0][1],Re[2][1]),Re.ymax=Math.max(Re[0][1],Re[2][1])),Re;var Re}function Se(Be){return function(me,Me){for(var Le,Ne,Re=0;Re<Be.length;Re++){var He=Be[Re],Ze=He._id,nt=Ze.charAt(0);if(Me.isRect){Le||(Le={});var ft=Me[nt+"min"],ht=Me[nt+"max"];void 0!==ft&&void 0!==ht&&(Le[Ze]=[B(He,ft),B(He,ht)].sort(S))}else Ne||(Ne={}),Ne[Ze]=Me.map(V(He))}Le&&(me.range=Le),Ne&&(me.lassoPoints=Ne)}}function Pe(Be,me){me&&(me.selections=(Be.layout||{}).selections||[]),Be.emit("plotly_selected",me)}function Fe(Be){Be.emit("plotly_deselect",null)}ne.exports={reselect:Oe,prepSelect:function(Be,me,Me,Le,Ne){var Re=!ie(Le),He=i(Ne),Ze=r(Ne),nt=a(Ne),ft=n(Ne),ht=s(Ne),Tt="drawcircle"===Ne,At="drawline"===Ne||Tt,_t=Le.gd,ot=_t._fullLayout,it=ht&&"immediate"===ot.newselection.mode&&Re,Pt=ot._zoomlayer,jt=Le.element.getBoundingClientRect(),Ut=Le.plotinfo,Rt=q(Ut),Je=me-jt.left,et=Me-jt.top;ot._calcInverseTransform(_t);var $e,pt,ct,Ve,Ge,ut,Qe,qe=h.apply3DTransform(ot._invTransform)(Je,et),yt=ot._invScaleX,wt=ot._invScaleY,kt=Je=qe[0],vt=et=qe[1],Lt="M"+Je+","+et,St=Le.xaxes[0],Ot=Le.yaxes[0],Nt=St._length,Bt=Ot._length,Vt=Be.altKey&&!(n(Ne)&&nt);X(Be,_t,Le),He&&($e=R([[Je,et]],z.BENDPX));var nn=Pt.selectAll("path.select-outline-"+Ut.id).data([1]),gn=ft?ot.newshape:ot.newselection;ft&&(Le.hasText=gn.label.text||gn.label.texttemplate);var Jt=ft&&!nt?gn.fillcolor:"rgba(0,0,0,0)",an=gn.line.color||(Re?_.contrast(_t._fullLayout.plot_bgcolor):"#7f7f7f");nn.enter().append("path").attr("class","select-outline select-outline-"+Ut.id).style({opacity:ft?gn.opacity/2:1,"stroke-dasharray":T(gn.line.dash,gn.line.width),"stroke-width":gn.line.width+"px","shape-rendering":"crispEdges"}).call(_.stroke,an).call(_.fill,Jt).attr("fill-rule","evenodd").classed("cursor-move",!!ft).attr("transform",Rt).attr("d",Lt+"Z");var Xt=Pt.append("path").attr("class","zoombox-corners").style({fill:_.background,stroke:_.defaultLine,"stroke-width":1}).attr("transform",Rt).attr("d","M0,0Z");if(ft&&Le.hasText){var Gn=Pt.select(".label-temp");Gn.empty()&&(Gn=Pt.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var Dn=ot._uid+z.SELECTID,An=[],cn=le(_t,Le.xaxes,Le.yaxes,Le.subplot);it&&!Be.shiftKey&&(Le._clearSubplotSelections=function(){if(Re){var hn=St._id,wn=Ot._id;be(_t,hn,wn,cn);for(var Ln=(_t.layout||{}).selections||[],Pn=[],Nn=!1,jn=0;jn<Ln.length;jn++){var Fn=ot.selections[jn];Fn.xref!==hn||Fn.yref!==wn?Pn.push(Ln[jn]):Nn=!0}Nn&&(_t._fullLayout._noEmitSelectedAtStart=!0,o.call("_guiRelayout",_t,{selections:Pn}))}});var hn,bn=(hn=Le).plotinfo.fillRangeItems||Se(hn.xaxes.concat(hn.yaxes));Le.moveFn=function(hn,wn){Le._clearSubplotSelections&&(Le._clearSubplotSelections(),Le._clearSubplotSelections=void 0),kt=Math.max(0,Math.min(Nt,yt*hn+Je)),vt=Math.max(0,Math.min(Bt,wt*wn+et));var Ln=Math.abs(kt-Je),Pn=Math.abs(vt-et);if(Ze){var Nn,jn,Fn;if(ht){var Jn=ot.selectdirection;switch(Nn="any"===Jn?Pn<Math.min(.6*Ln,U)?"h":Ln<Math.min(.6*Pn,U)?"v":"d":Jn){case"h":jn=Tt?Bt/2:0,Fn=Bt;break;case"v":jn=Tt?Nt/2:0,Fn=Nt}}if(ft)switch(ot.newshape.drawdirection){case"vertical":Nn="h",jn=Tt?Bt/2:0,Fn=Bt;break;case"horizontal":Nn="v",jn=Tt?Nt/2:0,Fn=Nt;break;case"ortho":Ln<Pn?(Nn="h",jn=et,Fn=vt):(Nn="v",jn=Je,Fn=kt);break;default:Nn="d"}"h"===Nn?((Ve=At?m(Tt,[kt,jn],[kt,Fn]):[[Je,jn],[Je,Fn],[kt,Fn],[kt,jn]]).xmin=At?kt:Math.min(Je,kt),Ve.xmax=At?kt:Math.max(Je,kt),Ve.ymin=Math.min(jn,Fn),Ve.ymax=Math.max(jn,Fn),Xt.attr("d","M"+Ve.xmin+","+(et-U)+"h-4v"+2*U+"h4ZM"+(Ve.xmax-1)+","+(et-U)+"h4v"+2*U+"h-4Z")):"v"===Nn?((Ve=At?m(Tt,[jn,vt],[Fn,vt]):[[jn,et],[jn,vt],[Fn,vt],[Fn,et]]).xmin=Math.min(jn,Fn),Ve.xmax=Math.max(jn,Fn),Ve.ymin=At?vt:Math.min(et,vt),Ve.ymax=At?vt:Math.max(et,vt),Xt.attr("d","M"+(Je-U)+","+Ve.ymin+"v-4h"+2*U+"v4ZM"+(Je-U)+","+(Ve.ymax-1)+"v4h"+2*U+"v-4Z")):"d"===Nn&&((Ve=At?m(Tt,[Je,et],[kt,vt]):[[Je,et],[Je,vt],[kt,vt],[kt,et]]).xmin=Math.min(Je,kt),Ve.xmax=Math.max(Je,kt),Ve.ymin=Math.min(et,vt),Ve.ymax=Math.max(et,vt),Xt.attr("d","M0,0Z"))}else He&&($e.addPt([kt,vt]),Ve=$e.filtered);if(Le.selectionDefs&&Le.selectionDefs.length?(ct=ye(Le.mergedPolygons,Ve,Vt),Ve.subtract=Vt,pt=J(Le.selectionDefs.concat([Ve]))):(ct=[Ve],pt=j(Ve)),c(xe(ct,nt),nn,Le),ht){var Zn,hr=Oe(_t,!1),rr=hr.eventData?hr.eventData.points.slice():[];hr=Oe(_t,!1,pt,cn,Le),pt=hr.selectionTesters,Qe=hr.eventData,Zn=$e?$e.filtered:ke(ct),E.throttle(Dn,z.SELECTDELAY,function(){for(var dr=(An=Ce(pt,cn)).slice(),nr=0;nr<rr.length;nr++){for(var Sr=rr[nr],ln=!1,dn=0;dn<dr.length;dn++)if(dr[dn].curveNumber===Sr.curveNumber&&dr[dn].pointNumber===Sr.pointNumber){ln=!0;break}ln||dr.push(Sr)}dr.length&&(Qe||(Qe={}),Qe.points=dr),bn(Qe,Zn),_t.emit("plotly_selecting",Qe)})}},Le.clickFn=function(hn,wn){if(Xt.remove(),_t._fullLayout._activeShapeIndex>=0)_t._fullLayout._deactivateShape(_t);else if(!ft){var Ln=ot.clickmode;E.done(Dn).then(function(){if(E.clear(Dn),2===hn){for(nn.remove(),Ge=0;Ge<cn.length;Ge++)(ut=cn[Ge])._module.selectPoints(ut,!1);if(Te(_t,cn),ae(Le),Fe(_t),cn.length){var Pn=cn[0].xaxis,Nn=cn[0].yaxis;if(Pn&&Nn){for(var jn=[],Fn=_t._fullLayout.selections,Jn=0;Jn<Fn.length;Jn++){var Zn=Fn[Jn];Zn&&(Zn.xref===Pn._id&&Zn.yref===Nn._id||jn.push(Zn))}jn.length<Fn.length&&(_t._fullLayout._noEmitSelectedAtStart=!0,o.call("_guiRelayout",_t,{selections:jn}))}}}else Ln.indexOf("select")>-1&&te(wn,_t,Le.xaxes,Le.yaxes,Le.subplot,Le,nn),"event"===Ln&&Pe(_t,void 0);p.click(_t,wn,Ut.id)}).catch(h.error)}},Le.doneFn=function(){Xt.remove(),E.done(Dn).then(function(){E.clear(Dn),!it&&Ve&&Le.selectionDefs&&(Ve.subtract=Vt,Le.selectionDefs.push(Ve),Le.mergedPolygons.length=0,[].push.apply(Le.mergedPolygons,ct)),(it||ft)&&ae(Le,it),Le.doneFnCompleted&&Le.doneFnCompleted(An),ht&&Pe(_t,Qe)}).catch(h.error)}},clearOutline:y,clearSelectionsCache:ae,selectOnClick:te}},46056:function(ne,F,e){"use strict";var M=e(13916),k=e(25376),o=e(52904).line,T=e(98192).u,_=e(92880).extendFlat,p=e(31780).templatedArray,l=(e(36208),e(45464)),t=e(21776).ye,i=e(97728);ne.exports=p("shape",{visible:_({},l.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:_({},l.legend,{editType:"calc+arraydraw"}),legendgroup:_({},l.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:_({},l.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:k({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:_({},l.legendrank,{editType:"calc+arraydraw"}),legendwidth:_({},l.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",editType:"arraydraw"},xref:_({},M.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:_({},M.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:_({},o.color,{editType:"arraydraw"}),width:_({},o.width,{editType:"calc+arraydraw"}),dash:_({},T,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:t({},{keys:Object.keys(i)}),font:k({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})},96084:function(ne,F,e){"use strict";var M=e(3400),k=e(54460),o=e(85448),T=e(65152);function _(i){return l(i.line.width,i.xsizemode,i.x0,i.x1,i.path,!1)}function p(i){return l(i.line.width,i.ysizemode,i.y0,i.y1,i.path,!0)}function l(i,r,n,a,s,u){var f=i/2,c=u;if("pixel"===r){var y=s?T.extractPathCoords(s,u?o.paramIsY:o.paramIsX):[n,a],d=M.aggNums(Math.max,null,y),m=M.aggNums(Math.min,null,y),g=m<0?Math.abs(m)+f:f,x=d>0?d+f:f;return{ppad:f,ppadplus:c?g:x,ppadminus:c?x:g}}return{ppad:f}}function t(i,r,n,a,s){var u="category"===i.type||"multicategory"===i.type?i.r2c:i.d2c;if(void 0!==r)return[u(r),u(n)];if(a){var f,c,y,d,m=1/0,g=-1/0,x=a.match(o.segmentRE);for("date"===i.type&&(u=T.decodeDate(u)),f=0;f<x.length;f++)void 0!==(c=s[x[f].charAt(0)].drawn)&&(!(y=x[f].substr(1).match(o.paramRE))||y.length<c||((d=u(y[c]))<m&&(m=d),d>g&&(g=d)));return g>=m?[m,g]:void 0}}ne.exports=function(i){var n=M.filterVisible(i._fullLayout.shapes);if(n.length&&i._fullData.length)for(var a=0;a<n.length;a++){var s,u,f=n[a];f._extremes={};var c=k.getRefType(f.xref),y=k.getRefType(f.yref);if("paper"!==f.xref&&"domain"!==c){var d="pixel"===f.xsizemode?f.xanchor:f.x0,m="pixel"===f.xsizemode?f.xanchor:f.x1;(u=t(s=k.getFromId(i,f.xref),d,m,f.path,o.paramIsX))&&(f._extremes[s._id]=k.findExtremes(s,u,_(f)))}if("paper"!==f.yref&&"domain"!==y){var g="pixel"===f.ysizemode?f.yanchor:f.y0,x="pixel"===f.ysizemode?f.yanchor:f.y1;(u=t(s=k.getFromId(i,f.yref),g,x,f.path,o.paramIsY))&&(f._extremes[s._id]=k.findExtremes(s,u,p(f)))}}}},85448:function(ne){"use strict";ne.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},43712:function(ne,F,e){"use strict";var M=e(3400),k=e(54460),o=e(51272),T=e(46056),_=e(65152);function p(l,t,i){function r(Y,B){return M.coerce(l,t,T,Y,B)}if(t._isShape=!0,r("visible")){r("showlegend")&&(r("legend"),r("legendwidth"),r("legendgroup"),r("legendgrouptitle.text"),M.coerceFont(r,"legendgrouptitle.font"),r("legendrank"));var n=r("path"),a=r("type",n?"path":"rect"),s="path"!==a;s&&delete t.path,r("editable"),r("layer"),r("opacity"),r("fillcolor"),r("fillrule"),r("line.width")&&(r("line.color"),r("line.dash"));for(var u=r("xsizemode"),f=r("ysizemode"),c=["x","y"],y=0;y<2;y++){var d,m,g,x=c[y],v=x+"anchor",b="x"===x?u:f,h={_fullLayout:i},S=k.coerceRef(l,t,h,x,void 0,"paper");if("range"===k.getRefType(S)?((d=k.getFromId(h,S))._shapeIndices.push(t._index),g=_.rangeToShapePosition(d),m=_.shapePositionToRange(d)):m=g=M.identity,s){var w=x+"0",E=x+"1",P=l[w],I=l[E];l[w]=m(l[w],!0),l[E]=m(l[E],!0),"pixel"===b?(r(w,0),r(E,10)):(k.coercePosition(t,h,r,S,w,.25),k.coercePosition(t,h,r,S,E,.75)),t[w]=g(t[w]),t[E]=g(t[E]),l[w]=P,l[E]=I}if("pixel"===b){var O=l[v];l[v]=m(l[v],!0),k.coercePosition(t,h,r,S,v,.25),t[v]=g(t[v]),l[v]=O}}s&&M.noneOrAll(l,t,["x0","x1","y0","y1"]);var z,U,R="line"===a;if(s&&(z=r("label.texttemplate")),z||(U=r("label.text")),U||z){r("label.textangle");var j=r("label.textposition",R?"middle":"middle center");r("label.xanchor"),r("label.yanchor",(B=j,R?"bottom":-1!==B.indexOf("top")?"top":-1!==B.indexOf("bottom")?"bottom":"middle")),r("label.padding"),M.coerceFont(r,"label.font",i.font)}}var B}ne.exports=function(l,t){o(l,t,{name:"shapes",handleItemDefaults:p})}},60728:function(ne,F,e){"use strict";var M=e(3400),k=e(54460),o=e(72736),T=e(43616),_=e(9856).readPaths,p=e(65152),l=p.getPathString,t=e(97728),i=e(84284).FROM_TL;ne.exports=function(r,n,a,s){if(s.selectAll(".shape-label").remove(),a.label.text||a.label.texttemplate){var u;if(a.label.texttemplate){var f={};if("path"!==a.type){var c=k.getFromId(r,a.xref),y=k.getFromId(r,a.yref);for(var d in t){var m=t[d](a,c,y);void 0!==m&&(f[d]=m)}}u=M.texttemplateStringForShapes(a.label.texttemplate,{},r._fullLayout._d3locale,f)}else u=a.label.text;var g,x,v,b,h={"data-index":n},S=a.label.font,w=s.append("g").attr(h).classed("shape-label",!0).append("text").attr({"data-notex":1}).classed("shape-label-text",!0).text(u);if(a.path){var E=l(r,a),P=_(E,r);g=1/0,v=1/0,x=-1/0,b=-1/0;for(var I=0;I<P.length;I++)for(var O=0;O<P[I].length;O++)for(var z=P[I][O],U=1;U<z.length;U+=2){var R=z[U],j=z[U+1];g=Math.min(g,R),x=Math.max(x,R),v=Math.min(v,j),b=Math.max(b,j)}}else{var Y=k.getFromId(r,a.xref),B=k.getRefType(a.xref),V=k.getFromId(r,a.yref),q=k.getRefType(a.yref),ie=p.getDataToPixel(r,Y,!1,B),te=p.getDataToPixel(r,V,!0,q);g=ie(a.x0),x=ie(a.x1),v=te(a.y0),b=te(a.y1)}var ee=a.label.textangle;"auto"===ee&&(ee="line"===a.type?(ce=g,le=v,pe=x,we=b,ye=Math.abs(pe-ce),-180/Math.PI*Math.atan2(pe>=ce?le-we:we-le,ye)):0),w.call(function(ce){return ce.call(T.font,S).attr({}),o.convertToTspans(ce,r),ce});var $=function(ce,le,pe,we,Te,ye,ve){var xe,Ce,Oe,be,ue=Te.label.textposition,se=Te.label.textangle,ge=Te.label.padding,Ie=Te.type,ke=Math.PI/180*ye,Se=Math.sin(ke),Pe=Math.cos(ke),Fe=Te.label.xanchor,Be=Te.label.yanchor;if("line"===Ie){"start"===ue?(xe=ce,Ce=le):"end"===ue?(xe=pe,Ce=we):(xe=(ce+pe)/2,Ce=(le+we)/2),"auto"===Fe&&(Fe="start"===ue?"auto"===se?pe>ce?"left":pe<ce?"right":"center":pe>ce?"right":pe<ce?"left":"center":"end"===ue?"auto"===se?pe>ce?"right":pe<ce?"left":"center":pe>ce?"left":pe<ce?"right":"center":"center");var me={bottom:-1,middle:0,top:1};if("auto"===se){var Me=me[Be];Oe=-ge*Se*Me,be=ge*Pe*Me}else Oe=ge*{left:1,center:0,right:-1}[Fe],be=ge*me[Be];xe+=Oe,Ce+=be}else Oe=ge+3,-1!==ue.indexOf("right")?(xe=Math.max(ce,pe)-Oe,"auto"===Fe&&(Fe="right")):-1!==ue.indexOf("left")?(xe=Math.min(ce,pe)+Oe,"auto"===Fe&&(Fe="left")):(xe=(ce+pe)/2,"auto"===Fe&&(Fe="center")),Ce=-1!==ue.indexOf("top")?Math.min(le,we):-1!==ue.indexOf("bottom")?Math.max(le,we):(le+we)/2,be=ge,"bottom"===Be?Ce-=be:"top"===Be&&(Ce+=be);var Le=i[Be],Ne=Te.label.font.size,Re=ve.height;return{textx:xe+(Re*Le-Ne)*Se,texty:Ce+-(Re*Le-Ne)*Pe,xanchor:Fe}}(g,v,x,b,a,ee,T.bBox(w.node())),J=$.textx,X=$.texty;w.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[$.xanchor],y:X,x:J,transform:"rotate("+ee+","+J+","+X+")"}).call(o.positionText,J,X)}var ce,le,pe,we,ye}},55496:function(ne,F,e){"use strict";var M=e(3400).strTranslate,k=e(86476),o=e(72760),T=o.drawMode,_=o.selectMode,p=e(24040),l=e(76308),t=e(7e3),i=t.i000,r=t.i090,n=t.i180,a=t.i270,s=e(1936).clearOutlineControllers,u=e(9856),f=u.pointsOnRectangle,c=u.pointsOnEllipse,y=u.writePaths,d=e(93940).newShapes,m=e(93940).createShapeObj,g=e(5968),x=e(60728);function v(b,h){var S,w,E,O=b.length;return w=b[S=(h+1)%O][1],E=b[S][2],w===b[h][1]&&E===b[h][2]&&(w=b[S=(h+2)%O][1],E=b[S][2]),[S,w,E]}ne.exports=function b(h,S,w,E){E||(E=0);var P=w.gd;function I(){b(h,S,w,E++),(c(h[0])||w.hasText)&&O({redrawing:!0})}function O(Te){var ye={};void 0!==w.isActiveShape&&(w.isActiveShape=!1,ye=d(S,w)),void 0!==w.isActiveSelection&&(w.isActiveSelection=!1,ye=g(S,w),P._fullLayout._reselect=!0),Object.keys(ye).length&&p.call((Te||{}).redrawing?"relayout":"_guiRelayout",P,ye)}var z,U,R,j,Y,B=P._fullLayout._zoomlayer,V=w.dragmode,q=T(V),ie=_(V);if((q||ie)&&(P._fullLayout._outlining=!0),s(P),S.attr("d",y(h)),E||!w.isActiveShape&&!w.isActiveSelection||(Y=function(Te,ye){for(var ve=0;ve<ye.length;ve++){var xe=ye[ve];Te[ve]=[];for(var Ce=0;Ce<xe.length;Ce++){Te[ve][Ce]=[];for(var Oe=0;Oe<xe[Ce].length;Oe++)Te[ve][Ce][Oe]=xe[Ce][Oe]}}return Te}([],h),function(Te){z=[];for(var ye=0;ye<h.length;ye++){var ve=h[ye],xe=f(ve),Ce=!xe&&c(ve);z[ye]=[];for(var Oe=ve.length,be=0;be<Oe;be++)if("Z"!==ve[be][0]&&(!Ce||be===i||be===r||be===n||be===a)){var ue,se=xe&&w.isActiveSelection;se&&(ue=v(ve,be));var ge=ve[be][1],Ie=ve[be][2],ke=Te.append(se?"rect":"circle").attr("data-i",ye).attr("data-j",be).style({fill:l.background,stroke:l.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(se){var Se=ue[1]-ge,Pe=ue[2]-Ie,Fe=Pe?5:Math.max(Math.min(25,Math.abs(Se)-5),5),Be=Se?5:Math.max(Math.min(25,Math.abs(Pe)-5),5);ke.classed(Pe?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",Fe).attr("height",Be).attr("x",ge-Fe/2).attr("y",Ie-Be/2).attr("transform",M(Se/2,Pe/2))}else ke.classed("cursor-grab",!0).attr("r",5).attr("cx",ge).attr("cy",Ie);z[ye][be]={element:ke.node(),gd:P,prepFn:$,doneFn:X,clickFn:ae},k.init(z[ye][be])}}}(B.append("g").attr("class","outline-controllers")),U=[],h.length&&(U[0]={element:S[0][0],gd:P,prepFn:function le(Te){(R=+Te.srcElement.getAttribute("data-i"))||(R=0),U[R].moveFn=ce},doneFn:function pe(){O()},clickFn:function we(Te){2===Te&&function(ye){if(_(ye._fullLayout.dragmode)){s(ye);var ve=ye._fullLayout._activeSelectionIndex,xe=(ye.layout||{}).selections||[];if(ve<xe.length){for(var Ce=[],Oe=0;Oe<xe.length;Oe++)Oe!==ve&&Ce.push(xe[Oe]);delete ye._fullLayout._activeSelectionIndex;var be=ye._fullLayout.selections[ve];ye._fullLayout._deselect={xref:be.xref,yref:be.yref},p.call("_guiRelayout",ye,{selections:Ce})}}}(P)}},k.init(U[0]))),q&&w.hasText){var te=B.select(".label-temp"),ee=m(S,w,w.dragmode);x(P,"label-temp",ee,te)}function $(Te){R=+Te.srcElement.getAttribute("data-i"),j=+Te.srcElement.getAttribute("data-j"),z[R][j].moveFn=J}function J(Te,ye){if(h.length){var ve=Y[R][j][1],xe=Y[R][j][2],Ce=h[R],Oe=Ce.length;if(f(Ce)){var be=Te,ue=ye;w.isActiveSelection&&(v(Ce,j)[1]===Ce[j][1]?ue=0:be=0);for(var se=0;se<Oe;se++)if(se!==j){var ge=Ce[se];ge[1]===Ce[j][1]&&(ge[1]=ve+be),ge[2]===Ce[j][2]&&(ge[2]=xe+ue)}if(Ce[j][1]=ve+be,Ce[j][2]=xe+ue,!f(Ce))for(var Ie=0;Ie<Oe;Ie++)for(var ke=0;ke<Ce[Ie].length;ke++)Ce[Ie][ke]=Y[R][Ie][ke]}else Ce[j][1]=ve+Te,Ce[j][2]=xe+ye;I()}}function X(){O()}function ae(Te,ye){if(2===Te){R=+ye.srcElement.getAttribute("data-i"),j=+ye.srcElement.getAttribute("data-j");var ve=h[R];f(ve)||c(ve)||function(){if(h.length&&h[R]&&h[R].length){for(var xe=[],Ce=0;Ce<h[R].length;Ce++)Ce!==j&&xe.push(h[R][Ce]);xe.length>1&&(2!==xe.length||"Z"!==xe[1][0])&&(0===j&&(xe[0][0]="M"),h[R]=xe,I(),O())}}()}}function ce(Te,ye){(function(ve,xe){if(h.length)for(var Ce=0;Ce<h.length;Ce++)for(var Oe=0;Oe<h[Ce].length;Oe++)for(var be=0;be+2<h[Ce][Oe].length;be+=2)h[Ce][Oe][be+1]=Y[Ce][Oe][be+1]+ve,h[Ce][Oe][be+2]=Y[Ce][Oe][be+2]+xe})(Te,ye),I()}}},4016:function(ne,F,e){"use strict";var M=e(33428),k=e(24040),o=e(3400),T=e(54460),_=e(9856).readPaths,p=e(55496),l=e(60728),t=e(1936).clearOutlineControllers,i=e(76308),r=e(43616),n=e(31780).arrayEditor,a=e(86476),s=e(93972),u=e(85448),f=e(65152),c=f.getPathString;function y(h){var S=h._fullLayout;for(var w in S._shapeUpperLayer.selectAll("path").remove(),S._shapeLowerLayer.selectAll("path").remove(),S._shapeUpperLayer.selectAll("text").remove(),S._shapeLowerLayer.selectAll("text").remove(),S._plots){var E=S._plots[w].shapelayer;E&&(E.selectAll("path").remove(),E.selectAll("text").remove())}for(var P=0;P<S.shapes.length;P++)!0===S.shapes[P].visible&&g(h,P)}function d(h){return!!h._fullLayout._outlining}function m(h){return!h._context.edits.shapePosition}function g(h,S){h._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+S+'"]').remove();var w=f.makeShapesOptionsAndPlotinfo(h,S),E=w.options,P=w.plotinfo;E._input&&!0===E.visible&&function I(O){var z=c(h,E),U={"data-index":S,"fill-rule":E.fillrule,d:z},R=E.opacity,j=E.fillcolor,Y=E.line.width?E.line.color:"rgba(0,0,0,0)",B=E.line.width,V=E.line.dash;B||!0!==E.editable||(B=5,V="solid");var q="Z"!==z[z.length-1],ie=m(h)&&E.editable&&h._fullLayout._activeShapeIndex===S;ie&&(j=q?"rgba(0,0,0,0)":h._fullLayout.activeshape.fillcolor,R=h._fullLayout.activeshape.opacity);var te,ee=O.append("g").classed("shape-group",!0).attr({"data-index":S}),$=ee.append("path").attr(U).style("opacity",R).call(i.stroke,Y).call(i.fill,j).call(r.dashLine,V,B);if(x(ee,h,E),l(h,S,E,ee),(ie||h._context.edits.shapePosition)&&(te=n(h.layout,"shapes",E)),ie){$.style({cursor:"move"});var J={element:$.node(),plotinfo:P,gd:h,editHelpers:te,hasText:E.label.text||E.label.texttemplate,isActiveShape:!0},X=_(z,h);p(X,$,J)}else h._context.edits.shapePosition?function(ae,ce,le,pe,we,Te){var ye,ve,xe,Ce,Oe,be,ue,se,ge,Ie,ke,Se,Pe,Fe,Be,me,Ne="pixel"===le.xsizemode,Re="pixel"===le.ysizemode,He="line"===le.type,Ze="path"===le.type,nt=Te.modifyItem,ft=M.select(ce.node().parentNode),ht=T.getFromId(ae,le.xref),Tt=T.getRefType(le.xref),At=T.getFromId(ae,le.yref),_t=T.getRefType(le.yref),ot=f.getDataToPixel(ae,ht,!1,Tt),it=f.getDataToPixel(ae,At,!0,_t),Pt=f.getPixelToData(ae,ht,!1,Tt),jt=f.getPixelToData(ae,At,!0,_t),Ut=He?function(){var Ve=Math.max(le.line.width,10),Ge=we.append("g").attr("data-index",pe).attr("drag-helper",!0);Ge.append("path").attr("d",ce.attr("d")).style({cursor:"move","stroke-width":Ve,"stroke-opacity":"0"});var ut={"fill-opacity":"0"},Qe=Math.max(Ve/2,10);return Ge.append("circle").attr({"data-line-point":"start-point",cx:Ne?ot(le.xanchor)+le.x0:ot(le.x0),cy:Re?it(le.yanchor)-le.y0:it(le.y0),r:Qe}).style(ut).classed("cursor-grab",!0),Ge.append("circle").attr({"data-line-point":"end-point",cx:Ne?ot(le.xanchor)+le.x1:ot(le.x1),cy:Re?it(le.yanchor)-le.y1:it(le.y1),r:Qe}).style(ut).classed("cursor-grab",!0),Ge}():ce,Rt={element:Ut.node(),gd:ae,prepFn:function(ct){var Ve,Ge,ut,Qe,yt,wt,kt,vt;d(ae)||(Ne&&(Oe=ot(le.xanchor)),Re&&(be=it(le.yanchor)),"path"===le.type?Be=le.path:(ye=Ne?le.x0:ot(le.x0),ve=Re?le.y0:it(le.y0),xe=Ne?le.x1:ot(le.x1),Ce=Re?le.y1:it(le.y1)),ye<xe?(ge=ye,Pe="x0",Ie=xe,Fe="x1"):(ge=xe,Pe="x1",Ie=ye,Fe="x0"),!Re&&ve<Ce||Re&&ve>Ce?(ue=ve,ke="y0",se=Ce,Se="y1"):(ue=Ce,ke="y1",se=ve,Se="y0"),Je(ct),$e(we,le),Ve=ce,yt=(Ge=le).yref,wt=T.getFromId(ut=ae,Qe=Ge.xref),kt=T.getFromId(ut,yt),vt="","paper"===Qe||wt.autorange||(vt+=Qe),"paper"===yt||kt.autorange||(vt+=yt),r.setClipUrl(Ve,vt?"clip"+ut._fullLayout._uid+vt:null,ut),Rt.moveFn="move"===me?et:qe,Rt.altKey=ct.altKey)},doneFn:function(){d(ae)||(s(ce),pt(we),x(ce,ae,le),k.call("_guiRelayout",ae,Te.getUpdateObj()))},clickFn:function(){d(ae)||pt(we)}};function Je(ct){if(d(ae))me=null;else if(He)me="path"===ct.target.tagName?"move":"start-point"===ct.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var Ve=Rt.element.getBoundingClientRect(),Ge=Ve.right-Ve.left,ut=Ve.bottom-Ve.top,wt=!Ze&&Ge>10&&ut>10&&!ct.shiftKey?a.getCursor((ct.clientX-Ve.left)/Ge,1-(ct.clientY-Ve.top)/ut):"move";s(ce,wt),me=wt.split("-")[0]}}function et(ct,Ve){if("path"===le.type){var Ge=function(yt){return yt},ut=Ge,Qe=Ge;Ne?nt("xanchor",le.xanchor=Pt(Oe+ct)):(ut=function(yt){return Pt(ot(yt)+ct)},ht&&"date"===ht.type&&(ut=f.encodeDate(ut))),Re?nt("yanchor",le.yanchor=jt(be+Ve)):(Qe=function(yt){return jt(it(yt)+Ve)},At&&"date"===At.type&&(Qe=f.encodeDate(Qe))),nt("path",le.path=v(Be,ut,Qe))}else Ne?nt("xanchor",le.xanchor=Pt(Oe+ct)):(nt("x0",le.x0=Pt(ye+ct)),nt("x1",le.x1=Pt(xe+ct))),Re?nt("yanchor",le.yanchor=jt(be+Ve)):(nt("y0",le.y0=jt(ve+Ve)),nt("y1",le.y1=jt(Ce+Ve)));ce.attr("d",c(ae,le)),$e(we,le),l(ae,pe,le,ft)}function qe(ct,Ve){if(Ze){var Ge=function(an){return an},ut=Ge,Qe=Ge;Ne?nt("xanchor",le.xanchor=Pt(Oe+ct)):(ut=function(an){return Pt(ot(an)+ct)},ht&&"date"===ht.type&&(ut=f.encodeDate(ut))),Re?nt("yanchor",le.yanchor=jt(be+Ve)):(Qe=function(an){return jt(it(an)+Ve)},At&&"date"===At.type&&(Qe=f.encodeDate(Qe))),nt("path",le.path=v(Be,ut,Qe))}else if(He){if("resize-over-start-point"===me){var yt=ye+ct,wt=Re?ve-Ve:ve+Ve;nt("x0",le.x0=Ne?yt:Pt(yt)),nt("y0",le.y0=Re?wt:jt(wt))}else if("resize-over-end-point"===me){var kt=xe+ct,vt=Re?Ce-Ve:Ce+Ve;nt("x1",le.x1=Ne?kt:Pt(kt)),nt("y1",le.y1=Re?vt:jt(vt))}}else{var Lt=function(an){return-1!==me.indexOf(an)},St=Lt("n"),Ot=Lt("s"),Nt=Lt("w"),Bt=Lt("e"),Vt=St?ue+Ve:ue,nn=Ot?se+Ve:se,gn=Nt?ge+ct:ge,Jt=Bt?Ie+ct:Ie;Re&&(St&&(Vt=ue-Ve),Ot&&(nn=se-Ve)),(!Re&&nn-Vt>10||Re&&Vt-nn>10)&&(nt(ke,le[ke]=Re?Vt:jt(Vt)),nt(Se,le[Se]=Re?nn:jt(nn))),Jt-gn>10&&(nt(Pe,le[Pe]=Ne?gn:Pt(gn)),nt(Fe,le[Fe]=Ne?Jt:Pt(Jt)))}ce.attr("d",c(ae,le)),$e(we,le),l(ae,pe,le,ft)}function $e(ct,Ve){(Ne||Re)&&function(){var Ge="path"!==Ve.type,ut=ct.selectAll(".visual-cue").data([0]);ut.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var Qe=ot(Ne?Ve.xanchor:o.midRange(Ge?[Ve.x0,Ve.x1]:f.extractPathCoords(Ve.path,u.paramIsX))),yt=it(Re?Ve.yanchor:o.midRange(Ge?[Ve.y0,Ve.y1]:f.extractPathCoords(Ve.path,u.paramIsY)));Qe=f.roundPositionForSharpStrokeRendering(Qe,1),yt=f.roundPositionForSharpStrokeRendering(yt,1),ut.attr("d",Ne&&Re?"M"+(Qe-1-1)+","+(yt-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z":Ne?"M"+(Qe-1-1)+","+(yt-9-1)+"v18 h2 v-18 Z":"M"+(Qe-9-1)+","+(yt-1-1)+"h18 v2 h-18 Z")}()}function pt(ct){ct.selectAll(".visual-cue").remove()}a.init(Rt),Ut.node().onmousemove=Je}(h,$,E,S,O,te):!0===E.editable&&$.style("pointer-events",q||i.opacity(j)*R<=.5?"stroke":"all");$.node().addEventListener("click",function(){return function(ae,ce){if(m(ae)){var le=+ce.node().getAttribute("data-index");if(le>=0){if(le===ae._fullLayout._activeShapeIndex)return void b(ae);ae._fullLayout._activeShapeIndex=le,ae._fullLayout._deactivateShape=b,y(ae)}}}(h,$)})}("above"===E.layer?h._fullLayout._shapeUpperLayer:"paper"===E.xref||"paper"===E.yref?h._fullLayout._shapeLowerLayer:"between"===E.layer?P.shapelayerBetween:P._hadPlotinfo?(P.mainplotinfo||P).shapelayer:h._fullLayout._shapeLowerLayer)}function x(h,S,w){var E=(w.xref+w.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");r.setClipUrl(h,E?"clip"+S._fullLayout._uid+E:null,S)}function v(h,S,w){return h.replace(u.segmentRE,function(E){var P=0,I=E.charAt(0),O=u.paramIsX[I],z=u.paramIsY[I],U=u.numParams[I];return I+E.substr(1).replace(u.paramRE,function(R){return P>=U||(O[P]?R=S(R):z[P]&&(R=w(R)),P++),R})})}function b(h){m(h)&&h._fullLayout._activeShapeIndex>=0&&(t(h),delete h._fullLayout._activeShapeIndex,y(h))}ne.exports={draw:y,drawOne:g,eraseActiveShape:function(h){if(m(h)){t(h);var S=h._fullLayout._activeShapeIndex,w=(h.layout||{}).shapes||[];if(S<w.length){for(var E=[],P=0;P<w.length;P++)P!==S&&E.push(w[P]);return delete h._fullLayout._activeShapeIndex,k.call("_guiRelayout",h,{shapes:E})}}},drawLabel:l}},92872:function(ne,F,e){"use strict";var M=e(67824).overrideAll,k=e(45464),o=e(25376),T=e(98192).u,_=e(92880).extendFlat,p=e(21776).ye,l=e(97728);ne.exports=M({newshape:{visible:_({},k.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:_({},k.legend,{}),legendgroup:_({},k.legendgroup,{}),legendgrouptitle:{text:_({},k.legendgrouptitle.text,{}),font:o({})},legendrank:_({},k.legendrank,{}),legendwidth:_({},k.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:_({},T,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:_({},k.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:p({newshape:!0},{keys:Object.keys(l)}),font:o({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")},7e3:function(ne){"use strict";ne.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},65144:function(ne,F,e){"use strict";var M=e(76308),k=e(3400);ne.exports=function(o,T,_){_("newshape.visible"),_("newshape.name"),_("newshape.showlegend"),_("newshape.legend"),_("newshape.legendwidth"),_("newshape.legendgroup"),_("newshape.legendgrouptitle.text"),k.coerceFont(_,"newshape.legendgrouptitle.font"),_("newshape.legendrank"),_("newshape.drawdirection"),_("newshape.layer"),_("newshape.fillcolor"),_("newshape.fillrule"),_("newshape.opacity"),_("newshape.line.width")&&(_("newshape.line.color",M.contrast((o||{}).plot_bgcolor||"#FFF")),_("newshape.line.dash"));var a,l="drawline"===o.dragmode,t=_("newshape.label.text"),i=_("newshape.label.texttemplate");if(t||i){_("newshape.label.textangle");var r=_("newshape.label.textposition",l?"middle":"middle center");_("newshape.label.xanchor"),_("newshape.label.yanchor",(a=r,l?"bottom":-1!==a.indexOf("top")?"top":-1!==a.indexOf("bottom")?"bottom":"middle")),_("newshape.label.padding"),k.coerceFont(_,"newshape.label.font",T.font)}_("activeshape.fillcolor"),_("activeshape.opacity")}},9856:function(ne,F,e){"use strict";var M=e(21984),k=e(7e3),o=k.CIRCLE_SIDES,T=k.SQRT2,_=e(5840),p=_.p2r,l=_.r2p,t=[0,3,4,5,6,1,2],i=[0,3,4,1,2];function r(a,s){return Math.abs(a-s)<=1e-6}function n(a,s){var u=s[1]-a[1],f=s[2]-a[2];return Math.sqrt(u*u+f*f)}F.writePaths=function(a){var s=a.length;if(!s)return"M0,0Z";for(var u="",f=0;f<s;f++)for(var c=a[f].length,y=0;y<c;y++){var d=a[f][y][0];if("Z"===d)u+="Z";else for(var m=a[f][y].length,g=0;g<m;g++){var x=g;"Q"===d||"S"===d?x=i[g]:"C"===d&&(x=t[g]),u+=a[f][y][x],g>0&&g<m-1&&(u+=",")}}return u},F.readPaths=function(a,s,u,f){var c,y,d,m=M(a),g=[],x=-1,v=0,b=0,h=function(){y=v,d=b};h();for(var S=0;S<m.length;S++){var O=[],z=m[S][0],U=z;switch(z){case"M":g[++x]=[],O.push([U,v=+m[S][1],b=+m[S][2]]),h();break;case"Q":case"S":O.push([U,v=+m[S][3],b=+m[S][4],+m[S][1],+m[S][2]]);break;case"C":O.push([U,v=+m[S][5],b=+m[S][6],+m[S][1],+m[S][2],+m[S][3],+m[S][4]]);break;case"T":case"L":O.push([U,v=+m[S][1],b=+m[S][2]]);break;case"H":O.push([U="L",v=+m[S][1],b]);break;case"V":O.push([U="L",v,b=+m[S][1]]);break;case"A":U="L";var R=+m[S][1],j=+m[S][2];+m[S][4]||(R=-R,j=-j);var Y=v-R,B=b;for(c=1;c<=o/2;c++){var V=2*Math.PI*c/o;O.push([U,Y+R*Math.cos(V),B+j*Math.sin(V)])}break;case"Z":v===y&&b===d||O.push([U,v=y,b=d])}for(var q=(u||{}).domain,ie=s._fullLayout._size,te=u&&"pixel"===u.xsizemode,ee=u&&"pixel"===u.ysizemode,$=!1===f,J=0;J<O.length;J++){for(c=0;c+2<7;c+=2){var X=O[J][c+1],ae=O[J][c+2];void 0!==X&&void 0!==ae&&(v=X,b=ae,u&&(u.xaxis&&u.xaxis.p2r?($&&(X-=u.xaxis._offset),X=te?l(u.xaxis,u.xanchor)+X:p(u.xaxis,X)):($&&(X-=ie.l),q?X=q.x[0]+X/ie.w:X/=ie.w),u.yaxis&&u.yaxis.p2r?($&&(ae-=u.yaxis._offset),ae=ee?l(u.yaxis,u.yanchor)-ae:p(u.yaxis,ae)):($&&(ae-=ie.t),ae=q?q.y[1]-ae/ie.h:1-ae/ie.h)),O[J][c+1]=X,O[J][c+2]=ae)}g[x].push(O[J].slice())}}return g},F.pointsOnRectangle=function(a){if(5!==a.length)return!1;for(var s=1;s<3;s++)if(!r(a[0][s]-a[1][s],a[3][s]-a[2][s])||!r(a[0][s]-a[3][s],a[1][s]-a[2][s]))return!1;return!(!r(a[0][1],a[1][1])&&!r(a[0][1],a[3][1])||!(n(a[0],a[1])*n(a[0],a[3])))},F.pointsOnEllipse=function(a){var s=a.length;if(s!==o+1)return!1;s=o;for(var u=0;u<s;u++){var f=(2*s-u)%s,c=(s/2+f)%s;if(!r(n(a[u],a[(s/2+u)%s]),n(a[f],a[c])))return!1}return!0},F.handleEllipse=function(a,s,u){if(!a)return[s,u];var f=F.ellipseOver({x0:s[0],y0:s[1],x1:u[0],y1:u[1]}),c=(f.x1+f.x0)/2,y=(f.y1+f.y0)/2,d=(f.x1-f.x0)/2,m=(f.y1-f.y0)/2;d||(d=m/=T),m||(m=d/=T);for(var g=[],x=0;x<o;x++){var v=2*x*Math.PI/o;g.push([c+d*Math.cos(v),y+m*Math.sin(v)])}return g},F.ellipseOver=function(a){var s=a.x0,u=a.y0,f=a.x1,c=a.y1,y=f-s,d=c-u,m=((s-=y)+f)/2,g=((u-=d)+c)/2;return{x0:m-(y*=T),y0:g-(d*=T),x1:m+y,y1:g+d}},F.fixDatesForPaths=function(a,s,u){var f="date"===s.type,c="date"===u.type;if(!f&&!c)return a;for(var y=0;y<a.length;y++)for(var d=0;d<a[y].length;d++)for(var m=0;m+2<a[y][d].length;m+=2)f&&(a[y][d][m+1]=a[y][d][m+1].replace(" ","_")),c&&(a[y][d][m+2]=a[y][d][m+2].replace(" ","_"));return a}},93940:function(ne,F,e){"use strict";var M=e(72760),k=M.drawMode,o=M.openMode,T=e(7e3),_=T.i000,p=T.i090,l=T.i180,t=T.i270,i=T.cos45,r=T.sin45,n=e(5840),a=n.p2r,s=n.r2p,u=e(1936).clearOutline,f=e(9856),c=f.readPaths,y=f.writePaths,d=f.ellipseOver,m=f.fixDatesForPaths;function g(x,v,b){var h,w=v.gd,E=x[0][0].getAttribute("d"),P=w._fullLayout.newshape,I=v.plotinfo,O=v.isActiveShape,z=I.xaxis,U=I.yaxis,R=!!I.domain||!I.xaxis,j=!!I.domain||!I.yaxis,Y=o(b),B=c(E,w,I,O),V={editable:!0,visible:P.visible,name:P.name,showlegend:P.showlegend,legend:P.legend,legendwidth:P.legendwidth,legendgroup:P.legendgroup,legendgrouptitle:{text:P.legendgrouptitle.text,font:P.legendgrouptitle.font},legendrank:P.legendrank,label:P.label,xref:R?"paper":z._id,yref:j?"paper":U._id,layer:P.layer,opacity:P.opacity,line:{color:P.line.color,width:P.line.width,dash:P.line.dash}};if(Y||(V.fillcolor=P.fillcolor,V.fillrule=P.fillrule),1===B.length&&(h=B[0]),h&&5===h.length&&"drawrect"===b)V.type="rect",V.x0=h[0][1],V.y0=h[0][2],V.x1=h[2][1],V.y1=h[2][2];else if(h&&"drawline"===b)V.type="line",V.x0=h[0][1],V.y0=h[0][2],V.x1=h[1][1],V.y1=h[1][2];else if(h&&"drawcircle"===b){V.type="circle";var q=h[_][1],ie=h[p][1],te=h[l][1],ee=h[t][1],$=h[_][2],J=h[p][2],X=h[l][2],ae=h[t][2],ce=I.xaxis&&("date"===I.xaxis.type||"log"===I.xaxis.type),le=I.yaxis&&("date"===I.yaxis.type||"log"===I.yaxis.type);ce&&(q=s(I.xaxis,q),ie=s(I.xaxis,ie),te=s(I.xaxis,te),ee=s(I.xaxis,ee)),le&&($=s(I.yaxis,$),J=s(I.yaxis,J),X=s(I.yaxis,X),ae=s(I.yaxis,ae));var pe=(ie+ee)/2,we=($+X)/2,Te=d({x0:pe,y0:we,x1:pe+(ee-ie+te-q)/2*i,y1:we+(ae-J+X-$)/2*r});ce&&(Te.x0=a(I.xaxis,Te.x0),Te.x1=a(I.xaxis,Te.x1)),le&&(Te.y0=a(I.yaxis,Te.y0),Te.y1=a(I.yaxis,Te.y1)),V.x0=Te.x0,V.y0=Te.y0,V.x1=Te.x1,V.y1=Te.y1}else V.type="path",z&&U&&m(B,z,U),V.path=y(B),h=null;return V}ne.exports={newShapes:function(x,v){if(x.length&&x[0][0]){var b=v.gd,h=v.isActiveShape,S=v.dragmode,w=(b.layout||{}).shapes||[];if(!k(S)&&void 0!==h){var E=b._fullLayout._activeShapeIndex;if(E<w.length)switch(b._fullLayout.shapes[E].type){case"rect":S="drawrect";break;case"circle":S="drawcircle";break;case"line":S="drawline";break;case"path":var P=w[E].path||"";S="Z"===P[P.length-1]?"drawclosedpath":"drawopenpath"}}var I=g(x,v,S);u(b);for(var O=v.editHelpers,z=(O||{}).modifyItem,U=[],R=0;R<w.length;R++){var j=b._fullLayout.shapes[R];if(U[R]=j._input,void 0!==h&&R===b._fullLayout._activeShapeIndex){var Y=I;switch(j.type){case"line":case"rect":case"circle":z("x0",Y.x0),z("x1",Y.x1),z("y0",Y.y0),z("y1",Y.y1);break;case"path":z("path",Y.path)}}}return void 0===h?(U.push(I),U):O?O.getUpdateObj():{}}},createShapeObj:g}},1936:function(ne){"use strict";ne.exports={clearOutlineControllers:function(F){var e=F._fullLayout._zoomlayer;e&&e.selectAll(".outline-controllers").remove()},clearOutline:function(F){var e=F._fullLayout._zoomlayer;e&&e.selectAll(".select-outline").remove(),F._fullLayout._outlining=!1}}},65152:function(ne,F,e){"use strict";var M=e(85448),k=e(3400),o=e(54460);F.rangeToShapePosition=function(T){return"log"===T.type?T.r2d:function(_){return _}},F.shapePositionToRange=function(T){return"log"===T.type?T.d2r:function(_){return _}},F.decodeDate=function(T){return function(_){return _.replace&&(_=_.replace("_"," ")),T(_)}},F.encodeDate=function(T){return function(_){return T(_).replace(" ","_")}},F.extractPathCoords=function(T,_,p){var l=[];return T.match(M.segmentRE).forEach(function(t){var i=_[t.charAt(0)].drawn;if(void 0!==i){var r=t.substr(1).match(M.paramRE);if(r&&!(r.length<i)){var n=r[i],a=p?n:k.cleanNumber(n);l.push(a)}}}),l},F.getDataToPixel=function(T,_,p,l){var t,i=T._fullLayout._size;if(_)if("domain"===l)t=function(n){return _._length*(p?1-n:n)+_._offset};else{var r=F.shapePositionToRange(_);t=function(n){return _._offset+_.r2p(r(n,!0))},"date"===_.type&&(t=F.decodeDate(t))}else t=p?function(n){return i.t+i.h*(1-n)}:function(n){return i.l+i.w*n};return t},F.getPixelToData=function(T,_,p,l){var t,i=T._fullLayout._size;if(_)if("domain"===l)t=function(n){var a=(n-_._offset)/_._length;return p?1-a:a};else{var r=F.rangeToShapePosition(_);t=function(n){return r(_.p2r(n-_._offset))}}else t=p?function(n){return 1-(n-i.t)/i.h}:function(n){return(n-i.l)/i.w};return t},F.roundPositionForSharpStrokeRendering=function(T,_){var p=1===Math.round(_%2),l=Math.round(T);return p?l+.5:l},F.makeShapesOptionsAndPlotinfo=function(T,_){var p=T._fullLayout.shapes[_]||{},l=T._fullLayout._plots[p.xref+p.yref];return l?l._hadPlotinfo=!0:(l={},p.xref&&"paper"!==p.xref&&(l.xaxis=T._fullLayout[p.xref+"axis"]),p.yref&&"paper"!==p.yref&&(l.yaxis=T._fullLayout[p.yref+"axis"])),l.xsizemode=p.xsizemode,l.ysizemode=p.ysizemode,l.xanchor=p.xanchor,l.yanchor=p.yanchor,{options:p,plotinfo:l}},F.makeSelectionsOptionsAndPlotinfo=function(T,_){var p=T._fullLayout.selections[_]||{},l=T._fullLayout._plots[p.xref+p.yref];return l?l._hadPlotinfo=!0:(l={},p.xref&&(l.xaxis=T._fullLayout[p.xref+"axis"]),p.yref&&(l.yaxis=T._fullLayout[p.yref+"axis"])),{options:p,plotinfo:l}},F.getPathString=function(T,_){var p,l,t,i,r,n,a,s,P,I,O,U,R,j,Y,u=_.type,f=o.getRefType(_.xref),c=o.getRefType(_.yref),y=o.getFromId(T,_.xref),d=o.getFromId(T,_.yref),m=T._fullLayout._size;if(y?"domain"===f?l=function(P){return y._offset+y._length*P}:(p=F.shapePositionToRange(y),l=function(P){return y._offset+y.r2p(p(P,!0))}):l=function(P){return m.l+m.w*P},d?"domain"===c?i=function(P){return d._offset+d._length*(1-P)}:(t=F.shapePositionToRange(d),i=function(P){return d._offset+d.r2p(t(P,!0))}):i=function(P){return m.t+m.h*(1-P)},"path"===u)return y&&"date"===y.type&&(l=F.decodeDate(l)),d&&"date"===d.type&&(i=F.decodeDate(i)),I=l,O=i,U=(P=_).xsizemode,R=P.ysizemode,j=P.xanchor,Y=P.yanchor,P.path.replace(M.segmentRE,function(B){var V=0,q=B.charAt(0),ie=M.paramIsX[q],te=M.paramIsY[q],ee=M.numParams[q],$=B.substr(1).replace(M.paramRE,function(J){return ie[V]?J="pixel"===U?I(j)+Number(J):I(J):te[V]&&(J="pixel"===R?O(Y)-Number(J):O(J)),++V>ee&&(J="X"),J});return V>ee&&($=$.replace(/[\s,]*X.*/,""),k.log("Ignoring extra params in segment "+B)),q+$});if("pixel"===_.xsizemode){var g=l(_.xanchor);r=g+_.x0,n=g+_.x1}else r=l(_.x0),n=l(_.x1);if("pixel"===_.ysizemode){var x=i(_.yanchor);a=x-_.y0,s=x-_.y1}else a=i(_.y0),s=i(_.y1);if("line"===u)return"M"+r+","+a+"L"+n+","+s;if("rect"===u)return"M"+r+","+a+"H"+n+"V"+s+"H"+r+"Z";var v=(r+n)/2,b=(a+s)/2,h=Math.abs(v-r),S=Math.abs(b-a),w="A"+h+","+S,E=v+h+","+b;return"M"+E+w+" 0 1,1 "+v+","+(b-S)+w+" 0 0,1 "+E+"Z"}},41592:function(ne,F,e){"use strict";var M=e(4016);ne.exports={moduleType:"component",name:"shapes",layoutAttributes:e(46056),supplyLayoutDefaults:e(43712),supplyDrawNewShapeDefaults:e(65144),includeBasePlot:e(36632)("shapes"),calcAutorange:e(96084),draw:M.draw,drawOne:M.drawOne}},97728:function(ne){"use strict";function F(o,T){return T?T.d2l(o):o}function e(o,T){return T?T.l2d(o):o}function M(o,T){return F(o.x1,T)-F(o.x0,T)}function k(o,T,_){return F(o.y1,_)-F(o.y0,_)}ne.exports={x0:function(o){return o.x0},x1:function(o){return o.x1},y0:function(o){return o.y0},y1:function(o){return o.y1},slope:function(o,T,_){return"line"!==o.type?void 0:k(o,0,_)/M(o,T)},dx:M,dy:k,width:function(o,T){return Math.abs(M(o,T))},height:function(o,T,_){return Math.abs(k(o,0,_))},length:function(o,T,_){return"line"!==o.type?void 0:Math.sqrt(Math.pow(M(o,T),2)+Math.pow(k(o,0,_),2))},xcenter:function(o,T){return e((F(o.x1,T)+F(o.x0,T))/2,T)},ycenter:function(o,T,_){return e((F(o.y1,_)+F(o.y0,_))/2,_)}}},89861:function(ne,F,e){"use strict";var M=e(25376),k=e(66741),o=e(92880).extendDeepAll,T=e(67824).overrideAll,_=e(85656),p=e(31780).templatedArray,l=e(60876),t=p("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});ne.exports=T(p("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:t,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:o(k({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:_.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:M({})},font:M({}),activebgcolor:{valType:"color",dflt:l.gripBgActiveColor},bgcolor:{valType:"color",dflt:l.railBgColor},bordercolor:{valType:"color",dflt:l.railBorderColor},borderwidth:{valType:"number",min:0,dflt:l.railBorderWidth},ticklen:{valType:"number",min:0,dflt:l.tickLength},tickcolor:{valType:"color",dflt:l.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:l.minorTickLength}}),"arraydraw","from-root")},60876:function(ne){"use strict";ne.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},8132:function(ne,F,e){"use strict";var M=e(3400),k=e(51272),o=e(89861),T=e(60876).name,_=o.steps;function p(t,i,r){function n(c,y){return M.coerce(t,i,o,c,y)}for(var a=k(t,i,{name:"steps",handleItemDefaults:l}),s=0,u=0;u<a.length;u++)a[u].visible&&s++;if(s<2?i.visible=!1:n("visible")){i._stepCount=s;var f=i._visibleSteps=M.filterVisible(a);(a[n("active")]||{}).visible||(i.active=f[0]._index),n("x"),n("y"),M.noneOrAll(t,i,["x","y"]),n("xanchor"),n("yanchor"),n("len"),n("lenmode"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),M.coerceFont(n,"font",r.font),n("currentvalue.visible")&&(n("currentvalue.xanchor"),n("currentvalue.prefix"),n("currentvalue.suffix"),n("currentvalue.offset"),M.coerceFont(n,"currentvalue.font",i.font)),n("transition.duration"),n("transition.easing"),n("bgcolor"),n("activebgcolor"),n("bordercolor"),n("borderwidth"),n("ticklen"),n("tickwidth"),n("tickcolor"),n("minorticklen")}}function l(t,i){function r(a,s){return M.coerce(t,i,_,a,s)}if("skip"===t.method||Array.isArray(t.args)?r("visible"):i.visible=!1){r("method"),r("args");var n=r("label","step-"+i._index);r("value",n),r("execute")}}ne.exports=function(t,i){k(t,i,{name:T,handleItemDefaults:p})}},79664:function(ne,F,e){"use strict";var M=e(33428),k=e(7316),o=e(76308),T=e(43616),_=e(3400),p=_.strTranslate,l=e(72736),t=e(31780).arrayEditor,i=e(60876),r=e(84284),n=r.LINE_SPACING,a=r.FROM_TL,s=r.FROM_BR;function u(O){return i.autoMarginIdRoot+O._index}function f(O){return O._index}function c(O,z){var U=T.tester.selectAll("g."+i.labelGroupClass).data(z._visibleSteps);U.enter().append("g").classed(i.labelGroupClass,!0);var R=0,j=0;U.each(function(J){var X=m(M.select(this),{step:J},z).node();if(X){var ae=T.bBox(X);j=Math.max(j,ae.height),R=Math.max(R,ae.width)}}),U.remove();var Y=z._dims={};Y.inputAreaWidth=Math.max(i.railWidth,i.gripHeight);var B=O._fullLayout._size;if(Y.lx=B.l+B.w*z.x,Y.ly=B.t+B.h*(1-z.y),Y.outerLength="fraction"===z.lenmode?Math.round(B.w*z.len):z.len,Y.inputAreaStart=0,Y.inputAreaLength=Math.round(Y.outerLength-z.pad.l-z.pad.r),Y.labelStride=Math.max(1,Math.ceil((R+i.labelPadding)/((Y.inputAreaLength-2*i.stepInset)/(z._stepCount-1)))),Y.labelHeight=j,Y.currentValueMaxWidth=0,Y.currentValueHeight=0,Y.currentValueTotalHeight=0,Y.currentValueMaxLines=1,z.currentvalue.visible){var ie=T.tester.append("g");U.each(function(J){var X=y(ie,z,J.label),ae=X.node()&&T.bBox(X.node())||{width:0,height:0},ce=l.lineCount(X);Y.currentValueMaxWidth=Math.max(Y.currentValueMaxWidth,Math.ceil(ae.width)),Y.currentValueHeight=Math.max(Y.currentValueHeight,Math.ceil(ae.height)),Y.currentValueMaxLines=Math.max(Y.currentValueMaxLines,ce)}),Y.currentValueTotalHeight=Y.currentValueHeight+z.currentvalue.offset,ie.remove()}Y.height=Y.currentValueTotalHeight+i.tickOffset+z.ticklen+i.labelOffset+Y.labelHeight+z.pad.t+z.pad.b;var te="left";_.isRightAnchor(z)&&(Y.lx-=Y.outerLength,te="right"),_.isCenterAnchor(z)&&(Y.lx-=Y.outerLength/2,te="center");var ee="top";_.isBottomAnchor(z)&&(Y.ly-=Y.height,ee="bottom"),_.isMiddleAnchor(z)&&(Y.ly-=Y.height/2,ee="middle"),Y.outerLength=Math.ceil(Y.outerLength),Y.height=Math.ceil(Y.height),Y.lx=Math.round(Y.lx),Y.ly=Math.round(Y.ly);var $={y:z.y,b:Y.height*s[ee],t:Y.height*a[ee]};"fraction"===z.lenmode?($.l=0,$.xl=z.x-z.len*a[te],$.r=0,$.xr=z.x+z.len*s[te]):($.x=z.x,$.l=Y.outerLength*a[te],$.r=Y.outerLength*s[te]),k.autoMargin(O,u(z),$)}function y(O,z,U){if(z.currentvalue.visible){var R,j,Y=z._dims;switch(z.currentvalue.xanchor){case"right":R=Y.inputAreaLength-i.currentValueInset-Y.currentValueMaxWidth,j="left";break;case"center":R=.5*Y.inputAreaLength,j="middle";break;default:R=i.currentValueInset,j="left"}var B=_.ensureSingle(O,"text",i.labelClass,function($){$.attr({"text-anchor":j,"data-notex":1})}),V=z.currentvalue.prefix?z.currentvalue.prefix:"";if("string"==typeof U)V+=U;else{var q=z.steps[z.active].label,ie=z._gd._fullLayout._meta;ie&&(q=_.templateString(q,ie)),V+=q}z.currentvalue.suffix&&(V+=z.currentvalue.suffix),B.call(T.font,z.currentvalue.font).text(V).call(l.convertToTspans,z._gd);var te=l.lineCount(B);return l.positionText(B,R,(Y.currentValueMaxLines+1-te)*z.currentvalue.font.size*n),B}}function d(O,z,U){_.ensureSingle(O,"rect",i.gripRectClass,function(R){R.call(b,z,O,U).style("pointer-events","all")}).attr({width:i.gripWidth,height:i.gripHeight,rx:i.gripRadius,ry:i.gripRadius}).call(o.stroke,U.bordercolor).call(o.fill,U.bgcolor).style("stroke-width",U.borderwidth+"px")}function m(O,z,U){var R=_.ensureSingle(O,"text",i.labelClass,function(B){B.attr({"text-anchor":"middle","data-notex":1})}),j=z.step.label,Y=U._gd._fullLayout._meta;return Y&&(j=_.templateString(j,Y)),R.call(T.font,U.font).text(j).call(l.convertToTspans,U._gd),R}function g(O,z){var U=_.ensureSingle(O,"g",i.labelsClass),R=z._dims,j=U.selectAll("g."+i.labelGroupClass).data(R.labelSteps);j.enter().append("g").classed(i.labelGroupClass,!0),j.exit().remove(),j.each(function(Y){var B=M.select(this);B.call(m,Y,z),T.setTranslate(B,w(z,Y.fraction),i.tickOffset+z.ticklen+z.font.size*n+i.labelOffset+R.currentValueTotalHeight)})}function x(O,z,U,R,j){var Y=Math.round(R*(U._stepCount-1)),B=U._visibleSteps[Y]._index;B!==U.active&&v(O,z,U,B,!0,j)}function v(O,z,U,R,j,Y){var B=U.active;U.active=R,t(O.layout,i.name,U).applyUpdate("active",R);var V=U.steps[U.active];z.call(S,U,Y),z.call(y,U),O.emit("plotly_sliderchange",{slider:U,step:U.steps[U.active],interaction:j,previousActive:B}),V&&V.method&&j&&(z._nextMethod?(z._nextMethod.step=V,z._nextMethod.doCallback=j,z._nextMethod.doTransition=Y):(z._nextMethod={step:V,doCallback:j,doTransition:Y},z._nextMethodRaf=window.requestAnimationFrame(function(){var q=z._nextMethod.step;q.method&&(q.execute&&k.executeAPICommand(O,q.method,q.args),z._nextMethod=null,z._nextMethodRaf=null)})))}function b(O,z,U){if(!z._context.staticPlot){var R=U.node(),j=M.select(z);O.on("mousedown",B),O.on("touchstart",B)}function Y(){return U.data()[0]}function B(){var V=Y();z.emit("plotly_sliderstart",{slider:V});var q=U.select("."+i.gripRectClass);M.event.stopPropagation(),M.event.preventDefault(),q.call(o.fill,V.activebgcolor);var ie=E(V,M.mouse(R)[0]);function te(){var $=Y(),J=E($,M.mouse(R)[0]);x(z,U,$,J,!1)}function ee(){var $=Y();$._dragging=!1,q.call(o.fill,$.bgcolor),j.on("mouseup",null),j.on("mousemove",null),j.on("touchend",null),j.on("touchmove",null),z.emit("plotly_sliderend",{slider:$,step:$.steps[$.active]})}x(z,U,V,ie,!0),V._dragging=!0,j.on("mousemove",te),j.on("touchmove",te),j.on("mouseup",ee),j.on("touchend",ee)}}function h(O,z){var U=O.selectAll("rect."+i.tickRectClass).data(z._visibleSteps),R=z._dims;U.enter().append("rect").classed(i.tickRectClass,!0),U.exit().remove(),U.attr({width:z.tickwidth+"px","shape-rendering":"crispEdges"}),U.each(function(j,Y){var B=Y%R.labelStride==0,V=M.select(this);V.attr({height:B?z.ticklen:z.minorticklen}).call(o.fill,z.tickcolor),T.setTranslate(V,w(z,Y/(z._stepCount-1))-.5*z.tickwidth,(B?i.tickOffset:i.minorTickOffset)+R.currentValueTotalHeight)})}function S(O,z,U){for(var R=O.select("rect."+i.gripRectClass),j=0,Y=0;Y<z._stepCount;Y++)if(z._visibleSteps[Y]._index===z.active){j=Y;break}var B=w(z,j/(z._stepCount-1));if(!z._invokingCommand){var V=R;U&&z.transition.duration>0&&(V=V.transition().duration(z.transition.duration).ease(z.transition.easing)),V.attr("transform",p(B-.5*i.gripWidth,z._dims.currentValueTotalHeight))}}function w(O,z){var U=O._dims;return U.inputAreaStart+i.stepInset+(U.inputAreaLength-2*i.stepInset)*Math.min(1,Math.max(0,z))}function E(O,z){var U=O._dims;return Math.min(1,Math.max(0,(z-i.stepInset-U.inputAreaStart)/(U.inputAreaLength-2*i.stepInset-2*U.inputAreaStart)))}function P(O,z,U){var R=U._dims,j=_.ensureSingle(O,"rect",i.railTouchRectClass,function(Y){Y.call(b,z,O,U).style("pointer-events","all")});j.attr({width:R.inputAreaLength,height:Math.max(R.inputAreaWidth,i.tickOffset+U.ticklen+R.labelHeight)}).call(o.fill,U.bgcolor).attr("opacity",0),T.setTranslate(j,0,R.currentValueTotalHeight)}function I(O,z){var U=z._dims,R=U.inputAreaLength-2*i.railInset,j=_.ensureSingle(O,"rect",i.railRectClass);j.attr({width:R,height:i.railWidth,rx:i.railRadius,ry:i.railRadius,"shape-rendering":"crispEdges"}).call(o.stroke,z.bordercolor).call(o.fill,z.bgcolor).style("stroke-width",z.borderwidth+"px"),T.setTranslate(j,i.railInset,.5*(U.inputAreaWidth-i.railWidth)+U.currentValueTotalHeight)}ne.exports=function(O){var z=O._context.staticPlot,U=O._fullLayout,R=function(ie,te){for(var ee=ie[i.name],$=[],J=0;J<ee.length;J++){var X=ee[J];X.visible&&(X._gd=te,$.push(X))}return $}(U,O),j=U._infolayer.selectAll("g."+i.containerClassName).data(R.length>0?[0]:[]);function Y(ie){ie._commandObserver&&(ie._commandObserver.remove(),delete ie._commandObserver),k.autoMargin(O,u(ie))}if(j.enter().append("g").classed(i.containerClassName,!0).style("cursor",z?null:"ew-resize"),j.exit().each(function(){M.select(this).selectAll("g."+i.groupClassName).each(Y)}).remove(),0!==R.length){var B=j.selectAll("g."+i.groupClassName).data(R,f);B.enter().append("g").classed(i.groupClassName,!0),B.exit().each(Y).remove();for(var V=0;V<R.length;V++)c(O,R[V]);B.each(function(ie){var te=M.select(this);(function(ee){var $=ee._dims;$.labelSteps=[];for(var J=ee._stepCount,X=0;X<J;X+=$.labelStride)$.labelSteps.push({fraction:X/(J-1),step:ee._visibleSteps[X]})})(ie),k.manageCommandObserver(O,ie,ie._visibleSteps,function(ee){var $=te.data()[0];$.active!==ee.index&&($._dragging||v(O,te,$,ee.index,!1,!0))}),function(ee,$,J){(J.steps[J.active]||{}).visible||(J.active=J._visibleSteps[0]._index),$.call(y,J).call(I,J).call(g,J).call(h,J).call(P,ee,J).call(d,ee,J);var X=J._dims;T.setTranslate($,X.lx+J.pad.l,X.ly+J.pad.t),$.call(S,J,!1),$.call(y,J)}(O,M.select(this),ie)})}}},97544:function(ne,F,e){"use strict";var M=e(60876);ne.exports={moduleType:"component",name:M.name,layoutAttributes:e(89861),supplyLayoutDefaults:e(8132),draw:e(79664)}},81668:function(ne,F,e){"use strict";var M=e(33428),k=e(38248),o=e(7316),T=e(24040),_=e(3400),p=_.strTranslate,l=e(43616),t=e(76308),i=e(72736),r=e(13448),n=e(84284).OPPOSITE_SIDE,a=/ [XY][0-9]* /;ne.exports={draw:function(s,u,f){var c,y=f.propContainer,d=f.propName,m=f.placeholder,g=f.traceIndex,x=f.avoid||{},v=f.attributes,b=f.transform,h=f.containerGroup,S=s._fullLayout,w=1,E=!1,P=y.title,I=(P&&P.text?P.text:"").trim(),O=P&&P.font?P.font:{},z=O.family,U=O.size,R=O.color,j=O.weight,Y=O.style,B=O.variant,V=O.textcase,q=O.lineposition,ie=O.shadow;"title.text"===d?c="titleText":-1!==d.indexOf("axis")?c="axisTitleText":d.indexOf(!0)&&(c="colorbarTitleText");var te=s._context.edits[c];""===I?w=0:I.replace(a," % ")===m.replace(a," % ")&&(w=.2,E=!0,te||(I="")),f._meta?I=_.templateString(I,f._meta):S._meta&&(I=_.templateString(I,S._meta));var ee,$=I||te;h||(h=_.ensureSingle(S._infolayer,"g","g-"+u),ee=S._hColorbarMoveTitle);var J=h.selectAll("text").data($?[0]:[]);if(J.enter().append("text"),J.text(I).attr("class",u),J.exit().remove(),!$)return h;function X(le){_.syncOrAsync([ae,ce],le)}function ae(le){var pe;return!b&&ee&&(b={}),b?(pe="",b.rotate&&(pe+="rotate("+[b.rotate,v.x,v.y]+")"),(b.offset||ee)&&(pe+=p(0,(b.offset||0)-(ee||0)))):pe=null,le.attr("transform",pe),le.style("opacity",w*t.opacity(R)).call(l.font,{color:t.rgb(R),size:M.round(U,2),family:z,weight:j,style:Y,variant:B,textcase:V,shadow:ie,lineposition:q}).attr(v).call(i.convertToTspans,s),o.previousPromises(s)}function ce(le){var pe=M.select(le.node().parentNode);if(x&&x.selection&&x.side&&I){pe.attr("transform",null);var we=n[x.side],Te="left"===x.side||"top"===x.side?-1:1,ye=k(x.pad)?x.pad:2,ve=l.bBox(pe.node()),xe={t:0,b:0,l:0,r:0},Ce=s._fullLayout._reservedMargin;for(var Oe in Ce)for(var be in Ce[Oe])xe[be]=Math.max(xe[be],Ce[Oe][be]);var ge=x.maxShift||Te*({left:xe.l,top:xe.t,right:S.width-xe.r,bottom:S.height-xe.b}[x.side]-ve[x.side]),Ie=0;if(ge<0)Ie=ge;else{var ke=x.offsetLeft||0,Se=x.offsetTop||0;ve.left-=ke,ve.right-=ke,ve.top-=Se,ve.bottom-=Se,x.selection.each(function(){var Fe=l.bBox(this);_.bBoxIntersect(ve,Fe,ye)&&(Ie=Math.max(Ie,Te*(Fe[x.side]-ve[we])+ye))}),Ie=Math.min(ge,Ie),y._titleScoot=Math.abs(Ie)}if(Ie>0||ge<0){var Pe={left:[-Ie,0],right:[Ie,0],top:[0,-Ie],bottom:[0,Ie]}[x.side];pe.attr("transform",p(Pe[0],Pe[1]))}}}return J.call(X),te&&(I?J.on(".opacity",null):(w=0,E=!0,J.text(m).on("mouseover.opacity",function(){M.select(this).transition().duration(r.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){M.select(this).transition().duration(r.HIDE_PLACEHOLDER).style("opacity",0)})),J.call(i.makeEditable,{gd:s}).on("edit",function(le){void 0!==g?T.call("_guiRestyle",s,d,le,g):T.call("_guiRelayout",s,d,le)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(X)}).on("input",function(le){this.text(le||" ").call(i.positionText,v.x,v.y)})),J.classed("js-placeholder",E),h}}},88444:function(ne,F,e){"use strict";var M=e(25376),k=e(22548),o=e(92880).extendFlat,T=e(67824).overrideAll,_=e(66741),p=e(31780).templatedArray,l=p("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});ne.exports=T(p("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:l,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:o(_({editType:"arraydraw"}),{}),font:M({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:k.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},73712:function(ne){"use strict";ne.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}}},91384:function(ne,F,e){"use strict";var M=e(3400),k=e(51272),o=e(88444),T=e(73712).name,_=o.buttons;function p(t,i,r){function n(a,s){return M.coerce(t,i,o,a,s)}n("visible",k(t,i,{name:"buttons",handleItemDefaults:l}).length>0)&&(n("active"),n("direction"),n("type"),n("showactive"),n("x"),n("y"),M.noneOrAll(t,i,["x","y"]),n("xanchor"),n("yanchor"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),M.coerceFont(n,"font",r.font),n("bgcolor",r.paper_bgcolor),n("bordercolor"),n("borderwidth"))}function l(t,i){function r(n,a){return M.coerce(t,i,_,n,a)}r("visible","skip"===t.method||Array.isArray(t.args))&&(r("method"),r("args"),r("args2"),r("label"),r("execute"))}ne.exports=function(t,i){k(t,i,{name:T,handleItemDefaults:p})}},14420:function(ne,F,e){"use strict";var M=e(33428),k=e(7316),o=e(76308),T=e(43616),_=e(3400),p=e(72736),l=e(31780).arrayEditor,t=e(84284).LINE_SPACING,i=e(73712),r=e(37400);function n(w){return w._index}function a(w,E){return+w.attr(i.menuIndexAttrName)===E._index}function s(w,E,P,I,O,z,U,R){E.active=U,l(w.layout,i.name,E).applyUpdate("active",U),"buttons"===E.type?f(w,I,null,null,E):"dropdown"===E.type&&(O.attr(i.menuIndexAttrName,"-1"),u(w,I,O,z,E),R||f(w,I,O,z,E))}function u(w,E,P,I,O){var z=_.ensureSingle(E,"g",i.headerClassName,function(V){V.style("pointer-events","all")}),U=O._dims,Y={y:O.pad.t,yPad:0,x:O.pad.l,xPad:0,index:0},B={width:U.headerWidth,height:U.headerHeight};z.call(c,O,O.buttons[O.active]||i.blankHeaderOpts,w).call(h,O,Y,B),_.ensureSingle(E,"text",i.headerArrowClassName,function(V){V.attr("text-anchor","end").call(T.font,O.font).text(i.arrowSymbol[O.direction])}).attr({x:U.headerWidth-i.arrowOffsetX+O.pad.l,y:U.headerHeight/2+i.textOffsetY+O.pad.t}),z.on("click",function(){P.call(S,String(a(P,O)?-1:O._index)),f(w,E,P,I,O)}),z.on("mouseover",function(){z.call(g)}),z.on("mouseout",function(){z.call(x,O)}),T.setTranslate(E,U.lx,U.ly)}function f(w,E,P,I,O){P||(P=E).attr("pointer-events","all");var z=-1==+P.attr(i.menuIndexAttrName)&&"buttons"!==O.type?[]:O.buttons,U="dropdown"===O.type?i.dropdownButtonClassName:i.buttonClassName,R=P.selectAll("g."+U).data(_.filterVisible(z)),j=R.enter().append("g").classed(U,!0),Y=R.exit();"dropdown"===O.type?(j.attr("opacity","0").transition().attr("opacity","1"),Y.transition().attr("opacity","0").remove()):Y.remove();var B=0,V=0,q=O._dims,ie=-1!==["up","down"].indexOf(O.direction);"dropdown"===O.type&&(ie?V=q.headerHeight+i.gapButtonHeader:B=q.headerWidth+i.gapButtonHeader),"dropdown"===O.type&&"up"===O.direction&&(V=-i.gapButtonHeader+i.gapButton-q.openHeight),"dropdown"===O.type&&"left"===O.direction&&(B=-i.gapButtonHeader+i.gapButton-q.openWidth);var $,J,X,te={x:q.lx+B+O.pad.l,y:q.ly+V+O.pad.t,yPad:i.gapButton,xPad:i.gapButton,index:0},ee={l:te.x+O.borderwidth,t:te.y+O.borderwidth};R.each(function($,J){var X=M.select(this);X.call(c,O,$,w).call(h,O,te),X.on("click",function(){M.event.defaultPrevented||($.execute&&($.args2&&O.active===J?(s(w,O,0,E,P,I,-1),k.executeAPICommand(w,$.method,$.args2)):(s(w,O,0,E,P,I,J),k.executeAPICommand(w,$.method,$.args))),w.emit("plotly_buttonclicked",{menu:O,button:$,active:O.active}))}),X.on("mouseover",function(){X.call(g)}),X.on("mouseout",function(){X.call(x,O),R.call(m,O)})}),R.call(m,O),ie?(ee.w=Math.max(q.openWidth,q.headerWidth),ee.h=te.y-ee.t):(ee.w=te.x-ee.l,ee.h=Math.max(q.openHeight,q.headerHeight)),ee.direction=O.direction,I&&(R.size()?function($,J,X,ae,ce,le){var pe,we,Te,ye=ce.direction,xe=ce._dims,Ce=ce.active;if("up"===ye||"down"===ye)for(we=0,Te=0;Te<Ce;Te++)we+=xe.heights[Te]+i.gapButton;else for(pe=0,Te=0;Te<Ce;Te++)pe+=xe.widths[Te]+i.gapButton;ae.enable(le,pe,we),ae.hbar&&ae.hbar.attr("opacity","0").transition().attr("opacity","1"),ae.vbar&&ae.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,I,O,ee):(X=!!($=I).vbar,(J=!!$.hbar)&&$.hbar.transition().attr("opacity","0").each("end",function(){J=!1,X||$.disable()}),X&&$.vbar.transition().attr("opacity","0").each("end",function(){X=!1,J||$.disable()})))}function c(w,E,P,I){w.call(y,E).call(d,E,P,I)}function y(w,E){_.ensureSingle(w,"rect",i.itemRectClassName,function(P){P.attr({rx:i.rx,ry:i.ry,"shape-rendering":"crispEdges"})}).call(o.stroke,E.bordercolor).call(o.fill,E.bgcolor).style("stroke-width",E.borderwidth+"px")}function d(w,E,P,I){var O=_.ensureSingle(w,"text",i.itemTextClassName,function(R){R.attr({"text-anchor":"start","data-notex":1})}),z=P.label,U=I._fullLayout._meta;U&&(z=_.templateString(z,U)),O.call(T.font,E.font).text(z).call(p.convertToTspans,I)}function m(w,E){var P=E.active;w.each(function(I,O){var z=M.select(this);O===P&&E.showactive&&z.select("rect."+i.itemRectClassName).call(o.fill,i.activeColor)})}function g(w){w.select("rect."+i.itemRectClassName).call(o.fill,i.hoverColor)}function x(w,E){w.select("rect."+i.itemRectClassName).call(o.fill,E.bgcolor)}function v(w,E){var P=E._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},I=T.tester.selectAll("g."+i.dropdownButtonClassName).data(_.filterVisible(E.buttons));I.enter().append("g").classed(i.dropdownButtonClassName,!0);var O=-1!==["up","down"].indexOf(E.direction);I.each(function(B,V){var q=M.select(this);q.call(c,E,B,w);var ie=q.select("."+i.itemTextClassName),te=ie.node()&&T.bBox(ie.node()).width,ee=Math.max(te+i.textPadX,i.minWidth),$=E.font.size*t,J=p.lineCount(ie),X=Math.max($*J,i.minHeight)+i.textOffsetY;X=Math.ceil(X),ee=Math.ceil(ee),P.widths[V]=ee,P.heights[V]=X,P.height1=Math.max(P.height1,X),P.width1=Math.max(P.width1,ee),O?(P.totalWidth=Math.max(P.totalWidth,ee),P.openWidth=P.totalWidth,P.totalHeight+=X+i.gapButton,P.openHeight+=X+i.gapButton):(P.totalWidth+=ee+i.gapButton,P.openWidth+=ee+i.gapButton,P.totalHeight=Math.max(P.totalHeight,X),P.openHeight=P.totalHeight)}),O?P.totalHeight-=i.gapButton:P.totalWidth-=i.gapButton,P.headerWidth=P.width1+i.arrowPadX,P.headerHeight=P.height1,"dropdown"===E.type&&(O?(P.width1+=i.arrowPadX,P.totalHeight=P.height1):P.totalWidth=P.width1,P.totalWidth+=i.arrowPadX),I.remove();var z=P.totalWidth+E.pad.l+E.pad.r,U=P.totalHeight+E.pad.t+E.pad.b,R=w._fullLayout._size;P.lx=R.l+R.w*E.x,P.ly=R.t+R.h*(1-E.y);var j="left";_.isRightAnchor(E)&&(P.lx-=z,j="right"),_.isCenterAnchor(E)&&(P.lx-=z/2,j="center");var Y="top";_.isBottomAnchor(E)&&(P.ly-=U,Y="bottom"),_.isMiddleAnchor(E)&&(P.ly-=U/2,Y="middle"),P.totalWidth=Math.ceil(P.totalWidth),P.totalHeight=Math.ceil(P.totalHeight),P.lx=Math.round(P.lx),P.ly=Math.round(P.ly),k.autoMargin(w,b(E),{x:E.x,y:E.y,l:z*({right:1,center:.5}[j]||0),r:z*({left:1,center:.5}[j]||0),b:U*({top:1,middle:.5}[Y]||0),t:U*({bottom:1,middle:.5}[Y]||0)})}function b(w){return i.autoMarginIdRoot+w._index}function h(w,E,P,I){I=I||{};var O=w.select("."+i.itemRectClassName),z=w.select("."+i.itemTextClassName),U=E.borderwidth,R=P.index,j=E._dims;T.setTranslate(w,U+P.x,U+P.y);var Y=-1!==["up","down"].indexOf(E.direction),B=I.height||(Y?j.heights[R]:j.height1);O.attr({x:0,y:0,width:I.width||(Y?j.width1:j.widths[R]),height:B});var V=E.font.size*t,q=(p.lineCount(z)-1)*V/2;p.positionText(z,i.textOffsetX,B/2-q+i.textOffsetY),Y?P.y+=j.heights[R]+P.yPad:P.x+=j.widths[R]+P.xPad,P.index++}function S(w,E){w.attr(i.menuIndexAttrName,E||"-1").selectAll("g."+i.dropdownButtonClassName).remove()}ne.exports=function(w){var E=w._fullLayout,P=_.filterVisible(E[i.name]);function I(V){k.autoMargin(w,b(V))}var O=E._menulayer.selectAll("g."+i.containerClassName).data(P.length>0?[0]:[]);if(O.enter().append("g").classed(i.containerClassName,!0).style("cursor","pointer"),O.exit().each(function(){M.select(this).selectAll("g."+i.headerGroupClassName).each(I)}).remove(),0!==P.length){var z=O.selectAll("g."+i.headerGroupClassName).data(P,n);z.enter().append("g").classed(i.headerGroupClassName,!0);for(var U=_.ensureSingle(O,"g",i.dropdownButtonGroupClassName,function(V){V.style("pointer-events","all")}),R=0;R<P.length;R++)v(w,P[R]);var B=new r(w,U,"updatemenus"+E._uid);z.enter().size()&&(U.node().parentNode.appendChild(U.node()),U.call(S)),z.exit().each(function(V){U.call(S),I(V)}).remove(),z.each(function(V){var q=M.select(this),ie="dropdown"===V.type?U:null;k.manageCommandObserver(w,V,V.buttons,function(te){s(w,V,0,q,ie,B,te.index,!0)}),"dropdown"===V.type?(u(w,q,U,B,V),a(U,V)&&f(w,q,U,B,V)):f(w,q,null,null,V)})}}},76908:function(ne,F,e){"use strict";var M=e(73712);ne.exports={moduleType:"component",name:M.name,layoutAttributes:e(88444),supplyLayoutDefaults:e(91384),draw:e(14420)}},37400:function(ne,F,e){"use strict";ne.exports=_;var M=e(33428),k=e(76308),o=e(43616),T=e(3400);function _(p,l,t){this.gd=p,this.container=l,this.id=t,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}_.barWidth=2,_.barLength=20,_.barRadius=2,_.barPad=1,_.barColor="#808BA4",_.prototype.enable=function(p,l,t){var i=this.gd._fullLayout,r=i.width,n=i.height;this.position=p;var a,s,u,f,c=this.position.l,y=this.position.w,d=this.position.t,m=this.position.h,g=this.position.direction,x="down"===g,v="left"===g,b="up"===g,h=y,S=m;x||v||"right"===g||b||(this.position.direction="down",x=!0),x||b?(s=(a=c)+h,x?(u=d,S=(f=Math.min(u+S,n))-u):S=(f=d+S)-(u=Math.max(f-S,0))):(f=(u=d)+S,v?h=(s=c+h)-(a=Math.max(s-h,0)):(a=c,h=(s=Math.min(a+h,r))-a)),this._box={l:a,t:u,w:h,h:S};var w=y>h,E=_.barLength+2*_.barPad,P=_.barWidth+2*_.barPad,I=c,O=d+m;O+P>n&&(O=n-P);var z=this.container.selectAll("rect.scrollbar-horizontal").data(w?[0]:[]);z.exit().on(".drag",null).remove(),z.enter().append("rect").classed("scrollbar-horizontal",!0).call(k.fill,_.barColor),w?(this.hbar=z.attr({rx:_.barRadius,ry:_.barRadius,x:I,y:O,width:E,height:P}),this._hbarXMin=I+E/2,this._hbarTranslateMax=h-E):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var U=m>S,R=_.barWidth+2*_.barPad,j=_.barLength+2*_.barPad,Y=c+y,B=d;Y+R>r&&(Y=r-R);var V=this.container.selectAll("rect.scrollbar-vertical").data(U?[0]:[]);V.exit().on(".drag",null).remove(),V.enter().append("rect").classed("scrollbar-vertical",!0).call(k.fill,_.barColor),U?(this.vbar=V.attr({rx:_.barRadius,ry:_.barRadius,x:Y,y:B,width:R,height:j}),this._vbarYMin=B+j/2,this._vbarTranslateMax=S-j):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var q=this.id,ie=a-.5,te=U?s+R+.5:s+.5,ee=u-.5,$=w?f+P+.5:f+.5,J=i._topdefs.selectAll("#"+q).data(w||U?[0]:[]);if(J.exit().remove(),J.enter().append("clipPath").attr("id",q).append("rect"),w||U?(this._clipRect=J.select("rect").attr({x:Math.floor(ie),y:Math.floor(ee),width:Math.ceil(te)-Math.floor(ie),height:Math.ceil($)-Math.floor(ee)}),this.container.call(o.setClipUrl,q,this.gd),this.bg.attr({x:c,y:d,width:y,height:m})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(o.setClipUrl,null),delete this._clipRect),w||U){var X=M.behavior.drag().on("dragstart",function(){M.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(X);var ae=M.behavior.drag().on("dragstart",function(){M.event.sourceEvent.preventDefault(),M.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));w&&this.hbar.on(".drag",null).call(ae),U&&this.vbar.on(".drag",null).call(ae)}this.setTranslate(l,t)},_.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(o.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},_.prototype._onBoxDrag=function(){var p=this.translateX,l=this.translateY;this.hbar&&(p-=M.event.dx),this.vbar&&(l-=M.event.dy),this.setTranslate(p,l)},_.prototype._onBoxWheel=function(){var p=this.translateX,l=this.translateY;this.hbar&&(p+=M.event.deltaY),this.vbar&&(l+=M.event.deltaY),this.setTranslate(p,l)},_.prototype._onBarDrag=function(){var p=this.translateX,l=this.translateY;if(this.hbar){var t=p+this._hbarXMin,i=t+this._hbarTranslateMax;p=(T.constrain(M.event.x,t,i)-t)/(i-t)*(this.position.w-this._box.w)}if(this.vbar){var r=l+this._vbarYMin,n=r+this._vbarTranslateMax;l=(T.constrain(M.event.y,r,n)-r)/(n-r)*(this.position.h-this._box.h)}this.setTranslate(p,l)},_.prototype.setTranslate=function(p,l){var t=this.position.w-this._box.w,i=this.position.h-this._box.h;p=T.constrain(p||0,0,t),l=T.constrain(l||0,0,i),this.translateX=p,this.translateY=l,this.container.call(o.setTranslate,this._box.l-this.position.l-p,this._box.t-this.position.t-l),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+p-.5),y:Math.floor(this.position.t+l-.5)}),this.hbar&&this.hbar.call(o.setTranslate,p+p/t*this._hbarTranslateMax,l),this.vbar&&this.vbar.call(o.setTranslate,p,l+l/i*this._vbarTranslateMax)}},84284:function(ne){"use strict";ne.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},36208:function(ne){"use strict";ne.exports={axisRefDescription:function(F,e,M){return["If set to a",F,"axis id (e.g. *"+F+"* or","*"+F+"2*), the `"+F+"` position refers to a",F,"coordinate. If set to *paper*, the `"+F+"`","position refers to the distance from the",e,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",e,"("+M+"). If set to a",F,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",e,"of the domain of that axis: e.g.,","*"+F+"2 domain* refers to the domain of the second",F," axis and a",F,"position of 0.5 refers to the","point between the",e,"and the",M,"of the domain of the","second",F,"axis."].join(" ")}}},48164:function(ne){"use strict";ne.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25b2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25bc"}}},26880:function(ne){"use strict";ne.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},69104:function(ne){"use strict";ne.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},99168:function(ne){"use strict";ne.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87792:function(ne){"use strict";ne.exports={circle:"\u25cf","circle-open":"\u25cb",square:"\u25a0","square-open":"\u25a1",diamond:"\u25c6","diamond-open":"\u25c7",cross:"+",x:"\u274c"}},13448:function(ne){"use strict";ne.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},39032:function(ne){"use strict";ne.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},2264:function(ne,F){"use strict";F.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]],F.STYLE=F.CSS_DECLARATIONS.map(function(e){return e.join(": ")+"; "}).join("")},9616:function(ne,F){"use strict";F.xmlns="http://www.w3.org/2000/xmlns/",F.svg="http://www.w3.org/2000/svg",F.xlink="http://www.w3.org/1999/xlink",F.svgAttrs={xmlns:F.svg,"xmlns:xlink":F.xlink}},64884:function(ne,F,e){"use strict";F.version=e(25788).version,e(88324),e(79288);for(var M=e(24040),k=F.register=M.register,o=e(22448),T=Object.keys(o),_=0;_<T.length;_++){var p=T[_];"_"!==p.charAt(0)&&(F[p]=o[p]),k({moduleType:"apiMethod",name:p,fn:o[p]})}k(e(65875)),k([e(79180),e(56864),e(22676),e(41592),e(7402),e(76908),e(97544),e(49692),e(41152),e(12704),e(64968),e(8932),e(55080),e(2780),e(93024),e(45460)]),k([e(6580),e(11680)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(k(window.PlotlyLocales),delete window.PlotlyLocales),F.Icons=e(9224);var l=e(93024),t=e(7316);F.Plots={resize:t.resize,graphJson:t.graphJson,sendDataToCloud:t.sendDataToCloud},F.Fx={hover:l.hover,unhover:l.unhover,loneHover:l.loneHover,loneUnhover:l.loneUnhover},F.Snapshot=e(78904),F.PlotSchema=e(73060)},9224:function(ne){"use strict";ne.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},98308:function(ne,F){"use strict";F.isLeftAnchor=function(e){return"left"===e.xanchor||"auto"===e.xanchor&&e.x<=.3333333333333333},F.isCenterAnchor=function(e){return"center"===e.xanchor||"auto"===e.xanchor&&e.x>.3333333333333333&&e.x<.6666666666666666},F.isRightAnchor=function(e){return"right"===e.xanchor||"auto"===e.xanchor&&e.x>=.6666666666666666},F.isTopAnchor=function(e){return"top"===e.yanchor||"auto"===e.yanchor&&e.y>=.6666666666666666},F.isMiddleAnchor=function(e){return"middle"===e.yanchor||"auto"===e.yanchor&&e.y>.3333333333333333&&e.y<.6666666666666666},F.isBottomAnchor=function(e){return"bottom"===e.yanchor||"auto"===e.yanchor&&e.y<=.3333333333333333}},11864:function(ne,F,e){"use strict";var M=e(20435),k=M.mod,o=M.modHalf,T=Math.PI,_=2*T;function p(r){return Math.abs(r[1]-r[0])>_-1e-14}function l(r,n){return o(n-r,_)}function t(r,n){if(p(n))return!0;var a,s;n[0]<n[1]?(a=n[0],s=n[1]):(a=n[1],s=n[0]),(a=k(a,_))>(s=k(s,_))&&(s+=_);var u=k(r,_),f=u+_;return u>=a&&u<=s||f>=a&&f<=s}function i(r,n,a,s,u,f,c){u=u||0,f=f||0;var y,d,m,g,x,v=p([a,s]);function b(E,P){return[E*Math.cos(P)+u,f-E*Math.sin(P)]}v?(y=0,d=T,m=_):a<s?(y=a,m=s):(y=s,m=a),r<n?(g=r,x=n):(g=n,x=r);var h,S=Math.abs(m-y)<=T?0:1;function w(E,P,I){return"A"+[E,E]+" "+[0,S,I]+" "+b(E,P)}return v?h=null===g?"M"+b(x,y)+w(x,d,0)+w(x,m,0)+"Z":"M"+b(g,y)+w(g,d,0)+w(g,m,0)+"ZM"+b(x,y)+w(x,d,1)+w(x,m,1)+"Z":null===g?(h="M"+b(x,y)+w(x,m,0),c&&(h+="L0,0Z")):h="M"+b(g,y)+"L"+b(x,y)+w(x,m,0)+"L"+b(g,m)+w(g,y,1)+"Z",h}ne.exports={deg2rad:function(r){return r/180*T},rad2deg:function(r){return r/T*180},angleDelta:l,angleDist:function(r,n){return Math.abs(l(r,n))},isFullCircle:p,isAngleInsideSector:t,isPtInsideSector:function(r,n,a,s){return!!t(n,s)&&(a[0]<a[1]?(u=a[0],f=a[1]):(u=a[1],f=a[0]),r>=u&&r<=f);var u,f},pathArc:function(r,n,a,s,u){return i(null,r,n,a,s,u,0)},pathSector:function(r,n,a,s,u){return i(null,r,n,a,s,u,1)},pathAnnulus:function(r,n,a,s,u,f){return i(r,n,a,s,u,f,1)}}},38116:function(ne,F,e){"use strict";var M=e(83160).decode,k=e(63620),o=Array.isArray,T=ArrayBuffer,_=DataView;function p(n){return T.isView(n)&&!(n instanceof _)}function l(n){return o(n)||p(n)}F.isTypedArray=p,F.isArrayOrTypedArray=l,F.isArray1D=function(n){return!l(n[0])},F.ensureArray=function(n,a){return o(n)||(n=[]),n.length=a,n};var t={u1c:typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray,i1:typeof Int8Array>"u"?void 0:Int8Array,u1:typeof Uint8Array>"u"?void 0:Uint8Array,i2:typeof Int16Array>"u"?void 0:Int16Array,u2:typeof Uint16Array>"u"?void 0:Uint16Array,i4:typeof Int32Array>"u"?void 0:Int32Array,u4:typeof Uint32Array>"u"?void 0:Uint32Array,f4:typeof Float32Array>"u"?void 0:Float32Array,f8:typeof Float64Array>"u"?void 0:Float64Array};function i(n){return n.constructor===ArrayBuffer}function r(n,a,s){if(l(n)){if(l(n[0])){for(var u=s,f=0;f<n.length;f++)u=a(u,n[f].length);return u}return n.length}return 0}t.uint8c=t.u1c,t.uint8=t.u1,t.int8=t.i1,t.uint16=t.u2,t.int16=t.i2,t.uint32=t.u4,t.int32=t.i4,t.float32=t.f4,t.float64=t.f8,F.isArrayBuffer=i,F.decodeTypedArraySpec=function(n){var E,a=[],s={bdata:(E=n).bdata,dtype:E.dtype,shape:E.shape},u=s.dtype,f=t[u];if(!f)throw new Error('Error in dtype: "'+u+'"');var c=f.BYTES_PER_ELEMENT,y=s.bdata;i(y)||(y=M(y));var d=void 0===s.shape?[y.byteLength/c]:(""+s.shape).split(",");d.reverse();var m,g,x=d.length,v=+d[0],b=c*v,h=0;if(1===x)a=new f(y);else if(2===x)for(m=+d[1],g=0;g<m;g++)a[g]=new f(y,h,v),h+=b;else{if(3!==x)throw new Error("ndim: "+x+'is not supported with the shape:"'+s.shape+'"');m=+d[1];for(var S=+d[2],w=0;w<S;w++)for(a[w]=[],g=0;g<m;g++)a[w][g]=new f(y,h,v),h+=b}return a.bdata=s.bdata,a.dtype=s.dtype,a.shape=d.reverse().join(","),n._inputArray=a,a},F.isTypedArraySpec=function(n){return k(n)&&n.hasOwnProperty("dtype")&&"string"==typeof n.dtype&&n.hasOwnProperty("bdata")&&("string"==typeof n.bdata||i(n.bdata))&&(void 0===n.shape||n.hasOwnProperty("shape")&&("string"==typeof n.shape||"number"==typeof n.shape))},F.concat=function(){var n,a,s,u,f,c,y,d,m=[],g=!0,x=0;for(s=0;s<arguments.length;s++)(c=(u=arguments[s]).length)&&(a?m.push(u):(a=u,f=c),o(u)?n=!1:(g=!1,x?n!==u.constructor&&(n=!1):n=u.constructor),x+=c);if(!x)return[];if(!m.length)return a;if(g)return a.concat.apply(a,m);if(n){for((y=new n(x)).set(a),s=0;s<m.length;s++)y.set(u=m[s],f),f+=u.length;return y}for(y=new Array(x),d=0;d<a.length;d++)y[d]=a[d];for(s=0;s<m.length;s++){for(u=m[s],d=0;d<u.length;d++)y[f+d]=u[d];f+=d}return y},F.maxRowLength=function(n){return r(n,Math.max,0)},F.minRowLength=function(n){return r(n,Math.min,1/0)}},54037:function(ne,F,e){"use strict";var M=e(38248),k=e(39032).BADNUM,o=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;ne.exports=function(T){return"string"==typeof T&&(T=T.replace(o,"")),M(T)?Number(T):k}},73696:function(ne){"use strict";ne.exports=function(F){var e=F._fullLayout;e._glcanvas&&e._glcanvas.size()&&e._glcanvas.each(function(M){M.regl&&M.regl.clear({color:!0,depth:!0})})}},75352:function(ne){"use strict";ne.exports=function(F){F._responsiveChartHandler&&(window.removeEventListener("resize",F._responsiveChartHandler),delete F._responsiveChartHandler)}},63064:function(ne,F,e){"use strict";var M=e(38248),k=e(49760),o=e(92880).extendFlat,T=e(45464),_=e(88304),p=e(76308),l=e(13448).DESELECTDIM,t=e(22296),i=e(53756).counter,r=e(20435).modHalf,n=e(38116).isArrayOrTypedArray,a=e(38116).isTypedArraySpec,s=e(38116).decodeTypedArraySpec;function u(f,c){var y=F.valObjectMeta[c.valType];if(c.arrayOk&&n(f))return!0;if(y.validateFunction)return y.validateFunction(f,c);var d={},m=d;return y.coerceFunction(f,{set:function(x){m=x}},d,c),m!==d}F.valObjectMeta={data_array:{coerceFunction:function(f,c,y){c.set(n(f)?f:a(f)?s(f):y)}},enumerated:{coerceFunction:function(f,c,y,d){d.coerceNumber&&(f=+f),-1===d.values.indexOf(f)?c.set(y):c.set(f)},validateFunction:function(f,c){c.coerceNumber&&(f=+f);for(var y=c.values,d=0;d<y.length;d++){var m=String(y[d]);if("/"===m.charAt(0)&&"/"===m.charAt(m.length-1)){if(new RegExp(m.substr(1,m.length-2)).test(f))return!0}else if(f===y[d])return!0}return!1}},boolean:{coerceFunction:function(f,c,y){c.set(!0===f||!1===f?f:y)}},number:{coerceFunction:function(f,c,y,d){a(f)&&(f=s(f)),!M(f)||void 0!==d.min&&f<d.min||void 0!==d.max&&f>d.max?c.set(y):c.set(+f)}},integer:{coerceFunction:function(f,c,y,d){-1===(d.extras||[]).indexOf(f)?(a(f)&&(f=s(f)),f%1||!M(f)||void 0!==d.min&&f<d.min||void 0!==d.max&&f>d.max?c.set(y):c.set(+f)):c.set(f)}},string:{coerceFunction:function(f,c,y,d){c.set("string"!=typeof f?!0!==d.strict&&"number"==typeof f?String(f):y:d.noBlank&&!f?y:f)}},color:{coerceFunction:function(f,c,y){a(f)&&(f=s(f)),k(f).isValid()?c.set(f):c.set(y)}},colorlist:{coerceFunction:function(f,c,y){Array.isArray(f)&&f.length&&f.every(function(d){return k(d).isValid()})?c.set(f):c.set(y)}},colorscale:{coerceFunction:function(f,c,y){c.set(_.get(f,y))}},angle:{coerceFunction:function(f,c,y){a(f)&&(f=s(f)),"auto"===f?c.set("auto"):M(f)?c.set(r(+f,360)):c.set(y)}},subplotid:{coerceFunction:function(f,c,y,d){var m=d.regex||i(y);"string"==typeof f&&m.test(f)?c.set(f):c.set(y)},validateFunction:function(f,c){var y=c.dflt;return f===y||"string"==typeof f&&!!i(y).test(f)}},flaglist:{coerceFunction:function(f,c,y,d){if(-1===(d.extras||[]).indexOf(f))if("string"==typeof f){for(var m=f.split("+"),g=0;g<m.length;){var x=m[g];-1===d.flags.indexOf(x)||m.indexOf(x)<g?m.splice(g,1):g++}c.set(m.length?m.join("+"):y)}else c.set(y);else c.set(f)}},any:{coerceFunction:function(f,c,y){c.set(void 0===f?y:a(f)?s(f):f)}},info_array:{coerceFunction:function(f,c,y,d){function m(R,j,Y){var B;return void 0===Y&&(Y=j.dflt),F.valObjectMeta[j.valType].coerceFunction(R,{set:function(q){B=q}},Y,j),B}if(a(f)&&(f=s(f)),n(f)){var g,x,v,h,S,w=2===d.dimensions||"1-2"===d.dimensions&&Array.isArray(f)&&n(f[0]),E=d.items,P=[],I=Array.isArray(E),O=I&&w&&n(E[0]),z=w&&I&&!O,U=I&&!z?E.length:f.length;if(y=Array.isArray(y)?y:[],w)for(g=0;g<U;g++)for(P[g]=[],v=n(f[g])?f[g]:[],h=z?E.length:I?E[g].length:v.length,x=0;x<h;x++)void 0!==(S=m(v[x],z?E[x]:I?E[g][x]:E,(y[g]||[])[x]))&&(P[g][x]=S);else for(g=0;g<U;g++)void 0!==(S=m(f[g],I?E[g]:E,y[g]))&&(P[g]=S);c.set(P)}else c.set(y)},validateFunction:function(f,c){if(!n(f))return!1;var y=c.items,d=Array.isArray(y),m=2===c.dimensions;if(!c.freeLength&&f.length!==y.length)return!1;for(var g=0;g<f.length;g++)if(m){if(!n(f[g])||!c.freeLength&&f[g].length!==y[g].length)return!1;for(var x=0;x<f[g].length;x++)if(!u(f[g][x],d?y[g][x]:y))return!1}else if(!u(f[g],d?y[g]:y))return!1;return!0}}},F.coerce=function(f,c,y,d,m){var g=t(y,d).get(),x=t(f,d),v=t(c,d),b=x.get(),h=c._template;if(void 0===b&&h&&(b=t(h,d).get(),h=0),void 0===m&&(m=g.dflt),g.arrayOk){if(n(b))return v.set(b),b;if(a(b))return b=s(b),v.set(b),b}var S=F.valObjectMeta[g.valType].coerceFunction;S(b,v,m,g);var w=v.get();return h&&w===m&&!u(b,g)&&(S(b=t(h,d).get(),v,m,g),w=v.get()),w},F.coerce2=function(f,c,y,d,m){var g=t(f,d),x=F.coerce(f,c,y,d,m);return null!=g.get()&&x},F.coerceFont=function(f,c,y,d){d||(d={}),y=o({},y);var m={family:f(c+".family",(y=o(y,d.overrideDflt||{})).family),size:f(c+".size",y.size),color:f(c+".color",y.color),weight:f(c+".weight",y.weight),style:f(c+".style",y.style)};if(d.noFontVariant||(m.variant=f(c+".variant",y.variant)),d.noFontLineposition||(m.lineposition=f(c+".lineposition",y.lineposition)),d.noFontTextcase||(m.textcase=f(c+".textcase",y.textcase)),!d.noFontShadow){var g=y.shadow;"none"===g&&d.autoShadowDflt&&(g="auto"),m.shadow=f(c+".shadow",g)}return m},F.coercePattern=function(f,c,y,d){if(f(c+".shape")){f(c+".solidity"),f(c+".size");var m="overlay"===f(c+".fillmode");if(!d){var g=f(c+".bgcolor",m?y:void 0);f(c+".fgcolor",m?p.contrast(g):y)}f(c+".fgopacity",m?.5:1)}},F.coerceHoverinfo=function(f,c,y){var d,m=c._module.attributes,g=m.hoverinfo?m:T,x=g.hoverinfo;if(1===y._dataLength){var v="all"===x.dflt?x.flags.slice():x.dflt.split("+");v.splice(v.indexOf("name"),1),d=v.join("+")}return F.coerce(f,c,g,"hoverinfo",d)},F.coerceSelectionMarkerOpacity=function(f,c){if(f.marker){var y,d,m=f.marker.opacity;void 0!==m&&(n(m)||f.selected||f.unselected||(y=m,d=l*m),c("selected.marker.opacity",y),c("unselected.marker.opacity",d))}},F.validate=u},67555:function(ne,F,e){"use strict";var M,k,o=e(94336).Yn,T=e(38248),_=e(24248),p=e(20435).mod,l=e(39032),t=l.BADNUM,i=l.ONEDAY,r=l.ONEHOUR,n=l.ONEMIN,a=l.ONESEC,s=l.EPOCHJD,u=e(24040),f=e(94336).E9,c=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,y=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,d=(new Date).getFullYear()-70;function m(z){return z&&u.componentsRegistry.calendars&&"string"==typeof z&&"gregorian"!==z}function g(z,U){return String(z+Math.pow(10,U)).substr(1)}F.dateTick0=function(z,U){var Y,B,R=(B=!!U,m(Y=z)?B?u.getComponentMethod("calendars","CANONICAL_SUNDAY")[Y]:u.getComponentMethod("calendars","CANONICAL_TICK")[Y]:B?"2000-01-02":"2000-01-01");if(U<2)return R;var j=F.dateTime2ms(R,z);return F.ms2DateTime(j+=i*(U-1),0,z)},F.dfltRange=function(z){return m(z)?u.getComponentMethod("calendars","DFLTRANGE")[z]:["2000-01-01","2001-01-01"]},F.isJSDate=function(z){return"object"==typeof z&&null!==z&&"function"==typeof z.getTime},F.dateTime2ms=function(z,U){if(F.isJSDate(z)){var R=z.getTimezoneOffset()*n,j=(z.getUTCMinutes()-z.getMinutes())*n+(z.getUTCSeconds()-z.getSeconds())*a+(z.getUTCMilliseconds()-z.getMilliseconds());if(j){var Y=3*n;R=R-Y/2+p(j-R+Y/2,Y)}return(z=Number(z)-R)>=M&&z<=k?z:t}if("string"!=typeof z&&"number"!=typeof z)return t;z=String(z);var B=m(U),V=z.charAt(0);!B||"G"!==V&&"g"!==V||(z=z.substr(1),U="");var q=B&&"chinese"===U.substr(0,7),ie=z.match(q?y:c);if(!ie)return t;var te=ie[1],ee=ie[3]||"1",$=Number(ie[5]||1),J=Number(ie[7]||0),X=Number(ie[9]||0),ae=Number(ie[11]||0);if(B){if(2===te.length)return t;var ce;te=Number(te);try{var le=u.getComponentMethod("calendars","getCal")(U);if(q){var pe="i"===ee.charAt(ee.length-1);ee=parseInt(ee,10),ce=le.newDate(te,le.toMonthIndex(te,ee,pe),$)}else ce=le.newDate(te,Number(ee),$)}catch{return t}return ce?(ce.toJD()-s)*i+J*r+X*n+ae*a:t}te=2===te.length?(Number(te)+2e3-d)%100+d:Number(te),ee-=1;var we=new Date(Date.UTC(2e3,ee,$,J,X));return we.setUTCFullYear(te),we.getUTCMonth()!==ee||we.getUTCDate()!==$?t:we.getTime()+ae*a},M=F.MIN_MS=F.dateTime2ms("-9999"),k=F.MAX_MS=F.dateTime2ms("9999-12-31 23:59:59.9999"),F.isDateTime=function(z,U){return F.dateTime2ms(z,U)!==t};var x=90*i,v=3*r,b=5*n;function h(z,U,R,j,Y){if((U||R||j||Y)&&(z+=" "+g(U,2)+":"+g(R,2),(j||Y)&&(z+=":"+g(j,2),Y))){for(var B=4;Y%10==0;)B-=1,Y/=10;z+="."+g(Y,B)}return z}F.ms2DateTime=function(z,U,R){if("number"!=typeof z||!(z>=M&&z<=k))return t;U||(U=0);var j,Y,B,V,q,ie,te=Math.floor(10*p(z+.05,1)),ee=Math.round(z-te/10);if(m(R)){var $=Math.floor(ee/i)+s,J=Math.floor(p(z,i));try{j=u.getComponentMethod("calendars","getCal")(R).fromJD($).formatDate("yyyy-mm-dd")}catch{j=f("G%Y-%m-%d")(new Date(ee))}if("-"===j.charAt(0))for(;j.length<11;)j="-0"+j.substr(1);else for(;j.length<10;)j="0"+j;Y=U<x?Math.floor(J/r):0,B=U<x?Math.floor(J%r/n):0,V=U<v?Math.floor(J%n/a):0,q=U<b?J%a*10+te:0}else ie=new Date(ee),j=f("%Y-%m-%d")(ie),Y=U<x?ie.getUTCHours():0,B=U<x?ie.getUTCMinutes():0,V=U<v?ie.getUTCSeconds():0,q=U<b?10*ie.getUTCMilliseconds()+te:0;return h(j,Y,B,V,q)},F.ms2DateTimeLocal=function(z){if(!(z>=M+i&&z<=k-i))return t;var U=Math.floor(10*p(z+.05,1)),R=new Date(Math.round(z-U/10));return h(o("%Y-%m-%d")(R),R.getHours(),R.getMinutes(),R.getSeconds(),10*R.getUTCMilliseconds()+U)},F.cleanDate=function(z,U,R){if(z===t)return U;if(F.isJSDate(z)||"number"==typeof z&&isFinite(z)){if(m(R))return _.error("JS Dates and milliseconds are incompatible with world calendars",z),U;if(!(z=F.ms2DateTimeLocal(+z))&&void 0!==U)return U}else if(!F.isDateTime(z,R))return _.error("unrecognized date",z),U;return z};var S=/%\d?f/g,w=/%h/g,E={1:"1",2:"1",3:"2",4:"2"};function P(z,U,R,j){z=z.replace(S,function(B){var V=Math.min(+B.charAt(1)||6,6);return(U/1e3%1+2).toFixed(V).substr(2).replace(/0+$/,"")||"0"});var Y=new Date(Math.floor(U+.05));if(z=z.replace(w,function(){return E[R("%q")(Y)]}),m(j))try{z=u.getComponentMethod("calendars","worldCalFmt")(z,U,j)}catch{return"Invalid"}return R(z)(Y)}var I=[59,59.9,59.99,59.999,59.9999];F.formatDate=function(z,U,R,j,Y,B){if(Y=m(Y)&&Y,!U)if("y"===R)U=B.year;else if("m"===R)U=B.month;else{if("d"!==R)return function(V,q){var ie=p(V+.05,i),te=g(Math.floor(ie/r),2)+":"+g(p(Math.floor(ie/n),60),2);if("M"!==q){T(q)||(q=0);var ee=(100+Math.min(p(V/a,60),I[q])).toFixed(q).substr(1);q>0&&(ee=ee.replace(/0+$/,"").replace(/[\.]$/,"")),te+=":"+ee}return te}(z,R)+"\n"+P(B.dayMonthYear,z,j,Y);U=B.dayMonth+"\n"+B.year}return P(U,z,j,Y)};var O=3*i;F.incrementMonth=function(z,U,R){R=m(R)&&R;var j=p(z,i);if(z=Math.round(z-j),R)try{var Y=Math.round(z/i)+s,B=u.getComponentMethod("calendars","getCal")(R),V=B.fromJD(Y);return U%12?B.add(V,U,"m"):B.add(V,U/12,"y"),(V.toJD()-s)*i+j}catch{_.error("invalid ms "+z+" in calendar "+R)}var q=new Date(z+O);return q.setUTCMonth(q.getUTCMonth()+U)+j-O},F.findExactDates=function(z,U){for(var R,j,Y=0,B=0,V=0,q=0,ie=m(U)&&u.getComponentMethod("calendars","getCal")(U),te=0;te<z.length;te++)if(T(j=z[te])){if(!(j%i))if(ie)try{1===(R=ie.fromJD(j/i+s)).day()?1===R.month()?Y++:B++:V++}catch{}else 1===(R=new Date(j)).getUTCDate()?0===R.getUTCMonth()?Y++:B++:V++}else q++;V+=B+=Y;var ee=z.length-q;return{exactYears:Y/ee,exactMonths:B/ee,exactDays:V/ee}}},52200:function(ne,F,e){"use strict";var M=e(33428),k=e(24248),o=e(52248),T=e(36524);function _(r){var n=r&&r.parentNode;n&&n.removeChild(r)}function p(r,n,a){var s="plotly.js-style-"+r,u=document.getElementById(s);u||((u=document.createElement("style")).setAttribute("id",s),u.appendChild(document.createTextNode("")),document.head.appendChild(u));var f=u.sheet;f.insertRule?f.insertRule(n+"{"+a+"}",0):f.addRule?f.addRule(n,a,0):k.warn("addStyleRule failed")}function l(r){var n=window.getComputedStyle(r,null),a=n.getPropertyValue("-webkit-transform")||n.getPropertyValue("-moz-transform")||n.getPropertyValue("-ms-transform")||n.getPropertyValue("-o-transform")||n.getPropertyValue("transform");return"none"===a?null:a.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(s){return+s})}function t(r){for(var n=[];i(r);)n.push(r),r=r.parentNode,"function"==typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host);return n}function i(r){return r&&(r instanceof Element||r instanceof HTMLElement)}ne.exports={getGraphDiv:function(r){var n;if("string"==typeof r){if(null===(n=document.getElementById(r)))throw new Error("No DOM element with id '"+r+"' exists on the page.");return n}if(null==r)throw new Error("DOM element provided is null or undefined");return r},isPlotDiv:function(r){var n=M.select(r);return n.node()instanceof HTMLElement&&n.size()&&n.classed("js-plotly-plot")},removeElement:_,addStyleRule:function(r,n){p("global",r,n)},addRelatedStyleRule:p,deleteRelatedStyleRule:function(r){var a=document.getElementById("plotly.js-style-"+r);a&&_(a)},getFullTransformMatrix:function(r){var n=t(r),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return n.forEach(function(s){var u=l(s);if(u){var f=o.convertCssMatrix(u);a=T.multiply(a,a,f)}}),a},getElementTransformMatrix:l,getElementAndAncestors:t,equalDomRects:function(r,n){return r&&n&&r.top===n.top&&r.left===n.left&&r.right===n.right&&r.bottom===n.bottom}}},95924:function(ne,F,e){"use strict";var M=e(61252).EventEmitter;ne.exports={init:function(o){if(o._ev instanceof M)return o;var T=new M,_=new M;return o._ev=T,o._internalEv=_,o.on=T.on.bind(T),o.once=T.once.bind(T),o.removeListener=T.removeListener.bind(T),o.removeAllListeners=T.removeAllListeners.bind(T),o._internalOn=_.on.bind(_),o._internalOnce=_.once.bind(_),o._removeInternalListener=_.removeListener.bind(_),o._removeAllInternalListeners=_.removeAllListeners.bind(_),o.emit=function(p,l){typeof jQuery<"u"&&jQuery(o).trigger(p,l),T.emit(p,l),_.emit(p,l)},o},triggerHandler:function(o,T,_){var p,l;typeof jQuery<"u"&&(p=jQuery(o).triggerHandler(T,_));var t=o._ev;if(!t)return p;var i,r=t._events[T];if(!r)return p;function n(a){return a.listener?(t.removeListener(T,a.listener),a.fired?void 0:(a.fired=!0,a.listener.apply(t,[_]))):a.apply(t,[_])}for(r=Array.isArray(r)?r:[r],i=0;i<r.length-1;i++)n(r[i]);return l=n(r[i]),void 0!==p?p:l},purge:function(o){return delete o._ev,delete o.on,delete o.once,delete o.removeListener,delete o.removeAllListeners,delete o.emit,delete o._ev,delete o._internalEv,delete o._internalOn,delete o._internalOnce,delete o._removeInternalListener,delete o._removeAllInternalListeners,o}}},92880:function(ne,F,e){"use strict";var M=e(63620),k=Array.isArray;function o(T,_,p,l){var t,i,r,n,a,s,f=T[0],c=T.length;if(2===c&&k(f)&&k(T[1])&&0===f.length){if(function(d,m){var g,x;for(g=0;g<d.length;g++){if(null!==(x=d[g])&&"object"==typeof x)return!1;void 0!==x&&(m[g]=x)}return!0}(T[1],f))return f;f.splice(0,f.length)}for(var y=1;y<c;y++)for(i in t=T[y])r=f[i],n=t[i],l&&k(n)?f[i]=n:_&&n&&(M(n)||(a=k(n)))?(a?(a=!1,s=r&&k(r)?r:[]):s=r&&M(r)?r:{},f[i]=o([s,n],_,p,l)):(void 0!==n||p)&&(f[i]=n);return f}F.extendFlat=function(){return o(arguments,!1,!1,!1)},F.extendDeep=function(){return o(arguments,!0,!1,!1)},F.extendDeepAll=function(){return o(arguments,!0,!0,!1)},F.extendDeepNoArrays=function(){return o(arguments,!0,!1,!0)}},68944:function(ne){"use strict";ne.exports=function(F){for(var e={},M=[],k=0,o=0;o<F.length;o++){var T=F[o];1!==e[T]&&(e[T]=1,M[k++]=T)}return M}},43880:function(ne){"use strict";function F(M){return!0===M.visible}function e(M){var k=M[0].trace;return!0===k.visible&&0!==k._length}ne.exports=function(M){for(var k,o=(k=M,Array.isArray(k)&&Array.isArray(k[0])&&k[0][0]&&k[0][0].trace?e:F),T=[],_=0;_<M.length;_++){var p=M[_];o(p)&&T.push(p)}return T}},27144:function(ne,F,e){"use strict";var M=e(33428),k=e(36116),o=e(40440),T=e(77844),_=e(42428),p=e(35536),l=e(24248),t=e(63620),i=e(22296),r=e(92065),n=Object.keys(k),a={"ISO-3":p,"USA-states":p,"country names":function(u){for(var f=0;f<n.length;f++){var c=n[f];if(new RegExp(k[c]).test(u.trim().toLowerCase()))return c}return l.log("Unrecognized country name: "+u+"."),!1}};function s(u){var f=u.geojson,c=window.PlotlyGeoAssets||{},y="string"==typeof f?c[f]:f;return t(y)?y:(l.error("Oops ... something went wrong when fetching "+f),!1)}ne.exports={locationToFeature:function(u,f,c){if(!f||"string"!=typeof f)return!1;var y,d,m,g=a[u](f);if(g){if("USA-states"===u)for(y=[],m=0;m<c.length;m++)(d=c[m]).properties&&d.properties.gu&&"USA"===d.properties.gu&&y.push(d);else y=c;for(m=0;m<y.length;m++)if((d=y[m]).id===g)return d;l.log(["Location with id",g,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(u){var f,c,y,d,m=u.geometry,g=m.coordinates,x=u.id,v=[];function b(h){for(var S=0;S<h.length-1;S++)if(h[S][0]>0&&h[S+1][0]<0)return S;return null}switch(f="RUS"===x||"FJI"===x?function(h){var S;if(null===b(h))S=h;else for(S=new Array(h.length),d=0;d<h.length;d++)S[d]=[h[d][0]<0?h[d][0]+360:h[d][0],h[d][1]];v.push(r.tester(S))}:"ATA"===x?function(h){var S=b(h);if(null===S)return v.push(r.tester(h));var w=new Array(h.length+1),E=0;for(d=0;d<h.length;d++)d>S?w[E++]=[h[d][0]+360,h[d][1]]:d===S?(w[E++]=h[d],w[E++]=[h[d][0],-90]):w[E++]=h[d];var P=r.tester(w);P.pts.pop(),v.push(P)}:function(h){v.push(r.tester(h))},m.type){case"MultiPolygon":for(c=0;c<g.length;c++)for(y=0;y<g[c].length;y++)f(g[c][y]);break;case"Polygon":for(c=0;c<g.length;c++)f(g[c])}return v},getTraceGeojson:s,extractTraceFeature:function(u){var f=u[0].trace,c=s(f);if(!c)return!1;var y,d={},m=[];for(y=0;y<f._length;y++){var g=u[y];(g.loc||0===g.loc)&&(d[g.loc]=g)}function x(h){var S=i(h,f.featureidkey||"id").get(),w=d[S];if(w){var E=h.geometry;if("Polygon"===E.type||"MultiPolygon"===E.type){var P={type:"Feature",id:S,geometry:E,properties:{}};P.properties.ct=function(I){var O,z=I.geometry;if("MultiPolygon"===z.type)for(var U=z.coordinates,R=0,j=0;j<U.length;j++){var Y={type:"Polygon",coordinates:U[j]},B=o.default(Y);B>R&&(R=B,O=Y)}else O=z;return T.default(O).geometry.coordinates}(P),w.fIn=h,w.fOut=P,m.push(P)}else l.log(["Location",w.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete d[S]}switch(c.type){case"FeatureCollection":var v=c.features;for(y=0;y<v.length;y++)x(v[y]);break;case"Feature":x(c);break;default:return l.warn(["Invalid GeoJSON type",(c.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var b in d)l.log(["Location *"+b+"*","does not have a matching feature with id-key","*"+f.featureidkey+"*."].join(" "));return m},fetchTraceGeoData:function(u){var f=window.PlotlyGeoAssets||{},c=[];function y(x){return new Promise(function(v,b){M.json(x,function(h,S){return h?(delete f[x],b(new Error(404===h.status?'GeoJSON at URL "'+x+'" does not exist.':"Unexpected error while fetching from "+x))):(f[x]=S,v(S))})})}function d(x){return new Promise(function(v,b){var h=0,S=setInterval(function(){return f[x]&&"pending"!==f[x]?(clearInterval(S),v(f[x])):h>100?(clearInterval(S),b("Unexpected error while fetching from "+x)):void h++},50)})}for(var m=0;m<u.length;m++){var g=u[m][0].trace.geojson;"string"==typeof g&&(f[g]?"pending"===f[g]&&c.push(d(g)):(f[g]="pending",c.push(y(g))))}return c},computeBbox:function(u){return _.default(u)}}},44808:function(ne,F,e){"use strict";var M=e(39032).BADNUM;F.calcTraceToLineCoords=function(k){for(var o=k[0].trace.connectgaps,T=[],_=[],p=0;p<k.length;p++){var l=k[p].lonlat;l[0]!==M?_.push(l):!o&&_.length>0&&(T.push(_),_=[])}return _.length>0&&T.push(_),T},F.makeLine=function(k){return 1===k.length?{type:"LineString",coordinates:k[0]}:{type:"MultiLineString",coordinates:k}},F.makePolygon=function(k){if(1===k.length)return{type:"Polygon",coordinates:k};for(var o=new Array(k.length),T=0;T<k.length;T++)o[T]=[k[T]];return{type:"MultiPolygon",coordinates:o}},F.makeBlank=function(){return{type:"Point",coordinates:[]}}},92348:function(ne,F,e){"use strict";var M,k,o,T=e(20435).mod;function _(l,t,i,r,n,a,s,u){var f=i-l,c=n-l,y=s-n,d=r-t,m=a-t,g=u-a,x=f*g-y*d;if(0===x)return null;var v=(c*g-y*m)/x,b=(c*d-f*m)/x;return b<0||b>1||v<0||v>1?null:{x:l+f*v,y:t+d*v}}function p(l,t,i,r,n){var a=r*l+n*t;if(a<0)return r*r+n*n;if(a>i){var s=r-l,u=n-t;return s*s+u*u}var f=r*t-n*l;return f*f/i}F.segmentsIntersect=_,F.segmentDistance=function(l,t,i,r,n,a,s,u){if(_(l,t,i,r,n,a,s,u))return 0;var f=i-l,c=r-t,y=s-n,d=u-a,m=f*f+c*c,g=y*y+d*d,x=Math.min(p(f,c,m,n-l,a-t),p(f,c,m,s-l,u-t),p(y,d,g,l-n,t-a),p(y,d,g,i-n,r-a));return Math.sqrt(x)},F.getTextLocation=function(l,t,i,r){if(l===k&&r===o||(M={},k=l,o=r),M[i])return M[i];var n=l.getPointAtLength(T(i-r/2,t)),a=l.getPointAtLength(T(i+r/2,t)),s=Math.atan((a.y-n.y)/(a.x-n.x)),u=l.getPointAtLength(T(i,t)),f={x:(4*u.x+n.x+a.x)/6,y:(4*u.y+n.y+a.y)/6,theta:s};return M[i]=f,f},F.clearLocationCache=function(){k=null},F.getVisibleSegment=function(l,t,i){var r,n,a=t.left,s=t.right,u=t.top,f=t.bottom,c=0,y=l.getTotalLength(),d=y;function m(x){var v=l.getPointAtLength(x);0===x?r=v:x===y&&(n=v);var b=v.x<a?a-v.x:v.x>s?v.x-s:0,h=v.y<u?u-v.y:v.y>f?v.y-f:0;return Math.sqrt(b*b+h*h)}for(var g=m(c);g;){if((c+=g+i)>d)return;g=m(c)}for(g=m(d);g;){if(c>(d-=g+i))return;g=m(d)}return{min:c,max:d,len:d-c,total:y,isClosed:0===c&&d===y&&Math.abs(r.x-n.x)<.1&&Math.abs(r.y-n.y)<.1}},F.findPointOnPath=function(l,t,i,r){for(var n,a,s,u=(r=r||{}).pathLength||l.getTotalLength(),f=r.tolerance||.001,c=r.iterationLimit||30,y=l.getPointAtLength(0)[i]>l.getPointAtLength(u)[i]?-1:1,d=0,m=0,g=u;d<c;){if(s=(a=l.getPointAtLength(n=(m+g)/2))[i]-t,Math.abs(s)<f)return a;y*s>0?g=n:m=n,d++}return a}},33040:function(ne,F,e){"use strict";var M=e(38248),k=e(49760),o=e(72160),T=e(8932),_=e(22548).defaultLine,p=e(38116).isArrayOrTypedArray,l=o(_);function t(n,a){var s=n;return s[3]*=a,s}function i(n){if(M(n))return l;var a=o(n);return a.length?a:l}function r(n){return M(n)?n:1}ne.exports={formatColor:function(n,a,s){var u=n.color;u&&u._inputArray&&(u=u._inputArray);var f,c,y,d,m,g=p(u),x=p(a),v=T.extractOpts(n),b=[];if(f=void 0!==v.colorscale?T.makeColorScaleFuncFromTrace(n):i,c=g?function(S,w){return void 0===S[w]?l:o(f(S[w]))}:i,y=x?function(S,w){return void 0===S[w]?1:r(S[w])}:r,g||x)for(var h=0;h<s;h++)d=c(u,h),m=y(a,h),b[h]=t(d,m);else b=t(o(u),a);return b},parseColorScale:function(n){var a=T.extractOpts(n),s=a.colorscale;return a.reversescale&&(s=T.flipScale(a.colorscale)),s.map(function(u){var f=u[0],c=k(u[1]).toRgb();return{index:f,rgb:[c.r,c.g,c.b,c.a]}})}}},71688:function(ne,F,e){"use strict";var M=e(35536);function k(o){return[o]}ne.exports={keyFun:function(o){return o.key},repeat:k,descend:M,wrap:k,unwrap:function(o){return o[0]}}},35536:function(ne){"use strict";ne.exports=function(F){return F}},1396:function(ne){"use strict";ne.exports=function(F,e){if(!e)return F;var M=1/Math.abs(e),k=M>1?(M*F+M*e)/M:F+e,o=String(k).length;if(o>16){var T=String(e).length;if(o>=String(F).length+T){var _=parseFloat(k).toPrecision(12);-1===_.indexOf("e+")&&(k=+_)}}return k}},3400:function(ne,F,e){"use strict";var M=e(33428),k=e(94336).E9,o=e(57624).E9,T=e(38248),_=e(39032),p=_.FP_SAFE,l=-p,t=_.BADNUM,i=ne.exports={};i.adjustFormat=function(J){return!J||/^\d[.]\df/.test(J)||/[.]\d%/.test(J)?J:"0.f"===J?"~f":/^\d%/.test(J)?"~%":/^\ds/.test(J)?"~s":!/^[~,.0$]/.test(J)&&/[&fps]/.test(J)?"~"+J:J};var r={};i.warnBadFormat=function(J){var X=String(J);r[X]||(r[X]=1,i.warn('encountered bad format: "'+X+'"'))},i.noFormat=function(J){return String(J)},i.numberFormat=function(J){var X;try{X=o(i.adjustFormat(J))}catch{return i.warnBadFormat(J),i.noFormat}return X},i.nestedProperty=e(22296),i.keyedContainer=e(37804),i.relativeAttr=e(23193),i.isPlainObject=e(63620),i.toLogRange=e(36896),i.relinkPrivateKeys=e(51528);var n=e(38116);i.isArrayBuffer=n.isArrayBuffer,i.isTypedArray=n.isTypedArray,i.isArrayOrTypedArray=n.isArrayOrTypedArray,i.isArray1D=n.isArray1D,i.ensureArray=n.ensureArray,i.concat=n.concat,i.maxRowLength=n.maxRowLength,i.minRowLength=n.minRowLength;var a=e(20435);i.mod=a.mod,i.modHalf=a.modHalf;var s=e(63064);i.valObjectMeta=s.valObjectMeta,i.coerce=s.coerce,i.coerce2=s.coerce2,i.coerceFont=s.coerceFont,i.coercePattern=s.coercePattern,i.coerceHoverinfo=s.coerceHoverinfo,i.coerceSelectionMarkerOpacity=s.coerceSelectionMarkerOpacity,i.validate=s.validate;var u=e(67555);i.dateTime2ms=u.dateTime2ms,i.isDateTime=u.isDateTime,i.ms2DateTime=u.ms2DateTime,i.ms2DateTimeLocal=u.ms2DateTimeLocal,i.cleanDate=u.cleanDate,i.isJSDate=u.isJSDate,i.formatDate=u.formatDate,i.incrementMonth=u.incrementMonth,i.dateTick0=u.dateTick0,i.dfltRange=u.dfltRange,i.findExactDates=u.findExactDates,i.MIN_MS=u.MIN_MS,i.MAX_MS=u.MAX_MS;var f=e(14952);i.findBin=f.findBin,i.sorterAsc=f.sorterAsc,i.sorterDes=f.sorterDes,i.distinctVals=f.distinctVals,i.roundUp=f.roundUp,i.sort=f.sort,i.findIndexOfMin=f.findIndexOfMin,i.sortObjectKeys=e(95376);var c=e(63084);i.aggNums=c.aggNums,i.len=c.len,i.mean=c.mean,i.median=c.median,i.midRange=c.midRange,i.variance=c.variance,i.stdev=c.stdev,i.interp=c.interp;var y=e(52248);i.init2dArray=y.init2dArray,i.transposeRagged=y.transposeRagged,i.dot=y.dot,i.translationMatrix=y.translationMatrix,i.rotationMatrix=y.rotationMatrix,i.rotationXYMatrix=y.rotationXYMatrix,i.apply3DTransform=y.apply3DTransform,i.apply2DTransform=y.apply2DTransform,i.apply2DTransform2=y.apply2DTransform2,i.convertCssMatrix=y.convertCssMatrix,i.inverseTransformMatrix=y.inverseTransformMatrix;var d=e(11864);i.deg2rad=d.deg2rad,i.rad2deg=d.rad2deg,i.angleDelta=d.angleDelta,i.angleDist=d.angleDist,i.isFullCircle=d.isFullCircle,i.isAngleInsideSector=d.isAngleInsideSector,i.isPtInsideSector=d.isPtInsideSector,i.pathArc=d.pathArc,i.pathSector=d.pathSector,i.pathAnnulus=d.pathAnnulus;var m=e(98308);i.isLeftAnchor=m.isLeftAnchor,i.isCenterAnchor=m.isCenterAnchor,i.isRightAnchor=m.isRightAnchor,i.isTopAnchor=m.isTopAnchor,i.isMiddleAnchor=m.isMiddleAnchor,i.isBottomAnchor=m.isBottomAnchor;var g=e(92348);i.segmentsIntersect=g.segmentsIntersect,i.segmentDistance=g.segmentDistance,i.getTextLocation=g.getTextLocation,i.clearLocationCache=g.clearLocationCache,i.getVisibleSegment=g.getVisibleSegment,i.findPointOnPath=g.findPointOnPath;var x=e(92880);i.extendFlat=x.extendFlat,i.extendDeep=x.extendDeep,i.extendDeepAll=x.extendDeepAll,i.extendDeepNoArrays=x.extendDeepNoArrays;var v=e(24248);i.log=v.log,i.warn=v.warn,i.error=v.error;var b=e(53756);i.counterRegex=b.counter;var h=e(91200);i.throttle=h.throttle,i.throttleDone=h.done,i.clearThrottle=h.clear;var S=e(52200);function w(J){var X={};for(var ae in J)for(var ce=J[ae],le=0;le<ce.length;le++)X[ce[le]]=+ae;return X}i.getGraphDiv=S.getGraphDiv,i.isPlotDiv=S.isPlotDiv,i.removeElement=S.removeElement,i.addStyleRule=S.addStyleRule,i.addRelatedStyleRule=S.addRelatedStyleRule,i.deleteRelatedStyleRule=S.deleteRelatedStyleRule,i.getFullTransformMatrix=S.getFullTransformMatrix,i.getElementTransformMatrix=S.getElementTransformMatrix,i.getElementAndAncestors=S.getElementAndAncestors,i.equalDomRects=S.equalDomRects,i.clearResponsive=e(75352),i.preserveDrawingBuffer=e(34296),i.makeTraceGroups=e(30988),i._=e(98356),i.notifier=e(41792),i.filterUnique=e(68944),i.filterVisible=e(43880),i.pushUnique=e(52416),i.increment=e(1396),i.cleanNumber=e(54037),i.ensureNumber=function(J){return T(J)?(J=Number(J))>p||J<l?t:J:t},i.isIndex=function(J,X){return!(void 0!==X&&J>=X)&&T(J)&&J>=0&&J%1==0},i.noop=e(16628),i.identity=e(35536),i.repeat=function(J,X){for(var ae=new Array(X),ce=0;ce<X;ce++)ae[ce]=J;return ae},i.swapAttrs=function(J,X,ae,ce){ae||(ae="x"),ce||(ce="y");for(var le=0;le<X.length;le++){var pe=X[le],we=i.nestedProperty(J,pe.replace("?",ae)),Te=i.nestedProperty(J,pe.replace("?",ce)),ye=we.get();we.set(Te.get()),Te.set(ye)}},i.raiseToTop=function(J){J.parentNode.appendChild(J)},i.cancelTransition=function(J){return J.transition().duration(0)},i.constrain=function(J,X,ae){return X>ae?Math.max(ae,Math.min(X,J)):Math.max(X,Math.min(ae,J))},i.bBoxIntersect=function(J,X,ae){return J.left<=X.right+(ae=ae||0)&&X.left<=J.right+ae&&J.top<=X.bottom+ae&&X.top<=J.bottom+ae},i.simpleMap=function(J,X,ae,ce,le){for(var pe=J.length,we=new Array(pe),Te=0;Te<pe;Te++)we[Te]=X(J[Te],ae,ce,le);return we},i.randstr=function J(X,ae,ce,le){if(ce||(ce=16),void 0===ae&&(ae=24),ae<=0)return"0";var pe,we,Te=Math.log(Math.pow(2,ae))/Math.log(ce),ye="";for(pe=2;Te===1/0;pe*=2)Te=Math.log(Math.pow(2,ae/pe))/Math.log(ce)*pe;var ve=Te-Math.floor(Te);for(pe=0;pe<Math.floor(Te);pe++)ye=Math.floor(Math.random()*ce).toString(ce)+ye;ve&&(we=Math.pow(ce,ve),ye=Math.floor(Math.random()*we).toString(ce)+ye);var xe=parseInt(ye,ce);return X&&X[ye]||xe!==1/0&&xe>=Math.pow(2,ae)?le>10?(i.warn("randstr failed uniqueness"),ye):J(X,ae,ce,(le||0)+1):ye},i.OptionControl=function(J,X){J||(J={}),X||(X="opt");var ae={optionList:[],_newoption:function(ce){ce[X]=J,ae[ce.name]=ce,ae.optionList.push(ce)}};return ae["_"+X]=J,ae},i.smooth=function(J,X){if((X=Math.round(X)||0)<2)return J;var ae,ce,le,pe,we=J.length,Te=2*we,ye=2*X-1,ve=new Array(ye),xe=new Array(we);for(ae=0;ae<ye;ae++)ve[ae]=(1-Math.cos(Math.PI*(ae+1)/X))/(2*X);for(ae=0;ae<we;ae++){for(pe=0,ce=0;ce<ye;ce++)(le=ae+ce+1-X)<-we?le-=Te*Math.round(le/Te):le>=Te&&(le-=Te*Math.floor(le/Te)),le<0?le=-1-le:le>=we&&(le=Te-1-le),pe+=J[le]*ve[ce];xe[ae]=pe}return xe},i.syncOrAsync=function(J,X,ae){var ce;function le(){return i.syncOrAsync(J,X,ae)}for(;J.length;)if((ce=(0,J.splice(0,1)[0])(X))&&ce.then)return ce.then(le);return ae&&ae(X)},i.stripTrailingSlash=function(J){return"/"===J.substr(-1)?J.substr(0,J.length-1):J},i.noneOrAll=function(J,X,ae){if(J){var ce,le=!1,pe=!0;for(ce=0;ce<ae.length;ce++)null!=J[ae[ce]]?le=!0:pe=!1;if(le&&!pe)for(ce=0;ce<ae.length;ce++)J[ae[ce]]=X[ae[ce]]}},i.mergeArray=function(J,X,ae,ce){var le="function"==typeof ce;if(i.isArrayOrTypedArray(J))for(var pe=Math.min(J.length,X.length),we=0;we<pe;we++){var Te=J[we];X[we][ae]=le?ce(Te):Te}},i.mergeArrayCastPositive=function(J,X,ae){return i.mergeArray(J,X,ae,function(ce){var le=+ce;return isFinite(le)&&le>0?le:0})},i.fillArray=function(J,X,ae,ce){if(ce=ce||i.identity,i.isArrayOrTypedArray(J))for(var le=0;le<X.length;le++)X[le][ae]=ce(J[le])},i.castOption=function(J,X,ae,ce){ce=ce||i.identity;var le=i.nestedProperty(J,ae).get();return i.isArrayOrTypedArray(le)?Array.isArray(X)&&i.isArrayOrTypedArray(le[X[0]])?ce(le[X[0]][X[1]]):ce(le[X]):le},i.extractOption=function(J,X,ae,ce){if(ae in J)return J[ae];var le=i.nestedProperty(X,ce).get();return Array.isArray(le)?void 0:le},i.tagSelected=function(J,X,ae){var ce,le,pe=X.selectedpoints,we=X._indexToPoints;we&&(ce=w(we));for(var Te=0;Te<pe.length;Te++){var ye=pe[Te];if(i.isIndex(ye)||i.isArrayOrTypedArray(ye)&&i.isIndex(ye[0])&&i.isIndex(ye[1])){var ve=ce?ce[ye]:ye,xe=ae?ae[ve]:ve;void 0!==(le=xe)&&le<J.length&&(J[xe].selected=1)}}},i.selIndices2selPoints=function(J){var X=J.selectedpoints,ae=J._indexToPoints;if(ae){for(var ce=w(ae),le=[],pe=0;pe<X.length;pe++){var we=X[pe];if(i.isIndex(we)){var Te=ce[we];i.isIndex(Te)&&le.push(Te)}}return le}return X},i.getTargetArray=function(J,X){var ae=X.target;if("string"==typeof ae&&ae){var ce=i.nestedProperty(J,ae).get();return!!i.isArrayOrTypedArray(ce)&&ce}return!!i.isArrayOrTypedArray(ae)&&ae},i.minExtend=function J(X,ae,ce){var le={};"object"!=typeof ae&&(ae={});var pe,we,Te,ye="pieLike"===ce?-1:3,ve=Object.keys(X);for(pe=0;pe<ve.length;pe++)Te=X[we=ve[pe]],"_"!==we.charAt(0)&&"function"!=typeof Te&&(le[we]="module"===we?Te:Array.isArray(Te)?"colorscale"===we||-1===ye?Te.slice():Te.slice(0,ye):i.isTypedArray(Te)?-1===ye?Te.subarray():Te.subarray(0,ye):Te&&"object"==typeof Te?J(X[we],ae[we],ce):Te);for(ve=Object.keys(ae),pe=0;pe<ve.length;pe++)"object"==typeof(Te=ae[we=ve[pe]])&&we in le&&"object"==typeof le[we]||(le[we]=Te);return le},i.titleCase=function(J){return J.charAt(0).toUpperCase()+J.substr(1)},i.containsAny=function(J,X){for(var ae=0;ae<X.length;ae++)if(-1!==J.indexOf(X[ae]))return!0;return!1},i.isIE=function(){return void 0!==window.navigator.msSaveBlob};var E=/Version\/[\d\.]+.*Safari/;i.isSafari=function(){return E.test(window.navigator.userAgent)};var P=/iPad|iPhone|iPod/;i.isIOS=function(){return P.test(window.navigator.userAgent)};var I=/Firefox\/(\d+)\.\d+/;i.getFirefoxVersion=function(){var J=I.exec(window.navigator.userAgent);if(J&&2===J.length){var X=parseInt(J[1]);if(!isNaN(X))return X}return null},i.isD3Selection=function(J){return J instanceof M.selection},i.ensureSingle=function(J,X,ae,ce){var le=J.select(X+(ae?"."+ae:""));if(le.size())return le;var pe=J.append(X);return ae&&pe.classed(ae,!0),ce&&pe.call(ce),pe},i.ensureSingleById=function(J,X,ae,ce){var le=J.select(X+"#"+ae);if(le.size())return le;var pe=J.append(X).attr("id",ae);return ce&&pe.call(ce),pe},i.objectFromPath=function(J,X){for(var ae,ce=J.split("."),le=ae={},pe=0;pe<ce.length;pe++){var we=ce[pe],Te=null,ye=ce[pe].match(/(.*)\[([0-9]+)\]/);ye?(Te=ye[2],(ae=ae[we=ye[1]]=[])[Te]=pe===ce.length-1?X:{},ae=ae[Te]):(ae[we]=pe===ce.length-1?X:{},ae=ae[we])}return le};var O=/^([^\[\.]+)\.(.+)?/,z=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function U(J){return"__"===J.slice(0,2)}i.expandObjectPaths=function(J){var X,ae,ce,le,pe,we,Te;if("object"==typeof J&&!Array.isArray(J))for(ae in J)if(J.hasOwnProperty(ae))if(X=ae.match(O)){if(le=J[ae],U(ce=X[1]))continue;delete J[ae],J[ce]=i.extendDeepNoArrays(J[ce]||{},i.objectFromPath(ae,i.expandObjectPaths(le))[ce])}else if(X=ae.match(z)){if(le=J[ae],U(ce=X[1]))continue;if(pe=parseInt(X[2]),delete J[ae],J[ce]=J[ce]||[],"."===X[3])Te=X[4],we=J[ce][pe]=J[ce][pe]||{},i.extendDeepNoArrays(we,i.objectFromPath(Te,i.expandObjectPaths(le)));else{if(U(ce))continue;J[ce][pe]=i.expandObjectPaths(le)}}else{if(U(ae))continue;J[ae]=i.expandObjectPaths(J[ae])}return J},i.numSeparate=function(J,X,ae){if(ae||(ae=!1),"string"!=typeof X||0===X.length)throw new Error("Separator string required for formatting!");"number"==typeof J&&(J=String(J));var ce=/(\d+)(\d{3})/,le=X.charAt(0),pe=X.charAt(1),we=J.split("."),Te=we[0],ye=we.length>1?le+we[1]:"";if(pe&&(we.length>1||Te.length>4||ae))for(;ce.test(Te);)Te=Te.replace(ce,"$1"+pe+"$2");return Te+ye},i.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var R=/^\w*$/;i.templateString=function(J,X){var ae={};return J.replace(i.TEMPLATE_STRING_REGEX,function(ce,le){var pe;return R.test(le)?pe=X[le]:(ae[le]=ae[le]||i.nestedProperty(X,le).get,pe=ae[le]()),i.isValidTextValue(pe)?pe:""})};var j={max:10,count:0,name:"hovertemplate"};i.hovertemplateString=function(){return ie.apply(j,arguments)};var Y={max:10,count:0,name:"texttemplate"};i.texttemplateString=function(){return ie.apply(Y,arguments)};var B=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/,V={max:10,count:0,name:"texttemplate",parseMultDiv:!0};i.texttemplateStringForShapes=function(){return ie.apply(V,arguments)};var q=/^[:|\|]/;function ie(J,X,ae){var ce=this,le=arguments;X||(X={});var pe={};return J.replace(i.TEMPLATE_STRING_REGEX,function(we,Te,ye){var ve="_xother"===Te||"_yother"===Te,xe="_xother_"===Te||"_yother_"===Te,Ce="xother_"===Te||"yother_"===Te,Oe="xother"===Te||"yother"===Te||ve||Ce||xe,be=Te;(ve||xe)&&(be=be.substring(1)),(Ce||xe)&&(be=be.substring(0,be.length-1));var ue,se,ge,me,Me,Ie=null,ke=null;if(ce.parseMultDiv){var Se=(Me=(me=be).match(B))?{key:Me[1],op:Me[2],number:Number(Me[3])}:{key:me,op:null,number:null};be=Se.key,Ie=Se.op,ke=Se.number}if(Oe){if(void 0===(ue=X[be]))return""}else for(ge=3;ge<le.length;ge++)if(se=le[ge]){if(se.hasOwnProperty(be)){ue=se[be];break}if(R.test(be)||(ue=i.nestedProperty(se,be).get(),(ue=pe[be]||i.nestedProperty(se,be).get())&&(pe[be]=ue)),void 0!==ue)break}if(void 0!==ue&&("*"===Ie&&(ue*=ke),"/"===Ie&&(ue/=ke)),void 0===ue&&ce)return ce.count<ce.max&&(i.warn("Variable '"+be+"' in "+ce.name+" could not be found!"),ue=we),ce.count===ce.max&&i.warn("Too many "+ce.name+" warnings - additional warnings will be suppressed"),ce.count++,we;if(ye){var Pe;if(":"===ye[0]&&(Pe=ae?ae.numberFormat:i.numberFormat,""!==ue&&(ue=Pe(ye.replace(q,""))(ue))),"|"===ye[0]){Pe=ae?ae.timeFormat:k;var Fe=i.dateTime2ms(ue);ue=i.formatDate(Fe,ye.replace(q,""),!1,Pe)}}else{var Be=be+"Label";X.hasOwnProperty(Be)&&(ue=X[Be])}return Oe&&(ue="("+ue+")",(ve||xe)&&(ue=" "+ue),(Ce||xe)&&(ue+=" ")),ue})}i.subplotSort=function(J,X){for(var ae=Math.min(J.length,X.length)+1,ce=0,le=0,pe=0;pe<ae;pe++){var we=J.charCodeAt(pe)||0,Te=X.charCodeAt(pe)||0,ye=we>=48&&we<=57,ve=Te>=48&&Te<=57;if(ye&&(ce=10*ce+we-48),ve&&(le=10*le+Te-48),!ye||!ve){if(ce!==le)return ce-le;if(we!==Te)return we-Te}}return le-ce};var te=2e9;i.seedPseudoRandom=function(){te=2e9},i.pseudoRandom=function(){var J=te;return te=(69069*te+1)%4294967296,Math.abs(te-J)<429496729?i.pseudoRandom():te/4294967296},i.fillText=function(J,X,ae){var ce=Array.isArray(ae)?function(we){ae.push(we)}:function(we){ae.text=we},le=i.extractOption(J,X,"htx","hovertext");if(i.isValidTextValue(le))return ce(le);var pe=i.extractOption(J,X,"tx","text");return i.isValidTextValue(pe)?ce(pe):void 0},i.isValidTextValue=function(J){return J||0===J},i.formatPercent=function(J,X){X=X||0;for(var ae=(Math.round(100*J*Math.pow(10,X))*Math.pow(.1,X)).toFixed(X)+"%",ce=0;ce<X;ce++)-1!==ae.indexOf(".")&&(ae=(ae=ae.replace("0%","%")).replace(".%","%"));return ae},i.isHidden=function(J){var X=window.getComputedStyle(J).display;return!X||"none"===X},i.strTranslate=function(J,X){return J||X?"translate("+J+","+X+")":""},i.strRotate=function(J){return J?"rotate("+J+")":""},i.strScale=function(J){return 1!==J?"scale("+J+")":""},i.getTextTransform=function(J){var X=J.noCenter,ae=J.textX,ce=J.textY,ye=J.rotate,ve=J.scale;return ve?ve>1&&(ve=1):ve=0,i.strTranslate(J.targetX-ve*(ae+(J.anchorX||0)),J.targetY-ve*(ce+(J.anchorY||0)))+i.strScale(ve)+(ye?"rotate("+ye+(X?"":" "+ae+" "+ce)+")":"")},i.setTransormAndDisplay=function(J,X){J.attr("transform",i.getTextTransform(X)),J.style("display",X.scale?null:"none")},i.ensureUniformFontSize=function(J,X){var ae=i.extendFlat({},X);return ae.size=Math.max(X.size,J._fullLayout.uniformtext.minsize||0),ae},i.join2=function(J,X,ae){var ce=J.length;return ce>1?J.slice(0,-1).join(X)+ae+J[ce-1]:J.join(X)},i.bigFont=function(J){return Math.round(1.2*J)};var ee=i.getFirefoxVersion(),$=null!==ee&&ee<86;i.getPositionFromD3Event=function(){return $?[M.event.layerX,M.event.layerY]:[M.event.offsetX,M.event.offsetY]}},63620:function(ne){"use strict";ne.exports=function(F){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(F):"[object Object]"===Object.prototype.toString.call(F)&&Object.getPrototypeOf(F).hasOwnProperty("hasOwnProperty")}},37804:function(ne,F,e){"use strict";var M=e(22296),k=/^\w*$/;ne.exports=function(o,T,_,p){var l,t,i;_=_||"name",p=p||"value";var r={};T&&T.length?(i=M(o,T),t=i.get()):t=o,T=T||"";var n={};if(t)for(l=0;l<t.length;l++)n[t[l][_]]=l;var a=k.test(p),s={set:function(u,f){var c=null===f?4:0;if(!t){if(!i||4===c)return;i.set(t=[])}var y=n[u];if(void 0===y){if(4===c)return;c|=3,n[u]=y=t.length}else f!==(a?t[y][p]:M(t[y],p).get())&&(c|=2);var d=t[y]=t[y]||{};return d[_]=u,a?d[p]=f:M(d,p).set(f),null!==f&&(c&=-5),r[y]=r[y]|c,s},get:function(u){if(t){var f=n[u];return void 0===f?void 0:a?t[f][p]:M(t[f],p).get()}},rename:function(u,f){var c=n[u];return void 0===c||(r[c]=1|r[c],n[f]=c,delete n[u],t[c][_]=f),s},remove:function(u){var f=n[u];if(void 0===f)return s;var c=t[f];if(Object.keys(c).length>2)return r[f]=2|r[f],s.set(u,null);if(a){for(l=f;l<t.length;l++)r[l]=3|r[l];for(l=f;l<t.length;l++)n[t[l][_]]--;t.splice(f,1),delete n[u]}else M(c,p).set(null),r[f]=6|r[f];return s},constructUpdate:function(){for(var u,f,c={},y=Object.keys(r),d=0;d<y.length;d++)u=T+"["+(f=y[d])+"]",t[f]?(1&r[f]&&(c[u+"."+_]=t[f][_]),2&r[f]&&(c[u+"."+p]=a?4&r[f]?null:t[f][p]:4&r[f]?null:M(t[f],p).get())):c[u]=null;return c}};return s}},98356:function(ne,F,e){"use strict";var M=e(24040);ne.exports=function(k,o){for(var T=k._context.locale,_=0;_<2;_++){for(var p=k._context.locales,l=0;l<2;l++){var t=(p[T]||{}).dictionary;if(t){var i=t[o];if(i)return i}p=M.localeRegistry}var r=T.split("-")[0];if(r===T)break;T=r}return o}},24248:function(ne,F,e){"use strict";var M=e(20556).dfltConfig,k=e(41792),o=ne.exports={};o.log=function(){var T;if(M.logging>1){var _=["LOG:"];for(T=0;T<arguments.length;T++)_.push(arguments[T]);console.trace.apply(console,_)}if(M.notifyOnLogging>1){var p=[];for(T=0;T<arguments.length;T++)p.push(arguments[T]);k(p.join("<br>"),"long")}},o.warn=function(){var T;if(M.logging>0){var _=["WARN:"];for(T=0;T<arguments.length;T++)_.push(arguments[T]);console.trace.apply(console,_)}if(M.notifyOnLogging>0){var p=[];for(T=0;T<arguments.length;T++)p.push(arguments[T]);k(p.join("<br>"),"stick")}},o.error=function(){var T;if(M.logging>0){var _=["ERROR:"];for(T=0;T<arguments.length;T++)_.push(arguments[T]);console.error.apply(console,_)}if(M.notifyOnLogging>0){var p=[];for(T=0;T<arguments.length;T++)p.push(arguments[T]);k(p.join("<br>"),"stick")}}},30988:function(ne,F,e){"use strict";var M=e(33428);ne.exports=function(k,o,T){var _=k.selectAll("g."+T.replace(/\s/g,".")).data(o,function(l){return l[0].trace.uid});_.exit().remove(),_.enter().append("g").attr("class",T),_.order();var p=k.classed("rangeplot")?"nodeRangePlot3":"node3";return _.each(function(l){l[0][p]=M.select(this)}),_}},52248:function(ne,F,e){"use strict";var M=e(36524);F.init2dArray=function(k,o){for(var T=new Array(k),_=0;_<k;_++)T[_]=new Array(o);return T},F.transposeRagged=function(k){var o,T,_=0,p=k.length;for(o=0;o<p;o++)_=Math.max(_,k[o].length);var l=new Array(_);for(o=0;o<_;o++)for(l[o]=new Array(p),T=0;T<p;T++)l[o][T]=k[T][o];return l},F.dot=function(k,o){if(!k.length||!o.length||k.length!==o.length)return null;var T,_,p=k.length;if(k[0].length)for(T=new Array(p),_=0;_<p;_++)T[_]=F.dot(k[_],o);else if(o[0].length){var l=F.transposeRagged(o);for(T=new Array(l.length),_=0;_<l.length;_++)T[_]=F.dot(k,l[_])}else for(T=0,_=0;_<p;_++)T+=k[_]*o[_];return T},F.translationMatrix=function(k,o){return[[1,0,k],[0,1,o],[0,0,1]]},F.rotationMatrix=function(k){var o=k*Math.PI/180;return[[Math.cos(o),-Math.sin(o),0],[Math.sin(o),Math.cos(o),0],[0,0,1]]},F.rotationXYMatrix=function(k,o,T){return F.dot(F.dot(F.translationMatrix(o,T),F.rotationMatrix(k)),F.translationMatrix(-o,-T))},F.apply3DTransform=function(k){return function(){var o=arguments,T=1===arguments.length?o[0]:[o[0],o[1],o[2]||0];return F.dot(k,[T[0],T[1],T[2],1]).slice(0,3)}},F.apply2DTransform=function(k){return function(){var o=arguments;3===o.length&&(o=o[0]);var T=1===arguments.length?o[0]:[o[0],o[1]];return F.dot(k,[T[0],T[1],1]).slice(0,2)}},F.apply2DTransform2=function(k){var o=F.apply2DTransform(k);return function(T){return o(T.slice(0,2)).concat(o(T.slice(2,4)))}},F.convertCssMatrix=function(k){if(k){var o=k.length;if(16===o)return k;if(6===o)return[k[0],k[1],0,0,k[2],k[3],0,0,0,0,1,0,k[4],k[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},F.inverseTransformMatrix=function(k){var o=[];return M.invert(o,k),[[o[0],o[1],o[2],o[3]],[o[4],o[5],o[6],o[7]],[o[8],o[9],o[10],o[11]],[o[12],o[13],o[14],o[15]]]}},20435:function(ne){"use strict";ne.exports={mod:function(F,e){var M=F%e;return M<0?M+e:M},modHalf:function(F,e){return Math.abs(F)>e/2?F-Math.round(F/e)*e:F}}},22296:function(ne,F,e){"use strict";var M=e(38248),k=e(38116).isArrayOrTypedArray;function o(r,n){return function(){var a,s,u,f,c,y=r;for(f=0;f<n.length-1;f++){if(-1===(a=n[f])){for(s=!0,u=[],c=0;c<y.length;c++)u[c]=o(y[c],n.slice(f+1))(),u[c]!==u[0]&&(s=!1);return s?u[0]:u}if("number"==typeof a&&!k(y)||"object"!=typeof(y=y[a])||null===y)return}if("object"==typeof y&&null!==y&&null!==(u=y[n[f]]))return u}}ne.exports=function(r,n){if(M(n))n=String(n);else if("string"!=typeof n||"[-1]"===n.substr(n.length-4))throw"bad property string";var a,s,u,f,c=n.split(".");for(f=0;f<c.length;f++)if("__"===String(c[f]).slice(0,2))throw"bad property string";for(f=0;f<c.length;){if(a=String(c[f]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(a[1])c[f]=a[1];else{if(0!==f)throw"bad property string";c.splice(0,1)}for(s=a[2].substr(1,a[2].length-2).split("]["),u=0;u<s.length;u++)f++,c.splice(f,0,Number(s[u]))}f++}return"object"!=typeof r?{set:function(){throw"bad container"},get:function(){},astr:n,parts:c,obj:r}:{set:p(r,c,n),get:o(r,c),astr:n,parts:c,obj:r}};var T=/(^|\.)args\[/;function _(r,n){return void 0===r||null===r&&!n.match(T)}function p(r,n,a){return function(s){var u,f,c=r,y="",d=[[r,y]],m=_(s,a);for(f=0;f<n.length-1;f++){if("number"==typeof(u=n[f])&&!k(c))throw"array index but container is not an array";if(-1===u){if(m=!t(c,n.slice(f+1),s,a))break;return}if(!i(c,u,n[f+1],m))break;if("object"!=typeof(c=c[u])||null===c)throw"container is not an object";y=l(y,u),d.push([c,y])}if(m){if(f===n.length-1&&(delete c[n[f]],Array.isArray(c)&&+n[f]==c.length-1))for(;c.length&&void 0===c[c.length-1];)c.pop()}else c[n[f]]=s}}function l(r,n){var a=n;return M(n)?a="["+n+"]":r&&(a="."+n),r+a}function t(r,n,a,s){var u,f=k(a),c=!0,y=a,d=s.replace("-1",0),m=!f&&_(a,d),g=n[0];for(u=0;u<r.length;u++)d=s.replace("-1",u),f&&(m=_(y=a[u%a.length],d)),m&&(c=!1),i(r,u,g,m)&&p(r[u],n,s.replace("-1",u))(y);return c}function i(r,n,a,s){if(void 0===r[n]){if(s)return!1;r[n]="number"==typeof a?[]:{}}return!0}},16628:function(ne){"use strict";ne.exports=function(){}},41792:function(ne,F,e){"use strict";var M=e(33428),k=e(38248),o=[];ne.exports=function(T,_){if(-1===o.indexOf(T)){o.push(T);var p=1e3;k(_)?p=_:"long"===_&&(p=3e3);var l=M.select("body").selectAll(".plotly-notifier").data([0]);l.enter().append("div").classed("plotly-notifier",!0),l.selectAll(".notifier-note").data(o).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(i){var r=M.select(this);r.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){r.transition().call(t)});for(var n=r.append("p"),a=i.split(/<br\s*\/?>/g),s=0;s<a.length;s++)s&&n.append("br"),n.append("span").text(a[s]);"stick"===_?r.transition().duration(350).style("opacity",1):r.transition().duration(700).style("opacity",1).transition().delay(p).call(t)})}function t(i){i.duration(700).style("opacity",0).each("end",function(r){var n=o.indexOf(r);-1!==n&&o.splice(n,1),M.select(this).remove()})}}},72213:function(ne,F,e){"use strict";var M=e(93972),k="data-savedcursor";ne.exports=function(o,T){var _=o.attr(k);if(T){if(!_){for(var p=(o.attr("class")||"").split(" "),l=0;l<p.length;l++){var t=p[l];0===t.indexOf("cursor-")&&o.attr(k,t.substr(7)).classed(t,!1)}o.attr(k)||o.attr(k,"!!")}M(o,T)}else _&&(o.attr(k,null),"!!"===_?M(o):M(o,_))}},92065:function(ne,F,e){"use strict";var M=e(52248).dot,k=e(39032).BADNUM,o=ne.exports={};o.tester=function(T){var _,p=T.slice(),l=p[0][0],t=l,i=p[0][1],r=i;for(p[p.length-1][0]===p[0][0]&&p[p.length-1][1]===p[0][1]||p.push(p[0]),_=1;_<p.length;_++)l=Math.min(l,p[_][0]),t=Math.max(t,p[_][0]),i=Math.min(i,p[_][1]),r=Math.max(r,p[_][1]);var n,a=!1;5===p.length&&(p[0][0]===p[1][0]?p[2][0]===p[3][0]&&p[0][1]===p[3][1]&&p[1][1]===p[2][1]&&(a=!0,n=function(f){return f[0]===p[0][0]}):p[0][1]===p[1][1]&&p[2][1]===p[3][1]&&p[0][0]===p[3][0]&&p[1][0]===p[2][0]&&(a=!0,n=function(f){return f[1]===p[0][1]}));var s=!0,u=p[0];for(_=1;_<p.length;_++)if(u[0]!==p[_][0]||u[1]!==p[_][1]){s=!1;break}return{xmin:l,xmax:t,ymin:i,ymax:r,pts:p,contains:a?function(f,c){var y=f[0],d=f[1];return!(y===k||y<l||y>t||d===k||d<i||d>r||c&&n(f))}:function(f,c){var y=f[0],d=f[1];if(y===k||y<l||y>t||d===k||d<i||d>r)return!1;var m,g,x,v,b,h=p.length,S=p[0][0],w=p[0][1],E=0;for(m=1;m<h;m++)if(g=S,x=w,S=p[m][0],w=p[m][1],!(y<(v=Math.min(g,S))||y>Math.max(g,S)||d>Math.max(x,w)))if(d<Math.min(x,w))y!==v&&E++;else{if(d===(b=S===g?d:x+(y-g)*(w-x)/(S-g)))return 1!==m||!c;d<=b&&y!==v&&E++}return E%2==1},isRect:a,degenerate:s}},o.isSegmentBent=function(T,_,p,l){var t,i,r,n=T[_],a=[T[p][0]-n[0],T[p][1]-n[1]],s=M(a,a),u=Math.sqrt(s),f=[-a[1]/u,a[0]/u];for(t=_+1;t<p;t++)if((r=M(i=[T[t][0]-n[0],T[t][1]-n[1]],a))<0||r>s||Math.abs(M(i,f))>l)return!0;return!1},o.filter=function(T,_){var p=[T[0]],l=0,t=0;function i(r){T.push(r);var n=p.length,a=l;p.splice(t+1);for(var s=a+1;s<T.length;s++)(s===T.length-1||o.isSegmentBent(T,a,s+1,_))&&(p.push(T[s]),p.length<n-2&&(l=s,t=p.length-1),a=s)}return T.length>1&&i(T.pop()),{addPt:i,raw:T,filtered:p}}},5048:function(ne,F,e){"use strict";var M=e(16576),k=e(28624);ne.exports=function(o,T,_){var p=o._fullLayout,l=!0;return p._glcanvas.each(function(t){if(t.regl)t.regl.preloadCachedCode(_);else if(!t.pick||p._has("parcoords")){try{t.regl=k({canvas:this,attributes:{antialias:!t.pick,preserveDrawingBuffer:!0},pixelRatio:o._context.plotGlPixelRatio||e.g.devicePixelRatio,extensions:T||[],cachedCode:_||{}})}catch{l=!1}t.regl||(l=!1),l&&this.addEventListener("webglcontextlost",function(i){o&&o.emit&&o.emit("plotly_webglcontextlost",{event:i,layer:t.key})},!1)}}),l||M({container:p._glcontainer.node()}),l}},34296:function(ne,F,e){"use strict";var M=e(38248),k=e(25928);ne.exports=function(o){var T,n;if("string"!=typeof(T=o&&o.hasOwnProperty("userAgent")?o.userAgent:(typeof navigator<"u"&&(n=navigator.userAgent),n&&n.headers&&"string"==typeof n.headers["user-agent"]&&(n=n.headers["user-agent"]),n)))return!0;var _=k({ua:{headers:{"user-agent":T}},tablet:!0,featureDetect:!1});if(!_)for(var p=T.split(" "),l=1;l<p.length;l++)if(-1!==p[l].indexOf("Safari"))for(var t=l-1;t>-1;t--){var i=p[t];if("Version/"===i.substr(0,8)){var r=i.substr(8).split(".")[0];if(M(r)&&(r=+r),r>=13)return!0}}return _}},52416:function(ne){"use strict";ne.exports=function(F,e){if(e instanceof RegExp){for(var M=e.toString(),k=0;k<F.length;k++)if(F[k]instanceof RegExp&&F[k].toString()===M)return F;F.push(e)}else!e&&0!==e||-1!==F.indexOf(e)||F.push(e);return F}},94552:function(ne,F,e){"use strict";var M=e(3400),k=e(20556).dfltConfig,o={add:function(T,_,p,l,t){var i,r;T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},r=T.undoQueue.index,T.autoplay?T.undoQueue.inSequence||(T.autoplay=!1):(!T.undoQueue.sequence||T.undoQueue.beginSequence?(T.undoQueue.queue.splice(r,T.undoQueue.queue.length-r,i={undo:{calls:[],args:[]},redo:{calls:[],args:[]}}),T.undoQueue.index+=1):i=T.undoQueue.queue[r-1],T.undoQueue.beginSequence=!1,i&&(i.undo.calls.unshift(_),i.undo.args.unshift(p),i.redo.calls.push(l),i.redo.args.push(t)),T.undoQueue.queue.length>k.queueLength&&(T.undoQueue.queue.shift(),T.undoQueue.index--))},startSequence:function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!0,T.undoQueue.beginSequence=!0},stopSequence:function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!1,T.undoQueue.beginSequence=!1},undo:function(T){var _,p;if(!(void 0===T.undoQueue||isNaN(T.undoQueue.index)||T.undoQueue.index<=0)){for(T.undoQueue.index--,_=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,p=0;p<_.undo.calls.length;p++)o.plotDo(T,_.undo.calls[p],_.undo.args[p]);T.undoQueue.inSequence=!1,T.autoplay=!1}},redo:function(T){var _,p;if(!(void 0===T.undoQueue||isNaN(T.undoQueue.index)||T.undoQueue.index>=T.undoQueue.queue.length)){for(_=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,p=0;p<_.redo.calls.length;p++)o.plotDo(T,_.redo.calls[p],_.redo.args[p]);T.undoQueue.inSequence=!1,T.autoplay=!1,T.undoQueue.index++}},plotDo:function(T,_,p){T.autoplay=!0,p=function(l,t){for(var i,r=[],n=0;n<t.length;n++)r[n]=(i=t[n])===l?i:"object"==typeof i?Array.isArray(i)?M.extendDeep([],i):M.extendDeepAll({},i):i;return r}(T,p),_.apply(null,p)}};ne.exports=o},53756:function(ne,F){"use strict";F.counter=function(e,M,k,o){var T=(M||"")+(k?"":"$"),_=!1===o?"":"^";return"xy"===e?new RegExp(_+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+T):new RegExp(_+e+"([2-9]|[1-9][0-9]+)?"+T)}},23193:function(ne){"use strict";var F=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,e=/^[^\.\[\]]+$/;ne.exports=function(M,k){for(;k;){var o=M.match(F);if(o)M=o[1];else{if(!M.match(e))throw new Error("bad relativeAttr call:"+[M,k]);M=""}if("^"!==k.charAt(0))break;k=k.slice(1)}return M&&"["!==k.charAt(0)?M+"."+k:M+k}},51528:function(ne,F,e){"use strict";var M=e(38116).isArrayOrTypedArray,k=e(63620);ne.exports=function o(T,_){for(var p in _){var l=_[p],t=T[p];if(t!==l)if("_"===p.charAt(0)||"function"==typeof l){if(p in T)continue;T[p]=l}else if(M(l)&&M(t)&&k(l[0])){if("customdata"===p||"ids"===p)continue;for(var i=Math.min(l.length,t.length),r=0;r<i;r++)t[r]!==l[r]&&k(l[r])&&k(t[r])&&o(t[r],l[r])}else k(l)&&k(t)&&(o(t,l),Object.keys(t).length||delete T[p])}}},14952:function(ne,F,e){"use strict";var M=e(38248),k=e(24248),o=e(35536),T=e(39032).BADNUM,_=1e-9;function p(r,n){return r<n}function l(r,n){return r<=n}function t(r,n){return r>n}function i(r,n){return r>=n}F.findBin=function(r,n,a){if(M(n.start))return a?Math.ceil((r-n.start)/n.size-_)-1:Math.floor((r-n.start)/n.size+_);var s,u,f=0,c=n.length,y=0,d=c>1?(n[c-1]-n[0])/(c-1):1;for(u=d>=0?a?p:l:a?i:t,r+=d*_*(a?-1:1)*(d>=0?1:-1);f<c&&y++<100;)u(n[s=Math.floor((f+c)/2)],r)?f=s+1:c=s;return y>90&&k.log("Long binary search..."),f-1},F.sorterAsc=function(r,n){return r-n},F.sorterDes=function(r,n){return n-r},F.distinctVals=function(r){var n,a=r.slice();for(a.sort(F.sorterAsc),n=a.length-1;n>-1&&a[n]===T;n--);for(var s,u=a[n]-a[0]||1,f=u/(n||1)/1e4,c=[],y=0;y<=n;y++){var d=a[y],m=d-s;void 0===s?(c.push(d),s=d):m>f&&(u=Math.min(u,m),c.push(d),s=d)}return{vals:c,minDiff:u}},F.roundUp=function(r,n,a){for(var s,u=0,f=n.length-1,c=0,y=a?0:1,d=a?1:0,m=a?Math.ceil:Math.floor;u<f&&c++<100;)n[s=m((u+f)/2)]<=r?u=s+y:f=s-d;return n[u]},F.sort=function(r,n){for(var a=0,s=0,u=1;u<r.length;u++){var f=n(r[u],r[u-1]);if(f<0?a=1:f>0&&(s=1),a&&s)return r.sort(n)}return s?r:r.reverse()},F.findIndexOfMin=function(r,n){n=n||o;for(var a,s=1/0,u=0;u<r.length;u++){var f=n(r[u]);f<s&&(s=f,a=u)}return a}},93972:function(ne){"use strict";ne.exports=function(F,e){(F.attr("class")||"").split(" ").forEach(function(M){0===M.indexOf("cursor-")&&F.classed(M,!1)}),e&&F.classed("cursor-"+e,!0)}},16576:function(ne,F,e){"use strict";var M=e(76308),k=function(){};ne.exports=function(o){for(var T in o)"function"==typeof o[T]&&(o[T]=k);o.destroy=function(){o.container.parentNode.removeChild(o.container)};var _=document.createElement("div");_.className="no-webgl",_.style.cursor="pointer",_.style.fontSize="24px",_.style.color=M.defaults[0],_.style.position="absolute",_.style.left=_.style.top="0px",_.style.width=_.style.height="100%",_.style["background-color"]=M.lightLine,_.style["z-index"]=30;var p=document.createElement("p");return p.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",p.style.position="relative",p.style.top="50%",p.style.left="50%",p.style.height="30%",p.style.width="50%",p.style.margin="-15% 0 0 -25%",_.appendChild(p),o.container.appendChild(_),o.container.style.background="#FFFFFF",o.container.onclick=function(){window.open("https://get.webgl.org")},!1}},95376:function(ne){"use strict";ne.exports=function(F){return Object.keys(F).sort()}},63084:function(ne,F,e){"use strict";var M=e(38248),k=e(38116).isArrayOrTypedArray;F.aggNums=function(o,T,_,p){var l,t;if((!p||p>_.length)&&(p=_.length),M(T)||(T=!1),k(_[0])){for(t=new Array(p),l=0;l<p;l++)t[l]=F.aggNums(o,T,_[l]);_=t}for(l=0;l<p;l++)M(T)?M(_[l])&&(T=o(+T,+_[l])):T=_[l];return T},F.len=function(o){return F.aggNums(function(T){return T+1},0,o)},F.mean=function(o,T){return T||(T=F.len(o)),F.aggNums(function(_,p){return _+p},0,o)/T},F.midRange=function(o){if(void 0!==o&&0!==o.length)return(F.aggNums(Math.max,null,o)+F.aggNums(Math.min,null,o))/2},F.variance=function(o,T,_){return T||(T=F.len(o)),M(_)||(_=F.mean(o,T)),F.aggNums(function(p,l){return p+Math.pow(l-_,2)},0,o)/T},F.stdev=function(o,T,_){return Math.sqrt(F.variance(o,T,_))},F.median=function(o){var T=o.slice().sort();return F.interp(T,.5)},F.interp=function(o,T){if(!M(T))throw"n should be a finite number";if((T=T*o.length-.5)<0)return o[0];if(T>o.length-1)return o[o.length-1];var _=T%1;return _*o[Math.ceil(T)]+(1-_)*o[Math.floor(T)]}},43080:function(ne,F,e){"use strict";var M=e(72160);ne.exports=function(k){return k?M(k):[0,0,0,1]}},9188:function(ne,F,e){"use strict";var M=e(2264),k=e(43616),o=e(3400),T=null;ne.exports=function(){if(null!==T)return T;T=!1;var _=o.isIE()||o.isSafari()||o.isIOS();if(window.navigator.userAgent&&!_){var p=Array.from(M.CSS_DECLARATIONS).reverse(),l=window.CSS&&window.CSS.supports||window.supportsCSS;if("function"==typeof l)T=p.some(function(r){return l.apply(null,r)});else{var t=k.tester.append("image").attr("style",M.STYLE),i=window.getComputedStyle(t.node()).imageRendering;T=p.some(function(r){var n=r[1];return i===n||i===n.toLowerCase()}),t.remove()}}return T}},72736:function(ne,F,e){"use strict";var M=e(33428),k=e(3400),o=k.strTranslate,T=e(9616),_=e(84284).LINE_SPACING,p=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;F.convertToTspans=function(z,U,R){var j=z.text(),Y=!z.attr("data-notex")&&U&&U._context.typesetMath&&typeof MathJax<"u"&&j.match(p),B=M.select(z.node().parentNode);if(!B.empty()){var V=z.attr("class")?z.attr("class").split(" ")[0]:"text";return B.selectAll("svg."+(V+="-math")).remove(),B.selectAll("g."+V+"-group").remove(),z.style("display",null).attr({"data-unformatted":j,"data-math":"N"}),Y?(U&&U._promises||[]).push(new Promise(function(ie){z.style("display","none");var te=parseInt(z.node().style.fontSize,10);!function($,J,X){var ae,ce,le,pe,we=parseInt((MathJax.version||"").split(".")[0]);if(2===we||3===we){var Te=function(){var ve="math-output-"+k.randstr({},64),xe=(pe=M.select("body").append("div").attr({id:ve}).style({visibility:"hidden",position:"absolute","font-size":J.fontSize+"px"}).text($.replace(l,"\\lt ").replace(t,"\\gt "))).node();return 2===we?MathJax.Hub.Typeset(xe):MathJax.typeset([xe])},ye=function(){var ve=pe.select(2===we?".MathJax_SVG":".MathJax"),xe=!ve.empty()&&pe.select("svg").node();if(xe){var Ce,Oe=xe.getBoundingClientRect();Ce=2===we?M.select("body").select("#MathJax_SVG_glyphs"):ve.select("defs"),X(ve,Ce,Oe)}else k.log("There was an error in the tex syntax.",$),X();pe.remove()};2===we?MathJax.Hub.Queue(function(){return ce=k.extendDeepAll({},MathJax.Hub.config),le=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:i},displayAlign:"left"})},function(){if("SVG"!==(ae=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},Te,ye,function(){if("SVG"!==ae)return MathJax.Hub.setRenderer(ae)},function(){return void 0!==le&&(MathJax.Hub.processSectionDelay=le),MathJax.Hub.Config(ce)}):3===we&&(ce=k.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=i,"svg"!==(ae=MathJax.config.startup.output)&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){Te(),ye(),"svg"!==ae&&(MathJax.config.startup.output=ae),MathJax.config=ce}))}else k.warn("No MathJax version:",MathJax.version)}(Y[2],{fontSize:te},function($,J,X){B.selectAll("svg."+V).remove(),B.selectAll("g."+V+"-group").remove();var ae=$&&$.select("svg");if(!ae||!ae.node())return q(),void ie();var ce=B.append("g").classed(V+"-group",!0).attr({"pointer-events":"none","data-unformatted":j,"data-math":"Y"});ce.node().appendChild(ae.node()),J&&J.node()&&ae.node().insertBefore(J.node().cloneNode(!0),ae.node().firstChild);var le=X.width,pe=X.height;ae.attr({class:V,height:pe,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var we=z.node().style.fill||"black",Te=ae.select("g");Te.attr({fill:we,stroke:we});var ye=Te.node().getBoundingClientRect(),ve=ye.width,xe=ye.height;(ve>le||xe>pe)&&(ae.style("overflow","hidden"),ve=(ye=ae.node().getBoundingClientRect()).width,xe=ye.height);var Ce=+z.attr("x"),Oe=+z.attr("y"),be=-(te||z.node().getBoundingClientRect().height)/4;if("y"===V[0])ce.attr({transform:"rotate("+[-90,Ce,Oe]+")"+o(-ve/2,be-xe/2)});else if("l"===V[0])Oe=be-xe/2;else if("a"===V[0]&&0!==V.indexOf("atitle"))Ce=0,Oe=be;else{var ue=z.attr("text-anchor");Ce-=ve*("middle"===ue?.5:"end"===ue?1:0),Oe=Oe+be-xe/2}ae.attr({x:Ce,y:Oe}),R&&R.call(z,ce),ie(ce)})})):q(),z}function q(){B.empty()||(V=z.attr("class")+"-math",B.select("svg."+V).remove()),z.text("").style("white-space","pre"),function(te,ee){ee=ee.replace(f," ");var $,J=!1,X=[],ae=-1;function ce(){ae++;var ke=document.createElementNS(T.svg,"tspan");M.select(ke).attr({class:"line",dy:ae*_+"em"}),te.appendChild(ke),$=ke;var Se=X;if(X=[{node:ke}],Se.length>1)for(var Pe=1;Pe<Se.length;Pe++)le(Se[Pe])}function le(ke){var Se,Pe=ke.type,Fe={};if("a"===Pe){Se="a";var Be=ke.target,me=ke.href,Me=ke.popup;me&&(Fe={"xlink:xlink:show":"_blank"===Be||"_"!==Be.charAt(0)?"new":"replace",target:Be,"xlink:xlink:href":me},Me&&(Fe.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Me+'");return false;'))}else Se="tspan";ke.style&&(Fe.style=ke.style);var Le=document.createElementNS(T.svg,Se);if("sup"===Pe||"sub"===Pe){pe($,s),$.appendChild(Le);var Ne=document.createElementNS(T.svg,"tspan");pe(Ne,s),M.select(Ne).attr("dy",a[Pe]),Fe.dy=n[Pe],$.appendChild(Le),$.appendChild(Ne)}else $.appendChild(Le);M.select(Le).attr(Fe),$=ke.node=Le,X.push(ke)}function pe(ke,Se){ke.appendChild(document.createTextNode(Se))}function we(ke){if(1!==X.length){var Se=X.pop();ke!==Se.type&&k.log("Start tag <"+Se.type+"> doesnt match end tag <"+ke+">. Pretending it did match.",ee),$=X[X.length-1].node}else k.log("Ignoring unexpected end tag </"+ke+">.",ee)}d.test(ee)?ce():($=te,X=[{node:te}]);for(var Te=ee.split(c),ye=0;ye<Te.length;ye++){var ve=Te[ye],xe=ve.match(y),Ce=xe&&xe[2].toLowerCase(),Oe=r[Ce];if("br"===Ce)ce();else if(void 0===Oe)pe($,E(ve));else if(xe[1])we(Ce);else{var be=xe[4],ue={type:Ce},se=b(be,m);if(se?(se=se.replace(h,"$1 fill:"),Oe&&(se+=";"+Oe)):Oe&&(se=Oe),se&&(ue.style=se),"a"===Ce){J=!0;var ge=b(be,g);if(ge){var Ie=P(ge);Ie&&(ue.href=Ie,ue.target=b(be,x)||"_blank",ue.popup=b(be,v))}}le(ue)}}return J}(z.node(),j)&&z.style("pointer-events","all"),F.positionText(z),R&&R.call(z)}};var l=/(<|&lt;|&#60;)/g,t=/(>|&gt;|&#62;)/g,i=[["$","$"],["\\(","\\)"]],r={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},n={sub:"0.3em",sup:"-0.6em"},a={sub:"-0.21em",sup:"0.42em"},s="\u200b",u=["http:","https:","mailto:","",void 0,":"],f=F.NEWLINES=/(\r\n?|\n)/g,c=/(<[^<>]*>)/,y=/<(\/?)([^ >]*)(\s+(.*))?>/i,d=/<br(\s+.*)?>/i;F.BR_TAG_ALL=/<br(\s+.*)?>/gi;var m=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,g=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,x=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,v=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function b(z,U){if(!z)return null;var R=z.match(U),j=R&&(R[3]||R[4]);return j&&E(j)}var h=/(^|;)\s*color:/;F.plainText=function(z,U){for(var R=void 0!==(U=U||{}).len&&-1!==U.len?U.len:1/0,j=void 0!==U.allowedTags?U.allowedTags:["br"],Y=z.split(c),B=[],V="",q=0,ie=0;ie<Y.length;ie++){var te=Y[ie],ee=te.match(y),$=ee&&ee[2].toLowerCase();if($)-1!==j.indexOf($)&&(B.push(te),V=$);else{var J=te.length;if(q+J<R)B.push(te),q+=J;else if(q<R){var X=R-q;V&&("br"!==V||X<=3||J<=3)&&B.pop(),B.push(R>3?te.substr(0,X-3)+"...":te.substr(0,X));break}V=""}}return B.join("")};var S={mu:"\u03bc",amp:"&",lt:"<",gt:">",nbsp:"\xa0",times:"\xd7",plusmn:"\xb1",deg:"\xb0"},w=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function E(z){return z.replace(w,function(U,R){return("#"===R.charAt(0)?function(j){if(!(j>1114111)){var Y=String.fromCodePoint;if(Y)return Y(j);var B=String.fromCharCode;return j<=65535?B(j):B(55232+(j>>10),j%1024+56320)}}("x"===R.charAt(1)?parseInt(R.substr(2),16):parseInt(R.substr(1),10)):S[R])||U})}function P(z){var U=encodeURI(decodeURI(z)),R=document.createElement("a"),j=document.createElement("a");R.href=z,j.href=U;var B=j.protocol;return-1!==u.indexOf(R.protocol)&&-1!==u.indexOf(B)?U:""}function I(z,U,R){var j,Y,B,V=R.horizontalAlign,q=R.verticalAlign||"top",ie=z.node().getBoundingClientRect(),te=U.node().getBoundingClientRect();return Y="bottom"===q?function(){return ie.bottom-j.height}:"middle"===q?function(){return ie.top+(ie.height-j.height)/2}:function(){return ie.top},B="right"===V?function(){return ie.right-j.width}:"center"===V?function(){return ie.left+(ie.width-j.width)/2}:function(){return ie.left},function(){j=this.node().getBoundingClientRect();var ee=B()-te.left,$=Y()-te.top,J=R.gd||{};if(R.gd){J._fullLayout._calcInverseTransform(J);var X=k.apply3DTransform(J._fullLayout._invTransform)(ee,$);ee=X[0],$=X[1]}return this.style({top:$+"px",left:ee+"px","z-index":1e3}),this}}F.convertEntities=E,F.sanitizeHTML=function(z){z=z.replace(f," ");for(var U=document.createElement("p"),R=U,j=[],Y=z.split(c),B=0;B<Y.length;B++){var V=Y[B],q=V.match(y),ie=q&&q[2].toLowerCase();if(ie in r)if(q[1])j.length&&(R=j.pop());else{var te=q[4],ee=b(te,m),$=ee?{style:ee}:{};if("a"===ie){var J=b(te,g);if(J){var X=P(J);if(X){$.href=X;var ae=b(te,x);ae&&($.target=ae)}}}var ce=document.createElement(ie);R.appendChild(ce),M.select(ce).attr($),R=ce,j.push(ce)}else R.appendChild(document.createTextNode(E(V)))}return U.innerHTML},F.lineCount=function(z){return z.selectAll("tspan.line").size()||1},F.positionText=function(z,U,R){return z.each(function(){var j=M.select(this);function Y(q,ie){return void 0===ie?null===(ie=j.attr(q))&&(j.attr(q,0),ie=0):j.attr(q,ie),ie}var B=Y("x",U),V=Y("y",R);"text"===this.nodeName&&j.selectAll("tspan.line").attr({x:B,y:V})})};var O="1px ";F.makeTextShadow=function(z){return O+O+O+z+", -"+O+"-"+O+O+z+", "+O+"-"+O+O+z+", -"+O+O+O+z},F.makeEditable=function(z,U){var R=U.gd,j=U.delegate,Y=M.dispatch("edit","input","cancel"),B=j||z;if(z.style({"pointer-events":j?"none":"all"}),1!==z.size())throw new Error("boo");function V(){var ie,te,ee,$,J;ie=M.select(R).select(".svg-container"),te=ie.append("div"),ee=z.node().style,$=parseFloat(ee.fontSize||12),void 0===(J=U.text)&&(J=z.attr("data-unformatted")),te.classed("plugin-editable editable",!0).style({position:"absolute","font-family":ee.fontFamily||"Arial","font-size":$,color:U.fill||ee.fill||"black",opacity:1,"background-color":U.background||"transparent",outline:"#ffffff33 1px solid",margin:[-$/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(J).call(I(z,ie,U)).on("blur",function(){R._editing=!1,z.text(this.textContent).style({opacity:1});var ce,le=M.select(this).attr("class");(ce=le?"."+le.split(" ")[0]+"-math-group":"[class*=-math-group]")&&M.select(z.node().parentNode).select(ce).style({opacity:0});var pe=this.textContent;M.select(this).transition().duration(0).remove(),M.select(document).on("mouseup",null),Y.edit.call(z,pe)}).on("focus",function(){var ce=this;R._editing=!0,M.select(document).on("mouseup",function(){if(M.event.target===ce)return!1;document.activeElement===te.node()&&te.node().blur()})}).on("keyup",function(){27===M.event.which?(R._editing=!1,z.style({opacity:1}),M.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),Y.cancel.call(z,this.textContent)):(Y.input.call(z,this.textContent),M.select(this).call(I(z,ie,U)))}).on("keydown",function(){13===M.event.which&&this.blur()}).call(q),z.style({opacity:0});var X,ae=B.attr("class");(X=ae?"."+ae.split(" ")[0]+"-math-group":"[class*=-math-group]")&&M.select(z.node().parentNode).select(X).style({opacity:0})}function q(ie){var te=ie.node(),ee=document.createRange();ee.selectNodeContents(te);var $=window.getSelection();$.removeAllRanges(),$.addRange(ee),te.focus()}return U.immediate?V():B.on("click",V),M.rebind(z,Y,"on")}},91200:function(ne,F){"use strict";var e={};function M(k){k&&null!==k.timer&&(clearTimeout(k.timer),k.timer=null)}F.throttle=function(k,o,T){var _=e[k],p=Date.now();if(!_){for(var l in e)e[l].ts<p-6e4&&delete e[l];_=e[k]={ts:0,timer:null}}function t(){T(),_.ts=Date.now(),_.onDone&&(_.onDone(),_.onDone=null)}M(_),p>_.ts+o?t():_.timer=setTimeout(function(){t(),_.timer=null},o)},F.done=function(k){var o=e[k];return o&&o.timer?new Promise(function(T){var _=o.onDone;o.onDone=function(){_&&_(),T(),o.onDone=null}}):Promise.resolve()},F.clear=function(k){if(k)M(e[k]),delete e[k];else for(var o in e)F.clear(o)}},36896:function(ne,F,e){"use strict";var M=e(38248);ne.exports=function(k,o){if(k>0)return Math.log(k)/Math.LN10;var T=Math.log(Math.min(o[0],o[1]))/Math.LN10;return M(T)||(T=Math.log(Math.max(o[0],o[1]))/Math.LN10-6),T}},59972:function(ne,F,e){"use strict";var M=ne.exports={},k=e(79552).locationmodeToLayer,o=e(55712).NO;M.getTopojsonName=function(T){return[T.scope.replace(/ /g,"-"),"_",T.resolution.toString(),"m"].join("")},M.getTopojsonPath=function(T,_){return T+_+".json"},M.getTopojsonFeatures=function(T,_){return o(_,_.objects[k[T.locationmode]]).features}},11680:function(ne){"use strict";ne.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},6580:function(ne){"use strict";ne.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},69820:function(ne,F,e){"use strict";var M=e(24040);ne.exports=function(k){for(var o,T,_=M.layoutArrayContainers,p=M.layoutArrayRegexes,l=k.split("[")[0],t=0;t<p.length;t++)if((T=k.match(p[t]))&&0===T.index){o=T[0];break}if(o||(o=_[_.indexOf(l)]),!o)return!1;var i=k.substr(o.length);return i?!!(T=i.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:o,index:Number(T[1]),property:T[3]||""}:{array:o,index:"",property:""}}},67824:function(ne,F,e){"use strict";var M=e(92880).extendFlat,k=e(63620),o={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},T={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},_=o.flags.slice().concat(["fullReplot"]),p=T.flags.slice().concat("layoutReplot");function l(r){for(var n={},a=0;a<r.length;a++)n[r[a]]=!1;return n}function t(r,n,a){var s=M({},r);for(var u in s){var f=s[u];k(f)&&(s[u]=i(f,n,0,u))}return"from-root"===a&&(s.editType=n),s}function i(r,n,a,s){if(r.valType){var u=M({},r);if(u.editType=n,Array.isArray(r.items)){u.items=new Array(r.items.length);for(var f=0;f<r.items.length;f++)u.items[f]=i(r.items[f],n)}return u}return t(r,n,"_"===s.charAt(0)?"nested":"from-root")}ne.exports={traces:o,layout:T,traceFlags:function(){return l(_)},layoutFlags:function(){return l(p)},update:function(r,n){var a=n.editType;if(a&&"none"!==a)for(var s=a.split("+"),u=0;u<s.length;u++)r[s[u]]=!0},overrideAll:t}},93404:function(ne,F,e){"use strict";var M=e(38248),k=e(61784),o=e(24040),T=e(3400),_=e(7316),p=e(79811),l=e(76308),t=p.cleanId,i=p.getFromTrace,r=o.traceIs;function n(g,x){var v=g[x],b=x.charAt(0);v&&"paper"!==v&&(g[x]=t(v,b,!0))}function a(g){function x(v,b){g[v]&&(!g.title||!g.title[b])&&(g.title||(g.title={}),g.title[b]=g[v],delete g[v])}g&&("string"!=typeof g.title&&"number"!=typeof g.title||(g.title={text:g.title}),x("titlefont","font"),x("titleposition","position"),x("titleside","side"),x("titleoffset","offset"))}function s(g){if(!T.isPlainObject(g))return!1;var x=g.name;return delete g.name,delete g.showlegend,("string"==typeof x||"number"==typeof x)&&String(x)}function u(g,x,v,b){if(v&&!b)return g;if(b&&!v||!g.trim())return x;if(!x.trim())return g;var h,S=Math.min(g.length,x.length);for(h=0;h<S&&g.charAt(h)===x.charAt(h);h++);return g.substr(0,h).trim()}function f(g){var x="middle",v="center";return"string"==typeof g&&(-1!==g.indexOf("top")?x="top":-1!==g.indexOf("bottom")&&(x="bottom"),-1!==g.indexOf("left")?v="left":-1!==g.indexOf("right")&&(v="right")),x+" "+v}function c(g,x){return x in g&&"object"==typeof g[x]&&0===Object.keys(g[x]).length}F.clearPromiseQueue=function(g){Array.isArray(g._promises)&&g._promises.length>0&&T.log("Clearing previous rejected promises from queue."),g._promises=[]},F.cleanLayout=function(g){var x,v;g||(g={}),g.xaxis1&&(g.xaxis||(g.xaxis=g.xaxis1),delete g.xaxis1),g.yaxis1&&(g.yaxis||(g.yaxis=g.yaxis1),delete g.yaxis1),g.scene1&&(g.scene||(g.scene=g.scene1),delete g.scene1);var b=(_.subplotsRegistry.cartesian||{}).attrRegex,h=(_.subplotsRegistry.polar||{}).attrRegex,S=(_.subplotsRegistry.ternary||{}).attrRegex,w=(_.subplotsRegistry.gl3d||{}).attrRegex,E=Object.keys(g);for(x=0;x<E.length;x++){var P=E[x];if(b&&b.test(P)){var I=g[P];I.anchor&&"free"!==I.anchor&&(I.anchor=t(I.anchor)),I.overlaying&&(I.overlaying=t(I.overlaying)),I.type||(I.isdate?I.type="date":I.islog?I.type="log":!1===I.isdate&&!1===I.islog&&(I.type="linear")),"withzero"!==I.autorange&&"tozero"!==I.autorange||(I.autorange=!0,I.rangemode="tozero"),I.insiderange&&delete I.range,delete I.islog,delete I.isdate,delete I.categories,c(I,"domain")&&delete I.domain,void 0!==I.autotick&&(void 0===I.tickmode&&(I.tickmode=I.autotick?"auto":"linear"),delete I.autotick),a(I)}else if(h&&h.test(P))a(g[P].radialaxis);else if(S&&S.test(P)){var O=g[P];a(O.aaxis),a(O.baxis),a(O.caxis)}else if(w&&w.test(P)){var z=g[P],U=z.cameraposition;if(Array.isArray(U)&&4===U[0].length){var j=U[1],Y=U[2],B=k([],U[0]),V=[];for(v=0;v<3;++v)V[v]=j[v]+Y*B[2+4*v];z.camera={eye:{x:V[0],y:V[1],z:V[2]},center:{x:j[0],y:j[1],z:j[2]},up:{x:0,y:0,z:1}},delete z.cameraposition}a(z.xaxis),a(z.yaxis),a(z.zaxis)}}var q=Array.isArray(g.annotations)?g.annotations.length:0;for(x=0;x<q;x++){var ie=g.annotations[x];T.isPlainObject(ie)&&(ie.ref&&("paper"===ie.ref?(ie.xref="paper",ie.yref="paper"):"data"===ie.ref&&(ie.xref="x",ie.yref="y"),delete ie.ref),n(ie,"xref"),n(ie,"yref"))}var te=Array.isArray(g.shapes)?g.shapes.length:0;for(x=0;x<te;x++){var ee=g.shapes[x];T.isPlainObject(ee)&&(n(ee,"xref"),n(ee,"yref"))}var $=Array.isArray(g.images)?g.images.length:0;for(x=0;x<$;x++){var J=g.images[x];T.isPlainObject(J)&&(n(J,"xref"),n(J,"yref"))}var X=g.legend;return X&&(X.x>3?(X.x=1.02,X.xanchor="left"):X.x<-2&&(X.x=-.02,X.xanchor="right"),X.y>3?(X.y=1.02,X.yanchor="bottom"):X.y<-2&&(X.y=-.02,X.yanchor="top")),a(g),"rotate"===g.dragmode&&(g.dragmode="orbit"),l.clean(g),g.template&&g.template.layout&&F.cleanLayout(g.template.layout),g},F.cleanData=function(g){for(var x=0;x<g.length;x++){var v,b=g[x];if("histogramy"===b.type&&"xbins"in b&&!("ybins"in b)&&(b.ybins=b.xbins,delete b.xbins),b.error_y&&"opacity"in b.error_y){var h=l.defaults,S=b.error_y.color||(r(b,"bar")?l.defaultLine:h[x%h.length]);b.error_y.color=l.addOpacity(l.rgb(S),l.opacity(S)*b.error_y.opacity),delete b.error_y.opacity}if("bardir"in b&&("h"!==b.bardir||!r(b,"bar")&&"histogram"!==b.type.substr(0,9)||(b.orientation="h",F.swapXYData(b)),delete b.bardir),"histogramy"===b.type&&F.swapXYData(b),"histogramx"!==b.type&&"histogramy"!==b.type||(b.type="histogram"),"scl"in b&&!("colorscale"in b)&&(b.colorscale=b.scl,delete b.scl),"reversescl"in b&&!("reversescale"in b)&&(b.reversescale=b.reversescl,delete b.reversescl),b.xaxis&&(b.xaxis=t(b.xaxis,"x")),b.yaxis&&(b.yaxis=t(b.yaxis,"y")),r(b,"gl3d")&&b.scene&&(b.scene=_.subplotsRegistry.gl3d.cleanId(b.scene)),!r(b,"pie-like")&&!r(b,"bar-like"))if(Array.isArray(b.textposition))for(v=0;v<b.textposition.length;v++)b.textposition[v]=f(b.textposition[v]);else b.textposition&&(b.textposition=f(b.textposition));var w=o.getModule(b);if(w&&w.colorbar){var E=w.colorbar.container,P=E?b[E]:b;P&&P.colorscale&&("YIGnBu"===P.colorscale&&(P.colorscale="YlGnBu"),"YIOrRd"===P.colorscale&&(P.colorscale="YlOrRd"))}if("surface"===b.type&&T.isPlainObject(b.contours)){var I=["x","y","z"];for(v=0;v<I.length;v++){var O=b.contours[I[v]];T.isPlainObject(O)&&(O.highlightColor&&(O.highlightcolor=O.highlightColor,delete O.highlightColor),O.highlightWidth&&(O.highlightwidth=O.highlightWidth,delete O.highlightWidth))}}if("candlestick"===b.type||"ohlc"===b.type){var z=!1!==(b.increasing||{}).showlegend,U=!1!==(b.decreasing||{}).showlegend,R=s(b.increasing),j=s(b.decreasing);if(!1!==R&&!1!==j){var Y=u(R,j,z,U);Y&&(b.name=Y)}else!R&&!j||b.name||(b.name=R||j)}if(Array.isArray(b.transforms)){var B=b.transforms;for(v=0;v<B.length;v++){var V=B[v];if(T.isPlainObject(V))switch(V.type){case"filter":V.filtersrc&&(V.target=V.filtersrc,delete V.filtersrc),V.calendar&&(V.valuecalendar||(V.valuecalendar=V.calendar),delete V.calendar);break;case"groupby":if(V.styles=V.styles||V.style,V.styles&&!Array.isArray(V.styles)){var q=V.styles,ie=Object.keys(q);V.styles=[];for(var te=0;te<ie.length;te++)V.styles.push({target:ie[te],value:q[ie[te]]})}}}}c(b,"line")&&delete b.line,"marker"in b&&(c(b.marker,"line")&&delete b.marker.line,c(b,"marker")&&delete b.marker),l.clean(b),b.autobinx&&(delete b.autobinx,delete b.xbins),b.autobiny&&(delete b.autobiny,delete b.ybins),a(b),b.colorbar&&a(b.colorbar),b.marker&&b.marker.colorbar&&a(b.marker.colorbar),b.line&&b.line.colorbar&&a(b.line.colorbar),b.aaxis&&a(b.aaxis),b.baxis&&a(b.baxis)}},F.swapXYData=function(g){var x;if(T.swapAttrs(g,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(g.z)&&Array.isArray(g.z[0])&&(g.transpose?delete g.transpose:g.transpose=!0),g.error_x&&g.error_y){var v=g.error_y,b="copy_ystyle"in v?v.copy_ystyle:!(v.color||v.thickness||v.width);T.swapAttrs(g,["error_?.copy_ystyle"]),b&&T.swapAttrs(g,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof g.hoverinfo){var h=g.hoverinfo.split("+");for(x=0;x<h.length;x++)"x"===h[x]?h[x]="y":"y"===h[x]&&(h[x]="x");g.hoverinfo=h.join("+")}},F.coerceTraceIndices=function(g,x){if(M(x))return[x];if(!Array.isArray(x)||!x.length)return g.data.map(function(h,S){return S});if(Array.isArray(x)){for(var v=[],b=0;b<x.length;b++)T.isIndex(x[b],g.data.length)?v.push(x[b]):T.warn("trace index (",x[b],") is not a number or is out of bounds");return v}return x},F.manageArrayContainers=function(g,x,v){var b=g.obj,h=g.parts,S=h.length,w=h[S-1],E=M(w);if(E&&null===x){var P=h.slice(0,S-1).join(".");T.nestedProperty(b,P).get().splice(w,1)}else E&&void 0===g.get()&&void 0===g.get()&&(v[g.astr]=null),g.set(x)};var y=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function d(g){var x=g.search(y);if(x>0)return g.substr(0,x)}F.hasParent=function(g,x){for(var v=d(x);v;){if(v in g)return!0;v=d(v)}return!1};var m=["x","y","z"];F.clearAxisTypes=function(g,x,v){for(var b=0;b<x.length;b++)for(var h=g._fullData[b],S=0;S<3;S++){var w=i(g,h,m[S]);if(w&&"log"!==w.type){var E=w._name,P=w._id.substr(1);if("scene"===P.substr(0,5)){if(void 0!==v[P])continue;E=P+"."+E}var I=E+".type";void 0===v[E]&&void 0===v[I]&&T.nestedProperty(g.layout,I).set(null)}}}},22448:function(ne,F,e){"use strict";var M=e(36424);F._doPlot=M._doPlot,F.newPlot=M.newPlot,F.restyle=M.restyle,F.relayout=M.relayout,F.redraw=M.redraw,F.update=M.update,F._guiRestyle=M._guiRestyle,F._guiRelayout=M._guiRelayout,F._guiUpdate=M._guiUpdate,F._storeDirectGUIEdit=M._storeDirectGUIEdit,F.react=M.react,F.extendTraces=M.extendTraces,F.prependTraces=M.prependTraces,F.addTraces=M.addTraces,F.deleteTraces=M.deleteTraces,F.moveTraces=M.moveTraces,F.purge=M.purge,F.addFrames=M.addFrames,F.deleteFrames=M.deleteFrames,F.animate=M.animate,F.setPlotConfig=M.setPlotConfig;var k=e(52200).getGraphDiv,o=e(4016).eraseActiveShape;F.deleteActiveShape=function(_){return o(k(_))},F.toImage=e(67024),F.validate=e(21480),F.downloadImage=e(39792);var T=e(94828);F.makeTemplate=T.makeTemplate,F.validateTemplate=T.validateTemplate},17680:function(ne,F,e){"use strict";var M=e(63620),k=e(16628),o=e(24248),T=e(14952).sorterAsc,_=e(24040);F.containerArrayMatch=e(69820);var p=F.isAddVal=function(t){return"add"===t||M(t)},l=F.isRemoveVal=function(t){return null===t||"remove"===t};F.applyContainerArrayChanges=function(t,i,r,n,a){var s=i.astr,u=_.getComponentMethod(s,"supplyLayoutDefaults"),f=_.getComponentMethod(s,"draw"),c=_.getComponentMethod(s,"drawOne"),y=n.replot||n.recalc||u===k||f===k,d=t.layout,m=t._fullLayout;if(r[""]){Object.keys(r).length>1&&o.warn("Full array edits are incompatible with other edits",s);var g=r[""][""];if(l(g))i.set(null);else{if(!Array.isArray(g))return o.warn("Unrecognized full array edit value",s,g),!0;i.set(g)}return!y&&(u(d,m),f(t),!0)}var x,v,b,h,S,w,E,I=Object.keys(r).map(Number).sort(T),O=i.get(),z=O||[],U=a(m,s).get(),R=[],j=-1,Y=z.length;for(x=0;x<I.length;x++)if(h=r[b=I[x]],S=Object.keys(h),E=p(w=h[""]),b<0||b>z.length-(E?0:1))o.warn("index out of range",s,b);else if(void 0!==w)S.length>1&&o.warn("Insertion & removal are incompatible with edits to the same index.",s,b),l(w)?R.push(b):E?("add"===w&&(w={}),z.splice(b,0,w),U&&U.splice(b,0,{})):o.warn("Unrecognized full object edit value",s,b,w),-1===j&&(j=b);else for(v=0;v<S.length;v++)a(z[b],S[v],s+"["+b+"].").set(h[S[v]]);for(x=R.length-1;x>=0;x--)z.splice(R[x],1),U&&U.splice(R[x],1);if(z.length?O||i.set(z):i.set(null),y)return!1;if(u(d,m),c!==k){var B;if(-1===j)B=I;else{for(Y=Math.max(z.length,Y),B=[],x=0;x<I.length&&!((b=I[x])>=j);x++)B.push(b);for(x=j;x<Y;x++)B.push(x)}for(x=0;x<B.length;x++)c(t,B[x])}else f(t);return!0}},36424:function(ne,F,e){"use strict";var M=e(33428),k=e(38248),o=e(52264),T=e(3400),_=T.nestedProperty,p=e(95924),l=e(94552),t=e(24040),i=e(73060),r=e(7316),n=e(54460),a=e(96312),s=e(94724),u=e(43616),f=e(76308),c=e(42464).initInteractions,y=e(9616),d=e(22676).clearOutline,m=e(20556).dfltConfig,g=e(17680),x=e(93404),v=e(39172),b=e(67824),h=e(33816).AX_NAME_PATTERN,S=0;function w(ke){var Se=ke._fullLayout;Se._redrawFromAutoMarginCount?Se._redrawFromAutoMarginCount--:ke.emit("plotly_afterplot")}function E(ke,Se){try{ke._fullLayout._paper.style("background",Se)}catch(Pe){T.error(Pe)}}function P(ke,Se){E(ke,f.combine(Se,"white"))}function I(ke,Se){if(!ke._context){ke._context=T.extendDeep({},m);var Pe=M.select("base");ke._context._baseUrl=Pe.size()&&Pe.attr("href")?window.location.href.split("#")[0]:""}var Fe,Be,me,Me=ke._context;if(Se){for(Be=Object.keys(Se),Fe=0;Fe<Be.length;Fe++)"editable"!==(me=Be[Fe])&&"edits"!==me&&me in Me&&(Me[me]="setBackground"===me&&"opaque"===Se[me]?P:Se[me]);Se.plot3dPixelRatio&&!Me.plotGlPixelRatio&&(Me.plotGlPixelRatio=Me.plot3dPixelRatio);var Le=Se.editable;if(void 0!==Le)for(Me.editable=Le,Be=Object.keys(Me.edits),Fe=0;Fe<Be.length;Fe++)Me.edits[Be[Fe]]=Le;if(Se.edits)for(Be=Object.keys(Se.edits),Fe=0;Fe<Be.length;Fe++)(me=Be[Fe])in Me.edits&&(Me.edits[me]=Se.edits[me]);Me._exportedPlot=Se._exportedPlot}Me.staticPlot&&(Me.editable=!1,Me.edits={},Me.autosizable=!1,Me.scrollZoom=!1,Me.doubleClick=!1,Me.showTips=!1,Me.showLink=!1,Me.displayModeBar=!1),"hover"!==Me.displayModeBar||o||(Me.displayModeBar=!0),"transparent"!==Me.setBackground&&"function"==typeof Me.setBackground||(Me.setBackground=E),Me._hasZeroHeight=Me._hasZeroHeight||0===ke.clientHeight,Me._hasZeroWidth=Me._hasZeroWidth||0===ke.clientWidth;var Ne=Me.scrollZoom,Re=Me._scrollZoom={};if(!0===Ne)Re.cartesian=1,Re.gl3d=1,Re.geo=1,Re.mapbox=1;else if("string"==typeof Ne){var He=Ne.split("+");for(Fe=0;Fe<He.length;Fe++)Re[He[Fe]]=1}else!1!==Ne&&(Re.gl3d=1,Re.geo=1,Re.mapbox=1)}function O(ke,Se){var Pe,Fe,Be=Se+1,me=[];for(Pe=0;Pe<ke.length;Pe++)(Fe=ke[Pe])<0?me.push(Be+Fe):me.push(Fe);return me}function z(ke,Se,Pe){var Fe,Be;for(Fe=0;Fe<Se.length;Fe++){if((Be=Se[Fe])!==parseInt(Be,10))throw new Error("all values in "+Pe+" must be integers");if(Be>=ke.data.length||Be<-ke.data.length)throw new Error(Pe+" must be valid indices for gd.data.");if(Se.indexOf(Be,Fe+1)>-1||Be>=0&&Se.indexOf(-ke.data.length+Be)>-1||Be<0&&Se.indexOf(ke.data.length+Be)>-1)throw new Error("each index in "+Pe+" must be unique.")}}function U(ke,Se,Pe){if(!Array.isArray(ke.data))throw new Error("gd.data must be an array.");if(void 0===Se)throw new Error("currentIndices is a required argument.");if(Array.isArray(Se)||(Se=[Se]),z(ke,Se,"currentIndices"),void 0===Pe||Array.isArray(Pe)||(Pe=[Pe]),void 0!==Pe&&z(ke,Pe,"newIndices"),void 0!==Pe&&Se.length!==Pe.length)throw new Error("current and new indices must be of equal length.")}function R(ke,Se,Pe,Fe,Be){!function(nt,ft,ht,Tt){var At=T.isPlainObject(Tt);if(!Array.isArray(nt.data))throw new Error("gd.data must be an array");if(!T.isPlainObject(ft))throw new Error("update must be a key:value object");if(void 0===ht)throw new Error("indices must be an integer or array of integers");for(var _t in z(nt,ht,"indices"),ft){if(!Array.isArray(ft[_t])||ft[_t].length!==ht.length)throw new Error("attribute "+_t+" must be an array of length equal to indices array length");if(At&&(!(_t in Tt)||!Array.isArray(Tt[_t])||Tt[_t].length!==ft[_t].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(ke,Se,Pe,Fe);for(var me=function(nt,ft,ht,Tt){var _t,ot,it,Pt,jt=T.isPlainObject(Tt),Ut=[];for(var Rt in Array.isArray(ht)||(ht=[ht]),ht=O(ht,nt.data.length-1),ft)for(var Je=0;Je<ht.length;Je++){if(_t=(ot=_(nt.data[ht[Je]],Rt)).get(),!T.isArrayOrTypedArray(it=ft[Rt][Je]))throw new Error("attribute: "+Rt+" index: "+Je+" must be an array");if(!T.isArrayOrTypedArray(_t))throw new Error("cannot extend missing or non-array attribute: "+Rt);if(_t.constructor!==it.constructor)throw new Error("cannot extend array with an array of a different type: "+Rt);k(Pt=jt?Tt[Rt][Je]:Tt)||(Pt=-1),Ut.push({prop:ot,target:_t,insert:it,maxp:Math.floor(Pt)})}return Ut}(ke,Se,Pe,Fe),Me={},Le={},Ne=0;Ne<me.length;Ne++){var Re=me[Ne].prop,Ze=Be(me[Ne].target,me[Ne].insert,me[Ne].maxp);Re.set(Ze[0]),Array.isArray(Me[Re.astr])||(Me[Re.astr]=[]),Me[Re.astr].push(Ze[1]),Array.isArray(Le[Re.astr])||(Le[Re.astr]=[]),Le[Re.astr].push(me[Ne].target.length)}return{update:Me,maxPoints:Le}}function j(ke,Se){var Pe=new ke.constructor(ke.length+Se.length);return Pe.set(ke),Pe.set(Se,ke.length),Pe}function Y(ke,Se,Pe,Fe){ke=T.getGraphDiv(ke),x.clearPromiseQueue(ke);var Be={};if("string"==typeof Se)Be[Se]=Pe;else{if(!T.isPlainObject(Se))return T.warn("Restyle fail.",Se,Pe,Fe),Promise.reject();Be=T.extendFlat({},Se),void 0===Fe&&(Fe=Pe)}Object.keys(Be).length&&(ke.changed=!0);var me=x.coerceTraceIndices(ke,Fe),Me=ie(ke,Be,me),Le=Me.flags;Le.calc&&(ke.calcdata=void 0),Le.clearAxisTypes&&x.clearAxisTypes(ke,me,{});var Ne=[];Le.fullReplot?Ne.push(F._doPlot):(Ne.push(r.previousPromises),r.supplyDefaults(ke),Le.markerSize&&(r.doCalcdata(ke),J(Ne)),Le.style&&Ne.push(v.doTraceStyle),Le.colorbars&&Ne.push(v.doColorBars),Ne.push(w)),Ne.push(r.rehover,r.redrag,r.reselect),l.add(ke,Y,[ke,Me.undoit,Me.traces],Y,[ke,Me.redoit,Me.traces]);var Re=T.syncOrAsync(Ne,ke);return Re&&Re.then||(Re=Promise.resolve()),Re.then(function(){return ke.emit("plotly_restyle",Me.eventData),ke})}function B(ke){return void 0===ke?null:ke}function V(ke,Se){return Se?function(Pe,Fe,Be){var me=_(Pe,Fe),Me=me.set;return me.set=function(Le){q((Be||"")+Fe,me.get(),Le,ke),Me(Le)},me}:_}function q(ke,Se,Pe,Fe){if(Array.isArray(Se)||Array.isArray(Pe))for(var Be=Array.isArray(Se)?Se:[],me=Array.isArray(Pe)?Pe:[],Me=Math.max(Be.length,me.length),Le=0;Le<Me;Le++)q(ke+"["+Le+"]",Be[Le],me[Le],Fe);else if(T.isPlainObject(Se)||T.isPlainObject(Pe)){var Ne=T.isPlainObject(Se)?Se:{},Re=T.isPlainObject(Pe)?Pe:{},He=T.extendFlat({},Ne,Re);for(var Ze in He)q(ke+"."+Ze,Ne[Ze],Re[Ze],Fe)}else void 0===Fe[ke]&&(Fe[ke]=B(Se))}function ie(ke,Se,Pe){var Fe,Be=ke._fullLayout,me=ke._fullData,Me=ke.data,Le=Be._guiEditing,Ne=V(Be._preGUI,Le),Re=T.extendDeepAll({},Se);te(Se);var He,Ze=b.traceFlags(),nt={},ft={};function ht(){return Pe.map(function(){})}function Tt(Jt){var an=n.id2name(Jt);-1===He.indexOf(an)&&He.push(an)}function At(Jt){return"LAYOUT"+Jt+".autorange"}function _t(Jt){return"LAYOUT"+Jt+".range"}function ot(Jt){for(var an=Jt;an<me.length;an++)if(me[an]._input===Me[Jt])return me[an]}function it(Jt,an,Xt){if(Array.isArray(Jt))Jt.forEach(function(An){it(An,an,Xt)});else if(!(Jt in Se)&&!x.hasParent(Se,Jt)){var Gn;if("LAYOUT"===Jt.substr(0,6))Gn=Ne(ke.layout,Jt.replace("LAYOUT",""));else{var Dn=Pe[Xt];Gn=V(Be._tracePreGUI[ot(Dn)._fullInput.uid],Le)(Me[Dn],Jt)}Jt in ft||(ft[Jt]=ht()),void 0===ft[Jt][Xt]&&(ft[Jt][Xt]=B(Gn.get())),void 0!==an&&Gn.set(an)}}function Pt(Jt){return function(an){return me[an][Jt]}}function jt(Jt){return function(an,Xt){return!1===an?me[Pe[Xt]][Jt]:null}}for(var Ut in Se){if(x.hasParent(Se,Ut))throw new Error("cannot set "+Ut+" and a parent attribute simultaneously");var Rt,Je,et,qe,$e,pt,ct=Se[Ut];if("autobinx"!==Ut&&"autobiny"!==Ut||(Ut=Ut.charAt(Ut.length-1)+"bins",ct=Array.isArray(ct)?ct.map(jt(Ut)):!1===ct?Pe.map(Pt(Ut)):null),nt[Ut]=ct,"LAYOUT"!==Ut.substr(0,6)){for(ft[Ut]=ht(),Fe=0;Fe<Pe.length;Fe++)if(Rt=Me[Pe[Fe]],Je=ot(Pe[Fe]),qe=(et=V(Be._tracePreGUI[Je._fullInput.uid],Le)(Rt,Ut)).get(),void 0!==($e=Array.isArray(ct)?ct[Fe%ct.length]:ct)){var Ve=et.parts[et.parts.length-1],Ge=Ut.substr(0,Ut.length-Ve.length-1),ut=Ge?Ge+".":"",Qe=Ge?_(Je,Ge).get():Je;if((pt=i.getTraceValObject(Je,et.parts))&&pt.impliedEdits&&null!==$e)for(var yt in pt.impliedEdits)it(T.relativeAttr(Ut,yt),pt.impliedEdits[yt],Fe);else if("thicknessmode"!==Ve&&"lenmode"!==Ve||qe===$e||"fraction"!==$e&&"pixels"!==$e||!Qe){if("type"===Ut&&("pie"===$e!=("pie"===qe)||"funnelarea"===$e!=("funnelarea"===qe))){var wt="x",kt="y";"bar"!==$e&&"bar"!==qe||"h"!==Rt.orientation||(wt="y",kt="x"),T.swapAttrs(Rt,["?","?src"],"labels",wt),T.swapAttrs(Rt,["d?","?0"],"label",wt),T.swapAttrs(Rt,["?","?src"],"values",kt),"pie"===qe||"funnelarea"===qe?(_(Rt,"marker.color").set(_(Rt,"marker.colors").get()),Be._pielayer.selectAll("g.trace").remove()):t.traceIs(Rt,"cartesian")&&_(Rt,"marker.colors").set(_(Rt,"marker.color").get())}}else{var vt=Be._size,Lt=Qe.orient,St="top"===Lt||"bottom"===Lt;if("thicknessmode"===Ve){var Ot=St?vt.h:vt.w;it(ut+"thickness",Qe.thickness*("fraction"===$e?1/Ot:Ot),Fe)}else{var Nt=St?vt.w:vt.h;it(ut+"len",Qe.len*("fraction"===$e?1/Nt:Nt),Fe)}}if(ft[Ut][Fe]=B(qe),-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(Ut)){if("orientation"===Ut){et.set($e);var Bt=Rt.x&&!Rt.y?"h":"v";if((et.get()||Bt)===Je.orientation)continue}else"orientationaxes"===Ut&&(Rt.orientation={v:"h",h:"v"}[Je.orientation]);x.swapXYData(Rt),Ze.calc=Ze.clearAxisTypes=!0}else-1!==r.dataArrayContainers.indexOf(et.parts[0])?(x.manageArrayContainers(et,$e,ft),Ze.calc=!0):(pt?pt.arrayOk&&!t.traceIs(Je,"regl")&&(T.isArrayOrTypedArray($e)||T.isArrayOrTypedArray(qe))?Ze.calc=!0:b.update(Ze,pt):Ze.calc=!0,et.set($e))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(Ut)&&n.swap(ke,Pe),"orientationaxes"===Ut){var Vt=_(ke.layout,"hovermode"),nn=Vt.get();"x"===nn?Vt.set("y"):"y"===nn?Vt.set("x"):"x unified"===nn?Vt.set("y unified"):"y unified"===nn&&Vt.set("x unified")}if(-1!==["orientation","type"].indexOf(Ut)){for(He=[],Fe=0;Fe<Pe.length;Fe++){var gn=Me[Pe[Fe]];t.traceIs(gn,"cartesian")&&(Tt(gn.xaxis||"x"),Tt(gn.yaxis||"y"))}it(He.map(At),!0,0),it(He.map(_t),[0,1],0)}}else et=Ne(ke.layout,Ut.replace("LAYOUT","")),ft[Ut]=[B(et.get())],et.set(Array.isArray(ct)?ct[0]:ct),Ze.calc=!0}return(Ze.calc||Ze.plot)&&(Ze.fullReplot=!0),{flags:Ze,undoit:ft,redoit:nt,traces:Pe,eventData:T.extendDeepNoArrays([],[Re,Pe])}}function te(ke){var Se,Pe,Fe,Be=T.counterRegex("axis",".title",!1,!1),me=/colorbar\.title$/,Me=Object.keys(ke);for(Se=0;Se<Me.length;Se++)Fe=ke[Pe=Me[Se]],"title"!==Pe&&!Be.test(Pe)&&!me.test(Pe)||"string"!=typeof Fe&&"number"!=typeof Fe?Pe.indexOf("titlefont")>-1&&-1===Pe.indexOf("grouptitlefont")?Le(Pe,Pe.replace("titlefont","title.font")):Pe.indexOf("titleposition")>-1?Le(Pe,Pe.replace("titleposition","title.position")):Pe.indexOf("titleside")>-1?Le(Pe,Pe.replace("titleside","title.side")):Pe.indexOf("titleoffset")>-1&&Le(Pe,Pe.replace("titleoffset","title.offset")):Le(Pe,Pe.replace("title","title.text"));function Le(Ne,Re){ke[Re]=ke[Ne],delete ke[Ne]}}function ee(ke,Se,Pe){ke=T.getGraphDiv(ke),x.clearPromiseQueue(ke);var Fe={};if("string"==typeof Se)Fe[Se]=Pe;else{if(!T.isPlainObject(Se))return T.warn("Relayout fail.",Se,Pe),Promise.reject();Fe=T.extendFlat({},Se)}Object.keys(Fe).length&&(ke.changed=!0);var Be=le(ke,Fe),me=Be.flags;me.calc&&(ke.calcdata=void 0);var Me=[r.previousPromises];me.layoutReplot?Me.push(v.layoutReplot):Object.keys(Fe).length&&($(ke,me,Be)||r.supplyDefaults(ke),me.legend&&Me.push(v.doLegend),me.layoutstyle&&Me.push(v.layoutStyles),me.axrange&&J(Me,Be.rangesAltered),me.ticks&&Me.push(v.doTicksRelayout),me.modebar&&Me.push(v.doModeBar),me.camera&&Me.push(v.doCamera),me.colorbars&&Me.push(v.doColorBars),Me.push(w)),Me.push(r.rehover,r.redrag,r.reselect),l.add(ke,ee,[ke,Be.undoit],ee,[ke,Be.redoit]);var Le=T.syncOrAsync(Me,ke);return Le&&Le.then||(Le=Promise.resolve(ke)),Le.then(function(){return ke.emit("plotly_relayout",Be.eventData),ke})}function $(ke,Se,Pe){var Fe,Be,me=ke._fullLayout;if(!Se.axrange)return!1;for(var Me in Se)if("axrange"!==Me&&Se[Me])return!1;var Le=function(ft,ht){return T.coerce(Fe,Be,s,ft,ht)},Ne={};for(var Re in Pe.rangesAltered){var He=n.id2name(Re);if(a(Fe=ke.layout[He],Be=me[He],Le,Ne),Be._matchGroup)for(var Ze in Be._matchGroup)if(Ze!==Re){var nt=me[n.id2name(Ze)];nt.autorange=Be.autorange,nt.range=Be.range.slice(),nt._input.range=Be.range.slice()}}return!0}function J(ke,Se){ke.push(d,v.doAutoRangeAndConstraints,Se?function(Fe){var Be=[];for(var me in Se){var Me=n.getFromId(Fe,me);if(Be.push(me),-1!==(Me.ticklabelposition||"").indexOf("inside")&&Me._anchorAxis&&Be.push(Me._anchorAxis._id),Me._matchGroup)for(var Le in Me._matchGroup)Se[Le]||Be.push(Le)}return n.draw(Fe,Be,{skipTitle:!0})}:function(Fe){return n.draw(Fe,"redraw")},v.drawData,v.finalDraw)}var X=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,ae=/^[xyz]axis[0-9]*\.autorange$/,ce=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function le(ke,Se){var Pe,Fe,Be,me=ke.layout,Me=ke._fullLayout,Ne=V(Me._preGUI,Me._guiEditing),Re=Object.keys(Se),He=n.list(ke),Ze=T.extendDeepAll({},Se),nt={};for(te(Se),Re=Object.keys(Se),Fe=0;Fe<Re.length;Fe++)if(0===Re[Fe].indexOf("allaxes")){for(Be=0;Be<He.length;Be++){var ft=He[Be]._id.substr(1),ht=-1!==ft.indexOf("scene")?ft+".":"",Tt=Re[Fe].replace("allaxes",ht+He[Be]._name);Se[Tt]||(Se[Tt]=Se[Re[Fe]])}delete Se[Re[Fe]]}var At=b.layoutFlags(),_t={},ot={};function it(An,cn){if(Array.isArray(An))An.forEach(function(hn){it(hn,cn)});else if(!(An in Se)&&!x.hasParent(Se,An)){var bn=Ne(me,An);An in ot||(ot[An]=B(bn.get())),void 0!==cn&&bn.set(cn)}}var Pt,jt={};function Ut(An){var cn=n.name2id(An.split(".")[0]);return jt[cn]=1,cn}for(var Rt in Se){if(x.hasParent(Se,Rt))throw new Error("cannot set "+Rt+" and a parent attribute simultaneously");for(var Je=Ne(me,Rt),et=Se[Rt],qe=Je.parts.length-1;qe>0&&"string"!=typeof Je.parts[qe];)qe--;var $e=Je.parts[qe],pt=Je.parts[qe-1]+"."+$e,ct=Je.parts.slice(0,qe).join("."),Ve=_(ke.layout,ct).get(),Ge=_(Me,ct).get(),ut=Je.get();if(void 0!==et){_t[Rt]=et,ot[Rt]="reverse"===$e?et:B(ut);var Qe=i.getLayoutValObject(Me,Je.parts);if(Qe&&Qe.impliedEdits&&null!==et)for(var yt in Qe.impliedEdits)it(T.relativeAttr(Rt,yt),Qe.impliedEdits[yt]);if(-1!==["width","height"].indexOf(Rt))if(et){it("autosize",null);var wt="height"===Rt?"width":"height";it(wt,Me[wt])}else Me[Rt]=ke._initialAutoSize[Rt];else if("autosize"===Rt)it("width",et?null:Me.width),it("height",et?null:Me.height);else if(pt.match(X))Ut(pt),_(Me,ct+"._inputRange").set(null);else if(pt.match(ae)){Ut(pt),_(Me,ct+"._inputRange").set(null);var kt=_(Me,ct).get();kt._inputDomain&&(kt._input.domain=kt._inputDomain.slice())}else pt.match(ce)&&_(Me,ct+"._inputDomain").set(null);if("type"===$e){Pt=Ve;var vt="linear"===Ge.type&&"log"===et;if(vt||"log"===Ge.type&&"linear"===et){if(Pt&&Pt.range)if(Ge.autorange)vt&&(Pt.range=Pt.range[1]>Pt.range[0]?[1,2]:[2,1]);else{var St=Pt.range[0],Ot=Pt.range[1];vt?(St<=0&&Ot<=0&&it(ct+".autorange",!0),St<=0?St=Ot/1e6:Ot<=0&&(Ot=St/1e6),it(ct+".range[0]",Math.log(St)/Math.LN10),it(ct+".range[1]",Math.log(Ot)/Math.LN10)):(it(ct+".range[0]",Math.pow(10,St)),it(ct+".range[1]",Math.pow(10,Ot)))}else it(ct+".autorange",!0);Array.isArray(Me._subplots.polar)&&Me._subplots.polar.length&&Me[Je.parts[0]]&&"radialaxis"===Je.parts[1]&&delete Me[Je.parts[0]]._subplot.viewInitial["radialaxis.range"],t.getComponentMethod("annotations","convertCoords")(ke,Ge,et,it),t.getComponentMethod("images","convertCoords")(ke,Ge,et,it)}else it(ct+".autorange",!0),it(ct+".range",null);_(Me,ct+"._inputRange").set(null)}else if($e.match(h)){var Nt=_(Me,Rt).get(),Bt=(et||{}).type;Bt&&"-"!==Bt||(Bt="linear"),t.getComponentMethod("annotations","convertCoords")(ke,Nt,Bt,it),t.getComponentMethod("images","convertCoords")(ke,Nt,Bt,it)}var Vt=g.containerArrayMatch(Rt);if(Vt){Pe=Vt.array;var nn=Vt.property,gn=Qe||{editType:"calc"};""!==(Fe=Vt.index)&&""===nn&&(g.isAddVal(et)?ot[Rt]=null:g.isRemoveVal(et)?ot[Rt]=(_(me,Pe).get()||[])[Fe]:T.warn("unrecognized full object value",Se)),b.update(At,gn),nt[Pe]||(nt[Pe]={});var Jt=nt[Pe][Fe];Jt||(Jt=nt[Pe][Fe]={}),Jt[nn]=et,delete Se[Rt]}else"reverse"===$e?(Ve.range?Ve.range.reverse():(it(ct+".autorange",!0),Ve.range=[1,0]),Ge.autorange?At.calc=!0:At.plot=!0):("dragmode"===Rt&&(!1===et&&!1!==ut||!1!==et&&!1===ut)||Me._has("scatter-like")&&Me._has("regl")&&"dragmode"===Rt&&("lasso"===et||"select"===et)&&"lasso"!==ut&&"select"!==ut||Me._has("gl2d")?At.plot=!0:Qe?b.update(At,Qe):At.calc=!0,Je.set(et))}}for(Pe in nt)g.applyContainerArrayChanges(ke,Ne(me,Pe),nt[Pe],At,Ne)||(At.plot=!0);for(var an in jt){var Xt=(Pt=n.getFromId(ke,an))&&Pt._constraintGroup;if(Xt)for(var Gn in At.calc=!0,Xt)jt[Gn]||(n.getFromId(ke,Gn)._constraintShrinkable=!0)}(pe(ke)||Se.height||Se.width)&&(At.plot=!0);var Dn=Me.shapes;for(Fe=0;Fe<Dn.length;Fe++)if(Dn[Fe].showlegend){At.calc=!0;break}return(At.plot||At.calc)&&(At.layoutReplot=!0),{flags:At,rangesAltered:jt,undoit:ot,redoit:_t,eventData:Ze}}function pe(ke){var Se=ke._fullLayout,Pe=Se.width,Fe=Se.height;return ke.layout.autosize&&r.plotAutoSize(ke,ke.layout,Se),Se.width!==Pe||Se.height!==Fe}function we(ke,Se,Pe,Fe){ke=T.getGraphDiv(ke),x.clearPromiseQueue(ke),T.isPlainObject(Se)||(Se={}),T.isPlainObject(Pe)||(Pe={}),Object.keys(Se).length&&(ke.changed=!0),Object.keys(Pe).length&&(ke.changed=!0);var Be=x.coerceTraceIndices(ke,Fe),me=ie(ke,T.extendFlat({},Se),Be),Me=me.flags,Le=le(ke,T.extendFlat({},Pe)),Ne=Le.flags;(Me.calc||Ne.calc)&&(ke.calcdata=void 0),Me.clearAxisTypes&&x.clearAxisTypes(ke,Be,Pe);var Re=[];Ne.layoutReplot?Re.push(v.layoutReplot):Me.fullReplot?Re.push(F._doPlot):(Re.push(r.previousPromises),$(ke,Ne,Le)||r.supplyDefaults(ke),Me.style&&Re.push(v.doTraceStyle),(Me.colorbars||Ne.colorbars)&&Re.push(v.doColorBars),Ne.legend&&Re.push(v.doLegend),Ne.layoutstyle&&Re.push(v.layoutStyles),Ne.axrange&&J(Re,Le.rangesAltered),Ne.ticks&&Re.push(v.doTicksRelayout),Ne.modebar&&Re.push(v.doModeBar),Ne.camera&&Re.push(v.doCamera),Re.push(w)),Re.push(r.rehover,r.redrag,r.reselect),l.add(ke,we,[ke,me.undoit,Le.undoit,me.traces],we,[ke,me.redoit,Le.redoit,me.traces]);var He=T.syncOrAsync(Re,ke);return He&&He.then||(He=Promise.resolve(ke)),He.then(function(){return ke.emit("plotly_update",{data:me.eventData,layout:Le.eventData}),ke})}function Te(ke){return function(Se){Se._fullLayout._guiEditing=!0;var Pe=ke.apply(null,arguments);return Se._fullLayout._guiEditing=!1,Pe}}var ye=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],ve=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function xe(ke,Se){for(var Pe=0;Pe<Se.length;Pe++){var Fe=Se[Pe],Be=ke.match(Fe.pattern);if(Be){var me=Be[1]||"";return{head:me,tail:ke.substr(me.length+1),attr:Fe.attr}}}}function Ce(ke,Se){var Pe=_(Se,ke).get();if(void 0!==Pe)return Pe;var Fe=ke.split(".");for(Fe.pop();Fe.length>1;)if(Fe.pop(),void 0!==(Pe=_(Se,Fe.join(".")+".uirevision").get()))return Pe;return Se.uirevision}function Oe(ke,Se){for(var Pe=0;Pe<Se.length;Pe++)if(Se[Pe]._fullInput.uid===ke)return Pe;return-1}function be(ke,Se,Pe){for(var Fe=0;Fe<Se.length;Fe++)if(Se[Fe].uid===ke)return Fe;return!Se[Pe]||Se[Pe].uid?-1:Pe}function ue(ke,Se){var Pe=T.isPlainObject(ke),Fe=Array.isArray(ke);return Pe||Fe?(Pe&&T.isPlainObject(Se)||Fe&&Array.isArray(Se))&&JSON.stringify(ke)===JSON.stringify(Se):ke===Se}function se(ke,Se,Pe,Fe){var Be,me,Me,Le=Fe.getValObject,Ne=Fe.flags,Re=Fe.immutable,He=Fe.inArray,Ze=Fe.arrayIndex;function nt(){var Ve=Be.editType;He&&-1!==Ve.indexOf("arraydraw")?T.pushUnique(Ne.arrays[He],Ze):(b.update(Ne,Be),"none"!==Ve&&Ne.nChanges++,Fe.transition&&Be.anim&&Ne.nChangesAnim++,(X.test(Me)||ae.test(Me))&&(Ne.rangesAltered[Pe[0]]=1),ce.test(Me)&&_(Se,"_inputDomain").set(null),"datarevision"===me&&(Ne.newDataRevision=1))}function ft(Ve){return"data_array"===Ve.valType||Ve.arrayOk}for(me in ke){if(Ne.calc&&!Fe.transition)return;var ht=ke[me],Tt=Se[me],At=Pe.concat(me);if(Me=At.join("."),"_"!==me.charAt(0)&&"function"!=typeof ht&&ht!==Tt){if(("tick0"===me||"dtick"===me)&&"geo"!==Pe[0]){var _t=Se.tickmode;if("auto"===_t||"array"===_t||!_t)continue}if(("range"!==me||!Se.autorange)&&("zmin"!==me&&"zmax"!==me||"contourcarpet"!==Se.type)&&(Be=Le(At))&&(!Be._compareAsJSON||JSON.stringify(ht)!==JSON.stringify(Tt))){var ot,it=Be.valType,Pt=ft(Be),jt=Array.isArray(ht),Ut=Array.isArray(Tt);if(jt&&Ut){var Rt="_input_"+me,Je=ke[Rt],et=Se[Rt];if(Array.isArray(Je)&&Je===et)continue}if(void 0===Tt)Pt&&jt?Ne.calc=!0:nt();else if(Be._isLinkedToArray){var qe=[],$e=!1;He||(Ne.arrays[me]=qe);var pt=Math.min(ht.length,Tt.length),ct=Math.max(ht.length,Tt.length);if(pt!==ct){if("arraydraw"!==Be.editType){nt();continue}$e=!0}for(ot=0;ot<pt;ot++)se(ht[ot],Tt[ot],At.concat(ot),T.extendFlat({inArray:me,arrayIndex:ot},Fe));if($e)for(ot=pt;ot<ct;ot++)qe.push(ot)}else!it&&T.isPlainObject(ht)?se(ht,Tt,At,Fe):Pt?jt&&Ut?(Re&&(Ne.calc=!0),(Re||Fe.newDataRevision)&&nt()):jt!==Ut?Ne.calc=!0:nt():jt&&Ut&&ht.length===Tt.length&&String(ht)===String(Tt)||nt()}}}for(me in Se)if(!(me in ke)&&"_"!==me.charAt(0)&&"function"!=typeof Se[me]){if(ft(Be=Le(Pe.concat(me)))&&Array.isArray(Se[me]))return void(Ne.calc=!0);nt()}}function ge(ke,Se){var Pe;for(Pe in ke)if("_"!==Pe.charAt(0)){var Fe=ke[Pe],Be=Se[Pe];if(Fe!==Be)if(T.isPlainObject(Fe)&&T.isPlainObject(Be)){if(ge(Fe,Be))return!0}else{if(!Array.isArray(Fe)||!Array.isArray(Be)||Fe.length!==Be.length)return!0;for(var me=0;me<Fe.length;me++)if(Fe[me]!==Be[me]&&(!T.isPlainObject(Fe[me])||!T.isPlainObject(Be[me])||ge(Fe[me],Be[me])))return!0}}}function Ie(ke){var Se=ke._fullLayout,Pe=ke.getBoundingClientRect();if(!T.equalDomRects(Pe,Se._lastBBox)){var Fe=Se._invTransform=T.inverseTransformMatrix(T.getFullTransformMatrix(ke));Se._invScaleX=Math.sqrt(Fe[0][0]*Fe[0][0]+Fe[0][1]*Fe[0][1]+Fe[0][2]*Fe[0][2]),Se._invScaleY=Math.sqrt(Fe[1][0]*Fe[1][0]+Fe[1][1]*Fe[1][1]+Fe[1][2]*Fe[1][2]),Se._lastBBox=Pe}}F.animate=function(ke,Se,Pe){if(ke=T.getGraphDiv(ke),!T.isPlotDiv(ke))throw new Error("This element is not a Plotly plot: "+ke+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Fe=ke._transitionData;Fe._frameQueue||(Fe._frameQueue=[]);var Be=(Pe=r.supplyAnimationDefaults(Pe)).transition,me=Pe.frame;function Me(Re){return Array.isArray(Be)?Re>=Be.length?Be[0]:Be[Re]:Be}function Le(Re){return Array.isArray(me)?Re>=me.length?me[0]:me[Re]:me}function Ne(Re,He){var Ze=0;return function(){if(Re&&++Ze===He)return Re()}}return void 0===Fe._frameWaitingCnt&&(Fe._frameWaitingCnt=0),new Promise(function(Re,He){var nt,ft,ht=0;function Tt(Rt){return Rt.transitionOpts=Array.isArray(Be)?ht>=Be.length?Be[ht]:Be[0]:Be,ht++,Rt}var At=[],_t=null==Se,ot=Array.isArray(Se);if(_t||ot||!T.isPlainObject(Se)){if(_t||-1!==["string","number"].indexOf(typeof Se))for(nt=0;nt<Fe._frames.length;nt++)(ft=Fe._frames[nt])&&(_t||String(ft.group)===String(Se))&&At.push({type:"byname",name:String(ft.name),data:Tt({name:ft.name})});else if(ot)for(nt=0;nt<Se.length;nt++){var it=Se[nt];-1!==["number","string"].indexOf(typeof it)?(it=String(it),At.push({type:"byname",name:it,data:Tt({name:it})})):T.isPlainObject(it)&&At.push({type:"object",data:Tt(T.extendFlat({},it))})}}else At.push({type:"object",data:Tt(T.extendFlat({},Se))});for(nt=0;nt<At.length;nt++)if("byname"===(ft=At[nt]).type&&!Fe._frameHash[ft.data.name])return T.warn('animate failure: frame not found: "'+ft.data.name+'"'),void He();-1!==["next","immediate"].indexOf(Pe.mode)&&function(){if(0!==Fe._frameQueue.length){for(;Fe._frameQueue.length;){var Rt=Fe._frameQueue.pop();Rt.onInterrupt&&Rt.onInterrupt()}ke.emit("plotly_animationinterrupted",[])}}(),"reverse"===Pe.direction&&At.reverse();var Pt=ke._fullLayout._currentFrame;if(Pt&&Pe.fromcurrent){var jt=-1;for(nt=0;nt<At.length;nt++)if("byname"===(ft=At[nt]).type&&ft.name===Pt){jt=nt;break}if(jt>0&&jt<At.length-1){var Ut=[];for(nt=0;nt<At.length;nt++)ft=At[nt],("byname"!==At[nt].type||nt>jt)&&Ut.push(ft);At=Ut}}At.length>0?function(Rt){if(0!==Rt.length){for(var Je=0;Je<Rt.length;Je++){var et;et="byname"===Rt[Je].type?r.computeFrame(ke,Rt[Je].name):Rt[Je].data;var qe=Le(Je),$e=Me(Je);$e.duration=Math.min($e.duration,qe.duration);var pt={frame:et,name:Rt[Je].name,frameOpts:qe,transitionOpts:$e};Je===Rt.length-1&&(pt.onComplete=Ne(Re,2),pt.onInterrupt=He),Fe._frameQueue.push(pt)}"immediate"===Pe.mode&&(Fe._lastFrameAt=-1/0),Fe._animationRaf||function Ze(){ke.emit("plotly_animating"),Fe._lastFrameAt=-1/0,Fe._timeToNext=0,Fe._runningTransitions=0,Fe._currentFrame=null;var Rt=function(){Fe._animationRaf=window.requestAnimationFrame(Rt),Date.now()-Fe._lastFrameAt>Fe._timeToNext&&function(){Fe._currentFrame&&Fe._currentFrame.onComplete&&Fe._currentFrame.onComplete();var Je=Fe._currentFrame=Fe._frameQueue.shift();if(Je){var et=Je.name?Je.name.toString():null;ke._fullLayout._currentFrame=et,Fe._lastFrameAt=Date.now(),Fe._timeToNext=Je.frameOpts.duration,r.transition(ke,Je.frame.data,Je.frame.layout,x.coerceTraceIndices(ke,Je.frame.traces),Je.frameOpts,Je.transitionOpts).then(function(){Je.onComplete&&Je.onComplete()}),ke.emit("plotly_animatingframe",{name:et,frame:Je.frame,animation:{frame:Je.frameOpts,transition:Je.transitionOpts}})}else ke.emit("plotly_animated"),window.cancelAnimationFrame(Fe._animationRaf),Fe._animationRaf=null}()};Rt()}()}}(At):(ke.emit("plotly_animated"),Re())})},F.addFrames=function(ke,Se,Pe){if(ke=T.getGraphDiv(ke),null==Se)return Promise.resolve();if(!T.isPlotDiv(ke))throw new Error("This element is not a Plotly plot: "+ke+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Fe,Be,me,Me,Le=ke._transitionData._frames,Ne=ke._transitionData._frameHash;if(!Array.isArray(Se))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Se);var Re=Le.length+2*Se.length,He=[],Ze={};for(Fe=Se.length-1;Fe>=0;Fe--)if(T.isPlainObject(Se[Fe])){var nt=Se[Fe].name,ft=(Ne[nt]||Ze[nt]||{}).name,ht=Se[Fe].name;ft&&ht&&"number"==typeof ht&&(Ne[ft]||Ze[ft])&&S<5&&(S++,T.warn('addFrames: overwriting frame "'+(Ne[ft]||Ze[ft]).name+'" with a frame whose name of type "number" also equates to "'+ft+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===S&&T.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Ze[nt]={name:nt},He.push({frame:r.supplyFrameDefaults(Se[Fe]),index:Pe&&null!=Pe[Fe]?Pe[Fe]:Re+Fe})}He.sort(function(Rt,Je){return Rt.index>Je.index?-1:Rt.index<Je.index?1:0});var At=[],_t=[],ot=Le.length;for(Fe=He.length-1;Fe>=0;Fe--){if("number"==typeof(Be=He[Fe].frame).name&&T.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Be.name)for(;Ne[Be.name="frame "+ke._transitionData._counter++];);if(Ne[Be.name]){for(me=0;me<Le.length&&(Le[me]||{}).name!==Be.name;me++);At.push({type:"replace",index:me,value:Be}),_t.unshift({type:"replace",index:me,value:Le[me]})}else Me=Math.max(0,Math.min(He[Fe].index,ot)),At.push({type:"insert",index:Me,value:Be}),_t.unshift({type:"delete",index:Me}),ot++}return l&&l.add(ke,r.modifyFrames,[ke,_t],r.modifyFrames,[ke,At]),r.modifyFrames(ke,At)},F.deleteFrames=function(ke,Se){if(ke=T.getGraphDiv(ke),!T.isPlotDiv(ke))throw new Error("This element is not a Plotly plot: "+ke);var Pe,Fe,Be=ke._transitionData._frames,me=[],Me=[];if(!Se)for(Se=[],Pe=0;Pe<Be.length;Pe++)Se.push(Pe);for((Se=Se.slice()).sort(),Pe=Se.length-1;Pe>=0;Pe--)me.push({type:"delete",index:Fe=Se[Pe]}),Me.unshift({type:"insert",index:Fe,value:Be[Fe]});return l&&l.add(ke,r.modifyFrames,[ke,Me],r.modifyFrames,[ke,me]),r.modifyFrames(ke,me)},F.addTraces=function ke(Se,Pe,Fe){Se=T.getGraphDiv(Se);var Be,me,Me=[],Le=F.deleteTraces,Ne=ke,Re=[Se,Me],He=[Se,Pe];for(function(Ze,nt,ft){var ht,Tt;if(!Array.isArray(Ze.data))throw new Error("gd.data must be an array.");if(void 0===nt)throw new Error("traces must be defined.");for(Array.isArray(nt)||(nt=[nt]),ht=0;ht<nt.length;ht++)if("object"!=typeof(Tt=nt[ht])||Array.isArray(Tt)||null===Tt)throw new Error("all values in traces array must be non-array objects");if(void 0===ft||Array.isArray(ft)||(ft=[ft]),void 0!==ft&&ft.length!==nt.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(Se,Pe,Fe),Array.isArray(Pe)||(Pe=[Pe]),Pe=Pe.map(function(Ze){return T.extendFlat({},Ze)}),x.cleanData(Pe),Be=0;Be<Pe.length;Be++)Se.data.push(Pe[Be]);for(Be=0;Be<Pe.length;Be++)Me.push(-Pe.length+Be);if(void 0===Fe)return me=F.redraw(Se),l.add(Se,Le,Re,Ne,He),me;Array.isArray(Fe)||(Fe=[Fe]);try{U(Se,Me,Fe)}catch(Ze){throw Se.data.splice(Se.data.length-Pe.length,Pe.length),Ze}return l.startSequence(Se),l.add(Se,Le,Re,Ne,He),me=F.moveTraces(Se,Me,Fe),l.stopSequence(Se),me},F.deleteTraces=function ke(Se,Pe){Se=T.getGraphDiv(Se);var Fe,Be,me=[],Me=F.addTraces,Le=ke,Ne=[Se,me,Pe],Re=[Se,Pe];if(void 0===Pe)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Pe)||(Pe=[Pe]),z(Se,Pe,"indices"),(Pe=O(Pe,Se.data.length-1)).sort(T.sorterDes),Fe=0;Fe<Pe.length;Fe+=1)Be=Se.data.splice(Pe[Fe],1)[0],me.push(Be);var He=F.redraw(Se);return l.add(Se,Me,Ne,Le,Re),He},F.extendTraces=function ke(Se,Pe,Fe,Be){var me=R(Se=T.getGraphDiv(Se),Pe,Fe,Be,function(Ne,Re,He){var Ze,nt;if(T.isTypedArray(Ne))if(He<0){var ft=new Ne.constructor(0),ht=j(Ne,Re);He<0?(Ze=ht,nt=ft):(Ze=ft,nt=ht)}else if(Ze=new Ne.constructor(He),nt=new Ne.constructor(Ne.length+Re.length-He),He===Re.length)Ze.set(Re),nt.set(Ne);else if(He<Re.length){var Tt=Re.length-He;Ze.set(Re.subarray(Tt)),nt.set(Ne),nt.set(Re.subarray(0,Tt),Ne.length)}else{var At=He-Re.length,_t=Ne.length-At;Ze.set(Ne.subarray(_t)),Ze.set(Re,At),nt.set(Ne.subarray(0,_t))}else Ze=Ne.concat(Re),nt=He>=0&&He<Ze.length?Ze.splice(0,Ze.length-He):[];return[Ze,nt]}),Me=F.redraw(Se);return l.add(Se,F.prependTraces,[Se,me.update,Fe,me.maxPoints],ke,arguments),Me},F.moveTraces=function ke(Se,Pe,Fe){var Be,me=[],Me=[],Le=ke,Ne=ke,Re=[Se=T.getGraphDiv(Se),Fe,Pe],He=[Se,Pe,Fe];if(U(Se,Pe,Fe),Pe=Array.isArray(Pe)?Pe:[Pe],void 0===Fe)for(Fe=[],Be=0;Be<Pe.length;Be++)Fe.push(-Pe.length+Be);for(Fe=Array.isArray(Fe)?Fe:[Fe],Pe=O(Pe,Se.data.length-1),Fe=O(Fe,Se.data.length-1),Be=0;Be<Se.data.length;Be++)-1===Pe.indexOf(Be)&&me.push(Se.data[Be]);for(Be=0;Be<Pe.length;Be++)Me.push({newIndex:Fe[Be],trace:Se.data[Pe[Be]]});for(Me.sort(function(nt,ft){return nt.newIndex-ft.newIndex}),Be=0;Be<Me.length;Be+=1)me.splice(Me[Be].newIndex,0,Me[Be].trace);Se.data=me;var Ze=F.redraw(Se);return l.add(Se,Le,Re,Ne,He),Ze},F.prependTraces=function ke(Se,Pe,Fe,Be){var me=R(Se=T.getGraphDiv(Se),Pe,Fe,Be,function(Ne,Re,He){var Ze,nt;if(T.isTypedArray(Ne))if(He<=0){var ft=new Ne.constructor(0),ht=j(Re,Ne);He<0?(Ze=ht,nt=ft):(Ze=ft,nt=ht)}else if(Ze=new Ne.constructor(He),nt=new Ne.constructor(Ne.length+Re.length-He),He===Re.length)Ze.set(Re),nt.set(Ne);else if(He<Re.length){var Tt=Re.length-He;Ze.set(Re.subarray(0,Tt)),nt.set(Re.subarray(Tt)),nt.set(Ne,Tt)}else{var At=He-Re.length;Ze.set(Re),Ze.set(Ne.subarray(0,At),Re.length),nt.set(Ne.subarray(At))}else Ze=Re.concat(Ne),nt=He>=0&&He<Ze.length?Ze.splice(He,Ze.length):[];return[Ze,nt]}),Me=F.redraw(Se);return l.add(Se,F.extendTraces,[Se,me.update,Fe,me.maxPoints],ke,arguments),Me},F.newPlot=function(ke,Se,Pe,Fe){return ke=T.getGraphDiv(ke),r.cleanPlot([],{},ke._fullData||[],ke._fullLayout||{}),r.purge(ke),F._doPlot(ke,Se,Pe,Fe)},F._doPlot=function(ke,Se,Pe,Fe){var Be;if(ke=T.getGraphDiv(ke),p.init(ke),T.isPlainObject(Se)){var me=Se;Se=me.data,Pe=me.layout,Fe=me.config,Be=me.frames}if(!1===p.triggerHandler(ke,"plotly_beforeplot",[Se,Pe,Fe]))return Promise.reject();Se||Pe||T.isPlotDiv(ke)||T.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",ke),I(ke,Fe),Pe||(Pe={}),M.select(ke).classed("js-plotly-plot",!0),u.makeTester(),Array.isArray(ke._promises)||(ke._promises=[]);var Me=0===(ke.data||[]).length&&Array.isArray(Se);Array.isArray(Se)&&(x.cleanData(Se),Me?ke.data=Se:ke.data.push.apply(ke.data,Se),ke.empty=!1),ke.layout&&!Me||(ke.layout=x.cleanLayout(Pe)),r.supplyDefaults(ke);var Le=ke._fullLayout,Ne=Le._has("cartesian");Le._replotting=!0,(Me||Le._shouldCreateBgLayer)&&(function(_t){var ot=M.select(_t),it=_t._fullLayout;if(it._calcInverseTransform=Ie,it._calcInverseTransform(_t),it._container=ot.selectAll(".plot-container").data([0]),it._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),it._paperdiv=it._container.selectAll(".svg-container").data([0]),it._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),it._glcontainer=it._paperdiv.selectAll(".gl-container").data([{}]),it._glcontainer.enter().append("div").classed("gl-container",!0),it._paperdiv.selectAll(".main-svg").remove(),it._paperdiv.select(".modebar-container").remove(),it._paper=it._paperdiv.insert("svg",":first-child").classed("main-svg",!0),it._toppaper=it._paperdiv.append("svg").classed("main-svg",!0),it._modebardiv=it._paperdiv.append("div"),delete it._modeBar,it._hoverpaper=it._paperdiv.append("svg").classed("main-svg",!0),!it._uid){var Pt={};M.selectAll("defs").each(function(){this.id&&(Pt[this.id.split("-")[1]]=1)}),it._uid=T.randstr(Pt)}it._paperdiv.selectAll(".main-svg").attr(y.svgAttrs),it._defs=it._paper.append("defs").attr("id","defs-"+it._uid),it._clips=it._defs.append("g").classed("clips",!0),it._topdefs=it._toppaper.append("defs").attr("id","topdefs-"+it._uid),it._topclips=it._topdefs.append("g").classed("clips",!0),it._bgLayer=it._paper.append("g").classed("bglayer",!0),it._draggers=it._paper.append("g").classed("draglayer",!0);var jt=it._paper.append("g").classed("layer-below",!0);it._imageLowerLayer=jt.append("g").classed("imagelayer",!0),it._shapeLowerLayer=jt.append("g").classed("shapelayer",!0),it._cartesianlayer=it._paper.append("g").classed("cartesianlayer",!0),it._polarlayer=it._paper.append("g").classed("polarlayer",!0),it._smithlayer=it._paper.append("g").classed("smithlayer",!0),it._ternarylayer=it._paper.append("g").classed("ternarylayer",!0),it._geolayer=it._paper.append("g").classed("geolayer",!0),it._funnelarealayer=it._paper.append("g").classed("funnelarealayer",!0),it._pielayer=it._paper.append("g").classed("pielayer",!0),it._iciclelayer=it._paper.append("g").classed("iciclelayer",!0),it._treemaplayer=it._paper.append("g").classed("treemaplayer",!0),it._sunburstlayer=it._paper.append("g").classed("sunburstlayer",!0),it._indicatorlayer=it._toppaper.append("g").classed("indicatorlayer",!0),it._glimages=it._paper.append("g").classed("glimages",!0);var Ut=it._toppaper.append("g").classed("layer-above",!0);it._imageUpperLayer=Ut.append("g").classed("imagelayer",!0),it._shapeUpperLayer=Ut.append("g").classed("shapelayer",!0),it._selectionLayer=it._toppaper.append("g").classed("selectionlayer",!0),it._infolayer=it._toppaper.append("g").classed("infolayer",!0),it._menulayer=it._toppaper.append("g").classed("menulayer",!0),it._zoomlayer=it._toppaper.append("g").classed("zoomlayer",!0),it._hoverlayer=it._hoverpaper.append("g").classed("hoverlayer",!0),it._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),_t.emit("plotly_framework")}(ke),Le._shouldCreateBgLayer&&delete Le._shouldCreateBgLayer),u.initGradients(ke),u.initPatterns(ke),Me&&n.saveShowSpikeInitial(ke);var Re=!ke.calcdata||ke.calcdata.length!==(ke._fullData||[]).length;Re&&r.doCalcdata(ke);for(var He=0;He<ke.calcdata.length;He++)ke.calcdata[He][0].trace=ke._fullData[He];ke._context.responsive?ke._responsiveChartHandler||(ke._responsiveChartHandler=function(){T.isHidden(ke)||r.resize(ke)},window.addEventListener("resize",ke._responsiveChartHandler)):T.clearResponsive(ke);var Ze=T.extendFlat({},Le._size),nt=0;function ft(){if(r.clearAutoMarginIds(ke),v.drawMarginPushers(ke),n.allowAutoMargin(ke),ke._fullLayout.title.text&&ke._fullLayout.title.automargin&&r.allowAutoMargin(ke,"title.automargin"),Le._has("pie"))for(var _t=ke._fullData,ot=0;ot<_t.length;ot++){var it=_t[ot];"pie"===it.type&&it.automargin&&r.allowAutoMargin(ke,"pie."+it.uid+".automargin")}return r.doAutoMargin(ke),r.previousPromises(ke)}function ht(){ke._transitioning||(v.doAutoRangeAndConstraints(ke),Me&&n.saveRangeInitial(ke),t.getComponentMethod("rangeslider","calcAutorange")(ke))}var Tt=[r.previousPromises,function(){if(Be)return F.addFrames(ke,Be)},function _t(){for(var ot=Le._basePlotModules,it=0;it<ot.length;it++)ot[it].drawFramework&&ot[it].drawFramework(ke);!Le._glcanvas&&Le._has("gl")&&(Le._glcanvas=Le._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(Rt){return Rt.key}),Le._glcanvas.enter().append("canvas").attr("class",function(Rt){return"gl-canvas gl-canvas-"+Rt.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Pt=ke._context.plotGlPixelRatio;if(Le._glcanvas){Le._glcanvas.attr("width",Le.width*Pt).attr("height",Le.height*Pt).style("width",Le.width+"px").style("height",Le.height+"px");var jt=Le._glcanvas.data()[0].regl;if(jt&&(Math.floor(Le.width*Pt)!==jt._gl.drawingBufferWidth||Math.floor(Le.height*Pt)!==jt._gl.drawingBufferHeight)){var Ut="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!nt)return T.log(Ut+" Clearing graph and plotting again."),r.cleanPlot([],{},ke._fullData,Le),r.supplyDefaults(ke),Le=ke._fullLayout,r.doCalcdata(ke),nt++,_t();T.error(Ut)}}return"h"===Le.modebar.orientation?Le._modebardiv.style("height",null).style("width","100%"):Le._modebardiv.style("width",null).style("height",Le.height+"px"),r.previousPromises(ke)},ft,function(){if(r.didMarginChange(Ze,Le._size))return T.syncOrAsync([ft,v.layoutStyles],ke)}];Ne&&Tt.push(function(){if(Re)return T.syncOrAsync([t.getComponentMethod("shapes","calcAutorange"),t.getComponentMethod("annotations","calcAutorange"),ht],ke);ht()}),Tt.push(v.layoutStyles),Ne&&Tt.push(function(){return n.draw(ke,Me?"":"redraw")},function(_t){var ot=_t._fullLayout._insideTickLabelsUpdaterange;if(ot)return _t._fullLayout._insideTickLabelsUpdaterange=void 0,ee(_t,ot).then(function(){n.saveRangeInitial(_t,!0)})}),Tt.push(v.drawData,v.finalDraw,c,r.addLinks,r.rehover,r.redrag,r.reselect,r.doAutoMargin,r.previousPromises);var At=T.syncOrAsync(Tt,ke);return At&&At.then||(At=Promise.resolve()),At.then(function(){return w(ke),ke})},F.purge=function(ke){var Se=(ke=T.getGraphDiv(ke))._fullLayout||{};return r.cleanPlot([],{},ke._fullData||[],Se),r.purge(ke),p.purge(ke),Se._container&&Se._container.remove(),delete ke._context,ke},F.react=function(ke,Se,Pe,Fe){var Be,me;ke=T.getGraphDiv(ke),x.clearPromiseQueue(ke);var ct,Ve,Ge,ut,Qe,yt,Me=ke._fullData,Le=ke._fullLayout;if(T.isPlotDiv(ke)&&Me&&Le){if(T.isPlainObject(Se)){var Ne=Se;Se=Ne.data,Pe=Ne.layout,Fe=Ne.config,Be=Ne.frames}var Re=!1;if(Fe){var He=T.extendDeep({},ke._context);ke._context=void 0,I(ke,Fe),Re=ge(He,ke._context)}ke.data=Se||[],x.cleanData(ke.data),ke.layout=Pe||{},x.cleanLayout(ke.layout),function(ct,Ve,Ge,ut){var Qe,yt,wt,kt,vt,Lt,St,Ot,Nt,Bt,Vt=ut._preGUI,nn=[],gn={},Jt={};for(Qe in Vt){if(vt=xe(Qe,ye)){if(Nt=vt.head,Bt=vt.tail,(kt=(wt=_(ut,yt=vt.attr||Nt+".uirevision").get())&&Ce(yt,Ve))&&kt===wt){if(null===(Lt=Vt[Qe])&&(Lt=void 0),ue(Ot=(St=_(Ve,Qe)).get(),Lt)){void 0===Ot&&"autorange"===Bt&&nn.push(Nt),St.set(B(_(ut,Qe).get()));continue}if("autorange"===Bt||"range["===Bt.substr(0,6)){var Gn=Vt[Nt+".autorange"];if(Gn||null===Gn&&null===Vt[Nt+".range[0]"]&&null===Vt[Nt+".range[1]"]){if(!(Nt in gn)){var Dn=_(Ve,Nt).get();gn[Nt]=Dn&&(Dn.autorange||!1!==Dn.autorange&&(!Dn.range||2!==Dn.range.length))}if(gn[Nt]){St.set(B(_(ut,Qe).get()));continue}}}}}else T.warn("unrecognized GUI edit: "+Qe);delete Vt[Qe],vt&&"range["===vt.tail.substr(0,6)&&(Jt[vt.head]=1)}for(var An=0;An<nn.length;An++){var cn=nn[An];if(Jt[cn]){var bn=_(Ve,cn).get();bn&&delete bn.autorange}}var hn=ut._tracePreGUI;for(var wn in hn){var Ln,Pn=hn[wn],Nn=null;for(Qe in Pn){if(!Nn){var jn=Oe(wn,Ge);if(jn<0){delete hn[wn];break}var Fn=be(wn,ct,(Ln=Ge[jn]._fullInput).index);if(Fn<0){delete hn[wn];break}Nn=ct[Fn]}if(vt=xe(Qe,ve)){if(vt.attr?kt=(wt=_(ut,vt.attr).get())&&Ce(vt.attr,Ve):(wt=Ln.uirevision,void 0===(kt=Nn.uirevision)&&(kt=Ve.uirevision)),kt&&kt===wt&&(null===(Lt=Pn[Qe])&&(Lt=void 0),ue(Ot=(St=_(Nn,Qe)).get(),Lt))){St.set(B(_(Ln,Qe).get()));continue}}else T.warn("unrecognized GUI edit: "+Qe+" in trace uid "+wn);delete Pn[Qe]}}}(ke.data,ke.layout,Me,Le),r.supplyDefaults(ke,{skipUpdateCalc:!0});var Ze=ke._fullData,nt=ke._fullLayout,ft=void 0===nt.datarevision,ht=nt.transition,Tt=(ct=ke,Ve=Le,Ge=nt,ut=ft,Qe=ht,(yt=b.layoutFlags()).arrays={},yt.rangesAltered={},yt.nChanges=0,yt.nChangesAnim=0,se(Ve,Ge,[],{getValObject:function(wt){return i.getLayoutValObject(Ge,wt)},flags:yt,immutable:ut,transition:Qe,gd:ct}),(yt.plot||yt.calc)&&(yt.layoutReplot=!0),Qe&&yt.nChanges&&yt.nChangesAnim&&(yt.anim=yt.nChanges===yt.nChangesAnim?"all":"some"),yt),_t=function(ct,Ve,Ge,ut,Qe,yt){var wt=Ve.length===Ge.length;if(!Qe&&!wt)return{fullReplot:!0,calc:!0};var kt,vt,Lt=b.traceFlags();Lt.arrays={},Lt.nChanges=0,Lt.nChangesAnim=0;var St={getValObject:function(Nt){var Bt=i.getTraceValObject(vt,Nt);return!vt._module.animatable&&Bt.anim&&(Bt.anim=!1),Bt},flags:Lt,immutable:ut,transition:Qe,newDataRevision:yt,gd:ct},Ot={};for(kt=0;kt<Ve.length;kt++)if(Ge[kt]){if(r.hasMakesDataTransform(vt=Ge[kt]._fullInput)&&(vt=Ge[kt]),Ot[vt.uid])continue;Ot[vt.uid]=1,se(Ve[kt]._fullInput,vt,[],St)}return(Lt.calc||Lt.plot)&&(Lt.fullReplot=!0),Qe&&Lt.nChanges&&Lt.nChangesAnim&&(Lt.anim=Lt.nChanges===Lt.nChangesAnim&&wt?"all":"some"),Lt}(ke,Me,Ze,ft,ht,Tt.newDataRevision);if(pe(ke)&&(Tt.layoutReplot=!0),_t.calc||Tt.calc){ke.calcdata=void 0;for(var ot=Object.getOwnPropertyNames(nt),it=0;it<ot.length;it++){var Pt=ot[it],jt=Pt.substring(0,5);if("xaxis"===jt||"yaxis"===jt){var Ut=nt[Pt]._emptyCategories;Ut&&Ut()}}}else r.supplyDefaultsUpdateCalc(ke.calcdata,Ze);var Rt=[];if(Be&&(ke._transitionData={},r.createTransitionData(ke),Rt.push(function(){return F.addFrames(ke,Be)})),nt.transition&&!Re&&(_t.anim||Tt.anim))Tt.ticks&&Rt.push(v.doTicksRelayout),r.doCalcdata(ke),v.doAutoRangeAndConstraints(ke),Rt.push(function(){return r.transitionFromReact(ke,_t,Tt,Le)});else if(_t.fullReplot||Tt.layoutReplot||Re)ke._fullLayout._skipDefaults=!0,Rt.push(F._doPlot);else{for(var Je in Tt.arrays){var et=Tt.arrays[Je];if(et.length){var qe=t.getComponentMethod(Je,"drawOne");if(qe!==T.noop)for(var $e=0;$e<et.length;$e++)qe(ke,et[$e]);else{var pt=t.getComponentMethod(Je,"draw");if(pt===T.noop)throw new Error("cannot draw components: "+Je);pt(ke)}}}Rt.push(r.previousPromises),_t.style&&Rt.push(v.doTraceStyle),(_t.colorbars||Tt.colorbars)&&Rt.push(v.doColorBars),Tt.legend&&Rt.push(v.doLegend),Tt.layoutstyle&&Rt.push(v.layoutStyles),Tt.axrange&&J(Rt),Tt.ticks&&Rt.push(v.doTicksRelayout),Tt.modebar&&Rt.push(v.doModeBar),Tt.camera&&Rt.push(v.doCamera),Rt.push(w)}Rt.push(r.rehover,r.redrag,r.reselect),(me=T.syncOrAsync(Rt,ke))&&me.then||(me=Promise.resolve(ke))}else me=F.newPlot(ke,Se,Pe,Fe);return me.then(function(){return ke.emit("plotly_react",{data:Se,layout:Pe}),ke})},F.redraw=function(ke){if(ke=T.getGraphDiv(ke),!T.isPlotDiv(ke))throw new Error("This element is not a Plotly plot: "+ke);return x.cleanData(ke.data),x.cleanLayout(ke.layout),ke.calcdata=void 0,F._doPlot(ke).then(function(){return ke.emit("plotly_redraw"),ke})},F.relayout=ee,F.restyle=Y,F.setPlotConfig=function(ke){return T.extendFlat(m,ke)},F.update=we,F._guiRelayout=Te(ee),F._guiRestyle=Te(Y),F._guiUpdate=Te(we),F._storeDirectGUIEdit=function(ke,Se,Pe){for(var Fe in Pe)q(Fe,_(ke,Fe).get(),Pe[Fe],Se)}},20556:function(ne){"use strict";var F={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},e={};(function M(k,o){for(var T in k){var _=k[T];_.valType?o[T]=_.dflt:(o[T]||(o[T]={}),M(_,o[T]))}})(F,e),ne.exports={configAttributes:F,dfltConfig:e}},73060:function(ne,F,e){"use strict";var M=e(24040),k=e(3400),o=e(45464),T=e(64859),_=e(16672),p=e(85656),l=e(20556).configAttributes,t=e(67824),i=k.extendDeepAll,r=k.isPlainObject,n=k.isArrayOrTypedArray,a=k.nestedProperty,s=k.valObjectMeta,u="_isSubplotObj",f="_isLinkedToArray",c="_deprecated",y=[u,f,"_arrayAttrRegexps",c];function d(h,S,w){if(!h)return!1;if(h._isLinkedToArray)if(m(S[w]))w++;else if(w<S.length)return!1;for(;w<S.length;w++){var E=h[S[w]];if(!r(E)||(h=E,w===S.length-1))break;if(h._isLinkedToArray){if(!m(S[++w]))return!1}else if("info_array"===h.valType){var P=S[++w];if(!m(P))return!1;var I=h.items;if(Array.isArray(I)){if(P>=I.length)return!1;if(2===h.dimensions){if(w++,S.length===w)return h;var O=S[w];if(!m(O))return!1;h=I[P][O]}else h=I[P]}else h=I}}return h}function m(h){return h===Math.round(h)&&h>=0}function g(){var h,S,w={};for(h in i(w,T),M.subplotsRegistry)if((S=M.subplotsRegistry[h]).layoutAttributes)if(Array.isArray(S.attr))for(var E=0;E<S.attr.length;E++)v(w,S,S.attr[E]);else v(w,S,"subplot"===S.attr?S.name:S.attr);for(h in M.componentsRegistry){var P=(S=M.componentsRegistry[h]).schema;if(P&&(P.subplots||P.layout)){var I=P.subplots;if(I&&I.xaxis&&!I.yaxis)for(var O in I.xaxis)delete w.yaxis[O];delete w.xaxis.shift,delete w.xaxis.autoshift}else"colorscale"===S.name?i(w,S.layoutAttributes):S.layoutAttributes&&b(w,S.layoutAttributes,S.name)}return{layoutAttributes:x(w)}}function x(h){return F.crawl(h,function(w,E,P){F.isValObject(w)?!0!==w.arrayOk&&"data_array"!==w.valType||(P[E+"src"]={valType:"string",editType:"none"}):r(w)&&(w.role="object")}),F.crawl(h,function(w,E,P){if(w){var I=w[f];I&&(delete w[f],P[E]={items:{}},P[E].items[I]=w,P[E].role="object")}}),function(S){!function w(E){for(var P in E)if(r(E[P]))w(E[P]);else if(Array.isArray(E[P]))for(var I=0;I<E[P].length;I++)w(E[P][I]);else E[P]instanceof RegExp&&(E[P]=E[P].toString())}(S)}(h),h}function v(h,S,w){var E=a(h,w),P=i({},S.layoutAttributes);P[u]=!0,E.set(P)}function b(h,S,w){var E=a(h,w);E.set(i(E.get()||{},S))}F.IS_SUBPLOT_OBJ=u,F.IS_LINKED_TO_ARRAY=f,F.DEPRECATED=c,F.UNDERSCORE_ATTRS=y,F.get=function(){var h={};M.allTypes.forEach(function(E){h[E]=function(P){var I,O;O=(I=M.modules[P]._module).basePlotModule;var z={type:null},U=i({},o),R=i({},I.attributes);F.crawl(R,function(B,V,q,ie,te){a(U,te).set(void 0),void 0===B&&a(R,te).set(void 0)}),i(z,U),M.traceIs(P,"noOpacity")&&delete z.opacity,M.traceIs(P,"showLegend")||(delete z.showlegend,delete z.legendgroup),M.traceIs(P,"noHover")&&(delete z.hoverinfo,delete z.hoverlabel),I.selectPoints||delete z.selectedpoints,i(z,R),O.attributes&&i(z,O.attributes),z.type=P;var j={meta:I.meta||{},categories:I.categories||{},animatable:!!I.animatable,type:P,attributes:x(z)};if(I.layoutAttributes){var Y={};i(Y,I.layoutAttributes),j.layoutAttributes=x(Y)}return I.animatable||F.crawl(j,function(B){F.isValObject(B)&&"anim"in B&&delete B.anim}),j}(E)});var S,w={};return Object.keys(M.transformsRegistry).forEach(function(E){var P,O;w[E]=(O=i({},M.transformsRegistry[P=E].attributes),Object.keys(M.componentsRegistry).forEach(function(z){var U=M.componentsRegistry[z];U.schema&&U.schema.transforms&&U.schema.transforms[P]&&Object.keys(U.schema.transforms[P]).forEach(function(R){b(O,U.schema.transforms[P][R],R)})}),{attributes:x(O)})}),{defs:{valObjects:s,metaKeys:y.concat(["description","role","editType","impliedEdits"]),editType:{traces:t.traces,layout:t.layout},impliedEdits:{}},traces:h,layout:g(),transforms:w,frames:(S={frames:i({},_)},x(S),S.frames),animation:x(p),config:x(l)}},F.crawl=function(h,S,w,E){var P=w||0;E=E||"",Object.keys(h).forEach(function(I){var O=h[I];if(-1===y.indexOf(I)){var z=(E?E+".":"")+I;S(O,I,h,P,z),F.isValObject(O)||r(O)&&"impliedEdits"!==I&&F.crawl(O,S,P+1,z)}})},F.isValObject=function(h){return h&&void 0!==h.valType},F.findArrayAttributes=function(h){var S,w,E=[],P=[],I=[];function O(B,V,q,ie){P=P.slice(0,ie).concat([V]),I=I.slice(0,ie).concat([B&&B._isLinkedToArray]),B&&("data_array"===B.valType||!0===B.arrayOk)&&("colorbar"!==P[ie-1]||"ticktext"!==V&&"tickvals"!==V)&&z(S,0,"")}function z(B,V,q){var ie=B[P[V]],te=q+P[V];if(V===P.length-1)n(ie)&&E.push(w+te);else if(I[V]){if(Array.isArray(ie))for(var ee=0;ee<ie.length;ee++)r(ie[ee])&&z(ie[ee],V+1,te+"["+ee+"].")}else r(ie)&&z(ie,V+1,te+".")}S=h,w="",F.crawl(o,O),h._module&&h._module.attributes&&F.crawl(h._module.attributes,O);var U=h.transforms;if(U)for(var R=0;R<U.length;R++){var j=U[R],Y=j._module;Y&&(w="transforms["+R+"].",S=j,F.crawl(Y.attributes,O))}return E},F.getTraceValObject=function(h,S){var w,E,P=S[0],I=1;if("transforms"===P){if(1===S.length)return o.transforms;var O=h.transforms;if(!Array.isArray(O)||!O.length)return!1;var z=S[1];if(!m(z)||z>=O.length)return!1;E=(w=(M.transformsRegistry[O[z].type]||{}).attributes)&&w[S[2]],I=3}else{var U=h._module;if(U||(U=(M.modules[h.type||o.type.dflt]||{})._module),!U)return!1;if(!(E=(w=U.attributes)&&w[P])){var R=U.basePlotModule;R&&R.attributes&&(E=R.attributes[P])}E||(E=o[P])}return d(E,S,I)},F.getLayoutValObject=function(h,S){return d(function(E,P){var I,O,z,U,R=E._basePlotModules;if(R){var j;for(I=0;I<R.length;I++){if((z=R[I]).attrRegex&&z.attrRegex.test(P)){if(z.layoutAttrOverrides)return z.layoutAttrOverrides;!j&&z.layoutAttributes&&(j=z.layoutAttributes)}var Y=z.baseLayoutAttrOverrides;if(Y&&P in Y)return Y[P]}if(j)return j}var B=E._modules;if(B)for(I=0;I<B.length;I++)if((U=B[I].layoutAttributes)&&P in U)return U[P];for(O in M.componentsRegistry){if("colorscale"===(z=M.componentsRegistry[O]).name&&0===P.indexOf("coloraxis"))return z.layoutAttributes[P];if(!z.schema&&P===z.name)return z.layoutAttributes}return P in T&&T[P]}(h,S[0]),S,1)}},31780:function(ne,F,e){"use strict";var M=e(3400),k=e(45464),o="templateitemname",T={name:{valType:"string",editType:"none"}};function _(l){return l&&"string"==typeof l}function p(l){return"s"!==l.charAt(l.length-1)&&M.warn("bad argument to arrayDefaultKey: "+l),l.substr(0,l.length-1)+"defaults"}T[o]={valType:"string",editType:"calc"},F.templatedArray=function(l,t){return t._isLinkedToArray=l,t.name=T.name,t[o]=T[o],t},F.traceTemplater=function(l){var t,i,r={};for(t in l)i=l[t],Array.isArray(i)&&i.length&&(r[t]=0);return{newTrace:function(n){var a={type:t=M.coerce(n,{},k,"type"),_template:null};if(t in r){var s=r[t]%(i=l[t]).length;r[t]++,a._template=i[s]}return a}}},F.newContainer=function(l,t,i){var r=l._template,n=r&&(r[t]||i&&r[i]);return M.isPlainObject(n)||(n=null),l[t]={_template:n}},F.arrayTemplater=function(l,t,i){var r=l._template,n=r&&r[p(t)],a=r&&r[t];Array.isArray(a)&&a.length||(a=[]);var s={};return{newItem:function(u){var f={name:u.name,_input:u},c=f[o]=u[o];if(!_(c))return f._template=n,f;for(var y=0;y<a.length;y++){var d=a[y];if(d.name===c)return s[c]=1,f._template=d,f}return f[i]=u[i]||!1,f._template=!1,f},defaultItems:function(){for(var u=[],f=0;f<a.length;f++){var c=a[f],y=c.name;if(_(y)&&!s[y]){var d={_template:c,name:y,_input:{_templateitemname:y}};d[o]=c[o],u.push(d),s[y]=1}}return u}}},F.arrayDefaultKey=p,F.arrayEditor=function(l,t,i){var r=(M.nestedProperty(l,t).get()||[]).length,n=i._index,a=n>=r&&(i._input||{})._templateitemname;a&&(n=r);var s,u=t+"["+n+"]";function f(){s={},a&&(s[u]={},s[u][o]=a)}function c(d,m){a?M.nestedProperty(s[u],d).set(m):s[u+"."+d]=m}function y(){var d=s;return f(),d}return f(),{modifyBase:function(d,m){s[d]=m},modifyItem:c,getUpdateObj:y,applyUpdate:function(d,m){d&&c(d,m);var g=y();for(var x in g)M.nestedProperty(l,x).set(g[x])}}}},39172:function(ne,F,e){"use strict";var M=e(33428),k=e(24040),o=e(7316),T=e(3400),_=e(72736),p=e(73696),l=e(76308),t=e(43616),i=e(81668),r=e(45460),n=e(54460),a=e(84284),s=e(71888),u=s.enforce,f=s.clean,c=e(19280).doAutoRange,y="start";function d(b,h,S){for(var w=0;w<S.length;w++){var E=S[w][0],P=S[w][1];if(!(E[0]>=b[1]||E[1]<=b[0])&&P[0]<h[1]&&P[1]>h[0])return!0}return!1}function m(b){var h,S,w,E,P,I,O=b._fullLayout,z=O._size,U=z.p,R=n.list(b,"",!0);if(O._paperdiv.style({width:b._context.responsive&&O.autosize&&!b._context._hasZeroWidth&&!b.layout.width?"100%":O.width+"px",height:b._context.responsive&&O.autosize&&!b._context._hasZeroHeight&&!b.layout.height?"100%":O.height+"px"}).selectAll(".main-svg").call(t.setSize,O.width,O.height),b._context.setBackground(b,O.paper_bgcolor),F.drawMainTitle(b),r.manage(b),!O._has("cartesian"))return o.previousPromises(b);function j(Re,He,Ze){var nt=Re._lw/2;return"x"===Re._id.charAt(0)?He?"top"===Ze?He._offset-U-nt:He._offset+He._length+U+nt:z.t+z.h*(1-(Re.position||0))+nt%1:He?"right"===Ze?He._offset+He._length+U+nt:He._offset-U-nt:z.l+z.w*(Re.position||0)+nt%1}for(h=0;h<R.length;h++){var Y=(E=R[h])._anchorAxis;E._linepositions={},E._lw=t.crispRound(b,E.linewidth,1),E._mainLinePosition=j(E,Y,E.side),E._mainMirrorPosition=E.mirror&&Y?j(E,Y,a.OPPOSITE_SIDE[E.side]):null}var B=[],V=[],q=[],ie=1===l.opacity(O.paper_bgcolor)&&1===l.opacity(O.plot_bgcolor)&&O.paper_bgcolor===O.plot_bgcolor;for(S in O._plots)if((w=O._plots[S]).mainplot)w.bg&&w.bg.remove(),w.bg=void 0;else{var te=w.xaxis.domain,ee=w.yaxis.domain,$=w.plotgroup;if(d(te,ee,q)){var J=$.node(),X=w.bg=T.ensureSingle($,"rect","bg");J.insertBefore(X.node(),J.childNodes[0]),V.push(S)}else $.select("rect.bg").remove(),q.push([te,ee]),ie||(B.push(S),V.push(S))}var ae,ce,le,pe,we,Te,ye,ve,xe,Ce,Oe,be,ue,se=O._bgLayer.selectAll(".bg").data(B);for(se.enter().append("rect").classed("bg",!0),se.exit().remove(),se.each(function(Re){O._plots[Re].bg=M.select(this)}),h=0;h<V.length;h++)P=(w=O._plots[V[h]]).xaxis,I=w.yaxis,w.bg&&void 0!==P._offset&&void 0!==I._offset&&w.bg.call(t.setRect,P._offset-U,I._offset-U,P._length+2*U,I._length+2*U).call(l.fill,O.plot_bgcolor).style("stroke-width",0);if(!O._hasOnlyLargeSploms)for(S in O._plots){P=(w=O._plots[S]).xaxis,I=w.yaxis;var ge,Ie,ke=w.clipId="clip"+O._uid+S+"plot",Se=T.ensureSingleById(O._clips,"clipPath",ke,function(Re){Re.classed("plotclip",!0).append("rect")});w.clipRect=Se.select("rect").attr({width:P._length,height:I._length}),t.setTranslate(w.plot,P._offset,I._offset),w._hasClipOnAxisFalse?(ge=null,Ie=ke):(ge=ke,Ie=null),t.setClipUrl(w.plot,ge,b),w.layerClipId=Ie}function Pe(Re){return"M"+ae+","+Re+"H"+ce}function Fe(Re){return"M"+P._offset+","+Re+"h"+P._length}function Be(Re){return"M"+Re+","+ve+"V"+ye}function me(Re){return void 0!==I._shift&&(Re+=I._shift),"M"+Re+","+I._offset+"v"+I._length}function Me(Re,He,Ze){if(!Re.showline||S!==Re._mainSubplot)return"";if(!Re._anchorAxis)return Ze(Re._mainLinePosition);var nt=He(Re._mainLinePosition);return Re.mirror&&(nt+=He(Re._mainMirrorPosition)),nt}for(S in O._plots){I=(w=O._plots[S]).yaxis;var Le="M0,0";g(P=w.xaxis,S)&&(we=v(P,"left",I,R),ae=P._offset-(we?U+we:0),Te=v(P,"right",I,R),ce=P._offset+P._length+(Te?U+Te:0),le=j(P,I,"bottom"),pe=j(P,I,"top"),!(ue=!P._anchorAxis||S!==P._mainSubplot)||"allticks"!==P.mirror&&"all"!==P.mirror||(P._linepositions[S]=[le,pe]),Le=Me(P,Pe,Fe),ue&&P.showline&&("all"===P.mirror||"allticks"===P.mirror)&&(Le+=Pe(le)+Pe(pe)),w.xlines.style("stroke-width",P._lw+"px").call(l.stroke,P.showline?P.linecolor:"rgba(0,0,0,0)")),w.xlines.attr("d",Le);var Ne="M0,0";g(I,S)&&(Oe=v(I,"bottom",P,R),ye=I._offset+I._length+(Oe?U:0),be=v(I,"top",P,R),ve=I._offset-(be?U:0),xe=j(I,P,"left"),Ce=j(I,P,"right"),!(ue=!I._anchorAxis||S!==I._mainSubplot)||"allticks"!==I.mirror&&"all"!==I.mirror||(I._linepositions[S]=[xe,Ce]),Ne=Me(I,Be,me),ue&&I.showline&&("all"===I.mirror||"allticks"===I.mirror)&&(Ne+=Be(xe)+Be(Ce)),w.ylines.style("stroke-width",I._lw+"px").call(l.stroke,I.showline?I.linecolor:"rgba(0,0,0,0)")),w.ylines.attr("d",Ne)}return n.makeClipPaths(b),o.previousPromises(b)}function g(b,h){return(b.ticks||b.showline)&&(h===b._mainSubplot||"all"===b.mirror||"allticks"===b.mirror)}function x(b,h,S){if(!S.showline||!S._lw)return!1;if("all"===S.mirror||"allticks"===S.mirror)return!0;var w=S._anchorAxis;if(!w)return!1;var E=a.FROM_BL[h];return S.side===h?w.domain[E]===b.domain[E]:S.mirror&&w.domain[1-E]===b.domain[1-E]}function v(b,h,S,w){if(x(b,h,S))return S._lw;for(var E=0;E<w.length;E++){var P=w[E];if(P._mainAxis===S._mainAxis&&x(b,h,P))return P._lw}return 0}F.layoutStyles=function(b){return T.syncOrAsync([o.doAutoMargin,m],b)},F.drawMainTitle=function(b){var h,V,q,S=b._fullLayout.title,w=b._fullLayout,E=(q="middle",T.isRightAnchor(V=w.title)?q="end":T.isLeftAnchor(V)&&(q=y),q),P=function(B){var V=B.title,q="0em";return T.isTopAnchor(V)?q=a.CAP_SHIFT+"em":T.isMiddleAnchor(V)&&(q=a.MID_SHIFT+"em"),q}(w),I=function(B,V){var q=B.title,ie=B._size,te=0;return"0em"!==V&&V?V===a.CAP_SHIFT+"em"&&(te=q.pad.t):te=-q.pad.b,"auto"===q.y?ie.t/2:"paper"===q.yref?ie.t+ie.h-ie.h*q.y+te:B.height-B.height*q.y+te}(w,P),O=function(B,V){var q=B.title,ie=B._size,te=0;return V===y?te=q.pad.l:"end"===V&&(te=-q.pad.r),"paper"===q.xref?ie.l+ie.w*q.x+te:B.width*q.x+te}(w,E);if(i.draw(b,"gtitle",{propContainer:w,propName:"title.text",placeholder:w._dfltTitle.plot,attributes:{x:O,y:I,"text-anchor":E,dy:P}}),S.text&&S.automargin){var z=M.selectAll(".gtitle"),U=t.bBox(z.node()).height,R=function(B,V,q){var ae,ce,le,pe,we,ie=V.y,ee=ie>.5?"t":"b",J=0;return"paper"===V.yref?J=q+V.pad.t+V.pad.b:"container"===V.yref&&(ae=ie,le=B._fullLayout.height,pe=q,we=0,"middle"===(ce=V.yanchor)&&(we+=pe/2),"t"===ee?("top"===ce&&(we+=pe),we+=le-ae*le):("bottom"===ce&&(we+=pe),we+=ae*le),J=we+V.pad.t+V.pad.b),J>B._fullLayout.margin[ee]?J:0}(b,S,U);if(R>0){(function(B,V,q,ie){var ae,ce,le,pe,we,Te,ye,ve,te="title.automargin",ee=B._fullLayout.title,$=ee.y>.5?"t":"b",J={x:ee.x,y:ee.y,t:0,b:0},X={};"paper"===ee.yref&&(ae=B,le=$,pe=V,we=ie,Te="paper"===(ce=ee).yref?ae._fullLayout._size.h:ae._fullLayout.height,ye=T.isTopAnchor(ce)?pe:pe-we,ve="b"===le?Te-ye:ye,!(T.isTopAnchor(ce)&&"t"===le||T.isBottomAnchor(ce)&&"b"===le)&&ve<we)?J[$]=q:"container"===ee.yref&&(X[$]=q,B._fullLayout._reservedMargin[te]=X),o.allowAutoMargin(B,te),o.autoMargin(B,te,J)})(b,I,R,U),z.attr({x:O,y:I,"text-anchor":E,dy:(h=S.yanchor,"top"===h?a.CAP_SHIFT+.3+"em":"bottom"===h?"-0.3em":a.MID_SHIFT+"em")}).call(_.positionText,O,I);var j=(S.text.match(_.BR_TAG_ALL)||[]).length;if(j){var Y=a.LINE_SPACING*j+a.MID_SHIFT;0===S.y&&(Y=-Y),z.selectAll(".line").each(function(){var B=+this.getAttribute("dy").slice(0,-2)-Y+"em";this.setAttribute("dy",B)})}}}},F.doTraceStyle=function(b){var h,S=b.calcdata,w=[];for(h=0;h<S.length;h++){var E=S[h],P=E[0]||{},I=P.trace||{},O=I._module||{},z=O.arraysToCalcdata;z&&z(E,I);var U=O.editStyle;U&&w.push({fn:U,cd0:P})}if(w.length){for(h=0;h<w.length;h++){var R=w[h];R.fn(b,R.cd0)}p(b),F.redrawReglTraces(b)}return o.style(b),k.getComponentMethod("legend","draw")(b),o.previousPromises(b)},F.doColorBars=function(b){return k.getComponentMethod("colorbar","draw")(b),o.previousPromises(b)},F.layoutReplot=function(b){var h=b.layout;return b.layout=void 0,k.call("_doPlot",b,"",h)},F.doLegend=function(b){return k.getComponentMethod("legend","draw")(b),o.previousPromises(b)},F.doTicksRelayout=function(b){return n.draw(b,"redraw"),b._fullLayout._hasOnlyLargeSploms&&(k.subplotsRegistry.splom.updateGrid(b),p(b),F.redrawReglTraces(b)),F.drawMainTitle(b),o.previousPromises(b)},F.doModeBar=function(b){var h=b._fullLayout;r.manage(b);for(var S=0;S<h._basePlotModules.length;S++){var w=h._basePlotModules[S].updateFx;w&&w(b)}return o.previousPromises(b)},F.doCamera=function(b){for(var h=b._fullLayout,S=h._subplots.gl3d,w=0;w<S.length;w++){var E=h[S[w]];E._scene.setViewport(E)}},F.drawData=function(b){var h=b._fullLayout;p(b);for(var S=h._basePlotModules,w=0;w<S.length;w++)S[w].plot(b);return F.redrawReglTraces(b),o.style(b),k.getComponentMethod("selections","draw")(b),k.getComponentMethod("shapes","draw")(b),k.getComponentMethod("annotations","draw")(b),k.getComponentMethod("images","draw")(b),h._replotting=!1,o.previousPromises(b)},F.redrawReglTraces=function(b){var h=b._fullLayout;if(h._has("regl")){var S,w,E=b._fullData,P=[],I=[];for(h._hasOnlyLargeSploms&&h._splomGrid.draw(),S=0;S<E.length;S++){var O=E[S];!0===O.visible&&0!==O._length&&("splom"===O.type?h._splomScenes[O.uid].draw():"scattergl"===O.type?T.pushUnique(P,O.xaxis+O.yaxis):"scatterpolargl"===O.type&&T.pushUnique(I,O.subplot))}for(S=0;S<P.length;S++)(w=h._plots[P[S]])._scene&&w._scene.draw();for(S=0;S<I.length;S++)(w=h[I[S]]._subplot)._scene&&w._scene.draw()}},F.doAutoRangeAndConstraints=function(b){for(var h,S=n.list(b,"",!0),w={},E=0;E<S.length;E++)if(!w[(h=S[E])._id]){w[h._id]=1,f(b,h),c(b,h);var P=h._matchGroup;if(P)for(var I in P){var O=n.getFromId(b,I);c(b,O,h.range),w[I]=1}}u(b)},F.finalDraw=function(b){k.getComponentMethod("rangeslider","draw")(b),k.getComponentMethod("rangeselector","draw")(b)},F.drawMarginPushers=function(b){k.getComponentMethod("legend","draw")(b),k.getComponentMethod("rangeselector","draw")(b),k.getComponentMethod("sliders","draw")(b),k.getComponentMethod("updatemenus","draw")(b),k.getComponentMethod("colorbar","draw")(b)}},94828:function(ne,F,e){"use strict";var M=e(3400),k=M.isPlainObject,o=e(73060),T=e(7316),_=e(45464),p=e(31780),l=e(20556).dfltConfig;function t(c,y){c=M.extendDeep({},c);var d,m,g=Object.keys(c).sort();function x(w,E,P){if(k(E)&&k(w))t(w,E);else if(Array.isArray(E)&&Array.isArray(w)){var I=p.arrayTemplater({_template:c},P);for(m=0;m<E.length;m++){var O=E[m],z=I.newItem(O)._template;z&&t(z,O)}var U=I.defaultItems();for(m=0;m<U.length;m++)E.push(U[m]._template);for(m=0;m<E.length;m++)delete E[m].templateitemname}}for(d=0;d<g.length;d++){var v=g[d],b=c[v];if(v in y?x(b,y[v],v):y[v]=b,i(v)===v)for(var h in y){var S=i(h);h===S||S!==v||h in c||x(b,y[h],v)}}}function i(c){return c.replace(/[0-9]+$/,"")}function r(c,y,d,m,g){var x=g&&d(g);for(var v in c){var b=c[v],h=s(c,v,m),S=s(c,v,g),w=d(S);if(!w){var E=i(v);E!==v&&(w=d(S=s(c,E,g)))}if(!(x&&x===w||!w||w._noTemplating||"data_array"===w.valType||w.arrayOk&&Array.isArray(b)))if(!w.valType&&k(b))r(b,y,d,h,S);else if(w._isLinkedToArray&&Array.isArray(b))for(var P=!1,I=0,O={},z=0;z<b.length;z++){var U=b[z];if(k(U)){var R=U.name;if(R)O[R]||(r(U,y,d,s(b,I,h),s(b,I,S)),I++,O[R]=1);else if(!P){var j=s(c,p.arrayDefaultKey(v),m),Y=s(b,I,h);r(U,y,d,Y,s(b,I,S));var B=M.nestedProperty(y,Y);M.nestedProperty(y,j).set(B.get()),B.set(null),P=!0}}}else M.nestedProperty(y,h).set(b)}}function n(c,y){return o.getLayoutValObject(c,M.nestedProperty({},y).parts)}function a(c,y){return o.getTraceValObject(c,M.nestedProperty({},y).parts)}function s(c,y,d){return d?Array.isArray(c)?d+"["+y+"]":d+"."+y:y}function u(c){for(var y=0;y<c.length;y++)if(k(c[y]))return!0}function f(c){var y;switch(c.code){case"data":y="The template has no key data.";break;case"layout":y="The template has no key layout.";break;case"missing":y=c.path?"There are no templates for item "+c.path+" with name "+c.templateitemname:"There are no templates for trace "+c.index+", of type "+c.traceType+".";break;case"unused":y=c.path?"The template item at "+c.path+" was not used in constructing the plot.":c.dataCount?"Some of the templates of type "+c.traceType+" were not used. The template has "+c.templateCount+" traces, the data only has "+c.dataCount+" of this type.":"The template has "+c.templateCount+" traces of type "+c.traceType+" but there are none in the data.";break;case"reused":y="Some of the templates of type "+c.traceType+" were used more than once. The template has "+c.templateCount+" traces, the data has "+c.dataCount+" of this type."}return c.msg=y,c}F.makeTemplate=function(c){c=M.isPlainObject(c)?c:M.getGraphDiv(c),c=M.extendDeep({_context:l},{data:c.data,layout:c.layout}),T.supplyDefaults(c);var y=c.data||[],d=c.layout||{};d._basePlotModules=c._fullLayout._basePlotModules,d._modules=c._fullLayout._modules;var m={data:{},layout:{}};y.forEach(function(I){var O={};r(I,O,a.bind(null,I));var z=M.coerce(I,{},_,"type"),U=m.data[z];U||(U=m.data[z]=[]),U.push(O)}),r(d,m.layout,n.bind(null,d)),delete m.layout.template;var g=d.template;if(k(g)){var x,v,b,h,S,w,E=g.layout;k(E)&&t(E,m.layout);var P=g.data;if(k(P)){for(v in m.data)if(b=P[v],Array.isArray(b)){for(w=(S=m.data[v]).length,h=b.length,x=0;x<w;x++)t(b[x%h],S[x]);for(x=w;x<h;x++)S.push(M.extendDeep({},b[x]))}for(v in P)v in m.data||(m.data[v]=M.extendDeep([],P[v]))}}return m},F.validateTemplate=function(c,y){var d=M.extendDeep({},{_context:l,data:c.data,layout:c.layout}),m=d.layout||{};k(y)||(y=m.template||{});var g=y.layout,x=y.data,v=[];d.layout=m,d.layout.template=y,T.supplyDefaults(d);var b=d._fullLayout,h=d._fullData,S={};if(k(g)?(function U(R,j){for(var Y in R)if("_"!==Y.charAt(0)&&k(R[Y])){var B,V=i(Y),q=[];for(B=0;B<j.length;B++)q.push(s(R,Y,j[B])),V!==Y&&q.push(s(R,V,j[B]));for(B=0;B<q.length;B++)S[q[B]]=1;U(R[Y],q)}}(b,["layout"]),function U(R,j){for(var Y in R)if(-1===Y.indexOf("defaults")&&k(R[Y])){var B=s(R,Y,j);S[B]?U(R[Y],B):v.push({code:"unused",path:B})}}(g,"layout")):v.push({code:"layout"}),k(x)){for(var w,E={},P=0;P<h.length;P++){var I=h[P];E[w=I.type]=(E[w]||0)+1,I._fullInput._template||v.push({code:"missing",index:I._fullInput.index,traceType:w})}for(w in x){var O=x[w].length,z=E[w]||0;O>z?v.push({code:"unused",traceType:w,templateCount:O,dataCount:z}):z>O&&v.push({code:"reused",traceType:w,templateCount:O,dataCount:z})}}else v.push({code:"data"});if(function U(R,j){for(var Y in R)if("_"!==Y.charAt(0)){var B=R[Y],V=s(R,Y,j);k(B)?(Array.isArray(R)&&!1===B._template&&B.templateitemname&&v.push({code:"missing",path:V,templateitemname:B.templateitemname}),U(B,V)):Array.isArray(B)&&u(B)&&U(B,V)}}({data:h,layout:b},""),v.length)return v.map(f)}},67024:function(ne,F,e){"use strict";var M=e(38248),k=e(36424),o=e(7316),T=e(3400),_=e(81792),p=e(37164),l=e(63268),t=e(25788).version,i={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};ne.exports=function(r,n){var a,s,u,f;function c(z){return!(z in n)||T.validate(n[z],i[z])}if(n=n||{},T.isPlainObject(r)?(a=r.data||[],s=r.layout||{},u=r.config||{},f={}):(r=T.getGraphDiv(r),a=T.extendDeep([],r.data),s=T.extendDeep({},r.layout),u=r._context,f=r._fullLayout||{}),!c("width")&&null!==n.width||!c("height")&&null!==n.height)throw new Error("Height and width should be pixel values.");if(!c("format"))throw new Error("Export format is not "+T.join2(i.format.values,", "," or ")+".");var y={};function d(z,U){return T.coerce(n,y,i,z,U)}var m=d("format"),g=d("width"),x=d("height"),v=d("scale"),b=d("setBackground"),h=d("imageDataOnly"),S=document.createElement("div");S.style.position="absolute",S.style.left="-5000px",document.body.appendChild(S);var w=T.extendFlat({},s);g?w.width=g:null===n.width&&M(f.width)&&(w.width=f.width),x?w.height=x:null===n.height&&M(f.height)&&(w.height=f.height);var E=T.extendFlat({},u,{_exportedPlot:!0,staticPlot:!0,setBackground:b}),P=_.getRedrawFunc(S);function I(){return new Promise(function(z){setTimeout(z,_.getDelay(S._fullLayout))})}function O(){return new Promise(function(z,U){var R=p(S,m,v),j=S._fullLayout.width,Y=S._fullLayout.height;function B(){k.purge(S),document.body.removeChild(S)}if("full-json"===m){var V=o.graphJson(S,!1,"keepdata","object",!0,!0);return V.version=t,V=JSON.stringify(V),B(),z(h?V:_.encodeJSON(V))}if(B(),"svg"===m)return z(h?R:_.encodeSVG(R));var q=document.createElement("canvas");q.id=T.randstr(),l({format:m,width:j,height:Y,scale:v,canvas:q,svg:R,promise:!0}).then(z).catch(U)})}return new Promise(function(z,U){k.newPlot(S,a,w,E).then(P).then(I).then(O).then(function(R){var j;z((j=R,h?j.replace(_.IMAGE_URL_PREFIX,""):j))}).catch(function(R){U(R)})})}},21480:function(ne,F,e){"use strict";var M=e(3400),k=e(7316),o=e(73060),T=e(20556).dfltConfig,_=M.isPlainObject,p=Array.isArray,l=M.isArrayOrTypedArray;function t(c,y,d,m,g,x){x=x||[];for(var v=Object.keys(c),b=0;b<v.length;b++){var h=v[b];if("transforms"!==h){var S=x.slice();S.push(h);var w=c[h],E=y[h],P=s(d,h),I=(P||{}).valType,O="info_array"===I,z="colorscale"===I,U=(P||{}).items;if(a(d,h))if(_(w)&&_(E)&&"any"!==I)t(w,E,P,m,g,S);else if(O&&p(w)){w.length>E.length&&m.push(n("unused",g,S.concat(E.length)));var R,j,B,V,q=E.length,ie=Array.isArray(U);if(ie&&(q=Math.min(q,U.length)),2===P.dimensions)for(j=0;j<q;j++)if(p(w[j])){w[j].length>E[j].length&&m.push(n("unused",g,S.concat(j,E[j].length)));var te=E[j].length;for(R=0;R<(ie?Math.min(te,U[j].length):te);R++)V=E[j][R],M.validate(B=w[j][R],ie?U[j][R]:U)?V!==B&&V!==+B&&m.push(n("dynamic",g,S.concat(j,R),B,V)):m.push(n("value",g,S.concat(j,R),B))}else m.push(n("array",g,S.concat(j),w[j]));else for(j=0;j<q;j++)V=E[j],M.validate(B=w[j],ie?U[j]:U)?V!==B&&V!==+B&&m.push(n("dynamic",g,S.concat(j),B,V)):m.push(n("value",g,S.concat(j),B))}else if(P.items&&!O&&p(w)){var ee,$,J=U[Object.keys(U)[0]],X=[];for(ee=0;ee<E.length;ee++){var ae=E[ee]._index||ee;if(($=S.slice()).push(ae),_(w[ae])&&_(E[ee])){X.push(ae);var ce=w[ae],le=E[ee];_(ce)&&!1!==ce.visible&&!1===le.visible?m.push(n("invisible",g,$)):t(ce,le,J,m,g,$)}}for(ee=0;ee<w.length;ee++)($=S.slice()).push(ee),_(w[ee])?-1===X.indexOf(ee)&&m.push(n("unused",g,$)):m.push(n("object",g,$,w[ee]))}else!_(w)&&_(E)?m.push(n("object",g,S,w)):l(w)||!l(E)||O||z?h in y?M.validate(w,P)?"enumerated"===P.valType&&(P.coerceNumber&&w!==+E||w!==E)&&m.push(n("dynamic",g,S,w,E)):m.push(n("value",g,S,w)):m.push(n("unused",g,S,w)):m.push(n("array",g,S,w));else m.push(n("schema",g,S))}}return m}ne.exports=function(c,y){void 0===c&&(c=[]),void 0===y&&(y={});var d,m,g=o.get(),x=[],v={_context:M.extendFlat({},T)};p(c)?(v.data=M.extendDeep([],c),d=c):(v.data=[],d=[],x.push(n("array","data"))),_(y)?(v.layout=M.extendDeep({},y),m=y):(v.layout={},m={},arguments.length>1&&x.push(n("object","layout"))),k.supplyDefaults(v);for(var b=v._fullData,h=d.length,S=0;S<h;S++){var w=d[S],E=["data",S];if(_(w)){var P=b[S],I=P.type,O=g.traces[I].attributes;O.type={valType:"enumerated",values:[I]},!1===P.visible&&!1!==w.visible&&x.push(n("invisible",E)),t(w,P,O,x,E);var z=w.transforms,U=P.transforms;if(z){p(z)||x.push(n("array",E,["transforms"])),E.push("transforms");for(var R=0;R<z.length;R++){var j=["transforms",R],Y=z[R].type;if(_(z[R])){var B=g.transforms[Y]?g.transforms[Y].attributes:{};B.type={valType:"enumerated",values:Object.keys(g.transforms)},t(z[R],U[R],B,x,E,j)}else x.push(n("object",E,j))}}}else x.push(n("object",E))}return t(m,v._fullLayout,function(ie,te){for(var ee=ie.layout.layoutAttributes,$=0;$<te.length;$++){var J=te[$],X=ie.traces[J.type],ae=X.layoutAttributes;ae&&M.extendFlat(J.subplot?ee[X.attributes.subplot.dflt]:ee,ae)}return ee}(g,b),x,"layout"),0===x.length?void 0:x};var i={object:function(c,y){return("layout"===c&&""===y?"The layout argument":"data"===c[0]&&""===y?"Trace "+c[1]+" in the data argument":r(c)+"key "+y)+" must be linked to an object container"},array:function(c,y){return("data"===c?"The data argument":r(c)+"key "+y)+" must be linked to an array container"},schema:function(c,y){return r(c)+"key "+y+" is not part of the schema"},unused:function(c,y,d){var m=_(d)?"container":"key";return r(c)+m+" "+y+" did not get coerced"},dynamic:function(c,y,d,m){return[r(c)+"key",y,"(set to '"+d+"')","got reset to","'"+m+"'","during defaults."].join(" ")},invisible:function(c,y){return(y?r(c)+"item "+y:"Trace "+c[1])+" got defaulted to be not visible"},value:function(c,y,d){return[r(c)+"key "+y,"is set to an invalid value ("+d+")"].join(" ")}};function r(c){return p(c)?"In data trace "+c[1]+", ":"In "+c+", "}function n(c,y,d,m,g){var x,v;d=d||"",p(y)?(x=y[0],v=y[1]):(x=y,v=null);var b=function(S){if(!p(S))return String(S);for(var w="",E=0;E<S.length;E++){var P=S[E];"number"==typeof P?w=w.substr(0,w.length-1)+"["+P+"]":w+=P,E<S.length-1&&(w+=".")}return w}(d),h=i[c](y,b,m,g);return M.log(h),{code:c,container:x,trace:v,path:d,astr:b,msg:h}}function a(c,y){var d=f(y),m=d.keyMinusId;return!!(m in c&&c[m]._isSubplotObj&&d.id)||y in c}function s(c,y){return y in c?c[y]:c[f(y).keyMinusId]}var u=M.counterRegex("([a-z]+)");function f(c){var y=c.match(u);return{keyMinusId:y&&y[1],id:y&&y[2]}}},85656:function(ne){"use strict";ne.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},51272:function(ne,F,e){"use strict";var M=e(3400),k=e(31780);ne.exports=function(o,T,_){var p,l,t=_.name,i=_.inclusionAttr||"visible",r=T[t],n=M.isArrayOrTypedArray(o[t])?o[t]:[],a=T[t]=[],s=k.arrayTemplater(T,t,i);for(p=0;p<n.length;p++){var u=n[p];M.isPlainObject(u)?l=s.newItem(u):(l=s.newItem({}))[i]=!1,l._index=p,!1!==l[i]&&_.handleItemDefaults(u,l,T,_),a.push(l)}var f=s.defaultItems();for(p=0;p<f.length;p++)(l=f[p])._index=a.length,_.handleItemDefaults({},l,T,_,{}),a.push(l);if(M.isArrayOrTypedArray(r)){var c=Math.min(r.length,a.length);for(p=0;p<c;p++)M.relinkPrivateKeys(a[p],r[p])}return a}},45464:function(ne,F,e){"use strict";var M=e(25376),k=e(55756);ne.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:M({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:k.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},1220:function(ne,F,e){"use strict";var M=e(38248),k=e(3400),o=k.dateTime2ms,T=k.incrementMonth,_=e(39032).ONEAVGMONTH;ne.exports=function(p,l,t,i){if("date"!==l.type)return{vals:i};var r=p[t+"periodalignment"];if(!r)return{vals:i};var n,a=p[t+"period"];if(M(a)){if((a=+a)<=0)return{vals:i}}else if("string"==typeof a&&"M"===a.charAt(0)){var s=+a.substring(1);if(!(s>0&&Math.round(s)===s))return{vals:i};n=s}for(var u=l.calendar,f="start"===r,c="end"===r,d=o(p[t+"period0"],u)||0,m=[],g=[],x=[],v=i.length,b=0;b<v;b++){var h,S,w,E=i[b];if(n){for(h=Math.round((E-d)/(n*_)),w=T(d,n*h,u);w>E;)w=T(w,-n,u);for(;w<=E;)w=T(w,n,u);S=T(w,-n,u)}else{for(w=d+(h=Math.round((E-d)/a))*a;w>E;)w-=a;for(;w<=E;)w+=a;S=w-a}m[b]=f?S:c?w:(S+w)/2,g[b]=S,x[b]=w}return{vals:m,starts:g,ends:x}}},26720:function(ne){"use strict";ne.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},19280:function(ne,F,e){"use strict";var M=e(33428),k=e(38248),o=e(3400),T=e(39032).FP_SAFE,_=e(24040),p=e(43616),l=e(79811),t=l.getFromId,i=l.isLinked;function r(b,h){var S,w,E=[],P=b._fullLayout,I=a(P,h,0),O=a(P,h,1),z=u(b,h),U=z.min,R=z.max;if(0===U.length||0===R.length)return o.simpleMap(h.range,h.r2l);var j=U[0].val,Y=R[0].val;for(S=1;S<U.length&&j===Y;S++)j=Math.min(j,U[S].val);for(S=1;S<R.length&&j===Y;S++)Y=Math.max(Y,R[S].val);var B=h.autorange,V="reversed"===B||"min reversed"===B||"max reversed"===B;if(!V&&h.range){var q=o.simpleMap(h.range,h.r2l);V=q[1]<q[0]}"reversed"===h.autorange&&(h.autorange=!0);var ie,te,ee,$,J,X,ae=h.rangemode,ce="tozero"===ae,le="nonnegative"===ae,pe=h._length,we=pe/10,Te=0;for(S=0;S<U.length;S++)for(ie=U[S],w=0;w<R.length;w++)(X=(te=R[w]).val-ie.val-n(h,ie.val,te.val))>0&&((J=pe-I(ie)-O(te))>we?X/J>Te&&(ee=ie,$=te,Te=X/J):X/pe>Te&&(ee={val:ie.val,nopad:1},$={val:te.val,nopad:1},Te=X/pe));if(j===Y){var ye=j-1,ve=j+1;if(ce)if(0===j)E=[0,1];else{var xe=(j>0?R:U).reduce(function(Oe,be){return Math.max(Oe,O(be))},0),Ce=j/(1-Math.min(.5,xe/pe));E=j>0?[0,Ce]:[Ce,0]}else E=le?[Math.max(0,ye),Math.max(1,ve)]:[ye,ve]}else ce?(ee.val>=0&&(ee={val:0,nopad:1}),$.val<=0&&($={val:0,nopad:1})):le&&(ee.val-Te*I(ee)<0&&(ee={val:0,nopad:1}),$.val<=0&&($={val:1,nopad:1})),Te=($.val-ee.val-n(h,ie.val,te.val))/(pe-I(ee)-O($)),E=[ee.val-Te*I(ee),$.val+Te*O($)];return E=v(E,h),h.limitRange&&h.limitRange(),V&&E.reverse(),o.simpleMap(E,h.l2r||Number)}function n(b,h,S){var w=0;if(b.rangebreaks)for(var E=b.locateBreaks(h,S),P=0;P<E.length;P++){var I=E[P];w+=I.max-I.min}return w}function a(b,h,S){var w=.05*h._length,E=h._anchorAxis||{};if(-1!==(h.ticklabelposition||"").indexOf("inside")||-1!==(E.ticklabelposition||"").indexOf("inside")){var P=h.isReversed();if(!P){var I=o.simpleMap(h.range,h.r2l);P=I[1]<I[0]}P&&(S=!S)}var O=0;return i(b,h._id)||(O=function(z,U,R){var j=0,Y="x"===U._id.charAt(0);for(var B in z._plots){var V=z._plots[B];if(U._id===V.xaxis._id||U._id===V.yaxis._id){var q=(Y?V.yaxis:V.xaxis)||{};if(-1!==(q.ticklabelposition||"").indexOf("inside")&&(!R&&("left"===q.side||"bottom"===q.side)||R&&("top"===q.side||"right"===q.side))){if(q._vals){var ie=o.deg2rad(q._tickAngles[q._id+"tick"]||0),te=Math.abs(Math.cos(ie)),ee=Math.abs(Math.sin(ie));q._vals[0].bb||q._selections[q._id+"tick"].each(function(le){var pe=M.select(this);pe.select(".text-math-group").empty()&&(le.bb=p.bBox(pe.node()))});for(var J=0;J<q._vals.length;J++){var X=q._vals[J].bb;if(X){var ae=2*s+X.width,ce=2*s+X.height;j=Math.max(j,Y?Math.max(ae*te,ce*ee):Math.max(ce*te,ae*ee))}}}"inside"===q.ticks&&"inside"===q.ticklabelposition&&(j+=q.ticklen||0)}}}return j}(b,h,S)),w=Math.max(O,w),"domain"===h.constrain&&h._inputDomain&&(w*=(h._inputDomain[1]-h._inputDomain[0])/(h.domain[1]-h.domain[0])),function(z){return z.nopad?0:z.pad+(z.extrapad?w:O)}}ne.exports={applyAutorangeOptions:v,getAutoRange:r,makePadFn:a,doAutoRange:function(b,h,S){if(h.setScale(),h.autorange){h.range=S?S.slice():r(b,h),h._r=h.range.slice(),h._rl=o.simpleMap(h._r,h.r2l);var w=h._input,E={};E[h._attr+".range"]=h.range,E[h._attr+".autorange"]=h.autorange,_.call("_storeDirectGUIEdit",b.layout,b._fullLayout._preGUI,E),w.range=h.range.slice(),w.autorange=h.autorange}var P=h._anchorAxis;if(P&&P.rangeslider){var I=P.rangeslider[h._name];I&&"auto"===I.rangemode&&(I.range=r(b,h)),P._input.rangeslider[h._name]=o.extendFlat({},I)}},findExtremes:function(b,h,S){S||(S={}),b._m||b.setScale();var w,E,P,I,O,z,U,R,j,Y=[],B=[],V=h.length,q=S.padded||!1,ie=S.tozero&&("linear"===b.type||"-"===b.type),te="log"===b.type,ee=!1,$=S.vpadLinearized||!1;function J(ye){if(Array.isArray(ye))return ee=!0,function(xe){return Math.max(Number(ye[xe]||0),0)};var ve=Math.max(Number(ye||0),0);return function(){return ve}}var X=J((b._m>0?S.ppadplus:S.ppadminus)||S.ppad||0),ae=J((b._m>0?S.ppadminus:S.ppadplus)||S.ppad||0),ce=J(S.vpadplus||S.vpad),le=J(S.vpadminus||S.vpad);if(!ee){if(R=1/0,j=-1/0,te)for(w=0;w<V;w++)(E=h[w])<R&&E>0&&(R=E),E>j&&E<T&&(j=E);else for(w=0;w<V;w++)(E=h[w])<R&&E>-T&&(R=E),E>j&&E<T&&(j=E);h=[R,j],V=2}var pe={tozero:ie,extrapad:q};function we(ye){k(P=h[ye])&&(z=X(ye),U=ae(ye),$?(I=b.c2l(P)-le(ye),O=b.c2l(P)+ce(ye)):(R=P-le(ye),j=P+ce(ye),te&&R<j/10&&(R=j/10),I=b.c2l(R),O=b.c2l(j)),ie&&(I=Math.min(0,I),O=Math.max(0,O)),d(I)&&f(Y,I,U,pe),d(O)&&c(B,O,z,pe))}var Te=Math.min(6,V);for(w=0;w<Te;w++)we(w);for(w=V-1;w>=Te;w--)we(w);return{min:Y,max:B,opts:S}},concatExtremes:u};var s=3;function u(b,h,S){var w,E,P,I=h._id,z=b._fullLayout,U=[],R=[];function j(ie,te){for(w=0;w<te.length;w++){var ee=ie[te[w]],$=(ee._extremes||{})[I];if(!0===ee.visible&&$){for(E=0;E<$.min.length;E++)f(U,(P=$.min[E]).val,P.pad,{extrapad:P.extrapad});for(E=0;E<$.max.length;E++)c(R,(P=$.max[E]).val,P.pad,{extrapad:P.extrapad})}}}if(j(b._fullData,h._traceIndices),j(z.annotations||[],h._annIndices||[]),j(z.shapes||[],h._shapeIndices||[]),h._matchGroup&&!S)for(var Y in h._matchGroup)if(Y!==h._id){var B=t(b,Y),V=u(b,B,!0),q=h._length/B._length;for(E=0;E<V.min.length;E++)f(U,(P=V.min[E]).val,P.pad*q,{extrapad:P.extrapad});for(E=0;E<V.max.length;E++)c(R,(P=V.max[E]).val,P.pad*q,{extrapad:P.extrapad})}return{min:U,max:R}}function f(b,h,S,w){y(b,h,S,w,m)}function c(b,h,S,w){y(b,h,S,w,g)}function y(b,h,S,w,E){for(var P=w.tozero,I=w.extrapad,O=!0,z=0;z<b.length&&O;z++){var U=b[z];if(E(U.val,h)&&U.pad>=S&&(U.extrapad||!I)){O=!1;break}E(h,U.val)&&U.pad<=S&&(I||!U.extrapad)&&(b.splice(z,1),z--)}if(O){var R=P&&0===h;b.push({val:h,pad:R?0:S,extrapad:!R&&I})}}function d(b){return k(b)&&Math.abs(b)<T}function m(b,h){return b<=h}function g(b,h){return b>=h}function x(b,h,S){return void 0===h||void 0===S||(h=b.d2l(h))<b.d2l(S)}function v(b,h){if(!h||!h.autorangeoptions)return b;var U,R,j,S=b[0],w=b[1],E=h.autorangeoptions.include;if(void 0!==E){var P=h.d2l(S),I=h.d2l(w);o.isArrayOrTypedArray(E)||(E=[E]);for(var O=0;O<E.length;O++){var z=h.d2l(E[O]);P>=z&&(P=z,S=z),I<=z&&(I=z,w=z)}}return U=S,S=(j=(R=h).autorangeoptions)&&void 0!==j.minallowed&&x(R,j.minallowed,j.maxallowed)?j.minallowed:j&&void 0!==j.clipmin&&x(R,j.clipmin,j.clipmax)?Math.max(U,R.d2l(j.clipmin)):U,w=function(U,R){var j=R.autorangeoptions;return j&&void 0!==j.maxallowed&&x(R,j.minallowed,j.maxallowed)?j.maxallowed:j&&void 0!==j.clipmax&&x(R,j.clipmin,j.clipmax)?Math.min(U,R.d2l(j.clipmax)):U}(w,h),[S,w]}},76808:function(ne){"use strict";ne.exports=function(F,e,M){var k,o;if(M){var T="reversed"===e||"min reversed"===e||"max reversed"===e;k=M[T?1:0],o=M[T?0:1]}var _=F("autorangeoptions.minallowed",null===o?k:void 0),p=F("autorangeoptions.maxallowed",null===k?o:void 0);void 0===_&&F("autorangeoptions.clipmin"),void 0===p&&F("autorangeoptions.clipmax"),F("autorangeoptions.include")}},54460:function(ne,F,e){"use strict";var M=e(33428),k=e(38248),o=e(7316),T=e(24040),_=e(3400),p=_.strTranslate,l=e(72736),t=e(81668),i=e(76308),r=e(43616),n=e(94724),a=e(98728),s=e(39032),u=s.ONEMAXYEAR,f=s.ONEAVGYEAR,c=s.ONEMINYEAR,y=s.ONEMAXQUARTER,d=s.ONEAVGQUARTER,m=s.ONEMINQUARTER,g=s.ONEMAXMONTH,x=s.ONEAVGMONTH,v=s.ONEMINMONTH,b=s.ONEWEEK,h=s.ONEDAY,S=h/2,w=s.ONEHOUR,E=s.ONEMIN,P=s.ONESEC,I=s.MINUS_SIGN,O=s.BADNUM,z={K:"zeroline"},U={K:"gridline",L:"path"},R={K:"minor-gridline",L:"path"},j={K:"tick",L:"path"},Y={K:"tick",L:"text"},B={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},V=e(84284),q=V.MID_SHIFT,ie=V.CAP_SHIFT,te=V.LINE_SPACING,ee=V.OPPOSITE_SIDE,$=ne.exports={};$.setConvert=e(78344);var J=e(52976),X=e(79811),ae=X.idSort,ce=X.isLinked;$.id2name=X.id2name,$.name2id=X.name2id,$.cleanId=X.cleanId,$.list=X.list,$.listIds=X.listIds,$.getFromId=X.getFromId,$.getFromTrace=X.getFromTrace;var le=e(19280);$.getAutoRange=le.getAutoRange,$.findExtremes=le.findExtremes;var pe=1e-4;function we(Ve){var Ge=(Ve[1]-Ve[0])*pe;return[Ve[0]-Ge,Ve[1]+Ge]}$.coerceRef=function(Ve,Ge,ut,Qe,yt,wt){var kt=Qe.charAt(Qe.length-1),vt=ut._fullLayout._subplots[kt+"axis"],Lt=Qe+"ref",St={};return yt||(yt=vt[0]||("string"==typeof wt?wt:wt[0])),wt||(wt=yt),vt=vt.concat(vt.map(function(Ot){return Ot+" domain"})),St[Lt]={valType:"enumerated",values:vt.concat(wt?"string"==typeof wt?[wt]:wt:[]),dflt:yt},_.coerce(Ve,Ge,St,Lt)},$.getRefType=function(Ve){return void 0===Ve?Ve:"paper"===Ve?"paper":"pixel"===Ve?"pixel":/( domain)$/.test(Ve)?"domain":"range"},$.coercePosition=function(Ve,Ge,ut,Qe,yt,wt){var kt,vt;if("range"!==$.getRefType(Qe))kt=_.ensureNumber,vt=ut(yt,wt);else{var Lt=$.getFromId(Ge,Qe);vt=ut(yt,wt=Lt.fraction2r(wt)),kt=Lt.cleanPos}Ve[yt]=kt(vt)},$.cleanPosition=function(Ve,Ge,ut){return("paper"===ut||"pixel"===ut?_.ensureNumber:$.getFromId(Ge,ut).cleanPos)(Ve)},$.redrawComponents=function(Ve,Ge){Ge=Ge||$.listIds(Ve);var ut=Ve._fullLayout;function Qe(yt,wt,kt,vt){for(var Lt=T.getComponentMethod(yt,wt),St={},Ot=0;Ot<Ge.length;Ot++)for(var Nt=ut[$.id2name(Ge[Ot])][kt],Bt=0;Bt<Nt.length;Bt++){var Vt=Nt[Bt];if(!St[Vt]&&(Lt(Ve,Vt),St[Vt]=1,vt))return}}Qe("annotations","drawOne","_annIndices"),Qe("shapes","drawOne","_shapeIndices"),Qe("images","draw","_imgIndices",!0),Qe("selections","drawOne","_selectionIndices")};var Te=$.getDataConversions=function(Ve,Ge,ut,Qe){var yt,wt="x"===ut||"y"===ut||"z"===ut?ut:Qe;if(_.isArrayOrTypedArray(wt)){if(yt={type:J(Qe,void 0,{autotypenumbers:Ve._fullLayout.autotypenumbers}),_categories:[]},$.setConvert(yt),"category"===yt.type)for(var kt=0;kt<Qe.length;kt++)yt.d2c(Qe[kt])}else yt=$.getFromTrace(Ve,Ge,wt);return yt?{d2c:yt.d2c,c2d:yt.c2d}:"ids"===wt?{d2c:ve,c2d:ve}:{d2c:ye,c2d:ye}};function ye(Ve){return+Ve}function ve(Ve){return String(Ve)}function xe(Ve,Ge){return Math.abs((Ve/Ge+.5)%1-.5)<.001}function Ce(Ve,Ge){return Math.abs(Ve/Ge-1)<.001}function Oe(Ve){return+Ve.substring(1)}function be(Ve,Ge){return Ve.rangebreaks&&(Ge=Ge.filter(function(ut){return Ve.maskBreaks(ut.x)!==O})),Ge}function ue(Ve){var Ge=Ve._mainAxis,ut=[];if(Ge._vals)for(var Qe=0;Qe<Ge._vals.length;Qe++)if(!Ge._vals[Qe].noTick){var yt=Ge.l2p(Ge._vals[Qe].x),wt=Ve.p2l(yt),kt=$.tickText(Ve,wt);Ge._vals[Qe].minor&&(kt.minor=!0,kt.text=""),ut.push(kt)}return be(Ve,ut)}function se(Ve,Ge){var ut=we(_.simpleMap(Ve.range,Ve.r2l)),Qe=Math.min(ut[0],ut[1]),yt=Math.max(ut[0],ut[1]),wt="category"===Ve.type?Ve.d2l_noadd:Ve.d2l;"log"===Ve.type&&"L"!==String(Ve.dtick).charAt(0)&&(Ve.dtick="L"+Math.pow(10,Math.floor(Math.min(Ve.range[0],Ve.range[1]))-1));for(var kt=[],vt=0;vt<=1;vt++)if((void 0===Ge||!(Ge&&vt||!1===Ge&&!vt))&&(!vt||Ve.minor)){var Lt=vt?Ve.minor.tickvals:Ve.tickvals,St=vt?[]:Ve.ticktext;if(Lt){_.isArrayOrTypedArray(St)||(St=[]);for(var Ot=0;Ot<Lt.length;Ot++){var Nt=wt(Lt[Ot]);if(Nt>Qe&&Nt<yt){var Bt=$.tickText(Ve,Nt,!1,String(St[Ot]));vt&&(Bt.minor=!0,Bt.text=""),kt.push(Bt)}}}}return be(Ve,kt)}$.getDataToCoordFunc=function(Ve,Ge,ut,Qe){return Te(Ve,Ge,ut,Qe).d2c},$.counterLetter=function(Ve){var Ge=Ve.charAt(0);return"x"===Ge?"y":"y"===Ge?"x":void 0},$.minDtick=function(Ve,Ge,ut,Qe){-1===["log","category","multicategory"].indexOf(Ve.type)&&Qe?void 0===Ve._minDtick?(Ve._minDtick=Ge,Ve._forceTick0=ut):Ve._minDtick&&((Ve._minDtick/Ge+1e-6)%1<2e-6&&((ut-Ve._forceTick0)/Ge%1+1.000001)%1<2e-6?(Ve._minDtick=Ge,Ve._forceTick0=ut):((Ge/Ve._minDtick+1e-6)%1>2e-6||((ut-Ve._forceTick0)/Ve._minDtick%1+1.000001)%1>2e-6)&&(Ve._minDtick=0)):Ve._minDtick=0},$.saveRangeInitial=function(Ve,Ge){for(var ut=$.list(Ve,"",!0),Qe=!1,yt=0;yt<ut.length;yt++){var wt=ut[yt],kt=void 0===wt._rangeInitial0&&void 0===wt._rangeInitial1,Lt=wt.autorange;(kt&&!0!==Lt||Ge&&(kt||wt.range[0]!==wt._rangeInitial0||wt.range[1]!==wt._rangeInitial1))&&(wt._rangeInitial0="min"===Lt||"max reversed"===Lt?void 0:wt.range[0],wt._rangeInitial1="max"===Lt||"min reversed"===Lt?void 0:wt.range[1],wt._autorangeInitial=Lt,Qe=!0)}return Qe},$.saveShowSpikeInitial=function(Ve,Ge){for(var ut=$.list(Ve,"",!0),Qe=!1,yt="on",wt=0;wt<ut.length;wt++){var kt=ut[wt],vt=void 0===kt._showSpikeInitial;(vt||Ge&&(vt||kt.showspikes!==kt._showspikes))&&(kt._showSpikeInitial=kt.showspikes,Qe=!0),"on"!==yt||kt.showspikes||(yt="off")}return Ve._fullLayout._cartesianSpikesEnabled=yt,Qe},$.autoBin=function(Ve,Ge,ut,Qe,yt,wt){var kt,vt=_.aggNums(Math.min,null,Ve),Lt=_.aggNums(Math.max,null,Ve);if("category"===Ge.type||"multicategory"===Ge.type)return{start:vt-.5,end:Lt+.5,size:Math.max(1,Math.round(wt)||1),_dataSpan:Lt-vt};if(yt||(yt=Ge.calendar),kt="log"===Ge.type?{type:"linear",range:[vt,Lt]}:{type:Ge.type,range:_.simpleMap([vt,Lt],Ge.c2r,0,yt),calendar:yt},$.setConvert(kt),wt=wt&&a.dtick(wt,kt.type))kt.dtick=wt,kt.tick0=a.tick0(void 0,kt.type,yt);else{var St;if(ut)St=(Lt-vt)/ut;else{var Ot=_.distinctVals(Ve),Nt=Math.pow(10,Math.floor(Math.log(Ot.minDiff)/Math.LN10)),Bt=Nt*_.roundUp(Ot.minDiff/Nt,[.9,1.9,4.9,9.9],!0);St=Math.max(Bt,2*_.stdev(Ve)/Math.pow(Ve.length,Qe?.25:.4)),k(St)||(St=1)}$.autoTicks(kt,St)}var Vt,nn=kt.dtick,gn=$.tickIncrement($.tickFirst(kt),nn,"reverse",yt);if("number"==typeof nn)Vt=(gn=function(Jt,an,Xt,Gn,Dn){var An=0,cn=0,bn=0,hn=0;function wn(jn){return(1+100*(jn-Jt)/Xt.dtick)%100<2}for(var Ln=0;Ln<an.length;Ln++)an[Ln]%1==0?bn++:k(an[Ln])||hn++,wn(an[Ln])&&An++,wn(an[Ln]+Xt.dtick/2)&&cn++;var Pn=an.length-hn;if(bn===Pn&&"date"!==Xt.type)Xt.dtick<1?Jt=Gn-.5*Xt.dtick:(Jt-=.5)+Xt.dtick<Gn&&(Jt+=Xt.dtick);else if(cn<.1*Pn&&(An>.3*Pn||wn(Gn)||wn(Dn))){var Nn=Xt.dtick/2;Jt+=Jt+Nn<Gn?Nn:-Nn}return Jt}(gn,Ve,kt,vt,Lt))+(1+Math.floor((Lt-gn)/nn))*nn;else for("M"===kt.dtick.charAt(0)&&(gn=function(Jt,an,Xt,Gn,Dn){var An=_.findExactDates(an,Dn);if(An.exactDays>.8){var cn=Number(Xt.substr(1));An.exactYears>.8&&cn%12==0?Jt=$.tickIncrement(Jt,"M6","reverse")+1.5*h:An.exactMonths>.8?Jt=$.tickIncrement(Jt,"M1","reverse")+15.5*h:Jt-=S;var bn=$.tickIncrement(Jt,Xt);if(bn<=Gn)return bn}return Jt}(gn,Ve,nn,vt,yt)),Vt=gn;Vt<=Lt;)Vt=$.tickIncrement(Vt,nn,!1,yt);return{start:Ge.c2r(gn,0,yt),end:Ge.c2r(Vt,0,yt),size:nn,_dataSpan:Lt-vt}},$.prepMinorTicks=function(Ve,Ge,ut){if(!Ge.minor.dtick){delete Ve.dtick;var Qe,yt=Ge.dtick&&k(Ge._tmin);if(yt){var wt=$.tickIncrement(Ge._tmin,Ge.dtick,!0);Qe=[Ge._tmin,.99*wt+.01*Ge._tmin]}else{var kt=_.simpleMap(Ge.range,Ge.r2l);Qe=[kt[0],.8*kt[0]+.2*kt[1]]}if(Ve.range=_.simpleMap(Qe,Ge.l2r),Ve._isMinor=!0,$.prepTicks(Ve,ut),yt){var vt=k(Ge.dtick),Lt=k(Ve.dtick),St=vt?Ge.dtick:+Ge.dtick.substring(1),Ot=Lt?Ve.dtick:+Ve.dtick.substring(1);vt&&Lt?xe(St,Ot)?St===2*b&&Ot===2*h&&(Ve.dtick=b):Ve.dtick=St===2*b&&Ot===3*h?b:St!==b||(Ge._input.minor||{}).nticks?Ce(St/Ot,2.5)?St/2:St:h:"M"===String(Ge.dtick).charAt(0)?Lt?Ve.dtick="M1":xe(St,Ot)?St>=12&&2===Ot&&(Ve.dtick="M3"):Ve.dtick=Ge.dtick:"L"===String(Ve.dtick).charAt(0)?"L"===String(Ge.dtick).charAt(0)?xe(St,Ot)||(Ve.dtick=Ce(St/Ot,2.5)?Ge.dtick/2:Ge.dtick):Ve.dtick="D1":"D2"===Ve.dtick&&+Ge.dtick>1&&(Ve.dtick=1)}Ve.range=Ge.range}void 0===Ge.minor._tick0Init&&(Ve.tick0=Ge.tick0)},$.prepTicks=function(Ve,Ge){var ut=_.simpleMap(Ve.range,Ve.r2l,void 0,void 0,Ge);if("auto"===Ve.tickmode||!Ve.dtick){var Qe,yt=Ve.nticks;yt||("category"===Ve.type||"multicategory"===Ve.type?(Qe=Ve.tickfont?_.bigFont(Ve.tickfont.size||12):15,yt=Ve._length/Qe):(Qe="y"===Ve._id.charAt(0)?40:80,yt=_.constrain(Ve._length/Qe,4,9)+1),"radialaxis"===Ve._name&&(yt*=2)),Ve.minor&&"array"!==Ve.minor.tickmode||"array"===Ve.tickmode&&(yt*=100),Ve._roughDTick=Math.abs(ut[1]-ut[0])/yt,$.autoTicks(Ve,Ve._roughDTick),Ve._minDtick>0&&Ve.dtick<2*Ve._minDtick&&(Ve.dtick=Ve._minDtick,Ve.tick0=Ve.l2r(Ve._forceTick0))}"period"===Ve.ticklabelmode&&function(wt){var kt;function vt(){return!(k(wt.dtick)||"M"!==wt.dtick.charAt(0))}var Lt=vt(),St=$.getTickFormat(wt);if(St){var Ot=wt._dtickInit!==wt.dtick;/%[fLQsSMX]/.test(St)||(/%[HI]/.test(St)?(kt=w,Ot&&!Lt&&wt.dtick<w&&(wt.dtick=w)):/%p/.test(St)?(kt=S,Ot&&!Lt&&wt.dtick<S&&(wt.dtick=S)):/%[Aadejuwx]/.test(St)?(kt=h,Ot&&!Lt&&wt.dtick<h&&(wt.dtick=h)):/%[UVW]/.test(St)?(kt=b,Ot&&!Lt&&wt.dtick<b&&(wt.dtick=b)):/%[Bbm]/.test(St)?(kt=x,Ot&&(Lt?Oe(wt.dtick)<1:wt.dtick<v)&&(wt.dtick="M1")):/%[q]/.test(St)?(kt=d,Ot&&(Lt?Oe(wt.dtick)<3:wt.dtick<m)&&(wt.dtick="M3")):/%[Yy]/.test(St)&&(kt=f,Ot&&(Lt?Oe(wt.dtick)<12:wt.dtick<c)&&(wt.dtick="M12")))}(Lt=vt())&&wt.tick0===wt._dowTick0&&(wt.tick0=wt._rawTick0),wt._definedDelta=kt}(Ve),Ve.tick0||(Ve.tick0="date"===Ve.type?"2000-01-01":0),"date"===Ve.type&&Ve.dtick<.1&&(Ve.dtick=.1),Me(Ve)},$.calcTicks=function(Ve,Ge){for(var ut,Qe,yt=Ve.type,wt=Ve.calendar,kt=Ve.ticklabelstep,vt="period"===Ve.ticklabelmode,Lt=_.simpleMap(Ve.range,Ve.r2l,void 0,void 0,Ge),St=Lt[1]<Lt[0],Ot=Math.min(Lt[0],Lt[1]),Nt=Math.max(Lt[0],Lt[1]),Bt=Math.max(1e3,Ve._length||0),Vt=[],nn=[],gn=[],Jt=[],an=Ve.minor&&(Ve.minor.ticks||Ve.minor.showgrid),Xt=1;Xt>=(an?0:1);Xt--){var Gn=!Xt;Xt?(Ve._dtickInit=Ve.dtick,Ve._tick0Init=Ve.tick0):(Ve.minor._dtickInit=Ve.minor.dtick,Ve.minor._tick0Init=Ve.minor.tick0);var Dn=Xt?Ve:_.extendFlat({},Ve,Ve.minor);if(Gn?$.prepMinorTicks(Dn,Ve,Ge):$.prepTicks(Dn,Ge),"array"!==Dn.tickmode)if("sync"!==Dn.tickmode){var An=we(Lt),cn=An[0],bn=An[1],hn=k(Dn.dtick),wn="log"===yt&&!(hn||"L"===Dn.dtick.charAt(0)),Ln=$.tickFirst(Dn,Ge);if(Xt){if(Ve._tmin=Ln,Ln<cn!==St)break;"category"!==yt&&"multicategory"!==yt||(bn=St?Math.max(-.5,bn):Math.min(Ve._categories.length-.5,bn))}var Pn,Nn,jn=null,Fn=Ln;Xt&&(hn?Nn=Ve.dtick:"date"===yt?"string"==typeof Ve.dtick&&"M"===Ve.dtick.charAt(0)&&(Nn=x*Ve.dtick.substring(1)):Nn=Ve._roughDTick,Pn=Math.round((Ve.r2l(Fn)-Ve.r2l(Ve.tick0))/Nn)-1);var Jn=Dn.dtick;for(Dn.rangebreaks&&Dn._tick0Init!==Dn.tick0&&(Fn=qe(Fn,Ve),St||(Fn=$.tickIncrement(Fn,Jn,!St,wt))),Xt&&vt&&(Fn=$.tickIncrement(Fn,Jn,!St,wt),Pn--);St?Fn>=bn:Fn<=bn;Fn=$.tickIncrement(Fn,Jn,St,wt)){if(Xt&&Pn++,Dn.rangebreaks&&!St){if(Fn<cn)continue;if(Dn.maskBreaks(Fn)===O&&qe(Fn,Dn)>=Nt)break}if(gn.length>Bt||Fn===jn)break;jn=Fn;var Zn={value:Fn};Xt?(wn&&Fn!==(0|Fn)&&(Zn.simpleLabel=!0),kt>1&&Pn%kt&&(Zn.skipLabel=!0),gn.push(Zn)):(Zn.minor=!0,Jt.push(Zn))}}else gn=[],Vt=ue(Ve);else Xt?(gn=[],Vt=se(Ve,!Gn)):(Jt=[],nn=se(Ve,!Gn))}if(an&&!("inside"===Ve.minor.ticks&&"outside"===Ve.ticks||"outside"===Ve.minor.ticks&&"inside"===Ve.ticks)){for(var hr=gn.map(function(zt){return zt.value}),rr=[],dr=0;dr<Jt.length;dr++){var nr=Jt[dr],Sr=nr.value;if(-1===hr.indexOf(Sr)){for(var ln=!1,dn=0;!ln&&dn<gn.length;dn++)1e7+gn[dn].value===1e7+Sr&&(ln=!0);ln||rr.push(nr)}}Jt=rr}if(vt&&function(zt,Yt,un){for(var _n=0;_n<zt.length;_n++){var Tn=zt[_n].value,Cn=_n,vn=_n+1;_n<zt.length-1?(Cn=_n,vn=_n+1):_n>0?(Cn=_n-1,vn=_n):(Cn=_n,vn=_n);var rn,yn=Math.abs(zt[vn].value-zt[Cn].value),zn=un||yn,Vn=0;zn>=c?Vn=yn>=c&&yn<=u?yn:f:un===d&&zn>=m?Vn=yn>=m&&yn<=y?yn:d:zn>=v?Vn=yn>=v&&yn<=g?yn:x:un===b&&zn>=b?Vn=b:zn>=h?Vn=h:un===S&&zn>=S?Vn=S:un===w&&zn>=w&&(Vn=w),Vn>=yn&&(Vn=yn,rn=!0);var Xn=Tn+Vn;if(Yt.rangebreaks&&Vn>0){for(var Qn=0,pr=0;pr<84;pr++){var or=(pr+.5)/84;Yt.maskBreaks(Tn*(1-or)+or*Xn)!==O&&Qn++}(Vn*=Qn/84)||(zt[_n].drop=!0),rn&&yn>b&&(Vn=yn)}(Vn>0||0===_n)&&(zt[_n].periodX=Tn+Vn/2)}}(gn,Ve,Ve._definedDelta),Ve.rangebreaks){var Un="y"===Ve._id.charAt(0),Mn=1;"auto"===Ve.tickmode&&(Mn=Ve.tickfont?Ve.tickfont.size:12);var Hn=NaN;for(ut=gn.length-1;ut>-1;ut--)if(gn[ut].drop)gn.splice(ut,1);else{gn[ut].value=qe(gn[ut].value,Ve);var Wn=Ve.c2p(gn[ut].value);(Un?Hn>Wn-Mn:Hn<Wn+Mn)?gn.splice(St?ut+1:ut,1):Hn=Wn}}et(Ve)&&360===Math.abs(Lt[1]-Lt[0])&&gn.pop(),Ve._tmax=(gn[gn.length-1]||{}).value,Ve._prevDateHead="",Ve._inCalcTicks=!0;var $n,lr,Cr=function(zt){zt.text="",Ve._prevDateHead=Qe};for(gn=gn.concat(Jt),ut=0;ut<gn.length;ut++){var Sn=gn[ut].value;gn[ut].minor?nn.push({x:Sn,minor:!0}):(Qe=Ve._prevDateHead,$n=$.tickText(Ve,Sn,!1,gn[ut].simpleLabel),void 0!==(lr=gn[ut].periodX)&&($n.periodX=lr,(lr>Nt||lr<Ot)&&(lr>Nt&&($n.periodX=Nt),lr<Ot&&($n.periodX=Ot),Cr($n))),gn[ut].skipLabel&&Cr($n),Vt.push($n))}return Vt=Vt.concat(nn),Ve._inCalcTicks=!1,vt&&Vt.length&&(Vt[0].noTick=!0),Vt};var ge=[2,5,10],Ie=[1,2,3,6,12],ke=[1,2,5,10,15,30],Se=[1,2,3,7,14],Pe=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Fe=[-.301,0,.301,.699,1],Be=[15,30,45,90,180];function me(Ve,Ge,ut){return Ge*_.roundUp(Ve/Ge,ut)}function Me(Ve){var Ge=Ve.dtick;if(Ve._tickexponent=0,k(Ge)||"string"==typeof Ge||(Ge=1),"category"!==Ve.type&&"multicategory"!==Ve.type||(Ve._tickround=null),"date"===Ve.type){var ut=Ve.r2l(Ve.tick0),Qe=Ve.l2r(ut).replace(/(^-|i)/g,""),yt=Qe.length;if("M"===String(Ge).charAt(0))Ve._tickround=yt>10||"01-01"!==Qe.substr(5)?"d":+Ge.substr(1)%12==0?"y":"m";else if(Ge>=h&&yt<=10||Ge>=15*h)Ve._tickround="d";else if(Ge>=E&&yt<=16||Ge>=w)Ve._tickround="M";else if(Ge>=P&&yt<=19||Ge>=E)Ve._tickround="S";else{var wt=Ve.l2r(ut+Ge).replace(/^-/,"").length;Ve._tickround=Math.max(yt,wt)-20,Ve._tickround<0&&(Ve._tickround=4)}}else if(k(Ge)||"L"===Ge.charAt(0)){var kt=Ve.range.map(Ve.r2d||Number);k(Ge)||(Ge=Number(Ge.substr(1))),Ve._tickround=2-Math.floor(Math.log(Ge)/Math.LN10+.01);var vt=Math.max(Math.abs(kt[0]),Math.abs(kt[1])),Lt=Math.floor(Math.log(vt)/Math.LN10+.01),St=void 0===Ve.minexponent?3:Ve.minexponent;Math.abs(Lt)>St&&(Ve._tickexponent=Re(Ve.exponentformat)&&!He(Lt)?3*Math.round((Lt-1)/3):Lt)}else Ve._tickround=null}function Le(Ve,Ge,ut){var Qe=Ve.tickfont||{};return{x:Ge,dx:0,dy:0,text:ut||"",fontSize:Qe.size,font:Qe.family,fontWeight:Qe.weight,fontStyle:Qe.style,fontVariant:Qe.variant,fontTextcase:Qe.textcase,fontLineposition:Qe.lineposition,fontShadow:Qe.shadow,fontColor:Qe.color}}$.autoTicks=function(Ve,Ge,ut){var Qe;function yt(Nt){return Math.pow(Nt,Math.floor(Math.log(Ge)/Math.LN10))}if("date"===Ve.type){Ve.tick0=_.dateTick0(Ve.calendar,0);var wt=2*Ge;if(wt>f)Ge/=f,Qe=yt(10),Ve.dtick="M"+12*me(Ge,Qe,ge);else if(wt>x)Ve.dtick="M"+me(Ge/=x,1,Ie);else if(wt>h){if(Ve.dtick=me(Ge,h,Ve._hasDayOfWeekBreaks?[1,2,7,14]:Se),!ut){var kt=$.getTickFormat(Ve),vt="period"===Ve.ticklabelmode;vt&&(Ve._rawTick0=Ve.tick0),Ve.tick0=/%[uVW]/.test(kt)?_.dateTick0(Ve.calendar,2):_.dateTick0(Ve.calendar,1),vt&&(Ve._dowTick0=Ve.tick0)}}else wt>w?Ve.dtick=me(Ge,w,Ie):wt>E?Ve.dtick=me(Ge,E,ke):wt>P?Ve.dtick=me(Ge,P,ke):(Qe=yt(10),Ve.dtick=me(Ge,Qe,ge))}else if("log"===Ve.type){Ve.tick0=0;var Lt=_.simpleMap(Ve.range,Ve.r2l);if(Ve._isMinor&&(Ge*=1.5),Ge>.7)Ve.dtick=Math.ceil(Ge);else if(Math.abs(Lt[1]-Lt[0])<1){var St=1.5*Math.abs((Lt[1]-Lt[0])/Ge);Ge=Math.abs(Math.pow(10,Lt[1])-Math.pow(10,Lt[0]))/St,Qe=yt(10),Ve.dtick="L"+me(Ge,Qe,ge)}else Ve.dtick=Ge>.3?"D2":"D1"}else"category"===Ve.type||"multicategory"===Ve.type?(Ve.tick0=0,Ve.dtick=Math.ceil(Math.max(Ge,1))):et(Ve)?(Ve.tick0=0,Ve.dtick=me(Ge,Qe=1,Be)):(Ve.tick0=0,Qe=yt(10),Ve.dtick=me(Ge,Qe,ge));if(0===Ve.dtick&&(Ve.dtick=1),!k(Ve.dtick)&&"string"!=typeof Ve.dtick){var Ot=Ve.dtick;throw Ve.dtick=1,"ax.dtick error: "+String(Ot)}},$.tickIncrement=function(Ve,Ge,ut,Qe){var yt=ut?-1:1;if(k(Ge))return _.increment(Ve,yt*Ge);var wt=Ge.charAt(0),kt=yt*Number(Ge.substr(1));if("M"===wt)return _.incrementMonth(Ve,kt,Qe);if("L"===wt)return Math.log(Math.pow(10,Ve)+kt)/Math.LN10;if("D"===wt){var vt="D2"===Ge?Fe:Pe,Lt=Ve+.01*yt,St=_.roundUp(_.mod(Lt,1),vt,ut);return Math.floor(Lt)+Math.log(M.round(Math.pow(10,St),1))/Math.LN10}throw"unrecognized dtick "+String(Ge)},$.tickFirst=function(Ve,Ge){var ut=Ve.r2l||Number,Qe=_.simpleMap(Ve.range,ut,void 0,void 0,Ge),yt=Qe[1]<Qe[0],wt=yt?Math.floor:Math.ceil,kt=we(Qe)[0],vt=Ve.dtick,Lt=ut(Ve.tick0);if(k(vt)){var St=wt((kt-Lt)/vt)*vt+Lt;return"category"!==Ve.type&&"multicategory"!==Ve.type||(St=_.constrain(St,0,Ve._categories.length-1)),St}var Ot=vt.charAt(0),Nt=Number(vt.substr(1));if("M"===Ot){for(var Bt,Vt,nn,gn=0,Jt=Lt;gn<10;){if(((Bt=$.tickIncrement(Jt,vt,yt,Ve.calendar))-kt)*(Jt-kt)<=0)return yt?Math.min(Jt,Bt):Math.max(Jt,Bt);Vt=(kt-(Jt+Bt)/2)/(Bt-Jt),nn=Ot+(Math.abs(Math.round(Vt))||1)*Nt,Jt=$.tickIncrement(Jt,nn,Vt<0?!yt:yt,Ve.calendar),gn++}return _.error("tickFirst did not converge",Ve),Jt}if("L"===Ot)return Math.log(wt((Math.pow(10,kt)-Lt)/Nt)*Nt+Lt)/Math.LN10;if("D"===Ot){var an="D2"===vt?Fe:Pe,Xt=_.roundUp(_.mod(kt,1),an,yt);return Math.floor(kt)+Math.log(M.round(Math.pow(10,Xt),1))/Math.LN10}throw"unrecognized dtick "+String(vt)},$.tickText=function(Ve,Ge,ut,Qe){var yt,wt=Le(Ve,Ge),kt="array"===Ve.tickmode,vt=ut||kt,Lt=Ve.type,St="category"===Lt?Ve.d2l_noadd:Ve.d2l,Ot=function(Jt){var an=Ve.l2p(Jt);return an>=0&&an<=Ve._length?Jt:null};if(kt&&_.isArrayOrTypedArray(Ve.ticktext)){var Nt=_.simpleMap(Ve.range,Ve.r2l),Bt=(Math.abs(Nt[1]-Nt[0])-(Ve._lBreaks||0))/1e4;for(yt=0;yt<Ve.ticktext.length&&!(Math.abs(Ge-St(Ve.tickvals[yt]))<Bt);yt++);if(yt<Ve.ticktext.length)return wt.text=String(Ve.ticktext[yt]),wt.xbnd=[Ot(wt.x-.5),Ot(wt.x+Ve.dtick-.5)],wt}function Vt(Jt){return void 0===Jt||(ut?"none"===Jt:"all"!==Jt&&Ge!=={first:Ve._tmin,last:Ve._tmax}[Jt])}var an,Xt,nn=ut?"never":"none"!==Ve.exponentformat&&Vt(Ve.showexponent)?"hide":"";if("date"===Lt?function(Jt,an,Xt,Gn){var Dn=Jt._tickround,An=Xt&&Jt.hoverformat||$.getTickFormat(Jt);(Gn=!An&&Gn)&&(Dn=k(Dn)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[Dn]);var cn,bn=_.formatDate(an.x,An,Dn,Jt._dateFormat,Jt.calendar,Jt._extraFormat),hn=bn.indexOf("\n");if(-1!==hn&&(cn=bn.substr(hn+1),bn=bn.substr(0,hn)),Gn&&(void 0===cn||"00:00:00"!==bn&&"00:00"!==bn?8===bn.length&&(bn=bn.replace(/:00$/,"")):(bn=cn,cn="")),cn)if(Xt)"d"===Dn?bn+=", "+cn:bn=cn+(bn?", "+bn:"");else if(Jt._inCalcTicks&&Jt._prevDateHead===cn){var wn=$e(Jt),Ln=Jt._trueSide||Jt.side;(!wn&&"top"===Ln||wn&&"bottom"===Ln)&&(bn+="<br> ")}else Jt._prevDateHead=cn,bn+="<br>"+cn;an.text=bn}(Ve,wt,ut,vt):"log"===Lt?function(Jt,an,Xt,Gn,Dn){var An=Jt.dtick,cn=an.x,bn=Jt.tickformat,hn="string"==typeof An&&An.charAt(0);if("never"===Dn&&(Dn=""),Gn&&"L"!==hn&&(An="L3",hn="L"),bn||"L"===hn)an.text=Ze(Math.pow(10,cn),Jt,Dn,Gn);else if(k(An)||"D"===hn&&_.mod(cn+.01,1)<.1){var wn=Math.round(cn),Ln=Math.abs(wn),Pn=Jt.exponentformat;"power"===Pn||Re(Pn)&&He(wn)?(an.text=0===wn?1:1===wn?"10":"10<sup>"+(wn>1?"":I)+Ln+"</sup>",an.fontSize*=1.25):("e"===Pn||"E"===Pn)&&Ln>2?an.text="1"+Pn+(wn>0?"+":I)+Ln:(an.text=Ze(Math.pow(10,cn),Jt,"","fakehover"),"D1"===An&&"y"===Jt._id.charAt(0)&&(an.dy-=an.fontSize/6))}else{if("D"!==hn)throw"unrecognized dtick "+String(An);an.text=String(Math.round(Math.pow(10,_.mod(cn,1)))),an.fontSize*=.75}if("D1"===Jt.dtick){var Nn=String(an.text).charAt(0);"0"!==Nn&&"1"!==Nn||("y"===Jt._id.charAt(0)?an.dx-=an.fontSize/4:(an.dy+=an.fontSize/2,an.dx+=(Jt.range[1]>Jt.range[0]?1:-1)*an.fontSize*(cn<0?.5:.25)))}}(Ve,wt,0,vt,nn):"category"===Lt?(an=wt,void 0===(Xt=Ve._categories[Math.round(an.x)])&&(Xt=""),an.text=String(Xt)):"multicategory"===Lt?function(Jt,an,Xt){var Gn=Math.round(an.x),Dn=Jt._categories[Gn]||[],An=void 0===Dn[1]?"":String(Dn[1]),cn=void 0===Dn[0]?"":String(Dn[0]);Xt?an.text=cn+" - "+An:(an.text=An,an.text2=cn)}(Ve,wt,ut):et(Ve)?function(Jt,an,Xt,Gn,Dn){if("radians"!==Jt.thetaunit||Xt)an.text=Ze(an.x,Jt,Dn,Gn);else{var An=an.x/180;if(0===An)an.text="0";else{var cn=function(hn){function wn(jn,Fn){return Math.abs(jn-Fn)<=1e-6}var Ln=function(jn){for(var Fn=1;!wn(Math.round(jn*Fn)/Fn,jn);)Fn*=10;return Fn}(hn),Pn=hn*Ln,Nn=Math.abs(function jn(Fn,Jn){return wn(Jn,0)?Fn:jn(Jn,Fn%Jn)}(Pn,Ln));return[Math.round(Pn/Nn),Math.round(Ln/Nn)]}(An);if(cn[1]>=100)an.text=Ze(_.deg2rad(an.x),Jt,Dn,Gn);else{var bn=an.x<0;an.text=1===cn[1]?1===cn[0]?"\u03c0":cn[0]+"\u03c0":["<sup>",cn[0],"</sup>","\u2044","<sub>",cn[1],"</sub>","\u03c0"].join(""),bn&&(an.text=I+an.text)}}}}(Ve,wt,ut,vt,nn):function(Jt,an,Xt,Gn,Dn){"never"===Dn?Dn="":"all"===Jt.showexponent&&Math.abs(an.x/Jt.dtick)<1e-6&&(Dn="hide"),an.text=Ze(an.x,Jt,Dn,Gn)}(Ve,wt,0,vt,nn),Qe||(Ve.tickprefix&&!Vt(Ve.showtickprefix)&&(wt.text=Ve.tickprefix+wt.text),Ve.ticksuffix&&!Vt(Ve.showticksuffix)&&(wt.text+=Ve.ticksuffix)),Ve.labelalias&&Ve.labelalias.hasOwnProperty(wt.text)){var gn=Ve.labelalias[wt.text];"string"==typeof gn&&(wt.text=gn)}return("boundaries"===Ve.tickson||Ve.showdividers)&&(wt.xbnd=[Ot(wt.x-.5),Ot(wt.x+Ve.dtick-.5)]),wt},$.hoverLabelText=function(Ve,Ge,ut){ut&&(Ve=_.extendFlat({},Ve,{hoverformat:ut}));var Qe=_.isArrayOrTypedArray(Ge)?Ge[0]:Ge,yt=_.isArrayOrTypedArray(Ge)?Ge[1]:void 0;if(void 0!==yt&&yt!==Qe)return $.hoverLabelText(Ve,Qe,ut)+" - "+$.hoverLabelText(Ve,yt,ut);var wt="log"===Ve.type&&Qe<=0,kt=$.tickText(Ve,Ve.c2l(wt?-Qe:Qe),"hover").text;return wt?0===Qe?"0":I+kt:kt};var Ne=["f","p","n","\u03bc","m","","k","M","G","T"];function Re(Ve){return"SI"===Ve||"B"===Ve}function He(Ve){return Ve>14||Ve<-15}function Ze(Ve,Ge,ut,Qe){var yt=Ve<0,wt=Ge._tickround,kt=ut||Ge.exponentformat||"B",vt=Ge._tickexponent,Lt=$.getTickFormat(Ge),St=Ge.separatethousands;if(Qe){var Ot={exponentformat:kt,minexponent:Ge.minexponent,dtick:"none"===Ge.showexponent?Ge.dtick:k(Ve)&&Math.abs(Ve)||1,range:"none"===Ge.showexponent?Ge.range.map(Ge.r2d):[0,Ve||1]};Me(Ot),wt=(Number(Ot._tickround)||0)+4,vt=Ot._tickexponent,Ge.hoverformat&&(Lt=Ge.hoverformat)}if(Lt)return Ge._numFormat(Lt)(Ve).replace(/-/g,I);var Nt,Bt=Math.pow(10,-wt)/2;if("none"===kt&&(vt=0),(Ve=Math.abs(Ve))<Bt)Ve="0",yt=!1;else{if(Ve+=Bt,vt&&(Ve*=Math.pow(10,-vt),wt+=vt),0===wt)Ve=String(Math.floor(Ve));else if(wt<0){Ve=(Ve=String(Math.round(Ve))).substr(0,Ve.length+wt);for(var Vt=wt;Vt<0;Vt++)Ve+="0"}else{var nn=(Ve=String(Ve)).indexOf(".")+1;nn&&(Ve=Ve.substr(0,nn+wt).replace(/\.?0+$/,""))}Ve=_.numSeparate(Ve,Ge._separators,St)}return vt&&"hide"!==kt&&(Re(kt)&&He(vt)&&(kt="power"),Nt=vt<0?I+-vt:"power"!==kt?"+"+vt:String(vt),"e"===kt||"E"===kt?Ve+=kt+Nt:"power"===kt?Ve+="\xd710<sup>"+Nt+"</sup>":"B"===kt&&9===vt?Ve+="B":Re(kt)&&(Ve+=Ne[vt/3+5])),yt?I+Ve:Ve}function nt(Ve,Ge){if(Ve){var ut=Object.keys(B).reduce(function(Qe,yt){return-1!==Ge.indexOf(yt)&&B[yt].forEach(function(wt){Qe[wt]=1}),Qe},{});Object.keys(Ve).forEach(function(Qe){ut[Qe]||(1===Qe.length?Ve[Qe]=0:delete Ve[Qe])})}}function ft(Ve,Ge){for(var ut=[],Qe={},yt=0;yt<Ge.length;yt++){var wt=Ge[yt];Qe[wt.text2]?Qe[wt.text2].push(wt.x):Qe[wt.text2]=[wt.x]}for(var kt in Qe)ut.push(Le(Ve,_.interp(Qe[kt],.5),kt));return ut}function ht(Ve){return void 0!==Ve.periodX?Ve.periodX:Ve.x}function Tt(Ve){return[Ve.text,Ve.x,Ve.axInfo,Ve.font,Ve.fontSize,Ve.fontColor].join("_")}function At(Ve){var Ge=Ve.title.font.size,ut=(Ve.title.text.match(l.BR_TAG_ALL)||[]).length;return Ve.title.hasOwnProperty("standoff")?Ge*(ie+ut*te):ut?Ge*(ut+1)*te:Ge}function _t(Ve,Ge){var ut=Ve.l2p(Ge);return ut>1&&ut<Ve._length-1}function ot(Ve){var Ge=M.select(Ve),ut=Ge.select(".text-math-group");return ut.empty()?Ge.select("text"):ut}function it(Ve){return Ve._id+".automargin"}function Pt(Ve){return it(Ve)+".mirror"}function jt(Ve){return Ve._id+".rangeslider"}function Ut(Ve,Ge){for(var ut=0;ut<Ge.length;ut++)-1===Ve.indexOf(Ge[ut])&&Ve.push(Ge[ut])}function Rt(Ve,Ge,ut){var Qe,yt,wt=[],kt=[],vt=Ve.layout;for(Qe=0;Qe<Ge.length;Qe++)wt.push($.getFromId(Ve,Ge[Qe]));for(Qe=0;Qe<ut.length;Qe++)kt.push($.getFromId(Ve,ut[Qe]));var Lt=Object.keys(n),St=["anchor","domain","overlaying","position","side","tickangle","editType"],Ot=["linear","log"];for(Qe=0;Qe<Lt.length;Qe++){var Nt=Lt[Qe],Bt=wt[0][Nt],Vt=kt[0][Nt],nn=!0,gn=!1,Jt=!1;if("_"!==Nt.charAt(0)&&"function"!=typeof Bt&&-1===St.indexOf(Nt)){for(yt=1;yt<wt.length&&nn;yt++){var an=wt[yt][Nt];"type"===Nt&&-1!==Ot.indexOf(Bt)&&-1!==Ot.indexOf(an)&&Bt!==an?gn=!0:an!==Bt&&(nn=!1)}for(yt=1;yt<kt.length&&nn;yt++){var Xt=kt[yt][Nt];"type"===Nt&&-1!==Ot.indexOf(Vt)&&-1!==Ot.indexOf(Xt)&&Vt!==Xt?Jt=!0:kt[yt][Nt]!==Vt&&(nn=!1)}nn&&(gn&&(vt[wt[0]._name].type="linear"),Jt&&(vt[kt[0]._name].type="linear"),Je(vt,Nt,wt,kt,Ve._fullLayout._dfltTitle))}}for(Qe=0;Qe<Ve._fullLayout.annotations.length;Qe++){var Gn=Ve._fullLayout.annotations[Qe];-1!==Ge.indexOf(Gn.xref)&&-1!==ut.indexOf(Gn.yref)&&_.swapAttrs(vt.annotations[Qe],["?"])}}function Je(Ve,Ge,ut,Qe,yt){var wt,kt=_.nestedProperty,vt=kt(Ve[ut[0]._name],Ge).get(),Lt=kt(Ve[Qe[0]._name],Ge).get();for("title"===Ge&&(vt&&vt.text===yt.x&&(vt.text=yt.y),Lt&&Lt.text===yt.y&&(Lt.text=yt.x)),wt=0;wt<ut.length;wt++)kt(Ve,ut[wt]._name+"."+Ge).set(Lt);for(wt=0;wt<Qe.length;wt++)kt(Ve,Qe[wt]._name+"."+Ge).set(vt)}function et(Ve){return"angularaxis"===Ve._id}function qe(Ve,Ge){for(var ut=Ge._rangebreaks.length,Qe=0;Qe<ut;Qe++){var yt=Ge._rangebreaks[Qe];if(Ve>=yt.min&&Ve<yt.max)return yt.max}return Ve}function $e(Ve){return-1!==(Ve.ticklabelposition||"").indexOf("inside")}function pt(Ve,Ge){$e(Ve._anchorAxis||{})&&Ve._hideCounterAxisInsideTickLabels&&Ve._hideCounterAxisInsideTickLabels(Ge)}function ct(Ve,Ge,ut,Qe){var yt,wt="free"===Ve.anchor||void 0!==Ve.overlaying&&!1!==Ve.overlaying?Ve.overlaying:Ve._id;yt=Qe?"right"===Ve.side?Ge:-Ge:Ge,wt in ut||(ut[wt]={}),Ve.side in ut[wt]||(ut[wt][Ve.side]=0),ut[wt][Ve.side]+=yt}$.getTickFormat=function(Ve){var Ge,ut,Qe,yt,wt,kt,vt,Lt,Bt,Vt,nn,gn,Jt,an;function St(Bt){return"string"!=typeof Bt?Bt:Number(Bt.replace("M",""))*x}function Ot(Bt,Vt){var nn=["L","D"];if(typeof Bt==typeof Vt){if("number"==typeof Bt)return Bt-Vt;var gn=nn.indexOf(Bt.charAt(0)),Jt=nn.indexOf(Vt.charAt(0));return gn===Jt?Number(Bt.replace(/(L|D)/g,""))-Number(Vt.replace(/(L|D)/g,"")):gn-Jt}return"number"==typeof Bt?1:-1}if(Ve.tickformatstops&&Ve.tickformatstops.length>0)switch(Ve.type){case"date":case"linear":for(Ge=0;Ge<Ve.tickformatstops.length;Ge++)if((Qe=Ve.tickformatstops[Ge]).enabled&&(yt=Ve.dtick,kt=void 0,void 0,void 0,kt=St||function(Bt){return Bt},Lt=(wt=Qe.dtickrange)[1],(!(vt=wt[0])&&"number"!=typeof vt||kt(vt)<=kt(yt))&&(!Lt&&"number"!=typeof Lt||kt(Lt)>=kt(yt)))){ut=Qe;break}break;case"log":for(Ge=0;Ge<Ve.tickformatstops.length;Ge++)if((Qe=Ve.tickformatstops[Ge]).enabled&&(nn=void 0,gn=void 0,Jt=void 0,an=void 0,nn=null===(Vt=Qe.dtickrange)[0],gn=null===Vt[1],Jt=Ot(Bt=Ve.dtick,Vt[0])>=0,an=Ot(Bt,Vt[1])<=0,(nn||Jt)&&(gn||an))){ut=Qe;break}}return ut?ut.value:Ve.tickformat},$.getSubplots=function(Ve,Ge){var ut=Ve._fullLayout._subplots,Qe=ut.cartesian.concat(ut.gl2d||[]),yt=Ge?$.findSubplotsWithAxis(Qe,Ge):Qe;return yt.sort(function(wt,kt){var vt=wt.substr(1).split("y"),Lt=kt.substr(1).split("y");return vt[0]===Lt[0]?+vt[1]-+Lt[1]:+vt[0]-+Lt[0]}),yt},$.findSubplotsWithAxis=function(Ve,Ge){for(var ut=new RegExp("x"===Ge._id.charAt(0)?"^"+Ge._id+"y":Ge._id+"$"),Qe=[],yt=0;yt<Ve.length;yt++){var wt=Ve[yt];ut.test(wt)&&Qe.push(wt)}return Qe},$.makeClipPaths=function(Ve){var Ge=Ve._fullLayout;if(!Ge._hasOnlyLargeSploms){var ut,Qe,yt={_offset:0,_length:Ge.width,_id:""},wt={_offset:0,_length:Ge.height,_id:""},kt=$.list(Ve,"x",!0),vt=$.list(Ve,"y",!0),Lt=[];for(ut=0;ut<kt.length;ut++)for(Lt.push({x:kt[ut],y:wt}),Qe=0;Qe<vt.length;Qe++)0===ut&&Lt.push({x:yt,y:vt[Qe]}),Lt.push({x:kt[ut],y:vt[Qe]});var St=Ge._clips.selectAll(".axesclip").data(Lt,function(Ot){return Ot.x._id+Ot.y._id});St.enter().append("clipPath").classed("axesclip",!0).attr("id",function(Ot){return"clip"+Ge._uid+Ot.x._id+Ot.y._id}).append("rect"),St.exit().remove(),St.each(function(Ot){M.select(this).select("rect").attr({x:Ot.x._offset||0,y:Ot.y._offset||0,width:Ot.x._length||1,height:Ot.y._length||1})})}},$.draw=function(Ve,Ge,ut){var Qe=Ve._fullLayout;"redraw"===Ge&&Qe._paper.selectAll("g.subplot").each(function(vt){var St=Qe._plots[vt[0]];if(St){var Ot=St.xaxis,Nt=St.yaxis;St.xaxislayer.selectAll("."+Ot._id+"tick").remove(),St.yaxislayer.selectAll("."+Nt._id+"tick").remove(),St.xaxislayer.selectAll("."+Ot._id+"tick2").remove(),St.yaxislayer.selectAll("."+Nt._id+"tick2").remove(),St.xaxislayer.selectAll("."+Ot._id+"divider").remove(),St.yaxislayer.selectAll("."+Nt._id+"divider").remove(),St.minorGridlayer&&St.minorGridlayer.selectAll("path").remove(),St.gridlayer&&St.gridlayer.selectAll("path").remove(),St.zerolinelayer&&St.zerolinelayer.selectAll("path").remove(),Qe._infolayer.select(".g-"+Ot._id+"title").remove(),Qe._infolayer.select(".g-"+Nt._id+"title").remove()}});var yt=Ge&&"redraw"!==Ge?Ge:$.listIds(Ve),wt=$.list(Ve).filter(function(vt){return vt.autoshift}).map(function(vt){return vt.overlaying});yt.map(function(vt){var Lt=$.getFromId(Ve,vt);if("sync"===Lt.tickmode&&Lt.overlaying){var St=yt.findIndex(function(Ot){return Ot===Lt.overlaying});St>=0&&yt.unshift(yt.splice(St,1).shift())}});var kt={false:{left:0,right:0}};return _.syncOrAsync(yt.map(function(vt){return function(){if(vt){var Lt=$.getFromId(Ve,vt);ut||(ut={}),ut.axShifts=kt,ut.overlayingShiftedAx=wt;var St=$.drawOne(Ve,Lt,ut);return Lt._shiftPusher&&ct(Lt,Lt._fullDepth||0,kt,!0),Lt._r=Lt.range.slice(),Lt._rl=_.simpleMap(Lt._r,Lt.r2l),St}}}))},$.drawOne=function(Ve,Ge,ut){var Qe,yt,wt,kt=(ut=ut||{}).axShifts||{},vt=ut.overlayingShiftedAx||[];Ge.setScale();var vn,Lt=Ve._fullLayout,St=Ge._id,Ot=St.charAt(0),Nt=$.counterLetter(St),Bt=Lt._plots[Ge._mainSubplot];if(Bt){if(Ge._shiftPusher=Ge.autoshift||-1!==vt.indexOf(Ge._id)||-1!==vt.indexOf(Ge.overlaying),Ge._shiftPusher&"free"===Ge.anchor){var Vt=Ge.linewidth/2||0;"inside"===Ge.ticks&&(Vt+=Ge.ticklen),ct(Ge,Vt,kt,!0),ct(Ge,Ge.shift||0,kt,!1)}!0===ut.skipTitle&&void 0!==Ge._shift||(Ge._shift=(vn=Ge).autoshift?kt[vn.overlaying][vn.side]:vn.shift||0);var nn=Bt[Ot+"axislayer"],gn=Ge._mainLinePosition,Jt=gn+=Ge._shift,an=Ge._mainMirrorPosition,Xt=Ge._vals=$.calcTicks(Ge),Gn=[Ge.mirror,Jt,an].join("_");for(Qe=0;Qe<Xt.length;Qe++)Xt[Qe].axInfo=Gn;Ge._selections={},Ge._tickAngles&&(Ge._prevTickAngles=Ge._tickAngles),Ge._tickAngles={},Ge._depth=null;var Dn={};if(Ge.visible){var An,cn,bn=$.makeTransTickFn(Ge),hn=$.makeTransTickLabelFn(Ge),wn="inside"===Ge.ticks,Ln="outside"===Ge.ticks;if("boundaries"===Ge.tickson){var Pn=function(vn,rn){var tn,fn=[],yn=function(zn,Vn){var Xn=zn.xbnd[Vn];null!==Xn&&fn.push(_.extendFlat({},zn,{x:Xn}))};if(rn.length){for(tn=0;tn<rn.length;tn++)yn(rn[tn],0);yn(rn[tn-1],1)}return fn}(0,Xt);cn=$.clipEnds(Ge,Pn),An=wn?cn:Pn}else cn=$.clipEnds(Ge,Xt),An=wn&&"period"!==Ge.ticklabelmode?cn:Xt;var Nn,jn=Ge._gridVals=cn,Fn=function(vn,rn){var tn,fn,yn=[],zn=rn.length&&rn[rn.length-1].x<rn[0].x,Vn=function(Qn,pr){var or=Qn.xbnd[pr];null!==or&&yn.push(_.extendFlat({},Qn,{x:or}))};if(vn.showdividers&&rn.length){for(tn=0;tn<rn.length;tn++){var Xn=rn[tn];Xn.text2!==fn&&Vn(Xn,zn?1:0),fn=Xn.text2}Vn(rn[tn-1],zn?0:1)}return yn}(Ge,Xt);if(!Lt._hasOnlyLargeSploms){var Jn=Ge._subplotsWith,Zn={};for(Qe=0;Qe<Jn.length;Qe++){var hr=(wt=Lt._plots[yt=Jn[Qe]])[Nt+"axis"],rr=hr._mainAxis._id;if(!Zn[rr]){Zn[rr]=1;var dr="x"===Ot?"M0,"+hr._offset+"v"+hr._length:"M"+hr._offset+",0h"+hr._length;$.drawGrid(Ve,Ge,{vals:jn,counterAxis:hr,layer:wt.gridlayer.select("."+St),minorLayer:wt.minorGridlayer.select("."+St),path:dr,transFn:bn}),$.drawZeroLine(Ve,Ge,{counterAxis:hr,layer:wt.zerolinelayer,path:dr,transFn:bn})}}}var nr=$.getTickSigns(Ge),Sr=$.getTickSigns(Ge,"minor");if(Ge.ticks||Ge.minor&&Ge.minor.ticks){var ln,dn,Un,Mn,Hn=$.makeTickPath(Ge,Jt,nr[2]),Wn=$.makeTickPath(Ge,Jt,Sr[2],{minor:!0});if(Ge._anchorAxis&&Ge.mirror&&!0!==Ge.mirror?(ln=$.makeTickPath(Ge,an,nr[3]),dn=$.makeTickPath(Ge,an,Sr[3],{minor:!0}),Un=Hn+ln,Mn=Wn+dn):(ln="",dn="",Un=Hn,Mn=Wn),Ge.showdividers&&Ln&&"boundaries"===Ge.tickson){var $n={};for(Qe=0;Qe<Fn.length;Qe++)$n[Fn[Qe].x]=1;Nn=function(vn){return $n[vn.x]?ln:Un}}else Nn=function(vn){return vn.minor?Mn:Un}}if($.drawTicks(Ve,Ge,{vals:An,layer:nn,path:Nn,transFn:bn}),"allticks"===Ge.mirror){var lr=Object.keys(Ge._linepositions||{});for(Qe=0;Qe<lr.length;Qe++){wt=Lt._plots[yt=lr[Qe]];var Cr=Ge._linepositions[yt]||[],Sn=Cr[1],zt=Cr[2],Yt=$.makeTickPath(Ge,Cr[0],zt?nr[0]:Sr[0],{minor:zt})+$.makeTickPath(Ge,Sn,zt?nr[1]:Sr[1],{minor:zt});$.drawTicks(Ve,Ge,{vals:An,layer:wt[Ot+"axislayer"],path:Yt,transFn:bn})}}var un=[];if(un.push(function(){return $.drawLabels(Ve,Ge,{vals:Xt,layer:nn,plotinfo:wt,transFn:hn,labelFns:$.makeLabelFns(Ge,Jt)})}),"multicategory"===Ge.type){var _n={x:2,y:10}[Ot];un.push(function(){var vn={x:"height",y:"width"}[Ot],rn=Cn()[vn]+_n+(Ge._tickAngles[St+"tick"]?Ge.tickfont.size*te:0);return $.drawLabels(Ve,Ge,{vals:ft(Ge,Xt),layer:nn,cls:St+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:bn,labelFns:$.makeLabelFns(Ge,Jt+rn*nr[4])})}),un.push(function(){return Ge._depth=nr[4]*(Cn("tick2")[Ge.side]-Jt),function(vn,rn,tn){var fn=rn._id+"divider",yn=tn.vals,zn=tn.layer.selectAll("path."+fn).data(yn,Tt);zn.exit().remove(),zn.enter().insert("path",":first-child").classed(fn,1).classed("crisp",1).call(i.stroke,rn.dividercolor).style("stroke-width",r.crispRound(vn,rn.dividerwidth,1)+"px"),zn.attr("transform",tn.transFn).attr("d",tn.path)}(Ve,Ge,{vals:Fn,layer:nn,path:$.makeTickPath(Ge,Jt,nr[4],{len:Ge._depth}),transFn:bn})})}else Ge.title.hasOwnProperty("standoff")&&un.push(function(){Ge._depth=nr[4]*(Cn()[Ge.side]-Jt)});var Tn=T.getComponentMethod("rangeslider","isVisible")(Ge);return ut.skipTitle||Tn&&"bottom"===Ge.side||un.push(function(){return function(vn,rn){var tn,fn=vn._fullLayout,yn=rn._id,zn=yn.charAt(0),Vn=rn.title.font.size,Xn=(rn.title.text.match(l.BR_TAG_ALL)||[]).length;if(rn.title.hasOwnProperty("standoff"))"bottom"===rn.side||"right"===rn.side?tn=rn._depth+rn.title.standoff+Vn*ie:"top"!==rn.side&&"left"!==rn.side||(tn=rn._depth+rn.title.standoff+Vn*(q+Xn*te));else{var Qn=$e(rn);if("multicategory"===rn.type)tn=rn._depth;else{var pr=1.5*Vn;Qn&&(pr=.5*Vn,"outside"===rn.ticks&&(pr+=rn.ticklen)),tn=10+pr+(rn.linewidth?rn.linewidth-1:0)}Qn||(tn+="x"===zn?"top"===rn.side?Vn*(rn.showticklabels?1:0):Vn*(rn.showticklabels?1.5:.5):"right"===rn.side?Vn*(rn.showticklabels?1:.5):Vn*(rn.showticklabels?.5:0))}var or,fr,vr,cr,Ar=$.getPxPosition(vn,rn);if("x"===zn?(fr=rn._offset+rn._length/2,vr="top"===rn.side?Ar-tn:Ar+tn):(vr=rn._offset+rn._length/2,fr="right"===rn.side?Ar+tn:Ar-tn,or={rotate:"-90",offset:0}),"multicategory"!==rn.type){var Fr=rn._selections[rn._id+"tick"];if(cr={selection:Fr,side:rn.side},Fr&&Fr.node()&&Fr.node().parentNode){var Lr=r.getTranslate(Fr.node().parentNode);cr.offsetLeft=Lr.x,cr.offsetTop=Lr.y}rn.title.hasOwnProperty("standoff")&&(cr.pad=0)}return rn._titleStandoff=tn,t.draw(vn,yn+"title",{propContainer:rn,propName:rn._name+".title.text",placeholder:fn._dfltTitle[zn],avoid:cr,transform:or,attributes:{x:fr,y:vr,"text-anchor":"middle"}})}(Ve,Ge)}),un.push(function(){var vn,rn,tn,fn,yn=Ge.side.charAt(0),zn=ee[Ge.side].charAt(0),Vn=$.getPxPosition(Ve,Ge),Xn=Ln?Ge.ticklen:0;(Ge.automargin||Tn||Ge._shiftPusher)&&("multicategory"===Ge.type?vn=Cn("tick2"):(vn=Cn(),"x"===Ot&&"b"===yn&&(Ge._depth=Math.max(vn.width>0?vn.bottom-Vn:0,Xn))));var Qn=0,pr=0;if(Ge._shiftPusher&&(Qn=Math.max(Xn,vn.height>0?"l"===yn?Vn-vn.left:vn.right-Vn:0),Ge.title.text!==Lt._dfltTitle[Ot]&&(pr=(Ge._titleStandoff||0)+(Ge._titleScoot||0),"l"===yn&&(pr+=At(Ge))),Ge._fullDepth=Math.max(Qn,pr)),Ge.automargin){rn={x:0,y:0,r:0,l:0,t:0,b:0};var or=[0,1],fr="number"==typeof Ge._shift?Ge._shift:0;if("x"===Ot){if("b"===yn?rn[yn]=Ge._depth:(rn[yn]=Ge._depth=Math.max(vn.width>0?Vn-vn.top:0,Xn),or.reverse()),vn.width>0){var vr=vn.right-(Ge._offset+Ge._length);vr>0&&(rn.xr=1,rn.r=vr);var cr=Ge._offset-vn.left;cr>0&&(rn.xl=0,rn.l=cr)}}else if("l"===yn?(Ge._depth=Math.max(vn.height>0?Vn-vn.left:0,Xn),rn[yn]=Ge._depth-fr):(Ge._depth=Math.max(vn.height>0?vn.right-Vn:0,Xn),rn[yn]=Ge._depth+fr,or.reverse()),vn.height>0){var Ar=vn.bottom-(Ge._offset+Ge._length);Ar>0&&(rn.yb=0,rn.b=Ar);var Fr=Ge._offset-vn.top;Fr>0&&(rn.yt=1,rn.t=Fr)}rn[Nt]="free"===Ge.anchor?Ge.position:Ge._anchorAxis.domain[or[0]],Ge.title.text!==Lt._dfltTitle[Ot]&&(rn[yn]+=At(Ge)+(Ge.title.standoff||0)),Ge.mirror&&"free"!==Ge.anchor&&((tn={x:0,y:0,r:0,l:0,t:0,b:0})[zn]=Ge.linewidth,Ge.mirror&&!0!==Ge.mirror&&(tn[zn]+=Xn),!0===Ge.mirror||"ticks"===Ge.mirror?tn[Nt]=Ge._anchorAxis.domain[or[1]]:"all"!==Ge.mirror&&"allticks"!==Ge.mirror||(tn[Nt]=[Ge._counterDomainMin,Ge._counterDomainMax][or[1]]))}Tn&&(fn=T.getComponentMethod("rangeslider","autoMarginOpts")(Ve,Ge)),"string"==typeof Ge.automargin&&(nt(rn,Ge.automargin),nt(tn,Ge.automargin)),o.autoMargin(Ve,it(Ge),rn),o.autoMargin(Ve,Pt(Ge),tn),o.autoMargin(Ve,jt(Ge),fn)}),_.syncOrAsync(un)}}function Cn(vn){var rn=St+(vn||"tick");return Dn[rn]||(Dn[rn]=function(tn,fn,yn){var zn,Vn,Xn,Qn;if(tn._selections[fn].size())zn=1/0,Vn=-1/0,Xn=1/0,Qn=-1/0,tn._selections[fn].each(function(){var or=ot(this),fr=r.bBox(or.node().parentNode);zn=Math.min(zn,fr.top),Vn=Math.max(Vn,fr.bottom),Xn=Math.min(Xn,fr.left),Qn=Math.max(Qn,fr.right)});else{var pr=$.makeLabelFns(tn,yn);zn=Vn=pr.yFn({dx:0,dy:0,fontSize:0}),Xn=Qn=pr.xFn({dx:0,dy:0,fontSize:0})}return{top:zn,bottom:Vn,left:Xn,right:Qn,height:Vn-zn,width:Qn-Xn}}(Ge,rn,Jt)),Dn[rn]}},$.getTickSigns=function(Ve,Ge){var ut=Ve._id.charAt(0),yt=Ve.side==={x:"top",y:"right"}[ut]?1:-1,wt=[-1,1,yt,-yt];return"inside"!==(Ge?(Ve.minor||{}).ticks:Ve.ticks)==("x"===ut)&&(wt=wt.map(function(kt){return-kt})),Ve.side&&wt.push({l:-1,t:-1,r:1,b:1}[Ve.side.charAt(0)]),wt},$.makeTransTickFn=function(Ve){return"x"===Ve._id.charAt(0)?function(Ge){return p(Ve._offset+Ve.l2p(Ge.x),0)}:function(Ge){return p(0,Ve._offset+Ve.l2p(Ge.x))}},$.makeTransTickLabelFn=function(Ve){var Ge=function(yt){var wt=yt.ticklabelposition||"",kt=function(an){return-1!==wt.indexOf(an)},vt=kt("top"),Lt=kt("left"),St=kt("right"),Ot=kt("bottom"),Nt=kt("inside"),Bt=Ot||Lt||vt||St;if(!Bt&&!Nt)return[0,0];var Vt=yt.side,nn=Bt?(yt.tickwidth||0)/2:0,gn=3,Jt=yt.tickfont?yt.tickfont.size:12;return(Ot||vt)&&(nn+=Jt*ie,gn+=(yt.linewidth||0)/2),(Lt||St)&&(nn+=(yt.linewidth||0)/2,gn+=3),Nt&&"top"===Vt&&(gn-=Jt*(1-ie)),(Lt||vt)&&(nn=-nn),"bottom"!==Vt&&"right"!==Vt||(gn=-gn),[Bt?nn:0,Nt?gn:0]}(Ve),ut=Ge[0],Qe=Ge[1];return"x"===Ve._id.charAt(0)?function(yt){return p(ut+Ve._offset+Ve.l2p(ht(yt)),Qe)}:function(yt){return p(Qe,ut+Ve._offset+Ve.l2p(ht(yt)))}},$.makeTickPath=function(Ve,Ge,ut,Qe){Qe||(Qe={});var yt=Qe.minor;if(yt&&!Ve.minor)return"";var wt=void 0!==Qe.len?Qe.len:yt?Ve.minor.ticklen:Ve.ticklen,kt=Ve._id.charAt(0),vt=(Ve.linewidth||1)/2;return"x"===kt?"M0,"+(Ge+vt*ut)+"v"+wt*ut:"M"+(Ge+vt*ut)+",0h"+wt*ut},$.makeLabelFns=function(Ve,Ge,ut){var Qe=Ve.ticklabelposition||"",yt=function(Pn){return-1!==Qe.indexOf(Pn)},wt=yt("top"),kt=yt("left"),vt=yt("right"),Lt=yt("bottom")||kt||wt||vt,St=yt("inside"),Ot="inside"===Qe&&"inside"===Ve.ticks||!St&&"outside"===Ve.ticks&&"boundaries"!==Ve.tickson,Nt=0,Bt=0,Vt=Ot?Ve.ticklen:0;if(St?Vt*=-1:Lt&&(Vt=0),Ot&&(Nt+=Vt,ut)){var nn=_.deg2rad(ut);Nt=Vt*Math.cos(nn)+1,Bt=Vt*Math.sin(nn)}Ve.showticklabels&&(Ot||Ve.showline)&&(Nt+=.2*Ve.tickfont.size);var gn,Jt,an,Xt,Gn,Dn={labelStandoff:Nt+=(Ve.linewidth||1)/2*(St?-1:1),labelShift:Bt},An=0,cn=Ve.side,bn=Ve._id.charAt(0),hn=Ve.tickangle;if("x"===bn)Xt=(Gn=!St&&"bottom"===cn||St&&"top"===cn)?1:-1,St&&(Xt*=-1),gn=Bt*Xt,Jt=Ge+Nt*Xt,an=Gn?1:-.2,90===Math.abs(hn)&&(St?an+=q:an=-90===hn&&"bottom"===cn?ie:90===hn&&"top"===cn?q:.5,An=q/2*(hn/90)),Dn.xFn=function(Pn){return Pn.dx+gn+An*Pn.fontSize},Dn.yFn=function(Pn){return Pn.dy+Jt+Pn.fontSize*an},Dn.anchorFn=function(Pn,Nn){if(Lt){if(kt)return"end";if(vt)return"start"}return k(Nn)&&0!==Nn&&180!==Nn?Nn*Xt<0!==St?"end":"start":"middle"},Dn.heightFn=function(Pn,Nn,jn){return Nn<-60||Nn>60?-.5*jn:"top"===Ve.side!==St?-jn:0};else if("y"===bn){if(Xt=(Gn=!St&&"left"===cn||St&&"right"===cn)?1:-1,St&&(Xt*=-1),gn=Nt,Jt=Bt*Xt,an=0,St||90!==Math.abs(hn)||(an=-90===hn&&"left"===cn||90===hn&&"right"===cn?ie:.5),St){var wn=k(hn)?+hn:0;if(0!==wn){var Ln=_.deg2rad(wn);An=Math.abs(Math.sin(Ln))*ie*Xt,an=0}}Dn.xFn=function(Pn){return Pn.dx+Ge-(gn+Pn.fontSize*an)*Xt+An*Pn.fontSize},Dn.yFn=function(Pn){return Pn.dy+Jt+Pn.fontSize*q},Dn.anchorFn=function(Pn,Nn){return k(Nn)&&90===Math.abs(Nn)?"middle":Gn?"end":"start"},Dn.heightFn=function(Pn,Nn,jn){return"right"===Ve.side&&(Nn*=-1),Nn<-30?-jn:Nn<30?-.5*jn:0}}return Dn},$.drawTicks=function(Ve,Ge,ut){ut=ut||{};var Qe=Ge._id+"tick",yt=[].concat(Ge.minor&&Ge.minor.ticks?ut.vals.filter(function(kt){return kt.minor&&!kt.noTick}):[]).concat(Ge.ticks?ut.vals.filter(function(kt){return!kt.minor&&!kt.noTick}):[]),wt=ut.layer.selectAll("path."+Qe).data(yt,Tt);wt.exit().remove(),wt.enter().append("path").classed(Qe,1).classed("ticks",1).classed("crisp",!1!==ut.crisp).each(function(kt){return i.stroke(M.select(this),kt.minor?Ge.minor.tickcolor:Ge.tickcolor)}).style("stroke-width",function(kt){return r.crispRound(Ve,kt.minor?Ge.minor.tickwidth:Ge.tickwidth,1)+"px"}).attr("d",ut.path).style("display",null),pt(Ge,[j]),wt.attr("transform",ut.transFn)},$.drawGrid=function(Ve,Ge,ut){if(ut=ut||{},"sync"!==Ge.tickmode){var Qe=Ge._id+"grid",yt=Ge.minor&&Ge.minor.showgrid,wt=yt?ut.vals.filter(function(an){return an.minor}):[],kt=Ge.showgrid?ut.vals.filter(function(an){return!an.minor}):[],vt=ut.counterAxis;if(vt&&$.shouldShowZeroLine(Ve,Ge,vt))for(var Lt="array"===Ge.tickmode,St=0;St<kt.length;St++){var Ot=kt[St].x;if(Lt?!Ot:Math.abs(Ot)<Ge.dtick/100){if(kt=kt.slice(0,St).concat(kt.slice(St+1)),!Lt)break;St--}}Ge._gw=r.crispRound(Ve,Ge.gridwidth,1);for(var Nt=yt?r.crispRound(Ve,Ge.minor.gridwidth,1):0,Bt=ut.layer,Vt=ut.minorLayer,nn=1;nn>=0;nn--){var gn=nn?Bt:Vt;if(gn){var Jt=gn.selectAll("path."+Qe).data(nn?kt:wt,Tt);Jt.exit().remove(),Jt.enter().append("path").classed(Qe,1).classed("crisp",!1!==ut.crisp),Jt.attr("transform",ut.transFn).attr("d",ut.path).each(function(an){return i.stroke(M.select(this),an.minor?Ge.minor.gridcolor:Ge.gridcolor||"#ddd")}).style("stroke-dasharray",function(an){return r.dashStyle(an.minor?Ge.minor.griddash:Ge.griddash,an.minor?Ge.minor.gridwidth:Ge.gridwidth)}).style("stroke-width",function(an){return(an.minor?Nt:Ge._gw)+"px"}).style("display",null),"function"==typeof ut.path&&Jt.attr("d",ut.path)}}pt(Ge,[U,R])}},$.drawZeroLine=function(Ve,Ge,ut){var Qe=Ge._id+"zl",yt=$.shouldShowZeroLine(Ve,Ge,(ut=ut||ut).counterAxis),wt=ut.layer.selectAll("path."+Qe).data(yt?[{x:0,id:Ge._id}]:[]);wt.exit().remove(),wt.enter().append("path").classed(Qe,1).classed("zl",1).classed("crisp",!1!==ut.crisp).each(function(){ut.layer.selectAll("path").sort(function(kt,vt){return ae(kt.id,vt.id)})}),wt.attr("transform",ut.transFn).attr("d",ut.path).call(i.stroke,Ge.zerolinecolor||i.defaultLine).style("stroke-width",r.crispRound(Ve,Ge.zerolinewidth,Ge._gw||1)+"px").style("display",null),pt(Ge,[z])},$.drawLabels=function(Ve,Ge,ut){var Qe=Ve._fullLayout,wt=(ut=ut||{}).cls||Ge._id+"tick",kt=ut.vals.filter(function(Zn){return Zn.text}),vt=ut.labelFns,Lt=ut.secondary?0:Ge.tickangle,St=(Ge._prevTickAngles||{})[wt],Ot=ut.layer.selectAll("g."+wt).data(Ge.showticklabels?kt:[],Tt),Nt=[];function Bt(Zn,hr){Zn.each(function(rr){var dr=M.select(this),nr=dr.select(".text-math-group"),Sr=vt.anchorFn(rr,hr),ln=ut.transFn.call(dr.node(),rr)+(k(hr)&&0!=+hr?" rotate("+hr+","+vt.xFn(rr)+","+(vt.yFn(rr)-rr.fontSize/2)+")":""),dn=l.lineCount(dr),Un=te*rr.fontSize,Mn=vt.heightFn(rr,k(hr)?+hr:0,(dn-1)*Un);if(Mn&&(ln+=p(0,Mn)),nr.empty()){var Hn=dr.select("text");Hn.attr({transform:ln,"text-anchor":Sr}),Hn.style("opacity",1),Ge._adjustTickLabelsOverflow&&Ge._adjustTickLabelsOverflow()}else{var Wn=r.bBox(nr.node()).width*{end:-.5,start:.5}[Sr];nr.attr("transform",ln+p(Wn,0))}})}Ot.enter().append("g").classed(wt,1).append("text").attr("text-anchor","middle").each(function(Zn){var hr=M.select(this),rr=Ve._promises.length;hr.call(l.positionText,vt.xFn(Zn),vt.yFn(Zn)).call(r.font,{family:Zn.font,size:Zn.fontSize,color:Zn.fontColor,weight:Zn.fontWeight,style:Zn.fontStyle,variant:Zn.fontVariant,textcase:Zn.fontTextcase,lineposition:Zn.fontLineposition,shadow:Zn.fontShadow}).text(Zn.text).call(l.convertToTspans,Ve),Ve._promises[rr]?Nt.push(Ve._promises.pop().then(function(){Bt(hr,Lt)})):Bt(hr,Lt)}),pt(Ge,[Y]),Ot.exit().remove(),ut.repositionOnUpdate&&Ot.each(function(Zn){M.select(this).select("text").call(l.positionText,vt.xFn(Zn),vt.yFn(Zn))}),Ge._adjustTickLabelsOverflow=function(){var Zn=Ge.ticklabeloverflow;if(Zn&&"allow"!==Zn){var hr=-1!==Zn.indexOf("hide"),rr="x"===Ge._id.charAt(0),dr=0,nr=rr?Ve._fullLayout.width:Ve._fullLayout.height;if(-1!==Zn.indexOf("domain")){var Sr=_.simpleMap(Ge.range,Ge.r2l);dr=Ge.l2p(Sr[0])+Ge._offset,nr=Ge.l2p(Sr[1])+Ge._offset}var ln=Math.min(dr,nr),dn=Math.max(dr,nr),Un=Ge.side,Mn=1/0,Hn=-1/0;for(var Wn in Ot.each(function(Cr){var sn=M.select(this);if(sn.select(".text-math-group").empty()){var Sn=r.bBox(sn.node()),zt=0;rr?(Sn.right>dn||Sn.left<ln)&&(zt=1):(Sn.bottom>dn||Sn.top+(Ge.tickangle?0:Cr.fontSize/4)<ln)&&(zt=1);var Yt=sn.select("text");zt?hr&&Yt.style("opacity",0):(Yt.style("opacity",1),Mn="bottom"===Un||"right"===Un?Math.min(Mn,rr?Sn.top:Sn.left):-1/0,Hn="top"===Un||"left"===Un?Math.max(Hn,rr?Sn.bottom:Sn.right):1/0)}}),Qe._plots){var $n=Qe._plots[Wn];if(Ge._id===$n.xaxis._id||Ge._id===$n.yaxis._id){var lr=rr?$n.yaxis:$n.xaxis;lr&&(lr["_visibleLabelMin_"+Ge._id]=Mn,lr["_visibleLabelMax_"+Ge._id]=Hn)}}}},Ge._hideCounterAxisInsideTickLabels=function(Zn){var hr="x"===Ge._id.charAt(0),rr=[];for(var dr in Qe._plots){var nr=Qe._plots[dr];Ge._id!==nr.xaxis._id&&Ge._id!==nr.yaxis._id||rr.push(hr?nr.yaxis:nr.xaxis)}rr.forEach(function(Sr,ln){Sr&&$e(Sr)&&(Zn||[z,R,U,j,Y]).forEach(function(dn){var Un="tick"===dn.K&&"text"===dn.L&&"period"===Ge.ticklabelmode,Mn=Qe._plots[Ge._mainSubplot];(dn.K===z.K?Mn.zerolinelayer.selectAll("."+Ge._id+"zl"):dn.K===R.K?Mn.minorGridlayer.selectAll("."+Ge._id):dn.K===U.K?Mn.gridlayer.selectAll("."+Ge._id):Mn[Ge._id.charAt(0)+"axislayer"]).each(function(){var Hn=M.select(this);dn.L&&(Hn=Hn.selectAll(dn.L)),Hn.each(function(Wn){var $n=Ge.l2p(Un?ht(Wn):Wn.x)+Ge._offset,lr=M.select(this);$n<Ge["_visibleLabelMax_"+Sr._id]&&$n>Ge["_visibleLabelMin_"+Sr._id]?lr.style("display","none"):"tick"!==dn.K||ln||lr.style("display",null)})})})})},Bt(Ot,St+1?St:Lt);var Vt=null;Ge._selections&&(Ge._selections[wt]=Ot);var nn=[function(){return Nt.length&&Promise.all(Nt)}];Ge.automargin&&Qe._redrawFromAutoMarginCount&&90===St?(Vt=St,nn.push(function(){Bt(Ot,St)})):nn.push(function(){if(Bt(Ot,Lt),kt.length&&Ge.autotickangles&&("log"!==Ge.type||"D"!==String(Ge.dtick).charAt(0))){Vt=Ge.autotickangles[0];var Zn,hr=0,rr=[],dr=1;Ot.each(function(Cn){hr=Math.max(hr,Cn.fontSize);var vn=Ge.l2p(Cn.x),rn=ot(this),tn=r.bBox(rn.node());dr=Math.max(dr,l.lineCount(rn)),rr.push({top:0,bottom:10,height:10,left:vn-tn.width/2,right:vn+tn.width/2+2,width:tn.width+2})});var nr=("boundaries"===Ge.tickson||Ge.showdividers)&&!ut.secondary,Sr=kt.length,ln=Math.abs((kt[Sr-1].x-kt[0].x)*Ge._m)/(Sr-1),dn=nr?ln/2:ln,Un=nr?Ge.ticklen:1.25*hr*dr,Mn=dn/Math.sqrt(Math.pow(dn,2)+Math.pow(Un,2)),Hn=Ge.autotickangles.map(function(Cn){return Cn*Math.PI/180}),Wn=Hn.find(function(Cn){return Math.abs(Math.cos(Cn))<=Mn});void 0===Wn&&(Wn=Hn.reduce(function(Cn,vn){return Math.abs(Math.cos(Cn))<Math.abs(Math.cos(vn))?Cn:vn},Hn[0]));var $n=Wn*(180/Math.PI);if(nr){var lr=2;for(Ge.ticks&&(lr+=Ge.tickwidth/2),Zn=0;Zn<rr.length;Zn++){var Cr=kt[Zn].xbnd,sn=rr[Zn];if(null!==Cr[0]&&sn.left-Ge.l2p(Cr[0])<lr||null!==Cr[1]&&Ge.l2p(Cr[1])-sn.right<lr){Vt=$n;break}}}else{var Sn=Ge.ticklabelposition||"",zt=function(Cn){return-1!==Sn.indexOf(Cn)},Yt=zt("top"),un=zt("left"),_n=zt("right"),Tn=zt("bottom")||un||Yt||_n?(Ge.tickwidth||0)+6:0;for(Zn=0;Zn<rr.length-1;Zn++)if(_.bBoxIntersect(rr[Zn],rr[Zn+1],Tn)){Vt=$n;break}}Vt&&Bt(Ot,Vt)}}),Ge._tickAngles&&nn.push(function(){Ge._tickAngles[wt]=null===Vt?k(Lt)?Lt:0:Vt});var gn=function(){var Zn=0,hr=0;return Ot.each(function(rr,dr){var nr,Sr=ot(this);Sr.select(".text-math-group").empty()&&(Ge._vals[dr]&&(nr=Ge._vals[dr].bb||r.bBox(Sr.node()),Ge._vals[dr].bb=nr),Zn=Math.max(Zn,nr.width),hr=Math.max(hr,nr.height))}),{labelsMaxW:Zn,labelsMaxH:hr}},Jt=Ge._anchorAxis;if(Jt&&(Jt.autorange||Jt.insiderange)&&$e(Ge)&&!ce(Qe,Ge._id)&&(Qe._insideTickLabelsUpdaterange||(Qe._insideTickLabelsUpdaterange={}),Jt.autorange&&(Qe._insideTickLabelsUpdaterange[Jt._name+".autorange"]=Jt.autorange,nn.push(gn)),Jt.insiderange)){var an=gn(),Xt="y"===Ge._id.charAt(0)?an.labelsMaxW:an.labelsMaxH;Xt+=6,"inside"===Ge.ticklabelposition&&(Xt+=Ge.ticklen||0);var Gn="right"===Ge.side||"top"===Ge.side?1:-1,Dn=1===Gn?1:0,An=1===Gn?0:1,cn=[];cn[An]=Jt.range[An];var bn=Jt.range,hn=Jt.r2p(bn[Dn]),wn=Jt.r2p(bn[An]),Ln=Qe._insideTickLabelsUpdaterange[Jt._name+".range"];if(Ln){var Pn=Jt.r2p(Ln[Dn]),Nn=Jt.r2p(Ln[An]),jn=Gn*("y"===Ge._id.charAt(0)?1:-1);jn*hn<jn*Pn&&(hn=Pn,cn[Dn]=bn[Dn]=Ln[Dn]),jn*wn>jn*Nn&&(wn=Nn,cn[An]=bn[An]=Ln[An])}var Fn=Math.abs(wn-hn);Fn-Xt>0?Xt*=1+Xt/(Fn-=Xt):Xt=0,"y"!==Ge._id.charAt(0)&&(Xt=-Xt),cn[Dn]=Jt.p2r(Jt.r2p(bn[Dn])+Gn*Xt),"min"===Jt.autorange||"max reversed"===Jt.autorange?(cn[0]=null,Jt._rangeInitial0=void 0,Jt._rangeInitial1=void 0):"max"!==Jt.autorange&&"min reversed"!==Jt.autorange||(cn[1]=null,Jt._rangeInitial0=void 0,Jt._rangeInitial1=void 0),Qe._insideTickLabelsUpdaterange[Jt._name+".range"]=cn}var Jn=_.syncOrAsync(nn);return Jn&&Jn.then&&Ve._promises.push(Jn),Jn},$.getPxPosition=function(Ve,Ge){var ut,Qe=Ve._fullLayout._size,yt=Ge._id.charAt(0),wt=Ge.side;return"free"!==Ge.anchor?ut=Ge._anchorAxis:"x"===yt?ut={_offset:Qe.t+(1-(Ge.position||0))*Qe.h,_length:0}:"y"===yt&&(ut={_offset:Qe.l+(Ge.position||0)*Qe.w+Ge._shift,_length:0}),"top"===wt||"left"===wt?ut._offset:"bottom"===wt||"right"===wt?ut._offset+ut._length:void 0},$.shouldShowZeroLine=function(Ve,Ge,ut){var Qe=_.simpleMap(Ge.range,Ge.r2l);return Qe[0]*Qe[1]<=0&&Ge.zeroline&&("linear"===Ge.type||"-"===Ge.type)&&!(Ge.rangebreaks&&Ge.maskBreaks(0)===O)&&(_t(Ge,0)||!function(yt,wt,kt,vt){var Lt=kt._mainAxis;if(Lt){var St=yt._fullLayout,Ot=wt._id.charAt(0),Nt=$.counterLetter(wt._id),Bt=wt._offset+(Math.abs(vt[0])<Math.abs(vt[1])==("x"===Ot)?0:wt._length),Vt=St._plots[kt._mainSubplot];if(!(Vt.mainplotinfo||Vt).overlays.length)return an(kt);for(var nn=$.list(yt,Nt),gn=0;gn<nn.length;gn++){var Jt=nn[gn];if(Jt._mainAxis===Lt&&an(Jt))return!0}}function an(Xt){if(!Xt.showline||!Xt.linewidth)return!1;var Gn=Math.max((Xt.linewidth+wt.zerolinewidth)/2,1);function Dn(bn){return"number"==typeof bn&&Math.abs(bn-Bt)<Gn}if(Dn(Xt._mainLinePosition)||Dn(Xt._mainMirrorPosition))return!0;var An=Xt._linepositions||{};for(var cn in An)if(Dn(An[cn][0])||Dn(An[cn][1]))return!0}}(Ve,Ge,ut,Qe)||function(yt,wt){for(var kt=yt._fullData,vt=wt._mainSubplot,Lt=wt._id.charAt(0),St=0;St<kt.length;St++){var Ot=kt[St];if(!0===Ot.visible&&Ot.xaxis+Ot.yaxis===vt&&(T.traceIs(Ot,"bar-like")&&Ot.orientation==={x:"h",y:"v"}[Lt]||Ot.fill&&Ot.fill.charAt(Ot.fill.length-1)===Lt))return!0}return!1}(Ve,Ge))},$.clipEnds=function(Ve,Ge){return Ge.filter(function(ut){return _t(Ve,ut.x)})},$.allowAutoMargin=function(Ve){for(var Ge=$.list(Ve,"",!0),ut=0;ut<Ge.length;ut++){var Qe=Ge[ut];Qe.automargin&&(o.allowAutoMargin(Ve,it(Qe)),Qe.mirror&&o.allowAutoMargin(Ve,Pt(Qe))),T.getComponentMethod("rangeslider","isVisible")(Qe)&&o.allowAutoMargin(Ve,jt(Qe))}},$.swap=function(Ve,Ge){for(var ut=function(yt,wt){var kt,vt,Lt=[];for(kt=0;kt<wt.length;kt++){var St=[],Ot=yt._fullData[wt[kt]].xaxis,Nt=yt._fullData[wt[kt]].yaxis;if(Ot&&Nt){for(vt=0;vt<Lt.length;vt++)-1===Lt[vt].x.indexOf(Ot)&&-1===Lt[vt].y.indexOf(Nt)||St.push(vt);if(St.length){var Bt,Vt=Lt[St[0]];if(St.length>1)for(vt=1;vt<St.length;vt++)Ut(Vt.x,(Bt=Lt[St[vt]]).x),Ut(Vt.y,Bt.y);Ut(Vt.x,[Ot]),Ut(Vt.y,[Nt])}else Lt.push({x:[Ot],y:[Nt]})}}return Lt}(Ve,Ge),Qe=0;Qe<ut.length;Qe++)Rt(Ve,ut[Qe].x,ut[Qe].y)}},52976:function(ne,F,e){"use strict";var M=e(38248),k=e(3400),o=e(39032).BADNUM,T=k.isArrayOrTypedArray,_=k.isDateTime,p=k.cleanNumber,l=Math.round;function t(r,n){return n?M(r):"number"==typeof r}function i(r){return Math.max(1,(r-1)/1e3)}ne.exports=function(r,n,a){var m,s=r,u=a.noMultiCategory;if(T(s)&&!s.length)return"-";if(!u&&T((m=s)[0])&&T(m[1]))return"multicategory";if(u&&Array.isArray(s[0])){for(var f=[],c=0;c<s.length;c++)if(T(s[c]))for(var y=0;y<s[c].length;y++)f.push(s[c][y]);s=f}if(function(m,g){for(var x=m.length,v=i(x),b=0,h=0,S={},w=0;w<x;w+=v){var E=m[l(w)],P=String(E);S[P]||(S[P]=1,_(E,g)&&b++,M(E)&&h++)}return b>2*h}(s,n))return"date";var d="strict"!==a.autotypenumbers;return function(m,g){for(var x=m.length,v=i(x),b=0,h=0,S={},w=0;w<x;w+=v){var E=m[l(w)],P=String(E);if(!S[P]){S[P]=1;var I=typeof E;"boolean"===I?h++:(g?p(E)!==o:"number"===I)?b++:"string"===I&&h++}}return h>2*b}(s,d)?"category":function(m,g){for(var x=m.length,v=0;v<x;v++)if(t(m[v],g))return!0;return!1}(s,d)?"linear":"-"}},28336:function(ne,F,e){"use strict";var M=e(38248),k=e(24040),o=e(3400),T=e(31780),_=e(51272),p=e(94724),l=e(26332),t=e(25404),i=e(95936),r=e(42568),n=e(22416),a=e(42136),s=e(96312),u=e(78344),f=e(33816).WEEKDAY_PATTERN,c=e(33816).HOUR_PATTERN;function y(g,x,v){function b(z,U){return o.coerce(g,x,p.rangebreaks,z,U)}if(b("enabled")){var h=b("bounds");if(h&&h.length>=2){var S,w,E="";if(2===h.length)for(S=0;S<2;S++)if(w=m(h[S])){E=f;break}var P=b("pattern",E);if(P===f)for(S=0;S<2;S++)(w=m(h[S]))&&(x.bounds[S]=h[S]=w-1);if(P)for(S=0;S<2;S++)switch(w=h[S],P){case f:if(!M(w)||(w=+w)!==Math.floor(w)||w<0||w>=7)return void(x.enabled=!1);x.bounds[S]=h[S]=w;break;case c:if(!M(w)||(w=+w)<0||w>24)return void(x.enabled=!1);x.bounds[S]=h[S]=w}if(!1===v.autorange){var I=v.range;if(I[0]<I[1]){if(h[0]<I[0]&&h[1]>I[1])return void(x.enabled=!1)}else if(h[0]>I[0]&&h[1]<I[1])return void(x.enabled=!1)}}else{var O=b("values");if(!O||!O.length)return void(x.enabled=!1);b("dvalue")}}}ne.exports=function(g,x,v,b,h){var S,w=b.letter,E=b.font||{},P=b.splomStash||{},I=v("visible",!b.visibleDflt),z=x.type||(x._template||{}).type||"-";"date"===z&&(k.getComponentMethod("calendars","handleDefaults")(g,x,"calendar",b.calendar),b.noTicklabelmode||(S=v("ticklabelmode")));var U="";b.noTicklabelposition&&"multicategory"!==z||(U=o.coerce(g,x,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===S?["outside","inside"]:"x"===w?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),b.noTicklabeloverflow||v("ticklabeloverflow",-1!==U.indexOf("inside")?"hide past domain":"category"===z||"multicategory"===z?"allow":"hide past div"),u(x,h),s(g,x,v,b),n(g,x,v,b),"category"===z||b.noHover||v("hoverformat");var R=v("color"),j=R!==p.color.dflt?R:E.color,Y=P.label||h._dfltTitle[w];if(r(g,x,v,z,b),!I)return x;v("title.text",Y),o.coerceFont(v,"title.font",E,{overrideDflt:{size:o.bigFont(E.size),color:j}}),l(g,x,v,z);var B=b.hasMinor;if(B&&(T.newContainer(x,"minor"),l(g,x,v,z,{isMinor:!0})),i(g,x,v,z,b),t(g,x,v,b),B){var V=b.isMinor;b.isMinor=!0,t(g,x,v,b),b.isMinor=V}a(g,x,v,{dfltColor:R,bgColor:b.bgColor,showGrid:b.showGrid,hasMinor:B,attributes:p}),!B||x.minor.ticks||x.minor.showgrid||delete x.minor,(x.showline||x.ticks)&&v("mirror");var q,ie="multicategory"===z;if(b.noTickson||"category"!==z&&!ie||!x.ticks&&!x.showgrid||(ie&&(q="boundaries"),"boundaries"===v("tickson",q)&&delete x.ticklabelposition),ie&&v("showdividers")&&(v("dividercolor"),v("dividerwidth")),"date"===z)if(_(g,x,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:y}),x.rangebreaks.length){for(var te=0;te<x.rangebreaks.length;te++)if(x.rangebreaks[te].pattern===f){x._hasDayOfWeekBreaks=!0;break}if(u(x,h),h._has("scattergl")||h._has("splom"))for(var ee=0;ee<b.data.length;ee++){var $=b.data[ee];"scattergl"!==$.type&&"splom"!==$.type||($.visible=!1,o.warn($.type+" traces do not work on axes with rangebreaks. Setting trace "+$.index+" to `visible: false`."))}}else delete x.rangebreaks;return x};var d={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function m(g){if("string"==typeof g)return d[g.substr(0,3).toLowerCase()]}},29736:function(ne,F,e){"use strict";var M=e(26880),k=M.FORMAT_LINK,o=M.DATE_FORMAT_LINK;function T(p,l){return["Sets the "+p+" formatting rule"+(l?"for `"+l+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+k+"."].join(" ")}function _(p,l){return T(p,l)+[" And for dates see: "+o+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}ne.exports={axisHoverFormat:function(p,l){return{valType:"string",dflt:"",editType:"none",description:(l?T:_)("hover text",p)+["By default the values are formatted using "+(l?"generic number format":"`"+p+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:T,descriptionWithDates:_}},79811:function(ne,F,e){"use strict";var M=e(24040),k=e(33816);function o(T,_){if(_&&_.length)for(var p=0;p<_.length;p++)if(_[p][T])return!0;return!1}F.id2name=function(T){if("string"==typeof T&&T.match(k.AX_ID_PATTERN)){var _=T.split(" ")[0].substr(1);return"1"===_&&(_=""),T.charAt(0)+"axis"+_}},F.name2id=function(T){if(T.match(k.AX_NAME_PATTERN)){var _=T.substr(5);return"1"===_&&(_=""),T.charAt(0)+_}},F.cleanId=function(T,_,p){var l=/( domain)$/.test(T);if("string"==typeof T&&T.match(k.AX_ID_PATTERN)&&(!_||T.charAt(0)===_)&&(!l||p)){var t=T.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===t&&(t=""),T.charAt(0)+t+(l&&p?" domain":"")}},F.list=function(T,_,p){var l=T._fullLayout;if(!l)return[];var t,i=F.listIds(T,_),r=new Array(i.length);for(t=0;t<i.length;t++){var n=i[t];r[t]=l[n.charAt(0)+"axis"+n.substr(1)]}if(!p){var a=l._subplots.gl3d||[];for(t=0;t<a.length;t++){var s=l[a[t]];_?r.push(s[_+"axis"]):r.push(s.xaxis,s.yaxis,s.zaxis)}}return r},F.listIds=function(T,_){var p=T._fullLayout;if(!p)return[];var l=p._subplots;return _?l[_+"axis"]:l.xaxis.concat(l.yaxis)},F.getFromId=function(T,_,p){var l=T._fullLayout;return _=void 0===_||"string"!=typeof _?_:_.replace(" domain",""),"x"===p?_=_.replace(/y[0-9]*/,""):"y"===p&&(_=_.replace(/x[0-9]*/,"")),l[F.id2name(_)]},F.getFromTrace=function(T,_,p){var l=T._fullLayout,t=null;if(M.traceIs(_,"gl3d")){var i=_.scene;"scene"===i.substr(0,5)&&(t=l[i][p+"axis"])}else t=F.getFromId(T,_[p+"axis"]||p);return t},F.idSort=function(T,_){var p=T.charAt(0),l=_.charAt(0);return p!==l?p>l?1:-1:+(T.substr(1)||1)-+(_.substr(1)||1)},F.ref2id=function(T){return!!/^[xyz]/.test(T)&&T.split(" ")[0]},F.isLinked=function(T,_){return o(_,T._axisMatchGroups)||o(_,T._axisConstraintGroups)}},22416:function(ne,F,e){"use strict";var M=e(38116).isTypedArraySpec;ne.exports=function(k,o,T,_){if("category"===o.type){var p,l=k.categoryarray,t=Array.isArray(l)&&l.length>0||M(l);t&&(p="array");var i,r=T("categoryorder",p);"array"===r&&(i=T("categoryarray")),t||"array"!==r||(r=o.categoryorder="trace"),"trace"===r?o._initialCategories=[]:"array"===r?o._initialCategories=i.slice():(i=function(n,a){var s,u,f,c=a.dataAttr||n._id.charAt(0),y={};if(a.axData)s=a.axData;else for(s=[],u=0;u<a.data.length;u++){var d=a.data[u];d[c+"axis"]===n._id&&s.push(d)}for(u=0;u<s.length;u++){var m=s[u][c];for(f=0;f<m.length;f++){var g=m[f];null!=g&&(y[g]=1)}}return Object.keys(y)}(o,_).sort(),"category ascending"===r?o._initialCategories=i:"category descending"===r&&(o._initialCategories=i.reverse()))}}},98728:function(ne,F,e){"use strict";var M=e(38248),k=e(3400),o=e(39032),T=o.ONEDAY,_=o.ONEWEEK;F.dtick=function(p,l){var t="log"===l,i="date"===l,r="category"===l,n=i?T:1;if(!p)return n;if(M(p))return(p=Number(p))<=0?n:r?Math.max(1,Math.round(p)):i?Math.max(.1,p):p;if("string"!=typeof p||!i&&!t)return n;var a=p.charAt(0),s=p.substr(1);return(s=M(s)?Number(s):0)<=0||!(i&&"M"===a&&s===Math.round(s)||t&&"L"===a||t&&"D"===a&&(1===s||2===s))?n:p},F.tick0=function(p,l,t,i){return"date"===l?k.cleanDate(p,k.dateTick0(t,i%_==0?1:0)):"D1"!==i&&"D2"!==i?M(p)?Number(p):0:void 0}},33816:function(ne,F,e){"use strict";var M=e(53756).counter;ne.exports={idRegex:{x:M("x","( domain)?"),y:M("y","( domain)?")},attrRegex:M("[xy]axis"),xAxisMatch:M("xaxis"),yAxisMatch:M("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},71888:function(ne,F,e){"use strict";var M=e(3400),k=e(19280),o=e(79811).id2name,T=e(94724),_=e(21160),p=e(78344),l=e(39032).ALMOST_EQUAL,t=e(84284).FROM_BL;function i(c,y,d){var m=d.axIds,g=d.layoutOut,x=d.hasImage,v=g._axisConstraintGroups,b=g._axisMatchGroups,h=y._id,S=h.charAt(0),w=((g._splomAxes||{})[S]||{})[h]||{},E=y._id,P="x"===E.charAt(0);function I(J,X){return M.coerce(c,y,T,J,X)}y._matchGroup=null,y._constraintGroup=null,I("constrain",x?"domain":"range"),M.coerce(c,y,{constraintoward:{valType:"enumerated",values:P?["left","center","right"]:["bottom","middle","top"],dflt:P?"center":"middle"}},"constraintoward");var O,z,U=y.type,R=[];for(O=0;O<m.length;O++)(z=m[O])!==E&&g[o(z)].type===U&&R.push(z);var j=n(v,E);if(j){var Y=[];for(O=0;O<R.length;O++)j[z=R[O]]||Y.push(z);R=Y}var B,V,q=R.length;q&&(c.matches||w.matches)&&(B=M.coerce(c,y,{matches:{valType:"enumerated",values:R,dflt:-1!==R.indexOf(w.matches)?w.matches:void 0}},"matches"));var ie=x&&!P?y.anchor:void 0;if(q&&!B&&(c.scaleanchor||ie)&&(V=M.coerce(c,y,{scaleanchor:{valType:"enumerated",values:R.concat([!1])}},"scaleanchor",ie)),B){y._matchGroup=a(b,E,B,1);var te=g[o(B)],ee=r(g,y)/r(g,te);P!==("x"===B.charAt(0))&&(ee=(P?"x":"y")+ee),a(v,E,B,ee)}else c.matches&&-1!==m.indexOf(c.matches)&&M.warn("ignored "+y._name+'.matches: "'+c.matches+'" to avoid an infinite loop');if(V){var $=I("scaleratio");$||($=y.scaleratio=1),a(v,E,V,$)}else c.scaleanchor&&-1!==m.indexOf(c.scaleanchor)&&M.warn("ignored "+y._name+'.scaleanchor: "'+c.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function r(c,y){var d=y.domain;return d||(d=c[o(y.overlaying)].domain),d[1]-d[0]}function n(c,y){for(var d=0;d<c.length;d++)if(c[d][y])return c[d];return null}function a(c,y,d,m){var g,x,v,b,h,S=n(c,y);null===S?((S={})[y]=1,h=c.length,c.push(S)):h=c.indexOf(S);var w=Object.keys(S);for(g=0;g<c.length;g++)if(v=c[g],g!==h&&v[d]){var E=v[d];for(x=0;x<w.length;x++)v[b=w[x]]=s(E,s(m,S[b]));return void c.splice(h,1)}if(1!==m)for(x=0;x<w.length;x++){var P=w[x];S[P]=s(m,S[P])}S[d]=1}function s(c,y){var d,m,g="",x="";"string"==typeof c&&(d=(g=c.match(/^[xy]*/)[0]).length,c=+c.substr(d)),"string"==typeof y&&(m=(x=y.match(/^[xy]*/)[0]).length,y=+y.substr(m));var v=c*y;return d||m?d&&m&&g.charAt(0)!==x.charAt(0)?d===m?v:(d>m?g.substr(m):x.substr(d))+v:g+x+c*y:v}function u(c,y){for(var d=y._size,m=d.h/d.w,g={},x=Object.keys(c),v=0;v<x.length;v++){var b=x[v],h=c[b];if("string"==typeof h){var S=h.match(/^[xy]*/)[0],w=S.length;h=+h.substr(w);for(var E="y"===S.charAt(0)?m:1/m,P=0;P<w;P++)h*=E}g[b]=h}return g}function f(c,y){var d=c._inputDomain,g=d[0]+(d[1]-d[0])*t[c.constraintoward];c.domain=c._input.domain=[g+(d[0]-g)/y,g+(d[1]-g)/y],c.setScale()}F.handleDefaults=function(c,y,d){var m,g,x,v,b,h,S,w,E=d.axIds,P=d.axHasImage,I=y._axisConstraintGroups=[],O=y._axisMatchGroups=[];for(m=0;m<E.length;m++)i(b=c[v=o(E[m])],h=y[v],{axIds:E,layoutOut:y,hasImage:P[v]});function z(te,ee){for(m=0;m<te.length;m++)for(x in g=te[m])y[o(x)][ee]=g}for(z(O,"_matchGroup"),m=0;m<I.length;m++)for(x in g=I[m])if((h=y[o(x)]).fixedrange){for(var U in g){var R=o(U);!1===(c[R]||{}).fixedrange&&M.warn("fixedrange was specified as false for axis "+R+" but was overridden because another axis in its constraint group has fixedrange true"),y[R].fixedrange=!0}break}for(m=0;m<I.length;){for(x in g=I[m]){(h=y[o(x)])._matchGroup&&Object.keys(h._matchGroup).length===Object.keys(g).length&&(I.splice(m,1),m--);break}m++}z(I,"_constraintGroup");var j=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],Y=!1,B=!1;function V(){w=h[S],"rangebreaks"===S&&(B=h._hasDayOfWeekBreaks)}for(m=0;m<O.length;m++){g=O[m];for(var q=0;q<j.length;q++){var ie;for(x in S=j[q],w=null,g)if(b=c[v=o(x)],S in(h=y[v])){if(!h.matches&&(ie=h,S in b)){V();break}null===w&&S in b&&V()}if("range"===S&&w&&b.range&&2===b.range.length&&null!==b.range[0]&&null!==b.range[1]&&(Y=!0),"autorange"===S&&null===w&&Y&&(w=!1),null===w&&S in ie&&(w=ie[S]),null!==w)for(x in g)(h=y[o(x)])[S]="range"===S?w.slice():w,"rangebreaks"===S&&(h._hasDayOfWeekBreaks=B,p(h,y))}}},F.enforce=function(c){var y,d,m,g,x,v,b,h,S=c._fullLayout,w=S._axisConstraintGroups||[];for(y=0;y<w.length;y++){m=u(w[y],S);var E=Object.keys(m),P=1/0,I=0,O=1/0,z={},U={},R=!1;for(d=0;d<E.length;d++)U[g=E[d]]=x=S[o(g)],x._inputDomain?x.domain=x._inputDomain.slice():x._inputDomain=x.domain.slice(),x._inputRange||(x._inputRange=x.range.slice()),x.setScale(),z[g]=v=Math.abs(x._m)/m[g],P=Math.min(P,v),"domain"!==x.constrain&&x._constraintShrinkable||(O=Math.min(O,v)),delete x._constraintShrinkable,I=Math.max(I,v),"domain"===x.constrain&&(R=!0);if(!(P>l*I)||R)for(d=0;d<E.length;d++)if(v=z[g=E[d]],b=(x=U[g]).constrain,v!==O||"domain"===b)if(h=v/O,"range"===b)_(x,h);else{var j=x._inputDomain,Y=(x.domain[1]-x.domain[0])/(j[1]-j[0]),B=(x.r2l(x.range[1])-x.r2l(x.range[0]))/(x.r2l(x._inputRange[1])-x.r2l(x._inputRange[0]));if((h/=Y)*B<1){x.domain=x._input.domain=j.slice(),_(x,h);continue}if(B<1&&(x.range=x._input.range=x._inputRange.slice(),h*=B),x.autorange){var V=x.r2l(x.range[0]),q=x.r2l(x.range[1]),ie=(V+q)/2,te=ie,ee=ie,$=Math.abs(q-ie),J=ie-$*h*1.0001,X=ie+$*h*1.0001,ae=k.makePadFn(S,x,0),ce=k.makePadFn(S,x,1);f(x,h);var le,pe,we=Math.abs(x._m),Te=k.concatExtremes(c,x),ye=Te.min,ve=Te.max;for(pe=0;pe<ye.length;pe++)(le=ye[pe].val-ae(ye[pe])/we)>J&&le<te&&(te=le);for(pe=0;pe<ve.length;pe++)(le=ve[pe].val+ce(ve[pe])/we)<X&&le>ee&&(ee=le);h/=(ee-te)/(2*$),te=x.l2r(te),ee=x.l2r(ee),x.range=x._input.range=V<q?[te,ee]:[ee,te]}f(x,h)}}},F.getAxisGroup=function(c,y){for(var d=c._axisMatchGroups,m=0;m<d.length;m++)if(d[m][y])return"g"+m;return y},F.clean=function(c,y){if(y._inputDomain){for(var d=!1,m=y._id,g=c._fullLayout._axisConstraintGroups,x=0;x<g.length;x++)if(g[x][m]){d=!0;break}d&&"domain"===y.constrain||(y._input.domain=y.domain=y._inputDomain,delete y._inputDomain)}}},51184:function(ne,F,e){"use strict";var M=e(33428),k=e(3400),o=k.numberFormat,T=e(49760),_=e(89184),p=e(24040),l=k.strTranslate,t=e(72736),i=e(76308),r=e(43616),n=e(93024),a=e(54460),s=e(93972),u=e(86476),f=e(72760),c=f.selectingOrDrawing,y=f.freeMode,d=e(84284).FROM_TL,m=e(73696),g=e(39172).redrawReglTraces,x=e(7316),v=e(79811).getFromId,b=e(22676).prepSelect,h=e(22676).clearOutline,S=e(22676).selectOnClick,w=e(21160),E=e(33816),P=E.MINDRAG,I=E.MINZOOM,O=!0;function z(le,pe,we,Te){var ye=k.ensureSingle(le.draglayer,pe,we,function(ve){ve.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",le.id)});return ye.call(s,Te),ye.node()}function U(le,pe,we,Te,ye,ve,xe){var Ce=z(le,"rect",pe,we);return M.select(Ce).call(r.setRect,Te,ye,ve,xe),Ce}function R(le,pe){for(var we=0;we<le.length;we++)if(!le[we].fixedrange)return pe;return""}function j(le,pe,we,Te,ye){for(var ve=0;ve<le.length;ve++){var xe=le[ve];if(!xe.fixedrange)if(xe.rangebreaks){var Ce="y"===xe._id.charAt(0),be=Ce?1-we:we;Te[xe._name+".range[0]"]=xe.l2r(xe.p2l((Ce?1-pe:pe)*xe._length)),Te[xe._name+".range[1]"]=xe.l2r(xe.p2l(be*xe._length))}else{var ue=xe._rl[0],se=xe._rl[1]-ue;Te[xe._name+".range[0]"]=xe.l2r(ue+se*pe),Te[xe._name+".range[1]"]=xe.l2r(ue+se*we)}}if(ye&&ye.length){var ge=(pe+(1-we))/2;j(ye,ge,1-ge,Te,[])}}function Y(le,pe){for(var we=0;we<le.length;we++){var Te=le[we];if(!Te.fixedrange){if(Te.rangebreaks){var ye=Te._length,ve=(Te.p2l(0+pe)-Te.p2l(0)+(Te.p2l(ye+pe)-Te.p2l(ye)))/2;Te.range=[Te.l2r(Te._rl[0]-ve),Te.l2r(Te._rl[1]-ve)]}else Te.range=[Te.l2r(Te._rl[0]-pe/Te._m),Te.l2r(Te._rl[1]-pe/Te._m)];Te.limitRange&&Te.limitRange()}}}function B(le){return 1-(le>=0?Math.min(le,.9):1/(1/Math.max(le,-.3)+3.222))}function V(le,pe,we,Te,ye){return le.append("path").attr("class","zoombox").style({fill:pe>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",l(we,Te)).attr("d",ye+"Z")}function q(le,pe,we){return le.append("path").attr("class","zoombox-corners").style({fill:i.background,stroke:i.defaultLine,"stroke-width":1,opacity:0}).attr("transform",l(pe,we)).attr("d","M0,0Z")}function ie(le,pe,we,Te,ye,ve){le.attr("d",Te+"M"+we.l+","+we.t+"v"+we.h+"h"+we.w+"v-"+we.h+"h-"+we.w+"Z"),te(le,pe,ye,ve)}function te(le,pe,we,Te){we||(le.transition().style("fill",Te>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),pe.transition().style("opacity",1).duration(200))}function ee(le){M.select(le).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function $(le){O&&le.data&&le._context.showTips&&(k.notifier(k._(le,"Double-click to zoom back out"),"long"),O=!1)}function J(le){var pe=Math.floor(Math.min(le.b-le.t,le.r-le.l,I)/2);return"M"+(le.l-3.5)+","+(le.t-.5+pe)+"h3v"+-pe+"h"+pe+"v-3h-"+(pe+3)+"ZM"+(le.r+3.5)+","+(le.t-.5+pe)+"h-3v"+-pe+"h"+-pe+"v-3h"+(pe+3)+"ZM"+(le.r+3.5)+","+(le.b+.5-pe)+"h-3v"+pe+"h"+-pe+"v3h"+(pe+3)+"ZM"+(le.l-3.5)+","+(le.b+.5-pe)+"h3v"+pe+"h"+pe+"v3h-"+(pe+3)+"Z"}function X(le,pe,we,Te,ye){for(var ve,xe,Ce,Oe,be=!1,ue={},se={},ge=(ye||{}).xaHash,Ie=(ye||{}).yaHash,ke=0;ke<pe.length;ke++){var Se=pe[ke];for(ve in we)if(Se[ve]){for(Ce in Se)ye&&(ge[Ce]||Ie[Ce])||("x"===Ce.charAt(0)?we:Te)[Ce]||(ue[Ce]=ve);for(xe in Te)ye&&(ge[xe]||Ie[xe])||!Se[xe]||(be=!0)}for(xe in Te)if(Se[xe])for(Oe in Se)ye&&(ge[Oe]||Ie[Oe])||("x"===Oe.charAt(0)?we:Te)[Oe]||(se[Oe]=xe)}be&&(k.extendFlat(ue,se),se={});var Pe={},Fe=[];for(Ce in ue){var Be=v(le,Ce);Fe.push(Be),Pe[Be._id]=Be}var me={},Me=[];for(Oe in se){var Le=v(le,Oe);Me.push(Le),me[Le._id]=Le}return{xaHash:Pe,yaHash:me,xaxes:Fe,yaxes:Me,xLinks:ue,yLinks:se,isSubplotConstrained:be}}function ae(le,pe){if(_){var we=void 0!==le.onwheel?"wheel":"mousewheel";le._onwheel&&le.removeEventListener(we,le._onwheel),le._onwheel=pe,le.addEventListener(we,pe,{passive:!1})}else void 0!==le.onwheel?le.onwheel=pe:void 0!==le.onmousewheel?le.onmousewheel=pe:le.isAddedWheelEvent||(le.isAddedWheelEvent=!0,le.addEventListener("wheel",pe,{passive:!1}))}function ce(le){var pe=[];for(var we in le)pe.push(le[we]);return pe}ne.exports={makeDragBox:function(le,pe,we,Te,ye,ve,xe,Ce){var Oe,be,ue,se,ge,Ie,ke,Se,Pe,Fe,Be,me,Me,Le,Ne,Re,He,Ze,nt,ft,ht,Tt,At,_t=le._fullLayout._zoomlayer,ot=xe+Ce==="nsew",it=1===(xe+Ce).length;function Pt(){if(Pe=(Oe=pe.xaxis)._length,Fe=(be=pe.yaxis)._length,ke=Oe._offset,Se=be._offset,(ue={})[Oe._id]=Oe,(se={})[be._id]=be,xe&&Ce)for(var cn=pe.overlays,bn=0;bn<cn.length;bn++){var hn=cn[bn].xaxis;ue[hn._id]=hn;var wn=cn[bn].yaxis;se[wn._id]=wn}ge=ce(ue),Ie=ce(se),Me=R(ge,Ce),Le=R(Ie,xe),Ne=!Le&&!Me,me=X(le,le._fullLayout._axisMatchGroups,ue,se);var Ln=(Be=X(le,le._fullLayout._axisConstraintGroups,ue,se,me)).isSubplotConstrained||me.isSubplotConstrained;Re=Ce||Ln,He=xe||Ln;var Pn=le._fullLayout;Ze=Pn._has("scattergl"),nt=Pn._has("splom"),ft=Pn._has("svg")}we+=pe.yaxis._shift,Pt();var cn,jt=(cn=Le+Me)?"nsew"===cn?ot?"":"pan"===le._fullLayout.dragmode?"move":"crosshair":cn.toLowerCase()+"-resize":"pointer",Ut=U(pe,xe+Ce+"drag",jt,we,Te,ye,ve);if(Ne&&!ot)return Ut.onmousedown=null,Ut.style.pointerEvents="none",Ut;var Rt,Je,et,qe,$e,pt,ct,Ve,Ge,ut,Qe={element:Ut,gd:le,plotinfo:pe};function yt(){Qe.plotinfo.selection=!1,h(le)}function wt(cn,bn){var Zn,hr,rr,dr,nr,hn=Qe.gd;if(hn._fullLayout._activeShapeIndex>=0)hn._fullLayout._deactivateShape(hn);else{var wn=hn._fullLayout.clickmode;if(ee(hn),2!==cn||it||function Jt(){if(!le._transitioningWithDuration){var cn=le._context.doubleClick,bn=[];Me&&(bn=bn.concat(ge)),Le&&(bn=bn.concat(Ie)),me.xaxes&&(bn=bn.concat(me.xaxes)),me.yaxes&&(bn=bn.concat(me.yaxes));var hn,wn,Ln={};if("reset+autosize"===cn)for(cn="autosize",wn=0;wn<bn.length;wn++){var Pn=(hn=bn[wn])._rangeInitial0,Nn=hn._rangeInitial1,jn=void 0!==Pn||void 0!==Nn;if(jn&&(void 0!==Pn&&Pn!==hn.range[0]||void 0!==Nn&&Nn!==hn.range[1])||!jn&&!0!==hn.autorange){cn="reset";break}}if("autosize"===cn)for(wn=0;wn<bn.length;wn++)(hn=bn[wn]).fixedrange||(Ln[hn._name+".autorange"]=!0);else if("reset"===cn)for((Me||Be.isSubplotConstrained)&&(bn=bn.concat(Be.xaxes)),Le&&!Be.isSubplotConstrained&&(bn=bn.concat(Be.yaxes)),Be.isSubplotConstrained&&(Me?Le||(bn=bn.concat(Ie)):bn=bn.concat(ge)),wn=0;wn<bn.length;wn++)if(!(hn=bn[wn]).fixedrange){var Fn=hn._name,Jn=hn._autorangeInitial;void 0===hn._rangeInitial0&&void 0===hn._rangeInitial1?Ln[Fn+".autorange"]=!0:void 0===hn._rangeInitial0?(Ln[Fn+".autorange"]=Jn,Ln[Fn+".range"]=[null,hn._rangeInitial1]):void 0===hn._rangeInitial1?(Ln[Fn+".range"]=[hn._rangeInitial0,null],Ln[Fn+".autorange"]=Jn):Ln[Fn+".range"]=[hn._rangeInitial0,hn._rangeInitial1]}le.emit("plotly_doubleclick",null),p.call("_guiRelayout",le,Ln)}}(),ot)wn.indexOf("select")>-1&&S(bn,hn,ge,Ie,pe.id,Qe),wn.indexOf("event")>-1&&n.click(hn,bn,pe.id);else if(1===cn&&it){var Ln=xe?be:Oe,Pn="s"===xe||"w"===Ce?0:1,Nn=Ln._name+".range["+Pn+"]",jn=(dr=(Zn=Ln).range[hr=Pn],nr=Math.abs(dr-Zn.range[1-hr]),"date"===Zn.type?dr:"log"===Zn.type?(rr=Math.ceil(Math.max(0,-Math.log(nr)/Math.LN10))+3,o("."+rr+"g")(Math.pow(10,dr))):(rr=Math.floor(Math.log(Math.abs(dr))/Math.LN10)-Math.floor(Math.log(nr)/Math.LN10)+4,o("."+String(rr)+"g")(dr))),Fn="left",Jn="middle";if(Ln.fixedrange)return;xe?(Jn="n"===xe?"top":"bottom","right"===Ln.side&&(Fn="right")):"e"===Ce&&(Fn="right"),hn._context.showAxisRangeEntryBoxes&&M.select(Ut).call(t.makeEditable,{gd:hn,immediate:!0,background:hn._fullLayout.paper_bgcolor,text:String(jn),fill:Ln.tickfont?Ln.tickfont.color:"#444",horizontalAlign:Fn,verticalAlign:Jn}).on("edit",function(Zn){var hr=Ln.d2r(Zn);void 0!==hr&&p.call("_guiRelayout",hn,Nn,hr)})}}}function kt(cn,bn){if(le._transitioningWithDuration)return!1;var Jn,Zn,hn=Math.max(0,Math.min(Pe,Tt*cn+Rt)),wn=Math.max(0,Math.min(Fe,At*bn+Je)),Ln=Math.abs(hn-Rt),Pn=Math.abs(wn-Je);function Nn(){ct="",et.r=et.l,et.t=et.b,Ge.attr("d","M0,0Z")}if(et.l=Math.min(Rt,hn),et.r=Math.max(Rt,hn),et.t=Math.min(Je,wn),et.b=Math.max(Je,wn),Be.isSubplotConstrained)Ln>I||Pn>I?(ct="xy",Ln/Pe>Pn/Fe?(Pn=Ln*Fe/Pe,Je>wn?et.t=Je-Pn:et.b=Je+Pn):(Ln=Pn*Pe/Fe,Rt>hn?et.l=Rt-Ln:et.r=Rt+Ln),Ge.attr("d",J(et))):Nn();else if(me.isSubplotConstrained)if(Ln>I||Pn>I){ct="xy";var jn=Math.min(et.l/Pe,(Fe-et.b)/Fe),Fn=Math.max(et.r/Pe,(Fe-et.t)/Fe);et.l=jn*Pe,et.r=Fn*Pe,et.b=(1-jn)*Fe,et.t=(1-Fn)*Fe,Ge.attr("d",J(et))}else Nn();else!Le||Pn<Math.min(Math.max(.6*Ln,P),I)?Ln<P||!Me?Nn():(et.t=0,et.b=Fe,ct="x",Ge.attr("d","M"+((Jn=et).l-.5)+","+((Zn=Je)-I-.5)+"h-3v"+(2*I+1)+"h3ZM"+(Jn.r+.5)+","+(Zn-I-.5)+"h3v"+(2*I+1)+"h-3Z")):!Me||Ln<Math.min(.6*Pn,I)?(et.l=0,et.r=Pe,ct="y",Ge.attr("d",function(Jn,Zn){return"M"+(Zn-I-.5)+","+(Jn.t-.5)+"v-3h"+(2*I+1)+"v3ZM"+(Zn-I-.5)+","+(Jn.b+.5)+"v3h"+(2*I+1)+"v-3Z"}(et,Rt))):(ct="xy",Ge.attr("d",J(et)));et.w=et.r-et.l,et.h=et.b-et.t,ct&&(ut=!0),le._dragged=ut,ie(Ve,Ge,et,$e,pt,qe),vt(),le.emit("plotly_relayouting",ht),pt=!0}function vt(){ht={},"xy"!==ct&&"x"!==ct||(j(ge,et.l/Pe,et.r/Pe,ht,Be.xaxes),nn("x",ht)),"xy"!==ct&&"y"!==ct||(j(Ie,(Fe-et.b)/Fe,(Fe-et.t)/Fe,ht,Be.yaxes),nn("y",ht))}function Lt(){vt(),ee(le),an(),$(le)}Qe.prepFn=function(cn,bn,hn){var wn=Qe.dragmode,Ln=le._fullLayout.dragmode;Ln!==wn&&(Qe.dragmode=Ln),Pt(),Tt=le._fullLayout._invScaleX,At=le._fullLayout._invScaleY,Ne||(ot?cn.shiftKey?"pan"===Ln?Ln="zoom":c(Ln)||(Ln="pan"):cn.ctrlKey&&(Ln="pan"):Ln="pan"),Qe.minDrag=y(Ln)?1:void 0,c(Ln)?(Qe.xaxes=ge,Qe.yaxes=Ie,b(cn,bn,hn,Qe,Ln)):(Qe.clickFn=wt,c(wn)&&yt(),Ne||("zoom"===Ln?(Qe.moveFn=kt,Qe.doneFn=Lt,Qe.minDrag=1,function(Pn,Nn,jn){var Fn=Ut.getBoundingClientRect();Rt=Nn-Fn.left,Je=jn-Fn.top,le._fullLayout._calcInverseTransform(le);var Jn=k.apply3DTransform(le._fullLayout._invTransform)(Rt,Je);et={l:Rt=Jn[0],r:Rt,w:0,t:Je=Jn[1],b:Je,h:0},qe=le._hmpixcount?le._hmlumcount/le._hmpixcount:T(le._fullLayout.plot_bgcolor).getLuminance(),pt=!1,ct="xy",ut=!1,Ve=V(_t,qe,ke,Se,$e="M0,0H"+Pe+"V"+Fe+"H0V0"),Ge=q(_t,ke,Se)}(0,bn,hn)):"pan"===Ln&&(Qe.moveFn=Vt,Qe.doneFn=an))),le._fullLayout._redrag=function(){var Pn=le._dragdata;Pn&&Pn.element===Ut&&(c(le._fullLayout.dragmode)||(Pt(),Xt([0,0,Pe,Fe]),Qe.moveFn(Pn.dx,Pn.dy)))}},u.init(Qe);var St=[0,0,Pe,Fe],Ot=null,Nt=E.REDRAWDELAY,Bt=pe.mainplot?le._fullLayout._plots[pe.mainplot]:pe;function Vt(cn,bn){if(cn*=Tt,bn*=At,!le._transitioningWithDuration){if(le._fullLayout._replotting=!0,"ew"===Me||"ns"===Le){var hn=Me?-cn:0,wn=Le?-bn:0;if(me.isSubplotConstrained){if(Me&&Le){var Ln=(cn/Pe-bn/Fe)/2;hn=-(cn=Ln*Pe),wn=-(bn=-Ln*Fe)}Le?hn=-wn*Pe/Fe:wn=-hn*Fe/Pe}return Me&&(Y(ge,cn),nn("x")),Le&&(Y(Ie,bn),nn("y")),Xt([hn,wn,Pe,Fe]),gn(),void le.emit("plotly_relayouting",ht)}var Pn,Nn,jn="w"===Me==("n"===Le)?1:-1;if(Me&&Le&&(Be.isSubplotConstrained||me.isSubplotConstrained)){var Fn=(cn/Pe+jn*bn/Fe)/2;cn=Fn*Pe,bn=jn*Fn*Fe}if("w"===Me?cn=rr(ge,0,cn):"e"===Me?cn=rr(ge,1,-cn):Me||(cn=0),"n"===Le?bn=rr(Ie,1,bn):"s"===Le?bn=rr(Ie,0,-bn):Le||(bn=0),Pn="w"===Me?cn:0,Nn="n"===Le?bn:0,Be.isSubplotConstrained&&!me.isSubplotConstrained||me.isSubplotConstrained&&Me&&Le&&jn>0){var Jn;if(me.isSubplotConstrained||!Me&&1===Le.length){for(Jn=0;Jn<ge.length;Jn++)ge[Jn].range=ge[Jn]._r.slice(),w(ge[Jn],1-bn/Fe);Pn=(cn=bn*Pe/Fe)/2}if(me.isSubplotConstrained||!Le&&1===Me.length){for(Jn=0;Jn<Ie.length;Jn++)Ie[Jn].range=Ie[Jn]._r.slice(),w(Ie[Jn],1-cn/Pe);Nn=(bn=cn*Fe/Pe)/2}}me.isSubplotConstrained&&Le||nn("x"),me.isSubplotConstrained&&Me||nn("y");var Zn=Pe-cn,hr=Fe-bn;!me.isSubplotConstrained||Me&&Le||(Me?(Nn=Pn?0:cn*Fe/Pe,hr=Zn*Fe/Pe):(Pn=Nn?0:bn*Pe/Fe,Zn=hr*Pe/Fe)),Xt([Pn,Nn,Zn,hr]),gn(),le.emit("plotly_relayouting",ht)}function rr(dr,nr,Sr){for(var ln,dn,Un=1-nr,Mn=0;Mn<dr.length;Mn++){var Hn=dr[Mn];if(!Hn.fixedrange){ln=Hn,dn=Hn._rl[Un]+(Hn._rl[nr]-Hn._rl[Un])/B(Sr/Hn._length);var Wn=Hn.l2r(dn);!1!==Wn&&void 0!==Wn&&(Hn.range[nr]=Wn)}}return ln._length*(ln._rl[nr]-dn)/(ln._rl[nr]-ln._rl[Un])}}function nn(cn,bn){for(var hn=me.isSubplotConstrained?{x:Ie,y:ge}[cn]:me[cn+"axes"],wn=me.isSubplotConstrained?{x:ge,y:Ie}[cn]:[],Ln=0;Ln<hn.length;Ln++){var Pn=hn[Ln],Nn=Pn._id,jn=me.xLinks[Nn]||me.yLinks[Nn],Fn=wn[0]||ue[jn]||se[jn];Fn&&(bn?(bn[Pn._name+".range[0]"]=bn[Fn._name+".range[0]"],bn[Pn._name+".range[1]"]=bn[Fn._name+".range[1]"]):Pn.range=Fn.range.slice())}}function gn(){var cn,bn=[];function hn(Nn){for(cn=0;cn<Nn.length;cn++)Nn[cn].fixedrange||bn.push(Nn[cn]._id)}function wn(Nn,jn){for(cn=0;cn<Nn.length;cn++){var Fn=Nn[cn],Jn=Fn[jn];Fn.fixedrange||"sync"!==Jn.tickmode||bn.push(Jn._id)}}for(Re&&(hn(ge),hn(Be.xaxes),hn(me.xaxes),wn(pe.overlays,"xaxis")),He&&(hn(Ie),hn(Be.yaxes),hn(me.yaxes),wn(pe.overlays,"yaxis")),ht={},cn=0;cn<bn.length;cn++){var Pn=v(le,bn[cn]);a.drawOne(le,Pn,{skipTitle:!0}),ht[Pn._name+".range[0]"]=Pn.range[0],ht[Pn._name+".range[1]"]=Pn.range[1]}a.redrawComponents(le,bn)}function an(){Xt([0,0,Pe,Fe]),k.syncOrAsync([x.previousPromises,function(){le._fullLayout._replotting=!1,p.call("_guiRelayout",le,ht)}],le)}function Xt(cn){var bn,hn,wn,Ln,Pn=le._fullLayout,Nn=Pn._plots,jn=Pn._subplots.cartesian;if(nt&&p.subplotsRegistry.splom.drag(le),Ze)for(bn=0;bn<jn.length;bn++)if(wn=(hn=Nn[jn[bn]]).xaxis,Ln=hn.yaxis,hn._scene){var Fn=k.simpleMap(wn.range,wn.r2l),Jn=k.simpleMap(Ln.range,Ln.r2l);wn.limitRange&&wn.limitRange(),Ln.limitRange&&Ln.limitRange(),hn._scene.update({range:[(Fn=wn.range)[0],(Jn=Ln.range)[0],Fn[1],Jn[1]]})}if((nt||Ze)&&(m(le),g(le)),ft){var Zn=cn[2]/Oe._length,hr=cn[3]/be._length;for(bn=0;bn<jn.length;bn++){wn=(hn=Nn[jn[bn]]).xaxis,Ln=hn.yaxis;var rr,dr,nr,Sr,dn=(He||me.isSubplotConstrained)&&!Ln.fixedrange&&se[Ln._id];if((Re||me.isSubplotConstrained)&&!wn.fixedrange&&ue[wn._id]?(rr=Zn,nr=Ce||me.isSubplotConstrained?cn[0]:An(wn,rr)):me.xaHash[wn._id]?(rr=Zn,nr=cn[0]*wn._length/Oe._length):me.yaHash[wn._id]?(rr=hr,nr="ns"===Le?-cn[1]*wn._length/be._length:An(wn,rr,{n:"top",s:"bottom"}[Le])):nr=Dn(wn,rr=Gn(wn,Zn,hr)),rr>1&&(void 0!==wn.maxallowed&&Re===(wn.range[0]<wn.range[1]?"e":"w")||void 0!==wn.minallowed&&Re===(wn.range[0]<wn.range[1]?"w":"e"))&&(rr=1,nr=0),dn?(dr=hr,Sr=xe||me.isSubplotConstrained?cn[1]:An(Ln,dr)):me.yaHash[Ln._id]?(dr=hr,Sr=cn[1]*Ln._length/be._length):me.xaHash[Ln._id]?(dr=Zn,Sr="ew"===Me?-cn[0]*Ln._length/Oe._length:An(Ln,dr,{e:"right",w:"left"}[Me])):Sr=Dn(Ln,dr=Gn(Ln,Zn,hr)),dr>1&&(void 0!==Ln.maxallowed&&He===(Ln.range[0]<Ln.range[1]?"n":"s")||void 0!==Ln.minallowed&&He===(Ln.range[0]<Ln.range[1]?"s":"n"))&&(dr=1,Sr=0),rr||dr){rr||(rr=1),dr||(dr=1);var Un=wn._offset-nr/rr,Mn=Ln._offset-Sr/dr;hn.clipRect.call(r.setTranslate,nr,Sr).call(r.setScale,rr,dr),hn.plot.call(r.setTranslate,Un,Mn).call(r.setScale,1/rr,1/dr),rr===hn.xScaleFactor&&dr===hn.yScaleFactor||(r.setPointGroupScale(hn.zoomScalePts,rr,dr),r.setTextPointsScale(hn.zoomScaleTxt,rr,dr)),r.hideOutsideRangePoints(hn.clipOnAxisFalseTraces,hn),hn.xScaleFactor=rr,hn.yScaleFactor=dr}}}}function Gn(cn,bn,hn){return cn.fixedrange?0:Re&&Be.xaHash[cn._id]?bn:He&&(Be.isSubplotConstrained?Be.xaHash:Be.yaHash)[cn._id]?hn:0}function Dn(cn,bn){return bn?(cn.range=cn._r.slice(),w(cn,bn),An(cn,bn)):0}function An(cn,bn,hn){return cn._length*(1-bn)*d[hn||cn.constraintoward||"middle"]}return xe.length*Ce.length!=1&&ae(Ut,function(cn){if(le._context._scrollZoom.cartesian||le._fullLayout._enablescrollzoom){if(yt(),le._transitioningWithDuration)return cn.preventDefault(),void cn.stopPropagation();Pt(),clearTimeout(Ot);var bn=-cn.deltaY;if(isFinite(bn)||(bn=cn.wheelDelta/10),isFinite(bn)){var hn,wn=Math.exp(-Math.min(Math.max(bn,-20),20)/200),Ln=Bt.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Pn=(cn.clientX-Ln.left)/Ln.width,Nn=(Ln.bottom-cn.clientY)/Ln.height;if(Re){for(Ce||(Pn=.5),hn=0;hn<ge.length;hn++)jn(ge[hn],Pn,wn);nn("x"),St[2]*=wn,St[0]+=St[2]*Pn*(1/wn-1)}if(He){for(xe||(Nn=.5),hn=0;hn<Ie.length;hn++)jn(Ie[hn],Nn,wn);nn("y"),St[3]*=wn,St[1]+=St[3]*(1-Nn)*(1/wn-1)}Xt(St),gn(),le.emit("plotly_relayouting",ht),Ot=setTimeout(function(){le._fullLayout&&(St=[0,0,Pe,Fe],an())},Nt),cn.preventDefault()}else k.log("Did not find wheel motion attributes: ",cn)}function jn(Fn,Jn,Zn){if(!Fn.fixedrange){var hr=k.simpleMap(Fn.range,Fn.r2l),rr=hr[0]+(hr[1]-hr[0])*Jn;Fn.range=hr.map(function(dr){return Fn.l2r(rr+(dr-rr)*Zn)})}}}),Ut},makeDragger:z,makeRectDragger:U,makeZoombox:V,makeCorners:q,updateZoombox:ie,xyCorners:J,transitionZoombox:te,removeZoombox:ee,showDoubleClickNotifier:$,attachWheelEventHandler:ae}},42464:function(ne,F,e){"use strict";var M=e(33428),k=e(93024),o=e(86476),T=e(93972),_=e(51184).makeDragBox,p=e(33816).DRAGGERSIZE;F.initInteractions=function(l){var t=l._fullLayout;if(l._context.staticPlot)M.select(l).selectAll(".drag").remove();else if(t._has("cartesian")||t._has("splom")){Object.keys(t._plots||{}).sort(function(r,n){if((t._plots[r].mainplot&&!0)===(t._plots[n].mainplot&&!0)){var a=r.split("y"),s=n.split("y");return a[0]===s[0]?Number(a[1]||1)-Number(s[1]||1):Number(a[0]||1)-Number(s[0]||1)}return t._plots[r].mainplot?1:-1}).forEach(function(r){var n=t._plots[r],a=n.xaxis,s=n.yaxis;if(!n.mainplot){var u=_(l,n,a._offset,s._offset,a._length,s._length,"ns","ew");u.onmousemove=function(y){l._fullLayout._rehover=function(){l._fullLayout._hoversubplot===r&&l._fullLayout._plots[r]&&k.hover(l,y,r)},k.hover(l,y,r),l._fullLayout._lasthover=u,l._fullLayout._hoversubplot=r},u.onmouseout=function(y){l._dragging||(l._fullLayout._hoversubplot=null,o.unhover(l,y))},l._context.showAxisDragHandles&&(_(l,n,a._offset-p,s._offset-p,p,p,"n","w"),_(l,n,a._offset+a._length,s._offset-p,p,p,"n","e"),_(l,n,a._offset-p,s._offset+s._length,p,p,"s","w"),_(l,n,a._offset+a._length,s._offset+s._length,p,p,"s","e"))}if(l._context.showAxisDragHandles){if(r===a._mainSubplot){var f=a._mainLinePosition;"top"===a.side&&(f-=p),_(l,n,a._offset+.1*a._length,f,.8*a._length,p,"","ew"),_(l,n,a._offset,f,.1*a._length,p,"","w"),_(l,n,a._offset+.9*a._length,f,.1*a._length,p,"","e")}if(r===s._mainSubplot){var c=s._mainLinePosition;"right"!==s.side&&(c-=p),_(l,n,c,s._offset+.1*s._length,p,.8*s._length,"ns",""),_(l,n,c,s._offset+.9*s._length,p,.1*s._length,"s",""),_(l,n,c,s._offset,p,.1*s._length,"n","")}}});var i=t._hoverlayer.node();i.onmousemove=function(r){r.target=l._fullLayout._lasthover,k.hover(l,r,t._hoversubplot)},i.onclick=function(r){r.target=l._fullLayout._lasthover,k.click(l,r)},i.onmousedown=function(r){l._fullLayout._lasthover.onmousedown(r)},F.updateFx(l)}},F.updateFx=function(l){var t=l._fullLayout;T(t._draggers,"pan"===t.dragmode?"move":"crosshair")}},36632:function(ne,F,e){"use strict";var M=e(24040),k=e(3400),o=e(79811);ne.exports=function(T){return function(_,p){var l=_[T];if(Array.isArray(l))for(var t=M.subplotsRegistry.cartesian,i=t.idRegex,r=p._subplots,n=r.xaxis,a=r.yaxis,s=r.cartesian,u=p._has("cartesian")||p._has("gl2d"),f=0;f<l.length;f++){var c=l[f];if(k.isPlainObject(c)){var y=o.cleanId(c.xref,"x",!1),d=o.cleanId(c.yref,"y",!1),m=i.x.test(y),g=i.y.test(d);if(m||g){u||k.pushUnique(p._basePlotModules,t);var x=!1;m&&-1===n.indexOf(y)&&(n.push(y),x=!0),g&&-1===a.indexOf(d)&&(a.push(d),x=!0),x&&m&&g&&s.push(y+d)}}}}}},57952:function(ne,F,e){"use strict";var M=e(33428),k=e(24040),o=e(3400),T=e(7316),_=e(43616),p=e(84888)._M,l=e(79811),t=e(33816),i=e(9616),r=o.ensureSingle;function n(c,y,d){return o.ensureSingle(c,y,d,function(m){m.datum(d)})}function a(c,y,d,m,g){for(var x,v,b,h=t.traceLayerClasses,S=c._fullLayout,w=S._modules,E={},P=0;P<d.length;P++){var I=d[P][0].trace.zorder||0;E[I]||(E[I]=[]),E[I].push(d[P])}for(var O=[],z=[],U=Object.keys(E).map(Number).sort(o.sorterAsc),R=0;R<U.length;R++)for(var j=U[R],Y=0;Y<w.length;Y++){var B=(x=w[Y]).name,V=k.modules[B].categories;if(V.svg){var q=x.layerName||B+"layer",ie=q+(R?Number(R)+1:""),te=x.plot;b=(v=p(d,te,j))[0],d=v[1],b.length&&O.push({i:h.indexOf(q),zorder:R,className:ie,plotMethod:te,cdModule:b}),V.zoomScale&&z.push("."+ie)}}O.sort(function(J,X){return(J.zorder||0)-(X.zorder||0)||J.i-X.i});var ee=y.plot.selectAll("g.mlayer").data(O,function(J){return J.className});if(ee.enter().append("g").attr("class",function(J){return J.className}).classed("mlayer",!0).classed("rangeplot",y.isRangePlot),ee.exit().remove(),ee.order(),ee.each(function(J){var X=M.select(this),ae=J.className;J.plotMethod(c,y,J.cdModule,X,m,g),-1===t.clipOnAxisFalseQuery.indexOf("."+ae)&&_.setClipUrl(X,y.layerClipId,c)}),S._has("scattergl")&&(x=k.getModule("scattergl"),b=p(d,x)[0],x.plot(c,y,b)),!c._context.staticPlot&&(y._hasClipOnAxisFalse&&(y.clipOnAxisFalseTraces=y.plot.selectAll(t.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),z.length)){var $=y.plot.selectAll(z.join(",")).selectAll(".trace");y.zoomScalePts=$.selectAll("path.point"),y.zoomScaleTxt=$.selectAll(".textpoint")}}function s(c,y){var d=y.plotgroup,m=y.id,g=t.layerValue2layerClass[y.xaxis.layer],x=t.layerValue2layerClass[y.yaxis.layer],v=c._fullLayout._hasOnlyLargeSploms;if(y.mainplot){var b=y.mainplotinfo,h=b.plotgroup,S=m+"-x",w=m+"-y";y.minorGridlayer=b.minorGridlayer,y.gridlayer=b.gridlayer,y.zerolinelayer=b.zerolinelayer,r(b.overlinesBelow,"path",S),r(b.overlinesBelow,"path",w),r(b.overaxesBelow,"g",S),r(b.overaxesBelow,"g",w),y.plot=r(b.overplot,"g",m),r(b.overlinesAbove,"path",S),r(b.overlinesAbove,"path",w),r(b.overaxesAbove,"g",S),r(b.overaxesAbove,"g",w),y.xlines=h.select(".overlines-"+g).select("."+S),y.ylines=h.select(".overlines-"+x).select("."+w),y.xaxislayer=h.select(".overaxes-"+g).select("."+S),y.yaxislayer=h.select(".overaxes-"+x).select("."+w)}else if(v)y.xlines=r(d,"path","xlines-above"),y.ylines=r(d,"path","ylines-above"),y.xaxislayer=r(d,"g","xaxislayer-above"),y.yaxislayer=r(d,"g","yaxislayer-above");else{var E=r(d,"g","layer-subplot");y.shapelayer=r(E,"g","shapelayer"),y.imagelayer=r(E,"g","imagelayer"),y.minorGridlayer=r(d,"g","minor-gridlayer"),y.gridlayer=r(d,"g","gridlayer"),y.zerolinelayer=r(d,"g","zerolinelayer");var P=r(d,"g","layer-between");y.shapelayerBetween=r(P,"g","shapelayer"),y.imagelayerBetween=r(P,"g","imagelayer"),r(d,"path","xlines-below"),r(d,"path","ylines-below"),y.overlinesBelow=r(d,"g","overlines-below"),r(d,"g","xaxislayer-below"),r(d,"g","yaxislayer-below"),y.overaxesBelow=r(d,"g","overaxes-below"),y.plot=r(d,"g","plot"),y.overplot=r(d,"g","overplot"),y.xlines=r(d,"path","xlines-above"),y.ylines=r(d,"path","ylines-above"),y.overlinesAbove=r(d,"g","overlines-above"),r(d,"g","xaxislayer-above"),r(d,"g","yaxislayer-above"),y.overaxesAbove=r(d,"g","overaxes-above"),y.xlines=d.select(".xlines-"+g),y.ylines=d.select(".ylines-"+x),y.xaxislayer=d.select(".xaxislayer-"+g),y.yaxislayer=d.select(".yaxislayer-"+x)}v||(n(y.minorGridlayer,"g",y.xaxis._id),n(y.minorGridlayer,"g",y.yaxis._id),y.minorGridlayer.selectAll("g").map(function(I){return I[0]}).sort(l.idSort),n(y.gridlayer,"g",y.xaxis._id),n(y.gridlayer,"g",y.yaxis._id),y.gridlayer.selectAll("g").map(function(I){return I[0]}).sort(l.idSort)),y.xlines.style("fill","none").classed("crisp",!0),y.ylines.style("fill","none").classed("crisp",!0)}function u(c,y){if(c){var d={};for(var m in c.each(function(b){var h=b[0];M.select(this).remove(),f(h,y),d[h]=!0}),y._plots)for(var g=y._plots[m].overlays||[],x=0;x<g.length;x++){var v=g[x];d[v.id]&&v.plot.selectAll(".trace").remove()}}}function f(c,y){y._draggers.selectAll("g."+c).remove(),y._defs.select("#clip"+y._uid+c+"plot").remove()}F.name="cartesian",F.attr=["xaxis","yaxis"],F.idRoot=["x","y"],F.idRegex=t.idRegex,F.attrRegex=t.attrRegex,F.attributes=e(26720),F.layoutAttributes=e(94724),F.supplyLayoutDefaults=e(67352),F.transitionAxes=e(73736),F.finalizeSubplots=function(c,y){var d,m,g,x=y._subplots,v=x.xaxis,b=x.yaxis,h=x.cartesian,S=h.concat(x.gl2d||[]),w={},E={};for(d=0;d<S.length;d++){var P=S[d].split("y");w[P[0]]=1,E["y"+P[1]]=1}for(d=0;d<v.length;d++)w[m=v[d]]||(g=(c[l.id2name(m)]||{}).anchor,t.idRegex.y.test(g)||(g="y"),h.push(m+g),S.push(m+g),E[g]||(E[g]=1,o.pushUnique(b,g)));for(d=0;d<b.length;d++)E[g=b[d]]||(m=(c[l.id2name(g)]||{}).anchor,t.idRegex.x.test(m)||(m="x"),h.push(m+g),S.push(m+g),w[m]||(w[m]=1,o.pushUnique(v,m)));if(!S.length){for(var I in m="",g="",c)t.attrRegex.test(I)&&("x"===I.charAt(0)?(!m||+I.substr(5)<+m.substr(5))&&(m=I):(!g||+I.substr(5)<+g.substr(5))&&(g=I));m=m?l.name2id(m):"x",g=g?l.name2id(g):"y",v.push(m),b.push(g),h.push(m+g)}},F.plot=function(c,y,d,m){var g,x=c._fullLayout,v=x._subplots.cartesian,b=c.calcdata;if(!Array.isArray(y))for(y=[],g=0;g<b.length;g++)y.push(g);for(g=0;g<v.length;g++){for(var h,S=v[g],w=x._plots[S],E=[],P=0;P<b.length;P++){var I=b[P],O=I[0].trace;O.xaxis+O.yaxis===S&&((-1!==y.indexOf(O.index)||O.carpet)&&(h&&h[0].trace.xaxis+h[0].trace.yaxis===S&&-1!==["tonextx","tonexty","tonext"].indexOf(O.fill)&&-1===E.indexOf(h)&&E.push(h),E.push(I)),h=I)}a(c,w,E,d,m)}},F.clean=function(c,y,d,m){var g,x,v,b=m._plots||{},h=y._plots||{},S=m._subplots||{};if(m._hasOnlyLargeSploms&&!y._hasOnlyLargeSploms)for(v in b)(g=b[v]).plotgroup&&g.plotgroup.remove();var w=m._has&&m._has("gl"),E=y._has&&y._has("gl");if(w&&!E)for(v in b)(g=b[v])._scene&&g._scene.destroy();if(S.xaxis&&S.yaxis){var P=l.listIds({_fullLayout:m});for(x=0;x<P.length;x++){var I=P[x];y[l.id2name(I)]||m._infolayer.selectAll(".g-"+I+"title").remove()}}var O=m._has&&m._has("cartesian"),z=y._has&&y._has("cartesian");if(O&&!z)u(m._cartesianlayer.selectAll(".subplot"),m),m._defs.selectAll(".axesclip").remove(),delete m._axisConstraintGroups,delete m._axisMatchGroups;else if(S.cartesian)for(x=0;x<S.cartesian.length;x++){var U=S.cartesian[x];h[U]||(m._cartesianlayer.selectAll("."+U+",."+U+"-x,."+U+"-y").remove(),f(U,m))}},F.drawFramework=function(c){var y=c._fullLayout,d=function(g){var x,v,b,h,S,w,E=g._fullLayout,P=E._subplots.cartesian,I=P.length,O=[],z=[];for(x=0;x<I;x++){var j=(S=(h=E._plots[b=P[x]]).xaxis)._mainAxis._id+(w=h.yaxis)._mainAxis._id,Y=E._plots[j];h.overlays=[],j!==b&&Y?(h.mainplot=j,h.mainplotinfo=Y,z.push(b)):(h.mainplot=void 0,h.mainplotinfo=void 0,O.push(b))}for(x=0;x<z.length;x++)(h=E._plots[b=z[x]]).mainplotinfo.overlays.push(h);var B=O.concat(z),V=new Array(I);for(x=0;x<I;x++){var q=[b=B[x],(S=(h=E._plots[b]).xaxis).layer,(w=h.yaxis).layer,S.overlaying||"",w.overlaying||""];for(v=0;v<h.overlays.length;v++)q.push(h.overlays[v].id);V[x]=q}return V}(c),m=y._cartesianlayer.selectAll(".subplot").data(d,String);m.enter().append("g").attr("class",function(g){return"subplot "+g[0]}),m.order(),m.exit().call(u,y),m.each(function(g){var x=g[0],v=y._plots[x];v.plotgroup=M.select(this),s(c,v),v.draglayer=r(y._draggers,"g",x)})},F.rangePlot=function(c,y,d){s(c,y),a(c,y,d),T.style(c)},F.toSVG=function(c){var y=c._fullLayout._glimages,d=M.select(c).selectAll(".svg-container");d.filter(function(m,g){return g===d.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var m=this,g=m.toDataURL("image/png");y.append("svg:image").attr({xmlns:i.svg,"xlink:href":g,preserveAspectRatio:"none",x:0,y:0,width:m.style.width,height:m.style.height})})},F.updateFx=e(42464).updateFx},94724:function(ne,F,e){"use strict";var M=e(25376),k=e(22548),o=e(98192).u,T=e(92880).extendFlat,_=e(31780).templatedArray,p=e(29736).descriptionWithDates,l=e(39032).ONEDAY,t=e(33816),i=t.HOUR_PATTERN,r=t.WEEKDAY_PATTERN,n={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},a=T({},n,{values:n.values.slice().concat(["sync"])});function s(S){return{valType:"integer",min:0,dflt:S?5:0,editType:"ticks"}}var u={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},f={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},c={valType:"data_array",editType:"ticks"},y={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function d(S){var w={valType:"number",min:0,editType:"ticks"};return S||(w.dflt=5),w}function m(S){var w={valType:"number",min:0,editType:"ticks"};return S||(w.dflt=1),w}var g={valType:"color",dflt:k.defaultLine,editType:"ticks"},x={valType:"color",dflt:k.lightLine,editType:"ticks"};function v(S){var w={valType:"number",min:0,editType:"ticks"};return S||(w.dflt=1),w}var b=T({},o,{editType:"ticks"}),h={valType:"boolean",editType:"ticks"};ne.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:k.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:M({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"calc"},rangebreaks:_("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[r,i,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:l},editType:"calc"}),tickmode:a,nticks:s(),tick0:u,dtick:f,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:c,ticktext:{valType:"data_array",editType:"ticks"},ticks:y,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:d(),tickwidth:m(),tickcolor:g,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:T({},o,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:M({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:p("tick label")},tickformatstops:_("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:p("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:k.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:h,gridcolor:x,gridwidth:v(),griddash:b,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:k.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:k.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},minor:{tickmode:n,nticks:s("minor"),tick0:u,dtick:f,tickvals:c,ticks:y,ticklen:d("minor"),tickwidth:m("minor"),tickcolor:g,gridcolor:x,gridwidth:v("minor"),griddash:b,showgrid:h,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:M({editType:"ticks"})}}},67352:function(ne,F,e){"use strict";var M=e(3400),k=e(76308),o=e(10624).isUnifiedHover,T=e(41008),_=e(31780),p=e(64859),l=e(94724),t=e(14944),i=e(28336),r=e(71888),n=e(37668),a=e(79811),s=a.id2name,u=a.name2id,f=e(33816).AX_ID_PATTERN,c=e(24040),y=c.traceIs,d=c.getComponentMethod;function m(g,x,v){Array.isArray(g[x])?g[x].push(v):g[x]=[v]}ne.exports=function(g,x,v){var b,h,S=x.autotypenumbers,w={},E={},P={},I={},O={},z={},U={},R={},j={},Y={};for(b=0;b<v.length;b++){var B=v[b];if(y(B,"cartesian")||y(B,"gl2d")){var V,q;if(B.xaxis)V=s(B.xaxis),m(w,V,B);else if(B.xaxes)for(h=0;h<B.xaxes.length;h++)m(w,s(B.xaxes[h]),B);if(B.yaxis)q=s(B.yaxis),m(w,q,B);else if(B.yaxes)for(h=0;h<B.yaxes.length;h++)m(w,s(B.yaxes[h]),B);"funnel"===B.type?"h"===B.orientation?(V&&(E[V]=!0),q&&(U[q]=!0)):q&&(P[q]=!0):"image"===B.type?(q&&(R[q]=!0),V&&(R[V]=!0)):(q&&(O[q]=!0,z[q]=!0),y(B,"carpet")&&("carpet"!==B.type||B._cheater)||V&&(I[V]=!0)),"carpet"===B.type&&B._cheater&&V&&(E[V]=!0),y(B,"2dMap")&&(j[V]=!0,j[q]=!0),y(B,"oriented")&&(Y["h"===B.orientation?q:V]=!0)}}var ie=x._subplots,te=ie.xaxis,ee=ie.yaxis,$=M.simpleMap(te,s),J=M.simpleMap(ee,s),X=$.concat(J),ae=k.background;te.length&&ee.length&&(ae=M.coerce(g,x,p,"plot_bgcolor"));var ce,le,pe,we,Te,ye=k.combine(ae,x.paper_bgcolor);function ve(){Te._traceIndices=(w[ce]||[]).map(function(Pt){return Pt._expandedIndex}),Te._annIndices=[],Te._shapeIndices=[],Te._selectionIndices=[],Te._imgIndices=[],Te._subplotsWith=[],Te._counterAxes=[],Te._name=Te._attr=ce,Te._id=le}function xe(it,Pt){return M.coerce(we,Te,l,it,Pt)}function Ce(it,Pt){return M.coerce2(we,Te,l,it,Pt)}function Oe(it){return"x"===it?ee:te}function be(it,Pt){for(var jt="x"===it?$:J,Ut=[],Rt=0;Rt<jt.length;Rt++){var Je=jt[Rt];Je===Pt||(g[Je]||{}).overlaying||Ut.push(u(Je))}return Ut}var ue={x:Oe("x"),y:Oe("y")},se=ue.x.concat(ue.y),ge={},Ie=[];function ke(){var it=we.matches;f.test(it)&&-1===se.indexOf(it)&&(ge[it]=we.type,Ie=Object.keys(ge))}var Se=T(g,x),Pe=o(Se);for(b=0;b<X.length;b++){le=u(ce=X[b]),pe=ce.charAt(0),M.isPlainObject(g[ce])||(g[ce]={}),we=g[ce],Te=_.newContainer(x,ce,pe+"axis"),ve();var me={hasMinor:!0,letter:pe,font:x.font,outerTicks:j[ce],showGrid:!Y[ce],data:w[ce]||[],bgColor:ye,calendar:x.calendar,automargin:!0,visibleDflt:"x"===pe&&!I[ce]&&E[ce]||"y"===pe&&!O[ce]&&P[ce],reverseDflt:"y"===pe&&(!z[ce]&&U[ce]||R[ce]),autotypenumbersDflt:S,splomStash:((x._splomAxes||{})[pe]||{})[le],noAutotickangles:"y"===pe};xe("uirevision",x.uirevision),t(we,Te,xe,me),i(we,Te,xe,me,x);var Me=Pe&&pe===Se.charAt(0),Le=Ce("spikecolor",Pe?Te.color:void 0),Ne=Ce("spikethickness",Pe?1.5:void 0),Re=Ce("spikedash",Pe?"dot":void 0),He=Ce("spikemode",Pe?"across":void 0),Ze=Ce("spikesnap");xe("showspikes",!!(Me||Le||Ne||Re||He||Ze))||(delete Te.spikecolor,delete Te.spikethickness,delete Te.spikedash,delete Te.spikemode,delete Te.spikesnap);var nt=s(we.overlaying),ft=[0,1];if(void 0!==x[nt]){var ht=s(x[nt].anchor);void 0!==x[ht]&&(ft=x[ht].domain)}n(we,Te,xe,{letter:pe,counterAxes:ue[pe],overlayableAxes:be(pe,ce),grid:x.grid,overlayingDomain:ft}),xe("title.standoff"),ke(),Te._input=we}for(b=0;b<Ie.length;){le=Ie[b++],pe=(ce=s(le)).charAt(0),M.isPlainObject(g[ce])||(g[ce]={}),we=g[ce],Te=_.newContainer(x,ce,pe+"axis"),ve();var Tt={letter:pe,font:x.font,outerTicks:j[ce],showGrid:!Y[ce],data:[],bgColor:ye,calendar:x.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:S,splomStash:((x._splomAxes||{})[pe]||{})[le]};xe("uirevision",x.uirevision),Te.type=ge[le]||"linear",i(we,Te,xe,Tt,x),n(we,Te,xe,{letter:pe,counterAxes:ue[pe],overlayableAxes:be(pe,ce),grid:x.grid}),xe("fixedrange"),ke(),Te._input=we}var At=d("rangeslider","handleDefaults"),_t=d("rangeselector","handleDefaults");for(b=0;b<$.length;b++)we=g[ce=$[b]],Te=x[ce],At(g,x,ce),"date"===Te.type&&_t(we,Te,x,J,Te.calendar),xe("fixedrange");for(b=0;b<J.length;b++){we=g[ce=J[b]];var ot=x[s((Te=x[ce]).anchor)];xe("fixedrange",d("rangeslider","isVisible")(ot))}r.handleDefaults(g,x,{axIds:se.concat(Ie).sort(a.idSort),axHasImage:R})}},42136:function(ne,F,e){"use strict";var M=e(49760).mix,k=e(22548),o=e(3400);ne.exports=function(T,_,p,l){var t=(l=l||{}).dfltColor;function i(g,x){return o.coerce2(T,_,l.attributes,g,x)}var r=i("linecolor",t),n=i("linewidth");p("showline",l.showLine||!!r||!!n)||(delete _.linecolor,delete _.linewidth);var a=i("gridcolor",M(t,l.bgColor,l.blend||k.lightFraction).toRgbString()),s=i("gridwidth"),u=i("griddash");if(p("showgrid",l.showGrid||!!a||!!s||!!u)||(delete _.gridcolor,delete _.gridwidth,delete _.griddash),l.hasMinor){var f=i("minor.gridcolor",M(_.gridcolor,l.bgColor,67).toRgbString()),c=i("minor.gridwidth",_.gridwidth||1),y=i("minor.griddash",_.griddash||"solid");p("minor.showgrid",!!f||!!c||!!y)||(delete _.minor.gridcolor,delete _.minor.gridwidth,delete _.minor.griddash)}if(!l.noZeroLine){var d=i("zerolinecolor",t),m=i("zerolinewidth");p("zeroline",l.showGrid||!!d||!!m)||(delete _.zerolinecolor,delete _.zerolinewidth)}}},37668:function(ne,F,e){"use strict";var M=e(38248),k=e(3400);ne.exports=function(o,T,_,p){var l,t,i,r,n,a,s=p.counterAxes||[],u=p.overlayableAxes||[],f=p.letter,c=p.grid,y=p.overlayingDomain;c&&(l=c._anchors[T._id],(t=c._domains[f][c._axisMap[T._id]])&&(i=c[f+"side"].split(" ")[0],r=c.domain[f]["right"===i||"top"===i?1:0])),t=t||[0,1],l=l||(M(o.position)?"free":s[0]||"free"),i=i||("x"===f?"bottom":"left"),r=r||0,n=0,a=!1;var d=k.coerce(o,T,{anchor:{valType:"enumerated",values:["free"].concat(s),dflt:l}},"anchor"),m=k.coerce(o,T,{side:{valType:"enumerated",values:"x"===f?["bottom","top"]:["left","right"],dflt:i}},"side");"free"===d&&("y"===f&&(_("autoshift")&&(r="left"===m?y[0]:y[1],a=!T.automargin||T.automargin,n="left"===m?-3:3),_("shift",n)),_("position",r)),_("automargin",a);var g=!1;if(u.length&&(g=k.coerce(o,T,{overlaying:{valType:"enumerated",values:[!1].concat(u),dflt:!1}},"overlaying")),!g){var x=_("domain",t);x[0]>x[1]-.000244140625&&(T.domain=t),k.noneOrAll(o.domain,T.domain,t),"sync"===T.tickmode&&(T.tickmode="auto")}return _("layer"),T}},42568:function(ne,F,e){"use strict";var M=e(85024);ne.exports=function(k,o,T,_,p){p||(p={});var l=p.tickSuffixDflt,t=M(k);T("tickprefix")&&T("showtickprefix",t),T("ticksuffix",l)&&T("showticksuffix",t)}},96312:function(ne,F,e){"use strict";var M=e(76808);ne.exports=function(k,o,T,_){var l=o.type||(o._template||{}).type||"-";T("minallowed"),T("maxallowed");var t,i=T("range");i||_.noInsiderange||"log"===l||(!(t=T("insiderange"))||null!==t[0]&&null!==t[1]||(o.insiderange=!1,t=void 0),t&&(i=T("range",t)));var r,n=o.getAutorangeDflt(i,_),a=T("autorange",n);!i||(null!==i[0]||null!==i[1])&&(null!==i[0]&&null!==i[1]||"reversed"!==a&&!0!==a)&&(null===i[0]||"min"!==a&&"max reversed"!==a)&&(null===i[1]||"max"!==a&&"min reversed"!==a)||(i=void 0,delete o.range,o.autorange=!0,r=!0),r||(a=T("autorange",n=o.getAutorangeDflt(i,_))),a&&(M(T,a,i),"linear"!==l&&"-"!==l||T("rangemode")),o.cleanRange()}},21160:function(ne,F,e){"use strict";var M=e(84284).FROM_BL;ne.exports=function(k,o,T){void 0===T&&(T=M[k.constraintoward||"center"]);var _=[k.r2l(k.range[0]),k.r2l(k.range[1])],p=_[0]+(_[1]-_[0])*T;k.range=k._input.range=[k.l2r(p+(_[0]-p)*o),k.l2r(p+(_[1]-p)*o)],k.setScale()}},78344:function(ne,F,e){"use strict";var M=e(33428),k=e(94336).E9,o=e(3400),T=o.numberFormat,_=e(38248),p=o.cleanNumber,l=o.ms2DateTime,t=o.dateTime2ms,i=o.ensureNumber,r=o.isArrayOrTypedArray,n=e(39032),a=n.FP_SAFE,s=n.BADNUM,u=n.LOG_CLIP,f=n.ONEWEEK,c=n.ONEDAY,y=n.ONEHOUR,d=n.ONEMIN,m=n.ONESEC,g=e(79811),x=e(33816),v=x.HOUR_PATTERN,b=x.WEEKDAY_PATTERN;function h(w){return Math.pow(10,w)}function S(w){return null!=w}ne.exports=function(w,E){E=E||{};var P=w._id||"x",I=P.charAt(0);function O(X,ae){if(X>0)return Math.log(X)/Math.LN10;if(X<=0&&ae&&w.range&&2===w.range.length){var ce=w.range[0],le=w.range[1];return.5*(ce+le-2*u*Math.abs(ce-le))}return s}function z(X,ae,ce,le){if((le||{}).msUTC&&_(X))return+X;var pe=t(X,ce||w.calendar);if(pe===s){if(!_(X))return s;X=+X;var we=Math.floor(10*o.mod(X+.05,1)),Te=Math.round(X-we/10);pe=t(new Date(Te))+we/10}return pe}function U(X,ae,ce){return l(X,ae,ce||w.calendar)}function R(X){return w._categories[Math.round(X)]}function j(X){if(S(X)){if(void 0===w._categoriesMap&&(w._categoriesMap={}),void 0!==w._categoriesMap[X])return w._categoriesMap[X];w._categories.push("number"==typeof X?String(X):X);var ae=w._categories.length-1;return w._categoriesMap[X]=ae,ae}return s}function Y(X){if(w._categoriesMap)return w._categoriesMap[X]}function B(X){var ae=Y(X);return void 0!==ae?ae:_(X)?+X:void 0}function V(X){return _(X)?+X:Y(X)}function q(X,ae,ce){return M.round(ce+ae*X,2)}function ie(X,ae,ce){return(X-ce)/ae}var te=function(X){return _(X)?q(X,w._m,w._b):s},ee=function(X){return ie(X,w._m,w._b)};if(w.rangebreaks){var $="y"===I;te=function(X){if(!_(X))return s;var ae=w._rangebreaks.length;if(!ae)return q(X,w._m,w._b);var ce=$;w.range[0]>w.range[1]&&(ce=!ce);for(var le=ce?-1:1,pe=le*X,we=0,Te=0;Te<ae;Te++){var ye=le*w._rangebreaks[Te].min,ve=le*w._rangebreaks[Te].max;if(pe<ye)break;if(!(pe>ve)){we=pe<(ye+ve)/2?Te:Te+1;break}we=Te+1}var xe=w._B[we]||0;return isFinite(xe)?q(X,w._m2,xe):0},ee=function(X){var ae=w._rangebreaks.length;if(!ae)return ie(X,w._m,w._b);for(var ce=0,le=0;le<ae&&!(X<w._rangebreaks[le].pmin);le++)X>w._rangebreaks[le].pmax&&(ce=le+1);return ie(X,w._m2,w._B[ce])}}w.c2l="log"===w.type?O:i,w.l2c="log"===w.type?h:i,w.l2p=te,w.p2l=ee,w.c2p="log"===w.type?function(X,ae){return te(O(X,ae))}:te,w.p2c="log"===w.type?function(X){return h(ee(X))}:ee,-1!==["linear","-"].indexOf(w.type)?(w.d2r=w.r2d=w.d2c=w.r2c=w.d2l=w.r2l=p,w.c2d=w.c2r=w.l2d=w.l2r=i,w.d2p=w.r2p=function(X){return w.l2p(p(X))},w.p2d=w.p2r=ee,w.cleanPos=i):"log"===w.type?(w.d2r=w.d2l=function(X,ae){return O(p(X),ae)},w.r2d=w.r2c=function(X){return h(p(X))},w.d2c=w.r2l=p,w.c2d=w.l2r=i,w.c2r=O,w.l2d=h,w.d2p=function(X,ae){return w.l2p(w.d2r(X,ae))},w.p2d=function(X){return h(ee(X))},w.r2p=function(X){return w.l2p(p(X))},w.p2r=ee,w.cleanPos=i):"date"===w.type?(w.d2r=w.r2d=o.identity,w.d2c=w.r2c=w.d2l=w.r2l=z,w.c2d=w.c2r=w.l2d=w.l2r=U,w.d2p=w.r2p=function(X,ae,ce){return w.l2p(z(X,0,ce))},w.p2d=w.p2r=function(X,ae,ce){return U(ee(X),ae,ce)},w.cleanPos=function(X){return o.cleanDate(X,s,w.calendar)}):"category"===w.type?(w.d2c=w.d2l=j,w.r2d=w.c2d=w.l2d=R,w.d2r=w.d2l_noadd=B,w.r2c=function(X){var ae=V(X);return void 0!==ae?ae:w.fraction2r(.5)},w.l2r=w.c2r=i,w.r2l=V,w.d2p=function(X){return w.l2p(w.r2c(X))},w.p2d=function(X){return R(ee(X))},w.r2p=w.d2p,w.p2r=ee,w.cleanPos=function(X){return"string"==typeof X&&""!==X?X:i(X)}):"multicategory"===w.type&&(w.r2d=w.c2d=w.l2d=R,w.d2r=w.d2l_noadd=B,w.r2c=function(X){var ae=B(X);return void 0!==ae?ae:w.fraction2r(.5)},w.r2c_just_indices=Y,w.l2r=w.c2r=i,w.r2l=B,w.d2p=function(X){return w.l2p(w.r2c(X))},w.p2d=function(X){return R(ee(X))},w.r2p=w.d2p,w.p2r=ee,w.cleanPos=function(X){return Array.isArray(X)||"string"==typeof X&&""!==X?X:i(X)},w.setupMultiCategory=function(X){var ae,ce,le=w._traceIndices,pe=w._matchGroup;if(pe&&0===w._categories.length)for(var we in pe)if(we!==P){var Te=E[g.id2name(we)];le=le.concat(Te._traceIndices)}var ye=[[0,{}],[0,{}]],ve=[];for(ae=0;ae<le.length;ae++){var xe=X[le[ae]];if(I in xe){var Ce=xe[I],Oe=xe._length||o.minRowLength(Ce);if(r(Ce[0])&&r(Ce[1]))for(ce=0;ce<Oe;ce++){var be=Ce[0][ce],ue=Ce[1][ce];S(be)&&S(ue)&&(ve.push([be,ue]),be in ye[0][1]||(ye[0][1][be]=ye[0][0]++),ue in ye[1][1]||(ye[1][1][ue]=ye[1][0]++))}}}for(ve.sort(function(se,ge){var Ie=ye[0][1],ke=Ie[se[0]]-Ie[ge[0]];if(ke)return ke;var Se=ye[1][1];return Se[se[1]]-Se[ge[1]]}),ae=0;ae<ve.length;ae++)j(ve[ae])}),w.fraction2r=function(X){var ae=w.r2l(w.range[0]),ce=w.r2l(w.range[1]);return w.l2r(ae+X*(ce-ae))},w.r2fraction=function(X){var ae=w.r2l(w.range[0]),ce=w.r2l(w.range[1]);return(w.r2l(X)-ae)/(ce-ae)},w.limitRange=function(X){var ae=w.minallowed,ce=w.maxallowed;if(void 0!==ae||void 0!==ce){X||(X="range");var le=o.nestedProperty(w,X).get(),pe=o.simpleMap(le,w.r2l),we=pe[1]<pe[0];we&&pe.reverse();var Te=o.simpleMap([ae,ce],w.r2l);if(void 0!==ae&&pe[0]<Te[0]&&(le[we?1:0]=ae),void 0!==ce&&pe[1]>Te[1]&&(le[we?0:1]=ce),le[0]===le[1]){var ye=w.l2r(ae),ve=w.l2r(ce);if(void 0!==ae){var xe=ye+1;void 0!==ce&&(xe=Math.min(xe,ve)),le[we?1:0]=xe}if(void 0!==ce){var Ce=ve+1;void 0!==ae&&(Ce=Math.max(Ce,ye)),le[we?0:1]=Ce}}}},w.cleanRange=function(X,ae){w._cleanRange(X,ae),w.limitRange(X)},w._cleanRange=function(X,ae){ae||(ae={}),X||(X="range");var ce,le,pe=o.nestedProperty(w,X).get();if(le=(le="date"===w.type?o.dfltRange(w.calendar):"y"===I?x.DFLTRANGEY:"realaxis"===w._name?[0,1]:ae.dfltRange||x.DFLTRANGEX).slice(),"tozero"!==w.rangemode&&"nonnegative"!==w.rangemode||(le[0]=0),pe&&2===pe.length){var we=null===pe[0],Te=null===pe[1];for("date"!==w.type||w.autorange||(pe[0]=o.cleanDate(pe[0],s,w.calendar),pe[1]=o.cleanDate(pe[1],s,w.calendar)),ce=0;ce<2;ce++)if("date"===w.type){if(!o.isDateTime(pe[ce],w.calendar)){w[X]=le;break}if(w.r2l(pe[0])===w.r2l(pe[1])){var ye=o.constrain(w.r2l(pe[0]),o.MIN_MS+1e3,o.MAX_MS-1e3);pe[0]=w.l2r(ye-1e3),pe[1]=w.l2r(ye+1e3);break}}else{if(!_(pe[ce])){if(we||Te||!_(pe[1-ce])){w[X]=le;break}pe[ce]=pe[1-ce]*(ce?10:.1)}if(pe[ce]<-a?pe[ce]=-a:pe[ce]>a&&(pe[ce]=a),pe[0]===pe[1]){var ve=Math.max(1,Math.abs(1e-6*pe[0]));pe[0]-=ve,pe[1]+=ve}}}else o.nestedProperty(w,X).set(le)},w.setScale=function(X){var ae=E._size;if(w.overlaying){var ce=g.getFromId({_fullLayout:E},w.overlaying);w.domain=ce.domain}var le=X&&w._r?"_r":"range",pe=w.calendar;w.cleanRange(le);var we,Te,ye=w.r2l(w[le][0],pe),ve=w.r2l(w[le][1],pe),xe="y"===I;if(xe?(w._offset=ae.t+(1-w.domain[1])*ae.h,w._length=ae.h*(w.domain[1]-w.domain[0]),w._m=w._length/(ye-ve),w._b=-w._m*ve):(w._offset=ae.l+w.domain[0]*ae.w,w._length=ae.w*(w.domain[1]-w.domain[0]),w._m=w._length/(ve-ye),w._b=-w._m*ye),w._rangebreaks=[],w._lBreaks=0,w._m2=0,w._B=[],w.rangebreaks&&(w._rangebreaks=w.locateBreaks(Math.min(ye,ve),Math.max(ye,ve)),w._rangebreaks.length)){for(we=0;we<w._rangebreaks.length;we++)Te=w._rangebreaks[we],w._lBreaks+=Math.abs(Te.max-Te.min);var Ce=xe;ye>ve&&(Ce=!Ce),Ce&&w._rangebreaks.reverse();var Oe=Ce?-1:1;for(w._m2=Oe*w._length/(Math.abs(ve-ye)-w._lBreaks),w._B.push(-w._m2*(xe?ve:ye)),we=0;we<w._rangebreaks.length;we++)w._B.push(w._B[w._B.length-1]-Oe*w._m2*((Te=w._rangebreaks[we]).max-Te.min));for(we=0;we<w._rangebreaks.length;we++)(Te=w._rangebreaks[we]).pmin=te(Te.min),Te.pmax=te(Te.max)}if(!isFinite(w._m)||!isFinite(w._b)||w._length<0)throw E._replotting=!1,new Error("Something went wrong with axis scaling")},w.maskBreaks=function(X){var ae,ce,le,pe,we,Te=w.rangebreaks||[];Te._cachedPatterns||(Te._cachedPatterns=Te.map(function(be){return be.enabled&&be.bounds?o.simpleMap(be.bounds,be.pattern?p:w.d2c):null})),Te._cachedValues||(Te._cachedValues=Te.map(function(be){return be.enabled&&be.values?o.simpleMap(be.values,w.d2c).sort(o.sorterAsc):null}));for(var ye=0;ye<Te.length;ye++){var ve=Te[ye];if(ve.enabled)if(ve.bounds){switch(ce=(ae=Te._cachedPatterns[ye])[0],le=ae[1],ve.pattern){case b:pe=(we=new Date(X)).getUTCDay(),ce>le&&(le+=7,pe<ce&&(pe+=7));break;case v:pe=(we=new Date(X)).getUTCHours()+(we.getUTCMinutes()/60+we.getUTCSeconds()/3600+we.getUTCMilliseconds()/36e5),ce>le&&(le+=24,pe<ce&&(pe+=24));break;case"":pe=X}if(pe>=ce&&pe<le)return s}else for(var Ce=Te._cachedValues[ye],Oe=0;Oe<Ce.length;Oe++)if(le=(ce=Ce[Oe])+ve.dvalue,X>=ce&&X<le)return s}return X},w.locateBreaks=function(X,ae){var ce,le,pe,we,Te=[];if(!w.rangebreaks)return Te;var ye=w.rangebreaks.slice().sort(function(Se,Pe){return Se.pattern===b&&Pe.pattern===v?-1:Pe.pattern===b&&Se.pattern===v?1:0}),ve=function(Se,Pe){if((Se=o.constrain(Se,X,ae))!==(Pe=o.constrain(Pe,X,ae))){for(var Fe=!0,Be=0;Be<Te.length;Be++){var me=Te[Be];Se<me.max&&Pe>=me.min&&(Se<me.min&&(me.min=Se),Pe>me.max&&(me.max=Pe),Fe=!1)}Fe&&Te.push({min:Se,max:Pe})}};for(ce=0;ce<ye.length;ce++){var xe=ye[ce];if(xe.enabled)if(xe.bounds){var Ce=X,Oe=ae;xe.pattern&&(Ce=Math.floor(Ce)),pe=(le=o.simpleMap(xe.bounds,xe.pattern?p:w.r2l))[0],we=le[1];var be,ue,se=new Date(Ce);switch(xe.pattern){case b:ue=f,be=(we-pe+(we<pe?7:0))*c,Ce+=pe*c-(se.getUTCDay()*c+se.getUTCHours()*y+se.getUTCMinutes()*d+se.getUTCSeconds()*m+se.getUTCMilliseconds());break;case v:ue=c,be=(we-pe+(we<pe?24:0))*y,Ce+=pe*y-(se.getUTCHours()*y+se.getUTCMinutes()*d+se.getUTCSeconds()*m+se.getUTCMilliseconds());break;default:Ce=Math.min(le[0],le[1]),be=ue=(Oe=Math.max(le[0],le[1]))-Ce}for(var ge=Ce;ge<Oe;ge+=ue)ve(ge,ge+be)}else for(var Ie=o.simpleMap(xe.values,w.d2c),ke=0;ke<Ie.length;ke++)ve(pe=Ie[ke],we=pe+xe.dvalue)}return Te.sort(function(Se,Pe){return Se.min-Pe.min}),Te},w.makeCalcdata=function(X,ae,ce){var le,pe,we,Te,ye=w.type,ve="date"===ye&&X[ae+"calendar"];if(ae in X){if(le=X[ae],Te=X._length||o.minRowLength(le),o.isTypedArray(le)&&("linear"===ye||"log"===ye)){if(Te===le.length)return le;if(le.subarray)return le.subarray(0,Te)}if("multicategory"===ye)return function(Oe,be){for(var ue=new Array(be),se=0;se<be;se++)ue[se]=Y([(Oe[0]||[])[se],(Oe[1]||[])[se]]);return ue}(le,Te);for(pe=new Array(Te),we=0;we<Te;we++)pe[we]=w.d2c(le[we],0,ve,ce)}else{var xe=ae+"0"in X?w.d2c(X[ae+"0"],0,ve):0,Ce=X["d"+ae]?Number(X["d"+ae]):1;for(le=X[{x:"y",y:"x"}[ae]],Te=X._length||le.length,pe=new Array(Te),we=0;we<Te;we++)pe[we]=xe+we*Ce}if(w.rangebreaks)for(we=0;we<Te;we++)pe[we]=w.maskBreaks(pe[we]);return pe},w.isValidRange=function(X,ae){return Array.isArray(X)&&2===X.length&&(ae&&null===X[0]||_(w.r2l(X[0])))&&(ae&&null===X[1]||_(w.r2l(X[1])))},w.getAutorangeDflt=function(X,ae){var ce=!w.isValidRange(X,"nullOk");return ce&&ae&&ae.reverseDflt?ce="reversed":X&&(null===X[0]&&null===X[1]?ce=!0:null===X[0]&&null!==X[1]?ce="min":null!==X[0]&&null===X[1]&&(ce="max")),ce},w.isReversed=function(){var X=w.autorange;return"reversed"===X||"min reversed"===X||"max reversed"===X},w.isPtWithinRange=function(X,ae){var ce=w.c2l(X[I],null,ae),le=w.r2l(w.range[0]),pe=w.r2l(w.range[1]);return le<pe?le<=ce&&ce<=pe:pe<=ce&&ce<=le},w._emptyCategories=function(){w._categories=[],w._categoriesMap={}},w.clearCalc=function(){var X=w._matchGroup;if(X){var ae=null,ce=null;for(var le in X){var pe=E[g.id2name(le)];if(pe._categories){ae=pe._categories,ce=pe._categoriesMap;break}}ae&&ce?(w._categories=ae,w._categoriesMap=ce):w._emptyCategories()}else w._emptyCategories();if(w._initialCategories)for(var we=0;we<w._initialCategories.length;we++)j(w._initialCategories[we])},w.sortByInitialCategories=function(){var X=[];if(w._emptyCategories(),w._initialCategories)for(var ae=0;ae<w._initialCategories.length;ae++)j(w._initialCategories[ae]);X=X.concat(w._traceIndices);var ce=w._matchGroup;for(var le in ce)if(P!==le){var pe=E[g.id2name(le)];pe._categories=w._categories,pe._categoriesMap=w._categoriesMap,X=X.concat(pe._traceIndices)}return X};var J=E._d3locale;"date"===w.type&&(w._dateFormat=J?J.timeFormat:k,w._extraFormat=E._extraFormat),w._separators=E.separators,w._numFormat=J?J.numberFormat:T,delete w._minDtick,delete w._forceTick0}},85024:function(ne){"use strict";ne.exports=function(F){var e=["showexponent","showtickprefix","showticksuffix"].filter(function(M){return void 0!==F[M]});if(e.every(function(M){return F[M]===F[e[0]]})||1===e.length)return F[e[0]]}},95936:function(ne,F,e){"use strict";var M=e(3400),k=e(76308).contrast,o=e(94724),T=e(85024),_=e(51272);function p(l,t){function i(r,n){return M.coerce(l,t,o.tickformatstops,r,n)}i("enabled")&&(i("dtickrange"),i("value"))}ne.exports=function(l,t,i,r,n){n||(n={});var a=i("labelalias");M.isPlainObject(a)||delete t.labelalias;var s=T(l);if(i("showticklabels")){var u=n.font||{},f=t.color,c=-1!==(t.ticklabelposition||"").indexOf("inside")?k(n.bgColor):f&&f!==o.color.dflt?f:u.color;if(M.coerceFont(i,"tickfont",u,{overrideDflt:{color:c}}),n.noTicklabelstep||"multicategory"===r||"log"===r||i("ticklabelstep"),!n.noAng){var y=i("tickangle");n.noAutotickangles||"auto"!==y||i("autotickangles")}if("category"!==r){var d=i("tickformat");_(l,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:p}),t.tickformatstops.length||delete t.tickformatstops,n.noExp||d||"date"===r||(i("showexponent",s),i("exponentformat"),i("minexponent"),i("separatethousands"))}}}},25404:function(ne,F,e){"use strict";var M=e(3400),k=e(94724);ne.exports=function(o,T,_,p){var l=p.isMinor,t=l?o.minor||{}:o,i=l?T.minor:T,r=l?k.minor:k,n=l?"minor.":"",a=M.coerce2(t,i,r,"ticklen",l?.6*(T.ticklen||5):void 0),s=M.coerce2(t,i,r,"tickwidth",l?T.tickwidth||1:void 0),u=M.coerce2(t,i,r,"tickcolor",(l?T.tickcolor:void 0)||i.color);_(n+"ticks",!l&&p.outerTicks||a||s||u?"outside":"")||(delete i.ticklen,delete i.tickwidth,delete i.tickcolor)}},26332:function(ne,F,e){"use strict";var M=e(98728),k=e(3400).isArrayOrTypedArray,o=e(38116).isTypedArraySpec,T=e(38116).decodeTypedArraySpec;ne.exports=function(_,p,l,t,i){i||(i={});var r=i.isMinor,n=r?_.minor||{}:_,a=r?p.minor:p,s=r?"minor.":"";function u(g){var x=n[g];return o(x)&&(x=T(x)),void 0!==x?x:(a._template||{})[g]}var f=u("tick0"),c=u("dtick"),y=u("tickvals"),d=l(s+"tickmode",k(y)?"array":c?"linear":"auto");if("auto"===d||"sync"===d)l(s+"nticks");else if("linear"===d){var m=a.dtick=M.dtick(c,t);a.tick0=M.tick0(f,t,p.calendar,m)}else"multicategory"!==t&&(void 0===l(s+"tickvals")?a.tickmode="auto":r||l("ticktext"))}},73736:function(ne,F,e){"use strict";var M=e(33428),k=e(24040),o=e(3400),T=e(43616),_=e(54460);ne.exports=function(p,l,t,i){var r=p._fullLayout;if(0!==l.length){var n,a,s,u;i&&(n=i());var f=M.ease(t.easing);return p._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(u),u=null,function(){for(var d={},m=0;m<l.length;m++){var g=l[m],v=g.plotinfo.yaxis;g.xr0&&(d[g.plotinfo.xaxis._name+".range"]=g.xr0.slice()),g.yr0&&(d[v._name+".range"]=g.yr0.slice())}return k.call("relayout",p,d).then(function(){for(var b=0;b<l.length;b++)c(l[b].plotinfo)})}()}),a=Date.now(),u=window.requestAnimationFrame(function d(){s=Date.now();for(var m=Math.min(1,(s-a)/t.duration),g=f(m),x=0;x<l.length;x++)y(l[x],g);s-a>t.duration?(function(){for(var v={},b=0;b<l.length;b++){var h=l[b],w=h.plotinfo.yaxis;h.xr1&&(v[h.plotinfo.xaxis._name+".range"]=h.xr1.slice()),h.yr1&&(v[w._name+".range"]=h.yr1.slice())}n&&n(),k.call("relayout",p,v).then(function(){for(var E=0;E<l.length;E++)c(l[E].plotinfo)})}(),u=window.cancelAnimationFrame(d)):u=window.requestAnimationFrame(d)}),Promise.resolve()}function c(d){var m=d.xaxis,g=d.yaxis;r._defs.select("#"+d.clipId+"> rect").call(T.setTranslate,0,0).call(T.setScale,1,1),d.plot.call(T.setTranslate,m._offset,g._offset).call(T.setScale,1,1);var x=d.plot.selectAll(".scatterlayer .trace");x.selectAll(".point").call(T.setPointGroupScale,1,1),x.selectAll(".textpoint").call(T.setTextPointsScale,1,1),x.call(T.hideOutsideRangePoints,d)}function y(d,m){var g=d.plotinfo,x=g.xaxis,v=g.yaxis,b=x._length,h=v._length,S=!!d.xr1,w=!!d.yr1,E=[];if(S){var P=o.simpleMap(d.xr0,x.r2l),I=o.simpleMap(d.xr1,x.r2l),O=P[1]-P[0],z=I[1]-I[0];E[0]=(P[0]*(1-m)+m*I[0]-P[0])/(P[1]-P[0])*b,E[2]=b*(1-m+m*z/O),x.range[0]=x.l2r(P[0]*(1-m)+m*I[0]),x.range[1]=x.l2r(P[1]*(1-m)+m*I[1])}else E[0]=0,E[2]=b;if(w){var U=o.simpleMap(d.yr0,v.r2l),R=o.simpleMap(d.yr1,v.r2l),j=U[1]-U[0],Y=R[1]-R[0];E[1]=(U[1]*(1-m)+m*R[1]-U[1])/(U[0]-U[1])*h,E[3]=h*(1-m+m*Y/j),v.range[0]=x.l2r(U[0]*(1-m)+m*R[0]),v.range[1]=v.l2r(U[1]*(1-m)+m*R[1])}else E[1]=0,E[3]=h;_.drawOne(p,x,{skipTitle:!0}),_.drawOne(p,v,{skipTitle:!0}),_.redrawComponents(p,[x._id,v._id]);var B=S?b/E[2]:1,V=w?h/E[3]:1,$=x._offset-(S?E[0]/E[2]*b:0),J=v._offset-(w?E[1]/E[3]*h:0);g.clipRect.call(T.setTranslate,S?E[0]:0,w?E[1]:0).call(T.setScale,1/B,1/V),g.plot.call(T.setTranslate,$,J).call(T.setScale,B,V),T.setPointGroupScale(g.zoomScalePts,1/B,1/V),T.setTextPointsScale(g.zoomScaleTxt,1/B,1/V)}_.redrawComponents(p)}},14944:function(ne,F,e){"use strict";var M=e(24040).traceIs,k=e(52976);function o(_){return{v:"x",h:"y"}[_.orientation||"v"]}function T(_,p){var l=o(_),t=M(_,"box-violin"),i=M(_._fullInput||{},"candlestick");return t&&!i&&p===l&&void 0===_[l]&&void 0===_[l+"0"]}ne.exports=function(_,p,l,t){l("autotypenumbers",t.autotypenumbersDflt),"-"===l("type",(t.splomStash||{}).type)&&(function(i,r){if("-"===i.type){var n,a=i._id,s=a.charAt(0);-1!==a.indexOf("scene")&&(a=s);var u=function(v,b,h){for(var S=0;S<v.length;S++){var w=v[S];if("splom"===w.type&&w._length>0&&(w["_"+h+"axes"]||{})[b]||(w[h+"axis"]||h)===b&&(T(w,h)||(w[h]||[]).length||w[h+"0"]))return w}}(r,a,s);if(u)if("histogram"!==u.type||s!=={v:"y",h:"x"}[u.orientation||"v"]){var f=s+"calendar",c=u[f],y={noMultiCategory:!M(u,"cartesian")||M(u,"noMultiCategory")};if("box"===u.type&&u._hasPreCompStats&&s==={h:"x",v:"y"}[u.orientation||"v"]&&(y.noMultiCategory=!0),y.autotypenumbers=i.autotypenumbers,T(u,s)){var d=o(u),m=[];for(n=0;n<r.length;n++){var g=r[n];M(g,"box-violin")&&(g[s+"axis"]||s)===a&&(m.push(void 0!==g[d]?g[d][0]:void 0!==g.name?g.name:"text"),g[f]!==c&&(c=void 0))}i.type=k(m,c,y)}else if("splom"===u.type){var x=u.dimensions[u._axesDim[a]];x.visible&&(i.type=k(x.values,c,y))}else i.type=k(u[s]||[u[s+"0"]],c,y)}else i.type="linear"}}(p,t.data),"-"===p.type?p.type="linear":_.type=p.type)}},62460:function(ne,F,e){"use strict";var M=e(24040),k=e(3400);function o(l,t,i){var r,n,a,s=!1;if("data"===t.type)r=l._fullData[null!==t.traces?t.traces[0]:0];else{if("layout"!==t.type)return!1;r=l._fullLayout}return n=k.nestedProperty(r,t.prop).get(),(a=i[t.type]=i[t.type]||{}).hasOwnProperty(t.prop)&&a[t.prop]!==n&&(s=!0),a[t.prop]=n,{changed:s,value:n}}function T(l,t){var i=[],r=t[0],n={};if("string"==typeof r)n[r]=t[1];else{if(!k.isPlainObject(r))return i;n=r}return p(n,function(a,s,u){i.push({type:"layout",prop:a,value:u})},"",0),i}function _(l,t){var i,r,n,a,s=[];if(n=t[1],i=t[2],a={},"string"==typeof(r=t[0]))a[r]=n;else{if(!k.isPlainObject(r))return s;a=r,void 0===i&&(i=n)}return void 0===i&&(i=null),p(a,function(u,f,c){var y,d;if(Array.isArray(c)){d=c.slice();var m=Math.min(d.length,l.data.length);i&&(m=Math.min(m,i.length)),y=[];for(var g=0;g<m;g++)y[g]=i?i[g]:g}else d=c,y=i?i.slice():null;if(null===y)Array.isArray(d)&&(d=d[0]);else if(Array.isArray(y)){if(!Array.isArray(d)){var x=d;d=[];for(var v=0;v<y.length;v++)d[v]=x}d.length=Math.min(y.length,d.length)}s.push({type:"data",prop:u,traces:y,value:d})},"",0),s}function p(l,t,i,r){Object.keys(l).forEach(function(n){var a=l[n];if("_"!==n[0]){var s=i+(r>0?".":"")+n;k.isPlainObject(a)?p(a,t,s,r+1):t(s,n,a)}})}F.manageCommandObserver=function(l,t,i,r){var n={},a=!0;t&&t._commandObserver&&(n=t._commandObserver),n.cache||(n.cache={}),n.lookupTable={};var s=F.hasSimpleAPICommandBindings(l,i,n.lookupTable);if(t&&t._commandObserver){if(s)return n;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,n}if(s){o(l,s,n.cache),n.check=function(){if(a){var c=o(l,s,n.cache);return c.changed&&r&&void 0!==n.lookupTable[c.value]&&(n.disable(),Promise.resolve(r({value:c.value,type:s.type,prop:s.prop,traces:s.traces,index:n.lookupTable[c.value]})).then(n.enable,n.enable)),c.changed}};for(var u=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],f=0;f<u.length;f++)l._internalOn(u[f],n.check);n.remove=function(){for(var c=0;c<u.length;c++)l._removeInternalListener(u[c],n.check)}}else k.log("Unable to automatically bind plot updates to API command"),n.lookupTable={},n.remove=function(){};return n.disable=function(){a=!1},n.enable=function(){a=!0},t&&(t._commandObserver=n),n},F.hasSimpleAPICommandBindings=function(l,t,i){var r,n,a=t.length;for(r=0;r<a;r++){var s,u=t[r],f=u.method,c=u.args;if(Array.isArray(c)||(c=[]),!f)return!1;var y=F.computeAPICommandBindings(l,f,c);if(1!==y.length)return!1;if(n){if((s=y[0]).type!==n.type||s.prop!==n.prop)return!1;if(Array.isArray(n.traces)){if(!Array.isArray(s.traces))return!1;s.traces.sort();for(var d=0;d<n.traces.length;d++)if(n.traces[d]!==s.traces[d])return!1}else if(s.prop!==n.prop)return!1}else n=y[0],Array.isArray(n.traces)&&n.traces.sort();var m=(s=y[0]).value;if(Array.isArray(m)){if(1!==m.length)return!1;m=m[0]}i&&(i[m]=r)}return n},F.executeAPICommand=function(l,t,i){if("skip"===t)return Promise.resolve();var r=M.apiMethodRegistry[t],n=[l];Array.isArray(i)||(i=[]);for(var a=0;a<i.length;a++)n.push(i[a]);return r.apply(null,n).catch(function(s){return k.warn("API call to Plotly."+t+" rejected.",s),Promise.reject(s)})},F.computeAPICommandBindings=function(l,t,i){var r,a;switch(Array.isArray(i)||(i=[]),t){case"restyle":r=_(l,i);break;case"relayout":r=T(0,i);break;case"update":r=_(l,[i[0],i[2]]).concat(T(0,[i[1]]));break;case"animate":a=i,r=Array.isArray(a[0])&&1===a[0].length&&-1!==["string","number"].indexOf(typeof a[0][0])?[{type:"layout",prop:"_currentFrame",value:a[0][0].toString()}]:[];break;default:r=[]}return r}},86968:function(ne,F,e){"use strict";var M=e(92880).extendFlat;F.u=function(k,o){o=o||{};var T={valType:"info_array",editType:(k=k||{}).editType,items:[{valType:"number",min:0,max:1,editType:k.editType},{valType:"number",min:0,max:1,editType:k.editType}],dflt:[0,1]},_={x:M({},T,{}),y:M({},T,{}),editType:k.editType};return k.noGridCell||(_.row={valType:"integer",min:0,dflt:0,editType:k.editType},_.column={valType:"integer",min:0,dflt:0,editType:k.editType}),_},F.Q=function(k,o,T,_){var p=_&&_.x||[0,1],l=_&&_.y||[0,1],t=o.grid;if(t){var i=T("domain.column");void 0!==i&&(i<t.columns?p=t._domains.x[i]:delete k.domain.column);var r=T("domain.row");void 0!==r&&(r<t.rows?l=t._domains.y[r]:delete k.domain.row)}var n=T("domain.x",p),a=T("domain.y",l);n[0]<n[1]||(k.domain.x=p.slice()),a[0]<a[1]||(k.domain.y=l.slice())}},25376:function(ne){"use strict";ne.exports=function(F){var e=F.variantValues,M=F.editType,k=F.colorEditType;void 0===k&&(k=M);var o={editType:M,valType:"integer",min:1,max:1e3,extras:["normal","bold"],dflt:"normal"};F.noNumericWeightValues&&(o.valType="enumerated",o.values=o.extras,o.extras=void 0,o.min=void 0,o.max=void 0);var T={family:{valType:"string",noBlank:!0,strict:!0,editType:M},size:{valType:"number",min:1,editType:M},color:{valType:"color",editType:k},weight:o,style:{editType:M,valType:"enumerated",values:["normal","italic"],dflt:"normal"},variant:F.noFontVariant?void 0:{editType:M,valType:"enumerated",values:e||["normal","small-caps","all-small-caps","all-petite-caps","petite-caps","unicase"],dflt:"normal"},textcase:F.noFontTextcase?void 0:{editType:M,valType:"enumerated",values:["normal","word caps","upper","lower"],dflt:"normal"},lineposition:F.noFontLineposition?void 0:{editType:M,valType:"flaglist",flags:["under","over","through"],extras:["none"],dflt:"none"},shadow:F.noFontShadow?void 0:{editType:M,valType:"string",dflt:F.autoShadowDflt?"auto":"none"},editType:M};return F.autoSize&&(T.size.dflt="auto"),F.autoColor&&(T.color.dflt="auto"),F.arrayOk&&(T.family.arrayOk=!0,T.weight.arrayOk=!0,T.style.arrayOk=!0,F.noFontVariant||(T.variant.arrayOk=!0),F.noFontTextcase||(T.textcase.arrayOk=!0),F.noFontLineposition||(T.lineposition.arrayOk=!0),F.noFontShadow||(T.shadow.arrayOk=!0),T.size.arrayOk=!0,T.color.arrayOk=!0),T}},16672:function(ne){"use strict";ne.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},79552:function(ne,F){"use strict";F.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr","equal earth":"equalEarth",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},F.axesNames=["lonaxis","lataxis"],F.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},F.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},F.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},F.clipPad=.001,F.precision=.1,F.landColor="#F0DC82",F.waterColor="#3399FF",F.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},F.sphereSVG={type:"Sphere"},F.fillLayers={ocean:1,land:1,lakes:1},F.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},F.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],F.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],F.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},43520:function(ne,F,e){"use strict";var M=e(33428),k=e(83356),o=k.geoPath,T=k.geoDistance,_=e(87108),p=e(24040),l=e(3400),t=l.strTranslate,i=e(76308),r=e(43616),n=e(93024),a=e(7316),s=e(54460),u=e(19280).getAutoRange,f=e(86476),c=e(22676).prepSelect,y=e(22676).clearOutline,d=e(22676).selectOnClick,m=e(79248),g=e(79552),x=e(27144),v=e(59972),b=e(55712).NO;function h(E){this.id=E.id,this.graphDiv=E.graphDiv,this.container=E.container,this.topojsonURL=E.topojsonURL,this.isStatic=E.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var S=h.prototype;function w(E,P){var I=g.clipPad,O=E[0]+I,z=E[1]-I,U=P[0]+I,R=P[1]-I;O>0&&z<0&&(z+=360);var j=(z-O)/4;return{type:"Polygon",coordinates:[[[O,U],[O,R],[O+j,R],[O+2*j,R],[O+3*j,R],[z,R],[z,U],[z-j,U],[z-2*j,U],[z-3*j,U],[O,U]]]}}ne.exports=function(E){return new h(E)},S.plot=function(E,P,I,O){var z=this;if(O)return z.update(E,P,!0);z._geoCalcData=E,z._fullLayout=P;var U=P[this.id],R=[],j=!1;for(var Y in g.layerNameToAdjective)if("frame"!==Y&&U["show"+Y]){j=!0;break}for(var B=!1,V=0;V<E.length;V++){var q=E[0][0].trace;q._geo=z,q.locationmode&&(j=!0);var ie=q.marker;if(ie){var ee=ie.angleref;(ie.angle||"north"===ee||"previous"===ee)&&(B=!0)}}if(this._hasMarkerAngles=B,j){var $=v.getTopojsonName(U);null!==z.topojson&&$===z.topojsonName||(z.topojsonName=$,void 0===PlotlyGeoAssets.topojson[z.topojsonName]&&R.push(z.fetchTopojson()))}R=R.concat(x.fetchTraceGeoData(E)),I.push(new Promise(function(J,X){Promise.all(R).then(function(){z.topojson=PlotlyGeoAssets.topojson[z.topojsonName],z.update(E,P),J()}).catch(X)}))},S.fetchTopojson=function(){var E=this,P=v.getTopojsonPath(E.topojsonURL,E.topojsonName);return new Promise(function(I,O){M.json(P,function(z,U){if(z)return O(404===z.status?new Error(["plotly.js could not find topojson file at",P+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" ")):new Error(["unexpected error while fetching topojson file at",P].join(" ")));PlotlyGeoAssets.topojson[E.topojsonName]=U,I()})})},S.update=function(E,P,I){var O=P[this.id];this.hasChoropleth=!1;for(var z=0;z<E.length;z++){var U=E[z],R=U[0].trace;"choropleth"===R.type&&(this.hasChoropleth=!0),!0===R.visible&&R._length>0&&R._module.calcGeoJSON(U,P)}if(!I){if(this.updateProjection(E,P))return;this.viewInitial&&this.scope===O.scope||this.saveViewInitial(O)}this.scope=O.scope,this.updateBaseLayers(P,O),this.updateDims(P,O),this.updateFx(P,O),a.generalUpdatePerTraceModule(this.graphDiv,this,E,O);var j=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=j.selectAll(".point"),this.dataPoints.text=j.selectAll("text"),this.dataPaths.line=j.selectAll(".js-line");var Y=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=Y.selectAll("path"),this._render()},S.updateProjection=function(E,P){var I=this.graphDiv,O=P[this.id],z=P._size,U=O.domain,R=O.projection,j=O.lonaxis,Y=O.lataxis,B=j._ax,V=Y._ax,q=this.projection=function(se){var ge=se.projection,Ie=ge.type,ke=g.projNames[Ie];ke="geo"+l.titleCase(ke);for(var Se=(k[ke]||_[ke])(),Pe=se._isSatellite?180*Math.acos(1/ge.distance)/Math.PI:se._isClipped?g.lonaxisSpan[Ie]/2:null,Fe=["center","rotate","parallels","clipExtent"],Be=function(Le){return Le?Se:[]},me=0;me<Fe.length;me++){var Me=Fe[me];"function"!=typeof Se[Me]&&(Se[Me]=Be)}return Se.isLonLatOverEdges=function(Le){if(null===Se(Le))return!0;if(Pe){var Ne=Se.rotate();return T(Le,[-Ne[0],-Ne[1]])>Pe*Math.PI/180}return!1},Se.getPath=function(){return o().projection(Se)},Se.getBounds=function(Le){return Se.getPath().bounds(Le)},Se.precision(g.precision),se._isSatellite&&Se.tilt(ge.tilt).distance(ge.distance),Pe&&Se.clipAngle(Pe-g.clipPad),Se}(O),ie=[[z.l+z.w*U.x[0],z.t+z.h*(1-U.y[1])],[z.l+z.w*U.x[1],z.t+z.h*(1-U.y[0])]],te=O.center||{},ee=R.rotation||{},$=j.range||[],J=Y.range||[];if(O.fitbounds){B._length=ie[1][0]-ie[0][0],V._length=ie[1][1]-ie[0][1],B.range=u(I,B),V.range=u(I,V);var X=(B.range[0]+B.range[1])/2,ae=(V.range[0]+V.range[1])/2;if(O._isScoped)te={lon:X,lat:ae};else if(O._isClipped){te={lon:X,lat:ae},ee={lon:X,lat:ae,roll:ee.roll};var ce=R.type,le=g.lonaxisSpan[ce]/2||180,pe=g.lataxisSpan[ce]/2||90;$=[X-le,X+le],J=[ae-pe,ae+pe]}else te={lon:X,lat:ae},ee={lon:X,lat:ee.lat,roll:ee.roll}}q.center([te.lon-ee.lon,te.lat-ee.lat]).rotate([-ee.lon,-ee.lat,ee.roll]).parallels(R.parallels);var we=w($,J);q.fitExtent(ie,we);var Te=this.bounds=q.getBounds(we),ye=this.fitScale=q.scale(),ve=q.translate();if(O.fitbounds){var xe=q.getBounds(w(B.range,V.range)),Ce=Math.min((Te[1][0]-Te[0][0])/(xe[1][0]-xe[0][0]),(Te[1][1]-Te[0][1])/(xe[1][1]-xe[0][1]));isFinite(Ce)?q.scale(Ce*ye):l.warn("Something went wrong during"+this.id+"fitbounds computations.")}else q.scale(R.scale*ye);var Oe=this.midPt=[(Te[0][0]+Te[1][0])/2,(Te[0][1]+Te[1][1])/2];if(q.translate([ve[0]+(Oe[0]-ve[0]),ve[1]+(Oe[1]-ve[1])]).clipExtent(Te),O._isAlbersUsa){var be=q([te.lon,te.lat]),ue=q.translate();q.translate([ue[0]-(be[0]-ue[0]),ue[1]-(be[1]-ue[1])])}},S.updateBaseLayers=function(E,P){var I=this,O=I.topojson,z=I.layers,U=I.basePaths;function R(q){return"lonaxis"===q||"lataxis"===q}function j(q){return!!g.lineLayers[q]}function Y(q){return!!g.fillLayers[q]}var B=(this.hasChoropleth?g.layersForChoropleth:g.layers).filter(function(q){return j(q)||Y(q)?P["show"+q]:!R(q)||P[q].showgrid}),V=I.framework.selectAll(".layer").data(B,String);V.exit().each(function(q){delete z[q],delete U[q],M.select(this).remove()}),V.enter().append("g").attr("class",function(q){return"layer "+q}).each(function(q){var ie=z[q]=M.select(this);"bg"===q?I.bgRect=ie.append("rect").style("pointer-events","all"):R(q)?U[q]=ie.append("path").style("fill","none"):"backplot"===q?ie.append("g").classed("choroplethlayer",!0):"frontplot"===q?ie.append("g").classed("scatterlayer",!0):j(q)?U[q]=ie.append("path").style("fill","none").style("stroke-miterlimit",2):Y(q)&&(U[q]=ie.append("path").style("stroke","none"))}),V.order(),V.each(function(q){var ie=U[q],te=g.layerNameToAdjective[q];"frame"===q?ie.datum(g.sphereSVG):j(q)||Y(q)?ie.datum(b(O,O.objects[q])):R(q)&&ie.datum(function(ee,$,J){var X,ae,ce,le=$[ee],pe=g.scopeDefaults[$.scope];"lonaxis"===ee?(X=pe.lonaxisRange,ae=pe.lataxisRange,ce=function(ue,se){return[ue,se]}):"lataxis"===ee&&(X=pe.lataxisRange,ae=pe.lonaxisRange,ce=function(ue,se){return[se,ue]});var we={type:"linear",range:[X[0],X[1]-1e-6],tick0:le.tick0,dtick:le.dtick};s.setConvert(we,J);var Te=s.calcTicks(we);$.isScoped||"lonaxis"!==ee||Te.pop();for(var ye=Te.length,ve=new Array(ye),xe=0;xe<ye;xe++)for(var Ce=Te[xe].x,Oe=ve[xe]=[],be=ae[0];be<ae[1]+2.5;be+=2.5)Oe.push(ce(Ce,be));return{type:"MultiLineString",coordinates:ve}}(q,P,E)).call(i.stroke,P[q].gridcolor).call(r.dashLine,P[q].griddash,P[q].gridwidth),j(q)?ie.call(i.stroke,P[te+"color"]).call(r.dashLine,"",P[te+"width"]):Y(q)&&ie.call(i.fill,P[te+"color"])})},S.updateDims=function(E,P){var I=this.bounds,O=(P.framewidth||0)/2,z=I[0][0]-O,U=I[0][1]-O,R=I[1][0]-z+O,j=I[1][1]-U+O;r.setRect(this.clipRect,z,U,R,j),this.bgRect.call(r.setRect,z,U,R,j).call(i.fill,P.bgcolor),this.xaxis._offset=z,this.xaxis._length=R,this.yaxis._offset=U,this.yaxis._length=j},S.updateFx=function(E,P){var I=this,O=I.graphDiv,z=I.bgRect,U=E.dragmode,R=E.clickmode;if(!I.isStatic){var j={element:I.bgRect.node(),gd:O,plotinfo:{id:I.id,xaxis:I.xaxis,yaxis:I.yaxis,fillRangeItems:function(B,V){V.isRect?(B.range={})[I.id]=[Y([V.xmin,V.ymin]),Y([V.xmax,V.ymax])]:(B.lassoPoints={})[I.id]=V.map(Y)}},xaxes:[I.xaxis],yaxes:[I.yaxis],subplot:I.id,clickFn:function(B){2===B&&y(O)}};"pan"===U?(z.node().onmousedown=null,z.call(m(I,P)),z.on("dblclick.zoom",function(){var B=I.viewInitial,V={};for(var q in B)V[I.id+"."+q]=B[q];p.call("_guiRelayout",O,V),O.emit("plotly_doubleclick",null)}),O._context._scrollZoom.geo||z.on("wheel.zoom",null)):"select"!==U&&"lasso"!==U||(z.on(".zoom",null),j.prepFn=function(B,V,q){c(B,V,q,j,U)},f.init(j)),z.on("mousemove",function(){var B=I.projection.invert(l.getPositionFromD3Event());if(!B)return f.unhover(O,M.event);I.xaxis.p2c=function(){return B[0]},I.yaxis.p2c=function(){return B[1]},n.hover(O,M.event,I.id)}),z.on("mouseout",function(){O._dragging||f.unhover(O,M.event)}),z.on("click",function(){"select"!==U&&"lasso"!==U&&(R.indexOf("select")>-1&&d(M.event,O,[I.xaxis],[I.yaxis],I.id,j),R.indexOf("event")>-1&&n.click(O,M.event))})}function Y(B){return I.projection.invert([B[0]+I.xaxis._offset,B[1]+I.yaxis._offset])}},S.makeFramework=function(){var E=this,P=E.graphDiv,I=P._fullLayout,O="clip"+I._uid+E.id;E.clipDef=I._clips.append("clipPath").attr("id",O),E.clipRect=E.clipDef.append("rect"),E.framework=M.select(E.container).append("g").attr("class","geo "+E.id).call(r.setClipUrl,O,P),E.project=function(z){var U=E.projection(z);return U?[U[0]-E.xaxis._offset,U[1]-E.yaxis._offset]:[null,null]},E.xaxis={_id:"x",c2p:function(z){return E.project(z)[0]}},E.yaxis={_id:"y",c2p:function(z){return E.project(z)[1]}},E.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},s.setConvert(E.mockAxis,I)},S.saveViewInitial=function(E){var I=E.center||{},O=E.projection,z=O.rotation||{};this.viewInitial={fitbounds:E.fitbounds,"projection.scale":O.scale},l.extendFlat(this.viewInitial,E._isScoped?{"center.lon":I.lon,"center.lat":I.lat}:E._isClipped?{"projection.rotation.lon":z.lon,"projection.rotation.lat":z.lat}:{"center.lon":I.lon,"center.lat":I.lat,"projection.rotation.lon":z.lon})},S.render=function(E){this._hasMarkerAngles&&E?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},S._render=function(){var E,P=this.projection,I=P.getPath();function O(U){var R=P(U.lonlat);return R?t(R[0],R[1]):null}function z(U){return P.isLonLatOverEdges(U.lonlat)?"none":null}for(E in this.basePaths)this.basePaths[E].attr("d",I);for(E in this.dataPaths)this.dataPaths[E].attr("d",function(U){return I(U.geojson)});for(E in this.dataPoints)this.dataPoints[E].attr("display",z).attr("transform",O)}},10816:function(ne,F,e){"use strict";var M=e(84888).KY,k=e(3400).counterRegex,o=e(43520),T="geo",_=k(T),p={};p[T]={valType:"subplotid",dflt:T,editType:"calc"},ne.exports={attr:T,name:T,idRoot:T,idRegex:_,attrRegex:_,attributes:p,layoutAttributes:e(40384),supplyLayoutDefaults:e(86920),plot:function(l){for(var t=l._fullLayout,i=l.calcdata,r=t._subplots[T],n=0;n<r.length;n++){var a=r[n],s=M(i,T,a),u=t[a]._subplot;u||(u=o({id:a,graphDiv:l,container:t._geolayer.node(),topojsonURL:l._context.topojsonURL,staticPlot:l._context.staticPlot}),t[a]._subplot=u),u.plot(s,t,l._promises)}},updateFx:function(l){for(var t=l._fullLayout,i=t._subplots[T],r=0;r<i.length;r++){var n=t[i[r]];n._subplot.updateFx(t,n)}},clean:function(l,t,i,r){for(var n=r._subplots[T]||[],a=0;a<n.length;a++){var s=n[a],u=r[s]._subplot;!t[s]&&u&&(u.framework.remove(),u.clipDef.remove())}}}},40384:function(ne,F,e){"use strict";var M=e(22548),k=e(86968).u,o=e(98192).u,T=e(79552),_=e(67824).overrideAll,p=e(95376),l={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:M.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:o};(ne.exports=_({domain:k({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:p(T.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:p(T.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:M.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:T.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:T.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:T.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:T.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:M.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:M.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:M.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:M.background},lonaxis:l,lataxis:l},"plot","from-root")).uirevision={valType:"any",editType:"none"}},86920:function(ne,F,e){"use strict";var M=e(3400),k=e(168),o=e(84888).op,T=e(79552),_=e(40384),p=T.axesNames;function l(t,i,r,n){var a=o(n.fullData,"geo",n.id).map(function(ee){return ee._expandedIndex}),s=r("resolution"),u=r("scope"),f=T.scopeDefaults[u],c=r("projection.type",f.projType),y=i._isAlbersUsa="albers usa"===c;y&&(u=i.scope="usa");var d=i._isScoped="world"!==u,m=i._isSatellite="satellite"===c,g=i._isConic=-1!==c.indexOf("conic")||"albers"===c,x=i._isClipped=!!T.lonaxisSpan[c];if(!1===t.visible){var v=M.extendDeep({},i._template);v.showcoastlines=!1,v.showcountries=!1,v.showframe=!1,v.showlakes=!1,v.showland=!1,v.showocean=!1,v.showrivers=!1,v.showsubunits=!1,v.lonaxis&&(v.lonaxis.showgrid=!1),v.lataxis&&(v.lataxis.showgrid=!1),i._template=v}for(var b=r("visible"),h=0;h<p.length;h++){var S,w=p[h],E=[30,10][h];if(d)S=f[w+"Range"];else{var P=T[w+"Span"],I=(P[c]||P["*"])/2,O=r("projection.rotation."+w.substr(0,3),f.projRotate[h]);S=[O-I,O+I]}var z=r(w+".range",S);r(w+".tick0"),r(w+".dtick",E),r(w+".showgrid",!!b&&void 0)&&(r(w+".gridcolor"),r(w+".gridwidth"),r(w+".griddash")),i[w]._ax={type:"linear",_id:w.slice(0,3),_traceIndices:a,setScale:M.identity,c2l:M.identity,r2l:M.identity,autorange:!0,range:z.slice(),_m:1,_input:{}}}var U=i.lonaxis.range,R=i.lataxis.range,j=U[0],Y=U[1];j>0&&Y<0&&(Y+=360);var B,V,q,ie=(j+Y)/2;if(!y){var te=d?f.projRotate:[ie,0,0];B=r("projection.rotation.lon",te[0]),r("projection.rotation.lat",te[1]),r("projection.rotation.roll",te[2]),r("showcoastlines",!d&&b)&&(r("coastlinecolor"),r("coastlinewidth")),r("showocean",!!b&&void 0)&&r("oceancolor")}y?(V=-96.6,q=38.7):(V=d?ie:B,q=(R[0]+R[1])/2),r("center.lon",V),r("center.lat",q),m&&(r("projection.tilt"),r("projection.distance")),g&&r("projection.parallels",f.projParallels||[0,60]),r("projection.scale"),r("showland",!!b&&void 0)&&r("landcolor"),r("showlakes",!!b&&void 0)&&r("lakecolor"),r("showrivers",!!b&&void 0)&&(r("rivercolor"),r("riverwidth")),r("showcountries",d&&"usa"!==u&&b)&&(r("countrycolor"),r("countrywidth")),("usa"===u||"north america"===u&&50===s)&&(r("showsubunits",b),r("subunitcolor"),r("subunitwidth")),d||r("showframe",b)&&(r("framecolor"),r("framewidth")),r("bgcolor"),r("fitbounds")&&(delete i.projection.scale,d?(delete i.center.lon,delete i.center.lat):x?(delete i.center.lon,delete i.center.lat,delete i.projection.rotation.lon,delete i.projection.rotation.lat,delete i.lonaxis.range,delete i.lataxis.range):(delete i.center.lon,delete i.center.lat,delete i.projection.rotation.lon))}ne.exports=function(t,i,r){k(t,i,r,{type:"geo",attributes:_,handleDefaults:l,fullData:r,partition:"y"})}},79248:function(ne,F,e){"use strict";var M=e(33428),k=e(3400),o=e(24040),T=Math.PI/180,_=180/Math.PI,p={cursor:"pointer"},l={cursor:"auto"};function t(d,m){return M.behavior.zoom().translate(m.translate()).scale(m.scale())}function i(d,m,g){var x=d.id,v=d.graphDiv,b=v.layout,h=b[x],S=v._fullLayout,w=S[x],E={},P={};function I(O,z){E[x+"."+O]=k.nestedProperty(h,O).get(),o.call("_storeDirectGUIEdit",b,S._preGUI,E);var U=k.nestedProperty(w,O);U.get()!==z&&(U.set(z),k.nestedProperty(h,O).set(z),P[x+"."+O]=z)}g(I),I("projection.scale",m.scale()/d.fitScale),I("fitbounds",!1),v.emit("plotly_relayout",P)}function r(d,m){var g=t(0,m);function x(v){var b=m.invert(d.midPt);v("center.lon",b[0]),v("center.lat",b[1])}return g.on("zoomstart",function(){M.select(this).style(p)}).on("zoom",function(){m.scale(M.event.scale).translate(M.event.translate),d.render(!0);var v=m.invert(d.midPt);d.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":m.scale()/d.fitScale,"geo.center.lon":v[0],"geo.center.lat":v[1]})}).on("zoomend",function(){M.select(this).style(l),i(d,m,x)}),g}function n(d,m){var g,x,v,b,h,S,w,E,P,I=t(0,m);function O(U){return m.invert(U)}function z(U){var R=m.rotate(),j=m.invert(d.midPt);U("projection.rotation.lon",-R[0]),U("center.lon",j[0]),U("center.lat",j[1])}return I.on("zoomstart",function(){M.select(this).style(p),g=M.mouse(this),x=m.rotate(),v=m.translate(),b=x,h=O(g)}).on("zoom",function(){if(S=M.mouse(this),function(j){var Y=O(j);if(!Y)return!0;var B=m(Y);return Math.abs(B[0]-j[0])>2||Math.abs(B[1]-j[1])>2}(g))return I.scale(m.scale()),void I.translate(m.translate());m.scale(M.event.scale),m.translate([v[0],M.event.translate[1]]),h?O(S)&&(E=O(S),m.rotate(w=[b[0]+(E[0]-h[0]),x[1],x[2]]),b=w):h=O(g=S),P=!0,d.render(!0);var U=m.rotate(),R=m.invert(d.midPt);d.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":m.scale()/d.fitScale,"geo.center.lon":R[0],"geo.center.lat":R[1],"geo.projection.rotation.lon":-U[0]})}).on("zoomend",function(){M.select(this).style(l),P&&i(d,m,z)}),I}function a(d,m){var g,x={r:m.rotate(),k:m.scale()},v=t(0,m),b=function(E){for(var P=0,I=arguments.length,O=[];++P<I;)O.push(arguments[P]);var z=M.dispatch.apply(null,O);return z.of=function(U,R){return function(j){var Y;try{Y=j.sourceEvent=M.event,j.target=E,M.event=j,z[j.type].apply(U,R)}finally{M.event=Y}}},z}(v,"zoomstart","zoom","zoomend"),h=0,S=v.on;function w(E){var P=m.rotate();E("projection.rotation.lon",-P[0]),E("projection.rotation.lat",-P[1])}return v.on("zoomstart",function(){M.select(this).style(p);var E,P,I,O,z,U,R,j,Y,B,V,q=M.mouse(this),ie=m.rotate(),te=ie,ee=m.translate(),$=(P=.5*(E=ie)[0]*T,I=.5*E[1]*T,O=.5*E[2]*T,z=Math.sin(P),U=Math.cos(P),R=Math.sin(I),j=Math.cos(I),Y=Math.sin(O),[U*j*(B=Math.cos(O))+z*R*Y,z*j*B-U*R*Y,U*R*B+z*j*Y,U*j*Y-z*R*B]);g=s(m,q),S.call(v,"zoom",function(){var J,X,ae,ce,le,pe,we,Te,ye,ve,se,xe=M.mouse(this);if(m.scale(x.k=M.event.scale),g){if(s(m,xe)){m.rotate(ie).translate(ee);var Ce=s(m,xe),Oe=function(se,ge){if(se&&ge){var Ie=[(Fe=se)[1]*(Be=ge)[2]-Fe[2]*Be[1],Fe[2]*Be[0]-Fe[0]*Be[2],Fe[0]*Be[1]-Fe[1]*Be[0]],ke=Math.sqrt(y(Ie,Ie)),Se=.5*Math.acos(Math.max(-1,Math.min(1,y(se,ge)))),Pe=Math.sin(Se)/ke;return ke&&[Math.cos(Se),Ie[2]*Pe,-Ie[1]*Pe,Ie[0]*Pe]}var Fe,Be}(g,Ce),be=(se=[(ae=(J=$)[0])*(we=(X=Oe)[0])-(ce=J[1])*(Te=X[1])-(le=J[2])*(ye=X[2])-(pe=J[3])*(ve=X[3]),ae*Te+ce*we+le*ve-pe*ye,ae*ye-ce*ve+le*we+pe*Te,ae*ve+ce*ye-le*Te+pe*we],[Math.atan2(2*(se[0]*se[1]+se[2]*se[3]),1-2*(se[1]*se[1]+se[2]*se[2]))*_,Math.asin(Math.max(-1,Math.min(1,2*(se[0]*se[2]-se[3]*se[1]))))*_,Math.atan2(2*(se[0]*se[3]+se[1]*se[2]),1-2*(se[2]*se[2]+se[3]*se[3]))*_]),ue=x.r=function(se,ge,Ie){var ke=c(ge,2,se[0]);ke=c(ke,1,se[1]),ke=c(ke,0,se[2]-Ie[2]);var Se,Pe,Fe=ge[0],Be=ge[1],me=ge[2],Me=ke[0],Le=ke[1],Ne=ke[2],Re=Math.atan2(Be,Fe)*_,He=Math.sqrt(Fe*Fe+Be*Be);Math.abs(Le)>He?(Pe=(Le>0?90:-90)-Re,Se=0):(Pe=Math.asin(Le/He)*_-Re,Se=Math.sqrt(He*He-Le*Le));var Ze=180-Pe-2*Re,nt=(Math.atan2(Ne,Me)-Math.atan2(me,Se))*_,ft=(Math.atan2(Ne,Me)-Math.atan2(me,-Se))*_;return u(Ie[0],Ie[1],Pe,nt)<=u(Ie[0],Ie[1],Ze,ft)?[Pe,nt,Ie[2]]:[Ze,ft,Ie[2]]}(be,g,te);isFinite(ue[0])&&isFinite(ue[1])&&isFinite(ue[2])||(ue=te),m.rotate(ue),te=ue}}else g=s(m,q=xe);b.of(this,arguments)({type:"zoom"})}),V=b.of(this,arguments),h++||V({type:"zoomstart"})}).on("zoomend",function(){var E;M.select(this).style(l),S.call(v,"zoom",null),E=b.of(this,arguments),--h||E({type:"zoomend"}),i(d,m,w)}).on("zoom.redraw",function(){d.render(!0);var E=m.rotate();d.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":m.scale()/d.fitScale,"geo.projection.rotation.lon":-E[0],"geo.projection.rotation.lat":-E[1]})}),M.rebind(v,b,"on")}function s(d,m){var x,v,b,h,g=d.invert(m);return g&&isFinite(g[0])&&isFinite(g[1])&&(v=(x=g)[0]*T,b=x[1]*T,[(h=Math.cos(b))*Math.cos(v),h*Math.sin(v),Math.sin(b)])}function u(d,m,g,x){var v=f(g-d),b=f(x-m);return Math.sqrt(v*v+b*b)}function f(d){return(d%360+540)%360-180}function c(d,m,g){var x=g*T,v=d.slice(),b=0===m?1:0,h=2===m?1:2,S=Math.cos(x),w=Math.sin(x);return v[b]=d[b]*S-d[h]*w,v[h]=d[h]*S+d[b]*w,v}function y(d,m){for(var g=0,x=0,v=d.length;x<v;++x)g+=d[x]*m[x];return g}ne.exports=function(d,m){return(m._isScoped?r:m._isClipped?a:n)(d,d.projection)}},84888:function(ne,F,e){"use strict";var M=e(24040),k=e(33816).SUBPLOT_PATTERN;F.KY=function(o,T,_){var p=M.subplotsRegistry[T];if(!p)return[];for(var l=p.attr,t=[],i=0;i<o.length;i++){var r=o[i];r[0].trace[l]===_&&t.push(r)}return t},F._M=function(o,T,_){var p,l=[],t=[];if(!(p="string"==typeof T?M.getModule(T).plot:"function"==typeof T?T:T.plot))return[l,o];for(var i=_,r=0;r<o.length;r++){var n=o[r],a=n[0].trace;!0===a.visible&&0!==a._length&&(!a._module||a._module.plot!==p||void 0!==a.zorder&&a.zorder!==i?t.push(n):l.push(n))}return[l,t]},F.op=function(o,T,_){if(!M.subplotsRegistry[T])return[];var p,l,t,i=M.subplotsRegistry[T].attr,r=[];if("gl2d"===T){var n=_.match(k);l="x"+n[1],t="y"+n[2]}for(var a=0;a<o.length;a++)p=o[a],"gl2d"===T&&M.traceIs(p,"gl2d")?p[i[0]]===l&&p[i[1]]===t&&r.push(p):p[i]===_&&r.push(p);return r}},2428:function(ne,F,e){"use strict";var M=e(62644),k=e(97264),o=e(29128),T=e(33816),_=e(89184);function p(l,t){this.element=l,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}ne.exports=function(l){var t=l.mouseContainer,i=l.glplot,r=new p(t,i);function n(){l.xaxis.autorange=!1,l.yaxis.autorange=!1}function a(s,u,f){var c,y,d=l.calcDataBox(),m=i.viewBox,g=r.lastPos[0],x=r.lastPos[1],v=T.MINDRAG*i.pixelRatio,b=T.MINZOOM*i.pixelRatio;function h(O,z,U){var R=Math.min(z,U),j=Math.max(z,U);R!==j?(d[O]=R,d[O+2]=j,r.dataBox=d,l.setRanges(d)):(l.selectBox.selectBox=[0,0,1,1],l.glplot.setDirty())}switch(u*=i.pixelRatio,f=m[3]-m[1]-(f*=i.pixelRatio),l.fullLayout.dragmode){case"zoom":if(s){var S=u/(m[2]-m[0])*(d[2]-d[0])+d[0],w=f/(m[3]-m[1])*(d[3]-d[1])+d[1];r.boxInited||(r.boxStart[0]=S,r.boxStart[1]=w,r.dragStart[0]=u,r.dragStart[1]=f),r.boxEnd[0]=S,r.boxEnd[1]=w,r.boxInited=!0,r.boxEnabled||r.boxStart[0]===r.boxEnd[0]&&r.boxStart[1]===r.boxEnd[1]||(r.boxEnabled=!0);var E=Math.abs(r.dragStart[0]-u)<b,P=Math.abs(r.dragStart[1]-f)<b;if(!function(){for(var O=l.graphDiv._fullLayout._axisConstraintGroups,z=l.xaxis._id,U=l.yaxis._id,R=0;R<O.length;R++)if(-1!==O[R][z]){if(-1!==O[R][U])return!0;break}return!1}()||E&&P)E&&(r.boxEnd[0]=r.boxStart[0]),P&&(r.boxEnd[1]=r.boxStart[1]);else{c=r.boxEnd[0]-r.boxStart[0],y=r.boxEnd[1]-r.boxStart[1];var I=(d[3]-d[1])/(d[2]-d[0]);Math.abs(c*I)>Math.abs(y)?(r.boxEnd[1]=r.boxStart[1]+Math.abs(c)*I*(y>=0?1:-1),r.boxEnd[1]<d[1]?(r.boxEnd[1]=d[1],r.boxEnd[0]=r.boxStart[0]+(d[1]-r.boxStart[1])/Math.abs(I)):r.boxEnd[1]>d[3]&&(r.boxEnd[1]=d[3],r.boxEnd[0]=r.boxStart[0]+(d[3]-r.boxStart[1])/Math.abs(I))):(r.boxEnd[0]=r.boxStart[0]+Math.abs(y)/I*(c>=0?1:-1),r.boxEnd[0]<d[0]?(r.boxEnd[0]=d[0],r.boxEnd[1]=r.boxStart[1]+(d[0]-r.boxStart[0])*Math.abs(I)):r.boxEnd[0]>d[2]&&(r.boxEnd[0]=d[2],r.boxEnd[1]=r.boxStart[1]+(d[2]-r.boxStart[0])*Math.abs(I)))}}else r.boxEnabled?(y=r.boxStart[1]!==r.boxEnd[1],(c=r.boxStart[0]!==r.boxEnd[0])||y?(c&&(h(0,r.boxStart[0],r.boxEnd[0]),l.xaxis.autorange=!1),y&&(h(1,r.boxStart[1],r.boxEnd[1]),l.yaxis.autorange=!1),l.relayoutCallback()):l.glplot.setDirty(),r.boxEnabled=!1,r.boxInited=!1):r.boxInited&&(r.boxInited=!1);break;case"pan":r.boxEnabled=!1,r.boxInited=!1,s?(r.panning||(r.dragStart[0]=u,r.dragStart[1]=f),Math.abs(r.dragStart[0]-u)<v&&(u=r.dragStart[0]),Math.abs(r.dragStart[1]-f)<v&&(f=r.dragStart[1]),y=(x-f)*(d[3]-d[1])/(i.viewBox[3]-i.viewBox[1]),d[0]+=c=(g-u)*(d[2]-d[0])/(i.viewBox[2]-i.viewBox[0]),d[2]+=c,d[1]+=y,d[3]+=y,l.setRanges(d),r.panning=!0,r.lastInputTime=Date.now(),n(),l.cameraChanged(),l.handleAnnotations()):r.panning&&(r.panning=!1,l.relayoutCallback())}r.lastPos[0]=u,r.lastPos[1]=f}return r.mouseListener=M(t,a),t.addEventListener("touchstart",function(s){var u=o(s.changedTouches[0],t);a(0,u[0],u[1]),a(1,u[0],u[1]),s.preventDefault()},!!_&&{passive:!1}),t.addEventListener("touchmove",function(s){s.preventDefault();var u=o(s.changedTouches[0],t);a(1,u[0],u[1]),s.preventDefault()},!!_&&{passive:!1}),t.addEventListener("touchend",function(s){a(0,r.lastPos[0],r.lastPos[1]),s.preventDefault()},!!_&&{passive:!1}),r.wheelListener=k(t,function(s,u){if(!l.scrollZoom)return!1;var f=l.calcDataBox(),c=i.viewBox,y=r.lastPos[0],d=r.lastPos[1],m=Math.exp(5*u/(c[3]-c[1])),g=y/(c[2]-c[0])*(f[2]-f[0])+f[0],x=d/(c[3]-c[1])*(f[3]-f[1])+f[1];return f[0]=(f[0]-g)*m+g,f[2]=(f[2]-g)*m+g,f[1]=(f[1]-x)*m+x,f[3]=(f[3]-x)*m+x,l.setRanges(f),r.lastInputTime=Date.now(),n(),l.cameraChanged(),l.handleAnnotations(),l.relayoutCallback(),!0},!0),r}},92568:function(ne,F,e){"use strict";var M=e(54460),k=e(43080);function o(p){this.scene=p,this.gl=p.gl,this.pixelRatio=p.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var T=o.prototype,_=["xaxis","yaxis"];T.merge=function(p){var l,t,i,r,n,a,s,u,f,c,y;for(this.titleEnable=!1,this.backgroundColor=k(p.plot_bgcolor),c=0;c<2;++c){var d=(l=_[c]).charAt(0);for(i=(t=p[this.scene[l]._name]).title.text===this.scene.fullLayout._dfltTitle[d]?"":t.title.text,y=0;y<=2;y+=2)this.labelEnable[c+y]=!1,this.labels[c+y]=i,this.labelColor[c+y]=k(t.title.font.color),this.labelFont[c+y]=t.title.font.family,this.labelSize[c+y]=t.title.font.size,this.labelPad[c+y]=this.getLabelPad(l,t),this.tickEnable[c+y]=!1,this.tickColor[c+y]=k((t.tickfont||{}).color),this.tickAngle[c+y]="auto"===t.tickangle?0:Math.PI*-t.tickangle/180,this.tickPad[c+y]=this.getTickPad(t),this.tickMarkLength[c+y]=0,this.tickMarkWidth[c+y]=t.tickwidth||0,this.tickMarkColor[c+y]=k(t.tickcolor),this.borderLineEnable[c+y]=!1,this.borderLineColor[c+y]=k(t.linecolor),this.borderLineWidth[c+y]=t.linewidth||0;s=this.hasSharedAxis(t),n=this.hasAxisInDfltPos(l,t)&&!s,a=this.hasAxisInAltrPos(l,t)&&!s,r=t.mirror||!1,u=s?-1!==String(r).indexOf("all"):!!r,f=s?"allticks"===r:-1!==String(r).indexOf("ticks"),n?this.labelEnable[c]=!0:a&&(this.labelEnable[c+2]=!0),n?this.tickEnable[c]=t.showticklabels:a&&(this.tickEnable[c+2]=t.showticklabels),(n||u)&&(this.borderLineEnable[c]=t.showline),(a||u)&&(this.borderLineEnable[c+2]=t.showline),(n||f)&&(this.tickMarkLength[c]=this.getTickMarkLength(t)),(a||f)&&(this.tickMarkLength[c+2]=this.getTickMarkLength(t)),this.gridLineEnable[c]=t.showgrid,this.gridLineColor[c]=k(t.gridcolor),this.gridLineWidth[c]=t.gridwidth,this.zeroLineEnable[c]=t.zeroline,this.zeroLineColor[c]=k(t.zerolinecolor),this.zeroLineWidth[c]=t.zerolinewidth}},T.hasSharedAxis=function(p){var l=this.scene;return 0!==M.findSubplotsWithAxis(l.fullLayout._subplots.gl2d,p).indexOf(l.id)},T.hasAxisInDfltPos=function(p,l){var t=l.side;return"xaxis"===p?"bottom"===t:"yaxis"===p?"left"===t:void 0},T.hasAxisInAltrPos=function(p,l){var t=l.side;return"xaxis"===p?"top"===t:"yaxis"===p?"right"===t:void 0},T.getLabelPad=function(p,l){var t=1.5,i=l.title.font.size,r=l.showticklabels;return"xaxis"===p?"top"===l.side?i*(t+(r?1:0))-10:i*(t+(r?.5:0))-10:"yaxis"===p?"right"===l.side?10+i*(t+(r?1:.5)):10+i*(t+(r?.5:0)):void 0},T.getTickPad=function(p){return"outside"===p.ticks?10+p.ticklen:15},T.getTickMarkLength=function(p){if(!p.ticks)return 0;var l=p.ticklen;return"inside"===p.ticks?-l:l},ne.exports=function(p){return new o(p)}},39952:function(ne,F,e){"use strict";var M=e(67824).overrideAll,k=e(17188),o=e(64859),T=e(9616),_=e(33816),p=e(57952),l=e(65460),t=e(84888).op;F.name="gl2d",F.attr=["xaxis","yaxis"],F.idRoot=["x","y"],F.idRegex=_.idRegex,F.attrRegex=_.attrRegex,F.attributes=e(26720),F.supplyLayoutDefaults=function(i,r,n){r._has("cartesian")||p.supplyLayoutDefaults(i,r,n)},F.layoutAttrOverrides=M(p.layoutAttributes,"plot","from-root"),F.baseLayoutAttrOverrides=M({plot_bgcolor:o.plot_bgcolor,hoverlabel:l.hoverlabel},"plot","nested"),F.plot=function(i){for(var r=i._fullLayout,n=i._fullData,a=r._subplots.gl2d,s=0;s<a.length;s++){var u=a[s],f=r._plots[u],c=t(n,"gl2d",u),y=f._scene2d;void 0===y&&(y=new k({id:u,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio},r),f._scene2d=y),y.plot(c,i.calcdata,r,i.layout)}},F.clean=function(i,r,n,a){for(var s=a._subplots.gl2d||[],u=0;u<s.length;u++){var f=s[u],c=a._plots[f];c._scene2d&&0===t(i,"gl2d",f).length&&(c._scene2d.destroy(),delete a._plots[f])}p.clean.apply(this,arguments)},F.drawFramework=function(i){i._context.staticPlot||p.drawFramework(i)},F.toSVG=function(i){for(var r=i._fullLayout,n=r._subplots.gl2d,a=0;a<n.length;a++){var s=r._plots[n[a]]._scene2d,u=s.toImage("png");r._glimages.append("svg:image").attr({xmlns:T.svg,"xlink:href":u,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),s.destroy()}},F.updateFx=function(i){for(var r=i._fullLayout,n=r._subplots.gl2d,a=0;a<n.length;a++)r._plots[n[a]]._scene2d.updateFx(r.dragmode)}},17188:function(ne,F,e){"use strict";var M,k,o=e(24040),T=e(54460),_=e(93024),p=e(67792).gl_plot2d,l=e(67792).gl_spikes2d,t=e(67792).gl_select_box,i=e(5408),r=e(92568),n=e(2428),a=e(16576),s=e(71888),u=s.enforce,f=s.clean,c=e(19280).doAutoRange,y=e(72760),d=y.drawMode,m=y.selectMode,g=["xaxis","yaxis"],x=e(33816).SUBPLOT_PATTERN;function v(h,S){this.container=h.container,this.graphDiv=h.graphDiv,this.pixelRatio=h.plotGlPixelRatio||window.devicePixelRatio,this.id=h.id,this.staticPlot=!!h.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(S),this.makeFramework(),this.stopped||(this.glplotOptions=r(this),this.glplotOptions.merge(S),this.glplot=p(this.glplotOptions),this.camera=n(this),this.traces={},this.spikes=l(this.glplot),this.selectBox=t(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}ne.exports=v;var b=v.prototype;b.makeFramework=function(){if(this.staticPlot){if(!(k||(M=document.createElement("canvas"),k=i({canvas:M,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=M,this.gl=k}else{var h=this.container.querySelector(".gl-canvas-focus"),S=i({canvas:h,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!S)return a(this),void(this.stopped=!0);this.canvas=h,this.gl=S}var w=this.canvas;w.style.width="100%",w.style.height="100%",w.style.position="absolute",w.style.top="0px",w.style.left="0px",w.style["pointer-events"]="none",this.updateSize(w);var E=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");E.style.position="absolute",E.style.top=E.style.left="0px",E.style.width=E.style.height="100%",E.style["z-index"]=20,E.style["pointer-events"]="none";var P=this.mouseContainer=document.createElement("div");P.style.position="absolute",P.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var I=this.container;I.appendChild(E),I.appendChild(P);var O=this;P.addEventListener("mouseout",function(){O.isMouseOver=!1,O.unhover()}),P.addEventListener("mouseover",function(){O.isMouseOver=!0})},b.toImage=function(h){h||(h="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(M),this.updateSize(this.canvas);var S=this.glplot.gl,w=S.drawingBufferWidth,E=S.drawingBufferHeight;S.clearColor(1,1,1,0),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),S.bindFramebuffer(S.FRAMEBUFFER,null);var P=new Uint8Array(w*E*4);S.readPixels(0,0,w,E,S.RGBA,S.UNSIGNED_BYTE,P);for(var I=0,O=E-1;I<O;++I,--O)for(var z=0;z<w;++z)for(var U=0;U<4;++U){var R=P[4*(w*I+z)+U];P[4*(w*I+z)+U]=P[4*(w*O+z)+U],P[4*(w*O+z)+U]=R}var j=document.createElement("canvas");j.width=w,j.height=E;var Y,B=j.getContext("2d",{willReadFrequently:!0}),V=B.createImageData(w,E);switch(V.data.set(P),B.putImageData(V,0,0),h){case"jpeg":Y=j.toDataURL("image/jpeg");break;case"webp":Y=j.toDataURL("image/webp");break;default:Y=j.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(M),Y},b.updateSize=function(h){h||(h=this.canvas);var S=this.pixelRatio,w=this.fullLayout,P=w.height,I=0|Math.ceil(S*w.width),O=0|Math.ceil(S*P);return h.width===I&&h.height===O||(h.width=I,h.height=O),h},b.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var h=[T.calcTicks(this.xaxis),T.calcTicks(this.yaxis)],S=0;S<2;++S)for(var w=0;w<h[S].length;++w)h[S][w].text=h[S][w].text+"";return h},b.updateRefs=function(h){this.fullLayout=h;var S=this.id.match(x),E="yaxis"+S[2];this.xaxis=this.fullLayout["xaxis"+S[1]],this.yaxis=this.fullLayout[E]},b.relayoutCallback=function(){var h=this.graphDiv,S=this.xaxis,w=this.yaxis,E=h.layout,P={},I=P[S._name+".range"]=S.range.slice(),O=P[w._name+".range"]=w.range.slice();P[S._name+".autorange"]=S.autorange,P[w._name+".autorange"]=w.autorange,o.call("_storeDirectGUIEdit",h.layout,h._fullLayout._preGUI,P);var z=E[S._name];z.range=I,z.autorange=S.autorange;var U=E[w._name];U.range=O,U.autorange=w.autorange,P.lastInputTime=this.camera.lastInputTime,h.emit("plotly_relayout",P)},b.cameraChanged=function(){var h=this.camera;this.glplot.setDataBox(this.calcDataBox());var S=this.computeTickMarks();(function(w,E){for(var P=0;P<2;++P){var I=w[P],O=E[P];if(I.length!==O.length)return!0;for(var z=0;z<I.length;++z)if(I[z].x!==O[z].x)return!0}return!1})(S,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=S,this.glplotOptions.dataBox=h.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},b.handleAnnotations=function(){for(var h=this.graphDiv,S=this.fullLayout.annotations,w=0;w<S.length;w++){var E=S[w];E.xref===this.xaxis._id&&E.yref===this.yaxis._id&&o.getComponentMethod("annotations","drawOne")(h,w)}},b.destroy=function(){if(this.glplot){var h=this.traces;h&&Object.keys(h).map(function(S){h[S].dispose(),delete h[S]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},b.plot=function(h,S,w){var E=this.glplot;this.updateRefs(w),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(h,S),this.updateFx(w.dragmode);var P=w.width,I=w.height;this.updateSize(this.canvas);var O=this.glplotOptions;O.merge(w),O.screenBox=[0,0,P,I];var z={_fullLayout:{_axisConstraintGroups:w._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:w._size}};f(z,this.xaxis),f(z,this.yaxis);var U,R,j=w._size,Y=this.xaxis.domain,B=this.yaxis.domain;for(O.viewBox=[j.l+Y[0]*j.w,j.b+B[0]*j.h,P-j.r-(1-Y[1])*j.w,I-j.t-(1-B[1])*j.h],this.mouseContainer.style.width=j.w*(Y[1]-Y[0])+"px",this.mouseContainer.style.height=j.h*(B[1]-B[0])+"px",this.mouseContainer.height=j.h*(B[1]-B[0]),this.mouseContainer.style.left=j.l+Y[0]*j.w+"px",this.mouseContainer.style.top=j.t+(1-B[1])*j.h+"px",R=0;R<2;++R)(U=this[g[R]])._length=O.viewBox[R+2]-O.viewBox[R],c(this.graphDiv,U),U.setScale();u(z),O.ticks=this.computeTickMarks(),O.dataBox=this.calcDataBox(),O.merge(w),E.update(O),this.glplot.draw()},b.calcDataBox=function(){var h=this.xaxis,S=this.yaxis,w=h.range,E=S.range,P=h.r2l,I=S.r2l;return[P(w[0]),I(E[0]),P(w[1]),I(E[1])]},b.setRanges=function(h){var S=this.xaxis,w=this.yaxis,E=S.l2r,P=w.l2r;S.range=[E(h[0]),E(h[2])],w.range=[P(h[1]),P(h[3])]},b.updateTraces=function(h,S){var w,E,P,I=Object.keys(this.traces);this.fullData=h;e:for(w=0;w<I.length;w++){var O=I[w],z=this.traces[O];for(E=0;E<h.length;E++)if((P=h[E]).uid===O&&P.type===z.type)continue e;z.dispose(),delete this.traces[O]}for(w=0;w<h.length;w++){var U=S[w],R=this.traces[(P=h[w]).uid];R?R.update(P,U):(R=P._module.plot(this,P,U),this.traces[P.uid]=R)}this.glplot.objects.sort(function(j,Y){return j._trace.index-Y._trace.index})},b.updateFx=function(h){m(h)||d(h)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor="pan"===h?"move":"zoom"===h?"crosshair":null},b.emitPointAction=function(h,S){for(var w,E=h.trace.uid,P=h.pointIndex,I=0;I<this.fullData.length;I++)this.fullData[I].uid===E&&(w=this.fullData[I]);var O={x:h.traceCoord[0],y:h.traceCoord[1],curveNumber:w.index,pointNumber:P,data:w._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};_.appendArrayPointValue(O,w,P),this.graphDiv.emit(S,{points:[O]})},b.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var h=this.glplot,S=this.camera,w=S.mouseListener,E=1===this.lastButtonState&&0===w.buttons,P=this.fullLayout;this.lastButtonState=w.buttons,this.cameraChanged();var I,O=w.x*h.pixelRatio,z=this.canvas.height-h.pixelRatio*w.y;if(S.boxEnabled&&"zoom"===P.dragmode){this.selectBox.enabled=!0;for(var U=this.selectBox.selectBox=[Math.min(S.boxStart[0],S.boxEnd[0]),Math.min(S.boxStart[1],S.boxEnd[1]),Math.max(S.boxStart[0],S.boxEnd[0]),Math.max(S.boxStart[1],S.boxEnd[1])],R=0;R<2;R++)S.boxStart[R]===S.boxEnd[R]&&(U[R]=h.dataBox[R],U[R+2]=h.dataBox[R+2]);h.setDirty()}else if(!S.panning&&this.isMouseOver){this.selectBox.enabled=!1;var j=P._size,V=(I=h.pick(O/h.pixelRatio+j.l+this.xaxis.domain[0]*j.w,z/h.pixelRatio-(j.t+(1-this.yaxis.domain[1])*j.h)))&&I.object._trace.handlePick(I);if(V&&E&&this.emitPointAction(V,"plotly_click"),I&&"skip"!==I.object._trace.hoverinfo&&P.hovermode&&V&&(!this.lastPickResult||this.lastPickResult.traceUid!==V.trace.uid||this.lastPickResult.dataCoord[0]!==V.dataCoord[0]||this.lastPickResult.dataCoord[1]!==V.dataCoord[1])){var q=V;this.lastPickResult={traceUid:V.trace?V.trace.uid:null,dataCoord:V.dataCoord.slice()},this.spikes.update({center:I.dataCoord}),q.screenCoord=[((h.viewBox[2]-h.viewBox[0])*(I.dataCoord[0]-h.dataBox[0])/(h.dataBox[2]-h.dataBox[0])+h.viewBox[0])/h.pixelRatio,(this.canvas.height-(h.viewBox[3]-h.viewBox[1])*(I.dataCoord[1]-h.dataBox[1])/(h.dataBox[3]-h.dataBox[1])-h.viewBox[1])/h.pixelRatio],this.emitPointAction(V,"plotly_hover");var ie=this.fullData[q.trace.index]||{},te=q.pointIndex,ee=_.castHoverinfo(ie,P,te);if(ee&&"all"!==ee){var $=ee.split("+");-1===$.indexOf("x")&&(q.traceCoord[0]=void 0),-1===$.indexOf("y")&&(q.traceCoord[1]=void 0),-1===$.indexOf("z")&&(q.traceCoord[2]=void 0),-1===$.indexOf("text")&&(q.textLabel=void 0),-1===$.indexOf("name")&&(q.name=void 0)}_.loneHover({x:q.screenCoord[0],y:q.screenCoord[1],xLabel:this.hoverFormatter("xaxis",q.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",q.traceCoord[1]),zLabel:q.traceCoord[2],text:q.textLabel,name:q.name,color:_.castHoverOption(ie,te,"bgcolor")||q.color,borderColor:_.castHoverOption(ie,te,"bordercolor"),fontFamily:_.castHoverOption(ie,te,"font.family"),fontSize:_.castHoverOption(ie,te,"font.size"),fontColor:_.castHoverOption(ie,te,"font.color"),nameLength:_.castHoverOption(ie,te,"namelength"),textAlign:_.castHoverOption(ie,te,"align")},{container:this.svgContainer,gd:this.graphDiv})}}I||this.unhover(),h.draw()}},b.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),_.loneUnhover(this.svgContainer))},b.hoverFormatter=function(h,S){if(void 0!==S){var w=this[h];return T.tickText(w,w.c2l(S),"hover").text}}},12536:function(ne,F,e){"use strict";var M=e(67824).overrideAll,k=e(65460),o=e(98432),T=e(84888).op,_=e(3400),p=e(9616),l="gl3d",t="scene";F.name=l,F.attr=t,F.idRoot=t,F.idRegex=F.attrRegex=_.counterRegex("scene"),F.attributes=e(6636),F.layoutAttributes=e(346),F.baseLayoutAttrOverrides=M({hoverlabel:k.hoverlabel},"plot","nested"),F.supplyLayoutDefaults=e(5208),F.plot=function(i){for(var r=i._fullLayout,n=i._fullData,a=r._subplots[l],s=0;s<a.length;s++){var u=a[s],f=T(n,l,u),c=r[u],y=c.camera,d=c._scene;d||(d=new o({id:u,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio,camera:y},r),c._scene=d),d.viewInitial||(d.viewInitial={up:{x:y.up.x,y:y.up.y,z:y.up.z},eye:{x:y.eye.x,y:y.eye.y,z:y.eye.z},center:{x:y.center.x,y:y.center.y,z:y.center.z}}),d.plot(f,r,i.layout)}},F.clean=function(i,r,n,a){for(var s=a._subplots[l]||[],u=0;u<s.length;u++){var f=s[u];!r[f]&&a[f]._scene&&(a[f]._scene.destroy(),a._infolayer&&a._infolayer.selectAll(".annotation-"+f).remove())}},F.toSVG=function(i){for(var r=i._fullLayout,n=r._subplots[l],a=r._size,s=0;s<n.length;s++){var u=r[n[s]],f=u.domain,c=u._scene,y=c.toImage("png");r._glimages.append("svg:image").attr({xmlns:p.svg,"xlink:href":y,x:a.l+a.w*f.x[0],y:a.t+a.h*(1-f.y[1]),width:a.w*(f.x[1]-f.x[0]),height:a.h*(f.y[1]-f.y[0]),preserveAspectRatio:"none"}),c.destroy()}},F.cleanId=function(i){if(i.match(/^scene[0-9]*$/)){var r=i.substr(5);return"1"===r&&(r=""),t+r}},F.updateFx=function(i){for(var r=i._fullLayout,n=r._subplots[l],a=0;a<n.length;a++)r[n[a]]._scene.updateFx(r.dragmode,r.hovermode)}},6636:function(ne){"use strict";ne.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},86140:function(ne,F,e){"use strict";var M=e(76308),k=e(94724),o=e(92880).extendFlat,T=e(67824).overrideAll;ne.exports=T({visible:k.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:M.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:k.color,categoryorder:k.categoryorder,categoryarray:k.categoryarray,title:{text:k.title.text,font:k.title.font},type:o({},k.type,{values:["-","linear","log","date","category"]}),autotypenumbers:k.autotypenumbers,autorange:k.autorange,autorangeoptions:{minallowed:k.autorangeoptions.minallowed,maxallowed:k.autorangeoptions.maxallowed,clipmin:k.autorangeoptions.clipmin,clipmax:k.autorangeoptions.clipmax,include:k.autorangeoptions.include,editType:"plot"},rangemode:k.rangemode,minallowed:k.minallowed,maxallowed:k.maxallowed,range:o({},k.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:k.minor.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,mirror:k.mirror,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,showticklabels:k.showticklabels,labelalias:k.labelalias,tickfont:k.tickfont,tickangle:k.tickangle,tickprefix:k.tickprefix,showtickprefix:k.showtickprefix,ticksuffix:k.ticksuffix,showticksuffix:k.showticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,minexponent:k.minexponent,separatethousands:k.separatethousands,tickformat:k.tickformat,tickformatstops:k.tickformatstops,hoverformat:k.hoverformat,showline:k.showline,linecolor:k.linecolor,linewidth:k.linewidth,showgrid:k.showgrid,gridcolor:o({},k.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:k.gridwidth,zeroline:k.zeroline,zerolinecolor:k.zerolinecolor,zerolinewidth:k.zerolinewidth,_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}},"plot","from-root")},64380:function(ne,F,e){"use strict";var M=e(49760).mix,k=e(3400),o=e(31780),T=e(86140),_=e(14944),p=e(28336),l=["xaxis","yaxis","zaxis"];ne.exports=function(t,i,r){var n,a;function s(c,y){return k.coerce(n,a,T,c,y)}for(var u=0;u<l.length;u++){var f=l[u];n=t[f]||{},(a=o.newContainer(i,f))._id=f[0]+r.scene,a._name=f,_(n,a,s,r),p(n,a,s,{font:r.font,letter:f[0],data:r.data,showGrid:!0,noAutotickangles:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,noInsiderange:!0,bgColor:r.bgColor,calendar:r.calendar},r.fullLayout),s("gridcolor",M(a.color,r.bgColor,72.72727272727273).toRgbString()),s("title.text",f[0]),a.setScale=k.noop,s("showspikes")&&(s("spikesides"),s("spikethickness"),s("spikecolor",a.color)),s("showaxeslabels"),s("showbackground")&&s("backgroundcolor")}}},44728:function(ne,F,e){"use strict";var M=e(43080),k=e(3400),o=["xaxis","yaxis","zaxis"];function T(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickFontWeight=["normal","normal","normal","normal"],this.tickFontStyle=["normal","normal","normal","normal"],this.tickFontVariant=["normal","normal","normal","normal"],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelFontWeight=["normal","normal","normal","normal"],this.labelFontStyle=["normal","normal","normal","normal"],this.labelFontVariant=["normal","normal","normal","normal"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}T.prototype.merge=function(_,p){for(var l=this,t=0;t<3;++t){var i=p[o[t]];i.visible?(l.labels[t]=_._meta?k.templateString(i.title.text,_._meta):i.title.text,"font"in i.title&&(i.title.font.color&&(l.labelColor[t]=M(i.title.font.color)),i.title.font.family&&(l.labelFont[t]=i.title.font.family),i.title.font.size&&(l.labelSize[t]=i.title.font.size),i.title.font.weight&&(l.labelFontWeight[t]=i.title.font.weight),i.title.font.style&&(l.labelFontStyle[t]=i.title.font.style),i.title.font.variant&&(l.labelFontVariant[t]=i.title.font.variant)),"showline"in i&&(l.lineEnable[t]=i.showline),"linecolor"in i&&(l.lineColor[t]=M(i.linecolor)),"linewidth"in i&&(l.lineWidth[t]=i.linewidth),"showgrid"in i&&(l.gridEnable[t]=i.showgrid),"gridcolor"in i&&(l.gridColor[t]=M(i.gridcolor)),"gridwidth"in i&&(l.gridWidth[t]=i.gridwidth),"log"===i.type?l.zeroEnable[t]=!1:"zeroline"in i&&(l.zeroEnable[t]=i.zeroline),"zerolinecolor"in i&&(l.zeroLineColor[t]=M(i.zerolinecolor)),"zerolinewidth"in i&&(l.zeroLineWidth[t]=i.zerolinewidth),l.lineTickEnable[t]=!(!("ticks"in i)||!i.ticks),"ticklen"in i&&(l.lineTickLength[t]=l._defaultLineTickLength[t]=i.ticklen),"tickcolor"in i&&(l.lineTickColor[t]=M(i.tickcolor)),"tickwidth"in i&&(l.lineTickWidth[t]=i.tickwidth),"tickangle"in i&&(l.tickAngle[t]="auto"===i.tickangle?-3600:Math.PI*-i.tickangle/180),"showticklabels"in i&&(l.tickEnable[t]=i.showticklabels),"tickfont"in i&&(i.tickfont.color&&(l.tickColor[t]=M(i.tickfont.color)),i.tickfont.family&&(l.tickFont[t]=i.tickfont.family),i.tickfont.size&&(l.tickSize[t]=i.tickfont.size),i.tickfont.weight&&(l.tickFontWeight[t]=i.tickfont.weight),i.tickfont.style&&(l.tickFontStyle[t]=i.tickfont.style),i.tickfont.variant&&(l.tickFontVariant[t]=i.tickfont.variant)),"mirror"in i?-1!==["ticks","all","allticks"].indexOf(i.mirror)?(l.lineTickMirror[t]=!0,l.lineMirror[t]=!0):!0===i.mirror?(l.lineTickMirror[t]=!1,l.lineMirror[t]=!0):(l.lineTickMirror[t]=!1,l.lineMirror[t]=!1):l.lineMirror[t]=!1,"showbackground"in i&&!1!==i.showbackground?(l.backgroundEnable[t]=!0,l.backgroundColor[t]=M(i.backgroundcolor)):l.backgroundEnable[t]=!1):(l.tickEnable[t]=!1,l.labelEnable[t]=!1,l.lineEnable[t]=!1,l.lineTickEnable[t]=!1,l.gridEnable[t]=!1,l.zeroEnable[t]=!1,l.backgroundEnable[t]=!1)}},ne.exports=function(_,p){var l=new T;return l.merge(_,p),l}},5208:function(ne,F,e){"use strict";var M=e(3400),k=e(76308),o=e(24040),T=e(168),_=e(64380),p=e(346),l=e(84888).op,t="gl3d";function i(r,n,a,s){for(var u=a("bgcolor"),f=k.combine(u,s.paper_bgcolor),c=["up","center","eye"],y=0;y<c.length;y++)a("camera."+c[y]+".x"),a("camera."+c[y]+".y"),a("camera."+c[y]+".z");a("camera.projection.type");var d=!!a("aspectratio.x")&&!!a("aspectratio.y")&&!!a("aspectratio.z"),m=a("aspectmode",d?"manual":"auto");d||(r.aspectratio=n.aspectratio={x:1,y:1,z:1},"manual"===m&&(n.aspectmode="auto"),r.aspectmode=n.aspectmode);var g=l(s.fullData,t,s.id);_(r,n,{font:s.font,scene:s.id,data:g,bgColor:f,calendar:s.calendar,autotypenumbersDflt:s.autotypenumbersDflt,fullLayout:s.fullLayout}),o.getComponentMethod("annotations3d","handleDefaults")(r,n,s);var x=s.getDfltFromLayout("dragmode");if(!1!==x&&!x)if(x="orbit",r.camera&&r.camera.up){var v=r.camera.up.x,b=r.camera.up.y,h=r.camera.up.z;0!==h&&(v&&b&&h?h/Math.sqrt(v*v+b*b+h*h)>.999&&(x="turntable"):x="turntable")}else x="turntable";a("dragmode",x),a("hovermode",s.getDfltFromLayout("hovermode"))}ne.exports=function(r,n,a){var s=n._basePlotModules.length>1;T(r,n,a,{type:t,attributes:p,handleDefaults:i,fullLayout:n,font:n.font,fullData:a,getDfltFromLayout:function(u){if(!s)return M.validate(r[u],p[u])?r[u]:void 0},autotypenumbersDflt:n.autotypenumbers,paper_bgcolor:n.paper_bgcolor,calendar:n.calendar})}},346:function(ne,F,e){"use strict";var M=e(86140),k=e(86968).u,o=e(92880).extendFlat,T=e(3400).counterRegex;function _(p,l,t){return{x:{valType:"number",dflt:p,editType:"camera"},y:{valType:"number",dflt:l,editType:"camera"},z:{valType:"number",dflt:t,editType:"camera"},editType:"camera"}}ne.exports={_arrayAttrRegexps:[T("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:o(_(0,0,1),{}),center:o(_(0,0,0),{}),eye:o(_(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:k({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:M,yaxis:M,zaxis:M,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},9020:function(ne,F,e){"use strict";var M=e(43080),k=["xaxis","yaxis","zaxis"];function o(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}o.prototype.merge=function(T){for(var _=0;_<3;++_){var p=T[k[_]];p.visible?(this.enabled[_]=p.showspikes,this.colors[_]=M(p.spikecolor),this.drawSides[_]=p.spikesides,this.lineWidth[_]=p.spikethickness):(this.enabled[_]=!1,this.drawSides[_]=!1)}},ne.exports=function(T){var _=new o;return _.merge(T),_}},87152:function(ne,F,e){"use strict";ne.exports=function(_){for(var p=_.axesOptions,l=_.glplot.axesPixels,t=_.fullSceneLayout,i=[[],[],[]],r=0;r<3;++r){var n=t[o[r]];if(n._length=(l[r].hi-l[r].lo)*l[r].pixelsPerDataUnit/_.dataScale[r],Math.abs(n._length)===1/0||isNaN(n._length))i[r]=[];else{n._input_range=n.range.slice(),n.range[0]=l[r].lo/_.dataScale[r],n.range[1]=l[r].hi/_.dataScale[r],n._m=1/(_.dataScale[r]*l[r].pixelsPerDataUnit),n.range[0]===n.range[1]&&(n.range[0]-=1,n.range[1]+=1);var a=n.tickmode;if("auto"===n.tickmode){n.tickmode="linear";var s=n.nticks||k.constrain(n._length/40,4,9);M.autoTicks(n,Math.abs(n.range[1]-n.range[0])/s)}for(var u=M.calcTicks(n,{msUTC:!0}),f=0;f<u.length;++f)u[f].x=u[f].x*_.dataScale[r],"date"===n.type&&(u[f].text=u[f].text.replace(/\<br\>/g," "));i[r]=u,n.tickmode=a}}for(p.ticks=i,r=0;r<3;++r)for(T[r]=.5*(_.glplot.bounds[0][r]+_.glplot.bounds[1][r]),f=0;f<2;++f)p.bounds[f][r]=_.glplot.bounds[f][r];_.contourLevels=function(c){for(var y=new Array(3),d=0;d<3;++d){for(var m=c[d],g=new Array(m.length),x=0;x<m.length;++x)g[x]=m[x].x;y[d]=g}return y}(i)};var M=e(54460),k=e(3400),o=["xaxis","yaxis","zaxis"],T=[0,0,0]},94424:function(ne){"use strict";function F(e,M){var k,o,T=[0,0,0,0];for(k=0;k<4;++k)for(o=0;o<4;++o)T[o]+=e[4*k+o]*M[k];return T}ne.exports=function(e,M){return F(e.projection,F(e.view,F(e.model,[M[0],M[1],M[2],1])))}},98432:function(ne,F,e){"use strict";var M,k,o=e(67792).gl_plot3d,T=o.createCamera,_=o.createScene,p=e(5408),l=e(89184),t=e(24040),i=e(3400),r=i.preserveDrawingBuffer(),n=e(54460),a=e(93024),s=e(43080),u=e(16576),f=e(94424),c=e(44728),y=e(9020),d=e(87152),m=e(19280).applyAutorangeOptions,g=!1;function x(w,E){var P=document.createElement("div"),I=w.container;this.graphDiv=w.graphDiv;var O=document.createElementNS("http://www.w3.org/2000/svg","svg");O.style.position="absolute",O.style.top=O.style.left="0px",O.style.width=O.style.height="100%",O.style["z-index"]=20,O.style["pointer-events"]="none",P.appendChild(O),this.svgContainer=O,P.id=w.id,P.style.position="absolute",P.style.top=P.style.left="0px",P.style.width=P.style.height="100%",I.appendChild(P),this.fullLayout=E,this.id=w.id||"scene",this.fullSceneLayout=E[this.id],this.plotArgs=[[],{},{}],this.axesOptions=c(E,E[this.id]),this.spikeOptions=y(E[this.id]),this.container=P,this.staticMode=!!w.staticPlot,this.pixelRatio=this.pixelRatio||w.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=t.getComponentMethod("annotations3d","convert"),this.drawAnnotations=t.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var v=x.prototype;v.prepareOptions=function(){var w=this,E={canvas:w.canvas,gl:w.gl,glOptions:{preserveDrawingBuffer:r,premultipliedAlpha:!0,antialias:!0},container:w.container,axes:w.axesOptions,spikes:w.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:w.camera,pixelRatio:w.pixelRatio};if(w.staticMode){if(!(k||(M=document.createElement("canvas"),k=p({canvas:M,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");E.gl=k,E.canvas=M}return E};var b=!0;v.tryCreatePlot=function(){var w=this,E=w.prepareOptions(),P=!0;try{w.glplot=_(E)}catch{if(w.staticMode||!b||r)P=!1;else{i.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{r=E.glOptions.preserveDrawingBuffer=!0,w.glplot=_(E)}catch{r=E.glOptions.preserveDrawingBuffer=!1,P=!1}}}return b=!1,P},v.initializeGLCamera=function(){var w=this,E=w.fullSceneLayout.camera;w.camera=T(w.container,{center:[E.center.x,E.center.y,E.center.z],eye:[E.eye.x,E.eye.y,E.eye.z],up:[E.up.x,E.up.y,E.up.z],_ortho:"orthographic"===E.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})},v.initializeGLPlot=function(){var w=this;if(w.initializeGLCamera(),!w.tryCreatePlot())return u(w);w.traces={},w.make4thDimension();var E=w.graphDiv,P=E.layout,I=function(){var z={};return w.isCameraChanged(P)&&(z[w.id+".camera"]=w.getCamera()),w.isAspectChanged(P)&&(z[w.id+".aspectratio"]=w.glplot.getAspectratio(),"manual"!==P[w.id].aspectmode&&(w.fullSceneLayout.aspectmode=P[w.id].aspectmode=z[w.id+".aspectmode"]="manual")),z},O=function(z){if(!1!==z.fullSceneLayout.dragmode){var U=I();z.saveLayout(P),z.graphDiv.emit("plotly_relayout",U)}};return w.glplot.canvas&&(w.glplot.canvas.addEventListener("mouseup",function(){O(w)}),w.glplot.canvas.addEventListener("touchstart",function(){g=!0}),w.glplot.canvas.addEventListener("wheel",function(z){if(E._context._scrollZoom.gl3d){if(w.camera._ortho){var U=z.deltaX>z.deltaY?1.1:.9090909090909091,R=w.glplot.getAspectratio();w.glplot.setAspectratio({x:U*R.x,y:U*R.y,z:U*R.z})}O(w)}},!!l&&{passive:!1}),w.glplot.canvas.addEventListener("mousemove",function(){if(!1!==w.fullSceneLayout.dragmode&&0!==w.camera.mouseListener.buttons){var z=I();w.graphDiv.emit("plotly_relayouting",z)}}),w.staticMode||w.glplot.canvas.addEventListener("webglcontextlost",function(z){E&&E.emit&&E.emit("plotly_webglcontextlost",{event:z,layer:w.id})},!1)),w.glplot.oncontextloss=function(){w.recoverContext()},w.glplot.onrender=function(){w.render()},!0},v.render=function(){var w,E=this,P=E.graphDiv,I=E.svgContainer,O=E.container.getBoundingClientRect();P._fullLayout._calcInverseTransform(P);var R=O.width*P._fullLayout._invScaleX,j=O.height*P._fullLayout._invScaleY;I.setAttributeNS(null,"viewBox","0 0 "+R+" "+j),I.setAttributeNS(null,"width",R),I.setAttributeNS(null,"height",j),d(E),E.glplot.axes.update(E.axesOptions);for(var Y=Object.keys(E.traces),B=null,V=E.glplot.selection,q=0;q<Y.length;++q)"skip"!==(w=E.traces[Y[q]]).data.hoverinfo&&w.handlePick(V)&&(B=w),w.setContourLevels&&w.setContourLevels();function ie(ve,xe,Ce){var Oe=E.fullSceneLayout[ve+"axis"];return"log"!==Oe.type&&(xe=Oe.d2l(xe)),n.hoverLabelText(Oe,xe,Ce)}if(null!==B){var ee,te=f(E.glplot.cameraParams,V.dataCoordinate),$=P._fullData[(w=B.data).index],J=V.index,X={xLabel:ie("x",V.traceCoordinate[0],w.xhoverformat),yLabel:ie("y",V.traceCoordinate[1],w.yhoverformat),zLabel:ie("z",V.traceCoordinate[2],w.zhoverformat)},ae=a.castHoverinfo($,E.fullLayout,J),ce=(ae||"").split("+"),le=ae&&"all"===ae;$.hovertemplate||le||(-1===ce.indexOf("x")&&(X.xLabel=void 0),-1===ce.indexOf("y")&&(X.yLabel=void 0),-1===ce.indexOf("z")&&(X.zLabel=void 0),-1===ce.indexOf("text")&&(V.textLabel=void 0),-1===ce.indexOf("name")&&(B.name=void 0));var pe=[];"cone"===w.type||"streamtube"===w.type?(X.uLabel=ie("x",V.traceCoordinate[3],w.uhoverformat),(le||-1!==ce.indexOf("u"))&&pe.push("u: "+X.uLabel),X.vLabel=ie("y",V.traceCoordinate[4],w.vhoverformat),(le||-1!==ce.indexOf("v"))&&pe.push("v: "+X.vLabel),X.wLabel=ie("z",V.traceCoordinate[5],w.whoverformat),(le||-1!==ce.indexOf("w"))&&pe.push("w: "+X.wLabel),X.normLabel=V.traceCoordinate[6].toPrecision(3),(le||-1!==ce.indexOf("norm"))&&pe.push("norm: "+X.normLabel),"streamtube"===w.type&&(X.divergenceLabel=V.traceCoordinate[7].toPrecision(3),(le||-1!==ce.indexOf("divergence"))&&pe.push("divergence: "+X.divergenceLabel)),V.textLabel&&pe.push(V.textLabel),ee=pe.join("<br>")):"isosurface"===w.type||"volume"===w.type?(X.valueLabel=n.hoverLabelText(E._mockAxis,E._mockAxis.d2l(V.traceCoordinate[3]),w.valuehoverformat),pe.push("value: "+X.valueLabel),V.textLabel&&pe.push(V.textLabel),ee=pe.join("<br>")):ee=V.textLabel;var we={x:V.traceCoordinate[0],y:V.traceCoordinate[1],z:V.traceCoordinate[2],data:$._input,fullData:$,curveNumber:$.index,pointNumber:J};a.appendArrayPointValue(we,$,J),w._module.eventData&&(we=$._module.eventData(we,V,$,{},J));var Te={points:[we]};if(E.fullSceneLayout.hovermode){var ye=[];a.loneHover({trace:$,x:(.5+.5*te[0]/te[3])*R,y:(.5-.5*te[1]/te[3])*j,xLabel:X.xLabel,yLabel:X.yLabel,zLabel:X.zLabel,text:ee,name:B.name,color:a.castHoverOption($,J,"bgcolor")||B.color,borderColor:a.castHoverOption($,J,"bordercolor"),fontFamily:a.castHoverOption($,J,"font.family"),fontSize:a.castHoverOption($,J,"font.size"),fontColor:a.castHoverOption($,J,"font.color"),nameLength:a.castHoverOption($,J,"namelength"),textAlign:a.castHoverOption($,J,"align"),hovertemplate:i.castOption($,J,"hovertemplate"),hovertemplateLabels:i.extendFlat({},we,X),eventData:[we]},{container:I,gd:P,inOut_bbox:ye}),we.bbox=ye[0]}P.emit(V.distance<5&&(V.buttons||g)?"plotly_click":"plotly_hover",Te),this.oldEventData=Te}else a.loneUnhover(I),this.oldEventData&&P.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;E.drawAnnotations(E)},v.recoverContext=function(){var w=this;w.glplot.dispose();var E=function(){w.glplot.gl.isContextLost()?requestAnimationFrame(E):w.initializeGLPlot()?w.plot.apply(w,w.plotArgs):i.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(E)};var h=["xaxis","yaxis","zaxis"];function S(w,E,P){for(var I=w.fullSceneLayout,O=0;O<3;O++){var z=h[O],U=z.charAt(0),R=I[z],j=E[U],Y=E[U+"calendar"],B=E["_"+U+"length"];if(i.isArrayOrTypedArray(j))for(var V,q=0;q<(B||j.length);q++)if(i.isArrayOrTypedArray(j[q]))for(var ie=0;ie<j[q].length;++ie)V=R.d2l(j[q][ie],0,Y),!isNaN(V)&&isFinite(V)&&(P[0][O]=Math.min(P[0][O],V),P[1][O]=Math.max(P[1][O],V));else V=R.d2l(j[q],0,Y),!isNaN(V)&&isFinite(V)&&(P[0][O]=Math.min(P[0][O],V),P[1][O]=Math.max(P[1][O],V));else P[0][O]=Math.min(P[0][O],0),P[1][O]=Math.max(P[1][O],B-1)}}v.plot=function(w,E,P){var I=this;if(I.plotArgs=[w,E,P],!I.glplot.contextLost){var O,z,U,R,j,Y,B=E[I.id],V=P[I.id];I.fullLayout=E,I.fullSceneLayout=B,I.axesOptions.merge(E,B),I.spikeOptions.merge(B),I.setViewport(B),I.updateFx(B.dragmode,B.hovermode),I.camera.enableWheel=I.graphDiv._context._scrollZoom.gl3d,I.glplot.setClearColor(s(B.bgcolor)),I.setConvert(j),w?Array.isArray(w)||(w=[w]):w=[];var q=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(U=0;U<w.length;++U)!0===(O=w[U]).visible&&0!==O._length&&S(this,O,q);!function(Pe,Fe){for(var Be=Pe.fullSceneLayout,me=Be.annotations||[],Me=0;Me<3;Me++)for(var Le=h[Me],Ne=Le.charAt(0),Re=Be[Le],He=0;He<me.length;He++){var Ze=me[He];if(Ze.visible){var nt=Re.r2l(Ze[Ne]);!isNaN(nt)&&isFinite(nt)&&(Fe[0][Me]=Math.min(Fe[0][Me],nt),Fe[1][Me]=Math.max(Fe[1][Me],nt))}}}(this,q);var ie=[1,1,1];for(R=0;R<3;++R)ie[R]=q[1][R]===q[0][R]?1:1/(q[1][R]-q[0][R]);for(I.dataScale=ie,I.convertAnnotations(this),U=0;U<w.length;++U)!0===(O=w[U]).visible&&0!==O._length&&((z=I.traces[O.uid])?z.data.type===O.type?z.update(O):(z.dispose(),z=O._module.plot(this,O),I.traces[O.uid]=z):(z=O._module.plot(this,O),I.traces[O.uid]=z),z.name=O.name);var te=Object.keys(I.traces);e:for(U=0;U<te.length;++U){for(R=0;R<w.length;++R)if(w[R].uid===te[U]&&!0===w[R].visible&&0!==w[R]._length)continue e;(z=I.traces[te[U]]).dispose(),delete I.traces[te[U]]}I.glplot.objects.sort(function(Pe,Fe){return Pe._trace.data.index-Fe._trace.data.index});var ee,$=[[0,0,0],[0,0,0]],J=[],X={};for(U=0;U<3;++U){var ae;if((Y=(j=B[h[U]]).type)in X?(X[Y].acc*=ie[U],X[Y].count+=1):X[Y]={acc:ie[U],count:1},j.autorange){$[0][U]=1/0,$[1][U]=-1/0;var ce=I.glplot.objects,le=I.fullSceneLayout.annotations||[],pe=j._name.charAt(0);for(R=0;R<ce.length;R++){var we=ce[R],Te=we.bounds,ye=we._trace.data._pad||0;$[0][U]="ErrorBars"===we.constructor.name&&j._lowerLogErrorBound?Math.min($[0][U],j._lowerLogErrorBound):Math.min($[0][U],Te[0][U]/ie[U]-ye),$[1][U]=Math.max($[1][U],Te[1][U]/ie[U]+ye)}for(R=0;R<le.length;R++){var ve=le[R];if(ve.visible){var xe=j.r2l(ve[pe]);$[0][U]=Math.min($[0][U],xe),$[1][U]=Math.max($[1][U],xe)}}if("rangemode"in j&&"tozero"===j.rangemode&&($[0][U]=Math.min($[0][U],0),$[1][U]=Math.max($[1][U],0)),$[0][U]>$[1][U])$[0][U]=-1,$[1][U]=1;else{var Ce=$[1][U]-$[0][U];$[0][U]-=Ce/32,$[1][U]+=Ce/32}if(ae=m(ae=[$[0][U],$[1][U]],j),$[0][U]=ae[0],$[1][U]=ae[1],j.isReversed()){var Oe=$[0][U];$[0][U]=$[1][U],$[1][U]=Oe}}else $[0][U]=j.r2l((ae=j.range)[0]),$[1][U]=j.r2l(ae[1]);$[0][U]===$[1][U]&&($[0][U]-=1,$[1][U]+=1),J[U]=$[1][U]-$[0][U],j.range=[$[0][U],$[1][U]],j.limitRange(),I.glplot.setBounds(U,{min:j.range[0]*ie[U],max:j.range[1]*ie[U]})}var be=B.aspectmode;if("cube"===be)ee=[1,1,1];else if("manual"===be){var ue=B.aspectratio;ee=[ue.x,ue.y,ue.z]}else{if("auto"!==be&&"data"!==be)throw new Error("scene.js aspectRatio was not one of the enumerated types");var se=[1,1,1];for(U=0;U<3;++U){var ge=X[Y=(j=B[h[U]]).type];se[U]=Math.pow(ge.acc,1/ge.count)/ie[U]}ee="data"===be||Math.max.apply(null,se)/Math.min.apply(null,se)<=4?se:[1,1,1]}B.aspectratio.x=V.aspectratio.x=ee[0],B.aspectratio.y=V.aspectratio.y=ee[1],B.aspectratio.z=V.aspectratio.z=ee[2],I.glplot.setAspectratio(B.aspectratio),I.viewInitial.aspectratio||(I.viewInitial.aspectratio={x:B.aspectratio.x,y:B.aspectratio.y,z:B.aspectratio.z}),I.viewInitial.aspectmode||(I.viewInitial.aspectmode=B.aspectmode);var Ie=B.domain||null,ke=E._size||null;if(Ie&&ke){var Se=I.container.style;Se.position="absolute",Se.left=ke.l+Ie.x[0]*ke.w+"px",Se.top=ke.t+(1-Ie.y[1])*ke.h+"px",Se.width=ke.w*(Ie.x[1]-Ie.x[0])+"px",Se.height=ke.h*(Ie.y[1]-Ie.y[0])+"px"}I.glplot.redraw()}},v.destroy=function(){var w=this;w.glplot&&(w.camera.mouseListener.enabled=!1,w.container.removeEventListener("wheel",w.camera.wheelListener),w.camera=null,w.glplot.dispose(),w.container.parentNode.removeChild(w.container),w.glplot=null)},v.getCamera=function(){var w,E=this;return E.camera.view.recalcMatrix(E.camera.view.lastT()),{up:{x:(w=E.camera).up[0],y:w.up[1],z:w.up[2]},center:{x:w.center[0],y:w.center[1],z:w.center[2]},eye:{x:w.eye[0],y:w.eye[1],z:w.eye[2]},projection:{type:!0===w._ortho?"orthographic":"perspective"}}},v.setViewport=function(w){var E,P=this,I=w.camera;P.camera.lookAt.apply(this,[[(E=I).eye.x,E.eye.y,E.eye.z],[E.center.x,E.center.y,E.center.z],[E.up.x,E.up.y,E.up.z]]),P.glplot.setAspectratio(w.aspectratio),"orthographic"===I.projection.type!==P.camera._ortho&&(P.glplot.redraw(),P.glplot.clearRGBA(),P.glplot.dispose(),P.initializeGLPlot())},v.isCameraChanged=function(w){var E=this.getCamera(),P=i.nestedProperty(w,this.id+".camera").get();var R,j,Y,B,V,q,O=!1;if(void 0===P)O=!0;else{for(var z=0;z<3;z++)for(var U=0;U<3;U++)if(R=E,B=U,V=void 0,q=void 0,q=["x","y","z"],!(j=P)[(V=["up","center","eye"])[Y=z]]||R[V[Y]][q[B]]!==j[V[Y]][q[B]]){O=!0;break}(!P.projection||E.projection&&E.projection.type!==P.projection.type)&&(O=!0)}return O},v.isAspectChanged=function(w){var E=this.glplot.getAspectratio(),P=i.nestedProperty(w,this.id+".aspectratio").get();return void 0===P||P.x!==E.x||P.y!==E.y||P.z!==E.z},v.saveLayout=function(w){var E,P,I,O,z,U,R=this,j=R.fullLayout,Y=R.isCameraChanged(w),B=R.isAspectChanged(w),V=Y||B;if(V){var q={};Y&&(E=R.getCamera(),I=(P=i.nestedProperty(w,R.id+".camera")).get(),q[R.id+".camera"]=I),B&&(O=R.glplot.getAspectratio(),U=(z=i.nestedProperty(w,R.id+".aspectratio")).get(),q[R.id+".aspectratio"]=U),t.call("_storeDirectGUIEdit",w,j._preGUI,q),Y&&(P.set(E),i.nestedProperty(j,R.id+".camera").set(E)),B&&(z.set(O),i.nestedProperty(j,R.id+".aspectratio").set(O),R.glplot.redraw())}return V},v.updateFx=function(w,E){var P=this,I=P.camera;if(I)if("orbit"===w)I.mode="orbit",I.keyBindingMode="rotate";else if("turntable"===w){I.up=[0,0,1],I.mode="turntable",I.keyBindingMode="rotate";var O=P.graphDiv,z=O._fullLayout,U=P.fullSceneLayout.camera,R=U.up.x,j=U.up.y,Y=U.up.z;if(Y/Math.sqrt(R*R+j*j+Y*Y)<.999){var B=P.id+".camera.up",V={x:0,y:0,z:1},q={};q[B]=V;var ie=O.layout;t.call("_storeDirectGUIEdit",ie,z._preGUI,q),U.up=V,i.nestedProperty(ie,B).set(V)}}else I.keyBindingMode=w;P.fullSceneLayout.hovermode=E},v.toImage=function(w){var E=this;w||(w="png"),E.staticMode&&E.container.appendChild(M),E.glplot.redraw();var P=E.glplot.gl,I=P.drawingBufferWidth,O=P.drawingBufferHeight;P.bindFramebuffer(P.FRAMEBUFFER,null);var z=new Uint8Array(I*O*4);P.readPixels(0,0,I,O,P.RGBA,P.UNSIGNED_BYTE,z),function(B,V,q){for(var ie=0,te=q-1;ie<te;++ie,--te)for(var ee=0;ee<V;++ee)for(var $=0;$<4;++$){var J=4*(V*ie+ee)+$,X=4*(V*te+ee)+$,ae=B[J];B[J]=B[X],B[X]=ae}}(z,I,O),function(B,V,q){for(var ie=0;ie<q;++ie)for(var te=0;te<V;++te){var ee=4*(V*ie+te),$=B[ee+3];if($>0)for(var J=255/$,X=0;X<3;++X)B[ee+X]=Math.min(J*B[ee+X],255)}}(z,I,O);var U=document.createElement("canvas");U.width=I,U.height=O;var R,j=U.getContext("2d",{willReadFrequently:!0}),Y=j.createImageData(I,O);switch(Y.data.set(z),j.putImageData(Y,0,0),w){case"jpeg":R=U.toDataURL("image/jpeg");break;case"webp":R=U.toDataURL("image/webp");break;default:R=U.toDataURL("image/png")}return E.staticMode&&E.container.removeChild(M),R},v.setConvert=function(){for(var w=0;w<3;w++){var E=this.fullSceneLayout[h[w]];n.setConvert(E,this.fullLayout),E.setScale=i.noop}},v.make4thDimension=function(){var w=this,E=w.graphDiv._fullLayout;w._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},n.setConvert(w._mockAxis,E)},ne.exports=x},52094:function(ne){"use strict";ne.exports=function(F,e,M,k){k=k||F.length;for(var o=new Array(k),T=0;T<k;T++)o[T]=[F[T],e[T],M[T]];return o}},64859:function(ne,F,e){"use strict";var M=e(25376),k=e(85656),o=e(22548),T=e(92872),_=e(34200),p=e(66741),l=e(92880).extendFlat,t=M({editType:"calc"});t.family.dflt='"Open Sans", verdana, arial, sans-serif',t.size.dflt=12,t.color.dflt=o.defaultLine,ne.exports={font:t,title:{text:{valType:"string",editType:"layoutstyle"},font:M({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:l(p({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:o.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:o.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:o.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:T.newshape,activeshape:T.activeshape,newselection:_.newselection,activeselection:_.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:l({},k.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:M({editType:"layoutstyle"})}}},47552:function(ne,F,e){"use strict";var M=e(95376),k="1.13.4",o='\xa9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',T=['\xa9 <a target="_blank" href="https://carto.com/">Carto</a>',o].join(" "),_=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),p={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:o,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:_,tiles:["https://tiles.stadiamaps.com/tiles/stamen_terrain/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:_,tiles:["https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://tiles.stadiamaps.com/tiles/stamen_watercolor/{z}/{x}/{y}.jpg?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},l=M(p);ne.exports={requiredVersion:k,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:p,styleValuesNonMapbox:l,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install @plotly/mapbox-gl@"+k+"."].join("\n"),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join("\n"),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",l.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join("\n"),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},89032:function(ne,F,e){"use strict";var M=e(3400);ne.exports=function(k,o){var T=k.split(" "),_=T[0],p=T[1],l=M.isArrayOrTypedArray(o)?M.mean(o):o,t=.5+l/100,i=1.5+l/100,r=["",""],n=[0,0];switch(_){case"top":r[0]="top",n[1]=-i;break;case"bottom":r[0]="bottom",n[1]=i}switch(p){case"left":r[1]="right",n[0]=-t;break;case"right":r[1]="left",n[0]=t}return{anchor:r[0]&&r[1]?r.join("-"):r[0]?r[0]:r[1]?r[1]:"center",offset:n}}},33688:function(ne,F,e){"use strict";var M=e(3480),k=e(3400),o=k.strTranslate,T=k.strScale,_=e(84888).KY,p=e(9616),l=e(33428),t=e(43616),i=e(72736),r=e(14440),n="mapbox",a=F.constants=e(47552);function s(u){return"string"==typeof u&&(-1!==a.styleValuesMapbox.indexOf(u)||0===u.indexOf("mapbox://")||0===u.indexOf("stamen"))}F.name=n,F.attr="subplot",F.idRoot=n,F.idRegex=F.attrRegex=k.counterRegex(n),F.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},F.layoutAttributes=e(5232),F.supplyLayoutDefaults=e(5976),F.plot=function(u){var f=u._fullLayout,c=u.calcdata,y=f._subplots[n];if(M.version!==a.requiredVersion)throw new Error(a.wrongVersionErrorMsg);var d=function(h,S){var w=h._fullLayout;if(""===h._context.mapboxAccessToken)return"";for(var E=[],P=[],I=!1,O=!1,z=0;z<S.length;z++){var U=w[S[z]],R=U.accesstoken;s(U.style)&&(R?k.pushUnique(E,R):(s(U._input.style)&&(k.error("Uses Mapbox map style, but did not set an access token."),I=!0),O=!0)),R&&k.pushUnique(P,R)}if(O){var j=I?a.noAccessTokenErrorMsg:a.missingStyleErrorMsg;throw k.error(j),new Error(j)}return E.length?(E.length>1&&k.warn(a.multipleTokensErrorMsg),E[0]):(P.length&&k.log(["Listed mapbox access token(s)",P.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(u,y);M.accessToken=d;for(var m=0;m<y.length;m++){var g=y[m],x=_(c,n,g),v=f[g],b=v._subplot;b||(b=new r(u,g),f[g]._subplot=b),b.viewInitial||(b.viewInitial={center:k.extendFlat({},v.center),zoom:v.zoom,bearing:v.bearing,pitch:v.pitch}),b.plot(x,f,u._promises)}},F.clean=function(u,f,c,y){for(var d=y._subplots[n]||[],m=0;m<d.length;m++){var g=d[m];!f[g]&&y[g]._subplot&&y[g]._subplot.destroy()}},F.toSVG=function(u){for(var f=u._fullLayout,c=f._subplots[n],y=f._size,d=0;d<c.length;d++){var m=f[c[d]],g=m.domain,x=m._subplot.toImage("png");f._glimages.append("svg:image").attr({xmlns:p.svg,"xlink:href":x,x:y.l+y.w*g.x[0],y:y.t+y.h*(1-g.y[1]),width:y.w*(g.x[1]-g.x[0]),height:y.h*(g.y[1]-g.y[0]),preserveAspectRatio:"none"});var v=l.select(m._subplot.div);if(null!==v.select(".mapboxgl-ctrl-logo").node().offsetParent){var b=f._glimages.append("g");b.attr("transform",o(y.l+y.w*g.x[0]+10,y.t+y.h*(1-g.y[0])-31)),b.append("path").attr("d",a.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),b.append("path").attr("d",a.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),b.append("path").attr("d",a.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),b.append("polygon").attr("points",a.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var h=v.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),S=f._glimages.append("g"),w=S.append("text");w.text(h).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":h});var E=t.bBox(w.node()),P=y.w*(g.x[1]-g.x[0]);if(E.width>P/2){var I=h.split("|").join("<br>");w.text(I).attr("data-unformatted",I).call(i.convertToTspans,u),E=t.bBox(w.node())}w.attr("transform",o(-3,8-E.height)),S.insert("rect",".static-attribution").attr({x:-E.width-6,y:-E.height-3,width:E.width+6,height:E.height+3,fill:"rgba(255, 255, 255, 0.75)"});var O=1;E.width+6>P&&(O=P/(E.width+6));var z=[y.l+y.w*g.x[1],y.t+y.h*(1-g.y[0])];S.attr("transform",o(z[0],z[1])+T(O))}},F.updateFx=function(u){for(var f=u._fullLayout,c=f._subplots[n],y=0;y<c.length;y++)f[c[y]]._subplot.updateFx(f)}},22360:function(ne,F,e){"use strict";var M=e(3400),k=e(72736).sanitizeHTML,o=e(89032),T=e(47552);function _(i,r){this.subplot=i,this.uid=i.uid+"-"+r,this.index=r,this.idSource="source-"+this.uid,this.idLayer=T.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var p=_.prototype;function l(i){if(!i.visible)return!1;var r=i.source;if(Array.isArray(r)&&r.length>0){for(var n=0;n<r.length;n++)if("string"!=typeof r[n]||0===r[n].length)return!1;return!0}return M.isPlainObject(r)||"string"==typeof r&&r.length>0}function t(i){var r={},n={};switch(i.type){case"circle":M.extendFlat(n,{"circle-radius":i.circle.radius,"circle-color":i.color,"circle-opacity":i.opacity});break;case"line":M.extendFlat(n,{"line-width":i.line.width,"line-color":i.color,"line-opacity":i.opacity,"line-dasharray":i.line.dash});break;case"fill":M.extendFlat(n,{"fill-color":i.color,"fill-outline-color":i.fill.outlinecolor,"fill-opacity":i.opacity});break;case"symbol":var a=i.symbol,s=o(a.textposition,a.iconsize);M.extendFlat(r,{"icon-image":a.icon+"-15","icon-size":a.iconsize/10,"text-field":a.text,"text-size":a.textfont.size,"text-anchor":s.anchor,"text-offset":s.offset,"symbol-placement":a.placement}),M.extendFlat(n,{"icon-color":i.color,"text-color":a.textfont.color,"text-opacity":i.opacity});break;case"raster":M.extendFlat(n,{"raster-fade-duration":0,"raster-opacity":i.opacity})}return{layout:r,paint:n}}p.update=function(i){this.visible?this.needsNewImage(i)?this.updateImage(i):this.needsNewSource(i)?(this.removeLayer(),this.updateSource(i),this.updateLayer(i)):this.needsNewLayer(i)?this.updateLayer(i):this.updateStyle(i):(this.updateSource(i),this.updateLayer(i)),this.visible=l(i)},p.needsNewImage=function(i){return this.subplot.map.getSource(this.idSource)&&"image"===this.sourceType&&"image"===i.sourcetype&&(this.source!==i.source||JSON.stringify(this.coordinates)!==JSON.stringify(i.coordinates))},p.needsNewSource=function(i){return this.sourceType!==i.sourcetype||JSON.stringify(this.source)!==JSON.stringify(i.source)||this.layerType!==i.type},p.needsNewLayer=function(i){return this.layerType!==i.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},p.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},p.updateImage=function(i){this.subplot.map.getSource(this.idSource).updateImage({url:i.source,coordinates:i.coordinates});var r=this.findFollowingMapboxLayerId(this.lookupBelow());null!==r&&this.subplot.map.moveLayer(this.idLayer,r)},p.updateSource=function(i){var a,s,u,f,c,r=this.subplot.map;if(r.getSource(this.idSource)&&r.removeSource(this.idSource),this.sourceType=i.sourcetype,this.source=i.source,l(i)){var n=(f=(a=i).source,c={type:u=a.sourcetype},"geojson"===u?s="data":"vector"===u?s="string"==typeof f?"url":"tiles":"raster"===u?(s="tiles",c.tileSize=256):"image"===u&&(s="url",c.coordinates=a.coordinates),c[s]=f,a.sourceattribution&&(c.attribution=k(a.sourceattribution)),c);r.addSource(this.idSource,n)}},p.findFollowingMapboxLayerId=function(i){if("traces"===i)for(var r=this.subplot.getMapLayers(),n=0;n<r.length;n++){var a=r[n].id;if("string"==typeof a&&0===a.indexOf(T.traceLayerPrefix)){i=a;break}}return i},p.updateLayer=function(i){var r=this.subplot,n=t(i),a=this.lookupBelow(),s=this.findFollowingMapboxLayerId(a);this.removeLayer(),l(i)&&r.addLayer({id:this.idLayer,source:this.idSource,"source-layer":i.sourcelayer||"",type:i.type,minzoom:i.minzoom,maxzoom:i.maxzoom,layout:n.layout,paint:n.paint},s),this.layerType=i.type,this.below=a},p.updateStyle=function(i){if(l(i)){var r=t(i);this.subplot.setOptions(this.idLayer,"setLayoutProperty",r.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",r.paint)}},p.removeLayer=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer)},p.dispose=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer),i.getSource(this.idSource)&&i.removeSource(this.idSource)},ne.exports=function(i,r,n){var a=new _(i,r);return a.update(n),a}},5232:function(ne,F,e){"use strict";var M=e(3400),k=e(76308).defaultLine,o=e(86968).u,T=e(25376),_=e(52904).textposition,p=e(67824).overrideAll,l=e(31780).templatedArray,t=e(47552),i=T({noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0});i.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(ne.exports=p({_arrayAttrRegexps:[M.counterRegex("mapbox",".layers",!0)],domain:o({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:t.styleValuesMapbox.concat(t.styleValuesNonMapbox),dflt:t.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:l("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:k},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:k}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:i,textposition:M.extendFlat({},_,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},5976:function(ne,F,e){"use strict";var M=e(3400),k=e(168),o=e(51272),T=e(5232);function _(l,t,i,r){i("accesstoken",r.accessToken),i("style"),i("center.lon"),i("center.lat"),i("zoom"),i("bearing"),i("pitch");var n=i("bounds.west"),a=i("bounds.east"),s=i("bounds.south"),u=i("bounds.north");void 0!==n&&void 0!==a&&void 0!==s&&void 0!==u||delete t.bounds,o(l,t,{name:"layers",handleItemDefaults:p}),t._input=l}function p(l,t){function i(u,f){return M.coerce(l,t,T.layers,u,f)}if(i("visible")){var r,n=i("sourcetype"),a="raster"===n||"image"===n;i("source"),i("sourceattribution"),"vector"===n&&i("sourcelayer"),"image"===n&&i("coordinates"),a&&(r="raster");var s=i("type",r);a&&"raster"!==s&&(s=t.type="raster",M.log("Source types *raster* and *image* must drawn *raster* layer type.")),i("below"),i("color"),i("opacity"),i("minzoom"),i("maxzoom"),"circle"===s&&i("circle.radius"),"line"===s&&(i("line.width"),i("line.dash")),"fill"===s&&i("fill.outlinecolor"),"symbol"===s&&(i("symbol.icon"),i("symbol.iconsize"),i("symbol.text"),M.coerceFont(i,"symbol.textfont",void 0,{noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}),i("symbol.textposition"),i("symbol.placement"))}}ne.exports=function(l,t,i){k(l,t,i,{type:"mapbox",attributes:T,handleDefaults:_,partition:"y",accessToken:t._mapboxAccessToken})}},14440:function(ne,F,e){"use strict";var M=e(3480),k=e(3400),o=e(27144),T=e(24040),_=e(54460),p=e(86476),l=e(93024),t=e(72760),i=t.drawMode,r=t.selectMode,n=e(22676).prepSelect,a=e(22676).clearOutline,s=e(22676).clearSelectionsCache,u=e(22676).selectOnClick,f=e(47552),c=e(22360);function y(b,h){this.id=h,this.gd=b;var S=b._fullLayout,w=b._context;this.container=S._glcontainer.node(),this.isStatic=w.staticPlot,this.uid=S._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(S),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var d=y.prototype;d.plot=function(b,h,S){var w,E=this;E.map&&h[E.id].accesstoken!==E.accessToken&&(E.map.remove(),E.map=null,E.styleObj=null,E.traceHash={},E.layerList=[]),w=new Promise(E.map?function(I,O){E.updateMap(b,h,I,O)}:function(I,O){E.createMap(b,h,I,O)}),S.push(w)},d.createMap=function(b,h,S,w){var E=this,P=h[E.id],I=E.styleObj=g(P.style,h);E.accessToken=P.accesstoken;var O=P.bounds,z=O?[[O.west,O.south],[O.east,O.north]]:null,U=E.map=new M.Map({container:E.div,style:I.style,center:v(P.center),zoom:P.zoom,bearing:P.bearing,pitch:P.pitch,maxBounds:z,interactive:!E.isStatic,preserveDrawingBuffer:E.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new M.AttributionControl({compact:!0}));U._canvas.style.left="0px",U._canvas.style.top="0px",E.rejectOnError(w),E.isStatic||E.initFx(b,h);var R=[];R.push(new Promise(function(j){U.once("load",j)})),R=R.concat(o.fetchTraceGeoData(b)),Promise.all(R).then(function(){E.fillBelowLookup(b,h),E.updateData(b),E.updateLayout(h),E.resolveOnRender(S)}).catch(w)},d.updateMap=function(b,h,S,w){var E=this,P=E.map,I=h[this.id];E.rejectOnError(w);var O=[],z=g(I.style,h);JSON.stringify(E.styleObj)!==JSON.stringify(z)&&(E.styleObj=z,P.setStyle(z.style),E.traceHash={},O.push(new Promise(function(U){P.once("styledata",U)}))),O=O.concat(o.fetchTraceGeoData(b)),Promise.all(O).then(function(){E.fillBelowLookup(b,h),E.updateData(b),E.updateLayout(h),E.resolveOnRender(S)}).catch(w)},d.fillBelowLookup=function(b,h){var S,w,E=h[this.id].layers,P=this.belowLookup={},I=!1;for(S=0;S<b.length;S++){var O=b[S][0].trace,z=O._module;"string"==typeof O.below?w=O.below:z.getBelow&&(w=z.getBelow(O,this)),""===w&&(I=!0),P["trace-"+O.uid]=w||""}for(S=0;S<E.length;S++){var U=E[S];P["layout-"+S]=w="string"==typeof U.below?U.below:I?"traces":""}var R,j,Y={};for(R in P)Y[w=P[R]]?Y[w].push(R):Y[w]=[R];for(w in Y){var B=Y[w];if(B.length>1)for(S=0;S<B.length;S++)0===(R=B[S]).indexOf("trace-")?(j=R.split("trace-")[1],this.traceHash[j]&&(this.traceHash[j].below=null)):0===R.indexOf("layout-")&&(j=R.split("layout-")[1],this.layerList[j]&&(this.layerList[j].below=null))}};var m={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function g(b,h){var S={};if(k.isPlainObject(b))S.id=b.id,S.style=b;else if("string"==typeof b)if(S.id=b,-1!==f.styleValuesMapbox.indexOf(b))S.style=x(b);else if(f.stylesNonMapbox[b]){S.style=f.stylesNonMapbox[b];var w=S.style.sources["plotly-"+b],E=w?w.tiles:void 0;E&&E[0]&&"?api_key="===E[0].slice(-9)&&(E[0]+=h._mapboxAccessToken)}else S.style=b;else S.id=f.styleValueDflt,S.style=x(f.styleValueDflt);return S.transition={duration:0,delay:0},S}function x(b){return f.styleUrlPrefix+b+"-"+f.styleUrlSuffix}function v(b){return[b.lon,b.lat]}d.updateData=function(b){var h,S,w,E,P=this.traceHash,I=b.slice().sort(function(j,Y){return m[j[0].trace.type]-m[Y[0].trace.type]});for(w=0;w<I.length;w++){var O=I[w],z=!1;(h=P[(S=O[0].trace).uid])&&(h.type===S.type?(h.update(O),z=!0):h.dispose()),!z&&S._module&&(P[S.uid]=S._module.plot(this,O))}var U=Object.keys(P);e:for(w=0;w<U.length;w++){var R=U[w];for(E=0;E<b.length;E++)if(R===(S=b[E][0].trace).uid)continue e;(h=P[R]).dispose(),delete P[R]}},d.updateLayout=function(b){var h=this.map,S=b[this.id];this.dragging||this.wheeling||(h.setCenter(v(S.center)),h.setZoom(S.zoom),h.setBearing(S.bearing),h.setPitch(S.pitch)),this.updateLayers(b),this.updateFramework(b),this.updateFx(b),this.map.resize(),this.gd._context._scrollZoom.mapbox?h.scrollZoom.enable():h.scrollZoom.disable()},d.resolveOnRender=function(b){var h=this.map;h.on("render",function S(){h.loaded()&&(h.off("render",S),setTimeout(b,10))})},d.rejectOnError=function(b){var h=this.map;function S(){b(new Error(f.mapOnErrorMsg))}h.once("error",S),h.once("style.error",S),h.once("source.error",S),h.once("tile.error",S),h.once("layer.error",S)},d.createFramework=function(b){var h=this,S=h.div=document.createElement("div");S.id=h.uid,S.style.position="absolute",h.container.appendChild(S),h.xaxis={_id:"x",c2p:function(w){return h.project(w).x}},h.yaxis={_id:"y",c2p:function(w){return h.project(w).y}},h.updateFramework(b),h.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},_.setConvert(h.mockAxis,b)},d.initFx=function(b,h){var S=this,w=S.gd,E=S.map;function P(){l.loneUnhover(h._hoverlayer)}function I(){var O=S.getView();w.emit("plotly_relayouting",S.getViewEditsWithDerived(O))}E.on("moveend",function(O){if(S.map){var z=w._fullLayout;if(O.originalEvent||S.wheeling){var U=z[S.id];T.call("_storeDirectGUIEdit",w.layout,z._preGUI,S.getViewEdits(U));var R=S.getView();U._input.center=U.center=R.center,U._input.zoom=U.zoom=R.zoom,U._input.bearing=U.bearing=R.bearing,U._input.pitch=U.pitch=R.pitch,w.emit("plotly_relayout",S.getViewEditsWithDerived(R))}O.originalEvent&&"mouseup"===O.originalEvent.type?S.dragging=!1:S.wheeling&&(S.wheeling=!1),z._rehover&&z._rehover()}}),E.on("wheel",function(){S.wheeling=!0}),E.on("mousemove",function(O){var z=S.div.getBoundingClientRect(),U=[O.originalEvent.offsetX,O.originalEvent.offsetY];O.target.getBoundingClientRect=function(){return z},S.xaxis.p2c=function(){return E.unproject(U).lng},S.yaxis.p2c=function(){return E.unproject(U).lat},w._fullLayout._rehover=function(){w._fullLayout._hoversubplot===S.id&&w._fullLayout[S.id]&&l.hover(w,O,S.id)},l.hover(w,O,S.id),w._fullLayout._hoversubplot=S.id}),E.on("dragstart",function(){S.dragging=!0,P()}),E.on("zoomstart",P),E.on("mouseout",function(){w._fullLayout._hoversubplot=null}),E.on("drag",I),E.on("zoom",I),E.on("dblclick",function(){var O=w._fullLayout[S.id];T.call("_storeDirectGUIEdit",w.layout,w._fullLayout._preGUI,S.getViewEdits(O));var z=S.viewInitial;E.setCenter(v(z.center)),E.setZoom(z.zoom),E.setBearing(z.bearing),E.setPitch(z.pitch);var U=S.getView();O._input.center=O.center=U.center,O._input.zoom=O.zoom=U.zoom,O._input.bearing=O.bearing=U.bearing,O._input.pitch=O.pitch=U.pitch,w.emit("plotly_doubleclick",null),w.emit("plotly_relayout",S.getViewEditsWithDerived(U))}),S.clearOutline=function(){s(S.dragOptions),a(S.dragOptions.gd)},S.onClickInPanFn=function(O){return function(z){var U=w._fullLayout.clickmode;U.indexOf("select")>-1&&u(z.originalEvent,w,[S.xaxis],[S.yaxis],S.id,O),U.indexOf("event")>-1&&l.click(w,z.originalEvent)}}},d.updateFx=function(b){var h=this,S=h.map;if(!h.isStatic){var P=b.dragmode;h.dragOptions=k.extendDeep(h.dragOptions||{},{dragmode:b.dragmode,element:h.div,gd:h.gd,plotinfo:{id:h.id,domain:b[h.id].domain,xaxis:h.xaxis,yaxis:h.yaxis,fillRangeItems:function(z,U){U.isRect?(z.range={})[h.id]=[O([U.xmin,U.ymin]),O([U.xmax,U.ymax])]:(z.lassoPoints={})[h.id]=U.map(O)}},xaxes:[h.xaxis],yaxes:[h.yaxis],subplot:h.id}),S.off("click",h.onClickInPanHandler),r(P)||i(P)?(S.dragPan.disable(),S.on("zoomstart",h.clearOutline),h.dragOptions.prepFn=function(z,U,R){n(z,U,R,h.dragOptions,P)},p.init(h.dragOptions)):(S.dragPan.enable(),S.off("zoomstart",h.clearOutline),h.div.onmousedown=null,h.div.ontouchstart=null,h.div.removeEventListener("touchstart",h.div._ontouchstart),h.onClickInPanHandler=h.onClickInPanFn(h.dragOptions),S.on("click",h.onClickInPanHandler))}function O(z){var U=h.map.unproject(z);return[U.lng,U.lat]}},d.updateFramework=function(b){var h=b[this.id].domain,S=b._size,w=this.div.style;w.width=S.w*(h.x[1]-h.x[0])+"px",w.height=S.h*(h.y[1]-h.y[0])+"px",w.left=S.l+h.x[0]*S.w+"px",w.top=S.t+(1-h.y[1])*S.h+"px",this.xaxis._offset=S.l+h.x[0]*S.w,this.xaxis._length=S.w*(h.x[1]-h.x[0]),this.yaxis._offset=S.t+(1-h.y[1])*S.h,this.yaxis._length=S.h*(h.y[1]-h.y[0])},d.updateLayers=function(b){var h,S=b[this.id].layers,w=this.layerList;if(S.length!==w.length){for(h=0;h<w.length;h++)w[h].dispose();for(w=this.layerList=[],h=0;h<S.length;h++)w.push(c(this,h,S[h]))}else for(h=0;h<S.length;h++)w[h].update(S[h])},d.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},d.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},d.setOptions=function(b,h,S){for(var w in S)this.map[h](b,w,S[w])},d.getMapLayers=function(){return this.map.getStyle().layers},d.addLayer=function(b,h){var S=this.map;if("string"==typeof h){if(""===h)return void S.addLayer(b,h);for(var w=this.getMapLayers(),E=0;E<w.length;E++)if(h===w[E].id)return void S.addLayer(b,h);k.warn(["Trying to add layer with *below* value",h,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}S.addLayer(b)},d.project=function(b){return this.map.project(new M.LngLat(b[0],b[1]))},d.getView=function(){var b=this.map,h=b.getCenter(),S={lon:h.lng,lat:h.lat},w=b.getCanvas(),E=parseInt(w.style.width),P=parseInt(w.style.height);return{center:S,zoom:b.getZoom(),bearing:b.getBearing(),pitch:b.getPitch(),_derived:{coordinates:[b.unproject([0,0]).toArray(),b.unproject([E,0]).toArray(),b.unproject([E,P]).toArray(),b.unproject([0,P]).toArray()]}}},d.getViewEdits=function(b){for(var h=this.id,S=["center","zoom","bearing","pitch"],w={},E=0;E<S.length;E++){var P=S[E];w[h+"."+P]=b[P]}return w},d.getViewEditsWithDerived=function(b){var h=this.id,S=this.getViewEdits(b);return S[h+"._derived"]=b._derived,S},ne.exports=y},66741:function(ne){"use strict";ne.exports=function(F){var e=F.editType;return{t:{valType:"number",dflt:0,editType:e},r:{valType:"number",dflt:0,editType:e},b:{valType:"number",dflt:0,editType:e},l:{valType:"number",dflt:0,editType:e},editType:e}}},7316:function(ne,F,e){"use strict";var M=e(33428),k=e(94336).m_,o=e(57624).SO,T=e(38248),_=e(83160),p=e(24040),l=e(73060),t=e(31780),i=e(3400),r=e(76308),n=e(39032).BADNUM,a=e(79811),s=e(1936).clearOutline,u=e(55308),f=e(85656),c=e(16672),y=e(84888)._M,d=i.relinkPrivateKeys,m=i._,g=ne.exports={};i.extendFlat(g,p),g.attributes=e(45464),g.attributes.type.values=g.allTypes,g.fontAttrs=e(25376),g.layoutAttributes=e(64859);var x=g.transformsRegistry,v=e(62460);g.executeAPICommand=v.executeAPICommand,g.computeAPICommandBindings=v.computeAPICommandBindings,g.manageCommandObserver=v.manageCommandObserver,g.hasSimpleAPICommandBindings=v.hasSimpleAPICommandBindings,g.redrawText=function(B){return B=i.getGraphDiv(B),new Promise(function(V){setTimeout(function(){B._fullLayout&&(p.getComponentMethod("annotations","draw")(B),p.getComponentMethod("legend","draw")(B),p.getComponentMethod("colorbar","draw")(B),V(g.previousPromises(B)))},300)})},g.resize=function(B){var V;B=i.getGraphDiv(B);var q=new Promise(function(ie,te){B&&!i.isHidden(B)||te(new Error("Resize must be passed a displayed plot div element.")),B._redrawTimer&&clearTimeout(B._redrawTimer),B._resolveResize&&(V=B._resolveResize),B._resolveResize=ie,B._redrawTimer=setTimeout(function(){if(!B.layout||B.layout.width&&B.layout.height||i.isHidden(B))ie(B);else{delete B.layout.width,delete B.layout.height;var ee=B.changed;B.autoplay=!0,p.call("relayout",B,{autosize:!0}).then(function(){B.changed=ee,B._resolveResize===ie&&(delete B._resolveResize,ie(B))})}},100)});return V&&V(q),q},g.previousPromises=function(B){if((B._promises||[]).length)return Promise.all(B._promises).then(function(){B._promises=[]})},g.addLinks=function(B){if(B._context.showLink||B._context.showSources){var V=B._fullLayout,q=i.ensureSingle(V._paper,"text","js-plot-link-container",function(X){X.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:r.defaultLine,"pointer-events":"all"}).each(function(){var ae=M.select(this);ae.append("tspan").classed("js-link-to-tool",!0),ae.append("tspan").classed("js-link-spacer",!0),ae.append("tspan").classed("js-sourcelinks",!0)})}),ie=q.node(),te={y:V._paper.attr("height")-9};document.body.contains(ie)&&ie.getComputedTextLength()>=V.width-20?(te["text-anchor"]="start",te.x=5):(te["text-anchor"]="end",te.x=V._paper.attr("width")-7),q.attr(te);var ee=q.select(".js-link-to-tool"),$=q.select(".js-link-spacer"),J=q.select(".js-sourcelinks");B._context.showSources&&B._context.showSources(B),B._context.showLink&&function(X,ae){ae.text("");var ce=ae.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(X._context.linkText+" "+String.fromCharCode(187));if(X._context.sendData)ce.on("click",function(){g.sendDataToCloud(X)});else{var le=window.location.pathname.split("/"),pe=window.location.search;ce.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+le[2].split(".")[0]+"/"+le[1]+pe})}}(B,ee),$.text(ee.text()&&J.text()?" - ":"")}},g.sendDataToCloud=function(B){var V=(window.PLOTLYENV||{}).BASE_URL||B._context.plotlyServerURL;if(V){B.emit("plotly_beforeexport");var q=M.select(B).append("div").attr("id","hiddenform").style("display","none"),ie=q.append("form").attr({action:V+"/external",method:"post",target:"_blank"});return ie.append("input").attr({type:"text",name:"data"}).node().value=g.graphJson(B,!1,"keepdata"),ie.node().submit(),q.remove(),B.emit("plotly_afterexport"),!1}};var b=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],h=["year","month","dayMonth","dayMonthYear"];function S(B,V){var q=B._context.locale;q||(q="en-US");var ie=!1,te={};function ee(le){for(var pe=!0,we=0;we<V.length;we++){var Te=V[we];te[Te]||(le[Te]?te[Te]=le[Te]:pe=!1)}pe&&(ie=!0)}for(var $=0;$<2;$++){for(var J=B._context.locales,X=0;X<2;X++){var ae=(J[q]||{}).format;if(ae&&(ee(ae),ie))break;J=p.localeRegistry}var ce=q.split("-")[0];if(ie||ce===q)break;q=ce}return ie||ee(p.localeRegistry.en.format),te}function w(B,V){var q={_fullLayout:V},ie="x"===B._id.charAt(0),te=B._mainAxis._anchorAxis,ee="",$="",J="";if(te&&(J=te._mainAxis._id,ee=ie?B._id+J:J+B._id),!ee||!V._plots[ee]){ee="";for(var X=B._counterAxes,ae=0;ae<X.length;ae++){var ce=X[ae],le=ie?B._id+ce:ce+B._id;$||($=le);var pe=a.getFromId(q,ce);if(J&&pe.overlaying===J){ee=le;break}}}return ee||$}function E(B){var V=B.transforms;if(Array.isArray(V)&&V.length)for(var q=0;q<V.length;q++){var ie=V[q],te=ie._module||x[ie.type];if(te&&te.makesData)return!0}return!1}function P(B,V,q,ie){for(var te=B.transforms,ee=[B],$=0;$<te.length;$++){var J=te[$],X=x[J.type];X&&X.transform&&(ee=X.transform(ee,{transform:J,fullTrace:B,fullData:V,layout:q,fullLayout:ie,transformIndex:$}))}return ee}function I(B){return"string"==typeof B&&"px"===B.substr(B.length-2)&&parseFloat(B)}function O(B){var V=B.margin;if(!B._size){var q=B._size={l:Math.round(V.l),r:Math.round(V.r),t:Math.round(V.t),b:Math.round(V.b),p:Math.round(V.pad)};q.w=Math.round(B.width)-q.l-q.r,q.h=Math.round(B.height)-q.t-q.b}B._pushmargin||(B._pushmargin={}),B._pushmarginIds||(B._pushmarginIds={}),B._reservedMargin||(B._reservedMargin={})}g.supplyDefaults=function(B,V){var Re,He,q=V&&V.skipUpdateCalc,ie=B._fullLayout||{};if(ie._skipDefaults)delete ie._skipDefaults;else{var te,ee=B._fullLayout={},$=B.layout||{},J=B._fullData||[],X=B._fullData=[],ae=B.data||[],ce=B.calcdata||[],le=B._context||{};B._transitionData||g.createTransitionData(B),ee._dfltTitle={plot:m(B,"Click to enter Plot title"),x:m(B,"Click to enter X axis title"),y:m(B,"Click to enter Y axis title"),colorbar:m(B,"Click to enter Colorscale title"),annotation:m(B,"new text")},ee._traceWord=m(B,"trace");var pe=S(B,b);if(ee._mapboxAccessToken=le.mapboxAccessToken,ie._initialAutoSizeIsDone){var we=ie.width,Te=ie.height;g.supplyLayoutGlobalDefaults($,ee,pe),$.width||(ee.width=we),$.height||(ee.height=Te),g.sanitizeMargins(ee)}else{g.supplyLayoutGlobalDefaults($,ee,pe);var ye=!$.width||!$.height,ve=ee.autosize;ye&&(ve||le.autosizable)?g.plotAutoSize(B,$,ee):ye&&g.sanitizeMargins(ee),!ve&&ye&&($.width=ee.width,$.height=ee.height)}ee._d3locale=((Re=pe).decimal=(He=ee.separators).charAt(0),Re.thousands=He.charAt(1),{numberFormat:function(Ze){try{Ze=o(Re).format(i.adjustFormat(Ze))}catch{return i.warnBadFormat(Ze),i.noFormat}return Ze},timeFormat:k(Re).utcFormat}),ee._extraFormat=S(B,h),ee._initialAutoSizeIsDone=!0,ee._dataLength=ae.length,ee._modules=[],ee._visibleModules=[],ee._basePlotModules=[];var Ce=ee._subplots=function(){var Re,He,Ze=p.collectableSubplotTypes,nt={};if(!Ze){Ze=[];var ft=p.subplotsRegistry;for(var ht in ft){var Tt=ft[ht].attr;if(Tt&&(Ze.push(ht),Array.isArray(Tt)))for(He=0;He<Tt.length;He++)i.pushUnique(Ze,Tt[He])}}for(Re=0;Re<Ze.length;Re++)nt[Ze[Re]]=[];return nt}(),Oe=ee._splomAxes={x:{},y:{}},be=ee._splomSubplots={};ee._splomGridDflt={},ee._scatterStackOpts={},ee._firstScatter={},ee._alignmentOpts={},ee._colorAxes={},ee._requestRangeslider={},ee._traceUids=function(Re,He){var Ze,nt,ft=He.length,ht=[];for(Ze=0;Ze<Re.length;Ze++){var Tt=Re[Ze]._fullInput;Tt!==nt&&ht.push(Tt),nt=Tt}var At=ht.length,_t=new Array(ft),ot={};function it(Ut,Rt){_t[Rt]=Ut,ot[Ut]=1}function Pt(Ut,Rt){if(Ut&&"string"==typeof Ut&&!ot[Ut])return it(Ut,Rt),!0}for(Ze=0;Ze<ft;Ze++){var jt=He[Ze].uid;"number"==typeof jt&&(jt=String(jt)),Pt(jt,Ze)||Ze<At&&Pt(ht[Ze].uid,Ze)||it(i.randstr(ot),Ze)}return _t}(J,ae),ee._globalTransforms=(B._context||{}).globalTransforms,g.supplyDataDefaults(ae,X,$,ee);var ue=Object.keys(Oe.x),se=Object.keys(Oe.y);if(ue.length>1&&se.length>1){for(p.getComponentMethod("grid","sizeDefaults")($,ee),te=0;te<ue.length;te++)i.pushUnique(Ce.xaxis,ue[te]);for(te=0;te<se.length;te++)i.pushUnique(Ce.yaxis,se[te]);for(var ge in be)i.pushUnique(Ce.cartesian,ge)}if(ee._has=g._hasPlotType.bind(ee),J.length===X.length)for(te=0;te<X.length;te++)d(X[te],J[te]);g.supplyLayoutModuleDefaults($,ee,X,B._transitionData);var Ie=ee._visibleModules,ke=[];for(te=0;te<Ie.length;te++){var Se=Ie[te].crossTraceDefaults;Se&&i.pushUnique(ke,Se)}for(te=0;te<ke.length;te++)ke[te](X,ee);ee._hasOnlyLargeSploms=1===ee._basePlotModules.length&&"splom"===ee._basePlotModules[0].name&&ue.length>15&&se.length>15&&0===ee.shapes.length&&0===ee.images.length,g.linkSubplots(X,ee,J,ie),g.cleanPlot(X,ee,J,ie);var Pe=!(!ie._has||!ie._has("gl2d")),Fe=!(!ee._has||!ee._has("gl2d")),Be=!(!ie._has||!ie._has("cartesian"))||Pe,me=!(!ee._has||!ee._has("cartesian"))||Fe;Be&&!me?ie._bgLayer.remove():me&&!Be&&(ee._shouldCreateBgLayer=!0),ie._zoomlayer&&!B._dragging&&s({_fullLayout:ie}),function(Re,He){var Ze,nt=[];He.meta&&(Ze=He._meta={meta:He.meta,layout:{meta:He.meta}});for(var ft=0;ft<Re.length;ft++){var ht=Re[ft];ht.meta?nt[ht.index]=ht._meta={meta:ht.meta}:He.meta&&(ht._meta={meta:He.meta}),He.meta&&(ht._meta.layout={meta:He.meta})}nt.length&&(Ze||(Ze=He._meta={}),Ze.data=nt)}(X,ee),d(ee,ie),p.getComponentMethod("colorscale","crossTraceDefaults")(X,ee),ee._preGUI||(ee._preGUI={}),ee._tracePreGUI||(ee._tracePreGUI={});var Me,Le=ee._tracePreGUI,Ne={};for(Me in Le)Ne[Me]="old";for(te=0;te<X.length;te++)Ne[Me=X[te]._fullInput.uid]||(Le[Me]={}),Ne[Me]="new";for(Me in Ne)"old"===Ne[Me]&&delete Le[Me];O(ee),p.getComponentMethod("rangeslider","makeData")(ee),q||ce.length!==X.length||g.supplyDefaultsUpdateCalc(ce,X)}},g.supplyDefaultsUpdateCalc=function(B,V){for(var q=0;q<V.length;q++){var ie=V[q],te=(B[q]||[])[0];if(te&&te.trace){var ee=te.trace;if(ee._hasCalcTransform){var $,J,X,ae=ee._arrayAttrs;for($=0;$<ae.length;$++)X=i.nestedProperty(ee,J=ae[$]).get().slice(),i.nestedProperty(ie,J).set(X)}te.trace=ie}}},g.createTransitionData=function(B){B._transitionData||(B._transitionData={}),B._transitionData._frames||(B._transitionData._frames=[]),B._transitionData._frameHash||(B._transitionData._frameHash={}),B._transitionData._counter||(B._transitionData._counter=0),B._transitionData._interruptCallbacks||(B._transitionData._interruptCallbacks=[])},g._hasPlotType=function(B){var V,q=this._basePlotModules||[];for(V=0;V<q.length;V++)if(q[V].name===B)return!0;var ie=this._modules||[];for(V=0;V<ie.length;V++){var te=ie[V].name;if(te===B)return!0;var ee=p.modules[te];if(ee&&ee.categories[B])return!0}return!1},g.cleanPlot=function(B,V,q,ie){var te,ee,$=ie._basePlotModules||[];for(te=0;te<$.length;te++){var J=$[te];J.clean&&J.clean(B,V,q,ie)}var X=ie._has&&ie._has("gl"),ae=V._has&&V._has("gl");X&&!ae&&void 0!==ie._glcontainer&&(ie._glcontainer.selectAll(".gl-canvas").remove(),ie._glcontainer.selectAll(".no-webgl").remove(),ie._glcanvas=null);var ce=!!ie._infolayer;e:for(te=0;te<q.length;te++){var le=q[te].uid;for(ee=0;ee<B.length;ee++)if(le===B[ee].uid)continue e;ce&&ie._infolayer.select(".cb"+le).remove()}},g.linkSubplots=function(B,V,q,ie){var te,ee,$=ie._plots||{},J=V._plots={},X=V._subplots,ae={_fullData:B,_fullLayout:V},ce=X.cartesian.concat(X.gl2d||[]);for(te=0;te<ce.length;te++){var le,pe=ce[te],we=$[pe],Te=a.getFromId(ae,pe,"x"),ye=a.getFromId(ae,pe,"y");for(we?le=J[pe]=we:(le=J[pe]={}).id=pe,Te._counterAxes.push(ye._id),ye._counterAxes.push(Te._id),Te._subplotsWith.push(pe),ye._subplotsWith.push(pe),le.xaxis=Te,le.yaxis=ye,le._hasClipOnAxisFalse=!1,ee=0;ee<B.length;ee++){var ve=B[ee];if(ve.xaxis===le.xaxis._id&&ve.yaxis===le.yaxis._id&&!1===ve.cliponaxis){le._hasClipOnAxisFalse=!0;break}}}var xe,Ce=a.list(ae,null,!0);for(te=0;te<Ce.length;te++){var Oe=null;(xe=Ce[te]).overlaying&&(Oe=a.getFromId(ae,xe.overlaying))&&Oe.overlaying&&(xe.overlaying=!1,Oe=null),xe._mainAxis=Oe||xe,Oe&&(xe.domain=Oe.domain.slice()),xe._anchorAxis="free"===xe.anchor?null:a.getFromId(ae,xe.anchor)}for(te=0;te<Ce.length;te++)if((xe=Ce[te])._counterAxes.sort(a.idSort),xe._subplotsWith.sort(i.subplotSort),xe._mainSubplot=w(xe,V),xe._counterAxes.length&&(xe.spikemode&&-1!==xe.spikemode.indexOf("across")||xe.automargin&&xe.mirror&&"free"!==xe.anchor||p.getComponentMethod("rangeslider","isVisible")(xe))){var be=1,ue=0;for(ee=0;ee<xe._counterAxes.length;ee++){var se=a.getFromId(ae,xe._counterAxes[ee]);be=Math.min(be,se.domain[0]),ue=Math.max(ue,se.domain[1])}be<ue&&(xe._counterDomainMin=be,xe._counterDomainMax=ue)}},g.clearExpandedTraceDefaultColors=function(B){var V,q,ie;for(q=[],(V=B._module._colorAttrs)||(B._module._colorAttrs=V=[],l.crawl(B._module.attributes,function(te,ee,$,J){q[J]=ee,q.length=J+1,"color"===te.valType&&void 0===te.dflt&&V.push(q.join("."))})),ie=0;ie<V.length;ie++)i.nestedProperty(B,"_input."+V[ie]).get()||i.nestedProperty(B,V[ie]).set(null)},g.supplyDataDefaults=function(B,V,q,ie){var te,ee,$,J=ie._modules,X=ie._visibleModules,ae=ie._basePlotModules,ce=0,le=0;function pe(ge){V.push(ge);var Ie=ge._module;Ie&&(i.pushUnique(J,Ie),!0===ge.visible&&i.pushUnique(X,Ie),i.pushUnique(ae,ge._module.basePlotModule),ce++,!1!==ge._input.visible&&le++)}ie._transformModules=[];var we={},Te=[],ve=t.traceTemplater((q.template||{}).data||{});for(te=0;te<B.length;te++){if((ee=ve.newTrace($=B[te])).uid=ie._traceUids[te],g.supplyTraceDefaults($,ee,le,ie,te),ee.index=te,ee._input=$,ee._expandedIndex=ce,ee.transforms&&ee.transforms.length)for(var xe=!1!==$.visible&&!1===ee.visible,Ce=P(ee,V,q,ie),Oe=0;Oe<Ce.length;Oe++){var be=Ce[Oe],ue={_template:ee._template,type:ee.type,uid:ee.uid+Oe};xe&&!1===be.visible&&delete be.visible,g.supplyTraceDefaults(be,ue,ce,ie,te),d(ue,be),ue.index=te,ue._input=$,ue._fullInput=ee,ue._expandedIndex=ce,ue._expandedInput=be,pe(ue)}else ee._fullInput=ee,ee._expandedInput=ee,pe(ee);p.traceIs(ee,"carpetAxis")&&(we[ee.carpet]=ee),p.traceIs(ee,"carpetDependent")&&Te.push(te)}for(te=0;te<Te.length;te++)if((ee=V[Te[te]]).visible){var se=we[ee.carpet];ee._carpet=se,se&&se.visible?(ee.xaxis=se.xaxis,ee.yaxis=se.yaxis):ee.visible=!1}},g.supplyAnimationDefaults=function(B){var V;B=B||{};var q={};function ie(te,ee){return i.coerce(B||{},q,f,te,ee)}if(ie("mode"),ie("direction"),ie("fromcurrent"),Array.isArray(B.frame))for(q.frame=[],V=0;V<B.frame.length;V++)q.frame[V]=g.supplyAnimationFrameDefaults(B.frame[V]||{});else q.frame=g.supplyAnimationFrameDefaults(B.frame||{});if(Array.isArray(B.transition))for(q.transition=[],V=0;V<B.transition.length;V++)q.transition[V]=g.supplyAnimationTransitionDefaults(B.transition[V]||{});else q.transition=g.supplyAnimationTransitionDefaults(B.transition||{});return q},g.supplyAnimationFrameDefaults=function(B){var V={};function q(ie,te){return i.coerce(B||{},V,f.frame,ie,te)}return q("duration"),q("redraw"),V},g.supplyAnimationTransitionDefaults=function(B){var V={};function q(ie,te){return i.coerce(B||{},V,f.transition,ie,te)}return q("duration"),q("easing"),V},g.supplyFrameDefaults=function(B){var V={};function q(ie,te){return i.coerce(B,V,c,ie,te)}return q("group"),q("name"),q("traces"),q("baseframe"),q("data"),q("layout"),V},g.supplyTraceDefaults=function(B,V,q,ie,te){var ee,$=ie.colorway||r.defaults,J=$[q%$.length];function X(Oe,be){return i.coerce(B,V,g.attributes,Oe,be)}var ae=X("visible");X("type"),X("name",ie._traceWord+" "+te),X("uirevision",ie.uirevision);var ce=g.getModule(V);if(V._module=ce,ce){var le=ce.basePlotModule,pe=le.attr,we=le.attributes;if(pe&&we){var Te=ie._subplots,ye="";if(ae||"gl2d"!==le.name){if(Array.isArray(pe))for(ee=0;ee<pe.length;ee++){var ve=pe[ee],xe=i.coerce(B,V,we,ve);Te[ve]&&i.pushUnique(Te[ve],xe),ye+=xe}else ye=i.coerce(B,V,we,pe);Te[le.name]&&i.pushUnique(Te[le.name],ye)}}}if(ae){if(X("customdata"),X("ids"),X("meta"),p.traceIs(V,"showLegend")?(i.coerce(B,V,ce.attributes.showlegend?ce.attributes:g.attributes,"showlegend"),X("legend"),X("legendwidth"),X("legendgroup"),X("legendgrouptitle.text"),X("legendrank"),V._dfltShowLegend=!0):V._dfltShowLegend=!1,ce&&ce.supplyDefaults(B,V,J,ie),p.traceIs(V,"noOpacity")||X("opacity"),p.traceIs(V,"notLegendIsolatable")&&(V.visible=!!V.visible),p.traceIs(V,"noHover")||(V.hovertemplate||i.coerceHoverinfo(B,V,ie),"parcats"!==V.type&&p.getComponentMethod("fx","supplyDefaults")(B,V,J,ie)),ce&&ce.selectPoints){var Ce=X("selectedpoints");i.isTypedArray(Ce)&&(V.selectedpoints=Array.from(Ce))}g.supplyTransformDefaults(B,V,ie)}return V},g.hasMakesDataTransform=E,g.supplyTransformDefaults=function(B,V,q){if(V._length||E(B)){var ie=q._globalTransforms||[],te=q._transformModules||[];if(Array.isArray(B.transforms)||0!==ie.length)for(var $=ie.concat(B.transforms||[]),J=V.transforms=[],X=0;X<$.length;X++){var ae,ce=$[X],le=ce.type,pe=x[le],we=!(ce._module&&ce._module===pe),Te=pe&&"function"==typeof pe.transform;pe||i.warn("Unrecognized transform type "+le+"."),pe&&pe.supplyDefaults&&(we||Te)?((ae=pe.supplyDefaults(ce,V,q,B)).type=le,ae._module=pe,i.pushUnique(te,pe)):ae=i.extendFlat({},ce),J.push(ae)}}},g.supplyLayoutGlobalDefaults=function(B,V,q){function ie(ce,le){return i.coerce(B,V,g.layoutAttributes,ce,le)}var te=B.template;i.isPlainObject(te)&&(V.template=te,V._template=te.layout,V._dataTemplate=te.data),ie("autotypenumbers");var ee=i.coerceFont(ie,"font");i.coerceFont(ie,"title.font",ee,{overrideDflt:{size:Math.round(1.4*ee.size)}}),ie("title.text",V._dfltTitle.plot),ie("title.xref");var J=ie("title.yref");ie("title.pad.t"),ie("title.pad.r"),ie("title.pad.b"),ie("title.pad.l");var X=ie("title.automargin");ie("title.x"),ie("title.xanchor"),ie("title.y"),ie("title.yanchor"),X&&("paper"===J&&(0!==V.title.y&&(V.title.y=1),"auto"===V.title.yanchor&&(V.title.yanchor=0===V.title.y?"top":"bottom")),"container"===J&&("auto"===V.title.y&&(V.title.y=1),"auto"===V.title.yanchor&&(V.title.yanchor=V.title.y<.5?"bottom":"top"))),ie("uniformtext.mode")&&ie("uniformtext.minsize"),ie("autosize",!(B.width&&B.height)),ie("width"),ie("height"),ie("minreducedwidth"),ie("minreducedheight"),ie("margin.l"),ie("margin.r"),ie("margin.t"),ie("margin.b"),ie("margin.pad"),ie("margin.autoexpand"),B.width&&B.height&&g.sanitizeMargins(V),p.getComponentMethod("grid","sizeDefaults")(B,V),ie("paper_bgcolor"),ie("separators",q.decimal+q.thousands),ie("hidesources"),ie("colorway"),ie("datarevision");var ae=ie("uirevision");ie("editrevision",ae),ie("selectionrevision",ae),p.getComponentMethod("modebar","supplyLayoutDefaults")(B,V),p.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(B,V,ie),p.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(B,V,ie),ie("meta"),i.isPlainObject(B.transition)&&(ie("transition.duration"),ie("transition.easing"),ie("transition.ordering")),p.getComponentMethod("calendars","handleDefaults")(B,V,"calendar"),p.getComponentMethod("fx","supplyLayoutGlobalDefaults")(B,V,ie),i.coerce(B,V,u,"scattermode")},g.plotAutoSize=function(B,V,q){var ie,te,ee=B._context||{},$=ee.frameMargins,J=i.isPlotDiv(B);if(J&&B.emit("plotly_autosize"),ee.fillFrame)ie=window.innerWidth,te=window.innerHeight,document.body.style.overflow="hidden";else{var X=J?window.getComputedStyle(B):{};if(ie=I(X.width)||I(X.maxWidth)||q.width,te=I(X.height)||I(X.maxHeight)||q.height,T($)&&$>0){var ae=1-2*$;ie=Math.round(ae*ie),te=Math.round(ae*te)}}var ce=g.layoutAttributes.width.min,le=g.layoutAttributes.height.min;ie<ce&&(ie=ce),te<le&&(te=le);var pe=!V.width&&Math.abs(q.width-ie)>1,we=!V.height&&Math.abs(q.height-te)>1;(we||pe)&&(pe&&(q.width=ie),we&&(q.height=te)),B._initialAutoSize||(B._initialAutoSize={width:ie,height:te}),g.sanitizeMargins(q)},g.supplyLayoutModuleDefaults=function(B,V,q,ie){var te,ee,$,J=p.componentsRegistry,X=V._basePlotModules,ae=p.subplotsRegistry.cartesian;for(te in J)($=J[te]).includeBasePlot&&$.includeBasePlot(B,V);for(var ce in X.length||X.push(ae),V._has("cartesian")&&(p.getComponentMethod("grid","contentDefaults")(B,V),ae.finalizeSubplots(B,V)),V._subplots)V._subplots[ce].sort(i.subplotSort);for(ee=0;ee<X.length;ee++)($=X[ee]).supplyLayoutDefaults&&$.supplyLayoutDefaults(B,V,q);var le=V._modules;for(ee=0;ee<le.length;ee++)($=le[ee]).supplyLayoutDefaults&&$.supplyLayoutDefaults(B,V,q);var pe=V._transformModules;for(ee=0;ee<pe.length;ee++)($=pe[ee]).supplyLayoutDefaults&&$.supplyLayoutDefaults(B,V,q,ie);for(te in J)($=J[te]).supplyLayoutDefaults&&$.supplyLayoutDefaults(B,V,q)},g.purge=function(B){var V=B._fullLayout||{};void 0!==V._glcontainer&&(V._glcontainer.selectAll(".gl-canvas").remove(),V._glcontainer.remove(),V._glcanvas=null),V._modeBar&&V._modeBar.destroy(),B._transitionData&&(B._transitionData._interruptCallbacks&&(B._transitionData._interruptCallbacks.length=0),B._transitionData._animationRaf&&window.cancelAnimationFrame(B._transitionData._animationRaf)),i.clearThrottle(),i.clearResponsive(B),delete B.data,delete B.layout,delete B._fullData,delete B._fullLayout,delete B.calcdata,delete B.empty,delete B.fid,delete B.undoqueue,delete B.undonum,delete B.autoplay,delete B.changed,delete B._promises,delete B._redrawTimer,delete B._hmlumcount,delete B._hmpixcount,delete B._transitionData,delete B._transitioning,delete B._initialAutoSize,delete B._transitioningWithDuration,delete B._dragging,delete B._dragged,delete B._dragdata,delete B._hoverdata,delete B._snapshotInProgress,delete B._editing,delete B._mouseDownTime,delete B._legendMouseDownTime,B.removeAllListeners&&B.removeAllListeners()},g.style=function(B){var V,q=B._fullLayout._visibleModules,ie=[];for(V=0;V<q.length;V++){var te=q[V];te.style&&i.pushUnique(ie,te.style)}for(V=0;V<ie.length;V++)ie[V](B)},g.sanitizeMargins=function(B){if(B&&B.margin){var V,q=B.width,ie=B.height,te=B.margin,$=ie-(te.t+te.b);q-(te.l+te.r)<0&&(V=(q-1)/(te.l+te.r),te.l=Math.floor(V*te.l),te.r=Math.floor(V*te.r)),$<0&&(V=(ie-1)/(te.t+te.b),te.t=Math.floor(V*te.t),te.b=Math.floor(V*te.b))}},g.clearAutoMarginIds=function(B){B._fullLayout._pushmarginIds={}},g.allowAutoMargin=function(B,V){B._fullLayout._pushmarginIds[V]=1},g.autoMargin=function(B,V,q){var ie=B._fullLayout,te=ie.width,ee=ie.height,$=ie.margin,X=ie.minreducedheight,ae=i.constrain(te-$.l-$.r,2,ie.minreducedwidth),ce=i.constrain(ee-$.t-$.b,2,X),le=Math.max(0,te-ae),pe=Math.max(0,ee-ce),we=ie._pushmargin,Te=ie._pushmarginIds;if(!1!==$.autoexpand){if(q){var ye=q.pad;if(void 0===ye&&(ye=Math.min(12,$.l,$.r,$.t,$.b)),le){var ve=(q.l+q.r)/le;ve>1&&(q.l/=ve,q.r/=ve)}if(pe){var xe=(q.t+q.b)/pe;xe>1&&(q.t/=xe,q.b/=xe)}we[V]={l:{val:void 0!==q.xl?q.xl:q.x,size:q.l+ye},r:{val:void 0!==q.xr?q.xr:q.x,size:q.r+ye},b:{val:void 0!==q.yb?q.yb:q.y,size:q.b+ye},t:{val:void 0!==q.yt?q.yt:q.y,size:q.t+ye}},Te[V]=1}else delete we[V],delete Te[V];if(!ie._replotting)return g.doAutoMargin(B)}},g.doAutoMargin=function(B){var V=B._fullLayout,q=V.width,ie=V.height;V._size||(V._size={}),O(V);var te=V._size,ee=V.margin,$={t:0,b:0,l:0,r:0},J=i.extendFlat({},te),X=ee.l,ae=ee.r,ce=ee.t,le=ee.b,pe=V._pushmargin,we=V._pushmarginIds,Te=V.minreducedwidth,ye=V.minreducedheight;if(!1!==ee.autoexpand){for(var ve in pe)we[ve]||delete pe[ve];var xe=B._fullLayout._reservedMargin;for(var Ce in xe)for(var Oe in xe[Ce])$[Oe]=Math.max($[Oe],xe[Ce][Oe]);for(var ue in pe.base={l:{val:0,size:X},r:{val:1,size:ae},t:{val:1,size:ce},b:{val:0,size:le}},$){var se=0;for(var ge in pe)"base"!==ge&&T(pe[ge][ue].size)&&(se=pe[ge][ue].size>se?pe[ge][ue].size:se);var Ie=Math.max(0,ee[ue]-se);$[ue]=Math.max(0,$[ue]-Ie)}for(var ke in pe){var Se=pe[ke].l||{},Pe=pe[ke].b||{},Fe=Se.val,Be=Se.size,me=Pe.val,Me=Pe.size,Le=q-$.r-$.l,Ne=ie-$.t-$.b;for(var Re in pe){if(T(Be)&&pe[Re].r){var He=pe[Re].r.val,Ze=pe[Re].r.size;if(He>Fe){var nt=(Be*He+(Ze-Le)*Fe)/(He-Fe),ft=(Ze*(1-Fe)+(Be-Le)*(1-He))/(He-Fe);nt+ft>X+ae&&(X=nt,ae=ft)}}if(T(Me)&&pe[Re].t){var ht=pe[Re].t.val,Tt=pe[Re].t.size;if(ht>me){var At=(Me*ht+(Tt-Ne)*me)/(ht-me),_t=(Tt*(1-me)+(Me-Ne)*(1-ht))/(ht-me);At+_t>le+ce&&(le=At,ce=_t)}}}}}var qe,ot=i.constrain(q-ee.l-ee.r,2,Te),it=i.constrain(ie-ee.t-ee.b,2,ye),Pt=Math.max(0,q-ot),jt=Math.max(0,ie-it);if(Pt){var Ut=(X+ae)/Pt;Ut>1&&(X/=Ut,ae/=Ut)}if(jt){var Rt=(le+ce)/jt;Rt>1&&(le/=Rt,ce/=Rt)}if(te.l=Math.round(X)+$.l,te.r=Math.round(ae)+$.r,te.t=Math.round(ce)+$.t,te.b=Math.round(le)+$.b,te.p=Math.round(ee.pad),te.w=Math.round(q)-te.l-te.r,te.h=Math.round(ie)-te.t-te.b,!V._replotting&&(g.didMarginChange(J,te)||function(et){if("_redrawFromAutoMarginCount"in et._fullLayout)return!1;var qe=a.list(et,"",!0);for(var $e in qe)if(qe[$e].autoshift||qe[$e].shift)return!0;return!1}(B))){"_redrawFromAutoMarginCount"in V?V._redrawFromAutoMarginCount++:V._redrawFromAutoMarginCount=1;var Je=3*(1+Object.keys(we).length);if(V._redrawFromAutoMarginCount<Je)return p.call("_doPlot",B);V._size=J,i.warn("Too many auto-margin redraws.")}qe=a.list(B,"",!0),["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function($e){for(var pt=0;pt<qe.length;pt++){var ct=qe[pt][$e];ct&&ct()}})};var z=["l","r","t","b","p","w","h"];function U(B,V,q){var ie=!1,ee=i.syncOrAsync([g.previousPromises,function(){if(B._transitionData)return B._transitioning=!1,function($){var J=Promise.resolve();if(!$)return J;for(;$.length;)J=J.then($.shift());return J}(B._transitionData._interruptCallbacks)},q.prepareFn,g.rehover,g.reselect,function(){return B.emit("plotly_transitioning",[]),new Promise(function($){B._transitioning=!0,V.duration>0&&(B._transitioningWithDuration=!0),B._transitionData._interruptCallbacks.push(function(){ie=!0}),q.redraw&&B._transitionData._interruptCallbacks.push(function(){return p.call("redraw",B)}),B._transitionData._interruptCallbacks.push(function(){B.emit("plotly_transitioninterrupted",[])});var J=0,X=0;function ae(){return J++,function(){var ce;X++,ie||X!==J||(ce=$,B._transitionData&&(function(le){if(le)for(;le.length;)le.shift()}(B._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(q.redraw)return p.call("redraw",B)}).then(function(){B._transitioning=!1,B._transitioningWithDuration=!1,B.emit("plotly_transitioned",[])}).then(ce)))}}q.runFn(ae),setTimeout(ae())})}],B);return ee&&ee.then||(ee=Promise.resolve()),ee.then(function(){return B})}g.didMarginChange=function(B,V){for(var q=0;q<z.length;q++){var ie=z[q],te=B[ie],ee=V[ie];if(!T(te)||Math.abs(ee-te)>1)return!0}return!1},g.graphJson=function(B,V,q,ie,te,ee){(te&&V&&!B._fullData||te&&!V&&!B._fullLayout)&&g.supplyDefaults(B);var J=te?B._fullLayout:B.layout,X=(B._transitionData||{})._frames;function ae(pe,we){if("function"==typeof pe)return we?"_function_":null;if(i.isPlainObject(pe)){var Te,ye={};return Object.keys(pe).sort().forEach(function(Oe){if(-1===["_","["].indexOf(Oe.charAt(0)))if("function"!=typeof pe[Oe]){if("keepdata"===q){if("src"===Oe.substr(Oe.length-3))return}else if("keepstream"===q){if("string"==typeof(Te=pe[Oe+"src"])&&Te.indexOf(":")>0&&!i.isPlainObject(pe.stream))return}else if("keepall"!==q&&"string"==typeof(Te=pe[Oe+"src"])&&Te.indexOf(":")>0)return;ye[Oe]=ae(pe[Oe],we)}else we&&(ye[Oe]="_function")}),ye}var ve=Array.isArray(pe),xe=i.isTypedArray(pe);if((ve||xe)&&pe.dtype&&pe.shape){var Ce=pe.bdata;return ae({dtype:pe.dtype,shape:pe.shape,bdata:i.isArrayBuffer(Ce)?_.encode(Ce):Ce},we)}return ve?pe.map(function(Oe){return ae(Oe,we)}):xe?i.simpleMap(pe,i.identity):i.isJSDate(pe)?i.ms2DateTimeLocal(+pe):pe}var ce={data:((te?B._fullData:B.data)||[]).map(function(pe){var we=ae(pe);return V&&delete we.fit,we})};if(!V&&(ce.layout=ae(J),te)){var le=J._size;ce.layout.computed={margin:{b:le.b,l:le.l,r:le.r,t:le.t}}}return X&&(ce.frames=ae(X)),ee&&(ce.config=ae(B._context,!0)),"object"===ie?ce:JSON.stringify(ce)},g.modifyFrames=function(B,V){var q,ie,te,ee=B._transitionData._frames,$=B._transitionData._frameHash;for(q=0;q<V.length;q++)switch((ie=V[q]).type){case"replace":var J=(ee[ie.index]||{}).name,X=(te=ie.value).name;ee[ie.index]=$[X]=te,X!==J&&(delete $[J],$[X]=te);break;case"insert":$[(te=ie.value).name]=te,ee.splice(ie.index,0,te);break;case"delete":delete $[(te=ee[ie.index]).name],ee.splice(ie.index,1)}return Promise.resolve()},g.computeFrame=function(B,V){var q,ie,te,ee,$=B._transitionData._frameHash;if(!V)throw new Error("computeFrame must be given a string frame name");var J=$[V.toString()];if(!J)return!1;for(var X=[J],ae=[J.name];J.baseframe&&(J=$[J.baseframe.toString()])&&-1===ae.indexOf(J.name);)X.push(J),ae.push(J.name);for(var ce={};J=X.pop();)if(J.layout&&(ce.layout=g.extendLayout(ce.layout,J.layout)),J.data){if(ce.data||(ce.data=[]),!(ie=J.traces))for(ie=[],q=0;q<J.data.length;q++)ie[q]=q;for(ce.traces||(ce.traces=[]),q=0;q<J.data.length;q++)null!=(te=ie[q])&&(-1===(ee=ce.traces.indexOf(te))&&(ce.traces[ee=ce.data.length]=te),ce.data[ee]=g.extendTrace(ce.data[ee],J.data[q]))}return ce},g.recomputeFrameHash=function(B){for(var V=B._transitionData._frameHash={},q=B._transitionData._frames,ie=0;ie<q.length;ie++){var te=q[ie];te&&te.name&&(V[te.name]=te)}},g.extendObjectWithContainers=function(B,V,q){var ie,te,ee,$,J,X,ae,ce=i.extendDeepNoArrays({},V||{}),le=i.expandObjectPaths(ce),pe={};if(q&&q.length)for(ee=0;ee<q.length;ee++)void 0===(te=(ie=i.nestedProperty(le,q[ee])).get())?i.nestedProperty(pe,q[ee]).set(null):(ie.set(null),i.nestedProperty(pe,q[ee]).set(te));if(B=i.extendDeepNoArrays(B||{},le),q&&q.length)for(ee=0;ee<q.length;ee++)if(X=i.nestedProperty(pe,q[ee]).get()){for(ae=(J=i.nestedProperty(B,q[ee])).get(),Array.isArray(ae)||J.set(ae=[]),$=0;$<X.length;$++){var we=X[$];ae[$]=null===we?null:g.extendObjectWithContainers(ae[$],we)}J.set(ae)}return B},g.dataArrayContainers=["transforms","dimensions"],g.layoutArrayContainers=p.layoutArrayContainers,g.extendTrace=function(B,V){return g.extendObjectWithContainers(B,V,g.dataArrayContainers)},g.extendLayout=function(B,V){return g.extendObjectWithContainers(B,V,g.layoutArrayContainers)},g.transition=function(B,V,q,ie,te,ee){var $={redraw:te.redraw},J={},X=[];return $.prepareFn=function(){for(var ae=Array.isArray(V)?V.length:0,ce=ie.slice(0,ae),le=0;le<ce.length;le++){var pe=ce[le],we=B._fullData[pe]._module;if(we){if(we.animatable){var Te=we.basePlotModule.name;J[Te]||(J[Te]=[]),J[Te].push(pe)}B.data[ce[le]]=g.extendTrace(B.data[ce[le]],V[le])}}var ye=i.expandObjectPaths(i.extendDeepNoArrays({},q)),ve=/^[xy]axis[0-9]*$/;for(var xe in ye)ve.test(xe)&&delete ye[xe].range;g.extendLayout(B.layout,ye),delete B.calcdata,g.supplyDefaults(B),g.doCalcdata(B);var Ce=i.expandObjectPaths(q);if(Ce){var Oe=B._fullLayout._plots;for(var be in Oe){var ue=Oe[be],se=ue.xaxis,ge=ue.yaxis,Ie=se.range.slice(),ke=ge.range.slice(),Se=null,Pe=null,Fe=null,Be=null;Array.isArray(Ce[se._name+".range"])?Se=Ce[se._name+".range"].slice():Array.isArray((Ce[se._name]||{}).range)&&(Se=Ce[se._name].range.slice()),Array.isArray(Ce[ge._name+".range"])?Pe=Ce[ge._name+".range"].slice():Array.isArray((Ce[ge._name]||{}).range)&&(Pe=Ce[ge._name].range.slice()),Ie&&Se&&(se.r2l(Ie[0])!==se.r2l(Se[0])||se.r2l(Ie[1])!==se.r2l(Se[1]))&&(Fe={xr0:Ie,xr1:Se}),ke&&Pe&&(ge.r2l(ke[0])!==ge.r2l(Pe[0])||ge.r2l(ke[1])!==ge.r2l(Pe[1]))&&(Be={yr0:ke,yr1:Pe}),(Fe||Be)&&X.push(i.extendFlat({plotinfo:ue},Fe,Be))}}return Promise.resolve()},$.runFn=function(ae){var ce,le,pe=B._fullLayout._basePlotModules,we=X.length;if(q)for(le=0;le<pe.length;le++)pe[le].transitionAxes&&pe[le].transitionAxes(B,X,ee,ae);for(var Te in we?((ce=i.extendFlat({},ee)).duration=0,delete J.cartesian):ce=ee,J){var ye=J[Te];B._fullData[ye[0]]._module.basePlotModule.plot(B,ye,ce,ae)}},U(B,ee,$)},g.transitionFromReact=function(B,V,q,ie){var te=B._fullLayout,ee=te.transition,$={},J=[];return $.prepareFn=function(){var X=te._plots;for(var ae in $.redraw=!1,"some"===V.anim&&($.redraw=!0),"some"===q.anim&&($.redraw=!0),X){var ce=X[ae],le=ce.xaxis,pe=ce.yaxis,we=ie[le._name].range.slice(),Te=ie[pe._name].range.slice(),ye=le.range.slice(),ve=pe.range.slice();le.setScale(),pe.setScale();var xe=null,Ce=null;le.r2l(we[0])===le.r2l(ye[0])&&le.r2l(we[1])===le.r2l(ye[1])||(xe={xr0:we,xr1:ye}),pe.r2l(Te[0])===pe.r2l(ve[0])&&pe.r2l(Te[1])===pe.r2l(ve[1])||(Ce={yr0:Te,yr1:ve}),(xe||Ce)&&J.push(i.extendFlat({plotinfo:ce},xe,Ce))}return Promise.resolve()},$.runFn=function(X){for(var ae,ce,le,pe=B._fullData,we=B._fullLayout._basePlotModules,Te=[],ye=0;ye<pe.length;ye++)Te.push(ye);function ve(){if(B._fullLayout)for(var Ce=0;Ce<we.length;Ce++)we[Ce].transitionAxes&&we[Ce].transitionAxes(B,J,ae,X)}function xe(){if(B._fullLayout)for(var Ce=0;Ce<we.length;Ce++)we[Ce].plot(B,le,ce,X)}J.length&&V.anim?"traces first"===ee.ordering?(ae=i.extendFlat({},ee,{duration:0}),le=Te,ce=ee,setTimeout(ve,ee.duration),xe()):(ae=ee,le=null,ce=i.extendFlat({},ee,{duration:0}),setTimeout(xe,ae.duration),ve()):J.length?(ae=ee,ve()):V.anim&&(le=Te,ce=ee,xe())},U(B,ee,$)},g.doCalcdata=function(B,V){var q,ie,te,ee,$=a.list(B),J=B._fullData,X=B._fullLayout,ae=new Array(J.length),ce=(B.calcdata||[]).slice();for(B.calcdata=ae,X._numBoxes=0,X._numViolins=0,X._violinScaleGroupStats={},B._hmpixcount=0,B._hmlumcount=0,X._piecolormap={},X._sunburstcolormap={},X._treemapcolormap={},X._iciclecolormap={},X._funnelareacolormap={},te=0;te<J.length;te++)Array.isArray(V)&&-1===V.indexOf(te)&&(ae[te]=ce[te]);for(te=0;te<J.length;te++)(q=J[te])._arrayAttrs=l.findArrayAttributes(q),q._extremes={};var le=X._subplots.polar||[];for(te=0;te<le.length;te++)$.push(X[le[te]].radialaxis,X[le[te]].angularaxis);for(var pe in X._colorAxes){var we=X[pe];!1!==we.cauto&&(delete we.cmin,delete we.cmax)}var Te=!1;function ye(Ce){if(ie=(q=J[Ce])._module,!0===q.visible&&q.transforms){if(ie&&ie.calc){var Oe=ie.calc(B,q);Oe[0]&&Oe[0].t&&Oe[0].t._scene&&delete Oe[0].t._scene.dirty}for(ee=0;ee<q.transforms.length;ee++){var be=q.transforms[ee];(ie=x[be.type])&&ie.calcTransform&&(q._hasCalcTransform=!0,Te=!0,ie.calcTransform(B,q,be))}}}function ve(Ce,Oe){if(!!(ie=(q=J[Ce])._module).isContainer===Oe){var be=[];if(!0===q.visible&&0!==q._length){delete q._indexToPoints;var ue=q.transforms||[];for(ee=ue.length-1;ee>=0;ee--)if(ue[ee].enabled){q._indexToPoints=ue[ee]._indexToPoints;break}ie&&ie.calc&&(be=ie.calc(B,q))}Array.isArray(be)&&be[0]||(be=[{x:n,y:n}]),be[0].t||(be[0].t={}),be[0].trace=q,ae[Ce]=be}}for(j($,J,X),te=0;te<J.length;te++)ve(te,!0);for(te=0;te<J.length;te++)ye(te);for(Te&&j($,J,X),te=0;te<J.length;te++)ve(te,!0);for(te=0;te<J.length;te++)ve(te,!1);Y(B);var xe=function(Ce,Oe){var be,ue,se,ge,Ie,ke=[];function Se($e,pt,ct){var Ve=pt._id.charAt(0);if("histogram2dcontour"===$e){var Ge=pt._counterAxes[0],ut=a.getFromId(Oe,Ge),Qe="x"===Ve||"x"===Ge&&"category"===ut.type,yt="y"===Ve||"y"===Ge&&"category"===ut.type;return function(wt,kt){return 0===wt||0===kt||Qe&&wt===ct[kt].length-1||yt&&kt===ct.length-1?-1:("y"===Ve?kt:wt)-1}}return function(wt,kt){return"y"===Ve?kt:wt}}var Pe={min:function($e){return i.aggNums(Math.min,null,$e)},max:function($e){return i.aggNums(Math.max,null,$e)},sum:function($e){return i.aggNums(function(pt,ct){return pt+ct},null,$e)},total:function($e){return i.aggNums(function(pt,ct){return pt+ct},null,$e)},mean:function($e){return i.mean($e)},median:function($e){return i.median($e)}};function Fe($e,pt){return $e[1]-pt[1]}function Be($e,pt){return pt[1]-$e[1]}for(be=0;be<Ce.length;be++){var me=Ce[be];if("category"===me.type){var Me=me.categoryorder.match(R);if(Me){var Le=Me[1],Ne=Me[2],Re=me._id.charAt(0),He="x"===Re,Ze=[];for(ue=0;ue<me._categories.length;ue++)Ze.push([me._categories[ue],[]]);for(ue=0;ue<me._traceIndices.length;ue++){var nt=me._traceIndices[ue],ft=Oe._fullData[nt];if(!0===ft.visible){var ht=ft.type;p.traceIs(ft,"histogram")&&(delete ft._xautoBinFinished,delete ft._yautoBinFinished);var Tt="splom"===ht,At="scattergl"===ht,_t=Oe.calcdata[nt];for(se=0;se<_t.length;se++){var ot,it,Pt=_t[se];if(Tt){var jt=ft._axesDim[me._id];if(!He){var Ut=ft._diag[jt][0];Ut&&(me=Oe._fullLayout[a.id2name(Ut)])}var Rt=Pt.trace.dimensions[jt].values;for(ge=0;ge<Rt.length;ge++)for(ot=me._categoriesMap[Rt[ge]],Ie=0;Ie<Pt.trace.dimensions.length;Ie++)Ie!==jt&&Ze[ot][1].push(Pt.trace.dimensions[Ie].values[ge])}else if(At){for(ge=0;ge<Pt.t.x.length;ge++)He?(ot=Pt.t.x[ge],it=Pt.t.y[ge]):(ot=Pt.t.y[ge],it=Pt.t.x[ge]),Ze[ot][1].push(it);Pt.t&&Pt.t._scene&&delete Pt.t._scene.dirty}else if(Pt.hasOwnProperty("z")){var et=Se(ft.type,me,it=Pt.z);for(ge=0;ge<it.length;ge++)for(Ie=0;Ie<it[ge].length;Ie++)(ot=et(Ie,ge))+1&&Ze[ot][1].push(it[ge][Ie])}else for(void 0===(ot=Pt.p)&&(ot=Pt[Re]),void 0===(it=Pt.s)&&(it=Pt.v),void 0===it&&(it=He?Pt.y:Pt.x),Array.isArray(it)||(it=void 0===it?[]:[it]),ge=0;ge<it.length;ge++)Ze[ot][1].push(it[ge])}}}me._categoriesValue=Ze;var qe=[];for(ue=0;ue<Ze.length;ue++)qe.push([Ze[ue][0],Pe[Le](Ze[ue][1])]);qe.sort("descending"===Ne?Be:Fe),me._categoriesAggregatedValue=qe,me._initialCategories=qe.map(function($e){return $e[0]}),ke=ke.concat(me.sortByInitialCategories())}}}return ke}($,B);if(xe.length){for(X._numBoxes=0,X._numViolins=0,te=0;te<xe.length;te++)ve(xe[te],!0);for(te=0;te<xe.length;te++)ve(xe[te],!1);Y(B)}p.getComponentMethod("fx","calc")(B),p.getComponentMethod("errorbars","calc")(B)};var R=/(total|sum|min|max|mean|median) (ascending|descending)/;function j(B,V,q){var ie={};function te(X){X.clearCalc(),"multicategory"===X.type&&X.setupMultiCategory(V),ie[X._id]=1}i.simpleMap(B,te);for(var ee=q._axisMatchGroups||[],$=0;$<ee.length;$++)for(var J in ee[$])ie[J]||te(q[a.id2name(J)])}function Y(B){var V,q,ie,te=B._fullLayout,ee=te._visibleModules,$={};for(q=0;q<ee.length;q++){var J=ee[q],X=J.crossTraceCalc;if(X){var ae=J.basePlotModule.name;$[ae]?i.pushUnique($[ae],X):$[ae]=[X]}}for(ie in $){var ce=$[ie],le=te._subplots[ie];if(Array.isArray(le))for(V=0;V<le.length;V++){var pe=le[V],we="cartesian"===ie?te._plots[pe]:te[pe];for(q=0;q<ce.length;q++)ce[q](B,we,pe)}else for(q=0;q<ce.length;q++)ce[q](B)}}g.rehover=function(B){B._fullLayout._rehover&&B._fullLayout._rehover()},g.redrag=function(B){B._fullLayout._redrag&&B._fullLayout._redrag()},g.reselect=function(B){var V=B._fullLayout,q=(B.layout||{}).selections,ie=V._previousSelections;V._previousSelections=q;var te=V._reselect||JSON.stringify(q)!==JSON.stringify(ie);p.getComponentMethod("selections","reselect")(B,te)},g.generalUpdatePerTraceModule=function(B,V,q,ie){var te,ee=V.traceHash,$={};for(te=0;te<q.length;te++){var J=q[te],X=J[0].trace;X.visible&&($[X.type]=$[X.type]||[],$[X.type].push(J))}for(var ae in ee)if(!$[ae]){var ce=ee[ae][0];ce[0].trace.visible=!1,$[ae]=[ce]}for(var le in $){var pe=$[le];pe[0][0].trace._module.plot(B,V,i.filterVisible(pe),ie)}V.traceHash=$},g.plotBasePlot=function(B,V,q,ie,te){var ee=p.getModule(B),$=y(V.calcdata,ee)[0];ee.plot(V,$,ie,te)},g.cleanBasePlot=function(B,V,q,ie,te){var ee=te._has&&te._has(B),$=q._has&&q._has(B);ee&&!$&&te["_"+B+"layer"].selectAll("g.trace").remove()}},39360:function(ne){"use strict";ne.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},57384:function(ne,F,e){"use strict";var M=e(3400),k=e(92065).tester,o=M.findIndexOfMin,T=M.isAngleInsideSector,_=M.angleDelta,p=M.angleDist;function l(n,a,s,u){var f,c,y=u[0],d=u[1],m=i(Math.sin(a)-Math.sin(n)),g=i(Math.cos(a)-Math.cos(n)),x=Math.tan(s),v=i(1/x),b=m/g,h=d-b*y;return v?m&&g?c=x*(f=h/(x-b)):g?(f=d*v,c=d):(f=y,c=y*x):m&&g?(f=0,c=h):g?(f=0,c=d):f=c=NaN,[f,c]}function t(n,a,s,u){return M.isFullCircle([a,s])?function(f,c){var y,d=c.length,m=new Array(d+1);for(y=0;y<d;y++){var g=c[y];m[y]=[f*Math.cos(g),f*Math.sin(g)]}return m[y]=m[0].slice(),m}(n,u):function(f,c,y,d){var m,g,x=d.length,v=[];function b(U){return[f*Math.cos(U),f*Math.sin(U)]}function h(U,R,j){return l(U,R,j,b(U))}function S(U){return M.mod(U,x)}function w(U){return T(U,[c,y])}var E=o(d,function(U){return w(U)?p(U,c):1/0}),P=h(d[E],d[S(E-1)],c);for(v.push(P),m=E,g=0;g<x;m++,g++){var I=d[S(m)];if(!w(I))break;v.push(b(I))}var O=o(d,function(U){return w(U)?p(U,y):1/0}),z=h(d[O],d[S(O+1)],y);return v.push(z),v.push([0,0]),v.push(v[0].slice()),v}(n,a,s,u)}function i(n){return Math.abs(n)>1e-10?n:0}function r(n,a,s){a=a||0,s=s||0;for(var u=n.length,f=new Array(u),c=0;c<u;c++){var y=n[c];f[c]=[a+y[0],s-y[1]]}return f}ne.exports={isPtInsidePolygon:function(n,a,s,u,f){if(!T(a,u))return!1;var c,y;s[0]<s[1]?(c=s[0],y=s[1]):(c=s[1],y=s[0]);var d=k(t(c,u[0],u[1],f)),m=k(t(y,u[0],u[1],f)),g=[n*Math.cos(a),n*Math.sin(a)];return m.contains(g)&&!d.contains(g)},findPolygonOffset:function(n,a,s,u){for(var f=1/0,c=1/0,y=t(n,a,s,u),d=0;d<y.length;d++){var m=y[d];f=Math.min(f,m[0]),c=Math.min(c,-m[1])}return[f,c]},findEnclosingVertexAngles:function(n,a){var s=o(a,function(f){var c=_(f,n);return c>0?c:1/0}),u=M.mod(s+1,a.length);return[a[s],a[u]]},findIntersectionXY:l,findXYatLength:function(n,a,s,u){var f=-a*s,c=a*a+1,y=2*(a*f-s),m=Math.sqrt(y*y-4*c*(f*f+s*s-n*n)),g=(-y+m)/(2*c),x=(-y-m)/(2*c);return[[g,a*g+f+u],[x,a*x+f+u]]},clampTiny:i,pathPolygon:function(n,a,s,u,f,c){return"M"+r(t(n,a,s,u),f,c).join("L")},pathPolygonAnnulus:function(n,a,s,u,f,c,y){var d,m;n<a?(d=n,m=a):(d=a,m=n);var g=r(t(d,s,u,f),c,y);return"M"+r(t(m,s,u,f),c,y).reverse().join("L")+"M"+g.join("L")}}},40872:function(ne,F,e){"use strict";var M=e(84888).KY,k=e(3400).counterRegex,o=e(62400),T=e(39360),_=T.attr,p=T.name,l=k(p),t={};t[_]={valType:"subplotid",dflt:p,editType:"calc"},ne.exports={attr:_,name:p,idRoot:p,idRegex:l,attrRegex:l,attributes:t,layoutAttributes:e(95300),supplyLayoutDefaults:e(84380),plot:function(i){for(var r=i._fullLayout,n=i.calcdata,a=r._subplots[p],s=0;s<a.length;s++){var u=a[s],f=M(n,p,u),c=r[u]._subplot;c||(c=o(i,u),r[u]._subplot=c),c.plot(f,r,i._promises)}},clean:function(i,r,n,a){for(var s=a._subplots[p]||[],u=a._has&&a._has("gl"),f=r._has&&r._has("gl"),c=u&&!f,y=0;y<s.length;y++){var d=s[y],m=a[d]._subplot;if(!r[d]&&m)for(var g in m.framework.remove(),m.layers["radial-axis-title"].remove(),m.clipPaths)m.clipPaths[g].remove();c&&m._scene&&(m._scene.destroy(),m._scene=null)}},toSVG:e(57952).toSVG}},95300:function(ne,F,e){"use strict";var M=e(22548),k=e(94724),o=e(86968).u,T=e(3400).extendFlat,_=e(67824).overrideAll,p=_({color:k.color,showline:T({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:T({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,griddash:k.griddash},"plot","from-root"),l=_({tickmode:k.minor.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,ticklabelstep:k.ticklabelstep,showticklabels:k.showticklabels,labelalias:k.labelalias,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,minexponent:k.minexponent,separatethousands:k.separatethousands,tickfont:k.tickfont,tickangle:k.tickangle,tickformat:k.tickformat,tickformatstops:k.tickformatstops,layer:k.layer},"plot","from-root"),t={visible:T({},k.visible,{dflt:!0}),type:T({},k.type,{values:["-","linear","log","date","category"]}),autotypenumbers:k.autotypenumbers,autorangeoptions:{minallowed:k.autorangeoptions.minallowed,maxallowed:k.autorangeoptions.maxallowed,clipmin:k.autorangeoptions.clipmin,clipmax:k.autorangeoptions.clipmax,include:k.autorangeoptions.include,editType:"plot"},autorange:T({},k.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},minallowed:T({},k.minallowed,{editType:"plot"}),maxallowed:T({},k.maxallowed,{editType:"plot"}),range:T({},k.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:k.categoryorder,categoryarray:k.categoryarray,angle:{valType:"angle",editType:"plot"},autotickangles:k.autotickangles,side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:T({},k.title.text,{editType:"plot",dflt:""}),font:T({},k.title.font,{editType:"plot"}),editType:"plot"},hoverformat:k.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}};T(t,p,l);var i={visible:T({},k.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:k.autotypenumbers,categoryorder:k.categoryorder,categoryarray:k.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:k.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};T(i,p,l),ne.exports={domain:o({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:M.background},radialaxis:t,angularaxis:i,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},84380:function(ne,F,e){"use strict";var M=e(3400),k=e(76308),o=e(31780),T=e(168),_=e(84888).op,p=e(26332),l=e(25404),t=e(95936),i=e(42568),r=e(22416),n=e(42136),a=e(76808),s=e(52976),u=e(95300),f=e(57696),c=e(39360),y=c.axisNames;function d(g,x,v,b){var h=v("bgcolor");b.bgColor=k.combine(h,b.paper_bgcolor);var S=v("sector");v("hole");var w,E=_(b.fullData,c.name,b.id),P=b.layoutOut;function I(xe,Ce){return v(w+"."+xe,Ce)}for(var O=0;O<y.length;O++){M.isPlainObject(g[w=y[O]])||(g[w]={});var z=g[w],U=o.newContainer(x,w);U._id=U._name=w,U._attr=b.id+"."+w,U._traceIndices=E.map(function(xe){return xe._expandedIndex});var R=c.axisName2dataArray[w],j=m(z,U,I,E,R,b);r(z,U,I,{axData:E,dataAttr:R});var Y=I("visible");switch(f(U,x,P),I("uirevision",x.uirevision),U._m=1,w){case"radialaxis":I("minallowed"),I("maxallowed");var B,V=I("range"),q=U.getAutorangeDflt(V),ie=I("autorange",q);!V||(null!==V[0]||null!==V[1])&&(null!==V[0]&&null!==V[1]||"reversed"!==ie&&!0!==ie)&&(null===V[0]||"min"!==ie&&"max reversed"!==ie)&&(null===V[1]||"max"!==ie&&"min reversed"!==ie)||(V=void 0,delete U.range,U.autorange=!0,B=!0),B||(ie=I("autorange",q=U.getAutorangeDflt(V))),z.autorange=ie,ie&&(a(I,ie,V),"linear"!==j&&"-"!==j||I("rangemode"),U.isReversed()&&(U._m=-1)),U.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if("date"===j){M.log("Polar plots do not support date angular axes yet.");for(var te=0;te<E.length;te++)E[te].visible=!1;j=z.type=U.type="linear"}I("linear"===j?"thetaunit":"period");var ee=I("direction");I("rotation",{counterclockwise:0,clockwise:90}[ee])}if(i(z,U,I,U.type,{tickSuffixDflt:"degrees"===U.thetaunit?"\xb0":void 0}),Y){var $,J,X,ae,ce,le,pe,we,Te,ye,ve=b.font||{};J=($=I("color"))===z.color?$:ve.color,X=ve.size,ae=ve.family,ce=ve.weight,le=ve.style,pe=ve.variant,we=ve.textcase,Te=ve.lineposition,ye=ve.shadow,p(z,U,I,U.type),t(z,U,I,U.type,{font:{weight:ce,style:le,variant:pe,textcase:we,lineposition:Te,shadow:ye,color:J,size:X,family:ae},noAutotickangles:"angularaxis"===w}),l(z,U,I,{outerTicks:!0}),n(z,U,I,{dfltColor:$,bgColor:b.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:u[w]}),I("layer"),"radialaxis"===w&&(I("side"),I("angle",S[0]),I("title.text"),M.coerceFont(I,"title.font",{weight:ce,style:le,variant:pe,textcase:we,lineposition:Te,shadow:ye,color:J,size:M.bigFont(X),family:ae}))}"category"!==j&&I("hoverformat"),U._input=z}"category"===x.angularaxis.type&&v("gridshape")}function m(g,x,v,b,h,S){var w=v("autotypenumbers",S.autotypenumbersDflt);if("-"===v("type")){for(var E,P=0;P<b.length;P++)if(b[P].visible){E=b[P];break}E&&E[h]&&(x.type=s(E[h],"gregorian",{noMultiCategory:!0,autotypenumbers:w})),"-"===x.type?x.type="linear":g.type=x.type}return x.type}ne.exports=function(g,x,v){T(g,x,v,{type:c.name,attributes:u,handleDefaults:d,font:x.font,autotypenumbersDflt:x.autotypenumbers,paper_bgcolor:x.paper_bgcolor,fullData:v,layoutOut:x})}},62400:function(ne,F,e){"use strict";var M=e(33428),k=e(49760),o=e(24040),T=e(3400),_=T.strRotate,p=T.strTranslate,l=e(76308),t=e(43616),i=e(7316),r=e(54460),n=e(78344),a=e(57696),s=e(19280).doAutoRange,u=e(51184),f=e(86476),c=e(93024),y=e(81668),d=e(22676).prepSelect,m=e(22676).selectOnClick,g=e(22676).clearOutline,x=e(93972),v=e(73696),b=e(39172).redrawReglTraces,h=e(84284).MID_SHIFT,S=e(39360),w=e(57384),E=e(36416),P=E.smith,I=E.reactanceArc,O=E.resistanceArc,z=E.smithTransform,U=T._,R=T.mod,j=T.deg2rad,Y=T.rad2deg;function B(ee,$,J){this.isSmith=J||!1,this.id=$,this.gd=ee,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var X=ee._fullLayout;this.clipIds.forTraces="clip"+X._uid+$+"-for-traces",this.clipPaths.forTraces=X._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=X["_"+(J?"smith":"polar")+"layer"].append("g").attr("class",$),this.getHole=function(ce){return this.isSmith?0:ce.hole},this.getSector=function(ce){return this.isSmith?[0,360]:ce.sector},this.getRadial=function(ce){return this.isSmith?ce.realaxis:ce.radialaxis},this.getAngular=function(ce){return this.isSmith?ce.imaginaryaxis:ce.angularaxis},J||(this.radialTickLayout=null,this.angularTickLayout=null)}var V=B.prototype;function q(ee){var $=ee.ticks+String(ee.ticklen)+String(ee.showticklabels);return"side"in ee&&($+=ee.side),$}function ie(ee,$){return $[T.findIndexOfMin($,function(J){return T.angleDist(ee,J)})]}function te(ee,$,J){return $?(ee.attr("display",null),ee.attr(J)):ee&&ee.attr("display","none"),ee}ne.exports=function(ee,$,J){return new B(ee,$,J)},V.plot=function(ee,$){for(var J=this,X=$[J.id],ae=!1,ce=0;ce<ee.length;ce++)if(!1===ee[ce][0].trace.cliponaxis){ae=!0;break}J._hasClipOnAxisFalse=ae,J.updateLayers($,X),J.updateLayout($,X),i.generalUpdatePerTraceModule(J.gd,J,ee,X),J.updateFx($,X),J.isSmith&&(delete X.realaxis.range,delete X.imaginaryaxis.range)},V.updateLayers=function(ee,$){var J=this,X=J.isSmith,ae=J.layers,ce=J.getRadial($),le=J.getAngular($),pe=S.layerNames,we=pe.indexOf("frontplot"),Te=pe.slice(0,we),ye="below traces"===le.layer,ve="below traces"===ce.layer;ye&&Te.push("angular-line"),ve&&Te.push("radial-line"),ye&&Te.push("angular-axis"),ve&&Te.push("radial-axis"),Te.push("frontplot"),ye||Te.push("angular-line"),ve||Te.push("radial-line"),ye||Te.push("angular-axis"),ve||Te.push("radial-axis");var xe=(X?"smith":"polar")+"sublayer",Ce=J.framework.selectAll("."+xe).data(Te,String);Ce.enter().append("g").attr("class",function(Oe){return xe+" "+Oe}).each(function(Oe){var be=ae[Oe]=M.select(this);switch(Oe){case"frontplot":X||be.append("g").classed("barlayer",!0),be.append("g").classed("scatterlayer",!0);break;case"backplot":be.append("g").classed("maplayer",!0);break;case"plotbg":ae.bg=be.append("path");break;case"radial-grid":case"angular-grid":be.style("fill","none");break;case"radial-line":be.append("line").style("fill","none");break;case"angular-line":be.append("path").style("fill","none")}}),Ce.order()},V.updateLayout=function(ee,$){var J=this,X=J.layers,ae=ee._size,ce=J.getRadial($),le=J.getAngular($),pe=$.domain.x,we=$.domain.y;J.xOffset=ae.l+ae.w*pe[0],J.yOffset=ae.t+ae.h*(1-we[1]);var Te=J.xLength=ae.w*(pe[1]-pe[0]),ye=J.yLength=ae.h*(we[1]-we[0]),ve=J.getSector($);J.sectorInRad=ve.map(j);var xe,Ce,Oe,be,ue,ft,ht,Tt,At,_t,ot,it,Pt,jt,Ut,se=J.sectorBBox=(At=(ft=ve)[1]-(Tt=ft[0]),ot=(_t=R(Tt,360))+At,it=Math.cos(j(_t)),Pt=Math.sin(j(_t)),jt=Math.cos(j(ot)),Ut=Math.sin(j(ot)),ht=_t<=90&&ot>=90||_t>90&&ot>=450?1:Pt<=0&&Ut<=0?0:Math.max(Pt,Ut),[_t<=180&&ot>=180||_t>180&&ot>=540?-1:it>=0&&jt>=0?0:Math.min(it,jt),_t<=270&&ot>=270||_t>270&&ot>=630?-1:Pt>=0&&Ut>=0?0:Math.min(Pt,Ut),ot>=360?1:it<=0&&jt<=0?0:Math.max(it,jt),ht]),ge=se[2]-se[0],ke=ye/Te,Se=Math.abs((se[3]-se[1])/ge);ke>Se?(xe=Te,ue=(ye-(Ce=Te*Se))/ae.h/2,Oe=[pe[0],pe[1]],be=[we[0]+ue,we[1]-ue]):(Ce=ye,ue=(Te-(xe=ye/Se))/ae.w/2,Oe=[pe[0]+ue,pe[1]-ue],be=[we[0],we[1]]),J.xLength2=xe,J.yLength2=Ce,J.xDomain2=Oe,J.yDomain2=be;var Pe,Fe=J.xOffset2=ae.l+ae.w*Oe[0],Be=J.yOffset2=ae.t+ae.h*(1-be[1]),me=J.radius=xe/ge,Me=J.innerRadius=J.getHole($)*me,Le=J.cx=Fe-me*se[0],Ne=J.cy=Be+me*se[3],Re=J.cxx=Le-Fe,He=J.cyy=Ne-Be,Ze=ce.side;"counterclockwise"===Ze?(Pe=Ze,Ze="top"):"clockwise"===Ze&&(Pe=Ze,Ze="bottom"),J.radialAxis=J.mockAxis(ee,$,ce,{_id:"x",side:Ze,_trueSide:Pe,domain:[Me/ae.w,me/ae.w]}),J.angularAxis=J.mockAxis(ee,$,le,{side:"right",domain:[0,Math.PI],autorange:!1}),J.doAutoRange(ee,$),J.updateAngularAxis(ee,$),J.updateRadialAxis(ee,$),J.updateRadialAxisTitle(ee,$),J.xaxis=J.mockCartesianAxis(ee,$,{_id:"x",domain:Oe}),J.yaxis=J.mockCartesianAxis(ee,$,{_id:"y",domain:be});var nt=J.pathSubplot();J.clipPaths.forTraces.select("path").attr("d",nt).attr("transform",p(Re,He)),X.frontplot.attr("transform",p(Fe,Be)).call(t.setClipUrl,J._hasClipOnAxisFalse?null:J.clipIds.forTraces,J.gd),X.bg.attr("d",nt).attr("transform",p(Le,Ne)).call(l.fill,$.bgcolor)},V.mockAxis=function(ee,$,J,X){var ae=T.extendFlat({},J,X);return a(ae,$,ee),ae},V.mockCartesianAxis=function(ee,$,J){var X=this,ae=X.isSmith,ce=J._id,le=T.extendFlat({type:"linear"},J);n(le,ee);var pe={x:[0,2],y:[1,3]};return le.setRange=function(){var we=X.sectorBBox,Te=pe[ce],ye=X.radialAxis._rl,ve=(ye[1]-ye[0])/(1-X.getHole($));le.range=[we[Te[0]]*ve,we[Te[1]]*ve]},le.isPtWithinRange="x"!==ce||ae?function(){return!0}:function(we){return X.isPtInside(we)},le.setRange(),le.setScale(),le},V.doAutoRange=function(ee,$){var J=this,X=J.gd,ae=J.radialAxis,ce=J.getRadial($);s(X,ae);var le=ae.range;if(ce.range=le.slice(),ce._input.range=le.slice(),ae._rl=[ae.r2l(le[0],null,"gregorian"),ae.r2l(le[1],null,"gregorian")],void 0!==ae.minallowed){var pe=ae.r2l(ae.minallowed);ae._rl[0]>ae._rl[1]?ae._rl[1]=Math.max(ae._rl[1],pe):ae._rl[0]=Math.max(ae._rl[0],pe)}if(void 0!==ae.maxallowed){var we=ae.r2l(ae.maxallowed);ae._rl[0]<ae._rl[1]?ae._rl[1]=Math.min(ae._rl[1],we):ae._rl[0]=Math.min(ae._rl[0],we)}},V.updateRadialAxis=function(ee,$){var J=this,X=J.gd,ae=J.layers,ce=J.radius,le=J.innerRadius,pe=J.cx,we=J.cy,Te=J.getRadial($),ye=R(J.getSector($)[0],360),ve=J.radialAxis,xe=le<ce,Ce=J.isSmith;Ce||(J.fillViewInitialKey("radialaxis.angle",Te.angle),J.fillViewInitialKey("radialaxis.range",ve.range.slice()),ve.setGeometry()),"auto"===ve.tickangle&&ye>90&&ye<=270&&(ve.tickangle=180);var Oe=Ce?function(Be){var me=z(J,P([Be.x,0]));return p(me[0]-pe,me[1]-we)}:function(Be){return p(ve.l2p(Be.x)+le,0)},be=Ce?function(Be){return O(J,Be.x,-1/0,1/0)}:function(Be){return J.pathArc(ve.r2p(Be.x)+le)},ue=q(Te);if(J.radialTickLayout!==ue&&(ae["radial-axis"].selectAll(".xtick").remove(),J.radialTickLayout=ue),xe){ve.setScale();var se=0,ge=Ce?(ve.tickvals||[]).filter(function(Be){return Be>=0}).map(function(Be){return r.tickText(ve,Be,!0,!1)}):r.calcTicks(ve),Ie=Ce?ge:r.clipEnds(ve,ge),ke=r.getTickSigns(ve)[2];Ce&&(("top"===ve.ticks&&"bottom"===ve.side||"bottom"===ve.ticks&&"top"===ve.side)&&(ke=-ke),"top"===ve.ticks&&"top"===ve.side&&(se=-ve.ticklen),"bottom"===ve.ticks&&"bottom"===ve.side&&(se=ve.ticklen)),r.drawTicks(X,ve,{vals:ge,layer:ae["radial-axis"],path:r.makeTickPath(ve,0,ke),transFn:Oe,crisp:!1}),r.drawGrid(X,ve,{vals:Ie,layer:ae["radial-grid"],path:be,transFn:T.noop,crisp:!1}),r.drawLabels(X,ve,{vals:ge,layer:ae["radial-axis"],transFn:Oe,labelFns:r.makeLabelFns(ve,se)})}var Se=J.radialAxisAngle=J.vangles?Y(ie(j(Te.angle),J.vangles)):Te.angle,Pe=p(pe,we),Fe=Pe+_(-Se);te(ae["radial-axis"],xe&&(Te.showticklabels||Te.ticks),{transform:Fe}),te(ae["radial-grid"],xe&&Te.showgrid,{transform:Ce?"":Pe}),te(ae["radial-line"].select("line"),xe&&Te.showline,{x1:Ce?-ce:le,y1:0,x2:ce,y2:0,transform:Fe}).attr("stroke-width",Te.linewidth).call(l.stroke,Te.linecolor)},V.updateRadialAxisTitle=function(ee,$,J){if(!this.isSmith){var X=this,ae=X.gd,ce=X.radius,le=X.cx,pe=X.cy,we=X.getRadial($),Te=X.id+"title",ye=0;if(we.title){var ve=t.bBox(X.layers["radial-axis"].node()).height,xe=we.title.font.size,Ce=we.side;ye="top"===Ce?xe:"counterclockwise"===Ce?-(ve+.4*xe):ve+.8*xe}var Oe=void 0!==J?J:X.radialAxisAngle,be=j(Oe),ue=Math.cos(be),se=Math.sin(be),ge=le+ce/2*ue+ye*se,Ie=pe-ce/2*se+ye*ue;X.layers["radial-axis-title"]=y.draw(ae,Te,{propContainer:we,propName:X.id+".radialaxis.title",placeholder:U(ae,"Click to enter radial axis title"),attributes:{x:ge,y:Ie,"text-anchor":"middle"},transform:{rotate:-Oe}})}},V.updateAngularAxis=function(ee,$){var J=this,X=J.gd,ae=J.layers,ce=J.radius,le=J.innerRadius,pe=J.cx,we=J.cy,Te=J.getAngular($),ye=J.angularAxis,ve=J.isSmith;ve||(J.fillViewInitialKey("angularaxis.rotation",Te.rotation),ye.setGeometry(),ye.setScale());var xe=ve?function(Be){var me=z(J,P([0,Be.x]));return Math.atan2(me[0]-pe,me[1]-we)-Math.PI/2}:function(Be){return ye.t2g(Be.x)};"linear"===ye.type&&"radians"===ye.thetaunit&&(ye.tick0=Y(ye.tick0),ye.dtick=Y(ye.dtick));var Ce=function(Be){return p(pe+ce*Math.cos(Be),we-ce*Math.sin(Be))},Oe=ve?function(Be){var me=z(J,P([0,Be.x]));return p(me[0],me[1])}:function(Be){return Ce(xe(Be))},be=ve?function(Be){var me=z(J,P([0,Be.x])),Me=Math.atan2(me[0]-pe,me[1]-we)-Math.PI/2;return p(me[0],me[1])+_(-Y(Me))}:function(Be){var me=xe(Be);return Ce(me)+_(-Y(me))},ue=ve?function(Be){return I(J,Be.x,0,1/0)}:function(Be){var me=xe(Be),Me=Math.cos(me),Le=Math.sin(me);return"M"+[pe+le*Me,we-le*Le]+"L"+[pe+ce*Me,we-ce*Le]},se=r.makeLabelFns(ye,0).labelStandoff,ge={xFn:function(Be){var me=xe(Be);return Math.cos(me)*se},yFn:function(Be){var me=xe(Be),Me=Math.sin(me)>0?.2:1;return-Math.sin(me)*(se+Be.fontSize*Me)+Math.abs(Math.cos(me))*(Be.fontSize*h)},anchorFn:function(Be){var me=xe(Be),Me=Math.cos(me);return Math.abs(Me)<.1?"middle":Me>0?"start":"end"},heightFn:function(Be,me,Me){var Le=xe(Be);return-.5*(1+Math.sin(Le))*Me}},Ie=q(Te);J.angularTickLayout!==Ie&&(ae["angular-axis"].selectAll("."+ye._id+"tick").remove(),J.angularTickLayout=Ie);var ke,Se=ve?[1/0].concat(ye.tickvals||[]).map(function(Be){return r.tickText(ye,Be,!0,!1)}):r.calcTicks(ye);if(ve&&(Se[0].text="\u221e",Se[0].fontSize*=1.75),"linear"===$.gridshape?(ke=Se.map(xe),T.angleDelta(ke[0],ke[1])<0&&(ke=ke.slice().reverse())):ke=null,J.vangles=ke,"category"===ye.type&&(Se=Se.filter(function(Be){return T.isAngleInsideSector(xe(Be),J.sectorInRad)})),ye.visible){var Pe="inside"===ye.ticks?-1:1;r.drawTicks(X,ye,{vals:Se,layer:ae["angular-axis"],path:"M"+Pe*((ye.linewidth||1)/2)+",0h"+Pe*ye.ticklen,transFn:be,crisp:!1}),r.drawGrid(X,ye,{vals:Se,layer:ae["angular-grid"],path:ue,transFn:T.noop,crisp:!1}),r.drawLabels(X,ye,{vals:Se,layer:ae["angular-axis"],repositionOnUpdate:!0,transFn:Oe,labelFns:ge})}te(ae["angular-line"].select("path"),Te.showline,{d:J.pathSubplot(),transform:p(pe,we)}).attr("stroke-width",Te.linewidth).call(l.stroke,Te.linecolor)},V.updateFx=function(ee,$){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(ee),this.updateRadialDrag(ee,$,0),this.updateRadialDrag(ee,$,1)),this.updateHoverAndMainDrag(ee))},V.updateHoverAndMainDrag=function(ee){var $,J,X=this,ae=X.isSmith,ce=X.gd,pe=ee._zoomlayer,we=S.MINZOOM,Te=S.OFFEDGE,ye=X.radius,ve=X.innerRadius,xe=X.cx,Ce=X.cy,Oe=X.cxx,be=X.cyy,ue=X.sectorInRad,se=X.vangles,ge=X.radialAxis,Ie=w.clampTiny,ke=w.findXYatLength,Se=w.findEnclosingVertexAngles,Pe=S.cornerHalfWidth,Fe=S.cornerLen/2,Be=u.makeDragger(X.layers,"path","maindrag",!1===ee.dragmode?"none":"crosshair");M.select(Be).attr("d",X.pathSubplot()).attr("transform",p(xe,Ce)),Be.onmousemove=function(ct){c.hover(ce,ct,X.id),ce._fullLayout._lasthover=Be,ce._fullLayout._hoversubplot=X.id},Be.onmouseout=function(ct){ce._dragging||f.unhover(ce,ct)};var me,Me,Le,Ne,Re,He,Ze,nt,ft,ht={element:Be,gd:ce,subplot:X.id,plotinfo:{id:X.id,xaxis:X.xaxis,yaxis:X.yaxis},xaxes:[X.xaxis],yaxes:[X.yaxis]};function Tt(ct,Ve){return Math.sqrt(ct*ct+Ve*Ve)}function At(ct,Ve){return Tt(ct-Oe,Ve-be)}function _t(ct,Ve){return Math.atan2(be-Ve,ct-Oe)}function ot(ct,Ve){return[ct*Math.cos(Ve),ct*Math.sin(-Ve)]}function it(ct,Ve){if(0===ct)return X.pathSector(2*Pe);var Ge=Fe/ct,ut=Ve-Ge,Qe=Ve+Ge,yt=Math.max(0,Math.min(ct,ye)),wt=yt-Pe,kt=yt+Pe;return"M"+ot(wt,ut)+"A"+[wt,wt]+" 0,0,0 "+ot(wt,Qe)+"L"+ot(kt,Qe)+"A"+[kt,kt]+" 0,0,1 "+ot(kt,ut)+"Z"}function Pt(ct,Ve,Ge){if(0===ct)return X.pathSector(2*Pe);var ut,Qe,yt=ot(ct,Ve),wt=ot(ct,Ge),kt=Ie((yt[0]+wt[0])/2),vt=Ie((yt[1]+wt[1])/2);if(kt&&vt){var Lt=vt/kt,St=-1/Lt,Ot=ke(Pe,Lt,kt,vt);ut=ke(Fe,St,Ot[0][0],Ot[0][1]),Qe=ke(Fe,St,Ot[1][0],Ot[1][1])}else{var Nt,Bt;vt?(Nt=Fe,Bt=Pe):(Nt=Pe,Bt=Fe),ut=[[kt-Nt,vt-Bt],[kt+Nt,vt-Bt]],Qe=[[kt-Nt,vt+Bt],[kt+Nt,vt+Bt]]}return"M"+ut.join("L")+"L"+Qe.reverse().join("L")+"Z"}function jt(ct,Ve){return Ve=Math.max(Math.min(Ve,ye),ve),ct<Te?ct=0:ye-ct<Te?ct=ye:Ve<Te?Ve=0:ye-Ve<Te&&(Ve=ye),Math.abs(Ve-ct)>we?(ct<Ve?(Le=ct,Ne=Ve):(Le=Ve,Ne=ct),!0):(Le=null,Ne=null,!1)}function Ut(ct,Ve){Ve=Ve||"M0,0Z",nt.attr("d",ct=ct||Re),ft.attr("d",Ve),u.transitionZoombox(nt,ft,He,Ze),He=!0;var Ge={};$e(Ge),ce.emit("plotly_relayouting",Ge)}function Rt(ct,Ve){var Ge,ut,Qe=me+(ct*=$),yt=Me+(Ve*=J),wt=At(me,Me),kt=Math.min(At(Qe,yt),ye),vt=_t(me,Me);jt(wt,kt)&&(Ge=Re+X.pathSector(Ne),Le&&(Ge+=X.pathSector(Le)),ut=it(Le,vt)+it(Ne,vt)),Ut(Ge,ut)}function Je(ct,Ve,Ge,ut){var Qe=w.findIntersectionXY(Ge,ut,Ge,[ct-Oe,be-Ve]);return Tt(Qe[0],Qe[1])}function et(ct,Ve){var Ge,ut,Qe=me+ct,yt=Me+Ve,wt=_t(me,Me),kt=_t(Qe,yt),vt=Se(wt,se),Lt=Se(kt,se);jt(Je(me,Me,vt[0],vt[1]),Math.min(Je(Qe,yt,Lt[0],Lt[1]),ye))&&(Ge=Re+X.pathSector(Ne),Le&&(Ge+=X.pathSector(Le)),ut=[Pt(Le,vt[0],vt[1]),Pt(Ne,vt[0],vt[1])].join(" ")),Ut(Ge,ut)}function qe(){if(u.removeZoombox(ce),null!==Le&&null!==Ne){var ct={};$e(ct),u.showDoubleClickNotifier(ce),o.call("_guiRelayout",ce,ct)}}function $e(ct){var Ve=ge._rl,Ge=(Ve[1]-Ve[0])/(1-ve/ye)/ye;ct[X.id+".radialaxis.range"]=[Ve[0]+(Le-ve)*Ge,Ve[0]+(Ne-ve)*Ge]}function pt(ct,Ve){var Ge=ce._fullLayout.clickmode;if(u.removeZoombox(ce),2===ct){var ut={};for(var Qe in X.viewInitial)ut[X.id+"."+Qe]=X.viewInitial[Qe];ce.emit("plotly_doubleclick",null),o.call("_guiRelayout",ce,ut)}Ge.indexOf("select")>-1&&1===ct&&m(Ve,ce,[X.xaxis],[X.yaxis],X.id,ht),Ge.indexOf("event")>-1&&c.click(ce,Ve,X.id)}ht.prepFn=function(ct,Ve,Ge){var ut=ce._fullLayout.dragmode,Qe=Be.getBoundingClientRect();ce._fullLayout._calcInverseTransform(ce),$=ce._fullLayout._invScaleX,J=ce._fullLayout._invScaleY;var wt=T.apply3DTransform(ce._fullLayout._invTransform)(Ve-Qe.left,Ge-Qe.top);if(me=wt[0],Me=wt[1],se){var kt=w.findPolygonOffset(ye,ue[0],ue[1],se);me+=Oe+kt[0],Me+=be+kt[1]}switch(ut){case"zoom":ht.clickFn=pt,ae||(ht.moveFn=se?et:Rt,ht.doneFn=qe,Le=null,Ne=null,Re=X.pathSubplot(),He=!1,Ze=k(ce._fullLayout[X.id].bgcolor).getLuminance(),(nt=u.makeZoombox(pe,Ze,xe,Ce,Re)).attr("fill-rule","evenodd"),ft=u.makeCorners(pe,xe,Ce),g(ce));break;case"select":case"lasso":d(ct,Ve,Ge,ht,ut)}},f.init(ht)},V.updateRadialDrag=function(ee,$,J){var X=this,ae=X.gd,ce=X.layers,le=X.radius,pe=X.innerRadius,we=X.cx,Te=X.cy,ye=X.radialAxis,ve=S.radialDragBoxSize,xe=ve/2;if(ye.visible){var Ce,Oe,be,ue=j(X.radialAxisAngle),se=ye._rl,ge=se[0],Ie=se[1],ke=se[J],Se=.75*(se[1]-se[0])/(1-X.getHole($))/le;J?(Ce=we+(le+xe)*Math.cos(ue),Oe=Te-(le+xe)*Math.sin(ue),be="radialdrag"):(Ce=we+(pe-xe)*Math.cos(ue),Oe=Te-(pe-xe)*Math.sin(ue),be="radialdrag-inner");var Pe,Fe,Be,me=u.makeRectDragger(ce,be,"crosshair",-xe,-xe,ve,ve),Me={element:me,gd:ae};!1===ee.dragmode&&(Me.dragmode=!1),te(M.select(me),ye.visible&&pe<le,{transform:p(Ce,Oe)}),Me.prepFn=function(){Pe=null,Fe=null,Be=null,Me.moveFn=Le,Me.doneFn=Ne,g(ae)},Me.clampFn=function(Ze,nt){return Math.sqrt(Ze*Ze+nt*nt)<S.MINDRAG&&(Ze=0,nt=0),[Ze,nt]},f.init(Me)}function Le(Ze,nt){if(Pe)Pe(Ze,nt);else{var ft=[Ze,-nt],ht=[Math.cos(ue),Math.sin(ue)],Tt=Math.abs(T.dot(ft,ht)/Math.sqrt(T.dot(ft,ft)));isNaN(Tt)||(Pe=Tt<.5?Re:He)}var _t,At={};_t=At,null!==Fe?_t[X.id+".radialaxis.angle"]=Fe:null!==Be&&(_t[X.id+".radialaxis.range["+J+"]"]=Be),ae.emit("plotly_relayouting",At)}function Ne(){null!==Fe?o.call("_guiRelayout",ae,X.id+".radialaxis.angle",Fe):null!==Be&&o.call("_guiRelayout",ae,X.id+".radialaxis.range["+J+"]",Be)}function Re(Ze,nt){if(0!==J){Fe=Math.atan2(Te-(Oe+nt),Ce+Ze-we),X.vangles&&(Fe=ie(Fe,X.vangles)),Fe=Y(Fe);var Tt=p(we,Te)+_(-Fe);ce["radial-axis"].attr("transform",Tt),ce["radial-line"].select("line").attr("transform",Tt);var At=X.gd._fullLayout;X.updateRadialAxisTitle(At,At[X.id],Fe)}}function He(Ze,nt){var ft=T.dot([Ze,-nt],[Math.cos(ue),Math.sin(ue)]);if(Be=ke-Se*ft,Se>0==(J?Be>ge:Be<Ie)){var ht=ae._fullLayout,Tt=ht[X.id];ye.range[J]=Be,ye._rl[J]=Be,X.updateRadialAxis(ht,Tt),X.xaxis.setRange(),X.xaxis.setScale(),X.yaxis.setRange(),X.yaxis.setScale();var At=!1;for(var _t in X.traceHash){var ot=X.traceHash[_t],it=T.filterVisible(ot);ot[0][0].trace._module.plot(ae,X,it,Tt),o.traceIs(_t,"gl")&&it.length&&(At=!0)}At&&(v(ae),b(ae))}else Be=null}},V.updateAngularDrag=function(ee){var $=this,J=$.gd,X=$.layers,ae=$.radius,ce=$.angularAxis,le=$.cx,pe=$.cy,we=$.cxx,Te=$.cyy,ye=S.angularDragBoxSize,ve=u.makeDragger(X,"path","angulardrag",!1===ee.dragmode?"none":"move"),xe={element:ve,gd:J};function Ce(Me,Le){return Math.atan2(Te+ye-Le,Me-we-ye)}!1===ee.dragmode?xe.dragmode=!1:M.select(ve).attr("d",$.pathAnnulus(ae,ae+ye)).attr("transform",p(le,pe)).call(x,"move");var Oe,be,ue,se,ge,Ie,ke=X.frontplot.select(".scatterlayer").selectAll(".trace"),Se=ke.selectAll(".point"),Pe=ke.selectAll(".textpoint");function Fe(Me,Le){var Ne=$.gd._fullLayout,Re=Ne[$.id],He=Ce(Oe+Me*ee._invScaleX,be+Le*ee._invScaleY),Ze=Y(He-Ie);if(se=ue+Ze,X.frontplot.attr("transform",p($.xOffset2,$.yOffset2)+_([-Ze,we,Te])),$.vangles){ge=$.radialAxisAngle+Ze;var nt=p(le,pe)+_(-Ze),ft=p(le,pe)+_(-ge);X.bg.attr("transform",nt),X["radial-grid"].attr("transform",nt),X["radial-axis"].attr("transform",ft),X["radial-line"].select("line").attr("transform",ft),$.updateRadialAxisTitle(Ne,Re,ge)}else $.clipPaths.forTraces.select("path").attr("transform",p(we,Te)+_(Ze));Se.each(function(){var it=M.select(this),Pt=t.getTranslate(it);it.attr("transform",p(Pt.x,Pt.y)+_([Ze]))}),Pe.each(function(){var it=M.select(this),Pt=it.select("text"),jt=t.getTranslate(it);it.attr("transform",_([Ze,Pt.attr("x"),Pt.attr("y")])+p(jt.x,jt.y))}),ce.rotation=T.modHalf(se,360),$.updateAngularAxis(Ne,Re),$._hasClipOnAxisFalse&&!T.isFullCircle($.sectorInRad)&&ke.call(t.hideOutsideRangePoints,$);var ht=!1;for(var Tt in $.traceHash)if(o.traceIs(Tt,"gl")){var At=$.traceHash[Tt],_t=T.filterVisible(At);At[0][0].trace._module.plot(J,$,_t,Re),_t.length&&(ht=!0)}ht&&(v(J),b(J));var ot={};Be(ot),J.emit("plotly_relayouting",ot)}function Be(Me){Me[$.id+".angularaxis.rotation"]=se,$.vangles&&(Me[$.id+".radialaxis.angle"]=ge)}function me(){Pe.select("text").attr("transform",null);var Me={};Be(Me),o.call("_guiRelayout",J,Me)}xe.prepFn=function(Me,Le,Ne){ue=ee[$.id].angularaxis.rotation;var He=ve.getBoundingClientRect();Oe=Le-He.left,be=Ne-He.top,J._fullLayout._calcInverseTransform(J);var Ze=T.apply3DTransform(ee._invTransform)(Oe,be);Ie=Ce(Oe=Ze[0],be=Ze[1]),xe.moveFn=Fe,xe.doneFn=me,g(J)},$.vangles&&!T.isFullCircle($.sectorInRad)&&(xe.prepFn=T.noop,x(M.select(ve),null)),f.init(xe)},V.isPtInside=function(ee){if(this.isSmith)return!0;var $=this.sectorInRad,J=this.vangles,X=this.angularAxis.c2g(ee.theta),ae=this.radialAxis,ce=ae.c2l(ee.r);return(J?w.isPtInsidePolygon:T.isPtInsideSector)(ce,X,ae._rl,$,J)},V.pathArc=function(ee){var $=this.sectorInRad,J=this.vangles;return(J?w.pathPolygon:T.pathArc)(ee,$[0],$[1],J)},V.pathSector=function(ee){var $=this.sectorInRad,J=this.vangles;return(J?w.pathPolygon:T.pathSector)(ee,$[0],$[1],J)},V.pathAnnulus=function(ee,$){var J=this.sectorInRad,X=this.vangles;return(X?w.pathPolygonAnnulus:T.pathAnnulus)(ee,$,J[0],J[1],X)},V.pathSubplot=function(){var ee=this.innerRadius,$=this.radius;return ee?this.pathAnnulus(ee,$):this.pathSector($)},V.fillViewInitialKey=function(ee,$){ee in this.viewInitial||(this.viewInitial[ee]=$)}},57696:function(ne,F,e){"use strict";var M=e(3400),k=e(78344),o=M.deg2rad,T=M.rad2deg;ne.exports=function(_,p,l){switch(k(_,l),_._id){case"x":case"radialaxis":r=p._subplot,(t=_).setGeometry=function(){var n=t._rl[0],a=t._rl[1],s=r.innerRadius,u=(r.radius-s)/(a-n),f=s/u,c=n>a?function(y){return y<=0}:function(y){return y>=0};t.c2g=function(y){var d=t.c2l(y)-n;return(c(d)?d:0)+f},t.g2c=function(y){return t.l2c(y+n-f)},t.g2p=function(y){return y*u},t.c2p=function(y){return t.g2p(t.c2g(y))}};break;case"angularaxis":!function(t,i){var r=t.type;if("linear"===r){var n=t.d2c,a=t.c2d;t.d2c=function(s,u){return f=n(s),"degrees"===u?o(f):f;var f},t.c2d=function(s,u){return a((f=s,"degrees"===u?T(f):f));var f}}t.makeCalcdata=function(s,u){var f,c,y=s[u],d=s._length,m=function(h){return t.d2c(h,s.thetaunit)};if(y)for(f=new Array(d),c=0;c<d;c++)f[c]=m(y[c]);else{var g=u+"0",x="d"+u,v=g in s?m(s[g]):0,b=s[x]?m(s[x]):(t.period||2*Math.PI)/d;for(f=new Array(d),c=0;c<d;c++)f[c]=v+c*b}return f},t.setGeometry=function(){var s,u,f,c,y=i.sector,d=y.map(o),m={clockwise:-1,counterclockwise:1}[t.direction],g=o(t.rotation),x=function(S){return m*S+g},v=function(S){return(S-g)/m};switch(r){case"linear":u=s=M.identity,c=o,f=T,t.range=M.isFullCircle(d)?[y[0],y[0]+360]:d.map(v).map(T);break;case"category":var b=t._categories.length,h=t.period?Math.max(t.period,b):b;0===h&&(h=1),u=c=function(S){return 2*S*Math.PI/h},s=f=function(S){return S*h/Math.PI/2},t.range=[0,h]}t.c2g=function(S){return x(u(S))},t.g2c=function(S){return s(v(S))},t.t2g=function(S){return x(c(S))},t.g2t=function(S){return f(v(S))}}}(_,p)}var t,r}},55012:function(ne){"use strict";ne.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},36416:function(ne){"use strict";function F(o){return o<0?-1:o>0?1:0}function e(o){var T=o[0],_=o[1];if(!isFinite(T)||!isFinite(_))return[1,0];var p=(T+1)*(T+1)+_*_;return[(T*T+_*_-1)/p,2*_/p]}function M(o,T){return[T[0]*o.radius+o.cx,-T[1]*o.radius+o.cy]}function k(o,T){return T*o.radius}ne.exports={smith:e,reactanceArc:function(o,T,_,p){var l=M(o,e([_,T])),t=l[0],i=l[1],r=M(o,e([p,T])),n=r[0],a=r[1];if(0===T)return["M"+t+","+i,"L"+n+","+a].join(" ");var s=k(o,1/Math.abs(T));return["M"+t+","+i,"A"+s+","+s+" 0 0,"+(T<0?1:0)+" "+n+","+a].join(" ")},resistanceArc:function(o,T,_,p){var l=k(o,1/(T+1)),t=M(o,e([T,_])),i=t[0],r=t[1],n=M(o,e([T,p])),a=n[0],s=n[1];if(F(_)!==F(p)){var u=M(o,e([T,0]));return["M"+i+","+r,"A"+l+","+l+" 0 0,"+(0<_?0:1)+" "+u[0]+","+u[1],"A"+l+","+l+" 0 0,"+(p<0?0:1)+a+","+s].join(" ")}return["M"+i+","+r,"A"+l+","+l+" 0 0,"+(p<_?0:1)+" "+a+","+s].join(" ")},smithTransform:M}},47788:function(ne,F,e){"use strict";var M=e(84888).KY,k=e(3400).counterRegex,o=e(62400),T=e(55012),_=T.attr,p=T.name,l=k(p),t={};t[_]={valType:"subplotid",dflt:p,editType:"calc"},ne.exports={attr:_,name:p,idRoot:p,idRegex:l,attrRegex:l,attributes:t,layoutAttributes:e(6183),supplyLayoutDefaults:e(22836),plot:function(i){for(var r=i._fullLayout,n=i.calcdata,a=r._subplots[p],s=0;s<a.length;s++){var u=a[s],f=M(n,p,u),c=r[u]._subplot;c||(c=o(i,u,!0),r[u]._subplot=c),c.plot(f,r,i._promises)}},clean:function(i,r,n,a){for(var s=a._subplots[p]||[],u=0;u<s.length;u++){var f=s[u],c=a[f]._subplot;if(!r[f]&&c)for(var y in c.framework.remove(),c.clipPaths)c.clipPaths[y].remove()}},toSVG:e(57952).toSVG}},6183:function(ne,F,e){"use strict";var M=e(22548),k=e(94724),o=e(86968).u,T=e(3400).extendFlat,_=e(67824).overrideAll,p=_({color:k.color,showline:T({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:T({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,griddash:k.griddash},"plot","from-root"),l=_({ticklen:k.ticklen,tickwidth:T({},k.tickwidth,{dflt:2}),tickcolor:k.tickcolor,showticklabels:k.showticklabels,labelalias:k.labelalias,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,tickfont:k.tickfont,tickformat:k.tickformat,hoverformat:k.hoverformat,layer:k.layer},"plot","from-root"),t=T({visible:T({},k.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:T({},k.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},p,l),i=T({visible:T({},k.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:k.ticks,editType:"calc"},p,l);ne.exports={domain:o({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:M.background},realaxis:t,imaginaryaxis:i,editType:"calc"}},22836:function(ne,F,e){"use strict";var M,k,o,T=e(3400),_=e(76308),p=e(31780),l=e(168),t=e(84888).op,i=e(42568),r=e(95936),n=e(42136),a=e(78344),s=e(6183),u=e(55012),f=u.axisNames,c=(M=function(d){return T.isTypedArray(d)&&(d=Array.from(d)),d.slice().reverse().map(function(m){return-m}).concat([0]).concat(d)},k=String,o={},function(d){var m=k?k(d):d;if(m in o)return o[m];var g=M(d);return o[m]=g,g});function y(d,m,g,x){var v=g("bgcolor");x.bgColor=_.combine(v,x.paper_bgcolor);var b,h=t(x.fullData,u.name,x.id),S=x.layoutOut;function w(V,q){return g(b+"."+V,q)}for(var E=0;E<f.length;E++){T.isPlainObject(d[b=f[E]])||(d[b]={});var P=d[b],I=p.newContainer(m,b);I._id=I._name=b,I._attr=x.id+"."+b,I._traceIndices=h.map(function(V){return V._expandedIndex});var O=w("visible");if(I.type="linear",a(I,S),i(P,I,w,I.type),O){var z,U,R,j,Y="realaxis"===b;Y&&w("side"),Y?w("tickvals"):w("tickvals",c(m.realaxis.tickvals||s.realaxis.tickvals.dflt)),T.isTypedArray(I.tickvals)&&(I.tickvals=Array.from(I.tickvals));var B=x.font||{};O&&(U=(z=w("color"))===P.color?z:B.color,R=B.size,j=B.family),r(P,I,w,I.type,{noAutotickangles:!0,noTicklabelstep:!0,noAng:!Y,noExp:!0,font:{color:U,size:R,family:j}}),T.coerce2(d,m,s,b+".ticklen"),T.coerce2(d,m,s,b+".tickwidth"),T.coerce2(d,m,s,b+".tickcolor",m.color),w("ticks")||(delete m[b].ticklen,delete m[b].tickwidth,delete m[b].tickcolor),n(P,I,w,{dfltColor:z,bgColor:x.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:s[b]}),w("layer")}w("hoverformat"),delete I.type,I._input=P}}ne.exports=function(d,m,g){l(d,m,g,{noUirevision:!0,type:u.name,attributes:s,handleDefaults:y,font:m.font,paper_bgcolor:m.paper_bgcolor,fullData:g,layoutOut:m})}},168:function(ne,F,e){"use strict";var M=e(3400),k=e(31780),o=e(86968).Q;ne.exports=function(T,_,p,l){var t,i,n=l.attributes,a=l.handleDefaults,s=l.partition||"x",u=_._subplots[l.type],f=u.length,c=f&&u[0].replace(/\d+$/,"");function y(x,v){return M.coerce(t,i,n,x,v)}for(var d=0;d<f;d++){var m=u[d];t=T[m]?T[m]:T[m]={},i=k.newContainer(_,m,c),l.noUirevision||y("uirevision",_.uirevision);var g={};g[s]=[d/f,(d+1)/f],o(i,_,y,g),l.id=m,a(t,i,y,l)}}},21776:function(ne,F,e){"use strict";function k(o){var T=o.description?" "+o.description:"",_=o.keys||[];if(_.length>0){for(var p=[],l=0;l<_.length;l++)p[l]="`"+_[l]+"`";T+="Finally, the template string has access to ",T=1===_.length?T+"variable "+p[0]:T+"variables "+p.slice(0,-1).join(", ")+" and "+p.slice(-1)+"."}return T}e(26880),F.Ks=function(o,T){o=o||{},k(T=T||{});var _={valType:"string",dflt:"",editType:o.editType||"none"};return!1!==o.arrayOk&&(_.arrayOk=!0),_},F.Gw=function(o,T){o=o||{},k(T=T||{});var _={valType:"string",dflt:"",editType:o.editType||"calc"};return!1!==o.arrayOk&&(_.arrayOk=!0),_},F.ye=function(o,T){return o=o||{},k(T=T||{}),{valType:"string",dflt:"",editType:o.editType||"arraydraw"}}},19352:function(ne,F,e){"use strict";var M=e(24696),k=e(84888).KY,o=e(3400).counterRegex,T="ternary";F.name=T;var _=F.attr="subplot";F.idRoot=T,F.idRegex=F.attrRegex=o(T),(F.attributes={})[_]={valType:"subplotid",dflt:"ternary",editType:"calc"},F.layoutAttributes=e(86379),F.supplyLayoutDefaults=e(38536),F.plot=function(p){for(var l=p._fullLayout,t=p.calcdata,i=l._subplots[T],r=0;r<i.length;r++){var n=i[r],a=k(t,T,n),s=l[n]._subplot;s||(s=new M({id:n,graphDiv:p,container:l._ternarylayer.node()},l),l[n]._subplot=s),s.plot(a,l,p._promises)}},F.clean=function(p,l,t,i){for(var r=i._subplots[T]||[],n=0;n<r.length;n++){var a=r[n],s=i[a]._subplot;!l[a]&&s&&(s.plotContainer.remove(),s.clipDef.remove(),s.clipDefRelative.remove(),s.layers["a-title"].remove(),s.layers["b-title"].remove(),s.layers["c-title"].remove())}}},86379:function(ne,F,e){"use strict";var M=e(22548),k=e(86968).u,o=e(94724),T=e(67824).overrideAll,_=e(92880).extendFlat,p={title:{text:o.title.text,font:o.title.font},color:o.color,tickmode:o.minor.tickmode,nticks:_({},o.nticks,{dflt:6,min:1}),tick0:o.tick0,dtick:o.dtick,tickvals:o.tickvals,ticktext:o.ticktext,ticks:o.ticks,ticklen:o.ticklen,tickwidth:o.tickwidth,tickcolor:o.tickcolor,ticklabelstep:o.ticklabelstep,showticklabels:o.showticklabels,labelalias:o.labelalias,showtickprefix:o.showtickprefix,tickprefix:o.tickprefix,showticksuffix:o.showticksuffix,ticksuffix:o.ticksuffix,showexponent:o.showexponent,exponentformat:o.exponentformat,minexponent:o.minexponent,separatethousands:o.separatethousands,tickfont:o.tickfont,tickangle:o.tickangle,tickformat:o.tickformat,tickformatstops:o.tickformatstops,hoverformat:o.hoverformat,showline:_({},o.showline,{dflt:!0}),linecolor:o.linecolor,linewidth:o.linewidth,showgrid:_({},o.showgrid,{dflt:!0}),gridcolor:o.gridcolor,gridwidth:o.gridwidth,griddash:o.griddash,layer:o.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:o._deprecated.title,titlefont:o._deprecated.titlefont}},l=ne.exports=T({domain:k({name:"ternary"}),bgcolor:{valType:"color",dflt:M.background},sum:{valType:"number",dflt:1,min:0},aaxis:p,baxis:p,caxis:p},"plot","from-root");l.uirevision={valType:"any",editType:"none"},l.aaxis.uirevision=l.baxis.uirevision=l.caxis.uirevision={valType:"any",editType:"none"}},38536:function(ne,F,e){"use strict";var M=e(76308),k=e(31780),o=e(3400),T=e(168),_=e(95936),p=e(42568),l=e(25404),t=e(26332),i=e(42136),r=e(86379),n=["aaxis","baxis","caxis"];function a(u,f,c,y){var d,m,g,x=c("bgcolor"),v=c("sum");y.bgColor=M.combine(x,y.paper_bgcolor);for(var b=0;b<n.length;b++)m=u[d=n[b]]||{},(g=k.newContainer(f,d))._name=d,s(m,g,y,f);var h=f.aaxis,S=f.baxis,w=f.caxis;h.min+S.min+w.min>=v&&(h.min=0,S.min=0,w.min=0,u.aaxis&&delete u.aaxis.min,u.baxis&&delete u.baxis.min,u.caxis&&delete u.caxis.min)}function s(u,f,c,y){var d=r[f._name];function m(S,w){return o.coerce(u,f,d,S,w)}m("uirevision",y.uirevision),f.type="linear";var g=m("color"),x=g!==d.color.dflt?g:c.font.color,v=f._name.charAt(0).toUpperCase(),b="Component "+v,h=m("title.text",b);f._hovertitle=h===b?h:v,o.coerceFont(m,"title.font",c.font,{overrideDflt:{size:o.bigFont(c.font.size),color:x}}),m("min"),t(u,f,m,"linear"),p(u,f,m,"linear"),_(u,f,m,"linear",{noAutotickangles:!0}),l(u,f,m,{outerTicks:!0}),m("showticklabels")&&(o.coerceFont(m,"tickfont",c.font,{overrideDflt:{color:x}}),m("tickangle"),m("tickformat")),i(u,f,m,{dfltColor:g,bgColor:c.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:d}),m("hoverformat"),m("layer")}ne.exports=function(u,f,c){T(u,f,c,{type:"ternary",attributes:r,handleDefaults:a,font:f.font,paper_bgcolor:f.paper_bgcolor})}},24696:function(ne,F,e){"use strict";var M=e(33428),k=e(49760),o=e(24040),T=e(3400),_=T.strTranslate,p=T._,l=e(76308),t=e(43616),i=e(78344),r=e(92880).extendFlat,n=e(7316),a=e(54460),s=e(86476),u=e(93024),f=e(72760),c=f.freeMode,y=f.rectMode,d=e(81668),m=e(22676).prepSelect,g=e(22676).selectOnClick,x=e(22676).clearOutline,v=e(22676).clearSelectionsCache,b=e(33816);function h(R,j){this.id=R.id,this.graphDiv=R.graphDiv,this.init(j),this.makeFramework(j),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}ne.exports=h;var S=h.prototype;S.init=function(R){this.container=R._ternarylayer,this.defs=R._defs,this.layoutId=R._uid,this.traceHash={},this.layers={}},S.plot=function(R,j){var Y=this,B=j[Y.id],V=j._size;Y._hasClipOnAxisFalse=!1;for(var q=0;q<R.length;q++)if(!1===R[q][0].trace.cliponaxis){Y._hasClipOnAxisFalse=!0;break}Y.updateLayers(B),Y.adjustLayout(B,V),n.generalUpdatePerTraceModule(Y.graphDiv,Y,R,B),Y.layers.plotbg.select("path").call(l.fill,B.bgcolor)},S.makeFramework=function(R){var j=this,Y=j.graphDiv,B=R[j.id],V=j.clipId="clip"+j.layoutId+j.id,q=j.clipIdRelative="clip-relative"+j.layoutId+j.id;j.clipDef=T.ensureSingleById(R._clips,"clipPath",V,function(ie){ie.append("path").attr("d","M0,0Z")}),j.clipDefRelative=T.ensureSingleById(R._clips,"clipPath",q,function(ie){ie.append("path").attr("d","M0,0Z")}),j.plotContainer=T.ensureSingle(j.container,"g",j.id),j.updateLayers(B),t.setClipUrl(j.layers.backplot,V,Y),t.setClipUrl(j.layers.grids,V,Y)},S.updateLayers=function(R){var j=this.layers,Y=["draglayer","plotbg","backplot","grids"];"below traces"===R.aaxis.layer&&Y.push("aaxis","aline"),"below traces"===R.baxis.layer&&Y.push("baxis","bline"),"below traces"===R.caxis.layer&&Y.push("caxis","cline"),Y.push("frontplot"),"above traces"===R.aaxis.layer&&Y.push("aaxis","aline"),"above traces"===R.baxis.layer&&Y.push("baxis","bline"),"above traces"===R.caxis.layer&&Y.push("caxis","cline");var B=this.plotContainer.selectAll("g.toplevel").data(Y,String),V=["agrid","bgrid","cgrid"];B.enter().append("g").attr("class",function(q){return"toplevel "+q}).each(function(q){var ie=M.select(this);j[q]=ie,"frontplot"===q?ie.append("g").classed("scatterlayer",!0):"backplot"===q?ie.append("g").classed("maplayer",!0):"plotbg"===q?ie.append("path").attr("d","M0,0Z"):"aline"===q||"bline"===q||"cline"===q?ie.append("path"):"grids"===q&&V.forEach(function(te){j[te]=ie.append("g").classed("grid "+te,!0)})}),B.order()};var w=Math.sqrt(4/3);S.adjustLayout=function(R,j){var Y,B,V,q,ie,te,ee=this,$=R.domain,J=($.x[0]+$.x[1])/2,X=($.y[0]+$.y[1])/2,ae=$.x[1]-$.x[0],ce=$.y[1]-$.y[0],le=ae*j.w,pe=ce*j.h,we=R.sum,Te=R.aaxis.min,ye=R.baxis.min,ve=R.caxis.min;le>w*pe?V=(q=pe)*w:q=(V=le)/w,ie=ae*V/le,te=ce*q/pe,B=j.t+j.h*(1-X)-q/2,ee.x0=Y=j.l+j.w*J-V/2,ee.y0=B,ee.w=V,ee.h=q,ee.sum=we,ee.xaxis={type:"linear",range:[Te+2*ve-we,we-Te-2*ye],domain:[J-ie/2,J+ie/2],_id:"x"},i(ee.xaxis,ee.graphDiv._fullLayout),ee.xaxis.setScale(),ee.xaxis.isPtWithinRange=function(Pe){return Pe.a>=ee.aaxis.range[0]&&Pe.a<=ee.aaxis.range[1]&&Pe.b>=ee.baxis.range[1]&&Pe.b<=ee.baxis.range[0]&&Pe.c>=ee.caxis.range[1]&&Pe.c<=ee.caxis.range[0]},ee.yaxis={type:"linear",range:[Te,we-ye-ve],domain:[X-te/2,X+te/2],_id:"y"},i(ee.yaxis,ee.graphDiv._fullLayout),ee.yaxis.setScale(),ee.yaxis.isPtWithinRange=function(){return!0};var xe=ee.yaxis.domain[0],Ce=ee.aaxis=r({},R.aaxis,{range:[Te,we-ye-ve],side:"left",tickangle:(+R.aaxis.tickangle||0)-30,domain:[xe,xe+te*w],anchor:"free",position:0,_id:"y",_length:V});i(Ce,ee.graphDiv._fullLayout),Ce.setScale();var Oe=ee.baxis=r({},R.baxis,{range:[we-Te-ve,ye],side:"bottom",domain:ee.xaxis.domain,anchor:"free",position:0,_id:"x",_length:V});i(Oe,ee.graphDiv._fullLayout),Oe.setScale();var be=ee.caxis=r({},R.caxis,{range:[we-Te-ye,ve],side:"right",tickangle:(+R.caxis.tickangle||0)+30,domain:[xe,xe+te*w],anchor:"free",position:0,_id:"y",_length:V});i(be,ee.graphDiv._fullLayout),be.setScale();var ue="M"+Y+","+(B+q)+"h"+V+"l-"+V/2+",-"+q+"Z";ee.clipDef.select("path").attr("d",ue),ee.layers.plotbg.select("path").attr("d",ue);var se="M0,"+q+"h"+V+"l-"+V/2+",-"+q+"Z";ee.clipDefRelative.select("path").attr("d",se);var ge=_(Y,B);ee.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",ge),ee.clipDefRelative.select("path").attr("transform",null);var Ie=_(Y-Oe._offset,B+q);ee.layers.baxis.attr("transform",Ie),ee.layers.bgrid.attr("transform",Ie);var ke=_(Y+V/2,B)+"rotate(30)"+_(0,-Ce._offset);ee.layers.aaxis.attr("transform",ke),ee.layers.agrid.attr("transform",ke);var Se=_(Y+V/2,B)+"rotate(-30)"+_(0,-be._offset);ee.layers.caxis.attr("transform",Se),ee.layers.cgrid.attr("transform",Se),ee.drawAxes(!0),ee.layers.aline.select("path").attr("d",Ce.showline?"M"+Y+","+(B+q)+"l"+V/2+",-"+q:"M0,0").call(l.stroke,Ce.linecolor||"#000").style("stroke-width",(Ce.linewidth||0)+"px"),ee.layers.bline.select("path").attr("d",Oe.showline?"M"+Y+","+(B+q)+"h"+V:"M0,0").call(l.stroke,Oe.linecolor||"#000").style("stroke-width",(Oe.linewidth||0)+"px"),ee.layers.cline.select("path").attr("d",be.showline?"M"+(Y+V/2)+","+B+"l"+V/2+","+q:"M0,0").call(l.stroke,be.linecolor||"#000").style("stroke-width",(be.linewidth||0)+"px"),ee.graphDiv._context.staticPlot||ee.initInteractions(),t.setClipUrl(ee.layers.frontplot,ee._hasClipOnAxisFalse?null:ee.clipId,ee.graphDiv)},S.drawAxes=function(R){var j=this,Y=j.graphDiv,B=j.id.substr(7)+"title",V=j.layers,q=j.aaxis,ie=j.baxis,te=j.caxis;if(j.drawAx(q),j.drawAx(ie),j.drawAx(te),R){var ee=Math.max(q.showticklabels?q.tickfont.size/2:0,(te.showticklabels?.75*te.tickfont.size:0)+("outside"===te.ticks?.87*te.ticklen:0)),$=(ie.showticklabels?ie.tickfont.size:0)+("outside"===ie.ticks?ie.ticklen:0)+3;V["a-title"]=d.draw(Y,"a"+B,{propContainer:q,propName:j.id+".aaxis.title",placeholder:p(Y,"Click to enter Component A title"),attributes:{x:j.x0+j.w/2,y:j.y0-q.title.font.size/3-ee,"text-anchor":"middle"}}),V["b-title"]=d.draw(Y,"b"+B,{propContainer:ie,propName:j.id+".baxis.title",placeholder:p(Y,"Click to enter Component B title"),attributes:{x:j.x0-$,y:j.y0+j.h+.83*ie.title.font.size+$,"text-anchor":"middle"}}),V["c-title"]=d.draw(Y,"c"+B,{propContainer:te,propName:j.id+".caxis.title",placeholder:p(Y,"Click to enter Component C title"),attributes:{x:j.x0+j.w+$,y:j.y0+j.h+.83*te.title.font.size+$,"text-anchor":"middle"}})}},S.drawAx=function(R){var j,Y=this,B=Y.graphDiv,V=R._name,q=V.charAt(0),ie=R._id,te=Y.layers[V],ee=q+"tickLayout",$=(j=R).ticks+String(j.ticklen)+String(j.showticklabels);Y[ee]!==$&&(te.selectAll("."+ie+"tick").remove(),Y[ee]=$),R.setScale();var J=a.calcTicks(R),X=a.clipEnds(R,J),ae=a.makeTransTickFn(R),ce=a.getTickSigns(R)[2],le=T.deg2rad(30),pe=ce*(R.linewidth||1)/2,we=ce*R.ticklen,Te=Y.w,ye=Y.h,ve="b"===q?"M0,"+pe+"l"+Math.sin(le)*we+","+Math.cos(le)*we:"M"+pe+",0l"+Math.cos(le)*we+","+-Math.sin(le)*we,xe={a:"M0,0l"+ye+",-"+Te/2,b:"M0,0l-"+Te/2+",-"+ye,c:"M0,0l-"+ye+","+Te/2}[q];a.drawTicks(B,R,{vals:"inside"===R.ticks?X:J,layer:te,path:ve,transFn:ae,crisp:!1}),a.drawGrid(B,R,{vals:X,layer:Y.layers[q+"grid"],path:xe,transFn:ae,crisp:!1}),a.drawLabels(B,R,{vals:J,layer:te,transFn:ae,labelFns:a.makeLabelFns(R,0,30)})};var E=b.MINZOOM/2+.87,P="m-0.87,.5h"+E+"v3h-"+(E+5.2)+"l"+(E/2+2.6)+",-"+(.87*E+4.5)+"l2.6,1.5l-"+E/2+","+.87*E+"Z",I="m0.87,.5h-"+E+"v3h"+(E+5.2)+"l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-2.6,1.5l"+E/2+","+.87*E+"Z",O="m0,1l"+E/2+","+.87*E+"l2.6,-1.5l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-"+(E/2+2.6)+","+(.87*E+4.5)+"l2.6,1.5l"+E/2+",-"+.87*E+"Z",z=!0;function U(R){M.select(R).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}S.clearOutline=function(){v(this.dragOptions),x(this.dragOptions.gd)},S.initInteractions=function(){var R,j,Y,B,V,q,ie,te,ee,$,J,X,ae=this,ce=ae.layers.plotbg.select("path").node(),le=ae.graphDiv,pe=le._fullLayout._zoomlayer;function we(se){var ge={};return ge[ae.id+".aaxis.min"]=se.a,ge[ae.id+".baxis.min"]=se.b,ge[ae.id+".caxis.min"]=se.c,ge}function Te(se,ge){var Ie=le._fullLayout.clickmode;U(le),2===se&&(le.emit("plotly_doubleclick",null),o.call("_guiRelayout",le,we({a:0,b:0,c:0}))),Ie.indexOf("select")>-1&&1===se&&g(ge,le,[ae.xaxis],[ae.yaxis],ae.id,ae.dragOptions),Ie.indexOf("event")>-1&&u.click(le,ge,ae.id)}function ye(se,ge){return 1-ge/ae.h}function ve(se,ge){return 1-(se+(ae.h-ge)/Math.sqrt(3))/ae.w}function xe(se,ge){return(se-(ae.h-ge)/Math.sqrt(3))/ae.w}function Ce(se,ge){var Ie=Y+se*R,ke=B+ge*j,Se=Math.max(0,Math.min(1,ye(0,B),ye(0,ke))),Pe=Math.max(0,Math.min(1,ve(Y,B),ve(Ie,ke))),Fe=Math.max(0,Math.min(1,xe(Y,B),xe(Ie,ke))),Be=(Se/2+Fe)*ae.w,me=(1-Se/2-Pe)*ae.w,Me=(Be+me)/2,Le=me-Be,Ne=(1-Se)*ae.h,Re=Ne-Le/w;Le<b.MINZOOM?(ie=V,J.attr("d",ee),X.attr("d","M0,0Z")):(ie={a:V.a+Se*q,b:V.b+Pe*q,c:V.c+Fe*q},J.attr("d",ee+"M"+Be+","+Ne+"H"+me+"L"+Me+","+Re+"L"+Be+","+Ne+"Z"),X.attr("d","M"+Y+","+B+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+Be+","+Ne+P+"M"+me+","+Ne+I+"M"+Me+","+Re+O)),$||(J.transition().style("fill",te>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),X.transition().style("opacity",1).duration(200),$=!0),le.emit("plotly_relayouting",we(ie))}function Oe(){U(le),ie!==V&&(o.call("_guiRelayout",le,we(ie)),z&&le.data&&le._context.showTips&&(T.notifier(p(le,"Double-click to zoom back out"),"long"),z=!1))}function be(se,ge){var Ie=se/ae.xaxis._m,ke=ge/ae.yaxis._m,Se=[(ie={a:V.a-ke,b:V.b+(Ie+ke)/2,c:V.c-(Ie-ke)/2}).a,ie.b,ie.c].sort(T.sorterAsc),Pe=Se.indexOf(ie.a),Fe=Se.indexOf(ie.b),Be=Se.indexOf(ie.c);Se[0]<0&&(Se[1]+Se[0]/2<0?(Se[2]+=Se[0]+Se[1],Se[0]=Se[1]=0):(Se[2]+=Se[0]/2,Se[1]+=Se[0]/2,Se[0]=0),ge=(V.a-(ie={a:Se[Pe],b:Se[Fe],c:Se[Be]}).a)*ae.yaxis._m,se=(V.c-ie.c-V.b+ie.b)*ae.xaxis._m);var me=_(ae.x0+se,ae.y0+ge);ae.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",me);var Me=_(-se,-ge);ae.clipDefRelative.select("path").attr("transform",Me),ae.aaxis.range=[ie.a,ae.sum-ie.b-ie.c],ae.baxis.range=[ae.sum-ie.a-ie.c,ie.b],ae.caxis.range=[ae.sum-ie.a-ie.b,ie.c],ae.drawAxes(!1),ae._hasClipOnAxisFalse&&ae.plotContainer.select(".scatterlayer").selectAll(".trace").call(t.hideOutsideRangePoints,ae),le.emit("plotly_relayouting",we(ie))}function ue(){o.call("_guiRelayout",le,we(ie))}this.dragOptions={element:ce,gd:le,plotinfo:{id:ae.id,domain:le._fullLayout[ae.id].domain,xaxis:ae.xaxis,yaxis:ae.yaxis},subplot:ae.id,prepFn:function(se,ge,Ie){ae.dragOptions.xaxes=[ae.xaxis],ae.dragOptions.yaxes=[ae.yaxis],R=le._fullLayout._invScaleX,j=le._fullLayout._invScaleY;var ke=ae.dragOptions.dragmode=le._fullLayout.dragmode;ae.dragOptions.minDrag=c(ke)?1:void 0,"zoom"===ke?(ae.dragOptions.moveFn=Ce,ae.dragOptions.clickFn=Te,ae.dragOptions.doneFn=Oe,function(Se,Pe,Fe){var Be=ce.getBoundingClientRect();Y=Pe-Be.left,B=Fe-Be.top,le._fullLayout._calcInverseTransform(le);var Me=T.apply3DTransform(le._fullLayout._invTransform)(Y,B);Y=Me[0],B=Me[1],ie=V={a:ae.aaxis.range[0],b:ae.baxis.range[1],c:ae.caxis.range[1]},q=ae.aaxis.range[1]-V.a,te=k(ae.graphDiv._fullLayout[ae.id].bgcolor).getLuminance(),ee="M0,"+ae.h+"L"+ae.w/2+", 0L"+ae.w+","+ae.h+"Z",$=!1,J=pe.append("path").attr("class","zoombox").attr("transform",_(ae.x0,ae.y0)).style({fill:te>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",ee),X=pe.append("path").attr("class","zoombox-corners").attr("transform",_(ae.x0,ae.y0)).style({fill:l.background,stroke:l.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),ae.clearOutline(le)}(0,ge,Ie)):"pan"===ke?(ae.dragOptions.moveFn=be,ae.dragOptions.clickFn=Te,ae.dragOptions.doneFn=ue,ie=V={a:ae.aaxis.range[0],b:ae.baxis.range[1],c:ae.caxis.range[1]},ae.clearOutline(le)):(y(ke)||c(ke))&&m(se,ge,Ie,ae.dragOptions,ke)}},ce.onmousemove=function(se){u.hover(le,se,ae.id),le._fullLayout._lasthover=ce,le._fullLayout._hoversubplot=ae.id},ce.onmouseout=function(se){le._dragging||s.unhover(le,se)},s.init(this.dragOptions)}},24040:function(ne,F,e){"use strict";var M=e(24248),k=e(16628),o=e(52416),T=e(63620),_=e(52200).addStyleRule,p=e(92880),l=e(45464),t=e(64859),i=p.extendFlat,r=p.extendDeepAll;function n(g){var x=g.name,v=g.categories,b=g.meta;if(F.modules[x])M.log("Type "+x+" already registered");else{F.subplotsRegistry[g.basePlotModule.name]||function(z){var U=z.name;if(F.subplotsRegistry[U])M.log("Plot type "+U+" already registered.");else for(var R in f(z),F.subplotsRegistry[U]=z,F.componentsRegistry)d(R,z.name)}(g.basePlotModule);for(var h={},S=0;S<v.length;S++)h[v[S]]=!0,F.allCategories[v[S]]=!0;for(var w in F.modules[x]={_module:g,categories:h},b&&Object.keys(b).length&&(F.modules[x].meta=b),F.allTypes.push(x),F.componentsRegistry)c(w,x);g.layoutAttributes&&i(F.traceLayoutAttributes,g.layoutAttributes);var E=g.basePlotModule,P=E.name;if("mapbox"===P){var I=E.constants.styleRules;for(var O in I)_(".js-plotly-plot .plotly .mapboxgl-"+O,I[O])}"geo"!==P&&"mapbox"!==P||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}function a(g){if("string"!=typeof g.name)throw new Error("Component module *name* must be a string.");var x=g.name;for(var v in F.componentsRegistry[x]=g,g.layoutAttributes&&(g.layoutAttributes._isLinkedToArray&&o(F.layoutArrayContainers,x),f(g)),F.modules)c(x,v);for(var b in F.subplotsRegistry)d(x,b);for(var h in F.transformsRegistry)y(x,h);g.schema&&g.schema.layout&&r(t,g.schema.layout)}function s(g){if("string"!=typeof g.name)throw new Error("Transform module *name* must be a string.");var x="Transform module "+g.name,v="function"==typeof g.transform,b="function"==typeof g.calcTransform;if(!v&&!b)throw new Error(x+" is missing a *transform* or *calcTransform* method.");for(var h in v&&b&&M.log([x+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),T(g.attributes)||M.log(x+" registered without an *attributes* object."),"function"!=typeof g.supplyDefaults&&M.log(x+" registered without a *supplyDefaults* method."),F.transformsRegistry[g.name]=g,F.componentsRegistry)y(h,g.name)}function u(g){var x=g.name,v=x.split("-")[0],b=g.dictionary,h=g.format,S=b&&Object.keys(b).length,w=h&&Object.keys(h).length,E=F.localeRegistry,P=E[x];if(P||(E[x]=P={}),v!==x){var I=E[v];I||(E[v]=I={}),S&&I.dictionary===P.dictionary&&(I.dictionary=b),w&&I.format===P.format&&(I.format=h)}S&&(P.dictionary=b),w&&(P.format=h)}function f(g){if(g.layoutAttributes){var x=g.layoutAttributes._arrayAttrRegexps;if(x)for(var v=0;v<x.length;v++)o(F.layoutArrayRegexes,x[v])}}function c(g,x){var v=F.componentsRegistry[g].schema;if(v&&v.traces){var b=v.traces[x];b&&r(F.modules[x]._module.attributes,b)}}function y(g,x){var v=F.componentsRegistry[g].schema;if(v&&v.transforms){var b=v.transforms[x];b&&r(F.transformsRegistry[x].attributes,b)}}function d(g,x){var v=F.componentsRegistry[g].schema;if(v&&v.subplots){var b=F.subplotsRegistry[x],h=b.layoutAttributes,S="subplot"===b.attr?b.name:b.attr;Array.isArray(S)&&(S=S[0]);var w=v.subplots[S];h&&w&&r(h,w)}}function m(g){return"object"==typeof g&&(g=g.type),g}F.modules={},F.allCategories={},F.allTypes=[],F.subplotsRegistry={},F.transformsRegistry={},F.componentsRegistry={},F.layoutArrayContainers=[],F.layoutArrayRegexes=[],F.traceLayoutAttributes={},F.localeRegistry={},F.apiMethodRegistry={},F.collectableSubplotTypes=null,F.register=function(g){if(F.collectableSubplotTypes=null,!g)throw new Error("No argument passed to Plotly.register.");g&&!Array.isArray(g)&&(g=[g]);for(var x=0;x<g.length;x++){var v=g[x];if(!v)throw new Error("Invalid module was attempted to be registered!");switch(v.moduleType){case"trace":n(v);break;case"transform":s(v);break;case"component":a(v);break;case"locale":u(v);break;case"apiMethod":F.apiMethodRegistry[v.name]=v.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},F.getModule=function(g){var x=F.modules[m(g)];return!!x&&x._module},F.traceIs=function(g,x){if("various"===(g=m(g)))return!1;var v=F.modules[g];return v||(g&&M.log("Unrecognized trace type "+g+"."),v=F.modules[l.type.dflt]),!!v.categories[x]},F.getTransformIndices=function(g,x){for(var v=[],b=g.transforms||[],h=0;h<b.length;h++)b[h].type===x&&v.push(h);return v},F.hasTransform=function(g,x){for(var v=g.transforms||[],b=0;b<v.length;b++)if(v[b].type===x)return!0;return!1},F.getComponentMethod=function(g,x){var v=F.componentsRegistry[g];return v&&v[x]||k},F.call=function(){var g=arguments[0],x=[].slice.call(arguments,1);return F.apiMethodRegistry[g].apply(null,x)}},91536:function(ne,F,e){"use strict";var M=e(24040),k=e(3400),o=k.extendFlat,T=k.extendDeep;function _(p){var l;switch(p){case"themes__thumb":l={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":l={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:l={}}return l}ne.exports=function(p,l){var t,n=p.layout,a=T([],p.data),s=T({},n,_(l.tileClass)),u=p._context||{};if(l.width&&(s.width=l.width),l.height&&(s.height=l.height),"thumbnail"===l.tileClass||"themes__thumb"===l.tileClass){s.annotations=[];var f=Object.keys(s);for(t=0;t<f.length;t++)["xaxis","yaxis","zaxis"].indexOf(f[t].slice(0,5))>-1&&(s[f[t]].title={text:""});for(t=0;t<a.length;t++){var c=a[t];c.showscale=!1,c.marker&&(c.marker.showscale=!1),M.traceIs(c,"pie-like")&&(c.textposition="none")}}if(Array.isArray(l.annotations))for(t=0;t<l.annotations.length;t++)s.annotations.push(l.annotations[t]);var y=Object.keys(s).filter(function(v){return v.match(/^scene\d*$/)});if(y.length){var d={};for("thumbnail"===l.tileClass&&(d={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),t=0;t<y.length;t++){var m=s[y[t]];m.xaxis||(m.xaxis={}),m.yaxis||(m.yaxis={}),m.zaxis||(m.zaxis={}),o(m.xaxis,d),o(m.yaxis,d),o(m.zaxis,d),m._scene=null}}var g=document.createElement("div");l.tileClass&&(g.className=l.tileClass);var x={gd:g,td:g,layout:s,data:a,config:{staticPlot:void 0===l.staticPlot||l.staticPlot,plotGlPixelRatio:void 0===l.plotGlPixelRatio?2:l.plotGlPixelRatio,displaylogo:l.displaylogo||!1,showLink:l.showLink||!1,showTips:l.showTips||!1,mapboxAccessToken:u.mapboxAccessToken}};return"transparent"!==l.setBackground&&(x.config.setBackground=l.setBackground||"opaque"),x.gd.defaultLayout=_(l.tileClass),x}},39792:function(ne,F,e){"use strict";var M=e(3400),k=e(67024),o=e(48616),T=e(81792);ne.exports=function(_,p){var l;return M.isPlainObject(_)||(l=M.getGraphDiv(_)),(p=p||{}).format=p.format||"png",p.width=p.width||null,p.height=p.height||null,p.imageDataOnly=!0,new Promise(function(t,i){l&&l._snapshotInProgress&&i(new Error("Snapshotting already in progress.")),M.isIE()&&"svg"!==p.format&&i(new Error(T.MSG_IE_BAD_FORMAT)),l&&(l._snapshotInProgress=!0);var r=k(_,p),n=p.filename||_.fn||"newplot";n+="."+p.format.replace("-","."),r.then(function(a){return l&&(l._snapshotInProgress=!1),o(a,n,p.format)}).then(function(a){t(a)}).catch(function(a){l&&(l._snapshotInProgress=!1),i(a)})})}},48616:function(ne,F,e){"use strict";var M=e(3400),k=e(81792);ne.exports=function(o,T,_){var p=document.createElement("a"),l="download"in p;return new Promise(function(t,i){var r,n;return M.isIE()?(r=k.createBlob(o,"svg"),window.navigator.msSaveBlob(r,T),r=null,t(T)):l?(r=k.createBlob(o,_),n=k.createObjectURL(r),p.href=n,p.download=T,document.body.appendChild(p),p.click(),document.body.removeChild(p),k.revokeObjectURL(n),r=null,t(T)):M.isSafari()?(k.octetStream(("svg"===_?",":";base64,")+encodeURIComponent(o)),t(T)):void i(new Error("download error"))})}},81792:function(ne,F,e){"use strict";var M=e(24040);F.getDelay=function(o){return o._has&&(o._has("gl3d")||o._has("gl2d")||o._has("mapbox"))?500:0},F.getRedrawFunc=function(o){return function(){M.getComponentMethod("colorbar","draw")(o)}},F.encodeSVG=function(o){return"data:image/svg+xml,"+encodeURIComponent(o)},F.encodeJSON=function(o){return"data:application/json,"+encodeURIComponent(o)};var k=window.URL||window.webkitURL;F.createObjectURL=function(o){return k.createObjectURL(o)},F.revokeObjectURL=function(o){return k.revokeObjectURL(o)},F.createBlob=function(o,T){if("svg"===T)return new window.Blob([o],{type:"image/svg+xml;charset=utf-8"});if("full-json"===T)return new window.Blob([o],{type:"application/json;charset=utf-8"});var _=function(p){for(var l=p.length,t=new ArrayBuffer(l),i=new Uint8Array(t),r=0;r<l;r++)i[r]=p.charCodeAt(r);return t}(window.atob(o));return new window.Blob([_],{type:"image/"+T})},F.octetStream=function(o){document.location.href="data:application/octet-stream"+o},F.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,F.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},78904:function(ne,F,e){"use strict";var M=e(81792),k={getDelay:M.getDelay,getRedrawFunc:M.getRedrawFunc,clone:e(91536),toSVG:e(37164),svgToImg:e(63268),toImage:e(61808),downloadImage:e(39792)};ne.exports=k},63268:function(ne,F,e){"use strict";var M=e(3400),k=e(61252).EventEmitter,o=e(81792);ne.exports=function(T){var _=T.emitter||new k,p=new Promise(function(l,t){var i=window.Image,r=T.svg,n=T.format||"png";if(M.isIE()&&"svg"!==n){var a=new Error(o.MSG_IE_BAD_FORMAT);return t(a),T.promise?p:_.emit("error",a)}var s,u,f=T.canvas,c=T.scale||1,m=c*(T.width||300),g=c*(T.height||150),x=f.getContext("2d",{willReadFrequently:!0}),v=new i;"svg"===n||M.isSafari()?u=o.encodeSVG(r):(s=o.createBlob(r,"svg"),u=o.createObjectURL(s)),f.width=m,f.height=g,v.onload=function(){var b;switch(s=null,o.revokeObjectURL(u),"svg"!==n&&x.drawImage(v,0,0,m,g),n){case"jpeg":b=f.toDataURL("image/jpeg");break;case"png":b=f.toDataURL("image/png");break;case"webp":b=f.toDataURL("image/webp");break;case"svg":b=u;break;default:var h="Image format is not jpeg, png, svg or webp.";if(t(new Error(h)),!T.promise)return _.emit("error",h)}l(b),T.promise||_.emit("success",b)},v.onerror=function(b){if(s=null,o.revokeObjectURL(u),t(b),!T.promise)return _.emit("error",b)},v.src=u});return T.promise?p:_}},61808:function(ne,F,e){"use strict";var M=e(61252).EventEmitter,k=e(24040),o=e(3400),T=e(81792),_=e(91536),p=e(37164),l=e(63268);ne.exports=function(t,i){var r=new M,n=_(t,{format:"png"}),a=n.gd;a.style.position="absolute",a.style.left="-5000px",document.body.appendChild(a);var s=T.getRedrawFunc(a);return k.call("_doPlot",a,n.data,n.layout,n.config).then(s).then(function(){var u=T.getDelay(a._fullLayout);setTimeout(function(){var f=p(a),c=document.createElement("canvas");c.id=o.randstr(),(r=l({format:i.format,width:a._fullLayout.width,height:a._fullLayout.height,canvas:c,emitter:r,svg:f})).clean=function(){a&&document.body.removeChild(a)}},u)}).catch(function(u){r.emit("error",u)}),r}},37164:function(ne,F,e){"use strict";var M=e(33428),k=e(3400),o=e(43616),T=e(76308),_=e(9616),p=/"/g,l="TOBESTRIPPED",t=new RegExp('("'+l+")|("+l+'")',"g");ne.exports=function(i,r,n){var a,s=i._fullLayout,u=s._paper,f=s._toppaper,c=s.width,y=s.height;u.insert("rect",":first-child").call(o.setRect,0,0,c,y).call(T.fill,s.paper_bgcolor);var d=s._basePlotModules||[];for(a=0;a<d.length;a++){var m=d[a];m.toSVG&&m.toSVG(i)}if(f){var g=f.node().childNodes,x=Array.prototype.slice.call(g);for(a=0;a<x.length;a++){var v=x[a];v.childNodes.length&&u.node().appendChild(v)}}s._draggers&&s._draggers.remove(),u.node().style.background="",u.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var h=M.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){h.style({visibility:null,display:null});var S=this.style.fontFamily;S&&-1!==S.indexOf('"')&&h.style("font-family",S.replace(p,l));var w=this.style.fontWeight;!w||"normal"!==w&&"400"!==w||h.style("font-weight",void 0);var E=this.style.fontStyle;E&&"normal"===E&&h.style("font-style",void 0);var P=this.style.fontVariant;P&&"normal"===P&&h.style("font-variant",void 0)}else h.remove()}),u.selectAll(".gradient_filled,.pattern_filled").each(function(){var h=M.select(this),S=this.style.fill;S&&-1!==S.indexOf("url(")&&h.style("fill",S.replace(p,l));var w=this.style.stroke;w&&-1!==w.indexOf("url(")&&h.style("stroke",w.replace(p,l))}),"pdf"!==r&&"eps"!==r||u.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),u.node().setAttributeNS(_.xmlns,"xmlns",_.svg),u.node().setAttributeNS(_.xmlns,"xmlns:xlink",_.xlink),"svg"===r&&n&&(u.attr("width",n*c),u.attr("height",n*y),u.attr("viewBox","0 0 "+c+" "+y));var h,S,w,b=(new window.XMLSerializer).serializeToString(u.node());return b=(b=(h=b,S=M.select("body").append("div").style({display:"none"}).html(""),w=h.replace(/(&[^;]*;)/gi,function(E){return"&lt;"===E?"&#60;":"&rt;"===E?"&#62;":-1!==E.indexOf("<")||-1!==E.indexOf(">")?"":S.html(E).text()}),S.remove(),b=w).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(t,"'"),k.isIE()&&(b=(b=(b=b.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),b}},84664:function(ne,F,e){"use strict";var M=e(3400);ne.exports=function(k,o){for(var T=0;T<k.length;T++)k[T].i=T;M.mergeArray(o.text,k,"tx"),M.mergeArray(o.hovertext,k,"htx");var _=o.marker;if(_){M.mergeArray(_.opacity,k,"mo",!0),M.mergeArray(_.color,k,"mc");var p=_.line;p&&(M.mergeArray(p.color,k,"mlc"),M.mergeArrayCastPositive(p.width,k,"mlw"))}}},20832:function(ne,F,e){"use strict";var M=e(52904),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(21776).Gw,_=e(49084),p=e(25376),l=e(78048),t=e(98192).c,i=e(92880).extendFlat,r=p({editType:"calc",arrayOk:!0,colorEditType:"style"}),n=i({},M.marker.line.width,{dflt:0}),a=i({width:n,editType:"calc"},_("marker.line")),s=i({line:a,editType:"calc"},_("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:t,cornerradius:{valType:"any",editType:"calc"}});ne.exports={x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),text:M.text,texttemplate:T({editType:"plot"},{keys:l.eventDataKeys}),hovertext:M.hovertext,hovertemplate:o({},{keys:l.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:i({},r,{}),insidetextfont:i({},r,{}),outsidetextfont:i({},r,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:i({},M.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:s,offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:{marker:{opacity:M.selected.marker.opacity,color:M.selected.marker.color,editType:"style"},textfont:M.selected.textfont,editType:"style"},unselected:{marker:{opacity:M.unselected.marker.opacity,color:M.unselected.marker.color,editType:"style"},textfont:M.unselected.textfont,editType:"style"},zorder:M.zorder,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},71820:function(ne,F,e){"use strict";var M=e(54460),k=e(1220),o=e(94288).hasColorscale,T=e(47128),_=e(84664),p=e(4500);ne.exports=function(l,t){var i,r,n,a,s,u,f=M.getFromId(l,t.xaxis||"x"),c=M.getFromId(l,t.yaxis||"y"),y={msUTC:!(!t.base&&0!==t.base)};"h"===t.orientation?(i=f.makeCalcdata(t,"x",y),n=c.makeCalcdata(t,"y"),a=k(t,c,"y",n),s=!!t.yperiodalignment,u="y"):(i=c.makeCalcdata(t,"y",y),n=f.makeCalcdata(t,"x"),a=k(t,f,"x",n),s=!!t.xperiodalignment,u="x"),r=a.vals;for(var d=Math.min(r.length,i.length),m=new Array(d),g=0;g<d;g++)m[g]={p:r[g],s:i[g]},s&&(m[g].orig_p=n[g],m[g][u+"End"]=a.ends[g],m[g][u+"Start"]=a.starts[g]),t.ids&&(m[g].id=String(t.ids[g]));return o(t,"marker")&&T(l,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),o(t,"marker.line")&&T(l,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),_(m,t),p(m,t),m}},78048:function(ne){"use strict";ne.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},96376:function(ne,F,e){"use strict";var M=e(38248),k=e(3400).isArrayOrTypedArray,o=e(39032).BADNUM,T=e(24040),_=e(54460),p=e(71888).getAxisGroup,l=e(72592);function t(d,m,g,x,v){if(x.length){var b,h,S,w;switch(function(E,P){var I,O;for(I=0;I<P.length;I++){var z,U=P[I],R=U[0].trace,j="funnel"===R.type?R._base:R.base,Y="h"===R.orientation?R.xcalendar:R.ycalendar,B="category"===E.type||"multicategory"===E.type?function(){return null}:E.d2c;if(k(j)){for(O=0;O<Math.min(j.length,U.length);O++)z=B(j[O],0,Y),M(z)?(U[O].b=+z,U[O].hasB=1):U[O].b=0;for(;O<U.length;O++)U[O].b=0}else{z=B(j,0,Y);var V=M(z);for(z=V?z:0,O=0;O<U.length;O++)U[O].b=z,V&&(U[O].hasB=1)}}}(g,x),v.mode){case"overlay":i(m,g,x,v);break;case"group":for(b=[],h=[],S=0;S<x.length;S++)void 0===(w=x[S])[0].trace.offset?h.push(w):b.push(w);h.length&&(E=d,I=g,U=new l(h,{posAxis:P=m,sepNegVal:!1,overlapNoMerge:!(z=v).norm}),function(R,j,Y,B){for(var V=R._fullLayout,te=Y.minDiff,ee=Y.traces,$=ee.length,J=Y.positions.length!==Y.distinctPositions.length,X=te*(1-B.gap),ae=p(V,j._id)+ee[0][0].trace.orientation,ce=V._alignmentOpts[ae]||{},le=0;le<$;le++){var pe,we,Te=ee[le],ye=Te[0].trace,xe=Object.keys((ce[ye.alignmentgroup]||{}).offsetGroups||{}).length,Ce=(pe=xe?X/xe:J?X/$:X)*(1-(B.groupgap||0));we=xe?((2*ye._offsetIndex+1-xe)*pe-Ce)/2:J?((2*le+1-$)*pe-Ce)/2:-Ce/2;var Oe=Te[0].t;Oe.barwidth=Ce,Oe.poffset=we,Oe.bargroupwidth=X,Oe.bardelta=te}Y.binWidth=ee[0][0].t.barwidth/100,n(Y),a(j,Y),s(j,Y,J)}(E,P,U,z),function(R,j){for(var Y=R.traces,B=0;B<Y.length;B++){var V=Y[B];if(void 0===V[0].trace.base)for(var q=new l([V],{posAxis:j,sepNegVal:!0,overlapNoMerge:!0}),ie=0;ie<V.length;ie++){var te=V[ie];if(te.p!==o){var ee=q.put(te.p,te.b+te.s);ee&&(te.b=ee)}}}}(U,P),z.norm?(f(U),c(I,U,z)):u(I,U)),b.length&&i(m,g,b,v);break;case"stack":case"relative":for(b=[],h=[],S=0;S<x.length;S++)void 0===(w=x[S])[0].trace.base?h.push(w):b.push(w);(function(E){if(!(E.length<2)){var P,I,O,z,U,R;for(P=0;P<E.length&&void 0===(z=(I=E[P][0].trace).marker?I.marker.cornerradius:void 0);P++);if(void 0!==z)for(U=M(z)?+z:+z.slice(0,-1),R=M(z)?"px":"%",P=0;P<E.length;P++)(O=E[P][0].t).cornerradiusvalue=U,O.cornerradiusform=R}})(h),h.length&&function(E,P,I,O,z){var U=new l(O,{posAxis:P,sepNegVal:"relative"===z.mode,overlapNoMerge:!(z.norm||"stack"===z.mode||"relative"===z.mode)});r(P,U,z),function(V,q,ie){var te,ee,$,J,X,ae,ce=y(V),le=q.traces;for(J=0;J<le.length;J++)if("funnel"===(ee=(te=le[J])[0].trace).type)for(X=0;X<te.length;X++)(ae=te[X]).s!==o&&q.put(ae.p,-.5*ae.s);for(J=0;J<le.length;J++){$="funnel"===(ee=(te=le[J])[0].trace).type;var pe=[];for(X=0;X<te.length;X++)if((ae=te[X]).s!==o){var we,Te=q.put(ae.p,we=$?ae.s:ae.s+ae.b),ye=Te+we;ae.b=Te,ae[ce]=ye,ie.norm||(pe.push(ye),ae.hasB&&pe.push(Te))}ie.norm||(ee._extremes[V._id]=_.findExtremes(V,pe,{tozero:!0,padded:!0}))}}(I,U,z);for(var R=0;R<O.length;R++)for(var j=O[R],Y=0;Y<j.length;Y++){var B=j[Y];B.s!==o&&B.b+B.s===U.get(B.p,B.s)&&(B._outmost=!0)}z.norm&&c(I,U,z)}(0,m,g,h,v),b.length&&i(m,g,b,v)}(function(E){var P,I,O,z,U,R,j;for(P=0;P<E.length;P++)O=(I=E[P])[0].trace,void 0===(z=I[0].t).cornerradiusvalue&&void 0!==(U=O.marker?O.marker.cornerradius:void 0)&&(R=M(U)?+U:+U.slice(0,-1),j=M(U)?"px":"%",z.cornerradiusvalue=R,z.cornerradiusform=j)})(x),function(E,P){var I,O,z,U=y(P),R={},j=1/0,Y=-1/0;for(I=0;I<E.length;I++)for(z=E[I],O=0;O<z.length;O++){var B=z[O].p;M(B)&&(j=Math.min(j,B),Y=Math.max(Y,B))}var V=1e4/(Y-j),q=R.round=function(ye){return String(Math.round(V*(ye-j)))},ie={},te={},ee=E.some(function(ye){var ve=ye[0].trace;return"marker"in ve&&ve.marker.cornerradius});for(I=0;I<E.length;I++){(z=E[I])[0].t.extents=R;var $=z[0].t.poffset,J=k($);for(O=0;O<z.length;O++){var X=z[O],ae=X[U]-X.w/2;if(M(ae)){var ce=X[U]+X.w/2,le=q(X.p);R[le]=R[le]?[Math.min(ae,R[le][0]),Math.max(ce,R[le][1])]:[ae,ce]}if(X.p0=X.p+(J?$[O]:$),X.p1=X.p0+X.w,X.s0=X.b,X.s1=X.s0+X.s,ee){var pe=Math.min(X.s0,X.s1)||0,we=Math.max(X.s0,X.s1)||0,Te=X[U];ie[Te]=Te in ie?Math.min(ie[Te],pe):pe,te[Te]=Te in te?Math.max(te[Te],we):we}}}ee&&function(ye,ve,xe,Ce){for(var Oe=y(Ce),be=0;be<ye.length;be++)for(var ue=ye[be],se=0;se<ue.length;se++){var ge=ue[se],Ie=ge[Oe];ge._sMin=ve[Ie],ge._sMax=xe[Ie]}}(E,ie,te,P)}(x,m)}var E,P,I,z,U}function i(d,m,g,x){for(var v=0;v<g.length;v++){var h=new l([g[v]],{posAxis:d,sepNegVal:!1,overlapNoMerge:!x.norm});r(d,h,x),x.norm?(f(h),c(m,h,x)):u(m,h)}}function r(d,m,g){for(var x=m.minDiff,v=m.traces,b=x*(1-g.gap),h=b*(1-(g.groupgap||0)),S=-h/2,w=0;w<v.length;w++){var E=v[w][0].t;E.barwidth=h,E.poffset=S,E.bargroupwidth=b,E.bardelta=x}m.binWidth=v[0][0].t.barwidth/100,n(m),a(d,m),s(d,m)}function n(d){var m,g,x=d.traces;for(m=0;m<x.length;m++){var v,b=x[m],h=b[0],S=h.trace,w=h.t,E=S._offset||S.offset,P=w.poffset;if(k(E)){for(v=Array.prototype.slice.call(E,0,b.length),g=0;g<v.length;g++)M(v[g])||(v[g]=P);for(g=v.length;g<b.length;g++)v.push(P);w.poffset=v}else void 0!==E&&(w.poffset=E);var I=S._width||S.width,O=w.barwidth;if(k(I)){var z=Array.prototype.slice.call(I,0,b.length);for(g=0;g<z.length;g++)M(z[g])||(z[g]=O);for(g=z.length;g<b.length;g++)z.push(O);if(w.barwidth=z,void 0===E){for(v=[],g=0;g<b.length;g++)v.push(P+(O-z[g])/2);w.poffset=v}}else void 0!==I&&(w.barwidth=I,void 0===E&&(w.poffset=P+(O-I)/2))}}function a(d,m){for(var g=m.traces,x=y(d),v=0;v<g.length;v++)for(var b=g[v],h=b[0].t,S=h.poffset,w=k(S),E=h.barwidth,P=k(E),I=0;I<b.length;I++){var O=b[I],z=O.w=P?E[I]:E;void 0===O.p&&(O.p=O[x],O["orig_"+x]=O[x]),O[x]=O.p+((w?S[I]:S)+z/2)}}function s(d,m,g){var x=m.traces,v=m.minDiff/2;_.minDtick(d,m.minDiff,m.distinctPositions[0],g);for(var b=0;b<x.length;b++){var h,S,w,E,P=x[b],I=P[0],O=I.trace,z=[];for(E=0;E<P.length;E++)S=(h=P[E]).p-v,z.push(S,w=h.p+v);if(O.width||O.offset){var U=I.t,R=U.poffset,j=U.barwidth,Y=k(R),B=k(j);for(E=0;E<P.length;E++)w=(S=(h=P[E]).p+(Y?R[E]:R))+(B?j[E]:j),z.push(S,w)}O._extremes[d._id]=_.findExtremes(d,z,{padded:!1})}}function u(d,m){for(var g=m.traces,x=y(d),v=0;v<g.length;v++){for(var b=g[v],h=b[0].trace,S="scatter"===h.type,w="v"===h.orientation,E=[],P=!1,I=0;I<b.length;I++){var O=b[I],z=S?0:O.b,U=S?w?O.y:O.x:z+O.s;O[x]=U,E.push(U),O.hasB&&E.push(z),O.hasB&&O.b||(P=!0)}h._extremes[d._id]=_.findExtremes(d,E,{tozero:P,padded:!0})}}function f(d){for(var m=d.traces,g=0;g<m.length;g++)for(var x=m[g],v=0;v<x.length;v++){var b=x[v];b.s!==o&&d.put(b.p,b.b+b.s)}}function c(d,m,g){var x=m.traces,v=y(d),b="fraction"===g.norm?1:100,h=b/1e9,S=d.l2c(d.c2l(0)),w="stack"===g.mode?b:S;function E(ie){return M(d.c2l(ie))&&(ie<S-h||ie>w+h||!M(S))}for(var P=0;P<x.length;P++){for(var I=x[P],O=I[0].trace,z=[],U=!1,R=!1,j=0;j<I.length;j++){var Y=I[j];if(Y.s!==o){var B=Math.abs(b/m.get(Y.p,Y.s));Y.b*=B,Y.s*=B;var V=Y.b,q=V+Y.s;Y[v]=q,z.push(q),R=R||E(q),Y.hasB&&(z.push(V),R=R||E(V)),Y.hasB&&Y.b||(U=!0)}}O._extremes[d._id]=_.findExtremes(d,z,{tozero:U,padded:R})}}function y(d){return d._id.charAt(0)}ne.exports={crossTraceCalc:function(d,m){for(var g=m.xaxis,x=m.yaxis,v=d._fullLayout,b=d._fullData,h=d.calcdata,S=[],w=[],E=0;E<b.length;E++){var P=b[E];if(!0===P.visible&&T.traceIs(P,"bar")&&P.xaxis===g._id&&P.yaxis===x._id&&("h"===P.orientation?S.push(h[E]):w.push(h[E]),P._computePh))for(var I=d.calcdata[E],O=0;O<I.length;O++)"function"==typeof I[O].ph0&&(I[O].ph0=I[O].ph0()),"function"==typeof I[O].ph1&&(I[O].ph1=I[O].ph1())}var z={xCat:"category"===g.type||"multicategory"===g.type,yCat:"category"===x.type||"multicategory"===x.type,mode:v.barmode,norm:v.barnorm,gap:v.bargap,groupgap:v.bargroupgap};t(d,g,x,w,z),t(d,x,g,S,z)},setGroupPositions:t}},31508:function(ne,F,e){"use strict";var M=e(38248),k=e(3400),o=e(76308),T=e(24040),_=e(43980),p=e(31147),l=e(55592),t=e(20011),i=e(20832),r=k.coerceFont;function n(s){if(M(s)){if((s=+s)>=0)return s}else if("string"==typeof s&&"%"===(s=s.trim()).slice(-1)&&M(s.slice(0,-1))&&(s=+s.slice(0,-1))>=0)return s+"%"}function a(s,u,f,c,y,d){var m=!1!==(d=d||{}).moduleHasSelected,g=!1!==d.moduleHasUnselected,x=!1!==d.moduleHasConstrain,v=!1!==d.moduleHasCliponaxis,b=!1!==d.moduleHasTextangle,h=!1!==d.moduleHasInsideanchor,S=!!d.hasPathbar,w=Array.isArray(y)||"auto"===y,E=w||"inside"===y,P=w||"outside"===y;if(E||P){var I=r(c,"textfont",f.font),O=k.extendFlat({},I),z=!(s.textfont&&s.textfont.color);if(z&&delete O.color,r(c,"insidetextfont",O),S){var U=k.extendFlat({},I);z&&delete U.color,r(c,"pathbar.textfont",U)}P&&r(c,"outsidetextfont",I),m&&c("selected.textfont.color"),g&&c("unselected.textfont.color"),x&&c("constraintext"),v&&c("cliponaxis"),b&&c("textangle"),c("texttemplate")}E&&h&&c("insidetextanchor")}ne.exports={supplyDefaults:function(s,u,f,c){function y(x,v){return k.coerce(s,u,i,x,v)}if(_(s,u,c,y)){p(s,u,c,y),y("xhoverformat"),y("yhoverformat"),y("zorder"),y("orientation",u.x&&!u.y?"h":"v"),y("base"),y("offset"),y("width"),y("text"),y("hovertext"),y("hovertemplate");var d=y("textposition");a(s,0,c,y,d,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),l(s,u,y,f,c);var m=(u.marker.line||{}).color,g=T.getComponentMethod("errorbars","supplyDefaults");g(s,u,m||o.defaultLine,{axis:"y"}),g(s,u,m||o.defaultLine,{axis:"x",inherit:"y"}),k.coerceSelectionMarkerOpacity(u,y)}else u.visible=!1},crossTraceDefaults:function(s,u){var f,c;function y(g,x){return k.coerce(c._input,c,i,g,x)}for(var d=0;d<s.length;d++)if("bar"===(c=s[d]).type){f=c._input;var m=y("marker.cornerradius",u.barcornerradius);c.marker&&(c.marker.cornerradius=n(m)),"group"===u.barmode&&t(f,c,u,y)}},handleText:a,validateCornerradius:n}},52160:function(ne){"use strict";ne.exports=function(F,e,M){return F.x="xVal"in e?e.xVal:e.x,F.y="yVal"in e?e.yVal:e.y,e.xa&&(F.xaxis=e.xa),e.ya&&(F.yaxis=e.ya),"h"===M.orientation?(F.label=F.y,F.value=F.x):(F.label=F.x,F.value=F.y),F}},60444:function(ne,F,e){"use strict";var M=e(38248),k=e(49760),o=e(3400).isArrayOrTypedArray;F.coerceString=function(T,_,p){if("string"==typeof _){if(_||!T.noBlank)return _}else if(("number"==typeof _||!0===_)&&!T.strict)return String(_);return void 0!==p?p:T.dflt},F.coerceNumber=function(T,_,p){if(M(_)){_=+_;var l=T.min,t=T.max;if(!(void 0!==l&&_<l||void 0!==t&&_>t))return _}return void 0!==p?p:T.dflt},F.coerceColor=function(T,_,p){return k(_).isValid()?_:void 0!==p?p:T.dflt},F.coerceEnumerated=function(T,_,p){return T.coerceNumber&&(_=+_),-1!==T.values.indexOf(_)?_:void 0!==p?p:T.dflt},F.getValue=function(T,_){var p;return o(T)?_<T.length&&(p=T[_]):p=T,p},F.getLineWidth=function(T,_){return 0<_.mlw?_.mlw:o(T.marker.line.width)?0:T.marker.line.width}},63400:function(ne,F,e){"use strict";var M=e(93024),k=e(24040),o=e(76308),T=e(3400).fillText,_=e(60444).getLineWidth,p=e(54460).hoverLabelText,l=e(39032).BADNUM;function t(r,n,a,s,u){var f,c,y,d,m,g,x,v=r.cd,b=v[0].trace,h=v[0].t,S="closest"===s,w="waterfall"===b.type,E=r.maxHoverDistance,P=r.maxSpikeDistance;"h"===b.orientation?(f=a,c=n,y="y",d="x",m=te,g=q):(f=n,c=a,y="x",d="y",g=te,m=q);var I=b[y+"period"],O=S||I;function z(pe){return R(pe,-1)}function U(pe){return R(pe,1)}function R(pe,we){return pe[y]+we*pe.w/2}function j(pe){return pe[y+"End"]-pe[y+"Start"]}var Y=S?z:I?function(pe){return pe.p-j(pe)/2}:function(pe){return Math.min(z(pe),pe.p-h.bardelta/2)},B=S?U:I?function(pe){return pe.p+j(pe)/2}:function(pe){return Math.max(U(pe),pe.p+h.bardelta/2)};function V(pe,we,Te){return u.finiteRange&&(Te=0),M.inbox(pe-f,we-f,Te+Math.min(1,Math.abs(we-pe)/x)-1)}function q(pe){return V(Y(pe),B(pe),E)}function ie(pe){var we=pe[d];if(w){var Te=Math.abs(pe.rawS)||0;c>0?we+=Te:c<0&&(we-=Te)}return we}function te(pe){var we=c,Te=pe.b,ye=ie(pe);return M.inbox(Te-we,ye-we,E+(ye-we)/(ye-Te)-1)}var ee=r[y+"a"],$=r[d+"a"];x=Math.abs(ee.r2c(ee.range[1])-ee.r2c(ee.range[0]));var pe,we,Te,ye,J=M.getDistanceFunction(s,m,g,function(pe){return(m(pe)+g(pe))/2});if(M.getClosest(v,J,r),!1!==r.index&&v[r.index].p!==l){O||(Y=function(pe){return Math.min(z(pe),pe.p-h.bargroupwidth/2)},B=function(pe){return Math.max(U(pe),pe.p+h.bargroupwidth/2)});var X=v[r.index],ae=b.base?X.b+X.s:X.s;r[d+"0"]=r[d+"1"]=$.c2p(X[d],!0),r[d+"LabelVal"]=ae;var ce=h.extents[h.extents.round(X.p)];return r[y+"0"]=ee.c2p(S?Y(X):ce[0],!0),r[y+"1"]=ee.c2p(S?B(X):ce[1],!0),r[y+"LabelVal"]=void 0!==X.orig_p?X.orig_p:X.p,r.labelLabel=p(ee,r[y+"LabelVal"],b[y+"hoverformat"]),r.valueLabel=p($,r[d+"LabelVal"],b[d+"hoverformat"]),r.baseLabel=p($,X.b,b[d+"hoverformat"]),r.spikeDistance=(we=c,Te=(pe=X).b,ye=ie(pe),(M.inbox(Te-we,ye-we,P+(ye-we)/(ye-Te)-1)+function(pe){return V(z(pe),U(pe),P)}(X))/2),r[y+"Spike"]=ee.c2p(X.p,!0),T(X,b,r),r.hovertemplate=b.hovertemplate,r}}function i(r,n){var a=n.mcc||r.marker.color,s=n.mlcc||r.marker.line.color,u=_(r,n);return o.opacity(a)?a:o.opacity(s)&&u?s:void 0}ne.exports={hoverPoints:function(r,n,a,s,u){var f=t(r,n,a,s,u);if(f){var c=f.cd,y=c[0].trace,d=c[f.index];return f.color=i(y,d),k.getComponentMethod("errorbars","hoverInfo")(d,y,f),[f]}},hoverOnBars:t,getTraceColor:i}},51132:function(ne,F,e){"use strict";ne.exports={attributes:e(20832),layoutAttributes:e(39324),supplyDefaults:e(31508).supplyDefaults,crossTraceDefaults:e(31508).crossTraceDefaults,supplyLayoutDefaults:e(37156),calc:e(71820),crossTraceCalc:e(96376).crossTraceCalc,colorbar:e(5528),arraysToCalcdata:e(84664),plot:e(98184).plot,style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,hoverPoints:e(63400).hoverPoints,eventData:e(52160),selectPoints:e(45784),moduleType:"trace",name:"bar",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},39324:function(ne){"use strict";ne.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},barcornerradius:{valType:"any",editType:"calc"}}},37156:function(ne,F,e){"use strict";var M=e(24040),k=e(54460),o=e(3400),T=e(39324),_=e(31508).validateCornerradius;ne.exports=function(p,l,t){function i(m,g){return o.coerce(p,l,T,m,g)}for(var r=!1,n=!1,a=!1,s={},u=i("barmode"),f=0;f<t.length;f++){var c=t[f];if(M.traceIs(c,"bar")&&c.visible){if(r=!0,"group"===u){var y=c.xaxis+c.yaxis;s[y]&&(a=!0),s[y]=!0}c.visible&&"histogram"===c.type&&"category"!==k.getFromId({_fullLayout:l},c["v"===c.orientation?"xaxis":"yaxis"]).type&&(n=!0)}}if(r){"overlay"!==u&&i("barnorm"),i("bargap",n&&!a?0:.2),i("bargroupgap");var d=i("barcornerradius");l.barcornerradius=_(d)}else delete l.barmode}},98184:function(ne,F,e){"use strict";var M=e(33428),k=e(38248),o=e(3400),T=e(72736),_=e(76308),p=e(43616),l=e(24040),t=e(54460).tickText,i=e(82744),r=i.recordMinTextSize,n=i.clearMinTextSize,a=e(60100),s=e(60444),u=e(78048),f=e(20832),c=f.text,y=f.textposition,d=e(10624).appendArrayPointValue,m=u.TEXTPAD;function g(O){return O.id}function v(O){return(O>0)-(O<0)}function b(O,z){return O<z?1:-1}function h(O,z,U,R){var j;return!z.uniformtext.mode&&S(U)?(R&&(j=R()),O.transition().duration(U.duration).ease(U.easing).each("end",function(){j&&j()}).each("interrupt",function(){j&&j()})):O}function S(O){return O&&O.duration>0}function w(O,z,U,R,j){return!(O<0||z<0)&&(U<=O&&R<=z||U<=z&&R<=O||(j?O>=U*(z/R):z>=R*(O/U)))}function E(O){return"auto"===O?0:O}function P(O,z){var U=Math.PI/180*z,R=Math.abs(Math.sin(U)),j=Math.abs(Math.cos(U));return{x:O.width*j+O.height*R,y:O.width*R+O.height*j}}function I(O,z,U,R,j,Y){var B=!!Y.isHorizontal,V=!!Y.constrained,q=Y.angle||0,ie=Y.anchor,te="end"===ie,ee="start"===ie,$=((Y.leftToRight||0)+1)/2,J=1-$,X=Y.hasB,ae=Y.r,ce=Y.overhead,le=j.width,pe=j.height,we=Math.abs(z-O),Te=Math.abs(R-U),ye=we>2*m&&Te>2*m?m:0;we-=2*ye,Te-=2*ye;var ve=E(q);"auto"!==q||le<=we&&pe<=Te||!(le>we||pe>Te)||(le>Te||pe>we)&&le<pe==we<Te||(ve+=90);var xe,Ce,Me,Le,Ne,Re,He,Ze,nt,ft,ht,Tt,At,_t,ot,it,Pt,Oe=P(j,ve);if(ae&&ae-ce>m){var be=(Me=U,Le=R,Ne=Oe,Re=ae,He=ce,Ze=B,nt=X,_t=Math.max(0,Math.abs(z-O)-2*m),ot=Math.max(0,Math.abs(Le-Me)-2*m),it=Re-m,Pt=He?it-Math.sqrt(it*it-(it-He)*(it-He)):it,Ne.y/Ne.x>=ot/(_t-(nt?2*it:Ze?it-He:2*Pt))?At=ot/Ne.y:Ne.y/Ne.x<=(ot-(nt?2*it:Ze?2*Pt:it-He))/_t?At=_t/Ne.x:!nt&&Ze?(ft=Ne.x*Ne.x+Ne.y*Ne.y/4,Tt=(_t-it)*(_t-it)+(ot/2-it)*(ot/2-it)-it*it,At=(-(ht=-2*Ne.x*(_t-it)-Ne.y*(ot/2-it))+Math.sqrt(ht*ht-4*ft*Tt))/(2*ft)):nt?(ft=(Ne.x*Ne.x+Ne.y*Ne.y)/4,Tt=(_t/2-it)*(_t/2-it)+(ot/2-it)*(ot/2-it)-it*it,At=(-(ht=-Ne.x*(_t/2-it)-Ne.y*(ot/2-it))+Math.sqrt(ht*ht-4*ft*Tt))/(2*ft)):(ft=Ne.x*Ne.x/4+Ne.y*Ne.y,Tt=(_t/2-it)*(_t/2-it)+(ot-it)*(ot-it)-it*it,At=(-(ht=-Ne.x*(_t/2-it)-2*Ne.y*(ot-it))+Math.sqrt(ht*ht-4*ft*Tt))/(2*ft)),{scale:At=Math.min(1,At),pad:Ze?Math.max(0,it-Math.sqrt(Math.max(0,it*it-(it-(ot-Ne.y*At)/2)*(it-(ot-Ne.y*At)/2)))-He):Math.max(0,it-Math.sqrt(Math.max(0,it*it-(it-(_t-Ne.x*At)/2)*(it-(_t-Ne.x*At)/2)))-He)});xe=be.scale,Ce=be.pad}else xe=1,V&&(xe=Math.min(1,we/Oe.x,Te/Oe.y)),Ce=0;var ue=j.left*J+j.right*$,se=(j.top+j.bottom)/2,ge=(O+m)*J+(z-m)*$,Ie=(U+R)/2,ke=0,Se=0;if(ee||te){var Pe=(B?Oe.x:Oe.y)/2;ae&&(te||X)&&(ye+=Ce);var Fe=B?b(O,z):b(U,R);B?ee?(ge=O+Fe*ye,ke=-Fe*Pe):(ge=z-Fe*ye,ke=Fe*Pe):ee?(Ie=U+Fe*ye,Se=-Fe*Pe):(Ie=R-Fe*ye,Se=Fe*Pe)}return{textX:ue,textY:se,targetX:ge,targetY:Ie,anchorX:ke,anchorY:Se,scale:xe,rotate:ve}}ne.exports={plot:function(O,z,U,R,j,Y){var B=z.xaxis,V=z.yaxis,q=O._fullLayout,ie=O._context.staticPlot;j||(j={mode:q.barmode,norm:q.barmode,gap:q.bargap,groupgap:q.bargroupgap},n("bar",q));var te=o.makeTraceGroups(R,U,"trace bars").each(function(ee){var $=M.select(this),J=ee[0].trace,X=ee[0].t,le="histogram"===J.type,pe="bar"===J.type,we=pe||"funnel"===J.type,Te=0;"waterfall"===J.type&&J.connector.visible&&"between"===J.connector.mode&&(Te=J.connector.line.width/2);var ye="h"===J.orientation,ve=S(j),xe=o.ensureSingle($,"g","points"),Ce=function x(O){if(O.ids)return g}(J),Oe=xe.selectAll("g.point").data(o.identity,Ce);Oe.enter().append("g").classed("point",!0),Oe.exit().remove(),Oe.each(function(ue,se){var ge,Ie,ct,Ve,Ge,ut,Qe,yt,wt,kt,ke=M.select(this),Se=(Ve=B,Ge=V,yt=[],kt=(ut=ye)?Ge:Ve,(Qe=[])[0]=(wt=ut?Ve:Ge).c2p((ct=ue).s0,!0),yt[0]=kt.c2p(ct.p0,!0),Qe[1]=wt.c2p(ct.s1,!0),yt[1]=kt.c2p(ct.p1,!0),ut?[Qe,yt]:[yt,Qe]),Pe=Se[0][0],Fe=Se[0][1],Be=Se[1][0],me=Se[1][1],Me=0==(ye?Fe-Pe:me-Be);if(Me&&we&&s.getLineWidth(J,ue)&&(Me=!1),Me||(Me=!(k(Pe)&&k(Fe)&&k(Be)&&k(me))),ue.isBlank=Me,Me&&(ye?Fe=Pe:me=Be),Te&&!Me&&(ye?(Pe-=b(Pe,Fe)*Te,Fe+=b(Pe,Fe)*Te):(Be-=b(Be,me)*Te,me+=b(Be,me)*Te)),"waterfall"===J.type){if(!Me){var Le=J[ue.dir].marker;ge=Le.line.width,Ie=Le.color}}else ge=s.getLineWidth(J,ue),Ie=ue.mc||J.marker.color;function Ne(ct){var Ve=M.round(ge/2%1,2);return 0===j.gap&&0===j.groupgap?M.round(Math.round(ct)-Ve,2):ct}var Re=_.opacity(Ie)<1||ge>.01?Ne:function(ct,Ve,Ge){return Ge&&ct===Ve?ct:Math.abs(ct-Ve)>=2?Ne(ct):ct>Ve?Math.ceil(ct):Math.floor(ct)};O._context.staticPlot||(Pe=Re(Pe,Fe,ye),Fe=Re(Fe,Pe,ye),Be=Re(Be,me,!ye),me=Re(me,Be,!ye));var He,Ze=ye?B.c2p:V.c2p;He=ue.s0>0?ue._sMax:ue.s0<0?ue._sMin:ue.s1>0?ue._sMax:ue._sMin;var nt,ft,ht=pe||le?function(ct,Ve){if(!ct)return 0;var Ge,ut=Math.abs(ye?me-Be:Fe-Pe),Qe=Math.abs(ye?Fe-Pe:me-Be),yt=Re(Math.abs(Ze(He,!0)-Ze(0,!0))),wt=ue.hasB?Math.min(ut/2,Qe/2):Math.min(ut/2,yt);return Ge="%"===Ve?ut*(Math.min(50,ct)/100):ct,Re(Math.max(Math.min(Ge,wt),0))}(X.cornerradiusvalue,X.cornerradiusform):0,Tt="M"+Pe+","+Be+"V"+me+"H"+Fe+"V"+Be+"Z",At=0;if(ht&&ue.s){var _t=0===v(ue.s0)||v(ue.s)===v(ue.s0)?ue.s1:ue.s0;if((At=Re(ue.hasB?0:Math.abs(Ze(He,!0)-Ze(_t,!0))))<ht){var ot=b(Pe,Fe),it=b(Be,me),Pt=ot===-it?1:0;if(ye)if(ue.hasB)nt="M"+(Pe+ht*ot)+","+Be+"A "+ht+","+ht+" 0 0 "+Pt+" "+Pe+","+(Be+ht*it)+"V"+(me-ht*it)+"A "+ht+","+ht+" 0 0 "+Pt+" "+(Pe+ht*ot)+","+me+"H"+(Fe-ht*ot)+"A "+ht+","+ht+" 0 0 "+Pt+" "+Fe+","+(me-ht*it)+"V"+(Be+ht*it)+"A "+ht+","+ht+" 0 0 "+Pt+" "+(Fe-ht*ot)+","+Be+"Z";else{var jt=(ft=Math.abs(Fe-Pe)+At)<ht?ht-Math.sqrt(ft*(2*ht-ft)):0,Ut=At>0?Math.sqrt(At*(2*ht-At)):0,Rt=ot>0?Math.max:Math.min;nt="M"+Pe+","+Be+"V"+(me-jt*it)+"H"+Rt(Fe-(ht-At)*ot,Pe)+"A "+ht+","+ht+" 0 0 "+Pt+" "+Fe+","+(me-ht*it-Ut)+"V"+(Be+ht*it+Ut)+"A "+ht+","+ht+" 0 0 "+Pt+" "+Rt(Fe-(ht-At)*ot,Pe)+","+(Be+jt*it)+"Z"}else if(ue.hasB)nt="M"+(Pe+ht*ot)+","+Be+"A "+ht+","+ht+" 0 0 "+Pt+" "+Pe+","+(Be+ht*it)+"V"+(me-ht*it)+"A "+ht+","+ht+" 0 0 "+Pt+" "+(Pe+ht*ot)+","+me+"H"+(Fe-ht*ot)+"A "+ht+","+ht+" 0 0 "+Pt+" "+Fe+","+(me-ht*it)+"V"+(Be+ht*it)+"A "+ht+","+ht+" 0 0 "+Pt+" "+(Fe-ht*ot)+","+Be+"Z";else{var Je=(ft=Math.abs(me-Be)+At)<ht?ht-Math.sqrt(ft*(2*ht-ft)):0,et=At>0?Math.sqrt(At*(2*ht-At)):0,qe=it>0?Math.max:Math.min;nt="M"+(Pe+Je*ot)+","+Be+"V"+qe(me-(ht-At)*it,Be)+"A "+ht+","+ht+" 0 0 "+Pt+" "+(Pe+ht*ot-et)+","+me+"H"+(Fe-ht*ot+et)+"A "+ht+","+ht+" 0 0 "+Pt+" "+(Fe-Je*ot)+","+qe(me-(ht-At)*it,Be)+"V"+Be+"Z"}}else nt=Tt}else nt=Tt;var $e=h(o.ensureSingle(ke,"path"),q,j,Y);if($e.style("vector-effect",ie?"none":"non-scaling-stroke").attr("d",isNaN((Fe-Pe)*(me-Be))||Me&&O._context.staticPlot?"M0,0Z":nt).call(p.setClipUrl,z.layerClipId,O),!q.uniformtext.mode&&ve){var pt=p.makePointStyleFns(J);p.singlePointStyle(ue,$e,J,pt,O)}(function(ct,Ve,Ge,ut,Qe,yt,wt,kt,vt,Lt,St,Ot,Nt){var Bt,Vt=Ve.xaxis,nn=Ve.yaxis,gn=ct._fullLayout;function Jt(Cr,sn,Sn){return o.ensureSingle(Cr,"text").text(sn).attr({class:"bartext bartext-"+Bt,"text-anchor":"middle","data-notex":1}).call(p.font,Sn).call(T.convertToTspans,ct)}var sn,Sn,zt,Yt,un,_n,an=ut[0].trace,Xt="h"===an.orientation,Gn=(Sn=Qe,zt=Vt,Yt=nn,un=(_n=(sn=ut)[0].trace).texttemplate?function(Tn,Cn,vn,rn,tn){var fn=Cn[0].trace,yn=o.castOption(fn,vn,"texttemplate");if(!yn)return"";var zn,Vn,Xn,Qn,pr="histogram"===fn.type,or="waterfall"===fn.type,fr="funnel"===fn.type,vr="h"===fn.orientation;function cr(Qr){return t(Qn,Qn.c2l(Qr),!0).text}vr?(zn="y",Vn=tn,Xn="x",Qn=rn):(zn="x",Vn=rn,Xn="y",Qn=tn);var Fr=Cn[vn],Lr={};Lr.label=Fr.p,Lr.labelLabel=Lr[zn+"Label"]=t(Vn,Vn.c2l(Fr.p),!0).text;var xr=o.castOption(fn,Fr.i,"text");(0===xr||xr)&&(Lr.text=xr),Lr.value=Fr.s,Lr.valueLabel=Lr[Xn+"Label"]=cr(Fr.s);var Pr={};d(Pr,fn,Fr.i),(pr||void 0===Pr.x)&&(Pr.x=vr?Lr.value:Lr.label),(pr||void 0===Pr.y)&&(Pr.y=vr?Lr.label:Lr.value),(pr||void 0===Pr.xLabel)&&(Pr.xLabel=vr?Lr.valueLabel:Lr.labelLabel),(pr||void 0===Pr.yLabel)&&(Pr.yLabel=vr?Lr.labelLabel:Lr.valueLabel),or&&(Lr.delta=+Fr.rawS||Fr.s,Lr.deltaLabel=cr(Lr.delta),Lr.final=Fr.v,Lr.finalLabel=cr(Lr.final),Lr.initial=Lr.final-Lr.delta,Lr.initialLabel=cr(Lr.initial)),fr&&(Lr.value=Fr.s,Lr.valueLabel=cr(Lr.value),Lr.percentInitial=Fr.begR,Lr.percentInitialLabel=o.formatPercent(Fr.begR),Lr.percentPrevious=Fr.difR,Lr.percentPreviousLabel=o.formatPercent(Fr.difR),Lr.percentTotal=Fr.sumR,Lr.percenTotalLabel=o.formatPercent(Fr.sumR));var qr=o.castOption(fn,Fr.i,"customdata");return qr&&(Lr.customdata=qr),o.texttemplateString(yn,Lr,Tn._d3locale,Pr,Lr,fn._meta||{})}(gn,sn,Sn,zt,Yt):_n.textinfo?function(Tn,Cn,vn,rn){var tn=Tn[0].trace,fn="h"===tn.orientation,yn="waterfall"===tn.type,zn="funnel"===tn.type;function Vn(qr){return t(fn?vn:rn,+qr,!0).text}var Xn,or=Tn[Cn],fr=tn.textinfo.split("+"),vr=[],cr=function(qr){return-1!==fr.indexOf(qr)};if(cr("label")&&vr.push(t(fn?rn:vn,Tn[Cn].p,!0).text),cr("text")&&(0===(Xn=o.castOption(tn,or.i,"text"))||Xn)&&vr.push(Xn),yn){var Ar=+or.rawS||or.s,Fr=or.v,Lr=Fr-Ar;cr("initial")&&vr.push(Vn(Lr)),cr("delta")&&vr.push(Vn(Ar)),cr("final")&&vr.push(Vn(Fr))}if(zn){cr("value")&&vr.push(Vn(or.s));var xr=0;cr("percent initial")&&xr++,cr("percent previous")&&xr++,cr("percent total")&&xr++;var Pr=xr>1;cr("percent initial")&&(Xn=o.formatPercent(or.begR),Pr&&(Xn+=" of initial"),vr.push(Xn)),cr("percent previous")&&(Xn=o.formatPercent(or.difR),Pr&&(Xn+=" of previous"),vr.push(Xn)),cr("percent total")&&(Xn=o.formatPercent(or.sumR),Pr&&(Xn+=" of total"),vr.push(Xn))}return vr.join("<br>")}(sn,Sn,zt,Yt):s.getValue(_n.text,Sn),s.coerceString(c,un));Bt=function(Cr,sn){var Sn=s.getValue(Cr.textposition,sn);return s.coerceEnumerated(y,Sn)}(an,Qe);var An=ut[Qe],cn=!("stack"===Ot.mode||"relative"===Ot.mode)||An._outmost,bn=An.hasB,hn=Lt&&Lt-St>m;if(Gn&&"none"!==Bt&&(!An.isBlank&&yt!==wt&&kt!==vt||"auto"!==Bt&&"inside"!==Bt)){var wn=gn.font,Ln=a.getBarColor(ut[Qe],an),Pn=a.getInsideTextFont(an,Qe,wn,Ln),Nn=a.getOutsideTextFont(an,Qe,wn),jn=an.insidetextanchor||"end",Fn=Ge.datum();Xt?"log"===Vt.type&&Fn.s0<=0&&(yt=Vt.range[0]<Vt.range[1]?0:Vt._length):"log"===nn.type&&Fn.s0<=0&&(kt=nn.range[0]<nn.range[1]?nn._length:0);var Jn,Zn,hr,rr,dr,nr=Math.abs(wt-yt),Sr=Math.abs(vt-kt),ln=nr-2*m,dn=Sr-2*m;if("outside"===Bt&&(cn||An.hasB||(Bt="inside")),"auto"===Bt)if(cn){Bt="inside",Jn=Jt(Ge,Gn,dr=o.ensureUniformFontSize(ct,Pn)),hr=(Zn=p.bBox(Jn.node())).width,rr=Zn.height;var Un,Mn=hr>0&&rr>0;Un=hn?bn?w(ln-2*Lt,dn,hr,rr,Xt)||w(ln,dn-2*Lt,hr,rr,Xt):Xt?w(ln-(Lt-St),dn,hr,rr,Xt)||w(ln,dn-2*(Lt-St),hr,rr,Xt):w(ln,dn-(Lt-St),hr,rr,Xt)||w(ln-2*(Lt-St),dn,hr,rr,Xt):w(ln,dn,hr,rr,Xt),Mn&&Un?Bt="inside":(Bt="outside",Jn.remove(),Jn=null)}else Bt="inside";if(!Jn){var Hn=(Jn=Jt(Ge,Gn,dr=o.ensureUniformFontSize(ct,"outside"===Bt?Nn:Pn))).attr("transform");if(Jn.attr("transform",""),hr=(Zn=p.bBox(Jn.node())).width,rr=Zn.height,Jn.attr("transform",Hn),hr<=0||rr<=0)return void Jn.remove()}var Wn,$n=an.textangle;Wn="outside"===Bt?function(Cr,sn,Sn,zt,Yt,un){var _n,Tn=!!un.isHorizontal,Cn=!!un.constrained,vn=un.angle||0,rn=Yt.width,tn=Yt.height,fn=Math.abs(sn-Cr),yn=Math.abs(zt-Sn);_n=Tn?yn>2*m?m:0:fn>2*m?m:0;var zn=1;Cn&&(zn=Tn?Math.min(1,yn/tn):Math.min(1,fn/rn));var Vn=E(vn),Xn=P(Yt,Vn),Qn=(Tn?Xn.x:Xn.y)/2,pr=(Yt.left+Yt.right)/2,or=(Yt.top+Yt.bottom)/2,fr=(Cr+sn)/2,vr=(Sn+zt)/2,cr=0,Ar=0,Fr=Tn?b(sn,Cr):b(Sn,zt);return Tn?(fr=sn-Fr*_n,cr=Fr*Qn):(vr=zt+Fr*_n,Ar=-Fr*Qn),{textX:pr,textY:or,targetX:fr,targetY:vr,anchorX:cr,anchorY:Ar,scale:zn,rotate:Vn}}(yt,wt,kt,vt,Zn,{isHorizontal:Xt,constrained:"both"===an.constraintext||"outside"===an.constraintext,angle:$n}):I(yt,wt,kt,vt,Zn,{isHorizontal:Xt,constrained:"both"===an.constraintext||"inside"===an.constraintext,angle:$n,anchor:jn,hasB:bn,r:Lt,overhead:St}),Wn.fontSize=dr.size,r("histogram"===an.type?"bar":an.type,Wn,gn),An.transform=Wn;var lr=h(Jn,gn,Ot,Nt);o.setTransormAndDisplay(lr,Wn)}else Ge.select("text").remove()})(O,z,ke,ee,se,Pe,Fe,Be,me,ht,At,j,Y),z.layerClipId&&p.hideOutsideRangePoint(ue,ke.select("text"),B,V,J.xcalendar,J.ycalendar)}),p.setClipUrl($,!1===J.cliponaxis?null:z.layerClipId,O)});l.getComponentMethod("errorbars","plot")(O,te,z,j)},toMoveInsideBar:I}},45784:function(ne){"use strict";function F(e,M,k,o,T){var _=M.c2p(o?e.s0:e.p0,!0),p=M.c2p(o?e.s1:e.p1,!0),l=k.c2p(o?e.p0:e.s0,!0),t=k.c2p(o?e.p1:e.s1,!0);return T?[(_+p)/2,(l+t)/2]:o?[p,(l+t)/2]:[(_+p)/2,t]}ne.exports=function(e,M){var k,o=e.cd,T=e.xaxis,_=e.yaxis,p=o[0].trace,l="funnel"===p.type,t="h"===p.orientation,i=[];if(!1===M)for(k=0;k<o.length;k++)o[k].selected=0;else for(k=0;k<o.length;k++){var r=o[k],n="ct"in r?r.ct:F(r,T,_,t,l);M.contains(n,!1,k,e)?(i.push({pointNumber:k,x:T.c2d(r.x),y:_.c2d(r.y)}),r.selected=1):r.selected=0}return i}},72592:function(ne,F,e){"use strict";ne.exports=k;var M=e(3400).distinctVals;function k(o,T){this.traces=o,this.sepNegVal=T.sepNegVal,this.overlapNoMerge=T.overlapNoMerge;for(var _=1/0,p=T.posAxis._id.charAt(0),l=[],t=0;t<o.length;t++){for(var i=o[t],r=0;r<i.length;r++){var n=i[r],a=n.p;void 0===a&&(a=n[p]),void 0!==a&&l.push(a)}i[0]&&i[0].width1&&(_=Math.min(i[0].width1,_))}this.positions=l;var s=M(l);this.distinctPositions=s.vals,this.minDiff=1===s.vals.length&&_!==1/0?_:Math.min(s.minDiff,_);var u=(T.posAxis||{}).type;"category"!==u&&"multicategory"!==u||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}k.prototype.put=function(o,T){var _=this.getLabel(o,T),p=this.bins[_]||0;return this.bins[_]=p+T,p},k.prototype.get=function(o,T){var _=this.getLabel(o,T);return this.bins[_]||0},k.prototype.getLabel=function(o,T){return(T<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?o:Math.round(o/this.binWidth))}},60100:function(ne,F,e){"use strict";var M=e(33428),k=e(76308),o=e(43616),T=e(3400),_=e(24040),p=e(82744).resizeText,l=e(20832),t=l.textfont,i=l.insidetextfont,r=l.outsidetextfont,n=e(60444);function a(g,x,v){o.pointStyle(g.selectAll("path"),x,v),s(g,x,v)}function s(g,x,v){g.selectAll("text").each(function(b){var h=M.select(this),S=T.ensureUniformFontSize(v,u(h,b,x,v));o.font(h,S)})}function u(g,x,v,b){var h=b._fullLayout.font,S=v.textfont;if(g.classed("bartext-inside")){var w=m(x,v);S=c(v,x.i,h,w)}else g.classed("bartext-outside")&&(S=y(v,x.i,h));return S}function f(g,x,v){return d(t,g.textfont,x,v)}function c(g,x,v,b){var h=f(g,x,v);return(void 0===g._input.textfont||void 0===g._input.textfont.color||Array.isArray(g.textfont.color)&&void 0===g.textfont.color[x])&&(h={color:k.contrast(b),family:h.family,size:h.size,weight:h.weight,style:h.style,variant:h.variant,textcase:h.textcase,lineposition:h.lineposition,shadow:h.shadow}),d(i,g.insidetextfont,x,h)}function y(g,x,v){var b=f(g,x,v);return d(r,g.outsidetextfont,x,b)}function d(g,x,v,b){var h=n.getValue((x=x||{}).family,v),S=n.getValue(x.size,v),w=n.getValue(x.color,v),E=n.getValue(x.weight,v),P=n.getValue(x.style,v),I=n.getValue(x.variant,v),O=n.getValue(x.textcase,v),z=n.getValue(x.lineposition,v),U=n.getValue(x.shadow,v);return{family:n.coerceString(g.family,h,b.family),size:n.coerceNumber(g.size,S,b.size),color:n.coerceColor(g.color,w,b.color),weight:n.coerceString(g.weight,E,b.weight),style:n.coerceString(g.style,P,b.style),variant:n.coerceString(g.variant,I,b.variant),textcase:n.coerceString(g.variant,O,b.textcase),lineposition:n.coerceString(g.variant,z,b.lineposition),shadow:n.coerceString(g.variant,U,b.shadow)}}function m(g,x){return"waterfall"===x.type?x[g.dir].marker.color:g.mcc||g.mc||x.marker.color}ne.exports={style:function(g){var x=M.select(g).selectAll('g[class^="barlayer"]').selectAll("g.trace");p(g,x,"bar");var v=x.size(),b=g._fullLayout;x.style("opacity",function(h){return h[0].trace.opacity}).each(function(h){("stack"===b.barmode&&v>1||0===b.bargap&&0===b.bargroupgap&&!h[0].trace.marker.line.width)&&M.select(this).attr("shape-rendering","crispEdges")}),x.selectAll("g.points").each(function(h){a(M.select(this),h[0].trace,g)}),_.getComponentMethod("errorbars","style")(x)},styleTextPoints:s,styleOnSelect:function(g,x,v){var h,S,w,E,P,I,b=x[0].trace;b.selectedpoints?(S=b,w=g,o.selectedPointStyle((h=v).selectAll("path"),S),E=h.selectAll("text"),P=S,I=w,E.each(function(O){var z,U=M.select(this);if(O.selected){z=T.ensureUniformFontSize(I,u(U,O,P,I));var R=P.selected.textfont&&P.selected.textfont.color;R&&(z.color=R),o.font(U,z)}else o.selectedTextStyle(U,P)})):(a(v,b,g),_.getComponentMethod("errorbars","style")(v))},getInsideTextFont:c,getOutsideTextFont:y,getBarColor:m,resizeText:p}},55592:function(ne,F,e){"use strict";var M=e(76308),k=e(94288).hasColorscale,o=e(27260),T=e(3400).coercePattern;ne.exports=function(_,p,l,t,i){var r=l("marker.color",t),n=k(_,"marker");n&&o(_,p,i,l,{prefix:"marker.",cLetter:"c"}),l("marker.line.color",M.defaultLine),k(_,"marker.line")&&o(_,p,i,l,{prefix:"marker.line.",cLetter:"c"}),l("marker.line.width"),l("marker.opacity"),T(l,"marker.pattern",r,n),l("selected.marker.color"),l("unselected.marker.color")}},82744:function(ne,F,e){"use strict";var M=e(33428),k=e(3400);function o(T){return"_"+T+"Text_minsize"}ne.exports={recordMinTextSize:function(T,_,p){if(p.uniformtext.mode){var l=o(T),t=p.uniformtext.minsize,i=_.scale*_.fontSize;_.hide=i<t,p[l]=p[l]||1/0,_.hide||(p[l]=Math.min(p[l],Math.max(i,t)))}},clearMinTextSize:function(T,_){_[o(T)]=void 0},resizeText:function(T,_,p){var l=T._fullLayout,t=l["_"+p+"Text_minsize"];if(t){var i,r="hide"===l.uniformtext.mode;switch(p){case"funnelarea":case"pie":case"sunburst":i="g.slice";break;case"treemap":case"icicle":i="g.slice, g.pathbar";break;default:i="g.points > g.point"}_.selectAll(i).each(function(n){var a=n.transform;if(a){a.scale=r&&a.hide?0:t/a.fontSize;var s=M.select(this).select("text");k.setTransormAndDisplay(s,a)}})}}}},78100:function(ne,F,e){"use strict";var M,k=e(21776).Ks,o=e(92880).extendFlat,T=e(8319),_=e(20832);ne.exports={r:T.r,theta:T.theta,r0:T.r0,dr:T.dr,theta0:T.theta0,dtheta:T.dtheta,thetaunit:T.thetaunit,base:o({},_.base,{}),offset:o({},_.offset,{}),width:o({},_.width,{}),text:o({},_.text,{}),hovertext:o({},_.hovertext,{}),marker:(M=o({},_.marker),delete M.cornerradius,M),hoverinfo:T.hoverinfo,hovertemplate:k(),selected:_.selected,unselected:_.unselected}},47056:function(ne,F,e){"use strict";var M=e(94288).hasColorscale,k=e(47128),o=e(3400).isArrayOrTypedArray,T=e(84664),_=e(96376).setGroupPositions,p=e(4500),l=e(24040).traceIs,t=e(3400).extendFlat;ne.exports={calc:function(i,r){for(var n=i._fullLayout,a=r.subplot,u=n[a].angularaxis,f=n[a].radialaxis.makeCalcdata(r,"r"),c=u.makeCalcdata(r,"theta"),y=r._length,d=new Array(y),m=f,g=c,x=0;x<y;x++)d[x]={p:g[x],s:m[x]};function v(b){var h=r[b];void 0!==h&&(r["_"+b]=o(h)?u.makeCalcdata(r,b):u.d2c(h,r.thetaunit))}return"linear"===u.type&&(v("width"),v("offset")),M(r,"marker")&&k(i,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),M(r,"marker.line")&&k(i,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}),T(d,r),p(d,r),d},crossTraceCalc:function(i,r,n){for(var a=i.calcdata,s=[],u=0;u<a.length;u++){var f=a[u],c=f[0].trace;!0===c.visible&&l(c,"bar")&&c.subplot===n&&s.push(f)}var y=t({},r.radialaxis,{_id:"x"});_(i,r.angularaxis,y,s,{mode:r.barmode,norm:r.barnorm,gap:r.bargap,groupgap:r.bargroupgap})}}},70384:function(ne,F,e){"use strict";var M=e(3400),k=e(85968).handleRThetaDefaults,o=e(55592),T=e(78100);ne.exports=function(_,p,l,t){function i(r,n){return M.coerce(_,p,T,r,n)}k(_,p,t,i)?(i("thetaunit"),i("base"),i("offset"),i("width"),i("text"),i("hovertext"),i("hovertemplate"),o(_,p,i,l,t),M.coerceSelectionMarkerOpacity(p,i)):p.visible=!1}},68896:function(ne,F,e){"use strict";var M=e(93024),k=e(3400),o=e(63400).getTraceColor,T=k.fillText,_=e(8504).makeHoverPointText,p=e(57384).isPtInsidePolygon;ne.exports=function(l,t,i){var r=l.cd,n=r[0].trace,a=l.subplot,s=a.radialAxis,f=a.vangles,c=f?p:k.isPtInsideSector,y=l.maxHoverDistance,d=a.angularAxis._period||2*Math.PI,m=Math.abs(s.g2p(Math.sqrt(t*t+i*i))),g=Math.atan2(i,t);if(s.range[0]>s.range[1]&&(g+=Math.PI),M.getClosest(r,function(b){return c(m,g,[b.rp0,b.rp1],[b.thetag0,b.thetag1],f)?y+Math.min(1,Math.abs(b.thetag1-b.thetag0)/d)-1+(b.rp1-m)/(b.rp1-b.rp0)-1:1/0},l),!1!==l.index){var x=r[l.index];l.x0=l.x1=x.ct[0],l.y0=l.y1=x.ct[1];var v=k.extendFlat({},x,{r:x.s,theta:x.p});return T(x,n,l),_(v,n,a,l),l.hovertemplate=n.hovertemplate,l.color=o(n,x),l.xLabelVal=l.yLabelVal=void 0,x.s<0&&(l.idealAlign="left"),[l]}}},94456:function(ne,F,e){"use strict";ne.exports={moduleType:"trace",name:"barpolar",basePlotModule:e(40872),categories:["polar","bar","showLegend"],attributes:e(78100),layoutAttributes:e(9320),supplyDefaults:e(70384),supplyLayoutDefaults:e(89580),calc:e(47056).calc,crossTraceCalc:e(47056).crossTraceCalc,plot:e(42040),colorbar:e(5528),formatLabels:e(22852),style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,hoverPoints:e(68896),selectPoints:e(45784),meta:{}}},9320:function(ne){"use strict";ne.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},89580:function(ne,F,e){"use strict";var M=e(3400),k=e(9320);ne.exports=function(o,T,_){var p,l={};function t(n,a){return M.coerce(o[p]||{},T[p],k,n,a)}for(var i=0;i<_.length;i++){var r=_[i];"barpolar"===r.type&&!0===r.visible&&(l[p=r.subplot]||(t("barmode"),t("bargap"),l[p]=1))}}},42040:function(ne,F,e){"use strict";var M=e(33428),k=e(38248),o=e(3400),T=e(43616),_=e(57384);ne.exports=function(p,l,t){var c,y,d,i=p._context.staticPlot,r=l.xaxis,n=l.yaxis,a=l.radialAxis,s=l.angularAxis,u=(y=(c=l).cxx,d=c.cyy,c.vangles?function(m,g,x,v){var b,h;o.angleDelta(x,v)>0?(b=x,h=v):(b=v,h=x);var S=[_.findEnclosingVertexAngles(b,c.vangles)[0],(b+h)/2,_.findEnclosingVertexAngles(h,c.vangles)[1]];return _.pathPolygonAnnulus(m,g,b,h,S,y,d)}:function(m,g,x,v){return o.pathAnnulus(m,g,x,v,y,d)}),f=l.layers.frontplot.select("g.barlayer");o.makeTraceGroups(f,t,"trace bars").each(function(){var c=M.select(this),y=o.ensureSingle(c,"g","points").selectAll("g.point").data(o.identity);y.enter().append("g").style("vector-effect",i?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),y.exit().remove(),y.each(function(d){var m,g=M.select(this),x=d.rp0=a.c2p(d.s0),v=d.rp1=a.c2p(d.s1),b=d.thetag0=s.c2g(d.p0),h=d.thetag1=s.c2g(d.p1);if(k(x)&&k(v)&&k(b)&&k(h)&&x!==v&&b!==h){var S=a.c2g(d.s1),w=(b+h)/2;d.ct=[r.c2p(S*Math.cos(w)),n.c2p(S*Math.sin(w))],m=u(x,v,b,h)}else m="M0,0Z";o.ensureSingle(g,"path").attr("d",m)}),T.setClipUrl(c,l._hasClipOnAxisFalse?l.clipIds.forTraces:null,p)})}},63188:function(ne,F,e){"use strict";var M=e(98304),k=e(52904),o=e(20832),T=e(22548),_=e(29736).axisHoverFormat,p=e(21776).Ks,l=e(92880).extendFlat,t=k.marker,i=t.line;ne.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:_("x"),yhoverformat:_("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},sdmultiple:{valType:"number",min:0,editType:"calc",dflt:1},sizemode:{valType:"enumerated",values:["quartiles","sd"],editType:"calc",dflt:"quartiles"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:l({},t.symbol,{arrayOk:!1,editType:"plot"}),opacity:l({},t.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:l({},t.angle,{arrayOk:!1,editType:"calc"}),size:l({},t.size,{arrayOk:!1,editType:"calc"}),color:l({},t.color,{arrayOk:!1,editType:"style"}),line:{color:l({},i.color,{arrayOk:!1,dflt:T.defaultLine,editType:"style"}),width:l({},i.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:M(),whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},showwhiskers:{valType:"boolean",editType:"calc"},offsetgroup:o.offsetgroup,alignmentgroup:o.alignmentgroup,selected:{marker:k.selected.marker,editType:"style"},unselected:{marker:k.unselected.marker,editType:"style"},text:l({},k.text,{}),hovertext:l({},k.hovertext,{}),hovertemplate:p({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"},zorder:k.zorder}},62555:function(ne,F,e){"use strict";var M=e(38248),k=e(54460),o=e(1220),T=e(3400),_=e(39032).BADNUM,p=T._;ne.exports=function(c,y){var d,m,g,x,v,b,h,S=c._fullLayout,w=k.getFromId(c,y.xaxis||"x"),E=k.getFromId(c,y.yaxis||"y"),P=[],I="violin"===y.type?"_numViolins":"_numBoxes";"h"===y.orientation?(g=w,x="x",v=E,b="y",h=!!y.yperiodalignment):(g=E,x="y",v=w,b="x",h=!!y.xperiodalignment);var O,z,U,R,j,Y,B=function(Ne,Re,He,Ze){var nt,ft=Re+"0"in Ne;if(Re in Ne||ft&&"d"+Re in Ne){var ht=He.makeCalcdata(Ne,Re);return[o(Ne,He,Re,ht).vals,ht]}nt=ft?Ne[Re+"0"]:"name"in Ne&&("category"===He.type||M(Ne.name)&&-1!==["linear","log"].indexOf(He.type)||T.isDateTime(Ne.name)&&"date"===He.type)?Ne.name:Ze;for(var Tt="multicategory"===He.type?He.r2c_just_indices(nt):He.d2c(nt,0,Ne[Re+"calendar"]),At=Ne._length,_t=new Array(At),ot=0;ot<At;ot++)_t[ot]=Tt;return[_t]}(y,b,v,S[I]),V=B[0],q=B[1],ie=T.distinctVals(V,v),te=ie.vals,ee=ie.minDiff/2,$="all"===(y.boxpoints||y.points)?T.identity:function(Ne){return Ne.v<O.lf||Ne.v>O.uf};if(y._hasPreCompStats){var J=y[x],X=function(Ne){return g.d2c((y[Ne]||[])[d])},ae=1/0,ce=-1/0;for(d=0;d<y._length;d++){var le=V[d];if(M(le)){if((O={}).pos=O[b]=le,h&&q&&(O.orig_p=q[d]),O.q1=X("q1"),O.med=X("median"),O.q3=X("q3"),z=[],J&&T.isArrayOrTypedArray(J[d]))for(m=0;m<J[d].length;m++)(Y=g.d2c(J[d][m]))!==_&&(t(j={v:Y,i:[d,m]},y,[d,m]),z.push(j));if(O.pts=z.sort(i),R=(U=O[x]=z.map(r)).length,O.med!==_&&O.q1!==_&&O.q3!==_&&O.med>=O.q1&&O.q3>=O.med){var pe=X("lowerfence");O.lf=pe!==_&&pe<=O.q1?pe:n(O,U,R);var we=X("upperfence");O.uf=we!==_&&we>=O.q3?we:a(O,U,R);var Te=X("mean");O.mean=Te!==_?Te:R?T.mean(U,R):(O.q1+O.q3)/2;var ye=X("sd");O.sd=Te!==_&&ye>=0?ye:R?T.stdev(U,R,O.mean):O.q3-O.q1,O.lo=s(O),O.uo=u(O);var ve=X("notchspan");ve=ve!==_&&ve>0?ve:f(O,R),O.ln=O.med-ve,O.un=O.med+ve;var xe=O.lf,Ce=O.uf;y.boxpoints&&U.length&&(xe=Math.min(xe,U[0]),Ce=Math.max(Ce,U[R-1])),y.notched&&(xe=Math.min(xe,O.ln),Ce=Math.max(Ce,O.un)),O.min=xe,O.max=Ce}else{var Oe;T.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+O.q1,"median = "+O.med,"q3 = "+O.q3].join("\n")),O.med=Oe=O.med!==_?O.med:O.q1!==_?O.q3!==_?(O.q1+O.q3)/2:O.q1:O.q3!==_?O.q3:0,O.q1=O.q3=Oe,O.lf=O.uf=Oe,O.mean=O.sd=Oe,O.ln=O.un=Oe,O.min=O.max=Oe}ae=Math.min(ae,O.min),ce=Math.max(ce,O.max),O.pts2=z.filter($),P.push(O)}}y._extremes[g._id]=k.findExtremes(g,[ae,ce],{padded:!0})}else{var be=g.makeCalcdata(y,x),ue=function(Ne,Re){for(var He=Ne.length,Ze=new Array(He+1),nt=0;nt<He;nt++)Ze[nt]=Ne[nt]-Re;return Ze[He]=Ne[He-1]+Re,Ze}(te,ee),se=te.length,ge=function(Ne){for(var Re=new Array(Ne),He=0;He<Ne;He++)Re[He]=[];return Re}(se);for(d=0;d<y._length;d++)if(M(Y=be[d])){var Ie=T.findBin(V[d],ue);Ie>=0&&Ie<se&&(t(j={v:Y,i:d},y,d),ge[Ie].push(j))}var ke=1/0,Se=-1/0,Pe=y.quartilemethod,Fe="exclusive"===Pe,Be="inclusive"===Pe;for(d=0;d<se;d++)if(ge[d].length>0){var me,Me;(O={}).pos=O[b]=te[d],z=O.pts=ge[d].sort(i),R=(U=O[x]=z.map(r)).length,O.min=U[0],O.max=U[R-1],O.mean=T.mean(U,R),O.sd=T.stdev(U,R,O.mean)*y.sdmultiple,O.med=T.interp(U,.5),R%2&&(Fe||Be)?(Fe?(me=U.slice(0,R/2),Me=U.slice(R/2+1)):Be&&(me=U.slice(0,R/2+1),Me=U.slice(R/2)),O.q1=T.interp(me,.5),O.q3=T.interp(Me,.5)):(O.q1=T.interp(U,.25),O.q3=T.interp(U,.75)),O.lf=n(O,U,R),O.uf=a(O,U,R),O.lo=s(O),O.uo=u(O);var Le=f(O,R);O.ln=O.med-Le,O.un=O.med+Le,ke=Math.min(ke,O.ln),Se=Math.max(Se,O.un),O.pts2=z.filter($),P.push(O)}y.notched&&T.isTypedArray(be)&&(be=Array.from(be)),y._extremes[g._id]=k.findExtremes(g,y.notched?be.concat([ke,Se]):be,{padded:!0})}return function(Ne,Re){if(T.isArrayOrTypedArray(Re.selectedpoints))for(var He=0;He<Ne.length;He++){for(var Ze=Ne[He].pts||[],nt={},ft=0;ft<Ze.length;ft++)nt[Ze[ft].i]=ft;T.tagSelected(Ze,Re,nt)}}(P,y),P.length>0?(P[0].t={num:S[I],dPos:ee,posLetter:b,valLetter:x,labels:{med:p(c,"median:"),min:p(c,"min:"),q1:p(c,"q1:"),q3:p(c,"q3:"),max:p(c,"max:"),mean:"sd"===y.boxmean||"sd"===y.sizemode?p(c,"mean \xb1 \u03c3:").replace("\u03c3",1===y.sdmultiple?"\u03c3":y.sdmultiple+"\u03c3"):p(c,"mean:"),lf:p(c,"lower fence:"),uf:p(c,"upper fence:")}},S[I]++,P):[{t:{empty:!0}}]};var l={text:"tx",hovertext:"htx"};function t(c,y,d){for(var m in l)T.isArrayOrTypedArray(y[m])&&(Array.isArray(d)?T.isArrayOrTypedArray(y[m][d[0]])&&(c[l[m]]=y[m][d[0]][d[1]]):c[l[m]]=y[m][d])}function i(c,y){return c.v-y.v}function r(c){return c.v}function n(c,y,d){return 0===d?c.q1:Math.min(c.q1,y[Math.min(T.findBin(2.5*c.q1-1.5*c.q3,y,!0)+1,d-1)])}function a(c,y,d){return 0===d?c.q3:Math.max(c.q3,y[Math.max(T.findBin(2.5*c.q3-1.5*c.q1,y),0)])}function s(c){return 4*c.q1-3*c.q3}function u(c){return 4*c.q3-3*c.q1}function f(c,y){return 0===y?0:1.57*(c.q3-c.q1)/Math.sqrt(y)}},96404:function(ne,F,e){"use strict";var M=e(54460),k=e(3400),o=e(71888).getAxisGroup,T=["v","h"];function _(p,l,t,i){var r,n,a,s=l.calcdata,u=l._fullLayout,f=i._id,c=f.charAt(0),y=[],d=0;for(r=0;r<t.length;r++)for(a=s[t[r]],n=0;n<a.length;n++)y.push(i.c2l(a[n].pos,!0)),d+=(a[n].pts2||[]).length;if(y.length){var m=k.distinctVals(y);"category"!==i.type&&"multicategory"!==i.type||(m.minDiff=1);var g=m.minDiff/2;M.minDtick(i,m.minDiff,m.vals[0],!0);var x=u["violin"===p?"_numViolins":"_numBoxes"],v="group"===u[p+"mode"]&&x>1,b=1-u[p+"gap"],h=1-u[p+"groupgap"];for(r=0;r<t.length;r++){var S,w,E,P,I,O,z=(a=s[t[r]])[0].trace,U=a[0].t,R=z.width,j=z.side;if(R)S=w=P=R/2,E=0;else if(S=g,v){var Y=o(u,i._id)+z.orientation,V=Object.keys(((u._alignmentOpts[Y]||{})[z.alignmentgroup]||{}).offsetGroups||{}).length,q=V||x;w=S*b*h/q,E=2*S*(((V?z._offsetIndex:U.num)+.5)/q-.5)*b,P=S*b/q}else w=S*b*h,E=0,P=S;U.dPos=S,U.bPos=E,U.bdPos=w,U.wHover=P;var ie,te,ee,$,J,X,ae=E+w,ce=!!R;if("positive"===j?(I=S*(R?1:.5),ie=ae,O=ie=E):"negative"===j?(I=ie=E,O=S*(R?1:.5),te=ae):(I=O=S,ie=te=ae),(z.boxpoints||z.points)&&d>0){var le=z.pointpos,pe=z.jitter,we=z.marker.size/2,Te=0;le+pe>=0&&((Te=ae*(le+pe))>I?(ce=!0,J=we,ee=Te):Te>ie&&(J=we,ee=I)),Te<=I&&(ee=I);var ye=0;le-pe<=0&&((ye=-ae*(le-pe))>O?(ce=!0,X=we,$=ye):ye>te&&(X=we,$=O)),ye<=O&&($=O)}else ee=I,$=O;var ve=new Array(a.length);for(n=0;n<a.length;n++)ve[n]=a[n].pos;z._extremes[f]=M.findExtremes(i,ve,{padded:ce,vpadminus:$,vpadplus:ee,vpadLinearized:!0,ppadminus:{x:X,y:J}[c],ppadplus:{x:J,y:X}[c]})}}}ne.exports={crossTraceCalc:function(p,l){for(var t=p.calcdata,i=l.xaxis,r=l.yaxis,n=0;n<T.length;n++){for(var a=T[n],s="h"===a?r:i,u=[],f=0;f<t.length;f++){var c=t[f],d=c[0].trace;!0!==d.visible||"box"!==d.type&&"candlestick"!==d.type||c[0].t.empty||(d.orientation||"v")!==a||d.xaxis!==i._id||d.yaxis!==r._id||u.push(f)}_("box",p,u,s)}},setPositionOffset:_}},90624:function(ne,F,e){"use strict";var M=e(3400),k=e(24040),o=e(76308),T=e(31147),_=e(20011),p=e(52976),l=e(63188);function t(r,n,a,s){function u(j){var Y=0;return j&&j.length&&(Y+=1,M.isArrayOrTypedArray(j[0])&&j[0].length&&(Y+=1)),Y}function f(j){return M.validate(r[j],l[j])}var c,y=a("y"),d=a("x");if("box"===n.type){var m=a("q1"),g=a("median"),x=a("q3");n._hasPreCompStats=m&&m.length&&g&&g.length&&x&&x.length,c=Math.min(M.minRowLength(m),M.minRowLength(g),M.minRowLength(x))}var v,b,h=u(y),S=u(d),w=h&&M.minRowLength(y),E=S&&M.minRowLength(d),P=s.calendar,I={autotypenumbers:s.autotypenumbers};if(n._hasPreCompStats)switch(String(S)+String(h)){case"00":var O=f("x0")||f("dx");v=!f("y0")&&!f("dy")||O?"v":"h",b=c;break;case"10":v="v",b=Math.min(c,E);break;case"20":v="h",b=Math.min(c,d.length);break;case"01":v="h",b=Math.min(c,w);break;case"02":v="v",b=Math.min(c,y.length);break;case"12":v="v",b=Math.min(c,E,y.length);break;case"21":v="h",b=Math.min(c,d.length,w);break;case"11":b=0;break;case"22":var z,U=!1;for(z=0;z<d.length;z++)if("category"===p(d[z],P,I)){U=!0;break}if(U)v="v",b=Math.min(c,E,y.length);else{for(z=0;z<y.length;z++)if("category"===p(y[z],P,I)){U=!0;break}U?(v="h",b=Math.min(c,d.length,w)):(v="v",b=Math.min(c,E,y.length))}}else h>0?(v="v",b=S>0?Math.min(E,w):Math.min(w)):S>0?(v="h",b=Math.min(E)):b=0;if(b){n._length=b;var R=a("orientation",v);n._hasPreCompStats?"v"===R&&0===S?(a("x0",0),a("dx",1)):"h"===R&&0===h&&(a("y0",0),a("dy",1)):"v"===R&&0===S?a("x0"):"h"===R&&0===h&&a("y0"),k.getComponentMethod("calendars","handleTraceDefaults")(r,n,["x","y"],s)}else n.visible=!1}function i(r,n,a,s){var u=s.prefix,f=M.coerce2(r,n,l,"marker.outliercolor"),c=a("marker.line.outliercolor"),y="outliers";n._hasPreCompStats?y="all":(f||c)&&(y="suspectedoutliers");var d=a(u+"points",y);d?(a("jitter","all"===d?.3:0),a("pointpos","all"===d?-1.5:0),a("marker.symbol"),a("marker.opacity"),a("marker.size"),a("marker.angle"),a("marker.color",n.line.color),a("marker.line.color"),a("marker.line.width"),"suspectedoutliers"===d&&(a("marker.line.outliercolor",n.marker.color),a("marker.line.outlierwidth")),a("selected.marker.color"),a("unselected.marker.color"),a("selected.marker.size"),a("unselected.marker.size"),a("text"),a("hovertext")):delete n.marker;var m=a("hoveron");"all"!==m&&-1===m.indexOf("points")||a("hovertemplate"),M.coerceSelectionMarkerOpacity(n,a)}ne.exports={supplyDefaults:function(r,n,a,s){function u(b,h){return M.coerce(r,n,l,b,h)}if(t(r,n,u,s),!1!==n.visible){T(r,n,s,u),u("xhoverformat"),u("yhoverformat");var f=n._hasPreCompStats;f&&(u("lowerfence"),u("upperfence")),u("line.color",(r.marker||{}).color||a),u("line.width"),u("fillcolor",o.addOpacity(n.line.color,.5));var c=!1;if(f){var y=u("mean"),d=u("sd");y&&y.length&&(c=!0,d&&d.length&&(c="sd"))}u("whiskerwidth");var m,g=u("sizemode");"quartiles"===g&&(m=u("boxmean",c)),u("showwhiskers","quartiles"===g),"sd"!==g&&"sd"!==m||u("sdmultiple"),u("width"),u("quartilemethod");var x=!1;if(f){var v=u("notchspan");v&&v.length&&(x=!0)}else M.validate(r.notchwidth,l.notchwidth)&&(x=!0);u("notched",x)&&u("notchwidth"),i(r,n,u,{prefix:"box"}),u("zorder")}},crossTraceDefaults:function(r,n){var s;function u(y){return M.coerce(s._input,s,l,y)}for(var f=0;f<r.length;f++){var c=(s=r[f]).type;"box"!==c&&"violin"!==c||"group"===n[c+"mode"]&&_(s._input,s,n,u)}},handleSampleDefaults:t,handlePointsDefaults:i}},10392:function(ne){"use strict";ne.exports=function(F,e){return e.hoverOnBox&&(F.hoverOnBox=e.hoverOnBox),"xVal"in e&&(F.x=e.xVal),"yVal"in e&&(F.y=e.yVal),e.xa&&(F.xaxis=e.xa),e.ya&&(F.yaxis=e.ya),F}},27576:function(ne,F,e){"use strict";var M=e(54460),k=e(3400),o=e(93024),T=e(76308),_=k.fillText;function p(t,i,r,n){var a,s,u,f,c,y,d,m,g,x,v,b,h,S,w=t.cd,E=t.xa,P=t.ya,I=w[0].trace,O=w[0].t,z="violin"===I.type,U=O.bdPos,R=O.wHover,j=function(Oe){return u.c2l(Oe.pos)+O.bPos-u.c2l(y)};z&&"both"!==I.side?("positive"===I.side&&(g=function(Oe){var be=j(Oe);return o.inbox(be,be+R,x)},b=U,h=0),"negative"===I.side&&(g=function(Oe){var be=j(Oe);return o.inbox(be-R,be,x)},b=0,h=U)):(g=function(Oe){var be=j(Oe);return o.inbox(be-R,be+R,x)},b=h=U),S=z?function(Oe){return o.inbox(Oe.span[0]-c,Oe.span[1]-c,x)}:function(Oe){return o.inbox(Oe.min-c,Oe.max-c,x)},"h"===I.orientation?(c=i,y=r,d=S,m=g,a="y",u=P,s="x",f=E):(c=r,y=i,d=g,m=S,a="x",u=E,s="y",f=P);var Y=Math.min(1,U/Math.abs(u.r2c(u.range[1])-u.r2c(u.range[0])));function B(Oe){return(d(Oe)+m(Oe))/2}x=t.maxHoverDistance-Y,v=t.maxSpikeDistance-Y;var V=o.getDistanceFunction(n,d,m,B);if(o.getClosest(w,V,t),!1===t.index)return[];var q=w[t.index],ie=I.line.color,te=(I.marker||{}).color;t.color=T.opacity(ie)&&I.line.width?ie:T.opacity(te)&&I.boxpoints?te:I.fillcolor,t[a+"0"]=u.c2p(q.pos+O.bPos-h,!0),t[a+"1"]=u.c2p(q.pos+O.bPos+b,!0),t[a+"LabelVal"]=void 0!==q.orig_p?q.orig_p:q.pos;var ee=a+"Spike";t.spikeDistance=B(q)*v/x,t[ee]=u.c2p(q.pos,!0);var $=I.boxmean||"sd"===I.sizemode||(I.meanline||{}).visible,J=I.boxpoints||I.points,X=J&&$?["max","uf","q3","med","mean","q1","lf","min"]:J&&!$?["max","uf","q3","med","q1","lf","min"]:!J&&$?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"];I.orientation===(f.range[1]<f.range[0]?"v":"h")&&X.reverse();for(var ce=t.spikeDistance,le=t[ee],pe=[],we=0;we<X.length;we++){var Te=X[we];if(Te in q){var ye=q[Te],ve=f.c2p(ye,!0),xe=k.extendFlat({},t);xe.attr=Te,xe[s+"0"]=xe[s+"1"]=ve,xe[s+"LabelVal"]=ye,xe[s+"Label"]=(O.labels?O.labels[Te]+" ":"")+M.hoverLabelText(f,ye,I[s+"hoverformat"]),xe.hoverOnBox=!0,"mean"!==Te||!("sd"in q)||"sd"!==I.boxmean&&"sd"!==I.sizemode||(xe[s+"err"]=q.sd),xe.hovertemplate=!1,pe.push(xe)}}t.name="",t.spikeDistance=void 0,t[ee]=void 0;for(var Ce=0;Ce<pe.length;Ce++)"med"!==pe[Ce].attr?(pe[Ce].name="",pe[Ce].spikeDistance=void 0,pe[Ce][ee]=void 0):(pe[Ce].spikeDistance=ce,pe[Ce][ee]=le);return pe}function l(t,i,r){for(var n,a,s,u=t.cd,f=t.xa,c=t.ya,y=u[0].trace,d=f.c2p(i),m=c.c2p(r),g=o.quadrature(function(z){var U=Math.max(3,z.mrc||0);return Math.max(Math.abs(f.c2p(z.x)-d)-U,1-3/U)},function(z){var U=Math.max(3,z.mrc||0);return Math.max(Math.abs(c.c2p(z.y)-m)-U,1-3/U)}),x=!1,v=0;v<u.length;v++){a=u[v];for(var b=0;b<(a.pts||[]).length;b++){var h=g(s=a.pts[b]);h<=t.distance&&(t.distance=h,x=[v,b])}}if(!x)return!1;s=(a=u[x[0]]).pts[x[1]];var S=f.c2p(s.x,!0),w=c.c2p(s.y,!0),E=s.mrc||1;n=k.extendFlat({},t,{index:s.i,color:(y.marker||{}).color,name:y.name,x0:S-E,x1:S+E,y0:w-E,y1:w+E,spikeDistance:t.distance,hovertemplate:y.hovertemplate});var P,I=a.orig_p,O=void 0!==I?I:a.pos;return"h"===y.orientation?(P=c,n.xLabelVal=s.x,n.yLabelVal=O):(P=f,n.xLabelVal=O,n.yLabelVal=s.y),n[P._id.charAt(0)+"Spike"]=P.c2p(a.pos,!0),_(s,y,n),n}ne.exports={hoverPoints:function(t,i,r,n){var a,s=t.cd[0].trace.hoveron,u=[];return-1!==s.indexOf("boxes")&&(u=u.concat(p(t,i,r,n))),-1!==s.indexOf("points")&&(a=l(t,i,r)),"closest"===n?a?[a]:u:(a&&u.push(a),u)},hoverOnBoxes:p,hoverOnPoints:l}},67244:function(ne,F,e){"use strict";ne.exports={attributes:e(63188),layoutAttributes:e(16560),supplyDefaults:e(90624).supplyDefaults,crossTraceDefaults:e(90624).crossTraceDefaults,supplyLayoutDefaults:e(68832).supplyLayoutDefaults,calc:e(62555),crossTraceCalc:e(96404).crossTraceCalc,plot:e(18728).plot,style:e(25776).style,styleOnSelect:e(25776).styleOnSelect,hoverPoints:e(27576).hoverPoints,eventData:e(10392),selectPoints:e(8264),moduleType:"trace",name:"box",basePlotModule:e(57952),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},16560:function(ne){"use strict";ne.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},68832:function(ne,F,e){"use strict";var M=e(24040),k=e(3400),o=e(16560);function T(_,p,l,t,i){for(var r=i+"Layout",n=!1,a=0;a<l.length;a++)if(M.traceIs(l[a],r)){n=!0;break}n&&(t(i+"mode"),t(i+"gap"),t(i+"groupgap"))}ne.exports={supplyLayoutDefaults:function(_,p,l){T(0,0,l,function(t,i){return k.coerce(_,p,o,t,i)},"box")},_supply:T}},18728:function(ne,F,e){"use strict";var M=e(33428),k=e(3400),o=e(43616);function T(l,t,i,r,n){var a,s,u="h"===i.orientation,f=t.val,c=t.pos,y=!!c.rangebreaks,d=r.bPos,m=r.wdPos||0,g=r.bPosPxOffset||0,x=i.whiskerwidth||0,v=!1!==i.showwhiskers,b=i.notched||!1,h=b?1-2*i.notchwidth:1;Array.isArray(r.bdPos)?(a=r.bdPos[0],s=r.bdPos[1]):(a=r.bdPos,s=r.bdPos);var S=l.selectAll("path.box").data("violin"!==i.type||i.box.visible?k.identity:[]);S.enter().append("path").style("vector-effect",n?"none":"non-scaling-stroke").attr("class","box"),S.exit().remove(),S.each(function(w){if(w.empty)return M.select(this).attr("d","M0,0Z");var E=c.c2l(w.pos+d,!0),P=c.l2p(E-a)+g,I=c.l2p(E+s)+g,O=y?(P+I)/2:c.l2p(E)+g,z=i.whiskerwidth,U=y?P*z+(1-z)*O:c.l2p(E-m)+g,R=y?I*z+(1-z)*O:c.l2p(E+m)+g,j=c.l2p(E-a*h)+g,Y=c.l2p(E+s*h)+g,B="sd"===i.sizemode,V=f.c2p(B?w.mean-w.sd:w.q1,!0),q=f.c2p(B?w.mean+w.sd:w.q3,!0),ie=k.constrain(f.c2p(B?w.mean:w.med,!0),Math.min(V,q)+1,Math.max(V,q)-1),te=void 0===w.lf||!1===i.boxpoints||B,ee=f.c2p(te?w.min:w.lf,!0),$=f.c2p(te?w.max:w.uf,!0),J=f.c2p(w.ln,!0),X=f.c2p(w.un,!0);u?M.select(this).attr("d","M"+ie+","+j+"V"+Y+"M"+V+","+P+"V"+I+(b?"H"+J+"L"+ie+","+Y+"L"+X+","+I:"")+"H"+q+"V"+P+(b?"H"+X+"L"+ie+","+j+"L"+J+","+P:"")+"Z"+(v?"M"+V+","+O+"H"+ee+"M"+q+","+O+"H"+$+(0===x?"":"M"+ee+","+U+"V"+R+"M"+$+","+U+"V"+R):"")):M.select(this).attr("d","M"+j+","+ie+"H"+Y+"M"+P+","+V+"H"+I+(b?"V"+J+"L"+Y+","+ie+"L"+I+","+X:"")+"V"+q+"H"+P+(b?"V"+X+"L"+j+","+ie+"L"+P+","+J:"")+"Z"+(v?"M"+O+","+V+"V"+ee+"M"+O+","+q+"V"+$+(0===x?"":"M"+U+","+ee+"H"+R+"M"+U+","+$+"H"+R):""))})}function _(l,t,i,r){var n=t.x,a=t.y,s=r.bdPos,u=r.bPos,f=i.boxpoints||i.points;k.seedPseudoRandom();var c=l.selectAll("g.points").data(f?function(d){return d.forEach(function(m){m.t=r,m.trace=i}),d}:[]);c.enter().append("g").attr("class","points"),c.exit().remove();var y=c.selectAll("path").data(function(d){var m,g,x=d.pts2,v=Math.max((d.max-d.min)/10,d.q3-d.q1),b=1e-9*v,h=.01*v,S=[],w=0;if(i.jitter){if(0===v)for(w=1,S=new Array(x.length),m=0;m<x.length;m++)S[m]=1;else for(m=0;m<x.length;m++){var E=Math.max(0,m-5),P=x[E].v,I=Math.min(x.length-1,m+5),O=x[I].v;"all"!==f&&(x[m].v<d.lf?O=Math.min(O,d.lf):P=Math.max(P,d.uf));var z=Math.sqrt(h*(I-E)/(O-P+b))||0;z=k.constrain(Math.abs(z),0,1),S.push(z),w=Math.max(z,w)}g=2*i.jitter/(w||1)}for(m=0;m<x.length;m++){var U=x[m],R=U.v,j=i.jitter?g*S[m]*(k.pseudoRandom()-.5):0,Y=d.pos+u+s*(i.pointpos+j);"h"===i.orientation?(U.y=Y,U.x=R):(U.x=Y,U.y=R),"suspectedoutliers"===f&&R<d.uo&&R>d.lo&&(U.so=!0)}return x});y.enter().append("path").classed("point",!0),y.exit().remove(),y.call(o.translatePoints,n,a)}function p(l,t,i,r){var n,a,s=t.val,u=t.pos,f=!!u.rangebreaks,c=r.bPos,y=r.bPosPxOffset||0,d=i.boxmean||(i.meanline||{}).visible;Array.isArray(r.bdPos)?(n=r.bdPos[0],a=r.bdPos[1]):(n=r.bdPos,a=r.bdPos);var m=l.selectAll("path.mean").data("box"===i.type&&i.boxmean||"violin"===i.type&&i.box.visible&&i.meanline.visible?k.identity:[]);m.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),m.exit().remove(),m.each(function(g){var x=u.c2l(g.pos+c,!0),v=u.l2p(x-n)+y,b=u.l2p(x+a)+y,h=f?(v+b)/2:u.l2p(x)+y,S=s.c2p(g.mean,!0),w=s.c2p(g.mean-g.sd,!0),E=s.c2p(g.mean+g.sd,!0);"h"===i.orientation?M.select(this).attr("d","M"+S+","+v+"V"+b+("sd"===d?"m0,0L"+w+","+h+"L"+S+","+v+"L"+E+","+h+"Z":"")):M.select(this).attr("d","M"+v+","+S+"H"+b+("sd"===d?"m0,0L"+h+","+w+"L"+v+","+S+"L"+h+","+E+"Z":""))})}ne.exports={plot:function(l,t,i,r){var n=l._context.staticPlot,a=t.xaxis,s=t.yaxis;k.makeTraceGroups(r,i,"trace boxes").each(function(u){var f,c,y=M.select(this),d=u[0],m=d.t,g=d.trace;m.wdPos=m.bdPos*g.whiskerwidth,!0!==g.visible||m.empty?y.remove():("h"===g.orientation?(f=s,c=a):(f=a,c=s),T(y,{pos:f,val:c},g,m,n),_(y,{x:a,y:s},g,m),p(y,{pos:f,val:c},g,m))})},plotBoxAndWhiskers:T,plotPoints:_,plotBoxMean:p}},8264:function(ne){"use strict";ne.exports=function(F,e){var M,k,o=F.cd,T=F.xaxis,_=F.yaxis,p=[];if(!1===e)for(M=0;M<o.length;M++)for(k=0;k<(o[M].pts||[]).length;k++)o[M].pts[k].selected=0;else for(M=0;M<o.length;M++)for(k=0;k<(o[M].pts||[]).length;k++){var l=o[M].pts[k],t=T.c2p(l.x),i=_.c2p(l.y);e.contains([t,i],null,l.i,F)?(p.push({pointNumber:l.i,x:T.c2d(l.x),y:_.c2d(l.y)}),l.selected=1):l.selected=0}return p}},25776:function(ne,F,e){"use strict";var M=e(33428),k=e(76308),o=e(43616);ne.exports={style:function(T,_,p){var l=p||M.select(T).selectAll("g.trace.boxes");l.style("opacity",function(t){return t[0].trace.opacity}),l.each(function(t){var i=M.select(this),r=t[0].trace,n=r.line.width;function a(f,c,y,d){f.style("stroke-width",c+"px").call(k.stroke,y).call(k.fill,d)}var s=i.selectAll("path.box");if("candlestick"===r.type)s.each(function(f){if(!f.empty){var c=M.select(this),y=r[f.dir];a(c,y.line.width,y.line.color,y.fillcolor),c.style("opacity",r.selectedpoints&&!f.selected?.3:1)}});else{a(s,n,r.line.color,r.fillcolor),i.selectAll("path.mean").style({"stroke-width":n,"stroke-dasharray":2*n+"px,"+n+"px"}).call(k.stroke,r.line.color);var u=i.selectAll("path.point");o.pointStyle(u,r,T)}})},styleOnSelect:function(T,_,p){var l=_[0].trace,t=p.selectAll("path.point");l.selectedpoints?o.selectedPointStyle(t,l):o.pointStyle(t,l,T)}}},64216:function(ne,F,e){"use strict";var M=e(3400).extendFlat,k=e(29736).axisHoverFormat,o=e(20279),T=e(63188);function _(p){return{line:{color:M({},T.line.color,{dflt:p}),width:T.line.width,editType:"style"},fillcolor:T.fillcolor,editType:"style"}}ne.exports={xperiod:o.xperiod,xperiod0:o.xperiod0,xperiodalignment:o.xperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),x:o.x,open:o.open,high:o.high,low:o.low,close:o.close,line:{width:M({},T.line.width,{}),editType:"style"},increasing:_(o.increasing.line.color.dflt),decreasing:_(o.decreasing.line.color.dflt),text:o.text,hovertext:o.hovertext,whiskerwidth:M({},T.whiskerwidth,{dflt:0}),hoverlabel:o.hoverlabel,zorder:T.zorder}},46283:function(ne,F,e){"use strict";var M=e(3400),k=e(54460),o=e(1220),T=e(42812).calcCommon;function _(p,l,t,i){return{min:t,q1:Math.min(p,i),med:i,q3:Math.max(p,i),max:l}}ne.exports=function(p,l){var t=p._fullLayout,i=k.getFromId(p,l.xaxis),r=k.getFromId(p,l.yaxis),n=i.makeCalcdata(l,"x"),a=o(l,i,"x",n).vals,s=T(p,l,n,a,r,_);return s.length?(M.extendFlat(s[0].t,{num:t._numBoxes,dPos:M.distinctVals(a).minDiff/2,posLetter:"x",valLetter:"y"}),t._numBoxes++,s):[{t:{empty:!0}}]}},64588:function(ne,F,e){"use strict";var M=e(3400),k=e(76308),o=e(52744),T=e(31147),_=e(64216);function p(l,t,i,r){var n=i(r+".line.color");i(r+".line.width",t.line.width),i(r+".fillcolor",k.addOpacity(n,.5))}ne.exports=function(l,t,i,r){function n(a,s){return M.coerce(l,t,_,a,s)}o(l,t,n,r)?(T(l,t,r,n,{x:!0}),n("xhoverformat"),n("yhoverformat"),n("line.width"),p(0,t,n,"increasing"),p(0,t,n,"decreasing"),n("text"),n("hovertext"),n("whiskerwidth"),r._requestRangeslider[t.xaxis]=!0,n("zorder")):t.visible=!1}},61712:function(ne,F,e){"use strict";ne.exports={moduleType:"trace",name:"candlestick",basePlotModule:e(57952),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:e(64216),layoutAttributes:e(16560),supplyLayoutDefaults:e(68832).supplyLayoutDefaults,crossTraceCalc:e(96404).crossTraceCalc,supplyDefaults:e(64588),calc:e(46283),plot:e(18728).plot,layerName:"boxlayer",style:e(25776).style,hoverPoints:e(18720).hoverPoints,selectPoints:e(97384)}},93504:function(ne,F,e){"use strict";var M=e(63856),k=e(31780);ne.exports=function(o,T,_,p,l){var t,i,r,n;p("a")||(p("da"),p("a0")),p("b")||(p("db"),p("b0")),t=o,i=T,r=_,n=l,["aaxis","baxis"].forEach(function(a){var s=a.charAt(0),u=t[a]||{},f=k.newContainer(i,a);M(u,f,{noAutotickangles:!0,noTicklabelstep:!0,tickfont:"x",id:s+"axis",letter:s,font:i.font,name:a,data:t[s],calendar:i.calendar,dfltColor:n,bgColor:r.paper_bgcolor,autotypenumbersDflt:r.autotypenumbers,fullLayout:r}),f._categories=f._categories||[],t[a]||"-"===u.type||(t[a]={type:u.type})})}},51676:function(ne,F,e){"use strict";var M=e(3400).isArrayOrTypedArray;function k(o,T){if(!M(o)||T>=10)return null;for(var _=1/0,p=-1/0,l=o.length,t=0;t<l;t++){var i=o[t];if(M(i)){var r=k(i,T+1);r&&(_=Math.min(r[0],_),p=Math.max(r[1],p))}else _=Math.min(i,_),p=Math.max(i,p)}return[_,p]}ne.exports=function(o){return k(o,0)}},85720:function(ne,F,e){"use strict";var M=e(25376),k=e(98692),o=e(22548),T=M({editType:"calc"}),_=e(52904).zorder;T.family.dflt='"Open Sans", verdana, arial, sans-serif',T.size.dflt=12,T.color.dflt=o.defaultLine,ne.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:k,baxis:k,font:T,color:{valType:"color",dflt:o.defaultLine,editType:"plot"},transforms:void 0,zorder:_}},77712:function(ne,F,e){"use strict";var M=e(3400).isArrayOrTypedArray;ne.exports=function(k,o,T,_){var p,l,t,i,r,n,a,s,u,f,c,y,d,m=M(T)?"a":"b",g=("a"===m?k.aaxis:k.baxis).smoothing,x="a"===m?k.a2i:k.b2j,v="a"===m?T:_,b="a"===m?_:T,h="a"===m?o.a.length:o.b.length,S="a"===m?o.b.length:o.a.length,w=Math.floor("a"===m?k.b2j(b):k.a2i(b)),E="a"===m?function(ie){return k.evalxy([],ie,w)}:function(ie){return k.evalxy([],w,ie)};g&&(t=Math.max(0,Math.min(S-2,w)),i=w-t,l="a"===m?function(ie,te){return k.dxydi([],ie,t,te,i)}:function(ie,te){return k.dxydj([],t,ie,i,te)});var P=x(v[0]),I=x(v[1]),O=P<I?1:-1,z=1e-8*(I-P),U=O>0?Math.floor:Math.ceil,R=O>0?Math.ceil:Math.floor,j=O>0?Math.min:Math.max,Y=O>0?Math.max:Math.min,B=U(P+z),V=R(I-z),q=[[a=E(P)]];for(p=B;p*O<V*O;p+=O)r=[],c=Y(P,p),d=(y=j(I,p+O))-c,n=Math.max(0,Math.min(h-2,Math.floor(.5*(c+y)))),s=E(y),g&&(u=l(n,c-n),f=l(n,y-n),r.push([a[0]+u[0]/3*d,a[1]+u[1]/3*d]),r.push([s[0]-f[0]/3*d,s[1]-f[1]/3*d])),r.push(s),q.push(r),a=s;return q}},98692:function(ne,F,e){"use strict";var M=e(25376),k=e(22548),o=e(94724),T=e(29736).descriptionWithDates,_=e(67824).overrideAll,p=e(98192).u,l=e(92880).extendFlat;ne.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:M({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:o.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:l({},o.labelalias,{editType:"calc"}),tickfont:M({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:T("tick label")},tickformatstops:_(o.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:k.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:l({},p,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:l({},p,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:k.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:M({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},63856:function(ne,F,e){"use strict";var M=e(85720),k=e(76308).addOpacity,o=e(24040),T=e(3400),_=e(26332),p=e(95936),l=e(42568),t=e(22416),i=e(78344),r=e(52976);ne.exports=function(n,a,s){var u=s.letter,f=s.font||{},c=M[u+"axis"];function y(O,z){return T.coerce(n,a,c,O,z)}function d(O,z){return T.coerce2(n,a,c,O,z)}s.name&&(a._name=s.name,a._id=s.name),y("autotypenumbers",s.autotypenumbersDflt);var m=y("type");"-"===m&&(s.data&&function(O,z){if("-"===O.type){var U=O._id.charAt(0);O.type=r(z,O[U+"calendar"],{autotypenumbers:O.autotypenumbers})}}(a,s.data),"-"===a.type?a.type="linear":m=n.type=a.type),y("smoothing"),y("cheatertype"),y("showticklabels"),y("labelprefix",u+" = "),y("labelsuffix"),y("showtickprefix"),y("showticksuffix"),y("separatethousands"),y("tickformat"),y("exponentformat"),y("minexponent"),y("showexponent"),y("categoryorder"),y("tickmode"),y("tickvals"),y("ticktext"),y("tick0"),y("dtick"),"array"===a.tickmode&&(y("arraytick0"),y("arraydtick")),y("labelpadding"),a._hovertitle=u,"date"===m&&o.getComponentMethod("calendars","handleDefaults")(n,a,"calendar",s.calendar),i(a,s.fullLayout),a.c2p=T.identity;var g=y("color",s.dfltColor),x=g===n.color?g:f.color;y("title.text")&&(T.coerceFont(y,"title.font",f,{overrideDflt:{size:T.bigFont(f.size),color:x}}),y("title.offset")),y("tickangle"),y("autorange",!a.isValidRange(n.range))&&y("rangemode"),y("range"),a.cleanRange(),y("fixedrange"),_(n,a,y,m),l(n,a,y,m,s),p(n,a,y,m,s),t(n,a,y,{data:s.data,dataAttr:u});var v=d("gridcolor",k(g,.3)),b=d("gridwidth"),h=d("griddash"),S=y("showgrid");S||(delete a.gridcolor,delete a.gridwidth,delete a.griddash);var w=d("startlinecolor",g),E=d("startlinewidth",b);y("startline",a.showgrid||!!w||!!E)||(delete a.startlinecolor,delete a.startlinewidth);var P=d("endlinecolor",g),I=d("endlinewidth",b);return y("endline",a.showgrid||!!P||!!I)||(delete a.endlinecolor,delete a.endlinewidth),S?(y("minorgridcount"),y("minorgridwidth",b),y("minorgriddash",h),y("minorgridcolor",k(v,.06)),a.minorgridcount||(delete a.minorgridwidth,delete a.minorgriddash,delete a.minorgridcolor)):(delete a.gridcolor,delete a.gridwidth,delete a.griddash),"none"===a.showticklabels&&(delete a.tickfont,delete a.tickangle,delete a.showexponent,delete a.exponentformat,delete a.minexponent,delete a.tickformat,delete a.showticksuffix,delete a.showtickprefix),a.showticksuffix||delete a.ticksuffix,a.showtickprefix||delete a.tickprefix,y("tickmode"),a}},58744:function(ne,F,e){"use strict";var M=e(54460),k=e(3400).isArray1D,o=e(60776),T=e(51676),_=e(19216),p=e(14724),l=e(24944),t=e(26136),i=e(51512),r=e(2872),n=e(81e3);ne.exports=function(a,s){var u=M.getFromId(a,s.xaxis),f=M.getFromId(a,s.yaxis),c=s.aaxis,y=s.baxis,d=s.x,m=s.y,g=[];d&&k(d)&&g.push("x"),m&&k(m)&&g.push("y"),g.length&&r(s,c,y,"a","b",g);var x=s._a=s._a||s.a,v=s._b=s._b||s.b;d=s._x||s.x,m=s._y||s.y;var b={};s._cheater&&(d=o("index"===c.cheatertype?x.length:x,"index"===y.cheatertype?v.length:v,s.cheaterslope)),s._x=d=t(d),s._y=m=t(m),i(d,x,v),i(m,x,v),n(s),s.setScale();var w=T(d),E=T(m),P=.5*(w[1]-w[0]),I=.5*(w[1]+w[0]),O=.5*(E[1]-E[0]),z=.5*(E[1]+E[0]),U=1.3;return E=[z-O*U,z+O*U],s._extremes[u._id]=M.findExtremes(u,w=[I-P*U,I+P*U],{padded:!0}),s._extremes[f._id]=M.findExtremes(f,E,{padded:!0}),_(s,"a","b"),_(s,"b","a"),p(s,c),p(s,y),b.clipsegments=l(s._xctrl,s._yctrl,c,y),b.x=d,b.y=m,b.a=x,b.b=v,[b]}},24944:function(ne){"use strict";ne.exports=function(F,e,M,k){var o,T,_,p=[],l=!!M.smoothing,t=!!k.smoothing,i=F[0].length-1,r=F.length-1;for(o=0,T=[],_=[];o<=i;o++)T[o]=F[0][o],_[o]=e[0][o];for(p.push({x:T,y:_,bicubic:l}),o=0,T=[],_=[];o<=r;o++)T[o]=F[o][i],_[o]=e[o][i];for(p.push({x:T,y:_,bicubic:t}),o=i,T=[],_=[];o>=0;o--)T[i-o]=F[r][o],_[i-o]=e[r][o];for(p.push({x:T,y:_,bicubic:l}),o=r,T=[],_=[];o>=0;o--)T[r-o]=F[o][0],_[r-o]=e[o][0];return p.push({x:T,y:_,bicubic:t}),p}},19216:function(ne,F,e){"use strict";var M=e(54460),k=e(92880).extendFlat;ne.exports=function(o,T,_){var p,l,t,i,r,n,a,s,u,f,c,y,d,m,g=o["_"+T],x=o[T+"axis"],v=x._gridlines=[],b=x._minorgridlines=[],h=x._boundarylines=[],S=o["_"+_],w=o[_+"axis"];"array"===x.tickmode&&(x.tickvals=g.slice());var E=o._xctrl,P=o._yctrl,I=E[0].length,O=E.length,z=o._a.length,U=o._b.length;M.prepTicks(x),"array"===x.tickmode&&delete x.tickvals;var R=x.smoothing?3:1;function j(B){var V,q,ie,te,ee,$,J,X,ae,ce,le,pe,we=[],Te=[],ye={};if("b"===T)for(q=o.b2j(B),ie=Math.floor(Math.max(0,Math.min(U-2,q))),te=q-ie,ye.length=U,ye.crossLength=z,ye.xy=function(ve){return o.evalxy([],ve,q)},ye.dxy=function(ve,xe){return o.dxydi([],ve,ie,xe,te)},V=0;V<z;V++)$=Math.min(z-2,V),J=V-$,X=o.evalxy([],V,q),w.smoothing&&V>0&&(ae=o.dxydi([],V-1,ie,0,te),we.push(ee[0]+ae[0]/3),Te.push(ee[1]+ae[1]/3),ce=o.dxydi([],V-1,ie,1,te),we.push(X[0]-ce[0]/3),Te.push(X[1]-ce[1]/3)),we.push(X[0]),Te.push(X[1]),ee=X;else for(V=o.a2i(B),$=Math.floor(Math.max(0,Math.min(z-2,V))),J=V-$,ye.length=z,ye.crossLength=U,ye.xy=function(ve){return o.evalxy([],V,ve)},ye.dxy=function(ve,xe){return o.dxydj([],$,ve,J,xe)},q=0;q<U;q++)ie=Math.min(U-2,q),te=q-ie,X=o.evalxy([],V,q),w.smoothing&&q>0&&(le=o.dxydj([],$,q-1,J,0),we.push(ee[0]+le[0]/3),Te.push(ee[1]+le[1]/3),pe=o.dxydj([],$,q-1,J,1),we.push(X[0]-pe[0]/3),Te.push(X[1]-pe[1]/3)),we.push(X[0]),Te.push(X[1]),ee=X;return ye.axisLetter=T,ye.axis=x,ye.crossAxis=w,ye.value=B,ye.constvar=_,ye.index=s,ye.x=we,ye.y=Te,ye.smoothing=w.smoothing,ye}function Y(B){var V,q,ie,te,ee,$=[],J=[],X={};if(X.length=g.length,X.crossLength=S.length,"b"===T)for(ie=Math.max(0,Math.min(U-2,B)),ee=Math.min(1,Math.max(0,B-ie)),X.xy=function(ae){return o.evalxy([],ae,B)},X.dxy=function(ae,ce){return o.dxydi([],ae,ie,ce,ee)},V=0;V<I;V++)$[V]=E[B*R][V],J[V]=P[B*R][V];else for(q=Math.max(0,Math.min(z-2,B)),te=Math.min(1,Math.max(0,B-q)),X.xy=function(ae){return o.evalxy([],B,ae)},X.dxy=function(ae,ce){return o.dxydj([],q,ae,te,ce)},V=0;V<O;V++)$[V]=E[V][B*R],J[V]=P[V][B*R];return X.axisLetter=T,X.axis=x,X.crossAxis=w,X.value=g[B],X.constvar=_,X.index=B,X.x=$,X.y=J,X.smoothing=w.smoothing,X}if("array"===x.tickmode){for(i=5e-15,n=(r=[Math.floor((g.length-1-x.arraytick0)/x.arraydtick*(1+i)),Math.ceil(-x.arraytick0/x.arraydtick/(1+i))].sort(function(B,V){return B-V}))[0]-1,a=r[1]+1,s=n;s<a;s++)(l=x.arraytick0+x.arraydtick*s)<0||l>g.length-1||v.push(k(Y(l),{color:x.gridcolor,width:x.gridwidth,dash:x.griddash}));for(s=n;s<a;s++)if(t=x.arraytick0+x.arraydtick*s,c=Math.min(t+x.arraydtick,g.length-1),!(t<0||t>g.length-1||c<0||c>g.length-1))for(y=g[t],d=g[c],p=0;p<x.minorgridcount;p++)(m=c-t)<=0||(f=y+(d-y)*(p+1)/(x.minorgridcount+1)*(x.arraydtick/m))<g[0]||f>g[g.length-1]||b.push(k(j(f),{color:x.minorgridcolor,width:x.minorgridwidth,dash:x.minorgriddash}));x.startline&&h.push(k(Y(0),{color:x.startlinecolor,width:x.startlinewidth})),x.endline&&h.push(k(Y(g.length-1),{color:x.endlinecolor,width:x.endlinewidth}))}else{for(i=5e-15,n=(r=[Math.floor((g[g.length-1]-x.tick0)/x.dtick*(1+i)),Math.ceil((g[0]-x.tick0)/x.dtick/(1+i))].sort(function(B,V){return B-V}))[0],a=r[1],s=n;s<=a;s++)v.push(k(j(u=x.tick0+x.dtick*s),{color:x.gridcolor,width:x.gridwidth,dash:x.griddash}));for(s=n-1;s<a+1;s++)for(u=x.tick0+x.dtick*s,p=0;p<x.minorgridcount;p++)(f=u+x.dtick*(p+1)/(x.minorgridcount+1))<g[0]||f>g[g.length-1]||b.push(k(j(f),{color:x.minorgridcolor,width:x.minorgridwidth,dash:x.minorgriddash}));x.startline&&h.push(k(j(g[0]),{color:x.startlinecolor,width:x.startlinewidth})),x.endline&&h.push(k(j(g[g.length-1]),{color:x.endlinecolor,width:x.endlinewidth}))}}},14724:function(ne,F,e){"use strict";var M=e(54460),k=e(92880).extendFlat;ne.exports=function(o,T){var _,p,l,t=T._labels=[],i=T._gridlines;for(_=0;_<i.length;_++)l=i[_],-1!==["start","both"].indexOf(T.showticklabels)&&(p=M.tickText(T,l.value),k(p,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:l.xy(0),dxy:l.dxy(0,0),axis:l.axis,length:l.crossAxis.length,font:l.axis.tickfont,isFirst:0===_,isLast:_===i.length-1}),t.push(p)),-1!==["end","both"].indexOf(T.showticklabels)&&(p=M.tickText(T,l.value),k(p,{endAnchor:!1,xy:l.xy(l.crossLength-1),dxy:l.dxy(l.crossLength-2,1),axis:l.axis,length:l.crossAxis.length,font:l.axis.tickfont,isFirst:0===_,isLast:_===i.length-1}),t.push(p))}},62284:function(ne){"use strict";ne.exports=function(F,e,M,k){var o=F[0]-e[0],T=F[1]-e[1],_=M[0]-e[0],p=M[1]-e[1],l=Math.pow(o*o+T*T,.25),t=Math.pow(_*_+p*p,.25),i=(t*t*o-l*l*_)*k,r=(t*t*T-l*l*p)*k,n=t*(l+t)*3,a=l*(l+t)*3;return[[e[0]+(n&&i/n),e[1]+(n&&r/n)],[e[0]-(a&&i/a),e[1]-(a&&r/a)]]}},60776:function(ne,F,e){"use strict";var M=e(3400).isArrayOrTypedArray;ne.exports=function(k,o,T){var _,p,l,t,i,r,n=[],a=M(k)?k.length:k,s=M(o)?o.length:o,u=M(k)?k:null,f=M(o)?o:null;u&&(l=(u.length-1)/(u[u.length-1]-u[0])/(a-1)),f&&(t=(f.length-1)/(f[f.length-1]-f[0])/(s-1));var c=1/0,y=-1/0;for(p=0;p<s;p++)for(n[p]=[],i=f?(f[p]-f[0])*t:p/(s-1),_=0;_<a;_++)r=(u?(u[_]-u[0])*l:_/(a-1))-i*T,c=Math.min(r,c),y=Math.max(r,y),n[p][_]=r;var d=1/(y-c),m=-c*d;for(p=0;p<s;p++)for(_=0;_<a;_++)n[p][_]=d*n[p][_]+m;return n}},30180:function(ne,F,e){"use strict";var M=e(62284),k=e(3400).ensureArray;function o(T,_,p){return[(2*(-.5*p[0]+1.5*_[0])+T[0])/3,(2*(-.5*p[1]+1.5*_[1])+T[1])/3]}ne.exports=function(T,_,p,l,t,i){var r,n,a,s,u,f,c,y,d,m,g=p[0].length,x=p.length,v=t?3*g-2:g,b=i?3*x-2:x;for(T=k(T,b),_=k(_,b),a=0;a<b;a++)T[a]=k(T[a],v),_[a]=k(_[a],v);for(n=0,s=0;n<x;n++,s+=i?3:1)for(u=T[s],f=_[s],c=p[n],y=l[n],r=0,a=0;r<g;r++,a+=t?3:1)u[a]=c[r],f[a]=y[r];if(t)for(n=0,s=0;n<x;n++,s+=i?3:1){for(r=1,a=3;r<g-1;r++,a+=3)d=M([p[n][r-1],l[n][r-1]],[p[n][r],l[n][r]],[p[n][r+1],l[n][r+1]],t),T[s][a-1]=d[0][0],_[s][a-1]=d[0][1],T[s][a+1]=d[1][0],_[s][a+1]=d[1][1];m=o([T[s][0],_[s][0]],[T[s][2],_[s][2]],[T[s][3],_[s][3]]),T[s][1]=m[0],_[s][1]=m[1],m=o([T[s][v-1],_[s][v-1]],[T[s][v-3],_[s][v-3]],[T[s][v-4],_[s][v-4]]),T[s][v-2]=m[0],_[s][v-2]=m[1]}if(i)for(a=0;a<v;a++){for(s=3;s<b-3;s+=3)d=M([T[s-3][a],_[s-3][a]],[T[s][a],_[s][a]],[T[s+3][a],_[s+3][a]],i),T[s-1][a]=d[0][0],_[s-1][a]=d[0][1],T[s+1][a]=d[1][0],_[s+1][a]=d[1][1];m=o([T[0][a],_[0][a]],[T[2][a],_[2][a]],[T[3][a],_[3][a]]),T[1][a]=m[0],_[1][a]=m[1],m=o([T[b-1][a],_[b-1][a]],[T[b-3][a],_[b-3][a]],[T[b-4][a],_[b-4][a]]),T[b-2][a]=m[0],_[b-2][a]=m[1]}if(t&&i)for(s=1;s<b;s+=(s+1)%3==0?2:1){for(a=3;a<v-3;a+=3)d=M([T[s][a-3],_[s][a-3]],[T[s][a],_[s][a]],[T[s][a+3],_[s][a+3]],t),T[s][a-1]=.5*(T[s][a-1]+d[0][0]),_[s][a-1]=.5*(_[s][a-1]+d[0][1]),T[s][a+1]=.5*(T[s][a+1]+d[1][0]),_[s][a+1]=.5*(_[s][a+1]+d[1][1]);m=o([T[s][0],_[s][0]],[T[s][2],_[s][2]],[T[s][3],_[s][3]]),T[s][1]=.5*(T[s][1]+m[0]),_[s][1]=.5*(_[s][1]+m[1]),m=o([T[s][v-1],_[s][v-1]],[T[s][v-3],_[s][v-3]],[T[s][v-4],_[s][v-4]]),T[s][v-2]=.5*(T[s][v-2]+m[0]),_[s][v-2]=.5*(_[s][v-2]+m[1])}return[T,_]}},24588:function(ne){"use strict";ne.exports={RELATIVE_CULL_TOLERANCE:1e-6}},26435:function(ne){"use strict";ne.exports=function(F,e,M){return e&&M?function(k,o,T,_,p){var l,n,a;k||(k=[]),o*=3,T*=3;var s=_*_,u=1-_,f=u*u,c=u*_*2,y=-3*f,d=3*(f-c),m=3*(c-s),g=3*s,x=p*p,v=x*p,b=1-p,h=b*b,S=h*b;for(a=0;a<F.length;a++)l=y*(n=F[a])[T][o]+d*n[T][o+1]+m*n[T][o+2]+g*n[T][o+3],k[a]=S*l+3*(h*p*(y*n[T+1][o]+d*n[T+1][o+1]+m*n[T+1][o+2]+g*n[T+1][o+3])+b*x*(y*n[T+2][o]+d*n[T+2][o+1]+m*n[T+2][o+2]+g*n[T+2][o+3]))+v*(y*n[T+3][o]+d*n[T+3][o+1]+m*n[T+3][o+2]+g*n[T+3][o+3]);return k}:e?function(k,o,T,_,p){var l,i,r;k||(k=[]),o*=3;var n=_*_,a=1-_,s=a*a,u=a*_*2,f=-3*s,c=3*(s-u),y=3*(u-n),d=3*n,m=1-p;for(i=0;i<F.length;i++)l=f*(r=F[i])[T][o]+c*r[T][o+1]+y*r[T][o+2]+d*r[T][o+3],k[i]=m*l+p*(f*r[T+1][o]+c*r[T+1][o+1]+y*r[T+1][o+2]+d*r[T+1][o+3]);return k}:M?function(k,o,T,_,p){var l,n,a;k||(k=[]),T*=3;var s=p*p,u=s*p,f=1-p,c=f*f,y=c*f;for(n=0;n<F.length;n++)l=(a=F[n])[T][o+1]-a[T][o],k[n]=y*l+3*(c*p*(a[T+1][o+1]-a[T+1][o])+f*s*(a[T+2][o+1]-a[T+2][o]))+u*(a[T+3][o+1]-a[T+3][o]);return k}:function(k,o,T,_,p){var l,i,r;k||(k=[]);var n=1-p;for(i=0;i<F.length;i++)l=(r=F[i])[T][o+1]-r[T][o],k[i]=n*l+p*(r[T+1][o+1]-r[T+1][o]);return k}}},24464:function(ne){"use strict";ne.exports=function(F,e,M){return e&&M?function(k,o,T,_,p){var l,n,a;k||(k=[]),o*=3,T*=3;var s=_*_,u=s*_,f=1-_,c=f*f,y=c*f,d=p*p,m=1-p,g=m*m,x=m*p*2,v=-3*g,b=3*(g-x),h=3*(x-d),S=3*d;for(a=0;a<F.length;a++)l=v*(n=F[a])[T][o]+b*n[T+1][o]+h*n[T+2][o]+S*n[T+3][o],k[a]=y*l+3*(c*_*(v*n[T][o+1]+b*n[T+1][o+1]+h*n[T+2][o+1]+S*n[T+3][o+1])+f*s*(v*n[T][o+2]+b*n[T+1][o+2]+h*n[T+2][o+2]+S*n[T+3][o+2]))+u*(v*n[T][o+3]+b*n[T+1][o+3]+h*n[T+2][o+3]+S*n[T+3][o+3]);return k}:e?function(k,o,T,_,p){var l,n,a;k||(k=[]),o*=3;var s=p*p,u=s*p,f=1-p,c=f*f,y=c*f;for(n=0;n<F.length;n++)l=(a=F[n])[T+1][o]-a[T][o],k[n]=y*l+3*(c*p*(a[T+1][o+1]-a[T][o+1])+f*s*(a[T+1][o+2]-a[T][o+2]))+u*(a[T+1][o+3]-a[T][o+3]);return k}:M?function(k,o,T,_,p){var l,i,r;k||(k=[]),T*=3;var n=1-_,a=p*p,s=1-p,u=s*s,f=s*p*2,c=-3*u,y=3*(u-f),d=3*(f-a),m=3*a;for(i=0;i<F.length;i++)l=c*(r=F[i])[T][o]+y*r[T+1][o]+d*r[T+2][o]+m*r[T+3][o],k[i]=n*l+_*(c*r[T][o+1]+y*r[T+1][o+1]+d*r[T+2][o+1]+m*r[T+3][o+1]);return k}:function(k,o,T,_,p){var l,i,r;k||(k=[]);var n=1-_;for(i=0;i<F.length;i++)l=(r=F[i])[T+1][o]-r[T][o],k[i]=n*l+_*(r[T+1][o+1]-r[T][o+1]);return k}}},29056:function(ne){"use strict";ne.exports=function(F,e,M,k,o){var T=e-2,_=M-2;return k&&o?function(p,l,t){var i,s,u;p||(p=[]);var f=Math.max(0,Math.min(Math.floor(l),T)),c=Math.max(0,Math.min(Math.floor(t),_)),y=Math.max(0,Math.min(1,l-f)),d=Math.max(0,Math.min(1,t-c));f*=3,c*=3;var m=y*y,g=m*y,x=1-y,v=x*x,b=v*x,h=d*d,S=h*d,w=1-d,E=w*w,P=E*w;for(u=0;u<F.length;u++)i=b*(s=F[u])[c][f]+3*(v*y*s[c][f+1]+x*m*s[c][f+2])+g*s[c][f+3],p[u]=P*i+3*(E*d*(b*s[c+1][f]+3*(v*y*s[c+1][f+1]+x*m*s[c+1][f+2])+g*s[c+1][f+3])+w*h*(b*s[c+2][f]+3*(v*y*s[c+2][f+1]+x*m*s[c+2][f+2])+g*s[c+2][f+3]))+S*(b*s[c+3][f]+3*(v*y*s[c+3][f+1]+x*m*s[c+3][f+2])+g*s[c+3][f+3]);return p}:k?function(p,l,t){p||(p=[]);var i,s,u,f=Math.max(0,Math.min(Math.floor(l),T)),c=Math.max(0,Math.min(Math.floor(t),_)),y=Math.max(0,Math.min(1,l-f)),d=Math.max(0,Math.min(1,t-c));f*=3;var m=y*y,g=m*y,x=1-y,v=x*x,b=v*x,h=1-d;for(s=0;s<F.length;s++)i=h*(u=F[s])[c][f]+d*u[c+1][f],p[s]=b*i+3*(v*y*(h*u[c][f+1]+d*u[c+1][f+1])+x*m*(h*u[c][f+2]+d*u[c+1][f+1]))+g*(h*u[c][f+3]+d*u[c+1][f+1]);return p}:o?function(p,l,t){p||(p=[]);var i,s,u,f=Math.max(0,Math.min(Math.floor(l),T)),c=Math.max(0,Math.min(Math.floor(t),_)),y=Math.max(0,Math.min(1,l-f)),d=Math.max(0,Math.min(1,t-c));c*=3;var m=d*d,g=m*d,x=1-d,v=x*x,b=v*x,h=1-y;for(s=0;s<F.length;s++)i=h*(u=F[s])[c][f]+y*u[c][f+1],p[s]=b*i+3*(v*d*(h*u[c+1][f]+y*u[c+1][f+1])+x*m*(h*u[c+2][f]+y*u[c+2][f+1]))+g*(h*u[c+3][f]+y*u[c+3][f+1]);return p}:function(p,l,t){p||(p=[]);var i,n,a,s=Math.max(0,Math.min(Math.floor(l),T)),u=Math.max(0,Math.min(Math.floor(t),_)),f=Math.max(0,Math.min(1,l-s)),c=Math.max(0,Math.min(1,t-u)),y=1-c,d=1-f;for(n=0;n<F.length;n++)i=d*(a=F[n])[u][s]+f*a[u][s+1],p[n]=y*i+c*(d*a[u+1][s]+f*a[u+1][s+1]);return p}}},38356:function(ne,F,e){"use strict";var M=e(3400),k=e(86411),o=e(93504),T=e(85720),_=e(22548);ne.exports=function(p,l,t,i){function r(a,s){return M.coerce(p,l,T,a,s)}l._clipPathId="clip"+l.uid+"carpet";var n=r("color",_.defaultLine);M.coerceFont(r,"font",i.font),r("carpet"),o(p,l,i,r,n),l.a&&l.b?(l.a.length<3&&(l.aaxis.smoothing=0),l.b.length<3&&(l.baxis.smoothing=0),k(p,l,r)||(l.visible=!1),l._cheater&&r("cheaterslope"),r("zorder")):l.visible=!1}},95856:function(ne,F,e){"use strict";ne.exports={attributes:e(85720),supplyDefaults:e(38356),plot:e(164),calc:e(58744),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:e(57952),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},50948:function(ne){"use strict";ne.exports=function(F,e){for(var M,k=F._fullData.length,o=0;o<k;o++){var T=F._fullData[o];if(T.index!==e.index&&"carpet"===T.type&&(M||(M=T),T.carpet===e.carpet))return T}return M}},53416:function(ne){"use strict";ne.exports=function(F,e,M){if(0===F.length)return"";var k,o=[],T=M?3:1;for(k=0;k<F.length;k+=T)o.push(F[k]+","+e[k]),M&&k<F.length-T&&(o.push("C"),o.push([F[k+1]+","+e[k+1],F[k+2]+","+e[k+2]+" "].join(" ")));return o.join(M?"":"L")}},87072:function(ne,F,e){"use strict";var M=e(3400).isArrayOrTypedArray;ne.exports=function(k,o,T){var _;for(M(k)?k.length>o.length&&(k=k.slice(0,o.length)):k=[],_=0;_<o.length;_++)k[_]=T(o[_]);return k}},15584:function(ne){"use strict";ne.exports=function(F,e,M,k,o,T){var _=o[0]*F.dpdx(e),p=o[1]*F.dpdy(M),l=1,t=1;if(T){var i=Math.sqrt(o[0]*o[0]+o[1]*o[1]),r=Math.sqrt(T[0]*T[0]+T[1]*T[1]);t=Math.max(0,(o[0]*T[0]+o[1]*T[1])/i/r)}var a=180*Math.atan2(p,_)/Math.PI;return a<-90?(a+=180,l=-l):a>90&&(a-=180,l=-l),{angle:a,flip:l,p:F.c2p(k,e,M),offsetMultplier:t}}},164:function(ne,F,e){"use strict";var M=e(33428),k=e(43616),o=e(87072),T=e(53416),_=e(15584),p=e(72736),l=e(3400),t=l.strRotate,i=l.strTranslate,r=e(84284);function n(c,y,d,m,g,x,v){var b="const-"+g+"-lines",h=d.selectAll("."+b).data(x);h.enter().append("path").classed(b,!0).style("vector-effect",v?"none":"non-scaling-stroke"),h.each(function(S){var w=S,P=w.y,I=o([],w.x,c.c2p),O=o([],P,y.c2p),z="M"+T(I,O,w.smoothing);M.select(this).attr("d",z).style("stroke-width",w.width).style("stroke",w.color).style("stroke-dasharray",k.dashStyle(w.dash,w.width)).style("fill","none")}),h.exit().remove()}function a(c,y,d,m,g,x,v,b){var h=x.selectAll("text."+b).data(v);h.enter().append("text").classed(b,!0);var S=0,w={};return h.each(function(E,P){var I;if("auto"===E.axis.tickangle)I=_(m,y,d,E.xy,E.dxy);else{var O=(E.axis.tickangle+180)*Math.PI/180;I=_(m,y,d,E.xy,[Math.cos(O),Math.sin(O)])}P||(w={angle:I.angle,flip:I.flip});var z=(E.endAnchor?-1:1)*I.flip,U=M.select(this).attr({"text-anchor":z>0?"start":"end","data-notex":1}).call(k.font,E.font).text(E.text).call(p.convertToTspans,c),R=k.bBox(this);U.attr("transform",i(I.p[0],I.p[1])+t(I.angle)+i(E.axis.labelpadding*z,.3*R.height)),S=Math.max(S,R.width+E.axis.labelpadding)}),h.exit().remove(),w.maxExtent=S,w}ne.exports=function(c,y,d,m){var g=c._context.staticPlot,x=y.xaxis,v=y.yaxis,b=c._fullLayout._clips;l.makeTraceGroups(m,d,"trace").each(function(h){var S=M.select(this),w=h[0],E=w.trace,P=E.aaxis,I=E.baxis,O=l.ensureSingle(S,"g","minorlayer"),z=l.ensureSingle(S,"g","majorlayer"),U=l.ensureSingle(S,"g","boundarylayer"),R=l.ensureSingle(S,"g","labellayer");S.style("opacity",E.opacity),n(x,v,z,0,"a",P._gridlines,!0),n(x,v,z,0,"b",I._gridlines,!0),n(x,v,O,0,"a",P._minorgridlines,!0),n(x,v,O,0,"b",I._minorgridlines,!0),n(x,v,U,0,"a-boundary",P._boundarylines,g),n(x,v,U,0,"b-boundary",I._boundarylines,g);var B,V,q,te,ee,$,J,X,ae,ce,le,pe,we,Te,ye,j=a(c,x,v,E,0,R,P._labels,"a-label"),Y=a(c,x,v,E,0,R,I._labels,"b-label");B=c,V=R,q=E,te=x,ee=v,$=j,J=Y,pe=l.aggNums(Math.min,null,q.a),we=l.aggNums(Math.max,null,q.a),Te=l.aggNums(Math.min,null,q.b),ye=l.aggNums(Math.max,null,q.b),ce=q.ab2xy(X=.5*(pe+we),ae=Te,!0),le=q.dxyda_rough(X,ae),void 0===$.angle&&l.extendFlat($,_(q,te,ee,ce,q.dxydb_rough(X,ae))),f(B,V,q,0,ce,le,q.aaxis,te,ee,$,"a-title"),ce=q.ab2xy(X=pe,ae=.5*(Te+ye),!0),le=q.dxydb_rough(X,ae),void 0===J.angle&&l.extendFlat(J,_(q,te,ee,ce,q.dxyda_rough(X,ae))),f(B,V,q,0,ce,le,q.baxis,te,ee,J,"b-title"),function(B,V,q,ie,te){var ee,$,J,X,ae=q.select("#"+B._clipPathId);ae.size()||(ae=q.append("clipPath").classed("carpetclip",!0));var ce=l.ensureSingle(ae,"path","carpetboundary"),le=V.clipsegments,pe=[];for(X=0;X<le.length;X++)$=o([],(ee=le[X]).x,ie.c2p),J=o([],ee.y,te.c2p),pe.push(T($,J,ee.bicubic));var we="M"+pe.join("L")+"Z";ae.attr("id",B._clipPathId),ce.attr("d",we)}(E,w,b,x,v)})};var s=r.LINE_SPACING,u=(1-r.MID_SHIFT)/s+1;function f(c,y,d,m,g,x,v,b,h,S,w){var E=[];v.title.text&&E.push(v.title.text);var P=y.selectAll("text."+w).data(E),I=S.maxExtent;P.enter().append("text").classed(w,!0),P.each(function(){var O=_(d,b,h,g,x);-1===["start","both"].indexOf(v.showticklabels)&&(I=0);var z=v.title.font.size;I+=z+v.title.offset;var U=(S.angle+(S.flip<0?180:0)-O.angle+450)%360,R=U>90&&U<270,j=M.select(this);j.text(v.title.text).call(p.convertToTspans,c),R&&(I=(-p.lineCount(j)+u)*s*z-I),j.attr("transform",i(O.p[0],O.p[1])+t(O.angle)+i(0,I)).attr("text-anchor","middle").call(k.font,v.title.font)}),P.exit().remove()}},81e3:function(ne,F,e){"use strict";var M=e(24588),k=e(14952).findBin,o=e(30180),T=e(29056),_=e(26435),p=e(24464);ne.exports=function(l){var t=l._a,i=l._b,r=t.length,n=i.length,a=l.aaxis,s=l.baxis,u=t[0],f=t[r-1],c=i[0],y=i[n-1],d=t[t.length-1]-t[0],m=i[i.length-1]-i[0],g=d*M.RELATIVE_CULL_TOLERANCE,x=m*M.RELATIVE_CULL_TOLERANCE;u-=g,f+=g,c-=x,y+=x,l.isVisible=function(v,b){return v>u&&v<f&&b>c&&b<y},l.isOccluded=function(v,b){return v<u||v>f||b<c||b>y},l.setScale=function(){var h=o(l._xctrl,l._yctrl,l._x,l._y,a.smoothing,s.smoothing);l._xctrl=h[0],l._yctrl=h[1],l.evalxy=T([l._xctrl,l._yctrl],r,n,a.smoothing,s.smoothing),l.dxydi=_([l._xctrl,l._yctrl],a.smoothing,s.smoothing),l.dxydj=p([l._xctrl,l._yctrl],a.smoothing,s.smoothing)},l.i2a=function(v){var b=Math.max(0,Math.floor(v[0]),r-2),h=v[0]-b;return(1-h)*t[b]+h*t[b+1]},l.j2b=function(v){var b=Math.max(0,Math.floor(v[1]),r-2),h=v[1]-b;return(1-h)*i[b]+h*i[b+1]},l.ij2ab=function(v){return[l.i2a(v[0]),l.j2b(v[1])]},l.a2i=function(v){var b=Math.max(0,Math.min(k(v,t),r-2)),h=t[b];return Math.max(0,Math.min(r-1,b+(v-h)/(t[b+1]-h)))},l.b2j=function(v){var b=Math.max(0,Math.min(k(v,i),n-2)),h=i[b];return Math.max(0,Math.min(n-1,b+(v-h)/(i[b+1]-h)))},l.ab2ij=function(v){return[l.a2i(v[0]),l.b2j(v[1])]},l.i2c=function(v,b){return l.evalxy([],v,b)},l.ab2xy=function(v,b,h){if(!h&&(v<t[0]||v>t[r-1]|b<i[0]||b>i[n-1]))return[!1,!1];var S=l.a2i(v),w=l.b2j(b),E=l.evalxy([],S,w);if(h){var P,I,O,z,U=0,R=0,j=[];v<t[0]?(P=0,I=0,U=(v-t[0])/(t[1]-t[0])):v>t[r-1]?(P=r-2,I=1,U=(v-t[r-1])/(t[r-1]-t[r-2])):I=S-(P=Math.max(0,Math.min(r-2,Math.floor(S)))),b<i[0]?(O=0,z=0,R=(b-i[0])/(i[1]-i[0])):b>i[n-1]?(O=n-2,z=1,R=(b-i[n-1])/(i[n-1]-i[n-2])):z=w-(O=Math.max(0,Math.min(n-2,Math.floor(w)))),U&&(l.dxydi(j,P,O,I,z),E[0]+=j[0]*U,E[1]+=j[1]*U),R&&(l.dxydj(j,P,O,I,z),E[0]+=j[0]*R,E[1]+=j[1]*R)}return E},l.c2p=function(v,b,h){return[b.c2p(v[0]),h.c2p(v[1])]},l.p2x=function(v,b,h){return[b.p2c(v[0]),h.p2c(v[1])]},l.dadi=function(v){var b=Math.max(0,Math.min(t.length-2,v));return t[b+1]-t[b]},l.dbdj=function(v){var b=Math.max(0,Math.min(i.length-2,v));return i[b+1]-i[b]},l.dxyda=function(v,b,h,S){var w=l.dxydi(null,v,b,h,S),E=l.dadi(v,h);return[w[0]/E,w[1]/E]},l.dxydb=function(v,b,h,S){var w=l.dxydj(null,v,b,h,S),E=l.dbdj(b,S);return[w[0]/E,w[1]/E]},l.dxyda_rough=function(v,b,h){var S=d*(h||.1),w=l.ab2xy(v+S,b,!0),E=l.ab2xy(v-S,b,!0);return[.5*(w[0]-E[0])/S,.5*(w[1]-E[1])/S]},l.dxydb_rough=function(v,b,h){var S=m*(h||.1),w=l.ab2xy(v,b+S,!0),E=l.ab2xy(v,b-S,!0);return[.5*(w[0]-E[0])/S,.5*(w[1]-E[1])/S]},l.dpdx=function(v){return v._m},l.dpdy=function(v){return v._m}}},51512:function(ne,F,e){"use strict";var M=e(3400);ne.exports=function(k,o,T){var _,p,l,t=[],i=[],r=k[0].length,n=k.length;var s,u,f,c,y,d,m,g,x,v,B,V,q,ie,te,h=0;for(_=0;_<r;_++)for(p=0;p<n;p++)void 0===k[p][_]&&(t.push(_),i.push(p),k[p][_]=(V=p,q=void 0,ie=void 0,te=void 0,ie=0,te=0,(B=_)>0&&void 0!==(q=k[V][B-1])&&(te++,ie+=q),B<r-1&&void 0!==(q=k[V][B+1])&&(te++,ie+=q),V>0&&void 0!==(q=k[V-1][B])&&(te++,ie+=q),V<n-1&&void 0!==(q=k[V+1][B])&&(te++,ie+=q),ie/Math.max(1,te))),h=Math.max(h,Math.abs(k[p][_]));if(!t.length)return k;var S=0,w=0,E=t.length;do{for(S=0,l=0;l<E;l++){p=i[l];var I,O,z,U,R,j=0,Y=0;0===(_=t[l])?(O=o[U=Math.min(r-1,2)],Y+=(I=k[p][1])+(I-k[p][U])*(o[0]-(z=o[1]))/(z-O),j++):_===r-1&&(O=o[U=Math.max(0,r-3)],Y+=(I=k[p][r-2])+(I-k[p][U])*(o[r-1]-(z=o[r-2]))/(z-O),j++),(0===_||_===r-1)&&p>0&&p<n-1&&(Y+=((u=T[p]-T[p-1])*k[p+1][_]+(s=T[p+1]-T[p])*k[p-1][_])/(u+s),j++),0===p?(O=T[R=Math.min(n-1,2)],Y+=(I=k[1][_])+(I-k[R][_])*(T[0]-(z=T[1]))/(z-O),j++):p===n-1&&(O=T[R=Math.max(0,n-3)],Y+=(I=k[n-2][_])+(I-k[R][_])*(T[n-1]-(z=T[n-2]))/(z-O),j++),(0===p||p===n-1)&&_>0&&_<r-1&&(Y+=((u=o[_]-o[_-1])*k[p][_+1]+(s=o[_+1]-o[_])*k[p][_-1])/(u+s),j++),j?Y/=j:(g=(y=T[p+1]-T[p])*(d=T[p]-T[p-1])*(y+d),Y=((m=(f=o[_+1]-o[_])*(c=o[_]-o[_-1])*(f+c))*(d*k[p+1][_]+y*k[p-1][_])+g*(c*k[p][_+1]+f*k[p][_-1]))/(g*(c+f)+m*(d+y))),S+=(v=(x=Y-k[p][_])/h)*v,k[p][_]+=x*(1+(j?0:.85))}S=Math.sqrt(S)}while(w++<100&&S>1e-5);return M.log("Smoother converged to",S,"after",w,"iterations"),k}},86411:function(ne,F,e){"use strict";var M=e(3400).isArray1D;ne.exports=function(k,o,T){var _=T("x"),p=_&&_.length,l=T("y"),t=l&&l.length;if(!p&&!t)return!1;if(o._cheater=!_,p&&!M(_)||t&&!M(l))o._length=null;else{var i=p?_.length:1/0;t&&(i=Math.min(i,l.length)),o.a&&o.a.length&&(i=Math.min(i,o.a.length)),o.b&&o.b.length&&(i=Math.min(i,o.b.length)),o._length=i}return!0}},83372:function(ne,F,e){"use strict";var M=e(21776).Ks,k=e(6096),o=e(49084),T=e(45464),_=e(22548).defaultLine,p=e(92880).extendFlat,l=k.marker.line;ne.exports=p({locations:{valType:"data_array",editType:"calc"},locationmode:k.locationmode,z:{valType:"data_array",editType:"calc"},geojson:p({},k.geojson,{}),featureidkey:k.featureidkey,text:p({},k.text,{}),hovertext:p({},k.hovertext,{}),marker:{line:{color:p({},l.color,{dflt:_}),width:p({},l.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:k.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:k.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:p({},T.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:M(),showlegend:p({},T.showlegend,{dflt:!1})},o("",{cLetter:"z",editTypeOverride:"calc"}))},7924:function(ne,F,e){"use strict";var M=e(38248),k=e(39032).BADNUM,o=e(47128),T=e(20148),_=e(4500);function p(l){return l&&"string"==typeof l}ne.exports=function(l,t){var i,r=t._length,n=new Array(r);i=t.geojson?function(c){return p(c)||M(c)}:p;for(var a=0;a<r;a++){var s=n[a]={},u=t.locations[a],f=t.z[a];i(u)&&M(f)?(s.loc=u,s.z=f):(s.loc=null,s.z=k),s.index=a}return T(n,t),o(l,t,{vals:t.z,containerStr:"",cLetter:"z"}),_(n,t),n}},30972:function(ne,F,e){"use strict";var M=e(3400),k=e(27260),o=e(83372);ne.exports=function(T,_,p,l){function t(s,u){return M.coerce(T,_,o,s,u)}var i=t("locations"),r=t("z");if(i&&i.length&&M.isArrayOrTypedArray(r)&&r.length){_._length=Math.min(i.length,r.length);var n,a=t("geojson");("string"==typeof a&&""!==a||M.isPlainObject(a))&&(n="geojson-id"),"geojson-id"===t("locationmode",n)&&t("featureidkey"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),k(T,_,l,t,{prefix:"",cLetter:"z"}),M.coerceSelectionMarkerOpacity(_,t)}else _.visible=!1}},52428:function(ne){"use strict";ne.exports=function(F,e,M,k,o){F.location=e.location,F.z=e.z;var T=k[o];return T.fIn&&T.fIn.properties&&(F.properties=T.fIn.properties),F.ct=T.ct,F}},69224:function(ne,F,e){"use strict";var M=e(54460),k=e(83372),o=e(3400).fillText;ne.exports=function(T,_,p){var l,t,i,r,n=T.cd,a=n[0].trace,s=T.subplot,u=[_,p],f=[_+360,p];for(t=0;t<n.length;t++)if(r=!1,(l=n[t])._polygons){for(i=0;i<l._polygons.length;i++)l._polygons[i].contains(u)&&(r=!r),l._polygons[i].contains(f)&&(r=!r);if(r)break}if(r&&l)return T.x0=T.x1=T.xa.c2p(l.ct),T.y0=T.y1=T.ya.c2p(l.ct),T.index=l.index,T.location=l.loc,T.z=l.z,T.zLabel=M.tickText(s.mockAxis,s.mockAxis.c2l(l.z),"hover").text,T.hovertemplate=l.hovertemplate,function(c,y,d){if(!y.hovertemplate){var m=d.hi||y.hoverinfo,g=String(d.loc),x="all"===m?k.hoverinfo.flags:m.split("+"),v=-1!==x.indexOf("name"),b=-1!==x.indexOf("location"),h=-1!==x.indexOf("z"),S=-1!==x.indexOf("text"),w=[];!v&&b?c.nameOverride=g:(v&&(c.nameOverride=y.name),b&&w.push(g)),h&&w.push(c.zLabel),S&&o(d,y,w),c.extraText=w.join("<br>")}}(T,a,l),[T]}},54272:function(ne,F,e){"use strict";ne.exports={attributes:e(83372),supplyDefaults:e(30972),colorbar:e(96288),calc:e(7924),calcGeoJSON:e(88364).calcGeoJSON,plot:e(88364).plot,style:e(7947).style,styleOnSelect:e(7947).styleOnSelect,hoverPoints:e(69224),eventData:e(52428),selectPoints:e(17328),moduleType:"trace",name:"choropleth",basePlotModule:e(10816),categories:["geo","noOpacity","showLegend"],meta:{}}},88364:function(ne,F,e){"use strict";var M=e(33428),k=e(3400),o=e(27144),T=e(59972).getTopojsonFeatures,_=e(19280).findExtremes,p=e(7947).style;ne.exports={calcGeoJSON:function(l,t){for(var i=l[0].trace,r=t[i.geo],n=r._subplot,a=i.locationmode,s=i._length,u="geojson-id"===a?o.extractTraceFeature(l):T(i,n.topojson),f=[],c=[],y=0;y<s;y++){var d=l[y],m="geojson-id"===a?d.fOut:o.locationToFeature(a,d.loc,u);if(m){d.geojson=m,d.ct=m.properties.ct,d._polygons=o.feature2polygons(m);var g=o.computeBbox(m);f.push(g[0],g[2]),c.push(g[1],g[3])}else d.geojson=null}if("geojson"===r.fitbounds&&"geojson-id"===a){var x=o.computeBbox(o.getTraceGeojson(i));f=[x[0],x[2]],c=[x[1],x[3]]}var v={padded:!0};i._extremes.lon=_(r.lonaxis._ax,f,v),i._extremes.lat=_(r.lataxis._ax,c,v)},plot:function(l,t,i){var r=t.layers.backplot.select(".choroplethlayer");k.makeTraceGroups(r,i,"trace choropleth").each(function(n){var a=M.select(this).selectAll("path.choroplethlocation").data(k.identity);a.enter().append("path").classed("choroplethlocation",!0),a.exit().remove(),p(l,n)})}}},17328:function(ne){"use strict";ne.exports=function(F,e){var M,k,o,T,_,p=F.cd,l=F.xaxis,t=F.yaxis,i=[];if(!1===e)for(M=0;M<p.length;M++)p[M].selected=0;else for(M=0;M<p.length;M++)(o=(k=p[M]).ct)&&(T=l.c2p(o),_=t.c2p(o),e.contains([T,_],null,M,F)?(i.push({pointNumber:M,lon:o[0],lat:o[1]}),k.selected=1):k.selected=0);return i}},7947:function(ne,F,e){"use strict";var M=e(33428),k=e(76308),o=e(43616),T=e(8932);function _(p,l){var t=l[0].trace,i=l[0].node3.selectAll(".choroplethlocation"),r=t.marker||{},n=r.line||{},a=T.makeColorScaleFuncFromTrace(t);i.each(function(s){M.select(this).attr("fill",a(s.z)).call(k.stroke,s.mlc||n.color).call(o.dashLine,"",s.mlw||n.width||0).style("opacity",r.opacity)}),o.selectedPointStyle(i,t)}ne.exports={style:function(p,l){l&&_(0,l)},styleOnSelect:function(p,l){var i=l[0].trace;i.selectedpoints?o.selectedPointStyle(l[0].node3.selectAll(".choroplethlocation"),i):_(0,l)}}},45608:function(ne,F,e){"use strict";var M=e(83372),k=e(49084),o=e(21776).Ks,T=e(45464),_=e(92880).extendFlat;ne.exports=_({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:_({},M.featureidkey,{}),below:{valType:"string",editType:"plot"},text:M.text,hovertext:M.hovertext,marker:{line:{color:_({},M.marker.line.color,{editType:"plot"}),width:_({},M.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:_({},M.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:_({},M.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:_({},M.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:M.hoverinfo,hovertemplate:o({},{keys:["properties"]}),showlegend:_({},T.showlegend,{dflt:!1})},k("",{cLetter:"z",editTypeOverride:"calc"}))},13504:function(ne,F,e){"use strict";var M=e(38248),k=e(3400),o=e(8932),T=e(43616),_=e(44808).makeBlank,p=e(27144);function l(t){var i,r=t[0].trace,n=r._opts;if(r.selectedpoints){for(var a=T.makeSelectedPointStyleFns(r),s=0;s<t.length;s++){var u=t[s];u.fOut&&(u.fOut.properties.mo2=a.selectedOpacityFn(u))}i={type:"identity",property:"mo2"}}else i=k.isArrayOrTypedArray(r.marker.opacity)?{type:"identity",property:"mo"}:r.marker.opacity;return k.extendFlat(n.fill.paint,{"fill-opacity":i}),k.extendFlat(n.line.paint,{"line-opacity":i}),n}ne.exports={convert:function(t){var i=t[0].trace,r=!0===i.visible&&0!==i._length,n={layout:{visibility:"none"},paint:{}},a={layout:{visibility:"none"},paint:{}},s=i._opts={fill:n,line:a,geojson:_()};if(!r)return s;var u=p.extractTraceFeature(t);if(!u)return s;var f,c,y,d=o.makeColorScaleFuncFromTrace(i),m=i.marker,g=m.line||{};k.isArrayOrTypedArray(m.opacity)&&(f=function(w){var E=w.mo;return M(E)?+k.constrain(E,0,1):0}),k.isArrayOrTypedArray(g.color)&&(c=function(w){return w.mlc}),k.isArrayOrTypedArray(g.width)&&(y=function(w){return w.mlw});for(var x=0;x<t.length;x++){var v=t[x],b=v.fOut;if(b){var h=b.properties;h.fc=d(v.z),f&&(h.mo=f(v)),c&&(h.mlc=c(v)),y&&(h.mlw=y(v)),v.ct=h.ct,v._polygons=p.feature2polygons(b)}}var S=f?{type:"identity",property:"mo"}:m.opacity;return k.extendFlat(n.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":S}),k.extendFlat(a.paint,{"line-color":c?{type:"identity",property:"mlc"}:g.color,"line-width":y?{type:"identity",property:"mlw"}:g.width,"line-opacity":S}),n.layout.visibility="visible",a.layout.visibility="visible",s.geojson={type:"FeatureCollection",features:u},l(t),s},convertOnSelect:l}},9352:function(ne,F,e){"use strict";var M=e(3400),k=e(27260),o=e(45608);ne.exports=function(T,_,p,l){function t(a,s){return M.coerce(T,_,o,a,s)}var i=t("locations"),r=t("z"),n=t("geojson");M.isArrayOrTypedArray(i)&&i.length&&M.isArrayOrTypedArray(r)&&r.length&&("string"==typeof n&&""!==n||M.isPlainObject(n))?(t("featureidkey"),_._length=Math.min(i.length,r.length),t("below"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),k(T,_,l,t,{prefix:"",cLetter:"z"}),M.coerceSelectionMarkerOpacity(_,t)):_.visible=!1}},85404:function(ne,F,e){"use strict";ne.exports={attributes:e(45608),supplyDefaults:e(9352),colorbar:e(96288),calc:e(7924),plot:e(61288),hoverPoints:e(69224),eventData:e(52428),selectPoints:e(17328),styleOnSelect:function(M,k){k&&k[0].trace._glTrace.updateOnSelect(k)},getBelow:function(M,k){for(var o=k.getMapLayers(),T=o.length-2;T>=0;T--){var _=o[T].id;if("string"==typeof _&&0===_.indexOf("water"))for(var p=T+1;p<o.length;p++)if("string"==typeof(_=o[p].id)&&-1===_.indexOf("plotly-"))return _}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:e(33688),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},61288:function(ne,F,e){"use strict";var M=e(13504).convert,k=e(13504).convertOnSelect,o=e(47552).traceLayerPrefix;function T(p,l){this.type="choroplethmapbox",this.subplot=p,this.uid=l,this.sourceId="source-"+l,this.layerList=[["fill",o+l+"-fill"],["line",o+l+"-line"]],this.below=null}var _=T.prototype;_.update=function(p){this._update(M(p)),p[0].trace._glTrace=this},_.updateOnSelect=function(p){this._update(k(p))},_._update=function(p){var l=this.subplot,t=this.layerList,i=l.belowLookup["trace-"+this.uid];l.map.getSource(this.sourceId).setData(p.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(p,i),this.below=i);for(var r=0;r<t.length;r++){var n=t[r],s=n[1],u=p[n[0]];l.setOptions(s,"setLayoutProperty",u.layout),"visible"===u.layout.visibility&&l.setOptions(s,"setPaintProperty",u.paint)}},_._addLayers=function(p,l){for(var t=this.subplot,i=this.layerList,r=this.sourceId,n=0;n<i.length;n++){var a=i[n],s=a[0],u=p[s];t.addLayer({type:s,id:a[1],source:r,layout:u.layout,paint:u.paint},l)}},_._removeLayers=function(){for(var p=this.subplot.map,l=this.layerList,t=l.length-1;t>=0;t--)p.removeLayer(l[t][1])},_.dispose=function(){var p=this.subplot.map;this._removeLayers(),p.removeSource(this.sourceId)},ne.exports=function(p,l){var t=l[0].trace,i=new T(p,t.uid),r=i.sourceId,n=M(l),a=i.below=p.belowLookup["trace-"+t.uid];return p.map.addSource(r,{type:"geojson",data:n.geojson}),i._addLayers(n,a),l[0].trace._glTrace=i,i}},86040:function(ne,F,e){"use strict";var M=e(49084),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(52948),_=e(45464),p=e(92880).extendFlat,l={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute","raw"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:o({editType:"calc"},{keys:["norm"]}),uhoverformat:k("u",1),vhoverformat:k("v",1),whoverformat:k("w",1),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),showlegend:p({},_.showlegend,{dflt:!1})};p(l,M("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){l[t]=T[t]}),l.hoverinfo=p({},_.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),l.transforms=void 0,ne.exports=l},83344:function(ne,F,e){"use strict";var M=e(47128);ne.exports=function(k,o){for(var T=o.u,_=o.v,p=o.w,l=Math.min(o.x.length,o.y.length,o.z.length,T.length,_.length,p.length),t=-1/0,i=1/0,r=0;r<l;r++){var n=T[r],a=_[r],s=p[r],u=Math.sqrt(n*n+a*a+s*s);t=Math.max(t,u),i=Math.min(i,u)}o._len=l,o._normMax=t,M(k,o,{vals:[i,t],containerStr:"",cLetter:"c"})}},6648:function(ne,F,e){"use strict";var M=e(67792).gl_cone3d,k=e(67792).gl_cone3d.createConeMesh,o=e(3400).simpleMap,T=e(33040).parseColorScale,_=e(8932).extractOpts,p=e(3400).isArrayOrTypedArray,l=e(52094);function t(u,f){this.scene=u,this.uid=f,this.mesh=null,this.data=null}var i=t.prototype;i.handlePick=function(u){if(u.object===this.mesh){var f=u.index=u.data.index,m=this.data.u[f],g=this.data.v[f],x=this.data.w[f];u.traceCoordinate=[this.data.x[f],this.data.y[f],this.data.z[f],m,g,x,Math.sqrt(m*m+g*g+x*x)];var v=this.data.hovertext||this.data.text;return p(v)&&void 0!==v[f]?u.textLabel=v[f]:v&&(u.textLabel=v),!0}};var r={xaxis:0,yaxis:1,zaxis:2},n={tip:1,tail:0,cm:.25,center:.5},a={tip:1,tail:1,cm:.75,center:.5};function s(u,f){var c=u.fullSceneLayout,y=u.dataScale,d={};function m(h,S){var w=c[S],E=y[r[S]];return o(h,function(P){return w.d2l(P)*E})}d.vectors=l(m(f.u,"xaxis"),m(f.v,"yaxis"),m(f.w,"zaxis"),f._len),d.positions=l(m(f.x,"xaxis"),m(f.y,"yaxis"),m(f.z,"zaxis"),f._len);var g=_(f);d.colormap=T(f),d.vertexIntensityBounds=[g.min/f._normMax,g.max/f._normMax],d.coneOffset=n[f.anchor];var x=f.sizemode;"scaled"===x?d.coneSize=f.sizeref||.5:"absolute"===x?d.coneSize=f.sizeref&&f._normMax?f.sizeref/f._normMax:.5:"raw"===x&&(d.coneSize=f.sizeref),d.coneSizemode=x;var v=M(d),b=f.lightposition;return v.lightPosition=[b.x,b.y,b.z],v.ambient=f.lighting.ambient,v.diffuse=f.lighting.diffuse,v.specular=f.lighting.specular,v.roughness=f.lighting.roughness,v.fresnel=f.lighting.fresnel,v.opacity=f.opacity,f._pad=a[f.anchor]*v.vectorScale*v.coneScale*f._normMax,v}i.update=function(u){this.data=u;var f=s(this.scene,u);this.mesh.update(f)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ne.exports=function(u,f){var c=u.glplot.gl,y=s(u,f),d=k(c,y),m=new t(u,f.uid);return m.mesh=d,m.data=f,d._trace=m,u.glplot.add(d),m}},86096:function(ne,F,e){"use strict";var M=e(3400),k=e(27260),o=e(86040);ne.exports=function(T,_,p,l){function t(c,y){return M.coerce(T,_,o,c,y)}var i=t("u"),r=t("v"),n=t("w"),a=t("x"),s=t("y"),u=t("z");if(i&&i.length&&r&&r.length&&n&&n.length&&a&&a.length&&s&&s.length&&u&&u.length){var f=t("sizemode");t("sizeref","raw"===f?1:.5),t("anchor"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),k(T,_,l,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),_._length=null}else _.visible=!1}},26048:function(ne,F,e){"use strict";ne.exports={moduleType:"trace",name:"cone",basePlotModule:e(12536),categories:["gl3d","showLegend"],attributes:e(86040),supplyDefaults:e(86096),colorbar:{min:"cmin",max:"cmax"},calc:e(83344),plot:e(6648),eventData:function(M,k){return M.norm=k.traceCoordinate[6],M},meta:{}}},67104:function(ne,F,e){"use strict";var M=e(83328),k=e(52904),o=e(29736),T=o.axisHoverFormat,_=o.descriptionOnlyNumbers,p=e(49084),l=e(98192).u,t=e(25376),i=e(92880).extendFlat,r=e(69104),n=r.COMPARISON_OPS2,a=r.INTERVAL_OPS,s=k.line;ne.exports=i({z:M.z,x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,text:M.text,hovertext:M.hovertext,transpose:M.transpose,xtype:M.xtype,ytype:M.ytype,xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:M.hovertemplate,texttemplate:i({},M.texttemplate,{}),textfont:i({},M.textfont,{}),hoverongaps:M.hoverongaps,connectgaps:i({},M.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:t({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:_("contour label")},operation:{valType:"enumerated",values:[].concat(n).concat(a),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:i({},s.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:l,smoothing:i({},s.smoothing,{}),editType:"plot"},zorder:k.zorder},p("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},20688:function(ne,F,e){"use strict";var M=e(8932),k=e(19512),o=e(54444),T=e(46960);ne.exports=function(_,p){var l=k(_,p),t=l[0].z;o(p,t);var i,r=p.contours,n=M.extractOpts(p);if("heatmap"===r.coloring&&n.auto&&!1===p.autocontour){var a=r.start,s=T(r),u=r.size||1,f=Math.floor((s-a)/u)+1;isFinite(u)||(u=1,f=1);var c=a-u/2;i=[c,c+f*u]}else i=t;return M.calc(_,p,{vals:i,cLetter:"z"}),l}},56008:function(ne){"use strict";ne.exports=function(F,e){var M,k=F[0],o=k.z;switch(e.type){case"levels":var T=Math.min(o[0][0],o[0][1]);for(M=0;M<F.length;M++){var _=F[M];_.prefixBoundary=!_.edgepaths.length&&(T>_.level||_.starts.length&&T===_.level)}break;case"constraint":if(k.prefixBoundary=!1,k.edgepaths.length)return;var p=k.x.length,l=k.y.length,t=-1/0,i=1/0;for(M=0;M<l;M++)i=Math.min(i,o[M][0]),i=Math.min(i,o[M][p-1]),t=Math.max(t,o[M][0]),t=Math.max(t,o[M][p-1]);for(M=1;M<p-1;M++)i=Math.min(i,o[0][M]),i=Math.min(i,o[l-1][M]),t=Math.max(t,o[0][M]),t=Math.max(t,o[l-1][M]);var r,n,a=e.value;switch(e._operation){case">":a>t&&(k.prefixBoundary=!0);break;case"<":(a<i||k.starts.length&&a===i)&&(k.prefixBoundary=!0);break;case"[]":r=Math.min(a[0],a[1]),((n=Math.max(a[0],a[1]))<i||r>t||k.starts.length&&n===i)&&(k.prefixBoundary=!0);break;case"][":r=Math.min(a[0],a[1]),n=Math.max(a[0],a[1]),r<i&&n>t&&(k.prefixBoundary=!0)}}}},55296:function(ne,F,e){"use strict";var M=e(8932),k=e(41076),o=e(46960);ne.exports={min:"zmin",max:"zmax",calc:function(T,_,p){var l=_.contours,t=_.line,i=l.size||1,r=l.coloring,n=k(_,{isColorbar:!0});if("heatmap"===r){var a=M.extractOpts(_);p._fillgradient=a.reversescale?M.flipScale(a.colorscale):a.colorscale,p._zrange=[a.min,a.max]}else"fill"===r&&(p._fillcolor=n);p._line={color:"lines"===r?n:t.color,width:!1!==l.showlines?t.width:0,dash:t.dash},p._levels={start:l.start,end:o(l),size:i}}}},93252:function(ne){"use strict";ne.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},95536:function(ne,F,e){"use strict";var M=e(38248),k=e(17428),o=e(76308),T=o.addOpacity,_=o.opacity,p=e(69104),l=e(3400).isArrayOrTypedArray,t=p.CONSTRAINT_REDUCTION,i=p.COMPARISON_OPS2;ne.exports=function(r,n,a,s,u,f){var c,y,d,x,v,b,m=n.contours,g=a("contours.operation");m._operation=t[g],x=a,-1===i.indexOf((v=m).operation)?(x("contours.value",[0,1]),l(v.value)?v.value.length>2?v.value=v.value.slice(2):0===v.length?v.value=[0,1]:v.length<2?(b=parseFloat(v.value[0]),v.value=[b,b+1]):v.value=[parseFloat(v.value[0]),parseFloat(v.value[1])]:M(v.value)&&(b=parseFloat(v.value),v.value=[b,b+1])):(x("contours.value",0),M(v.value)||(v.value=l(v.value)?parseFloat(v.value[0]):0)),"="===g?c=m.showlines=!0:(c=a("contours.showlines"),d=a("fillcolor",T((r.line||{}).color||u,.5))),c&&(y=a("line.color",d&&_(d)?T(n.fillcolor,1):u),a("line.width",2),a("line.dash")),a("line.smoothing"),k(a,s,y,f)}},3212:function(ne,F,e){"use strict";var M=e(69104),k=e(38248);function o(p,l){var t,i=Array.isArray(l);function r(n){return k(n)?+n:null}return-1!==M.COMPARISON_OPS2.indexOf(p)?t=r(i?l[0]:l):-1!==M.INTERVAL_OPS.indexOf(p)?t=i?[r(l[0]),r(l[1])]:[r(l),r(l)]:-1!==M.SET_OPS.indexOf(p)&&(t=i?l.map(r):[r(l)]),t}function T(p){return function(l){l=o(p,l);var t=Math.min(l[0],l[1]),i=Math.max(l[0],l[1]);return{start:t,end:i,size:i-t}}}function _(p){return function(l){return{start:l=o(p,l),end:1/0,size:1/0}}}ne.exports={"[]":T("[]"),"][":T("]["),">":_(">"),"<":_("<"),"=":_("=")}},84952:function(ne){"use strict";ne.exports=function(F,e,M,k){var o=k("contours.start"),T=k("contours.end"),_=!1===o||!1===T,p=M("contours.size");!(_?e.autocontour=!0:M("autocontour",!1))&&p||M("ncontours")}},82172:function(ne,F,e){"use strict";var M=e(3400);function k(o){return M.extendFlat({},o,{edgepaths:M.extendDeep([],o.edgepaths),paths:M.extendDeep([],o.paths),starts:M.extendDeep([],o.starts)})}ne.exports=function(o,T){var _,p,l,t=function(n){return n.reverse()},i=function(n){return n};switch(T){case"=":case"<":return o;case">":for(1!==o.length&&M.warn("Contour data invalid for the specified inequality operation."),p=o[0],_=0;_<p.edgepaths.length;_++)p.edgepaths[_]=t(p.edgepaths[_]);for(_=0;_<p.paths.length;_++)p.paths[_]=t(p.paths[_]);for(_=0;_<p.starts.length;_++)p.starts[_]=t(p.starts[_]);return o;case"][":var r=t;t=i,i=r;case"[]":for(2!==o.length&&M.warn("Contour data invalid for the specified inequality range operation."),p=k(o[0]),l=k(o[1]),_=0;_<p.edgepaths.length;_++)p.edgepaths[_]=t(p.edgepaths[_]);for(_=0;_<p.paths.length;_++)p.paths[_]=t(p.paths[_]);for(_=0;_<p.starts.length;_++)p.starts[_]=t(p.starts[_]);for(;l.edgepaths.length;)p.edgepaths.push(i(l.edgepaths.shift()));for(;l.paths.length;)p.paths.push(i(l.paths.shift()));for(;l.starts.length;)p.starts.push(i(l.starts.shift()));return[p]}}},57004:function(ne,F,e){"use strict";var M=e(3400),k=e(51264),o=e(31147),T=e(95536),_=e(84952),p=e(97680),l=e(39096),t=e(67104);ne.exports=function(i,r,n,a){function s(f,c){return M.coerce(i,r,t,f,c)}if(k(i,r,s,a)){o(i,r,a,s),s("xhoverformat"),s("yhoverformat"),s("text"),s("hovertext"),s("hoverongaps"),s("hovertemplate");var u="constraint"===s("contours.type");s("connectgaps",M.isArray1D(r.z)),u?T(i,r,s,a,n):(_(i,r,s,function(f){return M.coerce2(i,r,t,f)}),p(i,r,s,a)),r.contours&&"heatmap"===r.contours.coloring&&l(s,a),s("zorder")}else r.visible=!1}},61512:function(ne,F,e){"use strict";var M=e(3400),k=e(3212),o=e(46960);ne.exports=function(T,_,p){for(var l="constraint"===T.type?k[T._operation](T.value):T,t=l.size,i=[],r=o(l),n=p.trace._carpetTrace,a=n?{xaxis:n.aaxis,yaxis:n.baxis,x:p.a,y:p.b}:{xaxis:_.xaxis,yaxis:_.yaxis,x:p.x,y:p.y},s=l.start;s<r;s+=t)if(i.push(M.extendFlat({level:s,crossings:{},starts:[],edgepaths:[],paths:[],z:p.z,smoothing:p.trace.line.smoothing},a)),i.length>1e3){M.warn("Too many contours, clipping at 1000",T);break}return i}},46960:function(ne){"use strict";ne.exports=function(F){return F.end+F.size/1e6}},88748:function(ne,F,e){"use strict";var M=e(3400),k=e(93252);function o(p,l,t,i){return Math.abs(p[0]-l[0])<t&&Math.abs(p[1]-l[1])<i}function T(p,l,t,i,r){var n,ae,le,pe,we,a=l.join(","),s=p.crossings[a],u=(le=l,pe=0,we=0,(ae=s)>20&&t?208===ae||1114===ae?pe=0===le[0]?1:-1:we=0===le[1]?1:-1:-1!==k.BOTTOMSTART.indexOf(ae)?we=1:-1!==k.LEFTSTART.indexOf(ae)?pe=1:-1!==k.TOPSTART.indexOf(ae)?we=-1:pe=-1,[pe,we]),f=[_(p,l,[-u[0],-u[1]])],c=p.z.length,y=p.z[0].length,d=l.slice(),m=u.slice();for(n=0;n<1e4;n++){if(s>20?p.crossings[a]=k.SADDLEREMAINDER[s=k.CHOOSESADDLE[s][(u[0]||u[1])<0?0:1]]:delete p.crossings[a],!(u=k.NEWDELTA[s])){M.log("Found bad marching index:",s,l,p.level);break}if(f.push(_(p,l,u)),l[0]+=u[0],l[1]+=u[1],a=l.join(","),o(f[f.length-1],f[f.length-2],i,r)&&f.pop(),l[0]===d[0]&&l[1]===d[1]&&u[0]===m[0]&&u[1]===m[1]||t&&(u[0]&&(l[0]<0||l[0]>y-2)||u[1]&&(l[1]<0||l[1]>c-2)))break;s=p.crossings[a]}1e4===n&&M.log("Infinite loop in contour?");var x,v,b,h,S,w,E,P,I,O,z,U,R,j,Y,B=o(f[0],f[f.length-1],i,r),V=0,q=.2*p.smoothing,ie=[],te=0;for(n=1;n<f.length;n++)j=(U=f[n])[2]-(R=f[n-1])[2],Y=U[3]-R[3],V+=E=Math.sqrt(j*j+Y*Y),ie.push(E);var ee=V/ie.length*q;function $(ae){return f[ae%f.length]}for(n=f.length-2;n>=te;n--)if((x=ie[n])<ee){for(b=0,v=n-1;v>=te&&x+ie[v]<ee;v--)x+=ie[v];if(B&&n===f.length-2)for(b=0;b<v&&x+ie[b]<ee;b++)x+=ie[b];S=n-v+b+1,w=Math.floor((n+v+b+2)/2),h=B||n!==f.length-2?B||-1!==v?S%2?$(w):[($(w)[0]+$(w+1)[0])/2,($(w)[1]+$(w+1)[1])/2]:f[0]:f[f.length-1],f.splice(v+1,n-v+1,h),n=v+1,b&&(te=b),B&&(n===f.length-2?f[b]=f[f.length-1]:0===n&&(f[f.length-1]=f[0]))}for(f.splice(0,te),n=0;n<f.length;n++)f[n].length=2;if(!(f.length<2))if(B)f.pop(),p.paths.push(f);else{t||M.log("Unclosed interior contour?",p.level,d.join(","),f.join("L"));var J=!1;for(P=0;P<p.edgepaths.length;P++)if(O=p.edgepaths[P],!J&&o(O[0],f[f.length-1],i,r)){f.pop(),J=!0;var X=!1;for(I=0;I<p.edgepaths.length;I++)if(o((z=p.edgepaths[I])[z.length-1],f[0],i,r)){X=!0,f.shift(),p.edgepaths.splice(P,1),I===P?p.paths.push(f.concat(z)):(I>P&&I--,p.edgepaths[I]=z.concat(f,O));break}X||(p.edgepaths[P]=f.concat(O))}for(P=0;P<p.edgepaths.length&&!J;P++)o((O=p.edgepaths[P])[O.length-1],f[0],i,r)&&(f.shift(),p.edgepaths[P]=O.concat(f),J=!0);J||p.edgepaths.push(f)}}function _(p,l,t){var i=l[0]+Math.max(t[0],0),r=l[1]+Math.max(t[1],0),n=p.z[r][i],a=p.xaxis,s=p.yaxis;if(t[1]){var u=(p.level-n)/(p.z[r][i+1]-n),f=(1!==u?(1-u)*a.c2l(p.x[i]):0)+(0!==u?u*a.c2l(p.x[i+1]):0);return[a.c2p(a.l2c(f),!0),s.c2p(p.y[r],!0),i+u,r]}var c=(p.level-n)/(p.z[r+1][i]-n),y=(1!==c?(1-c)*s.c2l(p.y[r]):0)+(0!==c?c*s.c2l(p.y[r+1]):0);return[a.c2p(p.x[i],!0),s.c2p(s.l2c(y),!0),i,r+c]}ne.exports=function(p,l,t){var i,r,n,a;for(l=l||.01,t=t||.01,r=0;r<p.length;r++){for(n=p[r],a=0;a<n.starts.length;a++)T(n,n.starts[a],"edge",l,t);for(i=0;Object.keys(n.crossings).length&&i<1e4;)i++,T(n,Object.keys(n.crossings)[0].split(",").map(Number),void 0,l,t);1e4===i&&M.log("Infinite loop in contour?")}}},38200:function(ne,F,e){"use strict";var M=e(76308),k=e(55512);ne.exports=function(o,T,_,p,l){l||(l={}),l.isContour=!0;var t=k(o,T,_,p,l);return t&&t.forEach(function(i){var r=i.trace;"constraint"===r.contours.type&&(r.fillcolor&&M.opacity(r.fillcolor)?i.color=M.addOpacity(r.fillcolor,1):r.contours.showlines&&M.opacity(r.line.color)&&(i.color=M.addOpacity(r.line.color,1)))}),t}},66240:function(ne,F,e){"use strict";ne.exports={attributes:e(67104),supplyDefaults:e(57004),calc:e(20688),plot:e(23676).plot,style:e(52440),colorbar:e(55296),hoverPoints:e(38200),moduleType:"trace",name:"contour",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},17428:function(ne,F,e){"use strict";var M=e(3400);ne.exports=function(k,o,T,_){_||(_={}),k("contours.showlabels")&&(M.coerceFont(k,"contours.labelfont",o.font,{overrideDflt:{color:T}}),k("contours.labelformat")),!1!==_.hasHover&&k("zhoverformat")}},41076:function(ne,F,e){"use strict";var M=e(33428),k=e(8932),o=e(46960);ne.exports=function(T){var _=T.contours,p=_.start,l=o(_),t=_.size||1,i=Math.floor((l-p)/t)+1,r="lines"===_.coloring?0:1,n=k.extractOpts(T);isFinite(t)||(t=1,i=1);var a,s,u=n.reversescale?k.flipScale(n.colorscale):n.colorscale,f=u.length,c=new Array(f),y=new Array(f),d=n.min,m=n.max;if("heatmap"===_.coloring){for(s=0;s<f;s++)c[s]=(a=u[s])[0]*(m-d)+d,y[s]=a[1];var g=M.extent([d,m,_.start,_.start+t*(i-1)]),x=g[d<m?0:1],v=g[d<m?1:0];x!==d&&(c.splice(0,0,x),y.splice(0,0,y[0])),v!==m&&(c.push(v),y.push(y[y.length-1]))}else{var b=T._input&&"number"==typeof T._input.zmin&&"number"==typeof T._input.zmax;for(b&&(p<=d||l>=m)&&(p<=d&&(p=d),l>=m&&(l=m),i=Math.floor((l-p)/t)+1,r=0),s=0;s<f;s++)c[s]=((a=u[s])[0]*(i+r-1)-r/2)*t+p,y[s]=a[1];(b||T.autocontour)&&(c[0]>d&&(c.unshift(d),y.unshift(y[0])),c[c.length-1]<m&&(c.push(m),y.push(y[y.length-1])))}return k.makeColorScaleFunc({domain:c,range:y},{noNumericCheck:!0})}},72424:function(ne,F,e){"use strict";var M=e(93252);function k(o,T){var _=(T[0][0]>o?0:1)+(T[0][1]>o?0:2)+(T[1][1]>o?0:4)+(T[1][0]>o?0:8);return 5===_||10===_?o>(T[0][0]+T[0][1]+T[1][0]+T[1][1])/4?5===_?713:1114:5===_?104:208:15===_?0:_}ne.exports=function(o){var T,_,p,l,t,i,r,n,a,s=o[0].z,u=s.length,f=s[0].length,c=2===u||2===f;for(_=0;_<u-1;_++)for(l=[],0===_&&(l=l.concat(M.BOTTOMSTART)),_===u-2&&(l=l.concat(M.TOPSTART)),T=0;T<f-1;T++)for(p=l.slice(),0===T&&(p=p.concat(M.LEFTSTART)),T===f-2&&(p=p.concat(M.RIGHTSTART)),t=T+","+_,i=[[s[_][T],s[_][T+1]],[s[_+1][T],s[_+1][T+1]]],a=0;a<o.length;a++)(r=k((n=o[a]).level,i))&&(n.crossings[t]=r,-1!==p.indexOf(r)&&(n.starts.push([T,_]),c&&-1!==p.indexOf(r,p.indexOf(r)+1)&&n.starts.push([T,_])))}},23676:function(ne,F,e){"use strict";var M=e(33428),k=e(3400),o=e(43616),T=e(8932),_=e(72736),p=e(54460),l=e(78344),t=e(41420),i=e(72424),r=e(88748),n=e(61512),a=e(82172),s=e(56008),u=e(93252),f=u.LABELOPTIMIZER;function c(m,g){var x,v,b,h,S,w,P="",I=0,O=m.edgepaths.map(function(B,V){return V}),z=!0;function U(B){return Math.abs(B[1]-g[2][1])<.01}function j(B){return Math.abs(B[0]-g[2][0])<.01}for(;O.length;){for(w=o.smoothopen(m.edgepaths[I],m.smoothing),P+=z?w:w.replace(/^M/,"L"),O.splice(O.indexOf(I),1),x=m.edgepaths[I][m.edgepaths[I].length-1],h=-1,b=0;b<4;b++){if(!x){k.log("Missing end?",I,m);break}for(Math.abs(x[1]-g[0][1])<.01&&!j(x)?v=g[1]:Math.abs(x[0]-g[0][0])<.01?v=g[0]:U(x)?v=g[3]:j(x)&&(v=g[2]),S=0;S<m.edgepaths.length;S++){var Y=m.edgepaths[S][0];Math.abs(x[0]-v[0])<.01?Math.abs(x[0]-Y[0])<.01&&(Y[1]-x[1])*(v[1]-Y[1])>=0&&(v=Y,h=S):Math.abs(x[1]-v[1])<.01?Math.abs(x[1]-Y[1])<.01&&(Y[0]-x[0])*(v[0]-Y[0])>=0&&(v=Y,h=S):k.log("endpt to newendpt is not vert. or horz.",x,v,Y)}if(x=v,h>=0)break;P+="L"+v}if(h===m.edgepaths.length){k.log("unclosed perimeter path");break}(z=-1===O.indexOf(I=h))&&(I=O[0],P+="Z")}for(I=0;I<m.paths.length;I++)P+=o.smoothclosed(m.paths[I],m.smoothing);return P}function y(m,g,x,v){var b=g.width/2,h=g.height/2,S=m.x,w=m.y,E=m.theta,P=Math.cos(E)*b,I=Math.sin(E)*b,O=(S>v.center?v.right-S:S-v.left)/(P+Math.abs(Math.sin(E)*h)),z=(w>v.middle?v.bottom-w:w-v.top)/(Math.abs(I)+Math.cos(E)*h);if(O<1||z<1)return 1/0;var U=f.EDGECOST*(1/(O-1)+1/(z-1));U+=f.ANGLECOST*E*E;for(var R=S-P,j=w-I,Y=S+P,B=w+I,V=0;V<x.length;V++){var q=x[V],ie=Math.cos(q.theta)*q.width/2,te=Math.sin(q.theta)*q.width/2,ee=2*k.segmentDistance(R,j,Y,B,q.x-ie,q.y-te,q.x+ie,q.y+te)/(g.height+q.height),$=q.level===g.level,J=$?f.SAMELEVELDISTANCE:1;if(ee<=J)return 1/0;U+=f.NEIGHBORCOST*($?f.SAMELEVELFACTOR:1)/(ee-J)}return U}function d(m){var g,x,v=m.trace._emptypoints,b=[],h=m.z.length,S=m.z[0].length,w=[];for(g=0;g<S;g++)w.push(1);for(g=0;g<h;g++)b.push(w.slice());for(g=0;g<v.length;g++)b[(x=v[g])[0]][x[1]]=0;return m.zmask=b,b}F.plot=function(m,g,x,v){var b=g.xaxis,h=g.yaxis;k.makeTraceGroups(v,x,"contour").each(function(S){var w=M.select(this),E=S[0],I=E.x,O=E.y,z=E.trace.contours,U=n(z,g,E),R=k.ensureSingle(w,"g","heatmapcoloring"),j=[];"heatmap"===z.coloring&&(j=[S]),t(m,g,j,R),i(U),r(U);var $,J,X,Y=b.c2p(I[0],!0),B=b.c2p(I[I.length-1],!0),V=h.c2p(O[0],!0),q=h.c2p(O[O.length-1],!0),ie=[[Y,q],[B,q],[B,V],[Y,V]],te=U;"constraint"===z.type&&(te=a(U,z._operation)),$=ie,J=z,(X=k.ensureSingle(w,"g","contourbg").selectAll("path").data("fill"===J.coloring?[0]:[])).enter().append("path"),X.exit().remove(),X.attr("d","M"+$.join("L")+"Z").style("stroke","none"),function(ee,$,J,X){var ae="fill"===X.coloring||"constraint"===X.type&&"="!==X._operation,ce="M"+J.join("L")+"Z";ae&&s($,X);var le=k.ensureSingle(ee,"g","contourfill").selectAll("path").data(ae?$:[]);le.enter().append("path"),le.exit().remove(),le.each(function(pe){var we=(pe.prefixBoundary?ce:"")+c(pe,J);we?M.select(this).attr("d",we).style("stroke","none"):M.select(this).remove()})}(w,te,ie,z),function(ee,$,J,X,ae){var ce=J._context.staticPlot,le=k.ensureSingle(ee,"g","contourlines"),pe=!1!==ae.showlines,we=ae.showlabels,Te=pe&&we,ye=F.createLines(le,pe||we,$,ce),ve=F.createLineClip(le,Te,J,X.trace.uid),xe=ee.selectAll("g.contourlabels").data(we?[0]:[]);if(xe.exit().remove(),xe.enter().append("g").classed("contourlabels",!0),we){var Ce=[],Oe=[];k.clearLocationCache();var be=F.labelFormatter(J,X),ue=o.tester.append("text").attr("data-notex",1).call(o.font,ae.labelfont),se=$[0].xaxis,ge=$[0].yaxis,Ie=se._length,ke=ge._length,Se=se.range,Pe=ge.range,Fe=k.aggNums(Math.min,null,X.x),Be=k.aggNums(Math.max,null,X.x),me=k.aggNums(Math.min,null,X.y),Me=k.aggNums(Math.max,null,X.y),Le=Math.max(se.c2p(Fe,!0),0),Ne=Math.min(se.c2p(Be,!0),Ie),Re=Math.max(ge.c2p(Me,!0),0),He=Math.min(ge.c2p(me,!0),ke),Ze={};Se[0]<Se[1]?(Ze.left=Le,Ze.right=Ne):(Ze.left=Ne,Ze.right=Le),Pe[0]<Pe[1]?(Ze.top=Re,Ze.bottom=He):(Ze.top=He,Ze.bottom=Re),Ze.middle=(Ze.top+Ze.bottom)/2,Ze.center=(Ze.left+Ze.right)/2,Ce.push([[Ze.left,Ze.top],[Ze.right,Ze.top],[Ze.right,Ze.bottom],[Ze.left,Ze.bottom]]);var nt=Math.sqrt(Ie*Ie+ke*ke),ft=u.LABELDISTANCE*nt/Math.max(1,$.length/u.LABELINCREASE);ye.each(function(ht){var Tt=F.calcTextOpts(ht.level,be,ue,J);M.select(this).selectAll("path").each(function(){var At=k.getVisibleSegment(this,Ze,Tt.height/2);if(At&&!(At.len<(Tt.width+Tt.height)*u.LABELMIN))for(var _t=Math.min(Math.ceil(At.len/ft),u.LABELMAX),ot=0;ot<_t;ot++){var it=F.findBestTextLocation(this,At,Tt,Oe,Ze);if(!it)break;F.addLabelData(it,Tt,Oe,Ce)}})}),ue.remove(),F.drawLabels(xe,Oe,J,ve,Te?Ce:null)}we&&!pe&&ye.remove()}(w,U,m,E,z),function(ee,$,J,X,ae){var ce=X.trace,pe="clip"+ce.uid,we=J._fullLayout._clips.selectAll("#"+pe).data(ce.connectgaps?[]:[0]);if(we.enter().append("clipPath").classed("contourclip",!0).attr("id",pe),we.exit().remove(),!1===ce.connectgaps){var Te={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:$.xaxis,yaxis:$.yaxis,x:X.x,y:X.y,z:d(X),smoothing:0};i([Te]),r([Te]),s([Te],{type:"levels"}),k.ensureSingle(we,"path","").attr("d",(Te.prefixBoundary?"M"+ae.join("L")+"Z":"")+c(Te,ae))}else pe=null;o.setClipUrl(ee,pe,J)}(w,g,m,E,ie)})},F.createLines=function(m,g,x,v){var b=x[0].smoothing,h=m.selectAll("g.contourlevel").data(g?x:[]);if(h.exit().remove(),h.enter().append("g").classed("contourlevel",!0),g){var S=h.selectAll("path.openline").data(function(E){return E.pedgepaths||E.edgepaths});S.exit().remove(),S.enter().append("path").classed("openline",!0),S.attr("d",function(E){return o.smoothopen(E,b)}).style("stroke-miterlimit",1).style("vector-effect",v?"none":"non-scaling-stroke");var w=h.selectAll("path.closedline").data(function(E){return E.ppaths||E.paths});w.exit().remove(),w.enter().append("path").classed("closedline",!0),w.attr("d",function(E){return o.smoothclosed(E,b)}).style("stroke-miterlimit",1).style("vector-effect",v?"none":"non-scaling-stroke")}return h},F.createLineClip=function(m,g,x,v){var b=g?"clipline"+v:null,h=x._fullLayout._clips.selectAll("#"+b).data(g?[0]:[]);return h.exit().remove(),h.enter().append("clipPath").classed("contourlineclip",!0).attr("id",b),o.setClipUrl(m,b,x),h},F.labelFormatter=function(m,g){var x=m._fullLayout,v=g.trace,b=v.contours,h={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(b.labelformat)h.tickformat=b.labelformat,l(h,x);else{var S=T.extractOpts(v);if(S&&S.colorbar&&S.colorbar._axis)h=S.colorbar._axis;else{if("constraint"===b.type){var w=b.value;h.range=k.isArrayOrTypedArray(w)?[w[0],w[w.length-1]]:[w,w]}else h.range=[b.start,b.end],h.nticks=(b.end-b.start)/b.size;h.range[0]===h.range[1]&&(h.range[1]+=h.range[0]||1),h.nticks||(h.nticks=1e3),l(h,x),p.prepTicks(h),h._tmin=null,h._tmax=null}}return function(E){return p.tickText(h,E).text}},F.calcTextOpts=function(m,g,x,v){var b=g(m);x.text(b).call(_.convertToTspans,v);var h=x.node(),S=o.bBox(h,!0);return{text:b,width:S.width,height:S.height,fontSize:+h.style["font-size"].replace("px",""),level:m,dy:(S.top+S.bottom)/2}},F.findBestTextLocation=function(m,g,x,v,b){var h,S,w,E,P,I=x.width;g.isClosed?(h=g.min+(S=g.len/f.INITIALSEARCHPOINTS)/2,w=g.max):(h=g.min+(S=(g.len-I)/(f.INITIALSEARCHPOINTS+1))+I/2,w=g.max-(S+I)/2);for(var O=1/0,z=0;z<f.ITERATIONS;z++){for(var U=h;U<w;U+=S){var R=k.getTextLocation(m,g.total,U,I),j=y(R,x,v,b);j<O&&(O=j,P=R,E=U)}if(O>2*f.MAXCOST)break;z&&(S/=2),w=(h=E-S/2)+1.5*S}if(O<=f.MAXCOST)return P},F.addLabelData=function(m,g,x,v){var b=g.fontSize,h=g.width+b/3,S=Math.max(0,g.height-b/3),w=m.x,E=m.y,P=m.theta,I=Math.sin(P),O=Math.cos(P),z=function(R,j){return[w+R*O-j*I,E+R*I+j*O]},U=[z(-h/2,-S/2),z(-h/2,S/2),z(h/2,S/2),z(h/2,-S/2)];x.push({text:g.text,x:w,y:E,dy:g.dy,theta:P,level:g.level,width:h,height:S}),v.push(U)},F.drawLabels=function(m,g,x,v,b){var h=m.selectAll("text").data(g,function(E){return E.text+","+E.x+","+E.y+","+E.theta});if(h.exit().remove(),h.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(E){var P=E.x+Math.sin(E.theta)*E.dy,I=E.y-Math.cos(E.theta)*E.dy;M.select(this).text(E.text).attr({x:P,y:I,transform:"rotate("+180*E.theta/Math.PI+" "+P+" "+I+")"}).call(_.convertToTspans,x)}),b){for(var S="",w=0;w<b.length;w++)S+="M"+b[w].join("L")+"Z";k.ensureSingle(v,"path","").attr("d",S)}}},54444:function(ne,F,e){"use strict";var M=e(54460),k=e(3400);function o(T,_,p){var l={type:"linear",range:[T,_]};return M.autoTicks(l,(_-T)/(p||15)),l}ne.exports=function(T,_){var p=T.contours;if(T.autocontour){var l=T.zmin,t=T.zmax;(T.zauto||void 0===l)&&(l=k.aggNums(Math.min,null,_)),(T.zauto||void 0===t)&&(t=k.aggNums(Math.max,null,_));var i=o(l,t,T.ncontours);p.size=i.dtick,p.start=M.tickFirst(i),i.range.reverse(),p.end=M.tickFirst(i),p.start===l&&(p.start+=p.size),p.end===t&&(p.end-=p.size),p.start>p.end&&(p.start=p.end=(p.start+p.end)/2),T._input.contours||(T._input.contours={}),k.extendFlat(T._input.contours,{start:p.start,end:p.end,size:p.size}),T._input.autocontour=!0}else if("constraint"!==p.type){var r,n=p.start,a=p.end,s=T._input.contours;n>a&&(p.start=s.start=a,a=p.end=s.end=n,n=p.start),p.size>0||(r=n===a?1:o(n,a,T.ncontours).dtick,s.size=p.size=r)}}},52440:function(ne,F,e){"use strict";var M=e(33428),k=e(43616),o=e(41648),T=e(41076);ne.exports=function(_){var p=M.select(_).selectAll("g.contour");p.style("opacity",function(l){return l[0].trace.opacity}),p.each(function(l){var t=M.select(this),i=l[0].trace,r=i.contours,n=i.line,a=r.size||1,s=r.start,u="constraint"===r.type,f=!u&&"lines"===r.coloring,c=!u&&"fill"===r.coloring,y=f||c?T(i):null;t.selectAll("g.contourlevel").each(function(g){M.select(this).selectAll("path").call(k.lineGroupStyle,n.width,f?y(g.level):n.color,n.dash)});var d=r.labelfont;if(t.selectAll("g.contourlabels text").each(function(g){k.font(M.select(this),{weight:d.weight,style:d.style,variant:d.variant,textcase:d.textcase,lineposition:d.lineposition,shadow:d.shadow,family:d.family,size:d.size,color:d.color||(f?y(g.level):n.color)})}),u)t.selectAll("g.contourfill path").style("fill",i.fillcolor);else if(c){var m;t.selectAll("g.contourfill path").style("fill",function(g){return void 0===m&&(m=g.level),y(g.level+.5*a)}),void 0===m&&(m=s),t.selectAll("g.contourbg path").style("fill",y(m-.5*a))}}),o(_)}},97680:function(ne,F,e){"use strict";var M=e(27260),k=e(17428);ne.exports=function(o,T,_,p,l){var t,i=_("contours.coloring"),r="";"fill"===i&&(t=_("contours.showlines")),!1!==t&&("lines"!==i&&(r=_("line.color","#000")),_("line.width",.5),_("line.dash")),"none"!==i&&(!0!==o.showlegend&&(T.showlegend=!1),T._dfltShowLegend=!1,M(o,T,p,_,{prefix:"",cLetter:"z"})),_("line.smoothing"),k(_,p,r,l)}},37960:function(ne,F,e){"use strict";var M=e(83328),k=e(67104),o=e(49084),T=e(92880).extendFlat,_=k.contours;ne.exports=T({carpet:{valType:"string",editType:"calc"},z:M.z,a:M.x,a0:M.x0,da:M.dx,b:M.y,b0:M.y0,db:M.dy,text:M.text,hovertext:M.hovertext,transpose:M.transpose,atype:M.xtype,btype:M.ytype,fillcolor:k.fillcolor,autocontour:k.autocontour,ncontours:k.ncontours,contours:{type:_.type,start:_.start,end:_.end,size:_.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:_.showlines,showlabels:_.showlabels,labelfont:_.labelfont,labelformat:_.labelformat,operation:_.operation,value:_.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:k.line.color,width:k.line.width,dash:k.line.dash,smoothing:k.line.smoothing,editType:"plot"},zorder:k.zorder,transforms:void 0},o("",{cLetter:"z",autoColorDflt:!1}))},30572:function(ne,F,e){"use strict";var M=e(47128),k=e(3400),o=e(2872),T=e(26136),_=e(70448),p=e(11240),l=e(35744),t=e(3252),i=e(50948),r=e(54444);ne.exports=function(n,a){var s=a._carpetTrace=i(n,a);if(s&&s.visible&&"legendonly"!==s.visible){if(!a.a||!a.b){var u=n.data[s.index],f=n.data[a.index];f.a||(f.a=u.a),f.b||(f.b=u.b),t(f,a,a._defaultColor,n._fullLayout)}var c=function(y,d){var m,g,x,v,b,h,S,w=d._carpetTrace,E=w.aaxis,P=w.baxis;E._minDtick=0,P._minDtick=0,k.isArray1D(d.z)&&o(d,E,P,"a","b",["z"]),m=d._a=d._a||d.a,v=d._b=d._b||d.b,m=m?E.makeCalcdata(d,"_a"):[],v=v?P.makeCalcdata(d,"_b"):[],g=d.a0||0,x=d.da||1,b=d.b0||0,h=d.db||1,S=d._z=T(d._z||d.z,d.transpose),d._emptypoints=p(S),_(S,d._emptypoints);var I=k.maxRowLength(S),R={a:l(d,"scaled"===d.xtype?"":m,g,x,I,E),b:l(d,"scaled"===d.ytype?"":v,b,h,S.length,P),z:S};return"levels"===d.contours.type&&"none"!==d.contours.coloring&&M(y,d,{vals:S,containerStr:"",cLetter:"z"}),[R]}(n,a);return r(a,a._z),c}}},3252:function(ne,F,e){"use strict";var M=e(3400),k=e(51264),o=e(37960),T=e(95536),_=e(84952),p=e(97680);ne.exports=function(l,t,i,r){function n(a,s){return M.coerce(l,t,o,a,s)}if(n("carpet"),l.a&&l.b){if(!k(l,t,n,r,"a","b"))return void(t.visible=!1);n("text"),"constraint"===n("contours.type")?T(l,t,n,r,i,{hasHover:!1}):(_(l,t,n,function(a){return M.coerce2(l,t,o,a)}),p(l,t,n,r,{hasHover:!1}))}else t._defaultColor=i,t._length=null;n("zorder")}},40448:function(ne,F,e){"use strict";ne.exports={attributes:e(37960),supplyDefaults:e(3252),colorbar:e(55296),calc:e(30572),plot:e(94440),style:e(52440),moduleType:"trace",name:"contourcarpet",basePlotModule:e(57952),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},94440:function(ne,F,e){"use strict";var M=e(33428),k=e(87072),o=e(53416),T=e(43616),_=e(3400),p=e(72424),l=e(88748),t=e(23676),i=e(93252),r=e(82172),n=e(61512),a=e(56008),s=e(50948),u=e(77712);function f(d,m,g){var x=d.getPointAtLength(m),v=d.getPointAtLength(g),b=v.x-x.x,h=v.y-x.y,S=Math.sqrt(b*b+h*h);return[b/S,h/S]}function c(d){var m=Math.sqrt(d[0]*d[0]+d[1]*d[1]);return[d[0]/m,d[1]/m]}function y(d,m){var g=Math.abs(d[0]*m[0]+d[1]*m[1]);return Math.sqrt(1-g*g)/g}ne.exports=function(d,m,g,x){var v=m.xaxis,b=m.yaxis;_.makeTraceGroups(x,g,"contour").each(function(h){var S=M.select(this),w=h[0],E=w.trace,P=E._carpetTrace=s(d,E),I=d.calcdata[P.index][0];if(P.visible&&"legendonly"!==P.visible){var O=w.a,z=w.b,U=E.contours,R=n(U,m,w),j="constraint"===U.type,Y=U._operation,B=j?"="===Y?"lines":"fill":U.coloring,V=[[O[0],z[z.length-1]],[O[O.length-1],z[z.length-1]],[O[O.length-1],z[0]],[O[0],z[0]]];p(R),l(R,1e-8*(O[O.length-1]-O[0]),1e-8*(z[z.length-1]-z[0]));var te,ee,$,J,X=R;"constraint"===U.type&&(X=r(R,Y)),function(pe,we){var Te,ye,ve,xe,Ce,Oe,be,ue,se;for(Te=0;Te<pe.length;Te++){for(Ce=(xe=pe[Te]).pedgepaths=[],Oe=xe.ppaths=[],ye=0;ye<xe.edgepaths.length;ye++){for(se=xe.edgepaths[ye],be=[],ve=0;ve<se.length;ve++)be[ve]=we(se[ve]);Ce.push(be)}for(ye=0;ye<xe.paths.length;ye++){for(se=xe.paths[ye],ue=[],ve=0;ve<se.length;ve++)ue[ve]=we(se[ve]);Oe.push(ue)}}}(R,le);var ae=[];for(J=I.clipsegments.length-1;J>=0;J--)ee=k([],(te=I.clipsegments[J]).x,v.c2p),$=k([],te.y,b.c2p),ee.reverse(),$.reverse(),ae.push(o(ee,$,te.bicubic));var ce="M"+ae.join("L")+"Z";(function(pe,we,Te,ye,ve,xe){var Ce,Oe,be,ue,se=_.ensureSingle(pe,"g","contourbg").selectAll("path").data("fill"!==xe||ve?[]:[0]);se.enter().append("path"),se.exit().remove();var ge=[];for(ue=0;ue<we.length;ue++)Oe=k([],(Ce=we[ue]).x,Te.c2p),be=k([],Ce.y,ye.c2p),ge.push(o(Oe,be,Ce.bicubic));se.attr("d","M"+ge.join("L")+"Z").style("stroke","none")})(S,I.clipsegments,v,b,j,B),function(pe,we,Te,ye,ve,xe,Ce,Oe,be,ue,se){var ge="fill"===ue;ge&&a(ve,pe.contours);var Ie=_.ensureSingle(we,"g","contourfill").selectAll("path").data(ge?ve:[]);Ie.enter().append("path"),Ie.exit().remove(),Ie.each(function(ke){var Se=(ke.prefixBoundary?se:"")+function(Pe,Fe,Be,me,Me,Le,Ne,Re){var He,Ze,nt,ft,ht,Tt,At,_t="",ot=Fe.edgepaths.map(function(ct,Ve){return Ve}),it=!0,Pt=1e-4*Math.abs(Be[0][0]-Be[2][0]),jt=1e-4*Math.abs(Be[0][1]-Be[2][1]);function Ut(ct){return Math.abs(ct[1]-Be[0][1])<jt}function Rt(ct){return Math.abs(ct[1]-Be[2][1])<jt}function Je(ct){return Math.abs(ct[0]-Be[0][0])<Pt}function et(ct){return Math.abs(ct[0]-Be[2][0])<Pt}function qe(ct,Ve){var Ge,ut,Qe,yt,wt="";for(Ut(ct)&&!et(ct)||Rt(ct)&&!Je(ct)?(yt=Me.aaxis,Qe=u(Me,Le,[ct[0],Ve[0]],.5*(ct[1]+Ve[1]))):(yt=Me.baxis,Qe=u(Me,Le,.5*(ct[0]+Ve[0]),[ct[1],Ve[1]])),Ge=1;Ge<Qe.length;Ge++)for(wt+=yt.smoothing?"C":"L",ut=0;ut<Qe[Ge].length;ut++){var kt=Qe[Ge][ut];wt+=[Ne.c2p(kt[0]),Re.c2p(kt[1])]+" "}return wt}for(He=0,Ze=null;ot.length;){for(Ze&&(_t+=qe(Ze,Fe.edgepaths[He][0])),At=T.smoothopen(Fe.edgepaths[He].map(me),Fe.smoothing),_t+=it?At:At.replace(/^M/,"L"),ot.splice(ot.indexOf(He),1),Ze=Fe.edgepaths[He][Fe.edgepaths[He].length-1],ht=-1,ft=0;ft<4;ft++){if(!Ze){_.log("Missing end?",He,Fe);break}for(Ut(Ze)&&!et(Ze)?nt=Be[1]:Je(Ze)?nt=Be[0]:Rt(Ze)?nt=Be[3]:et(Ze)&&(nt=Be[2]),Tt=0;Tt<Fe.edgepaths.length;Tt++){var pt=Fe.edgepaths[Tt][0];Math.abs(Ze[0]-nt[0])<Pt?Math.abs(Ze[0]-pt[0])<Pt&&(pt[1]-Ze[1])*(nt[1]-pt[1])>=0&&(nt=pt,ht=Tt):Math.abs(Ze[1]-nt[1])<jt?Math.abs(Ze[1]-pt[1])<jt&&(pt[0]-Ze[0])*(nt[0]-pt[0])>=0&&(nt=pt,ht=Tt):_.log("endpt to newendpt is not vert. or horz.",Ze,nt,pt)}if(ht>=0)break;_t+=qe(Ze,nt),Ze=nt}if(ht===Fe.edgepaths.length){_.log("unclosed perimeter path");break}(it=-1===ot.indexOf(He=ht))&&(He=ot[0],_t+=qe(Ze,nt)+"Z",Ze=null)}for(He=0;He<Fe.paths.length;He++)_t+=T.smoothclosed(Fe.paths[He].map(me),Fe.smoothing);return _t}(0,ke,xe,Ce,Oe,be,Te,ye);Se?M.select(this).attr("d",Se).style("stroke","none"):M.select(this).remove()})}(E,S,v,b,X,V,le,P,I,B,ce),function(pe,we,Te,ye,ve,xe,Ce){var Oe=Te._context.staticPlot,be=_.ensureSingle(pe,"g","contourlines"),ue=!1!==ve.showlines,se=ve.showlabels,ge=ue&&se,Ie=t.createLines(be,ue||se,we,Oe),ke=t.createLineClip(be,ge,Te,ye.trace.uid),Se=pe.selectAll("g.contourlabels").data(se?[0]:[]);if(Se.exit().remove(),Se.enter().append("g").classed("contourlabels",!0),se){var Be=xe.xaxis._length,me=xe.yaxis._length,Me=[[[0,0],[Be,0],[Be,me],[0,me]]],Le=[];_.clearLocationCache();var Ne=t.labelFormatter(Te,ye),Re=T.tester.append("text").attr("data-notex",1).call(T.font,ve.labelfont),He={left:0,right:Be,center:Be/2,top:0,bottom:me,middle:me/2},Ze=Math.sqrt(Be*Be+me*me),nt=i.LABELDISTANCE*Ze/Math.max(1,we.length/i.LABELINCREASE);Ie.each(function(ft){var ht=t.calcTextOpts(ft.level,Ne,Re,Te);M.select(this).selectAll("path").each(function(Tt){var _t=_.getVisibleSegment(this,He,ht.height/2);if(_t&&(function(jt,Ut,Rt,Je,et,qe){for(var $e,pt=0;pt<Rt.pedgepaths.length;pt++)Ut===Rt.pedgepaths[pt]&&($e=Rt.edgepaths[pt]);if($e){var ct=et.a[0],Ve=et.a[et.a.length-1],Ge=et.b[0],ut=et.b[et.b.length-1],Qe=f(jt,0,1),yt=f(jt,Je.total,Je.total-1),wt=vt($e[0],Qe),kt=Je.total-vt($e[$e.length-1],yt);Je.min<wt&&(Je.min=wt),Je.max>kt&&(Je.max=kt),Je.len=Je.max-Je.min}function vt(Lt,St){var Ot,Nt=0;return(Math.abs(Lt[0]-ct)<.1||Math.abs(Lt[0]-Ve)<.1)&&(Ot=c(et.dxydb_rough(Lt[0],Lt[1],.1)),Nt=Math.max(Nt,qe*y(St,Ot)/2)),(Math.abs(Lt[1]-Ge)<.1||Math.abs(Lt[1]-ut)<.1)&&(Ot=c(et.dxyda_rough(Lt[0],Lt[1],.1)),Nt=Math.max(Nt,qe*y(St,Ot)/2)),Nt}}(this,Tt,ft,_t,Ce,ht.height),!(_t.len<(ht.width+ht.height)*i.LABELMIN)))for(var ot=Math.min(Math.ceil(_t.len/nt),i.LABELMAX),it=0;it<ot;it++){var Pt=t.findBestTextLocation(this,_t,ht,Le,He);if(!Pt)break;t.addLabelData(Pt,ht,Le,Me)}})}),Re.remove(),t.drawLabels(Se,Le,Te,ke,ge?Me:null)}se&&!ue&&Ie.remove()}(S,R,d,w,U,m,P),T.setClipUrl(S,P._clipPathId,d)}function le(pe){var we=P.ab2xy(pe[0],pe[1],!0);return[v.c2p(we[0]),b.c2p(we[1])]}})}},33928:function(ne,F,e){"use strict";var M=e(49084),k=e(21776).Ks,o=e(45464),T=e(31512),_=e(92880).extendFlat;ne.exports=_({lon:T.lon,lat:T.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:T.text,hovertext:T.hovertext,hoverinfo:_({},o.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:k(),showlegend:_({},o.showlegend,{dflt:!1})},M("",{cLetter:"z",editTypeOverride:"calc"}))},90876:function(ne,F,e){"use strict";var M=e(38248),k=e(3400).isArrayOrTypedArray,o=e(39032).BADNUM,T=e(47128),_=e(3400)._;ne.exports=function(p,l){for(var t=l._length,i=new Array(t),r=l.z,n=k(r)&&r.length,a=0;a<t;a++){var s=i[a]={},u=l.lon[a],f=l.lat[a];if(s.lonlat=M(u)&&M(f)?[+u,+f]:[o,o],n){var c=r[a];s.z=M(c)?c:o}}return T(p,l,{vals:n?r:[0,1],containerStr:"",cLetter:"z"}),t&&(i[0].t={labels:{lat:_(p,"lat:")+" ",lon:_(p,"lon:")+" "}}),i}},4629:function(ne,F,e){"use strict";var M=e(38248),k=e(3400),o=e(76308),T=e(8932),_=e(39032).BADNUM,p=e(44808).makeBlank;ne.exports=function(l){var t=l[0].trace,i=!0===t.visible&&0!==t._length,r=t._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:p()};if(!i)return r;var n,a=[],s=t.z,u=t.radius,f=k.isArrayOrTypedArray(s)&&s.length,c=k.isArrayOrTypedArray(u);for(n=0;n<l.length;n++){var y=l[n],d=y.lonlat;if(d[0]!==_){var m={};if(f){var g=y.z;m.z=g!==_?g:0}c&&(m.r=M(u[n])&&u[n]>0?+u[n]:0),a.push({type:"Feature",geometry:{type:"Point",coordinates:d},properties:m})}}var x=T.extractOpts(t),v=x.reversescale?T.flipScale(x.colorscale):x.colorscale,b=v[0][1],h=["interpolate",["linear"],["heatmap-density"],0,o.opacity(b)<1?b:o.addOpacity(b,0)];for(n=1;n<v.length;n++)h.push(v[n][0],v[n][1]);return k.extendFlat(r.heatmap.paint,{"heatmap-weight":f?["interpolate",["linear"],["get","z"],x.min,0,x.max,1]:1/(x.max-x.min),"heatmap-color":h,"heatmap-radius":c?{type:"identity",property:"r"}:t.radius,"heatmap-opacity":t.opacity}),r.geojson={type:"FeatureCollection",features:a},r.heatmap.layout.visibility="visible",r}},97664:function(ne,F,e){"use strict";var M=e(3400),k=e(27260),o=e(33928);ne.exports=function(T,_,p,l){function t(a,s){return M.coerce(T,_,o,a,s)}var i=t("lon")||[],r=t("lat")||[],n=Math.min(i.length,r.length);n?(_._length=n,t("z"),t("radius"),t("below"),t("text"),t("hovertext"),t("hovertemplate"),k(T,_,l,t,{prefix:"",cLetter:"z"})):_.visible=!1}},96176:function(ne){"use strict";ne.exports=function(F,e){return F.lon=e.lon,F.lat=e.lat,F.z=e.z,F}},25336:function(ne,F,e){"use strict";var M=e(54460),k=e(63312).hoverPoints,o=e(63312).getExtraText;ne.exports=function(T,_,p){var l=k(T,_,p);if(l){var t=l[0],i=t.cd,r=i[0].trace,n=i[t.index];if(delete t.color,"z"in n){var a=t.subplot.mockAxis;t.z=n.z,t.zLabel=M.tickText(a,a.c2l(n.z),"hover").text}return t.extraText=o(r,n,i[0].t.labels),[t]}}},15088:function(ne,F,e){"use strict";ne.exports={attributes:e(33928),supplyDefaults:e(97664),colorbar:e(96288),formatLabels:e(11960),calc:e(90876),plot:e(35256),hoverPoints:e(25336),eventData:e(96176),getBelow:function(M,k){for(var o=k.getMapLayers(),T=0;T<o.length;T++){var _=o[T],p=_.id;if("symbol"===_.type&&"string"==typeof p&&-1===p.indexOf("plotly-"))return p}},moduleType:"trace",name:"densitymapbox",basePlotModule:e(33688),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},35256:function(ne,F,e){"use strict";var M=e(4629),k=e(47552).traceLayerPrefix;function o(_,p){this.type="densitymapbox",this.subplot=_,this.uid=p,this.sourceId="source-"+p,this.layerList=[["heatmap",k+p+"-heatmap"]],this.below=null}var T=o.prototype;T.update=function(_){var p=this.subplot,l=this.layerList,t=M(_),i=p.belowLookup["trace-"+this.uid];p.map.getSource(this.sourceId).setData(t.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(t,i),this.below=i);for(var r=0;r<l.length;r++){var n=l[r],s=n[1],u=t[n[0]];p.setOptions(s,"setLayoutProperty",u.layout),"visible"===u.layout.visibility&&p.setOptions(s,"setPaintProperty",u.paint)}},T._addLayers=function(_,p){for(var l=this.subplot,t=this.layerList,i=this.sourceId,r=0;r<t.length;r++){var n=t[r],a=n[0],s=_[a];l.addLayer({type:a,id:n[1],source:i,layout:s.layout,paint:s.paint},p)}},T._removeLayers=function(){for(var _=this.subplot.map,p=this.layerList,l=p.length-1;l>=0;l--)_.removeLayer(p[l][1])},T.dispose=function(){var _=this.subplot.map;this._removeLayers(),_.removeSource(this.sourceId)},ne.exports=function(_,p){var l=p[0].trace,t=new o(_,l.uid),i=t.sourceId,r=M(p),n=t.below=_.belowLookup["trace-"+l.uid];return _.map.addSource(i,{type:"geojson",data:r.geojson}),t._addLayers(r,n),t}},74248:function(ne,F,e){"use strict";var M=e(3400);ne.exports=function(k,o){for(var T=0;T<k.length;T++)k[T].i=T;M.mergeArray(o.text,k,"tx"),M.mergeArray(o.hovertext,k,"htx");var _=o.marker;if(_){M.mergeArray(_.opacity,k,"mo"),M.mergeArray(_.color,k,"mc");var p=_.line;p&&(M.mergeArray(p.color,k,"mlc"),M.mergeArrayCastPositive(p.width,k,"mlw"))}}},20088:function(ne,F,e){"use strict";var M,k=e(20832),o=e(52904).line,T=e(45464),_=e(29736).axisHoverFormat,p=e(21776).Ks,l=e(21776).Gw,t=e(74732),i=e(92880).extendFlat,r=e(76308);ne.exports={x:k.x,x0:k.x0,dx:k.dx,y:k.y,y0:k.y0,dy:k.dy,xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:_("x"),yhoverformat:_("y"),hovertext:k.hovertext,hovertemplate:p({},{keys:t.eventDataKeys}),hoverinfo:i({},T.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:l({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),text:k.text,textposition:k.textposition,insidetextanchor:i({},k.insidetextanchor,{dflt:"middle"}),textangle:i({},k.textangle,{dflt:0}),textfont:k.textfont,insidetextfont:k.insidetextfont,outsidetextfont:k.outsidetextfont,constraintext:k.constraintext,cliponaxis:k.cliponaxis,orientation:i({},k.orientation,{}),offset:i({},k.offset,{arrayOk:!1}),width:i({},k.width,{arrayOk:!1}),marker:(M=i({},k.marker),delete M.pattern,delete M.cornerradius,M),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:i({},o.color,{dflt:r.defaultLine}),width:i({},o.width,{dflt:0,editType:"plot"}),dash:o.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:k.offsetgroup,alignmentgroup:k.alignmentgroup,zorder:k.zorder}},23096:function(ne,F,e){"use strict";var M=e(54460),k=e(1220),o=e(74248),T=e(4500),_=e(39032).BADNUM;function p(l){return l===_?0:l}ne.exports=function(l,t){var i,r,n,a,s,u,f,c,y=M.getFromId(l,t.xaxis||"x"),d=M.getFromId(l,t.yaxis||"y");"h"===t.orientation?(i=y.makeCalcdata(t,"x"),n=d.makeCalcdata(t,"y"),a=k(t,d,"y",n),s=!!t.yperiodalignment,u="y"):(i=d.makeCalcdata(t,"y"),n=y.makeCalcdata(t,"x"),a=k(t,y,"x",n),s=!!t.xperiodalignment,u="x"),r=a.vals;var m,g=Math.min(r.length,i.length),x=new Array(g);for(t._base=[],f=0;f<g;f++){i[f]<0&&(i[f]=_);var v=!1;i[f]!==_&&f+1<g&&i[f+1]!==_&&(v=!0),c=x[f]={p:r[f],s:i[f],cNext:v},t._base[f]=-.5*c.s,s&&(x[f].orig_p=n[f],x[f][u+"End"]=a.ends[f],x[f][u+"Start"]=a.starts[f]),t.ids&&(c.id=String(t.ids[f])),0===f&&(x[0].vTotal=0),x[0].vTotal+=p(c.s),c.begR=p(c.s)/p(x[0].s)}for(f=0;f<g;f++)(c=x[f]).s!==_&&(c.sumR=c.s/x[0].vTotal,c.difR=void 0!==m?c.s/m:1,m=c.s);return o(x,t),T(x,t),x}},74732:function(ne){"use strict";ne.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},4804:function(ne,F,e){"use strict";var M=e(96376).setGroupPositions;ne.exports=function(k,o){var T,_,p=k._fullLayout,l=k._fullData,t=k.calcdata,i=o.xaxis,r=o.yaxis,n=[],a=[],s=[];for(_=0;_<l.length;_++){var u=l[_];!0===u.visible&&u.xaxis===i._id&&u.yaxis===r._id&&"funnel"===u.type&&(T=t[_],"h"===u.orientation?s.push(T):a.push(T),n.push(T))}var c={mode:p.funnelmode,norm:p.funnelnorm,gap:p.funnelgap,groupgap:p.funnelgroupgap};for(M(k,i,r,a,c),M(k,r,i,s,c),_=0;_<n.length;_++){T=n[_];for(var y=0;y<T.length;y++)y+1<T.length&&(T[y].nextP0=T[y+1].p0,T[y].nextS0=T[y+1].s0,T[y].nextP1=T[y+1].p1,T[y].nextS1=T[y+1].s1)}}},45432:function(ne,F,e){"use strict";var M=e(3400),k=e(20011),o=e(31508).handleText,T=e(43980),_=e(31147),p=e(20088),l=e(76308);ne.exports={supplyDefaults:function(t,i,r,n){function a(c,y){return M.coerce(t,i,p,c,y)}if(T(t,i,n,a)){_(t,i,n,a),a("xhoverformat"),a("yhoverformat"),a("orientation",i.y&&!i.x?"v":"h"),a("offset"),a("width");var s=a("text");a("hovertext"),a("hovertemplate");var u=a("textposition");o(t,i,n,a,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"===i.textposition||i.texttemplate||a("textinfo",M.isArrayOrTypedArray(s)?"text+value":"value");var f=a("marker.color",r);a("marker.line.color",l.defaultLine),a("marker.line.width"),a("connector.visible")&&(a("connector.fillcolor",(y=M.isArrayOrTypedArray(c=f)?"#000":c,l.addOpacity(y,.5*l.opacity(y)))),a("connector.line.width")&&(a("connector.line.color"),a("connector.line.dash"))),a("zorder")}else i.visible=!1;var c,y},crossTraceDefaults:function(t,i){var r,n;function a(u){return M.coerce(n._input,n,p,u)}if("group"===i.funnelmode)for(var s=0;s<t.length;s++)r=(n=t[s])._input,k(r,n,i,a)}}},34580:function(ne){"use strict";ne.exports=function(F,e){return F.x="xVal"in e?e.xVal:e.x,F.y="yVal"in e?e.yVal:e.y,"percentInitial"in e&&(F.percentInitial=e.percentInitial),"percentPrevious"in e&&(F.percentPrevious=e.percentPrevious),"percentTotal"in e&&(F.percentTotal=e.percentTotal),e.xa&&(F.xaxis=e.xa),e.ya&&(F.yaxis=e.ya),F}},31488:function(ne,F,e){"use strict";var M=e(76308).opacity,k=e(63400).hoverOnBars,o=e(3400).formatPercent;ne.exports=function(T,_,p,l,t){var g,x,v,b,h,i=k(T,_,p,l,t);if(i){var r=i.cd,n=r[0].trace,s=r[i.index];i[("h"===n.orientation?"x":"y")+"LabelVal"]=s.s,i.percentInitial=s.begR,i.percentInitialLabel=o(s.begR,1),i.percentPrevious=s.difR,i.percentPreviousLabel=o(s.difR,1),i.percentTotal=s.sumR,i.percentTotalLabel=o(s.sumR,1);var u=s.hi||n.hoverinfo,f=[];if(u&&"none"!==u&&"skip"!==u){var c="all"===u,y=u.split("+"),d=function(m){return c||-1!==y.indexOf(m)};d("percent initial")&&f.push(i.percentInitialLabel+" of initial"),d("percent previous")&&f.push(i.percentPreviousLabel+" of previous"),d("percent total")&&f.push(i.percentTotalLabel+" of total")}return i.extraText=f.join("<br>"),i.color=(x=n.marker,b=(g=s).mlc||x.line.color,h=g.mlw||x.line.width,M(v=g.mc||x.color)?v:M(b)&&h?b:void 0),[i]}}},94704:function(ne,F,e){"use strict";ne.exports={attributes:e(20088),layoutAttributes:e(7076),supplyDefaults:e(45432).supplyDefaults,crossTraceDefaults:e(45432).crossTraceDefaults,supplyLayoutDefaults:e(11631),calc:e(23096),crossTraceCalc:e(4804),plot:e(42200),style:e(44544).style,hoverPoints:e(31488),eventData:e(34580),selectPoints:e(45784),moduleType:"trace",name:"funnel",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},7076:function(ne){"use strict";ne.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},11631:function(ne,F,e){"use strict";var M=e(3400),k=e(7076);ne.exports=function(o,T,_){var p=!1;function l(r,n){return M.coerce(o,T,k,r,n)}for(var t=0;t<_.length;t++){var i=_[t];if(i.visible&&"funnel"===i.type){p=!0;break}}p&&(l("funnelmode"),l("funnelgap",.2),l("funnelgroupgap"))}},42200:function(ne,F,e){"use strict";var M=e(33428),k=e(3400),o=e(43616),T=e(39032).BADNUM,_=e(98184),p=e(82744).clearMinTextSize;function l(t,i,r,n){var a=[],s=[],u=n?i:r,f=n?r:i;return a[0]=u.c2p(t.s0,!0),s[0]=f.c2p(t.p0,!0),a[1]=u.c2p(t.s1,!0),s[1]=f.c2p(t.p1,!0),a[2]=u.c2p(t.nextS0,!0),s[2]=f.c2p(t.nextP0,!0),a[3]=u.c2p(t.nextS1,!0),s[3]=f.c2p(t.nextP1,!0),n?[a,s]:[s,a]}ne.exports=function(t,i,r,n){var s,u,y,d,a=t._fullLayout;p("funnel",a),s=t,y=(u=i).xaxis,d=u.yaxis,k.makeTraceGroups(n,r,"trace bars").each(function(m){var g=M.select(this),x=m[0].trace,v=k.ensureSingle(g,"g","regions");if(x.connector&&x.connector.visible){var b="h"===x.orientation,h=v.selectAll("g.region").data(k.identity);h.enter().append("g").classed("region",!0),h.exit().remove();var S=h.size();h.each(function(w,E){if(E===S-1||w.cNext){var P=l(w,y,d,b),I=P[0],O=P[1],z="";I[0]!==T&&O[0]!==T&&I[1]!==T&&O[1]!==T&&I[2]!==T&&O[2]!==T&&I[3]!==T&&O[3]!==T&&(z+=b?"M"+I[0]+","+O[1]+"L"+I[2]+","+O[2]+"H"+I[3]+"L"+I[1]+","+O[1]+"Z":"M"+I[1]+","+O[1]+"L"+I[2]+","+O[3]+"V"+O[2]+"L"+I[1]+","+O[0]+"Z"),""===z&&(z="M0,0Z"),k.ensureSingle(M.select(this),"path").attr("d",z).call(o.setClipUrl,u.layerClipId,s)}})}else v.remove()}),function(s,u,f,c){var y=u.xaxis,d=u.yaxis;k.makeTraceGroups(c,f,"trace bars").each(function(m){var g=M.select(this),x=m[0].trace,v=k.ensureSingle(g,"g","lines");if(x.connector&&x.connector.visible&&x.connector.line.width){var b="h"===x.orientation,h=v.selectAll("g.line").data(k.identity);h.enter().append("g").classed("line",!0),h.exit().remove();var S=h.size();h.each(function(w,E){if(E===S-1||w.cNext){var P=l(w,y,d,b),I=P[0],O=P[1],z="";void 0!==I[3]&&void 0!==O[3]&&(b?(z+="M"+I[0]+","+O[1]+"L"+I[2]+","+O[2],z+="M"+I[1]+","+O[1]+"L"+I[3]+","+O[2]):(z+="M"+I[1]+","+O[1]+"L"+I[2]+","+O[3],z+="M"+I[1]+","+O[0]+"L"+I[2]+","+O[2])),""===z&&(z="M0,0Z"),k.ensureSingle(M.select(this),"path").attr("d",z).call(o.setClipUrl,u.layerClipId,s)}})}else v.remove()})}(t,i,r,n),_.plot(t,i,r,n,{mode:a.funnelmode,norm:a.funnelmode,gap:a.funnelgap,groupgap:a.funnelgroupgap})}},44544:function(ne,F,e){"use strict";var M=e(33428),k=e(43616),o=e(76308),T=e(13448).DESELECTDIM,_=e(60100),p=e(82744).resizeText,l=_.styleTextPoints;ne.exports={style:function(t,i,r){var n=r||M.select(t).selectAll('g[class^="funnellayer"]').selectAll("g.trace");p(t,n,"funnel"),n.style("opacity",function(a){return a[0].trace.opacity}),n.each(function(a){var s=M.select(this),u=a[0].trace;s.selectAll(".point > path").each(function(f){if(!f.isBlank){var c=u.marker;M.select(this).call(o.fill,f.mc||c.color).call(o.stroke,f.mlc||c.line.color).call(k.dashLine,c.line.dash,f.mlw||c.line.width).style("opacity",u.selectedpoints&&!f.selected?T:1)}}),l(s,u,t),s.selectAll(".regions").each(function(){M.select(this).selectAll("path").style("stroke-width",0).call(o.fill,u.connector.fillcolor)}),s.selectAll(".lines").each(function(){var f=u.connector.line;k.lineGroupStyle(M.select(this).selectAll("path"),f.width,f.color,f.dash)})})}}},22332:function(ne,F,e){"use strict";var M=e(74996),k=e(45464),o=e(86968).u,T=e(21776).Ks,_=e(21776).Gw,p=e(92880).extendFlat;ne.exports={labels:M.labels,label0:M.label0,dlabel:M.dlabel,values:M.values,marker:{colors:M.marker.colors,line:{color:p({},M.marker.line.color,{dflt:null}),width:p({},M.marker.line.width,{dflt:1}),editType:"calc"},pattern:M.marker.pattern,editType:"calc"},text:M.text,hovertext:M.hovertext,scalegroup:p({},M.scalegroup,{}),textinfo:p({},M.textinfo,{flags:["label","text","value","percent"]}),texttemplate:_({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:p({},k.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:T({},{keys:["label","color","value","text","percent"]}),textposition:p({},M.textposition,{values:["inside","none"],dflt:"inside"}),textfont:M.textfont,insidetextfont:M.insidetextfont,title:{text:M.title.text,font:M.title.font,position:p({},M.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:o({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},91248:function(ne,F,e){"use strict";var M=e(7316);F.name="funnelarea",F.plot=function(k,o,T,_){M.plotBasePlot(F.name,k,o,T,_)},F.clean=function(k,o,T,_){M.cleanBasePlot(F.name,k,o,T,_)}},54e3:function(ne,F,e){"use strict";var M=e(45768);ne.exports={calc:function(k,o){return M.calc(k,o)},crossTraceCalc:function(k){M.crossTraceCalc(k,{type:"funnelarea"})}}},92688:function(ne,F,e){"use strict";var M=e(3400),k=e(22332),o=e(86968).Q,T=e(31508).handleText,_=e(74174).handleLabelsAndValues,p=e(74174).handleMarkerDefaults;ne.exports=function(l,t,i,r){function n(g,x){return M.coerce(l,t,k,g,x)}var a=n("labels"),s=n("values"),u=_(a,s),f=u.len;if(t._hasLabels=u.hasLabels,t._hasValues=u.hasValues,!t._hasLabels&&t._hasValues&&(n("label0"),n("dlabel")),f){t._length=f,p(l,t,r,n),n("scalegroup");var c,y=n("text"),d=n("texttemplate");if(d||(c=n("textinfo",Array.isArray(y)?"text+percent":"percent")),n("hovertext"),n("hovertemplate"),d||c&&"none"!==c){var m=n("textposition");T(l,t,r,n,m,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}else"none"===c&&n("textposition","none");o(t,r,n),n("title.text")&&(n("title.position"),M.coerceFont(n,"title.font",r.font)),n("aspectratio"),n("baseratio")}else t.visible=!1}},62396:function(ne,F,e){"use strict";ne.exports={moduleType:"trace",name:"funnelarea",basePlotModule:e(91248),categories:["pie-like","funnelarea","showLegend"],attributes:e(22332),layoutAttributes:e(61280),supplyDefaults:e(92688),supplyLayoutDefaults:e(35384),calc:e(54e3).calc,crossTraceCalc:e(54e3).crossTraceCalc,plot:e(39472),style:e(62096),styleOne:e(10528),meta:{}}},61280:function(ne,F,e){"use strict";var M=e(85204).hiddenlabels;ne.exports={hiddenlabels:M,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},35384:function(ne,F,e){"use strict";var M=e(3400),k=e(61280);ne.exports=function(o,T){function _(p,l){return M.coerce(o,T,k,p,l)}_("hiddenlabels"),_("funnelareacolorway",T.colorway),_("extendfunnelareacolors")}},39472:function(ne,F,e){"use strict";var M=e(33428),k=e(43616),o=e(3400),T=o.strScale,_=o.strTranslate,p=e(72736),l=e(98184).toMoveInsideBar,t=e(82744),i=t.recordMinTextSize,r=t.clearMinTextSize,n=e(69656),a=e(37820),s=a.attachFxHandlers,u=a.determineInsideTextFont,f=a.layoutAreas,c=a.prerenderTitles,y=a.positionTitleOutside,d=a.formatSliceLabel;function m(g,x){return"l"+(x[0]-g[0])+","+(x[1]-g[1])}ne.exports=function(g,x){var v=g._context.staticPlot,b=g._fullLayout;r("funnelarea",b),c(x,g),f(x,b._size),o.makeTraceGroups(b._funnelarealayer,x,"trace").each(function(h){var S=M.select(this),w=h[0],E=w.trace;(function(P){if(P.length){var I=P[0],O=I.trace,z=O.aspectratio,U=O.baseratio;U>.999&&(U=.999);var R,j,Y,B=Math.pow(U,2),V=I.vTotal,q=V,ie=V*B/(1-B)/V,te=[];for(te.push(be()),j=P.length-1;j>-1;j--)(Y=P[j]).hidden||(ie+=Y.v/q,te.push(be()));var $=1/0,J=-1/0;for(j=0;j<te.length;j++)R=te[j],$=Math.min($,R[1]),J=Math.max(J,R[1]);for(j=0;j<te.length;j++)te[j][1]-=(J+$)/2;var ae=I.r,ce=(J-$)/2,le=ae/te[te.length-1][0],pe=ae/ce*z;for(I.r=pe*ce,j=0;j<te.length;j++)te[j][0]*=le,te[j][1]*=pe;var we,Te,ye=[-(R=te[0])[0],R[1]],ve=[R[0],R[1]],xe=0;for(j=P.length-1;j>-1;j--)if(!(Y=P[j]).hidden){var Ce=te[xe+=1][0],Oe=te[xe][1];Y.TL=[-Ce,Oe],Y.TR=[Ce,Oe],Y.BL=ye,Y.BR=ve,Y.pxmid=[.5*((we=Y.TR)[0]+(Te=Y.BR)[0]),.5*(we[1]+Te[1])],ye=Y.TL,ve=Y.TR}}function be(){var ue,se={x:ue=Math.sqrt(ie),y:-ue};return[se.x,se.y]}})(h),S.each(function(){var P=M.select(this).selectAll("g.slice").data(h);P.enter().append("g").classed("slice",!0),P.exit().remove(),P.each(function(O,z){if(O.hidden)M.select(this).selectAll("path,g").remove();else{O.pointNumber=O.i,O.curveNumber=E.index;var U=w.cx,R=w.cy,j=M.select(this),Y=j.selectAll("path.surface").data([O]);Y.enter().append("path").classed("surface",!0).style({"pointer-events":v?"none":"all"}),j.call(s,g,h);var B="M"+(U+O.TR[0])+","+(R+O.TR[1])+m(O.TR,O.BR)+m(O.BR,O.BL)+m(O.BL,O.TL)+"Z";Y.attr("d",B),d(g,O,w);var V=n.castOption(E.textposition,O.pts),q=j.selectAll("g.slicetext").data(O.text&&"none"!==V?[0]:[]);q.enter().append("g").classed("slicetext",!0),q.exit().remove(),q.each(function(){var ie=o.ensureSingle(M.select(this),"text","",function(le){le.attr("data-notex",1)}),te=o.ensureUniformFontSize(g,u(E,O,b.font));ie.text(O.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(k.font,te).call(p.convertToTspans,g);var ee,$,J,X=k.bBox(ie.node()),ae=Math.min(O.BL[1],O.BR[1])+R,ce=Math.max(O.TL[1],O.TR[1])+R;$=Math.max(O.TL[0],O.BL[0])+U,J=Math.min(O.TR[0],O.BR[0])+U,(ee=l($,J,ae,ce,X,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=te.size,i(E.type,ee,b),h[z].transform=ee,o.setTransormAndDisplay(ie,ee)})}});var I=M.select(this).selectAll("g.titletext").data(E.title.text?[0]:[]);I.enter().append("g").classed("titletext",!0),I.exit().remove(),I.each(function(){var O=o.ensureSingle(M.select(this),"text","",function(R){R.attr("data-notex",1)}),z=E.title.text;E._meta&&(z=o.templateString(z,E._meta)),O.text(z).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(k.font,E.title.font).call(p.convertToTspans,g);var U=y(w,b._size);O.attr("transform",_(U.x,U.y)+T(Math.min(1,U.scale))+_(U.tx,U.ty))})})})}},62096:function(ne,F,e){"use strict";var M=e(33428),k=e(10528),o=e(82744).resizeText;ne.exports=function(T){var _=T._fullLayout._funnelarealayer.selectAll(".trace");o(T,_,"funnelarea"),_.each(function(p){var l=p[0].trace,t=M.select(this);t.style({opacity:l.opacity}),t.selectAll("path.surface").each(function(i){M.select(this).call(k,i,l,T)})})}},83328:function(ne,F,e){"use strict";var M=e(52904),k=e(45464),o=e(25376),T=e(29736).axisHoverFormat,_=e(21776).Ks,p=e(21776).Gw,l=e(49084),t=e(92880).extendFlat;ne.exports=t({z:{valType:"data_array",editType:"calc"},x:t({},M.x,{impliedEdits:{xtype:"array"}}),x0:t({},M.x0,{impliedEdits:{xtype:"scaled"}}),dx:t({},M.dx,{impliedEdits:{xtype:"scaled"}}),y:t({},M.y,{impliedEdits:{ytype:"array"}}),y0:t({},M.y0,{impliedEdits:{ytype:"scaled"}}),dy:t({},M.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:t({},M.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:t({},M.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:t({},M.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:t({},M.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:t({},M.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:t({},M.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:_(),texttemplate:p({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:o({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:t({},k.showlegend,{dflt:!1}),zorder:M.zorder},{transforms:void 0},l("",{cLetter:"z",autoColorDflt:!1}))},19512:function(ne,F,e){"use strict";var M=e(24040),k=e(3400),o=e(54460),T=e(1220),_=e(55480),p=e(47128),l=e(2872),t=e(26136),i=e(70448),r=e(11240),n=e(35744),a=e(39032).BADNUM;function s(u){for(var f=[],c=u.length,y=0;y<c;y++){var d=u[y];d!==a&&f.push(d)}return f}ne.exports=function(u,f){var c,y,d,m,g,x,v,b,h,S,w,E=o.getFromId(u,f.xaxis||"x"),P=o.getFromId(u,f.yaxis||"y"),I=M.traceIs(f,"contour"),O=M.traceIs(f,"histogram"),z=M.traceIs(f,"gl2d"),U=I?"best":f.zsmooth;if(E._minDtick=0,P._minDtick=0,O)m=(w=_(u,f)).orig_x,c=w.x,y=w.x0,d=w.dx,b=w.orig_y,g=w.y,x=w.y0,v=w.dy,h=w.z;else{var R=f.z;k.isArray1D(R)?(l(f,E,P,"x","y",["z"]),c=f._x,g=f._y,R=f._z):(m=f.x?E.makeCalcdata(f,"x"):[],b=f.y?P.makeCalcdata(f,"y"):[],c=T(f,E,"x",m).vals,g=T(f,P,"y",b).vals,f._x=c,f._y=g),y=f.x0,d=f.dx,x=f.y0,v=f.dy,h=t(R,f,E,P)}function j(J){U=f._input.zsmooth=f.zsmooth=!1,k.warn('cannot use zsmooth: "fast": '+J)}function Y(J){if(J.length>1){var X=(J[J.length-1]-J[0])/(J.length-1),ae=Math.abs(X/100);for(S=0;S<J.length-1;S++)if(Math.abs(J[S+1]-J[S]-X)>ae)return!1}return!0}(E.rangebreaks||P.rangebreaks)&&(h=function(J,X,ae){for(var ce=[],le=-1,pe=0;pe<ae.length;pe++)if(X[pe]!==a){ce[++le]=[];for(var we=0;we<ae[pe].length;we++)J[we]!==a&&ce[le].push(ae[pe][we])}return ce}(c,g,h),O||(c=s(c),g=s(g),f._x=c,f._y=g)),O||!I&&!f.connectgaps||(f._emptypoints=r(h),i(h,f._emptypoints)),f._islinear=!1,"log"===E.type||"log"===P.type?"fast"===U&&j("log axis found"):Y(c)?Y(g)?f._islinear=!0:"fast"===U&&j("y scale is not linear"):"fast"===U&&j("x scale is not linear");var B=k.maxRowLength(h),V="scaled"===f.xtype?"":c,q=n(f,V,y,d,B,E),ie="scaled"===f.ytype?"":g,te=n(f,ie,x,v,h.length,P);z||(f._extremes[E._id]=o.findExtremes(E,q),f._extremes[P._id]=o.findExtremes(P,te));var ee={x:q,y:te,z:h,text:f._text||f.text,hovertext:f._hovertext||f.hovertext};if(f.xperiodalignment&&m&&(ee.orig_x=m),f.yperiodalignment&&b&&(ee.orig_y=b),V&&V.length===q.length-1&&(ee.xCenter=V),ie&&ie.length===te.length-1&&(ee.yCenter=ie),O&&(ee.xRanges=w.xRanges,ee.yRanges=w.yRanges,ee.pts=w.pts),I||p(u,f,{vals:h,cLetter:"z"}),I&&f.contours&&"heatmap"===f.contours.coloring){var $={type:"contour"===f.type?"heatmap":"histogram2d",xcalendar:f.xcalendar,ycalendar:f.ycalendar};ee.xfill=n($,V,y,d,B,E),ee.yfill=n($,ie,x,v,h.length,P)}return[ee]}},26136:function(ne,F,e){"use strict";var M=e(38248),k=e(3400),o=e(39032).BADNUM;ne.exports=function(T,_,p,l){var t,i,r,n,a,s;function u(g){if(M(g))return+g}if(_&&_.transpose){for(t=0,a=0;a<T.length;a++)t=Math.max(t,T[a].length);if(0===t)return!1;r=function(g){return g.length},n=function(g,x,v){return(g[v]||[])[x]}}else t=T.length,r=function(g,x){return g[x].length},n=function(g,x,v){return(g[x]||[])[v]};function c(g){if(_&&"carpet"!==_.type&&"contourcarpet"!==_.type&&g&&"category"===g.type&&_["_"+g._id.charAt(0)].length){var x=g._id.charAt(0),v={},b=_["_"+x+"CategoryMap"]||_[x];for(a=0;a<b.length;a++)v[b[a]]=a;return function(h){var S=v[g._categories[h]];return S+1?S:o}}return k.identity}var y=c(p),d=c(l);l&&"category"===l.type&&(t=l._categories.length);var g,x,v,m=new Array(t);for(a=0;a<t;a++)for(i=p&&"category"===p.type?p._categories.length:r(T,a),m[a]=new Array(i),s=0;s<i;s++)m[a][s]=u((g=T,x=d(a),v=y(s),x===o||v===o?o:n(g,x,v)));return m}},96288:function(ne){"use strict";ne.exports={min:"zmin",max:"zmax"}},2872:function(ne,F,e){"use strict";var M=e(3400),k=e(39032).BADNUM,o=e(1220);ne.exports=function(T,_,p,l,t,i){var r=T._length,n=_.makeCalcdata(T,l),a=p.makeCalcdata(T,t);n=o(T,_,l,n).vals,a=o(T,p,t,a).vals;var s,u,f,c,y=T.text,d=void 0!==y&&M.isArray1D(y),m=T.hovertext,g=void 0!==m&&M.isArray1D(m),x=M.distinctVals(n),v=x.vals,b=M.distinctVals(a),h=b.vals,S=[],w=h.length,E=v.length;for(s=0;s<i.length;s++)S[s]=M.init2dArray(w,E);d&&(f=M.init2dArray(w,E)),g&&(c=M.init2dArray(w,E));var P=M.init2dArray(w,E);for(s=0;s<r;s++)if(n[s]!==k&&a[s]!==k){var I=M.findBin(n[s]+x.minDiff/2,v),O=M.findBin(a[s]+b.minDiff/2,h);for(u=0;u<i.length;u++)S[u][O][I]=T[i[u]][s],P[O][I]=s;d&&(f[O][I]=y[s]),g&&(c[O][I]=m[s])}for(T["_"+l]=v,T["_"+t]=h,u=0;u<i.length;u++)T["_"+i[u]]=S[u];d&&(T._text=f),g&&(T._hovertext=c),_&&"category"===_.type&&(T["_"+l+"CategoryMap"]=v.map(function(U){return _._categories[U]})),p&&"category"===p.type&&(T["_"+t+"CategoryMap"]=h.map(function(U){return p._categories[U]})),T._after2before=P}},24480:function(ne,F,e){"use strict";var M=e(3400),k=e(51264),o=e(39096),T=e(31147),_=e(82748),p=e(27260),l=e(83328);ne.exports=function(t,i,r,n){function a(s,u){return M.coerce(t,i,l,s,u)}k(t,i,a,n)?(T(t,i,n,a),a("xhoverformat"),a("yhoverformat"),a("text"),a("hovertext"),a("hovertemplate"),o(a,n),_(t,i,a,n),a("hoverongaps"),a("connectgaps",M.isArray1D(i.z)&&!1!==i.zsmooth),p(t,i,n,a,{prefix:"",cLetter:"z"}),a("zorder")):i.visible=!1}},11240:function(ne,F,e){"use strict";var M=e(3400).maxRowLength;ne.exports=function(k){var o,T,_,p,l,t,i,r,n=[],a={},s=[],u=k[0],f=[],c=[0,0,0],y=M(k);for(T=0;T<k.length;T++)for(o=f,f=u,u=k[T+1]||[],_=0;_<y;_++)void 0===f[_]&&((t=(void 0!==f[_-1]?1:0)+(void 0!==f[_+1]?1:0)+(void 0!==o[_]?1:0)+(void 0!==u[_]?1:0))?(0===T&&t++,0===_&&t++,T===k.length-1&&t++,_===f.length-1&&t++,t<4&&(a[[T,_]]=[T,_,t]),n.push([T,_,t])):s.push([T,_]));for(;s.length;){for(i={},r=!1,l=s.length-1;l>=0;l--)(t=((a[[(T=(p=s[l])[0])-1,_=p[1]]]||c)[2]+(a[[T+1,_]]||c)[2]+(a[[T,_-1]]||c)[2]+(a[[T,_+1]]||c)[2])/20)&&(i[p]=[T,_,t],s.splice(l,1),r=!0);if(!r)throw"findEmpties iterated with no new neighbors";for(p in i)a[p]=i[p],n.push(i[p])}return n.sort(function(d,m){return m[2]-d[2]})}},55512:function(ne,F,e){"use strict";var M=e(93024),k=e(3400),o=k.isArrayOrTypedArray,T=e(54460),_=e(8932).extractOpts;ne.exports=function(p,l,t,i,r){r||(r={});var n,a,s,u,f=r.isContour,c=p.cd[0],y=c.trace,d=p.xa,m=p.ya,g=c.x,x=c.y,v=c.z,b=c.xCenter,h=c.yCenter,S=c.zmask,w=y.zhoverformat,E=g,P=x;if(!1!==p.index){try{s=Math.round(p.index[1]),u=Math.round(p.index[0])}catch{return void k.error("Error hovering on heatmap, pointNumber must be [row,col], found:",p.index)}if(s<0||s>=v[0].length||u<0||u>v.length)return}else{if(M.inbox(l-g[0],l-g[g.length-1],0)>0||M.inbox(t-x[0],t-x[x.length-1],0)>0)return;if(f){var I;for(E=[2*g[0]-g[1]],I=1;I<g.length;I++)E.push((g[I]+g[I-1])/2);for(E.push([2*g[g.length-1]-g[g.length-2]]),P=[2*x[0]-x[1]],I=1;I<x.length;I++)P.push((x[I]+x[I-1])/2);P.push([2*x[x.length-1]-x[x.length-2]])}s=Math.max(0,Math.min(E.length-2,k.findBin(l,E))),u=Math.max(0,Math.min(P.length-2,k.findBin(t,P)))}var O,z,U=d.c2p(g[s]),R=d.c2p(g[s+1]),j=m.c2p(x[u]),Y=m.c2p(x[u+1]);f?(R=U,n=(O=c.orig_x||g)[s],Y=j,a=(z=c.orig_y||x)[u]):(O=c.orig_x||b||g,z=c.orig_y||h||x,n=b?O[s]:(O[s]+O[s+1])/2,a=h?z[u]:(z[u]+z[u+1])/2,d&&"category"===d.type&&(n=g[s]),m&&"category"===m.type&&(a=x[u]),y.zsmooth&&(U=R=d.c2p(n),j=Y=m.c2p(a)));var B=v[u][s];if(S&&!S[u][s]&&(B=void 0),void 0!==B||y.hoverongaps){var V;o(c.hovertext)&&o(c.hovertext[u])?V=c.hovertext[u][s]:o(c.text)&&o(c.text[u])&&(V=c.text[u][s]);var q=_(y),te=T.tickText({type:"linear",range:[q.min,q.max],hoverformat:w,_separators:d._separators,_numFormat:d._numFormat},B,"hover").text;return[k.extendFlat(p,{index:y._after2before?y._after2before[u][s]:[u,s],distance:p.maxHoverDistance,spikeDistance:p.maxSpikeDistance,x0:U,x1:R,y0:j,y1:Y,xLabelVal:n,yLabelVal:a,zLabelVal:B,zLabel:te,text:V})]}}},81932:function(ne,F,e){"use strict";ne.exports={attributes:e(83328),supplyDefaults:e(24480),calc:e(19512),plot:e(41420),colorbar:e(96288),style:e(41648),hoverPoints:e(55512),moduleType:"trace",name:"heatmap",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},70448:function(ne,F,e){"use strict";var M=e(3400),k=[[-1,0],[1,0],[0,-1],[0,1]];function o(_){return.5-.25*Math.min(1,.5*_)}function T(_,p,l){var t,i,r,n,a,s,u,f,c,y,d,m,g,x=0;for(n=0;n<p.length;n++){for(d=_[i=(t=p[n])[0]][r=t[1]],y=0,c=0,a=0;a<4;a++)(u=_[i+(s=k[a])[0]])&&void 0!==(f=u[r+s[1]])&&(0===y?m=g=f:(m=Math.min(m,f),g=Math.max(g,f)),c++,y+=f);if(0===c)throw"iterateInterp2d order is wrong: no defined neighbors";_[i][r]=y/c,void 0===d?c<4&&(x=1):(_[i][r]=(1+l)*_[i][r]-l*d,g>m&&(x=Math.max(x,Math.abs(_[i][r]-d)/(g-m))))}return x}ne.exports=function(_,p){var l,t=1;for(T(_,p),l=0;l<p.length&&!(p[l][2]<4);l++);for(p=p.slice(l),l=0;l<100&&t>.01;l++)t=T(_,p,o(t));return t>.01&&M.log("interp2d didn't converge quickly",t),_}},39096:function(ne,F,e){"use strict";var M=e(3400);ne.exports=function(k,o){k("texttemplate");var T=M.extendFlat({},o.font,{color:"auto",size:"auto"});M.coerceFont(k,"textfont",T)}},35744:function(ne,F,e){"use strict";var M=e(24040),k=e(3400).isArrayOrTypedArray;ne.exports=function(o,T,_,p,l,t){var i,r,n,a=[],s=M.traceIs(o,"contour"),u=M.traceIs(o,"histogram"),f=M.traceIs(o,"gl2d");if(k(T)&&T.length>1&&!u&&"category"!==t.type){var c=T.length;if(!(c<=l))return T.slice(0,s?l:l+1);if(s||f)a=Array.from(T).slice(0,l);else if(1===l)a="log"===t.type?[.5*T[0],2*T[0]]:[T[0]-.5,T[0]+.5];else if("log"===t.type){for(a=[Math.pow(T[0],1.5)/Math.pow(T[1],.5)],n=1;n<c;n++)a.push(Math.sqrt(T[n-1]*T[n]));a.push(Math.pow(T[c-1],1.5)/Math.pow(T[c-2],.5))}else{for(a=[1.5*T[0]-.5*T[1]],n=1;n<c;n++)a.push(.5*(T[n-1]+T[n]));a.push(1.5*T[c-1]-.5*T[c-2])}if(c<l){var y,d=a[a.length-1];if("log"===t.type)for(y=d/a[a.length-2],n=c;n<l;n++)a.push(d*=y);else for(y=d-a[a.length-2],n=c;n<l;n++)a.push(d+=y)}}else{var m=o[t._id.charAt(0)+"calendar"];for(i=u?t.r2c(_,0,m):k(T)&&1===T.length?T[0]:void 0===_?0:("log"===t.type?t.d2c:t.r2c)(_,0,m),r=p||1,n=s||f?0:-.5;n<l;n++)a.push(i+r*n)}return a}},41420:function(ne,F,e){"use strict";var M=e(33428),k=e(49760),o=e(24040),T=e(43616),_=e(54460),p=e(3400),l=e(72736),t=e(76688),i=e(76308),r=e(8932).extractOpts,n=e(8932).makeColorScaleFuncFromTrace,a=e(9616),s=e(84284).LINE_SPACING,u=e(9188),f=e(2264).STYLE,c="heatmap-label";function y(v){return v.selectAll("g."+c)}function d(v){y(v).remove()}function m(v,b){var h=b.length-2,S=p.constrain(p.findBin(v,b),0,h),w=b[S],P=p.constrain(S+(v-w)/(b[S+1]-w)-.5,0,h),I=Math.round(P),O=Math.abs(P-I);return P&&P!==h&&O?{bin0:I,frac:O,bin1:Math.round(I+O/(P-I))}:{bin0:I,bin1:I,frac:0}}function g(v,b){var h=b.length-1,S=p.constrain(p.findBin(v,b),0,h),w=b[S],E=(v-w)/(b[S+1]-w)||0;return E<=0?{bin0:S,bin1:S,frac:0}:E<.5?{bin0:S,bin1:S+1,frac:E}:{bin0:S+1,bin1:S,frac:1-E}}function x(v,b,h){v[b]=h[0],v[b+1]=h[1],v[b+2]=h[2],v[b+3]=Math.round(255*h[3])}ne.exports=function(v,b,h,S){var w=b.xaxis,E=b.yaxis;p.makeTraceGroups(S,h,"hm").each(function(P){var I,O,z,U,R,j,Y,B,V=M.select(this),q=P[0],ie=q.trace,te=ie.xgap||0,ee=ie.ygap||0,$=q.z,J=q.x,X=q.y,ae=q.xCenter,ce=q.yCenter,le=o.traceIs(ie,"contour"),pe=le?"best":ie.zsmooth,we=$.length,Te=p.maxRowLength($),ye=!1,ve=!1;for(j=0;void 0===I&&j<J.length-1;)I=w.c2p(J[j]),j++;for(j=J.length-1;void 0===O&&j>0;)O=w.c2p(J[j]),j--;for(O<I&&(z=O,O=I,I=z,ye=!0),j=0;void 0===U&&j<X.length-1;)U=E.c2p(X[j]),j++;for(j=X.length-1;void 0===R&&j>0;)R=E.c2p(X[j]),j--;R<U&&(z=U,U=R,R=z,ve=!0),le&&(ae=J,ce=X,J=q.xfill,X=q.yfill);var xe="default";if(pe?xe="best"===pe?"smooth":"fast":ie._islinear&&0===te&&0===ee&&u()&&(xe="fast"),"fast"!==xe){var Ce="best"===pe?0:.5;I=Math.max(-Ce*w._length,I),O=Math.min((1+Ce)*w._length,O),U=Math.max(-Ce*E._length,U),R=Math.min((1+Ce)*E._length,R)}var Oe,be,ue=Math.round(O-I),se=Math.round(R-U);if(I>=w._length||O<=0||U>=E._length||R<=0)return V.selectAll("image").data([]).exit().remove(),void d(V);"fast"===xe?(Oe=Te,be=we):(Oe=ue,be=se);var ge=document.createElement("canvas");ge.width=Oe,ge.height=be;var Ie,ke,Se=ge.getContext("2d",{willReadFrequently:!0}),Pe=n(ie,{noNumericCheck:!0,returnArray:!0});"fast"===xe?(Ie=ye?function(Sr){return Te-1-Sr}:p.identity,ke=ve?function(Sr){return we-1-Sr}:p.identity):(Ie=function(Sr){return p.constrain(Math.round(w.c2p(J[Sr])-I),0,ue)},ke=function(Sr){return p.constrain(Math.round(E.c2p(X[Sr])-U),0,se)});var Fe,Be,me,Me,Le=ke(0),Ne=[Le,Le],Re=ye?0:1,He=ve?0:1,Ze=0,nt=0,ft=0,ht=0;function Tt(Sr,ln){if(void 0!==Sr){var dn=Pe(Sr);return dn[0]=Math.round(dn[0]),dn[1]=Math.round(dn[1]),dn[2]=Math.round(dn[2]),Ze+=ln,nt+=dn[0]*ln,ft+=dn[1]*ln,ht+=dn[2]*ln,dn}return[0,0,0,0]}function At(Sr,ln,dn,Un){var Mn=Sr[dn.bin0];if(void 0===Mn)return Tt(void 0,1);var Wn=Sr[dn.bin1],$n=ln[dn.bin0],lr=ln[dn.bin1];return Tt(Mn+dn.frac*(Wn-Mn||0)+Un.frac*(($n-Mn||0)+dn.frac*(void 0===Wn?void 0===lr?0:void 0===$n?2*(lr-Mn):2*(2*lr-$n-Mn)/3:void 0===lr?void 0===$n?0:2*(2*Mn-Wn-$n)/3:void 0===$n?2*(2*lr-Wn-Mn)/3:lr+Mn-Wn-$n)))}if("default"!==xe){var _t,ot=0;try{_t=new Uint8Array(Oe*be*4)}catch{_t=new Array(Oe*be*4)}if("smooth"===xe){var it,Pt,jt,Ut=ae||J,Rt=ce||X,Je=new Array(Ut.length),et=new Array(Rt.length),qe=new Array(ue),$e=ae?g:m,pt=ce?g:m;for(j=0;j<Ut.length;j++)Je[j]=Math.round(w.c2p(Ut[j])-I);for(j=0;j<Rt.length;j++)et[j]=Math.round(E.c2p(Rt[j])-U);for(j=0;j<ue;j++)qe[j]=$e(j,Je);for(Y=0;Y<se;Y++)for(Pt=$[(it=pt(Y,et)).bin0],jt=$[it.bin1],j=0;j<ue;j++,ot+=4)x(_t,ot,Me=At(Pt,jt,qe[j],it))}else for(Y=0;Y<we;Y++)for(me=$[Y],Ne=ke(Y),j=0;j<Te;j++)Me=Tt(me[j],1),x(_t,ot=4*(Ne*Te+Ie(j)),Me);var ct=Se.createImageData(Oe,be);try{ct.data.set(_t)}catch{var Ve=ct.data,Ge=Ve.length;for(Y=0;Y<Ge;Y++)Ve[Y]=_t[Y]}Se.putImageData(ct,0,0)}else{var ut=Math.floor(te/2),Qe=Math.floor(ee/2);for(Y=0;Y<we;Y++)if(me=$[Y],Ne.reverse(),Ne[He]=ke(Y+1),Ne[0]!==Ne[1]&&void 0!==Ne[0]&&void 0!==Ne[1])for(Fe=[Be=Ie(0),Be],j=0;j<Te;j++)Fe.reverse(),Fe[Re]=Ie(j+1),Fe[0]!==Fe[1]&&void 0!==Fe[0]&&void 0!==Fe[1]&&(Me=Tt(me[j],(Fe[1]-Fe[0])*(Ne[1]-Ne[0])),Se.fillStyle="rgba("+Me.join(",")+")",Se.fillRect(Fe[0]+ut,Ne[0]+Qe,Fe[1]-Fe[0]-te,Ne[1]-Ne[0]-ee))}nt=Math.round(nt/Ze),ft=Math.round(ft/Ze),ht=Math.round(ht/Ze);var yt=k("rgb("+nt+","+ft+","+ht+")");v._hmpixcount=(v._hmpixcount||0)+Ze,v._hmlumcount=(v._hmlumcount||0)+Ze*yt.getLuminance();var wt=V.selectAll("image").data(P);wt.enter().append("svg:image").attr({xmlns:a.svg,preserveAspectRatio:"none"}),wt.attr({height:se,width:ue,x:I,y:U,"xlink:href":ge.toDataURL("image/png")}),"fast"!==xe||pe||wt.attr("style",f),d(V);var kt=ie.texttemplate;if(kt){var vt=r(ie),Lt={type:"linear",range:[vt.min,vt.max],_separators:w._separators,_numFormat:w._numFormat},St="histogram2dcontour"===ie.type,Ot="contour"===ie.type,Nt=Ot?we-1:we,Bt=Ot?1:0,Vt=Ot?Te-1:Te,nn=[];for(j=Ot?1:0;j<Nt;j++){var gn;if(Ot)gn=q.y[j];else if(St){if(0===j||j===we-1)continue;gn=q.y[j]}else if(q.yCenter)gn=q.yCenter[j];else{if(j+1===we&&void 0===q.y[j+1])continue;gn=(q.y[j]+q.y[j+1])/2}var Jt=Math.round(E.c2p(gn));if(!(0>Jt||Jt>E._length))for(Y=Bt;Y<Vt;Y++){var an;if(Ot)an=q.x[Y];else if(St){if(0===Y||Y===Te-1)continue;an=q.x[Y]}else if(q.xCenter)an=q.xCenter[Y];else{if(Y+1===Te&&void 0===q.x[Y+1])continue;an=(q.x[Y]+q.x[Y+1])/2}var Xt=Math.round(w.c2p(an));if(!(0>Xt||Xt>w._length)){var Gn=t({x:an,y:gn},ie,v._fullLayout);Gn.x=an,Gn.y=gn;var Dn=q.z[j][Y];void 0===Dn?(Gn.z="",Gn.zLabel=""):(Gn.z=Dn,Gn.zLabel=_.tickText(Lt,Dn,"hover").text);var An=q.text&&q.text[j]&&q.text[j][Y];void 0!==An&&!1!==An||(An=""),Gn.text=An;var cn=p.texttemplateString(kt,Gn,v._fullLayout._d3locale,Gn,ie._meta||{});if(cn){var bn=cn.split("<br>"),hn=bn.length,wn=0;for(B=0;B<hn;B++)wn=Math.max(wn,bn[B].length);nn.push({l:hn,c:wn,t:cn,x:Xt,y:Jt,z:Dn})}}}}var Ln=ie.textfont,Pn=Ln.size,Nn=v._fullLayout.font.size;if(!Pn||"auto"===Pn){var jn=1/0,Fn=1/0,Jn=0,Zn=0;for(B=0;B<nn.length;B++){var hr=nn[B];if(Jn=Math.max(Jn,hr.l),Zn=Math.max(Zn,hr.c),B<nn.length-1){var rr=nn[B+1],dr=Math.abs(rr.x-hr.x),nr=Math.abs(rr.y-hr.y);dr&&(jn=Math.min(jn,dr)),nr&&(Fn=Math.min(Fn,nr))}}isFinite(jn)&&isFinite(Fn)?(jn-=te,Fn-=ee,jn/=Zn,Fn/=Jn,jn/=s/2,Fn/=s,Pn=Math.min(Math.floor(jn),Math.floor(Fn),Nn)):Pn=Nn}if(Pn<=0||!isFinite(Pn))return;y(V).data(nn).enter().append("g").classed(c,1).append("text").attr("text-anchor","middle").each(function(Sr){var Un,ln=M.select(this),dn=Ln.color;dn&&"auto"!==dn||(dn=i.contrast(void 0===Sr.z?v._fullLayout.plot_bgcolor:"rgba("+Pe(Sr.z).join()+")")),ln.attr("data-notex",1).call(l.positionText,(Un=Sr,Un.x),function(Un){return Un.y-Pn*(Un.l*s/2-1)}(Sr)).call(T.font,{family:Ln.family,size:Pn,color:dn,weight:Ln.weight,style:Ln.style,variant:Ln.variant,textcase:Ln.textcase,lineposition:Ln.lineposition,shadow:Ln.shadow}).text(Sr.t).call(l.convertToTspans,v)})}})}},41648:function(ne,F,e){"use strict";var M=e(33428);ne.exports=function(k){M.select(k).selectAll(".hm image").style("opacity",function(o){return o.trace.opacity})}},82748:function(ne){"use strict";ne.exports=function(F,e,M){!1===M("zsmooth")&&(M("xgap"),M("ygap")),M("zhoverformat")}},51264:function(ne,F,e){"use strict";var M=e(38248),k=e(3400),o=e(24040);function T(_,p){var l=p(_);return"scaled"===(l?p(_+"type","array"):"scaled")&&(p(_+"0"),p("d"+_)),l}ne.exports=function(_,p,l,t,i,r){var n,a,s=l("z");if(i=i||"x",r=r||"y",void 0===s||!s.length)return 0;if(k.isArray1D(s)){n=l(i),a=l(r);var u=k.minRowLength(n),f=k.minRowLength(a);if(0===u||0===f)return 0;p._length=Math.min(u,f,s.length)}else{if(n=T(i,l),a=T(r,l),!function(c){for(var y,d=!0,m=!1,g=!1,x=0;x<c.length;x++){if(!k.isArrayOrTypedArray(y=c[x])){d=!1;break}y.length>0&&(m=!0);for(var v=0;v<y.length;v++)if(M(y[v])){g=!0;break}}return d&&m&&g}(s))return 0;l("transpose"),p._length=null}return"heatmapgl"===_.type||o.getComponentMethod("calendars","handleTraceDefaults")(_,p,[i,r],t),!0}},74512:function(ne,F,e){"use strict";for(var M=e(83328),k=e(49084),o=e(92880).extendFlat,T=e(67824).overrideAll,_=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],p={},l=0;l<_.length;l++){var t=_[l];p[t]=M[t]}p.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},o(p,k("",{cLetter:"z",autoColorDflt:!1})),ne.exports=T(p,"calc","nested")},84656:function(ne,F,e){"use strict";var M=e(67792).gl_heatmap2d,k=e(54460),o=e(43080);function T(p,l){this.scene=p,this.uid=l,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=M(p.glplot,this.options),this.heatmap._trace=this}var _=T.prototype;_.handlePick=function(p){var l=this.options,t=l.shape,i=p.pointId,r=i%t[0],n=Math.floor(i/t[0]);return{trace:this,dataCoord:p.dataCoord,traceCoord:[l.x[r],l.y[n],l.z[i]],textLabel:this.textLabels[i],name:this.name,pointIndex:[n,r],hoverinfo:this.hoverinfo}},_.update=function(p,l){var t=l[0];this.index=p.index,this.name=p.name,this.hoverinfo=p.hoverinfo;var i=t.z;this.options.z=[].concat.apply([],i),this.options.shape=[i[0].length,i.length],this.options.x=t.x,this.options.y=t.y,this.options.zsmooth=p.zsmooth;var a=function(y){for(var d=y.colorscale,m=y.zmin,g=y.zmax,x=d.length,v=new Array(x),b=new Array(4*x),h=0;h<x;h++){var S=d[h],w=o(S[1]);v[h]=m+S[0]*(g-m);for(var E=0;E<4;E++)b[4*h+E]=w[E]}return{colorLevels:v,colorValues:b}}(p);this.options.colorLevels=a.colorLevels,this.options.colorValues=a.colorValues,this.textLabels=[].concat.apply([],p.text),this.heatmap.update(this.options);var s,u,f=this.scene.xaxis,c=this.scene.yaxis;!1===p.zsmooth&&(s={ppad:t.x[1]-t.x[0]},u={ppad:t.y[1]-t.y[0]}),p._extremes[f._id]=k.findExtremes(f,t.x,s),p._extremes[c._id]=k.findExtremes(c,t.y,u)},_.dispose=function(){this.heatmap.dispose()},ne.exports=function(p,l,t){var i=new T(p,l.uid);return i.update(l,t),i}},86464:function(ne,F,e){"use strict";var M=e(3400),k=e(51264),o=e(27260),T=e(74512);ne.exports=function(_,p,l,t){function i(r,n){return M.coerce(_,p,T,r,n)}k(_,p,i,t)?(i("text"),i("zsmooth"),o(_,p,t,i,{prefix:"",cLetter:"z"})):p.visible=!1}},45536:function(ne,F,e){"use strict";["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" "),ne.exports={attributes:e(74512),supplyDefaults:e(86464),colorbar:e(96288),calc:e(19512),plot:e(84656),moduleType:"trace",name:"heatmapgl",basePlotModule:e(39952),categories:["gl","gl2d","2dMap"],meta:{}}},40196:function(ne,F,e){"use strict";var M=e(20832),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(21776).Gw,_=e(25376),p=e(11120),l=e(73316),t=e(92880).extendFlat;ne.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:k("x"),yhoverformat:k("y"),text:t({},M.text,{}),hovertext:t({},M.hovertext,{}),orientation:M.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:p("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:p("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:o({},{keys:l.eventDataKeys}),texttemplate:T({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:t({},M.textposition,{arrayOk:!1}),textfont:_({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:_({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:_({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:M.insidetextanchor,textangle:M.textangle,cliponaxis:M.cliponaxis,constraintext:M.constraintext,marker:M.marker,offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:M.selected,unselected:M.unselected,_deprecated:{bardir:M._deprecated.bardir},zorder:M.zorder}},2e3:function(ne){"use strict";ne.exports=function(F,e){for(var M=F.length,k=0,o=0;o<M;o++)e[o]?(F[o]/=e[o],k+=F[o]):F[o]=null;return k}},11120:function(ne){"use strict";ne.exports=function(F,e){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},16964:function(ne,F,e){"use strict";var M=e(38248);ne.exports={count:function(k,o,T){return T[k]++,1},sum:function(k,o,T,_){var p=_[o];return M(p)?(p=Number(p),T[k]+=p,p):0},avg:function(k,o,T,_,p){var l=_[o];return M(l)&&(l=Number(l),T[k]+=l,p[k]++),0},min:function(k,o,T,_){var p=_[o];if(M(p)){if(p=Number(p),!M(T[k]))return T[k]=p,p;if(T[k]>p){var l=p-T[k];return T[k]=p,l}}return 0},max:function(k,o,T,_){var p=_[o];if(M(p)){if(p=Number(p),!M(T[k]))return T[k]=p,p;if(T[k]<p){var l=p-T[k];return T[k]=p,l}}return 0}}},67712:function(ne,F,e){"use strict";var M=e(39032),k=M.ONEAVGYEAR,o=M.ONEAVGMONTH,T=M.ONEDAY,_=M.ONEHOUR,p=M.ONEMIN,l=M.ONESEC,t=e(54460).tickIncrement;function i(s,u,f,c){if(s*u<=0)return 1/0;for(var y=Math.abs(u-s),d="date"===f.type,m=r(y,d),g=0;g<10;g++){var x=r(80*m,d);if(m===x||!n(x,s,u,d,f,c))break;m=x}return m}function r(s,u){return u&&s>l?s>T?s>1.1*k?k:s>1.1*o?o:T:s>_?_:s>p?p:l:Math.pow(10,Math.floor(Math.log(s)/Math.LN10))}function n(s,u,f,c,y,d){if(c&&s>T){var m=a(u,y,d),g=a(f,y,d),x=s===k?0:1;return m[x]!==g[x]}return Math.floor(f/s)-Math.floor(u/s)>.1}function a(s,u,f){var c=u.c2d(s,k,f).split("-");return""===c[0]&&(c.unshift(),c[0]="-"+c[0]),c}ne.exports=function(s,u,f,c,y){var d,m,g=-1.1*u,x=-.1*u,v=s-x,b=f[0],h=f[1],S=Math.min(i(b+x,b+v,c,y),i(h+x,h+v,c,y)),w=Math.min(i(b+g,b+x,c,y),i(h+g,h+x,c,y));if(S>w&&w<Math.abs(h-b)/4e3?(d=S,m=!1):(d=Math.min(S,w),m=!0),"date"===c.type&&d>T){var E=d===k?1:6,P=d===k?"M12":"M1";return function(I,O){var z=c.c2d(I,k,y),U=z.indexOf("-",E);U>0&&(z=z.substr(0,U));var R=c.d2c(z,0,y);if(R<I){var j=t(R,P,!1,y);(R+j)/2<I+s&&(R=j)}return O&&m?t(R,P,!0,y):R}}return function(I,O){var z=d*Math.round(I/d);return z+d/10<I&&z+.9*d<I+s&&(z+=d),O&&m&&(z-=d),z}}},35852:function(ne,F,e){"use strict";var M=e(38248),k=e(3400),o=e(24040),T=e(54460),_=e(84664),p=e(16964),l=e(10648),t=e(2e3),i=e(67712);function r(n,a,s,u,f){var c,y,d,m,g,x,v,b=u+"bins",h=n._fullLayout,w=h._histogramBinOpts[a["_"+u+"bingroup"]],E="overlay"===h.barmode,P=function(ve){return s.r2c(ve,0,m)},I=function(ve){return s.c2r(ve,0,m)},O="date"===s.type?function(ve){return ve||0===ve?k.cleanDate(ve,null,m):null}:function(ve){return M(ve)?Number(ve):null};function z(ve,xe,Ce){xe[ve+"Found"]?(xe[ve]=O(xe[ve]),null===xe[ve]&&(xe[ve]=Ce[ve])):(x[ve]=xe[ve]=Ce[ve],k.nestedProperty(y[0],b+"."+ve).set(Ce[ve]))}if(a["_"+u+"autoBinFinished"])delete a["_"+u+"autoBinFinished"];else{y=w.traces;var U=[],R=!0,j=!1,Y=!1;for(c=0;c<y.length;c++)if((d=y[c]).visible){var B=w.dirs[c];g=d["_"+B+"pos0"]=s.makeCalcdata(d,B),U=k.concat(U,g),delete d["_"+u+"autoBinFinished"],!0===a.visible&&(R?R=!1:(delete d._autoBin,d["_"+u+"autoBinFinished"]=1),o.traceIs(d,"2dMap")&&(j=!0),"histogram2dcontour"===d.type&&(Y=!0))}var V=T.autoBin(U,s,w.nbins,j,m=y[0][u+"calendar"],w.sizeFound&&w.size),q=y[0]._autoBin={};if(x=q[w.dirs[0]]={},Y&&(w.size||(V.start=I(T.tickIncrement(P(V.start),V.size,!0,m))),void 0===w.end&&(V.end=I(T.tickIncrement(P(V.end),V.size,!1,m)))),E&&!o.traceIs(a,"2dMap")&&0===V._dataSpan&&"category"!==s.type&&"multicategory"!==s.type&&""===a.bingroup&&void 0===a.xbins){if(f)return[V,g,!0];V=function(ve,xe,Ce,Oe,be){var ue,se,ge,Ie=ve._fullLayout,ke=function(nt,ft){for(var ht=ft.xaxis,Tt=ft.yaxis,At=ft.orientation,_t=[],ot=nt._fullData,it=0;it<ot.length;it++){var Pt=ot[it];"histogram"===Pt.type&&!0===Pt.visible&&Pt.orientation===At&&Pt.xaxis===ht&&Pt.yaxis===Tt&&_t.push(Pt)}return _t}(ve,xe),Se=!1,Pe=1/0,Fe=[xe];for(ue=0;ue<ke.length;ue++)if((se=ke[ue])===xe)Se=!0;else if(Se){var Be=r(ve,se,Ce,Oe,!0),me=Be[0],Me=Be[2];se["_"+Oe+"autoBinFinished"]=1,se["_"+Oe+"pos0"]=Be[1],Me?Fe.push(se):Pe=Math.min(Pe,me.size)}else ge=Ie._histogramBinOpts[se["_"+Oe+"bingroup"]],Pe=Math.min(Pe,ge.size||se[be].size);var Le=new Array(Fe.length);for(ue=0;ue<Fe.length;ue++)for(var Ne=Fe[ue]["_"+Oe+"pos0"],Re=0;Re<Ne.length;Re++)if(void 0!==Ne[Re]){Le[ue]=Ne[Re];break}for(isFinite(Pe)||(Pe=k.distinctVals(Le).minDiff),ue=0;ue<Fe.length;ue++){var He=(se=Fe[ue])[Oe+"calendar"],Ze={start:Ce.c2r(Le[ue]-Pe/2,0,He),end:Ce.c2r(Le[ue]+Pe/2,0,He),size:Pe};se._input[be]=se[be]=Ze,(ge=Ie._histogramBinOpts[se["_"+Oe+"bingroup"]])&&k.extendFlat(ge,Ze)}return xe[be]}(n,a,s,u,b)}(v=d.cumulative||{}).enabled&&"include"!==v.currentbin&&("decreasing"===v.direction?V.start=I(T.tickIncrement(P(V.start),V.size,!0,m)):V.end=I(T.tickIncrement(P(V.end),V.size,!1,m))),w.size=V.size,w.sizeFound||(x.size=V.size,k.nestedProperty(y[0],b+".size").set(V.size)),z("start",w,V),z("end",w,V)}g=a["_"+u+"pos0"],delete a["_"+u+"pos0"];var ie=a._input[b]||{},te=k.extendFlat({},w),ee=w.start,$=s.r2l(ie.start),J=void 0!==$;if((w.startFound||J)&&$!==s.r2l(ee)){var X=J?$:k.aggNums(Math.min,null,g),ae={type:"category"===s.type||"multicategory"===s.type?"linear":s.type,r2l:s.r2l,dtick:w.size,tick0:ee,calendar:m,range:[X,T.tickIncrement(X,w.size,!1,m)].map(s.l2r)},ce=T.tickFirst(ae);ce>s.r2l(X)&&(ce=T.tickIncrement(ce,w.size,!0,m)),te.start=s.l2r(ce),J||k.nestedProperty(a,b+".start").set(te.start)}var le=w.end,pe=s.r2l(ie.end),we=void 0!==pe;if((w.endFound||we)&&pe!==s.r2l(le)){var Te=we?pe:k.aggNums(Math.max,null,g);te.end=s.l2r(Te),we||k.nestedProperty(a,b+".start").set(te.end)}var ye="autobin"+u;return!1===a._input[ye]&&(a._input[b]=k.extendFlat({},a[b]||{}),delete a._input[ye],delete a[ye]),[te,g]}ne.exports={calc:function(n,a){var s,u,f,c,y=[],d=[],m="h"===a.orientation,g=T.getFromId(n,m?a.yaxis:a.xaxis),x=m?"y":"x",v={x:"y",y:"x"}[x],b=a[x+"calendar"],h=a.cumulative,S=r(n,a,g,x),w=S[0],E=S[1],P="string"==typeof w.size,I=[],O=P?I:w,z=[],U=[],R=[],j=0,Y=a.histnorm,B=a.histfunc,V=-1!==Y.indexOf("density");h.enabled&&V&&(Y=Y.replace(/ ?density$/,""),V=!1);var q,ie="max"===B||"min"===B?null:0,te=p.count,ee=l[Y],$=!1,J=function(se){return g.r2c(se,0,b)};for(k.isArrayOrTypedArray(a[v])&&"count"!==B&&(q=a[v],$="avg"===B,te=p[B]),s=J(w.start),f=J(w.end)+(s-T.tickIncrement(s,w.size,!1,b))/1e6;s<f&&y.length<1e6&&(u=T.tickIncrement(s,w.size,!1,b),y.push((s+u)/2),d.push(ie),R.push([]),I.push(s),V&&z.push(1/(u-s)),$&&U.push(0),!(u<=s));)s=u;I.push(s),P||"date"!==g.type||(O={start:J(O.start),end:J(O.end),size:O.size}),n._fullLayout._roundFnOpts||(n._fullLayout._roundFnOpts={});var X=a["_"+x+"bingroup"],ae={leftGap:1/0,rightGap:1/0};X&&(n._fullLayout._roundFnOpts[X]||(n._fullLayout._roundFnOpts[X]=ae),ae=n._fullLayout._roundFnOpts[X]);var ce,le=d.length,pe=!0,we=ae.leftGap,Te=ae.rightGap,ye={};for(s=0;s<E.length;s++){var ve=E[s];(c=k.findBin(ve,O))>=0&&c<le&&(j+=te(c,s,d,q,U),pe&&R[c].length&&ve!==E[R[c][0]]&&(pe=!1),R[c].push(s),ye[s]=c,we=Math.min(we,ve-I[c]),Te=Math.min(Te,I[c+1]-ve))}ae.leftGap=we,ae.rightGap=Te,pe||(ce=function(se,ge){return function(){var Ie=n._fullLayout._roundFnOpts[X];return i(Ie.leftGap,Ie.rightGap,I,g,b)(se,ge)}}),$&&(j=t(d,U)),ee&&ee(d,j,z),h.enabled&&function(se,ge,Ie){var ke,Se,Pe;function Fe(me){Pe=se[me],se[me]/=2}function Be(me){se[me]=Pe+(Se=se[me])/2,Pe+=Se}if("half"===Ie)if("increasing"===ge)for(Fe(0),ke=1;ke<se.length;ke++)Be(ke);else for(Fe(se.length-1),ke=se.length-2;ke>=0;ke--)Be(ke);else if("increasing"===ge){for(ke=1;ke<se.length;ke++)se[ke]+=se[ke-1];"exclude"===Ie&&(se.unshift(0),se.pop())}else{for(ke=se.length-2;ke>=0;ke--)se[ke]+=se[ke+1];"exclude"===Ie&&(se.push(0),se.shift())}}(d,h.direction,h.currentbin);var xe=Math.min(y.length,d.length),Ce=[],Oe=0,be=xe-1;for(s=0;s<xe;s++)if(d[s]){Oe=s;break}for(s=xe-1;s>=Oe;s--)if(d[s]){be=s;break}for(s=Oe;s<=be;s++)if(M(y[s])&&M(d[s])){var ue={p:y[s],s:d[s],b:0};h.enabled||(ue.pts=R[s],pe?ue.ph0=ue.ph1=R[s].length?E[R[s][0]]:y[s]:(a._computePh=!0,ue.ph0=ce(I[s]),ue.ph1=ce(I[s+1],!0))),Ce.push(ue)}return 1===Ce.length&&(Ce[0].width1=T.tickIncrement(Ce[0].p,w.size,!1,b)-Ce[0].p),_(Ce,a),k.isArrayOrTypedArray(a.selectedpoints)&&k.tagSelected(Ce,a,ye),Ce},calcAllAutoBins:r}},73316:function(ne){"use strict";ne.exports={eventDataKeys:["binNumber"]}},80536:function(ne,F,e){"use strict";var M=e(3400),k=e(79811),o=e(24040).traceIs,T=e(20011),_=e(31508).validateCornerradius,p=M.nestedProperty,l=e(71888).getAxisGroup,t=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],i=["x","y"];ne.exports=function(r,n){var a,s,u,f,c,y,d,m=n._histogramBinOpts={},g=[],x={},v=[];function b(ie,te){return M.coerce(a._input,a,a._module.attributes,ie,te)}function h(ie){return"v"===ie.orientation?"x":"y"}function S(ie,te,ee){var $=ie.uid+"__"+ee;te||(te=$);var J=k.getFromTrace({_fullLayout:n},ie,ee).type,X=ie[ee+"calendar"]||"",ae=m[te],ce=!0;ae&&(J===ae.axType&&X===ae.calendar?(ce=!1,ae.traces.push(ie),ae.dirs.push(ee)):(te=$,J!==ae.axType&&M.warn(["Attempted to group the bins of trace",ie.index,"set on a","type:"+J,"axis","with bins on","type:"+ae.axType,"axis."].join(" ")),X!==ae.calendar&&M.warn(["Attempted to group the bins of trace",ie.index,"set with a",X,"calendar","with bins",ae.calendar?"on a "+ae.calendar+" calendar":"w/o a set calendar"].join(" ")))),ce&&(m[te]={traces:[ie],dirs:[ee],axType:J,calendar:ie[ee+"calendar"]||""}),ie["_"+ee+"bingroup"]=te}for(c=0;c<r.length;c++)if(o(a=r[c],"histogram")){if(g.push(a),delete a._xautoBinFinished,delete a._yautoBinFinished,"histogram"===a.type){var w=b("marker.cornerradius",n.barcornerradius);a.marker&&(a.marker.cornerradius=_(w))}o(a,"2dMap")||T(a._input,a,n,b)}var E=n._alignmentOpts||{};for(c=0;c<g.length;c++){if(u="",!o(a=g[c],"2dMap")){if(f=h(a),"group"===n.barmode&&a.alignmentgroup){var I=l(n,a[f+"axis"])+a.orientation;(E[I]||{})[a.alignmentgroup]&&(u=I)}u||"overlay"===n.barmode||(u=l(n,a.xaxis)+l(n,a.yaxis)+h(a))}u?(x[u]||(x[u]=[]),x[u].push(a)):v.push(a)}for(u in x)if(1!==(s=x[u]).length){var O=!1;for(s.length&&(a=s[0],O=b("bingroup")),u=O||u,c=0;c<s.length;c++){var z=(a=s[c])._input.bingroup;z&&z!==u&&M.warn(["Trace",a.index,"must match","within bingroup",u+".","Ignoring its bingroup:",z,"setting."].join(" ")),a.bingroup=u,S(a,u,h(a))}}else v.push(s[0]);for(c=0;c<v.length;c++){a=v[c];var U=b("bingroup");if(o(a,"2dMap"))for(d=0;d<2;d++){var R=b((f=i[d])+"bingroup",U?U+"__"+f:null);S(a,R,f)}else S(a,U,h(a))}for(u in m){var j=m[u];for(s=j.traces,y=0;y<t.length;y++){var Y,B,V=t[y],q=V.name;if("nbins"!==q||!j.sizeFound){for(c=0;c<s.length;c++){if(void 0!==p((a=s[c])._input,Y=V.aStr[f=j.dirs[c]]).get()){j[q]=b(Y),j[q+"Found"]=!0;break}(B=(a._autoBin||{})[f]||{})[q]&&p(a,Y).set(B[q])}if("start"===q||"end"===q)for(;c<s.length;c++)(a=s[c])["_"+f+"bingroup"]&&b(Y,(B=(a._autoBin||{})[f]||{})[q]);"nbins"!==q||j.sizeFound||j.nbinsFound||(a=s[0],j[q]=b(Y))}}}}},6616:function(ne,F,e){"use strict";var M=e(24040),k=e(3400),o=e(76308),T=e(31508).handleText,_=e(55592),p=e(40196);ne.exports=function(l,t,i,r){function n(x,v){return k.coerce(l,t,p,x,v)}var a=n("x"),s=n("y");n("cumulative.enabled")&&(n("cumulative.direction"),n("cumulative.currentbin")),n("text");var u=n("textposition");T(l,t,r,n,u,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),n("hovertext"),n("hovertemplate"),n("xhoverformat"),n("yhoverformat");var f=n("orientation",s&&!a?"h":"v"),c="v"===f?"x":"y",y="v"===f?"y":"x",d=a&&s?Math.min(k.minRowLength(a)&&k.minRowLength(s)):k.minRowLength(t[c]||[]);if(d){t._length=d,M.getComponentMethod("calendars","handleTraceDefaults")(l,t,["x","y"],r),t[y]&&n("histfunc"),n("histnorm"),n("autobin"+c),_(l,t,n,i,r),k.coerceSelectionMarkerOpacity(t,n);var m=(t.marker.line||{}).color,g=M.getComponentMethod("errorbars","supplyDefaults");g(l,t,m||o.defaultLine,{axis:"y"}),g(l,t,m||o.defaultLine,{axis:"x",inherit:"y"}),n("zorder")}else t.visible=!1}},84980:function(ne){"use strict";ne.exports=function(F,e,M,k,o){if(F.x="xVal"in e?e.xVal:e.x,F.y="yVal"in e?e.yVal:e.y,"zLabelVal"in e&&(F.z=e.zLabelVal),e.xa&&(F.xaxis=e.xa),e.ya&&(F.yaxis=e.ya),!(M.cumulative||{}).enabled){var T,_=Array.isArray(o)?k[0].pts[o[0]][o[1]]:k[o].pts;if(F.pointNumbers=_,F.binNumber=F.pointNumber,delete F.pointNumber,delete F.pointIndex,M._indexToPoints){T=[];for(var p=0;p<_.length;p++)T=T.concat(M._indexToPoints[_[p]])}else T=_;F.pointIndices=T}return F}},43339:function(ne,F,e){"use strict";var M=e(63400).hoverPoints,k=e(54460).hoverLabelText;ne.exports=function(o,T,_,p,l){var t=M(o,T,_,p,l);if(t){var i=(o=t[0]).cd[o.index],r=o.cd[0].trace;if(!r.cumulative.enabled){var n="h"===r.orientation?"y":"x";o[n+"Label"]=k(o[n+"a"],[i.ph0,i.ph1],r[n+"hoverformat"])}return t}}},42600:function(ne,F,e){"use strict";ne.exports={attributes:e(40196),layoutAttributes:e(39324),supplyDefaults:e(6616),crossTraceDefaults:e(80536),supplyLayoutDefaults:e(37156),calc:e(35852).calc,crossTraceCalc:e(96376).crossTraceCalc,plot:e(98184).plot,layerName:"barlayer",style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,colorbar:e(5528),hoverPoints:e(43339),selectPoints:e(45784),eventData:e(84980),moduleType:"trace",name:"histogram",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},10648:function(ne){"use strict";ne.exports={percent:function(F,e){for(var M=F.length,k=100/e,o=0;o<M;o++)F[o]*=k},probability:function(F,e){for(var M=F.length,k=0;k<M;k++)F[k]/=e},density:function(F,e,M,k){var o=F.length;k=k||1;for(var T=0;T<o;T++)F[T]*=M[T]*k},"probability density":function(F,e,M,k){var o=F.length;k&&(e/=k);for(var T=0;T<o;T++)F[T]*=M[T]/e}}},37008:function(ne,F,e){"use strict";var M=e(40196),k=e(11120),o=e(83328),T=e(45464),_=e(29736).axisHoverFormat,p=e(21776).Ks,l=e(21776).Gw,t=e(49084),i=e(92880).extendFlat;ne.exports=i({x:M.x,y:M.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:M.histnorm,histfunc:M.histfunc,nbinsx:M.nbinsx,xbins:k("x"),nbinsy:M.nbinsy,ybins:k("y"),autobinx:M.autobinx,autobiny:M.autobiny,bingroup:i({},M.bingroup,{}),xbingroup:i({},M.bingroup,{}),ybingroup:i({},M.bingroup,{}),xgap:o.xgap,ygap:o.ygap,zsmooth:o.zsmooth,xhoverformat:_("x"),yhoverformat:_("y"),zhoverformat:_("z",1),hovertemplate:p({},{keys:"z"}),texttemplate:l({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:o.textfont,showlegend:i({},T.showlegend,{dflt:!1})},t("",{cLetter:"z",autoColorDflt:!1}))},55480:function(ne,F,e){"use strict";var M=e(3400),k=e(54460),o=e(16964),T=e(10648),_=e(2e3),p=e(67712),l=e(35852).calcAllAutoBins;function t(n,a,s,u){var f,c=new Array(n);if(u)for(f=0;f<n;f++)c[f]=1/(a[f+1]-a[f]);else{var y=1/s;for(f=0;f<n;f++)c[f]=y}return c}function i(n,a){return{start:n(a.start),end:n(a.end),size:a.size}}function r(n,a,s,u,f,c){var y,d=n.length-1,m=new Array(d),g=p(s,u,n,f,c);for(y=0;y<d;y++){var x=(a||[])[y];m[y]=void 0===x?[g(n[y]),g(n[y+1],!0)]:[x,x]}return m}ne.exports=function(n,a){var s,u,f,c,y=k.getFromId(n,a.xaxis),d=k.getFromId(n,a.yaxis),m=a.xcalendar,g=a.ycalendar,x=function(Tt){return y.r2c(Tt,0,m)},v=function(Tt){return d.r2c(Tt,0,g)},b=l(n,a,y,"x"),h=b[0],S=b[1],w=l(n,a,d,"y"),E=w[0],P=w[1],I=a._length;S.length>I&&S.splice(I,S.length-I),P.length>I&&P.splice(I,P.length-I);var O=[],z=[],U=[],R="string"==typeof h.size,j="string"==typeof E.size,Y=[],B=[],V=R?Y:h,q=j?B:E,ie=0,te=[],ee=[],$=a.histnorm,J=a.histfunc,X=-1!==$.indexOf("density"),ae="max"===J||"min"===J?null:0,ce=o.count,le=T[$],pe=!1,we=[],Te=[],ye="z"in a?a.z:"marker"in a&&Array.isArray(a.marker.color)?a.marker.color:"";ye&&"count"!==J&&(pe="avg"===J,ce=o[J]);var ve=h.size,xe=x(h.start),Ce=x(h.end)+(xe-k.tickIncrement(xe,ve,!1,m))/1e6;for(s=xe;s<Ce;s=k.tickIncrement(s,ve,!1,m))z.push(ae),Y.push(s),pe&&U.push(0);Y.push(s);var be=z.length,ue=(s-xe)/be,se=y.c2r(xe+ue/2,0,m),ge=E.size,Ie=v(E.start),ke=v(E.end)+(Ie-k.tickIncrement(Ie,ge,!1,g))/1e6;for(s=Ie;s<ke;s=k.tickIncrement(s,ge,!1,g)){O.push(z.slice()),B.push(s);var Se=new Array(be);for(u=0;u<be;u++)Se[u]=[];ee.push(Se),pe&&te.push(U.slice())}B.push(s);var Pe=O.length,Fe=(s-Ie)/Pe,Be=d.c2r(Ie+Fe/2,0,g);X&&(we=t(z.length,V,ue,R),Te=t(O.length,q,Fe,j)),R||"date"!==y.type||(V=i(x,V)),j||"date"!==d.type||(q=i(v,q));var me=!0,Me=!0,Le=new Array(be),Ne=new Array(Pe),Re=1/0,He=1/0,Ze=1/0,nt=1/0;for(s=0;s<I;s++){var ft=S[s],ht=P[s];f=M.findBin(ft,V),c=M.findBin(ht,q),f>=0&&f<be&&c>=0&&c<Pe&&(ie+=ce(f,s,O[c],ye,te[c]),ee[c][f].push(s),me&&(void 0===Le[f]?Le[f]=ft:Le[f]!==ft&&(me=!1)),Me&&(void 0===Ne[c]?Ne[c]=ht:Ne[c]!==ht&&(Me=!1)),Re=Math.min(Re,ft-Y[f]),He=Math.min(He,Y[f+1]-ft),Ze=Math.min(Ze,ht-B[c]),nt=Math.min(nt,B[c+1]-ht))}if(pe)for(c=0;c<Pe;c++)ie+=_(O[c],te[c]);if(le)for(c=0;c<Pe;c++)le(O[c],ie,we,Te[c]);return{x:S,xRanges:r(Y,me&&Le,Re,He,y,m),x0:se,dx:ue,y:P,yRanges:r(B,Me&&Ne,Ze,nt,d,g),y0:Be,dy:Fe,z:O,pts:ee}}},99784:function(ne,F,e){"use strict";var M=e(3400),k=e(56408),o=e(82748),T=e(27260),_=e(39096),p=e(37008);ne.exports=function(l,t,i,r){function n(a,s){return M.coerce(l,t,p,a,s)}k(l,t,n,r),!1!==t.visible&&(o(l,t,n,r),T(l,t,r,n,{prefix:"",cLetter:"z"}),n("hovertemplate"),_(n,r),n("xhoverformat"),n("yhoverformat"))}},59576:function(ne,F,e){"use strict";var M=e(55512),k=e(54460).hoverLabelText;ne.exports=function(o,T,_,p,l){var t=M(o,T,_,p,l);if(t){var i=(o=t[0]).index,a=o.cd[0],s=a.trace,u=a.xRanges[i[1]],f=a.yRanges[i[0]];return o.xLabel=k(o.xa,[u[0],u[1]],s.xhoverformat),o.yLabel=k(o.ya,[f[0],f[1]],s.yhoverformat),t}}},21536:function(ne,F,e){"use strict";ne.exports={attributes:e(37008),supplyDefaults:e(99784),crossTraceDefaults:e(80536),calc:e(19512),plot:e(41420),layerName:"heatmaplayer",colorbar:e(96288),style:e(41648),hoverPoints:e(59576),eventData:e(84980),moduleType:"trace",name:"histogram2d",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},56408:function(ne,F,e){"use strict";var M=e(24040),k=e(3400);ne.exports=function(o,T,_,p){var l=_("x"),t=_("y"),i=k.minRowLength(l),r=k.minRowLength(t);i&&r?(T._length=Math.min(i,r),M.getComponentMethod("calendars","handleTraceDefaults")(o,T,["x","y"],p),(_("z")||_("marker.color"))&&_("histfunc"),_("histnorm"),_("autobinx"),_("autobiny")):T.visible=!1}},81220:function(ne,F,e){"use strict";var M=e(37008),k=e(67104),o=e(49084),T=e(29736).axisHoverFormat,_=e(92880).extendFlat;ne.exports=_({x:M.x,y:M.y,z:M.z,marker:M.marker,histnorm:M.histnorm,histfunc:M.histfunc,nbinsx:M.nbinsx,xbins:M.xbins,nbinsy:M.nbinsy,ybins:M.ybins,autobinx:M.autobinx,autobiny:M.autobiny,bingroup:M.bingroup,xbingroup:M.xbingroup,ybingroup:M.ybingroup,autocontour:k.autocontour,ncontours:k.ncontours,contours:k.contours,line:{color:k.line.color,width:_({},k.line.width,{dflt:.5}),dash:k.line.dash,smoothing:k.line.smoothing,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:M.hovertemplate,texttemplate:k.texttemplate,textfont:k.textfont},o("",{cLetter:"z",editTypeOverride:"calc"}))},3704:function(ne,F,e){"use strict";var M=e(3400),k=e(56408),o=e(84952),T=e(97680),_=e(39096),p=e(81220);ne.exports=function(l,t,i,r){function n(a,s){return M.coerce(l,t,p,a,s)}k(l,t,n,r),!1!==t.visible&&(o(l,t,n,function(a){return M.coerce2(l,t,p,a)}),T(l,t,n,r),n("xhoverformat"),n("yhoverformat"),n("hovertemplate"),t.contours&&"heatmap"===t.contours.coloring&&_(n,r))}},65664:function(ne,F,e){"use strict";ne.exports={attributes:e(81220),supplyDefaults:e(3704),crossTraceDefaults:e(80536),calc:e(20688),plot:e(23676).plot,layerName:"contourlayer",style:e(52440),colorbar:e(55296),hoverPoints:e(38200),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},97376:function(ne,F,e){"use strict";var M=e(21776).Ks,k=e(21776).Gw,o=e(49084),T=e(86968).u,_=e(74996),p=e(424),l=e(40516),t=e(32984),i=e(92880).extendFlat,r=e(98192).c;ne.exports={labels:p.labels,parents:p.parents,values:p.values,branchvalues:p.branchvalues,count:p.count,level:p.level,maxdepth:p.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:l.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:i({colors:p.marker.colors,line:p.marker.line,pattern:r,editType:"calc"},o("marker",{colorAttr:"colors",anim:!1})),leaf:p.leaf,pathbar:l.pathbar,text:_.text,textinfo:p.textinfo,texttemplate:k({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),hovertext:_.hovertext,hoverinfo:p.hoverinfo,hovertemplate:M({},{keys:t.eventDataKeys}),textfont:_.textfont,insidetextfont:_.insidetextfont,outsidetextfont:l.outsidetextfont,textposition:l.textposition,sort:_.sort,root:p.root,domain:T({name:"icicle",trace:!0,editType:"calc"})}},59564:function(ne,F,e){"use strict";var M=e(7316);F.name="icicle",F.plot=function(k,o,T,_){M.plotBasePlot(F.name,k,o,T,_)},F.clean=function(k,o,T,_){M.cleanBasePlot(F.name,k,o,T,_)}},73876:function(ne,F,e){"use strict";var M=e(3776);F.r=function(k,o){return M.calc(k,o)},F.q=function(k){return M._runCrossTraceCalc("icicle",k)}},7045:function(ne,F,e){"use strict";var M=e(3400),k=e(97376),o=e(76308),T=e(86968).Q,_=e(31508).handleText,p=e(78048).TEXTPAD,l=e(74174).handleMarkerDefaults,t=e(8932),i=t.hasColorscale,r=t.handleDefaults;ne.exports=function(n,a,s,u){function f(v,b){return M.coerce(n,a,k,v,b)}var c=f("labels"),y=f("parents");if(c&&c.length&&y&&y.length){var d=f("values");f(d&&d.length?"branchvalues":"count"),f("level"),f("maxdepth"),f("tiling.orientation"),f("tiling.flip"),f("tiling.pad");var m=f("text");f("texttemplate"),a.texttemplate||f("textinfo",M.isArrayOrTypedArray(m)?"text+label":"label"),f("hovertext"),f("hovertemplate");var g=f("pathbar.visible");_(n,a,u,f,"auto",{hasPathbar:g,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),f("textposition"),l(n,a,u,f);var x=a._hasColorscale=i(n,"marker","colors")||(n.marker||{}).coloraxis;x&&r(n,a,u,f,{prefix:"marker.",cLetter:"c"}),f("leaf.opacity",x?1:.7),a._hovered={marker:{line:{width:2,color:o.contrast(u.paper_bgcolor)}}},g&&(f("pathbar.thickness",a.pathbar.textfont.size+2*p),f("pathbar.side"),f("pathbar.edgeshape")),f("sort"),f("root.color"),T(a,u,f),a._length=null}else a.visible=!1}},67880:function(ne,F,e){"use strict";var M=e(33428),k=e(3400),o=e(43616),T=e(72736),_=e(25132),p=e(47192).styleOne,l=e(32984),t=e(78176),i=e(45716),r=e(96488).formatSliceLabel,n=!1;ne.exports=function(a,s,u,f,c){var y=c.width,d=c.height,m=c.viewX,g=c.viewY,x=c.pathSlice,v=c.toMoveInsideSlice,b=c.strTransform,h=c.hasTransition,S=c.handleSlicesExit,w=c.makeUpdateSliceInterpolator,E=c.makeUpdateTextInterpolator,P=c.prevEntry,I=a._context.staticPlot,O=a._fullLayout,z=s[0].trace,U=-1!==z.textposition.indexOf("left"),R=-1!==z.textposition.indexOf("right"),j=-1!==z.textposition.indexOf("bottom"),Y=_(u,[y,d],{flipX:z.tiling.flip.indexOf("x")>-1,flipY:z.tiling.flip.indexOf("y")>-1,orientation:z.tiling.orientation,pad:{inner:z.tiling.pad},maxDepth:z._maxDepth}).descendants(),B=1/0,V=-1/0;Y.forEach(function($){var J=$.depth;J>=z._maxDepth?($.x0=$.x1=($.x0+$.x1)/2,$.y0=$.y1=($.y0+$.y1)/2):(B=Math.min(B,J),V=Math.max(V,J))}),f=f.data(Y,t.getPtId),z._maxVisibleLayers=isFinite(V)?V-B+1:0,f.enter().append("g").classed("slice",!0),S(f,n,{},[y,d],x),f.order();var q=null;if(h&&P){var ie=t.getPtId(P);f.each(function($){null===q&&t.getPtId($)===ie&&(q={x0:$.x0,x1:$.x1,y0:$.y0,y1:$.y1})})}var te=function(){return q||{x0:0,x1:y,y0:0,y1:d}},ee=f;return h&&(ee=ee.transition().each("end",function(){var $=M.select(this);t.setSliceCursor($,a,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),ee.each(function($){$._x0=m($.x0),$._x1=m($.x1),$._y0=g($.y0),$._y1=g($.y1),$._hoverX=m($.x1-z.tiling.pad),$._hoverY=g(j?$.y1-z.tiling.pad/2:$.y0+z.tiling.pad/2);var J=M.select(this),X=k.ensureSingle(J,"path","surface",function(pe){pe.style("pointer-events",I?"none":"all")});h?X.transition().attrTween("d",function(pe){var we=w(pe,n,te(),[y,d],{orientation:z.tiling.orientation,flipX:z.tiling.flip.indexOf("x")>-1,flipY:z.tiling.flip.indexOf("y")>-1});return function(Te){return x(we(Te))}}):X.attr("d",x),J.call(i,u,a,s,{styleOne:p,eventDataKeys:l.eventDataKeys,transitionTime:l.CLICK_TRANSITION_TIME,transitionEasing:l.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,a,{isTransitioning:a._transitioning}),X.call(p,$,z,a,{hovered:!1}),$._text=$.x0===$.x1||$.y0===$.y1?"":r($,u,z,s,O)||"";var ae=k.ensureSingle(J,"g","slicetext"),ce=k.ensureSingle(ae,"text","",function(pe){pe.attr("data-notex",1)}),le=k.ensureUniformFontSize(a,t.determineTextFont(z,$,O.font));ce.text($._text||" ").classed("slicetext",!0).attr("text-anchor",R?"end":U?"start":"middle").call(o.font,le).call(T.convertToTspans,a),$.textBB=o.bBox(ce.node()),$.transform=v($,{fontSize:le.size}),$.transform.fontSize=le.size,h?ce.transition().attrTween("transform",function(pe){var we=E(pe,n,te(),[y,d]);return function(Te){return b(we(Te))}}):ce.attr("transform",b($))}),q}},29044:function(ne,F,e){"use strict";ne.exports={moduleType:"trace",name:"icicle",basePlotModule:e(59564),categories:[],animatable:!0,attributes:e(97376),layoutAttributes:e(90676),supplyDefaults:e(7045),supplyLayoutDefaults:e(4304),calc:e(73876).r,crossTraceCalc:e(73876).q,plot:e(38364),style:e(47192).style,colorbar:e(5528),meta:{}}},90676:function(ne){"use strict";ne.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},4304:function(ne,F,e){"use strict";var M=e(3400),k=e(90676);ne.exports=function(o,T){function _(p,l){return M.coerce(o,T,k,p,l)}_("iciclecolorway",T.colorway),_("extendiciclecolors")}},25132:function(ne,F,e){"use strict";var M=e(74148),k=e(83024);ne.exports=function(o,T,_){var p=_.flipX,l=_.flipY,t="h"===_.orientation,i=_.maxDepth,r=T[0],n=T[1];i&&(r=(o.height+1)*T[0]/Math.min(o.height+1,i),n=(o.height+1)*T[1]/Math.min(o.height+1,i));var a=M.partition().padding(_.pad.inner).size(t?[T[1],r]:[T[0],n])(o);return(t||p||l)&&k(a,T,{swapXY:t,flipX:p,flipY:l}),a}},38364:function(ne,F,e){"use strict";var M=e(95808),k=e(67880);ne.exports=function(o,T,_,p){return M(o,T,_,p,{type:"icicle",drawDescendants:k})}},47192:function(ne,F,e){"use strict";var M=e(33428),k=e(76308),o=e(3400),T=e(82744).resizeText,_=e(60404);function p(l,t,i,r){var a=!t.children,s=t.data.data.i,u=o.castOption(i,s,"marker.line.color")||k.defaultLine,f=o.castOption(i,s,"marker.line.width")||0;l.call(_,t,i,r).style("stroke-width",f).call(k.stroke,u).style("opacity",a?i.leaf.opacity:null)}ne.exports={style:function(l){var t=l._fullLayout._iciclelayer.selectAll(".trace");T(l,t,"icicle"),t.each(function(i){var r=M.select(this),n=i[0].trace;r.style("opacity",n.opacity),r.selectAll("path.surface").each(function(a){M.select(this).call(p,a,n,l)})})},styleOne:p}},95188:function(ne,F,e){"use strict";for(var M=e(45464),k=e(52904).zorder,o=e(21776).Ks,T=e(92880).extendFlat,_=e(47797).colormodel,p=["rgb","rgba","rgba256","hsl","hsla"],l=[],t=[],i=0;i<p.length;i++){var r=_[p[i]];l.push("For the `"+p[i]+"` colormodel, it is ["+(r.zminDflt||r.min).join(", ")+"]."),t.push("For the `"+p[i]+"` colormodel, it is ["+(r.zmaxDflt||r.max).join(", ")+"].")}ne.exports=T({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:p,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:T({},M.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:o({},{keys:["z","color","colormodel"]}),zorder:k,transforms:void 0})},93336:function(ne,F,e){"use strict";var M=e(3400),k=e(47797),o=e(38248),T=e(54460),_=e(3400).maxRowLength,p=e(18712).i;function l(i,r,n,a){return function(s){return M.constrain((s-i)*r,n,a)}}function t(i,r){return function(n){return M.constrain(n,i,r)}}ne.exports=function(i,r){var n,a;if(r._hasZ)n=r.z.length,a=_(r.z);else if(r._hasSource){var s=p(r.source);n=s.height,a=s.width}var u,f=T.getFromId(i,r.xaxis||"x"),c=T.getFromId(i,r.yaxis||"y"),y=f.d2c(r.x0)-r.dx/2,d=c.d2c(r.y0)-r.dy/2,m=[y,y+a*r.dx],g=[d,d+n*r.dy];if(f&&"log"===f.type)for(u=0;u<a;u++)m.push(y+u*r.dx);if(c&&"log"===c.type)for(u=0;u<n;u++)g.push(d+u*r.dy);return r._extremes[f._id]=T.findExtremes(f,m),r._extremes[c._id]=T.findExtremes(c,g),r._scaler=function(x){var v=k.colormodel[x.colormodel],b=(v.colormodel||x.colormodel).length;x._sArray=[];for(var h=0;h<b;h++)x._sArray.push(v.min[h]!==x.zmin[h]||v.max[h]!==x.zmax[h]?l(x.zmin[h],(v.max[h]-v.min[h])/(x.zmax[h]-x.zmin[h]),v.min[h],v.max[h]):t(v.min[h],v.max[h]));return function(S){for(var w=S.slice(0,b),E=0;E<b;E++){var P=w[E];if(!o(P))return!1;w[E]=x._sArray[E](P)}return w}}(r),[{x0:y,y0:d,z:r.z,w:a,h:n}]}},47797:function(ne){"use strict";ne.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(F){return F.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(F){return F.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(F){return F.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(F){var e=F.slice(0,3);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["\xb0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(F){var e=F.slice(0,4);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["\xb0","%","%",""]}}}},13188:function(ne,F,e){"use strict";var M=e(3400),k=e(95188),o=e(47797),T=e(81792).IMAGE_URL_PREFIX;ne.exports=function(_,p){function l(r,n){return M.coerce(_,p,k,r,n)}l("source"),p.source&&!p.source.match(T)&&delete p.source,p._hasSource=!!p.source;var t,i=l("z");p._hasZ=!(void 0===i||!i.length||!i[0]||!i[0].length),p._hasZ||p._hasSource?(l("x0"),l("y0"),l("dx"),l("dy"),p._hasZ?(l("colormodel","rgb"),l("zmin",(t=o.colormodel[p.colormodel]).zminDflt||t.min),l("zmax",t.zmaxDflt||t.max)):p._hasSource&&(p.colormodel="rgba256",p.zmin=(t=o.colormodel[p.colormodel]).zminDflt,p.zmax=t.zmaxDflt),l("zsmooth"),l("text"),l("hovertext"),l("hovertemplate"),p._length=null,l("zorder")):p.visible=!1}},79972:function(ne){"use strict";ne.exports=function(F,e){return"xVal"in e&&(F.x=e.xVal),"yVal"in e&&(F.y=e.yVal),e.xa&&(F.xaxis=e.xa),e.ya&&(F.yaxis=e.ya),F.color=e.color,F.colormodel=e.trace.colormodel,F.z||(F.z=e.color),F}},18712:function(ne,F,e){"use strict";var M=e(19480),k=e(81792).IMAGE_URL_PREFIX,o=e(33576).Buffer;F.i=function(T){var _=T.replace(k,""),p=new o(_,"base64");return M(p)}},24892:function(ne,F,e){"use strict";var M=e(93024),k=e(3400),o=k.isArrayOrTypedArray,T=e(47797);ne.exports=function(_,p,l){var t=_.cd[0],i=t.trace,r=_.xa,n=_.ya;if(!(M.inbox(p-t.x0,p-(t.x0+t.w*i.dx),0)>0||M.inbox(l-t.y0,l-(t.y0+t.h*i.dy),0)>0)){var a,s=Math.floor((p-t.x0)/i.dx),u=Math.floor(Math.abs(l-t.y0)/i.dy);if(i._hasZ?a=t.z[u][s]:i._hasSource&&(a=i._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(s,u,1,1).data),a){var f,c=t.hi||i.hoverinfo;if(c){var y=c.split("+");-1!==y.indexOf("all")&&(y=["color"]),-1!==y.indexOf("color")&&(f=!0)}var d,m=T.colormodel[i.colormodel],g=m.colormodel||i.colormodel,x=g.length,v=i._scaler(a),b=m.suffix,h=[];(i.hovertemplate||f)&&(h.push("["+[v[0]+b[0],v[1]+b[1],v[2]+b[2]].join(", ")),4===x&&h.push(", "+v[3]+b[3]),h.push("]"),h=h.join(""),_.extraText=g.toUpperCase()+": "+h),o(i.hovertext)&&o(i.hovertext[u])?d=i.hovertext[u][s]:o(i.text)&&o(i.text[u])&&(d=i.text[u][s]);var S=n.c2p(t.y0+(u+.5)*i.dy),w=t.x0+(s+.5)*i.dx,E=t.y0+(u+.5)*i.dy,P="["+a.slice(0,i.colormodel.length).join(", ")+"]";return[k.extendFlat(_,{index:[u,s],x0:r.c2p(t.x0+s*i.dx),x1:r.c2p(t.x0+(s+1)*i.dx),y0:S,y1:S,color:v,xVal:w,xLabelVal:w,yVal:E,yLabelVal:E,zLabelVal:P,text:d,hovertemplateLabels:{zLabel:P,colorLabel:h,"color[0]Label":v[0]+b[0],"color[1]Label":v[1]+b[1],"color[2]Label":v[2]+b[2],"color[3]Label":v[3]+b[3]}})]}}}},48928:function(ne,F,e){"use strict";ne.exports={attributes:e(95188),supplyDefaults:e(13188),calc:e(93336),plot:e(63715),style:e(28576),hoverPoints:e(24892),eventData:e(79972),moduleType:"trace",name:"image",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},63715:function(ne,F,e){"use strict";var M=e(33428),k=e(3400),o=k.strTranslate,T=e(9616),_=e(47797),p=e(9188),l=e(2264).STYLE;ne.exports=function(t,i,r,n){var a=i.xaxis,s=i.yaxis,u=!t._context._exportedPlot&&p();k.makeTraceGroups(n,r,"im").each(function(f){var c=M.select(this),y=f[0],d=y.trace,m=("fast"===d.zsmooth||!1===d.zsmooth&&u)&&!d._hasZ&&d._hasSource&&"linear"===a.type&&"linear"===s.type;d._realImage=m;var g,x,v,b,h,S,w=y.z,E=y.x0,P=y.y0,I=y.w,O=y.h,z=d.dx,U=d.dy;for(S=0;void 0===g&&S<I;)g=a.c2p(E+S*z),S++;for(S=I;void 0===x&&S>0;)x=a.c2p(E+S*z),S--;for(S=0;void 0===b&&S<O;)b=s.c2p(P+S*U),S++;for(S=O;void 0===h&&S>0;)h=s.c2p(P+S*U),S--;x<g&&(v=x,x=g,g=v),h<b&&(v=b,b=h,h=v),m||(g=Math.max(-.5*a._length,g),x=Math.min(1.5*a._length,x),b=Math.max(-.5*s._length,b),h=Math.min(1.5*s._length,h));var R=Math.round(x-g),j=Math.round(h-b);if(R<=0||j<=0)c.selectAll("image").data([]).exit().remove();else{var Y=c.selectAll("image").data([f]);Y.enter().append("svg:image").attr({xmlns:T.svg,preserveAspectRatio:"none"}),Y.exit().remove();var B=!1===d.zsmooth?l:"";if(m){var V=k.simpleMap(a.range,a.r2l),q=k.simpleMap(s.range,s.r2l),ie=V[1]<V[0],te=q[1]>q[0];if(ie||te){var ee=g+R/2,$=b+j/2;B+="transform:"+o(ee+"px",$+"px")+"scale("+(ie?-1:1)+","+(te?-1:1)+")"+o(-ee+"px",-$+"px")+";"}}Y.attr("style",B);var J=new Promise(function(ae){if(d._hasZ)ae();else if(d._hasSource)if(d._canvas&&d._canvas.el.width===I&&d._canvas.el.height===O&&d._canvas.source===d.source)ae();else{var ce=document.createElement("canvas");ce.width=I,ce.height=O;var le=ce.getContext("2d",{willReadFrequently:!0});d._image=d._image||new Image;var pe=d._image;pe.onload=function(){le.drawImage(pe,0,0),d._canvas={el:ce,source:d.source},ae()},pe.setAttribute("src",d.source)}}).then(function(){var ae;if(d._hasZ)ae=X(function(pe,we){var Te=w[we][pe];return k.isTypedArray(Te)&&(Te=Array.from(Te)),Te}).toDataURL("image/png");else if(d._hasSource)if(m)ae=d.source;else{var le=d._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,I,O).data;ae=X(function(pe,we){var Te=4*(we*I+pe);return[le[Te],le[Te+1],le[Te+2],le[Te+3]]}).toDataURL("image/png")}Y.attr({"xlink:href":ae,height:j,width:R,x:g,y:b})});t._promises.push(J)}function X(ae){var ce=document.createElement("canvas");ce.width=R,ce.height=j;var le,pe=ce.getContext("2d",{willReadFrequently:!0}),we=function(ge){return k.constrain(Math.round(a.c2p(E+ge*z)-g),0,R)},Te=function(ge){return k.constrain(Math.round(s.c2p(P+ge*U)-b),0,j)},ye=_.colormodel[d.colormodel],ve=ye.colormodel||d.colormodel,xe=ye.fmt;for(S=0;S<y.w;S++){var Ce=we(S),Oe=we(S+1);if(Oe!==Ce&&!isNaN(Oe)&&!isNaN(Ce))for(var be=0;be<y.h;be++){var ue=Te(be),se=Te(be+1);se===ue||isNaN(se)||isNaN(ue)||!ae(S,be)||(le=d._scaler(ae(S,be)),pe.fillStyle=le?ve+"("+xe(le).join(",")+")":"rgba(0,0,0,0)",pe.fillRect(Ce,ue,Oe-Ce,se-ue))}}return ce}})}},28576:function(ne,F,e){"use strict";var M=e(33428);ne.exports=function(k){M.select(k).selectAll(".im image").style("opacity",function(o){return o[0].trace.opacity})}},89864:function(ne,F,e){"use strict";var M=e(92880).extendFlat,k=e(92880).extendDeep,o=e(67824).overrideAll,T=e(25376),_=e(22548),p=e(86968).u,l=e(94724),t=e(31780).templatedArray,i=e(48164),r=e(29736).descriptionOnlyNumbers,n=T({editType:"plot",colorEditType:"plot"}),a={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:_.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},s={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},u=t("step",k({},a,{range:s}));ne.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:p({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:M({},n,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:r("value")},font:M({},n,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:r("value")},increasing:{symbol:{valType:"string",dflt:i.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:i.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:i.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:i.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:M({},n,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:k({},a,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:_.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:o({range:s,visible:M({},l.visible,{dflt:!0}),tickmode:l.minor.tickmode,nticks:l.nticks,tick0:l.tick0,dtick:l.dtick,tickvals:l.tickvals,ticktext:l.ticktext,ticks:M({},l.ticks,{dflt:"outside"}),ticklen:l.ticklen,tickwidth:l.tickwidth,tickcolor:l.tickcolor,ticklabelstep:l.ticklabelstep,showticklabels:l.showticklabels,labelalias:l.labelalias,tickfont:T({}),tickangle:l.tickangle,tickformat:l.tickformat,tickformatstops:l.tickformatstops,tickprefix:l.tickprefix,showtickprefix:l.showtickprefix,ticksuffix:l.ticksuffix,showticksuffix:l.showticksuffix,separatethousands:l.separatethousands,exponentformat:l.exponentformat,minexponent:l.minexponent,showexponent:l.showexponent,editType:"plot"},"plot"),steps:u,threshold:{line:{color:M({},a.line.color,{}),width:M({},a.line.width,{dflt:1}),editType:"plot"},thickness:M({},a.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},92728:function(ne,F,e){"use strict";var M=e(7316);F.name="indicator",F.plot=function(k,o,T,_){M.plotBasePlot(F.name,k,o,T,_)},F.clean=function(k,o,T,_){M.cleanBasePlot(F.name,k,o,T,_)}},79136:function(ne){"use strict";ne.exports={calc:function(F,e){var M=[],k=e.value;"number"!=typeof e._lastValue&&(e._lastValue=e.value);var o=e._lastValue,T=o;return e._hasDelta&&"number"==typeof e.delta.reference&&(T=e.delta.reference),M[0]={y:k,lastY:o,delta:k-T,relativeDelta:(k-T)/T},M}}},12096:function(ne){"use strict";ne.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},20424:function(ne,F,e){"use strict";var M=e(3400),k=e(89864),o=e(86968).Q,T=e(31780),_=e(51272),p=e(12096),l=e(26332),t=e(25404),i=e(95936),r=e(42568);function n(a,s){function u(f,c){return M.coerce(a,s,k.gauge.steps,f,c)}u("color"),u("line.color"),u("line.width"),u("range"),u("thickness")}ne.exports={supplyDefaults:function(a,s,u,f){function c(z,U){return M.coerce(a,s,k,z,U)}o(s,f,c),c("mode"),s._hasNumber=-1!==s.mode.indexOf("number"),s._hasDelta=-1!==s.mode.indexOf("delta"),s._hasGauge=-1!==s.mode.indexOf("gauge");var y=c("value");s._range=[0,"number"==typeof y?1.5*y:1];var d,m,g=new Array(2);if(s._hasNumber){c("number.valueformat");var x=M.extendFlat({},f.font);x.size=void 0,M.coerceFont(c,"number.font",x),void 0===s.number.font.size&&(s.number.font.size=p.defaultNumberFontSize,g[0]=!0),c("number.prefix"),c("number.suffix"),d=s.number.font.size}if(s._hasDelta){var v=M.extendFlat({},f.font);v.size=void 0,M.coerceFont(c,"delta.font",v),void 0===s.delta.font.size&&(s.delta.font.size=(s._hasNumber?.5:1)*(d||p.defaultNumberFontSize),g[1]=!0),c("delta.reference",s.value),c("delta.relative"),c("delta.valueformat",s.delta.relative?"2%":""),c("delta.increasing.symbol"),c("delta.increasing.color"),c("delta.decreasing.symbol"),c("delta.decreasing.color"),c("delta.position"),c("delta.prefix"),c("delta.suffix"),m=s.delta.font.size}s._scaleNumbers=(!s._hasNumber||g[0])&&(!s._hasDelta||g[1])||!1;var b,h,S,w,E=M.extendFlat({},f.font);function P(z,U){return M.coerce(b,h,k.gauge,z,U)}function I(z,U){return M.coerce(S,w,k.gauge.axis,z,U)}if(E.size=.25*(d||m||p.defaultNumberFontSize),M.coerceFont(c,"title.font",E),c("title.text"),s._hasGauge){(b=a.gauge)||(b={}),h=T.newContainer(s,"gauge"),P("shape"),(s._isBullet="bullet"===s.gauge.shape)||c("title.align","center"),(s._isAngular="angular"===s.gauge.shape)||c("align","center"),P("bgcolor",f.paper_bgcolor),P("borderwidth"),P("bordercolor"),P("bar.color"),P("bar.line.color"),P("bar.line.width"),P("bar.thickness",p.valueThickness*("bullet"===s.gauge.shape?.5:1)),_(b,h,{name:"steps",handleItemDefaults:n}),P("threshold.value"),P("threshold.thickness"),P("threshold.line.width"),P("threshold.line.color"),S={},b&&(S=b.axis||{}),w=T.newContainer(h,"axis"),I("visible"),s._range=I("range",s._range);var O={font:f.font,noAutotickangles:!0,outerTicks:!0};l(S,w,I,"linear"),r(S,w,I,"linear",O),i(S,w,I,"linear",O),t(S,w,I,O)}else c("title.align","center"),c("align","center"),s._isAngular=s._isBullet=!1;s._length=null}}},43480:function(ne,F,e){"use strict";ne.exports={moduleType:"trace",name:"indicator",basePlotModule:e(92728),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:e(89864),supplyDefaults:e(20424).supplyDefaults,calc:e(79136).calc,plot:e(97864),meta:{}}},97864:function(ne,F,e){"use strict";var M=e(33428),k=e(67756).qy,o=e(67756).Gz,T=e(3400),_=T.strScale,p=T.strTranslate,l=T.rad2deg,t=e(84284).MID_SHIFT,i=e(43616),r=e(12096),n=e(72736),a=e(54460),s=e(28336),u=e(37668),f=e(94724),c=e(76308),y={left:"start",center:"middle",right:"end"},d={left:0,center:.5,right:1},m=/[yzafpn\xb5mkMGTPEZY]/;function g(w){return w&&w.duration>0}function x(w){w.each(function(E){c.stroke(M.select(this),E.line.color)}).each(function(E){c.fill(M.select(this),E.color)}).style("stroke-width",function(E){return E.line.width})}function v(w,E,P){var I=w._fullLayout,O=T.extendFlat({type:"linear",ticks:"outside",range:P,showline:!0},E),z={type:"linear",_id:"x"+E._id},U={letter:"x",font:I.font,noAutotickangles:!0,noHover:!0,noTickson:!0};function R(j,Y){return T.coerce(O,z,f,j,Y)}return s(O,z,R,U,I),u(O,z,R,U),z}function b(w,E,P){return[Math.min(E/w.width,P/w.height),w,E+"x"+P]}function h(w,E,P,I){var O=document.createElementNS("http://www.w3.org/2000/svg","text"),z=M.select(O);return z.text(w).attr("x",0).attr("y",0).attr("text-anchor",P).attr("data-unformatted",w).call(n.convertToTspans,I).call(i.font,E),i.bBox(z.node())}function S(w,E,P,I,O,z){var U="_cache"+E;w[U]&&w[U].key===O||(w[U]={key:O,value:P});var R=T.aggNums(z,null,[w[U].value,I],2);return w[U].value=R,R}ne.exports=function(w,E,P,I){var O,z=w._fullLayout;g(P)&&I&&(O=I()),T.makeTraceGroups(z._indicatorlayer,E,"trace").each(function(U){var R,j,Y,B,V,q=U[0].trace,ie=M.select(this),te=q._hasGauge,ee=q._isAngular,$=q._isBullet,J=q.domain,X={w:z._size.w*(J.x[1]-J.x[0]),h:z._size.h*(J.y[1]-J.y[0]),l:z._size.l+z._size.w*J.x[0],r:z._size.r+z._size.w*(1-J.x[1]),t:z._size.t+z._size.h*(1-J.y[1]),b:z._size.b+z._size.h*J.y[0]},ae=X.l+X.w/2,ce=X.t+X.h/2,le=Math.min(X.w/2,X.h),pe=r.innerRadius*le,we=q.align||"center";if(j=ce,te){if(ee&&(R=ae,j=ce+le/2,Y=function(ue){return se=ue,[(ge=.9*pe)/Math.sqrt(se.width/2*(se.width/2)+se.height*se.height),se,ge];var se,ge}),$){var Te=r.bulletPadding,ye=1-r.bulletNumberDomainSize+Te;R=X.l+(ye+(1-ye)*d[we])*X.w,Y=function(ue){return b(ue,(r.bulletNumberDomainSize-Te)*X.w,X.h)}}}else R=X.l+d[we]*X.w,Y=function(ue){return b(ue,X.w,X.h)};(function(ue,se,ge,Ie){var ke,Se,Pe,Fe=ge[0].trace,Be=Ie.numbersX,me=Ie.numbersY,Me=Fe.align||"center",Le=y[Me],Ne=Ie.transitionOpts,Re=Ie.onComplete,He=T.ensureSingle(se,"g","numbers"),Ze=[];Fe._hasNumber&&Ze.push("number"),Fe._hasDelta&&(Ze.push("delta"),"left"===Fe.delta.position&&Ze.reverse());var nt=He.selectAll("text").data(Ze);function ft(jt,Ut,Rt,Je){if(!jt.match("s")||Rt>=0==Je>=0||Ut(Rt).slice(-1).match(m)||Ut(Je).slice(-1).match(m))return Ut;var et=jt.slice().replace("s","f").replace(/\d+/,function($e){return parseInt($e)-1}),qe=v(ue,{tickformat:et});return function($e){return Math.abs($e)<1?a.tickText(qe,$e).text:Ut($e)}}nt.enter().append("text"),nt.attr("text-anchor",function(){return Le}).attr("class",function(jt){return jt}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),nt.exit().remove();var ht,Tt=Fe.mode+Fe.align;if(Fe._hasDelta&&(ht=function(){var jt=v(ue,{tickformat:Fe.delta.valueformat},Fe._range);jt.setScale(),a.prepTicks(jt);var Ut=function(Ve){return a.tickText(jt,Ve).text},Rt=Fe.delta.suffix,Je=Fe.delta.prefix,et=function(Ve){return Fe.delta.relative?Ve.relativeDelta:Ve.delta},qe=function(Ve,Ge){return 0===Ve||"number"!=typeof Ve||isNaN(Ve)?"-":(Ve>0?Fe.delta.increasing.symbol:Fe.delta.decreasing.symbol)+Je+Ge(Ve)+Rt},$e=function(Ve){return Ve.delta>=0?Fe.delta.increasing.color:Fe.delta.decreasing.color};void 0===Fe._deltaLastValue&&(Fe._deltaLastValue=et(ge[0]));var pt=He.select("text.delta");function ct(){pt.text(qe(et(ge[0]),Ut)).call(c.fill,$e(ge[0])).call(n.convertToTspans,ue)}return pt.call(i.font,Fe.delta.font).call(c.fill,$e({delta:Fe._deltaLastValue})),g(Ne)?pt.transition().duration(Ne.duration).ease(Ne.easing).tween("text",function(){var Ve=M.select(this),Ge=et(ge[0]),ut=Fe._deltaLastValue,Qe=ft(Fe.delta.valueformat,Ut,ut,Ge),yt=o(ut,Ge);return Fe._deltaLastValue=Ge,function(wt){Ve.text(qe(yt(wt),Qe)),Ve.call(c.fill,$e({delta:yt(wt)}))}}).each("end",function(){ct(),Re&&Re()}).each("interrupt",function(){ct(),Re&&Re()}):ct(),Se=h(qe(et(ge[0]),Ut),Fe.delta.font,Le,ue),pt}(),Tt+=Fe.delta.position+Fe.delta.font.size+Fe.delta.font.family+Fe.delta.valueformat,Tt+=Fe.delta.increasing.symbol+Fe.delta.decreasing.symbol,Pe=Se),Fe._hasNumber&&(function(){var jt=v(ue,{tickformat:Fe.number.valueformat},Fe._range);jt.setScale(),a.prepTicks(jt);var Ut=function($e){return a.tickText(jt,$e).text},Rt=Fe.number.suffix,Je=Fe.number.prefix,et=He.select("text.number");function qe(){var $e="number"==typeof ge[0].y?Je+Ut(ge[0].y)+Rt:"-";et.text($e).call(i.font,Fe.number.font).call(n.convertToTspans,ue)}g(Ne)?et.transition().duration(Ne.duration).ease(Ne.easing).each("end",function(){qe(),Re&&Re()}).each("interrupt",function(){qe(),Re&&Re()}).attrTween("text",function(){var $e=M.select(this),pt=o(ge[0].lastY,ge[0].y);Fe._lastValue=ge[0].y;var ct=ft(Fe.number.valueformat,Ut,ge[0].lastY,ge[0].y);return function(Ve){$e.text(Je+ct(pt(Ve))+Rt)}}):qe(),ke=h(Je+Ut(ge[0].y)+Rt,Fe.number.font,Le,ue)}(),Tt+=Fe.number.font.size+Fe.number.font.family+Fe.number.valueformat+Fe.number.suffix+Fe.number.prefix,Pe=ke),Fe._hasDelta&&Fe._hasNumber){var At,_t,ot=[(ke.left+ke.right)/2,(ke.top+ke.bottom)/2],it=[(Se.left+Se.right)/2,(Se.top+Se.bottom)/2],Pt=.75*Fe.delta.font.size;"left"===Fe.delta.position&&(At=S(Fe,"deltaPos",0,-1*(ke.width*d[Fe.align]+Se.width*(1-d[Fe.align])+Pt),Tt,Math.min),_t=ot[1]-it[1],Pe={width:ke.width+Se.width+Pt,height:Math.max(ke.height,Se.height),left:Se.left+At,right:ke.right,top:Math.min(ke.top,Se.top+_t),bottom:Math.max(ke.bottom,Se.bottom+_t)}),"right"===Fe.delta.position&&(At=S(Fe,"deltaPos",0,ke.width*(1-d[Fe.align])+Se.width*d[Fe.align]+Pt,Tt,Math.max),_t=ot[1]-it[1],Pe={width:ke.width+Se.width+Pt,height:Math.max(ke.height,Se.height),left:ke.left,right:Se.right+At,top:Math.min(ke.top,Se.top+_t),bottom:Math.max(ke.bottom,Se.bottom+_t)}),"bottom"===Fe.delta.position&&(At=null,_t=Se.height,Pe={width:Math.max(ke.width,Se.width),height:ke.height+Se.height,left:Math.min(ke.left,Se.left),right:Math.max(ke.right,Se.right),top:ke.bottom-ke.height,bottom:ke.bottom+Se.height}),"top"===Fe.delta.position&&(At=null,_t=ke.top,Pe={width:Math.max(ke.width,Se.width),height:ke.height+Se.height,left:Math.min(ke.left,Se.left),right:Math.max(ke.right,Se.right),top:ke.bottom-ke.height-Se.height,bottom:ke.bottom}),ht.attr({dx:At,dy:_t})}(Fe._hasNumber||Fe._hasDelta)&&He.attr("transform",function(){var Ut,jt=Ie.numbersScaler(Pe),Rt=S(Fe,"numbersScale",1,jt[0],Tt+=jt[2],Math.min);Fe._scaleNumbers||(Rt=1),Fe._numbersTop=Rt*Pe.top+(Ut=Fe._isAngular?me-Rt*Pe.bottom:me-Rt*(Pe.top+Pe.bottom)/2);var Je=Pe[Me];"center"===Me&&(Je=(Pe.left+Pe.right)/2);var et=Be-Rt*Je;return et=S(Fe,"numbersTranslate",0,et,Tt,Math.max),p(et,Ut)+_(Rt)})})(w,ie,U,{numbersX:R,numbersY:j,numbersScaler:Y,transitionOpts:P,onComplete:O}),te&&(B={range:q.gauge.axis.range,color:q.gauge.bgcolor,line:{color:q.gauge.bordercolor,width:0},thickness:1},V={range:q.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:q.gauge.bordercolor,width:q.gauge.borderwidth},thickness:1});var ve=ie.selectAll("g.angular").data(ee?U:[]);ve.exit().remove();var xe=ie.selectAll("g.angularaxis").data(ee?U:[]);xe.exit().remove(),ee&&function(ue,se,ge,Ie){var ke,Se,Pe,Fe,Be=ge[0].trace,me=Ie.size,Me=Ie.radius,Le=Ie.innerRadius,Ne=Ie.gaugeBg,Re=Ie.gaugeOutline,He=[me.l+me.w/2,me.t+me.h/2+Me/2],Ze=Ie.gauge,nt=Ie.layer,ft=Ie.transitionOpts,ht=Ie.onComplete,Tt=Math.PI/2;function At(wt){var kt=Be.gauge.axis.range[0],vt=(wt-kt)/(Be.gauge.axis.range[1]-kt)*Math.PI-Tt;return vt<-Tt?-Tt:vt>Tt?Tt:vt}function _t(wt){return M.svg.arc().innerRadius((Le+Me)/2-wt/2*(Me-Le)).outerRadius((Le+Me)/2+wt/2*(Me-Le)).startAngle(-Tt)}function ot(wt){wt.attr("d",function(kt){return _t(kt.thickness).startAngle(At(kt.range[0])).endAngle(At(kt.range[1]))()})}Ze.enter().append("g").classed("angular",!0),Ze.attr("transform",p(He[0],He[1])),nt.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),nt.selectAll("g.xangularaxistick,path,text").remove(),(ke=v(ue,Be.gauge.axis)).type="linear",ke.range=Be.gauge.axis.range,ke._id="xangularaxis",ke.ticklabeloverflow="allow",ke.setScale();var it=function(wt){return(ke.range[0]-wt.x)/(ke.range[1]-ke.range[0])*Math.PI+Math.PI},Pt={},jt=a.makeLabelFns(ke,0).labelStandoff;Pt.xFn=function(wt){var kt=it(wt);return Math.cos(kt)*jt},Pt.yFn=function(wt){var kt=it(wt),vt=Math.sin(kt)>0?.2:1;return-Math.sin(kt)*(jt+wt.fontSize*vt)+Math.abs(Math.cos(kt))*(wt.fontSize*t)},Pt.anchorFn=function(wt){var kt=it(wt),vt=Math.cos(kt);return Math.abs(vt)<.1?"middle":vt>0?"start":"end"},Pt.heightFn=function(wt,kt,vt){var Lt=it(wt);return-.5*(1+Math.sin(Lt))*vt};var Ut=function(wt){return p(He[0]+Me*Math.cos(wt),He[1]-Me*Math.sin(wt))};Pe=function(wt){return Ut(it(wt))},Se=a.calcTicks(ke),Fe=a.getTickSigns(ke)[2],ke.visible&&(a.drawTicks(ue,ke,{vals:Se,layer:nt,path:"M"+(Fe="inside"===ke.ticks?-1:1)*((ke.linewidth||1)/2)+",0h"+Fe*ke.ticklen,transFn:function(wt){var kt=it(wt);return Ut(kt)+"rotate("+-l(kt)+")"}}),a.drawLabels(ue,ke,{vals:Se,layer:nt,transFn:Pe,labelFns:Pt}));var Je=[Ne].concat(Be.gauge.steps),et=Ze.selectAll("g.bg-arc").data(Je);et.enter().append("g").classed("bg-arc",!0).append("path"),et.select("path").call(ot).call(x),et.exit().remove();var qe=_t(Be.gauge.bar.thickness),$e=Ze.selectAll("g.value-arc").data([Be.gauge.bar]);$e.enter().append("g").classed("value-arc",!0).append("path");var pt,ct,Ve,Ge=$e.select("path");g(ft)?(Ge.transition().duration(ft.duration).ease(ft.easing).each("end",function(){ht&&ht()}).each("interrupt",function(){ht&&ht()}).attrTween("d",(pt=qe,ct=At(ge[0].lastY),Ve=At(ge[0].y),function(){var wt=k(ct,Ve);return function(kt){return pt.endAngle(wt(kt))()}})),Be._lastValue=ge[0].y):Ge.attr("d","number"==typeof ge[0].y?qe.endAngle(At(ge[0].y)):"M0,0Z"),Ge.call(x),$e.exit().remove(),Je=[];var ut=Be.gauge.threshold.value;(ut||0===ut)&&Je.push({range:[ut,ut],color:Be.gauge.threshold.color,line:{color:Be.gauge.threshold.line.color,width:Be.gauge.threshold.line.width},thickness:Be.gauge.threshold.thickness});var Qe=Ze.selectAll("g.threshold-arc").data(Je);Qe.enter().append("g").classed("threshold-arc",!0).append("path"),Qe.select("path").call(ot).call(x),Qe.exit().remove();var yt=Ze.selectAll("g.gauge-outline").data([Re]);yt.enter().append("g").classed("gauge-outline",!0).append("path"),yt.select("path").call(ot).call(x),yt.exit().remove()}(w,0,U,{radius:le,innerRadius:pe,gauge:ve,layer:xe,size:X,gaugeBg:B,gaugeOutline:V,transitionOpts:P,onComplete:O});var Ce=ie.selectAll("g.bullet").data($?U:[]);Ce.exit().remove();var Oe=ie.selectAll("g.bulletaxis").data($?U:[]);Oe.exit().remove(),$&&function(ue,se,ge,Ie){var ke,Se,Pe,Fe,Be,me=ge[0].trace,Me=Ie.gauge,Le=Ie.layer,Ne=Ie.gaugeBg,Re=Ie.gaugeOutline,He=Ie.size,Ze=me.domain,nt=Ie.transitionOpts,ft=Ie.onComplete;Me.enter().append("g").classed("bullet",!0),Me.attr("transform",p(He.l,He.t)),Le.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),Le.selectAll("g.xbulletaxistick,path,text").remove();var ht=He.h,Tt=me.gauge.bar.thickness*ht,At=Ze.x[0],_t=Ze.x[0]+(Ze.x[1]-Ze.x[0])*(me._hasNumber||me._hasDelta?1-r.bulletNumberDomainSize:1);function ot(et){et.attr("width",function(qe){return Math.max(0,ke.c2p(qe.range[1])-ke.c2p(qe.range[0]))}).attr("x",function(qe){return ke.c2p(qe.range[0])}).attr("y",function(qe){return.5*(1-qe.thickness)*ht}).attr("height",function(qe){return qe.thickness*ht})}(ke=v(ue,me.gauge.axis))._id="xbulletaxis",ke.domain=[At,_t],ke.setScale(),Se=a.calcTicks(ke),Pe=a.makeTransTickFn(ke),Fe=a.getTickSigns(ke)[2],Be=He.t+He.h,ke.visible&&(a.drawTicks(ue,ke,{vals:"inside"===ke.ticks?a.clipEnds(ke,Se):Se,layer:Le,path:a.makeTickPath(ke,Be,Fe),transFn:Pe}),a.drawLabels(ue,ke,{vals:Se,layer:Le,transFn:Pe,labelFns:a.makeLabelFns(ke,Be)}));var it=[Ne].concat(me.gauge.steps),Pt=Me.selectAll("g.bg-bullet").data(it);Pt.enter().append("g").classed("bg-bullet",!0).append("rect"),Pt.select("rect").call(ot).call(x),Pt.exit().remove();var jt=Me.selectAll("g.value-bullet").data([me.gauge.bar]);jt.enter().append("g").classed("value-bullet",!0).append("rect"),jt.select("rect").attr("height",Tt).attr("y",(ht-Tt)/2).call(x),g(nt)?jt.select("rect").transition().duration(nt.duration).ease(nt.easing).each("end",function(){ft&&ft()}).each("interrupt",function(){ft&&ft()}).attr("width",Math.max(0,ke.c2p(Math.min(me.gauge.axis.range[1],ge[0].y)))):jt.select("rect").attr("width","number"==typeof ge[0].y?Math.max(0,ke.c2p(Math.min(me.gauge.axis.range[1],ge[0].y))):0),jt.exit().remove();var Ut=ge.filter(function(){return me.gauge.threshold.value||0===me.gauge.threshold.value}),Rt=Me.selectAll("g.threshold-bullet").data(Ut);Rt.enter().append("g").classed("threshold-bullet",!0).append("line"),Rt.select("line").attr("x1",ke.c2p(me.gauge.threshold.value)).attr("x2",ke.c2p(me.gauge.threshold.value)).attr("y1",(1-me.gauge.threshold.thickness)/2*ht).attr("y2",(1-(1-me.gauge.threshold.thickness)/2)*ht).call(c.stroke,me.gauge.threshold.line.color).style("stroke-width",me.gauge.threshold.line.width),Rt.exit().remove();var Je=Me.selectAll("g.gauge-outline").data([Re]);Je.enter().append("g").classed("gauge-outline",!0).append("rect"),Je.select("rect").call(ot).call(x),Je.exit().remove()}(w,0,U,{gauge:Ce,layer:Oe,size:X,gaugeBg:B,gaugeOutline:V,transitionOpts:P,onComplete:O});var be=ie.selectAll("text.title").data(U);be.exit().remove(),be.enter().append("text").classed("title",!0),be.attr("text-anchor",function(){return $?y.right:y[q.title.align]}).text(q.title.text).call(i.font,q.title.font).call(n.convertToTspans,w),be.attr("transform",function(){var ue,se=X.l+X.w*d[q.title.align],ge=r.titlePadding,Ie=i.bBox(be.node());return te?(ee&&(ue=q.gauge.axis.visible?i.bBox(xe.node()).top-ge-Ie.bottom:X.t+X.h/2-le/2-Ie.bottom-ge),$&&(ue=j-(Ie.top+Ie.bottom)/2,se=X.l-r.bulletPadding*X.w)):ue=q._numbersTop-ge-Ie.bottom,p(se,ue)})})}},50048:function(ne,F,e){"use strict";var M=e(49084),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(52948),_=e(45464),p=e(92880).extendFlat,l=e(67824).overrideAll,t=ne.exports=l(p({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:o(),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),valuehoverformat:k("value",1),showlegend:p({},_.showlegend,{dflt:!1})},M("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,lightposition:T.lightposition,lighting:T.lighting,flatshading:T.flatshading,contour:T.contour,hoverinfo:p({},_.hoverinfo)}),"calc","nested");t.flatshading.dflt=!0,t.lighting.facenormalsepsilon.dflt=0,t.x.editType=t.y.editType=t.z.editType=t.value.editType="calc+clearAxisTypes",t.transforms=void 0},62624:function(ne,F,e){"use strict";var M=e(47128),k=e(3832).processGrid,o=e(3832).filter;ne.exports=function(T,_){_._len=Math.min(_.x.length,_.y.length,_.z.length,_.value.length),_._x=o(_.x,_._len),_._y=o(_.y,_._len),_._z=o(_.z,_._len),_._value=o(_.value,_._len);var p=k(_);_._gridFill=p.fill,_._Xs=p.Xs,_._Ys=p.Ys,_._Zs=p.Zs,_._len=p.len;for(var l=1/0,t=-1/0,i=0;i<_._len;i++){var r=_._value[i];l=Math.min(l,r),t=Math.max(t,r)}_._minValues=l,_._maxValues=t,_._vMin=null==_.isomin?l:_.isomin,_._vMax=null==_.isomax?t:_.isomax,M(T,_,{vals:[_._vMin,_._vMax],containerStr:"",cLetter:"c"})}},31460:function(ne,F,e){"use strict";var M=e(67792).gl_mesh3d,k=e(33040).parseColorScale,o=e(3400).isArrayOrTypedArray,T=e(43080),_=e(8932).extractOpts,p=e(52094),l=function(a,s){for(var u=s.length-1;u>0;u--){var f=Math.min(s[u],s[u-1]),c=Math.max(s[u],s[u-1]);if(c>f&&f<a&&a<=c)return{id:u,distRatio:(c-a)/(c-f)}}return{id:0,distRatio:0}};function t(a,s,u){this.scene=a,this.uid=u,this.mesh=s,this.name="",this.data=null,this.showContour=!1}var i=t.prototype;i.handlePick=function(a){if(a.object===this.mesh){var s=a.data.index,f=this.data._meshY[s],c=this.data._meshZ[s],y=this.data._Ys.length,d=this.data._Zs.length,m=l(this.data._meshX[s],this.data._Xs).id,g=l(f,this.data._Ys).id,x=l(c,this.data._Zs).id,v=a.index=x+d*g+d*y*m;a.traceCoordinate=[this.data._meshX[v],this.data._meshY[v],this.data._meshZ[v],this.data._value[v]];var b=this.data.hovertext||this.data.text;return o(b)&&void 0!==b[v]?a.textLabel=b[v]:b&&(a.textLabel=b),!0}},i.update=function(a){var s=this.scene,u=s.fullSceneLayout;function f(d,m,g,x){return m.map(function(v){return d.d2l(v,0,x)*g})}this.data=n(a);var c={positions:p(f(u.xaxis,a._meshX,s.dataScale[0],a.xcalendar),f(u.yaxis,a._meshY,s.dataScale[1],a.ycalendar),f(u.zaxis,a._meshZ,s.dataScale[2],a.zcalendar)),cells:p(a._meshI,a._meshJ,a._meshK),lightPosition:[a.lightposition.x,a.lightposition.y,a.lightposition.z],ambient:a.lighting.ambient,diffuse:a.lighting.diffuse,specular:a.lighting.specular,roughness:a.lighting.roughness,fresnel:a.lighting.fresnel,vertexNormalsEpsilon:a.lighting.vertexnormalsepsilon,faceNormalsEpsilon:a.lighting.facenormalsepsilon,opacity:a.opacity,contourEnable:a.contour.show,contourColor:T(a.contour.color).slice(0,3),contourWidth:a.contour.width,useFacetNormals:a.flatshading},y=_(a);c.vertexIntensity=a._meshIntensity,c.vertexIntensityBounds=[y.min,y.max],c.colormap=k(a),this.mesh.update(c)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var r=["xyz","xzy","yxz","yzx","zxy","zyx"];function n(a){a._meshI=[],a._meshJ=[],a._meshK=[];var s,u,f,c,y,d,m,g=a.surface.show,x=a.spaceframe.show,v=a.surface.fill,b=a.spaceframe.fill,h=!1,S=!1,w=0,E=a._Xs,P=a._Ys,I=a._Zs,O=E.length,z=P.length,U=I.length,R=r.indexOf(a._gridFill.replace(/-/g,"").replace(/\+/g,"")),j=function(Le,Ne,Re){switch(R){case 5:return Re+U*Ne+U*z*Le;case 4:return Re+U*Le+U*O*Ne;case 3:return Ne+z*Re+z*U*Le;case 2:return Ne+z*Le+z*O*Re;case 1:return Le+O*Re+O*U*Ne;default:return Le+O*Ne+O*z*Re}},Y=a._minValues,B=a._maxValues,V=a._vMin,q=a._vMax;function ie(Le,Ne,Re){for(var He=d.length,Ze=u;Ze<He;Ze++)if(Le===f[Ze]&&Ne===c[Ze]&&Re===y[Ze])return Ze;return-1}function te(){u=s}function ee(){f=[],c=[],y=[],d=[],s=0,te()}function $(Le,Ne,Re,He){return f.push(Le),c.push(Ne),y.push(Re),d.push(He),++s-1}function J(Le,Ne,Re){for(var He=[],Ze=0;Ze<Le.length;Ze++)He[Ze]=Le[Ze]*(1-Re)+Re*Ne[Ze];return He}function X(Le){m=Le}function ae(Le,Ne){return"all"===Le||null===Le||Le.indexOf(Ne)>-1}function ce(Le,Ne){return null===Le?Ne:Le}function le(Le,Ne,Re){te();var Ze,nt,Je,et,qe,$e,pt,ct,Ve,Ge,ut,Qe,yt,wt,kt,ft=[Ne],ht=[Re];if(m>=1)ft=[Ne],ht=[Re];else if(m>0){var Tt=(et=Re,Ge=J(ct=function(vt,Lt,St){for(var Ot=[],Nt=0;Nt<vt.length;Nt++)Ot[Nt]=(vt[Nt]+Lt[Nt]+St[Nt])/3;return Ot}(qe=(Je=Ne)[0],$e=Je[1],pt=Je[2]),qe,Ve=Math.sqrt(1-m)),{xyzv:[[qe,$e,ut=J(ct,$e,Ve)],[ut,Ge,qe],[$e,pt,Qe=J(ct,pt,Ve)],[Qe,ut,$e],[pt,qe,Ge],[Ge,Qe,pt]],abc:[[yt=et[0],wt=et[1],-1],[-1,-1,yt],[wt,kt=et[2],-1],[-1,-1,wt],[kt,yt,-1],[-1,-1,kt]]});ft=Tt.xyzv,ht=Tt.abc}for(var At=0;At<ft.length;At++){Ne=ft[At],Re=ht[At];for(var _t=[],ot=0;ot<3;ot++){var it=Ne[ot][0],Pt=Ne[ot][1],jt=Ne[ot][2],Ut=Ne[ot][3],Rt=Re[ot]>-1?Re[ot]:ie(it,Pt,jt);_t[ot]=Rt>-1?Rt:$(it,Pt,jt,ce(Le,Ut))}Ze=_t[1],nt=_t[2],a._meshI.push(_t[0]),a._meshJ.push(Ze),a._meshK.push(nt),++w}}function pe(Le,Ne,Re,He){var Ze=Le[3];Ze<Re&&(Ze=Re),Ze>He&&(Ze=He);for(var nt=(Le[3]-Ze)/(Le[3]-Ne[3]+1e-9),ft=[],ht=0;ht<4;ht++)ft[ht]=(1-nt)*Le[ht]+nt*Ne[ht];return ft}function we(Le,Ne,Re){return Le>=Ne&&Le<=Re}function Te(Le){var Ne=.001*(q-V);return Le>=V-Ne&&Le<=q+Ne}function ye(Le){for(var Ne=[],Re=0;Re<4;Re++){var He=Le[Re];Ne.push([a._x[He],a._y[He],a._z[He],a._value[He]])}return Ne}var ve=3;function xe(Le,Ne,Re,He,Ze,nt){nt||(nt=1),Re=[-1,-1,-1];var ft=!1,ht=[we(Ne[0][3],He,Ze),we(Ne[1][3],He,Ze),we(Ne[2][3],He,Ze)];if(!ht[0]&&!ht[1]&&!ht[2])return!1;var Tt=function(_t,ot,it){return Te(ot[0][3])&&Te(ot[1][3])&&Te(ot[2][3])?(le(_t,ot,it),!0):nt<ve&&xe(_t,ot,it,V,q,++nt)};if(ht[0]&&ht[1]&&ht[2])return Tt(Le,Ne,Re)||ft;var At=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(_t){if(ht[_t[0]]&&ht[_t[1]]&&!ht[_t[2]]){var ot=Ne[_t[0]],it=Ne[_t[1]],Pt=Ne[_t[2]],jt=pe(Pt,ot,He,Ze),Ut=pe(Pt,it,He,Ze);ft=Tt(Le,[Ut,jt,ot],[-1,-1,Re[_t[0]]])||ft,ft=Tt(Le,[ot,it,Ut],[Re[_t[0]],Re[_t[1]],-1])||ft,At=!0}}),At||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(_t){if(ht[_t[0]]&&!ht[_t[1]]&&!ht[_t[2]]){var ot=Ne[_t[0]],Pt=Ne[_t[2]],jt=pe(Ne[_t[1]],ot,He,Ze),Ut=pe(Pt,ot,He,Ze);ft=Tt(Le,[Ut,jt,ot],[-1,-1,Re[_t[0]]])||ft,At=!0}}),ft}function Ce(Le,Ne,Re,He){var Tt,At,_t,ot,Ze=!1,nt=ye(Ne),ft=[we(nt[0][3],Re,He),we(nt[1][3],Re,He),we(nt[2][3],Re,He),we(nt[3][3],Re,He)];if(!(ft[0]||ft[1]||ft[2]||ft[3]))return Ze;if(ft[0]&&ft[1]&&ft[2]&&ft[3])return S&&(Tt=Le,At=nt,_t=Ne,(ot=function(it,Pt,jt){le(Tt,[At[it],At[Pt],At[jt]],[_t[it],_t[Pt],_t[jt]])})(0,1,2),ot(3,0,1),ot(2,3,0),Ze=void ot(1,2,3)||Ze),Ze;var ht=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Tt){if(ft[Tt[0]]&&ft[Tt[1]]&&ft[Tt[2]]&&!ft[Tt[3]]){var At=nt[Tt[0]],_t=nt[Tt[1]],ot=nt[Tt[2]],it=nt[Tt[3]];if(S)Ze=le(Le,[At,_t,ot],[Ne[Tt[0]],Ne[Tt[1]],Ne[Tt[2]]])||Ze;else{var Pt=pe(it,At,Re,He),jt=pe(it,_t,Re,He),Ut=pe(it,ot,Re,He);Ze=le(null,[Pt,jt,Ut],[-1,-1,-1])||Ze}ht=!0}}),ht||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Tt){if(ft[Tt[0]]&&ft[Tt[1]]&&!ft[Tt[2]]&&!ft[Tt[3]]){var At=nt[Tt[0]],_t=nt[Tt[1]],ot=nt[Tt[2]],it=nt[Tt[3]],Pt=pe(ot,At,Re,He),jt=pe(ot,_t,Re,He),Ut=pe(it,_t,Re,He),Rt=pe(it,At,Re,He);S?(Ze=le(Le,[At,Rt,Pt],[Ne[Tt[0]],-1,-1])||Ze,Ze=le(Le,[_t,jt,Ut],[Ne[Tt[1]],-1,-1])||Ze):(et=[Pt,jt,Ut,Rt],qe=[-1,-1,-1,-1],($e=function(pt,ct,Ve){le(null,[et[pt],et[ct],et[Ve]],[qe[pt],qe[ct],qe[Ve]])})(0,1,2),Ze=void $e(2,3,0)||Ze),ht=!0}var et,qe,$e}),ht||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Tt){if(ft[Tt[0]]&&!ft[Tt[1]]&&!ft[Tt[2]]&&!ft[Tt[3]]){var At=nt[Tt[0]],ot=nt[Tt[2]],it=nt[Tt[3]],Pt=pe(nt[Tt[1]],At,Re,He),jt=pe(ot,At,Re,He),Ut=pe(it,At,Re,He);S?(Ze=le(Le,[At,Pt,jt],[Ne[Tt[0]],-1,-1])||Ze,Ze=le(Le,[At,jt,Ut],[Ne[Tt[0]],-1,-1])||Ze,Ze=le(Le,[At,Ut,Pt],[Ne[Tt[0]],-1,-1])||Ze):Ze=le(null,[Pt,jt,Ut],[-1,-1,-1])||Ze,ht=!0}})),Ze}function Oe(Le,Ne,Re,He,Ze,nt,ft,ht,Tt,At,_t){var ot=!1;return h&&(ae(Le,"A")&&(ot=Ce(null,[Ne,Re,He,nt],At,_t)||ot),ae(Le,"B")&&(ot=Ce(null,[Re,He,Ze,Tt],At,_t)||ot),ae(Le,"C")&&(ot=Ce(null,[Re,nt,ft,Tt],At,_t)||ot),ae(Le,"D")&&(ot=Ce(null,[He,nt,ht,Tt],At,_t)||ot),ae(Le,"E")&&(ot=Ce(null,[Re,He,nt,Tt],At,_t)||ot)),S&&(ot=Ce(Le,[Re,He,nt,Tt],At,_t)||ot),ot}function be(Le,Ne,Re,He,Ze,nt,ft,ht){return[!0===ht[0]||xe(Le,ye([Ne,Re,He]),[Ne,Re,He],nt,ft),!0===ht[1]||xe(Le,ye([He,Ze,Ne]),[He,Ze,Ne],nt,ft)]}function ue(Le,Ne,Re,He,Ze,nt,ft,ht,Tt){return ht?be(Le,Ne,Re,Ze,He,nt,ft,Tt):be(Le,Re,Ze,He,Ne,nt,ft,Tt)}function se(Le,Ne,Re,He,Ze,nt,ft){var ht,Tt,At,_t,ot=!1,it=function(){ot=xe(Le,[ht,Tt,At],[-1,-1,-1],Ze,nt)||ot,ot=xe(Le,[At,_t,ht],[-1,-1,-1],Ze,nt)||ot},Pt=ft[0],jt=ft[1],Ut=ft[2];return Pt&&(ht=J(ye([j(Ne,Re-0,He-0)])[0],ye([j(Ne-1,Re-0,He-0)])[0],Pt),Tt=J(ye([j(Ne,Re-0,He-1)])[0],ye([j(Ne-1,Re-0,He-1)])[0],Pt),At=J(ye([j(Ne,Re-1,He-1)])[0],ye([j(Ne-1,Re-1,He-1)])[0],Pt),_t=J(ye([j(Ne,Re-1,He-0)])[0],ye([j(Ne-1,Re-1,He-0)])[0],Pt),it()),jt&&(ht=J(ye([j(Ne-0,Re,He-0)])[0],ye([j(Ne-0,Re-1,He-0)])[0],jt),Tt=J(ye([j(Ne-0,Re,He-1)])[0],ye([j(Ne-0,Re-1,He-1)])[0],jt),At=J(ye([j(Ne-1,Re,He-1)])[0],ye([j(Ne-1,Re-1,He-1)])[0],jt),_t=J(ye([j(Ne-1,Re,He-0)])[0],ye([j(Ne-1,Re-1,He-0)])[0],jt),it()),Ut&&(ht=J(ye([j(Ne-0,Re-0,He)])[0],ye([j(Ne-0,Re-0,He-1)])[0],Ut),Tt=J(ye([j(Ne-0,Re-1,He)])[0],ye([j(Ne-0,Re-1,He-1)])[0],Ut),At=J(ye([j(Ne-1,Re-1,He)])[0],ye([j(Ne-1,Re-1,He-1)])[0],Ut),_t=J(ye([j(Ne-1,Re-0,He)])[0],ye([j(Ne-1,Re-0,He-1)])[0],Ut),it()),ot}function ge(Le,Ne,Re,He,Ze,nt,ft,ht,Tt,At,_t,ot){var it=Le;return ot?(h&&"even"===Le&&(it=null),Oe(it,Ne,Re,He,Ze,nt,ft,ht,Tt,At,_t)):(h&&"odd"===Le&&(it=null),Oe(it,Tt,ht,ft,nt,Ze,He,Re,Ne,At,_t))}function Ie(Le,Ne,Re,He,Ze){for(var nt=[],ft=0,ht=0;ht<Ne.length;ht++)for(var Tt=Ne[ht],At=1;At<U;At++)for(var _t=1;_t<z;_t++)nt.push(ue(Le,j(Tt,_t-1,At-1),j(Tt,_t-1,At),j(Tt,_t,At-1),j(Tt,_t,At),Re,He,(Tt+_t+At)%2,Ze&&Ze[ft]?Ze[ft]:[])),ft++;return nt}function ke(Le,Ne,Re,He,Ze){for(var nt=[],ft=0,ht=0;ht<Ne.length;ht++)for(var Tt=Ne[ht],At=1;At<O;At++)for(var _t=1;_t<U;_t++)nt.push(ue(Le,j(At-1,Tt,_t-1),j(At,Tt,_t-1),j(At-1,Tt,_t),j(At,Tt,_t),Re,He,(At+Tt+_t)%2,Ze&&Ze[ft]?Ze[ft]:[])),ft++;return nt}function Se(Le,Ne,Re,He,Ze){for(var nt=[],ft=0,ht=0;ht<Ne.length;ht++)for(var Tt=Ne[ht],At=1;At<z;At++)for(var _t=1;_t<O;_t++)nt.push(ue(Le,j(_t-1,At-1,Tt),j(_t-1,At,Tt),j(_t,At-1,Tt),j(_t,At,Tt),Re,He,(_t+At+Tt)%2,Ze&&Ze[ft]?Ze[ft]:[])),ft++;return nt}function Pe(Le,Ne,Re){for(var He=1;He<U;He++)for(var Ze=1;Ze<z;Ze++)for(var nt=1;nt<O;nt++)ge(Le,j(nt-1,Ze-1,He-1),j(nt-1,Ze-1,He),j(nt-1,Ze,He-1),j(nt-1,Ze,He),j(nt,Ze-1,He-1),j(nt,Ze-1,He),j(nt,Ze,He-1),j(nt,Ze,He),Ne,Re,(nt+Ze+He)%2)}function Fe(Le,Ne,Re,He,Ze,nt){for(var ft=[],Tt=0;Tt<Ne.length;Tt++)for(var At=Ne[Tt],_t=1;_t<U;_t++)for(var ot=1;ot<z;ot++)ft.push(se(Le,At,ot,_t,Re,He,Ze[Tt]));return ft}function Be(Le,Ne,Re,He,Ze,nt){for(var ft=[],Tt=0;Tt<Ne.length;Tt++)for(var At=Ne[Tt],_t=1;_t<O;_t++)for(var ot=1;ot<U;ot++)ft.push(se(Le,_t,At,ot,Re,He,Ze[Tt]));return ft}function me(Le,Ne,Re,He,Ze,nt){for(var ft=[],Tt=0;Tt<Ne.length;Tt++)for(var At=Ne[Tt],_t=1;_t<z;_t++)for(var ot=1;ot<O;ot++)ft.push(se(Le,ot,_t,At,Re,He,Ze[Tt]));return ft}function Me(Le,Ne){for(var Re=[],He=Le;He<Ne;He++)Re.push(He);return Re}return function(){ee(),function(){for(var Tt=0;Tt<O;Tt++)for(var At=0;At<z;At++)for(var _t=0;_t<U;_t++){var ot=j(Tt,At,_t);$(a._x[ot],a._y[ot],a._z[ot],a._value[ot])}}();var Le=null;if(x&&b&&(X(b),S=!0,Pe(Le,V,q),S=!1),g&&v){X(v);for(var Ne=a.surface.pattern,Re=a.surface.count,He=0;He<Re;He++){var Ze=1===Re?.5:He/(Re-1),nt=(1-Ze)*V+Ze*q,ft=Math.abs(nt-Y)>Math.abs(nt-B)?[Y,nt]:[nt,B];h=!0,Pe(Ne,ft[0],ft[1]),h=!1}}var ht=[[Math.min(V,B),Math.max(V,B)],[Math.min(Y,q),Math.max(Y,q)]];["x","y","z"].forEach(function(Tt){for(var At=[],_t=0;_t<ht.length;_t++){var ot=0,it=ht[_t][0],Pt=ht[_t][1],jt=a.slices[Tt];if(jt.show&&jt.fill){X(jt.fill);var Ut=[],Rt=[],Je=[];if(jt.locations.length)for(var et=0;et<jt.locations.length;et++){var qe=l(jt.locations[et],"x"===Tt?E:"y"===Tt?P:I);0===qe.distRatio?Ut.push(qe.id):qe.id>0&&(Rt.push(qe.id),Je.push("x"===Tt?[qe.distRatio,0,0]:"y"===Tt?[0,qe.distRatio,0]:[0,0,qe.distRatio]))}else Ut=Me(1,"x"===Tt?O-1:"y"===Tt?z-1:U-1);Rt.length>0&&(At[ot]="x"===Tt?Fe(Le,Rt,it,Pt,Je):"y"===Tt?Be(Le,Rt,it,Pt,Je):me(Le,Rt,it,Pt,Je),ot++),Ut.length>0&&(At[ot]="x"===Tt?Ie(Le,Ut,it,Pt,At[ot]):"y"===Tt?ke(Le,Ut,it,Pt,At[ot]):Se(Le,Ut,it,Pt,At[ot]),ot++)}var $e=a.caps[Tt];$e.show&&$e.fill&&(X($e.fill),At[ot]="x"===Tt?Ie(Le,[0,O-1],it,Pt,At[ot]):"y"===Tt?ke(Le,[0,z-1],it,Pt,At[ot]):Se(Le,[0,U-1],it,Pt,At[ot]),ot++)}}),0===w&&ee(),a._meshX=f,a._meshY=c,a._meshZ=y,a._meshIntensity=d,a._Xs=E,a._Ys=P,a._Zs=I}(),a}ne.exports={findNearestOnAxis:l,generateIsoMeshes:n,createIsosurfaceTrace:function(a,s){var f=M({gl:a.glplot.gl}),c=new t(a,f,s.uid);return f._trace=c,c.update(s),a.glplot.add(f),c}}},70548:function(ne,F,e){"use strict";var M=e(3400),k=e(24040),o=e(50048),T=e(27260);function _(p,l,t,i,r){var n=r("isomin"),a=r("isomax");null!=a&&null!=n&&n>a&&(l.isomin=null,l.isomax=null);var s=r("x"),u=r("y"),f=r("z"),c=r("value");s&&s.length&&u&&u.length&&f&&f.length&&c&&c.length?(k.getComponentMethod("calendars","handleTraceDefaults")(p,l,["x","y","z"],i),r("valuehoverformat"),["x","y","z"].forEach(function(y){r(y+"hoverformat");var d="caps."+y;r(d+".show")&&r(d+".fill");var m="slices."+y;r(m+".show")&&(r(m+".fill"),r(m+".locations"))}),r("spaceframe.show")&&r("spaceframe.fill"),r("surface.show")&&(r("surface.count"),r("surface.fill"),r("surface.pattern")),r("contour.show")&&(r("contour.color"),r("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(y){r(y)}),T(p,l,i,r,{prefix:"",cLetter:"c"}),l._length=null):l.visible=!1}ne.exports={supplyDefaults:function(p,l,t,i){_(p,l,0,i,function(r,n){return M.coerce(p,l,o,r,n)})},supplyIsoDefaults:_}},6296:function(ne,F,e){"use strict";ne.exports={attributes:e(50048),supplyDefaults:e(70548).supplyDefaults,calc:e(62624),colorbar:{min:"cmin",max:"cmax"},plot:e(31460).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},52948:function(ne,F,e){"use strict";var M=e(49084),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(16716),_=e(45464),p=e(92880).extendFlat;ne.exports=p({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:o({editType:"calc"}),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},M("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:p({},T.contours.x.show,{}),color:T.contours.x.color,width:T.contours.x.width,editType:"calc"},lightposition:{x:p({},T.lightposition.x,{dflt:1e5}),y:p({},T.lightposition.y,{dflt:1e5}),z:p({},T.lightposition.z,{dflt:0}),editType:"calc"},lighting:p({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},T.lighting),hoverinfo:p({},_.hoverinfo,{editType:"calc"}),showlegend:p({},_.showlegend,{dflt:!1})})},1876:function(ne,F,e){"use strict";var M=e(47128);ne.exports=function(k,o){o.intensity&&M(k,o,{vals:o.intensity,containerStr:"",cLetter:"c"})}},576:function(ne,F,e){"use strict";var M=e(67792).gl_mesh3d,k=e(67792).delaunay_triangulate,o=e(67792).alpha_shape,T=e(67792).convex_hull,_=e(33040).parseColorScale,p=e(3400).isArrayOrTypedArray,l=e(43080),t=e(8932).extractOpts,i=e(52094);function r(c,y,d){this.scene=c,this.uid=d,this.mesh=y,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var n=r.prototype;function a(c){for(var y=[],d=c.length,m=0;m<d;m++)y[m]=l(c[m]);return y}function s(c,y,d,m){for(var g=[],x=y.length,v=0;v<x;v++)g[v]=c.d2l(y[v],0,m)*d;return g}function u(c){for(var y=[],d=c.length,m=0;m<d;m++)y[m]=Math.round(c[m]);return y}function f(c,y){for(var d=c.length,m=0;m<d;m++)if(c[m]<=-.5||c[m]>=y-.5)return!1;return!0}n.handlePick=function(c){if(c.object===this.mesh){var y=c.index=c.data.index;c.traceCoordinate=c.data._cellCenter?c.data.dataCoordinate:[this.data.x[y],this.data.y[y],this.data.z[y]];var d=this.data.hovertext||this.data.text;return p(d)&&void 0!==d[y]?c.textLabel=d[y]:d&&(c.textLabel=d),!0}},n.update=function(c){var y=this.scene,d=y.fullSceneLayout;this.data=c;var m,g=c.x.length,x=i(s(d.xaxis,c.x,y.dataScale[0],c.xcalendar),s(d.yaxis,c.y,y.dataScale[1],c.ycalendar),s(d.zaxis,c.z,y.dataScale[2],c.zcalendar));if(c.i&&c.j&&c.k){if(c.i.length!==c.j.length||c.j.length!==c.k.length||!f(c.i,g)||!f(c.j,g)||!f(c.k,g))return;m=i(u(c.i),u(c.j),u(c.k))}else m=0===c.alphahull?T(x):c.alphahull>0?o(c.alphahull,x):function(S,w){for(var E=["x","y","z"].indexOf(S),P=[],I=w.length,O=0;O<I;O++)P[O]=[w[O][(E+1)%3],w[O][(E+2)%3]];return k(P)}(c.delaunayaxis,x);var v={positions:x,cells:m,lightPosition:[c.lightposition.x,c.lightposition.y,c.lightposition.z],ambient:c.lighting.ambient,diffuse:c.lighting.diffuse,specular:c.lighting.specular,roughness:c.lighting.roughness,fresnel:c.lighting.fresnel,vertexNormalsEpsilon:c.lighting.vertexnormalsepsilon,faceNormalsEpsilon:c.lighting.facenormalsepsilon,opacity:c.opacity,contourEnable:c.contour.show,contourColor:l(c.contour.color).slice(0,3),contourWidth:c.contour.width,useFacetNormals:c.flatshading};if(c.intensity){var b=t(c);this.color="#fff";var h=c.intensitymode;v[h+"Intensity"]=c.intensity,v[h+"IntensityBounds"]=[b.min,b.max],v.colormap=_(c)}else c.vertexcolor?(this.color=c.vertexcolor[0],v.vertexColors=a(c.vertexcolor)):c.facecolor?(this.color=c.facecolor[0],v.cellColors=a(c.facecolor)):(this.color=c.color,v.meshColor=l(c.color));this.mesh.update(v)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ne.exports=function(c,y){var m=M({gl:c.glplot.gl}),g=new r(c,m,y.uid);return m._trace=g,g.update(y),c.glplot.add(m),g}},74212:function(ne,F,e){"use strict";var M=e(24040),k=e(3400),o=e(27260),T=e(52948);ne.exports=function(_,p,l,t){function i(n,a){return k.coerce(_,p,T,n,a)}function r(n){var a=n.map(function(s){var u=i(s);return u&&k.isArrayOrTypedArray(u)?u:null});return a.every(function(s){return s&&s.length===a[0].length})&&a}r(["x","y","z"])?(r(["i","j","k"]),(!p.i||p.j&&p.k)&&(!p.j||p.k&&p.i)&&(!p.k||p.i&&p.j)?(M.getComponentMethod("calendars","handleTraceDefaults")(_,p,["x","y","z"],t),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(n){i(n)}),i("contour.show")&&(i("contour.color"),i("contour.width")),"intensity"in _?(i("intensity"),i("intensitymode"),o(_,p,t,i,{prefix:"",cLetter:"c"})):(p.showscale=!1,"facecolor"in _?i("facecolor"):"vertexcolor"in _?i("vertexcolor"):i("color",l)),i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),p._length=null):p.visible=!1):p.visible=!1}},7404:function(ne,F,e){"use strict";ne.exports={attributes:e(52948),supplyDefaults:e(74212),calc:e(1876),colorbar:{min:"cmin",max:"cmax"},plot:e(576),moduleType:"trace",name:"mesh3d",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},20279:function(ne,F,e){"use strict";var M=e(3400).extendFlat,k=e(52904),o=e(29736).axisHoverFormat,T=e(98192).u,_=e(55756),p=e(48164),l=p.INCREASING.COLOR,t=p.DECREASING.COLOR,i=k.line;function r(n){return{line:{color:M({},i.color,{dflt:n}),width:i.width,dash:T,editType:"style"},editType:"style"}}ne.exports={xperiod:k.xperiod,xperiod0:k.xperiod0,xperiodalignment:k.xperiodalignment,xhoverformat:o("x"),yhoverformat:o("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:M({},i.width,{}),dash:M({},T,{}),editType:"style"},increasing:r(l),decreasing:r(t),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:M({},_.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}}),zorder:k.zorder}},42812:function(ne,F,e){"use strict";var M=e(3400),k=M._,o=e(54460),T=e(1220),_=e(39032).BADNUM;function p(t,i,r,n){return{o:t,h:i,l:r,c:n}}function l(t,i,r,n,a,s){for(var u=a.makeCalcdata(i,"open"),f=a.makeCalcdata(i,"high"),c=a.makeCalcdata(i,"low"),y=a.makeCalcdata(i,"close"),d=M.isArrayOrTypedArray(i.text),m=M.isArrayOrTypedArray(i.hovertext),g=!0,x=null,v=!!i.xperiodalignment,b=[],h=0;h<n.length;h++){var S=n[h],w=u[h],E=f[h],P=c[h],I=y[h];if(S!==_&&w!==_&&E!==_&&P!==_&&I!==_){I===w?null!==x&&I!==x&&(g=I>x):g=I>w,x=I;var O=s(w,E,P,I);O.pos=S,O.yc=(w+I)/2,O.i=h,O.dir=g?"increasing":"decreasing",O.x=O.pos,O.y=[P,E],v&&(O.orig_p=r[h]),d&&(O.tx=i.text[h]),m&&(O.htx=i.hovertext[h]),b.push(O)}else b.push({pos:S,empty:!0})}return i._extremes[a._id]=o.findExtremes(a,M.concat(c,f),{padded:!0}),b.length&&(b[0].t={labels:{open:k(t,"open:")+" ",high:k(t,"high:")+" ",low:k(t,"low:")+" ",close:k(t,"close:")+" "}}),b}ne.exports={calc:function(t,i){var r=o.getFromId(t,i.xaxis),n=o.getFromId(t,i.yaxis),a=function(y,d,m){var g=m._minDiff;if(!g){var x,v=y._fullData,b=[];for(g=1/0,x=0;x<v.length;x++){var h=v[x];if("ohlc"===h.type&&!0===h.visible&&h.xaxis===d._id){b.push(h);var S=d.makeCalcdata(h,"x");h._origX=S;var w=T(m,d,"x",S).vals;h._xcalc=w;var E=M.distinctVals(w).minDiff;E&&isFinite(E)&&(g=Math.min(g,E))}}for(g===1/0&&(g=1),x=0;x<b.length;x++)b[x]._minDiff=g}return g*m.tickwidth}(t,r,i),s=i._minDiff;i._minDiff=null;var u=i._origX;i._origX=null;var f=i._xcalc;i._xcalc=null;var c=l(t,i,u,f,n,p);return i._extremes[r._id]=o.findExtremes(r,f,{vpad:s/2}),c.length?(M.extendFlat(c[0].t,{wHover:s/2,tickLen:a}),c):[{t:{empty:!0}}]},calcCommon:l}},23860:function(ne,F,e){"use strict";var M=e(3400),k=e(52744),o=e(31147),T=e(20279);function _(p,l,t,i){t(i+".line.color"),t(i+".line.width",l.line.width),t(i+".line.dash",l.line.dash)}ne.exports=function(p,l,t,i){function r(n,a){return M.coerce(p,l,T,n,a)}k(p,l,r,i)?(o(p,l,i,r,{x:!0}),r("xhoverformat"),r("yhoverformat"),r("line.width"),r("line.dash"),_(0,l,r,"increasing"),_(0,l,r,"decreasing"),r("text"),r("hovertext"),r("tickwidth"),i._requestRangeslider[l.xaxis]=!0,r("zorder")):l.visible=!1}},18720:function(ne,F,e){"use strict";var M=e(54460),k=e(3400),o=e(93024),T=e(76308),_=e(3400).fillText,p=e(48164),l={increasing:p.INCREASING.SYMBOL,decreasing:p.DECREASING.SYMBOL};function t(n,a,s,u){var f,c,y=n.cd,d=n.xa,m=y[0].trace,g=y[0].t,x=m.type,v="ohlc"===x?"l":"min",b="ohlc"===x?"h":"max",h=g.bPos||0,S=function(B){return B.pos+h-a},w=g.bdPos||g.tickLen,E=g.wHover,P=Math.min(1,w/Math.abs(d.r2c(d.range[1])-d.r2c(d.range[0])));function I(B){var V=S(B);return o.inbox(V-E,V+E,f)}function O(B){var V=B[v],q=B[b];return V===q||o.inbox(V-s,q-s,f)}function z(B){return(I(B)+O(B))/2}f=n.maxHoverDistance-P,c=n.maxSpikeDistance-P;var U=o.getDistanceFunction(u,I,O,z);if(o.getClosest(y,U,n),!1===n.index)return null;var R=y[n.index];if(R.empty)return null;var j=m[R.dir],Y=j.line.color;return n.color=T.opacity(Y)&&j.line.width?Y:j.fillcolor,n.x0=d.c2p(R.pos+h-w,!0),n.x1=d.c2p(R.pos+h+w,!0),n.xLabelVal=void 0!==R.orig_p?R.orig_p:R.pos,n.spikeDistance=z(R)*c/f,n.xSpike=d.c2p(R.pos,!0),n}function i(n,a,s,u){var f=n.cd,c=n.ya,y=f[0].trace,d=f[0].t,m=[],g=t(n,a,s,u);if(!g)return[];var x=f[g.index].hi||y.hoverinfo,v=x.split("+");if("all"!==x&&-1===v.indexOf("y"))return[];for(var b=["high","open","close","low"],h={},S=0;S<b.length;S++){var w,E=b[S],P=y[E][g.index],I=c.c2p(P,!0);P in h?(w=h[P]).yLabel+="<br>"+d.labels[E]+M.hoverLabelText(c,P,y.yhoverformat):((w=k.extendFlat({},g)).y0=w.y1=I,w.yLabelVal=P,w.yLabel=d.labels[E]+M.hoverLabelText(c,P,y.yhoverformat),w.name="",m.push(w),h[P]=w)}return m}function r(n,a,s,u){var f=n.cd,c=n.ya,y=f[0].trace,d=f[0].t,m=t(n,a,s,u);if(!m)return[];var g=f[m.index],x=m.index=g.i,v=g.dir;function b(O){return d.labels[O]+M.hoverLabelText(c,y[O][x],y.yhoverformat)}var h=g.hi||y.hoverinfo,S=h.split("+"),w="all"===h,E=w||-1!==S.indexOf("y"),P=w||-1!==S.indexOf("text"),I=E?[b("open"),b("high"),b("low"),b("close")+"  "+l[v]]:[];return P&&_(g,y,I),m.extraText=I.join("<br>"),m.y0=m.y1=c.c2p(g.yc,!0),[m]}ne.exports={hoverPoints:function(n,a,s,u){return n.cd[0].trace.hoverlabel.split?i(n,a,s,u):r(n,a,s,u)},hoverSplit:i,hoverOnPoints:r}},65456:function(ne,F,e){"use strict";ne.exports={moduleType:"trace",name:"ohlc",basePlotModule:e(57952),categories:["cartesian","svg","showLegend"],meta:{},attributes:e(20279),supplyDefaults:e(23860),calc:e(42812).calc,plot:e(36664),style:e(14008),hoverPoints:e(18720).hoverPoints,selectPoints:e(97384)}},52744:function(ne,F,e){"use strict";var M=e(24040),k=e(3400);ne.exports=function(o,T,_,p){var l=_("x"),t=_("open"),i=_("high"),r=_("low"),n=_("close");if(_("hoverlabel.split"),M.getComponentMethod("calendars","handleTraceDefaults")(o,T,["x"],p),t&&i&&r&&n){var a=Math.min(t.length,i.length,r.length,n.length);return l&&(a=Math.min(a,k.minRowLength(l))),T._length=a,a}}},36664:function(ne,F,e){"use strict";var M=e(33428),k=e(3400);ne.exports=function(o,T,_,p){var l=T.yaxis,t=T.xaxis,i=!!t.rangebreaks;k.makeTraceGroups(p,_,"trace ohlc").each(function(r){var n=M.select(this),a=r[0],s=a.t;if(!0!==a.trace.visible||s.empty)n.remove();else{var u=s.tickLen,f=n.selectAll("path").data(k.identity);f.enter().append("path"),f.exit().remove(),f.attr("d",function(c){if(c.empty)return"M0,0Z";var y=t.c2p(c.pos-u,!0),d=t.c2p(c.pos+u,!0),m=i?(y+d)/2:t.c2p(c.pos,!0);return"M"+y+","+l.c2p(c.o,!0)+"H"+m+"M"+m+","+l.c2p(c.h,!0)+"V"+l.c2p(c.l,!0)+"M"+d+","+l.c2p(c.c,!0)+"H"+m})}})}},97384:function(ne){"use strict";ne.exports=function(F,e){var M,k=F.cd,o=F.xaxis,T=F.yaxis,_=[],p=k[0].t.bPos||0;if(!1===e)for(M=0;M<k.length;M++)k[M].selected=0;else for(M=0;M<k.length;M++){var l=k[M];e.contains([o.c2p(l.pos+p),T.c2p(l.yc)],null,l.i,F)?(_.push({pointNumber:l.i,x:o.c2d(l.pos),y:T.c2d(l.yc)}),l.selected=1):l.selected=0}return _}},14008:function(ne,F,e){"use strict";var M=e(33428),k=e(43616),o=e(76308);ne.exports=function(T,_,p){var l=p||M.select(T).selectAll("g.ohlclayer").selectAll("g.trace");l.style("opacity",function(t){return t[0].trace.opacity}),l.each(function(t){var i=t[0].trace;M.select(this).selectAll("path").each(function(r){if(!r.empty){var n=i[r.dir].line;M.select(this).style("fill","none").call(o.stroke,n.color).call(k.dashLine,n.dash,n.width).style("opacity",i.selectedpoints&&!r.selected?.3:1)}})})}},72140:function(ne,F,e){"use strict";var M=e(92880).extendFlat,k=e(45464),o=e(25376),T=e(49084),_=e(21776).Ks,p=e(86968).u,l=M({editType:"calc"},T("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:_({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});ne.exports={domain:p({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:M({},k.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:_({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:o({editType:"calc"}),tickfont:o({autoShadowDflt:!0,editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:l,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},91800:function(ne,F,e){"use strict";var M=e(84888)._M,k=e(60268),o="parcats";F.name=o,F.plot=function(T,_,p,l){var t=M(T.calcdata,o);t.length&&k(T,t[0],p,l)},F.clean=function(T,_,p,l){var t=l._has&&l._has("parcats"),i=_._has&&_._has("parcats");t&&!i&&l._paperdiv.selectAll(".parcats").remove()}},69136:function(ne,F,e){"use strict";var M=e(71688).wrap,k=e(94288).hasColorscale,o=e(47128),T=e(68944),_=e(43616),p=e(3400),l=e(38248);function t(n,a,s){n.valueInds.push(a),n.count+=s}function i(n,a,s){return{categoryInds:n,color:a,rawColor:s,valueInds:[],count:0}}function r(n,a,s){n.valueInds.push(a),n.count+=s}ne.exports=function(n,a){var s=p.filterVisible(a.dimensions);if(0===s.length)return[];var u,f,c,y=s.map(function(q){var ie;if("trace"===q.categoryorder)ie=null;else if("array"===q.categoryorder)ie=q.categoryarray;else{ie=T(q.values);for(var te=!0,ee=0;ee<ie.length;ee++)if(!l(ie[ee])){te=!1;break}ie.sort(te?p.sorterAsc:void 0),"category descending"===q.categoryorder&&(ie=ie.reverse())}return function($,J){J=null==J?[]:J.map(function(ye){return ye});var X={},ae={},ce=[];J.forEach(function(ye,ve){X[ye]=0,ae[ye]=ve});for(var le=0;le<$.length;le++){var pe,we=$[le];void 0===X[we]?(X[we]=1,pe=J.push(we)-1,ae[we]=pe):(X[we]++,pe=ae[we]),ce.push(pe)}var Te=J.map(function(ye){return X[ye]});return{uniqueValues:J,uniqueCounts:Te,inds:ce}}(q.values,ie)});u=p.isArrayOrTypedArray(a.counts)?a.counts:[a.counts],function(q){var ie;if(function(ee){for(var $=new Array(ee.length),J=0;J<ee.length;J++){if(ee[J]<0||ee[J]>=ee.length||void 0!==$[ee[J]])return!1;$[ee[J]]=!0}return!0}(q.map(function(ee){return ee.displayindex})))for(ie=0;ie<q.length;ie++)q[ie]._displayindex=q[ie].displayindex;else for(ie=0;ie<q.length;ie++)q[ie]._displayindex=ie}(s),s.forEach(function(q,ie){!function(te,ee){te._categoryarray=ee.uniqueValues,te._ticktext=null==te.ticktext?[]:te.ticktext.slice();for(var $=te._ticktext.length;$<ee.uniqueValues.length;$++)te._ticktext.push(ee.uniqueValues[$])}(q,y[ie])});var d,m=a.line;m?(k(a,"line")&&o(n,a,{vals:a.line.color,containerStr:"line",cLetter:"c"}),d=_.tryColorscale(m)):d=p.identity;var g,x,v,b,h,S=s[0].values.length,w={},E=y.map(function(q){return q.inds});for(c=0,g=0;g<S;g++){var P=[];for(x=0;x<E.length;x++)P.push(E[x][g]);c+=f=u[g%u.length];var I=(v=g,b=void 0,h=void 0,p.isArrayOrTypedArray(m.color)?h=b=m.color[v%m.color.length]:b=m.color,{color:d(b),rawColor:h}),O=P+"-"+I.rawColor;void 0===w[O]&&(w[O]=i(P,I.color,I.rawColor)),r(w[O],g,f)}var z,q,ie,te,ee,U=s.map(function(q,ie){return{dimensionInd:ie,containerInd:q._index,displayInd:q._displayindex,dimensionLabel:q.label,count:c,categories:[],dragX:null}});for(g=0;g<S;g++)for(f=u[g%u.length],x=0;x<U.length;x++){var R=U[x].containerInd,j=y[x].inds[g],Y=U[x].categories;void 0===Y[j]&&(Y[j]={dimensionInd:x,categoryInd:z=j,categoryValue:a.dimensions[R]._categoryarray[j],displayInd:z,categoryLabel:a.dimensions[R]._ticktext[j],valueInds:[],count:0,dragY:null}),t(Y[j],g,f)}return M((ie=w,te=c,ee=(q=U).map(function($){return $.categories.length}).reduce(function($,J){return Math.max($,J)}),{dimensions:q,paths:ie,trace:void 0,maxCats:ee,count:te}))}},76671:function(ne,F,e){"use strict";var M=e(3400),k=e(94288).hasColorscale,o=e(27260),T=e(86968).Q,_=e(51272),p=e(72140),l=e(26284),t=e(38116).isTypedArraySpec;function i(r,n){function a(m,g){return M.coerce(r,n,p.dimensions,m,g)}var s=a("values"),u=a("visible");if(s&&s.length||(u=n.visible=!1),u){a("label"),a("displayindex",n._index);var f,c=r.categoryarray,y=M.isArrayOrTypedArray(c)&&c.length>0||t(c);y&&(f="array");var d=a("categoryorder",f);"array"===d?(a("categoryarray"),a("ticktext")):(delete r.categoryarray,delete r.ticktext),y||"array"!==d||(n.categoryorder="trace")}}ne.exports=function(r,n,a,s){function u(d,m){return M.coerce(r,n,p,d,m)}var f=_(r,n,{name:"dimensions",handleItemDefaults:i}),c=function(d,m,g,x,v){v("line.shape"),v("line.hovertemplate");var b=v("line.color",x.colorway[0]);if(k(d,"line")&&M.isArrayOrTypedArray(b)){if(b.length)return v("line.colorscale"),o(d,m,x,v,{prefix:"line.",cLetter:"c"}),b.length;m.line.color=g}return 1/0}(r,n,a,s,u);T(n,s,u),Array.isArray(f)&&f.length||(n.visible=!1),l(n,f,"values",c),u("hoveron"),u("hovertemplate"),u("arrangement"),u("bundlecolors"),u("sortpaths"),u("counts");var y=s.font;M.coerceFont(u,"labelfont",y,{overrideDflt:{size:Math.round(y.size)}}),M.coerceFont(u,"tickfont",y,{autoShadowDflt:!0,overrideDflt:{size:Math.round(y.size/1.2)}})}},22020:function(ne,F,e){"use strict";ne.exports={attributes:e(72140),supplyDefaults:e(76671),calc:e(69136),plot:e(60268),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:e(91800),categories:["noOpacity"],meta:{}}},51036:function(ne,F,e){"use strict";var M=e(33428),k=e(67756).Gz,o=e(36424),T=e(93024),_=e(3400),p=_.strTranslate,l=e(43616),t=e(49760),i=e(72736);function r(te,ee,$,J){var X=ee._context.staticPlot,ae=te.map(Y.bind(0,ee,$)),ce=J.selectAll("g.parcatslayer").data([null]);ce.enter().append("g").attr("class","parcatslayer").style("pointer-events",X?"none":"all");var le=ce.selectAll("g.trace.parcats").data(ae,n),pe=le.enter().append("g").attr("class","trace parcats");le.attr("transform",function(be){return p(be.x,be.y)}),pe.append("g").attr("class","paths");var we=le.select("g.paths").selectAll("path.path").data(function(be){return be.paths},n);we.attr("fill",function(be){return be.model.color});var Te=we.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(be){return be.model.color}).attr("fill-opacity",0);m(Te),we.attr("d",function(be){return be.svgD}),Te.empty()||we.sort(s),we.exit().remove(),we.on("mouseover",u).on("mouseout",f).on("click",d),pe.append("g").attr("class","dimensions");var ye=le.select("g.dimensions").selectAll("g.dimension").data(function(be){return be.dimensions},n);ye.enter().append("g").attr("class","dimension"),ye.attr("transform",function(be){return p(be.x,0)}),ye.exit().remove();var ve=ye.selectAll("g.category").data(function(be){return be.categories},n),xe=ve.enter().append("g").attr("class","category");ve.attr("transform",function(be){return p(0,be.y)}),xe.append("rect").attr("class","catrect").attr("pointer-events","none"),ve.select("rect.catrect").attr("fill","none").attr("width",function(be){return be.width}).attr("height",function(be){return be.height}),x(xe);var Ce=ve.selectAll("rect.bandrect").data(function(be){return be.bands},n);Ce.each(function(){_.raiseToTop(this)}),Ce.attr("fill",function(be){return be.color});var Oe=Ce.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(be){return be.color}).attr("fill-opacity",0);Ce.attr("fill",function(be){return be.color}).attr("width",function(be){return be.width}).attr("height",function(be){return be.height}).attr("y",function(be){return be.y}).attr("cursor",function(be){return"fixed"===be.parcatsViewModel.arrangement?"default":"perpendicular"===be.parcatsViewModel.arrangement?"ns-resize":"move"}),v(Oe),Ce.exit().remove(),xe.append("text").attr("class","catlabel").attr("pointer-events","none"),ve.select("text.catlabel").attr("text-anchor",function(be){return a(be)?"start":"end"}).attr("alignment-baseline","middle").style("fill","rgb(0, 0, 0)").attr("x",function(be){return a(be)?be.width+5:-5}).attr("y",function(be){return be.height/2}).text(function(be){return be.model.categoryLabel}).each(function(be){l.font(M.select(this),be.parcatsViewModel.categorylabelfont),i.convertToTspans(M.select(this),ee)}),xe.append("text").attr("class","dimlabel"),ve.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(be){return"fixed"===be.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(be){return be.width/2}).attr("y",-5).text(function(be,ue){return 0===ue?be.parcatsViewModel.model.dimensions[be.model.dimensionInd].dimensionLabel:null}).each(function(be){l.font(M.select(this),be.parcatsViewModel.labelfont)}),ve.selectAll("rect.bandrect").on("mouseover",E).on("mouseout",P),ve.exit().remove(),ye.call(M.behavior.drag().origin(function(be){return{x:be.x,y:0}}).on("dragstart",I).on("drag",O).on("dragend",z)),le.each(function(be){be.traceSelection=M.select(this),be.pathSelection=M.select(this).selectAll("g.paths").selectAll("path.path"),be.dimensionSelection=M.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),le.exit().remove()}function n(te){return te.key}function a(te){return te.model.dimensionInd===te.parcatsViewModel.dimensions[te.parcatsViewModel.dimensions.length-1].model.dimensionInd}function s(te,ee){return te.model.rawColor>ee.model.rawColor?1:te.model.rawColor<ee.model.rawColor?-1:0}function u(te){if(!te.parcatsViewModel.dragDimension&&-1===te.parcatsViewModel.hoverinfoItems.indexOf("skip")){_.raiseToTop(this),g(M.select(this));var ee=c(te),$=y(te);if(te.parcatsViewModel.graphDiv.emit("plotly_hover",{points:ee,event:M.event,constraints:$}),-1===te.parcatsViewModel.hoverinfoItems.indexOf("none")){var J,X,ae,ce=M.mouse(this)[0],le=te.parcatsViewModel.graphDiv,pe=te.parcatsViewModel.trace,we=le._fullLayout,Te=we._paperdiv.node().getBoundingClientRect(),ye=te.parcatsViewModel.graphDiv.getBoundingClientRect();for(ae=0;ae<te.leftXs.length-1;ae++)if(te.leftXs[ae]+te.dimWidths[ae]-2<=ce&&ce<=te.leftXs[ae+1]+2){var ve=te.parcatsViewModel.dimensions[ae];J=(ve.x+ve.width+te.parcatsViewModel.dimensions[ae+1].x)/2,X=(te.topYs[ae]+te.topYs[ae+1]+te.height)/2;break}var Ce=te.parcatsViewModel.x+J,Oe=te.parcatsViewModel.y+X,be=t.mostReadable(te.model.color,["black","white"]),ue=te.model.count,se=ue/te.parcatsViewModel.model.count,ge={countLabel:ue,probabilityLabel:se.toFixed(3)},Ie=[];-1!==te.parcatsViewModel.hoverinfoItems.indexOf("count")&&Ie.push(["Count:",ge.countLabel].join(" ")),-1!==te.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Ie.push(["P:",ge.probabilityLabel].join(" "));var ke=Ie.join("<br>"),Se=M.mouse(le)[0];T.loneHover({trace:pe,x:Ce-Te.left+ye.left,y:Oe-Te.top+ye.top,text:ke,color:te.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:be,idealAlign:Se<Ce?"right":"left",hovertemplate:(pe.line||{}).hovertemplate,hovertemplateLabels:ge,eventData:[{data:pe._input,fullData:pe,count:ue,probability:se}]},{container:we._hoverlayer.node(),outerContainer:we._paper.node(),gd:le})}}}function f(te){if(!te.parcatsViewModel.dragDimension&&(m(M.select(this)),T.loneUnhover(te.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),te.parcatsViewModel.pathSelection.sort(s),-1===te.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var ee=c(te),$=y(te);te.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:ee,event:M.event,constraints:$})}}function c(te){for(var ee=[],$=U(te.parcatsViewModel),J=0;J<te.model.valueInds.length;J++)ee.push({curveNumber:$,pointNumber:te.model.valueInds[J]});return ee}function y(te){for(var ee={},$=te.parcatsViewModel.model.dimensions,J=0;J<$.length;J++){var X=$[J];ee[X.containerInd]=X.categories[te.model.categoryInds[J]].categoryValue}return void 0!==te.model.rawColor&&(ee.color=te.model.rawColor),ee}function d(te){if(-1===te.parcatsViewModel.hoverinfoItems.indexOf("skip")){var ee=c(te),$=y(te);te.parcatsViewModel.graphDiv.emit("plotly_click",{points:ee,event:M.event,constraints:$})}}function m(te){te.attr("fill",function(ee){return ee.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function g(te){te.attr("fill-opacity",.8).attr("stroke",function(ee){return t.mostReadable(ee.model.color,["black","white"])}).attr("stroke-width",.3)}function x(te){te.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function v(te){te.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function b(te){var $=te.categoryViewModel.model.dimensionInd,J=te.categoryViewModel.model.categoryInd;return te.parcatsViewModel.pathSelection.filter(function(X){return X.model.categoryInds[$]===J&&X.model.color===te.color})}function h(te,ee,$){var J=M.select(te).datum(),X=J.categoryViewModel.model,ae=J.parcatsViewModel.graphDiv,ce=M.select(te.parentNode).selectAll("rect.bandrect"),le=[];ce.each(function(we){b(we).each(function(Te){Array.prototype.push.apply(le,c(Te))})});var pe={};pe[X.dimensionInd]=X.categoryValue,ae.emit(ee,{points:le,event:$,constraints:pe})}function S(te,ee,$){var J=M.select(te).datum(),X=J.categoryViewModel.model,ae=J.parcatsViewModel.graphDiv,ce=b(J),le=[];ce.each(function(we){Array.prototype.push.apply(le,c(we))});var pe={};pe[X.dimensionInd]=X.categoryValue,void 0!==J.rawColor&&(pe.color=J.rawColor),ae.emit(ee,{points:le,event:$,constraints:pe})}function w(te,ee,$){te._fullLayout._calcInverseTransform(te);var J,X,ae=te._fullLayout._invScaleX,ce=te._fullLayout._invScaleY,le=M.select($.parentNode).select("rect.catrect"),pe=le.node().getBoundingClientRect(),we=le.datum(),Te=we.parcatsViewModel,ve=Te.trace,xe=pe.top+pe.height/2;Te.dimensions.length>1&&Te.model.dimensions[we.model.dimensionInd].displayInd===Te.dimensions.length-1?(J=pe.left,X="left"):(J=pe.left+pe.width,X="right");var Ce=we.model.count,Oe=we.model.categoryLabel,be=Ce/we.parcatsViewModel.model.count,ue={countLabel:Ce,categoryLabel:Oe,probabilityLabel:be.toFixed(3)},se=[];-1!==we.parcatsViewModel.hoverinfoItems.indexOf("count")&&se.push(["Count:",ue.countLabel].join(" ")),-1!==we.parcatsViewModel.hoverinfoItems.indexOf("probability")&&se.push(["P("+ue.categoryLabel+"):",ue.probabilityLabel].join(" "));var ge=se.join("<br>");return{trace:ve,x:ae*(J-ee.left),y:ce*(xe-ee.top),text:ge,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:X,hovertemplate:ve.hovertemplate,hovertemplateLabels:ue,eventData:[{data:ve._input,fullData:ve,count:Ce,category:Oe,probability:be}]}}function E(te){if(!te.parcatsViewModel.dragDimension&&-1===te.parcatsViewModel.hoverinfoItems.indexOf("skip")){if(M.mouse(this)[1]<-1)return;var ee,$=te.parcatsViewModel.graphDiv,J=$._fullLayout,X=J._paperdiv.node().getBoundingClientRect(),ae=te.parcatsViewModel.hoveron,ce=this;"color"===ae?(g(we=b(pe=M.select(le=ce).datum())),we.each(function(){_.raiseToTop(this)}),M.select(le.parentNode).selectAll("rect.bandrect").filter(function(Te){return Te.color===pe.color}).each(function(){_.raiseToTop(this),M.select(this).attr("stroke","black").attr("stroke-width",1.5)}),S(ce,"plotly_hover",M.event)):(function(le){M.select(le.parentNode).selectAll("rect.bandrect").each(function(pe){var we=b(pe);g(we),we.each(function(){_.raiseToTop(this)})}),M.select(le.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(ce),h(ce,"plotly_hover",M.event)),-1===te.parcatsViewModel.hoverinfoItems.indexOf("none")&&("category"===ae?ee=w($,X,ce):"color"===ae?ee=function(le,pe,we){le._fullLayout._calcInverseTransform(le);var Te,ye,ve=le._fullLayout._invScaleX,xe=le._fullLayout._invScaleY,Ce=we.getBoundingClientRect(),Oe=M.select(we).datum(),be=Oe.categoryViewModel,ue=be.parcatsViewModel,ge=ue.trace,Ie=Ce.y+Ce.height/2;ue.dimensions.length>1&&ue.model.dimensions[be.model.dimensionInd].displayInd===ue.dimensions.length-1?(Te=Ce.left,ye="left"):(Te=Ce.left+Ce.width,ye="right");var ke=be.model.categoryLabel,Se=Oe.parcatsViewModel.model.count,Pe=0;Oe.categoryViewModel.bands.forEach(function(nt){nt.color===Oe.color&&(Pe+=nt.count)});var Fe=be.model.count,Be=0;ue.pathSelection.each(function(nt){nt.model.color===Oe.color&&(Be+=nt.model.count)});var me=Pe/Se,Me=Pe/Be,Le=Pe/Fe,Ne={countLabel:Pe,categoryLabel:ke,probabilityLabel:me.toFixed(3)},Re=[];-1!==be.parcatsViewModel.hoverinfoItems.indexOf("count")&&Re.push(["Count:",Ne.countLabel].join(" ")),-1!==be.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(Re.push("P(color \u2229 "+ke+"): "+Ne.probabilityLabel),Re.push("P("+ke+" | color): "+Me.toFixed(3)),Re.push("P(color | "+ke+"): "+Le.toFixed(3)));var He=Re.join("<br>"),Ze=t.mostReadable(Oe.color,["black","white"]);return{trace:ge,x:ve*(Te-pe.left),y:xe*(Ie-pe.top),text:He,color:Oe.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:Ze,fontSize:10,idealAlign:ye,hovertemplate:ge.hovertemplate,hovertemplateLabels:Ne,eventData:[{data:ge._input,fullData:ge,category:ke,count:Se,probability:me,categorycount:Fe,colorcount:Be,bandcolorcount:Pe}]}}($,X,ce):"dimension"===ae&&(ee=function(le,pe,we){var Te=[];return M.select(we.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){Te.push(w(le,pe,this))}),Te}($,X,ce)),ee&&T.loneHover(ee,{container:J._hoverlayer.node(),outerContainer:J._paper.node(),gd:$}))}var le,pe,we}function P(te){var ee=te.parcatsViewModel;ee.dragDimension||(m(ee.pathSelection),x(ee.dimensionSelection.selectAll("g.category")),v(ee.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),T.loneUnhover(ee.graphDiv._fullLayout._hoverlayer.node()),ee.pathSelection.sort(s),-1!==ee.hoverinfoItems.indexOf("skip"))||("color"===te.parcatsViewModel.hoveron?S(this,"plotly_unhover",M.event):h(this,"plotly_unhover",M.event))}function I(te){"fixed"!==te.parcatsViewModel.arrangement&&(te.dragDimensionDisplayInd=te.model.displayInd,te.initialDragDimensionDisplayInds=te.parcatsViewModel.model.dimensions.map(function(ee){return ee.displayInd}),te.dragHasMoved=!1,te.dragCategoryDisplayInd=null,M.select(this).selectAll("g.category").select("rect.catrect").each(function(ee){var $=M.mouse(this)[0],J=M.mouse(this)[1];-2<=$&&$<=ee.width+2&&-2<=J&&J<=ee.height+2&&(te.dragCategoryDisplayInd=ee.model.displayInd,te.initialDragCategoryDisplayInds=te.model.categories.map(function(X){return X.displayInd}),ee.model.dragY=ee.y,_.raiseToTop(this.parentNode),M.select(this.parentNode).selectAll("rect.bandrect").each(function(X){X.y<J&&J<=X.y+X.height&&(te.potentialClickBand=this)}))}),te.parcatsViewModel.dragDimension=te,T.loneUnhover(te.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function O(te){if("fixed"!==te.parcatsViewModel.arrangement&&(te.dragHasMoved=!0,null!==te.dragDimensionDisplayInd)){var ee=te.dragDimensionDisplayInd,$=ee-1,J=ee+1,X=te.parcatsViewModel.dimensions[ee];if(null!==te.dragCategoryDisplayInd){var ae=X.categories[te.dragCategoryDisplayInd];ae.model.dragY+=M.event.dy;var ce=ae.model.dragY,le=ae.model.displayInd,pe=X.categories,we=pe[le-1],Te=pe[le+1];void 0!==we&&ce<we.y+we.height/2&&(ae.model.displayInd=we.model.displayInd,we.model.displayInd=le),void 0!==Te&&ce+ae.height>Te.y+Te.height/2&&(ae.model.displayInd=Te.model.displayInd,Te.model.displayInd=le),te.dragCategoryDisplayInd=ae.model.displayInd}if(null===te.dragCategoryDisplayInd||"freeform"===te.parcatsViewModel.arrangement){X.model.dragX=M.event.x;var ye=te.parcatsViewModel.dimensions[$],ve=te.parcatsViewModel.dimensions[J];void 0!==ye&&X.model.dragX<ye.x+ye.width&&(X.model.displayInd=ye.model.displayInd,ye.model.displayInd=ee),void 0!==ve&&X.model.dragX+X.width>ve.x&&(X.model.displayInd=ve.model.displayInd,ve.model.displayInd=te.dragDimensionDisplayInd),te.dragDimensionDisplayInd=X.model.displayInd}q(te.parcatsViewModel),V(te.parcatsViewModel),j(te.parcatsViewModel),R(te.parcatsViewModel)}}function z(te){if("fixed"!==te.parcatsViewModel.arrangement&&null!==te.dragDimensionDisplayInd){M.select(this).selectAll("text").attr("font-weight","normal");var ee={},$=U(te.parcatsViewModel),J=te.parcatsViewModel.model.dimensions.map(function(Te){return Te.displayInd}),X=te.initialDragDimensionDisplayInds.some(function(Te,ye){return Te!==J[ye]});X&&J.forEach(function(Te,ye){ee["dimensions["+te.parcatsViewModel.model.dimensions[ye].containerInd+"].displayindex"]=Te});var ae=!1;if(null!==te.dragCategoryDisplayInd){var ce=te.model.categories.map(function(Te){return Te.displayInd});if(ae=te.initialDragCategoryDisplayInds.some(function(Te,ye){return Te!==ce[ye]})){var le=te.model.categories.slice().sort(function(Te,ye){return Te.displayInd-ye.displayInd}),pe=le.map(function(Te){return Te.categoryValue}),we=le.map(function(Te){return Te.categoryLabel});ee["dimensions["+te.model.containerInd+"].categoryarray"]=[pe],ee["dimensions["+te.model.containerInd+"].ticktext"]=[we],ee["dimensions["+te.model.containerInd+"].categoryorder"]="array"}}-1===te.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!te.dragHasMoved&&te.potentialClickBand&&("color"===te.parcatsViewModel.hoveron?S(te.potentialClickBand,"plotly_click",M.event.sourceEvent):h(te.potentialClickBand,"plotly_click",M.event.sourceEvent)),te.model.dragX=null,null!==te.dragCategoryDisplayInd&&(te.parcatsViewModel.dimensions[te.dragDimensionDisplayInd].categories[te.dragCategoryDisplayInd].model.dragY=null,te.dragCategoryDisplayInd=null),te.dragDimensionDisplayInd=null,te.parcatsViewModel.dragDimension=null,te.dragHasMoved=null,te.potentialClickBand=null,q(te.parcatsViewModel),V(te.parcatsViewModel),M.transition().duration(300).ease("cubic-in-out").each(function(){j(te.parcatsViewModel,!0),R(te.parcatsViewModel,!0)}).each("end",function(){(X||ae)&&o.restyle(te.parcatsViewModel.graphDiv,ee,[$])})}}function U(te){for(var ee,$=te.graphDiv._fullData,J=0;J<$.length;J++)if(te.key===$[J].uid){ee=J;break}return ee}function R(te,ee){var $;void 0===ee&&(ee=!1),te.pathSelection.data(function(J){return J.paths},n),($=te.pathSelection,ee?$.transition():$).attr("d",function(J){return J.svgD})}function j(te,ee){function $(ce){return ee?ce.transition():ce}void 0===ee&&(ee=!1),te.dimensionSelection.data(function(ce){return ce.dimensions},n);var J=te.dimensionSelection.selectAll("g.category").data(function(ce){return ce.categories},n);$(te.dimensionSelection).attr("transform",function(ce){return p(ce.x,0)}),$(J).attr("transform",function(ce){return p(0,ce.y)}),J.select(".dimlabel").text(function(ce,le){return 0===le?ce.parcatsViewModel.model.dimensions[ce.model.dimensionInd].dimensionLabel:null}),J.select(".catlabel").attr("text-anchor",function(ce){return a(ce)?"start":"end"}).attr("x",function(ce){return a(ce)?ce.width+5:-5}).each(function(ce){var le,pe;a(ce)?(le=ce.width+5,pe="start"):(le=-5,pe="end"),M.select(this).selectAll("tspan").attr("x",le).attr("text-anchor",pe)});var X=J.selectAll("rect.bandrect").data(function(ce){return ce.bands},n),ae=X.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(ce){return ce.color}).attr("fill-opacity",0);X.attr("fill",function(ce){return ce.color}).attr("width",function(ce){return ce.width}).attr("height",function(ce){return ce.height}).attr("y",function(ce){return ce.y}),v(ae),X.each(function(){_.raiseToTop(this)}),X.exit().remove()}function Y(te,ee,$){var J,X=$[0],ae=ee.margin||{l:80,r:80,t:100,b:80},ce=X.trace,le=ce.domain,pe=ee.width,we=ee.height,Te=Math.floor(pe*(le.x[1]-le.x[0])),ye=Math.floor(we*(le.y[1]-le.y[0])),ve=le.x[0]*pe+ae.l,xe=ee.height-le.y[1]*ee.height+ae.t,Ce=ce.line.shape;J="all"===ce.hoverinfo?["count","probability"]:(ce.hoverinfo||"").split("+");var Oe={trace:ce,key:ce.uid,model:X,x:ve,y:xe,width:Te,height:ye,hoveron:ce.hoveron,hoverinfoItems:J,arrangement:ce.arrangement,bundlecolors:ce.bundlecolors,sortpaths:ce.sortpaths,labelfont:ce.labelfont,categorylabelfont:ce.tickfont,pathShape:Ce,dragDimension:null,margin:ae,paths:[],dimensions:[],graphDiv:te,traceSelection:null,pathSelection:null,dimensionSelection:null};return X.dimensions&&(q(Oe),V(Oe)),Oe}function B(te,ee,$,J,X){var ae,ce,le=[],pe=[];for(ce=0;ce<$.length-1;ce++)ae=k($[ce]+te[ce],te[ce+1]),le.push(ae(X)),pe.push(ae(1-X));var we="M "+te[0]+","+ee[0];for(we+="l"+$[0]+",0 ",ce=1;ce<$.length;ce++)we+="C"+le[ce-1]+","+ee[ce-1]+" "+pe[ce-1]+","+ee[ce]+" "+te[ce]+","+ee[ce],we+="l"+$[ce]+",0 ";for(we+="l0,"+J+" ",we+="l -"+$[$.length-1]+",0 ",ce=$.length-2;ce>=0;ce--)we+="C"+pe[ce]+","+(ee[ce+1]+J)+" "+le[ce]+","+(ee[ce]+J)+" "+(te[ce]+$[ce])+","+(ee[ce]+J),we+="l-"+$[ce]+",0 ";return we+"Z"}function V(te){var ee=te.dimensions,$=te.model,J=ee.map(function(Ne){return Ne.categories.map(function(Re){return Re.y})}),X=te.model.dimensions.map(function(Ne){return Ne.categories.map(function(Re){return Re.displayInd})}),ae=te.model.dimensions.map(function(Ne){return Ne.displayInd}),ce=te.dimensions.map(function(Ne){return Ne.model.dimensionInd}),le=ee.map(function(Ne){return Ne.x}),pe=ee.map(function(Ne){return Ne.width}),we=[];for(var Te in $.paths)$.paths.hasOwnProperty(Te)&&we.push($.paths[Te]);function ye(Ne){var Re=Ne.categoryInds.map(function(He,Ze){return X[Ze][He]});return ce.map(function(He){return Re[He]})}we.sort(function(Ne,Re){var He=ye(Ne),Ze=ye(Re);return"backward"===te.sortpaths&&(He.reverse(),Ze.reverse()),He.push(Ne.valueInds[0]),Ze.push(Re.valueInds[0]),te.bundlecolors&&(He.unshift(Ne.rawColor),Ze.unshift(Re.rawColor)),He<Ze?-1:He>Ze?1:0});for(var ve=new Array(we.length),xe=ee[0].model.count,Ce=ee[0].categories.map(function(Ne){return Ne.height}).reduce(function(Ne,Re){return Ne+Re}),Oe=0;Oe<we.length;Oe++){var be,ue=we[Oe];be=xe>0?Ce*(ue.count/xe):0;for(var se,ge=new Array(J.length),Ie=0;Ie<ue.categoryInds.length;Ie++){var Se=X[Ie][ue.categoryInds[Ie]],Pe=ae[Ie];ge[Pe]=J[Pe][Se],J[Pe][Se]+=be;var Fe=te.dimensions[Pe].categories[Se],Be=Fe.bands.length,me=Fe.bands[Be-1];if(void 0===me||ue.rawColor!==me.rawColor){var Me=void 0===me?0:me.y+me.height;Fe.bands.push({key:Me,color:ue.color,rawColor:ue.rawColor,height:be,width:Fe.width,count:ue.count,y:Me,categoryViewModel:Fe,parcatsViewModel:te})}else{var Le=Fe.bands[Be-1];Le.height+=be,Le.count+=ue.count}}se=B(le,ge,pe,be,"hspline"===te.pathShape?.5:0),ve[Oe]={key:ue.valueInds[0],model:ue,height:be,leftXs:le,topYs:ge,dimWidths:pe,svgD:se,parcatsViewModel:te}}te.paths=ve}function q(te){var ee=te.model.dimensions.map(function(ce){return{displayInd:ce.displayInd,dimensionInd:ce.dimensionInd}});ee.sort(function(ce,le){return ce.displayInd-le.displayInd});var $=[];for(var J in ee)$.push(ie(te,te.model.dimensions[ee[J].dimensionInd]));te.dimensions=$}function ie(te,ee){var $,J=te.model.dimensions.length;$=40+(J>1?(te.width-80-16)/(J-1):0)*ee.displayInd;var ae,ce,le,we,Te=[],ye=te.model.maxCats,ve=ee.categories.length,xe=ee.count,Ce=te.height-8*(ye-1),Oe=8*(ye-ve)/2,be=ee.categories.map(function(ue){return{displayInd:ue.displayInd,categoryInd:ue.categoryInd}});for(be.sort(function(ue,se){return ue.displayInd-se.displayInd}),we=0;we<ve;we++)le={key:(ce=ee.categories[be[we].categoryInd]).valueInds[0],model:ce,width:16,height:ae=xe>0?ce.count/xe*Ce:0,y:null!==ce.dragY?ce.dragY:Oe,bands:[],parcatsViewModel:te},Oe=Oe+ae+8,Te.push(le);return{key:ee.dimensionInd,x:null!==ee.dragX?ee.dragX:$,y:0,width:16,model:ee,categories:Te,parcatsViewModel:te,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}ne.exports=function(te,ee,$,J){r($,te,J,ee)}},60268:function(ne,F,e){"use strict";var M=e(51036);ne.exports=function(k,o,T,_){var p=k._fullLayout,t=p._size;M(k,p._paper,o,{width:t.w,height:t.h,margin:{t:t.t,r:t.r,b:t.b,l:t.l}},T,_)}},82296:function(ne,F,e){"use strict";var M=e(49084),k=e(94724),o=e(25376),T=e(86968).u,_=e(92880).extendFlat,p=e(31780).templatedArray;ne.exports={domain:T({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:o({editType:"plot"}),tickfont:o({autoShadowDflt:!0,editType:"plot"}),rangefont:o({editType:"plot"}),dimensions:p("dimension",{label:{valType:"string",editType:"plot"},tickvals:_({},k.tickvals,{editType:"plot"}),ticktext:_({},k.ticktext,{editType:"plot"}),tickformat:_({},k.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:_({editType:"calc"},M("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},71864:function(ne,F,e){"use strict";var M=e(30140),k=e(33428),o=e(71688).keyFun,T=e(71688).repeat,_=e(3400).sorterAsc,p=e(3400).strTranslate,l=M.bar.snapRatio;function t(w,E){return w*(1-l)+E*l}var i=M.bar.snapClose;function r(w,E){return w*(1-i)+E*i}function n(w,E,P,I){if(function(ie,te){for(var ee=0;ee<te.length;ee++)if(ie>=te[ee][0]&&ie<=te[ee][1])return!0;return!1}(P,I))return P;var O=w?-1:1,z=0,U=E.length-1;if(O<0){var R=z;z=U,U=R}for(var j=E[z],Y=j,B=z;O*B<O*U;B+=O){var V=B+O,q=E[V];if(O*P<O*r(j,q))return t(j,Y);if(O*P<O*q||V===U)return t(q,j);Y=j,j=q}}function a(w){w.attr("x",-M.bar.captureWidth/2).attr("width",M.bar.captureWidth)}function s(w){w.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function u(w){if(!w.brush.filterSpecified)return"0,"+w.height;for(var E,P,I,O=f(w.brush.filter.getConsolidated(),w.height),z=[0],U=O.length?O[0][0]:null,R=0;R<O.length;R++)P=(E=O[R])[1]-E[0],z.push(U),z.push(P),(I=R+1)<O.length&&(U=O[I][0]-E[1]);return z.push(w.height),z}function f(w,E){return w.map(function(P){return P.map(function(I){return Math.max(0,I*E)}).sort(_)})}function c(){k.select(document.body).style("cursor",null)}function y(w){w.attr("stroke-dasharray",u)}function d(w,E){var P=k.select(w).selectAll(".highlight, .highlight-shadow");y(E?P.transition().duration(M.bar.snapDuration).each("end",E):P)}function m(w,E){var P,I=w.brush,O=NaN,z={};if(I.filterSpecified){var U=w.height,R=I.filter.getConsolidated(),j=f(R,U),Y=NaN,B=NaN,V=NaN;for(P=0;P<=j.length;P++){var q=j[P];if(q&&q[0]<=E&&E<=q[1]){Y=P;break}if(B=P?P-1:NaN,q&&q[0]>E){V=P;break}}if(O=Y,isNaN(O)&&(O=isNaN(B)||isNaN(V)?isNaN(B)?V:B:E-j[B][1]<j[V][0]-E?B:V),!isNaN(O)){var ie=j[O],te=function(X,ae){var ce=M.bar.handleHeight;if(!(ae>X[1]+ce||ae<X[0]-ce))return ae>=.9*X[1]+.1*X[0]?"n":ae<=.9*X[0]+.1*X[1]?"s":"ns"}(ie,E);te&&(z.interval=R[O],z.intervalPix=ie,z.region=te)}}if(w.ordinal&&!z.region){var ee=w.unitTickvals,$=w.unitToPaddedPx.invert(E);for(P=0;P<ee.length;P++){var J=[.25*ee[Math.max(P-1,0)]+.75*ee[P],.25*ee[Math.min(P+1,ee.length-1)]+.75*ee[P]];if($>=J[0]&&$<=J[1]){z.clickableOrdinalRange=J;break}}}return z}function g(w,E){k.event.sourceEvent.stopPropagation();var P=E.height-k.mouse(w)[1]-2*M.verticalPadding,I=E.brush.svgBrush;I.wasDragged=!0,I._dragging=!0,I.newExtent=I.grabbingBar?[P-I.grabPoint,P+I.barLength-I.grabPoint].map(E.unitToPaddedPx.invert):[I.startExtent,E.unitToPaddedPx.invert(P)].sort(_),E.brush.filterSpecified=!0,I.extent=I.stayingIntervals.concat([I.newExtent]),I.brushCallback(E),d(w.parentNode)}function x(w,E){var P=m(E,E.height-k.mouse(w)[1]-2*M.verticalPadding),I="crosshair";P.clickableOrdinalRange?I="pointer":P.region&&(I=P.region+"-resize"),k.select(document.body).style("cursor",I)}function v(w){w.on("mousemove",function(E){k.event.preventDefault(),E.parent.inBrushDrag||x(this,E)}).on("mouseleave",function(E){E.parent.inBrushDrag||c()}).call(k.behavior.drag().on("dragstart",function(E){!function(P,I){k.event.sourceEvent.stopPropagation();var O=I.height-k.mouse(P)[1]-2*M.verticalPadding,z=I.unitToPaddedPx.invert(O),U=I.brush,R=m(I,O),j=R.interval,Y=U.svgBrush;if(Y.wasDragged=!1,Y.grabbingBar="ns"===R.region,Y.grabbingBar){var B=j.map(I.unitToPaddedPx);Y.grabPoint=O-B[0]-M.verticalPadding,Y.barLength=B[1]-B[0]}Y.clickableOrdinalRange=R.clickableOrdinalRange,Y.stayingIntervals=I.multiselect&&U.filterSpecified?U.filter.getConsolidated():[],j&&(Y.stayingIntervals=Y.stayingIntervals.filter(function(V){return V[0]!==j[0]&&V[1]!==j[1]})),Y.startExtent=R.region?j["s"===R.region?1:0]:z,I.parent.inBrushDrag=!0,Y.brushStartCallback()}(this,E)}).on("drag",function(E){g(this,E)}).on("dragend",function(E){!function(P,I){var O=I.brush,z=O.filter,U=O.svgBrush;U._dragging||(x(P,I),g(P,I),I.brush.svgBrush.wasDragged=!1),U._dragging=!1,k.event.sourceEvent.stopPropagation();var R=U.grabbingBar;if(U.grabbingBar=!1,U.grabLocation=void 0,I.parent.inBrushDrag=!1,c(),!U.wasDragged)return U.wasDragged=void 0,U.clickableOrdinalRange?O.filterSpecified&&I.multiselect?U.extent.push(U.clickableOrdinalRange):(U.extent=[U.clickableOrdinalRange],O.filterSpecified=!0):R?(U.extent=U.stayingIntervals,0===U.extent.length&&h(O)):h(O),U.brushCallback(I),d(P.parentNode),void U.brushEndCallback(O.filterSpecified?z.getConsolidated():[]);var j=function(){z.set(z.getConsolidated())};if(I.ordinal){var Y=I.unitTickvals;Y[Y.length-1]<Y[0]&&Y.reverse(),U.newExtent=[n(0,Y,U.newExtent[0],U.stayingIntervals),n(1,Y,U.newExtent[1],U.stayingIntervals)];var B=U.newExtent[1]>U.newExtent[0];U.extent=U.stayingIntervals.concat(B?[U.newExtent]:[]),U.extent.length||h(O),U.brushCallback(I),B?d(P.parentNode,j):(j(),d(P.parentNode))}else j();U.brushEndCallback(O.filterSpecified?z.getConsolidated():[])}(this,E)}))}function b(w,E){return w[0]-E[0]}function h(w){w.filterSpecified=!1,w.svgBrush.extent=[[-1/0,1/0]]}function S(w){for(var E,P=w.slice(),I=[],O=P.shift();O;){for(E=O.slice();(O=P.shift())&&O[0]<=E[1];)E[1]=Math.max(E[1],O[1]);I.push(E)}return 1===I.length&&I[0][0]>I[0][1]&&(I=[]),I}ne.exports={makeBrush:function(w,E,P,I,O,z){var U,j,Y,B,R=(B=[],{set:function(V){1===(B=V.map(function(q){return q.slice().sort(_)}).sort(b)).length&&B[0][0]===-1/0&&B[0][1]===1/0&&(B=[[0,-1]]),j=S(B),Y=B.reduce(function(q,ie){return[Math.min(q[0],ie[0]),Math.max(q[1],ie[1])]},[1/0,-1/0])},get:function(){return B.slice()},getConsolidated:function(){return j},getBounds:function(){return Y}});return R.set(P),{filter:R,filterSpecified:E,svgBrush:{extent:[],brushStartCallback:I,brushCallback:(U=O,function(j){var Y=j.brush,V=Y.svgBrush.extent.map(function(ie){return ie.slice()}).slice();Y.filter.set(V),U()}),brushEndCallback:z}}},ensureAxisBrush:function(w,E,P){var I=w.selectAll("."+M.cn.axisBrush).data(T,o);I.enter().append("g").classed(M.cn.axisBrush,!0),function(O,z,U){var R=U._context.staticPlot,j=O.selectAll(".background").data(T);j.enter().append("rect").classed("background",!0).call(a).call(s).style("pointer-events",R?"none":"auto").attr("transform",p(0,M.verticalPadding)),j.call(v).attr("height",function(V){return V.height-M.verticalPadding});var Y=O.selectAll(".highlight-shadow").data(T);Y.enter().append("line").classed("highlight-shadow",!0).attr("x",-M.bar.width/2).attr("stroke-width",M.bar.width+M.bar.strokeWidth).attr("stroke",z).attr("opacity",M.bar.strokeOpacity).attr("stroke-linecap","butt"),Y.attr("y1",function(V){return V.height}).call(y);var B=O.selectAll(".highlight").data(T);B.enter().append("line").classed("highlight",!0).attr("x",-M.bar.width/2).attr("stroke-width",M.bar.width-M.bar.strokeWidth).attr("stroke",M.bar.fillColor).attr("opacity",M.bar.fillOpacity).attr("stroke-linecap","butt"),B.attr("y1",function(V){return V.height}).call(y)}(I,E,P)},cleanRanges:function(w,E){if(Array.isArray(w[0])?(w=w.map(function(I){return I.sort(_)}),w=E.multiselect?S(w.sort(b)):[w[0]]):w=[w.sort(_)],E.tickvals){var P=E.tickvals.slice().sort(_);if(!(w=w.map(function(I){var O=[n(0,P,I[0],[]),n(1,P,I[1],[])];if(O[1]>O[0])return O}).filter(function(I){return I})).length)return}return w.length>1?w:w[0]}}},61664:function(ne,F,e){"use strict";ne.exports={attributes:e(82296),supplyDefaults:e(60664),calc:e(95044),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:e(19976),categories:["gl","regl","noOpacity","noHover"],meta:{}}},19976:function(ne,F,e){"use strict";var M=e(33428),k=e(84888)._M,o=e(24196),T=e(9616);F.name="parcoords",F.plot=function(_){var p=k(_.calcdata,"parcoords")[0];p.length&&o(_,p)},F.clean=function(_,p,l,t){var i=t._has&&t._has("parcoords"),r=p._has&&p._has("parcoords");i&&!r&&(t._paperdiv.selectAll(".parcoords").remove(),t._glimages.selectAll("*").remove())},F.toSVG=function(_){var p=_._fullLayout._glimages,l=M.select(_).selectAll(".svg-container");l.filter(function(t,i){return i===l.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var t=this,i=t.toDataURL("image/png");p.append("svg:image").attr({xmlns:T.svg,"xlink:href":i,preserveAspectRatio:"none",x:0,y:0,width:t.style.width,height:t.style.height})}),window.setTimeout(function(){M.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},95044:function(ne,F,e){"use strict";var M=e(3400).isArrayOrTypedArray,k=e(8932),o=e(71688).wrap;ne.exports=function(T,_){var p,l;return k.hasColorscale(_,"line")&&M(_.line.color)?(p=_.line.color,l=k.extractOpts(_.line).colorscale,k.calc(T,_,{vals:p,containerStr:"line",cLetter:"c"})):(p=function(t){for(var i=new Array(t),r=0;r<t;r++)i[r]=.5;return i}(_._length),l=[[0,_.line.color],[1,_.line.color]]),o({lineColor:p,cscale:l})}},30140:function(ne){"use strict";ne.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},60664:function(ne,F,e){"use strict";var M=e(3400),k=e(94288).hasColorscale,o=e(27260),T=e(86968).Q,_=e(51272),p=e(54460),l=e(82296),t=e(71864),i=e(30140).maxDimensionCount,r=e(26284);function n(a,s,u,f){function c(x,v){return M.coerce(a,s,l.dimensions,x,v)}var y=c("values"),d=c("visible");if(y&&y.length||(d=s.visible=!1),d){c("label"),c("tickvals"),c("ticktext"),c("tickformat");var m=c("range");s._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:m},p.setConvert(s._ax,f.layout),c("multiselect");var g=c("constraintrange");g&&(s.constraintrange=t.cleanRanges(g,s))}}ne.exports=function(a,s,u,f){function c(x,v){return M.coerce(a,s,l,x,v)}var y=a.dimensions;Array.isArray(y)&&y.length>i&&(M.log("parcoords traces support up to "+i+" dimensions at the moment"),y.splice(i));var d=_(a,s,{name:"dimensions",layout:f,handleItemDefaults:n}),m=function(x,v,b,h,S){var w=S("line.color",b);if(k(x,"line")&&M.isArrayOrTypedArray(w)){if(w.length)return S("line.colorscale"),o(x,v,h,S,{prefix:"line.",cLetter:"c"}),w.length;v.line.color=b}return 1/0}(a,s,u,f,c);T(s,f,c),Array.isArray(d)&&d.length||(s.visible=!1),r(s,d,"values",m);var g=M.extendFlat({},f.font,{size:Math.round(f.font.size/1.2)});M.coerceFont(c,"labelfont",g),M.coerceFont(c,"tickfont",g,{autoShadowDflt:!0}),M.coerceFont(c,"rangefont",g),c("labelangle"),c("labelside"),c("unselected.line.color"),c("unselected.line.opacity")}},95724:function(ne,F,e){"use strict";var M=e(3400).isTypedArray;F.convertTypedArray=function(k){return M(k)?Array.prototype.slice.call(k):k},F.isOrdinal=function(k){return!!k.tickvals},F.isVisible=function(k){return k.visible||!("visible"in k)}},29928:function(ne,F,e){"use strict";var M=e(61664);M.plot=e(24196),ne.exports=M},51352:function(ne,F,e){"use strict";var M=["precision highp float;","","varying vec4 fragColor;","","attribute vec4 p01_04, p05_08, p09_12, p13_16,","               p17_20, p21_24, p25_28, p29_32,","               p33_36, p37_40, p41_44, p45_48,","               p49_52, p53_56, p57_60, colors;","","uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,","             loA, hiA, loB, hiB, loC, hiC, loD, hiD;","","uniform vec2 resolution, viewBoxPos, viewBoxSize;","uniform float maskHeight;","uniform float drwLayer; // 0: context, 1: focus, 2: pick","uniform vec4 contextColor;","uniform sampler2D maskTexture, palette;","","bool isPick    = (drwLayer > 1.5);","bool isContext = (drwLayer < 0.5);","","const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);","const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);","","float val(mat4 p, mat4 v) {","    return dot(matrixCompMult(p, v) * UNITS, UNITS);","}","","float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {","    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);","    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);","    return y1 * (1.0 - ratio) + y2 * ratio;","}","","int iMod(int a, int b) {","    return a - b * (a / b);","}","","bool fOutside(float p, float lo, float hi) {","    return (lo < hi) && (lo > p || p > hi);","}","","bool vOutside(vec4 p, vec4 lo, vec4 hi) {","    return (","        fOutside(p[0], lo[0], hi[0]) ||","        fOutside(p[1], lo[1], hi[1]) ||","        fOutside(p[2], lo[2], hi[2]) ||","        fOutside(p[3], lo[3], hi[3])","    );","}","","bool mOutside(mat4 p, mat4 lo, mat4 hi) {","    return (","        vOutside(p[0], lo[0], hi[0]) ||","        vOutside(p[1], lo[1], hi[1]) ||","        vOutside(p[2], lo[2], hi[2]) ||","        vOutside(p[3], lo[3], hi[3])","    );","}","","bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {","    return mOutside(A, loA, hiA) ||","           mOutside(B, loB, hiB) ||","           mOutside(C, loC, hiC) ||","           mOutside(D, loD, hiD);","}","","bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {","    mat4 pnts[4];","    pnts[0] = A;","    pnts[1] = B;","    pnts[2] = C;","    pnts[3] = D;","","    for(int i = 0; i < 4; ++i) {","        for(int j = 0; j < 4; ++j) {","            for(int k = 0; k < 4; ++k) {","                if(0 == iMod(","                    int(255.0 * texture2D(maskTexture,","                        vec2(","                            (float(i * 2 + j / 2) + 0.5) / 8.0,","                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight","                        ))[3]","                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),","                    2","                )) return true;","            }","        }","    }","    return false;","}","","vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {","    float x = 0.5 * sign(v) + 0.5;","    float y = axisY(x, A, B, C, D);","    float z = 1.0 - abs(v);","","    z += isContext ? 0.0 : 2.0 * float(","        outsideBoundingBox(A, B, C, D) ||","        outsideRasterMask(A, B, C, D)","    );","","    return vec4(","        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,","        z,","        1.0","    );","}","","void main() {","    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);","    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);","    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);","    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);","","    float v = colors[3];","","    gl_Position = position(isContext, v, A, B, C, D);","","    fragColor =","        isContext ? vec4(contextColor) :","        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));","}"].join("\n"),k=["precision highp float;","","varying vec4 fragColor;","","void main() {","    gl_FragColor = fragColor;","}"].join("\n"),o=e(30140).maxDimensionCount,T=e(3400),p=new Uint8Array(4),l=new Uint8Array(4),t={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function i(d,m,g,x,v){var b=d._gl;b.enable(b.SCISSOR_TEST),b.scissor(m,g,x,v),d.clear({color:[0,0,0,0],depth:1})}function r(d,m,g,x,v,b){var h=b.key;g.drawCompleted||(d.read({x:0,y:0,width:1,height:1,data:p}),g.drawCompleted=!0),function S(w){var E=Math.min(x,v-w*x);0===w&&(window.cancelAnimationFrame(g.currentRafs[h]),delete g.currentRafs[h],i(d,b.scissorX,b.scissorY,b.scissorWidth,b.viewBoxSize[1])),g.clearOnly||(b.count=2*E,b.offset=2*w*x,m(b),w*x+E<v&&(g.currentRafs[h]=window.requestAnimationFrame(function(){S(w+1)})),g.drawCompleted=!1)}(0)}function n(d,m){for(var g=new Array(256),x=0;x<256;x++)g[x]=d(x/255).concat(m);return g}function a(d,m){return(d>>>8*m)%256/255}function s(d,m,g){for(var x=new Array(8*m),v=0,b=0;b<m;b++)for(var h=0;h<2;h++)for(var S=0;S<4;S++){var w=4*d+S,E=g[64*b+w];63===w&&0===h&&(E*=-1),x[v++]=E}return x}function u(d){var m="0"+d;return m.substr(m.length-2)}function f(d){return d<o?"p"+u(d+1)+"_"+u(d+4):"colors"}function c(d,m,g,x,v,b,h,S,w,E,P,I,O,z){for(var U=[[],[]],R=0;R<64;R++)U[0][R]=R===v?1:0,U[1][R]=R===b?1:0;var j=d.lines.canvasOverdrag*z,Y=d.domain,B=d.canvasWidth*z,V=d.canvasHeight*z,q=d.pad.l*z,ie=d.pad.b*z,te=d.layoutHeight*z,ee=d.layoutWidth*z,$=d.deselectedLines.color,J=d.deselectedLines.opacity;return T.extendFlat({key:P,resolution:[B,V],viewBoxPos:[(h*=z)+j,S*=z],viewBoxSize:[w*=z,E*=z],i0:v,i1:b,dim0A:U[0].slice(0,16),dim0B:U[0].slice(16,32),dim0C:U[0].slice(32,48),dim0D:U[0].slice(48,64),dim1A:U[1].slice(0,16),dim1B:U[1].slice(16,32),dim1C:U[1].slice(32,48),dim1D:U[1].slice(48,64),drwLayer:I,contextColor:[$[0]/255,$[1]/255,$[2]/255,"auto"!==J?$[3]*J:Math.max(.00392156862745098,Math.pow(1/d.lines.color.length,.3333333333333333))],scissorX:(x===m?0:h+j)+(q-j)+ee*Y.x[0],scissorWidth:(x===g?B-h+j:w+.5)+(x===m?h+j:0),scissorY:S+ie+te*Y.y[0],scissorHeight:E,viewportX:q-j+ee*Y.x[0],viewportY:ie+te*Y.y[0],viewportWidth:B,viewportHeight:V},O)}function y(d){var m=2047,g=Math.max(0,Math.floor(d[0]*m),0),x=Math.min(m,Math.ceil(d[1]*m),m);return[Math.min(g,x),Math.max(g,x)]}ne.exports=function(d,m){var g,v,b,h,S=m.context,w=m.pick,E=m.regl,P=E._gl,I=P.getParameter(P.ALIASED_LINE_WIDTH_RANGE),O=Math.max(I[0],Math.min(I[1],m.viewModel.plotGlPixelRatio)),z={currentRafs:{},drawCompleted:!0,clearOnly:!1},U=function(V){for(var q={},ie=0;ie<=o;ie+=4)q[f(ie)]=V.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return q}(E),R=E.texture(t),j=[];B(m);var Y=E({profile:!1,blend:{enable:S,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!S,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:E.prop("scissorX"),y:E.prop("scissorY"),width:E.prop("scissorWidth"),height:E.prop("scissorHeight")}},viewport:{x:E.prop("viewportX"),y:E.prop("viewportY"),width:E.prop("viewportWidth"),height:E.prop("viewportHeight")},dither:!1,vert:M,frag:k,primitive:"lines",lineWidth:O,attributes:U,uniforms:{resolution:E.prop("resolution"),viewBoxPos:E.prop("viewBoxPos"),viewBoxSize:E.prop("viewBoxSize"),dim0A:E.prop("dim0A"),dim1A:E.prop("dim1A"),dim0B:E.prop("dim0B"),dim1B:E.prop("dim1B"),dim0C:E.prop("dim0C"),dim1C:E.prop("dim1C"),dim0D:E.prop("dim0D"),dim1D:E.prop("dim1D"),loA:E.prop("loA"),hiA:E.prop("hiA"),loB:E.prop("loB"),hiB:E.prop("hiB"),loC:E.prop("loC"),hiC:E.prop("hiC"),loD:E.prop("loD"),hiD:E.prop("hiD"),palette:R,contextColor:E.prop("contextColor"),maskTexture:E.prop("maskTexture"),drwLayer:E.prop("drwLayer"),maskHeight:E.prop("maskHeight")},offset:E.prop("offset"),count:E.prop("count")});function B(V){g=V.model,v=V.viewModel.dimensions.slice(),b=v[0]?v[0].values.length:0;var q=g.lines,ie=w?q.color.map(function(ee,$){return $/q.color.length}):q.color,te=function(ee,$,J){for(var ae=new Array(ee*(o+4)),ce=0,le=0;le<ee;le++){for(var pe=0;pe<o;pe++)ae[ce++]=pe<$.length?$[pe].paddedUnitValues[le]:.5;ae[ce++]=a(le,2),ae[ce++]=a(le,1),ae[ce++]=a(le,0),ae[ce++]=Math.max(1e-6,Math.min(.999999,J[le]))}return ae}(b,v,ie);(function(ee,$,J){for(var X=0;X<=o;X+=4)ee[f(X)](s(X/4,$,J))})(U,b,te),S||w||(R=E.texture(T.extendFlat({data:n(g.unitToColor,255)},t)))}return{render:function(V,q,ie){var te,ee,$,J=V.length,X=1/0,ae=-1/0;for(te=0;te<J;te++)V[te].dim0.canvasX<X&&(X=V[te].dim0.canvasX,ee=te),V[te].dim1.canvasX>ae&&(ae=V[te].dim1.canvasX,$=te);0===J&&i(E,0,0,g.canvasWidth,g.canvasHeight);var ce=function(be){var ue,se,ge,Ie=[[],[]];for(ge=0;ge<64;ge++){var ke=!be&&ge<v.length?v[ge].brush.filter.getBounds():[-1/0,1/0];Ie[0][ge]=ke[0],Ie[1][ge]=ke[1]}var Se=new Array(16384);for(ue=0;ue<16384;ue++)Se[ue]=255;if(!be)for(ue=0;ue<v.length;ue++){var Pe=ue%8,Fe=(ue-Pe)/8,Be=Math.pow(2,Pe),me=v[ue].brush.filter.get();if(!(me.length<2)){var Me=y(me[0])[1];for(se=1;se<me.length;se++){var Le=y(me[se]);for(ge=Me+1;ge<Le[0];ge++)Se[8*ge+Fe]&=~Be;Me=Math.max(Me,Le[1])}}}var Ne={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:Se};return h?h(Ne):h=E.texture(Ne),{maskTexture:h,maskHeight:2048,loA:Ie[0].slice(0,16),loB:Ie[0].slice(16,32),loC:Ie[0].slice(32,48),loD:Ie[0].slice(48,64),hiA:Ie[1].slice(0,16),hiB:Ie[1].slice(16,32),hiC:Ie[1].slice(32,48),hiD:Ie[1].slice(48,64)}}(S);for(te=0;te<J;te++){var le=V[te],pe=le.dim0.crossfilterDimensionIndex,we=le.dim1.crossfilterDimensionIndex,Te=le.canvasX,ye=le.canvasY,ve=Te+le.panelSizeX,xe=le.plotGlPixelRatio;if(q||!j[pe]||j[pe][0]!==Te||j[pe][1]!==ve){j[pe]=[Te,ve];var Ce=c(g,ee,$,te,pe,we,Te,ye,le.panelSizeX,le.panelSizeY,le.dim0.crossfilterDimensionIndex,S?0:w?2:1,ce,xe);z.clearOnly=ie,r(E,Y,z,q?g.lines.blockLineCount:b,b,Ce)}}},readPixel:function(V,q){return E.read({x:V,y:q,width:1,height:1,data:l}),l},readPixels:function(V,q,ie,te){var ee=new Uint8Array(4*ie*te);return E.read({x:V,y:q,width:ie,height:te,data:ee}),ee},destroy:function(){for(var V in d.style["pointer-events"]="none",R.destroy(),h&&h.destroy(),U)U[V].destroy()},update:B}}},26284:function(ne){"use strict";ne.exports=function(F,e,M,k){var o,T;for(k||(k=1/0),o=0;o<e.length;o++)(T=e[o]).visible&&(k=Math.min(k,T[M].length));for(k===1/0&&(k=0),F._length=k,o=0;o<e.length;o++)(T=e[o]).visible&&(T._length=k);return k}},36336:function(ne,F,e){"use strict";var M=e(33428),k=e(3400),o=k.isArrayOrTypedArray,T=k.numberFormat,_=e(96824),p=e(54460),l=k.strRotate,t=k.strTranslate,i=e(72736),r=e(43616),n=e(8932),a=e(71688),s=a.keyFun,u=a.repeat,f=a.unwrap,c=e(95724),y=e(30140),d=e(71864),m=e(51352);function g(Y,B,V){return k.aggNums(Y,null,B,V)}function x(Y,B){return b(g(Math.min,Y,B),g(Math.max,Y,B))}function v(Y){var B=Y.range;return B?b(B[0],B[1]):x(Y.values,Y._length)}function b(Y,B){return!isNaN(Y)&&isFinite(Y)||(Y=0),!isNaN(B)&&isFinite(B)||(B=0),Y===B&&(0===Y?(Y-=1,B+=1):(Y*=.9,B*=1.1)),[Y,B]}function h(Y,B,V,q,ie){var te,ee,$=v(V);return q?M.scale.ordinal().domain(q.map((te=T(V.tickformat),ee=ie,ee?function(J,X){return ee[X]??te(J)}:te))).range(q.map(function(J){return Y-B+(J-$[0])/($[1]-$[0])*(2*B-Y)})):M.scale.linear().domain($).range([Y-B,B])}function S(Y){if(Y.tickvals){var B=v(Y);return M.scale.ordinal().domain(Y.tickvals).range(Y.tickvals.map(function(V){return(V-B[0])/(B[1]-B[0])}))}}function w(Y){var B=Y.map(function(ie){return ie[0]}),V=Y.map(function(ie){var te=_(ie[1]);return M.rgb("rgb("+te[0]+","+te[1]+","+te[2]+")")}),q="rgb".split("").map(function(ie){return M.scale.linear().clamp(!0).domain(B).range(V.map((te=ie,function(ee){return ee[te]})));var te});return function(ie){return q.map(function(te){return te(ie)})}}function E(Y){return Y.dimensions.some(function(B){return B.brush.filterSpecified})}function P(Y,B,V){var q=f(B),ie=q.trace,te=c.convertTypedArray(q.lineColor),ee=ie.line,$={color:_(ie.unselected.line.color),opacity:ie.unselected.line.opacity},J=n.extractOpts(ee),X=J.reversescale?n.flipScale(q.cscale):q.cscale,ae=ie.domain,ce=ie.dimensions,le=Y.width,pe=ie.labelangle,we=ie.labelside,Te=ie.labelfont,ye=ie.tickfont,ve=ie.rangefont,xe=k.extendDeepNoArrays({},ee,{color:te.map(M.scale.linear().domain(v({values:te,range:[J.min,J.max],_length:ie._length}))),blockLineCount:y.blockLineCount,canvasOverdrag:y.overdrag*y.canvasPixelRatio}),Ce=Math.floor(le*(ae.x[1]-ae.x[0])),Oe=Math.floor(Y.height*(ae.y[1]-ae.y[0])),be=Y.margin||{l:80,r:80,t:100,b:80},ue=Ce,se=Oe;return{key:V,colCount:ce.filter(c.isVisible).length,dimensions:ce,tickDistance:y.tickDistance,unitToColor:w(X),lines:xe,deselectedLines:$,labelAngle:pe,labelSide:we,labelFont:Te,tickFont:ye,rangeFont:ve,layoutWidth:le,layoutHeight:Y.height,domain:ae,translateX:ae.x[0]*le,translateY:Y.height-ae.y[1]*Y.height,pad:be,canvasWidth:ue*y.canvasPixelRatio+2*xe.canvasOverdrag,canvasHeight:se*y.canvasPixelRatio,width:ue,height:se,canvasPixelRatio:y.canvasPixelRatio}}function I(Y,B,V){var le,pe,q=V.width,ie=V.height,te=V.dimensions,ee=V.canvasPixelRatio,$=function(le){return q*le/Math.max(1,V.colCount-1)},J=y.verticalPadding/ie,X=(le=ie,pe=y.verticalPadding,M.scale.linear().range([pe,le-pe])),ae={key:V.key,xScale:$,model:V,inBrushDrag:!1},ce={};return ae.dimensions=te.filter(c.isVisible).map(function(le,pe){var Pe,Fe,we=(Pe=le,Fe=J,M.scale.linear().domain(v(Pe)).range([Fe,1-Fe])),Te=ce[le.label];ce[le.label]=(Te||0)+1;var ye=le.label+(Te?"__"+Te:""),ve=le.constraintrange,xe=ve&&ve.length;xe&&!o(ve[0])&&(ve=[ve]);var Ce=xe?ve.map(function(Pe){return Pe.map(we)}):[[-1/0,1/0]],Oe=le.values;Oe.length>le._length&&(Oe=Oe.slice(0,le._length));var be,ue=le.tickvals;function se(Pe,Fe){return{val:Pe,text:be[Fe]}}function ge(Pe,Fe){return Pe.val-Fe.val}if(o(ue)&&ue.length){k.isTypedArray(ue)&&(ue=Array.from(ue)),o(be=le.ticktext)&&be.length?be.length>ue.length?be=be.slice(0,ue.length):ue.length>be.length&&(ue=ue.slice(0,be.length)):be=ue.map(T(le.tickformat));for(var Ie=1;Ie<ue.length;Ie++)if(ue[Ie]<ue[Ie-1]){for(var ke=ue.map(se).sort(ge),Se=0;Se<ue.length;Se++)ue[Se]=ke[Se].val,be[Se]=ke[Se].text;break}}else ue=void 0;return Oe=c.convertTypedArray(Oe),{key:ye,label:le.label,tickFormat:le.tickformat,tickvals:ue,ticktext:be,ordinal:c.isOrdinal(le),multiselect:le.multiselect,xIndex:pe,crossfilterDimensionIndex:pe,visibleIndex:le._index,height:ie,values:Oe,paddedUnitValues:Oe.map(we),unitTickvals:ue&&ue.map(we),xScale:$,x:$(pe),canvasX:$(pe)*ee,unitToPaddedPx:X,domainScale:h(ie,y.verticalPadding,le,ue,be),ordinalScale:S(le),parent:ae,model:V,brush:d.makeBrush(Y,xe,Ce,function(){Y.linePickActive(!1)},function(){var Pe=ae;Pe.focusLayer&&Pe.focusLayer.render(Pe.panels,!0);var Fe=E(Pe);!Y.contextShown()&&Fe?(Pe.contextLayer&&Pe.contextLayer.render(Pe.panels,!0),Y.contextShown(!0)):Y.contextShown()&&!Fe&&(Pe.contextLayer&&Pe.contextLayer.render(Pe.panels,!0,!0),Y.contextShown(!1))},function(Pe){if(ae.focusLayer.render(ae.panels,!0),ae.pickLayer&&ae.pickLayer.render(ae.panels,!0),Y.linePickActive(!0),B&&B.filterChanged){var Fe=we.invert,Be=Pe.map(function(me){return me.map(Fe).sort(k.sorterAsc)}).sort(function(me,Me){return me[0]-Me[0]});B.filterChanged(ae.key,le._index,Be)}})}}),ae}function O(Y){Y.classed(y.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function z(Y,B){var q=Y*Math.PI/180;return{dir:"top"===B?1:-1,dx:Math.sin(q),dy:Math.cos(q),degrees:Y}}function U(Y,B,V){for(var q=B.panels||(B.panels=[]),ie=Y.data(),te=0;te<ie.length-1;te++){var ee=q[te]||(q[te]={}),$=ie[te],J=ie[te+1];ee.dim0=$,ee.dim1=J,ee.canvasX=$.canvasX,ee.panelSizeX=J.canvasX-$.canvasX,ee.panelSizeY=B.model.canvasHeight,ee.y=0,ee.canvasY=0,ee.plotGlPixelRatio=V}}function R(Y,B){return p.tickText(Y._ax,B,!1).text}function j(Y,B){if(Y.ordinal)return"";var V=Y.domainScale.domain();return R(Y.model.dimensions[Y.visibleIndex],V[B?V.length-1:0])}ne.exports=function(Y,B,V,q){var ie=Y._context.staticPlot,te=Y._fullLayout,ee=te._toppaper,$=te._glcontainer,J=Y._context.plotGlPixelRatio,X=Y._fullLayout.paper_bgcolor;!function(Pe){for(var Fe=0;Fe<Pe.length;Fe++)for(var Be=0;Be<Pe[Fe].length;Be++)for(var me=Pe[Fe][Be].trace,Me=me.dimensions,Le=0;Le<Me.length;Le++){var Ne=Me[Le].values,Re=Me[Le]._ax;Re&&(Re.range=Re.range?b(Re.range[0],Re.range[1]):x(Ne,me._length),Re.dtick||(Re.dtick=.01*(Math.abs(Re.range[1]-Re.range[0])||1)),Re.tickformat=Me[Le].tickformat,p.calcTicks(Re),Re.cleanRange())}}(B);var ae,ce,le=(ae=!0,ce=!1,{linePickActive:function(Pe){return arguments.length?ae=!!Pe:ae},contextShown:function(Pe){return arguments.length?ce=!!Pe:ce}}),pe=B.filter(function(Pe){return f(Pe).trace.visible}).map(P.bind(0,V)).map(I.bind(0,le,q));$.each(function(Pe,Fe){return k.extendFlat(Pe,pe[Fe])});var we=$.selectAll(".gl-canvas").each(function(Pe){Pe.viewModel=pe[0],Pe.viewModel.plotGlPixelRatio=J,Pe.viewModel.paperColor=X,Pe.model=Pe.viewModel?Pe.viewModel.model:null}),Te=null;we.filter(function(Pe){return Pe.pick}).style("pointer-events",ie?"none":"auto").on("mousemove",function(Pe){if(le.linePickActive()&&Pe.lineLayer&&q&&q.hover){var Fe=M.event,Be=this.width,me=this.height,Me=M.mouse(this),Le=Me[0],Ne=Me[1];if(Le<0||Ne<0||Le>=Be||Ne>=me)return;var Re=Pe.lineLayer.readPixel(Le,me-1-Ne),He=0!==Re[3],Ze=He?Re[2]+256*(Re[1]+256*Re[0]):null,nt={x:Le,y:Ne,clientX:Fe.clientX,clientY:Fe.clientY,dataIndex:Pe.model.key,curveNumber:Ze};Ze!==Te&&(He?q.hover(nt):q.unhover&&q.unhover(nt),Te=Ze)}}),we.style("opacity",function(Pe){return Pe.pick?0:1}),ee.style("background","rgba(255, 255, 255, 0)");var ye=ee.selectAll("."+y.cn.parcoords).data(pe,s);ye.exit().remove(),ye.enter().append("g").classed(y.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),ye.attr("transform",function(Pe){return t(Pe.model.translateX,Pe.model.translateY)});var ve=ye.selectAll("."+y.cn.parcoordsControlView).data(u,s);ve.enter().append("g").classed(y.cn.parcoordsControlView,!0),ve.attr("transform",function(Pe){return t(Pe.model.pad.l,Pe.model.pad.t)});var xe=ve.selectAll("."+y.cn.yAxis).data(function(Pe){return Pe.dimensions},s);xe.enter().append("g").classed(y.cn.yAxis,!0),ve.each(function(Pe){U(xe,Pe,J)}),we.each(function(Pe){Pe.viewModel&&(!Pe.lineLayer||q?Pe.lineLayer=m(this,Pe):Pe.lineLayer.update(Pe),(Pe.key||0===Pe.key)&&(Pe.viewModel[Pe.key]=Pe.lineLayer),Pe.lineLayer.render(Pe.viewModel.panels,!Pe.context||q))}),xe.attr("transform",function(Pe){return t(Pe.xScale(Pe.xIndex),0)}),xe.call(M.behavior.drag().origin(function(Pe){return Pe}).on("drag",function(Pe){var Fe=Pe.parent;le.linePickActive(!1),Pe.x=Math.max(-y.overdrag,Math.min(Pe.model.width+y.overdrag,M.event.x)),Pe.canvasX=Pe.x*Pe.model.canvasPixelRatio,xe.sort(function(Be,me){return Be.x-me.x}).each(function(Be,me){Be.xIndex=me,Be.x=Pe===Be?Be.x:Be.xScale(Be.xIndex),Be.canvasX=Be.x*Be.model.canvasPixelRatio}),U(xe,Fe,J),xe.filter(function(Be){return 0!==Math.abs(Pe.xIndex-Be.xIndex)}).attr("transform",function(Be){return t(Be.xScale(Be.xIndex),0)}),M.select(this).attr("transform",t(Pe.x,0)),xe.each(function(Be,me,Me){Me===Pe.parent.key&&(Fe.dimensions[me]=Be)}),Fe.contextLayer&&Fe.contextLayer.render(Fe.panels,!1,!E(Fe)),Fe.focusLayer.render&&Fe.focusLayer.render(Fe.panels)}).on("dragend",function(Pe){var Fe=Pe.parent;Pe.x=Pe.xScale(Pe.xIndex),Pe.canvasX=Pe.x*Pe.model.canvasPixelRatio,U(xe,Fe,J),M.select(this).attr("transform",function(Be){return t(Be.x,0)}),Fe.contextLayer&&Fe.contextLayer.render(Fe.panels,!1,!E(Fe)),Fe.focusLayer&&Fe.focusLayer.render(Fe.panels),Fe.pickLayer&&Fe.pickLayer.render(Fe.panels,!0),le.linePickActive(!0),q&&q.axesMoved&&q.axesMoved(Fe.key,Fe.dimensions.map(function(Be){return Be.crossfilterDimensionIndex}))})),xe.exit().remove();var Ce=xe.selectAll("."+y.cn.axisOverlays).data(u,s);Ce.enter().append("g").classed(y.cn.axisOverlays,!0),Ce.selectAll("."+y.cn.axis).remove();var Oe=Ce.selectAll("."+y.cn.axis).data(u,s);Oe.enter().append("g").classed(y.cn.axis,!0),Oe.each(function(Pe){var Fe=Pe.model.height/Pe.model.tickDistance,Be=Pe.domainScale,me=Be.domain();M.select(this).call(M.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Fe,Pe.tickFormat).tickValues(Pe.ordinal?me:null).tickFormat(function(Me){return c.isOrdinal(Pe)?Me:R(Pe.model.dimensions[Pe.visibleIndex],Me)}).scale(Be)),r.font(Oe.selectAll("text"),Pe.model.tickFont)}),Oe.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),Oe.selectAll("text").style("cursor","default");var be=Ce.selectAll("."+y.cn.axisHeading).data(u,s);be.enter().append("g").classed(y.cn.axisHeading,!0);var ue=be.selectAll("."+y.cn.axisTitle).data(u,s);ue.enter().append("text").classed(y.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",ie?"none":"auto"),ue.text(function(Pe){return Pe.label}).each(function(Pe){var Fe=M.select(this);r.font(Fe,Pe.model.labelFont),i.convertToTspans(Fe,Y)}).attr("transform",function(Pe){var Fe=z(Pe.model.labelAngle,Pe.model.labelSide),Be=y.axisTitleOffset;return(Fe.dir>0?"":t(0,2*Be+Pe.model.height))+l(Fe.degrees)+t(-Be*Fe.dx,-Be*Fe.dy)}).attr("text-anchor",function(Pe){var Fe=z(Pe.model.labelAngle,Pe.model.labelSide);return 2*Math.abs(Fe.dx)>Math.abs(Fe.dy)?Fe.dir*Fe.dx<0?"start":"end":"middle"});var se=Ce.selectAll("."+y.cn.axisExtent).data(u,s);se.enter().append("g").classed(y.cn.axisExtent,!0);var ge=se.selectAll("."+y.cn.axisExtentTop).data(u,s);ge.enter().append("g").classed(y.cn.axisExtentTop,!0),ge.attr("transform",t(0,-y.axisExtentOffset));var Ie=ge.selectAll("."+y.cn.axisExtentTopText).data(u,s);Ie.enter().append("text").classed(y.cn.axisExtentTopText,!0).call(O),Ie.text(function(Pe){return j(Pe,!0)}).each(function(Pe){r.font(M.select(this),Pe.model.rangeFont)});var ke=se.selectAll("."+y.cn.axisExtentBottom).data(u,s);ke.enter().append("g").classed(y.cn.axisExtentBottom,!0),ke.attr("transform",function(Pe){return t(0,Pe.model.height+y.axisExtentOffset)});var Se=ke.selectAll("."+y.cn.axisExtentBottomText).data(u,s);Se.enter().append("text").classed(y.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(O),Se.text(function(Pe){return j(Pe,!1)}).each(function(Pe){r.font(M.select(this),Pe.model.rangeFont)}),d.ensureAxisBrush(Ce,X,Y)}},24196:function(ne,F,e){"use strict";var M=e(36336),k=e(5048),o=e(95724).isVisible,T={};function _(p,l,t){var i=l.indexOf(t),r=p.indexOf(i);return-1===r&&(r+=l.length),r}(ne.exports=function(p,l){var t=p._fullLayout;if(k(p,[],T)){var i={},r={},n={},a={},s=t._size;l.forEach(function(u,f){var c=u[0].trace;n[f]=c.index;var y=a[f]=c._fullInput.index;i[f]=p.data[y].dimensions,r[f]=p.data[y].dimensions.slice()}),M(p,l,{width:s.w,height:s.h,margin:{t:s.t,r:s.r,b:s.b,l:s.l}},{filterChanged:function(u,f,c){var y=r[u][f],d=c.map(function(h){return h.slice()}),m="dimensions["+f+"].constraintrange",g=t._tracePreGUI[p._fullData[n[u]]._fullInput.uid];void 0===g[m]&&(g[m]=y.constraintrange||null);var v=p._fullData[n[u]].dimensions[f];d.length?(1===d.length&&(d=d[0]),y.constraintrange=d,v.constraintrange=d.slice(),d=[d]):(delete y.constraintrange,delete v.constraintrange,d=null);var b={};b[m]=d,p.emit("plotly_restyle",[b,[a[u]]])},hover:function(u){p.emit("plotly_hover",u)},unhover:function(u){p.emit("plotly_unhover",u)},axesMoved:function(u,f){var y,d,c=(y=f,d=r[u].filter(o),function(m,g){return _(y,d,m)-_(y,d,g)});i[u].sort(c),r[u].filter(function(y){return!o(y)}).sort(function(y){return r[u].indexOf(y)}).forEach(function(y){i[u].splice(i[u].indexOf(y),1),i[u].splice(r[u].indexOf(y),0,y)}),p.emit("plotly_restyle",[{dimensions:[i[u]]},[a[u]]])}})}}).reglPrecompiled=T},74996:function(ne,F,e){"use strict";var M=e(45464),k=e(86968).u,o=e(25376),T=e(22548),_=e(21776).Ks,p=e(21776).Gw,l=e(92880).extendFlat,t=e(98192).c,i=o({editType:"plot",arrayOk:!0,colorEditType:"plot"});ne.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:T.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:t,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:l({},M.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:_({},{keys:["label","color","value","percent","text"]}),texttemplate:p({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:l({},i,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:l({},i,{}),outsidetextfont:l({},i,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:l({},i,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:k({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:l({},i,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},80036:function(ne,F,e){"use strict";var M=e(7316);F.name="pie",F.plot=function(k,o,T,_){M.plotBasePlot(F.name,k,o,T,_)},F.clean=function(k,o,T,_){M.cleanBasePlot(F.name,k,o,T,_)}},45768:function(ne,F,e){"use strict";var M=e(38248),k=e(49760),o=e(76308),T={};function _(l){return function(t,i){return!!t&&!!(t=k(t)).isValid()&&(t=o.addOpacity(t,t.getAlpha()),l[i]||(l[i]=t),t)}}function p(l,t){var i,r=JSON.stringify(l),n=t[r];if(!n){for(n=l.slice(),i=0;i<l.length;i++)n.push(k(l[i]).lighten(20).toHexString());for(i=0;i<l.length;i++)n.push(k(l[i]).darken(20).toHexString());t[r]=n}return n}ne.exports={calc:function(l,t){var i,r,n=[],a=l._fullLayout,s=a.hiddenlabels||[],u=t.labels,f=t.marker.colors||[],c=t.values,y=t._length,d=t._hasValues&&y;if(t.dlabel)for(u=new Array(y),i=0;i<y;i++)u[i]=String(t.label0+i*t.dlabel);var m={},g=_(a["_"+t.type+"colormap"]),x=0,v=!1;for(i=0;i<y;i++){var b,h,S;if(d){if(!M(b=c[i]))continue;b=+b}else b=1;void 0!==(h=u[i])&&""!==h||(h=i);var w=m[h=String(h)];void 0===w?(m[h]=n.length,(S=-1!==s.indexOf(h))||(x+=b),n.push({v:b,label:h,color:g(f[i],h),i,pts:[i],hidden:S})):(v=!0,(r=n[w]).v+=b,r.pts.push(i),r.hidden||(x+=b),!1===r.color&&f[i]&&(r.color=g(f[i],h)))}return n=n.filter(function(E){return E.v>=0}),("funnelarea"===t.type?v:t.sort)&&n.sort(function(E,P){return P.v-E.v}),n[0]&&(n[0].vTotal=x),n},crossTraceCalc:function(l,t){var i=(t||{}).type;i||(i="pie");var r=l._fullLayout,n=l.calcdata,a=r[i+"colorway"],s=r["_"+i+"colormap"];r["extend"+i+"colors"]&&(a=p(a,T));for(var u=0,f=0;f<n.length;f++){var c=n[f];if(c[0].trace.type===i)for(var y=0;y<c.length;y++){var d=c[y];!1===d.color&&(s[d.label]?d.color=s[d.label]:(s[d.label]=d.color=a[u%a.length],u++))}}},makePullColorFn:_,generateExtendedColors:p}},74174:function(ne,F,e){"use strict";var M=e(38248),k=e(3400),o=e(74996),T=e(86968).Q,_=e(31508).handleText,p=e(3400).coercePattern;function l(i,r){var n=k.isArrayOrTypedArray(i),a=k.isArrayOrTypedArray(r),s=Math.min(n?i.length:1/0,a?r.length:1/0);if(isFinite(s)||(s=0),s&&a){for(var u,f=0;f<s;f++){var c=r[f];if(M(c)&&c>0){u=!0;break}}u||(s=0)}return{hasLabels:n,hasValues:a,len:s}}function t(i,r,n,a,s){a("marker.line.width")&&a("marker.line.color",s?void 0:n.paper_bgcolor);var u=a("marker.colors");p(a,"marker.pattern",u),i.marker&&!r.marker.pattern.fgcolor&&(r.marker.pattern.fgcolor=i.marker.colors),r.marker.pattern.bgcolor||(r.marker.pattern.bgcolor=n.paper_bgcolor)}ne.exports={handleLabelsAndValues:l,handleMarkerDefaults:t,supplyDefaults:function(i,r,n,a){function s(v,b){return k.coerce(i,r,o,v,b)}var u=l(s("labels"),s("values")),f=u.len;if(r._hasLabels=u.hasLabels,r._hasValues=u.hasValues,!r._hasLabels&&r._hasValues&&(s("label0"),s("dlabel")),f){r._length=f,t(i,r,a,s,!0),s("scalegroup");var c,y=s("text"),d=s("texttemplate");if(d||(c=s("textinfo",k.isArrayOrTypedArray(y)?"text+percent":"percent")),s("hovertext"),s("hovertemplate"),d||c&&"none"!==c){var m=s("textposition");_(i,r,a,s,m,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(m)||"auto"===m||"outside"===m)&&s("automargin"),("inside"===m||"auto"===m||Array.isArray(m))&&s("insidetextorientation")}else"none"===c&&s("textposition","none");T(r,a,s);var g=s("hole");if(s("title.text")){var x=s("title.position",g?"middle center":"top center");g||"middle center"!==x||(r.title.position="top center"),k.coerceFont(s,"title.font",a.font)}s("sort"),s("direction"),s("rotation"),s("pull")}else r.visible=!1}}},53644:function(ne,F,e){"use strict";var M=e(10624).appendArrayMultiPointValues;ne.exports=function(k,o){var T={curveNumber:o.index,pointNumbers:k.pts,data:o._input,fullData:o,label:k.label,color:k.color,value:k.v,percent:k.percent,text:k.text,bbox:k.bbox,v:k.v};return 1===k.pts.length&&(T.pointNumber=T.i=k.pts[0]),M(T,o,k.pts),"funnelarea"===o.type&&(delete T.v,delete T.i),T}},21552:function(ne,F,e){"use strict";var M=e(43616),k=e(76308);ne.exports=function(o,T,_,p){var l=_.marker.pattern;l&&l.shape?M.pointStyle(o,_,p,T):k.fill(o,T.color)}},69656:function(ne,F,e){"use strict";var M=e(3400);function k(o){return-1!==o.indexOf("e")?o.replace(/[.]?0+e/,"e"):-1!==o.indexOf(".")?o.replace(/[.]?0+$/,""):o}F.formatPiePercent=function(o,T){var _=k((100*o).toPrecision(3));return M.numSeparate(_,T)+"%"},F.formatPieValue=function(o,T){var _=k(o.toPrecision(10));return M.numSeparate(_,T)},F.getFirstFilled=function(o,T){if(M.isArrayOrTypedArray(o))for(var _=0;_<T.length;_++){var p=o[T[_]];if(p||0===p||""===p)return p}},F.castOption=function(o,T){return M.isArrayOrTypedArray(o)?F.getFirstFilled(o,T):o||void 0},F.getRotationAngle=function(o){return("auto"===o?0:o)*Math.PI/180}},75792:function(ne,F,e){"use strict";ne.exports={attributes:e(74996),supplyDefaults:e(74174).supplyDefaults,supplyLayoutDefaults:e(90248),layoutAttributes:e(85204),calc:e(45768).calc,crossTraceCalc:e(45768).crossTraceCalc,plot:e(37820).plot,style:e(22152),styleOne:e(10528),moduleType:"trace",name:"pie",basePlotModule:e(80036),categories:["pie-like","pie","showLegend"],meta:{}}},85204:function(ne){"use strict";ne.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},90248:function(ne,F,e){"use strict";var M=e(3400),k=e(85204);ne.exports=function(o,T){function _(p,l){return M.coerce(o,T,k,p,l)}_("hiddenlabels"),_("piecolorway",T.colorway),_("extendpiecolors")}},37820:function(ne,F,e){"use strict";var M=e(33428),k=e(7316),o=e(93024),T=e(76308),_=e(43616),p=e(3400),l=p.strScale,t=p.strTranslate,i=e(72736),r=e(82744),n=r.recordMinTextSize,a=r.clearMinTextSize,s=e(78048).TEXTPAD,u=e(69656),f=e(53644),c=e(3400).isValidTextValue;function y(Y,B,V){var q=V[0],ie=q.cx,te=q.cy,ee=q.trace,$="funnelarea"===ee.type;"_hasHoverLabel"in ee||(ee._hasHoverLabel=!1),"_hasHoverEvent"in ee||(ee._hasHoverEvent=!1),Y.on("mouseover",function(J){var X=B._fullLayout,ae=B._fullData[ee.index];if(!B._dragging&&!1!==X.hovermode){var ce=ae.hoverinfo;if(Array.isArray(ce)&&(ce=o.castHoverinfo({hoverinfo:[u.castOption(ce,J.pts)],_module:ee._module},X,0)),"all"===ce&&(ce="label+text+value+percent+name"),ae.hovertemplate||"none"!==ce&&"skip"!==ce&&ce){var le=J.rInscribed||0,pe=ie+J.pxmid[0]*(1-le),we=te+J.pxmid[1]*(1-le),Te=X.separators,ye=[];if(ce&&-1!==ce.indexOf("label")&&ye.push(J.label),J.text=u.castOption(ae.hovertext||ae.text,J.pts),ce&&-1!==ce.indexOf("text")){var ve=J.text;p.isValidTextValue(ve)&&ye.push(ve)}J.value=J.v,J.valueLabel=u.formatPieValue(J.v,Te),ce&&-1!==ce.indexOf("value")&&ye.push(J.valueLabel),J.percent=J.v/q.vTotal,J.percentLabel=u.formatPiePercent(J.percent,Te),ce&&-1!==ce.indexOf("percent")&&ye.push(J.percentLabel);var xe=ae.hoverlabel,Ce=xe.font,Oe=[];o.loneHover({trace:ee,x0:pe-le*q.r,x1:pe+le*q.r,y:we,_x0:$?ie+J.TL[0]:pe-le*q.r,_x1:$?ie+J.TR[0]:pe+le*q.r,_y0:$?te+J.TL[1]:we-le*q.r,_y1:$?te+J.BL[1]:we+le*q.r,text:ye.join("<br>"),name:ae.hovertemplate||-1!==ce.indexOf("name")?ae.name:void 0,idealAlign:J.pxmid[0]<0?"left":"right",color:u.castOption(xe.bgcolor,J.pts)||J.color,borderColor:u.castOption(xe.bordercolor,J.pts),fontFamily:u.castOption(Ce.family,J.pts),fontSize:u.castOption(Ce.size,J.pts),fontColor:u.castOption(Ce.color,J.pts),nameLength:u.castOption(xe.namelength,J.pts),textAlign:u.castOption(xe.align,J.pts),hovertemplate:u.castOption(ae.hovertemplate,J.pts),hovertemplateLabels:J,eventData:[f(J,ae)]},{container:X._hoverlayer.node(),outerContainer:X._paper.node(),gd:B,inOut_bbox:Oe}),J.bbox=Oe[0],ee._hasHoverLabel=!0}ee._hasHoverEvent=!0,B.emit("plotly_hover",{points:[f(J,ae)],event:M.event})}}),Y.on("mouseout",function(J){var X=B._fullLayout,ae=B._fullData[ee.index],ce=M.select(this).datum();ee._hasHoverEvent&&(J.originalEvent=M.event,B.emit("plotly_unhover",{points:[f(ce,ae)],event:M.event}),ee._hasHoverEvent=!1),ee._hasHoverLabel&&(o.loneUnhover(X._hoverlayer.node()),ee._hasHoverLabel=!1)}),Y.on("click",function(J){B._dragging||!1===B._fullLayout.hovermode||(B._hoverdata=[f(J,B._fullData[ee.index])],o.click(B,M.event))})}function d(Y,B,V){var q=u.castOption(Y.insidetextfont.color,B.pts);!q&&Y._input.textfont&&(q=u.castOption(Y._input.textfont.color,B.pts));var ie=u.castOption(Y.insidetextfont.family,B.pts)||u.castOption(Y.textfont.family,B.pts)||V.family,te=u.castOption(Y.insidetextfont.size,B.pts)||u.castOption(Y.textfont.size,B.pts)||V.size,ee=u.castOption(Y.insidetextfont.weight,B.pts)||u.castOption(Y.textfont.weight,B.pts)||V.weight,$=u.castOption(Y.insidetextfont.style,B.pts)||u.castOption(Y.textfont.style,B.pts)||V.style,J=u.castOption(Y.insidetextfont.variant,B.pts)||u.castOption(Y.textfont.variant,B.pts)||V.variant,X=u.castOption(Y.insidetextfont.textcase,B.pts)||u.castOption(Y.textfont.textcase,B.pts)||V.textcase,ae=u.castOption(Y.insidetextfont.lineposition,B.pts)||u.castOption(Y.textfont.lineposition,B.pts)||V.lineposition,ce=u.castOption(Y.insidetextfont.shadow,B.pts)||u.castOption(Y.textfont.shadow,B.pts)||V.shadow;return{color:q||T.contrast(B.color),family:ie,size:te,weight:ee,style:$,variant:J,textcase:X,lineposition:ae,shadow:ce}}function m(Y,B){for(var V,q,ie=0;ie<Y.length;ie++)if((q=(V=Y[ie][0]).trace).title.text){var te=q.title.text;q._meta&&(te=p.templateString(te,q._meta));var ee=_.tester.append("text").attr("data-notex",1).text(te).call(_.font,q.title.font).call(i.convertToTspans,B),$=_.bBox(ee.node(),!0);V.titleBox={width:$.width,height:$.height},ee.remove()}}function g(Y,B,V){var q=V.r||B.rpx1,ie=B.rInscribed;if(B.startangle===B.stopangle)return{rCenter:1-ie,scale:0,rotate:0,textPosAngle:0};var te,ee=B.ring,$=1===ee&&Math.abs(B.startangle-B.stopangle)===2*Math.PI,J=B.halfangle,X=B.midangle,ae=V.trace.insidetextorientation,ce="horizontal"===ae,le="tangential"===ae,pe="radial"===ae,we="auto"===ae,Te=[];if(!we){var ye,ve=function(se,ge){if(me=(Pe=B).stopangle,(Be=Pe.startangle)>(Fe=se)&&Fe>me||Be<Fe&&Fe<me){var Ie=Math.abs(se-B.startangle),ke=Math.abs(se-B.stopangle),Se=Ie<ke?Ie:ke;(te="tan"===ge?v(Y,q,ee,Se,0):x(Y,q,ee,Se,Math.PI/2)).textPosAngle=se,Te.push(te)}var Pe,Fe,Be,me};if(ce||le){for(ye=4;ye>=-4;ye-=2)ve(Math.PI*ye,"tan");for(ye=4;ye>=-4;ye-=2)ve(Math.PI*(ye+1),"tan")}if(ce||pe){for(ye=4;ye>=-4;ye-=2)ve(Math.PI*(ye+1.5),"rad");for(ye=4;ye>=-4;ye-=2)ve(Math.PI*(ye+.5),"rad")}}if($||we||ce){var xe=Math.sqrt(Y.width*Y.width+Y.height*Y.height);if((te={scale:ie*q*2/xe,rCenter:1-ie,rotate:0}).textPosAngle=(B.startangle+B.stopangle)/2,te.scale>=1)return te;Te.push(te)}(we||pe)&&((te=x(Y,q,ee,J,X)).textPosAngle=(B.startangle+B.stopangle)/2,Te.push(te)),(we||le)&&((te=v(Y,q,ee,J,X)).textPosAngle=(B.startangle+B.stopangle)/2,Te.push(te));for(var Ce=0,Oe=0,be=0;be<Te.length;be++){var ue=Te[be].scale;if(Oe<ue&&(Oe=ue,Ce=be),!we&&Oe>=1)break}return Te[Ce]}function x(Y,B,V,q,ie){B=Math.max(0,B-2*s);var te=Y.width/Y.height,ee=S(te,q,B,V);return{scale:2*ee/Y.height,rCenter:b(te,ee/B),rotate:h(ie)}}function v(Y,B,V,q,ie){B=Math.max(0,B-2*s);var te=Y.height/Y.width,ee=S(te,q,B,V);return{scale:2*ee/Y.width,rCenter:b(te,ee/B),rotate:h(ie+Math.PI/2)}}function b(Y,B){return Math.cos(B)-Y*B}function h(Y){return(180/Math.PI*Y+720)%180-90}function S(Y,B,V,q){var ie=Y+1/(2*Math.tan(B));return V*Math.min(1/(Math.sqrt(ie*ie+.5)+ie),q/(Math.sqrt(Y*Y+q/2)+Y))}function w(Y,B){return Y.v!==B.vTotal||B.trace.hole?Math.min(1/(1+1/Math.sin(Y.halfangle)),Y.ring/2):1}function E(Y,B){var V=B.pxmid[0],q=B.pxmid[1],ie=Y.width/2,te=Y.height/2;return V<0&&(ie*=-1),q<0&&(te*=-1),{scale:1,rCenter:1,rotate:0,x:ie+Math.abs(te)*(ie>0?1:-1)/2,y:te/(1+V*V/(q*q)),outside:!0}}function P(Y,B){var V,q,ie,te=Y.trace,ee={x:Y.cx,y:Y.cy},$={tx:0,ty:0};$.ty+=te.title.font.size,ie=O(te),-1!==te.title.position.indexOf("top")?(ee.y-=(1+ie)*Y.r,$.ty-=Y.titleBox.height):-1!==te.title.position.indexOf("bottom")&&(ee.y+=(1+ie)*Y.r);var J,X=Y.r/(void 0===(J=Y.trace.aspectratio)?1:J),ae=B.w*(te.domain.x[1]-te.domain.x[0])/2;return-1!==te.title.position.indexOf("left")?(ae+=X,ee.x-=(1+ie)*X,$.tx+=Y.titleBox.width/2):-1!==te.title.position.indexOf("center")?ae*=2:-1!==te.title.position.indexOf("right")&&(ae+=X,ee.x+=(1+ie)*X,$.tx-=Y.titleBox.width/2),V=ae/Y.titleBox.width,q=I(Y,B)/Y.titleBox.height,{x:ee.x,y:ee.y,scale:Math.min(V,q),tx:$.tx,ty:$.ty}}function I(Y,B){var V=Y.trace;return Math.min(Y.titleBox.height,B.h*(V.domain.y[1]-V.domain.y[0])/2)}function O(Y){var B,V=Y.pull;if(!V)return 0;if(p.isArrayOrTypedArray(V))for(V=0,B=0;B<Y.pull.length;B++)Y.pull[B]>V&&(V=Y.pull[B]);return V}function z(Y,B){for(var V=[],q=0;q<Y.length;q++){var ie=Y[q][0],te=ie.trace,ee=te.domain,$=B.w*(ee.x[1]-ee.x[0]),J=B.h*(ee.y[1]-ee.y[0]);te.title.text&&"middle center"!==te.title.position&&(J-=I(ie,B));var ae=J/2;"funnelarea"!==te.type||te.scalegroup||(ae/=te.aspectratio),ie.r=Math.min($/2,ae)/(1+O(te)),ie.cx=B.l+B.w*(te.domain.x[1]+te.domain.x[0])/2,ie.cy=B.t+B.h*(1-te.domain.y[0])-J/2,te.title.text&&-1!==te.title.position.indexOf("bottom")&&(ie.cy-=I(ie,B)),te.scalegroup&&-1===V.indexOf(te.scalegroup)&&V.push(te.scalegroup)}!function(ce,le){for(var pe,we,Te,ye=0;ye<le.length;ye++){var ve=1/0,xe=le[ye];for(we=0;we<ce.length;we++)if((Te=(pe=ce[we][0]).trace).scalegroup===xe){var Ce;if("pie"===Te.type)Ce=pe.r*pe.r;else if("funnelarea"===Te.type){var Oe,be;Te.aspectratio>1?be=(Oe=pe.r)/Te.aspectratio:Oe=(be=pe.r)*Te.aspectratio,Ce=(Oe*=(1+Te.baseratio)/2)*be}ve=Math.min(ve,Ce/pe.vTotal)}for(we=0;we<ce.length;we++)if((Te=(pe=ce[we][0]).trace).scalegroup===xe){var ue=ve*pe.vTotal;"funnelarea"===Te.type&&(ue/=(1+Te.baseratio)/2,ue/=Te.aspectratio),pe.r=Math.sqrt(ue)}}}(Y,V)}function U(Y,B){return[Y*Math.sin(B),-Y*Math.cos(B)]}function R(Y,B,V){var Ce,q=Y._fullLayout,ie=V.trace,te=ie.texttemplate,ee=ie.textinfo;if(!te&&ee&&"none"!==ee){var $,J=ee.split("+"),X=function(Ce){return-1!==J.indexOf(Ce)},ae=X("label"),ce=X("text"),le=X("value"),pe=X("percent"),we=q.separators;if($=ae?[B.label]:[],ce){var Te=u.getFirstFilled(ie.text,B.pts);c(Te)&&$.push(Te)}le&&$.push(u.formatPieValue(B.v,we)),pe&&$.push(u.formatPiePercent(B.v/V.vTotal,we)),B.text=$.join("<br>")}if(te){var ye=p.castOption(ie,B.i,"texttemplate");if(ye){var ve={label:(Ce=B).label,value:Ce.v,valueLabel:u.formatPieValue(Ce.v,q.separators),percent:Ce.v/V.vTotal,percentLabel:u.formatPiePercent(Ce.v/V.vTotal,q.separators),color:Ce.color,text:Ce.text,customdata:p.castOption(ie,Ce.i,"customdata")},xe=u.getFirstFilled(ie.text,B.pts);(c(xe)||""===xe)&&(ve.text=xe),B.text=p.texttemplateString(ye,ve,Y._fullLayout._d3locale,ve,ie._meta||{})}else B.text=""}}function j(Y,B){var V=Y.rotate*Math.PI/180,q=Math.cos(V),ie=Math.sin(V),te=(B.left+B.right)/2,ee=(B.top+B.bottom)/2;Y.textX=te*q-ee*ie,Y.textY=te*ie+ee*q,Y.noCenter=!0}ne.exports={plot:function(Y,B){var V=Y._context.staticPlot,q=Y._fullLayout,ie=q._size;a("pie",q),m(B,Y),z(B,ie);var te=p.makeTraceGroups(q._pielayer,B,"trace").each(function(ee){var $=M.select(this),J=ee[0],X=J.trace;(function(ae){var ce,le,pe,we=ae[0],Te=we.r,ye=we.trace,ve=u.getRotationAngle(ye.rotation),xe=2*Math.PI/we.vTotal,Ce="px0",Oe="px1";if("counterclockwise"===ye.direction){for(ce=0;ce<ae.length&&ae[ce].hidden;ce++);if(ce===ae.length)return;ve+=xe*ae[ce].v,xe*=-1,Ce="px1",Oe="px0"}for(pe=U(Te,ve),ce=0;ce<ae.length;ce++)(le=ae[ce]).hidden||(le[Ce]=pe,le.startangle=ve,le.pxmid=U(Te,ve+=xe*le.v/2),le.midangle=ve,pe=U(Te,ve+=xe*le.v/2),le.stopangle=ve,le[Oe]=pe,le.largeArc=le.v>we.vTotal/2?1:0,le.halfangle=Math.PI*Math.min(le.v/we.vTotal,.5),le.ring=1-ye.hole,le.rInscribed=w(le,we))})(ee),$.attr("stroke-linejoin","round"),$.each(function(){var ae=M.select(this).selectAll("g.slice").data(ee);ae.enter().append("g").classed("slice",!0),ae.exit().remove();var ce=[[[],[]],[[],[]]],le=!1;ae.each(function(Oe,be){if(Oe.hidden)M.select(this).selectAll("path,g").remove();else{Oe.pointNumber=Oe.i,Oe.curveNumber=X.index,ce[Oe.pxmid[1]<0?0:1][Oe.pxmid[0]<0?0:1].push(Oe);var ue=J.cx,se=J.cy,ge=M.select(this),Ie=ge.selectAll("path.surface").data([Oe]);if(Ie.enter().append("path").classed("surface",!0).style({"pointer-events":V?"none":"all"}),ge.call(y,Y,ee),X.pull){var ke=+u.castOption(X.pull,Oe.pts)||0;ke>0&&(ue+=ke*Oe.pxmid[0],se+=ke*Oe.pxmid[1])}Oe.cxFinal=ue,Oe.cyFinal=se;var Se=X.hole;if(Oe.v===J.vTotal){var Pe="M"+(ue+Oe.px0[0])+","+(se+Oe.px0[1])+Le(Oe.px0,Oe.pxmid,!0,1)+Le(Oe.pxmid,Oe.px0,!0,1)+"Z";Ie.attr("d",Se?"M"+(ue+Se*Oe.px0[0])+","+(se+Se*Oe.px0[1])+Le(Oe.px0,Oe.pxmid,!1,Se)+Le(Oe.pxmid,Oe.px0,!1,Se)+"Z"+Pe:Pe)}else{var Fe=Le(Oe.px0,Oe.px1,!0,1);if(Se){var Be=1-Se;Ie.attr("d","M"+(ue+Se*Oe.px1[0])+","+(se+Se*Oe.px1[1])+Le(Oe.px1,Oe.px0,!1,Se)+"l"+Be*Oe.px0[0]+","+Be*Oe.px0[1]+Fe+"Z")}else Ie.attr("d","M"+ue+","+se+"l"+Oe.px0[0]+","+Oe.px0[1]+Fe+"Z")}R(Y,Oe,J);var me=u.castOption(X.textposition,Oe.pts),Me=ge.selectAll("g.slicetext").data(Oe.text&&"none"!==me?[0]:[]);Me.enter().append("g").classed("slicetext",!0),Me.exit().remove(),Me.each(function(){var At,_t,ot,Ne=p.ensureSingle(M.select(this),"text","",function(At){At.attr("data-notex",1)}),Re=p.ensureUniformFontSize(Y,"outside"===me?(ot=q.font,{color:u.castOption((At=X).outsidetextfont.color,(_t=Oe).pts)||u.castOption(At.textfont.color,_t.pts)||ot.color,family:u.castOption(At.outsidetextfont.family,_t.pts)||u.castOption(At.textfont.family,_t.pts)||ot.family,size:u.castOption(At.outsidetextfont.size,_t.pts)||u.castOption(At.textfont.size,_t.pts)||ot.size,weight:u.castOption(At.outsidetextfont.weight,_t.pts)||u.castOption(At.textfont.weight,_t.pts)||ot.weight,style:u.castOption(At.outsidetextfont.style,_t.pts)||u.castOption(At.textfont.style,_t.pts)||ot.style,variant:u.castOption(At.outsidetextfont.variant,_t.pts)||u.castOption(At.textfont.variant,_t.pts)||ot.variant,textcase:u.castOption(At.outsidetextfont.textcase,_t.pts)||u.castOption(At.textfont.textcase,_t.pts)||ot.textcase,lineposition:u.castOption(At.outsidetextfont.lineposition,_t.pts)||u.castOption(At.textfont.lineposition,_t.pts)||ot.lineposition,shadow:u.castOption(At.outsidetextfont.shadow,_t.pts)||u.castOption(At.textfont.shadow,_t.pts)||ot.shadow}):d(X,Oe,q.font));Ne.text(Oe.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(_.font,Re).call(i.convertToTspans,Y);var He,Ze=_.bBox(Ne.node());if("outside"===me)He=E(Ze,Oe);else if(He=g(Ze,Oe,J),"auto"===me&&He.scale<1){var nt=p.ensureUniformFontSize(Y,X.outsidetextfont);Ne.call(_.font,nt),He=E(Ze=_.bBox(Ne.node()),Oe)}var ft=He.textPosAngle,ht=void 0===ft?Oe.pxmid:U(J.r,ft);if(He.targetX=ue+ht[0]*He.rCenter+(He.x||0),He.targetY=se+ht[1]*He.rCenter+(He.y||0),j(He,Ze),He.outside){var Tt=He.targetY;Oe.yLabelMin=Tt-Ze.height/2,Oe.yLabelMid=Tt,Oe.yLabelMax=Tt+Ze.height/2,Oe.labelExtraX=0,Oe.labelExtraY=0,le=!0}He.fontSize=Re.size,n(X.type,He,q),ee[be].transform=He,p.setTransormAndDisplay(Ne,He)})}function Le(Ne,Re,He,Ze){return"a"+Ze*J.r+","+Ze*J.r+" 0 "+Oe.largeArc+(He?" 1 ":" 0 ")+Ze*(Re[0]-Ne[0])+","+Ze*(Re[1]-Ne[1])}});var be,pe=M.select(this).selectAll("g.titletext").data(X.title.text?[0]:[]);if(pe.enter().append("g").classed("titletext",!0),pe.exit().remove(),pe.each(function(){var Oe,se,ge,be=p.ensureSingle(M.select(this),"text","",function(se){se.attr("data-notex",1)}),ue=X.title.text;X._meta&&(ue=p.templateString(ue,X._meta)),be.text(ue).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(_.font,X.title.font).call(i.convertToTspans,Y),Oe="middle center"===X.title.position?(se=J,ge=Math.sqrt(se.titleBox.width*se.titleBox.width+se.titleBox.height*se.titleBox.height),{x:se.cx,y:se.cy,scale:se.trace.hole*se.r*2/ge,tx:0,ty:-se.titleBox.height/2+se.trace.title.font.size}):P(J,ie),be.attr("transform",t(Oe.x,Oe.y)+l(Math.min(1,Oe.scale))+t(Oe.tx,Oe.ty))}),le&&function(Oe,be){var ue,se,ge,Ie,ke,Se,Pe,Fe,Be,me,Me,Le,Ne;function Re(ft,ht){return ft.pxmid[1]-ht.pxmid[1]}function He(ft,ht){return ht.pxmid[1]-ft.pxmid[1]}function Ze(ft,ht){ht||(ht={});var Tt,At,_t,ot,it=ht.labelExtraY+(se?ht.yLabelMax:ht.yLabelMin),Pt=se?ft.yLabelMin:ft.yLabelMax,jt=se?ft.yLabelMax:ft.yLabelMin,Ut=ft.cyFinal+ke(ft.px0[1],ft.px1[1]),Rt=it-Pt;if(Rt*Pe>0&&(ft.labelExtraY=Rt),p.isArrayOrTypedArray(be.pull))for(At=0;At<me.length;At++)(_t=me[At])===ft||(u.castOption(be.pull,ft.pts)||0)>=(u.castOption(be.pull,_t.pts)||0)||((ft.pxmid[1]-_t.pxmid[1])*Pe>0?(Rt=_t.cyFinal+ke(_t.px0[1],_t.px1[1])-Pt-ft.labelExtraY)*Pe>0&&(ft.labelExtraY+=Rt):(jt+ft.labelExtraY-Ut)*Pe>0&&(Tt=3*Se*Math.abs(At-me.indexOf(ft)),(ot=_t.cxFinal+Ie(_t.px0[0],_t.px1[0])+Tt-(ft.cxFinal+ft.pxmid[0])-ft.labelExtraX)*Se>0&&(ft.labelExtraX+=ot)))}for(se=0;se<2;se++)for(ge=se?Re:He,ke=se?Math.max:Math.min,Pe=se?1:-1,ue=0;ue<2;ue++){for(Ie=ue?Math.max:Math.min,Se=ue?1:-1,(Fe=Oe[se][ue]).sort(ge),me=(Be=Oe[1-se][ue]).concat(Fe),Le=[],Me=0;Me<Fe.length;Me++)void 0!==Fe[Me].yLabelMid&&Le.push(Fe[Me]);for(Ne=!1,Me=0;se&&Me<Be.length;Me++)if(void 0!==Be[Me].yLabelMid){Ne=Be[Me];break}for(Me=0;Me<Le.length;Me++){var nt=Me&&Le[Me-1];Ne&&!Me&&(nt=Ne),Ze(Le[Me],nt)}}}(ce,X),be=X,ae.each(function(ue){var se=M.select(this);if(ue.labelExtraX||ue.labelExtraY){var ge=se.select("g.slicetext text");ue.transform.targetX+=ue.labelExtraX,ue.transform.targetY+=ue.labelExtraY,p.setTransormAndDisplay(ge,ue.transform);var Ie=ue.cxFinal+ue.pxmid[0],ke="M"+Ie+","+(ue.cyFinal+ue.pxmid[1]),Se=(ue.yLabelMax-ue.yLabelMin)*(ue.pxmid[0]<0?-1:1)/4;if(ue.labelExtraX){var Pe=ue.labelExtraX*ue.pxmid[1]/ue.pxmid[0],Fe=ue.yLabelMid+ue.labelExtraY-(ue.cyFinal+ue.pxmid[1]);Math.abs(Pe)>Math.abs(Fe)?ke+="l"+Fe*ue.pxmid[0]/ue.pxmid[1]+","+Fe+"H"+(Ie+ue.labelExtraX+Se):ke+="l"+ue.labelExtraX+","+Pe+"v"+(Fe-Pe)+"h"+Se}else ke+="V"+(ue.yLabelMid+ue.labelExtraY)+"h"+Se;p.ensureSingle(se,"path","textline").call(T.stroke,be.outsidetextfont.color).attr({"stroke-width":Math.min(2,be.outsidetextfont.size/8),d:ke,fill:"none"})}else se.select("path.textline").remove()}),le&&X.automargin){var we=_.bBox($.node()),Te=X.domain,xe=(ie.w*(Te.x[1]-Te.x[0])*.5-J.r)/ie.w,Ce=(ie.h*(Te.y[1]-Te.y[0])*.5-J.r)/ie.h;k.autoMargin(Y,"pie."+X.uid+".automargin",{xl:Te.x[0]-xe,xr:Te.x[1]+xe,yb:Te.y[0]-Ce,yt:Te.y[1]+Ce,l:Math.max(J.cx-J.r-we.left,0),r:Math.max(we.right-(J.cx+J.r),0),b:Math.max(we.bottom-(J.cy+J.r),0),t:Math.max(J.cy-J.r-we.top,0),pad:5})}})});setTimeout(function(){te.selectAll("tspan").each(function(){var ee=M.select(this);ee.attr("dy")&&ee.attr("dy",ee.attr("dy"))})},0)},formatSliceLabel:R,transformInsideText:g,determineInsideTextFont:d,positionTitleOutside:P,prerenderTitles:m,layoutAreas:z,attachFxHandlers:y,computeTransform:j}},22152:function(ne,F,e){"use strict";var M=e(33428),k=e(10528),o=e(82744).resizeText;ne.exports=function(T){var _=T._fullLayout._pielayer.selectAll(".trace");o(T,_,"pie"),_.each(function(p){var l=p[0].trace,t=M.select(this);t.style({opacity:l.opacity}),t.selectAll("path.surface").each(function(i){M.select(this).call(k,i,l,T)})})}},10528:function(ne,F,e){"use strict";var M=e(76308),k=e(69656).castOption,o=e(21552);ne.exports=function(T,_,p,l){var t=p.marker.line,i=k(t.color,_.pts)||M.defaultLine,r=k(t.width,_.pts)||0;T.call(o,_,p,l).style("stroke-width",r).call(M.stroke,i)}},35484:function(ne,F,e){"use strict";var M=e(52904);ne.exports={x:M.x,y:M.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:M.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},11072:function(ne,F,e){"use strict";var M=e(67792).gl_pointcloud2d,k=e(3400).isArrayOrTypedArray,o=e(43080),T=e(19280).findExtremes,_=e(44928);function p(t,i){this.scene=t,this.uid=i,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=M(t.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var l=p.prototype;l.handlePick=function(t){var i=this.idToIndex[t.pointId];return{trace:this,dataCoord:t.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*i],this.pickXYData[2*i+1]]:[this.pickXData[i],this.pickYData[i]],textLabel:k(this.textLabels)?this.textLabels[i]:this.textLabels,color:this.color,name:this.name,pointIndex:i,hoverinfo:this.hoverinfo}},l.update=function(t){this.index=t.index,this.textLabels=t.text,this.name=t.name,this.hoverinfo=t.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(t),this.color=_(t,{})},l.updateFast=function(t){var i,r,n,a,s,u,f=this.xData=this.pickXData=t.x,c=this.yData=this.pickYData=t.y,y=this.pickXYData=t.xy,m=t.indices,g=this.bounds;if(y){if(n=y,i=y.length>>>1,t.xbounds&&t.ybounds)g[0]=t.xbounds[0],g[2]=t.xbounds[1],g[1]=t.ybounds[0],g[3]=t.ybounds[1];else for(u=0;u<i;u++)s=n[2*u+1],(a=n[2*u])<g[0]&&(g[0]=a),a>g[2]&&(g[2]=a),s<g[1]&&(g[1]=s),s>g[3]&&(g[3]=s);if(m)r=m;else for(r=new Int32Array(i),u=0;u<i;u++)r[u]=u}else for(i=f.length,n=new Float32Array(2*i),r=new Int32Array(i),u=0;u<i;u++)a=f[u],s=c[u],r[u]=u,n[2*u]=a,n[2*u+1]=s,a<g[0]&&(g[0]=a),a>g[2]&&(g[2]=a),s<g[1]&&(g[1]=s),s>g[3]&&(g[3]=s);this.idToIndex=r,this.pointcloudOptions.idToIndex=r,this.pointcloudOptions.positions=n;var x=o(t.marker.color),v=o(t.marker.border.color),b=t.opacity*t.marker.opacity;x[3]*=b,this.pointcloudOptions.color=x;var h=t.marker.blend;null===h&&(h=f.length<100||c.length<100),this.pointcloudOptions.blend=h,v[3]*=b,this.pointcloudOptions.borderColor=v;var S=t.marker.sizemin,w=Math.max(t.marker.sizemax,t.marker.sizemin);this.pointcloudOptions.sizeMin=S,this.pointcloudOptions.sizeMax=w,this.pointcloudOptions.areaRatio=t.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var E=this.scene.xaxis,P=this.scene.yaxis,I=w/2||.5;t._extremes[E._id]=T(E,[g[0],g[2]],{ppad:I}),t._extremes[P._id]=T(P,[g[1],g[3]],{ppad:I})},l.dispose=function(){this.pointcloud.dispose()},ne.exports=function(t,i){var r=new p(t,i.uid);return r.update(i),r}},41904:function(ne,F,e){"use strict";var M=e(3400),k=e(35484);ne.exports=function(o,T,_){function p(l,t){return M.coerce(o,T,k,l,t)}p("x"),p("y"),p("xbounds"),p("ybounds"),o.xy&&o.xy instanceof Float32Array&&(T.xy=o.xy),o.indices&&o.indices instanceof Int32Array&&(T.indices=o.indices),p("text"),p("marker.color",_),p("marker.opacity"),p("marker.blend"),p("marker.sizemin"),p("marker.sizemax"),p("marker.border.color",_),p("marker.border.arearatio"),T._length=null}},156:function(ne,F,e){"use strict";["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" "),ne.exports={attributes:e(35484),supplyDefaults:e(41904),calc:e(41484),plot:e(11072),moduleType:"trace",name:"pointcloud",basePlotModule:e(39952),categories:["gl","gl2d","showLegend"],meta:{}}},41440:function(ne,F,e){"use strict";var M=e(25376),k=e(45464),o=e(22548),T=e(55756),_=e(86968).u,p=e(21776).Ks,l=e(49084),t=e(31780).templatedArray,i=e(29736).descriptionOnlyNumbers,r=e(92880).extendFlat,n=e(67824).overrideAll;(ne.exports=n({hoverinfo:r({},k.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:T.hoverlabel,domain:_({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:i("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:M({autoShadowDflt:!0}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:o.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:p({},{keys:["value","label"]}),align:{valType:"enumerated",values:["justify","left","right","center"],dflt:"justify"}},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},hovercolor:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:o.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:p({},{keys:["value","label"]}),colorscales:t("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:r(l().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},10760:function(ne,F,e){"use strict";var M=e(67824).overrideAll,k=e(84888)._M,o=e(59596),T=e(65460),_=e(93972),p=e(86476),l=e(22676).prepSelect,t=e(3400),i=e(24040),r="sankey";function n(a,s){var u=a._fullData[s],f=a._fullLayout,c=f.dragmode,d=u._bgRect;if(d&&"pan"!==c&&"zoom"!==c){_(d,"pan"===f.dragmode?"move":"crosshair");var m={_id:"x",c2p:t.identity,_offset:u._sankey.translateX,_length:u._sankey.width},g={_id:"y",c2p:t.identity,_offset:u._sankey.translateY,_length:u._sankey.height},x={gd:a,element:d.node(),plotinfo:{id:s,xaxis:m,yaxis:g,fillRangeItems:t.noop},subplot:s,xaxes:[m],yaxes:[g],doneFnCompleted:function(v){var b,h=a._fullData[s],S=h.node.groups.slice(),w=[];function E(z){for(var U=h._sankey.graph.nodes,R=0;R<U.length;R++)if(U[R].pointNumber===z)return U[R]}for(var P=0;P<v.length;P++){var I=E(v[P].pointNumber);if(I)if(I.group){for(var O=0;O<I.childrenNodes.length;O++)w.push(I.childrenNodes[O].pointNumber);S[I.pointNumber-h.node._count]=!1}else w.push(I.pointNumber)}b=S.filter(Boolean).concat([w]),i.call("_guiRestyle",a,{"node.groups":[b]},s)},prepFn:function(v,b,h){l(v,b,h,x,c)}};p.init(x)}}F.name=r,F.baseLayoutAttrOverrides=M({hoverlabel:T.hoverlabel},"plot","nested"),F.plot=function(a){var s=k(a.calcdata,r)[0];o(a,s),F.updateFx(a)},F.clean=function(a,s,u,f){var c=f._has&&f._has(r),y=s._has&&s._has(r);c&&!y&&(f._paperdiv.selectAll(".sankey").remove(),f._paperdiv.selectAll(".bgsankey").remove())},F.updateFx=function(a){for(var s=0;s<a._fullData.length;s++)n(a,s)}},48068:function(ne,F,e){"use strict";var M=e(78484),k=e(3400),o=e(71688).wrap,T=k.isArrayOrTypedArray,_=k.isIndex,p=e(8932);ne.exports=function(l,t){var i=function(r){var n,a=r.node,s=r.link,u=[],f=T(s.color),c=T(s.hovercolor),y=T(s.customdata),d={},m={},g=s.colorscales.length;for(n=0;n<g;n++){var x=s.colorscales[n],v=p.extractScale(x,{cLetter:"c"}),b=p.makeColorScaleFunc(v);m[x.label]=b}var h=0;for(n=0;n<s.value.length;n++)s.source[n]>h&&(h=s.source[n]),s.target[n]>h&&(h=s.target[n]);var S,w=h+1;r.node._count=w;var E=r.node.groups,P={};for(n=0;n<E.length;n++){var I=E[n];for(S=0;S<I.length;S++){var O=I[S],z=w+n;P.hasOwnProperty(O)?k.warn("Node "+O+" is already part of a group."):P[O]=z}}var U={source:[],target:[]};for(n=0;n<s.value.length;n++){var R=s.value[n],j=s.source[n],Y=s.target[n];if(R>0&&_(j,w)&&_(Y,w)&&(!P.hasOwnProperty(j)||!P.hasOwnProperty(Y)||P[j]!==P[Y])){P.hasOwnProperty(Y)&&(Y=P[Y]),P.hasOwnProperty(j)&&(j=P[j]),d[j=+j]=d[Y=+Y]=!0;var B="";s.label&&s.label[n]&&(B=s.label[n]);var V=null;B&&m.hasOwnProperty(B)&&(V=m[B]),u.push({pointNumber:n,label:B,color:f?s.color[n]:s.color,hovercolor:c?s.hovercolor[n]:s.hovercolor,customdata:y?s.customdata[n]:s.customdata,concentrationscale:V,source:j,target:Y,value:+R}),U.source.push(j),U.target.push(Y)}}var q=w+E.length,ie=T(a.color),te=T(a.customdata),ee=[];for(n=0;n<q;n++)d[n]&&ee.push({group:n>w-1,childrenNodes:[],pointNumber:n,label:a.label[n],color:ie?a.color[n]:a.color,customdata:te?a.customdata[n]:a.customdata});var J=!1;return function(X,ae,ce){for(var le=k.init2dArray(X,0),pe=0;pe<Math.min(ae.length,ce.length);pe++)if(k.isIndex(ae[pe],X)&&k.isIndex(ce[pe],X)){if(ae[pe]===ce[pe])return!0;le[ae[pe]].push(ce[pe])}return M(le).components.some(function(we){return we.length>1})}(q,U.source,U.target)&&(J=!0),{circular:J,links:u,nodes:ee,groups:E,groupLookup:P}}(t);return o({circular:i.circular,_nodes:i.nodes,_links:i.links,_groups:i.groups,_groupLookup:i.groupLookup})}},11820:function(ne){"use strict";ne.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},47140:function(ne,F,e){"use strict";var M=e(3400),k=e(41440),o=e(76308),T=e(49760),_=e(86968).Q,p=e(16132),l=e(31780),t=e(51272);function i(r,n){function a(s,u){return M.coerce(r,n,k.link.colorscales,s,u)}a("label"),a("cmin"),a("cmax"),a("colorscale")}ne.exports=function(r,n,a,s){function u(E,P){return M.coerce(r,n,k,E,P)}var f=M.extendDeep(s.hoverlabel,r.hoverlabel),c=r.node,y=l.newContainer(n,"node");function d(E,P){return M.coerce(c,y,k.node,E,P)}d("label"),d("groups"),d("x"),d("y"),d("pad"),d("thickness"),d("line.color"),d("line.width"),d("hoverinfo",r.hoverinfo),p(c,y,d,f),d("hovertemplate"),d("align");var m=s.colorway;d("color",y.label.map(function(E,P){return o.addOpacity(m[P%m.length],.8)})),d("customdata");var g=r.link||{},x=l.newContainer(n,"link");function v(E,P){return M.coerce(g,x,k.link,E,P)}v("label"),v("arrowlen"),v("source"),v("target"),v("value"),v("line.color"),v("line.width"),v("hoverinfo",r.hoverinfo),p(g,x,v,f),v("hovertemplate");var b,h=T(s.paper_bgcolor).getLuminance()<.333,S=v("color",h?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)");function w(E){var P=T(E);if(!P.isValid())return E;var I=P.getAlpha();return I<=.8?P.setAlpha(I+.2):P=h?P.brighten():P.darken(),P.toRgbString()}v("hovercolor",Array.isArray(S)?S.map(w):w(S)),v("customdata"),t(g,x,{name:"colorscales",handleItemDefaults:i}),_(n,s,u),u("orientation"),u("valueformat"),u("valuesuffix"),y.x.length&&y.y.length&&(b="freeform"),u("arrangement",b),M.coerceFont(u,"textfont",s.font,{autoShadowDflt:!0}),n._length=null}},45499:function(ne,F,e){"use strict";ne.exports={attributes:e(41440),supplyDefaults:e(47140),calc:e(48068),plot:e(59596),moduleType:"trace",name:"sankey",basePlotModule:e(10760),selectPoints:e(81128),categories:["noOpacity"],meta:{}}},59596:function(ne,F,e){"use strict";var M=e(33428),k=e(3400),o=k.numberFormat,T=e(83248),_=e(93024),p=e(76308),l=e(11820).cn,t=k._;function i(g){return""!==g}function r(g,x){return g.filter(function(v){return v.key===x.traceId})}function n(g,x){M.select(g).select("path").style("fill-opacity",x),M.select(g).select("rect").style("fill-opacity",x)}function a(g){M.select(g).select("text.name").style("fill","black")}function s(g){return function(x){return-1!==g.node.sourceLinks.indexOf(x.link)||-1!==g.node.targetLinks.indexOf(x.link)}}function u(g){return function(x){return-1!==x.node.sourceLinks.indexOf(g.link)||-1!==x.node.targetLinks.indexOf(g.link)}}function f(g,x,v){x&&v&&r(v,x).selectAll("."+l.sankeyLink).filter(s(x)).call(y.bind(0,x,v,!1))}function c(g,x,v){x&&v&&r(v,x).selectAll("."+l.sankeyLink).filter(s(x)).call(d.bind(0,x,v,!1))}function y(g,x,v,b){b.style("fill",function(h){if(!h.link.concentrationscale)return h.tinyColorHoverHue}).style("fill-opacity",function(h){if(!h.link.concentrationscale)return h.tinyColorHoverAlpha}),b.each(function(h){var S=h.link.label;""!==S&&r(x,g).selectAll("."+l.sankeyLink).filter(function(w){return w.link.label===S}).style("fill",function(w){if(!w.link.concentrationscale)return w.tinyColorHoverHue}).style("fill-opacity",function(w){if(!w.link.concentrationscale)return w.tinyColorHoverAlpha})}),v&&r(x,g).selectAll("."+l.sankeyNode).filter(u(g)).call(f)}function d(g,x,v,b){b.style("fill",function(h){return h.tinyColorHue}).style("fill-opacity",function(h){return h.tinyColorAlpha}),b.each(function(h){var S=h.link.label;""!==S&&r(x,g).selectAll("."+l.sankeyLink).filter(function(w){return w.link.label===S}).style("fill",function(w){return w.tinyColorHue}).style("fill-opacity",function(w){return w.tinyColorAlpha})}),v&&r(x,g).selectAll(l.sankeyNode).filter(u(g)).call(c)}function m(g,x){var b=k.nestedProperty(g.hoverlabel||{},x).get();return!Array.isArray(b)&&b}ne.exports=function(g,x){for(var v=g._fullLayout,b=v._paper,h=v._size,S=0;S<g._fullData.length;S++)if(g._fullData[S].visible&&g._fullData[S].type===l.sankey&&!g._fullData[S]._viewInitial){var w=g._fullData[S].node;g._fullData[S]._viewInitial={node:{groups:w.groups.slice(),x:w.x.slice(),y:w.y.slice()}}}var E=t(g,"source:")+" ",P=t(g,"target:")+" ",I=t(g,"concentration:")+" ",O=t(g,"incoming flow count:")+" ",z=t(g,"outgoing flow count:")+" ";T(g,b,x,{width:h.w,height:h.h,margin:{t:h.t,r:h.r,b:h.b,l:h.l}},{linkEvents:{hover:function(U,R,j){!1!==g._fullLayout.hovermode&&(M.select(U).call(y.bind(0,R,j,!0)),"skip"!==R.link.trace.link.hoverinfo&&(R.link.fullData=R.link.trace,g.emit("plotly_hover",{event:M.event,points:[R.link]})))},follow:function(U,R){if(!1!==g._fullLayout.hovermode){var j=R.link.trace.link;if("none"!==j.hoverinfo&&"skip"!==j.hoverinfo){for(var Y=[],B=0,V=0;V<R.flow.links.length;V++){var q=R.flow.links[V];if("closest"!==g._fullLayout.hovermode||R.link.pointNumber===q.pointNumber){R.link.pointNumber===q.pointNumber&&(B=V),q.fullData=q.trace,j=R.link.trace.link;var ie=ee(q),te={valueLabel:o(R.valueFormat)(q.value)+R.valueSuffix};Y.push({x:ie[0],y:ie[1],name:te.valueLabel,text:[q.label||"",E+q.source.label,P+q.target.label,q.concentrationscale?I+o("%0.2f")(q.flow.labelConcentration):""].filter(i).join("<br>"),color:m(j,"bgcolor")||p.addOpacity(q.color,1),borderColor:m(j,"bordercolor"),fontFamily:m(j,"font.family"),fontSize:m(j,"font.size"),fontColor:m(j,"font.color"),fontWeight:m(j,"font.weight"),fontStyle:m(j,"font.style"),fontVariant:m(j,"font.variant"),fontTextcase:m(j,"font.textcase"),fontLineposition:m(j,"font.lineposition"),fontShadow:m(j,"font.shadow"),nameLength:m(j,"namelength"),textAlign:m(j,"align"),idealAlign:M.event.x<ie[0]?"right":"left",hovertemplate:j.hovertemplate,hovertemplateLabels:te,eventData:[q]})}}_.loneHover(Y,{container:v._hoverlayer.node(),outerContainer:v._paper.node(),gd:g,anchorIndex:B}).each(function(){R.link.concentrationscale||n(this,.65),a(this)})}}function ee($){var J,X;$.circular?(J=($.circularPathData.leftInnerExtent+$.circularPathData.rightInnerExtent)/2,X=$.circularPathData.verticalFullExtent):(J=($.source.x1+$.target.x0)/2,X=($.y0+$.y1)/2);var ae=[J,X];return"v"===$.trace.orientation&&ae.reverse(),ae[0]+=R.parent.translateX,ae[1]+=R.parent.translateY,ae}},unhover:function(U,R,j){!1!==g._fullLayout.hovermode&&(M.select(U).call(d.bind(0,R,j,!0)),"skip"!==R.link.trace.link.hoverinfo&&(R.link.fullData=R.link.trace,g.emit("plotly_unhover",{event:M.event,points:[R.link]})),_.loneUnhover(v._hoverlayer.node()))},select:function(U,R){var j=R.link;j.originalEvent=M.event,g._hoverdata=[j],_.click(g,{target:!0})}},nodeEvents:{hover:function(U,R,j){!1!==g._fullLayout.hovermode&&(M.select(U).call(f,R,j),"skip"!==R.node.trace.node.hoverinfo&&(R.node.fullData=R.node.trace,g.emit("plotly_hover",{event:M.event,points:[R.node]})))},follow:function(U,R){if(!1!==g._fullLayout.hovermode){var j=R.node.trace.node;if("none"!==j.hoverinfo&&"skip"!==j.hoverinfo){var Y=M.select(U).select("."+l.nodeRect),B=g._fullLayout._paperdiv.node().getBoundingClientRect(),V=Y.node().getBoundingClientRect(),q=V.left-2-B.left,ie=V.right+2-B.left,te=V.top+V.height/4-B.top,ee={valueLabel:o(R.valueFormat)(R.node.value)+R.valueSuffix};R.node.fullData=R.node.trace,g._fullLayout._calcInverseTransform(g);var $=g._fullLayout._invScaleX,X=_.loneHover({x0:$*q,x1:$*ie,y:g._fullLayout._invScaleY*te,name:o(R.valueFormat)(R.node.value)+R.valueSuffix,text:[R.node.label,O+R.node.targetLinks.length,z+R.node.sourceLinks.length].filter(i).join("<br>"),color:m(j,"bgcolor")||R.tinyColorHue,borderColor:m(j,"bordercolor"),fontFamily:m(j,"font.family"),fontSize:m(j,"font.size"),fontColor:m(j,"font.color"),fontWeight:m(j,"font.weight"),fontStyle:m(j,"font.style"),fontVariant:m(j,"font.variant"),fontTextcase:m(j,"font.textcase"),fontLineposition:m(j,"font.lineposition"),fontShadow:m(j,"font.shadow"),nameLength:m(j,"namelength"),textAlign:m(j,"align"),idealAlign:"left",hovertemplate:j.hovertemplate,hovertemplateLabels:ee,eventData:[R.node]},{container:v._hoverlayer.node(),outerContainer:v._paper.node(),gd:g});n(X,.85),a(X)}}},unhover:function(U,R,j){!1!==g._fullLayout.hovermode&&(M.select(U).call(c,R,j),"skip"!==R.node.trace.node.hoverinfo&&(R.node.fullData=R.node.trace,g.emit("plotly_unhover",{event:M.event,points:[R.node]})),_.loneUnhover(v._hoverlayer.node()))},select:function(U,R,j){var Y=R.node;Y.originalEvent=M.event,g._hoverdata=[Y],M.select(U).call(c,R,j),_.click(g,{target:!0})}}})}},83248:function(ne,F,e){"use strict";var M=e(49812),k=e(67756).Gz,o=e(33428),T=e(26800),_=e(48932),p=e(11820),l=e(49760),t=e(76308),i=e(43616),r=e(3400),n=r.strTranslate,a=r.strRotate,s=e(71688),u=s.keyFun,f=s.repeat,c=s.unwrap,y=e(72736),d=e(24040),m=e(84284),g=m.CAP_SHIFT,x=m.LINE_SPACING;function v(V,q,ie){var te,ee=c(q),$=ee.trace,J=$.domain,X="h"===$.orientation,ae=$.node.pad,ce=$.node.thickness,le={justify:T.sankeyJustify,left:T.sankeyLeft,right:T.sankeyRight,center:T.sankeyCenter}[$.node.align],pe=V.width*(J.x[1]-J.x[0]),we=V.height*(J.y[1]-J.y[0]),Te=ee._nodes,ye=ee._links,ve=ee.circular;(te=ve?_.sankeyCircular().circularLinkGap(0):T.sankey()).iterations(p.sankeyIterations).size(X?[pe,we]:[we,pe]).nodeWidth(ce).nodePadding(ae).nodeId(function(Pe){return Pe.pointNumber}).nodeAlign(le).nodes(Te).links(ye);var xe,Ce,Oe,be=te();for(var ue in te.nodePadding()<ae&&r.warn("node.pad was reduced to ",te.nodePadding()," to fit within the figure."),ee._groupLookup){var se,ge=parseInt(ee._groupLookup[ue]);for(xe=0;xe<be.nodes.length;xe++)if(be.nodes[xe].pointNumber===ge){se=be.nodes[xe];break}if(se){var Ie={pointNumber:parseInt(ue),x0:se.x0,x1:se.x1,y0:se.y0,y1:se.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};be.nodes.unshift(Ie),se.childrenNodes.unshift(Ie)}}if(function(){for(xe=0;xe<be.nodes.length;xe++){var Pe,Fe,Be=be.nodes[xe],me={};for(Ce=0;Ce<Be.targetLinks.length;Ce++)Pe=(Fe=Be.targetLinks[Ce]).source.pointNumber+":"+Fe.target.pointNumber,me.hasOwnProperty(Pe)||(me[Pe]=[]),me[Pe].push(Fe);var Me=Object.keys(me);for(Ce=0;Ce<Me.length;Ce++){var Le=me[Pe=Me[Ce]],Ne=0,Re={};for(Oe=0;Oe<Le.length;Oe++)Re[(Fe=Le[Oe]).label]||(Re[Fe.label]=0),Re[Fe.label]+=Fe.value,Ne+=Fe.value;for(Oe=0;Oe<Le.length;Oe++)(Fe=Le[Oe]).flow={value:Ne,labelConcentration:Re[Fe.label]/Ne,concentration:Fe.value/Ne,links:Le},Fe.concentrationscale&&(Fe.color=l(Fe.concentrationscale(Fe.flow.labelConcentration)))}var He=0;for(Ce=0;Ce<Be.sourceLinks.length;Ce++)He+=Be.sourceLinks[Ce].value;for(Ce=0;Ce<Be.sourceLinks.length;Ce++)(Fe=Be.sourceLinks[Ce]).concentrationOut=Fe.value/He;var Ze=0;for(Ce=0;Ce<Be.targetLinks.length;Ce++)Ze+=Be.targetLinks[Ce].value;for(Ce=0;Ce<Be.targetLinks.length;Ce++)(Fe=Be.targetLinks[Ce]).concenrationIn=Fe.value/Ze}}(),$.node.x.length&&$.node.y.length){for(xe=0;xe<Math.min($.node.x.length,$.node.y.length,be.nodes.length);xe++)if($.node.x[xe]&&$.node.y[xe]){var ke=[$.node.x[xe]*pe,$.node.y[xe]*we];be.nodes[xe].x0=ke[0]-ce/2,be.nodes[xe].x1=ke[0]+ce/2;var Se=be.nodes[xe].y1-be.nodes[xe].y0;be.nodes[xe].y0=ke[1]-Se/2,be.nodes[xe].y1=ke[1]+Se/2}"snap"===$.arrangement&&function(Pe){var Fe,Be,me=Pe.map(function(He,Ze){return{x0:He.x0,index:Ze}}).sort(function(He,Ze){return He.x0-Ze.x0}),Me=[],Le=-1,Ne=-1/0;for(xe=0;xe<me.length;xe++){var Re=Pe[me[xe].index];Re.x0>Ne+ce&&(Le+=1,Fe=Re.x0),Ne=Re.x0,Me[Le]||(Me[Le]=[]),Me[Le].push(Re),Re.x0+=Be=Fe-Re.x0,Re.x1+=Be}return Me}(Te=be.nodes).forEach(function(Pe){var Fe,Be,me,Me=0,Le=Pe.length;for(Pe.sort(function(Ne,Re){return Ne.y0-Re.y0}),me=0;me<Le;++me)(Fe=Pe[me]).y0>=Me||(Be=Me-Fe.y0)>1e-6&&(Fe.y0+=Be,Fe.y1+=Be),Me=Fe.y1+ae}),te.update(be)}return{circular:ve,key:ie,trace:$,guid:r.randstr(),horizontal:X,width:pe,height:we,nodePad:$.node.pad,nodeLineColor:$.node.line.color,nodeLineWidth:$.node.line.width,linkLineColor:$.link.line.color,linkLineWidth:$.link.line.width,linkArrowLength:$.link.arrowlen,valueFormat:$.valueformat,valueSuffix:$.valuesuffix,textFont:$.textfont,translateX:J.x[0]*V.width+V.margin.l,translateY:V.height-J.y[1]*V.height+V.margin.t,dragParallel:X?we:pe,dragPerpendicular:X?pe:we,arrangement:$.arrangement,sankey:te,graph:be,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function b(V,q,ie){var te=l(q.color),ee=l(q.hovercolor),$=q.source.label+"|"+q.target.label+"__"+ie;return q.trace=V.trace,q.curveNumber=V.trace.index,{circular:V.circular,key:$,traceId:V.key,pointNumber:q.pointNumber,link:q,tinyColorHue:t.tinyRGB(te),tinyColorAlpha:te.getAlpha(),tinyColorHoverHue:t.tinyRGB(ee),tinyColorHoverAlpha:ee.getAlpha(),linkPath:h,linkLineColor:V.linkLineColor,linkLineWidth:V.linkLineWidth,linkArrowLength:V.linkArrowLength,valueFormat:V.valueFormat,valueSuffix:V.valueSuffix,sankey:V.sankey,parent:V,interactionState:V.interactionState,flow:q.flow}}function h(){return function(V){var xe,Ce,Oe,be,q=V.linkArrowLength;if(V.link.circular)return Ce=q,Oe=(xe=V.link).width/2,be=xe.circularPathData,"top"===xe.circularLinkType?"M "+(be.targetX-Ce)+" "+(be.targetY+Oe)+" L"+(be.rightInnerExtent-Ce)+" "+(be.targetY+Oe)+"A"+(be.rightLargeArcRadius+Oe)+" "+(be.rightSmallArcRadius+Oe)+" 0 0 1 "+(be.rightFullExtent-Oe-Ce)+" "+(be.targetY-be.rightSmallArcRadius)+"L"+(be.rightFullExtent-Oe-Ce)+" "+be.verticalRightInnerExtent+"A"+(be.rightLargeArcRadius+Oe)+" "+(be.rightLargeArcRadius+Oe)+" 0 0 1 "+(be.rightInnerExtent-Ce)+" "+(be.verticalFullExtent-Oe)+"L"+be.leftInnerExtent+" "+(be.verticalFullExtent-Oe)+"A"+(be.leftLargeArcRadius+Oe)+" "+(be.leftLargeArcRadius+Oe)+" 0 0 1 "+(be.leftFullExtent+Oe)+" "+be.verticalLeftInnerExtent+"L"+(be.leftFullExtent+Oe)+" "+(be.sourceY-be.leftSmallArcRadius)+"A"+(be.leftLargeArcRadius+Oe)+" "+(be.leftSmallArcRadius+Oe)+" 0 0 1 "+be.leftInnerExtent+" "+(be.sourceY+Oe)+"L"+be.sourceX+" "+(be.sourceY+Oe)+"L"+be.sourceX+" "+(be.sourceY-Oe)+"L"+be.leftInnerExtent+" "+(be.sourceY-Oe)+"A"+(be.leftLargeArcRadius-Oe)+" "+(be.leftSmallArcRadius-Oe)+" 0 0 0 "+(be.leftFullExtent-Oe)+" "+(be.sourceY-be.leftSmallArcRadius)+"L"+(be.leftFullExtent-Oe)+" "+be.verticalLeftInnerExtent+"A"+(be.leftLargeArcRadius-Oe)+" "+(be.leftLargeArcRadius-Oe)+" 0 0 0 "+be.leftInnerExtent+" "+(be.verticalFullExtent+Oe)+"L"+(be.rightInnerExtent-Ce)+" "+(be.verticalFullExtent+Oe)+"A"+(be.rightLargeArcRadius-Oe)+" "+(be.rightLargeArcRadius-Oe)+" 0 0 0 "+(be.rightFullExtent+Oe-Ce)+" "+be.verticalRightInnerExtent+"L"+(be.rightFullExtent+Oe-Ce)+" "+(be.targetY-be.rightSmallArcRadius)+"A"+(be.rightLargeArcRadius-Oe)+" "+(be.rightSmallArcRadius-Oe)+" 0 0 0 "+(be.rightInnerExtent-Ce)+" "+(be.targetY-Oe)+"L"+(be.targetX-Ce)+" "+(be.targetY-Oe)+(Ce>0?"L"+be.targetX+" "+be.targetY:"")+"Z":"M "+(be.targetX-Ce)+" "+(be.targetY-Oe)+" L"+(be.rightInnerExtent-Ce)+" "+(be.targetY-Oe)+"A"+(be.rightLargeArcRadius+Oe)+" "+(be.rightSmallArcRadius+Oe)+" 0 0 0 "+(be.rightFullExtent-Oe-Ce)+" "+(be.targetY+be.rightSmallArcRadius)+"L"+(be.rightFullExtent-Oe-Ce)+" "+be.verticalRightInnerExtent+"A"+(be.rightLargeArcRadius+Oe)+" "+(be.rightLargeArcRadius+Oe)+" 0 0 0 "+(be.rightInnerExtent-Ce)+" "+(be.verticalFullExtent+Oe)+"L"+be.leftInnerExtent+" "+(be.verticalFullExtent+Oe)+"A"+(be.leftLargeArcRadius+Oe)+" "+(be.leftLargeArcRadius+Oe)+" 0 0 0 "+(be.leftFullExtent+Oe)+" "+be.verticalLeftInnerExtent+"L"+(be.leftFullExtent+Oe)+" "+(be.sourceY+be.leftSmallArcRadius)+"A"+(be.leftLargeArcRadius+Oe)+" "+(be.leftSmallArcRadius+Oe)+" 0 0 0 "+be.leftInnerExtent+" "+(be.sourceY-Oe)+"L"+be.sourceX+" "+(be.sourceY-Oe)+"L"+be.sourceX+" "+(be.sourceY+Oe)+"L"+be.leftInnerExtent+" "+(be.sourceY+Oe)+"A"+(be.leftLargeArcRadius-Oe)+" "+(be.leftSmallArcRadius-Oe)+" 0 0 1 "+(be.leftFullExtent-Oe)+" "+(be.sourceY+be.leftSmallArcRadius)+"L"+(be.leftFullExtent-Oe)+" "+be.verticalLeftInnerExtent+"A"+(be.leftLargeArcRadius-Oe)+" "+(be.leftLargeArcRadius-Oe)+" 0 0 1 "+be.leftInnerExtent+" "+(be.verticalFullExtent-Oe)+"L"+(be.rightInnerExtent-Ce)+" "+(be.verticalFullExtent-Oe)+"A"+(be.rightLargeArcRadius-Oe)+" "+(be.rightLargeArcRadius-Oe)+" 0 0 1 "+(be.rightFullExtent+Oe-Ce)+" "+be.verticalRightInnerExtent+"L"+(be.rightFullExtent+Oe-Ce)+" "+(be.targetY+be.rightSmallArcRadius)+"A"+(be.rightLargeArcRadius-Oe)+" "+(be.rightSmallArcRadius-Oe)+" 0 0 1 "+(be.rightInnerExtent-Ce)+" "+(be.targetY+Oe)+"L"+(be.targetX-Ce)+" "+(be.targetY+Oe)+(Ce>0?"L"+be.targetX+" "+be.targetY:"")+"Z";var ie=Math.abs((V.link.target.x0-V.link.source.x1)/2);q>ie&&(q=ie);var te=V.link.source.x1,ee=V.link.target.x0-q,$=k(te,ee),J=$(.5),X=$(.5),ae=V.link.y0-V.link.width/2,ce=V.link.y0+V.link.width/2,le=V.link.y1-V.link.width/2,pe=V.link.y1+V.link.width/2,ve=q>0?"L"+(ee+q)+","+(le+V.link.width/2):"";return"M"+te+","+ae+"C"+J+","+ae+" "+X+","+le+" "+ee+","+le+(ve+="L"+ee+","+pe)+"C"+X+","+pe+" "+J+","+ce+" "+te+","+ce+"Z"}}function S(V,q){var ie=l(q.color),te=p.nodePadAcross,ee=V.nodePad/2;q.dx=q.x1-q.x0,q.dy=q.y1-q.y0;var $=q.dx,J=Math.max(.5,q.dy),X="node_"+q.pointNumber;return q.group&&(X=r.randstr()),q.trace=V.trace,q.curveNumber=V.trace.index,{index:q.pointNumber,key:X,partOfGroup:q.partOfGroup||!1,group:q.group,traceId:V.key,trace:V.trace,node:q,nodePad:V.nodePad,nodeLineColor:V.nodeLineColor,nodeLineWidth:V.nodeLineWidth,textFont:V.textFont,size:V.horizontal?V.height:V.width,visibleWidth:Math.ceil($),visibleHeight:J,zoneX:-te,zoneY:-ee,zoneWidth:$+2*te,zoneHeight:J+2*ee,labelY:V.horizontal?q.dy/2+1:q.dx/2+1,left:1===q.originalLayer,sizeAcross:V.width,forceLayouts:V.forceLayouts,horizontal:V.horizontal,darkBackground:ie.getBrightness()<=128,tinyColorHue:t.tinyRGB(ie),tinyColorAlpha:ie.getAlpha(),valueFormat:V.valueFormat,valueSuffix:V.valueSuffix,sankey:V.sankey,graph:V.graph,arrangement:V.arrangement,uniqueNodeLabelPathId:[V.guid,V.key,X].join("_"),interactionState:V.interactionState,figure:V}}function w(V){V.attr("transform",function(q){return n(q.node.x0.toFixed(3),q.node.y0.toFixed(3))})}function E(V){V.call(w)}function P(V,q){V.call(E),q.attr("d",h())}function I(V){V.attr("width",function(q){return q.node.x1-q.node.x0}).attr("height",function(q){return q.visibleHeight})}function O(V){return V.link.width>1||V.linkLineWidth>0}function z(V){return n(V.translateX,V.translateY)+(V.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function U(V,q,ie){V.on(".basic",null).on("mouseover.basic",function(te){te.interactionState.dragInProgress||te.partOfGroup||(ie.hover(this,te,q),te.interactionState.hovered=[this,te])}).on("mousemove.basic",function(te){te.interactionState.dragInProgress||te.partOfGroup||(ie.follow(this,te),te.interactionState.hovered=[this,te])}).on("mouseout.basic",function(te){te.interactionState.dragInProgress||te.partOfGroup||(ie.unhover(this,te,q),te.interactionState.hovered=!1)}).on("click.basic",function(te){te.interactionState.hovered&&(ie.unhover(this,te,q),te.interactionState.hovered=!1),te.interactionState.dragInProgress||te.partOfGroup||ie.select(this,te,q)})}function R(V,q,ie,te){var ee=o.behavior.drag().origin(function($){return{x:$.node.x0+$.visibleWidth/2,y:$.node.y0+$.visibleHeight/2}}).on("dragstart",function($){if("fixed"!==$.arrangement&&(r.ensureSingle(te._fullLayout._infolayer,"g","dragcover",function(X){te._fullLayout._dragCover=X}),r.raiseToTop(this),$.interactionState.dragInProgress=$.node,Y($.node),$.interactionState.hovered&&(ie.nodeEvents.unhover.apply(0,$.interactionState.hovered),$.interactionState.hovered=!1),"snap"===$.arrangement)){var J=$.traceId+"|"+$.key;$.forceLayouts[J]?$.forceLayouts[J].alpha(1):function(X,ae,ce,le){!function(we){for(var Te=0;Te<we.length;Te++)we[Te].y=(we[Te].y0+we[Te].y1)/2,we[Te].x=(we[Te].x0+we[Te].x1)/2}(ce.graph.nodes);var Te,ye,ve,pe=ce.graph.nodes.filter(function(we){return we.originalX===ce.node.originalX}).filter(function(we){return!we.partOfGroup});ce.forceLayouts[ae]=M.forceSimulation(pe).alphaDecay(0).force("collide",M.forceCollide().radius(function(we){return we.dy/2+ce.nodePad/2}).strength(1).iterations(p.forceIterations)).force("constrain",(Te=ae,ye=pe,ve=ce,function(){for(var xe=0,Ce=0;Ce<ye.length;Ce++){var Oe=ye[Ce];Oe===ve.interactionState.dragInProgress?(Oe.x=Oe.lastDraggedX,Oe.y=Oe.lastDraggedY):(Oe.vx=(Oe.originalX-Oe.x)/p.forceTicksPerFrame,Oe.y=Math.min(ve.size-Oe.dy/2,Math.max(Oe.dy/2,Oe.y))),xe=Math.max(xe,Math.abs(Oe.vx),Math.abs(Oe.vy))}!ve.interactionState.dragInProgress&&xe<.1&&ve.forceLayouts[Te].alpha()>0&&ve.forceLayouts[Te].alpha(0)})).stop()}(0,J,$),X=V,ae=q,ce=$,le=J,pe=te,window.requestAnimationFrame(function we(){var Te;for(Te=0;Te<p.forceTicksPerFrame;Te++)ce.forceLayouts[le].tick();if(function(ve){for(var xe=0;xe<ve.length;xe++)ve[xe].y0=ve[xe].y-ve[xe].dy/2,ve[xe].y1=ve[xe].y0+ve[xe].dy,ve[xe].x0=ve[xe].x-ve[xe].dx/2,ve[xe].x1=ve[xe].x0+ve[xe].dx}(ce.graph.nodes),ce.sankey.update(ce.graph),P(X.filter(B(ce)),ae),ce.forceLayouts[le].alpha()>0)window.requestAnimationFrame(we);else{var ye=ce.node.originalX;ce.node.x0=ye-ce.visibleWidth/2,ce.node.x1=ye+ce.visibleWidth/2,j(ce,pe)}})}var X,ae,ce,le,pe}).on("drag",function($){if("fixed"!==$.arrangement){var J=o.event.x,X=o.event.y;"snap"===$.arrangement?($.node.x0=J-$.visibleWidth/2,$.node.x1=J+$.visibleWidth/2,$.node.y0=X-$.visibleHeight/2,$.node.y1=X+$.visibleHeight/2):("freeform"===$.arrangement&&($.node.x0=J-$.visibleWidth/2,$.node.x1=J+$.visibleWidth/2),X=Math.max(0,Math.min($.size-$.visibleHeight/2,X)),$.node.y0=X-$.visibleHeight/2,$.node.y1=X+$.visibleHeight/2),Y($.node),"snap"!==$.arrangement&&($.sankey.update($.graph),P(V.filter(B($)),q))}}).on("dragend",function($){if("fixed"!==$.arrangement){$.interactionState.dragInProgress=!1;for(var J=0;J<$.node.childrenNodes.length;J++)$.node.childrenNodes[J].x=$.node.x,$.node.childrenNodes[J].y=$.node.y;"snap"!==$.arrangement&&j($,te)}});V.on(".drag",null).call(ee)}function j(V,q){for(var ie=[],te=[],ee=0;ee<V.graph.nodes.length;ee++){var J=(V.graph.nodes[ee].y0+V.graph.nodes[ee].y1)/2;ie.push((V.graph.nodes[ee].x0+V.graph.nodes[ee].x1)/2/V.figure.width),te.push(J/V.figure.height)}d.call("_guiRestyle",q,{"node.x":[ie],"node.y":[te]},V.trace.index).then(function(){q._fullLayout._dragCover&&q._fullLayout._dragCover.remove()})}function Y(V){V.lastDraggedX=V.x0+V.dx/2,V.lastDraggedY=V.y0+V.dy/2}function B(V){return function(q){return q.node.originalX===V.node.originalX}}ne.exports=function(V,q,ie,te,ee){var $=V._context.staticPlot,J=!1;r.ensureSingle(V._fullLayout._infolayer,"g","first-render",function(){J=!0});var X=V._fullLayout._dragCover,ae=ie.filter(function(xe){return c(xe).trace.visible}).map(v.bind(null,te)),ce=q.selectAll("."+p.cn.sankey).data(ae,u);ce.exit().remove(),ce.enter().append("g").classed(p.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",$?"none":"auto").attr("transform",z),ce.each(function(xe,Ce){V._fullData[Ce]._sankey=xe;var Oe="bgsankey-"+xe.trace.uid+"-"+Ce;r.ensureSingle(V._fullLayout._draggers,"rect",Oe),V._fullData[Ce]._bgRect=o.select("."+Oe),V._fullData[Ce]._bgRect.style("pointer-events",$?"none":"all").attr("width",xe.width).attr("height",xe.height).attr("x",xe.translateX).attr("y",xe.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),ce.transition().ease(p.ease).duration(p.duration).attr("transform",z);var le=ce.selectAll("."+p.cn.sankeyLinks).data(f,u);le.enter().append("g").classed(p.cn.sankeyLinks,!0).style("fill","none");var pe=le.selectAll("."+p.cn.sankeyLink).data(function(xe){return xe.graph.links.filter(function(Ce){return Ce.value}).map(b.bind(null,xe))},u);pe.enter().append("path").classed(p.cn.sankeyLink,!0).call(U,ce,ee.linkEvents),pe.style("stroke",function(xe){return O(xe)?t.tinyRGB(l(xe.linkLineColor)):xe.tinyColorHue}).style("stroke-opacity",function(xe){return O(xe)?t.opacity(xe.linkLineColor):xe.tinyColorAlpha}).style("fill",function(xe){return xe.tinyColorHue}).style("fill-opacity",function(xe){return xe.tinyColorAlpha}).style("stroke-width",function(xe){return O(xe)?xe.linkLineWidth:1}).attr("d",h()),pe.style("opacity",function(){return V._context.staticPlot||J||X?1:0}).transition().ease(p.ease).duration(p.duration).style("opacity",1),pe.exit().transition().ease(p.ease).duration(p.duration).style("opacity",0).remove();var we=ce.selectAll("."+p.cn.sankeyNodeSet).data(f,u);we.enter().append("g").classed(p.cn.sankeyNodeSet,!0),we.style("cursor",function(xe){switch(xe.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var Te=we.selectAll("."+p.cn.sankeyNode).data(function(xe){var Ce=xe.graph.nodes;return function(Oe){var be,ue=[];for(be=0;be<Oe.length;be++)Oe[be].originalX=(Oe[be].x0+Oe[be].x1)/2,Oe[be].originalY=(Oe[be].y0+Oe[be].y1)/2,-1===ue.indexOf(Oe[be].originalX)&&ue.push(Oe[be].originalX);for(ue.sort(function(se,ge){return se-ge}),be=0;be<Oe.length;be++)Oe[be].originalLayerIndex=ue.indexOf(Oe[be].originalX),Oe[be].originalLayer=Oe[be].originalLayerIndex/(ue.length-1)}(Ce),Ce.map(S.bind(null,xe))},u);Te.enter().append("g").classed(p.cn.sankeyNode,!0).call(w).style("opacity",function(xe){return!V._context.staticPlot&&!J||xe.partOfGroup?0:1}),Te.call(U,ce,ee.nodeEvents).call(R,pe,ee,V),Te.transition().ease(p.ease).duration(p.duration).call(w).style("opacity",function(xe){return xe.partOfGroup?0:1}),Te.exit().transition().ease(p.ease).duration(p.duration).style("opacity",0).remove();var ye=Te.selectAll("."+p.cn.nodeRect).data(f);ye.enter().append("rect").classed(p.cn.nodeRect,!0).call(I),ye.style("stroke-width",function(xe){return xe.nodeLineWidth}).style("stroke",function(xe){return t.tinyRGB(l(xe.nodeLineColor))}).style("stroke-opacity",function(xe){return t.opacity(xe.nodeLineColor)}).style("fill",function(xe){return xe.tinyColorHue}).style("fill-opacity",function(xe){return xe.tinyColorAlpha}),ye.transition().ease(p.ease).duration(p.duration).call(I);var ve=Te.selectAll("."+p.cn.nodeLabel).data(f);ve.enter().append("text").classed(p.cn.nodeLabel,!0).style("cursor","default"),ve.attr("data-notex",1).text(function(xe){return xe.node.label}).each(function(xe){var Ce=o.select(this);i.font(Ce,xe.textFont),y.convertToTspans(Ce,V)}).attr("text-anchor",function(xe){return xe.horizontal&&xe.left?"end":"start"}).attr("transform",function(xe){var Ce=o.select(this),Oe=y.lineCount(Ce),ue=xe.nodeLineWidth/2+3,se=((xe.horizontal?xe.visibleHeight:xe.visibleWidth)-xe.textFont.size*((Oe-1)*x-g))/2;xe.horizontal&&(xe.left?ue=-ue:ue+=xe.visibleWidth);var ge=xe.horizontal?"":"scale(-1,1)"+a(90);return n(xe.horizontal?ue:se,xe.horizontal?se:ue)+ge}),ve.transition().ease(p.ease).duration(p.duration)}},81128:function(ne){"use strict";ne.exports=function(F,e){for(var M=[],k=F.cd[0].trace,o=k._sankey.graph.nodes,T=0;T<o.length;T++){var _=o[T];if(!_.partOfGroup){var p=[(_.x0+_.x1)/2,(_.y0+_.y1)/2];"v"===k.orientation&&p.reverse(),e&&e.contains(p,!1,T,F)&&M.push({pointNumber:_.pointNumber})}}return M}},20148:function(ne,F,e){"use strict";var M=e(3400);ne.exports=function(k,o){for(var T=0;T<k.length;T++)k[T].i=T;M.mergeArray(o.text,k,"tx"),M.mergeArray(o.texttemplate,k,"txt"),M.mergeArray(o.hovertext,k,"htx"),M.mergeArray(o.customdata,k,"data"),M.mergeArray(o.textposition,k,"tp"),o.textfont&&(M.mergeArrayCastPositive(o.textfont.size,k,"ts"),M.mergeArray(o.textfont.color,k,"tc"),M.mergeArray(o.textfont.family,k,"tf"),M.mergeArray(o.textfont.weight,k,"tw"),M.mergeArray(o.textfont.style,k,"ty"),M.mergeArray(o.textfont.variant,k,"tv"),M.mergeArray(o.textfont.textcase,k,"tC"),M.mergeArray(o.textfont.lineposition,k,"tE"),M.mergeArray(o.textfont.shadow,k,"tS"));var _=o.marker;if(_){M.mergeArrayCastPositive(_.size,k,"ms"),M.mergeArrayCastPositive(_.opacity,k,"mo"),M.mergeArray(_.symbol,k,"mx"),M.mergeArray(_.angle,k,"ma"),M.mergeArray(_.standoff,k,"mf"),M.mergeArray(_.color,k,"mc");var p=_.line;_.line&&(M.mergeArray(p.color,k,"mlc"),M.mergeArrayCastPositive(p.width,k,"mlw"));var l=_.gradient;l&&"none"!==l.type&&(M.mergeArray(l.type,k,"mgt"),M.mergeArray(l.color,k,"mgc"))}}},52904:function(ne,F,e){"use strict";var M=e(29736).axisHoverFormat,k=e(21776).Gw,o=e(21776).Ks,T=e(49084),_=e(25376),p=e(98192).u,l=e(98192).c,t=e(43616),i=e(88200),r=e(92880).extendFlat,n=e(98304);ne.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:M("x"),yhoverformat:M("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:k({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:o({},{keys:i.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:r({},p,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:n(!0),fillgradient:r({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc"},start:{valType:"number",editType:"calc"},stop:{valType:"number",editType:"calc"},colorscale:{valType:"colorscale",editType:"style"},editType:"calc"}),fillpattern:l,marker:r({symbol:{valType:"enumerated",values:t.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:r({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},T("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},T("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:_({editType:"calc",colorEditType:"style",arrayOk:!0}),zorder:{valType:"integer",dflt:0,editType:"plot"}}},16356:function(ne,F,e){"use strict";var M=e(38248),k=e(3400),o=e(54460),T=e(1220),_=e(39032).BADNUM,p=e(43028),l=e(90136),t=e(20148),i=e(4500);function r(f,c,y,d,m,g,x){var v=c._length,b=f._fullLayout,h=y._id,S=d._id,w=b._firstScatter[s(c)]===c.uid,E=(u(c,b,y,d)||{}).orientation,P=c.fill;y._minDtick=0,d._minDtick=0;var I={padded:!0},O={padded:!0};x&&(I.ppad=O.ppad=x);var z=v<2||m[0]!==m[v-1]||g[0]!==g[v-1];z&&("tozerox"===P||"tonextx"===P&&(w||"h"===E))?I.tozero=!0:(c.error_y||{}).visible||"tonexty"!==P&&"tozeroy"!==P&&(p.hasMarkers(c)||p.hasText(c))||(I.padded=!1,I.ppad=0),z&&("tozeroy"===P||"tonexty"===P&&(w||"v"===E))?O.tozero=!0:"tonextx"!==P&&"tozerox"!==P||(O.padded=!1),h&&(c._extremes[h]=o.findExtremes(y,m,I)),S&&(c._extremes[S]=o.findExtremes(d,g,O))}function n(f,c){if(p.hasMarkers(f)){var y,d=f.marker,m=1.6*(f.marker.sizeref||1);if(y="area"===f.marker.sizemode?function(h){return Math.max(Math.sqrt((h||0)/m),3)}:function(h){return Math.max((h||0)/m,3)},k.isArrayOrTypedArray(d.size)){var g={type:"linear"};o.setConvert(g);for(var x=g.makeCalcdata(f.marker,"size"),v=new Array(c),b=0;b<c;b++)v[b]=y(x[b]);return v}return y(d.size)}}function a(f,c){var y=s(c),d=f._firstScatter;d[y]||(d[y]=c.uid)}function s(f){var c=f.stackgroup;return f.xaxis+f.yaxis+f.type+(c?"-"+c:"")}function u(f,c,y,d){var m=f.stackgroup;if(m){var g=c._scatterStackOpts[y._id+d._id][m],x="v"===g.orientation?d:y;return"linear"===x.type||"log"===x.type?g:void 0}}ne.exports={calc:function(f,c){var y,d,m,g,x,v,b=f._fullLayout,h=c._xA=o.getFromId(f,c.xaxis||"x","x"),S=c._yA=o.getFromId(f,c.yaxis||"y","y"),w=h.makeCalcdata(c,"x"),E=S.makeCalcdata(c,"y"),P=T(c,h,"x",w),I=T(c,S,"y",E),O=P.vals,z=I.vals,U=c._length,R=new Array(U),j=c.ids,Y=u(c,b,h,S),B=!1;a(b,c);var V,q="x",ie="y";Y?(k.pushUnique(Y.traceIndices,c._expandedIndex),(y="v"===Y.orientation)?(ie="s",V="x"):(q="s",V="y"),x="interpolate"===Y.stackgaps):r(f,c,h,S,O,z,n(c,U));var te=!!c.xperiodalignment,ee=!!c.yperiodalignment;for(d=0;d<U;d++){var $=R[d]={},J=M(O[d]),X=M(z[d]);J&&X?($[q]=O[d],$[ie]=z[d],te&&($.orig_x=w[d],$.xEnd=P.ends[d],$.xStart=P.starts[d]),ee&&($.orig_y=E[d],$.yEnd=I.ends[d],$.yStart=I.starts[d])):Y&&(y?J:X)?($[V]=y?O[d]:z[d],$.gap=!0,x?($.s=_,B=!0):$.s=0):$[q]=$[ie]=_,j&&($.id=String(j[d]))}if(t(R,c),l(f,c),i(R,c),Y){for(d=0;d<R.length;)R[d][V]===_?R.splice(d,1):d++;if(k.sort(R,function(pe,we){return pe[V]-we[V]||pe.i-we.i}),B){for(d=0;d<R.length-1&&R[d].gap;)d++;for((v=R[d].s)||(v=R[d].s=0),m=0;m<d;m++)R[m].s=v;for(g=R.length-1;g>d&&R[g].gap;)g--;for(v=R[g].s,m=R.length-1;m>g;m--)R[m].s=v;for(;d<g;)if(R[++d].gap){for(m=d+1;R[m].gap;)m++;for(var ae=R[d-1][V],ce=R[d-1].s,le=(R[m].s-ce)/(R[m][V]-ae);d<m;)R[d].s=ce+(R[d][V]-ae)*le,d++}}}return R},calcMarkerSize:n,calcAxisExpansion:r,setFirstScatter:a,getStackOpts:u}},4500:function(ne,F,e){"use strict";var M=e(3400);ne.exports=function(k,o){M.isArrayOrTypedArray(o.selectedpoints)&&M.tagSelected(k,o)}},90136:function(ne,F,e){"use strict";var M=e(94288).hasColorscale,k=e(47128),o=e(43028);ne.exports=function(T,_){o.hasLines(_)&&M(_,"line")&&k(T,_,{vals:_.line.color,containerStr:"line",cLetter:"c"}),o.hasMarkers(_)&&(M(_,"marker")&&k(T,_,{vals:_.marker.color,containerStr:"marker",cLetter:"c"}),M(_,"marker.line")&&k(T,_,{vals:_.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},88200:function(ne){"use strict";ne.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},96664:function(ne,F,e){"use strict";var M=e(16356),k=e(96376).setGroupPositions;function o(T,_,p,l,t,i,r){t[l]=!0;var s,u,c,y,d,n={i:null,gap:!0,s:0};if(n[r]=p,T.splice(_,0,n),_&&p===T[_-1][r]){var a=T[_-1];n.s=a.s,n.i=a.i,n.gap=a.gap}else i&&(n.s=(c=r,y=(s=T)[(u=_)-1],(d=s[u+1])?y?y.s+(d.s-y.s)*(p-y[c])/(d[c]-y[c]):d.s:y.s));_||(T[0].t=T[1].t,T[0].trace=T[1].trace,delete T[1].t,delete T[1].trace)}ne.exports=function(T,_){"group"===T._fullLayout.scattermode&&function(V,q){for(var ie=q.xaxis,te=q.yaxis,ee=V._fullLayout,$=V._fullData,J=V.calcdata,X=[],ae=[],ce=0;ce<$.length;ce++){var le=$[ce];!0===le.visible&&"scatter"===le.type&&le.xaxis===ie._id&&le.yaxis===te._id&&("h"===le.orientation?X.push(J[ce]):"v"===le.orientation&&ae.push(J[ce]))}var pe={mode:ee.scattermode,gap:ee.scattergap};k(V,ie,te,ae,pe),k(V,te,ie,X,pe)}(T,_);var p=_.xaxis,l=_.yaxis,i=T._fullLayout._scatterStackOpts[p._id+l._id];if(i){var r,n,a,s,u,f,c,y,d,m,g,x,v,b,h,S=T.calcdata;for(var w in i){var E=(m=i[w]).traceIndices;if(E.length){for(g="interpolate"===m.stackgaps,x=m.groupnorm,"v"===m.orientation?(v="x",b="y"):(v="y",b="x"),h=new Array(E.length),r=0;r<h.length;r++)h[r]=!1;f=S[E[0]];var P=new Array(f.length);for(r=0;r<f.length;r++)P[r]=f[r][v];for(r=1;r<E.length;r++){for(u=S[E[r]],n=a=0;n<u.length;n++){for(c=u[n][v];c>P[a]&&a<P.length;a++)o(u,n,P[a],r,h,g,v),n++;if(c!==P[a]){for(s=0;s<r;s++)o(S[E[s]],a,c,s,h,g,v);P.splice(a,0,c)}a++}for(;a<P.length;a++)o(u,n,P[a],r,h,g,v),n++}var I=P.length;for(n=0;n<f.length;n++){for(y=f[n][b]=f[n].s,r=1;r<E.length;r++)(u=S[E[r]])[0].trace._rawLength=u[0].trace._length,u[0].trace._length=I,u[n][b]=y+=u[n].s;if(x)for(d=("fraction"===x?y:y/100)||1,r=0;r<E.length;r++){var O=S[E[r]][n];O[b]/=d,O.sNorm=O.s/d}}for(r=0;r<E.length;r++){var z=(u=S[E[r]])[0].trace,U=M.calcMarkerSize(z,z._rawLength),R=Array.isArray(U);if(U&&h[r]||R){var j=U;for(U=new Array(I),n=0;n<I;n++)U[n]=u[n].gap?0:R?j[u[n].i]:j}var Y=new Array(I),B=new Array(I);for(n=0;n<I;n++)Y[n]=u[n].x,B[n]=u[n].y;M.calcAxisExpansion(T,z,p,l,Y,B,U),u[0].t.orientation=m.orientation}}}}}},35036:function(ne,F,e){"use strict";var M=e(3400),k=e(20011),o=e(52904);ne.exports=function(T,_){var l,t;function i(u){return M.coerce(l._input,l,o,u)}if("group"===_.scattermode)for(t=0;t<T.length;t++)"scatter"===(l=T[t]).type&&k(l._input,l,_,i);for(t=0;t<T.length;t++){var r=T[t];if("scatter"===r.type){var n=r.fill;if("none"!==n&&"toself"!==n&&(r.opacity=void 0,"tonexty"===n||"tonextx"===n))for(var a=t-1;a>=0;a--){var s=T[a];if("scatter"===s.type&&s.xaxis===r.xaxis&&s.yaxis===r.yaxis){s.opacity=void 0;break}}}}}},18800:function(ne,F,e){"use strict";var M=e(3400),k=e(24040),o=e(52904),T=e(88200),_=e(43028),p=e(43980),l=e(31147),t=e(43912),i=e(74428),r=e(66828),n=e(11731),a=e(124),s=e(70840),u=e(3400).coercePattern;ne.exports=function(f,c,y,d){function m(E,P){return M.coerce(f,c,o,E,P)}var g=p(f,c,d,m);if(g||(c.visible=!1),c.visible){l(f,c,d,m),m("xhoverformat"),m("yhoverformat"),m("zorder");var x=t(f,c,d,m);"group"===d.scattermode&&void 0===c.orientation&&m("orientation","v");var v=!x&&g<T.PTS_LINESONLY?"lines+markers":"lines";m("text"),m("hovertext"),m("mode",v),_.hasMarkers(c)&&i(f,c,y,d,m,{gradient:!0}),_.hasLines(c)&&(r(f,c,y,d,m,{backoff:!0}),n(f,c,m),m("connectgaps"),m("line.simplify")),_.hasText(c)&&(m("texttemplate"),a(f,c,d,m));var b=[];(_.hasMarkers(c)||_.hasText(c))&&(m("cliponaxis"),m("marker.maxdisplayed"),b.push("points")),m("fill",x?x.fillDflt:"none"),"none"!==c.fill&&(s(f,c,y,m,{moduleHasFillgradient:!0}),_.hasLines(c)||n(f,c,m),u(m,"fillpattern",c.fillcolor,!1));var h=(c.line||{}).color,S=(c.marker||{}).color;"tonext"!==c.fill&&"toself"!==c.fill||b.push("fills"),m("hoveron",b.join("+")||"points"),"fills"!==c.hoveron&&m("hovertemplate");var w=k.getComponentMethod("errorbars","supplyDefaults");w(f,c,h||S||y,{axis:"y"}),w(f,c,h||S||y,{axis:"x",inherit:"y"}),M.coerceSelectionMarkerOpacity(c,m)}}},98304:function(ne){"use strict";ne.exports=function(F){return{valType:"color",editType:"style",anim:!0}}},70840:function(ne,F,e){"use strict";var M=e(76308),k=e(3400).isArrayOrTypedArray;ne.exports=function(o,T,_,p,l){l||(l={});var t,i=!1;if(T.marker){var r=T.marker.color,n=(T.marker.line||{}).color;r&&!k(r)?i=r:n&&!k(n)&&(i=n)}if(l.moduleHasFillgradient&&"none"!==p("fillgradient.type")){p("fillgradient.start"),p("fillgradient.stop");var a=p("fillgradient.colorscale");a&&(t=function(s){for(var u=M.interpolate(s[0][1],s[1][1],.5),f=2;f<s.length;f++){var c=M.interpolate(s[f-1][1],s[f][1],.5);u=M.interpolate(u,c,s[f-1][0]/s[f][0])}return u}(a))}p("fillcolor",M.addOpacity((T.line||{}).color||i||t||_,.5))}},76688:function(ne,F,e){"use strict";var M=e(54460);ne.exports=function(k,o,T){var _={},p={_fullLayout:T},l=M.getFromTrace(p,o,"x"),t=M.getFromTrace(p,o,"y"),i=k.orig_x;void 0===i&&(i=k.x);var r=k.orig_y;return void 0===r&&(r=k.y),_.xLabel=M.tickText(l,l.c2l(i),!0).text,_.yLabel=M.tickText(t,t.c2l(r),!0).text,_}},44928:function(ne,F,e){"use strict";var M=e(76308),k=e(43028);ne.exports=function(o,T){var _,p;if("lines"===o.mode)return(_=o.line.color)&&M.opacity(_)?_:o.fillcolor;if("none"===o.mode)return o.fill?o.fillcolor:"";var l=T.mcc||(o.marker||{}).color,t=T.mlcc||((o.marker||{}).line||{}).color;return(p=l&&M.opacity(l)?l:t&&M.opacity(t)&&(T.mlw||((o.marker||{}).line||{}).width)?t:"")?M.opacity(p)<.3?M.addOpacity(p,.3):p:(_=(o.line||{}).color)&&M.opacity(_)&&k.hasLines(o)&&o.line.width?_:o.fillcolor}},20011:function(ne,F,e){"use strict";var M=e(71888).getAxisGroup;ne.exports=function(k,o,T,_){var p=o.orientation,t=M(T,o[{v:"x",h:"y"}[p]+"axis"])+p,i=T._alignmentOpts||{},r=_("alignmentgroup"),n=i[t];n||(n=i[t]={});var a=n[r];a?a.traces.push(o):a=n[r]={traces:[o],alignmentIndex:Object.keys(n).length,offsetGroups:{}};var s=_("offsetgroup"),u=a.offsetGroups,f=u[s];s&&(f||(f=u[s]={offsetIndex:Object.keys(u).length}),o._offsetIndex=f.offsetIndex)}},98723:function(ne,F,e){"use strict";var M=e(3400),k=e(93024),o=e(24040),T=e(44928),_=e(76308),p=M.fillText;ne.exports=function(l,t,i,r){var n=l.cd,a=n[0].trace,s=l.xa,u=l.ya,f=s.c2p(t),c=u.c2p(i),y=[f,c],d=a.hoveron||"",m=-1!==a.mode.indexOf("markers")?3:.5,g=!!a.xperiodalignment,x=!!a.yperiodalignment;if(-1!==d.indexOf("points")){var v=function(Y){var B=Math.max(m,Y.mrc||0),V=s.c2p(Y.x)-f,q=u.c2p(Y.y)-c;return Math.max(Math.sqrt(V*V+q*q)-B,1-m/B)},b=k.getDistanceFunction(r,function(Y){if(g){var B=s.c2p(Y.xStart),V=s.c2p(Y.xEnd);return f>=Math.min(B,V)&&f<=Math.max(B,V)?0:1/0}var q=Math.max(3,Y.mrc||0),ie=1-1/q,te=Math.abs(s.c2p(Y.x)-f);return te<q?ie*te/q:te-q+ie},function(Y){if(x){var B=u.c2p(Y.yStart),V=u.c2p(Y.yEnd);return c>=Math.min(B,V)&&c<=Math.max(B,V)?0:1/0}var q=Math.max(3,Y.mrc||0),ie=1-1/q,te=Math.abs(u.c2p(Y.y)-c);return te<q?ie*te/q:te-q+ie},v);if(k.getClosest(n,b,l),!1!==l.index){var h=n[l.index],S=s.c2p(h.x,!0),w=u.c2p(h.y,!0),E=h.mrc||1;l.index=h.i;var P=n[0].t.orientation,I=P&&(h.sNorm||h.s),O="h"===P?I:void 0!==h.orig_x?h.orig_x:h.x,z="v"===P?I:void 0!==h.orig_y?h.orig_y:h.y;return M.extendFlat(l,{color:T(a,h),x0:S-E,x1:S+E,xLabelVal:O,y0:w-E,y1:w+E,yLabelVal:z,spikeDistance:v(h),hovertemplate:a.hovertemplate}),p(h,a,l),o.getComponentMethod("errorbars","hoverInfo")(h,a,l),[l]}}function U(Y){if(!Y)return!1;var B=Y.node();try{var V=new DOMPoint(y[0],y[1]);return B.isPointInFill(V)}catch{var q=B.ownerSVGElement.createSVGPoint();return q.x=y[0],q.y=y[1],B.isPointInFill(q)}}if(-1!==d.indexOf("fills")&&a._fillElement&&U(a._fillElement)&&!U(a._fillExclusionElement)){var R=function(Y){var B,V,q,ie,te,ee,J,X,ae=[],ce=1/0,le=-1/0,pe=1/0,we=-1/0;for(B=0;B<Y.length;B++){var Te=Y[B];Te.contains(y)&&(ae.push(Te),pe=Math.min(pe,Te.ymin),we=Math.max(we,Te.ymax))}if(0===ae.length)return null;for(V=((pe=Math.max(pe,0))+(we=Math.min(we,u._length)))/2,B=0;B<ae.length;B++)for(ie=ae[B].pts,q=1;q<ie.length;q++)(J=ie[q-1][1])>V!=(X=ie[q][1])>=V&&(ee=ie[q-1][0],X-J&&(te=ee+(ie[q][0]-ee)*(V-J)/(X-J),ce=Math.min(ce,te),le=Math.max(le,te)));return{x0:ce=Math.max(ce,0),x1:le=Math.min(le,s._length),y0:V,y1:V}}(a._polygons);null===R&&(R={x0:y[0],x1:y[0],y0:y[1],y1:y[1]});var j=_.defaultLine;return _.opacity(a.fillcolor)?j=a.fillcolor:_.opacity((a.line||{}).color)&&(j=a.line.color),M.extendFlat(l,{distance:l.maxHoverDistance,x0:R.x0,x1:R.x1,y0:R.y0,y1:R.y1,color:j,hovertemplate:!1}),delete l.index,l.text=a.text&&!M.isArrayOrTypedArray(a.text)?String(a.text):a.name,[l]}}},65875:function(ne,F,e){"use strict";var M=e(43028);ne.exports={hasLines:M.hasLines,hasMarkers:M.hasMarkers,hasText:M.hasText,isBubble:M.isBubble,attributes:e(52904),layoutAttributes:e(55308),supplyDefaults:e(18800),crossTraceDefaults:e(35036),supplyLayoutDefaults:e(59748),calc:e(16356).calc,crossTraceCalc:e(96664),arraysToCalcdata:e(20148),plot:e(96504),colorbar:e(5528),formatLabels:e(76688),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(98723),selectPoints:e(91560),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e(57952),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},55308:function(ne){"use strict";ne.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},59748:function(ne,F,e){"use strict";var M=e(3400),k=e(55308);ne.exports=function(o,T){"group"===T.scattermode&&M.coerce(o,T,k,"scattergap","group"===T.barmode?T.bargap:.2)}},66828:function(ne,F,e){"use strict";var M=e(3400).isArrayOrTypedArray,k=e(94288).hasColorscale,o=e(27260);ne.exports=function(T,_,p,l,t,i){i||(i={});var r=(T.marker||{}).color;r&&r._inputArray&&(r=r._inputArray),t("line.color",p),k(T,"line")?o(T,_,l,t,{prefix:"line.",cLetter:"c"}):t("line.color",!M(r)&&r||p),t("line.width"),i.noDash||t("line.dash"),i.backoff&&t("line.backoff")}},52340:function(ne,F,e){"use strict";var M=e(43616),k=e(39032),o=k.BADNUM,T=k.LOG_CLIP,_=T+.5,p=T-.5,l=e(3400),t=l.segmentsIntersect,i=l.constrain,r=e(88200);ne.exports=function(n,a){var s,u,f,c,y,d,m,g,x,v,b,h,S,w,E,P,I,O,z=a.trace||{},U=a.xaxis,R=a.yaxis,j="log"===U.type,Y="log"===R.type,B=U._length,V=R._length,q=a.backoff,ie=z.marker,te=a.connectGaps,ee=a.baseTolerance,$=a.shape,J="linear"===$,X=z.fill&&"none"!==z.fill,ae=[],ce=r.minTolerance,le=n.length,pe=new Array(le),we=0;function Te(Rt){var Je=n[Rt];if(!Je)return!1;var et=a.linearized?U.l2p(Je.x):U.c2p(Je.x),qe=a.linearized?R.l2p(Je.y):R.c2p(Je.y);if(et===o){if(j&&(et=U.c2p(Je.x,!0)),et===o)return!1;Y&&qe===o&&(et*=Math.abs(U._m*V*(U._m>0?_:p)/(R._m*B*(R._m>0?_:p)))),et*=1e3}if(qe===o){if(Y&&(qe=R.c2p(Je.y,!0)),qe===o)return!1;qe*=1e3}return[et,qe]}function ye(Rt,Je,et,qe){var $e=et-Rt,pt=qe-Je,ct=.5-Rt,Ve=.5-Je,Ge=$e*$e+pt*pt,ut=$e*ct+pt*Ve;if(ut>0&&ut<Ge){var Qe=ct*pt-Ve*$e;if(Qe*Qe<Ge)return!0}}function ve(Rt,Je){var et=Rt[0]/B,qe=Rt[1]/V,$e=Math.max(0,-et,et-1,-qe,qe-1);return $e&&void 0!==I&&ye(et,qe,I,O)&&($e=0),$e&&Je&&ye(et,qe,Je[0]/B,Je[1]/V)&&($e=0),(1+r.toleranceGrowth*$e)*ee}function xe(Rt,Je){var et=Rt[0]-Je[0],qe=Rt[1]-Je[1];return Math.sqrt(et*et+qe*qe)}var Ce,Oe,be,ue,se,ge,Ie,ke=r.maxScreensAway,Se=-B*ke,Pe=B*(1+ke),Fe=-V*ke,Be=V*(1+ke),me=[[Se,Fe,Pe,Fe],[Pe,Fe,Pe,Be],[Pe,Be,Se,Be],[Se,Be,Se,Fe]];function Me(Rt){if(Rt[0]<Se||Rt[0]>Pe||Rt[1]<Fe||Rt[1]>Be)return[i(Rt[0],Se,Pe),i(Rt[1],Fe,Be)]}function Le(Rt,Je){return Rt[0]===Je[0]&&(Rt[0]===Se||Rt[0]===Pe)||Rt[1]===Je[1]&&(Rt[1]===Fe||Rt[1]===Be)||void 0}function Ne(Rt,Je,et){return function(qe,$e){var pt=Me(qe),ct=Me($e),Ve=[];if(pt&&ct&&Le(pt,ct))return Ve;pt&&Ve.push(pt),ct&&Ve.push(ct);var Ge=2*l.constrain((qe[Rt]+$e[Rt])/2,Je,et)-((pt||qe)[Rt]+(ct||$e)[Rt]);return Ge&&((pt&&ct?Ge>0==pt[Rt]>ct[Rt]?pt:ct:pt||ct)[Rt]+=Ge),Ve}}function Re(Rt){var Je=Rt[0],et=Rt[1],qe=Je===pe[we-1][0],$e=et===pe[we-1][1];if(!qe||!$e)if(we>1){var pt=Je===pe[we-2][0],ct=et===pe[we-2][1];qe&&(Je===Se||Je===Pe)&&pt?ct?we--:pe[we-1]=Rt:$e&&(et===Fe||et===Be)&&ct?pt?we--:pe[we-1]=Rt:pe[we++]=Rt}else pe[we++]=Rt}function He(Rt){pe[we-1][0]!==Rt[0]&&pe[we-1][1]!==Rt[1]&&Re([be,ue]),Re(Rt),se=null,be=ue=0}"linear"===$||"spline"===$?Ie=function(Rt,Je){for(var et=[],qe=0,$e=0;$e<4;$e++){var pt=me[$e],ct=t(Rt[0],Rt[1],Je[0],Je[1],pt[0],pt[1],pt[2],pt[3]);ct&&(!qe||Math.abs(ct.x-et[0][0])>1||Math.abs(ct.y-et[0][1])>1)&&(ct=[ct.x,ct.y],qe&&xe(ct,Rt)<xe(et[0],Rt)?et.unshift(ct):et.push(ct),qe++)}return et}:"hv"===$||"vh"===$?Ie=function(Rt,Je){var et=[],qe=Me(Rt),$e=Me(Je);return qe&&$e&&Le(qe,$e)||(qe&&et.push(qe),$e&&et.push($e)),et}:"hvh"===$?Ie=Ne(0,Se,Pe):"vhv"===$&&(Ie=Ne(1,Fe,Be));var Ze=l.isArrayOrTypedArray(ie);function nt(Rt){if(Rt&&q&&(Rt.i=s,Rt.d=n,Rt.trace=z,Rt.marker=Ze?ie[Rt.i]:ie,Rt.backoff=q),I=Rt[0]/B,O=Rt[1]/V,Oe=Rt[1]<Fe?Fe:Rt[1]>Be?Be:0,(Ce=Rt[0]<Se?Se:Rt[0]>Pe?Pe:0)||Oe){if(we)if(se){var Je=Ie(se,Rt);Je.length>1&&(He(Je[0]),pe[we++]=Je[1])}else ge=Ie(pe[we-1],Rt)[0],pe[we++]=ge;else pe[we++]=[Ce||Rt[0],Oe||Rt[1]];var et=pe[we-1];Ce&&Oe&&(et[0]!==Ce||et[1]!==Oe)?(se&&(be!==Ce&&ue!==Oe?Re(be&&ue?(pt=($e=Rt)[0]-(qe=se)[0],ct=($e[1]-qe[1])/pt,(qe[1]*$e[0]-$e[1]*qe[0])/pt>0?[ct>0?Se:Pe,Be]:[ct>0?Pe:Se,Fe]):[be||Ce,ue||Oe]):be&&ue&&Re([be,ue])),Re([Ce,Oe])):be-Ce&&ue-Oe&&Re([Ce||be,Oe||ue]),se=Rt,be=Ce,ue=Oe}else se&&He(Ie(se,Rt)[0]),pe[we++]=Rt;var qe,$e,pt,ct}for(s=0;s<le;s++)if(u=Te(s)){for(we=0,se=null,nt(u),s++;s<le;s++){if(!(c=Te(s))){if(te)continue;break}if(J&&a.simplify){var ft=Te(s+1);if(v=xe(c,u),X&&(0===we||we===le-1)||!(v<ve(c,ft)*ce)){for(g=[(c[0]-u[0])/v,(c[1]-u[1])/v],y=u,b=v,h=w=E=0,m=!1,f=c,s++;s<n.length;s++){if(d=ft,ft=Te(s+1),!d){if(te)continue;break}if(P=(x=[d[0]-u[0],d[1]-u[1]])[0]*g[1]-x[1]*g[0],w=Math.min(w,P),(E=Math.max(E,P))-w>ve(d,ft))break;f=d,(S=x[0]*g[0]+x[1]*g[1])>b?(b=S,c=d,m=!1):S<h&&(h=S,y=d,m=!0)}if(m?(nt(c),f!==y&&nt(y)):(y!==u&&nt(y),f!==c&&nt(c)),nt(f),s>=n.length||!d)break;nt(d),u=d}}else nt(c)}se&&Re([be||se[0],ue||se[1]]),ae.push(pe.slice(0,we))}var ht=$.slice($.length-1);if(q&&"h"!==ht&&"v"!==ht){for(var Tt=!1,At=-1,_t=[],ot=0;ot<ae.length;ot++)for(var it=0;it<ae[ot].length-1;it++){var Pt=ae[ot][it],jt=ae[ot][it+1],Ut=M.applyBackoff(jt,Pt);Ut[0]===jt[0]&&Ut[1]===jt[1]||(Tt=!0),_t[At+1]||(_t[++At]=[Pt,[Ut[0],Ut[1]]])}return Tt?_t:ae}return ae}},11731:function(ne){"use strict";ne.exports=function(F,e,M){"spline"===M("line.shape")&&M("line.smoothing")}},14328:function(ne){"use strict";var F={tonextx:1,tonexty:1,tonext:1};ne.exports=function(e,M,k){var o,T,_,p,l,t={},i=!1,r=-1,n=0,a=-1;for(T=0;T<k.length;T++)(_=(o=k[T][0].trace).stackgroup||"")?_ in t?l=t[_]:(l=t[_]=n,n++):o.fill in F&&a>=0?l=a:(l=a=n,n++),l<r&&(i=!0),o._groupIndex=r=l;var s=k.slice();i&&s.sort(function(f,c){var y=f[0].trace,d=c[0].trace;return y._groupIndex-d._groupIndex||y.index-d.index});var u={};for(T=0;T<s.length;T++)_=(o=s[T][0].trace).stackgroup||"",!0===o.visible?(o._nexttrace=null,o.fill in F&&(o._prevtrace=(p=u[_])||null,p&&(p._nexttrace=o)),o._ownfill=o.fill&&("tozero"===o.fill.substr(0,6)||"toself"===o.fill||"to"===o.fill.substr(0,2)&&!o._prevtrace),u[_]=o):o._prevtrace=o._nexttrace=o._ownfill=null;return s}},7152:function(ne,F,e){"use strict";var M=e(38248);ne.exports=function(k,o){o||(o=2);var T=k.marker,_=T.sizeref||1,p=T.sizemin||0,l="area"===T.sizemode?function(t){return Math.sqrt(t/_)}:function(t){return t/_};return function(t){var i=l(t/o);return M(i)&&i>0?Math.max(i,p):0}}},5528:function(ne){"use strict";ne.exports={container:"marker",min:"cmin",max:"cmax"}},74428:function(ne,F,e){"use strict";var M=e(76308),k=e(94288).hasColorscale,o=e(27260),T=e(43028);ne.exports=function(_,p,l,t,i,r){var n=T.isBubble(_),a=(_.line||{}).color;r=r||{},a&&(l=a),i("marker.symbol"),i("marker.opacity",n?.7:1),i("marker.size"),r.noAngle||(i("marker.angle"),r.noAngleRef||i("marker.angleref"),r.noStandOff||i("marker.standoff")),i("marker.color",l),k(_,"marker")&&o(_,p,t,i,{prefix:"marker.",cLetter:"c"}),r.noSelect||(i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size")),r.noLine||(i("marker.line.color",a&&!Array.isArray(a)&&p.marker.color!==a?a:n?M.background:M.defaultLine),k(_,"marker.line")&&o(_,p,t,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width",n?1:0)),n&&(i("marker.sizeref"),i("marker.sizemin"),i("marker.sizemode")),r.gradient&&"none"!==i("marker.gradient.type")&&i("marker.gradient.color")}},31147:function(ne,F,e){"use strict";var M=e(3400).dateTick0,k=e(39032).ONEWEEK;function o(T,_){return M(_,T%k==0?1:0)}ne.exports=function(T,_,p,l,t){if(t||(t={x:!0,y:!0}),t.x){var i=l("xperiod");i&&(l("xperiod0",o(i,_.xcalendar)),l("xperiodalignment"))}if(t.y){var r=l("yperiod");r&&(l("yperiod0",o(r,_.ycalendar)),l("yperiodalignment"))}}},96504:function(ne,F,e){"use strict";var M=e(33428),k=e(24040),o=e(3400),T=o.ensureSingle,_=o.identity,p=e(43616),l=e(43028),t=e(52340),i=e(14328),r=e(92065).tester;function n(a,s,u,f,c,y,d){var m,g=a._context.staticPlot;!function(Re,He,Ze,nt,ft){var ht=Ze.xaxis,Tt=Ze.yaxis,At=M.extent(o.simpleMap(ht.range,ht.r2c)),_t=M.extent(o.simpleMap(Tt.range,Tt.r2c)),ot=nt[0].trace;if(l.hasMarkers(ot)){var it=ot.marker.maxdisplayed;if(0!==it){var Pt=nt.filter(function(Je){return Je.x>=At[0]&&Je.x<=At[1]&&Je.y>=_t[0]&&Je.y<=_t[1]}),jt=Math.ceil(Pt.length/it),Ut=0;ft.forEach(function(Je,et){var qe=Je[0].trace;l.hasMarkers(qe)&&qe.marker.maxdisplayed>0&&et<He&&Ut++});var Rt=Math.round(Ut*jt/3+Math.floor(Ut/3)*jt/7.1);nt.forEach(function(Je){delete Je.vis}),Pt.forEach(function(Je,et){0===Math.round((et+Rt)%jt)&&(Je.vis=!0)})}}}(0,s,u,f,c);var x=!!d&&d.duration>0;function v(Re){return x?Re.transition():Re}var b=u.xaxis,h=u.yaxis,S=f[0].trace,w=S.line,E=M.select(y),P=T(E,"g","errorbars"),I=T(E,"g","lines"),O=T(E,"g","points"),z=T(E,"g","text");if(k.getComponentMethod("errorbars","plot")(a,P,u,d),!0===S.visible){var U,R;v(E).style("opacity",S.opacity);var j,Y,B=S.fill.charAt(S.fill.length-1);"x"!==B&&"y"!==B&&(B=""),"y"===B?(j=1,Y=h.c2p(0,!0)):"x"===B&&(j=0,Y=b.c2p(0,!0)),f[0][u.isRangePlot?"nodeRangePlot3":"node3"]=E;var V,q,ie="",te=[],ee=S._prevtrace,$=null,J=null;ee&&(ie=ee._prevRevpath||"",R=ee._nextFill,te=ee._ownPolygons,$=ee._fillsegments,J=ee._fillElement);var X,ae,ce,le,pe,we,Te="",ye="",ve=[];S._polygons=[];var xe=[],Ce=[],Oe=o.noop;if(U=S._ownFill,l.hasLines(S)||"none"!==S.fill){R&&R.datum(f),-1!==["hv","vh","hvh","vhv"].indexOf(w.shape)?(X=p.steps(w.shape),ae=p.steps(w.shape.split("").reverse().join(""))):X=ae="spline"===w.shape?function(Re){var He=Re[Re.length-1];return Re.length>1&&Re[0][0]===He[0]&&Re[0][1]===He[1]?p.smoothclosed(Re.slice(1),w.smoothing):p.smoothopen(Re,w.smoothing)}:function(Re){return"M"+Re.join("L")},ce=function(Re){return ae(Re.reverse())},Ce=t(f,{xaxis:b,yaxis:h,trace:S,connectGaps:S.connectgaps,baseTolerance:Math.max(w.width||1,3)/4,shape:w.shape,backoff:w.backoff,simplify:w.simplify,fill:S.fill}),xe=new Array(Ce.length);var be=0;for(m=0;m<Ce.length;m++){var ue,se=Ce[m];ue&&B?ue.push.apply(ue,se):(ue=se.slice(),xe[be]=ue,be++)}S._fillElement=null,S._fillExclusionElement=J,S._fillsegments=xe.slice(0,be),xe=S._fillsegments,Ce.length&&(le=Ce[0][0].slice(),we=(pe=Ce[Ce.length-1])[pe.length-1].slice()),Oe=function(Re){return function(He){if(V=X(He),q=ce(He),Te?B?(Te+="L"+V.substr(1),ye=q+"L"+ye.substr(1)):(Te+="Z"+V,ye=q+"Z"+ye):(Te=V,ye=q),l.hasLines(S)){var Ze=M.select(this);if(Ze.datum(f),Re)v(Ze.style("opacity",0).attr("d",V).call(p.lineGroupStyle)).style("opacity",1);else{var nt=v(Ze);nt.attr("d",V),p.singleLineStyle(f,nt)}}}}}var ge=I.selectAll(".js-line").data(Ce);v(ge.exit()).style("opacity",0).remove(),ge.each(Oe(!1)),ge.enter().append("path").classed("js-line",!0).style("vector-effect",g?"none":"non-scaling-stroke").call(p.lineGroupStyle).each(Oe(!0)),p.setClipUrl(ge,u.layerClipId,a);var Ie=function(){var Re=new Array(xe.length);for(m=0;m<xe.length;m++)Re[m]=r(xe[m]);return Re},ke=function(Re){var He,Ze;if(Re&&0!==Re.length){for(He=new Array(Re.length-1+xe.length),Ze=0;Ze<Re.length-1;Ze++)He[Ze]=r(Re[Ze]);var nt=Re[Re.length-1].slice();for(nt.reverse(),Ze=0;Ze<xe.length;Ze++)He[Re.length-1+Ze]=r(xe[Ze].concat(nt))}else for(He=new Array(xe.length),Ze=0;Ze<xe.length;Ze++){var ft=xe[Ze][0].slice(),ht=xe[Ze][xe[Ze].length-1].slice();ft[j]=ht[j]=Y;var Tt=[ht,ft].concat(xe[Ze]);He[Ze]=r(Tt)}return He};Ce.length?(U?(U.datum(f),le&&we&&(B?(le[j]=we[j]=Y,v(U).attr("d","M"+we+"L"+le+"L"+Te.substr(1)).call(p.singleFillStyle,a),ve=ke(null)):(v(U).attr("d",Te+"Z").call(p.singleFillStyle,a),ve=Ie())),S._polygons=ve,S._fillElement=U):R&&("tonext"===S.fill.substr(0,6)&&Te&&ie?("tonext"===S.fill?(v(R).attr("d",Te+"Z"+ie+"Z").call(p.singleFillStyle,a),ve=Ie(),S._polygons=ve.concat(te)):(v(R).attr("d",Te+"L"+ie.substr(1)+"Z").call(p.singleFillStyle,a),ve=ke($),S._polygons=ve),S._fillElement=R):Pe(R)),S._prevRevpath=ye):(U?Pe(U):R&&Pe(R),S._prevRevpath=null),S._ownPolygons=ve,O.datum(f),z.datum(f),function(Re,He,Ze){var nt,ft=Ze[0].trace,ht=l.hasMarkers(ft),Tt=l.hasText(ft),At=function Le(Re){if(Re.ids)return Me}(ft),_t=Ne,ot=Ne;if(ht||Tt){var it=_,Pt=ft.stackgroup,jt=Pt&&"infer zero"===a._fullLayout._scatterStackOpts[b._id+h._id][Pt].stackgaps;ft.marker.maxdisplayed||ft._needsCull?it=jt?Be:Fe:Pt&&!jt&&(it=me),ht&&(_t=it),Tt&&(ot=it)}var Ut,Rt=(nt=Re.selectAll("path.point").data(_t,At)).enter().append("path").classed("point",!0);x&&Rt.call(p.pointStyle,ft,a).call(p.translatePoints,b,h).style("opacity",0).transition().style("opacity",1),nt.order(),ht&&(Ut=p.makePointStyleFns(ft)),nt.each(function(Je){var et=M.select(this),qe=v(et);p.translatePoint(Je,qe,b,h)?(p.singlePointStyle(Je,qe,ft,Ut,a),u.layerClipId&&p.hideOutsideRangePoint(Je,qe,b,h,ft.xcalendar,ft.ycalendar),ft.customdata&&et.classed("plotly-customdata",null!=Je.data)):qe.remove()}),x?nt.exit().transition().style("opacity",0).remove():nt.exit().remove(),(nt=He.selectAll("g").data(ot,At)).enter().append("g").classed("textpoint",!0).append("text"),nt.order(),nt.each(function(Je){var et=M.select(this),qe=v(et.select("text"));p.translatePoint(Je,qe,b,h)?u.layerClipId&&p.hideOutsideRangePoint(Je,et,b,h,ft.xcalendar,ft.ycalendar):et.remove()}),nt.selectAll("text").call(p.textPointStyle,ft,a).each(function(Je){var et=b.c2p(Je.x),qe=h.c2p(Je.y);M.select(this).selectAll("tspan.line").each(function(){v(M.select(this)).attr({x:et,y:qe})})}),nt.exit().remove()}(O,z,f);var Se=!1===S.cliponaxis?null:u.layerClipId;p.setClipUrl(O,Se,a),p.setClipUrl(z,Se,a)}function Pe(Re){v(Re).attr("d","M0,0Z")}function Fe(Re){return Re.filter(function(He){return!He.gap&&He.vis})}function Be(Re){return Re.filter(function(He){return He.vis})}function me(Re){return Re.filter(function(He){return!He.gap})}function Me(Re){return Re.id}function Ne(){return!1}}ne.exports=function(a,s,u,f,c,y){var d,m,b,S,g=!c,x=!!c&&c.duration>0,v=i(a,s,u);(d=f.selectAll("g.trace").data(v,function(b){return b[0].trace.uid})).enter().append("g").attr("class",function(b){return"trace scatter trace"+b[0].trace.uid}).style("stroke-miterlimit",2),d.order(),b=a,S=s,d.each(function(w){var E=T(M.select(this),"g","fills");p.setClipUrl(E,S.layerClipId,b);var P=w[0].trace,I=[];P._ownfill&&I.push("_ownFill"),P._nexttrace&&I.push("_nextFill");var O=E.selectAll("g").data(I,_);O.enter().append("g"),O.exit().each(function(z){P[z]=null}).remove(),O.order().each(function(z){P[z]=T(M.select(this),"path","js-fill")})}),x?(y&&(m=y()),M.transition().duration(c.duration).ease(c.easing).each("end",function(){m&&m()}).each("interrupt",function(){m&&m()}).each(function(){f.selectAll("g.trace").each(function(b,h){n(a,h,s,b,v,this,c)})})):d.each(function(b,h){n(a,h,s,b,v,this,c)}),g&&d.exit().remove(),f.selectAll("path:not([d])").remove()}},91560:function(ne,F,e){"use strict";var M=e(43028);ne.exports=function(k,o){var T,_,p,l,t=k.cd,i=k.xaxis,r=k.yaxis,n=[],a=t[0].trace;if(!M.hasMarkers(a)&&!M.hasText(a))return[];if(!1===o)for(T=0;T<t.length;T++)t[T].selected=0;else for(T=0;T<t.length;T++)p=i.c2p((_=t[T]).x),l=r.c2p(_.y),null!==_.i&&o.contains([p,l],!1,T,k)?(n.push({pointNumber:_.i,x:i.c2d(_.x),y:r.c2d(_.y)}),_.selected=1):_.selected=0;return n}},43912:function(ne){"use strict";var F=["orientation","groupnorm","stackgaps"];ne.exports=function(e,M,k,o){var T=k._scatterStackOpts,_=o("stackgroup");if(_){var p=M.xaxis+M.yaxis,l=T[p];l||(l=T[p]={});var t=l[_],i=!1;t?t.traces.push(M):(t=l[_]={traceIndices:[],traces:[M]},i=!0);for(var r={orientation:M.x&&!M.y?"h":"v"},n=0;n<F.length;n++){var a=F[n],s=a+"Found";if(!t[s]){var u=void 0!==e[a],f="orientation"===a;if((u||i)&&(t[a]=o(a,r[a]),f&&(t.fillDflt="h"===t[a]?"tonextx":"tonexty"),u&&(t[s]=!0,!i&&(delete t.traces[0][a],f))))for(var c=0;c<t.traces.length-1;c++){var y=t.traces[c];y._input.fill!==y.fill&&(y.fill=t.fillDflt)}}}return t}}},49224:function(ne,F,e){"use strict";var M=e(33428),k=e(43616),o=e(24040);function T(p,l,t){k.pointStyle(p.selectAll("path.point"),l,t)}function _(p,l,t){k.textPointStyle(p.selectAll("text"),l,t)}ne.exports={style:function(p){var l=M.select(p).selectAll("g.trace.scatter");l.style("opacity",function(t){return t[0].trace.opacity}),l.selectAll("g.points").each(function(t){T(M.select(this),t.trace||t[0].trace,p)}),l.selectAll("g.text").each(function(t){_(M.select(this),t.trace||t[0].trace,p)}),l.selectAll("g.trace path.js-line").call(k.lineGroupStyle),l.selectAll("g.trace path.js-fill").call(k.fillGroupStyle,p,!1),o.getComponentMethod("errorbars","style")(l)},stylePoints:T,styleText:_,styleOnSelect:function(p,l,t){var i=l[0].trace;i.selectedpoints?(k.selectedPointStyle(t.selectAll("path.point"),i),k.selectedTextStyle(t.selectAll("text"),i)):(T(t,i,p),_(t,i,p))}}},43028:function(ne,F,e){"use strict";var M=e(3400),k=e(38116).isTypedArraySpec;ne.exports={hasLines:function(o){return o.visible&&o.mode&&-1!==o.mode.indexOf("lines")},hasMarkers:function(o){return o.visible&&(o.mode&&-1!==o.mode.indexOf("markers")||"splom"===o.type)},hasText:function(o){return o.visible&&o.mode&&-1!==o.mode.indexOf("text")},isBubble:function(o){var T=o.marker;return M.isPlainObject(T)&&(M.isArrayOrTypedArray(T.size)||k(T.size))}}},124:function(ne,F,e){"use strict";var M=e(3400);ne.exports=function(k,o,T,_,p){p=p||{},_("textposition"),M.coerceFont(_,"textfont",p.font||T.font,p),p.noSelect||(_("selected.textfont.color"),_("unselected.textfont.color"))}},43980:function(ne,F,e){"use strict";var M=e(3400),k=e(24040);ne.exports=function(o,T,_,p){var l,t=p("x"),i=p("y");if(k.getComponentMethod("calendars","handleTraceDefaults")(o,T,["x","y"],_),t){var r=M.minRowLength(t);i?l=Math.min(r,M.minRowLength(i)):(l=r,p("y0"),p("dy"))}else{if(!i)return 0;l=M.minRowLength(i),p("x0"),p("dx")}return T._length=l,l}},91592:function(ne,F,e){"use strict";var M=e(52904),k=e(25376),o=e(49084),T=e(29736).axisHoverFormat,_=e(21776).Ks,p=e(21776).Gw,l=e(45464),t=e(99168),i=e(87792),r=e(92880).extendFlat,n=e(67824).overrideAll,a=e(95376),u=M.marker,f=u.line,c=r({width:M.line.width,dash:{valType:"enumerated",values:a(t),dflt:"solid"}},o("line")),y=ne.exports=n({x:M.x,y:M.y,z:{valType:"data_array"},text:r({},M.text,{}),texttemplate:p({},{}),hovertext:r({},M.hovertext,{}),hovertemplate:_(),xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z"),mode:r({},M.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:M.connectgaps,line:c,marker:r({symbol:{valType:"enumerated",values:a(i),dflt:"circle",arrayOk:!0},size:r({},u.size,{dflt:8}),sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode,opacity:r({},u.opacity,{arrayOk:!1}),colorbar:u.colorbar,line:r({width:r({},f.width,{arrayOk:!1})},o("marker.line"))},o("marker")),textposition:r({},M.textposition,{dflt:"top center"}),textfont:k({noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,editType:"calc",colorEditType:"style",arrayOk:!0,variantValues:["normal","small-caps"]}),opacity:l.opacity,hoverinfo:r({},l.hoverinfo)},"calc","nested");y.x.editType=y.y.editType=y.z.editType="calc+clearAxisTypes"},41484:function(ne,F,e){"use strict";var M=e(20148),k=e(90136);ne.exports=function(o,T){var _=[{x:!1,y:!1,trace:T,t:{}}];return M(_,T),k(o,T),_}},45156:function(ne,F,e){"use strict";var M=e(24040);function k(o,T,_,p){if(!T||!T.visible)return null;for(var l=M.getComponentMethod("errorbars","makeComputeError")(T),t=new Array(o.length),i=0;i<o.length;i++){var r=l(+o[i],i);if("log"===p.type){var n=p.c2l(o[i]),a=o[i]-r[0],s=o[i]+r[1];if(t[i]=[(p.c2l(a,!0)-n)*_,(p.c2l(s,!0)-n)*_],a>0){var u=p.c2l(a);p._lowerLogErrorBound||(p._lowerLogErrorBound=u),p._lowerErrorBound=Math.min(p._lowerLogErrorBound,u)}}else t[i]=[-r[0]*_,r[1]*_]}return t}ne.exports=function(o,T,_){var p=[k(o.x,o.error_x,T[0],_.xaxis),k(o.y,o.error_y,T[1],_.yaxis),k(o.z,o.error_z,T[2],_.zaxis)],l=function(s){for(var u=0;u<s.length;u++)if(s[u])return s[u].length;return 0}(p);if(0===l)return null;for(var t=new Array(l),i=0;i<l;i++){for(var r=[[0,0,0],[0,0,0]],n=0;n<3;n++)if(p[n])for(var a=0;a<2;a++)r[a][n]=p[n][i][a];t[i]=r}return t}},41064:function(ne,F,e){"use strict";var M=e(67792).gl_line3d,k=e(67792).gl_scatter3d,o=e(67792).gl_error3d,T=e(67792).gl_mesh3d,_=e(67792).delaunay_triangulate,p=e(3400),l=e(43080),t=e(33040).formatColor,i=e(7152),r=e(99168),n=e(87792),a=e(54460),s=e(10624).appendArrayPointValue,u=e(45156);function f(h,S){this.scene=h,this.uid=S,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var c=f.prototype;function y(h){return null==h?0:h.indexOf("left")>-1?-1:h.indexOf("right")>-1?1:0}function d(h){return null==h?0:h.indexOf("top")>-1?-1:h.indexOf("bottom")>-1?1:0}function m(h,S){return S(4*h)}function g(h){return n[h]}function x(h,S,w,E,P){var I=null;if(p.isArrayOrTypedArray(h)){I=[];for(var O=0;O<S;O++)I[O]=void 0===h[O]?E:w(h[O],P)}else I=w(h,p.identity);return I}function v(h){if(p.isArrayOrTypedArray(h)){var S=h[0];return p.isArrayOrTypedArray(S)&&(h=S),"rgb("+h.slice(0,3).map(function(w){return Math.round(255*w)})+")"}return null}function b(h){return p.isArrayOrTypedArray(h)?4===h.length&&"number"==typeof h[0]?v(h):h.map(v):null}c.handlePick=function(h){if(h.object&&(h.object===this.linePlot||h.object===this.delaunayMesh||h.object===this.textMarkers||h.object===this.scatterPlot)){var S=h.index=h.data.index;return h.object.highlight&&h.object.highlight(null),this.scatterPlot&&(h.object=this.scatterPlot,this.scatterPlot.highlight(h.data)),h.textLabel="",this.textLabels&&(p.isArrayOrTypedArray(this.textLabels)?(this.textLabels[S]||0===this.textLabels[S])&&(h.textLabel=this.textLabels[S]):h.textLabel=this.textLabels),h.traceCoordinate=[this.data.x[S],this.data.y[S],this.data.z[S]],!0}},c.update=function(h){var S,w,E,P,I=this.scene.glplot.gl,O=r.solid;this.data=h;var z=function(j,Y){var B,V,q,ie,te,ee,$=[],J=j.fullSceneLayout,X=j.dataScale,ae=J.xaxis,ce=J.yaxis,le=J.zaxis,pe=Y.marker,we=Y.line,Te=Y.x||[],ye=Y.y||[],ve=Y.z||[],xe=Te.length,Ce=Y.xcalendar,Oe=Y.ycalendar,be=Y.zcalendar;for(te=0;te<xe;te++)B=ae.d2l(Te[te],0,Ce)*X[0],V=ce.d2l(ye[te],0,Oe)*X[1],q=le.d2l(ve[te],0,be)*X[2],$[te]=[B,V,q];if(Array.isArray(Y.text))ee=Y.text;else if(p.isTypedArray(Y.text))ee=Array.from(Y.text);else if(void 0!==Y.text)for(ee=new Array(xe),te=0;te<xe;te++)ee[te]=Y.text;function ue(He,Ze){var nt=J[He];return a.tickText(nt,nt.d2l(Ze),!0).text}var se=Y.texttemplate;if(se){var ge=j.fullLayout._d3locale,Ie=Array.isArray(se),ke=Ie?Math.min(se.length,xe):xe,Se=Ie?function(He){return se[He]}:function(){return se};for(ee=new Array(ke),te=0;te<ke;te++){var Pe={x:Te[te],y:ye[te],z:ve[te]},Fe={xLabel:ue("xaxis",Te[te]),yLabel:ue("yaxis",ye[te]),zLabel:ue("zaxis",ve[te])},Be={};s(Be,Y,te);var me=Y._meta||{};ee[te]=p.texttemplateString(Se(te),Fe,ge,Be,Pe,me)}}if(ie={position:$,mode:Y.mode,text:ee},"line"in Y&&(ie.lineColor=t(we,1,xe),ie.lineWidth=we.width,ie.lineDashes=we.dash),"marker"in Y){var Me=i(Y);ie.scatterColor=t(pe,1,xe),ie.scatterSize=x(pe.size,xe,m,20,Me),ie.scatterMarker=x(pe.symbol,xe,g,"\u25cf"),ie.scatterLineWidth=pe.line.width,ie.scatterLineColor=t(pe.line,1,xe),ie.scatterAngle=0}"textposition"in Y&&(ie.textOffset=function(He){var Ze=[0,0];if(Array.isArray(He))for(var nt=0;nt<He.length;nt++)Ze[nt]=[0,0],He[nt]&&(Ze[nt][0]=y(He[nt]),Ze[nt][1]=d(He[nt]));else Ze[0]=y(He),Ze[1]=d(He);return Ze}(Y.textposition),ie.textColor=t(Y.textfont,1,xe),ie.textSize=x(Y.textfont.size,xe,p.identity,12),ie.textFontFamily=Y.textfont.family,ie.textFontWeight=Y.textfont.weight,ie.textFontStyle=Y.textfont.style,ie.textFontVariant=Y.textfont.variant,ie.textAngle=0);var Le=["x","y","z"];for(ie.project=[!1,!1,!1],ie.projectScale=[1,1,1],ie.projectOpacity=[1,1,1],te=0;te<3;++te){var Ne=Y.projection[Le[te]];(ie.project[te]=Ne.show)&&(ie.projectOpacity[te]=Ne.opacity,ie.projectScale[te]=Ne.scale)}ie.errorBounds=u(Y,X,J);var Re=function(He){for(var Ze=[0,0,0],nt=[[0,0,0],[0,0,0],[0,0,0]],ft=[1,1,1],ht=0;ht<3;ht++){var Tt=He[ht];Tt&&!1!==Tt.copy_zstyle&&!1!==He[2].visible&&(Tt=He[2]),Tt&&Tt.visible&&(Ze[ht]=Tt.width/2,nt[ht]=l(Tt.color),ft[ht]=Tt.thickness)}return{capSize:Ze,color:nt,lineWidth:ft}}([Y.error_x,Y.error_y,Y.error_z]);return ie.errorColor=Re.color,ie.errorLineWidth=Re.lineWidth,ie.errorCapSize=Re.capSize,ie.delaunayAxis=Y.surfaceaxis,ie.delaunayColor=l(Y.surfacecolor),ie}(this.scene,h);"mode"in z&&(this.mode=z.mode),"lineDashes"in z&&z.lineDashes in r&&(O=r[z.lineDashes]),this.color=b(z.scatterColor)||b(z.lineColor),this.dataPoints=z.position,S={gl:this.scene.glplot.gl,position:z.position,color:z.lineColor,lineWidth:z.lineWidth||1,dashes:O[0],dashScale:O[1],opacity:h.opacity,connectGaps:h.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(S):(this.linePlot=M(S),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var U=h.opacity;if(h.marker&&void 0!==h.marker.opacity&&(U*=h.marker.opacity),w={gl:this.scene.glplot.gl,position:z.position,color:z.scatterColor,size:z.scatterSize,glyph:z.scatterMarker,opacity:U,orthographic:!0,lineWidth:z.scatterLineWidth,lineColor:z.scatterLineColor,project:z.project,projectScale:z.projectScale,projectOpacity:z.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(w):(this.scatterPlot=k(w),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),P={gl:this.scene.glplot.gl,position:z.position,glyph:z.text,color:z.textColor,size:z.textSize,angle:z.textAngle,alignment:z.textOffset,font:z.textFontFamily,fontWeight:z.textFontWeight,fontStyle:z.textFontStyle,fontVariant:z.textFontVariant,orthographic:!0,lineWidth:0,project:!1,opacity:h.opacity},this.textLabels=h.hovertext||h.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(P):(this.textMarkers=k(P),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),E={gl:this.scene.glplot.gl,position:z.position,color:z.errorColor,error:z.errorBounds,lineWidth:z.errorLineWidth,capSize:z.errorCapSize,opacity:h.opacity},this.errorBars?z.errorBounds?this.errorBars.update(E):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):z.errorBounds&&(this.errorBars=o(E),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),z.delaunayAxis>=0){var R=function(j,Y,B){var V,q=(B+1)%3,ie=(B+2)%3,te=[],ee=[];for(V=0;V<j.length;++V){var $=j[V];!isNaN($[q])&&isFinite($[q])&&!isNaN($[ie])&&isFinite($[ie])&&(te.push([$[q],$[ie]]),ee.push(V))}var J=_(te);for(V=0;V<J.length;++V)for(var X=J[V],ae=0;ae<X.length;++ae)X[ae]=ee[X[ae]];return{positions:j,cells:J,meshColor:Y}}(z.position,z.delaunayColor,z.delaunayAxis);R.opacity=h.opacity,this.delaunayMesh?this.delaunayMesh.update(R):(R.gl=I,this.delaunayMesh=T(R),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},c.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},ne.exports=function(h,S){var w=new f(h,S.uid);return w.update(S),w}},83484:function(ne,F,e){"use strict";var M=e(24040),k=e(3400),o=e(43028),T=e(74428),_=e(66828),p=e(124),l=e(91592);ne.exports=function(t,i,r,n){function a(g,x){return k.coerce(t,i,l,g,x)}var g,x,v,b,h,S,w,E;if(g=t,x=i,b=n,h=0,S=(v=a)("x"),w=v("y"),E=v("z"),M.getComponentMethod("calendars","handleTraceDefaults")(g,x,["x","y","z"],b),S&&w&&E&&(h=Math.min(S.length,w.length,E.length),x._length=x._xlength=x._ylength=x._zlength=h),h){a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),a("mode"),o.hasMarkers(i)&&T(t,i,r,n,a,{noSelect:!0,noAngle:!0}),o.hasLines(i)&&(a("connectgaps"),_(t,i,r,n,a)),o.hasText(i)&&(a("texttemplate"),p(t,i,n,a,{noSelect:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}));var u=(i.line||{}).color,f=(i.marker||{}).color;a("surfaceaxis")>=0&&a("surfacecolor",u||f);for(var c=["x","y","z"],y=0;y<3;++y){var d="projection."+c[y];a(d+".show")&&(a(d+".opacity"),a(d+".scale"))}var m=M.getComponentMethod("errorbars","supplyDefaults");m(t,i,u||f||r,{axis:"z"}),m(t,i,u||f||r,{axis:"y",inherit:"z"}),m(t,i,u||f||r,{axis:"x",inherit:"z"})}else i.visible=!1}},3296:function(ne,F,e){"use strict";ne.exports={plot:e(41064),attributes:e(91592),markerSymbols:e(87792),supplyDefaults:e(83484),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:e(41484),moduleType:"trace",name:"scatter3d",basePlotModule:e(12536),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},90372:function(ne,F,e){"use strict";var M=e(98304),k=e(52904),o=e(45464),T=e(21776).Ks,_=e(21776).Gw,p=e(49084),l=e(92880).extendFlat,t=k.marker,i=k.line,r=t.line;ne.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:l({},k.mode,{dflt:"markers"}),text:l({},k.text,{}),texttemplate:_({editType:"plot"},{keys:["a","b","text"]}),hovertext:l({},k.hovertext,{}),line:{color:i.color,width:i.width,dash:i.dash,backoff:i.backoff,shape:l({},i.shape,{values:["linear","spline"]}),smoothing:i.smoothing,editType:"calc"},connectgaps:k.connectgaps,fill:l({},k.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:M(),marker:l({symbol:t.symbol,opacity:t.opacity,maxdisplayed:t.maxdisplayed,angle:t.angle,angleref:t.angleref,standoff:t.standoff,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,line:l({width:r.width,editType:"calc"},p("marker.line")),gradient:t.gradient,editType:"calc"},p("marker")),textfont:k.textfont,textposition:k.textposition,selected:k.selected,unselected:k.unselected,hoverinfo:l({},o.hoverinfo,{flags:["a","b","text","name"]}),hoveron:k.hoveron,hovertemplate:T(),zorder:k.zorder}},48228:function(ne,F,e){"use strict";var M=e(38248),k=e(90136),o=e(20148),T=e(4500),_=e(16356).calcMarkerSize,p=e(50948);ne.exports=function(l,t){var i=t._carpetTrace=p(l,t);if(i&&i.visible&&"legendonly"!==i.visible){var r;t.xaxis=i.xaxis,t.yaxis=i.yaxis;var n,a,s=t._length,u=new Array(s),f=!1;for(r=0;r<s;r++)if(a=t.b[r],M(n=t.a[r])&&M(a)){var c=i.ab2xy(+n,+a,!0),y=i.isVisible(+n,+a);y||(f=!0),u[r]={x:c[0],y:c[1],a:n,b:a,vis:y}}else u[r]={x:!1,y:!1};return t._needsCull=f,u[0].carpet=i,u[0].trace=t,_(t,s),k(l,t),o(u,t),T(u,t),u}}},6176:function(ne,F,e){"use strict";var M=e(3400),k=e(88200),o=e(43028),T=e(74428),_=e(66828),p=e(11731),l=e(124),t=e(70840),i=e(90372);ne.exports=function(r,n,a,s){function u(m,g){return M.coerce(r,n,i,m,g)}u("carpet"),n.xaxis="x",n.yaxis="y";var f=u("a"),c=u("b"),y=Math.min(f.length,c.length);if(y){n._length=y,u("text"),u("texttemplate"),u("hovertext"),u("mode",y<k.PTS_LINESONLY?"lines+markers":"lines"),o.hasMarkers(n)&&T(r,n,a,s,u,{gradient:!0}),o.hasLines(n)&&(_(r,n,a,s,u,{backoff:!0}),p(r,n,u),u("connectgaps")),o.hasText(n)&&l(r,n,s,u);var d=[];(o.hasMarkers(n)||o.hasText(n))&&(u("marker.maxdisplayed"),d.push("points")),u("fill"),"none"!==n.fill&&(t(r,n,a,u),o.hasLines(n)||p(r,n,u)),"tonext"!==n.fill&&"toself"!==n.fill||d.push("fills"),"fills"!==u("hoveron",d.join("+")||"points")&&u("hovertemplate"),u("zorder"),M.coerceSelectionMarkerOpacity(n,u)}else n.visible=!1}},89307:function(ne){"use strict";ne.exports=function(F,e,M,k,o){var T=k[o];return F.a=T.a,F.b=T.b,F.y=T.y,F}},52364:function(ne){"use strict";ne.exports=function(F,e){var M={},k=e._carpet,o=k.ab2ij([F.a,F.b]),T=Math.floor(o[0]),_=o[0]-T,p=Math.floor(o[1]),t=k.evalxy([],T,p,_,o[1]-p);return M.yLabel=t[1].toFixed(3),M}},58960:function(ne,F,e){"use strict";var M=e(98723),k=e(3400).fillText;ne.exports=function(o,T,_,p){var l=M(o,T,_,p);if(l&&!1!==l[0].index){var t=l[0];if(void 0===t.index){var r=o.xa._length,n=r*(1-t.y0/o.ya._length)/2,a=r-n;return t.x0=Math.max(Math.min(t.x0,a),n),t.x1=Math.max(Math.min(t.x1,a),n),l}var s=t.cd[t.index];t.a=s.a,t.b=s.b,t.xLabelVal=void 0,t.yLabelVal=void 0;var u=t.trace,f=u._carpet,c=u._module.formatLabels(s,u);t.yLabel=c.yLabel,delete t.text;var y=[];if(!u.hovertemplate){var d=(s.hi||u.hoverinfo).split("+");-1!==d.indexOf("all")&&(d=["a","b","text"]),-1!==d.indexOf("a")&&m(f.aaxis,s.a),-1!==d.indexOf("b")&&m(f.baxis,s.b),y.push("y: "+t.yLabel),-1!==d.indexOf("text")&&k(s,u,y),t.extraText=y.join("<br>")}return l}function m(g,x){var v;v=g.labelprefix&&g.labelprefix.length>0?g.labelprefix.replace(/ = $/,""):g._hovertitle,y.push(v+": "+x.toFixed(3)+g.labelsuffix)}}},4184:function(ne,F,e){"use strict";ne.exports={attributes:e(90372),supplyDefaults:e(6176),colorbar:e(5528),formatLabels:e(52364),calc:e(48228),plot:e(20036),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(58960),selectPoints:e(91560),eventData:e(89307),moduleType:"trace",name:"scattercarpet",basePlotModule:e(57952),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},20036:function(ne,F,e){"use strict";var M=e(96504),k=e(54460),o=e(43616);ne.exports=function(T,_,p,l){var t,i,r,n=p[0][0].carpet,a=k.getFromId(T,n.xaxis||"x"),s=k.getFromId(T,n.yaxis||"y"),u={xaxis:a,yaxis:s,plot:_.plot};for(t=0;t<p.length;t++)(i=p[t][0].trace)._xA=a,i._yA=s;for(M(T,u,p,l),t=0;t<p.length;t++)r=l.selectAll("g.trace"+(i=p[t][0].trace).uid+" .js-line"),o.setClipUrl(r,p[t][0].carpet._clipPathId,T)}},6096:function(ne,F,e){"use strict";var M=e(21776).Ks,k=e(21776).Gw,o=e(98304),T=e(52904),_=e(45464),p=e(49084),l=e(98192).u,t=e(92880).extendFlat,i=e(67824).overrideAll,r=T.marker,n=T.line,a=r.line;ne.exports=i({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:t({},T.mode,{dflt:"markers"}),text:t({},T.text,{}),texttemplate:k({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:t({},T.hovertext,{}),textfont:T.textfont,textposition:T.textposition,line:{color:n.color,width:n.width,dash:l},connectgaps:T.connectgaps,marker:t({symbol:r.symbol,opacity:r.opacity,angle:r.angle,angleref:t({},r.angleref,{values:["previous","up","north"]}),standoff:r.standoff,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,colorbar:r.colorbar,line:t({width:a.width},p("marker.line")),gradient:r.gradient},p("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:o(),selected:T.selected,unselected:T.unselected,hoverinfo:t({},_.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:M()},"calc","nested")},25212:function(ne,F,e){"use strict";var M=e(38248),k=e(39032).BADNUM,o=e(90136),T=e(20148),_=e(4500),p=e(3400).isArrayOrTypedArray,l=e(3400)._;function t(i){return i&&"string"==typeof i}ne.exports=function(i,r){var n,a=p(r.locations),s=a?r.locations.length:r._length,u=new Array(s);n=r.geojson?function(g){return t(g)||M(g)}:t;for(var f=0;f<s;f++){var c=u[f]={};if(a){var y=r.locations[f];c.loc=n(y)?y:null}else{var d=r.lon[f],m=r.lat[f];c.lonlat=M(d)&&M(m)?[+d,+m]:[k,k]}}return T(u,r),o(i,r),_(u,r),s&&(u[0].t={labels:{lat:l(i,"lat:")+" ",lon:l(i,"lon:")+" "}}),u}},86188:function(ne,F,e){"use strict";var M=e(3400),k=e(43028),o=e(74428),T=e(66828),_=e(124),p=e(70840),l=e(6096);ne.exports=function(t,i,r,n){function a(m,g){return M.coerce(t,i,l,m,g)}var s,u=a("locations");if(u&&u.length){var f,c=a("geojson");("string"==typeof c&&""!==c||M.isPlainObject(c))&&(f="geojson-id"),"geojson-id"===a("locationmode",f)&&a("featureidkey"),s=u.length}else{var y=a("lon")||[],d=a("lat")||[];s=Math.min(y.length,d.length)}s?(i._length=s,a("text"),a("hovertext"),a("hovertemplate"),a("mode"),k.hasMarkers(i)&&o(t,i,r,n,a,{gradient:!0}),k.hasLines(i)&&(T(t,i,r,n,a),a("connectgaps")),k.hasText(i)&&(a("texttemplate"),_(t,i,n,a)),a("fill"),"none"!==i.fill&&p(t,i,r,a),M.coerceSelectionMarkerOpacity(i,a)):i.visible=!1}},58544:function(ne){"use strict";ne.exports=function(F,e,M,k,o){F.lon=e.lon,F.lat=e.lat,F.location=e.loc?e.loc:null;var T=k[o];return T.fIn&&T.fIn.properties&&(F.properties=T.fIn.properties),F}},56696:function(ne,F,e){"use strict";var M=e(54460);ne.exports=function(k,o,T){var _={},p=T[o.geo]._subplot.mockAxis,l=k.lonlat;return _.lonLabel=M.tickText(p,p.c2l(l[0]),!0).text,_.latLabel=M.tickText(p,p.c2l(l[1]),!0).text,_}},64292:function(ne,F,e){"use strict";var M=e(93024),k=e(39032).BADNUM,o=e(44928),T=e(3400).fillText,_=e(6096);ne.exports=function(p,l,t){var i=p.cd,r=i[0].trace,n=p.xa,a=p.ya,s=p.subplot,u=s.projection.isLonLatOverEdges,f=s.project;if(M.getClosest(i,function(v){var b=v.lonlat;if(b[0]===k||u(b))return 1/0;var h=f(b),S=f([l,t]),w=Math.abs(h[0]-S[0]),E=Math.abs(h[1]-S[1]),P=Math.max(3,v.mrc||0);return Math.max(Math.sqrt(w*w+E*E)-P,1-3/P)},p),!1!==p.index){var c=i[p.index],y=c.lonlat,d=[n.c2p(y),a.c2p(y)],m=c.mrc||1;p.x0=d[0]-m,p.x1=d[0]+m,p.y0=d[1]-m,p.y1=d[1]+m,p.loc=c.loc,p.lon=y[0],p.lat=y[1];var g={};g[r.geo]={_subplot:s};var x=r._module.formatLabels(c,r,g);return p.lonLabel=x.lonLabel,p.latLabel=x.latLabel,p.color=o(r,c),p.extraText=function(v,b,h,S){if(!v.hovertemplate){var w=b.hi||v.hoverinfo,E="all"===w?_.hoverinfo.flags:w.split("+"),P=-1!==E.indexOf("location")&&Array.isArray(v.locations),I=-1!==E.indexOf("lon"),O=-1!==E.indexOf("lat"),z=-1!==E.indexOf("text"),U=[];return P?U.push(b.loc):I&&O?U.push("("+R(h.latLabel)+", "+R(h.lonLabel)+")"):I?U.push(S.lon+R(h.lonLabel)):O&&U.push(S.lat+R(h.latLabel)),z&&T(b,v,U),U.join("<br>")}function R(j){return j+"\xb0"}}(r,c,p,i[0].t.labels),p.hovertemplate=r.hovertemplate,[p]}}},36952:function(ne,F,e){"use strict";ne.exports={attributes:e(6096),supplyDefaults:e(86188),colorbar:e(5528),formatLabels:e(56696),calc:e(25212),calcGeoJSON:e(48691).calcGeoJSON,plot:e(48691).plot,style:e(25064),styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(64292),eventData:e(58544),selectPoints:e(8796),moduleType:"trace",name:"scattergeo",basePlotModule:e(10816),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},48691:function(ne,F,e){"use strict";var M=e(33428),k=e(3400),o=e(59972).getTopojsonFeatures,T=e(44808),_=e(27144),p=e(19280).findExtremes,l=e(39032).BADNUM,t=e(16356).calcMarkerSize,i=e(43028),r=e(25064);ne.exports={calcGeoJSON:function(n,a){var s,u,f=n[0].trace,c=a[f.geo],y=c._subplot,d=f._length;if(k.isArrayOrTypedArray(f.locations)){var m=f.locationmode,g="geojson-id"===m?_.extractTraceFeature(n):o(f,y.topojson);for(s=0;s<d;s++){u=n[s];var x="geojson-id"===m?u.fOut:_.locationToFeature(m,u.loc,g);u.lonlat=x?x.properties.ct:[l,l]}}var v,b,h={padded:!0};if("geojson"===c.fitbounds&&"geojson-id"===f.locationmode){var S=_.computeBbox(_.getTraceGeojson(f));v=[S[0],S[2]],b=[S[1],S[3]]}else{for(v=new Array(d),b=new Array(d),s=0;s<d;s++)v[s]=(u=n[s]).lonlat[0],b[s]=u.lonlat[1];h.ppad=t(f,d)}f._extremes.lon=p(c.lonaxis._ax,v,h),f._extremes.lat=p(c.lataxis._ax,b,h)},plot:function(n,a,s){var u=a.layers.frontplot.select(".scatterlayer"),f=k.makeTraceGroups(u,s,"trace scattergeo");function c(y,d){y.lonlat[0]===l&&M.select(d).remove()}f.selectAll("*").remove(),f.each(function(y){var d=M.select(this),m=y[0].trace;if(i.hasLines(m)||"none"!==m.fill){var g=T.calcTraceToLineCoords(y),x="none"!==m.fill?T.makePolygon(g):T.makeLine(g);d.selectAll("path.js-line").data([{geojson:x,trace:m}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}i.hasMarkers(m)&&d.selectAll("path.point").data(k.identity).enter().append("path").classed("point",!0).each(function(v){c(v,this)}),i.hasText(m)&&d.selectAll("g").data(k.identity).enter().append("g").append("text").each(function(v){c(v,this)}),r(n,y)})}}},8796:function(ne,F,e){"use strict";var M=e(43028),k=e(39032).BADNUM;ne.exports=function(o,T){var _,p,l,t,i,r=o.cd,n=o.xaxis,a=o.yaxis,s=[],u=r[0].trace;if(!M.hasMarkers(u)&&!M.hasText(u))return[];if(!1===T)for(i=0;i<r.length;i++)r[i].selected=0;else for(i=0;i<r.length;i++)(p=(_=r[i]).lonlat)[0]!==k&&(l=n.c2p(p),t=a.c2p(p),T.contains([l,t],null,i,o)?(s.push({pointNumber:i,lon:p[0],lat:p[1]}),_.selected=1):_.selected=0);return s}},25064:function(ne,F,e){"use strict";var M=e(33428),k=e(43616),o=e(76308),T=e(49224),_=T.stylePoints,p=T.styleText;ne.exports=function(l,t){var i,r,n,a;t&&(i=l,n=(r=t)[0].trace,(a=r[0].node3).style("opacity",r[0].trace.opacity),_(a,n,i),p(a,n,i),a.selectAll("path.js-line").style("fill","none").each(function(s){var u=M.select(this),f=s.trace,c=f.line||{};u.call(o.stroke,c.color).call(k.dashLine,c.dash||"",c.width||0),"none"!==f.fill&&u.call(o.fill,f.fillcolor)}))}},2876:function(ne,F,e){"use strict";var M=e(45464),k=e(25376),o=e(98304),T=e(52904),_=e(29736).axisHoverFormat,p=e(49084),l=e(95376),t=e(92880).extendFlat,i=e(67824).overrideAll,r=e(67072).DASHES,n=T.line,a=T.marker,s=a.line,u=ne.exports=i({x:T.x,x0:T.x0,dx:T.dx,y:T.y,y0:T.y0,dy:T.dy,xperiod:T.xperiod,yperiod:T.yperiod,xperiod0:T.xperiod0,yperiod0:T.yperiod0,xperiodalignment:T.xperiodalignment,yperiodalignment:T.yperiodalignment,xhoverformat:_("x"),yhoverformat:_("y"),text:T.text,hovertext:T.hovertext,textposition:T.textposition,textfont:k({noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,editType:"calc",colorEditType:"style",arrayOk:!0,noNumericWeightValues:!0,variantValues:["normal","small-caps"]}),mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:n.color,width:n.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:l(r),dflt:"solid"}},marker:t({},p("marker"),{symbol:a.symbol,angle:a.angle,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,opacity:a.opacity,colorbar:a.colorbar,line:t({},p("marker.line"),{width:s.width})}),connectgaps:T.connectgaps,fill:t({},T.fill,{dflt:"none"}),fillcolor:o(),selected:{marker:T.selected.marker,textfont:T.selected.textfont},unselected:{marker:T.unselected.marker,textfont:T.unselected.textfont},opacity:M.opacity},"calc","nested");u.x.editType=u.y.editType=u.x0.editType=u.y0.editType="calc+clearAxisTypes",u.hovertemplate=T.hovertemplate,u.texttemplate=T.texttemplate},64628:function(ne,F,e){"use strict";var M=e(41272);ne.exports={moduleType:"trace",name:"scattergl",basePlotModule:e(57952),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:e(2876),supplyDefaults:e(80220),crossTraceDefaults:e(35036),colorbar:e(5528),formatLabels:e(99396),calc:e(24856),hoverPoints:M.hoverPoints,selectPoints:e(73224),meta:{}}},24856:function(ne,F,e){"use strict";var M=e(3108),k=e(3400),o=e(79811),T=e(19280).findExtremes,_=e(1220),p=e(16356),l=p.calcMarkerSize,t=p.calcAxisExpansion,i=p.setFirstScatter,r=e(90136),n=e(84236),a=e(74588),s=e(39032).BADNUM,u=e(67072).TOO_MANY_POINTS;function f(c,y,d){var m=c._extremes[y._id],g=T(y,d._bnds,{padded:!0});m.min=m.min.concat(g.min),m.max=m.max.concat(g.max)}ne.exports=function(c,y){var d,m=c._fullLayout,g=y._xA=o.getFromId(c,y.xaxis,"x"),x=y._yA=o.getFromId(c,y.yaxis,"y"),v=m._plots[y.xaxis+y.yaxis],b=y._length,h=b>=u,S=2*b,w={},E=g.makeCalcdata(y,"x"),P=x.makeCalcdata(y,"y"),I=_(y,g,"x",E),O=_(y,x,"y",P),z=I.vals,U=O.vals;y._x=z,y._y=U,y.xperiodalignment&&(y._origX=E,y._xStarts=I.starts,y._xEnds=I.ends),y.yperiodalignment&&(y._origY=P,y._yStarts=O.starts,y._yEnds=O.ends);var R=new Array(S),j=new Array(b);for(d=0;d<b;d++)R[2*d]=z[d]===s?NaN:z[d],R[2*d+1]=U[d]===s?NaN:U[d],j[d]=d;if("log"===g.type)for(d=0;d<S;d+=2)R[d]=g.c2l(R[d]);if("log"===x.type)for(d=1;d<S;d+=2)R[d]=x.c2l(R[d]);h&&"log"!==g.type&&"log"!==x.type?w.tree=M(R):w.ids=j,r(c,y);var Y,B=function(q,ie,te,ee,$,J){var X=n.style(q,te);if(X.marker&&(X.marker.positions=ee),X.line&&ee.length>1&&k.extendFlat(X.line,n.linePositions(q,te,ee)),X.errorX||X.errorY){var ae=n.errorBarPositions(q,te,ee,$,J);X.errorX&&k.extendFlat(X.errorX,ae.x),X.errorY&&k.extendFlat(X.errorY,ae.y)}return X.text&&(k.extendFlat(X.text,{positions:ee},n.textPosition(q,te,X.text,X.marker)),k.extendFlat(X.textSel,{positions:ee},n.textPosition(q,te,X.text,X.markerSel)),k.extendFlat(X.textUnsel,{positions:ee},n.textPosition(q,te,X.text,X.markerUnsel))),X}(c,0,y,R,z,U),V=a(c,v);return i(m,y),h?B.marker&&(Y=B.marker.sizeAvg||Math.max(B.marker.size,3)):Y=l(y,b),t(c,y,g,x,z,U,Y),B.errorX&&f(y,g,B.errorX),B.errorY&&f(y,x,B.errorY),B.fill&&!V.fill2d&&(V.fill2d=!0),B.marker&&!V.scatter2d&&(V.scatter2d=!0),B.line&&!V.line2d&&(V.line2d=!0),!B.errorX&&!B.errorY||V.error2d||(V.error2d=!0),B.text&&!V.glText&&(V.glText=!0),B.marker&&(B.marker.snap=b),V.lineOptions.push(B.line),V.errorXOptions.push(B.errorX),V.errorYOptions.push(B.errorY),V.fillOptions.push(B.fill),V.markerOptions.push(B.marker),V.markerSelectedOptions.push(B.markerSel),V.markerUnselectedOptions.push(B.markerUnsel),V.textOptions.push(B.text),V.textSelectedOptions.push(B.textSel),V.textUnselectedOptions.push(B.textUnsel),V.selectBatch.push([]),V.unselectBatch.push([]),w._scene=V,w.index=V.count,w.x=z,w.y=U,w.positions=R,V.count++,[{x:!1,y:!1,t:w,trace:y}]}},67072:function(ne){"use strict";ne.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},84236:function(ne,F,e){"use strict";var M=e(38248),k=e(20472),o=e(72160),T=e(24040),_=e(3400),p=_.isArrayOrTypedArray,l=e(43616),t=e(79811),i=e(33040).formatColor,r=e(43028),n=e(7152),a=e(80088),s=e(67072),u=e(13448).DESELECTDIM,f={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},c=e(10624).appendArrayPointValue;function y(I,O){var z,U=I._fullLayout,R=O._length,j=O.textfont,Y=O.textposition,B=p(Y)?Y:[Y],V=j.color,q=j.size,ie=j.family,te=j.weight,ee=j.style,$=j.variant,J={},X=I._context.plotGlPixelRatio,ae=O.texttemplate;if(ae){J.text=[];var ce=U._d3locale,le=Array.isArray(ae),pe=le?Math.min(ae.length,R):R,we=le?function(be){return ae[be]}:function(){return ae};for(z=0;z<pe;z++){var Te={i:z},ye=O._module.formatLabels(Te,O,U),ve={};c(ve,O,z);var xe=O._meta||{};J.text.push(_.texttemplateString(we(z),ye,ce,ve,Te,xe))}}else J.text=p(O.text)&&O.text.length<R?O.text.slice():O.text;if(p(J.text))for(z=J.text.length;z<R;z++)J.text[z]="";for(J.opacity=O.opacity,J.font={},J.align=[],J.baseline=[],z=0;z<B.length;z++){var Ce=B[z].split(/\s+/);switch(Ce[1]){case"left":J.align.push("right");break;case"right":J.align.push("left");break;default:J.align.push(Ce[1])}switch(Ce[0]){case"top":J.baseline.push("bottom");break;case"bottom":J.baseline.push("top");break;default:J.baseline.push(Ce[0])}}if(p(V))for(J.color=new Array(R),z=0;z<R;z++)J.color[z]=V[z];else J.color=V;if(p(q)||Array.isArray(ie)||p(te)||Array.isArray(ee)||Array.isArray($))for(J.font=new Array(R),z=0;z<R;z++){var Oe=J.font[z]={};Oe.size=(_.isTypedArray(q)?q[z]:p(q)?M(q[z])?q[z]:0:q)*X,Oe.family=Array.isArray(ie)?ie[z]:ie,Oe.weight=d(p(te)?te[z]:te),Oe.style=Array.isArray(ee)?ee[z]:ee,Oe.variant=Array.isArray($)?$[z]:$}else J.font={size:q*X,family:ie,weight:d(te),style:ee,variant:$};return J}function d(I){return I<=1e3?I>500?"bold":"normal":I}function m(I,O){var z,U,R=O._length,j=O.marker,Y={},B=p(j.symbol),V=p(j.angle),q=p(j.color),ie=p(j.line.color),te=p(j.opacity),ee=p(j.size),$=p(j.line.width);if(B||(U=a.isOpenSymbol(j.symbol)),B||q||ie||te||V){Y.symbols=new Array(R),Y.angles=new Array(R),Y.colors=new Array(R),Y.borderColors=new Array(R);var J=j.symbol,X=j.angle,ae=i(j,j.opacity,R),ce=i(j.line,j.opacity,R);if(!p(ce[0])){var le=ce;for(ce=Array(R),z=0;z<R;z++)ce[z]=le}if(!p(ae[0])){var pe=ae;for(ae=Array(R),z=0;z<R;z++)ae[z]=pe}if(!p(J)){var we=J;for(J=Array(R),z=0;z<R;z++)J[z]=we}if(!p(X)){var Te=X;for(X=Array(R),z=0;z<R;z++)X[z]=Te}for(Y.symbols=J,Y.angles=X,Y.colors=ae,Y.borderColors=ce,z=0;z<R;z++)B&&(U=a.isOpenSymbol(j.symbol[z])),U&&(ce[z]=ae[z].slice(),ae[z]=ae[z].slice(),ae[z][3]=0);for(Y.opacity=O.opacity,Y.markers=new Array(R),z=0;z<R;z++)Y.markers[z]=P({mx:Y.symbols[z],ma:Y.angles[z]},O)}else U?(Y.color=o(j.color,"uint8"),Y.color[3]=0,Y.borderColor=o(j.color,"uint8")):(Y.color=o(j.color,"uint8"),Y.borderColor=o(j.line.color,"uint8")),Y.opacity=O.opacity*j.opacity,Y.marker=P({mx:j.symbol,ma:j.angle},O);var ye,ve=n(O,1);if(ee||$){var xe,Ce=Y.sizes=new Array(R),Oe=Y.borderSizes=new Array(R),be=0;if(ee){for(z=0;z<R;z++)Ce[z]=ve(j.size[z]),be+=Ce[z];xe=be/R}else for(ye=ve(j.size),z=0;z<R;z++)Ce[z]=ye;if($)for(z=0;z<R;z++)Oe[z]=j.line.width[z];else for(ye=j.line.width,z=0;z<R;z++)Oe[z]=ye;Y.sizeAvg=xe}else Y.size=ve(j&&j.size||10),Y.borderSizes=ve(j.line.width);return Y}function g(I,O,z){var R={};return z&&(z.marker&&z.marker.symbol?R=m(0,_.extendFlat({},O.marker,z.marker)):z.marker&&(z.marker.size&&(R.size=z.marker.size),z.marker.color&&(R.colors=z.marker.color),void 0!==z.marker.opacity&&(R.opacity=z.marker.opacity))),R}function x(I,O,z){var U={};if(!z)return U;if(z.textfont){var R={opacity:1,text:O.text,texttemplate:O.texttemplate,textposition:O.textposition,textfont:_.extendFlat({},O.textfont)};z.textfont&&_.extendFlat(R.textfont,z.textfont),U=y(I,R)}return U}function v(I,O,z){var U={capSize:2*O.width*z,lineWidth:O.thickness*z,color:O.color};return O.copy_ystyle&&(U=I.error_y),U}var b=s.SYMBOL_SDF_SIZE,h=s.SYMBOL_SIZE,S=s.SYMBOL_STROKE,w={},E=l.symbolFuncs[0](.05*h);function P(I,O){var z,U,R=I.mx;if("circle"===R)return null;var j=l.symbolNumber(R),Y=l.symbolFuncs[j%100],B=!!l.symbolNoDot[j%100],V=!!l.symbolNoFill[j%100],q=a.isDotSymbol(R);if(I.ma&&(R+="_"+I.ma),w[R])return w[R];var ie=l.getMarkerAngle(I,O);return z=q&&!B?Y(1.1*h,ie)+E:Y(h,ie),U=k(z,{w:b,h:b,viewBox:[-h,-h,h,h],stroke:V?S:-S}),w[R]=U,U||null}ne.exports={style:function(I,O){var z,U={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},R=I._context.plotGlPixelRatio;if(!0!==O.visible)return U;if(r.hasText(O)&&(U.text=y(I,O),U.textSel=x(I,O,O.selected),U.textUnsel=x(I,O,O.unselected)),r.hasMarkers(O)&&(U.marker=m(0,O),U.markerSel=g(0,O,O.selected),U.markerUnsel=g(0,O,O.unselected),!O.unselected&&p(O.marker.opacity))){var j=O.marker.opacity;for(U.markerUnsel.opacity=new Array(j.length),z=0;z<j.length;z++)U.markerUnsel.opacity[z]=u*j[z]}if(r.hasLines(O)){U.line={overlay:!0,thickness:O.line.width*R,color:O.line.color,opacity:O.opacity};var Y=(s.DASHES[O.line.dash]||[1]).slice();for(z=0;z<Y.length;++z)Y[z]*=O.line.width*R;U.line.dashes=Y}return O.error_x&&O.error_x.visible&&(U.errorX=v(O,O.error_x,R)),O.error_y&&O.error_y.visible&&(U.errorY=v(O,O.error_y,R)),O.fill&&"none"!==O.fill&&(U.fill={closed:!0,fill:O.fillcolor,thickness:0}),U},markerStyle:m,markerSelection:g,linePositions:function(I,O,z){var U,R,j=z.length,Y=j/2;if(r.hasLines(O)&&Y)if("hv"===O.line.shape){for(U=[],R=0;R<Y-1;R++)isNaN(z[2*R])||isNaN(z[2*R+1])?U.push(NaN,NaN,NaN,NaN):(U.push(z[2*R],z[2*R+1]),isNaN(z[2*R+2])||isNaN(z[2*R+3])?U.push(NaN,NaN):U.push(z[2*R+2],z[2*R+1]));U.push(z[j-2],z[j-1])}else if("hvh"===O.line.shape){for(U=[],R=0;R<Y-1;R++)if(isNaN(z[2*R])||isNaN(z[2*R+1])||isNaN(z[2*R+2])||isNaN(z[2*R+3]))isNaN(z[2*R])||isNaN(z[2*R+1])?U.push(NaN,NaN):U.push(z[2*R],z[2*R+1]),U.push(NaN,NaN);else{var B=(z[2*R]+z[2*R+2])/2;U.push(z[2*R],z[2*R+1],B,z[2*R+1],B,z[2*R+3])}U.push(z[j-2],z[j-1])}else if("vhv"===O.line.shape){for(U=[],R=0;R<Y-1;R++)if(isNaN(z[2*R])||isNaN(z[2*R+1])||isNaN(z[2*R+2])||isNaN(z[2*R+3]))isNaN(z[2*R])||isNaN(z[2*R+1])?U.push(NaN,NaN):U.push(z[2*R],z[2*R+1]),U.push(NaN,NaN);else{var V=(z[2*R+1]+z[2*R+3])/2;U.push(z[2*R],z[2*R+1],z[2*R],V,z[2*R+2],V)}U.push(z[j-2],z[j-1])}else if("vh"===O.line.shape){for(U=[],R=0;R<Y-1;R++)isNaN(z[2*R])||isNaN(z[2*R+1])?U.push(NaN,NaN,NaN,NaN):(U.push(z[2*R],z[2*R+1]),isNaN(z[2*R+2])||isNaN(z[2*R+3])?U.push(NaN,NaN):U.push(z[2*R],z[2*R+3]));U.push(z[j-2],z[j-1])}else U=z;var q=!1;for(R=0;R<U.length;R++)if(isNaN(U[R])){q=!0;break}var ie=q||U.length>s.TOO_MANY_POINTS||r.hasMarkers(O)?"rect":"round";if(q&&O.connectgaps){var te=U[0],ee=U[1];for(R=0;R<U.length;R+=2)isNaN(U[R])||isNaN(U[R+1])?(U[R]=te,U[R+1]=ee):(te=U[R],ee=U[R+1])}return{join:ie,positions:U}},errorBarPositions:function(I,O,z,U,R){var j=T.getComponentMethod("errorbars","makeComputeError"),Y=t.getFromId(I,O.xaxis,"x"),B=t.getFromId(I,O.yaxis,"y"),V=z.length/2,q={};function ie(te,ee){var $=ee._id.charAt(0),J=O["error_"+$];if(J&&J.visible&&("linear"===ee.type||"log"===ee.type)){for(var X=j(J),ae={x:0,y:1}[$],ce={x:[0,1,2,3],y:[2,3,0,1]}[$],le=new Float64Array(4*V),pe=1/0,we=-1/0,Te=0,ye=0;Te<V;Te++,ye+=4){var ve=te[Te];if(M(ve)){var xe=z[2*Te+ae],Ce=X(ve,Te),Oe=Ce[0],be=Ce[1];if(M(Oe)&&M(be)){var se=ve+be;le[ye+ce[0]]=xe-ee.c2l(ve-Oe),le[ye+ce[1]]=ee.c2l(se)-xe,le[ye+ce[2]]=0,le[ye+ce[3]]=0,pe=Math.min(pe,ve-Oe),we=Math.max(we,ve+be)}}}q[$]={positions:z,errors:le,_bnds:[pe,we]}}}return ie(U,Y),ie(R,B),q},textPosition:function(I,O,z,U){var R,j=O._length,Y={};if(r.hasMarkers(O)){var B=z.font,V=z.align,q=z.baseline;for(Y.offset=new Array(j),R=0;R<j;R++){var ie=U.sizes?U.sizes[R]:U.size,te=p(B)?B[R].size:B.size,ee=p(V)?V.length>1?V[R]:V[0]:V,$=p(q)?q.length>1?q[R]:q[0]:q,X=f[$],ae=ie?ie/.8+1:0;Y.offset[R]=[f[ee]*ae/te,(-X*ae-.5*X)/te]}}return Y}}},80220:function(ne,F,e){"use strict";var M=e(3400),k=e(24040),o=e(80088),T=e(2876),_=e(88200),p=e(43028),l=e(43980),t=e(31147),i=e(74428),r=e(66828),n=e(70840),a=e(124);ne.exports=function(s,u,f,c){function y(S,w){return M.coerce(s,u,T,S,w)}var d=!!s.marker&&o.isOpenSymbol(s.marker.symbol),m=p.isBubble(s),g=l(s,u,c,y);if(g){t(s,u,c,y),y("xhoverformat"),y("yhoverformat");var x=g<_.PTS_LINESONLY?"lines+markers":"lines";y("text"),y("hovertext"),y("hovertemplate"),y("mode",x),p.hasMarkers(u)&&(i(s,u,f,c,y,{noAngleRef:!0,noStandOff:!0}),y("marker.line.width",d||m?1:0)),p.hasLines(u)&&(y("connectgaps"),r(s,u,f,c,y),y("line.shape")),p.hasText(u)&&(y("texttemplate"),a(s,u,c,y,{noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}));var v=(u.line||{}).color,b=(u.marker||{}).color;y("fill"),"none"!==u.fill&&n(s,u,f,y);var h=k.getComponentMethod("errorbars","supplyDefaults");h(s,u,v||b||f,{axis:"y"}),h(s,u,v||b||f,{axis:"x",inherit:"y"}),M.coerceSelectionMarkerOpacity(u,y)}else u.visible=!1}},26768:function(ne,F,e){"use strict";var M=e(3400),k=e(76308),o=e(13448).DESELECTDIM;ne.exports={styleTextSelection:function(T){var _,p,l=T[0],t=l.trace,i=l.t,r=i._scene,n=i.index,a=r.selectBatch[n],s=r.unselectBatch[n],u=r.textOptions[n],f=r.textSelectedOptions[n]||{},c=r.textUnselectedOptions[n]||{},y=M.extendFlat({},u);if(a.length||s.length){var d=f.color,m=c.color,g=u.color,x=M.isArrayOrTypedArray(g);for(y.color=new Array(t._length),_=0;_<a.length;_++)y.color[p=a[_]]=d||(x?g[p]:g);for(_=0;_<s.length;_++){p=s[_];var v=x?g[p]:g;y.color[p]=m||(d?v:k.addOpacity(v,o))}}r.glText[n].update(y)}}},99396:function(ne,F,e){"use strict";var M=e(76688);ne.exports=function(k,o,T){var _=k.i;return"x"in k||(k.x=o._x[_]),"y"in k||(k.y=o._y[_]),M(k,o,T)}},80088:function(ne,F,e){"use strict";var M=e(67072);F.isOpenSymbol=function(k){return"string"==typeof k?M.OPEN_RE.test(k):k%200>100},F.isDotSymbol=function(k){return"string"==typeof k?M.DOT_RE.test(k):k>200}},41272:function(ne,F,e){"use strict";var M=e(24040),k=e(3400),o=e(44928);function T(_,p,l,t){var i=_.xa,r=_.ya,n=_.distance,a=_.dxy,s=_.index,u={pointNumber:s,x:p[s],y:l[s]};u.tx=k.isArrayOrTypedArray(t.text)?t.text[s]:t.text,u.htx=Array.isArray(t.hovertext)?t.hovertext[s]:t.hovertext,u.data=Array.isArray(t.customdata)?t.customdata[s]:t.customdata,u.tp=Array.isArray(t.textposition)?t.textposition[s]:t.textposition;var f=t.textfont;f&&(u.ts=k.isArrayOrTypedArray(f.size)?f.size[s]:f.size,u.tc=k.isArrayOrTypedArray(f.color)?f.color[s]:f.color,u.tf=Array.isArray(f.family)?f.family[s]:f.family,u.tw=Array.isArray(f.weight)?f.weight[s]:f.weight,u.ty=Array.isArray(f.style)?f.style[s]:f.style,u.tv=Array.isArray(f.variant)?f.variant[s]:f.variant);var c=t.marker;c&&(u.ms=k.isArrayOrTypedArray(c.size)?c.size[s]:c.size,u.mo=k.isArrayOrTypedArray(c.opacity)?c.opacity[s]:c.opacity,u.mx=k.isArrayOrTypedArray(c.symbol)?c.symbol[s]:c.symbol,u.ma=k.isArrayOrTypedArray(c.angle)?c.angle[s]:c.angle,u.mc=k.isArrayOrTypedArray(c.color)?c.color[s]:c.color);var y=c&&c.line;y&&(u.mlc=Array.isArray(y.color)?y.color[s]:y.color,u.mlw=k.isArrayOrTypedArray(y.width)?y.width[s]:y.width);var d=c&&c.gradient;d&&"none"!==d.type&&(u.mgt=Array.isArray(d.type)?d.type[s]:d.type,u.mgc=Array.isArray(d.color)?d.color[s]:d.color);var m=i.c2p(u.x,!0),g=r.c2p(u.y,!0),x=u.mrc||1,v=t.hoverlabel;v&&(u.hbg=Array.isArray(v.bgcolor)?v.bgcolor[s]:v.bgcolor,u.hbc=Array.isArray(v.bordercolor)?v.bordercolor[s]:v.bordercolor,u.hts=k.isArrayOrTypedArray(v.font.size)?v.font.size[s]:v.font.size,u.htc=Array.isArray(v.font.color)?v.font.color[s]:v.font.color,u.htf=Array.isArray(v.font.family)?v.font.family[s]:v.font.family,u.hnl=k.isArrayOrTypedArray(v.namelength)?v.namelength[s]:v.namelength);var b=t.hoverinfo;b&&(u.hi=Array.isArray(b)?b[s]:b);var h=t.hovertemplate;h&&(u.ht=Array.isArray(h)?h[s]:h);var S={};S[_.index]=u;var w=t._origX,E=t._origY,P=k.extendFlat({},_,{color:o(t,u),x0:m-x,x1:m+x,xLabelVal:w?w[s]:u.x,y0:g-x,y1:g+x,yLabelVal:E?E[s]:u.y,cd:S,distance:n,spikeDistance:a,hovertemplate:u.ht});return u.htx?P.text=u.htx:u.tx?P.text=u.tx:t.text&&(P.text=t.text),k.fillText(u,t,P),M.getComponentMethod("errorbars","hoverInfo")(u,t,P),P}ne.exports={hoverPoints:function(_,p,l,t){var i,r,n,a,s,u,f,c,y,d,m=_.cd,g=m[0].t,x=m[0].trace,v=_.xa,b=_.ya,h=g.x,S=g.y,w=v.c2p(p),E=b.c2p(l),P=_.distance;if(g.tree){var I=v.p2c(w-P),O=v.p2c(w+P),z=b.p2c(E-P),U=b.p2c(E+P);i="x"===t?g.tree.range(Math.min(I,O),Math.min(b._rl[0],b._rl[1]),Math.max(I,O),Math.max(b._rl[0],b._rl[1])):g.tree.range(Math.min(I,O),Math.min(z,U),Math.max(I,O),Math.max(z,U))}else i=g.ids;var R=P;if("x"===t){var j=!!x.xperiodalignment,Y=!!x.yperiodalignment;for(u=0;u<i.length;u++){if(a=h[r=i[u]],f=Math.abs(v.c2p(a)-w),j){var B=v.c2p(x._xStarts[r]),V=v.c2p(x._xEnds[r]);f=w>=Math.min(B,V)&&w<=Math.max(B,V)?0:1/0}if(f<R){if(R=f,c=b.c2p(s=S[r])-E,Y){var q=b.c2p(x._yStarts[r]),ie=b.c2p(x._yEnds[r]);c=E>=Math.min(q,ie)&&E<=Math.max(q,ie)?0:1/0}d=Math.sqrt(f*f+c*c),n=i[u]}}}else for(u=i.length-1;u>-1;u--)a=h[r=i[u]],s=S[r],f=v.c2p(a)-w,c=b.c2p(s)-E,(y=Math.sqrt(f*f+c*c))<R&&(R=d=y,n=r);return _.index=n,_.distance=R,_.dxy=d,void 0===n?[_]:[T(_,h,S,x)]},calcHover:T}},38983:function(ne,F,e){"use strict";var M=e(64628);M.plot=e(89876),ne.exports=M},89876:function(ne,F,e){"use strict";var M=e(38540),k=e(13472),o=e(24544),T=e(23352),_=e(3400),p=e(72760).selectMode,l=e(5048),t=e(43028),i=e(14328),r=e(26768).styleTextSelection,n={};function a(s,u,f,c){var y=s._size,h=y.w*c,S=y.h*c;return[y.l*c+u.domain[0]*h,y.b*c+f.domain[0]*S,s.width*c-y.r*c-(1-u.domain[1])*h,s.height*c-y.t*c-(1-f.domain[1])*S]}(ne.exports=function(s,u,f){if(f.length){var c,y,d=s._fullLayout,m=u._scene,g=u.xaxis,x=u.yaxis;if(m)if(l(s,["ANGLE_instanced_arrays","OES_element_index_uint"],n)){var v=m.count,b=d._glcanvas.data()[0].regl;if(i(s,u,f),m.dirty){if(!m.line2d&&!m.error2d||m.scatter2d||m.fill2d||m.glText||b.clear({}),!0===m.error2d&&(m.error2d=o(b)),!0===m.line2d&&(m.line2d=k(b)),!0===m.scatter2d&&(m.scatter2d=M(b)),!0===m.fill2d&&(m.fill2d=k(b)),!0===m.glText)for(m.glText=new Array(v),c=0;c<v;c++)m.glText[c]=new T(b);if(m.glText){if(v>m.glText.length){var h=v-m.glText.length;for(c=0;c<h;c++)m.glText.push(new T(b))}else v<m.glText.length&&m.glText.splice(v,m.glText.length-v).forEach(function(ae){ae.destroy()});for(c=0;c<v;c++)m.glText[c].update(m.textOptions[c])}if(m.line2d&&(m.line2d.update(m.lineOptions),m.lineOptions=m.lineOptions.map(function(ae){if(ae&&ae.positions){for(var ce=ae.positions,le=0;le<ce.length&&(isNaN(ce[le])||isNaN(ce[le+1]));)le+=2;for(var pe=ce.length-2;pe>le&&(isNaN(ce[pe])||isNaN(ce[pe+1]));)pe-=2;ae.positions=ce.slice(le,pe+2)}return ae}),m.line2d.update(m.lineOptions)),m.error2d){var w=(m.errorXOptions||[]).concat(m.errorYOptions||[]);m.error2d.update(w)}m.scatter2d&&m.scatter2d.update(m.markerOptions),m.fillOrder=_.repeat(null,v),m.fill2d&&(m.fillOptions=m.fillOptions.map(function(ae,ce){var le=f[ce];if(ae&&le&&le[0]&&le[0].trace){var pe,we,Te=le[0],ye=Te.trace,ve=Te.t,xe=m.lineOptions[ce],Ce=[];ye._ownfill&&Ce.push(ce),ye._nexttrace&&Ce.push(ce+1),Ce.length&&(m.fillOrder[ce]=Ce);var Oe,be,ue=[],se=xe&&xe.positions||ve.positions;if("tozeroy"===ye.fill){for(Oe=0;Oe<se.length&&isNaN(se[Oe+1]);)Oe+=2;for(be=se.length-2;be>Oe&&isNaN(se[be+1]);)be-=2;0!==se[Oe+1]&&(ue=[se[Oe],0]),ue=ue.concat(se.slice(Oe,be+2)),0!==se[be+1]&&(ue=ue.concat([se[be],0]))}else if("tozerox"===ye.fill){for(Oe=0;Oe<se.length&&isNaN(se[Oe]);)Oe+=2;for(be=se.length-2;be>Oe&&isNaN(se[be]);)be-=2;0!==se[Oe]&&(ue=[0,se[Oe+1]]),ue=ue.concat(se.slice(Oe,be+2)),0!==se[be]&&(ue=ue.concat([0,se[be+1]]))}else if("toself"===ye.fill||"tonext"===ye.fill){for(ue=[],pe=0,ae.splitNull=!0,we=0;we<se.length;we+=2)(isNaN(se[we])||isNaN(se[we+1]))&&((ue=ue.concat(se.slice(pe,we))).push(se[pe],se[pe+1]),ue.push(null,null),pe=we+2);ue=ue.concat(se.slice(pe)),pe&&ue.push(se[pe],se[pe+1])}else{var ge=ye._nexttrace;if(ge){var Ie=m.lineOptions[ce+1];if(Ie){var ke=Ie.positions;if("tonexty"===ye.fill){for(ue=se.slice(),ce=Math.floor(ke.length/2);ce--;){var Se=ke[2*ce],Pe=ke[2*ce+1];isNaN(Se)||isNaN(Pe)||ue.push(Se,Pe)}ae.fill=ge.fillcolor}}}}if(ye._prevtrace&&"tonext"===ye._prevtrace.fill){var Fe=m.lineOptions[ce-1].positions,Be=ue.length/2,me=[pe=Be];for(we=0;we<Fe.length;we+=2)(isNaN(Fe[we])||isNaN(Fe[we+1]))&&(me.push(we/2+Be+1),pe=we+2);ue=ue.concat(Fe),ae.hole=me}return ae.fillmode=ye.fill,ae.opacity=ye.opacity,ae.positions=ue,ae}}),m.fill2d.update(m.fillOptions))}var P=p(d.dragmode),I=d.clickmode.indexOf("select")>-1;for(c=0;c<v;c++){var O=f[c][0],z=O.trace,U=O.t,R=U.index,j=z._length,Y=U.x,B=U.y;if(z.selectedpoints||P||I){if(P||(P=!0),z.selectedpoints){var V=m.selectBatch[R]=_.selIndices2selPoints(z),q={};for(y=0;y<V.length;y++)q[V[y]]=1;var ie=[];for(y=0;y<j;y++)q[y]||ie.push(y);m.unselectBatch[R]=ie}var te=U.xpx=new Array(j),ee=U.ypx=new Array(j);for(y=0;y<j;y++)te[y]=g.c2p(Y[y]),ee[y]=x.c2p(B[y])}else U.xpx=U.ypx=null}if(P){if(m.select2d||(m.select2d=M(d._glcanvas.data()[1].regl)),m.scatter2d){var $=new Array(v);for(c=0;c<v;c++)$[c]=m.selectBatch[c].length||m.unselectBatch[c].length?m.markerUnselectedOptions[c]:{};m.scatter2d.update($)}m.select2d&&(m.select2d.update(m.markerOptions),m.select2d.update(m.markerSelectedOptions)),m.glText&&f.forEach(function(ae){t.hasText(((ae||[])[0]||{}).trace||{})&&r(ae)})}else m.scatter2d&&m.scatter2d.update(m.markerOptions);var J={viewport:a(d,g,x,s._context.plotGlPixelRatio),range:[(g._rl||g.range)[0],(x._rl||x.range)[0],(g._rl||g.range)[1],(x._rl||x.range)[1]]},X=_.repeat(J,m.count);m.fill2d&&m.fill2d.update(X),m.line2d&&m.line2d.update(X),m.error2d&&m.error2d.update(X.concat(X)),m.scatter2d&&m.scatter2d.update(X),m.select2d&&m.select2d.update(X),m.glText&&m.glText.forEach(function(ae){ae.update(J)})}else m.init()}}).reglPrecompiled=n},74588:function(ne,F,e){"use strict";var M=e(3400);ne.exports=function(k,o){var T=o._scene,_={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},p={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return o._scene||((T=o._scene={}).init=function(){M.extendFlat(T,p,_)},T.init(),T.update=function(l){var t=M.repeat(l,T.count);if(T.fill2d&&T.fill2d.update(t),T.scatter2d&&T.scatter2d.update(t),T.line2d&&T.line2d.update(t),T.error2d&&T.error2d.update(t.concat(t)),T.select2d&&T.select2d.update(t),T.glText)for(var i=0;i<T.count;i++)T.glText[i].update(l)},T.draw=function(){for(var l=T.count,t=T.fill2d,i=T.error2d,r=T.line2d,n=T.scatter2d,a=T.glText,s=T.select2d,u=T.selectBatch,f=T.unselectBatch,c=0;c<l;c++){if(t&&T.fillOrder[c]&&t.draw(T.fillOrder[c]),r&&T.lineOptions[c]&&r.draw(c),i&&(T.errorXOptions[c]&&i.draw(c),T.errorYOptions[c]&&i.draw(c+l)),n&&T.markerOptions[c])if(f[c].length){var y=M.repeat([],T.count);y[c]=f[c],n.draw(y)}else u[c].length||n.draw(c);a[c]&&T.textOptions[c]&&a[c].render()}s&&s.draw(u),T.dirty=!1},T.destroy=function(){T.fill2d&&T.fill2d.destroy&&T.fill2d.destroy(),T.scatter2d&&T.scatter2d.destroy&&T.scatter2d.destroy(),T.error2d&&T.error2d.destroy&&T.error2d.destroy(),T.line2d&&T.line2d.destroy&&T.line2d.destroy(),T.select2d&&T.select2d.destroy&&T.select2d.destroy(),T.glText&&T.glText.forEach(function(l){l.destroy&&l.destroy()}),T.lineOptions=null,T.fillOptions=null,T.markerOptions=null,T.markerSelectedOptions=null,T.markerUnselectedOptions=null,T.errorXOptions=null,T.errorYOptions=null,T.textOptions=null,T.textSelectedOptions=null,T.textUnselectedOptions=null,T.selectBatch=null,T.unselectBatch=null,o._scene=null}),T.dirty||M.extendFlat(T,_),T}},73224:function(ne,F,e){"use strict";var M=e(43028),k=e(26768).styleTextSelection;ne.exports=function(o,T){var _=o.cd,p=o.xaxis,l=o.yaxis,t=[],i=_[0].trace,r=_[0].t,n=i._length,a=r.x,s=r.y,u=r._scene,f=r.index;if(!u)return t;var c=M.hasText(i),y=M.hasMarkers(i);if(!0!==i.visible||!y&&!c)return t;var m=[],g=[];if(!1!==T&&!T.degenerate)for(var x=0;x<n;x++)T.contains([r.xpx[x],r.ypx[x]],!1,x,o)?(m.push(x),t.push({pointNumber:x,x:p.c2d(a[x]),y:l.c2d(s[x])})):g.push(x);if(y){var v=u.scatter2d;if(m.length||g.length){if(!u.selectBatch[f].length&&!u.unselectBatch[f].length){var b=new Array(u.count);b[f]=u.markerUnselectedOptions[f],v.update.apply(v,b)}}else{var h=new Array(u.count);h[f]=u.markerOptions[f],v.update.apply(v,h)}}return u.selectBatch[f]=m,u.unselectBatch[f]=g,c&&k(_),t}},31512:function(ne,F,e){"use strict";var M=e(21776).Ks,k=e(21776).Gw,o=e(98304),T=e(6096),_=e(52904),p=e(5232),l=e(45464),t=e(49084),i=e(92880).extendFlat,r=e(67824).overrideAll,n=e(5232),a=T.line,s=T.marker;ne.exports=r({lon:T.lon,lat:T.lat,cluster:{enabled:{valType:"boolean"},maxzoom:i({},n.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:i({},s.opacity,{dflt:1})},mode:i({},_.mode,{dflt:"markers"}),text:i({},_.text,{}),texttemplate:k({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:i({},_.hovertext,{}),line:{color:a.color,width:a.width},connectgaps:_.connectgaps,marker:i({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:s.opacity,size:s.size,sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode},t("marker")),fill:T.fill,fillcolor:o(),textfont:p.layers.symbol.textfont,textposition:p.layers.symbol.textposition,below:{valType:"string"},selected:{marker:_.selected.marker},unselected:{marker:_.unselected.marker},hoverinfo:i({},l.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:M()},"calc","nested")},79732:function(ne){"use strict";var F=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extrabold Italic","Open Sans Extrabold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];ne.exports={isSupportedFont:function(e){return-1!==F.indexOf(e)}}},59392:function(ne,F,e){"use strict";var M=e(38248),k=e(3400),o=e(39032).BADNUM,T=e(44808),_=e(8932),p=e(43616),l=e(7152),t=e(43028),i=e(79732).isSupportedFont,r=e(89032),n=e(10624).appendArrayPointValue,a=e(72736).NEWLINES,s=e(72736).BR_TAG_ALL;function u(g){return{type:g,geojson:T.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function f(g,x){return k.isArrayOrTypedArray(g)?x?function(v){return M(g[v])?+g[v]:0}:function(v){return g[v]}:g?function(){return g}:c}function c(){return""}function y(g){return g[0]===o}function d(g,x){var v;if(k.isArrayOrTypedArray(g)&&k.isArrayOrTypedArray(x)){v=["step",["get","point_count"],g[0]];for(var b=1;b<g.length;b++)v.push(x[b-1],g[b])}else v=g;return v}function m(g){var x=g.textfont,v=x.family,b=x.style,h=x.weight,S=v.split(" "),w="Italic"===S[S.length-1];w&&S.pop(),w=w||"italic"===b;var E=S.join(" ");return"bold"===h&&-1===S.indexOf("Bold")?E+=" Bold":h<=1e3&&("Metropolis"===S[0]?(E="Metropolis",E+=h>850?" Black":h>750?" Extra Bold":h>650?" Bold":h>550?" Semi Bold":h>450?" Medium":h>350?" Regular":h>250?" Light":h>150?" Extra Light":" Thin"):"Open Sans"===S.slice(0,2).join(" ")?(E="Open Sans",E+=h>750?" Extrabold":h>650?" Bold":h>550?" Semibold":h>350?" Regular":" Light"):"Klokantech Noto Sans"===S.slice(0,3).join(" ")&&(E="Klokantech Noto Sans","CJK"===S[3]&&(E+=" CJK"),E+=h>500?" Bold":" Regular")),w&&(E+=" Italic"),"Open Sans Regular Italic"===E?E="Open Sans Italic":"Open Sans Regular Bold"===E?E="Open Sans Bold":"Open Sans Regular Bold Italic"===E?E="Open Sans Bold Italic":"Klokantech Noto Sans Regular Italic"===E&&(E="Klokantech Noto Sans Italic"),i(E)||(E=v),E.split(", ")}ne.exports=function(g,x){var v,b=x[0].trace,h=!0===b.visible&&0!==b._length,S="none"!==b.fill,w=t.hasLines(b),E=t.hasMarkers(b),P=t.hasText(b),I=E&&"circle"===b.marker.symbol,O=E&&"circle"!==b.marker.symbol,z=b.cluster&&b.cluster.enabled,U=u("fill"),R=u("line"),j=u("circle"),Y=u("symbol"),B={fill:U,line:R,circle:j,symbol:Y};if(!h)return B;if((S||w)&&(v=T.calcTraceToLineCoords(x)),S&&(U.geojson=T.makePolygon(v),U.layout.visibility="visible",k.extendFlat(U.paint,{"fill-color":b.fillcolor})),w&&(R.geojson=T.makeLine(v),R.layout.visibility="visible",k.extendFlat(R.paint,{"line-width":b.line.width,"line-color":b.line.color,"line-opacity":b.opacity})),I){var V=function(te){var ee,$,J,X,ae=te[0].trace,ce=ae.marker,le=ae.selectedpoints,pe=k.isArrayOrTypedArray(ce.color),we=k.isArrayOrTypedArray(ce.size),Te=k.isArrayOrTypedArray(ce.opacity);function ye(ge){return ae.opacity*ge}pe&&($=_.hasColorscale(ae,"marker")?_.makeColorScaleFuncFromTrace(ce):k.identity),we&&(J=l(ae)),Te&&(X=function(ge){return ye(M(ge)?+k.constrain(ge,0,1):0)});var ve,xe,Ce=[];for(ee=0;ee<te.length;ee++){var Oe=te[ee],be=Oe.lonlat;if(!y(be)){var ue={};$&&(ue.mcc=Oe.mcc=$(Oe.mc)),J&&(ue.mrc=Oe.mrc=J(Oe.ms)),X&&(ue.mo=X(Oe.mo)),le&&(ue.selected=Oe.selected||0),Ce.push({type:"Feature",id:ee+1,geometry:{type:"Point",coordinates:be},properties:ue})}}if(le)for(ve=p.makeSelectedPointStyleFns(ae),ee=0;ee<Ce.length;ee++){var se=Ce[ee].properties;ve.selectedOpacityFn&&(se.mo=ye(ve.selectedOpacityFn(se))),ve.selectedColorFn&&(se.mcc=ve.selectedColorFn(se)),ve.selectedSizeFn&&(se.mrc=ve.selectedSizeFn(se))}return{geojson:{type:"FeatureCollection",features:Ce},mcc:pe||ve&&ve.selectedColorFn?{type:"identity",property:"mcc"}:ce.color,mrc:we||ve&&ve.selectedSizeFn?{type:"identity",property:"mrc"}:(xe=ce.size,xe/2),mo:Te||ve&&ve.selectedOpacityFn?{type:"identity",property:"mo"}:ye(ce.opacity)}}(x);j.geojson=V.geojson,j.layout.visibility="visible",z&&(j.filter=["!",["has","point_count"]],B.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":d(b.cluster.color,b.cluster.step),"circle-radius":d(b.cluster.size,b.cluster.step),"circle-opacity":d(b.cluster.opacity,b.cluster.step)}},B.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":m(b),"text-size":12}}),k.extendFlat(j.paint,{"circle-color":V.mcc,"circle-radius":V.mrc,"circle-opacity":V.mo})}if(I&&z&&(j.filter=["!",["has","point_count"]]),(O||P)&&(Y.geojson=function(te,ee){for(var $=ee._fullLayout,J=te[0].trace,X=J.marker||{},ae=X.symbol,ce=X.angle,le="circle"!==ae?f(ae):c,pe="auto"!==ce?f(ce,!0):c,we=t.hasText(J)?f(J.text):c,Te=[],ye=0;ye<te.length;ye++){var ve=te[ye];if(!y(ve.lonlat)){var xe,Ce=J.texttemplate;if(Ce){var Oe=Array.isArray(Ce)?Ce[ye]||"":Ce,be=J._module.formatLabels(ve,J,$),ue={};n(ue,J,ve.i),xe=k.texttemplateString(Oe,be,$._d3locale,ue,ve,J._meta||{})}else xe=we(ye);xe&&(xe=xe.replace(a,"").replace(s,"\n")),Te.push({type:"Feature",geometry:{type:"Point",coordinates:ve.lonlat},properties:{symbol:le(ye),angle:pe(ye),text:xe}})}}return{type:"FeatureCollection",features:Te}}(x,g),k.extendFlat(Y.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),O&&(k.extendFlat(Y.layout,{"icon-size":b.marker.size/10}),"angle"in b.marker&&"auto"!==b.marker.angle&&k.extendFlat(Y.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),Y.layout["icon-allow-overlap"]=b.marker.allowoverlap,k.extendFlat(Y.paint,{"icon-opacity":b.opacity*b.marker.opacity,"icon-color":b.marker.color})),P)){var ie=r(b.textposition,(b.marker||{}).size);k.extendFlat(Y.layout,{"text-size":b.textfont.size,"text-anchor":ie.anchor,"text-offset":ie.offset,"text-font":m(b)}),k.extendFlat(Y.paint,{"text-color":b.textfont.color,"text-opacity":b.opacity})}return B}},15752:function(ne,F,e){"use strict";var M=e(3400),k=e(43028),o=e(74428),T=e(66828),_=e(124),p=e(70840),l=e(31512),t=e(79732).isSupportedFont;ne.exports=function(i,r,n,a){function s(b,h){return M.coerce(i,r,l,b,h)}function u(b,h){return M.coerce2(i,r,l,b,h)}var h,S,w,E,P;if(h=r,w=(S=s)("lon")||[],E=S("lat")||[],P=Math.min(w.length,E.length),h._length=P,P){if(s("text"),s("texttemplate"),s("hovertext"),s("hovertemplate"),s("mode"),s("below"),k.hasMarkers(r)){o(i,r,n,a,s,{noLine:!0,noAngle:!0}),s("marker.allowoverlap"),s("marker.angle");var c=r.marker;"circle"!==c.symbol&&(M.isArrayOrTypedArray(c.size)&&(c.size=c.size[0]),M.isArrayOrTypedArray(c.color)&&(c.color=c.color[0]))}k.hasLines(r)&&(T(i,r,n,a,s,{noDash:!0}),s("connectgaps"));var y=u("cluster.maxzoom"),d=u("cluster.step"),m=u("cluster.color",r.marker&&r.marker.color||n),g=u("cluster.size"),x=u("cluster.opacity");if(s("cluster.enabled",!1!==y||!1!==d||!1!==m||!1!==g||!1!==x)||k.hasText(r)){var v=a.font.family;_(i,r,a,s,{noSelect:!0,noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,font:{family:t(v)?v:"Open Sans Regular",weight:a.font.weight,style:a.font.style,size:a.font.size,color:a.font.color}})}s("fill"),"none"!==r.fill&&p(i,r,n,s),M.coerceSelectionMarkerOpacity(r,s)}else r.visible=!1}},37920:function(ne){"use strict";ne.exports=function(F,e){return F.lon=e.lon,F.lat=e.lat,F}},11960:function(ne,F,e){"use strict";var M=e(54460);ne.exports=function(k,o,T){var _={},p=T[o.subplot]._subplot.mockAxis,l=k.lonlat;return _.lonLabel=M.tickText(p,p.c2l(l[0]),!0).text,_.latLabel=M.tickText(p,p.c2l(l[1]),!0).text,_}},63312:function(ne,F,e){"use strict";var M=e(93024),k=e(3400),o=e(44928),T=k.fillText,_=e(39032).BADNUM,p=e(47552).traceLayerPrefix;function l(t,i,r){if(!t.hovertemplate){var n=(i.hi||t.hoverinfo).split("+"),a=-1!==n.indexOf("all"),s=-1!==n.indexOf("lon"),u=-1!==n.indexOf("lat"),f=i.lonlat,c=[];return a||s&&u?c.push("("+y(f[1])+", "+y(f[0])+")"):s?c.push(r.lon+y(f[0])):u&&c.push(r.lat+y(f[1])),(a||-1!==n.indexOf("text"))&&T(i,t,c),c.join("<br>")}function y(d){return d+"\xb0"}}ne.exports={hoverPoints:function(t,i,r){var n=t.cd,a=n[0].trace,s=t.xa,u=t.ya,f=t.subplot,c=[],d=a.cluster&&a.cluster.enabled;if(d){var m=f.map.queryRenderedFeatures(null,{layers:[p+a.uid+"-circle"]});c=m.map(function(O){return O.id})}var g=360*(i>=0?Math.floor((i+180)/360):Math.ceil((i-180)/360)),x=i-g;if(M.getClosest(n,function(O){var z=O.lonlat;if(z[0]===_||d&&-1===c.indexOf(O.i+1))return 1/0;var U=k.modHalf(z[0],360),R=z[1],j=f.project([U,R]),Y=j.x-s.c2p([x,R]),B=j.y-u.c2p([U,r]),V=Math.max(3,O.mrc||0);return Math.max(Math.sqrt(Y*Y+B*B)-V,1-3/V)},t),!1!==t.index){var v=n[t.index],b=v.lonlat,h=[k.modHalf(b[0],360)+g,b[1]],S=s.c2p(h),w=u.c2p(h),E=v.mrc||1;t.x0=S-E,t.x1=S+E,t.y0=w-E,t.y1=w+E;var P={};P[a.subplot]={_subplot:f};var I=a._module.formatLabels(v,a,P);return t.lonLabel=I.lonLabel,t.latLabel=I.latLabel,t.color=o(a,v),t.extraText=l(a,v,n[0].t.labels),t.hovertemplate=a.hovertemplate,[t]}},getExtraText:l}},11572:function(ne,F,e){"use strict";ne.exports={attributes:e(31512),supplyDefaults:e(15752),colorbar:e(5528),formatLabels:e(11960),calc:e(25212),plot:e(9660),hoverPoints:e(63312).hoverPoints,eventData:e(37920),selectPoints:e(404),styleOnSelect:function(M,k){k&&k[0].trace._glTrace.update(k)},moduleType:"trace",name:"scattermapbox",basePlotModule:e(33688),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},9660:function(ne,F,e){"use strict";var M=e(3400),k=e(59392),o=e(47552).traceLayerPrefix,T={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function _(l,t,i,r){this.type="scattermapbox",this.subplot=l,this.uid=t,this.clusterEnabled=i,this.isHidden=r,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol",cluster:"source-"+t+"-circle",clusterCount:"source-"+t+"-circle"},this.layerIds={fill:o+t+"-fill",line:o+t+"-line",circle:o+t+"-circle",symbol:o+t+"-symbol",cluster:o+t+"-cluster",clusterCount:o+t+"-cluster-count"},this.below=null}var p=_.prototype;p.addSource=function(l,t,i){var r={type:"geojson",data:t.geojson};i&&i.enabled&&M.extendFlat(r,{cluster:!0,clusterMaxZoom:i.maxzoom});var n=this.subplot.map.getSource(this.sourceIds[l]);n?n.setData(t.geojson):this.subplot.map.addSource(this.sourceIds[l],r)},p.setSourceData=function(l,t){this.subplot.map.getSource(this.sourceIds[l]).setData(t.geojson)},p.addLayer=function(l,t,i){var r={type:t.type,id:this.layerIds[l],source:this.sourceIds[l],layout:t.layout,paint:t.paint};t.filter&&(r.filter=t.filter);for(var n,a=this.layerIds[l],s=this.subplot.getMapLayers(),u=0;u<s.length;u++)if(s[u].id===a){n=!0;break}n?(this.subplot.setOptions(a,"setLayoutProperty",r.layout),"visible"===r.layout.visibility&&this.subplot.setOptions(a,"setPaintProperty",r.paint)):this.subplot.addLayer(r,i)},p.update=function(l){var t=l[0].trace,i=this.subplot,r=i.map,n=k(i.gd,l),a=i.belowLookup["trace-"+this.uid],s=!(!t.cluster||!t.cluster.enabled),u=!!this.clusterEnabled,f=this;function c(x){u?function(v){for(var b=T.cluster,h=b.length-1;h>=0;h--)r.removeLayer(f.layerIds[b[h]]);v||r.removeSource(f.sourceIds.circle)}(x):function(v){for(var b=T.nonCluster,h=b.length-1;h>=0;h--){var S=b[h];r.removeLayer(f.layerIds[S]),v||r.removeSource(f.sourceIds[S])}}(x)}function y(x){s?function(v){v||f.addSource("circle",n.circle,t.cluster);for(var b=T.cluster,h=0;h<b.length;h++){var S=b[h];f.addLayer(S,n[S],a)}}(x):function(v){for(var b=T.nonCluster,h=0;h<b.length;h++){var S=b[h],w=n[S];v||f.addSource(S,w),f.addLayer(S,w,a)}}(x)}var m=this.isHidden,g=!0!==t.visible;g?m||c():m?g||y():u!==s?(c(),y()):(this.below!==a&&(c(!0),y(!0)),function d(){for(var x=s?T.cluster:T.nonCluster,v=0;v<x.length;v++){var b=x[v],h=n[b];h&&(i.setOptions(f.layerIds[b],"setLayoutProperty",h.layout),"visible"===h.layout.visibility&&("cluster"!==b&&f.setSourceData(b,h),i.setOptions(f.layerIds[b],"setPaintProperty",h.paint)))}}()),this.clusterEnabled=s,this.isHidden=g,this.below=a,l[0].trace._glTrace=this},p.dispose=function(){for(var l=this.subplot.map,t=this.clusterEnabled?T.cluster:T.nonCluster,i=t.length-1;i>=0;i--){var r=t[i];l.removeLayer(this.layerIds[r]),l.removeSource(this.sourceIds[r])}},ne.exports=function(l,t){var i,r,n,a=t[0].trace,s=a.cluster&&a.cluster.enabled,f=new _(l,a.uid,s,!0!==a.visible),c=k(l.gd,t),y=f.below=l.belowLookup["trace-"+a.uid];if(s)for(f.addSource("circle",c.circle,a.cluster),i=0;i<T.cluster.length;i++)n=c[r=T.cluster[i]],f.addLayer(r,n,y);else for(i=0;i<T.nonCluster.length;i++)n=c[r=T.nonCluster[i]],f.addSource(r,n,a.cluster),f.addLayer(r,n,y);return t[0].trace._glTrace=f,f}},404:function(ne,F,e){"use strict";var M=e(3400),k=e(43028),o=e(39032).BADNUM;ne.exports=function(T,_){var p,l=T.cd,t=T.xaxis,i=T.yaxis,r=[];if(!k.hasMarkers(l[0].trace))return[];if(!1===_)for(p=0;p<l.length;p++)l[p].selected=0;else for(p=0;p<l.length;p++){var a=l[p],s=a.lonlat;if(s[0]!==o){var u=[M.modHalf(s[0],360),s[1]],f=[t.c2p(u),i.c2p(u)];_.contains(f,null,p,T)?(r.push({pointNumber:p,lon:s[0],lat:s[1]}),a.selected=1):a.selected=0}}return r}},8319:function(ne,F,e){"use strict";var M=e(21776).Ks,k=e(21776).Gw,o=e(92880).extendFlat,T=e(98304),_=e(52904),p=e(45464),l=_.line;ne.exports={mode:_.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:_.text,texttemplate:k({editType:"plot"},{keys:["r","theta","text"]}),hovertext:_.hovertext,line:{color:l.color,width:l.width,dash:l.dash,backoff:l.backoff,shape:o({},l.shape,{values:["linear","spline"]}),smoothing:l.smoothing,editType:"calc"},connectgaps:_.connectgaps,marker:_.marker,cliponaxis:o({},_.cliponaxis,{dflt:!1}),textposition:_.textposition,textfont:_.textfont,fill:o({},_.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T(),hoverinfo:o({},p.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:_.hoveron,hovertemplate:M(),selected:_.selected,unselected:_.unselected}},58320:function(ne,F,e){"use strict";var M=e(38248),k=e(39032).BADNUM,o=e(54460),T=e(90136),_=e(20148),p=e(4500),l=e(16356).calcMarkerSize;ne.exports=function(t,i){for(var r=t._fullLayout,n=i.subplot,a=r[n].radialaxis,s=r[n].angularaxis,u=a.makeCalcdata(i,"r"),f=s.makeCalcdata(i,"theta"),c=i._length,y=new Array(c),d=0;d<c;d++){var m=u[d],g=f[d],x=y[d]={};M(m)&&M(g)?(x.r=m,x.theta=g):x.r=k}var v=l(i,c);return i._extremes.x=o.findExtremes(a,u,{ppad:v}),T(t,i),_(y,i),p(y,i),y}},85968:function(ne,F,e){"use strict";var M=e(3400),k=e(43028),o=e(74428),T=e(66828),_=e(11731),p=e(124),l=e(70840),t=e(88200).PTS_LINESONLY,i=e(8319);function r(n,a,s,u){var f,c=u("r"),y=u("theta");if(M.isTypedArray(c)&&(a.r=c=Array.from(c)),M.isTypedArray(y)&&(a.theta=y=Array.from(y)),c)y?f=Math.min(c.length,y.length):(f=c.length,u("theta0"),u("dtheta"));else{if(!y)return 0;f=a.theta.length,u("r0"),u("dr")}return a._length=f,f}ne.exports={handleRThetaDefaults:r,supplyDefaults:function(n,a,s,u){function f(d,m){return M.coerce(n,a,i,d,m)}var c=r(0,a,0,f);if(c){f("thetaunit"),f("mode",c<t?"lines+markers":"lines"),f("text"),f("hovertext"),"fills"!==a.hoveron&&f("hovertemplate"),k.hasMarkers(a)&&o(n,a,s,u,f,{gradient:!0}),k.hasLines(a)&&(T(n,a,s,u,f,{backoff:!0}),_(n,a,f),f("connectgaps")),k.hasText(a)&&(f("texttemplate"),p(n,a,u,f));var y=[];(k.hasMarkers(a)||k.hasText(a))&&(f("cliponaxis"),f("marker.maxdisplayed"),y.push("points")),f("fill"),"none"!==a.fill&&(l(n,a,s,f),k.hasLines(a)||_(n,a,f)),"tonext"!==a.fill&&"toself"!==a.fill||y.push("fills"),f("hoveron",y.join("+")||"points"),M.coerceSelectionMarkerOpacity(a,f)}else a.visible=!1}}},22852:function(ne,F,e){"use strict";var M=e(3400),k=e(54460);ne.exports=function(o,T,_){var p,l,t={},i=_[T.subplot]._subplot;i?(p=i.radialAxis,l=i.angularAxis):(p=(i=_[T.subplot]).radialaxis,l=i.angularaxis);var r=p.c2l(o.r);t.rLabel=k.tickText(p,r,!0).text;var n="degrees"===l.thetaunit?M.rad2deg(o.theta):o.theta;return t.thetaLabel=k.tickText(l,n,!0).text,t}},8504:function(ne,F,e){"use strict";var M=e(98723);function k(o,T,_,p){var l=_.radialAxis,t=_.angularAxis;l._hovertitle="r",t._hovertitle="\u03b8";var i={};i[T.subplot]={_subplot:_};var r=T._module.formatLabels(o,T,i);p.rLabel=r.rLabel,p.thetaLabel=r.thetaLabel;var a=[];function s(f,c){a.push(f._hovertitle+": "+c)}if(!T.hovertemplate){var u=(o.hi||T.hoverinfo).split("+");-1!==u.indexOf("all")&&(u=["r","theta","text"]),-1!==u.indexOf("r")&&s(l,p.rLabel),-1!==u.indexOf("theta")&&s(t,p.thetaLabel),-1!==u.indexOf("text")&&p.text&&(a.push(p.text),delete p.text),p.extraText=a.join("<br>")}}ne.exports={hoverPoints:function(o,T,_,p){var l=M(o,T,_,p);if(l&&!1!==l[0].index){var t=l[0];if(void 0===t.index)return l;var i=o.subplot,r=t.cd[t.index],n=t.trace;if(i.isPtInside(r))return t.xLabelVal=void 0,t.yLabelVal=void 0,k(r,n,i,t),t.hovertemplate=n.hovertemplate,l}},makeHoverPointText:k}},76924:function(ne,F,e){"use strict";ne.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:e(40872),categories:["polar","symbols","showLegend","scatter-like"],attributes:e(8319),supplyDefaults:e(85968).supplyDefaults,colorbar:e(5528),formatLabels:e(22852),calc:e(58320),plot:e(43456),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(8504).hoverPoints,selectPoints:e(91560),meta:{}}},43456:function(ne,F,e){"use strict";var M=e(96504),k=e(39032).BADNUM;ne.exports=function(o,T,_){for(var p=T.layers.frontplot.select("g.scatterlayer"),l=T.xaxis,t=T.yaxis,i={xaxis:l,yaxis:t,plot:T.framework,layerClipId:T._hasClipOnAxisFalse?T.clipIds.forTraces:null},r=T.radialAxis,n=T.angularAxis,a=0;a<_.length;a++)for(var s=_[a],u=0;u<s.length;u++){0===u&&(s[0].trace._xA=l,s[0].trace._yA=t);var f=s[u],c=f.r;if(c===k)f.x=f.y=k;else{var y=r.c2g(c),d=n.c2g(f.theta);f.x=y*Math.cos(d),f.y=y*Math.sin(d)}}M(o,i,_,p)}},24396:function(ne,F,e){"use strict";var M=e(8319),k=e(2876),o=e(21776).Gw;ne.exports={mode:M.mode,r:M.r,theta:M.theta,r0:M.r0,dr:M.dr,theta0:M.theta0,dtheta:M.dtheta,thetaunit:M.thetaunit,text:M.text,texttemplate:o({editType:"plot"},{keys:["r","theta","text"]}),hovertext:M.hovertext,hovertemplate:M.hovertemplate,line:{color:k.line.color,width:k.line.width,dash:k.line.dash,editType:"calc"},connectgaps:k.connectgaps,marker:k.marker,fill:k.fill,fillcolor:k.fillcolor,textposition:k.textposition,textfont:k.textfont,hoverinfo:M.hoverinfo,selected:M.selected,unselected:M.unselected}},27160:function(ne,F,e){"use strict";ne.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:e(40872),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:e(24396),supplyDefaults:e(98608),colorbar:e(5528),formatLabels:e(94120),calc:e(66720),hoverPoints:e(1600).hoverPoints,selectPoints:e(73224),meta:{}}},66720:function(ne,F,e){"use strict";var M=e(90136),k=e(16356).calcMarkerSize,o=e(84236),T=e(54460),_=e(67072).TOO_MANY_POINTS;ne.exports=function(p,l){var t=p._fullLayout,i=l.subplot,r=t[i].radialaxis,n=t[i].angularaxis,a=l._r=r.makeCalcdata(l,"r"),s=l._theta=n.makeCalcdata(l,"theta"),u=l._length,f={};u<a.length&&(a=a.slice(0,u)),u<s.length&&(s=s.slice(0,u)),f.r=a,f.theta=s,M(p,l);var c,y=f.opts=o.style(p,l);return u<_?c=k(l,u):y.marker&&(c=2*(y.marker.sizeAvg||Math.max(y.marker.size,3))),l._extremes.x=T.findExtremes(r,a,{ppad:c}),[{x:!1,y:!1,t:f,trace:l}]}},98608:function(ne,F,e){"use strict";var M=e(3400),k=e(43028),o=e(85968).handleRThetaDefaults,T=e(74428),_=e(66828),p=e(124),l=e(70840),t=e(88200).PTS_LINESONLY,i=e(24396);ne.exports=function(r,n,a,s){function u(c,y){return M.coerce(r,n,i,c,y)}var f=o(r,n,s,u);f?(u("thetaunit"),u("mode",f<t?"lines+markers":"lines"),u("text"),u("hovertext"),"fills"!==n.hoveron&&u("hovertemplate"),k.hasMarkers(n)&&T(r,n,a,s,u,{noAngleRef:!0,noStandOff:!0}),k.hasLines(n)&&(_(r,n,a,s,u),u("connectgaps")),k.hasText(n)&&(u("texttemplate"),p(r,n,s,u,{noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0})),u("fill"),"none"!==n.fill&&l(r,n,a,u),M.coerceSelectionMarkerOpacity(n,u)):n.visible=!1}},94120:function(ne,F,e){"use strict";var M=e(22852);ne.exports=function(k,o,T){var _=k.i;return"r"in k||(k.r=o._r[_]),"theta"in k||(k.theta=o._theta[_]),M(k,o,T)}},1600:function(ne,F,e){"use strict";var M=e(41272),k=e(8504).makeHoverPointText;ne.exports={hoverPoints:function(o,T,_,p){var l=o.cd[0].t,t=l.r,i=l.theta,r=M.hoverPoints(o,T,_,p);if(r&&!1!==r[0].index){var n=r[0];if(void 0===n.index)return r;var a=o.subplot,s=n.cd[n.index],u=n.trace;if(s.r=t[n.index],s.theta=i[n.index],a.isPtInside(s))return n.xLabelVal=void 0,n.yLabelVal=void 0,k(s,u,a,n),r}}}},62944:function(ne,F,e){"use strict";var M=e(27160);M.plot=e(56512),ne.exports=M},56512:function(ne,F,e){"use strict";var M=e(3108),k=e(38248),o=e(89876),T=e(74588),_=e(84236),p=e(3400),l=e(67072).TOO_MANY_POINTS;ne.exports=function(t,i,r){if(r.length){var n=i.radialAxis,a=i.angularAxis,s=T(t,i);return r.forEach(function(u){if(u&&u[0]&&u[0].trace){var f,c=u[0],y=c.trace,d=c.t,m=y._length,g=d.r,x=d.theta,v=d.opts,b=g.slice(),h=x.slice();for(f=0;f<g.length;f++)i.isPtInside({r:g[f],theta:x[f]})||(b[f]=NaN,h[f]=NaN);var S=new Array(2*m),w=Array(m),E=Array(m);for(f=0;f<m;f++){var P,I,O=b[f];if(k(O)){var z=n.c2g(O),U=a.c2g(h[f],y.thetaunit);P=z*Math.cos(U),I=z*Math.sin(U)}else P=I=NaN;w[f]=S[2*f]=P,E[f]=S[2*f+1]=I}d.tree=M(S),v.marker&&m>=l&&(v.marker.cluster=d.tree),v.marker&&(v.markerSel.positions=v.markerUnsel.positions=v.marker.positions=S),v.line&&S.length>1&&p.extendFlat(v.line,_.linePositions(t,y,S)),v.text&&(p.extendFlat(v.text,{positions:S},_.textPosition(t,y,v.text,v.marker)),p.extendFlat(v.textSel,{positions:S},_.textPosition(t,y,v.text,v.markerSel)),p.extendFlat(v.textUnsel,{positions:S},_.textPosition(t,y,v.text,v.markerUnsel))),v.fill&&!s.fill2d&&(s.fill2d=!0),v.marker&&!s.scatter2d&&(s.scatter2d=!0),v.line&&!s.line2d&&(s.line2d=!0),v.text&&!s.glText&&(s.glText=!0),s.lineOptions.push(v.line),s.fillOptions.push(v.fill),s.markerOptions.push(v.marker),s.markerSelectedOptions.push(v.markerSel),s.markerUnselectedOptions.push(v.markerUnsel),s.textOptions.push(v.text),s.textSelectedOptions.push(v.textSel),s.textUnselectedOptions.push(v.textUnsel),s.selectBatch.push([]),s.unselectBatch.push([]),d.x=w,d.y=E,d.rawx=w,d.rawy=E,d.r=g,d.theta=x,d.positions=S,d._scene=s,d.index=s.count,s.count++}}),o(t,i,r)}},ne.exports.reglPrecompiled={}},69496:function(ne,F,e){"use strict";var M=e(21776).Ks,k=e(21776).Gw,o=e(92880).extendFlat,T=e(98304),_=e(52904),p=e(45464),l=_.line;ne.exports={mode:_.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:_.text,texttemplate:k({editType:"plot"},{keys:["real","imag","text"]}),hovertext:_.hovertext,line:{color:l.color,width:l.width,dash:l.dash,backoff:l.backoff,shape:o({},l.shape,{values:["linear","spline"]}),smoothing:l.smoothing,editType:"calc"},connectgaps:_.connectgaps,marker:_.marker,cliponaxis:o({},_.cliponaxis,{dflt:!1}),textposition:_.textposition,textfont:_.textfont,fill:o({},_.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T(),hoverinfo:o({},p.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:_.hoveron,hovertemplate:M(),selected:_.selected,unselected:_.unselected}},47507:function(ne,F,e){"use strict";var M=e(38248),k=e(39032).BADNUM,o=e(90136),T=e(20148),_=e(4500),p=e(16356).calcMarkerSize;ne.exports=function(l,t){for(var i=l._fullLayout,r=t.subplot,a=i[r].imaginaryaxis,s=i[r].realaxis.makeCalcdata(t,"real"),u=a.makeCalcdata(t,"imag"),f=t._length,c=new Array(f),y=0;y<f;y++){var d=s[y],m=u[y],g=c[y]={};M(d)&&M(m)?(g.real=d,g.imag=m):g.real=k}return p(t,f),o(l,t),T(c,t),_(c,t),c}},76716:function(ne,F,e){"use strict";var M=e(3400),k=e(43028),o=e(74428),T=e(66828),_=e(11731),p=e(124),l=e(70840),t=e(88200).PTS_LINESONLY,i=e(69496);ne.exports=function(r,n,a,s){function u(y,d){return M.coerce(r,n,i,y,d)}var d,g,x,v,b,f=(d=n,v=(g=u)("real"),b=g("imag"),v&&b&&(x=Math.min(v.length,b.length)),M.isTypedArray(v)&&(d.real=v=Array.from(v)),M.isTypedArray(b)&&(d.imag=b=Array.from(b)),d._length=x,x);if(f){u("mode",f<t?"lines+markers":"lines"),u("text"),u("hovertext"),"fills"!==n.hoveron&&u("hovertemplate"),k.hasMarkers(n)&&o(r,n,a,s,u,{gradient:!0}),k.hasLines(n)&&(T(r,n,a,s,u,{backoff:!0}),_(r,n,u),u("connectgaps")),k.hasText(n)&&(u("texttemplate"),p(r,n,s,u));var c=[];(k.hasMarkers(n)||k.hasText(n))&&(u("cliponaxis"),u("marker.maxdisplayed"),c.push("points")),u("fill"),"none"!==n.fill&&(l(r,n,a,u),k.hasLines(n)||_(r,n,u)),"tonext"!==n.fill&&"toself"!==n.fill||c.push("fills"),u("hoveron",c.join("+")||"points"),M.coerceSelectionMarkerOpacity(n,u)}else n.visible=!1}},49504:function(ne,F,e){"use strict";var M=e(54460);ne.exports=function(k,o,T){var _={},p=T[o.subplot]._subplot;return _.realLabel=M.tickText(p.radialAxis,k.real,!0).text,_.imagLabel=M.tickText(p.angularAxis,k.imag,!0).text,_}},25292:function(ne,F,e){"use strict";var M=e(98723);function k(o,T,_,p){var l=_.radialAxis,t=_.angularAxis;l._hovertitle="real",t._hovertitle="imag";var i={};i[T.subplot]={_subplot:_};var r=T._module.formatLabels(o,T,i);p.realLabel=r.realLabel,p.imagLabel=r.imagLabel;var a=[];function s(f,c){a.push(f._hovertitle+": "+c)}if(!T.hovertemplate){var u=(o.hi||T.hoverinfo).split("+");-1!==u.indexOf("all")&&(u=["real","imag","text"]),-1!==u.indexOf("real")&&s(l,p.realLabel),-1!==u.indexOf("imag")&&s(t,p.imagLabel),-1!==u.indexOf("text")&&p.text&&(a.push(p.text),delete p.text),p.extraText=a.join("<br>")}}ne.exports={hoverPoints:function(o,T,_,p){var l=M(o,T,_,p);if(l&&!1!==l[0].index){var t=l[0];if(void 0===t.index)return l;var i=o.subplot,r=t.cd[t.index],n=t.trace;if(i.isPtInside(r))return t.xLabelVal=void 0,t.yLabelVal=void 0,k(r,n,i,t),t.hovertemplate=n.hovertemplate,l}},makeHoverPointText:k}},95443:function(ne,F,e){"use strict";ne.exports={moduleType:"trace",name:"scattersmith",basePlotModule:e(47788),categories:["smith","symbols","showLegend","scatter-like"],attributes:e(69496),supplyDefaults:e(76716),colorbar:e(5528),formatLabels:e(49504),calc:e(47507),plot:e(34927),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(25292).hoverPoints,selectPoints:e(91560),meta:{}}},34927:function(ne,F,e){"use strict";var M=e(96504),k=e(39032).BADNUM,o=e(36416).smith;ne.exports=function(T,_,p){for(var l=_.layers.frontplot.select("g.scatterlayer"),t=_.xaxis,i=_.yaxis,r={xaxis:t,yaxis:i,plot:_.framework,layerClipId:_._hasClipOnAxisFalse?_.clipIds.forTraces:null},n=0;n<p.length;n++)for(var a=p[n],s=0;s<a.length;s++){0===s&&(a[0].trace._xA=t,a[0].trace._yA=i);var u=a[s],f=u.real;if(f===k)u.x=u.y=k;else{var c=o([f,u.imag]);u.x=c[0],u.y=c[1]}}M(T,r,p,l)}},5896:function(ne,F,e){"use strict";var M=e(21776).Ks,k=e(21776).Gw,o=e(98304),T=e(52904),_=e(45464),p=e(49084),l=e(98192).u,t=e(92880).extendFlat,i=T.marker,r=T.line,n=i.line;ne.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:t({},T.mode,{dflt:"markers"}),text:t({},T.text,{}),texttemplate:k({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:t({},T.hovertext,{}),line:{color:r.color,width:r.width,dash:l,backoff:r.backoff,shape:t({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:T.connectgaps,cliponaxis:T.cliponaxis,fill:t({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:o(),marker:t({symbol:i.symbol,opacity:i.opacity,angle:i.angle,angleref:i.angleref,standoff:i.standoff,maxdisplayed:i.maxdisplayed,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,line:t({width:n.width,editType:"calc"},p("marker.line")),gradient:i.gradient,editType:"calc"},p("marker")),textfont:T.textfont,textposition:T.textposition,selected:T.selected,unselected:T.unselected,hoverinfo:t({},_.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:T.hoveron,hovertemplate:M()}},34335:function(ne,F,e){"use strict";var M=e(38248),k=e(90136),o=e(20148),T=e(4500),_=e(16356).calcMarkerSize,p=["a","b","c"],l={a:["b","c"],b:["a","c"],c:["a","b"]};ne.exports=function(t,i){var r,n,a,s,u,f,c=t._fullLayout[i.subplot].sum,y=i.sum||c,d={a:i.a,b:i.b,c:i.c};for(r=0;r<p.length;r++)if(!d[a=p[r]]){for(u=d[l[a][0]],f=d[l[a][1]],s=new Array(u.length),n=0;n<u.length;n++)s[n]=y-u[n]-f[n];d[a]=s}var m,g,x,v,S=i._length,w=new Array(S);for(r=0;r<S;r++)g=d.b[r],x=d.c[r],M(m=d.a[r])&&M(g)&&M(x)?(1!=(v=c/((m=+m)+(g=+g)+(x=+x)))&&(m*=v,g*=v,x*=v),w[r]={x:x-g,y:m,a:m,b:g,c:x}):w[r]={x:!1,y:!1};return _(i,S),k(t,i),o(w,i),T(w,i),w}},84256:function(ne,F,e){"use strict";var M=e(3400),k=e(88200),o=e(43028),T=e(74428),_=e(66828),p=e(11731),l=e(124),t=e(70840),i=e(5896);ne.exports=function(r,n,a,s){function u(g,x){return M.coerce(r,n,i,g,x)}var f,c=u("a"),y=u("b"),d=u("c");if(c?(f=c.length,y?(f=Math.min(f,y.length),d&&(f=Math.min(f,d.length))):f=d?Math.min(f,d.length):0):y&&d&&(f=Math.min(y.length,d.length)),f){n._length=f,u("sum"),u("text"),u("hovertext"),"fills"!==n.hoveron&&u("hovertemplate"),u("mode",f<k.PTS_LINESONLY?"lines+markers":"lines"),o.hasMarkers(n)&&T(r,n,a,s,u,{gradient:!0}),o.hasLines(n)&&(_(r,n,a,s,u,{backoff:!0}),p(r,n,u),u("connectgaps")),o.hasText(n)&&(u("texttemplate"),l(r,n,s,u));var m=[];(o.hasMarkers(n)||o.hasText(n))&&(u("cliponaxis"),u("marker.maxdisplayed"),m.push("points")),u("fill"),"none"!==n.fill&&(t(r,n,a,u),o.hasLines(n)||p(r,n,u)),"tonext"!==n.fill&&"toself"!==n.fill||m.push("fills"),u("hoveron",m.join("+")||"points"),M.coerceSelectionMarkerOpacity(n,u)}else n.visible=!1}},97476:function(ne){"use strict";ne.exports=function(F,e,M,k,o){if(e.xa&&(F.xaxis=e.xa),e.ya&&(F.yaxis=e.ya),k[o]){var T=k[o];F.a=T.a,F.b=T.b,F.c=T.c}else F.a=e.a,F.b=e.b,F.c=e.c;return F}},90404:function(ne,F,e){"use strict";var M=e(54460);ne.exports=function(k,o,T){var _={},p=T[o.subplot]._subplot;return _.aLabel=M.tickText(p.aaxis,k.a,!0).text,_.bLabel=M.tickText(p.baxis,k.b,!0).text,_.cLabel=M.tickText(p.caxis,k.c,!0).text,_}},26596:function(ne,F,e){"use strict";var M=e(98723);ne.exports=function(k,o,T,_){var p=M(k,o,T,_);if(p&&!1!==p[0].index){var l=p[0];if(void 0===l.index){var i=k.xa._length,r=i*(1-l.y0/k.ya._length)/2,n=i-r;return l.x0=Math.max(Math.min(l.x0,n),r),l.x1=Math.max(Math.min(l.x1,n),r),p}var a=l.cd[l.index],s=l.trace,u=l.subplot;l.a=a.a,l.b=a.b,l.c=a.c,l.xLabelVal=void 0,l.yLabelVal=void 0;var f={};f[s.subplot]={_subplot:u};var c=s._module.formatLabels(a,s,f);l.aLabel=c.aLabel,l.bLabel=c.bLabel,l.cLabel=c.cLabel;var d=[];if(!s.hovertemplate){var m=(a.hi||s.hoverinfo).split("+");-1!==m.indexOf("all")&&(m=["a","b","c"]),-1!==m.indexOf("a")&&g(u.aaxis,l.aLabel),-1!==m.indexOf("b")&&g(u.baxis,l.bLabel),-1!==m.indexOf("c")&&g(u.caxis,l.cLabel)}return l.extraText=d.join("<br>"),l.hovertemplate=s.hovertemplate,p}function g(x,v){d.push(x._hovertitle+": "+v)}}},34864:function(ne,F,e){"use strict";ne.exports={attributes:e(5896),supplyDefaults:e(84256),colorbar:e(5528),formatLabels:e(90404),calc:e(34335),plot:e(88776),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(26596),selectPoints:e(91560),eventData:e(97476),moduleType:"trace",name:"scatterternary",basePlotModule:e(19352),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},88776:function(ne,F,e){"use strict";var M=e(96504);ne.exports=function(k,o,T){var _=o.plotContainer;_.select(".scatterlayer").selectAll("*").remove();for(var p=o.xaxis,l=o.yaxis,t={xaxis:p,yaxis:l,plot:_,layerClipId:o._hasClipOnAxisFalse?o.clipIdRelative:null},i=o.layers.frontplot.select("g.scatterlayer"),r=0;r<T.length;r++){var n=T[r];n.length&&(n[0].trace._xA=p,n[0].trace._yA=l)}M(k,t,T,i)}},44524:function(ne,F,e){"use strict";var M=e(52904),k=e(49084),o=e(29736).axisHoverFormat,T=e(21776).Ks,_=e(2876),p=e(33816).idRegex,l=e(31780).templatedArray,t=e(92880).extendFlat,i=M.marker,r=i.line,n=t(k("marker.line",{editTypeOverride:"calc"}),{width:t({},r.width,{editType:"calc"}),editType:"calc"}),a=t(k("marker"),{symbol:i.symbol,angle:i.angle,size:t({},i.size,{editType:"markerSize"}),sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,opacity:i.opacity,colorbar:i.colorbar,line:n,editType:"calc"});function s(u){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:p[u],editType:"plot"}}}a.color.editType=a.cmin.editType=a.cmax.editType="style",ne.exports={dimensions:l("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:t({},_.text,{}),hovertext:t({},_.hovertext,{}),hovertemplate:T(),xhoverformat:o("x"),yhoverformat:o("y"),marker:a,xaxes:s("x"),yaxes:s("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:_.selected.marker,editType:"calc"},unselected:{marker:_.unselected.marker,editType:"calc"},opacity:_.opacity}},28888:function(ne,F,e){"use strict";var M=e(24040),k=e(12704);ne.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:e(44524),supplyDefaults:e(69544),colorbar:e(5528),calc:e(66821),plot:e(54840),hoverPoints:e(72248).hoverPoints,selectPoints:e(62500),editStyle:e(83156),meta:{}},M.register(k)},99332:function(ne,F,e){"use strict";var M=e(13472),k=e(24040),o=e(5048),T=e(84888)._M,_=e(57952),p=e(79811).getFromId,l=e(54460).shouldShowZeroLine,t="splom",i={};function r(a,s,u){for(var c=s._visibleDims,y=u.viewOpts.ranges=new Array(u.matrixOptions.data.length),d=0;d<c.length;d++){var m=c[d],g=y[d]=new Array(4),x=p(a,s._diag[m][0]);x&&(g[0]=x.r2l(x.range[0]),g[2]=x.r2l(x.range[1]));var v=p(a,s._diag[m][1]);v&&(g[1]=v.r2l(v.range[0]),g[3]=v.r2l(v.range[1]))}u.selectBatch.length||u.unselectBatch.length?u.matrix.update({ranges:y},{ranges:y}):u.matrix.update({ranges:y})}function n(a){var s=a._fullLayout,u=s._glcanvas.data()[0].regl,f=s._splomGrid;f||(f=s._splomGrid=M(u)),f.update(function(c){var y,d=c._context.plotGlPixelRatio,m=c._fullLayout,g=m._size,x=[0,0,m.width*d,m.height*d],v={};function b(q,ie,te,ee,$,J){te*=d,ee*=d,$*=d,J*=d;var X=ie[q+"color"],ae=ie[q+"width"],ce=String(X+ae);ce in v?v[ce].data.push(NaN,NaN,te,ee,$,J):v[ce]={data:[te,ee,$,J],join:"rect",thickness:ae*d,color:X,viewport:x,range:x,overlay:!1}}for(y in m._splomSubplots){var h,S,w=m._plots[y],E=w.xaxis,P=w.yaxis,I=E._gridVals,O=P._gridVals,z=E._offset,U=E._length,R=P._length,j=g.b+P.domain[0]*g.h,Y=-P._m,B=-Y*P.r2l(P.range[0],P.calendar);if(E.showgrid)for(y=0;y<I.length;y++)h=z+E.l2p(I[y].x),b("grid",E,h,j,h,j+R);if(P.showgrid)for(y=0;y<O.length;y++)b("grid",P,z,S=j+B+Y*O[y].x,z+U,S);l(c,E,P)&&(h=z+E.l2p(0),b("zeroline",E,h,j,h,j+R)),l(c,P,E)&&b("zeroline",P,z,S=j+B+0,z+U,S)}var V=[];for(y in v)V.push(v[y]);return V}(a))}ne.exports={name:t,attr:_.attr,attrRegex:_.attrRegex,layoutAttributes:_.layoutAttributes,supplyLayoutDefaults:_.supplyLayoutDefaults,drawFramework:_.drawFramework,plot:function(a){var s=a._fullLayout,u=k.getModule(t),f=T(a.calcdata,u)[0];o(a,["ANGLE_instanced_arrays","OES_element_index_uint"],i)&&(s._hasOnlyLargeSploms&&n(a),u.plot(a,{},f))},drag:function(a){var s=a.calcdata,u=a._fullLayout;u._hasOnlyLargeSploms&&n(a);for(var f=0;f<s.length;f++){var c=s[f][0].trace,y=u._splomScenes[c.uid];"splom"===c.type&&y&&y.matrix&&r(a,c,y)}},updateGrid:n,clean:function(a,s,u,f){var c,y={};if(f._splomScenes){for(c=0;c<a.length;c++){var d=a[c];"splom"===d.type&&(y[d.uid]=1)}for(c=0;c<u.length;c++){var m=u[c];if(!y[m.uid]){var g=f._splomScenes[m.uid];g&&g.destroy&&g.destroy(),f._splomScenes[m.uid]=null,delete f._splomScenes[m.uid]}}}0===Object.keys(f._splomScenes||{}).length&&delete f._splomScenes,f._splomGrid&&!s._hasOnlyLargeSploms&&f._hasOnlyLargeSploms&&(f._splomGrid.destroy(),f._splomGrid=null,delete f._splomGrid),_.clean(a,s,u,f)},updateFx:_.updateFx,toSVG:_.toSVG,reglPrecompiled:i}},66821:function(ne,F,e){"use strict";var M=e(3400),k=e(79811),o=e(16356).calcMarkerSize,T=e(16356).calcAxisExpansion,_=e(90136),p=e(84236).markerSelection,l=e(84236).markerStyle,t=e(72308),i=e(39032).BADNUM,r=e(67072).TOO_MANY_POINTS;ne.exports=function(n,a){var s,u,f,c,y,d,m=a.dimensions,g=a._length,x={},v=x.cdata=[],b=x.data=[],h=a._visibleDims=[];function S(E,P){for(var I=E.makeCalcdata({v:P.values,vcalendar:a.calendar},"v"),O=0;O<I.length;O++)I[O]=I[O]===i?NaN:I[O];v.push(I),b.push("log"===E.type?M.simpleMap(I,E.c2l):I)}for(s=0;s<m.length;s++)if((f=m[s]).visible){if(c=k.getFromId(n,a._diag[s][0]),y=k.getFromId(n,a._diag[s][1]),c&&y&&c.type!==y.type){M.log("Skipping splom dimension "+s+" with conflicting axis types");continue}c?(S(c,f),y&&"category"===y.type&&(y._categories=c._categories.slice())):S(y,f),h.push(s)}for(_(n,a),M.extendFlat(x,l(n,a)),d=v.length*g>r?x.sizeAvg||Math.max(x.size,3):o(a,g),u=0;u<h.length;u++)f=m[s=h[u]],c=k.getFromId(n,a._diag[s][0])||{},y=k.getFromId(n,a._diag[s][1])||{},T(n,a,c,y,v[u],v[u],d);var w=t(n,a);return w.matrix||(w.matrix=!0),w.matrixOptions=x,w.selectedOptions=p(n,a,a.selected),w.unselectedOptions=p(n,a,a.unselected),[{x:!1,y:!1,t:{},trace:a}]}},69544:function(ne,F,e){"use strict";var M=e(3400),k=e(51272),o=e(44524),T=e(43028),_=e(74428),p=e(26284),l=e(80088).isOpenSymbol;function t(i,r){function n(s,u){return M.coerce(i,r,o.dimensions,s,u)}n("label");var a=n("values");a&&a.length?n("visible"):r.visible=!1,n("axis.type"),n("axis.matches")}ne.exports=function(i,r,n,a){function s(g,x){return M.coerce(i,r,o,g,x)}var u=k(i,r,{name:"dimensions",handleItemDefaults:t}),f=s("diagonal.visible"),c=s("showupperhalf"),y=s("showlowerhalf");if(p(r,u,"values")&&(f||c||y)){s("text"),s("hovertext"),s("hovertemplate"),s("xhoverformat"),s("yhoverformat"),_(i,r,n,a,s,{noAngleRef:!0,noStandOff:!0});var d=l(r.marker.symbol),m=T.isBubble(r);s("marker.line.width",d||m?1:0),function(g,x,v,b){var h,S,w=x.dimensions,E=w.length,P=x.showupperhalf,I=x.showlowerhalf,O=x.diagonal.visible,z=new Array(E),U=new Array(E);for(h=0;h<E;h++){var R=h?h+1:"";z[h]="x"+R,U[h]="y"+R}var j=b("xaxes",z),Y=b("yaxes",U),B=x._diag=new Array(E);x._xaxes={},x._yaxes={};var V=[],q=[];function ie(pe,we,Te,ye){if(pe){var ve=pe.charAt(0),xe=v._splomAxes[ve];if(x["_"+ve+"axes"][pe]=1,ye.push(pe),!(pe in xe)){var Ce=xe[pe]={};Te&&(Ce.label=Te.label||"",Te.visible&&Te.axis&&(Te.axis.type&&(Ce.type=Te.axis.type),Te.axis.matches&&(Ce.matches=we)))}}}var te=!O&&!I,ee=!O&&!P;for(x._axesDim={},h=0;h<E;h++){var $=w[h],J=0===h,X=h===E-1,ae=J&&te||X&&ee?void 0:j[h],ce=J&&ee||X&&te?void 0:Y[h];ie(ae,ce,$,V),ie(ce,ae,$,q),B[h]=[ae,ce],x._axesDim[ae]=h,x._axesDim[ce]=h}for(h=0;h<V.length;h++)for(S=0;S<q.length;S++){var le=V[h]+q[S];h>S&&P||h<S&&I?v._splomSubplots[le]=1:h!==S||!O&&I&&P||(v._splomSubplots[le]=1)}(!I||!O&&P&&I)&&(v._splomGridDflt.xside="bottom",v._splomGridDflt.yside="left")}(0,r,a,s),M.coerceSelectionMarkerOpacity(r,s)}else r.visible=!1}},83156:function(ne,F,e){"use strict";var M=e(3400),k=e(90136),o=e(84236).markerStyle;ne.exports=function(T,_){var p=_.trace,l=T._fullLayout._splomScenes[p.uid];if(l){k(T,p),M.extendFlat(l.matrixOptions,o(T,p));var t=M.extendFlat({},l.matrixOptions,l.viewOpts);l.matrix.update(t,null)}}},50328:function(ne,F){"use strict";F.getDimIndex=function(e,M){for(var k=M._id,o={x:0,y:1}[k.charAt(0)],T=e._visibleDims,_=0;_<T.length;_++)if(e._diag[T[_]][o]===k)return _;return!1}},72248:function(ne,F,e){"use strict";var M=e(50328),k=e(41272).calcHover,o=e(54460).getFromId,T=e(92880).extendFlat;function _(p,l,t,i){var r=p.cd[0].trace,n=p.scene.matrixOptions.cdata,a=p.xa,s=p.ya,u=a.c2p(l),f=s.c2p(t),c=p.distance,y=M.getDimIndex(r,a),d=M.getDimIndex(r,s);if(!1===y||!1===d)return[p];for(var m,g,x=n[y],v=n[d],b=c,h=0;h<x.length;h++)if(!i||h===p.index){var w=v[h],E=a.c2p(x[h])-u,P=s.c2p(w)-f,I=Math.sqrt(E*E+P*P);(i||I<b)&&(b=g=I,m=h)}return p.index=m,p.distance=b,p.dxy=g,void 0===m?[p]:[k(p,x,v,r)]}ne.exports={hoverPoints:function(p,l,t,i,r){r||(r={});var n="x"===(i||"").charAt(0),a="y"===(i||"").charAt(0),s=_(p,l,t);if((n||a)&&"axis"===r.hoversubplots&&s[0])for(var u=(n?p.xa:p.ya)._subplotsWith,f=r.gd,c=T({},p),y=0;y<u.length;y++){var d=u[y];if(d!==p.xa._id+p.ya._id){a?c.xa=o(f,d,"x"):c.ya=o(f,d,"y");var m=_(c,l,t,n||a);s=s.concat(m)}}return s}}},97924:function(ne,F,e){"use strict";var M=e(28888);M.basePlotModule=e(99332),ne.exports=M},54840:function(ne,F,e){"use strict";var M=e(55795),k=e(3400),o=e(79811),T=e(72760).selectMode;function _(p,l){var t,i,r,n,a,s=p._fullLayout,u=s._size,f=l.trace,c=l.t,y=s._splomScenes[f.uid],d=y.matrixOptions,m=d.cdata,g=s._glcanvas.data()[0].regl,x=s.dragmode;if(0!==m.length){d.lower=f.showupperhalf,d.upper=f.showlowerhalf,d.diagonal=f.diagonal.visible;var v=f._visibleDims,b=m.length,h=y.viewOpts={};for(h.ranges=new Array(b),h.domains=new Array(b),a=0;a<v.length;a++){r=v[a];var S=h.ranges[a]=new Array(4),w=h.domains[a]=new Array(4);(t=o.getFromId(p,f._diag[r][0]))&&(S[0]=t._rl[0],S[2]=t._rl[1],w[0]=t.domain[0],w[2]=t.domain[1]),(i=o.getFromId(p,f._diag[r][1]))&&(S[1]=i._rl[0],S[3]=i._rl[1],w[1]=i.domain[0],w[3]=i.domain[1])}var E=p._context.plotGlPixelRatio,P=u.l*E,I=u.b*E;h.viewport=[P,I,u.w*E+P,u.h*E+I],!0===y.matrix&&(y.matrix=M(g));var U=s.clickmode.indexOf("select")>-1,R=!0;if(T(x)||f.selectedpoints||U){var j=f._length;if(f.selectedpoints){y.selectBatch=f.selectedpoints;var Y=f.selectedpoints,B={};for(r=0;r<Y.length;r++)B[Y[r]]=!0;var V=[];for(r=0;r<j;r++)B[r]||V.push(r);y.unselectBatch=V}var q=c.xpx=new Array(b),ie=c.ypx=new Array(b);for(a=0;a<v.length;a++){if(t=o.getFromId(p,f._diag[r=v[a]][0]))for(q[a]=new Array(j),n=0;n<j;n++)q[a][n]=t.c2p(m[a][n]);if(i=o.getFromId(p,f._diag[r][1]))for(ie[a]=new Array(j),n=0;n<j;n++)ie[a][n]=i.c2p(m[a][n])}if(y.selectBatch.length||y.unselectBatch.length){var te=k.extendFlat({},d,y.unselectedOptions,h),ee=k.extendFlat({},d,y.selectedOptions,h);y.matrix.update(te,ee),R=!1}}else c.xpx=c.ypx=null;if(R){var $=k.extendFlat({},d,h);y.matrix.update($,null)}}}ne.exports=function(p,l,t){if(t.length)for(var i=0;i<t.length;i++)_(p,t[i][0])}},72308:function(ne,F,e){"use strict";var M=e(3400);ne.exports=function(k,o){var T=k._fullLayout,_=o.uid,p=T._splomScenes;p||(p=T._splomScenes={});var l={dirty:!0,selectBatch:[],unselectBatch:[]},t=p[o.uid];return t||((t=p[_]=M.extendFlat({},l,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){t.matrix&&t.matrix.draw&&(t.selectBatch.length||t.unselectBatch.length?t.matrix.draw(t.unselectBatch,t.selectBatch):t.matrix.draw()),t.dirty=!1},t.destroy=function(){t.matrix&&t.matrix.destroy&&t.matrix.destroy(),t.matrixOptions=null,t.selectBatch=null,t.unselectBatch=null,t=null}),t.dirty||M.extendFlat(t,l),t}},62500:function(ne,F,e){"use strict";var M=e(3400),k=M.pushUnique,o=e(43028),T=e(50328);ne.exports=function(_,p){var l=_.cd,t=l[0].trace,i=l[0].t,r=_.scene,n=r.matrixOptions.cdata,a=_.xaxis,s=_.yaxis,u=[];if(!r)return u;var f=!o.hasMarkers(t)&&!o.hasText(t);if(!0!==t.visible||f)return u;var c=T.getDimIndex(t,a),y=T.getDimIndex(t,s);if(!1===c||!1===y)return u;var d=i.xpx[c],m=i.ypx[y],g=n[c],x=n[y],v=(_.scene.selectBatch||[]).slice(),b=[];if(!1!==p&&!p.degenerate)for(var h=0;h<g.length;h++)p.contains([d[h],m[h]],null,h,_)?(u.push({pointNumber:h,x:g[h],y:x[h]}),k(v,h)):-1!==v.indexOf(h)?k(v,h):b.push(h);var S=r.matrixOptions;return v.length||b.length?r.selectBatch.length||r.unselectBatch.length||r.matrix.update(r.unselectedOptions,M.extendFlat({},S,r.selectedOptions,r.viewOpts)):r.matrix.update(S,null),r.selectBatch=v,r.unselectBatch=b,u}},90167:function(ne,F,e){"use strict";var M=e(49084),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(52948),_=e(45464),p=e(92880).extendFlat,l={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:o({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:k("u",1),vhoverformat:k("v",1),whoverformat:k("w",1),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),showlegend:p({},_.showlegend,{dflt:!1})};p(l,M("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){l[t]=T[t]}),l.hoverinfo=p({},_.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),l.transforms=void 0,ne.exports=l},3832:function(ne,F,e){"use strict";var M=e(3400),k=e(47128);function o(p){var l,t,i,r,n,a,s,u,f,c,y,d,m=p._x,g=p._y,x=p._z,v=p._len,b=-1/0,h=1/0,S=-1/0,w=1/0,E=-1/0,P=1/0,I="";for(v&&(s=m[0],f=g[0],y=x[0]),v>1&&(u=m[v-1],c=g[v-1],d=x[v-1]),l=0;l<v;l++)b=Math.max(b,m[l]),h=Math.min(h,m[l]),S=Math.max(S,g[l]),w=Math.min(w,g[l]),E=Math.max(E,x[l]),P=Math.min(P,x[l]),r||m[l]===s||(r=!0,I+="x"),n||g[l]===f||(n=!0,I+="y"),a||x[l]===y||(a=!0,I+="z");r||(I+="x"),n||(I+="y"),a||(I+="z");var O=T(p._x),z=T(p._y),U=T(p._z);I=(I=(I=I.replace("x",(s>u?"-":"+")+"x")).replace("y",(f>c?"-":"+")+"y")).replace("z",(y>d?"-":"+")+"z");var R=function(){v=0,O=[],z=[],U=[]};(!v||v<O.length*z.length*U.length)&&R();var j=function(ve){return"x"===ve?m:"y"===ve?g:x},Y=function(ve){return"x"===ve?O:"y"===ve?z:U},B=function(ve){return ve[v-1]<ve[0]?-1:1},V=j(I[1]),q=j(I[3]),ie=j(I[5]),te=Y(I[1]).length,ee=Y(I[3]).length,$=Y(I[5]).length,J=!1,X=function(ve,xe,Ce){return te*(ee*ve+xe)+Ce},ae=B(j(I[1])),ce=B(j(I[3])),le=B(j(I[5]));for(l=0;l<$-1;l++){for(t=0;t<ee-1;t++){for(i=0;i<te-1;i++){var pe=X(l,t,i),we=X(l,t,i+1),Te=X(l,t+1,i),ye=X(l+1,t,i);if(V[pe]*ae<V[we]*ae&&q[pe]*ce<q[Te]*ce&&ie[pe]*le<ie[ye]*le||(J=!0),J)break}if(J)break}if(J)break}return J&&(M.warn("Encountered arbitrary coordinates! Unable to input data grid."),R()),{xMin:h,yMin:w,zMin:P,xMax:b,yMax:S,zMax:E,Xs:O,Ys:z,Zs:U,len:v,fill:I}}function T(p){return M.distinctVals(p).vals}function _(p,l){if(void 0===l&&(l=p.length),M.isTypedArray(p))return p.subarray(0,l);for(var t=[],i=0;i<l;i++)t[i]=+p[i];return t}ne.exports={calc:function(p,l){l._len=Math.min(l.u.length,l.v.length,l.w.length,l.x.length,l.y.length,l.z.length),l._u=_(l.u,l._len),l._v=_(l.v,l._len),l._w=_(l.w,l._len),l._x=_(l.x,l._len),l._y=_(l.y,l._len),l._z=_(l.z,l._len);var t=o(l);l._gridFill=t.fill,l._Xs=t.Xs,l._Ys=t.Ys,l._Zs=t.Zs,l._len=t.len;var i,r,n,a=0;l.starts&&(i=_(l.starts.x||[]),r=_(l.starts.y||[]),n=_(l.starts.z||[]),a=Math.min(i.length,r.length,n.length)),l._startsX=i||[],l._startsY=r||[],l._startsZ=n||[];var s,u=0,f=1/0;for(s=0;s<l._len;s++){var c=l._u[s],y=l._v[s],d=l._w[s],m=Math.sqrt(c*c+y*y+d*d);u=Math.max(u,m),f=Math.min(f,m)}for(k(p,l,{vals:[f,u],containerStr:"",cLetter:"c"}),s=0;s<a;s++){var g=i[s];t.xMax=Math.max(t.xMax,g),t.xMin=Math.min(t.xMin,g);var x=r[s];t.yMax=Math.max(t.yMax,x),t.yMin=Math.min(t.yMin,x);var v=n[s];t.zMax=Math.max(t.zMax,v),t.zMin=Math.min(t.zMin,v)}l._slen=a,l._normMax=u,l._xbnds=[t.xMin,t.xMax],l._ybnds=[t.yMin,t.yMax],l._zbnds=[t.zMin,t.zMax]},filter:_,processGrid:o}},25668:function(ne,F,e){"use strict";var M=e(67792).gl_streamtube3d,k=M.createTubeMesh,o=e(3400),T=e(33040).parseColorScale,_=e(8932).extractOpts,p=e(52094),l={xaxis:0,yaxis:1,zaxis:2};function t(s,u){this.scene=s,this.uid=u,this.mesh=null,this.data=null}var i=t.prototype;function r(s){var u=s.length;return u>2?s.slice(1,u-1):2===u?[(s[0]+s[1])/2]:s}function n(s){var u=s.length;return 1===u?[.5,.5]:[s[1]-s[0],s[u-1]-s[u-2]]}function a(s,u){var f=s.fullSceneLayout,c=s.dataScale,y=u._len,d={};function m(te,ee){var $=f[ee],J=c[l[ee]];return o.simpleMap(te,function(X){return $.d2l(X)*J})}if(d.vectors=p(m(u._u,"xaxis"),m(u._v,"yaxis"),m(u._w,"zaxis"),y),!y)return{positions:[],cells:[]};var g=m(u._Xs,"xaxis"),x=m(u._Ys,"yaxis"),v=m(u._Zs,"zaxis");if(d.meshgrid=[g,x,v],d.gridFill=u._gridFill,u._slen)d.startingPositions=p(m(u._startsX,"xaxis"),m(u._startsY,"yaxis"),m(u._startsZ,"zaxis"));else{for(var b=x[0],h=r(g),S=r(v),w=new Array(h.length*S.length),E=0,P=0;P<h.length;P++)for(var I=0;I<S.length;I++)w[E++]=[h[P],b,S[I]];d.startingPositions=w}d.colormap=T(u),d.tubeSize=u.sizeref,d.maxLength=u.maxdisplayed;var O=m(u._xbnds,"xaxis"),z=m(u._ybnds,"yaxis"),U=m(u._zbnds,"zaxis"),R=n(g),j=n(x),Y=n(v),V=M(d,[[O[0]-R[0],z[0]-j[0],U[0]-Y[0]],[O[1]+R[1],z[1]+j[1],U[1]+Y[1]]]),q=_(u);V.vertexIntensityBounds=[q.min/u._normMax,q.max/u._normMax];var ie=u.lightposition;return V.lightPosition=[ie.x,ie.y,ie.z],V.ambient=u.lighting.ambient,V.diffuse=u.lighting.diffuse,V.specular=u.lighting.specular,V.roughness=u.lighting.roughness,V.fresnel=u.lighting.fresnel,V.opacity=u.opacity,u._pad=V.tubeScale*u.sizeref*2,V}i.handlePick=function(s){var u=this.scene.fullSceneLayout,f=this.scene.dataScale;function c(m,g){var v=f[l[g]];return u[g].l2c(m)/v}if(s.object===this.mesh){var y=s.data.position,d=s.data.velocity;return s.traceCoordinate=[c(y[0],"xaxis"),c(y[1],"yaxis"),c(y[2],"zaxis"),c(d[0],"xaxis"),c(d[1],"yaxis"),c(d[2],"zaxis"),s.data.intensity*this.data._normMax,s.data.divergence],s.textLabel=this.data.hovertext||this.data.text,!0}},i.update=function(s){this.data=s;var u=a(this.scene,s);this.mesh.update(u)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ne.exports=function(s,u){var f=s.glplot.gl,c=a(s,u),y=k(f,c),d=new t(s,u.uid);return d.mesh=y,d.data=u,y._trace=d,s.glplot.add(y),d}},54304:function(ne,F,e){"use strict";var M=e(3400),k=e(27260),o=e(90167);ne.exports=function(T,_,p,l){function t(f,c){return M.coerce(T,_,o,f,c)}var i=t("u"),r=t("v"),n=t("w"),a=t("x"),s=t("y"),u=t("z");i&&i.length&&r&&r.length&&n&&n.length&&a&&a.length&&s&&s.length&&u&&u.length?(t("starts.x"),t("starts.y"),t("starts.z"),t("maxdisplayed"),t("sizeref"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),k(T,_,l,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),_._length=null):_.visible=!1}},15436:function(ne,F,e){"use strict";ne.exports={moduleType:"trace",name:"streamtube",basePlotModule:e(12536),categories:["gl3d","showLegend"],attributes:e(90167),supplyDefaults:e(54304),colorbar:{min:"cmin",max:"cmax"},calc:e(3832).calc,plot:e(25668),eventData:function(M,k){return M.tubex=M.x,M.tubey=M.y,M.tubez=M.z,M.tubeu=k.traceCoordinate[3],M.tubev=k.traceCoordinate[4],M.tubew=k.traceCoordinate[5],M.norm=k.traceCoordinate[6],M.divergence=k.traceCoordinate[7],delete M.x,delete M.y,delete M.z,M},meta:{}}},424:function(ne,F,e){"use strict";var M=e(45464),k=e(21776).Ks,o=e(21776).Gw,T=e(49084),_=e(86968).u,p=e(74996),l=e(27328),t=e(92880).extendFlat,i=e(98192).c;ne.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:t({colors:{valType:"data_array",editType:"calc"},line:{color:t({},p.marker.line.color,{dflt:null}),width:t({},p.marker.line.width,{dflt:1}),editType:"calc"},pattern:i,editType:"calc"},T("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:p.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:o({editType:"plot"},{keys:l.eventDataKeys.concat(["label","value"])}),hovertext:p.hovertext,hoverinfo:t({},M.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:k({},{keys:l.eventDataKeys}),textfont:p.textfont,insidetextorientation:p.insidetextorientation,insidetextfont:p.insidetextfont,outsidetextfont:t({},p.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:p.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:_({name:"sunburst",trace:!0,editType:"calc"})}},54904:function(ne,F,e){"use strict";var M=e(7316);F.name="sunburst",F.plot=function(k,o,T,_){M.plotBasePlot(F.name,k,o,T,_)},F.clean=function(k,o,T,_){M.cleanBasePlot(F.name,k,o,T,_)}},3776:function(ne,F,e){"use strict";var M=e(74148),k=e(38248),o=e(3400),T=e(8932).makeColorScaleFuncFromTrace,_=e(45768).makePullColorFn,p=e(45768).generateExtendedColors,l=e(8932).calc,t=e(39032).ALMOST_EQUAL,i={},r={},n={};function a(s,u,f){var c=0,y=s.children;if(y){for(var d=y.length,m=0;m<d;m++)c+=a(y[m],u,f);f.branches&&c++}else f.leaves&&c++;return s.value=s.data.data.value=c,u._values||(u._values=[]),u._values[s.data.data.i]=c,c}F.calc=function(s,u){var f,c,y,d,m,g,x=s._fullLayout,v=u.ids,b=o.isArrayOrTypedArray(v),h=u.labels,S=u.parents,w=u.values,E=o.isArrayOrTypedArray(w),P=[],I={},O={},z=function(le){return le||"number"==typeof le},U=function(le){return!E||k(w[le])&&w[le]>=0};b?(f=Math.min(v.length,S.length),c=function(le){return z(v[le])&&U(le)},y=function(le){return String(v[le])}):(f=Math.min(h.length,S.length),c=function(le){return z(h[le])&&U(le)},y=function(le){return String(h[le])}),E&&(f=Math.min(f,w.length));for(var R=0;R<f;R++)if(c(R)){var j=y(R),Y=z(S[R])?String(S[R]):"",B={i:R,id:j,pid:Y,label:z(h[R])?String(h[R]):""};E&&(B.v=+w[R]),P.push(B),m=j,I[d=Y]?I[d].push(m):I[d]=[m],O[m]=1}if(I[""]){if(I[""].length>1){for(var V=o.randstr(),q=0;q<P.length;q++)""===P[q].pid&&(P[q].pid=V);P.unshift({hasMultipleRoots:!0,id:V,pid:"",label:""})}}else{var ie,te=[];for(ie in I)O[ie]||te.push(ie);if(1!==te.length)return o.warn(["Multiple implied roots, cannot build",u.type,"hierarchy of",u.name+".","These roots include:",te.join(", ")].join(" "));P.unshift({hasImpliedRoot:!0,id:ie=te[0],pid:"",label:ie})}try{g=M.stratify().id(function(le){return le.id}).parentId(function(le){return le.pid})(P)}catch(le){return o.warn(["Failed to build",u.type,"hierarchy of",u.name+".","Error:",le.message].join(" "))}var ee=M.hierarchy(g),$=!1;if(E)switch(u.branchvalues){case"remainder":ee.sum(function(le){return le.data.v});break;case"total":ee.each(function(le){var pe=le.data.data,we=pe.v;if(le.children){var Te=le.children.reduce(function(ye,ve){return ye+ve.data.data.v},0);if((pe.hasImpliedRoot||pe.hasMultipleRoots)&&(we=Te),we<Te*t)return $=!0,o.warn(["Total value for node",le.data.data.id,"of",u.name,"is smaller than the sum of its children.","\nparent value =",we,"\nchildren sum =",Te].join(" "))}le.value=we})}else a(ee,u,{branches:-1!==u.count.indexOf("branches"),leaves:-1!==u.count.indexOf("leaves")});if(!$){var J,X;u.sort&&ee.sort(function(le,pe){return pe.value-le.value});var ae=u.marker.colors||[];return u._hasColorscale?(!!ae.length||(ae=E?u.values:u._values),l(s,u,{vals:ae,containerStr:"marker",cLetter:"c"}),X=T(u.marker)):J=_(x["_"+u.type+"colormap"]),ee.each(function(le){var pe=le.data.data;pe.color=u._hasColorscale?X(ae[pe.i]):J(ae[pe.i],pe.id)}),P[0].hierarchy=ee,P}},F._runCrossTraceCalc=function(s,u){var f=u._fullLayout,c=u.calcdata,y=f[s+"colorway"],d=f["_"+s+"colormap"];f["extend"+s+"colors"]&&(y=p(y,"icicle"===s?n:"treemap"===s?r:i));var m,g=0;function x(h){var S=h.data.data,w=S.id;!1===S.color&&(d[w]?S.color=d[w]:h.parent?h.parent.parent?S.color=h.parent.data.data.color:(d[w]=S.color=y[g%y.length],g++):S.color=m)}for(var v=0;v<c.length;v++){var b=c[v][0];b.trace.type===s&&b.hierarchy&&(m=b.trace.root.color,b.hierarchy.each(x))}},F.crossTraceCalc=function(s){return F._runCrossTraceCalc("sunburst",s)}},27328:function(ne){"use strict";ne.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},25244:function(ne,F,e){"use strict";var M=e(3400),k=e(424),o=e(86968).Q,T=e(31508).handleText,_=e(74174).handleMarkerDefaults,p=e(8932),l=p.hasColorscale,t=p.handleDefaults;ne.exports=function(i,r,n,a){function s(m,g){return M.coerce(i,r,k,m,g)}var u=s("labels"),f=s("parents");if(u&&u.length&&f&&f.length){var c=s("values");s(c&&c.length?"branchvalues":"count"),s("level"),s("maxdepth"),_(i,r,a,s);var y=r._hasColorscale=l(i,"marker","colors")||(i.marker||{}).coloraxis;y&&t(i,r,a,s,{prefix:"marker.",cLetter:"c"}),s("leaf.opacity",y?1:.7);var d=s("text");s("texttemplate"),r.texttemplate||s("textinfo",M.isArrayOrTypedArray(d)?"text+label":"label"),s("hovertext"),s("hovertemplate"),T(i,r,a,s,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),s("insidetextorientation"),s("sort"),s("rotation"),s("root.color"),o(r,a,s),r._length=null}else r.visible=!1}},60404:function(ne,F,e){"use strict";var M=e(43616),k=e(76308);ne.exports=function(o,T,_,p,l){var t=T.data.data,r=l||t.color;if(t.i>=0){T.i=t.i;var n=_.marker;n.pattern&&n.colors&&n.pattern.shape||(n.color=r,T.color=r),M.pointStyle(o,_,p,T)}else k.fill(o,r)}},45716:function(ne,F,e){"use strict";var M=e(33428),k=e(24040),o=e(10624).appendArrayPointValue,T=e(93024),_=e(3400),p=e(95924),l=e(78176),t=e(69656).formatPieValue;function i(r,n,a){for(var s=r.data.data,u={curveNumber:n.index,pointNumber:s.i,data:n._input,fullData:n},f=0;f<a.length;f++){var c=a[f];c in r&&(u[c]=r[c])}return"parentString"in r&&!l.isHierarchyRoot(r)&&(u.parent=r.parentString),o(u,n,s.i),u}ne.exports=function(r,n,a,s,u){var f=s[0],c=f.trace,y=f.hierarchy,d="sunburst"===c.type,m="treemap"===c.type||"icicle"===c.type;"_hasHoverLabel"in c||(c._hasHoverLabel=!1),"_hasHoverEvent"in c||(c._hasHoverEvent=!1),r.on("mouseover",function(g){var x=a._fullLayout;if(!a._dragging&&!1!==x.hovermode){var v,b=a._fullData[c.index],h=g.data.data,S=h.i,w=l.isHierarchyRoot(g),E=l.getParent(y,g),P=l.getValue(g),I=function(ae){return _.castOption(b,S,ae)},O=I("hovertemplate"),z=T.castHoverinfo(b,x,S),U=x.separators;if(O||z&&"none"!==z&&"skip"!==z){var R,j;d&&(R=f.cx+g.pxmid[0]*(1-g.rInscribed),j=f.cy+g.pxmid[1]*(1-g.rInscribed)),m&&(R=g._hoverX,j=g._hoverY);var Y,B={},V=[],q=[],ie=function(ae){return-1!==V.indexOf(ae)};z&&(V="all"===z?b._module.attributes.hoverinfo.flags:z.split("+")),B.label=h.label,ie("label")&&B.label&&q.push(B.label),h.hasOwnProperty("v")&&(B.value=h.v,B.valueLabel=t(B.value,U),ie("value")&&q.push(B.valueLabel)),B.currentPath=g.currentPath=l.getPath(g.data),ie("current path")&&!w&&q.push(B.currentPath);var te=[],ee=function(){-1===te.indexOf(Y)&&(q.push(Y),te.push(Y))};B.percentParent=g.percentParent=P/l.getValue(E),B.parent=g.parentString=l.getPtLabel(E),ie("percent parent")&&(Y=l.formatPercent(B.percentParent,U)+" of "+B.parent,ee()),B.percentEntry=g.percentEntry=P/l.getValue(n),B.entry=g.entry=l.getPtLabel(n),!ie("percent entry")||w||g.onPathbar||(Y=l.formatPercent(B.percentEntry,U)+" of "+B.entry,ee()),B.percentRoot=g.percentRoot=P/l.getValue(y),B.root=g.root=l.getPtLabel(y),ie("percent root")&&!w&&(Y=l.formatPercent(B.percentRoot,U)+" of "+B.root,ee()),B.text=I("hovertext")||I("text"),ie("text")&&_.isValidTextValue(Y=B.text)&&q.push(Y),v=[i(g,b,u.eventDataKeys)];var $={trace:b,y:j,_x0:g._x0,_x1:g._x1,_y0:g._y0,_y1:g._y1,text:q.join("<br>"),name:O||ie("name")?b.name:void 0,color:I("hoverlabel.bgcolor")||h.color,borderColor:I("hoverlabel.bordercolor"),fontFamily:I("hoverlabel.font.family"),fontSize:I("hoverlabel.font.size"),fontColor:I("hoverlabel.font.color"),fontWeight:I("hoverlabel.font.weight"),fontStyle:I("hoverlabel.font.style"),fontVariant:I("hoverlabel.font.variant"),nameLength:I("hoverlabel.namelength"),textAlign:I("hoverlabel.align"),hovertemplate:O,hovertemplateLabels:B,eventData:v};d&&($.x0=R-g.rInscribed*g.rpx1,$.x1=R+g.rInscribed*g.rpx1,$.idealAlign=g.pxmid[0]<0?"left":"right"),m&&($.x=R,$.idealAlign=R<0?"left":"right");var J=[];T.loneHover($,{container:x._hoverlayer.node(),outerContainer:x._paper.node(),gd:a,inOut_bbox:J}),v[0].bbox=J[0],c._hasHoverLabel=!0}if(m){var X=r.select("path.surface");u.styleOne(X,g,b,a,{hovered:!0})}c._hasHoverEvent=!0,a.emit("plotly_hover",{points:v||[i(g,b,u.eventDataKeys)],event:M.event})}}),r.on("mouseout",function(g){var x=a._fullLayout,v=a._fullData[c.index],b=M.select(this).datum();if(c._hasHoverEvent&&(g.originalEvent=M.event,a.emit("plotly_unhover",{points:[i(b,v,u.eventDataKeys)],event:M.event}),c._hasHoverEvent=!1),c._hasHoverLabel&&(T.loneUnhover(x._hoverlayer.node()),c._hasHoverLabel=!1),m){var h=r.select("path.surface");u.styleOne(h,b,v,a,{hovered:!1})}}),r.on("click",function(g){var x=a._fullLayout,v=a._fullData[c.index],b=d&&(l.isHierarchyRoot(g)||l.isLeaf(g)),h=l.getPtId(g),S=l.isEntry(g)?l.findEntryWithChild(y,h):l.findEntryWithLevel(y,h),w=l.getPtId(S),E={points:[i(g,v,u.eventDataKeys)],event:M.event};b||(E.nextLevel=w);var P=p.triggerHandler(a,"plotly_"+c.type+"click",E);if(!1!==P&&x.hovermode&&(a._hoverdata=[i(g,v,u.eventDataKeys)],T.click(a,M.event)),!b&&!1!==P&&!a._dragging&&!a._transitioning){k.call("_storeDirectGUIEdit",v,x._tracePreGUI[v.uid],{level:v.level});var I={data:[{level:w}],traces:[c.index]},O={frame:{redraw:!1,duration:u.transitionTime},transition:{duration:u.transitionTime,easing:u.transitionEasing},mode:"immediate",fromcurrent:!0};T.loneUnhover(x._hoverlayer.node()),k.call("animate",a,I,O)}})}},78176:function(ne,F,e){"use strict";var M=e(3400),k=e(76308),o=e(93972),T=e(69656);function _(p){return p.data.data.pid}F.findEntryWithLevel=function(p,l){var t;return l&&p.eachAfter(function(i){if(F.getPtId(i)===l)return t=i.copy()}),t||p},F.findEntryWithChild=function(p,l){var t;return p.eachAfter(function(i){for(var r=i.children||[],n=0;n<r.length;n++)if(F.getPtId(r[n])===l)return t=i.copy()}),t||p},F.isEntry=function(p){return!p.parent},F.isLeaf=function(p){return!p.children},F.getPtId=function(p){return p.data.data.id},F.getPtLabel=function(p){return p.data.data.label},F.getValue=function(p){return p.value},F.isHierarchyRoot=function(p){return""===_(p)},F.setSliceCursor=function(p,l,t){var i=t.isTransitioning;if(!i){var r=p.datum();i=t.hideOnRoot&&F.isHierarchyRoot(r)||t.hideOnLeaves&&F.isLeaf(r)}o(p,i?null:"pointer")},F.getInsideTextFontKey=function(p,l,t,i,r){var a=t.data.data.i;return M.castOption(l,a,((r||{}).onPathbar?"pathbar.textfont":"insidetextfont")+"."+p)||M.castOption(l,a,"textfont."+p)||i.size},F.getOutsideTextFontKey=function(p,l,t,i){var r=t.data.data.i;return M.castOption(l,r,"outsidetextfont."+p)||M.castOption(l,r,"textfont."+p)||i.size},F.isOutsideText=function(p,l){return!p._hasColorscale&&F.isHierarchyRoot(l)},F.determineTextFont=function(p,l,t,i){return F.isOutsideText(p,l)?{color:F.getOutsideTextFontKey("color",r=p,n=l,a=t),family:F.getOutsideTextFontKey("family",r,n,a),size:F.getOutsideTextFontKey("size",r,n,a),weight:F.getOutsideTextFontKey("weight",r,n,a),style:F.getOutsideTextFontKey("style",r,n,a),variant:F.getOutsideTextFontKey("variant",r,n,a),textcase:F.getOutsideTextFontKey("textcase",r,n,a),lineposition:F.getOutsideTextFontKey("lineposition",r,n,a),shadow:F.getOutsideTextFontKey("shadow",r,n,a)}:function(r,n,a,s){var f=n.data.data,c=f.i,y=M.castOption(r,c,((s||{}).onPathbar?"pathbar.textfont":"insidetextfont")+".color");return!y&&r._input.textfont&&(y=M.castOption(r._input,c,"textfont.color")),{color:y||k.contrast(f.color),family:F.getInsideTextFontKey("family",r,n,a,s),size:F.getInsideTextFontKey("size",r,n,a,s),weight:F.getInsideTextFontKey("weight",r,n,a,s),style:F.getInsideTextFontKey("style",r,n,a,s),variant:F.getInsideTextFontKey("variant",r,n,a,s),textcase:F.getInsideTextFontKey("textcase",r,n,a,s),lineposition:F.getInsideTextFontKey("lineposition",r,n,a,s),shadow:F.getInsideTextFontKey("shadow",r,n,a,s)}}(p,l,t,i);var r,n,a},F.hasTransition=function(p){return!!(p&&p.duration>0)},F.getMaxDepth=function(p){return p.maxdepth>=0?p.maxdepth:1/0},F.isHeader=function(p,l){return!(F.isLeaf(p)||p.depth===l._maxDepth-1)},F.getParent=function(p,l){return F.findEntryWithLevel(p,_(l))},F.listPath=function(p,l){var t=p.parent;if(!t)return[];var i=l?[t.data[l]]:[t];return F.listPath(t,l).concat(i)},F.getPath=function(p){return F.listPath(p,"label").join("/")+"/"},F.formatValue=T.formatPieValue,F.formatPercent=function(p,l){var t=M.formatPercent(p,0);return"0%"===t&&(t=T.formatPiePercent(p,l)),t}},5621:function(ne,F,e){"use strict";ne.exports={moduleType:"trace",name:"sunburst",basePlotModule:e(54904),categories:[],animatable:!0,attributes:e(424),layoutAttributes:e(84920),supplyDefaults:e(25244),supplyLayoutDefaults:e(28732),calc:e(3776).calc,crossTraceCalc:e(3776).crossTraceCalc,plot:e(96488).plot,style:e(85676).style,colorbar:e(5528),meta:{}}},84920:function(ne){"use strict";ne.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},28732:function(ne,F,e){"use strict";var M=e(3400),k=e(84920);ne.exports=function(o,T){function _(p,l){return M.coerce(o,T,k,p,l)}_("sunburstcolorway",T.colorway),_("extendsunburstcolors")}},96488:function(ne,F,e){"use strict";var M=e(33428),k=e(74148),o=e(67756).qy,T=e(43616),_=e(3400),p=e(72736),l=e(82744),t=l.recordMinTextSize,i=l.clearMinTextSize,r=e(37820),n=e(69656).getRotationAngle,a=r.computeTransform,s=r.transformInsideText,u=e(85676).styleOne,f=e(60100).resizeText,c=e(45716),y=e(27328),d=e(78176);function m(x,v,b,h){var S=x._context.staticPlot,w=x._fullLayout,E=!w.uniformtext.mode&&d.hasTransition(h),P=M.select(b).selectAll("g.slice"),I=v[0],O=I.trace,U=d.findEntryWithLevel(I.hierarchy,O.level),R=d.getMaxDepth(O),j=w._size,Y=O.domain,V=j.h*(Y.y[1]-Y.y[0]),q=.5*Math.min(j.w*(Y.x[1]-Y.x[0]),V),ie=I.cx=j.l+j.w*(Y.x[1]+Y.x[0])/2,te=I.cy=j.t+j.h*(1-Y.y[0])-V/2;if(!U)return P.remove();var ee=null,$={};E&&P.each(function(se){$[d.getPtId(se)]={rpx0:se.rpx0,rpx1:se.rpx1,x0:se.x0,x1:se.x1,transform:se.transform},!ee&&d.isEntry(se)&&(ee=se)});var se,J=(se=U,k.partition().size([2*Math.PI,se.height+1])(se)).descendants(),X=U.height+1,ae=0,ce=R;I.hasMultipleRoots&&d.isHierarchyRoot(U)&&(J=J.slice(1),X-=1,ae=1,ce+=1),J=J.filter(function(se){return se.y1<=ce});var le=n(O.rotation);le&&J.forEach(function(se){se.x0+=le,se.x1+=le});var pe=Math.min(X,R),we=function(se){return(se-ae)/pe*q},Te=function(se,ge){return[se*Math.cos(ge),-se*Math.sin(ge)]},ye=function(se){return _.pathAnnulus(se.rpx0,se.rpx1,se.x0,se.x1,ie,te)},ve=function(se){return ie+g(se)[0]*(se.transform.rCenter||0)+(se.transform.x||0)},xe=function(se){return te+g(se)[1]*(se.transform.rCenter||0)+(se.transform.y||0)};(P=P.data(J,d.getPtId)).enter().append("g").classed("slice",!0),E?P.exit().transition().each(function(){var se=M.select(this);se.select("path.surface").transition().attrTween("d",function(ge){var Ie=function(ke){var Se,Pe=d.getPtId(ke),Fe=$[Pe],Be=$[d.getPtId(U)];if(Be){var me=(ke.x1>Be.x1?2*Math.PI:0)+le;Se=ke.rpx1<Be.rpx1?{x0:ke.x0,x1:ke.x1,rpx0:0,rpx1:0}:{x0:me,x1:me,rpx0:ke.rpx0,rpx1:ke.rpx1}}else{var Me,Le=d.getPtId(ke.parent);P.each(function(nt){if(d.getPtId(nt)===Le)return Me=nt});var Ne,Re=Me.children;Re.forEach(function(nt,ft){if(d.getPtId(nt)===Pe)return Ne=ft});var He=Re.length,Ze=o(Me.x0,Me.x1);Se={rpx0:q,rpx1:q,x0:Ze(Ne/He),x1:Ze((Ne+1)/He)}}return o(Fe,Se)}(ge);return function(ke){return ye(Ie(ke))}}),se.select("g.slicetext").attr("opacity",0)}).remove():P.exit().remove(),P.order();var Ce=null;if(E&&ee){var Oe=d.getPtId(ee);P.each(function(se){null===Ce&&d.getPtId(se)===Oe&&(Ce=se.x1)})}var be=P;function ue(se){var ge=se.parent,Ie=$[d.getPtId(ge)],ke={};if(Ie){var Se=ge.children,Pe=Se.indexOf(se),Fe=Se.length,Be=o(Ie.x0,Ie.x1);ke.x0=Be(Pe/Fe),ke.x1=Be(Pe/Fe)}else ke.x0=ke.x1=0;return ke}E&&(be=be.transition().each("end",function(){var se=M.select(this);d.setSliceCursor(se,x,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),be.each(function(se){var me,ge=M.select(this),Ie=_.ensureSingle(ge,"path","surface",function(me){me.style("pointer-events",S?"none":"all")});se.rpx0=we(se.y0),se.rpx1=we(se.y1),se.xmid=(se.x0+se.x1)/2,se.pxmid=Te(se.rpx1,se.xmid),se.midangle=-(se.xmid-Math.PI/2),se.startangle=-(se.x0-Math.PI/2),se.stopangle=-(se.x1-Math.PI/2),se.halfangle=.5*Math.min(_.angleDelta(se.x0,se.x1)||Math.PI,Math.PI),se.ring=1-se.rpx0/se.rpx1,se.rInscribed=0===(me=se).rpx0&&_.isFullCircle([me.x0,me.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(me.halfangle)),me.ring/2)),E?Ie.transition().attrTween("d",function(me){var Me=function(Le){var Ne,Re=$[d.getPtId(Le)],He={x0:Le.x0,x1:Le.x1,rpx0:Le.rpx0,rpx1:Le.rpx1};if(Re)Ne=Re;else if(ee)if(Le.parent)if(Ce){var Ze=(Le.x1>Ce?2*Math.PI:0)+le;Ne={x0:Ze,x1:Ze}}else _.extendFlat(Ne={rpx0:q,rpx1:q},ue(Le));else Ne={rpx0:0,rpx1:0};else Ne={x0:le,x1:le};return o(Ne,He)}(me);return function(Le){return ye(Me(Le))}}):Ie.attr("d",ye),ge.call(c,U,x,v,{eventDataKeys:y.eventDataKeys,transitionTime:y.CLICK_TRANSITION_TIME,transitionEasing:y.CLICK_TRANSITION_EASING}).call(d.setSliceCursor,x,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:x._transitioning}),Ie.call(u,se,O,x);var ke=_.ensureSingle(ge,"g","slicetext"),Se=_.ensureSingle(ke,"text","",function(me){me.attr("data-notex",1)}),Pe=_.ensureUniformFontSize(x,d.determineTextFont(O,se,w.font));Se.text(F.formatSliceLabel(se,U,O,v,w)).classed("slicetext",!0).attr("text-anchor","middle").call(T.font,Pe).call(p.convertToTspans,x);var Fe=T.bBox(Se.node());se.transform=s(Fe,se,I),se.transform.targetX=ve(se),se.transform.targetY=xe(se);var Be=function(me,Me){var Le=me.transform;return a(Le,Me),Le.fontSize=Pe.size,t(O.type,Le,w),_.getTextTransform(Le)};E?Se.transition().attrTween("transform",function(me){var Me=function(Le){var Ne,Re=$[d.getPtId(Le)],He=Le.transform;if(Re)Ne=Re;else if(Ne={rpx1:Le.rpx1,transform:{textPosAngle:He.textPosAngle,scale:0,rotate:He.rotate,rCenter:He.rCenter,x:He.x,y:He.y}},ee)if(Le.parent)if(Ce){var Ze=Le.x1>Ce?2*Math.PI:0;Ne.x0=Ne.x1=Ze}else _.extendFlat(Ne,ue(Le));else Ne.x0=Ne.x1=le;else Ne.x0=Ne.x1=le;var nt=o(Ne.transform.textPosAngle,Le.transform.textPosAngle),ft=o(Ne.rpx1,Le.rpx1),ht=o(Ne.x0,Le.x0),Tt=o(Ne.x1,Le.x1),At=o(Ne.transform.scale,He.scale),_t=o(Ne.transform.rotate,He.rotate),ot=0===He.rCenter?3:0===Ne.transform.rCenter?1/3:1,it=o(Ne.transform.rCenter,He.rCenter);return function(Pt){var jt=ft(Pt),Ut=ht(Pt),Rt=Tt(Pt),Je=it(Math.pow(Pt,ot)),et={pxmid:Te(jt,(Ut+Rt)/2),rpx1:jt,transform:{textPosAngle:nt(Pt),rCenter:Je,x:He.x,y:He.y}};return t(O.type,He,w),{transform:{targetX:ve(et),targetY:xe(et),scale:At(Pt),rotate:_t(Pt),rCenter:Je}}}}(me);return function(Le){return Be(Me(Le),Fe)}}):Se.attr("transform",Be(se,Fe))})}function g(x){return b=x.transform.textPosAngle,[(v=x.rpx1)*Math.sin(b),-v*Math.cos(b)];var v,b}F.plot=function(x,v,b,h){var S,w,E=x._fullLayout,P=E._sunburstlayer,I=!b,O=!E.uniformtext.mode&&d.hasTransition(b);i("sunburst",E),(S=P.selectAll("g.trace.sunburst").data(v,function(z){return z[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),S.order(),O?(h&&(w=h()),M.transition().duration(b.duration).ease(b.easing).each("end",function(){w&&w()}).each("interrupt",function(){w&&w()}).each(function(){P.selectAll("g.trace").each(function(z){m(x,z,this,b)})})):(S.each(function(z){m(x,z,this,b)}),E.uniformtext.mode&&f(x,E._sunburstlayer.selectAll(".trace"),"sunburst")),I&&S.exit().remove()},F.formatSliceLabel=function(x,v,b,h,S){var w=b.texttemplate,E=b.textinfo;if(!(w||E&&"none"!==E))return"";var P=S.separators,O=x.data.data,z=h[0].hierarchy,U=d.isHierarchyRoot(x),R=d.getParent(z,x),j=d.getValue(x);if(!w){var Y,B=E.split("+"),V=function(ce){return-1!==B.indexOf(ce)},q=[];if(V("label")&&O.label&&q.push(O.label),O.hasOwnProperty("v")&&V("value")&&q.push(d.formatValue(O.v,P)),!U){V("current path")&&q.push(d.getPath(x.data));var ie=0;V("percent parent")&&ie++,V("percent entry")&&ie++,V("percent root")&&ie++;var te=ie>1;if(ie){var ee,$=function(ce){Y=d.formatPercent(ee,P),te&&(Y+=" of "+ce),q.push(Y)};V("percent parent")&&!U&&(ee=j/d.getValue(R),$("parent")),V("percent entry")&&(ee=j/d.getValue(v),$("entry")),V("percent root")&&(ee=j/d.getValue(z),$("root"))}}return V("text")&&(Y=_.castOption(b,O.i,"text"),_.isValidTextValue(Y)&&q.push(Y)),q.join("<br>")}var J=_.castOption(b,O.i,"texttemplate");if(!J)return"";var X={};O.label&&(X.label=O.label),O.hasOwnProperty("v")&&(X.value=O.v,X.valueLabel=d.formatValue(O.v,P)),X.currentPath=d.getPath(x.data),U||(X.percentParent=j/d.getValue(R),X.percentParentLabel=d.formatPercent(X.percentParent,P),X.parent=d.getPtLabel(R)),X.percentEntry=j/d.getValue(v),X.percentEntryLabel=d.formatPercent(X.percentEntry,P),X.entry=d.getPtLabel(v),X.percentRoot=j/d.getValue(z),X.percentRootLabel=d.formatPercent(X.percentRoot,P),X.root=d.getPtLabel(z),O.hasOwnProperty("color")&&(X.color=O.color);var ae=_.castOption(b,O.i,"text");return(_.isValidTextValue(ae)||""===ae)&&(X.text=ae),X.customdata=_.castOption(b,O.i,"customdata"),_.texttemplateString(J,X,S._d3locale,X,b._meta||{})}},85676:function(ne,F,e){"use strict";var M=e(33428),k=e(76308),o=e(3400),T=e(82744).resizeText,_=e(60404);function p(l,t,i,r){var a=!t.children,s=t.data.data.i,u=o.castOption(i,s,"marker.line.color")||k.defaultLine,f=o.castOption(i,s,"marker.line.width")||0;l.call(_,t,i,r).style("stroke-width",f).call(k.stroke,u).style("opacity",a?i.leaf.opacity:null)}ne.exports={style:function(l){var t=l._fullLayout._sunburstlayer.selectAll(".trace");T(l,t,"sunburst"),t.each(function(i){var r=M.select(this),n=i[0].trace;r.style("opacity",n.opacity),r.selectAll("path.surface").each(function(a){M.select(this).call(p,a,n,l)})})},styleOne:p}},16716:function(ne,F,e){"use strict";var M=e(76308),k=e(49084),o=e(29736).axisHoverFormat,T=e(21776).Ks,_=e(45464),p=e(92880).extendFlat,l=e(67824).overrideAll;function t(r){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:M.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:M.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var i=ne.exports=l(p({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:T(),xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},k("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:t(),y:t(),z:t()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:p({},k.zauto,{}),zmin:p({},k.zmin,{}),zmax:p({},k.zmax,{})},hoverinfo:p({},_.hoverinfo),showlegend:p({},_.showlegend,{dflt:!1})}),"calc","nested");i.x.editType=i.y.editType=i.z.editType="calc+clearAxisTypes",i.transforms=void 0},56576:function(ne,F,e){"use strict";var M=e(47128);ne.exports=function(k,o){M(k,o,o.surfacecolor?{vals:o.surfacecolor,containerStr:"",cLetter:"c"}:{vals:o.z,containerStr:"",cLetter:"c"})}},79164:function(ne,F,e){"use strict";var M=e(67792).gl_surface3d,k=e(67792).ndarray,o=e(67792).ndarray_linear_interpolate.d2,T=e(70448),_=e(11240),p=e(3400).isArrayOrTypedArray,l=e(33040).parseColorScale,t=e(43080),i=e(8932).extractOpts;function r(b,h,S){this.scene=b,this.uid=S,this.surface=h,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var n=r.prototype;n.getXat=function(b,h,S,w){var E=p(this.data.x)?p(this.data.x[0])?this.data.x[h][b]:this.data.x[b]:b;return void 0===S?E:w.d2l(E,0,S)},n.getYat=function(b,h,S,w){var E=p(this.data.y)?p(this.data.y[0])?this.data.y[h][b]:this.data.y[h]:h;return void 0===S?E:w.d2l(E,0,S)},n.getZat=function(b,h,S,w){var E=this.data.z[h][b];return null===E&&this.data.connectgaps&&this.data._interpolatedZ&&(E=this.data._interpolatedZ[h][b]),void 0===S?E:w.d2l(E,0,S)},n.handlePick=function(b){if(b.object===this.surface){var S=(b.data.index[1]-1)/this.dataScaleY-1,w=Math.max(Math.min(Math.round((b.data.index[0]-1)/this.dataScaleX-1),this.data.z[0].length-1),0),E=Math.max(Math.min(Math.round(S),this.data._ylength-1),0);b.index=[w,E],b.traceCoordinate=[this.getXat(w,E),this.getYat(w,E),this.getZat(w,E)],b.dataCoordinate=[this.getXat(w,E,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(w,E,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(w,E,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var P=0;P<3;P++)null!=b.dataCoordinate[P]&&(b.dataCoordinate[P]*=this.scene.dataScale[P]);var I=this.data.hovertext||this.data.text;return b.textLabel=p(I)&&I[E]&&void 0!==I[E][w]?I[E][w]:I||"",b.data.dataCoordinate=b.dataCoordinate.slice(),this.surface.highlight(b.data),this.scene.glplot.spikes.position=b.dataCoordinate,!0}};var a=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function s(b,h){if(b<h)return 0;for(var S=0;0===Math.floor(b%h);)b/=h,S++;return S}function u(b){for(var h=[],S=0;S<a.length;S++)h.push(s(b,a[S]));return h}function f(b){for(var h=u(b),S=b,w=0;w<a.length;w++)if(h[w]>0){S=a[w];break}return S}function c(b,h){if(!(b<1||h<1)){for(var S=u(b),w=u(h),E=1,P=0;P<a.length;P++)E*=Math.pow(a[P],Math.max(S[P],w[P]));return E}}n.calcXnums=function(b){var h,S=[];for(h=1;h<b;h++){var w=this.getXat(h-1,0),E=this.getXat(h,0);S[h-1]=E!==w&&null!=w&&null!=E?Math.abs(E-w):0}var P=0;for(h=1;h<b;h++)P+=S[h-1];for(h=1;h<b;h++)S[h-1]=0===S[h-1]?1:Math.round(P/S[h-1]);return S},n.calcYnums=function(b){var h,S=[];for(h=1;h<b;h++){var w=this.getYat(0,h-1),E=this.getYat(0,h);S[h-1]=E!==w&&null!=w&&null!=E?Math.abs(E-w):0}var P=0;for(h=1;h<b;h++)P+=S[h-1];for(h=1;h<b;h++)S[h-1]=0===S[h-1]?1:Math.round(P/S[h-1]);return S};var y=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],d=y[9],m=y[13];function g(b,h,S){var w=S[8]+S[2]*h[0]+S[5]*h[1];return b[0]=(S[6]+S[0]*h[0]+S[3]*h[1])/w,b[1]=(S[7]+S[1]*h[0]+S[4]*h[1])/w,b}function x(b,h,S){return function(w,E,P,I){for(var O=[0,0],z=w.shape[0],U=w.shape[1],R=0;R<z;R++)for(var j=0;j<U;j++)P(O,[R,j],I),w.set(R,j,o(E,O[0],O[1]))}(b,h,g,S),b}function v(b,h){for(var S=!1,w=0;w<b.length;w++)if(h===b[w]){S=!0;break}!1===S&&b.push(h)}n.estimateScale=function(b,h){for(var S=1+function(E){if(0!==E.length){for(var P=1,I=0;I<E.length;I++)P=c(P,E[I]);return P}}(0===h?this.calcXnums(b):this.calcYnums(b));S<d;)S*=2;for(;S>m;)S--,S/=f(S),++S<d&&(S=m);var w=Math.round(S/b);return w>1?w:1},n.refineCoords=function(b){for(var h=this.dataScaleX,S=this.dataScaleY,w=b[0].shape[0],E=b[0].shape[1],P=0|Math.floor(b[0].shape[0]*h+1),I=0|Math.floor(b[0].shape[1]*S+1),O=1+w+1,z=1+E+1,U=k(new Float32Array(O*z),[O,z]),R=[1/h,0,0,0,1/S,0,0,0,1],j=0;j<b.length;++j){this.surface.padField(U,b[j]);var Y=k(new Float32Array(P*I),[P,I]);x(Y,U,R),b[j]=Y}},n.setContourLevels=function(){var b,h,w=[[],[],[]],E=[!1,!1,!1],P=!1;for(b=0;b<3;++b)if(this.showContour[b]&&(P=!0,this.contourSize[b]>0&&null!==this.contourStart[b]&&null!==this.contourEnd[b]&&this.contourEnd[b]>this.contourStart[b]))for(E[b]=!0,h=this.contourStart[b];h<this.contourEnd[b];h+=this.contourSize[b])v(w[b],h*this.scene.dataScale[b]);if(P){var I=[[],[],[]];for(b=0;b<3;++b)this.showContour[b]&&(I[b]=E[b]?w[b]:this.scene.contourLevels[b]);this.surface.update({levels:I})}},n.update=function(b){var h,S,w,E,P=this.scene,I=P.fullSceneLayout,O=this.surface,z=l(b),U=P.dataScale,R=b.z[0].length,j=b._ylength,Y=P.contourLevels;this.data=b;var B=[];for(h=0;h<3;h++)for(B[h]=[],S=0;S<R;S++)B[h][S]=[];for(S=0;S<R;S++)for(w=0;w<j;w++)B[0][S][w]=this.getXat(S,w,b.xcalendar,I.xaxis),B[1][S][w]=this.getYat(S,w,b.ycalendar,I.yaxis),B[2][S][w]=this.getZat(S,w,b.zcalendar,I.zaxis);if(b.connectgaps)for(b._emptypoints=_(B[2]),T(B[2],b._emptypoints),b._interpolatedZ=[],S=0;S<R;S++)for(b._interpolatedZ[S]=[],w=0;w<j;w++)b._interpolatedZ[S][w]=B[2][S][w];for(h=0;h<3;h++)for(S=0;S<R;S++)for(w=0;w<j;w++)null==(E=B[h][S][w])?B[h][S][w]=NaN:E=B[h][S][w]*=U[h];for(h=0;h<3;h++)for(S=0;S<R;S++)for(w=0;w<j;w++)null!=(E=B[h][S][w])&&(this.minValues[h]>E&&(this.minValues[h]=E),this.maxValues[h]<E&&(this.maxValues[h]=E));for(h=0;h<3;h++)this.objectOffset[h]=.5*(this.minValues[h]+this.maxValues[h]);for(h=0;h<3;h++)for(S=0;S<R;S++)for(w=0;w<j;w++)null!=(E=B[h][S][w])&&(B[h][S][w]-=this.objectOffset[h]);var V=[k(new Float32Array(R*j),[R,j]),k(new Float32Array(R*j),[R,j]),k(new Float32Array(R*j),[R,j])];for(h=0;h<3;h++)for(S=0;S<R;S++)for(w=0;w<j;w++)V[h].set(S,w,B[h][S][w]);B=[];var q={colormap:z,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!b.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:b.opacityscale,opacity:b.opacity},ie=i(b);if(q.intensityBounds=[ie.min,ie.max],b.surfacecolor){var te=k(new Float32Array(R*j),[R,j]);for(S=0;S<R;S++)for(w=0;w<j;w++)te.set(S,w,b.surfacecolor[w][S]);V.push(te)}else q.intensityBounds[0]*=U[2],q.intensityBounds[1]*=U[2];(m<V[0].shape[0]||m<V[0].shape[1])&&(this.refineData=!1),!0===this.refineData&&(this.dataScaleX=this.estimateScale(V[0].shape[0],0),this.dataScaleY=this.estimateScale(V[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(V)),b.surfacecolor&&(q.intensity=V.pop());var X,ae,ce,ee=[!0,!0,!0],$=["x","y","z"];for(h=0;h<3;++h){var J=b.contours[$[h]];ee[h]=J.highlight,q.showContour[h]=J.show||J.highlight,q.showContour[h]&&(q.contourProject[h]=[J.project.x,J.project.y,J.project.z],J.show?(this.showContour[h]=!0,q.levels[h]=Y[h],O.highlightColor[h]=q.contourColor[h]=t(J.color),O.highlightTint[h]=q.contourTint[h]=J.usecolormap?0:1,q.contourWidth[h]=J.width,this.contourStart[h]=J.start,this.contourEnd[h]=J.end,this.contourSize[h]=J.size):(this.showContour[h]=!1,this.contourStart[h]=null,this.contourEnd[h]=null,this.contourSize[h]=0),J.highlight&&(q.dynamicColor[h]=t(J.highlightcolor),q.dynamicWidth[h]=J.highlightwidth))}(ae=(X=z)[0].rgb)[0]===(ce=X[X.length-1].rgb)[0]&&ae[1]===ce[1]&&ae[2]===ce[2]&&ae[3]===ce[3]&&(q.vertexColor=!0),q.objectOffset=this.objectOffset,q.coords=V,O.update(q),O.visible=b.visible,O.enableDynamic=ee,O.enableHighlight=ee,O.snapToData=!0,"lighting"in b&&(O.ambientLight=b.lighting.ambient,O.diffuseLight=b.lighting.diffuse,O.specularLight=b.lighting.specular,O.roughness=b.lighting.roughness,O.fresnel=b.lighting.fresnel),"lightposition"in b&&(O.lightPosition=[b.lightposition.x,b.lightposition.y,b.lightposition.z])},n.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},ne.exports=function(b,h){var w=M({gl:b.glplot.gl}),E=new r(b,w,h.uid);return w._trace=E,E.update(h),b.glplot.add(w),E}},60192:function(ne,F,e){"use strict";var M=e(24040),k=e(3400),o=e(27260),T=e(16716);function _(l,t,i,r){var n=r("opacityscale");"max"===n?t.opacityscale=[[0,.1],[1,1]]:"min"===n?t.opacityscale=[[0,1],[1,.1]]:"extremes"===n?t.opacityscale=function(a,s){for(var u=[],f=0;f<32;f++){var c=f/31,y=.1+.9*(1-Math.pow(Math.sin(1*c*Math.PI),2));u.push([c,Math.max(0,Math.min(1,y))])}return u}():function(a){var s=0;if(!Array.isArray(a)||a.length<2||!a[0]||!a[a.length-1]||0!=+a[0][0]||1!=+a[a.length-1][0])return!1;for(var u=0;u<a.length;u++){var f=a[u];if(2!==f.length||+f[0]<s)return!1;s=+f[0]}return!0}(n)||(t.opacityscale=void 0)}function p(l,t,i){t in l&&!(i in l)&&(l[i]=l[t])}ne.exports={supplyDefaults:function(l,t,i,r){var n,a;function s(v,b){return k.coerce(l,t,T,v,b)}var u=s("x"),f=s("y"),c=s("z");if(!c||!c.length||u&&u.length<1||f&&f.length<1)t.visible=!1;else{t._xlength=Array.isArray(u)&&k.isArrayOrTypedArray(u[0])?c.length:c[0].length,t._ylength=c.length,M.getComponentMethod("calendars","handleTraceDefaults")(l,t,["x","y","z"],r),s("text"),s("hovertext"),s("hovertemplate"),s("xhoverformat"),s("yhoverformat"),s("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(v){s(v)});var y=s("surfacecolor"),d=["x","y","z"];for(n=0;n<3;++n){var m="contours."+d[n],g=s(m+".show"),x=s(m+".highlight");if(g||x)for(a=0;a<3;++a)s(m+".project."+d[a]);g&&(s(m+".color"),s(m+".width"),s(m+".usecolormap")),x&&(s(m+".highlightcolor"),s(m+".highlightwidth")),s(m+".start"),s(m+".end"),s(m+".size")}y||(p(l,"zmin","cmin"),p(l,"zmax","cmax"),p(l,"zauto","cauto")),o(l,t,r,s,{prefix:"",cLetter:"c"}),_(0,t,0,s),t._length=null}},opacityscaleDefaults:_}},91304:function(ne,F,e){"use strict";ne.exports={attributes:e(16716),supplyDefaults:e(60192).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:e(56576),plot:e(79164),moduleType:"trace",name:"surface",basePlotModule:e(12536),categories:["gl3d","2dMap","showLegend"],meta:{}}},60520:function(ne,F,e){"use strict";var M=e(13916),k=e(92880).extendFlat,o=e(67824).overrideAll,T=e(25376),_=e(86968).u,p=e(29736).descriptionOnlyNumbers;(ne.exports=o({domain:_({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:p("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:k({},M.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:k({},T({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:p("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:k({},M.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:k({},T({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},85852:function(ne,F,e){"use strict";var M=e(84888)._M,k=e(24752),o="table";F.name=o,F.plot=function(T){var _=M(T.calcdata,o)[0];_.length&&k(T,_)},F.clean=function(T,_,p,l){var t=l._has&&l._has(o),i=_._has&&_._has(o);t&&!i&&l._paperdiv.selectAll(".table").remove()}},39312:function(ne,F,e){"use strict";var M=e(71688).wrap;ne.exports=function(){return M({})}},23536:function(ne){"use strict";ne.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},55992:function(ne,F,e){"use strict";var M=e(23536),k=e(92880).extendFlat,o=e(38248),T=e(38116).isTypedArray,_=e(38116).isArrayOrTypedArray;function p(s){if(_(s)){for(var u=0,f=0;f<s.length;f++)u=Math.max(u,p(s[f]));return u}return s}function l(s,u){return s+u}function t(s){var u,f=s.slice(),c=1/0,y=0;for(u=0;u<f.length;u++)T(f[u])?f[u]=Array.from(f[u]):_(f[u])||(f[u]=[f[u]]),c=Math.min(c,f[u].length),y=Math.max(y,f[u].length);if(c!==y)for(u=0;u<f.length;u++){var d=y-f[u].length;d&&(f[u]=f[u].concat(i(d)))}return f}function i(s){for(var u=new Array(s),f=0;f<s;f++)u[f]="";return u}function r(s){return s.calcdata.columns.reduce(function(u,f){return f.xIndex<s.xIndex?u+f.columnWidth:u},0)}function n(s,u){return Object.keys(s).map(function(f){return k({},s[f],{auxiliaryBlocks:u})})}function a(s,u){for(var f,c={},y=0,d=0,m={firstRowIndex:null,lastRowIndex:null,rows:[]},g=0,x=0,v=0;v<s.length;v++)m.rows.push({rowIndex:v,rowHeight:f=s[v]}),((d+=f)>=u||v===s.length-1)&&(c[y]=m,m.key=x++,m.firstRowIndex=g,m.lastRowIndex=v,m={firstRowIndex:null,lastRowIndex:null,rows:[]},y+=d,g=v+1,d=0);return c}ne.exports=function(s,u){var f=t(u.cells.values),c=function(j){return j.slice(u.header.values.length,j.length)},y=t(u.header.values);y.length&&!y[0].length&&(y[0]=[""],y=t(y));var d=y.concat(c(f).map(function(){return i((y[0]||[""]).length)})),m=u.domain,g=Math.floor(s._fullLayout._size.w*(m.x[1]-m.x[0])),x=Math.floor(s._fullLayout._size.h*(m.y[1]-m.y[0])),v=u.header.values.length?d[0].map(function(){return u.header.height}):[M.emptyHeaderHeight],b=f.length?f[0].map(function(){return u.cells.height}):[],h=v.reduce(l,0),S=a(b,x-h+M.uplift),w=n(a(v,h),[]),E=n(S,w),P={},I=u._fullInput.columnorder;_(I)&&(I=Array.from(I)),I=I.concat(c(f.map(function(j,Y){return Y})));var O=d.map(function(j,Y){var B=_(u.columnwidth)?u.columnwidth[Math.min(Y,u.columnwidth.length-1)]:u.columnwidth;return o(B)?Number(B):1}),z=O.reduce(l,0);O=O.map(function(j){return j/z*g});var U=Math.max(p(u.header.line.width),p(u.cells.line.width)),R={key:u.uid+s._context.staticPlot,translateX:m.x[0]*s._fullLayout._size.w,translateY:s._fullLayout._size.h*(1-m.y[1]),size:s._fullLayout._size,width:g,maxLineWidth:U,height:x,columnOrder:I,groupHeight:x,rowBlocks:E,headerRowBlocks:w,scrollY:0,cells:k({},u.cells,{values:f}),headerCells:k({},u.header,{values:d}),gdColumns:d.map(function(j){return j[0]}),gdColumnsOriginalOrder:d.map(function(j){return j[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:d.map(function(j,Y){return P[j]=(P[j]||0)+1,{key:j+"__"+P[j],label:j,specIndex:Y,xIndex:I[Y],xScale:r,x:void 0,calcdata:void 0,columnWidth:O[Y]}})};return R.columns.forEach(function(j){j.calcdata=R,j.x=r(j)}),R}},53056:function(ne,F,e){"use strict";var M=e(92880).extendFlat;F.splitToPanels=function(k){var o=[0,0],T=M({},k,{key:"header",type:"header",page:0,prevPages:o,currentRepaint:[null,null],dragHandle:!0,values:k.calcdata.headerCells.values[k.specIndex],rowBlocks:k.calcdata.headerRowBlocks,calcdata:M({},k.calcdata,{cells:k.calcdata.headerCells})});return[M({},k,{key:"cells1",type:"cells",page:0,prevPages:o,currentRepaint:[null,null],dragHandle:!1,values:k.calcdata.cells.values[k.specIndex],rowBlocks:k.calcdata.rowBlocks}),M({},k,{key:"cells2",type:"cells",page:1,prevPages:o,currentRepaint:[null,null],dragHandle:!1,values:k.calcdata.cells.values[k.specIndex],rowBlocks:k.calcdata.rowBlocks}),T]},F.splitToCells=function(k){var T,_,p,o=[p=(_=(T=k).rowBlocks[T.page])?_.rows[0].rowIndex:0,_?p+_.rows.length:0];return(k.values||[]).slice(o[0],o[1]).map(function(T,_){return{keyWithinBlock:_+("string"==typeof T&&T.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:o[0]+_,column:k,calcdata:k.calcdata,page:k.page,rowBlocks:k.rowBlocks,value:T}})}},53212:function(ne,F,e){"use strict";var M=e(3400),k=e(60520),o=e(86968).Q;ne.exports=function(T,_,p,l){function t(i,r){return M.coerce(T,_,k,i,r)}o(_,l,t),t("columnwidth"),t("header.values"),t("header.format"),t("header.align"),t("header.prefix"),t("header.suffix"),t("header.height"),t("header.line.width"),t("header.line.color"),t("header.fill.color"),M.coerceFont(t,"header.font",l.font),function(i,r){for(var a=i.header.values.length,s=(i.columnorder||[]).slice(0,a),u=s.slice().sort(function(y,d){return y-d}),f=s.map(function(y){return u.indexOf(y)}),c=f.length;c<a;c++)f.push(c);r("columnorder",f)}(_,t),t("cells.values"),t("cells.format"),t("cells.align"),t("cells.prefix"),t("cells.suffix"),t("cells.height"),t("cells.line.width"),t("cells.line.color"),t("cells.fill.color"),M.coerceFont(t,"cells.font",l.font),_._length=null}},41724:function(ne,F,e){"use strict";ne.exports={attributes:e(60520),supplyDefaults:e(53212),calc:e(39312),plot:e(24752),moduleType:"trace",name:"table",basePlotModule:e(85852),categories:["noOpacity"],meta:{}}},24752:function(ne,F,e){"use strict";var M=e(23536),k=e(33428),o=e(3400),T=o.numberFormat,_=e(71688),p=e(43616),l=e(72736),t=e(3400).raiseToTop,i=e(3400).strTranslate,r=e(3400).cancelTransition,n=e(55992),a=e(53056),s=e(76308);function u(q){return Math.ceil(q.calcdata.maxLineWidth/2)}function f(q,ie){return"clip"+q._fullLayout._uid+"_scrollAreaBottomClip_"+ie.key}function c(q,ie){return"clip"+q._fullLayout._uid+"_columnBoundaryClippath_"+ie.calcdata.key+"_"+ie.specIndex}function y(q){return[].concat.apply([],q.map(function(ie){return ie})).map(function(ie){return ie.__data__})}function d(q,ie,te){var ee=q.selectAll("."+M.cn.scrollbarKit).data(_.repeat,_.keyFun);ee.enter().append("g").classed(M.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),ee.each(function(ce){var we,le=ce.scrollbarState;le.totalHeight=j(we=ce.rowBlocks,we.length-1)+(we.length?Y(we[we.length-1],1/0):1),le.scrollableAreaHeight=ce.groupHeight-w(ce),le.currentlyVisibleHeight=Math.min(le.totalHeight,le.scrollableAreaHeight),le.ratio=le.currentlyVisibleHeight/le.totalHeight,le.barLength=Math.max(le.ratio*le.currentlyVisibleHeight,M.goldenRatio*M.scrollbarWidth),le.barWiggleRoom=le.currentlyVisibleHeight-le.barLength,le.wiggleRoom=Math.max(0,le.totalHeight-le.scrollableAreaHeight),le.topY=0===le.barWiggleRoom?0:ce.scrollY/le.wiggleRoom*le.barWiggleRoom,le.bottomY=le.topY+le.barLength,le.dragMultiplier=le.wiggleRoom/le.barWiggleRoom}).attr("transform",function(ce){return i(ce.width+M.scrollbarWidth/2+M.scrollbarOffset,w(ce))});var $=ee.selectAll("."+M.cn.scrollbar).data(_.repeat,_.keyFun);$.enter().append("g").classed(M.cn.scrollbar,!0);var J=$.selectAll("."+M.cn.scrollbarSlider).data(_.repeat,_.keyFun);J.enter().append("g").classed(M.cn.scrollbarSlider,!0),J.attr("transform",function(ce){return i(0,ce.scrollbarState.topY||0)});var X=J.selectAll("."+M.cn.scrollbarGlyph).data(_.repeat,_.keyFun);X.enter().append("line").classed(M.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",M.scrollbarWidth).attr("stroke-linecap","round").attr("y1",M.scrollbarWidth/2),X.attr("y2",function(ce){return ce.scrollbarState.barLength-M.scrollbarWidth/2}).attr("stroke-opacity",function(ce){return ce.columnDragInProgress||!ce.scrollbarState.barWiggleRoom||te?0:.4}),X.transition().delay(0).duration(0),X.transition().delay(M.scrollbarHideDelay).duration(M.scrollbarHideDuration).attr("stroke-opacity",0);var ae=$.selectAll("."+M.cn.scrollbarCaptureZone).data(_.repeat,_.keyFun);ae.enter().append("line").classed(M.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",M.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(ce){var le=k.event.y,pe=this.getBoundingClientRect(),we=ce.scrollbarState,Te=le-pe.top,ye=k.scale.linear().domain([0,we.scrollableAreaHeight]).range([0,we.totalHeight]).clamp(!0);we.topY<=Te&&Te<=we.bottomY||P(ie,q,null,ye(Te-we.barLength/2))(ce)}).call(k.behavior.drag().origin(function(ce){return k.event.stopPropagation(),ce.scrollbarState.scrollbarScrollInProgress=!0,ce}).on("drag",P(ie,q)).on("dragend",function(){})),ae.attr("y2",function(ce){return ce.scrollbarState.scrollableAreaHeight}),ie._context.staticPlot&&(X.remove(),ae.remove())}function m(q,ie,te,ee){var pe,J=function(le){var pe=le.selectAll("."+M.cn.columnCell).data(a.splitToCells,function(we){return we.keyWithinBlock});return pe.enter().append("g").classed(M.cn.columnCell,!0),pe.exit().remove(),pe}(((pe=te.selectAll("."+M.cn.columnCells).data(_.repeat,_.keyFun)).enter().append("g").classed(M.cn.columnCells,!0),pe.exit().remove(),pe));J.each(function(pe,we){var Te=pe.calcdata.cells.font,ye=pe.column.specIndex,ve={size:v(Te.size,ye,we),color:v(Te.color,ye,we),family:v(Te.family,ye,we),weight:v(Te.weight,ye,we),style:v(Te.style,ye,we),variant:v(Te.variant,ye,we),textcase:v(Te.textcase,ye,we),lineposition:v(Te.lineposition,ye,we),shadow:v(Te.shadow,ye,we)};pe.rowNumber=pe.key,pe.align=v(pe.calcdata.cells.align,ye,we),pe.cellBorderWidth=v(pe.calcdata.cells.line.width,ye,we),pe.font=ve});var X=function(le){var pe=le.selectAll("."+M.cn.cellRect).data(_.repeat,function(we){return we.keyWithinBlock});return pe.enter().append("rect").classed(M.cn.cellRect,!0),pe}(J);!function(le){le.attr("width",function(pe){return pe.column.columnWidth}).attr("stroke-width",function(pe){return pe.cellBorderWidth}).each(function(pe){var we=k.select(this);s.stroke(we,v(pe.calcdata.cells.line.color,pe.column.specIndex,pe.rowNumber)),s.fill(we,v(pe.calcdata.cells.fill.color,pe.column.specIndex,pe.rowNumber))})}(X);var ae=function(le){var pe=le.selectAll("."+M.cn.cellTextHolder).data(_.repeat,function(we){return we.keyWithinBlock});return pe.enter().append("g").classed(M.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),pe}(J),ce=function(le){var pe=le.selectAll("."+M.cn.cellText).data(_.repeat,function(we){return we.keyWithinBlock});return pe.enter().append("text").classed(M.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){k.event.stopPropagation()}),pe}(ae);(function(le){le.each(function(pe){p.font(k.select(this),pe.font)})})(ce),g(ce,ie,ee,q),R(J)}function g(q,ie,te,ee){q.text(function($){var J=$.column.specIndex,X=$.rowNumber,ae=$.value,ce="string"==typeof ae,le=ce&&ae.match(/<br>/i),pe=!ce||le;$.mayHaveMarkup=ce&&ae.match(/[<&>]/);var we,Te="string"==typeof(we=ae)&&we.match(M.latexCheck);$.latex=Te;var ye,ve,xe=Te?"":v($.calcdata.cells.prefix,J,X)||"",Ce=Te?"":v($.calcdata.cells.suffix,J,X)||"",Oe=Te?null:v($.calcdata.cells.format,J,X)||null,be=xe+(Oe?T(Oe)($.value):$.value)+Ce;if($.wrappingNeeded=!$.wrapped&&!pe&&!Te&&(ye=x(be)),$.cellHeightMayIncrease=le||Te||$.mayHaveMarkup||(void 0===ye?x(be):ye),$.needsConvertToTspans=$.mayHaveMarkup||$.wrappingNeeded||$.latex,$.wrappingNeeded){var ue=(" "===M.wrapSplitCharacter?be.replace(/<a href=/gi,"<a_href="):be).split(M.wrapSplitCharacter),se=" "===M.wrapSplitCharacter?ue.map(function(ge){return ge.replace(/<a_href=/gi,"<a href=")}):ue;$.fragments=se.map(function(ge){return{text:ge,width:null}}),$.fragments.push({fragment:M.wrapSpacer,width:null}),ve=se.join(M.lineBreaker)+M.lineBreaker+M.wrapSpacer}else delete $.fragments,ve=be;return ve}).attr("dy",function($){return $.needsConvertToTspans?0:"0.75em"}).each(function($){var J=this,X=k.select(J);$.needsConvertToTspans?l.convertToTspans(X,ee,($.wrappingNeeded?O:z)(te,J,ie,ee,$)):k.select(J.parentNode).attr("transform",function(ce){return i(U(ce),M.cellPad)}).attr("text-anchor",function(ce){return{left:"start",center:"middle",right:"end"}[ce.align]})})}function x(q){return-1!==q.indexOf(M.wrapSplitCharacter)}function v(q,ie,te){if(o.isArrayOrTypedArray(q)){var ee=q[Math.min(ie,q.length-1)];return o.isArrayOrTypedArray(ee)?ee[Math.min(te,ee.length-1)]:ee}return q}function b(q,ie,te){q.transition().ease(M.releaseTransitionEase).duration(M.releaseTransitionDuration).attr("transform",i(ie.x,te))}function h(q){return"cells"===q.type}function S(q){return"header"===q.type}function w(q){return(q.rowBlocks.length?q.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(ie,te){return ie+Y(te,1/0)},0)}function E(q,ie,te){var ee=y(ie)[0];if(void 0!==ee){var $=ee.rowBlocks,J=ee.calcdata,X=j($,$.length),ae=ee.calcdata.groupHeight-w(ee),ce=J.scrollY=Math.max(0,Math.min(X-ae,J.scrollY)),le=function(pe,we,Te){for(var ye=[],ve=0,xe=0;xe<pe.length;xe++){for(var Ce=pe[xe],Oe=Ce.rows,be=0,ue=0;ue<Oe.length;ue++)be+=Oe[ue].rowHeight;Ce.allRowsHeight=be,we<ve+be&&we+Te>ve&&ye.push(xe),ve+=be}return ye}($,ce,ae);1===le.length&&(le[0]===$.length-1?le.unshift(le[0]-1):le.push(le[0]+1)),le[0]%2&&le.reverse(),ie.each(function(pe,we){pe.page=le[we],pe.scrollY=ce}),ie.attr("transform",function(pe){var we=j(pe.rowBlocks,pe.page)-pe.scrollY;return i(0,we)}),q&&(I(q,te,ie,le,ee.prevPages,ee,0),I(q,te,ie,le,ee.prevPages,ee,1),d(te,q))}}function P(q,ie,te,ee){return function($){var J=$.calcdata?$.calcdata:$,X=ie.filter(function(pe){return J.key===pe.key}),ce=J.scrollY;J.scrollY=void 0===ee?J.scrollY+(te||J.scrollbarState.dragMultiplier)*k.event.dy:ee;var le=X.selectAll("."+M.cn.yColumn).selectAll("."+M.cn.columnBlock).filter(h);return E(q,le,X),J.scrollY===ce}}function I(q,ie,te,ee,$,J,X){ee[X]!==$[X]&&(clearTimeout(J.currentRepaint[X]),J.currentRepaint[X]=setTimeout(function(){var ae=te.filter(function(ce,le){return le===X&&ee[le]!==$[le]});m(q,ie,ae,te),$[X]=ee[X]}))}function O(q,ie,te,ee){return function(){var $=k.select(ie.parentNode);$.each(function(J){var X=J.fragments;$.selectAll("tspan.line").each(function(ve,xe){X[xe].width=this.getComputedTextLength()});var ae,ce,le=X[X.length-1].width,pe=X.slice(0,-1),we=[],Te=0,ye=J.column.columnWidth-2*M.cellPad;for(J.value="";pe.length;)Te+(ce=(ae=pe.shift()).width+le)>ye&&(J.value+=we.join(M.wrapSpacer)+M.lineBreaker,we=[],Te=0),we.push(ae.text),Te+=ce;Te&&(J.value+=we.join(M.wrapSpacer)),J.wrapped=!0}),$.selectAll("tspan.line").remove(),g($.select("."+M.cn.cellText),te,q,ee),k.select(ie.parentNode.parentNode).call(R)}}function z(q,ie,te,ee,$){return function(){if(!$.settledY){var J=k.select(ie.parentNode),X=V($),ae=$.key-X.firstRowIndex,ce=X.rows[ae].rowHeight,le=$.cellHeightMayIncrease?ie.parentNode.getBoundingClientRect().height+2*M.cellPad:ce,pe=Math.max(le,ce);pe-X.rows[ae].rowHeight&&(X.rows[ae].rowHeight=pe,q.selectAll("."+M.cn.columnCell).call(R),E(null,q.filter(h),0),d(te,ee,!0)),J.attr("transform",function(){var Te=this.parentNode.getBoundingClientRect(),ye=k.select(this.parentNode).select("."+M.cn.cellRect).node().getBoundingClientRect(),ve=this.transform.baseVal.consolidate(),xe=ye.top-Te.top+(ve?ve.matrix.f:M.cellPad);return i(U($,k.select(this.parentNode).select("."+M.cn.cellTextHolder).node().getBoundingClientRect().width),xe)}),$.settledY=!0}}}function U(q,ie){switch(q.align){case"left":default:return M.cellPad;case"right":return q.column.columnWidth-(ie||0)-M.cellPad;case"center":return(q.column.columnWidth-(ie||0))/2}}function R(q){q.attr("transform",function(ie){var te=ie.rowBlocks[0].auxiliaryBlocks.reduce(function($,J){return $+Y(J,1/0)},0),ee=Y(V(ie),ie.key);return i(0,ee+te)}).selectAll("."+M.cn.cellRect).attr("height",function(ie){return(te=V(ie),ee=ie.key,te.rows[ee-te.firstRowIndex]).rowHeight;var te,ee})}function j(q,ie){for(var te=0,ee=ie-1;ee>=0;ee--)te+=B(q[ee]);return te}function Y(q,ie){for(var te=0,ee=0;ee<q.rows.length&&q.rows[ee].rowIndex<ie;ee++)te+=q.rows[ee].rowHeight;return te}function B(q){var ie=q.allRowsHeight;if(void 0!==ie)return ie;for(var te=0,ee=0;ee<q.rows.length;ee++)te+=q.rows[ee].rowHeight;return q.allRowsHeight=te,te}function V(q){return q.rowBlocks[q.page]}ne.exports=function(q,ie){var te=!q._context.staticPlot,ee=q._fullLayout._paper.selectAll("."+M.cn.table).data(ie.map(function(Ce){var Oe=_.unwrap(Ce).trace;return n(q,Oe)}),_.keyFun);ee.exit().remove(),ee.enter().append("g").classed(M.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),ee.attr("width",function(Ce){return Ce.width+Ce.size.l+Ce.size.r}).attr("height",function(Ce){return Ce.height+Ce.size.t+Ce.size.b}).attr("transform",function(Ce){return i(Ce.translateX,Ce.translateY)});var $=ee.selectAll("."+M.cn.tableControlView).data(_.repeat,_.keyFun),J=$.enter().append("g").classed(M.cn.tableControlView,!0).style("box-sizing","content-box");if(te){var X="onwheel"in document?"wheel":"mousewheel";J.on("mousemove",function(Ce){$.filter(function(Oe){return Ce===Oe}).call(d,q)}).on(X,function(Ce){Ce.scrollbarState.wheeling||(Ce.scrollbarState.wheeling=!0,P(q,$,null,Ce.scrollY+k.event.deltaY)(Ce)||(k.event.stopPropagation(),k.event.preventDefault()),Ce.scrollbarState.wheeling=!1)}).call(d,q,!0)}$.attr("transform",function(Ce){return i(Ce.size.l,Ce.size.t)});var ae=$.selectAll("."+M.cn.scrollBackground).data(_.repeat,_.keyFun);ae.enter().append("rect").classed(M.cn.scrollBackground,!0).attr("fill","none"),ae.attr("width",function(Ce){return Ce.width}).attr("height",function(Ce){return Ce.height}),$.each(function(Ce){p.setClipUrl(k.select(this),f(q,Ce),q)});var ce=$.selectAll("."+M.cn.yColumn).data(function(Ce){return Ce.columns},_.keyFun);ce.enter().append("g").classed(M.cn.yColumn,!0),ce.exit().remove(),ce.attr("transform",function(Ce){return i(Ce.x,0)}),te&&ce.call(k.behavior.drag().origin(function(Ce){return b(k.select(this),Ce,-M.uplift),t(this),Ce.calcdata.columnDragInProgress=!0,d($.filter(function(Oe){return Ce.calcdata.key===Oe.key}),q),Ce}).on("drag",function(Ce){var Oe=k.select(this),be=function(ue){return(Ce===ue?k.event.x:ue.x)+ue.columnWidth/2};Ce.x=Math.max(-M.overdrag,Math.min(Ce.calcdata.width+M.overdrag-Ce.columnWidth,k.event.x)),y(ce).filter(function(ue){return ue.calcdata.key===Ce.calcdata.key}).sort(function(ue,se){return be(ue)-be(se)}).forEach(function(ue,se){ue.xIndex=se,ue.x=Ce===ue?ue.x:ue.xScale(ue)}),ce.filter(function(ue){return Ce!==ue}).transition().ease(M.transitionEase).duration(M.transitionDuration).attr("transform",function(ue){return i(ue.x,0)}),Oe.call(r).attr("transform",i(Ce.x,-M.uplift))}).on("dragend",function(Ce){var ue,se,ge,Ie,Oe=k.select(this),be=Ce.calcdata;Ce.x=Ce.xScale(Ce),Ce.calcdata.columnDragInProgress=!1,b(Oe,Ce,0),ue=q,se=be,ge=be.columns.map(function(ue){return ue.xIndex}),Ie=se.gdColumnsOriginalOrder,se.gdColumns.sort(function(ke,Se){return ge[Ie.indexOf(ke)]-ge[Ie.indexOf(Se)]}),se.columnorder=ge,ue.emit("plotly_restyle")})),ce.each(function(Ce){p.setClipUrl(k.select(this),c(q,Ce),q)});var le=ce.selectAll("."+M.cn.columnBlock).data(a.splitToPanels,_.keyFun);le.enter().append("g").classed(M.cn.columnBlock,!0).attr("id",function(Ce){return Ce.key}),le.style("cursor",function(Ce){return Ce.dragHandle?"ew-resize":Ce.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var pe=le.filter(S),we=le.filter(h);te&&we.call(k.behavior.drag().origin(function(Ce){return k.event.stopPropagation(),Ce}).on("drag",P(q,$,-1)).on("dragend",function(){})),m(q,$,pe,le),m(q,$,we,le);var Te=$.selectAll("."+M.cn.scrollAreaClip).data(_.repeat,_.keyFun);Te.enter().append("clipPath").classed(M.cn.scrollAreaClip,!0).attr("id",function(Ce){return f(q,Ce)});var ye=Te.selectAll("."+M.cn.scrollAreaClipRect).data(_.repeat,_.keyFun);ye.enter().append("rect").classed(M.cn.scrollAreaClipRect,!0).attr("x",-M.overdrag).attr("y",-M.uplift).attr("fill","none"),ye.attr("width",function(Ce){return Ce.width+2*M.overdrag}).attr("height",function(Ce){return Ce.height+M.uplift}),ce.selectAll("."+M.cn.columnBoundary).data(_.repeat,_.keyFun).enter().append("g").classed(M.cn.columnBoundary,!0);var ve=ce.selectAll("."+M.cn.columnBoundaryClippath).data(_.repeat,_.keyFun);ve.enter().append("clipPath").classed(M.cn.columnBoundaryClippath,!0),ve.attr("id",function(Ce){return c(q,Ce)});var xe=ve.selectAll("."+M.cn.columnBoundaryRect).data(_.repeat,_.keyFun);xe.enter().append("rect").classed(M.cn.columnBoundaryRect,!0).attr("fill","none"),xe.attr("width",function(Ce){return Ce.columnWidth+2*u(Ce)}).attr("height",function(Ce){return Ce.calcdata.height+2*u(Ce)+M.uplift}).attr("x",function(Ce){return-u(Ce)}).attr("y",function(Ce){return-u(Ce)}),E(null,we,$)}},40516:function(ne,F,e){"use strict";var M=e(21776).Ks,k=e(21776).Gw,o=e(49084),T=e(86968).u,_=e(74996),p=e(424),l=e(32984),t=e(92880).extendFlat,i=e(98192).c;ne.exports={labels:p.labels,parents:p.parents,values:p.values,branchvalues:p.branchvalues,count:p.count,level:p.level,maxdepth:p.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:t({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:p.marker.colors,pattern:i,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:p.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},o("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:t({},_.textfont,{}),editType:"calc"},text:_.text,textinfo:p.textinfo,texttemplate:k({editType:"plot"},{keys:l.eventDataKeys.concat(["label","value"])}),hovertext:_.hovertext,hoverinfo:p.hoverinfo,hovertemplate:M({},{keys:l.eventDataKeys}),textfont:_.textfont,insidetextfont:_.insidetextfont,outsidetextfont:t({},_.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:_.sort,root:p.root,domain:T({name:"treemap",trace:!0,editType:"calc"})}},79516:function(ne,F,e){"use strict";var M=e(7316);F.name="treemap",F.plot=function(k,o,T,_){M.plotBasePlot(F.name,k,o,T,_)},F.clean=function(k,o,T,_){M.cleanBasePlot(F.name,k,o,T,_)}},97840:function(ne,F,e){"use strict";var M=e(3776);F.r=function(k,o){return M.calc(k,o)},F.q=function(k){return M._runCrossTraceCalc("treemap",k)}},32984:function(ne){"use strict";ne.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},34092:function(ne,F,e){"use strict";var M=e(3400),k=e(40516),o=e(76308),T=e(86968).Q,_=e(31508).handleText,p=e(78048).TEXTPAD,l=e(74174).handleMarkerDefaults,t=e(8932),i=t.hasColorscale,r=t.handleDefaults;ne.exports=function(n,a,s,u){function f(b,h){return M.coerce(n,a,k,b,h)}var c=f("labels"),y=f("parents");if(c&&c.length&&y&&y.length){var d=f("values");f(d&&d.length?"branchvalues":"count"),f("level"),f("maxdepth"),"squarify"===f("tiling.packing")&&f("tiling.squarifyratio"),f("tiling.flip"),f("tiling.pad");var m=f("text");f("texttemplate"),a.texttemplate||f("textinfo",M.isArrayOrTypedArray(m)?"text+label":"label"),f("hovertext"),f("hovertemplate");var g=f("pathbar.visible");_(n,a,u,f,"auto",{hasPathbar:g,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),f("textposition");var x=-1!==a.textposition.indexOf("bottom");l(n,a,u,f),(a._hasColorscale=i(n,"marker","colors")||(n.marker||{}).coloraxis)?r(n,a,u,f,{prefix:"marker.",cLetter:"c"}):f("marker.depthfade",!(a.marker.colors||[]).length);var v=2*a.textfont.size;f("marker.pad.t",x?v/4:v),f("marker.pad.l",v/4),f("marker.pad.r",v/4),f("marker.pad.b",x?v:v/4),f("marker.cornerradius"),a._hovered={marker:{line:{width:2,color:o.contrast(u.paper_bgcolor)}}},g&&(f("pathbar.thickness",a.pathbar.textfont.size+2*p),f("pathbar.side"),f("pathbar.edgeshape")),f("sort"),f("root.color"),T(a,u,f),a._length=null}else a.visible=!1}},95808:function(ne,F,e){"use strict";var M=e(33428),k=e(78176),o=e(82744).clearMinTextSize,T=e(60100).resizeText,_=e(52960);ne.exports=function(p,l,t,i,r){var n,a,s=r.type,u=r.drawDescendants,f=p._fullLayout,c=f["_"+s+"layer"],y=!t;o(s,f),(n=c.selectAll("g.trace."+s).data(l,function(d){return d[0].trace.uid})).enter().append("g").classed("trace",!0).classed(s,!0),n.order(),!f.uniformtext.mode&&k.hasTransition(t)?(i&&(a=i()),M.transition().duration(t.duration).ease(t.easing).each("end",function(){a&&a()}).each("interrupt",function(){a&&a()}).each(function(){c.selectAll("g.trace").each(function(d){_(p,d,this,t,u)})})):(n.each(function(d){_(p,d,this,t,u)}),f.uniformtext.mode&&T(p,c.selectAll(".trace"),s)),y&&n.exit().remove()}},27336:function(ne,F,e){"use strict";var M=e(33428),k=e(3400),o=e(43616),T=e(72736),_=e(13832),p=e(66192).styleOne,l=e(32984),t=e(78176),i=e(45716),r=!0;ne.exports=function(n,a,s,u,f){var c=f.barDifY,y=f.width,d=f.height,m=f.viewX,g=f.viewY,x=f.pathSlice,v=f.toMoveInsideSlice,b=f.strTransform,h=f.hasTransition,S=f.handleSlicesExit,w=f.makeUpdateSliceInterpolator,E=f.makeUpdateTextInterpolator,P={},I=n._context.staticPlot,O=n._fullLayout,z=a[0],U=z.trace,R=z.hierarchy,j=y/U._entryDepth,Y=t.listPath(s.data,"id"),B=_(R.copy(),[y,d],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(B=B.filter(function(q){var ie=Y.indexOf(q.data.id);return-1!==ie&&(q.x0=j*ie,q.x1=j*(ie+1),q.y0=c,q.y1=c+d,q.onPathbar=!0,!0)})).reverse(),(u=u.data(B,t.getPtId)).enter().append("g").classed("pathbar",!0),S(u,r,P,[y,d],x),u.order();var V=u;h&&(V=V.transition().each("end",function(){var q=M.select(this);t.setSliceCursor(q,n,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),V.each(function(q){q._x0=m(q.x0),q._x1=m(q.x1),q._y0=g(q.y0),q._y1=g(q.y1),q._hoverX=m(q.x1-Math.min(y,d)/2),q._hoverY=g(q.y1-d/2);var ie=M.select(this),te=k.ensureSingle(ie,"path","surface",function(X){X.style("pointer-events",I?"none":"all")});h?te.transition().attrTween("d",function(X){var ae=w(X,r,P,[y,d]);return function(ce){return x(ae(ce))}}):te.attr("d",x),ie.call(i,s,n,a,{styleOne:p,eventDataKeys:l.eventDataKeys,transitionTime:l.CLICK_TRANSITION_TIME,transitionEasing:l.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,n,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:n._transitioning}),te.call(p,q,U,n,{hovered:!1}),q._text=(t.getPtLabel(q)||"").split("<br>").join(" ")||"";var ee=k.ensureSingle(ie,"g","slicetext"),$=k.ensureSingle(ee,"text","",function(X){X.attr("data-notex",1)}),J=k.ensureUniformFontSize(n,t.determineTextFont(U,q,O.font,{onPathbar:!0}));$.text(q._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(o.font,J).call(T.convertToTspans,n),q.textBB=o.bBox($.node()),q.transform=v(q,{fontSize:J.size,onPathbar:!0}),q.transform.fontSize=J.size,h?$.transition().attrTween("transform",function(X){var ae=E(X,r,P,[y,d]);return function(ce){return b(ae(ce))}}):$.attr("transform",b(q))})}},76477:function(ne,F,e){"use strict";var M=e(33428),k=e(3400),o=e(43616),T=e(72736),_=e(13832),p=e(66192).styleOne,l=e(32984),t=e(78176),i=e(45716),r=e(96488).formatSliceLabel,n=!1;ne.exports=function(a,s,u,f,c){var y=c.width,d=c.height,m=c.viewX,g=c.viewY,x=c.pathSlice,v=c.toMoveInsideSlice,b=c.strTransform,h=c.hasTransition,S=c.handleSlicesExit,w=c.makeUpdateSliceInterpolator,E=c.makeUpdateTextInterpolator,P=c.prevEntry,I=a._context.staticPlot,O=a._fullLayout,z=s[0].trace,U=-1!==z.textposition.indexOf("left"),R=-1!==z.textposition.indexOf("right"),j=-1!==z.textposition.indexOf("bottom"),Y=!j&&!z.marker.pad.t||j&&!z.marker.pad.b,B=_(u,[y,d],{packing:z.tiling.packing,squarifyratio:z.tiling.squarifyratio,flipX:z.tiling.flip.indexOf("x")>-1,flipY:z.tiling.flip.indexOf("y")>-1,pad:{inner:z.tiling.pad,top:z.marker.pad.t,left:z.marker.pad.l,right:z.marker.pad.r,bottom:z.marker.pad.b}}).descendants(),V=1/0,q=-1/0;B.forEach(function(J){var X=J.depth;X>=z._maxDepth?(J.x0=J.x1=(J.x0+J.x1)/2,J.y0=J.y1=(J.y0+J.y1)/2):(V=Math.min(V,X),q=Math.max(q,X))}),f=f.data(B,t.getPtId),z._maxVisibleLayers=isFinite(q)?q-V+1:0,f.enter().append("g").classed("slice",!0),S(f,n,{},[y,d],x),f.order();var ie=null;if(h&&P){var te=t.getPtId(P);f.each(function(J){null===ie&&t.getPtId(J)===te&&(ie={x0:J.x0,x1:J.x1,y0:J.y0,y1:J.y1})})}var ee=function(){return ie||{x0:0,x1:y,y0:0,y1:d}},$=f;return h&&($=$.transition().each("end",function(){var J=M.select(this);t.setSliceCursor(J,a,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),$.each(function(J){var X=t.isHeader(J,z);J._x0=m(J.x0),J._x1=m(J.x1),J._y0=g(J.y0),J._y1=g(J.y1),J._hoverX=m(J.x1-z.marker.pad.r),J._hoverY=g(j?J.y1-z.marker.pad.b/2:J.y0+z.marker.pad.t/2);var ae=M.select(this),ce=k.ensureSingle(ae,"path","surface",function(ve){ve.style("pointer-events",I?"none":"all")});h?ce.transition().attrTween("d",function(ve){var xe=w(ve,n,ee(),[y,d]);return function(Ce){return x(xe(Ce))}}):ce.attr("d",x),ae.call(i,u,a,s,{styleOne:p,eventDataKeys:l.eventDataKeys,transitionTime:l.CLICK_TRANSITION_TIME,transitionEasing:l.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,a,{isTransitioning:a._transitioning}),ce.call(p,J,z,a,{hovered:!1}),J._text=J.x0===J.x1||J.y0===J.y1?"":X?Y?"":t.getPtLabel(J)||"":r(J,u,z,s,O)||"";var le=k.ensureSingle(ae,"g","slicetext"),pe=k.ensureSingle(le,"text","",function(ve){ve.attr("data-notex",1)}),we=k.ensureUniformFontSize(a,t.determineTextFont(z,J,O.font)),Te=J._text||" ",ye=X&&-1===Te.indexOf("<br>");pe.text(Te).classed("slicetext",!0).attr("text-anchor",R?"end":U||ye?"start":"middle").call(o.font,we).call(T.convertToTspans,a),J.textBB=o.bBox(pe.node()),J.transform=v(J,{fontSize:we.size,isHeader:X}),J.transform.fontSize=we.size,h?pe.transition().attrTween("transform",function(ve){var xe=E(ve,n,ee(),[y,d]);return function(Ce){return b(xe(Ce))}}):pe.attr("transform",b(J))}),ie}},83024:function(ne){"use strict";ne.exports=function F(e,M,k){var o;k.swapXY&&(o=e.x0,e.x0=e.y0,e.y0=o,o=e.x1,e.x1=e.y1,e.y1=o),k.flipX&&(o=e.x0,e.x0=M[0]-e.x1,e.x1=M[0]-o),k.flipY&&(o=e.y0,e.y0=M[1]-e.y1,e.y1=M[1]-o);var T=e.children;if(T)for(var _=0;_<T.length;_++)F(T[_],M,k)}},31991:function(ne,F,e){"use strict";ne.exports={moduleType:"trace",name:"treemap",basePlotModule:e(79516),categories:[],animatable:!0,attributes:e(40516),layoutAttributes:e(45392),supplyDefaults:e(34092),supplyLayoutDefaults:e(77480),calc:e(97840).r,crossTraceCalc:e(97840).q,plot:e(53264),style:e(66192).style,colorbar:e(5528),meta:{}}},45392:function(ne){"use strict";ne.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77480:function(ne,F,e){"use strict";var M=e(3400),k=e(45392);ne.exports=function(o,T){function _(p,l){return M.coerce(o,T,k,p,l)}_("treemapcolorway",T.colorway),_("extendtreemapcolors")}},13832:function(ne,F,e){"use strict";var M=e(74148),k=e(83024);ne.exports=function(o,T,_){var p,l=_.flipX,t=_.flipY,i="dice-slice"===_.packing,r=_.pad[t?"bottom":"top"],n=_.pad[l?"right":"left"],a=_.pad[l?"left":"right"],s=_.pad[t?"top":"bottom"];i&&(p=n,n=r,r=p,p=a,a=s,s=p);var u=M.treemap().tile(function(f,c){switch(f){case"squarify":return M.treemapSquarify.ratio(c);case"binary":return M.treemapBinary;case"dice":return M.treemapDice;case"slice":return M.treemapSlice;default:return M.treemapSliceDice}}(_.packing,_.squarifyratio)).paddingInner(_.pad.inner).paddingLeft(n).paddingRight(a).paddingTop(r).paddingBottom(s).size(i?[T[1],T[0]]:T)(o);return(i||l||t)&&k(u,T,{swapXY:i,flipX:l,flipY:t}),u}},53264:function(ne,F,e){"use strict";var M=e(95808),k=e(76477);ne.exports=function(o,T,_,p){return M(o,T,_,p,{type:"treemap",drawDescendants:k})}},52960:function(ne,F,e){"use strict";var M=e(33428),k=e(67756).qy,o=e(78176),T=e(3400),_=e(78048).TEXTPAD,p=e(98184).toMoveInsideBar,l=e(82744).recordMinTextSize,t=e(32984),i=e(27336);function r(n){return o.isHierarchyRoot(n)?"":o.getPtId(n)}ne.exports=function(n,a,s,u,f){var c=n._fullLayout,y=a[0],d=y.trace,m="icicle"===d.type,g=y.hierarchy,x=o.findEntryWithLevel(g,d.level),v=M.select(s),b=v.selectAll("g.pathbar"),h=v.selectAll("g.slice");if(!x)return b.remove(),void h.remove();var S=o.isHierarchyRoot(x),w=!c.uniformtext.mode&&o.hasTransition(u),E=o.getMaxDepth(d),P=c._size,I=d.domain,O=P.w*(I.x[1]-I.x[0]),z=P.h*(I.y[1]-I.y[0]),U=O,R=d.pathbar.thickness,j=d.marker.line.width+t.gapWithPathbar,Y=d.pathbar.visible?d.pathbar.side.indexOf("bottom")>-1?z+j:-(R+j):0,B={x0:U,x1:U,y0:Y,y1:Y+R},V=function(Me,Le,Ne){var Re=d.tiling.pad,He=function(ht){return ht-Re<=Le.x0},Ze=function(ht){return ht+Re>=Le.x1},nt=function(ht){return ht-Re<=Le.y0},ft=function(ht){return ht+Re>=Le.y1};return Me.x0===Le.x0&&Me.x1===Le.x1&&Me.y0===Le.y0&&Me.y1===Le.y1?{x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1}:{x0:He(Me.x0-Re)?0:Ze(Me.x0-Re)?Ne[0]:Me.x0,x1:He(Me.x1+Re)?0:Ze(Me.x1+Re)?Ne[0]:Me.x1,y0:nt(Me.y0-Re)?0:ft(Me.y0-Re)?Ne[1]:Me.y0,y1:nt(Me.y1+Re)?0:ft(Me.y1+Re)?Ne[1]:Me.y1}},q=null,ie={},te={},ee=null,$=function(Me,Le){return Le?ie[r(Me)]:te[r(Me)]};y.hasMultipleRoots&&S&&E++,d._maxDepth=E,d._backgroundColor=c.paper_bgcolor,d._entryDepth=x.data.depth,d._atRootLevel=S;var J=-O/2+P.l+P.w*(I.x[1]+I.x[0])/2,X=-z/2+P.t+P.h*(1-(I.y[1]+I.y[0])/2),ae=function(Me){return J+Me},ce=function(Me){return X+Me},le=ce(0),pe=ae(0),we=function(Me){return pe+Me},Te=function(Me){return le+Me};function ye(Me,Le){return Me+","+Le}var ve=we(0),xe=function(Me){Me.x=Math.max(ve,Me.x)},Ce=d.pathbar.edgeshape,Oe=d[m?"tiling":"marker"].pad,be=function(Me){return-1!==d.textposition.indexOf(Me)},ue=be("top"),se=be("left"),ge=be("right"),Ie=be("bottom"),ke=function(Me,Le){var Ne=Me.x0,Re=Me.x1,He=Me.y0,Ze=Me.y1,nt=Me.textBB,ft=ue||Le.isHeader&&!Ie?"start":Ie?"end":"middle",ht=be("right"),Tt=be("left")||Le.onPathbar?-1:ht?1:0;if(Le.isHeader){if((Ne+=(m?Oe:Oe.l)-_)>=(Re-=(m?Oe:Oe.r)-_)){var At=(Ne+Re)/2;Ne=At,Re=At}var _t;Ie?He<(_t=Ze-(m?Oe:Oe.b))&&_t<Ze&&(He=_t):He<(_t=He+(m?Oe:Oe.t))&&_t<Ze&&(Ze=_t)}var ot=p(Ne,Re,He,Ze,nt,{isHorizontal:!1,constrained:!0,angle:0,anchor:ft,leftToRight:Tt});return ot.fontSize=Le.fontSize,ot.targetX=ae(ot.targetX),ot.targetY=ce(ot.targetY),isNaN(ot.targetX)||isNaN(ot.targetY)?{}:(Ne!==Re&&He!==Ze&&l(d.type,ot,c),{scale:ot.scale,rotate:ot.rotate,textX:ot.textX,textY:ot.textY,anchorX:ot.anchorX,anchorY:ot.anchorY,targetX:ot.targetX,targetY:ot.targetY})},Se=function(Me,Le){for(var Ne,Re=0,He=Me;!Ne&&Re<E;)Re++,(He=He.parent)?Ne=$(He,Le):Re=E;return Ne||{}},Pe=function(Me,Le,Ne,Re,He){var Ze,nt=$(Me,Le);if(nt)Ze=nt;else if(Le)Ze=B;else if(q)if(Me.parent){var ft=ee||Ne;ft&&!Le?Ze=V(Me,ft,Re):T.extendFlat(Ze={},Se(Me,Le))}else Ze=T.extendFlat({},Me),m&&("h"===He.orientation?He.flipX?Ze.x0=Me.x1:Ze.x1=0:He.flipY?Ze.y0=Me.y1:Ze.y1=0);else Ze={};return k(Ze,{x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1})},Fe=function(Me,Le,Ne,Re){var ht,At,_t,He=$(Me,Le),Ze={},nt=(ht=Me,At=Ne,_t=Re,Le?ie[r(g)]||B:ht.data.depth-x.data.depth<E?V(ht,te[d.level]||At,_t):{});T.extendFlat(Ze,{transform:ke({x0:nt.x0,x1:nt.x1,y0:nt.y0,y1:nt.y1,textBB:Me.textBB,_text:Me._text},{isHeader:o.isHeader(Me,d)})}),He?Ze=He:Me.parent&&T.extendFlat(Ze,Se(Me,Le));var ft=Me.transform;return Me.x0!==Me.x1&&Me.y0!==Me.y1&&l(d.type,ft,c),k(Ze,{transform:{scale:ft.scale,rotate:ft.rotate,textX:ft.textX,textY:ft.textY,anchorX:ft.anchorX,anchorY:ft.anchorY,targetX:ft.targetX,targetY:ft.targetY}})},Be=function(Me,Le,Ne,Re,He){var Ze=Re[0],nt=Re[1];w?Me.exit().transition().each(function(){var ft=M.select(this);ft.select("path.surface").transition().attrTween("d",function(ht){var Tt=function(At,_t,ot,it){var Pt,jt=$(At,_t);if(_t)Pt=B;else{var Ut=$(x,_t);Pt=Ut?V(At,Ut,it):{}}return k(jt,Pt)}(ht,Le,0,[Ze,nt]);return function(At){return He(Tt(At))}}),ft.select("g.slicetext").attr("opacity",0)}).remove():Me.exit().remove()},me=function(Me){var Le=Me.transform;return Me.x0!==Me.x1&&Me.y0!==Me.y1&&l(d.type,Le,c),T.getTextTransform({textX:Le.textX,textY:Le.textY,anchorX:Le.anchorX,anchorY:Le.anchorY,targetX:Le.targetX,targetY:Le.targetY,scale:Le.scale,rotate:Le.rotate})};w&&(b.each(function(Me){ie[r(Me)]={x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1},Me.transform&&(ie[r(Me)].transform={textX:Me.transform.textX,textY:Me.transform.textY,anchorX:Me.transform.anchorX,anchorY:Me.transform.anchorY,targetX:Me.transform.targetX,targetY:Me.transform.targetY,scale:Me.transform.scale,rotate:Me.transform.rotate})}),h.each(function(Me){te[r(Me)]={x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1},Me.transform&&(te[r(Me)].transform={textX:Me.transform.textX,textY:Me.transform.textY,anchorX:Me.transform.anchorX,anchorY:Me.transform.anchorY,targetX:Me.transform.targetX,targetY:Me.transform.targetY,scale:Me.transform.scale,rotate:Me.transform.rotate}),!q&&o.isEntry(Me)&&(q=Me)})),ee=f(n,a,x,h,{width:O,height:z,viewX:ae,viewY:ce,pathSlice:function(Me){var Le=ae(Me.x0),Ne=ae(Me.x1),Re=ce(Me.y0),He=ce(Me.y1),Ze=Ne-Le,nt=He-Re;if(!Ze||!nt)return"";var ht=Math.min(d.marker.cornerradius||0,Ze/2,nt/2);ht&&Me.data&&Me.data.data&&Me.data.data.label&&(ue&&(ht=Math.min(ht,Oe.t)),se&&(ht=Math.min(ht,Oe.l)),ge&&(ht=Math.min(ht,Oe.r)),Ie&&(ht=Math.min(ht,Oe.b)));var Tt=function(At,_t){return ht?"a"+ye(ht,ht)+" 0 0 1 "+ye(At,_t):""};return"M"+ye(Le,Re+ht)+Tt(ht,-ht)+"L"+ye(Ne-ht,Re)+Tt(ht,ht)+"L"+ye(Ne,He-ht)+Tt(-ht,ht)+"L"+ye(Le+ht,He)+Tt(-ht,-ht)+"Z"},toMoveInsideSlice:ke,prevEntry:q,makeUpdateSliceInterpolator:Pe,makeUpdateTextInterpolator:Fe,handleSlicesExit:Be,hasTransition:w,strTransform:me}),d.pathbar.visible?i(n,a,x,b,{barDifY:Y,width:U,height:R,viewX:we,viewY:Te,pathSlice:function(Me){var Le=we(Math.max(Math.min(Me.x0,Me.x0),0)),Ne=we(Math.min(Math.max(Me.x1,Me.x1),U)),Re=Te(Me.y0),He=Te(Me.y1),Ze=R/2,nt={},ft={};nt.x=Le,ft.x=Ne,nt.y=ft.y=(Re+He)/2;var ht={x:Le,y:Re},Tt={x:Ne,y:Re},At={x:Ne,y:He},_t={x:Le,y:He};return">"===Ce?(ht.x-=Ze,Tt.x-=Ze,At.x-=Ze,_t.x-=Ze):"/"===Ce?(At.x-=Ze,_t.x-=Ze,nt.x-=Ze/2,ft.x-=Ze/2):"\\"===Ce?(ht.x-=Ze,Tt.x-=Ze,nt.x-=Ze/2,ft.x-=Ze/2):"<"===Ce&&(nt.x-=Ze,ft.x-=Ze),xe(ht),xe(_t),xe(nt),xe(Tt),xe(At),xe(ft),"M"+ye(ht.x,ht.y)+"L"+ye(Tt.x,Tt.y)+"L"+ye(ft.x,ft.y)+"L"+ye(At.x,At.y)+"L"+ye(_t.x,_t.y)+"L"+ye(nt.x,nt.y)+"Z"},toMoveInsideSlice:ke,makeUpdateSliceInterpolator:Pe,makeUpdateTextInterpolator:Fe,handleSlicesExit:Be,hasTransition:w,strTransform:me}):b.remove()}},66192:function(ne,F,e){"use strict";var M=e(33428),k=e(76308),o=e(3400),T=e(78176),_=e(82744).resizeText,p=e(60404);function l(t,i,r,n,a){var s,u,f=(a||{}).hovered,c=i.data.data,y=c.i,d=c.color,m=T.isHierarchyRoot(i),g=1;if(f)s=r._hovered.marker.line.color,u=r._hovered.marker.line.width;else if(m&&d===r.root.color)g=100,s="rgba(0,0,0,0)",u=0;else if(s=o.castOption(r,y,"marker.line.color")||k.defaultLine,u=o.castOption(r,y,"marker.line.width")||0,!r._hasColorscale&&!i.onPathbar){var x=r.marker.depthfade;if(x){var v,b=k.combine(k.addOpacity(r._backgroundColor,.75),d);if(!0===x){var h=T.getMaxDepth(r);v=isFinite(h)?T.isLeaf(i)?0:r._maxVisibleLayers-(i.data.depth-r._entryDepth):i.data.height+1}else v=i.data.depth-r._entryDepth,r._atRootLevel||v++;if(v>0)for(var S=0;S<v;S++)d=k.combine(k.addOpacity(b,.5*S/v),d)}}t.call(p,i,r,n,d).style("stroke-width",u).call(k.stroke,s).style("opacity",g)}ne.exports={style:function(t){var i=t._fullLayout._treemaplayer.selectAll(".trace");_(t,i,"treemap"),i.each(function(r){var n=M.select(this),a=r[0].trace;n.style("opacity",a.opacity),n.selectAll("path.surface").each(function(s){M.select(this).call(l,s,a,t,{hovered:!1})})})},styleOne:l}},13988:function(ne,F,e){"use strict";var M=e(63188),k=e(92880).extendFlat,o=e(29736).axisHoverFormat;ne.exports={y:M.y,x:M.x,x0:M.x0,y0:M.y0,xhoverformat:o("x"),yhoverformat:o("y"),name:k({},M.name,{}),orientation:k({},M.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:M.fillcolor,points:k({},M.boxpoints,{}),jitter:k({},M.jitter,{}),pointpos:k({},M.pointpos,{}),width:k({},M.width,{}),marker:M.marker,text:M.text,hovertext:M.hovertext,hovertemplate:M.hovertemplate,quartilemethod:M.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:M.selected,unselected:M.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"},zorder:M.zorder}},67064:function(ne,F,e){"use strict";var M=e(3400),k=e(54460),o=e(62555),T=e(63800),_=e(39032).BADNUM;function p(t,i,r){var n=i.max-i.min;if(!n)return t.bandwidth?t.bandwidth:0;if(t.bandwidth)return Math.max(t.bandwidth,n/1e4);var u,a=r.length,s=M.stdev(r,a-1,i.mean);return Math.max((u=a,1.059*Math.min(s,(i.q3-i.q1)/1.349)*Math.pow(u,-.2)),n/100)}function l(t,i,r,n){var a,s=t.spanmode,u=t.span||[],c=[i.min-2*n,i.max+2*n];function y(m){var g=u[m],x="multicategory"===r.type?r.r2c(g):r.d2c(g,0,t[i.valLetter+"calendar"]);return x===_?c[m]:x}var d={type:"linear",range:a="soft"===s?c:"hard"===s?[i.min,i.max]:[y(0),y(1)]};return k.setConvert(d),d.cleanRange(),a}ne.exports=function(t,i){var r=o(t,i);if(r[0].t.empty)return r;for(var n=t._fullLayout,a=k.getFromId(t,i["h"===i.orientation?"xaxis":"yaxis"]),s=1/0,u=-1/0,f=0,c=0,y=0;y<r.length;y++){var d=r[y],m=d.pts.map(T.extractVal),g=d.bandwidth=p(i,d,m),x=d.span=l(i,d,a,g);if(d.min===d.max&&0===g)x=d.span=[d.min,d.max],d.density=[{v:1,t:x[0]}],d.bandwidth=g,f=Math.max(f,1);else{var v=x[1]-x[0],b=Math.ceil(v/(g/3)),h=v/b;if(!isFinite(h)||!isFinite(b))return M.error("Something went wrong with computing the violin span"),r[0].t.empty=!0,r;var S=T.makeKDE(d,i,m);d.density=new Array(b);for(var w=0,E=x[0];E<x[1]+h/2;w++,E+=h){var P=S(E);d.density[w]={v:P,t:E},f=Math.max(f,P)}}c=Math.max(c,m.length),s=Math.min(s,x[0]),u=Math.max(u,x[1])}var I=k.findExtremes(a,[s,u],{padded:!0});if(i._extremes[a._id]=I,i.width)r[0].t.maxKDE=f;else{var O=n._violinScaleGroupStats,z=i.scalegroup,U=O[z];U?(U.maxKDE=Math.max(U.maxKDE,f),U.maxCount=Math.max(U.maxCount,c)):O[z]={maxKDE:f,maxCount:c}}return r[0].t.labels.kde=M._(t,"kde:"),r}},14348:function(ne,F,e){"use strict";var M=e(96404).setPositionOffset,k=["v","h"];ne.exports=function(o,T){for(var _=o.calcdata,p=T.xaxis,l=T.yaxis,t=0;t<k.length;t++){for(var i=k[t],r="h"===i?l:p,n=[],a=0;a<_.length;a++){var s=_[a],f=s[0].trace;!0!==f.visible||"violin"!==f.type||s[0].t.empty||f.orientation!==i||f.xaxis!==p._id||f.yaxis!==l._id||n.push(a)}M("violin",o,n,r)}}},36240:function(ne,F,e){"use strict";var M=e(3400),k=e(76308),o=e(90624),T=e(13988);ne.exports=function(_,p,l,t){function i(v,b){return M.coerce(_,p,T,v,b)}function r(v,b){return M.coerce2(_,p,T,v,b)}if(o.handleSampleDefaults(_,p,i,t),!1!==p.visible){i("bandwidth"),i("side"),i("width")||(i("scalegroup",p.name),i("scalemode"));var n,a=i("span");Array.isArray(a)&&(n="manual"),i("spanmode",n);var s=i("line.color",(_.marker||{}).color||l),u=i("line.width"),f=i("fillcolor",k.addOpacity(p.line.color,.5));o.handlePointsDefaults(_,p,i,{prefix:""});var c=r("box.width"),y=r("box.fillcolor",f),d=r("box.line.color",s),m=r("box.line.width",u);i("box.visible",!!(c||y||d||m))||(p.box={visible:!1});var g=r("meanline.color",s),x=r("meanline.width",u);i("meanline.visible",!(!g&&!x))||(p.meanline={visible:!1}),i("quartilemethod"),i("zorder")}}},63800:function(ne,F,e){"use strict";var M=e(3400),k=function(o){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*o*o)};F.makeKDE=function(o,T,_){var p=_.length,l=k,t=o.bandwidth,i=1/(p*t);return function(r){for(var n=0,a=0;a<p;a++)n+=l((r-_[a])/t);return i*n}},F.getPositionOnKdePath=function(o,T,_){var p,l;"h"===T.orientation?(p="y",l="x"):(p="x",l="y");var t=M.findPointOnPath(o.path,_,l,{pathLength:o.pathLength}),i=o.posCenterPx,r=t[p];return[r,"both"===T.side?2*i-r:i]},F.getKdeValue=function(o,T,_){var p=o.pts.map(F.extractVal);return F.makeKDE(o,T,p)(_)/o.posDensityScale},F.extractVal=function(o){return o.v}},78e3:function(ne,F,e){"use strict";var M=e(76308),k=e(3400),o=e(54460),T=e(27576),_=e(63800);ne.exports=function(p,l,t,i,r){r||(r={});var n,a,s=r.hoverLayer,u=p.cd,f=u[0].trace,c=f.hoveron,y=-1!==c.indexOf("violins"),d=-1!==c.indexOf("kde"),m=[];if(y||d){var g=T.hoverOnBoxes(p,l,t,i);if(d&&g.length>0){var x,v,b,h,S,w=p.xa,E=p.ya;"h"===f.orientation?(S=l,x="y",b=E,v="x",h=w):(S=t,x="x",b=w,v="y",h=E);var P=u[p.index];if(S>=P.span[0]&&S<=P.span[1]){var I=k.extendFlat({},p),O=h.c2p(S,!0),z=_.getKdeValue(P,f,S),U=_.getPositionOnKdePath(P,f,O),R=b._offset,j=b._length;I[x+"0"]=U[0],I[x+"1"]=U[1],I[v+"0"]=I[v+"1"]=O,I[v+"Label"]=v+": "+o.hoverLabelText(h,S,f[v+"hoverformat"])+", "+u[0].t.labels.kde+" "+z.toFixed(3);for(var Y=0,B=0;B<g.length;B++)if("med"===g[B].attr){Y=B;break}I.spikeDistance=g[Y].spikeDistance;var V=x+"Spike";I[V]=g[Y][V],g[Y].spikeDistance=void 0,g[Y][V]=void 0,I.hovertemplate=!1,m.push(I),(a={})[x+"1"]=k.constrain(R+U[0],R,R+j),a[x+"2"]=k.constrain(R+U[1],R,R+j),a[v+"1"]=a[v+"2"]=h._offset+O}}y&&(m=m.concat(g))}-1!==c.indexOf("points")&&(n=T.hoverOnPoints(p,l,t));var q=s.selectAll(".violinline-"+f.uid).data(a?[0]:[]);return q.enter().append("line").classed("violinline-"+f.uid,!0).attr("stroke-width",1.5),q.exit().remove(),q.attr(a).call(M.stroke,p.color),"closest"===i?n?[n]:m:(n&&m.push(n),m)}},22869:function(ne,F,e){"use strict";ne.exports={attributes:e(13988),layoutAttributes:e(98228),supplyDefaults:e(36240),crossTraceDefaults:e(90624).crossTraceDefaults,supplyLayoutDefaults:e(8939),calc:e(67064),crossTraceCalc:e(14348),plot:e(5140),style:e(95908),styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(78e3),selectPoints:e(8264),moduleType:"trace",name:"violin",basePlotModule:e(57952),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},98228:function(ne,F,e){"use strict";var M=e(16560),k=e(3400).extendFlat;ne.exports={violinmode:k({},M.boxmode,{}),violingap:k({},M.boxgap,{}),violingroupgap:k({},M.boxgroupgap,{})}},8939:function(ne,F,e){"use strict";var M=e(3400),k=e(98228),o=e(68832);ne.exports=function(T,_,p){o._supply(T,_,p,function(l,t){return M.coerce(T,_,k,l,t)},"violin")}},5140:function(ne,F,e){"use strict";var M=e(33428),k=e(3400),o=e(43616),T=e(18728),_=e(52340),p=e(63800);ne.exports=function(l,t,i,r){var n=l._context.staticPlot,a=l._fullLayout,s=t.xaxis,u=t.yaxis;function f(c,y){var d=_(c,{xaxis:s,yaxis:u,trace:y,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return o.smoothopen(d[0],1)}k.makeTraceGroups(r,i,"trace violins").each(function(c){var y=M.select(this),d=c[0],m=d.t,g=d.trace;if(!0!==g.visible||m.empty)y.remove();else{var x=m.bPos,v=m.bdPos,b=t[m.valLetter+"axis"],h=t[m.posLetter+"axis"],S="both"===g.side,w=S||"positive"===g.side,E=S||"negative"===g.side,P=y.selectAll("path.violin").data(k.identity);P.enter().append("path").style("vector-effect",n?"none":"non-scaling-stroke").attr("class","violin"),P.exit().remove(),P.each(function(B){var V,q,ie,te,ee,$,J,X,ae=M.select(this),ce=B.density,le=ce.length,pe=h.c2l(B.pos+x,!0),we=h.l2p(pe);if(g.width)V=m.maxKDE/v;else{var Te=a._violinScaleGroupStats[g.scalegroup];V="count"===g.scalemode?Te.maxKDE/v*(Te.maxCount/B.pts.length):Te.maxKDE/v}if(w){for(J=new Array(le),ee=0;ee<le;ee++)(X=J[ee]={})[m.posLetter]=pe+ce[ee].v/V,X[m.valLetter]=b.c2l(ce[ee].t,!0);q=f(J,g)}if(E){for(J=new Array(le),$=0,ee=le-1;$<le;$++,ee--)(X=J[$]={})[m.posLetter]=pe-ce[ee].v/V,X[m.valLetter]=b.c2l(ce[ee].t,!0);ie=f(J,g)}if(S)te=q+"L"+ie.substr(1)+"Z";else{var ye=[we,b.c2p(ce[0].t)],ve=[we,b.c2p(ce[le-1].t)];"h"===g.orientation&&(ye.reverse(),ve.reverse()),te=w?"M"+ye+"L"+q.substr(1)+"L"+ve:"M"+ve+"L"+ie.substr(1)+"L"+ye}ae.attr("d",te),B.posCenterPx=we,B.posDensityScale=V*v,B.path=ae.node(),B.pathLength=B.path.getTotalLength()/(S?2:1)});var I,O,z,U=g.box,R=U.width,j=(U.line||{}).width;S?(I=v*R,O=0):w?(I=[0,v*R/2],O=j*{x:1,y:-1}[m.posLetter]):(I=[v*R/2,0],O=j*{x:-1,y:1}[m.posLetter]),T.plotBoxAndWhiskers(y,{pos:h,val:b},g,{bPos:x,bdPos:I,bPosPxOffset:O}),T.plotBoxMean(y,{pos:h,val:b},g,{bPos:x,bdPos:I,bPosPxOffset:O}),!g.box.visible&&g.meanline.visible&&(z=k.identity);var Y=y.selectAll("path.meanline").data(z||[]);Y.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",n?"none":"non-scaling-stroke"),Y.exit().remove(),Y.each(function(B){var V=b.c2p(B.mean,!0),q=p.getPositionOnKdePath(B,g,V);M.select(this).attr("d","h"===g.orientation?"M"+V+","+q[0]+"V"+q[1]:"M"+q[0]+","+V+"H"+q[1])}),T.plotPoints(y,{x:s,y:u},g,m)}})}},95908:function(ne,F,e){"use strict";var M=e(33428),k=e(76308),o=e(49224).stylePoints;ne.exports=function(T){var _=M.select(T).selectAll("g.trace.violins");_.style("opacity",function(p){return p[0].trace.opacity}),_.each(function(p){var l=p[0].trace,t=M.select(this),i=l.box||{},r=i.line||{},n=l.meanline||{},a=n.width;t.selectAll("path.violin").style("stroke-width",l.line.width+"px").call(k.stroke,l.line.color).call(k.fill,l.fillcolor),t.selectAll("path.box").style("stroke-width",r.width+"px").call(k.stroke,r.color).call(k.fill,i.fillcolor);var s={"stroke-width":a+"px","stroke-dasharray":2*a+"px,"+a+"px"};t.selectAll("path.mean").style(s).call(k.stroke,n.color),t.selectAll("path.meanline").style(s).call(k.stroke,n.color),o(t,l,T)})}},58168:function(ne,F,e){"use strict";var M=e(49084),k=e(50048),o=e(16716),T=e(45464),_=e(92880).extendFlat,p=e(67824).overrideAll,l=ne.exports=p(_({x:k.x,y:k.y,z:k.z,value:k.value,isomin:k.isomin,isomax:k.isomax,surface:k.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:k.slices,caps:k.caps,text:k.text,hovertext:k.hovertext,xhoverformat:k.xhoverformat,yhoverformat:k.yhoverformat,zhoverformat:k.zhoverformat,valuehoverformat:k.valuehoverformat,hovertemplate:k.hovertemplate},M("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:k.colorbar,opacity:k.opacity,opacityscale:o.opacityscale,lightposition:k.lightposition,lighting:k.lighting,flatshading:k.flatshading,contour:k.contour,hoverinfo:_({},T.hoverinfo),showlegend:_({},T.showlegend,{dflt:!1})}),"calc","nested");l.x.editType=l.y.editType=l.z.editType=l.value.editType="calc+clearAxisTypes",l.transforms=void 0},91976:function(ne,F,e){"use strict";var M=e(67792).gl_mesh3d,k=e(33040).parseColorScale,o=e(3400).isArrayOrTypedArray,T=e(43080),_=e(8932).extractOpts,p=e(52094),l=e(31460).findNearestOnAxis,t=e(31460).generateIsoMeshes;function i(n,a,s){this.scene=n,this.uid=s,this.mesh=a,this.name="",this.data=null,this.showContour=!1}var r=i.prototype;r.handlePick=function(n){if(n.object===this.mesh){var a=n.data.index,u=this.data._meshY[a],f=this.data._meshZ[a],c=this.data._Ys.length,y=this.data._Zs.length,d=l(this.data._meshX[a],this.data._Xs).id,m=l(u,this.data._Ys).id,g=l(f,this.data._Zs).id,x=n.index=g+y*m+y*c*d;n.traceCoordinate=[this.data._meshX[x],this.data._meshY[x],this.data._meshZ[x],this.data._value[x]];var v=this.data.hovertext||this.data.text;return o(v)&&void 0!==v[x]?n.textLabel=v[x]:v&&(n.textLabel=v),!0}},r.update=function(n){var a=this.scene,s=a.fullSceneLayout;function u(y,d,m,g){return d.map(function(x){return y.d2l(x,0,g)*m})}this.data=t(n);var f={positions:p(u(s.xaxis,n._meshX,a.dataScale[0],n.xcalendar),u(s.yaxis,n._meshY,a.dataScale[1],n.ycalendar),u(s.zaxis,n._meshZ,a.dataScale[2],n.zcalendar)),cells:p(n._meshI,n._meshJ,n._meshK),lightPosition:[n.lightposition.x,n.lightposition.y,n.lightposition.z],ambient:n.lighting.ambient,diffuse:n.lighting.diffuse,specular:n.lighting.specular,roughness:n.lighting.roughness,fresnel:n.lighting.fresnel,vertexNormalsEpsilon:n.lighting.vertexnormalsepsilon,faceNormalsEpsilon:n.lighting.facenormalsepsilon,opacity:n.opacity,opacityscale:n.opacityscale,contourEnable:n.contour.show,contourColor:T(n.contour.color).slice(0,3),contourWidth:n.contour.width,useFacetNormals:n.flatshading},c=_(n);f.vertexIntensity=n._meshIntensity,f.vertexIntensityBounds=[c.min,c.max],f.colormap=k(n),this.mesh.update(f)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ne.exports=function(n,a){var u=M({gl:n.glplot.gl}),f=new i(n,u,a.uid);return u._trace=f,f.update(a),n.glplot.add(u),f}},12448:function(ne,F,e){"use strict";var M=e(3400),k=e(58168),o=e(70548).supplyIsoDefaults,T=e(60192).opacityscaleDefaults;ne.exports=function(_,p,l,t){function i(r,n){return M.coerce(_,p,k,r,n)}o(_,p,l,t,i),T(_,p,t,i)}},67776:function(ne,F,e){"use strict";ne.exports={attributes:e(58168),supplyDefaults:e(12448),calc:e(62624),colorbar:{min:"cmin",max:"cmax"},plot:e(91976),moduleType:"trace",name:"volume",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},65776:function(ne,F,e){"use strict";var M=e(20832),k=e(52904).line,o=e(45464),T=e(29736).axisHoverFormat,_=e(21776).Ks,p=e(21776).Gw,l=e(10213),t=e(92880).extendFlat,i=e(76308);function r(n){return{marker:{color:t({},M.marker.color,{arrayOk:!1,editType:"style"}),line:{color:t({},M.marker.line.color,{arrayOk:!1,editType:"style"}),width:t({},M.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}ne.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),hovertext:M.hovertext,hovertemplate:_({},{keys:l.eventDataKeys}),hoverinfo:t({},o.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:p({editType:"plot"},{keys:l.eventDataKeys.concat(["label"])}),text:M.text,textposition:M.textposition,insidetextanchor:M.insidetextanchor,textangle:M.textangle,textfont:M.textfont,insidetextfont:M.insidetextfont,outsidetextfont:M.outsidetextfont,constraintext:M.constraintext,cliponaxis:M.cliponaxis,orientation:M.orientation,offset:M.offset,width:M.width,increasing:r(),decreasing:r(),totals:r(),connector:{line:{color:t({},k.color,{dflt:i.defaultLine}),width:t({},k.width,{editType:"plot"}),dash:k.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,zorder:M.zorder}},73540:function(ne,F,e){"use strict";var M=e(54460),k=e(1220),o=e(3400).mergeArray,T=e(4500),_=e(39032).BADNUM;function p(t){return"a"===t||"absolute"===t}function l(t){return"t"===t||"total"===t}ne.exports=function(t,i){var r,n,a,s,u,f,c=M.getFromId(t,i.xaxis||"x"),y=M.getFromId(t,i.yaxis||"y");"h"===i.orientation?(r=c.makeCalcdata(i,"x"),a=y.makeCalcdata(i,"y"),s=k(i,y,"y",a),u=!!i.yperiodalignment,f="y"):(r=y.makeCalcdata(i,"y"),a=c.makeCalcdata(i,"x"),s=k(i,c,"x",a),u=!!i.xperiodalignment,f="x"),n=s.vals;for(var d,m=Math.min(n.length,r.length),g=new Array(m),x=0,v=!1,b=0;b<m;b++){var h=r[b]||0,S=!1;(r[b]!==_||l(i.measure[b])||p(i.measure[b]))&&b+1<m&&(r[b+1]!==_||l(i.measure[b+1])||p(i.measure[b+1]))&&(S=!0);var w=g[b]={i:b,p:n[b],s:h,rawS:h,cNext:S};p(i.measure[b])?(x=w.s,w.isSum=!0,w.dir="totals",w.s=x):l(i.measure[b])?(w.isSum=!0,w.dir="totals",w.s=x):(w.isSum=!1,w.dir=w.rawS<0?"decreasing":"increasing",w.s=x+(d=w.s),x+=d),"totals"===w.dir&&(v=!0),u&&(g[b].orig_p=a[b],g[b][f+"End"]=s.ends[b],g[b][f+"Start"]=s.starts[b]),i.ids&&(w.id=String(i.ids[b])),w.v=(i.base||0)+x}return g.length&&(g[0].hasTotals=v),o(i.text,g,"tx"),o(i.hovertext,g,"htx"),T(g,i),g}},10213:function(ne){"use strict";ne.exports={eventDataKeys:["initial","delta","final"]}},50152:function(ne,F,e){"use strict";var M=e(96376).setGroupPositions;ne.exports=function(k,o){var T,_,p=k._fullLayout,l=k._fullData,t=k.calcdata,i=o.xaxis,r=o.yaxis,n=[],a=[],s=[];for(_=0;_<l.length;_++){var u=l[_];!0===u.visible&&u.xaxis===i._id&&u.yaxis===r._id&&"waterfall"===u.type&&(T=t[_],"h"===u.orientation?s.push(T):a.push(T),n.push(T))}var f={mode:p.waterfallmode,norm:p.waterfallnorm,gap:p.waterfallgap,groupgap:p.waterfallgroupgap};for(M(k,i,r,a,f),M(k,r,i,s,f),_=0;_<n.length;_++){T=n[_];for(var c=0;c<T.length;c++){var y=T[c];!1===y.isSum&&(y.s0+=0===c?0:T[c-1].s),c+1<T.length&&(T[c].nextP0=T[c+1].p0,T[c].nextS0=T[c+1].s0)}}}},24224:function(ne,F,e){"use strict";var M=e(3400),k=e(20011),o=e(31508).handleText,T=e(43980),_=e(31147),p=e(65776),l=e(76308),t=e(48164),i=t.INCREASING.COLOR,r=t.DECREASING.COLOR;function n(a,s,u){a(s+".marker.color",u),a(s+".marker.line.color",l.defaultLine),a(s+".marker.line.width")}ne.exports={supplyDefaults:function(a,s,u,f){function c(d,m){return M.coerce(a,s,p,d,m)}if(T(a,s,f,c)){_(a,s,f,c),c("xhoverformat"),c("yhoverformat"),c("measure"),c("orientation",s.x&&!s.y?"h":"v"),c("base"),c("offset"),c("width"),c("text"),c("hovertext"),c("hovertemplate");var y=c("textposition");o(a,s,f,c,y,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==s.textposition&&(c("texttemplate"),s.texttemplate||c("textinfo")),n(c,"increasing",i),n(c,"decreasing",r),n(c,"totals","#4499FF"),c("connector.visible")&&(c("connector.mode"),c("connector.line.width")&&(c("connector.line.color"),c("connector.line.dash"))),c("zorder")}else s.visible=!1},crossTraceDefaults:function(a,s){var u,f;function c(d){return M.coerce(f._input,f,p,d)}if("group"===s.waterfallmode)for(var y=0;y<a.length;y++)u=(f=a[y])._input,k(u,f,s,c)}}},53256:function(ne){"use strict";ne.exports=function(F,e){return F.x="xVal"in e?e.xVal:e.x,F.y="yVal"in e?e.yVal:e.y,"initial"in e&&(F.initial=e.initial),"delta"in e&&(F.delta=e.delta),"final"in e&&(F.final=e.final),e.xa&&(F.xaxis=e.xa),e.ya&&(F.yaxis=e.ya),F}},94196:function(ne,F,e){"use strict";var M=e(54460).hoverLabelText,k=e(76308).opacity,o=e(63400).hoverOnBars,T=e(48164),_=T.INCREASING.SYMBOL,p=T.DECREASING.SYMBOL;ne.exports=function(l,t,i,r,n){var I,O,z,U,a=o(l,t,i,r,n);if(a){var s=a.cd,u=s[0].trace,f="h"===u.orientation,c=f?"x":"y",y=f?l.xa:l.ya,d=s[a.index],m=d.isSum?d.b+d.s:d.rawS;a.initial=d.b+d.s-m,a.delta=m,a.final=a.initial+a.delta;var g=w(Math.abs(a.delta));a.deltaLabel=m<0?"("+g+")":g,a.finalLabel=w(a.final),a.initialLabel=w(a.initial);var x=d.hi||u.hoverinfo,v=[];if(x&&"none"!==x&&"skip"!==x){var b="all"===x,h=x.split("+"),S=function(E){return b||-1!==h.indexOf(E)};d.isSum||(!S("final")||S(f?"x":"y")||v.push(a.finalLabel),S("delta")&&v.push(m<0?a.deltaLabel+" "+p:a.deltaLabel+" "+_),S("initial")&&v.push("Initial: "+a.initialLabel))}return v.length&&(a.extraText=v.join("<br>")),a.color=(z=(I=u[d.dir].marker).line.color,U=I.line.width,k(O=I.color)?O:k(z)&&U?z:void 0),[a]}function w(E){return M(y,E,u[c+"hoverformat"])}}},95952:function(ne,F,e){"use strict";ne.exports={attributes:e(65776),layoutAttributes:e(91352),supplyDefaults:e(24224).supplyDefaults,crossTraceDefaults:e(24224).crossTraceDefaults,supplyLayoutDefaults:e(59464),calc:e(73540),crossTraceCalc:e(50152),plot:e(64488),style:e(12252).style,hoverPoints:e(94196),eventData:e(53256),selectPoints:e(45784),moduleType:"trace",name:"waterfall",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},91352:function(ne){"use strict";ne.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},59464:function(ne,F,e){"use strict";var M=e(3400),k=e(91352);ne.exports=function(o,T,_){var p=!1;function l(r,n){return M.coerce(o,T,k,r,n)}for(var t=0;t<_.length;t++){var i=_[t];if(i.visible&&"waterfall"===i.type){p=!0;break}}p&&(l("waterfallmode"),l("waterfallgap",.2),l("waterfallgroupgap"))}},64488:function(ne,F,e){"use strict";var M=e(33428),k=e(3400),o=e(43616),T=e(39032).BADNUM,_=e(98184),p=e(82744).clearMinTextSize;ne.exports=function(l,t,i,r){var a,s,c,y,n=l._fullLayout;p("waterfall",n),_.plot(l,t,i,r,{mode:n.waterfallmode,norm:n.waterfallmode,gap:n.waterfallgap,groupgap:n.waterfallgroupgap}),a=l,c=(s=t).xaxis,y=s.yaxis,k.makeTraceGroups(r,i,"trace bars").each(function(d){var m=M.select(this),g=d[0].trace,x=k.ensureSingle(m,"g","lines");if(g.connector&&g.connector.visible){var v="h"===g.orientation,b=g.connector.mode,h=x.selectAll("g.line").data(k.identity);h.enter().append("g").classed("line",!0),h.exit().remove();var S=h.size();h.each(function(w,E){if(E===S-1||w.cNext){var P=(R=c,j=y,V=[],ie=(Y=v)?j:R,(B=[])[0]=(q=Y?R:j).c2p((U=w).s0,!0),V[0]=ie.c2p(U.p0,!0),B[1]=q.c2p(U.s1,!0),V[1]=ie.c2p(U.p1,!0),B[2]=q.c2p(U.nextS0,!0),V[2]=ie.c2p(U.nextP0,!0),Y?[B,V]:[V,B]),I=P[0],O=P[1],z="";I[0]!==T&&O[0]!==T&&I[1]!==T&&O[1]!==T&&("spanning"===b&&!w.isSum&&E>0&&(z+=v?"M"+I[0]+","+O[1]+"V"+O[0]:"M"+I[1]+","+O[0]+"H"+I[0]),"between"!==b&&(w.isSum||E<S-1)&&(z+=v?"M"+I[1]+","+O[0]+"V"+O[1]:"M"+I[0]+","+O[1]+"H"+I[1]),I[2]!==T&&O[2]!==T&&(z+=v?"M"+I[1]+","+O[1]+"V"+O[2]:"M"+I[1]+","+O[1]+"H"+I[2])),""===z&&(z="M0,0Z"),k.ensureSingle(M.select(this),"path").attr("d",z).call(o.setClipUrl,s.layerClipId,a)}var U,R,j,Y,B,V,q,ie})}else x.remove()})}},12252:function(ne,F,e){"use strict";var M=e(33428),k=e(43616),o=e(76308),T=e(13448).DESELECTDIM,_=e(60100),p=e(82744).resizeText,l=_.styleTextPoints;ne.exports={style:function(t,i,r){var n=r||M.select(t).selectAll('g[class^="waterfalllayer"]').selectAll("g.trace");p(t,n,"waterfall"),n.style("opacity",function(a){return a[0].trace.opacity}),n.each(function(a){var s=M.select(this),u=a[0].trace;s.selectAll(".point > path").each(function(f){if(!f.isBlank){var c=u[f.dir].marker;M.select(this).call(o.fill,c.color).call(o.stroke,c.line.color).call(k.dashLine,c.line.dash,c.line.width).style("opacity",u.selectedpoints&&!f.selected?T:1)}}),l(s,u,t),s.selectAll(".lines").each(function(){var f=u.connector.line;k.lineGroupStyle(M.select(this).selectAll("path"),f.width,f.color,f.dash)})})}}},84224:function(ne,F,e){"use strict";var M=e(54460),k=e(3400),o=e(73060),T=e(60468).W,_=e(39032).BADNUM;F.moduleType="transform",F.name="aggregate";var p=F.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},l=p.aggregations;function t(a,s,u,f){if(f.enabled){for(var c=f.target,y=k.nestedProperty(s,c),d=y.get(),m=function(v,b){var S=b.d2c,w=b.c2d;switch(v.func){case"count":return i;case"first":return r;case"last":return n;case"sum":return function(E,P){for(var I=0,O=0;O<P.length;O++){var z=S(E[P[O]]);z!==_&&(I+=z)}return w(I)};case"avg":return function(E,P){for(var I=0,O=0,z=0;z<P.length;z++){var U=S(E[P[z]]);U!==_&&(I+=U,O++)}return O?w(I/O):_};case"min":return function(E,P){for(var I=1/0,O=0;O<P.length;O++){var z=S(E[P[O]]);z!==_&&(I=Math.min(I,z))}return I===1/0?_:w(I)};case"max":return function(E,P){for(var I=-1/0,O=0;O<P.length;O++){var z=S(E[P[O]]);z!==_&&(I=Math.max(I,z))}return I===-1/0?_:w(I)};case"range":return function(E,P){for(var I=1/0,O=-1/0,z=0;z<P.length;z++){var U=S(E[P[z]]);U!==_&&(I=Math.min(I,U),O=Math.max(O,U))}return O===-1/0||I===1/0?_:w(O-I)};case"change":return function(E,P){var I=S(E[P[0]]),O=S(E[P[P.length-1]]);return I===_||O===_?_:w(O-I)};case"median":return function(E,P){for(var I=[],O=0;O<P.length;O++){var z=S(E[P[O]]);z!==_&&I.push(z)}if(!I.length)return _;I.sort(k.sorterAsc);var U=(I.length-1)/2;return w((I[Math.floor(U)]+I[Math.ceil(U)])/2)};case"mode":return function(E,P){for(var I={},O=0,z=_,U=0;U<P.length;U++){var R=S(E[P[U]]);if(R!==_){var j=I[R]=(I[R]||0)+1;j>O&&(O=j,z=R)}}return O?w(z):_};case"rms":return function(E,P){for(var I=0,O=0,z=0;z<P.length;z++){var U=S(E[P[z]]);U!==_&&(I+=U*U,O++)}return O?w(Math.sqrt(I/O)):_};case"stddev":return function(E,P){var I,O=0,z=0,U=1,R=_;for(I=0;I<P.length&&R===_;I++)R=S(E[P[I]]);if(R===_)return _;for(;I<P.length;I++){var j=S(E[P[I]]);if(j!==_){var Y=j-R;O+=Y,z+=Y*Y,U++}}var B="sample"===v.funcmode?U-1:U;return B?Math.sqrt((z-O*O/U)/B):0}}}(f,M.getDataConversions(a,s,c,d)),g=new Array(u.length),x=0;x<u.length;x++)g[x]=m(d,u[x]);y.set(g),"count"===f.func&&k.pushUnique(s._arrayAttrs,c)}}function i(a,s){return s.length}function r(a,s){return a[s[0]]}function n(a,s){return a[s[s.length-1]]}F.supplyDefaults=function(a,s){var u,f={};function c(w,E){return k.coerce(a,f,p,w,E)}if(!c("enabled"))return f;var y=o.findArrayAttributes(s),d={};for(u=0;u<y.length;u++)d[y[u]]=1;var m=c("groups");if(!Array.isArray(m)){if(!d[m])return f.enabled=!1,f;d[m]=0}var g,x=a.aggregations||[],v=f.aggregations=new Array(x.length);function b(w,E){return k.coerce(x[u],g,l,w,E)}for(u=0;u<x.length;u++){g={_index:u};var h=b("target"),S=b("func");b("enabled")&&h&&(d[h]||"count"===S&&void 0===d[h])?("stddev"===S&&b("funcmode"),d[h]=0,v[u]=g):v[u]={enabled:!1,_index:u}}for(u=0;u<y.length;u++)d[y[u]]&&v.push({target:y[u],func:l.func.dflt,enabled:!0,_index:-1});return f},F.calcTransform=function(a,s,u){if(u.enabled){var f=u.groups,c=k.getTargetArray(s,{target:f});if(c){var y,d,m,x={},v={},b=[],h=T(s.transforms,u),S=c.length;for(s._length&&(S=Math.min(S,s._length)),y=0;y<S;y++)void 0===(m=x[d=c[y]])?(x[d]=b.length,b.push([y]),v[x[d]]=h(y)):(b[m].push(y),v[x[d]]=(v[x[d]]||[]).concat(h(y)));u._indexToPoints=v;var w=u.aggregations;for(y=0;y<w.length;y++)t(a,s,b,w[y]);"string"==typeof f&&t(a,s,b,{target:f,func:"first",enabled:!0}),s._length=b.length}}}},76744:function(ne,F,e){"use strict";var M=e(3400),k=e(24040),o=e(54460),T=e(60468).W,_=e(69104),p=_.COMPARISON_OPS,l=_.INTERVAL_OPS,t=_.SET_OPS;F.moduleType="transform",F.name="filter",F.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(p).concat(l).concat(t),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},F.supplyDefaults=function(i){var r={};function n(u,f){return M.coerce(i,r,F.attributes,u,f)}if(n("enabled")){var a=n("target");if(M.isArrayOrTypedArray(a)&&0===a.length)return r.enabled=!1,r;n("preservegaps"),n("operation"),n("value");var s=k.getComponentMethod("calendars","handleDefaults");s(i,r,"valuecalendar",null),s(i,r,"targetcalendar",null)}return r},F.calcTransform=function(i,r,n){if(n.enabled){var a=M.getTargetArray(r,n);if(a){var s=n.target,u=a.length;r._length&&(u=Math.min(u,r._length));var f=n.targetcalendar,c=r._arrayAttrs,y=n.preservegaps;if("string"==typeof s){var d=M.nestedProperty(r,s+"calendar").get();d&&(f=d)}var m,g,x=function(P,I,O){var z=P.operation,U=P.value,R=M.isArrayOrTypedArray(U);function j(q){return-1!==q.indexOf(z)}var Y,B=function(q){return I(q,0,P.valuecalendar)},V=function(q){return I(q,0,O)};switch(j(p)?Y=B(R?U[0]:U):j(l)?Y=R?[B(U[0]),B(U[1])]:[B(U),B(U)]:j(t)&&(Y=R?U.map(B):[B(U)]),z){case"=":return function(q){return V(q)===Y};case"!=":return function(q){return V(q)!==Y};case"<":return function(q){return V(q)<Y};case"<=":return function(q){return V(q)<=Y};case">":return function(q){return V(q)>Y};case">=":return function(q){return V(q)>=Y};case"[]":return function(q){var ie=V(q);return ie>=Y[0]&&ie<=Y[1]};case"()":return function(q){var ie=V(q);return ie>Y[0]&&ie<Y[1]};case"[)":return function(q){var ie=V(q);return ie>=Y[0]&&ie<Y[1]};case"(]":return function(q){var ie=V(q);return ie>Y[0]&&ie<=Y[1]};case"][":return function(q){var ie=V(q);return ie<=Y[0]||ie>=Y[1]};case")(":return function(q){var ie=V(q);return ie<Y[0]||ie>Y[1]};case"](":return function(q){var ie=V(q);return ie<=Y[0]||ie>Y[1]};case")[":return function(q){var ie=V(q);return ie<Y[0]||ie>=Y[1]};case"{}":return function(q){return-1!==Y.indexOf(V(q))};case"}{":return function(q){return-1===Y.indexOf(V(q))}}}(n,o.getDataToCoordFunc(i,r,s,a),f),v={},b={},h=0;y?(m=function(P){v[P.astr]=M.extendDeep([],P.get()),P.set(new Array(u))},g=function(P,I){var O=v[P.astr][I];P.get()[I]=O}):(m=function(P){v[P.astr]=M.extendDeep([],P.get()),P.set([])},g=function(P,I){var O=v[P.astr][I];P.get().push(O)}),E(m);for(var S=T(r.transforms,n),w=0;w<u;w++)x(a[w])?(E(g,w),b[h++]=S(w)):y&&h++;n._indexToPoints=b,r._length=h}}function E(P,I){for(var O=0;O<c.length;O++)P(M.nestedProperty(r,c[O]),I)}}},32028:function(ne,F,e){"use strict";var M=e(3400),k=e(73060),o=e(7316),T=e(60468).W;function _(p,l){var t,i,r,n,a,s,u,f,c,y,d=l.transform,m=l.transformIndex,g=p.transforms[m].groups,x=T(p.transforms,d);if(!M.isArrayOrTypedArray(g)||0===g.length)return[p];var v=M.filterUnique(g),b=new Array(v.length),h=g.length,S=k.findArrayAttributes(p),w=d.styles||[],E={};for(t=0;t<w.length;t++)E[w[t].target]=w[t].value;d.styles&&(y=M.keyedContainer(d,"styles","target","value.name"));var P={},I={};for(t=0;t<v.length;t++){P[s=v[t]]=t,I[s]=0,(u=b[t]=M.extendDeepNoArrays({},p))._group=s,u.transforms[m]._indexToPoints={};var O=null;for(y&&(O=y.get(s)),u.name=O||""===O?O:M.templateString(d.nameformat,{trace:p.name,group:s}),f=u.transforms,u.transforms=[],i=0;i<f.length;i++)u.transforms[i]=M.extendDeepNoArrays({},f[i]);for(i=0;i<S.length;i++)M.nestedProperty(u,S[i]).set([])}for(r=0;r<S.length;r++){for(n=S[r],i=0,c=[];i<v.length;i++)c[i]=M.nestedProperty(b[i],n).get();for(a=M.nestedProperty(p,n).get(),i=0;i<h;i++)c[P[g[i]]].push(a[i])}for(i=0;i<h;i++)(u=b[P[g[i]]]).transforms[m]._indexToPoints[I[g[i]]]=x(i),I[g[i]]++;for(t=0;t<v.length;t++)s=v[t],o.clearExpandedTraceDefaultColors(u=b[t]),u=M.extendDeepNoArrays(u,E[s]||{});return b}F.moduleType="transform",F.name="groupby",F.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},F.supplyDefaults=function(p,l,t){var i,r={};function n(c,y){return M.coerce(p,r,F.attributes,c,y)}if(!n("enabled"))return r;n("groups"),n("nameformat",t._dataLength>1?"%{group} (%{trace})":"%{group}");var a=p.styles,s=r.styles=[];if(a)for(i=0;i<a.length;i++){var u=s[i]={};M.coerce(a[i],s[i],F.attributes.styles,"target");var f=M.coerce(a[i],s[i],F.attributes.styles,"value");M.isPlainObject(f)?u.value=M.extendDeep({},f):f&&delete u.value}return r},F.transform=function(p,l){var t,i,r,n=[];for(i=0;i<p.length;i++)for(t=_(p[i],l),r=0;r<t.length;r++)n.push(t[r]);return n}},60468:function(ne,F){"use strict";F.W=function(e,M){for(var k,o,T=0;T<e.length&&(k=e[T])!==M;T++)k._indexToPoints&&!1!==k.enabled&&(o=k._indexToPoints);return o?function(p){return o[p]}:function(p){return[p]}}},76272:function(ne,F,e){"use strict";var M=e(3400),k=e(54460),o=e(60468).W,T=e(39032).BADNUM;F.moduleType="transform",F.name="sort",F.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},F.supplyDefaults=function(_){var p={};function l(t,i){return M.coerce(_,p,F.attributes,t,i)}return l("enabled")&&(l("target"),l("order")),p},F.calcTransform=function(_,p,l){if(l.enabled){var t=M.getTargetArray(p,l);if(t){var i=l.target,r=t.length;p._length&&(r=Math.min(r,p._length));var n,a,s=p._arrayAttrs,u=function(g,x,v,b){var h,S=new Array(b),w=new Array(b);for(h=0;h<b;h++)S[h]={v:x[h],i:h};for(S.sort(function(E,P){switch(E.order){case"ascending":return function(I,O){var z=P(I.v),U=P(O.v);return z===T?1:U===T?-1:z-U};case"descending":return function(I,O){var z=P(I.v),U=P(O.v);return z===T?1:U===T?-1:U-z}}}(g,v)),h=0;h<b;h++)w[h]=S[h].i;return w}(l,t,k.getDataToCoordFunc(_,p,i,t),r),f=o(p.transforms,l),c={};for(n=0;n<s.length;n++){var y=M.nestedProperty(p,s[n]),d=y.get(),m=new Array(r);for(a=0;a<r;a++)m[a]=d[u[a]];y.set(m)}for(a=0;a<r;a++)c[a]=f(u[a]);l._indexToPoints=c,p._length=r}}}},25788:function(ne,F){"use strict";F.version="2.33.0"},67792:function(ne,F,e){var M=e(4168);!function(){var k={1964:function(p,l,t){p.exports={alpha_shape:t(3502),convex_hull:t(7352),delaunay_triangulate:t(7642),gl_cone3d:t(6405),gl_error3d:t(9165),gl_heatmap2d:t(2510),gl_line3d:t(5714),gl_mesh3d:t(7201),gl_plot2d:t(1850),gl_plot3d:t(4100),gl_pointcloud2d:t(4696),gl_scatter3d:t(8418),gl_select_box:t(3161),gl_spikes2d:t(4098),gl_streamtube3d:t(7815),gl_surface3d:t(9499),ndarray:t(9618),ndarray_linear_interpolate:t(4317)}},4793:function(p,l,t){"use strict";function r(me){var Me=function(Le,Ne){if("object"!=u(Le)||!Le)return Le;var Re=Le[Symbol.toPrimitive];if(void 0!==Re){var He=Re.call(Le,"string");if("object"!=u(He))return He;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Le)}(me);return"symbol"==u(Me)?Me:Me+""}function n(){try{var me=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(n=function(){return!!me})()}function a(me){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Me){return Me.__proto__||Object.getPrototypeOf(Me)})(me)}function s(me,Me){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Le,Ne){return Le.__proto__=Ne,Le})(me,Me)}function u(me){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Me){return typeof Me}:function(Me){return Me&&"function"==typeof Symbol&&Me.constructor===Symbol&&Me!==Symbol.prototype?"symbol":typeof Me})(me)}var f=t(7507),c=t(3778),y="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;l.hp=g,l.IS=50;var d=2147483647;function m(me){if(me>d)throw new RangeError('The value "'+me+'" is invalid for option "size"');var Me=new Uint8Array(me);return Object.setPrototypeOf(Me,g.prototype),Me}function g(me,Me,Le){if("number"==typeof me){if("string"==typeof Me)throw new TypeError('The "string" argument must be of type string. Received type number');return b(me)}return x(me,Me,Le)}function x(me,Me,Le){if("string"==typeof me)return function(He,Ze){if("string"==typeof Ze&&""!==Ze||(Ze="utf8"),!g.isEncoding(Ze))throw new TypeError("Unknown encoding: "+Ze);var nt=0|E(He,Ze),ft=m(nt),ht=ft.write(He,Ze);return ht!==nt&&(ft=ft.slice(0,ht)),ft}(me,Me);if(ArrayBuffer.isView(me))return function(He){if(ke(He,Uint8Array)){var Ze=new Uint8Array(He);return S(Ze.buffer,Ze.byteOffset,Ze.byteLength)}return h(He)}(me);if(null==me)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+u(me));if(ke(me,ArrayBuffer)||me&&ke(me.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ke(me,SharedArrayBuffer)||me&&ke(me.buffer,SharedArrayBuffer)))return S(me,Me,Le);if("number"==typeof me)throw new TypeError('The "value" argument must not be of type number. Received type number');var Ne=me.valueOf&&me.valueOf();if(null!=Ne&&Ne!==me)return g.from(Ne,Me,Le);var Re=function(He){if(g.isBuffer(He)){var Ze=0|w(He.length),nt=m(Ze);return 0===nt.length||He.copy(nt,0,0,Ze),nt}return void 0!==He.length?"number"!=typeof He.length||Se(He.length)?m(0):h(He):"Buffer"===He.type&&Array.isArray(He.data)?h(He.data):void 0}(me);if(Re)return Re;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof me[Symbol.toPrimitive])return g.from(me[Symbol.toPrimitive]("string"),Me,Le);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+u(me))}function v(me){if("number"!=typeof me)throw new TypeError('"size" argument must be of type number');if(me<0)throw new RangeError('The value "'+me+'" is invalid for option "size"')}function b(me){return v(me),m(me<0?0:0|w(me))}function h(me){for(var Me=me.length<0?0:0|w(me.length),Le=m(Me),Ne=0;Ne<Me;Ne+=1)Le[Ne]=255&me[Ne];return Le}function S(me,Me,Le){if(Me<0||me.byteLength<Me)throw new RangeError('"offset" is outside of buffer bounds');if(me.byteLength<Me+(Le||0))throw new RangeError('"length" is outside of buffer bounds');var Ne;return Ne=void 0===Me&&void 0===Le?new Uint8Array(me):void 0===Le?new Uint8Array(me,Me):new Uint8Array(me,Me,Le),Object.setPrototypeOf(Ne,g.prototype),Ne}function w(me){if(me>=d)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d.toString(16)+" bytes");return 0|me}function E(me,Me){if(g.isBuffer(me))return me.length;if(ArrayBuffer.isView(me)||ke(me,ArrayBuffer))return me.byteLength;if("string"!=typeof me)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+u(me));var Le=me.length,Ne=arguments.length>2&&!0===arguments[2];if(!Ne&&0===Le)return 0;for(var Re=!1;;)switch(Me){case"ascii":case"latin1":case"binary":return Le;case"utf8":case"utf-8":return se(me).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Le;case"hex":return Le>>>1;case"base64":return ge(me).length;default:if(Re)return Ne?-1:se(me).length;Me=(""+Me).toLowerCase(),Re=!0}}function P(me,Me,Le){var Ne=!1;if((void 0===Me||Me<0)&&(Me=0),Me>this.length||((void 0===Le||Le>this.length)&&(Le=this.length),Le<=0)||(Le>>>=0)<=(Me>>>=0))return"";for(me||(me="utf8");;)switch(me){case"hex":return $(this,Me,Le);case"utf8":case"utf-8":return q(this,Me,Le);case"ascii":return te(this,Me,Le);case"latin1":case"binary":return ee(this,Me,Le);case"base64":return V(this,Me,Le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,Me,Le);default:if(Ne)throw new TypeError("Unknown encoding: "+me);me=(me+"").toLowerCase(),Ne=!0}}function I(me,Me,Le){var Ne=me[Me];me[Me]=me[Le],me[Le]=Ne}function O(me,Me,Le,Ne,Re){if(0===me.length)return-1;if("string"==typeof Le?(Ne=Le,Le=0):Le>2147483647?Le=2147483647:Le<-2147483648&&(Le=-2147483648),Se(Le=+Le)&&(Le=Re?0:me.length-1),Le<0&&(Le=me.length+Le),Le>=me.length){if(Re)return-1;Le=me.length-1}else if(Le<0){if(!Re)return-1;Le=0}if("string"==typeof Me&&(Me=g.from(Me,Ne)),g.isBuffer(Me))return 0===Me.length?-1:z(me,Me,Le,Ne,Re);if("number"==typeof Me)return Me&=255,"function"==typeof Uint8Array.prototype.indexOf?Re?Uint8Array.prototype.indexOf.call(me,Me,Le):Uint8Array.prototype.lastIndexOf.call(me,Me,Le):z(me,[Me],Le,Ne,Re);throw new TypeError("val must be string, number or Buffer")}function z(me,Me,Le,Ne,Re){var He,Ze=1,nt=me.length,ft=Me.length;if(void 0!==Ne&&("ucs2"===(Ne=String(Ne).toLowerCase())||"ucs-2"===Ne||"utf16le"===Ne||"utf-16le"===Ne)){if(me.length<2||Me.length<2)return-1;Ze=2,nt/=2,ft/=2,Le/=2}function ht(ot,it){return 1===Ze?ot[it]:ot.readUInt16BE(it*Ze)}if(Re){var Tt=-1;for(He=Le;He<nt;He++)if(ht(me,He)===ht(Me,-1===Tt?0:He-Tt)){if(-1===Tt&&(Tt=He),He-Tt+1===ft)return Tt*Ze}else-1!==Tt&&(He-=He-Tt),Tt=-1}else for(Le+ft>nt&&(Le=nt-ft),He=Le;He>=0;He--){for(var At=!0,_t=0;_t<ft;_t++)if(ht(me,He+_t)!==ht(Me,_t)){At=!1;break}if(At)return He}return-1}function U(me,Me,Le,Ne){Le=Number(Le)||0;var Re=me.length-Le;Ne?(Ne=Number(Ne))>Re&&(Ne=Re):Ne=Re;var He,Ze=Me.length;for(Ne>Ze/2&&(Ne=Ze/2),He=0;He<Ne;++He){var nt=parseInt(Me.substr(2*He,2),16);if(Se(nt))return He;me[Le+He]=nt}return He}function R(me,Me,Le,Ne){return Ie(se(Me,me.length-Le),me,Le,Ne)}function j(me,Me,Le,Ne){return Ie(function(Re){for(var He=[],Ze=0;Ze<Re.length;++Ze)He.push(255&Re.charCodeAt(Ze));return He}(Me),me,Le,Ne)}function Y(me,Me,Le,Ne){return Ie(ge(Me),me,Le,Ne)}function B(me,Me,Le,Ne){return Ie(function(Re,He){for(var Ze,nt,ht=[],Tt=0;Tt<Re.length&&!((He-=2)<0);++Tt)nt=(Ze=Re.charCodeAt(Tt))>>8,ht.push(Ze%256),ht.push(nt);return ht}(Me,me.length-Le),me,Le,Ne)}function V(me,Me,Le){return f.fromByteArray(0===Me&&Le===me.length?me:me.slice(Me,Le))}function q(me,Me,Le){Le=Math.min(me.length,Le);for(var Ne=[],Re=Me;Re<Le;){var He=me[Re],Ze=null,nt=He>239?4:He>223?3:He>191?2:1;if(Re+nt<=Le){var ft=void 0,ht=void 0,Tt=void 0,At=void 0;switch(nt){case 1:He<128&&(Ze=He);break;case 2:128==(192&(ft=me[Re+1]))&&(At=(31&He)<<6|63&ft)>127&&(Ze=At);break;case 3:ht=me[Re+2],128==(192&(ft=me[Re+1]))&&128==(192&ht)&&(At=(15&He)<<12|(63&ft)<<6|63&ht)>2047&&(At<55296||At>57343)&&(Ze=At);break;case 4:ht=me[Re+2],Tt=me[Re+3],128==(192&(ft=me[Re+1]))&&128==(192&ht)&&128==(192&Tt)&&(At=(15&He)<<18|(63&ft)<<12|(63&ht)<<6|63&Tt)>65535&&At<1114112&&(Ze=At)}}null===Ze?(Ze=65533,nt=1):Ze>65535&&(Ne.push((Ze-=65536)>>>10&1023|55296),Ze=56320|1023&Ze),Ne.push(Ze),Re+=nt}return function(_t){var ot=_t.length;if(ot<=ie)return String.fromCharCode.apply(String,_t);for(var it="",Pt=0;Pt<ot;)it+=String.fromCharCode.apply(String,_t.slice(Pt,Pt+=ie));return it}(Ne)}(g.TYPED_ARRAY_SUPPORT=function(){try{var me=new Uint8Array(1),Me={foo:function(){return 42}};return Object.setPrototypeOf(Me,Uint8Array.prototype),Object.setPrototypeOf(me,Me),42===me.foo()}catch{return!1}}())||typeof console>"u"||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(g.prototype,"parent",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.buffer}}),Object.defineProperty(g.prototype,"offset",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.byteOffset}}),g.poolSize=8192,g.from=function(me,Me,Le){return x(me,Me,Le)},Object.setPrototypeOf(g.prototype,Uint8Array.prototype),Object.setPrototypeOf(g,Uint8Array),g.alloc=function(me,Me,Le){return Re=Me,He=Le,v(Ne=me),Ne<=0?m(Ne):void 0!==Re?"string"==typeof He?m(Ne).fill(Re,He):m(Ne).fill(Re):m(Ne);var Ne,Re,He},g.allocUnsafe=function(me){return b(me)},g.allocUnsafeSlow=function(me){return b(me)},g.isBuffer=function(me){return null!=me&&!0===me._isBuffer&&me!==g.prototype},g.compare=function(me,Me){if(ke(me,Uint8Array)&&(me=g.from(me,me.offset,me.byteLength)),ke(Me,Uint8Array)&&(Me=g.from(Me,Me.offset,Me.byteLength)),!g.isBuffer(me)||!g.isBuffer(Me))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(me===Me)return 0;for(var Le=me.length,Ne=Me.length,Re=0,He=Math.min(Le,Ne);Re<He;++Re)if(me[Re]!==Me[Re]){Le=me[Re],Ne=Me[Re];break}return Le<Ne?-1:Ne<Le?1:0},g.isEncoding=function(me){switch(String(me).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},g.concat=function(me,Me){if(!Array.isArray(me))throw new TypeError('"list" argument must be an Array of Buffers');if(0===me.length)return g.alloc(0);var Le;if(void 0===Me)for(Me=0,Le=0;Le<me.length;++Le)Me+=me[Le].length;var Ne=g.allocUnsafe(Me),Re=0;for(Le=0;Le<me.length;++Le){var He=me[Le];if(ke(He,Uint8Array))Re+He.length>Ne.length?(g.isBuffer(He)||(He=g.from(He)),He.copy(Ne,Re)):Uint8Array.prototype.set.call(Ne,He,Re);else{if(!g.isBuffer(He))throw new TypeError('"list" argument must be an Array of Buffers');He.copy(Ne,Re)}Re+=He.length}return Ne},g.byteLength=E,g.prototype._isBuffer=!0,g.prototype.swap16=function(){var me=this.length;if(me%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Me=0;Me<me;Me+=2)I(this,Me,Me+1);return this},g.prototype.swap32=function(){var me=this.length;if(me%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Me=0;Me<me;Me+=4)I(this,Me,Me+3),I(this,Me+1,Me+2);return this},g.prototype.swap64=function(){var me=this.length;if(me%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Me=0;Me<me;Me+=8)I(this,Me,Me+7),I(this,Me+1,Me+6),I(this,Me+2,Me+5),I(this,Me+3,Me+4);return this},g.prototype.toString=function(){var me=this.length;return 0===me?"":0===arguments.length?q(this,0,me):P.apply(this,arguments)},g.prototype.toLocaleString=g.prototype.toString,g.prototype.equals=function(me){if(!g.isBuffer(me))throw new TypeError("Argument must be a Buffer");return this===me||0===g.compare(this,me)},g.prototype.inspect=function(){var me="",Me=l.IS;return me=this.toString("hex",0,Me).replace(/(.{2})/g,"$1 ").trim(),this.length>Me&&(me+=" ... "),"<Buffer "+me+">"},y&&(g.prototype[y]=g.prototype.inspect),g.prototype.compare=function(me,Me,Le,Ne,Re){if(ke(me,Uint8Array)&&(me=g.from(me,me.offset,me.byteLength)),!g.isBuffer(me))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+u(me));if(void 0===Me&&(Me=0),void 0===Le&&(Le=me?me.length:0),void 0===Ne&&(Ne=0),void 0===Re&&(Re=this.length),Me<0||Le>me.length||Ne<0||Re>this.length)throw new RangeError("out of range index");if(Ne>=Re&&Me>=Le)return 0;if(Ne>=Re)return-1;if(Me>=Le)return 1;if(this===me)return 0;for(var He=(Re>>>=0)-(Ne>>>=0),Ze=(Le>>>=0)-(Me>>>=0),nt=Math.min(He,Ze),ft=this.slice(Ne,Re),ht=me.slice(Me,Le),Tt=0;Tt<nt;++Tt)if(ft[Tt]!==ht[Tt]){He=ft[Tt],Ze=ht[Tt];break}return He<Ze?-1:Ze<He?1:0},g.prototype.includes=function(me,Me,Le){return-1!==this.indexOf(me,Me,Le)},g.prototype.indexOf=function(me,Me,Le){return O(this,me,Me,Le,!0)},g.prototype.lastIndexOf=function(me,Me,Le){return O(this,me,Me,Le,!1)},g.prototype.write=function(me,Me,Le,Ne){if(void 0===Me)Ne="utf8",Le=this.length,Me=0;else if(void 0===Le&&"string"==typeof Me)Ne=Me,Le=this.length,Me=0;else{if(!isFinite(Me))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");Me>>>=0,isFinite(Le)?(Le>>>=0,void 0===Ne&&(Ne="utf8")):(Ne=Le,Le=void 0)}var Re=this.length-Me;if((void 0===Le||Le>Re)&&(Le=Re),me.length>0&&(Le<0||Me<0)||Me>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ne||(Ne="utf8");for(var He=!1;;)switch(Ne){case"hex":return U(this,me,Me,Le);case"utf8":case"utf-8":return R(this,me,Me,Le);case"ascii":case"latin1":case"binary":return j(this,me,Me,Le);case"base64":return Y(this,me,Me,Le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,me,Me,Le);default:if(He)throw new TypeError("Unknown encoding: "+Ne);Ne=(""+Ne).toLowerCase(),He=!0}},g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ie=4096;function te(me,Me,Le){var Ne="";Le=Math.min(me.length,Le);for(var Re=Me;Re<Le;++Re)Ne+=String.fromCharCode(127&me[Re]);return Ne}function ee(me,Me,Le){var Ne="";Le=Math.min(me.length,Le);for(var Re=Me;Re<Le;++Re)Ne+=String.fromCharCode(me[Re]);return Ne}function $(me,Me,Le){var Ne=me.length;(!Me||Me<0)&&(Me=0),(!Le||Le<0||Le>Ne)&&(Le=Ne);for(var Re="",He=Me;He<Le;++He)Re+=Pe[me[He]];return Re}function J(me,Me,Le){for(var Ne=me.slice(Me,Le),Re="",He=0;He<Ne.length-1;He+=2)Re+=String.fromCharCode(Ne[He]+256*Ne[He+1]);return Re}function X(me,Me,Le){if(me%1!=0||me<0)throw new RangeError("offset is not uint");if(me+Me>Le)throw new RangeError("Trying to access beyond buffer length")}function ae(me,Me,Le,Ne,Re,He){if(!g.isBuffer(me))throw new TypeError('"buffer" argument must be a Buffer instance');if(Me>Re||Me<He)throw new RangeError('"value" argument is out of bounds');if(Le+Ne>me.length)throw new RangeError("Index out of range")}function ce(me,Me,Le,Ne,Re){Ce(Me,Ne,Re,me,Le,7);var He=Number(Me&BigInt(4294967295));me[Le++]=He,me[Le++]=He>>=8,me[Le++]=He>>=8,me[Le++]=He>>=8;var Ze=Number(Me>>BigInt(32)&BigInt(4294967295));return me[Le++]=Ze,me[Le++]=Ze>>=8,me[Le++]=Ze>>=8,me[Le++]=Ze>>=8,Le}function le(me,Me,Le,Ne,Re){Ce(Me,Ne,Re,me,Le,7);var He=Number(Me&BigInt(4294967295));me[Le+7]=He,me[Le+6]=He>>=8,me[Le+5]=He>>=8,me[Le+4]=He>>=8;var Ze=Number(Me>>BigInt(32)&BigInt(4294967295));return me[Le+3]=Ze,me[Le+2]=Ze>>=8,me[Le+1]=Ze>>=8,me[Le]=Ze>>=8,Le+8}function pe(me,Me,Le,Ne,Re,He){if(Le+Ne>me.length)throw new RangeError("Index out of range");if(Le<0)throw new RangeError("Index out of range")}function we(me,Me,Le,Ne,Re){return Me=+Me,Le>>>=0,Re||pe(me,0,Le,4),c.write(me,Me,Le,Ne,23,4),Le+4}function Te(me,Me,Le,Ne,Re){return Me=+Me,Le>>>=0,Re||pe(me,0,Le,8),c.write(me,Me,Le,Ne,52,8),Le+8}g.prototype.slice=function(me,Me){var Le=this.length;(me=~~me)<0?(me+=Le)<0&&(me=0):me>Le&&(me=Le),(Me=void 0===Me?Le:~~Me)<0?(Me+=Le)<0&&(Me=0):Me>Le&&(Me=Le),Me<me&&(Me=me);var Ne=this.subarray(me,Me);return Object.setPrototypeOf(Ne,g.prototype),Ne},g.prototype.readUintLE=g.prototype.readUIntLE=function(me,Me,Le){me>>>=0,Me>>>=0,Le||X(me,Me,this.length);for(var Ne=this[me],Re=1,He=0;++He<Me&&(Re*=256);)Ne+=this[me+He]*Re;return Ne},g.prototype.readUintBE=g.prototype.readUIntBE=function(me,Me,Le){me>>>=0,Me>>>=0,Le||X(me,Me,this.length);for(var Ne=this[me+--Me],Re=1;Me>0&&(Re*=256);)Ne+=this[me+--Me]*Re;return Ne},g.prototype.readUint8=g.prototype.readUInt8=function(me,Me){return me>>>=0,Me||X(me,1,this.length),this[me]},g.prototype.readUint16LE=g.prototype.readUInt16LE=function(me,Me){return me>>>=0,Me||X(me,2,this.length),this[me]|this[me+1]<<8},g.prototype.readUint16BE=g.prototype.readUInt16BE=function(me,Me){return me>>>=0,Me||X(me,2,this.length),this[me]<<8|this[me+1]},g.prototype.readUint32LE=g.prototype.readUInt32LE=function(me,Me){return me>>>=0,Me||X(me,4,this.length),(this[me]|this[me+1]<<8|this[me+2]<<16)+16777216*this[me+3]},g.prototype.readUint32BE=g.prototype.readUInt32BE=function(me,Me){return me>>>=0,Me||X(me,4,this.length),16777216*this[me]+(this[me+1]<<16|this[me+2]<<8|this[me+3])},g.prototype.readBigUInt64LE=Fe(function(me){Oe(me>>>=0,"offset");var Me=this[me],Le=this[me+7];void 0!==Me&&void 0!==Le||be(me,this.length-8);var Ne=Me+this[++me]*Math.pow(2,8)+this[++me]*Math.pow(2,16)+this[++me]*Math.pow(2,24),Re=this[++me]+this[++me]*Math.pow(2,8)+this[++me]*Math.pow(2,16)+Le*Math.pow(2,24);return BigInt(Ne)+(BigInt(Re)<<BigInt(32))}),g.prototype.readBigUInt64BE=Fe(function(me){Oe(me>>>=0,"offset");var Me=this[me],Le=this[me+7];void 0!==Me&&void 0!==Le||be(me,this.length-8);var Ne=Me*Math.pow(2,24)+this[++me]*Math.pow(2,16)+this[++me]*Math.pow(2,8)+this[++me],Re=this[++me]*Math.pow(2,24)+this[++me]*Math.pow(2,16)+this[++me]*Math.pow(2,8)+Le;return(BigInt(Ne)<<BigInt(32))+BigInt(Re)}),g.prototype.readIntLE=function(me,Me,Le){me>>>=0,Me>>>=0,Le||X(me,Me,this.length);for(var Ne=this[me],Re=1,He=0;++He<Me&&(Re*=256);)Ne+=this[me+He]*Re;return Ne>=(Re*=128)&&(Ne-=Math.pow(2,8*Me)),Ne},g.prototype.readIntBE=function(me,Me,Le){me>>>=0,Me>>>=0,Le||X(me,Me,this.length);for(var Ne=Me,Re=1,He=this[me+--Ne];Ne>0&&(Re*=256);)He+=this[me+--Ne]*Re;return He>=(Re*=128)&&(He-=Math.pow(2,8*Me)),He},g.prototype.readInt8=function(me,Me){return me>>>=0,Me||X(me,1,this.length),128&this[me]?-1*(255-this[me]+1):this[me]},g.prototype.readInt16LE=function(me,Me){me>>>=0,Me||X(me,2,this.length);var Le=this[me]|this[me+1]<<8;return 32768&Le?4294901760|Le:Le},g.prototype.readInt16BE=function(me,Me){me>>>=0,Me||X(me,2,this.length);var Le=this[me+1]|this[me]<<8;return 32768&Le?4294901760|Le:Le},g.prototype.readInt32LE=function(me,Me){return me>>>=0,Me||X(me,4,this.length),this[me]|this[me+1]<<8|this[me+2]<<16|this[me+3]<<24},g.prototype.readInt32BE=function(me,Me){return me>>>=0,Me||X(me,4,this.length),this[me]<<24|this[me+1]<<16|this[me+2]<<8|this[me+3]},g.prototype.readBigInt64LE=Fe(function(me){Oe(me>>>=0,"offset");var Me=this[me],Le=this[me+7];void 0!==Me&&void 0!==Le||be(me,this.length-8);var Ne=this[me+4]+this[me+5]*Math.pow(2,8)+this[me+6]*Math.pow(2,16)+(Le<<24);return(BigInt(Ne)<<BigInt(32))+BigInt(Me+this[++me]*Math.pow(2,8)+this[++me]*Math.pow(2,16)+this[++me]*Math.pow(2,24))}),g.prototype.readBigInt64BE=Fe(function(me){Oe(me>>>=0,"offset");var Me=this[me],Le=this[me+7];void 0!==Me&&void 0!==Le||be(me,this.length-8);var Ne=(Me<<24)+this[++me]*Math.pow(2,16)+this[++me]*Math.pow(2,8)+this[++me];return(BigInt(Ne)<<BigInt(32))+BigInt(this[++me]*Math.pow(2,24)+this[++me]*Math.pow(2,16)+this[++me]*Math.pow(2,8)+Le)}),g.prototype.readFloatLE=function(me,Me){return me>>>=0,Me||X(me,4,this.length),c.read(this,me,!0,23,4)},g.prototype.readFloatBE=function(me,Me){return me>>>=0,Me||X(me,4,this.length),c.read(this,me,!1,23,4)},g.prototype.readDoubleLE=function(me,Me){return me>>>=0,Me||X(me,8,this.length),c.read(this,me,!0,52,8)},g.prototype.readDoubleBE=function(me,Me){return me>>>=0,Me||X(me,8,this.length),c.read(this,me,!1,52,8)},g.prototype.writeUintLE=g.prototype.writeUIntLE=function(me,Me,Le,Ne){me=+me,Me>>>=0,Le>>>=0,Ne||ae(this,me,Me,Le,Math.pow(2,8*Le)-1,0);var Re=1,He=0;for(this[Me]=255&me;++He<Le&&(Re*=256);)this[Me+He]=me/Re&255;return Me+Le},g.prototype.writeUintBE=g.prototype.writeUIntBE=function(me,Me,Le,Ne){me=+me,Me>>>=0,Le>>>=0,Ne||ae(this,me,Me,Le,Math.pow(2,8*Le)-1,0);var Re=Le-1,He=1;for(this[Me+Re]=255&me;--Re>=0&&(He*=256);)this[Me+Re]=me/He&255;return Me+Le},g.prototype.writeUint8=g.prototype.writeUInt8=function(me,Me,Le){return me=+me,Me>>>=0,Le||ae(this,me,Me,1,255,0),this[Me]=255&me,Me+1},g.prototype.writeUint16LE=g.prototype.writeUInt16LE=function(me,Me,Le){return me=+me,Me>>>=0,Le||ae(this,me,Me,2,65535,0),this[Me]=255&me,this[Me+1]=me>>>8,Me+2},g.prototype.writeUint16BE=g.prototype.writeUInt16BE=function(me,Me,Le){return me=+me,Me>>>=0,Le||ae(this,me,Me,2,65535,0),this[Me]=me>>>8,this[Me+1]=255&me,Me+2},g.prototype.writeUint32LE=g.prototype.writeUInt32LE=function(me,Me,Le){return me=+me,Me>>>=0,Le||ae(this,me,Me,4,4294967295,0),this[Me+3]=me>>>24,this[Me+2]=me>>>16,this[Me+1]=me>>>8,this[Me]=255&me,Me+4},g.prototype.writeUint32BE=g.prototype.writeUInt32BE=function(me,Me,Le){return me=+me,Me>>>=0,Le||ae(this,me,Me,4,4294967295,0),this[Me]=me>>>24,this[Me+1]=me>>>16,this[Me+2]=me>>>8,this[Me+3]=255&me,Me+4},g.prototype.writeBigUInt64LE=Fe(function(me){return ce(this,me,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),g.prototype.writeBigUInt64BE=Fe(function(me){return le(this,me,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),g.prototype.writeIntLE=function(me,Me,Le,Ne){if(me=+me,Me>>>=0,!Ne){var Re=Math.pow(2,8*Le-1);ae(this,me,Me,Le,Re-1,-Re)}var He=0,Ze=1,nt=0;for(this[Me]=255&me;++He<Le&&(Ze*=256);)me<0&&0===nt&&0!==this[Me+He-1]&&(nt=1),this[Me+He]=(me/Ze>>0)-nt&255;return Me+Le},g.prototype.writeIntBE=function(me,Me,Le,Ne){if(me=+me,Me>>>=0,!Ne){var Re=Math.pow(2,8*Le-1);ae(this,me,Me,Le,Re-1,-Re)}var He=Le-1,Ze=1,nt=0;for(this[Me+He]=255&me;--He>=0&&(Ze*=256);)me<0&&0===nt&&0!==this[Me+He+1]&&(nt=1),this[Me+He]=(me/Ze>>0)-nt&255;return Me+Le},g.prototype.writeInt8=function(me,Me,Le){return me=+me,Me>>>=0,Le||ae(this,me,Me,1,127,-128),me<0&&(me=255+me+1),this[Me]=255&me,Me+1},g.prototype.writeInt16LE=function(me,Me,Le){return me=+me,Me>>>=0,Le||ae(this,me,Me,2,32767,-32768),this[Me]=255&me,this[Me+1]=me>>>8,Me+2},g.prototype.writeInt16BE=function(me,Me,Le){return me=+me,Me>>>=0,Le||ae(this,me,Me,2,32767,-32768),this[Me]=me>>>8,this[Me+1]=255&me,Me+2},g.prototype.writeInt32LE=function(me,Me,Le){return me=+me,Me>>>=0,Le||ae(this,me,Me,4,2147483647,-2147483648),this[Me]=255&me,this[Me+1]=me>>>8,this[Me+2]=me>>>16,this[Me+3]=me>>>24,Me+4},g.prototype.writeInt32BE=function(me,Me,Le){return me=+me,Me>>>=0,Le||ae(this,me,Me,4,2147483647,-2147483648),me<0&&(me=4294967295+me+1),this[Me]=me>>>24,this[Me+1]=me>>>16,this[Me+2]=me>>>8,this[Me+3]=255&me,Me+4},g.prototype.writeBigInt64LE=Fe(function(me){return ce(this,me,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),g.prototype.writeBigInt64BE=Fe(function(me){return le(this,me,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),g.prototype.writeFloatLE=function(me,Me,Le){return we(this,me,Me,!0,Le)},g.prototype.writeFloatBE=function(me,Me,Le){return we(this,me,Me,!1,Le)},g.prototype.writeDoubleLE=function(me,Me,Le){return Te(this,me,Me,!0,Le)},g.prototype.writeDoubleBE=function(me,Me,Le){return Te(this,me,Me,!1,Le)},g.prototype.copy=function(me,Me,Le,Ne){if(!g.isBuffer(me))throw new TypeError("argument should be a Buffer");if(Le||(Le=0),Ne||0===Ne||(Ne=this.length),Me>=me.length&&(Me=me.length),Me||(Me=0),Ne>0&&Ne<Le&&(Ne=Le),Ne===Le||0===me.length||0===this.length)return 0;if(Me<0)throw new RangeError("targetStart out of bounds");if(Le<0||Le>=this.length)throw new RangeError("Index out of range");if(Ne<0)throw new RangeError("sourceEnd out of bounds");Ne>this.length&&(Ne=this.length),me.length-Me<Ne-Le&&(Ne=me.length-Me+Le);var Re=Ne-Le;return this===me&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(Me,Le,Ne):Uint8Array.prototype.set.call(me,this.subarray(Le,Ne),Me),Re},g.prototype.fill=function(me,Me,Le,Ne){if("string"==typeof me){if("string"==typeof Me?(Ne=Me,Me=0,Le=this.length):"string"==typeof Le&&(Ne=Le,Le=this.length),void 0!==Ne&&"string"!=typeof Ne)throw new TypeError("encoding must be a string");if("string"==typeof Ne&&!g.isEncoding(Ne))throw new TypeError("Unknown encoding: "+Ne);if(1===me.length){var Re=me.charCodeAt(0);("utf8"===Ne&&Re<128||"latin1"===Ne)&&(me=Re)}}else"number"==typeof me?me&=255:"boolean"==typeof me&&(me=Number(me));if(Me<0||this.length<Me||this.length<Le)throw new RangeError("Out of range index");if(Le<=Me)return this;var He;if(Me>>>=0,Le=void 0===Le?this.length:Le>>>0,me||(me=0),"number"==typeof me)for(He=Me;He<Le;++He)this[He]=me;else{var Ze=g.isBuffer(me)?me:g.from(me,Ne),nt=Ze.length;if(0===nt)throw new TypeError('The value "'+me+'" is invalid for argument "value"');for(He=0;He<Le-Me;++He)this[He+Me]=Ze[He%nt]}return this};var ye={};function ve(me,Me,Le){ye[me]=function(Ne){function Re(){var nt,ht;return function(At,_t){if(!(At instanceof _t))throw new TypeError("Cannot call a class as a function")}(this,Re),this,ht=a(ht=Re),nt=function(At,_t){if(_t&&("object"===u(_t)||"function"==typeof _t))return _t;if(void 0!==_t)throw new TypeError("Derived constructors may only return object or undefined");return function(ot){if(void 0===ot)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ot}(At)}(this,n()?Reflect.construct(ht,[],a(this).constructor):ht.apply(this,undefined)),Object.defineProperty(nt,"message",{value:Me.apply(nt,arguments),writable:!0,configurable:!0}),nt.name="".concat(nt.name," [").concat(me,"]"),delete nt.name,nt}return function(nt,ft){if("function"!=typeof ft&&null!==ft)throw new TypeError("Super expression must either be null or a function");nt.prototype=Object.create(ft&&ft.prototype,{constructor:{value:nt,writable:!0,configurable:!0}}),Object.defineProperty(nt,"prototype",{writable:!1}),ft&&s(nt,ft)}(Re,Ne),He=Re,(Ze=[{key:"code",get:function(){return me},set:function(nt){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:nt,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(me,"]: ").concat(this.message)}}])&&function i(me,Me){for(var Le=0;Le<Me.length;Le++){var Ne=Me[Le];Ne.enumerable=Ne.enumerable||!1,Ne.configurable=!0,"value"in Ne&&(Ne.writable=!0),Object.defineProperty(me,r(Ne.key),Ne)}}(He.prototype,Ze),Object.defineProperty(He,"prototype",{writable:!1}),He;var He,Ze}(Le)}function xe(me){for(var Me="",Le=me.length,Ne="-"===me[0]?1:0;Le>=Ne+4;Le-=3)Me="_".concat(me.slice(Le-3,Le)).concat(Me);return"".concat(me.slice(0,Le)).concat(Me)}function Ce(me,Me,Le,Ne,Re,He){if(me>Le||me<Me){var Ze,nt="bigint"==typeof Me?"n":"";throw Ze=He>3?0===Me||Me===BigInt(0)?">= 0".concat(nt," and < 2").concat(nt," ** ").concat(8*(He+1)).concat(nt):">= -(2".concat(nt," ** ").concat(8*(He+1)-1).concat(nt,") and < 2 ** ")+"".concat(8*(He+1)-1).concat(nt):">= ".concat(Me).concat(nt," and <= ").concat(Le).concat(nt),new ye.ERR_OUT_OF_RANGE("value",Ze,me)}var ft,ht,Tt;ft=Ne,Tt=He,Oe(ht=Re,"offset"),void 0!==ft[ht]&&void 0!==ft[ht+Tt]||be(ht,ft.length-(Tt+1))}function Oe(me,Me){if("number"!=typeof me)throw new ye.ERR_INVALID_ARG_TYPE(Me,"number",me)}function be(me,Me,Le){throw Math.floor(me)!==me?(Oe(me,Le),new ye.ERR_OUT_OF_RANGE(Le||"offset","an integer",me)):Me<0?new ye.ERR_BUFFER_OUT_OF_BOUNDS:new ye.ERR_OUT_OF_RANGE(Le||"offset",">= ".concat(Le?1:0," and <= ").concat(Me),me)}ve("ERR_BUFFER_OUT_OF_BOUNDS",function(me){return me?"".concat(me," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),ve("ERR_INVALID_ARG_TYPE",function(me,Me){return'The "'.concat(me,'" argument must be of type number. Received type ').concat(u(Me))},TypeError),ve("ERR_OUT_OF_RANGE",function(me,Me,Le){var Ne='The value of "'.concat(me,'" is out of range.'),Re=Le;return Number.isInteger(Le)&&Math.abs(Le)>Math.pow(2,32)?Re=xe(String(Le)):"bigint"==typeof Le&&(Re=String(Le),(Le>Math.pow(BigInt(2),BigInt(32))||Le<-Math.pow(BigInt(2),BigInt(32)))&&(Re=xe(Re)),Re+="n"),Ne+" It must be ".concat(Me,". Received ").concat(Re)},RangeError);var ue=/[^+/0-9A-Za-z-_]/g;function se(me,Me){var Le;Me=Me||1/0;for(var Ne=me.length,Re=null,He=[],Ze=0;Ze<Ne;++Ze){if((Le=me.charCodeAt(Ze))>55295&&Le<57344){if(!Re){if(Le>56319){(Me-=3)>-1&&He.push(239,191,189);continue}if(Ze+1===Ne){(Me-=3)>-1&&He.push(239,191,189);continue}Re=Le;continue}if(Le<56320){(Me-=3)>-1&&He.push(239,191,189),Re=Le;continue}Le=65536+(Re-55296<<10|Le-56320)}else Re&&(Me-=3)>-1&&He.push(239,191,189);if(Re=null,Le<128){if((Me-=1)<0)break;He.push(Le)}else if(Le<2048){if((Me-=2)<0)break;He.push(Le>>6|192,63&Le|128)}else if(Le<65536){if((Me-=3)<0)break;He.push(Le>>12|224,Le>>6&63|128,63&Le|128)}else{if(!(Le<1114112))throw new Error("Invalid code point");if((Me-=4)<0)break;He.push(Le>>18|240,Le>>12&63|128,Le>>6&63|128,63&Le|128)}}return He}function ge(me){return f.toByteArray(function(Me){if((Me=(Me=Me.split("=")[0]).trim().replace(ue,"")).length<2)return"";for(;Me.length%4!=0;)Me+="=";return Me}(me))}function Ie(me,Me,Le,Ne){var Re;for(Re=0;Re<Ne&&!(Re+Le>=Me.length||Re>=me.length);++Re)Me[Re+Le]=me[Re];return Re}function ke(me,Me){return me instanceof Me||null!=me&&null!=me.constructor&&null!=me.constructor.name&&me.constructor.name===Me.name}function Se(me){return me!=me}var Pe=function(){for(var me="0123456789abcdef",Me=new Array(256),Le=0;Le<16;++Le)for(var Ne=16*Le,Re=0;Re<16;++Re)Me[Ne+Re]=me[Le]+me[Re];return Me}();function Fe(me){return typeof BigInt>"u"?Be:me}function Be(){throw new Error("BigInt not supported")}},9216:function(p){"use strict";p.exports=r,p.exports.isMobile=r,p.exports.default=r;var l=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,t=/CrOS/,i=/android|ipad|playbook|silk/i;function r(n){n||(n={});var a=n.ua;if(a||typeof navigator>"u"||(a=navigator.userAgent),a&&a.headers&&"string"==typeof a.headers["user-agent"]&&(a=a.headers["user-agent"]),"string"!=typeof a)return!1;var s=l.test(a)&&!t.test(a)||!!n.tablet&&i.test(a);return!s&&n.tablet&&n.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==a.indexOf("Macintosh")&&-1!==a.indexOf("Safari")&&(s=!0),s}},6296:function(p,l,t){"use strict";p.exports=function(u){var f=(u=u||{}).eye||[0,0,1],c=u.center||[0,0,0],y=u.up||[0,1,0],d=u.distanceLimits||[0,1/0],m=u.mode||"turntable",g=i(),x=r(),v=n();return g.setDistanceLimits(d[0],d[1]),g.lookAt(0,f,c,y),x.setDistanceLimits(d[0],d[1]),x.lookAt(0,f,c,y),v.setDistanceLimits(d[0],d[1]),v.lookAt(0,f,c,y),new a({turntable:g,orbit:x,matrix:v},m)};var i=t(7261),r=t(9977),n=t(4192);function a(u,f){this._controllerNames=Object.keys(u),this._controllerList=this._controllerNames.map(function(c){return u[c]}),this._mode=f,this._active=u[f],this._active||(this._mode="turntable",this._active=u.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var s=a.prototype;s.flush=function(u){for(var f=this._controllerList,c=0;c<f.length;++c)f[c].flush(u)},s.idle=function(u){for(var f=this._controllerList,c=0;c<f.length;++c)f[c].idle(u)},s.lookAt=function(u,f,c,y){for(var d=this._controllerList,m=0;m<d.length;++m)d[m].lookAt(u,f,c,y)},s.rotate=function(u,f,c,y){for(var d=this._controllerList,m=0;m<d.length;++m)d[m].rotate(u,f,c,y)},s.pan=function(u,f,c,y){for(var d=this._controllerList,m=0;m<d.length;++m)d[m].pan(u,f,c,y)},s.translate=function(u,f,c,y){for(var d=this._controllerList,m=0;m<d.length;++m)d[m].translate(u,f,c,y)},s.setMatrix=function(u,f){for(var c=this._controllerList,y=0;y<c.length;++y)c[y].setMatrix(u,f)},s.setDistanceLimits=function(u,f){for(var c=this._controllerList,y=0;y<c.length;++y)c[y].setDistanceLimits(u,f)},s.setDistance=function(u,f){for(var c=this._controllerList,y=0;y<c.length;++y)c[y].setDistance(u,f)},s.recalcMatrix=function(u){this._active.recalcMatrix(u)},s.getDistance=function(u){return this._active.getDistance(u)},s.getDistanceLimits=function(u){return this._active.getDistanceLimits(u)},s.lastT=function(){return this._active.lastT()},s.setMode=function(u){if(u!==this._mode){var f=this._controllerNames.indexOf(u);if(!(f<0)){var c=this._active,y=this._controllerList[f],d=Math.max(c.lastT(),y.lastT());c.recalcMatrix(d),y.setMatrix(d,c.computedMatrix),this._active=y,this._mode=u,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},s.getMode=function(){return this._mode}},7169:function(p,l,t){"use strict";var i=typeof WeakMap>"u"?t(1538):WeakMap,r=t(2762),n=t(8116),a=new i;p.exports=function(s){var u=a.get(s),f=u&&(u._triangleBuffer.handle||u._triangleBuffer.buffer);if(!f||!s.isBuffer(f)){var c=r(s,new Float32Array([-1,-1,-1,4,4,-1]));(u=n(s,[{buffer:c,type:s.FLOAT,size:2}]))._triangleBuffer=c,a.set(s,u)}u.bind(),s.drawArrays(s.TRIANGLES,0,3),u.unbind()}},1085:function(p,l,t){var i=t(1371);p.exports=function(r,n,a){n="number"==typeof n?n:1,a=a||": ";var s=r.split(/\r?\n/),u=String(s.length+n-1).length;return s.map(function(f,c){var y=c+n,d=String(y).length;return i(y,u-d)+a+f}).join("\n")}},3952:function(p,l,t){"use strict";p.exports=function(n){var a=n.length;if(0===a)return[];if(1===a)return[0];for(var s=n[0].length,u=[n[0]],f=[0],c=1;c<a;++c)if(u.push(n[c]),r(u,s)){if(f.push(c),f.length===s+1)return f}else u.pop();return f};var i=t(3250);function r(n,a){for(var s=new Array(a+1),u=0;u<n.length;++u)s[u]=n[u];for(u=0;u<=n.length;++u){for(var f=n.length;f<=a;++f){for(var c=new Array(a),y=0;y<a;++y)c[y]=Math.pow(f+1-u,y);s[f]=c}if(i.apply(void 0,s))return!0}return!1}},5995:function(p,l,t){"use strict";p.exports=function(n,a){return i(a).filter(function(s){for(var u=new Array(s.length),f=0;f<s.length;++f)u[f]=a[s[f]];return r(u)*n<1})};var i=t(7642),r=t(6037)},3502:function(p,l,t){p.exports=function(n,a){return r(i(n,a))};var i=t(5995),r=t(9127)},6468:function(p){p.exports=function(l){return atob(l)}},2642:function(p,l,t){"use strict";p.exports=function(n,a){for(var s=a.length,u=new Array(s+1),f=0;f<s;++f){for(var c=new Array(s+1),y=0;y<=s;++y)c[y]=n[y][f];u[f]=c}for(u[s]=new Array(s+1),f=0;f<=s;++f)u[s][f]=1;var d=new Array(s+1);for(f=0;f<s;++f)d[f]=a[f];d[s]=1;var m=i(u,d),g=r(m[s+1]);0===g&&(g=1);var x=new Array(s+1);for(f=0;f<=s;++f)x[f]=r(m[f])/g;return x};var i=t(727);function r(n){for(var a=0,s=0;s<n.length;++s)a+=n[s];return a}},7507:function(p,l){"use strict";l.byteLength=function(f){var c=s(f),d=c[1];return 3*(c[0]+d)/4-d},l.toByteArray=function(f){var c,y,w,d=s(f),m=d[0],g=d[1],x=new r(3*(m+(w=g))/4-w),v=0,b=g>0?m-4:m;for(y=0;y<b;y+=4)c=i[f.charCodeAt(y)]<<18|i[f.charCodeAt(y+1)]<<12|i[f.charCodeAt(y+2)]<<6|i[f.charCodeAt(y+3)],x[v++]=c>>16&255,x[v++]=c>>8&255,x[v++]=255&c;return 2===g&&(c=i[f.charCodeAt(y)]<<2|i[f.charCodeAt(y+1)]>>4,x[v++]=255&c),1===g&&(c=i[f.charCodeAt(y)]<<10|i[f.charCodeAt(y+1)]<<4|i[f.charCodeAt(y+2)]>>2,x[v++]=c>>8&255,x[v++]=255&c),x},l.fromByteArray=function(f){for(var c,y=f.length,d=y%3,m=[],g=16383,x=0,v=y-d;x<v;x+=g)m.push(u(f,x,x+g>v?v:x+g));return 1===d?m.push(t[(c=f[y-1])>>2]+t[c<<4&63]+"=="):2===d&&m.push(t[(c=(f[y-2]<<8)+f[y-1])>>10]+t[c>>4&63]+t[c<<2&63]+"="),m.join("")};for(var t=[],i=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)t[a]=n[a],i[n.charCodeAt(a)]=a;function s(f){var c=f.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=f.indexOf("=");return-1===y&&(y=c),[y,y===c?0:4-y%4]}function u(f,c,y){for(var m,g=[],x=c;x<y;x+=3)g.push(t[(m=(f[x]<<16&16711680)+(f[x+1]<<8&65280)+(255&f[x+2]))>>18&63]+t[m>>12&63]+t[m>>6&63]+t[63&m]);return g.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},3865:function(p,l,t){"use strict";var i=t(869);p.exports=function(r,n){return i(r[0].mul(n[1]).add(n[0].mul(r[1])),r[1].mul(n[1]))}},1318:function(p){"use strict";p.exports=function(l,t){return l[0].mul(t[1]).cmp(t[0].mul(l[1]))}},8697:function(p,l,t){"use strict";var i=t(869);p.exports=function(r,n){return i(r[0].mul(n[1]),r[1].mul(n[0]))}},7842:function(p,l,t){"use strict";var i=t(6330),r=t(1533),n=t(2651),a=t(4387),s=t(869),u=t(8697);p.exports=function f(c,y){if(i(c))return y?u(c,f(y)):[c[0].clone(),c[1].clone()];var d,m,g=0;if(r(c))d=c.clone();else if("string"==typeof c)d=a(c);else{if(0===c)return[n(0),n(1)];if(c===Math.floor(c))d=n(c);else{for(;c!==Math.floor(c);)c*=Math.pow(2,256),g-=256;d=n(c)}}if(i(y))d.mul(y[1]),m=y[0].clone();else if(r(y))m=y.clone();else if("string"==typeof y)m=a(y);else if(y)if(y===Math.floor(y))m=n(y);else{for(;y!==Math.floor(y);)y*=Math.pow(2,256),g+=256;m=n(y)}else m=n(1);return g>0?d=d.ushln(g):g<0&&(m=m.ushln(-g)),s(d,m)}},6330:function(p,l,t){"use strict";var i=t(1533);p.exports=function(r){return Array.isArray(r)&&2===r.length&&i(r[0])&&i(r[1])}},5716:function(p,l,t){"use strict";var i=t(6859);p.exports=function(r){return r.cmp(new i(0))}},1369:function(p,l,t){"use strict";var i=t(5716);p.exports=function(r){var n=r.length,a=r.words,s=0;if(1===n)s=a[0];else if(2===n)s=a[0]+67108864*a[1];else for(var u=0;u<n;u++)s+=a[u]*Math.pow(67108864,u);return i(r)*s}},4025:function(p,l,t){"use strict";var i=t(2361),r=t(8828).countTrailingZeros;p.exports=function(n){var a=r(i.lo(n));if(a<32)return a;var s=r(i.hi(n));return s>20?52:s+32}},1533:function(p,l,t){"use strict";t(6859),p.exports=function(i){return i&&"object"==typeof i&&!!i.words}},2651:function(p,l,t){"use strict";var i=t(6859),r=t(2361);p.exports=function(n){var a=r.exponent(n);return a<52?new i(n):new i(n*Math.pow(2,52-a)).ushln(a-52)}},869:function(p,l,t){"use strict";var i=t(2651),r=t(5716);p.exports=function(n,a){var s=r(n),u=r(a);if(0===s)return[i(0),i(1)];if(0===u)return[i(0),i(0)];u<0&&(n=n.neg(),a=a.neg());var f=n.gcd(a);return f.cmpn(1)?[n.div(f),a.div(f)]:[n,a]}},4387:function(p,l,t){"use strict";var i=t(6859);p.exports=function(r){return new i(r)}},6504:function(p,l,t){"use strict";var i=t(869);p.exports=function(r,n){return i(r[0].mul(n[0]),r[1].mul(n[1]))}},7721:function(p,l,t){"use strict";var i=t(5716);p.exports=function(r){return i(r[0])*i(r[1])}},5572:function(p,l,t){"use strict";var i=t(869);p.exports=function(r,n){return i(r[0].mul(n[1]).sub(r[1].mul(n[0])),r[1].mul(n[1]))}},946:function(p,l,t){"use strict";var i=t(1369),r=t(4025);p.exports=function(n){var a=n[0],s=n[1];if(0===a.cmpn(0))return 0;var u=a.abs().divmod(s.abs()),c=i(u.div),y=u.mod,d=a.negative!==s.negative?-1:1;if(0===y.cmpn(0))return d*c;if(c){var m=r(c)+4;return d*(c+(x=i(y.ushln(m).divRound(s)))*Math.pow(2,-m))}var g=s.bitLength()-y.bitLength()+53,x=i(y.ushln(g).divRound(s));return g<1023?d*x*Math.pow(2,-g):d*(x*=Math.pow(2,-1023))*Math.pow(2,1023-g)}},2478:function(p){"use strict";function l(s,u,f,c,y){for(var d=y+1;c<=y;){var m=c+y>>>1,g=s[m];(void 0!==f?f(g,u):g-u)>=0?(d=m,y=m-1):c=m+1}return d}function t(s,u,f,c,y){for(var d=y+1;c<=y;){var m=c+y>>>1,g=s[m];(void 0!==f?f(g,u):g-u)>0?(d=m,y=m-1):c=m+1}return d}function i(s,u,f,c,y){for(var d=c-1;c<=y;){var m=c+y>>>1,g=s[m];(void 0!==f?f(g,u):g-u)<0?(d=m,c=m+1):y=m-1}return d}function r(s,u,f,c,y){for(var d=c-1;c<=y;){var m=c+y>>>1,g=s[m];(void 0!==f?f(g,u):g-u)<=0?(d=m,c=m+1):y=m-1}return d}function n(s,u,f,c,y){for(;c<=y;){var d=c+y>>>1,m=s[d],g=void 0!==f?f(m,u):m-u;if(0===g)return d;g<=0?c=d+1:y=d-1}return-1}function a(s,u,f,c,y,d){return"function"==typeof f?d(s,u,f,void 0===c?0:0|c,void 0===y?s.length-1:0|y):d(s,u,void 0,void 0===f?0:0|f,void 0===c?s.length-1:0|c)}p.exports={ge:function(s,u,f,c,y){return a(s,u,f,c,y,l)},gt:function(s,u,f,c,y){return a(s,u,f,c,y,t)},lt:function(s,u,f,c,y){return a(s,u,f,c,y,i)},le:function(s,u,f,c,y){return a(s,u,f,c,y,r)},eq:function(s,u,f,c,y){return a(s,u,f,c,y,n)}}},8828:function(p,l){"use strict";function t(r){var n=32;return(r&=-r)&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}l.INT_BITS=32,l.INT_MAX=2147483647,l.INT_MIN=-2147483648,l.sign=function(r){return(r>0)-(r<0)},l.abs=function(r){var n=r>>31;return(r^n)-n},l.min=function(r,n){return n^(r^n)&-(r<n)},l.max=function(r,n){return r^(r^n)&-(r<n)},l.isPow2=function(r){return!(r&r-1||!r)},l.log2=function(r){var n,a;return n=(r>65535)<<4,n|=a=((r>>>=n)>255)<<3,n|=a=((r>>>=a)>15)<<2,(n|=a=((r>>>=a)>3)<<1)|(r>>>=a)>>1},l.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},l.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},l.countTrailingZeros=t,l.nextPow2=function(r){return r+=0===r,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,1+((r|=r>>>8)|r>>>16)},l.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},l.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var i=new Array(256);(function(r){for(var n=0;n<256;++n){var a=n,s=n,u=7;for(a>>>=1;a;a>>>=1)s<<=1,s|=1&a,--u;r[n]=s<<u&255}})(i),l.reverse=function(r){return i[255&r]<<24|i[r>>>8&255]<<16|i[r>>>16&255]<<8|i[r>>>24&255]},l.interleave2=function(r,n){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))<<1},l.deinterleave2=function(r,n){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>n&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},l.interleave3=function(r,n,a){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<1)|(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<2},l.deinterleave3=function(r,n){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>n&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},l.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>t(r)+1}},6859:function(p,l,t){!function(i,r){"use strict";function n(R,j){if(!R)throw new Error(j||"Assertion failed")}function a(R,j){R.super_=j;var Y=function(){};Y.prototype=j.prototype,R.prototype=new Y,R.prototype.constructor=R}function s(R,j,Y){if(s.isBN(R))return R;this.negative=0,this.words=null,this.length=0,this.red=null,null!==R&&("le"!==j&&"be"!==j||(Y=j,j=10),this._init(R||0,j||10,Y||"be"))}var u;"object"==typeof i?i.exports=s:r.BN=s,s.BN=s,s.wordSize=26;try{u=typeof window<"u"&&void 0!==window.Buffer?window.Buffer:t(7790).Buffer}catch{}function f(R,j){var Y=R.charCodeAt(j);return Y>=65&&Y<=70?Y-55:Y>=97&&Y<=102?Y-87:Y-48&15}function c(R,j,Y){var B=f(R,Y);return Y-1>=j&&(B|=f(R,Y-1)<<4),B}function y(R,j,Y,B){for(var V=0,q=Math.min(R.length,Y),ie=j;ie<q;ie++){var te=R.charCodeAt(ie)-48;V*=B,V+=te>=49?te-49+10:te>=17?te-17+10:te}return V}s.isBN=function(R){return R instanceof s||null!==R&&"object"==typeof R&&R.constructor.wordSize===s.wordSize&&Array.isArray(R.words)},s.max=function(R,j){return R.cmp(j)>0?R:j},s.min=function(R,j){return R.cmp(j)<0?R:j},s.prototype._init=function(R,j,Y){if("number"==typeof R)return this._initNumber(R,j,Y);if("object"==typeof R)return this._initArray(R,j,Y);"hex"===j&&(j=16),n(j===(0|j)&&j>=2&&j<=36);var B=0;"-"===(R=R.toString().replace(/\s+/g,""))[0]&&(B++,this.negative=1),B<R.length&&(16===j?this._parseHex(R,B,Y):(this._parseBase(R,j,B),"le"===Y&&this._initArray(this.toArray(),j,Y)))},s.prototype._initNumber=function(R,j,Y){R<0&&(this.negative=1,R=-R),R<67108864?(this.words=[67108863&R],this.length=1):R<4503599627370496?(this.words=[67108863&R,R/67108864&67108863],this.length=2):(n(R<9007199254740992),this.words=[67108863&R,R/67108864&67108863,1],this.length=3),"le"===Y&&this._initArray(this.toArray(),j,Y)},s.prototype._initArray=function(R,j,Y){if(n("number"==typeof R.length),R.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(R.length/3),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var V,q,ie=0;if("be"===Y)for(B=R.length-1,V=0;B>=0;B-=3)this.words[V]|=(q=R[B]|R[B-1]<<8|R[B-2]<<16)<<ie&67108863,this.words[V+1]=q>>>26-ie&67108863,(ie+=24)>=26&&(ie-=26,V++);else if("le"===Y)for(B=0,V=0;B<R.length;B+=3)this.words[V]|=(q=R[B]|R[B+1]<<8|R[B+2]<<16)<<ie&67108863,this.words[V+1]=q>>>26-ie&67108863,(ie+=24)>=26&&(ie-=26,V++);return this.strip()},s.prototype._parseHex=function(R,j,Y){this.length=Math.ceil((R.length-j)/6),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var V,q=0,ie=0;if("be"===Y)for(B=R.length-1;B>=j;B-=2)V=c(R,j,B)<<q,this.words[ie]|=67108863&V,q>=18?(q-=18,this.words[ie+=1]|=V>>>26):q+=8;else for(B=(R.length-j)%2==0?j+1:j;B<R.length;B+=2)V=c(R,j,B)<<q,this.words[ie]|=67108863&V,q>=18?(q-=18,this.words[ie+=1]|=V>>>26):q+=8;this.strip()},s.prototype._parseBase=function(R,j,Y){this.words=[0],this.length=1;for(var B=0,V=1;V<=67108863;V*=j)B++;B--,V=V/j|0;for(var q=R.length-Y,ie=q%B,te=Math.min(q,q-ie)+Y,ee=0,$=Y;$<te;$+=B)ee=y(R,$,$+B,j),this.imuln(V),this.words[0]+ee<67108864?this.words[0]+=ee:this._iaddn(ee);if(0!==ie){var J=1;for(ee=y(R,$,R.length,j),$=0;$<ie;$++)J*=j;this.imuln(J),this.words[0]+ee<67108864?this.words[0]+=ee:this._iaddn(ee)}this.strip()},s.prototype.copy=function(R){R.words=new Array(this.length);for(var j=0;j<this.length;j++)R.words[j]=this.words[j];R.length=this.length,R.negative=this.negative,R.red=this.red},s.prototype.clone=function(){var R=new s(null);return this.copy(R),R},s.prototype._expand=function(R){for(;this.length<R;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],m=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],g=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function x(R,j,Y){Y.negative=j.negative^R.negative;var B=R.length+j.length|0;Y.length=B,B=B-1|0;var V=0|R.words[0],q=0|j.words[0],ie=V*q,ee=ie/67108864|0;Y.words[0]=67108863&ie;for(var $=1;$<B;$++){for(var J=ee>>>26,X=67108863&ee,ae=Math.min($,j.length-1),ce=Math.max(0,$-R.length+1);ce<=ae;ce++)J+=(ie=(V=0|R.words[$-ce|0])*(q=0|j.words[ce])+X)/67108864|0,X=67108863&ie;Y.words[$]=0|X,ee=0|J}return 0!==ee?Y.words[$]=0|ee:Y.length--,Y.strip()}s.prototype.toString=function(R,j){var Y;if(j=0|j||1,16===(R=R||10)||"hex"===R){Y="";for(var B=0,V=0,q=0;q<this.length;q++){var ie=this.words[q],te=(16777215&(ie<<B|V)).toString(16);Y=0!=(V=ie>>>24-B&16777215)||q!==this.length-1?d[6-te.length]+te+Y:te+Y,(B+=2)>=26&&(B-=26,q--)}for(0!==V&&(Y=V.toString(16)+Y);Y.length%j!=0;)Y="0"+Y;return 0!==this.negative&&(Y="-"+Y),Y}if(R===(0|R)&&R>=2&&R<=36){var ee=m[R],$=g[R];Y="";var J=this.clone();for(J.negative=0;!J.isZero();){var X=J.modn($).toString(R);Y=(J=J.idivn($)).isZero()?X+Y:d[ee-X.length]+X+Y}for(this.isZero()&&(Y="0"+Y);Y.length%j!=0;)Y="0"+Y;return 0!==this.negative&&(Y="-"+Y),Y}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var R=this.words[0];return 2===this.length?R+=67108864*this.words[1]:3===this.length&&1===this.words[2]?R+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-R:R},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(R,j){return n(void 0!==u),this.toArrayLike(u,R,j)},s.prototype.toArray=function(R,j){return this.toArrayLike(Array,R,j)},s.prototype.toArrayLike=function(R,j,Y){var B=this.byteLength(),V=Y||Math.max(1,B);n(B<=V,"byte array longer than desired length"),n(V>0,"Requested array length <= 0"),this.strip();var q,ie,te="le"===j,ee=new R(V),$=this.clone();if(te){for(ie=0;!$.isZero();ie++)q=$.andln(255),$.iushrn(8),ee[ie]=q;for(;ie<V;ie++)ee[ie]=0}else{for(ie=0;ie<V-B;ie++)ee[ie]=0;for(ie=0;!$.isZero();ie++)q=$.andln(255),$.iushrn(8),ee[V-ie-1]=q}return ee},s.prototype._countBits=Math.clz32?function(R){return 32-Math.clz32(R)}:function(R){var j=R,Y=0;return j>=4096&&(Y+=13,j>>>=13),j>=64&&(Y+=7,j>>>=7),j>=8&&(Y+=4,j>>>=4),j>=2&&(Y+=2,j>>>=2),Y+j},s.prototype._zeroBits=function(R){if(0===R)return 26;var j=R,Y=0;return!(8191&j)&&(Y+=13,j>>>=13),!(127&j)&&(Y+=7,j>>>=7),!(15&j)&&(Y+=4,j>>>=4),!(3&j)&&(Y+=2,j>>>=2),!(1&j)&&Y++,Y},s.prototype.bitLength=function(){var j=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+j},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var R=0,j=0;j<this.length;j++){var Y=this._zeroBits(this.words[j]);if(R+=Y,26!==Y)break}return R},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(R){return 0!==this.negative?this.abs().inotn(R).iaddn(1):this.clone()},s.prototype.fromTwos=function(R){return this.testn(R-1)?this.notn(R).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(R){for(;this.length<R.length;)this.words[this.length++]=0;for(var j=0;j<R.length;j++)this.words[j]=this.words[j]|R.words[j];return this.strip()},s.prototype.ior=function(R){return n(0==(this.negative|R.negative)),this.iuor(R)},s.prototype.or=function(R){return this.length>R.length?this.clone().ior(R):R.clone().ior(this)},s.prototype.uor=function(R){return this.length>R.length?this.clone().iuor(R):R.clone().iuor(this)},s.prototype.iuand=function(R){var j;j=this.length>R.length?R:this;for(var Y=0;Y<j.length;Y++)this.words[Y]=this.words[Y]&R.words[Y];return this.length=j.length,this.strip()},s.prototype.iand=function(R){return n(0==(this.negative|R.negative)),this.iuand(R)},s.prototype.and=function(R){return this.length>R.length?this.clone().iand(R):R.clone().iand(this)},s.prototype.uand=function(R){return this.length>R.length?this.clone().iuand(R):R.clone().iuand(this)},s.prototype.iuxor=function(R){var j,Y;this.length>R.length?(j=this,Y=R):(j=R,Y=this);for(var B=0;B<Y.length;B++)this.words[B]=j.words[B]^Y.words[B];if(this!==j)for(;B<j.length;B++)this.words[B]=j.words[B];return this.length=j.length,this.strip()},s.prototype.ixor=function(R){return n(0==(this.negative|R.negative)),this.iuxor(R)},s.prototype.xor=function(R){return this.length>R.length?this.clone().ixor(R):R.clone().ixor(this)},s.prototype.uxor=function(R){return this.length>R.length?this.clone().iuxor(R):R.clone().iuxor(this)},s.prototype.inotn=function(R){n("number"==typeof R&&R>=0);var j=0|Math.ceil(R/26),Y=R%26;this._expand(j),Y>0&&j--;for(var B=0;B<j;B++)this.words[B]=67108863&~this.words[B];return Y>0&&(this.words[B]=~this.words[B]&67108863>>26-Y),this.strip()},s.prototype.notn=function(R){return this.clone().inotn(R)},s.prototype.setn=function(R,j){n("number"==typeof R&&R>=0);var Y=R/26|0,B=R%26;return this._expand(Y+1),this.words[Y]=j?this.words[Y]|1<<B:this.words[Y]&~(1<<B),this.strip()},s.prototype.iadd=function(R){var j,Y,B;if(0!==this.negative&&0===R.negative)return this.negative=0,j=this.isub(R),this.negative^=1,this._normSign();if(0===this.negative&&0!==R.negative)return R.negative=0,j=this.isub(R),R.negative=1,j._normSign();this.length>R.length?(Y=this,B=R):(Y=R,B=this);for(var V=0,q=0;q<B.length;q++)this.words[q]=67108863&(j=(0|Y.words[q])+(0|B.words[q])+V),V=j>>>26;for(;0!==V&&q<Y.length;q++)this.words[q]=67108863&(j=(0|Y.words[q])+V),V=j>>>26;if(this.length=Y.length,0!==V)this.words[this.length]=V,this.length++;else if(Y!==this)for(;q<Y.length;q++)this.words[q]=Y.words[q];return this},s.prototype.add=function(R){var j;return 0!==R.negative&&0===this.negative?(R.negative=0,j=this.sub(R),R.negative^=1,j):0===R.negative&&0!==this.negative?(this.negative=0,j=R.sub(this),this.negative=1,j):this.length>R.length?this.clone().iadd(R):R.clone().iadd(this)},s.prototype.isub=function(R){if(0!==R.negative){R.negative=0;var j=this.iadd(R);return R.negative=1,j._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(R),this.negative=1,this._normSign();var Y,B,V=this.cmp(R);if(0===V)return this.negative=0,this.length=1,this.words[0]=0,this;V>0?(Y=this,B=R):(Y=R,B=this);for(var q=0,ie=0;ie<B.length;ie++)q=(j=(0|Y.words[ie])-(0|B.words[ie])+q)>>26,this.words[ie]=67108863&j;for(;0!==q&&ie<Y.length;ie++)q=(j=(0|Y.words[ie])+q)>>26,this.words[ie]=67108863&j;if(0===q&&ie<Y.length&&Y!==this)for(;ie<Y.length;ie++)this.words[ie]=Y.words[ie];return this.length=Math.max(this.length,ie),Y!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(R){return this.clone().isub(R)};var v=function(R,j,Y){var B,V,q,ie=R.words,te=j.words,ee=Y.words,$=0,J=0|ie[0],X=8191&J,ae=J>>>13,ce=0|ie[1],le=8191&ce,pe=ce>>>13,we=0|ie[2],Te=8191&we,ye=we>>>13,ve=0|ie[3],xe=8191&ve,Ce=ve>>>13,Oe=0|ie[4],be=8191&Oe,ue=Oe>>>13,se=0|ie[5],ge=8191&se,Ie=se>>>13,ke=0|ie[6],Se=8191&ke,Pe=ke>>>13,Fe=0|ie[7],Be=8191&Fe,me=Fe>>>13,Me=0|ie[8],Le=8191&Me,Ne=Me>>>13,Re=0|ie[9],He=8191&Re,Ze=Re>>>13,nt=0|te[0],ft=8191&nt,ht=nt>>>13,Tt=0|te[1],At=8191&Tt,_t=Tt>>>13,ot=0|te[2],it=8191&ot,Pt=ot>>>13,jt=0|te[3],Ut=8191&jt,Rt=jt>>>13,Je=0|te[4],et=8191&Je,qe=Je>>>13,$e=0|te[5],pt=8191&$e,ct=$e>>>13,Ve=0|te[6],Ge=8191&Ve,ut=Ve>>>13,Qe=0|te[7],yt=8191&Qe,wt=Qe>>>13,kt=0|te[8],vt=8191&kt,Lt=kt>>>13,St=0|te[9],Ot=8191&St,Nt=St>>>13;Y.negative=R.negative^j.negative,Y.length=19;var Bt=($+(B=Math.imul(X,ft))|0)+((8191&(V=(V=Math.imul(X,ht))+Math.imul(ae,ft)|0))<<13)|0;$=((q=Math.imul(ae,ht))+(V>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,B=Math.imul(le,ft),V=(V=Math.imul(le,ht))+Math.imul(pe,ft)|0,q=Math.imul(pe,ht);var Vt=($+(B=B+Math.imul(X,At)|0)|0)+((8191&(V=(V=V+Math.imul(X,_t)|0)+Math.imul(ae,At)|0))<<13)|0;$=((q=q+Math.imul(ae,_t)|0)+(V>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,B=Math.imul(Te,ft),V=(V=Math.imul(Te,ht))+Math.imul(ye,ft)|0,q=Math.imul(ye,ht),B=B+Math.imul(le,At)|0,V=(V=V+Math.imul(le,_t)|0)+Math.imul(pe,At)|0,q=q+Math.imul(pe,_t)|0;var nn=($+(B=B+Math.imul(X,it)|0)|0)+((8191&(V=(V=V+Math.imul(X,Pt)|0)+Math.imul(ae,it)|0))<<13)|0;$=((q=q+Math.imul(ae,Pt)|0)+(V>>>13)|0)+(nn>>>26)|0,nn&=67108863,B=Math.imul(xe,ft),V=(V=Math.imul(xe,ht))+Math.imul(Ce,ft)|0,q=Math.imul(Ce,ht),B=B+Math.imul(Te,At)|0,V=(V=V+Math.imul(Te,_t)|0)+Math.imul(ye,At)|0,q=q+Math.imul(ye,_t)|0,B=B+Math.imul(le,it)|0,V=(V=V+Math.imul(le,Pt)|0)+Math.imul(pe,it)|0,q=q+Math.imul(pe,Pt)|0;var gn=($+(B=B+Math.imul(X,Ut)|0)|0)+((8191&(V=(V=V+Math.imul(X,Rt)|0)+Math.imul(ae,Ut)|0))<<13)|0;$=((q=q+Math.imul(ae,Rt)|0)+(V>>>13)|0)+(gn>>>26)|0,gn&=67108863,B=Math.imul(be,ft),V=(V=Math.imul(be,ht))+Math.imul(ue,ft)|0,q=Math.imul(ue,ht),B=B+Math.imul(xe,At)|0,V=(V=V+Math.imul(xe,_t)|0)+Math.imul(Ce,At)|0,q=q+Math.imul(Ce,_t)|0,B=B+Math.imul(Te,it)|0,V=(V=V+Math.imul(Te,Pt)|0)+Math.imul(ye,it)|0,q=q+Math.imul(ye,Pt)|0,B=B+Math.imul(le,Ut)|0,V=(V=V+Math.imul(le,Rt)|0)+Math.imul(pe,Ut)|0,q=q+Math.imul(pe,Rt)|0;var Jt=($+(B=B+Math.imul(X,et)|0)|0)+((8191&(V=(V=V+Math.imul(X,qe)|0)+Math.imul(ae,et)|0))<<13)|0;$=((q=q+Math.imul(ae,qe)|0)+(V>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,B=Math.imul(ge,ft),V=(V=Math.imul(ge,ht))+Math.imul(Ie,ft)|0,q=Math.imul(Ie,ht),B=B+Math.imul(be,At)|0,V=(V=V+Math.imul(be,_t)|0)+Math.imul(ue,At)|0,q=q+Math.imul(ue,_t)|0,B=B+Math.imul(xe,it)|0,V=(V=V+Math.imul(xe,Pt)|0)+Math.imul(Ce,it)|0,q=q+Math.imul(Ce,Pt)|0,B=B+Math.imul(Te,Ut)|0,V=(V=V+Math.imul(Te,Rt)|0)+Math.imul(ye,Ut)|0,q=q+Math.imul(ye,Rt)|0,B=B+Math.imul(le,et)|0,V=(V=V+Math.imul(le,qe)|0)+Math.imul(pe,et)|0,q=q+Math.imul(pe,qe)|0;var an=($+(B=B+Math.imul(X,pt)|0)|0)+((8191&(V=(V=V+Math.imul(X,ct)|0)+Math.imul(ae,pt)|0))<<13)|0;$=((q=q+Math.imul(ae,ct)|0)+(V>>>13)|0)+(an>>>26)|0,an&=67108863,B=Math.imul(Se,ft),V=(V=Math.imul(Se,ht))+Math.imul(Pe,ft)|0,q=Math.imul(Pe,ht),B=B+Math.imul(ge,At)|0,V=(V=V+Math.imul(ge,_t)|0)+Math.imul(Ie,At)|0,q=q+Math.imul(Ie,_t)|0,B=B+Math.imul(be,it)|0,V=(V=V+Math.imul(be,Pt)|0)+Math.imul(ue,it)|0,q=q+Math.imul(ue,Pt)|0,B=B+Math.imul(xe,Ut)|0,V=(V=V+Math.imul(xe,Rt)|0)+Math.imul(Ce,Ut)|0,q=q+Math.imul(Ce,Rt)|0,B=B+Math.imul(Te,et)|0,V=(V=V+Math.imul(Te,qe)|0)+Math.imul(ye,et)|0,q=q+Math.imul(ye,qe)|0,B=B+Math.imul(le,pt)|0,V=(V=V+Math.imul(le,ct)|0)+Math.imul(pe,pt)|0,q=q+Math.imul(pe,ct)|0;var Xt=($+(B=B+Math.imul(X,Ge)|0)|0)+((8191&(V=(V=V+Math.imul(X,ut)|0)+Math.imul(ae,Ge)|0))<<13)|0;$=((q=q+Math.imul(ae,ut)|0)+(V>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,B=Math.imul(Be,ft),V=(V=Math.imul(Be,ht))+Math.imul(me,ft)|0,q=Math.imul(me,ht),B=B+Math.imul(Se,At)|0,V=(V=V+Math.imul(Se,_t)|0)+Math.imul(Pe,At)|0,q=q+Math.imul(Pe,_t)|0,B=B+Math.imul(ge,it)|0,V=(V=V+Math.imul(ge,Pt)|0)+Math.imul(Ie,it)|0,q=q+Math.imul(Ie,Pt)|0,B=B+Math.imul(be,Ut)|0,V=(V=V+Math.imul(be,Rt)|0)+Math.imul(ue,Ut)|0,q=q+Math.imul(ue,Rt)|0,B=B+Math.imul(xe,et)|0,V=(V=V+Math.imul(xe,qe)|0)+Math.imul(Ce,et)|0,q=q+Math.imul(Ce,qe)|0,B=B+Math.imul(Te,pt)|0,V=(V=V+Math.imul(Te,ct)|0)+Math.imul(ye,pt)|0,q=q+Math.imul(ye,ct)|0,B=B+Math.imul(le,Ge)|0,V=(V=V+Math.imul(le,ut)|0)+Math.imul(pe,Ge)|0,q=q+Math.imul(pe,ut)|0;var Gn=($+(B=B+Math.imul(X,yt)|0)|0)+((8191&(V=(V=V+Math.imul(X,wt)|0)+Math.imul(ae,yt)|0))<<13)|0;$=((q=q+Math.imul(ae,wt)|0)+(V>>>13)|0)+(Gn>>>26)|0,Gn&=67108863,B=Math.imul(Le,ft),V=(V=Math.imul(Le,ht))+Math.imul(Ne,ft)|0,q=Math.imul(Ne,ht),B=B+Math.imul(Be,At)|0,V=(V=V+Math.imul(Be,_t)|0)+Math.imul(me,At)|0,q=q+Math.imul(me,_t)|0,B=B+Math.imul(Se,it)|0,V=(V=V+Math.imul(Se,Pt)|0)+Math.imul(Pe,it)|0,q=q+Math.imul(Pe,Pt)|0,B=B+Math.imul(ge,Ut)|0,V=(V=V+Math.imul(ge,Rt)|0)+Math.imul(Ie,Ut)|0,q=q+Math.imul(Ie,Rt)|0,B=B+Math.imul(be,et)|0,V=(V=V+Math.imul(be,qe)|0)+Math.imul(ue,et)|0,q=q+Math.imul(ue,qe)|0,B=B+Math.imul(xe,pt)|0,V=(V=V+Math.imul(xe,ct)|0)+Math.imul(Ce,pt)|0,q=q+Math.imul(Ce,ct)|0,B=B+Math.imul(Te,Ge)|0,V=(V=V+Math.imul(Te,ut)|0)+Math.imul(ye,Ge)|0,q=q+Math.imul(ye,ut)|0,B=B+Math.imul(le,yt)|0,V=(V=V+Math.imul(le,wt)|0)+Math.imul(pe,yt)|0,q=q+Math.imul(pe,wt)|0;var Dn=($+(B=B+Math.imul(X,vt)|0)|0)+((8191&(V=(V=V+Math.imul(X,Lt)|0)+Math.imul(ae,vt)|0))<<13)|0;$=((q=q+Math.imul(ae,Lt)|0)+(V>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,B=Math.imul(He,ft),V=(V=Math.imul(He,ht))+Math.imul(Ze,ft)|0,q=Math.imul(Ze,ht),B=B+Math.imul(Le,At)|0,V=(V=V+Math.imul(Le,_t)|0)+Math.imul(Ne,At)|0,q=q+Math.imul(Ne,_t)|0,B=B+Math.imul(Be,it)|0,V=(V=V+Math.imul(Be,Pt)|0)+Math.imul(me,it)|0,q=q+Math.imul(me,Pt)|0,B=B+Math.imul(Se,Ut)|0,V=(V=V+Math.imul(Se,Rt)|0)+Math.imul(Pe,Ut)|0,q=q+Math.imul(Pe,Rt)|0,B=B+Math.imul(ge,et)|0,V=(V=V+Math.imul(ge,qe)|0)+Math.imul(Ie,et)|0,q=q+Math.imul(Ie,qe)|0,B=B+Math.imul(be,pt)|0,V=(V=V+Math.imul(be,ct)|0)+Math.imul(ue,pt)|0,q=q+Math.imul(ue,ct)|0,B=B+Math.imul(xe,Ge)|0,V=(V=V+Math.imul(xe,ut)|0)+Math.imul(Ce,Ge)|0,q=q+Math.imul(Ce,ut)|0,B=B+Math.imul(Te,yt)|0,V=(V=V+Math.imul(Te,wt)|0)+Math.imul(ye,yt)|0,q=q+Math.imul(ye,wt)|0,B=B+Math.imul(le,vt)|0,V=(V=V+Math.imul(le,Lt)|0)+Math.imul(pe,vt)|0,q=q+Math.imul(pe,Lt)|0;var An=($+(B=B+Math.imul(X,Ot)|0)|0)+((8191&(V=(V=V+Math.imul(X,Nt)|0)+Math.imul(ae,Ot)|0))<<13)|0;$=((q=q+Math.imul(ae,Nt)|0)+(V>>>13)|0)+(An>>>26)|0,An&=67108863,B=Math.imul(He,At),V=(V=Math.imul(He,_t))+Math.imul(Ze,At)|0,q=Math.imul(Ze,_t),B=B+Math.imul(Le,it)|0,V=(V=V+Math.imul(Le,Pt)|0)+Math.imul(Ne,it)|0,q=q+Math.imul(Ne,Pt)|0,B=B+Math.imul(Be,Ut)|0,V=(V=V+Math.imul(Be,Rt)|0)+Math.imul(me,Ut)|0,q=q+Math.imul(me,Rt)|0,B=B+Math.imul(Se,et)|0,V=(V=V+Math.imul(Se,qe)|0)+Math.imul(Pe,et)|0,q=q+Math.imul(Pe,qe)|0,B=B+Math.imul(ge,pt)|0,V=(V=V+Math.imul(ge,ct)|0)+Math.imul(Ie,pt)|0,q=q+Math.imul(Ie,ct)|0,B=B+Math.imul(be,Ge)|0,V=(V=V+Math.imul(be,ut)|0)+Math.imul(ue,Ge)|0,q=q+Math.imul(ue,ut)|0,B=B+Math.imul(xe,yt)|0,V=(V=V+Math.imul(xe,wt)|0)+Math.imul(Ce,yt)|0,q=q+Math.imul(Ce,wt)|0,B=B+Math.imul(Te,vt)|0,V=(V=V+Math.imul(Te,Lt)|0)+Math.imul(ye,vt)|0,q=q+Math.imul(ye,Lt)|0;var cn=($+(B=B+Math.imul(le,Ot)|0)|0)+((8191&(V=(V=V+Math.imul(le,Nt)|0)+Math.imul(pe,Ot)|0))<<13)|0;$=((q=q+Math.imul(pe,Nt)|0)+(V>>>13)|0)+(cn>>>26)|0,cn&=67108863,B=Math.imul(He,it),V=(V=Math.imul(He,Pt))+Math.imul(Ze,it)|0,q=Math.imul(Ze,Pt),B=B+Math.imul(Le,Ut)|0,V=(V=V+Math.imul(Le,Rt)|0)+Math.imul(Ne,Ut)|0,q=q+Math.imul(Ne,Rt)|0,B=B+Math.imul(Be,et)|0,V=(V=V+Math.imul(Be,qe)|0)+Math.imul(me,et)|0,q=q+Math.imul(me,qe)|0,B=B+Math.imul(Se,pt)|0,V=(V=V+Math.imul(Se,ct)|0)+Math.imul(Pe,pt)|0,q=q+Math.imul(Pe,ct)|0,B=B+Math.imul(ge,Ge)|0,V=(V=V+Math.imul(ge,ut)|0)+Math.imul(Ie,Ge)|0,q=q+Math.imul(Ie,ut)|0,B=B+Math.imul(be,yt)|0,V=(V=V+Math.imul(be,wt)|0)+Math.imul(ue,yt)|0,q=q+Math.imul(ue,wt)|0,B=B+Math.imul(xe,vt)|0,V=(V=V+Math.imul(xe,Lt)|0)+Math.imul(Ce,vt)|0,q=q+Math.imul(Ce,Lt)|0;var bn=($+(B=B+Math.imul(Te,Ot)|0)|0)+((8191&(V=(V=V+Math.imul(Te,Nt)|0)+Math.imul(ye,Ot)|0))<<13)|0;$=((q=q+Math.imul(ye,Nt)|0)+(V>>>13)|0)+(bn>>>26)|0,bn&=67108863,B=Math.imul(He,Ut),V=(V=Math.imul(He,Rt))+Math.imul(Ze,Ut)|0,q=Math.imul(Ze,Rt),B=B+Math.imul(Le,et)|0,V=(V=V+Math.imul(Le,qe)|0)+Math.imul(Ne,et)|0,q=q+Math.imul(Ne,qe)|0,B=B+Math.imul(Be,pt)|0,V=(V=V+Math.imul(Be,ct)|0)+Math.imul(me,pt)|0,q=q+Math.imul(me,ct)|0,B=B+Math.imul(Se,Ge)|0,V=(V=V+Math.imul(Se,ut)|0)+Math.imul(Pe,Ge)|0,q=q+Math.imul(Pe,ut)|0,B=B+Math.imul(ge,yt)|0,V=(V=V+Math.imul(ge,wt)|0)+Math.imul(Ie,yt)|0,q=q+Math.imul(Ie,wt)|0,B=B+Math.imul(be,vt)|0,V=(V=V+Math.imul(be,Lt)|0)+Math.imul(ue,vt)|0,q=q+Math.imul(ue,Lt)|0;var hn=($+(B=B+Math.imul(xe,Ot)|0)|0)+((8191&(V=(V=V+Math.imul(xe,Nt)|0)+Math.imul(Ce,Ot)|0))<<13)|0;$=((q=q+Math.imul(Ce,Nt)|0)+(V>>>13)|0)+(hn>>>26)|0,hn&=67108863,B=Math.imul(He,et),V=(V=Math.imul(He,qe))+Math.imul(Ze,et)|0,q=Math.imul(Ze,qe),B=B+Math.imul(Le,pt)|0,V=(V=V+Math.imul(Le,ct)|0)+Math.imul(Ne,pt)|0,q=q+Math.imul(Ne,ct)|0,B=B+Math.imul(Be,Ge)|0,V=(V=V+Math.imul(Be,ut)|0)+Math.imul(me,Ge)|0,q=q+Math.imul(me,ut)|0,B=B+Math.imul(Se,yt)|0,V=(V=V+Math.imul(Se,wt)|0)+Math.imul(Pe,yt)|0,q=q+Math.imul(Pe,wt)|0,B=B+Math.imul(ge,vt)|0,V=(V=V+Math.imul(ge,Lt)|0)+Math.imul(Ie,vt)|0,q=q+Math.imul(Ie,Lt)|0;var wn=($+(B=B+Math.imul(be,Ot)|0)|0)+((8191&(V=(V=V+Math.imul(be,Nt)|0)+Math.imul(ue,Ot)|0))<<13)|0;$=((q=q+Math.imul(ue,Nt)|0)+(V>>>13)|0)+(wn>>>26)|0,wn&=67108863,B=Math.imul(He,pt),V=(V=Math.imul(He,ct))+Math.imul(Ze,pt)|0,q=Math.imul(Ze,ct),B=B+Math.imul(Le,Ge)|0,V=(V=V+Math.imul(Le,ut)|0)+Math.imul(Ne,Ge)|0,q=q+Math.imul(Ne,ut)|0,B=B+Math.imul(Be,yt)|0,V=(V=V+Math.imul(Be,wt)|0)+Math.imul(me,yt)|0,q=q+Math.imul(me,wt)|0,B=B+Math.imul(Se,vt)|0,V=(V=V+Math.imul(Se,Lt)|0)+Math.imul(Pe,vt)|0,q=q+Math.imul(Pe,Lt)|0;var Ln=($+(B=B+Math.imul(ge,Ot)|0)|0)+((8191&(V=(V=V+Math.imul(ge,Nt)|0)+Math.imul(Ie,Ot)|0))<<13)|0;$=((q=q+Math.imul(Ie,Nt)|0)+(V>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,B=Math.imul(He,Ge),V=(V=Math.imul(He,ut))+Math.imul(Ze,Ge)|0,q=Math.imul(Ze,ut),B=B+Math.imul(Le,yt)|0,V=(V=V+Math.imul(Le,wt)|0)+Math.imul(Ne,yt)|0,q=q+Math.imul(Ne,wt)|0,B=B+Math.imul(Be,vt)|0,V=(V=V+Math.imul(Be,Lt)|0)+Math.imul(me,vt)|0,q=q+Math.imul(me,Lt)|0;var Pn=($+(B=B+Math.imul(Se,Ot)|0)|0)+((8191&(V=(V=V+Math.imul(Se,Nt)|0)+Math.imul(Pe,Ot)|0))<<13)|0;$=((q=q+Math.imul(Pe,Nt)|0)+(V>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,B=Math.imul(He,yt),V=(V=Math.imul(He,wt))+Math.imul(Ze,yt)|0,q=Math.imul(Ze,wt),B=B+Math.imul(Le,vt)|0,V=(V=V+Math.imul(Le,Lt)|0)+Math.imul(Ne,vt)|0,q=q+Math.imul(Ne,Lt)|0;var Nn=($+(B=B+Math.imul(Be,Ot)|0)|0)+((8191&(V=(V=V+Math.imul(Be,Nt)|0)+Math.imul(me,Ot)|0))<<13)|0;$=((q=q+Math.imul(me,Nt)|0)+(V>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,B=Math.imul(He,vt),V=(V=Math.imul(He,Lt))+Math.imul(Ze,vt)|0,q=Math.imul(Ze,Lt);var jn=($+(B=B+Math.imul(Le,Ot)|0)|0)+((8191&(V=(V=V+Math.imul(Le,Nt)|0)+Math.imul(Ne,Ot)|0))<<13)|0;$=((q=q+Math.imul(Ne,Nt)|0)+(V>>>13)|0)+(jn>>>26)|0,jn&=67108863;var Fn=($+(B=Math.imul(He,Ot))|0)+((8191&(V=(V=Math.imul(He,Nt))+Math.imul(Ze,Ot)|0))<<13)|0;return $=((q=Math.imul(Ze,Nt))+(V>>>13)|0)+(Fn>>>26)|0,Fn&=67108863,ee[0]=Bt,ee[1]=Vt,ee[2]=nn,ee[3]=gn,ee[4]=Jt,ee[5]=an,ee[6]=Xt,ee[7]=Gn,ee[8]=Dn,ee[9]=An,ee[10]=cn,ee[11]=bn,ee[12]=hn,ee[13]=wn,ee[14]=Ln,ee[15]=Pn,ee[16]=Nn,ee[17]=jn,ee[18]=Fn,0!==$&&(ee[19]=$,Y.length++),Y};function b(R,j,Y){return(new h).mulp(R,j,Y)}function h(R,j){this.x=R,this.y=j}Math.imul||(v=x),s.prototype.mulTo=function(R,j){var B=this.length+R.length;return 10===this.length&&10===R.length?v(this,R,j):B<63?x(this,R,j):B<1024?function(V,q,ie){ie.negative=q.negative^V.negative,ie.length=V.length+q.length;for(var te=0,ee=0,$=0;$<ie.length-1;$++){var J=ee;ee=0;for(var X=67108863&te,ae=Math.min($,q.length-1),ce=Math.max(0,$-V.length+1);ce<=ae;ce++){var pe=(0|V.words[$-ce])*(0|q.words[ce]),we=67108863&pe;X=67108863&(we=we+X|0),ee+=(J=(J=J+(pe/67108864|0)|0)+(we>>>26)|0)>>>26,J&=67108863}ie.words[$]=X,te=J,J=ee}return 0!==te?ie.words[$]=te:ie.length--,ie.strip()}(this,R,j):b(this,R,j)},h.prototype.makeRBT=function(R){for(var j=new Array(R),Y=s.prototype._countBits(R)-1,B=0;B<R;B++)j[B]=this.revBin(B,Y,R);return j},h.prototype.revBin=function(R,j,Y){if(0===R||R===Y-1)return R;for(var B=0,V=0;V<j;V++)B|=(1&R)<<j-V-1,R>>=1;return B},h.prototype.permute=function(R,j,Y,B,V,q){for(var ie=0;ie<q;ie++)B[ie]=j[R[ie]],V[ie]=Y[R[ie]]},h.prototype.transform=function(R,j,Y,B,V,q){this.permute(q,R,j,Y,B,V);for(var ie=1;ie<V;ie<<=1)for(var te=ie<<1,ee=Math.cos(2*Math.PI/te),$=Math.sin(2*Math.PI/te),J=0;J<V;J+=te)for(var X=ee,ae=$,ce=0;ce<ie;ce++){var le=Y[J+ce],pe=B[J+ce],we=Y[J+ce+ie],Te=B[J+ce+ie],ye=X*we-ae*Te;Te=X*Te+ae*we,Y[J+ce]=le+(we=ye),B[J+ce]=pe+Te,Y[J+ce+ie]=le-we,B[J+ce+ie]=pe-Te,ce!==te&&(ye=ee*X-$*ae,ae=ee*ae+$*X,X=ye)}},h.prototype.guessLen13b=function(R,j){var Y=1|Math.max(j,R),B=1&Y,V=0;for(Y=Y/2|0;Y;Y>>>=1)V++;return 1<<V+1+B},h.prototype.conjugate=function(R,j,Y){if(!(Y<=1))for(var B=0;B<Y/2;B++){var V=R[B];R[B]=R[Y-B-1],R[Y-B-1]=V,V=j[B],j[B]=-j[Y-B-1],j[Y-B-1]=-V}},h.prototype.normalize13b=function(R,j){for(var Y=0,B=0;B<j/2;B++){var V=8192*Math.round(R[2*B+1]/j)+Math.round(R[2*B]/j)+Y;R[B]=67108863&V,Y=V<67108864?0:V/67108864|0}return R},h.prototype.convert13b=function(R,j,Y,B){for(var V=0,q=0;q<j;q++)Y[2*q]=8191&(V+=0|R[q]),Y[2*q+1]=8191&(V>>>=13),V>>>=13;for(q=2*j;q<B;++q)Y[q]=0;n(0===V),n(0==(-8192&V))},h.prototype.stub=function(R){for(var j=new Array(R),Y=0;Y<R;Y++)j[Y]=0;return j},h.prototype.mulp=function(R,j,Y){var B=2*this.guessLen13b(R.length,j.length),V=this.makeRBT(B),q=this.stub(B),ie=new Array(B),te=new Array(B),ee=new Array(B),$=new Array(B),J=new Array(B),X=new Array(B),ae=Y.words;ae.length=B,this.convert13b(R.words,R.length,ie,B),this.convert13b(j.words,j.length,$,B),this.transform(ie,q,te,ee,B,V),this.transform($,q,J,X,B,V);for(var ce=0;ce<B;ce++){var le=te[ce]*J[ce]-ee[ce]*X[ce];ee[ce]=te[ce]*X[ce]+ee[ce]*J[ce],te[ce]=le}return this.conjugate(te,ee,B),this.transform(te,ee,ae,q,B,V),this.conjugate(ae,q,B),this.normalize13b(ae,B),Y.negative=R.negative^j.negative,Y.length=R.length+j.length,Y.strip()},s.prototype.mul=function(R){var j=new s(null);return j.words=new Array(this.length+R.length),this.mulTo(R,j)},s.prototype.mulf=function(R){var j=new s(null);return j.words=new Array(this.length+R.length),b(this,R,j)},s.prototype.imul=function(R){return this.clone().mulTo(R,this)},s.prototype.imuln=function(R){n("number"==typeof R),n(R<67108864);for(var j=0,Y=0;Y<this.length;Y++){var B=(0|this.words[Y])*R,V=(67108863&B)+(67108863&j);j>>=26,j+=B/67108864|0,j+=V>>>26,this.words[Y]=67108863&V}return 0!==j&&(this.words[Y]=j,this.length++),this},s.prototype.muln=function(R){return this.clone().imuln(R)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(R){var j=function(q){for(var ie=new Array(q.bitLength()),te=0;te<ie.length;te++){var $=te%26;ie[te]=(q.words[te/26|0]&1<<$)>>>$}return ie}(R);if(0===j.length)return new s(1);for(var Y=this,B=0;B<j.length&&0===j[B];B++,Y=Y.sqr());if(++B<j.length)for(var V=Y.sqr();B<j.length;B++,V=V.sqr())0!==j[B]&&(Y=Y.mul(V));return Y},s.prototype.iushln=function(R){n("number"==typeof R&&R>=0);var j,Y=R%26,B=(R-Y)/26,V=67108863>>>26-Y<<26-Y;if(0!==Y){var q=0;for(j=0;j<this.length;j++){var ie=this.words[j]&V;this.words[j]=(0|this.words[j])-ie<<Y|q,q=ie>>>26-Y}q&&(this.words[j]=q,this.length++)}if(0!==B){for(j=this.length-1;j>=0;j--)this.words[j+B]=this.words[j];for(j=0;j<B;j++)this.words[j]=0;this.length+=B}return this.strip()},s.prototype.ishln=function(R){return n(0===this.negative),this.iushln(R)},s.prototype.iushrn=function(R,j,Y){var B;n("number"==typeof R&&R>=0),B=j?(j-j%26)/26:0;var V=R%26,q=Math.min((R-V)/26,this.length),ie=67108863^67108863>>>V<<V,te=Y;if(B-=q,B=Math.max(0,B),te){for(var ee=0;ee<q;ee++)te.words[ee]=this.words[ee];te.length=q}if(0!==q)if(this.length>q)for(this.length-=q,ee=0;ee<this.length;ee++)this.words[ee]=this.words[ee+q];else this.words[0]=0,this.length=1;var $=0;for(ee=this.length-1;ee>=0&&(0!==$||ee>=B);ee--){var J=0|this.words[ee];this.words[ee]=$<<26-V|J>>>V,$=J&ie}return te&&0!==$&&(te.words[te.length++]=$),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(R,j,Y){return n(0===this.negative),this.iushrn(R,j,Y)},s.prototype.shln=function(R){return this.clone().ishln(R)},s.prototype.ushln=function(R){return this.clone().iushln(R)},s.prototype.shrn=function(R){return this.clone().ishrn(R)},s.prototype.ushrn=function(R){return this.clone().iushrn(R)},s.prototype.testn=function(R){n("number"==typeof R&&R>=0);var j=R%26,Y=(R-j)/26;return!(this.length<=Y||!(this.words[Y]&1<<j))},s.prototype.imaskn=function(R){n("number"==typeof R&&R>=0);var j=R%26,Y=(R-j)/26;return n(0===this.negative,"imaskn works only with positive numbers"),this.length<=Y?this:(0!==j&&Y++,this.length=Math.min(Y,this.length),0!==j&&(this.words[this.length-1]&=67108863^67108863>>>j<<j),this.strip())},s.prototype.maskn=function(R){return this.clone().imaskn(R)},s.prototype.iaddn=function(R){return n("number"==typeof R),n(R<67108864),R<0?this.isubn(-R):0!==this.negative?1===this.length&&(0|this.words[0])<R?(this.words[0]=R-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(R),this.negative=1,this):this._iaddn(R)},s.prototype._iaddn=function(R){this.words[0]+=R;for(var j=0;j<this.length&&this.words[j]>=67108864;j++)this.words[j]-=67108864,j===this.length-1?this.words[j+1]=1:this.words[j+1]++;return this.length=Math.max(this.length,j+1),this},s.prototype.isubn=function(R){if(n("number"==typeof R),n(R<67108864),R<0)return this.iaddn(-R);if(0!==this.negative)return this.negative=0,this.iaddn(R),this.negative=1,this;if(this.words[0]-=R,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var j=0;j<this.length&&this.words[j]<0;j++)this.words[j]+=67108864,this.words[j+1]-=1;return this.strip()},s.prototype.addn=function(R){return this.clone().iaddn(R)},s.prototype.subn=function(R){return this.clone().isubn(R)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(R,j,Y){var B,V;this._expand(R.length+Y);var ie=0;for(B=0;B<R.length;B++){V=(0|this.words[B+Y])+ie;var te=(0|R.words[B])*j;ie=((V-=67108863&te)>>26)-(te/67108864|0),this.words[B+Y]=67108863&V}for(;B<this.length-Y;B++)ie=(V=(0|this.words[B+Y])+ie)>>26,this.words[B+Y]=67108863&V;if(0===ie)return this.strip();for(n(-1===ie),ie=0,B=0;B<this.length;B++)ie=(V=-(0|this.words[B])+ie)>>26,this.words[B]=67108863&V;return this.negative=1,this.strip()},s.prototype._wordDiv=function(R,j){var Y,B=this.clone(),V=R,q=0|V.words[V.length-1];0!=(Y=26-this._countBits(q))&&(V=V.ushln(Y),B.iushln(Y),q=0|V.words[V.length-1]);var ie,te=B.length-V.length;if("mod"!==j){(ie=new s(null)).length=te+1,ie.words=new Array(ie.length);for(var ee=0;ee<ie.length;ee++)ie.words[ee]=0}var $=B.clone()._ishlnsubmul(V,1,te);0===$.negative&&(B=$,ie&&(ie.words[te]=1));for(var J=te-1;J>=0;J--){var X=67108864*(0|B.words[V.length+J])+(0|B.words[V.length+J-1]);for(X=Math.min(X/q|0,67108863),B._ishlnsubmul(V,X,J);0!==B.negative;)X--,B.negative=0,B._ishlnsubmul(V,1,J),B.isZero()||(B.negative^=1);ie&&(ie.words[J]=X)}return ie&&ie.strip(),B.strip(),"div"!==j&&0!==Y&&B.iushrn(Y),{div:ie||null,mod:B}},s.prototype.divmod=function(R,j,Y){return n(!R.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===R.negative?(q=this.neg().divmod(R,j),"mod"!==j&&(B=q.div.neg()),"div"!==j&&(V=q.mod.neg(),Y&&0!==V.negative&&V.iadd(R)),{div:B,mod:V}):0===this.negative&&0!==R.negative?(q=this.divmod(R.neg(),j),"mod"!==j&&(B=q.div.neg()),{div:B,mod:q.mod}):this.negative&R.negative?(q=this.neg().divmod(R.neg(),j),"div"!==j&&(V=q.mod.neg(),Y&&0!==V.negative&&V.isub(R)),{div:q.div,mod:V}):R.length>this.length||this.cmp(R)<0?{div:new s(0),mod:this}:1===R.length?"div"===j?{div:this.divn(R.words[0]),mod:null}:"mod"===j?{div:null,mod:new s(this.modn(R.words[0]))}:{div:this.divn(R.words[0]),mod:new s(this.modn(R.words[0]))}:this._wordDiv(R,j);var B,V,q},s.prototype.div=function(R){return this.divmod(R,"div",!1).div},s.prototype.mod=function(R){return this.divmod(R,"mod",!1).mod},s.prototype.umod=function(R){return this.divmod(R,"mod",!0).mod},s.prototype.divRound=function(R){var j=this.divmod(R);if(j.mod.isZero())return j.div;var Y=0!==j.div.negative?j.mod.isub(R):j.mod,B=R.ushrn(1),V=R.andln(1),q=Y.cmp(B);return q<0||1===V&&0===q?j.div:0!==j.div.negative?j.div.isubn(1):j.div.iaddn(1)},s.prototype.modn=function(R){n(R<=67108863);for(var j=67108864%R,Y=0,B=this.length-1;B>=0;B--)Y=(j*Y+(0|this.words[B]))%R;return Y},s.prototype.idivn=function(R){n(R<=67108863);for(var j=0,Y=this.length-1;Y>=0;Y--){var B=(0|this.words[Y])+67108864*j;this.words[Y]=B/R|0,j=B%R}return this.strip()},s.prototype.divn=function(R){return this.clone().idivn(R)},s.prototype.egcd=function(R){n(0===R.negative),n(!R.isZero());var j=this,Y=R.clone();j=0!==j.negative?j.umod(R):j.clone();for(var B=new s(1),V=new s(0),q=new s(0),ie=new s(1),te=0;j.isEven()&&Y.isEven();)j.iushrn(1),Y.iushrn(1),++te;for(var ee=Y.clone(),$=j.clone();!j.isZero();){for(var J=0,X=1;!(j.words[0]&X)&&J<26;++J,X<<=1);if(J>0)for(j.iushrn(J);J-- >0;)(B.isOdd()||V.isOdd())&&(B.iadd(ee),V.isub($)),B.iushrn(1),V.iushrn(1);for(var ae=0,ce=1;!(Y.words[0]&ce)&&ae<26;++ae,ce<<=1);if(ae>0)for(Y.iushrn(ae);ae-- >0;)(q.isOdd()||ie.isOdd())&&(q.iadd(ee),ie.isub($)),q.iushrn(1),ie.iushrn(1);j.cmp(Y)>=0?(j.isub(Y),B.isub(q),V.isub(ie)):(Y.isub(j),q.isub(B),ie.isub(V))}return{a:q,b:ie,gcd:Y.iushln(te)}},s.prototype._invmp=function(R){n(0===R.negative),n(!R.isZero());var j=this,Y=R.clone();j=0!==j.negative?j.umod(R):j.clone();for(var B,V=new s(1),q=new s(0),ie=Y.clone();j.cmpn(1)>0&&Y.cmpn(1)>0;){for(var te=0,ee=1;!(j.words[0]&ee)&&te<26;++te,ee<<=1);if(te>0)for(j.iushrn(te);te-- >0;)V.isOdd()&&V.iadd(ie),V.iushrn(1);for(var $=0,J=1;!(Y.words[0]&J)&&$<26;++$,J<<=1);if($>0)for(Y.iushrn($);$-- >0;)q.isOdd()&&q.iadd(ie),q.iushrn(1);j.cmp(Y)>=0?(j.isub(Y),V.isub(q)):(Y.isub(j),q.isub(V))}return(B=0===j.cmpn(1)?V:q).cmpn(0)<0&&B.iadd(R),B},s.prototype.gcd=function(R){if(this.isZero())return R.abs();if(R.isZero())return this.abs();var j=this.clone(),Y=R.clone();j.negative=0,Y.negative=0;for(var B=0;j.isEven()&&Y.isEven();B++)j.iushrn(1),Y.iushrn(1);for(;;){for(;j.isEven();)j.iushrn(1);for(;Y.isEven();)Y.iushrn(1);var V=j.cmp(Y);if(V<0){var q=j;j=Y,Y=q}else if(0===V||0===Y.cmpn(1))break;j.isub(Y)}return Y.iushln(B)},s.prototype.invm=function(R){return this.egcd(R).a.umod(R)},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.andln=function(R){return this.words[0]&R},s.prototype.bincn=function(R){n("number"==typeof R);var j=R%26,Y=(R-j)/26,B=1<<j;if(this.length<=Y)return this._expand(Y+1),this.words[Y]|=B,this;for(var V=B,q=Y;0!==V&&q<this.length;q++){var ie=0|this.words[q];V=(ie+=V)>>>26,this.words[q]=ie&=67108863}return 0!==V&&(this.words[q]=V,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(R){var j,Y=R<0;if(0!==this.negative&&!Y)return-1;if(0===this.negative&&Y)return 1;if(this.strip(),this.length>1)j=1;else{Y&&(R=-R),n(R<=67108863,"Number is too big");var B=0|this.words[0];j=B===R?0:B<R?-1:1}return 0!==this.negative?0|-j:j},s.prototype.cmp=function(R){if(0!==this.negative&&0===R.negative)return-1;if(0===this.negative&&0!==R.negative)return 1;var j=this.ucmp(R);return 0!==this.negative?0|-j:j},s.prototype.ucmp=function(R){if(this.length>R.length)return 1;if(this.length<R.length)return-1;for(var j=0,Y=this.length-1;Y>=0;Y--){var B=0|this.words[Y],V=0|R.words[Y];if(B!==V){B<V?j=-1:B>V&&(j=1);break}}return j},s.prototype.gtn=function(R){return 1===this.cmpn(R)},s.prototype.gt=function(R){return 1===this.cmp(R)},s.prototype.gten=function(R){return this.cmpn(R)>=0},s.prototype.gte=function(R){return this.cmp(R)>=0},s.prototype.ltn=function(R){return-1===this.cmpn(R)},s.prototype.lt=function(R){return-1===this.cmp(R)},s.prototype.lten=function(R){return this.cmpn(R)<=0},s.prototype.lte=function(R){return this.cmp(R)<=0},s.prototype.eqn=function(R){return 0===this.cmpn(R)},s.prototype.eq=function(R){return 0===this.cmp(R)},s.red=function(R){return new z(R)},s.prototype.toRed=function(R){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),R.convertTo(this)._forceRed(R)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(R){return this.red=R,this},s.prototype.forceRed=function(R){return n(!this.red,"Already a number in reduction context"),this._forceRed(R)},s.prototype.redAdd=function(R){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,R)},s.prototype.redIAdd=function(R){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,R)},s.prototype.redSub=function(R){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,R)},s.prototype.redISub=function(R){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,R)},s.prototype.redShl=function(R){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,R)},s.prototype.redMul=function(R){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.mul(this,R)},s.prototype.redIMul=function(R){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.imul(this,R)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(R){return n(this.red&&!R.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,R)};var S={k256:null,p224:null,p192:null,p25519:null};function w(R,j){this.name=R,this.p=new s(j,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function P(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function I(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function O(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function z(R){if("string"==typeof R){var j=s._prime(R);this.m=j.p,this.prime=j}else n(R.gtn(1),"modulus must be greater than 1"),this.m=R,this.prime=null}function U(R){z.call(this,R),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var R=new s(null);return R.words=new Array(Math.ceil(this.n/13)),R},w.prototype.ireduce=function(R){var j,Y=R;do{this.split(Y,this.tmp),j=(Y=(Y=this.imulK(Y)).iadd(this.tmp)).bitLength()}while(j>this.n);var B=j<this.n?-1:Y.ucmp(this.p);return 0===B?(Y.words[0]=0,Y.length=1):B>0?Y.isub(this.p):void 0!==Y.strip?Y.strip():Y._strip(),Y},w.prototype.split=function(R,j){R.iushrn(this.n,0,j)},w.prototype.imulK=function(R){return R.imul(this.k)},a(E,w),E.prototype.split=function(R,j){for(var Y=4194303,B=Math.min(R.length,9),V=0;V<B;V++)j.words[V]=R.words[V];if(j.length=B,R.length<=9)return R.words[0]=0,void(R.length=1);var q=R.words[9];for(j.words[j.length++]=q&Y,V=10;V<R.length;V++){var ie=0|R.words[V];R.words[V-10]=(ie&Y)<<4|q>>>22,q=ie}R.words[V-10]=q>>>=22,R.length-=0===q&&R.length>10?10:9},E.prototype.imulK=function(R){R.words[R.length]=0,R.words[R.length+1]=0,R.length+=2;for(var j=0,Y=0;Y<R.length;Y++){var B=0|R.words[Y];R.words[Y]=67108863&(j+=977*B),j=64*B+(j/67108864|0)}return 0===R.words[R.length-1]&&(R.length--,0===R.words[R.length-1]&&R.length--),R},a(P,w),a(I,w),a(O,w),O.prototype.imulK=function(R){for(var j=0,Y=0;Y<R.length;Y++){var B=19*(0|R.words[Y])+j,V=67108863&B;B>>>=26,R.words[Y]=V,j=B}return 0!==j&&(R.words[R.length++]=j),R},s._prime=function(R){if(S[R])return S[R];var j;if("k256"===R)j=new E;else if("p224"===R)j=new P;else if("p192"===R)j=new I;else{if("p25519"!==R)throw new Error("Unknown prime "+R);j=new O}return S[R]=j,j},z.prototype._verify1=function(R){n(0===R.negative,"red works only with positives"),n(R.red,"red works only with red numbers")},z.prototype._verify2=function(R,j){n(0==(R.negative|j.negative),"red works only with positives"),n(R.red&&R.red===j.red,"red works only with red numbers")},z.prototype.imod=function(R){return this.prime?this.prime.ireduce(R)._forceRed(this):R.umod(this.m)._forceRed(this)},z.prototype.neg=function(R){return R.isZero()?R.clone():this.m.sub(R)._forceRed(this)},z.prototype.add=function(R,j){this._verify2(R,j);var Y=R.add(j);return Y.cmp(this.m)>=0&&Y.isub(this.m),Y._forceRed(this)},z.prototype.iadd=function(R,j){this._verify2(R,j);var Y=R.iadd(j);return Y.cmp(this.m)>=0&&Y.isub(this.m),Y},z.prototype.sub=function(R,j){this._verify2(R,j);var Y=R.sub(j);return Y.cmpn(0)<0&&Y.iadd(this.m),Y._forceRed(this)},z.prototype.isub=function(R,j){this._verify2(R,j);var Y=R.isub(j);return Y.cmpn(0)<0&&Y.iadd(this.m),Y},z.prototype.shl=function(R,j){return this._verify1(R),this.imod(R.ushln(j))},z.prototype.imul=function(R,j){return this._verify2(R,j),this.imod(R.imul(j))},z.prototype.mul=function(R,j){return this._verify2(R,j),this.imod(R.mul(j))},z.prototype.isqr=function(R){return this.imul(R,R.clone())},z.prototype.sqr=function(R){return this.mul(R,R)},z.prototype.sqrt=function(R){if(R.isZero())return R.clone();var j=this.m.andln(3);if(n(j%2==1),3===j){var Y=this.m.add(new s(1)).iushrn(2);return this.pow(R,Y)}for(var B=this.m.subn(1),V=0;!B.isZero()&&0===B.andln(1);)V++,B.iushrn(1);n(!B.isZero());var q=new s(1).toRed(this),ie=q.redNeg(),te=this.m.subn(1).iushrn(1),ee=this.m.bitLength();for(ee=new s(2*ee*ee).toRed(this);0!==this.pow(ee,te).cmp(ie);)ee.redIAdd(ie);for(var $=this.pow(ee,B),J=this.pow(R,B.addn(1).iushrn(1)),X=this.pow(R,B),ae=V;0!==X.cmp(q);){for(var ce=X,le=0;0!==ce.cmp(q);le++)ce=ce.redSqr();n(le<ae);var pe=this.pow($,new s(1).iushln(ae-le-1));J=J.redMul(pe),$=pe.redSqr(),X=X.redMul($),ae=le}return J},z.prototype.invm=function(R){var j=R._invmp(this.m);return 0!==j.negative?(j.negative=0,this.imod(j).redNeg()):this.imod(j)},z.prototype.pow=function(R,j){if(j.isZero())return new s(1).toRed(this);if(0===j.cmpn(1))return R.clone();var Y=new Array(16);Y[0]=new s(1).toRed(this),Y[1]=R;for(var B=2;B<Y.length;B++)Y[B]=this.mul(Y[B-1],R);var V=Y[0],q=0,ie=0,te=j.bitLength()%26;for(0===te&&(te=26),B=j.length-1;B>=0;B--){for(var ee=j.words[B],$=te-1;$>=0;$--){var J=ee>>$&1;V!==Y[0]&&(V=this.sqr(V)),0!==J||0!==q?(q<<=1,q|=J,(4==++ie||0===B&&0===$)&&(V=this.mul(V,Y[q]),ie=0,q=0)):ie=0}te=26}return V},z.prototype.convertTo=function(R){var j=R.umod(this.m);return j===R?j.clone():j},z.prototype.convertFrom=function(R){var j=R.clone();return j.red=null,j},s.mont=function(R){return new U(R)},a(U,z),U.prototype.convertTo=function(R){return this.imod(R.ushln(this.shift))},U.prototype.convertFrom=function(R){var j=this.imod(R.mul(this.rinv));return j.red=null,j},U.prototype.imul=function(R,j){if(R.isZero()||j.isZero())return R.words[0]=0,R.length=1,R;var Y=R.imul(j),B=Y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),V=Y.isub(B).iushrn(this.shift),q=V;return V.cmp(this.m)>=0?q=V.isub(this.m):V.cmpn(0)<0&&(q=V.iadd(this.m)),q._forceRed(this)},U.prototype.mul=function(R,j){if(R.isZero()||j.isZero())return new s(0)._forceRed(this);var Y=R.mul(j),B=Y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),V=Y.isub(B).iushrn(this.shift),q=V;return V.cmp(this.m)>=0?q=V.isub(this.m):V.cmpn(0)<0&&(q=V.iadd(this.m)),q._forceRed(this)},U.prototype.invm=function(R){return this.imod(R._invmp(this.m).mul(this.r2))._forceRed(this)}}(p=t.nmd(p),this)},6204:function(p){"use strict";p.exports=function(l){var t,i,r,n=l.length,a=0;for(t=0;t<n;++t)a+=l[t].length;var s=new Array(a),u=0;for(t=0;t<n;++t){var f=l[t],c=f.length;for(i=0;i<c;++i){var y=s[u++]=new Array(c-1),d=0;for(r=0;r<c;++r)r!==i&&(y[d++]=f[r]);if(1&i){var m=y[1];y[1]=y[0],y[0]=m}}}return s}},6867:function(p,l,t){"use strict";p.exports=function(y,d,m){switch(arguments.length){case 1:return i=[],f(g=y,g,c,!0),i;case 2:return"function"==typeof d?f(y,y,d,!0):(i=[],f(y,d,c,!1),i);case 3:return f(y,d,m,!1);default:throw new Error("box-intersect: Invalid arguments")}var g};var i,r=t(1888),n=t(855),a=t(7150);function s(y,d){for(var m=0;m<y;++m)if(!(d[m]<=d[m+y]))return!0;return!1}function u(y,d,m,g){for(var x=0,v=0,b=0,h=y.length;b<h;++b){var S=y[b];if(!s(d,S)){for(var w=0;w<2*d;++w)m[x++]=S[w];g[v++]=b}}return v}function f(y,d,m,g){var x=y.length,v=d.length;if(!(x<=0||v<=0)){var b=y[0].length>>>1;if(!(b<=0)){var h,S=r.mallocDouble(2*b*x),w=r.mallocInt32(x);if((x=u(y,b,S,w))>0){if(1===b&&g)n.init(x),h=n.sweepComplete(b,m,0,x,S,w,0,x,S,w);else{var E=r.mallocDouble(2*b*v),P=r.mallocInt32(v);(v=u(d,b,E,P))>0&&(n.init(x+v),h=1===b?n.sweepBipartite(b,m,0,x,S,w,0,v,E,P):a(b,m,g,x,S,w,v,E,P),r.free(E),r.free(P))}r.free(S),r.free(w)}return h}}}function c(y,d){i.push([y,d])}},2455:function(p,l){"use strict";function t(i){return i?function(r,n,a,s,u,f,c,y,d,m,g){return u-s>d-y?function(x,v,b,h,S,w,E,P,I,O,z){for(var U=2*x,R=h,j=U*h;R<S;++R,j+=U){var Y=w[v+j],B=w[v+j+x],V=E[R];e:for(var q=P,ie=U*P;q<I;++q,ie+=U){var $=z[q];if(!(O[v+ie+x]<Y||B<O[v+ie])){for(var J=v+1;J<x;++J)if(w[J+x+j]<O[J+ie]||O[J+x+ie]<w[J+j])continue e;var pe=b(V,$);if(void 0!==pe)return pe}}}}(r,n,a,s,u,f,c,y,d,m,g):function(x,v,b,h,S,w,E,P,I,O,z){for(var U=2*x,R=P,j=U*P;R<I;++R,j+=U){var Y=O[v+j],B=O[v+j+x],V=z[R];e:for(var q=h,ie=U*h;q<S;++q,ie+=U){var $=E[q];if(!(B<w[v+ie]||w[v+ie+x]<Y)){for(var J=v+1;J<x;++J)if(w[J+x+ie]<O[J+j]||O[J+x+j]<w[J+ie])continue e;var pe=b($,V);if(void 0!==pe)return pe}}}}(r,n,a,s,u,f,c,y,d,m,g)}:function(r,n,a,s,u,f,c,y,d,m,g,x){return f-u>m-d?s?function(v,b,h,S,w,E,P,I,O,z,U){for(var R=2*v,j=S,Y=R*S;j<w;++j,Y+=R){var B=E[b+Y],V=E[b+Y+v],q=P[j];e:for(var ie=I,te=R*I;ie<O;++ie,te+=R){var ee=z[b+te],$=U[ie];if(!(ee<=B||V<ee)){for(var J=b+1;J<v;++J)if(E[J+v+Y]<z[J+te]||z[J+v+te]<E[J+Y])continue e;var pe=h($,q);if(void 0!==pe)return pe}}}}(r,n,a,u,f,c,y,d,m,g,x):function(v,b,h,S,w,E,P,I,O,z,U){for(var R=2*v,j=S,Y=R*S;j<w;++j,Y+=R){var B=E[b+Y],V=E[b+Y+v],q=P[j];e:for(var ie=I,te=R*I;ie<O;++ie,te+=R){var ee=z[b+te],$=U[ie];if(!(ee<B||V<ee)){for(var J=b+1;J<v;++J)if(E[J+v+Y]<z[J+te]||z[J+v+te]<E[J+Y])continue e;var pe=h(q,$);if(void 0!==pe)return pe}}}}(r,n,a,u,f,c,y,d,m,g,x):s?function(v,b,h,S,w,E,P,I,O,z,U){for(var R=2*v,j=I,Y=R*I;j<O;++j,Y+=R){var B=z[b+Y],V=U[j];e:for(var q=S,ie=R*S;q<w;++q,ie+=R){var $=P[q];if(!(B<=E[b+ie]||E[b+ie+v]<B)){for(var J=b+1;J<v;++J)if(E[J+v+ie]<z[J+Y]||z[J+v+Y]<E[J+ie])continue e;var pe=h(V,$);if(void 0!==pe)return pe}}}}(r,n,a,u,f,c,y,d,m,g,x):function(v,b,h,S,w,E,P,I,O,z,U){for(var R=2*v,j=I,Y=R*I;j<O;++j,Y+=R){var B=z[b+Y],V=U[j];e:for(var q=S,ie=R*S;q<w;++q,ie+=R){var $=P[q];if(!(B<E[b+ie]||E[b+ie+v]<B)){for(var J=b+1;J<v;++J)if(E[J+v+ie]<z[J+Y]||z[J+v+Y]<E[J+ie])continue e;var pe=h($,V);if(void 0!==pe)return pe}}}}(r,n,a,u,f,c,y,d,m,g,x)}}l.partial=t(!1),l.full=t(!0)},7150:function(p,l,t){"use strict";p.exports=function(R,j,Y,B,V,q,ie,te,ee){!function(Ne,Re){var He=8*r.log2(Re+1)*(Ne+1)|0,Ze=r.nextPow2(w*He);P.length<Ze&&(i.free(P),P=i.mallocInt32(Ze));var nt=r.nextPow2(E*He);I.length<nt&&(i.free(I),I=i.mallocDouble(nt))}(R,B+ie);var $,J=0,X=2*R;for(O(J++,0,0,B,0,ie,Y?16:0,-1/0,1/0),Y||O(J++,0,0,ie,0,B,1,-1/0,1/0);J>0;){var ae=(J-=1)*w,ce=P[ae],le=P[ae+1],pe=P[ae+2],we=P[ae+3],Te=P[ae+4],ye=P[ae+5],ve=J*E,xe=I[ve],Ce=I[ve+1],Oe=1&ye,be=!!(16&ye),ue=V,se=q,ge=te,Ie=ee;if(Oe&&(ue=te,se=ee,ge=V,Ie=q),!(2&ye&&le>=(pe=v(R,ce,le,pe,ue,se,Ce))||4&ye&&(le=b(R,ce,le,pe,ue,se,xe))>=pe)){var ke=pe-le,Se=Te-we;if(be){if(R*ke*(ke+Se)<m){if(void 0!==($=u.scanComplete(R,ce,j,le,pe,ue,se,we,Te,ge,Ie)))return $;continue}}else{if(R*Math.min(ke,Se)<y){if(void 0!==($=a(R,ce,j,Oe,le,pe,ue,se,we,Te,ge,Ie)))return $;continue}if(R*ke*Se<d){if(void 0!==($=u.scanBipartite(R,ce,j,Oe,le,pe,ue,se,we,Te,ge,Ie)))return $;continue}}var Pe=g(R,ce,le,pe,ue,se,xe,Ce);if(le<Pe)if(R*(Pe-le)<y){if(void 0!==($=s(R,ce+1,j,le,Pe,ue,se,we,Te,ge,Ie)))return $}else if(ce===R-2){if(void 0!==($=Oe?u.sweepBipartite(R,j,we,Te,ge,Ie,le,Pe,ue,se):u.sweepBipartite(R,j,le,Pe,ue,se,we,Te,ge,Ie)))return $}else O(J++,ce+1,le,Pe,we,Te,Oe,-1/0,1/0),O(J++,ce+1,we,Te,le,Pe,1^Oe,-1/0,1/0);if(Pe<pe){var Fe=f(R,ce,we,Te,ge,Ie),Be=ge[X*Fe+ce],me=x(R,ce,Fe,Te,ge,Ie,Be);if(me<Te&&O(J++,ce,Pe,pe,me,Te,(4|Oe)+(be?16:0),Be,Ce),we<Fe&&O(J++,ce,Pe,pe,we,Fe,(2|Oe)+(be?16:0),xe,Be),Fe+1===me){if(void 0!==($=be?U(R,ce,j,Pe,pe,ue,se,Fe,ge,Ie[Fe]):z(R,ce,j,Oe,Pe,pe,ue,se,Fe,ge,Ie[Fe])))return $}else if(Fe<me){var Me;if(be){if(Pe<(Me=h(R,ce,Pe,pe,ue,se,Be))){var Le=x(R,ce,Pe,Me,ue,se,Be);if(ce===R-2){if(Pe<Le&&void 0!==($=u.sweepComplete(R,j,Pe,Le,ue,se,Fe,me,ge,Ie))||Le<Me&&void 0!==($=u.sweepBipartite(R,j,Le,Me,ue,se,Fe,me,ge,Ie)))return $}else Pe<Le&&O(J++,ce+1,Pe,Le,Fe,me,16,-1/0,1/0),Le<Me&&(O(J++,ce+1,Le,Me,Fe,me,0,-1/0,1/0),O(J++,ce+1,Fe,me,Le,Me,1,-1/0,1/0))}}else Pe<(Me=Oe?S(R,ce,Pe,pe,ue,se,Be):h(R,ce,Pe,pe,ue,se,Be))&&(ce===R-2?$=Oe?u.sweepBipartite(R,j,Fe,me,ge,Ie,Pe,Me,ue,se):u.sweepBipartite(R,j,Pe,Me,ue,se,Fe,me,ge,Ie):(O(J++,ce+1,Pe,Me,Fe,me,Oe,-1/0,1/0),O(J++,ce+1,Fe,me,Pe,Me,1^Oe,-1/0,1/0)))}}}}};var i=t(1888),r=t(8828),n=t(2455),a=n.partial,s=n.full,u=t(855),f=t(3545),c=t(8105),y=128,d=1<<22,m=1<<22,g=c("!(lo>=p0)&&!(p1>=hi)"),x=c("lo===p0"),v=c("lo<p0"),b=c("hi<=p0"),h=c("lo<=p0&&p0<=hi"),S=c("lo<p0&&p0<=hi"),w=6,E=2,P=i.mallocInt32(1024),I=i.mallocDouble(1024);function O(R,j,Y,B,V,q,ie,te,ee){var $=w*R;P[$]=j,P[$+1]=Y,P[$+2]=B,P[$+3]=V,P[$+4]=q,P[$+5]=ie;var J=E*R;I[J]=te,I[J+1]=ee}function z(R,j,Y,B,V,q,ie,te,ee,$,J){var X=2*R,ae=ee*X,ce=$[ae+j];e:for(var le=V,pe=V*X;le<q;++le,pe+=X){var we=ie[pe+j],Te=ie[pe+j+R];if(!(ce<we||Te<ce||B&&ce===we)){for(var ye,ve=te[le],xe=j+1;xe<R;++xe)if(we=ie[pe+xe],(Te=ie[pe+xe+R])<$[ae+xe]||$[ae+xe+R]<we)continue e;if(void 0!==(ye=B?Y(J,ve):Y(ve,J)))return ye}}}function U(R,j,Y,B,V,q,ie,te,ee,$){var J=2*R,X=te*J,ae=ee[X+j];e:for(var ce=B,le=B*J;ce<V;++ce,le+=J){var pe=ie[ce];if(pe!==$){var we=q[le+j],Te=q[le+j+R];if(!(ae<we||Te<ae)){for(var ye=j+1;ye<R;++ye)if(we=q[le+ye],(Te=q[le+ye+R])<ee[X+ye]||ee[X+ye+R]<we)continue e;var Ce=Y(pe,$);if(void 0!==Ce)return Ce}}}}},3545:function(p,l,t){"use strict";p.exports=function(a,s,u,f,c,y){if(f<=u+1)return u;for(var d=u,m=f,g=f+u>>>1,x=2*a,v=g,b=c[x*g+s];d<m;){if(m-d<r){n(a,s,d,m,c,y),b=c[x*g+s];break}var h=m-d,S=Math.random()*h+d|0,w=c[x*S+s],E=Math.random()*h+d|0,P=c[x*E+s],I=Math.random()*h+d|0,O=c[x*I+s];w<=P?O>=P?(v=E,b=P):w>=O?(v=S,b=w):(v=I,b=O):P>=O?(v=E,b=P):O>=w?(v=S,b=w):(v=I,b=O);for(var z=x*(m-1),U=x*v,R=0;R<x;++R,++z,++U){var j=c[z];c[z]=c[U],c[U]=j}var Y=y[m-1];for(y[m-1]=y[v],y[v]=Y,z=x*(m-1),U=x*(v=i(a,s,d,m-1,c,y,b)),R=0;R<x;++R,++z,++U)j=c[z],c[z]=c[U],c[U]=j;if(Y=y[m-1],y[m-1]=y[v],y[v]=Y,g<v){for(m=v-1;d<m&&c[x*(m-1)+s]===b;)m-=1;m+=1}else{if(!(v<g))break;for(d=v+1;d<m&&c[x*d+s]===b;)d+=1}}return i(a,s,u,g,c,y,c[x*g+s])};var i=t(8105)("lo<p0"),r=8;function n(a,s,u,f,c,y){for(var d=2*a,m=d*(u+1)+s,g=u+1;g<f;++g,m+=d)for(var x=c[m],v=g,b=d*(g-1);v>u&&c[b+s]>x;--v,b-=d){for(var h=b,S=b+d,w=0;w<d;++w,++h,++S){var E=c[h];c[h]=c[S],c[S]=E}var P=y[v];y[v]=y[v-1],y[v-1]=P}}},8105:function(p){"use strict";p.exports=function(t){return l[t]};var l={"lo===p0":function(t,i,r,n,a,s,u){for(var f=2*t,c=f*r,y=c,d=r,m=i,g=r;n>g;++g,c+=f)if(a[c+m]===u)if(d===g)d+=1,y+=f;else{for(var x=0;f>x;++x){var v=a[c+x];a[c+x]=a[y],a[y++]=v}var b=s[g];s[g]=s[d],s[d++]=b}return d},"lo<p0":function(t,i,r,n,a,s,u){for(var f=2*t,c=f*r,y=c,d=r,m=i,g=r;n>g;++g,c+=f)if(a[c+m]<u)if(d===g)d+=1,y+=f;else{for(var x=0;f>x;++x){var v=a[c+x];a[c+x]=a[y],a[y++]=v}var b=s[g];s[g]=s[d],s[d++]=b}return d},"lo<=p0":function(t,i,r,n,a,s,u){for(var f=2*t,c=f*r,y=c,d=r,m=t+i,g=r;n>g;++g,c+=f)if(a[c+m]<=u)if(d===g)d+=1,y+=f;else{for(var x=0;f>x;++x){var v=a[c+x];a[c+x]=a[y],a[y++]=v}var b=s[g];s[g]=s[d],s[d++]=b}return d},"hi<=p0":function(t,i,r,n,a,s,u){for(var f=2*t,c=f*r,y=c,d=r,m=t+i,g=r;n>g;++g,c+=f)if(a[c+m]<=u)if(d===g)d+=1,y+=f;else{for(var x=0;f>x;++x){var v=a[c+x];a[c+x]=a[y],a[y++]=v}var b=s[g];s[g]=s[d],s[d++]=b}return d},"lo<p0&&p0<=hi":function(t,i,r,n,a,s,u){for(var f=2*t,c=f*r,y=c,d=r,m=i,g=t+i,x=r;n>x;++x,c+=f)if(a[c+m]<u&&u<=a[c+g])if(d===x)d+=1,y+=f;else{for(var h=0;f>h;++h){var S=a[c+h];a[c+h]=a[y],a[y++]=S}var w=s[x];s[x]=s[d],s[d++]=w}return d},"lo<=p0&&p0<=hi":function(t,i,r,n,a,s,u){for(var f=2*t,c=f*r,y=c,d=r,m=i,g=t+i,x=r;n>x;++x,c+=f)if(a[c+m]<=u&&u<=a[c+g])if(d===x)d+=1,y+=f;else{for(var h=0;f>h;++h){var S=a[c+h];a[c+h]=a[y],a[y++]=S}var w=s[x];s[x]=s[d],s[d++]=w}return d},"!(lo>=p0)&&!(p1>=hi)":function(t,i,r,n,a,s,u,f){for(var c=2*t,y=c*r,d=y,m=r,g=i,x=t+i,v=r;n>v;++v,y+=c)if(!(a[y+g]>=u||f>=a[y+x]))if(m===v)m+=1,d+=c;else{for(var S=0;c>S;++S){var w=a[y+S];a[y+S]=a[d],a[d++]=w}var E=s[v];s[v]=s[m],s[m++]=E}return m}}},1811:function(p){"use strict";p.exports=function(c,y){y<=4*l?t(0,y-1,c):f(0,y-1,c)};var l=32;function t(c,y,d){for(var m=2*(c+1),g=c+1;g<=y;++g){for(var x=d[m++],v=d[m++],b=g,h=m-2;b-- >c;){var S=d[h-2],w=d[h-1];if(S<x||S===x&&w<v)break;d[h]=S,d[h+1]=w,h-=2}d[h]=x,d[h+1]=v}}function i(c,y,d){var m=d[c*=2],g=d[c+1];d[c]=d[y*=2],d[c+1]=d[y+1],d[y]=m,d[y+1]=g}function r(c,y,d){d[c*=2]=d[y*=2],d[c+1]=d[y+1]}function n(c,y,d,m){d*=2;var g=m[c*=2],x=m[c+1];m[c]=m[y*=2],m[c+1]=m[y+1],m[y]=m[d],m[y+1]=m[d+1],m[d]=g,m[d+1]=x}function a(c,y,d,m,g){g[c*=2]=g[y*=2],g[y]=d,g[c+1]=g[y+1],g[y+1]=m}function s(c,y,d){var m=d[c*=2],g=d[y*=2];return!(m<g)&&(m!==g||d[c+1]>d[y+1])}function u(c,y,d,m){var g=m[c*=2];return g<y||g===y&&m[c+1]<d}function f(c,y,d){var m=(y-c+1)/6|0,g=c+m,x=y-m,v=c+y>>1,b=v-m,h=v+m,S=g,w=b,E=v,P=h,I=x,O=c+1,z=y-1,U=0;s(S,w,d)&&(U=S,S=w,w=U),s(P,I,d)&&(U=P,P=I,I=U),s(S,E,d)&&(U=S,S=E,E=U),s(w,E,d)&&(U=w,w=E,E=U),s(S,P,d)&&(U=S,S=P,P=U),s(E,P,d)&&(U=E,E=P,P=U),s(w,I,d)&&(U=w,w=I,I=U),s(w,E,d)&&(U=w,w=E,E=U),s(P,I,d)&&(U=P,P=I,I=U);for(var R=d[2*w],j=d[2*w+1],Y=d[2*P],B=d[2*P+1],V=2*S,q=2*E,ie=2*I,te=2*g,ee=2*v,$=2*x,J=0;J<2;++J){var ae=d[q+J],ce=d[ie+J];d[te+J]=d[V+J],d[ee+J]=ae,d[$+J]=ce}r(b,c,d),r(h,y,d);for(var le=O;le<=z;++le)if(u(le,R,j,d))le!==O&&i(le,O,d),++O;else if(!u(le,Y,B,d))for(;;){if(u(z,Y,B,d)){u(z,R,j,d)?(n(le,O,z,d),++O,--z):(i(le,z,d),--z);break}if(--z<le)break}a(c,O-1,R,j,d),a(y,z+1,Y,B,d),O-2-c<=l?t(c,O-2,d):f(c,O-2,d),y-(z+2)<=l?t(z+2,y,d):f(z+2,y,d),z-O<=l?t(O,z,d):f(O,z,d)}},855:function(p,l,t){"use strict";p.exports={init:function(b){var h=r.nextPow2(b);u.length<h&&(i.free(u),u=i.mallocInt32(h)),f.length<h&&(i.free(f),f=i.mallocInt32(h)),c.length<h&&(i.free(c),c=i.mallocInt32(h)),y.length<h&&(i.free(y),y=i.mallocInt32(h)),d.length<h&&(i.free(d),d=i.mallocInt32(h)),m.length<h&&(i.free(m),m=i.mallocInt32(h));var S=8*h;g.length<S&&(i.free(g),g=i.mallocDouble(S))},sweepBipartite:function(b,h,S,w,E,P,I,O,z,U){for(var R=0,j=2*b,Y=b-1,B=j-1,V=S;V<w;++V){var q=P[V],ie=j*V;g[R++]=E[ie+Y],g[R++]=-(q+1),g[R++]=E[ie+B],g[R++]=q}for(V=I;V<O;++V){q=U[V]+a;var te=j*V;g[R++]=z[te+Y],g[R++]=-q,g[R++]=z[te+B],g[R++]=q}var ee=R>>>1;n(g,ee);var $=0,J=0;for(V=0;V<ee;++V){var X=0|g[2*V+1];if(X>=a)x(c,y,J--,X=X-a|0);else if(X>=0)x(u,f,$--,X);else if(X<=-a){X=-X-a|0;for(var ae=0;ae<$;++ae)if(void 0!==(ce=h(u[ae],X)))return ce;v(c,y,J++,X)}else{for(X=-X-1|0,ae=0;ae<J;++ae){var ce;if(void 0!==(ce=h(X,c[ae])))return ce}v(u,f,$++,X)}}},sweepComplete:function(b,h,S,w,E,P,I,O,z,U){for(var R=0,j=2*b,Y=b-1,B=j-1,V=S;V<w;++V){var q=P[V]+1<<1,ie=j*V;g[R++]=E[ie+Y],g[R++]=-q,g[R++]=E[ie+B],g[R++]=q}for(V=I;V<O;++V){q=U[V]+1<<1;var te=j*V;g[R++]=z[te+Y],g[R++]=1|-q,g[R++]=z[te+B],g[R++]=1|q}var ee=R>>>1;n(g,ee);var $=0,J=0,X=0;for(V=0;V<ee;++V){var ae=0|g[2*V+1],ce=1&ae;if(V<ee-1&&ae>>1==g[2*V+3]>>1&&(ce=2,V+=1),ae<0){for(var le=-(ae>>1)-1,pe=0;pe<X;++pe)if(void 0!==(we=h(d[pe],le)))return we;if(0!==ce)for(pe=0;pe<$;++pe)if(void 0!==(we=h(u[pe],le)))return we;if(1!==ce)for(pe=0;pe<J;++pe){var we;if(void 0!==(we=h(c[pe],le)))return we}0===ce?v(u,f,$++,le):1===ce?v(c,y,J++,le):2===ce&&v(d,m,X++,le)}else le=(ae>>1)-1,0===ce?x(u,f,$--,le):1===ce?x(c,y,J--,le):2===ce&&x(d,m,X--,le)}},scanBipartite:function(b,h,S,w,E,P,I,O,z,U,R,j){var Y=0,B=2*b,V=h,q=h+b,ie=1,te=1;w?te=a:ie=a;for(var ee=E;ee<P;++ee){var $=ee+ie,J=B*ee;g[Y++]=I[J+V],g[Y++]=-$,g[Y++]=I[J+q],g[Y++]=$}for(ee=z;ee<U;++ee)$=ee+te,g[Y++]=R[B*ee+V],g[Y++]=-$;var ae=Y>>>1;n(g,ae);var ce=0;for(ee=0;ee<ae;++ee){var le=0|g[2*ee+1];if(le<0){var pe=!1;if(($=-le)>=a?(pe=!w,$-=a):(pe=!!w,$-=1),pe)v(u,f,ce++,$);else{var we=j[$],Te=B*$,ye=R[Te+h+1],ve=R[Te+h+1+b];e:for(var xe=0;xe<ce;++xe){var Ce=u[xe],Oe=B*Ce;if(!(ve<I[Oe+h+1]||I[Oe+h+1+b]<ye)){for(var be=h+2;be<b;++be)if(R[Te+be+b]<I[Oe+be]||I[Oe+be+b]<R[Te+be])continue e;var ue,se=O[Ce];if(void 0!==(ue=w?S(we,se):S(se,we)))return ue}}}}else x(u,f,ce--,le-ie)}},scanComplete:function(b,h,S,w,E,P,I,O,z,U,R){for(var j=0,Y=2*b,B=h,V=h+b,q=w;q<E;++q){var ie=q+a,te=Y*q;g[j++]=P[te+B],g[j++]=-ie,g[j++]=P[te+V],g[j++]=ie}for(q=O;q<z;++q)ie=q+1,g[j++]=U[Y*q+B],g[j++]=-ie;var $=j>>>1;n(g,$);var J=0;for(q=0;q<$;++q){var X=0|g[2*q+1];if(X<0)if((ie=-X)>=a)u[J++]=ie-a;else{var ae=R[ie-=1],ce=Y*ie,le=U[ce+h+1],pe=U[ce+h+1+b];e:for(var we=0;we<J;++we){var Te=u[we],ye=I[Te];if(ye===ae)break;var ve=Y*Te;if(!(pe<P[ve+h+1]||P[ve+h+1+b]<le)){for(var xe=h+2;xe<b;++xe)if(U[ce+xe+b]<P[ve+xe]||P[ve+xe+b]<U[ce+xe])continue e;var Ce=S(ye,ae);if(void 0!==Ce)return Ce}}}else{for(ie=X-a,we=J-1;we>=0;--we)if(u[we]===ie){for(xe=we+1;xe<J;++xe)u[xe-1]=u[xe];break}--J}}}};var i=t(1888),r=t(8828),n=t(1811),a=1<<28,s=1024,u=i.mallocInt32(s),f=i.mallocInt32(s),c=i.mallocInt32(s),y=i.mallocInt32(s),d=i.mallocInt32(s),m=i.mallocInt32(s),g=i.mallocDouble(8192);function x(b,h,S,w){var E=h[w],P=b[S-1];b[E]=P,h[P]=E}function v(b,h,S,w){b[S]=w,h[w]=S}},2538:function(p,l,t){"use strict";var i=t(8902),r=t(5542),n=t(2272),a=t(5023);function s(c){return[Math.min(c[0],c[1]),Math.max(c[0],c[1])]}function u(c,y){return c[0]-y[0]||c[1]-y[1]}function f(c,y,d){return y in c?c[y]:d}p.exports=function(c,y,d){Array.isArray(y)?(d=d||{},y=y||[]):(d=y||{},y=[]);var m=!!f(d,"delaunay",!0),g=!!f(d,"interior",!0),x=!!f(d,"exterior",!0),v=!!f(d,"infinity",!1);if(!g&&!x||0===c.length)return[];var b=i(c,y);if(m||g!==x||v){for(var h=r(c.length,y.map(s).sort(u)),S=0;S<b.length;++S){var w=b[S];h.addTriangle(w[0],w[1],w[2])}return m&&n(c,h),x?g?v?a(h,0,v):h.cells():a(h,1,v):a(h,-1)}return b}},2272:function(p,l,t){"use strict";var i=t(2646)[4];function r(n,a,s,u,f,c){var y=a.opposite(u,f);if(!(y<0)){if(f<u){var d=u;u=f,f=d,d=c,c=y,y=d}a.isConstraint(u,f)||i(n[u],n[f],n[c],n[y])<0&&s.push(u,f)}}t(2478),p.exports=function(n,a){for(var s=[],u=n.length,f=a.stars,c=0;c<u;++c)for(var y=f[c],d=1;d<y.length;d+=2)if(!((v=y[d])<c||a.isConstraint(c,v))){for(var m=y[d-1],g=-1,x=1;x<y.length;x+=2)if(y[x-1]===v){g=y[x];break}g<0||i(n[c],n[v],n[m],n[g])<0&&s.push(c,v)}for(;s.length>0;){for(var v=s.pop(),b=(m=-1,g=-1,y=f[c=s.pop()],1);b<y.length;b+=2){var h=y[b-1],S=y[b];h===v?g=S:S===v&&(m=h)}m<0||g<0||i(n[c],n[v],n[m],n[g])>=0||(a.flip(c,v),r(n,a,s,m,c,g),r(n,a,s,c,g,m),r(n,a,s,g,v,m),r(n,a,s,v,m,g))}}},5023:function(p,l,t){"use strict";var i,r=t(2478);function n(s,u,f,c,y,d,m){this.cells=s,this.neighbor=u,this.flags=c,this.constraint=f,this.active=y,this.next=d,this.boundary=m}function a(s,u){return s[0]-u[0]||s[1]-u[1]||s[2]-u[2]}p.exports=function(s,u,f){var c=function(I,O){for(var z=I.cells(),U=z.length,R=0;R<U;++R){var j=(X=z[R])[0],Y=X[1],B=X[2];Y<B?Y<j&&(X[0]=Y,X[1]=B,X[2]=j):B<j&&(X[0]=B,X[1]=j,X[2]=Y)}z.sort(a);var V=new Array(U);for(R=0;R<V.length;++R)V[R]=0;var q=[],ie=[],te=new Array(3*U),ee=new Array(3*U),$=null;O&&($=[]);var J=new n(z,te,ee,V,q,ie,$);for(R=0;R<U;++R)for(var X=z[R],ae=0;ae<3;++ae){var ce=te[3*R+ae]=J.locate(Y=X[(ae+1)%3],j=X[ae],I.opposite(Y,j)),le=ee[3*R+ae]=I.isConstraint(j,Y);ce<0&&(le?ie.push(R):(q.push(R),V[R]=1),O&&$.push([Y,j,-1]))}return J}(s,f);if(0===u)return f?c.cells.concat(c.boundary):c.cells;for(var y=1,d=c.active,m=c.next,g=c.flags,x=c.cells,v=c.constraint,b=c.neighbor;d.length>0||m.length>0;){for(;d.length>0;){var h=d.pop();if(g[h]!==-y){g[h]=y;for(var S=0;S<3;++S){var w=b[3*h+S];w>=0&&0===g[w]&&(v[3*h+S]?m.push(w):(d.push(w),g[w]=y))}}}var E=m;m=d,d=E,m.length=0,y=-y}var P=function(I,O,z){for(var U=0,R=0;R<I.length;++R)O[R]===z&&(I[U++]=I[R]);return I.length=U,I}(x,g,u);return f?P.concat(c.boundary):P},n.prototype.locate=(i=[0,0,0],function(s,u,f){var c=s,y=u,d=f;return u<f?u<s&&(c=u,y=f,d=s):f<s&&(c=f,y=s,d=u),c<0?-1:(i[0]=c,i[1]=y,i[2]=d,r.eq(this.cells,i,a))})},8902:function(p,l,t){"use strict";var i=t(2478),r=t(3250)[3];function n(m,g,x,v,b){this.a=m,this.b=g,this.idx=x,this.lowerIds=v,this.upperIds=b}function a(m,g,x,v){this.a=m,this.b=g,this.type=x,this.idx=v}function s(m,g){var x=m.a[0]-g.a[0]||m.a[1]-g.a[1]||m.type-g.type;return x||(0!==m.type&&(x=r(m.a,m.b,g.b))?x:m.idx-g.idx)}function u(m,g){return r(m.a,m.b,g)}function f(m,g,x,v,b){for(var h=i.lt(g,v,u),S=i.gt(g,v,u),w=h;w<S;++w){for(var E=g[w],P=E.lowerIds,I=P.length;I>1&&r(x[P[I-2]],x[P[I-1]],v)>0;)m.push([P[I-1],P[I-2],b]),I-=1;P.length=I,P.push(b);var O=E.upperIds;for(I=O.length;I>1&&r(x[O[I-2]],x[O[I-1]],v)<0;)m.push([O[I-2],O[I-1],b]),I-=1;O.length=I,O.push(b)}}function c(m,g){var x;return(x=m.a[0]<g.a[0]?r(m.a,m.b,g.a):r(g.b,g.a,m.a))?x:(x=g.b[0]<m.b[0]?r(m.a,m.b,g.b):r(g.b,g.a,m.b))||m.idx-g.idx}function y(m,g,x){var v=i.le(m,x,c),b=m[v],h=b.upperIds,S=h[h.length-1];b.upperIds=[S],m.splice(v+1,0,new n(x.a,x.b,x.idx,[S],h))}function d(m,g,x){var v=x.a;x.a=x.b,x.b=v;var b=i.eq(m,x,c);m[b-1].upperIds=m[b].upperIds,m.splice(b,1)}p.exports=function(m,g){for(var x=m.length,v=g.length,b=[],h=0;h<x;++h)b.push(new a(m[h],null,0,h));for(h=0;h<v;++h){var S=g[h],w=m[S[0]],E=m[S[1]];w[0]<E[0]?b.push(new a(w,E,2,h),new a(E,w,1,h)):w[0]>E[0]&&b.push(new a(E,w,2,h),new a(w,E,1,h))}b.sort(s);for(var P=b[0].a[0]-(1+Math.abs(b[0].a[0]))*Math.pow(2,-52),I=[new n([P,1],[P,0],-1,[],[],[],[])],O=[],z=(h=0,b.length);h<z;++h){var U=b[h],R=U.type;0===R?f(O,I,m,U.a,U.idx):2===R?y(I,0,U):d(I,0,U)}return O}},5542:function(p,l,t){"use strict";var i=t(2478);function r(s,u){this.stars=s,this.edges=u}p.exports=function(s,u){for(var f=new Array(s),c=0;c<s;++c)f[c]=[];return new r(f,u)};var n=r.prototype;function a(s,u,f){for(var c=1,y=s.length;c<y;c+=2)if(s[c-1]===u&&s[c]===f)return s[c-1]=s[y-2],s[c]=s[y-1],void(s.length=y-2)}n.isConstraint=function(){var s=[0,0];function u(f,c){return f[0]-c[0]||f[1]-c[1]}return function(f,c){return s[0]=Math.min(f,c),s[1]=Math.max(f,c),i.eq(this.edges,s,u)>=0}}(),n.removeTriangle=function(s,u,f){var c=this.stars;a(c[s],u,f),a(c[u],f,s),a(c[f],s,u)},n.addTriangle=function(s,u,f){var c=this.stars;c[s].push(u,f),c[u].push(f,s),c[f].push(s,u)},n.opposite=function(s,u){for(var f=this.stars[u],c=1,y=f.length;c<y;c+=2)if(f[c]===s)return f[c-1];return-1},n.flip=function(s,u){var f=this.opposite(s,u),c=this.opposite(u,s);this.removeTriangle(s,u,f),this.removeTriangle(u,s,c),this.addTriangle(s,c,f),this.addTriangle(u,f,c)},n.edges=function(){for(var s=this.stars,u=[],f=0,c=s.length;f<c;++f)for(var y=s[f],d=0,m=y.length;d<m;d+=2)u.push([y[d],y[d+1]]);return u},n.cells=function(){for(var s=this.stars,u=[],f=0,c=s.length;f<c;++f)for(var y=s[f],d=0,m=y.length;d<m;d+=2){var g=y[d],x=y[d+1];f<Math.min(g,x)&&u.push([f,g,x])}return u}},2419:function(p){"use strict";p.exports=function(l){for(var t=1,i=1;i<l.length;++i)for(var r=0;r<i;++r)if(l[i]<l[r])t=-t;else if(l[r]===l[i])return 0;return t}},3628:function(p,l,t){"use strict";var i=t(1338),r=t(727);function n(u,f){for(var c=0,y=u.length,d=0;d<y;++d)c+=u[d]*f[d];return c}function a(u){var f=u.length;if(0===f)return[];var c=i([u.length+1,u.length+1],1),y=i([u.length+1],1);c[f][f]=0;for(var d=0;d<f;++d){for(var m=0;m<=d;++m)c[m][d]=c[d][m]=2*n(u[d],u[m]);y[d]=n(u[d],u[d])}var g=r(c,y),x=0,v=g[f+1];for(d=0;d<v.length;++d)x+=v[d];var b=new Array(f);for(d=0;d<f;++d){v=g[d];var h=0;for(m=0;m<v.length;++m)h+=v[m];b[d]=h/x}return b}function s(u){if(0===u.length)return[];for(var f=u[0].length,c=i([f]),y=a(u),d=0;d<u.length;++d)for(var m=0;m<f;++m)c[m]+=u[d][m]*y[d];return c}s.barycenetric=a,p.exports=s},6037:function(p,l,t){p.exports=function(r){for(var n=i(r),a=0,s=0;s<r.length;++s)for(var u=r[s],f=0;f<n.length;++f)a+=Math.pow(u[f]-n[f],2);return Math.sqrt(a/r.length)};var i=t(3628)},332:function(p,l,t){"use strict";p.exports=function(S,w,E){var P,R,Y,B;if(E){P=w;for(var I=new Array(w.length),O=0;O<w.length;++O){var z=w[O];I[O]=[z[0],z[1],E[O]]}w=I}for(var U=(Y=!!E,void 0,b(w,B=g(R=S,[],m(R)),Y),!!B);h(S,w,!!E);)U=!0;if(E&&U)for(P.length=0,E.length=0,O=0;O<w.length;++O)P.push([(z=w[O])[0],z[1]]),E.push(z[2]);return U};var i=t(1755),r=t(6867),n=t(1125),a=t(7842),s=t(1318),u=t(946),f=t(5838),c=t(1278),y=t(3637);function d(S){var w=u(S);return[c(w,-1/0),c(w,1/0)]}function m(S){for(var w=new Array(S.length),E=0;E<S.length;++E){var P=S[E];w[E]=[c(P[0],-1/0),c(P[1],-1/0),c(P[0],1/0),c(P[1],1/0)]}return w}function g(S,w,E){for(var P=w.length,I=new i(P),O=[],z=0;z<w.length;++z){var U=w[z],R=d(U[0]),j=d(U[1]);O.push([c(R[0],-1/0),c(j[0],-1/0),c(R[1],1/0),c(j[1],1/0)])}r(O,function(ie,te){I.link(ie,te)});var Y=!0,B=new Array(P);for(z=0;z<P;++z)(q=I.find(z))!==z&&(Y=!1,S[q]=[Math.min(S[z][0],S[q][0]),Math.min(S[z][1],S[q][1])]);if(Y)return null;var V=0;for(z=0;z<P;++z){var q;(q=I.find(z))===z?(B[z]=V,S[V++]=S[z]):B[z]=-1}for(S.length=V,z=0;z<P;++z)B[z]<0&&(B[z]=B[I.find(z)]);return B}function x(S,w){return S[0]-w[0]||S[1]-w[1]}function v(S,w){return S[0]-w[0]||S[1]-w[1]||(S[2]<w[2]?-1:S[2]>w[2]?1:0)}function b(S,w,E){if(0!==S.length){if(w)for(var P=0;P<S.length;++P){var I=w[(z=S[P])[0]],O=w[z[1]];z[0]=Math.min(I,O),z[1]=Math.max(I,O)}else for(P=0;P<S.length;++P){var z;I=(z=S[P])[0],O=z[1],z[0]=Math.min(I,O),z[1]=Math.max(I,O)}S.sort(E?v:x);var U=1;for(P=1;P<S.length;++P){var R=S[P-1],j=S[P];(j[0]!==R[0]||j[1]!==R[1]||E&&j[2]!==R[2])&&(S[U++]=j)}S.length=U}}function h(S,w,E){var R,j,B,P=function(R,j){for(var Y=new Array(j.length),B=0;B<j.length;++B){var V=j[B],q=R[V[0]],ie=R[V[1]];Y[B]=[c(Math.min(q[0],ie[0]),-1/0),c(Math.min(q[1],ie[1]),-1/0),c(Math.max(q[0],ie[0]),1/0),c(Math.max(q[1],ie[1]),1/0)]}return Y}(S,w),I=(R=S,j=w,B=[],r(P,function(V,q){var ie=j[V],te=j[q];ie[0]!==te[0]&&ie[0]!==te[1]&&ie[1]!==te[0]&&ie[1]!==te[1]&&n(R[ie[0]],R[ie[1]],R[te[0]],R[te[1]])&&B.push([V,q])}),B),O=function(R,j,Y,B){var V=[];return r(Y,B,function(q,ie){var te=j[q];if(te[0]!==ie&&te[1]!==ie){var ee=R[ie];n(R[te[0]],R[te[1]],ee,ee)&&V.push([q,ie])}}),V}(S,w,P,m(S)),z=function(R,j,Y,B,V){var q,ie,te=R.map(function(ue){return[a(ue[0]),a(ue[1])]});for(q=0;q<Y.length;++q){var ee=Y[q],$=ee[1],J=j[ie=ee[0]],X=j[$],ae=y(f(R[J[0]]),f(R[J[1]]),f(R[X[0]]),f(R[X[1]]));if(ae){var ce=R.length;R.push([u(ae[0]),u(ae[1])]),te.push(ae),B.push([ie,ce],[$,ce])}}for(B.sort(function(ue,se){if(ue[0]!==se[0])return ue[0]-se[0];var ge=te[ue[1]],Ie=te[se[1]];return s(ge[0],Ie[0])||s(ge[1],Ie[1])}),q=B.length-1;q>=0;--q){var le=j[ie=(Oe=B[q])[0]],pe=le[0],we=le[1],Te=R[pe],ye=R[we];if((Te[0]-ye[0]||Te[1]-ye[1])<0){var ve=pe;pe=we,we=ve}le[0]=pe;var xe,Ce=le[1]=Oe[1];for(V&&(xe=le[2]);q>0&&B[q-1][0]===ie;){var Oe,be=(Oe=B[--q])[1];j.push(V?[Ce,be,xe]:[Ce,be]),Ce=be}j.push(V?[Ce,we,xe]:[Ce,we])}return te}(S,w,I,O,E),U=g(S,z);return b(w,U,E),!!U||I.length>0||O.length>0}},3637:function(p,l,t){"use strict";p.exports=function(y,d,m,g){var x=s(d,y),v=s(g,m),b=c(x,v);if(0===a(b))return null;var h=c(v,s(y,m)),S=r(h,b),w=f(x,S);return u(y,w)};var i=t(6504),r=t(8697),n=t(5572),a=t(7721),s=t(544),u=t(2653),f=t(8987);function c(y,d){return n(i(y[0],d[1]),i(y[1],d[0]))}},3642:function(p){p.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},6729:function(p,l,t){"use strict";var i=t(3642),r=t(395);function n(u){return[u[0]/255,u[1]/255,u[2]/255,u[3]]}function a(u){for(var f,c="#",y=0;y<3;++y)c+=("00"+(f=(f=u[y]).toString(16))).substr(f.length);return c}function s(u){return"rgba("+u.join(",")+")"}p.exports=function(u){var f,c,y,d,m,g,x,v,b,h;if(u||(u={}),v=(u.nshades||72)-1,x=u.format||"hex",(g=u.colormap)||(g="jet"),"string"==typeof g){if(g=g.toLowerCase(),!i[g])throw Error(g+" not a supported colorscale");m=i[g]}else{if(!Array.isArray(g))throw Error("unsupported colormap option",g);m=g.slice()}if(m.length>v+1)throw new Error(g+" map requires nshades to be at least size "+m.length);b=Array.isArray(u.alpha)?2!==u.alpha.length?[1,1]:u.alpha.slice():"number"==typeof u.alpha?[u.alpha,u.alpha]:[1,1],f=m.map(function(I){return Math.round(I.index*v)}),b[0]=Math.min(Math.max(b[0],0),1),b[1]=Math.min(Math.max(b[1],0),1);var S=m.map(function(I,O){var z=m[O].index,U=m[O].rgb.slice();return 4===U.length&&U[3]>=0&&U[3]<=1||(U[3]=b[0]+(b[1]-b[0])*z),U}),w=[];for(h=0;h<f.length-1;++h){d=f[h+1]-f[h],c=S[h],y=S[h+1];for(var E=0;E<d;E++){var P=E/d;w.push([Math.round(r(c[0],y[0],P)),Math.round(r(c[1],y[1],P)),Math.round(r(c[2],y[2],P)),r(c[3],y[3],P)])}}return w.push(m[m.length-1].rgb.concat(b[1])),"hex"===x?w=w.map(a):"rgbaString"===x?w=w.map(s):"float"===x&&(w=w.map(n)),w}},3140:function(p,l,t){"use strict";p.exports=function(f,c,y,d){var m=i(c,y,d);if(0===m){var g=r(i(f,c,y)),x=r(i(f,c,d));if(g===x){if(0===g){var v=u(f,c,y);return v===u(f,c,d)?0:v?1:-1}return 0}return 0===x?g>0||u(f,c,d)?-1:1:0===g?x>0||u(f,c,y)?1:-1:r(x-g)}var b=i(f,c,y);return b>0?m>0&&i(f,c,d)>0?1:-1:b<0?m>0||i(f,c,d)>0?1:-1:i(f,c,d)>0||u(f,c,y)?1:-1};var i=t(3250),r=t(8572),n=t(9362),a=t(5382),s=t(8210);function u(f,c,y){var d=n(f[0],-c[0]),m=n(f[1],-c[1]),g=n(y[0],-c[0]),x=n(y[1],-c[1]),v=s(a(d,g),a(m,x));return v[v.length-1]>=0}},8572:function(p){"use strict";p.exports=function(l){return l<0?-1:l>0?1:0}},8507:function(p){p.exports=function(i,r){var n=i.length,a=i.length-r.length;if(a)return a;switch(n){case 0:return 0;case 1:return i[0]-r[0];case 2:return i[0]+i[1]-r[0]-r[1]||l(i[0],i[1])-l(r[0],r[1]);case 3:var s=i[0]+i[1],u=r[0]+r[1];if(a=s+i[2]-(u+r[2]))return a;var f=l(i[0],i[1]),c=l(r[0],r[1]);return l(f,i[2])-l(c,r[2])||l(f+i[2],s)-l(c+r[2],u);case 4:var y=i[0],d=i[1],m=i[2],g=i[3],x=r[0],v=r[1],b=r[2],h=r[3];return y+d+m+g-(x+v+b+h)||l(y,d,m,g)-l(x,v,b,h,x)||l(y+d,y+m,y+g,d+m,d+g,m+g)-l(x+v,x+b,x+h,v+b,v+h,b+h)||l(y+d+m,y+d+g,y+m+g,d+m+g)-l(x+v+b,x+v+h,x+b+h,v+b+h);default:for(var S=i.slice().sort(t),w=r.slice().sort(t),E=0;E<n;++E)if(a=S[E]-w[E])return a;return 0}};var l=Math.min;function t(i,r){return i-r}},3788:function(p,l,t){"use strict";var i=t(8507),r=t(2419);p.exports=function(n,a){return i(n,a)||r(n)-r(a)}},7352:function(p,l,t){"use strict";var i=t(5721),r=t(4750),n=t(2690);p.exports=function(a){var s=a.length;if(0===s)return[];if(1===s)return[[0]];var u=a[0].length;return 0===u?[]:1===u?i(a):2===u?r(a):n(a,u)}},5721:function(p){"use strict";p.exports=function(l){for(var t=0,i=0,r=1;r<l.length;++r)l[r][0]<l[t][0]&&(t=r),l[r][0]>l[i][0]&&(i=r);return t<i?[[t],[i]]:t>i?[[i],[t]]:[[t]]}},4750:function(p,l,t){"use strict";p.exports=function(r){var n=i(r),a=n.length;if(a<=2)return[];for(var s=new Array(a),u=n[a-1],f=0;f<a;++f){var c=n[f];s[f]=[u,c],u=c}return s};var i=t(3090)},2690:function(p,l,t){"use strict";p.exports=function(n,a){try{return i(n,!0)}catch{var s=r(n);if(s.length<=a)return[];var u=function(c,y){for(var d=c.length,m=new Array(d),g=0;g<y.length;++g)m[g]=c[y[g]];var x=y.length;for(g=0;g<d;++g)y.indexOf(g)<0&&(m[x++]=c[g]);return m}(n,s);return function(c,y){for(var d=c.length,m=y.length,g=0;g<d;++g)for(var x=c[g],v=0;v<x.length;++v){var b=x[v];if(b<m)x[v]=y[b];else{b-=m;for(var h=0;h<m;++h)b>=y[h]&&(b+=1);x[v]=b}}return c}(i(u,!0),s)}};var i=t(8954),r=t(3952)},4769:function(p){"use strict";p.exports=function(l,t,i,r,n,a){var s=n-1,u=n*n,f=s*s,c=(1+2*n)*f,y=n*f,d=u*(3-2*n),m=u*s;if(l.length){a||(a=new Array(l.length));for(var g=l.length-1;g>=0;--g)a[g]=c*l[g]+y*t[g]+d*i[g]+m*r[g];return a}return c*l+y*t+d*i+m*r},p.exports.derivative=function(l,t,i,r,n,a){var s=6*n*n-6*n,u=3*n*n-4*n+1,f=-6*n*n+6*n,c=3*n*n-2*n;if(l.length){a||(a=new Array(l.length));for(var y=l.length-1;y>=0;--y)a[y]=s*l[y]+u*t[y]+f*i[y]+c*r[y];return a}return s*l+u*t+f*i[y]+c*r}},7642:function(p,l,t){"use strict";var i=t(8954),r=t(1682);function n(s,u){this.point=s,this.index=u}function a(s,u){for(var f=s.point,c=u.point,y=f.length,d=0;d<y;++d){var m=c[d]-f[d];if(m)return m}return 0}p.exports=function(s,u){var f=s.length;if(0===f)return[];var c=s[0].length;if(c<1)return[];if(1===c)return function(z,U,R){if(1===z)return R?[[-1,0]]:[];var j=U.map(function(ie,te){return[ie[0],te]});j.sort(function(ie,te){return ie[0]-te[0]});for(var Y=new Array(z-1),B=1;B<z;++B)Y[B-1]=[j[B-1][1],j[B][1]];return R&&Y.push([-1,Y[0][1]],[Y[z-1][1],-1]),Y}(f,s,u);for(var y=new Array(f),d=1,m=0;m<f;++m){for(var g=s[m],x=new Array(c+1),v=0,b=0;b<c;++b){var h=g[b];x[b]=h,v+=h*h}x[c]=v,y[m]=new n(x,m),d=Math.max(v,d)}r(y,a),f=y.length;var S=new Array(f+c+1),w=new Array(f+c+1),E=(c+1)*(c+1)*d,P=new Array(c+1);for(m=0;m<=c;++m)P[m]=0;for(P[c]=E,S[0]=P.slice(),w[0]=-1,m=0;m<=c;++m)(x=P.slice())[m]=1,S[m+1]=x,w[m+1]=-1;for(m=0;m<f;++m){var I=y[m];S[m+c+1]=I.point,w[m+c+1]=I.index}var O=i(S,!1);if(O=O.filter(u?function(z){for(var U=0,R=0;R<=c;++R){var j=w[z[R]];if(j<0&&++U>=2)return!1;z[R]=j}return!0}:function(z){for(var U=0;U<=c;++U){var R=w[z[U]];if(R<0)return!1;z[U]=R}return!0}),1&c)for(m=0;m<O.length;++m)x=(I=O[m])[0],I[0]=I[1],I[1]=x;return O}},2361:function(p){var l=!1;if(typeof Float64Array<"u"){var t=new Float64Array(1),i=new Uint32Array(t.buffer);t[0]=1,l=!0,1072693248===i[1]?(p.exports=function(n){return t[0]=n,[i[0],i[1]]},p.exports.pack=function(n,a){return i[0]=n,i[1]=a,t[0]},p.exports.lo=function(n){return t[0]=n,i[0]},p.exports.hi=function(n){return t[0]=n,i[1]}):1072693248===i[0]?(p.exports=function(n){return t[0]=n,[i[1],i[0]]},p.exports.pack=function(n,a){return i[1]=n,i[0]=a,t[0]},p.exports.lo=function(n){return t[0]=n,i[1]},p.exports.hi=function(n){return t[0]=n,i[0]}):l=!1}if(!l){var r=new Buffer(8);p.exports=function(n){return r.writeDoubleLE(n,0,!0),[r.readUInt32LE(0,!0),r.readUInt32LE(4,!0)]},p.exports.pack=function(n,a){return r.writeUInt32LE(n,0,!0),r.writeUInt32LE(a,4,!0),r.readDoubleLE(0,!0)},p.exports.lo=function(n){return r.writeDoubleLE(n,0,!0),r.readUInt32LE(0,!0)},p.exports.hi=function(n){return r.writeDoubleLE(n,0,!0),r.readUInt32LE(4,!0)}}p.exports.sign=function(n){return p.exports.hi(n)>>>31},p.exports.exponent=function(n){return(p.exports.hi(n)<<1>>>21)-1023},p.exports.fraction=function(n){var a=p.exports.lo(n),s=p.exports.hi(n),u=1048575&s;return 2146435072&s&&(u+=1048576),[a,u]},p.exports.denormalized=function(n){return!(2146435072&p.exports.hi(n))}},1338:function(p){"use strict";function l(t,i,r){var n=0|t[r];if(n<=0)return[];var a,s=new Array(n);if(r===t.length-1)for(a=0;a<n;++a)s[a]=i;else for(a=0;a<n;++a)s[a]=l(t,i,r+1);return s}p.exports=function(t,i){switch(void 0===i&&(i=0),typeof t){case"number":if(t>0)return function(r,n){var a,s;for(a=new Array(r),s=0;s<r;++s)a[s]=n;return a}(0|t,i);break;case"object":if("number"==typeof t.length)return l(t,i,0)}return[]}},3134:function(p,l,t){"use strict";p.exports=function(r,n){var a=r.length;if("number"!=typeof n){n=0;for(var s=0;s<a;++s){var u=r[s];n=Math.max(n,u[0],u[1])}n=1+(0|n)}n|=0;var f=new Array(n);for(s=0;s<n;++s)f[s]=[];for(s=0;s<a;++s)f[(u=r[s])[0]].push(u[1]),f[u[1]].push(u[0]);for(var c=0;c<n;++c)i(f[c],function(y,d){return y-d});return f};var i=t(1682)},5033:function(p){"use strict";p.exports=function(l,t,i){var r=t||0,n=i||1;return[[l[12]+l[0],l[13]+l[1],l[14]+l[2],l[15]+l[3]],[l[12]-l[0],l[13]-l[1],l[14]-l[2],l[15]-l[3]],[l[12]+l[4],l[13]+l[5],l[14]+l[6],l[15]+l[7]],[l[12]-l[4],l[13]-l[5],l[14]-l[6],l[15]-l[7]],[r*l[12]+l[8],r*l[13]+l[9],r*l[14]+l[10],r*l[15]+l[11]],[n*l[12]-l[8],n*l[13]-l[9],n*l[14]-l[10],n*l[15]-l[11]]]}},9215:function(p,l,t){"use strict";p.exports=function(f,c,y){switch(arguments.length){case 0:return new a([0],[0],0);case 1:return"number"==typeof f?new a(d=u(f),d,0):new a(f,u(f.length),0);case 2:var d;if("number"==typeof c)return new a(f,d=u(f.length),+c);y=0;case 3:if(f.length!==c.length)throw new Error("state and velocity lengths must match");return new a(f,c,y)}};var i=t(4769),r=t(2478);function n(f,c,y){return Math.min(c,Math.max(f,y))}function a(f,c,y){this.dimension=f.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var d=0;d<this.dimension;++d)this.bounds[0][d]=-1/0,this.bounds[1][d]=1/0;this._state=f.slice().reverse(),this._velocity=c.slice().reverse(),this._time=[y],this._scratch=[f.slice(),f.slice(),f.slice(),f.slice(),f.slice()]}var s=a.prototype;function u(f){for(var c=new Array(f),y=0;y<f;++y)c[y]=0;return c}s.flush=function(f){var c=r.gt(this._time,f)-1;c<=0||(this._time.splice(0,c),this._state.splice(0,c*this.dimension),this._velocity.splice(0,c*this.dimension))},s.curve=function(f){var c=this._time,y=c.length,d=r.le(c,f),m=this._scratch[0],g=this._state,x=this._velocity,v=this.dimension,b=this.bounds;if(d<0)for(var h=v-1,S=0;S<v;++S,--h)m[S]=g[h];else if(d>=y-1){h=g.length-1;var w=f-c[y-1];for(S=0;S<v;++S,--h)m[S]=g[h]+w*x[h]}else{h=v*(d+1)-1;var E=c[d],P=c[d+1]-E||1,I=this._scratch[1],O=this._scratch[2],z=this._scratch[3],U=this._scratch[4],R=!0;for(S=0;S<v;++S,--h)I[S]=g[h],z[S]=x[h]*P,O[S]=g[h+v],U[S]=x[h+v]*P,R=R&&I[S]===O[S]&&z[S]===U[S]&&0===z[S];if(R)for(S=0;S<v;++S)m[S]=I[S];else i(I,z,O,U,(f-E)/P,m)}var j=b[0],Y=b[1];for(S=0;S<v;++S)m[S]=n(j[S],Y[S],m[S]);return m},s.dcurve=function(f){var c=this._time,y=c.length,d=r.le(c,f),m=this._scratch[0],g=this._state,x=this._velocity,v=this.dimension;if(d>=y-1)for(var b=g.length-1,h=0;h<v;++h,--b)m[h]=x[b];else{b=v*(d+1)-1;var S=c[d],w=c[d+1]-S||1,E=this._scratch[1],P=this._scratch[2],I=this._scratch[3],O=this._scratch[4],z=!0;for(h=0;h<v;++h,--b)E[h]=g[b],I[h]=x[b]*w,P[h]=g[b+v],O[h]=x[b+v]*w,z=z&&E[h]===P[h]&&I[h]===O[h]&&0===I[h];if(z)for(h=0;h<v;++h)m[h]=0;else for(i.derivative(E,I,P,O,(f-S)/w,m),h=0;h<v;++h)m[h]/=w}return m},s.lastT=function(){var f=this._time;return f[f.length-1]},s.stable=function(){for(var f=this._velocity,c=f.length,y=this.dimension-1;y>=0;--y)if(f[--c])return!1;return!0},s.jump=function(f){var c=this.lastT(),y=this.dimension;if(!(f<c||arguments.length!==y+1)){var d=this._state,m=this._velocity,g=d.length-this.dimension,x=this.bounds,v=x[0],b=x[1];this._time.push(c,f);for(var h=0;h<2;++h)for(var S=0;S<y;++S)d.push(d[g++]),m.push(0);for(this._time.push(f),S=y;S>0;--S)d.push(n(v[S-1],b[S-1],arguments[S])),m.push(0)}},s.push=function(f){var c=this.lastT(),y=this.dimension;if(!(f<c||arguments.length!==y+1)){var d=this._state,m=this._velocity,g=d.length-this.dimension,x=f-c,v=this.bounds,b=v[0],h=v[1],S=x>1e-6?1/x:0;this._time.push(f);for(var w=y;w>0;--w){var E=n(b[w-1],h[w-1],arguments[w]);d.push(E),m.push((E-d[g++])*S)}}},s.set=function(f){var c=this.dimension;if(!(f<this.lastT()||arguments.length!==c+1)){var y=this._state,d=this._velocity,m=this.bounds,g=m[0],x=m[1];this._time.push(f);for(var v=c;v>0;--v)y.push(n(g[v-1],x[v-1],arguments[v])),d.push(0)}},s.move=function(f){var c=this.lastT(),y=this.dimension;if(!(f<=c||arguments.length!==y+1)){var d=this._state,m=this._velocity,g=d.length-this.dimension,x=this.bounds,v=x[0],b=x[1],h=f-c,S=h>1e-6?1/h:0;this._time.push(f);for(var w=y;w>0;--w){var E=arguments[w];d.push(n(v[w-1],b[w-1],d[g++]+E)),m.push(E*S)}}},s.idle=function(f){var c=this.lastT();if(!(f<c)){var y=this.dimension,d=this._state,m=this._velocity,g=d.length-y,x=this.bounds,v=x[0],b=x[1],h=f-c;this._time.push(f);for(var S=y-1;S>=0;--S)d.push(n(v[S],b[S],d[g]+h*m[g])),m.push(0),g+=1}}},3840:function(p){"use strict";function l(g,x,v,b,h,S){this._color=g,this.key=x,this.value=v,this.left=b,this.right=h,this._count=S}function t(g){return new l(g._color,g.key,g.value,g.left,g.right,g._count)}function i(g,x){return new l(g,x.key,x.value,x.left,x.right,x._count)}function r(g){g._count=1+(g.left?g.left._count:0)+(g.right?g.right._count:0)}function n(g,x){this._compare=g,this.root=x}p.exports=function(g){return new n(g||m,null)};var a=n.prototype;function s(g,x){var v;return x.left&&(v=s(g,x.left))?v:(v=g(x.key,x.value))||(x.right?s(g,x.right):void 0)}function u(g,x,v,b){var h;return x(g,b.key)<=0&&(b.left&&(h=u(g,x,v,b.left))||(h=v(b.key,b.value)))?h:b.right?u(g,x,v,b.right):void 0}function f(g,x,v,b,h){var S,w=v(g,h.key),E=v(x,h.key);return w<=0&&(h.left&&(S=f(g,x,v,b,h.left))||E>0&&(S=b(h.key,h.value)))?S:E>0&&h.right?f(g,x,v,b,h.right):void 0}function c(g,x){this.tree=g,this._stack=x}Object.defineProperty(a,"keys",{get:function(){var g=[];return this.forEach(function(x,v){g.push(x)}),g}}),Object.defineProperty(a,"values",{get:function(){var g=[];return this.forEach(function(x,v){g.push(v)}),g}}),Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}}),a.insert=function(g,x){for(var v=this._compare,b=this.root,h=[],S=[];b;){var w=v(g,b.key);h.push(b),S.push(w),b=w<=0?b.left:b.right}h.push(new l(0,g,x,null,null,1));for(var E=h.length-2;E>=0;--E)b=h[E],h[E]=S[E]<=0?new l(b._color,b.key,b.value,h[E+1],b.right,b._count+1):new l(b._color,b.key,b.value,b.left,h[E+1],b._count+1);for(E=h.length-1;E>1;--E){var P=h[E-1];if(b=h[E],1===P._color||1===b._color)break;var I=h[E-2];if(I.left===P)if(P.left===b){if(!(O=I.right)||0!==O._color){I._color=0,I.left=P.right,P._color=1,P.right=I,h[E-2]=P,h[E-1]=b,r(I),r(P),E>=3&&((z=h[E-3]).left===I?z.left=P:z.right=P);break}P._color=1,I.right=i(1,O),I._color=0,E-=1}else{if(!(O=I.right)||0!==O._color){P.right=b.left,I._color=0,I.left=b.right,b._color=1,b.left=P,b.right=I,h[E-2]=b,h[E-1]=P,r(I),r(P),r(b),E>=3&&((z=h[E-3]).left===I?z.left=b:z.right=b);break}P._color=1,I.right=i(1,O),I._color=0,E-=1}else if(P.right===b){if(!(O=I.left)||0!==O._color){I._color=0,I.right=P.left,P._color=1,P.left=I,h[E-2]=P,h[E-1]=b,r(I),r(P),E>=3&&((z=h[E-3]).right===I?z.right=P:z.left=P);break}P._color=1,I.left=i(1,O),I._color=0,E-=1}else{var O;if(!(O=I.left)||0!==O._color){var z;P.left=b.right,I._color=0,I.right=b.left,b._color=1,b.right=P,b.left=I,h[E-2]=b,h[E-1]=P,r(I),r(P),r(b),E>=3&&((z=h[E-3]).right===I?z.right=b:z.left=b);break}P._color=1,I.left=i(1,O),I._color=0,E-=1}}return h[0]._color=1,new n(v,h[0])},a.forEach=function(g,x,v){if(this.root)switch(arguments.length){case 1:return s(g,this.root);case 2:return u(x,this._compare,g,this.root);case 3:return this._compare(x,v)>=0?void 0:f(x,v,this._compare,g,this.root)}},Object.defineProperty(a,"begin",{get:function(){for(var g=[],x=this.root;x;)g.push(x),x=x.left;return new c(this,g)}}),Object.defineProperty(a,"end",{get:function(){for(var g=[],x=this.root;x;)g.push(x),x=x.right;return new c(this,g)}}),a.at=function(g){if(g<0)return new c(this,[]);for(var x=this.root,v=[];;){if(v.push(x),x.left){if(g<x.left._count){x=x.left;continue}g-=x.left._count}if(!g)return new c(this,v);if(g-=1,!x.right||g>=x.right._count)break;x=x.right}return new c(this,[])},a.ge=function(g){for(var x=this._compare,v=this.root,b=[],h=0;v;){var S=x(g,v.key);b.push(v),S<=0&&(h=b.length),v=S<=0?v.left:v.right}return b.length=h,new c(this,b)},a.gt=function(g){for(var x=this._compare,v=this.root,b=[],h=0;v;){var S=x(g,v.key);b.push(v),S<0&&(h=b.length),v=S<0?v.left:v.right}return b.length=h,new c(this,b)},a.lt=function(g){for(var x=this._compare,v=this.root,b=[],h=0;v;){var S=x(g,v.key);b.push(v),S>0&&(h=b.length),v=S<=0?v.left:v.right}return b.length=h,new c(this,b)},a.le=function(g){for(var x=this._compare,v=this.root,b=[],h=0;v;){var S=x(g,v.key);b.push(v),S>=0&&(h=b.length),v=S<0?v.left:v.right}return b.length=h,new c(this,b)},a.find=function(g){for(var x=this._compare,v=this.root,b=[];v;){var h=x(g,v.key);if(b.push(v),0===h)return new c(this,b);v=h<=0?v.left:v.right}return new c(this,[])},a.remove=function(g){var x=this.find(g);return x?x.remove():this},a.get=function(g){for(var x=this._compare,v=this.root;v;){var b=x(g,v.key);if(0===b)return v.value;v=b<=0?v.left:v.right}};var y=c.prototype;function d(g,x){g.key=x.key,g.value=x.value,g.left=x.left,g.right=x.right,g._color=x._color,g._count=x._count}function m(g,x){return g<x?-1:g>x?1:0}Object.defineProperty(y,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(y,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),y.clone=function(){return new c(this.tree,this._stack.slice())},y.remove=function(){var g=this._stack;if(0===g.length)return this.tree;var x=new Array(g.length),v=g[g.length-1];x[x.length-1]=new l(v._color,v.key,v.value,v.left,v.right,v._count);for(var b=g.length-2;b>=0;--b)x[b]=(v=g[b]).left===g[b+1]?new l(v._color,v.key,v.value,x[b+1],v.right,v._count):new l(v._color,v.key,v.value,v.left,x[b+1],v._count);if((v=x[x.length-1]).left&&v.right){var h=x.length;for(v=v.left;v.right;)x.push(v),v=v.right;var S=x[h-1];for(x.push(new l(v._color,S.key,S.value,v.left,v.right,v._count)),x[h-1].key=v.key,x[h-1].value=v.value,b=x.length-2;b>=h;--b)x[b]=new l((v=x[b])._color,v.key,v.value,v.left,x[b+1],v._count);x[h-1].left=x[h]}if(0===(v=x[x.length-1])._color){var w=x[x.length-2];for(w.left===v?w.left=null:w.right===v&&(w.right=null),x.pop(),b=0;b<x.length;++b)x[b]._count--;return new n(this.tree._compare,x[0])}if(v.left||v.right){for(v.left?d(v,v.left):v.right&&d(v,v.right),v._color=1,b=0;b<x.length-1;++b)x[b]._count--;return new n(this.tree._compare,x[0])}if(1===x.length)return new n(this.tree._compare,null);for(b=0;b<x.length;++b)x[b]._count--;var E=x[x.length-2];return function(P){for(var I,O,z,U,R=P.length-1;R>=0;--R){if(I=P[R],0===R)return void(I._color=1);if((O=P[R-1]).left===I){if((z=O.right).right&&0===z.right._color)return U=(z=O.right=t(z)).right=t(z.right),O.right=z.left,z.left=O,z.right=U,z._color=O._color,I._color=1,O._color=1,U._color=1,r(O),r(z),R>1&&((j=P[R-2]).left===O?j.left=z:j.right=z),void(P[R-1]=z);if(z.left&&0===z.left._color)return U=(z=O.right=t(z)).left=t(z.left),O.right=U.left,z.left=U.right,U.left=O,U.right=z,U._color=O._color,O._color=1,z._color=1,I._color=1,r(O),r(z),r(U),R>1&&((j=P[R-2]).left===O?j.left=U:j.right=U),void(P[R-1]=U);if(1===z._color){if(0===O._color)return O._color=1,void(O.right=i(0,z));O.right=i(0,z);continue}z=t(z),O.right=z.left,z.left=O,z._color=O._color,O._color=0,r(O),r(z),R>1&&((j=P[R-2]).left===O?j.left=z:j.right=z),P[R-1]=z,P[R]=O,R+1<P.length?P[R+1]=I:P.push(I),R+=2}else{if((z=O.left).left&&0===z.left._color)return U=(z=O.left=t(z)).left=t(z.left),O.left=z.right,z.right=O,z.left=U,z._color=O._color,I._color=1,O._color=1,U._color=1,r(O),r(z),R>1&&((j=P[R-2]).right===O?j.right=z:j.left=z),void(P[R-1]=z);if(z.right&&0===z.right._color)return U=(z=O.left=t(z)).right=t(z.right),O.left=U.right,z.right=U.left,U.right=O,U.left=z,U._color=O._color,O._color=1,z._color=1,I._color=1,r(O),r(z),r(U),R>1&&((j=P[R-2]).right===O?j.right=U:j.left=U),void(P[R-1]=U);if(1===z._color){if(0===O._color)return O._color=1,void(O.left=i(0,z));O.left=i(0,z);continue}var j;z=t(z),O.left=z.right,z.right=O,z._color=O._color,O._color=0,r(O),r(z),R>1&&((j=P[R-2]).right===O?j.right=z:j.left=z),P[R-1]=z,P[R]=O,R+1<P.length?P[R+1]=I:P.push(I),R+=2}}}(x),E.left===v?E.left=null:E.right=null,new n(this.tree._compare,x[0])},Object.defineProperty(y,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(y,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(y,"index",{get:function(){var g=0,x=this._stack;if(0===x.length){var v=this.tree.root;return v?v._count:0}x[x.length-1].left&&(g=x[x.length-1].left._count);for(var b=x.length-2;b>=0;--b)x[b+1]===x[b].right&&(++g,x[b].left&&(g+=x[b].left._count));return g},enumerable:!0}),y.next=function(){var g=this._stack;if(0!==g.length){var x=g[g.length-1];if(x.right)for(x=x.right;x;)g.push(x),x=x.left;else for(g.pop();g.length>0&&g[g.length-1].right===x;)x=g[g.length-1],g.pop()}},Object.defineProperty(y,"hasNext",{get:function(){var g=this._stack;if(0===g.length)return!1;if(g[g.length-1].right)return!0;for(var x=g.length-1;x>0;--x)if(g[x-1].left===g[x])return!0;return!1}}),y.update=function(g){var x=this._stack;if(0===x.length)throw new Error("Can't update empty node!");var v=new Array(x.length),b=x[x.length-1];v[v.length-1]=new l(b._color,b.key,g,b.left,b.right,b._count);for(var h=x.length-2;h>=0;--h)v[h]=(b=x[h]).left===x[h+1]?new l(b._color,b.key,b.value,v[h+1],b.right,b._count):new l(b._color,b.key,b.value,b.left,v[h+1],b._count);return new n(this.tree._compare,v[0])},y.prev=function(){var g=this._stack;if(0!==g.length){var x=g[g.length-1];if(x.left)for(x=x.left;x;)g.push(x),x=x.right;else for(g.pop();g.length>0&&g[g.length-1].left===x;)x=g[g.length-1],g.pop()}},Object.defineProperty(y,"hasPrev",{get:function(){var g=this._stack;if(0===g.length)return!1;if(g[g.length-1].left)return!0;for(var x=g.length-1;x>0;--x)if(g[x-1].right===g[x])return!0;return!1}})},3837:function(p,l,t){"use strict";p.exports=function(I,O){var z=new m(I);return z.update(O),z};var i=t(4935),r=t(501),n=t(5304),a=t(6429),s=t(6444),u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),f=ArrayBuffer,c=DataView;function y(I){return Array.isArray(I)||f.isView(O=I)&&!(O instanceof c);var O}function d(I,O){return I[0]=O[0],I[1]=O[1],I[2]=O[2],I}function m(I){this.gl=I,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickFontStyle=["normal","normal","normal"],this.tickFontWeight=["normal","normal","normal"],this.tickFontVariant=["normal","normal","normal"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["sans-serif","sans-serif","sans-serif"],this.labelFontStyle=["normal","normal","normal"],this.labelFontWeight=["normal","normal","normal"],this.labelFontVariant=["normal","normal","normal"],this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=n(I)}var g=m.prototype;function x(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}g.update=function(I){function O(X,ae,ce){if(ce in I){var le,pe=I[ce],we=this[ce];this[ce]=le=(X?y(pe)&&y(pe[0]):y(pe))?[ae(pe[0]),ae(pe[1]),ae(pe[2])]:[ae(pe),ae(pe),ae(pe)];for(var Te=0;Te<3;++Te)if(le[Te]!==we[Te])return!0}return!1}I=I||{};var z,U=O.bind(this,!1,Number),R=O.bind(this,!1,Boolean),j=O.bind(this,!1,String),Y=O.bind(this,!0,function(X){if(y(X)){if(3===X.length)return[+X[0],+X[1],+X[2],1];if(4===X.length)return[+X[0],+X[1],+X[2],+X[3]]}return[0,0,0,1]}),B=!1,V=!1;if("bounds"in I)for(var q=I.bounds,ie=0;ie<2;++ie)for(var te=0;te<3;++te)q[ie][te]!==this.bounds[ie][te]&&(V=!0),this.bounds[ie][te]=q[ie][te];if("ticks"in I)for(z=I.ticks,B=!0,this.autoTicks=!1,ie=0;ie<3;++ie)this.tickSpacing[ie]=0;else U("tickSpacing")&&(this.autoTicks=!0,V=!0);if(this._firstInit&&("ticks"in I||"tickSpacing"in I||(this.autoTicks=!0),V=!0,B=!0,this._firstInit=!1),V&&this.autoTicks&&(z=s.create(this.bounds,this.tickSpacing),B=!0),B){for(ie=0;ie<3;++ie)z[ie].sort(function(X,ae){return X.x-ae.x});s.equal(z,this.ticks)?B=!1:this.ticks=z}R("tickEnable"),j("tickFont")&&(B=!0),j("tickFontStyle")&&(B=!0),j("tickFontWeight")&&(B=!0),j("tickFontVariant")&&(B=!0),U("tickSize"),U("tickAngle"),U("tickPad"),Y("tickColor");var ee=j("labels");j("labelFont")&&(ee=!0),j("labelFontStyle")&&(ee=!0),j("labelFontWeight")&&(ee=!0),j("labelFontVariant")&&(ee=!0),R("labelEnable"),U("labelSize"),U("labelPad"),Y("labelColor"),R("lineEnable"),R("lineMirror"),U("lineWidth"),Y("lineColor"),R("lineTickEnable"),R("lineTickMirror"),U("lineTickLength"),U("lineTickWidth"),Y("lineTickColor"),R("gridEnable"),U("gridWidth"),Y("gridColor"),R("zeroEnable"),Y("zeroLineColor"),U("zeroLineWidth"),R("backgroundEnable"),Y("backgroundColor");var $=[{family:this.labelFont[0],style:this.labelFontStyle[0],weight:this.labelFontWeight[0],variant:this.labelFontVariant[0]},{family:this.labelFont[1],style:this.labelFontStyle[1],weight:this.labelFontWeight[1],variant:this.labelFontVariant[1]},{family:this.labelFont[2],style:this.labelFontStyle[2],weight:this.labelFontWeight[2],variant:this.labelFontVariant[2]}],J=[{family:this.tickFont[0],style:this.tickFontStyle[0],weight:this.tickFontWeight[0],variant:this.tickFontVariant[0]},{family:this.tickFont[1],style:this.tickFontStyle[1],weight:this.tickFontWeight[1],variant:this.tickFontVariant[1]},{family:this.tickFont[2],style:this.tickFontStyle[2],weight:this.tickFontWeight[2],variant:this.tickFontVariant[2]}];this._text?this._text&&(ee||B)&&this._text.update(this.bounds,this.labels,$,this.ticks,J):this._text=i(this.gl,this.bounds,this.labels,$,this.ticks,J),this._lines&&B&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=r(this.gl,this.bounds,this.ticks))};var v=[new x,new x,new x];function b(I,O,z,U,R){for(var j=I.primalOffset,Y=I.primalMinor,B=I.mirrorOffset,V=I.mirrorMinor,q=U[O],ie=0;ie<3;++ie)if(O!==ie){var te=j,ee=B,$=Y,J=V;q&1<<ie&&(te=B,ee=j,$=V,J=Y),te[ie]=z[0][ie],ee[ie]=z[1][ie],R[ie]>0?($[ie]=-1,J[ie]=0):($[ie]=0,J[ie]=1)}}var h=[0,0,0],S={model:u,view:u,projection:u,_ortho:!1};g.isOpaque=function(){return!0},g.isTransparent=function(){return!1},g.drawTransparent=function(I){};var w=[0,0,0],E=[0,0,0],P=[0,0,0];g.draw=function(I){for(var O=this.gl,z=(I=I||S).model||u,U=I.view||u,R=I.projection||u,j=this.bounds,Y=I._ortho||!1,B=a(z,U,R,j,Y),V=B.cubeEdges,q=B.axis,J=(Y?2:1)*this.pixelRatio*(R[3]*U[12]+R[7]*U[13]+R[11]*U[14]+R[15]*U[15])/O.drawingBufferHeight,X=0;X<3;++X)this.lastCubeProps.cubeEdges[X]=V[X],this.lastCubeProps.axis[X]=q[X];var ae=v;for(X=0;X<3;++X)b(v[X],X,this.bounds,V,q);O=this.gl;var ce,le,pe,Fe,Be,me,Me,Le,Ne,Re,He,Ze,we=h;for(X=0;X<3;++X)we[X]=this.backgroundEnable[X]?q[X]:0;for(this._background.draw(z,U,R,j,we,this.backgroundColor),this._lines.bind(z,U,R,this),X=0;X<3;++X){var Te=[0,0,0];Te[X]=q[X]>0?j[1][X]:j[0][X];for(var ye=0;ye<2;++ye){var ve=(X+1+ye)%3,xe=(X+1+(1^ye))%3;this.gridEnable[ve]&&this._lines.drawGrid(ve,xe,this.bounds,Te,this.gridColor[ve],this.gridWidth[ve]*this.pixelRatio)}for(ye=0;ye<2;++ye)ve=(X+1+ye)%3,this.zeroEnable[xe=(X+1+(1^ye))%3]&&Math.min(j[0][xe],j[1][xe])<=0&&Math.max(j[0][xe],j[1][xe])>=0&&this._lines.drawZero(ve,xe,this.bounds,Te,this.zeroLineColor[xe],this.zeroLineWidth[xe]*this.pixelRatio)}for(X=0;X<3;++X){this.lineEnable[X]&&this._lines.drawAxisLine(X,this.bounds,ae[X].primalOffset,this.lineColor[X],this.lineWidth[X]*this.pixelRatio),this.lineMirror[X]&&this._lines.drawAxisLine(X,this.bounds,ae[X].mirrorOffset,this.lineColor[X],this.lineWidth[X]*this.pixelRatio);var Ce=d(w,ae[X].primalMinor),Oe=d(E,ae[X].mirrorMinor),be=this.lineTickLength;for(ye=0;ye<3;++ye){var ue=J/z[5*ye];Ce[ye]*=be[ye]*ue,Oe[ye]*=be[ye]*ue}this.lineTickEnable[X]&&this._lines.drawAxisTicks(X,ae[X].primalOffset,Ce,this.lineTickColor[X],this.lineTickWidth[X]*this.pixelRatio),this.lineTickMirror[X]&&this._lines.drawAxisTicks(X,ae[X].mirrorOffset,Oe,this.lineTickColor[X],this.lineTickWidth[X]*this.pixelRatio)}function se(Fe){(pe=[0,0,0])[Fe]=1}for(this._lines.unbind(),this._text.bind(z,U,R,this.pixelRatio),X=0;X<3;++X){var Ie=ae[X].primalMinor,ke=ae[X].mirrorMinor,Se=d(P,ae[X].primalOffset);for(ye=0;ye<3;++ye)this.lineTickEnable[X]&&(Se[ye]+=J*Ie[ye]*Math.max(this.lineTickLength[ye],0)/z[5*ye]);var Pe=[0,0,0];if(Pe[X]=1,this.tickEnable[X]){for(-3600===this.tickAngle[X]?(this.tickAngle[X]=0,this.tickAlign[X]="auto"):this.tickAlign[X]=-1,ce[0]="auto"===(ce=[this.tickAlign[X],.5,le=1])[0]?0:parseInt(""+ce[0]),pe=[0,0,0],Me=void 0,Le=void 0,Ne=void 0,Re=void 0,He=void 0,Ze=void 0,Re=(Be=Ie)[Le=((Fe=X)+2)%3],He=(me=ke)[Me=(Fe+1)%3],Ze=me[Le],(Ne=Be[Me])>0&&Ze>0||Ne>0&&Ze<0||Ne<0&&Ze>0||Ne<0&&Ze<0?se(Me):(Re>0&&He>0||Re>0&&He<0||Re<0&&He>0||Re<0&&He<0)&&se(Le),ye=0;ye<3;++ye)Se[ye]+=J*Ie[ye]*this.tickPad[ye]/z[5*ye];this._text.drawTicks(X,this.tickSize[X],this.tickAngle[X],Se,this.tickColor[X],Pe,pe,ce)}if(this.labelEnable[X]){for(le=0,pe=[0,0,0],this.labels[X].length>4&&(se(X),le=1),ce[0]="auto"===(ce=[this.labelAlign[X],.5,le])[0]?0:parseInt(""+ce[0]),ye=0;ye<3;++ye)Se[ye]+=J*Ie[ye]*this.labelPad[ye]/z[5*ye];Se[X]+=.5*(j[0][X]+j[1][X]),this._text.drawLabel(X,this.labelSize[X],this.labelAngle[X],Se,this.labelColor[X],[0,0,0],pe,ce)}}this._text.unbind()},g.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},5304:function(p,l,t){"use strict";p.exports=function(u){for(var f=[],c=[],y=0,d=0;d<3;++d)for(var m=(d+1)%3,g=(d+2)%3,x=[0,0,0],v=[0,0,0],b=-1;b<=1;b+=2){c.push(y,y+2,y+1,y+1,y+2,y+3),x[d]=b,v[d]=b;for(var h=-1;h<=1;h+=2){x[m]=h;for(var S=-1;S<=1;S+=2)x[g]=S,f.push(x[0],x[1],x[2],v[0],v[1],v[2]),y+=1}var w=m;m=g,g=w}var E=i(u,new Float32Array(f)),P=i(u,new Uint16Array(c),u.ELEMENT_ARRAY_BUFFER),I=r(u,[{buffer:E,type:u.FLOAT,size:3,offset:0,stride:24},{buffer:E,type:u.FLOAT,size:3,offset:12,stride:24}],P),O=n(u);return O.attributes.position.location=0,O.attributes.normal.location=1,new a(u,E,I,O)};var i=t(2762),r=t(8116),n=t(1879).bg;function a(u,f,c,y){this.gl=u,this.buffer=f,this.vao=c,this.shader=y}var s=a.prototype;s.draw=function(u,f,c,y,d,m){for(var g=!1,x=0;x<3;++x)g=g||d[x];if(g){var v=this.gl;v.enable(v.POLYGON_OFFSET_FILL),v.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:u,view:f,projection:c,bounds:y,enable:d,colors:m},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),v.disable(v.POLYGON_OFFSET_FILL)}},s.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},6429:function(p,l,t){"use strict";p.exports=function(h,S,w,E,P){r(s,S,h),r(s,w,s);for(var I=0,O=0;O<2;++O){c[2]=E[O][2];for(var z=0;z<2;++z){c[1]=E[z][1];for(var U=0;U<2;++U)c[0]=E[U][0],d(u[I],c,s),I+=1}}var R=-1;for(O=0;O<8;++O){for(var j=u[O][3],Y=0;Y<3;++Y)f[O][Y]=u[O][Y]/j;P&&(f[O][2]*=-1),j<0&&(R<0||f[O][2]<f[R][2])&&(R=O)}if(R<0){R=0;for(var B=0;B<3;++B){for(var V=(B+2)%3,q=(B+1)%3,ie=-1,te=-1,ee=0;ee<2;++ee){var $=(X=ee<<B)+(ee<<V)+(1-ee<<q),J=X+(1-ee<<V)+(ee<<q);a(f[X],f[$],f[J],y)<0||(ee?ie=1:te=1)}if(ie<0||te<0)te>ie&&(R|=1<<B);else{for(ee=0;ee<2;++ee){$=(X=ee<<B)+(ee<<V)+(1-ee<<q);var X,ae=g([u[X],u[$],u[J=X+(1-ee<<V)+(ee<<q)],u[X+(1<<V)+(1<<q)]]);ee?ie=ae:te=ae}te>ie&&(R|=1<<B)}}}var ce=7^R,le=-1;for(O=0;O<8;++O)O!==R&&O!==ce&&(le<0||f[le][1]>f[O][1])&&(le=O);var pe=-1;for(O=0;O<3;++O)(Te=le^1<<O)!==R&&Te!==ce&&(pe<0&&(pe=Te),(q=f[Te])[0]<f[pe][0]&&(pe=Te));var we=-1;for(O=0;O<3;++O){var Te;(Te=le^1<<O)!==R&&Te!==ce&&Te!==pe&&(we<0&&(we=Te),(q=f[Te])[0]>f[we][0]&&(we=Te))}var ye=x;ye[0]=ye[1]=ye[2]=0,ye[i.log2(pe^le)]=le&pe,ye[i.log2(le^we)]=le&we;var ve=7^we;ve===R||ve===ce?ye[i.log2(we^(ve=7^pe))]=ve&we:ye[i.log2(pe^ve)]=ve&pe;var xe=v,Ce=R;for(B=0;B<3;++B)xe[B]=Ce&1<<B?-1:1;return b};var i=t(8828),r=t(6760),n=t(5202),a=t(3250),s=new Array(16),u=new Array(8),f=new Array(8),c=new Array(3),y=[0,0,0];function d(h,S,w){for(var E=0;E<4;++E){h[E]=w[12+E];for(var P=0;P<3;++P)h[E]+=S[P]*w[4*P+E]}}!function(){for(var h=0;h<8;++h)u[h]=[1,1,1,1],f[h]=[1,1,1]}();var m=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function g(h){for(var S=0;S<m.length;++S)if((h=n.positive(h,m[S])).length<3)return 0;var w=h[0],E=w[0]/w[3],P=w[1]/w[3],I=0;for(S=1;S+1<h.length;++S){var O=h[S],z=h[S+1];I+=Math.abs((O[0]/O[3]-E)*(z[1]/z[3]-P)-(O[1]/O[3]-P)*(z[0]/z[3]-E))}return I}var x=[1,1,1],v=[0,0,0],b={cubeEdges:x,axis:v}},501:function(p,l,t){"use strict";p.exports=function(x,v,b){var h=[],S=[0,0,0],w=[0,0,0],E=[0,0,0],P=[0,0,0];h.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var I=0;I<3;++I){for(var O=h.length/3|0,z=0;z<b[I].length;++z){var U=+b[I][z].x;h.push(U,0,1,U,1,1,U,0,-1,U,0,-1,U,1,1,U,1,-1)}var R=h.length/3|0;S[I]=O,w[I]=R-O,O=h.length/3|0;for(var j=0;j<b[I].length;++j)h.push(U=+b[I][j].x,0,1,U,1,1,U,0,-1,U,0,-1,U,1,1,U,1,-1);R=h.length/3|0,E[I]=O,P[I]=R-O}var Y=i(x,new Float32Array(h)),B=r(x,[{buffer:Y,type:x.FLOAT,size:3,stride:0,offset:0}]),V=n(x);return V.attributes.position.location=0,new m(x,Y,B,V,w,S,P,E)};var i=t(2762),r=t(8116),n=t(1879).n,a=[0,0,0],s=[0,0,0],u=[0,0,0],f=[0,0,0],c=[1,1];function y(x){return x[0]=x[1]=x[2]=0,x}function d(x,v){return x[0]=v[0],x[1]=v[1],x[2]=v[2],x}function m(x,v,b,h,S,w,E,P){this.gl=x,this.vertBuffer=v,this.vao=b,this.shader=h,this.tickCount=S,this.tickOffset=w,this.gridCount=E,this.gridOffset=P}var g=m.prototype;g.bind=function(x,v,b){this.shader.bind(),this.shader.uniforms.model=x,this.shader.uniforms.view=v,this.shader.uniforms.projection=b,c[0]=this.gl.drawingBufferWidth,c[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=c,this.vao.bind()},g.unbind=function(){this.vao.unbind()},g.drawAxisLine=function(x,v,b,h,S){var w=y(s);this.shader.uniforms.majorAxis=s,w[x]=v[1][x]-v[0][x],this.shader.uniforms.minorAxis=w;var E,P=d(f,b);P[x]+=v[0][x],this.shader.uniforms.offset=P,this.shader.uniforms.lineWidth=S,this.shader.uniforms.color=h,(E=y(u))[(x+2)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6),(E=y(u))[(x+1)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6)},g.drawAxisTicks=function(x,v,b,h,S){if(this.tickCount[x]){var w=y(a);w[x]=1,this.shader.uniforms.majorAxis=w,this.shader.uniforms.offset=v,this.shader.uniforms.minorAxis=b,this.shader.uniforms.color=h,this.shader.uniforms.lineWidth=S;var E=y(u);E[x]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,this.tickCount[x],this.tickOffset[x])}},g.drawGrid=function(x,v,b,h,S,w){if(this.gridCount[x]){var E=y(s);E[v]=b[1][v]-b[0][v],this.shader.uniforms.minorAxis=E;var P=d(f,h);P[v]+=b[0][v],this.shader.uniforms.offset=P;var I=y(a);I[x]=1,this.shader.uniforms.majorAxis=I;var O=y(u);O[x]=1,this.shader.uniforms.screenAxis=O,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,this.gridCount[x],this.gridOffset[x])}},g.drawZero=function(x,v,b,h,S,w){var E=y(s);this.shader.uniforms.majorAxis=E,E[x]=b[1][x]-b[0][x],this.shader.uniforms.minorAxis=E;var P=d(f,h);P[x]+=b[0][x],this.shader.uniforms.offset=P;var I=y(u);I[v]=1,this.shader.uniforms.screenAxis=I,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,6)},g.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1879:function(p,l,t){"use strict";var i=t(3236),r=t(9405),n=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * (view * (model * vec4(p, 1.0)));\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),a=i(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);l.n=function(y){return r(y,n,a,null,[{name:"position",type:"vec3"}])};var s=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * (view * (model * vec4(p, 1.0)));\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}\n"]),u=i(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);l.Q=function(y){return r(y,s,u,null,[{name:"position",type:"vec3"}])};var f=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * (view * (model * vec4(nPosition, 1.0)));\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}\n"]),c=i(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);l.bg=function(y){return r(y,f,c,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},4935:function(p,l,t){"use strict";p.exports=function(d,m,g,x,v,b){var h=i(d),S=r(d,[{buffer:h,size:3}]),w=a(d);w.attributes.position.location=0;var E=new f(d,w,h,S);return E.update(m,g,x,v,b),E};var i=t(2762),r=t(8116),n=t(4359),a=t(1879).Q,s=window||M.global||{},u=s.__TEXT_CACHE||{};function f(d,m,g,x){this.gl=d,this.shader=m,this.buffer=g,this.vao=x,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}s.__TEXT_CACHE={};var c=f.prototype,y=[0,0];c.bind=function(d,m,g,x){this.vao.bind(),this.shader.bind();var v=this.shader.uniforms;v.model=d,v.view=m,v.projection=g,v.pixelScale=x,y[0]=this.gl.drawingBufferWidth,y[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=y},c.unbind=function(){this.vao.unbind()},c.update=function(d,m,g,x,v){var b=[];function h(R,j,Y,B,V,q){var ie=[Y.style,Y.weight,Y.variant,Y.family].join("_"),te=u[ie];te||(te=u[ie]={});var ee=te[j];ee||(ee=te[j]=function(Te,ye){try{return n(Te,ye)}catch(ve){return console.warn('error vectorizing text:"'+Te+'" error:',ve),{cells:[],positions:[]}}}(j,{triangles:!0,font:Y.family,fontStyle:Y.style,fontWeight:Y.weight,fontVariant:Y.variant,textAlign:"center",textBaseline:"middle",lineSpacing:V,styletags:q}));for(var $=(B||12)/12,J=ee.positions,X=ee.cells,ae=0,ce=X.length;ae<ce;++ae)for(var le=X[ae],pe=2;pe>=0;--pe){var we=J[le[pe]];b.push($*we[0],-$*we[1],R)}}for(var S=[0,0,0],w=[0,0,0],E=[0,0,0],P=[0,0,0],I={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},O=0;O<3;++O){E[O]=b.length/3|0,h(.5*(d[0][O]+d[1][O]),m[O],g[O],12,1.25,I),P[O]=(b.length/3|0)-E[O],S[O]=b.length/3|0;for(var z=0;z<x[O].length;++z)x[O][z].text&&h(x[O][z].x,x[O][z].text,{family:x[O][z].font||v[O].family,style:v[O].fontStyle||v[O].style,weight:v[O].fontWeight||v[O].weight,variant:v[O].fontVariant||v[O].variant},x[O][z].fontSize||12,1.25,I);w[O]=(b.length/3|0)-S[O]}this.buffer.update(b),this.tickOffset=S,this.tickCount=w,this.labelOffset=E,this.labelCount=P},c.drawTicks=function(d,m,g,x,v,b,h,S){this.tickCount[d]&&(this.shader.uniforms.axis=b,this.shader.uniforms.color=v,this.shader.uniforms.angle=g,this.shader.uniforms.scale=m,this.shader.uniforms.offset=x,this.shader.uniforms.alignDir=h,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.tickCount[d],this.tickOffset[d]))},c.drawLabel=function(d,m,g,x,v,b,h,S){this.labelCount[d]&&(this.shader.uniforms.axis=b,this.shader.uniforms.color=v,this.shader.uniforms.angle=g,this.shader.uniforms.scale=m,this.shader.uniforms.offset=x,this.shader.uniforms.alignDir=h,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.labelCount[d],this.labelOffset[d]))},c.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},6444:function(p,l){"use strict";function t(i,r){var n=i+"",a=n.indexOf("."),s=0;a>=0&&(s=n.length-a-1);var u=Math.pow(10,s),f=Math.round(i*r*u),c=f+"";if(c.indexOf("e")>=0)return c;var y=f/u,d=f%u;f<0?(y=0|-Math.ceil(y),d=0|-d):(y=0|Math.floor(y),d|=0);var m=""+y;if(f<0&&(m="-"+m),s){for(var g=""+d;g.length<s;)g="0"+g;return m+"."+g}return m}l.create=function(i,r){for(var n=[],a=0;a<3;++a){for(var s=[],u=0;u*r[a]<=i[1][a];++u)s.push({x:u*r[a],text:t(r[a],u)});for(u=-1;u*r[a]>=i[0][a];--u)s.push({x:u*r[a],text:t(r[a],u)});n.push(s)}return n},l.equal=function(i,r){for(var n=0;n<3;++n){if(i[n].length!==r[n].length)return!1;for(var a=0;a<i[n].length;++a){var s=i[n][a],u=r[n][a];if(s.x!==u.x||s.text!==u.text||s.font!==u.font||s.fontColor!==u.fontColor||s.fontSize!==u.fontSize||s.dx!==u.dx||s.dy!==u.dy)return!1}}return!0}},5445:function(p,l,t){"use strict";p.exports=function(b,h,S,w,E){var P=h.model||f,I=h.view||f,O=h.projection||f,z=h._ortho||!1,U=b.bounds,R=(E=E||n(P,I,O,U,z)).axis;a(c,I,P),a(c,O,c);for(var j=x,Y=0;Y<3;++Y)j[Y].lo=1/0,j[Y].hi=-1/0,j[Y].pixelsPerDataUnit=1/0;var B=i(s(c,c));s(c,c);for(var V=0;V<3;++V){var q=(V+1)%3,ie=(V+2)%3,te=v;e:for(Y=0;Y<2;++Y){var ee=[];if(R[V]<0!=!!Y){te[V]=U[Y][V];for(var $=0;$<2;++$){te[q]=U[$^Y][q];for(var J=0;J<2;++J)te[ie]=U[J^$^Y][ie],ee.push(te.slice())}var X=z?5:4;for($=X;$===X;++$){if(0===ee.length)continue e;ee=r.positive(ee,B[$])}for($=0;$<ee.length;++$){var ae=g(v,c,ie=ee[$],S,w);for(J=0;J<3;++J)j[J].lo=Math.min(j[J].lo,ie[J]),j[J].hi=Math.max(j[J].hi,ie[J]),J!==V&&(j[J].pixelsPerDataUnit=Math.min(j[J].pixelsPerDataUnit,Math.abs(ae[J])))}}}}return j};var i=t(5033),r=t(5202),n=t(6429),a=t(6760),s=t(5665),u=t(5352),f=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),c=new Float32Array(16);function y(b,h,S){this.lo=b,this.hi=h,this.pixelsPerDataUnit=S}var d=[0,0,0,1],m=[0,0,0,1];function g(b,h,S,w,E){for(var P=0;P<3;++P){for(var I=d,O=m,z=0;z<3;++z)O[z]=I[z]=S[z];O[3]=I[3]=1,O[P]+=1,u(O,O,h),O[3]<0&&(b[P]=1/0),I[P]-=1,u(I,I,h),I[3]<0&&(b[P]=1/0);var U=(I[0]/I[3]-O[0]/O[3])*w,R=(I[1]/I[3]-O[1]/O[3])*E;b[P]=.25*Math.sqrt(U*U+R*R)}return b}var x=[new y(1/0,-1/0,1/0),new y(1/0,-1/0,1/0),new y(1/0,-1/0,1/0)],v=[0,0,0]},2762:function(p,l,t){"use strict";var i=t(1888),r=t(5298),n=t(9618),a=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function s(y,d,m,g,x){this.gl=y,this.type=d,this.handle=m,this.length=g,this.usage=x}var u=s.prototype;function f(y,d,m,g,x,v){var b=x.length*x.BYTES_PER_ELEMENT;if(v<0)return y.bufferData(d,x,g),b;if(b+v>m)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return y.bufferSubData(d,v,x),m}u.bind=function(){this.gl.bindBuffer(this.type,this.handle)},u.unbind=function(){this.gl.bindBuffer(this.type,null)},u.dispose=function(){this.gl.deleteBuffer(this.handle)},u.update=function(y,d){if("number"!=typeof d&&(d=-1),this.bind(),"object"==typeof y&&void 0!==y.shape){var m=y.dtype;if(a.indexOf(m)<0&&(m="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(m=gl.getExtension("OES_element_index_uint")&&"uint16"!==m?"uint32":"uint16"),m===y.dtype&&function(b,h){for(var S=1,w=h.length-1;w>=0;--w){if(h[w]!==S)return!1;S*=b[w]}return!0}(y.shape,y.stride))this.length=f(this.gl,this.type,this.length,this.usage,0===y.offset&&y.data.length===y.shape[0]?y.data:y.data.subarray(y.offset,y.shape[0]),d);else{var g=i.malloc(y.size,m),x=n(g,y.shape);r.assign(x,y),this.length=f(this.gl,this.type,this.length,this.usage,d<0?g:g.subarray(0,y.size),d),i.free(g)}}else if(Array.isArray(y)){var v;v=function c(y,d){for(var m=i.malloc(y.length,d),g=y.length,x=0;x<g;++x)m[x]=y[x];return m}(y,this.type===this.gl.ELEMENT_ARRAY_BUFFER?"uint16":"float32"),this.length=f(this.gl,this.type,this.length,this.usage,d<0?v:v.subarray(0,y.length),d),i.free(v)}else if("object"==typeof y&&"number"==typeof y.length)this.length=f(this.gl,this.type,this.length,this.usage,y,d);else{if("number"!=typeof y&&void 0!==y)throw new Error("gl-buffer: Invalid data type");if(d>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(y|=0)<=0&&(y=1),this.gl.bufferData(this.type,0|y,this.usage),this.length=y}},p.exports=function(y,d,m,g){if(g=g||y.DYNAMIC_DRAW,(m=m||y.ARRAY_BUFFER)!==y.ARRAY_BUFFER&&m!==y.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(g!==y.DYNAMIC_DRAW&&g!==y.STATIC_DRAW&&g!==y.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var x=y.createBuffer(),v=new s(y,m,x,0,g);return v.update(d),v}},6405:function(p,l,t){"use strict";var i=t(2931);p.exports=function(n,a){var s=n.positions,u=n.vectors,f={positions:[],vertexIntensity:[],vertexIntensityBounds:n.vertexIntensityBounds,vectors:[],cells:[],coneOffset:n.coneOffset,colormap:n.colormap};if(0===n.positions.length)return a&&(a[0]=[0,0,0],a[1]=[0,0,0]),f;for(var c=0,y=1/0,d=-1/0,m=1/0,g=-1/0,x=1/0,v=-1/0,b=null,h=null,S=[],w=1/0,E=!1,P="raw"===n.coneSizemode,I=0;I<s.length;I++){var O=s[I];y=Math.min(O[0],y),d=Math.max(O[0],d),m=Math.min(O[1],m),g=Math.max(O[1],g),x=Math.min(O[2],x),v=Math.max(O[2],v);var z=u[I];if(i.length(z)>c&&(c=i.length(z)),I&&!P){var U=2*i.distance(b,O)/(i.length(h)+i.length(z));U?(w=Math.min(w,U),E=!1):E=!0}E||(b=O,h=z),S.push(z)}var j=[d,g,v];a&&(a[0]=[y,m,x],a[1]=j),0===c&&(c=1);var Y=1/c;isFinite(w)||(w=1),f.vectorScale=w;var B=n.coneSize||(P?1:.5);n.absoluteConeSize&&(B=n.absoluteConeSize*Y),f.coneScale=B,I=0;for(var V=0;I<s.length;I++)for(var q=(O=s[I])[0],ie=O[1],te=O[2],ee=S[I],$=i.length(ee)*Y,J=0;J<8;J++){f.positions.push([q,ie,te,V++]),f.positions.push([q,ie,te,V++]),f.positions.push([q,ie,te,V++]),f.positions.push([q,ie,te,V++]),f.positions.push([q,ie,te,V++]),f.positions.push([q,ie,te,V++]),f.vectors.push(ee),f.vectors.push(ee),f.vectors.push(ee),f.vectors.push(ee),f.vectors.push(ee),f.vectors.push(ee),f.vertexIntensity.push($,$,$),f.vertexIntensity.push($,$,$);var X=f.positions.length;f.cells.push([X-6,X-5,X-4],[X-3,X-2,X-1])}return f};var r=t(614);p.exports.createMesh=t(9060),p.exports.createConeMesh=function(n,a){return p.exports.createMesh(n,a,{shaders:r,traceType:"cone"})}},9060:function(p,l,t){"use strict";var i=t(9405),r=t(2762),n=t(8116),a=t(7766),s=t(6760),u=t(7608),f=t(9618),c=t(6729),y=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function d(g,x,v,b,h,S,w,E,P,I,O){this.gl=g,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=x,this.dirty=!0,this.triShader=v,this.pickShader=b,this.trianglePositions=h,this.triangleVectors=S,this.triangleColors=E,this.triangleUVs=P,this.triangleIds=w,this.triangleVAO=I,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=O,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=y,this._view=y,this._projection=y,this._resolution=[1,1]}var m=d.prototype;m.isOpaque=function(){return this.opacity>=1},m.isTransparent=function(){return this.opacity<1},m.pickSlots=1,m.setPickBase=function(g){this.pickId=g},m.update=function(g){g=g||{};var x=this.gl;this.dirty=!0,"lightPosition"in g&&(this.lightPosition=g.lightPosition),"opacity"in g&&(this.opacity=g.opacity),"ambient"in g&&(this.ambientLight=g.ambient),"diffuse"in g&&(this.diffuseLight=g.diffuse),"specular"in g&&(this.specularLight=g.specular),"roughness"in g&&(this.roughness=g.roughness),"fresnel"in g&&(this.fresnel=g.fresnel),void 0!==g.tubeScale&&(this.tubeScale=g.tubeScale),void 0!==g.vectorScale&&(this.vectorScale=g.vectorScale),void 0!==g.coneScale&&(this.coneScale=g.coneScale),void 0!==g.coneOffset&&(this.coneOffset=g.coneOffset),g.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=x.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=x.LINEAR,this.texture.setPixels(function(ae){for(var ce=c({colormap:ae,nshades:256,format:"rgba"}),le=new Uint8Array(1024),pe=0;pe<256;++pe){for(var we=ce[pe],Te=0;Te<3;++Te)le[4*pe+Te]=we[Te];le[4*pe+3]=255*we[3]}return f(le,[256,256,4],[4,0,1])}(g.colormap)),this.texture.generateMipmap());var v=g.cells,b=g.positions,h=g.vectors;if(b&&v&&h){var S=[],w=[],E=[],P=[],I=[];this.cells=v,this.positions=b,this.vectors=h;var O=g.meshColor||[1,1,1,1],z=g.vertexIntensity,U=1/0,R=-1/0;if(z)if(g.vertexIntensityBounds)U=+g.vertexIntensityBounds[0],R=+g.vertexIntensityBounds[1];else for(var j=0;j<z.length;++j){var Y=z[j];U=Math.min(U,Y),R=Math.max(R,Y)}else for(j=0;j<b.length;++j)Y=b[j][2],U=Math.min(U,Y),R=Math.max(R,Y);for(this.intensity=z||function(ae){for(var ce=ae.length,le=new Array(ce),pe=0;pe<ce;++pe)le[pe]=ae[pe][2];return le}(b),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],j=0;j<b.length;++j)for(var B=b[j],V=0;V<3;++V)!isNaN(B[V])&&isFinite(B[V])&&(this.bounds[0][V]=Math.min(this.bounds[0][V],B[V]),this.bounds[1][V]=Math.max(this.bounds[1][V],B[V]));var q=0;e:for(j=0;j<v.length;++j){var ie=v[j];if(3===ie.length){for(V=0;V<3;++V){B=b[ee=ie[V]];for(var te=0;te<3;++te)if(isNaN(B[te])||!isFinite(B[te]))continue e}for(V=0;V<3;++V){var ee;B=b[ee=ie[2-V]],S.push(B[0],B[1],B[2],B[3]);var $=h[ee];w.push($[0],$[1],$[2],$[3]||0);var J;E.push(O[0],O[1],O[2],3===O.length?1:O[3]),P.push((J=z?[(z[ee]-U)/(R-U),0]:[(B[2]-U)/(R-U),0])[0],J[1]),I.push(j)}q+=1}}this.triangleCount=q,this.trianglePositions.update(S),this.triangleVectors.update(w),this.triangleColors.update(E),this.triangleUVs.update(P),this.triangleIds.update(new Uint32Array(I))}},m.drawTransparent=m.draw=function(g){for(var x=this.gl,v=(g=g||{}).model||y,b=g.view||y,h=g.projection||y,S=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],w=0;w<3;++w)S[0][w]=Math.max(S[0][w],this.clipBounds[0][w]),S[1][w]=Math.min(S[1][w],this.clipBounds[1][w]);var E={model:v,view:b,projection:h,inverseModel:y.slice(),clipBounds:S,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};E.inverseModel=u(E.inverseModel,E.model),x.disable(x.CULL_FACE),this.texture.bind(0);var P=new Array(16);for(s(P,E.view,E.model),s(P,E.projection,P),u(P,P),w=0;w<3;++w)E.eyePosition[w]=P[12+w]/P[15];var I=P[15];for(w=0;w<3;++w)I+=this.lightPosition[w]*P[4*w+3];for(w=0;w<3;++w){for(var O=P[12+w],z=0;z<3;++z)O+=P[4*z+w]*this.lightPosition[z];E.lightPosition[w]=O/I}if(this.triangleCount>0){var U=this.triShader;U.bind(),U.uniforms=E,this.triangleVAO.bind(),x.drawArrays(x.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},m.drawPick=function(g){for(var x=this.gl,v=(g=g||{}).model||y,b=g.view||y,h=g.projection||y,S=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],w=0;w<3;++w)S[0][w]=Math.max(S[0][w],this.clipBounds[0][w]),S[1][w]=Math.min(S[1][w],this.clipBounds[1][w]);this._model=[].slice.call(v),this._view=[].slice.call(b),this._projection=[].slice.call(h),this._resolution=[x.drawingBufferWidth,x.drawingBufferHeight];var E={model:v,view:b,projection:h,clipBounds:S,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},P=this.pickShader;P.bind(),P.uniforms=E,this.triangleCount>0&&(this.triangleVAO.bind(),x.drawArrays(x.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},m.pick=function(g){if(!g||g.id!==this.pickId)return null;var x=g.value[0]+256*g.value[1]+65536*g.value[2],v=this.cells[x],b=this.positions[v[1]].slice(0,3),h={position:b,dataCoordinate:b,index:Math.floor(v[1]/48)};return"cone"===this.traceType?h.index=Math.floor(v[1]/48):"streamtube"===this.traceType&&(h.intensity=this.intensity[v[1]],h.velocity=this.vectors[v[1]].slice(0,3),h.divergence=this.vectors[v[1]][3],h.index=x),h},m.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},p.exports=function(g,x,v){var b=v.shaders;1===arguments.length&&(g=(x=g).gl);var j,Y,h=((Y=i(g,(j=b).meshShader.vertex,j.meshShader.fragment,null,j.meshShader.attributes)).attributes.position.location=0,Y.attributes.color.location=2,Y.attributes.uv.location=3,Y.attributes.vector.location=4,Y),S=function(R,j){var Y=i(R,j.pickShader.vertex,j.pickShader.fragment,null,j.pickShader.attributes);return Y.attributes.position.location=0,Y.attributes.id.location=1,Y.attributes.vector.location=4,Y}(g,b),w=a(g,f(new Uint8Array([255,255,255,255]),[1,1,4]));w.generateMipmap(),w.minFilter=g.LINEAR_MIPMAP_LINEAR,w.magFilter=g.LINEAR;var E=r(g),P=r(g),I=r(g),O=r(g),z=r(g),U=new d(g,w,h,S,E,P,z,I,O,n(g,[{buffer:E,type:g.FLOAT,size:4},{buffer:z,type:g.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:I,type:g.FLOAT,size:4},{buffer:O,type:g.FLOAT,size:2},{buffer:P,type:g.FLOAT,size:4}]),v.traceType||"cone");return U.update(x),U}},614:function(p,l,t){var i=t(3236),r=i(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),n=i(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),a=i(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * (view * conePosition);\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),s=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);l.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},l.pickShader={vertex:a,fragment:s,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},737:function(p){p.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},5171:function(p,l,t){var i=t(737);p.exports=function(r){return i[r]}},9165:function(p,l,t){"use strict";p.exports=function(d){var m=d.gl,g=i(m),x=r(m,[{buffer:g,type:m.FLOAT,size:3,offset:0,stride:40},{buffer:g,type:m.FLOAT,size:4,offset:12,stride:40},{buffer:g,type:m.FLOAT,size:3,offset:28,stride:40}]),v=n(m);v.attributes.position.location=0,v.attributes.color.location=1,v.attributes.offset.location=2;var b=new s(m,g,x,v);return b.update(d),b};var i=t(2762),r=t(8116),n=t(3436),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(d,m,g,x){this.gl=d,this.shader=x,this.buffer=m,this.vao=g,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var u=s.prototype;function f(d,m){for(var g=0;g<3;++g)d[0][g]=Math.min(d[0][g],m[g]),d[1][g]=Math.max(d[1][g],m[g])}u.isOpaque=function(){return!this.hasAlpha},u.isTransparent=function(){return this.hasAlpha},u.drawTransparent=u.draw=function(d){var m=this.gl,g=this.shader.uniforms;this.shader.bind();var x=g.view=d.view||a,v=g.projection=d.projection||a;g.model=d.model||a,g.clipBounds=this.clipBounds,g.opacity=this.opacity;var E=(d._ortho?2:1)*this.pixelRatio*(v[3]*x[12]+v[7]*x[13]+v[11]*x[14]+v[15]*x[15])/m.drawingBufferHeight;this.vao.bind();for(var P=0;P<3;++P)m.lineWidth(this.lineWidth[P]*this.pixelRatio),g.capSize=this.capSize[P]*E,this.lineCount[P]&&m.drawArrays(m.LINES,this.lineOffset[P],this.lineCount[P]);this.vao.unbind()};var c=function(){for(var d=new Array(3),m=0;m<3;++m){for(var g=[],x=1;x<=2;++x)for(var v=-1;v<=1;v+=2){var b=[0,0,0];b[(x+m)%3]=v,g.push(b)}d[m]=g}return d}();function y(d,m,g,x){for(var v=c[x],b=0;b<v.length;++b){var h=v[b];d.push(m[0],m[1],m[2],g[0],g[1],g[2],g[3],h[0],h[1],h[2])}return v.length}u.update=function(d){"lineWidth"in(d=d||{})&&(this.lineWidth=d.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in d&&(this.capSize=d.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in d&&(this.opacity=+d.opacity,this.opacity<1&&(this.hasAlpha=!0));var m=d.color||[[0,0,0],[0,0,0],[0,0,0]],g=d.position,x=d.error;if(Array.isArray(m[0])||(m=[m,m,m]),g&&x){var v=[],b=g.length,h=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var S=0;S<3;++S){this.lineOffset[S]=h;e:for(var w=0;w<b;++w){for(var E=g[w],P=0;P<3;++P)if(isNaN(E[P])||!isFinite(E[P]))continue e;var I,O=x[w],z=m[S];Array.isArray(z[0])&&(z=m[w]),3===z.length?z=[z[0],z[1],z[2],1]:4===z.length&&(z=[z[0],z[1],z[2],z[3]],!this.hasAlpha&&z[3]<1&&(this.hasAlpha=!0)),!isNaN(O[0][S])&&!isNaN(O[1][S])&&(O[0][S]<0&&((I=E.slice())[S]+=O[0][S],v.push(E[0],E[1],E[2],z[0],z[1],z[2],z[3],0,0,0,I[0],I[1],I[2],z[0],z[1],z[2],z[3],0,0,0),f(this.bounds,I),h+=2+y(v,I,z,S)),O[1][S]>0&&((I=E.slice())[S]+=O[1][S],v.push(E[0],E[1],E[2],z[0],z[1],z[2],z[3],0,0,0,I[0],I[1],I[2],z[0],z[1],z[2],z[3],0,0,0),f(this.bounds,I),h+=2+y(v,I,z,S)))}this.lineCount[S]=h-this.lineOffset[S]}this.buffer.update(v)}},u.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},3436:function(p,l,t){"use strict";var i=t(3236),r=t(9405),n=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * (view * worldPosition);\n  fragColor           = color;\n  fragPosition        = position;\n}"]),a=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);p.exports=function(s){return r(s,n,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},2260:function(p,l,t){"use strict";var i=t(7766);p.exports=function(b,h,S,w){r||(r=b.FRAMEBUFFER_UNSUPPORTED,n=b.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,a=b.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,s=b.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var E=b.getExtension("WEBGL_draw_buffers");if(!u&&E&&function(j,Y){var B=j.getParameter(Y.MAX_COLOR_ATTACHMENTS_WEBGL);u=new Array(B+1);for(var V=0;V<=B;++V){for(var q=new Array(B),ie=0;ie<V;++ie)q[ie]=j.COLOR_ATTACHMENT0+ie;for(ie=V;ie<B;++ie)q[ie]=j.NONE;u[V]=q}}(b,E),Array.isArray(h)&&(w=S,S=0|h[1],h=0|h[0]),"number"!=typeof h)throw new Error("gl-fbo: Missing shape parameter");var P=b.getParameter(b.MAX_RENDERBUFFER_SIZE);if(h<0||h>P||S<0||S>P)throw new Error("gl-fbo: Parameters are too large for FBO");var I=1;if("color"in(w=w||{})){if((I=Math.max(0|w.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(I>1){if(!E)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(I>b.getParameter(E.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+I+" draw buffers")}}var O=b.UNSIGNED_BYTE,z=b.getExtension("OES_texture_float");if(w.float&&I>0){if(!z)throw new Error("gl-fbo: Context does not support floating point textures");O=b.FLOAT}else w.preferFloat&&I>0&&z&&(O=b.FLOAT);var U=!0;"depth"in w&&(U=!!w.depth);var R=!1;return"stencil"in w&&(R=!!w.stencil),new g(b,h,S,O,I,U,R,E)};var r,n,a,s,u=null;function f(b){return[b.getParameter(b.FRAMEBUFFER_BINDING),b.getParameter(b.RENDERBUFFER_BINDING),b.getParameter(b.TEXTURE_BINDING_2D)]}function c(b,h){b.bindFramebuffer(b.FRAMEBUFFER,h[0]),b.bindRenderbuffer(b.RENDERBUFFER,h[1]),b.bindTexture(b.TEXTURE_2D,h[2])}function y(b){switch(b){case r:throw new Error("gl-fbo: Framebuffer unsupported");case n:throw new Error("gl-fbo: Framebuffer incomplete attachment");case a:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case s:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function d(b,h,S,w,E,P){if(!w)return null;var I=i(b,h,S,E,w);return I.magFilter=b.NEAREST,I.minFilter=b.NEAREST,I.mipSamples=1,I.bind(),b.framebufferTexture2D(b.FRAMEBUFFER,P,b.TEXTURE_2D,I.handle,0),I}function m(b,h,S,w,E){var P=b.createRenderbuffer();return b.bindRenderbuffer(b.RENDERBUFFER,P),b.renderbufferStorage(b.RENDERBUFFER,w,h,S),b.framebufferRenderbuffer(b.FRAMEBUFFER,E,b.RENDERBUFFER,P),P}function g(b,h,S,w,E,P,I,O){this.gl=b,this._shape=[0|h,0|S],this._destroyed=!1,this._ext=O,this.color=new Array(E);for(var z=0;z<E;++z)this.color[z]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=w,this._useDepth=P,this._useStencil=I;var U=this,R=[0|h,0|S];Object.defineProperties(R,{0:{get:function(){return U._shape[0]},set:function(j){return U.width=j}},1:{get:function(){return U._shape[1]},set:function(j){return U.height=j}}}),this._shapeVector=R,function(j){var Y=f(j.gl),B=j.gl,V=j.handle=B.createFramebuffer(),q=j._shape[0],ie=j._shape[1],te=j.color.length,ee=j._ext,$=j._useStencil,J=j._useDepth,X=j._colorType;B.bindFramebuffer(B.FRAMEBUFFER,V);for(var ae=0;ae<te;++ae)j.color[ae]=d(B,q,ie,X,B.RGBA,B.COLOR_ATTACHMENT0+ae);0===te?(j._color_rb=m(B,q,ie,B.RGBA4,B.COLOR_ATTACHMENT0),ee&&ee.drawBuffersWEBGL(u[0])):te>1&&ee.drawBuffersWEBGL(u[te]);var ce=B.getExtension("WEBGL_depth_texture");ce?$?j.depth=d(B,q,ie,ce.UNSIGNED_INT_24_8_WEBGL,B.DEPTH_STENCIL,B.DEPTH_STENCIL_ATTACHMENT):J&&(j.depth=d(B,q,ie,B.UNSIGNED_SHORT,B.DEPTH_COMPONENT,B.DEPTH_ATTACHMENT)):J&&$?j._depth_rb=m(B,q,ie,B.DEPTH_STENCIL,B.DEPTH_STENCIL_ATTACHMENT):J?j._depth_rb=m(B,q,ie,B.DEPTH_COMPONENT16,B.DEPTH_ATTACHMENT):$&&(j._depth_rb=m(B,q,ie,B.STENCIL_INDEX,B.STENCIL_ATTACHMENT));var le=B.checkFramebufferStatus(B.FRAMEBUFFER);if(le!==B.FRAMEBUFFER_COMPLETE){for(j._destroyed=!0,B.bindFramebuffer(B.FRAMEBUFFER,null),B.deleteFramebuffer(j.handle),j.handle=null,j.depth&&(j.depth.dispose(),j.depth=null),j._depth_rb&&(B.deleteRenderbuffer(j._depth_rb),j._depth_rb=null),ae=0;ae<j.color.length;++ae)j.color[ae].dispose(),j.color[ae]=null;j._color_rb&&(B.deleteRenderbuffer(j._color_rb),j._color_rb=null),c(B,Y),y(le)}c(B,Y)}(this)}var x=g.prototype;function v(b,h,S){if(b._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(b._shape[0]!==h||b._shape[1]!==S){var w=b.gl,E=w.getParameter(w.MAX_RENDERBUFFER_SIZE);if(h<0||h>E||S<0||S>E)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");b._shape[0]=h,b._shape[1]=S;for(var P=f(w),I=0;I<b.color.length;++I)b.color[I].shape=b._shape;b._color_rb&&(w.bindRenderbuffer(w.RENDERBUFFER,b._color_rb),w.renderbufferStorage(w.RENDERBUFFER,w.RGBA4,b._shape[0],b._shape[1])),b.depth&&(b.depth.shape=b._shape),b._depth_rb&&(w.bindRenderbuffer(w.RENDERBUFFER,b._depth_rb),b._useDepth&&b._useStencil?w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_STENCIL,b._shape[0],b._shape[1]):b._useDepth?w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_COMPONENT16,b._shape[0],b._shape[1]):b._useStencil&&w.renderbufferStorage(w.RENDERBUFFER,w.STENCIL_INDEX,b._shape[0],b._shape[1])),w.bindFramebuffer(w.FRAMEBUFFER,b.handle);var O=w.checkFramebufferStatus(w.FRAMEBUFFER);O!==w.FRAMEBUFFER_COMPLETE&&(b.dispose(),c(w,P),y(O)),c(w,P)}}Object.defineProperties(x,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(b){if(Array.isArray(b)||(b=[0|b,0|b]),2!==b.length)throw new Error("gl-fbo: Shape vector must be length 2");var h=0|b[0],S=0|b[1];return v(this,h,S),[h,S]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(b){return v(this,b|=0,this._shape[1]),b},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(b){return v(this,this._shape[0],b|=0),b},enumerable:!1}}),x.bind=function(){if(!this._destroyed){var b=this.gl;b.bindFramebuffer(b.FRAMEBUFFER,this.handle),b.viewport(0,0,this._shape[0],this._shape[1])}},x.dispose=function(){if(!this._destroyed){this._destroyed=!0;var b=this.gl;b.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(b.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var h=0;h<this.color.length;++h)this.color[h].dispose(),this.color[h]=null;this._color_rb&&(b.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},2992:function(p,l,t){var i=t(3387).sprintf,r=t(5171),n=t(1848),a=t(1085);p.exports=function(s,u,f){"use strict";var c=n(u)||"of unknown name (see npm glsl-shader-name)",y="unknown type";void 0!==f&&(y=f===r.FRAGMENT_SHADER?"fragment":"vertex");for(var d=i("Error compiling %s shader %s:\n",y,c),m=i("%s%s",d,s),g=s.split("\n"),x={},v=0;v<g.length;v++){var b=g[v];if(""!==b&&"\0"!==b){var h=parseInt(b.split(":")[2]);if(isNaN(h))throw new Error(i("Could not parse error: %s",b));x[h]=b}}var S=a(u).split("\n");for(v=0;v<S.length;v++)if((x[v+3]||x[v+2]||x[v+1])&&(d+=S[v]+"\n",x[v+1])){var w=x[v+1];w=w.substr(w.split(":",3).join(":").length+1).trim(),d+=i("^^^ %s\n\n",w)}return{long:d.trim(),short:m.trim()}}},2510:function(p,l,t){"use strict";p.exports=function(m,g){var x=m.gl,v=new f(m,a(x,u.vertex,u.fragment),a(x,u.pickVertex,u.pickFragment),s(x),s(x),s(x),s(x));return v.update(g),m.addObject(v),v};var i=t(2478),r=t(7762),n=t(1888),a=t(9405),s=t(2762),u=t(6768);function f(m,g,x,v,b,h,S){this.plot=m,this.shader=g,this.pickShader=x,this.positionBuffer=v,this.weightBuffer=b,this.colorBuffer=h,this.idBuffer=S,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var c,m,g,y=f.prototype,d=[0,0,1,0,0,1,1,0,1,1,0,1];y.draw=(c=[1,0,0,0,1,0,0,0,1],function(){var m=this.plot,g=this.shader,x=this.bounds,v=this.numVertices;if(!(v<=0)){var b=m.gl,h=m.dataBox,w=x[3]-x[1],E=h[2]-h[0],P=h[3]-h[1];c[0]=2*(x[2]-x[0])/E,c[4]=2*w/P,c[6]=2*(x[0]-h[0])/E-1,c[7]=2*(x[1]-h[1])/P-1,g.bind();var I=g.uniforms;I.viewTransform=c,I.shape=this.shape;var O=g.attributes;this.positionBuffer.bind(),O.position.pointer(),this.weightBuffer.bind(),O.weight.pointer(b.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),O.color.pointer(b.UNSIGNED_BYTE,!0),b.drawArrays(b.TRIANGLES,0,v)}}),y.drawPick=(m=[1,0,0,0,1,0,0,0,1],g=[0,0,0,0],function(x){var v=this.plot,b=this.pickShader,h=this.bounds,S=this.numVertices;if(!(S<=0)){var w=v.gl,E=v.dataBox,I=h[3]-h[1],O=E[2]-E[0],z=E[3]-E[1];m[0]=2*(h[2]-h[0])/O,m[4]=2*I/z,m[6]=2*(h[0]-E[0])/O-1,m[7]=2*(h[1]-E[1])/z-1;for(var U=0;U<4;++U)g[U]=x>>8*U&255;this.pickOffset=x,b.bind();var R=b.uniforms;R.viewTransform=m,R.pickOffset=g,R.shape=this.shape;var j=b.attributes;return this.positionBuffer.bind(),j.position.pointer(),this.weightBuffer.bind(),j.weight.pointer(w.UNSIGNED_BYTE,!1),this.idBuffer.bind(),j.pickId.pointer(w.UNSIGNED_BYTE,!1),w.drawArrays(w.TRIANGLES,0,S),x+this.shape[0]*this.shape[1]}}),y.pick=function(m,g,x){var v=this.pickOffset;if(x<v||x>=v+this.shape[0]*this.shape[1])return null;var h=x-v;return{object:this,pointId:h,dataCoord:[this.xData[h%this.shape[0]],this.yData[h/this.shape[0]|0]]}},y.update=function(m){var g=(m=m||{}).shape||[0,0],x=m.x||r(g[0]),v=m.y||r(g[1]),b=m.z||new Float32Array(g[0]*g[1]),h=!1!==m.zsmooth;this.xData=x,this.yData=v;var S,w,E,P,I=m.colorLevels||[0],O=m.colorValues||[0,0,0,1],z=I.length,U=this.bounds;h?(S=U[0]=x[0],w=U[1]=v[0],E=U[2]=x[x.length-1],P=U[3]=v[v.length-1]):(S=U[0]=x[0]+(x[1]-x[0])/2,w=U[1]=v[0]+(v[1]-v[0])/2,E=U[2]=x[x.length-1]+(x[x.length-1]-x[x.length-2])/2,P=U[3]=v[v.length-1]+(v[v.length-1]-v[v.length-2])/2);var R=1/(E-S),j=1/(P-w),Y=g[0],B=g[1];this.shape=[Y,B];var V=(h?(Y-1)*(B-1):Y*B)*(d.length>>>1);this.numVertices=V;for(var q=n.mallocUint8(4*V),ie=n.mallocFloat32(2*V),te=n.mallocUint8(2*V),ee=n.mallocUint32(V),$=0,J=h?Y-1:Y,X=h?B-1:B,ae=0;ae<X;++ae){var ce,le;h?(ce=j*(v[ae]-w),le=j*(v[ae+1]-w)):(ce=ae<B-1?j*(v[ae]-(v[ae+1]-v[ae])/2-w):j*(v[ae]-(v[ae]-v[ae-1])/2-w),le=ae<B-1?j*(v[ae]+(v[ae+1]-v[ae])/2-w):j*(v[ae]+(v[ae]-v[ae-1])/2-w));for(var pe=0;pe<J;++pe){var we,Te;h?(we=R*(x[pe]-S),Te=R*(x[pe+1]-S)):(we=pe<Y-1?R*(x[pe]-(x[pe+1]-x[pe])/2-S):R*(x[pe]-(x[pe]-x[pe-1])/2-S),Te=pe<Y-1?R*(x[pe]+(x[pe+1]-x[pe])/2-S):R*(x[pe]+(x[pe]-x[pe-1])/2-S));for(var ye=0;ye<d.length;ye+=2){var ve,xe,Ce,Oe,be=d[ye],ue=d[ye+1],se=b[h?(ae+ue)*Y+(pe+be):ae*Y+pe],ge=i.le(I,se);if(ge<0)ve=O[0],xe=O[1],Ce=O[2],Oe=O[3];else if(ge===z-1)ve=O[4*z-4],xe=O[4*z-3],Ce=O[4*z-2],Oe=O[4*z-1];else{var Ie=(se-I[ge])/(I[ge+1]-I[ge]),ke=1-Ie,Se=4*ge,Pe=4*(ge+1);ve=ke*O[Se]+Ie*O[Pe],xe=ke*O[Se+1]+Ie*O[Pe+1],Ce=ke*O[Se+2]+Ie*O[Pe+2],Oe=ke*O[Se+3]+Ie*O[Pe+3]}q[4*$]=255*ve,q[4*$+1]=255*xe,q[4*$+2]=255*Ce,q[4*$+3]=255*Oe,ie[2*$]=.5*we+.5*Te,ie[2*$+1]=.5*ce+.5*le,te[2*$]=be,te[2*$+1]=ue,ee[$]=ae*Y+pe,$+=1}}}this.positionBuffer.update(ie),this.weightBuffer.update(te),this.colorBuffer.update(q),this.idBuffer.update(ee),n.free(ie),n.free(q),n.free(te),n.free(ee)},y.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},6768:function(p,l,t){"use strict";var i=t(3236);p.exports={fragment:i(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:i(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},7319:function(p,l,t){var i=t(3236),r=t(9405),n=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * (view * (model * vec4(p, 1.0)));\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),a=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),s=i(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),u=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];l.createShader=function(f){return r(f,n,a,null,u)},l.createPickShader=function(f){return r(f,n,s,null,u)}},5714:function(p,l,t){"use strict";p.exports=function(S){var w=S.gl||S.scene&&S.scene.gl,E=y(w);E.attributes.position.location=0,E.attributes.nextPosition.location=1,E.attributes.arcLength.location=2,E.attributes.lineWidth.location=3,E.attributes.color.location=4;var P=d(w);P.attributes.position.location=0,P.attributes.nextPosition.location=1,P.attributes.arcLength.location=2,P.attributes.lineWidth.location=3,P.attributes.color.location=4;for(var I=i(w),O=r(w,[{buffer:I,size:3,offset:0,stride:48},{buffer:I,size:3,offset:12,stride:48},{buffer:I,size:1,offset:24,stride:48},{buffer:I,size:1,offset:28,stride:48},{buffer:I,size:4,offset:32,stride:48}]),z=f(new Array(1024),[256,1,4]),U=0;U<1024;++U)z.data[U]=255;var R=n(w,z);R.wrap=w.REPEAT;var j=new b(w,E,P,I,O,R);return j.update(S),j};var i=t(2762),r=t(8116),n=t(7766),a=new Uint8Array(4),s=new Float32Array(a.buffer),u=t(2478),f=t(9618),c=t(7319),y=c.createShader,d=c.createPickShader,m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function g(S,w){for(var E=0,P=0;P<3;++P){var I=S[P]-w[P];E+=I*I}return Math.sqrt(E)}function x(S){for(var w=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)w[0][E]=Math.max(S[0][E],w[0][E]),w[1][E]=Math.min(S[1][E],w[1][E]);return w}function v(S,w,E,P){this.arcLength=S,this.position=w,this.index=E,this.dataCoordinate=P}function b(S,w,E,P,I,O){this.gl=S,this.shader=w,this.pickShader=E,this.buffer=P,this.vao=I,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=O,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var h=b.prototype;h.isTransparent=function(){return this.hasAlpha},h.isOpaque=function(){return!this.hasAlpha},h.pickSlots=1,h.setPickBase=function(S){this.pickId=S},h.drawTransparent=h.draw=function(S){if(this.vertexCount){var w=this.gl,E=this.shader,P=this.vao;E.bind(),E.uniforms={model:S.model||m,view:S.view||m,projection:S.projection||m,clipBounds:x(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[w.drawingBufferWidth,w.drawingBufferHeight],pixelRatio:this.pixelRatio},P.bind(),P.draw(w.TRIANGLE_STRIP,this.vertexCount),P.unbind()}},h.drawPick=function(S){if(this.vertexCount){var w=this.gl,E=this.pickShader,P=this.vao;E.bind(),E.uniforms={model:S.model||m,view:S.view||m,projection:S.projection||m,pickId:this.pickId,clipBounds:x(this.clipBounds),screenShape:[w.drawingBufferWidth,w.drawingBufferHeight],pixelRatio:this.pixelRatio},P.bind(),P.draw(w.TRIANGLE_STRIP,this.vertexCount),P.unbind()}},h.update=function(S){var w,E;this.dirty=!0;var P=!!S.connectGaps;"dashScale"in S&&(this.dashScale=S.dashScale),this.hasAlpha=!1,"opacity"in S&&(this.opacity=+S.opacity,this.opacity<1&&(this.hasAlpha=!0));var I=[],O=[],z=[],U=0,R=0,j=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],Y=S.position||S.positions;if(Y){var B=S.color||S.colors||[0,0,0,1],V=S.lineWidth||1,q=!1;e:for(w=1;w<Y.length;++w){var ie,te,ee,$=Y[w-1],J=Y[w];for(O.push(U),z.push($.slice()),E=0;E<3;++E){if(isNaN($[E])||isNaN(J[E])||!isFinite($[E])||!isFinite(J[E])){if(!P&&I.length>0){for(var X=0;X<24;++X)I.push(I[I.length-12]);R+=2,q=!0}continue e}j[0][E]=Math.min(j[0][E],$[E],J[E]),j[1][E]=Math.max(j[1][E],$[E],J[E])}Array.isArray(B[0])?(ie=B.length>w-1?B[w-1]:B.length>0?B[B.length-1]:[0,0,0,1],te=B.length>w?B[w]:B.length>0?B[B.length-1]:[0,0,0,1]):ie=te=B,3===ie.length&&(ie=[ie[0],ie[1],ie[2],1]),3===te.length&&(te=[te[0],te[1],te[2],1]),!this.hasAlpha&&ie[3]<1&&(this.hasAlpha=!0),ee=Array.isArray(V)?V.length>w-1?V[w-1]:V.length>0?V[V.length-1]:[0,0,0,1]:V;var ae=U;if(U+=g($,J),q){for(E=0;E<2;++E)I.push($[0],$[1],$[2],J[0],J[1],J[2],ae,ee,ie[0],ie[1],ie[2],ie[3]);R+=2,q=!1}I.push($[0],$[1],$[2],J[0],J[1],J[2],ae,ee,ie[0],ie[1],ie[2],ie[3],$[0],$[1],$[2],J[0],J[1],J[2],ae,-ee,ie[0],ie[1],ie[2],ie[3],J[0],J[1],J[2],$[0],$[1],$[2],U,-ee,te[0],te[1],te[2],te[3],J[0],J[1],J[2],$[0],$[1],$[2],U,ee,te[0],te[1],te[2],te[3]),R+=4}}if(this.buffer.update(I),O.push(U),z.push(Y[Y.length-1].slice()),this.bounds=j,this.vertexCount=R,this.points=z,this.arcLength=O,"dashes"in S){var ce=S.dashes.slice();for(ce.unshift(0),w=1;w<ce.length;++w)ce[w]=ce[w-1]+ce[w];var le=f(new Array(1024),[256,1,4]);for(w=0;w<256;++w){for(E=0;E<4;++E)le.set(w,0,E,0);1&u.le(ce,ce[ce.length-1]*w/255)?le.set(w,0,0,0):le.set(w,0,0,255)}this.texture.setPixels(le)}},h.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},h.pick=function(S){if(!S||S.id!==this.pickId)return null;var Y,B,V,w=(Y=S.value[0],B=S.value[1],V=S.value[2],a[0]=0,a[1]=V,a[2]=B,a[3]=Y,s[0]),E=u.le(this.arcLength,w);if(E<0)return null;if(E===this.arcLength.length-1)return new v(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),E);for(var P=this.points[E],I=this.points[Math.min(E+1,this.points.length-1)],O=(w-this.arcLength[E])/(this.arcLength[E+1]-this.arcLength[E]),z=1-O,U=[0,0,0],R=0;R<3;++R)U[R]=z*P[R]+O*I[R];var j=Math.min(O<.5?E:E+1,this.points.length-1);return new v(w,U,j,this.points[j])}},1903:function(p){p.exports=function(l){var t=new Float32Array(16);return t[0]=l[0],t[1]=l[1],t[2]=l[2],t[3]=l[3],t[4]=l[4],t[5]=l[5],t[6]=l[6],t[7]=l[7],t[8]=l[8],t[9]=l[9],t[10]=l[10],t[11]=l[11],t[12]=l[12],t[13]=l[13],t[14]=l[14],t[15]=l[15],t}},6864:function(p){p.exports=function(){var l=new Float32Array(16);return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}},9921:function(p){p.exports=function(l){var t=l[0],i=l[1],r=l[2],n=l[3],a=l[4],s=l[5],u=l[6],f=l[7],c=l[8],y=l[9],d=l[10],m=l[11],g=l[12],x=l[13],v=l[14],b=l[15];return(t*s-i*a)*(d*b-m*v)-(t*u-r*a)*(y*b-m*x)+(t*f-n*a)*(y*v-d*x)+(i*u-r*s)*(c*b-m*g)-(i*f-n*s)*(c*v-d*g)+(r*f-n*u)*(c*x-y*g)}},7399:function(p){p.exports=function(l,t){var i=t[0],r=t[1],n=t[2],a=t[3],s=i+i,u=r+r,f=n+n,c=i*s,y=r*s,d=r*u,m=n*s,g=n*u,x=n*f,v=a*s,b=a*u,h=a*f;return l[0]=1-d-x,l[1]=y+h,l[2]=m-b,l[3]=0,l[4]=y-h,l[5]=1-c-x,l[6]=g+v,l[7]=0,l[8]=m+b,l[9]=g-v,l[10]=1-c-d,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}},6743:function(p){p.exports=function(l,t,i){var r=t[0],n=t[1],a=t[2],s=t[3],u=r+r,f=n+n,c=a+a,y=r*u,d=r*f,m=r*c,g=n*f,x=n*c,v=a*c,b=s*u,h=s*f,S=s*c;return l[0]=1-(g+v),l[1]=d+S,l[2]=m-h,l[3]=0,l[4]=d-S,l[5]=1-(y+v),l[6]=x+b,l[7]=0,l[8]=m+h,l[9]=x-b,l[10]=1-(y+g),l[11]=0,l[12]=i[0],l[13]=i[1],l[14]=i[2],l[15]=1,l}},7894:function(p){p.exports=function(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}},7608:function(p){p.exports=function(l,t){var i=t[0],r=t[1],n=t[2],a=t[3],s=t[4],u=t[5],f=t[6],c=t[7],y=t[8],d=t[9],m=t[10],g=t[11],x=t[12],v=t[13],b=t[14],h=t[15],S=i*u-r*s,w=i*f-n*s,E=i*c-a*s,P=r*f-n*u,I=r*c-a*u,O=n*c-a*f,z=y*v-d*x,U=y*b-m*x,R=y*h-g*x,j=d*b-m*v,Y=d*h-g*v,B=m*h-g*b,V=S*B-w*Y+E*j+P*R-I*U+O*z;return V?(l[0]=(u*B-f*Y+c*j)*(V=1/V),l[1]=(n*Y-r*B-a*j)*V,l[2]=(v*O-b*I+h*P)*V,l[3]=(m*I-d*O-g*P)*V,l[4]=(f*R-s*B-c*U)*V,l[5]=(i*B-n*R+a*U)*V,l[6]=(b*E-x*O-h*w)*V,l[7]=(y*O-m*E+g*w)*V,l[8]=(s*Y-u*R+c*z)*V,l[9]=(r*R-i*Y-a*z)*V,l[10]=(x*I-v*E+h*S)*V,l[11]=(d*E-y*I-g*S)*V,l[12]=(u*U-s*j-f*z)*V,l[13]=(i*j-r*U+n*z)*V,l[14]=(v*w-x*P-b*S)*V,l[15]=(y*P-d*w+m*S)*V,l):null}},6582:function(p,l,t){var i=t(7894);p.exports=function(r,n,a,s){var u,f,c,y,d,m,g,x,v,b,h=n[0],S=n[1],w=n[2],E=s[0],P=s[1],I=s[2],O=a[0],z=a[1],U=a[2];return Math.abs(h-O)<1e-6&&Math.abs(S-z)<1e-6&&Math.abs(w-U)<1e-6?i(r):(g=h-O,x=S-z,v=w-U,u=P*(v*=b=1/Math.sqrt(g*g+x*x+v*v))-I*(x*=b),f=I*(g*=b)-E*v,c=E*x-P*g,(b=Math.sqrt(u*u+f*f+c*c))?(u*=b=1/b,f*=b,c*=b):(u=0,f=0,c=0),y=x*c-v*f,d=v*u-g*c,m=g*f-x*u,(b=Math.sqrt(y*y+d*d+m*m))?(y*=b=1/b,d*=b,m*=b):(y=0,d=0,m=0),r[0]=u,r[1]=y,r[2]=g,r[3]=0,r[4]=f,r[5]=d,r[6]=x,r[7]=0,r[8]=c,r[9]=m,r[10]=v,r[11]=0,r[12]=-(u*h+f*S+c*w),r[13]=-(y*h+d*S+m*w),r[14]=-(g*h+x*S+v*w),r[15]=1,r)}},6760:function(p){p.exports=function(l,t,i){var r=t[0],n=t[1],a=t[2],s=t[3],u=t[4],f=t[5],c=t[6],y=t[7],d=t[8],m=t[9],g=t[10],x=t[11],v=t[12],b=t[13],h=t[14],S=t[15],w=i[0],E=i[1],P=i[2],I=i[3];return l[0]=w*r+E*u+P*d+I*v,l[1]=w*n+E*f+P*m+I*b,l[2]=w*a+E*c+P*g+I*h,l[3]=w*s+E*y+P*x+I*S,l[4]=(w=i[4])*r+(E=i[5])*u+(P=i[6])*d+(I=i[7])*v,l[5]=w*n+E*f+P*m+I*b,l[6]=w*a+E*c+P*g+I*h,l[7]=w*s+E*y+P*x+I*S,l[8]=(w=i[8])*r+(E=i[9])*u+(P=i[10])*d+(I=i[11])*v,l[9]=w*n+E*f+P*m+I*b,l[10]=w*a+E*c+P*g+I*h,l[11]=w*s+E*y+P*x+I*S,l[12]=(w=i[12])*r+(E=i[13])*u+(P=i[14])*d+(I=i[15])*v,l[13]=w*n+E*f+P*m+I*b,l[14]=w*a+E*c+P*g+I*h,l[15]=w*s+E*y+P*x+I*S,l}},4040:function(p){p.exports=function(l,t,i,r,n,a,s){var u=1/(t-i),f=1/(r-n),c=1/(a-s);return l[0]=-2*u,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*f,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*c,l[11]=0,l[12]=(t+i)*u,l[13]=(n+r)*f,l[14]=(s+a)*c,l[15]=1,l}},4772:function(p){p.exports=function(l,t,i,r,n){var a=1/Math.tan(t/2),s=1/(r-n);return l[0]=a/i,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=a,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=(n+r)*s,l[11]=-1,l[12]=0,l[13]=0,l[14]=2*n*r*s,l[15]=0,l}},6079:function(p){p.exports=function(l,t,i,r){var n,a,s,u,f,c,y,d,m,g,x,v,b,h,S,w,E,P,I,O,z,U,R,j,Y=r[0],B=r[1],V=r[2],q=Math.sqrt(Y*Y+B*B+V*V);return Math.abs(q)<1e-6?null:(Y*=q=1/q,B*=q,V*=q,n=Math.sin(i),s=1-(a=Math.cos(i)),f=t[1],c=t[2],y=t[3],m=t[5],g=t[6],x=t[7],b=t[9],h=t[10],S=t[11],I=Y*B*s-V*n,O=B*B*s+a,z=V*B*s+Y*n,U=Y*V*s+B*n,R=B*V*s-Y*n,j=V*V*s+a,l[0]=(u=t[0])*(w=Y*Y*s+a)+(d=t[4])*(E=B*Y*s+V*n)+(v=t[8])*(P=V*Y*s-B*n),l[1]=f*w+m*E+b*P,l[2]=c*w+g*E+h*P,l[3]=y*w+x*E+S*P,l[4]=u*I+d*O+v*z,l[5]=f*I+m*O+b*z,l[6]=c*I+g*O+h*z,l[7]=y*I+x*O+S*z,l[8]=u*U+d*R+v*j,l[9]=f*U+m*R+b*j,l[10]=c*U+g*R+h*j,l[11]=y*U+x*R+S*j,t!==l&&(l[12]=t[12],l[13]=t[13],l[14]=t[14],l[15]=t[15]),l)}},5567:function(p){p.exports=function(l,t,i){var r=Math.sin(i),n=Math.cos(i),a=t[4],s=t[5],u=t[6],f=t[7],c=t[8],y=t[9],d=t[10],m=t[11];return t!==l&&(l[0]=t[0],l[1]=t[1],l[2]=t[2],l[3]=t[3],l[12]=t[12],l[13]=t[13],l[14]=t[14],l[15]=t[15]),l[4]=a*n+c*r,l[5]=s*n+y*r,l[6]=u*n+d*r,l[7]=f*n+m*r,l[8]=c*n-a*r,l[9]=y*n-s*r,l[10]=d*n-u*r,l[11]=m*n-f*r,l}},2408:function(p){p.exports=function(l,t,i){var r=Math.sin(i),n=Math.cos(i),a=t[0],s=t[1],u=t[2],f=t[3],c=t[8],y=t[9],d=t[10],m=t[11];return t!==l&&(l[4]=t[4],l[5]=t[5],l[6]=t[6],l[7]=t[7],l[12]=t[12],l[13]=t[13],l[14]=t[14],l[15]=t[15]),l[0]=a*n-c*r,l[1]=s*n-y*r,l[2]=u*n-d*r,l[3]=f*n-m*r,l[8]=a*r+c*n,l[9]=s*r+y*n,l[10]=u*r+d*n,l[11]=f*r+m*n,l}},7089:function(p){p.exports=function(l,t,i){var r=Math.sin(i),n=Math.cos(i),a=t[0],s=t[1],u=t[2],f=t[3],c=t[4],y=t[5],d=t[6],m=t[7];return t!==l&&(l[8]=t[8],l[9]=t[9],l[10]=t[10],l[11]=t[11],l[12]=t[12],l[13]=t[13],l[14]=t[14],l[15]=t[15]),l[0]=a*n+c*r,l[1]=s*n+y*r,l[2]=u*n+d*r,l[3]=f*n+m*r,l[4]=c*n-a*r,l[5]=y*n-s*r,l[6]=d*n-u*r,l[7]=m*n-f*r,l}},2504:function(p){p.exports=function(l,t,i){var r=i[0],n=i[1],a=i[2];return l[0]=t[0]*r,l[1]=t[1]*r,l[2]=t[2]*r,l[3]=t[3]*r,l[4]=t[4]*n,l[5]=t[5]*n,l[6]=t[6]*n,l[7]=t[7]*n,l[8]=t[8]*a,l[9]=t[9]*a,l[10]=t[10]*a,l[11]=t[11]*a,l[12]=t[12],l[13]=t[13],l[14]=t[14],l[15]=t[15],l}},7656:function(p){p.exports=function(l,t,i){var r,n,a,s,u,f,c,y,d,m,g,x,v=i[0],b=i[1],h=i[2];return t===l?(l[12]=t[0]*v+t[4]*b+t[8]*h+t[12],l[13]=t[1]*v+t[5]*b+t[9]*h+t[13],l[14]=t[2]*v+t[6]*b+t[10]*h+t[14],l[15]=t[3]*v+t[7]*b+t[11]*h+t[15]):(n=t[1],a=t[2],s=t[3],u=t[4],f=t[5],c=t[6],y=t[7],d=t[8],m=t[9],g=t[10],x=t[11],l[0]=r=t[0],l[1]=n,l[2]=a,l[3]=s,l[4]=u,l[5]=f,l[6]=c,l[7]=y,l[8]=d,l[9]=m,l[10]=g,l[11]=x,l[12]=r*v+u*b+d*h+t[12],l[13]=n*v+f*b+m*h+t[13],l[14]=a*v+c*b+g*h+t[14],l[15]=s*v+y*b+x*h+t[15]),l}},5665:function(p){p.exports=function(l,t){if(l===t){var i=t[1],r=t[2],n=t[3],a=t[6],s=t[7],u=t[11];l[1]=t[4],l[2]=t[8],l[3]=t[12],l[4]=i,l[6]=t[9],l[7]=t[13],l[8]=r,l[9]=a,l[11]=t[14],l[12]=n,l[13]=s,l[14]=u}else l[0]=t[0],l[1]=t[4],l[2]=t[8],l[3]=t[12],l[4]=t[1],l[5]=t[5],l[6]=t[9],l[7]=t[13],l[8]=t[2],l[9]=t[6],l[10]=t[10],l[11]=t[14],l[12]=t[3],l[13]=t[7],l[14]=t[11],l[15]=t[15];return l}},7626:function(p,l,t){"use strict";var i=t(2642),r=t(9346);function n(u,f){for(var c=[0,0,0,0],y=0;y<4;++y)for(var d=0;d<4;++d)c[d]+=u[4*y+d]*f[y];return c}function a(u,f,c,y,d){for(var m=n(y,n(c,n(f,[u[0],u[1],u[2],1]))),g=0;g<3;++g)m[g]/=m[3];return[.5*d[0]*(1+m[0]),.5*d[1]*(1-m[1])]}function s(u,f){for(var c=[0,0,0],y=0;y<u.length;++y)for(var d=u[y],m=f[y],g=0;g<3;++g)c[g]+=m*d[g];return c}p.exports=function(u,f,c,y,d,m){if(1===u.length)return[0,u[0].slice()];for(var g=new Array(u.length),x=0;x<u.length;++x)g[x]=a(u[x],c,y,d,m);var v=0,b=1/0;for(x=0;x<g.length;++x){for(var h=0,S=0;S<2;++S)h+=Math.pow(g[x][S]-f[S],2);h<b&&(b=h,v=x)}var w=function(P,I){if(2===P.length){for(var O=0,z=0,U=0;U<2;++U)O+=Math.pow(I[U]-P[0][U],2),z+=Math.pow(I[U]-P[1][U],2);return(O=Math.sqrt(O))+(z=Math.sqrt(z))<1e-6?[1,0]:[z/(O+z),O/(z+O)]}if(3===P.length){var R=[0,0];return r(P[0],P[1],P[2],I,R),i(P,R)}return[]}(g,f),E=0;for(x=0;x<3;++x){if(w[x]<-.001||w[x]>1.0001)return null;E+=w[x]}return Math.abs(E-1)>.001?null:[v,s(u,w),w]}},840:function(p,l,t){var i=t(3236),r=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * (view * (model * vec4(p, 1.0)));\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),n=i(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),a=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * (view * (model * vec4(position, 1.0)));\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),s=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),u=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * (view * (model * vec4(position, 1.0)));\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),f=i(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),c=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * (view * (model * vec4(position, 1.0)));\n  f_id        = id;\n  f_position  = position;\n}"]),y=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),d=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * (view * (model * vec4(position, 1.0)));\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),m=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * (view * (model * vec4(position, 1.0)));\n}"]),g=i(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);l.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},l.wireShader={vertex:a,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},l.pointShader={vertex:u,fragment:f,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},l.pickShader={vertex:c,fragment:y,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},l.pointPickShader={vertex:d,fragment:y,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},l.contourShader={vertex:m,fragment:g,attributes:[{name:"position",type:"vec3"}]}},7201:function(p,l,t){"use strict";var i=t(9405),r=t(2762),n=t(8116),a=t(7766),s=t(8406),u=t(6760),f=t(7608),c=t(9618),y=t(6729),d=t(7765),m=t(1888),g=t(840),x=t(7626),v=g.meshShader,b=g.wireShader,h=g.pointShader,S=g.pickShader,w=g.pointPickShader,E=g.contourShader,P=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function I(B,V,q,ie,te,ee,$,J,X,ae,ce,le,pe,we,Te,ye,ve,xe,Ce,Oe,be,ue,se,ge,Ie,ke,Se){this.gl=B,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=V,this.dirty=!0,this.triShader=q,this.lineShader=ie,this.pointShader=te,this.pickShader=ee,this.pointPickShader=$,this.contourShader=J,this.trianglePositions=X,this.triangleColors=ce,this.triangleNormals=pe,this.triangleUVs=le,this.triangleIds=ae,this.triangleVAO=we,this.triangleCount=0,this.lineWidth=1,this.edgePositions=Te,this.edgeColors=ve,this.edgeUVs=xe,this.edgeIds=ye,this.edgeVAO=Ce,this.edgeCount=0,this.pointPositions=Oe,this.pointColors=ue,this.pointUVs=se,this.pointSizes=ge,this.pointIds=be,this.pointVAO=Ie,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=ke,this.contourVAO=Se,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=P,this._view=P,this._projection=P,this._resolution=[1,1]}var O=I.prototype;function z(B,V){if(!V||!V.length)return 1;for(var q=0;q<V.length;++q){if(V.length<2)return 1;if(V[q][0]===B)return V[q][1];if(V[q][0]>B&&q>0){var ie=(V[q][0]-B)/(V[q][0]-V[q-1][0]);return V[q][1]*(1-ie)+ie*V[q-1][1]}}return 1}O.isOpaque=function(){return!this.hasAlpha},O.isTransparent=function(){return this.hasAlpha},O.pickSlots=1,O.setPickBase=function(B){this.pickId=B},O.highlight=function(B){if(B&&this.contourEnable){for(var V=d(this.cells,this.intensity,B.intensity),q=V.cells,ie=V.vertexIds,te=V.vertexWeights,ee=q.length,$=m.mallocFloat32(6*ee),J=0,X=0;X<ee;++X)for(var ae=q[X],ce=0;ce<2;++ce){var le=ae[0];2===ae.length&&(le=ae[ce]);for(var Te=te[le],ye=1-Te,ve=this.positions[ie[le][0]],xe=this.positions[ie[le][1]],Ce=0;Ce<3;++Ce)$[J++]=Te*ve[Ce]+ye*xe[Ce]}this.contourCount=J/3|0,this.contourPositions.update($.subarray(0,J)),m.free($)}else this.contourCount=0},O.update=function(B){B=B||{};var V=this.gl;this.dirty=!0,"contourEnable"in B&&(this.contourEnable=B.contourEnable),"contourColor"in B&&(this.contourColor=B.contourColor),"lineWidth"in B&&(this.lineWidth=B.lineWidth),"lightPosition"in B&&(this.lightPosition=B.lightPosition),this.hasAlpha=!1,"opacity"in B&&(this.opacity=B.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in B&&(this.opacityscale=B.opacityscale,this.hasAlpha=!0),"ambient"in B&&(this.ambientLight=B.ambient),"diffuse"in B&&(this.diffuseLight=B.diffuse),"specular"in B&&(this.specularLight=B.specular),"roughness"in B&&(this.roughness=B.roughness),"fresnel"in B&&(this.fresnel=B.fresnel),B.texture?(this.texture.dispose(),this.texture=a(V,B.texture)):B.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=V.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=V.LINEAR,this.texture.setPixels(function(jt,Ut){for(var Rt=y({colormap:jt,nshades:256,format:"rgba"}),Je=new Uint8Array(1024),et=0;et<256;++et){for(var qe=Rt[et],$e=0;$e<3;++$e)Je[4*et+$e]=qe[$e];Je[4*et+3]=Ut?255*z(et/255,Ut):255*qe[3]}return c(Je,[256,256,4],[4,0,1])}(B.colormap,this.opacityscale)),this.texture.generateMipmap());var q=B.cells,ie=B.positions;if(ie&&q){var te=[],ee=[],$=[],J=[],X=[],ae=[],ce=[],le=[],pe=[],we=[],Te=[],ye=[],ve=[],xe=[];this.cells=q,this.positions=ie;var Ce=B.vertexNormals,Oe=B.cellNormals,be=void 0===B.vertexNormalsEpsilon?1e-6:B.vertexNormalsEpsilon;B.useFacetNormals&&!Oe&&(Oe=s.faceNormals(q,ie,void 0===B.faceNormalsEpsilon?1e-6:B.faceNormalsEpsilon)),Oe||Ce||(Ce=s.vertexNormals(q,ie,be));var se=B.vertexColors,ge=B.cellColors,Ie=B.meshColor||[1,1,1,1],ke=B.vertexUVs,Se=B.vertexIntensity,Pe=B.cellUVs,Fe=B.cellIntensity,Be=1/0,me=-1/0;if(!ke&&!Pe)if(Se)if(B.vertexIntensityBounds)Be=+B.vertexIntensityBounds[0],me=+B.vertexIntensityBounds[1];else for(var Me=0;Me<Se.length;++Me){var Le=Se[Me];Be=Math.min(Be,Le),me=Math.max(me,Le)}else if(Fe)if(B.cellIntensityBounds)Be=+B.cellIntensityBounds[0],me=+B.cellIntensityBounds[1];else for(Me=0;Me<Fe.length;++Me)Le=Fe[Me],Be=Math.min(Be,Le),me=Math.max(me,Le);else for(Me=0;Me<ie.length;++Me)Le=ie[Me][2],Be=Math.min(Be,Le),me=Math.max(me,Le);this.intensity=Se||Fe||function(jt){for(var Ut=jt.length,Rt=new Array(Ut),Je=0;Je<Ut;++Je)Rt[Je]=jt[Je][2];return Rt}(ie),this.pickVertex=!(Fe||ge);var Ne=B.pointSizes,Re=B.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],Me=0;Me<ie.length;++Me)for(var He=ie[Me],Ze=0;Ze<3;++Ze)!isNaN(He[Ze])&&isFinite(He[Ze])&&(this.bounds[0][Ze]=Math.min(this.bounds[0][Ze],He[Ze]),this.bounds[1][Ze]=Math.max(this.bounds[1][Ze],He[Ze]));var nt=0,ft=0,ht=0;e:for(Me=0;Me<q.length;++Me){var Tt=q[Me];switch(Tt.length){case 1:for(He=ie[_t=Tt[0]],Ze=0;Ze<3;++Ze)if(isNaN(He[Ze])||!isFinite(He[Ze]))continue e;we.push(He[0],He[1],He[2]),ot=se?se[_t]:ge?ge[Me]:Ie,this.opacityscale&&Se?ee.push(ot[0],ot[1],ot[2],this.opacity*z((Se[_t]-Be)/(me-Be),this.opacityscale)):3===ot.length?Te.push(ot[0],ot[1],ot[2],this.opacity):(Te.push(ot[0],ot[1],ot[2],ot[3]*this.opacity),ot[3]<1&&(this.hasAlpha=!0)),ye.push((it=ke?ke[_t]:Se?[(Se[_t]-Be)/(me-Be),0]:Pe?Pe[Me]:Fe?[(Fe[Me]-Be)/(me-Be),0]:[(He[2]-Be)/(me-Be),0])[0],it[1]),ve.push(Ne?Ne[_t]:Re),xe.push(Me),ht+=1;break;case 2:for(Ze=0;Ze<2;++Ze){He=ie[_t=Tt[Ze]];for(var At=0;At<3;++At)if(isNaN(He[At])||!isFinite(He[At]))continue e}for(Ze=0;Ze<2;++Ze)He=ie[_t=Tt[Ze]],ae.push(He[0],He[1],He[2]),ot=se?se[_t]:ge?ge[Me]:Ie,this.opacityscale&&Se?ee.push(ot[0],ot[1],ot[2],this.opacity*z((Se[_t]-Be)/(me-Be),this.opacityscale)):3===ot.length?ce.push(ot[0],ot[1],ot[2],this.opacity):(ce.push(ot[0],ot[1],ot[2],ot[3]*this.opacity),ot[3]<1&&(this.hasAlpha=!0)),le.push((it=ke?ke[_t]:Se?[(Se[_t]-Be)/(me-Be),0]:Pe?Pe[Me]:Fe?[(Fe[Me]-Be)/(me-Be),0]:[(He[2]-Be)/(me-Be),0])[0],it[1]),pe.push(Me);ft+=1;break;case 3:for(Ze=0;Ze<3;++Ze)for(He=ie[_t=Tt[Ze]],At=0;At<3;++At)if(isNaN(He[At])||!isFinite(He[At]))continue e;for(Ze=0;Ze<3;++Ze){var _t,ot,it,Pt;He=ie[_t=Tt[2-Ze]],te.push(He[0],He[1],He[2]),(ot=se?se[_t]:ge?ge[Me]:Ie)?this.opacityscale&&Se?ee.push(ot[0],ot[1],ot[2],this.opacity*z((Se[_t]-Be)/(me-Be),this.opacityscale)):3===ot.length?ee.push(ot[0],ot[1],ot[2],this.opacity):(ee.push(ot[0],ot[1],ot[2],ot[3]*this.opacity),ot[3]<1&&(this.hasAlpha=!0)):ee.push(.5,.5,.5,1),J.push((it=ke?ke[_t]:Se?[(Se[_t]-Be)/(me-Be),0]:Pe?Pe[Me]:Fe?[(Fe[Me]-Be)/(me-Be),0]:[(He[2]-Be)/(me-Be),0])[0],it[1]),$.push((Pt=Ce?Ce[_t]:Oe[Me])[0],Pt[1],Pt[2]),X.push(Me)}nt+=1}}this.pointCount=ht,this.edgeCount=ft,this.triangleCount=nt,this.pointPositions.update(we),this.pointColors.update(Te),this.pointUVs.update(ye),this.pointSizes.update(ve),this.pointIds.update(new Uint32Array(xe)),this.edgePositions.update(ae),this.edgeColors.update(ce),this.edgeUVs.update(le),this.edgeIds.update(new Uint32Array(pe)),this.trianglePositions.update(te),this.triangleColors.update(ee),this.triangleUVs.update(J),this.triangleNormals.update($),this.triangleIds.update(new Uint32Array(X))}},O.drawTransparent=O.draw=function(B){for(var V=this.gl,q=(B=B||{}).model||P,ie=B.view||P,te=B.projection||P,ee=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],$=0;$<3;++$)ee[0][$]=Math.max(ee[0][$],this.clipBounds[0][$]),ee[1][$]=Math.min(ee[1][$],this.clipBounds[1][$]);var J={model:q,view:ie,projection:te,inverseModel:P.slice(),clipBounds:ee,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};J.inverseModel=f(J.inverseModel,J.model),V.disable(V.CULL_FACE),this.texture.bind(0);var X=new Array(16);for(u(X,J.view,J.model),u(X,J.projection,X),f(X,X),$=0;$<3;++$)J.eyePosition[$]=X[12+$]/X[15];var ae,ce=X[15];for($=0;$<3;++$)ce+=this.lightPosition[$]*X[4*$+3];for($=0;$<3;++$){for(var le=X[12+$],pe=0;pe<3;++pe)le+=X[4*pe+$]*this.lightPosition[pe];J.lightPosition[$]=le/ce}this.triangleCount>0&&((ae=this.triShader).bind(),ae.uniforms=J,this.triangleVAO.bind(),V.drawArrays(V.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((ae=this.lineShader).bind(),ae.uniforms=J,this.edgeVAO.bind(),V.lineWidth(this.lineWidth*this.pixelRatio),V.drawArrays(V.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((ae=this.pointShader).bind(),ae.uniforms=J,this.pointVAO.bind(),V.drawArrays(V.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((ae=this.contourShader).bind(),ae.uniforms=J,this.contourVAO.bind(),V.drawArrays(V.LINES,0,this.contourCount),this.contourVAO.unbind())},O.drawPick=function(B){for(var V=this.gl,q=(B=B||{}).model||P,ie=B.view||P,te=B.projection||P,ee=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],$=0;$<3;++$)ee[0][$]=Math.max(ee[0][$],this.clipBounds[0][$]),ee[1][$]=Math.min(ee[1][$],this.clipBounds[1][$]);this._model=[].slice.call(q),this._view=[].slice.call(ie),this._projection=[].slice.call(te),this._resolution=[V.drawingBufferWidth,V.drawingBufferHeight];var J,X={model:q,view:ie,projection:te,clipBounds:ee,pickId:this.pickId/255};(J=this.pickShader).bind(),J.uniforms=X,this.triangleCount>0&&(this.triangleVAO.bind(),V.drawArrays(V.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),V.lineWidth(this.lineWidth*this.pixelRatio),V.drawArrays(V.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((J=this.pointPickShader).bind(),J.uniforms=X,this.pointVAO.bind(),V.drawArrays(V.POINTS,0,this.pointCount),this.pointVAO.unbind())},O.pick=function(B){if(!B||B.id!==this.pickId)return null;for(var V=B.value[0]+256*B.value[1]+65536*B.value[2],q=this.cells[V],ie=this.positions,te=new Array(q.length),ee=0;ee<q.length;++ee)te[ee]=ie[q[ee]];var $=B.coord[0],J=B.coord[1];if(!this.pickVertex){var X=this.positions[q[0]],ae=this.positions[q[1]],ce=this.positions[q[2]];return{_cellCenter:!0,position:[$,J],index:V,cell:q,cellId:V,intensity:this.intensity[V],dataCoordinate:[(X[0]+ae[0]+ce[0])/3,(X[1]+ae[1]+ce[1])/3,(X[2]+ae[2]+ce[2])/3]}}var pe=x(te,[$*this.pixelRatio,this._resolution[1]-J*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!pe)return null;var we=pe[2],Te=0;for(ee=0;ee<q.length;++ee)Te+=we[ee]*this.intensity[q[ee]];return{position:pe[1],index:q[pe[0]],cell:q,cellId:V,intensity:Te,dataCoordinate:this.positions[q[pe[0]]]}},O.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},p.exports=function(B,V){if(1===arguments.length&&(B=(V=B).gl),!(B.getExtension("OES_standard_derivatives")||B.getExtension("MOZ_OES_standard_derivatives")||B.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var Be,q=((Be=i(B,v.vertex,v.fragment)).attributes.position.location=0,Be.attributes.color.location=2,Be.attributes.uv.location=3,Be.attributes.normal.location=4,Be),ie=function(Fe){var Be=i(Fe,b.vertex,b.fragment);return Be.attributes.position.location=0,Be.attributes.color.location=2,Be.attributes.uv.location=3,Be}(B),te=function U(B){var V=i(B,h.vertex,h.fragment);return V.attributes.position.location=0,V.attributes.color.location=2,V.attributes.uv.location=3,V.attributes.pointSize.location=4,V}(B),ee=function R(B){var V=i(B,S.vertex,S.fragment);return V.attributes.position.location=0,V.attributes.id.location=1,V}(B),$=function j(B){var V=i(B,w.vertex,w.fragment);return V.attributes.position.location=0,V.attributes.id.location=1,V.attributes.pointSize.location=4,V}(B),J=function Y(B){var V=i(B,E.vertex,E.fragment);return V.attributes.position.location=0,V}(B),X=a(B,c(new Uint8Array([255,255,255,255]),[1,1,4]));X.generateMipmap(),X.minFilter=B.LINEAR_MIPMAP_LINEAR,X.magFilter=B.LINEAR;var ae=r(B),ce=r(B),le=r(B),pe=r(B),we=r(B),Te=n(B,[{buffer:ae,type:B.FLOAT,size:3},{buffer:we,type:B.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ce,type:B.FLOAT,size:4},{buffer:le,type:B.FLOAT,size:2},{buffer:pe,type:B.FLOAT,size:3}]),ye=r(B),ve=r(B),xe=r(B),Ce=r(B),Oe=n(B,[{buffer:ye,type:B.FLOAT,size:3},{buffer:Ce,type:B.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ve,type:B.FLOAT,size:4},{buffer:xe,type:B.FLOAT,size:2}]),be=r(B),ue=r(B),se=r(B),ge=r(B),Ie=r(B),ke=n(B,[{buffer:be,type:B.FLOAT,size:3},{buffer:Ie,type:B.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ue,type:B.FLOAT,size:4},{buffer:se,type:B.FLOAT,size:2},{buffer:ge,type:B.FLOAT,size:1}]),Se=r(B),Pe=new I(B,X,q,ie,te,ee,$,J,ae,we,ce,le,pe,Te,ye,Ce,ve,xe,Oe,be,Ie,ue,se,ge,ke,Se,n(B,[{buffer:Se,type:B.FLOAT,size:3}]));return Pe.update(V),Pe}},8120:function(p,l,t){"use strict";p.exports=function(c){var y=c.gl;return new a(c,i(y,[0,0,0,1,1,0,1,1]),r(y,n.boxVert,n.lineFrag))};var i=t(2762),r=t(9405),n=t(3603);function a(c,y,d){this.plot=c,this.vbo=y,this.shader=d}var s,u,f=a.prototype;f.bind=function(){var c=this.shader;this.vbo.bind(),this.shader.bind(),c.attributes.coord.pointer(),c.uniforms.screenBox=this.plot.screenBox},f.drawBox=(s=[0,0],u=[0,0],function(c,y,d,m,g){var v=this.shader,b=this.plot.gl;s[0]=c,s[1]=y,u[0]=d,u[1]=m,v.uniforms.lo=s,v.uniforms.hi=u,v.uniforms.color=g,b.drawArrays(b.TRIANGLE_STRIP,0,4)}),f.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},1913:function(p,l,t){"use strict";p.exports=function(x){var v=x.gl;return new s(x,i(v),r(v,a.gridVert,a.gridFrag),r(v,a.tickVert,a.gridFrag))};var i=t(2762),r=t(9405),n=t(2478),a=t(3603);function s(x,v,b,h){this.plot=x,this.vbo=v,this.shader=b,this.tickShader=h,this.ticks=[[],[]]}function u(x,v){return x-v}var f,c,y,d,m,x,v,b,h,S,w,g=s.prototype;g.draw=(f=[0,0],c=[0,0],y=[0,0],function(){for(var x=this.plot,v=this.vbo,b=this.shader,h=this.ticks,S=x.gl,w=x._tickBounds,E=x.dataBox,P=x.viewBox,I=x.gridLineWidth,O=x.gridLineColor,z=x.gridLineEnable,U=x.pixelRatio,R=0;R<2;++R){var j=w[R],B=.5*(E[R+2]+E[R]),V=E[R+2]-E[R];c[R]=2*(w[R+2]-j)/V,f[R]=2*(j-B)/V}b.bind(),v.bind(),b.attributes.dataCoord.pointer(),b.uniforms.dataShift=f,b.uniforms.dataScale=c;var q=0;for(R=0;R<2;++R){y[0]=y[1]=0,y[R]=1,b.uniforms.dataAxis=y,b.uniforms.lineWidth=I[R]/(P[R+2]-P[R])*U,b.uniforms.color=O[R];var ie=6*h[R].length;z[R]&&ie&&S.drawArrays(S.TRIANGLES,q,ie),q+=ie}}),g.drawTickMarks=(x=[0,0],v=[0,0],b=[1,0],h=[0,1],S=[0,0],w=[0,0],function(){for(var E=this.plot,P=this.vbo,I=this.tickShader,O=this.ticks,z=E.gl,U=E._tickBounds,R=E.dataBox,j=E.viewBox,Y=E.pixelRatio,B=E.screenBox,V=B[2]-B[0],q=B[3]-B[1],ie=j[2]-j[0],te=j[3]-j[1],ee=0;ee<2;++ee){var $=U[ee],X=.5*(R[ee+2]+R[ee]),ae=R[ee+2]-R[ee];v[ee]=2*(U[ee+2]-$)/ae,x[ee]=2*($-X)/ae}v[0]*=ie/V,x[0]*=ie/V,v[1]*=te/q,x[1]*=te/q,I.bind(),P.bind(),I.attributes.dataCoord.pointer();var ce=I.uniforms;ce.dataShift=x,ce.dataScale=v;var le=E.tickMarkLength,pe=E.tickMarkWidth,we=E.tickMarkColor,Te=6*O[0].length,ye=Math.min(n.ge(O[0],(R[0]-U[0])/(U[2]-U[0]),u),O[0].length),ve=Math.min(n.gt(O[0],(R[2]-U[0])/(U[2]-U[0]),u),O[0].length),xe=0+6*ye,Ce=6*Math.max(0,ve-ye),Oe=Math.min(n.ge(O[1],(R[1]-U[1])/(U[3]-U[1]),u),O[1].length),be=Math.min(n.gt(O[1],(R[3]-U[1])/(U[3]-U[1]),u),O[1].length),ue=Te+6*Oe,se=6*Math.max(0,be-Oe);S[0]=2*(j[0]-le[1])/V-1,S[1]=(j[3]+j[1])/q-1,w[0]=le[1]*Y/V,w[1]=pe[1]*Y/q,se&&(ce.color=we[1],ce.tickScale=w,ce.dataAxis=h,ce.screenOffset=S,z.drawArrays(z.TRIANGLES,ue,se)),S[0]=(j[2]+j[0])/V-1,S[1]=2*(j[1]-le[0])/q-1,w[0]=pe[0]*Y/V,w[1]=le[0]*Y/q,Ce&&(ce.color=we[0],ce.tickScale=w,ce.dataAxis=b,ce.screenOffset=S,z.drawArrays(z.TRIANGLES,xe,Ce)),S[0]=2*(j[2]+le[3])/V-1,S[1]=(j[3]+j[1])/q-1,w[0]=le[3]*Y/V,w[1]=pe[3]*Y/q,se&&(ce.color=we[3],ce.tickScale=w,ce.dataAxis=h,ce.screenOffset=S,z.drawArrays(z.TRIANGLES,ue,se)),S[0]=(j[2]+j[0])/V-1,S[1]=2*(j[3]+le[2])/q-1,w[0]=pe[2]*Y/V,w[1]=le[2]*Y/q,Ce&&(ce.color=we[2],ce.tickScale=w,ce.dataAxis=b,ce.screenOffset=S,z.drawArrays(z.TRIANGLES,xe,Ce))}),g.update=(d=[1,1,-1,-1,1,-1],m=[1,-1,1,1,-1,-1],function(x){for(var v=x.ticks,b=x.bounds,h=new Float32Array(18*(v[0].length+v[1].length)),S=0,w=[[],[]],E=0;E<2;++E)for(var P=w[E],I=v[E],O=b[E],z=b[E+2],U=0;U<I.length;++U){var R=(I[U].x-O)/(z-O);P.push(R);for(var j=0;j<6;++j)h[S++]=R,h[S++]=d[j],h[S++]=m[j]}this.ticks=w,this.vbo.update(h)}),g.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},4747:function(p,l,t){"use strict";p.exports=function(c){var y=c.gl;return new a(c,i(y,[-1,-1,-1,1,1,-1,1,1]),r(y,n.lineVert,n.lineFrag))};var i=t(2762),r=t(9405),n=t(3603);function a(c,y,d){this.plot=c,this.vbo=y,this.shader=d}var s,u,f=a.prototype;f.bind=function(){var c=this.shader;this.vbo.bind(),this.shader.bind(),c.attributes.coord.pointer(),c.uniforms.screenBox=this.plot.screenBox},f.drawLine=(s=[0,0],u=[0,0],function(c,y,d,m,g,x){var v=this.plot,b=this.shader,h=v.gl;s[0]=c,s[1]=y,u[0]=d,u[1]=m,b.uniforms.start=s,b.uniforms.end=u,b.uniforms.width=g*v.pixelRatio,b.uniforms.color=x,h.drawArrays(h.TRIANGLE_STRIP,0,4)}),f.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3603:function(p,l,t){"use strict";var i=t(3236),r=i(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);p.exports={lineVert:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:r,textVert:i(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:r,gridVert:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:r,boxVert:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},2142:function(p,l,t){"use strict";p.exports=function(v){var b=v.gl;return new u(v,i(b),r(b,s.textVert,s.textFrag))};var i=t(2762),r=t(9405),n=t(529),a=t(2478),s=t(3603);function u(v,b,h){this.plot=v,this.vbo=b,this.shader=h,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var f,c,y,d,m,g,v,b,x=u.prototype;x.drawTicks=(f=[0,0],c=[0,0],y=[0,0],function(v){var b=this.plot,h=this.shader,S=this.tickX[v],w=this.tickOffset[v],E=b.gl,P=b.viewBox,I=b.dataBox,O=b.screenBox,z=b.pixelRatio,U=b.tickEnable,R=b.tickPad,j=b.tickColor,Y=b.tickAngle,B=b.labelEnable,V=b.labelPad,q=b.labelColor,ie=b.labelAngle,te=this.labelOffset[v],ee=this.labelCount[v],$=a.lt(S,I[v]),J=a.le(S,I[v+2]);f[0]=f[1]=0,f[v]=1,c[v]=(P[2+v]+P[v])/(O[2+v]-O[v])-1;var X=2/O[2+(1^v)]-O[1^v];c[1^v]=X*P[1^v]-1,U[v]&&(c[1^v]-=X*z*R[v],$<J&&w[J]>w[$]&&(h.uniforms.dataAxis=f,h.uniforms.screenOffset=c,h.uniforms.color=j[v],h.uniforms.angle=Y[v],E.drawArrays(E.TRIANGLES,w[$],w[J]-w[$]))),B[v]&&ee&&(c[1^v]-=X*z*V[v],h.uniforms.dataAxis=y,h.uniforms.screenOffset=c,h.uniforms.color=q[v],h.uniforms.angle=ie[v],E.drawArrays(E.TRIANGLES,te,ee)),c[1^v]=X*P[2+(1^v)]-1,U[v+2]&&(c[1^v]+=X*z*R[v+2],$<J&&w[J]>w[$]&&(h.uniforms.dataAxis=f,h.uniforms.screenOffset=c,h.uniforms.color=j[v+2],h.uniforms.angle=Y[v+2],E.drawArrays(E.TRIANGLES,w[$],w[J]-w[$]))),B[v+2]&&ee&&(c[1^v]+=X*z*V[v+2],h.uniforms.dataAxis=y,h.uniforms.screenOffset=c,h.uniforms.color=q[v+2],h.uniforms.angle=ie[v+2],E.drawArrays(E.TRIANGLES,te,ee))}),x.drawTitle=(v=[0,0],b=[0,0],function(){var h=this.plot,S=this.shader,w=h.gl,E=h.screenBox,P=h.titleCenter,I=h.titleAngle,O=h.titleColor,z=h.pixelRatio;if(this.titleCount){for(var U=0;U<2;++U)b[U]=2*(P[U]*z-E[U])/(E[2+U]-E[U])-1;S.bind(),S.uniforms.dataAxis=v,S.uniforms.screenOffset=b,S.uniforms.angle=I,S.uniforms.color=O,w.drawArrays(w.TRIANGLES,this.titleOffset,this.titleCount)}}),x.bind=(d=[0,0],m=[0,0],g=[0,0],function(){var v=this.plot,b=this.shader,h=v._tickBounds,S=v.dataBox,w=v.screenBox,E=v.viewBox;b.bind();for(var P=0;P<2;++P){var I=h[P],z=.5*(S[P+2]+S[P]),U=S[P+2]-S[P],j=E[P+2]-E[P],B=w[P+2]-w[P];m[P]=2*(h[P+2]-I)/U*j/B,d[P]=2*(I-z)/U*j/B}g[1]=2*v.pixelRatio/(w[3]-w[1]),g[0]=g[1]*(w[3]-w[1])/(w[2]-w[0]),b.uniforms.dataScale=m,b.uniforms.dataShift=d,b.uniforms.textScale=g,this.vbo.bind(),b.attributes.textCoordinate.pointer()}),x.update=function(v){var b,h,S,w,E,P=[],I=v.ticks,O=v.bounds;for(E=0;E<2;++E){var z=[Math.floor(P.length/3)],U=[-1/0],R=I[E];for(b=0;b<R.length;++b){var j=R[b],Y=j.x,V=j.font||"sans-serif",q=j.fontStyle||"normal",ie=j.fontWeight||"normal",te=j.fontVariant||"normal";w=j.fontSize||12;for(var ee=1/(O[E+2]-O[E]),$=O[E],J=j.text.split("\n"),X=0;X<J.length;X++)for(S=n(V,J[X],{fontStyle:q,fontWeight:ie,fontVariant:te}).data,h=0;h<S.length;h+=2)P.push(S[h]*w,-S[h+1]*w-X*w*1.2,(Y-$)*ee);z.push(Math.floor(P.length/3)),U.push(Y)}this.tickOffset[E]=z,this.tickX[E]=U}for(E=0;E<2;++E){for(this.labelOffset[E]=Math.floor(P.length/3),S=n(v.labelFont[E],v.labels[E],{fontStyle:v.labelFontStyle[E],fontWeight:v.labelFontWeight[E],fontVariant:v.labelFontVariant[E],textAlign:"center"}).data,w=v.labelSize[E],b=0;b<S.length;b+=2)P.push(S[b]*w,-S[b+1]*w,0);this.labelCount[E]=Math.floor(P.length/3)-this.labelOffset[E]}for(this.titleOffset=Math.floor(P.length/3),S=n(v.titleFont,v.title,{fontStyle:v.titleFontStyle,fontWeight:v.titleFontWeight,fontVariant:v.titleFontVariant}).data,w=v.titleSize,b=0;b<S.length;b+=2)P.push(S[b]*w,-S[b+1]*w,0);this.titleCount=Math.floor(P.length/3)-this.titleOffset,this.vbo.update(P)},x.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},1850:function(p,l,t){"use strict";p.exports=function(d){var m=d.gl,g=new u(m,i(m,[m.drawingBufferWidth,m.drawingBufferHeight]));return g.grid=r(g),g.text=n(g),g.line=a(g),g.box=s(g),g.update(d),g};var i=t(3589),r=t(1913),n=t(2142),a=t(4747),s=t(8120);function u(d,m){this.gl=d,this.pickBuffer=m,this.screenBox=[0,0,d.drawingBufferWidth,d.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var f=u.prototype;function c(d){for(var m=d.slice(),g=0;g<m.length;++g)m[g]=m[g].slice();return m}function y(d,m){return d.x-m.x}f.setDirty=function(){this.dirty=this.pickDirty=!0},f.setOverlayDirty=function(){this.dirty=!0},f.nextDepthValue=function(){return this._depthCounter++/65536},f.draw=function(){var d=this.gl,m=this.screenBox,g=this.viewBox,x=this.dataBox,v=this.pixelRatio,b=this.grid,h=this.line,S=this.text,w=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,d.bindFramebuffer(d.FRAMEBUFFER,null),d.enable(d.SCISSOR_TEST),d.disable(d.DEPTH_TEST),d.depthFunc(d.LESS),d.depthMask(!1),d.enable(d.BLEND),d.blendEquation(d.FUNC_ADD,d.FUNC_ADD),d.blendFunc(d.ONE,d.ONE_MINUS_SRC_ALPHA),this.borderColor){d.scissor(m[0],m[1],m[2]-m[0],m[3]-m[1]);var E=this.borderColor;d.clearColor(E[0]*E[3],E[1]*E[3],E[2]*E[3],E[3]),d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT)}d.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]),d.viewport(g[0],g[1],g[2]-g[0],g[3]-g[1]);var P=this.backgroundColor;d.clearColor(P[0]*P[3],P[1]*P[3],P[2]*P[3],P[3]),d.clear(d.COLOR_BUFFER_BIT),b.draw();var I=this.zeroLineEnable,O=this.zeroLineColor,z=this.zeroLineWidth;if(I[0]||I[1]){h.bind();for(var U=0;U<2;++U)if(I[U]&&x[U]<=0&&x[U+2]>=0){var R=m[U]-x[U]*(m[U+2]-m[U])/(x[U+2]-x[U]);0===U?h.drawLine(R,m[1],R,m[3],z[U],O[U]):h.drawLine(m[0],R,m[2],R,z[U],O[U])}}for(U=0;U<w.length;++U)w[U].draw();d.viewport(m[0],m[1],m[2]-m[0],m[3]-m[1]),d.scissor(m[0],m[1],m[2]-m[0],m[3]-m[1]),this.grid.drawTickMarks(),h.bind();var j=this.borderLineEnable,Y=this.borderLineWidth,B=this.borderLineColor;for(j[1]&&h.drawLine(g[0],g[1]-.5*Y[1]*v,g[0],g[3]+.5*Y[3]*v,Y[1],B[1]),j[0]&&h.drawLine(g[0]-.5*Y[0]*v,g[1],g[2]+.5*Y[2]*v,g[1],Y[0],B[0]),j[3]&&h.drawLine(g[2],g[1]-.5*Y[1]*v,g[2],g[3]+.5*Y[3]*v,Y[3],B[3]),j[2]&&h.drawLine(g[0]-.5*Y[0]*v,g[3],g[2]+.5*Y[2]*v,g[3],Y[2],B[2]),S.bind(),U=0;U<2;++U)S.drawTicks(U);this.titleEnable&&S.drawTitle();var V=this.overlays;for(U=0;U<V.length;++U)V[U].draw();d.disable(d.SCISSOR_TEST),d.disable(d.BLEND),d.depthMask(!0)}},f.drawPick=function(){if(!this.static){var d=this.pickBuffer;this._pickTimeout=null,d.begin();for(var m=1,g=this.objects,x=0;x<g.length;++x)m=g[x].drawPick(m);d.end()}},f.pick=function(d,m){if(!this.static){var g=this.pixelRatio,x=this.pickPixelRatio,v=this.viewBox,b=0|Math.round((d-v[0]/g)*x),h=0|Math.round((m-v[1]/g)*x),S=this.pickBuffer.query(b,h,this.pickRadius);if(!S)return null;for(var w=S.id+(S.value[0]<<8)+(S.value[1]<<16)+(S.value[2]<<24),E=this.objects,P=0;P<E.length;++P){var I=E[P].pick(b,h,w);if(I)return I}return null}},f.setScreenBox=function(d){var m=this.screenBox,g=this.pixelRatio;m[0]=0|Math.round(d[0]*g),m[1]=0|Math.round(d[1]*g),m[2]=0|Math.round(d[2]*g),m[3]=0|Math.round(d[3]*g),this.setDirty()},f.setDataBox=function(d){var m=this.dataBox;(m[0]!==d[0]||m[1]!==d[1]||m[2]!==d[2]||m[3]!==d[3])&&(m[0]=d[0],m[1]=d[1],m[2]=d[2],m[3]=d[3],this.setDirty())},f.setViewBox=function(d){var m=this.pixelRatio,g=this.viewBox;g[0]=0|Math.round(d[0]*m),g[1]=0|Math.round(d[1]*m),g[2]=0|Math.round(d[2]*m),g[3]=0|Math.round(d[3]*m);var x=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((d[2]-d[0])*x),0|Math.round((d[3]-d[1])*x)],this.setDirty()},f.update=function(d){var m=this.gl;this.pixelRatio=(d=d||{}).pixelRatio||1;var g=this.pixelRatio;this.pickPixelRatio=Math.max(g,1),this.setScreenBox(d.screenBox||[0,0,m.drawingBufferWidth/g,m.drawingBufferHeight/g]),this.setViewBox(d.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/g,.125*(this.screenBox[3]-this.screenBox[1])/g,.875*(this.screenBox[2]-this.screenBox[0])/g,.875*(this.screenBox[3]-this.screenBox[1])/g]);var x=this.viewBox,v=(x[2]-x[0])/(x[3]-x[1]);this.setDataBox(d.dataBox||[-10,-10/v,10,10/v]),this.borderColor=!1!==d.borderColor&&(d.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(d.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(d.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(d.gridLineWidth||[1,1]).slice(),this.gridLineColor=c(d.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(d.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(d.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=c(d.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(d.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(d.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=c(d.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(d.titleCenter||[.5*(x[0]+x[2])/g,(x[3]+120)/g]).slice(),this.titleEnable=!("titleEnable"in d)||!!d.titleEnable,this.titleAngle=d.titleAngle||0,this.titleColor=(d.titleColor||[0,0,0,1]).slice(),this.labelPad=(d.labelPad||[15,15,15,15]).slice(),this.labelAngle=(d.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(d.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=c(d.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(d.tickPad||[15,15,15,15]).slice(),this.tickAngle=(d.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(d.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=c(d.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(d.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(d.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=c(d.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var b=d.ticks||[[],[]],h=this._tickBounds;h[0]=h[1]=1/0,h[2]=h[3]=-1/0;for(var S=0;S<2;++S){var w=b[S].slice(0);0!==w.length&&(w.sort(y),h[S]=Math.min(h[S],w[0].x),h[S+2]=Math.max(h[S+2],w[w.length-1].x))}this.grid.update({bounds:h,ticks:b}),this.text.update({bounds:h,ticks:b,labels:d.labels||["x","y"],labelSize:d.labelSize||[12,12],labelFont:d.labelFont||["sans-serif","sans-serif"],labelFontStyle:d.labelFontStyle||["normal","normal"],labelFontWeight:d.labelFontWeight||["normal","normal"],labelFontVariant:d.labelFontVariant||["normal","normal"],title:d.title||"",titleSize:d.titleSize||18,titleFont:d.titleFont||"sans-serif",titleFontStyle:d.titleFontStyle||"normal",titleFontWeight:d.titleFontWeight||"normal",titleFontVariant:d.titleFontVariant||"normal"}),this.static=!!d.static,this.setDirty()},f.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var d=this.objects.length-1;d>=0;--d)this.objects[d].dispose();for(this.objects.length=0,d=this.overlays.length-1;d>=0;--d)this.overlays[d].dispose();this.overlays.length=0,this.gl=null},f.addObject=function(d){this.objects.indexOf(d)<0&&(this.objects.push(d),this.setDirty())},f.removeObject=function(d){for(var m=this.objects,g=0;g<m.length;++g)if(m[g]===d){m.splice(g,1),this.setDirty();break}},f.addOverlay=function(d){this.overlays.indexOf(d)<0&&(this.overlays.push(d),this.setOverlayDirty())},f.removeOverlay=function(d){for(var m=this.overlays,g=0;g<m.length;++g)if(m[g]===d){m.splice(g,1),this.setOverlayDirty();break}}},4437:function(p,l,t){"use strict";p.exports=function(f,c){f=f||document.body;var y=[.01,1/0];"distanceLimits"in(c=c||{})&&(y[0]=c.distanceLimits[0],y[1]=c.distanceLimits[1]),"zoomMin"in c&&(y[0]=c.zoomMin),"zoomMax"in c&&(y[1]=c.zoomMax);var d=r({center:c.center||[0,0,0],up:c.up||[0,1,0],eye:c.eye||[0,0,10],mode:c.mode||"orbit",distanceLimits:y}),m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],g=0,x=f.clientWidth,v=f.clientHeight,b={keyBindingMode:"rotate",enableWheel:!0,view:d,element:f,delay:c.delay||16,rotateSpeed:c.rotateSpeed||1,zoomSpeed:c.zoomSpeed||1,translateSpeed:c.translateSpeed||1,flipX:!!c.flipX,flipY:!!c.flipY,modes:d.modes,_ortho:c._ortho||c.projection&&"orthographic"===c.projection.type||!1,tick:function(){var h=i(),S=this.delay,w=h-2*S;d.idle(h-S),d.recalcMatrix(w),d.flush(h-(100+2*S));for(var E=!0,P=d.computedMatrix,I=0;I<16;++I)E=E&&m[I]===P[I],m[I]=P[I];var O=f.clientWidth===x&&f.clientHeight===v;return x=f.clientWidth,v=f.clientHeight,E?!O:(g=Math.exp(d.computedRadius[0]),!0)},lookAt:function(h,S,w){d.lookAt(d.lastT(),h,S,w)},rotate:function(h,S,w){d.rotate(d.lastT(),h,S,w)},pan:function(h,S,w){d.pan(d.lastT(),h,S,w)},translate:function(h,S,w){d.translate(d.lastT(),h,S,w)}};return Object.defineProperties(b,{matrix:{get:function(){return d.computedMatrix},set:function(h){return d.setMatrix(d.lastT(),h),d.computedMatrix},enumerable:!0},mode:{get:function(){return d.getMode()},set:function(h){var S=d.computedUp.slice(),w=d.computedEye.slice(),E=d.computedCenter.slice();if(d.setMode(h),"turntable"===h){var P=i();d._active.lookAt(P,w,E,S),d._active.lookAt(P+500,w,E,[0,0,1]),d._active.flush(P)}return d.getMode()},enumerable:!0},center:{get:function(){return d.computedCenter},set:function(h){return d.lookAt(d.lastT(),null,h),d.computedCenter},enumerable:!0},eye:{get:function(){return d.computedEye},set:function(h){return d.lookAt(d.lastT(),h),d.computedEye},enumerable:!0},up:{get:function(){return d.computedUp},set:function(h){return d.lookAt(d.lastT(),null,null,h),d.computedUp},enumerable:!0},distance:{get:function(){return g},set:function(h){return d.setDistance(d.lastT(),h),h},enumerable:!0},distanceLimits:{get:function(){return d.getDistanceLimits(y)},set:function(h){return d.setDistanceLimits(h),h},enumerable:!0}}),f.addEventListener("contextmenu",function(h){return h.preventDefault(),!1}),b._lastX=-1,b._lastY=-1,b._lastMods={shift:!1,control:!1,alt:!1,meta:!1},b.enableMouseListeners=function(){function h(S,w,E,P){var I=b.keyBindingMode;if(!1!==I){var O="rotate"===I,z="pan"===I,U="zoom"===I,R=!!P.control,j=!!P.alt,Y=!!P.shift,B=!!(1&S),V=!!(2&S),q=!!(4&S),ie=1/f.clientHeight,te=ie*(w-b._lastX),ee=ie*(E-b._lastY),$=b.flipX?1:-1,J=b.flipY?1:-1,X=Math.PI*b.rotateSpeed,ae=i();if(-1!==b._lastX&&-1!==b._lastY&&((O&&B&&!R&&!j&&!Y||B&&!R&&!j&&Y)&&d.rotate(ae,$*X*te,-J*X*ee,0),(z&&B&&!R&&!j&&!Y||V||B&&R&&!j&&!Y)&&d.pan(ae,-b.translateSpeed*te*g,b.translateSpeed*ee*g,0),U&&B&&!R&&!j&&!Y||q||B&&!R&&j&&!Y)){var ce=-b.zoomSpeed*ee/window.innerHeight*(ae-d.lastT())*100;d.pan(ae,0,0,g*(Math.exp(ce)-1))}return b._lastX=w,b._lastY=E,b._lastMods=P,!0}}b.mouseListener=n(f,h),f.addEventListener("touchstart",function(S){var w=s(S.changedTouches[0],f);h(0,w[0],w[1],b._lastMods),h(1,w[0],w[1],b._lastMods)},!!u&&{passive:!0}),f.addEventListener("touchmove",function(S){var w=s(S.changedTouches[0],f);h(1,w[0],w[1],b._lastMods),S.preventDefault()},!!u&&{passive:!1}),f.addEventListener("touchend",function(S){h(0,b._lastX,b._lastY,b._lastMods)},!!u&&{passive:!0}),b.wheelListener=a(f,function(S,w){if(!1!==b.keyBindingMode&&b.enableWheel){var E=b.flipX?1:-1,P=b.flipY?1:-1,I=i();if(Math.abs(S)>Math.abs(w))d.rotate(I,0,0,-S*E*Math.PI*b.rotateSpeed/window.innerWidth);else if(!b._ortho){var O=-b.zoomSpeed*P*w/window.innerHeight*(I-d.lastT())/20;d.pan(I,0,0,g*(Math.exp(O)-1))}}},!0)},b.enableMouseListeners(),b};var i=t(3025),r=t(6296),n=t(351),a=t(8512),s=t(24),u=t(7520)},799:function(p,l,t){var i=t(3236),r=t(9405),n=i(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),a=i(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);p.exports=function(s){return r(s,n,a,null,[{name:"position",type:"vec2"}])}},4100:function(p,l,t){"use strict";var i=t(4437),r=t(3837),n=t(5445),a=t(4449),s=t(3589),u=t(2260),f=t(7169),c=t(351),y=t(4772),d=t(4040),m=t(799),g=t(9216)({tablet:!0,featureDetect:!0});function x(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function v(h){var S=Math.round(Math.log(Math.abs(h))/Math.log(10));if(S<0){var w=Math.round(Math.pow(10,-S));return Math.ceil(h*w)/w}return S>0?(w=Math.round(Math.pow(10,S)),Math.ceil(h/w)*w):Math.ceil(h)}function b(h){return"boolean"!=typeof h||h}p.exports={createScene:function(h){(h=h||{}).camera=h.camera||{};var S=h.canvas;S||(S=document.createElement("canvas"),h.container?h.container.appendChild(S):document.body.appendChild(S));var w=h.gl;if(w||(h.glOptions&&(g=!!h.glOptions.preserveDrawingBuffer),w=function(Ce,Oe){var be=null;try{(be=Ce.getContext("webgl",Oe))||(be=Ce.getContext("experimental-webgl",Oe))}catch{return null}return be}(S,h.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:g})),!w)throw new Error("webgl not supported");var E=h.bounds||[[-10,-10,-10],[10,10,10]],P=new x,I=u(w,w.drawingBufferWidth,w.drawingBufferHeight,{preferFloat:!g}),O=m(w),z=h.cameraObject&&!0===h.cameraObject._ortho||h.camera.projection&&"orthographic"===h.camera.projection.type||!1,U={eye:h.camera.eye||[2,0,0],center:h.camera.center||[0,0,0],up:h.camera.up||[0,1,0],zoomMin:h.camera.zoomMax||.1,zoomMax:h.camera.zoomMin||100,mode:h.camera.mode||"turntable",_ortho:z},R=h.axes||{},j=r(w,R);j.enable=!R.disable;var B=a(w,h.spikes||{}),V=[],q=[],ie=[],te=[],ee=!0,$=!0,J={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},X=($=!0,[w.drawingBufferWidth,w.drawingBufferHeight]),ae=h.cameraObject||i(S,U),ce={gl:w,contextLost:!1,pixelRatio:h.pixelRatio||1,canvas:S,selection:P,camera:ae,axes:j,axesPixels:null,spikes:B,bounds:E,objects:V,shape:X,aspect:h.aspectRatio||[1,1,1],pickRadius:h.pickRadius||10,zNear:h.zNear||.01,zFar:h.zFar||1e3,fovy:h.fovy||Math.PI/4,clearColor:h.clearColor||[0,0,0,0],autoResize:b(h.autoResize),autoBounds:b(h.autoBounds),autoScale:!!h.autoScale,autoCenter:b(h.autoCenter),clipToBounds:b(h.clipToBounds),snapToData:!!h.snapToData,onselect:h.onselect||null,onrender:h.onrender||null,onclick:h.onclick||null,cameraParams:J,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(Ce){this.aspect[0]=Ce.x,this.aspect[1]=Ce.y,this.aspect[2]=Ce.z,$=!0},setBounds:function(Ce,Oe){this.bounds[0][Ce]=Oe.min,this.bounds[1][Ce]=Oe.max},setClearColor:function(Ce){this.clearColor=Ce},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},le=[w.drawingBufferWidth/ce.pixelRatio|0,w.drawingBufferHeight/ce.pixelRatio|0];function pe(){if(!ce._stopped&&ce.autoResize){var Ce=S.parentNode,Oe=1,be=1;Ce&&Ce!==document.body?(Oe=Ce.clientWidth,be=Ce.clientHeight):(Oe=window.innerWidth,be=window.innerHeight);var ue=0|Math.ceil(Oe*ce.pixelRatio),se=0|Math.ceil(be*ce.pixelRatio);if(ue!==S.width||se!==S.height){S.width=ue,S.height=se;var ge=S.style;ge.position=ge.position||"absolute",ge.left="0px",ge.top="0px",ge.width=Oe+"px",ge.height=be+"px",ee=!0}}}function we(){for(var Ce=V.length,Oe=te.length,be=0;be<Oe;++be)ie[be]=0;e:for(be=0;be<Ce;++be){var ue=V[be],se=ue.pickSlots;if(se){for(var ge=0;ge<Oe;++ge)if(ie[ge]+se<255){q[be]=ge,ue.setPickBase(ie[ge]+1),ie[ge]+=se;continue e}var Ie=s(w,X);q[be]=Oe,te.push(Ie),ie.push(se),ue.setPickBase(1),Oe+=1}else q[be]=-1}for(;Oe>0&&0===ie[Oe-1];)ie.pop(),te.pop().dispose()}function Te(){if(ce.contextLost)return!0;w.isContextLost()&&(ce.contextLost=!0,ce.mouseListener.enabled=!1,ce.selection.object=null,ce.oncontextloss&&ce.oncontextloss())}ce.autoResize&&pe(),window.addEventListener("resize",pe),ce.update=function(Ce){ce._stopped||(Ce=Ce||{},ee=!0,$=!0)},ce.add=function(Ce){ce._stopped||(Ce.axes=j,V.push(Ce),q.push(-1),ee=!0,$=!0,we())},ce.remove=function(Ce){if(!ce._stopped){var Oe=V.indexOf(Ce);Oe<0||(V.splice(Oe,1),q.pop(),ee=!0,$=!0,we())}},ce.dispose=function(){if(!ce._stopped&&(ce._stopped=!0,window.removeEventListener("resize",pe),S.removeEventListener("webglcontextlost",Te),ce.mouseListener.enabled=!1,!ce.contextLost)){j.dispose(),B.dispose();for(var Ce=0;Ce<V.length;++Ce)V[Ce].dispose();for(I.dispose(),Ce=0;Ce<te.length;++Ce)te[Ce].dispose();O.dispose(),w=null,j=null,B=null,V=[]}},ce._mouseRotating=!1,ce._prevButtons=0,ce.enableMouseListeners=function(){ce.mouseListener=c(S,function(Ce,Oe,be){if(!ce._stopped){var ue=te.length,se=V.length,ge=P.object;P.distance=1/0,P.mouse[0]=Oe,P.mouse[1]=be,P.object=null,P.screen=null,P.dataCoordinate=P.dataPosition=null;var Ie=!1;if(Ce&&ce._prevButtons)ce._mouseRotating=!0;else{ce._mouseRotating&&($=!0),ce._mouseRotating=!1;for(var ke=0;ke<ue;++ke){var Se=te[ke].query(Oe,le[1]-be-1,ce.pickRadius);if(Se){if(Se.distance>P.distance)continue;for(var Pe=0;Pe<se;++Pe){var Fe=V[Pe];if(q[Pe]===ke){var Be=Fe.pick(Se);Be&&(P.buttons=Ce,P.screen=Se.coord,P.distance=Se.distance,P.object=Fe,P.index=Be.distance,P.dataPosition=Be.position,P.dataCoordinate=Be.dataCoordinate,P.data=Be,Ie=!0)}}}}}ge&&ge!==P.object&&(ge.highlight&&ge.highlight(null),ee=!0),P.object&&(P.object.highlight&&P.object.highlight(P.data),ee=!0),(Ie=Ie||P.object!==ge)&&ce.onselect&&ce.onselect(P),1&Ce&&!(1&ce._prevButtons)&&ce.onclick&&ce.onclick(P),ce._prevButtons=Ce}})},S.addEventListener("webglcontextlost",Te);var ye=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],ve=[ye[0].slice(),ye[1].slice()];function xe(){if(!Te()){pe();var Ce=ce.camera.tick();J.view=ce.camera.matrix,ee=ee||Ce,$=$||Ce,j.pixelRatio=ce.pixelRatio,B.pixelRatio=ce.pixelRatio;var Oe=V.length,be=ye[0],ue=ye[1];be[0]=be[1]=be[2]=1/0,ue[0]=ue[1]=ue[2]=-1/0;for(var se=0;se<Oe;++se){(Re=V[se]).pixelRatio=ce.pixelRatio,Re.axes=ce.axes,ee=ee||!!Re.dirty,$=$||!!Re.dirty;var ge=Re.bounds;if(ge)for(var Ie=ge[0],ke=ge[1],Se=0;Se<3;++Se)be[Se]=Math.min(be[Se],Ie[Se]),ue[Se]=Math.max(ue[Se],ke[Se])}var Pe=ce.bounds;if(ce.autoBounds)for(Se=0;Se<3;++Se){if(ue[Se]<be[Se])be[Se]=-1,ue[Se]=1;else{be[Se]===ue[Se]&&(be[Se]-=1,ue[Se]+=1);var Fe=.05*(ue[Se]-be[Se]);be[Se]=be[Se]-Fe,ue[Se]=ue[Se]+Fe}Pe[0][Se]=be[Se],Pe[1][Se]=ue[Se]}var Be=!1;for(Se=0;Se<3;++Se)Be=Be||ve[0][Se]!==Pe[0][Se]||ve[1][Se]!==Pe[1][Se],ve[0][Se]=Pe[0][Se],ve[1][Se]=Pe[1][Se];if($=$||Be,ee=ee||Be){if(Be){var me=[0,0,0];for(se=0;se<3;++se)me[se]=v((Pe[1][se]-Pe[0][se])/10);j.update(j.autoTicks?{bounds:Pe,tickSpacing:me}:{bounds:Pe})}var Me=w.drawingBufferWidth,Le=w.drawingBufferHeight;for(X[0]=Me,X[1]=Le,le[0]=0|Math.max(Me/ce.pixelRatio,1),le[1]=0|Math.max(Le/ce.pixelRatio,1),function(He,Ze){var nt=He.bounds,ft=He.cameraParams,ht=ft.projection,Tt=ft.model,ot=He.zNear,it=He.zFar,Pt=He.fovy,jt=He.gl.drawingBufferWidth/He.gl.drawingBufferHeight;Ze?(d(ht,-jt,jt,-1,1,ot,it),ft._ortho=!0):(y(ht,Pt,jt,ot,it),ft._ortho=!1);for(var Ut=0;Ut<16;++Ut)Tt[Ut]=0;Tt[15]=1;var Rt=0;for(Ut=0;Ut<3;++Ut)Rt=Math.max(Rt,nt[1][Ut]-nt[0][Ut]);for(Ut=0;Ut<3;++Ut)Tt[5*Ut]=He.autoScale?He.aspect[Ut]/(nt[1][Ut]-nt[0][Ut]):1/Rt,He.autoCenter&&(Tt[12+Ut]=.5*-Tt[5*Ut]*(nt[0][Ut]+nt[1][Ut]))}(ce,z),se=0;se<Oe;++se)(Re=V[se]).axesBounds=Pe,ce.clipToBounds&&(Re.clipBounds=Pe);P.object&&(B.position=ce.snapToData?P.dataCoordinate:P.dataPosition,B.bounds=Pe),$&&($=!1,function(){if(!Te()){w.colorMask(!0,!0,!0,!0),w.depthMask(!0),w.disable(w.BLEND),w.enable(w.DEPTH_TEST),w.depthFunc(w.LEQUAL);for(var He=V.length,Ze=te.length,nt=0;nt<Ze;++nt){var ft=te[nt];ft.shape=le,ft.begin();for(var ht=0;ht<He;++ht)if(q[ht]===nt){var Tt=V[ht];Tt.drawPick&&(Tt.pixelRatio=1,Tt.drawPick(J))}ft.end()}}}()),ce.axesPixels=n(ce.axes,J,Me,Le),ce.onrender&&ce.onrender(),w.bindFramebuffer(w.FRAMEBUFFER,null),w.viewport(0,0,Me,Le),ce.clearRGBA(),w.depthMask(!0),w.colorMask(!0,!0,!0,!0),w.enable(w.DEPTH_TEST),w.depthFunc(w.LEQUAL),w.disable(w.BLEND),w.disable(w.CULL_FACE);var Ne=!1;for(j.enable&&(Ne=Ne||j.isTransparent(),j.draw(J)),B.axes=j,P.object&&B.draw(J),w.disable(w.CULL_FACE),se=0;se<Oe;++se)(Re=V[se]).axes=j,Re.pixelRatio=ce.pixelRatio,Re.isOpaque&&Re.isOpaque()&&Re.draw(J),Re.isTransparent&&Re.isTransparent()&&(Ne=!0);if(Ne){for(I.shape=X,I.bind(),w.clear(w.DEPTH_BUFFER_BIT),w.colorMask(!1,!1,!1,!1),w.depthMask(!0),w.depthFunc(w.LESS),j.enable&&j.isTransparent()&&j.drawTransparent(J),se=0;se<Oe;++se)(Re=V[se]).isOpaque&&Re.isOpaque()&&Re.draw(J);for(w.enable(w.BLEND),w.blendEquation(w.FUNC_ADD),w.blendFunc(w.ONE,w.ONE_MINUS_SRC_ALPHA),w.colorMask(!0,!0,!0,!0),w.depthMask(!1),w.clearColor(0,0,0,0),w.clear(w.COLOR_BUFFER_BIT),j.isTransparent()&&j.drawTransparent(J),se=0;se<Oe;++se){var Re;(Re=V[se]).isTransparent&&Re.isTransparent()&&Re.drawTransparent(J)}w.bindFramebuffer(w.FRAMEBUFFER,null),w.blendFunc(w.ONE,w.ONE_MINUS_SRC_ALPHA),w.disable(w.DEPTH_TEST),O.bind(),I.color[0].bind(0),O.uniforms.accumBuffer=0,f(w),w.disable(w.BLEND)}for(ee=!1,se=0;se<Oe;++se)V[se].dirty=!1}}}return ce.enableMouseListeners(),function Ce(){ce._stopped||ce.contextLost||(xe(),requestAnimationFrame(Ce))}(),ce.redraw=function(){ce._stopped||(ee=!0,xe())},ce},createCamera:i}},6640:function(p,l,t){var i=t(3236);l.pointVertex=i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),l.pointFragment=i(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),l.pickVertex=i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),l.pickFragment=i(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},4696:function(p,l,t){"use strict";var i=t(9405),r=t(2762),n=t(1888),a=t(6640);function s(y,d,m,g,x){this.plot=y,this.offsetBuffer=d,this.pickBuffer=m,this.shader=g,this.pickShader=x,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}p.exports=function(y,d){var m=y.gl,g=new s(y,r(m),r(m),i(m,a.pointVertex,a.pointFragment),i(m,a.pickVertex,a.pickFragment));return g.update(d),y.addObject(g),g};var u,f,c=s.prototype;c.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},c.update=function(y){var d;function m(w,E){return w in y?y[w]:E}y=y||{},this.sizeMin=m("sizeMin",.5),this.sizeMax=m("sizeMax",20),this.color=m("color",[1,0,0,1]).slice(),this.areaRatio=m("areaRatio",1),this.borderColor=m("borderColor",[0,0,0,1]).slice(),this.blend=m("blend",!1);var g=y.positions.length>>>1,x=y.positions instanceof Float32Array,v=y.idToIndex instanceof Int32Array&&y.idToIndex.length>=g,b=y.positions,h=x?b:n.mallocFloat32(b.length),S=v?y.idToIndex:n.mallocInt32(g);if(x||h.set(b),!v)for(h.set(b),d=0;d<g;d++)S[d]=d;this.points=b,this.offsetBuffer.update(h),this.pickBuffer.update(S),x||n.free(h),v||n.free(S),this.pointCount=g,this.pickOffset=0},c.unifiedDraw=(u=[1,0,0,0,1,0,0,0,1],f=[0,0,0,0],function(y){var d=void 0!==y,m=d?this.pickShader:this.shader,g=this.plot.gl,x=this.plot.dataBox;if(0===this.pointCount)return y;var v=x[2]-x[0],b=x[3]-x[1],h=function(P,I){var O,z=0,U=P.length>>>1;for(O=0;O<U;O++){var R=P[2*O],j=P[2*O+1];R>=I[0]&&R<=I[2]&&j>=I[1]&&j<=I[3]&&z++}return z}(this.points,x),S=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(h,.33333)));u[0]=2/v,u[4]=2/b,u[6]=-2*x[0]/v-1,u[7]=-2*x[1]/b-1,this.offsetBuffer.bind(),m.bind(),m.attributes.position.pointer(),m.uniforms.matrix=u,m.uniforms.color=this.color,m.uniforms.borderColor=this.borderColor,m.uniforms.pointCloud=S<5,m.uniforms.pointSize=S,m.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),d&&(f[0]=255&y,f[1]=y>>8&255,f[2]=y>>16&255,f[3]=y>>24&255,this.pickBuffer.bind(),m.attributes.pickId.pointer(g.UNSIGNED_BYTE),m.uniforms.pickOffset=f,this.pickOffset=y);var w=g.getParameter(g.BLEND),E=g.getParameter(g.DITHER);return w&&!this.blend&&g.disable(g.BLEND),E&&g.disable(g.DITHER),g.drawArrays(g.POINTS,0,this.pointCount),w&&!this.blend&&g.enable(g.BLEND),E&&g.enable(g.DITHER),y+this.pointCount}),c.draw=c.unifiedDraw,c.drawPick=c.unifiedDraw,c.pick=function(y,d,m){var g=this.pickOffset;if(m<g||m>=g+this.pointCount)return null;var v=m-g,b=this.points;return{object:this,pointId:v,dataCoord:[b[2*v],b[2*v+1]]}}},783:function(p){p.exports=function(l,t,i,r){var n,a,s,u,f,c=t[0],y=t[1],d=t[2],m=t[3],g=i[0],x=i[1],v=i[2],b=i[3];return(a=c*g+y*x+d*v+m*b)<0&&(a=-a,g=-g,x=-x,v=-v,b=-b),1-a>1e-6?(n=Math.acos(a),s=Math.sin(n),u=Math.sin((1-r)*n)/s,f=Math.sin(r*n)/s):(u=1-r,f=r),l[0]=u*c+f*g,l[1]=u*y+f*x,l[2]=u*d+f*v,l[3]=u*m+f*b,l}},5964:function(p){"use strict";p.exports=function(l){return l||0===l?l.toString():""}},9366:function(p,l,t){"use strict";var i=t(4359);p.exports=function(n,a,s){var u=[a.style,a.weight,a.variant,a.family].join("_"),f=r[u];if(f||(f=r[u]={}),n in f)return f[n];var c={textAlign:"center",textBaseline:"middle",lineHeight:1,font:a.family,fontStyle:a.style,fontWeight:a.weight,fontVariant:a.variant,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},y=i(n,c);c.triangles=!1;var d,m,g=i(n,c);if(s&&1!==s){for(d=0;d<y.positions.length;++d)for(m=0;m<y.positions[d].length;++m)y.positions[d][m]/=s;for(d=0;d<g.positions.length;++d)for(m=0;m<g.positions[d].length;++m)g.positions[d][m]/=s}var x=[[1/0,1/0],[-1/0,-1/0]],v=g.positions.length;for(d=0;d<v;++d){var b=g.positions[d];for(m=0;m<2;++m)x[0][m]=Math.min(x[0][m],b[m]),x[1][m]=Math.max(x[1][m],b[m])}return f[n]=[y,g,x]};var r={}},1283:function(p,l,t){var i=t(9405),r=t(3236),n=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),a=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),s=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * (view * (model * vec4(position, 1)));\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * (view * (model * vec4(dataPosition, 1)));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),u=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),f=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),c=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],y={vertex:n,fragment:u,attributes:c},d={vertex:a,fragment:u,attributes:c},m={vertex:s,fragment:u,attributes:c},g={vertex:n,fragment:f,attributes:c},x={vertex:a,fragment:f,attributes:c},v={vertex:s,fragment:f,attributes:c};function b(h,S){var w=i(h,S),E=w.attributes;return E.position.location=0,E.color.location=1,E.glyph.location=2,E.id.location=3,w}l.createPerspective=function(h){return b(h,y)},l.createOrtho=function(h){return b(h,d)},l.createProject=function(h){return b(h,m)},l.createPickPerspective=function(h){return b(h,g)},l.createPickOrtho=function(h){return b(h,x)},l.createPickProject=function(h){return b(h,v)}},8418:function(p,l,t){"use strict";var i=t(5219),r=t(2762),n=t(8116),a=t(1888),s=t(6760),u=t(1283),f=t(9366),c=t(5964),y=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],d=ArrayBuffer,m=DataView;function g(ee){return Array.isArray(ee)||d.isView($=ee)&&!($ instanceof m);var $}function x(ee,$){var J=ee[0],X=ee[1],ae=ee[2],ce=ee[3];return ee[0]=$[0]*J+$[4]*X+$[8]*ae+$[12]*ce,ee[1]=$[1]*J+$[5]*X+$[9]*ae+$[13]*ce,ee[2]=$[2]*J+$[6]*X+$[10]*ae+$[14]*ce,ee[3]=$[3]*J+$[7]*X+$[11]*ae+$[15]*ce,ee}function v(ee,$,J,X){return x(X,X),x(X,X),x(X,X)}function b(ee,$){this.index=ee,this.dataCoordinate=this.position=$}function h(ee){return!0===ee||ee>1?1:ee}function S(ee,$,J,X,ae,ce,le,pe,we,Te,ye,ve){this.gl=ee,this.pixelRatio=1,this.shader=$,this.orthoShader=J,this.projectShader=X,this.pointBuffer=ae,this.colorBuffer=ce,this.glyphBuffer=le,this.idBuffer=pe,this.vao=we,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=Te,this.pickOrthoShader=ye,this.pickProjectShader=ve,this.points=[],this._selectResult=new b(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}p.exports=function(ee){var $=ee.gl,J=u.createPerspective($),X=u.createOrtho($),ae=u.createProject($),ce=u.createPickPerspective($),le=u.createPickOrtho($),pe=u.createPickProject($),we=r($),Te=r($),ye=r($),ve=r($),xe=new S($,J,X,ae,we,Te,ye,ve,n($,[{buffer:we,size:3,type:$.FLOAT},{buffer:Te,size:4,type:$.FLOAT},{buffer:ye,size:2,type:$.FLOAT},{buffer:ve,size:4,type:$.UNSIGNED_BYTE,normalized:!0}]),ce,le,pe);return xe.update(ee),xe};var w=S.prototype;w.pickSlots=1,w.setPickBase=function(ee){this.pickId=ee},w.isTransparent=function(){if(this.hasAlpha)return!0;for(var ee=0;ee<3;++ee)if(this.axesProject[ee]&&this.projectHasAlpha)return!0;return!1},w.isOpaque=function(){if(!this.hasAlpha)return!0;for(var ee=0;ee<3;++ee)if(this.axesProject[ee]&&!this.projectHasAlpha)return!0;return!1};var E=[0,0],P=[0,0,0],I=[0,0,0],O=[0,0,0,1],z=[0,0,0,1],U=y.slice(),R=[0,0,0],j=[[0,0,0],[0,0,0]];function Y(ee){return ee[0]=ee[1]=ee[2]=0,ee}function B(ee,$){return ee[0]=$[0],ee[1]=$[1],ee[2]=$[2],ee[3]=1,ee}function V(ee,$,J,X){return ee[0]=$[0],ee[1]=$[1],ee[2]=$[2],ee[J]=X,ee}var q=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function ie(ee,$,J,X,ae,ce,le){var pe=J.gl;if((ce===J.projectHasAlpha||le)&&function(Te,ye,ve,xe){var Ce,Oe=ye.axesProject,be=ye.gl,ue=Te.uniforms,se=ve.model||y,ge=ve.view||y,Ie=ve.projection||y,ke=ye.axesBounds,Se=function(Tt){for(var At=j,_t=0;_t<2;++_t)for(var ot=0;ot<3;++ot)At[_t][ot]=Math.max(Math.min(Tt[_t][ot],1e8),-1e8);return At}(ye.clipBounds);Ce=ye.axes&&ye.axes.lastCubeProps?ye.axes.lastCubeProps.axis:[1,1,1],E[0]=2/be.drawingBufferWidth,E[1]=2/be.drawingBufferHeight,Te.bind(),ue.view=ge,ue.projection=Ie,ue.screenSize=E,ue.highlightId=ye.highlightId,ue.highlightScale=ye.highlightScale,ue.clipBounds=Se,ue.pickGroup=ye.pickId/255,ue.pixelRatio=xe;for(var Pe=0;Pe<3;++Pe)if(Oe[Pe]){ue.scale=ye.projectScale[Pe],ue.opacity=ye.projectOpacity[Pe];for(var Fe=U,Be=0;Be<16;++Be)Fe[Be]=0;for(Be=0;Be<4;++Be)Fe[5*Be]=1;Fe[5*Pe]=0,Fe[12+Pe]=Ce[Pe]<0?ke[0][Pe]:ke[1][Pe],s(Fe,se,Fe),ue.model=Fe;var me=(Pe+1)%3,Me=(Pe+2)%3,Le=Y(P),Ne=Y(I);Le[me]=1,Ne[Me]=1;var Re=v(0,0,0,B(O,Le)),He=v(0,0,0,B(z,Ne));if(Math.abs(Re[1])>Math.abs(He[1])){var Ze=Re;Re=He,He=Ze,Ze=Le,Le=Ne,Ne=Ze;var nt=me;me=Me,Me=nt}Re[0]<0&&(Le[me]=-1),He[1]>0&&(Ne[Me]=-1);var ft=0,ht=0;for(Be=0;Be<4;++Be)ft+=Math.pow(se[4*me+Be],2),ht+=Math.pow(se[4*Me+Be],2);Le[me]/=Math.sqrt(ft),Ne[Me]/=Math.sqrt(ht),ue.axes[0]=Le,ue.axes[1]=Ne,ue.fragClipBounds[0]=V(R,Se[0],Pe,-1e8),ue.fragClipBounds[1]=V(R,Se[1],Pe,1e8),ye.vao.bind(),ye.vao.draw(be.TRIANGLES,ye.vertexCount),ye.lineWidth>0&&(be.lineWidth(ye.lineWidth*xe),ye.vao.draw(be.LINES,ye.lineVertexCount,ye.vertexCount)),ye.vao.unbind()}}($,J,X,ae),ce===J.hasAlpha||le){ee.bind();var we=ee.uniforms;we.model=X.model||y,we.view=X.view||y,we.projection=X.projection||y,E[0]=2/pe.drawingBufferWidth,E[1]=2/pe.drawingBufferHeight,we.screenSize=E,we.highlightId=J.highlightId,we.highlightScale=J.highlightScale,we.fragClipBounds=q,we.clipBounds=J.axes.bounds,we.opacity=J.opacity,we.pickGroup=J.pickId/255,we.pixelRatio=ae,J.vao.bind(),J.vao.draw(pe.TRIANGLES,J.vertexCount),J.lineWidth>0&&(pe.lineWidth(J.lineWidth*ae),J.vao.draw(pe.LINES,J.lineVertexCount,J.vertexCount)),J.vao.unbind()}}function te(ee,$,J,X){var ae;ae=g(ee)?$<ee.length?ee[$]:void 0:ee,ae=c(ae);var ce=!0;i(ae)&&(ae="\u25bc",ce=!1),J||(J={});var le=J.family;g(le)&&(le=le[$]),le||(le="normal");var pe=J.weight;g(pe)&&(pe=pe[$]),pe||(pe="normal");var we=J.style;g(we)&&(we=we[$]),we||(we="normal");var Te=J.variant;g(Te)&&(Te=Te[$]),Te||(Te="normal");var ye=f(ae,{family:le,weight:pe,style:we,variant:Te},X);return{mesh:(ye=f(ae,J,X))[0],lines:ye[1],bounds:ye[2],visible:ce}}w.draw=function(ee){ie(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,ee,this.pixelRatio,!1,!1)},w.drawTransparent=function(ee){ie(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,ee,this.pixelRatio,!0,!1)},w.drawPick=function(ee){ie(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,ee,1,!0,!0)},w.pick=function(ee){if(!ee||ee.id!==this.pickId)return null;var $=ee.value[2]+(ee.value[1]<<8)+(ee.value[0]<<16);if($>=this.pointCount||$<0)return null;var J=this.points[$],X=this._selectResult;X.index=$;for(var ae=0;ae<3;++ae)X.position[ae]=X.dataCoordinate[ae]=J[ae];return X},w.highlight=function(ee){if(ee){var $=ee.index;this.highlightId=[(255&$)/255,($>>8&255)/255,($>>16&255)/255,0]}else this.highlightId=[1,1,1,1]},w.update=function(ee){if("perspective"in(ee=ee||{})&&(this.useOrtho=!ee.perspective),"orthographic"in ee&&(this.useOrtho=!!ee.orthographic),"lineWidth"in ee&&(this.lineWidth=ee.lineWidth),"project"in ee)if(g(ee.project))this.axesProject=ee.project;else{var $=!!ee.project;this.axesProject=[$,$,$]}if("projectScale"in ee)if(g(ee.projectScale))this.projectScale=ee.projectScale.slice();else{var J=+ee.projectScale;this.projectScale=[J,J,J]}if(this.projectHasAlpha=!1,"projectOpacity"in ee){this.projectOpacity=g(ee.projectOpacity)?ee.projectOpacity.slice():[J=+ee.projectOpacity,J,J];for(var X=0;X<3;++X)this.projectOpacity[X]=h(this.projectOpacity[X]),this.projectOpacity[X]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in ee&&(this.opacity=h(ee.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var ae,ce,le=ee.position,pe={family:ee.font||"normal",style:ee.fontStyle||"normal",weight:ee.fontWeight||"normal",variant:ee.fontVariant||"normal"},we=ee.alignment||[0,0];if(2===we.length)ae=we[0],ce=we[1];else for(ae=[],ce=[],X=0;X<we.length;++X)ae[X]=we[X][0],ce[X]=we[X][1];var Te=[1/0,1/0,1/0],ye=[-1/0,-1/0,-1/0],ve=ee.glyph,xe=ee.color,Ce=ee.size,Oe=ee.angle,be=ee.lineColor,ue=-1,se=0,ge=0,Ie=0;if(le.length){Ie=le.length;e:for(X=0;X<Ie;++X){for(var ke=le[X],Se=0;Se<3;++Se)if(isNaN(ke[Se])||!isFinite(ke[Se]))continue e;var Pe=(At=te(ve,X,pe,this.pixelRatio)).mesh,Fe=At.lines,Be=At.bounds;se+=3*Pe.cells.length,ge+=2*Fe.edges.length}}var me=se+ge,Me=a.mallocFloat(3*me),Le=a.mallocFloat(4*me),Ne=a.mallocFloat(2*me),Re=a.mallocUint32(me);if(me>0){var He=0,Ze=se,nt=[0,0,0,1],ft=[0,0,0,1],ht=g(xe)&&g(xe[0]),Tt=g(be)&&g(be[0]);e:for(X=0;X<Ie;++X){for(ue+=1,ke=le[X],Se=0;Se<3;++Se){if(isNaN(ke[Se])||!isFinite(ke[Se]))continue e;ye[Se]=Math.max(ye[Se],ke[Se]),Te[Se]=Math.min(Te[Se],ke[Se])}Pe=(At=te(ve,X,pe,this.pixelRatio)).mesh,Fe=At.lines,Be=At.bounds;var At,_t=At.visible;if(_t)if(g(xe)){if(3===(ot=ht?X<xe.length?xe[X]:[0,0,0,0]:xe).length){for(Se=0;Se<3;++Se)nt[Se]=ot[Se];nt[3]=1}else if(4===ot.length){for(Se=0;Se<4;++Se)nt[Se]=ot[Se];!this.hasAlpha&&ot[3]<1&&(this.hasAlpha=!0)}}else nt[0]=nt[1]=nt[2]=0,nt[3]=1;else nt=[1,1,1,0];if(_t)if(g(be)){var ot;if(3===(ot=Tt?X<be.length?be[X]:[0,0,0,0]:be).length){for(Se=0;Se<3;++Se)ft[Se]=ot[Se];ft[Se]=1}else if(4===ot.length){for(Se=0;Se<4;++Se)ft[Se]=ot[Se];!this.hasAlpha&&ot[3]<1&&(this.hasAlpha=!0)}}else ft[0]=ft[1]=ft[2]=0,ft[3]=1;else ft=[1,1,1,0];var it=.5;_t?g(Ce)?it=X<Ce.length?+Ce[X]:12:Ce?it=+Ce:this.useOrtho&&(it=12):it=0;var Pt=0;g(Oe)?Pt=X<Oe.length?+Oe[X]:0:Oe&&(Pt=+Oe);var jt=Math.cos(Pt),Ut=Math.sin(Pt);for(ke=le[X],Se=0;Se<3;++Se)ye[Se]=Math.max(ye[Se],ke[Se]),Te[Se]=Math.min(Te[Se],ke[Se]);var Rt=ae,Je=ce;Rt=0,g(ae)?Rt=X<ae.length?ae[X]:0:ae&&(Rt=ae),Je=0,g(ce)?Je=X<ce.length?ce[X]:0:ce&&(Je=ce);var et=[Rt*=Rt>0?1-Be[0][0]:Rt<0?1+Be[1][0]:1,Je*=Je>0?1-Be[0][1]:Je<0?1+Be[1][1]:1],qe=Pe.cells||[],$e=Pe.positions||[];for(Se=0;Se<qe.length;++Se)for(var pt=qe[Se],ct=0;ct<3;++ct){for(var Ve=0;Ve<3;++Ve)Me[3*He+Ve]=ke[Ve];for(Ve=0;Ve<4;++Ve)Le[4*He+Ve]=nt[Ve];Re[He]=ue;var Ge=$e[pt[ct]];Ne[2*He]=it*(jt*Ge[0]-Ut*Ge[1]+et[0]),Ne[2*He+1]=it*(Ut*Ge[0]+jt*Ge[1]+et[1]),He+=1}for(qe=Fe.edges,$e=Fe.positions,Se=0;Se<qe.length;++Se)for(pt=qe[Se],ct=0;ct<2;++ct){for(Ve=0;Ve<3;++Ve)Me[3*Ze+Ve]=ke[Ve];for(Ve=0;Ve<4;++Ve)Le[4*Ze+Ve]=ft[Ve];Re[Ze]=ue,Ne[2*Ze]=it*(jt*(Ge=$e[pt[ct]])[0]-Ut*Ge[1]+et[0]),Ne[2*Ze+1]=it*(Ut*Ge[0]+jt*Ge[1]+et[1]),Ze+=1}}}this.bounds=[Te,ye],this.points=le,this.pointCount=le.length,this.vertexCount=se,this.lineVertexCount=ge,this.pointBuffer.update(Me),this.colorBuffer.update(Le),this.glyphBuffer.update(Ne),this.idBuffer.update(Re),a.free(Me),a.free(Le),a.free(Ne),a.free(Re)},w.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},4298:function(p,l,t){"use strict";var i=t(3236);l.boxVertex=i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),l.boxFragment=i(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},3161:function(p,l,t){"use strict";var i=t(9405),r=t(2762),n=t(4298);function a(u,f,c){this.plot=u,this.boxBuffer=f,this.boxShader=c,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}p.exports=function(u,f){var c=u.gl,y=new a(u,r(c,[0,0,0,1,1,0,1,1]),i(c,n.boxVertex,n.boxFragment));return y.update(f),u.addOverlay(y),y};var s=a.prototype;s.draw=function(){if(this.enabled){var u=this.plot,f=this.selectBox,c=this.borderWidth,y=this.innerColor,d=this.outerColor,m=this.borderColor,g=u.box,x=u.screenBox,v=u.dataBox,b=u.viewBox,h=u.pixelRatio,S=(f[0]-v[0])*(b[2]-b[0])/(v[2]-v[0])+b[0],w=(f[1]-v[1])*(b[3]-b[1])/(v[3]-v[1])+b[1],E=(f[2]-v[0])*(b[2]-b[0])/(v[2]-v[0])+b[0],P=(f[3]-v[1])*(b[3]-b[1])/(v[3]-v[1])+b[1];if(S=Math.max(S,b[0]),w=Math.max(w,b[1]),E=Math.min(E,b[2]),P=Math.min(P,b[3]),!(E<S||P<w)){g.bind();var I=x[2]-x[0],O=x[3]-x[1];if(this.outerFill&&(g.drawBox(0,0,I,w,d),g.drawBox(0,w,S,P,d),g.drawBox(0,P,I,O,d),g.drawBox(E,w,I,P,d)),this.innerFill&&g.drawBox(S,w,E,P,y),c>0){var z=c*h;g.drawBox(S-z,w-z,E+z,w+z,m),g.drawBox(S-z,P-z,E+z,P+z,m),g.drawBox(S-z,w-z,S+z,P+z,m),g.drawBox(E-z,w-z,E+z,P+z,m)}}}},s.update=function(u){this.innerFill=!!(u=u||{}).innerFill,this.outerFill=!!u.outerFill,this.innerColor=(u.innerColor||[0,0,0,.5]).slice(),this.outerColor=(u.outerColor||[0,0,0,.5]).slice(),this.borderColor=(u.borderColor||[0,0,0,1]).slice(),this.borderWidth=u.borderWidth||0,this.selectBox=(u.selectBox||this.selectBox).slice()},s.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},3589:function(p,l,t){"use strict";p.exports=function(c,y){var d=y[0],m=y[1];return new u(c,i(c,d,m,{}),r.mallocUint8(d*m*4))};var i=t(2260),r=t(1888),n=t(9618),a=t(8828).nextPow2;function s(c,y,d,m,g){this.coord=[c,y],this.id=d,this.value=m,this.distance=g}function u(c,y,d){this.gl=c,this.fbo=y,this.buffer=d,this._readTimeout=null;var m=this;this._readCallback=function(){m.gl&&(y.bind(),c.readPixels(0,0,y.shape[0],y.shape[1],c.RGBA,c.UNSIGNED_BYTE,m.buffer),m._readTimeout=null)}}var f=u.prototype;Object.defineProperty(f,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(c){if(this.gl){this.fbo.shape=c;var y=this.fbo.shape[0],d=this.fbo.shape[1];if(d*y*4>this.buffer.length){r.free(this.buffer);for(var m=this.buffer=r.mallocUint8(a(d*y*4)),g=0;g<d*y*4;++g)m[g]=255}return c}}}),f.begin=function(){var c=this.gl;c&&(this.fbo.bind(),c.clearColor(1,1,1,1),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT))},f.end=function(){var c=this.gl;c&&(c.bindFramebuffer(c.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},f.query=function(c,y,d){if(!this.gl)return null;var m=this.fbo.shape.slice();c|=0,y|=0,"number"!=typeof d&&(d=1);var g=0|Math.min(Math.max(c-d,0),m[0]),x=0|Math.min(Math.max(c+d,0),m[0]),v=0|Math.min(Math.max(y-d,0),m[1]),b=0|Math.min(Math.max(y+d,0),m[1]);if(x<=g||b<=v)return null;var h=[x-g,b-v],S=n(this.buffer,[h[0],h[1],4],[4,4*m[0],1],4*(g+m[0]*v)),w=function(I,O,z){for(var U=1e8,R=-1,j=-1,Y=I.shape[0],B=I.shape[1],V=0;V<Y;V++)for(var q=0;q<B;q++){var ie=I.get(V,q,0),te=I.get(V,q,1),ee=I.get(V,q,2),$=I.get(V,q,3);if(ie<255||te<255||ee<255||$<255){var J=O-V,X=z-q,ae=J*J+X*X;ae<U&&(U=ae,R=V,j=q)}}return[R,j,U]}(S.hi(h[0],h[1],1),d,d),E=w[0],P=w[1];return E<0||Math.pow(this.radius,2)<w[2]?null:new s(E+g|0,P+v|0,S.get(E,P,0),[S.get(E,P,1),S.get(E,P,2),S.get(E,P,3)],Math.sqrt(w[2]))},f.dispose=function(){this.gl&&(this.fbo.dispose(),r.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},9405:function(p,l,t){"use strict";var i=t(3327),r=t(8731),n=t(216),a=t(5091),s=t(2145),u=t(8866);function f(d){this.gl=d,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var c=f.prototype;function y(d,m){return d.name<m.name?-1:1}c.bind=function(){var d;this.program||this._relink();var m=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),g=this.gl.lastAttribCount;if(m>g)for(d=g;d<m;d++)this.gl.enableVertexAttribArray(d);else if(g>m)for(d=m;d<g;d++)this.gl.disableVertexAttribArray(d);this.gl.lastAttribCount=m,this.gl.useProgram(this.program)},c.dispose=function(){for(var d=this.gl.lastAttribCount,m=0;m<d;m++)this.gl.disableVertexAttribArray(m);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},c.update=function(d,m,g,x){if(!m||1===arguments.length){var v=d;d=v.vertex,m=v.fragment,g=v.uniforms,x=v.attributes}var b=this,h=b.gl,S=b._vref;b._vref=a.shader(h,h.VERTEX_SHADER,d),S&&S.dispose(),b.vertShader=b._vref.shader;var w=this._fref;if(b._fref=a.shader(h,h.FRAGMENT_SHADER,m),w&&w.dispose(),b.fragShader=b._fref.shader,!g||!x){var E=h.createProgram();if(h.attachShader(E,b.fragShader),h.attachShader(E,b.vertShader),h.linkProgram(E),!h.getProgramParameter(E,h.LINK_STATUS)){var P=h.getProgramInfoLog(E);throw new u(P,"Error linking program:"+P)}g=g||s.uniforms(h,E),x=x||s.attributes(h,E),h.deleteProgram(E)}(x=x.slice()).sort(y);var I,O=[],z=[],U=[];for(I=0;I<x.length;++I){var R=x[I];if(R.type.indexOf("mat")>=0){for(var j=0|R.type.charAt(R.type.length-1),Y=new Array(j),B=0;B<j;++B)Y[B]=U.length,z.push(R.name+"["+B+"]"),"number"==typeof R.location?U.push(R.location+B):Array.isArray(R.location)&&R.location.length===j&&"number"==typeof R.location[B]?U.push(0|R.location[B]):U.push(-1);O.push({name:R.name,type:R.type,locations:Y})}else O.push({name:R.name,type:R.type,locations:[U.length]}),z.push(R.name),U.push("number"==typeof R.location?0|R.location:-1)}var V=0;for(I=0;I<U.length;++I)if(U[I]<0){for(;U.indexOf(V)>=0;)V+=1;U[I]=V}var q=new Array(g.length);function ie(){b.program=a.program(h,b._vref,b._fref,z,U);for(var te=0;te<g.length;++te)q[te]=h.getUniformLocation(b.program,g[te].name)}ie(),b._relink=ie,b.types={uniforms:n(g),attributes:n(x)},b.attributes=r(h,b,O,U),Object.defineProperty(b,"uniforms",i(h,b,g,q))},p.exports=function(d,m,g,x,v){var b=new f(d);return b.update(m,g,x,v),b}},8866:function(p){function l(t,i,r){this.shortMessage=i||"",this.longMessage=r||"",this.rawError=t||"",this.message="gl-shader: "+(i||t||"")+(r?"\n"+r:""),this.stack=(new Error).stack}(l.prototype=new Error).name="GLError",l.prototype.constructor=l,p.exports=l},8731:function(p,l,t){"use strict";p.exports=function(f,c,y,d){for(var m={},g=0,x=y.length;g<x;++g){var v=y[g],b=v.name,h=v.type,S=v.locations;switch(h){case"bool":case"int":case"float":s(f,c,S[0],d,1,m,b);break;default:if(h.indexOf("vec")>=0){if((w=h.charCodeAt(h.length-1)-48)<2||w>4)throw new i("","Invalid data type for attribute "+b+": "+h);s(f,c,S[0],d,w,m,b)}else{if(!(h.indexOf("mat")>=0))throw new i("","Unknown data type for attribute "+b+": "+h);var w;if((w=h.charCodeAt(h.length-1)-48)<2||w>4)throw new i("","Invalid data type for attribute "+b+": "+h);u(f,c,S,d,w,m,b)}}}return m};var i=t(8866);function r(f,c,y,d,m,g){this._gl=f,this._wrapper=c,this._index=y,this._locations=d,this._dimension=m,this._constFunc=g}var n=r.prototype;n.pointer=function(f,c,y,d){var m=this,g=m._gl,x=m._locations[m._index];g.vertexAttribPointer(x,m._dimension,f||g.FLOAT,!!c,y||0,d||0),g.enableVertexAttribArray(x)},n.set=function(f,c,y,d){return this._constFunc(this._locations[this._index],f,c,y,d)},Object.defineProperty(n,"location",{get:function(){return this._locations[this._index]},set:function(f){return f!==this._locations[this._index]&&(this._locations[this._index]=0|f,this._wrapper.program=null),0|f}});var a=[function(f,c,y){return void 0===y.length?f.vertexAttrib1f(c,y):f.vertexAttrib1fv(c,y)},function(f,c,y,d){return void 0===y.length?f.vertexAttrib2f(c,y,d):f.vertexAttrib2fv(c,y)},function(f,c,y,d,m){return void 0===y.length?f.vertexAttrib3f(c,y,d,m):f.vertexAttrib3fv(c,y)},function(f,c,y,d,m,g){return void 0===y.length?f.vertexAttrib4f(c,y,d,m,g):f.vertexAttrib4fv(c,y)}];function s(f,c,y,d,m,g,x){var v=a[m],b=new r(f,c,y,d,m,v);Object.defineProperty(g,x,{set:function(h){return f.disableVertexAttribArray(d[y]),v(f,d[y],h),h},get:function(){return b},enumerable:!0})}function u(f,c,y,d,m,g,x){for(var v=new Array(m),b=new Array(m),h=0;h<m;++h)s(f,c,y[h],d,m,v,h),b[h]=v[h];Object.defineProperty(v,"location",{set:function(E){if(Array.isArray(E))for(var P=0;P<m;++P)b[P].location=E[P];else for(P=0;P<m;++P)b[P].location=E+P;return E},get:function(){for(var E=new Array(m),P=0;P<m;++P)E[P]=d[y[P]];return E},enumerable:!0}),v.pointer=function(E,P,I,O){E=E||f.FLOAT,P=!!P,I=I||m*m,O=O||0;for(var z=0;z<m;++z){var U=d[y[z]];f.vertexAttribPointer(U,m,E,P,I,O+z*m),f.enableVertexAttribArray(U)}};var S=new Array(m),w=f["vertexAttrib"+m+"fv"];Object.defineProperty(g,x,{set:function(E){for(var P=0;P<m;++P){var I=d[y[P]];if(f.disableVertexAttribArray(I),Array.isArray(E[0]))w.call(f,I,E[P]);else{for(var O=0;O<m;++O)S[O]=E[m*P+O];w.call(f,I,S)}}return E},get:function(){return v},enumerable:!0})}},3327:function(p,l,t){"use strict";var i=t(216),r=t(8866);function n(s){return function(){return s}}function a(s,u){for(var f=new Array(s),c=0;c<s;++c)f[c]=u;return f}p.exports=function(s,u,f,c){function y(v){return function(b){for(var h=d("",v),S=0;S<h.length;++S){var w=h[S],E=w[0],P=w[1];if(c[P]){var I=b;if("string"==typeof E&&(0===E.indexOf(".")||0===E.indexOf("["))){var O=E;if(0===E.indexOf(".")&&(O=E.slice(1)),O.indexOf("]")===O.length-1){var z=O.indexOf("["),U=O.slice(0,z),R=O.slice(z+1,O.length-1);I=U?b[U][R]:b[R]}else I=b[O]}var j,Y=f[P].type;switch(Y){case"bool":case"int":case"sampler2D":case"samplerCube":s.uniform1i(c[P],I);break;case"float":s.uniform1f(c[P],I);break;default:var B=Y.indexOf("vec");if(!(0<=B&&B<=1&&Y.length===4+B)){if(0===Y.indexOf("mat")&&4===Y.length){if((j=Y.charCodeAt(Y.length-1)-48)<2||j>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+Y);s["uniformMatrix"+j+"fv"](c[P],!1,I);break}throw new r("","Unknown uniform data type for "+name+": "+Y)}if((j=Y.charCodeAt(Y.length-1)-48)<2||j>4)throw new r("","Invalid data type");switch(Y.charAt(0)){case"b":case"i":s["uniform"+j+"iv"](c[P],I);break;case"v":s["uniform"+j+"fv"](c[P],I);break;default:throw new r("","Unrecognized data type for vector "+name+": "+Y)}}}}}}function d(v,b){if("object"!=typeof b)return[[v,b]];var h=[];for(var S in b){var w=b[S],E=v;parseInt(S)+""===S?E+="["+S+"]":E+="."+S,"object"==typeof w?h.push.apply(h,d(E,w)):h.push([E,w])}return h}function m(v,b,h){if("object"==typeof h){var S=g(h);Object.defineProperty(v,b,{get:n(S),set:y(h),enumerable:!0,configurable:!1})}else c[h]?Object.defineProperty(v,b,{get:(w=h,function(E,P,I){return E.getUniform(P.program,I[w])}),set:y(h),enumerable:!0,configurable:!1}):v[b]=function(E){switch(E){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var P=E.indexOf("vec");if(0<=P&&P<=1&&E.length===4+P){if((I=E.charCodeAt(E.length-1)-48)<2||I>4)throw new r("","Invalid data type");return"b"===E.charAt(0)?a(I,!1):a(I,0)}if(0===E.indexOf("mat")&&4===E.length){var I;if((I=E.charCodeAt(E.length-1)-48)<2||I>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+E);return a(I*I,0)}throw new r("","Unknown uniform data type for "+name+": "+E)}}(f[h].type);var w}function g(v){var b;if(Array.isArray(v)){b=new Array(v.length);for(var h=0;h<v.length;++h)m(b,h,v[h])}else for(var S in b={},v)m(b,S,v[S]);return b}var x=i(f,!0);return{get:n(g(x)),set:y(x),enumerable:!0,configurable:!0}}},216:function(p){"use strict";p.exports=function(l,t){for(var i={},r=0;r<l.length;++r)for(var n=l[r].name.split("."),a=i,s=0;s<n.length;++s){var u=n[s].split("[");if(u.length>1){u[0]in a||(a[u[0]]=[]),a=a[u[0]];for(var f=1;f<u.length;++f){var c=parseInt(u[f]);f<u.length-1||s<n.length-1?(c in a||(a[c]=f<u.length-1?[]:{}),a=a[c]):a[c]=t?r:l[r].type}}else s<n.length-1?(u[0]in a||(a[u[0]]={}),a=a[u[0]]):a[u[0]]=t?r:l[r].type}return i}},2145:function(p,l){"use strict";l.uniforms=function(n,a){for(var s=n.getProgramParameter(a,n.ACTIVE_UNIFORMS),u=[],f=0;f<s;++f){var c=n.getActiveUniform(a,f);if(c){var y=r(n,c.type);if(c.size>1)for(var d=0;d<c.size;++d)u.push({name:c.name.replace("[0]","["+d+"]"),type:y});else u.push({name:c.name,type:y})}}return u},l.attributes=function(n,a){for(var s=n.getProgramParameter(a,n.ACTIVE_ATTRIBUTES),u=[],f=0;f<s;++f){var c=n.getActiveAttrib(a,f);c&&u.push({name:c.name,type:r(n,c.type)})}return u};var t={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},i=null;function r(n,a){if(!i){var s=Object.keys(t);i={};for(var u=0;u<s.length;++u){var f=s[u];i[n[f]]=t[f]}}return i[a]}},5091:function(p,l,t){"use strict";l.shader=function(y,d,m){return c(y).getShaderReference(d,m)},l.program=function(y,d,m,g,x){return c(y).getProgram(d,m,g,x)};var i=t(8866),r=t(2992),n=new(typeof WeakMap>"u"?t(606):WeakMap),a=0;function s(y,d,m,g,x,v,b){this.id=y,this.src=d,this.type=m,this.shader=g,this.count=v,this.programs=[],this.cache=b}function u(y){this.gl=y,this.shaders=[{},{}],this.programs={}}s.prototype.dispose=function(){if(0==--this.count){for(var y=this.cache,d=y.gl,m=this.programs,g=0,x=m.length;g<x;++g){var v=y.programs[m[g]];v&&(delete y.programs[g],d.deleteProgram(v))}d.deleteShader(this.shader),delete y.shaders[this.type===d.FRAGMENT_SHADER|0][this.src]}};var f=u.prototype;function c(y){var d=n.get(y);return d||(d=new u(y),n.set(y,d)),d}f.getShaderReference=function(y,d){var m=this.gl,g=this.shaders[y===m.FRAGMENT_SHADER|0],x=g[d];if(x&&m.isShader(x.shader))x.count+=1;else{var v=function(b,h,S){var w=b.createShader(h);if(b.shaderSource(w,S),b.compileShader(w),!b.getShaderParameter(w,b.COMPILE_STATUS)){var E=b.getShaderInfoLog(w);try{var P=r(E,S,h)}catch(I){throw console.warn("Failed to format compiler error: "+I),new i(E,"Error compiling shader:\n"+E)}throw new i(E,P.short,P.long)}return w}(m,y,d);x=g[d]=new s(a++,d,y,v,[],1,this)}return x},f.getProgram=function(y,d,m,g){var x=[y.id,d.id,m.join(":"),g.join(":")].join("@"),v=this.programs[x];return v&&this.gl.isProgram(v)||(this.programs[x]=v=function(b,h,S,w,E){var P=b.createProgram();b.attachShader(P,h),b.attachShader(P,S);for(var I=0;I<w.length;++I)b.bindAttribLocation(P,E[I],w[I]);if(b.linkProgram(P),!b.getProgramParameter(P,b.LINK_STATUS)){var O=b.getProgramInfoLog(P);throw new i(O,"Error linking program: "+O)}return P}(this.gl,y.shader,d.shader,m,g),y.programs.push(x),d.programs.push(x)),v}},4098:function(p){"use strict";function l(i){this.plot=i,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}p.exports=function(i,r){var n=new l(i);return n.update(r),i.addOverlay(n),n};var t=l.prototype;t.update=function(i){this.enable=((i=i||{}).enable||[!0,!0,!1,!1]).slice(),this.width=(i.width||[1,1,1,1]).slice(),this.color=(i.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(r){return r.slice()}),this.center=(i.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},t.draw=function(){var i=this.enable,r=this.width,n=this.color,a=this.center,s=this.plot,u=s.line,f=s.dataBox,c=s.viewBox;if(u.bind(),f[0]<=a[0]&&a[0]<=f[2]&&f[1]<=a[1]&&a[1]<=f[3]){var y=c[0]+(a[0]-f[0])/(f[2]-f[0])*(c[2]-c[0]),d=c[1]+(a[1]-f[1])/(f[3]-f[1])*(c[3]-c[1]);i[0]&&u.drawLine(y,d,c[0],d,r[0],n[0]),i[1]&&u.drawLine(y,d,y,c[1],r[1],n[1]),i[2]&&u.drawLine(y,d,c[2],d,r[2],n[2]),i[3]&&u.drawLine(y,d,y,c[3],r[3],n[3])}},t.dispose=function(){this.plot.removeOverlay(this)}},1493:function(p,l,t){"use strict";var i=t(3236),r=t(9405),n=i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * (view * (model * vec4(vertexPosition, 1.0)));\n  vec2 clipOffset = (projection * (view * (model * vec4(color, 0.0)))).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),a=i(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);p.exports=function(s){return r(s,n,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},4449:function(p,l,t){"use strict";var i=t(2762),r=t(8116),n=t(1493);p.exports=function(d,m){var g=[];function x(w,E,P,I,O,z){var U=[w,E,P,0,0,0,1];U[I+3]=1,U[I]=O,g.push.apply(g,U),U[6]=-1,g.push.apply(g,U),U[I]=z,g.push.apply(g,U),g.push.apply(g,U),U[6]=1,g.push.apply(g,U),U[I]=O,g.push.apply(g,U)}x(0,0,0,0,0,1),x(0,0,0,1,0,1),x(0,0,0,2,0,1),x(1,0,0,1,-1,1),x(1,0,0,2,-1,1),x(0,1,0,0,-1,1),x(0,1,0,2,-1,1),x(0,0,1,0,-1,1),x(0,0,1,1,-1,1);var v=i(d,g),b=r(d,[{type:d.FLOAT,buffer:v,size:3,offset:0,stride:28},{type:d.FLOAT,buffer:v,size:3,offset:12,stride:28},{type:d.FLOAT,buffer:v,size:1,offset:24,stride:28}]),h=n(d);h.attributes.position.location=0,h.attributes.color.location=1,h.attributes.weight.location=2;var S=new s(d,v,b,h);return S.update(m),S};var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(d,m,g,x){this.gl=d,this.buffer=m,this.vao=g,this.shader=x,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var u=s.prototype,f=[0,0,0],c=[0,0,0],y=[0,0];u.isTransparent=function(){return!1},u.drawTransparent=function(d){},u.draw=function(d){var m=this.gl,g=this.vao,x=this.shader;g.bind(),x.bind();var v,b=d.model||a,h=d.view||a,S=d.projection||a;this.axes&&(v=this.axes.lastCubeProps.axis);for(var w=f,E=c,P=0;P<3;++P)v&&v[P]<0?(w[P]=this.bounds[0][P],E[P]=this.bounds[1][P]):(w[P]=this.bounds[1][P],E[P]=this.bounds[0][P]);for(y[0]=m.drawingBufferWidth,y[1]=m.drawingBufferHeight,x.uniforms.model=b,x.uniforms.view=h,x.uniforms.projection=S,x.uniforms.coordinates=[this.position,w,E],x.uniforms.colors=this.colors,x.uniforms.screenShape=y,P=0;P<3;++P)x.uniforms.lineWidth=this.lineWidth[P]*this.pixelRatio,this.enabled[P]&&(g.draw(m.TRIANGLES,6,6*P),this.drawSides[P]&&g.draw(m.TRIANGLES,12,18+12*P));g.unbind()},u.update=function(d){d&&("bounds"in d&&(this.bounds=d.bounds),"position"in d&&(this.position=d.position),"lineWidth"in d&&(this.lineWidth=d.lineWidth),"colors"in d&&(this.colors=d.colors),"enabled"in d&&(this.enabled=d.enabled),"drawSides"in d&&(this.drawSides=d.drawSides))},u.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},6740:function(p,l,t){var i=t(3236),r=i(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),n=i(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),a=i(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * (view * tubePosition);\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),s=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);l.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},l.pickShader={vertex:a,fragment:s,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7815:function(p,l,t){"use strict";var i=t(2931),r=t(9970),n=["xyz","xzy","yxz","yzx","zxy","zyx"],a=function(y,d){var m,g=y.length;for(m=0;m<g;m++){var x=y[m];if(x===d)return m;if(x>d)return m-1}return m},s=function(y,d,m){return y<d?d:y>m?m:y},u=function(y){var d=1/0;y.sort(function(v,b){return v-b});for(var m=y.length,g=1;g<m;g++){var x=Math.abs(y[g]-y[g-1]);x<d&&(d=x)}return d};p.exports=function(y,d){var m=y.startingPositions,g=y.maxLength||1e3,x=y.tubeSize||1,v=y.absoluteTubeSize,b=y.gridFill||"+x+y+z",h={};-1!==b.indexOf("-x")&&(h.reversedX=!0),-1!==b.indexOf("-y")&&(h.reversedY=!0),-1!==b.indexOf("-z")&&(h.reversedZ=!0),h.filled=n.indexOf(b.replace(/-/g,"").replace(/\+/g,""));var xe,Ce,Oe,be,S=y.getVelocity||function(xe){return function(Ce,Oe,be){var ue=Oe.vectors,se=Oe.meshgrid,ge=Ce[0],Ie=Ce[1],ke=Ce[2],Se=se[0].length,Pe=se[1].length,Fe=se[2].length,Be=a(se[0],ge),me=a(se[1],Ie),Me=a(se[2],ke),Le=Be+1,Ne=me+1,Re=Me+1;if(Be=s(Be,0,Se-1),Le=s(Le,0,Se-1),me=s(me,0,Pe-1),Ne=s(Ne,0,Pe-1),Me=s(Me,0,Fe-1),Re=s(Re,0,Fe-1),Be<0||me<0||Me<0||Le>Se-1||Ne>Pe-1||Re>Fe-1)return i.create();var He,Ze,nt,ft,ht,Tt,At=se[0][Be],ot=se[1][me],Pt=se[2][Me],jt=(ge-At)/(se[0][Le]-At),Ut=(Ie-ot)/(se[1][Ne]-ot),Rt=(ke-Pt)/(se[2][Re]-Pt);switch(isFinite(jt)||(jt=.5),isFinite(Ut)||(Ut=.5),isFinite(Rt)||(Rt=.5),be.reversedX&&(Be=Se-1-Be,Le=Se-1-Le),be.reversedY&&(me=Pe-1-me,Ne=Pe-1-Ne),be.reversedZ&&(Me=Fe-1-Me,Re=Fe-1-Re),be.filled){case 5:ht=Me,Tt=Re,nt=me*Fe,ft=Ne*Fe,He=Be*Fe*Pe,Ze=Le*Fe*Pe;break;case 4:ht=Me,Tt=Re,He=Be*Fe,Ze=Le*Fe,nt=me*Fe*Se,ft=Ne*Fe*Se;break;case 3:nt=me,ft=Ne,ht=Me*Pe,Tt=Re*Pe,He=Be*Pe*Fe,Ze=Le*Pe*Fe;break;case 2:nt=me,ft=Ne,He=Be*Pe,Ze=Le*Pe,ht=Me*Pe*Se,Tt=Re*Pe*Se;break;case 1:He=Be,Ze=Le,ht=Me*Se,Tt=Re*Se,nt=me*Se*Fe,ft=Ne*Se*Fe;break;default:He=Be,Ze=Le,nt=me*Se,ft=Ne*Se,ht=Me*Se*Pe,Tt=Re*Se*Pe}var Je=ue[He+nt+ht],et=ue[He+nt+Tt],qe=ue[He+ft+ht],$e=ue[He+ft+Tt],pt=ue[Ze+nt+ht],ct=ue[Ze+nt+Tt],Ve=ue[Ze+ft+ht],Ge=ue[Ze+ft+Tt],ut=i.create(),Qe=i.create(),yt=i.create(),wt=i.create();i.lerp(ut,Je,pt,jt),i.lerp(Qe,et,ct,jt),i.lerp(yt,qe,Ve,jt),i.lerp(wt,$e,Ge,jt);var kt=i.create(),vt=i.create();i.lerp(kt,ut,yt,Ut),i.lerp(vt,Qe,wt,Ut);var Lt=i.create();return i.lerp(Lt,kt,vt,Rt),Lt}(xe,y,h)},w=y.getDivergence||function(xe,Ce){var Oe=i.create(),be=1e-4;i.add(Oe,xe,[be,0,0]);var ue=S(Oe);i.subtract(ue,ue,Ce),i.scale(ue,ue,1/be),i.add(Oe,xe,[0,be,0]);var se=S(Oe);i.subtract(se,se,Ce),i.scale(se,se,1/be),i.add(Oe,xe,[0,0,be]);var ge=S(Oe);return i.subtract(ge,ge,Ce),i.scale(ge,ge,1/be),i.add(Oe,ue,se),i.add(Oe,Oe,ge),Oe},E=[],P=d[0][0],I=d[0][1],O=d[0][2],z=d[1][0],U=d[1][1],R=d[1][2],Y=10*i.distance(d[0],d[1])/g,B=Y*Y,V=1,q=0,ie=m.length;ie>1&&(V=function(xe){for(var Ce=[],Oe=[],be=[],ue={},se={},ge={},Ie=xe.length,ke=0;ke<Ie;ke++){var Se=xe[ke],Pe=Se[0],Fe=Se[1],Be=Se[2];ue[Pe]||(Ce.push(Pe),ue[Pe]=!0),se[Fe]||(Oe.push(Fe),se[Fe]=!0),ge[Be]||(be.push(Be),ge[Be]=!0)}var me=u(Ce),Me=u(Oe),Le=u(be),Ne=Math.min(me,Me,Le);return isFinite(Ne)?Ne:1}(m));for(var te=0;te<ie;te++){var ee=i.create();i.copy(ee,m[te]);var $=[ee],J=[],X=S(ee),ae=ee;J.push(X);var ce=[],le=w(ee,X),pe=i.length(le);isFinite(pe)&&pe>q&&(q=pe),ce.push(pe),E.push({points:$,velocities:J,divergences:ce});for(var we=0;we<100*g&&$.length<g&&(Ce=void 0,Oe=void 0,be=void 0,Oe=(xe=ee)[1],be=xe[2],!((Ce=xe[0])<P||Ce>z||Oe<I||Oe>U||be<O||be>R));){we++;var Te=i.clone(X),ye=i.squaredLength(Te);if(0===ye)break;ye>B&&i.scale(Te,Te,Y/Math.sqrt(ye)),i.add(Te,Te,ee),X=S(Te),i.squaredDistance(ae,Te)-B>-1e-4*B&&($.push(Te),ae=Te,J.push(X),le=w(Te,X),pe=i.length(le),isFinite(pe)&&pe>q&&(q=pe),ce.push(pe)),ee=Te}}var ve=function(xe,Ce,Oe,be){for(var ue=0,se=0;se<xe.length;se++)for(var ge=xe[se].velocities,Ie=0;Ie<ge.length;Ie++)ue=Math.max(ue,i.length(ge[Ie]));var ke=xe.map(function(He){return function(Ze,nt,ft,ht){for(var Tt=Ze.points,At=Ze.velocities,_t=Ze.divergences,ot=[],it=[],Pt=[],jt=[],Ut=[],Rt=[],Je=0,et=0,qe=r.create(),$e=r.create(),pt=0;pt<Tt.length;pt++){var ct=Tt[pt],Ve=At[pt],Ge=_t[pt];0===nt&&(Ge=.05*ft),et=i.length(Ve)/ht,qe=r.create(),i.copy(qe,Ve),qe[3]=Ge;for(var ut=0;ut<8;ut++)Ut[ut]=[ct[0],ct[1],ct[2],ut];if(jt.length>0)for(ut=0;ut<8;ut++){var Qe=(ut+1)%8;ot.push(jt[ut],Ut[ut],Ut[Qe],Ut[Qe],jt[Qe],jt[ut]),Pt.push($e,qe,qe,qe,$e,$e),Rt.push(Je,et,et,et,Je,Je);var yt=ot.length;it.push([yt-6,yt-5,yt-4],[yt-3,yt-2,yt-1])}var wt=jt;jt=Ut,Ut=wt;var kt=$e;$e=qe,qe=kt;var vt=Je;Je=et,et=vt}return{positions:ot,cells:it,vectors:Pt,vertexIntensity:Rt}}(He,Oe,be,ue)}),Se=[],Pe=[],Fe=[],Be=[];for(se=0;se<ke.length;se++){var me=ke[se],Me=Se.length;for(Se=Se.concat(me.positions),Fe=Fe.concat(me.vectors),Be=Be.concat(me.vertexIntensity),Ie=0;Ie<me.cells.length;Ie++){var Le=me.cells[Ie],Ne=[];Pe.push(Ne);for(var Re=0;Re<Le.length;Re++)Ne.push(Le[Re]+Me)}}return{positions:Se,cells:Pe,vectors:Fe,vertexIntensity:Be,colormap:Ce}}(E,y.colormap,q,V);return v?ve.tubeScale=v:(0===q&&(q=1),ve.tubeScale=.5*x*V/q),ve};var f=t(6740),c=t(6405).createMesh;p.exports.createTubeMesh=function(y,d){return c(y,d,{shaders:f,traceType:"streamtube"})}},990:function(p,l,t){var i=t(9405),r=t(3236),n=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  mat4 objectOffsetTranslation = mat4(1.0) + mat4(vec4(0), vec4(0), vec4(0), vec4(objectOffset, 0));\n  vec4 worldPosition = (model * objectOffsetTranslation) * vec4(localCoordinate, 1.0);\n  vec4 clipPosition = projection * (view * worldPosition);\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),a=r(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color \u2014 in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),s=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  mat4 objectOffsetTranslation = mat4(1.0) + mat4(vec4(0), vec4(0), vec4(0), vec4(objectOffset, 0));\n  vec4 worldPosition = (model * objectOffsetTranslation) * vec4(dataCoordinate, 1.0);\n\n  vec4 clipPosition = projection * (view * worldPosition);\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),u=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);l.createShader=function(f){var c=i(f,n,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c.attributes.normal.location=2,c},l.createPickShader=function(f){var c=i(f,n,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c.attributes.normal.location=2,c},l.createContourShader=function(f){var c=i(f,s,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c},l.createPickContourShader=function(f){var c=i(f,s,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c}},9499:function(p,l,t){"use strict";p.exports=function(le){var pe=le.gl,we=h(pe),Te=w(pe),ye=S(pe),ve=E(pe),xe=r(pe),Ce=n(pe,[{buffer:xe,size:4,stride:P,offset:0},{buffer:xe,size:3,stride:P,offset:16},{buffer:xe,size:3,stride:P,offset:28}]),Oe=r(pe),be=n(pe,[{buffer:Oe,size:4,stride:20,offset:0},{buffer:Oe,size:1,stride:20,offset:16}]),ue=r(pe),se=n(pe,[{buffer:ue,size:2,type:pe.FLOAT}]),ge=a(pe,1,R,pe.RGBA,pe.UNSIGNED_BYTE);ge.minFilter=pe.LINEAR,ge.magFilter=pe.LINEAR;var Ie=new j(pe,[0,0],[[0,0,0],[0,0,0]],we,Te,xe,Ce,ge,ye,ve,Oe,be,ue,se,[0,0,0]),ke={levels:[[],[],[]]};for(var Se in le)ke[Se]=le[Se];return ke.colormap=ke.colormap||"jet",Ie.update(ke),Ie};var i=t(8828),r=t(2762),n=t(8116),a=t(7766),s=t(1888),u=t(6729),f=t(5298),c=t(9994),y=t(9618),d=t(3711),m=t(6760),g=t(7608),x=t(2478),v=t(6199),b=t(990),h=b.createShader,S=b.createContourShader,w=b.createPickShader,E=b.createPickContourShader,P=40,I=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],O=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],z=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function U(le,pe,we,Te,ye){this.position=le,this.index=pe,this.uv=we,this.level=Te,this.dataCoordinate=ye}!function(){for(var le=0;le<3;++le){var pe=z[le],we=(le+2)%3;pe[(le+1)%3+0]=1,pe[we+3]=1,pe[le+6]=1}}();var R=256;function j(le,pe,we,Te,ye,ve,xe,Ce,Oe,be,ue,se,ge,Ie,ke){this.gl=le,this.shape=pe,this.bounds=we,this.objectOffset=ke,this.intensityBounds=[],this._shader=Te,this._pickShader=ye,this._coordinateBuffer=ve,this._vao=xe,this._colorMap=Ce,this._contourShader=Oe,this._contourPickShader=be,this._contourBuffer=ue,this._contourVAO=se,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new U([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=ge,this._dynamicVAO=Ie,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[y(s.mallocFloat(1024),[0,0]),y(s.mallocFloat(1024),[0,0]),y(s.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var Y=j.prototype;Y.genColormap=function(le,pe){var we=!1,Te=c([u({colormap:le,nshades:R,format:"rgba"}).map(function(ye,ve){var xe=pe?function(Ce,Oe){if(!Oe||!Oe.length)return 1;for(var be=0;be<Oe.length;++be){if(Oe.length<2)return 1;if(Oe[be][0]===Ce)return Oe[be][1];if(Oe[be][0]>Ce&&be>0){var ue=(Oe[be][0]-Ce)/(Oe[be][0]-Oe[be-1][0]);return Oe[be][1]*(1-ue)+ue*Oe[be-1][1]}}return 1}(ve/255,pe):ye[3];return xe<1&&(we=!0),[ye[0],ye[1],ye[2],255*xe]})]);return f.divseq(Te,255),this.hasAlphaScale=we,Te},Y.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},Y.isOpaque=function(){return!this.isTransparent()},Y.pickSlots=1,Y.setPickBase=function(le){this.pickId=le};var B=[0,0,0],V={showSurface:!1,showContour:!1,projections:[I.slice(),I.slice(),I.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function q(le,pe){var we,Te,ye,ve=pe.axes&&pe.axes.lastCubeProps.axis||B,xe=pe.showSurface,Ce=pe.showContour;for(we=0;we<3;++we)for(xe=xe||pe.surfaceProject[we],Te=0;Te<3;++Te)Ce=Ce||pe.contourProject[we][Te];for(we=0;we<3;++we){var Oe=V.projections[we];for(Te=0;Te<16;++Te)Oe[Te]=0;for(Te=0;Te<4;++Te)Oe[5*Te]=1;Oe[5*we]=0,Oe[12+we]=pe.axesBounds[+(ve[we]>0)][we],m(Oe,le.model,Oe);var be=V.clipBounds[we];for(ye=0;ye<2;++ye)for(Te=0;Te<3;++Te)be[ye][Te]=le.clipBounds[ye][Te];be[0][we]=-1e8,be[1][we]=1e8}return V.showSurface=xe,V.showContour=Ce,V}var ie={model:I,view:I,projection:I,inverseModel:I.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},te=I.slice(),ee=[1,0,0,0,1,0,0,0,1];function $(le,pe){le=le||{};var we=this.gl;we.disable(we.CULL_FACE),this._colorMap.bind(0);var Te=ie;Te.model=le.model||I,Te.view=le.view||I,Te.projection=le.projection||I,Te.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],Te.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],Te.objectOffset=this.objectOffset,Te.contourColor=this.contourColor[0],Te.inverseModel=g(Te.inverseModel,Te.model);for(var ye=0;ye<2;++ye)for(var ve=Te.clipBounds[ye],xe=0;xe<3;++xe)ve[xe]=Math.min(Math.max(this.clipBounds[ye][xe],-1e8),1e8);Te.kambient=this.ambientLight,Te.kdiffuse=this.diffuseLight,Te.kspecular=this.specularLight,Te.roughness=this.roughness,Te.fresnel=this.fresnel,Te.opacity=this.opacity,Te.height=0,Te.permutation=ee,Te.vertexColor=this.vertexColor;var Ce=te;for(m(Ce,Te.view,Te.model),m(Ce,Te.projection,Ce),g(Ce,Ce),ye=0;ye<3;++ye)Te.eyePosition[ye]=Ce[12+ye]/Ce[15];var Oe=Ce[15];for(ye=0;ye<3;++ye)Oe+=this.lightPosition[ye]*Ce[4*ye+3];for(ye=0;ye<3;++ye){var be=Ce[12+ye];for(xe=0;xe<3;++xe)be+=Ce[4*xe+ye]*this.lightPosition[xe];Te.lightPosition[ye]=be/Oe}var ue=q(Te,this);if(ue.showSurface){for(this._shader.bind(),this._shader.uniforms=Te,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(we.TRIANGLES,this._vertexCount),ye=0;ye<3;++ye)this.surfaceProject[ye]&&this.vertexCount&&(this._shader.uniforms.model=ue.projections[ye],this._shader.uniforms.clipBounds=ue.clipBounds[ye],this._vao.draw(we.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ue.showContour){var se=this._contourShader;Te.kambient=1,Te.kdiffuse=0,Te.kspecular=0,Te.opacity=1,se.bind(),se.uniforms=Te;var ge=this._contourVAO;for(ge.bind(),ye=0;ye<3;++ye)for(se.uniforms.permutation=z[ye],we.lineWidth(this.contourWidth[ye]*this.pixelRatio),xe=0;xe<this.contourLevels[ye].length;++xe)xe===this.highlightLevel[ye]?(se.uniforms.contourColor=this.highlightColor[ye],se.uniforms.contourTint=this.highlightTint[ye]):0!==xe&&xe-1!==this.highlightLevel[ye]||(se.uniforms.contourColor=this.contourColor[ye],se.uniforms.contourTint=this.contourTint[ye]),this._contourCounts[ye][xe]&&(se.uniforms.height=this.contourLevels[ye][xe],ge.draw(we.LINES,this._contourCounts[ye][xe],this._contourOffsets[ye][xe]));for(ye=0;ye<3;++ye)for(se.uniforms.model=ue.projections[ye],se.uniforms.clipBounds=ue.clipBounds[ye],xe=0;xe<3;++xe)if(this.contourProject[ye][xe]){se.uniforms.permutation=z[xe],we.lineWidth(this.contourWidth[xe]*this.pixelRatio);for(var Ie=0;Ie<this.contourLevels[xe].length;++Ie)Ie===this.highlightLevel[xe]?(se.uniforms.contourColor=this.highlightColor[xe],se.uniforms.contourTint=this.highlightTint[xe]):0!==Ie&&Ie-1!==this.highlightLevel[xe]||(se.uniforms.contourColor=this.contourColor[xe],se.uniforms.contourTint=this.contourTint[xe]),this._contourCounts[xe][Ie]&&(se.uniforms.height=this.contourLevels[xe][Ie],ge.draw(we.LINES,this._contourCounts[xe][Ie],this._contourOffsets[xe][Ie]))}for(ge.unbind(),(ge=this._dynamicVAO).bind(),ye=0;ye<3;++ye)if(0!==this._dynamicCounts[ye])for(se.uniforms.model=Te.model,se.uniforms.clipBounds=Te.clipBounds,se.uniforms.permutation=z[ye],we.lineWidth(this.dynamicWidth[ye]*this.pixelRatio),se.uniforms.contourColor=this.dynamicColor[ye],se.uniforms.contourTint=this.dynamicTint[ye],se.uniforms.height=this.dynamicLevel[ye],ge.draw(we.LINES,this._dynamicCounts[ye],this._dynamicOffsets[ye]),xe=0;xe<3;++xe)this.contourProject[xe][ye]&&(se.uniforms.model=ue.projections[xe],se.uniforms.clipBounds=ue.clipBounds[xe],ge.draw(we.LINES,this._dynamicCounts[ye],this._dynamicOffsets[ye]));ge.unbind()}}Y.draw=function(le){return $.call(this,le,!1)},Y.drawTransparent=function(le){return $.call(this,le,!0)};var J={model:I,view:I,projection:I,inverseModel:I,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function X(le,pe){return Array.isArray(le)?[pe(le[0]),pe(le[1]),pe(le[2])]:[pe(le),pe(le),pe(le)]}function ae(le){return Array.isArray(le)?3===le.length?[le[0],le[1],le[2],1]:[le[0],le[1],le[2],le[3]]:[0,0,0,1]}function ce(le){if(Array.isArray(le)){if(Array.isArray(le))return[ae(le[0]),ae(le[1]),ae(le[2])];var pe=ae(le);return[pe.slice(),pe.slice(),pe.slice()]}}Y.drawPick=function(le){le=le||{};var pe=this.gl;pe.disable(pe.CULL_FACE);var we=J;we.model=le.model||I,we.view=le.view||I,we.projection=le.projection||I,we.shape=this._field[2].shape,we.pickId=this.pickId/255,we.lowerBound=this.bounds[0],we.upperBound=this.bounds[1],we.objectOffset=this.objectOffset,we.permutation=ee;for(var Te=0;Te<2;++Te)for(var ye=we.clipBounds[Te],ve=0;ve<3;++ve)ye[ve]=Math.min(Math.max(this.clipBounds[Te][ve],-1e8),1e8);var xe=q(we,this);if(xe.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=we,this._vao.bind(),this._vao.draw(pe.TRIANGLES,this._vertexCount),Te=0;Te<3;++Te)this.surfaceProject[Te]&&(this._pickShader.uniforms.model=xe.projections[Te],this._pickShader.uniforms.clipBounds=xe.clipBounds[Te],this._vao.draw(pe.TRIANGLES,this._vertexCount));this._vao.unbind()}if(xe.showContour){var Ce=this._contourPickShader;Ce.bind(),Ce.uniforms=we;var Oe=this._contourVAO;for(Oe.bind(),ve=0;ve<3;++ve)for(pe.lineWidth(this.contourWidth[ve]*this.pixelRatio),Ce.uniforms.permutation=z[ve],Te=0;Te<this.contourLevels[ve].length;++Te)this._contourCounts[ve][Te]&&(Ce.uniforms.height=this.contourLevels[ve][Te],Oe.draw(pe.LINES,this._contourCounts[ve][Te],this._contourOffsets[ve][Te]));for(Te=0;Te<3;++Te)for(Ce.uniforms.model=xe.projections[Te],Ce.uniforms.clipBounds=xe.clipBounds[Te],ve=0;ve<3;++ve)if(this.contourProject[Te][ve]){Ce.uniforms.permutation=z[ve],pe.lineWidth(this.contourWidth[ve]*this.pixelRatio);for(var be=0;be<this.contourLevels[ve].length;++be)this._contourCounts[ve][be]&&(Ce.uniforms.height=this.contourLevels[ve][be],Oe.draw(pe.LINES,this._contourCounts[ve][be],this._contourOffsets[ve][be]))}Oe.unbind()}},Y.pick=function(le){if(!le||le.id!==this.pickId)return null;var pe=this._field[2].shape,we=this._pickResult,Te=pe[0]*(le.value[0]+(le.value[2]>>4)/16)/255,ye=Math.floor(Te),ve=Te-ye,xe=pe[1]*(le.value[1]+(15&le.value[2])/16)/255,Ce=Math.floor(xe),Oe=xe-Ce;ye+=1,Ce+=1;var be=we.position;be[0]=be[1]=be[2]=0;for(var ue=0;ue<2;++ue)for(var se=ue?ve:1-ve,ge=0;ge<2;++ge)for(var Ie=ye+ue,ke=Ce+ge,Se=se*(ge?Oe:1-Oe),Pe=0;Pe<3;++Pe)be[Pe]+=this._field[Pe].get(Ie,ke)*Se;for(var Fe=this._pickResult.level,Be=0;Be<3;++Be)if(Fe[Be]=x.le(this.contourLevels[Be],be[Be]),Fe[Be]<0)this.contourLevels[Be].length>0&&(Fe[Be]=0);else if(Fe[Be]<this.contourLevels[Be].length-1){var Me=this.contourLevels[Be][Fe[Be]+1];Math.abs(this.contourLevels[Be][Fe[Be]]-be[Be])>Math.abs(Me-be[Be])&&(Fe[Be]+=1)}for(we.index[0]=ve<.5?ye:ye+1,we.index[1]=Oe<.5?Ce:Ce+1,we.uv[0]=Te/pe[0],we.uv[1]=xe/pe[1],Pe=0;Pe<3;++Pe)we.dataCoordinate[Pe]=this._field[Pe].get(we.index[0],we.index[1]);return we},Y.padField=function(le,pe){var we=pe.shape.slice(),Te=le.shape.slice();f.assign(le.lo(1,1).hi(we[0],we[1]),pe),f.assign(le.lo(1).hi(we[0],1),pe.hi(we[0],1)),f.assign(le.lo(1,Te[1]-1).hi(we[0],1),pe.lo(0,we[1]-1).hi(we[0],1)),f.assign(le.lo(0,1).hi(1,we[1]),pe.hi(1)),f.assign(le.lo(Te[0]-1,1).hi(1,we[1]),pe.lo(we[0]-1)),le.set(0,0,pe.get(0,0)),le.set(0,Te[1]-1,pe.get(0,we[1]-1)),le.set(Te[0]-1,0,pe.get(we[0]-1,0)),le.set(Te[0]-1,Te[1]-1,pe.get(we[0]-1,we[1]-1))},Y.update=function(le){this.objectOffset=(le=le||{}).objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in le&&(this.contourWidth=X(le.contourWidth,Number)),"showContour"in le&&(this.showContour=X(le.showContour,Boolean)),"showSurface"in le&&(this.showSurface=!!le.showSurface),"contourTint"in le&&(this.contourTint=X(le.contourTint,Boolean)),"contourColor"in le&&(this.contourColor=ce(le.contourColor)),"contourProject"in le&&(this.contourProject=X(le.contourProject,function(bn){return X(bn,Boolean)})),"surfaceProject"in le&&(this.surfaceProject=le.surfaceProject),"dynamicColor"in le&&(this.dynamicColor=ce(le.dynamicColor)),"dynamicTint"in le&&(this.dynamicTint=X(le.dynamicTint,Number)),"dynamicWidth"in le&&(this.dynamicWidth=X(le.dynamicWidth,Number)),"opacity"in le&&(this.opacity=le.opacity),"opacityscale"in le&&(this.opacityscale=le.opacityscale),"colorBounds"in le&&(this.colorBounds=le.colorBounds),"vertexColor"in le&&(this.vertexColor=le.vertexColor?1:0),"colormap"in le&&this._colorMap.setPixels(this.genColormap(le.colormap,this.opacityscale));var pe=le.field||le.coords&&le.coords[2]||null,we=!1;if(pe||(pe=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in le||"coords"in le){var Te=(pe.shape[0]+2)*(pe.shape[1]+2);Te>this._field[2].data.length&&(s.freeFloat(this._field[2].data),this._field[2].data=s.mallocFloat(i.nextPow2(Te))),this._field[2]=y(this._field[2].data,[pe.shape[0]+2,pe.shape[1]+2]),this.padField(this._field[2],pe),this.shape=pe.shape.slice();for(var ye=this.shape,ve=0;ve<2;++ve)this._field[2].size>this._field[ve].data.length&&(s.freeFloat(this._field[ve].data),this._field[ve].data=s.mallocFloat(this._field[2].size)),this._field[ve]=y(this._field[ve].data,[ye[0]+2,ye[1]+2]);if(le.coords){var xe=le.coords;if(!Array.isArray(xe)||3!==xe.length)throw new Error("gl-surface: invalid coordinates for x/y");for(ve=0;ve<2;++ve){var Ce=xe[ve];for(ge=0;ge<2;++ge)if(Ce.shape[ge]!==ye[ge])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[ve],Ce)}}else if(le.ticks){var Oe=le.ticks;if(!Array.isArray(Oe)||2!==Oe.length)throw new Error("gl-surface: invalid ticks");for(ve=0;ve<2;++ve){var be=Oe[ve];if((Array.isArray(be)||be.length)&&(be=y(be)),be.shape[0]!==ye[ve])throw new Error("gl-surface: invalid tick length");var ue=y(be.data,ye);ue.stride[ve]=be.stride[0],ue.stride[1^ve]=0,this.padField(this._field[ve],ue)}}else{for(ve=0;ve<2;++ve){var se=[0,0];se[ve]=1,this._field[ve]=y(this._field[ve].data,[ye[0]+2,ye[1]+2],se,0)}this._field[0].set(0,0,0);for(var ge=0;ge<ye[0];++ge)this._field[0].set(ge+1,0,ge);for(this._field[0].set(ye[0]+1,0,ye[0]-1),this._field[1].set(0,0,0),ge=0;ge<ye[1];++ge)this._field[1].set(0,ge+1,ge);this._field[1].set(0,ye[1]+1,ye[1]-1)}var Ie=this._field,ke=y(s.mallocFloat(3*Ie[2].size*2),[3,ye[0]+2,ye[1]+2,2]);for(ve=0;ve<3;++ve)v(ke.pick(ve),Ie[ve],"mirror");var Se=y(s.mallocFloat(3*Ie[2].size),[ye[0]+2,ye[1]+2,3]);for(ve=0;ve<ye[0]+2;++ve)for(ge=0;ge<ye[1]+2;++ge){var Pe=ke.get(0,ve,ge,0),Fe=ke.get(0,ve,ge,1),Be=ke.get(1,ve,ge,0),me=ke.get(1,ve,ge,1),Me=ke.get(2,ve,ge,0),Le=ke.get(2,ve,ge,1),Ne=Be*Le-me*Me,Re=Me*Fe-Le*Pe,He=Pe*me-Fe*Be,Ze=Math.sqrt(Ne*Ne+Re*Re+He*He);Ze<1e-8?(Ze=Math.max(Math.abs(Ne),Math.abs(Re),Math.abs(He)))<1e-8?(He=1,Re=Ne=0,Ze=1):Ze=1/Ze:Ze=1/Math.sqrt(Ze),Se.set(ve,ge,0,Ne*Ze),Se.set(ve,ge,1,Re*Ze),Se.set(ve,ge,2,He*Ze)}s.free(ke.data);var nt=[1/0,1/0,1/0],ft=[-1/0,-1/0,-1/0],ht=1/0,Tt=-1/0,_t=s.mallocFloat(i.nextPow2((ye[0]-1)*(ye[1]-1)*6*10)),ot=0,it=0;for(ve=0;ve<ye[0]-1;++ve)e:for(ge=0;ge<ye[1]-1;++ge){for(var Pt=0;Pt<2;++Pt)for(var jt=0;jt<2;++jt)for(var Ut=0;Ut<3;++Ut){var Rt=this._field[Ut].get(1+ve+Pt,1+ge+jt);if(isNaN(Rt)||!isFinite(Rt))continue e}for(Ut=0;Ut<6;++Ut){var Je=ve+O[Ut][0],et=ge+O[Ut][1],qe=this._field[0].get(Je+1,et+1),$e=this._field[1].get(Je+1,et+1);Rt=this._field[2].get(Je+1,et+1),Ne=Se.get(Je+1,et+1,0),Re=Se.get(Je+1,et+1,1),He=Se.get(Je+1,et+1,2),le.intensity&&(pt=le.intensity.get(Je,et));var pt=le.intensity?le.intensity.get(Je,et):Rt+this.objectOffset[2];_t[ot++]=Je,_t[ot++]=et,_t[ot++]=qe,_t[ot++]=$e,_t[ot++]=Rt,_t[ot++]=0,_t[ot++]=pt,_t[ot++]=Ne,_t[ot++]=Re,_t[ot++]=He,nt[0]=Math.min(nt[0],qe+this.objectOffset[0]),nt[1]=Math.min(nt[1],$e+this.objectOffset[1]),nt[2]=Math.min(nt[2],Rt+this.objectOffset[2]),ht=Math.min(ht,pt),ft[0]=Math.max(ft[0],qe+this.objectOffset[0]),ft[1]=Math.max(ft[1],$e+this.objectOffset[1]),ft[2]=Math.max(ft[2],Rt+this.objectOffset[2]),Tt=Math.max(Tt,pt),it+=1}}for(le.intensityBounds&&(ht=+le.intensityBounds[0],Tt=+le.intensityBounds[1]),ve=6;ve<ot;ve+=10)_t[ve]=(_t[ve]-ht)/(Tt-ht);this._vertexCount=it,this._coordinateBuffer.update(_t.subarray(0,ot)),s.freeFloat(_t),s.free(Se.data),this.bounds=[nt,ft],this.intensity=le.intensity||this._field[2],this.intensityBounds[0]===ht&&this.intensityBounds[1]===Tt||(we=!0),this.intensityBounds=[ht,Tt]}if("levels"in le){var ct=le.levels;for(ct=Array.isArray(ct[0])?ct.slice():[[],[],ct],ve=0;ve<3;++ve)ct[ve]=ct[ve].slice(),ct[ve].sort(function(bn,hn){return bn-hn});for(ve=0;ve<3;++ve)for(ge=0;ge<ct[ve].length;++ge)ct[ve][ge]-=this.objectOffset[ve];e:for(ve=0;ve<3;++ve){if(ct[ve].length!==this.contourLevels[ve].length){we=!0;break}for(ge=0;ge<ct[ve].length;++ge)if(ct[ve][ge]!==this.contourLevels[ve][ge]){we=!0;break e}}this.contourLevels=ct}if(we){Ie=this._field,ye=this.shape;for(var Ve=[],Ge=0;Ge<3;++Ge){var ut=this.contourLevels[Ge],Qe=[],yt=[],wt=[0,0,0];for(ve=0;ve<ut.length;++ve){var kt=d(this._field[Ge],ut[ve]);Qe.push(Ve.length/5|0),it=0;e:for(ge=0;ge<kt.cells.length;++ge){var vt=kt.cells[ge];for(Ut=0;Ut<2;++Ut){var Lt=kt.positions[vt[Ut]],St=Lt[0],Ot=0|Math.floor(St),Nt=St-Ot,Bt=Lt[1],Vt=0|Math.floor(Bt),nn=Bt-Vt,gn=!1;t:for(var Jt=0;Jt<3;++Jt){wt[Jt]=0;var an=(Ge+Jt+1)%3;for(Pt=0;Pt<2;++Pt){var Xt=Pt?Nt:1-Nt;for(Je=0|Math.min(Math.max(Ot+Pt,0),ye[0]),jt=0;jt<2;++jt){var Gn=jt?nn:1-nn;if(et=0|Math.min(Math.max(Vt+jt,0),ye[1]),Rt=Jt<2?this._field[an].get(Je,et):(this.intensity.get(Je,et)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Rt)||isNaN(Rt)){gn=!0;break t}wt[Jt]+=Xt*Gn*Rt}}}if(gn){if(Ut>0){for(var An=0;An<5;++An)Ve.pop();it-=1}continue e}Ve.push(wt[0],wt[1],Lt[0],Lt[1],wt[2]),it+=1}}yt.push(it)}this._contourOffsets[Ge]=Qe,this._contourCounts[Ge]=yt}var cn=s.mallocFloat(Ve.length);for(ve=0;ve<Ve.length;++ve)cn[ve]=Ve[ve];this._contourBuffer.update(cn),s.freeFloat(cn)}},Y.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var le=0;le<3;++le)s.freeFloat(this._field[le].data)},Y.highlight=function(le){var pe,we;if(!le)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(pe=0;pe<3;++pe)this.highlightLevel[pe]=this.enableHighlight[pe]?le.level[pe]:-1;for(we=this.snapToData?le.dataCoordinate:le.position,pe=0;pe<3;++pe)we[pe]-=this.objectOffset[pe];if(this.enableDynamic[0]&&we[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&we[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&we[2]!==this.dynamicLevel[2]){for(var Te=0,ye=this.shape,ve=s.mallocFloat(12*ye[0]*ye[1]),xe=0;xe<3;++xe)if(this.enableDynamic[xe]){this.dynamicLevel[xe]=we[xe];var ue=this._field[(xe+1)%3],se=this._field[(xe+2)%3],ge=d(this._field[xe],we[xe]),Ie=ge.cells,ke=ge.positions;for(this._dynamicOffsets[xe]=Te,pe=0;pe<Ie.length;++pe)for(var Se=Ie[pe],Pe=0;Pe<2;++Pe){var Fe=ke[Se[Pe]],Be=+Fe[0],me=0|Be,Me=0|Math.min(me+1,ye[0]),Le=Be-me,Ne=1-Le,Re=+Fe[1],He=0|Re,Ze=0|Math.min(He+1,ye[1]),nt=Re-He,ft=1-nt,ht=Ne*ft,Tt=Ne*nt,At=Le*ft,_t=Le*nt,ot=ht*ue.get(me,He)+Tt*ue.get(me,Ze)+At*ue.get(Me,He)+_t*ue.get(Me,Ze),it=ht*se.get(me,He)+Tt*se.get(me,Ze)+At*se.get(Me,He)+_t*se.get(Me,Ze);if(isNaN(ot)||isNaN(it)){Pe&&(Te-=1);break}ve[2*Te+0]=ot,ve[2*Te+1]=it,Te+=1}this._dynamicCounts[xe]=Te-this._dynamicOffsets[xe]}else this.dynamicLevel[xe]=NaN,this._dynamicCounts[xe]=0;this._dynamicBuffer.update(ve.subarray(0,2*Te)),s.freeFloat(ve)}}},7766:function(p,l,t){"use strict";var i=t(9618),r=t(5298),n=t(1888);p.exports=function(b){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(a||(a=[(w=b).LINEAR,w.NEAREST_MIPMAP_LINEAR,w.LINEAR_MIPMAP_NEAREST,w.LINEAR_MIPMAP_NEAREST],s=[w.NEAREST,w.LINEAR,w.NEAREST_MIPMAP_NEAREST,w.NEAREST_MIPMAP_LINEAR,w.LINEAR_MIPMAP_NEAREST,w.LINEAR_MIPMAP_LINEAR],u=[w.REPEAT,w.CLAMP_TO_EDGE,w.MIRRORED_REPEAT]),"number"==typeof arguments[1])return v(b,arguments[1],arguments[2],arguments[3]||b.RGBA,arguments[4]||b.UNSIGNED_BYTE);var w;if(Array.isArray(arguments[1]))return v(b,0|arguments[1][0],0|arguments[1][1],arguments[2]||b.RGBA,arguments[3]||b.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var h=arguments[1],S=f(h)?h:h.raw;if(S)return function(w,E,P,I,O,z){var U=x(w);return w.texImage2D(w.TEXTURE_2D,0,O,O,z,E),new d(w,U,P,I,O,z)}(b,S,0|h.width,0|h.height,arguments[2]||b.RGBA,arguments[3]||b.UNSIGNED_BYTE);if(h.shape&&h.data&&h.stride)return function(w,E){var P=E.dtype,I=E.shape.slice(),O=w.getParameter(w.MAX_TEXTURE_SIZE);if(I[0]<0||I[0]>O||I[1]<0||I[1]>O)throw new Error("gl-texture2d: Invalid texture size");var z=g(I,E.stride.slice()),U=0;"float32"===P?U=w.FLOAT:"float64"===P?(U=w.FLOAT,z=!1,P="float32"):"uint8"===P?U=w.UNSIGNED_BYTE:(U=w.UNSIGNED_BYTE,z=!1,P="uint8");var R,j,Y=0;if(2===I.length)Y=w.LUMINANCE,E=i(E.data,I=[I[0],I[1],1],[E.stride[0],E.stride[1],1],E.offset);else{if(3!==I.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===I[2])Y=w.ALPHA;else if(2===I[2])Y=w.LUMINANCE_ALPHA;else if(3===I[2])Y=w.RGB;else{if(4!==I[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");Y=w.RGBA}}U!==w.FLOAT||w.getExtension("OES_texture_float")||(U=w.UNSIGNED_BYTE,z=!1);var B=E.size;if(z)R=0===E.offset&&E.data.length===B?E.data:E.data.subarray(E.offset,E.offset+B);else{var V=[I[2],I[2]*I[0],1];j=n.malloc(B,P);var q=i(j,I,V,0);"float32"!==P&&"float64"!==P||U!==w.UNSIGNED_BYTE?r.assign(q,E):c(q,E),R=j.subarray(0,B)}var ie=x(w);return w.texImage2D(w.TEXTURE_2D,0,Y,I[0],I[1],0,Y,U,R),z||n.free(j),new d(w,ie,I[0],I[1],Y,U)}(b,h)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var a=null,s=null,u=null;function f(b){return typeof HTMLCanvasElement<"u"&&b instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&b instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&b instanceof HTMLVideoElement||typeof ImageData<"u"&&b instanceof ImageData}var c=function(b,h){r.muls(b,h,255)};function y(b,h,S){var w=b.gl,E=w.getParameter(w.MAX_TEXTURE_SIZE);if(h<0||h>E||S<0||S>E)throw new Error("gl-texture2d: Invalid texture size");return b._shape=[h,S],b.bind(),w.texImage2D(w.TEXTURE_2D,0,b.format,h,S,0,b.format,b.type,null),b._mipLevels=[0],b}function d(b,h,S,w,E,P){this.gl=b,this.handle=h,this.format=E,this.type=P,this._shape=[S,w],this._mipLevels=[0],this._magFilter=b.NEAREST,this._minFilter=b.NEAREST,this._wrapS=b.CLAMP_TO_EDGE,this._wrapT=b.CLAMP_TO_EDGE,this._anisoSamples=1;var I=this,O=[this._wrapS,this._wrapT];Object.defineProperties(O,[{get:function(){return I._wrapS},set:function(U){return I.wrapS=U}},{get:function(){return I._wrapT},set:function(U){return I.wrapT=U}}]),this._wrapVector=O;var z=[this._shape[0],this._shape[1]];Object.defineProperties(z,[{get:function(){return I._shape[0]},set:function(U){return I.width=U}},{get:function(){return I._shape[1]},set:function(U){return I.height=U}}]),this._shapeVector=z}var m=d.prototype;function g(b,h){return 3===b.length?1===h[2]&&h[1]===b[0]*b[2]&&h[0]===b[2]:1===h[0]&&h[1]===b[0]}function x(b){var h=b.createTexture();return b.bindTexture(b.TEXTURE_2D,h),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),h}function v(b,h,S,w,E){var P=b.getParameter(b.MAX_TEXTURE_SIZE);if(h<0||h>P||S<0||S>P)throw new Error("gl-texture2d: Invalid texture shape");if(E===b.FLOAT&&!b.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var I=x(b);return b.texImage2D(b.TEXTURE_2D,0,w,h,S,0,w,E,null),new d(b,I,h,S,w,E)}Object.defineProperties(m,{minFilter:{get:function(){return this._minFilter},set:function(b){this.bind();var h=this.gl;if(this.type===h.FLOAT&&a.indexOf(b)>=0&&(h.getExtension("OES_texture_float_linear")||(b=h.NEAREST)),s.indexOf(b)<0)throw new Error("gl-texture2d: Unknown filter mode "+b);return h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,b),this._minFilter=b}},magFilter:{get:function(){return this._magFilter},set:function(b){this.bind();var h=this.gl;if(this.type===h.FLOAT&&a.indexOf(b)>=0&&(h.getExtension("OES_texture_float_linear")||(b=h.NEAREST)),s.indexOf(b)<0)throw new Error("gl-texture2d: Unknown filter mode "+b);return h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,b),this._magFilter=b}},mipSamples:{get:function(){return this._anisoSamples},set:function(b){var h=this._anisoSamples;if(this._anisoSamples=0|Math.max(b,1),h!==this._anisoSamples){var S=this.gl.getExtension("EXT_texture_filter_anisotropic");S&&this.gl.texParameterf(this.gl.TEXTURE_2D,S.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(b){if(this.bind(),u.indexOf(b)<0)throw new Error("gl-texture2d: Unknown wrap mode "+b);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,b),this._wrapS=b}},wrapT:{get:function(){return this._wrapT},set:function(b){if(this.bind(),u.indexOf(b)<0)throw new Error("gl-texture2d: Unknown wrap mode "+b);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,b),this._wrapT=b}},wrap:{get:function(){return this._wrapVector},set:function(b){if(Array.isArray(b)||(b=[b,b]),2!==b.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var h=0;h<2;++h)if(u.indexOf(b[h])<0)throw new Error("gl-texture2d: Unknown wrap mode "+b);this._wrapS=b[0],this._wrapT=b[1];var S=this.gl;return this.bind(),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,this._wrapS),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,this._wrapT),b}},shape:{get:function(){return this._shapeVector},set:function(b){if(Array.isArray(b)){if(2!==b.length)throw new Error("gl-texture2d: Invalid texture shape")}else b=[0|b,0|b];return y(this,0|b[0],0|b[1]),[0|b[0],0|b[1]]}},width:{get:function(){return this._shape[0]},set:function(b){return y(this,b|=0,this._shape[1]),b}},height:{get:function(){return this._shape[1]},set:function(b){return y(this,this._shape[0],b|=0),b}}}),m.bind=function(b){var h=this.gl;return void 0!==b&&h.activeTexture(h.TEXTURE0+(0|b)),h.bindTexture(h.TEXTURE_2D,this.handle),void 0!==b?0|b:h.getParameter(h.ACTIVE_TEXTURE)-h.TEXTURE0},m.dispose=function(){this.gl.deleteTexture(this.handle)},m.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var b=Math.min(this._shape[0],this._shape[1]),h=0;b>0;++h,b>>>=1)this._mipLevels.indexOf(h)<0&&this._mipLevels.push(h)},m.setPixels=function(b,h,S,w){var E=this.gl;this.bind(),Array.isArray(h)?(w=S,S=0|h[1],h=0|h[0]):(h=h||0,S=S||0),w=w||0;var P=f(b)?b:b.raw;if(P)this._mipLevels.indexOf(w)<0?(E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,this.type,P),this._mipLevels.push(w)):E.texSubImage2D(E.TEXTURE_2D,w,h,S,this.format,this.type,P);else{if(!(b.shape&&b.stride&&b.data))throw new Error("gl-texture2d: Unsupported data type");if(b.shape.length<2||h+b.shape[1]>this._shape[1]>>>w||S+b.shape[0]>this._shape[0]>>>w||h<0||S<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(I,O,z,U,R,j,Y,B){var V=B.dtype,q=B.shape.slice();if(q.length<2||q.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var ie=0,te=0,ee=g(q,B.stride.slice());if("float32"===V?ie=I.FLOAT:"float64"===V?(ie=I.FLOAT,ee=!1,V="float32"):"uint8"===V?ie=I.UNSIGNED_BYTE:(ie=I.UNSIGNED_BYTE,ee=!1,V="uint8"),2===q.length)te=I.LUMINANCE,B=i(B.data,q=[q[0],q[1],1],[B.stride[0],B.stride[1],1],B.offset);else{if(3!==q.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===q[2])te=I.ALPHA;else if(2===q[2])te=I.LUMINANCE_ALPHA;else if(3===q[2])te=I.RGB;else{if(4!==q[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");te=I.RGBA}}if(te!==I.LUMINANCE&&te!==I.ALPHA||R!==I.LUMINANCE&&R!==I.ALPHA||(te=R),te!==R)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var $=B.size,J=Y.indexOf(U)<0;if(J&&Y.push(U),ie===j&&ee)0===B.offset&&B.data.length===$?J?I.texImage2D(I.TEXTURE_2D,U,R,q[0],q[1],0,R,j,B.data):I.texSubImage2D(I.TEXTURE_2D,U,O,z,q[0],q[1],R,j,B.data):J?I.texImage2D(I.TEXTURE_2D,U,R,q[0],q[1],0,R,j,B.data.subarray(B.offset,B.offset+$)):I.texSubImage2D(I.TEXTURE_2D,U,O,z,q[0],q[1],R,j,B.data.subarray(B.offset,B.offset+$));else{var X;X=j===I.FLOAT?n.mallocFloat32($):n.mallocUint8($);var ae=i(X,q,[q[2],q[2]*q[0],1]);ie===I.FLOAT&&j===I.UNSIGNED_BYTE?c(ae,B):r.assign(ae,B),J?I.texImage2D(I.TEXTURE_2D,U,R,q[0],q[1],0,R,j,X.subarray(0,$)):I.texSubImage2D(I.TEXTURE_2D,U,O,z,q[0],q[1],R,j,X.subarray(0,$)),j===I.FLOAT?n.freeFloat32(X):n.freeUint8(X)}}(E,h,S,w,this.format,this.type,this._mipLevels,b)}}},1433:function(p){"use strict";p.exports=function(l,t,i){t?t.bind():l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,null);var r=0|l.getParameter(l.MAX_VERTEX_ATTRIBS);if(i){if(i.length>r)throw new Error("gl-vao: Too many vertex attributes");for(var n=0;n<i.length;++n){var a=i[n];if(a.buffer){var u=a.size||4,f=a.type||l.FLOAT,c=!!a.normalized,y=a.stride||0,d=a.offset||0;a.buffer.bind(),l.enableVertexAttribArray(n),l.vertexAttribPointer(n,u,f,c,y,d)}else{if("number"==typeof a)l.vertexAttrib1f(n,a);else if(1===a.length)l.vertexAttrib1f(n,a[0]);else if(2===a.length)l.vertexAttrib2f(n,a[0],a[1]);else if(3===a.length)l.vertexAttrib3f(n,a[0],a[1],a[2]);else{if(4!==a.length)throw new Error("gl-vao: Invalid vertex attribute");l.vertexAttrib4f(n,a[0],a[1],a[2],a[3])}l.disableVertexAttribArray(n)}}for(;n<r;++n)l.disableVertexAttribArray(n)}else for(l.bindBuffer(l.ARRAY_BUFFER,null),n=0;n<r;++n)l.disableVertexAttribArray(n)}},870:function(p,l,t){"use strict";var i=t(1433);function r(n){this.gl=n,this._elements=null,this._attributes=null,this._elementsType=n.UNSIGNED_SHORT}r.prototype.bind=function(){i(this.gl,this._elements,this._attributes)},r.prototype.update=function(n,a,s){this._elements=a,this._attributes=n,this._elementsType=s||this.gl.UNSIGNED_SHORT},r.prototype.dispose=function(){},r.prototype.unbind=function(){},r.prototype.draw=function(n,a,s){s=s||0;var u=this.gl;this._elements?u.drawElements(n,a,this._elementsType,s):u.drawArrays(n,s,a)},p.exports=function(n){return new r(n)}},7518:function(p,l,t){"use strict";var i=t(1433);function r(a,s,u,f,c,y){this.location=a,this.dimension=s,this.a=u,this.b=f,this.c=c,this.d=y}function n(a,s,u){this.gl=a,this._ext=s,this.handle=u,this._attribs=[],this._useElements=!1,this._elementsType=a.UNSIGNED_SHORT}r.prototype.bind=function(a){switch(this.dimension){case 1:a.vertexAttrib1f(this.location,this.a);break;case 2:a.vertexAttrib2f(this.location,this.a,this.b);break;case 3:a.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:a.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},n.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var a=0;a<this._attribs.length;++a)this._attribs[a].bind(this.gl)},n.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},n.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},n.prototype.update=function(a,s,u){if(this.bind(),i(this.gl,s,a),this.unbind(),this._attribs.length=0,a)for(var f=0;f<a.length;++f){var c=a[f];"number"==typeof c?this._attribs.push(new r(f,1,c)):Array.isArray(c)&&this._attribs.push(new r(f,c.length,c[0],c[1],c[2],c[3]))}this._useElements=!!s,this._elementsType=u||this.gl.UNSIGNED_SHORT},n.prototype.draw=function(a,s,u){u=u||0;var f=this.gl;this._useElements?f.drawElements(a,s,this._elementsType,u):f.drawArrays(a,u,s)},p.exports=function(a,s){return new n(a,s,s.createVertexArrayOES())}},8116:function(p,l,t){"use strict";var i=t(7518),r=t(870);function n(a){this.bindVertexArrayOES=a.bindVertexArray.bind(a),this.createVertexArrayOES=a.createVertexArray.bind(a),this.deleteVertexArrayOES=a.deleteVertexArray.bind(a)}p.exports=function(a,s,u,f){var c,y=a.createVertexArray?new n(a):a.getExtension("OES_vertex_array_object");return(c=y?i(a,y):r(a)).update(s,u,f),c}},5632:function(p){p.exports=function(l,t,i){return l[0]=t[0]+i[0],l[1]=t[1]+i[1],l[2]=t[2]+i[2],l}},8192:function(p,l,t){p.exports=function(a,s){var u=i(a[0],a[1],a[2]),f=i(s[0],s[1],s[2]);r(u,u),r(f,f);var c=n(u,f);return c>1?0:Math.acos(c)};var i=t(2825),r=t(3536),n=t(244)},9226:function(p){p.exports=function(l,t){return l[0]=Math.ceil(t[0]),l[1]=Math.ceil(t[1]),l[2]=Math.ceil(t[2]),l}},3126:function(p){p.exports=function(l){var t=new Float32Array(3);return t[0]=l[0],t[1]=l[1],t[2]=l[2],t}},3990:function(p){p.exports=function(l,t){return l[0]=t[0],l[1]=t[1],l[2]=t[2],l}},1091:function(p){p.exports=function(){var l=new Float32Array(3);return l[0]=0,l[1]=0,l[2]=0,l}},5911:function(p){p.exports=function(l,t,i){var r=t[0],n=t[1],a=t[2],s=i[0],u=i[1],f=i[2];return l[0]=n*f-a*u,l[1]=a*s-r*f,l[2]=r*u-n*s,l}},5455:function(p,l,t){p.exports=t(7056)},7056:function(p){p.exports=function(l,t){var i=t[0]-l[0],r=t[1]-l[1],n=t[2]-l[2];return Math.sqrt(i*i+r*r+n*n)}},4008:function(p,l,t){p.exports=t(6690)},6690:function(p){p.exports=function(l,t,i){return l[0]=t[0]/i[0],l[1]=t[1]/i[1],l[2]=t[2]/i[2],l}},244:function(p){p.exports=function(l,t){return l[0]*t[0]+l[1]*t[1]+l[2]*t[2]}},2613:function(p){p.exports=1e-6},9922:function(p,l,t){p.exports=function(r,n){var a=r[0],s=r[1],u=r[2],f=n[0],c=n[1],y=n[2];return Math.abs(a-f)<=i*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(s-c)<=i*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(u-y)<=i*Math.max(1,Math.abs(u),Math.abs(y))};var i=t(2613)},9265:function(p){p.exports=function(l,t){return l[0]===t[0]&&l[1]===t[1]&&l[2]===t[2]}},2681:function(p){p.exports=function(l,t){return l[0]=Math.floor(t[0]),l[1]=Math.floor(t[1]),l[2]=Math.floor(t[2]),l}},5137:function(p,l,t){p.exports=function(r,n,a,s,u,f){var c,y;for(n||(n=3),a||(a=0),y=s?Math.min(s*n+a,r.length):r.length,c=a;c<y;c+=n)i[0]=r[c],i[1]=r[c+1],i[2]=r[c+2],u(i,i,f),r[c]=i[0],r[c+1]=i[1],r[c+2]=i[2];return r};var i=t(1091)()},2825:function(p){p.exports=function(l,t,i){var r=new Float32Array(3);return r[0]=l,r[1]=t,r[2]=i,r}},2931:function(p,l,t){p.exports={EPSILON:t(2613),create:t(1091),clone:t(3126),angle:t(8192),fromValues:t(2825),copy:t(3990),set:t(1463),equals:t(9922),exactEquals:t(9265),add:t(5632),subtract:t(6843),sub:t(2229),multiply:t(5847),mul:t(4505),divide:t(6690),div:t(4008),min:t(8107),max:t(7417),floor:t(2681),ceil:t(9226),round:t(2447),scale:t(6621),scaleAndAdd:t(8489),distance:t(7056),dist:t(5455),squaredDistance:t(2953),sqrDist:t(6141),length:t(1387),len:t(868),squaredLength:t(3066),sqrLen:t(5486),negate:t(5093),inverse:t(811),normalize:t(3536),dot:t(244),cross:t(5911),lerp:t(6658),random:t(7636),transformMat4:t(5673),transformMat3:t(492),transformQuat:t(264),rotateX:t(6894),rotateY:t(109),rotateZ:t(8692),forEach:t(5137)}},811:function(p){p.exports=function(l,t){return l[0]=1/t[0],l[1]=1/t[1],l[2]=1/t[2],l}},868:function(p,l,t){p.exports=t(1387)},1387:function(p){p.exports=function(l){var t=l[0],i=l[1],r=l[2];return Math.sqrt(t*t+i*i+r*r)}},6658:function(p){p.exports=function(l,t,i,r){var n=t[0],a=t[1],s=t[2];return l[0]=n+r*(i[0]-n),l[1]=a+r*(i[1]-a),l[2]=s+r*(i[2]-s),l}},7417:function(p){p.exports=function(l,t,i){return l[0]=Math.max(t[0],i[0]),l[1]=Math.max(t[1],i[1]),l[2]=Math.max(t[2],i[2]),l}},8107:function(p){p.exports=function(l,t,i){return l[0]=Math.min(t[0],i[0]),l[1]=Math.min(t[1],i[1]),l[2]=Math.min(t[2],i[2]),l}},4505:function(p,l,t){p.exports=t(5847)},5847:function(p){p.exports=function(l,t,i){return l[0]=t[0]*i[0],l[1]=t[1]*i[1],l[2]=t[2]*i[2],l}},5093:function(p){p.exports=function(l,t){return l[0]=-t[0],l[1]=-t[1],l[2]=-t[2],l}},3536:function(p){p.exports=function(l,t){var i=t[0],r=t[1],n=t[2],a=i*i+r*r+n*n;return a>0&&(a=1/Math.sqrt(a),l[0]=t[0]*a,l[1]=t[1]*a,l[2]=t[2]*a),l}},7636:function(p){p.exports=function(l,t){t=t||1;var i=2*Math.random()*Math.PI,r=2*Math.random()-1,n=Math.sqrt(1-r*r)*t;return l[0]=Math.cos(i)*n,l[1]=Math.sin(i)*n,l[2]=r*t,l}},6894:function(p){p.exports=function(l,t,i,r){var n=i[1],a=i[2],s=t[1]-n,u=t[2]-a,f=Math.sin(r),c=Math.cos(r);return l[0]=t[0],l[1]=n+s*c-u*f,l[2]=a+s*f+u*c,l}},109:function(p){p.exports=function(l,t,i,r){var n=i[0],a=i[2],s=t[0]-n,u=t[2]-a,f=Math.sin(r),c=Math.cos(r);return l[0]=n+u*f+s*c,l[1]=t[1],l[2]=a+u*c-s*f,l}},8692:function(p){p.exports=function(l,t,i,r){var n=i[0],a=i[1],s=t[0]-n,u=t[1]-a,f=Math.sin(r),c=Math.cos(r);return l[0]=n+s*c-u*f,l[1]=a+s*f+u*c,l[2]=t[2],l}},2447:function(p){p.exports=function(l,t){return l[0]=Math.round(t[0]),l[1]=Math.round(t[1]),l[2]=Math.round(t[2]),l}},6621:function(p){p.exports=function(l,t,i){return l[0]=t[0]*i,l[1]=t[1]*i,l[2]=t[2]*i,l}},8489:function(p){p.exports=function(l,t,i,r){return l[0]=t[0]+i[0]*r,l[1]=t[1]+i[1]*r,l[2]=t[2]+i[2]*r,l}},1463:function(p){p.exports=function(l,t,i,r){return l[0]=t,l[1]=i,l[2]=r,l}},6141:function(p,l,t){p.exports=t(2953)},5486:function(p,l,t){p.exports=t(3066)},2953:function(p){p.exports=function(l,t){var i=t[0]-l[0],r=t[1]-l[1],n=t[2]-l[2];return i*i+r*r+n*n}},3066:function(p){p.exports=function(l){var t=l[0],i=l[1],r=l[2];return t*t+i*i+r*r}},2229:function(p,l,t){p.exports=t(6843)},6843:function(p){p.exports=function(l,t,i){return l[0]=t[0]-i[0],l[1]=t[1]-i[1],l[2]=t[2]-i[2],l}},492:function(p){p.exports=function(l,t,i){var r=t[0],n=t[1],a=t[2];return l[0]=r*i[0]+n*i[3]+a*i[6],l[1]=r*i[1]+n*i[4]+a*i[7],l[2]=r*i[2]+n*i[5]+a*i[8],l}},5673:function(p){p.exports=function(l,t,i){var r=t[0],n=t[1],a=t[2],s=i[3]*r+i[7]*n+i[11]*a+i[15];return l[0]=(i[0]*r+i[4]*n+i[8]*a+i[12])/(s=s||1),l[1]=(i[1]*r+i[5]*n+i[9]*a+i[13])/s,l[2]=(i[2]*r+i[6]*n+i[10]*a+i[14])/s,l}},264:function(p){p.exports=function(l,t,i){var r=t[0],n=t[1],a=t[2],s=i[0],u=i[1],f=i[2],c=i[3],y=c*r+u*a-f*n,d=c*n+f*r-s*a,m=c*a+s*n-u*r,g=-s*r-u*n-f*a;return l[0]=y*c+g*-s+d*-f-m*-u,l[1]=d*c+g*-u+m*-s-y*-f,l[2]=m*c+g*-f+y*-u-d*-s,l}},4361:function(p){p.exports=function(l,t,i){return l[0]=t[0]+i[0],l[1]=t[1]+i[1],l[2]=t[2]+i[2],l[3]=t[3]+i[3],l}},2335:function(p){p.exports=function(l){var t=new Float32Array(4);return t[0]=l[0],t[1]=l[1],t[2]=l[2],t[3]=l[3],t}},2933:function(p){p.exports=function(l,t){return l[0]=t[0],l[1]=t[1],l[2]=t[2],l[3]=t[3],l}},7536:function(p){p.exports=function(){var l=new Float32Array(4);return l[0]=0,l[1]=0,l[2]=0,l[3]=0,l}},4691:function(p){p.exports=function(l,t){var i=t[0]-l[0],r=t[1]-l[1],n=t[2]-l[2],a=t[3]-l[3];return Math.sqrt(i*i+r*r+n*n+a*a)}},1373:function(p){p.exports=function(l,t,i){return l[0]=t[0]/i[0],l[1]=t[1]/i[1],l[2]=t[2]/i[2],l[3]=t[3]/i[3],l}},3750:function(p){p.exports=function(l,t){return l[0]*t[0]+l[1]*t[1]+l[2]*t[2]+l[3]*t[3]}},3390:function(p){p.exports=function(l,t,i,r){var n=new Float32Array(4);return n[0]=l,n[1]=t,n[2]=i,n[3]=r,n}},9970:function(p,l,t){p.exports={create:t(7536),clone:t(2335),fromValues:t(3390),copy:t(2933),set:t(4578),add:t(4361),subtract:t(6860),multiply:t(3576),divide:t(1373),min:t(2334),max:t(160),scale:t(9288),scaleAndAdd:t(4844),distance:t(4691),squaredDistance:t(7960),length:t(6808),squaredLength:t(483),negate:t(1498),inverse:t(4494),normalize:t(5177),dot:t(3750),lerp:t(2573),random:t(9131),transformMat4:t(5352),transformQuat:t(4041)}},4494:function(p){p.exports=function(l,t){return l[0]=1/t[0],l[1]=1/t[1],l[2]=1/t[2],l[3]=1/t[3],l}},6808:function(p){p.exports=function(l){var t=l[0],i=l[1],r=l[2],n=l[3];return Math.sqrt(t*t+i*i+r*r+n*n)}},2573:function(p){p.exports=function(l,t,i,r){var n=t[0],a=t[1],s=t[2],u=t[3];return l[0]=n+r*(i[0]-n),l[1]=a+r*(i[1]-a),l[2]=s+r*(i[2]-s),l[3]=u+r*(i[3]-u),l}},160:function(p){p.exports=function(l,t,i){return l[0]=Math.max(t[0],i[0]),l[1]=Math.max(t[1],i[1]),l[2]=Math.max(t[2],i[2]),l[3]=Math.max(t[3],i[3]),l}},2334:function(p){p.exports=function(l,t,i){return l[0]=Math.min(t[0],i[0]),l[1]=Math.min(t[1],i[1]),l[2]=Math.min(t[2],i[2]),l[3]=Math.min(t[3],i[3]),l}},3576:function(p){p.exports=function(l,t,i){return l[0]=t[0]*i[0],l[1]=t[1]*i[1],l[2]=t[2]*i[2],l[3]=t[3]*i[3],l}},1498:function(p){p.exports=function(l,t){return l[0]=-t[0],l[1]=-t[1],l[2]=-t[2],l[3]=-t[3],l}},5177:function(p){p.exports=function(l,t){var i=t[0],r=t[1],n=t[2],a=t[3],s=i*i+r*r+n*n+a*a;return s>0&&(s=1/Math.sqrt(s),l[0]=i*s,l[1]=r*s,l[2]=n*s,l[3]=a*s),l}},9131:function(p,l,t){var i=t(5177),r=t(9288);p.exports=function(n,a){return a=a||1,n[0]=Math.random(),n[1]=Math.random(),n[2]=Math.random(),n[3]=Math.random(),i(n,n),r(n,n,a),n}},9288:function(p){p.exports=function(l,t,i){return l[0]=t[0]*i,l[1]=t[1]*i,l[2]=t[2]*i,l[3]=t[3]*i,l}},4844:function(p){p.exports=function(l,t,i,r){return l[0]=t[0]+i[0]*r,l[1]=t[1]+i[1]*r,l[2]=t[2]+i[2]*r,l[3]=t[3]+i[3]*r,l}},4578:function(p){p.exports=function(l,t,i,r,n){return l[0]=t,l[1]=i,l[2]=r,l[3]=n,l}},7960:function(p){p.exports=function(l,t){var i=t[0]-l[0],r=t[1]-l[1],n=t[2]-l[2],a=t[3]-l[3];return i*i+r*r+n*n+a*a}},483:function(p){p.exports=function(l){var t=l[0],i=l[1],r=l[2],n=l[3];return t*t+i*i+r*r+n*n}},6860:function(p){p.exports=function(l,t,i){return l[0]=t[0]-i[0],l[1]=t[1]-i[1],l[2]=t[2]-i[2],l[3]=t[3]-i[3],l}},5352:function(p){p.exports=function(l,t,i){var r=t[0],n=t[1],a=t[2],s=t[3];return l[0]=i[0]*r+i[4]*n+i[8]*a+i[12]*s,l[1]=i[1]*r+i[5]*n+i[9]*a+i[13]*s,l[2]=i[2]*r+i[6]*n+i[10]*a+i[14]*s,l[3]=i[3]*r+i[7]*n+i[11]*a+i[15]*s,l}},4041:function(p){p.exports=function(l,t,i){var r=t[0],n=t[1],a=t[2],s=i[0],u=i[1],f=i[2],c=i[3],y=c*r+u*a-f*n,d=c*n+f*r-s*a,m=c*a+s*n-u*r,g=-s*r-u*n-f*a;return l[0]=y*c+g*-s+d*-f-m*-u,l[1]=d*c+g*-u+m*-s-y*-f,l[2]=m*c+g*-f+y*-u-d*-s,l[3]=t[3],l}},1848:function(p,l,t){var i=t(4905),r=t(6468);p.exports=function(n){for(var a=Array.isArray(n)?n:i(n),s=0;s<a.length;s++){var u=a[s];if("preprocessor"===u.type){var f=u.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(f&&f[2]){var y=f[2];return(f[1]?r(y):y).trim()}}}}},5874:function(p,l,t){p.exports=function(I){var O,z,U,R=0,j=0,Y=u,B=[],V=[],q=1,ie=0,te=0,ee=!1,$=!1,J="",X=n,ae=i;"300 es"===(I=I||{}).version&&(X=s,ae=a);var ce={},le={};for(R=0;R<X.length;R++)ce[X[R]]=!0;for(R=0;R<ae.length;R++)le[ae[R]]=!0;return function(ge){return V=[],null!==ge?function(Ie){var ke;for(R=0,Ie.toString&&(Ie=Ie.toString()),J+=Ie.replace(/\r\n/g,"\n"),U=J.length;O=J[R],R<U;){switch(ke=R,Y){case c:R="/"===O&&"*"===z?(B.push(O),pe(B.join("")),Y=u,R+1):(B.push(O),z=O,R+1);break;case y:case d:R="\r"!==O&&"\n"!==O||"\\"===z?(B.push(O),z=O,R+1):(pe(B.join("")),Y=u,R);break;case m:R=xe();break;case g:R="."===O||/[eE]/.test(O)?(B.push(O),Y=x,z=O,R+1):"x"===O&&1===B.length&&"0"===B[0]?(Y=E,B.push(O),z=O,R+1):/[^\d]/.test(O)?(pe(B.join("")),Y=u,R):(B.push(O),z=O,R+1);break;case E:R=/[^a-fA-F0-9]/.test(O)?(pe(B.join("")),Y=u,R):(B.push(O),z=O,R+1);break;case x:"f"===O&&(B.push(O),z=O,R+=1),R=/[eE]/.test(O)?(B.push(O),z=O,R+1):("-"!==O&&"+"!==O||!/[eE]/.test(z))&&/[^\d]/.test(O)?(pe(B.join("")),Y=u,R):(B.push(O),z=O,R+1);break;case f:R=se();break;case S:R=/[^\s]/g.test(O)?(pe(B.join("")),Y=u,R):(B.push(O),z=O,R+1);break;case u:B=B.length?[]:B,R="/"===z&&"*"===O?(te=j+R-1,Y=c,z=O,R+1):"/"===z&&"/"===O?(te=j+R-1,Y=y,z=O,R+1):"#"===O?(Y=d,te=j+R,R):/\s/.test(O)?(Y=S,te=j+R,R):(ee=/\d/.test(O),$=/[^\w_]/.test(O),te=j+R,Y=ee?g:$?m:f,R)}ke!==R&&("\n"===J[ke]?(ie=0,++q):++ie)}return j+=R,J=J.slice(R),V}(ge):(B.length&&pe(B.join("")),Y=w,pe("(eof)"),V)};function pe(ge){ge.length&&V.push({type:P[Y],data:ge,position:te,line:q,column:ie})}function xe(){if("."===z&&/\d/.test(O))return Y=x,R;if("/"===z&&"*"===O)return Y=c,R;if("/"===z&&"/"===O)return Y=y,R;if("."===O&&B.length){for(;Ce(B););return Y=x,R}if(";"===O||")"===O||"("===O){if(B.length)for(;Ce(B););return pe(O),Y=u,R+1}var ge=2===B.length&&"="!==O;if(/[\w_\d\s]/.test(O)||ge){for(;Ce(B););return Y=u,R}return B.push(O),z=O,R+1}function Ce(ge){for(var Ie,ke,Se=0;;){if(Ie=r.indexOf(ge.slice(0,ge.length+Se).join("")),ke=r[Ie],-1===Ie){if(Se--+ge.length>0)continue;ke=ge.slice(0,1).join("")}return pe(ke),te+=ke.length,(B=B.slice(ke.length)).length}}function se(){if(/[^\d\w_]/.test(O)){var ge=B.join("");return Y=le[ge]?h:ce[ge]?b:v,pe(B.join("")),Y=u,R}return B.push(O),z=O,R+1}};var i=t(620),r=t(7827),n=t(6852),a=t(7932),s=t(3508),u=999,f=9999,c=0,y=1,d=2,m=3,g=4,x=5,v=6,b=7,h=8,S=9,w=10,E=11,P=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3508:function(p,l,t){var i=t(6852);i=i.slice().filter(function(r){return!/^(gl\_|texture)/.test(r)}),p.exports=i.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},6852:function(p){p.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},7932:function(p,l,t){var i=t(620);p.exports=i.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},620:function(p){p.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},7827:function(p){p.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},4905:function(p,l,t){var i=t(5874);p.exports=function(r,n){var a=i(n),s=[];return(s=s.concat(a(r))).concat(a(null))}},3236:function(p){p.exports=function(l){"string"==typeof l&&(l=[l]);for(var t=[].slice.call(arguments,1),i=[],r=0;r<l.length-1;r++)i.push(l[r],t[r]||"");return i.push(l[r]),i.join("")}},7520:function(p,l,t){"use strict";var i=t(9507);p.exports=i&&function(){var r=!1;try{var n=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch{r=!1}return r}()},3778:function(p,l){l.read=function(t,i,r,n,a){var s,u,f=8*a-n-1,c=(1<<f)-1,y=c>>1,d=-7,m=r?a-1:0,g=r?-1:1,x=t[i+m];for(m+=g,s=x&(1<<-d)-1,x>>=-d,d+=f;d>0;s=256*s+t[i+m],m+=g,d-=8);for(u=s&(1<<-d)-1,s>>=-d,d+=n;d>0;u=256*u+t[i+m],m+=g,d-=8);if(0===s)s=1-y;else{if(s===c)return u?NaN:1/0*(x?-1:1);u+=Math.pow(2,n),s-=y}return(x?-1:1)*u*Math.pow(2,s-n)},l.write=function(t,i,r,n,a,s){var u,f,c,y=8*s-a-1,d=(1<<y)-1,m=d>>1,g=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,x=n?0:s-1,v=n?1:-1,b=i<0||0===i&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(f=isNaN(i)?1:0,u=d):(u=Math.floor(Math.log(i)/Math.LN2),i*(c=Math.pow(2,-u))<1&&(u--,c*=2),(i+=u+m>=1?g/c:g*Math.pow(2,1-m))*c>=2&&(u++,c/=2),u+m>=d?(f=0,u=d):u+m>=1?(f=(i*c-1)*Math.pow(2,a),u+=m):(f=i*Math.pow(2,m-1)*Math.pow(2,a),u=0));a>=8;t[r+x]=255&f,x+=v,f/=256,a-=8);for(u=u<<a|f,y+=a;y>0;t[r+x]=255&u,x+=v,u/=256,y-=8);t[r+x-v]|=128*b}},8954:function(p,l,t){"use strict";p.exports=function(y,d){var m=y.length;if(0===m)throw new Error("Must have at least d+1 points");var g=y[0].length;if(m<=g)throw new Error("Must input at least d+1 points");var x=y.slice(0,g+1),v=i.apply(void 0,x);if(0===v)throw new Error("Input not in general position");for(var b=new Array(g+1),h=0;h<=g;++h)b[h]=h;v<0&&(b[0]=1,b[1]=0);var S=new n(b,new Array(g+1),!1),w=S.adjacent,E=new Array(g+2);for(h=0;h<=g;++h){for(var P=b.slice(),I=0;I<=g;++I)I===h&&(P[I]=-1);var O=P[0];P[0]=P[1],P[1]=O;var z=new n(P,new Array(g+1),!0);w[h]=z,E[h]=z}for(E[g+1]=S,h=0;h<=g;++h){P=w[h].vertices;var U=w[h].adjacent;for(I=0;I<=g;++I){var R=P[I];if(R<0)U[I]=S;else for(var j=0;j<=g;++j)w[j].vertices.indexOf(R)<0&&(U[I]=w[j])}}var Y=new f(g,x,E),B=!!d;for(h=g+1;h<m;++h)Y.insert(y[h],B);return Y.boundary()};var i=t(3250),r=t(6803).Fw;function n(y,d,m){this.vertices=y,this.adjacent=d,this.boundary=m,this.lastVisited=-1}function a(y,d,m){this.vertices=y,this.cell=d,this.index=m}function s(y,d){return r(y.vertices,d.vertices)}n.prototype.flip=function(){var y=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=y;var d=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=d};var u=[];function f(y,d,m){this.dimension=y,this.vertices=d,this.simplices=m,this.interior=m.filter(function(b){return!b.boundary}),this.tuple=new Array(y+1);for(var g=0;g<=y;++g)this.tuple[g]=this.vertices[g];var x,b,v=u[y];v||(v=u[y]=((x=i[y+1])||(x=i),b=x,function(){return b.apply(this,this.tuple)})),this.orient=v}var c=f.prototype;c.handleBoundaryDegeneracy=function(y,d){var m=this.dimension,g=this.vertices.length-1,x=this.tuple,v=this.vertices,b=[y];for(y.lastVisited=-g;b.length>0;)for(var h=(y=b.pop()).adjacent,S=0;S<=m;++S){var w=h[S];if(w.boundary&&!(w.lastVisited<=-g)){for(var E=w.vertices,P=0;P<=m;++P){var I=E[P];x[P]=I<0?d:v[I]}var O=this.orient();if(O>0)return w;w.lastVisited=-g,0===O&&b.push(w)}}return null},c.walk=function(y,d){var m=this.vertices.length-1,g=this.dimension,x=this.vertices,v=this.tuple,b=d?this.interior.length*Math.random()|0:this.interior.length-1,h=this.interior[b];e:for(;!h.boundary;){for(var S=h.vertices,w=h.adjacent,E=0;E<=g;++E)v[E]=x[S[E]];for(h.lastVisited=m,E=0;E<=g;++E){var P=w[E];if(!(P.lastVisited>=m)){var I=v[E];v[E]=y;var O=this.orient();if(v[E]=I,O<0){h=P;continue e}P.lastVisited=P.boundary?-m:m}}return}return h},c.addPeaks=function(y,d){var m=this.vertices.length-1,g=this.dimension,x=this.vertices,v=this.tuple,b=this.interior,h=this.simplices,S=[d];d.lastVisited=m,d.vertices[d.vertices.indexOf(-1)]=m,d.boundary=!1,b.push(d);for(var w=[];S.length>0;){var E=(d=S.pop()).vertices,P=d.adjacent,I=E.indexOf(m);if(!(I<0))for(var O=0;O<=g;++O)if(O!==I){var z=P[O];if(z.boundary&&!(z.lastVisited>=m)){var U=z.vertices;if(z.lastVisited!==-m){for(var R=0,j=0;j<=g;++j)U[j]<0?(R=j,v[j]=y):v[j]=x[U[j]];if(this.orient()>0){U[R]=m,z.boundary=!1,b.push(z),S.push(z),z.lastVisited=m;continue}z.lastVisited=-m}var Y=z.adjacent,B=E.slice(),V=P.slice(),q=new n(B,V,!0);h.push(q);var ie=Y.indexOf(d);if(!(ie<0))for(Y[ie]=q,V[I]=z,B[O]=-1,V[O]=d,P[O]=q,q.flip(),j=0;j<=g;++j){var te=B[j];if(!(te<0||te===m)){for(var ee=new Array(g-1),$=0,J=0;J<=g;++J){var X=B[J];X<0||J===j||(ee[$++]=X)}w.push(new a(ee,q,j))}}}}}for(w.sort(s),O=0;O+1<w.length;O+=2){var ae=w[O],ce=w[O+1];ae.index<0||ce.index<0||(ae.cell.adjacent[ae.index]=ce.cell,ce.cell.adjacent[ce.index]=ae.cell)}},c.insert=function(y,d){var m=this.vertices;m.push(y);var g=this.walk(y,d);if(g){for(var x=this.dimension,v=this.tuple,b=0;b<=x;++b){var h=g.vertices[b];v[b]=h<0?y:m[h]}var S=this.orient(v);S<0||(0!==S||(g=this.handleBoundaryDegeneracy(g,y)))&&this.addPeaks(y,g)}},c.boundary=function(){for(var y=this.dimension,d=[],m=this.simplices,g=m.length,x=0;x<g;++x){var v=m[x];if(v.boundary){for(var b=new Array(y),h=v.vertices,S=0,w=0,E=0;E<=y;++E)h[E]>=0?b[S++]=h[E]:w=1&E;if(w===(1&y)){var P=b[0];b[0]=b[1],b[1]=P}d.push(b)}}return d}},3352:function(p,l,t){"use strict";var i=t(2478);function r(S,w,E,P,I){this.mid=S,this.left=w,this.right=E,this.leftPoints=P,this.rightPoints=I,this.count=(w?w.count:0)+(E?E.count:0)+P.length}p.exports=function(S){return new b(S&&0!==S.length?v(S):null)};var n=r.prototype;function a(S,w){S.mid=w.mid,S.left=w.left,S.right=w.right,S.leftPoints=w.leftPoints,S.rightPoints=w.rightPoints,S.count=w.count}function s(S,w){var E=v(w);S.mid=E.mid,S.left=E.left,S.right=E.right,S.leftPoints=E.leftPoints,S.rightPoints=E.rightPoints,S.count=E.count}function u(S,w){var E=S.intervals([]);E.push(w),s(S,E)}function f(S,w){var E=S.intervals([]),P=E.indexOf(w);return P<0?0:(E.splice(P,1),s(S,E),1)}function c(S,w,E){for(var P=0;P<S.length&&S[P][0]<=w;++P){var I=E(S[P]);if(I)return I}}function y(S,w,E){for(var P=S.length-1;P>=0&&S[P][1]>=w;--P){var I=E(S[P]);if(I)return I}}function d(S,w){for(var E=0;E<S.length;++E){var P=w(S[E]);if(P)return P}}function m(S,w){return S-w}function g(S,w){return S[0]-w[0]||S[1]-w[1]}function x(S,w){return S[1]-w[1]||S[0]-w[0]}function v(S){if(0===S.length)return null;for(var w=[],E=0;E<S.length;++E)w.push(S[E][0],S[E][1]);w.sort(m);var P=w[w.length>>1],I=[],O=[],z=[];for(E=0;E<S.length;++E){var U=S[E];U[1]<P?I.push(U):P<U[0]?O.push(U):z.push(U)}var R=z,j=z.slice();return R.sort(g),j.sort(x),new r(P,v(I),v(O),R,j)}function b(S){this.root=S}n.intervals=function(S){return S.push.apply(S,this.leftPoints),this.left&&this.left.intervals(S),this.right&&this.right.intervals(S),S},n.insert=function(S){var w=this.count-this.leftPoints.length;if(this.count+=1,S[1]<this.mid)this.left?4*(this.left.count+1)>3*(w+1)?u(this,S):this.left.insert(S):this.left=v([S]);else if(S[0]>this.mid)this.right?4*(this.right.count+1)>3*(w+1)?u(this,S):this.right.insert(S):this.right=v([S]);else{var E=i.ge(this.leftPoints,S,g),P=i.ge(this.rightPoints,S,x);this.leftPoints.splice(E,0,S),this.rightPoints.splice(P,0,S)}},n.remove=function(S){var w=this.count-this.leftPoints;if(S[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(w-1)?f(this,S):2===(O=this.left.remove(S))?(this.left=null,this.count-=1,1):(1===O&&(this.count-=1),O):0;if(S[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(w-1)?f(this,S):2===(O=this.right.remove(S))?(this.right=null,this.count-=1,1):(1===O&&(this.count-=1),O):0;if(1===this.count)return this.leftPoints[0]===S?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===S){if(this.left&&this.right){for(var E=this,P=this.left;P.right;)E=P,P=P.right;if(E===this)P.right=this.right;else{var I=this.left,O=this.right;E.count-=P.count,E.right=P.left,P.left=I,P.right=O}a(this,P),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else a(this,this.left?this.left:this.right);return 1}for(I=i.ge(this.leftPoints,S,g);I<this.leftPoints.length&&this.leftPoints[I][0]===S[0];++I)if(this.leftPoints[I]===S)for(this.count-=1,this.leftPoints.splice(I,1),O=i.ge(this.rightPoints,S,x);O<this.rightPoints.length&&this.rightPoints[O][1]===S[1];++O)if(this.rightPoints[O]===S)return this.rightPoints.splice(O,1),1;return 0},n.queryPoint=function(S,w){return S<this.mid?this.left&&(E=this.left.queryPoint(S,w))?E:c(this.leftPoints,S,w):S>this.mid?this.right&&(E=this.right.queryPoint(S,w))?E:y(this.rightPoints,S,w):d(this.leftPoints,w);var E},n.queryInterval=function(S,w,E){var P;return S<this.mid&&this.left&&(P=this.left.queryInterval(S,w,E))||w>this.mid&&this.right&&(P=this.right.queryInterval(S,w,E))?P:w<this.mid?c(this.leftPoints,w,E):S>this.mid?y(this.rightPoints,S,E):d(this.leftPoints,E)};var h=b.prototype;h.insert=function(S){this.root?this.root.insert(S):this.root=new r(S[0],null,null,[S],[S])},h.remove=function(S){if(this.root){var w=this.root.remove(S);return 2===w&&(this.root=null),0!==w}return!1},h.queryPoint=function(S,w){if(this.root)return this.root.queryPoint(S,w)},h.queryInterval=function(S,w,E){if(S<=w&&this.root)return this.root.queryInterval(S,w,E)},Object.defineProperty(h,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(h,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},7762:function(p){"use strict";p.exports=function(l){for(var t=new Array(l),i=0;i<l;++i)t[i]=i;return t}},9507:function(p){p.exports=!0},7163:function(p){function l(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}p.exports=function(t){return null!=t&&(l(t)||"function"==typeof(i=t).readFloatLE&&"function"==typeof i.slice&&l(i.slice(0,0))||!!t._isBuffer);var i}},5219:function(p){"use strict";p.exports=function(l){for(var t,i=l.length,r=0;r<i;r++)if(((t=l.charCodeAt(r))<9||t>13)&&32!==t&&133!==t&&160!==t&&5760!==t&&6158!==t&&(t<8192||t>8205)&&8232!==t&&8233!==t&&8239!==t&&8287!==t&&8288!==t&&12288!==t&&65279!==t)return!1;return!0}},395:function(p){p.exports=function(l,t,i){return l*(1-i)+t*i}},2652:function(p,l,t){var i=t(4335),r=t(6864),n=t(1903),a=t(9921),s=t(7608),u=t(5665),f={length:t(1387),normalize:t(3536),dot:t(244),cross:t(5911)},c=r(),y=r(),d=[0,0,0,0],m=[[0,0,0],[0,0,0],[0,0,0]],g=[0,0,0];function x(v,b,h,S,w){v[0]=b[0]*S+h[0]*w,v[1]=b[1]*S+h[1]*w,v[2]=b[2]*S+h[2]*w}p.exports=function(v,b,h,S,w,E){if(b||(b=[0,0,0]),h||(h=[0,0,0]),S||(S=[0,0,0]),w||(w=[0,0,0,1]),E||(E=[0,0,0,1]),!i(c,v)||(n(y,c),y[3]=0,y[7]=0,y[11]=0,y[15]=1,Math.abs(a(y)<1e-8)))return!1;var P,I,O,z,U,R,j,J,X,Y=c[3],B=c[7],V=c[11],q=c[12],ie=c[13],te=c[14],ee=c[15];if(0!==Y||0!==B||0!==V){if(d[0]=Y,d[1]=B,d[2]=V,d[3]=ee,!s(y,y))return!1;u(y,y),z=(I=d)[0],(P=w)[0]=(O=y)[0]*z+O[4]*(U=I[1])+O[8]*(R=I[2])+O[12]*(j=I[3]),P[1]=O[1]*z+O[5]*U+O[9]*R+O[13]*j,P[2]=O[2]*z+O[6]*U+O[10]*R+O[14]*j,P[3]=O[3]*z+O[7]*U+O[11]*R+O[15]*j}else w[0]=w[1]=w[2]=0,w[3]=1;if(b[0]=q,b[1]=ie,b[2]=te,(J=m)[0][0]=(X=c)[0],J[0][1]=X[1],J[0][2]=X[2],J[1][0]=X[4],J[1][1]=X[5],J[1][2]=X[6],J[2][0]=X[8],J[2][1]=X[9],J[2][2]=X[10],h[0]=f.length(m[0]),f.normalize(m[0],m[0]),S[0]=f.dot(m[0],m[1]),x(m[1],m[1],m[0],1,-S[0]),h[1]=f.length(m[1]),f.normalize(m[1],m[1]),S[0]/=h[1],S[1]=f.dot(m[0],m[2]),x(m[2],m[2],m[0],1,-S[1]),S[2]=f.dot(m[1],m[2]),x(m[2],m[2],m[1],1,-S[2]),h[2]=f.length(m[2]),f.normalize(m[2],m[2]),S[1]/=h[2],S[2]/=h[2],f.cross(g,m[1],m[2]),f.dot(m[0],g)<0)for(var $=0;$<3;$++)h[$]*=-1,m[$][0]*=-1,m[$][1]*=-1,m[$][2]*=-1;return E[0]=.5*Math.sqrt(Math.max(1+m[0][0]-m[1][1]-m[2][2],0)),E[1]=.5*Math.sqrt(Math.max(1-m[0][0]+m[1][1]-m[2][2],0)),E[2]=.5*Math.sqrt(Math.max(1-m[0][0]-m[1][1]+m[2][2],0)),E[3]=.5*Math.sqrt(Math.max(1+m[0][0]+m[1][1]+m[2][2],0)),m[2][1]>m[1][2]&&(E[0]=-E[0]),m[0][2]>m[2][0]&&(E[1]=-E[1]),m[1][0]>m[0][1]&&(E[2]=-E[2]),!0}},4335:function(p){p.exports=function(l,t){var i=t[15];if(0===i)return!1;for(var r=1/i,n=0;n<16;n++)l[n]=t[n]*r;return!0}},7442:function(p,l,t){var i=t(6658),r=t(7182),n=t(2652),a=t(9921),s=t(8648),u=y(),f=y(),c=y();function y(){return{translate:d(),scale:d(1),skew:d(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function d(m){return[m||0,m||0,m||0]}p.exports=function(m,g,x,v){if(0===a(g)||0===a(x))return!1;var b=n(g,u.translate,u.scale,u.skew,u.perspective,u.quaternion),h=n(x,f.translate,f.scale,f.skew,f.perspective,f.quaternion);return!(!b||!h||(i(c.translate,u.translate,f.translate,v),i(c.skew,u.skew,f.skew,v),i(c.scale,u.scale,f.scale,v),i(c.perspective,u.perspective,f.perspective,v),s(c.quaternion,u.quaternion,f.quaternion,v),r(m,c.translate,c.scale,c.skew,c.perspective,c.quaternion),0))}},7182:function(p,l,t){var i={identity:t(7894),translate:t(7656),multiply:t(6760),create:t(6864),scale:t(2504),fromRotationTranslation:t(6743)},r=(i.create(),i.create());p.exports=function(n,a,s,u,f,c){return i.identity(n),i.fromRotationTranslation(n,c,a),n[3]=f[0],n[7]=f[1],n[11]=f[2],n[15]=f[3],i.identity(r),0!==u[2]&&(r[9]=u[2],i.multiply(n,n,r)),0!==u[1]&&(r[9]=0,r[8]=u[1],i.multiply(n,n,r)),0!==u[0]&&(r[8]=0,r[4]=u[0],i.multiply(n,n,r)),i.scale(n,n,s),n}},4192:function(p,l,t){"use strict";var i=t(2478),r=t(7442),n=t(7608),a=t(5567),s=t(2408),u=t(7089),f=t(6582),c=t(7656),y=(t(2504),t(3536)),d=[0,0,0];function m(v){this._components=v.slice(),this._time=[0],this.prevMatrix=v.slice(),this.nextMatrix=v.slice(),this.computedMatrix=v.slice(),this.computedInverse=v.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}p.exports=function(v){return new m((v=v||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var g=m.prototype;g.recalcMatrix=function(v){var b=this._time,h=i.le(b,v),S=this.computedMatrix;if(!(h<0)){var w=this._components;if(h===b.length-1)for(var E=16*h,P=0;P<16;++P)S[P]=w[E++];else{var I=b[h+1]-b[h],O=(E=16*h,this.prevMatrix),z=!0;for(P=0;P<16;++P)O[P]=w[E++];var U=this.nextMatrix;for(P=0;P<16;++P)U[P]=w[E++],z=z&&O[P]===U[P];if(I<1e-6||z)for(P=0;P<16;++P)S[P]=O[P];else r(S,O,U,(v-b[h])/I)}var R=this.computedUp;R[0]=S[1],R[1]=S[5],R[2]=S[9],y(R,R);var j=this.computedInverse;n(j,S);var Y=this.computedEye,B=j[15];Y[0]=j[12]/B,Y[1]=j[13]/B,Y[2]=j[14]/B;var V=this.computedCenter,q=Math.exp(this.computedRadius[0]);for(P=0;P<3;++P)V[P]=Y[P]-S[2+4*P]*q}},g.idle=function(v){if(!(v<this.lastT())){for(var b=this._components,h=b.length-16,S=0;S<16;++S)b.push(b[h++]);this._time.push(v)}},g.flush=function(v){var b=i.gt(this._time,v)-2;b<0||(this._time.splice(0,b),this._components.splice(0,16*b))},g.lastT=function(){return this._time[this._time.length-1]},g.lookAt=function(v,b,h,S){this.recalcMatrix(v),this.setMatrix(v,f(this.computedMatrix,b=b||this.computedEye,h=h||d,S=S||this.computedUp));for(var w=0,E=0;E<3;++E)w+=Math.pow(h[E]-b[E],2);w=Math.log(Math.sqrt(w)),this.computedRadius[0]=w},g.rotate=function(v,b,h,S){this.recalcMatrix(v);var w=this.computedInverse;b&&s(w,w,b),h&&a(w,w,h),S&&u(w,w,S),this.setMatrix(v,n(this.computedMatrix,w))};var x=[0,0,0];g.pan=function(v,b,h,S){x[0]=-(b||0),x[1]=-(h||0),x[2]=-(S||0),this.recalcMatrix(v);var w=this.computedInverse;c(w,w,x),this.setMatrix(v,n(w,w))},g.translate=function(v,b,h,S){x[0]=b||0,x[1]=h||0,x[2]=S||0,this.recalcMatrix(v);var w=this.computedMatrix;c(w,w,x),this.setMatrix(v,w)},g.setMatrix=function(v,b){if(!(v<this.lastT())){this._time.push(v);for(var h=0;h<16;++h)this._components.push(b[h])}},g.setDistance=function(v,b){this.computedRadius[0]=b},g.setDistanceLimits=function(v,b){var h=this._limits;h[0]=v,h[1]=b},g.getDistanceLimits=function(v){var b=this._limits;return v?(v[0]=b[0],v[1]=b[1],v):b}},3090:function(p,l,t){"use strict";p.exports=function(r){var n=r.length;if(n<3){for(var a=new Array(n),s=0;s<n;++s)a[s]=s;return 2===n&&r[0][0]===r[1][0]&&r[0][1]===r[1][1]?[0]:a}var u=new Array(n);for(s=0;s<n;++s)u[s]=s;u.sort(function(b,h){return r[b][0]-r[h][0]||r[b][1]-r[h][1]});var f=[u[0],u[1]],c=[u[0],u[1]];for(s=2;s<n;++s){for(var y=u[s],d=r[y],m=f.length;m>1&&i(r[f[m-2]],r[f[m-1]],d)<=0;)m-=1,f.pop();for(f.push(y),m=c.length;m>1&&i(r[c[m-2]],r[c[m-1]],d)>=0;)m-=1,c.pop();c.push(y)}a=new Array(c.length+f.length-2);for(var g=0,x=(s=0,f.length);s<x;++s)a[g++]=f[s];for(var v=c.length-2;v>0;--v)a[g++]=c[v];return a};var i=t(3250)[3]},351:function(p,l,t){"use strict";p.exports=function(r,n){n||(n=r,r=window);var a=0,s=0,u=0,f={shift:!1,alt:!1,control:!1,meta:!1},c=!1;function y(E){var P=!1;return"altKey"in E&&(P=P||E.altKey!==f.alt,f.alt=!!E.altKey),"shiftKey"in E&&(P=P||E.shiftKey!==f.shift,f.shift=!!E.shiftKey),"ctrlKey"in E&&(P=P||E.ctrlKey!==f.control,f.control=!!E.ctrlKey),"metaKey"in E&&(P=P||E.metaKey!==f.meta,f.meta=!!E.metaKey),P}function d(E,P){var I=i.x(P),O=i.y(P);"buttons"in P&&(E=0|P.buttons),(E!==a||I!==s||O!==u||y(P))&&(a=0|E,s=I||0,u=O||0,n&&n(a,s,u,f))}function m(E){d(0,E)}function g(){(a||s||u||f.shift||f.alt||f.meta||f.control)&&(s=u=0,a=0,f.shift=f.alt=f.control=f.meta=!1,n&&n(0,0,0,f))}function x(E){y(E)&&n&&n(a,s,u,f)}function v(E){0===i.buttons(E)?d(0,E):d(a,E)}function b(E){d(a|i.buttons(E),E)}function h(E){d(a&~i.buttons(E),E)}function S(){c||(c=!0,r.addEventListener("mousemove",v),r.addEventListener("mousedown",b),r.addEventListener("mouseup",h),r.addEventListener("mouseleave",m),r.addEventListener("mouseenter",m),r.addEventListener("mouseout",m),r.addEventListener("mouseover",m),r.addEventListener("blur",g),r.addEventListener("keyup",x),r.addEventListener("keydown",x),r.addEventListener("keypress",x),r!==window&&(window.addEventListener("blur",g),window.addEventListener("keyup",x),window.addEventListener("keydown",x),window.addEventListener("keypress",x)))}S();var w={element:r};return Object.defineProperties(w,{enabled:{get:function(){return c},set:function(E){E?S():c&&(c=!1,r.removeEventListener("mousemove",v),r.removeEventListener("mousedown",b),r.removeEventListener("mouseup",h),r.removeEventListener("mouseleave",m),r.removeEventListener("mouseenter",m),r.removeEventListener("mouseout",m),r.removeEventListener("mouseover",m),r.removeEventListener("blur",g),r.removeEventListener("keyup",x),r.removeEventListener("keydown",x),r.removeEventListener("keypress",x),r!==window&&(window.removeEventListener("blur",g),window.removeEventListener("keyup",x),window.removeEventListener("keydown",x),window.removeEventListener("keypress",x)))},enumerable:!0},buttons:{get:function(){return a},enumerable:!0},x:{get:function(){return s},enumerable:!0},y:{get:function(){return u},enumerable:!0},mods:{get:function(){return f},enumerable:!0}}),w};var i=t(4687)},24:function(p){var l={left:0,top:0};p.exports=function(t,i,r){i=i||t.currentTarget||t.srcElement,Array.isArray(r)||(r=[0,0]);var n,a=t.clientX||0,s=t.clientY||0,u=(n=i)===window||n===document||n===document.body?l:n.getBoundingClientRect();return r[0]=a-u.left,r[1]=s-u.top,r}},4687:function(p,l){"use strict";function t(i){return i.target||i.srcElement||window}l.buttons=function(i){if("object"==typeof i){if("buttons"in i)return i.buttons;if("which"in i){if(2===(r=i.which))return 4;if(3===r)return 2;if(r>0)return 1<<r-1}else if("button"in i){var r;if(1===(r=i.button))return 4;if(2===r)return 2;if(r>=0)return 1<<r}}return 0},l.element=t,l.x=function(i){if("object"==typeof i){if("offsetX"in i)return i.offsetX;var r=t(i).getBoundingClientRect();return i.clientX-r.left}return 0},l.y=function(i){if("object"==typeof i){if("offsetY"in i)return i.offsetY;var r=t(i).getBoundingClientRect();return i.clientY-r.top}return 0}},8512:function(p,l,t){"use strict";var i=t(665);p.exports=function(r,n,a){"function"==typeof r&&(a=!!n,n=r,r=window);var s=i("ex",r),u=function(f){a&&f.preventDefault();var c=f.deltaX||0,y=f.deltaY||0,d=f.deltaZ||0,m=1;switch(f.deltaMode){case 1:m=s;break;case 2:m=window.innerHeight}if(y*=m,d*=m,(c*=m)||y||d)return n(c,y,d,f)};return r.addEventListener("wheel",u),u}},2640:function(p,l,t){"use strict";var i=t(1888);p.exports=function(n){function a(d){throw new Error("ndarray-extract-contour: "+d)}"object"!=typeof n&&a("Must specify arguments");var s=n.order;Array.isArray(s)||a("Must specify order");var d,m,g,h,u=n.arrayArguments||1;u<1&&a("Must have at least one array argument"),(n.scalarArguments||0)<0&&a("Scalar arg count must be > 0"),"function"!=typeof n.vertex&&a("Must specify vertex creation function"),"function"!=typeof n.cell&&a("Must specify cell creation function"),"function"!=typeof n.phase&&a("Must specify phase function");for(var f=n.getters||[],c=new Array(u),y=0;y<u;++y)c[y]=f.indexOf(y)>=0;return d=n.vertex,m=n.cell,g=n.phase,h=[c,s].join(","),(0,r[h])(d,m,g,i.mallocUint32,i.freeUint32)};var r={"false,0,1":function(n,a,s,u,f){return function(c,y,d,m){var g,x=0|c.shape[0],v=0|c.shape[1],b=c.data,S=0|c.stride[0],w=0|c.stride[1],E=0|c.offset,P=0|-S,I=0,O=0|-w,z=0,U=-S-w|0,R=0,j=0|S,Y=w-S*x|0,B=0,V=0,q=0,ie=2*x|0,te=u(ie),ee=u(ie),$=0,J=0,X=-1,ae=-1,ce=0,le=0|-x,pe=0|x,we=0,Te=-x-1|0,ye=x-1|0,ve=0,xe=0,Ce=0;for(B=0;B<x;++B)te[$++]=s(b[E],y,d,m),E+=j;if(E+=Y,v>0){if(V=1,te[$++]=s(b[E],y,d,m),E+=j,x>0)for(B=1,J=te[$]=s(g=b[E],y,d,m),we=te[$+le],ve=te[$+Te],J===(ce=te[$+X])&&J===we&&J===ve||(n(B,V,g,I=b[E+P],z=b[E+O],R=b[E+U],J,ce,we,ve,y,d,m),xe=ee[$]=q++),$+=1,E+=j,B=2;B<x;++B)J=te[$]=s(g=b[E],y,d,m),we=te[$+le],ve=te[$+Te],J===(ce=te[$+X])&&J===we&&J===ve||(n(B,V,g,I=b[E+P],z=b[E+O],R=b[E+U],J,ce,we,ve,y,d,m),xe=ee[$]=q++,ve!==ce&&a(ee[$+X],xe,R,I,ve,ce,y,d,m)),$+=1,E+=j;for(E+=Y,$=0,Ce=X,X=ae,ae=Ce,Ce=le,le=pe,pe=Ce,Ce=Te,Te=ye,ye=Ce,V=2;V<v;++V){if(te[$++]=s(b[E],y,d,m),E+=j,x>0)for(B=1,J=te[$]=s(g=b[E],y,d,m),we=te[$+le],ve=te[$+Te],J===(ce=te[$+X])&&J===we&&J===ve||(n(B,V,g,I=b[E+P],z=b[E+O],R=b[E+U],J,ce,we,ve,y,d,m),xe=ee[$]=q++,ve!==we&&a(ee[$+le],xe,z,R,we,ve,y,d,m)),$+=1,E+=j,B=2;B<x;++B)J=te[$]=s(g=b[E],y,d,m),we=te[$+le],ve=te[$+Te],J===(ce=te[$+X])&&J===we&&J===ve||(n(B,V,g,I=b[E+P],z=b[E+O],R=b[E+U],J,ce,we,ve,y,d,m),xe=ee[$]=q++,ve!==we&&a(ee[$+le],xe,z,R,we,ve,y,d,m),ve!==ce&&a(ee[$+X],xe,R,I,ve,ce,y,d,m)),$+=1,E+=j;1&V&&($=0),Ce=X,X=ae,ae=Ce,Ce=le,le=pe,pe=Ce,Ce=Te,Te=ye,ye=Ce,E+=Y}}f(ee),f(te)}},"false,1,0":function(n,a,s,u,f){return function(c,y,d,m){var g,x=0|c.shape[0],v=0|c.shape[1],b=c.data,S=0|c.stride[0],w=0|c.stride[1],E=0|c.offset,P=0|-S,I=0,O=0|-w,z=0,U=-S-w|0,R=0,j=0|w,Y=S-w*v|0,B=0,V=0,q=0,ie=2*v|0,te=u(ie),ee=u(ie),$=0,J=0,X=-1,ae=-1,ce=0,le=0|-v,pe=0|v,we=0,Te=-v-1|0,ye=v-1|0,ve=0,xe=0,Ce=0;for(V=0;V<v;++V)te[$++]=s(b[E],y,d,m),E+=j;if(E+=Y,x>0){if(B=1,te[$++]=s(b[E],y,d,m),E+=j,v>0)for(V=1,J=te[$]=s(g=b[E],y,d,m),ce=te[$+X],ve=te[$+Te],J===(we=te[$+le])&&J===ce&&J===ve||(n(B,V,g,I=b[E+P],z=b[E+O],R=b[E+U],J,we,ce,ve,y,d,m),xe=ee[$]=q++),$+=1,E+=j,V=2;V<v;++V)J=te[$]=s(g=b[E],y,d,m),ce=te[$+X],ve=te[$+Te],J===(we=te[$+le])&&J===ce&&J===ve||(n(B,V,g,I=b[E+P],z=b[E+O],R=b[E+U],J,we,ce,ve,y,d,m),xe=ee[$]=q++,ve!==ce&&a(ee[$+X],xe,z,R,ce,ve,y,d,m)),$+=1,E+=j;for(E+=Y,$=0,Ce=le,le=pe,pe=Ce,Ce=X,X=ae,ae=Ce,Ce=Te,Te=ye,ye=Ce,B=2;B<x;++B){if(te[$++]=s(b[E],y,d,m),E+=j,v>0)for(V=1,J=te[$]=s(g=b[E],y,d,m),ce=te[$+X],ve=te[$+Te],J===(we=te[$+le])&&J===ce&&J===ve||(n(B,V,g,I=b[E+P],z=b[E+O],R=b[E+U],J,we,ce,ve,y,d,m),xe=ee[$]=q++,ve!==we&&a(ee[$+le],xe,R,I,ve,we,y,d,m)),$+=1,E+=j,V=2;V<v;++V)J=te[$]=s(g=b[E],y,d,m),ce=te[$+X],ve=te[$+Te],J===(we=te[$+le])&&J===ce&&J===ve||(n(B,V,g,I=b[E+P],z=b[E+O],R=b[E+U],J,we,ce,ve,y,d,m),xe=ee[$]=q++,ve!==ce&&a(ee[$+X],xe,z,R,ce,ve,y,d,m),ve!==we&&a(ee[$+le],xe,R,I,ve,we,y,d,m)),$+=1,E+=j;1&B&&($=0),Ce=le,le=pe,pe=Ce,Ce=X,X=ae,ae=Ce,Ce=Te,Te=ye,ye=Ce,E+=Y}}f(ee),f(te)}}}},6199:function(p,l,t){"use strict";var i=t(1338),r={zero:function(x,v,b,h){var S=x[0];h|=0;var w=0,E=b[0];for(w=0;w<S;++w)v[h]=0,h+=E},fdTemplate1:function(x,v,b,h,S,w,E){var P=x[0],I=b[0],O=-1*I,z=I;h|=0,E|=0;var U=0,R=I,j=w[0];for(U=0;U<P;++U)S[E]=.5*(v[h+O]-v[h+z]),h+=R,E+=j},fdTemplate2:function(x,v,b,h,S,w,E,P,I,O){var z=x[0],U=x[1],R=b[0],j=b[1],B=w[1],q=I[1],ie=-1*R,te=R,ee=-1*j,$=j;h|=0,E|=0,O|=0;var J=0,X=0,ae=j,ce=R-U*j,le=B,pe=w[0]-U*B,we=q,Te=I[0]-U*q;for(X=0;X<z;++X){for(J=0;J<U;++J)S[E]=.5*(v[h+ie]-v[h+te]),P[O]=.5*(v[h+ee]-v[h+$]),h+=ae,E+=le,O+=we;h+=ce,E+=pe,O+=Te}}},n={cdiff:function(x){var v={};return function(b,h,S){var w=b.dtype,E=b.order,P=h.dtype,I=h.order,O=S.dtype,z=S.order,U=[w,E.join(),P,I.join(),O,z.join()].join(),R=v[U];return R||(v[U]=R=x([w,E,P,I,O,z])),R(b.shape.slice(0),b.data,b.stride,0|b.offset,h.data,h.stride,0|h.offset,S.data,S.stride,0|S.offset)}},zero:function(x){var v={};return function(b){var h=b.dtype,S=b.order,w=[h,S.join()].join(),E=v[w];return E||(v[w]=E=x([h,S])),E(b.shape.slice(0),b.data,b.stride,0|b.offset)}},fdTemplate1:function(x){var v={};return function(b,h){var S=b.dtype,w=b.order,E=h.dtype,P=h.order,I=[S,w.join(),E,P.join()].join(),O=v[I];return O||(v[I]=O=x([S,w,E,P])),O(b.shape.slice(0),b.data,b.stride,0|b.offset,h.data,h.stride,0|h.offset)}},fdTemplate2:function(x){var v={};return function(b,h,S){var w=b.dtype,E=b.order,P=h.dtype,I=h.order,O=S.dtype,z=S.order,U=[w,E.join(),P,I.join(),O,z.join()].join(),R=v[U];return R||(v[U]=R=x([w,E,P,I,O,z])),R(b.shape.slice(0),b.data,b.stride,0|b.offset,h.data,h.stride,0|h.offset,S.data,S.stride,0|S.offset)}}};function a(x){return(0,n[x.funcName])(s.bind(void 0,x))}function s(x){return r[x.funcName]}function u(x){return a({funcName:x.funcName})}var f={},c={},y=u({funcName:"cdiff"}),d=u({funcName:"zero"});function m(x){return x in f?f[x]:f[x]=u({funcName:"fdTemplate"+x})}function g(x,v,b,h){return function(S,w){var E=w.shape.slice();return E[0]>2&&E[1]>2&&h(w.pick(-1,-1).lo(1,1).hi(E[0]-2,E[1]-2),S.pick(-1,-1,0).lo(1,1).hi(E[0]-2,E[1]-2),S.pick(-1,-1,1).lo(1,1).hi(E[0]-2,E[1]-2)),E[1]>2&&(b(w.pick(0,-1).lo(1).hi(E[1]-2),S.pick(0,-1,1).lo(1).hi(E[1]-2)),v(S.pick(0,-1,0).lo(1).hi(E[1]-2))),E[1]>2&&(b(w.pick(E[0]-1,-1).lo(1).hi(E[1]-2),S.pick(E[0]-1,-1,1).lo(1).hi(E[1]-2)),v(S.pick(E[0]-1,-1,0).lo(1).hi(E[1]-2))),E[0]>2&&(b(w.pick(-1,0).lo(1).hi(E[0]-2),S.pick(-1,0,0).lo(1).hi(E[0]-2)),v(S.pick(-1,0,1).lo(1).hi(E[0]-2))),E[0]>2&&(b(w.pick(-1,E[1]-1).lo(1).hi(E[0]-2),S.pick(-1,E[1]-1,0).lo(1).hi(E[0]-2)),v(S.pick(-1,E[1]-1,1).lo(1).hi(E[0]-2))),S.set(0,0,0,0),S.set(0,0,1,0),S.set(E[0]-1,0,0,0),S.set(E[0]-1,0,1,0),S.set(0,E[1]-1,0,0),S.set(0,E[1]-1,1,0),S.set(E[0]-1,E[1]-1,0,0),S.set(E[0]-1,E[1]-1,1,0),S}}p.exports=function(x,v,b){return Array.isArray(b)||(b=i(v.dimension,"string"==typeof b?b:"clamp")),0===v.size?x:0===v.dimension?(x.set(0),x):function(h){var S=h.join();if(I=c[S])return I;for(var w=h.length,E=[y,d],P=1;P<=w;++P)E.push(m(P));var I=g.apply(void 0,E);return c[S]=I,I}(b)(x,v)}},4317:function(p){"use strict";function l(n,a){var s=Math.floor(a),u=a-s,c=0<=s+1&&s+1<n.shape[0];return(1-u)*(0<=s&&s<n.shape[0]?+n.get(s):0)+u*(c?+n.get(s+1):0)}function t(n,a,s){var u=Math.floor(a),f=a-u,c=0<=u&&u<n.shape[0],y=0<=u+1&&u+1<n.shape[0],d=Math.floor(s),m=s-d,g=0<=d&&d<n.shape[1],x=0<=d+1&&d+1<n.shape[1],v=c&&g?n.get(u,d):0,b=c&&x?n.get(u,d+1):0;return(1-m)*((1-f)*v+f*(y&&g?n.get(u+1,d):0))+m*((1-f)*b+f*(y&&x?n.get(u+1,d+1):0))}function i(n,a,s,u){var f=Math.floor(a),c=a-f,y=0<=f&&f<n.shape[0],d=0<=f+1&&f+1<n.shape[0],m=Math.floor(s),g=s-m,x=0<=m&&m<n.shape[1],v=0<=m+1&&m+1<n.shape[1],b=Math.floor(u),h=u-b,S=0<=b&&b<n.shape[2],w=0<=b+1&&b+1<n.shape[2],E=y&&x&&S?n.get(f,m,b):0,P=y&&v&&S?n.get(f,m+1,b):0,I=d&&x&&S?n.get(f+1,m,b):0,O=d&&v&&S?n.get(f+1,m+1,b):0,z=y&&x&&w?n.get(f,m,b+1):0,U=y&&v&&w?n.get(f,m+1,b+1):0;return(1-h)*((1-g)*((1-c)*E+c*I)+g*((1-c)*P+c*O))+h*((1-g)*((1-c)*z+c*(d&&x&&w?n.get(f+1,m,b+1):0))+g*((1-c)*U+c*(d&&v&&w?n.get(f+1,m+1,b+1):0)))}function r(n){var a,s,u=0|n.shape.length,f=new Array(u),c=new Array(u),y=new Array(u),d=new Array(u);for(a=0;a<u;++a)s=+arguments[a+1],f[a]=Math.floor(s),c[a]=s-f[a],y[a]=0<=f[a]&&f[a]<n.shape[a],d[a]=0<=f[a]+1&&f[a]+1<n.shape[a];var m,g,x,v=0;e:for(a=0;a<1<<u;++a){for(g=1,x=n.offset,m=0;m<u;++m)if(a&1<<m){if(!d[m])continue e;g*=c[m],x+=n.stride[m]*(f[m]+1)}else{if(!y[m])continue e;g*=1-c[m],x+=n.stride[m]*f[m]}v+=g*n.data[x]}return v}p.exports=function(n,a,s,u){switch(n.shape.length){case 0:return 0;case 1:return l(n,a);case 2:return t(n,a,s);case 3:return i(n,a,s,u);default:return r.apply(void 0,arguments)}},p.exports.d1=l,p.exports.d2=t,p.exports.d3=i},5298:function(p,l){"use strict";var t={"float64,2,1,0":function(){return function(s,u,f,c,y){var d=s[0],m=s[1],g=s[2],v=f[1],b=f[2];c|=0;var h=0,S=0,w=0,E=b,P=v-g*b,I=f[0]-m*v;for(w=0;w<d;++w){for(S=0;S<m;++S){for(h=0;h<g;++h)u[c]/=y,c+=E;c+=P}c+=I}}},"uint8,2,0,1,float64,2,1,0":function(){return function(s,u,f,c,y,d,m,g){for(var x=s[0],v=s[1],b=s[2],h=f[0],S=f[1],w=f[2],E=d[0],P=d[1],I=d[2],O=c|=0,z=m|=0,U=0|s[0];U>0;){U<64?(x=U,U=0):(x=64,U-=64);for(var R=0|s[1];R>0;){R<64?(v=R,R=0):(v=64,R-=64),c=O+U*h+R*S,m=z+U*E+R*P;var j=0,Y=0,B=0,V=w,q=h-b*w,ie=S-x*h,te=I,ee=E-b*I,$=P-x*E;for(B=0;B<v;++B){for(Y=0;Y<x;++Y){for(j=0;j<b;++j)u[c]=y[m]*g,c+=V,m+=te;c+=q,m+=ee}c+=ie,m+=$}}}}},"float32,1,0,float32,1,0":function(){return function(s,u,f,c,y,d,m){var g=s[0],x=s[1],b=f[1],S=d[1];c|=0,m|=0;var w=0,E=0,P=b,I=f[0]-x*b,O=S,z=d[0]-x*S;for(E=0;E<g;++E){for(w=0;w<x;++w)u[c]=y[m],c+=P,m+=O;c+=I,m+=z}}},"float32,1,0,float32,0,1":function(){return function(s,u,f,c,y,d,m){for(var g=s[0],x=s[1],v=f[0],b=f[1],h=d[0],S=d[1],w=c|=0,E=m|=0,P=0|s[1];P>0;){P<64?(x=P,P=0):(x=64,P-=64);for(var I=0|s[0];I>0;){I<64?(g=I,I=0):(g=64,I-=64),c=w+P*b+I*v,m=E+P*S+I*h;var O=0,z=0,U=b,R=v-x*b,j=S,Y=h-x*S;for(z=0;z<g;++z){for(O=0;O<x;++O)u[c]=y[m],c+=U,m+=j;c+=R,m+=Y}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(s,u,f,c,y,d,m){for(var g=s[0],x=s[1],v=s[2],b=f[0],h=f[1],S=f[2],w=d[0],E=d[1],P=d[2],I=c|=0,O=m|=0,z=0|s[2];z>0;){z<64?(v=z,z=0):(v=64,z-=64);for(var U=0|s[0];U>0;){U<64?(g=U,U=0):(g=64,U-=64);for(var R=0|s[1];R>0;){R<64?(x=R,R=0):(x=64,R-=64),c=I+z*S+U*b+R*h,m=O+z*P+U*w+R*E;var j=0,Y=0,B=0,V=S,q=b-v*S,ie=h-g*b,te=P,ee=w-v*P,$=E-g*w;for(B=0;B<x;++B){for(Y=0;Y<g;++Y){for(j=0;j<v;++j)u[c]=y[m],c+=V,m+=te;c+=q,m+=ee}c+=ie,m+=$}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(s,u,f,c,y,d,m){var g=s[0],x=s[1],v=s[2],b=f[0],S=f[2],w=d[0],P=d[2];c|=0,m|=0;var I=0,O=0,z=0,U=S,R=b-v*S,j=f[1]-g*b,Y=P,B=w-v*P,V=d[1]-g*w;for(z=0;z<x;++z){for(O=0;O<g;++O){for(I=0;I<v;++I)u[c]=y[m],c+=U,m+=Y;c+=R,m+=B}c+=j,m+=V}}}},i=function(s,u){var f=u.join(",");return(0,t[f])()},r={mul:function(s){var u={};return function(f,c,y){var d=f.dtype,m=f.order,g=c.dtype,x=c.order,v=y.dtype,b=y.order,h=[d,m.join(),g,x.join(),v,b.join()].join(),S=u[h];return S||(u[h]=S=s([d,m,g,x,v,b])),S(f.shape.slice(0),f.data,f.stride,0|f.offset,c.data,c.stride,0|c.offset,y.data,y.stride,0|y.offset)}},muls:function(s){var u={};return function(f,c,y){var d=f.dtype,m=f.order,g=c.dtype,x=c.order,v=[d,m.join(),g,x.join()].join(),b=u[v];return b||(u[v]=b=s([d,m,g,x])),b(f.shape.slice(0),f.data,f.stride,0|f.offset,c.data,c.stride,0|c.offset,y)}},mulseq:function(s){var u={};return function(f,c){var y=f.dtype,d=f.order,m=[y,d.join()].join(),g=u[m];return g||(u[m]=g=s([y,d])),g(f.shape.slice(0),f.data,f.stride,0|f.offset,c)}},div:function(s){var u={};return function(f,c,y){var d=f.dtype,m=f.order,g=c.dtype,x=c.order,v=y.dtype,b=y.order,h=[d,m.join(),g,x.join(),v,b.join()].join(),S=u[h];return S||(u[h]=S=s([d,m,g,x,v,b])),S(f.shape.slice(0),f.data,f.stride,0|f.offset,c.data,c.stride,0|c.offset,y.data,y.stride,0|y.offset)}},divs:function(s){var u={};return function(f,c,y){var d=f.dtype,m=f.order,g=c.dtype,x=c.order,v=[d,m.join(),g,x.join()].join(),b=u[v];return b||(u[v]=b=s([d,m,g,x])),b(f.shape.slice(0),f.data,f.stride,0|f.offset,c.data,c.stride,0|c.offset,y)}},divseq:function(s){var u={};return function(f,c){var y=f.dtype,d=f.order,m=[y,d.join()].join(),g=u[m];return g||(u[m]=g=s([y,d])),g(f.shape.slice(0),f.data,f.stride,0|f.offset,c)}},assign:function(s){var u={};return function(f,c){var y=f.dtype,d=f.order,m=c.dtype,g=c.order,x=[y,d.join(),m,g.join()].join(),v=u[x];return v||(u[x]=v=s([y,d,m,g])),v(f.shape.slice(0),f.data,f.stride,0|f.offset,c.data,c.stride,0|c.offset)}}};function n(s){return(0,r[(u={funcName:s.funcName}).funcName])(i.bind(void 0,u));var u}var a={mul:"*",div:"/"};(function(){for(var s in a)l[s]=n({funcName:s}),l[s+"s"]=n({funcName:s+"s"}),l[s+"seq"]=n({funcName:s+"seq"})})(),l.assign=n({funcName:"assign"})},9994:function(p,l,t){"use strict";var i=t(9618),r=t(8277);p.exports=function(n,a){for(var s=[],u=n,f=1;Array.isArray(u);)s.push(u.length),f*=u.length,u=u[0];return 0===s.length?i():(a||(a=i(new Float64Array(f),s)),r(a,n),a)}},8277:function(p){"use strict";var l,t;p.exports=(l=function(){return function(l,t,i,r,n){var a=l[0],s=l[1],u=l[2],c=i[1],y=i[2],d=[0,0,0];r|=0;var m=0,g=0,x=0,v=y,b=c-u*y,h=i[0]-s*c;for(x=0;x<a;++x){for(g=0;g<s;++g){for(m=0;m<u;++m){var S,w=n;for(S=0;S<d.length-1;++S)w=w[d[S]];t[r]=w[d[d.length-1]],r+=v,++d[2]}r+=b,d[2]-=u,++d[1]}r+=h,d[1]-=s,++d[0]}}}.bind(void 0,{funcName:"convert"}),t={},function(i,r){var n=i.dtype,a=i.order,s=[n,a.join()].join(),u=t[s];return u||(t[s]=u=l([n,a])),u(i.shape.slice(0),i.data,i.stride,0|i.offset,r)})},7640:function(p,l,t){"use strict";var i=t(1888);function r(u){return"uint32"===u?[i.mallocUint32,i.freeUint32]:null}var n={"uint32,1,0":function(u,f){return function(c,y,d,m,g,x,v,b,h,S,w){var E,P,I,O,z,U,R,j,Y=c*g+m,B=u(b);for(E=c+1;E<=y;++E){for(P=E,I=Y+=g,z=0,U=Y,O=0;O<b;++O)B[z++]=d[U],U+=h;e:for(;P-- >c;){z=0,U=I-g;t:for(O=0;O<b;++O){if((R=d[U])<(j=B[z]))break e;if(R>j)break t;U+=S,z+=w}for(z=I,U=I-g,O=0;O<b;++O)d[z]=d[U],z+=h,U+=h;I-=g}for(z=I,U=0,O=0;O<b;++O)d[z]=B[U++],z+=h}f(B)}}},a={"uint32,1,0":function(u,f,c){return function y(d,m,g,x,v,b,h,S,w,E,P){var I,O,U,R,j,Y,B,V,q,ie,te,ee,$,J,X,ae,ce,le,pe,we,Te,ye,ve,xe,Ce=(m-d+1)/6|0,Oe=d+Ce,be=m-Ce,ue=d+m>>1,se=ue-Ce,ge=ue+Ce,Ie=Oe,ke=se,Se=ue,Pe=ge,Fe=be,Be=d+1,me=m-1,Me=!0,Le=0,Ne=0,Re=0,He=S,Ze=f(He),nt=f(He);ie=v*Ie,te=v*ke,xe=x;e:for(q=0;q<S;++q){if((Re=g[Y=ie+xe]-g[B=te+xe])>0){O=Ie,Ie=ke,ke=O;break e}if(Re<0)break e;xe+=E}ie=v*Pe,te=v*Fe,xe=x;e:for(q=0;q<S;++q){if((Re=g[Y=ie+xe]-g[B=te+xe])>0){O=Pe,Pe=Fe,Fe=O;break e}if(Re<0)break e;xe+=E}ie=v*Ie,te=v*Se,xe=x;e:for(q=0;q<S;++q){if((Re=g[Y=ie+xe]-g[B=te+xe])>0){O=Ie,Ie=Se,Se=O;break e}if(Re<0)break e;xe+=E}ie=v*ke,te=v*Se,xe=x;e:for(q=0;q<S;++q){if((Re=g[Y=ie+xe]-g[B=te+xe])>0){O=ke,ke=Se,Se=O;break e}if(Re<0)break e;xe+=E}ie=v*Ie,te=v*Pe,xe=x;e:for(q=0;q<S;++q){if((Re=g[Y=ie+xe]-g[B=te+xe])>0){O=Ie,Ie=Pe,Pe=O;break e}if(Re<0)break e;xe+=E}ie=v*Se,te=v*Pe,xe=x;e:for(q=0;q<S;++q){if((Re=g[Y=ie+xe]-g[B=te+xe])>0){O=Se,Se=Pe,Pe=O;break e}if(Re<0)break e;xe+=E}ie=v*ke,te=v*Fe,xe=x;e:for(q=0;q<S;++q){if((Re=g[Y=ie+xe]-g[B=te+xe])>0){O=ke,ke=Fe,Fe=O;break e}if(Re<0)break e;xe+=E}ie=v*ke,te=v*Se,xe=x;e:for(q=0;q<S;++q){if((Re=g[Y=ie+xe]-g[B=te+xe])>0){O=ke,ke=Se,Se=O;break e}if(Re<0)break e;xe+=E}ie=v*Pe,te=v*Fe,xe=x;e:for(q=0;q<S;++q){if((Re=g[Y=ie+xe]-g[B=te+xe])>0){O=Pe,Pe=Fe,Fe=O;break e}if(Re<0)break e;xe+=E}for(ie=v*Ie,te=v*ke,ee=v*Se,$=v*Pe,J=v*Fe,X=v*Oe,ae=v*ue,ce=v*be,ve=0,xe=x,q=0;q<S;++q)Y=ie+xe,V=ee+xe,le=$+xe,pe=J+xe,we=X+xe,Te=ae+xe,ye=ce+xe,Ze[ve]=g[B=te+xe],nt[ve]=g[le],Me=Me&&Ze[ve]===nt[ve],U=g[V],R=g[pe],g[we]=g[Y],g[Te]=U,g[ye]=R,++ve,xe+=w;for(ie=v*se,te=v*d,xe=x,q=0;q<S;++q)g[Y=ie+xe]=g[B=te+xe],xe+=w;for(ie=v*ge,te=v*m,xe=x,q=0;q<S;++q)g[Y=ie+xe]=g[B=te+xe],xe+=w;if(Me)for(j=Be;j<=me;++j){for(Y=x+j*v,ve=0,q=0;q<S&&0==(Re=g[Y]-Ze[ve]);++q)ve+=P,Y+=E;if(0!==Re)if(Re<0){if(j!==Be)for(ie=v*j,te=v*Be,xe=x,q=0;q<S;++q)I=g[Y=ie+xe],g[Y]=g[B=te+xe],g[B]=I,xe+=w;++Be}else for(;;){for(Y=x+me*v,ve=0,q=0;q<S&&0==(Re=g[Y]-Ze[ve]);++q)ve+=P,Y+=E;if(!(Re>0)){if(Re<0){for(ie=v*j,te=v*Be,ee=v*me,xe=x,q=0;q<S;++q)V=ee+xe,I=g[Y=ie+xe],g[Y]=g[B=te+xe],g[B]=g[V],g[V]=I,xe+=w;++Be,--me;break}for(ie=v*j,te=v*me,xe=x,q=0;q<S;++q)I=g[Y=ie+xe],g[Y]=g[B=te+xe],g[B]=I,xe+=w;--me;break}me--}}else for(j=Be;j<=me;++j){for(Y=x+j*v,ve=0,q=0;q<S&&0==(Le=g[Y]-Ze[ve]);++q)ve+=P,Y+=E;if(Le<0){if(j!==Be)for(ie=v*j,te=v*Be,xe=x,q=0;q<S;++q)I=g[Y=ie+xe],g[Y]=g[B=te+xe],g[B]=I,xe+=w;++Be}else{for(Y=x+j*v,ve=0,q=0;q<S&&0==(Ne=g[Y]-nt[ve]);++q)ve+=P,Y+=E;if(Ne>0)for(;;){for(Y=x+me*v,ve=0,q=0;q<S&&0==(Re=g[Y]-nt[ve]);++q)ve+=P,Y+=E;if(!(Re>0)){for(Y=x+me*v,ve=0,q=0;q<S&&0==(Re=g[Y]-Ze[ve]);++q)ve+=P,Y+=E;if(Re<0){for(ie=v*j,te=v*Be,ee=v*me,xe=x,q=0;q<S;++q)V=ee+xe,I=g[Y=ie+xe],g[Y]=g[B=te+xe],g[B]=g[V],g[V]=I,xe+=w;++Be,--me}else{for(ie=v*j,te=v*me,xe=x,q=0;q<S;++q)I=g[Y=ie+xe],g[Y]=g[B=te+xe],g[B]=I,xe+=w;--me}break}if(--me<j)break}}}for(ie=v*d,te=v*(Be-1),ve=0,xe=x,q=0;q<S;++q)g[Y=ie+xe]=g[B=te+xe],g[B]=Ze[ve],++ve,xe+=w;for(ie=v*m,te=v*(me+1),ve=0,xe=x,q=0;q<S;++q)g[Y=ie+xe]=g[B=te+xe],g[B]=nt[ve],++ve,xe+=w;if(Be-2-d<=32?u(d,Be-2,g,x,v,b,h,S,w,E,P):y(d,Be-2,g,x,v,b,h,S,w,E,P),m-(me+2)<=32?u(me+2,m,g,x,v,b,h,S,w,E,P):y(me+2,m,g,x,v,b,h,S,w,E,P),Me)return c(Ze),void c(nt);if(Be<Oe&&me>be){e:for(;;){for(Y=x+Be*v,ve=0,xe=x,q=0;q<S;++q){if(g[Y]!==Ze[ve])break e;++ve,Y+=w}++Be}e:for(;;){for(Y=x+me*v,ve=0,xe=x,q=0;q<S;++q){if(g[Y]!==nt[ve])break e;++ve,Y+=w}--me}for(j=Be;j<=me;++j){for(Y=x+j*v,ve=0,q=0;q<S&&0==(Le=g[Y]-Ze[ve]);++q)ve+=P,Y+=E;if(0===Le){if(j!==Be)for(ie=v*j,te=v*Be,xe=x,q=0;q<S;++q)I=g[Y=ie+xe],g[Y]=g[B=te+xe],g[B]=I,xe+=w;++Be}else{for(Y=x+j*v,ve=0,q=0;q<S&&0==(Ne=g[Y]-nt[ve]);++q)ve+=P,Y+=E;if(0===Ne)for(;;){for(Y=x+me*v,ve=0,q=0;q<S&&0==(Re=g[Y]-nt[ve]);++q)ve+=P,Y+=E;if(0!==Re){for(Y=x+me*v,ve=0,q=0;q<S&&0==(Re=g[Y]-Ze[ve]);++q)ve+=P,Y+=E;if(Re<0){for(ie=v*j,te=v*Be,ee=v*me,xe=x,q=0;q<S;++q)V=ee+xe,I=g[Y=ie+xe],g[Y]=g[B=te+xe],g[B]=g[V],g[V]=I,xe+=w;++Be,--me}else{for(ie=v*j,te=v*me,xe=x,q=0;q<S;++q)I=g[Y=ie+xe],g[Y]=g[B=te+xe],g[B]=I,xe+=w;--me}break}if(--me<j)break}}}}c(Ze),c(nt),me-Be<=32?u(Be,me,g,x,v,b,h,S,w,E,P):y(Be,me,g,x,v,b,h,S,w,E,P)}}},s={"uint32,1,0":function(u,f){return function(c){var y=c.data,d=0|c.offset,m=c.shape,g=c.stride,x=0|g[0],v=0|m[0],b=0|g[1],h=0|m[1],S=b,w=b;v<=32?u(0,v-1,y,d,x,b,v,h,S,w,1):f(0,v-1,y,d,x,b,v,h,S,w,1)}}};p.exports=function(u,f){var g,x,v,b,h,c=[f,u].join(","),y=s[c],d=(g=u,v=r(x=f),b=[x,g].join(","),h=n[b],v?h(v[0],v[1]):h()),m=function(g,x,v){var b=r(x),h=[x,g].join(","),S=a[h];return g.length>1&&b?S(v,b[0],b[1]):S(v)}(u,f,d);return y(d,m)}},446:function(p,l,t){"use strict";var i=t(7640),r={};p.exports=function(n){var a=n.order,s=n.dtype,u=[a,s].join(":"),f=r[u];return f||(r[u]=f=i(a,s)),f(n),n}},9618:function(p,l,t){var i=t(7163),r=typeof Float64Array<"u";function n(c,y){return c[0]-y[0]}function a(){var c,y=this.stride,d=new Array(y.length);for(c=0;c<d.length;++c)d[c]=[Math.abs(y[c]),c];d.sort(n);var m=new Array(d.length);for(c=0;c<m.length;++c)m[c]=d[c][1];return m}var s={T:function(c){function y(m){this.data=m}var d=y.prototype;return d.dtype=c,d.index=function(){return-1},d.size=0,d.dimension=-1,d.shape=d.stride=d.order=[],d.lo=d.hi=d.transpose=d.step=function(){return new y(this.data)},d.get=d.set=function(){},d.pick=function(){return null},function(m){return new y(m)}},0:function(c,y){function d(g,x){this.data=g,this.offset=x}var m=d.prototype;return m.dtype=c,m.index=function(){return this.offset},m.dimension=0,m.size=1,m.shape=m.stride=m.order=[],m.lo=m.hi=m.transpose=m.step=function(){return new d(this.data,this.offset)},m.pick=function(){return y(this.data)},m.valueOf=m.get=function(){return"generic"===c?this.data.get(this.offset):this.data[this.offset]},m.set=function(g){return"generic"===c?this.data.set(this.offset,g):this.data[this.offset]=g},function(g,x,v,b){return new d(g,b)}},1:function(c,y,d){function m(x,v,b,h){this.data=x,this.shape=[v],this.stride=[b],this.offset=0|h}var g=m.prototype;return g.dtype=c,g.dimension=1,Object.defineProperty(g,"size",{get:function(){return this.shape[0]}}),g.order=[0],g.set=function(x,v){return"generic"===c?this.data.set(this.offset+this.stride[0]*x,v):this.data[this.offset+this.stride[0]*x]=v},g.get=function(x){return"generic"===c?this.data.get(this.offset+this.stride[0]*x):this.data[this.offset+this.stride[0]*x]},g.index=function(x){return this.offset+this.stride[0]*x},g.hi=function(x){return new m(this.data,"number"!=typeof x||x<0?this.shape[0]:0|x,this.stride[0],this.offset)},g.lo=function(x){var v=this.offset,b=0,h=this.shape[0],S=this.stride[0];return"number"==typeof x&&x>=0&&(v+=S*(b=0|x),h-=b),new m(this.data,h,S,v)},g.step=function(x){var v=this.shape[0],b=this.stride[0],h=this.offset,S=0,w=Math.ceil;return"number"==typeof x&&((S=0|x)<0?(h+=b*(v-1),v=w(-v/S)):v=w(v/S),b*=S),new m(this.data,v,b,h)},g.transpose=function(x){return new m(this.data,this.shape[x=void 0===x?0:0|x],this.stride[x],this.offset)},g.pick=function(x){var v=[],b=[],h=this.offset;return"number"==typeof x&&x>=0?h=h+this.stride[0]*x|0:(v.push(this.shape[0]),b.push(this.stride[0])),(0,y[v.length+1])(this.data,v,b,h)},function(x,v,b,h){return new m(x,v[0],b[0],h)}},2:function(c,y,d){function m(x,v,b,h,S,w){this.data=x,this.shape=[v,b],this.stride=[h,S],this.offset=0|w}var g=m.prototype;return g.dtype=c,g.dimension=2,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(g,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),g.set=function(x,v,b){return"generic"===c?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*v,b):this.data[this.offset+this.stride[0]*x+this.stride[1]*v]=b},g.get=function(x,v){return"generic"===c?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*v):this.data[this.offset+this.stride[0]*x+this.stride[1]*v]},g.index=function(x,v){return this.offset+this.stride[0]*x+this.stride[1]*v},g.hi=function(x,v){return new m(this.data,"number"!=typeof x||x<0?this.shape[0]:0|x,"number"!=typeof v||v<0?this.shape[1]:0|v,this.stride[0],this.stride[1],this.offset)},g.lo=function(x,v){var b=this.offset,h=0,S=this.shape[0],w=this.shape[1],E=this.stride[0],P=this.stride[1];return"number"==typeof x&&x>=0&&(b+=E*(h=0|x),S-=h),"number"==typeof v&&v>=0&&(b+=P*(h=0|v),w-=h),new m(this.data,S,w,E,P,b)},g.step=function(x,v){var b=this.shape[0],h=this.shape[1],S=this.stride[0],w=this.stride[1],E=this.offset,P=0,I=Math.ceil;return"number"==typeof x&&((P=0|x)<0?(E+=S*(b-1),b=I(-b/P)):b=I(b/P),S*=P),"number"==typeof v&&((P=0|v)<0?(E+=w*(h-1),h=I(-h/P)):h=I(h/P),w*=P),new m(this.data,b,h,S,w,E)},g.transpose=function(x,v){var b=this.shape,h=this.stride;return new m(this.data,b[x=void 0===x?0:0|x],b[v=void 0===v?1:0|v],h[x],h[v],this.offset)},g.pick=function(x,v){var b=[],h=[],S=this.offset;return"number"==typeof x&&x>=0?S=S+this.stride[0]*x|0:(b.push(this.shape[0]),h.push(this.stride[0])),"number"==typeof v&&v>=0?S=S+this.stride[1]*v|0:(b.push(this.shape[1]),h.push(this.stride[1])),(0,y[b.length+1])(this.data,b,h,S)},function(x,v,b,h){return new m(x,v[0],v[1],b[0],b[1],h)}},3:function(c,y,d){function m(x,v,b,h,S,w,E,P){this.data=x,this.shape=[v,b,h],this.stride=[S,w,E],this.offset=0|P}var g=m.prototype;return g.dtype=c,g.dimension=3,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(g,"order",{get:function(){var x=Math.abs(this.stride[0]),v=Math.abs(this.stride[1]),b=Math.abs(this.stride[2]);return x>v?v>b?[2,1,0]:x>b?[1,2,0]:[1,0,2]:x>b?[2,0,1]:b>v?[0,1,2]:[0,2,1]}}),g.set=function(x,v,b,h){return"generic"===c?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*v+this.stride[2]*b,h):this.data[this.offset+this.stride[0]*x+this.stride[1]*v+this.stride[2]*b]=h},g.get=function(x,v,b){return"generic"===c?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*v+this.stride[2]*b):this.data[this.offset+this.stride[0]*x+this.stride[1]*v+this.stride[2]*b]},g.index=function(x,v,b){return this.offset+this.stride[0]*x+this.stride[1]*v+this.stride[2]*b},g.hi=function(x,v,b){return new m(this.data,"number"!=typeof x||x<0?this.shape[0]:0|x,"number"!=typeof v||v<0?this.shape[1]:0|v,"number"!=typeof b||b<0?this.shape[2]:0|b,this.stride[0],this.stride[1],this.stride[2],this.offset)},g.lo=function(x,v,b){var h=this.offset,S=0,w=this.shape[0],E=this.shape[1],P=this.shape[2],I=this.stride[0],O=this.stride[1],z=this.stride[2];return"number"==typeof x&&x>=0&&(h+=I*(S=0|x),w-=S),"number"==typeof v&&v>=0&&(h+=O*(S=0|v),E-=S),"number"==typeof b&&b>=0&&(h+=z*(S=0|b),P-=S),new m(this.data,w,E,P,I,O,z,h)},g.step=function(x,v,b){var h=this.shape[0],S=this.shape[1],w=this.shape[2],E=this.stride[0],P=this.stride[1],I=this.stride[2],O=this.offset,z=0,U=Math.ceil;return"number"==typeof x&&((z=0|x)<0?(O+=E*(h-1),h=U(-h/z)):h=U(h/z),E*=z),"number"==typeof v&&((z=0|v)<0?(O+=P*(S-1),S=U(-S/z)):S=U(S/z),P*=z),"number"==typeof b&&((z=0|b)<0?(O+=I*(w-1),w=U(-w/z)):w=U(w/z),I*=z),new m(this.data,h,S,w,E,P,I,O)},g.transpose=function(x,v,b){var h=this.shape,S=this.stride;return new m(this.data,h[x=void 0===x?0:0|x],h[v=void 0===v?1:0|v],h[b=void 0===b?2:0|b],S[x],S[v],S[b],this.offset)},g.pick=function(x,v,b){var h=[],S=[],w=this.offset;return"number"==typeof x&&x>=0?w=w+this.stride[0]*x|0:(h.push(this.shape[0]),S.push(this.stride[0])),"number"==typeof v&&v>=0?w=w+this.stride[1]*v|0:(h.push(this.shape[1]),S.push(this.stride[1])),"number"==typeof b&&b>=0?w=w+this.stride[2]*b|0:(h.push(this.shape[2]),S.push(this.stride[2])),(0,y[h.length+1])(this.data,h,S,w)},function(x,v,b,h){return new m(x,v[0],v[1],v[2],b[0],b[1],b[2],h)}},4:function(c,y,d){function m(x,v,b,h,S,w,E,P,I,O){this.data=x,this.shape=[v,b,h,S],this.stride=[w,E,P,I],this.offset=0|O}var g=m.prototype;return g.dtype=c,g.dimension=4,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(g,"order",{get:d}),g.set=function(x,v,b,h,S){return"generic"===c?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*v+this.stride[2]*b+this.stride[3]*h,S):this.data[this.offset+this.stride[0]*x+this.stride[1]*v+this.stride[2]*b+this.stride[3]*h]=S},g.get=function(x,v,b,h){return"generic"===c?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*v+this.stride[2]*b+this.stride[3]*h):this.data[this.offset+this.stride[0]*x+this.stride[1]*v+this.stride[2]*b+this.stride[3]*h]},g.index=function(x,v,b,h){return this.offset+this.stride[0]*x+this.stride[1]*v+this.stride[2]*b+this.stride[3]*h},g.hi=function(x,v,b,h){return new m(this.data,"number"!=typeof x||x<0?this.shape[0]:0|x,"number"!=typeof v||v<0?this.shape[1]:0|v,"number"!=typeof b||b<0?this.shape[2]:0|b,"number"!=typeof h||h<0?this.shape[3]:0|h,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},g.lo=function(x,v,b,h){var S=this.offset,w=0,E=this.shape[0],P=this.shape[1],I=this.shape[2],O=this.shape[3],z=this.stride[0],U=this.stride[1],R=this.stride[2],j=this.stride[3];return"number"==typeof x&&x>=0&&(S+=z*(w=0|x),E-=w),"number"==typeof v&&v>=0&&(S+=U*(w=0|v),P-=w),"number"==typeof b&&b>=0&&(S+=R*(w=0|b),I-=w),"number"==typeof h&&h>=0&&(S+=j*(w=0|h),O-=w),new m(this.data,E,P,I,O,z,U,R,j,S)},g.step=function(x,v,b,h){var S=this.shape[0],w=this.shape[1],E=this.shape[2],P=this.shape[3],I=this.stride[0],O=this.stride[1],z=this.stride[2],U=this.stride[3],R=this.offset,j=0,Y=Math.ceil;return"number"==typeof x&&((j=0|x)<0?(R+=I*(S-1),S=Y(-S/j)):S=Y(S/j),I*=j),"number"==typeof v&&((j=0|v)<0?(R+=O*(w-1),w=Y(-w/j)):w=Y(w/j),O*=j),"number"==typeof b&&((j=0|b)<0?(R+=z*(E-1),E=Y(-E/j)):E=Y(E/j),z*=j),"number"==typeof h&&((j=0|h)<0?(R+=U*(P-1),P=Y(-P/j)):P=Y(P/j),U*=j),new m(this.data,S,w,E,P,I,O,z,U,R)},g.transpose=function(x,v,b,h){var S=this.shape,w=this.stride;return new m(this.data,S[x=void 0===x?0:0|x],S[v=void 0===v?1:0|v],S[b=void 0===b?2:0|b],S[h=void 0===h?3:0|h],w[x],w[v],w[b],w[h],this.offset)},g.pick=function(x,v,b,h){var S=[],w=[],E=this.offset;return"number"==typeof x&&x>=0?E=E+this.stride[0]*x|0:(S.push(this.shape[0]),w.push(this.stride[0])),"number"==typeof v&&v>=0?E=E+this.stride[1]*v|0:(S.push(this.shape[1]),w.push(this.stride[1])),"number"==typeof b&&b>=0?E=E+this.stride[2]*b|0:(S.push(this.shape[2]),w.push(this.stride[2])),"number"==typeof h&&h>=0?E=E+this.stride[3]*h|0:(S.push(this.shape[3]),w.push(this.stride[3])),(0,y[S.length+1])(this.data,S,w,E)},function(x,v,b,h){return new m(x,v[0],v[1],v[2],v[3],b[0],b[1],b[2],b[3],h)}},5:function(c,y,d){function m(x,v,b,h,S,w,E,P,I,O,z,U){this.data=x,this.shape=[v,b,h,S,w],this.stride=[E,P,I,O,z],this.offset=0|U}var g=m.prototype;return g.dtype=c,g.dimension=5,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(g,"order",{get:d}),g.set=function(x,v,b,h,S,w){return"generic"===c?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*v+this.stride[2]*b+this.stride[3]*h+this.stride[4]*S,w):this.data[this.offset+this.stride[0]*x+this.stride[1]*v+this.stride[2]*b+this.stride[3]*h+this.stride[4]*S]=w},g.get=function(x,v,b,h,S){return"generic"===c?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*v+this.stride[2]*b+this.stride[3]*h+this.stride[4]*S):this.data[this.offset+this.stride[0]*x+this.stride[1]*v+this.stride[2]*b+this.stride[3]*h+this.stride[4]*S]},g.index=function(x,v,b,h,S){return this.offset+this.stride[0]*x+this.stride[1]*v+this.stride[2]*b+this.stride[3]*h+this.stride[4]*S},g.hi=function(x,v,b,h,S){return new m(this.data,"number"!=typeof x||x<0?this.shape[0]:0|x,"number"!=typeof v||v<0?this.shape[1]:0|v,"number"!=typeof b||b<0?this.shape[2]:0|b,"number"!=typeof h||h<0?this.shape[3]:0|h,"number"!=typeof S||S<0?this.shape[4]:0|S,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},g.lo=function(x,v,b,h,S){var w=this.offset,E=0,P=this.shape[0],I=this.shape[1],O=this.shape[2],z=this.shape[3],U=this.shape[4],R=this.stride[0],j=this.stride[1],Y=this.stride[2],B=this.stride[3],V=this.stride[4];return"number"==typeof x&&x>=0&&(w+=R*(E=0|x),P-=E),"number"==typeof v&&v>=0&&(w+=j*(E=0|v),I-=E),"number"==typeof b&&b>=0&&(w+=Y*(E=0|b),O-=E),"number"==typeof h&&h>=0&&(w+=B*(E=0|h),z-=E),"number"==typeof S&&S>=0&&(w+=V*(E=0|S),U-=E),new m(this.data,P,I,O,z,U,R,j,Y,B,V,w)},g.step=function(x,v,b,h,S){var w=this.shape[0],E=this.shape[1],P=this.shape[2],I=this.shape[3],O=this.shape[4],z=this.stride[0],U=this.stride[1],R=this.stride[2],j=this.stride[3],Y=this.stride[4],B=this.offset,V=0,q=Math.ceil;return"number"==typeof x&&((V=0|x)<0?(B+=z*(w-1),w=q(-w/V)):w=q(w/V),z*=V),"number"==typeof v&&((V=0|v)<0?(B+=U*(E-1),E=q(-E/V)):E=q(E/V),U*=V),"number"==typeof b&&((V=0|b)<0?(B+=R*(P-1),P=q(-P/V)):P=q(P/V),R*=V),"number"==typeof h&&((V=0|h)<0?(B+=j*(I-1),I=q(-I/V)):I=q(I/V),j*=V),"number"==typeof S&&((V=0|S)<0?(B+=Y*(O-1),O=q(-O/V)):O=q(O/V),Y*=V),new m(this.data,w,E,P,I,O,z,U,R,j,Y,B)},g.transpose=function(x,v,b,h,S){var w=this.shape,E=this.stride;return new m(this.data,w[x=void 0===x?0:0|x],w[v=void 0===v?1:0|v],w[b=void 0===b?2:0|b],w[h=void 0===h?3:0|h],w[S=void 0===S?4:0|S],E[x],E[v],E[b],E[h],E[S],this.offset)},g.pick=function(x,v,b,h,S){var w=[],E=[],P=this.offset;return"number"==typeof x&&x>=0?P=P+this.stride[0]*x|0:(w.push(this.shape[0]),E.push(this.stride[0])),"number"==typeof v&&v>=0?P=P+this.stride[1]*v|0:(w.push(this.shape[1]),E.push(this.stride[1])),"number"==typeof b&&b>=0?P=P+this.stride[2]*b|0:(w.push(this.shape[2]),E.push(this.stride[2])),"number"==typeof h&&h>=0?P=P+this.stride[3]*h|0:(w.push(this.shape[3]),E.push(this.stride[3])),"number"==typeof S&&S>=0?P=P+this.stride[4]*S|0:(w.push(this.shape[4]),E.push(this.stride[4])),(0,y[w.length+1])(this.data,w,E,P)},function(x,v,b,h){return new m(x,v[0],v[1],v[2],v[3],v[4],b[0],b[1],b[2],b[3],b[4],h)}}};function u(c,y){var d=-1===y?"T":String(y),m=s[d];return-1===y?m(c):0===y?m(c,f[c][0]):m(c,f[c],a)}var f={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};p.exports=function(c,y,d,m){if(void 0===c)return(0,f.array[0])([]);"number"==typeof c&&(c=[c]),void 0===y&&(y=[c.length]);var g=y.length;if(void 0===d){d=new Array(g);for(var x=g-1,v=1;x>=0;--x)d[x]=v,v*=y[x]}if(void 0===m)for(m=0,x=0;x<g;++x)d[x]<0&&(m-=(y[x]-1)*d[x]);for(var b=function(S){if(i(S))return"buffer";if(r)switch(Object.prototype.toString.call(S)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(S)?"array":"generic"}(c),h=f[b];h.length<=g+1;)h.push(u(b,h.length-1));return(0,h[g+1])(c,y,d,m)}},1278:function(p,l,t){"use strict";var i=t(2361),r=Math.pow(2,-1074),n=-1>>>0;p.exports=function(a,s){if(isNaN(a)||isNaN(s))return NaN;if(a===s)return a;if(0===a)return s<0?-r:r;var u=i.hi(a),f=i.lo(a);return s>a==a>0?f===n?(u+=1,f=0):f+=1:0===f?(f=n,u-=1):f-=1,i.pack(f,u)}},8406:function(p,l){l.vertexNormals=function(t,i,r){for(var n=i.length,a=new Array(n),s=void 0===r?1e-6:r,u=0;u<n;++u)a[u]=[0,0,0];for(u=0;u<t.length;++u)for(var f=t[u],y=f[f.length-1],d=f[0],m=0;m<f.length;++m){for(var g=i[y],x=i[y=d],v=i[d=f[(m+1)%f.length]],b=new Array(3),h=0,S=new Array(3),w=0,E=0;E<3;++E)b[E]=g[E]-x[E],h+=b[E]*b[E],S[E]=v[E]-x[E],w+=S[E]*S[E];if(h*w>s){var P=a[y],I=1/Math.sqrt(h*w);for(E=0;E<3;++E){var O=(E+1)%3,z=(E+2)%3;P[E]+=I*(S[O]*b[z]-S[z]*b[O])}}}for(u=0;u<n;++u){P=a[u];var U=0;for(E=0;E<3;++E)U+=P[E]*P[E];if(U>s)for(I=1/Math.sqrt(U),E=0;E<3;++E)P[E]*=I;else for(E=0;E<3;++E)P[E]=0}return a},l.faceNormals=function(t,i,r){for(var n=t.length,a=new Array(n),s=void 0===r?1e-6:r,u=0;u<n;++u){for(var f=t[u],c=new Array(3),y=0;y<3;++y)c[y]=i[f[y]];var d=new Array(3),m=new Array(3);for(y=0;y<3;++y)d[y]=c[1][y]-c[0][y],m[y]=c[2][y]-c[0][y];var g=new Array(3),x=0;for(y=0;y<3;++y){var v=(y+1)%3,b=(y+2)%3;g[y]=d[v]*m[b]-d[b]*m[v],x+=g[y]*g[y]}for(x=x>s?1/Math.sqrt(x):0,y=0;y<3;++y)g[y]*=x;a[u]=g}return a}},4081:function(p){"use strict";p.exports=function(l,t,i,r,n,a,s,u,f,c){var y=t+a+c;if(d>0){var d=Math.sqrt(y+1);l[0]=.5*(s-f)/d,l[1]=.5*(u-r)/d,l[2]=.5*(i-a)/d,l[3]=.5*d}else{var m=Math.max(t,a,c);d=Math.sqrt(2*m-y+1),t>=m?(l[0]=.5*d,l[1]=.5*(n+i)/d,l[2]=.5*(u+r)/d,l[3]=.5*(s-f)/d):a>=m?(l[0]=.5*(i+n)/d,l[1]=.5*d,l[2]=.5*(f+s)/d,l[3]=.5*(u-r)/d):(l[0]=.5*(r+u)/d,l[1]=.5*(s+f)/d,l[2]=.5*d,l[3]=.5*(i-n)/d)}return l}},9977:function(p,l,t){"use strict";p.exports=function(m){var g=(m=m||{}).center||[0,0,0],x=m.rotation||[0,0,0,1],v=m.radius||1;g=[].slice.call(g,0,3),c(x=[].slice.call(x,0,4),x);var b=new y(x,g,Math.log(v));return b.setDistanceLimits(m.zoomMin,m.zoomMax),("eye"in m||"up"in m)&&b.lookAt(0,m.eye,m.center,m.up),b};var i=t(9215),r=t(6582),n=t(7399),a=t(7608),s=t(4081);function u(m,g,x){return Math.sqrt(Math.pow(m,2)+Math.pow(g,2)+Math.pow(x,2))}function f(m,g,x,v){return Math.sqrt(Math.pow(m,2)+Math.pow(g,2)+Math.pow(x,2)+Math.pow(v,2))}function c(m,g){var x=g[0],v=g[1],b=g[2],h=g[3],S=f(x,v,b,h);S>1e-6?(m[0]=x/S,m[1]=v/S,m[2]=b/S,m[3]=h/S):(m[0]=m[1]=m[2]=0,m[3]=1)}function y(m,g,x){this.radius=i([x]),this.center=i(g),this.rotation=i(m),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var d=y.prototype;d.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},d.recalcMatrix=function(m){this.radius.curve(m),this.center.curve(m),this.rotation.curve(m);var g=this.computedRotation;c(g,g);var x=this.computedMatrix;n(x,g);var v=this.computedCenter,b=this.computedEye,h=this.computedUp,S=Math.exp(this.computedRadius[0]);b[0]=v[0]+S*x[2],b[1]=v[1]+S*x[6],b[2]=v[2]+S*x[10],h[0]=x[1],h[1]=x[5],h[2]=x[9];for(var w=0;w<3;++w){for(var E=0,P=0;P<3;++P)E+=x[w+4*P]*b[P];x[12+w]=-E}},d.getMatrix=function(m,g){this.recalcMatrix(m);var x=this.computedMatrix;if(g){for(var v=0;v<16;++v)g[v]=x[v];return g}return x},d.idle=function(m){this.center.idle(m),this.radius.idle(m),this.rotation.idle(m)},d.flush=function(m){this.center.flush(m),this.radius.flush(m),this.rotation.flush(m)},d.pan=function(m,g,x,v){g=g||0,x=x||0,v=v||0,this.recalcMatrix(m);var b=this.computedMatrix,h=b[1],S=b[5],w=b[9],E=u(h,S,w),P=b[0],I=b[4],O=b[8],z=P*(h/=E)+I*(S/=E)+O*(w/=E),U=u(P-=h*z,I-=S*z,O-=w*z),R=b[2],j=b[6],Y=b[10],B=R*h+j*S+Y*w,V=R*(P/=U)+j*(I/=U)+Y*(O/=U),q=u(R-=B*h+V*P,j-=B*S+V*I,Y-=B*w+V*O);R/=q,j/=q,Y/=q,this.center.move(m,P*g+h*x,I*g+S*x,O*g+w*x);var $=Math.exp(this.computedRadius[0]);$=Math.max(1e-4,$+v),this.radius.set(m,Math.log($))},d.rotate=function(m,g,x,v){this.recalcMatrix(m);var b=this.computedMatrix,O=b[2],z=b[6],U=b[10],R=(g=g||0)*b[0]+(x=x||0)*b[1],j=g*b[4]+x*b[5],Y=g*b[8]+x*b[9],B=-(z*Y-U*j),V=-(U*R-O*Y),q=-(O*j-z*R),ie=Math.sqrt(Math.max(0,1-Math.pow(B,2)-Math.pow(V,2)-Math.pow(q,2))),te=f(B,V,q,ie);te>1e-6?(B/=te,V/=te,q/=te,ie/=te):(B=V=q=0,ie=1);var ee=this.computedRotation,$=ee[0],J=ee[1],X=ee[2],ae=ee[3],ce=$*ie+ae*B+J*q-X*V,le=J*ie+ae*V+X*B-$*q,pe=X*ie+ae*q+$*V-J*B,we=ae*ie-$*B-J*V-X*q;if(v){B=O,V=z,q=U;var Te=Math.sin(v)/u(B,V,q);B*=Te,V*=Te,q*=Te,we=we*(ie=Math.cos(g))-(ce=ce*ie+we*B+le*q-pe*V)*B-(le=le*ie+we*V+pe*B-ce*q)*V-(pe=pe*ie+we*q+ce*V-le*B)*q}var ye=f(ce,le,pe,we);ye>1e-6?(ce/=ye,le/=ye,pe/=ye,we/=ye):(ce=le=pe=0,we=1),this.rotation.set(m,ce,le,pe,we)},d.lookAt=function(m,g,x,v){this.recalcMatrix(m);var b=this.computedMatrix;r(b,g=g||this.computedEye,x=x||this.computedCenter,v=v||this.computedUp);var h=this.computedRotation;s(h,b[0],b[1],b[2],b[4],b[5],b[6],b[8],b[9],b[10]),c(h,h),this.rotation.set(m,h[0],h[1],h[2],h[3]);for(var S=0,w=0;w<3;++w)S+=Math.pow(x[w]-g[w],2);this.radius.set(m,.5*Math.log(Math.max(S,1e-6))),this.center.set(m,x[0],x[1],x[2])},d.translate=function(m,g,x,v){this.center.move(m,g||0,x||0,v||0)},d.setMatrix=function(m,g){var x=this.computedRotation;s(x,g[0],g[1],g[2],g[4],g[5],g[6],g[8],g[9],g[10]),c(x,x),this.rotation.set(m,x[0],x[1],x[2],x[3]);var v=this.computedMatrix;a(v,g);var b=v[15];if(Math.abs(b)>1e-6){var h=v[12]/b,S=v[13]/b,w=v[14]/b;this.recalcMatrix(m);var E=Math.exp(this.computedRadius[0]);this.center.set(m,h-v[2]*E,S-v[6]*E,w-v[10]*E),this.radius.idle(m)}else this.center.idle(m),this.radius.idle(m)},d.setDistance=function(m,g){g>0&&this.radius.set(m,Math.log(g))},d.setDistanceLimits=function(m,g){m=m>0?Math.log(m):-1/0,g=g>0?Math.log(g):1/0,g=Math.max(g,m),this.radius.bounds[0][0]=m,this.radius.bounds[1][0]=g},d.getDistanceLimits=function(m){var g=this.radius.bounds;return m?(m[0]=Math.exp(g[0][0]),m[1]=Math.exp(g[1][0]),m):[Math.exp(g[0][0]),Math.exp(g[1][0])]},d.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},d.fromJSON=function(m){var g=this.lastT(),x=m.center;x&&this.center.set(g,x[0],x[1],x[2]);var v=m.rotation;v&&this.rotation.set(g,v[0],v[1],v[2],v[3]);var b=m.distance;b&&b>0&&this.radius.set(g,Math.log(b)),this.setDistanceLimits(m.zoomMin,m.zoomMax)}},1371:function(p,l,t){"use strict";var i=t(3233);p.exports=function(r,n,a){return i(a=void 0!==a?a+"":" ",n)+r}},3202:function(p){p.exports=function(l,t){t||(t=[0,""]),l=String(l);var i=parseFloat(l,10);return t[0]=i,t[1]=l.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},3088:function(p,l,t){"use strict";p.exports=function(r,n){for(var a=0|n.length,s=r.length,u=[new Array(a),new Array(a)],f=0;f<a;++f)u[0][f]=[],u[1][f]=[];for(f=0;f<s;++f){var c=r[f];u[0][c[0]].push(c),u[1][c[1]].push(c)}var w,y=[];for(f=0;f<a;++f)u[0][f].length+u[1][f].length===0&&y.push([f]);function d(S,w){var E=u[w][S[w]];E.splice(E.indexOf(S),1)}function m(S,w,E){for(var P,I,O,z=0;z<2;++z)if(u[z][w].length>0){P=u[z][w][0],O=z;break}I=P[1^O];for(var U=0;U<2;++U)for(var R=u[U][w],j=0;j<R.length;++j){var Y=R[j],B=Y[1^U];i(n[S],n[w],n[I],n[B])>0&&(P=Y,I=B,O=U)}return E||P&&d(P,O),I}function g(S,w){var E=u[w][S][0],P=[S];d(E,w);for(var I=E[1^w];;){for(;I!==S;)P.push(I),I=m(P[P.length-2],I,!1);if(u[0][S].length+u[1][S].length===0)break;var O=P[P.length-1],z=S,U=P[1],R=m(O,z,!0);if(i(n[O],n[z],n[U],n[R])<0)break;P.push(S),I=m(O,z)}return P}for(f=0;f<a;++f)for(var v=0;v<2;++v){for(var b=[];u[v][f].length>0;){var h=g(f,v);(w=h)[1]===w[w.length-1]?b.push.apply(b,h):(b.length>0&&y.push(b),b=h)}b.length>0&&y.push(b)}return y};var i=t(3140)},5609:function(p,l,t){"use strict";p.exports=function(r,n){for(var a=i(r,n.length),s=new Array(n.length),u=new Array(n.length),f=[],c=0;c<n.length;++c){var y=a[c].length;u[c]=y,s[c]=!0,y<=1&&f.push(c)}for(;f.length>0;){s[v=f.pop()]=!1;var d=a[v];for(c=0;c<d.length;++c){var m=d[c];0==--u[m]&&f.push(m)}}var g=new Array(n.length),x=[];for(c=0;c<n.length;++c)if(s[c]){var v=x.length;g[c]=v,x.push(n[c])}else g[c]=-1;var b=[];for(c=0;c<r.length;++c){var h=r[c];s[h[0]]&&s[h[1]]&&b.push([g[h[0]],g[h[1]]])}return[b,x]};var i=t(3134)},2095:function(p,l,t){"use strict";p.exports=function(y,d){for(var m=f(y,d),g=(d=m[1]).length,x=i(y=m[0],d.length),v=0;v<g;++v)if(x[v].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var b=r(y,d),h=(b=b.filter(function(Ce){for(var Oe=Ce.length,be=[0],ue=0;ue<Oe;++ue){var se=d[Ce[ue]],ge=d[Ce[(ue+1)%Oe]],Ie=a(-se[0],se[1]),ke=a(-se[0],ge[1]),Se=a(ge[0],se[1]),Pe=a(ge[0],ge[1]);be=s(be,s(s(Ie,ke),s(Se,Pe)))}return be[be.length-1]>0})).length,S=new Array(h),w=new Array(h);for(v=0;v<h;++v){S[v]=v;var E=new Array(h),P=b[v].map(function(Ce){return d[Ce]}),I=n([P]),O=0;e:for(var z=0;z<h;++z)if(E[z]=0,v!==z){for(var U=(ve=b[z]).length,R=0;R<U;++R){var j=I(d[ve[R]]);if(0!==j){j<0&&(E[z]=1,O+=1);continue e}}E[z]=1,O+=1}w[v]=[O,v,E]}for(w.sort(function(Ce,Oe){return Oe[0]-Ce[0]}),v=0;v<h;++v){var Y=(E=w[v])[1],B=E[2];for(z=0;z<h;++z)B[z]&&(S[z]=Y)}var V=function(Ce){for(var Oe=new Array(Ce),be=0;be<Ce;++be)Oe[be]=[];return Oe}(h);for(v=0;v<h;++v)V[v].push(S[v]),V[S[v]].push(v);var q={},ie=c(g,!1);for(v=0;v<h;++v)for(U=(ve=b[v]).length,z=0;z<U;++z){var te=ve[z],ee=ve[(z+1)%U],$=Math.min(te,ee)+":"+Math.max(te,ee);if($ in q){var J=q[$];V[J].push(v),V[v].push(J),ie[te]=ie[ee]=!0}else q[$]=v}function X(Ce){for(var Oe=Ce.length,be=0;be<Oe;++be)if(!ie[Ce[be]])return!1;return!0}var ae=[],ce=c(h,-1);for(v=0;v<h;++v)S[v]!==v||X(b[v])?ce[v]=-1:(ae.push(v),ce[v]=0);for(m=[];ae.length>0;){var le=ae.pop(),pe=V[le];u(pe,function(Ce,Oe){return Ce-Oe});var we,Te=pe.length,ye=ce[le];for(0===ye&&(we=[ve=b[le]]),v=0;v<Te;++v){var ve,xe=pe[v];ce[xe]>=0||(ce[xe]=1^ye,ae.push(xe),0===ye&&(X(ve=b[xe])||(ve.reverse(),we.push(ve))))}0===ye&&m.push(we)}return m};var i=t(3134),r=t(3088),n=t(5085),a=t(5250),s=t(8210),u=t(1682),f=t(5609);function c(y,d){for(var m=new Array(y),g=0;g<y;++g)m[g]=d;return m}},5085:function(p,l,t){p.exports=function(c){for(var y=c.length,d=[],m=[],g=0;g<y;++g)for(var x=c[g],v=x.length,b=v-1,h=0;h<v;b=h++){var S=x[b],w=x[h];S[0]===w[0]?m.push([S,w]):d.push([S,w])}if(0===d.length)return 0===m.length?f:(E=u(m),function(O){return E(O[0],O[1])?0:1});var E,O,z,P=r(d),I=(O=P.slabs,z=P.coordinates,function(U){var R=a.le(z,U[0]);if(R<0)return 1;var j=O[R];if(!j){if(!(R>0&&z[R]===U[0]))return 1;j=O[R-1]}for(var Y=1;j;){var B=j.key,V=i(U,B[0],B[1]);if(B[0][0]<B[1][0])if(V<0)j=j.left;else{if(!(V>0))return 0;Y=-1,j=j.right}else if(V>0)j=j.left;else{if(!(V<0))return 0;Y=1,j=j.right}}return Y});return 0===m.length?I:function(O,z){return function(U){return O(U[0],U[1])?0:z(U)}}(u(m),I)};var i=t(3250)[3],r=t(4209),n=t(3352),a=t(2478);function s(){return!0}function u(c){for(var y={},d=0;d<c.length;++d){var m=c[d],g=m[0][0],x=m[0][1],v=m[1][1],b=[Math.min(x,v),Math.max(x,v)];g in y?y[g].push(b):y[g]=[b]}var E,h={},S=Object.keys(y);for(d=0;d<S.length;++d)h[S[d]]=n(y[S[d]]);return E=h,function(P,I){var O=E[P];return!!O&&!!O.queryPoint(I,s)}}function f(c){return 1}},9346:function(p){"use strict";var l=new Float64Array(4),t=new Float64Array(4),i=new Float64Array(4);p.exports=function(r,n,a,s,u){l.length<s.length&&(l=new Float64Array(s.length),t=new Float64Array(s.length),i=new Float64Array(s.length));for(var f=0;f<s.length;++f)l[f]=r[f]-s[f],t[f]=n[f]-r[f],i[f]=a[f]-r[f];var c=0,y=0,d=0,m=0,g=0,x=0;for(f=0;f<s.length;++f){var v=t[f],b=i[f],h=l[f];c+=v*v,y+=v*b,d+=b*b,m+=h*v,g+=h*b,x+=h*h}var S,w,E,P,I,O=Math.abs(c*d-y*y),z=y*g-d*m,U=y*m-c*g;if(z+U<=O)if(z<0)U<0&&m<0?(U=0,-m>=c?(z=1,S=c+2*m+x):S=m*(z=-m/c)+x):(z=0,g>=0?(U=0,S=x):-g>=d?(U=1,S=d+2*g+x):S=g*(U=-g/d)+x);else if(U<0)U=0,m>=0?(z=0,S=x):-m>=c?(z=1,S=c+2*m+x):S=m*(z=-m/c)+x;else{var R=1/O;S=(z*=R)*(c*z+y*(U*=R)+2*m)+U*(y*z+d*U+2*g)+x}else z<0?(E=d+g)>(w=y+m)?(P=E-w)>=(I=c-2*y+d)?(z=1,U=0,S=c+2*m+x):S=(z=P/I)*(c*z+y*(U=1-z)+2*m)+U*(y*z+d*U+2*g)+x:(z=0,E<=0?(U=1,S=d+2*g+x):g>=0?(U=0,S=x):S=g*(U=-g/d)+x):U<0?(E=c+m)>(w=y+g)?(P=E-w)>=(I=c-2*y+d)?(U=1,z=0,S=d+2*g+x):S=(z=1-(U=P/I))*(c*z+y*U+2*m)+U*(y*z+d*U+2*g)+x:(U=0,E<=0?(z=1,S=c+2*m+x):m>=0?(z=0,S=x):S=m*(z=-m/c)+x):(P=d+g-y-m)<=0?(z=0,U=1,S=d+2*g+x):P>=(I=c-2*y+d)?(z=1,U=0,S=c+2*m+x):S=(z=P/I)*(c*z+y*(U=1-z)+2*m)+U*(y*z+d*U+2*g)+x;var j=1-z-U;for(f=0;f<s.length;++f)u[f]=j*r[f]+z*n[f]+U*a[f];return S<0?0:S}},8648:function(p,l,t){p.exports=t(783)},2653:function(p,l,t){"use strict";var i=t(3865);p.exports=function(r,n){for(var a=r.length,s=new Array(a),u=0;u<a;++u)s[u]=i(r[u],n[u]);return s}},5838:function(p,l,t){"use strict";p.exports=function(r){for(var n=new Array(r.length),a=0;a<r.length;++a)n[a]=i(r[a]);return n};var i=t(7842)},8987:function(p,l,t){"use strict";var i=t(7842),r=t(6504);p.exports=function(n,a){for(var s=i(a),u=n.length,f=new Array(u),c=0;c<u;++c)f[c]=r(n[c],s);return f}},544:function(p,l,t){"use strict";var i=t(5572);p.exports=function(r,n){for(var a=r.length,s=new Array(a),u=0;u<a;++u)s[u]=i(r[u],n[u]);return s}},5771:function(p,l,t){"use strict";var i=t(8507),r=t(3788),n=t(2419);p.exports=function(a){a.sort(r);for(var s=a.length,u=0,f=0;f<s;++f){var c=a[f],y=n(c);if(0!==y){if(u>0){var d=a[u-1];if(0===i(c,d)&&n(d)!==y){u-=1;continue}}a[u++]=c}}return a.length=u,a}},3233:function(p){"use strict";var l,t="";p.exports=function(i,r){if("string"!=typeof i)throw new TypeError("expected a string");if(1===r)return i;if(2===r)return i+i;var n=i.length*r;if(l!==i||void 0===l)l=i,t="";else if(t.length>=n)return t.substr(0,n);for(;n>t.length&&r>1;)1&r&&(t+=i),r>>=1,i+=i;return t=(t+=i).substr(0,n)}},3025:function(p,l,t){p.exports=t.g.performance&&t.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},7004:function(p){"use strict";p.exports=function(l){for(var t=l.length,i=l[l.length-1],r=t,n=t-2;n>=0;--n){var a=i;(f=(u=l[n])-((i=a+u)-a))&&(l[--r]=i,i=f)}var s=0;for(n=r;n<t;++n){var u,f;(f=(u=i)-((i=(a=l[n])+u)-a))&&(l[s++]=f)}return l[s++]=i,l.length=s,l}},2962:function(p,l,t){"use strict";var i=t(5250),r=t(8210),n=t(3012),a=t(7004);function s(g,x,v,b){return function(h){return b(g(v(h[0][0],h[1][1]),v(-h[0][1],h[1][0])))}}function u(g,x,v,b){return function(h){return b(g(x(g(v(h[1][1],h[2][2]),v(-h[1][2],h[2][1])),h[0][0]),g(x(g(v(h[1][0],h[2][2]),v(-h[1][2],h[2][0])),-h[0][1]),x(g(v(h[1][0],h[2][1]),v(-h[1][1],h[2][0])),h[0][2]))))}}function f(g,x,v,b){return function(h){return b(g(g(x(g(x(g(v(h[2][2],h[3][3]),v(-h[2][3],h[3][2])),h[1][1]),g(x(g(v(h[2][1],h[3][3]),v(-h[2][3],h[3][1])),-h[1][2]),x(g(v(h[2][1],h[3][2]),v(-h[2][2],h[3][1])),h[1][3]))),h[0][0]),x(g(x(g(v(h[2][2],h[3][3]),v(-h[2][3],h[3][2])),h[1][0]),g(x(g(v(h[2][0],h[3][3]),v(-h[2][3],h[3][0])),-h[1][2]),x(g(v(h[2][0],h[3][2]),v(-h[2][2],h[3][0])),h[1][3]))),-h[0][1])),g(x(g(x(g(v(h[2][1],h[3][3]),v(-h[2][3],h[3][1])),h[1][0]),g(x(g(v(h[2][0],h[3][3]),v(-h[2][3],h[3][0])),-h[1][1]),x(g(v(h[2][0],h[3][1]),v(-h[2][1],h[3][0])),h[1][3]))),h[0][2]),x(g(x(g(v(h[2][1],h[3][2]),v(-h[2][2],h[3][1])),h[1][0]),g(x(g(v(h[2][0],h[3][2]),v(-h[2][2],h[3][0])),-h[1][1]),x(g(v(h[2][0],h[3][1]),v(-h[2][1],h[3][0])),h[1][2]))),-h[0][3]))))}}function c(g,x,v,b){return function(h){return b(g(g(x(g(g(x(g(x(g(v(h[3][3],h[4][4]),v(-h[3][4],h[4][3])),h[2][2]),g(x(g(v(h[3][2],h[4][4]),v(-h[3][4],h[4][2])),-h[2][3]),x(g(v(h[3][2],h[4][3]),v(-h[3][3],h[4][2])),h[2][4]))),h[1][1]),x(g(x(g(v(h[3][3],h[4][4]),v(-h[3][4],h[4][3])),h[2][1]),g(x(g(v(h[3][1],h[4][4]),v(-h[3][4],h[4][1])),-h[2][3]),x(g(v(h[3][1],h[4][3]),v(-h[3][3],h[4][1])),h[2][4]))),-h[1][2])),g(x(g(x(g(v(h[3][2],h[4][4]),v(-h[3][4],h[4][2])),h[2][1]),g(x(g(v(h[3][1],h[4][4]),v(-h[3][4],h[4][1])),-h[2][2]),x(g(v(h[3][1],h[4][2]),v(-h[3][2],h[4][1])),h[2][4]))),h[1][3]),x(g(x(g(v(h[3][2],h[4][3]),v(-h[3][3],h[4][2])),h[2][1]),g(x(g(v(h[3][1],h[4][3]),v(-h[3][3],h[4][1])),-h[2][2]),x(g(v(h[3][1],h[4][2]),v(-h[3][2],h[4][1])),h[2][3]))),-h[1][4]))),h[0][0]),x(g(g(x(g(x(g(v(h[3][3],h[4][4]),v(-h[3][4],h[4][3])),h[2][2]),g(x(g(v(h[3][2],h[4][4]),v(-h[3][4],h[4][2])),-h[2][3]),x(g(v(h[3][2],h[4][3]),v(-h[3][3],h[4][2])),h[2][4]))),h[1][0]),x(g(x(g(v(h[3][3],h[4][4]),v(-h[3][4],h[4][3])),h[2][0]),g(x(g(v(h[3][0],h[4][4]),v(-h[3][4],h[4][0])),-h[2][3]),x(g(v(h[3][0],h[4][3]),v(-h[3][3],h[4][0])),h[2][4]))),-h[1][2])),g(x(g(x(g(v(h[3][2],h[4][4]),v(-h[3][4],h[4][2])),h[2][0]),g(x(g(v(h[3][0],h[4][4]),v(-h[3][4],h[4][0])),-h[2][2]),x(g(v(h[3][0],h[4][2]),v(-h[3][2],h[4][0])),h[2][4]))),h[1][3]),x(g(x(g(v(h[3][2],h[4][3]),v(-h[3][3],h[4][2])),h[2][0]),g(x(g(v(h[3][0],h[4][3]),v(-h[3][3],h[4][0])),-h[2][2]),x(g(v(h[3][0],h[4][2]),v(-h[3][2],h[4][0])),h[2][3]))),-h[1][4]))),-h[0][1])),g(x(g(g(x(g(x(g(v(h[3][3],h[4][4]),v(-h[3][4],h[4][3])),h[2][1]),g(x(g(v(h[3][1],h[4][4]),v(-h[3][4],h[4][1])),-h[2][3]),x(g(v(h[3][1],h[4][3]),v(-h[3][3],h[4][1])),h[2][4]))),h[1][0]),x(g(x(g(v(h[3][3],h[4][4]),v(-h[3][4],h[4][3])),h[2][0]),g(x(g(v(h[3][0],h[4][4]),v(-h[3][4],h[4][0])),-h[2][3]),x(g(v(h[3][0],h[4][3]),v(-h[3][3],h[4][0])),h[2][4]))),-h[1][1])),g(x(g(x(g(v(h[3][1],h[4][4]),v(-h[3][4],h[4][1])),h[2][0]),g(x(g(v(h[3][0],h[4][4]),v(-h[3][4],h[4][0])),-h[2][1]),x(g(v(h[3][0],h[4][1]),v(-h[3][1],h[4][0])),h[2][4]))),h[1][3]),x(g(x(g(v(h[3][1],h[4][3]),v(-h[3][3],h[4][1])),h[2][0]),g(x(g(v(h[3][0],h[4][3]),v(-h[3][3],h[4][0])),-h[2][1]),x(g(v(h[3][0],h[4][1]),v(-h[3][1],h[4][0])),h[2][3]))),-h[1][4]))),h[0][2]),g(x(g(g(x(g(x(g(v(h[3][2],h[4][4]),v(-h[3][4],h[4][2])),h[2][1]),g(x(g(v(h[3][1],h[4][4]),v(-h[3][4],h[4][1])),-h[2][2]),x(g(v(h[3][1],h[4][2]),v(-h[3][2],h[4][1])),h[2][4]))),h[1][0]),x(g(x(g(v(h[3][2],h[4][4]),v(-h[3][4],h[4][2])),h[2][0]),g(x(g(v(h[3][0],h[4][4]),v(-h[3][4],h[4][0])),-h[2][2]),x(g(v(h[3][0],h[4][2]),v(-h[3][2],h[4][0])),h[2][4]))),-h[1][1])),g(x(g(x(g(v(h[3][1],h[4][4]),v(-h[3][4],h[4][1])),h[2][0]),g(x(g(v(h[3][0],h[4][4]),v(-h[3][4],h[4][0])),-h[2][1]),x(g(v(h[3][0],h[4][1]),v(-h[3][1],h[4][0])),h[2][4]))),h[1][2]),x(g(x(g(v(h[3][1],h[4][2]),v(-h[3][2],h[4][1])),h[2][0]),g(x(g(v(h[3][0],h[4][2]),v(-h[3][2],h[4][0])),-h[2][1]),x(g(v(h[3][0],h[4][1]),v(-h[3][1],h[4][0])),h[2][2]))),-h[1][4]))),-h[0][3]),x(g(g(x(g(x(g(v(h[3][2],h[4][3]),v(-h[3][3],h[4][2])),h[2][1]),g(x(g(v(h[3][1],h[4][3]),v(-h[3][3],h[4][1])),-h[2][2]),x(g(v(h[3][1],h[4][2]),v(-h[3][2],h[4][1])),h[2][3]))),h[1][0]),x(g(x(g(v(h[3][2],h[4][3]),v(-h[3][3],h[4][2])),h[2][0]),g(x(g(v(h[3][0],h[4][3]),v(-h[3][3],h[4][0])),-h[2][2]),x(g(v(h[3][0],h[4][2]),v(-h[3][2],h[4][0])),h[2][3]))),-h[1][1])),g(x(g(x(g(v(h[3][1],h[4][3]),v(-h[3][3],h[4][1])),h[2][0]),g(x(g(v(h[3][0],h[4][3]),v(-h[3][3],h[4][0])),-h[2][1]),x(g(v(h[3][0],h[4][1]),v(-h[3][1],h[4][0])),h[2][3]))),h[1][2]),x(g(x(g(v(h[3][1],h[4][2]),v(-h[3][2],h[4][1])),h[2][0]),g(x(g(v(h[3][0],h[4][2]),v(-h[3][2],h[4][0])),-h[2][1]),x(g(v(h[3][0],h[4][1]),v(-h[3][1],h[4][0])),h[2][2]))),-h[1][3]))),h[0][4])))))}}function y(g){return(2===g?s:3===g?u:4===g?f:5===g?c:void 0)(r,n,i,a)}var d=[function(){return[0]},function(g){return[g[0][0]]}];function m(g,x,v,b,h,S,w,E){return function(P){switch(P.length){case 0:return g(P);case 1:return x(P);case 2:return v(P);case 3:return b(P);case 4:return h(P);case 5:return S(P)}var I=w[P.length];return I||(I=w[P.length]=E(P.length)),I(P)}}!function(){for(;d.length<6;)d.push(y(d.length));p.exports=m.apply(void 0,d.concat([d,y]));for(var g=0;g<d.length;++g)p.exports[g]=d[g]}()},1944:function(p,l,t){"use strict";var i=t(5250),r=t(8210);p.exports=function(n,a){for(var s=i(n[0],a[0]),u=1;u<n.length;++u)s=r(s,i(n[u],a[u]));return s}},2646:function(p,l,t){"use strict";var i=t(5250),r=t(8210),n=t(8545),a=t(3012);function s(x){return(3===x?u:4===x?f:5===x?c:y)(r,n,i,a)}function u(x,v,b,h){return function(S,w,E){var P=b(S[0],S[0]),I=h(P,w[0]),O=h(P,E[0]),z=b(w[0],w[0]),U=h(z,S[0]),R=h(z,E[0]),j=b(E[0],E[0]),Y=h(j,S[0]),B=h(j,w[0]),V=x(v(B,R),v(U,I)),q=v(Y,O),ie=v(V,q);return ie[ie.length-1]}}function f(x,v,b,h){return function(S,w,E,P){var I=x(b(S[0],S[0]),b(S[1],S[1])),O=h(I,w[0]),z=h(I,E[0]),U=h(I,P[0]),R=x(b(w[0],w[0]),b(w[1],w[1])),j=h(R,S[0]),Y=h(R,E[0]),B=h(R,P[0]),V=x(b(E[0],E[0]),b(E[1],E[1])),q=h(V,S[0]),ie=h(V,w[0]),te=h(V,P[0]),ee=x(b(P[0],P[0]),b(P[1],P[1])),$=h(ee,S[0]),J=h(ee,w[0]),X=h(ee,E[0]),ae=x(x(h(v(X,te),w[1]),x(h(v(J,B),-E[1]),h(v(ie,Y),P[1]))),x(h(v(J,B),S[1]),x(h(v($,U),-w[1]),h(v(j,O),P[1])))),ce=x(x(h(v(X,te),S[1]),x(h(v($,U),-E[1]),h(v(q,z),P[1]))),x(h(v(ie,Y),S[1]),x(h(v(q,z),-w[1]),h(v(j,O),E[1])))),le=v(ae,ce);return le[le.length-1]}}function c(x,v,b,h){return function(S,w,E,P,I){var O=x(b(S[0],S[0]),x(b(S[1],S[1]),b(S[2],S[2]))),z=h(O,w[0]),U=h(O,E[0]),R=h(O,P[0]),j=h(O,I[0]),Y=x(b(w[0],w[0]),x(b(w[1],w[1]),b(w[2],w[2]))),B=h(Y,S[0]),V=h(Y,E[0]),q=h(Y,P[0]),ie=h(Y,I[0]),te=x(b(E[0],E[0]),x(b(E[1],E[1]),b(E[2],E[2]))),ee=h(te,S[0]),$=h(te,w[0]),J=h(te,P[0]),X=h(te,I[0]),ae=x(b(P[0],P[0]),x(b(P[1],P[1]),b(P[2],P[2]))),ce=h(ae,S[0]),le=h(ae,w[0]),pe=h(ae,E[0]),we=h(ae,I[0]),Te=x(b(I[0],I[0]),x(b(I[1],I[1]),b(I[2],I[2]))),ye=h(Te,S[0]),ve=h(Te,w[0]),xe=h(Te,E[0]),Ce=h(Te,P[0]),Oe=x(x(x(h(x(h(v(Ce,we),E[1]),x(h(v(xe,X),-P[1]),h(v(pe,J),I[1]))),w[2]),x(h(x(h(v(Ce,we),w[1]),x(h(v(ve,ie),-P[1]),h(v(le,q),I[1]))),-E[2]),h(x(h(v(xe,X),w[1]),x(h(v(ve,ie),-E[1]),h(v($,V),I[1]))),P[2]))),x(h(x(h(v(pe,J),w[1]),x(h(v(le,q),-E[1]),h(v($,V),P[1]))),-I[2]),x(h(x(h(v(Ce,we),w[1]),x(h(v(ve,ie),-P[1]),h(v(le,q),I[1]))),S[2]),h(x(h(v(Ce,we),S[1]),x(h(v(ye,j),-P[1]),h(v(ce,R),I[1]))),-w[2])))),x(x(h(x(h(v(ve,ie),S[1]),x(h(v(ye,j),-w[1]),h(v(B,z),I[1]))),P[2]),x(h(x(h(v(le,q),S[1]),x(h(v(ce,R),-w[1]),h(v(B,z),P[1]))),-I[2]),h(x(h(v(pe,J),w[1]),x(h(v(le,q),-E[1]),h(v($,V),P[1]))),S[2]))),x(h(x(h(v(pe,J),S[1]),x(h(v(ce,R),-E[1]),h(v(ee,U),P[1]))),-w[2]),x(h(x(h(v(le,q),S[1]),x(h(v(ce,R),-w[1]),h(v(B,z),P[1]))),E[2]),h(x(h(v($,V),S[1]),x(h(v(ee,U),-w[1]),h(v(B,z),E[1]))),-P[2]))))),be=x(x(x(h(x(h(v(Ce,we),E[1]),x(h(v(xe,X),-P[1]),h(v(pe,J),I[1]))),S[2]),h(x(h(v(Ce,we),S[1]),x(h(v(ye,j),-P[1]),h(v(ce,R),I[1]))),-E[2])),x(h(x(h(v(xe,X),S[1]),x(h(v(ye,j),-E[1]),h(v(ee,U),I[1]))),P[2]),h(x(h(v(pe,J),S[1]),x(h(v(ce,R),-E[1]),h(v(ee,U),P[1]))),-I[2]))),x(x(h(x(h(v(xe,X),w[1]),x(h(v(ve,ie),-E[1]),h(v($,V),I[1]))),S[2]),h(x(h(v(xe,X),S[1]),x(h(v(ye,j),-E[1]),h(v(ee,U),I[1]))),-w[2])),x(h(x(h(v(ve,ie),S[1]),x(h(v(ye,j),-w[1]),h(v(B,z),I[1]))),E[2]),h(x(h(v($,V),S[1]),x(h(v(ee,U),-w[1]),h(v(B,z),E[1]))),-I[2])))),ue=v(Oe,be);return ue[ue.length-1]}}function y(x,v,b,h){return function(S,w,E,P,I,O){var z=x(x(b(S[0],S[0]),b(S[1],S[1])),x(b(S[2],S[2]),b(S[3],S[3]))),U=h(z,w[0]),R=h(z,E[0]),j=h(z,P[0]),Y=h(z,I[0]),B=h(z,O[0]),V=x(x(b(w[0],w[0]),b(w[1],w[1])),x(b(w[2],w[2]),b(w[3],w[3]))),q=h(V,S[0]),ie=h(V,E[0]),te=h(V,P[0]),ee=h(V,I[0]),$=h(V,O[0]),J=x(x(b(E[0],E[0]),b(E[1],E[1])),x(b(E[2],E[2]),b(E[3],E[3]))),X=h(J,S[0]),ae=h(J,w[0]),ce=h(J,P[0]),le=h(J,I[0]),pe=h(J,O[0]),we=x(x(b(P[0],P[0]),b(P[1],P[1])),x(b(P[2],P[2]),b(P[3],P[3]))),Te=h(we,S[0]),ye=h(we,w[0]),ve=h(we,E[0]),xe=h(we,I[0]),Ce=h(we,O[0]),Oe=x(x(b(I[0],I[0]),b(I[1],I[1])),x(b(I[2],I[2]),b(I[3],I[3]))),be=h(Oe,S[0]),ue=h(Oe,w[0]),se=h(Oe,E[0]),ge=h(Oe,P[0]),Ie=h(Oe,O[0]),ke=x(x(b(O[0],O[0]),b(O[1],O[1])),x(b(O[2],O[2]),b(O[3],O[3]))),Se=h(ke,S[0]),Pe=h(ke,w[0]),Fe=h(ke,E[0]),Be=h(ke,P[0]),me=h(ke,I[0]),Me=x(x(x(h(x(x(h(x(h(v(me,Ie),P[1]),x(h(v(Be,Ce),-I[1]),h(v(ge,xe),O[1]))),E[2]),h(x(h(v(me,Ie),E[1]),x(h(v(Fe,pe),-I[1]),h(v(se,le),O[1]))),-P[2])),x(h(x(h(v(Be,Ce),E[1]),x(h(v(Fe,pe),-P[1]),h(v(ve,ce),O[1]))),I[2]),h(x(h(v(ge,xe),E[1]),x(h(v(se,le),-P[1]),h(v(ve,ce),I[1]))),-O[2]))),w[3]),x(h(x(x(h(x(h(v(me,Ie),P[1]),x(h(v(Be,Ce),-I[1]),h(v(ge,xe),O[1]))),w[2]),h(x(h(v(me,Ie),w[1]),x(h(v(Pe,$),-I[1]),h(v(ue,ee),O[1]))),-P[2])),x(h(x(h(v(Be,Ce),w[1]),x(h(v(Pe,$),-P[1]),h(v(ye,te),O[1]))),I[2]),h(x(h(v(ge,xe),w[1]),x(h(v(ue,ee),-P[1]),h(v(ye,te),I[1]))),-O[2]))),-E[3]),h(x(x(h(x(h(v(me,Ie),E[1]),x(h(v(Fe,pe),-I[1]),h(v(se,le),O[1]))),w[2]),h(x(h(v(me,Ie),w[1]),x(h(v(Pe,$),-I[1]),h(v(ue,ee),O[1]))),-E[2])),x(h(x(h(v(Fe,pe),w[1]),x(h(v(Pe,$),-E[1]),h(v(ae,ie),O[1]))),I[2]),h(x(h(v(se,le),w[1]),x(h(v(ue,ee),-E[1]),h(v(ae,ie),I[1]))),-O[2]))),P[3]))),x(x(h(x(x(h(x(h(v(Be,Ce),E[1]),x(h(v(Fe,pe),-P[1]),h(v(ve,ce),O[1]))),w[2]),h(x(h(v(Be,Ce),w[1]),x(h(v(Pe,$),-P[1]),h(v(ye,te),O[1]))),-E[2])),x(h(x(h(v(Fe,pe),w[1]),x(h(v(Pe,$),-E[1]),h(v(ae,ie),O[1]))),P[2]),h(x(h(v(ve,ce),w[1]),x(h(v(ye,te),-E[1]),h(v(ae,ie),P[1]))),-O[2]))),-I[3]),h(x(x(h(x(h(v(ge,xe),E[1]),x(h(v(se,le),-P[1]),h(v(ve,ce),I[1]))),w[2]),h(x(h(v(ge,xe),w[1]),x(h(v(ue,ee),-P[1]),h(v(ye,te),I[1]))),-E[2])),x(h(x(h(v(se,le),w[1]),x(h(v(ue,ee),-E[1]),h(v(ae,ie),I[1]))),P[2]),h(x(h(v(ve,ce),w[1]),x(h(v(ye,te),-E[1]),h(v(ae,ie),P[1]))),-I[2]))),O[3])),x(h(x(x(h(x(h(v(me,Ie),P[1]),x(h(v(Be,Ce),-I[1]),h(v(ge,xe),O[1]))),w[2]),h(x(h(v(me,Ie),w[1]),x(h(v(Pe,$),-I[1]),h(v(ue,ee),O[1]))),-P[2])),x(h(x(h(v(Be,Ce),w[1]),x(h(v(Pe,$),-P[1]),h(v(ye,te),O[1]))),I[2]),h(x(h(v(ge,xe),w[1]),x(h(v(ue,ee),-P[1]),h(v(ye,te),I[1]))),-O[2]))),S[3]),h(x(x(h(x(h(v(me,Ie),P[1]),x(h(v(Be,Ce),-I[1]),h(v(ge,xe),O[1]))),S[2]),h(x(h(v(me,Ie),S[1]),x(h(v(Se,B),-I[1]),h(v(be,Y),O[1]))),-P[2])),x(h(x(h(v(Be,Ce),S[1]),x(h(v(Se,B),-P[1]),h(v(Te,j),O[1]))),I[2]),h(x(h(v(ge,xe),S[1]),x(h(v(be,Y),-P[1]),h(v(Te,j),I[1]))),-O[2]))),-w[3])))),x(x(x(h(x(x(h(x(h(v(me,Ie),w[1]),x(h(v(Pe,$),-I[1]),h(v(ue,ee),O[1]))),S[2]),h(x(h(v(me,Ie),S[1]),x(h(v(Se,B),-I[1]),h(v(be,Y),O[1]))),-w[2])),x(h(x(h(v(Pe,$),S[1]),x(h(v(Se,B),-w[1]),h(v(q,U),O[1]))),I[2]),h(x(h(v(ue,ee),S[1]),x(h(v(be,Y),-w[1]),h(v(q,U),I[1]))),-O[2]))),P[3]),h(x(x(h(x(h(v(Be,Ce),w[1]),x(h(v(Pe,$),-P[1]),h(v(ye,te),O[1]))),S[2]),h(x(h(v(Be,Ce),S[1]),x(h(v(Se,B),-P[1]),h(v(Te,j),O[1]))),-w[2])),x(h(x(h(v(Pe,$),S[1]),x(h(v(Se,B),-w[1]),h(v(q,U),O[1]))),P[2]),h(x(h(v(ye,te),S[1]),x(h(v(Te,j),-w[1]),h(v(q,U),P[1]))),-O[2]))),-I[3])),x(h(x(x(h(x(h(v(ge,xe),w[1]),x(h(v(ue,ee),-P[1]),h(v(ye,te),I[1]))),S[2]),h(x(h(v(ge,xe),S[1]),x(h(v(be,Y),-P[1]),h(v(Te,j),I[1]))),-w[2])),x(h(x(h(v(ue,ee),S[1]),x(h(v(be,Y),-w[1]),h(v(q,U),I[1]))),P[2]),h(x(h(v(ye,te),S[1]),x(h(v(Te,j),-w[1]),h(v(q,U),P[1]))),-I[2]))),O[3]),h(x(x(h(x(h(v(Be,Ce),E[1]),x(h(v(Fe,pe),-P[1]),h(v(ve,ce),O[1]))),w[2]),h(x(h(v(Be,Ce),w[1]),x(h(v(Pe,$),-P[1]),h(v(ye,te),O[1]))),-E[2])),x(h(x(h(v(Fe,pe),w[1]),x(h(v(Pe,$),-E[1]),h(v(ae,ie),O[1]))),P[2]),h(x(h(v(ve,ce),w[1]),x(h(v(ye,te),-E[1]),h(v(ae,ie),P[1]))),-O[2]))),S[3]))),x(x(h(x(x(h(x(h(v(Be,Ce),E[1]),x(h(v(Fe,pe),-P[1]),h(v(ve,ce),O[1]))),S[2]),h(x(h(v(Be,Ce),S[1]),x(h(v(Se,B),-P[1]),h(v(Te,j),O[1]))),-E[2])),x(h(x(h(v(Fe,pe),S[1]),x(h(v(Se,B),-E[1]),h(v(X,R),O[1]))),P[2]),h(x(h(v(ve,ce),S[1]),x(h(v(Te,j),-E[1]),h(v(X,R),P[1]))),-O[2]))),-w[3]),h(x(x(h(x(h(v(Be,Ce),w[1]),x(h(v(Pe,$),-P[1]),h(v(ye,te),O[1]))),S[2]),h(x(h(v(Be,Ce),S[1]),x(h(v(Se,B),-P[1]),h(v(Te,j),O[1]))),-w[2])),x(h(x(h(v(Pe,$),S[1]),x(h(v(Se,B),-w[1]),h(v(q,U),O[1]))),P[2]),h(x(h(v(ye,te),S[1]),x(h(v(Te,j),-w[1]),h(v(q,U),P[1]))),-O[2]))),E[3])),x(h(x(x(h(x(h(v(Fe,pe),w[1]),x(h(v(Pe,$),-E[1]),h(v(ae,ie),O[1]))),S[2]),h(x(h(v(Fe,pe),S[1]),x(h(v(Se,B),-E[1]),h(v(X,R),O[1]))),-w[2])),x(h(x(h(v(Pe,$),S[1]),x(h(v(Se,B),-w[1]),h(v(q,U),O[1]))),E[2]),h(x(h(v(ae,ie),S[1]),x(h(v(X,R),-w[1]),h(v(q,U),E[1]))),-O[2]))),-P[3]),h(x(x(h(x(h(v(ve,ce),w[1]),x(h(v(ye,te),-E[1]),h(v(ae,ie),P[1]))),S[2]),h(x(h(v(ve,ce),S[1]),x(h(v(Te,j),-E[1]),h(v(X,R),P[1]))),-w[2])),x(h(x(h(v(ye,te),S[1]),x(h(v(Te,j),-w[1]),h(v(q,U),P[1]))),E[2]),h(x(h(v(ae,ie),S[1]),x(h(v(X,R),-w[1]),h(v(q,U),E[1]))),-P[2]))),O[3]))))),Le=x(x(x(h(x(x(h(x(h(v(me,Ie),P[1]),x(h(v(Be,Ce),-I[1]),h(v(ge,xe),O[1]))),E[2]),h(x(h(v(me,Ie),E[1]),x(h(v(Fe,pe),-I[1]),h(v(se,le),O[1]))),-P[2])),x(h(x(h(v(Be,Ce),E[1]),x(h(v(Fe,pe),-P[1]),h(v(ve,ce),O[1]))),I[2]),h(x(h(v(ge,xe),E[1]),x(h(v(se,le),-P[1]),h(v(ve,ce),I[1]))),-O[2]))),S[3]),x(h(x(x(h(x(h(v(me,Ie),P[1]),x(h(v(Be,Ce),-I[1]),h(v(ge,xe),O[1]))),S[2]),h(x(h(v(me,Ie),S[1]),x(h(v(Se,B),-I[1]),h(v(be,Y),O[1]))),-P[2])),x(h(x(h(v(Be,Ce),S[1]),x(h(v(Se,B),-P[1]),h(v(Te,j),O[1]))),I[2]),h(x(h(v(ge,xe),S[1]),x(h(v(be,Y),-P[1]),h(v(Te,j),I[1]))),-O[2]))),-E[3]),h(x(x(h(x(h(v(me,Ie),E[1]),x(h(v(Fe,pe),-I[1]),h(v(se,le),O[1]))),S[2]),h(x(h(v(me,Ie),S[1]),x(h(v(Se,B),-I[1]),h(v(be,Y),O[1]))),-E[2])),x(h(x(h(v(Fe,pe),S[1]),x(h(v(Se,B),-E[1]),h(v(X,R),O[1]))),I[2]),h(x(h(v(se,le),S[1]),x(h(v(be,Y),-E[1]),h(v(X,R),I[1]))),-O[2]))),P[3]))),x(x(h(x(x(h(x(h(v(Be,Ce),E[1]),x(h(v(Fe,pe),-P[1]),h(v(ve,ce),O[1]))),S[2]),h(x(h(v(Be,Ce),S[1]),x(h(v(Se,B),-P[1]),h(v(Te,j),O[1]))),-E[2])),x(h(x(h(v(Fe,pe),S[1]),x(h(v(Se,B),-E[1]),h(v(X,R),O[1]))),P[2]),h(x(h(v(ve,ce),S[1]),x(h(v(Te,j),-E[1]),h(v(X,R),P[1]))),-O[2]))),-I[3]),h(x(x(h(x(h(v(ge,xe),E[1]),x(h(v(se,le),-P[1]),h(v(ve,ce),I[1]))),S[2]),h(x(h(v(ge,xe),S[1]),x(h(v(be,Y),-P[1]),h(v(Te,j),I[1]))),-E[2])),x(h(x(h(v(se,le),S[1]),x(h(v(be,Y),-E[1]),h(v(X,R),I[1]))),P[2]),h(x(h(v(ve,ce),S[1]),x(h(v(Te,j),-E[1]),h(v(X,R),P[1]))),-I[2]))),O[3])),x(h(x(x(h(x(h(v(me,Ie),E[1]),x(h(v(Fe,pe),-I[1]),h(v(se,le),O[1]))),w[2]),h(x(h(v(me,Ie),w[1]),x(h(v(Pe,$),-I[1]),h(v(ue,ee),O[1]))),-E[2])),x(h(x(h(v(Fe,pe),w[1]),x(h(v(Pe,$),-E[1]),h(v(ae,ie),O[1]))),I[2]),h(x(h(v(se,le),w[1]),x(h(v(ue,ee),-E[1]),h(v(ae,ie),I[1]))),-O[2]))),S[3]),h(x(x(h(x(h(v(me,Ie),E[1]),x(h(v(Fe,pe),-I[1]),h(v(se,le),O[1]))),S[2]),h(x(h(v(me,Ie),S[1]),x(h(v(Se,B),-I[1]),h(v(be,Y),O[1]))),-E[2])),x(h(x(h(v(Fe,pe),S[1]),x(h(v(Se,B),-E[1]),h(v(X,R),O[1]))),I[2]),h(x(h(v(se,le),S[1]),x(h(v(be,Y),-E[1]),h(v(X,R),I[1]))),-O[2]))),-w[3])))),x(x(x(h(x(x(h(x(h(v(me,Ie),w[1]),x(h(v(Pe,$),-I[1]),h(v(ue,ee),O[1]))),S[2]),h(x(h(v(me,Ie),S[1]),x(h(v(Se,B),-I[1]),h(v(be,Y),O[1]))),-w[2])),x(h(x(h(v(Pe,$),S[1]),x(h(v(Se,B),-w[1]),h(v(q,U),O[1]))),I[2]),h(x(h(v(ue,ee),S[1]),x(h(v(be,Y),-w[1]),h(v(q,U),I[1]))),-O[2]))),E[3]),h(x(x(h(x(h(v(Fe,pe),w[1]),x(h(v(Pe,$),-E[1]),h(v(ae,ie),O[1]))),S[2]),h(x(h(v(Fe,pe),S[1]),x(h(v(Se,B),-E[1]),h(v(X,R),O[1]))),-w[2])),x(h(x(h(v(Pe,$),S[1]),x(h(v(Se,B),-w[1]),h(v(q,U),O[1]))),E[2]),h(x(h(v(ae,ie),S[1]),x(h(v(X,R),-w[1]),h(v(q,U),E[1]))),-O[2]))),-I[3])),x(h(x(x(h(x(h(v(se,le),w[1]),x(h(v(ue,ee),-E[1]),h(v(ae,ie),I[1]))),S[2]),h(x(h(v(se,le),S[1]),x(h(v(be,Y),-E[1]),h(v(X,R),I[1]))),-w[2])),x(h(x(h(v(ue,ee),S[1]),x(h(v(be,Y),-w[1]),h(v(q,U),I[1]))),E[2]),h(x(h(v(ae,ie),S[1]),x(h(v(X,R),-w[1]),h(v(q,U),E[1]))),-I[2]))),O[3]),h(x(x(h(x(h(v(ge,xe),E[1]),x(h(v(se,le),-P[1]),h(v(ve,ce),I[1]))),w[2]),h(x(h(v(ge,xe),w[1]),x(h(v(ue,ee),-P[1]),h(v(ye,te),I[1]))),-E[2])),x(h(x(h(v(se,le),w[1]),x(h(v(ue,ee),-E[1]),h(v(ae,ie),I[1]))),P[2]),h(x(h(v(ve,ce),w[1]),x(h(v(ye,te),-E[1]),h(v(ae,ie),P[1]))),-I[2]))),S[3]))),x(x(h(x(x(h(x(h(v(ge,xe),E[1]),x(h(v(se,le),-P[1]),h(v(ve,ce),I[1]))),S[2]),h(x(h(v(ge,xe),S[1]),x(h(v(be,Y),-P[1]),h(v(Te,j),I[1]))),-E[2])),x(h(x(h(v(se,le),S[1]),x(h(v(be,Y),-E[1]),h(v(X,R),I[1]))),P[2]),h(x(h(v(ve,ce),S[1]),x(h(v(Te,j),-E[1]),h(v(X,R),P[1]))),-I[2]))),-w[3]),h(x(x(h(x(h(v(ge,xe),w[1]),x(h(v(ue,ee),-P[1]),h(v(ye,te),I[1]))),S[2]),h(x(h(v(ge,xe),S[1]),x(h(v(be,Y),-P[1]),h(v(Te,j),I[1]))),-w[2])),x(h(x(h(v(ue,ee),S[1]),x(h(v(be,Y),-w[1]),h(v(q,U),I[1]))),P[2]),h(x(h(v(ye,te),S[1]),x(h(v(Te,j),-w[1]),h(v(q,U),P[1]))),-I[2]))),E[3])),x(h(x(x(h(x(h(v(se,le),w[1]),x(h(v(ue,ee),-E[1]),h(v(ae,ie),I[1]))),S[2]),h(x(h(v(se,le),S[1]),x(h(v(be,Y),-E[1]),h(v(X,R),I[1]))),-w[2])),x(h(x(h(v(ue,ee),S[1]),x(h(v(be,Y),-w[1]),h(v(q,U),I[1]))),E[2]),h(x(h(v(ae,ie),S[1]),x(h(v(X,R),-w[1]),h(v(q,U),E[1]))),-I[2]))),-P[3]),h(x(x(h(x(h(v(ve,ce),w[1]),x(h(v(ye,te),-E[1]),h(v(ae,ie),P[1]))),S[2]),h(x(h(v(ve,ce),S[1]),x(h(v(Te,j),-E[1]),h(v(X,R),P[1]))),-w[2])),x(h(x(h(v(ye,te),S[1]),x(h(v(Te,j),-w[1]),h(v(q,U),P[1]))),E[2]),h(x(h(v(ae,ie),S[1]),x(h(v(X,R),-w[1]),h(v(q,U),E[1]))),-P[2]))),I[3]))))),Ne=v(Me,Le);return Ne[Ne.length-1]}}var d=[function(){return 0},function(){return 0},function(){return 0}];function m(x){var v=d[x.length];return v||(v=d[x.length]=s(x.length)),v.apply(void 0,x)}function g(x,v,b,h,S,w,E,P){return function(I,O,z,U,R,j){switch(arguments.length){case 0:case 1:return 0;case 2:return h(I,O);case 3:return S(I,O,z);case 4:return w(I,O,z,U);case 5:return E(I,O,z,U,R);case 6:return P(I,O,z,U,R,j)}for(var Y=new Array(arguments.length),B=0;B<arguments.length;++B)Y[B]=arguments[B];return x(Y)}}!function(){for(;d.length<=6;)d.push(s(d.length));p.exports=g.apply(void 0,[m].concat(d));for(var x=0;x<=6;++x)p.exports[x]=d[x]}()},727:function(p,l,t){"use strict";var i=t(2962);function r(d){return(2===d?n:3===d?a:4===d?s:5===d?u:f)(d<6?i[d]:i)}function n(d){return function(m,g){return[d([[+g[0],+m[0][1]],[+g[1],+m[1][1]]]),d([[+m[0][0],+g[0]],[+m[1][0],+g[1]]]),d(m)]}}function a(d){return function(m,g){return[d([[+g[0],+m[0][1],+m[0][2]],[+g[1],+m[1][1],+m[1][2]],[+g[2],+m[2][1],+m[2][2]]]),d([[+m[0][0],+g[0],+m[0][2]],[+m[1][0],+g[1],+m[1][2]],[+m[2][0],+g[2],+m[2][2]]]),d([[+m[0][0],+m[0][1],+g[0]],[+m[1][0],+m[1][1],+g[1]],[+m[2][0],+m[2][1],+g[2]]]),d(m)]}}function s(d){return function(m,g){return[d([[+g[0],+m[0][1],+m[0][2],+m[0][3]],[+g[1],+m[1][1],+m[1][2],+m[1][3]],[+g[2],+m[2][1],+m[2][2],+m[2][3]],[+g[3],+m[3][1],+m[3][2],+m[3][3]]]),d([[+m[0][0],+g[0],+m[0][2],+m[0][3]],[+m[1][0],+g[1],+m[1][2],+m[1][3]],[+m[2][0],+g[2],+m[2][2],+m[2][3]],[+m[3][0],+g[3],+m[3][2],+m[3][3]]]),d([[+m[0][0],+m[0][1],+g[0],+m[0][3]],[+m[1][0],+m[1][1],+g[1],+m[1][3]],[+m[2][0],+m[2][1],+g[2],+m[2][3]],[+m[3][0],+m[3][1],+g[3],+m[3][3]]]),d([[+m[0][0],+m[0][1],+m[0][2],+g[0]],[+m[1][0],+m[1][1],+m[1][2],+g[1]],[+m[2][0],+m[2][1],+m[2][2],+g[2]],[+m[3][0],+m[3][1],+m[3][2],+g[3]]]),d(m)]}}function u(d){return function(m,g){return[d([[+g[0],+m[0][1],+m[0][2],+m[0][3],+m[0][4]],[+g[1],+m[1][1],+m[1][2],+m[1][3],+m[1][4]],[+g[2],+m[2][1],+m[2][2],+m[2][3],+m[2][4]],[+g[3],+m[3][1],+m[3][2],+m[3][3],+m[3][4]],[+g[4],+m[4][1],+m[4][2],+m[4][3],+m[4][4]]]),d([[+m[0][0],+g[0],+m[0][2],+m[0][3],+m[0][4]],[+m[1][0],+g[1],+m[1][2],+m[1][3],+m[1][4]],[+m[2][0],+g[2],+m[2][2],+m[2][3],+m[2][4]],[+m[3][0],+g[3],+m[3][2],+m[3][3],+m[3][4]],[+m[4][0],+g[4],+m[4][2],+m[4][3],+m[4][4]]]),d([[+m[0][0],+m[0][1],+g[0],+m[0][3],+m[0][4]],[+m[1][0],+m[1][1],+g[1],+m[1][3],+m[1][4]],[+m[2][0],+m[2][1],+g[2],+m[2][3],+m[2][4]],[+m[3][0],+m[3][1],+g[3],+m[3][3],+m[3][4]],[+m[4][0],+m[4][1],+g[4],+m[4][3],+m[4][4]]]),d([[+m[0][0],+m[0][1],+m[0][2],+g[0],+m[0][4]],[+m[1][0],+m[1][1],+m[1][2],+g[1],+m[1][4]],[+m[2][0],+m[2][1],+m[2][2],+g[2],+m[2][4]],[+m[3][0],+m[3][1],+m[3][2],+g[3],+m[3][4]],[+m[4][0],+m[4][1],+m[4][2],+g[4],+m[4][4]]]),d([[+m[0][0],+m[0][1],+m[0][2],+m[0][3],+g[0]],[+m[1][0],+m[1][1],+m[1][2],+m[1][3],+g[1]],[+m[2][0],+m[2][1],+m[2][2],+m[2][3],+g[2]],[+m[3][0],+m[3][1],+m[3][2],+m[3][3],+g[3]],[+m[4][0],+m[4][1],+m[4][2],+m[4][3],+g[4]]]),d(m)]}}function f(d){return function(m,g){return[d([[+g[0],+m[0][1],+m[0][2],+m[0][3],+m[0][4],+m[0][5]],[+g[1],+m[1][1],+m[1][2],+m[1][3],+m[1][4],+m[1][5]],[+g[2],+m[2][1],+m[2][2],+m[2][3],+m[2][4],+m[2][5]],[+g[3],+m[3][1],+m[3][2],+m[3][3],+m[3][4],+m[3][5]],[+g[4],+m[4][1],+m[4][2],+m[4][3],+m[4][4],+m[4][5]],[+g[5],+m[5][1],+m[5][2],+m[5][3],+m[5][4],+m[5][5]]]),d([[+m[0][0],+g[0],+m[0][2],+m[0][3],+m[0][4],+m[0][5]],[+m[1][0],+g[1],+m[1][2],+m[1][3],+m[1][4],+m[1][5]],[+m[2][0],+g[2],+m[2][2],+m[2][3],+m[2][4],+m[2][5]],[+m[3][0],+g[3],+m[3][2],+m[3][3],+m[3][4],+m[3][5]],[+m[4][0],+g[4],+m[4][2],+m[4][3],+m[4][4],+m[4][5]],[+m[5][0],+g[5],+m[5][2],+m[5][3],+m[5][4],+m[5][5]]]),d([[+m[0][0],+m[0][1],+g[0],+m[0][3],+m[0][4],+m[0][5]],[+m[1][0],+m[1][1],+g[1],+m[1][3],+m[1][4],+m[1][5]],[+m[2][0],+m[2][1],+g[2],+m[2][3],+m[2][4],+m[2][5]],[+m[3][0],+m[3][1],+g[3],+m[3][3],+m[3][4],+m[3][5]],[+m[4][0],+m[4][1],+g[4],+m[4][3],+m[4][4],+m[4][5]],[+m[5][0],+m[5][1],+g[5],+m[5][3],+m[5][4],+m[5][5]]]),d([[+m[0][0],+m[0][1],+m[0][2],+g[0],+m[0][4],+m[0][5]],[+m[1][0],+m[1][1],+m[1][2],+g[1],+m[1][4],+m[1][5]],[+m[2][0],+m[2][1],+m[2][2],+g[2],+m[2][4],+m[2][5]],[+m[3][0],+m[3][1],+m[3][2],+g[3],+m[3][4],+m[3][5]],[+m[4][0],+m[4][1],+m[4][2],+g[4],+m[4][4],+m[4][5]],[+m[5][0],+m[5][1],+m[5][2],+g[5],+m[5][4],+m[5][5]]]),d([[+m[0][0],+m[0][1],+m[0][2],+m[0][3],+g[0],+m[0][5]],[+m[1][0],+m[1][1],+m[1][2],+m[1][3],+g[1],+m[1][5]],[+m[2][0],+m[2][1],+m[2][2],+m[2][3],+g[2],+m[2][5]],[+m[3][0],+m[3][1],+m[3][2],+m[3][3],+g[3],+m[3][5]],[+m[4][0],+m[4][1],+m[4][2],+m[4][3],+g[4],+m[4][5]],[+m[5][0],+m[5][1],+m[5][2],+m[5][3],+g[5],+m[5][5]]]),d([[+m[0][0],+m[0][1],+m[0][2],+m[0][3],+m[0][4],+g[0]],[+m[1][0],+m[1][1],+m[1][2],+m[1][3],+m[1][4],+g[1]],[+m[2][0],+m[2][1],+m[2][2],+m[2][3],+m[2][4],+g[2]],[+m[3][0],+m[3][1],+m[3][2],+m[3][3],+m[3][4],+g[3]],[+m[4][0],+m[4][1],+m[4][2],+m[4][3],+m[4][4],+g[4]],[+m[5][0],+m[5][1],+m[5][2],+m[5][3],+m[5][4],+g[5]]]),d(m)]}}var c=[function(){return[[0]]},function(d,m){return[[m[0]],[d[0][0]]]}];function y(d,m,g,x,v,b,h,S){return function(w,E){switch(w.length){case 0:return d(w,E);case 1:return m(w,E);case 2:return g(w,E);case 3:return x(w,E);case 4:return v(w,E);case 5:return b(w,E)}var P=h[w.length];return P||(P=h[w.length]=S(w.length)),P(w,E)}}!function(){for(;c.length<6;)c.push(r(c.length));p.exports=y.apply(void 0,c.concat([c,r]));for(var d=0;d<6;++d)p.exports[d]=c[d]}()},3250:function(p,l,t){"use strict";var i=t(5250),r=t(8210),n=t(3012),a=t(8545);function s(v,b,h,S){return function(w,E,P){var I=v(v(b(E[1],P[0]),b(-P[1],E[0])),v(b(w[1],E[0]),b(-E[1],w[0]))),O=v(b(w[1],P[0]),b(-P[1],w[0])),z=S(I,O);return z[z.length-1]}}function u(v,b,h,S){return function(w,E,P,I){var O=v(v(h(v(b(P[1],I[0]),b(-I[1],P[0])),E[2]),v(h(v(b(E[1],I[0]),b(-I[1],E[0])),-P[2]),h(v(b(E[1],P[0]),b(-P[1],E[0])),I[2]))),v(h(v(b(E[1],I[0]),b(-I[1],E[0])),w[2]),v(h(v(b(w[1],I[0]),b(-I[1],w[0])),-E[2]),h(v(b(w[1],E[0]),b(-E[1],w[0])),I[2])))),z=v(v(h(v(b(P[1],I[0]),b(-I[1],P[0])),w[2]),v(h(v(b(w[1],I[0]),b(-I[1],w[0])),-P[2]),h(v(b(w[1],P[0]),b(-P[1],w[0])),I[2]))),v(h(v(b(E[1],P[0]),b(-P[1],E[0])),w[2]),v(h(v(b(w[1],P[0]),b(-P[1],w[0])),-E[2]),h(v(b(w[1],E[0]),b(-E[1],w[0])),P[2])))),U=S(O,z);return U[U.length-1]}}function f(v,b,h,S){return function(w,E,P,I,O){var z=v(v(v(h(v(h(v(b(I[1],O[0]),b(-O[1],I[0])),P[2]),v(h(v(b(P[1],O[0]),b(-O[1],P[0])),-I[2]),h(v(b(P[1],I[0]),b(-I[1],P[0])),O[2]))),E[3]),v(h(v(h(v(b(I[1],O[0]),b(-O[1],I[0])),E[2]),v(h(v(b(E[1],O[0]),b(-O[1],E[0])),-I[2]),h(v(b(E[1],I[0]),b(-I[1],E[0])),O[2]))),-P[3]),h(v(h(v(b(P[1],O[0]),b(-O[1],P[0])),E[2]),v(h(v(b(E[1],O[0]),b(-O[1],E[0])),-P[2]),h(v(b(E[1],P[0]),b(-P[1],E[0])),O[2]))),I[3]))),v(h(v(h(v(b(P[1],I[0]),b(-I[1],P[0])),E[2]),v(h(v(b(E[1],I[0]),b(-I[1],E[0])),-P[2]),h(v(b(E[1],P[0]),b(-P[1],E[0])),I[2]))),-O[3]),v(h(v(h(v(b(I[1],O[0]),b(-O[1],I[0])),E[2]),v(h(v(b(E[1],O[0]),b(-O[1],E[0])),-I[2]),h(v(b(E[1],I[0]),b(-I[1],E[0])),O[2]))),w[3]),h(v(h(v(b(I[1],O[0]),b(-O[1],I[0])),w[2]),v(h(v(b(w[1],O[0]),b(-O[1],w[0])),-I[2]),h(v(b(w[1],I[0]),b(-I[1],w[0])),O[2]))),-E[3])))),v(v(h(v(h(v(b(E[1],O[0]),b(-O[1],E[0])),w[2]),v(h(v(b(w[1],O[0]),b(-O[1],w[0])),-E[2]),h(v(b(w[1],E[0]),b(-E[1],w[0])),O[2]))),I[3]),v(h(v(h(v(b(E[1],I[0]),b(-I[1],E[0])),w[2]),v(h(v(b(w[1],I[0]),b(-I[1],w[0])),-E[2]),h(v(b(w[1],E[0]),b(-E[1],w[0])),I[2]))),-O[3]),h(v(h(v(b(P[1],I[0]),b(-I[1],P[0])),E[2]),v(h(v(b(E[1],I[0]),b(-I[1],E[0])),-P[2]),h(v(b(E[1],P[0]),b(-P[1],E[0])),I[2]))),w[3]))),v(h(v(h(v(b(P[1],I[0]),b(-I[1],P[0])),w[2]),v(h(v(b(w[1],I[0]),b(-I[1],w[0])),-P[2]),h(v(b(w[1],P[0]),b(-P[1],w[0])),I[2]))),-E[3]),v(h(v(h(v(b(E[1],I[0]),b(-I[1],E[0])),w[2]),v(h(v(b(w[1],I[0]),b(-I[1],w[0])),-E[2]),h(v(b(w[1],E[0]),b(-E[1],w[0])),I[2]))),P[3]),h(v(h(v(b(E[1],P[0]),b(-P[1],E[0])),w[2]),v(h(v(b(w[1],P[0]),b(-P[1],w[0])),-E[2]),h(v(b(w[1],E[0]),b(-E[1],w[0])),P[2]))),-I[3]))))),U=v(v(v(h(v(h(v(b(I[1],O[0]),b(-O[1],I[0])),P[2]),v(h(v(b(P[1],O[0]),b(-O[1],P[0])),-I[2]),h(v(b(P[1],I[0]),b(-I[1],P[0])),O[2]))),w[3]),h(v(h(v(b(I[1],O[0]),b(-O[1],I[0])),w[2]),v(h(v(b(w[1],O[0]),b(-O[1],w[0])),-I[2]),h(v(b(w[1],I[0]),b(-I[1],w[0])),O[2]))),-P[3])),v(h(v(h(v(b(P[1],O[0]),b(-O[1],P[0])),w[2]),v(h(v(b(w[1],O[0]),b(-O[1],w[0])),-P[2]),h(v(b(w[1],P[0]),b(-P[1],w[0])),O[2]))),I[3]),h(v(h(v(b(P[1],I[0]),b(-I[1],P[0])),w[2]),v(h(v(b(w[1],I[0]),b(-I[1],w[0])),-P[2]),h(v(b(w[1],P[0]),b(-P[1],w[0])),I[2]))),-O[3]))),v(v(h(v(h(v(b(P[1],O[0]),b(-O[1],P[0])),E[2]),v(h(v(b(E[1],O[0]),b(-O[1],E[0])),-P[2]),h(v(b(E[1],P[0]),b(-P[1],E[0])),O[2]))),w[3]),h(v(h(v(b(P[1],O[0]),b(-O[1],P[0])),w[2]),v(h(v(b(w[1],O[0]),b(-O[1],w[0])),-P[2]),h(v(b(w[1],P[0]),b(-P[1],w[0])),O[2]))),-E[3])),v(h(v(h(v(b(E[1],O[0]),b(-O[1],E[0])),w[2]),v(h(v(b(w[1],O[0]),b(-O[1],w[0])),-E[2]),h(v(b(w[1],E[0]),b(-E[1],w[0])),O[2]))),P[3]),h(v(h(v(b(E[1],P[0]),b(-P[1],E[0])),w[2]),v(h(v(b(w[1],P[0]),b(-P[1],w[0])),-E[2]),h(v(b(w[1],E[0]),b(-E[1],w[0])),P[2]))),-O[3])))),R=S(z,U);return R[R.length-1]}}function c(v){return(3===v?s:4===v?u:f)(r,i,n,a)}var y=c(3),d=c(4),m=[function(){return 0},function(){return 0},function(v,b){return b[0]-v[0]},function(v,b,h){var S,w=(v[1]-h[1])*(b[0]-h[0]),E=(v[0]-h[0])*(b[1]-h[1]),P=w-E;if(w>0){if(E<=0)return P;S=w+E}else{if(!(w<0)||E>=0)return P;S=-(w+E)}var I=33306690738754716e-32*S;return P>=I||P<=-I?P:y(v,b,h)},function(v,b,h,S){var w=v[0]-S[0],E=b[0]-S[0],P=h[0]-S[0],I=v[1]-S[1],O=b[1]-S[1],z=h[1]-S[1],U=v[2]-S[2],R=b[2]-S[2],j=h[2]-S[2],Y=E*z,B=P*O,V=P*I,q=w*z,ie=w*O,te=E*I,ee=U*(Y-B)+R*(V-q)+j*(ie-te),$=7771561172376103e-31*((Math.abs(Y)+Math.abs(B))*Math.abs(U)+(Math.abs(V)+Math.abs(q))*Math.abs(R)+(Math.abs(ie)+Math.abs(te))*Math.abs(j));return ee>$||-ee>$?ee:d(v,b,h,S)}];function g(v){var b=m[v.length];return b||(b=m[v.length]=c(v.length)),b.apply(void 0,v)}function x(v,b,h,S,w,E,P){return function(I,O,z,U,R){switch(arguments.length){case 0:case 1:return 0;case 2:return S(I,O);case 3:return w(I,O,z);case 4:return E(I,O,z,U);case 5:return P(I,O,z,U,R)}for(var j=new Array(arguments.length),Y=0;Y<arguments.length;++Y)j[Y]=arguments[Y];return v(j)}}!function(){for(;m.length<=5;)m.push(c(m.length));p.exports=x.apply(void 0,[g].concat(m));for(var v=0;v<=5;++v)p.exports[v]=m[v]}()},5382:function(p,l,t){"use strict";var i=t(8210),r=t(3012);p.exports=function(n,a){if(1===n.length)return r(a,n[0]);if(1===a.length)return r(n,a[0]);if(0===n.length||0===a.length)return[0];var s=[0];if(n.length<a.length)for(var u=0;u<n.length;++u)s=i(s,r(a,n[u]));else for(u=0;u<a.length;++u)s=i(s,r(n,a[u]));return s}},3012:function(p,l,t){"use strict";var i=t(5250),r=t(9362);p.exports=function(n,a){var s=n.length;if(1===s){var u=i(n[0],a);return u[0]?u:[u[1]]}var f=new Array(2*s),c=[.1,.1],y=[.1,.1],d=0;i(n[0],a,c),c[0]&&(f[d++]=c[0]);for(var m=1;m<s;++m){i(n[m],a,y),r(c[1],y[0],c),c[0]&&(f[d++]=c[0]);var x=y[1],v=c[1],b=x+v,h=v-(b-x);c[1]=b,h&&(f[d++]=h)}return c[1]&&(f[d++]=c[1]),0===d&&(f[d++]=0),f.length=d,f}},1125:function(p,l,t){"use strict";p.exports=function(r,n,a,s){var u=i(r,a,s),f=i(n,a,s);if(u>0&&f>0||u<0&&f<0)return!1;var c=i(a,r,n),y=i(s,r,n);return!(c>0&&y>0||c<0&&y<0)&&(0!==u||0!==f||0!==c||0!==y||function(d,m,g,x){for(var v=0;v<2;++v){var b=d[v],h=m[v],S=Math.min(b,h),w=Math.max(b,h),E=g[v],P=x[v],I=Math.min(E,P);if(Math.max(E,P)<S||w<I)return!1}return!0}(r,n,a,s))};var i=t(3250)[3]},8545:function(p){"use strict";p.exports=function(l,t){var I,O,z,U,R,i=0|l.length,r=0|t.length;if(1===i&&1===r)return(R=(I=l[0])-((z=I+(O=-t[0]))-(U=z-I))+(O-U))?[R,z]:[z];var n,a,s=new Array(i+r),u=0,f=0,c=0,y=Math.abs,d=l[f],m=y(d),g=-t[c],x=y(g);m<x?(a=d,(f+=1)<i&&(m=y(d=l[f]))):(a=g,(c+=1)<r&&(x=y(g=-t[c]))),f<i&&m<x||c>=r?(n=d,(f+=1)<i&&(m=y(d=l[f]))):(n=g,(c+=1)<r&&(x=y(g=-t[c])));for(var v,b,h=n+a,S=h-n,w=a-S,E=w,P=h;f<i&&c<r;)m<x?(n=d,(f+=1)<i&&(m=y(d=l[f]))):(n=g,(c+=1)<r&&(x=y(g=-t[c]))),(w=(a=E)-(S=(h=n+a)-n))&&(s[u++]=w),E=P-((v=P+h)-(b=v-P))+(h-b),P=v;for(;f<i;)(w=(a=E)-(S=(h=(n=d)+a)-n))&&(s[u++]=w),E=P-((v=P+h)-(b=v-P))+(h-b),P=v,(f+=1)<i&&(d=l[f]);for(;c<r;)(w=(a=E)-(S=(h=(n=g)+a)-n))&&(s[u++]=w),E=P-((v=P+h)-(b=v-P))+(h-b),P=v,(c+=1)<r&&(g=-t[c]);return E&&(s[u++]=E),P&&(s[u++]=P),u||(s[u++]=0),s.length=u,s}},8210:function(p){"use strict";p.exports=function(l,t){var I,O,z,U,R,i=0|l.length,r=0|t.length;if(1===i&&1===r)return(R=(I=l[0])-((z=I+(O=t[0]))-(U=z-I))+(O-U))?[R,z]:[z];var n,a,s=new Array(i+r),u=0,f=0,c=0,y=Math.abs,d=l[f],m=y(d),g=t[c],x=y(g);m<x?(a=d,(f+=1)<i&&(m=y(d=l[f]))):(a=g,(c+=1)<r&&(x=y(g=t[c]))),f<i&&m<x||c>=r?(n=d,(f+=1)<i&&(m=y(d=l[f]))):(n=g,(c+=1)<r&&(x=y(g=t[c])));for(var v,b,h=n+a,S=h-n,w=a-S,E=w,P=h;f<i&&c<r;)m<x?(n=d,(f+=1)<i&&(m=y(d=l[f]))):(n=g,(c+=1)<r&&(x=y(g=t[c]))),(w=(a=E)-(S=(h=n+a)-n))&&(s[u++]=w),E=P-((v=P+h)-(b=v-P))+(h-b),P=v;for(;f<i;)(w=(a=E)-(S=(h=(n=d)+a)-n))&&(s[u++]=w),E=P-((v=P+h)-(b=v-P))+(h-b),P=v,(f+=1)<i&&(d=l[f]);for(;c<r;)(w=(a=E)-(S=(h=(n=g)+a)-n))&&(s[u++]=w),E=P-((v=P+h)-(b=v-P))+(h-b),P=v,(c+=1)<r&&(g=t[c]);return E&&(s[u++]=E),P&&(s[u++]=P),u||(s[u++]=0),s.length=u,s}},9127:function(p,l,t){"use strict";p.exports=function(n){return r(i(n))};var i=t(6204),r=t(5771)},7765:function(p,l,t){"use strict";p.exports=function(s,u,f,c){if(f=f||0,void 0===c&&(c=function(h){for(var S=h.length,w=0,E=0;E<S;++E)w=0|Math.max(w,h[E].length);return w-1}(s)),0===s.length||c<1)return{cells:[],vertexIds:[],vertexWeights:[]};var y=function(h,S){for(var w=h.length,E=r.mallocUint8(w),P=0;P<w;++P)E[P]=h[P]<S|0;return E}(u,+f),d=function(h,S){for(var w=h.length,P=r.mallocUint32(2*(S*(S+1)/2*w|0)),I=0,O=0;O<w;++O)for(var z=h[O],U=(S=z.length,0);U<S;++U)for(var R=0;R<U;++R){var j=z[R],Y=z[U];P[I++]=0|Math.min(j,Y),P[I++]=0|Math.max(j,Y)}n(i(P,[I/2|0,2]));var B=2;for(O=2;O<I;O+=2)P[O-2]===P[O]&&P[O-1]===P[O+1]||(P[B++]=P[O],P[B++]=P[O+1]);return i(P,[B/2|0,2])}(s,c),m=function(h,S,w,E){for(var P=h.data,I=h.shape[0],O=r.mallocDouble(I),z=0,U=0;U<I;++U){var R=P[2*U],j=P[2*U+1];if(w[R]!==w[j]){var Y=S[R],B=S[j];P[2*z]=R,P[2*z+1]=j,O[z++]=(B-E)/(B-Y)}}return h.shape[0]=z,i(O,[z])}(d,u,y,+f),g=function(h,S){var w=r.mallocInt32(2*S),E=h.shape[0],P=h.data;w[0]=0;for(var I=0,O=0;O<E;++O){var z=P[2*O];if(z!==I){for(w[2*I+1]=O;++I<z;)w[2*I]=O,w[2*I+1]=O;w[2*I]=O}}for(w[2*I+1]=E;++I<S;)w[2*I]=w[2*I+1]=E;return w}(d,0|u.length),x=a(c)(s,d.data,g,y),v=function(h){for(var S=0|h.shape[0],w=h.data,E=new Array(S),P=0;P<S;++P)E[P]=[w[2*P],w[2*P+1]];return E}(d),b=[].slice.call(m.data,0,m.shape[0]);return r.free(y),r.free(d.data),r.free(m.data),r.free(g),{cells:x,vertexIds:v,vertexWeights:b}};var i=t(9618),r=t(1888),n=t(446),a=t(1570)},1570:function(p){"use strict";p.exports=function(t){return l[t]()};var l=[function(){return function(t,i,r,n){for(var a=t.length,s=0;s<a;++s);return[]}},function(){function t(i,r,n,a){for(var s=0|Math.min(n,a),u=0|Math.max(n,a),f=i[2*s],c=i[2*s+1];f<c;){var y=f+c>>1,d=r[2*y+1];if(d===u)return y;u<d?c=y:f=y+1}return f}return function(i,r,n,a){for(var s=i.length,u=[],f=0;f<s;++f){var c=i[f];if(2===c.length){var y=(a[c[0]]<<0)+(a[c[1]]<<1);if(0===y||3===y)continue;switch(y){case 0:case 3:break;case 1:u.push([t(n,r,c[0],c[1])]);break;case 2:u.push([t(n,r,c[1],c[0])])}}}return u}},function(){function t(i,r,n,a){for(var s=0|Math.min(n,a),u=0|Math.max(n,a),f=i[2*s],c=i[2*s+1];f<c;){var y=f+c>>1,d=r[2*y+1];if(d===u)return y;u<d?c=y:f=y+1}return f}return function(i,r,n,a){for(var s=i.length,u=[],f=0;f<s;++f){var c=i[f],y=c.length;if(3===y){if(0==(d=(a[c[0]]<<0)+(a[c[1]]<<1)+(a[c[2]]<<2))||7===d)continue;switch(d){case 0:case 7:break;case 1:u.push([t(n,r,c[0],c[2]),t(n,r,c[0],c[1])]);break;case 2:u.push([t(n,r,c[1],c[0]),t(n,r,c[1],c[2])]);break;case 3:u.push([t(n,r,c[0],c[2]),t(n,r,c[1],c[2])]);break;case 4:u.push([t(n,r,c[2],c[1]),t(n,r,c[2],c[0])]);break;case 5:u.push([t(n,r,c[2],c[1]),t(n,r,c[0],c[1])]);break;case 6:u.push([t(n,r,c[1],c[0]),t(n,r,c[2],c[0])])}}else if(2===y){var d;if(0==(d=(a[c[0]]<<0)+(a[c[1]]<<1))||3===d)continue;switch(d){case 0:case 3:break;case 1:u.push([t(n,r,c[0],c[1])]);break;case 2:u.push([t(n,r,c[1],c[0])])}}}return u}},function(){function t(i,r,n,a){for(var s=0|Math.min(n,a),u=0|Math.max(n,a),f=i[2*s],c=i[2*s+1];f<c;){var y=f+c>>1,d=r[2*y+1];if(d===u)return y;u<d?c=y:f=y+1}return f}return function(i,r,n,a){for(var s=i.length,u=[],f=0;f<s;++f){var c=i[f],y=c.length;if(4===y){if(0==(d=(a[c[0]]<<0)+(a[c[1]]<<1)+(a[c[2]]<<2)+(a[c[3]]<<3))||15===d)continue;switch(d){case 0:case 15:break;case 1:u.push([t(n,r,c[0],c[1]),t(n,r,c[0],c[2]),t(n,r,c[0],c[3])]);break;case 2:u.push([t(n,r,c[1],c[2]),t(n,r,c[1],c[0]),t(n,r,c[1],c[3])]);break;case 3:u.push([t(n,r,c[1],c[2]),t(n,r,c[0],c[2]),t(n,r,c[0],c[3])],[t(n,r,c[1],c[3]),t(n,r,c[1],c[2]),t(n,r,c[0],c[3])]);break;case 4:u.push([t(n,r,c[2],c[0]),t(n,r,c[2],c[1]),t(n,r,c[2],c[3])]);break;case 5:u.push([t(n,r,c[0],c[1]),t(n,r,c[2],c[1]),t(n,r,c[0],c[3])],[t(n,r,c[2],c[1]),t(n,r,c[2],c[3]),t(n,r,c[0],c[3])]);break;case 6:u.push([t(n,r,c[2],c[0]),t(n,r,c[1],c[0]),t(n,r,c[1],c[3])],[t(n,r,c[2],c[3]),t(n,r,c[2],c[0]),t(n,r,c[1],c[3])]);break;case 7:u.push([t(n,r,c[0],c[3]),t(n,r,c[1],c[3]),t(n,r,c[2],c[3])]);break;case 8:u.push([t(n,r,c[3],c[1]),t(n,r,c[3],c[0]),t(n,r,c[3],c[2])]);break;case 9:u.push([t(n,r,c[3],c[1]),t(n,r,c[0],c[1]),t(n,r,c[0],c[2])],[t(n,r,c[3],c[2]),t(n,r,c[3],c[1]),t(n,r,c[0],c[2])]);break;case 10:u.push([t(n,r,c[1],c[0]),t(n,r,c[3],c[0]),t(n,r,c[1],c[2])],[t(n,r,c[3],c[0]),t(n,r,c[3],c[2]),t(n,r,c[1],c[2])]);break;case 11:u.push([t(n,r,c[1],c[2]),t(n,r,c[0],c[2]),t(n,r,c[3],c[2])]);break;case 12:u.push([t(n,r,c[3],c[0]),t(n,r,c[2],c[0]),t(n,r,c[2],c[1])],[t(n,r,c[3],c[1]),t(n,r,c[3],c[0]),t(n,r,c[2],c[1])]);break;case 13:u.push([t(n,r,c[0],c[1]),t(n,r,c[2],c[1]),t(n,r,c[3],c[1])]);break;case 14:u.push([t(n,r,c[2],c[0]),t(n,r,c[1],c[0]),t(n,r,c[3],c[0])])}}else if(3===y){if(0==(d=(a[c[0]]<<0)+(a[c[1]]<<1)+(a[c[2]]<<2))||7===d)continue;switch(d){case 0:case 7:break;case 1:u.push([t(n,r,c[0],c[2]),t(n,r,c[0],c[1])]);break;case 2:u.push([t(n,r,c[1],c[0]),t(n,r,c[1],c[2])]);break;case 3:u.push([t(n,r,c[0],c[2]),t(n,r,c[1],c[2])]);break;case 4:u.push([t(n,r,c[2],c[1]),t(n,r,c[2],c[0])]);break;case 5:u.push([t(n,r,c[2],c[1]),t(n,r,c[0],c[1])]);break;case 6:u.push([t(n,r,c[1],c[0]),t(n,r,c[2],c[0])])}}else if(2===y){var d;if(0==(d=(a[c[0]]<<0)+(a[c[1]]<<1))||3===d)continue;switch(d){case 0:case 3:break;case 1:u.push([t(n,r,c[0],c[1])]);break;case 2:u.push([t(n,r,c[1],c[0])])}}}return u}}]},6803:function(p,l,t){"use strict";t(8828),t(1755),l.Fw=function i(r,n){var a=r.length,s=r.length-n.length,u=Math.min;if(s)return s;switch(a){case 0:return 0;case 1:return r[0]-n[0];case 2:return(y=r[0]+r[1]-n[0]-n[1])||u(r[0],r[1])-u(n[0],n[1]);case 3:var f=r[0]+r[1],c=n[0]+n[1];if(y=f+r[2]-(c+n[2]))return y;var y,d=u(r[0],r[1]),m=u(n[0],n[1]);return(y=u(d,r[2])-u(m,n[2]))||u(d+r[2],f)-u(m+n[2],c);default:var g=r.slice(0);g.sort();var x=n.slice(0);x.sort();for(var v=0;v<a;++v)if(s=g[v]-x[v])return s;return 0}}},3105:function(p,l){"use strict";function t(r){var n=32;return(r&=-r)&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}l.INT_BITS=32,l.INT_MAX=2147483647,l.INT_MIN=-2147483648,l.sign=function(r){return(r>0)-(r<0)},l.abs=function(r){var n=r>>31;return(r^n)-n},l.min=function(r,n){return n^(r^n)&-(r<n)},l.max=function(r,n){return r^(r^n)&-(r<n)},l.isPow2=function(r){return!(r&r-1||!r)},l.log2=function(r){var n,a;return n=(r>65535)<<4,n|=a=((r>>>=n)>255)<<3,n|=a=((r>>>=a)>15)<<2,(n|=a=((r>>>=a)>3)<<1)|(r>>>=a)>>1},l.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},l.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},l.countTrailingZeros=t,l.nextPow2=function(r){return r+=0===r,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,1+((r|=r>>>8)|r>>>16)},l.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},l.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var i=new Array(256);(function(r){for(var n=0;n<256;++n){var a=n,s=n,u=7;for(a>>>=1;a;a>>>=1)s<<=1,s|=1&a,--u;r[n]=s<<u&255}})(i),l.reverse=function(r){return i[255&r]<<24|i[r>>>8&255]<<16|i[r>>>16&255]<<8|i[r>>>24&255]},l.interleave2=function(r,n){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))<<1},l.deinterleave2=function(r,n){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>n&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},l.interleave3=function(r,n,a){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<1)|(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<2},l.deinterleave3=function(r,n){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>n&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},l.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>t(r)+1}},2014:function(p,l,t){"use strict";var i=t(3105),r=t(4623);function n(d,m){var g=d.length,x=d.length-m.length,v=Math.min;if(x)return x;switch(g){case 0:return 0;case 1:return d[0]-m[0];case 2:return(S=d[0]+d[1]-m[0]-m[1])||v(d[0],d[1])-v(m[0],m[1]);case 3:var b=d[0]+d[1],h=m[0]+m[1];if(S=b+d[2]-(h+m[2]))return S;var S,w=v(d[0],d[1]),E=v(m[0],m[1]);return(S=v(w,d[2])-v(E,m[2]))||v(w+d[2],b)-v(E+m[2],h);default:var P=d.slice(0);P.sort();var I=m.slice(0);I.sort();for(var O=0;O<g;++O)if(x=P[O]-I[O])return x;return 0}}function a(d,m){return n(d[0],m[0])}function s(d,m){if(m){for(var g=d.length,x=new Array(g),v=0;v<g;++v)x[v]=[d[v],m[v]];for(x.sort(a),v=0;v<g;++v)d[v]=x[v][0],m[v]=x[v][1];return d}return d.sort(n),d}function u(d){if(0===d.length)return[];for(var m=1,g=d.length,x=1;x<g;++x){var v=d[x];if(n(v,d[x-1])){if(x===m){m++;continue}d[m++]=v}}return d.length=m,d}function f(d,m){for(var g=0,x=d.length-1,v=-1;g<=x;){var b=g+x>>1,h=n(d[b],m);h<=0?(0===h&&(v=b),g=b+1):h>0&&(x=b-1)}return v}function c(d,m){for(var g=new Array(d.length),x=0,v=g.length;x<v;++x)g[x]=[];for(var b=[],h=(x=0,m.length);x<h;++x)for(var S=m[x],w=S.length,E=1,P=1<<w;E<P;++E){b.length=i.popCount(E);for(var I=0,O=0;O<w;++O)E&1<<O&&(b[I++]=S[O]);var z=f(d,b);if(!(z<0))for(;g[z++].push(x),!(z>=d.length||0!==n(d[z],b)););}return g}function y(d,m){if(m<0)return[];for(var g=[],x=(1<<m+1)-1,v=0;v<d.length;++v)for(var b=d[v],h=x;h<1<<b.length;h=i.nextCombination(h)){for(var S=new Array(m+1),w=0,E=0;E<b.length;++E)h&1<<E&&(S[w++]=b[E]);g.push(S)}return s(g)}l.dimension=function(d){for(var m=0,g=Math.max,x=0,v=d.length;x<v;++x)m=g(m,d[x].length);return m-1},l.countVertices=function(d){for(var m=-1,g=Math.max,x=0,v=d.length;x<v;++x)for(var b=d[x],h=0,S=b.length;h<S;++h)m=g(m,b[h]);return m+1},l.cloneCells=function(d){for(var m=new Array(d.length),g=0,x=d.length;g<x;++g)m[g]=d[g].slice(0);return m},l.compareCells=n,l.normalize=s,l.unique=u,l.findCell=f,l.incidence=c,l.dual=function(d,m){if(!m)return c(u(y(d,0)),d);for(var g=new Array(m),x=0;x<m;++x)g[x]=[];x=0;for(var v=d.length;x<v;++x)for(var b=d[x],h=0,S=b.length;h<S;++h)g[b[h]].push(x);return g},l.explode=function(d){for(var m=[],g=0,x=d.length;g<x;++g)for(var v=d[g],b=0|v.length,h=1,S=1<<b;h<S;++h){for(var w=[],E=0;E<b;++E)h>>>E&1&&w.push(v[E]);m.push(w)}return s(m)},l.skeleton=y,l.boundary=function(d){for(var m=[],g=0,x=d.length;g<x;++g)for(var v=d[g],b=0,h=v.length;b<h;++b){for(var S=new Array(v.length-1),w=0,E=0;w<h;++w)w!==b&&(S[E++]=v[w]);m.push(S)}return s(m)},l.connectedComponents=function(d,m){return m?function(g,x){for(var v=new r(x),b=0;b<g.length;++b)for(var h=g[b],S=0;S<h.length;++S)for(var w=S+1;w<h.length;++w)v.link(h[S],h[w]);var E=[],P=v.ranks;for(b=0;b<P.length;++b)P[b]=-1;for(b=0;b<g.length;++b){var I=v.find(g[b][0]);P[I]<0?(P[I]=E.length,E.push([g[b].slice(0)])):E[P[I]].push(g[b].slice(0))}return E}(d,m):function(g){for(var x=u(s(y(g,0))),v=new r(x.length),b=0;b<g.length;++b)for(var h=g[b],S=0;S<h.length;++S)for(var w=f(x,[h[S]]),E=S+1;E<h.length;++E)v.link(w,f(x,[h[E]]));var P=[],I=v.ranks;for(b=0;b<I.length;++b)I[b]=-1;for(b=0;b<g.length;++b){var O=v.find(f(x,[g[b][0]]));I[O]<0?(I[O]=P.length,P.push([g[b].slice(0)])):P[I[O]].push(g[b].slice(0))}return P}(d)}},4623:function(p){"use strict";function l(t){this.roots=new Array(t),this.ranks=new Array(t);for(var i=0;i<t;++i)this.roots[i]=i,this.ranks[i]=0}p.exports=l,l.prototype.length=function(){return this.roots.length},l.prototype.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},l.prototype.find=function(t){for(var i=this.roots;i[t]!==t;){var r=i[t];i[t]=i[r],t=r}return t},l.prototype.link=function(t,i){var r=this.find(t),n=this.find(i);if(r!==n){var a=this.ranks,s=this.roots,u=a[r],f=a[n];u<f?s[r]=n:f<u?s[n]=r:(s[n]=r,++a[r])}}},5878:function(p,l,t){"use strict";p.exports=function(n,a,s){for(var u=a.length,f=n.length,c=new Array(u),y=new Array(u),d=new Array(u),m=new Array(u),g=0;g<u;++g)c[g]=y[g]=-1,d[g]=1/0,m[g]=!1;for(g=0;g<f;++g){var x=n[g];if(2!==x.length)throw new Error("Input must be a graph");var v=x[1],b=x[0];y[b]=-1!==y[b]?-2:v,c[v]=-1!==c[v]?-2:b}function h(te){if(m[te])return 1/0;var $,J,X=c[te],ae=y[te];return X<0||ae<0?1/0:($=a[X],J=a[ae],Math.abs(i(a[te],$,J))/Math.sqrt(Math.pow($[0]-J[0],2)+Math.pow($[1]-J[1],2)))}function S(te,ee){var $=R[te],J=R[ee];R[te]=J,R[ee]=$,j[$]=ee,j[J]=te}function w(te){return d[R[te]]}function E(te){return 1&te?te-1>>1:(te>>1)-1}function P(te){for(var ee=w(te);;){var $=ee,J=2*te+1,X=2*(te+1),ae=te;if(J<Y){var ce=w(J);ce<$&&(ae=J,$=ce)}if(X<Y&&w(X)<$&&(ae=X),ae===te)return te;S(te,ae),te=ae}}function I(te){for(var ee=w(te);te>0;){var $=E(te);if(!($>=0&&ee<w($)))return te;S(te,$),te=$}}function O(){if(Y>0){var te=R[0];return S(0,Y-1),Y-=1,P(0),te}return-1}function z(te,ee){var $=R[te];return d[$]===ee?te:(d[$]=-1/0,I(te),O(),d[$]=ee,I((Y+=1)-1))}function U(te){if(!m[te]){m[te]=!0;var ee=c[te],$=y[te];c[$]>=0&&(c[$]=ee),y[ee]>=0&&(y[ee]=$),j[ee]>=0&&z(j[ee],h(ee)),j[$]>=0&&z(j[$],h($))}}var R=[],j=new Array(u);for(g=0;g<u;++g)(d[g]=h(g))<1/0?(j[g]=R.length,R.push(g)):j[g]=-1;var Y=R.length;for(g=Y>>1;g>=0;--g)P(g);for(;;){var B=O();if(B<0||d[B]>s)break;U(B)}var V=[];for(g=0;g<u;++g)m[g]||(j[g]=V.length,V.push(a[g].slice()));function q(te,ee){if(te[ee]<0)return ee;var $=ee,J=ee;do{var X=te[J];if(!m[J]||X<0||X===J||(X=te[J=X],!m[J]||X<0||X===J))break;J=X,$=te[$]}while($!==J);for(var ae=ee;ae!==J;ae=te[ae])te[ae]=J;return J}var ie=[];return n.forEach(function(te){var ee=q(c,te[0]),$=q(y,te[1]);if(ee>=0&&$>=0&&ee!==$){var J=j[ee],X=j[$];J!==X&&ie.push([J,X])}}),r.unique(r.normalize(ie)),{positions:V,edges:ie}};var i=t(3250),r=t(2014)},1303:function(p,l,t){"use strict";p.exports=function(n,a){var s,u,f,c;if(a[0][0]<a[1][0])s=a[0],u=a[1];else{if(!(a[0][0]>a[1][0]))return r(a,n);s=a[1],u=a[0]}if(n[0][0]<n[1][0])f=n[0],c=n[1];else{if(!(n[0][0]>n[1][0]))return-r(n,a);f=n[1],c=n[0]}var y=i(s,u,c),d=i(s,u,f);if(y<0){if(d<=0)return y}else if(y>0){if(d>=0)return y}else if(d)return d;if(y=i(c,f,u),d=i(c,f,s),y<0){if(d<=0)return y}else if(y>0){if(d>=0)return y}else if(d)return d;return u[0]-c[0]};var i=t(3250);function r(n,a){var s,u,f,c;if(a[0][0]<a[1][0])s=a[0],u=a[1];else{if(!(a[0][0]>a[1][0])){var y=Math.min(n[0][1],n[1][1]),d=Math.max(n[0][1],n[1][1]),m=Math.min(a[0][1],a[1][1]),g=Math.max(a[0][1],a[1][1]);return d<m?d-m:y>g?y-g:d-g}s=a[1],u=a[0]}n[0][1]<n[1][1]?(f=n[0],c=n[1]):(f=n[1],c=n[0]);var x=i(u,s,f);return x||(x=i(u,s,c))||c-u}},4209:function(p,l,t){"use strict";p.exports=function(d){for(var m=d.length,g=2*m,x=new Array(g),v=0;v<m;++v){var b=d[v],h=b[0][0]<b[1][0];x[2*v]=new y(b[0][0],b,h,v),x[2*v+1]=new y(b[1][0],b,!h,v)}x.sort(function(U,R){var j=U.x-R.x;return j||(j=U.create-R.create)||Math.min(U.segment[0][1],U.segment[1][1])-Math.min(R.segment[0][1],R.segment[1][1])});var S=r(a),w=[],E=[],P=[];for(v=0;v<g;){for(var I=x[v].x,O=[];v<g;){var z=x[v];if(z.x!==I)break;v+=1,z.segment[0][0]===z.x&&z.segment[1][0]===z.x?z.create&&(z.segment[0][1]<z.segment[1][1]?(O.push(new c(z.segment[0][1],z.index,!0,!0)),O.push(new c(z.segment[1][1],z.index,!1,!1))):(O.push(new c(z.segment[1][1],z.index,!0,!1)),O.push(new c(z.segment[0][1],z.index,!1,!0)))):S=z.create?S.insert(z.segment,z.index):S.remove(z.segment)}w.push(S.root),E.push(I),P.push(O)}return new s(w,E,P)};var i=t(2478),r=t(3840),n=t(3250),a=t(1303);function s(d,m,g){this.slabs=d,this.coordinates=m,this.horizontal=g}function u(d,m){return d.y-m}function f(d,m){for(var g=null;d;){var x,v,b=d.key;b[0][0]<b[1][0]?(x=b[0],v=b[1]):(x=b[1],v=b[0]);var h=n(x,v,m);if(h<0)d=d.left;else if(h>0)if(m[0]!==b[1][0])g=d,d=d.right;else{if(S=f(d.right,m))return S;d=d.left}else{if(m[0]!==b[1][0])return d;var S;if(S=f(d.right,m))return S;d=d.left}}return g}function c(d,m,g,x){this.y=d,this.index=m,this.start=g,this.closed=x}function y(d,m,g,x){this.x=d,this.segment=m,this.create=g,this.index=x}s.prototype.castUp=function(d){var m=i.le(this.coordinates,d[0]);if(m<0)return-1;var g=f(this.slabs[m],d),x=-1;if(g&&(x=g.value),this.coordinates[m]===d[0]){var v=null;if(g&&(v=g.key),m>0){var b=f(this.slabs[m-1],d);b&&(v?a(b.key,v)>0&&(v=b.key,x=b.value):(x=b.value,v=b.key))}var h=this.horizontal[m];if(h.length>0){var S=i.ge(h,d[1],u);if(S<h.length){var w=h[S];if(d[1]===w.y){if(w.closed)return w.index;for(;S<h.length-1&&h[S+1].y===d[1];)if((w=h[S+=1]).closed)return w.index;if(w.y===d[1]&&!w.start){if((S+=1)>=h.length)return x;w=h[S]}}if(w.start)if(v){var E=n(v[0],v[1],[d[0],w.y]);v[0][0]>v[1][0]&&(E=-E),E>0&&(x=w.index)}else x=w.index;else w.y!==d[1]&&(x=w.index)}}}return x}},5202:function(p,l,t){"use strict";var i=t(1944),r=t(8210);function n(s,u){var f=r(i(s,u),[u[u.length-1]]);return f[f.length-1]}function a(s,u,f,c){var y=-u/(c-u);y<0?y=0:y>1&&(y=1);for(var d=1-y,m=s.length,g=new Array(m),x=0;x<m;++x)g[x]=y*s[x]+d*f[x];return g}p.exports=function(s,u){for(var f=[],c=[],y=n(s[s.length-1],u),d=s[s.length-1],m=s[0],g=0;g<s.length;++g,d=m){var x=n(m=s[g],u);if(y<0&&x>0||y>0&&x<0){var v=a(d,x,m,y);f.push(v),c.push(v.slice())}x<0?c.push(m.slice()):x>0?f.push(m.slice()):(f.push(m.slice()),c.push(m.slice())),y=x}return{positive:f,negative:c}},p.exports.positive=function(s,u){for(var f=[],c=n(s[s.length-1],u),y=s[s.length-1],d=s[0],m=0;m<s.length;++m,y=d){var g=n(d=s[m],u);(c<0&&g>0||c>0&&g<0)&&f.push(a(y,g,d,c)),g>=0&&f.push(d.slice()),c=g}return f},p.exports.negative=function(s,u){for(var f=[],c=n(s[s.length-1],u),y=s[s.length-1],d=s[0],m=0;m<s.length;++m,y=d){var g=n(d=s[m],u);(c<0&&g>0||c>0&&g<0)&&f.push(a(y,g,d,c)),g<=0&&f.push(d.slice()),c=g}return f}},3387:function(p,l,t){var i;!function(){"use strict";var r={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function n(u){return function(f,c){var y,d,m,g,x,v,b,h,S,w=1,E=f.length,P="";for(d=0;d<E;d++)if("string"==typeof f[d])P+=f[d];else if("object"==typeof f[d]){if((g=f[d]).keys)for(y=c[w],m=0;m<g.keys.length;m++){if(null==y)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',g.keys[m],g.keys[m-1]));y=y[g.keys[m]]}else y=g.param_no?c[g.param_no]:c[w++];if(r.not_type.test(g.type)&&r.not_primitive.test(g.type)&&y instanceof Function&&(y=y()),r.numeric_arg.test(g.type)&&"number"!=typeof y&&isNaN(y))throw new TypeError(n("[sprintf] expecting number but found %T",y));switch(r.number.test(g.type)&&(h=y>=0),g.type){case"b":y=parseInt(y,10).toString(2);break;case"c":y=String.fromCharCode(parseInt(y,10));break;case"d":case"i":y=parseInt(y,10);break;case"j":y=JSON.stringify(y,null,g.width?parseInt(g.width):0);break;case"e":y=g.precision?parseFloat(y).toExponential(g.precision):parseFloat(y).toExponential();break;case"f":y=g.precision?parseFloat(y).toFixed(g.precision):parseFloat(y);break;case"g":y=g.precision?String(Number(y.toPrecision(g.precision))):parseFloat(y);break;case"o":y=(parseInt(y,10)>>>0).toString(8);break;case"s":y=String(y),y=g.precision?y.substring(0,g.precision):y;break;case"t":y=String(!!y),y=g.precision?y.substring(0,g.precision):y;break;case"T":y=Object.prototype.toString.call(y).slice(8,-1).toLowerCase(),y=g.precision?y.substring(0,g.precision):y;break;case"u":y=parseInt(y,10)>>>0;break;case"v":y=y.valueOf(),y=g.precision?y.substring(0,g.precision):y;break;case"x":y=(parseInt(y,10)>>>0).toString(16);break;case"X":y=(parseInt(y,10)>>>0).toString(16).toUpperCase()}r.json.test(g.type)?P+=y:(!r.number.test(g.type)||h&&!g.sign?S="":(S=h?"+":"-",y=y.toString().replace(r.sign,"")),v=g.pad_char?"0"===g.pad_char?"0":g.pad_char.charAt(1):" ",b=g.width-(S+y).length,x=g.width&&b>0?v.repeat(b):"",P+=g.align?S+y+x:"0"===v?S+x+y:x+S+y)}return P}(function(f){if(s[f])return s[f];for(var c,y=f,d=[],m=0;y;){if(null!==(c=r.text.exec(y)))d.push(c[0]);else if(null!==(c=r.modulo.exec(y)))d.push("%");else{if(null===(c=r.placeholder.exec(y)))throw new SyntaxError("[sprintf] unexpected placeholder");if(c[2]){m|=1;var g=[],x=c[2],v=[];if(null===(v=r.key.exec(x)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(g.push(v[1]);""!==(x=x.substring(v[0].length));)if(null!==(v=r.key_access.exec(x)))g.push(v[1]);else{if(null===(v=r.index_access.exec(x)))throw new SyntaxError("[sprintf] failed to parse named argument key");g.push(v[1])}c[2]=g}else m|=2;if(3===m)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");d.push({placeholder:c[0],param_no:c[1],keys:c[2],sign:c[3],pad_char:c[4],align:c[5],width:c[6],precision:c[7],type:c[8]})}y=y.substring(c[0].length)}return s[f]=d}(u),arguments)}function a(u,f){return n.apply(null,[u].concat(f||[]))}var s=Object.create(null);l.sprintf=n,l.vsprintf=a,typeof window<"u"&&(window.sprintf=n,window.vsprintf=a,void 0===(i=function(){return{sprintf:n,vsprintf:a}}.call(l,t,l,p))||(p.exports=i))}()},3711:function(p,l,t){"use strict";p.exports=function(s,u){if(s.dimension<=0)return{positions:[],cells:[]};if(1===s.dimension)return function(y,d){for(var m=r(y,d),g=m.length,x=new Array(g),v=new Array(g),b=0;b<g;++b)x[b]=[m[b]],v[b]=[b];return{positions:x,cells:v}}(s,u);var f=s.order.join()+"-"+s.dtype,c=a[f];return u=+u||0,c||(c=a[f]=function(y,d){var g=n[y.length+"d"];if(g)return g(i,y,d)}(s.order,s.dtype)),c(s,u)};var i=t(2640),r=t(781),n={"2d":function(s,u,f){var c=s({order:u,scalarArguments:3,getters:"generic"===f?[0]:void 0,phase:function(y,d,m,g){return y>g|0},vertex:function(y,d,m,g,x,v,b,h,S,w,E,P,I){var O=(b<<0)+(h<<1)+(S<<2)+(w<<3)|0;if(0!==O&&15!==O)switch(O){case 0:case 15:E.push([y-.5,d-.5]);break;case 1:E.push([y-.25-.25*(g+m-2*I)/(m-g),d-.25-.25*(x+m-2*I)/(m-x)]);break;case 2:E.push([y-.75-.25*(-g-m+2*I)/(g-m),d-.25-.25*(v+g-2*I)/(g-v)]);break;case 3:E.push([y-.5,d-.5-.5*(x+m+v+g-4*I)/(m-x+g-v)]);break;case 4:E.push([y-.25-.25*(v+x-2*I)/(x-v),d-.75-.25*(-x-m+2*I)/(x-m)]);break;case 5:E.push([y-.5-.5*(g+m+v+x-4*I)/(m-g+x-v),d-.5]);break;case 6:E.push([y-.5-.25*(-g-m+v+x)/(g-m+x-v),d-.5-.25*(-x-m+v+g)/(x-m+g-v)]);break;case 7:E.push([y-.75-.25*(v+x-2*I)/(x-v),d-.75-.25*(v+g-2*I)/(g-v)]);break;case 8:E.push([y-.75-.25*(-v-x+2*I)/(v-x),d-.75-.25*(-v-g+2*I)/(v-g)]);break;case 9:E.push([y-.5-.25*(g+m+-v-x)/(m-g+v-x),d-.5-.25*(x+m+-v-g)/(m-x+v-g)]);break;case 10:E.push([y-.5-.5*(-g-m-v-x+4*I)/(g-m+v-x),d-.5]);break;case 11:E.push([y-.25-.25*(-v-x+2*I)/(v-x),d-.75-.25*(x+m-2*I)/(m-x)]);break;case 12:E.push([y-.5,d-.5-.5*(-x-m-v-g+4*I)/(x-m+v-g)]);break;case 13:E.push([y-.75-.25*(g+m-2*I)/(m-g),d-.25-.25*(-v-g+2*I)/(v-g)]);break;case 14:E.push([y-.25-.25*(-g-m+2*I)/(g-m),d-.25-.25*(-x-m+2*I)/(x-m)])}},cell:function(y,d,m,g,x,v,b,h,S){h.push(x?[y,d]:[d,y])}});return function(y,d){var m=[],g=[];return c(y,m,g,d),{positions:m,cells:g}}}},a={}},529:function(p,l,t){"use strict";p.exports=function a(s,u,f){var c=(f=f||{}).fontStyle||"normal",y=f.fontWeight||"normal",d=f.fontVariant||"normal",m=[c,y,d,s].join("_"),g=n[m];g||(g=n[m]={" ":{data:new Float32Array(0),shape:.2}});var x=g[u];if(!x)if(u.length<=1||!/\d/.test(u))x=g[u]=function(U){for(var R=U.cells,j=U.positions,Y=new Float32Array(6*R.length),B=0,V=0,q=0;q<R.length;++q)for(var ie=R[q],te=0;te<3;++te){var ee=j[ie[te]];Y[B++]=ee[0],Y[B++]=ee[1]+1.4,V=Math.max(ee[0],V)}return{data:Y,shape:V}}(i(u,{triangles:!0,font:s,fontStyle:c,fontWeight:y,fontVariant:d,textAlign:f.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var v=u.split(/(\d|\s)/),b=new Array(v.length),h=0,S=0,w=0;w<v.length;++w)b[w]=a(s,v[w]),h+=b[w].data.length,S+=b[w].shape,w>0&&(S+=.02);var E=new Float32Array(h),P=0,I=-.5*S;for(w=0;w<b.length;++w){for(var O=b[w].data,z=0;z<O.length;z+=2)E[P++]=O[z]+I,E[P++]=O[z+1];I+=b[w].shape+.02}x=g[u]={data:E,shape:S}}return x};var i=t(4359),r=window||M.global||{},n=r.__TEXT_CACHE||{};r.__TEXT_CACHE={}},665:function(p,l,t){"use strict";var i=t(3202);p.exports=a;var r=96;function n(s,u){var f=i(getComputedStyle(s).getPropertyValue(u));return f[0]*a(f[1],s)}function a(s,u){switch(u=u||document.body,s=(s||"px").trim().toLowerCase(),u!==window&&u!==document||(u=document.body),s){case"%":return u.clientHeight/100;case"ch":case"ex":return function(f,c){var y=document.createElement("div");y.style["font-size"]="128"+f,c.appendChild(y);var d=n(y,"font-size")/128;return c.removeChild(y),d}(s,u);case"em":return n(u,"font-size");case"rem":return n(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return r;case"cm":return r/2.54;case"mm":return r/25.4;case"pt":return r/72;case"pc":return r/6}return 1}},7261:function(p,l,t){"use strict";p.exports=function(x){var v=(x=x||{}).center||[0,0,0],b=x.up||[0,1,0],h=x.right||y(b),S=x.radius||1,w=x.theta||0,E=x.phi||0;if(v=[].slice.call(v,0,3),b=[].slice.call(b,0,3),s(b,b),h=[].slice.call(h,0,3),s(h,h),"eye"in x){var P=x.eye,I=[P[0]-v[0],P[1]-v[1],P[2]-v[2]];a(h,I,b),f(h[0],h[1],h[2])<1e-6?h=y(b):s(h,h),S=f(I[0],I[1],I[2]);var O=u(b,I)/S,z=u(h,I)/S;E=Math.acos(O),w=Math.acos(z)}return S=Math.log(S),new d(x.zoomMin,x.zoomMax,v,b,h,S,w,E)};var i=t(9215),r=t(7608),n=t(6079),a=t(5911),s=t(3536),u=t(244);function f(x,v,b){return Math.sqrt(Math.pow(x,2)+Math.pow(v,2)+Math.pow(b,2))}function c(x){return Math.min(1,Math.max(-1,x))}function y(x){var v=Math.abs(x[0]),b=Math.abs(x[1]),h=Math.abs(x[2]),S=[0,0,0];v>Math.max(b,h)?S[2]=1:b>Math.max(v,h)?S[0]=1:S[1]=1;for(var w=0,E=0,P=0;P<3;++P)w+=x[P]*x[P],E+=S[P]*x[P];for(P=0;P<3;++P)S[P]-=E/w*x[P];return s(S,S),S}function d(x,v,b,h,S,w,E,P){this.center=i(b),this.up=i(h),this.right=i(S),this.radius=i([w]),this.angle=i([E,P]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(x,v),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var I=0;I<16;++I)this.computedMatrix[I]=.5;this.recalcMatrix(0)}var m=d.prototype;m.setDistanceLimits=function(x,v){x=x>0?Math.log(x):-1/0,v=v>0?Math.log(v):1/0,v=Math.max(v,x),this.radius.bounds[0][0]=x,this.radius.bounds[1][0]=v},m.getDistanceLimits=function(x){var v=this.radius.bounds[0];return x?(x[0]=Math.exp(v[0][0]),x[1]=Math.exp(v[1][0]),x):[Math.exp(v[0][0]),Math.exp(v[1][0])]},m.recalcMatrix=function(x){this.center.curve(x),this.up.curve(x),this.right.curve(x),this.radius.curve(x),this.angle.curve(x);for(var v=this.computedUp,b=this.computedRight,h=0,S=0,w=0;w<3;++w)S+=v[w]*b[w],h+=v[w]*v[w];var E=Math.sqrt(h),P=0;for(w=0;w<3;++w)b[w]-=v[w]*S/h,P+=b[w]*b[w],v[w]/=E;var I=Math.sqrt(P);for(w=0;w<3;++w)b[w]/=I;var O=this.computedToward;a(O,v,b),s(O,O);var z=Math.exp(this.computedRadius[0]),U=this.computedAngle[0],R=this.computedAngle[1],j=Math.cos(U),Y=Math.sin(U),B=Math.cos(R),V=Math.sin(R),q=this.computedCenter,ie=j*B,te=Y*B,ee=V,$=-j*V,J=-Y*V,X=B,ae=this.computedEye,ce=this.computedMatrix;for(w=0;w<3;++w){var le=ie*b[w]+te*O[w]+ee*v[w];ce[4*w+1]=$*b[w]+J*O[w]+X*v[w],ce[4*w+2]=le,ce[4*w+3]=0}var pe=ce[1],we=ce[5],Te=ce[9],ye=ce[2],ve=ce[6],xe=ce[10],Ce=we*xe-Te*ve,Oe=Te*ye-pe*xe,be=pe*ve-we*ye,ue=f(Ce,Oe,be);for(Oe/=ue,be/=ue,ce[0]=Ce/=ue,ce[4]=Oe,ce[8]=be,w=0;w<3;++w)ae[w]=q[w]+ce[2+4*w]*z;for(w=0;w<3;++w){P=0;for(var se=0;se<3;++se)P+=ce[w+4*se]*ae[se];ce[12+w]=-P}ce[15]=1},m.getMatrix=function(x,v){this.recalcMatrix(x);var b=this.computedMatrix;if(v){for(var h=0;h<16;++h)v[h]=b[h];return v}return b};var g=[0,0,0];m.rotate=function(x,v,b,h){if(this.angle.move(x,v,b),h){this.recalcMatrix(x);var S=this.computedMatrix;g[0]=S[2],g[1]=S[6],g[2]=S[10];for(var w=this.computedUp,E=this.computedRight,P=this.computedToward,I=0;I<3;++I)S[4*I]=w[I],S[4*I+1]=E[I],S[4*I+2]=P[I];for(n(S,S,h,g),I=0;I<3;++I)w[I]=S[4*I],E[I]=S[4*I+1];this.up.set(x,w[0],w[1],w[2]),this.right.set(x,E[0],E[1],E[2])}},m.pan=function(x,v,b,h){v=v||0,b=b||0,h=h||0,this.recalcMatrix(x);var S=this.computedMatrix,w=(Math.exp(this.computedRadius[0]),S[1]),E=S[5],P=S[9],I=f(w,E,P),O=S[0],z=S[4],U=S[8],R=O*(w/=I)+z*(E/=I)+U*(P/=I),j=f(O-=w*R,z-=E*R,U-=P*R),Y=(O/=j)*v+w*b,B=(z/=j)*v+E*b,V=(U/=j)*v+P*b;this.center.move(x,Y,B,V);var q=Math.exp(this.computedRadius[0]);q=Math.max(1e-4,q+h),this.radius.set(x,Math.log(q))},m.translate=function(x,v,b,h){this.center.move(x,v||0,b||0,h||0)},m.setMatrix=function(x,v,b,h){var S=1;"number"==typeof b&&(S=0|b),(S<0||S>3)&&(S=1);var w=(S+2)%3;v||(this.recalcMatrix(x),v=this.computedMatrix);var E=v[S],P=v[S+4],I=v[S+8];if(h){var O=Math.abs(E),z=Math.abs(P),U=Math.abs(I),R=Math.max(O,z,U);O===R?(E=E<0?-1:1,P=I=0):U===R?(I=I<0?-1:1,E=P=0):(P=P<0?-1:1,E=I=0)}else{var j=f(E,P,I);E/=j,P/=j,I/=j}var Y,B,V=v[w],q=v[w+4],ie=v[w+8],te=V*E+q*P+ie*I,ee=f(V-=E*te,q-=P*te,ie-=I*te),$=P*(ie/=ee)-I*(q/=ee),J=I*(V/=ee)-E*ie,X=E*q-P*V,ae=f($,J,X);if($/=ae,J/=ae,X/=ae,this.center.jump(x,Se,Pe,Fe),this.radius.idle(x),this.up.jump(x,E,P,I),this.right.jump(x,V,q,ie),2===S){var ce=v[1],le=v[5],pe=v[9];Y=Ce<0?-Math.PI/2:Math.PI/2,B=Math.atan2(ce*$+le*J+pe*X,ce*V+le*q+pe*ie)}else{var ye=v[2],ve=v[6],xe=v[10],Ce=ye*E+ve*P+xe*I,Oe=ye*V+ve*q+xe*ie,be=ye*$+ve*J+xe*X;Y=Math.asin(c(Ce)),B=Math.atan2(be,Oe)}this.angle.jump(x,B,Y),this.recalcMatrix(x);var ue=v[2],se=v[6],ge=v[10],Ie=this.computedMatrix;r(Ie,v);var ke=Ie[15],Se=Ie[12]/ke,Pe=Ie[13]/ke,Fe=Ie[14]/ke,Be=Math.exp(this.computedRadius[0]);this.center.jump(x,Se-ue*Be,Pe-se*Be,Fe-ge*Be)},m.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},m.idle=function(x){this.center.idle(x),this.up.idle(x),this.right.idle(x),this.radius.idle(x),this.angle.idle(x)},m.flush=function(x){this.center.flush(x),this.up.flush(x),this.right.flush(x),this.radius.flush(x),this.angle.flush(x)},m.setDistance=function(x,v){v>0&&this.radius.set(x,Math.log(v))},m.lookAt=function(x,v,b,h){this.recalcMatrix(x),v=v||this.computedEye,b=b||this.computedCenter;var S=(h=h||this.computedUp)[0],w=h[1],E=h[2],P=f(S,w,E);if(!(P<1e-6)){S/=P,w/=P,E/=P;var I=v[0]-b[0],O=v[1]-b[1],z=v[2]-b[2],U=f(I,O,z);if(!(U<1e-6)){I/=U,O/=U,z/=U;var R=this.computedRight,j=R[0],Y=R[1],B=R[2],V=S*j+w*Y+E*B,q=f(j-=V*S,Y-=V*w,B-=V*E);if(!(q<.01&&(q=f(j=w*z-E*O,Y=E*I-S*z,B=S*O-w*I))<1e-6)){j/=q,Y/=q,B/=q,this.up.set(x,S,w,E),this.right.set(x,j,Y,B),this.center.set(x,b[0],b[1],b[2]),this.radius.set(x,Math.log(U));var ie=w*B-E*Y,te=E*j-S*B,ee=S*Y-w*j,$=f(ie,te,ee),X=j*I+Y*O+B*z,ae=(ie/=$)*I+(te/=$)*O+(ee/=$)*z,ce=Math.asin(c(S*I+w*O+E*z)),le=Math.atan2(ae,X),pe=this.angle._state,we=pe[pe.length-1],Te=pe[pe.length-2];we%=2*Math.PI;var ye=Math.abs(we+2*Math.PI-le),ve=Math.abs(we-le),xe=Math.abs(we-2*Math.PI-le);ye<ve&&(we+=2*Math.PI),xe<ve&&(we-=2*Math.PI),this.angle.jump(this.angle.lastT(),we,Te),this.angle.set(x,le,ce)}}}}},5250:function(p){"use strict";p.exports=function(t,i,r){var n=t*i,a=l*t,s=a-(a-t),u=t-s,f=l*i,c=f-(f-i),y=i-c,d=u*y-(n-s*c-u*c-s*y);return r?(r[0]=d,r[1]=n,r):[d,n]};var l=+(Math.pow(2,27)+1)},9362:function(p){"use strict";p.exports=function(l,t,i){var r=l+t,n=r-l,a=t-n,s=l-(r-n);return i?(i[0]=s+a,i[1]=r,i):[s+a,r]}},1888:function(p,l,t){"use strict";var i=t(8828),r=t(1338),n=t(4793).hp;t.g.__TYPEDARRAY_POOL||(t.g.__TYPEDARRAY_POOL={UINT8:r([32,0]),UINT16:r([32,0]),UINT32:r([32,0]),BIGUINT64:r([32,0]),INT8:r([32,0]),INT16:r([32,0]),INT32:r([32,0]),BIGINT64:r([32,0]),FLOAT:r([32,0]),DOUBLE:r([32,0]),DATA:r([32,0]),UINT8C:r([32,0]),BUFFER:r([32,0])});var a=typeof Uint8ClampedArray<"u",s=typeof BigUint64Array<"u",u=typeof BigInt64Array<"u",f=t.g.__TYPEDARRAY_POOL;f.UINT8C||(f.UINT8C=r([32,0])),f.BIGUINT64||(f.BIGUINT64=r([32,0])),f.BIGINT64||(f.BIGINT64=r([32,0])),f.BUFFER||(f.BUFFER=r([32,0]));var c=f.DATA,y=f.BUFFER;function d(R){if(R){var Y=i.log2(R.length||R.byteLength);c[Y].push(R)}}function m(R){R=i.nextPow2(R);var j=i.log2(R),Y=c[j];return Y.length>0?Y.pop():new ArrayBuffer(R)}function g(R){return new Uint8Array(m(R),0,R)}function x(R){return new Uint16Array(m(2*R),0,R)}function v(R){return new Uint32Array(m(4*R),0,R)}function b(R){return new Int8Array(m(R),0,R)}function h(R){return new Int16Array(m(2*R),0,R)}function S(R){return new Int32Array(m(4*R),0,R)}function w(R){return new Float32Array(m(4*R),0,R)}function E(R){return new Float64Array(m(8*R),0,R)}function P(R){return a?new Uint8ClampedArray(m(R),0,R):g(R)}function I(R){return s?new BigUint64Array(m(8*R),0,R):null}function O(R){return u?new BigInt64Array(m(8*R),0,R):null}function z(R){return new DataView(m(R),0,R)}function U(R){R=i.nextPow2(R);var j=i.log2(R),Y=y[j];return Y.length>0?Y.pop():new n(R)}l.free=function(R){if(n.isBuffer(R))y[i.log2(R.length)].push(R);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(R)&&(R=R.buffer),!R)return;var Y=0|i.log2(R.length||R.byteLength);c[Y].push(R)}},l.freeUint8=l.freeUint16=l.freeUint32=l.freeBigUint64=l.freeInt8=l.freeInt16=l.freeInt32=l.freeBigInt64=l.freeFloat32=l.freeFloat=l.freeFloat64=l.freeDouble=l.freeUint8Clamped=l.freeDataView=function(R){d(R.buffer)},l.freeArrayBuffer=d,l.freeBuffer=function(R){y[i.log2(R.length)].push(R)},l.malloc=function(R,j){if(void 0===j||"arraybuffer"===j)return m(R);switch(j){case"uint8":return g(R);case"uint16":return x(R);case"uint32":return v(R);case"int8":return b(R);case"int16":return h(R);case"int32":return S(R);case"float":case"float32":return w(R);case"double":case"float64":return E(R);case"uint8_clamped":return P(R);case"bigint64":return O(R);case"biguint64":return I(R);case"buffer":return U(R);case"data":case"dataview":return z(R);default:return null}return null},l.mallocArrayBuffer=m,l.mallocUint8=g,l.mallocUint16=x,l.mallocUint32=v,l.mallocInt8=b,l.mallocInt16=h,l.mallocInt32=S,l.mallocFloat32=l.mallocFloat=w,l.mallocFloat64=l.mallocDouble=E,l.mallocUint8Clamped=P,l.mallocBigUint64=I,l.mallocBigInt64=O,l.mallocDataView=z,l.mallocBuffer=U,l.clearCache=function(){for(var R=0;R<32;++R)f.UINT8[R].length=0,f.UINT16[R].length=0,f.UINT32[R].length=0,f.INT8[R].length=0,f.INT16[R].length=0,f.INT32[R].length=0,f.FLOAT[R].length=0,f.DOUBLE[R].length=0,f.BIGUINT64[R].length=0,f.BIGINT64[R].length=0,f.UINT8C[R].length=0,c[R].length=0,y[R].length=0}},1755:function(p){"use strict";function l(i){this.roots=new Array(i),this.ranks=new Array(i);for(var r=0;r<i;++r)this.roots[r]=r,this.ranks[r]=0}p.exports=l;var t=l.prototype;Object.defineProperty(t,"length",{get:function(){return this.roots.length}}),t.makeSet=function(){var i=this.roots.length;return this.roots.push(i),this.ranks.push(0),i},t.find=function(i){for(var r=i,n=this.roots;n[i]!==i;)i=n[i];for(;n[r]!==i;){var a=n[r];n[r]=i,r=a}return i},t.link=function(i,r){var n=this.find(i),a=this.find(r);if(n!==a){var s=this.ranks,u=this.roots,f=s[n],c=s[a];f<c?u[n]=a:c<f?u[a]=n:(u[a]=n,++s[n])}}},1682:function(p){"use strict";p.exports=function(l,t,i){return 0===l.length?l:t?(i||l.sort(t),function(r,n){for(var a=1,s=r.length,u=r[0],f=r[0],c=1;c<s;++c)if(f=u,n(u=r[c],f)){if(c===a){a++;continue}r[a++]=u}return r.length=a,r}(l,t)):(i||l.sort(),function(r){for(var n=1,a=r.length,s=r[0],u=r[0],f=1;f<a;++f,u=s)if(u=s,(s=r[f])!==u){if(f===n){n++;continue}r[n++]=s}return r.length=n,r}(l))}},4359:function(p,l,t){"use strict";p.exports=function(a,s){return"object"==typeof s&&null!==s||(s={}),i(a,s.canvas||r,s.context||n,s)};var i=t(7718),r=null,n=null;typeof document<"u"&&((r=document.createElement("canvas")).width=8192,r.height=1024,n=r.getContext("2d"))},7718:function(p,l,t){p.exports=function(I,O,z,U){var R=64,j=1.25,Y={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return U&&(U.size&&U.size>0&&(R=U.size),U.lineSpacing&&U.lineSpacing>0&&(j=U.lineSpacing),U.styletags&&U.styletags.breaklines&&(Y.breaklines=!!U.styletags.breaklines),U.styletags&&U.styletags.bolds&&(Y.bolds=!!U.styletags.bolds),U.styletags&&U.styletags.italics&&(Y.italics=!!U.styletags.italics),U.styletags&&U.styletags.subscripts&&(Y.subscripts=!!U.styletags.subscripts),U.styletags&&U.styletags.superscripts&&(Y.superscripts=!!U.styletags.superscripts)),z.font=[U.fontStyle,U.fontVariant,U.fontWeight,R+"px",U.font].filter(function(B){return B}).join(" "),z.textAlign="start",z.textBaseline="alphabetic",z.direction="ltr",P(function(B,V,q,ie,te,ee){q=(q=q.replace(/\n/g,"")).replace(/\<br\>/g,!0===ee.breaklines?"\n":" ");var $="",J=[];for(le=0;le<q.length;++le)J[le]=$;!0===ee.bolds&&(J=S(f,c,q,J)),!0===ee.italics&&(J=S(y,d,q,J)),!0===ee.superscripts&&(J=S(m,x,q,J)),!0===ee.subscripts&&(J=S(v,h,q,J));var X=[],ae="";for(le=0;le<q.length;++le)null!==J[le]&&(ae+=q[le],X.push(J[le]));var ce,le,pe,we,Te,ye=ae.split("\n"),ve=ye.length,xe=Math.round(te*ie),Ce=ie,Oe=2*ie,be=0,ue=ve*xe+Oe;B.height<ue&&(B.height=ue),V.fillStyle="#000",V.fillRect(0,0,B.width,B.height),V.fillStyle="#fff";var se=0,ge="";function Ie(){if(""!==ge){var Le=V.measureText(ge).width;V.fillText(ge,Ce+pe,Oe+we),pe+=Le}}function ke(){return Math.round(Te)+"px "}function Se(Le,Ne){var Re=""+V.font;if(!0===ee.subscripts){var He=Le.indexOf(b),Ze=Ne.indexOf(b),nt=He>-1?parseInt(Le[1+He]):0,ft=Ze>-1?parseInt(Ne[1+Ze]):0;nt!==ft&&(Re=Re.replace(ke(),"?px "),Te*=Math.pow(.75,ft-nt),Re=Re.replace("?px ",ke())),we+=.25*xe*(ft-nt)}if(!0===ee.superscripts){var ht=Le.indexOf(g),Tt=Ne.indexOf(g),At=ht>-1?parseInt(Le[1+ht]):0,_t=Tt>-1?parseInt(Ne[1+Tt]):0;At!==_t&&(Re=Re.replace(ke(),"?px "),Te*=Math.pow(.75,_t-At),Re=Re.replace("?px ",ke())),we-=.25*xe*(_t-At)}if(!0===ee.bolds){var ot=Le.indexOf(c)>-1,it=Ne.indexOf(c)>-1;!ot&&it&&(Re=Pt?Re.replace("italic ","italic bold "):"bold "+Re),ot&&!it&&(Re=Re.replace("bold ",""))}if(!0===ee.italics){var Pt=Le.indexOf(d)>-1,jt=Ne.indexOf(d)>-1;!Pt&&jt&&(Re="italic "+Re),Pt&&!jt&&(Re=Re.replace("italic ",""))}V.font=Re}for(ce=0;ce<ve;++ce){var Pe=ye[ce]+"\n";for(pe=0,we=ce*xe,Te=ie,ge="",le=0;le<Pe.length;++le){var Fe=le+se<X.length?X[le+se]:X[X.length-1];$===Fe?ge+=Pe[le]:(Ie(),ge=Pe[le],void 0!==Fe&&(Se($,Fe),$=Fe))}Ie(),se+=Pe.length;var Be=0|Math.round(pe+2*Ce);be<Be&&(be=Be)}var me=be,Me=Oe+xe*ve;return r(V.getImageData(0,0,me,Me).data,[Me,me,4]).pick(-1,-1,0).transpose(1,0)}(O,z,I,R,j,Y),U,R)},p.exports.processPixels=P;var i=t(3711),r=t(9618),n=t(5878),a=t(332),s=t(2538),u=t(2095),f="b",c="b|",y="i",d="i|",m="sup",g="+",x="+1",v="sub",b="-",h="-1";function S(I,O,z,U){for(var R="<"+I+">",j="</"+I+">",Y=R.length,B=j.length,V=O[0]===g||O[0]===b,q=0,ie=-B;q>-1&&-1!==(q=z.indexOf(R,q))&&-1!==(ie=z.indexOf(j,q+Y))&&!(ie<=q);){for(var te=q;te<ie+B;++te)if(te<q+Y||te>=ie)U[te]=null,z=z.substr(0,te)+" "+z.substr(te+1);else if(null!==U[te]){var ee=U[te].indexOf(O[0]);-1===ee?U[te]+=O:V&&(U[te]=U[te].substr(0,ee+1)+(1+parseInt(U[te][ee+1]))+U[te].substr(ee+2))}var $=q+Y,J=z.substr($,ie-$).indexOf(R);q=-1!==J?J:ie+B}return U}function E(I,O,z,U){var R=function w(I,O){var z=i(I,128);return O?n(z.cells,z.positions,.25):{edges:z.cells,positions:z.positions}}(I,U),j=function(ce,le,pe){for(var we=le.textAlign||"start",Te=le.textBaseline||"alphabetic",ye=[1<<30,1<<30],ve=[0,0],xe=ce.length,Ce=0;Ce<xe;++Ce)for(var Oe=ce[Ce],be=0;be<2;++be)ye[be]=0|Math.min(ye[be],Oe[be]),ve[be]=0|Math.max(ve[be],Oe[be]);var ue=0;switch(we){case"center":ue=-.5*(ye[0]+ve[0]);break;case"right":case"end":ue=-ve[0];break;case"left":case"start":ue=-ye[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+we+"'")}var se=0;switch(Te){case"hanging":case"top":se=-ye[1];break;case"middle":se=-.5*(ye[1]+ve[1]);break;case"alphabetic":case"ideographic":se=-3*pe;break;case"bottom":se=-ve[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+Te+"'")}var ge=1/pe;return"lineHeight"in le?ge*=+le.lineHeight:"width"in le?ge=le.width/(ve[0]-ye[0]):"height"in le&&(ge=le.height/(ve[1]-ye[1])),ce.map(function(Ie){return[ge*(Ie[0]+ue),ge*(Ie[1]+se)]})}(R.positions,O,z),Y=R.edges,B="ccw"===O.orientation;if(a(j,Y),O.polygons||O.polygon||O.polyline){for(var V=u(Y,j),q=new Array(V.length),ie=0;ie<V.length;++ie){for(var te=V[ie],ee=new Array(te.length),$=0;$<te.length;++$){for(var J=te[$],X=new Array(J.length),ae=0;ae<J.length;++ae)X[ae]=j[J[ae]].slice();B&&X.reverse(),ee[$]=X}q[ie]=ee}return q}return O.triangles||O.triangulate||O.triangle?{cells:s(j,Y,{delaunay:!1,exterior:!1,interior:!0}),positions:j}:{edges:Y,positions:j}}function P(I,O,z){try{return E(I,O,z,!0)}catch{}try{return E(I,O,z,!1)}catch{}return O.polygons||O.polyline||O.polygon?[]:O.triangles||O.triangulate||O.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},1538:function(p){!function(){"use strict";if(typeof ses>"u"||!ses.ok||ses.ok()){typeof ses<"u"&&(ses.weakMapPermitHostObjects=v);var l=!1;if("function"==typeof WeakMap){var t=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var i=new t,r=Object.freeze({});if(i.set(r,1),1===i.get(r))return void(p.exports=WeakMap);l=!0}}var n=Object.getOwnPropertyNames,a=Object.defineProperty,s=Object.isExtensible,u="weakmap:",f=u+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var c=new ArrayBuffer(25),y=new Uint8Array(c);crypto.getRandomValues(y),f=u+"rand:"+Array.prototype.map.call(y,function(E){return(E%36).toString(36)}).join("")+"___"}if(a(Object,"getOwnPropertyNames",{value:function(E){return n(E).filter(b)}}),"getPropertyNames"in Object){var d=Object.getPropertyNames;a(Object,"getPropertyNames",{value:function(E){return d(E).filter(b)}})}!function(){var E=Object.freeze;a(Object,"freeze",{value:function(O){return h(O),E(O)}});var P=Object.seal;a(Object,"seal",{value:function(O){return h(O),P(O)}});var I=Object.preventExtensions;a(Object,"preventExtensions",{value:function(O){return h(O),I(O)}})}();var m=!1,g=0,x=function(){this instanceof x||w();var E=[],P=[],I=g++;return Object.create(x.prototype,{get___:{value:S(function(O,z){var U,R=h(O);return R?I in R?R[I]:z:(U=E.indexOf(O))>=0?P[U]:z})},has___:{value:S(function(O){var z=h(O);return z?I in z:E.indexOf(O)>=0})},set___:{value:S(function(O,z){var U,R=h(O);return R?R[I]=z:(U=E.indexOf(O))>=0?P[U]=z:(P[U=E.length]=z,E[U]=O),this})},delete___:{value:S(function(O){var z,U,R=h(O);return R?I in R&&delete R[I]:!((z=E.indexOf(O))<0||(U=E.length-1,E[z]=void 0,P[z]=P[U],E[z]=E[U],E.length=U,P.length=U,0))})}})};x.prototype=Object.create(Object.prototype,{get:{value:function(E,P){return this.get___(E,P)},writable:!0,configurable:!0},has:{value:function(E){return this.has___(E)},writable:!0,configurable:!0},set:{value:function(E,P){return this.set___(E,P)},writable:!0,configurable:!0},delete:{value:function(E){return this.delete___(E)},writable:!0,configurable:!0}}),"function"==typeof t?function(){function E(){this instanceof x||w();var P,I=new t,O=void 0,z=!1;return P=l?function(U,R){return I.set(U,R),I.has(U)||(O||(O=new x),O.set(U,R)),this}:function(U,R){if(z)try{I.set(U,R)}catch{O||(O=new x),O.set___(U,R)}else I.set(U,R);return this},Object.create(x.prototype,{get___:{value:S(function(U,R){return O?I.has(U)?I.get(U):O.get___(U,R):I.get(U,R)})},has___:{value:S(function(U){return I.has(U)||!!O&&O.has___(U)})},set___:{value:S(P)},delete___:{value:S(function(U){var R=!!I.delete(U);return O&&O.delete___(U)||R})},permitHostObjects___:{value:S(function(U){if(U!==v)throw new Error("bogus call to permitHostObjects___");z=!0})}})}l&&typeof Proxy<"u"&&(Proxy=void 0),E.prototype=x.prototype,p.exports=E,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),p.exports=x)}function v(E){E.permitHostObjects___&&E.permitHostObjects___(v)}function b(E){return!(E.substr(0,8)==u&&"___"===E.substr(E.length-3))}function h(E){if(E!==Object(E))throw new TypeError("Not an object: "+E);var P=E[f];if(P&&P.key===E)return P;if(s(E)){P={key:E};try{return a(E,f,{value:P,writable:!1,enumerable:!1,configurable:!1}),P}catch{return}}}function S(E){return E.prototype=null,Object.freeze(E)}function w(){m||typeof console>"u"||(m=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},236:function(p,l,t){var i=t(8284);p.exports=function(){var r={};return function(n){if(("object"!=typeof n||null===n)&&"function"!=typeof n)throw new Error("Weakmap-shim: Key must be object");var a=n.valueOf(r);return a&&a.identity===r?a:i(n,r)}}},8284:function(p){p.exports=function(l,t){var i={identity:t},r=l.valueOf;return Object.defineProperty(l,"valueOf",{value:function(n){return n!==t?r.apply(this,arguments):i},writable:!0}),i}},606:function(p,l,t){var i=t(236);p.exports=function(){var r=i();return{get:function(n,a){var s=r(n);return s.hasOwnProperty("value")?s.value:a},set:function(n,a){return r(n).value=a,this},has:function(n){return"value"in r(n)},delete:function(n){return delete r(n).value}}}},3349:function(p){"use strict";var l,t;p.exports=(l=function(){return function(l,t,i,r,n,a){var s=l[0],u=i[0],f=[0],c=u;r|=0;var y=0,d=u;for(y=0;y<s;++y){var m=t[r]-a,g=t[r+c]-a;m>=0!=g>=0&&n.push(f[0]+.5+.5*(m+g)/(m-g)),r+=d,++f[0]}}}.bind(void 0,{funcName:"zeroCrossings"}),t={},function(i,r,n){var a=i.dtype,s=i.order,u=[a,s.join()].join(),f=t[u];return f||(t[u]=f=l([a,s])),f(i.shape.slice(0),i.data,i.stride,0|i.offset,r,n)})},781:function(p,l,t){"use strict";p.exports=function(r,n){var a=[];return n=+n||0,i(r.hi(r.shape[0]-1),a,n),a};var i=t(3349)},7790:function(){}},o={};function T(p){var l=o[p];if(void 0!==l)return l.exports;var t=o[p]={id:p,loaded:!1,exports:{}};return k[p].call(t.exports,t,t.exports,T),t.loaded=!0,t.exports}T.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),T.nmd=function(p){return p.paths=[],p.children||(p.children=[]),p};var _=T(1964);ne.exports=_}()},33576:function(ne,F,e){"use strict";function k(ue){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(se){return se.__proto__||Object.getPrototypeOf(se)})(ue)}function o(ue){if(void 0===ue)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ue}function T(ue,se){return(T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ge,Ie){return ge.__proto__=Ie,ge})(ue,se)}function _(ue){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(se){return typeof se}:function(se){return se&&"function"==typeof Symbol&&se.constructor===Symbol&&se!==Symbol.prototype?"symbol":typeof se})(ue)}var p=e(59968),l=e(35984),t="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;F.Buffer=n,F.SlowBuffer=function(ue){return+ue!=ue&&(ue=0),n.alloc(+ue)},F.INSPECT_MAX_BYTES=50;var i=2147483647;function r(ue){if(ue>i)throw new RangeError('The value "'+ue+'" is invalid for option "size"');var se=new Uint8Array(ue);return Object.setPrototypeOf(se,n.prototype),se}function n(ue,se,ge){if("number"==typeof ue){if("string"==typeof se)throw new TypeError('The "string" argument must be of type string. Received type number');return u(ue)}return a(ue,se,ge)}function a(ue,se,ge){if("string"==typeof ue)return function(Se,Pe){if("string"==typeof Pe&&""!==Pe||(Pe="utf8"),!n.isEncoding(Pe))throw new TypeError("Unknown encoding: "+Pe);var Fe=0|d(Se,Pe),Be=r(Fe),me=Be.write(Se,Pe);return me!==Fe&&(Be=Be.slice(0,me)),Be}(ue,se);if(ArrayBuffer.isView(ue))return function(Se){if(ve(Se,Uint8Array)){var Pe=new Uint8Array(Se);return c(Pe.buffer,Pe.byteOffset,Pe.byteLength)}return f(Se)}(ue);if(null==ue)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+_(ue));if(ve(ue,ArrayBuffer)||ue&&ve(ue.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ve(ue,SharedArrayBuffer)||ue&&ve(ue.buffer,SharedArrayBuffer)))return c(ue,se,ge);if("number"==typeof ue)throw new TypeError('The "value" argument must not be of type number. Received type number');var Ie=ue.valueOf&&ue.valueOf();if(null!=Ie&&Ie!==ue)return n.from(Ie,se,ge);var ke=function(Se){if(n.isBuffer(Se)){var Pe=0|y(Se.length),Fe=r(Pe);return 0===Fe.length||Se.copy(Fe,0,0,Pe),Fe}return void 0!==Se.length?"number"!=typeof Se.length||xe(Se.length)?r(0):f(Se):"Buffer"===Se.type&&Array.isArray(Se.data)?f(Se.data):void 0}(ue);if(ke)return ke;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof ue[Symbol.toPrimitive])return n.from(ue[Symbol.toPrimitive]("string"),se,ge);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+_(ue))}function s(ue){if("number"!=typeof ue)throw new TypeError('"size" argument must be of type number');if(ue<0)throw new RangeError('The value "'+ue+'" is invalid for option "size"')}function u(ue){return s(ue),r(ue<0?0:0|y(ue))}function f(ue){for(var se=ue.length<0?0:0|y(ue.length),ge=r(se),Ie=0;Ie<se;Ie+=1)ge[Ie]=255&ue[Ie];return ge}function c(ue,se,ge){if(se<0||ue.byteLength<se)throw new RangeError('"offset" is outside of buffer bounds');if(ue.byteLength<se+(ge||0))throw new RangeError('"length" is outside of buffer bounds');var Ie;return Ie=void 0===se&&void 0===ge?new Uint8Array(ue):void 0===ge?new Uint8Array(ue,se):new Uint8Array(ue,se,ge),Object.setPrototypeOf(Ie,n.prototype),Ie}function y(ue){if(ue>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|ue}function d(ue,se){if(n.isBuffer(ue))return ue.length;if(ArrayBuffer.isView(ue)||ve(ue,ArrayBuffer))return ue.byteLength;if("string"!=typeof ue)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+_(ue));var ge=ue.length,Ie=arguments.length>2&&!0===arguments[2];if(!Ie&&0===ge)return 0;for(var ke=!1;;)switch(se){case"ascii":case"latin1":case"binary":return ge;case"utf8":case"utf-8":return we(ue).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ge;case"hex":return ge>>>1;case"base64":return Te(ue).length;default:if(ke)return Ie?-1:we(ue).length;se=(""+se).toLowerCase(),ke=!0}}function m(ue,se,ge){var Ie=!1;if((void 0===se||se<0)&&(se=0),se>this.length||((void 0===ge||ge>this.length)&&(ge=this.length),ge<=0)||(ge>>>=0)<=(se>>>=0))return"";for(ue||(ue="utf8");;)switch(ue){case"hex":return R(this,se,ge);case"utf8":case"utf-8":return I(this,se,ge);case"ascii":return z(this,se,ge);case"latin1":case"binary":return U(this,se,ge);case"base64":return P(this,se,ge);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,se,ge);default:if(Ie)throw new TypeError("Unknown encoding: "+ue);ue=(ue+"").toLowerCase(),Ie=!0}}function g(ue,se,ge){var Ie=ue[se];ue[se]=ue[ge],ue[ge]=Ie}function x(ue,se,ge,Ie,ke){if(0===ue.length)return-1;if("string"==typeof ge?(Ie=ge,ge=0):ge>2147483647?ge=2147483647:ge<-2147483648&&(ge=-2147483648),xe(ge=+ge)&&(ge=ke?0:ue.length-1),ge<0&&(ge=ue.length+ge),ge>=ue.length){if(ke)return-1;ge=ue.length-1}else if(ge<0){if(!ke)return-1;ge=0}if("string"==typeof se&&(se=n.from(se,Ie)),n.isBuffer(se))return 0===se.length?-1:v(ue,se,ge,Ie,ke);if("number"==typeof se)return se&=255,"function"==typeof Uint8Array.prototype.indexOf?ke?Uint8Array.prototype.indexOf.call(ue,se,ge):Uint8Array.prototype.lastIndexOf.call(ue,se,ge):v(ue,[se],ge,Ie,ke);throw new TypeError("val must be string, number or Buffer")}function v(ue,se,ge,Ie,ke){var Se,Pe=1,Fe=ue.length,Be=se.length;if(void 0!==Ie&&("ucs2"===(Ie=String(Ie).toLowerCase())||"ucs-2"===Ie||"utf16le"===Ie||"utf-16le"===Ie)){if(ue.length<2||se.length<2)return-1;Pe=2,Fe/=2,Be/=2,ge/=2}function me(Re,He){return 1===Pe?Re[He]:Re.readUInt16BE(He*Pe)}if(ke){var Me=-1;for(Se=ge;Se<Fe;Se++)if(me(ue,Se)===me(se,-1===Me?0:Se-Me)){if(-1===Me&&(Me=Se),Se-Me+1===Be)return Me*Pe}else-1!==Me&&(Se-=Se-Me),Me=-1}else for(ge+Be>Fe&&(ge=Fe-Be),Se=ge;Se>=0;Se--){for(var Le=!0,Ne=0;Ne<Be;Ne++)if(me(ue,Se+Ne)!==me(se,Ne)){Le=!1;break}if(Le)return Se}return-1}function b(ue,se,ge,Ie){ge=Number(ge)||0;var ke=ue.length-ge;Ie?(Ie=Number(Ie))>ke&&(Ie=ke):Ie=ke;var Se,Pe=se.length;for(Ie>Pe/2&&(Ie=Pe/2),Se=0;Se<Ie;++Se){var Fe=parseInt(se.substr(2*Se,2),16);if(xe(Fe))return Se;ue[ge+Se]=Fe}return Se}function h(ue,se,ge,Ie){return ye(we(se,ue.length-ge),ue,ge,Ie)}function S(ue,se,ge,Ie){return ye(function(ke){for(var Se=[],Pe=0;Pe<ke.length;++Pe)Se.push(255&ke.charCodeAt(Pe));return Se}(se),ue,ge,Ie)}function w(ue,se,ge,Ie){return ye(Te(se),ue,ge,Ie)}function E(ue,se,ge,Ie){return ye(function(ke,Se){for(var Pe,Fe,me=[],Me=0;Me<ke.length&&!((Se-=2)<0);++Me)Fe=(Pe=ke.charCodeAt(Me))>>8,me.push(Pe%256),me.push(Fe);return me}(se,ue.length-ge),ue,ge,Ie)}function P(ue,se,ge){return p.fromByteArray(0===se&&ge===ue.length?ue:ue.slice(se,ge))}function I(ue,se,ge){ge=Math.min(ue.length,ge);for(var Ie=[],ke=se;ke<ge;){var Se=ue[ke],Pe=null,Fe=Se>239?4:Se>223?3:Se>191?2:1;if(ke+Fe<=ge){var Be=void 0,me=void 0,Me=void 0,Le=void 0;switch(Fe){case 1:Se<128&&(Pe=Se);break;case 2:128==(192&(Be=ue[ke+1]))&&(Le=(31&Se)<<6|63&Be)>127&&(Pe=Le);break;case 3:me=ue[ke+2],128==(192&(Be=ue[ke+1]))&&128==(192&me)&&(Le=(15&Se)<<12|(63&Be)<<6|63&me)>2047&&(Le<55296||Le>57343)&&(Pe=Le);break;case 4:me=ue[ke+2],Me=ue[ke+3],128==(192&(Be=ue[ke+1]))&&128==(192&me)&&128==(192&Me)&&(Le=(15&Se)<<18|(63&Be)<<12|(63&me)<<6|63&Me)>65535&&Le<1114112&&(Pe=Le)}}null===Pe?(Pe=65533,Fe=1):Pe>65535&&(Ie.push((Pe-=65536)>>>10&1023|55296),Pe=56320|1023&Pe),Ie.push(Pe),ke+=Fe}return function(Ne){var Re=Ne.length;if(Re<=O)return String.fromCharCode.apply(String,Ne);for(var He="",Ze=0;Ze<Re;)He+=String.fromCharCode.apply(String,Ne.slice(Ze,Ze+=O));return He}(Ie)}F.kMaxLength=i,(n.TYPED_ARRAY_SUPPORT=function(){try{var ue=new Uint8Array(1),se={foo:function(){return 42}};return Object.setPrototypeOf(se,Uint8Array.prototype),Object.setPrototypeOf(ue,se),42===ue.foo()}catch{return!1}}())||typeof console>"u"||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.byteOffset}}),n.poolSize=8192,n.from=function(ue,se,ge){return a(ue,se,ge)},Object.setPrototypeOf(n.prototype,Uint8Array.prototype),Object.setPrototypeOf(n,Uint8Array),n.alloc=function(ue,se,ge){return ke=se,Se=ge,s(Ie=ue),Ie<=0?r(Ie):void 0!==ke?"string"==typeof Se?r(Ie).fill(ke,Se):r(Ie).fill(ke):r(Ie);var Ie,ke,Se},n.allocUnsafe=function(ue){return u(ue)},n.allocUnsafeSlow=function(ue){return u(ue)},n.isBuffer=function(ue){return null!=ue&&!0===ue._isBuffer&&ue!==n.prototype},n.compare=function(ue,se){if(ve(ue,Uint8Array)&&(ue=n.from(ue,ue.offset,ue.byteLength)),ve(se,Uint8Array)&&(se=n.from(se,se.offset,se.byteLength)),!n.isBuffer(ue)||!n.isBuffer(se))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ue===se)return 0;for(var ge=ue.length,Ie=se.length,ke=0,Se=Math.min(ge,Ie);ke<Se;++ke)if(ue[ke]!==se[ke]){ge=ue[ke],Ie=se[ke];break}return ge<Ie?-1:Ie<ge?1:0},n.isEncoding=function(ue){switch(String(ue).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(ue,se){if(!Array.isArray(ue))throw new TypeError('"list" argument must be an Array of Buffers');if(0===ue.length)return n.alloc(0);var ge;if(void 0===se)for(se=0,ge=0;ge<ue.length;++ge)se+=ue[ge].length;var Ie=n.allocUnsafe(se),ke=0;for(ge=0;ge<ue.length;++ge){var Se=ue[ge];if(ve(Se,Uint8Array))ke+Se.length>Ie.length?(n.isBuffer(Se)||(Se=n.from(Se)),Se.copy(Ie,ke)):Uint8Array.prototype.set.call(Ie,Se,ke);else{if(!n.isBuffer(Se))throw new TypeError('"list" argument must be an Array of Buffers');Se.copy(Ie,ke)}ke+=Se.length}return Ie},n.byteLength=d,n.prototype._isBuffer=!0,n.prototype.swap16=function(){var ue=this.length;if(ue%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var se=0;se<ue;se+=2)g(this,se,se+1);return this},n.prototype.swap32=function(){var ue=this.length;if(ue%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var se=0;se<ue;se+=4)g(this,se,se+3),g(this,se+1,se+2);return this},n.prototype.swap64=function(){var ue=this.length;if(ue%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var se=0;se<ue;se+=8)g(this,se,se+7),g(this,se+1,se+6),g(this,se+2,se+5),g(this,se+3,se+4);return this},n.prototype.toString=function(){var ue=this.length;return 0===ue?"":0===arguments.length?I(this,0,ue):m.apply(this,arguments)},n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=function(ue){if(!n.isBuffer(ue))throw new TypeError("Argument must be a Buffer");return this===ue||0===n.compare(this,ue)},n.prototype.inspect=function(){var ue="",se=F.INSPECT_MAX_BYTES;return ue=this.toString("hex",0,se).replace(/(.{2})/g,"$1 ").trim(),this.length>se&&(ue+=" ... "),"<Buffer "+ue+">"},t&&(n.prototype[t]=n.prototype.inspect),n.prototype.compare=function(ue,se,ge,Ie,ke){if(ve(ue,Uint8Array)&&(ue=n.from(ue,ue.offset,ue.byteLength)),!n.isBuffer(ue))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+_(ue));if(void 0===se&&(se=0),void 0===ge&&(ge=ue?ue.length:0),void 0===Ie&&(Ie=0),void 0===ke&&(ke=this.length),se<0||ge>ue.length||Ie<0||ke>this.length)throw new RangeError("out of range index");if(Ie>=ke&&se>=ge)return 0;if(Ie>=ke)return-1;if(se>=ge)return 1;if(this===ue)return 0;for(var Se=(ke>>>=0)-(Ie>>>=0),Pe=(ge>>>=0)-(se>>>=0),Fe=Math.min(Se,Pe),Be=this.slice(Ie,ke),me=ue.slice(se,ge),Me=0;Me<Fe;++Me)if(Be[Me]!==me[Me]){Se=Be[Me],Pe=me[Me];break}return Se<Pe?-1:Pe<Se?1:0},n.prototype.includes=function(ue,se,ge){return-1!==this.indexOf(ue,se,ge)},n.prototype.indexOf=function(ue,se,ge){return x(this,ue,se,ge,!0)},n.prototype.lastIndexOf=function(ue,se,ge){return x(this,ue,se,ge,!1)},n.prototype.write=function(ue,se,ge,Ie){if(void 0===se)Ie="utf8",ge=this.length,se=0;else if(void 0===ge&&"string"==typeof se)Ie=se,ge=this.length,se=0;else{if(!isFinite(se))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");se>>>=0,isFinite(ge)?(ge>>>=0,void 0===Ie&&(Ie="utf8")):(Ie=ge,ge=void 0)}var ke=this.length-se;if((void 0===ge||ge>ke)&&(ge=ke),ue.length>0&&(ge<0||se<0)||se>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ie||(Ie="utf8");for(var Se=!1;;)switch(Ie){case"hex":return b(this,ue,se,ge);case"utf8":case"utf-8":return h(this,ue,se,ge);case"ascii":case"latin1":case"binary":return S(this,ue,se,ge);case"base64":return w(this,ue,se,ge);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,ue,se,ge);default:if(Se)throw new TypeError("Unknown encoding: "+Ie);Ie=(""+Ie).toLowerCase(),Se=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function z(ue,se,ge){var Ie="";ge=Math.min(ue.length,ge);for(var ke=se;ke<ge;++ke)Ie+=String.fromCharCode(127&ue[ke]);return Ie}function U(ue,se,ge){var Ie="";ge=Math.min(ue.length,ge);for(var ke=se;ke<ge;++ke)Ie+=String.fromCharCode(ue[ke]);return Ie}function R(ue,se,ge){var Ie=ue.length;(!se||se<0)&&(se=0),(!ge||ge<0||ge>Ie)&&(ge=Ie);for(var ke="",Se=se;Se<ge;++Se)ke+=Ce[ue[Se]];return ke}function j(ue,se,ge){for(var Ie=ue.slice(se,ge),ke="",Se=0;Se<Ie.length-1;Se+=2)ke+=String.fromCharCode(Ie[Se]+256*Ie[Se+1]);return ke}function Y(ue,se,ge){if(ue%1!=0||ue<0)throw new RangeError("offset is not uint");if(ue+se>ge)throw new RangeError("Trying to access beyond buffer length")}function B(ue,se,ge,Ie,ke,Se){if(!n.isBuffer(ue))throw new TypeError('"buffer" argument must be a Buffer instance');if(se>ke||se<Se)throw new RangeError('"value" argument is out of bounds');if(ge+Ie>ue.length)throw new RangeError("Index out of range")}function V(ue,se,ge,Ie,ke){ae(se,Ie,ke,ue,ge,7);var Se=Number(se&BigInt(4294967295));ue[ge++]=Se,ue[ge++]=Se>>=8,ue[ge++]=Se>>=8,ue[ge++]=Se>>=8;var Pe=Number(se>>BigInt(32)&BigInt(4294967295));return ue[ge++]=Pe,ue[ge++]=Pe>>=8,ue[ge++]=Pe>>=8,ue[ge++]=Pe>>=8,ge}function q(ue,se,ge,Ie,ke){ae(se,Ie,ke,ue,ge,7);var Se=Number(se&BigInt(4294967295));ue[ge+7]=Se,ue[ge+6]=Se>>=8,ue[ge+5]=Se>>=8,ue[ge+4]=Se>>=8;var Pe=Number(se>>BigInt(32)&BigInt(4294967295));return ue[ge+3]=Pe,ue[ge+2]=Pe>>=8,ue[ge+1]=Pe>>=8,ue[ge]=Pe>>=8,ge+8}function ie(ue,se,ge,Ie,ke,Se){if(ge+Ie>ue.length)throw new RangeError("Index out of range");if(ge<0)throw new RangeError("Index out of range")}function te(ue,se,ge,Ie,ke){return se=+se,ge>>>=0,ke||ie(ue,0,ge,4),l.write(ue,se,ge,Ie,23,4),ge+4}function ee(ue,se,ge,Ie,ke){return se=+se,ge>>>=0,ke||ie(ue,0,ge,8),l.write(ue,se,ge,Ie,52,8),ge+8}n.prototype.slice=function(ue,se){var ge=this.length;(ue=~~ue)<0?(ue+=ge)<0&&(ue=0):ue>ge&&(ue=ge),(se=void 0===se?ge:~~se)<0?(se+=ge)<0&&(se=0):se>ge&&(se=ge),se<ue&&(se=ue);var Ie=this.subarray(ue,se);return Object.setPrototypeOf(Ie,n.prototype),Ie},n.prototype.readUintLE=n.prototype.readUIntLE=function(ue,se,ge){ue>>>=0,se>>>=0,ge||Y(ue,se,this.length);for(var Ie=this[ue],ke=1,Se=0;++Se<se&&(ke*=256);)Ie+=this[ue+Se]*ke;return Ie},n.prototype.readUintBE=n.prototype.readUIntBE=function(ue,se,ge){ue>>>=0,se>>>=0,ge||Y(ue,se,this.length);for(var Ie=this[ue+--se],ke=1;se>0&&(ke*=256);)Ie+=this[ue+--se]*ke;return Ie},n.prototype.readUint8=n.prototype.readUInt8=function(ue,se){return ue>>>=0,se||Y(ue,1,this.length),this[ue]},n.prototype.readUint16LE=n.prototype.readUInt16LE=function(ue,se){return ue>>>=0,se||Y(ue,2,this.length),this[ue]|this[ue+1]<<8},n.prototype.readUint16BE=n.prototype.readUInt16BE=function(ue,se){return ue>>>=0,se||Y(ue,2,this.length),this[ue]<<8|this[ue+1]},n.prototype.readUint32LE=n.prototype.readUInt32LE=function(ue,se){return ue>>>=0,se||Y(ue,4,this.length),(this[ue]|this[ue+1]<<8|this[ue+2]<<16)+16777216*this[ue+3]},n.prototype.readUint32BE=n.prototype.readUInt32BE=function(ue,se){return ue>>>=0,se||Y(ue,4,this.length),16777216*this[ue]+(this[ue+1]<<16|this[ue+2]<<8|this[ue+3])},n.prototype.readBigUInt64LE=Oe(function(ue){ce(ue>>>=0,"offset");var se=this[ue],ge=this[ue+7];void 0!==se&&void 0!==ge||le(ue,this.length-8);var Ie=se+this[++ue]*Math.pow(2,8)+this[++ue]*Math.pow(2,16)+this[++ue]*Math.pow(2,24),ke=this[++ue]+this[++ue]*Math.pow(2,8)+this[++ue]*Math.pow(2,16)+ge*Math.pow(2,24);return BigInt(Ie)+(BigInt(ke)<<BigInt(32))}),n.prototype.readBigUInt64BE=Oe(function(ue){ce(ue>>>=0,"offset");var se=this[ue],ge=this[ue+7];void 0!==se&&void 0!==ge||le(ue,this.length-8);var Ie=se*Math.pow(2,24)+this[++ue]*Math.pow(2,16)+this[++ue]*Math.pow(2,8)+this[++ue],ke=this[++ue]*Math.pow(2,24)+this[++ue]*Math.pow(2,16)+this[++ue]*Math.pow(2,8)+ge;return(BigInt(Ie)<<BigInt(32))+BigInt(ke)}),n.prototype.readIntLE=function(ue,se,ge){ue>>>=0,se>>>=0,ge||Y(ue,se,this.length);for(var Ie=this[ue],ke=1,Se=0;++Se<se&&(ke*=256);)Ie+=this[ue+Se]*ke;return Ie>=(ke*=128)&&(Ie-=Math.pow(2,8*se)),Ie},n.prototype.readIntBE=function(ue,se,ge){ue>>>=0,se>>>=0,ge||Y(ue,se,this.length);for(var Ie=se,ke=1,Se=this[ue+--Ie];Ie>0&&(ke*=256);)Se+=this[ue+--Ie]*ke;return Se>=(ke*=128)&&(Se-=Math.pow(2,8*se)),Se},n.prototype.readInt8=function(ue,se){return ue>>>=0,se||Y(ue,1,this.length),128&this[ue]?-1*(255-this[ue]+1):this[ue]},n.prototype.readInt16LE=function(ue,se){ue>>>=0,se||Y(ue,2,this.length);var ge=this[ue]|this[ue+1]<<8;return 32768&ge?4294901760|ge:ge},n.prototype.readInt16BE=function(ue,se){ue>>>=0,se||Y(ue,2,this.length);var ge=this[ue+1]|this[ue]<<8;return 32768&ge?4294901760|ge:ge},n.prototype.readInt32LE=function(ue,se){return ue>>>=0,se||Y(ue,4,this.length),this[ue]|this[ue+1]<<8|this[ue+2]<<16|this[ue+3]<<24},n.prototype.readInt32BE=function(ue,se){return ue>>>=0,se||Y(ue,4,this.length),this[ue]<<24|this[ue+1]<<16|this[ue+2]<<8|this[ue+3]},n.prototype.readBigInt64LE=Oe(function(ue){ce(ue>>>=0,"offset");var se=this[ue],ge=this[ue+7];void 0!==se&&void 0!==ge||le(ue,this.length-8);var Ie=this[ue+4]+this[ue+5]*Math.pow(2,8)+this[ue+6]*Math.pow(2,16)+(ge<<24);return(BigInt(Ie)<<BigInt(32))+BigInt(se+this[++ue]*Math.pow(2,8)+this[++ue]*Math.pow(2,16)+this[++ue]*Math.pow(2,24))}),n.prototype.readBigInt64BE=Oe(function(ue){ce(ue>>>=0,"offset");var se=this[ue],ge=this[ue+7];void 0!==se&&void 0!==ge||le(ue,this.length-8);var Ie=(se<<24)+this[++ue]*Math.pow(2,16)+this[++ue]*Math.pow(2,8)+this[++ue];return(BigInt(Ie)<<BigInt(32))+BigInt(this[++ue]*Math.pow(2,24)+this[++ue]*Math.pow(2,16)+this[++ue]*Math.pow(2,8)+ge)}),n.prototype.readFloatLE=function(ue,se){return ue>>>=0,se||Y(ue,4,this.length),l.read(this,ue,!0,23,4)},n.prototype.readFloatBE=function(ue,se){return ue>>>=0,se||Y(ue,4,this.length),l.read(this,ue,!1,23,4)},n.prototype.readDoubleLE=function(ue,se){return ue>>>=0,se||Y(ue,8,this.length),l.read(this,ue,!0,52,8)},n.prototype.readDoubleBE=function(ue,se){return ue>>>=0,se||Y(ue,8,this.length),l.read(this,ue,!1,52,8)},n.prototype.writeUintLE=n.prototype.writeUIntLE=function(ue,se,ge,Ie){ue=+ue,se>>>=0,ge>>>=0,Ie||B(this,ue,se,ge,Math.pow(2,8*ge)-1,0);var ke=1,Se=0;for(this[se]=255&ue;++Se<ge&&(ke*=256);)this[se+Se]=ue/ke&255;return se+ge},n.prototype.writeUintBE=n.prototype.writeUIntBE=function(ue,se,ge,Ie){ue=+ue,se>>>=0,ge>>>=0,Ie||B(this,ue,se,ge,Math.pow(2,8*ge)-1,0);var ke=ge-1,Se=1;for(this[se+ke]=255&ue;--ke>=0&&(Se*=256);)this[se+ke]=ue/Se&255;return se+ge},n.prototype.writeUint8=n.prototype.writeUInt8=function(ue,se,ge){return ue=+ue,se>>>=0,ge||B(this,ue,se,1,255,0),this[se]=255&ue,se+1},n.prototype.writeUint16LE=n.prototype.writeUInt16LE=function(ue,se,ge){return ue=+ue,se>>>=0,ge||B(this,ue,se,2,65535,0),this[se]=255&ue,this[se+1]=ue>>>8,se+2},n.prototype.writeUint16BE=n.prototype.writeUInt16BE=function(ue,se,ge){return ue=+ue,se>>>=0,ge||B(this,ue,se,2,65535,0),this[se]=ue>>>8,this[se+1]=255&ue,se+2},n.prototype.writeUint32LE=n.prototype.writeUInt32LE=function(ue,se,ge){return ue=+ue,se>>>=0,ge||B(this,ue,se,4,4294967295,0),this[se+3]=ue>>>24,this[se+2]=ue>>>16,this[se+1]=ue>>>8,this[se]=255&ue,se+4},n.prototype.writeUint32BE=n.prototype.writeUInt32BE=function(ue,se,ge){return ue=+ue,se>>>=0,ge||B(this,ue,se,4,4294967295,0),this[se]=ue>>>24,this[se+1]=ue>>>16,this[se+2]=ue>>>8,this[se+3]=255&ue,se+4},n.prototype.writeBigUInt64LE=Oe(function(ue){return V(this,ue,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),n.prototype.writeBigUInt64BE=Oe(function(ue){return q(this,ue,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),n.prototype.writeIntLE=function(ue,se,ge,Ie){if(ue=+ue,se>>>=0,!Ie){var ke=Math.pow(2,8*ge-1);B(this,ue,se,ge,ke-1,-ke)}var Se=0,Pe=1,Fe=0;for(this[se]=255&ue;++Se<ge&&(Pe*=256);)ue<0&&0===Fe&&0!==this[se+Se-1]&&(Fe=1),this[se+Se]=(ue/Pe>>0)-Fe&255;return se+ge},n.prototype.writeIntBE=function(ue,se,ge,Ie){if(ue=+ue,se>>>=0,!Ie){var ke=Math.pow(2,8*ge-1);B(this,ue,se,ge,ke-1,-ke)}var Se=ge-1,Pe=1,Fe=0;for(this[se+Se]=255&ue;--Se>=0&&(Pe*=256);)ue<0&&0===Fe&&0!==this[se+Se+1]&&(Fe=1),this[se+Se]=(ue/Pe>>0)-Fe&255;return se+ge},n.prototype.writeInt8=function(ue,se,ge){return ue=+ue,se>>>=0,ge||B(this,ue,se,1,127,-128),ue<0&&(ue=255+ue+1),this[se]=255&ue,se+1},n.prototype.writeInt16LE=function(ue,se,ge){return ue=+ue,se>>>=0,ge||B(this,ue,se,2,32767,-32768),this[se]=255&ue,this[se+1]=ue>>>8,se+2},n.prototype.writeInt16BE=function(ue,se,ge){return ue=+ue,se>>>=0,ge||B(this,ue,se,2,32767,-32768),this[se]=ue>>>8,this[se+1]=255&ue,se+2},n.prototype.writeInt32LE=function(ue,se,ge){return ue=+ue,se>>>=0,ge||B(this,ue,se,4,2147483647,-2147483648),this[se]=255&ue,this[se+1]=ue>>>8,this[se+2]=ue>>>16,this[se+3]=ue>>>24,se+4},n.prototype.writeInt32BE=function(ue,se,ge){return ue=+ue,se>>>=0,ge||B(this,ue,se,4,2147483647,-2147483648),ue<0&&(ue=4294967295+ue+1),this[se]=ue>>>24,this[se+1]=ue>>>16,this[se+2]=ue>>>8,this[se+3]=255&ue,se+4},n.prototype.writeBigInt64LE=Oe(function(ue){return V(this,ue,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),n.prototype.writeBigInt64BE=Oe(function(ue){return q(this,ue,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),n.prototype.writeFloatLE=function(ue,se,ge){return te(this,ue,se,!0,ge)},n.prototype.writeFloatBE=function(ue,se,ge){return te(this,ue,se,!1,ge)},n.prototype.writeDoubleLE=function(ue,se,ge){return ee(this,ue,se,!0,ge)},n.prototype.writeDoubleBE=function(ue,se,ge){return ee(this,ue,se,!1,ge)},n.prototype.copy=function(ue,se,ge,Ie){if(!n.isBuffer(ue))throw new TypeError("argument should be a Buffer");if(ge||(ge=0),Ie||0===Ie||(Ie=this.length),se>=ue.length&&(se=ue.length),se||(se=0),Ie>0&&Ie<ge&&(Ie=ge),Ie===ge||0===ue.length||0===this.length)return 0;if(se<0)throw new RangeError("targetStart out of bounds");if(ge<0||ge>=this.length)throw new RangeError("Index out of range");if(Ie<0)throw new RangeError("sourceEnd out of bounds");Ie>this.length&&(Ie=this.length),ue.length-se<Ie-ge&&(Ie=ue.length-se+ge);var ke=Ie-ge;return this===ue&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(se,ge,Ie):Uint8Array.prototype.set.call(ue,this.subarray(ge,Ie),se),ke},n.prototype.fill=function(ue,se,ge,Ie){if("string"==typeof ue){if("string"==typeof se?(Ie=se,se=0,ge=this.length):"string"==typeof ge&&(Ie=ge,ge=this.length),void 0!==Ie&&"string"!=typeof Ie)throw new TypeError("encoding must be a string");if("string"==typeof Ie&&!n.isEncoding(Ie))throw new TypeError("Unknown encoding: "+Ie);if(1===ue.length){var ke=ue.charCodeAt(0);("utf8"===Ie&&ke<128||"latin1"===Ie)&&(ue=ke)}}else"number"==typeof ue?ue&=255:"boolean"==typeof ue&&(ue=Number(ue));if(se<0||this.length<se||this.length<ge)throw new RangeError("Out of range index");if(ge<=se)return this;var Se;if(se>>>=0,ge=void 0===ge?this.length:ge>>>0,ue||(ue=0),"number"==typeof ue)for(Se=se;Se<ge;++Se)this[Se]=ue;else{var Pe=n.isBuffer(ue)?ue:n.from(ue,Ie),Fe=Pe.length;if(0===Fe)throw new TypeError('The value "'+ue+'" is invalid for argument "value"');for(Se=0;Se<ge-se;++Se)this[Se+se]=Pe[Se%Fe]}return this};var $={};function J(ue,se,ge){$[ue]=function(Ie){function ke(){var Fe,me;return function(Be,me){if(!(Be instanceof me))throw new TypeError("Cannot call a class as a function")}(this,ke),this,me=k(me=ke),Fe=function(Le,Ne){if(Ne&&("object"===_(Ne)||"function"==typeof Ne))return Ne;if(void 0!==Ne)throw new TypeError("Derived constructors may only return object or undefined");return o(Le)}(this,function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{return!1}}()?Reflect.construct(me,[],k(this).constructor):me.apply(this,undefined)),Object.defineProperty(o(Fe),"message",{value:se.apply(o(Fe),arguments),writable:!0,configurable:!0}),Fe.name="".concat(Fe.name," [").concat(ue,"]"),delete Fe.name,Fe}var Se,Pe;return function(Fe,Be){if("function"!=typeof Be&&null!==Be)throw new TypeError("Super expression must either be null or a function");Fe.prototype=Object.create(Be&&Be.prototype,{constructor:{value:Fe,writable:!0,configurable:!0}}),Object.defineProperty(Fe,"prototype",{writable:!1}),Be&&T(Fe,Be)}(ke,Ie),Se=ke,(Pe=[{key:"code",get:function(){return ue},set:function(Fe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Fe,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(ue,"]: ").concat(this.message)}}])&&function M(ue,se){for(var ge=0;ge<se.length;ge++){var Ie=se[ge];Ie.enumerable=Ie.enumerable||!1,Ie.configurable=!0,"value"in Ie&&(Ie.writable=!0),Object.defineProperty(ue,(ke=function(Se,Pe){if("object"!==_(Se)||null===Se)return Se;var Fe=Se[Symbol.toPrimitive];if(void 0!==Fe){var Be=Fe.call(Se,"string");if("object"!==_(Be))return Be;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Se)}(Ie.key),"symbol"===_(ke)?ke:String(ke)),Ie)}var ke}(Se.prototype,Pe),Object.defineProperty(Se,"prototype",{writable:!1}),ke}(ge)}function X(ue){for(var se="",ge=ue.length,Ie="-"===ue[0]?1:0;ge>=Ie+4;ge-=3)se="_".concat(ue.slice(ge-3,ge)).concat(se);return"".concat(ue.slice(0,ge)).concat(se)}function ae(ue,se,ge,Ie,ke,Se){if(ue>ge||ue<se){var Pe,Fe="bigint"==typeof se?"n":"";throw Pe=Se>3?0===se||se===BigInt(0)?">= 0".concat(Fe," and < 2").concat(Fe," ** ").concat(8*(Se+1)).concat(Fe):">= -(2".concat(Fe," ** ").concat(8*(Se+1)-1).concat(Fe,") and < 2 ** ")+"".concat(8*(Se+1)-1).concat(Fe):">= ".concat(se).concat(Fe," and <= ").concat(ge).concat(Fe),new $.ERR_OUT_OF_RANGE("value",Pe,ue)}var Be,me,Me;Be=Ie,Me=Se,ce(me=ke,"offset"),void 0!==Be[me]&&void 0!==Be[me+Me]||le(me,Be.length-(Me+1))}function ce(ue,se){if("number"!=typeof ue)throw new $.ERR_INVALID_ARG_TYPE(se,"number",ue)}function le(ue,se,ge){throw Math.floor(ue)!==ue?(ce(ue,ge),new $.ERR_OUT_OF_RANGE(ge||"offset","an integer",ue)):se<0?new $.ERR_BUFFER_OUT_OF_BOUNDS:new $.ERR_OUT_OF_RANGE(ge||"offset",">= ".concat(ge?1:0," and <= ").concat(se),ue)}J("ERR_BUFFER_OUT_OF_BOUNDS",function(ue){return ue?"".concat(ue," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),J("ERR_INVALID_ARG_TYPE",function(ue,se){return'The "'.concat(ue,'" argument must be of type number. Received type ').concat(_(se))},TypeError),J("ERR_OUT_OF_RANGE",function(ue,se,ge){var Ie='The value of "'.concat(ue,'" is out of range.'),ke=ge;return Number.isInteger(ge)&&Math.abs(ge)>Math.pow(2,32)?ke=X(String(ge)):"bigint"==typeof ge&&(ke=String(ge),(ge>Math.pow(BigInt(2),BigInt(32))||ge<-Math.pow(BigInt(2),BigInt(32)))&&(ke=X(ke)),ke+="n"),Ie+" It must be ".concat(se,". Received ").concat(ke)},RangeError);var pe=/[^+/0-9A-Za-z-_]/g;function we(ue,se){var ge;se=se||1/0;for(var Ie=ue.length,ke=null,Se=[],Pe=0;Pe<Ie;++Pe){if((ge=ue.charCodeAt(Pe))>55295&&ge<57344){if(!ke){if(ge>56319){(se-=3)>-1&&Se.push(239,191,189);continue}if(Pe+1===Ie){(se-=3)>-1&&Se.push(239,191,189);continue}ke=ge;continue}if(ge<56320){(se-=3)>-1&&Se.push(239,191,189),ke=ge;continue}ge=65536+(ke-55296<<10|ge-56320)}else ke&&(se-=3)>-1&&Se.push(239,191,189);if(ke=null,ge<128){if((se-=1)<0)break;Se.push(ge)}else if(ge<2048){if((se-=2)<0)break;Se.push(ge>>6|192,63&ge|128)}else if(ge<65536){if((se-=3)<0)break;Se.push(ge>>12|224,ge>>6&63|128,63&ge|128)}else{if(!(ge<1114112))throw new Error("Invalid code point");if((se-=4)<0)break;Se.push(ge>>18|240,ge>>12&63|128,ge>>6&63|128,63&ge|128)}}return Se}function Te(ue){return p.toByteArray(function(se){if((se=(se=se.split("=")[0]).trim().replace(pe,"")).length<2)return"";for(;se.length%4!=0;)se+="=";return se}(ue))}function ye(ue,se,ge,Ie){var ke;for(ke=0;ke<Ie&&!(ke+ge>=se.length||ke>=ue.length);++ke)se[ke+ge]=ue[ke];return ke}function ve(ue,se){return ue instanceof se||null!=ue&&null!=ue.constructor&&null!=ue.constructor.name&&ue.constructor.name===se.name}function xe(ue){return ue!=ue}var Ce=function(){for(var ue="0123456789abcdef",se=new Array(256),ge=0;ge<16;++ge)for(var Ie=16*ge,ke=0;ke<16;++ke)se[Ie+ke]=ue[ge]+ue[ke];return se}();function Oe(ue){return typeof BigInt>"u"?be:ue}function be(){throw new Error("BigInt not supported")}},25928:function(ne){"use strict";ne.exports=k,ne.exports.isMobile=k,ne.exports.default=k;var F=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,e=/CrOS/,M=/android|ipad|playbook|silk/i;function k(o){o||(o={});var T=o.ua;if(T||typeof navigator>"u"||(T=navigator.userAgent),T&&T.headers&&"string"==typeof T.headers["user-agent"]&&(T=T.headers["user-agent"]),"string"!=typeof T)return!1;var _=F.test(T)&&!e.test(T)||!!o.tablet&&M.test(T);return!_&&o.tablet&&o.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==T.indexOf("Macintosh")&&-1!==T.indexOf("Safari")&&(_=!0),_}},48932:function(ne,F,e){"use strict";e.r(F),e.d(F,{sankeyCenter:function(){return r},sankeyCircular:function(){return P},sankeyJustify:function(){return i},sankeyLeft:function(){return l},sankeyRight:function(){return t}});var M=e(84706),k=e(34712),o=e(10132),T=e(6688),_=e.n(T);function p(ye){return ye.target.depth}function l(ye){return ye.depth}function t(ye,ve){return ve-1-ye.height}function i(ye,ve){return ye.sourceLinks.length?ye.depth:ve-1}function r(ye){return ye.targetLinks.length?ye.depth:ye.sourceLinks.length?(0,M.SY)(ye.sourceLinks,p)-1:0}function n(ye){return function(){return ye}}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ye){return typeof ye}:function(ye){return ye&&"function"==typeof Symbol&&ye.constructor===Symbol&&ye!==Symbol.prototype?"symbol":typeof ye};function s(ye,ve){return f(ye.source,ve.source)||ye.index-ve.index}function u(ye,ve){return f(ye.target,ve.target)||ye.index-ve.index}function f(ye,ve){return ye.partOfCycle===ve.partOfCycle?ye.y0-ve.y0:"top"===ye.circularLinkType||"bottom"===ve.circularLinkType?-1:1}function c(ye){return ye.value}function y(ye){return(ye.y0+ye.y1)/2}function d(ye){return y(ye.source)}function m(ye){return y(ye.target)}function g(ye){return ye.index}function x(ye){return ye.nodes}function v(ye){return ye.links}function b(ye,ve){var xe=ye.get(ve);if(!xe)throw new Error("missing: "+ve);return xe}function h(ye,ve){return ve(ye)}var S=25,w=10,E=.3;function P(){var ye,ve,xe=0,Ce=0,Oe=1,be=1,ue=24,se=g,ge=i,Ie=x,ke=v,Se=32,Pe=2,Fe=null;function Be(){var Me={nodes:Ie.apply(null,arguments),links:ke.apply(null,arguments)};(function(Ne){Ne.nodes.forEach(function(He,Ze){He.index=Ze,He.sourceLinks=[],He.targetLinks=[]});var Re=(0,k.kH)(Ne.nodes,se);Ne.links.forEach(function(He,Ze){He.index=Ze;var nt=He.source,ft=He.target;"object"!==(void 0===nt?"undefined":a(nt))&&(nt=He.source=b(Re,nt)),"object"!==(void 0===ft?"undefined":a(ft))&&(ft=He.target=b(Re,ft)),nt.sourceLinks.push(He),ft.targetLinks.push(He)})})(Me),function(Ne,Re,He){var Ze=0;if(null===He){for(var nt=[],ft=0;ft<Ne.links.length;ft++){var ht=Ne.links[ft],Tt=ht.source.index,At=ht.target.index;nt[Tt]||(nt[Tt]=[]),nt[At]||(nt[At]=[]),-1===nt[Tt].indexOf(At)&&nt[Tt].push(At)}var _t=_()(nt);_t.sort(function(Pt,jt){return Pt.length-jt.length});var ot={};for(ft=0;ft<_t.length;ft++){var it=_t[ft].slice(-2);ot[it[0]]||(ot[it[0]]={}),ot[it[0]][it[1]]=!0}Ne.links.forEach(function(Pt){var jt=Pt.target.index,Ut=Pt.source.index;jt===Ut||ot[Ut]&&ot[Ut][jt]?(Pt.circular=!0,Pt.circularLinkID=Ze,Ze+=1):Pt.circular=!1})}else Ne.links.forEach(function(Pt){Pt.source[He]<Pt.target[He]?Pt.circular=!1:(Pt.circular=!0,Pt.circularLinkID=Ze,Ze+=1)})}(Me,0,Fe),Me.nodes.forEach(function(Re){Re.partOfCycle=!1,Re.value=Math.max((0,M.oh)(Re.sourceLinks,c),(0,M.oh)(Re.targetLinks,c)),Re.sourceLinks.forEach(function(He){He.circular&&(Re.partOfCycle=!0,Re.circularLinkType=He.circularLinkType)}),Re.targetLinks.forEach(function(He){He.circular&&(Re.partOfCycle=!0,Re.circularLinkType=He.circularLinkType)})}),function(Ne){var Re,He,Ze;for(Re=Ne.nodes,He=[],Ze=0;Re.length;++Ze,Re=He,He=[])Re.forEach(function(nt){nt.depth=Ze,nt.sourceLinks.forEach(function(ft){He.indexOf(ft.target)<0&&!ft.circular&&He.push(ft.target)})});for(Re=Ne.nodes,He=[],Ze=0;Re.length;++Ze,Re=He,He=[])Re.forEach(function(nt){nt.height=Ze,nt.targetLinks.forEach(function(ft){He.indexOf(ft.source)<0&&!ft.circular&&He.push(ft.source)})});Ne.nodes.forEach(function(nt){nt.column=Math.floor(ge.call(null,nt,Ze))})}(Me),I(Me,se),function(Ne,Re,He){var Ze=(0,k.UJ)().key(function(At){return At.column}).sortKeys(M.XE).entries(Ne.nodes).map(function(At){return At.values});(function(At){if(ve){var _t=1/0;Ze.forEach(function(jt){var Ut=be*ve/(jt.length+1);_t=Ut<_t?Ut:_t}),ye=_t}var ot=(0,M.SY)(Ze,function(jt){return(be-Ce-(jt.length-1)*ye)/(0,M.oh)(jt,c)});ot*=E,Ne.links.forEach(function(jt){jt.width=jt.value*ot});var jt,Ut,Rt,Je,et,qe,it=(Ut=0,Rt=0,Je=0,et=0,qe=(0,M.kv)((jt=Ne).nodes,function($e){return $e.column}),jt.links.forEach(function($e){$e.circular&&("top"==$e.circularLinkType?Ut+=$e.width:Rt+=$e.width,0==$e.target.column&&(et+=$e.width),$e.source.column==qe&&(Je+=$e.width))}),{top:Ut=Ut>0?Ut+S+w:Ut,bottom:Rt=Rt>0?Rt+S+w:Rt,left:et=et>0?et+S+w:et,right:Je=Je>0?Je+S+w:Je}),Pt=function(jt,Ut){var Rt=(0,M.kv)(jt.nodes,function(pt){return pt.column}),Je=Oe-xe,et=be-Ce,qe=Je/(Je+Ut.right+Ut.left),$e=et/(et+Ut.top+Ut.bottom);return xe=xe*qe+Ut.left,Oe=0==Ut.right?Oe:Oe*qe,Ce=Ce*$e+Ut.top,be*=$e,jt.nodes.forEach(function(pt){pt.x0=xe+pt.column*((Oe-xe-ue)/Rt),pt.x1=pt.x0+ue}),$e}(Ne,it);ot*=Pt,Ne.links.forEach(function(jt){jt.width=jt.value*ot}),Ze.forEach(function(jt){var Ut=jt.length;jt.forEach(function(Rt,Je){Rt.depth==Ze.length-1&&1==Ut||0==Rt.depth&&1==Ut?(Rt.y0=be/2-Rt.value*ot,Rt.y1=Rt.y0+Rt.value*ot):Rt.partOfCycle?0==z(Rt,At)?(Rt.y0=be/2+Je,Rt.y1=Rt.y0+Rt.value*ot):"top"==Rt.circularLinkType?(Rt.y0=Ce+Je,Rt.y1=Rt.y0+Rt.value*ot):(Rt.y0=be-Rt.value*ot-Je,Rt.y1=Rt.y0+Rt.value*ot):0==it.top||0==it.bottom?(Rt.y0=(be-Ce)/Ut*Je,Rt.y1=Rt.y0+Rt.value*ot):(Rt.y0=(be-Ce)/2-Ut/2+Je,Rt.y1=Rt.y0+Rt.value*ot)})})})(He),Tt();for(var nt=1,ft=Re;ft>0;--ft)ht(nt*=.99,He),Tt();function ht(At,_t){var ot=Ze.length;Ze.forEach(function(it){var Pt=it.length,jt=it[0].depth;it.forEach(function(Ut){var Rt;if((Ut.sourceLinks.length||Ut.targetLinks.length)&&!(Ut.partOfCycle&&z(Ut,_t)>0))if(0==jt&&1==Pt)Ut.y0=be/2-(Rt=Ut.y1-Ut.y0)/2,Ut.y1=be/2+Rt/2;else if(jt==ot-1&&1==Pt)Ut.y0=be/2-(Rt=Ut.y1-Ut.y0)/2,Ut.y1=be/2+Rt/2;else{var Je=(0,M.mo)(Ut.sourceLinks,m),et=(0,M.mo)(Ut.targetLinks,d),qe=((Je&&et?(Je+et)/2:Je||et)-y(Ut))*At;Ut.y0+=qe,Ut.y1+=qe}})})}function Tt(){Ze.forEach(function(At){var _t,ot,it,Pt=Ce,jt=At.length;for(At.sort(f),it=0;it<jt;++it)(ot=Pt-(_t=At[it]).y0)>0&&(_t.y0+=ot,_t.y1+=ot),Pt=_t.y1+ye;if((ot=Pt-ye-be)>0)for(Pt=_t.y0-=ot,_t.y1-=ot,it=jt-2;it>=0;--it)(ot=(_t=At[it]).y1+ye-Pt)>0&&(_t.y0-=ot,_t.y1-=ot),Pt=_t.y0})}}(Me,Se,se),me(Me);for(var Le=0;Le<4;Le++)ce(Me,be,se),le(Me,0,se),X(Me,Ce,be,se),ce(Me,be,se),le(Me,0,se);return function(Ne,Re,He){var Ze=Ne.nodes,nt=Ne.links,ft=!1,ht=!1;if(nt.forEach(function(_t){"top"==_t.circularLinkType?ft=!0:"bottom"==_t.circularLinkType&&(ht=!0)}),0==ft||0==ht){var Tt=(0,M.SY)(Ze,function(_t){return _t.y0}),At=(He-Re)/((0,M.kv)(Ze,function(_t){return _t.y1})-Tt);Ze.forEach(function(_t){var ot=(_t.y1-_t.y0)*At;_t.y0=(_t.y0-Tt)*At,_t.y1=_t.y0+ot}),nt.forEach(function(_t){_t.y0=(_t.y0-Tt)*At,_t.y1=(_t.y1-Tt)*At,_t.width=_t.width*At})}}(Me,Ce,be),j(Me,Pe,be,se),Me}function me(Me){Me.nodes.forEach(function(Le){Le.sourceLinks.sort(u),Le.targetLinks.sort(s)}),Me.nodes.forEach(function(Le){var Ne=Le.y0,Re=Ne,He=Le.y1,Ze=He;Le.sourceLinks.forEach(function(nt){nt.circular?(nt.y0=He-nt.width/2,He-=nt.width):(nt.y0=Ne+nt.width/2,Ne+=nt.width)}),Le.targetLinks.forEach(function(nt){nt.circular?(nt.y1=Ze-nt.width/2,Ze-=nt.width):(nt.y1=Re+nt.width/2,Re+=nt.width)})})}return Be.nodeId=function(Me){return arguments.length?(se="function"==typeof Me?Me:n(Me),Be):se},Be.nodeAlign=function(Me){return arguments.length?(ge="function"==typeof Me?Me:n(Me),Be):ge},Be.nodeWidth=function(Me){return arguments.length?(ue=+Me,Be):ue},Be.nodePadding=function(Me){return arguments.length?(ye=+Me,Be):ye},Be.nodes=function(Me){return arguments.length?(Ie="function"==typeof Me?Me:n(Me),Be):Ie},Be.links=function(Me){return arguments.length?(ke="function"==typeof Me?Me:n(Me),Be):ke},Be.size=function(Me){return arguments.length?(xe=Ce=0,Oe=+Me[0],be=+Me[1],Be):[Oe-xe,be-Ce]},Be.extent=function(Me){return arguments.length?(xe=+Me[0][0],Oe=+Me[1][0],Ce=+Me[0][1],be=+Me[1][1],Be):[[xe,Ce],[Oe,be]]},Be.iterations=function(Me){return arguments.length?(Se=+Me,Be):Se},Be.circularLinkGap=function(Me){return arguments.length?(Pe=+Me,Be):Pe},Be.nodePaddingRatio=function(Me){return arguments.length?(ve=+Me,Be):ve},Be.sortNodes=function(Me){return arguments.length?(Fe=Me,Be):Fe},Be.update=function(Me){return I(Me,se),me(Me),Me.links.forEach(function(Le){Le.circular&&(Le.circularLinkType=Le.y0+Le.y1<be?"top":"bottom",Le.source.circularLinkType=Le.circularLinkType,Le.target.circularLinkType=Le.circularLinkType)}),ce(Me,be,se,!1),le(Me,0,se),j(Me,Pe,be,se),Me},Be}function I(ye,ve){var xe=0,Ce=0;ye.links.forEach(function(Oe){Oe.circular&&(Oe.circularLinkType=Oe.source.circularLinkType||Oe.target.circularLinkType?Oe.source.circularLinkType?Oe.source.circularLinkType:Oe.target.circularLinkType:xe<Ce?"top":"bottom","top"==Oe.circularLinkType?xe+=1:Ce+=1,ye.nodes.forEach(function(be){h(be,ve)!=h(Oe.source,ve)&&h(be,ve)!=h(Oe.target,ve)||(be.circularLinkType=Oe.circularLinkType)}))}),ye.links.forEach(function(Oe){Oe.circular&&(Oe.source.circularLinkType==Oe.target.circularLinkType&&(Oe.circularLinkType=Oe.source.circularLinkType),Te(Oe,ve)&&(Oe.circularLinkType=Oe.source.circularLinkType))})}function O(ye){var ve=Math.abs(ye.y1-ye.y0),xe=Math.abs(ye.target.x0-ye.source.x1);return Math.atan(xe/ve)}function z(ye,ve){var xe=0;ye.sourceLinks.forEach(function(Oe){xe=Oe.circular&&!Te(Oe,ve)?xe+1:xe});var Ce=0;return ye.targetLinks.forEach(function(Oe){Ce=Oe.circular&&!Te(Oe,ve)?Ce+1:Ce}),xe+Ce}function U(ye){var xe=0;ye.source.sourceLinks.forEach(function(be){xe=be.circular?xe+1:xe});var Oe=0;return ye.target.targetLinks.forEach(function(be){Oe=be.circular?Oe+1:Oe}),!(xe>1||Oe>1)}function R(ye,ve,xe){return ye.sort(Y),ye.forEach(function(Ce,Oe){var be,ue,se=0;if(Te(Ce,xe)&&U(Ce))Ce.circularPathData.verticalBuffer=se+Ce.width/2;else{for(var ge=0;ge<Oe;ge++)if(!((be=ye[Oe]).source.column<(ue=ye[ge]).target.column||be.target.column>ue.source.column)){var Ie=ye[ge].circularPathData.verticalBuffer+ye[ge].width/2+ve;se=Ie>se?Ie:se}Ce.circularPathData.verticalBuffer=se+Ce.width/2}}),ye}function j(ye,ve,xe,Ce){var Oe=(0,M.SY)(ye.links,function(be){return be.source.y0});ye.links.forEach(function(be){be.circular&&(be.circularPathData={})}),R(ye.links.filter(function(be){return"top"==be.circularLinkType}),ve,Ce),R(ye.links.filter(function(be){return"bottom"==be.circularLinkType}),ve,Ce),ye.links.forEach(function(be){if(be.circular){if(be.circularPathData.arcRadius=be.width+w,be.circularPathData.leftNodeBuffer=5,be.circularPathData.rightNodeBuffer=5,be.circularPathData.sourceWidth=be.source.x1-be.source.x0,be.circularPathData.sourceX=be.source.x0+be.circularPathData.sourceWidth,be.circularPathData.targetX=be.target.x0,be.circularPathData.sourceY=be.y0,be.circularPathData.targetY=be.y1,Te(be,Ce)&&U(be))be.circularPathData.leftSmallArcRadius=w+be.width/2,be.circularPathData.leftLargeArcRadius=w+be.width/2,be.circularPathData.rightSmallArcRadius=w+be.width/2,be.circularPathData.rightLargeArcRadius=w+be.width/2,"bottom"==be.circularLinkType?(be.circularPathData.verticalFullExtent=be.source.y1+S+be.circularPathData.verticalBuffer,be.circularPathData.verticalLeftInnerExtent=be.circularPathData.verticalFullExtent-be.circularPathData.leftLargeArcRadius,be.circularPathData.verticalRightInnerExtent=be.circularPathData.verticalFullExtent-be.circularPathData.rightLargeArcRadius):(be.circularPathData.verticalFullExtent=be.source.y0-S-be.circularPathData.verticalBuffer,be.circularPathData.verticalLeftInnerExtent=be.circularPathData.verticalFullExtent+be.circularPathData.leftLargeArcRadius,be.circularPathData.verticalRightInnerExtent=be.circularPathData.verticalFullExtent+be.circularPathData.rightLargeArcRadius);else{var ue=be.source.column,se=be.circularLinkType,ge=ye.links.filter(function(Se){return Se.source.column==ue&&Se.circularLinkType==se});ge.sort("bottom"==be.circularLinkType?V:B);var Ie=0;ge.forEach(function(Se,Pe){Se.circularLinkID==be.circularLinkID&&(be.circularPathData.leftSmallArcRadius=w+be.width/2+Ie,be.circularPathData.leftLargeArcRadius=w+be.width/2+Pe*ve+Ie),Ie+=Se.width}),ue=be.target.column,(ge=ye.links.filter(function(Se){return Se.target.column==ue&&Se.circularLinkType==se})).sort("bottom"==be.circularLinkType?ie:q),Ie=0,ge.forEach(function(Se,Pe){Se.circularLinkID==be.circularLinkID&&(be.circularPathData.rightSmallArcRadius=w+be.width/2+Ie,be.circularPathData.rightLargeArcRadius=w+be.width/2+Pe*ve+Ie),Ie+=Se.width}),"bottom"==be.circularLinkType?(be.circularPathData.verticalFullExtent=Math.max(xe,be.source.y1,be.target.y1)+S+be.circularPathData.verticalBuffer,be.circularPathData.verticalLeftInnerExtent=be.circularPathData.verticalFullExtent-be.circularPathData.leftLargeArcRadius,be.circularPathData.verticalRightInnerExtent=be.circularPathData.verticalFullExtent-be.circularPathData.rightLargeArcRadius):(be.circularPathData.verticalFullExtent=Oe-S-be.circularPathData.verticalBuffer,be.circularPathData.verticalLeftInnerExtent=be.circularPathData.verticalFullExtent+be.circularPathData.leftLargeArcRadius,be.circularPathData.verticalRightInnerExtent=be.circularPathData.verticalFullExtent+be.circularPathData.rightLargeArcRadius)}be.circularPathData.leftInnerExtent=be.circularPathData.sourceX+be.circularPathData.leftNodeBuffer,be.circularPathData.rightInnerExtent=be.circularPathData.targetX-be.circularPathData.rightNodeBuffer,be.circularPathData.leftFullExtent=be.circularPathData.sourceX+be.circularPathData.leftLargeArcRadius+be.circularPathData.leftNodeBuffer,be.circularPathData.rightFullExtent=be.circularPathData.targetX-be.circularPathData.rightLargeArcRadius-be.circularPathData.rightNodeBuffer}if(be.circular)be.path="top"==(Se=be).circularLinkType?"M"+Se.circularPathData.sourceX+" "+Se.circularPathData.sourceY+" L"+Se.circularPathData.leftInnerExtent+" "+Se.circularPathData.sourceY+" A"+Se.circularPathData.leftLargeArcRadius+" "+Se.circularPathData.leftSmallArcRadius+" 0 0 0 "+Se.circularPathData.leftFullExtent+" "+(Se.circularPathData.sourceY-Se.circularPathData.leftSmallArcRadius)+" L"+Se.circularPathData.leftFullExtent+" "+Se.circularPathData.verticalLeftInnerExtent+" A"+Se.circularPathData.leftLargeArcRadius+" "+Se.circularPathData.leftLargeArcRadius+" 0 0 0 "+Se.circularPathData.leftInnerExtent+" "+Se.circularPathData.verticalFullExtent+" L"+Se.circularPathData.rightInnerExtent+" "+Se.circularPathData.verticalFullExtent+" A"+Se.circularPathData.rightLargeArcRadius+" "+Se.circularPathData.rightLargeArcRadius+" 0 0 0 "+Se.circularPathData.rightFullExtent+" "+Se.circularPathData.verticalRightInnerExtent+" L"+Se.circularPathData.rightFullExtent+" "+(Se.circularPathData.targetY-Se.circularPathData.rightSmallArcRadius)+" A"+Se.circularPathData.rightLargeArcRadius+" "+Se.circularPathData.rightSmallArcRadius+" 0 0 0 "+Se.circularPathData.rightInnerExtent+" "+Se.circularPathData.targetY+" L"+Se.circularPathData.targetX+" "+Se.circularPathData.targetY:"M"+Se.circularPathData.sourceX+" "+Se.circularPathData.sourceY+" L"+Se.circularPathData.leftInnerExtent+" "+Se.circularPathData.sourceY+" A"+Se.circularPathData.leftLargeArcRadius+" "+Se.circularPathData.leftSmallArcRadius+" 0 0 1 "+Se.circularPathData.leftFullExtent+" "+(Se.circularPathData.sourceY+Se.circularPathData.leftSmallArcRadius)+" L"+Se.circularPathData.leftFullExtent+" "+Se.circularPathData.verticalLeftInnerExtent+" A"+Se.circularPathData.leftLargeArcRadius+" "+Se.circularPathData.leftLargeArcRadius+" 0 0 1 "+Se.circularPathData.leftInnerExtent+" "+Se.circularPathData.verticalFullExtent+" L"+Se.circularPathData.rightInnerExtent+" "+Se.circularPathData.verticalFullExtent+" A"+Se.circularPathData.rightLargeArcRadius+" "+Se.circularPathData.rightLargeArcRadius+" 0 0 1 "+Se.circularPathData.rightFullExtent+" "+Se.circularPathData.verticalRightInnerExtent+" L"+Se.circularPathData.rightFullExtent+" "+(Se.circularPathData.targetY+Se.circularPathData.rightSmallArcRadius)+" A"+Se.circularPathData.rightLargeArcRadius+" "+Se.circularPathData.rightSmallArcRadius+" 0 0 1 "+Se.circularPathData.rightInnerExtent+" "+Se.circularPathData.targetY+" L"+Se.circularPathData.targetX+" "+Se.circularPathData.targetY;else{var ke=(0,o.ak)().source(function(Se){return[Se.source.x0+(Se.source.x1-Se.source.x0),Se.y0]}).target(function(Se){return[Se.target.x0,Se.y1]});be.path=ke(be)}var Se})}function Y(ye,ve){return te(ye)==te(ve)?"bottom"==ye.circularLinkType?V(ye,ve):B(ye,ve):te(ve)-te(ye)}function B(ye,ve){return ye.y0-ve.y0}function V(ye,ve){return ve.y0-ye.y0}function q(ye,ve){return ye.y1-ve.y1}function ie(ye,ve){return ve.y1-ye.y1}function te(ye){return ye.target.column-ye.source.column}function ee(ye){return ye.target.x0-ye.source.x1}function $(ye,ve){var xe=O(ye),Ce=ee(ve)/Math.tan(xe);return"up"==we(ye)?ye.y1+Ce:ye.y1-Ce}function J(ye,ve){var xe=O(ye),Ce=ee(ve)/Math.tan(xe);return"up"==we(ye)?ye.y1-Ce:ye.y1+Ce}function X(ye,ve,xe,Ce){ye.links.forEach(function(Oe){if(!Oe.circular&&Oe.target.column-Oe.source.column>1){var be=Oe.source.column+1,ue=Oe.target.column-1,se=1,ge=ue-be+1;for(se=1;be<=ue;be++,se++)ye.nodes.forEach(function(Ie){if(Ie.column==be){var ke,Se=se/(ge+1),Pe=Math.pow(1-Se,3),Fe=3*Se*Math.pow(1-Se,2),Be=3*Math.pow(Se,2)*(1-Se),me=Math.pow(Se,3),Me=Pe*Oe.y0+Fe*Oe.y0+Be*Oe.y1+me*Oe.y1,Le=Me-Oe.width/2,Ne=Me+Oe.width/2;Le>Ie.y0&&Le<Ie.y1?(ke=Ie.y1-Le+10,Ie=ae(Ie,ke="bottom"==Ie.circularLinkType?ke:-ke,ve,xe),ye.nodes.forEach(function(Re){var He,Ze;h(Re,Ce)!=h(Ie,Ce)&&Re.column==Ie.column&&((He=Ie).y0>(Ze=Re).y0&&He.y0<Ze.y1||He.y1>Ze.y0&&He.y1<Ze.y1||He.y0<Ze.y0&&He.y1>Ze.y1)&&ae(Re,ke,ve,xe)})):(Ne>Ie.y0&&Ne<Ie.y1||Le<Ie.y0&&Ne>Ie.y1)&&(Ie=ae(Ie,ke=Ne-Ie.y0+10,ve,xe),ye.nodes.forEach(function(Re){h(Re,Ce)!=h(Ie,Ce)&&Re.column==Ie.column&&Re.y0<Ie.y1&&Re.y1>Ie.y1&&ae(Re,ke,ve,xe)}))}})}})}function ae(ye,ve,xe,Ce){return ye.y0+ve>=xe&&ye.y1+ve<=Ce&&(ye.y0=ye.y0+ve,ye.y1=ye.y1+ve,ye.targetLinks.forEach(function(Oe){Oe.y1=Oe.y1+ve}),ye.sourceLinks.forEach(function(Oe){Oe.y0=Oe.y0+ve})),ye}function ce(ye,ve,xe,Ce){ye.nodes.forEach(function(Oe){Ce&&Oe.y+(Oe.y1-Oe.y0)>ve&&(Oe.y=Oe.y-(Oe.y+(Oe.y1-Oe.y0)-ve));var be=ye.links.filter(function(ge){return h(ge.source,xe)==h(Oe,xe)}),ue=be.length;ue>1&&be.sort(function(ge,Ie){if(!ge.circular&&!Ie.circular){if(ge.target.column==Ie.target.column||!pe(ge,Ie))return ge.y1-Ie.y1;if(ge.target.column>Ie.target.column){var ke=J(Ie,ge);return ge.y1-ke}if(Ie.target.column>ge.target.column)return J(ge,Ie)-Ie.y1}return ge.circular&&!Ie.circular?"top"==ge.circularLinkType?-1:1:Ie.circular&&!ge.circular?"top"==Ie.circularLinkType?1:-1:ge.circular&&Ie.circular?ge.circularLinkType===Ie.circularLinkType&&"top"==ge.circularLinkType?ge.target.column===Ie.target.column?ge.target.y1-Ie.target.y1:Ie.target.column-ge.target.column:ge.circularLinkType===Ie.circularLinkType&&"bottom"==ge.circularLinkType?ge.target.column===Ie.target.column?Ie.target.y1-ge.target.y1:ge.target.column-Ie.target.column:"top"==ge.circularLinkType?-1:1:void 0});var se=Oe.y0;be.forEach(function(ge){ge.y0=se+ge.width/2,se+=ge.width}),be.forEach(function(ge,Ie){if("bottom"==ge.circularLinkType){for(var ke=Ie+1,Se=0;ke<ue;ke++)Se+=be[ke].width;ge.y0=Oe.y1-Se-ge.width/2}})})}function le(ye,ve,xe){ye.nodes.forEach(function(Ce){var Oe=ye.links.filter(function(se){return h(se.target,xe)==h(Ce,xe)}),be=Oe.length;be>1&&Oe.sort(function(se,ge){if(!se.circular&&!ge.circular){if(se.source.column==ge.source.column||!pe(se,ge))return se.y0-ge.y0;if(ge.source.column<se.source.column){var Ie=$(ge,se);return se.y0-Ie}if(se.source.column<ge.source.column)return $(se,ge)-ge.y0}return se.circular&&!ge.circular?"top"==se.circularLinkType?-1:1:ge.circular&&!se.circular?"top"==ge.circularLinkType?1:-1:se.circular&&ge.circular?se.circularLinkType===ge.circularLinkType&&"top"==se.circularLinkType?se.source.column===ge.source.column?se.source.y1-ge.source.y1:se.source.column-ge.source.column:se.circularLinkType===ge.circularLinkType&&"bottom"==se.circularLinkType?se.source.column===ge.source.column?se.source.y1-ge.source.y1:ge.source.column-se.source.column:"top"==se.circularLinkType?-1:1:void 0});var ue=Ce.y0;Oe.forEach(function(se){se.y1=ue+se.width/2,ue+=se.width}),Oe.forEach(function(se,ge){if("bottom"==se.circularLinkType){for(var Ie=ge+1,ke=0;Ie<be;Ie++)ke+=Oe[Ie].width;se.y1=Ce.y1-ke-se.width/2}})})}function pe(ye,ve){return we(ye)==we(ve)}function we(ye){return ye.y0-ye.y1>0?"up":"down"}function Te(ye,ve){return h(ye.source,ve)==h(ye.target,ve)}},26800:function(ne,F,e){"use strict";e.r(F),e.d(F,{sankey:function(){return g},sankeyCenter:function(){return l},sankeyJustify:function(){return p},sankeyLeft:function(){return T},sankeyLinkHorizontal:function(){return h},sankeyRight:function(){return _}});var M=e(84706),k=e(34712);function o(S){return S.target.depth}function T(S){return S.depth}function _(S,w){return w-1-S.height}function p(S,w){return S.sourceLinks.length?S.depth:w-1}function l(S){return S.targetLinks.length?S.depth:S.sourceLinks.length?(0,M.SY)(S.sourceLinks,o)-1:0}function t(S){return function(){return S}}function i(S,w){return n(S.source,w.source)||S.index-w.index}function r(S,w){return n(S.target,w.target)||S.index-w.index}function n(S,w){return S.y0-w.y0}function a(S){return S.value}function s(S){return(S.y0+S.y1)/2}function u(S){return s(S.source)*S.value}function f(S){return s(S.target)*S.value}function c(S){return S.index}function y(S){return S.nodes}function d(S){return S.links}function m(S,w){var E=S.get(w);if(!E)throw new Error("missing: "+w);return E}function g(){var S=0,w=0,E=1,P=1,I=24,O=8,z=c,U=p,R=y,j=d,Y=32;function B(){var q={nodes:R.apply(null,arguments),links:j.apply(null,arguments)};return function(ie){ie.nodes.forEach(function(ee,$){ee.index=$,ee.sourceLinks=[],ee.targetLinks=[]});var te=(0,k.kH)(ie.nodes,z);ie.links.forEach(function(ee,$){ee.index=$;var J=ee.source,X=ee.target;"object"!=typeof J&&(J=ee.source=m(te,J)),"object"!=typeof X&&(X=ee.target=m(te,X)),J.sourceLinks.push(ee),X.targetLinks.push(ee)})}(q),q.nodes.forEach(function(te){te.value=Math.max((0,M.oh)(te.sourceLinks,a),(0,M.oh)(te.targetLinks,a))}),function(ie){var te,ee,$;for(te=ie.nodes,ee=[],$=0;te.length;++$,te=ee,ee=[])te.forEach(function(X){X.depth=$,X.sourceLinks.forEach(function(ae){ee.indexOf(ae.target)<0&&ee.push(ae.target)})});for(te=ie.nodes,ee=[],$=0;te.length;++$,te=ee,ee=[])te.forEach(function(X){X.height=$,X.targetLinks.forEach(function(ae){ee.indexOf(ae.source)<0&&ee.push(ae.source)})});var J=(E-S-I)/($-1);ie.nodes.forEach(function(X){X.x1=(X.x0=S+Math.max(0,Math.min($-1,Math.floor(U.call(null,X,$))))*J)+I})}(q),function(ie){var te=(0,k.UJ)().key(function(ce){return ce.x0}).sortKeys(M.XE).entries(ie.nodes).map(function(ce){return ce.values});(function(){var ce=(0,M.kv)(te,function(we){return we.length}),le=.6666666666666666*(P-w)/(ce-1);O>le&&(O=le);var pe=(0,M.SY)(te,function(we){return(P-w-(we.length-1)*O)/(0,M.oh)(we,a)});te.forEach(function(we){we.forEach(function(Te,ye){Te.y1=(Te.y0=ye)+Te.value*pe})}),ie.links.forEach(function(we){we.width=we.value*pe})})(),ae();for(var ee=1,$=Y;$>0;--$)X(ee*=.99),ae(),J(ee),ae();function J(ce){te.forEach(function(le){le.forEach(function(pe){if(pe.targetLinks.length){var we=((0,M.oh)(pe.targetLinks,u)/(0,M.oh)(pe.targetLinks,a)-s(pe))*ce;pe.y0+=we,pe.y1+=we}})})}function X(ce){te.slice().reverse().forEach(function(le){le.forEach(function(pe){if(pe.sourceLinks.length){var we=((0,M.oh)(pe.sourceLinks,f)/(0,M.oh)(pe.sourceLinks,a)-s(pe))*ce;pe.y0+=we,pe.y1+=we}})})}function ae(){te.forEach(function(ce){var le,pe,we,Te=w,ye=ce.length;for(ce.sort(n),we=0;we<ye;++we)(pe=Te-(le=ce[we]).y0)>0&&(le.y0+=pe,le.y1+=pe),Te=le.y1+O;if((pe=Te-O-P)>0)for(Te=le.y0-=pe,le.y1-=pe,we=ye-2;we>=0;--we)(pe=(le=ce[we]).y1+O-Te)>0&&(le.y0-=pe,le.y1-=pe),Te=le.y0})}}(q),V(q),q}function V(q){q.nodes.forEach(function(ie){ie.sourceLinks.sort(r),ie.targetLinks.sort(i)}),q.nodes.forEach(function(ie){var te=ie.y0,ee=te;ie.sourceLinks.forEach(function($){$.y0=te+$.width/2,te+=$.width}),ie.targetLinks.forEach(function($){$.y1=ee+$.width/2,ee+=$.width})})}return B.update=function(q){return V(q),q},B.nodeId=function(q){return arguments.length?(z="function"==typeof q?q:t(q),B):z},B.nodeAlign=function(q){return arguments.length?(U="function"==typeof q?q:t(q),B):U},B.nodeWidth=function(q){return arguments.length?(I=+q,B):I},B.nodePadding=function(q){return arguments.length?(O=+q,B):O},B.nodes=function(q){return arguments.length?(R="function"==typeof q?q:t(q),B):R},B.links=function(q){return arguments.length?(j="function"==typeof q?q:t(q),B):j},B.size=function(q){return arguments.length?(S=w=0,E=+q[0],P=+q[1],B):[E-S,P-w]},B.extent=function(q){return arguments.length?(S=+q[0][0],E=+q[1][0],w=+q[0][1],P=+q[1][1],B):[[S,w],[E,P]]},B.iterations=function(q){return arguments.length?(Y=+q,B):Y},B}var x=e(10132);function v(S){return[S.source.x1,S.y0]}function b(S){return[S.target.x0,S.y1]}function h(){return(0,x.ak)().source(v).target(b)}},33428:function(ne,F,e){var M,k;(function(){var o={version:"3.8.2"},T=[].slice,_=function(C){return T.call(C)},p=self.document;function l(C){return C&&(C.ownerDocument||C.document||C).documentElement}function t(C){return C&&(C.ownerDocument&&C.ownerDocument.defaultView||C.document&&C||C.defaultView)}if(p)try{_(p.documentElement.childNodes)}catch{_=function(G){for(var Q=G.length,oe=new Array(Q);Q--;)oe[Q]=G[Q];return oe}}if(Date.now||(Date.now=function(){return+new Date}),p)try{p.createElement("DIV").style.setProperty("opacity",0,"")}catch{var i=this.Element.prototype,r=i.setAttribute,n=i.setAttributeNS,a=this.CSSStyleDeclaration.prototype,s=a.setProperty;i.setAttribute=function(G,Q){r.call(this,G,Q+"")},i.setAttributeNS=function(G,Q,oe){n.call(this,G,Q,oe+"")},a.setProperty=function(G,Q,oe){s.call(this,G,Q+"",oe)}}function u(C,G){return C<G?-1:C>G?1:C>=G?0:NaN}function f(C){return null===C?NaN:+C}function c(C){return!isNaN(C)}function y(C){return{left:function(G,Q,oe,de){for(arguments.length<3&&(oe=0),arguments.length<4&&(de=G.length);oe<de;){var Ae=oe+de>>>1;C(G[Ae],Q)<0?oe=Ae+1:de=Ae}return oe},right:function(G,Q,oe,de){for(arguments.length<3&&(oe=0),arguments.length<4&&(de=G.length);oe<de;){var Ae=oe+de>>>1;C(G[Ae],Q)>0?de=Ae:oe=Ae+1}return oe}}}o.ascending=u,o.descending=function(C,G){return G<C?-1:G>C?1:G>=C?0:NaN},o.min=function(C,G){var Q,oe,de=-1,Ae=C.length;if(1===arguments.length){for(;++de<Ae;)if(null!=(oe=C[de])&&oe>=oe){Q=oe;break}for(;++de<Ae;)null!=(oe=C[de])&&Q>oe&&(Q=oe)}else{for(;++de<Ae;)if(null!=(oe=G.call(C,C[de],de))&&oe>=oe){Q=oe;break}for(;++de<Ae;)null!=(oe=G.call(C,C[de],de))&&Q>oe&&(Q=oe)}return Q},o.max=function(C,G){var Q,oe,de=-1,Ae=C.length;if(1===arguments.length){for(;++de<Ae;)if(null!=(oe=C[de])&&oe>=oe){Q=oe;break}for(;++de<Ae;)null!=(oe=C[de])&&oe>Q&&(Q=oe)}else{for(;++de<Ae;)if(null!=(oe=G.call(C,C[de],de))&&oe>=oe){Q=oe;break}for(;++de<Ae;)null!=(oe=G.call(C,C[de],de))&&oe>Q&&(Q=oe)}return Q},o.extent=function(C,G){var Q,oe,de,Ae=-1,De=C.length;if(1===arguments.length){for(;++Ae<De;)if(null!=(oe=C[Ae])&&oe>=oe){Q=de=oe;break}for(;++Ae<De;)null!=(oe=C[Ae])&&(Q>oe&&(Q=oe),de<oe&&(de=oe))}else{for(;++Ae<De;)if(null!=(oe=G.call(C,C[Ae],Ae))&&oe>=oe){Q=de=oe;break}for(;++Ae<De;)null!=(oe=G.call(C,C[Ae],Ae))&&(Q>oe&&(Q=oe),de<oe&&(de=oe))}return[Q,de]},o.sum=function(C,G){var Q,oe=0,de=C.length,Ae=-1;if(1===arguments.length)for(;++Ae<de;)c(Q=+C[Ae])&&(oe+=Q);else for(;++Ae<de;)c(Q=+G.call(C,C[Ae],Ae))&&(oe+=Q);return oe},o.mean=function(C,G){var Q,oe=0,de=C.length,Ae=-1,De=de;if(1===arguments.length)for(;++Ae<de;)c(Q=f(C[Ae]))?oe+=Q:--De;else for(;++Ae<de;)c(Q=f(G.call(C,C[Ae],Ae)))?oe+=Q:--De;if(De)return oe/De},o.quantile=function(C,G){var Q=(C.length-1)*G+1,oe=Math.floor(Q),de=+C[oe-1],Ae=Q-oe;return Ae?de+Ae*(C[oe]-de):de},o.median=function(C,G){var Q,oe=[],de=C.length,Ae=-1;if(1===arguments.length)for(;++Ae<de;)c(Q=f(C[Ae]))&&oe.push(Q);else for(;++Ae<de;)c(Q=f(G.call(C,C[Ae],Ae)))&&oe.push(Q);if(oe.length)return o.quantile(oe.sort(u),.5)},o.variance=function(C,G){var Q,oe,de=C.length,Ae=0,De=0,je=-1,Ye=0;if(1===arguments.length)for(;++je<de;)c(Q=f(C[je]))&&(De+=(oe=Q-Ae)*(Q-(Ae+=oe/++Ye)));else for(;++je<de;)c(Q=f(G.call(C,C[je],je)))&&(De+=(oe=Q-Ae)*(Q-(Ae+=oe/++Ye)));if(Ye>1)return De/(Ye-1)},o.deviation=function(){var C=o.variance.apply(this,arguments);return C&&Math.sqrt(C)};var d=y(u);function m(C){return C.length}o.bisectLeft=d.left,o.bisect=o.bisectRight=d.right,o.bisector=function(C){return y(1===C.length?function(G,Q){return u(C(G),Q)}:C)},o.shuffle=function(C,G,Q){(Ae=arguments.length)<3&&(Q=C.length,Ae<2&&(G=0));for(var oe,de,Ae=Q-G;Ae;)de=Math.random()*Ae--|0,oe=C[Ae+G],C[Ae+G]=C[de+G],C[de+G]=oe;return C},o.permute=function(C,G){for(var Q=G.length,oe=new Array(Q);Q--;)oe[Q]=C[G[Q]];return oe},o.pairs=function(C){for(var G=0,Q=C.length-1,oe=C[0],de=new Array(Q<0?0:Q);G<Q;)de[G]=[oe,oe=C[++G]];return de},o.transpose=function(C){if(!(de=C.length))return[];for(var G=-1,Q=o.min(C,m),oe=new Array(Q);++G<Q;)for(var de,Ae=-1,De=oe[G]=new Array(de);++Ae<de;)De[Ae]=C[Ae][G];return oe},o.zip=function(){return o.transpose(arguments)},o.keys=function(C){var G=[];for(var Q in C)G.push(Q);return G},o.values=function(C){var G=[];for(var Q in C)G.push(C[Q]);return G},o.entries=function(C){var G=[];for(var Q in C)G.push({key:Q,value:C[Q]});return G},o.merge=function(C){for(var G,Q,oe,de=C.length,Ae=-1,De=0;++Ae<de;)De+=C[Ae].length;for(Q=new Array(De);--de>=0;)for(G=(oe=C[de]).length;--G>=0;)Q[--De]=oe[G];return Q};var g=Math.abs;function x(C,G){for(var Q in G)Object.defineProperty(C.prototype,Q,{value:G[Q],enumerable:!1})}function v(){this._=Object.create(null)}o.range=function(C,G,Q){if(arguments.length<3&&(Q=1,arguments.length<2&&(G=C,C=0)),(G-C)/Q==1/0)throw new Error("infinite range");var oe,de=[],Ae=function(je){for(var Ye=1;je*Ye%1;)Ye*=10;return Ye}(g(Q)),De=-1;if(C*=Ae,G*=Ae,(Q*=Ae)<0)for(;(oe=C+Q*++De)>G;)de.push(oe/Ae);else for(;(oe=C+Q*++De)<G;)de.push(oe/Ae);return de},o.map=function(C,G){var Q=new v;if(C instanceof v)C.forEach(function(je,Ye){Q.set(je,Ye)});else if(Array.isArray(C)){var oe,de=-1,Ae=C.length;if(1===arguments.length)for(;++de<Ae;)Q.set(de,C[de]);else for(;++de<Ae;)Q.set(G.call(C,oe=C[de],de),oe)}else for(var De in C)Q.set(De,C[De]);return Q};var b="__proto__",h="\0";function S(C){return(C+="")===b||C[0]===h?h+C:C}function w(C){return(C+="")[0]===h?C.slice(1):C}function E(C){return S(C)in this._}function P(C){return(C=S(C))in this._&&delete this._[C]}function I(){var C=[];for(var G in this._)C.push(w(G));return C}function O(){var C=0;for(var G in this._)++C;return C}function z(){for(var C in this._)return!1;return!0}function U(){this._=Object.create(null)}function R(C){return C}function j(C,G,Q){return function(){var oe=Q.apply(G,arguments);return oe===G?C:oe}}function Y(C,G){if(G in C)return G;G=G.charAt(0).toUpperCase()+G.slice(1);for(var Q=0,oe=B.length;Q<oe;++Q){var de=B[Q]+G;if(de in C)return de}}x(v,{has:E,get:function(C){return this._[S(C)]},set:function(C,G){return this._[S(C)]=G},remove:P,keys:I,values:function(){var C=[];for(var G in this._)C.push(this._[G]);return C},entries:function(){var C=[];for(var G in this._)C.push({key:w(G),value:this._[G]});return C},size:O,empty:z,forEach:function(C){for(var G in this._)C.call(this,w(G),this._[G])}}),o.nest=function(){var C,G,Q={},oe=[],de=[];function Ae(je,Ye,Ke){if(Ke>=oe.length)return G?G.call(Q,Ye):C?Ye.sort(C):Ye;for(var st,mt,xt,Et,Dt=-1,It=Ye.length,qt=oe[Ke++],Ft=new v;++Dt<It;)(Et=Ft.get(st=qt(mt=Ye[Dt])))?Et.push(mt):Ft.set(st,[mt]);return je?(mt=je(),xt=function(on,Qt){mt.set(on,Ae(je,Qt,Ke))}):(mt={},xt=function(on,Qt){mt[on]=Ae(je,Qt,Ke)}),Ft.forEach(xt),mt}function De(je,Ye){if(Ye>=oe.length)return je;var Ke=[],st=de[Ye++];return je.forEach(function(mt,xt){Ke.push({key:mt,values:De(xt,Ye)})}),st?Ke.sort(function(mt,xt){return st(mt.key,xt.key)}):Ke}return Q.map=function(je,Ye){return Ae(Ye,je,0)},Q.entries=function(je){return De(Ae(o.map,je,0),0)},Q.key=function(je){return oe.push(je),Q},Q.sortKeys=function(je){return de[oe.length-1]=je,Q},Q.sortValues=function(je){return C=je,Q},Q.rollup=function(je){return G=je,Q},Q},o.set=function(C){var G=new U;if(C)for(var Q=0,oe=C.length;Q<oe;++Q)G.add(C[Q]);return G},x(U,{has:E,add:function(C){return this._[S(C+="")]=!0,C},remove:P,values:I,size:O,empty:z,forEach:function(C){for(var G in this._)C.call(this,w(G))}}),o.behavior={},o.rebind=function(C,G){for(var Q,oe=1,de=arguments.length;++oe<de;)C[Q=arguments[oe]]=j(C,G,G[Q]);return C};var B=["webkit","ms","moz","Moz","o","O"];function V(){}function q(){}function ie(C){var G=[],Q=new v;function oe(){for(var de,Ae=G,De=-1,je=Ae.length;++De<je;)(de=Ae[De].on)&&de.apply(this,arguments);return C}return oe.on=function(de,Ae){var De,je=Q.get(de);return arguments.length<2?je&&je.on:(je&&(je.on=null,G=G.slice(0,De=G.indexOf(je)).concat(G.slice(De+1)),Q.remove(de)),Ae&&G.push(Q.set(de,{on:Ae})),C)},oe}function te(){o.event.preventDefault()}function ee(){for(var C,G=o.event;C=G.sourceEvent;)G=C;return G}function $(C){for(var G=new q,Q=0,oe=arguments.length;++Q<oe;)G[arguments[Q]]=ie(G);return G.of=function(de,Ae){return function(De){try{var je=De.sourceEvent=o.event;De.target=C,o.event=De,G[De.type].apply(de,Ae)}finally{o.event=je}}},G}o.dispatch=function(){for(var C=new q,G=-1,Q=arguments.length;++G<Q;)C[arguments[G]]=ie(C);return C},q.prototype.on=function(C,G){var Q=C.indexOf("."),oe="";if(Q>=0&&(oe=C.slice(Q+1),C=C.slice(0,Q)),C)return arguments.length<2?this[C].on(oe):this[C].on(oe,G);if(2===arguments.length){if(null==G)for(C in this)this.hasOwnProperty(C)&&this[C].on(oe,null);return this}},o.event=null,o.requote=function(C){return C.replace(J,"\\$&")};var J=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,X={}.__proto__?function(C,G){C.__proto__=G}:function(C,G){for(var Q in G)C[Q]=G[Q]};function ae(C){return X(C,we),C}var ce=function(C,G){return G.querySelector(C)},le=function(C,G){return G.querySelectorAll(C)},pe=function(C,G){var Q=C.matches||C[Y(C,"matchesSelector")];return(pe=function(oe,de){return Q.call(oe,de)})(C,G)};"function"==typeof Sizzle&&(ce=function(C,G){return Sizzle(C,G)[0]||null},le=Sizzle,pe=Sizzle.matchesSelector),o.selection=function(){return o.select(p.documentElement)};var we=o.selection.prototype=[];function Te(C){return"function"==typeof C?C:function(){return ce(C,this)}}function ye(C){return"function"==typeof C?C:function(){return le(C,this)}}we.select=function(C){var G,Q,oe,de,Ae=[];C=Te(C);for(var De=-1,je=this.length;++De<je;){Ae.push(G=[]),G.parentNode=(oe=this[De]).parentNode;for(var Ye=-1,Ke=oe.length;++Ye<Ke;)(de=oe[Ye])?(G.push(Q=C.call(de,de.__data__,Ye,De)),Q&&"__data__"in de&&(Q.__data__=de.__data__)):G.push(null)}return ae(Ae)},we.selectAll=function(C){var G,Q,oe=[];C=ye(C);for(var de=-1,Ae=this.length;++de<Ae;)for(var De=this[de],je=-1,Ye=De.length;++je<Ye;)(Q=De[je])&&(oe.push(G=_(C.call(Q,Q.__data__,je,de))),G.parentNode=Q);return ae(oe)};var ve="http://www.w3.org/1999/xhtml",xe={svg:"http://www.w3.org/2000/svg",xhtml:ve,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ce(C,G){return C=o.ns.qualify(C),null==G?C.local?function(){this.removeAttributeNS(C.space,C.local)}:function(){this.removeAttribute(C)}:"function"==typeof G?C.local?function(){var Q=G.apply(this,arguments);null==Q?this.removeAttributeNS(C.space,C.local):this.setAttributeNS(C.space,C.local,Q)}:function(){var Q=G.apply(this,arguments);null==Q?this.removeAttribute(C):this.setAttribute(C,Q)}:C.local?function(){this.setAttributeNS(C.space,C.local,G)}:function(){this.setAttribute(C,G)}}function Oe(C){return C.trim().replace(/\s+/g," ")}function be(C){return new RegExp("(?:^|\\s+)"+o.requote(C)+"(?:\\s+|$)","g")}function ue(C){return(C+"").trim().split(/^|\s+/)}function se(C,G){var Q=(C=ue(C).map(ge)).length;return"function"==typeof G?function(){for(var oe=-1,de=G.apply(this,arguments);++oe<Q;)C[oe](this,de)}:function(){for(var oe=-1;++oe<Q;)C[oe](this,G)}}function ge(C){var G=be(C);return function(Q,oe){if(de=Q.classList)return oe?de.add(C):de.remove(C);var de=Q.getAttribute("class")||"";oe?(G.lastIndex=0,G.test(de)||Q.setAttribute("class",Oe(de+" "+C))):Q.setAttribute("class",Oe(de.replace(G," ")))}}function Ie(C,G,Q){return null==G?function(){this.style.removeProperty(C)}:"function"==typeof G?function(){var oe=G.apply(this,arguments);null==oe?this.style.removeProperty(C):this.style.setProperty(C,oe,Q)}:function(){this.style.setProperty(C,G,Q)}}function ke(C,G){return null==G?function(){delete this[C]}:"function"==typeof G?function(){var Q=G.apply(this,arguments);null==Q?delete this[C]:this[C]=Q}:function(){this[C]=G}}function Se(C){return"function"==typeof C?C:(C=o.ns.qualify(C)).local?function(){return this.ownerDocument.createElementNS(C.space,C.local)}:function(){var G=this.ownerDocument,Q=this.namespaceURI;return Q===ve&&G.documentElement.namespaceURI===ve?G.createElement(C):G.createElementNS(Q,C)}}function Pe(){var C=this.parentNode;C&&C.removeChild(this)}function Fe(C){return{__data__:C}}function Be(C){return function(){return pe(this,C)}}function me(C){return arguments.length||(C=u),function(G,Q){return G&&Q?C(G.__data__,Q.__data__):!G-!Q}}function Me(C,G){for(var Q=0,oe=C.length;Q<oe;Q++)for(var de,Ae=C[Q],De=0,je=Ae.length;De<je;De++)(de=Ae[De])&&G(de,De,Q);return C}function Le(C){return X(C,Ne),C}o.ns={prefix:xe,qualify:function(C){var G=C.indexOf(":"),Q=C;return G>=0&&"xmlns"!==(Q=C.slice(0,G))&&(C=C.slice(G+1)),xe.hasOwnProperty(Q)?{space:xe[Q],local:C}:C}},we.attr=function(C,G){if(arguments.length<2){if("string"==typeof C){var Q=this.node();return(C=o.ns.qualify(C)).local?Q.getAttributeNS(C.space,C.local):Q.getAttribute(C)}for(G in C)this.each(Ce(G,C[G]));return this}return this.each(Ce(C,G))},we.classed=function(C,G){if(arguments.length<2){if("string"==typeof C){var Q=this.node(),oe=(C=ue(C)).length,de=-1;if(G=Q.classList){for(;++de<oe;)if(!G.contains(C[de]))return!1}else for(G=Q.getAttribute("class");++de<oe;)if(!be(C[de]).test(G))return!1;return!0}for(G in C)this.each(se(G,C[G]));return this}return this.each(se(C,G))},we.style=function(C,G,Q){var oe=arguments.length;if(oe<3){if("string"!=typeof C){for(Q in oe<2&&(G=""),C)this.each(Ie(Q,C[Q],G));return this}if(oe<2){var de=this.node();return t(de).getComputedStyle(de,null).getPropertyValue(C)}Q=""}return this.each(Ie(C,G,Q))},we.property=function(C,G){if(arguments.length<2){if("string"==typeof C)return this.node()[C];for(G in C)this.each(ke(G,C[G]));return this}return this.each(ke(C,G))},we.text=function(C){return arguments.length?this.each("function"==typeof C?function(){var G=C.apply(this,arguments);this.textContent=G??""}:null==C?function(){this.textContent=""}:function(){this.textContent=C}):this.node().textContent},we.html=function(C){return arguments.length?this.each("function"==typeof C?function(){var G=C.apply(this,arguments);this.innerHTML=G??""}:null==C?function(){this.innerHTML=""}:function(){this.innerHTML=C}):this.node().innerHTML},we.append=function(C){return C=Se(C),this.select(function(){return this.appendChild(C.apply(this,arguments))})},we.insert=function(C,G){return C=Se(C),G=Te(G),this.select(function(){return this.insertBefore(C.apply(this,arguments),G.apply(this,arguments)||null)})},we.remove=function(){return this.each(Pe)},we.data=function(C,G){var Q,oe,de=-1,Ae=this.length;if(!arguments.length){for(C=new Array(Ae=(Q=this[0]).length);++de<Ae;)(oe=Q[de])&&(C[de]=oe.__data__);return C}function De(st,mt){var xt,Et,Dt,It=st.length,qt=mt.length,Ft=Math.min(It,qt),on=new Array(qt),Qt=new Array(qt),Kt=new Array(It);if(G){var kn,En=new v,Bn=new Array(It);for(xt=-1;++xt<It;)(Et=st[xt])&&(En.has(kn=G.call(Et,Et.__data__,xt))?Kt[xt]=Et:En.set(kn,Et),Bn[xt]=kn);for(xt=-1;++xt<qt;)(Et=En.get(kn=G.call(mt,Dt=mt[xt],xt)))?!0!==Et&&(on[xt]=Et,Et.__data__=Dt):Qt[xt]=Fe(Dt),En.set(kn,!0);for(xt=-1;++xt<It;)xt in Bn&&!0!==En.get(Bn[xt])&&(Kt[xt]=st[xt])}else{for(xt=-1;++xt<Ft;)Dt=mt[xt],(Et=st[xt])?(Et.__data__=Dt,on[xt]=Et):Qt[xt]=Fe(Dt);for(;xt<qt;++xt)Qt[xt]=Fe(mt[xt]);for(;xt<It;++xt)Kt[xt]=st[xt]}Qt.update=on,Qt.parentNode=on.parentNode=Kt.parentNode=st.parentNode,je.push(Qt),Ye.push(on),Ke.push(Kt)}var je=Le([]),Ye=ae([]),Ke=ae([]);if("function"==typeof C)for(;++de<Ae;)De(Q=this[de],C.call(Q,Q.parentNode.__data__,de));else for(;++de<Ae;)De(Q=this[de],C);return Ye.enter=function(){return je},Ye.exit=function(){return Ke},Ye},we.datum=function(C){return arguments.length?this.property("__data__",C):this.property("__data__")},we.filter=function(C){var G,Q,oe,de=[];"function"!=typeof C&&(C=Be(C));for(var Ae=0,De=this.length;Ae<De;Ae++){de.push(G=[]),G.parentNode=(Q=this[Ae]).parentNode;for(var je=0,Ye=Q.length;je<Ye;je++)(oe=Q[je])&&C.call(oe,oe.__data__,je,Ae)&&G.push(oe)}return ae(de)},we.order=function(){for(var C=-1,G=this.length;++C<G;)for(var Q,oe=this[C],de=oe.length-1,Ae=oe[de];--de>=0;)(Q=oe[de])&&(Ae&&Ae!==Q.nextSibling&&Ae.parentNode.insertBefore(Q,Ae),Ae=Q);return this},we.sort=function(C){C=me.apply(this,arguments);for(var G=-1,Q=this.length;++G<Q;)this[G].sort(C);return this.order()},we.each=function(C){return Me(this,function(G,Q,oe){C.call(G,G.__data__,Q,oe)})},we.call=function(C){var G=_(arguments);return C.apply(G[0]=this,G),this},we.empty=function(){return!this.node()},we.node=function(){for(var C=0,G=this.length;C<G;C++)for(var Q=this[C],oe=0,de=Q.length;oe<de;oe++){var Ae=Q[oe];if(Ae)return Ae}return null},we.size=function(){var C=0;return Me(this,function(){++C}),C};var Ne=[];function Re(C,G,Q){var oe="__on"+C,de=C.indexOf("."),Ae=Ze;de>0&&(C=C.slice(0,de));var De=He.get(C);function je(){var Ye=this[oe];Ye&&(this.removeEventListener(C,Ye,Ye.$),delete this[oe])}return De&&(C=De,Ae=nt),de?G?function(){var Ye=Ae(G,_(arguments));je.call(this),this.addEventListener(C,this[oe]=Ye,Ye.$=Q),Ye._=G}:je:G?V:function(){var Ye,Ke=new RegExp("^__on([^.]+)"+o.requote(C)+"$");for(var st in this)if(Ye=st.match(Ke)){var mt=this[st];this.removeEventListener(Ye[1],mt,mt.$),delete this[st]}}}o.selection.enter=Le,o.selection.enter.prototype=Ne,Ne.append=we.append,Ne.empty=we.empty,Ne.node=we.node,Ne.call=we.call,Ne.size=we.size,Ne.select=function(C){for(var G,Q,oe,de,Ae,De=[],je=-1,Ye=this.length;++je<Ye;){oe=(de=this[je]).update,De.push(G=[]),G.parentNode=de.parentNode;for(var Ke=-1,st=de.length;++Ke<st;)(Ae=de[Ke])?(G.push(oe[Ke]=Q=C.call(de.parentNode,Ae.__data__,Ke,je)),Q.__data__=Ae.__data__):G.push(null)}return ae(De)},Ne.insert=function(C,G){var Q,oe,de;return arguments.length<2&&(Q=this,G=function(Ae,De,je){var Ye,Ke=Q[je].update,st=Ke.length;for(je!=de&&(de=je,oe=0),De>=oe&&(oe=De+1);!(Ye=Ke[oe])&&++oe<st;);return Ye}),we.insert.call(this,C,G)},o.select=function(C){var G;return"string"==typeof C?(G=[ce(C,p)]).parentNode=p.documentElement:(G=[C]).parentNode=l(C),ae([G])},o.selectAll=function(C){var G;return"string"==typeof C?(G=_(le(C,p))).parentNode=p.documentElement:(G=_(C)).parentNode=null,ae([G])},we.on=function(C,G,Q){var oe=arguments.length;if(oe<3){if("string"!=typeof C){for(Q in oe<2&&(G=!1),C)this.each(Re(Q,C[Q],G));return this}if(oe<2)return(oe=this.node()["__on"+C])&&oe._;Q=!1}return this.each(Re(C,G,Q))};var He=o.map({mouseenter:"mouseover",mouseleave:"mouseout"});function Ze(C,G){return function(Q){var oe=o.event;o.event=Q,G[0]=this.__data__;try{C.apply(this,G)}finally{o.event=oe}}}function nt(C,G){var Q=Ze(C,G);return function(oe){var Ae=oe.relatedTarget;Ae&&(Ae===this||8&Ae.compareDocumentPosition(this))||Q.call(this,oe)}}p&&He.forEach(function(C){"on"+C in p&&He.remove(C)});var ft,ht=0;function Tt(C){var G=".dragsuppress-"+ ++ht,Q="click"+G,oe=o.select(t(C)).on("touchmove"+G,te).on("dragstart"+G,te).on("selectstart"+G,te);if(null==ft&&(ft=!("onselectstart"in C)&&Y(C.style,"userSelect")),ft){var de=l(C).style,Ae=de[ft];de[ft]="none"}return function(De){if(oe.on(G,null),ft&&(de[ft]=Ae),De){var je=function(){oe.on(Q,null)};oe.on(Q,function(){te(),je()},!0),setTimeout(je,0)}}}o.mouse=function(C){return _t(C,ee())};var At=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function _t(C,G){G.changedTouches&&(G=G.changedTouches[0]);var Q=C.ownerSVGElement||C;if(Q.createSVGPoint){var oe=Q.createSVGPoint();if(At<0){var de=t(C);if(de.scrollX||de.scrollY){var Ae=(Q=o.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();At=!(Ae.f||Ae.e),Q.remove()}}return At?(oe.x=G.pageX,oe.y=G.pageY):(oe.x=G.clientX,oe.y=G.clientY),[(oe=oe.matrixTransform(C.getScreenCTM().inverse())).x,oe.y]}var De=C.getBoundingClientRect();return[G.clientX-De.left-C.clientLeft,G.clientY-De.top-C.clientTop]}function ot(){return o.event.changedTouches[0].identifier}o.touch=function(C,G,Q){if(arguments.length<3&&(Q=G,G=ee().changedTouches),G)for(var oe,de=0,Ae=G.length;de<Ae;++de)if((oe=G[de]).identifier===Q)return _t(C,oe)},o.behavior.drag=function(){var C=$(de,"drag","dragstart","dragend"),G=null,Q=Ae(V,o.mouse,t,"mousemove","mouseup"),oe=Ae(ot,o.touch,R,"touchmove","touchend");function de(){this.on("mousedown.drag",Q).on("touchstart.drag",oe)}function Ae(De,je,Ye,Ke,st){return function(){var mt,Et=o.event.target.correspondingElement||o.event.target,Dt=this.parentNode,It=C.of(this,arguments),qt=0,Ft=De(),on=".drag"+(null==Ft?"":"-"+Ft),Qt=o.select(Ye(Et)).on(Ke+on,function(){var En,Bn,qn=je(Dt,Ft);qn&&(qt|=(En=qn[0]-kn[0])|(Bn=qn[1]-kn[1]),kn=qn,It({type:"drag",x:qn[0]+mt[0],y:qn[1]+mt[1],dx:En,dy:Bn}))}).on(st+on,function(){je(Dt,Ft)&&(Qt.on(Ke+on,null).on(st+on,null),Kt(qt),It({type:"dragend"}))}),Kt=Tt(Et),kn=je(Dt,Ft);mt=G?[(mt=G.apply(this,arguments)).x-kn[0],mt.y-kn[1]]:[0,0],It({type:"dragstart"})}}return de.origin=function(De){return arguments.length?(G=De,de):G},o.rebind(de,C,"on")},o.touches=function(C,G){return arguments.length<2&&(G=ee().touches),G?_(G).map(function(Q){var oe=_t(C,Q);return oe.identifier=Q.identifier,oe}):[]};var it=1e-6,Pt=it*it,jt=Math.PI,Ut=2*jt,Rt=Ut-it,Je=jt/2,et=jt/180,qe=180/jt;function $e(C){return C>1?Je:C<-1?-Je:Math.asin(C)}function pt(C){return((C=Math.exp(C))+1/C)/2}var ct=Math.SQRT2;o.interpolateZoom=function(C,G){var Q,oe,de=C[0],Ae=C[1],De=C[2],Ke=G[2],st=G[0]-de,mt=G[1]-Ae,xt=st*st+mt*mt;if(xt<Pt)oe=Math.log(Ke/De)/ct,Q=function(on){return[de+on*st,Ae+on*mt,De*Math.exp(ct*on*oe)]};else{var Et=Math.sqrt(xt),Dt=(Ke*Ke-De*De+4*xt)/(2*De*2*Et),It=(Ke*Ke-De*De-4*xt)/(2*Ke*2*Et),qt=Math.log(Math.sqrt(Dt*Dt+1)-Dt),Ft=Math.log(Math.sqrt(It*It+1)-It);oe=(Ft-qt)/ct,Q=function(on){var Qt,Bn,Kt=on*oe,kn=pt(qt),En=De/(2*Et)*(kn*(Qt=ct*Kt+qt,((Qt=Math.exp(2*Qt))-1)/(Qt+1))-(Bn=qt,((Bn=Math.exp(Bn))-1/Bn)/2));return[de+En*st,Ae+En*mt,De*kn/pt(ct*Kt+qt)]}}return Q.duration=1e3*oe,Q},o.behavior.zoom=function(){var C,G,Q,oe,de,Ae,De,je,Ye,Ke={x:0,y:0,k:1},st=[960,500],mt=ut,xt=250,Et=0,Dt="mousedown.zoom",It="mousemove.zoom",qt="mouseup.zoom",Ft="touchstart.zoom",on=$(Qt,"zoomstart","zoom","zoomend");function Qt(mr){mr.on(Dt,sr).on(Ge+".zoom",Dr).on("dblclick.zoom",Wr).on(Ft,_r)}function Kt(mr){return[(mr[0]-Ke.x)/Ke.k,(mr[1]-Ke.y)/Ke.k]}function kn(mr){Ke.k=Math.max(mt[0],Math.min(mt[1],mr))}function En(mr,br){var jr;Ke.x+=mr[0]-(br=[(jr=br)[0]*Ke.k+Ke.x,jr[1]*Ke.k+Ke.y])[0],Ke.y+=mr[1]-br[1]}function Bn(mr,br,jr,Mr){mr.__chart__={x:Ke.x,y:Ke.y,k:Ke.k},kn(Math.pow(2,Mr)),En(G=br,jr),mr=o.select(mr),xt>0&&(mr=mr.transition().duration(xt)),mr.call(Qt.event)}function qn(){De&&De.domain(Ae.range().map(function(mr){return(mr-Ke.x)/Ke.k}).map(Ae.invert)),Ye&&Ye.domain(je.range().map(function(mr){return(mr-Ke.y)/Ke.k}).map(je.invert))}function er(mr){Et++||mr({type:"zoomstart"})}function gr(mr){qn(),mr({type:"zoom",scale:Ke.k,translate:[Ke.x,Ke.y]})}function wr(mr){--Et||(mr({type:"zoomend"}),G=null)}function sr(){var mr=this,br=on.of(mr,arguments),jr=0,Mr=o.select(t(mr)).on(It,function(){jr=1,En(o.mouse(mr),Gr),gr(br)}).on(qt,function(){Mr.on(It,null).on(qt,null),$r(jr),wr(br)}),Gr=Kt(o.mouse(mr)),$r=Tt(mr);To.call(mr),er(br)}function _r(){var mr,br=this,jr=on.of(br,arguments),Mr={},Gr=0,$r=".zoom-"+o.event.changedTouches[0].identifier,si="touchmove"+$r,li="touchend"+$r,pi=[],_i=o.select(br),na=Tt(br);function ga(){var Ni=o.touches(br);return mr=Ke.k,Ni.forEach(function(wi){wi.identifier in Mr&&(Mr[wi.identifier]=Kt(wi))}),Ni}function Ua(){var Ni=o.event.target;o.select(Ni).on(si,Fa).on(li,aa),pi.push(Ni);for(var wi=o.event.changedTouches,ra=0,Yi=wi.length;ra<Yi;++ra)Mr[wi[ra].identifier]=null;var Si=ga(),ua=Date.now();if(1===Si.length){if(ua-de<500){var ia=Si[0];Bn(br,ia,Mr[ia.identifier],Math.floor(Math.log(Ke.k)/Math.LN2)+1),te()}de=ua}else if(Si.length>1){var Ca=Si[1],Is=(ia=Si[0])[0]-Ca[0],Dl=ia[1]-Ca[1];Gr=Is*Is+Dl*Dl}}function Fa(){var Ni,wi,ra,Yi,Si=o.touches(br);To.call(br);for(var ua=0,ia=Si.length;ua<ia;++ua,Yi=null)if(Yi=Mr[(ra=Si[ua]).identifier]){if(wi)break;Ni=ra,wi=Yi}if(Yi){var Ca=(Ca=ra[0]-Ni[0])*Ca+(Ca=ra[1]-Ni[1])*Ca,Is=Gr&&Math.sqrt(Ca/Gr);Ni=[(Ni[0]+ra[0])/2,(Ni[1]+ra[1])/2],wi=[(wi[0]+Yi[0])/2,(wi[1]+Yi[1])/2],kn(Is*mr)}de=null,En(Ni,wi),gr(jr)}function aa(){if(o.event.touches.length){for(var Ni=o.event.changedTouches,wi=0,ra=Ni.length;wi<ra;++wi)delete Mr[Ni[wi].identifier];for(var Yi in Mr)return void ga()}o.selectAll(pi).on($r,null),_i.on(Dt,sr).on(Ft,_r),na(),wr(jr)}Ua(),er(jr),_i.on(Dt,null).on(Ft,Ua)}function Dr(){var mr=on.of(this,arguments);oe?clearTimeout(oe):(To.call(this),C=Kt(G=Q||o.mouse(this)),er(mr)),oe=setTimeout(function(){oe=null,wr(mr)},50),te(),kn(Math.pow(2,.002*Ve())*Ke.k),En(G,C),gr(mr)}function Wr(){var mr=o.mouse(this),br=Math.log(Ke.k)/Math.LN2;Bn(this,mr,Kt(mr),o.event.shiftKey?Math.ceil(br)-1:Math.floor(br)+1)}return Ge||(Ge="onwheel"in p?(Ve=function(){return-o.event.deltaY*(o.event.deltaMode?120:1)},"wheel"):"onmousewheel"in p?(Ve=function(){return o.event.wheelDelta},"mousewheel"):(Ve=function(){return-o.event.detail},"MozMousePixelScroll")),Qt.event=function(mr){mr.each(function(){var br=on.of(this,arguments),jr=Ke;ya?o.select(this).transition().each("start.zoom",function(){Ke=this.__chart__||{x:0,y:0,k:1},er(br)}).tween("zoom:zoom",function(){var Mr=st[0],$r=G?G[0]:Mr/2,si=G?G[1]:st[1]/2,li=o.interpolateZoom([($r-Ke.x)/Ke.k,(si-Ke.y)/Ke.k,Mr/Ke.k],[($r-jr.x)/jr.k,(si-jr.y)/jr.k,Mr/jr.k]);return function(pi){var _i=li(pi),na=Mr/_i[2];this.__chart__=Ke={x:$r-_i[0]*na,y:si-_i[1]*na,k:na},gr(br)}}).each("interrupt.zoom",function(){wr(br)}).each("end.zoom",function(){wr(br)}):(this.__chart__=Ke,er(br),gr(br),wr(br))})},Qt.translate=function(mr){return arguments.length?(Ke={x:+mr[0],y:+mr[1],k:Ke.k},qn(),Qt):[Ke.x,Ke.y]},Qt.scale=function(mr){return arguments.length?(Ke={x:Ke.x,y:Ke.y,k:null},kn(+mr),qn(),Qt):Ke.k},Qt.scaleExtent=function(mr){return arguments.length?(mt=null==mr?ut:[+mr[0],+mr[1]],Qt):mt},Qt.center=function(mr){return arguments.length?(Q=mr&&[+mr[0],+mr[1]],Qt):Q},Qt.size=function(mr){return arguments.length?(st=mr&&[+mr[0],+mr[1]],Qt):st},Qt.duration=function(mr){return arguments.length?(xt=+mr,Qt):xt},Qt.x=function(mr){return arguments.length?(De=mr,Ae=mr.copy(),Ke={x:0,y:0,k:1},Qt):De},Qt.y=function(mr){return arguments.length?(Ye=mr,je=mr.copy(),Ke={x:0,y:0,k:1},Qt):Ye},o.rebind(Qt,on,"on")};var Ve,Ge,ut=[0,1/0];function Qe(){}function yt(C,G,Q){return this instanceof yt?(this.h=+C,this.s=+G,void(this.l=+Q)):arguments.length<2?C instanceof yt?new yt(C.h,C.s,C.l):wn(""+C,Ln,yt):new yt(C,G,Q)}o.color=Qe,Qe.prototype.toString=function(){return this.rgb()+""},o.hsl=yt;var wt=yt.prototype=new Qe;function kt(C,G,Q){var oe,de;function Ae(De){return Math.round(255*((je=De)>360?je-=360:je<0&&(je+=360),je<60?oe+(de-oe)*je/60:je<180?de:je<240?oe+(de-oe)*(240-je)/60:oe));var je}return C=isNaN(C)?0:(C%=360)<0?C+360:C,G=isNaN(G)||G<0?0:G>1?1:G,oe=2*(Q=Q<0?0:Q>1?1:Q)-(de=Q<=.5?Q*(1+G):Q+G-Q*G),new Dn(Ae(C+120),Ae(C),Ae(C-120))}function vt(C,G,Q){return this instanceof vt?(this.h=+C,this.c=+G,void(this.l=+Q)):arguments.length<2?C instanceof vt?new vt(C.h,C.c,C.l):(oe=C instanceof Ot?C.l:(C=Pn((C=o.rgb(C)).r,C.g,C.b)).l,de=C.a,Ae=C.b,oe>0?new vt(Math.atan2(Ae,de)*qe,Math.sqrt(de*de+Ae*Ae),oe):new vt(NaN,NaN,oe)):new vt(C,G,Q);var oe,de,Ae}wt.brighter=function(C){return C=Math.pow(.7,arguments.length?C:1),new yt(this.h,this.s,this.l/C)},wt.darker=function(C){return C=Math.pow(.7,arguments.length?C:1),new yt(this.h,this.s,C*this.l)},wt.rgb=function(){return kt(this.h,this.s,this.l)},o.hcl=vt;var Lt=vt.prototype=new Qe;function St(C,G,Q){return isNaN(C)&&(C=0),isNaN(G)&&(G=0),new Ot(Q,Math.cos(C*=et)*G,Math.sin(C)*G)}function Ot(C,G,Q){return this instanceof Ot?(this.l=+C,this.a=+G,void(this.b=+Q)):arguments.length<2?C instanceof Ot?new Ot(C.l,C.a,C.b):C instanceof vt?St(C.h,C.c,C.l):Pn((C=Dn(C)).r,C.g,C.b):new Ot(C,G,Q)}Lt.brighter=function(C){return new vt(this.h,this.c,Math.min(100,this.l+Nt*(arguments.length?C:1)))},Lt.darker=function(C){return new vt(this.h,this.c,Math.max(0,this.l-Nt*(arguments.length?C:1)))},Lt.rgb=function(){return St(this.h,this.c,this.l).rgb()},o.lab=Ot;var Nt=18,Bt=.95047,Vt=1,nn=1.08883,gn=Ot.prototype=new Qe;function Jt(C,G,Q){var oe=(C+16)/116,de=oe+G/500,Ae=oe-Q/200;return new Dn(Gn(3.2404542*(de=an(de)*Bt)-1.5371385*(oe=an(oe)*Vt)-.4985314*(Ae=an(Ae)*nn)),Gn(-.969266*de+1.8760108*oe+.041556*Ae),Gn(.0556434*de-.2040259*oe+1.0572252*Ae))}function an(C){return C>.206893034?C*C*C:(C-.13793103448275862)/7.787037}function Xt(C){return C>.008856?Math.pow(C,.3333333333333333):7.787037*C+.13793103448275862}function Gn(C){return Math.round(255*(C<=.00304?12.92*C:1.055*Math.pow(C,.4166666666666667)-.055))}function Dn(C,G,Q){return this instanceof Dn?(this.r=~~C,this.g=~~G,void(this.b=~~Q)):arguments.length<2?C instanceof Dn?new Dn(C.r,C.g,C.b):wn(""+C,Dn,kt):new Dn(C,G,Q)}function An(C){return new Dn(C>>16,C>>8&255,255&C)}function cn(C){return An(C)+""}gn.brighter=function(C){return new Ot(Math.min(100,this.l+Nt*(arguments.length?C:1)),this.a,this.b)},gn.darker=function(C){return new Ot(Math.max(0,this.l-Nt*(arguments.length?C:1)),this.a,this.b)},gn.rgb=function(){return Jt(this.l,this.a,this.b)},o.rgb=Dn;var bn=Dn.prototype=new Qe;function hn(C){return C<16?"0"+Math.max(0,C).toString(16):Math.min(255,C).toString(16)}function wn(C,G,Q){var oe,de,Ae,De=0,je=0,Ye=0;if(oe=/([a-z]+)\((.*)\)/.exec(C=C.toLowerCase()))switch(de=oe[2].split(","),oe[1]){case"hsl":return Q(parseFloat(de[0]),parseFloat(de[1])/100,parseFloat(de[2])/100);case"rgb":return G(jn(de[0]),jn(de[1]),jn(de[2]))}return(Ae=Fn.get(C))?G(Ae.r,Ae.g,Ae.b):(null==C||"#"!==C.charAt(0)||isNaN(Ae=parseInt(C.slice(1),16))||(4===C.length?(De=(3840&Ae)>>4,De|=De>>4,je=240&Ae,je|=je>>4,Ye=15&Ae,Ye|=Ye<<4):7===C.length&&(De=(16711680&Ae)>>16,je=(65280&Ae)>>8,Ye=255&Ae)),G(De,je,Ye))}function Ln(C,G,Q){var oe,de,Ae=Math.min(C/=255,G/=255,Q/=255),De=Math.max(C,G,Q),je=De-Ae,Ye=(De+Ae)/2;return je?(de=Ye<.5?je/(De+Ae):je/(2-De-Ae),oe=C==De?(G-Q)/je+(G<Q?6:0):G==De?(Q-C)/je+2:(C-G)/je+4,oe*=60):(oe=NaN,de=Ye>0&&Ye<1?0:oe),new yt(oe,de,Ye)}function Pn(C,G,Q){var oe=Xt((.4124564*(C=Nn(C))+.3575761*(G=Nn(G))+.1804375*(Q=Nn(Q)))/Bt),de=Xt((.2126729*C+.7151522*G+.072175*Q)/Vt);return Ot(116*de-16,500*(oe-de),200*(de-Xt((.0193339*C+.119192*G+.9503041*Q)/nn)))}function Nn(C){return(C/=255)<=.04045?C/12.92:Math.pow((C+.055)/1.055,2.4)}function jn(C){var G=parseFloat(C);return"%"===C.charAt(C.length-1)?Math.round(2.55*G):G}bn.brighter=function(C){C=Math.pow(.7,arguments.length?C:1);var G=this.r,Q=this.g,oe=this.b;return G||Q||oe?(G&&G<30&&(G=30),Q&&Q<30&&(Q=30),oe&&oe<30&&(oe=30),new Dn(Math.min(255,G/C),Math.min(255,Q/C),Math.min(255,oe/C))):new Dn(30,30,30)},bn.darker=function(C){return new Dn((C=Math.pow(.7,arguments.length?C:1))*this.r,C*this.g,C*this.b)},bn.hsl=function(){return Ln(this.r,this.g,this.b)},bn.toString=function(){return"#"+hn(this.r)+hn(this.g)+hn(this.b)};var Fn=o.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function Jn(C){return"function"==typeof C?C:function(){return C}}function Zn(C){return function(G,Q,oe){return 2===arguments.length&&"function"==typeof Q&&(oe=Q,Q=null),hr(G,Q,C,oe)}}function hr(C,G,Q,oe){var st,de={},Ae=o.dispatch("beforesend","progress","load","error"),De={},je=new XMLHttpRequest,Ye=null;function Ke(){var st,xt,Et,mt=je.status;if(!mt&&((Et=(xt=je).responseType)&&"text"!==Et?xt.response:xt.responseText)||mt>=200&&mt<300||304===mt){try{st=Q.call(de,je)}catch(xt){return void Ae.error.call(de,xt)}Ae.load.call(de,st)}else Ae.error.call(de,je)}return self.XDomainRequest&&!("withCredentials"in je)&&/^(http(s)?:)?\/\//.test(C)&&(je=new XDomainRequest),"onload"in je?je.onload=je.onerror=Ke:je.onreadystatechange=function(){je.readyState>3&&Ke()},je.onprogress=function(st){var mt=o.event;o.event=st;try{Ae.progress.call(de,je)}finally{o.event=mt}},de.header=function(st,mt){return st=(st+"").toLowerCase(),arguments.length<2?De[st]:(null==mt?delete De[st]:De[st]=mt+"",de)},de.mimeType=function(st){return arguments.length?(G=null==st?null:st+"",de):G},de.responseType=function(st){return arguments.length?(Ye=st,de):Ye},de.response=function(st){return Q=st,de},["get","post"].forEach(function(st){de[st]=function(){return de.send.apply(de,[st].concat(_(arguments)))}}),de.send=function(st,mt,xt){if(2===arguments.length&&"function"==typeof mt&&(xt=mt,mt=null),je.open(st,C,!0),null==G||"accept"in De||(De.accept=G+",*/*"),je.setRequestHeader)for(var Et in De)je.setRequestHeader(Et,De[Et]);return null!=G&&je.overrideMimeType&&je.overrideMimeType(G),null!=Ye&&(je.responseType=Ye),null!=xt&&de.on("error",xt).on("load",function(Dt){xt(null,Dt)}),Ae.beforesend.call(de,je),je.send(mt??null),de},de.abort=function(){return je.abort(),de},o.rebind(de,Ae,"on"),null==oe?de:de.get(1===(st=oe).length?function(mt,xt){st(null==mt?xt:null)}:st)}Fn.forEach(function(C,G){Fn.set(C,An(G))}),o.functor=Jn,o.xhr=Zn(R),o.dsv=function(C,G){var Q=new RegExp('["'+C+"\n]"),oe=C.charCodeAt(0);function de(Ke,st,mt){arguments.length<3&&(mt=st,st=null);var xt=hr(Ke,G,null==st?Ae:De(st),mt);return xt.row=function(Et){return arguments.length?xt.response(null==(st=Et)?Ae:De(Et)):st},xt}function Ae(Ke){return de.parse(Ke.responseText)}function De(Ke){return function(st){return de.parse(st.responseText,Ke)}}function je(Ke){return Ke.map(Ye).join(C)}function Ye(Ke){return Q.test(Ke)?'"'+Ke.replace(/\"/g,'""')+'"':Ke}return de.parse=function(Ke,st){var mt;return de.parseRows(Ke,function(xt,Et){if(mt)return mt(xt,Et-1);var Dt=function(It){for(var qt={},Ft=xt.length,on=0;on<Ft;++on)qt[xt[on]]=It[on];return qt};mt=st?function(It,qt){return st(Dt(It),qt)}:Dt})},de.parseRows=function(Ke,st){var mt,xt,Et={},Dt={},It=[],qt=Ke.length,Ft=0,on=0;function Qt(){if(Ft>=qt)return Dt;if(xt)return xt=!1,Et;var kn=Ft;if(34===Ke.charCodeAt(kn)){for(var En=kn;En++<qt;)if(34===Ke.charCodeAt(En)){if(34!==Ke.charCodeAt(En+1))break;++En}return Ft=En+2,13===(Bn=Ke.charCodeAt(En+1))?(xt=!0,10===Ke.charCodeAt(En+2)&&++Ft):10===Bn&&(xt=!0),Ke.slice(kn+1,En).replace(/""/g,'"')}for(;Ft<qt;){var Bn,qn=1;if(10===(Bn=Ke.charCodeAt(Ft++)))xt=!0;else if(13===Bn)xt=!0,10===Ke.charCodeAt(Ft)&&(++Ft,++qn);else if(Bn!==oe)continue;return Ke.slice(kn,Ft-qn)}return Ke.slice(kn)}for(;(mt=Qt())!==Dt;){for(var Kt=[];mt!==Et&&mt!==Dt;)Kt.push(mt),mt=Qt();st&&null==(Kt=st(Kt,on++))||It.push(Kt)}return It},de.format=function(Ke){if(Array.isArray(Ke[0]))return de.formatRows(Ke);var st=new U,mt=[];return Ke.forEach(function(xt){for(var Et in xt)st.has(Et)||mt.push(st.add(Et))}),[mt.map(Ye).join(C)].concat(Ke.map(function(xt){return mt.map(function(Et){return Ye(xt[Et])}).join(C)})).join("\n")},de.formatRows=function(Ke){return Ke.map(je).join("\n")},de},o.csv=o.dsv(",","text/csv"),o.tsv=o.dsv("\t","text/tab-separated-values");var rr,dr,nr,Sr,ln=this[Y(this,"requestAnimationFrame")]||function(C){setTimeout(C,17)};function dn(C,G,Q){var oe=arguments.length;oe<2&&(G=0),oe<3&&(Q=Date.now());var de={c:C,t:Q+G,n:null};return dr?dr.n=de:rr=de,dr=de,nr||(Sr=clearTimeout(Sr),nr=1,ln(Un)),de}function Un(){var C=Mn(),G=Hn()-C;G>24?(isFinite(G)&&(clearTimeout(Sr),Sr=setTimeout(Un,G)),nr=0):(nr=1,ln(Un))}function Mn(){for(var C=Date.now(),G=rr;G;)C>=G.t&&G.c(C-G.t)&&(G.c=null),G=G.n;return C}function Hn(){for(var C,G=rr,Q=1/0;G;)G.c?(G.t<Q&&(Q=G.t),G=(C=G).n):G=C?C.n=G.n:rr=G.n;return dr=C,Q}function Wn(C){return C[0]}function $n(C){return C[1]}function lr(C){for(var G,Q,oe,de=C.length,Ae=[0,1],De=2,je=2;je<de;je++){for(;De>1&&((Q=C[Ae[De-1]])[0]-(G=C[Ae[De-2]])[0])*((oe=C[je])[1]-G[1])-(Q[1]-G[1])*(oe[0]-G[0])<=0;)--De;Ae[De++]=je}return Ae.slice(0,De)}function Cr(C,G){return C[0]-G[0]||C[1]-G[1]}o.timer=function(){dn.apply(this,arguments)},o.timer.flush=function(){Mn(),Hn()},o.round=function(C,G){return G?Math.round(C*(G=Math.pow(10,G)))/G:Math.round(C)},o.geom={},o.geom.hull=function(C){var G=Wn,Q=$n;if(arguments.length)return oe(C);function oe(de){if(de.length<3)return[];var Ae,De=Jn(G),je=Jn(Q),Ye=de.length,Ke=[],st=[];for(Ae=0;Ae<Ye;Ae++)Ke.push([+De.call(this,de[Ae],Ae),+je.call(this,de[Ae],Ae),Ae]);for(Ke.sort(Cr),Ae=0;Ae<Ye;Ae++)st.push([Ke[Ae][0],-Ke[Ae][1]]);var mt=lr(Ke),xt=lr(st),Et=xt[0]===mt[0],Dt=xt[xt.length-1]===mt[mt.length-1],It=[];for(Ae=mt.length-1;Ae>=0;--Ae)It.push(de[Ke[mt[Ae]][2]]);for(Ae=+Et;Ae<xt.length-Dt;++Ae)It.push(de[Ke[xt[Ae]][2]]);return It}return oe.x=function(de){return arguments.length?(G=de,oe):G},oe.y=function(de){return arguments.length?(Q=de,oe):Q},oe},o.geom.polygon=function(C){return X(C,sn),C};var sn=o.geom.polygon.prototype=[];function Sn(C,G,Q){return(Q[0]-G[0])*(C[1]-G[1])<(Q[1]-G[1])*(C[0]-G[0])}function zt(C,G,Q,oe){var de=C[0],Ae=Q[0],De=G[0]-de,je=oe[0]-Ae,Ye=C[1],Ke=Q[1],st=G[1]-Ye,mt=oe[1]-Ke,xt=(je*(Ye-Ke)-mt*(de-Ae))/(mt*De-je*st);return[de+xt*De,Ye+xt*st]}function Yt(C){var G=C[0],Q=C[C.length-1];return!(G[0]-Q[0]||G[1]-Q[1])}sn.area=function(){for(var C,G=-1,Q=this.length,oe=this[Q-1],de=0;++G<Q;)de+=(C=oe)[1]*(oe=this[G])[0]-C[0]*oe[1];return.5*de},sn.centroid=function(C){var G,Q,oe=-1,de=this.length,Ae=0,De=0,je=this[de-1];for(arguments.length||(C=-1/(6*this.area()));++oe<de;)Ae+=((G=je)[0]+(je=this[oe])[0])*(Q=G[0]*je[1]-je[0]*G[1]),De+=(G[1]+je[1])*Q;return[Ae*C,De*C]},sn.clip=function(C){for(var G,Q,oe,de,Ae,De,je=Yt(C),Ye=-1,Ke=this.length-Yt(this),st=this[Ke-1];++Ye<Ke;){for(G=C.slice(),C.length=0,de=this[Ye],Ae=G[(oe=G.length-je)-1],Q=-1;++Q<oe;)Sn(De=G[Q],st,de)?(Sn(Ae,st,de)||C.push(zt(Ae,De,st,de)),C.push(De)):Sn(Ae,st,de)&&C.push(zt(Ae,De,st,de)),Ae=De;je&&C.push(C[0]),st=de}return C};var un,_n,Tn,Cn,vn,rn=[],tn=[];function fn(){Fi(this),this.edge=this.site=this.circle=null}function yn(C){var G=rn.pop()||new fn;return G.site=C,G}function zn(C){Ar(C),Tn.remove(C),rn.push(C),Fi(C)}function Vn(C){var G=C.circle,Q=G.x,oe=G.cy,de={x:Q,y:oe},Ae=C.P,De=C.N,je=[C];zn(C);for(var Ye=Ae;Ye.circle&&g(Q-Ye.circle.x)<it&&g(oe-Ye.circle.cy)<it;)Ae=Ye.P,je.unshift(Ye),zn(Ye),Ye=Ae;je.unshift(Ye),Ar(Ye);for(var Ke=De;Ke.circle&&g(Q-Ke.circle.x)<it&&g(oe-Ke.circle.cy)<it;)De=Ke.N,je.push(Ke),zn(Ke),Ke=De;je.push(Ke),Ar(Ke);var st,mt=je.length;for(st=1;st<mt;++st)Pr((Ke=je[st]).edge,(Ye=je[st-1]).site,Ke.site,de);(Ke=je[mt-1]).edge=xr((Ye=je[0]).site,Ke.site,null,de),cr(Ye),cr(Ke)}function Xn(C){for(var G,Q,oe,de,Ae=C.x,De=C.y,je=Tn._;je;)if((oe=Qn(je,De)-Ae)>it)je=je.L;else{if(!((de=Ae-pr(je,De))>it)){oe>-it?(G=je.P,Q=je):de>-it?(G=je,Q=je.N):G=Q=je;break}if(!je.R){G=je;break}je=je.R}var Ye=yn(C);if(Tn.insert(G,Ye),G||Q){if(G===Q)return Ar(G),Q=yn(G.site),Tn.insert(Ye,Q),Ye.edge=Q.edge=xr(G.site,Ye.site),cr(G),void cr(Q);if(Q){Ar(G),Ar(Q);var Ke=G.site,st=Ke.x,mt=Ke.y,xt=C.x-st,Et=C.y-mt,Dt=Q.site,It=Dt.x-st,qt=Dt.y-mt,Ft=2*(xt*qt-Et*It),on=xt*xt+Et*Et,Qt=It*It+qt*qt,Kt={x:(qt*on-Et*Qt)/Ft+st,y:(xt*Qt-It*on)/Ft+mt};Pr(Q.edge,Ke,Dt,Kt),Ye.edge=xr(Ke,C,null,Kt),Q.edge=xr(C,Dt,null,Kt),cr(G),cr(Q)}else Ye.edge=xr(G.site,Ye.site)}}function Qn(C,G){var Q=C.site,oe=Q.x,de=Q.y,Ae=de-G;if(!Ae)return oe;var De=C.P;if(!De)return-1/0;var je=(Q=De.site).x,Ye=Q.y,Ke=Ye-G;if(!Ke)return je;var st=je-oe,mt=1/Ae-1/Ke,xt=st/Ke;return mt?(-xt+Math.sqrt(xt*xt-2*mt*(st*st/(-2*Ke)-Ye+Ke/2+de-Ae/2)))/mt+oe:(oe+je)/2}function pr(C,G){var Q=C.N;if(Q)return Qn(Q,G);var oe=C.site;return oe.y===G?oe.x:1/0}function or(C){this.site=C,this.edges=[]}function fr(C,G){return G.angle-C.angle}function vr(){Fi(this),this.x=this.y=this.arc=this.site=this.cy=null}function cr(C){var G=C.P,Q=C.N;if(G&&Q){var oe=G.site,de=C.site,Ae=Q.site;if(oe!==Ae){var De=de.x,je=de.y,Ye=oe.x-De,Ke=oe.y-je,st=Ae.x-De,mt=2*(Ye*(qt=Ae.y-je)-Ke*st);if(!(mt>=-Pt)){var xt=Ye*Ye+Ke*Ke,Et=st*st+qt*qt,Dt=(qt*xt-Ke*Et)/mt,It=(Ye*Et-st*xt)/mt,qt=It+je,Ft=tn.pop()||new vr;Ft.arc=C,Ft.site=de,Ft.x=Dt+De,Ft.y=qt+Math.sqrt(Dt*Dt+It*It),Ft.cy=qt,C.circle=Ft;for(var on=null,Qt=vn._;Qt;)if(Ft.y<Qt.y||Ft.y===Qt.y&&Ft.x<=Qt.x){if(!Qt.L){on=Qt.P;break}Qt=Qt.L}else{if(!Qt.R){on=Qt;break}Qt=Qt.R}vn.insert(on,Ft),on||(Cn=Ft)}}}}function Ar(C){var G=C.circle;G&&(G.P||(Cn=G.N),vn.remove(G),tn.push(G),Fi(G),C.circle=null)}function Fr(C,G){var Q=C.b;if(Q)return!0;var oe,de,Ae=C.a,De=G[0][0],je=G[1][0],Ye=G[0][1],Ke=G[1][1],st=C.l,mt=C.r,xt=st.x,Et=st.y,Dt=mt.x,It=mt.y,qt=(xt+Dt)/2;if(It===Et){if(qt<De||qt>=je)return;if(xt>Dt){if(Ae){if(Ae.y>=Ke)return}else Ae={x:qt,y:Ye};Q={x:qt,y:Ke}}else{if(Ae){if(Ae.y<Ye)return}else Ae={x:qt,y:Ke};Q={x:qt,y:Ye}}}else if(de=(Et+It)/2-(oe=(xt-Dt)/(It-Et))*qt,oe<-1||oe>1)if(xt>Dt){if(Ae){if(Ae.y>=Ke)return}else Ae={x:(Ye-de)/oe,y:Ye};Q={x:(Ke-de)/oe,y:Ke}}else{if(Ae){if(Ae.y<Ye)return}else Ae={x:(Ke-de)/oe,y:Ke};Q={x:(Ye-de)/oe,y:Ye}}else if(Et<It){if(Ae){if(Ae.x>=je)return}else Ae={x:De,y:oe*De+de};Q={x:je,y:oe*je+de}}else{if(Ae){if(Ae.x<De)return}else Ae={x:je,y:oe*je+de};Q={x:De,y:oe*De+de}}return C.a=Ae,C.b=Q,!0}function Lr(C,G){this.l=C,this.r=G,this.a=this.b=null}function xr(C,G,Q,oe){var de=new Lr(C,G);return un.push(de),Q&&Pr(de,C,G,Q),oe&&Pr(de,G,C,oe),_n[C.i].edges.push(new qr(de,C,G)),_n[G.i].edges.push(new qr(de,G,C)),de}function Pr(C,G,Q,oe){C.a||C.b?C.l===Q?C.b=oe:C.a=oe:(C.a=oe,C.l=G,C.r=Q)}function qr(C,G,Q){var oe=C.a,de=C.b;this.edge=C,this.site=G,this.angle=Q?Math.atan2(Q.y-G.y,Q.x-G.x):C.l===G?Math.atan2(de.x-oe.x,oe.y-de.y):Math.atan2(oe.x-de.x,de.y-oe.y)}function Qr(){this._=null}function Fi(C){C.U=C.C=C.L=C.R=C.P=C.N=null}function ta(C,G){var Q=G,oe=G.R,de=Q.U;de?de.L===Q?de.L=oe:de.R=oe:C._=oe,oe.U=de,Q.U=oe,Q.R=oe.L,Q.R&&(Q.R.U=Q),oe.L=Q}function Ta(C,G){var Q=G,oe=G.L,de=Q.U;de?de.L===Q?de.L=oe:de.R=oe:C._=oe,oe.U=de,Q.U=oe,Q.L=oe.R,Q.L&&(Q.L.U=Q),oe.R=Q}function Gi(C){for(;C.L;)C=C.L;return C}function pa(C,G){var Q,oe,de,Ae=C.sort(qa).pop();for(un=[],_n=new Array(C.length),Tn=new Qr,vn=new Qr;;)if(de=Cn,Ae&&(!de||Ae.y<de.y||Ae.y===de.y&&Ae.x<de.x))Ae.x===Q&&Ae.y===oe||(_n[Ae.i]=new or(Ae),Xn(Ae),Q=Ae.x,oe=Ae.y),Ae=C.pop();else{if(!de)break;Vn(de.arc)}G&&(function(je){for(var Ye,Ke,st,mt,xt,Et=un,Dt=(Ke=je[0][0],st=je[0][1],mt=je[1][0],xt=je[1][1],function(qt){var Ft,on=qt.a,Qt=qt.b,Kt=on.x,kn=on.y,En=0,Bn=1,qn=Qt.x-Kt,er=Qt.y-kn;if(Ft=Ke-Kt,qn||!(Ft>0)){if(Ft/=qn,qn<0){if(Ft<En)return;Ft<Bn&&(Bn=Ft)}else if(qn>0){if(Ft>Bn)return;Ft>En&&(En=Ft)}if(Ft=mt-Kt,qn||!(Ft<0)){if(Ft/=qn,qn<0){if(Ft>Bn)return;Ft>En&&(En=Ft)}else if(qn>0){if(Ft<En)return;Ft<Bn&&(Bn=Ft)}if(Ft=st-kn,er||!(Ft>0)){if(Ft/=er,er<0){if(Ft<En)return;Ft<Bn&&(Bn=Ft)}else if(er>0){if(Ft>Bn)return;Ft>En&&(En=Ft)}if(Ft=xt-kn,er||!(Ft<0)){if(Ft/=er,er<0){if(Ft>Bn)return;Ft>En&&(En=Ft)}else if(er>0){if(Ft<En)return;Ft<Bn&&(Bn=Ft)}return En>0&&(qt.a={x:Kt+En*qn,y:kn+En*er}),Bn<1&&(qt.b={x:Kt+Bn*qn,y:kn+Bn*er}),qt}}}}}),It=Et.length;It--;)(!Fr(Ye=Et[It],je)||!Dt(Ye)||g(Ye.a.x-Ye.b.x)<it&&g(Ye.a.y-Ye.b.y)<it)&&(Ye.a=Ye.b=null,Et.splice(It,1))}(G),function(je){for(var Ye,Ke,st,mt,xt,Et,Dt,It,qt,Ft,on=je[0][0],Qt=je[1][0],Kt=je[0][1],kn=je[1][1],En=_n,Bn=En.length;Bn--;)if((xt=En[Bn])&&xt.prepare())for(It=(Dt=xt.edges).length,Et=0;Et<It;)st=(Ft=Dt[Et].end()).x,mt=Ft.y,Ye=(qt=Dt[++Et%It].start()).x,Ke=qt.y,(g(st-Ye)>it||g(mt-Ke)>it)&&(Dt.splice(Et,0,new qr((qn=xt.site,er=Ft,gr=g(st-on)<it&&kn-mt>it?{x:on,y:g(Ye-on)<it?Ke:kn}:g(mt-kn)<it&&Qt-st>it?{x:g(Ke-kn)<it?Ye:Qt,y:kn}:g(st-Qt)<it&&mt-Kt>it?{x:Qt,y:g(Ye-Qt)<it?Ke:Kt}:g(mt-Kt)<it&&st-on>it?{x:g(Ke-Kt)<it?Ye:on,y:Kt}:null,wr=void 0,(wr=new Lr(qn,null)).a=er,wr.b=gr,un.push(wr),wr),xt.site,null)),++It);var qn,er,gr,wr}(G));var De={cells:_n,edges:un};return Tn=vn=un=_n=null,De}function qa(C,G){return G.y-C.y||G.x-C.x}or.prototype.prepare=function(){for(var C,G=this.edges,Q=G.length;Q--;)(C=G[Q].edge).b&&C.a||G.splice(Q,1);return G.sort(fr),G.length},qr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Qr.prototype={insert:function(C,G){var Q,oe,de;if(C){if(G.P=C,G.N=C.N,C.N&&(C.N.P=G),C.N=G,C.R){for(C=C.R;C.L;)C=C.L;C.L=G}else C.R=G;Q=C}else this._?(C=Gi(this._),G.P=null,G.N=C,C.P=C.L=G,Q=C):(G.P=G.N=null,this._=G,Q=null);for(G.L=G.R=null,G.U=Q,G.C=!0,C=G;Q&&Q.C;)Q===(oe=Q.U).L?(de=oe.R)&&de.C?(Q.C=de.C=!1,oe.C=!0,C=oe):(C===Q.R&&(ta(this,Q),Q=(C=Q).U),Q.C=!1,oe.C=!0,Ta(this,oe)):(de=oe.L)&&de.C?(Q.C=de.C=!1,oe.C=!0,C=oe):(C===Q.L&&(Ta(this,Q),Q=(C=Q).U),Q.C=!1,oe.C=!0,ta(this,oe)),Q=C.U;this._.C=!1},remove:function(C){C.N&&(C.N.P=C.P),C.P&&(C.P.N=C.N),C.N=C.P=null;var G,Q,oe,de=C.U,Ae=C.L,De=C.R;if(Q=Ae?De?Gi(De):Ae:De,de?de.L===C?de.L=Q:de.R=Q:this._=Q,Ae&&De?(oe=Q.C,Q.C=C.C,Q.L=Ae,Ae.U=Q,Q!==De?(de=Q.U,Q.U=C.U,de.L=C=Q.R,Q.R=De,De.U=Q):(Q.U=de,de=Q,C=Q.R)):(oe=C.C,C=Q),C&&(C.U=de),!oe)if(C&&C.C)C.C=!1;else{do{if(C===this._)break;if(C===de.L){if((G=de.R).C&&(G.C=!1,de.C=!0,ta(this,de),G=de.R),G.L&&G.L.C||G.R&&G.R.C){G.R&&G.R.C||(G.L.C=!1,G.C=!0,Ta(this,G),G=de.R),G.C=de.C,de.C=G.R.C=!1,ta(this,de),C=this._;break}}else if((G=de.L).C&&(G.C=!1,de.C=!0,Ta(this,de),G=de.L),G.L&&G.L.C||G.R&&G.R.C){G.L&&G.L.C||(G.R.C=!1,G.C=!0,ta(this,G),G=de.L),G.C=de.C,de.C=G.L.C=!1,Ta(this,de),C=this._;break}G.C=!0,C=de,de=de.U}while(!C.C);C&&(C.C=!1)}}},o.geom.voronoi=function(C){var G=Wn,Q=$n,oe=G,de=Q,Ae=ti;if(C)return De(C);function De(Ye){var Ke=new Array(Ye.length),st=Ae[0][0],mt=Ae[0][1],xt=Ae[1][0],Et=Ae[1][1];return pa(je(Ye),Ae).cells.forEach(function(Dt,It){var qt=Dt.edges,Ft=Dt.site;(Ke[It]=qt.length?qt.map(function(on){var Qt=on.start();return[Qt.x,Qt.y]}):Ft.x>=st&&Ft.x<=xt&&Ft.y>=mt&&Ft.y<=Et?[[st,Et],[xt,Et],[xt,mt],[st,mt]]:[]).point=Ye[It]}),Ke}function je(Ye){return Ye.map(function(Ke,st){return{x:Math.round(oe(Ke,st)/it)*it,y:Math.round(de(Ke,st)/it)*it,i:st}})}return De.links=function(Ye){return pa(je(Ye)).edges.filter(function(Ke){return Ke.l&&Ke.r}).map(function(Ke){return{source:Ye[Ke.l.i],target:Ye[Ke.r.i]}})},De.triangles=function(Ye){var Ke=[];return pa(je(Ye)).cells.forEach(function(st,mt){for(var xt,Et,Dt,It,qt=st.site,Ft=st.edges.sort(fr),on=-1,Qt=Ft.length,Kt=Ft[Qt-1].edge,kn=Kt.l===qt?Kt.r:Kt.l;++on<Qt;)xt=kn,kn=(Kt=Ft[on].edge).l===qt?Kt.r:Kt.l,mt<xt.i&&mt<kn.i&&((Et=qt).x-(It=kn).x)*((Dt=xt).y-Et.y)-(Et.x-Dt.x)*(It.y-Et.y)<0&&Ke.push([Ye[mt],Ye[xt.i],Ye[kn.i]])}),Ke},De.x=function(Ye){return arguments.length?(oe=Jn(G=Ye),De):G},De.y=function(Ye){return arguments.length?(de=Jn(Q=Ye),De):Q},De.clipExtent=function(Ye){return arguments.length?(Ae=Ye??ti,De):Ae===ti?null:Ae},De.size=function(Ye){return arguments.length?De.clipExtent(Ye&&[[0,0],Ye]):Ae===ti?null:Ae&&Ae[1]},De};var ti=[[-1e6,-1e6],[1e6,1e6]];function _a(C){return C.x}function vo(C){return C.y}function ka(C,G,Q,oe,de,Ae){if(!C(G,Q,oe,de,Ae)){var De=.5*(Q+de),je=.5*(oe+Ae),Ye=G.nodes;Ye[0]&&ka(C,Ye[0],Q,oe,De,je),Ye[1]&&ka(C,Ye[1],De,oe,de,je),Ye[2]&&ka(C,Ye[2],Q,je,De,Ae),Ye[3]&&ka(C,Ye[3],De,je,de,Ae)}}function vs(C,G){C=o.rgb(C),G=o.rgb(G);var Q=C.r,oe=C.g,de=C.b,Ae=G.r-Q,De=G.g-oe,je=G.b-de;return function(Ye){return"#"+hn(Math.round(Q+Ae*Ye))+hn(Math.round(oe+De*Ye))+hn(Math.round(de+je*Ye))}}function ma(C,G){var Q,oe={},de={};for(Q in C)Q in G?oe[Q]=co(C[Q],G[Q]):de[Q]=C[Q];for(Q in G)Q in C||(de[Q]=G[Q]);return function(Ae){for(Q in oe)de[Q]=oe[Q](Ae);return de}}function Na(C,G){return C=+C,G=+G,function(Q){return C*(1-Q)+G*Q}}function Ho(C,G){var Q,oe,de,Ae=as.lastIndex=tl.lastIndex=0,De=-1,je=[],Ye=[];for(C+="",G+="";(Q=as.exec(C))&&(oe=tl.exec(G));)(de=oe.index)>Ae&&(de=G.slice(Ae,de),je[De]?je[De]+=de:je[++De]=de),(Q=Q[0])===(oe=oe[0])?je[De]?je[De]+=oe:je[++De]=oe:(je[++De]=null,Ye.push({i:De,x:Na(Q,oe)})),Ae=tl.lastIndex;return Ae<G.length&&(de=G.slice(Ae),je[De]?je[De]+=de:je[++De]=de),je.length<2?Ye[0]?(G=Ye[0].x,function(Ke){return G(Ke)+""}):function(){return G}:(G=Ye.length,function(Ke){for(var st,mt=0;mt<G;++mt)je[(st=Ye[mt]).i]=st.x(Ke);return je.join("")})}o.geom.delaunay=function(C){return o.geom.voronoi().triangles(C)},o.geom.quadtree=function(C,G,Q,oe,de){var Ae,De=Wn,je=$n;if(Ae=arguments.length)return De=_a,je=vo,3===Ae&&(de=Q,oe=G,Q=G=0),Ye(C);function Ye(Ke){var st,mt,xt,Et,Dt,It,qt,Ft,on,Qt=Jn(De),Kt=Jn(je);if(null!=G)It=G,qt=Q,Ft=oe,on=de;else if(Ft=on=-(It=qt=1/0),mt=[],xt=[],Dt=Ke.length,Ae)for(Et=0;Et<Dt;++Et)(st=Ke[Et]).x<It&&(It=st.x),st.y<qt&&(qt=st.y),st.x>Ft&&(Ft=st.x),st.y>on&&(on=st.y),mt.push(st.x),xt.push(st.y);else for(Et=0;Et<Dt;++Et){var kn=+Qt(st=Ke[Et],Et),En=+Kt(st,Et);kn<It&&(It=kn),En<qt&&(qt=En),kn>Ft&&(Ft=kn),En>on&&(on=En),mt.push(kn),xt.push(En)}var Bn=Ft-It,qn=on-qt;function er(sr,_r,Dr,Wr,mr,br,jr,Mr){if(!isNaN(Dr)&&!isNaN(Wr))if(sr.leaf){var Gr=sr.x,$r=sr.y;if(null!=Gr)if(g(Gr-Dr)+g($r-Wr)<.01)gr(sr,_r,Dr,Wr,mr,br,jr,Mr);else{var si=sr.point;sr.x=sr.y=sr.point=null,gr(sr,si,Gr,$r,mr,br,jr,Mr),gr(sr,_r,Dr,Wr,mr,br,jr,Mr)}else sr.x=Dr,sr.y=Wr,sr.point=_r}else gr(sr,_r,Dr,Wr,mr,br,jr,Mr)}function gr(sr,_r,Dr,Wr,mr,br,jr,Mr){var Gr=.5*(mr+jr),$r=.5*(br+Mr),si=Dr>=Gr,li=Wr>=$r,pi=li<<1|si;sr.leaf=!1,si?mr=Gr:jr=Gr,li?br=$r:Mr=$r,er(sr=sr.nodes[pi]||(sr.nodes[pi]={leaf:!0,nodes:[],point:null,x:null,y:null}),_r,Dr,Wr,mr,br,jr,Mr)}Bn>qn?on=qt+Bn:Ft=It+qn;var wr={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(sr){er(wr,sr,+Qt(sr,++Et),+Kt(sr,Et),It,qt,Ft,on)},visit:function(sr){ka(sr,wr,It,qt,Ft,on)},find:function(sr){return Dr=sr[0],Wr=sr[1],$r=1/0,function si(li,pi,_i,na,ga){if(!(pi>jr||_i>Mr||na<mr||ga<br)){if(Ua=li.point){var Ua,Fa=Dr-li.x,aa=Wr-li.y,Ni=Fa*Fa+aa*aa;if(Ni<$r){var wi=Math.sqrt($r=Ni);mr=Dr-wi,br=Wr-wi,jr=Dr+wi,Mr=Wr+wi,Gr=Ua}}for(var ra=li.nodes,Yi=.5*(pi+na),Si=.5*(_i+ga),ua=(Wr>=Si)<<1|Dr>=Yi,ia=ua+4;ua<ia;++ua)if(li=ra[3&ua])switch(3&ua){case 0:si(li,pi,_i,Yi,Si);break;case 1:si(li,Yi,_i,na,Si);break;case 2:si(li,pi,Si,Yi,ga);break;case 3:si(li,Yi,Si,na,ga)}}}(wr,mr=It,br=qt,jr=Ft,Mr=on),Gr;var Dr,Wr,mr,br,jr,Mr,Gr,$r}};if(Et=-1,null==G){for(;++Et<Dt;)er(wr,Ke[Et],mt[Et],xt[Et],It,qt,Ft,on);--Et}else Ke.forEach(wr.add);return mt=xt=Ke=st=null,wr}return Ye.x=function(Ke){return arguments.length?(De=Ke,Ye):De},Ye.y=function(Ke){return arguments.length?(je=Ke,Ye):je},Ye.extent=function(Ke){return arguments.length?(null==Ke?G=Q=oe=de=null:(G=+Ke[0][0],Q=+Ke[0][1],oe=+Ke[1][0],de=+Ke[1][1]),Ye):null==G?null:[[G,Q],[oe,de]]},Ye.size=function(Ke){return arguments.length?(null==Ke?G=Q=oe=de=null:(G=Q=0,oe=+Ke[0],de=+Ke[1]),Ye):null==G?null:[oe-G,de-Q]},Ye},o.interpolateRgb=vs,o.interpolateObject=ma,o.interpolateNumber=Na,o.interpolateString=Ho;var as=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tl=new RegExp(as.source,"g");function co(C,G){for(var Q,oe=o.interpolators.length;--oe>=0&&!(Q=o.interpolators[oe](C,G)););return Q}function Co(C,G){var Q,oe=[],de=[],Ae=C.length,De=G.length,je=Math.min(C.length,G.length);for(Q=0;Q<je;++Q)oe.push(co(C[Q],G[Q]));for(;Q<Ae;++Q)de[Q]=C[Q];for(;Q<De;++Q)de[Q]=G[Q];return function(Ye){for(Q=0;Q<je;++Q)de[Q]=oe[Q](Ye);return de}}o.interpolate=co,o.interpolators=[function(C,G){var Q=typeof G;return("string"===Q?Fn.has(G.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(G)?vs:Ho:G instanceof Qe?vs:Array.isArray(G)?Co:"object"===Q&&isNaN(G)?ma:Na)(C,G)}],o.interpolateArray=Co;var os=function(){return R},ki=o.map({linear:os,poly:function(C){return function(G){return Math.pow(G,C)}},quad:function(){return oo},cubic:function(){return Lo},sin:function(){return nl},exp:function(){return va},circle:function(){return Ns},elastic:function(C,G){var Q;return arguments.length<2&&(G=.45),arguments.length?Q=G/Ut*Math.asin(1/C):(C=1,Q=G/4),function(oe){return 1+C*Math.pow(2,-10*oe)*Math.sin((oe-Q)*Ut/G)}},back:function(C){return C||(C=1.70158),function(G){return G*G*((C+1)*G-C)}},bounce:function(){return ys}}),wa=o.map({in:R,out:fo,"in-out":yo,"out-in":function(C){return yo(fo(C))}});function fo(C){return function(G){return 1-C(1-G)}}function yo(C){return function(G){return.5*(G<.5?C(2*G):2-C(2-2*G))}}function oo(C){return C*C}function Lo(C){return C*C*C}function qo(C){if(C<=0)return 0;if(C>=1)return 1;var G=C*C,Q=G*C;return 4*(C<.5?Q:3*(C-G)+Q-.75)}function nl(C){return 1-Math.cos(C*Je)}function va(C){return Math.pow(2,10*(C-1))}function Ns(C){return 1-Math.sqrt(1-C*C)}function ys(C){return C<.36363636363636365?7.5625*C*C:C<.7272727272727273?7.5625*(C-=.5454545454545454)*C+.75:C<.9090909090909091?7.5625*(C-=.8181818181818182)*C+.9375:7.5625*(C-=.9545454545454546)*C+.984375}function _u(C,G){return G-=C,function(Q){return Math.round(C+G*Q)}}function wu(C){var G,Q,oe,de=[C.a,C.b],Ae=[C.c,C.d],De=ss(de),je=xs(de,Ae),Ye=ss(((G=Ae)[0]+=(oe=-je)*(Q=de)[0],G[1]+=oe*Q[1],G))||0;de[0]*Ae[1]<Ae[0]*de[1]&&(de[0]*=-1,de[1]*=-1,De*=-1,je*=-1),this.rotate=(De?Math.atan2(de[1],de[0]):Math.atan2(-Ae[0],Ae[1]))*qe,this.translate=[C.e,C.f],this.scale=[De,Ye],this.skew=Ye?Math.atan2(je,Ye)*qe:0}function xs(C,G){return C[0]*G[0]+C[1]*G[1]}function ss(C){var G=Math.sqrt(xs(C,C));return G&&(C[0]/=G,C[1]/=G),G}o.ease=function(C){var G,Q=C.indexOf("-"),oe=Q>=0?C.slice(0,Q):C,de=Q>=0?C.slice(Q+1):"in";return oe=ki.get(oe)||os,de=wa.get(de)||R,G=de(oe.apply(null,T.call(arguments,1))),function(Ae){return Ae<=0?0:Ae>=1?1:G(Ae)}},o.interpolateHcl=function(C,G){C=o.hcl(C),G=o.hcl(G);var Q=C.h,oe=C.c,de=C.l,Ae=G.h-Q,De=G.c-oe,je=G.l-de;return isNaN(De)&&(De=0,oe=isNaN(oe)?G.c:oe),isNaN(Ae)?(Ae=0,Q=isNaN(Q)?G.h:Q):Ae>180?Ae-=360:Ae<-180&&(Ae+=360),function(Ye){return St(Q+Ae*Ye,oe+De*Ye,de+je*Ye)+""}},o.interpolateHsl=function(C,G){C=o.hsl(C),G=o.hsl(G);var Q=C.h,oe=C.s,de=C.l,Ae=G.h-Q,De=G.s-oe,je=G.l-de;return isNaN(De)&&(De=0,oe=isNaN(oe)?G.s:oe),isNaN(Ae)?(Ae=0,Q=isNaN(Q)?G.h:Q):Ae>180?Ae-=360:Ae<-180&&(Ae+=360),function(Ye){return kt(Q+Ae*Ye,oe+De*Ye,de+je*Ye)+""}},o.interpolateLab=function(C,G){C=o.lab(C),G=o.lab(G);var Q=C.l,oe=C.a,de=C.b,Ae=G.l-Q,De=G.a-oe,je=G.b-de;return function(Ye){return Jt(Q+Ae*Ye,oe+De*Ye,de+je*Ye)+""}},o.interpolateRound=_u,o.transform=function(C){var G=p.createElementNS(o.ns.prefix.svg,"g");return(o.transform=function(Q){if(null!=Q){G.setAttribute("transform",Q);var oe=G.transform.baseVal.consolidate()}return new wu(oe?oe.matrix:Vu)})(C)},wu.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Vu={a:1,b:0,c:0,d:1,e:0,f:0};function Io(C){return C.length?C.pop()+",":""}function ec(C,G){var de,Ae,De,Q=[],oe=[];return C=o.transform(C),G=o.transform(G),function(de,Ae,De,je){if(de[0]!==Ae[0]||de[1]!==Ae[1]){var Ye=De.push("translate(",null,",",null,")");je.push({i:Ye-4,x:Na(de[0],Ae[0])},{i:Ye-2,x:Na(de[1],Ae[1])})}else(Ae[0]||Ae[1])&&De.push("translate("+Ae+")")}(C.translate,G.translate,Q,oe),De=Q,(de=C.rotate)!==(Ae=G.rotate)?(de-Ae>180?Ae+=360:Ae-de>180&&(de+=360),oe.push({i:De.push(Io(De)+"rotate(",null,")")-2,x:Na(de,Ae)})):Ae&&De.push(Io(De)+"rotate("+Ae+")"),function(de,Ae,De,je){de!==Ae?je.push({i:De.push(Io(De)+"skewX(",null,")")-2,x:Na(de,Ae)}):Ae&&De.push(Io(De)+"skewX("+Ae+")")}(C.skew,G.skew,Q,oe),function(de,Ae,De,je){if(de[0]!==Ae[0]||de[1]!==Ae[1]){var Ye=De.push(Io(De)+"scale(",null,",",null,")");je.push({i:Ye-4,x:Na(de[0],Ae[0])},{i:Ye-2,x:Na(de[1],Ae[1])})}else 1===Ae[0]&&1===Ae[1]||De.push(Io(De)+"scale("+Ae+")")}(C.scale,G.scale,Q,oe),C=G=null,function(de){for(var Ae,De=-1,je=oe.length;++De<je;)Q[(Ae=oe[De]).i]=Ae.x(de);return Q.join("")}}function _c(C,G){return G=(G-=C=+C)||1/G,function(Q){return(Q-C)/G}}function wc(C,G){return G=(G-=C=+C)||1/G,function(Q){return Math.max(0,Math.min(1,(Q-C)/G))}}function rl(C){for(var G=C.source,Q=C.target,oe=function(De,je){if(De===je)return De;for(var Ye=Wo(De),Ke=Wo(je),st=Ye.pop(),mt=Ke.pop(),xt=null;st===mt;)xt=st,st=Ye.pop(),mt=Ke.pop();return xt}(G,Q),de=[G];G!==oe;)de.push(G=G.parent);for(var Ae=de.length;Q!==oe;)de.splice(Ae,0,Q),Q=Q.parent;return de}function Wo(C){for(var G=[],Q=C.parent;null!=Q;)G.push(C),C=Q,Q=Q.parent;return G.push(C),G}function bl(C){C.fixed|=2}function bs(C){C.fixed&=-7}function il(C){C.fixed|=4,C.px=C.x,C.py=C.y}function al(C){C.fixed&=-5}function Yo(C,G,Q){var oe=0,de=0;if(C.charge=0,!C.leaf)for(var Ae,De=C.nodes,je=De.length,Ye=-1;++Ye<je;)null!=(Ae=De[Ye])&&(Yo(Ae,G,Q),C.charge+=Ae.charge,oe+=Ae.charge*Ae.cx,de+=Ae.charge*Ae.cy);if(C.point){C.leaf||(C.point.x+=Math.random()-.5,C.point.y+=Math.random()-.5);var Ke=G*Q[C.point.index];C.charge+=C.pointCharge=Ke,oe+=Ke*C.point.x,de+=Ke*C.point.y}C.cx=oe/C.charge,C.cy=de/C.charge}o.interpolateTransform=ec,o.layout={},o.layout.bundle=function(){return function(C){for(var G=[],Q=-1,oe=C.length;++Q<oe;)G.push(rl(C[Q]));return G}},o.layout.chord=function(){var C,G,Q,oe,de,Ae,De,je={},Ye=0;function Ke(){var mt,xt,Et,Dt,It,qt={},Ft=[],on=o.range(oe),Qt=[];for(C=[],G=[],mt=0,Dt=-1;++Dt<oe;){for(xt=0,It=-1;++It<oe;)xt+=Q[Dt][It];Ft.push(xt),Qt.push(o.range(oe)),mt+=xt}for(de&&on.sort(function(wr,sr){return de(Ft[wr],Ft[sr])}),Ae&&Qt.forEach(function(wr,sr){wr.sort(function(_r,Dr){return Ae(Q[sr][_r],Q[sr][Dr])})}),mt=(Ut-Ye*oe)/mt,xt=0,Dt=-1;++Dt<oe;){for(Et=xt,It=-1;++It<oe;){var Kt=on[Dt],kn=Qt[Kt][It],En=Q[Kt][kn],Bn=xt,qn=xt+=En*mt;qt[Kt+"-"+kn]={index:Kt,subindex:kn,startAngle:Bn,endAngle:qn,value:En}}G[Kt]={index:Kt,startAngle:Et,endAngle:xt,value:Ft[Kt]},xt+=Ye}for(Dt=-1;++Dt<oe;)for(It=Dt-1;++It<oe;){var er=qt[Dt+"-"+It],gr=qt[It+"-"+Dt];(er.value||gr.value)&&C.push(er.value<gr.value?{source:gr,target:er}:{source:er,target:gr})}De&&st()}function st(){C.sort(function(mt,xt){return De((mt.source.value+mt.target.value)/2,(xt.source.value+xt.target.value)/2)})}return je.matrix=function(mt){return arguments.length?(oe=(Q=mt)&&Q.length,C=G=null,je):Q},je.padding=function(mt){return arguments.length?(Ye=mt,C=G=null,je):Ye},je.sortGroups=function(mt){return arguments.length?(de=mt,C=G=null,je):de},je.sortSubgroups=function(mt){return arguments.length?(Ae=mt,C=null,je):Ae},je.sortChords=function(mt){return arguments.length?(De=mt,C&&st(),je):De},je.chords=function(){return C||Ke(),C},je.groups=function(){return G||Ke(),G},je},o.layout.force=function(){var C,G,Q,oe,de,Ae,De={},je=o.dispatch("start","tick","end"),Ye=[1,1],Ke=.9,st=Xl,mt=ls,xt=-30,Et=us,Dt=.1,It=.64,qt=[],Ft=[];function on(Kt){return function(kn,En,Bn,qn){if(kn.point!==Kt){var er=kn.cx-Kt.x,gr=kn.cy-Kt.y,wr=qn-En,sr=er*er+gr*gr;if(wr*wr/It<sr){if(sr<Et){var _r=kn.charge/sr;Kt.px-=er*_r,Kt.py-=gr*_r}return!0}kn.point&&sr&&sr<Et&&(Kt.px-=er*(_r=kn.pointCharge/sr),Kt.py-=gr*_r)}return!kn.charge}}function Qt(Kt){Kt.px=o.event.x,Kt.py=o.event.y,De.resume()}return De.tick=function(){if((Q*=.99)<.005)return C=null,je.end({type:"end",alpha:Q=0}),!0;var Kt,kn,En,Bn,qn,er,gr,wr,sr,_r=qt.length,Dr=Ft.length;for(kn=0;kn<Dr;++kn)Bn=(En=Ft[kn]).source,(er=(wr=(qn=En.target).x-Bn.x)*wr+(sr=qn.y-Bn.y)*sr)&&(wr*=er=Q*de[kn]*((er=Math.sqrt(er))-oe[kn])/er,sr*=er,qn.x-=wr*(gr=Bn.weight+qn.weight?Bn.weight/(Bn.weight+qn.weight):.5),qn.y-=sr*gr,Bn.x+=wr*(gr=1-gr),Bn.y+=sr*gr);if((gr=Q*Dt)&&(wr=Ye[0]/2,sr=Ye[1]/2,kn=-1,gr))for(;++kn<_r;)(En=qt[kn]).x+=(wr-En.x)*gr,En.y+=(sr-En.y)*gr;if(xt)for(Yo(Kt=o.geom.quadtree(qt),Q,Ae),kn=-1;++kn<_r;)(En=qt[kn]).fixed||Kt.visit(on(En));for(kn=-1;++kn<_r;)(En=qt[kn]).fixed?(En.x=En.px,En.y=En.py):(En.x-=(En.px-(En.px=En.x))*Ke,En.y-=(En.py-(En.py=En.y))*Ke);je.tick({type:"tick",alpha:Q})},De.nodes=function(Kt){return arguments.length?(qt=Kt,De):qt},De.links=function(Kt){return arguments.length?(Ft=Kt,De):Ft},De.size=function(Kt){return arguments.length?(Ye=Kt,De):Ye},De.linkDistance=function(Kt){return arguments.length?(st="function"==typeof Kt?Kt:+Kt,De):st},De.distance=De.linkDistance,De.linkStrength=function(Kt){return arguments.length?(mt="function"==typeof Kt?Kt:+Kt,De):mt},De.friction=function(Kt){return arguments.length?(Ke=+Kt,De):Ke},De.charge=function(Kt){return arguments.length?(xt="function"==typeof Kt?Kt:+Kt,De):xt},De.chargeDistance=function(Kt){return arguments.length?(Et=Kt*Kt,De):Math.sqrt(Et)},De.gravity=function(Kt){return arguments.length?(Dt=+Kt,De):Dt},De.theta=function(Kt){return arguments.length?(It=Kt*Kt,De):Math.sqrt(It)},De.alpha=function(Kt){return arguments.length?(Kt=+Kt,Q?Kt>0?Q=Kt:(C.c=null,C.t=NaN,C=null,je.end({type:"end",alpha:Q=0})):Kt>0&&(je.start({type:"start",alpha:Q=Kt}),C=dn(De.tick)),De):Q},De.start=function(){var Kt,kn,En,Bn=qt.length,qn=Ft.length,er=Ye[0],gr=Ye[1];for(Kt=0;Kt<Bn;++Kt)(En=qt[Kt]).index=Kt,En.weight=0;for(Kt=0;Kt<qn;++Kt)"number"==typeof(En=Ft[Kt]).source&&(En.source=qt[En.source]),"number"==typeof En.target&&(En.target=qt[En.target]),++En.source.weight,++En.target.weight;for(Kt=0;Kt<Bn;++Kt)En=qt[Kt],isNaN(En.x)&&(En.x=wr("x",er)),isNaN(En.y)&&(En.y=wr("y",gr)),isNaN(En.px)&&(En.px=En.x),isNaN(En.py)&&(En.py=En.y);if(oe=[],"function"==typeof st)for(Kt=0;Kt<qn;++Kt)oe[Kt]=+st.call(this,Ft[Kt],Kt);else for(Kt=0;Kt<qn;++Kt)oe[Kt]=st;if(de=[],"function"==typeof mt)for(Kt=0;Kt<qn;++Kt)de[Kt]=+mt.call(this,Ft[Kt],Kt);else for(Kt=0;Kt<qn;++Kt)de[Kt]=mt;if(Ae=[],"function"==typeof xt)for(Kt=0;Kt<Bn;++Kt)Ae[Kt]=+xt.call(this,qt[Kt],Kt);else for(Kt=0;Kt<Bn;++Kt)Ae[Kt]=xt;function wr(sr,_r){if(!kn){for(kn=new Array(Bn),br=0;br<Bn;++br)kn[br]=[];for(br=0;br<qn;++br){var Dr=Ft[br];kn[Dr.source.index].push(Dr.target),kn[Dr.target.index].push(Dr.source)}}for(var Wr,mr=kn[Kt],br=-1,jr=mr.length;++br<jr;)if(!isNaN(Wr=mr[br][sr]))return Wr;return Math.random()*_r}return De.resume()},De.resume=function(){return De.alpha(.1)},De.stop=function(){return De.alpha(0)},De.drag=function(){if(G||(G=o.behavior.drag().origin(R).on("dragstart.force",bl).on("drag.force",Qt).on("dragend.force",bs)),!arguments.length)return G;this.on("mouseover.force",il).on("mouseout.force",al).call(G)},o.rebind(De,je,"on")};var Xl=20,ls=1,us=1/0;function _s(C,G){return o.rebind(C,G,"sort","children","value"),C.nodes=C,C.links=Ll,C}function js(C,G){for(var Q=[C];null!=(C=Q.pop());)if(G(C),(de=C.children)&&(oe=de.length))for(var oe,de;--oe>=0;)Q.push(de[oe])}function mi(C,G){for(var Q=[C],oe=[];null!=(C=Q.pop());)if(oe.push(C),(Ae=C.children)&&(de=Ae.length))for(var de,Ae,De=-1;++De<de;)Q.push(Ae[De]);for(;null!=(C=oe.pop());)G(C)}function Zo(C){return C.children}function Tu(C){return C.value}function Kl(C,G){return G.value-C.value}function Ll(C){return o.merge(C.map(function(G){return(G.children||[]).map(function(Q){return{source:G,target:Q}})}))}o.layout.hierarchy=function(){var C=Kl,G=Zo,Q=Tu;function oe(de){var Ae,De=[de],je=[];for(de.depth=0;null!=(Ae=De.pop());)if(je.push(Ae),(Ke=G.call(oe,Ae,Ae.depth))&&(Ye=Ke.length)){for(var Ye,Ke,st;--Ye>=0;)De.push(st=Ke[Ye]),st.parent=Ae,st.depth=Ae.depth+1;Q&&(Ae.value=0),Ae.children=Ke}else Q&&(Ae.value=+Q.call(oe,Ae,Ae.depth)||0),delete Ae.children;return mi(de,function(mt){var xt,Et;C&&(xt=mt.children)&&xt.sort(C),Q&&(Et=mt.parent)&&(Et.value+=mt.value)}),je}return oe.sort=function(de){return arguments.length?(C=de,oe):C},oe.children=function(de){return arguments.length?(G=de,oe):G},oe.value=function(de){return arguments.length?(Q=de,oe):Q},oe.revalue=function(de){return Q&&(js(de,function(Ae){Ae.children&&(Ae.value=0)}),mi(de,function(Ae){var De;Ae.children||(Ae.value=+Q.call(oe,Ae,Ae.depth)||0),(De=Ae.parent)&&(De.value+=Ae.value)})),de},oe},o.layout.partition=function(){var C=o.layout.hierarchy(),G=[1,1];function Q(Ae,De,je,Ye){var Ke=Ae.children;if(Ae.x=De,Ae.y=Ae.depth*Ye,Ae.dx=je,Ae.dy=Ye,Ke&&(st=Ke.length)){var st,mt,xt,Et=-1;for(je=Ae.value?je/Ae.value:0;++Et<st;)Q(mt=Ke[Et],De,xt=mt.value*je,Ye),De+=xt}}function oe(Ae){var De=Ae.children,je=0;if(De&&(Ye=De.length))for(var Ye,Ke=-1;++Ke<Ye;)je=Math.max(je,oe(De[Ke]));return 1+je}function de(Ae,De){var je=C.call(this,Ae,De);return Q(je[0],0,G[0],G[1]/oe(je[0])),je}return de.size=function(Ae){return arguments.length?(G=Ae,de):G},_s(de,C)},o.layout.pie=function(){var C=Number,G=Jl,Q=0,oe=Ut,de=0;function Ae(De){var je,Ye=De.length,Ke=De.map(function(on,Qt){return+C.call(Ae,on,Qt)}),st=+("function"==typeof Q?Q.apply(this,arguments):Q),mt=("function"==typeof oe?oe.apply(this,arguments):oe)-st,xt=Math.min(Math.abs(mt)/Ye,+("function"==typeof de?de.apply(this,arguments):de)),Et=xt*(mt<0?-1:1),Dt=o.sum(Ke),It=Dt?(mt-Ye*Et)/Dt:0,qt=o.range(Ye),Ft=[];return null!=G&&qt.sort(G===Jl?function(on,Qt){return Ke[Qt]-Ke[on]}:function(on,Qt){return G(De[on],De[Qt])}),qt.forEach(function(on){Ft[on]={data:De[on],value:je=Ke[on],startAngle:st,endAngle:st+=je*It+Et,padAngle:xt}}),Ft}return Ae.value=function(De){return arguments.length?(C=De,Ae):C},Ae.sort=function(De){return arguments.length?(G=De,Ae):G},Ae.startAngle=function(De){return arguments.length?(Q=De,Ae):Q},Ae.endAngle=function(De){return arguments.length?(oe=De,Ae):oe},Ae.padAngle=function(De){return arguments.length?(de=De,Ae):de},Ae};var Jl={};function ol(C){return C.x}function ku(C){return C.y}function Au(C,G,Q){C.y0=G,C.y=Q}o.layout.stack=function(){var C=R,G=Ea,Q=cs,oe=Au,de=ol,Ae=ku;function De(je,Ye){if(!(xt=je.length))return je;var Ke=je.map(function(on,Qt){return C.call(De,on,Qt)}),st=Ke.map(function(on){return on.map(function(Qt,Kt){return[de.call(De,Qt,Kt),Ae.call(De,Qt,Kt)]})}),mt=G.call(De,st,Ye);Ke=o.permute(Ke,mt),st=o.permute(st,mt);var xt,Et,Dt,It,qt=Q.call(De,st,Ye),Ft=Ke[0].length;for(Dt=0;Dt<Ft;++Dt)for(oe.call(De,Ke[0][Dt],It=qt[Dt],st[0][Dt][1]),Et=1;Et<xt;++Et)oe.call(De,Ke[Et][Dt],It+=st[Et-1][Dt][1],st[Et][Dt][1]);return je}return De.values=function(je){return arguments.length?(C=je,De):C},De.order=function(je){return arguments.length?(G="function"==typeof je?je:Po.get(je)||Ea,De):G},De.offset=function(je){return arguments.length?(Q="function"==typeof je?je:_l.get(je)||cs,De):Q},De.x=function(je){return arguments.length?(de=je,De):de},De.y=function(je){return arguments.length?(Ae=je,De):Ae},De.out=function(je){return arguments.length?(oe=je,De):oe},De};var Po=o.map({"inside-out":function(C){var G,Q,oe=C.length,de=C.map(Il),Ae=C.map(tc),De=o.range(oe).sort(function(mt,xt){return de[mt]-de[xt]}),je=0,Ye=0,Ke=[],st=[];for(G=0;G<oe;++G)Q=De[G],je<Ye?(je+=Ae[Q],Ke.push(Q)):(Ye+=Ae[Q],st.push(Q));return st.reverse().concat(Ke)},reverse:function(C){return o.range(C.length).reverse()},default:Ea}),_l=o.map({silhouette:function(C){var G,Q,oe,de=C.length,Ae=C[0].length,De=[],je=0,Ye=[];for(Q=0;Q<Ae;++Q){for(G=0,oe=0;G<de;G++)oe+=C[G][Q][1];oe>je&&(je=oe),De.push(oe)}for(Q=0;Q<Ae;++Q)Ye[Q]=(je-De[Q])/2;return Ye},wiggle:function(C){var G,Q,oe,de,Ae,De,je,Ye,Ke,st=C.length,mt=C[0],xt=mt.length,Et=[];for(Et[0]=Ye=Ke=0,Q=1;Q<xt;++Q){for(G=0,de=0;G<st;++G)de+=C[G][Q][1];for(G=0,Ae=0,je=mt[Q][0]-mt[Q-1][0];G<st;++G){for(oe=0,De=(C[G][Q][1]-C[G][Q-1][1])/(2*je);oe<G;++oe)De+=(C[oe][Q][1]-C[oe][Q-1][1])/je;Ae+=De*C[G][Q][1]}Et[Q]=Ye-=de?Ae/de*je:0,Ye<Ke&&(Ke=Ye)}for(Q=0;Q<xt;++Q)Et[Q]-=Ke;return Et},expand:function(C){var G,Q,oe,de=C.length,Ae=C[0].length,De=1/de,je=[];for(Q=0;Q<Ae;++Q){for(G=0,oe=0;G<de;G++)oe+=C[G][Q][1];if(oe)for(G=0;G<de;G++)C[G][Q][1]/=oe;else for(G=0;G<de;G++)C[G][Q][1]=De}for(Q=0;Q<Ae;++Q)je[Q]=0;return je},zero:cs});function Ea(C){return o.range(C.length)}function cs(C){for(var G=-1,Q=C[0].length,oe=[];++G<Q;)oe[G]=0;return oe}function Il(C){for(var G,Q=1,oe=0,de=C[0][1],Ae=C.length;Q<Ae;++Q)(G=C[Q][1])>de&&(oe=Q,de=G);return oe}function tc(C){return C.reduce($l,0)}function $l(C,G){return C+G[1]}function ws(C,G){return Oo(C,Math.ceil(Math.log(G.length)/Math.LN2+1))}function Oo(C,G){for(var Q=-1,oe=+C[0],de=(C[1]-oe)/G,Ae=[];++Q<=G;)Ae[Q]=de*Q+oe;return Ae}function Mu(C){return[o.min(C),o.max(C)]}function Ql(C,G){return C.value-G.value}function wl(C,G){var Q=C._pack_next;C._pack_next=G,G._pack_prev=C,G._pack_next=Q,Q._pack_prev=G}function Us(C,G){C._pack_next=G,G._pack_prev=C}function sl(C,G){var Q=G.x-C.x,oe=G.y-C.y,de=C.r+G.r;return.999*de*de>Q*Q+oe*oe}function ll(C){if((G=C.children)&&(Ye=G.length)){var G,Q,oe,de,Ae,De,je,Ye,Ke=1/0,st=-1/0,mt=1/0,xt=-1/0;if(G.forEach(ul),(Q=G[0]).x=-Q.r,Q.y=0,Qt(Q),Ye>1&&((oe=G[1]).x=oe.r,oe.y=0,Qt(oe),Ye>2))for(Di(Q,oe,de=G[2]),Qt(de),wl(Q,de),Q._pack_prev=de,wl(de,oe),oe=Q._pack_next,Ae=3;Ae<Ye;Ae++){Di(Q,oe,de=G[Ae]);var Et=0,Dt=1,It=1;for(De=oe._pack_next;De!==oe;De=De._pack_next,Dt++)if(sl(De,de)){Et=1;break}if(1==Et)for(je=Q._pack_prev;je!==De._pack_prev&&!sl(je,de);je=je._pack_prev,It++);Et?(Dt<It||Dt==It&&oe.r<Q.r?Us(Q,oe=De):Us(Q=je,oe),Ae--):(wl(Q,de),oe=de,Qt(de))}var qt=(Ke+st)/2,Ft=(mt+xt)/2,on=0;for(Ae=0;Ae<Ye;Ae++)(de=G[Ae]).x-=qt,de.y-=Ft,on=Math.max(on,de.r+Math.sqrt(de.x*de.x+de.y*de.y));C.r=on,G.forEach(Pl)}function Qt(Kt){Ke=Math.min(Kt.x-Kt.r,Ke),st=Math.max(Kt.x+Kt.r,st),mt=Math.min(Kt.y-Kt.r,mt),xt=Math.max(Kt.y+Kt.r,xt)}}function ul(C){C._pack_next=C._pack_prev=C}function Pl(C){delete C._pack_next,delete C._pack_prev}function eu(C,G,Q,oe){var de=C.children;if(C.x=G+=oe*C.x,C.y=Q+=oe*C.y,C.r*=oe,de)for(var Ae=-1,De=de.length;++Ae<De;)eu(de[Ae],G,Q,oe)}function Di(C,G,Q){var oe=C.r+Q.r,de=G.x-C.x,Ae=G.y-C.y;if(oe&&(de||Ae)){var De=G.r+Q.r,je=de*de+Ae*Ae,Ye=.5+((oe*=oe)-(De*=De))/(2*je),Ke=Math.sqrt(Math.max(0,2*De*(oe+je)-(oe-=je)*oe-De*De))/(2*je);Q.x=C.x+Ye*de+Ke*Ae,Q.y=C.y+Ye*Ae-Ke*de}else Q.x=C.x+oe,Q.y=C.y}function Vs(C,G){return C.parent==G.parent?1:2}function Wa(C){var G=C.children;return G.length?G[0]:C.t}function Xo(C){var G,Q=C.children;return(G=Q.length)?Q[G-1]:C.t}function Ai(C,G,Q){var oe=Q/(G.i-C.i);G.c-=oe,G.s+=Q,C.c+=oe,G.z+=Q,G.m+=Q}function Ii(C,G,Q){return C.a.parent===G.parent?C.a:Q}function Ro(C){var G=C.children;return G&&G.length?Ro(G[0]):C}function Gs(C){var G,Q=C.children;return Q&&(G=Q.length)?Gs(Q[G-1]):C}function Tl(C){return{x:C.x,y:C.y,dx:C.dx,dy:C.dy}}function Ol(C,G){var Q=C.x+G[3],oe=C.y+G[0],de=C.dx-G[1]-G[3],Ae=C.dy-G[0]-G[2];return de<0&&(Q+=de/2,de=0),Ae<0&&(oe+=Ae/2,Ae=0),{x:Q,y:oe,dx:de,dy:Ae}}function kl(C){var G=C[0],Q=C[C.length-1];return G<Q?[G,Q]:[Q,G]}function tu(C){return C.rangeExtent?C.rangeExtent():kl(C.range())}function xo(C,G,Q,oe){var de=Q(C[0],C[1]),Ae=oe(G[0],G[1]);return function(De){return Ae(de(De))}}function Ts(C,G){var Q,oe=0,de=C.length-1,Ae=C[oe],De=C[de];return De<Ae&&(Q=oe,oe=de,de=Q,Q=Ae,Ae=De,De=Q),C[oe]=G.floor(Ae),C[de]=G.ceil(De),C}function cl(C){return C?{floor:function(G){return Math.floor(G/C)*C},ceil:function(G){return Math.ceil(G/C)*C}}:$a}o.layout.histogram=function(){var C=!0,G=Number,Q=Mu,oe=ws;function de(Ae,De){for(var je,Ye,Ke=[],st=Ae.map(G,this),mt=Q.call(this,st,De),xt=oe.call(this,mt,st,De),Et=(De=-1,st.length),Dt=xt.length-1,It=C?1:1/Et;++De<Dt;)(je=Ke[De]=[]).dx=xt[De+1]-(je.x=xt[De]),je.y=0;if(Dt>0)for(De=-1;++De<Et;)(Ye=st[De])>=mt[0]&&Ye<=mt[1]&&((je=Ke[o.bisect(xt,Ye,1,Dt)-1]).y+=It,je.push(Ae[De]));return Ke}return de.value=function(Ae){return arguments.length?(G=Ae,de):G},de.range=function(Ae){return arguments.length?(Q=Jn(Ae),de):Q},de.bins=function(Ae){return arguments.length?(oe="number"==typeof Ae?function(De){return Oo(De,Ae)}:Jn(Ae),de):oe},de.frequency=function(Ae){return arguments.length?(C=!!Ae,de):C},de},o.layout.pack=function(){var C,G=o.layout.hierarchy().sort(Ql),Q=0,oe=[1,1];function de(Ae,De){var je=G.call(this,Ae,De),Ye=je[0],Ke=oe[0],st=oe[1],mt=null==C?Math.sqrt:"function"==typeof C?C:function(){return C};if(Ye.x=Ye.y=0,mi(Ye,function(Et){Et.r=+mt(Et.value)}),mi(Ye,ll),Q){var xt=Q*(C?1:Math.max(2*Ye.r/Ke,2*Ye.r/st))/2;mi(Ye,function(Et){Et.r+=xt}),mi(Ye,ll),mi(Ye,function(Et){Et.r-=xt})}return eu(Ye,Ke/2,st/2,C?1:1/Math.max(2*Ye.r/Ke,2*Ye.r/st)),je}return de.size=function(Ae){return arguments.length?(oe=Ae,de):oe},de.radius=function(Ae){return arguments.length?(C=null==Ae||"function"==typeof Ae?Ae:+Ae,de):C},de.padding=function(Ae){return arguments.length?(Q=+Ae,de):Q},_s(de,G)},o.layout.tree=function(){var C=o.layout.hierarchy().sort(null).value(null),G=Vs,Q=[1,1],oe=null;function de(Ye,Ke){var st=C.call(this,Ye,Ke),mt=st[0],xt=function(Qt){for(var Kt,kn={A:null,children:[Qt]},En=[kn];null!=(Kt=En.pop());)for(var Bn,qn=Kt.children,er=0,gr=qn.length;er<gr;++er)En.push((qn[er]=Bn={_:qn[er],parent:Kt,children:(Bn=qn[er].children)&&Bn.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:er}).a=Bn);return kn.children[0]}(mt);if(mi(xt,Ae),xt.parent.m=-xt.z,js(xt,De),oe)js(mt,je);else{var Et=mt,Dt=mt,It=mt;js(mt,function(Qt){Qt.x<Et.x&&(Et=Qt),Qt.x>Dt.x&&(Dt=Qt),Qt.depth>It.depth&&(It=Qt)});var qt=G(Et,Dt)/2-Et.x,Ft=Q[0]/(Dt.x+G(Dt,Et)/2+qt),on=Q[1]/(It.depth||1);js(mt,function(Qt){Qt.x=(Qt.x+qt)*Ft,Qt.y=Qt.depth*on})}return st}function Ae(Ye){var Ke=Ye.children,st=Ye.parent.children,mt=Ye.i?st[Ye.i-1]:null;if(Ke.length){!function(Et){for(var Dt,It=0,qt=0,Ft=Et.children,on=Ft.length;--on>=0;)(Dt=Ft[on]).z+=It,Dt.m+=It,It+=Dt.s+(qt+=Dt.c)}(Ye);var xt=(Ke[0].z+Ke[Ke.length-1].z)/2;mt?(Ye.z=mt.z+G(Ye._,mt._),Ye.m=Ye.z-xt):Ye.z=xt}else mt&&(Ye.z=mt.z+G(Ye._,mt._));Ye.parent.A=function(Et,Dt,It){if(Dt){for(var qt,Ft=Et,on=Et,Qt=Dt,Kt=Ft.parent.children[0],kn=Ft.m,En=on.m,Bn=Qt.m,qn=Kt.m;Qt=Xo(Qt),Ft=Wa(Ft),Qt&&Ft;)Kt=Wa(Kt),(on=Xo(on)).a=Et,(qt=Qt.z+Bn-Ft.z-kn+G(Qt._,Ft._))>0&&(Ai(Ii(Qt,Et,It),Et,qt),kn+=qt,En+=qt),Bn+=Qt.m,kn+=Ft.m,qn+=Kt.m,En+=on.m;Qt&&!Xo(on)&&(on.t=Qt,on.m+=Bn-En),Ft&&!Wa(Kt)&&(Kt.t=Ft,Kt.m+=kn-qn,It=Et)}return It}(Ye,mt,Ye.parent.A||st[0])}function De(Ye){Ye._.x=Ye.z+Ye.parent.m,Ye.m+=Ye.parent.m}function je(Ye){Ye.x*=Q[0],Ye.y=Ye.depth*Q[1]}return de.separation=function(Ye){return arguments.length?(G=Ye,de):G},de.size=function(Ye){return arguments.length?(oe=null==(Q=Ye)?je:null,de):oe?null:Q},de.nodeSize=function(Ye){return arguments.length?(oe=null==(Q=Ye)?null:je,de):oe?Q:null},_s(de,C)},o.layout.cluster=function(){var C=o.layout.hierarchy().sort(null).value(null),G=Vs,Q=[1,1],oe=!1;function de(Ae,De){var je,Ye=C.call(this,Ae,De),Ke=Ye[0],st=0;mi(Ke,function(It){var Ft,qt=It.children;qt&&qt.length?(It.x=(Ft=qt).reduce(function(on,Qt){return on+Qt.x},0)/Ft.length,It.y=function(Ft){return 1+o.max(Ft,function(on){return on.y})}(qt)):(It.x=je?st+=G(It,je):0,It.y=0,je=It)});var mt=Ro(Ke),xt=Gs(Ke),Et=mt.x-G(mt,xt)/2,Dt=xt.x+G(xt,mt)/2;return mi(Ke,oe?function(It){It.x=(It.x-Ke.x)*Q[0],It.y=(Ke.y-It.y)*Q[1]}:function(It){It.x=(It.x-Et)/(Dt-Et)*Q[0],It.y=(1-(Ke.y?It.y/Ke.y:1))*Q[1]}),Ye}return de.separation=function(Ae){return arguments.length?(G=Ae,de):G},de.size=function(Ae){return arguments.length?(oe=null==(Q=Ae),de):oe?null:Q},de.nodeSize=function(Ae){return arguments.length?(oe=null!=(Q=Ae),de):oe?Q:null},_s(de,C)},o.layout.treemap=function(){var C,G=o.layout.hierarchy(),Q=Math.round,oe=[1,1],de=null,Ae=Tl,De=!1,je="squarify",Ye=.5*(1+Math.sqrt(5));function Ke(It,qt){for(var Ft,on,Qt=-1,Kt=It.length;++Qt<Kt;)on=(Ft=It[Qt]).value*(qt<0?0:qt),Ft.area=isNaN(on)||on<=0?0:on}function st(It){var qt=It.children;if(qt&&qt.length){var Ft,on,Qt,Kt=Ae(It),kn=[],En=qt.slice(),Bn=1/0,qn="slice"===je?Kt.dx:"dice"===je?Kt.dy:"slice-dice"===je?1&It.depth?Kt.dy:Kt.dx:Math.min(Kt.dx,Kt.dy);for(Ke(En,Kt.dx*Kt.dy/It.value),kn.area=0;(Qt=En.length)>0;)kn.push(Ft=En[Qt-1]),kn.area+=Ft.area,"squarify"!==je||(on=xt(kn,qn))<=Bn?(En.pop(),Bn=on):(kn.area-=kn.pop().area,Et(kn,qn,Kt,!1),qn=Math.min(Kt.dx,Kt.dy),kn.length=kn.area=0,Bn=1/0);kn.length&&(Et(kn,qn,Kt,!0),kn.length=kn.area=0),qt.forEach(st)}}function mt(It){var qt=It.children;if(qt&&qt.length){var Ft,on=Ae(It),Qt=qt.slice(),Kt=[];for(Ke(Qt,on.dx*on.dy/It.value),Kt.area=0;Ft=Qt.pop();)Kt.push(Ft),Kt.area+=Ft.area,null!=Ft.z&&(Et(Kt,Ft.z?on.dx:on.dy,on,!Qt.length),Kt.length=Kt.area=0);qt.forEach(mt)}}function xt(It,qt){for(var Ft,on=It.area,Qt=0,Kt=1/0,kn=-1,En=It.length;++kn<En;)(Ft=It[kn].area)&&(Ft<Kt&&(Kt=Ft),Ft>Qt&&(Qt=Ft));return qt*=qt,(on*=on)?Math.max(qt*Qt*Ye/on,on/(qt*Kt*Ye)):1/0}function Et(It,qt,Ft,on){var Qt,Kt=-1,kn=It.length,En=Ft.x,Bn=Ft.y,qn=qt?Q(It.area/qt):0;if(qt==Ft.dx){for((on||qn>Ft.dy)&&(qn=Ft.dy);++Kt<kn;)(Qt=It[Kt]).x=En,Qt.y=Bn,Qt.dy=qn,En+=Qt.dx=Math.min(Ft.x+Ft.dx-En,qn?Q(Qt.area/qn):0);Qt.z=!0,Qt.dx+=Ft.x+Ft.dx-En,Ft.y+=qn,Ft.dy-=qn}else{for((on||qn>Ft.dx)&&(qn=Ft.dx);++Kt<kn;)(Qt=It[Kt]).x=En,Qt.y=Bn,Qt.dx=qn,Bn+=Qt.dy=Math.min(Ft.y+Ft.dy-Bn,qn?Q(Qt.area/qn):0);Qt.z=!1,Qt.dy+=Ft.y+Ft.dy-Bn,Ft.x+=qn,Ft.dx-=qn}}function Dt(It){var qt=C||G(It),Ft=qt[0];return Ft.x=Ft.y=0,Ft.value?(Ft.dx=oe[0],Ft.dy=oe[1]):Ft.dx=Ft.dy=0,C&&G.revalue(Ft),Ke([Ft],Ft.dx*Ft.dy/Ft.value),(C?mt:st)(Ft),De&&(C=qt),qt}return Dt.size=function(It){return arguments.length?(oe=It,Dt):oe},Dt.padding=function(It){if(!arguments.length)return de;var Ft;return Ae=null==(de=It)?Tl:"function"==(Ft=typeof It)?function(on){var Qt=It.call(Dt,on,on.depth);return null==Qt?Tl(on):Ol(on,"number"==typeof Qt?[Qt,Qt,Qt,Qt]:Qt)}:("number"===Ft&&(It=[It,It,It,It]),function qt(on){return Ol(on,It)}),Dt},Dt.round=function(It){return arguments.length?(Q=It?Math.round:Number,Dt):Q!=Number},Dt.sticky=function(It){return arguments.length?(De=It,C=null,Dt):De},Dt.ratio=function(It){return arguments.length?(Ye=It,Dt):Ye},Dt.mode=function(It){return arguments.length?(je=It+"",Dt):je},_s(Dt,G)},o.random={normal:function(C,G){var Q=arguments.length;return Q<2&&(G=1),Q<1&&(C=0),function(){var oe,de,Ae;do{Ae=(oe=2*Math.random()-1)*oe+(de=2*Math.random()-1)*de}while(!Ae||Ae>1);return C+G*oe*Math.sqrt(-2*Math.log(Ae)/Ae)}},logNormal:function(){var C=o.random.normal.apply(o,arguments);return function(){return Math.exp(C())}},bates:function(C){var G=o.random.irwinHall(C);return function(){return G()/C}},irwinHall:function(C){return function(){for(var G=0,Q=0;Q<C;Q++)G+=Math.random();return G}}},o.scale={};var $a={floor:R,ceil:R};function Al(C,G,Q,oe){var de=[],Ae=[],De=0,je=Math.min(C.length,G.length)-1;for(C[je]<C[0]&&(C=C.slice().reverse(),G=G.slice().reverse());++De<=je;)de.push(Q(C[De-1],C[De])),Ae.push(oe(G[De-1],G[De]));return function(Ye){var Ke=o.bisect(C,Ye,1,je)-1;return Ae[Ke](de[Ke](Ye))}}function bo(C,G,Q,oe){var de,Ae;function De(){var Ye=Math.min(C.length,G.length)>2?Al:xo,Ke=oe?wc:_c;return de=Ye(C,G,Ke,Q),Ae=Ye(G,C,Ke,co),je}function je(Ye){return de(Ye)}return je.invert=function(Ye){return Ae(Ye)},je.domain=function(Ye){return arguments.length?(C=Ye.map(Number),De()):C},je.range=function(Ye){return arguments.length?(G=Ye,De()):G},je.rangeRound=function(Ye){return je.range(Ye).interpolate(_u)},je.clamp=function(Ye){return arguments.length?(oe=Ye,De()):oe},je.interpolate=function(Ye){return arguments.length?(Q=Ye,De()):Q},je.ticks=function(Ye){return Da(C,Ye)},je.tickFormat=function(Ye,Ke){return d3_scale_linearTickFormat(C,Ye,Ke)},je.nice=function(Ye){return ja(C,Ye),De()},je.copy=function(){return bo(C,G,Q,oe)},De()}function Ra(C,G){return o.rebind(C,G,"range","rangeRound","interpolate","clamp")}function ja(C,G){return Ts(C,cl(Bi(C,G)[2])),Ts(C,cl(Bi(C,G)[2])),C}function Bi(C,G){null==G&&(G=10);var Q=kl(C),oe=Q[1]-Q[0],de=Math.pow(10,Math.floor(Math.log(oe/G)/Math.LN10)),Ae=G/oe*de;return Ae<=.15?de*=10:Ae<=.35?de*=5:Ae<=.75&&(de*=2),Q[0]=Math.ceil(Q[0]/de)*de,Q[1]=Math.floor(Q[1]/de)*de+.5*de,Q[2]=de,Q}function Da(C,G){return o.range.apply(o,Bi(C,G))}function ks(C,G,Q,oe){function de(je){return(Q?Math.log(je<0?0:je):-Math.log(je>0?0:-je))/Math.log(G)}function Ae(je){return Q?Math.pow(G,je):-Math.pow(G,-je)}function De(je){return C(de(je))}return De.invert=function(je){return Ae(C.invert(je))},De.domain=function(je){return arguments.length?(Q=je[0]>=0,C.domain((oe=je.map(Number)).map(de)),De):oe},De.base=function(je){return arguments.length?(G=+je,C.domain(oe.map(de)),De):G},De.nice=function(){var je=Ts(oe.map(de),Q?Math:fl);return C.domain(je),oe=je.map(Ae),De},De.ticks=function(){var je=kl(oe),Ye=[],Ke=je[0],st=je[1],mt=Math.floor(de(Ke)),xt=Math.ceil(de(st)),Et=G%1?2:G;if(isFinite(xt-mt)){if(Q){for(;mt<xt;mt++)for(var Dt=1;Dt<Et;Dt++)Ye.push(Ae(mt)*Dt);Ye.push(Ae(mt))}else for(Ye.push(Ae(mt));mt++<xt;)for(Dt=Et-1;Dt>0;Dt--)Ye.push(Ae(mt)*Dt);for(mt=0;Ye[mt]<Ke;mt++);for(xt=Ye.length;Ye[xt-1]>st;xt--);Ye=Ye.slice(mt,xt)}return Ye},De.copy=function(){return ks(C.copy(),G,Q,oe)},Ra(De,C)}o.scale.linear=function(){return bo([0,1],[0,1],co,!1)},o.scale.log=function(){return ks(o.scale.linear().domain([0,1]),10,!0,[1,10])};var fl={floor:function(C){return-Math.ceil(-C)},ceil:function(C){return-Math.floor(-C)}};function Qa(C,G,Q){var oe=Hs(G),de=Hs(1/G);function Ae(De){return C(oe(De))}return Ae.invert=function(De){return de(C.invert(De))},Ae.domain=function(De){return arguments.length?(C.domain((Q=De.map(Number)).map(oe)),Ae):Q},Ae.ticks=function(De){return Da(Q,De)},Ae.tickFormat=function(De,je){return d3_scale_linearTickFormat(Q,De,je)},Ae.nice=function(De){return Ae.domain(ja(Q,De))},Ae.exponent=function(De){return arguments.length?(oe=Hs(G=De),de=Hs(1/G),C.domain(Q.map(oe)),Ae):G},Ae.copy=function(){return Qa(C.copy(),G,Q)},Ra(Ae,C)}function Hs(C){return function(G){return G<0?-Math.pow(-G,C):Math.pow(G,C)}}function eo(C,G){var Q,oe,de;function Ae(je){return oe[((Q.get(je)||("range"===G.t?Q.set(je,C.push(je)):NaN))-1)%oe.length]}function De(je,Ye){return o.range(C.length).map(function(Ke){return je+Ye*Ke})}return Ae.domain=function(je){if(!arguments.length)return C;C=[],Q=new v;for(var Ye,Ke=-1,st=je.length;++Ke<st;)Q.has(Ye=je[Ke])||Q.set(Ye,C.push(Ye));return Ae[G.t].apply(Ae,G.a)},Ae.range=function(je){return arguments.length?(oe=je,de=0,G={t:"range",a:arguments},Ae):oe},Ae.rangePoints=function(je,Ye){arguments.length<2&&(Ye=0);var Ke=je[0],st=je[1],mt=C.length<2?(Ke=(Ke+st)/2,0):(st-Ke)/(C.length-1+Ye);return oe=De(Ke+mt*Ye/2,mt),de=0,G={t:"rangePoints",a:arguments},Ae},Ae.rangeRoundPoints=function(je,Ye){arguments.length<2&&(Ye=0);var Ke=je[0],st=je[1],mt=C.length<2?(Ke=st=Math.round((Ke+st)/2),0):(st-Ke)/(C.length-1+Ye)|0;return oe=De(Ke+Math.round(mt*Ye/2+(st-Ke-(C.length-1+Ye)*mt)/2),mt),de=0,G={t:"rangeRoundPoints",a:arguments},Ae},Ae.rangeBands=function(je,Ye,Ke){arguments.length<2&&(Ye=0),arguments.length<3&&(Ke=Ye);var st=je[1]<je[0],mt=je[st-0],xt=(je[1-st]-mt)/(C.length-Ye+2*Ke);return oe=De(mt+xt*Ke,xt),st&&oe.reverse(),de=xt*(1-Ye),G={t:"rangeBands",a:arguments},Ae},Ae.rangeRoundBands=function(je,Ye,Ke){arguments.length<2&&(Ye=0),arguments.length<3&&(Ke=Ye);var st=je[1]<je[0],mt=je[st-0],xt=je[1-st],Et=Math.floor((xt-mt)/(C.length-Ye+2*Ke));return oe=De(mt+Math.round((xt-mt-(C.length-Ye)*Et)/2),Et),st&&oe.reverse(),de=Math.round(Et*(1-Ye)),G={t:"rangeRoundBands",a:arguments},Ae},Ae.rangeBand=function(){return de},Ae.rangeExtent=function(){return kl(G.a[0])},Ae.copy=function(){return eo(C,G)},Ae.domain(C)}o.scale.pow=function(){return Qa(o.scale.linear(),1,[0,1])},o.scale.sqrt=function(){return o.scale.pow().exponent(.5)},o.scale.ordinal=function(){return eo([],{t:"range",a:[[]]})},o.scale.category10=function(){return o.scale.ordinal().range(Ml)},o.scale.category20=function(){return o.scale.ordinal().range(fs)},o.scale.category20b=function(){return o.scale.ordinal().range(_o)},o.scale.category20c=function(){return o.scale.ordinal().range(Ko)};var Ml=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(cn),fs=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(cn),_o=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(cn),Ko=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(cn);function qi(C,G){var Q;function oe(){var Ae=0,De=G.length;for(Q=[];++Ae<De;)Q[Ae-1]=o.quantile(C,Ae/De);return de}function de(Ae){if(!isNaN(Ae=+Ae))return G[o.bisect(Q,Ae)]}return de.domain=function(Ae){return arguments.length?(C=Ae.map(f).filter(c).sort(u),oe()):C},de.range=function(Ae){return arguments.length?(G=Ae,oe()):G},de.quantiles=function(){return Q},de.invertExtent=function(Ae){return(Ae=G.indexOf(Ae))<0?[NaN,NaN]:[Ae>0?Q[Ae-1]:C[0],Ae<Q.length?Q[Ae]:C[C.length-1]]},de.copy=function(){return qi(C,G)},oe()}function Do(C,G,Q){var oe,de;function Ae(je){return Q[Math.max(0,Math.min(de,Math.floor(oe*(je-C))))]}function De(){return oe=Q.length/(G-C),de=Q.length-1,Ae}return Ae.domain=function(je){return arguments.length?(C=+je[0],G=+je[je.length-1],De()):[C,G]},Ae.range=function(je){return arguments.length?(Q=je,De()):Q},Ae.invertExtent=function(je){return[je=(je=Q.indexOf(je))<0?NaN:je/oe+C,je+1/oe]},Ae.copy=function(){return Do(C,G,Q)},De()}function Hr(C,G){function Q(oe){if(oe<=oe)return G[o.bisect(C,oe)]}return Q.domain=function(oe){return arguments.length?(C=oe,Q):C},Q.range=function(oe){return arguments.length?(G=oe,Q):G},Q.invertExtent=function(oe){return oe=G.indexOf(oe),[C[oe-1],C[oe]]},Q.copy=function(){return Hr(C,G)},Q}function qs(C){function G(Q){return+Q}return G.invert=G,G.domain=G.range=function(Q){return arguments.length?(C=Q.map(G),G):C},G.ticks=function(Q){return Da(C,Q)},G.tickFormat=function(Q,oe){return d3_scale_linearTickFormat(C,Q,oe)},G.copy=function(){return qs(C)},G}function nu(){return 0}o.scale.quantile=function(){return qi([],[])},o.scale.quantize=function(){return Do(0,1,[0,1])},o.scale.threshold=function(){return Hr([.5],[0,1])},o.scale.identity=function(){return qs([0,1])},o.svg={},o.svg.arc=function(){var C=Ws,G=hl,Q=nu,oe=hs,de=zo,Ae=Or,De=ru;function je(){var Ke=Math.max(0,+C.apply(this,arguments)),st=Math.max(0,+G.apply(this,arguments)),mt=de.apply(this,arguments)-Je,xt=Ae.apply(this,arguments)-Je,Et=Math.abs(xt-mt),Dt=mt>xt?0:1;if(st<Ke&&(It=st,st=Ke,Ke=It),Et>=Rt)return Ye(st,Dt)+(Ke?Ye(Ke,1-Dt):"")+"Z";var It,qt,Ft,on,Qt,Kt,kn,En,Bn,qn,er,gr,wr=0,sr=0,_r=[];if((on=(+De.apply(this,arguments)||0)/2)&&(Ft=oe===hs?Math.sqrt(Ke*Ke+st*st):+oe.apply(this,arguments),Dt||(sr*=-1),st&&(sr=$e(Ft/st*Math.sin(on))),Ke&&(wr=$e(Ft/Ke*Math.sin(on)))),st){Qt=st*Math.cos(mt+sr),Kt=st*Math.sin(mt+sr),kn=st*Math.cos(xt-sr),En=st*Math.sin(xt-sr);var Dr=Math.abs(xt-mt-2*sr)<=jt?0:1;if(sr&&ds(Qt,Kt,kn,En)===Dt^Dr){var Wr=(mt+xt)/2;Qt=st*Math.cos(Wr),Kt=st*Math.sin(Wr),kn=En=null}}else Qt=Kt=0;if(Ke){Bn=Ke*Math.cos(xt-wr),qn=Ke*Math.sin(xt-wr),er=Ke*Math.cos(mt+wr),gr=Ke*Math.sin(mt+wr);var mr=Math.abs(mt-xt+2*wr)<=jt?0:1;if(wr&&ds(Bn,qn,er,gr)===1-Dt^mr){var br=(mt+xt)/2;Bn=Ke*Math.cos(br),qn=Ke*Math.sin(br),er=gr=null}}else Bn=qn=0;if(Et>it&&(It=Math.min(Math.abs(st-Ke)/2,+Q.apply(this,arguments)))>.001){qt=Ke<st^Dt?0:1;var jr=It,Mr=It;if(Et<jt){var Gr=null==er?[Bn,qn]:null==kn?[Qt,Kt]:zt([Qt,Kt],[er,gr],[kn,En],[Bn,qn]),$r=Qt-Gr[0],si=Kt-Gr[1],li=kn-Gr[0],pi=En-Gr[1],_i=1/Math.sin(Math.acos(($r*li+si*pi)/(Math.sqrt($r*$r+si*si)*Math.sqrt(li*li+pi*pi)))/2),na=Math.sqrt(Gr[0]*Gr[0]+Gr[1]*Gr[1]);Mr=Math.min(It,(Ke-na)/(_i-1)),jr=Math.min(It,(st-na)/(_i+1))}if(null!=kn){var ga=za(null==er?[Bn,qn]:[er,gr],[Qt,Kt],st,jr,Dt),Ua=za([kn,En],[Bn,qn],st,jr,Dt);It===jr?_r.push("M",ga[0],"A",jr,",",jr," 0 0,",qt," ",ga[1],"A",st,",",st," 0 ",1-Dt^ds(ga[1][0],ga[1][1],Ua[1][0],Ua[1][1]),",",Dt," ",Ua[1],"A",jr,",",jr," 0 0,",qt," ",Ua[0]):_r.push("M",ga[0],"A",jr,",",jr," 0 1,",qt," ",Ua[0])}else _r.push("M",Qt,",",Kt);if(null!=er){var Fa=za([Qt,Kt],[er,gr],Ke,-Mr,Dt),aa=za([Bn,qn],null==kn?[Qt,Kt]:[kn,En],Ke,-Mr,Dt);It===Mr?_r.push("L",aa[0],"A",Mr,",",Mr," 0 0,",qt," ",aa[1],"A",Ke,",",Ke," 0 ",Dt^ds(aa[1][0],aa[1][1],Fa[1][0],Fa[1][1]),",",1-Dt," ",Fa[1],"A",Mr,",",Mr," 0 0,",qt," ",Fa[0]):_r.push("L",aa[0],"A",Mr,",",Mr," 0 0,",qt," ",Fa[0])}else _r.push("L",Bn,",",qn)}else _r.push("M",Qt,",",Kt),null!=kn&&_r.push("A",st,",",st," 0 ",Dr,",",Dt," ",kn,",",En),_r.push("L",Bn,",",qn),null!=er&&_r.push("A",Ke,",",Ke," 0 ",mr,",",1-Dt," ",er,",",gr);return _r.push("Z"),_r.join("")}function Ye(Ke,st){return"M0,"+Ke+"A"+Ke+","+Ke+" 0 1,"+st+" 0,"+-Ke+"A"+Ke+","+Ke+" 0 1,"+st+" 0,"+Ke}return je.innerRadius=function(Ke){return arguments.length?(C=Jn(Ke),je):C},je.outerRadius=function(Ke){return arguments.length?(G=Jn(Ke),je):G},je.cornerRadius=function(Ke){return arguments.length?(Q=Jn(Ke),je):Q},je.padRadius=function(Ke){return arguments.length?(oe=Ke==hs?hs:Jn(Ke),je):oe},je.startAngle=function(Ke){return arguments.length?(de=Jn(Ke),je):de},je.endAngle=function(Ke){return arguments.length?(Ae=Jn(Ke),je):Ae},je.padAngle=function(Ke){return arguments.length?(De=Jn(Ke),je):De},je.centroid=function(){var Ke=(+C.apply(this,arguments)+ +G.apply(this,arguments))/2,st=(+de.apply(this,arguments)+ +Ae.apply(this,arguments))/2-Je;return[Math.cos(st)*Ke,Math.sin(st)*Ke]},je};var hs="auto";function Ws(C){return C.innerRadius}function hl(C){return C.outerRadius}function zo(C){return C.startAngle}function Or(C){return C.endAngle}function ru(C){return C&&C.padAngle}function ds(C,G,Q,oe){return(C-Q)*G-(G-oe)*C>0?0:1}function za(C,G,Q,oe,de){var Ae=C[0]-G[0],De=C[1]-G[1],je=(de?oe:-oe)/Math.sqrt(Ae*Ae+De*De),Ye=je*De,Ke=-je*Ae,st=C[0]+Ye,mt=C[1]+Ke,xt=G[0]+Ye,Et=G[1]+Ke,Dt=(st+xt)/2,It=(mt+Et)/2,qt=xt-st,Ft=Et-mt,on=qt*qt+Ft*Ft,Qt=Q-oe,Kt=st*Et-xt*mt,kn=(Ft<0?-1:1)*Math.sqrt(Math.max(0,Qt*Qt*on-Kt*Kt)),En=(Kt*Ft-qt*kn)/on,Bn=(-Kt*qt-Ft*kn)/on,qn=(Kt*Ft+qt*kn)/on,er=(-Kt*qt+Ft*kn)/on,gr=En-Dt,wr=Bn-It,sr=qn-Dt,_r=er-It;return gr*gr+wr*wr>sr*sr+_r*_r&&(En=qn,Bn=er),[[En-Ye,Bn-Ke],[En*Q/Qt,Bn*Q/Qt]]}function Ys(){return!0}function wo(C){var G=Wn,Q=$n,oe=Ys,de=Ya,Ae=de.key,De=.7;function je(Ye){var Ke,st=[],mt=[],xt=-1,Et=Ye.length,Dt=Jn(G),It=Jn(Q);function qt(){st.push("M",de(C(mt),De))}for(;++xt<Et;)oe.call(this,Ke=Ye[xt],xt)?mt.push([+Dt.call(this,Ke,xt),+It.call(this,Ke,xt)]):mt.length&&(qt(),mt=[]);return mt.length&&qt(),st.length?st.join(""):null}return je.x=function(Ye){return arguments.length?(G=Ye,je):G},je.y=function(Ye){return arguments.length?(Q=Ye,je):Q},je.defined=function(Ye){return arguments.length?(oe=Ye,je):oe},je.interpolate=function(Ye){return arguments.length?(Ae="function"==typeof Ye?de=Ye:(de=Jo.get(Ye)||Ya).key,je):Ae},je.tension=function(Ye){return arguments.length?(De=Ye,je):De},je}o.svg.line=function(){return wo(R)};var Jo=o.map({linear:Ya,"linear-closed":$o,step:function(C){for(var G=0,Q=C.length,oe=C[0],de=[oe[0],",",oe[1]];++G<Q;)de.push("H",(oe[0]+(oe=C[G])[0])/2,"V",oe[1]);return Q>1&&de.push("H",oe[0]),de.join("")},"step-before":Qo,"step-after":As,basis:Mi,"basis-open":function(C){if(C.length<4)return Ya(C);for(var G,Q=[],oe=-1,de=C.length,Ae=[0],De=[0];++oe<3;)Ae.push((G=C[oe])[0]),De.push(G[1]);for(Q.push(Aa(Ma,Ae)+","+Aa(Ma,De)),--oe;++oe<de;)G=C[oe],Ae.shift(),Ae.push(G[0]),De.shift(),De.push(G[1]),Sl(Q,Ae,De);return Q.join("")},"basis-closed":function(C){for(var G,Q,oe=-1,de=C.length,Ae=de+4,De=[],je=[];++oe<4;)De.push((Q=C[oe%de])[0]),je.push(Q[1]);for(G=[Aa(Ma,De),",",Aa(Ma,je)],--oe;++oe<Ae;)Q=C[oe%de],De.shift(),De.push(Q[0]),je.shift(),je.push(Q[1]),Sl(G,De,je);return G.join("")},bundle:function(C,G){var Q=C.length-1;if(Q)for(var oe,de,Ae=C[0][0],De=C[0][1],je=C[Q][0]-Ae,Ye=C[Q][1]-De,Ke=-1;++Ke<=Q;)(oe=C[Ke])[0]=G*oe[0]+(1-G)*(Ae+(de=Ke/Q)*je),oe[1]=G*oe[1]+(1-G)*(De+de*Ye);return Mi(C)},cardinal:function(C,G){return C.length<3?Ya(C):C[0]+dl(C,Ms(C,G))},"cardinal-open":function(C,G){return C.length<4?Ya(C):C[1]+dl(C.slice(1,-1),Ms(C,G))},"cardinal-closed":function(C,G){return C.length<3?$o(C):C[0]+dl((C.push(C[0]),C),Ms([C[C.length-2]].concat(C,[C[1]]),G))},monotone:function(C){return C.length<3?Ya(C):C[0]+dl(C,function(G){for(var Q,oe,de,Ae,De=[],je=function(st){for(var mt=0,xt=st.length-1,Et=[],Dt=st[0],It=st[1],qt=Et[0]=Rl(Dt,It);++mt<xt;)Et[mt]=(qt+(qt=Rl(Dt=It,It=st[mt+1])))/2;return Et[mt]=qt,Et}(G),Ye=-1,Ke=G.length-1;++Ye<Ke;)Q=Rl(G[Ye],G[Ye+1]),g(Q)<it?je[Ye]=je[Ye+1]=0:(Ae=(oe=je[Ye]/Q)*oe+(de=je[Ye+1]/Q)*de)>9&&(Ae=3*Q/Math.sqrt(Ae),je[Ye]=Ae*oe,je[Ye+1]=Ae*de);for(Ye=-1;++Ye<=Ke;)Ae=(G[Math.min(Ke,Ye+1)][0]-G[Math.max(0,Ye-1)][0])/(6*(1+je[Ye]*je[Ye])),De.push([Ae||0,je[Ye]*Ae||0]);return De}(C))}});function Ya(C){return C.length>1?C.join("L"):C+"Z"}function $o(C){return C.join("L")+"Z"}function Qo(C){for(var G=0,Q=C.length,oe=C[0],de=[oe[0],",",oe[1]];++G<Q;)de.push("V",(oe=C[G])[1],"H",oe[0]);return de.join("")}function As(C){for(var G=0,Q=C.length,oe=C[0],de=[oe[0],",",oe[1]];++G<Q;)de.push("H",(oe=C[G])[0],"V",oe[1]);return de.join("")}function dl(C,G){if(G.length<1||C.length!=G.length&&C.length!=G.length+2)return Ya(C);var Q=C.length!=G.length,oe="",de=C[0],Ae=C[1],De=G[0],je=De,Ye=1;if(Q&&(oe+="Q"+(Ae[0]-2*De[0]/3)+","+(Ae[1]-2*De[1]/3)+","+Ae[0]+","+Ae[1],de=C[1],Ye=2),G.length>1){Ae=C[Ye],Ye++,oe+="C"+(de[0]+De[0])+","+(de[1]+De[1])+","+(Ae[0]-(je=G[1])[0])+","+(Ae[1]-je[1])+","+Ae[0]+","+Ae[1];for(var Ke=2;Ke<G.length;Ke++,Ye++)oe+="S"+((Ae=C[Ye])[0]-(je=G[Ke])[0])+","+(Ae[1]-je[1])+","+Ae[0]+","+Ae[1]}if(Q){var st=C[Ye];oe+="Q"+(Ae[0]+2*je[0]/3)+","+(Ae[1]+2*je[1]/3)+","+st[0]+","+st[1]}return oe}function Ms(C,G){for(var Q,oe=[],de=(1-G)/2,Ae=C[0],De=C[1],je=1,Ye=C.length;++je<Ye;)Q=Ae,Ae=De,oe.push([de*((De=C[je])[0]-Q[0]),de*(De[1]-Q[1])]);return oe}function Mi(C){if(C.length<3)return Ya(C);var G=1,Q=C.length,oe=C[0],de=oe[0],Ae=oe[1],De=[de,de,de,(oe=C[1])[0]],je=[Ae,Ae,Ae,oe[1]],Ye=[de,",",Ae,"L",Aa(Ma,De),",",Aa(Ma,je)];for(C.push(C[Q-1]);++G<=Q;)oe=C[G],De.shift(),De.push(oe[0]),je.shift(),je.push(oe[1]),Sl(Ye,De,je);return C.pop(),Ye.push("L",oe),Ye.join("")}function Aa(C,G){return C[0]*G[0]+C[1]*G[1]+C[2]*G[2]+C[3]*G[3]}Jo.forEach(function(C,G){G.key=C,G.closed=/-closed$/.test(C)});var ho=[0,2/3,1/3,0],Ss=[0,1/3,2/3,0],Ma=[0,1/6,2/3,1/6];function Sl(C,G,Q){C.push("C",Aa(ho,G),",",Aa(ho,Q),",",Aa(Ss,G),",",Aa(Ss,Q),",",Aa(Ma,G),",",Aa(Ma,Q))}function Rl(C,G){return(G[1]-C[1])/(G[0]-C[0])}function to(C){for(var G,Q,oe,de=-1,Ae=C.length;++de<Ae;)Q=(G=C[de])[0],oe=G[1]-Je,G[0]=Q*Math.cos(oe),G[1]=Q*Math.sin(oe);return C}function bi(C){var G=Wn,Q=Wn,oe=0,de=$n,Ae=Ys,De=Ya,je=De.key,Ye=De,Ke="L",st=.7;function mt(xt){var Et,Dt,It,qt=[],Ft=[],on=[],Qt=-1,Kt=xt.length,kn=Jn(G),En=Jn(oe),Bn=G===Q?function(){return Dt}:Jn(Q),qn=oe===de?function(){return It}:Jn(de);function er(){qt.push("M",De(C(on),st),Ke,Ye(C(Ft.reverse()),st),"Z")}for(;++Qt<Kt;)Ae.call(this,Et=xt[Qt],Qt)?(Ft.push([Dt=+kn.call(this,Et,Qt),It=+En.call(this,Et,Qt)]),on.push([+Bn.call(this,Et,Qt),+qn.call(this,Et,Qt)])):Ft.length&&(er(),Ft=[],on=[]);return Ft.length&&er(),qt.length?qt.join(""):null}return mt.x=function(xt){return arguments.length?(G=Q=xt,mt):Q},mt.x0=function(xt){return arguments.length?(G=xt,mt):G},mt.x1=function(xt){return arguments.length?(Q=xt,mt):Q},mt.y=function(xt){return arguments.length?(oe=de=xt,mt):de},mt.y0=function(xt){return arguments.length?(oe=xt,mt):oe},mt.y1=function(xt){return arguments.length?(de=xt,mt):de},mt.defined=function(xt){return arguments.length?(Ae=xt,mt):Ae},mt.interpolate=function(xt){return arguments.length?(je="function"==typeof xt?De=xt:(De=Jo.get(xt)||Ya).key,Ye=De.reverse||De,Ke=De.closed?"M":"L",mt):je},mt.tension=function(xt){return arguments.length?(st=xt,mt):st},mt}function ps(C){return C.source}function Es(C){return C.target}function es(C){return C.radius}function Cs(C){return[C.x,C.y]}function El(){return 64}function ts(){return"circle"}function Ji(C){var G=Math.sqrt(C/jt);return"M0,"+G+"A"+G+","+G+" 0 1,1 0,"+-G+"A"+G+","+G+" 0 1,1 0,"+G+"Z"}o.svg.line.radial=function(){var C=wo(to);return C.radius=C.x,delete C.x,C.angle=C.y,delete C.y,C},Qo.reverse=As,As.reverse=Qo,o.svg.area=function(){return bi(R)},o.svg.area.radial=function(){var C=bi(to);return C.radius=C.x,delete C.x,C.innerRadius=C.x0,delete C.x0,C.outerRadius=C.x1,delete C.x1,C.angle=C.y,delete C.y,C.startAngle=C.y0,delete C.y0,C.endAngle=C.y1,delete C.y1,C},o.svg.chord=function(){var C=ps,G=Es,Q=es,oe=zo,de=Or;function Ae(Ke,st){var mt,xt,Et=De(this,C,Ke,st),Dt=De(this,G,Ke,st);return"M"+Et.p0+je(Et.r,Et.p1,Et.a1-Et.a0)+((mt=Et).a0==(xt=Dt).a0&&mt.a1==xt.a1?Ye(0,0,0,Et.p0):Ye(0,0,0,Dt.p0)+je(Dt.r,Dt.p1,Dt.a1-Dt.a0)+Ye(0,0,0,Et.p0))+"Z"}function De(Ke,st,mt,xt){var Et=st.call(Ke,mt,xt),Dt=Q.call(Ke,Et,xt),It=oe.call(Ke,Et,xt)-Je,qt=de.call(Ke,Et,xt)-Je;return{r:Dt,a0:It,a1:qt,p0:[Dt*Math.cos(It),Dt*Math.sin(It)],p1:[Dt*Math.cos(qt),Dt*Math.sin(qt)]}}function je(Ke,st,mt){return"A"+Ke+","+Ke+" 0 "+ +(mt>jt)+",1 "+st}function Ye(Ke,st,mt,xt){return"Q 0,0 "+xt}return Ae.radius=function(Ke){return arguments.length?(Q=Jn(Ke),Ae):Q},Ae.source=function(Ke){return arguments.length?(C=Jn(Ke),Ae):C},Ae.target=function(Ke){return arguments.length?(G=Jn(Ke),Ae):G},Ae.startAngle=function(Ke){return arguments.length?(oe=Jn(Ke),Ae):oe},Ae.endAngle=function(Ke){return arguments.length?(de=Jn(Ke),Ae):de},Ae},o.svg.diagonal=function(){var C=ps,G=Es,Q=Cs;function oe(de,Ae){var De=C.call(this,de,Ae),je=G.call(this,de,Ae),Ye=(De.y+je.y)/2,Ke=[De,{x:De.x,y:Ye},{x:je.x,y:Ye},je];return"M"+(Ke=Ke.map(Q))[0]+"C"+Ke[1]+" "+Ke[2]+" "+Ke[3]}return oe.source=function(de){return arguments.length?(C=Jn(de),oe):C},oe.target=function(de){return arguments.length?(G=Jn(de),oe):G},oe.projection=function(de){return arguments.length?(Q=de,oe):Q},oe},o.svg.diagonal.radial=function(){var C=o.svg.diagonal(),G=Cs,Q=C.projection;return C.projection=function(oe){return arguments.length?Q((de=G=oe,function(){var Ae=de.apply(this,arguments),De=Ae[0],je=Ae[1]-Je;return[De*Math.cos(je),De*Math.sin(je)]})):G;var de},C},o.svg.symbol=function(){var C=ts,G=El;function Q(oe,de){return(pl.get(C.call(this,oe,de))||Ji)(G.call(this,oe,de))}return Q.type=function(oe){return arguments.length?(C=Jn(oe),Q):C},Q.size=function(oe){return arguments.length?(G=Jn(oe),Q):G},Q};var pl=o.map({circle:Ji,cross:function(C){var G=Math.sqrt(C/5)/2;return"M"+-3*G+","+-G+"H"+-G+"V"+-3*G+"H"+G+"V"+-G+"H"+3*G+"V"+G+"H"+G+"V"+3*G+"H"+-G+"V"+G+"H"+-3*G+"Z"},diamond:function(C){var G=Math.sqrt(C/(2*Yr)),Q=G*Yr;return"M0,"+-G+"L"+Q+",0 0,"+G+" "+-Q+",0Z"},square:function(C){var G=Math.sqrt(C)/2;return"M"+-G+","+-G+"L"+G+","+-G+" "+G+","+G+" "+-G+","+G+"Z"},"triangle-down":function(C){var G=Math.sqrt(C/Vr),Q=G*Vr/2;return"M0,"+Q+"L"+G+","+-Q+" "+-G+","+-Q+"Z"},"triangle-up":function(C){var G=Math.sqrt(C/Vr),Q=G*Vr/2;return"M0,"+-Q+"L"+G+","+Q+" "+-G+","+Q+"Z"}});o.svg.symbolTypes=pl.keys();var Vr=Math.sqrt(3),Yr=Math.tan(30*et);we.transition=function(C){for(var G,Q,oe=ya||++Su,de=Wi(C),Ae=[],De=fi||{time:Date.now(),ease:qo,delay:0,duration:250},je=-1,Ye=this.length;++je<Ye;){Ae.push(G=[]);for(var Ke=this[je],st=-1,mt=Ke.length;++st<mt;)(Q=Ke[st])&&so(Q,st,de,oe,De),G.push(Q)}return Bo(Ae,de,oe)},we.interrupt=function(C){return this.each(null==C?To:Fo(Wi(C)))};var To=Fo(Wi());function Fo(C){return function(){var G,Q,oe;(G=this[C])&&(oe=G[Q=G.active])&&(oe.timer.c=null,oe.timer.t=NaN,--G.count?delete G[Q]:delete this[C],G.active+=.5,oe.event&&oe.event.interrupt.call(this,this.__data__,oe.index))}}function Bo(C,G,Q){return X(C,Hi),C.namespace=G,C.id=Q,C}var ya,fi,Hi=[],Su=0;function ko(C,G,Q,oe){var de=C.id,Ae=C.namespace;return Me(C,"function"==typeof Q?function(De,je,Ye){De[Ae][de].tween.set(G,oe(Q.call(De,De.__data__,je,Ye)))}:(Q=oe(Q),function(De){De[Ae][de].tween.set(G,Q)}))}function hi(C){return null==C&&(C=""),function(){this.textContent=C}}function Wi(C){return null==C?"__transition__":"__transition_"+C+"__"}function so(C,G,Q,oe,de){var Ae,De,je,Ye,Ke,st=C[Q]||(C[Q]={active:0,count:0}),mt=st[oe];function xt(Dt){var It=st.active,qt=st[It];for(var Ft in qt&&(qt.timer.c=null,qt.timer.t=NaN,--st.count,delete st[It],qt.event&&qt.event.interrupt.call(C,C.__data__,qt.index)),st)if(+Ft<oe){var on=st[Ft];on.timer.c=null,on.timer.t=NaN,--st.count,delete st[Ft]}De.c=Et,dn(function(){return De.c&&Et(Dt||1)&&(De.c=null,De.t=NaN),1},0,Ae),st.active=oe,mt.event&&mt.event.start.call(C,C.__data__,G),Ke=[],mt.tween.forEach(function(Qt,Kt){(Kt=Kt.call(C,C.__data__,G))&&Ke.push(Kt)}),Ye=mt.ease,je=mt.duration}function Et(Dt){for(var It=Dt/je,qt=Ye(It),Ft=Ke.length;Ft>0;)Ke[--Ft].call(C,qt);if(It>=1)return mt.event&&mt.event.end.call(C,C.__data__,G),--st.count?delete st[oe]:delete C[Q],1}mt||(De=dn(function(Dt){var It=mt.delay;if(De.t=It+Ae,It<=Dt)return xt(Dt-It);De.c=xt},0,Ae=de.time),mt=st[oe]={tween:new v,time:Ae,timer:De,delay:de.delay,duration:de.duration,ease:de.ease,index:G},de=null,++st.count)}Hi.call=we.call,Hi.empty=we.empty,Hi.node=we.node,Hi.size=we.size,o.transition=function(C,G){return C&&C.transition?ya?C.transition(G):C:o.selection().transition(C)},o.transition.prototype=Hi,Hi.select=function(C){var G,Q,oe,de=this.id,Ae=this.namespace,De=[];C=Te(C);for(var je=-1,Ye=this.length;++je<Ye;){De.push(G=[]);for(var Ke=this[je],st=-1,mt=Ke.length;++st<mt;)(oe=Ke[st])&&(Q=C.call(oe,oe.__data__,st,je))?("__data__"in oe&&(Q.__data__=oe.__data__),so(Q,st,Ae,de,oe[Ae][de]),G.push(Q)):G.push(null)}return Bo(De,Ae,de)},Hi.selectAll=function(C){var G,Q,oe,de,Ae,De=this.id,je=this.namespace,Ye=[];C=ye(C);for(var Ke=-1,st=this.length;++Ke<st;)for(var mt=this[Ke],xt=-1,Et=mt.length;++xt<Et;)if(oe=mt[xt]){Ae=oe[je][De],Q=C.call(oe,oe.__data__,xt,Ke),Ye.push(G=[]);for(var Dt=-1,It=Q.length;++Dt<It;)(de=Q[Dt])&&so(de,Dt,je,De,Ae),G.push(de)}return Bo(Ye,je,De)},Hi.filter=function(C){var G,Q,oe=[];"function"!=typeof C&&(C=Be(C));for(var de=0,Ae=this.length;de<Ae;de++){oe.push(G=[]);for(var De,je=0,Ye=(De=this[de]).length;je<Ye;je++)(Q=De[je])&&C.call(Q,Q.__data__,je,de)&&G.push(Q)}return Bo(oe,this.namespace,this.id)},Hi.tween=function(C,G){var Q=this.id,oe=this.namespace;return arguments.length<2?this.node()[oe][Q].tween.get(C):Me(this,null==G?function(de){de[oe][Q].tween.remove(C)}:function(de){de[oe][Q].tween.set(C,G)})},Hi.attr=function(C,G){if(arguments.length<2){for(G in C)this.attr(G,C[G]);return this}var Q="transform"==C?ec:co,oe=o.ns.qualify(C);function de(){this.removeAttribute(oe)}function Ae(){this.removeAttributeNS(oe.space,oe.local)}return ko(this,"attr."+C,G,oe.local?function(De){return null==De?Ae:(De+="",function(){var je,Ye=this.getAttributeNS(oe.space,oe.local);return Ye!==De&&(je=Q(Ye,De),function(Ke){this.setAttributeNS(oe.space,oe.local,je(Ke))})})}:function(De){return null==De?de:(De+="",function(){var je,Ye=this.getAttribute(oe);return Ye!==De&&(je=Q(Ye,De),function(Ke){this.setAttribute(oe,je(Ke))})})})},Hi.attrTween=function(C,G){var Q=o.ns.qualify(C);return this.tween("attr."+C,Q.local?function(oe,de){var Ae=G.call(this,oe,de,this.getAttributeNS(Q.space,Q.local));return Ae&&function(De){this.setAttributeNS(Q.space,Q.local,Ae(De))}}:function(oe,de){var Ae=G.call(this,oe,de,this.getAttribute(Q));return Ae&&function(De){this.setAttribute(Q,Ae(De))}})},Hi.style=function(C,G,Q){var oe=arguments.length;if(oe<3){if("string"!=typeof C){for(Q in oe<2&&(G=""),C)this.style(Q,C[Q],G);return this}Q=""}function de(){this.style.removeProperty(C)}return ko(this,"style."+C,G,function(Ae){return null==Ae?de:(Ae+="",function(){var De,je=t(this).getComputedStyle(this,null).getPropertyValue(C);return je!==Ae&&(De=co(je,Ae),function(Ye){this.style.setProperty(C,De(Ye),Q)})})})},Hi.styleTween=function(C,G,Q){return arguments.length<3&&(Q=""),this.tween("style."+C,function(oe,de){var Ae=G.call(this,oe,de,t(this).getComputedStyle(this,null).getPropertyValue(C));return Ae&&function(De){this.style.setProperty(C,Ae(De),Q)}})},Hi.text=function(C){return ko(this,"text",C,hi)},Hi.remove=function(){var C=this.namespace;return this.each("end.transition",function(){var G;this[C].count<2&&(G=this.parentNode)&&G.removeChild(this)})},Hi.ease=function(C){var G=this.id,Q=this.namespace;return arguments.length<1?this.node()[Q][G].ease:("function"!=typeof C&&(C=o.ease.apply(o,arguments)),Me(this,function(oe){oe[Q][G].ease=C}))},Hi.delay=function(C){var G=this.id,Q=this.namespace;return arguments.length<1?this.node()[Q][G].delay:Me(this,"function"==typeof C?function(oe,de,Ae){oe[Q][G].delay=+C.call(oe,oe.__data__,de,Ae)}:(C=+C,function(oe){oe[Q][G].delay=C}))},Hi.duration=function(C){var G=this.id,Q=this.namespace;return arguments.length<1?this.node()[Q][G].duration:Me(this,"function"==typeof C?function(oe,de,Ae){oe[Q][G].duration=Math.max(1,C.call(oe,oe.__data__,de,Ae))}:(C=Math.max(1,C),function(oe){oe[Q][G].duration=C}))},Hi.each=function(C,G){var Q=this.id,oe=this.namespace;if(arguments.length<2){var de=fi,Ae=ya;try{ya=Q,Me(this,function(De,je,Ye){fi=De[oe][Q],C.call(De,De.__data__,je,Ye)})}finally{fi=de,ya=Ae}}else Me(this,function(De){var je=De[oe][Q];(je.event||(je.event=o.dispatch("start","end","interrupt"))).on(C,G)});return this},Hi.transition=function(){for(var C,G,Q,oe=this.id,de=++Su,Ae=this.namespace,De=[],je=0,Ye=this.length;je<Ye;je++){De.push(C=[]);for(var Ke,st=0,mt=(Ke=this[je]).length;st<mt;st++)(G=Ke[st])&&so(G,st,Ae,de,{time:(Q=G[Ae][oe]).time,ease:Q.ease,delay:Q.delay+Q.duration,duration:Q.duration}),C.push(G)}return Bo(De,Ae,de)},o.svg.axis=function(){var C,G=o.scale.linear(),Q=No,oe=6,de=6,Ae=3,De=[10],je=null;function Ye(Ke){Ke.each(function(){var st,mt=o.select(this),xt=this.__chart__||G,Et=this.__chart__=G.copy(),Dt=je??(Et.ticks?Et.ticks.apply(Et,De):Et.domain()),It=C??(Et.tickFormat?Et.tickFormat.apply(Et,De):R),qt=mt.selectAll(".tick").data(Dt,Et),Ft=qt.enter().insert("g",".domain").attr("class","tick").style("opacity",it),on=o.transition(qt.exit()).style("opacity",it).remove(),Qt=o.transition(qt.order()).style("opacity",1),Kt=Math.max(oe,0)+Ae,kn=tu(Et),En=mt.selectAll(".domain").data([0]),Bn=(En.enter().append("path").attr("class","domain"),o.transition(En));Ft.append("line"),Ft.append("text");var qn,er,gr,wr,sr=Ft.select("line"),_r=Qt.select("line"),Dr=qt.select("text").text(It),Wr=Ft.select("text"),mr=Qt.select("text"),br="top"===Q||"left"===Q?-1:1;if("bottom"===Q||"top"===Q?(st=tt,qn="x",gr="y",er="x2",wr="y2",Dr.attr("dy",br<0?"0em":".71em").style("text-anchor","middle"),Bn.attr("d","M"+kn[0]+","+br*de+"V0H"+kn[1]+"V"+br*de)):(st=at,qn="y",gr="x",er="y2",wr="x2",Dr.attr("dy",".32em").style("text-anchor",br<0?"end":"start"),Bn.attr("d","M"+br*de+","+kn[0]+"H0V"+kn[1]+"H"+br*de)),sr.attr(wr,br*oe),Wr.attr(gr,br*Kt),_r.attr(er,0).attr(wr,br*oe),mr.attr(qn,0).attr(gr,br*Kt),Et.rangeBand){var jr=Et,Mr=jr.rangeBand()/2;xt=Et=function(Gr){return jr(Gr)+Mr}}else xt.rangeBand?xt=Et:on.call(st,Et,xt);Ft.call(st,xt,Et),Qt.call(st,Et,Et)})}return Ye.scale=function(Ke){return arguments.length?(G=Ke,Ye):G},Ye.orient=function(Ke){return arguments.length?(Q=Ke in Ls?Ke+"":No,Ye):Q},Ye.ticks=function(){return arguments.length?(De=_(arguments),Ye):De},Ye.tickValues=function(Ke){return arguments.length?(je=Ke,Ye):je},Ye.tickFormat=function(Ke){return arguments.length?(C=Ke,Ye):C},Ye.tickSize=function(Ke){var st=arguments.length;return st?(oe=+Ke,de=+arguments[st-1],Ye):oe},Ye.innerTickSize=function(Ke){return arguments.length?(oe=+Ke,Ye):oe},Ye.outerTickSize=function(Ke){return arguments.length?(de=+Ke,Ye):de},Ye.tickPadding=function(Ke){return arguments.length?(Ae=+Ke,Ye):Ae},Ye.tickSubdivide=function(){return arguments.length&&Ye},Ye};var No="bottom",Ls={top:1,right:1,bottom:1,left:1};function tt(C,G,Q){C.attr("transform",function(oe){var de=G(oe);return"translate("+(isFinite(de)?de:Q(oe))+",0)"})}function at(C,G,Q){C.attr("transform",function(oe){var de=G(oe);return"translate(0,"+(isFinite(de)?de:Q(oe))+")"})}o.svg.brush=function(){var C,G,Q=$(st,"brushstart","brush","brushend"),oe=null,de=null,Ae=[0,0],De=[0,0],je=!0,Ye=!0,Ke=N[0];function st(It){It.each(function(){var qt=o.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Dt).on("touchstart.brush",Dt),Ft=qt.selectAll(".background").data([0]);Ft.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),qt.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var on=qt.selectAll(".resize").data(Ke,R);on.exit().remove(),on.enter().append("g").attr("class",function(En){return"resize "+En}).style("cursor",function(En){return dt[En]}).append("rect").attr("x",function(En){return/[ew]$/.test(En)?-3:null}).attr("y",function(En){return/^[ns]/.test(En)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),on.style("display",st.empty()?"none":null);var Qt,Kt=o.transition(qt),kn=o.transition(Ft);oe&&(Qt=tu(oe),kn.attr("x",Qt[0]).attr("width",Qt[1]-Qt[0]),xt(Kt)),de&&(Qt=tu(de),kn.attr("y",Qt[0]).attr("height",Qt[1]-Qt[0]),Et(Kt)),mt(Kt)})}function mt(It){It.selectAll(".resize").attr("transform",function(qt){return"translate("+Ae[+/e$/.test(qt)]+","+De[+/^s/.test(qt)]+")"})}function xt(It){It.select(".extent").attr("x",Ae[0]),It.selectAll(".extent,.n>rect,.s>rect").attr("width",Ae[1]-Ae[0])}function Et(It){It.select(".extent").attr("y",De[0]),It.selectAll(".extent,.e>rect,.w>rect").attr("height",De[1]-De[0])}function Dt(){var It,qt,Ft=this,on=o.select(o.event.target),Qt=Q.of(Ft,arguments),Kt=o.select(Ft),kn=on.datum(),En=!/^(n|s)$/.test(kn)&&oe,Bn=!/^(e|w)$/.test(kn)&&de,qn=on.classed("extent"),er=Tt(Ft),gr=o.mouse(Ft),wr=o.select(t(Ft)).on("keydown.brush",function(){32==o.event.keyCode&&(qn||(It=null,gr[0]-=Ae[1],gr[1]-=De[1],qn=2),te())}).on("keyup.brush",function(){32==o.event.keyCode&&2==qn&&(gr[0]+=Ae[1],gr[1]+=De[1],qn=0,te())});if(o.event.changedTouches?wr.on("touchmove.brush",Dr).on("touchend.brush",mr):wr.on("mousemove.brush",Dr).on("mouseup.brush",mr),Kt.interrupt().selectAll("*").interrupt(),qn)gr[0]=Ae[0]-gr[0],gr[1]=De[0]-gr[1];else if(kn){var sr=+/w$/.test(kn),_r=+/^n/.test(kn);qt=[Ae[1-sr]-gr[0],De[1-_r]-gr[1]],gr[0]=Ae[sr],gr[1]=De[_r]}else o.event.altKey&&(It=gr.slice());function Dr(){var br=o.mouse(Ft),jr=!1;qt&&(br[0]+=qt[0],br[1]+=qt[1]),qn||(o.event.altKey?(It||(It=[(Ae[0]+Ae[1])/2,(De[0]+De[1])/2]),gr[0]=Ae[+(br[0]<It[0])],gr[1]=De[+(br[1]<It[1])]):It=null),En&&Wr(br,oe,0)&&(xt(Kt),jr=!0),Bn&&Wr(br,de,1)&&(Et(Kt),jr=!0),jr&&(mt(Kt),Qt({type:"brush",mode:qn?"move":"resize"}))}function Wr(br,jr,Mr){var Gr,$r,si=tu(jr),li=si[0],pi=si[1],_i=gr[Mr],na=Mr?De:Ae,ga=na[1]-na[0];if(qn&&(li-=_i,pi-=ga+_i),Gr=(Mr?Ye:je)?Math.max(li,Math.min(pi,br[Mr])):br[Mr],qn?$r=(Gr+=_i)+ga:(It&&(_i=Math.max(li,Math.min(pi,2*It[Mr]-Gr))),_i<Gr?($r=Gr,Gr=_i):$r=_i),na[0]!=Gr||na[1]!=$r)return Mr?G=null:C=null,na[0]=Gr,na[1]=$r,!0}function mr(){Dr(),Kt.style("pointer-events","all").selectAll(".resize").style("display",st.empty()?"none":null),o.select("body").style("cursor",null),wr.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),er(),Qt({type:"brushend"})}Kt.style("pointer-events","none").selectAll(".resize").style("display",null),o.select("body").style("cursor",on.style("cursor")),Qt({type:"brushstart"}),Dr()}return st.event=function(It){It.each(function(){var qt=Q.of(this,arguments),Ft={x:Ae,y:De,i:C,j:G},on=this.__chart__||Ft;this.__chart__=Ft,ya?o.select(this).transition().each("start.brush",function(){C=on.i,G=on.j,Ae=on.x,De=on.y,qt({type:"brushstart"})}).tween("brush:brush",function(){var Qt=Co(Ae,Ft.x),Kt=Co(De,Ft.y);return C=G=null,function(kn){Ae=Ft.x=Qt(kn),De=Ft.y=Kt(kn),qt({type:"brush",mode:"resize"})}}).each("end.brush",function(){C=Ft.i,G=Ft.j,qt({type:"brush",mode:"resize"}),qt({type:"brushend"})}):(qt({type:"brushstart"}),qt({type:"brush",mode:"resize"}),qt({type:"brushend"}))})},st.x=function(It){return arguments.length?(Ke=N[!(oe=It)<<1|!de],st):oe},st.y=function(It){return arguments.length?(Ke=N[!oe<<1|!(de=It)],st):de},st.clamp=function(It){return arguments.length?(oe&&de?(je=!!It[0],Ye=!!It[1]):oe?je=!!It:de&&(Ye=!!It),st):oe&&de?[je,Ye]:oe?je:de?Ye:null},st.extent=function(It){var qt,Ft,on,Qt,Kt;return arguments.length?(oe&&(qt=It[0],Ft=It[1],de&&(qt=qt[0],Ft=Ft[0]),C=[qt,Ft],oe.invert&&(qt=oe(qt),Ft=oe(Ft)),Ft<qt&&(Kt=qt,qt=Ft,Ft=Kt),qt==Ae[0]&&Ft==Ae[1]||(Ae=[qt,Ft])),de&&(on=It[0],Qt=It[1],oe&&(on=on[1],Qt=Qt[1]),G=[on,Qt],de.invert&&(on=de(on),Qt=de(Qt)),Qt<on&&(Kt=on,on=Qt,Qt=Kt),on==De[0]&&Qt==De[1]||(De=[on,Qt])),st):(oe&&(C?(qt=C[0],Ft=C[1]):(qt=Ae[0],Ft=Ae[1],oe.invert&&(qt=oe.invert(qt),Ft=oe.invert(Ft)),Ft<qt&&(Kt=qt,qt=Ft,Ft=Kt))),de&&(G?(on=G[0],Qt=G[1]):(on=De[0],Qt=De[1],de.invert&&(on=de.invert(on),Qt=de.invert(Qt)),Qt<on&&(Kt=on,on=Qt,Qt=Kt))),oe&&de?[[qt,on],[Ft,Qt]]:oe?[qt,Ft]:de&&[on,Qt])},st.clear=function(){return st.empty()||(Ae=[0,0],De=[0,0],C=G=null),st},st.empty=function(){return!!oe&&Ae[0]==Ae[1]||!!de&&De[0]==De[1]},o.rebind(st,Q,"on")};var dt={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},N=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function W(C){return JSON.parse(C.responseText)}function H(C){var G=p.createRange();return G.selectNode(p.body),G.createContextualFragment(C.responseText)}o.text=Zn(function(C){return C.responseText}),o.json=function(C,G){return hr(C,"application/json",W,G)},o.html=function(C,G){return hr(C,"text/html",H,G)},o.xml=Zn(function(C){return C.responseXML}),void 0===(k="function"==typeof(M=o)?M.call(F,e,F,ne):M)||(ne.exports=k)}).apply(self)},3480:function(ne){ne.exports=function(){"use strict";var F,e,M;function k(o,T){if(F)if(e){var _="var sharedChunk = {}; ("+F+")(sharedChunk); ("+e+")(sharedChunk);",p={};F(p),M=T(p),typeof window<"u"&&(M.workerUrl=window.URL.createObjectURL(new Blob([_],{type:"text/javascript"})))}else e=T;else F=T}return k(0,function(o){function T(A,D){return A(D={exports:{}},D.exports),D.exports}var _="1.13.4",p=l;function l(A,D,K,he){this.cx=3*A,this.bx=3*(K-A)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*D,this.by=3*(he-D)-this.cy,this.ay=1-this.cy-this.by,this.p1x=A,this.p1y=he,this.p2x=K,this.p2y=he}l.prototype.sampleCurveX=function(A){return((this.ax*A+this.bx)*A+this.cx)*A},l.prototype.sampleCurveY=function(A){return((this.ay*A+this.by)*A+this.cy)*A},l.prototype.sampleCurveDerivativeX=function(A){return(3*this.ax*A+2*this.bx)*A+this.cx},l.prototype.solveCurveX=function(A,D){var K,he,Ee,ze,We;for(void 0===D&&(D=1e-6),Ee=A,We=0;We<8;We++){if(ze=this.sampleCurveX(Ee)-A,Math.abs(ze)<D)return Ee;var rt=this.sampleCurveDerivativeX(Ee);if(Math.abs(rt)<1e-6)break;Ee-=ze/rt}if((Ee=A)<(K=0))return K;if(Ee>(he=1))return he;for(;K<he;){if(ze=this.sampleCurveX(Ee),Math.abs(ze-A)<D)return Ee;A>ze?K=Ee:he=Ee,Ee=.5*(he-K)+K}return Ee},l.prototype.solve=function(A,D){return this.sampleCurveY(this.solveCurveX(A,D))};var t=i;function i(A,D){this.x=A,this.y=D}i.prototype={clone:function(){return new i(this.x,this.y)},add:function(A){return this.clone()._add(A)},sub:function(A){return this.clone()._sub(A)},multByPoint:function(A){return this.clone()._multByPoint(A)},divByPoint:function(A){return this.clone()._divByPoint(A)},mult:function(A){return this.clone()._mult(A)},div:function(A){return this.clone()._div(A)},rotate:function(A){return this.clone()._rotate(A)},rotateAround:function(A,D){return this.clone()._rotateAround(A,D)},matMult:function(A){return this.clone()._matMult(A)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(A){return this.x===A.x&&this.y===A.y},dist:function(A){return Math.sqrt(this.distSqr(A))},distSqr:function(A){var D=A.x-this.x,K=A.y-this.y;return D*D+K*K},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(A){return Math.atan2(this.y-A.y,this.x-A.x)},angleWith:function(A){return this.angleWithSep(A.x,A.y)},angleWithSep:function(A,D){return Math.atan2(this.x*D-this.y*A,this.x*A+this.y*D)},_matMult:function(A){var K=A[2]*this.x+A[3]*this.y;return this.x=A[0]*this.x+A[1]*this.y,this.y=K,this},_add:function(A){return this.x+=A.x,this.y+=A.y,this},_sub:function(A){return this.x-=A.x,this.y-=A.y,this},_mult:function(A){return this.x*=A,this.y*=A,this},_div:function(A){return this.x/=A,this.y/=A,this},_multByPoint:function(A){return this.x*=A.x,this.y*=A.y,this},_divByPoint:function(A){return this.x/=A.x,this.y/=A.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var A=this.y;return this.y=this.x,this.x=-A,this},_rotate:function(A){var D=Math.cos(A),K=Math.sin(A),Ee=K*this.x+D*this.y;return this.x=D*this.x-K*this.y,this.y=Ee,this},_rotateAround:function(A,D){var K=Math.cos(A),he=Math.sin(A),ze=D.y+he*(this.x-D.x)+K*(this.y-D.y);return this.x=D.x+K*(this.x-D.x)-he*(this.y-D.y),this.y=ze,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(A){return A instanceof i?A:Array.isArray(A)?new i(A[0],A[1]):A};var r=typeof self<"u"?self:{},n=Math.pow(2,53)-1;function a(A,D,K,he){var Ee=new p(A,D,K,he);return function(ze){return Ee.solve(ze)}}var s=a(.25,.1,.25,1);function u(A,D,K){return Math.min(K,Math.max(D,A))}function f(A,D,K){var he=K-D,Ee=((A-D)%he+he)%he+D;return Ee===D?K:Ee}function c(A){for(var D=[],K=arguments.length-1;K-- >0;)D[K]=arguments[K+1];for(var he=0,Ee=D;he<Ee.length;he+=1){var ze=Ee[he];for(var We in ze)A[We]=ze[We]}return A}var y=1;function d(){return y++}function m(){return function A(D){return D?(D^16*Math.random()>>D/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,A)}()}function g(A){return!!A&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(A)}function x(A,D){A.forEach(function(K){D[K]&&(D[K]=D[K].bind(D))})}function v(A,D){return-1!==A.indexOf(D,A.length-D.length)}function b(A,D,K){var he={};for(var Ee in A)he[Ee]=D.call(K||this,A[Ee],Ee,A);return he}function h(A,D,K){var he={};for(var Ee in A)D.call(K||this,A[Ee],Ee,A)&&(he[Ee]=A[Ee]);return he}function S(A){return Array.isArray(A)?A.map(S):"object"==typeof A&&A?b(A,S):A}var w={};function E(A){w[A]||(typeof console<"u"&&console.warn(A),w[A]=!0)}function P(A,D,K){return(K.y-A.y)*(D.x-A.x)>(D.y-A.y)*(K.x-A.x)}function I(A){for(var D=0,K=0,he=A.length,Ee=he-1,ze=void 0,We=void 0;K<he;Ee=K++)D+=((We=A[Ee]).x-(ze=A[K]).x)*(ze.y+We.y);return D}function O(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function z(A){var D={};if(A.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(he,Ee,ze,We){var rt=ze||We;return D[Ee]=!rt||rt.toLowerCase(),""}),D["max-age"]){var K=parseInt(D["max-age"],10);isNaN(K)?delete D["max-age"]:D["max-age"]=K}return D}var U=null;function R(A){if(null==U){var D=A.navigator?A.navigator.userAgent:null;U=!!A.safari||!(!D||!(/\b(iPad|iPhone|iPod)\b/.test(D)||D.match("Safari")&&!D.match("Chrome")))}return U}function j(A){try{var D=r[A];return D.setItem("_mapbox_test_",1),D.removeItem("_mapbox_test_"),!0}catch{return!1}}var Y,B,V,q,ie=r.performance&&r.performance.now?r.performance.now.bind(r.performance):Date.now.bind(Date),te=r.requestAnimationFrame||r.mozRequestAnimationFrame||r.webkitRequestAnimationFrame||r.msRequestAnimationFrame,ee=r.cancelAnimationFrame||r.mozCancelAnimationFrame||r.webkitCancelAnimationFrame||r.msCancelAnimationFrame,$={now:ie,frame:function(A){var D=te(A);return{cancel:function(){return ee(D)}}},getImageData:function(A,D){void 0===D&&(D=0);var K=r.document.createElement("canvas"),he=K.getContext("2d");if(!he)throw new Error("failed to create canvas 2d context");return K.width=A.width,K.height=A.height,he.drawImage(A,0,0,A.width,A.height),he.getImageData(-D,-D,A.width+2*D,A.height+2*D)},resolveURL:function(A){return Y||(Y=r.document.createElement("a")),Y.href=A,Y.href},hardwareConcurrency:r.navigator&&r.navigator.hardwareConcurrency||4,get devicePixelRatio(){return r.devicePixelRatio},get prefersReducedMotion(){return!!r.matchMedia&&(null==B&&(B=r.matchMedia("(prefers-reduced-motion: reduce)")),B.matches)}},J={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},X={supported:!1,testSupport:function(A){!ae&&q&&(ce?le(A):V=A)}},ae=!1,ce=!1;function le(A){var D=A.createTexture();A.bindTexture(A.TEXTURE_2D,D);try{if(A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,q),A.isContextLost())return;X.supported=!0}catch{}A.deleteTexture(D),ae=!0}r.document&&((q=r.document.createElement("img")).onload=function(){V&&le(V),V=null,ce=!0},q.onerror=function(){ae=!0,V=null},q.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var pe="01",we=function(A,D){this._transformRequestFn=A,this._customAccessToken=D,this._createSkuToken()};function Te(A){return 0===A.indexOf("mapbox:")}we.prototype._createSkuToken=function(){var A=function(){for(var D="",K=0;K<10;K++)D+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",pe,D].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=A.token,this._skuTokenExpiresAt=A.tokenExpiresAt},we.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},we.prototype.transformRequest=function(A,D){return this._transformRequestFn&&this._transformRequestFn(A,D)||{url:A}},we.prototype.normalizeStyleURL=function(A,D){if(!Te(A))return A;var K=Ce(A);return K.path="/styles/v1"+K.path,this._makeAPIURL(K,this._customAccessToken||D)},we.prototype.normalizeGlyphsURL=function(A,D){if(!Te(A))return A;var K=Ce(A);return K.path="/fonts/v1"+K.path,this._makeAPIURL(K,this._customAccessToken||D)},we.prototype.normalizeSourceURL=function(A,D){if(!Te(A))return A;var K=Ce(A);return K.path="/v4/"+K.authority+".json",K.params.push("secure"),this._makeAPIURL(K,this._customAccessToken||D)},we.prototype.normalizeSpriteURL=function(A,D,K,he){var Ee=Ce(A);return Te(A)?(Ee.path="/styles/v1"+Ee.path+"/sprite"+D+K,this._makeAPIURL(Ee,this._customAccessToken||he)):(Ee.path+=""+D+K,Oe(Ee))},we.prototype.normalizeTileURL=function(A,D){if(this._isSkuTokenExpired()&&this._createSkuToken(),A&&!Te(A))return A;var K=Ce(A);K.path=K.path.replace(/(\.(png|jpg)\d*)(?=$)/,($.devicePixelRatio>=2||512===D?"@2x":"")+(X.supported?".webp":"$1")),K.path=K.path.replace(/^.+\/v4\//,"/"),K.path="/v4"+K.path;var ze=this._customAccessToken||function(We){for(var rt=0,gt=We;rt<gt.length;rt+=1){var Mt=gt[rt].match(/^access_token=(.*)$/);if(Mt)return Mt[1]}return null}(K.params)||J.ACCESS_TOKEN;return J.REQUIRE_ACCESS_TOKEN&&ze&&this._skuToken&&K.params.push("sku="+this._skuToken),this._makeAPIURL(K,ze)},we.prototype.canonicalizeTileURL=function(A,D){var K=Ce(A);if(!K.path.match(/(^\/v4\/)/)||!K.path.match(/\.[\w]+$/))return A;var he="mapbox://tiles/";he+=K.path.replace("/v4/","");var Ee=K.params;return D&&(Ee=Ee.filter(function(ze){return!ze.match(/^access_token=/)})),Ee.length&&(he+="?"+Ee.join("&")),he},we.prototype.canonicalizeTileset=function(A,D){for(var K=!!D&&Te(D),he=[],Ee=0,ze=A.tiles||[];Ee<ze.length;Ee+=1){var We=ze[Ee];ve(We)?he.push(this.canonicalizeTileURL(We,K)):he.push(We)}return he},we.prototype._makeAPIURL=function(A,D){var K="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",he=Ce(J.API_URL);if(A.protocol=he.protocol,A.authority=he.authority,"http"===A.protocol){var Ee=A.params.indexOf("secure");Ee>=0&&A.params.splice(Ee,1)}if("/"!==he.path&&(A.path=""+he.path+A.path),!J.REQUIRE_ACCESS_TOKEN)return Oe(A);if(!(D=D||J.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+K);if("s"===D[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+K);return A.params=A.params.filter(function(ze){return-1===ze.indexOf("access_token")}),A.params.push("access_token="+D),Oe(A)};var ye=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function ve(A){return ye.test(A)}var xe=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ce(A){var D=A.match(xe);if(!D)throw new Error("Unable to parse URL object");return{protocol:D[1],authority:D[2],path:D[3]||"/",params:D[4]?D[4].split("&"):[]}}function Oe(A){var D=A.params.length?"?"+A.params.join("&"):"";return A.protocol+"://"+A.authority+A.path+D}var be="mapbox.eventData";function ue(A){if(!A)return null;var K=A.split(".");if(!K||3!==K.length)return null;try{return JSON.parse(decodeURIComponent(r.atob(K[1]).split("").map(function(he){return"%"+("00"+he.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var se=function(A){this.type=A,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};se.prototype.getStorageKey=function(A){var D,he=ue(J.ACCESS_TOKEN);return D=he&&he.u?r.btoa(encodeURIComponent(he.u).replace(/%([0-9A-F]{2})/g,function(Ee,ze){return String.fromCharCode(+("0x"+ze))})):J.ACCESS_TOKEN||"",A?be+"."+A+":"+D:be+":"+D},se.prototype.fetchEventData=function(){var A=j("localStorage"),D=this.getStorageKey(),K=this.getStorageKey("uuid");if(A)try{var he=r.localStorage.getItem(D);he&&(this.eventData=JSON.parse(he));var Ee=r.localStorage.getItem(K);Ee&&(this.anonId=Ee)}catch{E("Unable to read from LocalStorage")}},se.prototype.saveEventData=function(){var A=j("localStorage"),D=this.getStorageKey(),K=this.getStorageKey("uuid");if(A)try{r.localStorage.setItem(K,this.anonId),Object.keys(this.eventData).length>=1&&r.localStorage.setItem(D,JSON.stringify(this.eventData))}catch{E("Unable to write to LocalStorage")}},se.prototype.processRequests=function(A){},se.prototype.postEvent=function(A,D,K,he){var Ee=this;if(J.EVENTS_URL){var ze=Ce(J.EVENTS_URL);ze.params.push("access_token="+(he||J.ACCESS_TOKEN||""));var We={event:this.type,created:new Date(A).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:_,skuId:pe,userId:this.anonId},rt=D?c(We,D):We,gt={url:Oe(ze),headers:{"Content-Type":"text/plain"},body:JSON.stringify([rt])};this.pendingRequest=Rt(gt,function(Mt){Ee.pendingRequest=null,K(Mt),Ee.saveEventData(),Ee.processRequests(he)})}},se.prototype.queueRequest=function(A,D){this.queue.push(A),this.processRequests(D)};var ge,Ie,ke=function(A){function D(){A.call(this,"map.load"),this.success={},this.skuToken=""}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype.postMapLoadEvent=function(K,he,Ee,ze){this.skuToken=Ee,(J.EVENTS_URL&&ze||J.ACCESS_TOKEN&&Array.isArray(K)&&K.some(function(We){return Te(We)||ve(We)}))&&this.queueRequest({id:he,timestamp:Date.now()},ze)},D.prototype.processRequests=function(K){var he=this;if(!this.pendingRequest&&0!==this.queue.length){var Ee=this.queue.shift(),ze=Ee.id,We=Ee.timestamp;ze&&this.success[ze]||(this.anonId||this.fetchEventData(),g(this.anonId)||(this.anonId=m()),this.postEvent(We,{skuToken:this.skuToken},function(rt){rt||ze&&(he.success[ze]=!0)},K))}},D}(se),Se=function(A){function D(K){A.call(this,"appUserTurnstile"),this._customAccessToken=K}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype.postTurnstileEvent=function(K,he){J.EVENTS_URL&&J.ACCESS_TOKEN&&Array.isArray(K)&&K.some(function(Ee){return Te(Ee)||ve(Ee)})&&this.queueRequest(Date.now(),he)},D.prototype.processRequests=function(K){var he=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var Ee=ue(J.ACCESS_TOKEN),ze=Ee?Ee.u:J.ACCESS_TOKEN,We=ze!==this.eventData.tokenU;g(this.anonId)||(this.anonId=m(),We=!0);var rt=this.queue.shift();if(this.eventData.lastSuccess){var gt=new Date(this.eventData.lastSuccess),Mt=new Date(rt),Ct=(rt-this.eventData.lastSuccess)/864e5;We=We||Ct>=1||Ct<-1||gt.getDate()!==Mt.getDate()}else We=!0;if(!We)return this.processRequests();this.postEvent(rt,{"enabled.telemetry":!1},function(Gt){Gt||(he.eventData.lastSuccess=rt,he.eventData.tokenU=ze)},K)}},D}(se),Pe=new Se,Fe=Pe.postTurnstileEvent.bind(Pe),Be=new ke,me=Be.postMapLoadEvent.bind(Be),Me="mapbox-tiles",Le=500,Ne=50,Re=42e4;function He(){r.caches&&!ge&&(ge=r.caches.open(Me))}function nt(A){var D=A.indexOf("?");return D<0?A:A.slice(0,D)}var ht,Tt=1/0;function At(){return null==ht&&(ht=r.OffscreenCanvas&&new r.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof r.createImageBitmap),ht}var _t={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(_t);var ot=function(A){function D(K,he,Ee){401===he&&ve(Ee)&&(K+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),A.call(this,K),this.status=he,this.url=Ee,this.name=this.constructor.name,this.message=K}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},D}(Error),it=O()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===r.location.protocol?r.parent:r).location.href};function Pt(A,D){var K,he=new r.AbortController,Ee=new r.Request(A.url,{method:A.method||"GET",body:A.body,credentials:A.credentials,headers:A.headers,referrer:it(),signal:he.signal}),ze=!1,We=!1,rt=(K=Ee.url).indexOf("sku=")>0&&ve(K);"json"===A.type&&Ee.headers.set("Accept","application/json");var gt=function(Ct,Gt,$t){if(!We){if(Ct&&"SecurityError"!==Ct.message&&E(Ct),Gt&&$t)return Mt(Gt);var Zt=Date.now();r.fetch(Ee).then(function(mn){if(mn.ok){var xn=rt?mn.clone():null;return Mt(mn,xn,Zt)}return D(new ot(mn.statusText,mn.status,A.url))}).catch(function(mn){20!==mn.code&&D(new Error(mn.message))})}},Mt=function(Ct,Gt,$t){("arrayBuffer"===A.type?Ct.arrayBuffer():"json"===A.type?Ct.json():Ct.text()).then(function(Zt){We||(Gt&&$t&&function Ze(A,D,K){if(He(),ge){var he={status:D.status,statusText:D.statusText,headers:new r.Headers};D.headers.forEach(function(ze,We){return he.headers.set(We,ze)});var Ee=z(D.headers.get("Cache-Control")||"");Ee["no-store"]||(Ee["max-age"]&&he.headers.set("Expires",new Date(K+1e3*Ee["max-age"]).toUTCString()),new Date(he.headers.get("Expires")).getTime()-K<Re||function(ze,We){if(void 0===Ie)try{new Response(new ReadableStream),Ie=!0}catch{Ie=!1}Ie?We(ze.body):ze.blob().then(We)}(D,function(ze){var We=new r.Response(ze,he);He(),ge&&ge.then(function(rt){return rt.put(nt(A.url),We)}).catch(function(rt){return E(rt.message)})}))}}(Ee,Gt,$t),ze=!0,D(null,Zt,Ct.headers.get("Cache-Control"),Ct.headers.get("Expires")))}).catch(function(Zt){We||D(new Error(Zt.message))})};return rt?function ft(A,D){if(He(),!ge)return D(null);var K=nt(A.url);ge.then(function(he){he.match(K).then(function(Ee){var ze=function(We){if(!We)return!1;var rt=new Date(We.headers.get("Expires")||0),gt=z(We.headers.get("Cache-Control")||"");return rt>Date.now()&&!gt["no-cache"]}(Ee);he.delete(K),ze&&he.put(K,Ee.clone()),D(null,Ee,ze)}).catch(D)}).catch(D)}(Ee,gt):gt(null,null),{cancel:function(){We=!0,ze||he.abort()}}}var Je,et,jt=function(A,D){if(!(/^file:/.test(K=A.url)||/^file:/.test(it())&&!/^\w+:/.test(K))){if(r.fetch&&r.Request&&r.AbortController&&r.Request.prototype.hasOwnProperty("signal"))return Pt(A,D);if(O()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",A,D,void 0,!0)}var K;return function(he,Ee){var ze=new r.XMLHttpRequest;for(var We in ze.open(he.method||"GET",he.url,!0),"arrayBuffer"===he.type&&(ze.responseType="arraybuffer"),he.headers)ze.setRequestHeader(We,he.headers[We]);return"json"===he.type&&(ze.responseType="text",ze.setRequestHeader("Accept","application/json")),ze.withCredentials="include"===he.credentials,ze.onerror=function(){Ee(new Error(ze.statusText))},ze.onload=function(){if((ze.status>=200&&ze.status<300||0===ze.status)&&null!==ze.response){var rt=ze.response;if("json"===he.type)try{rt=JSON.parse(ze.response)}catch(gt){return Ee(gt)}Ee(null,rt,ze.getResponseHeader("Cache-Control"),ze.getResponseHeader("Expires"))}else Ee(new ot(ze.statusText,ze.status,he.url))},ze.send(he.body),{cancel:function(){return ze.abort()}}}(A,D)},Ut=function(A,D){return jt(c(A,{type:"arrayBuffer"}),D)},Rt=function(A,D){return jt(c(A,{method:"POST"}),D)},qe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Je=[],et=0;var $e=function(A,D){if(X.supported&&(A.headers||(A.headers={}),A.headers.accept="image/webp,*/*"),et>=J.MAX_PARALLEL_IMAGE_REQUESTS){var K={requestParameters:A,callback:D,cancelled:!1,cancel:function(){this.cancelled=!0}};return Je.push(K),K}et++;var he=!1,Ee=function(){if(!he)for(he=!0,et--;Je.length&&et<J.MAX_PARALLEL_IMAGE_REQUESTS;){var We=Je.shift();We.cancelled||(We.cancel=$e(We.requestParameters,We.callback).cancel)}},ze=Ut(A,function(We,rt,gt,Mt){var Gt,$t;Ee(),We?D(We):rt&&(At()?(Gt=D,$t=new r.Blob([new Uint8Array(rt)],{type:"image/png"}),r.createImageBitmap($t).then(function(Zt){Gt(null,Zt)}).catch(function(Zt){Gt(new Error("Could not load image because of "+Zt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(Ct,Gt,$t,Zt){var mn=new r.Image,xn=r.URL;mn.onload=function(){Gt(null,mn),xn.revokeObjectURL(mn.src),mn.onload=null,r.requestAnimationFrame(function(){mn.src=qe})},mn.onerror=function(){return Gt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Rn=new r.Blob([new Uint8Array(Ct)],{type:"image/png"});mn.cacheControl=$t,mn.expires=Zt,mn.src=Ct.byteLength?xn.createObjectURL(Rn):qe}(rt,D,gt,Mt))});return{cancel:function(){ze.cancel(),Ee()}}};function pt(A,D,K){K[A]&&-1!==K[A].indexOf(D)||(K[A]=K[A]||[],K[A].push(D))}function ct(A,D,K){if(K&&K[A]){var he=K[A].indexOf(D);-1!==he&&K[A].splice(he,1)}}var Ve=function(A,D){void 0===D&&(D={}),c(this,D),this.type=A},Ge=function(A){function D(K,he){void 0===he&&(he={}),A.call(this,"error",c({error:K},he))}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D}(Ve),ut=function(){};ut.prototype.on=function(A,D){return this._listeners=this._listeners||{},pt(A,D,this._listeners),this},ut.prototype.off=function(A,D){return ct(A,D,this._listeners),ct(A,D,this._oneTimeListeners),this},ut.prototype.once=function(A,D){return this._oneTimeListeners=this._oneTimeListeners||{},pt(A,D,this._oneTimeListeners),this},ut.prototype.fire=function(A,D){"string"==typeof A&&(A=new Ve(A,D||{}));var K=A.type;if(this.listens(K)){A.target=this;for(var he=0,Ee=this._listeners&&this._listeners[K]?this._listeners[K].slice():[];he<Ee.length;he+=1)Ee[he].call(this,A);for(var ze=0,We=this._oneTimeListeners&&this._oneTimeListeners[K]?this._oneTimeListeners[K].slice():[];ze<We.length;ze+=1){var rt=We[ze];ct(K,rt,this._oneTimeListeners),rt.call(this,A)}var gt=this._eventedParent;gt&&(c(A,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),gt.fire(A))}else A instanceof Ge&&console.error(A.error);return this},ut.prototype.listens=function(A){return this._listeners&&this._listeners[A]&&this._listeners[A].length>0||this._oneTimeListeners&&this._oneTimeListeners[A]&&this._oneTimeListeners[A].length>0||this._eventedParent&&this._eventedParent.listens(A)},ut.prototype.setEventedParent=function(A,D){return this._eventedParent=A,this._eventedParentData=D,this};var Qe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},yt=function(A,D,K,he){this.message=(A?A+": ":"")+K,he&&(this.identifier=he),null!=D&&D.__line__&&(this.line=D.__line__)};function wt(A){var K=A.value;return K?[new yt(A.key,K,"constants have been deprecated as of v8")]:[]}function kt(A){for(var D=[],K=arguments.length-1;K-- >0;)D[K]=arguments[K+1];for(var he=0,Ee=D;he<Ee.length;he+=1){var ze=Ee[he];for(var We in ze)A[We]=ze[We]}return A}function vt(A){return A instanceof Number||A instanceof String||A instanceof Boolean?A.valueOf():A}function Lt(A){if(Array.isArray(A))return A.map(Lt);if(A instanceof Object&&!(A instanceof Number||A instanceof String||A instanceof Boolean)){var D={};for(var K in A)D[K]=Lt(A[K]);return D}return vt(A)}var St=function(A){function D(K,he){A.call(this,he),this.message=he,this.key=K}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D}(Error),Ot=function(A,D){void 0===D&&(D=[]),this.parent=A,this.bindings={};for(var K=0,he=D;K<he.length;K+=1){var Ee=he[K];this.bindings[Ee[0]]=Ee[1]}};Ot.prototype.concat=function(A){return new Ot(this,A)},Ot.prototype.get=function(A){if(this.bindings[A])return this.bindings[A];if(this.parent)return this.parent.get(A);throw new Error(A+" not found in scope.")},Ot.prototype.has=function(A){return!!this.bindings[A]||!!this.parent&&this.parent.has(A)};var Nt={kind:"null"},Bt={kind:"number"},Vt={kind:"string"},nn={kind:"boolean"},gn={kind:"color"},Jt={kind:"object"},an={kind:"value"},Xt={kind:"collator"},Gn={kind:"formatted"},Dn={kind:"resolvedImage"};function An(A,D){return{kind:"array",itemType:A,N:D}}function cn(A){if("array"===A.kind){var D=cn(A.itemType);return"number"==typeof A.N?"array<"+D+", "+A.N+">":"value"===A.itemType.kind?"array":"array<"+D+">"}return A.kind}var bn=[Nt,Bt,Vt,nn,gn,Gn,Jt,An(an),Dn];function hn(A,D){if("error"===D.kind)return null;if("array"===A.kind){if("array"===D.kind&&(0===D.N&&"value"===D.itemType.kind||!hn(A.itemType,D.itemType))&&("number"!=typeof A.N||A.N===D.N))return null}else{if(A.kind===D.kind)return null;if("value"===A.kind)for(var K=0,he=bn;K<he.length;K+=1)if(!hn(he[K],D))return null}return"Expected "+cn(A)+" but found "+cn(D)+" instead."}function wn(A,D){return D.some(function(K){return K.kind===A.kind})}function Ln(A,D){return D.some(function(K){return"null"===K?null===A:"array"===K?Array.isArray(A):"object"===K?A&&!Array.isArray(A)&&"object"==typeof A:K===typeof A})}var Nn=T(function(A,D){var K={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function he(gt){return(gt=Math.round(gt))<0?0:gt>255?255:gt}function ze(gt){return he("%"===gt[gt.length-1]?parseFloat(gt)/100*255:parseInt(gt))}function We(gt){return function Ee(gt){return gt<0?0:gt>1?1:gt}("%"===gt[gt.length-1]?parseFloat(gt)/100:parseFloat(gt))}function rt(gt,Mt,Ct){return Ct<0?Ct+=1:Ct>1&&(Ct-=1),6*Ct<1?gt+(Mt-gt)*Ct*6:2*Ct<1?Mt:3*Ct<2?gt+(Mt-gt)*(2/3-Ct)*6:gt}try{D.parseCSSColor=function(gt){var Mt,Ct=gt.replace(/ /g,"").toLowerCase();if(Ct in K)return K[Ct].slice();if("#"===Ct[0])return 4===Ct.length?(Mt=parseInt(Ct.substr(1),16))>=0&&Mt<=4095?[(3840&Mt)>>4|(3840&Mt)>>8,240&Mt|(240&Mt)>>4,15&Mt|(15&Mt)<<4,1]:null:7===Ct.length&&(Mt=parseInt(Ct.substr(1),16))>=0&&Mt<=16777215?[(16711680&Mt)>>16,(65280&Mt)>>8,255&Mt,1]:null;var Gt=Ct.indexOf("("),$t=Ct.indexOf(")");if(-1!==Gt&&$t+1===Ct.length){var Zt=Ct.substr(0,Gt),mn=Ct.substr(Gt+1,$t-(Gt+1)).split(","),xn=1;switch(Zt){case"rgba":if(4!==mn.length)return null;xn=We(mn.pop());case"rgb":return 3!==mn.length?null:[ze(mn[0]),ze(mn[1]),ze(mn[2]),xn];case"hsla":if(4!==mn.length)return null;xn=We(mn.pop());case"hsl":if(3!==mn.length)return null;var Rn=(parseFloat(mn[0])%360+360)%360/360,In=We(mn[1]),Yn=We(mn[2]),Kn=Yn<=.5?Yn*(In+1):Yn+In-Yn*In,ir=2*Yn-Kn;return[he(255*rt(ir,Kn,Rn+1/3)),he(255*rt(ir,Kn,Rn)),he(255*rt(ir,Kn,Rn-1/3)),xn];default:return null}}return null}}catch{}}).parseCSSColor,jn=function(A,D,K,he){void 0===he&&(he=1),this.r=A,this.g=D,this.b=K,this.a=he};jn.parse=function(A){if(A){if(A instanceof jn)return A;if("string"==typeof A){var D=Nn(A);if(D)return new jn(D[0]/255*D[3],D[1]/255*D[3],D[2]/255*D[3],D[3])}}},jn.prototype.toString=function(){var A=this.toArray(),K=A[1],he=A[2],Ee=A[3];return"rgba("+Math.round(A[0])+","+Math.round(K)+","+Math.round(he)+","+Ee+")"},jn.prototype.toArray=function(){var A=this,Ee=A.a;return 0===Ee?[0,0,0,0]:[255*A.r/Ee,255*A.g/Ee,255*A.b/Ee,Ee]},jn.black=new jn(0,0,0,1),jn.white=new jn(1,1,1,1),jn.transparent=new jn(0,0,0,0),jn.red=new jn(1,0,0,1);var Fn=function(A,D,K){this.sensitivity=A?D?"variant":"case":D?"accent":"base",this.locale=K,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Fn.prototype.compare=function(A,D){return this.collator.compare(A,D)},Fn.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Jn=function(A,D,K,he,Ee){this.text=A,this.image=D,this.scale=K,this.fontStack=he,this.textColor=Ee},Zn=function(A){this.sections=A};Zn.fromString=function(A){return new Zn([new Jn(A,null,null,null,null)])},Zn.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(A){return 0!==A.text.length||A.image&&0!==A.image.name.length})},Zn.factory=function(A){return A instanceof Zn?A:Zn.fromString(A)},Zn.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(A){return A.text}).join("")},Zn.prototype.serialize=function(){for(var A=["format"],D=0,K=this.sections;D<K.length;D+=1){var he=K[D];if(he.image)A.push(["image",he.image.name]);else{A.push(he.text);var Ee={};he.fontStack&&(Ee["text-font"]=["literal",he.fontStack.split(",")]),he.scale&&(Ee["font-scale"]=he.scale),he.textColor&&(Ee["text-color"]=["rgba"].concat(he.textColor.toArray())),A.push(Ee)}}return A};var hr=function(A){this.name=A.name,this.available=A.available};function rr(A,D,K,he){return"number"==typeof A&&A>=0&&A<=255&&"number"==typeof D&&D>=0&&D<=255&&"number"==typeof K&&K>=0&&K<=255?void 0===he||"number"==typeof he&&he>=0&&he<=1?null:"Invalid rgba value ["+[A,D,K,he].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof he?[A,D,K,he]:[A,D,K]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function dr(A){if(null===A||"string"==typeof A||"boolean"==typeof A||"number"==typeof A||A instanceof jn||A instanceof Fn||A instanceof Zn||A instanceof hr)return!0;if(Array.isArray(A)){for(var D=0,K=A;D<K.length;D+=1)if(!dr(K[D]))return!1;return!0}if("object"==typeof A){for(var he in A)if(!dr(A[he]))return!1;return!0}return!1}function nr(A){if(null===A)return Nt;if("string"==typeof A)return Vt;if("boolean"==typeof A)return nn;if("number"==typeof A)return Bt;if(A instanceof jn)return gn;if(A instanceof Fn)return Xt;if(A instanceof Zn)return Gn;if(A instanceof hr)return Dn;if(Array.isArray(A)){for(var D,K=A.length,he=0,Ee=A;he<Ee.length;he+=1){var ze=nr(Ee[he]);if(D){if(D===ze)continue;D=an;break}D=ze}return An(D||an,K)}return Jt}function Sr(A){var D=typeof A;return null===A?"":"string"===D||"number"===D||"boolean"===D?String(A):A instanceof jn||A instanceof Zn||A instanceof hr?A.toString():JSON.stringify(A)}hr.prototype.toString=function(){return this.name},hr.fromString=function(A){return A?new hr({name:A,available:!1}):null},hr.prototype.serialize=function(){return["image",this.name]};var ln=function(A,D){this.type=A,this.value=D};ln.parse=function(A,D){if(2!==A.length)return D.error("'literal' expression requires exactly one argument, but found "+(A.length-1)+" instead.");if(!dr(A[1]))return D.error("invalid value");var K=A[1],he=nr(K),Ee=D.expectedType;return"array"!==he.kind||0!==he.N||!Ee||"array"!==Ee.kind||"number"==typeof Ee.N&&0!==Ee.N||(he=Ee),new ln(he,K)},ln.prototype.evaluate=function(){return this.value},ln.prototype.eachChild=function(){},ln.prototype.outputDefined=function(){return!0},ln.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof jn?["rgba"].concat(this.value.toArray()):this.value instanceof Zn?this.value.serialize():this.value};var dn=function(A){this.name="ExpressionEvaluationError",this.message=A};dn.prototype.toJSON=function(){return this.message};var Un={string:Vt,number:Bt,boolean:nn,object:Jt},Mn=function(A,D){this.type=A,this.args=D};Mn.parse=function(A,D){if(A.length<2)return D.error("Expected at least one argument.");var K,he=1,Ee=A[0];if("array"===Ee){var ze,We;if(A.length>2){var rt=A[1];if("string"!=typeof rt||!(rt in Un)||"object"===rt)return D.error('The item type argument of "array" must be one of string, number, boolean',1);ze=Un[rt],he++}else ze=an;if(A.length>3){if(null!==A[2]&&("number"!=typeof A[2]||A[2]<0||A[2]!==Math.floor(A[2])))return D.error('The length argument to "array" must be a positive integer literal',2);We=A[2],he++}K=An(ze,We)}else K=Un[Ee];for(var gt=[];he<A.length;he++){var Mt=D.parse(A[he],he,an);if(!Mt)return null;gt.push(Mt)}return new Mn(K,gt)},Mn.prototype.evaluate=function(A){for(var D=0;D<this.args.length;D++){var K=this.args[D].evaluate(A);if(!hn(this.type,nr(K)))return K;if(D===this.args.length-1)throw new dn("Expected value to be of type "+cn(this.type)+", but found "+cn(nr(K))+" instead.")}return null},Mn.prototype.eachChild=function(A){this.args.forEach(A)},Mn.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},Mn.prototype.serialize=function(){var A=this.type,D=[A.kind];if("array"===A.kind){var K=A.itemType;if("string"===K.kind||"number"===K.kind||"boolean"===K.kind){D.push(K.kind);var he=A.N;("number"==typeof he||this.args.length>1)&&D.push(he)}}return D.concat(this.args.map(function(Ee){return Ee.serialize()}))};var Hn=function(A){this.type=Gn,this.sections=A};Hn.parse=function(A,D){if(A.length<2)return D.error("Expected at least one argument.");var K=A[1];if(!Array.isArray(K)&&"object"==typeof K)return D.error("First argument must be an image or text section.");for(var he=[],Ee=!1,ze=1;ze<=A.length-1;++ze){var We=A[ze];if(Ee&&"object"==typeof We&&!Array.isArray(We)){Ee=!1;var rt=null;if(We["font-scale"]&&!(rt=D.parse(We["font-scale"],1,Bt)))return null;var gt=null;if(We["text-font"]&&!(gt=D.parse(We["text-font"],1,An(Vt))))return null;var Mt=null;if(We["text-color"]&&!(Mt=D.parse(We["text-color"],1,gn)))return null;var Ct=he[he.length-1];Ct.scale=rt,Ct.font=gt,Ct.textColor=Mt}else{var Gt=D.parse(A[ze],1,an);if(!Gt)return null;var $t=Gt.type.kind;if("string"!==$t&&"value"!==$t&&"null"!==$t&&"resolvedImage"!==$t)return D.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");Ee=!0,he.push({content:Gt,scale:null,font:null,textColor:null})}}return new Hn(he)},Hn.prototype.evaluate=function(A){return new Zn(this.sections.map(function(D){var K=D.content.evaluate(A);return nr(K)===Dn?new Jn("",K,null,null,null):new Jn(Sr(K),null,D.scale?D.scale.evaluate(A):null,D.font?D.font.evaluate(A).join(","):null,D.textColor?D.textColor.evaluate(A):null)}))},Hn.prototype.eachChild=function(A){for(var D=0,K=this.sections;D<K.length;D+=1){var he=K[D];A(he.content),he.scale&&A(he.scale),he.font&&A(he.font),he.textColor&&A(he.textColor)}},Hn.prototype.outputDefined=function(){return!1},Hn.prototype.serialize=function(){for(var A=["format"],D=0,K=this.sections;D<K.length;D+=1){var he=K[D];A.push(he.content.serialize());var Ee={};he.scale&&(Ee["font-scale"]=he.scale.serialize()),he.font&&(Ee["text-font"]=he.font.serialize()),he.textColor&&(Ee["text-color"]=he.textColor.serialize()),A.push(Ee)}return A};var Wn=function(A){this.type=Dn,this.input=A};Wn.parse=function(A,D){if(2!==A.length)return D.error("Expected two arguments.");var K=D.parse(A[1],1,Vt);return K?new Wn(K):D.error("No image name provided.")},Wn.prototype.evaluate=function(A){var D=this.input.evaluate(A),K=hr.fromString(D);return K&&A.availableImages&&(K.available=A.availableImages.indexOf(D)>-1),K},Wn.prototype.eachChild=function(A){A(this.input)},Wn.prototype.outputDefined=function(){return!1},Wn.prototype.serialize=function(){return["image",this.input.serialize()]};var $n={"to-boolean":nn,"to-color":gn,"to-number":Bt,"to-string":Vt},lr=function(A,D){this.type=A,this.args=D};lr.parse=function(A,D){if(A.length<2)return D.error("Expected at least one argument.");var K=A[0];if(("to-boolean"===K||"to-string"===K)&&2!==A.length)return D.error("Expected one argument.");for(var he=$n[K],Ee=[],ze=1;ze<A.length;ze++){var We=D.parse(A[ze],ze,an);if(!We)return null;Ee.push(We)}return new lr(he,Ee)},lr.prototype.evaluate=function(A){if("boolean"===this.type.kind)return!!this.args[0].evaluate(A);if("color"===this.type.kind){for(var D,K,he=0,Ee=this.args;he<Ee.length;he+=1){if(K=null,(D=Ee[he].evaluate(A))instanceof jn)return D;if("string"==typeof D){var ze=A.parseColor(D);if(ze)return ze}else if(Array.isArray(D)&&!(K=D.length<3||D.length>4?"Invalid rbga value "+JSON.stringify(D)+": expected an array containing either three or four numeric values.":rr(D[0],D[1],D[2],D[3])))return new jn(D[0]/255,D[1]/255,D[2]/255,D[3])}throw new dn(K||"Could not parse color from value '"+("string"==typeof D?D:String(JSON.stringify(D)))+"'")}if("number"===this.type.kind){for(var We=null,rt=0,gt=this.args;rt<gt.length;rt+=1){if(null===(We=gt[rt].evaluate(A)))return 0;var Mt=Number(We);if(!isNaN(Mt))return Mt}throw new dn("Could not convert "+JSON.stringify(We)+" to number.")}return"formatted"===this.type.kind?Zn.fromString(Sr(this.args[0].evaluate(A))):"resolvedImage"===this.type.kind?hr.fromString(Sr(this.args[0].evaluate(A))):Sr(this.args[0].evaluate(A))},lr.prototype.eachChild=function(A){this.args.forEach(A)},lr.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},lr.prototype.serialize=function(){if("formatted"===this.type.kind)return new Hn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Wn(this.args[0]).serialize();var A=["to-"+this.type.kind];return this.eachChild(function(D){A.push(D.serialize())}),A};var Cr=["Unknown","Point","LineString","Polygon"],sn=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};sn.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},sn.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Cr[this.feature.type]:this.feature.type:null},sn.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},sn.prototype.canonicalID=function(){return this.canonical},sn.prototype.properties=function(){return this.feature&&this.feature.properties||{}},sn.prototype.parseColor=function(A){var D=this._parseColorCache[A];return D||(D=this._parseColorCache[A]=jn.parse(A)),D};var Sn=function(A,D,K,he){this.name=A,this.type=D,this._evaluate=K,this.args=he};Sn.prototype.evaluate=function(A){return this._evaluate(A,this.args)},Sn.prototype.eachChild=function(A){this.args.forEach(A)},Sn.prototype.outputDefined=function(){return!1},Sn.prototype.serialize=function(){return[this.name].concat(this.args.map(function(A){return A.serialize()}))},Sn.parse=function(A,D){var K,he=A[0],Ee=Sn.definitions[he];if(!Ee)return D.error('Unknown expression "'+he+'". If you wanted a literal array, use ["literal", [...]].',0);for(var ze=Array.isArray(Ee)?Ee[0]:Ee.type,We=Array.isArray(Ee)?[[Ee[1],Ee[2]]]:Ee.overloads,rt=We.filter(function(ai){var Kr=ai[0];return!Array.isArray(Kr)||Kr.length===A.length-1}),gt=null,Mt=0,Ct=rt;Mt<Ct.length;Mt+=1){var Gt=Ct[Mt],$t=Gt[0],Zt=Gt[1];gt=new Lr(D.registry,D.path,null,D.scope);for(var mn=[],xn=!1,Rn=1;Rn<A.length;Rn++){var In=A[Rn],Yn=Array.isArray($t)?$t[Rn-1]:$t.type,Kn=gt.parse(In,1+mn.length,Yn);if(!Kn){xn=!0;break}mn.push(Kn)}if(!xn)if(Array.isArray($t)&&$t.length!==mn.length)gt.error("Expected "+$t.length+" arguments, but found "+mn.length+" instead.");else{for(var ir=0;ir<mn.length;ir++){var ur=Array.isArray($t)?$t[ir]:$t.type,yr=mn[ir];gt.concat(ir+1).checkSubtype(ur,yr.type)}if(0===gt.errors.length)return new Sn(he,ze,Zt,mn)}}if(1===rt.length)(K=D.errors).push.apply(K,gt.errors);else{for(var Rr=(rt.length?rt:We).map(function(ai){return Kr=ai[0],Array.isArray(Kr)?"("+Kr.map(cn).join(", ")+")":"("+cn(Kr.type)+"...)";var Kr}).join(" | "),Er=[],Nr=1;Nr<A.length;Nr++){var Ur=D.parse(A[Nr],1+Er.length);if(!Ur)return null;Er.push(cn(Ur.type))}D.error("Expected arguments of type "+Rr+", but found ("+Er.join(", ")+") instead.")}return null},Sn.register=function(A,D){for(var K in Sn.definitions=D,D)A[K]=Sn};var zt=function(A,D,K){this.type=Xt,this.locale=K,this.caseSensitive=A,this.diacriticSensitive=D};zt.parse=function(A,D){if(2!==A.length)return D.error("Expected one argument.");var K=A[1];if("object"!=typeof K||Array.isArray(K))return D.error("Collator options argument must be an object.");var he=D.parse(void 0!==K["case-sensitive"]&&K["case-sensitive"],1,nn);if(!he)return null;var Ee=D.parse(void 0!==K["diacritic-sensitive"]&&K["diacritic-sensitive"],1,nn);if(!Ee)return null;var ze=null;return K.locale&&!(ze=D.parse(K.locale,1,Vt))?null:new zt(he,Ee,ze)},zt.prototype.evaluate=function(A){return new Fn(this.caseSensitive.evaluate(A),this.diacriticSensitive.evaluate(A),this.locale?this.locale.evaluate(A):null)},zt.prototype.eachChild=function(A){A(this.caseSensitive),A(this.diacriticSensitive),this.locale&&A(this.locale)},zt.prototype.outputDefined=function(){return!1},zt.prototype.serialize=function(){var A={};return A["case-sensitive"]=this.caseSensitive.serialize(),A["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(A.locale=this.locale.serialize()),["collator",A]};var Yt=8192;function un(A,D){A[0]=Math.min(A[0],D[0]),A[1]=Math.min(A[1],D[1]),A[2]=Math.max(A[2],D[0]),A[3]=Math.max(A[3],D[1])}function _n(A,D){return!(A[0]<=D[0]||A[2]>=D[2]||A[1]<=D[1]||A[3]>=D[3])}function Tn(A,D){var he=(180+A[0])/360,Ee=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A[1]*Math.PI/360)))/360,ze=Math.pow(2,D.z);return[Math.round(he*ze*Yt),Math.round(Ee*ze*Yt)]}function Cn(A,D,K){return D[1]>A[1]!=K[1]>A[1]&&A[0]<(K[0]-D[0])*(A[1]-D[1])/(K[1]-D[1])+D[0]}function vn(A,D){for(var K=!1,he=0,Ee=D.length;he<Ee;he++)for(var ze=D[he],We=0,rt=ze.length;We<rt-1;We++){if(void 0,void 0,void 0,void 0,(Gt=(gt=A)[0]-(Mt=ze[We])[0])*(mn=gt[1]-(Ct=ze[We+1])[1])-(Zt=gt[0]-Ct[0])*($t=gt[1]-Mt[1])==0&&Gt*Zt<=0&&$t*mn<=0)return!1;Cn(A,ze[We],ze[We+1])&&(K=!K)}var gt,Mt,Ct,Gt,$t,Zt,mn;return K}function rn(A,D){for(var K=0;K<D.length;K++)if(vn(A,D[K]))return!0;return!1}function tn(A,D,K,he){var gt=he[0]-K[0],Mt=he[1]-K[1],Ct=(A[0]-K[0])*Mt-gt*(A[1]-K[1]),Gt=(D[0]-K[0])*Mt-gt*(D[1]-K[1]);return Ct>0&&Gt<0||Ct<0&&Gt>0}function fn(A,D,K){for(var he=0,Ee=K;he<Ee.length;he+=1)for(var ze=Ee[he],We=0;We<ze.length-1;++We)if(void 0,void 0,(Gt=[(Ct=ze[We+1])[0]-(Mt=ze[We])[0],Ct[1]-Mt[1]])[0]*($t=[(gt=D)[0]-(rt=A)[0],gt[1]-rt[1]])[1]-Gt[1]*$t[0]!=0&&tn(rt,gt,Mt,Ct)&&tn(Mt,Ct,rt,gt))return!0;var rt,gt,Mt,Ct,Gt,$t;return!1}function yn(A,D){for(var K=0;K<A.length;++K)if(!vn(A[K],D))return!1;for(var he=0;he<A.length-1;++he)if(fn(A[he],A[he+1],D))return!1;return!0}function zn(A,D){for(var K=0;K<D.length;K++)if(yn(A,D[K]))return!0;return!1}function Vn(A,D,K){for(var he=[],Ee=0;Ee<A.length;Ee++){for(var ze=[],We=0;We<A[Ee].length;We++){var rt=Tn(A[Ee][We],K);un(D,rt),ze.push(rt)}he.push(ze)}return he}function Xn(A,D,K){for(var he=[],Ee=0;Ee<A.length;Ee++){var ze=Vn(A[Ee],D,K);he.push(ze)}return he}function Qn(A,D,K,he){if(A[0]<K[0]||A[0]>K[2]){var Ee=.5*he,ze=A[0]-K[0]>Ee?-he:K[0]-A[0]>Ee?he:0;0===ze&&(ze=A[0]-K[2]>Ee?-he:K[2]-A[0]>Ee?he:0),A[0]+=ze}un(D,A)}function pr(A,D,K,he){for(var Ee=Math.pow(2,he.z)*Yt,ze=[he.x*Yt,he.y*Yt],We=[],rt=0,gt=A;rt<gt.length;rt+=1)for(var Mt=0,Ct=gt[rt];Mt<Ct.length;Mt+=1){var Gt=Ct[Mt],$t=[Gt.x+ze[0],Gt.y+ze[1]];Qn($t,D,K,Ee),We.push($t)}return We}function or(A,D,K,he){for(var Ee=Math.pow(2,he.z)*Yt,ze=[he.x*Yt,he.y*Yt],We=[],rt=0,gt=A;rt<gt.length;rt+=1){for(var Mt=[],Ct=0,Gt=gt[rt];Ct<Gt.length;Ct+=1){var $t=Gt[Ct],Zt=[$t.x+ze[0],$t.y+ze[1]];un(D,Zt),Mt.push(Zt)}We.push(Mt)}if(D[2]-D[0]<=Ee/2){(Yn=D)[0]=Yn[1]=1/0,Yn[2]=Yn[3]=-1/0;for(var mn=0,xn=We;mn<xn.length;mn+=1)for(var Rn=0,In=xn[mn];Rn<In.length;Rn+=1)Qn(In[Rn],D,K,Ee)}var Yn;return We}var fr=function(A,D){this.type=nn,this.geojson=A,this.geometries=D};function vr(A){if(A instanceof Sn&&("get"===A.name&&1===A.args.length||"feature-state"===A.name||"has"===A.name&&1===A.args.length||"properties"===A.name||"geometry-type"===A.name||"id"===A.name||/^filter-/.test(A.name))||A instanceof fr)return!1;var D=!0;return A.eachChild(function(K){D&&!vr(K)&&(D=!1)}),D}function cr(A){if(A instanceof Sn&&"feature-state"===A.name)return!1;var D=!0;return A.eachChild(function(K){D&&!cr(K)&&(D=!1)}),D}function Ar(A,D){if(A instanceof Sn&&D.indexOf(A.name)>=0)return!1;var K=!0;return A.eachChild(function(he){K&&!Ar(he,D)&&(K=!1)}),K}fr.parse=function(A,D){if(2!==A.length)return D.error("'within' expression requires exactly one argument, but found "+(A.length-1)+" instead.");if(dr(A[1])){var K=A[1];if("FeatureCollection"===K.type)for(var he=0;he<K.features.length;++he){var Ee=K.features[he].geometry.type;if("Polygon"===Ee||"MultiPolygon"===Ee)return new fr(K,K.features[he].geometry)}else if("Feature"===K.type){var ze=K.geometry.type;if("Polygon"===ze||"MultiPolygon"===ze)return new fr(K,K.geometry)}else if("Polygon"===K.type||"MultiPolygon"===K.type)return new fr(K,K)}return D.error("'within' expression requires valid geojson object that contains polygon geometry type.")},fr.prototype.evaluate=function(A){if(null!=A.geometry()&&null!=A.canonicalID()){if("Point"===A.geometryType())return function(D,K){var he=[1/0,1/0,-1/0,-1/0],Ee=[1/0,1/0,-1/0,-1/0],ze=D.canonicalID();if("Polygon"===K.type){var We=Vn(K.coordinates,Ee,ze),rt=pr(D.geometry(),he,Ee,ze);if(!_n(he,Ee))return!1;for(var gt=0,Mt=rt;gt<Mt.length;gt+=1)if(!vn(Mt[gt],We))return!1}if("MultiPolygon"===K.type){var Ct=Xn(K.coordinates,Ee,ze),Gt=pr(D.geometry(),he,Ee,ze);if(!_n(he,Ee))return!1;for(var $t=0,Zt=Gt;$t<Zt.length;$t+=1)if(!rn(Zt[$t],Ct))return!1}return!0}(A,this.geometries);if("LineString"===A.geometryType())return function(D,K){var he=[1/0,1/0,-1/0,-1/0],Ee=[1/0,1/0,-1/0,-1/0],ze=D.canonicalID();if("Polygon"===K.type){var We=Vn(K.coordinates,Ee,ze),rt=or(D.geometry(),he,Ee,ze);if(!_n(he,Ee))return!1;for(var gt=0,Mt=rt;gt<Mt.length;gt+=1)if(!yn(Mt[gt],We))return!1}if("MultiPolygon"===K.type){var Ct=Xn(K.coordinates,Ee,ze),Gt=or(D.geometry(),he,Ee,ze);if(!_n(he,Ee))return!1;for(var $t=0,Zt=Gt;$t<Zt.length;$t+=1)if(!zn(Zt[$t],Ct))return!1}return!0}(A,this.geometries)}return!1},fr.prototype.eachChild=function(){},fr.prototype.outputDefined=function(){return!0},fr.prototype.serialize=function(){return["within",this.geojson]};var Fr=function(A,D){this.type=D.type,this.name=A,this.boundExpression=D};Fr.parse=function(A,D){if(2!==A.length||"string"!=typeof A[1])return D.error("'var' expression requires exactly one string literal argument.");var K=A[1];return D.scope.has(K)?new Fr(K,D.scope.get(K)):D.error('Unknown variable "'+K+'". Make sure "'+K+'" has been bound in an enclosing "let" expression before using it.',1)},Fr.prototype.evaluate=function(A){return this.boundExpression.evaluate(A)},Fr.prototype.eachChild=function(){},Fr.prototype.outputDefined=function(){return!1},Fr.prototype.serialize=function(){return["var",this.name]};var Lr=function(A,D,K,he,Ee){void 0===D&&(D=[]),void 0===he&&(he=new Ot),void 0===Ee&&(Ee=[]),this.registry=A,this.path=D,this.key=D.map(function(ze){return"["+ze+"]"}).join(""),this.scope=he,this.errors=Ee,this.expectedType=K};function xr(A){if(A instanceof Fr)return xr(A.boundExpression);if(A instanceof Sn&&"error"===A.name||A instanceof zt||A instanceof fr)return!1;var D=A instanceof lr||A instanceof Mn,K=!0;return A.eachChild(function(he){K=D?K&&xr(he):K&&he instanceof ln}),!!K&&vr(A)&&Ar(A,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Pr(A,D){for(var K,Ee=A.length-1,ze=0,We=Ee,rt=0;ze<=We;)if((K=A[rt=Math.floor((ze+We)/2)])<=D){if(rt===Ee||D<A[rt+1])return rt;ze=rt+1}else{if(!(K>D))throw new dn("Input is not a number.");We=rt-1}return 0}Lr.prototype.parse=function(A,D,K,he,Ee){return void 0===Ee&&(Ee={}),D?this.concat(D,K,he)._parse(A,Ee):this._parse(A,Ee)},Lr.prototype._parse=function(A,D){function K(Mt,Ct,Gt){return"assert"===Gt?new Mn(Ct,[Mt]):"coerce"===Gt?new lr(Ct,[Mt]):Mt}if(null!==A&&"string"!=typeof A&&"boolean"!=typeof A&&"number"!=typeof A||(A=["literal",A]),Array.isArray(A)){if(0===A.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var he=A[0];if("string"!=typeof he)return this.error("Expression name must be a string, but found "+typeof he+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var Ee=this.registry[he];if(Ee){var ze=Ee.parse(A,this);if(!ze)return null;if(this.expectedType){var We=this.expectedType,rt=ze.type;if("string"!==We.kind&&"number"!==We.kind&&"boolean"!==We.kind&&"object"!==We.kind&&"array"!==We.kind||"value"!==rt.kind)if("color"!==We.kind&&"formatted"!==We.kind&&"resolvedImage"!==We.kind||"value"!==rt.kind&&"string"!==rt.kind){if(this.checkSubtype(We,rt))return null}else ze=K(ze,We,D.typeAnnotation||"coerce");else ze=K(ze,We,D.typeAnnotation||"assert")}if(!(ze instanceof ln)&&"resolvedImage"!==ze.type.kind&&xr(ze)){var gt=new sn;try{ze=new ln(ze.type,ze.evaluate(gt))}catch(Mt){return this.error(Mt.message),null}}return ze}return this.error('Unknown expression "'+he+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===A?"'undefined' value invalid. Use null instead.":"object"==typeof A?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof A+" instead.")},Lr.prototype.concat=function(A,D,K){var he="number"==typeof A?this.path.concat(A):this.path,Ee=K?this.scope.concat(K):this.scope;return new Lr(this.registry,he,D||null,Ee,this.errors)},Lr.prototype.error=function(A){for(var D=[],K=arguments.length-1;K-- >0;)D[K]=arguments[K+1];var he=""+this.key+D.map(function(Ee){return"["+Ee+"]"}).join("");this.errors.push(new St(he,A))},Lr.prototype.checkSubtype=function(A,D){var K=hn(A,D);return K&&this.error(K),K};var qr=function(A,D,K){this.type=A,this.input=D,this.labels=[],this.outputs=[];for(var he=0,Ee=K;he<Ee.length;he+=1){var ze=Ee[he],rt=ze[1];this.labels.push(ze[0]),this.outputs.push(rt)}};function Qr(A,D,K){return A*(1-K)+D*K}qr.parse=function(A,D){if(A.length-1<4)return D.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if((A.length-1)%2!=0)return D.error("Expected an even number of arguments.");var K=D.parse(A[1],1,Bt);if(!K)return null;var he=[],Ee=null;D.expectedType&&"value"!==D.expectedType.kind&&(Ee=D.expectedType);for(var ze=1;ze<A.length;ze+=2){var We=1===ze?-1/0:A[ze],rt=A[ze+1],gt=ze,Mt=ze+1;if("number"!=typeof We)return D.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',gt);if(he.length&&he[he.length-1][0]>=We)return D.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',gt);var Ct=D.parse(rt,Mt,Ee);if(!Ct)return null;Ee=Ee||Ct.type,he.push([We,Ct])}return new qr(Ee,K,he)},qr.prototype.evaluate=function(A){var D=this.labels,K=this.outputs;if(1===D.length)return K[0].evaluate(A);var he=this.input.evaluate(A);if(he<=D[0])return K[0].evaluate(A);var Ee=D.length;return he>=D[Ee-1]?K[Ee-1].evaluate(A):K[Pr(D,he)].evaluate(A)},qr.prototype.eachChild=function(A){A(this.input);for(var D=0,K=this.outputs;D<K.length;D+=1)A(K[D])},qr.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})},qr.prototype.serialize=function(){for(var A=["step",this.input.serialize()],D=0;D<this.labels.length;D++)D>0&&A.push(this.labels[D]),A.push(this.outputs[D].serialize());return A};var Fi=Object.freeze({__proto__:null,number:Qr,color:function(A,D,K){return new jn(Qr(A.r,D.r,K),Qr(A.g,D.g,K),Qr(A.b,D.b,K),Qr(A.a,D.a,K))},array:function(A,D,K){return A.map(function(he,Ee){return Qr(he,D[Ee],K)})}}),pa=4/29,qa=6/29,ti=3*qa*qa,_a=qa*qa*qa,vo=Math.PI/180,ka=180/Math.PI;function vs(A){return A>_a?Math.pow(A,.3333333333333333):A/ti+pa}function ma(A){return A>qa?A*A*A:ti*(A-pa)}function Na(A){return 255*(A<=.0031308?12.92*A:1.055*Math.pow(A,.4166666666666667)-.055)}function Ho(A){return(A/=255)<=.04045?A/12.92:Math.pow((A+.055)/1.055,2.4)}function as(A){var D=Ho(A.r),K=Ho(A.g),he=Ho(A.b),Ee=vs((.4124564*D+.3575761*K+.1804375*he)/.95047),ze=vs((.2126729*D+.7151522*K+.072175*he)/1);return{l:116*ze-16,a:500*(Ee-ze),b:200*(ze-vs((.0193339*D+.119192*K+.9503041*he)/1.08883)),alpha:A.a}}function tl(A){var D=(A.l+16)/116,K=isNaN(A.a)?D:D+A.a/500,he=isNaN(A.b)?D:D-A.b/200;return D=1*ma(D),K=.95047*ma(K),he=1.08883*ma(he),new jn(Na(3.2404542*K-1.5371385*D-.4985314*he),Na(-.969266*K+1.8760108*D+.041556*he),Na(.0556434*K-.2040259*D+1.0572252*he),A.alpha)}function co(A,D,K){var he=D-A;return A+K*(he>180||he<-180?he-360*Math.round(he/360):he)}var Co={forward:as,reverse:tl,interpolate:function(A,D,K){return{l:Qr(A.l,D.l,K),a:Qr(A.a,D.a,K),b:Qr(A.b,D.b,K),alpha:Qr(A.alpha,D.alpha,K)}}},os={forward:function(A){var D=as(A),K=D.l,he=D.a,Ee=D.b,ze=Math.atan2(Ee,he)*ka;return{h:ze<0?ze+360:ze,c:Math.sqrt(he*he+Ee*Ee),l:K,alpha:A.a}},reverse:function(A){var D=A.h*vo,K=A.c;return tl({l:A.l,a:Math.cos(D)*K,b:Math.sin(D)*K,alpha:A.alpha})},interpolate:function(A,D,K){return{h:co(A.h,D.h,K),c:Qr(A.c,D.c,K),l:Qr(A.l,D.l,K),alpha:Qr(A.alpha,D.alpha,K)}}},ki=Object.freeze({__proto__:null,lab:Co,hcl:os}),wa=function(A,D,K,he,Ee){this.type=A,this.operator=D,this.interpolation=K,this.input=he,this.labels=[],this.outputs=[];for(var ze=0,We=Ee;ze<We.length;ze+=1){var rt=We[ze],Mt=rt[1];this.labels.push(rt[0]),this.outputs.push(Mt)}};function fo(A,D,K,he){var Ee=he-K,ze=A-K;return 0===Ee?0:1===D?ze/Ee:(Math.pow(D,ze)-1)/(Math.pow(D,Ee)-1)}wa.interpolationFactor=function(A,D,K,he){var Ee=0;if("exponential"===A.name)Ee=fo(D,A.base,K,he);else if("linear"===A.name)Ee=fo(D,1,K,he);else if("cubic-bezier"===A.name){var ze=A.controlPoints;Ee=new p(ze[0],ze[1],ze[2],ze[3]).solve(fo(D,1,K,he))}return Ee},wa.parse=function(A,D){var K=A[0],he=A[1],Ee=A[2],ze=A.slice(3);if(!Array.isArray(he)||0===he.length)return D.error("Expected an interpolation type expression.",1);if("linear"===he[0])he={name:"linear"};else if("exponential"===he[0]){var We=he[1];if("number"!=typeof We)return D.error("Exponential interpolation requires a numeric base.",1,1);he={name:"exponential",base:We}}else{if("cubic-bezier"!==he[0])return D.error("Unknown interpolation type "+String(he[0]),1,0);var rt=he.slice(1);if(4!==rt.length||rt.some(function(Rn){return"number"!=typeof Rn||Rn<0||Rn>1}))return D.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);he={name:"cubic-bezier",controlPoints:rt}}if(A.length-1<4)return D.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if((A.length-1)%2!=0)return D.error("Expected an even number of arguments.");if(!(Ee=D.parse(Ee,2,Bt)))return null;var gt=[],Mt=null;"interpolate-hcl"===K||"interpolate-lab"===K?Mt=gn:D.expectedType&&"value"!==D.expectedType.kind&&(Mt=D.expectedType);for(var Ct=0;Ct<ze.length;Ct+=2){var Gt=ze[Ct],$t=ze[Ct+1],Zt=Ct+3,mn=Ct+4;if("number"!=typeof Gt)return D.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Zt);if(gt.length&&gt[gt.length-1][0]>=Gt)return D.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Zt);var xn=D.parse($t,mn,Mt);if(!xn)return null;Mt=Mt||xn.type,gt.push([Gt,xn])}return"number"===Mt.kind||"color"===Mt.kind||"array"===Mt.kind&&"number"===Mt.itemType.kind&&"number"==typeof Mt.N?new wa(Mt,K,he,Ee,gt):D.error("Type "+cn(Mt)+" is not interpolatable.")},wa.prototype.evaluate=function(A){var D=this.labels,K=this.outputs;if(1===D.length)return K[0].evaluate(A);var he=this.input.evaluate(A);if(he<=D[0])return K[0].evaluate(A);var Ee=D.length;if(he>=D[Ee-1])return K[Ee-1].evaluate(A);var ze=Pr(D,he),gt=wa.interpolationFactor(this.interpolation,he,D[ze],D[ze+1]),Mt=K[ze].evaluate(A),Ct=K[ze+1].evaluate(A);return"interpolate"===this.operator?Fi[this.type.kind.toLowerCase()](Mt,Ct,gt):"interpolate-hcl"===this.operator?os.reverse(os.interpolate(os.forward(Mt),os.forward(Ct),gt)):Co.reverse(Co.interpolate(Co.forward(Mt),Co.forward(Ct),gt))},wa.prototype.eachChild=function(A){A(this.input);for(var D=0,K=this.outputs;D<K.length;D+=1)A(K[D])},wa.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})},wa.prototype.serialize=function(){var A;A="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var D=[this.operator,A,this.input.serialize()],K=0;K<this.labels.length;K++)D.push(this.labels[K],this.outputs[K].serialize());return D};var yo=function(A,D){this.type=A,this.args=D};yo.parse=function(A,D){if(A.length<2)return D.error("Expectected at least one argument.");var K=null,he=D.expectedType;he&&"value"!==he.kind&&(K=he);for(var Ee=[],ze=0,We=A.slice(1);ze<We.length;ze+=1){var gt=D.parse(We[ze],1+Ee.length,K,void 0,{typeAnnotation:"omit"});if(!gt)return null;K=K||gt.type,Ee.push(gt)}var Mt=he&&Ee.some(function(Ct){return hn(he,Ct.type)});return new yo(Mt?an:K,Ee)},yo.prototype.evaluate=function(A){for(var D,K=null,he=0,Ee=0,ze=this.args;Ee<ze.length&&(he++,(K=ze[Ee].evaluate(A))&&K instanceof hr&&!K.available&&(D||(D=K.name),K=null,he===this.args.length&&(K=D)),null===K);Ee+=1);return K},yo.prototype.eachChild=function(A){this.args.forEach(A)},yo.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},yo.prototype.serialize=function(){var A=["coalesce"];return this.eachChild(function(D){A.push(D.serialize())}),A};var oo=function(A,D){this.type=D.type,this.bindings=[].concat(A),this.result=D};oo.prototype.evaluate=function(A){return this.result.evaluate(A)},oo.prototype.eachChild=function(A){for(var D=0,K=this.bindings;D<K.length;D+=1)A(K[D][1]);A(this.result)},oo.parse=function(A,D){if(A.length<4)return D.error("Expected at least 3 arguments, but found "+(A.length-1)+" instead.");for(var K=[],he=1;he<A.length-1;he+=2){var Ee=A[he];if("string"!=typeof Ee)return D.error("Expected string, but found "+typeof Ee+" instead.",he);if(/[^a-zA-Z0-9_]/.test(Ee))return D.error("Variable names must contain only alphanumeric characters or '_'.",he);var ze=D.parse(A[he+1],he+1);if(!ze)return null;K.push([Ee,ze])}var We=D.parse(A[A.length-1],A.length-1,D.expectedType,K);return We?new oo(K,We):null},oo.prototype.outputDefined=function(){return this.result.outputDefined()},oo.prototype.serialize=function(){for(var A=["let"],D=0,K=this.bindings;D<K.length;D+=1){var he=K[D];A.push(he[0],he[1].serialize())}return A.push(this.result.serialize()),A};var Lo=function(A,D,K){this.type=A,this.index=D,this.input=K};Lo.parse=function(A,D){if(3!==A.length)return D.error("Expected 2 arguments, but found "+(A.length-1)+" instead.");var K=D.parse(A[1],1,Bt),he=D.parse(A[2],2,An(D.expectedType||an));return K&&he?new Lo(he.type.itemType,K,he):null},Lo.prototype.evaluate=function(A){var D=this.index.evaluate(A),K=this.input.evaluate(A);if(D<0)throw new dn("Array index out of bounds: "+D+" < 0.");if(D>=K.length)throw new dn("Array index out of bounds: "+D+" > "+(K.length-1)+".");if(D!==Math.floor(D))throw new dn("Array index must be an integer, but found "+D+" instead.");return K[D]},Lo.prototype.eachChild=function(A){A(this.index),A(this.input)},Lo.prototype.outputDefined=function(){return!1},Lo.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var qo=function(A,D){this.type=nn,this.needle=A,this.haystack=D};qo.parse=function(A,D){if(3!==A.length)return D.error("Expected 2 arguments, but found "+(A.length-1)+" instead.");var K=D.parse(A[1],1,an),he=D.parse(A[2],2,an);return K&&he?wn(K.type,[nn,Vt,Bt,Nt,an])?new qo(K,he):D.error("Expected first argument to be of type boolean, string, number or null, but found "+cn(K.type)+" instead"):null},qo.prototype.evaluate=function(A){var D=this.needle.evaluate(A),K=this.haystack.evaluate(A);if(!K)return!1;if(!Ln(D,["boolean","string","number","null"]))throw new dn("Expected first argument to be of type boolean, string, number or null, but found "+cn(nr(D))+" instead.");if(!Ln(K,["string","array"]))throw new dn("Expected second argument to be of type array or string, but found "+cn(nr(K))+" instead.");return K.indexOf(D)>=0},qo.prototype.eachChild=function(A){A(this.needle),A(this.haystack)},qo.prototype.outputDefined=function(){return!0},qo.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var nl=function(A,D,K){this.type=Bt,this.needle=A,this.haystack=D,this.fromIndex=K};nl.parse=function(A,D){if(A.length<=2||A.length>=5)return D.error("Expected 3 or 4 arguments, but found "+(A.length-1)+" instead.");var K=D.parse(A[1],1,an),he=D.parse(A[2],2,an);if(!K||!he)return null;if(!wn(K.type,[nn,Vt,Bt,Nt,an]))return D.error("Expected first argument to be of type boolean, string, number or null, but found "+cn(K.type)+" instead");if(4===A.length){var Ee=D.parse(A[3],3,Bt);return Ee?new nl(K,he,Ee):null}return new nl(K,he)},nl.prototype.evaluate=function(A){var D=this.needle.evaluate(A),K=this.haystack.evaluate(A);if(!Ln(D,["boolean","string","number","null"]))throw new dn("Expected first argument to be of type boolean, string, number or null, but found "+cn(nr(D))+" instead.");if(!Ln(K,["string","array"]))throw new dn("Expected second argument to be of type array or string, but found "+cn(nr(K))+" instead.");if(this.fromIndex){var he=this.fromIndex.evaluate(A);return K.indexOf(D,he)}return K.indexOf(D)},nl.prototype.eachChild=function(A){A(this.needle),A(this.haystack),this.fromIndex&&A(this.fromIndex)},nl.prototype.outputDefined=function(){return!1},nl.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var A=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),A]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var va=function(A,D,K,he,Ee,ze){this.inputType=A,this.type=D,this.input=K,this.cases=he,this.outputs=Ee,this.otherwise=ze};va.parse=function(A,D){if(A.length<5)return D.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if(A.length%2!=1)return D.error("Expected an even number of arguments.");var K,he;D.expectedType&&"value"!==D.expectedType.kind&&(he=D.expectedType);for(var Ee={},ze=[],We=2;We<A.length-1;We+=2){var rt=A[We],gt=A[We+1];Array.isArray(rt)||(rt=[rt]);var Mt=D.concat(We);if(0===rt.length)return Mt.error("Expected at least one branch label.");for(var Ct=0,Gt=rt;Ct<Gt.length;Ct+=1){var $t=Gt[Ct];if("number"!=typeof $t&&"string"!=typeof $t)return Mt.error("Branch labels must be numbers or strings.");if("number"==typeof $t&&Math.abs($t)>Number.MAX_SAFE_INTEGER)return Mt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof $t&&Math.floor($t)!==$t)return Mt.error("Numeric branch labels must be integer values.");if(K){if(Mt.checkSubtype(K,nr($t)))return null}else K=nr($t);if(void 0!==Ee[String($t)])return Mt.error("Branch labels must be unique.");Ee[String($t)]=ze.length}var Zt=D.parse(gt,We,he);if(!Zt)return null;he=he||Zt.type,ze.push(Zt)}var mn=D.parse(A[1],1,an);if(!mn)return null;var xn=D.parse(A[A.length-1],A.length-1,he);return xn?"value"!==mn.type.kind&&D.concat(1).checkSubtype(K,mn.type)?null:new va(K,he,mn,Ee,ze,xn):null},va.prototype.evaluate=function(A){var D=this.input.evaluate(A);return(nr(D)===this.inputType&&this.outputs[this.cases[D]]||this.otherwise).evaluate(A)},va.prototype.eachChild=function(A){A(this.input),this.outputs.forEach(A),A(this.otherwise)},va.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})&&this.otherwise.outputDefined()},va.prototype.serialize=function(){for(var A=this,D=["match",this.input.serialize()],K=[],he={},Ee=0,ze=Object.keys(this.cases).sort();Ee<ze.length;Ee+=1){var We=ze[Ee];void 0===(Gt=he[this.cases[We]])?(he[this.cases[We]]=K.length,K.push([this.cases[We],[We]])):K[Gt][1].push(We)}for(var rt=function(Zt){return"number"===A.inputType.kind?Number(Zt):Zt},gt=0,Mt=K;gt<Mt.length;gt+=1){var Ct=Mt[gt],Gt=Ct[0],$t=Ct[1];D.push(1===$t.length?rt($t[0]):$t.map(rt)),D.push(this.outputs[outputIndex$1].serialize())}return D.push(this.otherwise.serialize()),D};var Ns=function(A,D,K){this.type=A,this.branches=D,this.otherwise=K};Ns.parse=function(A,D){if(A.length<4)return D.error("Expected at least 3 arguments, but found only "+(A.length-1)+".");if(A.length%2!=0)return D.error("Expected an odd number of arguments.");var K;D.expectedType&&"value"!==D.expectedType.kind&&(K=D.expectedType);for(var he=[],Ee=1;Ee<A.length-1;Ee+=2){var ze=D.parse(A[Ee],Ee,nn);if(!ze)return null;var We=D.parse(A[Ee+1],Ee+1,K);if(!We)return null;he.push([ze,We]),K=K||We.type}var rt=D.parse(A[A.length-1],A.length-1,K);return rt?new Ns(K,he,rt):null},Ns.prototype.evaluate=function(A){for(var D=0,K=this.branches;D<K.length;D+=1){var he=K[D],ze=he[1];if(he[0].evaluate(A))return ze.evaluate(A)}return this.otherwise.evaluate(A)},Ns.prototype.eachChild=function(A){for(var D=0,K=this.branches;D<K.length;D+=1){var he=K[D],ze=he[1];A(he[0]),A(ze)}A(this.otherwise)},Ns.prototype.outputDefined=function(){return this.branches.every(function(A){return A[1].outputDefined()})&&this.otherwise.outputDefined()},Ns.prototype.serialize=function(){var A=["case"];return this.eachChild(function(D){A.push(D.serialize())}),A};var ys=function(A,D,K,he){this.type=A,this.input=D,this.beginIndex=K,this.endIndex=he};function _u(A,D){return"=="===A||"!="===A?"boolean"===D.kind||"string"===D.kind||"number"===D.kind||"null"===D.kind||"value"===D.kind:"string"===D.kind||"number"===D.kind||"value"===D.kind}function wu(A,D,K,he){return 0===he.compare(D,K)}function xs(A,D,K){var he="=="!==A&&"!="!==A;return function(){function Ee(ze,We,rt){this.type=nn,this.lhs=ze,this.rhs=We,this.collator=rt,this.hasUntypedArgument="value"===ze.type.kind||"value"===We.type.kind}return Ee.parse=function(ze,We){if(3!==ze.length&&4!==ze.length)return We.error("Expected two or three arguments.");var rt=ze[0],gt=We.parse(ze[1],1,an);if(!gt)return null;if(!_u(rt,gt.type))return We.concat(1).error('"'+rt+"\" comparisons are not supported for type '"+cn(gt.type)+"'.");var Mt=We.parse(ze[2],2,an);if(!Mt)return null;if(!_u(rt,Mt.type))return We.concat(2).error('"'+rt+"\" comparisons are not supported for type '"+cn(Mt.type)+"'.");if(gt.type.kind!==Mt.type.kind&&"value"!==gt.type.kind&&"value"!==Mt.type.kind)return We.error("Cannot compare types '"+cn(gt.type)+"' and '"+cn(Mt.type)+"'.");he&&("value"===gt.type.kind&&"value"!==Mt.type.kind?gt=new Mn(Mt.type,[gt]):"value"!==gt.type.kind&&"value"===Mt.type.kind&&(Mt=new Mn(gt.type,[Mt])));var Ct=null;if(4===ze.length){if("string"!==gt.type.kind&&"string"!==Mt.type.kind&&"value"!==gt.type.kind&&"value"!==Mt.type.kind)return We.error("Cannot use collator to compare non-string types.");if(!(Ct=We.parse(ze[3],3,Xt)))return null}return new Ee(gt,Mt,Ct)},Ee.prototype.evaluate=function(ze){var We=this.lhs.evaluate(ze),rt=this.rhs.evaluate(ze);if(he&&this.hasUntypedArgument){var gt=nr(We),Mt=nr(rt);if(gt.kind!==Mt.kind||"string"!==gt.kind&&"number"!==gt.kind)throw new dn('Expected arguments for "'+A+'" to be (string, string) or (number, number), but found ('+gt.kind+", "+Mt.kind+") instead.")}if(this.collator&&!he&&this.hasUntypedArgument){var Ct=nr(We),Gt=nr(rt);if("string"!==Ct.kind||"string"!==Gt.kind)return D(ze,We,rt)}return this.collator?K(ze,We,rt,this.collator.evaluate(ze)):D(ze,We,rt)},Ee.prototype.eachChild=function(ze){ze(this.lhs),ze(this.rhs),this.collator&&ze(this.collator)},Ee.prototype.outputDefined=function(){return!0},Ee.prototype.serialize=function(){var ze=[A];return this.eachChild(function(We){ze.push(We.serialize())}),ze},Ee}()}ys.parse=function(A,D){if(A.length<=2||A.length>=5)return D.error("Expected 3 or 4 arguments, but found "+(A.length-1)+" instead.");var K=D.parse(A[1],1,an),he=D.parse(A[2],2,Bt);if(!K||!he)return null;if(!wn(K.type,[An(an),Vt,an]))return D.error("Expected first argument to be of type array or string, but found "+cn(K.type)+" instead");if(4===A.length){var Ee=D.parse(A[3],3,Bt);return Ee?new ys(K.type,K,he,Ee):null}return new ys(K.type,K,he)},ys.prototype.evaluate=function(A){var D=this.input.evaluate(A),K=this.beginIndex.evaluate(A);if(!Ln(D,["string","array"]))throw new dn("Expected first argument to be of type array or string, but found "+cn(nr(D))+" instead.");if(this.endIndex){var he=this.endIndex.evaluate(A);return D.slice(K,he)}return D.slice(K)},ys.prototype.eachChild=function(A){A(this.input),A(this.beginIndex),this.endIndex&&A(this.endIndex)},ys.prototype.outputDefined=function(){return!1},ys.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var A=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),A]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var ss=xs("==",function(A,D,K){return D===K},wu),Vu=xs("!=",function(A,D,K){return D!==K},function(A,D,K,he){return!wu(0,D,K,he)}),Io=xs("<",function(A,D,K){return D<K},function(A,D,K,he){return he.compare(D,K)<0}),ec=xs(">",function(A,D,K){return D>K},function(A,D,K,he){return he.compare(D,K)>0}),_c=xs("<=",function(A,D,K){return D<=K},function(A,D,K,he){return he.compare(D,K)<=0}),wc=xs(">=",function(A,D,K){return D>=K},function(A,D,K,he){return he.compare(D,K)>=0}),rl=function(A,D,K,he,Ee){this.type=Vt,this.number=A,this.locale=D,this.currency=K,this.minFractionDigits=he,this.maxFractionDigits=Ee};rl.parse=function(A,D){if(3!==A.length)return D.error("Expected two arguments.");var K=D.parse(A[1],1,Bt);if(!K)return null;var he=A[2];if("object"!=typeof he||Array.isArray(he))return D.error("NumberFormat options argument must be an object.");var Ee=null;if(he.locale&&!(Ee=D.parse(he.locale,1,Vt)))return null;var ze=null;if(he.currency&&!(ze=D.parse(he.currency,1,Vt)))return null;var We=null;if(he["min-fraction-digits"]&&!(We=D.parse(he["min-fraction-digits"],1,Bt)))return null;var rt=null;return he["max-fraction-digits"]&&!(rt=D.parse(he["max-fraction-digits"],1,Bt))?null:new rl(K,Ee,ze,We,rt)},rl.prototype.evaluate=function(A){return new Intl.NumberFormat(this.locale?this.locale.evaluate(A):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(A):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(A):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(A):void 0}).format(this.number.evaluate(A))},rl.prototype.eachChild=function(A){A(this.number),this.locale&&A(this.locale),this.currency&&A(this.currency),this.minFractionDigits&&A(this.minFractionDigits),this.maxFractionDigits&&A(this.maxFractionDigits)},rl.prototype.outputDefined=function(){return!1},rl.prototype.serialize=function(){var A={};return this.locale&&(A.locale=this.locale.serialize()),this.currency&&(A.currency=this.currency.serialize()),this.minFractionDigits&&(A["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(A["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),A]};var Wo=function(A){this.type=Bt,this.input=A};Wo.parse=function(A,D){if(2!==A.length)return D.error("Expected 1 argument, but found "+(A.length-1)+" instead.");var K=D.parse(A[1],1);return K?"array"!==K.type.kind&&"string"!==K.type.kind&&"value"!==K.type.kind?D.error("Expected argument of type string or array, but found "+cn(K.type)+" instead."):new Wo(K):null},Wo.prototype.evaluate=function(A){var D=this.input.evaluate(A);if("string"==typeof D||Array.isArray(D))return D.length;throw new dn("Expected value to be of type string or array, but found "+cn(nr(D))+" instead.")},Wo.prototype.eachChild=function(A){A(this.input)},Wo.prototype.outputDefined=function(){return!1},Wo.prototype.serialize=function(){var A=["length"];return this.eachChild(function(D){A.push(D.serialize())}),A};var bl={"==":ss,"!=":Vu,">":ec,"<":Io,">=":wc,"<=":_c,array:Mn,at:Lo,boolean:Mn,case:Ns,coalesce:yo,collator:zt,format:Hn,image:Wn,in:qo,"index-of":nl,interpolate:wa,"interpolate-hcl":wa,"interpolate-lab":wa,length:Wo,let:oo,literal:ln,match:va,number:Mn,"number-format":rl,object:Mn,slice:ys,step:qr,string:Mn,"to-boolean":lr,"to-color":lr,"to-number":lr,"to-string":lr,var:Fr,within:fr};function bs(A,D){var K=D[0],he=D[1],Ee=D[2],ze=D[3];K=K.evaluate(A),he=he.evaluate(A),Ee=Ee.evaluate(A);var We=ze?ze.evaluate(A):1,rt=rr(K,he,Ee,We);if(rt)throw new dn(rt);return new jn(K/255*We,he/255*We,Ee/255*We,We)}function il(A,D){return A in D}function al(A,D){var K=D[A];return void 0===K?null:K}function Yo(A){return{type:A}}function Xl(A){return{result:"success",value:A}}function ls(A){return{result:"error",value:A}}function us(A){return"data-driven"===A["property-type"]||"cross-faded-data-driven"===A["property-type"]}function _s(A){return!!A.expression&&A.expression.parameters.indexOf("zoom")>-1}function js(A){return!!A.expression&&A.expression.interpolated}function mi(A){return A instanceof Number?"number":A instanceof String?"string":A instanceof Boolean?"boolean":Array.isArray(A)?"array":null===A?"null":typeof A}function Zo(A){return"object"==typeof A&&null!==A&&!Array.isArray(A)}function Tu(A){return A}function Kl(A,D){var K,he,Ee,ze="color"===D.type,We=A.stops&&"object"==typeof A.stops[0][0],gt=We||!(We||void 0!==A.property),Mt=A.type||(js(D)?"exponential":"interval");if(ze&&((A=kt({},A)).stops&&(A.stops=A.stops.map(function(Er){return[Er[0],jn.parse(Er[1])]})),A.default=jn.parse(A.default?A.default:D.default)),A.colorSpace&&"rgb"!==A.colorSpace&&!ki[A.colorSpace])throw new Error("Unknown color space: "+A.colorSpace);if("exponential"===Mt)K=ku;else if("interval"===Mt)K=ol;else if("categorical"===Mt){K=Jl,he=Object.create(null);for(var Ct=0,Gt=A.stops;Ct<Gt.length;Ct+=1){var $t=Gt[Ct];he[$t[0]]=$t[1]}Ee=typeof A.stops[0][0]}else{if("identity"!==Mt)throw new Error('Unknown function type "'+Mt+'"');K=Au}if(We){for(var Zt={},mn=[],xn=0;xn<A.stops.length;xn++){var Rn=A.stops[xn],In=Rn[0].zoom;void 0===Zt[In]&&(Zt[In]={zoom:In,type:A.type,property:A.property,default:A.default,stops:[]},mn.push(In)),Zt[In].stops.push([Rn[0].value,Rn[1]])}for(var Yn=[],Kn=0,ir=mn;Kn<ir.length;Kn+=1){var ur=ir[Kn];Yn.push([Zt[ur].zoom,Kl(Zt[ur],D)])}var yr={name:"linear"};return{kind:"composite",interpolationType:yr,interpolationFactor:wa.interpolationFactor.bind(void 0,yr),zoomStops:Yn.map(function(Er){return Er[0]}),evaluate:function(Er,Nr){var Ur=Er.zoom;return ku({stops:Yn,base:A.base},D,Ur).evaluate(Ur,Nr)}}}if(gt){var Rr="exponential"===Mt?{name:"exponential",base:void 0!==A.base?A.base:1}:null;return{kind:"camera",interpolationType:Rr,interpolationFactor:wa.interpolationFactor.bind(void 0,Rr),zoomStops:A.stops.map(function(Er){return Er[0]}),evaluate:function(Er){return K(A,D,Er.zoom,he,Ee)}}}return{kind:"source",evaluate:function(Er,Nr){var Ur=Nr&&Nr.properties?Nr.properties[A.property]:void 0;return void 0===Ur?Ll(A.default,D.default):K(A,D,Ur,he,Ee)}}}function Ll(A,D,K){return void 0!==A?A:void 0!==D?D:void 0!==K?K:void 0}function Jl(A,D,K,he,Ee){return Ll(typeof K===Ee?he[K]:void 0,A.default,D.default)}function ol(A,D,K){if("number"!==mi(K))return Ll(A.default,D.default);var he=A.stops.length;if(1===he||K<=A.stops[0][0])return A.stops[0][1];if(K>=A.stops[he-1][0])return A.stops[he-1][1];var Ee=Pr(A.stops.map(function(ze){return ze[0]}),K);return A.stops[Ee][1]}function ku(A,D,K){var he=void 0!==A.base?A.base:1;if("number"!==mi(K))return Ll(A.default,D.default);var Ee=A.stops.length;if(1===Ee||K<=A.stops[0][0])return A.stops[0][1];if(K>=A.stops[Ee-1][0])return A.stops[Ee-1][1];var $t,Zt,xn,Rn,ze=Pr(A.stops.map(function(Gt){return Gt[0]}),K),We=($t=he,Rn=K-(Zt=A.stops[ze][0]),0==(xn=A.stops[ze+1][0]-Zt)?0:1===$t?Rn/xn:(Math.pow($t,Rn)-1)/(Math.pow($t,xn)-1)),rt=A.stops[ze][1],gt=A.stops[ze+1][1],Mt=Fi[D.type]||Tu;if(A.colorSpace&&"rgb"!==A.colorSpace){var Ct=ki[A.colorSpace];Mt=function(Gt,$t){return Ct.reverse(Ct.interpolate(Ct.forward(Gt),Ct.forward($t),We))}}return"function"==typeof rt.evaluate?{evaluate:function(){for(var Gt=[],$t=arguments.length;$t--;)Gt[$t]=arguments[$t];var Zt=rt.evaluate.apply(void 0,Gt),mn=gt.evaluate.apply(void 0,Gt);if(void 0!==Zt&&void 0!==mn)return Mt(Zt,mn,We)}}:Mt(rt,gt,We)}function Au(A,D,K){return"color"===D.type?K=jn.parse(K):"formatted"===D.type?K=Zn.fromString(K.toString()):"resolvedImage"===D.type?K=hr.fromString(K.toString()):mi(K)===D.type||"enum"===D.type&&D.values[K]||(K=void 0),Ll(K,A.default,D.default)}Sn.register(bl,{error:[{kind:"error"},[Vt],function(A,D){throw new dn(D[0].evaluate(A))}],typeof:[Vt,[an],function(A,D){return cn(nr(D[0].evaluate(A)))}],"to-rgba":[An(Bt,4),[gn],function(A,D){return D[0].evaluate(A).toArray()}],rgb:[gn,[Bt,Bt,Bt],bs],rgba:[gn,[Bt,Bt,Bt,Bt],bs],has:{type:nn,overloads:[[[Vt],function(A,D){return il(D[0].evaluate(A),A.properties())}],[[Vt,Jt],function(A,D){var he=D[1];return il(D[0].evaluate(A),he.evaluate(A))}]]},get:{type:an,overloads:[[[Vt],function(A,D){return al(D[0].evaluate(A),A.properties())}],[[Vt,Jt],function(A,D){var he=D[1];return al(D[0].evaluate(A),he.evaluate(A))}]]},"feature-state":[an,[Vt],function(A,D){return al(D[0].evaluate(A),A.featureState||{})}],properties:[Jt,[],function(A){return A.properties()}],"geometry-type":[Vt,[],function(A){return A.geometryType()}],id:[an,[],function(A){return A.id()}],zoom:[Bt,[],function(A){return A.globals.zoom}],"heatmap-density":[Bt,[],function(A){return A.globals.heatmapDensity||0}],"line-progress":[Bt,[],function(A){return A.globals.lineProgress||0}],accumulated:[an,[],function(A){return void 0===A.globals.accumulated?null:A.globals.accumulated}],"+":[Bt,Yo(Bt),function(A,D){for(var K=0,he=0,Ee=D;he<Ee.length;he+=1)K+=Ee[he].evaluate(A);return K}],"*":[Bt,Yo(Bt),function(A,D){for(var K=1,he=0,Ee=D;he<Ee.length;he+=1)K*=Ee[he].evaluate(A);return K}],"-":{type:Bt,overloads:[[[Bt,Bt],function(A,D){var he=D[1];return D[0].evaluate(A)-he.evaluate(A)}],[[Bt],function(A,D){return-D[0].evaluate(A)}]]},"/":[Bt,[Bt,Bt],function(A,D){var he=D[1];return D[0].evaluate(A)/he.evaluate(A)}],"%":[Bt,[Bt,Bt],function(A,D){var he=D[1];return D[0].evaluate(A)%he.evaluate(A)}],ln2:[Bt,[],function(){return Math.LN2}],pi:[Bt,[],function(){return Math.PI}],e:[Bt,[],function(){return Math.E}],"^":[Bt,[Bt,Bt],function(A,D){var he=D[1];return Math.pow(D[0].evaluate(A),he.evaluate(A))}],sqrt:[Bt,[Bt],function(A,D){return Math.sqrt(D[0].evaluate(A))}],log10:[Bt,[Bt],function(A,D){return Math.log(D[0].evaluate(A))/Math.LN10}],ln:[Bt,[Bt],function(A,D){return Math.log(D[0].evaluate(A))}],log2:[Bt,[Bt],function(A,D){return Math.log(D[0].evaluate(A))/Math.LN2}],sin:[Bt,[Bt],function(A,D){return Math.sin(D[0].evaluate(A))}],cos:[Bt,[Bt],function(A,D){return Math.cos(D[0].evaluate(A))}],tan:[Bt,[Bt],function(A,D){return Math.tan(D[0].evaluate(A))}],asin:[Bt,[Bt],function(A,D){return Math.asin(D[0].evaluate(A))}],acos:[Bt,[Bt],function(A,D){return Math.acos(D[0].evaluate(A))}],atan:[Bt,[Bt],function(A,D){return Math.atan(D[0].evaluate(A))}],min:[Bt,Yo(Bt),function(A,D){return Math.min.apply(Math,D.map(function(K){return K.evaluate(A)}))}],max:[Bt,Yo(Bt),function(A,D){return Math.max.apply(Math,D.map(function(K){return K.evaluate(A)}))}],abs:[Bt,[Bt],function(A,D){return Math.abs(D[0].evaluate(A))}],round:[Bt,[Bt],function(A,D){var K=D[0].evaluate(A);return K<0?-Math.round(-K):Math.round(K)}],floor:[Bt,[Bt],function(A,D){return Math.floor(D[0].evaluate(A))}],ceil:[Bt,[Bt],function(A,D){return Math.ceil(D[0].evaluate(A))}],"filter-==":[nn,[Vt,an],function(A,D){var K=D[0],he=D[1];return A.properties()[K.value]===he.value}],"filter-id-==":[nn,[an],function(A,D){var K=D[0];return A.id()===K.value}],"filter-type-==":[nn,[Vt],function(A,D){var K=D[0];return A.geometryType()===K.value}],"filter-<":[nn,[Vt,an],function(A,D){var K=D[0],he=D[1],Ee=A.properties()[K.value],ze=he.value;return typeof Ee==typeof ze&&Ee<ze}],"filter-id-<":[nn,[an],function(A,D){var K=D[0],he=A.id(),Ee=K.value;return typeof he==typeof Ee&&he<Ee}],"filter->":[nn,[Vt,an],function(A,D){var K=D[0],he=D[1],Ee=A.properties()[K.value],ze=he.value;return typeof Ee==typeof ze&&Ee>ze}],"filter-id->":[nn,[an],function(A,D){var K=D[0],he=A.id(),Ee=K.value;return typeof he==typeof Ee&&he>Ee}],"filter-<=":[nn,[Vt,an],function(A,D){var K=D[0],he=D[1],Ee=A.properties()[K.value],ze=he.value;return typeof Ee==typeof ze&&Ee<=ze}],"filter-id-<=":[nn,[an],function(A,D){var K=D[0],he=A.id(),Ee=K.value;return typeof he==typeof Ee&&he<=Ee}],"filter->=":[nn,[Vt,an],function(A,D){var K=D[0],he=D[1],Ee=A.properties()[K.value],ze=he.value;return typeof Ee==typeof ze&&Ee>=ze}],"filter-id->=":[nn,[an],function(A,D){var K=D[0],he=A.id(),Ee=K.value;return typeof he==typeof Ee&&he>=Ee}],"filter-has":[nn,[an],function(A,D){return D[0].value in A.properties()}],"filter-has-id":[nn,[],function(A){return null!==A.id()&&void 0!==A.id()}],"filter-type-in":[nn,[An(Vt)],function(A,D){return D[0].value.indexOf(A.geometryType())>=0}],"filter-id-in":[nn,[An(an)],function(A,D){return D[0].value.indexOf(A.id())>=0}],"filter-in-small":[nn,[Vt,An(an)],function(A,D){var K=D[0];return D[1].value.indexOf(A.properties()[K.value])>=0}],"filter-in-large":[nn,[Vt,An(an)],function(A,D){var K=D[0],he=D[1];return function(Ee,ze,We,rt){for(;We<=rt;){var gt=We+rt>>1;if(ze[gt]===Ee)return!0;ze[gt]>Ee?rt=gt-1:We=gt+1}return!1}(A.properties()[K.value],he.value,0,he.value.length-1)}],all:{type:nn,overloads:[[[nn,nn],function(A,D){var he=D[1];return D[0].evaluate(A)&&he.evaluate(A)}],[Yo(nn),function(A,D){for(var K=0,he=D;K<he.length;K+=1)if(!he[K].evaluate(A))return!1;return!0}]]},any:{type:nn,overloads:[[[nn,nn],function(A,D){var he=D[1];return D[0].evaluate(A)||he.evaluate(A)}],[Yo(nn),function(A,D){for(var K=0,he=D;K<he.length;K+=1)if(he[K].evaluate(A))return!0;return!1}]]},"!":[nn,[nn],function(A,D){return!D[0].evaluate(A)}],"is-supported-script":[nn,[Vt],function(A,D){var he=A.globals&&A.globals.isSupportedScript;return!he||he(D[0].evaluate(A))}],upcase:[Vt,[Vt],function(A,D){return D[0].evaluate(A).toUpperCase()}],downcase:[Vt,[Vt],function(A,D){return D[0].evaluate(A).toLowerCase()}],concat:[Vt,Yo(an),function(A,D){return D.map(function(K){return Sr(K.evaluate(A))}).join("")}],"resolved-locale":[Vt,[Xt],function(A,D){return D[0].evaluate(A).resolvedLocale()}]});var Po=function(A,D){var K;this.expression=A,this._warningHistory={},this._evaluator=new sn,this._defaultValue=D?"color"===(K=D).type&&Zo(K.default)?new jn(0,0,0,0):"color"===K.type?jn.parse(K.default)||null:void 0===K.default?null:K.default:null,this._enumValues=D&&"enum"===D.type?D.values:null};function _l(A){return Array.isArray(A)&&A.length>0&&"string"==typeof A[0]&&A[0]in bl}function Ea(A,D){var Ee,ze,K=new Lr(bl,[],D?(ze={color:gn,string:Vt,number:Bt,enum:Vt,boolean:nn,formatted:Gn,resolvedImage:Dn},"array"===(Ee=D).type?An(ze[Ee.value]||an,Ee.length):ze[Ee.type]):void 0),he=K.parse(A,void 0,void 0,void 0,D&&"string"===D.type?{typeAnnotation:"coerce"}:void 0);return he?Xl(new Po(he,D)):ls(K.errors)}Po.prototype.evaluateWithoutErrorHandling=function(A,D,K,he,Ee,ze){return this._evaluator.globals=A,this._evaluator.feature=D,this._evaluator.featureState=K,this._evaluator.canonical=he,this._evaluator.availableImages=Ee||null,this._evaluator.formattedSection=ze,this.expression.evaluate(this._evaluator)},Po.prototype.evaluate=function(A,D,K,he,Ee,ze){this._evaluator.globals=A,this._evaluator.feature=D||null,this._evaluator.featureState=K||null,this._evaluator.canonical=he,this._evaluator.availableImages=Ee||null,this._evaluator.formattedSection=ze||null;try{var We=this.expression.evaluate(this._evaluator);if(null==We||"number"==typeof We&&We!=We)return this._defaultValue;if(this._enumValues&&!(We in this._enumValues))throw new dn("Expected value to be one of "+Object.keys(this._enumValues).map(function(rt){return JSON.stringify(rt)}).join(", ")+", but found "+JSON.stringify(We)+" instead.");return We}catch(rt){return this._warningHistory[rt.message]||(this._warningHistory[rt.message]=!0,typeof console<"u"&&console.warn(rt.message)),this._defaultValue}};var cs=function(A,D){this.kind=A,this._styleExpression=D,this.isStateDependent="constant"!==A&&!cr(D.expression)};cs.prototype.evaluateWithoutErrorHandling=function(A,D,K,he,Ee,ze){return this._styleExpression.evaluateWithoutErrorHandling(A,D,K,he,Ee,ze)},cs.prototype.evaluate=function(A,D,K,he,Ee,ze){return this._styleExpression.evaluate(A,D,K,he,Ee,ze)};var Il=function(A,D,K,he){this.kind=A,this.zoomStops=K,this._styleExpression=D,this.isStateDependent="camera"!==A&&!cr(D.expression),this.interpolationType=he};function tc(A,D){if("error"===(A=Ea(A,D)).result)return A;var K=A.value.expression,he=vr(K);if(!he&&!us(D))return ls([new St("","data expressions not supported")]);var Ee=Ar(K,["zoom"]);if(!Ee&&!_s(D))return ls([new St("","zoom expressions not supported")]);var ze=ws(K);return ze||Ee?ze instanceof St?ls([ze]):ze instanceof wa&&!js(D)?ls([new St("",'"interpolate" expressions cannot be used with this property')]):Xl(ze?new Il(he?"camera":"composite",A.value,ze.labels,ze instanceof wa?ze.interpolation:void 0):new cs(he?"constant":"source",A.value)):ls([new St("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Il.prototype.evaluateWithoutErrorHandling=function(A,D,K,he,Ee,ze){return this._styleExpression.evaluateWithoutErrorHandling(A,D,K,he,Ee,ze)},Il.prototype.evaluate=function(A,D,K,he,Ee,ze){return this._styleExpression.evaluate(A,D,K,he,Ee,ze)},Il.prototype.interpolationFactor=function(A,D,K){return this.interpolationType?wa.interpolationFactor(this.interpolationType,A,D,K):0};var $l=function(A,D){this._parameters=A,this._specification=D,kt(this,Kl(this._parameters,this._specification))};function ws(A){var D=null;if(A instanceof oo)D=ws(A.result);else if(A instanceof yo)for(var K=0,he=A.args;K<he.length&&!(D=ws(he[K]));K+=1);else(A instanceof qr||A instanceof wa)&&A.input instanceof Sn&&"zoom"===A.input.name&&(D=A);return D instanceof St||A.eachChild(function(ze){var We=ws(ze);We instanceof St?D=We:!D&&We?D=new St("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):D&&We&&D!==We&&(D=new St("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),D}function Oo(A){var D=A.key,K=A.value,he=A.valueSpec||{},Ee=A.objectElementValidators||{},ze=A.style,We=A.styleSpec,rt=[],gt=mi(K);if("object"!==gt)return[new yt(D,K,"object expected, "+gt+" found")];for(var Mt in K){var Ct=Mt.split(".")[0],Gt=he[Ct]||he["*"],$t=void 0;if(Ee[Ct])$t=Ee[Ct];else if(he[Ct])$t=bo;else if(Ee["*"])$t=Ee["*"];else{if(!he["*"]){rt.push(new yt(D,K[Mt],'unknown property "'+Mt+'"'));continue}$t=bo}rt=rt.concat($t({key:(D&&D+".")+Mt,value:K[Mt],valueSpec:Gt,style:ze,styleSpec:We,object:K,objectKey:Mt},K))}for(var Zt in he)Ee[Zt]||he[Zt].required&&void 0===he[Zt].default&&void 0===K[Zt]&&rt.push(new yt(D,K,'missing required property "'+Zt+'"'));return rt}function Mu(A){var D=A.value,K=A.valueSpec,he=A.style,Ee=A.styleSpec,ze=A.key,We=A.arrayElementValidator||bo;if("array"!==mi(D))return[new yt(ze,D,"array expected, "+mi(D)+" found")];if(K.length&&D.length!==K.length)return[new yt(ze,D,"array length "+K.length+" expected, length "+D.length+" found")];if(K["min-length"]&&D.length<K["min-length"])return[new yt(ze,D,"array length at least "+K["min-length"]+" expected, length "+D.length+" found")];var rt={type:K.value,values:K.values};Ee.$version<7&&(rt.function=K.function),"object"===mi(K.value)&&(rt=K.value);for(var gt=[],Mt=0;Mt<D.length;Mt++)gt=gt.concat(We({array:D,arrayIndex:Mt,value:D[Mt],valueSpec:rt,style:he,styleSpec:Ee,key:ze+"["+Mt+"]"}));return gt}function Ql(A){var D=A.key,K=A.value,he=A.valueSpec,Ee=mi(K);return"number"===Ee&&K!=K&&(Ee="NaN"),"number"!==Ee?[new yt(D,K,"number expected, "+Ee+" found")]:"minimum"in he&&K<he.minimum?[new yt(D,K,K+" is less than the minimum value "+he.minimum)]:"maximum"in he&&K>he.maximum?[new yt(D,K,K+" is greater than the maximum value "+he.maximum)]:[]}function wl(A){var D,K,he,Ee=A.valueSpec,ze=vt(A.value.type),We={},rt="categorical"!==ze&&void 0===A.value.property,gt=!rt,Mt="array"===mi(A.value.stops)&&"array"===mi(A.value.stops[0])&&"object"===mi(A.value.stops[0][0]),Ct=Oo({key:A.key,value:A.value,valueSpec:A.styleSpec.function,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{stops:function(Zt){if("identity"===ze)return[new yt(Zt.key,Zt.value,'identity function may not have a "stops" property')];var mn=[],xn=Zt.value;return mn=mn.concat(Mu({key:Zt.key,value:xn,valueSpec:Zt.valueSpec,style:Zt.style,styleSpec:Zt.styleSpec,arrayElementValidator:Gt})),"array"===mi(xn)&&0===xn.length&&mn.push(new yt(Zt.key,xn,"array must have at least one stop")),mn},default:function(Zt){return bo({key:Zt.key,value:Zt.value,valueSpec:Ee,style:Zt.style,styleSpec:Zt.styleSpec})}}});return"identity"===ze&&rt&&Ct.push(new yt(A.key,A.value,'missing required property "property"')),"identity"===ze||A.value.stops||Ct.push(new yt(A.key,A.value,'missing required property "stops"')),"exponential"===ze&&A.valueSpec.expression&&!js(A.valueSpec)&&Ct.push(new yt(A.key,A.value,"exponential functions not supported")),A.styleSpec.$version>=8&&(gt&&!us(A.valueSpec)?Ct.push(new yt(A.key,A.value,"property functions not supported")):rt&&!_s(A.valueSpec)&&Ct.push(new yt(A.key,A.value,"zoom functions not supported"))),"categorical"!==ze&&!Mt||void 0!==A.value.property||Ct.push(new yt(A.key,A.value,'"property" property is required')),Ct;function Gt(Zt){var mn=[],xn=Zt.value,Rn=Zt.key;if("array"!==mi(xn))return[new yt(Rn,xn,"array expected, "+mi(xn)+" found")];if(2!==xn.length)return[new yt(Rn,xn,"array length 2 expected, length "+xn.length+" found")];if(Mt){if("object"!==mi(xn[0]))return[new yt(Rn,xn,"object expected, "+mi(xn[0])+" found")];if(void 0===xn[0].zoom)return[new yt(Rn,xn,"object stop key must have zoom")];if(void 0===xn[0].value)return[new yt(Rn,xn,"object stop key must have value")];if(he&&he>vt(xn[0].zoom))return[new yt(Rn,xn[0].zoom,"stop zoom values must appear in ascending order")];vt(xn[0].zoom)!==he&&(he=vt(xn[0].zoom),K=void 0,We={}),mn=mn.concat(Oo({key:Rn+"[0]",value:xn[0],valueSpec:{zoom:{}},style:Zt.style,styleSpec:Zt.styleSpec,objectElementValidators:{zoom:Ql,value:$t}}))}else mn=mn.concat($t({key:Rn+"[0]",value:xn[0],valueSpec:{},style:Zt.style,styleSpec:Zt.styleSpec},xn));return _l(Lt(xn[1]))?mn.concat([new yt(Rn+"[1]",xn[1],"expressions are not allowed in function stops.")]):mn.concat(bo({key:Rn+"[1]",value:xn[1],valueSpec:Ee,style:Zt.style,styleSpec:Zt.styleSpec}))}function $t(Zt,mn){var xn=mi(Zt.value),Rn=vt(Zt.value),In=null!==Zt.value?Zt.value:mn;if(D){if(xn!==D)return[new yt(Zt.key,In,xn+" stop domain type must match previous stop domain type "+D)]}else D=xn;if("number"!==xn&&"string"!==xn&&"boolean"!==xn)return[new yt(Zt.key,In,"stop domain value must be a number, string, or boolean")];if("number"!==xn&&"categorical"!==ze){var Yn="number expected, "+xn+" found";return us(Ee)&&void 0===ze&&(Yn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new yt(Zt.key,In,Yn)]}return"categorical"!==ze||"number"!==xn||isFinite(Rn)&&Math.floor(Rn)===Rn?"categorical"!==ze&&"number"===xn&&void 0!==K&&Rn<K?[new yt(Zt.key,In,"stop domain values must appear in ascending order")]:(K=Rn,"categorical"===ze&&Rn in We?[new yt(Zt.key,In,"stop domain values must be unique")]:(We[Rn]=!0,[])):[new yt(Zt.key,In,"integer expected, found "+Rn)]}}function Us(A){var D=("property"===A.expressionContext?tc:Ea)(Lt(A.value),A.valueSpec);if("error"===D.result)return D.value.map(function(he){return new yt(""+A.key+he.key,A.value,he.message)});var K=D.value.expression||D.value._styleExpression.expression;if("property"===A.expressionContext&&"text-font"===A.propertyKey&&!K.outputDefined())return[new yt(A.key,A.value,'Invalid data expression for "'+A.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===A.expressionContext&&"layout"===A.propertyType&&!cr(K))return[new yt(A.key,A.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===A.expressionContext&&!cr(K))return[new yt(A.key,A.value,'"feature-state" data expressions are not supported with filters.')];if(A.expressionContext&&0===A.expressionContext.indexOf("cluster")){if(!Ar(K,["zoom","feature-state"]))return[new yt(A.key,A.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===A.expressionContext&&!vr(K))return[new yt(A.key,A.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function sl(A){var D=A.key,K=A.value,he=A.valueSpec,Ee=[];return Array.isArray(he.values)?-1===he.values.indexOf(vt(K))&&Ee.push(new yt(D,K,"expected one of ["+he.values.join(", ")+"], "+JSON.stringify(K)+" found")):-1===Object.keys(he.values).indexOf(vt(K))&&Ee.push(new yt(D,K,"expected one of ["+Object.keys(he.values).join(", ")+"], "+JSON.stringify(K)+" found")),Ee}function ll(A){if(!0===A||!1===A)return!0;if(!Array.isArray(A)||0===A.length)return!1;switch(A[0]){case"has":return A.length>=2&&"$id"!==A[1]&&"$type"!==A[1];case"in":return A.length>=3&&("string"!=typeof A[1]||Array.isArray(A[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==A.length||Array.isArray(A[1])||Array.isArray(A[2]);case"any":case"all":for(var D=0,K=A.slice(1);D<K.length;D+=1){var he=K[D];if(!ll(he)&&"boolean"!=typeof he)return!1}return!0;default:return!0}}$l.deserialize=function(A){return new $l(A._parameters,A._specification)},$l.serialize=function(A){return{_parameters:A._parameters,_specification:A._specification}};var ul={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Pl(A){if(null==A)return{filter:function(){return!0},needGeometry:!1};ll(A)||(A=Vs(A));var D=Ea(A,ul);if("error"===D.result)throw new Error(D.value.map(function(K){return K.key+": "+K.message}).join(", "));return{filter:function(K,he,Ee){return D.value.evaluate(K,he,{},Ee)},needGeometry:Di(A)}}function eu(A,D){return A<D?-1:A>D?1:0}function Di(A){if(!Array.isArray(A))return!1;if("within"===A[0])return!0;for(var D=1;D<A.length;D++)if(Di(A[D]))return!0;return!1}function Vs(A){if(!A)return!0;var D,K=A[0];return A.length<=1?"any"!==K:"=="===K?Wa(A[1],A[2],"=="):"!="===K?Ii(Wa(A[1],A[2],"==")):"<"===K||">"===K||"<="===K||">="===K?Wa(A[1],A[2],K):"any"===K?(D=A.slice(1),["any"].concat(D.map(Vs))):"all"===K?["all"].concat(A.slice(1).map(Vs)):"none"===K?["all"].concat(A.slice(1).map(Vs).map(Ii)):"in"===K?Xo(A[1],A.slice(2)):"!in"===K?Ii(Xo(A[1],A.slice(2))):"has"===K?Ai(A[1]):"!has"===K?Ii(Ai(A[1])):"within"!==K||A}function Wa(A,D,K){switch(A){case"$type":return["filter-type-"+K,D];case"$id":return["filter-id-"+K,D];default:return["filter-"+K,A,D]}}function Xo(A,D){if(0===D.length)return!1;switch(A){case"$type":return["filter-type-in",["literal",D]];case"$id":return["filter-id-in",["literal",D]];default:return D.length>200&&!D.some(function(K){return typeof K!=typeof D[0]})?["filter-in-large",A,["literal",D.sort(eu)]]:["filter-in-small",A,["literal",D]]}}function Ai(A){switch(A){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",A]}}function Ii(A){return["!",A]}function Ro(A){return ll(Lt(A.value))?Us(kt({},A,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Gs(A)}function Gs(A){var D=A.value,K=A.key;if("array"!==mi(D))return[new yt(K,D,"array expected, "+mi(D)+" found")];var he,Ee=A.styleSpec,ze=[];if(D.length<1)return[new yt(K,D,"filter array must have at least 1 element")];switch(ze=ze.concat(sl({key:K+"[0]",value:D[0],valueSpec:Ee.filter_operator,style:A.style,styleSpec:A.styleSpec})),vt(D[0])){case"<":case"<=":case">":case">=":D.length>=2&&"$type"===vt(D[1])&&ze.push(new yt(K,D,'"$type" cannot be use with operator "'+D[0]+'"'));case"==":case"!=":3!==D.length&&ze.push(new yt(K,D,'filter array for operator "'+D[0]+'" must have 3 elements'));case"in":case"!in":D.length>=2&&"string"!==(he=mi(D[1]))&&ze.push(new yt(K+"[1]",D[1],"string expected, "+he+" found"));for(var We=2;We<D.length;We++)he=mi(D[We]),"$type"===vt(D[1])?ze=ze.concat(sl({key:K+"["+We+"]",value:D[We],valueSpec:Ee.geometry_type,style:A.style,styleSpec:A.styleSpec})):"string"!==he&&"number"!==he&&"boolean"!==he&&ze.push(new yt(K+"["+We+"]",D[We],"string, number, or boolean expected, "+he+" found"));break;case"any":case"all":case"none":for(var rt=1;rt<D.length;rt++)ze=ze.concat(Gs({key:K+"["+rt+"]",value:D[rt],style:A.style,styleSpec:A.styleSpec}));break;case"has":case"!has":he=mi(D[1]),2!==D.length?ze.push(new yt(K,D,'filter array for "'+D[0]+'" operator must have 2 elements')):"string"!==he&&ze.push(new yt(K+"[1]",D[1],"string expected, "+he+" found"));break;case"within":he=mi(D[1]),2!==D.length?ze.push(new yt(K,D,'filter array for "'+D[0]+'" operator must have 2 elements')):"object"!==he&&ze.push(new yt(K+"[1]",D[1],"object expected, "+he+" found"))}return ze}function Tl(A,D){var K=A.key,he=A.style,Ee=A.styleSpec,ze=A.value,We=A.objectKey,rt=Ee[D+"_"+A.layerType];if(!rt)return[];var gt=We.match(/^(.*)-transition$/);if("paint"===D&&gt&&rt[gt[1]]&&rt[gt[1]].transition)return bo({key:K,value:ze,valueSpec:Ee.transition,style:he,styleSpec:Ee});var Mt,Ct=A.valueSpec||rt[We];if(!Ct)return[new yt(K,ze,'unknown property "'+We+'"')];if("string"===mi(ze)&&us(Ct)&&!Ct.tokens&&(Mt=/^{([^}]+)}$/.exec(ze)))return[new yt(K,ze,'"'+We+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(Mt[1])+" }`.")];var Gt=[];return"symbol"===A.layerType&&("text-field"===We&&he&&!he.glyphs&&Gt.push(new yt(K,ze,'use of "text-field" requires a style "glyphs" property')),"text-font"===We&&Zo(Lt(ze))&&"identity"===vt(ze.type)&&Gt.push(new yt(K,ze,'"text-font" does not support identity functions'))),Gt.concat(bo({key:A.key,value:ze,valueSpec:Ct,style:he,styleSpec:Ee,expressionContext:"property",propertyType:D,propertyKey:We}))}function Ol(A){return Tl(A,"paint")}function kl(A){return Tl(A,"layout")}function tu(A){var D=[],K=A.value,he=A.key,Ee=A.style,ze=A.styleSpec;K.type||K.ref||D.push(new yt(he,K,'either "type" or "ref" is required'));var We,rt=vt(K.type),gt=vt(K.ref);if(K.id)for(var Mt=vt(K.id),Ct=0;Ct<A.arrayIndex;Ct++){var Gt=Ee.layers[Ct];vt(Gt.id)===Mt&&D.push(new yt(he,K.id,'duplicate layer id "'+K.id+'", previously used at line '+Gt.id.__line__))}if("ref"in K)["type","source","source-layer","filter","layout"].forEach(function(mn){mn in K&&D.push(new yt(he,K[mn],'"'+mn+'" is prohibited for ref layers'))}),Ee.layers.forEach(function(mn){vt(mn.id)===gt&&(We=mn)}),We?We.ref?D.push(new yt(he,K.ref,"ref cannot reference another ref layer")):rt=vt(We.type):D.push(new yt(he,K.ref,'ref layer "'+gt+'" not found'));else if("background"!==rt)if(K.source){var $t=Ee.sources&&Ee.sources[K.source],Zt=$t&&vt($t.type);$t?"vector"===Zt&&"raster"===rt?D.push(new yt(he,K.source,'layer "'+K.id+'" requires a raster source')):"raster"===Zt&&"raster"!==rt?D.push(new yt(he,K.source,'layer "'+K.id+'" requires a vector source')):"vector"!==Zt||K["source-layer"]?"raster-dem"===Zt&&"hillshade"!==rt?D.push(new yt(he,K.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==rt||!K.paint||!K.paint["line-gradient"]||"geojson"===Zt&&$t.lineMetrics||D.push(new yt(he,K,'layer "'+K.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):D.push(new yt(he,K,'layer "'+K.id+'" must specify a "source-layer"')):D.push(new yt(he,K.source,'source "'+K.source+'" not found'))}else D.push(new yt(he,K,'missing required property "source"'));return D=D.concat(Oo({key:he,value:K,valueSpec:ze.layer,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return bo({key:he+".type",value:K.type,valueSpec:ze.layer.type,style:A.style,styleSpec:A.styleSpec,object:K,objectKey:"type"})},filter:Ro,layout:function(mn){return Oo({layer:K,key:mn.key,value:mn.value,style:mn.style,styleSpec:mn.styleSpec,objectElementValidators:{"*":function(xn){return kl(kt({layerType:rt},xn))}}})},paint:function(mn){return Oo({layer:K,key:mn.key,value:mn.value,style:mn.style,styleSpec:mn.styleSpec,objectElementValidators:{"*":function(xn){return Ol(kt({layerType:rt},xn))}}})}}}))}function xo(A){var D=A.value,K=A.key,he=mi(D);return"string"!==he?[new yt(K,D,"string expected, "+he+" found")]:[]}var Ts={promoteId:function(A){var D=A.key,K=A.value;if("string"===mi(K))return xo({key:D,value:K});var he=[];for(var Ee in K)he.push.apply(he,xo({key:D+"."+Ee,value:K[Ee]}));return he}};function cl(A){var D=A.value,K=A.key,he=A.styleSpec,Ee=A.style;if(!D.type)return[new yt(K,D,'"type" is required')];var ze,We=vt(D.type);switch(We){case"vector":case"raster":case"raster-dem":return Oo({key:K,value:D,valueSpec:he["source_"+We.replace("-","_")],style:A.style,styleSpec:he,objectElementValidators:Ts});case"geojson":if(ze=Oo({key:K,value:D,valueSpec:he.source_geojson,style:Ee,styleSpec:he,objectElementValidators:Ts}),D.cluster)for(var rt in D.clusterProperties){var gt=D.clusterProperties[rt],Mt=gt[0],Gt="string"==typeof Mt?[Mt,["accumulated"],["get",rt]]:Mt;ze.push.apply(ze,Us({key:K+"."+rt+".map",value:gt[1],expressionContext:"cluster-map"})),ze.push.apply(ze,Us({key:K+"."+rt+".reduce",value:Gt,expressionContext:"cluster-reduce"}))}return ze;case"video":return Oo({key:K,value:D,valueSpec:he.source_video,style:Ee,styleSpec:he});case"image":return Oo({key:K,value:D,valueSpec:he.source_image,style:Ee,styleSpec:he});case"canvas":return[new yt(K,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return sl({key:K+".type",value:D.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:Ee,styleSpec:he})}}function $a(A){var D=A.value,K=A.styleSpec,he=K.light,Ee=A.style,ze=[],We=mi(D);if(void 0===D)return ze;if("object"!==We)return ze.concat([new yt("light",D,"object expected, "+We+" found")]);for(var rt in D){var gt=rt.match(/^(.*)-transition$/);ze=ze.concat(gt&&he[gt[1]]&&he[gt[1]].transition?bo({key:rt,value:D[rt],valueSpec:K.transition,style:Ee,styleSpec:K}):he[rt]?bo({key:rt,value:D[rt],valueSpec:he[rt],style:Ee,styleSpec:K}):[new yt(rt,D[rt],'unknown property "'+rt+'"')])}return ze}var Al={"*":function(){return[]},array:Mu,boolean:function(A){var D=A.value,K=A.key,he=mi(D);return"boolean"!==he?[new yt(K,D,"boolean expected, "+he+" found")]:[]},number:Ql,color:function(A){var D=A.key,K=A.value,he=mi(K);return"string"!==he?[new yt(D,K,"color expected, "+he+" found")]:null===Nn(K)?[new yt(D,K,'color expected, "'+K+'" found')]:[]},constants:wt,enum:sl,filter:Ro,function:wl,layer:tu,object:Oo,source:cl,light:$a,string:xo,formatted:function(A){return 0===xo(A).length?[]:Us(A)},resolvedImage:function(A){return 0===xo(A).length?[]:Us(A)}};function bo(A){var D=A.value,K=A.valueSpec,he=A.styleSpec;return K.expression&&Zo(vt(D))?wl(A):K.expression&&_l(Lt(D))?Us(A):K.type&&Al[K.type]?Al[K.type](A):Oo(kt({},A,{valueSpec:K.type?he[K.type]:K}))}function Ra(A){var D=A.value,K=A.key,he=xo(A);return he.length||(-1===D.indexOf("{fontstack}")&&he.push(new yt(K,D,'"glyphs" url must include a "{fontstack}" token')),-1===D.indexOf("{range}")&&he.push(new yt(K,D,'"glyphs" url must include a "{range}" token'))),he}function ja(A,D){void 0===D&&(D=Qe);var K=[];return K=K.concat(bo({key:"",value:A,valueSpec:D.$root,styleSpec:D,style:A,objectElementValidators:{glyphs:Ra,"*":function(){return[]}}})),A.constants&&(K=K.concat(wt({key:"constants",value:A.constants,style:A,styleSpec:D}))),Bi(K)}function Bi(A){return[].concat(A).sort(function(D,K){return D.line-K.line})}function Da(A){return function(){for(var D=[],K=arguments.length;K--;)D[K]=arguments[K];return Bi(A.apply(this,D))}}ja.source=Da(cl),ja.light=Da($a),ja.layer=Da(tu),ja.filter=Da(Ro),ja.paintProperty=Da(Ol),ja.layoutProperty=Da(kl);var ks=ja,fl=ks.light,Qa=ks.paintProperty,Hs=ks.layoutProperty;function eo(A,D){var K=!1;if(D&&D.length)for(var he=0,Ee=D;he<Ee.length;he+=1)A.fire(new Ge(new Error(Ee[he].message))),K=!0;return K}var Ml=_o,fs=3;function _o(A,D,K){var he=this.cells=[];if(A instanceof ArrayBuffer){this.arrayBuffer=A;var Ee=new Int32Array(this.arrayBuffer);A=Ee[0],this.d=(D=Ee[1])+2*(K=Ee[2]);for(var ze=0;ze<this.d*this.d;ze++){var We=Ee[fs+ze],rt=Ee[fs+ze+1];he.push(We===rt?null:Ee.subarray(We,rt))}var Mt=Ee[fs+he.length+1];this.keys=Ee.subarray(Ee[fs+he.length],Mt),this.bboxes=Ee.subarray(Mt),this.insert=this._insertReadonly}else{this.d=D+2*K;for(var Ct=0;Ct<this.d*this.d;Ct++)he.push([]);this.keys=[],this.bboxes=[]}this.n=D,this.extent=A,this.padding=K,this.scale=D/A,this.uid=0;var Gt=K/D*A;this.min=-Gt,this.max=A+Gt}_o.prototype.insert=function(A,D,K,he,Ee){this._forEachCell(D,K,he,Ee,this._insertCell,this.uid++),this.keys.push(A),this.bboxes.push(D),this.bboxes.push(K),this.bboxes.push(he),this.bboxes.push(Ee)},_o.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},_o.prototype._insertCell=function(A,D,K,he,Ee,ze){this.cells[Ee].push(ze)},_o.prototype.query=function(A,D,K,he,Ee){var ze=this.min,We=this.max;if(A<=ze&&D<=ze&&We<=K&&We<=he&&!Ee)return Array.prototype.slice.call(this.keys);var rt=[];return this._forEachCell(A,D,K,he,this._queryCell,rt,{},Ee),rt},_o.prototype._queryCell=function(A,D,K,he,Ee,ze,We,rt){var gt=this.cells[Ee];if(null!==gt)for(var Mt=this.keys,Ct=this.bboxes,Gt=0;Gt<gt.length;Gt++){var $t=gt[Gt];if(void 0===We[$t]){var Zt=4*$t;(rt?rt(Ct[Zt+0],Ct[Zt+1],Ct[Zt+2],Ct[Zt+3]):A<=Ct[Zt+2]&&D<=Ct[Zt+3]&&K>=Ct[Zt+0]&&he>=Ct[Zt+1])?(We[$t]=!0,ze.push(Mt[$t])):We[$t]=!1}}},_o.prototype._forEachCell=function(A,D,K,he,Ee,ze,We,rt){for(var gt=this._convertToCellCoord(A),Mt=this._convertToCellCoord(D),Ct=this._convertToCellCoord(K),Gt=this._convertToCellCoord(he),$t=gt;$t<=Ct;$t++)for(var Zt=Mt;Zt<=Gt;Zt++){var mn=this.d*Zt+$t;if((!rt||rt(this._convertFromCellCoord($t),this._convertFromCellCoord(Zt),this._convertFromCellCoord($t+1),this._convertFromCellCoord(Zt+1)))&&Ee.call(this,A,D,K,he,mn,ze,We,rt))return}},_o.prototype._convertFromCellCoord=function(A){return(A-this.padding)/this.scale},_o.prototype._convertToCellCoord=function(A){return Math.max(0,Math.min(this.d-1,Math.floor(A*this.scale)+this.padding))},_o.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var A=this.cells,D=fs+this.cells.length+1+1,K=0,he=0;he<this.cells.length;he++)K+=this.cells[he].length;var Ee=new Int32Array(D+K+this.keys.length+this.bboxes.length);Ee[0]=this.extent,Ee[1]=this.n,Ee[2]=this.padding;for(var ze=D,We=0;We<A.length;We++){var rt=A[We];Ee[fs+We]=ze,Ee.set(rt,ze),ze+=rt.length}return Ee[fs+A.length]=ze,Ee.set(this.keys,ze),Ee[fs+A.length+1]=ze+=this.keys.length,Ee.set(this.bboxes,ze),ze+=this.bboxes.length,Ee.buffer};var Ko=r.ImageData,qi=r.ImageBitmap,Do={};function Hr(A,D,K){void 0===K&&(K={}),Object.defineProperty(D,"_classRegistryKey",{value:A,writeable:!1}),Do[A]={klass:D,omit:K.omit||[],shallow:K.shallow||[]}}for(var qs in Hr("Object",Object),Ml.serialize=function(A,D){var K=A.toArrayBuffer();return D&&D.push(K),{buffer:K}},Ml.deserialize=function(A){return new Ml(A.buffer)},Hr("Grid",Ml),Hr("Color",jn),Hr("Error",Error),Hr("ResolvedImage",hr),Hr("StylePropertyFunction",$l),Hr("StyleExpression",Po,{omit:["_evaluator"]}),Hr("ZoomDependentExpression",Il),Hr("ZoomConstantExpression",cs),Hr("CompoundExpression",Sn,{omit:["_evaluate"]}),bl)bl[qs]._classRegistryKey||Hr("Expression_"+qs,bl[qs]);function nu(A){return A&&typeof ArrayBuffer<"u"&&(A instanceof ArrayBuffer||A.constructor&&"ArrayBuffer"===A.constructor.name)}function hs(A){return qi&&A instanceof qi}function Ws(A,D){if(null==A||"boolean"==typeof A||"number"==typeof A||"string"==typeof A||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp)return A;if(nu(A)||hs(A))return D&&D.push(A),A;if(ArrayBuffer.isView(A)){var K=A;return D&&D.push(K.buffer),K}if(A instanceof Ko)return D&&D.push(A.data.buffer),A;if(Array.isArray(A)){for(var he=[],Ee=0,ze=A;Ee<ze.length;Ee+=1)he.push(Ws(ze[Ee],D));return he}if("object"==typeof A){var rt=A.constructor,gt=rt._classRegistryKey;if(!gt)throw new Error("can't serialize object of unregistered class");var Mt=rt.serialize?rt.serialize(A,D):{};if(!rt.serialize){for(var Ct in A)if(A.hasOwnProperty(Ct)&&!(Do[gt].omit.indexOf(Ct)>=0)){var Gt=A[Ct];Mt[Ct]=Do[gt].shallow.indexOf(Ct)>=0?Gt:Ws(Gt,D)}A instanceof Error&&(Mt.message=A.message)}if(Mt.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==gt&&(Mt.$name=gt),Mt}throw new Error("can't serialize object of type "+typeof A)}function hl(A){if(null==A||"boolean"==typeof A||"number"==typeof A||"string"==typeof A||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp||nu(A)||hs(A)||ArrayBuffer.isView(A)||A instanceof Ko)return A;if(Array.isArray(A))return A.map(hl);if("object"==typeof A){var D=A.$name||"Object",K=Do[D].klass;if(!K)throw new Error("can't deserialize unregistered class "+D);if(K.deserialize)return K.deserialize(A);for(var he=Object.create(K.prototype),Ee=0,ze=Object.keys(A);Ee<ze.length;Ee+=1){var We=ze[Ee];if("$name"!==We){var rt=A[We];he[We]=Do[D].shallow.indexOf(We)>=0?rt:hl(rt)}}return he}throw new Error("can't deserialize object of type "+typeof A)}var zo=function(){this.first=!0};zo.prototype.update=function(A,D){var K=Math.floor(A);return this.first?(this.first=!1,this.lastIntegerZoom=K,this.lastIntegerZoomTime=0,this.lastZoom=A,this.lastFloorZoom=K,!0):(this.lastFloorZoom>K?(this.lastIntegerZoom=K+1,this.lastIntegerZoomTime=D):this.lastFloorZoom<K&&(this.lastIntegerZoom=K,this.lastIntegerZoomTime=D),A!==this.lastZoom&&(this.lastZoom=A,this.lastFloorZoom=K,!0))};var Or={"Latin-1 Supplement":function(A){return A>=128&&A<=255},Arabic:function(A){return A>=1536&&A<=1791},"Arabic Supplement":function(A){return A>=1872&&A<=1919},"Arabic Extended-A":function(A){return A>=2208&&A<=2303},"Hangul Jamo":function(A){return A>=4352&&A<=4607},"Unified Canadian Aboriginal Syllabics":function(A){return A>=5120&&A<=5759},Khmer:function(A){return A>=6016&&A<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(A){return A>=6320&&A<=6399},"General Punctuation":function(A){return A>=8192&&A<=8303},"Letterlike Symbols":function(A){return A>=8448&&A<=8527},"Number Forms":function(A){return A>=8528&&A<=8591},"Miscellaneous Technical":function(A){return A>=8960&&A<=9215},"Control Pictures":function(A){return A>=9216&&A<=9279},"Optical Character Recognition":function(A){return A>=9280&&A<=9311},"Enclosed Alphanumerics":function(A){return A>=9312&&A<=9471},"Geometric Shapes":function(A){return A>=9632&&A<=9727},"Miscellaneous Symbols":function(A){return A>=9728&&A<=9983},"Miscellaneous Symbols and Arrows":function(A){return A>=11008&&A<=11263},"CJK Radicals Supplement":function(A){return A>=11904&&A<=12031},"Kangxi Radicals":function(A){return A>=12032&&A<=12255},"Ideographic Description Characters":function(A){return A>=12272&&A<=12287},"CJK Symbols and Punctuation":function(A){return A>=12288&&A<=12351},Hiragana:function(A){return A>=12352&&A<=12447},Katakana:function(A){return A>=12448&&A<=12543},Bopomofo:function(A){return A>=12544&&A<=12591},"Hangul Compatibility Jamo":function(A){return A>=12592&&A<=12687},Kanbun:function(A){return A>=12688&&A<=12703},"Bopomofo Extended":function(A){return A>=12704&&A<=12735},"CJK Strokes":function(A){return A>=12736&&A<=12783},"Katakana Phonetic Extensions":function(A){return A>=12784&&A<=12799},"Enclosed CJK Letters and Months":function(A){return A>=12800&&A<=13055},"CJK Compatibility":function(A){return A>=13056&&A<=13311},"CJK Unified Ideographs Extension A":function(A){return A>=13312&&A<=19903},"Yijing Hexagram Symbols":function(A){return A>=19904&&A<=19967},"CJK Unified Ideographs":function(A){return A>=19968&&A<=40959},"Yi Syllables":function(A){return A>=40960&&A<=42127},"Yi Radicals":function(A){return A>=42128&&A<=42191},"Hangul Jamo Extended-A":function(A){return A>=43360&&A<=43391},"Hangul Syllables":function(A){return A>=44032&&A<=55215},"Hangul Jamo Extended-B":function(A){return A>=55216&&A<=55295},"Private Use Area":function(A){return A>=57344&&A<=63743},"CJK Compatibility Ideographs":function(A){return A>=63744&&A<=64255},"Arabic Presentation Forms-A":function(A){return A>=64336&&A<=65023},"Vertical Forms":function(A){return A>=65040&&A<=65055},"CJK Compatibility Forms":function(A){return A>=65072&&A<=65103},"Small Form Variants":function(A){return A>=65104&&A<=65135},"Arabic Presentation Forms-B":function(A){return A>=65136&&A<=65279},"Halfwidth and Fullwidth Forms":function(A){return A>=65280&&A<=65519}};function ru(A){for(var D=0,K=A;D<K.length;D+=1)if(ds(K[D].charCodeAt(0)))return!0;return!1}function ds(A){return!(746!==A&&747!==A&&(A<4352||!(Or["Bopomofo Extended"](A)||Or.Bopomofo(A)||Or["CJK Compatibility Forms"](A)&&!(A>=65097&&A<=65103)||Or["CJK Compatibility Ideographs"](A)||Or["CJK Compatibility"](A)||Or["CJK Radicals Supplement"](A)||Or["CJK Strokes"](A)||!(!Or["CJK Symbols and Punctuation"](A)||A>=12296&&A<=12305||A>=12308&&A<=12319||12336===A)||Or["CJK Unified Ideographs Extension A"](A)||Or["CJK Unified Ideographs"](A)||Or["Enclosed CJK Letters and Months"](A)||Or["Hangul Compatibility Jamo"](A)||Or["Hangul Jamo Extended-A"](A)||Or["Hangul Jamo Extended-B"](A)||Or["Hangul Jamo"](A)||Or["Hangul Syllables"](A)||Or.Hiragana(A)||Or["Ideographic Description Characters"](A)||Or.Kanbun(A)||Or["Kangxi Radicals"](A)||Or["Katakana Phonetic Extensions"](A)||Or.Katakana(A)&&12540!==A||!(!Or["Halfwidth and Fullwidth Forms"](A)||65288===A||65289===A||65293===A||A>=65306&&A<=65310||65339===A||65341===A||65343===A||A>=65371&&A<=65503||65507===A||A>=65512&&A<=65519)||!(!Or["Small Form Variants"](A)||A>=65112&&A<=65118||A>=65123&&A<=65126)||Or["Unified Canadian Aboriginal Syllabics"](A)||Or["Unified Canadian Aboriginal Syllabics Extended"](A)||Or["Vertical Forms"](A)||Or["Yijing Hexagram Symbols"](A)||Or["Yi Syllables"](A)||Or["Yi Radicals"](A))))}function za(A){return!(ds(A)||(D=A,Or["Latin-1 Supplement"](D)&&(167===D||169===D||174===D||177===D||188===D||189===D||190===D||215===D||247===D)||Or["General Punctuation"](D)&&(8214===D||8224===D||8225===D||8240===D||8241===D||8251===D||8252===D||8258===D||8263===D||8264===D||8265===D||8273===D)||Or["Letterlike Symbols"](D)||Or["Number Forms"](D)||Or["Miscellaneous Technical"](D)&&(D>=8960&&D<=8967||D>=8972&&D<=8991||D>=8996&&D<=9e3||9003===D||D>=9085&&D<=9114||D>=9150&&D<=9165||9167===D||D>=9169&&D<=9179||D>=9186&&D<=9215)||Or["Control Pictures"](D)&&9251!==D||Or["Optical Character Recognition"](D)||Or["Enclosed Alphanumerics"](D)||Or["Geometric Shapes"](D)||Or["Miscellaneous Symbols"](D)&&!(D>=9754&&D<=9759)||Or["Miscellaneous Symbols and Arrows"](D)&&(D>=11026&&D<=11055||D>=11088&&D<=11097||D>=11192&&D<=11243)||Or["CJK Symbols and Punctuation"](D)||Or.Katakana(D)||Or["Private Use Area"](D)||Or["CJK Compatibility Forms"](D)||Or["Small Form Variants"](D)||Or["Halfwidth and Fullwidth Forms"](D)||8734===D||8756===D||8757===D||D>=9984&&D<=10087||D>=10102&&D<=10131||65532===D||65533===D));var D}function Ys(A){return Or.Arabic(A)||Or["Arabic Supplement"](A)||Or["Arabic Extended-A"](A)||Or["Arabic Presentation Forms-A"](A)||Or["Arabic Presentation Forms-B"](A)}function wo(A){return A>=1424&&A<=2303||Or["Arabic Presentation Forms-A"](A)||Or["Arabic Presentation Forms-B"](A)}function Jo(A,D){return!(!D&&wo(A)||A>=2304&&A<=3583||A>=3840&&A<=4255||Or.Khmer(A))}function Ya(A){for(var D=0,K=A;D<K.length;D+=1)if(wo(K[D].charCodeAt(0)))return!0;return!1}var $o="deferred",Qo="loading",As="loaded",Ms=null,Mi="unavailable",Aa=null,ho=function(A){A&&"string"==typeof A&&A.indexOf("NetworkError")>-1&&(Mi="error"),Ms&&Ms(A)};function Ss(){Ma.fire(new Ve("pluginStateChange",{pluginStatus:Mi,pluginURL:Aa}))}var Ma=new ut,Sl=function(){return Mi},Rl=function(){if(Mi!==$o||!Aa)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Mi=Qo,Ss(),Aa&&Ut({url:Aa},function(A){A?ho(A):(Mi=As,Ss())})},to={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Mi===As||null!=to.applyArabicShaping},isLoading:function(){return Mi===Qo},setState:function(A){Mi=A.pluginStatus,Aa=A.pluginURL},isParsed:function(){return null!=to.applyArabicShaping&&null!=to.processBidirectionalText&&null!=to.processStyledBidirectionalText},getPluginURL:function(){return Aa}},bi=function(A,D){this.zoom=A,D?(this.now=D.now,this.fadeDuration=D.fadeDuration,this.zoomHistory=D.zoomHistory,this.transition=D.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new zo,this.transition={})};bi.prototype.isSupportedScript=function(A){return function(D,K){for(var he=0,Ee=D;he<Ee.length;he+=1)if(!Jo(Ee[he].charCodeAt(0),K))return!1;return!0}(A,to.isLoaded())},bi.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},bi.prototype.getCrossfadeParameters=function(){var A=this.zoom,D=A-Math.floor(A),K=this.crossFadingFactor();return A>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:D+(1-D)*K}:{fromScale:.5,toScale:1,t:1-(1-K)*D}};var ps=function(A,D){this.property=A,this.value=D,this.expression=function(K,he){if(Zo(K))return new $l(K,he);if(_l(K)){var Ee=tc(K,he);if("error"===Ee.result)throw new Error(Ee.value.map(function(We){return We.key+": "+We.message}).join(", "));return Ee.value}var ze=K;return"string"==typeof K&&"color"===he.type&&(ze=jn.parse(K)),{kind:"constant",evaluate:function(){return ze}}}(void 0===D?A.specification.default:D,A.specification)};ps.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},ps.prototype.possiblyEvaluate=function(A,D,K){return this.property.possiblyEvaluate(this,A,D,K)};var Es=function(A){this.property=A,this.value=new ps(A,void 0)};Es.prototype.transitioned=function(A,D){return new Cs(this.property,this.value,D,c({},A.transition,this.transition),A.now)},Es.prototype.untransitioned=function(){return new Cs(this.property,this.value,null,{},0)};var es=function(A){this._properties=A,this._values=Object.create(A.defaultTransitionablePropertyValues)};es.prototype.getValue=function(A){return S(this._values[A].value.value)},es.prototype.setValue=function(A,D){this._values.hasOwnProperty(A)||(this._values[A]=new Es(this._values[A].property)),this._values[A].value=new ps(this._values[A].property,null===D?void 0:S(D))},es.prototype.getTransition=function(A){return S(this._values[A].transition)},es.prototype.setTransition=function(A,D){this._values.hasOwnProperty(A)||(this._values[A]=new Es(this._values[A].property)),this._values[A].transition=S(D)||void 0},es.prototype.serialize=function(){for(var A={},D=0,K=Object.keys(this._values);D<K.length;D+=1){var he=K[D],Ee=this.getValue(he);void 0!==Ee&&(A[he]=Ee);var ze=this.getTransition(he);void 0!==ze&&(A[he+"-transition"]=ze)}return A},es.prototype.transitioned=function(A,D){for(var K=new El(this._properties),he=0,Ee=Object.keys(this._values);he<Ee.length;he+=1){var ze=Ee[he];K._values[ze]=this._values[ze].transitioned(A,D._values[ze])}return K},es.prototype.untransitioned=function(){for(var A=new El(this._properties),D=0,K=Object.keys(this._values);D<K.length;D+=1){var he=K[D];A._values[he]=this._values[he].untransitioned()}return A};var Cs=function(A,D,K,he,Ee){this.property=A,this.value=D,this.begin=Ee+he.delay||0,this.end=this.begin+he.duration||0,A.specification.transition&&(he.delay||he.duration)&&(this.prior=K)};Cs.prototype.possiblyEvaluate=function(A,D,K){var he=A.now||0,Ee=this.value.possiblyEvaluate(A,D,K),ze=this.prior;if(ze){if(he>this.end)return this.prior=null,Ee;if(this.value.isDataDriven())return this.prior=null,Ee;if(he<this.begin)return ze.possiblyEvaluate(A,D,K);var We=(he-this.begin)/(this.end-this.begin);return this.property.interpolate(ze.possiblyEvaluate(A,D,K),Ee,function(rt){if(rt<=0)return 0;if(rt>=1)return 1;var gt=rt*rt,Mt=gt*rt;return 4*(rt<.5?Mt:3*(rt-gt)+Mt-.75)}(We))}return Ee};var El=function(A){this._properties=A,this._values=Object.create(A.defaultTransitioningPropertyValues)};El.prototype.possiblyEvaluate=function(A,D,K){for(var he=new pl(this._properties),Ee=0,ze=Object.keys(this._values);Ee<ze.length;Ee+=1){var We=ze[Ee];he._values[We]=this._values[We].possiblyEvaluate(A,D,K)}return he},El.prototype.hasTransition=function(){for(var A=0,D=Object.keys(this._values);A<D.length;A+=1)if(this._values[D[A]].prior)return!0;return!1};var ts=function(A){this._properties=A,this._values=Object.create(A.defaultPropertyValues)};ts.prototype.getValue=function(A){return S(this._values[A].value)},ts.prototype.setValue=function(A,D){this._values[A]=new ps(this._values[A].property,null===D?void 0:S(D))},ts.prototype.serialize=function(){for(var A={},D=0,K=Object.keys(this._values);D<K.length;D+=1){var he=K[D],Ee=this.getValue(he);void 0!==Ee&&(A[he]=Ee)}return A},ts.prototype.possiblyEvaluate=function(A,D,K){for(var he=new pl(this._properties),Ee=0,ze=Object.keys(this._values);Ee<ze.length;Ee+=1){var We=ze[Ee];he._values[We]=this._values[We].possiblyEvaluate(A,D,K)}return he};var Ji=function(A,D,K){this.property=A,this.value=D,this.parameters=K};Ji.prototype.isConstant=function(){return"constant"===this.value.kind},Ji.prototype.constantOr=function(A){return"constant"===this.value.kind?this.value.value:A},Ji.prototype.evaluate=function(A,D,K,he){return this.property.evaluate(this.value,this.parameters,A,D,K,he)};var pl=function(A){this._properties=A,this._values=Object.create(A.defaultPossiblyEvaluatedValues)};pl.prototype.get=function(A){return this._values[A]};var Vr=function(A){this.specification=A};Vr.prototype.possiblyEvaluate=function(A,D){return A.expression.evaluate(D)},Vr.prototype.interpolate=function(A,D,K){var he=Fi[this.specification.type];return he?he(A,D,K):A};var Yr=function(A,D){this.specification=A,this.overrides=D};Yr.prototype.possiblyEvaluate=function(A,D,K,he){return new Ji(this,"constant"===A.expression.kind||"camera"===A.expression.kind?{kind:"constant",value:A.expression.evaluate(D,null,{},K,he)}:A.expression,D)},Yr.prototype.interpolate=function(A,D,K){if("constant"!==A.value.kind||"constant"!==D.value.kind)return A;if(void 0===A.value.value||void 0===D.value.value)return new Ji(this,{kind:"constant",value:void 0},A.parameters);var he=Fi[this.specification.type];return he?new Ji(this,{kind:"constant",value:he(A.value.value,D.value.value,K)},A.parameters):A},Yr.prototype.evaluate=function(A,D,K,he,Ee,ze){return"constant"===A.kind?A.value:A.evaluate(D,K,he,Ee,ze)};var To=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype.possiblyEvaluate=function(K,he,Ee,ze){if(void 0===K.value)return new Ji(this,{kind:"constant",value:void 0},he);if("constant"===K.expression.kind){var We=K.expression.evaluate(he,null,{},Ee,ze),rt="resolvedImage"===K.property.specification.type&&"string"!=typeof We?We.name:We,gt=this._calculate(rt,rt,rt,he);return new Ji(this,{kind:"constant",value:gt},he)}if("camera"===K.expression.kind){var Mt=this._calculate(K.expression.evaluate({zoom:he.zoom-1}),K.expression.evaluate({zoom:he.zoom}),K.expression.evaluate({zoom:he.zoom+1}),he);return new Ji(this,{kind:"constant",value:Mt},he)}return new Ji(this,K.expression,he)},D.prototype.evaluate=function(K,he,Ee,ze,We,rt){if("source"===K.kind){var gt=K.evaluate(he,Ee,ze,We,rt);return this._calculate(gt,gt,gt,he)}return"composite"===K.kind?this._calculate(K.evaluate({zoom:Math.floor(he.zoom)-1},Ee,ze),K.evaluate({zoom:Math.floor(he.zoom)},Ee,ze),K.evaluate({zoom:Math.floor(he.zoom)+1},Ee,ze),he):K.value},D.prototype._calculate=function(K,he,Ee,ze){return ze.zoom>ze.zoomHistory.lastIntegerZoom?{from:K,to:he}:{from:Ee,to:he}},D.prototype.interpolate=function(K){return K},D}(Yr),Fo=function(A){this.specification=A};Fo.prototype.possiblyEvaluate=function(A,D,K,he){if(void 0!==A.value){if("constant"===A.expression.kind){var Ee=A.expression.evaluate(D,null,{},K,he);return this._calculate(Ee,Ee,Ee,D)}return this._calculate(A.expression.evaluate(new bi(Math.floor(D.zoom-1),D)),A.expression.evaluate(new bi(Math.floor(D.zoom),D)),A.expression.evaluate(new bi(Math.floor(D.zoom+1),D)),D)}},Fo.prototype._calculate=function(A,D,K,he){return he.zoom>he.zoomHistory.lastIntegerZoom?{from:A,to:D}:{from:K,to:D}},Fo.prototype.interpolate=function(A){return A};var Bo=function(A){this.specification=A};Bo.prototype.possiblyEvaluate=function(A,D,K,he){return!!A.expression.evaluate(D,null,{},K,he)},Bo.prototype.interpolate=function(){return!1};var ya=function(A){for(var D in this.properties=A,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],A){var K=A[D];K.specification.overridable&&this.overridableProperties.push(D);var he=this.defaultPropertyValues[D]=new ps(K,void 0),Ee=this.defaultTransitionablePropertyValues[D]=new Es(K);this.defaultTransitioningPropertyValues[D]=Ee.untransitioned(),this.defaultPossiblyEvaluatedValues[D]=he.possiblyEvaluate({})}};Hr("DataDrivenProperty",Yr),Hr("DataConstantProperty",Vr),Hr("CrossFadedDataDrivenProperty",To),Hr("CrossFadedProperty",Fo),Hr("ColorRampProperty",Bo);var fi="-transition",Hi=function(A){function D(K,he){if(A.call(this),this.id=K.id,this.type=K.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==K.type&&(this.metadata=K.metadata,this.minzoom=K.minzoom,this.maxzoom=K.maxzoom,"background"!==K.type&&(this.source=K.source,this.sourceLayer=K["source-layer"],this.filter=K.filter),he.layout&&(this._unevaluatedLayout=new ts(he.layout)),he.paint)){for(var Ee in this._transitionablePaint=new es(he.paint),K.paint)this.setPaintProperty(Ee,K.paint[Ee],{validate:!1});for(var ze in K.layout)this.setLayoutProperty(ze,K.layout[ze],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new pl(he.paint)}}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},D.prototype.getLayoutProperty=function(K){return"visibility"===K?this.visibility:this._unevaluatedLayout.getValue(K)},D.prototype.setLayoutProperty=function(K,he,Ee){void 0===Ee&&(Ee={}),null!=he&&this._validate(Hs,"layers."+this.id+".layout."+K,K,he,Ee)||("visibility"!==K?this._unevaluatedLayout.setValue(K,he):this.visibility=he)},D.prototype.getPaintProperty=function(K){return v(K,fi)?this._transitionablePaint.getTransition(K.slice(0,-11)):this._transitionablePaint.getValue(K)},D.prototype.setPaintProperty=function(K,he,Ee){if(void 0===Ee&&(Ee={}),null!=he&&this._validate(Qa,"layers."+this.id+".paint."+K,K,he,Ee))return!1;if(v(K,fi))return this._transitionablePaint.setTransition(K.slice(0,-11),he||void 0),!1;var We=this._transitionablePaint._values[K],rt="cross-faded-data-driven"===We.property.specification["property-type"],gt=We.value.isDataDriven(),Mt=We.value;this._transitionablePaint.setValue(K,he),this._handleSpecialPaintPropertyUpdate(K);var Ct=this._transitionablePaint._values[K].value;return Ct.isDataDriven()||gt||rt||this._handleOverridablePaintPropertyUpdate(K,Mt,Ct)},D.prototype._handleSpecialPaintPropertyUpdate=function(K){},D.prototype._handleOverridablePaintPropertyUpdate=function(K,he,Ee){return!1},D.prototype.isHidden=function(K){return!!(this.minzoom&&K<this.minzoom)||!!(this.maxzoom&&K>=this.maxzoom)||"none"===this.visibility},D.prototype.updateTransitions=function(K){this._transitioningPaint=this._transitionablePaint.transitioned(K,this._transitioningPaint)},D.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},D.prototype.recalculate=function(K,he){K.getCrossfadeParameters&&(this._crossfadeParameters=K.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(K,void 0,he)),this.paint=this._transitioningPaint.possiblyEvaluate(K,void 0,he)},D.prototype.serialize=function(){var K={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(K.layout=K.layout||{},K.layout.visibility=this.visibility),h(K,function(he,Ee){return!(void 0===he||"layout"===Ee&&!Object.keys(he).length||"paint"===Ee&&!Object.keys(he).length)})},D.prototype._validate=function(K,he,Ee,ze,We){return void 0===We&&(We={}),(!We||!1!==We.validate)&&eo(this,K.call(ks,{key:he,layerType:this.type,objectKey:Ee,value:ze,styleSpec:Qe,style:{glyphs:!0,sprite:!0}}))},D.prototype.is3D=function(){return!1},D.prototype.isTileClipped=function(){return!1},D.prototype.hasOffscreenPass=function(){return!1},D.prototype.resize=function(){},D.prototype.isStateDependent=function(){for(var K in this.paint._values){var he=this.paint.get(K);if(he instanceof Ji&&us(he.property.specification)&&("source"===he.value.kind||"composite"===he.value.kind)&&he.value.isStateDependent)return!0}return!1},D}(ut),Su={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},ko=function(A,D){this._structArray=A,this._pos1=D*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},hi=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Wi(A,D){void 0===D&&(D=1);var K=0,he=0;return{members:A.map(function(Ee){var We=Su[Ee.type].BYTES_PER_ELEMENT,rt=K=so(K,Math.max(D,We)),gt=Ee.components||1;return he=Math.max(he,We),K+=We*gt,{name:Ee.name,type:Ee.type,components:gt,offset:rt}}),size:so(K,Math.max(he,D)),alignment:D}}function so(A,D){return Math.ceil(A/D)*D}hi.serialize=function(A,D){return A._trim(),D&&(A.isTransferred=!0,D.push(A.arrayBuffer)),{length:A.length,arrayBuffer:A.arrayBuffer}},hi.deserialize=function(A){var D=Object.create(this.prototype);return D.arrayBuffer=A.arrayBuffer,D.length=A.length,D.capacity=A.arrayBuffer.byteLength/D.bytesPerElement,D._refreshViews(),D},hi.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},hi.prototype.clear=function(){this.length=0},hi.prototype.resize=function(A){this.reserve(A),this.length=A},hi.prototype.reserve=function(A){if(A>this.capacity){this.capacity=Math.max(A,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var D=this.uint8;this._refreshViews(),D&&this.uint8.set(D)}},hi.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var No=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,he){var Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,K,he)},D.prototype.emplace=function(K,he,Ee){var ze=2*K;return this.int16[ze+0]=he,this.int16[ze+1]=Ee,K},D}(hi);No.prototype.bytesPerElement=4,Hr("StructArrayLayout2i4",No);var Ls=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,he,Ee,ze){var We=this.length;return this.resize(We+1),this.emplace(We,K,he,Ee,ze)},D.prototype.emplace=function(K,he,Ee,ze,We){var rt=4*K;return this.int16[rt+0]=he,this.int16[rt+1]=Ee,this.int16[rt+2]=ze,this.int16[rt+3]=We,K},D}(hi);Ls.prototype.bytesPerElement=8,Hr("StructArrayLayout4i8",Ls);var tt=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,he,Ee,ze,We,rt){var gt=this.length;return this.resize(gt+1),this.emplace(gt,K,he,Ee,ze,We,rt)},D.prototype.emplace=function(K,he,Ee,ze,We,rt,gt){var Mt=6*K;return this.int16[Mt+0]=he,this.int16[Mt+1]=Ee,this.int16[Mt+2]=ze,this.int16[Mt+3]=We,this.int16[Mt+4]=rt,this.int16[Mt+5]=gt,K},D}(hi);tt.prototype.bytesPerElement=12,Hr("StructArrayLayout2i4i12",tt);var at=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,he,Ee,ze,We,rt){var gt=this.length;return this.resize(gt+1),this.emplace(gt,K,he,Ee,ze,We,rt)},D.prototype.emplace=function(K,he,Ee,ze,We,rt,gt){var Mt=4*K,Ct=8*K;return this.int16[Mt+0]=he,this.int16[Mt+1]=Ee,this.uint8[Ct+4]=ze,this.uint8[Ct+5]=We,this.uint8[Ct+6]=rt,this.uint8[Ct+7]=gt,K},D}(hi);at.prototype.bytesPerElement=8,Hr("StructArrayLayout2i4ub8",at);var dt=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,he){var Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,K,he)},D.prototype.emplace=function(K,he,Ee){var ze=2*K;return this.float32[ze+0]=he,this.float32[ze+1]=Ee,K},D}(hi);dt.prototype.bytesPerElement=8,Hr("StructArrayLayout2f8",dt);var N=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,he,Ee,ze,We,rt,gt,Mt,Ct,Gt){var $t=this.length;return this.resize($t+1),this.emplace($t,K,he,Ee,ze,We,rt,gt,Mt,Ct,Gt)},D.prototype.emplace=function(K,he,Ee,ze,We,rt,gt,Mt,Ct,Gt,$t){var Zt=10*K;return this.uint16[Zt+0]=he,this.uint16[Zt+1]=Ee,this.uint16[Zt+2]=ze,this.uint16[Zt+3]=We,this.uint16[Zt+4]=rt,this.uint16[Zt+5]=gt,this.uint16[Zt+6]=Mt,this.uint16[Zt+7]=Ct,this.uint16[Zt+8]=Gt,this.uint16[Zt+9]=$t,K},D}(hi);N.prototype.bytesPerElement=20,Hr("StructArrayLayout10ui20",N);var W=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,he,Ee,ze,We,rt,gt,Mt,Ct,Gt,$t,Zt){var mn=this.length;return this.resize(mn+1),this.emplace(mn,K,he,Ee,ze,We,rt,gt,Mt,Ct,Gt,$t,Zt)},D.prototype.emplace=function(K,he,Ee,ze,We,rt,gt,Mt,Ct,Gt,$t,Zt,mn){var xn=12*K;return this.int16[xn+0]=he,this.int16[xn+1]=Ee,this.int16[xn+2]=ze,this.int16[xn+3]=We,this.uint16[xn+4]=rt,this.uint16[xn+5]=gt,this.uint16[xn+6]=Mt,this.uint16[xn+7]=Ct,this.int16[xn+8]=Gt,this.int16[xn+9]=$t,this.int16[xn+10]=Zt,this.int16[xn+11]=mn,K},D}(hi);W.prototype.bytesPerElement=24,Hr("StructArrayLayout4i4ui4i24",W);var H=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,he,Ee){var ze=this.length;return this.resize(ze+1),this.emplace(ze,K,he,Ee)},D.prototype.emplace=function(K,he,Ee,ze){var We=3*K;return this.float32[We+0]=he,this.float32[We+1]=Ee,this.float32[We+2]=ze,K},D}(hi);H.prototype.bytesPerElement=12,Hr("StructArrayLayout3f12",H);var C=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K){var he=this.length;return this.resize(he+1),this.emplace(he,K)},D.prototype.emplace=function(K,he){return this.uint32[1*K+0]=he,K},D}(hi);C.prototype.bytesPerElement=4,Hr("StructArrayLayout1ul4",C);var G=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,he,Ee,ze,We,rt,gt,Mt,Ct){var Gt=this.length;return this.resize(Gt+1),this.emplace(Gt,K,he,Ee,ze,We,rt,gt,Mt,Ct)},D.prototype.emplace=function(K,he,Ee,ze,We,rt,gt,Mt,Ct,Gt){var $t=10*K,Zt=5*K;return this.int16[$t+0]=he,this.int16[$t+1]=Ee,this.int16[$t+2]=ze,this.int16[$t+3]=We,this.int16[$t+4]=rt,this.int16[$t+5]=gt,this.uint32[Zt+3]=Mt,this.uint16[$t+8]=Ct,this.uint16[$t+9]=Gt,K},D}(hi);G.prototype.bytesPerElement=20,Hr("StructArrayLayout6i1ul2ui20",G);var Q=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,he,Ee,ze,We,rt){var gt=this.length;return this.resize(gt+1),this.emplace(gt,K,he,Ee,ze,We,rt)},D.prototype.emplace=function(K,he,Ee,ze,We,rt,gt){var Mt=6*K;return this.int16[Mt+0]=he,this.int16[Mt+1]=Ee,this.int16[Mt+2]=ze,this.int16[Mt+3]=We,this.int16[Mt+4]=rt,this.int16[Mt+5]=gt,K},D}(hi);Q.prototype.bytesPerElement=12,Hr("StructArrayLayout2i2i2i12",Q);var oe=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,he,Ee,ze,We){var rt=this.length;return this.resize(rt+1),this.emplace(rt,K,he,Ee,ze,We)},D.prototype.emplace=function(K,he,Ee,ze,We,rt){var gt=4*K,Mt=8*K;return this.float32[gt+0]=he,this.float32[gt+1]=Ee,this.float32[gt+2]=ze,this.int16[Mt+6]=We,this.int16[Mt+7]=rt,K},D}(hi);oe.prototype.bytesPerElement=16,Hr("StructArrayLayout2f1f2i16",oe);var de=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,he,Ee,ze){var We=this.length;return this.resize(We+1),this.emplace(We,K,he,Ee,ze)},D.prototype.emplace=function(K,he,Ee,ze,We){var rt=12*K,gt=3*K;return this.uint8[rt+0]=he,this.uint8[rt+1]=Ee,this.float32[gt+1]=ze,this.float32[gt+2]=We,K},D}(hi);de.prototype.bytesPerElement=12,Hr("StructArrayLayout2ub2f12",de);var Ae=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,he,Ee){var ze=this.length;return this.resize(ze+1),this.emplace(ze,K,he,Ee)},D.prototype.emplace=function(K,he,Ee,ze){var We=3*K;return this.uint16[We+0]=he,this.uint16[We+1]=Ee,this.uint16[We+2]=ze,K},D}(hi);Ae.prototype.bytesPerElement=6,Hr("StructArrayLayout3ui6",Ae);var De=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,he,Ee,ze,We,rt,gt,Mt,Ct,Gt,$t,Zt,mn,xn,Rn,In,Yn){var Kn=this.length;return this.resize(Kn+1),this.emplace(Kn,K,he,Ee,ze,We,rt,gt,Mt,Ct,Gt,$t,Zt,mn,xn,Rn,In,Yn)},D.prototype.emplace=function(K,he,Ee,ze,We,rt,gt,Mt,Ct,Gt,$t,Zt,mn,xn,Rn,In,Yn,Kn){var ir=24*K,ur=12*K,yr=48*K;return this.int16[ir+0]=he,this.int16[ir+1]=Ee,this.uint16[ir+2]=ze,this.uint16[ir+3]=We,this.uint32[ur+2]=rt,this.uint32[ur+3]=gt,this.uint32[ur+4]=Mt,this.uint16[ir+10]=Ct,this.uint16[ir+11]=Gt,this.uint16[ir+12]=$t,this.float32[ur+7]=Zt,this.float32[ur+8]=mn,this.uint8[yr+36]=xn,this.uint8[yr+37]=Rn,this.uint8[yr+38]=In,this.uint32[ur+10]=Yn,this.int16[ir+22]=Kn,K},D}(hi);De.prototype.bytesPerElement=48,Hr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",De);var je=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,he,Ee,ze,We,rt,gt,Mt,Ct,Gt,$t,Zt,mn,xn,Rn,In,Yn,Kn,ir,ur,yr,Rr,Er,Nr,Ur,ai,Kr,oi){var ei=this.length;return this.resize(ei+1),this.emplace(ei,K,he,Ee,ze,We,rt,gt,Mt,Ct,Gt,$t,Zt,mn,xn,Rn,In,Yn,Kn,ir,ur,yr,Rr,Er,Nr,Ur,ai,Kr,oi)},D.prototype.emplace=function(K,he,Ee,ze,We,rt,gt,Mt,Ct,Gt,$t,Zt,mn,xn,Rn,In,Yn,Kn,ir,ur,yr,Rr,Er,Nr,Ur,ai,Kr,oi,ei){var Zr=34*K,Ei=17*K;return this.int16[Zr+0]=he,this.int16[Zr+1]=Ee,this.int16[Zr+2]=ze,this.int16[Zr+3]=We,this.int16[Zr+4]=rt,this.int16[Zr+5]=gt,this.int16[Zr+6]=Mt,this.int16[Zr+7]=Ct,this.uint16[Zr+8]=Gt,this.uint16[Zr+9]=$t,this.uint16[Zr+10]=Zt,this.uint16[Zr+11]=mn,this.uint16[Zr+12]=xn,this.uint16[Zr+13]=Rn,this.uint16[Zr+14]=In,this.uint16[Zr+15]=Yn,this.uint16[Zr+16]=Kn,this.uint16[Zr+17]=ir,this.uint16[Zr+18]=ur,this.uint16[Zr+19]=yr,this.uint16[Zr+20]=Rr,this.uint16[Zr+21]=Er,this.uint16[Zr+22]=Nr,this.uint32[Ei+12]=Ur,this.float32[Ei+13]=ai,this.float32[Ei+14]=Kr,this.float32[Ei+15]=oi,this.float32[Ei+16]=ei,K},D}(hi);je.prototype.bytesPerElement=68,Hr("StructArrayLayout8i15ui1ul4f68",je);var Ye=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K){var he=this.length;return this.resize(he+1),this.emplace(he,K)},D.prototype.emplace=function(K,he){return this.float32[1*K+0]=he,K},D}(hi);Ye.prototype.bytesPerElement=4,Hr("StructArrayLayout1f4",Ye);var Ke=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,he,Ee){var ze=this.length;return this.resize(ze+1),this.emplace(ze,K,he,Ee)},D.prototype.emplace=function(K,he,Ee,ze){var We=3*K;return this.int16[We+0]=he,this.int16[We+1]=Ee,this.int16[We+2]=ze,K},D}(hi);Ke.prototype.bytesPerElement=6,Hr("StructArrayLayout3i6",Ke);var st=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,he,Ee){var ze=this.length;return this.resize(ze+1),this.emplace(ze,K,he,Ee)},D.prototype.emplace=function(K,he,Ee,ze){var rt=4*K;return this.uint32[2*K+0]=he,this.uint16[rt+2]=Ee,this.uint16[rt+3]=ze,K},D}(hi);st.prototype.bytesPerElement=8,Hr("StructArrayLayout1ul2ui8",st);var mt=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,he){var Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,K,he)},D.prototype.emplace=function(K,he,Ee){var ze=2*K;return this.uint16[ze+0]=he,this.uint16[ze+1]=Ee,K},D}(hi);mt.prototype.bytesPerElement=4,Hr("StructArrayLayout2ui4",mt);var xt=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K){var he=this.length;return this.resize(he+1),this.emplace(he,K)},D.prototype.emplace=function(K,he){return this.uint16[1*K+0]=he,K},D}(hi);xt.prototype.bytesPerElement=2,Hr("StructArrayLayout1ui2",xt);var Et=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,he,Ee,ze){var We=this.length;return this.resize(We+1),this.emplace(We,K,he,Ee,ze)},D.prototype.emplace=function(K,he,Ee,ze,We){var rt=4*K;return this.float32[rt+0]=he,this.float32[rt+1]=Ee,this.float32[rt+2]=ze,this.float32[rt+3]=We,K},D}(hi);Et.prototype.bytesPerElement=16,Hr("StructArrayLayout4f16",Et);var Dt=function(A){function D(){A.apply(this,arguments)}A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D;var K={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return K.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},K.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},K.x1.get=function(){return this._structArray.int16[this._pos2+2]},K.y1.get=function(){return this._structArray.int16[this._pos2+3]},K.x2.get=function(){return this._structArray.int16[this._pos2+4]},K.y2.get=function(){return this._structArray.int16[this._pos2+5]},K.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},K.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},K.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},K.anchorPoint.get=function(){return new t(this.anchorPointX,this.anchorPointY)},Object.defineProperties(D.prototype,K),D}(ko);Dt.prototype.size=20;var It=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype.get=function(K){return new Dt(this,K)},D}(G);Hr("CollisionBoxArray",It);var qt=function(A){function D(){A.apply(this,arguments)}A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D;var K={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return K.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},K.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},K.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},K.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},K.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},K.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},K.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},K.segment.get=function(){return this._structArray.uint16[this._pos2+10]},K.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},K.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},K.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},K.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},K.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},K.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},K.placedOrientation.set=function(he){this._structArray.uint8[this._pos1+37]=he},K.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},K.hidden.set=function(he){this._structArray.uint8[this._pos1+38]=he},K.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},K.crossTileID.set=function(he){this._structArray.uint32[this._pos4+10]=he},K.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(D.prototype,K),D}(ko);qt.prototype.size=48;var Ft=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype.get=function(K){return new qt(this,K)},D}(De);Hr("PlacedSymbolArray",Ft);var on=function(A){function D(){A.apply(this,arguments)}A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D;var K={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return K.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},K.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},K.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},K.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},K.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},K.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},K.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},K.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},K.key.get=function(){return this._structArray.uint16[this._pos2+8]},K.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},K.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},K.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},K.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},K.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},K.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},K.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},K.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},K.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},K.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},K.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},K.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},K.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},K.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},K.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},K.crossTileID.set=function(he){this._structArray.uint32[this._pos4+12]=he},K.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},K.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},K.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},K.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(D.prototype,K),D}(ko);on.prototype.size=68;var Qt=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype.get=function(K){return new on(this,K)},D}(je);Hr("SymbolInstanceArray",Qt);var Kt=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype.getoffsetX=function(K){return this.float32[1*K+0]},D}(Ye);Hr("GlyphOffsetArray",Kt);var kn=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype.getx=function(K){return this.int16[3*K+0]},D.prototype.gety=function(K){return this.int16[3*K+1]},D.prototype.gettileUnitDistanceFromAnchor=function(K){return this.int16[3*K+2]},D}(Ke);Hr("SymbolLineVertexArray",kn);var En=function(A){function D(){A.apply(this,arguments)}A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D;var K={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return K.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},K.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},K.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(D.prototype,K),D}(ko);En.prototype.size=8;var Bn=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype.get=function(K){return new En(this,K)},D}(st);Hr("FeatureIndexArray",Bn);var qn=Wi([{name:"a_pos",components:2,type:"Int16"}],4).members,er=function(A){void 0===A&&(A=[]),this.segments=A};function gr(A,D){return 256*(A=u(Math.floor(A),0,255))+u(Math.floor(D),0,255)}er.prototype.prepareSegment=function(A,D,K,he){var Ee=this.segments[this.segments.length-1];return A>er.MAX_VERTEX_ARRAY_LENGTH&&E("Max vertices per segment is "+er.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+A),(!Ee||Ee.vertexLength+A>er.MAX_VERTEX_ARRAY_LENGTH||Ee.sortKey!==he)&&(Ee={vertexOffset:D.length,primitiveOffset:K.length,vertexLength:0,primitiveLength:0},void 0!==he&&(Ee.sortKey=he),this.segments.push(Ee)),Ee},er.prototype.get=function(){return this.segments},er.prototype.destroy=function(){for(var A=0,D=this.segments;A<D.length;A+=1){var K=D[A];for(var he in K.vaos)K.vaos[he].destroy()}},er.simpleSegment=function(A,D,K,he){return new er([{vertexOffset:A,primitiveOffset:D,vertexLength:K,primitiveLength:he,vaos:{},sortKey:0}])},er.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Hr("SegmentVector",er);var wr=Wi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),sr=T(function(A){A.exports=function(D,K){var he,Ee,ze,We,rt,gt,Mt,Ct;for(Ee=D.length-(he=3&D.length),ze=K,rt=3432918353,gt=461845907,Ct=0;Ct<Ee;)Mt=255&D.charCodeAt(Ct)|(255&D.charCodeAt(++Ct))<<8|(255&D.charCodeAt(++Ct))<<16|(255&D.charCodeAt(++Ct))<<24,++Ct,ze=27492+(65535&(We=5*(65535&(ze=(ze^=Mt=(65535&(Mt=(Mt=(65535&Mt)*rt+(((Mt>>>16)*rt&65535)<<16)&4294967295)<<15|Mt>>>17))*gt+(((Mt>>>16)*gt&65535)<<16)&4294967295)<<13|ze>>>19))+((5*(ze>>>16)&65535)<<16)&4294967295))+((58964+(We>>>16)&65535)<<16);switch(Mt=0,he){case 3:Mt^=(255&D.charCodeAt(Ct+2))<<16;case 2:Mt^=(255&D.charCodeAt(Ct+1))<<8;case 1:ze^=Mt=(65535&(Mt=(Mt=(65535&(Mt^=255&D.charCodeAt(Ct)))*rt+(((Mt>>>16)*rt&65535)<<16)&4294967295)<<15|Mt>>>17))*gt+(((Mt>>>16)*gt&65535)<<16)&4294967295}return ze^=D.length,ze=2246822507*(65535&(ze^=ze>>>16))+((2246822507*(ze>>>16)&65535)<<16)&4294967295,ze=3266489909*(65535&(ze^=ze>>>13))+((3266489909*(ze>>>16)&65535)<<16)&4294967295,(ze^=ze>>>16)>>>0}}),_r=T(function(A){A.exports=function(D,K){for(var he,Ee=D.length,ze=K^Ee,We=0;Ee>=4;)he=1540483477*(65535&(he=255&D.charCodeAt(We)|(255&D.charCodeAt(++We))<<8|(255&D.charCodeAt(++We))<<16|(255&D.charCodeAt(++We))<<24))+((1540483477*(he>>>16)&65535)<<16),ze=1540483477*(65535&ze)+((1540483477*(ze>>>16)&65535)<<16)^(he=1540483477*(65535&(he^=he>>>24))+((1540483477*(he>>>16)&65535)<<16)),Ee-=4,++We;switch(Ee){case 3:ze^=(255&D.charCodeAt(We+2))<<16;case 2:ze^=(255&D.charCodeAt(We+1))<<8;case 1:ze=1540483477*(65535&(ze^=255&D.charCodeAt(We)))+((1540483477*(ze>>>16)&65535)<<16)}return ze=1540483477*(65535&(ze^=ze>>>13))+((1540483477*(ze>>>16)&65535)<<16),(ze^=ze>>>15)>>>0}}),Dr=sr,mr=_r;Dr.murmur3=sr,Dr.murmur2=mr;var br=function(){this.ids=[],this.positions=[],this.indexed=!1};br.prototype.add=function(A,D,K,he){this.ids.push(Mr(A)),this.positions.push(D,K,he)},br.prototype.getPositions=function(A){for(var D=Mr(A),K=0,he=this.ids.length-1;K<he;){var Ee=K+he>>1;this.ids[Ee]>=D?he=Ee:K=Ee+1}for(var ze=[];this.ids[K]===D;)ze.push({index:this.positions[3*K],start:this.positions[3*K+1],end:this.positions[3*K+2]}),K++;return ze},br.serialize=function(A,D){var K=new Float64Array(A.ids),he=new Uint32Array(A.positions);return Gr(K,he,0,K.length-1),D&&D.push(K.buffer,he.buffer),{ids:K,positions:he}},br.deserialize=function(A){var D=new br;return D.ids=A.ids,D.positions=A.positions,D.indexed=!0,D};var jr=Math.pow(2,53)-1;function Mr(A){var D=+A;return!isNaN(D)&&D<=jr?D:Dr(String(A))}function Gr(A,D,K,he){for(;K<he;){for(var Ee=A[K+he>>1],ze=K-1,We=he+1;;){do{ze++}while(A[ze]<Ee);do{We--}while(A[We]>Ee);if(ze>=We)break;$r(A,ze,We),$r(D,3*ze,3*We),$r(D,3*ze+1,3*We+1),$r(D,3*ze+2,3*We+2)}We-K<he-We?(Gr(A,D,K,We),K=We+1):(Gr(A,D,We+1,he),he=We)}}function $r(A,D,K){var he=A[D];A[D]=A[K],A[K]=he}Hr("FeaturePositionMap",br);var si=function(A,D){this.gl=A.gl,this.location=D},li=function(A){function D(K,he){A.call(this,K,he),this.current=0}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype.set=function(K){this.current!==K&&(this.current=K,this.gl.uniform1i(this.location,K))},D}(si),pi=function(A){function D(K,he){A.call(this,K,he),this.current=0}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype.set=function(K){this.current!==K&&(this.current=K,this.gl.uniform1f(this.location,K))},D}(si),_i=function(A){function D(K,he){A.call(this,K,he),this.current=[0,0]}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype.set=function(K){K[0]===this.current[0]&&K[1]===this.current[1]||(this.current=K,this.gl.uniform2f(this.location,K[0],K[1]))},D}(si),na=function(A){function D(K,he){A.call(this,K,he),this.current=[0,0,0]}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype.set=function(K){K[0]===this.current[0]&&K[1]===this.current[1]&&K[2]===this.current[2]||(this.current=K,this.gl.uniform3f(this.location,K[0],K[1],K[2]))},D}(si),ga=function(A){function D(K,he){A.call(this,K,he),this.current=[0,0,0,0]}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype.set=function(K){K[0]===this.current[0]&&K[1]===this.current[1]&&K[2]===this.current[2]&&K[3]===this.current[3]||(this.current=K,this.gl.uniform4f(this.location,K[0],K[1],K[2],K[3]))},D}(si),Ua=function(A){function D(K,he){A.call(this,K,he),this.current=jn.transparent}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype.set=function(K){K.r===this.current.r&&K.g===this.current.g&&K.b===this.current.b&&K.a===this.current.a||(this.current=K,this.gl.uniform4f(this.location,K.r,K.g,K.b,K.a))},D}(si),Fa=new Float32Array(16),aa=function(A){function D(K,he){A.call(this,K,he),this.current=Fa}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype.set=function(K){if(K[12]!==this.current[12]||K[0]!==this.current[0])return this.current=K,void this.gl.uniformMatrix4fv(this.location,!1,K);for(var he=1;he<16;he++)if(K[he]!==this.current[he]){this.current=K,this.gl.uniformMatrix4fv(this.location,!1,K);break}},D}(si);function Ni(A){return[gr(255*A.r,255*A.g),gr(255*A.b,255*A.a)]}var wi=function(A,D,K){this.value=A,this.uniformNames=D.map(function(he){return"u_"+he}),this.type=K};wi.prototype.setUniform=function(A,D,K){A.set(K.constantOr(this.value))},wi.prototype.getBinding=function(A,D,K){return"color"===this.type?new Ua(A,D):new pi(A,D)};var ra=function(A,D){this.uniformNames=D.map(function(K){return"u_"+K}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};ra.prototype.setConstantPatternPositions=function(A,D){this.pixelRatioFrom=D.pixelRatio,this.pixelRatioTo=A.pixelRatio,this.patternFrom=D.tlbr,this.patternTo=A.tlbr},ra.prototype.setUniform=function(A,D,K,he){var Ee="u_pattern_to"===he?this.patternTo:"u_pattern_from"===he?this.patternFrom:"u_pixel_ratio_to"===he?this.pixelRatioTo:"u_pixel_ratio_from"===he?this.pixelRatioFrom:null;Ee&&A.set(Ee)},ra.prototype.getBinding=function(A,D,K){return"u_pattern"===K.substr(0,9)?new ga(A,D):new pi(A,D)};var Yi=function(A,D,K,he){this.expression=A,this.type=K,this.maxValue=0,this.paintVertexAttributes=D.map(function(Ee){return{name:"a_"+Ee,type:"Float32",components:"color"===K?2:1,offset:0}}),this.paintVertexArray=new he};Yi.prototype.populatePaintArray=function(A,D,K,he,Ee){var ze=this.paintVertexArray.length,We=this.expression.evaluate(new bi(0),D,{},he,[],Ee);this.paintVertexArray.resize(A),this._setPaintValue(ze,A,We)},Yi.prototype.updatePaintArray=function(A,D,K,he){var Ee=this.expression.evaluate({zoom:0},K,he);this._setPaintValue(A,D,Ee)},Yi.prototype._setPaintValue=function(A,D,K){if("color"===this.type)for(var he=Ni(K),Ee=A;Ee<D;Ee++)this.paintVertexArray.emplace(Ee,he[0],he[1]);else{for(var ze=A;ze<D;ze++)this.paintVertexArray.emplace(ze,K);this.maxValue=Math.max(this.maxValue,Math.abs(K))}},Yi.prototype.upload=function(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Yi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Si=function(A,D,K,he,Ee,ze){this.expression=A,this.uniformNames=D.map(function(We){return"u_"+We+"_t"}),this.type=K,this.useIntegerZoom=he,this.zoom=Ee,this.maxValue=0,this.paintVertexAttributes=D.map(function(We){return{name:"a_"+We,type:"Float32",components:"color"===K?4:2,offset:0}}),this.paintVertexArray=new ze};Si.prototype.populatePaintArray=function(A,D,K,he,Ee){var ze=this.expression.evaluate(new bi(this.zoom),D,{},he,[],Ee),We=this.expression.evaluate(new bi(this.zoom+1),D,{},he,[],Ee),rt=this.paintVertexArray.length;this.paintVertexArray.resize(A),this._setPaintValue(rt,A,ze,We)},Si.prototype.updatePaintArray=function(A,D,K,he){var Ee=this.expression.evaluate({zoom:this.zoom},K,he),ze=this.expression.evaluate({zoom:this.zoom+1},K,he);this._setPaintValue(A,D,Ee,ze)},Si.prototype._setPaintValue=function(A,D,K,he){if("color"===this.type)for(var Ee=Ni(K),ze=Ni(he),We=A;We<D;We++)this.paintVertexArray.emplace(We,Ee[0],Ee[1],ze[0],ze[1]);else{for(var rt=A;rt<D;rt++)this.paintVertexArray.emplace(rt,K,he);this.maxValue=Math.max(this.maxValue,Math.abs(K),Math.abs(he))}},Si.prototype.upload=function(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Si.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Si.prototype.setUniform=function(A,D){var K=this.useIntegerZoom?Math.floor(D.zoom):D.zoom,he=u(this.expression.interpolationFactor(K,this.zoom,this.zoom+1),0,1);A.set(he)},Si.prototype.getBinding=function(A,D,K){return new pi(A,D)};var ua=function(A,D,K,he,Ee,ze){this.expression=A,this.type=D,this.useIntegerZoom=K,this.zoom=he,this.layerId=ze,this.zoomInPaintVertexArray=new Ee,this.zoomOutPaintVertexArray=new Ee};ua.prototype.populatePaintArray=function(A,D,K){var he=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(A),this.zoomOutPaintVertexArray.resize(A),this._setPaintValues(he,A,D.patterns&&D.patterns[this.layerId],K)},ua.prototype.updatePaintArray=function(A,D,K,he,Ee){this._setPaintValues(A,D,K.patterns&&K.patterns[this.layerId],Ee)},ua.prototype._setPaintValues=function(A,D,K,he){if(he&&K){var rt=he[K.min],gt=he[K.mid],Mt=he[K.max];if(rt&&gt&&Mt)for(var Ct=A;Ct<D;Ct++)this.zoomInPaintVertexArray.emplace(Ct,gt.tl[0],gt.tl[1],gt.br[0],gt.br[1],rt.tl[0],rt.tl[1],rt.br[0],rt.br[1],gt.pixelRatio,rt.pixelRatio),this.zoomOutPaintVertexArray.emplace(Ct,gt.tl[0],gt.tl[1],gt.br[0],gt.br[1],Mt.tl[0],Mt.tl[1],Mt.br[0],Mt.br[1],gt.pixelRatio,Mt.pixelRatio)}},ua.prototype.upload=function(A){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=A.createVertexBuffer(this.zoomInPaintVertexArray,wr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=A.createVertexBuffer(this.zoomOutPaintVertexArray,wr.members,this.expression.isStateDependent))},ua.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var ia=function(A,D,K){this.binders={},this._buffers=[];var he=[];for(var Ee in A.paint._values)if(K(Ee)){var ze=A.paint.get(Ee);if(ze instanceof Ji&&us(ze.property.specification)){var We=Is(Ee,A.type),rt=ze.value,gt=ze.property.specification.type,Mt=ze.property.useIntegerZoom,Ct=ze.property.specification["property-type"],Gt="cross-faded"===Ct||"cross-faded-data-driven"===Ct;if("constant"===rt.kind)this.binders[Ee]=Gt?new ra(rt.value,We):new wi(rt.value,We,gt),he.push("/u_"+Ee);else if("source"===rt.kind||Gt){var $t=Dl(Ee,gt,"source");this.binders[Ee]=Gt?new ua(rt,gt,Mt,D,$t,A.id):new Yi(rt,We,gt,$t),he.push("/a_"+Ee)}else{var Zt=Dl(Ee,gt,"composite");this.binders[Ee]=new Si(rt,We,gt,Mt,D,Zt),he.push("/z_"+Ee)}}}this.cacheKey=he.sort().join("")};ia.prototype.getMaxValue=function(A){var D=this.binders[A];return D instanceof Yi||D instanceof Si?D.maxValue:0},ia.prototype.populatePaintArrays=function(A,D,K,he,Ee){for(var ze in this.binders){var We=this.binders[ze];(We instanceof Yi||We instanceof Si||We instanceof ua)&&We.populatePaintArray(A,D,K,he,Ee)}},ia.prototype.setConstantPatternPositions=function(A,D){for(var K in this.binders){var he=this.binders[K];he instanceof ra&&he.setConstantPatternPositions(A,D)}},ia.prototype.updatePaintArrays=function(A,D,K,he,Ee){var ze=!1;for(var We in A)for(var rt=0,gt=D.getPositions(We);rt<gt.length;rt+=1){var Mt=gt[rt],Ct=K.feature(Mt.index);for(var Gt in this.binders){var $t=this.binders[Gt];if(($t instanceof Yi||$t instanceof Si||$t instanceof ua)&&!0===$t.expression.isStateDependent){var Zt=he.paint.get(Gt);$t.expression=Zt.value,$t.updatePaintArray(Mt.start,Mt.end,Ct,A[We],Ee),ze=!0}}}return ze},ia.prototype.defines=function(){var A=[];for(var D in this.binders){var K=this.binders[D];(K instanceof wi||K instanceof ra)&&A.push.apply(A,K.uniformNames.map(function(he){return"#define HAS_UNIFORM_"+he}))}return A},ia.prototype.getBinderAttributes=function(){var A=[];for(var D in this.binders){var K=this.binders[D];if(K instanceof Yi||K instanceof Si)for(var he=0;he<K.paintVertexAttributes.length;he++)A.push(K.paintVertexAttributes[he].name);else if(K instanceof ua)for(var Ee=0;Ee<wr.members.length;Ee++)A.push(wr.members[Ee].name)}return A},ia.prototype.getBinderUniforms=function(){var A=[];for(var D in this.binders){var K=this.binders[D];if(K instanceof wi||K instanceof ra||K instanceof Si)for(var he=0,Ee=K.uniformNames;he<Ee.length;he+=1)A.push(Ee[he])}return A},ia.prototype.getPaintVertexBuffers=function(){return this._buffers},ia.prototype.getUniforms=function(A,D){var K=[];for(var he in this.binders){var Ee=this.binders[he];if(Ee instanceof wi||Ee instanceof ra||Ee instanceof Si)for(var ze=0,We=Ee.uniformNames;ze<We.length;ze+=1){var rt=We[ze];if(D[rt]){var gt=Ee.getBinding(A,D[rt],rt);K.push({name:rt,property:he,binding:gt})}}}return K},ia.prototype.setUniforms=function(A,D,K,he){for(var Ee=0,ze=D;Ee<ze.length;Ee+=1){var We=ze[Ee],rt=We.name,gt=We.property;this.binders[gt].setUniform(We.binding,he,K.get(gt),rt)}},ia.prototype.updatePaintBuffers=function(A){for(var D in this._buffers=[],this.binders){var K=this.binders[D];if(A&&K instanceof ua){var he=2===A.fromScale?K.zoomInPaintVertexBuffer:K.zoomOutPaintVertexBuffer;he&&this._buffers.push(he)}else(K instanceof Yi||K instanceof Si)&&K.paintVertexBuffer&&this._buffers.push(K.paintVertexBuffer)}},ia.prototype.upload=function(A){for(var D in this.binders){var K=this.binders[D];(K instanceof Yi||K instanceof Si||K instanceof ua)&&K.upload(A)}this.updatePaintBuffers()},ia.prototype.destroy=function(){for(var A in this.binders){var D=this.binders[A];(D instanceof Yi||D instanceof Si||D instanceof ua)&&D.destroy()}};var Ca=function(A,D,K){void 0===K&&(K=function(){return!0}),this.programConfigurations={};for(var he=0,Ee=A;he<Ee.length;he+=1){var ze=Ee[he];this.programConfigurations[ze.id]=new ia(ze,D,K)}this.needsUpload=!1,this._featureMap=new br,this._bufferOffset=0};function Is(A,D){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[A]||[A.replace(D+"-","").replace(/-/g,"_")]}function Dl(A,D,K){var Ee={"line-pattern":{source:N,composite:N},"fill-pattern":{source:N,composite:N},"fill-extrusion-pattern":{source:N,composite:N}}[A];return Ee&&Ee[K]||{color:{source:dt,composite:Et},number:{source:Ye,composite:dt}}[D][K]}Ca.prototype.populatePaintArrays=function(A,D,K,he,Ee,ze){for(var We in this.programConfigurations)this.programConfigurations[We].populatePaintArrays(A,D,he,Ee,ze);void 0!==D.id&&this._featureMap.add(D.id,K,this._bufferOffset,A),this._bufferOffset=A,this.needsUpload=!0},Ca.prototype.updatePaintArrays=function(A,D,K,he){for(var Ee=0,ze=K;Ee<ze.length;Ee+=1){var We=ze[Ee];this.needsUpload=this.programConfigurations[We.id].updatePaintArrays(A,this._featureMap,D,We,he)||this.needsUpload}},Ca.prototype.get=function(A){return this.programConfigurations[A]},Ca.prototype.upload=function(A){if(this.needsUpload){for(var D in this.programConfigurations)this.programConfigurations[D].upload(A);this.needsUpload=!1}},Ca.prototype.destroy=function(){for(var A in this.programConfigurations)this.programConfigurations[A].destroy()},Hr("ConstantBinder",wi),Hr("CrossFadedConstantBinder",ra),Hr("SourceExpressionBinder",Yi),Hr("CrossFadedCompositeBinder",ua),Hr("CompositeExpressionBinder",Si),Hr("ProgramConfiguration",ia,{omit:["_buffers"]}),Hr("ProgramConfigurationSet",Ca);var Ti=8192,zl=Math.pow(2,14)-1,Fl=-zl-1;function gs(A){for(var D=Ti/A.extent,K=A.loadGeometry(),he=0;he<K.length;he++)for(var Ee=K[he],ze=0;ze<Ee.length;ze++){var We=Ee[ze],rt=Math.round(We.x*D),gt=Math.round(We.y*D);We.x=u(rt,Fl,zl),We.y=u(gt,Fl,zl),(rt<We.x||rt>We.x+1||gt<We.y||gt>We.y+1)&&E("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return K}function oa(A,D){return{type:A.type,id:A.id,properties:A.properties,geometry:D?gs(A):[]}}function jo(A,D,K,he,Ee){A.emplaceBack(2*D+(he+1)/2,2*K+(Ee+1)/2)}var La=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(D){return D.id}),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new No,this.indexArray=new Ae,this.segments=new er,this.programConfigurations=new Ca(A.layers,A.zoom),this.stateDependentLayerIds=this.layers.filter(function(D){return D.isStateDependent()}).map(function(D){return D.id})};function Gu(A,D){for(var K=0;K<A.length;K++)if(iu(D,A[K]))return!0;for(var he=0;he<D.length;he++)if(iu(A,D[he]))return!0;return!!Hu(A,D)}function Kh(A,D,K){return!!iu(A,D)||!!nc(D,A,K)}function sh(A,D){if(1===A.length)return ch(D,A[0]);for(var K=0;K<D.length;K++)for(var he=D[K],Ee=0;Ee<he.length;Ee++)if(iu(A,he[Ee]))return!0;for(var ze=0;ze<A.length;ze++)if(ch(D,A[ze]))return!0;for(var We=0;We<D.length;We++)if(Hu(A,D[We]))return!0;return!1}function Sf(A,D,K){if(A.length>1){if(Hu(A,D))return!0;for(var he=0;he<D.length;he++)if(nc(D[he],A,K))return!0}for(var Ee=0;Ee<A.length;Ee++)if(nc(A[Ee],D,K))return!0;return!1}function Hu(A,D){if(0===A.length||0===D.length)return!1;for(var K=0;K<A.length-1;K++)for(var he=A[K],Ee=A[K+1],ze=0;ze<D.length-1;ze++)if(lh(he,Ee,D[ze],D[ze+1]))return!0;return!1}function lh(A,D,K,he){return P(A,K,he)!==P(D,K,he)&&P(A,D,K)!==P(A,D,he)}function nc(A,D,K){var he=K*K;if(1===D.length)return A.distSqr(D[0])<he;for(var Ee=1;Ee<D.length;Ee++)if(uh(A,D[Ee-1],D[Ee])<he)return!0;return!1}function uh(A,D,K){var he=D.distSqr(K);if(0===he)return A.distSqr(D);var Ee=((A.x-D.x)*(K.x-D.x)+(A.y-D.y)*(K.y-D.y))/he;return A.distSqr(Ee<0?D:Ee>1?K:K.sub(D)._mult(Ee)._add(D))}function ch(A,D){for(var K,he,Ee,ze=!1,We=0;We<A.length;We++)for(var rt=0,gt=(K=A[We]).length-1;rt<K.length;gt=rt++)(he=K[rt]).y>D.y!=(Ee=K[gt]).y>D.y&&D.x<(Ee.x-he.x)*(D.y-he.y)/(Ee.y-he.y)+he.x&&(ze=!ze);return ze}function iu(A,D){for(var K=!1,he=0,Ee=A.length-1;he<A.length;Ee=he++){var ze=A[he],We=A[Ee];ze.y>D.y!=We.y>D.y&&D.x<(We.x-ze.x)*(D.y-ze.y)/(We.y-ze.y)+ze.x&&(K=!K)}return K}function Eu(A,D,K){var he=K[0],Ee=K[2];if(A.x<he.x&&D.x<he.x||A.x>Ee.x&&D.x>Ee.x||A.y<he.y&&D.y<he.y||A.y>Ee.y&&D.y>Ee.y)return!1;var ze=P(A,D,K[0]);return ze!==P(A,D,K[1])||ze!==P(A,D,K[2])||ze!==P(A,D,K[3])}function au(A,D,K){var he=D.paint.get(A).value;return"constant"===he.kind?he.value:K.programConfigurations.get(D.id).getMaxValue(A)}function Tc(A){return Math.sqrt(A[0]*A[0]+A[1]*A[1])}function kc(A,D,K,he,Ee){if(!D[0]&&!D[1])return A;var ze=t.convert(D)._mult(Ee);"viewport"===K&&ze._rotate(-he);for(var We=[],rt=0;rt<A.length;rt++)We.push(A[rt].sub(ze));return We}La.prototype.populate=function(A,D,K){var he=this.layers[0],Ee=[],ze=null;"circle"===he.type&&(ze=he.layout.get("circle-sort-key"));for(var We=0,rt=A;We<rt.length;We+=1){var gt=rt[We],Mt=gt.feature,Ct=gt.id,Gt=gt.index,$t=gt.sourceLayerIndex,Zt=this.layers[0]._featureFilter.needGeometry,mn=oa(Mt,Zt);if(this.layers[0]._featureFilter.filter(new bi(this.zoom),mn,K)){var xn=ze?ze.evaluate(mn,{},K):void 0,Rn={id:Ct,properties:Mt.properties,type:Mt.type,sourceLayerIndex:$t,index:Gt,geometry:Zt?mn.geometry:gs(Mt),patterns:{},sortKey:xn};Ee.push(Rn)}}ze&&Ee.sort(function(Nr,Ur){return Nr.sortKey-Ur.sortKey});for(var In=0,Yn=Ee;In<Yn.length;In+=1){var Kn=Yn[In],ur=Kn.geometry,yr=Kn.index,Rr=Kn.sourceLayerIndex,Er=A[yr].feature;this.addFeature(Kn,ur,yr,K),D.featureIndex.insert(Er,ur,yr,Rr,this.index)}},La.prototype.update=function(A,D,K){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,D,this.stateDependentLayers,K)},La.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},La.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},La.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,qn),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},La.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},La.prototype.addFeature=function(A,D,K,he){for(var Ee=0,ze=D;Ee<ze.length;Ee+=1)for(var We=0,rt=ze[Ee];We<rt.length;We+=1){var gt=rt[We],Mt=gt.x,Ct=gt.y;if(!(Mt<0||Mt>=Ti||Ct<0||Ct>=Ti)){var Gt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,A.sortKey),$t=Gt.vertexLength;jo(this.layoutVertexArray,Mt,Ct,-1,-1),jo(this.layoutVertexArray,Mt,Ct,1,-1),jo(this.layoutVertexArray,Mt,Ct,1,1),jo(this.layoutVertexArray,Mt,Ct,-1,1),this.indexArray.emplaceBack($t,$t+1,$t+2),this.indexArray.emplaceBack($t,$t+3,$t+2),Gt.vertexLength+=4,Gt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,K,{},he)},Hr("CircleBucket",La,{omit:["layers"]});var w0=new ya({"circle-sort-key":new Yr(Qe.layout_circle["circle-sort-key"])}),pp={paint:new ya({"circle-radius":new Yr(Qe.paint_circle["circle-radius"]),"circle-color":new Yr(Qe.paint_circle["circle-color"]),"circle-blur":new Yr(Qe.paint_circle["circle-blur"]),"circle-opacity":new Yr(Qe.paint_circle["circle-opacity"]),"circle-translate":new Vr(Qe.paint_circle["circle-translate"]),"circle-translate-anchor":new Vr(Qe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Vr(Qe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Vr(Qe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Yr(Qe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Yr(Qe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Yr(Qe.paint_circle["circle-stroke-opacity"])}),layout:w0},Ps=typeof Float32Array<"u"?Float32Array:Array;function Ac(A){return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=1,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=1,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}function gp(A,D,K){var he=D[0],Ee=D[1],ze=D[2],We=D[3],rt=D[4],gt=D[5],Mt=D[6],Ct=D[7],Gt=D[8],$t=D[9],Zt=D[10],mn=D[11],xn=D[12],Rn=D[13],In=D[14],Yn=D[15],Kn=K[0],ir=K[1],ur=K[2],yr=K[3];return A[0]=Kn*he+ir*rt+ur*Gt+yr*xn,A[1]=Kn*Ee+ir*gt+ur*$t+yr*Rn,A[2]=Kn*ze+ir*Mt+ur*Zt+yr*In,A[3]=Kn*We+ir*Ct+ur*mn+yr*Yn,A[4]=(Kn=K[4])*he+(ir=K[5])*rt+(ur=K[6])*Gt+(yr=K[7])*xn,A[5]=Kn*Ee+ir*gt+ur*$t+yr*Rn,A[6]=Kn*ze+ir*Mt+ur*Zt+yr*In,A[7]=Kn*We+ir*Ct+ur*mn+yr*Yn,A[8]=(Kn=K[8])*he+(ir=K[9])*rt+(ur=K[10])*Gt+(yr=K[11])*xn,A[9]=Kn*Ee+ir*gt+ur*$t+yr*Rn,A[10]=Kn*ze+ir*Mt+ur*Zt+yr*In,A[11]=Kn*We+ir*Ct+ur*mn+yr*Yn,A[12]=(Kn=K[12])*he+(ir=K[13])*rt+(ur=K[14])*Gt+(yr=K[15])*xn,A[13]=Kn*Ee+ir*gt+ur*$t+yr*Rn,A[14]=Kn*ze+ir*Mt+ur*Zt+yr*In,A[15]=Kn*We+ir*Ct+ur*mn+yr*Yn,A}Math.hypot||(Math.hypot=function(){for(var A=arguments,D=0,K=arguments.length;K--;)D+=A[K]*A[K];return Math.sqrt(D)});var fh,A,T0=gp;function Ef(A,D,K){var he=D[0],Ee=D[1],ze=D[2],We=D[3];return A[0]=K[0]*he+K[4]*Ee+K[8]*ze+K[12]*We,A[1]=K[1]*he+K[5]*Ee+K[9]*ze+K[13]*We,A[2]=K[2]*he+K[6]*Ee+K[10]*ze+K[14]*We,A[3]=K[3]*he+K[7]*Ee+K[11]*ze+K[15]*We,A}fh=new Ps(3),Ps!=Float32Array&&(fh[0]=0,fh[1]=0,fh[2]=0),A=new Ps(4),Ps!=Float32Array&&(A[0]=0,A[1]=0,A[2]=0,A[3]=0);var Jh=(function(){var A=new Ps(2);Ps!=Float32Array&&(A[0]=0,A[1]=0)}(),function(A){function D(K){A.call(this,K,pp)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype.createBucket=function(K){return new La(K)},D.prototype.queryRadius=function(K){var he=K;return au("circle-radius",this,he)+au("circle-stroke-width",this,he)+Tc(this.paint.get("circle-translate"))},D.prototype.queryIntersectsFeature=function(K,he,Ee,ze,We,rt,gt,Mt){for(var Ct=kc(K,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),rt.angle,gt),Gt=this.paint.get("circle-radius").evaluate(he,Ee)+this.paint.get("circle-stroke-width").evaluate(he,Ee),$t="map"===this.paint.get("circle-pitch-alignment"),Zt=$t?Ct:function(Rr,Er){return Rr.map(function(Nr){return Cf(Nr,Er)})}(Ct,Mt),mn=$t?Gt*gt:Gt,xn=0,Rn=ze;xn<Rn.length;xn+=1)for(var In=0,Yn=Rn[xn];In<Yn.length;In+=1){var Kn=Yn[In],ir=$t?Kn:Cf(Kn,Mt),ur=mn,yr=Ef([],[Kn.x,Kn.y,0,1],Mt);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?ur*=yr[3]/rt.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(ur*=rt.cameraToCenterDistance/yr[3]),Kh(Zt,ir,ur))return!0}return!1},D}(Hi));function Cf(A,D){var K=Ef([],[A.x,A.y,0,1],D);return new t(K[0]/K[3],K[1]/K[3])}var dh=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D}(La);function Wc(A,D,K,he){var Ee=D.width,ze=D.height;if(he){if(he instanceof Uint8ClampedArray)he=new Uint8Array(he.buffer);else if(he.length!==Ee*ze*K)throw new RangeError("mismatched image size")}else he=new Uint8Array(Ee*ze*K);return A.width=Ee,A.height=ze,A.data=he,A}function Lf(A,D,K){var he=D.width,Ee=D.height;if(he!==A.width||Ee!==A.height){var ze=Wc({},{width:he,height:Ee},K);Yc(A,ze,{x:0,y:0},{x:0,y:0},{width:Math.min(A.width,he),height:Math.min(A.height,Ee)},K),A.width=he,A.height=Ee,A.data=ze.data}}function Yc(A,D,K,he,Ee,ze){if(0===Ee.width||0===Ee.height)return D;if(Ee.width>A.width||Ee.height>A.height||K.x>A.width-Ee.width||K.y>A.height-Ee.height)throw new RangeError("out of range source coordinates for image copy");if(Ee.width>D.width||Ee.height>D.height||he.x>D.width-Ee.width||he.y>D.height-Ee.height)throw new RangeError("out of range destination coordinates for image copy");for(var We=A.data,rt=D.data,gt=0;gt<Ee.height;gt++)for(var Mt=((K.y+gt)*A.width+K.x)*ze,Ct=((he.y+gt)*D.width+he.x)*ze,Gt=0;Gt<Ee.width*ze;Gt++)rt[Ct+Gt]=We[Mt+Gt];return D}Hr("HeatmapBucket",dh,{omit:["layers"]});var qu=function(A,D){Wc(this,A,1,D)};qu.prototype.resize=function(A){Lf(this,A,1)},qu.prototype.clone=function(){return new qu({width:this.width,height:this.height},new Uint8Array(this.data))},qu.copy=function(A,D,K,he,Ee){Yc(A,D,K,he,Ee,1)};var Za=function(A,D){Wc(this,A,4,D)};Za.prototype.resize=function(A){Lf(this,A,4)},Za.prototype.replace=function(A,D){D?this.data.set(A):this.data=A instanceof Uint8ClampedArray?new Uint8Array(A.buffer):A},Za.prototype.clone=function(){return new Za({width:this.width,height:this.height},new Uint8Array(this.data))},Za.copy=function(A,D,K,he,Ee){Yc(A,D,K,he,Ee,4)},Hr("AlphaImage",qu),Hr("RGBAImage",Za);var mp={paint:new ya({"heatmap-radius":new Yr(Qe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Yr(Qe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Vr(Qe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Bo(Qe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Vr(Qe.paint_heatmap["heatmap-opacity"])})};function If(A){var D={},K=A.resolution||256,he=A.clips?A.clips.length:1,Ee=A.image||new Za({width:K,height:he}),ze=function(mn,xn,Rn){D[A.evaluationKey]=Rn;var In=A.expression.evaluate(D);Ee.data[mn+xn+0]=Math.floor(255*In.r/In.a),Ee.data[mn+xn+1]=Math.floor(255*In.g/In.a),Ee.data[mn+xn+2]=Math.floor(255*In.b/In.a),Ee.data[mn+xn+3]=Math.floor(255*In.a)};if(A.clips)for(var We=0,rt=0;We<he;++We,rt+=4*K)for(var gt=0,Mt=0;gt<K;gt++,Mt+=4){var Ct=gt/(K-1),Gt=A.clips[We];ze(rt,Mt,Gt.start*(1-Ct)+Gt.end*Ct)}else for(var $t=0,Zt=0;$t<K;$t++,Zt+=4)ze(0,Zt,$t/(K-1));return Ee}var $h=function(A){function D(K){A.call(this,K,mp),this._updateColorRamp()}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype.createBucket=function(K){return new dh(K)},D.prototype._handleSpecialPaintPropertyUpdate=function(K){"heatmap-color"===K&&this._updateColorRamp()},D.prototype._updateColorRamp=function(){this.colorRamp=If({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},D.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},D.prototype.queryRadius=function(){return 0},D.prototype.queryIntersectsFeature=function(){return!1},D.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},D}(Hi),A0={paint:new ya({"hillshade-illumination-direction":new Vr(Qe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Vr(Qe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Vr(Qe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Vr(Qe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Vr(Qe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Vr(Qe.paint_hillshade["hillshade-accent-color"])})},Qh=function(A){function D(K){A.call(this,K,A0)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},D}(Hi),Pf=Wi([{name:"a_pos",components:2,type:"Int16"}],4).members,Of=Rf,ph=Rf;function Rf(A,D,K){K=K||2;var he,Ee,ze,We,rt,gt,Mt,Ct=D&&D.length,Gt=Ct?D[0]*K:A.length,$t=ed(A,0,Gt,K,!0),Zt=[];if(!$t||$t.next===$t.prev)return Zt;if(Ct&&($t=function(xn,Rn,In,Yn){var Kn,ir,ur,yr=[];for(Kn=0,ir=Rn.length;Kn<ir;Kn++)(ur=ed(xn,Rn[Kn]*Yn,Kn<ir-1?Rn[Kn+1]*Yn:xn.length,Yn,!1))===ur.next&&(ur.steiner=!0),yr.push(ms(ur));for(yr.sort(ml),Kn=0;Kn<yr.length;Kn++)Uo(yr[Kn],In),In=ou(In,In.next);return In}(A,D,$t,K)),A.length>80*K){he=ze=A[0],Ee=We=A[1];for(var mn=K;mn<Gt;mn+=K)(rt=A[mn])<he&&(he=rt),(gt=A[mn+1])<Ee&&(Ee=gt),rt>ze&&(ze=rt),gt>We&&(We=gt);Mt=0!==(Mt=Math.max(ze-he,We-Ee))?1/Mt:0}return Zc($t,Zt,K,he,Ee,Mt),Zt}function ed(A,D,K,he,Ee){var ze,We;if(Ee===mh(A,D,K,he)>0)for(ze=D;ze<K;ze+=he)We=td(ze,A[ze],A[ze+1],We);else for(ze=K-he;ze>=D;ze-=he)We=td(ze,A[ze],A[ze+1],We);return We&&Df(We,We.next)&&($i(We),We=We.next),We}function ou(A,D){if(!A)return A;D||(D=A);var K,he=A;do{if(K=!1,he.steiner||!Df(he,he.next)&&0!==zi(he.prev,he,he.next))he=he.next;else{if($i(he),(he=D=he.prev)===he.next)break;K=!0}}while(K||he!==D);return D}function Zc(A,D,K,he,Ee,ze,We){if(A){!We&&ze&&function(Ct,Gt,$t,Zt){var mn=Ct;do{null===mn.z&&(mn.z=ic(mn.x,mn.y,Gt,$t,Zt)),mn.prevZ=mn.prev,mn.nextZ=mn.next,mn=mn.next}while(mn!==Ct);mn.prevZ.nextZ=null,mn.prevZ=null,function(xn){var Rn,In,Yn,Kn,ir,ur,yr,Rr,Er=1;do{for(In=xn,xn=null,ir=null,ur=0;In;){for(ur++,Yn=In,yr=0,Rn=0;Rn<Er&&(yr++,Yn=Yn.nextZ);Rn++);for(Rr=Er;yr>0||Rr>0&&Yn;)0!==yr&&(0===Rr||!Yn||In.z<=Yn.z)?(Kn=In,In=In.nextZ,yr--):(Kn=Yn,Yn=Yn.nextZ,Rr--),ir?ir.nextZ=Kn:xn=Kn,Kn.prevZ=ir,ir=Kn;In=Yn}ir.nextZ=null,Er*=2}while(ur>1)}(mn)}(A,he,Ee,ze);for(var rt,gt,Mt=A;A.prev!==A.next;)if(rt=A.prev,gt=A.next,ze?Mc(A,he,Ee,ze):rc(A))D.push(rt.i/K),D.push(A.i/K),D.push(gt.i/K),$i(A),A=gt.next,Mt=gt.next;else if((A=gt)===Mt){We?1===We?Zc(A=no(ou(A),D,K),D,K,he,Ee,ze,2):2===We&&ii(A,D,K,he,Ee,ze):Zc(ou(A),D,K,he,Ee,ze,1);break}}}function rc(A){var D=A.prev,K=A,he=A.next;if(zi(D,K,he)>=0)return!1;for(var Ee=A.next.next;Ee!==A.prev;){if(ac(D.x,D.y,K.x,K.y,he.x,he.y,Ee.x,Ee.y)&&zi(Ee.prev,Ee,Ee.next)>=0)return!1;Ee=Ee.next}return!0}function Mc(A,D,K,he){var Ee=A.prev,ze=A,We=A.next;if(zi(Ee,ze,We)>=0)return!1;for(var Mt=Ee.x>ze.x?Ee.x>We.x?Ee.x:We.x:ze.x>We.x?ze.x:We.x,Ct=Ee.y>ze.y?Ee.y>We.y?Ee.y:We.y:ze.y>We.y?ze.y:We.y,Gt=ic(Ee.x<ze.x?Ee.x<We.x?Ee.x:We.x:ze.x<We.x?ze.x:We.x,Ee.y<ze.y?Ee.y<We.y?Ee.y:We.y:ze.y<We.y?ze.y:We.y,D,K,he),$t=ic(Mt,Ct,D,K,he),Zt=A.prevZ,mn=A.nextZ;Zt&&Zt.z>=Gt&&mn&&mn.z<=$t;){if(Zt!==A.prev&&Zt!==A.next&&ac(Ee.x,Ee.y,ze.x,ze.y,We.x,We.y,Zt.x,Zt.y)&&zi(Zt.prev,Zt,Zt.next)>=0||(Zt=Zt.prevZ,mn!==A.prev&&mn!==A.next&&ac(Ee.x,Ee.y,ze.x,ze.y,We.x,We.y,mn.x,mn.y)&&zi(mn.prev,mn,mn.next)>=0))return!1;mn=mn.nextZ}for(;Zt&&Zt.z>=Gt;){if(Zt!==A.prev&&Zt!==A.next&&ac(Ee.x,Ee.y,ze.x,ze.y,We.x,We.y,Zt.x,Zt.y)&&zi(Zt.prev,Zt,Zt.next)>=0)return!1;Zt=Zt.prevZ}for(;mn&&mn.z<=$t;){if(mn!==A.prev&&mn!==A.next&&ac(Ee.x,Ee.y,ze.x,ze.y,We.x,We.y,mn.x,mn.y)&&zi(mn.prev,mn,mn.next)>=0)return!1;mn=mn.nextZ}return!0}function no(A,D,K){var he=A;do{var Ee=he.prev,ze=he.next.next;!Df(Ee,ze)&&Bl(Ee,he,he.next,ze)&&Xc(Ee,ze)&&Xc(ze,Ee)&&(D.push(Ee.i/K),D.push(he.i/K),D.push(ze.i/K),$i(he),$i(he.next),he=A=ze),he=he.next}while(he!==A);return ou(he)}function ii(A,D,K,he,Ee,ze){var We=A;do{for(var rt=We.next.next;rt!==We.prev;){if(We.i!==rt.i&&vp(We,rt)){var gt=gh(We,rt);return We=ou(We,We.next),gt=ou(gt,gt.next),Zc(We,D,K,he,Ee,ze),void Zc(gt,D,K,he,Ee,ze)}rt=rt.next}We=We.next}while(We!==A)}function ml(A,D){return A.x-D.x}function Uo(A,D){if(D=function(he,Ee){var ze,We=Ee,rt=he.x,gt=he.y,Mt=-1/0;do{if(gt<=We.y&&gt>=We.next.y&&We.next.y!==We.y){var Ct=We.x+(gt-We.y)*(We.next.x-We.x)/(We.next.y-We.y);if(Ct<=rt&&Ct>Mt){if(Mt=Ct,Ct===rt){if(gt===We.y)return We;if(gt===We.next.y)return We.next}ze=We.x<We.next.x?We:We.next}}We=We.next}while(We!==Ee);if(!ze)return null;if(rt===Mt)return ze;var Gt,$t=ze,Zt=ze.x,mn=ze.y,xn=1/0;We=ze;do{rt>=We.x&&We.x>=Zt&&rt!==We.x&&ac(gt<mn?rt:Mt,gt,Zt,mn,gt<mn?Mt:rt,gt,We.x,We.y)&&(Gt=Math.abs(gt-We.y)/(rt-We.x),Xc(We,he)&&(Gt<xn||Gt===xn&&(We.x>ze.x||We.x===ze.x&&su(ze,We)))&&(ze=We,xn=Gt)),We=We.next}while(We!==$t);return ze}(A,D)){var K=gh(D,A);ou(D,D.next),ou(K,K.next)}}function su(A,D){return zi(A.prev,A,D.prev)<0&&zi(D.next,A,A.next)<0}function ic(A,D,K,he,Ee){return(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=32767*(A-K)*Ee)|A<<8))|A<<4))|A<<2))|A<<1))|(D=1431655765&((D=858993459&((D=252645135&((D=16711935&((D=32767*(D-he)*Ee)|D<<8))|D<<4))|D<<2))|D<<1))<<1}function ms(A){var D=A,K=A;do{(D.x<K.x||D.x===K.x&&D.y<K.y)&&(K=D),D=D.next}while(D!==A);return K}function ac(A,D,K,he,Ee,ze,We,rt){return(Ee-We)*(D-rt)-(A-We)*(ze-rt)>=0&&(A-We)*(he-rt)-(K-We)*(D-rt)>=0&&(K-We)*(ze-rt)-(Ee-We)*(he-rt)>=0}function vp(A,D){return A.next.i!==D.i&&A.prev.i!==D.i&&!function(K,he){var Ee=K;do{if(Ee.i!==K.i&&Ee.next.i!==K.i&&Ee.i!==he.i&&Ee.next.i!==he.i&&Bl(Ee,Ee.next,K,he))return!0;Ee=Ee.next}while(Ee!==K);return!1}(A,D)&&(Xc(A,D)&&Xc(D,A)&&function(K,he){var Ee=K,ze=!1,We=(K.x+he.x)/2,rt=(K.y+he.y)/2;do{Ee.y>rt!=Ee.next.y>rt&&Ee.next.y!==Ee.y&&We<(Ee.next.x-Ee.x)*(rt-Ee.y)/(Ee.next.y-Ee.y)+Ee.x&&(ze=!ze),Ee=Ee.next}while(Ee!==K);return ze}(A,D)&&(zi(A.prev,A,D.prev)||zi(A,D.prev,D))||Df(A,D)&&zi(A.prev,A,A.next)>0&&zi(D.prev,D,D.next)>0)}function zi(A,D,K){return(D.y-A.y)*(K.x-D.x)-(D.x-A.x)*(K.y-D.y)}function Df(A,D){return A.x===D.x&&A.y===D.y}function Bl(A,D,K,he){var Ee=Nl(zi(A,D,K)),ze=Nl(zi(A,D,he)),We=Nl(zi(K,he,A)),rt=Nl(zi(K,he,D));return Ee!==ze&&We!==rt||!(0!==Ee||!oc(A,K,D))||!(0!==ze||!oc(A,he,D))||!(0!==We||!oc(K,A,he))||!(0!==rt||!oc(K,D,he))}function oc(A,D,K){return D.x<=Math.max(A.x,K.x)&&D.x>=Math.min(A.x,K.x)&&D.y<=Math.max(A.y,K.y)&&D.y>=Math.min(A.y,K.y)}function Nl(A){return A>0?1:A<0?-1:0}function Xc(A,D){return zi(A.prev,A,A.next)<0?zi(A,D,A.next)>=0&&zi(A,A.prev,D)>=0:zi(A,D,A.prev)<0||zi(A,A.next,D)<0}function gh(A,D){var K=new kr(A.i,A.x,A.y),he=new kr(D.i,D.x,D.y),Ee=A.next,ze=D.prev;return A.next=D,D.prev=A,K.next=Ee,Ee.prev=K,he.next=K,K.prev=he,ze.next=he,he.prev=ze,he}function td(A,D,K,he){var Ee=new kr(A,D,K);return he?(Ee.next=he.next,Ee.prev=he,he.next.prev=Ee,he.next=Ee):(Ee.prev=Ee,Ee.next=Ee),Ee}function $i(A){A.next.prev=A.prev,A.prev.next=A.next,A.prevZ&&(A.prevZ.nextZ=A.nextZ),A.nextZ&&(A.nextZ.prevZ=A.prevZ)}function kr(A,D,K){this.i=A,this.x=D,this.y=K,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function mh(A,D,K,he){for(var Ee=0,ze=D,We=K-he;ze<K;ze+=he)Ee+=(A[We]-A[ze])*(A[ze+1]+A[We+1]),We=ze;return Ee}function yp(A,D,K,he,Ee){nd(A,D,K||0,he||A.length-1,Ee||xp)}function nd(A,D,K,he,Ee){for(;he>K;){if(he-K>600){var ze=he-K+1,We=D-K+1,rt=Math.log(ze),gt=.5*Math.exp(2*rt/3),Mt=.5*Math.sqrt(rt*gt*(ze-gt)/ze)*(We-ze/2<0?-1:1);nd(A,D,Math.max(K,Math.floor(D-We*gt/ze+Mt)),Math.min(he,Math.floor(D+(ze-We)*gt/ze+Mt)),Ee)}var Ct=A[D],Gt=K,$t=he;for(Kc(A,K,D),Ee(A[he],Ct)>0&&Kc(A,K,he);Gt<$t;){for(Kc(A,Gt,$t),Gt++,$t--;Ee(A[Gt],Ct)<0;)Gt++;for(;Ee(A[$t],Ct)>0;)$t--}0===Ee(A[K],Ct)?Kc(A,K,$t):Kc(A,++$t,he),$t<=D&&(K=$t+1),D<=$t&&(he=$t-1)}}function Kc(A,D,K){var he=A[D];A[D]=A[K],A[K]=he}function xp(A,D){return A<D?-1:A>D?1:0}function sc(A,D){var K=A.length;if(K<=1)return[A];for(var he,Ee,ze=[],We=0;We<K;We++){var rt=I(A[We]);0!==rt&&(A[We].area=Math.abs(rt),void 0===Ee&&(Ee=rt<0),Ee===rt<0?(he&&ze.push(he),he=[A[We]]):he.push(A[We]))}if(he&&ze.push(he),D>1)for(var gt=0;gt<ze.length;gt++)ze[gt].length<=D||(yp(ze[gt],D,1,ze[gt].length-1,Li),ze[gt]=ze[gt].slice(0,D));return ze}function Li(A,D){return D.area-A.area}function Zi(A,D,K){for(var he=K.patternDependencies,Ee=!1,ze=0,We=D;ze<We.length;ze+=1){var rt=We[ze].paint.get(A+"-pattern");rt.isConstant()||(Ee=!0);var gt=rt.constantOr(null);gt&&(Ee=!0,he[gt.to]=!0,he[gt.from]=!0)}return Ee}function lu(A,D,K,he,Ee){for(var ze=Ee.patternDependencies,We=0,rt=D;We<rt.length;We+=1){var gt=rt[We],Mt=gt.paint.get(A+"-pattern").value;if("constant"!==Mt.kind){var Ct=Mt.evaluate({zoom:he-1},K,{},Ee.availableImages),Gt=Mt.evaluate({zoom:he},K,{},Ee.availableImages),$t=Mt.evaluate({zoom:he+1},K,{},Ee.availableImages);Gt=Gt&&Gt.name?Gt.name:Gt,$t=$t&&$t.name?$t.name:$t,ze[Ct=Ct&&Ct.name?Ct.name:Ct]=!0,ze[Gt]=!0,ze[$t]=!0,K.patterns[gt.id]={min:Ct,mid:Gt,max:$t}}}return K}Rf.deviation=function(A,D,K,he){var Ee=D&&D.length,We=Math.abs(mh(A,0,Ee?D[0]*K:A.length,K));if(Ee)for(var rt=0,gt=D.length;rt<gt;rt++)We-=Math.abs(mh(A,D[rt]*K,rt<gt-1?D[rt+1]*K:A.length,K));var Gt=0;for(rt=0;rt<he.length;rt+=3){var $t=he[rt]*K,Zt=he[rt+1]*K,mn=he[rt+2]*K;Gt+=Math.abs((A[$t]-A[mn])*(A[Zt+1]-A[$t+1])-(A[$t]-A[Zt])*(A[mn+1]-A[$t+1]))}return 0===We&&0===Gt?0:Math.abs((Gt-We)/We)},Rf.flatten=function(A){for(var D=A[0][0].length,K={vertices:[],holes:[],dimensions:D},he=0,Ee=0;Ee<A.length;Ee++){for(var ze=0;ze<A[Ee].length;ze++)for(var We=0;We<D;We++)K.vertices.push(A[Ee][ze][We]);Ee>0&&K.holes.push(he+=A[Ee-1].length)}return K},Of.default=ph;var jl=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(D){return D.id}),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new No,this.indexArray=new Ae,this.indexArray2=new mt,this.programConfigurations=new Ca(A.layers,A.zoom),this.segments=new er,this.segments2=new er,this.stateDependentLayerIds=this.layers.filter(function(D){return D.isStateDependent()}).map(function(D){return D.id})};jl.prototype.populate=function(A,D,K){this.hasPattern=Zi("fill",this.layers,D);for(var he=this.layers[0].layout.get("fill-sort-key"),Ee=[],ze=0,We=A;ze<We.length;ze+=1){var rt=We[ze],gt=rt.feature,Mt=rt.id,Ct=rt.index,Gt=rt.sourceLayerIndex,$t=this.layers[0]._featureFilter.needGeometry,Zt=oa(gt,$t);if(this.layers[0]._featureFilter.filter(new bi(this.zoom),Zt,K)){var mn=he?he.evaluate(Zt,{},K,D.availableImages):void 0,xn={id:Mt,properties:gt.properties,type:gt.type,sourceLayerIndex:Gt,index:Ct,geometry:$t?Zt.geometry:gs(gt),patterns:{},sortKey:mn};Ee.push(xn)}}he&&Ee.sort(function(Nr,Ur){return Nr.sortKey-Ur.sortKey});for(var Rn=0,In=Ee;Rn<In.length;Rn+=1){var Yn=In[Rn],ir=Yn.geometry,ur=Yn.index,yr=Yn.sourceLayerIndex;if(this.hasPattern){var Rr=lu("fill",this.layers,Yn,this.zoom,D);this.patternFeatures.push(Rr)}else this.addFeature(Yn,ir,ur,K,{});D.featureIndex.insert(A[ur].feature,ir,ur,yr,this.index)}},jl.prototype.update=function(A,D,K){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,D,this.stateDependentLayers,K)},jl.prototype.addFeatures=function(A,D,K){for(var he=0,Ee=this.patternFeatures;he<Ee.length;he+=1){var ze=Ee[he];this.addFeature(ze,ze.geometry,ze.index,D,K)}},jl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},jl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},jl.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Pf),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.indexBuffer2=A.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(A),this.uploaded=!0},jl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},jl.prototype.addFeature=function(A,D,K,he,Ee){for(var ze=0,We=sc(D,500);ze<We.length;ze+=1){for(var rt=We[ze],gt=0,Mt=0,Ct=rt;Mt<Ct.length;Mt+=1)gt+=Ct[Mt].length;for(var Gt=this.segments.prepareSegment(gt,this.layoutVertexArray,this.indexArray),$t=Gt.vertexLength,Zt=[],mn=[],xn=0,Rn=rt;xn<Rn.length;xn+=1){var In=Rn[xn];if(0!==In.length){In!==rt[0]&&mn.push(Zt.length/2);var Yn=this.segments2.prepareSegment(In.length,this.layoutVertexArray,this.indexArray2),Kn=Yn.vertexLength;this.layoutVertexArray.emplaceBack(In[0].x,In[0].y),this.indexArray2.emplaceBack(Kn+In.length-1,Kn),Zt.push(In[0].x),Zt.push(In[0].y);for(var ir=1;ir<In.length;ir++)this.layoutVertexArray.emplaceBack(In[ir].x,In[ir].y),this.indexArray2.emplaceBack(Kn+ir-1,Kn+ir),Zt.push(In[ir].x),Zt.push(In[ir].y);Yn.vertexLength+=In.length,Yn.primitiveLength+=In.length}}for(var ur=Of(Zt,mn),yr=0;yr<ur.length;yr+=3)this.indexArray.emplaceBack($t+ur[yr],$t+ur[yr+1],$t+ur[yr+2]);Gt.vertexLength+=gt,Gt.primitiveLength+=ur.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,K,Ee,he)},Hr("FillBucket",jl,{omit:["layers","patternFeatures"]});var rd=new ya({"fill-sort-key":new Yr(Qe.layout_fill["fill-sort-key"])}),bp={paint:new ya({"fill-antialias":new Vr(Qe.paint_fill["fill-antialias"]),"fill-opacity":new Yr(Qe.paint_fill["fill-opacity"]),"fill-color":new Yr(Qe.paint_fill["fill-color"]),"fill-outline-color":new Yr(Qe.paint_fill["fill-outline-color"]),"fill-translate":new Vr(Qe.paint_fill["fill-translate"]),"fill-translate-anchor":new Vr(Qe.paint_fill["fill-translate-anchor"]),"fill-pattern":new To(Qe.paint_fill["fill-pattern"])}),layout:rd},_p=function(A){function D(K){A.call(this,K,bp)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype.recalculate=function(K,he){A.prototype.recalculate.call(this,K,he);var Ee=this.paint._values["fill-outline-color"];"constant"===Ee.value.kind&&void 0===Ee.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},D.prototype.createBucket=function(K){return new jl(K)},D.prototype.queryRadius=function(){return Tc(this.paint.get("fill-translate"))},D.prototype.queryIntersectsFeature=function(K,he,Ee,ze,We,rt,gt){return sh(kc(K,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),rt.angle,gt),ze)},D.prototype.isTileClipped=function(){return!0},D}(Hi),wp=Wi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,id=Sc;function Sc(A,D,K,he,Ee){this.properties={},this.extent=K,this.type=0,this._pbf=A,this._geometry=-1,this._keys=he,this._values=Ee,A.readFields(vi,this,D)}function vi(A,D,K){1==A?D.id=K.readVarint():2==A?function(he,Ee){for(var ze=he.readVarint()+he.pos;he.pos<ze;){var We=Ee._keys[he.readVarint()],rt=Ee._values[he.readVarint()];Ee.properties[We]=rt}}(K,D):3==A?D.type=K.readVarint():4==A&&(D._geometry=K.pos)}function Tp(A){for(var D,K,he=0,Ee=0,ze=A.length,We=ze-1;Ee<ze;We=Ee++)he+=((K=A[We]).x-(D=A[Ee]).x)*(D.y+K.y);return he}Sc.types=["Unknown","Point","LineString","Polygon"],Sc.prototype.loadGeometry=function(){var A=this._pbf;A.pos=this._geometry;for(var D,K=A.readVarint()+A.pos,he=1,Ee=0,ze=0,We=0,rt=[];A.pos<K;){if(Ee<=0){var gt=A.readVarint();he=7&gt,Ee=gt>>3}if(Ee--,1===he||2===he)ze+=A.readSVarint(),We+=A.readSVarint(),1===he&&(D&&rt.push(D),D=[]),D.push(new t(ze,We));else{if(7!==he)throw new Error("unknown command "+he);D&&D.push(D[0].clone())}}return D&&rt.push(D),rt},Sc.prototype.bbox=function(){var A=this._pbf;A.pos=this._geometry;for(var D=A.readVarint()+A.pos,K=1,he=0,Ee=0,ze=0,We=1/0,rt=-1/0,gt=1/0,Mt=-1/0;A.pos<D;){if(he<=0){var Ct=A.readVarint();K=7&Ct,he=Ct>>3}if(he--,1===K||2===K)(Ee+=A.readSVarint())<We&&(We=Ee),Ee>rt&&(rt=Ee),(ze+=A.readSVarint())<gt&&(gt=ze),ze>Mt&&(Mt=ze);else if(7!==K)throw new Error("unknown command "+K)}return[We,gt,rt,Mt]},Sc.prototype.toGeoJSON=function(A,D,K){var he,Ee,ze=this.extent*Math.pow(2,K),We=this.extent*A,rt=this.extent*D,gt=this.loadGeometry(),Mt=Sc.types[this.type];function Ct(Zt){for(var mn=0;mn<Zt.length;mn++){var xn=Zt[mn];Zt[mn]=[360*(xn.x+We)/ze-180,360/Math.PI*Math.atan(Math.exp((180-360*(xn.y+rt)/ze)*Math.PI/180))-90]}}switch(this.type){case 1:var Gt=[];for(he=0;he<gt.length;he++)Gt[he]=gt[he][0];Ct(gt=Gt);break;case 2:for(he=0;he<gt.length;he++)Ct(gt[he]);break;case 3:for(gt=function(Zt){var mn=Zt.length;if(mn<=1)return[Zt];for(var xn,Rn,In=[],Yn=0;Yn<mn;Yn++){var Kn=Tp(Zt[Yn]);0!==Kn&&(void 0===Rn&&(Rn=Kn<0),Rn===Kn<0?(xn&&In.push(xn),xn=[Zt[Yn]]):xn.push(Zt[Yn]))}return xn&&In.push(xn),In}(gt),he=0;he<gt.length;he++)for(Ee=0;Ee<gt[he].length;Ee++)Ct(gt[he][Ee])}1===gt.length?gt=gt[0]:Mt="Multi"+Mt;var $t={type:"Feature",geometry:{type:Mt,coordinates:gt},properties:this.properties};return"id"in this&&($t.id=this.id),$t};var vh=yh;function yh(A,D){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=A,this._keys=[],this._values=[],this._features=[],A.readFields(Cu,this,D),this.length=this._features.length}function Cu(A,D,K){15===A?D.version=K.readVarint():1===A?D.name=K.readString():5===A?D.extent=K.readVarint():2===A?D._features.push(K.pos):3===A?D._keys.push(K.readString()):4===A&&D._values.push(function(he){for(var Ee=null,ze=he.readVarint()+he.pos;he.pos<ze;){var We=he.readVarint()>>3;Ee=1===We?he.readString():2===We?he.readFloat():3===We?he.readDouble():4===We?he.readVarint64():5===We?he.readVarint():6===We?he.readSVarint():7===We?he.readBoolean():null}return Ee}(K))}function Ul(A,D,K){if(3===A){var he=new vh(K,K.readVarint()+K.pos);he.length&&(D[he.name]=he)}}yh.prototype.feature=function(A){if(A<0||A>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[A];var D=this._pbf.readVarint()+this._pbf.pos;return new id(this._pbf,D,this.extent,this._keys,this._values)};var Ec={VectorTile:function(A,D){this.layers=A.readFields(Ul,{},D)},VectorTileFeature:id,VectorTileLayer:vh},kp=Ec.VectorTileFeature.types,xh=Math.pow(2,13);function Jc(A,D,K,he,Ee,ze,We,rt){A.emplaceBack(D,K,2*Math.floor(he*xh)+We,Ee*xh*2,ze*xh*2,Math.round(rt))}var Vl=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(D){return D.id}),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new tt,this.indexArray=new Ae,this.programConfigurations=new Ca(A.layers,A.zoom),this.segments=new er,this.stateDependentLayerIds=this.layers.filter(function(D){return D.isStateDependent()}).map(function(D){return D.id})};function Ap(A,D){return A.x===D.x&&(A.x<0||A.x>Ti)||A.y===D.y&&(A.y<0||A.y>Ti)}Vl.prototype.populate=function(A,D,K){this.features=[],this.hasPattern=Zi("fill-extrusion",this.layers,D);for(var he=0,Ee=A;he<Ee.length;he+=1){var ze=Ee[he],We=ze.feature,rt=ze.id,gt=ze.index,Mt=ze.sourceLayerIndex,Ct=this.layers[0]._featureFilter.needGeometry,Gt=oa(We,Ct);if(this.layers[0]._featureFilter.filter(new bi(this.zoom),Gt,K)){var $t={id:rt,sourceLayerIndex:Mt,index:gt,geometry:Ct?Gt.geometry:gs(We),properties:We.properties,type:We.type,patterns:{}};this.hasPattern?this.features.push(lu("fill-extrusion",this.layers,$t,this.zoom,D)):this.addFeature($t,$t.geometry,gt,K,{}),D.featureIndex.insert(We,$t.geometry,gt,Mt,this.index,!0)}}},Vl.prototype.addFeatures=function(A,D,K){for(var he=0,Ee=this.features;he<Ee.length;he+=1){var ze=Ee[he];this.addFeature(ze,ze.geometry,ze.index,D,K)}},Vl.prototype.update=function(A,D,K){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,D,this.stateDependentLayers,K)},Vl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Vl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Vl.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,wp),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},Vl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Vl.prototype.addFeature=function(A,D,K,he,Ee){for(var ze=0,We=sc(D,500);ze<We.length;ze+=1){for(var rt=We[ze],gt=0,Mt=0,Ct=rt;Mt<Ct.length;Mt+=1)gt+=Ct[Mt].length;for(var Gt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),$t=0,Zt=rt;$t<Zt.length;$t+=1){var mn=Zt[$t];if(0!==mn.length&&!((Ei=mn).every(function(ci){return ci.x<0})||Ei.every(function(ci){return ci.x>Ti})||Ei.every(function(ci){return ci.y<0})||Ei.every(function(ci){return ci.y>Ti})))for(var xn=0,Rn=0;Rn<mn.length;Rn++){var In=mn[Rn];if(Rn>=1){var Yn=mn[Rn-1];if(!Ap(In,Yn)){Gt.vertexLength+4>er.MAX_VERTEX_ARRAY_LENGTH&&(Gt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Kn=In.sub(Yn)._perp()._unit(),ir=Yn.dist(In);xn+ir>32768&&(xn=0),Jc(this.layoutVertexArray,In.x,In.y,Kn.x,Kn.y,0,0,xn),Jc(this.layoutVertexArray,In.x,In.y,Kn.x,Kn.y,0,1,xn),Jc(this.layoutVertexArray,Yn.x,Yn.y,Kn.x,Kn.y,0,0,xn+=ir),Jc(this.layoutVertexArray,Yn.x,Yn.y,Kn.x,Kn.y,0,1,xn);var ur=Gt.vertexLength;this.indexArray.emplaceBack(ur,ur+2,ur+1),this.indexArray.emplaceBack(ur+1,ur+2,ur+3),Gt.vertexLength+=4,Gt.primitiveLength+=2}}}}if(Gt.vertexLength+gt>er.MAX_VERTEX_ARRAY_LENGTH&&(Gt=this.segments.prepareSegment(gt,this.layoutVertexArray,this.indexArray)),"Polygon"===kp[A.type]){for(var yr=[],Rr=[],Er=Gt.vertexLength,Nr=0,Ur=rt;Nr<Ur.length;Nr+=1){var ai=Ur[Nr];if(0!==ai.length){ai!==rt[0]&&Rr.push(yr.length/2);for(var Kr=0;Kr<ai.length;Kr++){var oi=ai[Kr];Jc(this.layoutVertexArray,oi.x,oi.y,0,0,1,1,0),yr.push(oi.x),yr.push(oi.y)}}}for(var ei=Of(yr,Rr),Zr=0;Zr<ei.length;Zr+=3)this.indexArray.emplaceBack(Er+ei[Zr],Er+ei[Zr+2],Er+ei[Zr+1]);Gt.primitiveLength+=ei.length/3,Gt.vertexLength+=gt}}var Ei;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,K,Ee,he)},Hr("FillExtrusionBucket",Vl,{omit:["layers","features"]});var Mp={paint:new ya({"fill-extrusion-opacity":new Vr(Qe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Yr(Qe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Vr(Qe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Vr(Qe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new To(Qe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Yr(Qe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Yr(Qe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Vr(Qe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Sp=function(A){function D(K){A.call(this,K,Mp)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype.createBucket=function(K){return new Vl(K)},D.prototype.queryRadius=function(){return Tc(this.paint.get("fill-extrusion-translate"))},D.prototype.is3D=function(){return!0},D.prototype.queryIntersectsFeature=function(K,he,Ee,ze,We,rt,gt,Mt){var Ct=kc(K,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),rt.angle,gt),Gt=this.paint.get("fill-extrusion-height").evaluate(he,Ee),$t=this.paint.get("fill-extrusion-base").evaluate(he,Ee),Zt=function(xn,Rn,In,Yn){for(var Kn=[],ir=0,ur=xn;ir<ur.length;ir+=1){var yr=ur[ir],Rr=[yr.x,yr.y,0,1];Ef(Rr,Rr,Rn),Kn.push(new t(Rr[0]/Rr[3],Rr[1]/Rr[3]))}return Kn}(Ct,Mt),mn=function(xn,Rn,In,Yn){for(var Kn=[],ir=[],ur=Yn[8]*Rn,yr=Yn[9]*Rn,Rr=Yn[10]*Rn,Er=Yn[11]*Rn,Nr=Yn[8]*In,Ur=Yn[9]*In,ai=Yn[10]*In,Kr=Yn[11]*In,oi=0,ei=xn;oi<ei.length;oi+=1){for(var Zr=[],Ei=[],ci=0,ea=ei[oi];ci<ea.length;ci+=1){var ni=ea[ci],Xi=ni.x,fa=ni.y,Ki=Yn[0]*Xi+Yn[4]*fa+Yn[12],ji=Yn[1]*Xi+Yn[5]*fa+Yn[13],sa=Yn[2]*Xi+Yn[6]*fa+Yn[14],Va=Yn[3]*Xi+Yn[7]*fa+Yn[15],ba=sa+Rr,lo=Va+Er,So=Ki+Nr,po=ji+Ur,Vo=sa+ai,go=Va+Kr,Ga=new t((Ki+ur)/lo,(ji+yr)/lo);Ga.z=ba/lo,Zr.push(Ga);var mo=new t(So/go,po/go);mo.z=Vo/go,Ei.push(mo)}Kn.push(Zr),ir.push(Ei)}return[Kn,ir]}(ze,$t,Gt,Mt);return function(xn,Rn,In){var Yn=1/0;sh(In,Rn)&&(Yn=Cc(In,Rn[0]));for(var Kn=0;Kn<Rn.length;Kn++)for(var ir=Rn[Kn],ur=xn[Kn],yr=0;yr<ir.length-1;yr++){var Rr=ir[yr],Ur=[Rr,ir[yr+1],ur[yr+1],ur[yr],Rr];Gu(In,Ur)&&(Yn=Math.min(Yn,Cc(In,Ur)))}return Yn!==1/0&&Yn}(mn[0],mn[1],Zt)},D}(Hi);function $c(A,D){return A.x*D.x+A.y*D.y}function Cc(A,D){if(1===A.length){for(var K,he=0,Ee=D[he++];!K||Ee.equals(K);)if(!(K=D[he++]))return 1/0;for(;he<D.length;he++){var ze=D[he],We=A[0],rt=K.sub(Ee),gt=ze.sub(Ee),Mt=We.sub(Ee),Ct=$c(rt,rt),Gt=$c(rt,gt),$t=$c(gt,gt),Zt=$c(Mt,rt),mn=$c(Mt,gt),xn=Ct*$t-Gt*Gt,Rn=($t*Zt-Gt*mn)/xn,In=(Ct*mn-Gt*Zt)/xn,Kn=Ee.z*(1-Rn-In)+K.z*Rn+ze.z*In;if(isFinite(Kn))return Kn}return 1/0}for(var ir=1/0,ur=0,yr=D;ur<yr.length;ur+=1)ir=Math.min(ir,yr[ur].z);return ir}var Ep=Wi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Cp=Wi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Lp=Ec.VectorTileFeature.types,ad=Math.cos(Math.PI/180*37.5),od=Math.pow(2,14)/.5,Ao=function(A){var D=this;this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(K){return K.id}),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(K){D.gradients[K.id]={}}),this.layoutVertexArray=new at,this.layoutVertexArray2=new dt,this.indexArray=new Ae,this.programConfigurations=new Ca(A.layers,A.zoom),this.segments=new er,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(K){return K.isStateDependent()}).map(function(K){return K.id})};Ao.prototype.populate=function(A,D,K){this.hasPattern=Zi("line",this.layers,D);for(var he=this.layers[0].layout.get("line-sort-key"),Ee=[],ze=0,We=A;ze<We.length;ze+=1){var rt=We[ze],gt=rt.feature,Mt=rt.id,Ct=rt.index,Gt=rt.sourceLayerIndex,$t=this.layers[0]._featureFilter.needGeometry,Zt=oa(gt,$t);if(this.layers[0]._featureFilter.filter(new bi(this.zoom),Zt,K)){var mn=he?he.evaluate(Zt,{},K):void 0,xn={id:Mt,properties:gt.properties,type:gt.type,sourceLayerIndex:Gt,index:Ct,geometry:$t?Zt.geometry:gs(gt),patterns:{},sortKey:mn};Ee.push(xn)}}he&&Ee.sort(function(Nr,Ur){return Nr.sortKey-Ur.sortKey});for(var Rn=0,In=Ee;Rn<In.length;Rn+=1){var Yn=In[Rn],ir=Yn.geometry,ur=Yn.index,yr=Yn.sourceLayerIndex;if(this.hasPattern){var Rr=lu("line",this.layers,Yn,this.zoom,D);this.patternFeatures.push(Rr)}else this.addFeature(Yn,ir,ur,K,{});D.featureIndex.insert(A[ur].feature,ir,ur,yr,this.index)}},Ao.prototype.update=function(A,D,K){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,D,this.stateDependentLayers,K)},Ao.prototype.addFeatures=function(A,D,K){for(var he=0,Ee=this.patternFeatures;he<Ee.length;he+=1){var ze=Ee[he];this.addFeature(ze,ze.geometry,ze.index,D,K)}},Ao.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ao.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ao.prototype.upload=function(A){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=A.createVertexBuffer(this.layoutVertexArray2,Cp)),this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Ep),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},Ao.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ao.prototype.lineFeatureClips=function(A){if(A.properties&&A.properties.hasOwnProperty("mapbox_clip_start")&&A.properties.hasOwnProperty("mapbox_clip_end"))return{start:+A.properties.mapbox_clip_start,end:+A.properties.mapbox_clip_end}},Ao.prototype.addFeature=function(A,D,K,he,Ee){var ze=this.layers[0].layout,We=ze.get("line-join").evaluate(A,{}),rt=ze.get("line-cap"),gt=ze.get("line-miter-limit"),Mt=ze.get("line-round-limit");this.lineClips=this.lineFeatureClips(A);for(var Ct=0,Gt=D;Ct<Gt.length;Ct+=1)this.addLine(Gt[Ct],A,We,rt,gt,Mt);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,K,Ee,he)},Ao.prototype.addLine=function(A,D,K,he,Ee,ze){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var We=0;We<A.length-1;We++)this.totalDistance+=A[We].dist(A[We+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var rt="Polygon"===Lp[D.type],gt=A.length;gt>=2&&A[gt-1].equals(A[gt-2]);)gt--;for(var Mt=0;Mt<gt-1&&A[Mt].equals(A[Mt+1]);)Mt++;if(!(gt<(rt?3:2))){"bevel"===K&&(Ee=1.05);var Ct,Gt=this.overscaling<=16?15*Ti/(512*this.overscaling):0,$t=this.segments.prepareSegment(10*gt,this.layoutVertexArray,this.indexArray),Zt=void 0,mn=void 0,xn=void 0,Rn=void 0;this.e1=this.e2=-1,rt&&(Rn=A[Mt].sub(Ct=A[gt-2])._unit()._perp());for(var In=Mt;In<gt;In++)if(!(mn=In===gt-1?rt?A[Mt+1]:void 0:A[In+1])||!A[In].equals(mn)){Rn&&(xn=Rn),Ct&&(Zt=Ct),Ct=A[In],Rn=mn?mn.sub(Ct)._unit()._perp():xn;var Yn=(xn=xn||Rn).add(Rn);0===Yn.x&&0===Yn.y||Yn._unit();var Kn=xn.x*Rn.x+xn.y*Rn.y,ir=Yn.x*Rn.x+Yn.y*Rn.y,ur=0!==ir?1/ir:1/0,yr=2*Math.sqrt(2-2*ir),Rr=ir<ad&&Zt&&mn,Er=xn.x*Rn.y-xn.y*Rn.x>0;if(Rr&&In>Mt){var Nr=Ct.dist(Zt);if(Nr>2*Gt){var Ur=Ct.sub(Ct.sub(Zt)._mult(Gt/Nr)._round());this.updateDistance(Zt,Ur),this.addCurrentVertex(Ur,xn,0,0,$t),Zt=Ur}}var ai=Zt&&mn,Kr=ai?K:rt?"butt":he;if(ai&&"round"===Kr&&(ur<ze?Kr="miter":ur<=2&&(Kr="fakeround")),"miter"===Kr&&ur>Ee&&(Kr="bevel"),"bevel"===Kr&&(ur>2&&(Kr="flipbevel"),ur<Ee&&(Kr="miter")),Zt&&this.updateDistance(Zt,Ct),"miter"===Kr)Yn._mult(ur),this.addCurrentVertex(Ct,Yn,0,0,$t);else if("flipbevel"===Kr){if(ur>100)Yn=Rn.mult(-1);else{var oi=ur*xn.add(Rn).mag()/xn.sub(Rn).mag();Yn._perp()._mult(oi*(Er?-1:1))}this.addCurrentVertex(Ct,Yn,0,0,$t),this.addCurrentVertex(Ct,Yn.mult(-1),0,0,$t)}else if("bevel"===Kr||"fakeround"===Kr){var ei=-Math.sqrt(ur*ur-1),Zr=Er?ei:0,Ei=Er?0:ei;if(Zt&&this.addCurrentVertex(Ct,xn,Zr,Ei,$t),"fakeround"===Kr)for(var ci=Math.round(180*yr/Math.PI/20),ea=1;ea<ci;ea++){var ni=ea/ci;if(.5!==ni){var Xi=ni-.5;ni+=ni*Xi*(ni-1)*((1.0904+Kn*(Kn*(3.55645-1.43519*Kn)-3.2452))*Xi*Xi+(.848013+Kn*(.215638*Kn-1.06021)))}var fa=Rn.sub(xn)._mult(ni)._add(xn)._unit()._mult(Er?-1:1);this.addHalfVertex(Ct,fa.x,fa.y,!1,Er,0,$t)}mn&&this.addCurrentVertex(Ct,Rn,-Zr,-Ei,$t)}else if("butt"===Kr)this.addCurrentVertex(Ct,Yn,0,0,$t);else if("square"===Kr){var Ki=Zt?1:-1;this.addCurrentVertex(Ct,Yn,Ki,Ki,$t)}else"round"===Kr&&(Zt&&(this.addCurrentVertex(Ct,xn,0,0,$t),this.addCurrentVertex(Ct,xn,1,1,$t,!0)),mn&&(this.addCurrentVertex(Ct,Rn,-1,-1,$t,!0),this.addCurrentVertex(Ct,Rn,0,0,$t)));if(Rr&&In<gt-1){var ji=Ct.dist(mn);if(ji>2*Gt){var sa=Ct.add(mn.sub(Ct)._mult(Gt/ji)._round());this.updateDistance(Ct,sa),this.addCurrentVertex(sa,Rn,0,0,$t),Ct=sa}}}}},Ao.prototype.addCurrentVertex=function(A,D,K,he,Ee,ze){void 0===ze&&(ze=!1);var gt=D.y*he-D.x,Mt=-D.y-D.x*he;this.addHalfVertex(A,D.x+D.y*K,D.y-D.x*K,ze,!1,K,Ee),this.addHalfVertex(A,gt,Mt,ze,!0,-he,Ee),this.distance>od/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(A,D,K,he,Ee,ze))},Ao.prototype.addHalfVertex=function(A,D,K,he,Ee,ze,We){var Mt=.5*(this.lineClips?this.scaledDistance*(od-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((A.x<<1)+(he?1:0),(A.y<<1)+(Ee?1:0),Math.round(63*D)+128,Math.round(63*K)+128,1+(0===ze?0:ze<0?-1:1)|(63&Mt)<<2,Mt>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var Gt=We.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Gt),We.primitiveLength++),Ee?this.e2=Gt:this.e1=Gt},Ao.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Ao.prototype.updateDistance=function(A,D){this.distance+=A.dist(D),this.updateScaledDistance()},Hr("LineBucket",Ao,{omit:["layers","patternFeatures"]});var Qc=new ya({"line-cap":new Vr(Qe.layout_line["line-cap"]),"line-join":new Yr(Qe.layout_line["line-join"]),"line-miter-limit":new Vr(Qe.layout_line["line-miter-limit"]),"line-round-limit":new Vr(Qe.layout_line["line-round-limit"]),"line-sort-key":new Yr(Qe.layout_line["line-sort-key"])}),Lc={paint:new ya({"line-opacity":new Yr(Qe.paint_line["line-opacity"]),"line-color":new Yr(Qe.paint_line["line-color"]),"line-translate":new Vr(Qe.paint_line["line-translate"]),"line-translate-anchor":new Vr(Qe.paint_line["line-translate-anchor"]),"line-width":new Yr(Qe.paint_line["line-width"]),"line-gap-width":new Yr(Qe.paint_line["line-gap-width"]),"line-offset":new Yr(Qe.paint_line["line-offset"]),"line-blur":new Yr(Qe.paint_line["line-blur"]),"line-dasharray":new Fo(Qe.paint_line["line-dasharray"]),"line-pattern":new To(Qe.paint_line["line-pattern"]),"line-gradient":new Bo(Qe.paint_line["line-gradient"])}),layout:Qc},Ip=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype.possiblyEvaluate=function(K,he){return he=new bi(Math.floor(he.zoom),{now:he.now,fadeDuration:he.fadeDuration,zoomHistory:he.zoomHistory,transition:he.transition}),A.prototype.possiblyEvaluate.call(this,K,he)},D.prototype.evaluate=function(K,he,Ee,ze){return he=c({},he,{zoom:Math.floor(he.zoom)}),A.prototype.evaluate.call(this,K,he,Ee,ze)},D}(Yr),sd=new Ip(Lc.paint.properties["line-width"].specification);sd.useIntegerZoom=!0;var Pp=function(A){function D(K){A.call(this,K,Lc),this.gradientVersion=0}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype._handleSpecialPaintPropertyUpdate=function(K){"line-gradient"===K&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof qr,this.gradientVersion=(this.gradientVersion+1)%n)},D.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},D.prototype.recalculate=function(K,he){A.prototype.recalculate.call(this,K,he),this.paint._values["line-floorwidth"]=sd.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,K)},D.prototype.createBucket=function(K){return new Ao(K)},D.prototype.queryRadius=function(K){var he=K,Ee=ld(au("line-width",this,he),au("line-gap-width",this,he)),ze=au("line-offset",this,he);return Ee/2+Math.abs(ze)+Tc(this.paint.get("line-translate"))},D.prototype.queryIntersectsFeature=function(K,he,Ee,ze,We,rt,gt){var Mt=kc(K,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),rt.angle,gt),Ct=gt/2*ld(this.paint.get("line-width").evaluate(he,Ee),this.paint.get("line-gap-width").evaluate(he,Ee)),Gt=this.paint.get("line-offset").evaluate(he,Ee);return Gt&&(ze=function($t,Zt){for(var mn=[],xn=new t(0,0),Rn=0;Rn<$t.length;Rn++){for(var In=$t[Rn],Yn=[],Kn=0;Kn<In.length;Kn++){var ur=In[Kn],yr=In[Kn+1],Rr=0===Kn?xn:ur.sub(In[Kn-1])._unit()._perp(),Er=Kn===In.length-1?xn:yr.sub(ur)._unit()._perp(),Nr=Rr._add(Er)._unit();Nr._mult(1/(Nr.x*Er.x+Nr.y*Er.y)),Yn.push(Nr._mult(Zt)._add(ur))}mn.push(Yn)}return mn}(ze,Gt*gt)),function($t,Zt,mn){for(var xn=0;xn<Zt.length;xn++){var Rn=Zt[xn];if($t.length>=3)for(var In=0;In<Rn.length;In++)if(iu($t,Rn[In]))return!0;if(Sf($t,Rn,mn))return!0}return!1}(Mt,ze,Ct)},D.prototype.isTileClipped=function(){return!0},D}(Hi);function ld(A,D){return D>0?D+2*A:A}var Op=Wi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Zs=Wi([{name:"a_projected_pos",components:3,type:"Float32"}],4),Lu=(Wi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Wi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),ud=(Wi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Wi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),ef=Wi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function bh(A,D,K){return A.sections.forEach(function(he){var Ee,We,rt;he.text=(Ee=he.text,We=K,"uppercase"===(rt=D.layout.get("text-transform").evaluate(We,{}))?Ee=Ee.toLocaleUpperCase():"lowercase"===rt&&(Ee=Ee.toLocaleLowerCase()),to.applyArabicShaping&&(Ee=to.applyArabicShaping(Ee)),Ee)}),A}Wi([{name:"triangle",components:3,type:"Uint16"}]),Wi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Wi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Wi([{type:"Float32",name:"offsetX"}]),Wi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Ic={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},Xa=24,_h=function(A,D,K,he,Ee){var ze,We,rt=8*Ee-he-1,gt=(1<<rt)-1,Mt=gt>>1,Ct=-7,Gt=K?Ee-1:0,$t=K?-1:1,Zt=A[D+Gt];for(Gt+=$t,ze=Zt&(1<<-Ct)-1,Zt>>=-Ct,Ct+=rt;Ct>0;ze=256*ze+A[D+Gt],Gt+=$t,Ct-=8);for(We=ze&(1<<-Ct)-1,ze>>=-Ct,Ct+=he;Ct>0;We=256*We+A[D+Gt],Gt+=$t,Ct-=8);if(0===ze)ze=1-Mt;else{if(ze===gt)return We?NaN:1/0*(Zt?-1:1);We+=Math.pow(2,he),ze-=Mt}return(Zt?-1:1)*We*Math.pow(2,ze-he)},tf=function(A,D,K,he,Ee,ze){var We,rt,gt,Mt=8*ze-Ee-1,Ct=(1<<Mt)-1,Gt=Ct>>1,$t=23===Ee?Math.pow(2,-24)-Math.pow(2,-77):0,Zt=he?0:ze-1,mn=he?1:-1,xn=D<0||0===D&&1/D<0?1:0;for(D=Math.abs(D),isNaN(D)||D===1/0?(rt=isNaN(D)?1:0,We=Ct):(We=Math.floor(Math.log(D)/Math.LN2),D*(gt=Math.pow(2,-We))<1&&(We--,gt*=2),(D+=We+Gt>=1?$t/gt:$t*Math.pow(2,1-Gt))*gt>=2&&(We++,gt/=2),We+Gt>=Ct?(rt=0,We=Ct):We+Gt>=1?(rt=(D*gt-1)*Math.pow(2,Ee),We+=Gt):(rt=D*Math.pow(2,Gt-1)*Math.pow(2,Ee),We=0));Ee>=8;A[K+Zt]=255&rt,Zt+=mn,rt/=256,Ee-=8);for(We=We<<Ee|rt,Mt+=Ee;Mt>0;A[K+Zt]=255&We,Zt+=mn,We/=256,Mt-=8);A[K+Zt-mn]|=128*xn},lc=ca;function ca(A){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(A)?A:new Uint8Array(A||0),this.pos=0,this.type=0,this.length=this.buf.length}ca.Varint=0,ca.Fixed64=1,ca.Bytes=2,ca.Fixed32=5;var wh=4294967296,Th=1/wh,kh=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Iu(A){return A.type===ca.Bytes?A.readVarint()+A.pos:A.pos+1}function cd(A,D,K){var he=D<=16383?1:D<=2097151?2:D<=268435455?3:Math.floor(Math.log(D)/(7*Math.LN2));K.realloc(he);for(var Ee=K.pos-1;Ee>=A;Ee--)K.buf[Ee+he]=K.buf[Ee]}function nf(A,D){for(var K=0;K<A.length;K++)D.writeVarint(A[K])}function fd(A,D){for(var K=0;K<A.length;K++)D.writeSVarint(A[K])}function Ah(A,D){for(var K=0;K<A.length;K++)D.writeFloat(A[K])}function hd(A,D){for(var K=0;K<A.length;K++)D.writeDouble(A[K])}function dd(A,D){for(var K=0;K<A.length;K++)D.writeBoolean(A[K])}function Rp(A,D){for(var K=0;K<A.length;K++)D.writeFixed32(A[K])}function pd(A,D){for(var K=0;K<A.length;K++)D.writeSFixed32(A[K])}function Dp(A,D){for(var K=0;K<A.length;K++)D.writeFixed64(A[K])}function zp(A,D){for(var K=0;K<A.length;K++)D.writeSFixed64(A[K])}function zf(A,D){return(A[D]|A[D+1]<<8|A[D+2]<<16)+16777216*A[D+3]}function Pc(A,D,K){A[K]=D,A[K+1]=D>>>8,A[K+2]=D>>>16,A[K+3]=D>>>24}function gd(A,D){return(A[D]|A[D+1]<<8|A[D+2]<<16)+(A[D+3]<<24)}ca.prototype={destroy:function(){this.buf=null},readFields:function(A,D,K){for(K=K||this.length;this.pos<K;){var he=this.readVarint(),Ee=he>>3,ze=this.pos;this.type=7&he,A(Ee,D,this),this.pos===ze&&this.skip(he)}return D},readMessage:function(A,D){return this.readFields(A,D,this.readVarint()+this.pos)},readFixed32:function(){var A=zf(this.buf,this.pos);return this.pos+=4,A},readSFixed32:function(){var A=gd(this.buf,this.pos);return this.pos+=4,A},readFixed64:function(){var A=zf(this.buf,this.pos)+zf(this.buf,this.pos+4)*wh;return this.pos+=8,A},readSFixed64:function(){var A=zf(this.buf,this.pos)+gd(this.buf,this.pos+4)*wh;return this.pos+=8,A},readFloat:function(){var A=_h(this.buf,this.pos,!0,23,4);return this.pos+=4,A},readDouble:function(){var A=_h(this.buf,this.pos,!0,52,8);return this.pos+=8,A},readVarint:function(A){var D,K,he=this.buf;return D=127&(K=he[this.pos++]),K<128?D:(D|=(127&(K=he[this.pos++]))<<7,K<128?D:(D|=(127&(K=he[this.pos++]))<<14,K<128?D:(D|=(127&(K=he[this.pos++]))<<21,K<128?D:function(Ee,ze,We){var rt,gt,Mt=We.buf;if(rt=(112&(gt=Mt[We.pos++]))>>4,gt<128||(rt|=(127&(gt=Mt[We.pos++]))<<3,gt<128)||(rt|=(127&(gt=Mt[We.pos++]))<<10,gt<128)||(rt|=(127&(gt=Mt[We.pos++]))<<17,gt<128)||(rt|=(127&(gt=Mt[We.pos++]))<<24,gt<128)||(rt|=(1&(gt=Mt[We.pos++]))<<31,gt<128))return function Pu(A,D,K){return K?4294967296*D+(A>>>0):4294967296*(D>>>0)+(A>>>0)}(Ee,rt,ze);throw new Error("Expected varint not more than 10 bytes")}(D|=(15&(K=he[this.pos]))<<28,A,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var A=this.readVarint();return A%2==1?(A+1)/-2:A/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var A=this.readVarint()+this.pos,D=this.pos;return this.pos=A,A-D>=12&&kh?kh.decode(this.buf.subarray(D,A)):function(K,he,Ee){for(var ze="",We=he;We<Ee;){var rt,gt,Mt,Ct=K[We],Gt=null,$t=Ct>239?4:Ct>223?3:Ct>191?2:1;if(We+$t>Ee)break;1===$t?Ct<128&&(Gt=Ct):2===$t?128==(192&(rt=K[We+1]))&&(Gt=(31&Ct)<<6|63&rt)<=127&&(Gt=null):3===$t?(gt=K[We+2],128==(192&(rt=K[We+1]))&&128==(192&gt)&&((Gt=(15&Ct)<<12|(63&rt)<<6|63&gt)<=2047||Gt>=55296&&Gt<=57343)&&(Gt=null)):4===$t&&(gt=K[We+2],Mt=K[We+3],128==(192&(rt=K[We+1]))&&128==(192&gt)&&128==(192&Mt)&&((Gt=(15&Ct)<<18|(63&rt)<<12|(63&gt)<<6|63&Mt)<=65535||Gt>=1114112)&&(Gt=null)),null===Gt?(Gt=65533,$t=1):Gt>65535&&(Gt-=65536,ze+=String.fromCharCode(Gt>>>10&1023|55296),Gt=56320|1023&Gt),ze+=String.fromCharCode(Gt),We+=$t}return ze}(this.buf,D,A)},readBytes:function(){var A=this.readVarint()+this.pos,D=this.buf.subarray(this.pos,A);return this.pos=A,D},readPackedVarint:function(A,D){if(this.type!==ca.Bytes)return A.push(this.readVarint(D));var K=Iu(this);for(A=A||[];this.pos<K;)A.push(this.readVarint(D));return A},readPackedSVarint:function(A){if(this.type!==ca.Bytes)return A.push(this.readSVarint());var D=Iu(this);for(A=A||[];this.pos<D;)A.push(this.readSVarint());return A},readPackedBoolean:function(A){if(this.type!==ca.Bytes)return A.push(this.readBoolean());var D=Iu(this);for(A=A||[];this.pos<D;)A.push(this.readBoolean());return A},readPackedFloat:function(A){if(this.type!==ca.Bytes)return A.push(this.readFloat());var D=Iu(this);for(A=A||[];this.pos<D;)A.push(this.readFloat());return A},readPackedDouble:function(A){if(this.type!==ca.Bytes)return A.push(this.readDouble());var D=Iu(this);for(A=A||[];this.pos<D;)A.push(this.readDouble());return A},readPackedFixed32:function(A){if(this.type!==ca.Bytes)return A.push(this.readFixed32());var D=Iu(this);for(A=A||[];this.pos<D;)A.push(this.readFixed32());return A},readPackedSFixed32:function(A){if(this.type!==ca.Bytes)return A.push(this.readSFixed32());var D=Iu(this);for(A=A||[];this.pos<D;)A.push(this.readSFixed32());return A},readPackedFixed64:function(A){if(this.type!==ca.Bytes)return A.push(this.readFixed64());var D=Iu(this);for(A=A||[];this.pos<D;)A.push(this.readFixed64());return A},readPackedSFixed64:function(A){if(this.type!==ca.Bytes)return A.push(this.readSFixed64());var D=Iu(this);for(A=A||[];this.pos<D;)A.push(this.readSFixed64());return A},skip:function(A){var D=7&A;if(D===ca.Varint)for(;this.buf[this.pos++]>127;);else if(D===ca.Bytes)this.pos=this.readVarint()+this.pos;else if(D===ca.Fixed32)this.pos+=4;else{if(D!==ca.Fixed64)throw new Error("Unimplemented type: "+D);this.pos+=8}},writeTag:function(A,D){this.writeVarint(A<<3|D)},realloc:function(A){for(var D=this.length||16;D<this.pos+A;)D*=2;if(D!==this.length){var K=new Uint8Array(D);K.set(this.buf),this.buf=K,this.length=D}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(A){this.realloc(4),Pc(this.buf,A,this.pos),this.pos+=4},writeSFixed32:function(A){this.realloc(4),Pc(this.buf,A,this.pos),this.pos+=4},writeFixed64:function(A){this.realloc(8),Pc(this.buf,-1&A,this.pos),Pc(this.buf,Math.floor(A*Th),this.pos+4),this.pos+=8},writeSFixed64:function(A){this.realloc(8),Pc(this.buf,-1&A,this.pos),Pc(this.buf,Math.floor(A*Th),this.pos+4),this.pos+=8},writeVarint:function(A){(A=+A||0)>268435455||A<0?function(D,K){var he,Ee,ze,rt;if(D>=0?(he=D%4294967296|0,Ee=D/4294967296|0):(Ee=~(-D/4294967296),4294967295^(he=~(-D%4294967296))?he=he+1|0:(he=0,Ee=Ee+1|0)),D>=0x10000000000000000||D<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");K.realloc(10),ze=he,(rt=K).buf[rt.pos++]=127&ze|128,ze>>>=7,rt.buf[rt.pos++]=127&ze|128,ze>>>=7,rt.buf[rt.pos++]=127&ze|128,ze>>>=7,rt.buf[rt.pos++]=127&ze|128,rt.buf[rt.pos]=127&(ze>>>=7),function(ze,We){var rt=(7&ze)<<4;We.buf[We.pos++]|=rt|((ze>>>=3)?128:0),ze&&(We.buf[We.pos++]=127&ze|((ze>>>=7)?128:0),ze&&(We.buf[We.pos++]=127&ze|((ze>>>=7)?128:0),ze&&(We.buf[We.pos++]=127&ze|((ze>>>=7)?128:0),ze&&(We.buf[We.pos++]=127&ze|((ze>>>=7)?128:0),ze&&(We.buf[We.pos++]=127&ze)))))}(Ee,K)}(A,this):(this.realloc(4),this.buf[this.pos++]=127&A|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=A>>>7&127))))},writeSVarint:function(A){this.writeVarint(A<0?2*-A-1:2*A)},writeBoolean:function(A){this.writeVarint(!!A)},writeString:function(A){A=String(A),this.realloc(4*A.length),this.pos++;var D=this.pos;this.pos=function(he,Ee,ze){for(var We,rt,gt=0;gt<Ee.length;gt++){if((We=Ee.charCodeAt(gt))>55295&&We<57344){if(!rt){We>56319||gt+1===Ee.length?(he[ze++]=239,he[ze++]=191,he[ze++]=189):rt=We;continue}if(We<56320){he[ze++]=239,he[ze++]=191,he[ze++]=189,rt=We;continue}We=rt-55296<<10|We-56320|65536,rt=null}else rt&&(he[ze++]=239,he[ze++]=191,he[ze++]=189,rt=null);We<128?he[ze++]=We:(We<2048?he[ze++]=We>>6|192:(We<65536?he[ze++]=We>>12|224:(he[ze++]=We>>18|240,he[ze++]=We>>12&63|128),he[ze++]=We>>6&63|128),he[ze++]=63&We|128)}return ze}(this.buf,A,this.pos);var K=this.pos-D;K>=128&&cd(D,K,this),this.pos=D-1,this.writeVarint(K),this.pos+=K},writeFloat:function(A){this.realloc(4),tf(this.buf,A,this.pos,!0,23,4),this.pos+=4},writeDouble:function(A){this.realloc(8),tf(this.buf,A,this.pos,!0,52,8),this.pos+=8},writeBytes:function(A){var D=A.length;this.writeVarint(D),this.realloc(D);for(var K=0;K<D;K++)this.buf[this.pos++]=A[K]},writeRawMessage:function(A,D){this.pos++;var K=this.pos;A(D,this);var he=this.pos-K;he>=128&&cd(K,he,this),this.pos=K-1,this.writeVarint(he),this.pos+=he},writeMessage:function(A,D,K){this.writeTag(A,ca.Bytes),this.writeRawMessage(D,K)},writePackedVarint:function(A,D){D.length&&this.writeMessage(A,nf,D)},writePackedSVarint:function(A,D){D.length&&this.writeMessage(A,fd,D)},writePackedBoolean:function(A,D){D.length&&this.writeMessage(A,dd,D)},writePackedFloat:function(A,D){D.length&&this.writeMessage(A,Ah,D)},writePackedDouble:function(A,D){D.length&&this.writeMessage(A,hd,D)},writePackedFixed32:function(A,D){D.length&&this.writeMessage(A,Rp,D)},writePackedSFixed32:function(A,D){D.length&&this.writeMessage(A,pd,D)},writePackedFixed64:function(A,D){D.length&&this.writeMessage(A,Dp,D)},writePackedSFixed64:function(A,D){D.length&&this.writeMessage(A,zp,D)},writeBytesField:function(A,D){this.writeTag(A,ca.Bytes),this.writeBytes(D)},writeFixed32Field:function(A,D){this.writeTag(A,ca.Fixed32),this.writeFixed32(D)},writeSFixed32Field:function(A,D){this.writeTag(A,ca.Fixed32),this.writeSFixed32(D)},writeFixed64Field:function(A,D){this.writeTag(A,ca.Fixed64),this.writeFixed64(D)},writeSFixed64Field:function(A,D){this.writeTag(A,ca.Fixed64),this.writeSFixed64(D)},writeVarintField:function(A,D){this.writeTag(A,ca.Varint),this.writeVarint(D)},writeSVarintField:function(A,D){this.writeTag(A,ca.Varint),this.writeSVarint(D)},writeStringField:function(A,D){this.writeTag(A,ca.Bytes),this.writeString(D)},writeFloatField:function(A,D){this.writeTag(A,ca.Fixed32),this.writeFloat(D)},writeDoubleField:function(A,D){this.writeTag(A,ca.Fixed64),this.writeDouble(D)},writeBooleanField:function(A,D){this.writeVarintField(A,!!D)}};var Mh=3;function Fp(A,D,K){1===A&&K.readMessage(md,D)}function md(A,D,K){if(3===A){var he=K.readMessage(Bp,{}),We=he.width,rt=he.height,gt=he.left,Mt=he.top,Ct=he.advance;D.push({id:he.id,bitmap:new qu({width:We+2*Mh,height:rt+2*Mh},he.bitmap),metrics:{width:We,height:rt,left:gt,top:Mt,advance:Ct}})}}function Bp(A,D,K){1===A?D.id=K.readVarint():2===A?D.bitmap=K.readBytes():3===A?D.width=K.readVarint():4===A?D.height=K.readVarint():5===A?D.left=K.readSVarint():6===A?D.top=K.readSVarint():7===A&&(D.advance=K.readVarint())}var vd=Mh;function Ou(A){for(var D=0,K=0,he=0,Ee=A;he<Ee.length;he+=1){var ze=Ee[he];D+=ze.w*ze.h,K=Math.max(K,ze.w)}A.sort(function(xn,Rn){return Rn.h-xn.h});for(var We=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(D/.95)),K),h:1/0}],rt=0,gt=0,Mt=0,Ct=A;Mt<Ct.length;Mt+=1)for(var Gt=Ct[Mt],$t=We.length-1;$t>=0;$t--){var Zt=We[$t];if(!(Gt.w>Zt.w||Gt.h>Zt.h)){if(Gt.x=Zt.x,Gt.y=Zt.y,gt=Math.max(gt,Gt.y+Gt.h),rt=Math.max(rt,Gt.x+Gt.w),Gt.w===Zt.w&&Gt.h===Zt.h){var mn=We.pop();$t<We.length&&(We[$t]=mn)}else Gt.h===Zt.h?(Zt.x+=Gt.w,Zt.w-=Gt.w):Gt.w===Zt.w?(Zt.y+=Gt.h,Zt.h-=Gt.h):(We.push({x:Zt.x+Gt.w,y:Zt.y,w:Zt.w-Gt.w,h:Gt.h}),Zt.y+=Gt.h,Zt.h-=Gt.h);break}}return{w:rt,h:gt,fill:D/(rt*gt)||0}}var Oc=function(A,D){var K=D.pixelRatio,he=D.version,Ee=D.stretchX,ze=D.stretchY,We=D.content;this.paddedRect=A,this.pixelRatio=K,this.stretchX=Ee,this.stretchY=ze,this.content=We,this.version=he},Wu={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Wu.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Wu.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Wu.tlbr.get=function(){return this.tl.concat(this.br)},Wu.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Oc.prototype,Wu);var rf=function(A,D){var K={},he={};this.haveRenderCallbacks=[];var Ee=[];this.addImages(A,K,Ee),this.addImages(D,he,Ee);var ze=Ou(Ee),gt=new Za({width:ze.w||1,height:ze.h||1});for(var Mt in A){var Ct=A[Mt],Gt=K[Mt].paddedRect;Za.copy(Ct.data,gt,{x:0,y:0},{x:Gt.x+1,y:Gt.y+1},Ct.data)}for(var $t in D){var Zt=D[$t],mn=he[$t].paddedRect,xn=mn.x+1,Rn=mn.y+1,In=Zt.data.width,Yn=Zt.data.height;Za.copy(Zt.data,gt,{x:0,y:0},{x:xn,y:Rn},Zt.data),Za.copy(Zt.data,gt,{x:0,y:Yn-1},{x:xn,y:Rn-1},{width:In,height:1}),Za.copy(Zt.data,gt,{x:0,y:0},{x:xn,y:Rn+Yn},{width:In,height:1}),Za.copy(Zt.data,gt,{x:In-1,y:0},{x:xn-1,y:Rn},{width:1,height:Yn}),Za.copy(Zt.data,gt,{x:0,y:0},{x:xn+In,y:Rn},{width:1,height:Yn})}this.image=gt,this.iconPositions=K,this.patternPositions=he};rf.prototype.addImages=function(A,D,K){for(var he in A){var Ee=A[he],ze={x:0,y:0,w:Ee.data.width+2,h:Ee.data.height+2};K.push(ze),D[he]=new Oc(ze,Ee),Ee.hasRenderCallback&&this.haveRenderCallbacks.push(he)}},rf.prototype.patchUpdatedImages=function(A,D){for(var K in A.dispatchRenderCallbacks(this.haveRenderCallbacks),A.updatedImages)this.patchUpdatedImage(this.iconPositions[K],A.getImage(K),D),this.patchUpdatedImage(this.patternPositions[K],A.getImage(K),D)},rf.prototype.patchUpdatedImage=function(A,D,K){if(A&&D&&A.version!==D.version){A.version=D.version;var he=A.tl;K.update(D.data,void 0,{x:he[0],y:he[1]})}},Hr("ImagePosition",Oc),Hr("ImageAtlas",rf);var Mo={horizontal:1,vertical:2,horizontalOnly:3},vl=function(){this.scale=1,this.fontStack="",this.imageName=null};vl.forText=function(A,D){var K=new vl;return K.scale=A||1,K.fontStack=D,K},vl.forImage=function(A){var D=new vl;return D.imageName=A,D};var Pi=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Rc(A,D,K,he,Ee,ze,We,rt,gt,Mt,Ct,Gt,$t,Zt,mn,xn){var Rn,In=Pi.fromFeature(A,Ee);Gt===Mo.vertical&&In.verticalizePunctuation();var Yn=to.processBidirectionalText,Kn=to.processStyledBidirectionalText;if(Yn&&1===In.sections.length){Rn=[];for(var ir=0,ur=Yn(In.toString(),ui(In,Mt,ze,D,he,Zt,mn));ir<ur.length;ir+=1){var yr=ur[ir],Rr=new Pi;Rr.text=yr,Rr.sections=In.sections;for(var Er=0;Er<yr.length;Er++)Rr.sectionIndex.push(0);Rn.push(Rr)}}else if(Kn){Rn=[];for(var Nr=0,Ur=Kn(In.text,In.sectionIndex,ui(In,Mt,ze,D,he,Zt,mn));Nr<Ur.length;Nr+=1){var ai=Ur[Nr],Kr=new Pi;Kr.text=ai[0],Kr.sectionIndex=ai[1],Kr.sections=In.sections,Rn.push(Kr)}}else Rn=function(Zr,Ei){for(var ci=[],ea=Zr.text,ni=0,Xi=0,fa=Ei;Xi<fa.length;Xi+=1){var Ki=fa[Xi];ci.push(Zr.substring(ni,Ki)),ni=Ki}return ni<ea.length&&ci.push(Zr.substring(ni,ea.length)),ci}(In,ui(In,Mt,ze,D,he,Zt,mn));var oi=[],ei={positionedLines:oi,text:In.toString(),top:Ct[1],bottom:Ct[1],left:Ct[0],right:Ct[0],writingMode:Gt,iconsInText:!1,verticalizable:!1};return function(Zr,Ei,ci,ea,ni,Xi,fa,Ki,ji,sa,Va,ba){for(var lo=0,So=-17,po=0,Vo=0,go="right"===Ki?1:"left"===Ki?0:.5,Ga=0,mo=0,uo=ni;mo<uo.length;mo+=1){var io=uo[mo];io.trim();var gi=io.getMaxScale(),Oi=(gi-1)*Xa,Ia={positionedGlyphs:[],lineOffset:0};Zr.positionedLines[Ga]=Ia;var la=Ia.positionedGlyphs,Sa=0;if(io.length()){for(var ha=0;ha<io.length();ha++){var Ui=io.getSection(ha),Pa=io.getSectionIndex(ha),is=io.getCharCode(ha),Rs=0,Go=null,yl=null,en=null,Ha=Xa,xl=!(ji===Mo.horizontal||!Va&&!ds(is)||Va&&(Ff[is]||Ys(is)));if(Ui.imageName){var Xs=ea[Ui.imageName];if(!Xs)continue;en=Ui.imageName,Zr.iconsInText=Zr.iconsInText||!0,yl=Xs.paddedRect;var Ks=Xs.displaySize;Ui.scale=Ui.scale*Xa/ba,Rs=Oi+(Xa-Ks[1]*Ui.scale),Ha=(Go={width:Ks[0],height:Ks[1],left:1,top:-vd,advance:xl?Ks[1]:Ks[0]}).advance;var Bu=xl?Ks[0]*Ui.scale-Xa*gi:Ks[1]*Ui.scale-Xa*gi;Bu>0&&Bu>Sa&&(Sa=Bu)}else{var Yf=ci[Ui.fontStack],fc=Yf&&Yf[is];if(fc&&fc.rect)yl=fc.rect,Go=fc.metrics;else{var Vi=Ei[Ui.fontStack],df=Vi&&Vi[is];if(!df)continue;Go=df.metrics}Rs=(gi-Ui.scale)*Xa}xl?(Zr.verticalizable=!0,la.push({glyph:is,imageName:en,x:lo,y:So+Rs,vertical:xl,scale:Ui.scale,fontStack:Ui.fontStack,sectionIndex:Pa,metrics:Go,rect:yl}),lo+=Ha*Ui.scale+sa):(la.push({glyph:is,imageName:en,x:lo,y:So+Rs,vertical:xl,scale:Ui.scale,fontStack:Ui.fontStack,sectionIndex:Pa,metrics:Go,rect:yl}),lo+=Go.advance*Ui.scale+sa)}0!==la.length&&(po=Math.max(lo-sa,po),Np(la,0,la.length-1,go,Sa)),lo=0;var fu=Xi*gi+Sa;Ia.lineOffset=Math.max(Sa,Oi),So+=fu,Vo=Math.max(fu,Vo),++Ga}else So+=Xi,++Ga}var hc=So- -17,Oa=Sh(fa),Rh=Oa.horizontalAlign,gf=Oa.verticalAlign;(function(Zf,hu,Ds,Ku,du,Xf,Vc,Kf,Jf){var vf,mf=(hu-Ds)*du;vf=Xf!==Vc?-Kf*Ku- -17:(-Ku*Jf+.5)*Vc;for(var dc=0,yf=Zf;dc<yf.length;dc+=1)for(var pc=0,gc=yf[dc].positionedGlyphs;pc<gc.length;pc+=1){var xf=gc[pc];xf.x+=mf,xf.y+=vf}})(Zr.positionedLines,go,Rh,gf,po,Vo,Xi,hc,ni.length),Zr.top+=-gf*hc,Zr.bottom=Zr.top+hc,Zr.left+=-Rh*po,Zr.right=Zr.left+po}(ei,D,K,he,Rn,We,rt,gt,Gt,Mt,$t,xn),!function(Zr){for(var Ei=0,ci=Zr;Ei<ci.length;Ei+=1)if(0!==ci[Ei].positionedGlyphs.length)return!1;return!0}(oi)&&ei}Pi.fromFeature=function(A,D){for(var K=new Pi,he=0;he<A.sections.length;he++){var Ee=A.sections[he];Ee.image?K.addImageSection(Ee):K.addTextSection(Ee,D)}return K},Pi.prototype.length=function(){return this.text.length},Pi.prototype.getSection=function(A){return this.sections[this.sectionIndex[A]]},Pi.prototype.getSectionIndex=function(A){return this.sectionIndex[A]},Pi.prototype.getCharCode=function(A){return this.text.charCodeAt(A)},Pi.prototype.verticalizePunctuation=function(){this.text=function(A){for(var D="",K=0;K<A.length;K++){var he=A.charCodeAt(K+1)||null,Ee=A.charCodeAt(K-1)||null;he&&za(he)&&!Ic[A[K+1]]||Ee&&za(Ee)&&!Ic[A[K-1]]||!Ic[A[K]]?D+=A[K]:D+=Ic[A[K]]}return D}(this.text)},Pi.prototype.trim=function(){for(var A=0,D=0;D<this.text.length&&Ff[this.text.charCodeAt(D)];D++)A++;for(var K=this.text.length,he=this.text.length-1;he>=0&&he>=A&&Ff[this.text.charCodeAt(he)];he--)K--;this.text=this.text.substring(A,K),this.sectionIndex=this.sectionIndex.slice(A,K)},Pi.prototype.substring=function(A,D){var K=new Pi;return K.text=this.text.substring(A,D),K.sectionIndex=this.sectionIndex.slice(A,D),K.sections=this.sections,K},Pi.prototype.toString=function(){return this.text},Pi.prototype.getMaxScale=function(){var A=this;return this.sectionIndex.reduce(function(D,K){return Math.max(D,A.sections[K].scale)},0)},Pi.prototype.addTextSection=function(A,D){this.text+=A.text,this.sections.push(vl.forText(A.scale,A.fontStack||D));for(var K=this.sections.length-1,he=0;he<A.text.length;++he)this.sectionIndex.push(K)},Pi.prototype.addImageSection=function(A){var D=A.image?A.image.name:"";if(0!==D.length){var K=this.getNextImageSectionCharCode();K?(this.text+=String.fromCharCode(K),this.sections.push(vl.forImage(D)),this.sectionIndex.push(this.sections.length-1)):E("Reached maximum number of images 6401")}else E("Can't add FormattedSection with an empty image.")},Pi.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Ff={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Os={};function Ru(A,D,K,he,Ee,ze){if(D.imageName){var We=he[D.imageName];return We?We.displaySize[0]*D.scale*Xa/ze+Ee:0}var rt=K[D.fontStack],gt=rt&&rt[A];return gt?gt.metrics.advance*D.scale+Ee:0}function rs(A,D,K,he){var Ee=Math.pow(A-D,2);return he?A<D?Ee/2:2*Ee:Ee+Math.abs(K)*K}function Bf(A,D,K){var he=0;return 10===A&&(he-=1e4),K&&(he+=150),40!==A&&65288!==A||(he+=50),41!==D&&65289!==D||(he+=50),he}function yd(A,D,K,he,Ee,ze){for(var We=null,rt=rs(D,K,Ee,ze),gt=0,Mt=he;gt<Mt.length;gt+=1){var Ct=Mt[gt],Gt=rs(D-Ct.x,K,Ee,ze)+Ct.badness;Gt<=rt&&(We=Ct,rt=Gt)}return{index:A,x:D,priorBreak:We,badness:rt}}function xd(A){return A?xd(A.priorBreak).concat(A.index):[]}function ui(A,D,K,he,Ee,ze,We){if("point"!==ze)return[];if(!A)return[];for(var rt=[],gt=function(Rn,In,Yn,Kn,ir,ur){for(var yr=0,Rr=0;Rr<Rn.length();Rr++){var Er=Rn.getSection(Rr);yr+=Ru(Rn.getCharCode(Rr),Er,Kn,ir,In,ur)}return yr/Math.max(1,Math.ceil(yr/Yn))}(A,D,K,he,Ee,We),Mt=A.text.indexOf("\u200b")>=0,Ct=0,Gt=0;Gt<A.length();Gt++){var $t=A.getSection(Gt),Zt=A.getCharCode(Gt);if(Ff[Zt]||(Ct+=Ru(Zt,$t,he,Ee,D,We)),Gt<A.length()-1){var mn=!((xn=Zt)<11904||!(Or["Bopomofo Extended"](xn)||Or.Bopomofo(xn)||Or["CJK Compatibility Forms"](xn)||Or["CJK Compatibility Ideographs"](xn)||Or["CJK Compatibility"](xn)||Or["CJK Radicals Supplement"](xn)||Or["CJK Strokes"](xn)||Or["CJK Symbols and Punctuation"](xn)||Or["CJK Unified Ideographs Extension A"](xn)||Or["CJK Unified Ideographs"](xn)||Or["Enclosed CJK Letters and Months"](xn)||Or["Halfwidth and Fullwidth Forms"](xn)||Or.Hiragana(xn)||Or["Ideographic Description Characters"](xn)||Or["Kangxi Radicals"](xn)||Or["Katakana Phonetic Extensions"](xn)||Or.Katakana(xn)||Or["Vertical Forms"](xn)||Or["Yi Radicals"](xn)||Or["Yi Syllables"](xn)));(Os[Zt]||mn||$t.imageName)&&rt.push(yd(Gt+1,Ct,gt,rt,Bf(Zt,A.getCharCode(Gt+1),mn&&Mt),!1))}}var xn;return xd(yd(A.length(),Ct,gt,rt,0,!0))}function Sh(A){var D=.5,K=.5;switch(A){case"right":case"top-right":case"bottom-right":D=1;break;case"left":case"top-left":case"bottom-left":D=0}switch(A){case"bottom":case"bottom-right":case"bottom-left":K=1;break;case"top":case"top-right":case"top-left":K=0}return{horizontalAlign:D,verticalAlign:K}}function Np(A,D,K,he,Ee){if(he||Ee)for(var ze=A[K],rt=(A[K].x+ze.metrics.advance*ze.scale)*he,gt=D;gt<=K;gt++)A[gt].x-=rt,A[gt].y+=Ee}function bd(A,D,K,he,Ee,ze){var We,rt=A.image;if(rt.content){var gt=rt.content,Mt=rt.pixelRatio||1;We=[gt[0]/Mt,gt[1]/Mt,rt.displaySize[0]-gt[2]/Mt,rt.displaySize[1]-gt[3]/Mt]}var Ct,Gt,$t,Zt,mn=D.left*ze,xn=D.right*ze;"width"===K||"both"===K?(Zt=Ee[0]+mn-he[3],Gt=Ee[0]+xn+he[1]):Gt=(Zt=Ee[0]+(mn+xn-rt.displaySize[0])/2)+rt.displaySize[0];var Rn=D.top*ze,In=D.bottom*ze;return"height"===K||"both"===K?(Ct=Ee[1]+Rn-he[0],$t=Ee[1]+In+he[2]):$t=(Ct=Ee[1]+(Rn+In-rt.displaySize[1])/2)+rt.displaySize[1],{image:rt,top:Ct,right:Gt,bottom:$t,left:Zt,collisionPadding:We}}Os[10]=!0,Os[32]=!0,Os[38]=!0,Os[40]=!0,Os[41]=!0,Os[43]=!0,Os[45]=!0,Os[47]=!0,Os[173]=!0,Os[183]=!0,Os[8203]=!0,Os[8208]=!0,Os[8211]=!0,Os[8231]=!0;var Yu=function(A){function D(K,he,Ee,ze){A.call(this,K,he),this.angle=Ee,void 0!==ze&&(this.segment=ze)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype.clone=function(){return new D(this.x,this.y,this.angle,this.segment)},D}(t);Hr("Anchor",Yu);var Gl=128;function of(A,D){var K=D.expression;if("constant"===K.kind)return{kind:"constant",layoutSize:K.evaluate(new bi(A+1))};if("source"===K.kind)return{kind:"source"};for(var he=K.zoomStops,Ee=K.interpolationType,ze=0;ze<he.length&&he[ze]<=A;)ze++;for(var We=ze=Math.max(0,ze-1);We<he.length&&he[We]<A+1;)We++;We=Math.min(he.length-1,We);var rt=he[ze],gt=he[We];return"composite"===K.kind?{kind:"composite",minZoom:rt,maxZoom:gt,interpolationType:Ee}:{kind:"camera",minZoom:rt,maxZoom:gt,minSize:K.evaluate(new bi(rt)),maxSize:K.evaluate(new bi(gt)),interpolationType:Ee}}function _d(A,D,K){var he=D.uSize,ze=K.lowerSize;return"source"===A.kind?ze/Gl:"composite"===A.kind?Qr(ze/Gl,K.upperSize/Gl,D.uSizeT):he}function wd(A,D){var K=0,he=0;if("constant"===A.kind)he=A.layoutSize;else if("source"!==A.kind){var Ee=A.interpolationType,rt=Ee?u(wa.interpolationFactor(Ee,D,A.minZoom,A.maxZoom),0,1):0;"camera"===A.kind?he=Qr(A.minSize,A.maxSize,rt):K=rt}return{uSizeT:K,uSize:he}}var jp=Object.freeze({__proto__:null,getSizeData:of,evaluateSizeForFeature:_d,evaluateSizeForZoom:wd,SIZE_PACK_FACTOR:Gl});function Td(A,D,K,he,Ee){if(void 0===D.segment)return!0;for(var ze=D,We=D.segment+1,rt=0;rt>-K/2;){if(--We<0)return!1;rt-=A[We].dist(ze),ze=A[We]}rt+=A[We].dist(A[We+1]),We++;for(var gt=[],Mt=0;rt<K/2;){var Gt=A[We],$t=A[We+1];if(!$t)return!1;var Zt=A[We-1].angleTo(Gt)-Gt.angleTo($t);for(Zt=Math.abs((Zt+3*Math.PI)%(2*Math.PI)-Math.PI),gt.push({distance:rt,angleDelta:Zt}),Mt+=Zt;rt-gt[0].distance>he;)Mt-=gt.shift().angleDelta;if(Mt>Ee)return!1;We++,rt+=Gt.dist($t)}return!0}function kd(A){for(var D=0,K=0;K<A.length-1;K++)D+=A[K].dist(A[K+1]);return D}function Ad(A,D,K){return A?.6*D*K:0}function Md(A,D){return Math.max(A?A.right-A.left:0,D?D.right-D.left:0)}function Sd(A,D,K,he,Ee,ze){for(var We=Ad(K,Ee,ze),rt=Md(K,he)*ze,gt=0,Mt=kd(A)/2,Ct=0;Ct<A.length-1;Ct++){var Gt=A[Ct],$t=A[Ct+1],Zt=Gt.dist($t);if(gt+Zt>Mt){var mn=(Mt-gt)/Zt,xn=Qr(Gt.x,$t.x,mn),Rn=Qr(Gt.y,$t.y,mn),In=new Yu(xn,Rn,$t.angleTo(Gt),Ct);return In._round(),!We||Td(A,In,rt,We,D)?In:void 0}gt+=Zt}}function Up(A,D,K,he,Ee,ze,We,rt,gt){var Mt=Ad(he,ze,We),Ct=Md(he,Ee),Gt=Ct*We,$t=0===A[0].x||A[0].x===gt||0===A[0].y||A[0].y===gt;return D-Gt<D/4&&(D=Gt+D/4),Ed(A,$t?D/2*rt%D:(Ct/2+2*ze)*We*rt%D,D,Mt,K,Gt,$t,!1,gt)}function Ed(A,D,K,he,Ee,ze,We,rt,gt){for(var Mt=ze/2,Ct=kd(A),Gt=0,$t=D-K,Zt=[],mn=0;mn<A.length-1;mn++){for(var xn=A[mn],Rn=A[mn+1],In=xn.dist(Rn),Yn=Rn.angleTo(xn);$t+K<Gt+In;){var Kn=(($t+=K)-Gt)/In,ir=Qr(xn.x,Rn.x,Kn),ur=Qr(xn.y,Rn.y,Kn);if(ir>=0&&ir<gt&&ur>=0&&ur<gt&&$t-Mt>=0&&$t+Mt<=Ct){var yr=new Yu(ir,ur,Yn,mn);yr._round(),he&&!Td(A,yr,ze,he,Ee)||Zt.push(yr)}}Gt+=In}return rt||Zt.length||We||(Zt=Ed(A,Gt/2,K,he,Ee,ze,We,!0,gt)),Zt}function Nf(A,D,K,he,Ee){for(var ze=[],We=0;We<A.length;We++)for(var rt=A[We],gt=void 0,Mt=0;Mt<rt.length-1;Mt++){var Ct=rt[Mt],Gt=rt[Mt+1];Ct.x<D&&Gt.x<D||(Ct.x<D?Ct=new t(D,Ct.y+(D-Ct.x)/(Gt.x-Ct.x)*(Gt.y-Ct.y))._round():Gt.x<D&&(Gt=new t(D,Ct.y+(D-Ct.x)/(Gt.x-Ct.x)*(Gt.y-Ct.y))._round()),Ct.y<K&&Gt.y<K||(Ct.y<K?Ct=new t(Ct.x+(K-Ct.y)/(Gt.y-Ct.y)*(Gt.x-Ct.x),K)._round():Gt.y<K&&(Gt=new t(Ct.x+(K-Ct.y)/(Gt.y-Ct.y)*(Gt.x-Ct.x),K)._round()),Ct.x>=he&&Gt.x>=he||(Ct.x>=he?Ct=new t(he,Ct.y+(he-Ct.x)/(Gt.x-Ct.x)*(Gt.y-Ct.y))._round():Gt.x>=he&&(Gt=new t(he,Ct.y+(he-Ct.x)/(Gt.x-Ct.x)*(Gt.y-Ct.y))._round()),Ct.y>=Ee&&Gt.y>=Ee||(Ct.y>=Ee?Ct=new t(Ct.x+(Ee-Ct.y)/(Gt.y-Ct.y)*(Gt.x-Ct.x),Ee)._round():Gt.y>=Ee&&(Gt=new t(Ct.x+(Ee-Ct.y)/(Gt.y-Ct.y)*(Gt.x-Ct.x),Ee)._round()),gt&&Ct.equals(gt[gt.length-1])||ze.push(gt=[Ct]),gt.push(Gt)))))}return ze}var uu=1;function Cd(A,D,K,he){var Ee=[],ze=A.image,We=ze.pixelRatio,rt=ze.paddedRect.w-2*uu,gt=ze.paddedRect.h-2*uu,Mt=A.right-A.left,Ct=A.bottom-A.top,Gt=ze.stretchX||[[0,rt]],$t=ze.stretchY||[[0,gt]],Zt=function(Xi,fa){return Xi+fa[1]-fa[0]},mn=Gt.reduce(Zt,0),xn=$t.reduce(Zt,0),Rn=rt-mn,In=gt-xn,Yn=0,Kn=mn,ir=0,ur=xn,yr=0,Rr=Rn,Er=0,Nr=In;if(ze.content&&he){var Ur=ze.content;Yn=jf(Gt,0,Ur[0]),ir=jf($t,0,Ur[1]),Kn=jf(Gt,Ur[0],Ur[2]),ur=jf($t,Ur[1],Ur[3]),yr=Ur[0]-Yn,Er=Ur[1]-ir,Rr=Ur[2]-Ur[0]-Kn,Nr=Ur[3]-Ur[1]-ur}var ai=function(Xi,fa,Ki,ji){var sa=Dc(Xi.stretch-Yn,Kn,Mt,A.left),Va=Hl(Xi.fixed-yr,Rr,Xi.stretch,mn),ba=Dc(fa.stretch-ir,ur,Ct,A.top),lo=Hl(fa.fixed-Er,Nr,fa.stretch,xn),So=Dc(Ki.stretch-Yn,Kn,Mt,A.left),po=Hl(Ki.fixed-yr,Rr,Ki.stretch,mn),Vo=Dc(ji.stretch-ir,ur,Ct,A.top),go=Hl(ji.fixed-Er,Nr,ji.stretch,xn),Ga=new t(sa,ba),mo=new t(So,ba),uo=new t(So,Vo),io=new t(sa,Vo),gi=new t(Va/We,lo/We),Oi=new t(po/We,go/We),Ia=D*Math.PI/180;if(Ia){var la=Math.sin(Ia),Sa=Math.cos(Ia),ha=[Sa,-la,la,Sa];Ga._matMult(ha),mo._matMult(ha),io._matMult(ha),uo._matMult(ha)}var Ui=Xi.stretch+Xi.fixed,is=fa.stretch+fa.fixed;return{tl:Ga,tr:mo,bl:io,br:uo,tex:{x:ze.paddedRect.x+uu+Ui,y:ze.paddedRect.y+uu+is,w:Ki.stretch+Ki.fixed-Ui,h:ji.stretch+ji.fixed-is},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:gi,pixelOffsetBR:Oi,minFontScaleX:Rr/We/Mt,minFontScaleY:Nr/We/Ct,isSDF:K}};if(he&&(ze.stretchX||ze.stretchY))for(var Kr=Ld(Gt,Rn,mn),oi=Ld($t,In,xn),ei=0;ei<Kr.length-1;ei++)for(var Zr=Kr[ei],Ei=Kr[ei+1],ci=0;ci<oi.length-1;ci++)Ee.push(ai(Zr,oi[ci],Ei,oi[ci+1]));else Ee.push(ai({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:rt+1},{fixed:0,stretch:gt+1}));return Ee}function jf(A,D,K){for(var he=0,Ee=0,ze=A;Ee<ze.length;Ee+=1){var We=ze[Ee];he+=Math.max(D,Math.min(K,We[1]))-Math.max(D,Math.min(K,We[0]))}return he}function Ld(A,D,K){for(var he=[{fixed:-uu,stretch:0}],Ee=0,ze=A;Ee<ze.length;Ee+=1){var We=ze[Ee],rt=We[0],gt=We[1],Mt=he[he.length-1];he.push({fixed:rt-Mt.stretch,stretch:Mt.stretch}),he.push({fixed:rt-Mt.stretch,stretch:Mt.stretch+(gt-rt)})}return he.push({fixed:D+uu,stretch:K}),he}function Dc(A,D,K,he){return A/D*K+he}function Hl(A,D,K,he){return A-D*K/he}var zc=function(A,D,K,he,Ee,ze,We,rt,gt,Mt){if(this.boxStartIndex=A.length,gt){var Ct=ze.top,Gt=ze.bottom,$t=ze.collisionPadding;$t&&(Ct-=$t[1],Gt+=$t[3]);var Zt=Gt-Ct;Zt>0&&(Zt=Math.max(10,Zt),this.circleDiameter=Zt)}else{var mn=ze.top*We-rt,xn=ze.bottom*We+rt,Rn=ze.left*We-rt,In=ze.right*We+rt,Yn=ze.collisionPadding;if(Yn&&(Rn-=Yn[0]*We,mn-=Yn[1]*We,In+=Yn[2]*We,xn+=Yn[3]*We),Mt){var Kn=new t(Rn,mn),ir=new t(In,mn),ur=new t(Rn,xn),yr=new t(In,xn),Rr=Mt*Math.PI/180;Kn._rotate(Rr),ir._rotate(Rr),ur._rotate(Rr),yr._rotate(Rr),Rn=Math.min(Kn.x,ir.x,ur.x,yr.x),In=Math.max(Kn.x,ir.x,ur.x,yr.x),mn=Math.min(Kn.y,ir.y,ur.y,yr.y),xn=Math.max(Kn.y,ir.y,ur.y,yr.y)}A.emplaceBack(D.x,D.y,Rn,mn,In,xn,K,he,Ee)}this.boxEndIndex=A.length},sf=function(A,D){if(void 0===A&&(A=[]),void 0===D&&(D=Vp),this.data=A,this.length=this.data.length,this.compare=D,this.length>0)for(var K=(this.length>>1)-1;K>=0;K--)this._down(K)};function Vp(A,D){return A<D?-1:A>D?1:0}function Gp(A,D,K){void 0===D&&(D=1),void 0===K&&(K=!1);for(var he=1/0,Ee=1/0,ze=-1/0,We=-1/0,rt=A[0],gt=0;gt<rt.length;gt++){var Mt=rt[gt];(!gt||Mt.x<he)&&(he=Mt.x),(!gt||Mt.y<Ee)&&(Ee=Mt.y),(!gt||Mt.x>ze)&&(ze=Mt.x),(!gt||Mt.y>We)&&(We=Mt.y)}var $t=Math.min(ze-he,We-Ee),Zt=$t/2,mn=new sf([],Id);if(0===$t)return new t(he,Ee);for(var xn=he;xn<ze;xn+=$t)for(var Rn=Ee;Rn<We;Rn+=$t)mn.push(new Fc(xn+Zt,Rn+Zt,Zt,A));for(var In=function(ir){for(var ur=0,yr=0,Rr=0,Er=ir[0],Nr=0,Ur=Er.length,ai=Ur-1;Nr<Ur;ai=Nr++){var Kr=Er[Nr],oi=Er[ai],ei=Kr.x*oi.y-oi.x*Kr.y;yr+=(Kr.x+oi.x)*ei,Rr+=(Kr.y+oi.y)*ei,ur+=3*ei}return new Fc(yr/ur,Rr/ur,0,ir)}(A),Yn=mn.length;mn.length;){var Kn=mn.pop();(Kn.d>In.d||!In.d)&&(In=Kn,K&&console.log("found best %d after %d probes",Math.round(1e4*Kn.d)/1e4,Yn)),Kn.max-In.d<=D||(mn.push(new Fc(Kn.p.x-(Zt=Kn.h/2),Kn.p.y-Zt,Zt,A)),mn.push(new Fc(Kn.p.x+Zt,Kn.p.y-Zt,Zt,A)),mn.push(new Fc(Kn.p.x-Zt,Kn.p.y+Zt,Zt,A)),mn.push(new Fc(Kn.p.x+Zt,Kn.p.y+Zt,Zt,A)),Yn+=4)}return K&&(console.log("num probes: "+Yn),console.log("best distance: "+In.d)),In.p}function Id(A,D){return D.max-A.max}function Fc(A,D,K,he){this.p=new t(A,D),this.h=K,this.d=function(Ee,ze){for(var We=!1,rt=1/0,gt=0;gt<ze.length;gt++)for(var Mt=ze[gt],Ct=0,Gt=Mt.length,$t=Gt-1;Ct<Gt;$t=Ct++){var Zt=Mt[Ct],mn=Mt[$t];Zt.y>Ee.y!=mn.y>Ee.y&&Ee.x<(mn.x-Zt.x)*(Ee.y-Zt.y)/(mn.y-Zt.y)+Zt.x&&(We=!We),rt=Math.min(rt,uh(Ee,Zt,mn))}return(We?1:-1)*Math.sqrt(rt)}(this.p,he),this.max=this.d+this.h*Math.SQRT2}sf.prototype.push=function(A){this.data.push(A),this.length++,this._up(this.length-1)},sf.prototype.pop=function(){if(0!==this.length){var A=this.data[0],D=this.data.pop();return this.length--,this.length>0&&(this.data[0]=D,this._down(0)),A}},sf.prototype.peek=function(){return this.data[0]},sf.prototype._up=function(A){for(var D=this.data,K=this.compare,he=D[A];A>0;){var Ee=A-1>>1,ze=D[Ee];if(K(he,ze)>=0)break;D[A]=ze,A=Ee}D[A]=he},sf.prototype._down=function(A){for(var D=this.data,K=this.compare,he=this.length>>1,Ee=D[A];A<he;){var ze=1+(A<<1),We=D[ze],rt=ze+1;if(rt<this.length&&K(D[rt],We)<0&&(ze=rt,We=D[rt]),K(We,Ee)>=0)break;D[A]=We,A=ze}D[A]=Ee};var Uf=Number.POSITIVE_INFINITY;function Hp(A,D){return D[1]!==Uf?function(K,he,Ee){var ze=0,We=0;switch(he=Math.abs(he),Ee=Math.abs(Ee),K){case"top-right":case"top-left":case"top":We=Ee-7;break;case"bottom-right":case"bottom-left":case"bottom":We=7-Ee}switch(K){case"top-right":case"bottom-right":case"right":ze=-he;break;case"top-left":case"bottom-left":case"left":ze=he}return[ze,We]}(A,D[0],D[1]):function(K,he){var Ee=0,ze=0;he<0&&(he=0);var We=he/Math.sqrt(2);switch(K){case"top-right":case"top-left":ze=We-7;break;case"bottom-right":case"bottom-left":ze=7-We;break;case"bottom":ze=7-he;break;case"top":ze=he-7}switch(K){case"top-right":case"bottom-right":Ee=-We;break;case"top-left":case"bottom-left":Ee=We;break;case"left":Ee=he;break;case"right":Ee=-he}return[Ee,ze]}(A,D[0])}function Pd(A){switch(A){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var uc=32640;function Eh(A,D,K,he,Ee,ze,We,rt,gt,Mt,Ct,Gt,$t,Zt,mn){var xn=function(ir,ur,yr,Rr,Er,Nr,Ur,ai){for(var Kr=Rr.layout.get("text-rotate").evaluate(Nr,{})*Math.PI/180,oi=[],ei=0,Zr=ur.positionedLines;ei<Zr.length;ei+=1)for(var Ei=Zr[ei],ci=0,ea=Ei.positionedGlyphs;ci<ea.length;ci+=1){var ni=ea[ci];if(ni.rect){var Xi=ni.rect||{},fa=vd+1,Ki=!0,ji=1,sa=0,Va=(Er||ai)&&ni.vertical,ba=ni.metrics.advance*ni.scale/2;if(ai&&ur.verticalizable&&(sa=Ei.lineOffset/2-(ni.imageName?-(Xa-ni.metrics.width*ni.scale)/2:(ni.scale-1)*Xa)),ni.imageName){var po=Ur[ni.imageName];Ki=po.sdf,fa=1/(ji=po.pixelRatio)}var Vo=Er?[ni.x+ba,ni.y]:[0,0],go=Er?[0,0]:[ni.x+ba+yr[0],ni.y+yr[1]-sa],Ga=[0,0];Va&&(Ga=go,go=[0,0]);var mo=(ni.metrics.left-fa)*ni.scale-ba+go[0],uo=(-ni.metrics.top-fa)*ni.scale+go[1],io=mo+Xi.w*ni.scale/ji,gi=uo+Xi.h*ni.scale/ji,Oi=new t(mo,uo),Ia=new t(io,uo),la=new t(mo,gi),Sa=new t(io,gi);if(Va){var ha=new t(-ba,ba- -17),Ui=-Math.PI/2,Pa=Xa/2-ba,Rs=new t(22-Pa,-(ni.imageName?Pa:0)),Go=new(Function.prototype.bind.apply(t,[null].concat(Ga)));Oi._rotateAround(Ui,ha)._add(Rs)._add(Go),Ia._rotateAround(Ui,ha)._add(Rs)._add(Go),la._rotateAround(Ui,ha)._add(Rs)._add(Go),Sa._rotateAround(Ui,ha)._add(Rs)._add(Go)}if(Kr){var yl=Math.sin(Kr),en=Math.cos(Kr),Ha=[en,-yl,yl,en];Oi._matMult(Ha),Ia._matMult(Ha),la._matMult(Ha),Sa._matMult(Ha)}var xl=new t(0,0),Xs=new t(0,0);oi.push({tl:Oi,tr:Ia,bl:la,br:Sa,tex:Xi,writingMode:ur.writingMode,glyphOffset:Vo,sectionIndex:ni.sectionIndex,isSDF:Ki,pixelOffsetTL:xl,pixelOffsetBR:Xs,minFontScaleX:0,minFontScaleY:0})}}return oi}(0,K,rt,Ee,ze,We,he,A.allowVerticalPlacement),Rn=A.textSizeData,In=null;"source"===Rn.kind?(In=[Gl*Ee.layout.get("text-size").evaluate(We,{})])[0]>uc&&E(A.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===Rn.kind&&((In=[Gl*Zt.compositeTextSizes[0].evaluate(We,{},mn),Gl*Zt.compositeTextSizes[1].evaluate(We,{},mn)])[0]>uc||In[1]>uc)&&E(A.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),A.addSymbols(A.text,xn,In,rt,ze,We,Mt,D,gt.lineStartIndex,gt.lineLength,$t,mn);for(var Yn=0,Kn=Ct;Yn<Kn.length;Yn+=1)Gt[Kn[Yn]]=A.text.placedSymbolArray.length-1;return 4*xn.length}function qp(A){for(var D in A)return A[D];return null}function Wp(A,D,K,he){var Ee=A.compareText;if(D in Ee){for(var ze=Ee[D],We=ze.length-1;We>=0;We--)if(he.dist(ze[We])<K)return!0}else Ee[D]=[];return Ee[D].push(he),!1}var Yp=Ec.VectorTileFeature.types,Od=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Bc(A,D,K,he,Ee,ze,We,rt,gt,Mt,Ct,Gt,$t){var Zt=rt?Math.min(uc,Math.round(rt[0])):0,mn=rt?Math.min(uc,Math.round(rt[1])):0;A.emplaceBack(D,K,Math.round(32*he),Math.round(32*Ee),ze,We,(Zt<<1)+(gt?1:0),mn,16*Mt,16*Ct,256*Gt,256*$t)}function Rd(A,D,K){A.emplaceBack(D.x,D.y,K),A.emplaceBack(D.x,D.y,K),A.emplaceBack(D.x,D.y,K),A.emplaceBack(D.x,D.y,K)}function M0(A){for(var D=0,K=A.sections;D<K.length;D+=1)if(Ya(K[D].text))return!0;return!1}var Nc=function(A){this.layoutVertexArray=new W,this.indexArray=new Ae,this.programConfigurations=A,this.segments=new er,this.dynamicLayoutVertexArray=new H,this.opacityVertexArray=new C,this.placedSymbolArray=new Ft};Nc.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},Nc.prototype.upload=function(A,D,K,he){this.isEmpty()||(K&&(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Op.members),this.indexBuffer=A.createIndexBuffer(this.indexArray,D),this.dynamicLayoutVertexBuffer=A.createVertexBuffer(this.dynamicLayoutVertexArray,Zs.members,!0),this.opacityVertexBuffer=A.createVertexBuffer(this.opacityVertexArray,Od,!0),this.opacityVertexBuffer.itemSize=1),(K||he)&&this.programConfigurations.upload(A))},Nc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Hr("SymbolBuffers",Nc);var uf=function(A,D,K){this.layoutVertexArray=new A,this.layoutAttributes=D,this.indexArray=new K,this.segments=new er,this.collisionVertexArray=new de};uf.prototype.upload=function(A){this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=A.createVertexBuffer(this.collisionVertexArray,Lu.members,!0)},uf.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Hr("CollisionBuffers",uf);var Qi=function(A){this.collisionBoxArray=A.collisionBoxArray,this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(We){return We.id}),this.index=A.index,this.pixelRatio=A.pixelRatio,this.sourceLayerIndex=A.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ac([]),this.placementViewportMatrix=Ac([]);var D=this.layers[0]._unevaluatedLayout._values;this.textSizeData=of(this.zoom,D["text-size"]),this.iconSizeData=of(this.zoom,D["icon-size"]);var K=this.layers[0].layout,he=K.get("symbol-sort-key"),Ee=K.get("symbol-z-order");this.canOverlap=K.get("text-allow-overlap")||K.get("icon-allow-overlap")||K.get("text-ignore-placement")||K.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==Ee&&void 0!==he.constantOr(1),this.sortFeaturesByY=("viewport-y"===Ee||"auto"===Ee&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===K.get("symbol-placement")&&(this.writingModes=K.get("text-writing-mode").map(function(We){return Mo[We]})),this.stateDependentLayerIds=this.layers.filter(function(We){return We.isStateDependent()}).map(function(We){return We.id}),this.sourceID=A.sourceID};Qi.prototype.createArrays=function(){this.text=new Nc(new Ca(this.layers,this.zoom,function(A){return/^text/.test(A)})),this.icon=new Nc(new Ca(this.layers,this.zoom,function(A){return/^icon/.test(A)})),this.glyphOffsetArray=new Kt,this.lineVertexArray=new kn,this.symbolInstances=new Qt},Qi.prototype.calculateGlyphDependencies=function(A,D,K,he,Ee){for(var ze=0;ze<A.length;ze++)if(D[A.charCodeAt(ze)]=!0,(K||he)&&Ee){var We=Ic[A.charAt(ze)];We&&(D[We.charCodeAt(0)]=!0)}},Qi.prototype.populate=function(A,D,K){var he=this.layers[0],Ee=he.layout,ze=Ee.get("text-font"),We=Ee.get("text-field"),rt=Ee.get("icon-image"),gt=("constant"!==We.value.kind||We.value.value instanceof Zn&&!We.value.value.isEmpty()||We.value.value.toString().length>0)&&("constant"!==ze.value.kind||ze.value.value.length>0),Mt="constant"!==rt.value.kind||!!rt.value.value||Object.keys(rt.parameters).length>0,Ct=Ee.get("symbol-sort-key");if(this.features=[],gt||Mt){for(var Gt=D.iconDependencies,$t=D.glyphDependencies,Zt=D.availableImages,mn=new bi(this.zoom),xn=0,Rn=A;xn<Rn.length;xn+=1){var In=Rn[xn],Yn=In.feature,Kn=In.id,ir=In.index,ur=In.sourceLayerIndex,yr=he._featureFilter.needGeometry,Rr=oa(Yn,yr);if(he._featureFilter.filter(mn,Rr,K)){yr||(Rr.geometry=gs(Yn));var Er=void 0;if(gt){var Nr=he.getValueAndResolveTokens("text-field",Rr,K,Zt),Ur=Zn.factory(Nr);M0(Ur)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Sl()||this.hasRTLText&&to.isParsed())&&(Er=bh(Ur,he,Rr))}var ai=void 0;if(Mt){var Kr=he.getValueAndResolveTokens("icon-image",Rr,K,Zt);ai=Kr instanceof hr?Kr:hr.fromString(Kr)}if(Er||ai){var oi=this.sortFeaturesByKey?Ct.evaluate(Rr,{},K):void 0;if(this.features.push({id:Kn,text:Er,icon:ai,index:ir,sourceLayerIndex:ur,geometry:Rr.geometry,properties:Yn.properties,type:Yp[Yn.type],sortKey:oi}),ai&&(Gt[ai.name]=!0),Er){var Zr=ze.evaluate(Rr,{},K).join(","),Ei="map"===Ee.get("text-rotation-alignment")&&"point"!==Ee.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Mo.vertical)>=0;for(var ci=0,ea=Er.sections;ci<ea.length;ci+=1){var ni=ea[ci];if(ni.image)Gt[ni.image.name]=!0;else{var Xi=ru(Er.toString()),fa=ni.fontStack||Zr,Ki=$t[fa]=$t[fa]||{};this.calculateGlyphDependencies(ni.text,Ki,Ei,this.allowVerticalPlacement,Xi)}}}}}}"line"===Ee.get("symbol-placement")&&(this.features=function(ji){var sa={},Va={},ba=[],lo=0;function So(Sa){ba.push(ji[Sa]),lo++}function po(Sa,ha,Ui){var Pa=Va[Sa];return delete Va[Sa],Va[ha]=Pa,ba[Pa].geometry[0].pop(),ba[Pa].geometry[0]=ba[Pa].geometry[0].concat(Ui[0]),Pa}function Vo(Sa,ha,Ui){var Pa=sa[ha];return delete sa[ha],sa[Sa]=Pa,ba[Pa].geometry[0].shift(),ba[Pa].geometry[0]=Ui[0].concat(ba[Pa].geometry[0]),Pa}function go(Sa,ha,Ui){var Pa=Ui?ha[0][ha[0].length-1]:ha[0][0];return Sa+":"+Pa.x+":"+Pa.y}for(var Ga=0;Ga<ji.length;Ga++){var mo=ji[Ga],uo=mo.geometry,io=mo.text?mo.text.toString():null;if(io){var gi=go(io,uo),Oi=go(io,uo,!0);if(gi in Va&&Oi in sa&&Va[gi]!==sa[Oi]){var Ia=Vo(gi,Oi,uo),la=po(gi,Oi,ba[Ia].geometry);delete sa[gi],delete Va[Oi],Va[go(io,ba[la].geometry,!0)]=la,ba[Ia].geometry=null}else gi in Va?po(gi,Oi,uo):Oi in sa?Vo(gi,Oi,uo):(So(Ga),sa[gi]=lo-1,Va[Oi]=lo-1)}else So(Ga)}return ba.filter(function(Sa){return Sa.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(ji,sa){return ji.sortKey-sa.sortKey})}},Qi.prototype.update=function(A,D,K){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(A,D,this.layers,K),this.icon.programConfigurations.updatePaintArrays(A,D,this.layers,K))},Qi.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},Qi.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Qi.prototype.upload=function(A){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(A),this.iconCollisionBox.upload(A)),this.text.upload(A,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(A,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Qi.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Qi.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Qi.prototype.addToLineVertexArray=function(A,D){var K=this.lineVertexArray.length;if(void 0!==A.segment){for(var he=A.dist(D[A.segment+1]),Ee=A.dist(D[A.segment]),ze={},We=A.segment+1;We<D.length;We++)ze[We]={x:D[We].x,y:D[We].y,tileUnitDistanceFromAnchor:he},We<D.length-1&&(he+=D[We+1].dist(D[We]));for(var rt=A.segment||0;rt>=0;rt--)ze[rt]={x:D[rt].x,y:D[rt].y,tileUnitDistanceFromAnchor:Ee},rt>0&&(Ee+=D[rt-1].dist(D[rt]));for(var gt=0;gt<D.length;gt++){var Mt=ze[gt];this.lineVertexArray.emplaceBack(Mt.x,Mt.y,Mt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:K,lineLength:this.lineVertexArray.length-K}},Qi.prototype.addSymbols=function(A,D,K,he,Ee,ze,We,rt,gt,Mt,Ct,Gt){for(var $t=A.indexArray,Zt=A.layoutVertexArray,mn=A.segments.prepareSegment(4*D.length,Zt,$t,this.canOverlap?ze.sortKey:void 0),xn=this.glyphOffsetArray.length,Rn=mn.vertexLength,In=this.allowVerticalPlacement&&We===Mo.vertical?Math.PI/2:0,Yn=ze.text&&ze.text.sections,Kn=0;Kn<D.length;Kn++){var ir=D[Kn],ur=ir.tl,yr=ir.tr,Rr=ir.bl,Er=ir.br,Nr=ir.tex,Ur=ir.pixelOffsetTL,ai=ir.pixelOffsetBR,Kr=ir.minFontScaleX,oi=ir.minFontScaleY,ei=ir.glyphOffset,Zr=ir.isSDF,Ei=ir.sectionIndex,ci=mn.vertexLength,ea=ei[1];Bc(Zt,rt.x,rt.y,ur.x,ea+ur.y,Nr.x,Nr.y,K,Zr,Ur.x,Ur.y,Kr,oi),Bc(Zt,rt.x,rt.y,yr.x,ea+yr.y,Nr.x+Nr.w,Nr.y,K,Zr,ai.x,Ur.y,Kr,oi),Bc(Zt,rt.x,rt.y,Rr.x,ea+Rr.y,Nr.x,Nr.y+Nr.h,K,Zr,Ur.x,ai.y,Kr,oi),Bc(Zt,rt.x,rt.y,Er.x,ea+Er.y,Nr.x+Nr.w,Nr.y+Nr.h,K,Zr,ai.x,ai.y,Kr,oi),Rd(A.dynamicLayoutVertexArray,rt,In),$t.emplaceBack(ci,ci+1,ci+2),$t.emplaceBack(ci+1,ci+2,ci+3),mn.vertexLength+=4,mn.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ei[0]),Kn!==D.length-1&&Ei===D[Kn+1].sectionIndex||A.programConfigurations.populatePaintArrays(Zt.length,ze,ze.index,{},Gt,Yn&&Yn[Ei])}A.placedSymbolArray.emplaceBack(rt.x,rt.y,xn,this.glyphOffsetArray.length-xn,Rn,gt,Mt,rt.segment,K?K[0]:0,K?K[1]:0,he[0],he[1],We,0,!1,0,Ct)},Qi.prototype._addCollisionDebugVertex=function(A,D,K,he,Ee,ze){return D.emplaceBack(0,0),A.emplaceBack(K.x,K.y,he,Ee,Math.round(ze.x),Math.round(ze.y))},Qi.prototype.addCollisionDebugVertices=function(A,D,K,he,Ee,ze,We){var rt=Ee.segments.prepareSegment(4,Ee.layoutVertexArray,Ee.indexArray),gt=rt.vertexLength,Mt=Ee.layoutVertexArray,Ct=Ee.collisionVertexArray,Gt=We.anchorX,$t=We.anchorY;this._addCollisionDebugVertex(Mt,Ct,ze,Gt,$t,new t(A,D)),this._addCollisionDebugVertex(Mt,Ct,ze,Gt,$t,new t(K,D)),this._addCollisionDebugVertex(Mt,Ct,ze,Gt,$t,new t(K,he)),this._addCollisionDebugVertex(Mt,Ct,ze,Gt,$t,new t(A,he)),rt.vertexLength+=4;var Zt=Ee.indexArray;Zt.emplaceBack(gt,gt+1),Zt.emplaceBack(gt+1,gt+2),Zt.emplaceBack(gt+2,gt+3),Zt.emplaceBack(gt+3,gt),rt.primitiveLength+=4},Qi.prototype.addDebugCollisionBoxes=function(A,D,K,he){for(var Ee=A;Ee<D;Ee++){var ze=this.collisionBoxArray.get(Ee);this.addCollisionDebugVertices(ze.x1,ze.y1,ze.x2,ze.y2,he?this.textCollisionBox:this.iconCollisionBox,ze.anchorPoint,K)}},Qi.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new uf(Q,ud.members,mt),this.iconCollisionBox=new uf(Q,ud.members,mt);for(var A=0;A<this.symbolInstances.length;A++){var D=this.symbolInstances.get(A);this.addDebugCollisionBoxes(D.textBoxStartIndex,D.textBoxEndIndex,D,!0),this.addDebugCollisionBoxes(D.verticalTextBoxStartIndex,D.verticalTextBoxEndIndex,D,!0),this.addDebugCollisionBoxes(D.iconBoxStartIndex,D.iconBoxEndIndex,D,!1),this.addDebugCollisionBoxes(D.verticalIconBoxStartIndex,D.verticalIconBoxEndIndex,D,!1)}},Qi.prototype._deserializeCollisionBoxesForSymbol=function(A,D,K,he,Ee,ze,We,rt,gt){for(var Mt={},Ct=D;Ct<K;Ct++){var Gt=A.get(Ct);Mt.textBox={x1:Gt.x1,y1:Gt.y1,x2:Gt.x2,y2:Gt.y2,anchorPointX:Gt.anchorPointX,anchorPointY:Gt.anchorPointY},Mt.textFeatureIndex=Gt.featureIndex;break}for(var $t=he;$t<Ee;$t++){var Zt=A.get($t);Mt.verticalTextBox={x1:Zt.x1,y1:Zt.y1,x2:Zt.x2,y2:Zt.y2,anchorPointX:Zt.anchorPointX,anchorPointY:Zt.anchorPointY},Mt.verticalTextFeatureIndex=Zt.featureIndex;break}for(var mn=ze;mn<We;mn++){var xn=A.get(mn);Mt.iconBox={x1:xn.x1,y1:xn.y1,x2:xn.x2,y2:xn.y2,anchorPointX:xn.anchorPointX,anchorPointY:xn.anchorPointY},Mt.iconFeatureIndex=xn.featureIndex;break}for(var Rn=rt;Rn<gt;Rn++){var In=A.get(Rn);Mt.verticalIconBox={x1:In.x1,y1:In.y1,x2:In.x2,y2:In.y2,anchorPointX:In.anchorPointX,anchorPointY:In.anchorPointY},Mt.verticalIconFeatureIndex=In.featureIndex;break}return Mt},Qi.prototype.deserializeCollisionBoxes=function(A){this.collisionArrays=[];for(var D=0;D<this.symbolInstances.length;D++){var K=this.symbolInstances.get(D);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(A,K.textBoxStartIndex,K.textBoxEndIndex,K.verticalTextBoxStartIndex,K.verticalTextBoxEndIndex,K.iconBoxStartIndex,K.iconBoxEndIndex,K.verticalIconBoxStartIndex,K.verticalIconBoxEndIndex))}},Qi.prototype.hasTextData=function(){return this.text.segments.get().length>0},Qi.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Qi.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Qi.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Qi.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Qi.prototype.addIndicesForPlacedSymbol=function(A,D){for(var K=A.placedSymbolArray.get(D),he=K.vertexStartIndex+4*K.numGlyphs,Ee=K.vertexStartIndex;Ee<he;Ee+=4)A.indexArray.emplaceBack(Ee,Ee+1,Ee+2),A.indexArray.emplaceBack(Ee+1,Ee+2,Ee+3)},Qi.prototype.getSortedSymbolIndexes=function(A){if(this.sortedAngle===A&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var D=Math.sin(A),K=Math.cos(A),he=[],Ee=[],ze=[],We=0;We<this.symbolInstances.length;++We){ze.push(We);var rt=this.symbolInstances.get(We);he.push(0|Math.round(D*rt.anchorX+K*rt.anchorY)),Ee.push(rt.featureIndex)}return ze.sort(function(gt,Mt){return he[gt]-he[Mt]||Ee[Mt]-Ee[gt]}),ze},Qi.prototype.addToSortKeyRanges=function(A,D){var K=this.sortKeyRanges[this.sortKeyRanges.length-1];K&&K.sortKey===D?K.symbolInstanceEnd=A+1:this.sortKeyRanges.push({sortKey:D,symbolInstanceStart:A,symbolInstanceEnd:A+1})},Qi.prototype.sortFeatures=function(A){var D=this;if(this.sortFeaturesByY&&this.sortedAngle!==A&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(A),this.sortedAngle=A,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var K=0,he=this.symbolInstanceIndexes;K<he.length;K+=1){var ze=this.symbolInstances.get(he[K]);this.featureSortOrder.push(ze.featureIndex),[ze.rightJustifiedTextSymbolIndex,ze.centerJustifiedTextSymbolIndex,ze.leftJustifiedTextSymbolIndex].forEach(function(We,rt,gt){We>=0&&gt.indexOf(We)===rt&&D.addIndicesForPlacedSymbol(D.text,We)}),ze.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,ze.verticalPlacedTextSymbolIndex),ze.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,ze.placedIconSymbolIndex),ze.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,ze.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Hr("SymbolBucket",Qi,{omit:["layers","collisionBoxArray","features","compareText"]}),Qi.MAX_GLYPHS=65535,Qi.addDynamicAttributes=Rd;var Zp=new ya({"symbol-placement":new Vr(Qe.layout_symbol["symbol-placement"]),"symbol-spacing":new Vr(Qe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Vr(Qe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Yr(Qe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Vr(Qe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Vr(Qe.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Vr(Qe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Vr(Qe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Vr(Qe.layout_symbol["icon-rotation-alignment"]),"icon-size":new Yr(Qe.layout_symbol["icon-size"]),"icon-text-fit":new Vr(Qe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Vr(Qe.layout_symbol["icon-text-fit-padding"]),"icon-image":new Yr(Qe.layout_symbol["icon-image"]),"icon-rotate":new Yr(Qe.layout_symbol["icon-rotate"]),"icon-padding":new Vr(Qe.layout_symbol["icon-padding"]),"icon-keep-upright":new Vr(Qe.layout_symbol["icon-keep-upright"]),"icon-offset":new Yr(Qe.layout_symbol["icon-offset"]),"icon-anchor":new Yr(Qe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Vr(Qe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Vr(Qe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Vr(Qe.layout_symbol["text-rotation-alignment"]),"text-field":new Yr(Qe.layout_symbol["text-field"]),"text-font":new Yr(Qe.layout_symbol["text-font"]),"text-size":new Yr(Qe.layout_symbol["text-size"]),"text-max-width":new Yr(Qe.layout_symbol["text-max-width"]),"text-line-height":new Vr(Qe.layout_symbol["text-line-height"]),"text-letter-spacing":new Yr(Qe.layout_symbol["text-letter-spacing"]),"text-justify":new Yr(Qe.layout_symbol["text-justify"]),"text-radial-offset":new Yr(Qe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Vr(Qe.layout_symbol["text-variable-anchor"]),"text-anchor":new Yr(Qe.layout_symbol["text-anchor"]),"text-max-angle":new Vr(Qe.layout_symbol["text-max-angle"]),"text-writing-mode":new Vr(Qe.layout_symbol["text-writing-mode"]),"text-rotate":new Yr(Qe.layout_symbol["text-rotate"]),"text-padding":new Vr(Qe.layout_symbol["text-padding"]),"text-keep-upright":new Vr(Qe.layout_symbol["text-keep-upright"]),"text-transform":new Yr(Qe.layout_symbol["text-transform"]),"text-offset":new Yr(Qe.layout_symbol["text-offset"]),"text-allow-overlap":new Vr(Qe.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Vr(Qe.layout_symbol["text-ignore-placement"]),"text-optional":new Vr(Qe.layout_symbol["text-optional"])}),Ch={paint:new ya({"icon-opacity":new Yr(Qe.paint_symbol["icon-opacity"]),"icon-color":new Yr(Qe.paint_symbol["icon-color"]),"icon-halo-color":new Yr(Qe.paint_symbol["icon-halo-color"]),"icon-halo-width":new Yr(Qe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Yr(Qe.paint_symbol["icon-halo-blur"]),"icon-translate":new Vr(Qe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Vr(Qe.paint_symbol["icon-translate-anchor"]),"text-opacity":new Yr(Qe.paint_symbol["text-opacity"]),"text-color":new Yr(Qe.paint_symbol["text-color"],{runtimeType:gn,getOverride:function(A){return A.textColor},hasOverride:function(A){return!!A.textColor}}),"text-halo-color":new Yr(Qe.paint_symbol["text-halo-color"]),"text-halo-width":new Yr(Qe.paint_symbol["text-halo-width"]),"text-halo-blur":new Yr(Qe.paint_symbol["text-halo-blur"]),"text-translate":new Vr(Qe.paint_symbol["text-translate"]),"text-translate-anchor":new Vr(Qe.paint_symbol["text-translate-anchor"])}),layout:Zp},jc=function(A){this.type=A.property.overrides?A.property.overrides.runtimeType:Nt,this.defaultValue=A};jc.prototype.evaluate=function(A){if(A.formattedSection){var D=this.defaultValue.property.overrides;if(D&&D.hasOverride(A.formattedSection))return D.getOverride(A.formattedSection)}return A.feature&&A.featureState?this.defaultValue.evaluate(A.feature,A.featureState):this.defaultValue.property.specification.default},jc.prototype.eachChild=function(A){this.defaultValue.isConstant()||A(this.defaultValue.value._styleExpression.expression)},jc.prototype.outputDefined=function(){return!1},jc.prototype.serialize=function(){return null},Hr("FormatSectionOverride",jc,{omit:["defaultValue"]});var Xp=function(A){function D(K){A.call(this,K,Ch)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype.recalculate=function(K,he){if(A.prototype.recalculate.call(this,K,he),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var Ee=this.layout.get("text-writing-mode");if(Ee){for(var ze=[],We=0,rt=Ee;We<rt.length;We+=1){var gt=rt[We];ze.indexOf(gt)<0&&ze.push(gt)}this.layout._values["text-writing-mode"]=ze}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},D.prototype.getValueAndResolveTokens=function(K,he,Ee,ze){var gt,We=this.layout.get(K).evaluate(he,{},Ee,ze),rt=this._unevaluatedLayout._values[K];return rt.isDataDriven()||_l(rt.value)||!We?We:(gt=he.properties,We.replace(/{([^{}]+)}/g,function(Ct,Gt){return Gt in gt?String(gt[Gt]):""}))},D.prototype.createBucket=function(K){return new Qi(K)},D.prototype.queryRadius=function(){return 0},D.prototype.queryIntersectsFeature=function(){return!1},D.prototype._setPaintOverrides=function(){for(var K=0,he=Ch.paint.overridableProperties;K<he.length;K+=1){var Ee=he[K];if(D.hasPaintOverride(this.layout,Ee)){var ze,We=this.paint.get(Ee),rt=new jc(We),gt=new Po(rt,We.property.specification);ze="constant"===We.value.kind||"source"===We.value.kind?new cs("source",gt):new Il("composite",gt,We.value.zoomStops,We.value._interpolationType),this.paint._values[Ee]=new Ji(We.property,ze,We.parameters)}}},D.prototype._handleOverridablePaintPropertyUpdate=function(K,he,Ee){return!(!this.layout||he.isDataDriven()||Ee.isDataDriven())&&D.hasPaintOverride(this.layout,K)},D.hasPaintOverride=function(K,he){var Ee=K.get("text-field"),ze=Ch.paint.properties[he],We=!1,rt=function(Ct){for(var Gt=0,$t=Ct;Gt<$t.length;Gt+=1)if(ze.overrides&&ze.overrides.hasOverride($t[Gt]))return void(We=!0)};if("constant"===Ee.value.kind&&Ee.value.value instanceof Zn)rt(Ee.value.value.sections);else if("source"===Ee.value.kind){var gt=function(Ct){We||(Ct instanceof ln&&nr(Ct.value)===Gn?rt(Ct.value.sections):Ct instanceof Hn?rt(Ct.sections):Ct.eachChild(gt))},Mt=Ee.value;Mt._styleExpression&&gt(Mt._styleExpression.expression)}return We},D}(Hi),cf={paint:new ya({"background-color":new Vr(Qe.paint_background["background-color"]),"background-pattern":new Fo(Qe.paint_background["background-pattern"]),"background-opacity":new Vr(Qe.paint_background["background-opacity"])})},Gf=function(A){function D(K){A.call(this,K,cf)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D}(Hi),Kp={paint:new ya({"raster-opacity":new Vr(Qe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Vr(Qe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Vr(Qe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Vr(Qe.paint_raster["raster-brightness-max"]),"raster-saturation":new Vr(Qe.paint_raster["raster-saturation"]),"raster-contrast":new Vr(Qe.paint_raster["raster-contrast"]),"raster-resampling":new Vr(Qe.paint_raster["raster-resampling"]),"raster-fade-duration":new Vr(Qe.paint_raster["raster-fade-duration"])})},Jp=function(A){function D(K){A.call(this,K,Kp)}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D}(Hi),$p=function(A){function D(K){A.call(this,K,{}),this.implementation=K}return A&&(D.__proto__=A),(D.prototype=Object.create(A&&A.prototype)).constructor=D,D.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},D.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},D.prototype.recalculate=function(){},D.prototype.updateTransitions=function(){},D.prototype.hasTransition=function(){},D.prototype.serialize=function(){},D.prototype.onAdd=function(K){this.implementation.onAdd&&this.implementation.onAdd(K,K.painter.context.gl)},D.prototype.onRemove=function(K){this.implementation.onRemove&&this.implementation.onRemove(K,K.painter.context.gl)},D}(Hi),Qp={circle:Jh,heatmap:$h,hillshade:Qh,fill:_p,"fill-extrusion":Sp,line:Pp,symbol:Xp,background:Gf,raster:Jp},Zu=r.HTMLImageElement,Dd=r.HTMLCanvasElement,zd=r.HTMLVideoElement,Fd=r.ImageData,Hf=r.ImageBitmap,cc=function(A,D,K,he){this.context=A,this.format=K,this.texture=A.gl.createTexture(),this.update(D,he)};cc.prototype.update=function(A,D,K){var he=A.width,Ee=A.height,ze=!(this.size&&this.size[0]===he&&this.size[1]===Ee||K),We=this.context,rt=We.gl;if(this.useMipmap=!(!D||!D.useMipmap),rt.bindTexture(rt.TEXTURE_2D,this.texture),We.pixelStoreUnpackFlipY.set(!1),We.pixelStoreUnpack.set(1),We.pixelStoreUnpackPremultiplyAlpha.set(this.format===rt.RGBA&&(!D||!1!==D.premultiply)),ze)this.size=[he,Ee],A instanceof Zu||A instanceof Dd||A instanceof zd||A instanceof Fd||Hf&&A instanceof Hf?rt.texImage2D(rt.TEXTURE_2D,0,this.format,this.format,rt.UNSIGNED_BYTE,A):rt.texImage2D(rt.TEXTURE_2D,0,this.format,he,Ee,0,this.format,rt.UNSIGNED_BYTE,A.data);else{var gt=K||{x:0,y:0},Mt=gt.x,Ct=gt.y;A instanceof Zu||A instanceof Dd||A instanceof zd||A instanceof Fd||Hf&&A instanceof Hf?rt.texSubImage2D(rt.TEXTURE_2D,0,Mt,Ct,rt.RGBA,rt.UNSIGNED_BYTE,A):rt.texSubImage2D(rt.TEXTURE_2D,0,Mt,Ct,he,Ee,rt.RGBA,rt.UNSIGNED_BYTE,A.data)}this.useMipmap&&this.isSizePowerOfTwo()&&rt.generateMipmap(rt.TEXTURE_2D)},cc.prototype.bind=function(A,D,K){var he=this.context.gl;he.bindTexture(he.TEXTURE_2D,this.texture),K!==he.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(K=he.LINEAR),A!==this.filter&&(he.texParameteri(he.TEXTURE_2D,he.TEXTURE_MAG_FILTER,A),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_MIN_FILTER,K||A),this.filter=A),D!==this.wrap&&(he.texParameteri(he.TEXTURE_2D,he.TEXTURE_WRAP_S,D),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_WRAP_T,D),this.wrap=D)},cc.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},cc.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Lh=function(A){var D=this;this._callback=A,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){D._triggered=!1,D._callback()})};Lh.prototype.trigger=function(){var A=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){A._triggered=!1,A._callback()},0))},Lh.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Uc=function(A,D,K){this.target=A,this.parent=D,this.mapId=K,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},x(["receive","process"],this),this.invoker=new Lh(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=O()?A:r};function Bd(A,D,K){var he=2*Math.PI*6378137/256/Math.pow(2,K);return[A*he-2*Math.PI*6378137/2,D*he-2*Math.PI*6378137/2]}Uc.prototype.send=function(A,D,K,he,Ee){var ze=this;void 0===Ee&&(Ee=!1);var We=Math.round(1e18*Math.random()).toString(36).substring(0,10);K&&(this.callbacks[We]=K);var rt=R(this.globalScope)?void 0:[];return this.target.postMessage({id:We,type:A,hasCallback:!!K,targetMapId:he,mustQueue:Ee,sourceMapId:this.mapId,data:Ws(D,rt)},rt),{cancel:function(){K&&delete ze.callbacks[We],ze.target.postMessage({id:We,type:"<cancel>",targetMapId:he,sourceMapId:ze.mapId})}}},Uc.prototype.receive=function(A){var D=A.data,K=D.id;if(K&&(!D.targetMapId||this.mapId===D.targetMapId))if("<cancel>"===D.type){delete this.tasks[K];var he=this.cancelCallbacks[K];delete this.cancelCallbacks[K],he&&he()}else O()||D.mustQueue?(this.tasks[K]=D,this.taskQueue.push(K),this.invoker.trigger()):this.processTask(K,D)},Uc.prototype.process=function(){if(this.taskQueue.length){var A=this.taskQueue.shift(),D=this.tasks[A];delete this.tasks[A],this.taskQueue.length&&this.invoker.trigger(),D&&this.processTask(A,D)}},Uc.prototype.processTask=function(A,D){var K=this;if("<response>"===D.type){var he=this.callbacks[A];delete this.callbacks[A],he&&(D.error?he(hl(D.error)):he(null,hl(D.data)))}else{var Ee=!1,ze=R(this.globalScope)?void 0:[],We=D.hasCallback?function(Ct,Gt){Ee=!0,delete K.cancelCallbacks[A],K.target.postMessage({id:A,type:"<response>",sourceMapId:K.mapId,error:Ct?Ws(Ct):null,data:Ws(Gt,ze)},ze)}:function(Ct){Ee=!0},rt=null,gt=hl(D.data);if(this.parent[D.type])rt=this.parent[D.type](D.sourceMapId,gt,We);else if(this.parent.getWorkerSource){var Mt=D.type.split(".");rt=this.parent.getWorkerSource(D.sourceMapId,Mt[0],gt.source)[Mt[1]](gt,We)}else We(new Error("Could not find function "+D.type));!Ee&&rt&&rt.cancel&&(this.cancelCallbacks[A]=rt.cancel)}},Uc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Ka=function(A,D){A&&(D?this.setSouthWest(A).setNorthEast(D):4===A.length?this.setSouthWest([A[0],A[1]]).setNorthEast([A[2],A[3]]):this.setSouthWest(A[0]).setNorthEast(A[1]))};Ka.prototype.setNorthEast=function(A){return this._ne=A instanceof xa?new xa(A.lng,A.lat):xa.convert(A),this},Ka.prototype.setSouthWest=function(A){return this._sw=A instanceof xa?new xa(A.lng,A.lat):xa.convert(A),this},Ka.prototype.extend=function(A){var D,K,he=this._sw,Ee=this._ne;if(A instanceof xa)D=A,K=A;else{if(!(A instanceof Ka))return Array.isArray(A)?4===A.length||A.every(Array.isArray)?this.extend(Ka.convert(A)):this.extend(xa.convert(A)):this;if(K=A._ne,!(D=A._sw)||!K)return this}return he||Ee?(he.lng=Math.min(D.lng,he.lng),he.lat=Math.min(D.lat,he.lat),Ee.lng=Math.max(K.lng,Ee.lng),Ee.lat=Math.max(K.lat,Ee.lat)):(this._sw=new xa(D.lng,D.lat),this._ne=new xa(K.lng,K.lat)),this},Ka.prototype.getCenter=function(){return new xa((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Ka.prototype.getSouthWest=function(){return this._sw},Ka.prototype.getNorthEast=function(){return this._ne},Ka.prototype.getNorthWest=function(){return new xa(this.getWest(),this.getNorth())},Ka.prototype.getSouthEast=function(){return new xa(this.getEast(),this.getSouth())},Ka.prototype.getWest=function(){return this._sw.lng},Ka.prototype.getSouth=function(){return this._sw.lat},Ka.prototype.getEast=function(){return this._ne.lng},Ka.prototype.getNorth=function(){return this._ne.lat},Ka.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Ka.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Ka.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Ka.prototype.contains=function(A){var D=xa.convert(A),K=D.lng,he=D.lat,ze=this._sw.lng<=K&&K<=this._ne.lng;return this._sw.lng>this._ne.lng&&(ze=this._sw.lng>=K&&K>=this._ne.lng),this._sw.lat<=he&&he<=this._ne.lat&&ze},Ka.convert=function(A){return!A||A instanceof Ka?A:new Ka(A)};var Nd=6371008.8,xa=function(A,D){if(isNaN(A)||isNaN(D))throw new Error("Invalid LngLat object: ("+A+", "+D+")");if(this.lng=+A,this.lat=+D,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};xa.prototype.wrap=function(){return new xa(f(this.lng,-180,180),this.lat)},xa.prototype.toArray=function(){return[this.lng,this.lat]},xa.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},xa.prototype.distanceTo=function(A){var D=Math.PI/180,K=this.lat*D,he=A.lat*D,Ee=Math.sin(K)*Math.sin(he)+Math.cos(K)*Math.cos(he)*Math.cos((A.lng-this.lng)*D);return Nd*Math.acos(Math.min(Ee,1))},xa.prototype.toBounds=function(A){void 0===A&&(A=0);var D=360*A/40075017,K=D/Math.cos(Math.PI/180*this.lat);return new Ka(new xa(this.lng-K,this.lat-D),new xa(this.lng+K,this.lat+D))},xa.convert=function(A){if(A instanceof xa)return A;if(Array.isArray(A)&&(2===A.length||3===A.length))return new xa(Number(A[0]),Number(A[1]));if(!Array.isArray(A)&&"object"==typeof A&&null!==A)return new xa(Number("lng"in A?A.lng:A.lon),Number(A.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var jd=2*Math.PI*Nd;function ff(A){return jd*Math.cos(A*Math.PI/180)}function Ih(A){return(180+A)/360}function Ph(A){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A*Math.PI/360)))/360}function Ud(A,D){return A/ff(D)}function Oh(A){return 360/Math.PI*Math.atan(Math.exp((180-360*A)*Math.PI/180))-90}var Du=function(A,D,K){void 0===K&&(K=0),this.x=+A,this.y=+D,this.z=+K};Du.fromLngLat=function(A,D){void 0===D&&(D=0);var K=xa.convert(A);return new Du(Ih(K.lng),Ph(K.lat),Ud(D,K.lat))},Du.prototype.toLngLat=function(){return new xa(360*this.x-180,Oh(this.y))},Du.prototype.toAltitude=function(){return this.z*ff(Oh(this.y))},Du.prototype.meterInMercatorCoordinateUnits=function(){return 1/jd*(A=Oh(this.y),1/Math.cos(A*Math.PI/180));var A};var cu=function(A,D,K){this.z=A,this.x=D,this.y=K,this.key=hf(0,A,A,D,K)};cu.prototype.equals=function(A){return this.z===A.z&&this.x===A.x&&this.y===A.y},cu.prototype.url=function(A,D){var K,he,Ee,ze,We,rt=(he=this.y,Ee=this.z,ze=Bd(256*(K=this.x),256*(he=Math.pow(2,Ee)-he-1),Ee),We=Bd(256*(K+1),256*(he+1),Ee),ze[0]+","+ze[1]+","+We[0]+","+We[1]),gt=function(Mt,Ct,Gt){for(var $t,Zt="",mn=Mt;mn>0;mn--)Zt+=(Ct&($t=1<<mn-1)?1:0)+(Gt&$t?2:0);return Zt}(this.z,this.x,this.y);return A[(this.x+this.y)%A.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===D?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",gt).replace("{bbox-epsg-3857}",rt)},cu.prototype.getTilePoint=function(A){var D=Math.pow(2,this.z);return new t((A.x*D-this.x)*Ti,(A.y*D-this.y)*Ti)},cu.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Vd=function(A,D){this.wrap=A,this.canonical=D,this.key=hf(A,D.z,D.z,D.x,D.y)},Ja=function(A,D,K,he,Ee){this.overscaledZ=A,this.wrap=D,this.canonical=new cu(K,+he,+Ee),this.key=hf(D,A,K,he,Ee)};function hf(A,D,K,he,Ee){(A*=2)<0&&(A=-1*A-1);var ze=1<<K;return(ze*ze*A+ze*Ee+he).toString(36)+K.toString(36)+D.toString(36)}Ja.prototype.equals=function(A){return this.overscaledZ===A.overscaledZ&&this.wrap===A.wrap&&this.canonical.equals(A.canonical)},Ja.prototype.scaledTo=function(A){var D=this.canonical.z-A;return A>this.canonical.z?new Ja(A,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ja(A,this.wrap,A,this.canonical.x>>D,this.canonical.y>>D)},Ja.prototype.calculateScaledKey=function(A,D){var K=this.canonical.z-A;return A>this.canonical.z?hf(this.wrap*+D,A,this.canonical.z,this.canonical.x,this.canonical.y):hf(this.wrap*+D,A,A,this.canonical.x>>K,this.canonical.y>>K)},Ja.prototype.isChildOf=function(A){if(A.wrap!==this.wrap)return!1;var D=this.canonical.z-A.canonical.z;return 0===A.overscaledZ||A.overscaledZ<this.overscaledZ&&A.canonical.x===this.canonical.x>>D&&A.canonical.y===this.canonical.y>>D},Ja.prototype.children=function(A){if(this.overscaledZ>=A)return[new Ja(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var D=this.canonical.z+1,K=2*this.canonical.x,he=2*this.canonical.y;return[new Ja(D,this.wrap,D,K,he),new Ja(D,this.wrap,D,K+1,he),new Ja(D,this.wrap,D,K,he+1),new Ja(D,this.wrap,D,K+1,he+1)]},Ja.prototype.isLessThan=function(A){return this.wrap<A.wrap||!(this.wrap>A.wrap)&&(this.overscaledZ<A.overscaledZ||!(this.overscaledZ>A.overscaledZ)&&(this.canonical.x<A.canonical.x||!(this.canonical.x>A.canonical.x)&&this.canonical.y<A.canonical.y))},Ja.prototype.wrapped=function(){return new Ja(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Ja.prototype.unwrapTo=function(A){return new Ja(this.overscaledZ,A,this.canonical.z,this.canonical.x,this.canonical.y)},Ja.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Ja.prototype.toUnwrapped=function(){return new Vd(this.wrap,this.canonical)},Ja.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Ja.prototype.getTilePoint=function(A){return this.canonical.getTilePoint(new Du(A.x-this.wrap,A.y))},Hr("CanonicalTileID",cu),Hr("OverscaledTileID",Ja,{omit:["posMatrix"]});var zu=function(A,D,K){if(this.uid=A,D.height!==D.width)throw new RangeError("DEM tiles must be square");if(K&&"mapbox"!==K&&"terrarium"!==K)return E('"'+K+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=D.height;var he=this.dim=D.height-2;this.data=new Uint32Array(D.data.buffer),this.encoding=K||"mapbox";for(var Ee=0;Ee<he;Ee++)this.data[this._idx(-1,Ee)]=this.data[this._idx(0,Ee)],this.data[this._idx(he,Ee)]=this.data[this._idx(he-1,Ee)],this.data[this._idx(Ee,-1)]=this.data[this._idx(Ee,0)],this.data[this._idx(Ee,he)]=this.data[this._idx(Ee,he-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(he,-1)]=this.data[this._idx(he-1,0)],this.data[this._idx(-1,he)]=this.data[this._idx(0,he-1)],this.data[this._idx(he,he)]=this.data[this._idx(he-1,he-1)]};zu.prototype.get=function(A,D){var K=new Uint8Array(this.data.buffer),he=4*this._idx(A,D);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(K[he],K[he+1],K[he+2])},zu.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,.00390625,32768]:[6553.6,25.6,.1,1e4]},zu.prototype._idx=function(A,D){if(A<-1||A>=this.dim+1||D<-1||D>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(D+1)*this.stride+(A+1)},zu.prototype._unpackMapbox=function(A,D,K){return(256*A*256+256*D+K)/10-1e4},zu.prototype._unpackTerrarium=function(A,D,K){return 256*A+D+K/256-32768},zu.prototype.getPixels=function(){return new Za({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},zu.prototype.backfillBorder=function(A,D,K){if(this.dim!==A.dim)throw new Error("dem dimension mismatch");var he=D*this.dim,Ee=D*this.dim+this.dim,ze=K*this.dim,We=K*this.dim+this.dim;switch(D){case-1:he=Ee-1;break;case 1:Ee=he+1}switch(K){case-1:ze=We-1;break;case 1:We=ze+1}for(var rt=-D*this.dim,gt=-K*this.dim,Mt=ze;Mt<We;Mt++)for(var Ct=he;Ct<Ee;Ct++)this.data[this._idx(Ct,Mt)]=A.data[this._idx(Ct+rt,Mt+gt)]},Hr("DEMData",zu);var qf=function(A){this._stringToNumber={},this._numberToString=[];for(var D=0;D<A.length;D++){var K=A[D];this._stringToNumber[K]=D,this._numberToString[D]=K}};qf.prototype.encode=function(A){return this._stringToNumber[A]},qf.prototype.decode=function(A){return this._numberToString[A]};var Wf=function(A,D,K,he,Ee){this.type="Feature",this._vectorTileFeature=A,A._z=D,A._x=K,A._y=he,this.properties=A.properties,this.id=Ee},Gd={geometry:{configurable:!0}};Gd.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Gd.geometry.set=function(A){this._geometry=A},Wf.prototype.toJSON=function(){var A={geometry:this.geometry};for(var D in this)"_geometry"!==D&&"_vectorTileFeature"!==D&&(A[D]=this[D]);return A},Object.defineProperties(Wf.prototype,Gd);var ql=function(){this.state={},this.stateChanges={},this.deletedStates={}};ql.prototype.updateState=function(A,D,K){var he=String(D);if(this.stateChanges[A]=this.stateChanges[A]||{},this.stateChanges[A][he]=this.stateChanges[A][he]||{},c(this.stateChanges[A][he],K),null===this.deletedStates[A])for(var Ee in this.deletedStates[A]={},this.state[A])Ee!==he&&(this.deletedStates[A][Ee]=null);else if(this.deletedStates[A]&&null===this.deletedStates[A][he])for(var ze in this.deletedStates[A][he]={},this.state[A][he])K[ze]||(this.deletedStates[A][he][ze]=null);else for(var We in K)this.deletedStates[A]&&this.deletedStates[A][he]&&null===this.deletedStates[A][he][We]&&delete this.deletedStates[A][he][We]},ql.prototype.removeFeatureState=function(A,D,K){if(null!==this.deletedStates[A]){var he=String(D);if(this.deletedStates[A]=this.deletedStates[A]||{},K&&void 0!==D)null!==this.deletedStates[A][he]&&(this.deletedStates[A][he]=this.deletedStates[A][he]||{},this.deletedStates[A][he][K]=null);else if(void 0!==D)if(this.stateChanges[A]&&this.stateChanges[A][he])for(K in this.deletedStates[A][he]={},this.stateChanges[A][he])this.deletedStates[A][he][K]=null;else this.deletedStates[A][he]=null;else this.deletedStates[A]=null}},ql.prototype.getState=function(A,D){var K=String(D),ze=c({},(this.state[A]||{})[K],(this.stateChanges[A]||{})[K]);if(null===this.deletedStates[A])return{};if(this.deletedStates[A]){var We=this.deletedStates[A][D];if(null===We)return{};for(var rt in We)delete ze[rt]}return ze},ql.prototype.initializeTileState=function(A,D){A.setFeatureState(this.state,D)},ql.prototype.coalesceChanges=function(A,D){var K={};for(var he in this.stateChanges){this.state[he]=this.state[he]||{};var Ee={};for(var ze in this.stateChanges[he])this.state[he][ze]||(this.state[he][ze]={}),c(this.state[he][ze],this.stateChanges[he][ze]),Ee[ze]=this.state[he][ze];K[he]=Ee}for(var We in this.deletedStates){this.state[We]=this.state[We]||{};var rt={};if(null===this.deletedStates[We])for(var gt in this.state[We])rt[gt]={},this.state[We][gt]={};else for(var Mt in this.deletedStates[We]){if(null===this.deletedStates[We][Mt])this.state[We][Mt]={};else for(var Ct=0,Gt=Object.keys(this.deletedStates[We][Mt]);Ct<Gt.length;Ct+=1)delete this.state[We][Mt][Gt[Ct]];rt[Mt]=this.state[We][Mt]}K[We]=K[We]||{},c(K[We],rt)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(K).length)for(var Zt in A)A[Zt].setFeatureState(K,D)};var Fu=function(A,D){this.tileID=A,this.x=A.canonical.x,this.y=A.canonical.y,this.z=A.canonical.z,this.grid=new Ml(Ti,16,0),this.grid3D=new Ml(Ti,16,0),this.featureIndexArray=new Bn,this.promoteId=D};function Hd(A,D,K,he,Ee){return b(A,function(ze,We){var rt=D instanceof pl?D.get(We):null;return rt&&rt.evaluate?rt.evaluate(K,he,Ee):rt})}function qd(A){for(var D=1/0,K=1/0,he=-1/0,Ee=-1/0,ze=0,We=A;ze<We.length;ze+=1){var rt=We[ze];D=Math.min(D,rt.x),K=Math.min(K,rt.y),he=Math.max(he,rt.x),Ee=Math.max(Ee,rt.y)}return{minX:D,minY:K,maxX:he,maxY:Ee}}function e0(A,D){return D-A}Fu.prototype.insert=function(A,D,K,he,Ee,ze){var We=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(K,he,Ee);for(var rt=ze?this.grid3D:this.grid,gt=0;gt<D.length;gt++){for(var Mt=D[gt],Ct=[1/0,1/0,-1/0,-1/0],Gt=0;Gt<Mt.length;Gt++){var $t=Mt[Gt];Ct[0]=Math.min(Ct[0],$t.x),Ct[1]=Math.min(Ct[1],$t.y),Ct[2]=Math.max(Ct[2],$t.x),Ct[3]=Math.max(Ct[3],$t.y)}Ct[0]<Ti&&Ct[1]<Ti&&Ct[2]>=0&&Ct[3]>=0&&rt.insert(We,Ct[0],Ct[1],Ct[2],Ct[3])}},Fu.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Ec.VectorTile(new lc(this.rawTileData)).layers,this.sourceLayerCoder=new qf(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Fu.prototype.query=function(A,D,K,he){var Ee=this;this.loadVTLayers();for(var ze=A.params||{},We=Ti/A.tileSize/A.scale,rt=Pl(ze.filter),gt=A.queryGeometry,Mt=A.queryPadding*We,Ct=qd(gt),Gt=this.grid.query(Ct.minX-Mt,Ct.minY-Mt,Ct.maxX+Mt,Ct.maxY+Mt),$t=qd(A.cameraQueryGeometry),Zt=0,mn=this.grid3D.query($t.minX-Mt,$t.minY-Mt,$t.maxX+Mt,$t.maxY+Mt,function(ir,ur,yr,Rr){return function(Er,Nr,Ur,ai,Kr){for(var oi=0,ei=Er;oi<ei.length;oi+=1){var Zr=ei[oi];if(Nr<=Zr.x&&Ur<=Zr.y&&ai>=Zr.x&&Kr>=Zr.y)return!0}var Ei=[new t(Nr,Ur),new t(Nr,Kr),new t(ai,Kr),new t(ai,Ur)];if(Er.length>2)for(var ci=0,ea=Ei;ci<ea.length;ci+=1)if(iu(Er,ea[ci]))return!0;for(var ni=0;ni<Er.length-1;ni++)if(Eu(Er[ni],Er[ni+1],Ei))return!0;return!1}(A.cameraQueryGeometry,ir-Mt,ur-Mt,yr+Mt,Rr+Mt)});Zt<mn.length;Zt+=1)Gt.push(mn[Zt]);Gt.sort(e0);for(var Rn,In={},Yn=function(ir){var ur=Gt[ir];if(ur!==Rn){Rn=ur;var yr=Ee.featureIndexArray.get(ur),Rr=null;Ee.loadMatchingFeature(In,yr.bucketIndex,yr.sourceLayerIndex,yr.featureIndex,rt,ze.layers,ze.availableImages,D,K,he,function(Er,Nr,Ur){return Rr||(Rr=gs(Er)),Nr.queryIntersectsFeature(gt,Er,Ur,Rr,Ee.z,A.transform,We,A.pixelPosMatrix)})}},Kn=0;Kn<Gt.length;Kn++)Yn(Kn);return In},Fu.prototype.loadMatchingFeature=function(A,D,K,he,Ee,ze,We,rt,gt,Mt,Ct){var Gt=this.bucketLayerIDs[D];if(!ze||function(Er,Nr){for(var Ur=0;Ur<Er.length;Ur++)if(Nr.indexOf(Er[Ur])>=0)return!0;return!1}(ze,Gt)){var $t=this.sourceLayerCoder.decode(K),Zt=this.vtLayers[$t].feature(he);if(Ee.needGeometry){var mn=oa(Zt,!0);if(!Ee.filter(new bi(this.tileID.overscaledZ),mn,this.tileID.canonical))return}else if(!Ee.filter(new bi(this.tileID.overscaledZ),Zt))return;for(var xn=this.getId(Zt,$t),Rn=0;Rn<Gt.length;Rn++){var In=Gt[Rn];if(!(ze&&ze.indexOf(In)<0)){var Yn=rt[In];if(Yn){var Kn={};void 0!==xn&&Mt&&(Kn=Mt.getState(Yn.sourceLayer||"_geojsonTileLayer",xn));var ir=c({},gt[In]);ir.paint=Hd(ir.paint,Yn.paint,Zt,Kn,We),ir.layout=Hd(ir.layout,Yn.layout,Zt,Kn,We);var ur=!Ct||Ct(Zt,Yn,Kn);if(ur){var yr=new Wf(Zt,this.z,this.x,this.y,xn);yr.layer=ir;var Rr=A[In];void 0===Rr&&(Rr=A[In]=[]),Rr.push({featureIndex:he,feature:yr,intersectionZ:ur})}}}}}},Fu.prototype.lookupSymbolFeatures=function(A,D,K,he,Ee,ze,We,rt){var gt={};this.loadVTLayers();for(var Mt=Pl(Ee),Ct=0,Gt=A;Ct<Gt.length;Ct+=1)this.loadMatchingFeature(gt,K,he,Gt[Ct],Mt,ze,We,rt,D);return gt},Fu.prototype.hasLayer=function(A){for(var D=0,K=this.bucketLayerIDs;D<K.length;D+=1)for(var he=0,Ee=K[D];he<Ee.length;he+=1)if(A===Ee[he])return!0;return!1},Fu.prototype.getId=function(A,D){var K=A.id;return this.promoteId&&"boolean"==typeof(K=A.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[D]])&&(K=Number(K)),K},Hr("FeatureIndex",Fu,{omit:["rawTileData","sourceLayerCoder"]});var ro=function(A,D){this.tileID=A,this.uid=d(),this.uses=0,this.tileSize=D,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ro.prototype.registerFadeDuration=function(A){var D=A+this.timeAdded;D<$.now()||this.fadeEndTime&&D<this.fadeEndTime||(this.fadeEndTime=D)},ro.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},ro.prototype.loadVectorData=function(A,D,K){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",A){for(var he in A.featureIndex&&(this.latestFeatureIndex=A.featureIndex,A.rawTileData?(this.latestRawTileData=A.rawTileData,this.latestFeatureIndex.rawTileData=A.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=A.collisionBoxArray,this.buckets=function(Mt,Ct){var Gt={};if(!Ct)return Gt;for(var $t=function(){var xn=mn[Zt],Rn=xn.layerIds.map(function(ir){return Ct.getLayer(ir)}).filter(Boolean);if(0!==Rn.length){xn.layers=Rn,xn.stateDependentLayerIds&&(xn.stateDependentLayers=xn.stateDependentLayerIds.map(function(ir){return Rn.filter(function(ur){return ur.id===ir})[0]}));for(var In=0,Yn=Rn;In<Yn.length;In+=1)Gt[Yn[In].id]=xn}},Zt=0,mn=Mt;Zt<mn.length;Zt+=1)$t();return Gt}(A.buckets,D.style),this.hasSymbolBuckets=!1,this.buckets){var Ee=this.buckets[he];if(Ee instanceof Qi){if(this.hasSymbolBuckets=!0,!K)break;Ee.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var ze in this.buckets){var We=this.buckets[ze];if(We instanceof Qi&&We.hasRTLText){this.hasRTLText=!0,to.isLoading()||to.isLoaded()||"deferred"!==Sl()||Rl();break}}for(var rt in this.queryPadding=0,this.buckets){var gt=this.buckets[rt];this.queryPadding=Math.max(this.queryPadding,D.style.getLayer(rt).queryRadius(gt))}A.imageAtlas&&(this.imageAtlas=A.imageAtlas),A.glyphAtlasImage&&(this.glyphAtlasImage=A.glyphAtlasImage)}else this.collisionBoxArray=new It},ro.prototype.unloadVectorData=function(){for(var A in this.buckets)this.buckets[A].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ro.prototype.getBucket=function(A){return this.buckets[A.id]},ro.prototype.upload=function(A){for(var D in this.buckets){var K=this.buckets[D];K.uploadPending()&&K.upload(A)}var he=A.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new cc(A,this.imageAtlas.image,he.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new cc(A,this.glyphAtlasImage,he.ALPHA),this.glyphAtlasImage=null)},ro.prototype.prepare=function(A){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(A,this.imageAtlasTexture)},ro.prototype.queryRenderedFeatures=function(A,D,K,he,Ee,ze,We,rt,gt,Mt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:he,cameraQueryGeometry:Ee,scale:ze,tileSize:this.tileSize,pixelPosMatrix:Mt,transform:rt,params:We,queryPadding:this.queryPadding*gt},A,D,K):{}},ro.prototype.querySourceFeatures=function(A,D){var K=this.latestFeatureIndex;if(K&&K.rawTileData){var he=K.loadVTLayers(),Ee=D?D.sourceLayer:"",ze=he._geojsonTileLayer||he[Ee];if(ze)for(var We=Pl(D&&D.filter),rt=this.tileID.canonical,gt=rt.z,Mt=rt.x,Ct=rt.y,Gt={z:gt,x:Mt,y:Ct},$t=0;$t<ze.length;$t++){var Zt=ze.feature($t);if(We.needGeometry){var mn=oa(Zt,!0);if(!We.filter(new bi(this.tileID.overscaledZ),mn,this.tileID.canonical))continue}else if(!We.filter(new bi(this.tileID.overscaledZ),Zt))continue;var xn=K.getId(Zt,Ee),Rn=new Wf(Zt,gt,Mt,Ct,xn);Rn.tile=Gt,A.push(Rn)}}},ro.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},ro.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ro.prototype.setExpiryData=function(A){var D=this.expirationTime;if(A.cacheControl){var K=z(A.cacheControl);K["max-age"]&&(this.expirationTime=Date.now()+1e3*K["max-age"])}else A.expires&&(this.expirationTime=new Date(A.expires).getTime());if(this.expirationTime){var he=Date.now(),Ee=!1;if(this.expirationTime>he)Ee=!1;else if(D)if(this.expirationTime<D)Ee=!0;else{var ze=this.expirationTime-D;ze?this.expirationTime=he+Math.max(ze,3e4):Ee=!0}else Ee=!0;Ee?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ro.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},ro.prototype.setFeatureState=function(A,D){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(A).length){var K=this.latestFeatureIndex.loadVTLayers();for(var he in this.buckets)if(D.style.hasLayer(he)){var Ee=this.buckets[he],ze=Ee.layers[0].sourceLayer||"_geojsonTileLayer",We=K[ze],rt=A[ze];if(We&&rt&&0!==Object.keys(rt).length){Ee.update(rt,We,this.imageAtlas&&this.imageAtlas.patternPositions||{});var gt=D&&D.style&&D.style.getLayer(he);gt&&(this.queryPadding=Math.max(this.queryPadding,gt.queryRadius(Ee)))}}}},ro.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},ro.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<$.now()},ro.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ro.prototype.setHoldDuration=function(A){this.symbolFadeHoldUntil=$.now()+A},ro.prototype.setDependencies=function(A,D){for(var K={},he=0,Ee=D;he<Ee.length;he+=1)K[Ee[he]]=!0;this.dependencies[A]=K},ro.prototype.hasDependency=function(A,D){for(var K=0,he=A;K<he.length;K+=1){var ze=this.dependencies[he[K]];if(ze)for(var We=0,rt=D;We<rt.length;We+=1)if(ze[rt[We]])return!0}return!1};var Xu=r.performance,Wd=function(A){this._marks={start:[A.url,"start"].join("#"),end:[A.url,"end"].join("#"),measure:A.url.toString()},Xu.mark(this._marks.start)};Wd.prototype.finish=function(){Xu.mark(this._marks.end);var A=Xu.getEntriesByName(this._marks.measure);return 0===A.length&&(Xu.measure(this._marks.measure,this._marks.start,this._marks.end),A=Xu.getEntriesByName(this._marks.measure),Xu.clearMarks(this._marks.start),Xu.clearMarks(this._marks.end),Xu.clearMeasures(this._marks.measure)),A},o.Actor=Uc,o.AlphaImage=qu,o.CanonicalTileID=cu,o.CollisionBoxArray=It,o.Color=jn,o.DEMData=zu,o.DataConstantProperty=Vr,o.DictionaryCoder=qf,o.EXTENT=Ti,o.ErrorEvent=Ge,o.EvaluationParameters=bi,o.Event=Ve,o.Evented=ut,o.FeatureIndex=Fu,o.FillBucket=jl,o.FillExtrusionBucket=Vl,o.ImageAtlas=rf,o.ImagePosition=Oc,o.LineBucket=Ao,o.LngLat=xa,o.LngLatBounds=Ka,o.MercatorCoordinate=Du,o.ONE_EM=Xa,o.OverscaledTileID=Ja,o.Point=t,o.Point$1=t,o.Properties=ya,o.Protobuf=lc,o.RGBAImage=Za,o.RequestManager=we,o.RequestPerformance=Wd,o.ResourceType=_t,o.SegmentVector=er,o.SourceFeatureState=ql,o.StructArrayLayout1ui2=xt,o.StructArrayLayout2f1f2i16=oe,o.StructArrayLayout2i4=No,o.StructArrayLayout3ui6=Ae,o.StructArrayLayout4i8=Ls,o.SymbolBucket=Qi,o.Texture=cc,o.Tile=ro,o.Transitionable=es,o.Uniform1f=pi,o.Uniform1i=li,o.Uniform2f=_i,o.Uniform3f=na,o.Uniform4f=ga,o.UniformColor=Ua,o.UniformMatrix4f=aa,o.UnwrappedTileID=Vd,o.ValidationError=yt,o.WritingMode=Mo,o.ZoomHistory=zo,o.add=function(A,D,K){return A[0]=D[0]+K[0],A[1]=D[1]+K[1],A[2]=D[2]+K[2],A},o.addDynamicAttributes=Rd,o.asyncAll=function(A,D,K){if(!A.length)return K(null,[]);var he=A.length,Ee=new Array(A.length),ze=null;A.forEach(function(We,rt){D(We,function(gt,Mt){gt&&(ze=gt),Ee[rt]=Mt,0==--he&&K(ze,Ee)})})},o.bezier=a,o.bindAll=x,o.browser=$,o.cacheEntryPossiblyAdded=function(A){++Tt>Ne&&(A.getActor().send("enforceCacheSizeLimit",Le),Tt=0)},o.clamp=u,o.clearTileCache=function(A){var D=r.caches.delete(Me);A&&D.catch(A).then(function(){return A()})},o.clipLine=Nf,o.clone=function(A){var D=new Ps(16);return D[0]=A[0],D[1]=A[1],D[2]=A[2],D[3]=A[3],D[4]=A[4],D[5]=A[5],D[6]=A[6],D[7]=A[7],D[8]=A[8],D[9]=A[9],D[10]=A[10],D[11]=A[11],D[12]=A[12],D[13]=A[13],D[14]=A[14],D[15]=A[15],D},o.clone$1=S,o.clone$2=function(A){var D=new Ps(3);return D[0]=A[0],D[1]=A[1],D[2]=A[2],D},o.collisionCircleLayout=ef,o.config=J,o.create=function(){var A=new Ps(16);return Ps!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=0,A[12]=0,A[13]=0,A[14]=0),A[0]=1,A[5]=1,A[10]=1,A[15]=1,A},o.create$1=function(){var A=new Ps(9);return Ps!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[5]=0,A[6]=0,A[7]=0),A[0]=1,A[4]=1,A[8]=1,A},o.create$2=function(){var A=new Ps(4);return Ps!=Float32Array&&(A[1]=0,A[2]=0),A[0]=1,A[3]=1,A},o.createCommonjsModule=T,o.createExpression=Ea,o.createLayout=Wi,o.createStyleLayer=function(A){return"custom"===A.type?new $p(A):new Qp[A.type](A)},o.cross=function(A,D,K){var he=D[0],Ee=D[1],ze=D[2],We=K[0],rt=K[1],gt=K[2];return A[0]=Ee*gt-ze*rt,A[1]=ze*We-he*gt,A[2]=he*rt-Ee*We,A},o.deepEqual=function A(D,K){if(Array.isArray(D)){if(!Array.isArray(K)||D.length!==K.length)return!1;for(var he=0;he<D.length;he++)if(!A(D[he],K[he]))return!1;return!0}if("object"==typeof D&&null!==D&&null!==K){if("object"!=typeof K||Object.keys(D).length!==Object.keys(K).length)return!1;for(var Ee in D)if(!A(D[Ee],K[Ee]))return!1;return!0}return D===K},o.dot=function(A,D){return A[0]*D[0]+A[1]*D[1]+A[2]*D[2]},o.dot$1=function(A,D){return A[0]*D[0]+A[1]*D[1]+A[2]*D[2]+A[3]*D[3]},o.ease=s,o.emitValidationErrors=eo,o.endsWith=v,o.enforceCacheSizeLimit=function(A){He(),ge&&ge.then(function(D){D.keys().then(function(K){for(var he=0;he<K.length-A;he++)D.delete(K[he])})})},o.evaluateSizeForFeature=_d,o.evaluateSizeForZoom=wd,o.evaluateVariableOffset=Hp,o.evented=Ma,o.extend=c,o.featureFilter=Pl,o.filterObject=h,o.fromRotation=function(A,D){var K=Math.sin(D),he=Math.cos(D);return A[0]=he,A[1]=K,A[2]=0,A[3]=-K,A[4]=he,A[5]=0,A[6]=0,A[7]=0,A[8]=1,A},o.getAnchorAlignment=Sh,o.getAnchorJustification=Pd,o.getArrayBuffer=Ut,o.getImage=$e,o.getJSON=function(A,D){return jt(c(A,{type:"json"}),D)},o.getRTLTextPluginStatus=Sl,o.getReferrer=it,o.getVideo=function(A,D){var K,he,Ee=r.document.createElement("video");Ee.muted=!0,Ee.onloadstart=function(){D(null,Ee)};for(var ze=0;ze<A.length;ze++){var We=r.document.createElement("source");K=A[ze],he=void 0,(he=r.document.createElement("a")).href=K,he.protocol===r.document.location.protocol&&he.host===r.document.location.host||(Ee.crossOrigin="Anonymous"),We.src=A[ze],Ee.appendChild(We)}return{cancel:function(){}}},o.identity=Ac,o.invert=function(A,D){var K=D[0],he=D[1],Ee=D[2],ze=D[3],We=D[4],rt=D[5],gt=D[6],Mt=D[7],Ct=D[8],Gt=D[9],$t=D[10],Zt=D[11],mn=D[12],xn=D[13],Rn=D[14],In=D[15],Yn=K*rt-he*We,Kn=K*gt-Ee*We,ir=K*Mt-ze*We,ur=he*gt-Ee*rt,yr=he*Mt-ze*rt,Rr=Ee*Mt-ze*gt,Er=Ct*xn-Gt*mn,Nr=Ct*Rn-$t*mn,Ur=Ct*In-Zt*mn,ai=Gt*Rn-$t*xn,Kr=Gt*In-Zt*xn,oi=$t*In-Zt*Rn,ei=Yn*oi-Kn*Kr+ir*ai+ur*Ur-yr*Nr+Rr*Er;return ei?(A[0]=(rt*oi-gt*Kr+Mt*ai)*(ei=1/ei),A[1]=(Ee*Kr-he*oi-ze*ai)*ei,A[2]=(xn*Rr-Rn*yr+In*ur)*ei,A[3]=($t*yr-Gt*Rr-Zt*ur)*ei,A[4]=(gt*Ur-We*oi-Mt*Nr)*ei,A[5]=(K*oi-Ee*Ur+ze*Nr)*ei,A[6]=(Rn*ir-mn*Rr-In*Kn)*ei,A[7]=(Ct*Rr-$t*ir+Zt*Kn)*ei,A[8]=(We*Kr-rt*Ur+Mt*Er)*ei,A[9]=(he*Ur-K*Kr-ze*Er)*ei,A[10]=(mn*yr-xn*ir+In*Yn)*ei,A[11]=(Gt*ir-Ct*yr-Zt*Yn)*ei,A[12]=(rt*Nr-We*ai-gt*Er)*ei,A[13]=(K*ai-he*Nr+Ee*Er)*ei,A[14]=(xn*Kn-mn*ur-Rn*Yn)*ei,A[15]=(Ct*ur-Gt*Kn+$t*Yn)*ei,A):null},o.isChar=Or,o.isMapboxURL=Te,o.keysDifference=function(A,D){var K=[];for(var he in A)he in D||K.push(he);return K},o.makeRequest=jt,o.mapObject=b,o.mercatorXfromLng=Ih,o.mercatorYfromLat=Ph,o.mercatorZfromAltitude=Ud,o.mul=T0,o.multiply=gp,o.mvt=Ec,o.nextPowerOfTwo=function(A){return A<=1?1:Math.pow(2,Math.ceil(Math.log(A)/Math.LN2))},o.normalize=function(A,D){var K=D[0],he=D[1],Ee=D[2],ze=K*K+he*he+Ee*Ee;return ze>0&&(ze=1/Math.sqrt(ze)),A[0]=D[0]*ze,A[1]=D[1]*ze,A[2]=D[2]*ze,A},o.number=Qr,o.offscreenCanvasSupported=At,o.ortho=function(A,D,K,he,Ee,ze,We){var rt=1/(D-K),gt=1/(he-Ee),Mt=1/(ze-We);return A[0]=-2*rt,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=-2*gt,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=2*Mt,A[11]=0,A[12]=(D+K)*rt,A[13]=(Ee+he)*gt,A[14]=(We+ze)*Mt,A[15]=1,A},o.parseGlyphPBF=function(A){return new lc(A).readFields(Fp,[])},o.pbf=lc,o.performSymbolLayout=function(A,D,K,he,Ee,ze,We){A.createArrays(),A.tilePixelRatio=Ti/(512*A.overscaling),A.compareText={},A.iconsNeedLinear=!1;var gt=A.layers[0].layout,Mt=A.layers[0]._unevaluatedLayout._values,Ct={};if("composite"===A.textSizeData.kind){var Gt=A.textSizeData,Zt=Gt.maxZoom;Ct.compositeTextSizes=[Mt["text-size"].possiblyEvaluate(new bi(Gt.minZoom),We),Mt["text-size"].possiblyEvaluate(new bi(Zt),We)]}if("composite"===A.iconSizeData.kind){var mn=A.iconSizeData,Rn=mn.maxZoom;Ct.compositeIconSizes=[Mt["icon-size"].possiblyEvaluate(new bi(mn.minZoom),We),Mt["icon-size"].possiblyEvaluate(new bi(Rn),We)]}Ct.layoutTextSize=Mt["text-size"].possiblyEvaluate(new bi(A.zoom+1),We),Ct.layoutIconSize=Mt["icon-size"].possiblyEvaluate(new bi(A.zoom+1),We),Ct.textMaxSize=Mt["text-size"].possiblyEvaluate(new bi(18));for(var In=gt.get("text-line-height")*Xa,Yn="map"===gt.get("text-rotation-alignment")&&"point"!==gt.get("symbol-placement"),Kn=gt.get("text-keep-upright"),ir=gt.get("text-size"),ur=function(){var Er=Rr[yr],Nr=gt.get("text-font").evaluate(Er,{},We).join(","),Ur=ir.evaluate(Er,{},We),ai=Ct.layoutTextSize.evaluate(Er,{},We),Kr=Ct.layoutIconSize.evaluate(Er,{},We),oi={horizontal:{},vertical:void 0},ei=Er.text,Zr=[0,0];if(ei){var Ei=ei.toString(),ci=gt.get("text-letter-spacing").evaluate(Er,{},We)*Xa,ea=function(gi){for(var Oi=0,Ia=gi;Oi<Ia.length;Oi+=1)if(la=Ia[Oi].charCodeAt(0),Or.Arabic(la)||Or["Arabic Supplement"](la)||Or["Arabic Extended-A"](la)||Or["Arabic Presentation Forms-A"](la)||Or["Arabic Presentation Forms-B"](la))return!1;var la;return!0}(Ei)?ci:0,ni=gt.get("text-anchor").evaluate(Er,{},We),Xi=gt.get("text-variable-anchor");if(!Xi){var fa=gt.get("text-radial-offset").evaluate(Er,{},We);Zr=fa?Hp(ni,[fa*Xa,Uf]):gt.get("text-offset").evaluate(Er,{},We).map(function(gi){return gi*Xa})}var Ki=Yn?"center":gt.get("text-justify").evaluate(Er,{},We),ji=gt.get("symbol-placement"),sa="point"===ji?gt.get("text-max-width").evaluate(Er,{},We)*Xa:0,Va=function(){A.allowVerticalPlacement&&ru(Ei)&&(oi.vertical=Rc(ei,D,K,Ee,Nr,sa,In,ni,"left",ea,Zr,Mo.vertical,!0,ji,ai,Ur))};if(!Yn&&Xi){for(var ba="auto"===Ki?Xi.map(function(gi){return Pd(gi)}):[Ki],lo=!1,So=0;So<ba.length;So++){var po=ba[So];if(!oi.horizontal[po])if(lo)oi.horizontal[po]=oi.horizontal[0];else{var Vo=Rc(ei,D,K,Ee,Nr,sa,In,"center",po,ea,Zr,Mo.horizontal,!1,ji,ai,Ur);Vo&&(oi.horizontal[po]=Vo,lo=1===Vo.positionedLines.length)}}Va()}else{"auto"===Ki&&(Ki=Pd(ni));var go=Rc(ei,D,K,Ee,Nr,sa,In,ni,Ki,ea,Zr,Mo.horizontal,!1,ji,ai,Ur);go&&(oi.horizontal[Ki]=go),Va(),ru(Ei)&&Yn&&Kn&&(oi.vertical=Rc(ei,D,K,Ee,Nr,sa,In,ni,Ki,ea,Zr,Mo.vertical,!1,ji,ai,Ur))}}var gi,Oi,la,is,Go,Ga=void 0,mo=!1;if(Er.icon&&Er.icon.name){var uo=he[Er.icon.name];uo&&(gi=Ee[Er.icon.name],Oi=gt.get("icon-offset").evaluate(Er,{},We),la=Sh(gt.get("icon-anchor").evaluate(Er,{},We)),Ga={image:gi,top:Go=Oi[1]-gi.displaySize[1]*la.verticalAlign,bottom:Go+gi.displaySize[1],left:is=Oi[0]-gi.displaySize[0]*la.horizontalAlign,right:is+gi.displaySize[0]},mo=uo.sdf,void 0===A.sdfIcons?A.sdfIcons=uo.sdf:A.sdfIcons!==uo.sdf&&E("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(uo.pixelRatio!==A.pixelRatio||0!==gt.get("icon-rotate").constantOr(1))&&(A.iconsNeedLinear=!0))}var io=qp(oi.horizontal)||oi.vertical;A.iconsInText=!!io&&io.iconsInText,(io||Ga)&&function(gi,Oi,Ia,la,Sa,ha,Ui,Pa,is,Rs,Go){var yl=ha.textMaxSize.evaluate(Oi,{});void 0===yl&&(yl=Ui);var en,Ha=gi.layers[0].layout,xl=Ha.get("icon-offset").evaluate(Oi,{},Go),Xs=qp(Ia.horizontal),Bu=Ui/24,Yf=gi.tilePixelRatio*Bu,fc=gi.tilePixelRatio*yl/24,Vi=gi.tilePixelRatio*Pa,df=gi.tilePixelRatio*Ha.get("symbol-spacing"),pf=Ha.get("text-padding")*gi.tilePixelRatio,fu=Ha.get("icon-padding")*gi.tilePixelRatio,hc=Ha.get("text-max-angle")/180*Math.PI,Oa="map"===Ha.get("text-rotation-alignment")&&"point"!==Ha.get("symbol-placement"),Rh="map"===Ha.get("icon-rotation-alignment")&&"point"!==Ha.get("symbol-placement"),gf=Ha.get("symbol-placement"),Zf=df/2,hu=Ha.get("icon-text-fit");la&&"none"!==hu&&(gi.allowVerticalPlacement&&Ia.vertical&&(en=bd(la,Ia.vertical,hu,Ha.get("icon-text-fit-padding"),xl,Bu)),Xs&&(la=bd(la,Xs,hu,Ha.get("icon-text-fit-padding"),xl,Bu)));var Ds=function(t0,_f){_f.x<0||_f.x>=Ti||_f.y<0||_f.y>=Ti||function(Ba,Wl,n0,Ju,Nh,Jd,$f,pu,Qf,wf,eh,Tf,jh,$d,kf,th,Qd,ep,tp,np,Js,nh,rp,Yl,r0){var ip,mc,Gc,Hc,qc,Af=Ba.addToLineVertexArray(Wl,n0),a0=0,o0=0,s0=0,l0=0,ap=-1,op=-1,$u={},sp=Dr(""),Uh=0,Vh=0;if(void 0===pu._unevaluatedLayout.getValue("text-radial-offset")?(Uh=(ip=pu.layout.get("text-offset").evaluate(Js,{},Yl).map(function(ah){return ah*Xa}))[0],Vh=ip[1]):(Uh=pu.layout.get("text-radial-offset").evaluate(Js,{},Yl)*Xa,Vh=Uf),Ba.allowVerticalPlacement&&Ju.vertical){var u0=pu.layout.get("text-rotate").evaluate(Js,{},Yl)+90;Hc=new zc(Qf,Wl,wf,eh,Tf,Ju.vertical,jh,$d,kf,u0),$f&&(qc=new zc(Qf,Wl,wf,eh,Tf,$f,Qd,ep,kf,u0))}if(Nh){var Gh=pu.layout.get("icon-rotate").evaluate(Js,{}),lp="none"!==pu.layout.get("icon-text-fit"),up=Cd(Nh,Gh,rp,lp),Hh=$f?Cd($f,Gh,rp,lp):void 0;Gc=new zc(Qf,Wl,wf,eh,Tf,Nh,Qd,ep,!1,Gh),a0=4*up.length;var cp=Ba.iconSizeData,Mf=null;"source"===cp.kind?(Mf=[Gl*pu.layout.get("icon-size").evaluate(Js,{})])[0]>uc&&E(Ba.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===cp.kind&&((Mf=[Gl*nh.compositeIconSizes[0].evaluate(Js,{},Yl),Gl*nh.compositeIconSizes[1].evaluate(Js,{},Yl)])[0]>uc||Mf[1]>uc)&&E(Ba.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Ba.addSymbols(Ba.icon,up,Mf,np,tp,Js,!1,Wl,Af.lineStartIndex,Af.lineLength,-1,Yl),ap=Ba.icon.placedSymbolArray.length-1,Hh&&(o0=4*Hh.length,Ba.addSymbols(Ba.icon,Hh,Mf,np,tp,Js,Mo.vertical,Wl,Af.lineStartIndex,Af.lineLength,-1,Yl),op=Ba.icon.placedSymbolArray.length-1)}for(var fp in Ju.horizontal){var rh=Ju.horizontal[fp];if(!mc){sp=Dr(rh.text);var f0=pu.layout.get("text-rotate").evaluate(Js,{},Yl);mc=new zc(Qf,Wl,wf,eh,Tf,rh,jh,$d,kf,f0)}var hp=1===rh.positionedLines.length;if(s0+=Eh(Ba,Wl,rh,Jd,pu,kf,Js,th,Af,Ju.vertical?Mo.horizontal:Mo.horizontalOnly,hp?Object.keys(Ju.horizontal):[fp],$u,ap,nh,Yl),hp)break}Ju.vertical&&(l0+=Eh(Ba,Wl,Ju.vertical,Jd,pu,kf,Js,th,Af,Mo.vertical,["vertical"],$u,op,nh,Yl));var h0=mc?mc.boxStartIndex:Ba.collisionBoxArray.length,d0=mc?mc.boxEndIndex:Ba.collisionBoxArray.length,p0=Hc?Hc.boxStartIndex:Ba.collisionBoxArray.length,g0=Hc?Hc.boxEndIndex:Ba.collisionBoxArray.length,m0=Gc?Gc.boxStartIndex:Ba.collisionBoxArray.length,v0=Gc?Gc.boxEndIndex:Ba.collisionBoxArray.length,S0=qc?qc.boxStartIndex:Ba.collisionBoxArray.length,y0=qc?qc.boxEndIndex:Ba.collisionBoxArray.length,gu=-1,ih=function(ah,b0){return ah&&ah.circleDiameter?Math.max(ah.circleDiameter,b0):b0};gu=ih(mc,gu),gu=ih(Hc,gu),gu=ih(Gc,gu);var x0=(gu=ih(qc,gu))>-1?1:0;x0&&(gu*=r0/Xa),Ba.glyphOffsetArray.length>=Qi.MAX_GLYPHS&&E("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Js.sortKey&&Ba.addToSortKeyRanges(Ba.symbolInstances.length,Js.sortKey),Ba.symbolInstances.emplaceBack(Wl.x,Wl.y,$u.right>=0?$u.right:-1,$u.center>=0?$u.center:-1,$u.left>=0?$u.left:-1,$u.vertical||-1,ap,op,sp,h0,d0,p0,g0,m0,v0,S0,y0,wf,s0,l0,a0,o0,x0,0,jh,Uh,Vh,gu)}(gi,_f,t0,Ia,la,Sa,en,gi.layers[0],gi.collisionBoxArray,Oi.index,Oi.sourceLayerIndex,gi.index,Yf,pf,Oa,is,Vi,fu,Rh,xl,Oi,ha,Rs,Go,Ui)};if("line"===gf)for(var Ku=0,du=Nf(Oi.geometry,0,0,Ti,Ti);Ku<du.length;Ku+=1)for(var Xf=du[Ku],Vc=0,Kf=Up(Xf,df,hc,Ia.vertical||Xs,la,24,fc,gi.overscaling,Ti);Vc<Kf.length;Vc+=1){var Jf=Kf[Vc];Xs&&Wp(gi,Xs.text,Zf,Jf)||Ds(Xf,Jf)}else if("line-center"===gf)for(var mf=0,vf=Oi.geometry;mf<vf.length;mf+=1){var dc=vf[mf];if(dc.length>1){var yf=Sd(dc,hc,Ia.vertical||Xs,la,24,fc);yf&&Ds(dc,yf)}}else if("Polygon"===Oi.type)for(var pc=0,gc=sc(Oi.geometry,0);pc<gc.length;pc+=1){var xf=gc[pc],Yd=Gp(xf,16);Ds(xf[0],new Yu(Yd.x,Yd.y,0))}else if("LineString"===Oi.type)for(var Dh=0,Zd=Oi.geometry;Dh<Zd.length;Dh+=1){var bf=Zd[Dh];Ds(bf,new Yu(bf[0].x,bf[0].y,0))}else if("Point"===Oi.type)for(var zh=0,Xd=Oi.geometry;zh<Xd.length;zh+=1)for(var Fh=0,Kd=Xd[zh];Fh<Kd.length;Fh+=1){var Bh=Kd[Fh];Ds([Bh],new Yu(Bh.x,Bh.y,0))}}(A,Er,oi,Ga,he,Ct,ai,Kr,Zr,mo,We)},yr=0,Rr=A.features;yr<Rr.length;yr+=1)ur();ze&&A.generateCollisionDebugBuffers()},o.perspective=function(A,D,K,he,Ee){var ze,We=1/Math.tan(D/2);return A[0]=We/K,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=We,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=-1,A[12]=0,A[13]=0,A[15]=0,null!=Ee&&Ee!==1/0?(A[10]=(Ee+he)*(ze=1/(he-Ee)),A[14]=2*Ee*he*ze):(A[10]=-1,A[14]=-2*he),A},o.pick=function(A,D){for(var K={},he=0;he<D.length;he++){var Ee=D[he];Ee in A&&(K[Ee]=A[Ee])}return K},o.plugin=to,o.polygonIntersectsPolygon=Gu,o.postMapLoadEvent=me,o.postTurnstileEvent=Fe,o.potpack=Ou,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.register=Hr,o.registerForPluginStateChange=function(A){return A({pluginStatus:Mi,pluginURL:Aa}),Ma.on("pluginStateChange",A),A},o.renderColorRamp=If,o.rotate=function(A,D,K){var he=D[0],Ee=D[1],ze=D[2],We=D[3],rt=Math.sin(K),gt=Math.cos(K);return A[0]=he*gt+ze*rt,A[1]=Ee*gt+We*rt,A[2]=he*-rt+ze*gt,A[3]=Ee*-rt+We*gt,A},o.rotateX=function(A,D,K){var he=Math.sin(K),Ee=Math.cos(K),ze=D[4],We=D[5],rt=D[6],gt=D[7],Mt=D[8],Ct=D[9],Gt=D[10],$t=D[11];return D!==A&&(A[0]=D[0],A[1]=D[1],A[2]=D[2],A[3]=D[3],A[12]=D[12],A[13]=D[13],A[14]=D[14],A[15]=D[15]),A[4]=ze*Ee+Mt*he,A[5]=We*Ee+Ct*he,A[6]=rt*Ee+Gt*he,A[7]=gt*Ee+$t*he,A[8]=Mt*Ee-ze*he,A[9]=Ct*Ee-We*he,A[10]=Gt*Ee-rt*he,A[11]=$t*Ee-gt*he,A},o.rotateZ=function(A,D,K){var he=Math.sin(K),Ee=Math.cos(K),ze=D[0],We=D[1],rt=D[2],gt=D[3],Mt=D[4],Ct=D[5],Gt=D[6],$t=D[7];return D!==A&&(A[8]=D[8],A[9]=D[9],A[10]=D[10],A[11]=D[11],A[12]=D[12],A[13]=D[13],A[14]=D[14],A[15]=D[15]),A[0]=ze*Ee+Mt*he,A[1]=We*Ee+Ct*he,A[2]=rt*Ee+Gt*he,A[3]=gt*Ee+$t*he,A[4]=Mt*Ee-ze*he,A[5]=Ct*Ee-We*he,A[6]=Gt*Ee-rt*he,A[7]=$t*Ee-gt*he,A},o.scale=function(A,D,K){var he=K[0],Ee=K[1],ze=K[2];return A[0]=D[0]*he,A[1]=D[1]*he,A[2]=D[2]*he,A[3]=D[3]*he,A[4]=D[4]*Ee,A[5]=D[5]*Ee,A[6]=D[6]*Ee,A[7]=D[7]*Ee,A[8]=D[8]*ze,A[9]=D[9]*ze,A[10]=D[10]*ze,A[11]=D[11]*ze,A[12]=D[12],A[13]=D[13],A[14]=D[14],A[15]=D[15],A},o.scale$1=function(A,D,K){return A[0]=D[0]*K,A[1]=D[1]*K,A[2]=D[2]*K,A[3]=D[3]*K,A},o.scale$2=function(A,D,K){return A[0]=D[0]*K,A[1]=D[1]*K,A[2]=D[2]*K,A},o.setCacheLimits=function(A,D){Le=A,Ne=D},o.setRTLTextPlugin=function(A,D,K){if(void 0===K&&(K=!1),Mi===$o||Mi===Qo||Mi===As)throw new Error("setRTLTextPlugin cannot be called multiple times.");Aa=$.resolveURL(A),Mi=$o,Ms=D,Ss(),K||Rl()},o.sphericalToCartesian=function(A){var D=A[0],K=A[1],he=A[2];return K+=90,K*=Math.PI/180,he*=Math.PI/180,{x:D*Math.cos(K)*Math.sin(he),y:D*Math.sin(K)*Math.sin(he),z:D*Math.cos(he)}},o.sqrLen=function(A){var D=A[0],K=A[1];return D*D+K*K},o.styleSpec=Qe,o.sub=function(A,D,K){return A[0]=D[0]-K[0],A[1]=D[1]-K[1],A[2]=D[2]-K[2],A},o.symbolSize=jp,o.transformMat3=function(A,D,K){var he=D[0],Ee=D[1],ze=D[2];return A[0]=he*K[0]+Ee*K[3]+ze*K[6],A[1]=he*K[1]+Ee*K[4]+ze*K[7],A[2]=he*K[2]+Ee*K[5]+ze*K[8],A},o.transformMat4=Ef,o.translate=function(A,D,K){var he,Ee,ze,We,rt,gt,Mt,Ct,Gt,$t,Zt,mn,xn=K[0],Rn=K[1],In=K[2];return D===A?(A[12]=D[0]*xn+D[4]*Rn+D[8]*In+D[12],A[13]=D[1]*xn+D[5]*Rn+D[9]*In+D[13],A[14]=D[2]*xn+D[6]*Rn+D[10]*In+D[14],A[15]=D[3]*xn+D[7]*Rn+D[11]*In+D[15]):(Ee=D[1],ze=D[2],We=D[3],rt=D[4],gt=D[5],Mt=D[6],Ct=D[7],Gt=D[8],$t=D[9],Zt=D[10],mn=D[11],A[0]=he=D[0],A[1]=Ee,A[2]=ze,A[3]=We,A[4]=rt,A[5]=gt,A[6]=Mt,A[7]=Ct,A[8]=Gt,A[9]=$t,A[10]=Zt,A[11]=mn,A[12]=he*xn+rt*Rn+Gt*In+D[12],A[13]=Ee*xn+gt*Rn+$t*In+D[13],A[14]=ze*xn+Mt*Rn+Zt*In+D[14],A[15]=We*xn+Ct*Rn+mn*In+D[15]),A},o.triggerPluginCompletionEvent=ho,o.uniqueId=d,o.validateCustomStyleLayer=function(A){var D=[],K=A.id;return void 0===K&&D.push({message:"layers."+K+': missing required property "id"'}),void 0===A.render&&D.push({message:"layers."+K+': missing required method "render"'}),A.renderingMode&&"2d"!==A.renderingMode&&"3d"!==A.renderingMode&&D.push({message:"layers."+K+': property "renderingMode" must be either "2d" or "3d"'}),D},o.validateLight=fl,o.validateStyle=ks,o.values=function(A){var D=[];for(var K in A)D.push(A[K]);return D},o.vectorTile=Ec,o.version=_,o.warnOnce=E,o.webpSupported=X,o.window=r,o.wrap=f}),k(0,function(o){function T(Je){var et=typeof Je;if("number"===et||"boolean"===et||"string"===et||null==Je)return JSON.stringify(Je);if(Array.isArray(Je)){for(var qe="[",$e=0,pt=Je;$e<pt.length;$e+=1)qe+=T(pt[$e])+",";return qe+"]"}for(var ct=Object.keys(Je).sort(),Ve="{",Ge=0;Ge<ct.length;Ge++)Ve+=JSON.stringify(ct[Ge])+":"+T(Je[ct[Ge]])+",";return Ve+"}"}function _(Je){for(var et="",qe=0,$e=o.refProperties;qe<$e.length;qe+=1)et+="/"+T(Je[$e[qe]]);return et}var p=function(Je){this.keyCache={},Je&&this.replace(Je)};p.prototype.replace=function(Je){this._layerConfigs={},this._layers={},this.update(Je,[])},p.prototype.update=function(Je,et){for(var qe=this,$e=0,pt=Je;$e<pt.length;$e+=1){var ct=pt[$e];this._layerConfigs[ct.id]=ct;var Ve=this._layers[ct.id]=o.createStyleLayer(ct);Ve._featureFilter=o.featureFilter(Ve.filter),this.keyCache[ct.id]&&delete this.keyCache[ct.id]}for(var Ge=0,ut=et;Ge<ut.length;Ge+=1){var Qe=ut[Ge];delete this.keyCache[Qe],delete this._layerConfigs[Qe],delete this._layers[Qe]}this.familiesBySource={};for(var yt=0,wt=function(Bt,Vt){for(var nn={},gn=0;gn<Bt.length;gn++){var Jt=Vt&&Vt[Bt[gn].id]||_(Bt[gn]);Vt&&(Vt[Bt[gn].id]=Jt);var an=nn[Jt];an||(an=nn[Jt]=[]),an.push(Bt[gn])}var Xt=[];for(var Gn in nn)Xt.push(nn[Gn]);return Xt}(o.values(this._layerConfigs),this.keyCache);yt<wt.length;yt+=1){var kt=wt[yt].map(function(Bt){return qe._layers[Bt.id]}),vt=kt[0];if("none"!==vt.visibility){var Lt=vt.source||"",St=this.familiesBySource[Lt];St||(St=this.familiesBySource[Lt]={});var Ot=vt.sourceLayer||"_geojsonTileLayer",Nt=St[Ot];Nt||(Nt=St[Ot]=[]),Nt.push(kt)}}};var l=function(Je){var et={},qe=[];for(var $e in Je){var pt=Je[$e],ct=et[$e]={};for(var Ve in pt){var Ge=pt[+Ve];if(Ge&&0!==Ge.bitmap.width&&0!==Ge.bitmap.height){var ut={x:0,y:0,w:Ge.bitmap.width+2,h:Ge.bitmap.height+2};qe.push(ut),ct[Ve]={rect:ut,metrics:Ge.metrics}}}}var Qe=o.potpack(qe),kt=new o.AlphaImage({width:Qe.w||1,height:Qe.h||1});for(var vt in Je){var Lt=Je[vt];for(var St in Lt){var Ot=Lt[+St];if(Ot&&0!==Ot.bitmap.width&&0!==Ot.bitmap.height){var Nt=et[vt][St].rect;o.AlphaImage.copy(Ot.bitmap,kt,{x:0,y:0},{x:Nt.x+1,y:Nt.y+1},Ot.bitmap)}}}this.image=kt,this.positions=et};o.register("GlyphAtlas",l);var t=function(Je){this.tileID=new o.OverscaledTileID(Je.tileID.overscaledZ,Je.tileID.wrap,Je.tileID.canonical.z,Je.tileID.canonical.x,Je.tileID.canonical.y),this.uid=Je.uid,this.zoom=Je.zoom,this.pixelRatio=Je.pixelRatio,this.tileSize=Je.tileSize,this.source=Je.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Je.showCollisionBoxes,this.collectResourceTiming=!!Je.collectResourceTiming,this.returnDependencies=!!Je.returnDependencies,this.promoteId=Je.promoteId};function i(Je,et,qe){for(var $e=new o.EvaluationParameters(et),pt=0,ct=Je;pt<ct.length;pt+=1)ct[pt].recalculate($e,qe)}function r(Je,et){var qe=o.getArrayBuffer(Je.request,function($e,pt,ct,Ve){$e?et($e):pt&&et(null,{vectorTile:new o.vectorTile.VectorTile(new o.pbf(pt)),rawData:pt,cacheControl:ct,expires:Ve})});return function(){qe.cancel(),et()}}t.prototype.parse=function(Je,et,qe,$e,pt){var ct=this;this.status="parsing",this.data=Je,this.collisionBoxArray=new o.CollisionBoxArray;var Ve=new o.DictionaryCoder(Object.keys(Je.layers).sort()),Ge=new o.FeatureIndex(this.tileID,this.promoteId);Ge.bucketLayerIDs=[];var ut,Qe,yt,wt,kt={},vt={featureIndex:Ge,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:qe},Lt=et.familiesBySource[this.source];for(var St in Lt){var Ot=Je.layers[St];if(Ot){1===Ot.version&&o.warnOnce('Vector tile source "'+this.source+'" layer "'+St+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Nt=Ve.encode(St),Bt=[],Vt=0;Vt<Ot.length;Vt++){var nn=Ot.feature(Vt),gn=Ge.getId(nn,St);Bt.push({feature:nn,id:gn,index:Vt,sourceLayerIndex:Nt})}for(var Jt=0,an=Lt[St];Jt<an.length;Jt+=1){var Xt=an[Jt],Gn=Xt[0];Gn.minzoom&&this.zoom<Math.floor(Gn.minzoom)||Gn.maxzoom&&this.zoom>=Gn.maxzoom||"none"!==Gn.visibility&&(i(Xt,this.zoom,qe),(kt[Gn.id]=Gn.createBucket({index:Ge.bucketLayerIDs.length,layers:Xt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Nt,sourceID:this.source})).populate(Bt,vt,this.tileID.canonical),Ge.bucketLayerIDs.push(Xt.map(function(hn){return hn.id})))}}}var Dn=o.mapObject(vt.glyphDependencies,function(hn){return Object.keys(hn).map(Number)});Object.keys(Dn).length?$e.send("getGlyphs",{uid:this.uid,stacks:Dn},function(hn,wn){ut||(ut=hn,Qe=wn,bn.call(ct))}):Qe={};var An=Object.keys(vt.iconDependencies);An.length?$e.send("getImages",{icons:An,source:this.source,tileID:this.tileID,type:"icons"},function(hn,wn){ut||(ut=hn,yt=wn,bn.call(ct))}):yt={};var cn=Object.keys(vt.patternDependencies);function bn(){if(ut)return pt(ut);if(Qe&&yt&&wt){var hn=new l(Qe),wn=new o.ImageAtlas(yt,wt);for(var Ln in kt){var Pn=kt[Ln];Pn instanceof o.SymbolBucket?(i(Pn.layers,this.zoom,qe),o.performSymbolLayout(Pn,Qe,hn.positions,yt,wn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Pn.hasPattern&&(Pn instanceof o.LineBucket||Pn instanceof o.FillBucket||Pn instanceof o.FillExtrusionBucket)&&(i(Pn.layers,this.zoom,qe),Pn.addFeatures(vt,this.tileID.canonical,wn.patternPositions))}this.status="done",pt(null,{buckets:o.values(kt).filter(function(Nn){return!Nn.isEmpty()}),featureIndex:Ge,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:hn.image,imageAtlas:wn,glyphMap:this.returnDependencies?Qe:null,iconMap:this.returnDependencies?yt:null,glyphPositions:this.returnDependencies?hn.positions:null})}}cn.length?$e.send("getImages",{icons:cn,source:this.source,tileID:this.tileID,type:"patterns"},function(hn,wn){ut||(ut=hn,wt=wn,bn.call(ct))}):wt={},bn.call(this)};var n=function(Je,et,qe,$e){this.actor=Je,this.layerIndex=et,this.availableImages=qe,this.loadVectorData=$e||r,this.loading={},this.loaded={}};n.prototype.loadTile=function(Je,et){var qe=this,$e=Je.uid;this.loading||(this.loading={});var pt=!!(Je&&Je.request&&Je.request.collectResourceTiming)&&new o.RequestPerformance(Je.request),ct=this.loading[$e]=new t(Je);ct.abort=this.loadVectorData(Je,function(Ve,Ge){if(delete qe.loading[$e],Ve||!Ge)return ct.status="done",qe.loaded[$e]=ct,et(Ve);var ut=Ge.rawData,Qe={};Ge.expires&&(Qe.expires=Ge.expires),Ge.cacheControl&&(Qe.cacheControl=Ge.cacheControl);var yt={};if(pt){var wt=pt.finish();wt&&(yt.resourceTiming=JSON.parse(JSON.stringify(wt)))}ct.vectorTile=Ge.vectorTile,ct.parse(Ge.vectorTile,qe.layerIndex,qe.availableImages,qe.actor,function(kt,vt){if(kt||!vt)return et(kt);et(null,o.extend({rawTileData:ut.slice(0)},vt,Qe,yt))}),qe.loaded=qe.loaded||{},qe.loaded[$e]=ct})},n.prototype.reloadTile=function(Je,et){var qe=this,$e=this.loaded,pt=Je.uid,ct=this;if($e&&$e[pt]){var Ve=$e[pt];Ve.showCollisionBoxes=Je.showCollisionBoxes;var Ge=function(ut,Qe){var yt=Ve.reloadCallback;yt&&(delete Ve.reloadCallback,Ve.parse(Ve.vectorTile,ct.layerIndex,qe.availableImages,ct.actor,yt)),et(ut,Qe)};"parsing"===Ve.status?Ve.reloadCallback=Ge:"done"===Ve.status&&(Ve.vectorTile?Ve.parse(Ve.vectorTile,this.layerIndex,this.availableImages,this.actor,Ge):Ge())}},n.prototype.abortTile=function(Je,et){var qe=this.loading,$e=Je.uid;qe&&qe[$e]&&qe[$e].abort&&(qe[$e].abort(),delete qe[$e]),et()},n.prototype.removeTile=function(Je,et){var qe=this.loaded,$e=Je.uid;qe&&qe[$e]&&delete qe[$e],et()};var a=o.window.ImageBitmap,s=function(){this.loaded={}};s.prototype.loadTile=function(Je,et){var qe=Je.uid,$e=Je.encoding,pt=Je.rawImageData,ct=a&&pt instanceof a?this.getImageData(pt):pt,Ve=new o.DEMData(qe,ct,$e);this.loaded=this.loaded||{},this.loaded[qe]=Ve,et(null,Ve)},s.prototype.getImageData=function(Je){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Je.width,Je.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Je.width,this.offscreenCanvas.height=Je.height,this.offscreenCanvasContext.drawImage(Je,0,0,Je.width,Je.height);var et=this.offscreenCanvasContext.getImageData(-1,-1,Je.width+2,Je.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new o.RGBAImage({width:et.width,height:et.height},et.data)},s.prototype.removeTile=function(Je){var et=this.loaded,qe=Je.uid;et&&et[qe]&&delete et[qe]};var u=function Je(et,qe){var $e,pt=et&&et.type;if("FeatureCollection"===pt)for($e=0;$e<et.features.length;$e++)Je(et.features[$e],qe);else if("GeometryCollection"===pt)for($e=0;$e<et.geometries.length;$e++)Je(et.geometries[$e],qe);else if("Feature"===pt)Je(et.geometry,qe);else if("Polygon"===pt)f(et.coordinates,qe);else if("MultiPolygon"===pt)for($e=0;$e<et.coordinates.length;$e++)f(et.coordinates[$e],qe);return et};function f(Je,et){if(0!==Je.length){c(Je[0],et);for(var qe=1;qe<Je.length;qe++)c(Je[qe],!et)}}function c(Je,et){for(var qe=0,$e=0,pt=Je.length,ct=pt-1;$e<pt;ct=$e++)qe+=(Je[$e][0]-Je[ct][0])*(Je[ct][1]+Je[$e][1]);qe>=0!=!!et&&Je.reverse()}var y=o.vectorTile.VectorTileFeature.prototype.toGeoJSON,d=function(Je){this._feature=Je,this.extent=o.EXTENT,this.type=Je.type,this.properties=Je.tags,"id"in Je&&!isNaN(Je.id)&&(this.id=parseInt(Je.id,10))};d.prototype.loadGeometry=function(){if(1===this._feature.type){for(var Je=[],et=0,qe=this._feature.geometry;et<qe.length;et+=1){var $e=qe[et];Je.push([new o.Point$1($e[0],$e[1])])}return Je}for(var pt=[],ct=0,Ve=this._feature.geometry;ct<Ve.length;ct+=1){for(var Ge=[],ut=0,Qe=Ve[ct];ut<Qe.length;ut+=1){var yt=Qe[ut];Ge.push(new o.Point$1(yt[0],yt[1]))}pt.push(Ge)}return pt},d.prototype.toGeoJSON=function(Je,et,qe){return y.call(this,Je,et,qe)};var m=function(Je){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=Je.length,this._features=Je};m.prototype.feature=function(Je){return new d(this._features[Je])};var g=o.vectorTile.VectorTileFeature,x=v;function v(Je,et){this.options=et||{},this.features=Je,this.length=Je.length}function b(Je,et){this.id="number"==typeof Je.id?Je.id:void 0,this.type=Je.type,this.rawGeometry=1===Je.type?[Je.geometry]:Je.geometry,this.properties=Je.tags,this.extent=et||4096}v.prototype.feature=function(Je){return new b(this.features[Je],this.options.extent)},b.prototype.loadGeometry=function(){var Je=this.rawGeometry;this.geometry=[];for(var et=0;et<Je.length;et++){for(var qe=Je[et],$e=[],pt=0;pt<qe.length;pt++)$e.push(new o.Point$1(qe[pt][0],qe[pt][1]));this.geometry.push($e)}return this.geometry},b.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Je=this.geometry,et=1/0,qe=-1/0,$e=1/0,pt=-1/0,ct=0;ct<Je.length;ct++)for(var Ve=Je[ct],Ge=0;Ge<Ve.length;Ge++){var ut=Ve[Ge];et=Math.min(et,ut.x),qe=Math.max(qe,ut.x),$e=Math.min($e,ut.y),pt=Math.max(pt,ut.y)}return[et,$e,qe,pt]},b.prototype.toGeoJSON=g.prototype.toGeoJSON;var h=P,E=x;function P(Je){var et=new o.pbf;return function(qe,$e){for(var pt in qe.layers)$e.writeMessage(3,I,qe.layers[pt])}(Je,et),et.finish()}function I(Je,et){var qe;et.writeVarintField(15,Je.version||1),et.writeStringField(1,Je.name||""),et.writeVarintField(5,Je.extent||4096);var $e={keys:[],values:[],keycache:{},valuecache:{}};for(qe=0;qe<Je.length;qe++)$e.feature=Je.feature(qe),et.writeMessage(2,O,$e);var pt=$e.keys;for(qe=0;qe<pt.length;qe++)et.writeStringField(3,pt[qe]);var ct=$e.values;for(qe=0;qe<ct.length;qe++)et.writeMessage(4,Y,ct[qe])}function O(Je,et){var qe=Je.feature;void 0!==qe.id&&et.writeVarintField(1,qe.id),et.writeMessage(2,z,Je),et.writeVarintField(3,qe.type),et.writeMessage(4,j,qe)}function z(Je,et){var qe=Je.feature,$e=Je.keys,pt=Je.values,ct=Je.keycache,Ve=Je.valuecache;for(var Ge in qe.properties){var ut=ct[Ge];void 0===ut&&($e.push(Ge),ct[Ge]=ut=$e.length-1),et.writeVarint(ut);var Qe=qe.properties[Ge],yt=typeof Qe;"string"!==yt&&"boolean"!==yt&&"number"!==yt&&(Qe=JSON.stringify(Qe));var wt=yt+":"+Qe,kt=Ve[wt];void 0===kt&&(pt.push(Qe),Ve[wt]=kt=pt.length-1),et.writeVarint(kt)}}function U(Je,et){return(et<<3)+(7&Je)}function R(Je){return Je<<1^Je>>31}function j(Je,et){for(var qe=Je.loadGeometry(),$e=Je.type,pt=0,ct=0,Ve=qe.length,Ge=0;Ge<Ve;Ge++){var ut=qe[Ge],Qe=1;1===$e&&(Qe=ut.length),et.writeVarint(U(1,Qe));for(var yt=3===$e?ut.length-1:ut.length,wt=0;wt<yt;wt++){1===wt&&1!==$e&&et.writeVarint(U(2,yt-1));var kt=ut[wt].x-pt,vt=ut[wt].y-ct;et.writeVarint(R(kt)),et.writeVarint(R(vt)),pt+=kt,ct+=vt}3===$e&&et.writeVarint(U(7,1))}}function Y(Je,et){var qe=typeof Je;"string"===qe?et.writeStringField(1,Je):"boolean"===qe?et.writeBooleanField(7,Je):"number"===qe&&(Je%1!=0?et.writeDoubleField(3,Je):Je<0?et.writeSVarintField(6,Je):et.writeVarintField(5,Je))}function B(Je,et,qe,$e,pt,ct){if(!(pt-$e<=qe)){var Ve=$e+pt>>1;V(Je,et,Ve,$e,pt,ct%2),B(Je,et,qe,$e,Ve-1,ct+1),B(Je,et,qe,Ve+1,pt,ct+1)}}function V(Je,et,qe,$e,pt,ct){for(;pt>$e;){if(pt-$e>600){var Ve=pt-$e+1,Ge=qe-$e+1,ut=Math.log(Ve),Qe=.5*Math.exp(2*ut/3),yt=.5*Math.sqrt(ut*Qe*(Ve-Qe)/Ve)*(Ge-Ve/2<0?-1:1);V(Je,et,qe,Math.max($e,Math.floor(qe-Ge*Qe/Ve+yt)),Math.min(pt,Math.floor(qe+(Ve-Ge)*Qe/Ve+yt)),ct)}var wt=et[2*qe+ct],kt=$e,vt=pt;for(q(Je,et,$e,qe),et[2*pt+ct]>wt&&q(Je,et,$e,pt);kt<vt;){for(q(Je,et,kt,vt),kt++,vt--;et[2*kt+ct]<wt;)kt++;for(;et[2*vt+ct]>wt;)vt--}et[2*$e+ct]===wt?q(Je,et,$e,vt):q(Je,et,++vt,pt),vt<=qe&&($e=vt+1),qe<=vt&&(pt=vt-1)}}function q(Je,et,qe,$e){ie(Je,qe,$e),ie(et,2*qe,2*$e),ie(et,2*qe+1,2*$e+1)}function ie(Je,et,qe){var $e=Je[et];Je[et]=Je[qe],Je[qe]=$e}function te(Je,et,qe,$e){var pt=Je-qe,ct=et-$e;return pt*pt+ct*ct}h.fromVectorTileJs=P,h.fromGeojsonVt=function(Je,et){et=et||{};var qe={};for(var $e in Je)qe[$e]=new x(Je[$e].features,et),qe[$e].name=$e,qe[$e].version=et.version,qe[$e].extent=et.extent;return P({layers:qe})},h.GeoJSONWrapper=E;var ee=function(Je){return Je[0]},$=function(Je){return Je[1]},J=function(Je,et,qe,$e,pt){void 0===et&&(et=ee),void 0===qe&&(qe=$),void 0===$e&&($e=64),void 0===pt&&(pt=Float64Array),this.nodeSize=$e,this.points=Je;for(var ct=Je.length<65536?Uint16Array:Uint32Array,Ve=this.ids=new ct(Je.length),Ge=this.coords=new pt(2*Je.length),ut=0;ut<Je.length;ut++)Ve[ut]=ut,Ge[2*ut]=et(Je[ut]),Ge[2*ut+1]=qe(Je[ut]);B(Ve,Ge,$e,0,Ve.length-1,0)};J.prototype.range=function(Je,et,qe,$e){return function(pt,ct,Ve,Ge,ut,Qe,yt){for(var wt,kt,vt=[0,pt.length-1,0],Lt=[];vt.length;){var St=vt.pop(),Ot=vt.pop(),Nt=vt.pop();if(Ot-Nt<=yt)for(var Bt=Nt;Bt<=Ot;Bt++)kt=ct[2*Bt+1],(wt=ct[2*Bt])>=Ve&&wt<=ut&&kt>=Ge&&kt<=Qe&&Lt.push(pt[Bt]);else{var Vt=Math.floor((Nt+Ot)/2);kt=ct[2*Vt+1],(wt=ct[2*Vt])>=Ve&&wt<=ut&&kt>=Ge&&kt<=Qe&&Lt.push(pt[Vt]);var nn=(St+1)%2;(0===St?Ve<=wt:Ge<=kt)&&(vt.push(Nt),vt.push(Vt-1),vt.push(nn)),(0===St?ut>=wt:Qe>=kt)&&(vt.push(Vt+1),vt.push(Ot),vt.push(nn))}}return Lt}(this.ids,this.coords,Je,et,qe,$e,this.nodeSize)},J.prototype.within=function(Je,et,qe){return function($e,pt,ct,Ve,Ge,ut){for(var Qe=[0,$e.length-1,0],yt=[],wt=Ge*Ge;Qe.length;){var kt=Qe.pop(),vt=Qe.pop(),Lt=Qe.pop();if(vt-Lt<=ut)for(var St=Lt;St<=vt;St++)te(pt[2*St],pt[2*St+1],ct,Ve)<=wt&&yt.push($e[St]);else{var Ot=Math.floor((Lt+vt)/2),Nt=pt[2*Ot],Bt=pt[2*Ot+1];te(Nt,Bt,ct,Ve)<=wt&&yt.push($e[Ot]);var Vt=(kt+1)%2;(0===kt?ct-Ge<=Nt:Ve-Ge<=Bt)&&(Qe.push(Lt),Qe.push(Ot-1),Qe.push(Vt)),(0===kt?ct+Ge>=Nt:Ve+Ge>=Bt)&&(Qe.push(Ot+1),Qe.push(vt),Qe.push(Vt))}}return yt}(this.ids,this.coords,Je,et,qe,this.nodeSize)};var X={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Je){return Je}},ae=function(Je){this.options=ve(Object.create(X),Je),this.trees=new Array(this.options.maxZoom+1)};function ce(Je,et,qe,$e,pt){return{x:Je,y:et,zoom:1/0,id:qe,parentId:-1,numPoints:$e,properties:pt}}function le(Je,et){var qe=Je.geometry.coordinates,pt=qe[1];return{x:Te(qe[0]),y:ye(pt),zoom:1/0,index:et,parentId:-1}}function pe(Je){return{type:"Feature",id:Je.id,properties:we(Je),geometry:{type:"Point",coordinates:[($e=Je.x,360*($e-.5)),(et=Je.y,qe=(180-360*et)*Math.PI/180,360*Math.atan(Math.exp(qe))/Math.PI-90)]}};var et,qe,$e}function we(Je){var et=Je.numPoints,qe=et>=1e4?Math.round(et/1e3)+"k":et>=1e3?Math.round(et/100)/10+"k":et;return ve(ve({},Je.properties),{cluster:!0,cluster_id:Je.id,point_count:et,point_count_abbreviated:qe})}function Te(Je){return Je/360+.5}function ye(Je){var et=Math.sin(Je*Math.PI/180),qe=.5-.25*Math.log((1+et)/(1-et))/Math.PI;return qe<0?0:qe>1?1:qe}function ve(Je,et){for(var qe in et)Je[qe]=et[qe];return Je}function xe(Je){return Je.x}function Ce(Je){return Je.y}function Oe(Je,et,qe,$e){for(var pt,ct=$e,Ve=qe-et>>1,Ge=qe-et,ut=Je[et],Qe=Je[et+1],yt=Je[qe],wt=Je[qe+1],kt=et+3;kt<qe;kt+=3){var vt=be(Je[kt],Je[kt+1],ut,Qe,yt,wt);if(vt>ct)pt=kt,ct=vt;else if(vt===ct){var Lt=Math.abs(kt-Ve);Lt<Ge&&(pt=kt,Ge=Lt)}}ct>$e&&(pt-et>3&&Oe(Je,et,pt,$e),Je[pt+2]=ct,qe-pt>3&&Oe(Je,pt,qe,$e))}function be(Je,et,qe,$e,pt,ct){var Ve=pt-qe,Ge=ct-$e;if(0!==Ve||0!==Ge){var ut=((Je-qe)*Ve+(et-$e)*Ge)/(Ve*Ve+Ge*Ge);ut>1?(qe=pt,$e=ct):ut>0&&(qe+=Ve*ut,$e+=Ge*ut)}return(Ve=Je-qe)*Ve+(Ge=et-$e)*Ge}function ue(Je,et,qe,$e){var pt={id:void 0===Je?null:Je,type:et,geometry:qe,tags:$e,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ct){var Ve=ct.geometry,Ge=ct.type;if("Point"===Ge||"MultiPoint"===Ge||"LineString"===Ge)se(ct,Ve);else if("Polygon"===Ge||"MultiLineString"===Ge)for(var ut=0;ut<Ve.length;ut++)se(ct,Ve[ut]);else if("MultiPolygon"===Ge)for(ut=0;ut<Ve.length;ut++)for(var Qe=0;Qe<Ve[ut].length;Qe++)se(ct,Ve[ut][Qe])}(pt),pt}function se(Je,et){for(var qe=0;qe<et.length;qe+=3)Je.minX=Math.min(Je.minX,et[qe]),Je.minY=Math.min(Je.minY,et[qe+1]),Je.maxX=Math.max(Je.maxX,et[qe]),Je.maxY=Math.max(Je.maxY,et[qe+1])}function ge(Je,et,qe,$e){if(et.geometry){var pt=et.geometry.coordinates,ct=et.geometry.type,Ve=Math.pow(qe.tolerance/((1<<qe.maxZoom)*qe.extent),2),Ge=[],ut=et.id;if(qe.promoteId?ut=et.properties[qe.promoteId]:qe.generateId&&(ut=$e||0),"Point"===ct)Ie(pt,Ge);else if("MultiPoint"===ct)for(var Qe=0;Qe<pt.length;Qe++)Ie(pt[Qe],Ge);else if("LineString"===ct)ke(pt,Ge,Ve,!1);else if("MultiLineString"===ct){if(qe.lineMetrics){for(Qe=0;Qe<pt.length;Qe++)ke(pt[Qe],Ge=[],Ve,!1),Je.push(ue(ut,"LineString",Ge,et.properties));return}Se(pt,Ge,Ve,!1)}else if("Polygon"===ct)Se(pt,Ge,Ve,!0);else{if("MultiPolygon"!==ct){if("GeometryCollection"===ct){for(Qe=0;Qe<et.geometry.geometries.length;Qe++)ge(Je,{id:ut,geometry:et.geometry.geometries[Qe],properties:et.properties},qe,$e);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Qe=0;Qe<pt.length;Qe++){var yt=[];Se(pt[Qe],yt,Ve,!0),Ge.push(yt)}}Je.push(ue(ut,ct,Ge,et.properties))}}function Ie(Je,et){et.push(Pe(Je[0])),et.push(Fe(Je[1])),et.push(0)}function ke(Je,et,qe,$e){for(var pt,ct,Ve=0,Ge=0;Ge<Je.length;Ge++){var ut=Pe(Je[Ge][0]),Qe=Fe(Je[Ge][1]);et.push(ut),et.push(Qe),et.push(0),Ge>0&&(Ve+=$e?(pt*Qe-ut*ct)/2:Math.sqrt(Math.pow(ut-pt,2)+Math.pow(Qe-ct,2))),pt=ut,ct=Qe}var yt=et.length-3;et[2]=1,Oe(et,0,yt,qe),et[yt+2]=1,et.size=Math.abs(Ve),et.start=0,et.end=et.size}function Se(Je,et,qe,$e){for(var pt=0;pt<Je.length;pt++){var ct=[];ke(Je[pt],ct,qe,$e),et.push(ct)}}function Pe(Je){return Je/360+.5}function Fe(Je){var et=Math.sin(Je*Math.PI/180),qe=.5-.25*Math.log((1+et)/(1-et))/Math.PI;return qe<0?0:qe>1?1:qe}function Be(Je,et,qe,$e,pt,ct,Ve,Ge){if($e/=et,ct>=(qe/=et)&&Ve<$e)return Je;if(Ve<qe||ct>=$e)return null;for(var ut=[],Qe=0;Qe<Je.length;Qe++){var yt=Je[Qe],wt=yt.geometry,kt=yt.type,vt=0===pt?yt.minX:yt.minY,Lt=0===pt?yt.maxX:yt.maxY;if(vt>=qe&&Lt<$e)ut.push(yt);else if(!(Lt<qe||vt>=$e)){var St=[];if("Point"===kt||"MultiPoint"===kt)me(wt,St,qe,$e,pt);else if("LineString"===kt)Me(wt,St,qe,$e,pt,!1,Ge.lineMetrics);else if("MultiLineString"===kt)Ne(wt,St,qe,$e,pt,!1);else if("Polygon"===kt)Ne(wt,St,qe,$e,pt,!0);else if("MultiPolygon"===kt)for(var Ot=0;Ot<wt.length;Ot++){var Nt=[];Ne(wt[Ot],Nt,qe,$e,pt,!0),Nt.length&&St.push(Nt)}if(St.length){if(Ge.lineMetrics&&"LineString"===kt){for(Ot=0;Ot<St.length;Ot++)ut.push(ue(yt.id,kt,St[Ot],yt.tags));continue}"LineString"!==kt&&"MultiLineString"!==kt||(1===St.length?(kt="LineString",St=St[0]):kt="MultiLineString"),"Point"!==kt&&"MultiPoint"!==kt||(kt=3===St.length?"Point":"MultiPoint"),ut.push(ue(yt.id,kt,St,yt.tags))}}}return ut.length?ut:null}function me(Je,et,qe,$e,pt){for(var ct=0;ct<Je.length;ct+=3){var Ve=Je[ct+pt];Ve>=qe&&Ve<=$e&&(et.push(Je[ct]),et.push(Je[ct+1]),et.push(Je[ct+2]))}}function Me(Je,et,qe,$e,pt,ct,Ve){for(var Ge,ut,Qe=Le(Je),yt=0===pt?He:Ze,wt=Je.start,kt=0;kt<Je.length-3;kt+=3){var vt=Je[kt],Lt=Je[kt+1],St=Je[kt+2],Ot=Je[kt+3],Nt=Je[kt+4],Bt=0===pt?vt:Lt,Vt=0===pt?Ot:Nt,nn=!1;Ve&&(Ge=Math.sqrt(Math.pow(vt-Ot,2)+Math.pow(Lt-Nt,2))),Bt<qe?Vt>qe&&(ut=yt(Qe,vt,Lt,Ot,Nt,qe),Ve&&(Qe.start=wt+Ge*ut)):Bt>$e?Vt<$e&&(ut=yt(Qe,vt,Lt,Ot,Nt,$e),Ve&&(Qe.start=wt+Ge*ut)):Re(Qe,vt,Lt,St),Vt<qe&&Bt>=qe&&(ut=yt(Qe,vt,Lt,Ot,Nt,qe),nn=!0),Vt>$e&&Bt<=$e&&(ut=yt(Qe,vt,Lt,Ot,Nt,$e),nn=!0),!ct&&nn&&(Ve&&(Qe.end=wt+Ge*ut),et.push(Qe),Qe=Le(Je)),Ve&&(wt+=Ge)}var gn=Je.length-3;vt=Je[gn],Lt=Je[gn+1],St=Je[gn+2],(Bt=0===pt?vt:Lt)>=qe&&Bt<=$e&&Re(Qe,vt,Lt,St),gn=Qe.length-3,ct&&gn>=3&&(Qe[gn]!==Qe[0]||Qe[gn+1]!==Qe[1])&&Re(Qe,Qe[0],Qe[1],Qe[2]),Qe.length&&et.push(Qe)}function Le(Je){var et=[];return et.size=Je.size,et.start=Je.start,et.end=Je.end,et}function Ne(Je,et,qe,$e,pt,ct){for(var Ve=0;Ve<Je.length;Ve++)Me(Je[Ve],et,qe,$e,pt,ct,!1)}function Re(Je,et,qe,$e){Je.push(et),Je.push(qe),Je.push($e)}function He(Je,et,qe,$e,pt,ct){var Ve=(ct-et)/($e-et);return Je.push(ct),Je.push(qe+(pt-qe)*Ve),Je.push(1),Ve}function Ze(Je,et,qe,$e,pt,ct){var Ve=(ct-qe)/(pt-qe);return Je.push(et+($e-et)*Ve),Je.push(ct),Je.push(1),Ve}function nt(Je,et){for(var qe=[],$e=0;$e<Je.length;$e++){var pt,ct=Je[$e],Ve=ct.type;if("Point"===Ve||"MultiPoint"===Ve||"LineString"===Ve)pt=ft(ct.geometry,et);else if("MultiLineString"===Ve||"Polygon"===Ve){pt=[];for(var Ge=0;Ge<ct.geometry.length;Ge++)pt.push(ft(ct.geometry[Ge],et))}else if("MultiPolygon"===Ve)for(pt=[],Ge=0;Ge<ct.geometry.length;Ge++){for(var ut=[],Qe=0;Qe<ct.geometry[Ge].length;Qe++)ut.push(ft(ct.geometry[Ge][Qe],et));pt.push(ut)}qe.push(ue(ct.id,Ve,pt,ct.tags))}return qe}function ft(Je,et){var qe=[];qe.size=Je.size,void 0!==Je.start&&(qe.start=Je.start,qe.end=Je.end);for(var $e=0;$e<Je.length;$e+=3)qe.push(Je[$e]+et,Je[$e+1],Je[$e+2]);return qe}function ht(Je,et){if(Je.transformed)return Je;var qe,$e,pt,ct=1<<Je.z,Ve=Je.x,Ge=Je.y;for(qe=0;qe<Je.features.length;qe++){var ut=Je.features[qe],Qe=ut.geometry,yt=ut.type;if(ut.geometry=[],1===yt)for($e=0;$e<Qe.length;$e+=2)ut.geometry.push(Tt(Qe[$e],Qe[$e+1],et,ct,Ve,Ge));else for($e=0;$e<Qe.length;$e++){var wt=[];for(pt=0;pt<Qe[$e].length;pt+=2)wt.push(Tt(Qe[$e][pt],Qe[$e][pt+1],et,ct,Ve,Ge));ut.geometry.push(wt)}}return Je.transformed=!0,Je}function Tt(Je,et,qe,$e,pt,ct){return[Math.round(qe*(Je*$e-pt)),Math.round(qe*(et*$e-ct))]}function At(Je,et,qe,$e,pt){for(var ct=et===pt.maxZoom?0:pt.tolerance/((1<<et)*pt.extent),Ve={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:qe,y:$e,z:et,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ge=0;Ge<Je.length;Ge++){Ve.numFeatures++,_t(Ve,Je[Ge],ct,pt);var ut=Je[Ge].minX,Qe=Je[Ge].minY,yt=Je[Ge].maxX,wt=Je[Ge].maxY;ut<Ve.minX&&(Ve.minX=ut),Qe<Ve.minY&&(Ve.minY=Qe),yt>Ve.maxX&&(Ve.maxX=yt),wt>Ve.maxY&&(Ve.maxY=wt)}return Ve}function _t(Je,et,qe,$e){var pt=et.geometry,ct=et.type,Ve=[];if("Point"===ct||"MultiPoint"===ct)for(var Ge=0;Ge<pt.length;Ge+=3)Ve.push(pt[Ge]),Ve.push(pt[Ge+1]),Je.numPoints++,Je.numSimplified++;else if("LineString"===ct)ot(Ve,pt,Je,qe,!1,!1);else if("MultiLineString"===ct||"Polygon"===ct)for(Ge=0;Ge<pt.length;Ge++)ot(Ve,pt[Ge],Je,qe,"Polygon"===ct,0===Ge);else if("MultiPolygon"===ct)for(var ut=0;ut<pt.length;ut++){var Qe=pt[ut];for(Ge=0;Ge<Qe.length;Ge++)ot(Ve,Qe[Ge],Je,qe,!0,0===Ge)}if(Ve.length){var yt=et.tags||null;if("LineString"===ct&&$e.lineMetrics){for(var wt in yt={},et.tags)yt[wt]=et.tags[wt];yt.mapbox_clip_start=pt.start/pt.size,yt.mapbox_clip_end=pt.end/pt.size}var kt={geometry:Ve,type:"Polygon"===ct||"MultiPolygon"===ct?3:"LineString"===ct||"MultiLineString"===ct?2:1,tags:yt};null!==et.id&&(kt.id=et.id),Je.features.push(kt)}}function ot(Je,et,qe,$e,pt,ct){var Ve=$e*$e;if($e>0&&et.size<(pt?Ve:$e))qe.numPoints+=et.length/3;else{for(var Ge=[],ut=0;ut<et.length;ut+=3)(0===$e||et[ut+2]>Ve)&&(qe.numSimplified++,Ge.push(et[ut]),Ge.push(et[ut+1])),qe.numPoints++;pt&&function(Qe,yt){for(var wt=0,kt=0,vt=Qe.length,Lt=vt-2;kt<vt;Lt=kt,kt+=2)wt+=(Qe[kt]-Qe[Lt])*(Qe[kt+1]+Qe[Lt+1]);if(wt>0===yt)for(kt=0,vt=Qe.length;kt<vt/2;kt+=2){var St=Qe[kt],Ot=Qe[kt+1];Qe[kt]=Qe[vt-2-kt],Qe[kt+1]=Qe[vt-1-kt],Qe[vt-2-kt]=St,Qe[vt-1-kt]=Ot}}(Ge,ct),Je.push(Ge)}}function it(Je,et){var qe=(et=this.options=function(pt,ct){for(var Ve in ct)pt[Ve]=ct[Ve];return pt}(Object.create(this.options),et)).debug;if(qe&&console.time("preprocess data"),et.maxZoom<0||et.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(et.promoteId&&et.generateId)throw new Error("promoteId and generateId cannot be used together.");var pt,ct,Ve,Ge,ut,Qe,$e=function(pt,ct){var Ve=[];if("FeatureCollection"===pt.type)for(var Ge=0;Ge<pt.features.length;Ge++)ge(Ve,pt.features[Ge],ct,Ge);else ge(Ve,"Feature"===pt.type?pt:{geometry:pt},ct);return Ve}(Je,et);this.tiles={},this.tileCoords=[],qe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",et.indexMaxZoom,et.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(pt=$e,ct=et,Ve=ct.buffer/ct.extent,Ge=pt,ut=Be(pt,1,-1-Ve,Ve,0,-1,2,ct),Qe=Be(pt,1,1-Ve,2+Ve,0,-1,2,ct),(ut||Qe)&&(Ge=Be(pt,1,-Ve,1+Ve,0,-1,2,ct)||[],ut&&(Ge=nt(ut,1).concat(Ge)),Qe&&(Ge=Ge.concat(nt(Qe,-1)))),$e=Ge).length&&this.splitTile($e,0,0,0),qe&&($e.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Pt(Je,et,qe){return 32*((1<<Je)*qe+et)+Je}function jt(Je,et){var qe=Je.tileID.canonical;if(!this._geoJSONIndex)return et(null,null);var $e=this._geoJSONIndex.getTile(qe.z,qe.x,qe.y);if(!$e)return et(null,null);var pt=new m($e.features),ct=h(pt);0===ct.byteOffset&&ct.byteLength===ct.buffer.byteLength||(ct=new Uint8Array(ct)),et(null,{vectorTile:pt,rawData:ct.buffer})}ae.prototype.load=function(Je){var et=this.options,qe=et.log,$e=et.minZoom,pt=et.maxZoom,ct=et.nodeSize;qe&&console.time("total time");var Ve="prepare "+Je.length+" points";qe&&console.time(Ve),this.points=Je;for(var Ge=[],ut=0;ut<Je.length;ut++)Je[ut].geometry&&Ge.push(le(Je[ut],ut));this.trees[pt+1]=new J(Ge,xe,Ce,ct,Float32Array),qe&&console.timeEnd(Ve);for(var Qe=pt;Qe>=$e;Qe--){var yt=+Date.now();Ge=this._cluster(Ge,Qe),this.trees[Qe]=new J(Ge,xe,Ce,ct,Float32Array),qe&&console.log("z%d: %d clusters in %dms",Qe,Ge.length,+Date.now()-yt)}return qe&&console.timeEnd("total time"),this},ae.prototype.getClusters=function(Je,et){var qe=((Je[0]+180)%360+360)%360-180,$e=Math.max(-90,Math.min(90,Je[1])),pt=180===Je[2]?180:((Je[2]+180)%360+360)%360-180,ct=Math.max(-90,Math.min(90,Je[3]));if(Je[2]-Je[0]>=360)qe=-180,pt=180;else if(qe>pt){var Ve=this.getClusters([qe,$e,180,ct],et),Ge=this.getClusters([-180,$e,pt,ct],et);return Ve.concat(Ge)}for(var ut=this.trees[this._limitZoom(et)],Qe=[],yt=0,wt=ut.range(Te(qe),ye(ct),Te(pt),ye($e));yt<wt.length;yt+=1){var vt=ut.points[wt[yt]];Qe.push(vt.numPoints?pe(vt):this.points[vt.index])}return Qe},ae.prototype.getChildren=function(Je){var et=this._getOriginId(Je),qe=this._getOriginZoom(Je),$e="No cluster with the specified id.",pt=this.trees[qe];if(!pt)throw new Error($e);var ct=pt.points[et];if(!ct)throw new Error($e);for(var Ve=this.options.radius/(this.options.extent*Math.pow(2,qe-1)),Ge=[],ut=0,Qe=pt.within(ct.x,ct.y,Ve);ut<Qe.length;ut+=1){var wt=pt.points[Qe[ut]];wt.parentId===Je&&Ge.push(wt.numPoints?pe(wt):this.points[wt.index])}if(0===Ge.length)throw new Error($e);return Ge},ae.prototype.getLeaves=function(Je,et,qe){var $e=[];return this._appendLeaves($e,Je,et=et||10,qe=qe||0,0),$e},ae.prototype.getTile=function(Je,et,qe){var $e=this.trees[this._limitZoom(Je)],pt=Math.pow(2,Je),ct=this.options,Ge=ct.radius/ct.extent,ut=(qe-Ge)/pt,Qe=(qe+1+Ge)/pt,yt={features:[]};return this._addTileFeatures($e.range((et-Ge)/pt,ut,(et+1+Ge)/pt,Qe),$e.points,et,qe,pt,yt),0===et&&this._addTileFeatures($e.range(1-Ge/pt,ut,1,Qe),$e.points,pt,qe,pt,yt),et===pt-1&&this._addTileFeatures($e.range(0,ut,Ge/pt,Qe),$e.points,-1,qe,pt,yt),yt.features.length?yt:null},ae.prototype.getClusterExpansionZoom=function(Je){for(var et=this._getOriginZoom(Je)-1;et<=this.options.maxZoom;){var qe=this.getChildren(Je);if(et++,1!==qe.length)break;Je=qe[0].properties.cluster_id}return et},ae.prototype._appendLeaves=function(Je,et,qe,$e,pt){for(var ct=0,Ve=this.getChildren(et);ct<Ve.length;ct+=1){var Ge=Ve[ct],ut=Ge.properties;if(ut&&ut.cluster?pt+ut.point_count<=$e?pt+=ut.point_count:pt=this._appendLeaves(Je,ut.cluster_id,qe,$e,pt):pt<$e?pt++:Je.push(Ge),Je.length===qe)break}return pt},ae.prototype._addTileFeatures=function(Je,et,qe,$e,pt,ct){for(var Ve=0,Ge=Je;Ve<Ge.length;Ve+=1){var ut=et[Ge[Ve]],Qe=ut.numPoints,yt={type:1,geometry:[[Math.round(this.options.extent*(ut.x*pt-qe)),Math.round(this.options.extent*(ut.y*pt-$e))]],tags:Qe?we(ut):this.points[ut.index].properties},wt=void 0;Qe?wt=ut.id:this.options.generateId?wt=ut.index:this.points[ut.index].id&&(wt=this.points[ut.index].id),void 0!==wt&&(yt.id=wt),ct.features.push(yt)}},ae.prototype._limitZoom=function(Je){return Math.max(this.options.minZoom,Math.min(+Je,this.options.maxZoom+1))},ae.prototype._cluster=function(Je,et){for(var qe=[],$e=this.options,Ve=$e.reduce,Ge=$e.minPoints,ut=$e.radius/($e.extent*Math.pow(2,et)),Qe=0;Qe<Je.length;Qe++){var yt=Je[Qe];if(!(yt.zoom<=et)){yt.zoom=et;for(var wt=this.trees[et+1],kt=wt.within(yt.x,yt.y,ut),vt=yt.numPoints||1,Lt=vt,St=0,Ot=kt;St<Ot.length;St+=1){var Bt=wt.points[Ot[St]];Bt.zoom>et&&(Lt+=Bt.numPoints||1)}if(Lt>=Ge){for(var Vt=yt.x*vt,nn=yt.y*vt,gn=Ve&&vt>1?this._map(yt,!0):null,Jt=(Qe<<5)+(et+1)+this.points.length,an=0,Xt=kt;an<Xt.length;an+=1){var Dn=wt.points[Xt[an]];if(!(Dn.zoom<=et)){Dn.zoom=et;var An=Dn.numPoints||1;Vt+=Dn.x*An,nn+=Dn.y*An,Dn.parentId=Jt,Ve&&(gn||(gn=this._map(yt,!0)),Ve(gn,this._map(Dn)))}}yt.parentId=Jt,qe.push(ce(Vt/Lt,nn/Lt,Jt,Lt,gn))}else if(qe.push(yt),Lt>1)for(var cn=0,bn=kt;cn<bn.length;cn+=1){var wn=wt.points[bn[cn]];wn.zoom<=et||(wn.zoom=et,qe.push(wn))}}}return qe},ae.prototype._getOriginId=function(Je){return Je-this.points.length>>5},ae.prototype._getOriginZoom=function(Je){return(Je-this.points.length)%32},ae.prototype._map=function(Je,et){if(Je.numPoints)return et?ve({},Je.properties):Je.properties;var qe=this.points[Je.index].properties,$e=this.options.map(qe);return et&&$e===qe?ve({},$e):$e},it.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},it.prototype.splitTile=function(Je,et,qe,$e,pt,ct,Ve){for(var Ge=[Je,et,qe,$e],ut=this.options,Qe=ut.debug;Ge.length;){$e=Ge.pop(),qe=Ge.pop(),et=Ge.pop(),Je=Ge.pop();var yt=1<<et,wt=Pt(et,qe,$e),kt=this.tiles[wt];if(!kt&&(Qe>1&&console.time("creation"),kt=this.tiles[wt]=At(Je,et,qe,$e,ut),this.tileCoords.push({z:et,x:qe,y:$e}),Qe)){Qe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",et,qe,$e,kt.numFeatures,kt.numPoints,kt.numSimplified),console.timeEnd("creation"));var vt="z"+et;this.stats[vt]=(this.stats[vt]||0)+1,this.total++}if(kt.source=Je,pt){if(et===ut.maxZoom||et===pt)continue;var Lt=1<<pt-et;if(qe!==Math.floor(ct/Lt)||$e!==Math.floor(Ve/Lt))continue}else if(et===ut.indexMaxZoom||kt.numPoints<=ut.indexMaxPoints)continue;if(kt.source=null,0!==Je.length){Qe>1&&console.time("clipping");var St,Ot,Nt,Bt,Vt,nn,gn=.5*ut.buffer/ut.extent,Jt=.5-gn,an=.5+gn,Xt=1+gn;St=Ot=Nt=Bt=null,Vt=Be(Je,yt,qe-gn,qe+an,0,kt.minX,kt.maxX,ut),nn=Be(Je,yt,qe+Jt,qe+Xt,0,kt.minX,kt.maxX,ut),Je=null,Vt&&(St=Be(Vt,yt,$e-gn,$e+an,1,kt.minY,kt.maxY,ut),Ot=Be(Vt,yt,$e+Jt,$e+Xt,1,kt.minY,kt.maxY,ut),Vt=null),nn&&(Nt=Be(nn,yt,$e-gn,$e+an,1,kt.minY,kt.maxY,ut),Bt=Be(nn,yt,$e+Jt,$e+Xt,1,kt.minY,kt.maxY,ut),nn=null),Qe>1&&console.timeEnd("clipping"),Ge.push(St||[],et+1,2*qe,2*$e),Ge.push(Ot||[],et+1,2*qe,2*$e+1),Ge.push(Nt||[],et+1,2*qe+1,2*$e),Ge.push(Bt||[],et+1,2*qe+1,2*$e+1)}}},it.prototype.getTile=function(Je,et,qe){var $e=this.options,pt=$e.extent,ct=$e.debug;if(Je<0||Je>24)return null;var Ve=1<<Je,Ge=Pt(Je,et=(et%Ve+Ve)%Ve,qe);if(this.tiles[Ge])return ht(this.tiles[Ge],pt);ct>1&&console.log("drilling down to z%d-%d-%d",Je,et,qe);for(var ut,Qe=Je,yt=et,wt=qe;!ut&&Qe>0;)Qe--,yt=Math.floor(yt/2),wt=Math.floor(wt/2),ut=this.tiles[Pt(Qe,yt,wt)];return ut&&ut.source?(ct>1&&console.log("found parent tile z%d-%d-%d",Qe,yt,wt),ct>1&&console.time("drilling down"),this.splitTile(ut.source,Qe,yt,wt,Je,et,qe),ct>1&&console.timeEnd("drilling down"),this.tiles[Ge]?ht(this.tiles[Ge],pt):null):null};var Ut=function(Je){function et(qe,$e,pt,ct){Je.call(this,qe,$e,pt,jt),ct&&(this.loadGeoJSON=ct)}return Je&&(et.__proto__=Je),(et.prototype=Object.create(Je&&Je.prototype)).constructor=et,et.prototype.loadData=function(qe,$e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=$e,this._pendingLoadDataParams=qe,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},et.prototype._loadData=function(){var qe=this;if(this._pendingCallback&&this._pendingLoadDataParams){var $e=this._pendingCallback,pt=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ct=!!(pt&&pt.request&&pt.request.collectResourceTiming)&&new o.RequestPerformance(pt.request);this.loadGeoJSON(pt,function(Ve,Ge){if(Ve||!Ge)return $e(Ve);if("object"!=typeof Ge)return $e(new Error("Input data given to '"+pt.source+"' is not a valid GeoJSON object."));u(Ge,!0);try{if(pt.filter){var ut=o.createExpression(pt.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===ut.result)throw new Error(ut.value.map(function(kt){return kt.key+": "+kt.message}).join(", "));var Qe=Ge.features.filter(function(kt){return ut.value.evaluate({zoom:0},kt)});Ge={type:"FeatureCollection",features:Qe}}qe._geoJSONIndex=pt.cluster?new ae(function(kt){var vt=kt.superclusterOptions,Lt=kt.clusterProperties;if(!Lt||!vt)return vt;for(var St={},Ot={},Nt={accumulated:null,zoom:0},Bt={properties:null},Vt=Object.keys(Lt),nn=0,gn=Vt;nn<gn.length;nn+=1){var Jt=gn[nn],an=Lt[Jt],Xt=an[0],Dn=o.createExpression(an[1]),An=o.createExpression("string"==typeof Xt?[Xt,["accumulated"],["get",Jt]]:Xt);St[Jt]=Dn.value,Ot[Jt]=An.value}return vt.map=function(cn){Bt.properties=cn;for(var bn={},hn=0,wn=Vt;hn<wn.length;hn+=1){var Ln=wn[hn];bn[Ln]=St[Ln].evaluate(Nt,Bt)}return bn},vt.reduce=function(cn,bn){Bt.properties=bn;for(var hn=0,wn=Vt;hn<wn.length;hn+=1){var Ln=wn[hn];Nt.accumulated=cn[Ln],cn[Ln]=Ot[Ln].evaluate(Nt,Bt)}},vt}(pt)).load(Ge.features):new it(kt=Ge,pt.geojsonVtOptions)}catch(kt){return $e(kt)}var kt;qe.loaded={};var yt={};if(ct){var wt=ct.finish();wt&&(yt.resourceTiming={},yt.resourceTiming[pt.source]=JSON.parse(JSON.stringify(wt)))}$e(null,yt)})}},et.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},et.prototype.reloadTile=function(qe,$e){var pt=this.loaded;return pt&&pt[qe.uid]?Je.prototype.reloadTile.call(this,qe,$e):this.loadTile(qe,$e)},et.prototype.loadGeoJSON=function(qe,$e){if(qe.request)o.getJSON(qe.request,$e);else{if("string"!=typeof qe.data)return $e(new Error("Input data given to '"+qe.source+"' is not a valid GeoJSON object."));try{return $e(null,JSON.parse(qe.data))}catch{return $e(new Error("Input data given to '"+qe.source+"' is not a valid GeoJSON object."))}}},et.prototype.removeSource=function(qe,$e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),$e()},et.prototype.getClusterExpansionZoom=function(qe,$e){try{$e(null,this._geoJSONIndex.getClusterExpansionZoom(qe.clusterId))}catch(pt){$e(pt)}},et.prototype.getClusterChildren=function(qe,$e){try{$e(null,this._geoJSONIndex.getChildren(qe.clusterId))}catch(pt){$e(pt)}},et.prototype.getClusterLeaves=function(qe,$e){try{$e(null,this._geoJSONIndex.getLeaves(qe.clusterId,qe.limit,qe.offset))}catch(pt){$e(pt)}},et}(n),Rt=function(Je){var et=this;this.self=Je,this.actor=new o.Actor(Je,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:n,geojson:Ut},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(qe,$e){if(et.workerSourceTypes[qe])throw new Error('Worker source with name "'+qe+'" already registered.');et.workerSourceTypes[qe]=$e},this.self.registerRTLTextPlugin=function(qe){if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=qe.applyArabicShaping,o.plugin.processBidirectionalText=qe.processBidirectionalText,o.plugin.processStyledBidirectionalText=qe.processStyledBidirectionalText}};return Rt.prototype.setReferrer=function(Je,et){this.referrer=et},Rt.prototype.setImages=function(Je,et,qe){for(var $e in this.availableImages[Je]=et,this.workerSources[Je]){var pt=this.workerSources[Je][$e];for(var ct in pt)pt[ct].availableImages=et}qe()},Rt.prototype.setLayers=function(Je,et,qe){this.getLayerIndex(Je).replace(et),qe()},Rt.prototype.updateLayers=function(Je,et,qe){this.getLayerIndex(Je).update(et.layers,et.removedIds),qe()},Rt.prototype.loadTile=function(Je,et,qe){this.getWorkerSource(Je,et.type,et.source).loadTile(et,qe)},Rt.prototype.loadDEMTile=function(Je,et,qe){this.getDEMWorkerSource(Je,et.source).loadTile(et,qe)},Rt.prototype.reloadTile=function(Je,et,qe){this.getWorkerSource(Je,et.type,et.source).reloadTile(et,qe)},Rt.prototype.abortTile=function(Je,et,qe){this.getWorkerSource(Je,et.type,et.source).abortTile(et,qe)},Rt.prototype.removeTile=function(Je,et,qe){this.getWorkerSource(Je,et.type,et.source).removeTile(et,qe)},Rt.prototype.removeDEMTile=function(Je,et){this.getDEMWorkerSource(Je,et.source).removeTile(et)},Rt.prototype.removeSource=function(Je,et,qe){if(this.workerSources[Je]&&this.workerSources[Je][et.type]&&this.workerSources[Je][et.type][et.source]){var $e=this.workerSources[Je][et.type][et.source];delete this.workerSources[Je][et.type][et.source],void 0!==$e.removeSource?$e.removeSource(et,qe):qe()}},Rt.prototype.loadWorkerSource=function(Je,et,qe){try{this.self.importScripts(et.url),qe()}catch($e){qe($e.toString())}},Rt.prototype.syncRTLPluginState=function(Je,et,qe){try{o.plugin.setState(et);var $e=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&null!=$e){this.self.importScripts($e);var pt=o.plugin.isParsed();qe(pt?void 0:new Error("RTL Text Plugin failed to import scripts from "+$e),pt)}}catch(ct){qe(ct.toString())}},Rt.prototype.getAvailableImages=function(Je){var et=this.availableImages[Je];return et||(et=[]),et},Rt.prototype.getLayerIndex=function(Je){var et=this.layerIndexes[Je];return et||(et=this.layerIndexes[Je]=new p),et},Rt.prototype.getWorkerSource=function(Je,et,qe){var $e=this;return this.workerSources[Je]||(this.workerSources[Je]={}),this.workerSources[Je][et]||(this.workerSources[Je][et]={}),this.workerSources[Je][et][qe]||(this.workerSources[Je][et][qe]=new this.workerSourceTypes[et]({send:function(ct,Ve,Ge){$e.actor.send(ct,Ve,Ge,Je)}},this.getLayerIndex(Je),this.getAvailableImages(Je))),this.workerSources[Je][et][qe]},Rt.prototype.getDEMWorkerSource=function(Je,et){return this.demWorkerSources[Je]||(this.demWorkerSources[Je]={}),this.demWorkerSources[Je][et]||(this.demWorkerSources[Je][et]=new s),this.demWorkerSources[Je][et]},Rt.prototype.enforceCacheSizeLimit=function(Je,et){o.enforceCacheSizeLimit(et)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Rt(self)),Rt}),k(0,function(o){var T=o.createCommonjsModule(function(N){function W(G){return!H(G)}function H(G){return typeof window<"u"&&typeof document<"u"?Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var oe,de,Ae=new Blob([""],{type:"text/javascript"}),De=URL.createObjectURL(Ae);try{de=new Worker(De),oe=!0}catch{oe=!1}return de&&de.terminate(),URL.revokeObjectURL(De),oe}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var oe=document.createElement("canvas");oe.width=oe.height=1;var de=oe.getContext("2d");if(!de)return!1;var Ae=de.getImageData(0,0,1,1);return Ae&&Ae.width===oe.width}()?(void 0===C[Q=G&&G.failIfMajorPerformanceCaveat]&&(C[Q]=function(oe){var De,je,Ye,de=(De=oe,je=document.createElement("canvas"),(Ye=Object.create(W.webGLContextAttributes)).failIfMajorPerformanceCaveat=De,je.probablySupportsContext?je.probablySupportsContext("webgl",Ye)||je.probablySupportsContext("experimental-webgl",Ye):je.supportsContext?je.supportsContext("webgl",Ye)||je.supportsContext("experimental-webgl",Ye):je.getContext("webgl",Ye)||je.getContext("experimental-webgl",Ye));if(!de)return!1;var Ae=de.createShader(de.VERTEX_SHADER);return!(!Ae||de.isContextLost())&&(de.shaderSource(Ae,"void main() {}"),de.compileShader(Ae),!0===de.getShaderParameter(Ae,de.COMPILE_STATUS))}(Q)),C[Q]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser";var Q}N.exports?N.exports=W:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=W,window.mapboxgl.notSupportedReason=H);var C={};W.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),_={create:function(N,W,H){var C=o.window.document.createElement(N);return void 0!==W&&(C.className=W),H&&H.appendChild(C),C},createNS:function(N,W){return o.window.document.createElementNS(N,W)}},p=o.window.document&&o.window.document.documentElement.style;function l(N){if(!p)return N[0];for(var W=0;W<N.length;W++)if(N[W]in p)return N[W];return N[0]}var t,i=l(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);_.disableDrag=function(){p&&i&&(t=p[i],p[i]="none")},_.enableDrag=function(){p&&i&&(p[i]=t)};var r=l(["transform","WebkitTransform"]);_.setTransform=function(N,W){N.style[r]=W};var n=!1;try{var a=Object.defineProperty({},"passive",{get:function(){n=!0}});o.window.addEventListener("test",a,a),o.window.removeEventListener("test",a,a)}catch{n=!1}_.addEventListener=function(N,W,H,C){void 0===C&&(C={}),N.addEventListener(W,H,"passive"in C&&n?C:C.capture)},_.removeEventListener=function(N,W,H,C){void 0===C&&(C={}),N.removeEventListener(W,H,"passive"in C&&n?C:C.capture)};var s=function(N){N.preventDefault(),N.stopPropagation(),o.window.removeEventListener("click",s,!0)};function u(N){var W=N.userImage;return!!(W&&W.render&&W.render())&&(N.data.replace(new Uint8Array(W.data.buffer)),!0)}_.suppressClick=function(){o.window.addEventListener("click",s,!0),o.window.setTimeout(function(){o.window.removeEventListener("click",s,!0)},0)},_.mousePos=function(N,W){var H=N.getBoundingClientRect();return new o.Point(W.clientX-H.left-N.clientLeft,W.clientY-H.top-N.clientTop)},_.touchPos=function(N,W){for(var H=N.getBoundingClientRect(),C=[],G=0;G<W.length;G++)C.push(new o.Point(W[G].clientX-H.left-N.clientLeft,W[G].clientY-H.top-N.clientTop));return C},_.mouseButton=function(N){return void 0!==o.window.InstallTrigger&&2===N.button&&N.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:N.button},_.remove=function(N){N.parentNode&&N.parentNode.removeChild(N)};var f=function(N){function W(){N.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.isLoaded=function(){return this.loaded},W.prototype.setLoaded=function(H){if(this.loaded!==H&&(this.loaded=H,H)){for(var C=0,G=this.requestors;C<G.length;C+=1){var Q=G[C];this._notify(Q.ids,Q.callback)}this.requestors=[]}},W.prototype.getImage=function(H){return this.images[H]},W.prototype.addImage=function(H,C){this._validate(H,C)&&(this.images[H]=C)},W.prototype._validate=function(H,C){var G=!0;return this._validateStretch(C.stretchX,C.data&&C.data.width)||(this.fire(new o.ErrorEvent(new Error('Image "'+H+'" has invalid "stretchX" value'))),G=!1),this._validateStretch(C.stretchY,C.data&&C.data.height)||(this.fire(new o.ErrorEvent(new Error('Image "'+H+'" has invalid "stretchY" value'))),G=!1),this._validateContent(C.content,C)||(this.fire(new o.ErrorEvent(new Error('Image "'+H+'" has invalid "content" value'))),G=!1),G},W.prototype._validateStretch=function(H,C){if(!H)return!0;for(var G=0,Q=0,oe=H;Q<oe.length;Q+=1){var de=oe[Q];if(de[0]<G||de[1]<de[0]||C<de[1])return!1;G=de[1]}return!0},W.prototype._validateContent=function(H,C){return!(H&&(4!==H.length||H[0]<0||C.data.width<H[0]||H[1]<0||C.data.height<H[1]||H[2]<0||C.data.width<H[2]||H[3]<0||C.data.height<H[3]||H[2]<H[0]||H[3]<H[1]))},W.prototype.updateImage=function(H,C){C.version=this.images[H].version+1,this.images[H]=C,this.updatedImages[H]=!0},W.prototype.removeImage=function(H){var C=this.images[H];delete this.images[H],delete this.patterns[H],C.userImage&&C.userImage.onRemove&&C.userImage.onRemove()},W.prototype.listImages=function(){return Object.keys(this.images)},W.prototype.getImages=function(H,C){var G=!0;if(!this.isLoaded())for(var Q=0,oe=H;Q<oe.length;Q+=1)this.images[oe[Q]]||(G=!1);this.isLoaded()||G?this._notify(H,C):this.requestors.push({ids:H,callback:C})},W.prototype._notify=function(H,C){for(var G={},Q=0,oe=H;Q<oe.length;Q+=1){var de=oe[Q];this.images[de]||this.fire(new o.Event("styleimagemissing",{id:de}));var Ae=this.images[de];Ae?G[de]={data:Ae.data.clone(),pixelRatio:Ae.pixelRatio,sdf:Ae.sdf,version:Ae.version,stretchX:Ae.stretchX,stretchY:Ae.stretchY,content:Ae.content,hasRenderCallback:!(!Ae.userImage||!Ae.userImage.render)}:o.warnOnce('Image "'+de+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}C(null,G)},W.prototype.getPixelSize=function(){var H=this.atlasImage;return{width:H.width,height:H.height}},W.prototype.getPattern=function(H){var C=this.patterns[H],G=this.getImage(H);if(!G)return null;if(C&&C.position.version===G.version)return C.position;if(C)C.position.version=G.version;else{var Q={w:G.data.width+2,h:G.data.height+2,x:0,y:0},oe=new o.ImagePosition(Q,G);this.patterns[H]={bin:Q,position:oe}}return this._updatePatternAtlas(),this.patterns[H].position},W.prototype.bind=function(H){var C=H.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(H,this.atlasImage,C.RGBA),this.atlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE)},W.prototype._updatePatternAtlas=function(){var H=[];for(var C in this.patterns)H.push(this.patterns[C].bin);var G=o.potpack(H),Q=G.w,oe=G.h,de=this.atlasImage;for(var Ae in de.resize({width:Q||1,height:oe||1}),this.patterns){var De=this.patterns[Ae].bin,je=De.x+1,Ye=De.y+1,Ke=this.images[Ae].data,st=Ke.width,mt=Ke.height;o.RGBAImage.copy(Ke,de,{x:0,y:0},{x:je,y:Ye},{width:st,height:mt}),o.RGBAImage.copy(Ke,de,{x:0,y:mt-1},{x:je,y:Ye-1},{width:st,height:1}),o.RGBAImage.copy(Ke,de,{x:0,y:0},{x:je,y:Ye+mt},{width:st,height:1}),o.RGBAImage.copy(Ke,de,{x:st-1,y:0},{x:je-1,y:Ye},{width:1,height:mt}),o.RGBAImage.copy(Ke,de,{x:0,y:0},{x:je+st,y:Ye},{width:1,height:mt})}this.dirty=!0},W.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},W.prototype.dispatchRenderCallbacks=function(H){for(var C=0,G=H;C<G.length;C+=1){var Q=G[C];if(!this.callbackDispatchedThisFrame[Q]){this.callbackDispatchedThisFrame[Q]=!0;var oe=this.images[Q];u(oe)&&this.updateImage(Q,oe)}}},W}(o.Evented),c=m,y=m,d=1e20;function m(N,W,H,C,G,Q){this.fontSize=N||24,this.buffer=void 0===W?3:W,this.cutoff=C||.25,this.fontFamily=G||"sans-serif",this.fontWeight=Q||"normal",this.radius=H||8;var oe=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=oe,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(oe*oe),this.gridInner=new Float64Array(oe*oe),this.f=new Float64Array(oe),this.d=new Float64Array(oe),this.z=new Float64Array(oe+1),this.v=new Int16Array(oe),this.middle=Math.round(oe/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function g(N,W,H,C,G,Q,oe){for(var de=0;de<W;de++){for(var Ae=0;Ae<H;Ae++)C[Ae]=N[Ae*W+de];for(x(C,G,Q,oe,H),Ae=0;Ae<H;Ae++)N[Ae*W+de]=G[Ae]}for(Ae=0;Ae<H;Ae++){for(de=0;de<W;de++)C[de]=N[Ae*W+de];for(x(C,G,Q,oe,W),de=0;de<W;de++)N[Ae*W+de]=Math.sqrt(G[de])}}function x(N,W,H,C,G){H[0]=0,C[0]=-d,C[1]=+d;for(var Q=1,oe=0;Q<G;Q++){for(var de=(N[Q]+Q*Q-(N[H[oe]]+H[oe]*H[oe]))/(2*Q-2*H[oe]);de<=C[oe];)oe--,de=(N[Q]+Q*Q-(N[H[oe]]+H[oe]*H[oe]))/(2*Q-2*H[oe]);H[++oe]=Q,C[oe]=de,C[oe+1]=+d}for(Q=0,oe=0;Q<G;Q++){for(;C[oe+1]<Q;)oe++;W[Q]=(Q-H[oe])*(Q-H[oe])+N[H[oe]]}}m.prototype.draw=function(N){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(N,this.buffer,this.middle);for(var W=this.ctx.getImageData(0,0,this.size,this.size),H=new Uint8ClampedArray(this.size*this.size),C=0;C<this.size*this.size;C++){var G=W.data[4*C+3]/255;this.gridOuter[C]=1===G?0:0===G?d:Math.pow(Math.max(0,.5-G),2),this.gridInner[C]=1===G?d:0===G?0:Math.pow(Math.max(0,G-.5),2)}for(g(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),g(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),C=0;C<this.size*this.size;C++)H[C]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[C]-this.gridInner[C])/this.radius+this.cutoff))));return H},c.default=y;var v=function(N,W){this.requestManager=N,this.localIdeographFontFamily=W,this.entries={}};v.prototype.setURL=function(N){this.url=N},v.prototype.getGlyphs=function(N,W){var H=this,C=[];for(var G in N)for(var Q=0,oe=N[G];Q<oe.length;Q+=1)C.push({stack:G,id:oe[Q]});o.asyncAll(C,function(Ae,De){var je=Ae.stack,Ye=Ae.id,Ke=H.entries[je];Ke||(Ke=H.entries[je]={glyphs:{},requests:{},ranges:{}});var st=Ke.glyphs[Ye];if(void 0===st){if(st=H._tinySDF(Ke,je,Ye))return Ke.glyphs[Ye]=st,void De(null,{stack:je,id:Ye,glyph:st});var mt=Math.floor(Ye/256);if(256*mt>65535)De(new Error("glyphs > 65535 not supported"));else if(Ke.ranges[mt])De(null,{stack:je,id:Ye,glyph:st});else{var xt=Ke.requests[mt];xt||(xt=Ke.requests[mt]=[],v.loadGlyphRange(je,mt,H.url,H.requestManager,function(Et,Dt){if(Dt){for(var It in Dt)H._doesCharSupportLocalGlyph(+It)||(Ke.glyphs[+It]=Dt[+It]);Ke.ranges[mt]=!0}for(var qt=0,Ft=xt;qt<Ft.length;qt+=1)(0,Ft[qt])(Et,Dt);delete Ke.requests[mt]})),xt.push(function(Et,Dt){Et?De(Et):Dt&&De(null,{stack:je,id:Ye,glyph:Dt[Ye]||null})})}}else De(null,{stack:je,id:Ye,glyph:st})},function(Ae,De){if(Ae)W(Ae);else if(De){for(var je={},Ye=0,Ke=De;Ye<Ke.length;Ye+=1){var st=Ke[Ye],mt=st.stack,xt=st.id,Et=st.glyph;(je[mt]||(je[mt]={}))[xt]=Et&&{id:Et.id,bitmap:Et.bitmap.clone(),metrics:Et.metrics}}W(null,je)}})},v.prototype._doesCharSupportLocalGlyph=function(N){return!!this.localIdeographFontFamily&&(o.isChar["CJK Unified Ideographs"](N)||o.isChar["Hangul Syllables"](N)||o.isChar.Hiragana(N)||o.isChar.Katakana(N))},v.prototype._tinySDF=function(N,W,H){var C=this.localIdeographFontFamily;if(C&&this._doesCharSupportLocalGlyph(H)){var G=N.tinySDF;if(!G){var Q="400";/bold/i.test(W)?Q="900":/medium/i.test(W)?Q="500":/light/i.test(W)&&(Q="200"),G=N.tinySDF=new v.TinySDF(24,3,8,.25,C,Q)}return{id:H,bitmap:new o.AlphaImage({width:30,height:30},G.draw(String.fromCharCode(H))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},v.loadGlyphRange=function(N,W,H,C,G){var Q=256*W,oe=Q+255,de=C.transformRequest(C.normalizeGlyphsURL(H).replace("{fontstack}",N).replace("{range}",Q+"-"+oe),o.ResourceType.Glyphs);o.getArrayBuffer(de,function(Ae,De){if(Ae)G(Ae);else if(De){for(var je={},Ye=0,Ke=o.parseGlyphPBF(De);Ye<Ke.length;Ye+=1){var st=Ke[Ye];je[st.id]=st}G(null,je)}})},v.TinySDF=c;var b=function(){this.specification=o.styleSpec.light.position};b.prototype.possiblyEvaluate=function(N,W){return o.sphericalToCartesian(N.expression.evaluate(W))},b.prototype.interpolate=function(N,W,H){return{x:o.number(N.x,W.x,H),y:o.number(N.y,W.y,H),z:o.number(N.z,W.z,H)}};var h=new o.Properties({anchor:new o.DataConstantProperty(o.styleSpec.light.anchor),position:new b,color:new o.DataConstantProperty(o.styleSpec.light.color),intensity:new o.DataConstantProperty(o.styleSpec.light.intensity)}),w=function(N){function W(H){N.call(this),this._transitionable=new o.Transitionable(h),this.setLight(H),this._transitioning=this._transitionable.untransitioned()}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getLight=function(){return this._transitionable.serialize()},W.prototype.setLight=function(H,C){if(void 0===C&&(C={}),!this._validate(o.validateLight,H,C))for(var G in H){var Q=H[G];o.endsWith(G,"-transition")?this._transitionable.setTransition(G.slice(0,-11),Q):this._transitionable.setValue(G,Q)}},W.prototype.updateTransitions=function(H){this._transitioning=this._transitionable.transitioned(H,this._transitioning)},W.prototype.hasTransition=function(){return this._transitioning.hasTransition()},W.prototype.recalculate=function(H){this.properties=this._transitioning.possiblyEvaluate(H)},W.prototype._validate=function(H,C,G){return(!G||!1!==G.validate)&&o.emitValidationErrors(this,H.call(o.validateStyle,o.extend({value:C,style:{glyphs:!0,sprite:!0},styleSpec:o.styleSpec})))},W}(o.Evented),E=function(N,W){this.width=N,this.height=W,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};E.prototype.getDash=function(N,W){var H=N.join(",")+String(W);return this.dashEntry[H]||(this.dashEntry[H]=this.addDash(N,W)),this.dashEntry[H]},E.prototype.getDashRanges=function(N,W,H){var C=[],G=N.length%2==1?-N[N.length-1]*H:0,Q=N[0]*H,oe=!0;C.push({left:G,right:Q,isDash:oe,zeroLength:0===N[0]});for(var de=N[0],Ae=1;Ae<N.length;Ae++){var De=N[Ae];G=de*H,Q=(de+=De)*H,C.push({left:G,right:Q,isDash:oe=!oe,zeroLength:0===De})}return C},E.prototype.addRoundDash=function(N,W,H){for(var C=W/2,G=-H;G<=H;G++)for(var oe=this.width*(this.nextRow+H+G),de=0,Ae=N[de],De=0;De<this.width;De++){De/Ae.right>1&&(Ae=N[++de]);var je=Math.abs(De-Ae.left),Ye=Math.abs(De-Ae.right),Ke=Math.min(je,Ye),st=void 0,mt=G/H*(C+1);if(Ae.isDash){var xt=C-Math.abs(mt);st=Math.sqrt(Ke*Ke+xt*xt)}else st=C-Math.sqrt(Ke*Ke+mt*mt);this.data[oe+De]=Math.max(0,Math.min(255,st+128))}},E.prototype.addRegularDash=function(N){for(var W=N.length-1;W>=0;--W){var H=N[W],C=N[W+1];H.zeroLength?N.splice(W,1):C&&C.isDash===H.isDash&&(C.left=H.left,N.splice(W,1))}var G=N[0],Q=N[N.length-1];G.isDash===Q.isDash&&(G.left=Q.left-this.width,Q.right=G.right+this.width);for(var oe=this.width*this.nextRow,de=0,Ae=N[de],De=0;De<this.width;De++){De/Ae.right>1&&(Ae=N[++de]);var je=Math.abs(De-Ae.left),Ye=Math.abs(De-Ae.right),Ke=Math.min(je,Ye);this.data[oe+De]=Math.max(0,Math.min(255,(Ae.isDash?Ke:-Ke)+128))}},E.prototype.addDash=function(N,W){var H=W?7:0,C=2*H+1;if(this.nextRow+C>this.height)return o.warnOnce("LineAtlas out of space"),null;for(var G=0,Q=0;Q<N.length;Q++)G+=N[Q];if(0!==G){var oe=this.width/G,de=this.getDashRanges(N,this.width,oe);W?this.addRoundDash(de,oe,H):this.addRegularDash(de)}var Ae={y:(this.nextRow+H+.5)/this.height,height:2*H/this.height,width:G};return this.nextRow+=C,this.dirty=!0,Ae},E.prototype.bind=function(N){var W=N.gl;this.texture?(W.bindTexture(W.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,W.texSubImage2D(W.TEXTURE_2D,0,0,0,this.width,this.height,W.ALPHA,W.UNSIGNED_BYTE,this.data))):(this.texture=W.createTexture(),W.bindTexture(W.TEXTURE_2D,this.texture),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_S,W.REPEAT),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_T,W.REPEAT),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MIN_FILTER,W.LINEAR),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MAG_FILTER,W.LINEAR),W.texImage2D(W.TEXTURE_2D,0,W.ALPHA,this.width,this.height,0,W.ALPHA,W.UNSIGNED_BYTE,this.data))};var P=function N(W,H){this.workerPool=W,this.actors=[],this.currentActor=0,this.id=o.uniqueId();for(var C=this.workerPool.acquire(this.id),G=0;G<C.length;G++){var oe=new N.Actor(C[G],H,this.id);oe.name="Worker "+G,this.actors.push(oe)}};function I(N,W,H){var C=function(G,Q){if(G)return H(G);if(Q){var oe=o.pick(o.extend(Q,N),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Q.vector_layers&&(oe.vectorLayers=Q.vector_layers,oe.vectorLayerIds=oe.vectorLayers.map(function(de){return de.id})),oe.tiles=W.canonicalizeTileset(oe,N.url),H(null,oe)}};return N.url?o.getJSON(W.transformRequest(W.normalizeSourceURL(N.url),o.ResourceType.Source),C):o.browser.frame(function(){return C(null,N)})}P.prototype.broadcast=function(N,W,H){o.asyncAll(this.actors,function(C,G){C.send(N,W,G)},H=H||function(){})},P.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},P.prototype.remove=function(){this.actors.forEach(function(N){N.remove()}),this.actors=[],this.workerPool.release(this.id)},P.Actor=o.Actor;var O=function(N,W,H){this.bounds=o.LngLatBounds.convert(this.validateBounds(N)),this.minzoom=W||0,this.maxzoom=H||24};O.prototype.validateBounds=function(N){return Array.isArray(N)&&4===N.length?[Math.max(-180,N[0]),Math.max(-90,N[1]),Math.min(180,N[2]),Math.min(90,N[3])]:[-180,-90,180,90]},O.prototype.contains=function(N){var W=Math.pow(2,N.z),H=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*W),C=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*W),G=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*W),Q=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*W);return N.x>=H&&N.x<G&&N.y>=C&&N.y<Q};var z=function(N){function W(H,C,G,Q){if(N.call(this),this.id=H,this.dispatcher=G,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(C,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},C),this._collectResourceTiming=C.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Q)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.load=function(){var H=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=I(this._options,this.map._requestManager,function(C,G){H._tileJSONRequest=null,H._loaded=!0,C?H.fire(new o.ErrorEvent(C)):G&&(o.extend(H,G),G.bounds&&(H.tileBounds=new O(G.bounds,H.minzoom,H.maxzoom)),o.postTurnstileEvent(G.tiles,H.map._requestManager._customAccessToken),o.postMapLoadEvent(G.tiles,H.map._getMapId(),H.map._requestManager._skuToken,H.map._requestManager._customAccessToken),H.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),H.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},W.prototype.loaded=function(){return this._loaded},W.prototype.hasTile=function(H){return!this.tileBounds||this.tileBounds.contains(H.canonical)},W.prototype.onAdd=function(H){this.map=H,this.load()},W.prototype.setSourceProperty=function(H){this._tileJSONRequest&&this._tileJSONRequest.cancel(),H(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},W.prototype.setTiles=function(H){var C=this;return this.setSourceProperty(function(){C._options.tiles=H}),this},W.prototype.setUrl=function(H){var C=this;return this.setSourceProperty(function(){C.url=H,C._options.url=H}),this},W.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},W.prototype.serialize=function(){return o.extend({},this._options)},W.prototype.loadTile=function(H,C){var G=this.map._requestManager.normalizeTileURL(H.tileID.canonical.url(this.tiles,this.scheme)),Q={request:this.map._requestManager.transformRequest(G,o.ResourceType.Tile),uid:H.uid,tileID:H.tileID,zoom:H.tileID.overscaledZ,tileSize:this.tileSize*H.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function oe(de,Ae){return delete H.request,H.aborted?C(null):de&&404!==de.status?C(de):(Ae&&Ae.resourceTiming&&(H.resourceTiming=Ae.resourceTiming),this.map._refreshExpiredTiles&&Ae&&H.setExpiryData(Ae),H.loadVectorData(Ae,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),C(null),void(H.reloadCallback&&(this.loadTile(H,H.reloadCallback),H.reloadCallback=null)))}Q.request.collectResourceTiming=this._collectResourceTiming,H.actor&&"expired"!==H.state?"loading"===H.state?H.reloadCallback=C:H.request=H.actor.send("reloadTile",Q,oe.bind(this)):(H.actor=this.dispatcher.getActor(),H.request=H.actor.send("loadTile",Q,oe.bind(this)))},W.prototype.abortTile=function(H){H.request&&(H.request.cancel(),delete H.request),H.actor&&H.actor.send("abortTile",{uid:H.uid,type:this.type,source:this.id},void 0)},W.prototype.unloadTile=function(H){H.unloadVectorData(),H.actor&&H.actor.send("removeTile",{uid:H.uid,type:this.type,source:this.id},void 0)},W.prototype.hasTransition=function(){return!1},W}(o.Evented),U=function(N){function W(H,C,G,Q){N.call(this),this.id=H,this.dispatcher=G,this.setEventedParent(Q),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},C),o.extend(this,o.pick(C,["url","scheme","tileSize"]))}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.load=function(){var H=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=I(this._options,this.map._requestManager,function(C,G){H._tileJSONRequest=null,H._loaded=!0,C?H.fire(new o.ErrorEvent(C)):G&&(o.extend(H,G),G.bounds&&(H.tileBounds=new O(G.bounds,H.minzoom,H.maxzoom)),o.postTurnstileEvent(G.tiles),o.postMapLoadEvent(G.tiles,H.map._getMapId(),H.map._requestManager._skuToken),H.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),H.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},W.prototype.loaded=function(){return this._loaded},W.prototype.onAdd=function(H){this.map=H,this.load()},W.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},W.prototype.serialize=function(){return o.extend({},this._options)},W.prototype.hasTile=function(H){return!this.tileBounds||this.tileBounds.contains(H.canonical)},W.prototype.loadTile=function(H,C){var G=this,Q=this.map._requestManager.normalizeTileURL(H.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);H.request=o.getImage(this.map._requestManager.transformRequest(Q,o.ResourceType.Tile),function(oe,de){if(delete H.request,H.aborted)H.state="unloaded",C(null);else if(oe)H.state="errored",C(oe);else if(de){G.map._refreshExpiredTiles&&H.setExpiryData(de),delete de.cacheControl,delete de.expires;var Ae=G.map.painter.context,De=Ae.gl;H.texture=G.map.painter.getTileTexture(de.width),H.texture?H.texture.update(de,{useMipmap:!0}):(H.texture=new o.Texture(Ae,de,De.RGBA,{useMipmap:!0}),H.texture.bind(De.LINEAR,De.CLAMP_TO_EDGE,De.LINEAR_MIPMAP_NEAREST),Ae.extTextureFilterAnisotropic&&De.texParameterf(De.TEXTURE_2D,Ae.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ae.extTextureFilterAnisotropicMax)),H.state="loaded",o.cacheEntryPossiblyAdded(G.dispatcher),C(null)}})},W.prototype.abortTile=function(H,C){H.request&&(H.request.cancel(),delete H.request),C()},W.prototype.unloadTile=function(H,C){H.texture&&this.map.painter.saveTileTexture(H.texture),C()},W.prototype.hasTransition=function(){return!1},W}(o.Evented),R=function(N){function W(H,C,G,Q){N.call(this,H,C,G,Q),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},C),this.encoding=C.encoding||"mapbox"}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},W.prototype.loadTile=function(H,C){var G=this.map._requestManager.normalizeTileURL(H.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function Q(oe,de){oe&&(H.state="errored",C(oe)),de&&(H.dem=de,H.needsHillshadePrepare=!0,H.state="loaded",C(null))}H.request=o.getImage(this.map._requestManager.transformRequest(G,o.ResourceType.Tile),function(oe,de){if(delete H.request,H.aborted)H.state="unloaded",C(null);else if(oe)H.state="errored",C(oe);else if(de){this.map._refreshExpiredTiles&&H.setExpiryData(de),delete de.cacheControl,delete de.expires;var Ae=o.window.ImageBitmap&&de instanceof o.window.ImageBitmap&&o.offscreenCanvasSupported()?de:o.browser.getImageData(de,1),De={uid:H.uid,coord:H.tileID,source:this.id,rawImageData:Ae,encoding:this.encoding};H.actor&&"expired"!==H.state||(H.actor=this.dispatcher.getActor(),H.actor.send("loadDEMTile",De,Q.bind(this)))}}.bind(this)),H.neighboringTiles=this._getNeighboringTiles(H.tileID)},W.prototype._getNeighboringTiles=function(H){var C=H.canonical,G=Math.pow(2,C.z),Q=(C.x-1+G)%G,oe=0===C.x?H.wrap-1:H.wrap,de=(C.x+1+G)%G,Ae=C.x+1===G?H.wrap+1:H.wrap,De={};return De[new o.OverscaledTileID(H.overscaledZ,oe,C.z,Q,C.y).key]={backfilled:!1},De[new o.OverscaledTileID(H.overscaledZ,Ae,C.z,de,C.y).key]={backfilled:!1},C.y>0&&(De[new o.OverscaledTileID(H.overscaledZ,oe,C.z,Q,C.y-1).key]={backfilled:!1},De[new o.OverscaledTileID(H.overscaledZ,H.wrap,C.z,C.x,C.y-1).key]={backfilled:!1},De[new o.OverscaledTileID(H.overscaledZ,Ae,C.z,de,C.y-1).key]={backfilled:!1}),C.y+1<G&&(De[new o.OverscaledTileID(H.overscaledZ,oe,C.z,Q,C.y+1).key]={backfilled:!1},De[new o.OverscaledTileID(H.overscaledZ,H.wrap,C.z,C.x,C.y+1).key]={backfilled:!1},De[new o.OverscaledTileID(H.overscaledZ,Ae,C.z,de,C.y+1).key]={backfilled:!1}),De},W.prototype.unloadTile=function(H){H.demTexture&&this.map.painter.saveTileTexture(H.demTexture),H.fbo&&(H.fbo.destroy(),delete H.fbo),H.dem&&delete H.dem,delete H.neighboringTiles,H.state="unloaded",H.actor&&H.actor.send("removeDEMTile",{uid:H.uid,source:this.id})},W}(U),j=function(N){function W(H,C,G,Q){N.call(this),this.id=H,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=G.getActor(),this.setEventedParent(Q),this._data=C.data,this._options=o.extend({},C),this._collectResourceTiming=C.collectResourceTiming,this._resourceTiming=[],void 0!==C.maxzoom&&(this.maxzoom=C.maxzoom),C.type&&(this.type=C.type),C.attribution&&(this.attribution=C.attribution),this.promoteId=C.promoteId;var oe=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:C.cluster||!1,geojsonVtOptions:{buffer:(void 0!==C.buffer?C.buffer:128)*oe,tolerance:(void 0!==C.tolerance?C.tolerance:.375)*oe,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:C.lineMetrics||!1,generateId:C.generateId||!1},superclusterOptions:{maxZoom:void 0!==C.clusterMaxZoom?Math.min(C.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,C.clusterMinPoints||2),extent:o.EXTENT,radius:(C.clusterRadius||50)*oe,log:!1,generateId:C.generateId||!1},clusterProperties:C.clusterProperties,filter:C.filter},C.workerOptions)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.load=function(){var H=this;this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(C){if(C)H.fire(new o.ErrorEvent(C));else{var G={dataType:"source",sourceDataType:"metadata"};H._collectResourceTiming&&H._resourceTiming&&H._resourceTiming.length>0&&(G.resourceTiming=H._resourceTiming,H._resourceTiming=[]),H.fire(new o.Event("data",G))}})},W.prototype.onAdd=function(H){this.map=H,this.load()},W.prototype.setData=function(H){var C=this;return this._data=H,this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(G){if(G)C.fire(new o.ErrorEvent(G));else{var Q={dataType:"source",sourceDataType:"content"};C._collectResourceTiming&&C._resourceTiming&&C._resourceTiming.length>0&&(Q.resourceTiming=C._resourceTiming,C._resourceTiming=[]),C.fire(new o.Event("data",Q))}}),this},W.prototype.getClusterExpansionZoom=function(H,C){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:H,source:this.id},C),this},W.prototype.getClusterChildren=function(H,C){return this.actor.send("geojson.getClusterChildren",{clusterId:H,source:this.id},C),this},W.prototype.getClusterLeaves=function(H,C,G,Q){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:H,limit:C,offset:G},Q),this},W.prototype._updateWorkerData=function(H){var C=this;this._loaded=!1;var G=o.extend({},this.workerOptions),Q=this._data;"string"==typeof Q?(G.request=this.map._requestManager.transformRequest(o.browser.resolveURL(Q),o.ResourceType.Source),G.request.collectResourceTiming=this._collectResourceTiming):G.data=JSON.stringify(Q),this.actor.send(this.type+".loadData",G,function(oe,de){C._removed||de&&de.abandoned||(C._loaded=!0,de&&de.resourceTiming&&de.resourceTiming[C.id]&&(C._resourceTiming=de.resourceTiming[C.id].slice(0)),C.actor.send(C.type+".coalesce",{source:G.source},null),H(oe))})},W.prototype.loaded=function(){return this._loaded},W.prototype.loadTile=function(H,C){var G=this,Q=H.actor?"reloadTile":"loadTile";H.actor=this.actor,H.request=this.actor.send(Q,{type:this.type,uid:H.uid,tileID:H.tileID,zoom:H.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(de,Ae){return delete H.request,H.unloadVectorData(),H.aborted?C(null):de?C(de):(H.loadVectorData(Ae,G.map.painter,"reloadTile"===Q),C(null))})},W.prototype.abortTile=function(H){H.request&&(H.request.cancel(),delete H.request),H.aborted=!0},W.prototype.unloadTile=function(H){H.unloadVectorData(),this.actor.send("removeTile",{uid:H.uid,type:this.type,source:this.id})},W.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},W.prototype.serialize=function(){return o.extend({},this._options,{type:this.type,data:this._data})},W.prototype.hasTransition=function(){return!1},W}(o.Evented),Y=o.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),B=function(N){function W(H,C,G,Q){N.call(this),this.id=H,this.dispatcher=G,this.coordinates=C.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Q),this.options=C}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.load=function(H,C){var G=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),function(Q,oe){G._loaded=!0,Q?G.fire(new o.ErrorEvent(Q)):oe&&(G.image=oe,H&&(G.coordinates=H),C&&C(),G._finishLoading())})},W.prototype.loaded=function(){return this._loaded},W.prototype.updateImage=function(H){var C=this;return this.image&&H.url?(this.options.url=H.url,this.load(H.coordinates,function(){C.texture=null}),this):this},W.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))},W.prototype.onAdd=function(H){this.map=H,this.load()},W.prototype.setCoordinates=function(H){var C=this;this.coordinates=H;var G=H.map(o.MercatorCoordinate.fromLngLat);this.tileID=function(oe){for(var de=1/0,Ae=1/0,De=-1/0,je=-1/0,Ye=0,Ke=oe;Ye<Ke.length;Ye+=1){var st=Ke[Ye];de=Math.min(de,st.x),Ae=Math.min(Ae,st.y),De=Math.max(De,st.x),je=Math.max(je,st.y)}var Et=Math.max(De-de,je-Ae),Dt=Math.max(0,Math.floor(-Math.log(Et)/Math.LN2)),It=Math.pow(2,Dt);return new o.CanonicalTileID(Dt,Math.floor((de+De)/2*It),Math.floor((Ae+je)/2*It))}(G),this.minzoom=this.maxzoom=this.tileID.z;var Q=G.map(function(oe){return C.tileID.getTilePoint(oe)._round()});return this._boundsArray=new o.StructArrayLayout4i8,this._boundsArray.emplaceBack(Q[0].x,Q[0].y,0,0),this._boundsArray.emplaceBack(Q[1].x,Q[1].y,o.EXTENT,0),this._boundsArray.emplaceBack(Q[3].x,Q[3].y,0,o.EXTENT),this._boundsArray.emplaceBack(Q[2].x,Q[2].y,o.EXTENT,o.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this},W.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var H=this.map.painter.context,C=H.gl;for(var G in this.boundsBuffer||(this.boundsBuffer=H.createVertexBuffer(this._boundsArray,Y.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new o.Texture(H,this.image,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE)),this.tiles){var Q=this.tiles[G];"loaded"!==Q.state&&(Q.state="loaded",Q.texture=this.texture)}}},W.prototype.loadTile=function(H,C){this.tileID&&this.tileID.equals(H.tileID.canonical)?(this.tiles[String(H.tileID.wrap)]=H,H.buckets={},C(null)):(H.state="errored",C(null))},W.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},W.prototype.hasTransition=function(){return!1},W}(o.Evented),V=function(N){function W(H,C,G,Q){N.call(this,H,C,G,Q),this.roundZoom=!0,this.type="video",this.options=C}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.load=function(){var H=this;this._loaded=!1;var C=this.options;this.urls=[];for(var G=0,Q=C.urls;G<Q.length;G+=1)this.urls.push(this.map._requestManager.transformRequest(Q[G],o.ResourceType.Source).url);o.getVideo(this.urls,function(de,Ae){H._loaded=!0,de?H.fire(new o.ErrorEvent(de)):Ae&&(H.video=Ae,H.video.loop=!0,H.video.addEventListener("playing",function(){H.map.triggerRepaint()}),H.map&&H.video.play(),H._finishLoading())})},W.prototype.pause=function(){this.video&&this.video.pause()},W.prototype.play=function(){this.video&&this.video.play()},W.prototype.seek=function(H){if(this.video){var C=this.video.seekable;H<C.start(0)||H>C.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+C.start(0)+" and "+C.end(0)+"-second mark."))):this.video.currentTime=H}},W.prototype.getVideo=function(){return this.video},W.prototype.onAdd=function(H){this.map||(this.map=H,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},W.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var H=this.map.painter.context,C=H.gl;for(var G in this.boundsBuffer||(this.boundsBuffer=H.createVertexBuffer(this._boundsArray,Y.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE),C.texSubImage2D(C.TEXTURE_2D,0,0,0,C.RGBA,C.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(H,this.video,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE)),this.tiles){var Q=this.tiles[G];"loaded"!==Q.state&&(Q.state="loaded",Q.texture=this.texture)}}},W.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},W.prototype.hasTransition=function(){return this.video&&!this.video.paused},W}(B),q=function(N){function W(H,C,G,Q){N.call(this,H,C,G,Q),C.coordinates?Array.isArray(C.coordinates)&&4===C.coordinates.length&&!C.coordinates.some(function(oe){return!Array.isArray(oe)||2!==oe.length||oe.some(function(de){return"number"!=typeof de})})||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+H,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+H,null,'missing required property "coordinates"'))),C.animate&&"boolean"!=typeof C.animate&&this.fire(new o.ErrorEvent(new o.ValidationError("sources."+H,null,'optional "animate" property must be a boolean value'))),C.canvas?"string"==typeof C.canvas||C.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+H,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+H,null,'missing required property "canvas"'))),this.options=C,this.animate=void 0===C.animate||C.animate}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},W.prototype.getCanvas=function(){return this.canvas},W.prototype.onAdd=function(H){this.map=H,this.load(),this.canvas&&this.animate&&this.play()},W.prototype.onRemove=function(){this.pause()},W.prototype.prepare=function(){var H=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,H=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,H=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var C=this.map.painter.context,G=C.gl;for(var Q in this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,Y.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(H||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(C,this.canvas,G.RGBA,{premultiply:!0}),this.tiles){var oe=this.tiles[Q];"loaded"!==oe.state&&(oe.state="loaded",oe.texture=this.texture)}}},W.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},W.prototype.hasTransition=function(){return this._playing},W.prototype._hasInvalidDimensions=function(){for(var H=0,C=[this.canvas.width,this.canvas.height];H<C.length;H+=1){var G=C[H];if(isNaN(G)||G<=0)return!0}return!1},W}(B),ie={vector:z,raster:U,"raster-dem":R,geojson:j,video:V,image:B,canvas:q};function te(N,W){var H=o.identity([]);return o.translate(H,H,[1,1,0]),o.scale(H,H,[.5*N.width,.5*N.height,1]),o.multiply(H,H,N.calculatePosMatrix(W.toUnwrapped()))}function ee(N,W,H,C,G,Q){var oe=function(xt,Et,Dt){if(xt)for(var It=0,qt=xt;It<qt.length;It+=1){var Ft=Et[qt[It]];if(Ft&&Ft.source===Dt&&"fill-extrusion"===Ft.type)return!0}else for(var on in Et){var Qt=Et[on];if(Qt.source===Dt&&"fill-extrusion"===Qt.type)return!0}return!1}(G&&G.layers,W,N.id),de=Q.maxPitchScaleFactor(),Ae=N.tilesIn(C,de,oe);Ae.sort($);for(var De=[],je=0,Ye=Ae;je<Ye.length;je+=1){var Ke=Ye[je];De.push({wrappedTileID:Ke.tileID.wrapped().key,queryResults:Ke.tile.queryRenderedFeatures(W,H,N._state,Ke.queryGeometry,Ke.cameraQueryGeometry,Ke.scale,G,Q,de,te(N.transform,Ke.tileID))})}var st=function(xt){for(var Et={},Dt={},It=0,qt=xt;It<qt.length;It+=1){var Ft=qt[It],on=Ft.queryResults,Qt=Ft.wrappedTileID,Kt=Dt[Qt]=Dt[Qt]||{};for(var kn in on)for(var En=on[kn],Bn=Kt[kn]=Kt[kn]||{},qn=Et[kn]=Et[kn]||[],er=0,gr=En;er<gr.length;er+=1){var wr=gr[er];Bn[wr.featureIndex]||(Bn[wr.featureIndex]=!0,qn.push(wr))}}return Et}(De);for(var mt in st)st[mt].forEach(function(xt){var Et=xt.feature,Dt=N.getFeatureState(Et.layer["source-layer"],Et.id);Et.source=Et.layer.source,Et.layer["source-layer"]&&(Et.sourceLayer=Et.layer["source-layer"]),Et.state=Dt});return st}function $(N,W){var H=N.tileID,C=W.tileID;return H.overscaledZ-C.overscaledZ||H.canonical.y-C.canonical.y||H.wrap-C.wrap||H.canonical.x-C.canonical.x}var J=function(N,W){this.max=N,this.onRemove=W,this.reset()};J.prototype.reset=function(){for(var N in this.data)for(var W=0,H=this.data[N];W<H.length;W+=1){var C=H[W];C.timeout&&clearTimeout(C.timeout),this.onRemove(C.value)}return this.data={},this.order=[],this},J.prototype.add=function(N,W,H){var C=this,G=N.wrapped().key;void 0===this.data[G]&&(this.data[G]=[]);var Q={value:W,timeout:void 0};if(void 0!==H&&(Q.timeout=setTimeout(function(){C.remove(N,Q)},H)),this.data[G].push(Q),this.order.push(G),this.order.length>this.max){var oe=this._getAndRemoveByKey(this.order[0]);oe&&this.onRemove(oe)}return this},J.prototype.has=function(N){return N.wrapped().key in this.data},J.prototype.getAndRemove=function(N){return this.has(N)?this._getAndRemoveByKey(N.wrapped().key):null},J.prototype._getAndRemoveByKey=function(N){var W=this.data[N].shift();return W.timeout&&clearTimeout(W.timeout),0===this.data[N].length&&delete this.data[N],this.order.splice(this.order.indexOf(N),1),W.value},J.prototype.getByKey=function(N){var W=this.data[N];return W?W[0].value:null},J.prototype.get=function(N){return this.has(N)?this.data[N.wrapped().key][0].value:null},J.prototype.remove=function(N,W){if(!this.has(N))return this;var H=N.wrapped().key,C=void 0===W?0:this.data[H].indexOf(W),G=this.data[H][C];return this.data[H].splice(C,1),G.timeout&&clearTimeout(G.timeout),0===this.data[H].length&&delete this.data[H],this.onRemove(G.value),this.order.splice(this.order.indexOf(H),1),this},J.prototype.setMaxSize=function(N){for(this.max=N;this.order.length>this.max;){var W=this._getAndRemoveByKey(this.order[0]);W&&this.onRemove(W)}return this},J.prototype.filter=function(N){var W=[];for(var H in this.data)for(var C=0,G=this.data[H];C<G.length;C+=1){var Q=G[C];N(Q.value)||W.push(Q)}for(var oe=0,de=W;oe<de.length;oe+=1){var Ae=de[oe];this.remove(Ae.value.tileID,Ae)}};var X=function(N,W,H){this.context=N;var C=N.gl;this.buffer=C.createBuffer(),this.dynamicDraw=!!H,this.context.unbindVAO(),N.bindElementBuffer.set(this.buffer),C.bufferData(C.ELEMENT_ARRAY_BUFFER,W.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||delete W.arrayBuffer};X.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},X.prototype.updateData=function(N){var W=this.context.gl;this.context.unbindVAO(),this.bind(),W.bufferSubData(W.ELEMENT_ARRAY_BUFFER,0,N.arrayBuffer)},X.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ae={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},ce=function(N,W,H,C){this.length=W.length,this.attributes=H,this.itemSize=W.bytesPerElement,this.dynamicDraw=C,this.context=N;var G=N.gl;this.buffer=G.createBuffer(),N.bindVertexBuffer.set(this.buffer),G.bufferData(G.ARRAY_BUFFER,W.arrayBuffer,this.dynamicDraw?G.DYNAMIC_DRAW:G.STATIC_DRAW),this.dynamicDraw||delete W.arrayBuffer};ce.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},ce.prototype.updateData=function(N){var W=this.context.gl;this.bind(),W.bufferSubData(W.ARRAY_BUFFER,0,N.arrayBuffer)},ce.prototype.enableAttributes=function(N,W){for(var H=0;H<this.attributes.length;H++){var G=W.attributes[this.attributes[H].name];void 0!==G&&N.enableVertexAttribArray(G)}},ce.prototype.setVertexAttribPointers=function(N,W,H){for(var C=0;C<this.attributes.length;C++){var G=this.attributes[C],Q=W.attributes[G.name];void 0!==Q&&N.vertexAttribPointer(Q,G.components,N[ae[G.type]],!1,this.itemSize,G.offset+this.itemSize*(H||0))}},ce.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var le=function(N){this.gl=N.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};le.prototype.get=function(){return this.current},le.prototype.set=function(N){},le.prototype.getDefault=function(){return this.default},le.prototype.setDefault=function(){this.set(this.default)};var pe=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getDefault=function(){return o.Color.transparent},W.prototype.set=function(H){var C=this.current;(H.r!==C.r||H.g!==C.g||H.b!==C.b||H.a!==C.a||this.dirty)&&(this.gl.clearColor(H.r,H.g,H.b,H.a),this.current=H,this.dirty=!1)},W}(le),we=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getDefault=function(){return 1},W.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.clearDepth(H),this.current=H,this.dirty=!1)},W}(le),Te=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getDefault=function(){return 0},W.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.clearStencil(H),this.current=H,this.dirty=!1)},W}(le),ye=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getDefault=function(){return[!0,!0,!0,!0]},W.prototype.set=function(H){var C=this.current;(H[0]!==C[0]||H[1]!==C[1]||H[2]!==C[2]||H[3]!==C[3]||this.dirty)&&(this.gl.colorMask(H[0],H[1],H[2],H[3]),this.current=H,this.dirty=!1)},W}(le),ve=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getDefault=function(){return!0},W.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.depthMask(H),this.current=H,this.dirty=!1)},W}(le),xe=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getDefault=function(){return 255},W.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.stencilMask(H),this.current=H,this.dirty=!1)},W}(le),Ce=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},W.prototype.set=function(H){var C=this.current;(H.func!==C.func||H.ref!==C.ref||H.mask!==C.mask||this.dirty)&&(this.gl.stencilFunc(H.func,H.ref,H.mask),this.current=H,this.dirty=!1)},W}(le),Oe=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getDefault=function(){var H=this.gl;return[H.KEEP,H.KEEP,H.KEEP]},W.prototype.set=function(H){var C=this.current;(H[0]!==C[0]||H[1]!==C[1]||H[2]!==C[2]||this.dirty)&&(this.gl.stencilOp(H[0],H[1],H[2]),this.current=H,this.dirty=!1)},W}(le),be=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(H){if(H!==this.current||this.dirty){var C=this.gl;H?C.enable(C.STENCIL_TEST):C.disable(C.STENCIL_TEST),this.current=H,this.dirty=!1}},W}(le),ue=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getDefault=function(){return[0,1]},W.prototype.set=function(H){var C=this.current;(H[0]!==C[0]||H[1]!==C[1]||this.dirty)&&(this.gl.depthRange(H[0],H[1]),this.current=H,this.dirty=!1)},W}(le),se=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(H){if(H!==this.current||this.dirty){var C=this.gl;H?C.enable(C.DEPTH_TEST):C.disable(C.DEPTH_TEST),this.current=H,this.dirty=!1}},W}(le),ge=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getDefault=function(){return this.gl.LESS},W.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.depthFunc(H),this.current=H,this.dirty=!1)},W}(le),Ie=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(H){if(H!==this.current||this.dirty){var C=this.gl;H?C.enable(C.BLEND):C.disable(C.BLEND),this.current=H,this.dirty=!1}},W}(le),ke=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getDefault=function(){var H=this.gl;return[H.ONE,H.ZERO]},W.prototype.set=function(H){var C=this.current;(H[0]!==C[0]||H[1]!==C[1]||this.dirty)&&(this.gl.blendFunc(H[0],H[1]),this.current=H,this.dirty=!1)},W}(le),Se=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getDefault=function(){return o.Color.transparent},W.prototype.set=function(H){var C=this.current;(H.r!==C.r||H.g!==C.g||H.b!==C.b||H.a!==C.a||this.dirty)&&(this.gl.blendColor(H.r,H.g,H.b,H.a),this.current=H,this.dirty=!1)},W}(le),Pe=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getDefault=function(){return this.gl.FUNC_ADD},W.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.blendEquation(H),this.current=H,this.dirty=!1)},W}(le),Fe=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(H){if(H!==this.current||this.dirty){var C=this.gl;H?C.enable(C.CULL_FACE):C.disable(C.CULL_FACE),this.current=H,this.dirty=!1}},W}(le),Be=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getDefault=function(){return this.gl.BACK},W.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.cullFace(H),this.current=H,this.dirty=!1)},W}(le),me=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getDefault=function(){return this.gl.CCW},W.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.frontFace(H),this.current=H,this.dirty=!1)},W}(le),Me=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.useProgram(H),this.current=H,this.dirty=!1)},W}(le),Le=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getDefault=function(){return this.gl.TEXTURE0},W.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.activeTexture(H),this.current=H,this.dirty=!1)},W}(le),Ne=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getDefault=function(){var H=this.gl;return[0,0,H.drawingBufferWidth,H.drawingBufferHeight]},W.prototype.set=function(H){var C=this.current;(H[0]!==C[0]||H[1]!==C[1]||H[2]!==C[2]||H[3]!==C[3]||this.dirty)&&(this.gl.viewport(H[0],H[1],H[2],H[3]),this.current=H,this.dirty=!1)},W}(le),Re=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(H){if(H!==this.current||this.dirty){var C=this.gl;C.bindFramebuffer(C.FRAMEBUFFER,H),this.current=H,this.dirty=!1}},W}(le),He=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(H){if(H!==this.current||this.dirty){var C=this.gl;C.bindRenderbuffer(C.RENDERBUFFER,H),this.current=H,this.dirty=!1}},W}(le),Ze=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(H){if(H!==this.current||this.dirty){var C=this.gl;C.bindTexture(C.TEXTURE_2D,H),this.current=H,this.dirty=!1}},W}(le),nt=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(H){if(H!==this.current||this.dirty){var C=this.gl;C.bindBuffer(C.ARRAY_BUFFER,H),this.current=H,this.dirty=!1}},W}(le),ft=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(H){var C=this.gl;C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,H),this.current=H,this.dirty=!1},W}(le),ht=function(N){function W(H){N.call(this,H),this.vao=H.extVertexArrayObject}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(H){this.vao&&(H!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(H),this.current=H,this.dirty=!1)},W}(le),Tt=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getDefault=function(){return 4},W.prototype.set=function(H){if(H!==this.current||this.dirty){var C=this.gl;C.pixelStorei(C.UNPACK_ALIGNMENT,H),this.current=H,this.dirty=!1}},W}(le),At=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(H){if(H!==this.current||this.dirty){var C=this.gl;C.pixelStorei(C.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H),this.current=H,this.dirty=!1}},W}(le),_t=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(H){if(H!==this.current||this.dirty){var C=this.gl;C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,H),this.current=H,this.dirty=!1}},W}(le),ot=function(N){function W(H,C){N.call(this,H),this.context=H,this.parent=C}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getDefault=function(){return null},W}(le),it=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.setDirty=function(){this.dirty=!0},W.prototype.set=function(H){if(H!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var C=this.gl;C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,H,0),this.current=H,this.dirty=!1}},W}(ot),Pt=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.set=function(H){if(H!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var C=this.gl;C.framebufferRenderbuffer(C.FRAMEBUFFER,C.DEPTH_ATTACHMENT,C.RENDERBUFFER,H),this.current=H,this.dirty=!1}},W}(ot),jt=function(N,W,H,C){this.context=N,this.width=W,this.height=H;var Q=this.framebuffer=N.gl.createFramebuffer();this.colorAttachment=new it(N,Q),C&&(this.depthAttachment=new Pt(N,Q))};jt.prototype.destroy=function(){var N=this.context.gl,W=this.colorAttachment.get();if(W&&N.deleteTexture(W),this.depthAttachment){var H=this.depthAttachment.get();H&&N.deleteRenderbuffer(H)}N.deleteFramebuffer(this.framebuffer)};var Ut=function(N,W,H){this.func=N,this.mask=W,this.range=H};Ut.ReadOnly=!1,Ut.ReadWrite=!0,Ut.disabled=new Ut(519,Ut.ReadOnly,[0,1]);var Je=function(N,W,H,C,G,Q){this.test=N,this.ref=W,this.mask=H,this.fail=C,this.depthFail=G,this.pass=Q};Je.disabled=new Je({func:519,mask:0},0,0,7680,7680,7680);var et=function(N,W,H){this.blendFunction=N,this.blendColor=W,this.mask=H};et.disabled=new et(et.Replace=[1,0],o.Color.transparent,[!1,!1,!1,!1]),et.unblended=new et(et.Replace,o.Color.transparent,[!0,!0,!0,!0]),et.alphaBlended=new et([1,771],o.Color.transparent,[!0,!0,!0,!0]);var qe=function(N,W,H){this.enable=N,this.mode=W,this.frontFace=H};qe.disabled=new qe(!1,1029,2305),qe.backCCW=new qe(!0,1029,2305);var $e=function(N){this.gl=N,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new pe(this),this.clearDepth=new we(this),this.clearStencil=new Te(this),this.colorMask=new ye(this),this.depthMask=new ve(this),this.stencilMask=new xe(this),this.stencilFunc=new Ce(this),this.stencilOp=new Oe(this),this.stencilTest=new be(this),this.depthRange=new ue(this),this.depthTest=new se(this),this.depthFunc=new ge(this),this.blend=new Ie(this),this.blendFunc=new ke(this),this.blendColor=new Se(this),this.blendEquation=new Pe(this),this.cullFace=new Fe(this),this.cullFaceSide=new Be(this),this.frontFace=new me(this),this.program=new Me(this),this.activeTexture=new Le(this),this.viewport=new Ne(this),this.bindFramebuffer=new Re(this),this.bindRenderbuffer=new He(this),this.bindTexture=new Ze(this),this.bindVertexBuffer=new nt(this),this.bindElementBuffer=new ft(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ht(this),this.pixelStoreUnpack=new Tt(this),this.pixelStoreUnpackPremultiplyAlpha=new At(this),this.pixelStoreUnpackFlipY=new _t(this),this.extTextureFilterAnisotropic=N.getExtension("EXT_texture_filter_anisotropic")||N.getExtension("MOZ_EXT_texture_filter_anisotropic")||N.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=N.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=N.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(N.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=N.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=N.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=N.getParameter(N.MAX_TEXTURE_SIZE)};$e.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},$e.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},$e.prototype.createIndexBuffer=function(N,W){return new X(this,N,W)},$e.prototype.createVertexBuffer=function(N,W,H){return new ce(this,N,W,H)},$e.prototype.createRenderbuffer=function(N,W,H){var C=this.gl,G=C.createRenderbuffer();return this.bindRenderbuffer.set(G),C.renderbufferStorage(C.RENDERBUFFER,N,W,H),this.bindRenderbuffer.set(null),G},$e.prototype.createFramebuffer=function(N,W,H){return new jt(this,N,W,H)},$e.prototype.clear=function(N){var W=N.color,H=N.depth,C=this.gl,G=0;W&&(G|=C.COLOR_BUFFER_BIT,this.clearColor.set(W),this.colorMask.set([!0,!0,!0,!0])),void 0!==H&&(G|=C.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(H),this.depthMask.set(!0)),C.clear(G)},$e.prototype.setCullFace=function(N){!1===N.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(N.mode),this.frontFace.set(N.frontFace))},$e.prototype.setDepthMode=function(N){N.func!==this.gl.ALWAYS||N.mask?(this.depthTest.set(!0),this.depthFunc.set(N.func),this.depthMask.set(N.mask),this.depthRange.set(N.range)):this.depthTest.set(!1)},$e.prototype.setStencilMode=function(N){N.test.func!==this.gl.ALWAYS||N.mask?(this.stencilTest.set(!0),this.stencilMask.set(N.mask),this.stencilOp.set([N.fail,N.depthFail,N.pass]),this.stencilFunc.set({func:N.test.func,ref:N.ref,mask:N.test.mask})):this.stencilTest.set(!1)},$e.prototype.setColorMode=function(N){o.deepEqual(N.blendFunction,et.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(N.blendFunction),this.blendColor.set(N.blendColor)),this.colorMask.set(N.mask)},$e.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var pt=function(N){function W(H,C,G){var Q=this;N.call(this),this.id=H,this.dispatcher=G,this.on("data",function(oe){"source"===oe.dataType&&"metadata"===oe.sourceDataType&&(Q._sourceLoaded=!0),Q._sourceLoaded&&!Q._paused&&"source"===oe.dataType&&"content"===oe.sourceDataType&&(Q.reload(),Q.transform&&Q.update(Q.transform))}),this.on("error",function(){Q._sourceErrored=!0}),this._source=function(oe,de,Ae,De){var je=new ie[de.type](oe,de,Ae,De);if(je.id!==oe)throw new Error("Expected Source id to be "+oe+" instead of "+je.id);return o.bindAll(["load","abort","unload","serialize","prepare"],je),je}(H,C,G,this),this._tiles={},this._cache=new J(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new o.SourceFeatureState}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.onAdd=function(H){this.map=H,this._maxTileCacheSize=H?H._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(H)},W.prototype.onRemove=function(H){this._source&&this._source.onRemove&&this._source.onRemove(H)},W.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var H in this._tiles){var C=this._tiles[H];if("loaded"!==C.state&&"errored"!==C.state)return!1}return!0},W.prototype.getSource=function(){return this._source},W.prototype.pause=function(){this._paused=!0},W.prototype.resume=function(){if(this._paused){var H=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,H&&this.reload(),this.transform&&this.update(this.transform)}},W.prototype._loadTile=function(H,C){return this._source.loadTile(H,C)},W.prototype._unloadTile=function(H){if(this._source.unloadTile)return this._source.unloadTile(H,function(){})},W.prototype._abortTile=function(H){if(this._source.abortTile)return this._source.abortTile(H,function(){})},W.prototype.serialize=function(){return this._source.serialize()},W.prototype.prepare=function(H){for(var C in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var G=this._tiles[C];G.upload(H),G.prepare(this.map.style.imageManager)}},W.prototype.getIds=function(){return o.values(this._tiles).map(function(H){return H.tileID}).sort(ct).map(function(H){return H.key})},W.prototype.getRenderableIds=function(H){var C=this,G=[];for(var Q in this._tiles)this._isIdRenderable(Q,H)&&G.push(this._tiles[Q]);return H?G.sort(function(oe,de){var Ae=oe.tileID,De=de.tileID,je=new o.Point(Ae.canonical.x,Ae.canonical.y)._rotate(C.transform.angle),Ye=new o.Point(De.canonical.x,De.canonical.y)._rotate(C.transform.angle);return Ae.overscaledZ-De.overscaledZ||Ye.y-je.y||Ye.x-je.x}).map(function(oe){return oe.tileID.key}):G.map(function(oe){return oe.tileID}).sort(ct).map(function(oe){return oe.key})},W.prototype.hasRenderableParent=function(H){var C=this.findLoadedParent(H,0);return!!C&&this._isIdRenderable(C.tileID.key)},W.prototype._isIdRenderable=function(H,C){return this._tiles[H]&&this._tiles[H].hasData()&&!this._coveredTiles[H]&&(C||!this._tiles[H].holdingForFade())},W.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var H in this._cache.reset(),this._tiles)"errored"!==this._tiles[H].state&&this._reloadTile(H,"reloading")},W.prototype._reloadTile=function(H,C){var G=this._tiles[H];G&&("loading"!==G.state&&(G.state=C),this._loadTile(G,this._tileLoaded.bind(this,G,H,C)))},W.prototype._tileLoaded=function(H,C,G,Q){if(Q)return H.state="errored",void(404!==Q.status?this._source.fire(new o.ErrorEvent(Q,{tile:H})):this.update(this.transform));H.timeAdded=o.browser.now(),"expired"===G&&(H.refreshedUponExpiration=!0),this._setTileReloadTimer(C,H),"raster-dem"===this.getSource().type&&H.dem&&this._backfillDEM(H),this._state.initializeTileState(H,this.map?this.map.painter:null),this._source.fire(new o.Event("data",{dataType:"source",tile:H,coord:H.tileID}))},W.prototype._backfillDEM=function(H){for(var C=this.getRenderableIds(),G=0;G<C.length;G++){var Q=C[G];if(H.neighboringTiles&&H.neighboringTiles[Q]){var oe=this.getTileByID(Q);de(H,oe),de(oe,H)}}function de(Ae,De){Ae.needsHillshadePrepare=!0;var je=De.tileID.canonical.x-Ae.tileID.canonical.x,Ye=De.tileID.canonical.y-Ae.tileID.canonical.y,Ke=Math.pow(2,Ae.tileID.canonical.z),st=De.tileID.key;0===je&&0===Ye||Math.abs(Ye)>1||(Math.abs(je)>1&&(1===Math.abs(je+Ke)?je+=Ke:1===Math.abs(je-Ke)&&(je-=Ke)),De.dem&&Ae.dem&&(Ae.dem.backfillBorder(De.dem,je,Ye),Ae.neighboringTiles&&Ae.neighboringTiles[st]&&(Ae.neighboringTiles[st].backfilled=!0)))}},W.prototype.getTile=function(H){return this.getTileByID(H.key)},W.prototype.getTileByID=function(H){return this._tiles[H]},W.prototype._retainLoadedChildren=function(H,C,G,Q){for(var oe in this._tiles){var de=this._tiles[oe];if(!(Q[oe]||!de.hasData()||de.tileID.overscaledZ<=C||de.tileID.overscaledZ>G)){for(var Ae=de.tileID;de&&de.tileID.overscaledZ>C+1;){var De=de.tileID.scaledTo(de.tileID.overscaledZ-1);(de=this._tiles[De.key])&&de.hasData()&&(Ae=De)}for(var je=Ae;je.overscaledZ>C;)if(H[(je=je.scaledTo(je.overscaledZ-1)).key]){Q[Ae.key]=Ae;break}}}},W.prototype.findLoadedParent=function(H,C){if(H.key in this._loadedParentTiles){var G=this._loadedParentTiles[H.key];return G&&G.tileID.overscaledZ>=C?G:null}for(var Q=H.overscaledZ-1;Q>=C;Q--){var oe=H.scaledTo(Q),de=this._getLoadedTile(oe);if(de)return de}},W.prototype._getLoadedTile=function(H){var C=this._tiles[H.key];return C&&C.hasData()?C:this._cache.getByKey(H.wrapped().key)},W.prototype.updateCacheSize=function(H){var C=(Math.ceil(H.width/this._source.tileSize)+1)*(Math.ceil(H.height/this._source.tileSize)+1),G=Math.floor(5*C),Q="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,G):G;this._cache.setMaxSize(Q)},W.prototype.handleWrapJump=function(H){var G=Math.round((H-(void 0===this._prevLng?H:this._prevLng))/360);if(this._prevLng=H,G){var Q={};for(var oe in this._tiles){var de=this._tiles[oe];de.tileID=de.tileID.unwrapTo(de.tileID.wrap+G),Q[de.tileID.key]=de}for(var Ae in this._tiles=Q,this._timers)clearTimeout(this._timers[Ae]),delete this._timers[Ae];for(var De in this._tiles)this._setTileReloadTimer(De,this._tiles[De])}},W.prototype.update=function(H){var C=this;if(this.transform=H,this._sourceLoaded&&!this._paused){var G;this.updateCacheSize(H),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?G=H.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Kt){return new o.OverscaledTileID(Kt.canonical.z,Kt.wrap,Kt.canonical.z,Kt.canonical.x,Kt.canonical.y)}):(G=H.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(G=G.filter(function(Kt){return C._source.hasTile(Kt)}))):G=[];var Q=H.coveringZoomLevel(this._source),oe=Math.max(Q-W.maxOverzooming,this._source.minzoom),de=Math.max(Q+W.maxUnderzooming,this._source.minzoom),Ae=this._updateRetainedTiles(G,Q);if(Ve(this._source.type)){for(var De={},je={},Ye=0,Ke=Object.keys(Ae);Ye<Ke.length;Ye+=1){var st=Ke[Ye],mt=Ae[st],xt=this._tiles[st];if(xt&&!(xt.fadeEndTime&&xt.fadeEndTime<=o.browser.now())){var Et=this.findLoadedParent(mt,oe);Et&&(this._addTile(Et.tileID),De[Et.tileID.key]=Et.tileID),je[st]=mt}}for(var Dt in this._retainLoadedChildren(je,Q,de,Ae),De)Ae[Dt]||(this._coveredTiles[Dt]=!0,Ae[Dt]=De[Dt])}for(var It in Ae)this._tiles[It].clearFadeHold();for(var qt=0,Ft=o.keysDifference(this._tiles,Ae);qt<Ft.length;qt+=1){var on=Ft[qt],Qt=this._tiles[on];Qt.hasSymbolBuckets&&!Qt.holdingForFade()?Qt.setHoldDuration(this.map._fadeDuration):Qt.hasSymbolBuckets&&!Qt.symbolFadeFinished()||this._removeTile(on)}this._updateLoadedParentTileCache()}},W.prototype.releaseSymbolFadeTiles=function(){for(var H in this._tiles)this._tiles[H].holdingForFade()&&this._removeTile(H)},W.prototype._updateRetainedTiles=function(H,C){for(var G={},Q={},oe=Math.max(C-W.maxOverzooming,this._source.minzoom),de=Math.max(C+W.maxUnderzooming,this._source.minzoom),Ae={},De=0,je=H;De<je.length;De+=1){var Ye=je[De],Ke=this._addTile(Ye);G[Ye.key]=Ye,Ke.hasData()||C<this._source.maxzoom&&(Ae[Ye.key]=Ye)}this._retainLoadedChildren(Ae,C,de,G);for(var st=0,mt=H;st<mt.length;st+=1){var xt=mt[st],Et=this._tiles[xt.key];if(!Et.hasData()){if(C+1>this._source.maxzoom){var Dt=xt.children(this._source.maxzoom)[0],It=this.getTile(Dt);if(It&&It.hasData()){G[Dt.key]=Dt;continue}}else{var qt=xt.children(this._source.maxzoom);if(G[qt[0].key]&&G[qt[1].key]&&G[qt[2].key]&&G[qt[3].key])continue}for(var Ft=Et.wasRequested(),on=xt.overscaledZ-1;on>=oe;--on){var Qt=xt.scaledTo(on);if(Q[Qt.key]||(Q[Qt.key]=!0,!(Et=this.getTile(Qt))&&Ft&&(Et=this._addTile(Qt)),Et&&(G[Qt.key]=Qt,Ft=Et.wasRequested(),Et.hasData())))break}}}return G},W.prototype._updateLoadedParentTileCache=function(){for(var H in this._loadedParentTiles={},this._tiles){for(var C=[],G=void 0,Q=this._tiles[H].tileID;Q.overscaledZ>0;){if(Q.key in this._loadedParentTiles){G=this._loadedParentTiles[Q.key];break}C.push(Q.key);var oe=Q.scaledTo(Q.overscaledZ-1);if(G=this._getLoadedTile(oe))break;Q=oe}for(var de=0,Ae=C;de<Ae.length;de+=1)this._loadedParentTiles[Ae[de]]=G}},W.prototype._addTile=function(H){var C=this._tiles[H.key];if(C)return C;(C=this._cache.getAndRemove(H))&&(this._setTileReloadTimer(H.key,C),C.tileID=H,this._state.initializeTileState(C,this.map?this.map.painter:null),this._cacheTimers[H.key]&&(clearTimeout(this._cacheTimers[H.key]),delete this._cacheTimers[H.key],this._setTileReloadTimer(H.key,C)));var G=!!C;return G||(C=new o.Tile(H,this._source.tileSize*H.overscaleFactor()),this._loadTile(C,this._tileLoaded.bind(this,C,H.key,C.state))),C?(C.uses++,this._tiles[H.key]=C,G||this._source.fire(new o.Event("dataloading",{tile:C,coord:C.tileID,dataType:"source"})),C):null},W.prototype._setTileReloadTimer=function(H,C){var G=this;H in this._timers&&(clearTimeout(this._timers[H]),delete this._timers[H]);var Q=C.getExpiryTimeout();Q&&(this._timers[H]=setTimeout(function(){G._reloadTile(H,"expired"),delete G._timers[H]},Q))},W.prototype._removeTile=function(H){var C=this._tiles[H];C&&(C.uses--,delete this._tiles[H],this._timers[H]&&(clearTimeout(this._timers[H]),delete this._timers[H]),C.uses>0||(C.hasData()&&"reloading"!==C.state?this._cache.add(C.tileID,C,C.getExpiryTimeout()):(C.aborted=!0,this._abortTile(C),this._unloadTile(C))))},W.prototype.clearTiles=function(){for(var H in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(H);this._cache.reset()},W.prototype.tilesIn=function(H,C,G){var Q=this,oe=[],de=this.transform;if(!de)return oe;for(var Ae=G?de.getCameraQueryGeometry(H):H,De=H.map(function(on){return de.pointCoordinate(on)}),je=Ae.map(function(on){return de.pointCoordinate(on)}),Ye=this.getIds(),Ke=1/0,st=1/0,mt=-1/0,xt=-1/0,Et=0,Dt=je;Et<Dt.length;Et+=1){var It=Dt[Et];Ke=Math.min(Ke,It.x),st=Math.min(st,It.y),mt=Math.max(mt,It.x),xt=Math.max(xt,It.y)}for(var qt=function(on){var Qt=Q._tiles[Ye[on]];if(!Qt.holdingForFade()){var Kt=Qt.tileID,kn=Math.pow(2,de.zoom-Qt.tileID.overscaledZ),En=C*Qt.queryPadding*o.EXTENT/Qt.tileSize/kn,Bn=[Kt.getTilePoint(new o.MercatorCoordinate(Ke,st)),Kt.getTilePoint(new o.MercatorCoordinate(mt,xt))];if(Bn[0].x-En<o.EXTENT&&Bn[0].y-En<o.EXTENT&&Bn[1].x+En>=0&&Bn[1].y+En>=0){var qn=De.map(function(gr){return Kt.getTilePoint(gr)}),er=je.map(function(gr){return Kt.getTilePoint(gr)});oe.push({tile:Qt,tileID:Kt,queryGeometry:qn,cameraQueryGeometry:er,scale:kn})}}},Ft=0;Ft<Ye.length;Ft++)qt(Ft);return oe},W.prototype.getVisibleCoordinates=function(H){for(var C=this,G=this.getRenderableIds(H).map(function(Ae){return C._tiles[Ae].tileID}),Q=0,oe=G;Q<oe.length;Q+=1){var de=oe[Q];de.posMatrix=this.transform.calculatePosMatrix(de.toUnwrapped())}return G},W.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ve(this._source.type))for(var H in this._tiles){var C=this._tiles[H];if(void 0!==C.fadeEndTime&&C.fadeEndTime>=o.browser.now())return!0}return!1},W.prototype.setFeatureState=function(H,C,G){this._state.updateState(H=H||"_geojsonTileLayer",C,G)},W.prototype.removeFeatureState=function(H,C,G){this._state.removeFeatureState(H=H||"_geojsonTileLayer",C,G)},W.prototype.getFeatureState=function(H,C){return this._state.getState(H=H||"_geojsonTileLayer",C)},W.prototype.setDependencies=function(H,C,G){var Q=this._tiles[H];Q&&Q.setDependencies(C,G)},W.prototype.reloadTilesForDependencies=function(H,C){for(var G in this._tiles)this._tiles[G].hasDependency(H,C)&&this._reloadTile(G,"reloading");this._cache.filter(function(Q){return!Q.hasDependency(H,C)})},W}(o.Evented);function ct(N,W){var H=Math.abs(2*N.wrap)-+(N.wrap<0),C=Math.abs(2*W.wrap)-+(W.wrap<0);return N.overscaledZ-W.overscaledZ||C-H||W.canonical.y-N.canonical.y||W.canonical.x-N.canonical.x}function Ve(N){return"raster"===N||"image"===N||"video"===N}function Ge(){return new o.window.Worker(dt.workerUrl)}pt.maxOverzooming=10,pt.maxUnderzooming=3;var ut="mapboxgl_preloaded_worker_pool",Qe=function(){this.active={}};Qe.prototype.acquire=function(N){if(!this.workers)for(this.workers=[];this.workers.length<Qe.workerCount;)this.workers.push(new Ge);return this.active[N]=!0,this.workers.slice()},Qe.prototype.release=function(N){delete this.active[N],0===this.numActive()&&(this.workers.forEach(function(W){W.terminate()}),this.workers=null)},Qe.prototype.isPreloaded=function(){return!!this.active[ut]},Qe.prototype.numActive=function(){return Object.keys(this.active).length};var yt,wt=Math.floor(o.browser.hardwareConcurrency/2);function kt(){return yt||(yt=new Qe),yt}function vt(N,W){var H={};for(var C in N)"ref"!==C&&(H[C]=N[C]);return o.refProperties.forEach(function(G){G in W&&(H[G]=W[G])}),H}function Lt(N){N=N.slice();for(var W=Object.create(null),H=0;H<N.length;H++)W[N[H].id]=N[H];for(var C=0;C<N.length;C++)"ref"in N[C]&&(N[C]=vt(N[C],W[N[C].ref]));return N}Qe.workerCount=Math.max(Math.min(wt,6),1);var St={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ot(N,W,H){H.push({command:St.addSource,args:[N,W[N]]})}function Nt(N,W,H){W.push({command:St.removeSource,args:[N]}),H[N]=!0}function Bt(N,W,H,C){Nt(N,H,C),Ot(N,W,H)}function Vt(N,W,H){var C;for(C in N[H])if(N[H].hasOwnProperty(C)&&"data"!==C&&!o.deepEqual(N[H][C],W[H][C]))return!1;for(C in W[H])if(W[H].hasOwnProperty(C)&&"data"!==C&&!o.deepEqual(N[H][C],W[H][C]))return!1;return!0}function nn(N,W,H,C,G,Q){var oe;for(oe in W=W||{},N=N||{})N.hasOwnProperty(oe)&&(o.deepEqual(N[oe],W[oe])||H.push({command:Q,args:[C,oe,W[oe],G]}));for(oe in W)W.hasOwnProperty(oe)&&!N.hasOwnProperty(oe)&&(o.deepEqual(N[oe],W[oe])||H.push({command:Q,args:[C,oe,W[oe],G]}))}function gn(N){return N.id}function Jt(N,W){return N[W.id]=W,N}var Xt=function(N,W){this.reset(N,W)};Xt.prototype.reset=function(N,W){this.points=N||[],this._distances=[0];for(var H=1;H<this.points.length;H++)this._distances[H]=this._distances[H-1]+this.points[H].dist(this.points[H-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(W||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Xt.prototype.lerp=function(N){if(1===this.points.length)return this.points[0];N=o.clamp(N,0,1);for(var W=1,H=this._distances[W],C=N*this.paddedLength+this.padding;H<C&&W<this._distances.length;)H=this._distances[++W];var G=W-1,Q=this._distances[G],oe=H-Q,de=oe>0?(C-Q)/oe:0;return this.points[G].mult(1-de).add(this.points[W].mult(de))};var Gn=function(N,W,H){var C=this.boxCells=[],G=this.circleCells=[];this.xCellCount=Math.ceil(N/H),this.yCellCount=Math.ceil(W/H);for(var Q=0;Q<this.xCellCount*this.yCellCount;Q++)C.push([]),G.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=N,this.height=W,this.xScale=this.xCellCount/N,this.yScale=this.yCellCount/W,this.boxUid=0,this.circleUid=0};function Dn(N,W,H,C,G){var Q=o.create();return W?(o.scale(Q,Q,[1/G,1/G,1]),H||o.rotateZ(Q,Q,C.angle)):o.multiply(Q,C.labelPlaneMatrix,N),Q}function An(N,W,H,C,G){if(W){var Q=o.clone(N);return o.scale(Q,Q,[G,G,1]),H||o.rotateZ(Q,Q,-C.angle),Q}return C.glCoordMatrix}function cn(N,W){var H=[N.x,N.y,0,1];hr(H,H,W);var C=H[3];return{point:new o.Point(H[0]/C,H[1]/C),signedDistanceFromCamera:C}}function bn(N,W){return.5+N/W*.5}function hn(N,W){var H=N[0]/N[3],C=N[1]/N[3];return H>=-W[0]&&H<=W[0]&&C>=-W[1]&&C<=W[1]}function wn(N,W,H,C,G,Q,oe,de){var Ae=C?N.textSizeData:N.iconSizeData,De=o.evaluateSizeForZoom(Ae,H.transform.zoom),je=[256/H.width*2+1,256/H.height*2+1],Ye=C?N.text.dynamicLayoutVertexArray:N.icon.dynamicLayoutVertexArray;Ye.clear();for(var Ke=N.lineVertexArray,st=C?N.text.placedSymbolArray:N.icon.placedSymbolArray,mt=H.transform.width/H.transform.height,xt=!1,Et=0;Et<st.length;Et++){var Dt=st.get(Et);if(Dt.hidden||Dt.writingMode===o.WritingMode.vertical&&!xt)Zn(Dt.numGlyphs,Ye);else{xt=!1;var It=[Dt.anchorX,Dt.anchorY,0,1];if(o.transformMat4(It,It,W),hn(It,je)){var Ft=bn(H.transform.cameraToCenterDistance,It[3]),on=o.evaluateSizeForFeature(Ae,De,Dt),Qt=oe?on/Ft:on*Ft,Kt=new o.Point(Dt.anchorX,Dt.anchorY),kn=cn(Kt,G).point,En={},Bn=Nn(Dt,Qt,!1,de,W,G,Q,N.glyphOffsetArray,Ke,Ye,kn,Kt,En,mt);xt=Bn.useVertical,(Bn.notEnoughRoom||xt||Bn.needsFlipping&&Nn(Dt,Qt,!0,de,W,G,Q,N.glyphOffsetArray,Ke,Ye,kn,Kt,En,mt).notEnoughRoom)&&Zn(Dt.numGlyphs,Ye)}else Zn(Dt.numGlyphs,Ye)}}C?N.text.dynamicLayoutVertexBuffer.updateData(Ye):N.icon.dynamicLayoutVertexBuffer.updateData(Ye)}function Ln(N,W,H,C,G,Q,oe,de,Ae,De,je){var Ye=de.glyphStartIndex+de.numGlyphs,Ke=de.lineStartIndex,st=de.lineStartIndex+de.lineLength,mt=W.getoffsetX(de.glyphStartIndex),xt=W.getoffsetX(Ye-1),Et=Fn(N*mt,H,C,G,Q,oe,de.segment,Ke,st,Ae,De,je);if(!Et)return null;var Dt=Fn(N*xt,H,C,G,Q,oe,de.segment,Ke,st,Ae,De,je);return Dt?{first:Et,last:Dt}:null}function Pn(N,W,H,C){return N===o.WritingMode.horizontal&&Math.abs(H.y-W.y)>Math.abs(H.x-W.x)*C?{useVertical:!0}:(N===o.WritingMode.vertical?W.y<H.y:W.x>H.x)?{needsFlipping:!0}:null}function Nn(N,W,H,C,G,Q,oe,de,Ae,De,je,Ye,Ke,st){var mt,xt=W/24,Et=N.lineOffsetX*xt,Dt=N.lineOffsetY*xt;if(N.numGlyphs>1){var It=N.glyphStartIndex+N.numGlyphs,qt=N.lineStartIndex,Ft=N.lineStartIndex+N.lineLength,on=Ln(xt,de,Et,Dt,H,je,Ye,N,Ae,Q,Ke);if(!on)return{notEnoughRoom:!0};var Qt=cn(on.first.point,oe).point,Kt=cn(on.last.point,oe).point;if(C&&!H){var kn=Pn(N.writingMode,Qt,Kt,st);if(kn)return kn}mt=[on.first];for(var En=N.glyphStartIndex+1;En<It-1;En++)mt.push(Fn(xt*de.getoffsetX(En),Et,Dt,H,je,Ye,N.segment,qt,Ft,Ae,Q,Ke));mt.push(on.last)}else{if(C&&!H){var Bn=cn(Ye,G).point,qn=N.lineStartIndex+N.segment+1,er=new o.Point(Ae.getx(qn),Ae.gety(qn)),gr=cn(er,G),wr=gr.signedDistanceFromCamera>0?gr.point:jn(Ye,er,Bn,1,G),sr=Pn(N.writingMode,Bn,wr,st);if(sr)return sr}var _r=Fn(xt*de.getoffsetX(N.glyphStartIndex),Et,Dt,H,je,Ye,N.segment,N.lineStartIndex,N.lineStartIndex+N.lineLength,Ae,Q,Ke);if(!_r)return{notEnoughRoom:!0};mt=[_r]}for(var Dr=0,Wr=mt;Dr<Wr.length;Dr+=1){var mr=Wr[Dr];o.addDynamicAttributes(De,mr.point,mr.angle)}return{}}function jn(N,W,H,C,G){var Q=cn(N.add(N.sub(W)._unit()),G).point,oe=H.sub(Q);return H.add(oe._mult(C/oe.mag()))}function Fn(N,W,H,C,G,Q,oe,de,Ae,De,je,Ye){var Ke=C?N-W:N+W,st=Ke>0?1:-1,mt=0;C&&(st*=-1,mt=Math.PI),st<0&&(mt+=Math.PI);for(var xt=st>0?de+oe:de+oe+1,Et=G,Dt=G,It=0,qt=0,Ft=Math.abs(Ke),on=[];It+qt<=Ft;){if((xt+=st)<de||xt>=Ae)return null;if(Dt=Et,on.push(Et),void 0===(Et=Ye[xt])){var Qt=new o.Point(De.getx(xt),De.gety(xt)),Kt=cn(Qt,je);if(Kt.signedDistanceFromCamera>0)Et=Ye[xt]=Kt.point;else{var kn=xt-st;Et=jn(0===It?Q:new o.Point(De.getx(kn),De.gety(kn)),Qt,Dt,Ft-It+1,je)}}It+=qt,qt=Dt.dist(Et)}var En=(Ft-It)/qt,Bn=Et.sub(Dt),qn=Bn.mult(En)._add(Dt);qn._add(Bn._unit()._perp()._mult(H*st));var er=mt+Math.atan2(Et.y-Dt.y,Et.x-Dt.x);return on.push(qn),{point:qn,angle:er,path:on}}Gn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Gn.prototype.insert=function(N,W,H,C,G){this._forEachCell(W,H,C,G,this._insertBoxCell,this.boxUid++),this.boxKeys.push(N),this.bboxes.push(W),this.bboxes.push(H),this.bboxes.push(C),this.bboxes.push(G)},Gn.prototype.insertCircle=function(N,W,H,C){this._forEachCell(W-C,H-C,W+C,H+C,this._insertCircleCell,this.circleUid++),this.circleKeys.push(N),this.circles.push(W),this.circles.push(H),this.circles.push(C)},Gn.prototype._insertBoxCell=function(N,W,H,C,G,Q){this.boxCells[G].push(Q)},Gn.prototype._insertCircleCell=function(N,W,H,C,G,Q){this.circleCells[G].push(Q)},Gn.prototype._query=function(N,W,H,C,G,Q){if(H<0||N>this.width||C<0||W>this.height)return!G&&[];var oe=[];if(N<=0&&W<=0&&this.width<=H&&this.height<=C){if(G)return!0;for(var de=0;de<this.boxKeys.length;de++)oe.push({key:this.boxKeys[de],x1:this.bboxes[4*de],y1:this.bboxes[4*de+1],x2:this.bboxes[4*de+2],y2:this.bboxes[4*de+3]});for(var Ae=0;Ae<this.circleKeys.length;Ae++){var De=this.circles[3*Ae],je=this.circles[3*Ae+1],Ye=this.circles[3*Ae+2];oe.push({key:this.circleKeys[Ae],x1:De-Ye,y1:je-Ye,x2:De+Ye,y2:je+Ye})}return Q?oe.filter(Q):oe}return this._forEachCell(N,W,H,C,this._queryCell,oe,{hitTest:G,seenUids:{box:{},circle:{}}},Q),G?oe.length>0:oe},Gn.prototype._queryCircle=function(N,W,H,C,G){var Q=N-H,oe=N+H,de=W-H,Ae=W+H;if(oe<0||Q>this.width||Ae<0||de>this.height)return!C&&[];var De=[];return this._forEachCell(Q,de,oe,Ae,this._queryCellCircle,De,{hitTest:C,circle:{x:N,y:W,radius:H},seenUids:{box:{},circle:{}}},G),C?De.length>0:De},Gn.prototype.query=function(N,W,H,C,G){return this._query(N,W,H,C,!1,G)},Gn.prototype.hitTest=function(N,W,H,C,G){return this._query(N,W,H,C,!0,G)},Gn.prototype.hitTestCircle=function(N,W,H,C){return this._queryCircle(N,W,H,!0,C)},Gn.prototype._queryCell=function(N,W,H,C,G,Q,oe,de){var Ae=oe.seenUids,De=this.boxCells[G];if(null!==De)for(var je=this.bboxes,Ye=0,Ke=De;Ye<Ke.length;Ye+=1){var st=Ke[Ye];if(!Ae.box[st]){Ae.box[st]=!0;var mt=4*st;if(N<=je[mt+2]&&W<=je[mt+3]&&H>=je[mt+0]&&C>=je[mt+1]&&(!de||de(this.boxKeys[st]))){if(oe.hitTest)return Q.push(!0),!0;Q.push({key:this.boxKeys[st],x1:je[mt],y1:je[mt+1],x2:je[mt+2],y2:je[mt+3]})}}}var xt=this.circleCells[G];if(null!==xt)for(var Et=this.circles,Dt=0,It=xt;Dt<It.length;Dt+=1){var qt=It[Dt];if(!Ae.circle[qt]){Ae.circle[qt]=!0;var Ft=3*qt;if(this._circleAndRectCollide(Et[Ft],Et[Ft+1],Et[Ft+2],N,W,H,C)&&(!de||de(this.circleKeys[qt]))){if(oe.hitTest)return Q.push(!0),!0;var on=Et[Ft],Qt=Et[Ft+1],Kt=Et[Ft+2];Q.push({key:this.circleKeys[qt],x1:on-Kt,y1:Qt-Kt,x2:on+Kt,y2:Qt+Kt})}}}},Gn.prototype._queryCellCircle=function(N,W,H,C,G,Q,oe,de){var Ae=oe.circle,De=oe.seenUids,je=this.boxCells[G];if(null!==je)for(var Ye=this.bboxes,Ke=0,st=je;Ke<st.length;Ke+=1){var mt=st[Ke];if(!De.box[mt]){De.box[mt]=!0;var xt=4*mt;if(this._circleAndRectCollide(Ae.x,Ae.y,Ae.radius,Ye[xt+0],Ye[xt+1],Ye[xt+2],Ye[xt+3])&&(!de||de(this.boxKeys[mt])))return Q.push(!0),!0}}var Et=this.circleCells[G];if(null!==Et)for(var Dt=this.circles,It=0,qt=Et;It<qt.length;It+=1){var Ft=qt[It];if(!De.circle[Ft]){De.circle[Ft]=!0;var on=3*Ft;if(this._circlesCollide(Dt[on],Dt[on+1],Dt[on+2],Ae.x,Ae.y,Ae.radius)&&(!de||de(this.circleKeys[Ft])))return Q.push(!0),!0}}},Gn.prototype._forEachCell=function(N,W,H,C,G,Q,oe,de){for(var Ae=this._convertToXCellCoord(N),De=this._convertToYCellCoord(W),je=this._convertToXCellCoord(H),Ye=this._convertToYCellCoord(C),Ke=Ae;Ke<=je;Ke++)for(var st=De;st<=Ye;st++)if(G.call(this,N,W,H,C,this.xCellCount*st+Ke,Q,oe,de))return},Gn.prototype._convertToXCellCoord=function(N){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(N*this.xScale)))},Gn.prototype._convertToYCellCoord=function(N){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(N*this.yScale)))},Gn.prototype._circlesCollide=function(N,W,H,C,G,Q){var oe=C-N,de=G-W,Ae=H+Q;return Ae*Ae>oe*oe+de*de},Gn.prototype._circleAndRectCollide=function(N,W,H,C,G,Q,oe){var de=(Q-C)/2,Ae=Math.abs(N-(C+de));if(Ae>de+H)return!1;var De=(oe-G)/2,je=Math.abs(W-(G+De));if(je>De+H)return!1;if(Ae<=de||je<=De)return!0;var Ye=Ae-de,Ke=je-De;return Ye*Ye+Ke*Ke<=H*H};var Jn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Zn(N,W){for(var H=0;H<N;H++){var C=W.length;W.resize(C+4),W.float32.set(Jn,3*C)}}function hr(N,W,H){var C=W[0],G=W[1];return N[0]=H[0]*C+H[4]*G+H[12],N[1]=H[1]*C+H[5]*G+H[13],N[3]=H[3]*C+H[7]*G+H[15],N}var rr=100,dr=function(N,W,H){void 0===W&&(W=new Gn(N.width+200,N.height+200,25)),void 0===H&&(H=new Gn(N.width+200,N.height+200,25)),this.transform=N,this.grid=W,this.ignoredGrid=H,this.pitchfactor=Math.cos(N._pitch)*N.cameraToCenterDistance,this.screenRightBoundary=N.width+rr,this.screenBottomBoundary=N.height+rr,this.gridRightBoundary=N.width+200,this.gridBottomBoundary=N.height+200};function nr(N,W,H){return W*(o.EXTENT/(N.tileSize*Math.pow(2,H-N.tileID.overscaledZ)))}dr.prototype.placeCollisionBox=function(N,W,H,C,G){var Q=this.projectAndGetPerspectiveRatio(C,N.anchorPointX,N.anchorPointY),oe=H*Q.perspectiveRatio,de=N.x1*oe+Q.point.x,Ae=N.y1*oe+Q.point.y,De=N.x2*oe+Q.point.x,je=N.y2*oe+Q.point.y;return!this.isInsideGrid(de,Ae,De,je)||!W&&this.grid.hitTest(de,Ae,De,je,G)?{box:[],offscreen:!1}:{box:[de,Ae,De,je],offscreen:this.isOffscreen(de,Ae,De,je)}},dr.prototype.placeCollisionCircles=function(N,W,H,C,G,Q,oe,de,Ae,De,je,Ye,Ke){var st=[],mt=new o.Point(W.anchorX,W.anchorY),xt=cn(mt,Q),Et=bn(this.transform.cameraToCenterDistance,xt.signedDistanceFromCamera),Dt=(De?G/Et:G*Et)/o.ONE_EM,It=cn(mt,oe).point,qt=Ln(Dt,C,W.lineOffsetX*Dt,W.lineOffsetY*Dt,!1,It,mt,W,H,oe,{}),Ft=!1,on=!1,Qt=!0;if(qt){for(var Kt=.5*Ye*Et+Ke,kn=new o.Point(-100,-100),En=new o.Point(this.screenRightBoundary,this.screenBottomBoundary),Bn=new Xt,qn=qt.first,er=qt.last,gr=[],wr=qn.path.length-1;wr>=1;wr--)gr.push(qn.path[wr]);for(var sr=1;sr<er.path.length;sr++)gr.push(er.path[sr]);var _r=2.5*Kt;if(de){var Dr=gr.map(function(wi){return cn(wi,de)});gr=Dr.some(function(wi){return wi.signedDistanceFromCamera<=0})?[]:Dr.map(function(wi){return wi.point})}var Wr=[];if(gr.length>0){for(var mr=gr[0].clone(),br=gr[0].clone(),jr=1;jr<gr.length;jr++)mr.x=Math.min(mr.x,gr[jr].x),mr.y=Math.min(mr.y,gr[jr].y),br.x=Math.max(br.x,gr[jr].x),br.y=Math.max(br.y,gr[jr].y);Wr=mr.x>=kn.x&&br.x<=En.x&&mr.y>=kn.y&&br.y<=En.y?[gr]:br.x<kn.x||mr.x>En.x||br.y<kn.y||mr.y>En.y?[]:o.clipLine([gr],kn.x,kn.y,En.x,En.y)}for(var Mr=0,Gr=Wr;Mr<Gr.length;Mr+=1){var si;Bn.reset(Gr[Mr],.25*Kt),si=Bn.length<=.5*Kt?1:Math.ceil(Bn.paddedLength/_r)+1;for(var li=0;li<si;li++){var pi=li/Math.max(si-1,1),_i=Bn.lerp(pi),na=_i.x+rr,ga=_i.y+rr;st.push(na,ga,Kt,0);var Ua=na-Kt,Fa=ga-Kt,aa=na+Kt,Ni=ga+Kt;if(Qt=Qt&&this.isOffscreen(Ua,Fa,aa,Ni),on=on||this.isInsideGrid(Ua,Fa,aa,Ni),!N&&this.grid.hitTestCircle(na,ga,Kt,je)&&(Ft=!0,!Ae))return{circles:[],offscreen:!1,collisionDetected:Ft}}}}return{circles:!Ae&&Ft||!on?[]:st,offscreen:Qt,collisionDetected:Ft}},dr.prototype.queryRenderedSymbols=function(N){if(0===N.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var W=[],H=1/0,C=1/0,G=-1/0,Q=-1/0,oe=0,de=N;oe<de.length;oe+=1){var Ae=de[oe],De=new o.Point(Ae.x+rr,Ae.y+rr);H=Math.min(H,De.x),C=Math.min(C,De.y),G=Math.max(G,De.x),Q=Math.max(Q,De.y),W.push(De)}for(var je={},Ye={},Ke=0,st=this.grid.query(H,C,G,Q).concat(this.ignoredGrid.query(H,C,G,Q));Ke<st.length;Ke+=1){var mt=st[Ke],xt=mt.key;if(void 0===je[xt.bucketInstanceId]&&(je[xt.bucketInstanceId]={}),!je[xt.bucketInstanceId][xt.featureIndex]){var Et=[new o.Point(mt.x1,mt.y1),new o.Point(mt.x2,mt.y1),new o.Point(mt.x2,mt.y2),new o.Point(mt.x1,mt.y2)];o.polygonIntersectsPolygon(W,Et)&&(je[xt.bucketInstanceId][xt.featureIndex]=!0,void 0===Ye[xt.bucketInstanceId]&&(Ye[xt.bucketInstanceId]=[]),Ye[xt.bucketInstanceId].push(xt.featureIndex))}}return Ye},dr.prototype.insertCollisionBox=function(N,W,H,C,G){(W?this.ignoredGrid:this.grid).insert({bucketInstanceId:H,featureIndex:C,collisionGroupID:G},N[0],N[1],N[2],N[3])},dr.prototype.insertCollisionCircles=function(N,W,H,C,G){for(var Q=W?this.ignoredGrid:this.grid,oe={bucketInstanceId:H,featureIndex:C,collisionGroupID:G},de=0;de<N.length;de+=4)Q.insertCircle(oe,N[de],N[de+1],N[de+2])},dr.prototype.projectAndGetPerspectiveRatio=function(N,W,H){var C=[W,H,0,1];return hr(C,C,N),{point:new o.Point((C[0]/C[3]+1)/2*this.transform.width+rr,(-C[1]/C[3]+1)/2*this.transform.height+rr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/C[3]*.5}},dr.prototype.isOffscreen=function(N,W,H,C){return H<rr||N>=this.screenRightBoundary||C<rr||W>this.screenBottomBoundary},dr.prototype.isInsideGrid=function(N,W,H,C){return H>=0&&N<this.gridRightBoundary&&C>=0&&W<this.gridBottomBoundary},dr.prototype.getViewportMatrix=function(){var N=o.identity([]);return o.translate(N,N,[-100,-100,0]),N};var Sr=function(N,W,H,C){this.opacity=N?Math.max(0,Math.min(1,N.opacity+(N.placed?W:-W))):C&&H?1:0,this.placed=H};Sr.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var ln=function(N,W,H,C,G){this.text=new Sr(N?N.text:null,W,H,G),this.icon=new Sr(N?N.icon:null,W,C,G)};ln.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var dn=function(N,W,H){this.text=N,this.icon=W,this.skipFade=H},Un=function(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]},Mn=function(N,W,H,C,G){this.bucketInstanceId=N,this.featureIndex=W,this.sourceLayerIndex=H,this.bucketIndex=C,this.tileID=G},Hn=function(N){this.crossSourceCollisions=N,this.maxGroupID=0,this.collisionGroups={}};function Wn(N,W,H,C,G){var Q=o.getAnchorAlignment(N),oe=-(Q.horizontalAlign-.5)*W,de=-(Q.verticalAlign-.5)*H,Ae=o.evaluateVariableOffset(N,C);return new o.Point(oe+Ae[0]*G,de+Ae[1]*G)}function $n(N,W,H,C,G,Q){var oe=N.x1,de=N.x2,Ae=N.y1,De=N.y2,je=N.anchorPointX,Ye=N.anchorPointY,Ke=new o.Point(W,H);return C&&Ke._rotate(G?Q:-Q),{x1:oe+Ke.x,y1:Ae+Ke.y,x2:de+Ke.x,y2:De+Ke.y,anchorPointX:je,anchorPointY:Ye}}Hn.prototype.get=function(N){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[N]){var W=++this.maxGroupID;this.collisionGroups[N]={ID:W,predicate:function(H){return H.collisionGroupID===W}}}return this.collisionGroups[N]};var lr=function(N,W,H,C){this.transform=N.clone(),this.collisionIndex=new dr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=W,this.retainedQueryData={},this.collisionGroups=new Hn(H),this.collisionCircleArrays={},this.prevPlacement=C,C&&(C.prevPlacement=void 0),this.placedOrientations={}};function Cr(N,W,H,C,G){N.emplaceBack(W?1:0,H?1:0,C||0,G||0),N.emplaceBack(W?1:0,H?1:0,C||0,G||0),N.emplaceBack(W?1:0,H?1:0,C||0,G||0),N.emplaceBack(W?1:0,H?1:0,C||0,G||0)}lr.prototype.getBucketParts=function(N,W,H,C){var G=H.getBucket(W),Q=H.latestFeatureIndex;if(G&&Q&&W.id===G.layerIds[0]){var oe=H.collisionBoxArray,de=G.layers[0].layout,Ae=Math.pow(2,this.transform.zoom-H.tileID.overscaledZ),De=H.tileSize/o.EXTENT,je=this.transform.calculatePosMatrix(H.tileID.toUnwrapped()),Ye="map"===de.get("text-pitch-alignment"),Ke="map"===de.get("text-rotation-alignment"),st=nr(H,1,this.transform.zoom),mt=Dn(je,Ye,Ke,this.transform,st),xt=null;if(Ye){var Et=An(je,Ye,Ke,this.transform,st);xt=o.multiply([],this.transform.labelPlaneMatrix,Et)}this.retainedQueryData[G.bucketInstanceId]=new Mn(G.bucketInstanceId,Q,G.sourceLayerIndex,G.index,H.tileID);var Dt={bucket:G,layout:de,posMatrix:je,textLabelPlaneMatrix:mt,labelToScreenMatrix:xt,scale:Ae,textPixelRatio:De,holdingForFade:H.holdingForFade(),collisionBoxArray:oe,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(G.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(G.sourceID)};if(C)for(var It=0,qt=G.sortKeyRanges;It<qt.length;It+=1){var Ft=qt[It];N.push({sortKey:Ft.sortKey,symbolInstanceStart:Ft.symbolInstanceStart,symbolInstanceEnd:Ft.symbolInstanceEnd,parameters:Dt})}else N.push({symbolInstanceStart:0,symbolInstanceEnd:G.symbolInstances.length,parameters:Dt})}},lr.prototype.attemptAnchorPlacement=function(N,W,H,C,G,Q,oe,de,Ae,De,je,Ye,Ke,st,mt){var xt,Et=[Ye.textOffset0,Ye.textOffset1],Dt=Wn(N,H,C,Et,G),It=this.collisionIndex.placeCollisionBox($n(W,Dt.x,Dt.y,Q,oe,this.transform.angle),je,de,Ae,De.predicate);if(!mt||0!==this.collisionIndex.placeCollisionBox($n(mt,Dt.x,Dt.y,Q,oe,this.transform.angle),je,de,Ae,De.predicate).box.length)return It.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Ye.crossTileID]&&this.prevPlacement.placements[Ye.crossTileID]&&this.prevPlacement.placements[Ye.crossTileID].text&&(xt=this.prevPlacement.variableOffsets[Ye.crossTileID].anchor),this.variableOffsets[Ye.crossTileID]={textOffset:Et,width:H,height:C,anchor:N,textBoxScale:G,prevAnchor:xt},this.markUsedJustification(Ke,N,Ye,st),Ke.allowVerticalPlacement&&(this.markUsedOrientation(Ke,st,Ye),this.placedOrientations[Ye.crossTileID]=st),{shift:Dt,placedGlyphBoxes:It}):void 0},lr.prototype.placeLayerBucketPart=function(N,W,H){var C=this,G=N.parameters,Q=G.bucket,oe=G.layout,de=G.posMatrix,Ae=G.textLabelPlaneMatrix,De=G.labelToScreenMatrix,je=G.textPixelRatio,Ye=G.holdingForFade,Ke=G.collisionBoxArray,st=G.partiallyEvaluatedTextSize,mt=G.collisionGroup,xt=oe.get("text-optional"),Et=oe.get("icon-optional"),Dt=oe.get("text-allow-overlap"),It=oe.get("icon-allow-overlap"),qt="map"===oe.get("text-rotation-alignment"),Ft="map"===oe.get("text-pitch-alignment"),on="none"!==oe.get("icon-text-fit"),Qt="viewport-y"===oe.get("symbol-z-order"),Kt=Dt&&(It||!Q.hasIconData()||Et),kn=It&&(Dt||!Q.hasTextData()||xt);!Q.collisionArrays&&Ke&&Q.deserializeCollisionBoxes(Ke);var En=function(sr,_r){if(!W[sr.crossTileID])if(Ye)C.placements[sr.crossTileID]=new dn(!1,!1,!1);else{var Dr,Wr=!1,mr=!1,br=!0,jr=null,Mr={box:null,offscreen:null},Gr={box:null,offscreen:null},$r=null,si=null,li=0,pi=0,_i=0;_r.textFeatureIndex?li=_r.textFeatureIndex:sr.useRuntimeCollisionCircles&&(li=sr.featureIndex),_r.verticalTextFeatureIndex&&(pi=_r.verticalTextFeatureIndex);var na=_r.textBox;if(na){var ga=function(oa){var jo=o.WritingMode.horizontal;if(Q.allowVerticalPlacement&&!oa&&C.prevPlacement){var La=C.prevPlacement.placedOrientations[sr.crossTileID];La&&(C.placedOrientations[sr.crossTileID]=La,C.markUsedOrientation(Q,jo=La,sr))}return jo},Ua=function(oa,jo){if(Q.allowVerticalPlacement&&sr.numVerticalGlyphVertices>0&&_r.verticalTextBox)for(var La=0,Gu=Q.writingModes;La<Gu.length&&(Gu[La]===o.WritingMode.vertical?(Mr=jo(),Gr=Mr):Mr=oa(),!(Mr&&Mr.box&&Mr.box.length));La+=1);else Mr=oa()};if(oe.get("text-variable-anchor")){var Fa=oe.get("text-variable-anchor");if(C.prevPlacement&&C.prevPlacement.variableOffsets[sr.crossTileID]){var aa=C.prevPlacement.variableOffsets[sr.crossTileID];Fa.indexOf(aa.anchor)>0&&(Fa=Fa.filter(function(oa){return oa!==aa.anchor})).unshift(aa.anchor)}var Ni=function(oa,jo,La){for(var Gu=oa.x2-oa.x1,Kh=oa.y2-oa.y1,sh=sr.textBoxScale,Sf=on&&!It?jo:null,Hu={box:[],offscreen:!1},lh=Dt?2*Fa.length:Fa.length,nc=0;nc<lh;++nc){var iu=C.attemptAnchorPlacement(Fa[nc%Fa.length],oa,Gu,Kh,sh,qt,Ft,je,de,mt,nc>=Fa.length,sr,Q,La,Sf);if(iu&&(Hu=iu.placedGlyphBoxes)&&Hu.box&&Hu.box.length){Wr=!0,jr=iu.shift;break}}return Hu};Ua(function(){return Ni(na,_r.iconBox,o.WritingMode.horizontal)},function(){var oa=_r.verticalTextBox;return Q.allowVerticalPlacement&&!(Mr&&Mr.box&&Mr.box.length)&&sr.numVerticalGlyphVertices>0&&oa?Ni(oa,_r.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null}}),Mr&&(Wr=Mr.box,br=Mr.offscreen);var wi=ga(Mr&&Mr.box);if(!Wr&&C.prevPlacement){var ra=C.prevPlacement.variableOffsets[sr.crossTileID];ra&&(C.variableOffsets[sr.crossTileID]=ra,C.markUsedJustification(Q,ra.anchor,sr,wi))}}else{var Yi=function(oa,jo){var La=C.collisionIndex.placeCollisionBox(oa,Dt,je,de,mt.predicate);return La&&La.box&&La.box.length&&(C.markUsedOrientation(Q,jo,sr),C.placedOrientations[sr.crossTileID]=jo),La};Ua(function(){return Yi(na,o.WritingMode.horizontal)},function(){var oa=_r.verticalTextBox;return Q.allowVerticalPlacement&&sr.numVerticalGlyphVertices>0&&oa?Yi(oa,o.WritingMode.vertical):{box:null,offscreen:null}}),ga(Mr&&Mr.box&&Mr.box.length)}}if(Wr=(Dr=Mr)&&Dr.box&&Dr.box.length>0,br=Dr&&Dr.offscreen,sr.useRuntimeCollisionCircles){var Si=Q.text.placedSymbolArray.get(sr.centerJustifiedTextSymbolIndex),ua=o.evaluateSizeForFeature(Q.textSizeData,st,Si),ia=oe.get("text-padding");$r=C.collisionIndex.placeCollisionCircles(Dt,Si,Q.lineVertexArray,Q.glyphOffsetArray,ua,de,Ae,De,H,Ft,mt.predicate,sr.collisionCircleDiameter,ia),Wr=Dt||$r.circles.length>0&&!$r.collisionDetected,br=br&&$r.offscreen}if(_r.iconFeatureIndex&&(_i=_r.iconFeatureIndex),_r.iconBox){var Is=function(oa){var jo=on&&jr?$n(oa,jr.x,jr.y,qt,Ft,C.transform.angle):oa;return C.collisionIndex.placeCollisionBox(jo,It,je,de,mt.predicate)};mr=Gr&&Gr.box&&Gr.box.length&&_r.verticalIconBox?(si=Is(_r.verticalIconBox)).box.length>0:(si=Is(_r.iconBox)).box.length>0,br=br&&si.offscreen}var Dl=xt||0===sr.numHorizontalGlyphVertices&&0===sr.numVerticalGlyphVertices,Ti=Et||0===sr.numIconVertices;if(Dl||Ti?Ti?Dl||(mr=mr&&Wr):Wr=mr&&Wr:mr=Wr=mr&&Wr,Wr&&Dr&&Dr.box&&C.collisionIndex.insertCollisionBox(Dr.box,oe.get("text-ignore-placement"),Q.bucketInstanceId,Gr&&Gr.box&&pi?pi:li,mt.ID),mr&&si&&C.collisionIndex.insertCollisionBox(si.box,oe.get("icon-ignore-placement"),Q.bucketInstanceId,_i,mt.ID),$r&&(Wr&&C.collisionIndex.insertCollisionCircles($r.circles,oe.get("text-ignore-placement"),Q.bucketInstanceId,li,mt.ID),H)){var zl=Q.bucketInstanceId,Fl=C.collisionCircleArrays[zl];void 0===Fl&&(Fl=C.collisionCircleArrays[zl]=new Un);for(var gs=0;gs<$r.circles.length;gs+=4)Fl.circles.push($r.circles[gs+0]),Fl.circles.push($r.circles[gs+1]),Fl.circles.push($r.circles[gs+2]),Fl.circles.push($r.collisionDetected?1:0)}C.placements[sr.crossTileID]=new dn(Wr||Kt,mr||kn,br||Q.justReloaded),W[sr.crossTileID]=!0}};if(Qt)for(var Bn=Q.getSortedSymbolIndexes(this.transform.angle),qn=Bn.length-1;qn>=0;--qn){var er=Bn[qn];En(Q.symbolInstances.get(er),Q.collisionArrays[er])}else for(var gr=N.symbolInstanceStart;gr<N.symbolInstanceEnd;gr++)En(Q.symbolInstances.get(gr),Q.collisionArrays[gr]);if(H&&Q.bucketInstanceId in this.collisionCircleArrays){var wr=this.collisionCircleArrays[Q.bucketInstanceId];o.invert(wr.invProjMatrix,de),wr.viewportMatrix=this.collisionIndex.getViewportMatrix()}Q.justReloaded=!1},lr.prototype.markUsedJustification=function(N,W,H,C){var G;G=C===o.WritingMode.vertical?H.verticalPlacedTextSymbolIndex:{left:H.leftJustifiedTextSymbolIndex,center:H.centerJustifiedTextSymbolIndex,right:H.rightJustifiedTextSymbolIndex}[o.getAnchorJustification(W)];for(var oe=0,de=[H.leftJustifiedTextSymbolIndex,H.centerJustifiedTextSymbolIndex,H.rightJustifiedTextSymbolIndex,H.verticalPlacedTextSymbolIndex];oe<de.length;oe+=1){var Ae=de[oe];Ae>=0&&(N.text.placedSymbolArray.get(Ae).crossTileID=G>=0&&Ae!==G?0:H.crossTileID)}},lr.prototype.markUsedOrientation=function(N,W,H){for(var C=W===o.WritingMode.horizontal||W===o.WritingMode.horizontalOnly?W:0,G=W===o.WritingMode.vertical?W:0,Q=0,oe=[H.leftJustifiedTextSymbolIndex,H.centerJustifiedTextSymbolIndex,H.rightJustifiedTextSymbolIndex];Q<oe.length;Q+=1)N.text.placedSymbolArray.get(oe[Q]).placedOrientation=C;H.verticalPlacedTextSymbolIndex&&(N.text.placedSymbolArray.get(H.verticalPlacedTextSymbolIndex).placedOrientation=G)},lr.prototype.commit=function(N){this.commitTime=N,this.zoomAtLastRecencyCheck=this.transform.zoom;var W=this.prevPlacement,H=!1;this.prevZoomAdjustment=W?W.zoomAdjustment(this.transform.zoom):0;var C=W?W.symbolFadeChange(N):1,G=W?W.opacities:{},Q=W?W.variableOffsets:{},oe=W?W.placedOrientations:{};for(var de in this.placements){var Ae=this.placements[de],De=G[de];De?(this.opacities[de]=new ln(De,C,Ae.text,Ae.icon),H=H||Ae.text!==De.text.placed||Ae.icon!==De.icon.placed):(this.opacities[de]=new ln(null,C,Ae.text,Ae.icon,Ae.skipFade),H=H||Ae.text||Ae.icon)}for(var je in G){var Ye=G[je];if(!this.opacities[je]){var Ke=new ln(Ye,C,!1,!1);Ke.isHidden()||(this.opacities[je]=Ke,H=H||Ye.text.placed||Ye.icon.placed)}}for(var st in Q)this.variableOffsets[st]||!this.opacities[st]||this.opacities[st].isHidden()||(this.variableOffsets[st]=Q[st]);for(var mt in oe)this.placedOrientations[mt]||!this.opacities[mt]||this.opacities[mt].isHidden()||(this.placedOrientations[mt]=oe[mt]);H?this.lastPlacementChangeTime=N:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=W?W.lastPlacementChangeTime:N)},lr.prototype.updateLayerOpacities=function(N,W){for(var H={},C=0,G=W;C<G.length;C+=1){var Q=G[C],oe=Q.getBucket(N);oe&&Q.latestFeatureIndex&&N.id===oe.layerIds[0]&&this.updateBucketOpacities(oe,H,Q.collisionBoxArray)}},lr.prototype.updateBucketOpacities=function(N,W,H){var C=this;N.hasTextData()&&N.text.opacityVertexArray.clear(),N.hasIconData()&&N.icon.opacityVertexArray.clear(),N.hasIconCollisionBoxData()&&N.iconCollisionBox.collisionVertexArray.clear(),N.hasTextCollisionBoxData()&&N.textCollisionBox.collisionVertexArray.clear();var G=N.layers[0].layout,Q=new ln(null,0,!1,!1,!0),oe=G.get("text-allow-overlap"),de=G.get("icon-allow-overlap"),Ae=G.get("text-variable-anchor"),De="map"===G.get("text-rotation-alignment"),je="map"===G.get("text-pitch-alignment"),Ye="none"!==G.get("icon-text-fit"),Ke=new ln(null,0,oe&&(de||!N.hasIconData()||G.get("icon-optional")),de&&(oe||!N.hasTextData()||G.get("text-optional")),!0);!N.collisionArrays&&H&&(N.hasIconCollisionBoxData()||N.hasTextCollisionBoxData())&&N.deserializeCollisionBoxes(H);for(var st=function(Dt,It,qt){for(var Ft=0;Ft<It/4;Ft++)Dt.opacityVertexArray.emplaceBack(qt)},mt=function(Dt){var It=N.symbolInstances.get(Dt),qt=It.numHorizontalGlyphVertices,Ft=It.numVerticalGlyphVertices,on=It.crossTileID,Kt=C.opacities[on];W[on]?Kt=Q:Kt||(C.opacities[on]=Kt=Ke),W[on]=!0;var En=It.numIconVertices>0,Bn=C.placedOrientations[It.crossTileID],qn=Bn===o.WritingMode.vertical,er=Bn===o.WritingMode.horizontal||Bn===o.WritingMode.horizontalOnly;if(qt>0||Ft>0){var gr=Cn(Kt.text);st(N.text,qt,qn?vn:gr),st(N.text,Ft,er?vn:gr);var _r=Kt.text.isHidden();[It.rightJustifiedTextSymbolIndex,It.centerJustifiedTextSymbolIndex,It.leftJustifiedTextSymbolIndex].forEach(function(_i){_i>=0&&(N.text.placedSymbolArray.get(_i).hidden=_r||qn?1:0)}),It.verticalPlacedTextSymbolIndex>=0&&(N.text.placedSymbolArray.get(It.verticalPlacedTextSymbolIndex).hidden=_r||er?1:0);var Dr=C.variableOffsets[It.crossTileID];Dr&&C.markUsedJustification(N,Dr.anchor,It,Bn);var Wr=C.placedOrientations[It.crossTileID];Wr&&(C.markUsedJustification(N,"left",It,Wr),C.markUsedOrientation(N,Wr,It))}if(En){var mr=Cn(Kt.icon),br=!(Ye&&It.verticalPlacedIconSymbolIndex&&qn);It.placedIconSymbolIndex>=0&&(st(N.icon,It.numIconVertices,br?mr:vn),N.icon.placedSymbolArray.get(It.placedIconSymbolIndex).hidden=Kt.icon.isHidden()),It.verticalPlacedIconSymbolIndex>=0&&(st(N.icon,It.numVerticalIconVertices,br?vn:mr),N.icon.placedSymbolArray.get(It.verticalPlacedIconSymbolIndex).hidden=Kt.icon.isHidden())}if(N.hasIconCollisionBoxData()||N.hasTextCollisionBoxData()){var Gr=N.collisionArrays[Dt];if(Gr){var $r=new o.Point(0,0);if(Gr.textBox||Gr.verticalTextBox){var si=!0;if(Ae){var li=C.variableOffsets[on];li?($r=Wn(li.anchor,li.width,li.height,li.textOffset,li.textBoxScale),De&&$r._rotate(je?C.transform.angle:-C.transform.angle)):si=!1}Gr.textBox&&Cr(N.textCollisionBox.collisionVertexArray,Kt.text.placed,!si||qn,$r.x,$r.y),Gr.verticalTextBox&&Cr(N.textCollisionBox.collisionVertexArray,Kt.text.placed,!si||er,$r.x,$r.y)}var pi=!(er||!Gr.verticalIconBox);Gr.iconBox&&Cr(N.iconCollisionBox.collisionVertexArray,Kt.icon.placed,pi,Ye?$r.x:0,Ye?$r.y:0),Gr.verticalIconBox&&Cr(N.iconCollisionBox.collisionVertexArray,Kt.icon.placed,!pi,Ye?$r.x:0,Ye?$r.y:0)}}},xt=0;xt<N.symbolInstances.length;xt++)mt(xt);if(N.sortFeatures(this.transform.angle),this.retainedQueryData[N.bucketInstanceId]&&(this.retainedQueryData[N.bucketInstanceId].featureSortOrder=N.featureSortOrder),N.hasTextData()&&N.text.opacityVertexBuffer&&N.text.opacityVertexBuffer.updateData(N.text.opacityVertexArray),N.hasIconData()&&N.icon.opacityVertexBuffer&&N.icon.opacityVertexBuffer.updateData(N.icon.opacityVertexArray),N.hasIconCollisionBoxData()&&N.iconCollisionBox.collisionVertexBuffer&&N.iconCollisionBox.collisionVertexBuffer.updateData(N.iconCollisionBox.collisionVertexArray),N.hasTextCollisionBoxData()&&N.textCollisionBox.collisionVertexBuffer&&N.textCollisionBox.collisionVertexBuffer.updateData(N.textCollisionBox.collisionVertexArray),N.bucketInstanceId in this.collisionCircleArrays){var Et=this.collisionCircleArrays[N.bucketInstanceId];N.placementInvProjMatrix=Et.invProjMatrix,N.placementViewportMatrix=Et.viewportMatrix,N.collisionCircleArray=Et.circles,delete this.collisionCircleArrays[N.bucketInstanceId]}},lr.prototype.symbolFadeChange=function(N){return 0===this.fadeDuration?1:(N-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},lr.prototype.zoomAdjustment=function(N){return Math.max(0,(this.transform.zoom-N)/1.5)},lr.prototype.hasTransitions=function(N){return this.stale||N-this.lastPlacementChangeTime<this.fadeDuration},lr.prototype.stillRecent=function(N,W){var H=this.zoomAtLastRecencyCheck===W?1-this.zoomAdjustment(W):1;return this.zoomAtLastRecencyCheck=W,this.commitTime+this.fadeDuration*H>N},lr.prototype.setStale=function(){this.stale=!0};var sn=Math.pow(2,25),Sn=Math.pow(2,24),zt=Math.pow(2,17),Yt=Math.pow(2,16),un=Math.pow(2,9),_n=Math.pow(2,8),Tn=Math.pow(2,1);function Cn(N){if(0===N.opacity&&!N.placed)return 0;if(1===N.opacity&&N.placed)return 4294967295;var W=N.placed?1:0,H=Math.floor(127*N.opacity);return H*sn+W*Sn+H*zt+W*Yt+H*un+W*_n+H*Tn+W}var vn=0,rn=function(N){this._sortAcrossTiles="viewport-y"!==N.layout.get("symbol-z-order")&&void 0!==N.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};rn.prototype.continuePlacement=function(N,W,H,C,G){for(var Q=this._bucketParts;this._currentTileIndex<N.length;)if(W.getBucketParts(Q,C,N[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,G())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Q.sort(function(Ae,De){return Ae.sortKey-De.sortKey}));this._currentPartIndex<Q.length;)if(W.placeLayerBucketPart(Q[this._currentPartIndex],this._seenCrossTileIDs,H),this._currentPartIndex++,G())return!0;return!1};var tn=function(N,W,H,C,G,Q,oe){this.placement=new lr(N,G,Q,oe),this._currentPlacementIndex=W.length-1,this._forceFullPlacement=H,this._showCollisionBoxes=C,this._done=!1};tn.prototype.isDone=function(){return this._done},tn.prototype.continuePlacement=function(N,W,H){for(var C=this,G=o.browser.now(),Q=function(){var Ae=o.browser.now()-G;return!C._forceFullPlacement&&Ae>2};this._currentPlacementIndex>=0;){var oe=W[N[this._currentPlacementIndex]],de=this.placement.collisionIndex.transform.zoom;if("symbol"===oe.type&&(!oe.minzoom||oe.minzoom<=de)&&(!oe.maxzoom||oe.maxzoom>de)){if(this._inProgressLayer||(this._inProgressLayer=new rn(oe)),this._inProgressLayer.continuePlacement(H[oe.source],this.placement,this._showCollisionBoxes,oe,Q))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},tn.prototype.commit=function(N){return this.placement.commit(N),this.placement};var fn=512/o.EXTENT/2,yn=function(N,W,H){this.tileID=N,this.indexedSymbolInstances={},this.bucketInstanceId=H;for(var C=0;C<W.length;C++){var G=W.get(C),Q=G.key;this.indexedSymbolInstances[Q]||(this.indexedSymbolInstances[Q]=[]),this.indexedSymbolInstances[Q].push({crossTileID:G.crossTileID,coord:this.getScaledCoordinates(G,N)})}};yn.prototype.getScaledCoordinates=function(N,W){var C=fn/Math.pow(2,W.canonical.z-this.tileID.canonical.z);return{x:Math.floor((W.canonical.x*o.EXTENT+N.anchorX)*C),y:Math.floor((W.canonical.y*o.EXTENT+N.anchorY)*C)}},yn.prototype.findMatches=function(N,W,H){for(var C=this.tileID.canonical.z<W.canonical.z?1:Math.pow(2,this.tileID.canonical.z-W.canonical.z),G=0;G<N.length;G++){var Q=N.get(G);if(!Q.crossTileID){var oe=this.indexedSymbolInstances[Q.key];if(oe)for(var de=this.getScaledCoordinates(Q,W),Ae=0,De=oe;Ae<De.length;Ae+=1){var je=De[Ae];if(Math.abs(je.coord.x-de.x)<=C&&Math.abs(je.coord.y-de.y)<=C&&!H[je.crossTileID]){H[je.crossTileID]=!0,Q.crossTileID=je.crossTileID;break}}}}};var zn=function(){this.maxCrossTileID=0};zn.prototype.generate=function(){return++this.maxCrossTileID};var Vn=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Vn.prototype.handleWrapJump=function(N){var W=Math.round((N-this.lng)/360);if(0!==W)for(var H in this.indexes){var C=this.indexes[H],G={};for(var Q in C){var oe=C[Q];oe.tileID=oe.tileID.unwrapTo(oe.tileID.wrap+W),G[oe.tileID.key]=oe}this.indexes[H]=G}this.lng=N},Vn.prototype.addBucket=function(N,W,H){if(this.indexes[N.overscaledZ]&&this.indexes[N.overscaledZ][N.key]){if(this.indexes[N.overscaledZ][N.key].bucketInstanceId===W.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(N.overscaledZ,this.indexes[N.overscaledZ][N.key])}for(var C=0;C<W.symbolInstances.length;C++)W.symbolInstances.get(C).crossTileID=0;this.usedCrossTileIDs[N.overscaledZ]||(this.usedCrossTileIDs[N.overscaledZ]={});var G=this.usedCrossTileIDs[N.overscaledZ];for(var Q in this.indexes){var oe=this.indexes[Q];if(Number(Q)>N.overscaledZ)for(var de in oe){var Ae=oe[de];Ae.tileID.isChildOf(N)&&Ae.findMatches(W.symbolInstances,N,G)}else{var De=oe[N.scaledTo(Number(Q)).key];De&&De.findMatches(W.symbolInstances,N,G)}}for(var je=0;je<W.symbolInstances.length;je++){var Ye=W.symbolInstances.get(je);Ye.crossTileID||(Ye.crossTileID=H.generate(),G[Ye.crossTileID]=!0)}return void 0===this.indexes[N.overscaledZ]&&(this.indexes[N.overscaledZ]={}),this.indexes[N.overscaledZ][N.key]=new yn(N,W.symbolInstances,W.bucketInstanceId),!0},Vn.prototype.removeBucketCrossTileIDs=function(N,W){for(var H in W.indexedSymbolInstances)for(var C=0,G=W.indexedSymbolInstances[H];C<G.length;C+=1)delete this.usedCrossTileIDs[N][G[C].crossTileID]},Vn.prototype.removeStaleBuckets=function(N){var W=!1;for(var H in this.indexes){var C=this.indexes[H];for(var G in C)N[C[G].bucketInstanceId]||(this.removeBucketCrossTileIDs(H,C[G]),delete C[G],W=!0)}return W};var Xn=function(){this.layerIndexes={},this.crossTileIDs=new zn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Xn.prototype.addLayer=function(N,W,H){var C=this.layerIndexes[N.id];void 0===C&&(C=this.layerIndexes[N.id]=new Vn);var G=!1,Q={};C.handleWrapJump(H);for(var oe=0,de=W;oe<de.length;oe+=1){var Ae=de[oe],De=Ae.getBucket(N);De&&N.id===De.layerIds[0]&&(De.bucketInstanceId||(De.bucketInstanceId=++this.maxBucketInstanceId),C.addBucket(Ae.tileID,De,this.crossTileIDs)&&(G=!0),Q[De.bucketInstanceId]=!0)}return C.removeStaleBuckets(Q)&&(G=!0),G},Xn.prototype.pruneUnusedLayers=function(N){var W={};for(var H in N.forEach(function(C){W[C]=!0}),this.layerIndexes)W[H]||delete this.layerIndexes[H]};var Qn=function(N,W){return o.emitValidationErrors(N,W&&W.filter(function(H){return"source.canvas"!==H.identifier}))},pr=o.pick(St,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),or=o.pick(St,["setCenter","setZoom","setBearing","setPitch"]),fr=function(){var N={},W=o.styleSpec.$version;for(var H in o.styleSpec.$root){var G,C=o.styleSpec.$root[H];C.required&&null!=(G="version"===H?W:"array"===C.type?[]:{})&&(N[H]=G)}return N}(),vr=function(N){function W(H,C){var G=this;void 0===C&&(C={}),N.call(this),this.map=H,this.dispatcher=new P(kt(),this),this.imageManager=new f,this.imageManager.setEventedParent(this),this.glyphManager=new v(H._requestManager,C.localIdeographFontFamily),this.lineAtlas=new E(256,512),this.crossTileSymbolIndex=new Xn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());var Q=this;this._rtlTextPluginCallback=W.registerForPluginStateChange(function(oe){Q.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:oe.pluginStatus,pluginURL:oe.pluginURL},function(Ae,De){if(o.triggerPluginCompletionEvent(Ae),De&&De.every(function(Ye){return Ye}))for(var je in Q.sourceCaches)Q.sourceCaches[je].reload()})}),this.on("data",function(oe){if("source"===oe.dataType&&"metadata"===oe.sourceDataType){var de=G.sourceCaches[oe.sourceId];if(de){var Ae=de.getSource();if(Ae&&Ae.vectorLayerIds)for(var De in G._layers){var je=G._layers[De];je.source===Ae.id&&G._validateLayer(je)}}}})}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.loadURL=function(H,C){var G=this;void 0===C&&(C={}),this.fire(new o.Event("dataloading",{dataType:"style"}));var Q="boolean"==typeof C.validate?C.validate:!o.isMapboxURL(H);H=this.map._requestManager.normalizeStyleURL(H,C.accessToken);var oe=this.map._requestManager.transformRequest(H,o.ResourceType.Style);this._request=o.getJSON(oe,function(de,Ae){G._request=null,de?G.fire(new o.ErrorEvent(de)):Ae&&G._load(Ae,Q)})},W.prototype.loadJSON=function(H,C){var G=this;void 0===C&&(C={}),this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.browser.frame(function(){G._request=null,G._load(H,!1!==C.validate)})},W.prototype.loadEmpty=function(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(fr,!1)},W.prototype._load=function(H,C){if(!C||!Qn(this,o.validateStyle(H))){for(var G in this._loaded=!0,this.stylesheet=H,H.sources)this.addSource(G,H.sources[G],{validate:!1});H.sprite?this._loadSprite(H.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(H.glyphs);var Q=Lt(this.stylesheet.layers);this._order=Q.map(function(De){return De.id}),this._layers={},this._serializedLayers={};for(var oe=0,de=Q;oe<de.length;oe+=1){var Ae=de[oe];(Ae=o.createStyleLayer(Ae)).setEventedParent(this,{layer:{id:Ae.id}}),this._layers[Ae.id]=Ae,this._serializedLayers[Ae.id]=Ae.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}},W.prototype._loadSprite=function(H){var C=this;this._spriteRequest=function(G,Q,oe){var de,Ae,De,je=o.browser.devicePixelRatio>1?"@2x":"",Ye=o.getJSON(Q.transformRequest(Q.normalizeSpriteURL(G,je,".json"),o.ResourceType.SpriteJSON),function(mt,xt){Ye=null,De||(De=mt,de=xt,st())}),Ke=o.getImage(Q.transformRequest(Q.normalizeSpriteURL(G,je,".png"),o.ResourceType.SpriteImage),function(mt,xt){Ke=null,De||(De=mt,Ae=xt,st())});function st(){if(De)oe(De);else if(de&&Ae){var mt=o.browser.getImageData(Ae),xt={};for(var Et in de){var Dt=de[Et],It=Dt.width,qt=Dt.height,Ft=Dt.x,on=Dt.y,Qt=Dt.sdf,Kt=Dt.pixelRatio,kn=Dt.stretchX,En=Dt.stretchY,Bn=Dt.content,qn=new o.RGBAImage({width:It,height:qt});o.RGBAImage.copy(mt,qn,{x:Ft,y:on},{x:0,y:0},{width:It,height:qt}),xt[Et]={data:qn,pixelRatio:Kt,sdf:Qt,stretchX:kn,stretchY:En,content:Bn}}oe(null,xt)}}return{cancel:function(){Ye&&(Ye.cancel(),Ye=null),Ke&&(Ke.cancel(),Ke=null)}}}(H,this.map._requestManager,function(G,Q){if(C._spriteRequest=null,G)C.fire(new o.ErrorEvent(G));else if(Q)for(var oe in Q)C.imageManager.addImage(oe,Q[oe]);C.imageManager.setLoaded(!0),C._availableImages=C.imageManager.listImages(),C.dispatcher.broadcast("setImages",C._availableImages),C.fire(new o.Event("data",{dataType:"style"}))})},W.prototype._validateLayer=function(H){var C=this.sourceCaches[H.source];if(C){var G=H.sourceLayer;if(G){var Q=C.getSource();("geojson"===Q.type||Q.vectorLayerIds&&-1===Q.vectorLayerIds.indexOf(G))&&this.fire(new o.ErrorEvent(new Error('Source layer "'+G+'" does not exist on source "'+Q.id+'" as specified by style layer "'+H.id+'"')))}}},W.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var H in this.sourceCaches)if(!this.sourceCaches[H].loaded())return!1;return!!this.imageManager.isLoaded()},W.prototype._serializeLayers=function(H){for(var C=[],G=0,Q=H;G<Q.length;G+=1){var de=this._layers[Q[G]];"custom"!==de.type&&C.push(de.serialize())}return C},W.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var H in this.sourceCaches)if(this.sourceCaches[H].hasTransition())return!0;for(var C in this._layers)if(this._layers[C].hasTransition())return!0;return!1},W.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},W.prototype.update=function(H){if(this._loaded){var C=this._changed;if(this._changed){var G=Object.keys(this._updatedLayers),Q=Object.keys(this._removedLayers);for(var oe in(G.length||Q.length)&&this._updateWorkerLayers(G,Q),this._updatedSources){var de=this._updatedSources[oe];"reload"===de?this._reloadSource(oe):"clear"===de&&this._clearSource(oe)}for(var Ae in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Ae].updateTransitions(H);this.light.updateTransitions(H),this._resetUpdates()}var De={};for(var je in this.sourceCaches){var Ye=this.sourceCaches[je];De[je]=Ye.used,Ye.used=!1}for(var Ke=0,st=this._order;Ke<st.length;Ke+=1){var xt=this._layers[st[Ke]];xt.recalculate(H,this._availableImages),!xt.isHidden(H.zoom)&&xt.source&&(this.sourceCaches[xt.source].used=!0)}for(var Et in De){var Dt=this.sourceCaches[Et];De[Et]!==Dt.used&&Dt.fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Et}))}this.light.recalculate(H),this.z=H.zoom,C&&this.fire(new o.Event("data",{dataType:"style"}))}},W.prototype._updateTilesForChangedImages=function(){var H=Object.keys(this._changedImages);if(H.length){for(var C in this.sourceCaches)this.sourceCaches[C].reloadTilesForDependencies(["icons","patterns"],H);this._changedImages={}}},W.prototype._updateWorkerLayers=function(H,C){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(H),removedIds:C})},W.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},W.prototype.setState=function(H){var C=this;if(this._checkLoaded(),Qn(this,o.validateStyle(H)))return!1;(H=o.clone$1(H)).layers=Lt(H.layers);var G=function an(N,W){if(!N)return[{command:St.setStyle,args:[W]}];var H=[];try{if(!o.deepEqual(N.version,W.version))return[{command:St.setStyle,args:[W]}];o.deepEqual(N.center,W.center)||H.push({command:St.setCenter,args:[W.center]}),o.deepEqual(N.zoom,W.zoom)||H.push({command:St.setZoom,args:[W.zoom]}),o.deepEqual(N.bearing,W.bearing)||H.push({command:St.setBearing,args:[W.bearing]}),o.deepEqual(N.pitch,W.pitch)||H.push({command:St.setPitch,args:[W.pitch]}),o.deepEqual(N.sprite,W.sprite)||H.push({command:St.setSprite,args:[W.sprite]}),o.deepEqual(N.glyphs,W.glyphs)||H.push({command:St.setGlyphs,args:[W.glyphs]}),o.deepEqual(N.transition,W.transition)||H.push({command:St.setTransition,args:[W.transition]}),o.deepEqual(N.light,W.light)||H.push({command:St.setLight,args:[W.light]});var C={},G=[];!function(oe,de,Ae,De){var je;for(je in de=de||{},oe=oe||{})oe.hasOwnProperty(je)&&(de.hasOwnProperty(je)||Nt(je,Ae,De));for(je in de)de.hasOwnProperty(je)&&(oe.hasOwnProperty(je)?o.deepEqual(oe[je],de[je])||("geojson"===oe[je].type&&"geojson"===de[je].type&&Vt(oe,de,je)?Ae.push({command:St.setGeoJSONSourceData,args:[je,de[je].data]}):Bt(je,de,Ae,De)):Ot(je,de,Ae))}(N.sources,W.sources,G,C);var Q=[];N.layers&&N.layers.forEach(function(oe){C[oe.source]?H.push({command:St.removeLayer,args:[oe.id]}):Q.push(oe)}),H=H.concat(G),function(oe,de,Ae){de=de||[];var De,je,Ye,Ke,st,mt,xt,Et=(oe=oe||[]).map(gn),Dt=de.map(gn),It=oe.reduce(Jt,{}),qt=de.reduce(Jt,{}),Ft=Et.slice(),on=Object.create(null);for(De=0,je=0;De<Et.length;De++)qt.hasOwnProperty(Ye=Et[De])?je++:(Ae.push({command:St.removeLayer,args:[Ye]}),Ft.splice(Ft.indexOf(Ye,je),1));for(De=0,je=0;De<Dt.length;De++)Ft[Ft.length-1-De]!==(Ye=Dt[Dt.length-1-De])&&(It.hasOwnProperty(Ye)?(Ae.push({command:St.removeLayer,args:[Ye]}),Ft.splice(Ft.lastIndexOf(Ye,Ft.length-je),1)):je++,Ae.push({command:St.addLayer,args:[qt[Ye],mt=Ft[Ft.length-De]]}),Ft.splice(Ft.length-De,0,Ye),on[Ye]=!0);for(De=0;De<Dt.length;De++)if(Ke=It[Ye=Dt[De]],st=qt[Ye],!on[Ye]&&!o.deepEqual(Ke,st))if(o.deepEqual(Ke.source,st.source)&&o.deepEqual(Ke["source-layer"],st["source-layer"])&&o.deepEqual(Ke.type,st.type)){for(xt in nn(Ke.layout,st.layout,Ae,Ye,null,St.setLayoutProperty),nn(Ke.paint,st.paint,Ae,Ye,null,St.setPaintProperty),o.deepEqual(Ke.filter,st.filter)||Ae.push({command:St.setFilter,args:[Ye,st.filter]}),o.deepEqual(Ke.minzoom,st.minzoom)&&o.deepEqual(Ke.maxzoom,st.maxzoom)||Ae.push({command:St.setLayerZoomRange,args:[Ye,st.minzoom,st.maxzoom]}),Ke)Ke.hasOwnProperty(xt)&&"layout"!==xt&&"paint"!==xt&&"filter"!==xt&&"metadata"!==xt&&"minzoom"!==xt&&"maxzoom"!==xt&&(0===xt.indexOf("paint.")?nn(Ke[xt],st[xt],Ae,Ye,xt.slice(6),St.setPaintProperty):o.deepEqual(Ke[xt],st[xt])||Ae.push({command:St.setLayerProperty,args:[Ye,xt,st[xt]]}));for(xt in st)st.hasOwnProperty(xt)&&!Ke.hasOwnProperty(xt)&&"layout"!==xt&&"paint"!==xt&&"filter"!==xt&&"metadata"!==xt&&"minzoom"!==xt&&"maxzoom"!==xt&&(0===xt.indexOf("paint.")?nn(Ke[xt],st[xt],Ae,Ye,xt.slice(6),St.setPaintProperty):o.deepEqual(Ke[xt],st[xt])||Ae.push({command:St.setLayerProperty,args:[Ye,xt,st[xt]]}))}else Ae.push({command:St.removeLayer,args:[Ye]}),mt=Ft[Ft.lastIndexOf(Ye)+1],Ae.push({command:St.addLayer,args:[st,mt]})}(Q,W.layers,H)}catch(oe){console.warn("Unable to compute style diff:",oe),H=[{command:St.setStyle,args:[W]}]}return H}(this.serialize(),H).filter(function(oe){return!(oe.command in or)});if(0===G.length)return!1;var Q=G.filter(function(oe){return!(oe.command in pr)});if(Q.length>0)throw new Error("Unimplemented: "+Q.map(function(oe){return oe.command}).join(", ")+".");return G.forEach(function(oe){"setTransition"!==oe.command&&C[oe.command].apply(C,oe.args)}),this.stylesheet=H,!0},W.prototype.addImage=function(H,C){if(this.getImage(H))return this.fire(new o.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(H,C),this._afterImageUpdated(H)},W.prototype.updateImage=function(H,C){this.imageManager.updateImage(H,C)},W.prototype.getImage=function(H){return this.imageManager.getImage(H)},W.prototype.removeImage=function(H){if(!this.getImage(H))return this.fire(new o.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(H),this._afterImageUpdated(H)},W.prototype._afterImageUpdated=function(H){this._availableImages=this.imageManager.listImages(),this._changedImages[H]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))},W.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},W.prototype.addSource=function(H,C,G){var Q=this;if(void 0===G&&(G={}),this._checkLoaded(),void 0!==this.sourceCaches[H])throw new Error("There is already a source with this ID");if(!C.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(C).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(C.type)>=0&&this._validate(o.validateStyle.source,"sources."+H,C,null,G))){this.map&&this.map._collectResourceTiming&&(C.collectResourceTiming=!0);var oe=this.sourceCaches[H]=new pt(H,C,this.dispatcher);oe.style=this,oe.setEventedParent(this,function(){return{isSourceLoaded:Q.loaded(),source:oe.serialize(),sourceId:H}}),oe.onAdd(this.map),this._changed=!0}},W.prototype.removeSource=function(H){if(this._checkLoaded(),void 0===this.sourceCaches[H])throw new Error("There is no source with this ID");for(var C in this._layers)if(this._layers[C].source===H)return this.fire(new o.ErrorEvent(new Error('Source "'+H+'" cannot be removed while layer "'+C+'" is using it.')));var G=this.sourceCaches[H];delete this.sourceCaches[H],delete this._updatedSources[H],G.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:H})),G.setEventedParent(null),G.clearTiles(),G.onRemove&&G.onRemove(this.map),this._changed=!0},W.prototype.setGeoJSONSourceData=function(H,C){this._checkLoaded(),this.sourceCaches[H].getSource().setData(C),this._changed=!0},W.prototype.getSource=function(H){return this.sourceCaches[H]&&this.sourceCaches[H].getSource()},W.prototype.addLayer=function(H,C,G){void 0===G&&(G={}),this._checkLoaded();var Q=H.id;if(this.getLayer(Q))this.fire(new o.ErrorEvent(new Error('Layer with id "'+Q+'" already exists on this map')));else{var oe;if("custom"===H.type){if(Qn(this,o.validateCustomStyleLayer(H)))return;oe=o.createStyleLayer(H)}else{if("object"==typeof H.source&&(this.addSource(Q,H.source),H=o.clone$1(H),H=o.extend(H,{source:Q})),this._validate(o.validateStyle.layer,"layers."+Q,H,{arrayIndex:-1},G))return;oe=o.createStyleLayer(H),this._validateLayer(oe),oe.setEventedParent(this,{layer:{id:Q}}),this._serializedLayers[oe.id]=oe.serialize()}var de=C?this._order.indexOf(C):this._order.length;if(C&&-1===de)this.fire(new o.ErrorEvent(new Error('Layer with id "'+C+'" does not exist on this map.')));else{if(this._order.splice(de,0,Q),this._layerOrderChanged=!0,this._layers[Q]=oe,this._removedLayers[Q]&&oe.source&&"custom"!==oe.type){var Ae=this._removedLayers[Q];delete this._removedLayers[Q],Ae.type!==oe.type?this._updatedSources[oe.source]="clear":(this._updatedSources[oe.source]="reload",this.sourceCaches[oe.source].pause())}this._updateLayer(oe),oe.onAdd&&oe.onAdd(this.map)}}},W.prototype.moveLayer=function(H,C){if(this._checkLoaded(),this._changed=!0,this._layers[H]){if(H!==C){var G=this._order.indexOf(H);this._order.splice(G,1);var Q=C?this._order.indexOf(C):this._order.length;C&&-1===Q?this.fire(new o.ErrorEvent(new Error('Layer with id "'+C+'" does not exist on this map.'))):(this._order.splice(Q,0,H),this._layerOrderChanged=!0)}}else this.fire(new o.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be moved.")))},W.prototype.removeLayer=function(H){this._checkLoaded();var C=this._layers[H];if(C){C.setEventedParent(null);var G=this._order.indexOf(H);this._order.splice(G,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[H]=C,delete this._layers[H],delete this._serializedLayers[H],delete this._updatedLayers[H],delete this._updatedPaintProps[H],C.onRemove&&C.onRemove(this.map)}else this.fire(new o.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be removed.")))},W.prototype.getLayer=function(H){return this._layers[H]},W.prototype.hasLayer=function(H){return H in this._layers},W.prototype.setLayerZoomRange=function(H,C,G){this._checkLoaded();var Q=this.getLayer(H);Q?Q.minzoom===C&&Q.maxzoom===G||(null!=C&&(Q.minzoom=C),null!=G&&(Q.maxzoom=G),this._updateLayer(Q)):this.fire(new o.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot have zoom extent.")))},W.prototype.setFilter=function(H,C,G){void 0===G&&(G={}),this._checkLoaded();var Q=this.getLayer(H);if(Q){if(!o.deepEqual(Q.filter,C))return null==C?(Q.filter=void 0,void this._updateLayer(Q)):void(this._validate(o.validateStyle.filter,"layers."+Q.id+".filter",C,null,G)||(Q.filter=o.clone$1(C),this._updateLayer(Q)))}else this.fire(new o.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be filtered.")))},W.prototype.getFilter=function(H){return o.clone$1(this.getLayer(H).filter)},W.prototype.setLayoutProperty=function(H,C,G,Q){void 0===Q&&(Q={}),this._checkLoaded();var oe=this.getLayer(H);oe?o.deepEqual(oe.getLayoutProperty(C),G)||(oe.setLayoutProperty(C,G,Q),this._updateLayer(oe)):this.fire(new o.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be styled.")))},W.prototype.getLayoutProperty=function(H,C){var G=this.getLayer(H);if(G)return G.getLayoutProperty(C);this.fire(new o.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style.")))},W.prototype.setPaintProperty=function(H,C,G,Q){void 0===Q&&(Q={}),this._checkLoaded();var oe=this.getLayer(H);oe?o.deepEqual(oe.getPaintProperty(C),G)||(oe.setPaintProperty(C,G,Q)&&this._updateLayer(oe),this._changed=!0,this._updatedPaintProps[H]=!0):this.fire(new o.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be styled.")))},W.prototype.getPaintProperty=function(H,C){return this.getLayer(H).getPaintProperty(C)},W.prototype.setFeatureState=function(H,C){this._checkLoaded();var G=H.source,Q=H.sourceLayer,oe=this.sourceCaches[G];if(void 0!==oe){var de=oe.getSource().type;"geojson"===de&&Q?this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==de||Q?(void 0===H.id&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),oe.setFeatureState(Q,H.id,C)):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+G+"' does not exist in the map's style.")))},W.prototype.removeFeatureState=function(H,C){this._checkLoaded();var G=H.source,Q=this.sourceCaches[G];if(void 0!==Q){var oe=Q.getSource().type,de="vector"===oe?H.sourceLayer:void 0;"vector"!==oe||de?C&&"string"!=typeof H.id&&"number"!=typeof H.id?this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):Q.removeFeatureState(de,H.id,C):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+G+"' does not exist in the map's style.")))},W.prototype.getFeatureState=function(H){this._checkLoaded();var C=H.source,G=H.sourceLayer,Q=this.sourceCaches[C];if(void 0!==Q){if("vector"!==Q.getSource().type||G)return void 0===H.id&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),Q.getFeatureState(G,H.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+C+"' does not exist in the map's style.")))},W.prototype.getTransition=function(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},W.prototype.serialize=function(){return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:o.mapObject(this.sourceCaches,function(H){return H.serialize()}),layers:this._serializeLayers(this._order)},function(H){return void 0!==H})},W.prototype._updateLayer=function(H){this._updatedLayers[H.id]=!0,H.source&&!this._updatedSources[H.source]&&"raster"!==this.sourceCaches[H.source].getSource().type&&(this._updatedSources[H.source]="reload",this.sourceCaches[H.source].pause()),this._changed=!0},W.prototype._flattenAndSortRenderedFeatures=function(H){for(var C=this,G=function(Bn){return"fill-extrusion"===C._layers[Bn].type},Q={},oe=[],de=this._order.length-1;de>=0;de--){var Ae=this._order[de];if(G(Ae)){Q[Ae]=de;for(var De=0,je=H;De<je.length;De+=1){var Ye=je[De][Ae];if(Ye)for(var Ke=0,st=Ye;Ke<st.length;Ke+=1)oe.push(st[Ke])}}}oe.sort(function(Bn,qn){return qn.intersectionZ-Bn.intersectionZ});for(var xt=[],Et=this._order.length-1;Et>=0;Et--){var Dt=this._order[Et];if(G(Dt))for(var It=oe.length-1;It>=0;It--){var qt=oe[It].feature;if(Q[qt.layer.id]<Et)break;xt.push(qt),oe.pop()}else for(var Ft=0,on=H;Ft<on.length;Ft+=1){var Qt=on[Ft][Dt];if(Qt)for(var Kt=0,kn=Qt;Kt<kn.length;Kt+=1)xt.push(kn[Kt].feature)}}return xt},W.prototype.queryRenderedFeatures=function(H,C,G){C&&C.filter&&this._validate(o.validateStyle.filter,"queryRenderedFeatures.filter",C.filter,null,C);var Q={};if(C&&C.layers){if(!Array.isArray(C.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var oe=0,de=C.layers;oe<de.length;oe+=1){var Ae=de[oe],De=this._layers[Ae];if(!De)return this.fire(new o.ErrorEvent(new Error("The layer '"+Ae+"' does not exist in the map's style and cannot be queried for features."))),[];Q[De.source]=!0}}var je=[];for(var Ye in C.availableImages=this._availableImages,this.sourceCaches)C.layers&&!Q[Ye]||je.push(ee(this.sourceCaches[Ye],this._layers,this._serializedLayers,H,C,G));return this.placement&&je.push(function(Ke,st,mt,xt,Et,Dt,It){for(var qt={},Ft=Dt.queryRenderedSymbols(xt),on=[],Qt=0,Kt=Object.keys(Ft).map(Number);Qt<Kt.length;Qt+=1)on.push(It[Kt[Qt]]);on.sort($);for(var En=function(){var wr=qn[Bn],sr=wr.featureIndex.lookupSymbolFeatures(Ft[wr.bucketInstanceId],st,wr.bucketIndex,wr.sourceLayerIndex,Et.filter,Et.layers,Et.availableImages,Ke);for(var _r in sr){var Dr=qt[_r]=qt[_r]||[],Wr=sr[_r];Wr.sort(function(Mr,Gr){var $r=wr.featureSortOrder;if($r){var si=$r.indexOf(Mr.featureIndex);return $r.indexOf(Gr.featureIndex)-si}return Gr.featureIndex-Mr.featureIndex});for(var mr=0,br=Wr;mr<br.length;mr+=1)Dr.push(br[mr])}},Bn=0,qn=on;Bn<qn.length;Bn+=1)En();var er=function(wr){qt[wr].forEach(function(sr){var _r=sr.feature,Wr=mt[Ke[wr].source].getFeatureState(_r.layer["source-layer"],_r.id);_r.source=_r.layer.source,_r.layer["source-layer"]&&(_r.sourceLayer=_r.layer["source-layer"]),_r.state=Wr})};for(var gr in qt)er(gr);return qt}(this._layers,this._serializedLayers,this.sourceCaches,H,C,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(je)},W.prototype.querySourceFeatures=function(H,C){C&&C.filter&&this._validate(o.validateStyle.filter,"querySourceFeatures.filter",C.filter,null,C);var G=this.sourceCaches[H];return G?function(Q,oe){for(var de=Q.getRenderableIds().map(function(st){return Q.getTileByID(st)}),Ae=[],De={},je=0;je<de.length;je++){var Ye=de[je],Ke=Ye.tileID.canonical.key;De[Ke]||(De[Ke]=!0,Ye.querySourceFeatures(Ae,oe))}return Ae}(G,C):[]},W.prototype.addSourceType=function(H,C,G){return W.getSourceType(H)?G(new Error('A source type called "'+H+'" already exists.')):(W.setSourceType(H,C),C.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:H,url:C.workerSourceURL},G):G(null,null))},W.prototype.getLight=function(){return this.light.getLight()},W.prototype.setLight=function(H,C){void 0===C&&(C={}),this._checkLoaded();var G=this.light.getLight(),Q=!1;for(var oe in H)if(!o.deepEqual(H[oe],G[oe])){Q=!0;break}if(Q){var de={now:o.browser.now(),transition:o.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(H,C),this.light.updateTransitions(de)}},W.prototype._validate=function(H,C,G,Q,oe){return void 0===oe&&(oe={}),(!oe||!1!==oe.validate)&&Qn(this,H.call(o.validateStyle,o.extend({key:C,style:this.serialize(),value:G,styleSpec:o.styleSpec},Q)))},W.prototype._remove=function(){for(var H in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[H].setEventedParent(null);for(var C in this.sourceCaches)this.sourceCaches[C].clearTiles(),this.sourceCaches[C].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},W.prototype._clearSource=function(H){this.sourceCaches[H].clearTiles()},W.prototype._reloadSource=function(H){this.sourceCaches[H].resume(),this.sourceCaches[H].reload()},W.prototype._updateSources=function(H){for(var C in this.sourceCaches)this.sourceCaches[C].update(H)},W.prototype._generateCollisionBoxes=function(){for(var H in this.sourceCaches)this._reloadSource(H)},W.prototype._updatePlacement=function(H,C,G,Q,oe){void 0===oe&&(oe=!1);for(var de=!1,Ae=!1,De={},je=0,Ye=this._order;je<Ye.length;je+=1){var st=this._layers[Ye[je]];if("symbol"===st.type){if(!De[st.source]){var mt=this.sourceCaches[st.source];De[st.source]=mt.getRenderableIds(!0).map(function(Ft){return mt.getTileByID(Ft)}).sort(function(Ft,on){return on.tileID.overscaledZ-Ft.tileID.overscaledZ||(Ft.tileID.isLessThan(on.tileID)?-1:1)})}var xt=this.crossTileSymbolIndex.addLayer(st,De[st.source],H.center.lng);de=de||xt}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((oe=oe||this._layerOrderChanged||0===G)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.browser.now(),H.zoom))&&(this.pauseablePlacement=new tn(H,this._order,oe,C,G,Q,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,De),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.browser.now()),Ae=!0),de&&this.pauseablePlacement.placement.setStale()),Ae||de)for(var Et=0,Dt=this._order;Et<Dt.length;Et+=1){var qt=this._layers[Dt[Et]];"symbol"===qt.type&&this.placement.updateLayerOpacities(qt,De[qt.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.browser.now())},W.prototype._releaseSymbolFadeTiles=function(){for(var H in this.sourceCaches)this.sourceCaches[H].releaseSymbolFadeTiles()},W.prototype.getImages=function(H,C,G){this.imageManager.getImages(C.icons,G),this._updateTilesForChangedImages();var Q=this.sourceCaches[C.source];Q&&Q.setDependencies(C.tileID.key,C.type,C.icons)},W.prototype.getGlyphs=function(H,C,G){this.glyphManager.getGlyphs(C.stacks,G)},W.prototype.getResource=function(H,C,G){return o.makeRequest(C,G)},W}(o.Evented);vr.getSourceType=function(N){return ie[N]},vr.setSourceType=function(N,W){ie[N]=W},vr.registerForPluginStateChange=o.registerForPluginStateChange;var cr=o.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ar=ki("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Fr=ki("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Lr=ki("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),xr=ki("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Pr=ki("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),qr=ki("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Qr=ki("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Fi=ki("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),ta=ki("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Ta=ki("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Gi=ki("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),pa=ki("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),qa=ki("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ti=ki("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),_a=ki("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),vo=ki("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),ka=ki("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),vs=ki("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),ma=ki("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Na=ki("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Ho=ki("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),as=ki("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),tl=ki("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),co=ki("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),Co=ki("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),os=ki("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function ki(N,W){var H=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,C=W.match(/attribute ([\w]+) ([\w]+)/g),G=N.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),Q=W.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),oe=Q?Q.concat(G):G,de={};return{fragmentSource:N=N.replace(H,function(Ae,De,je,Ye,Ke){return de[Ke]=!0,"define"===De?"\n#ifndef HAS_UNIFORM_u_"+Ke+"\nvarying "+je+" "+Ye+" "+Ke+";\n#else\nuniform "+je+" "+Ye+" u_"+Ke+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+Ke+"\n    "+je+" "+Ye+" "+Ke+" = u_"+Ke+";\n#endif\n"}),vertexSource:W=W.replace(H,function(Ae,De,je,Ye,Ke){var st="float"===Ye?"vec2":"vec4",mt=Ke.match(/color/)?"color":st;return de[Ke]?"define"===De?"\n#ifndef HAS_UNIFORM_u_"+Ke+"\nuniform lowp float u_"+Ke+"_t;\nattribute "+je+" "+st+" a_"+Ke+";\nvarying "+je+" "+Ye+" "+Ke+";\n#else\nuniform "+je+" "+Ye+" u_"+Ke+";\n#endif\n":"vec4"===mt?"\n#ifndef HAS_UNIFORM_u_"+Ke+"\n    "+Ke+" = a_"+Ke+";\n#else\n    "+je+" "+Ye+" "+Ke+" = u_"+Ke+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Ke+"\n    "+Ke+" = unpack_mix_"+mt+"(a_"+Ke+", u_"+Ke+"_t);\n#else\n    "+je+" "+Ye+" "+Ke+" = u_"+Ke+";\n#endif\n":"define"===De?"\n#ifndef HAS_UNIFORM_u_"+Ke+"\nuniform lowp float u_"+Ke+"_t;\nattribute "+je+" "+st+" a_"+Ke+";\n#else\nuniform "+je+" "+Ye+" u_"+Ke+";\n#endif\n":"vec4"===mt?"\n#ifndef HAS_UNIFORM_u_"+Ke+"\n    "+je+" "+Ye+" "+Ke+" = a_"+Ke+";\n#else\n    "+je+" "+Ye+" "+Ke+" = u_"+Ke+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Ke+"\n    "+je+" "+Ye+" "+Ke+" = unpack_mix_"+mt+"(a_"+Ke+", u_"+Ke+"_t);\n#else\n    "+je+" "+Ye+" "+Ke+" = u_"+Ke+";\n#endif\n"}),staticAttributes:C,staticUniforms:oe}}var wa=Object.freeze({__proto__:null,prelude:Ar,background:Fr,backgroundPattern:Lr,circle:xr,clippingMask:Pr,heatmap:qr,heatmapTexture:Qr,collisionBox:Fi,collisionCircle:ta,debug:Ta,fill:Gi,fillOutline:pa,fillOutlinePattern:qa,fillPattern:ti,fillExtrusion:_a,fillExtrusionPattern:vo,hillshadePrepare:ka,hillshade:vs,line:ma,lineGradient:Na,linePattern:Ho,lineSDF:as,raster:tl,symbolIcon:co,symbolSDF:Co,symbolTextAndIcon:os}),fo=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function yo(N){for(var W=[],H=0;H<N.length;H++)if(null!==N[H]){var C=N[H].split(" ");W.push(C.pop())}return W}fo.prototype.bind=function(N,W,H,C,G,Q,oe,de){this.context=N;for(var Ae=this.boundPaintVertexBuffers.length!==C.length,De=0;!Ae&&De<C.length;De++)this.boundPaintVertexBuffers[De]!==C[De]&&(Ae=!0);N.extVertexArrayObject&&this.vao&&this.boundProgram===W&&this.boundLayoutVertexBuffer===H&&!Ae&&this.boundIndexBuffer===G&&this.boundVertexOffset===Q&&this.boundDynamicVertexBuffer===oe&&this.boundDynamicVertexBuffer2===de?(N.bindVertexArrayOES.set(this.vao),oe&&oe.bind(),G&&G.dynamicDraw&&G.bind(),de&&de.bind()):this.freshBind(W,H,C,G,Q,oe,de)},fo.prototype.freshBind=function(N,W,H,C,G,Q,oe){var de,Ae=N.numAttributes,De=this.context,je=De.gl;if(De.extVertexArrayObject)this.vao&&this.destroy(),this.vao=De.extVertexArrayObject.createVertexArrayOES(),De.bindVertexArrayOES.set(this.vao),de=0,this.boundProgram=N,this.boundLayoutVertexBuffer=W,this.boundPaintVertexBuffers=H,this.boundIndexBuffer=C,this.boundVertexOffset=G,this.boundDynamicVertexBuffer=Q,this.boundDynamicVertexBuffer2=oe;else{de=De.currentNumAttributes||0;for(var Ye=Ae;Ye<de;Ye++)je.disableVertexAttribArray(Ye)}W.enableAttributes(je,N);for(var Ke=0,st=H;Ke<st.length;Ke+=1)st[Ke].enableAttributes(je,N);Q&&Q.enableAttributes(je,N),oe&&oe.enableAttributes(je,N),W.bind(),W.setVertexAttribPointers(je,N,G);for(var mt=0,xt=H;mt<xt.length;mt+=1){var Et=xt[mt];Et.bind(),Et.setVertexAttribPointers(je,N,G)}Q&&(Q.bind(),Q.setVertexAttribPointers(je,N,G)),C&&C.bind(),oe&&(oe.bind(),oe.setVertexAttribPointers(je,N,G)),De.currentNumAttributes=Ae},fo.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var oo=function(N,W,H,C,G,Q){var oe=N.gl;this.program=oe.createProgram();for(var de=yo(H.staticAttributes),Ae=C?C.getBinderAttributes():[],De=de.concat(Ae),je=H.staticUniforms?yo(H.staticUniforms):[],Ye=C?C.getBinderUniforms():[],Ke=[],st=0,mt=je.concat(Ye);st<mt.length;st+=1){var xt=mt[st];Ke.indexOf(xt)<0&&Ke.push(xt)}var Et=C?C.defines():[];Q&&Et.push("#define OVERDRAW_INSPECTOR;");var Dt=Et.concat(Ar.fragmentSource,H.fragmentSource).join("\n"),It=Et.concat(Ar.vertexSource,H.vertexSource).join("\n"),qt=oe.createShader(oe.FRAGMENT_SHADER);if(oe.isContextLost())this.failedToCreate=!0;else{oe.shaderSource(qt,Dt),oe.compileShader(qt),oe.attachShader(this.program,qt);var Ft=oe.createShader(oe.VERTEX_SHADER);if(oe.isContextLost())this.failedToCreate=!0;else{oe.shaderSource(Ft,It),oe.compileShader(Ft),oe.attachShader(this.program,Ft),this.attributes={};var on={};this.numAttributes=De.length;for(var Qt=0;Qt<this.numAttributes;Qt++)De[Qt]&&(oe.bindAttribLocation(this.program,Qt,De[Qt]),this.attributes[De[Qt]]=Qt);oe.linkProgram(this.program),oe.deleteShader(Ft),oe.deleteShader(qt);for(var Kt=0;Kt<Ke.length;Kt++){var kn=Ke[Kt];if(kn&&!on[kn]){var En=oe.getUniformLocation(this.program,kn);En&&(on[kn]=En)}}this.fixedUniforms=G(N,on),this.binderUniforms=C?C.getUniforms(N,on):[]}}};function Lo(N,W,H){var C=1/nr(H,1,W.transform.tileZoom),G=Math.pow(2,H.tileID.overscaledZ),Q=H.tileSize*Math.pow(2,W.transform.tileZoom)/G,oe=Q*(H.tileID.canonical.x+H.tileID.wrap*G),de=Q*H.tileID.canonical.y;return{u_image:0,u_texsize:H.imageAtlasTexture.size,u_scale:[C,N.fromScale,N.toScale],u_fade:N.t,u_pixel_coord_upper:[oe>>16,de>>16],u_pixel_coord_lower:[65535&oe,65535&de]}}oo.prototype.draw=function(N,W,H,C,G,Q,oe,de,Ae,De,je,Ye,Ke,st,mt,xt){var Et,Dt=N.gl;if(!this.failedToCreate){for(var It in N.program.set(this.program),N.setDepthMode(H),N.setStencilMode(C),N.setColorMode(G),N.setCullFace(Q),this.fixedUniforms)this.fixedUniforms[It].set(oe[It]);st&&st.setUniforms(N,this.binderUniforms,Ye,{zoom:Ke});for(var qt=(Et={},Et[Dt.LINES]=2,Et[Dt.TRIANGLES]=3,Et[Dt.LINE_STRIP]=1,Et)[W],Ft=0,on=je.get();Ft<on.length;Ft+=1){var Qt=on[Ft],Kt=Qt.vaos||(Qt.vaos={});(Kt[de]||(Kt[de]=new fo)).bind(N,this,Ae,st?st.getPaintVertexBuffers():[],De,Qt.vertexOffset,mt,xt),Dt.drawElements(W,Qt.primitiveLength*qt,Dt.UNSIGNED_SHORT,Qt.primitiveOffset*qt*2)}}};var qo=function(N,W,H,C){var G=W.style.light,Q=G.properties.get("position"),oe=[Q.x,Q.y,Q.z],de=o.create$1();"viewport"===G.properties.get("anchor")&&o.fromRotation(de,-W.transform.angle),o.transformMat3(oe,oe,de);var Ae=G.properties.get("color");return{u_matrix:N,u_lightpos:oe,u_lightintensity:G.properties.get("intensity"),u_lightcolor:[Ae.r,Ae.g,Ae.b],u_vertical_gradient:+H,u_opacity:C}},nl=function(N,W,H,C,G,Q,oe){return o.extend(qo(N,W,H,C),Lo(Q,W,oe),{u_height_factor:-Math.pow(2,G.overscaledZ)/oe.tileSize/8})},va=function(N){return{u_matrix:N}},Ns=function(N,W,H,C){return o.extend(va(N),Lo(H,W,C))},ys=function(N,W){return{u_matrix:N,u_world:W}},_u=function(N,W,H,C,G){return o.extend(Ns(N,W,H,C),{u_world:G})},wu=function(N,W,H,C){var G,Q,oe=N.transform;if("map"===C.paint.get("circle-pitch-alignment")){var de=nr(H,1,oe.zoom);G=!0,Q=[de,de]}else G=!1,Q=oe.pixelsToGLUnits;return{u_camera_to_center_distance:oe.cameraToCenterDistance,u_scale_with_map:+("map"===C.paint.get("circle-pitch-scale")),u_matrix:N.translatePosMatrix(W.posMatrix,H,C.paint.get("circle-translate"),C.paint.get("circle-translate-anchor")),u_pitch_with_map:+G,u_device_pixel_ratio:o.browser.devicePixelRatio,u_extrude_scale:Q}},xs=function(N,W,H){var C=nr(H,1,W.zoom),G=Math.pow(2,W.zoom-H.tileID.overscaledZ),Q=H.tileID.overscaleFactor();return{u_matrix:N,u_camera_to_center_distance:W.cameraToCenterDistance,u_pixels_to_tile_units:C,u_extrude_scale:[W.pixelsToGLUnits[0]/(C*G),W.pixelsToGLUnits[1]/(C*G)],u_overscale_factor:Q}},ss=function(N,W,H){return{u_matrix:N,u_inv_matrix:W,u_camera_to_center_distance:H.cameraToCenterDistance,u_viewport_size:[H.width,H.height]}},Vu=function(N,W,H){return void 0===H&&(H=1),{u_matrix:N,u_color:W,u_overlay:0,u_overlay_scale:H}},Io=function(N){return{u_matrix:N}},ec=function(N,W,H,C){return{u_matrix:N,u_extrude_scale:nr(W,1,H),u_intensity:C}},Wo=function(N,W,H){var C=N.transform;return{u_matrix:Yo(N,W,H),u_ratio:1/nr(W,1,C.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]]}},bl=function(N,W,H,C){return o.extend(Wo(N,W,H),{u_image:0,u_image_height:C})},bs=function(N,W,H,C){var G=N.transform,Q=al(W,G);return{u_matrix:Yo(N,W,H),u_texsize:W.imageAtlasTexture.size,u_ratio:1/nr(W,1,G.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_image:0,u_scale:[Q,C.fromScale,C.toScale],u_fade:C.t,u_units_to_pixels:[1/G.pixelsToGLUnits[0],1/G.pixelsToGLUnits[1]]}},il=function(N,W,H,C,G){var oe=N.lineAtlas,de=al(W,N.transform),Ae="round"===H.layout.get("line-cap"),De=oe.getDash(C.from,Ae),je=oe.getDash(C.to,Ae),Ye=De.width*G.fromScale,Ke=je.width*G.toScale;return o.extend(Wo(N,W,H),{u_patternscale_a:[de/Ye,-De.height/2],u_patternscale_b:[de/Ke,-je.height/2],u_sdfgamma:oe.width/(256*Math.min(Ye,Ke)*o.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:De.y,u_tex_y_b:je.y,u_mix:G.t})};function al(N,W){return 1/nr(N,1,W.tileZoom)}function Yo(N,W,H){return N.translatePosMatrix(W.tileID.posMatrix,W,H.paint.get("line-translate"),H.paint.get("line-translate-anchor"))}var Xl=function(N,W,H,C,G){return{u_matrix:N,u_tl_parent:W,u_scale_parent:H,u_buffer_scale:1,u_fade_t:C.mix,u_opacity:C.opacity*G.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:G.paint.get("raster-brightness-min"),u_brightness_high:G.paint.get("raster-brightness-max"),u_saturation_factor:(oe=G.paint.get("raster-saturation"),oe>0?1-1/(1.001-oe):-oe),u_contrast_factor:(Q=G.paint.get("raster-contrast"),Q>0?1/(1-Q):1+Q),u_spin_weights:ls(G.paint.get("raster-hue-rotate"))};var Q,oe};function ls(N){N*=Math.PI/180;var W=Math.sin(N),H=Math.cos(N);return[(2*H+1)/3,(-Math.sqrt(3)*W-H+1)/3,(Math.sqrt(3)*W-H+1)/3]}var us,_s=function(N,W,H,C,G,Q,oe,de,Ae,De){var je=G.transform;return{u_is_size_zoom_constant:+("constant"===N||"source"===N),u_is_size_feature_constant:+("constant"===N||"camera"===N),u_size_t:W?W.uSizeT:0,u_size:W?W.uSize:0,u_camera_to_center_distance:je.cameraToCenterDistance,u_pitch:je.pitch/360*2*Math.PI,u_rotate_symbol:+H,u_aspect_ratio:je.width/je.height,u_fade_change:G.options.fadeDuration?G.symbolFadeChange:1,u_matrix:Q,u_label_plane_matrix:oe,u_coord_matrix:de,u_is_text:+Ae,u_pitch_with_map:+C,u_texsize:De,u_texture:0}},js=function(N,W,H,C,G,Q,oe,de,Ae,De,je){var Ye=G.transform;return o.extend(_s(N,W,H,C,G,Q,oe,de,Ae,De),{u_gamma_scale:C?Math.cos(Ye._pitch)*Ye.cameraToCenterDistance:1,u_device_pixel_ratio:o.browser.devicePixelRatio,u_is_halo:+je})},mi=function(N,W,H,C,G,Q,oe,de,Ae,De){return o.extend(js(N,W,H,C,G,Q,oe,de,!0,Ae,!0),{u_texsize_icon:De,u_texture_icon:1})},Zo=function(N,W,H){return{u_matrix:N,u_opacity:W,u_color:H}},Tu=function(N,W,H,C,G,Q){return o.extend((de=Q,De=G,je=(Ae=H).imageManager.getPattern((oe=C).from.toString()),Ye=Ae.imageManager.getPattern(oe.to.toString()),st=(Ke=Ae.imageManager.getPixelSize()).width,mt=Ke.height,xt=Math.pow(2,De.tileID.overscaledZ),Dt=(Et=De.tileSize*Math.pow(2,Ae.transform.tileZoom)/xt)*(De.tileID.canonical.x+De.tileID.wrap*xt),It=Et*De.tileID.canonical.y,{u_image:0,u_pattern_tl_a:je.tl,u_pattern_br_a:je.br,u_pattern_tl_b:Ye.tl,u_pattern_br_b:Ye.br,u_texsize:[st,mt],u_mix:de.t,u_pattern_size_a:je.displaySize,u_pattern_size_b:Ye.displaySize,u_scale_a:de.fromScale,u_scale_b:de.toScale,u_tile_units_to_pixels:1/nr(De,1,Ae.transform.tileZoom),u_pixel_coord_upper:[Dt>>16,It>>16],u_pixel_coord_lower:[65535&Dt,65535&It]}),{u_matrix:N,u_opacity:W});var oe,de,Ae,De,je,Ye,Ke,st,mt,xt,Et,Dt,It},Kl={fillExtrusion:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_lightpos:new o.Uniform3f(N,W.u_lightpos),u_lightintensity:new o.Uniform1f(N,W.u_lightintensity),u_lightcolor:new o.Uniform3f(N,W.u_lightcolor),u_vertical_gradient:new o.Uniform1f(N,W.u_vertical_gradient),u_opacity:new o.Uniform1f(N,W.u_opacity)}},fillExtrusionPattern:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_lightpos:new o.Uniform3f(N,W.u_lightpos),u_lightintensity:new o.Uniform1f(N,W.u_lightintensity),u_lightcolor:new o.Uniform3f(N,W.u_lightcolor),u_vertical_gradient:new o.Uniform1f(N,W.u_vertical_gradient),u_height_factor:new o.Uniform1f(N,W.u_height_factor),u_image:new o.Uniform1i(N,W.u_image),u_texsize:new o.Uniform2f(N,W.u_texsize),u_pixel_coord_upper:new o.Uniform2f(N,W.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(N,W.u_pixel_coord_lower),u_scale:new o.Uniform3f(N,W.u_scale),u_fade:new o.Uniform1f(N,W.u_fade),u_opacity:new o.Uniform1f(N,W.u_opacity)}},fill:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix)}},fillPattern:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_image:new o.Uniform1i(N,W.u_image),u_texsize:new o.Uniform2f(N,W.u_texsize),u_pixel_coord_upper:new o.Uniform2f(N,W.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(N,W.u_pixel_coord_lower),u_scale:new o.Uniform3f(N,W.u_scale),u_fade:new o.Uniform1f(N,W.u_fade)}},fillOutline:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_world:new o.Uniform2f(N,W.u_world)}},fillOutlinePattern:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_world:new o.Uniform2f(N,W.u_world),u_image:new o.Uniform1i(N,W.u_image),u_texsize:new o.Uniform2f(N,W.u_texsize),u_pixel_coord_upper:new o.Uniform2f(N,W.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(N,W.u_pixel_coord_lower),u_scale:new o.Uniform3f(N,W.u_scale),u_fade:new o.Uniform1f(N,W.u_fade)}},circle:function(N,W){return{u_camera_to_center_distance:new o.Uniform1f(N,W.u_camera_to_center_distance),u_scale_with_map:new o.Uniform1i(N,W.u_scale_with_map),u_pitch_with_map:new o.Uniform1i(N,W.u_pitch_with_map),u_extrude_scale:new o.Uniform2f(N,W.u_extrude_scale),u_device_pixel_ratio:new o.Uniform1f(N,W.u_device_pixel_ratio),u_matrix:new o.UniformMatrix4f(N,W.u_matrix)}},collisionBox:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_camera_to_center_distance:new o.Uniform1f(N,W.u_camera_to_center_distance),u_pixels_to_tile_units:new o.Uniform1f(N,W.u_pixels_to_tile_units),u_extrude_scale:new o.Uniform2f(N,W.u_extrude_scale),u_overscale_factor:new o.Uniform1f(N,W.u_overscale_factor)}},collisionCircle:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_inv_matrix:new o.UniformMatrix4f(N,W.u_inv_matrix),u_camera_to_center_distance:new o.Uniform1f(N,W.u_camera_to_center_distance),u_viewport_size:new o.Uniform2f(N,W.u_viewport_size)}},debug:function(N,W){return{u_color:new o.UniformColor(N,W.u_color),u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_overlay:new o.Uniform1i(N,W.u_overlay),u_overlay_scale:new o.Uniform1f(N,W.u_overlay_scale)}},clippingMask:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix)}},heatmap:function(N,W){return{u_extrude_scale:new o.Uniform1f(N,W.u_extrude_scale),u_intensity:new o.Uniform1f(N,W.u_intensity),u_matrix:new o.UniformMatrix4f(N,W.u_matrix)}},heatmapTexture:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_world:new o.Uniform2f(N,W.u_world),u_image:new o.Uniform1i(N,W.u_image),u_color_ramp:new o.Uniform1i(N,W.u_color_ramp),u_opacity:new o.Uniform1f(N,W.u_opacity)}},hillshade:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_image:new o.Uniform1i(N,W.u_image),u_latrange:new o.Uniform2f(N,W.u_latrange),u_light:new o.Uniform2f(N,W.u_light),u_shadow:new o.UniformColor(N,W.u_shadow),u_highlight:new o.UniformColor(N,W.u_highlight),u_accent:new o.UniformColor(N,W.u_accent)}},hillshadePrepare:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_image:new o.Uniform1i(N,W.u_image),u_dimension:new o.Uniform2f(N,W.u_dimension),u_zoom:new o.Uniform1f(N,W.u_zoom),u_unpack:new o.Uniform4f(N,W.u_unpack)}},line:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_ratio:new o.Uniform1f(N,W.u_ratio),u_device_pixel_ratio:new o.Uniform1f(N,W.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(N,W.u_units_to_pixels)}},lineGradient:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_ratio:new o.Uniform1f(N,W.u_ratio),u_device_pixel_ratio:new o.Uniform1f(N,W.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(N,W.u_units_to_pixels),u_image:new o.Uniform1i(N,W.u_image),u_image_height:new o.Uniform1f(N,W.u_image_height)}},linePattern:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_texsize:new o.Uniform2f(N,W.u_texsize),u_ratio:new o.Uniform1f(N,W.u_ratio),u_device_pixel_ratio:new o.Uniform1f(N,W.u_device_pixel_ratio),u_image:new o.Uniform1i(N,W.u_image),u_units_to_pixels:new o.Uniform2f(N,W.u_units_to_pixels),u_scale:new o.Uniform3f(N,W.u_scale),u_fade:new o.Uniform1f(N,W.u_fade)}},lineSDF:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_ratio:new o.Uniform1f(N,W.u_ratio),u_device_pixel_ratio:new o.Uniform1f(N,W.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(N,W.u_units_to_pixels),u_patternscale_a:new o.Uniform2f(N,W.u_patternscale_a),u_patternscale_b:new o.Uniform2f(N,W.u_patternscale_b),u_sdfgamma:new o.Uniform1f(N,W.u_sdfgamma),u_image:new o.Uniform1i(N,W.u_image),u_tex_y_a:new o.Uniform1f(N,W.u_tex_y_a),u_tex_y_b:new o.Uniform1f(N,W.u_tex_y_b),u_mix:new o.Uniform1f(N,W.u_mix)}},raster:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_tl_parent:new o.Uniform2f(N,W.u_tl_parent),u_scale_parent:new o.Uniform1f(N,W.u_scale_parent),u_buffer_scale:new o.Uniform1f(N,W.u_buffer_scale),u_fade_t:new o.Uniform1f(N,W.u_fade_t),u_opacity:new o.Uniform1f(N,W.u_opacity),u_image0:new o.Uniform1i(N,W.u_image0),u_image1:new o.Uniform1i(N,W.u_image1),u_brightness_low:new o.Uniform1f(N,W.u_brightness_low),u_brightness_high:new o.Uniform1f(N,W.u_brightness_high),u_saturation_factor:new o.Uniform1f(N,W.u_saturation_factor),u_contrast_factor:new o.Uniform1f(N,W.u_contrast_factor),u_spin_weights:new o.Uniform3f(N,W.u_spin_weights)}},symbolIcon:function(N,W){return{u_is_size_zoom_constant:new o.Uniform1i(N,W.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(N,W.u_is_size_feature_constant),u_size_t:new o.Uniform1f(N,W.u_size_t),u_size:new o.Uniform1f(N,W.u_size),u_camera_to_center_distance:new o.Uniform1f(N,W.u_camera_to_center_distance),u_pitch:new o.Uniform1f(N,W.u_pitch),u_rotate_symbol:new o.Uniform1i(N,W.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(N,W.u_aspect_ratio),u_fade_change:new o.Uniform1f(N,W.u_fade_change),u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(N,W.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(N,W.u_coord_matrix),u_is_text:new o.Uniform1i(N,W.u_is_text),u_pitch_with_map:new o.Uniform1i(N,W.u_pitch_with_map),u_texsize:new o.Uniform2f(N,W.u_texsize),u_texture:new o.Uniform1i(N,W.u_texture)}},symbolSDF:function(N,W){return{u_is_size_zoom_constant:new o.Uniform1i(N,W.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(N,W.u_is_size_feature_constant),u_size_t:new o.Uniform1f(N,W.u_size_t),u_size:new o.Uniform1f(N,W.u_size),u_camera_to_center_distance:new o.Uniform1f(N,W.u_camera_to_center_distance),u_pitch:new o.Uniform1f(N,W.u_pitch),u_rotate_symbol:new o.Uniform1i(N,W.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(N,W.u_aspect_ratio),u_fade_change:new o.Uniform1f(N,W.u_fade_change),u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(N,W.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(N,W.u_coord_matrix),u_is_text:new o.Uniform1i(N,W.u_is_text),u_pitch_with_map:new o.Uniform1i(N,W.u_pitch_with_map),u_texsize:new o.Uniform2f(N,W.u_texsize),u_texture:new o.Uniform1i(N,W.u_texture),u_gamma_scale:new o.Uniform1f(N,W.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(N,W.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(N,W.u_is_halo)}},symbolTextAndIcon:function(N,W){return{u_is_size_zoom_constant:new o.Uniform1i(N,W.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(N,W.u_is_size_feature_constant),u_size_t:new o.Uniform1f(N,W.u_size_t),u_size:new o.Uniform1f(N,W.u_size),u_camera_to_center_distance:new o.Uniform1f(N,W.u_camera_to_center_distance),u_pitch:new o.Uniform1f(N,W.u_pitch),u_rotate_symbol:new o.Uniform1i(N,W.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(N,W.u_aspect_ratio),u_fade_change:new o.Uniform1f(N,W.u_fade_change),u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(N,W.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(N,W.u_coord_matrix),u_is_text:new o.Uniform1i(N,W.u_is_text),u_pitch_with_map:new o.Uniform1i(N,W.u_pitch_with_map),u_texsize:new o.Uniform2f(N,W.u_texsize),u_texsize_icon:new o.Uniform2f(N,W.u_texsize_icon),u_texture:new o.Uniform1i(N,W.u_texture),u_texture_icon:new o.Uniform1i(N,W.u_texture_icon),u_gamma_scale:new o.Uniform1f(N,W.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(N,W.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(N,W.u_is_halo)}},background:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_opacity:new o.Uniform1f(N,W.u_opacity),u_color:new o.UniformColor(N,W.u_color)}},backgroundPattern:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_opacity:new o.Uniform1f(N,W.u_opacity),u_image:new o.Uniform1i(N,W.u_image),u_pattern_tl_a:new o.Uniform2f(N,W.u_pattern_tl_a),u_pattern_br_a:new o.Uniform2f(N,W.u_pattern_br_a),u_pattern_tl_b:new o.Uniform2f(N,W.u_pattern_tl_b),u_pattern_br_b:new o.Uniform2f(N,W.u_pattern_br_b),u_texsize:new o.Uniform2f(N,W.u_texsize),u_mix:new o.Uniform1f(N,W.u_mix),u_pattern_size_a:new o.Uniform2f(N,W.u_pattern_size_a),u_pattern_size_b:new o.Uniform2f(N,W.u_pattern_size_b),u_scale_a:new o.Uniform1f(N,W.u_scale_a),u_scale_b:new o.Uniform1f(N,W.u_scale_b),u_pixel_coord_upper:new o.Uniform2f(N,W.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(N,W.u_pixel_coord_lower),u_tile_units_to_pixels:new o.Uniform1f(N,W.u_tile_units_to_pixels)}}};function Ll(N,W,H,C,G,Q,oe){for(var de=N.context,Ae=de.gl,De=N.useProgram("collisionBox"),je=[],Ye=0,Ke=0,st=0;st<C.length;st++){var mt=C[st],xt=W.getTile(mt),Et=xt.getBucket(H);if(Et){var Dt=mt.posMatrix;0===G[0]&&0===G[1]||(Dt=N.translatePosMatrix(mt.posMatrix,xt,G,Q));var It=oe?Et.textCollisionBox:Et.iconCollisionBox,qt=Et.collisionCircleArray;if(qt.length>0){var Ft=o.create(),on=Dt;o.mul(Ft,Et.placementInvProjMatrix,N.transform.glCoordMatrix),o.mul(Ft,Ft,Et.placementViewportMatrix),je.push({circleArray:qt,circleOffset:Ke,transform:on,invTransform:Ft}),Ke=Ye+=qt.length/4}It&&De.draw(de,Ae.LINES,Ut.disabled,Je.disabled,N.colorModeForRenderPass(),qe.disabled,xs(Dt,N.transform,xt),H.id,It.layoutVertexBuffer,It.indexBuffer,It.segments,null,N.transform.zoom,null,null,It.collisionVertexBuffer)}}if(oe&&je.length){var Qt=N.useProgram("collisionCircle"),Kt=new o.StructArrayLayout2f1f2i16;Kt.resize(4*Ye),Kt._trim();for(var kn=0,En=0,Bn=je;En<Bn.length;En+=1)for(var qn=Bn[En],er=0;er<qn.circleArray.length/4;er++){var gr=4*er,wr=qn.circleArray[gr+0],sr=qn.circleArray[gr+1],_r=qn.circleArray[gr+2],Dr=qn.circleArray[gr+3];Kt.emplace(kn++,wr,sr,_r,Dr,0),Kt.emplace(kn++,wr,sr,_r,Dr,1),Kt.emplace(kn++,wr,sr,_r,Dr,2),Kt.emplace(kn++,wr,sr,_r,Dr,3)}(!us||us.length<2*Ye)&&(us=function($r){var si=2*$r,li=new o.StructArrayLayout3ui6;li.resize(si),li._trim();for(var pi=0;pi<si;pi++){var _i=6*pi;li.uint16[_i+0]=4*pi+0,li.uint16[_i+1]=4*pi+1,li.uint16[_i+2]=4*pi+2,li.uint16[_i+3]=4*pi+2,li.uint16[_i+4]=4*pi+3,li.uint16[_i+5]=4*pi+0}return li}(Ye));for(var Wr=de.createIndexBuffer(us,!0),mr=de.createVertexBuffer(Kt,o.collisionCircleLayout.members,!0),br=0,jr=je;br<jr.length;br+=1){var Mr=jr[br],Gr=ss(Mr.transform,Mr.invTransform,N.transform);Qt.draw(de,Ae.TRIANGLES,Ut.disabled,Je.disabled,N.colorModeForRenderPass(),qe.disabled,Gr,H.id,mr,Wr,o.SegmentVector.simpleSegment(0,2*Mr.circleOffset,Mr.circleArray.length,Mr.circleArray.length/2),null,N.transform.zoom,null,null,null)}mr.destroy(),Wr.destroy()}}var Jl=o.identity(new Float32Array(16));function ol(N,W,H,C,G,Q){var oe=o.getAnchorAlignment(N),de=-(oe.horizontalAlign-.5)*W,Ae=-(oe.verticalAlign-.5)*H,De=o.evaluateVariableOffset(N,C);return new o.Point((de/G+De[0])*Q,(Ae/G+De[1])*Q)}function ku(N,W,H,C,G,Q,oe,de,Ae,De,je){var Ye=N.text.placedSymbolArray,Ke=N.text.dynamicLayoutVertexArray,st=N.icon.dynamicLayoutVertexArray,mt={};Ke.clear();for(var xt=0;xt<Ye.length;xt++){var Et=Ye.get(xt),It=Et.hidden||!Et.crossTileID||N.allowVerticalPlacement&&!Et.placedOrientation?null:C[Et.crossTileID];if(It){var qt=new o.Point(Et.anchorX,Et.anchorY),Ft=cn(qt,H?de:oe),on=bn(Q.cameraToCenterDistance,Ft.signedDistanceFromCamera),Qt=G.evaluateSizeForFeature(N.textSizeData,De,Et)*on/o.ONE_EM;H&&(Qt*=N.tilePixelRatio/Ae);for(var En=ol(It.anchor,It.width,It.height,It.textOffset,It.textBoxScale,Qt),Bn=H?cn(qt.add(En),oe).point:Ft.point.add(W?En.rotate(-Q.angle):En),qn=N.allowVerticalPlacement&&Et.placedOrientation===o.WritingMode.vertical?Math.PI/2:0,er=0;er<Et.numGlyphs;er++)o.addDynamicAttributes(Ke,Bn,qn);je&&Et.associatedIconIndex>=0&&(mt[Et.associatedIconIndex]={shiftedAnchor:Bn,angle:qn})}else Zn(Et.numGlyphs,Ke)}if(je){st.clear();for(var gr=N.icon.placedSymbolArray,wr=0;wr<gr.length;wr++){var sr=gr.get(wr);if(sr.hidden)Zn(sr.numGlyphs,st);else{var _r=mt[wr];if(_r)for(var Dr=0;Dr<sr.numGlyphs;Dr++)o.addDynamicAttributes(st,_r.shiftedAnchor,_r.angle);else Zn(sr.numGlyphs,st)}}N.icon.dynamicLayoutVertexBuffer.updateData(st)}N.text.dynamicLayoutVertexBuffer.updateData(Ke)}function Au(N,W,H){return H.iconsInText&&W?"symbolTextAndIcon":N?"symbolSDF":"symbolIcon"}function Po(N,W,H,C,G,Q,oe,de,Ae,De,je,Ye){for(var Ke=N.context,st=Ke.gl,mt=N.transform,xt="map"===de,Et="map"===Ae,Dt=xt&&"point"!==H.layout.get("symbol-placement"),It=xt&&!Et&&!Dt,qt=void 0!==H.layout.get("symbol-sort-key").constantOr(1),Ft=!1,on=N.depthModeForSublayer(0,Ut.ReadOnly),Qt=H.layout.get("text-variable-anchor"),Kt=[],kn=0,En=C;kn<En.length;kn+=1){var Bn=En[kn],qn=W.getTile(Bn),er=qn.getBucket(H);if(er){var gr=G?er.text:er.icon;if(gr&&gr.segments.get().length){var wr=gr.programConfigurations.get(H.id),sr=G||er.sdfIcons,_r=G?er.textSizeData:er.iconSizeData,Dr=Et||0!==mt.pitch,Wr=N.useProgram(Au(sr,G,er),wr),mr=o.evaluateSizeForZoom(_r,mt.zoom),br=void 0,jr=[0,0],Mr=void 0,Gr=void 0,$r=null,si=void 0;if(G)Mr=qn.glyphAtlasTexture,Gr=st.LINEAR,br=qn.glyphAtlasTexture.size,er.iconsInText&&(jr=qn.imageAtlasTexture.size,$r=qn.imageAtlasTexture,si=Dr||N.options.rotating||N.options.zooming||"composite"===_r.kind||"camera"===_r.kind?st.LINEAR:st.NEAREST);else{var pi=1!==H.layout.get("icon-size").constantOr(0)||er.iconsNeedLinear;Mr=qn.imageAtlasTexture,Gr=sr||N.options.rotating||N.options.zooming||pi||Dr?st.LINEAR:st.NEAREST,br=qn.imageAtlasTexture.size}var _i=nr(qn,1,N.transform.zoom),na=Dn(Bn.posMatrix,Et,xt,N.transform,_i),ga=An(Bn.posMatrix,Et,xt,N.transform,_i),Ua=Qt&&er.hasTextData(),Fa="none"!==H.layout.get("icon-text-fit")&&Ua&&er.hasIconData();Dt&&wn(er,Bn.posMatrix,N,G,na,ga,Et,De);var aa=N.translatePosMatrix(Bn.posMatrix,qn,Q,oe),Ni=Dt||G&&Qt||Fa?Jl:na,wi=N.translatePosMatrix(ga,qn,Q,oe,!0),ra=sr&&0!==H.paint.get(G?"text-halo-width":"icon-halo-width").constantOr(1),Yi={program:Wr,buffers:gr,uniformValues:sr?er.iconsInText?mi(_r.kind,mr,It,Et,N,aa,Ni,wi,br,jr):js(_r.kind,mr,It,Et,N,aa,Ni,wi,G,br,!0):_s(_r.kind,mr,It,Et,N,aa,Ni,wi,G,br),atlasTexture:Mr,atlasTextureIcon:$r,atlasInterpolation:Gr,atlasInterpolationIcon:si,isSDF:sr,hasHalo:ra};if(qt&&er.canOverlap){Ft=!0;for(var Si=0,ua=gr.segments.get();Si<ua.length;Si+=1){var ia=ua[Si];Kt.push({segments:new o.SegmentVector([ia]),sortKey:ia.sortKey,state:Yi})}}else Kt.push({segments:gr.segments,sortKey:0,state:Yi})}}}Ft&&Kt.sort(function(Fl,gs){return Fl.sortKey-gs.sortKey});for(var Ca=0,Is=Kt;Ca<Is.length;Ca+=1){var Dl=Is[Ca],Ti=Dl.state;if(Ke.activeTexture.set(st.TEXTURE0),Ti.atlasTexture.bind(Ti.atlasInterpolation,st.CLAMP_TO_EDGE),Ti.atlasTextureIcon&&(Ke.activeTexture.set(st.TEXTURE1),Ti.atlasTextureIcon&&Ti.atlasTextureIcon.bind(Ti.atlasInterpolationIcon,st.CLAMP_TO_EDGE)),Ti.isSDF){var zl=Ti.uniformValues;Ti.hasHalo&&(zl.u_is_halo=1,_l(Ti.buffers,Dl.segments,H,N,Ti.program,on,je,Ye,zl)),zl.u_is_halo=0}_l(Ti.buffers,Dl.segments,H,N,Ti.program,on,je,Ye,Ti.uniformValues)}}function _l(N,W,H,C,G,Q,oe,de,Ae){var De=C.context;G.draw(De,De.gl.TRIANGLES,Q,oe,de,qe.disabled,Ae,H.id,N.layoutVertexBuffer,N.indexBuffer,W,H.paint,C.transform.zoom,N.programConfigurations.get(H.id),N.dynamicLayoutVertexBuffer,N.opacityVertexBuffer)}function Ea(N,W,H,C,G,Q,oe){var de,Ae,De,je,Ye,Ke=N.context.gl,st=H.paint.get("fill-pattern"),mt=st&&st.constantOr(1),xt=H.getCrossfadeParameters();oe?(Ae=mt&&!H.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",de=Ke.LINES):(Ae=mt?"fillPattern":"fill",de=Ke.TRIANGLES);for(var Et=0,Dt=C;Et<Dt.length;Et+=1){var It=Dt[Et],qt=W.getTile(It);if(!mt||qt.patternsLoaded()){var Ft=qt.getBucket(H);if(Ft){var on=Ft.programConfigurations.get(H.id),Qt=N.useProgram(Ae,on);mt&&(N.context.activeTexture.set(Ke.TEXTURE0),qt.imageAtlasTexture.bind(Ke.LINEAR,Ke.CLAMP_TO_EDGE),on.updatePaintBuffers(xt));var Kt=st.constantOr(null);if(Kt&&qt.imageAtlas){var kn=qt.imageAtlas,En=kn.patternPositions[Kt.to.toString()],Bn=kn.patternPositions[Kt.from.toString()];En&&Bn&&on.setConstantPatternPositions(En,Bn)}var qn=N.translatePosMatrix(It.posMatrix,qt,H.paint.get("fill-translate"),H.paint.get("fill-translate-anchor"));if(oe){je=Ft.indexBuffer2,Ye=Ft.segments2;var er=[Ke.drawingBufferWidth,Ke.drawingBufferHeight];De="fillOutlinePattern"===Ae&&mt?_u(qn,N,xt,qt,er):ys(qn,er)}else je=Ft.indexBuffer,Ye=Ft.segments,De=mt?Ns(qn,N,xt,qt):va(qn);Qt.draw(N.context,de,G,N.stencilModeForClipping(It),Q,qe.disabled,De,H.id,Ft.layoutVertexBuffer,je,Ye,H.paint,N.transform.zoom,on)}}}}function cs(N,W,H,C,G,Q,oe){for(var de=N.context,Ae=de.gl,De=H.paint.get("fill-extrusion-pattern"),je=De.constantOr(1),Ye=H.getCrossfadeParameters(),Ke=H.paint.get("fill-extrusion-opacity"),st=0,mt=C;st<mt.length;st+=1){var xt=mt[st],Et=W.getTile(xt),Dt=Et.getBucket(H);if(Dt){var It=Dt.programConfigurations.get(H.id),qt=N.useProgram(je?"fillExtrusionPattern":"fillExtrusion",It);je&&(N.context.activeTexture.set(Ae.TEXTURE0),Et.imageAtlasTexture.bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE),It.updatePaintBuffers(Ye));var Ft=De.constantOr(null);if(Ft&&Et.imageAtlas){var on=Et.imageAtlas,Qt=on.patternPositions[Ft.to.toString()],Kt=on.patternPositions[Ft.from.toString()];Qt&&Kt&&It.setConstantPatternPositions(Qt,Kt)}var kn=N.translatePosMatrix(xt.posMatrix,Et,H.paint.get("fill-extrusion-translate"),H.paint.get("fill-extrusion-translate-anchor")),En=H.paint.get("fill-extrusion-vertical-gradient"),Bn=je?nl(kn,N,En,Ke,xt,Ye,Et):qo(kn,N,En,Ke);qt.draw(de,de.gl.TRIANGLES,G,Q,oe,qe.backCCW,Bn,H.id,Dt.layoutVertexBuffer,Dt.indexBuffer,Dt.segments,H.paint,N.transform.zoom,It)}}}function Il(N,W,H,C,G,Q){var oe=N.context,de=oe.gl,Ae=W.fbo;if(Ae){var De=N.useProgram("hillshade");oe.activeTexture.set(de.TEXTURE0),de.bindTexture(de.TEXTURE_2D,Ae.colorAttachment.get());var je=function(N,W,H){var C=H.paint.get("hillshade-shadow-color"),G=H.paint.get("hillshade-highlight-color"),Q=H.paint.get("hillshade-accent-color"),oe=H.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===H.paint.get("hillshade-illumination-anchor")&&(oe-=N.transform.angle);var de,Ae,De,je=!N.options.moving;return{u_matrix:N.transform.calculatePosMatrix(W.tileID.toUnwrapped(),je),u_image:0,u_latrange:(de=W.tileID,Ae=Math.pow(2,de.canonical.z),De=de.canonical.y,[new o.MercatorCoordinate(0,De/Ae).toLngLat().lat,new o.MercatorCoordinate(0,(De+1)/Ae).toLngLat().lat]),u_light:[H.paint.get("hillshade-exaggeration"),oe],u_shadow:C,u_highlight:G,u_accent:Q}}(N,W,H);De.draw(oe,de.TRIANGLES,C,G,Q,qe.disabled,je,H.id,N.rasterBoundsBuffer,N.quadTriangleIndexBuffer,N.rasterBoundsSegments)}}function tc(N,W,H,C,G,Q){var oe=N.context,de=oe.gl,Ae=W.dem;if(Ae&&Ae.data){var De=Ae.dim,je=Ae.stride,Ye=Ae.getPixels();if(oe.activeTexture.set(de.TEXTURE1),oe.pixelStoreUnpackPremultiplyAlpha.set(!1),W.demTexture=W.demTexture||N.getTileTexture(je),W.demTexture){var Ke=W.demTexture;Ke.update(Ye,{premultiply:!1}),Ke.bind(de.NEAREST,de.CLAMP_TO_EDGE)}else W.demTexture=new o.Texture(oe,Ye,de.RGBA,{premultiply:!1}),W.demTexture.bind(de.NEAREST,de.CLAMP_TO_EDGE);oe.activeTexture.set(de.TEXTURE0);var st=W.fbo;if(!st){var mt=new o.Texture(oe,{width:De,height:De,data:null},de.RGBA);mt.bind(de.LINEAR,de.CLAMP_TO_EDGE),(st=W.fbo=oe.createFramebuffer(De,De,!0)).colorAttachment.set(mt.texture)}oe.bindFramebuffer.set(st.framebuffer),oe.viewport.set([0,0,De,De]),N.useProgram("hillshadePrepare").draw(oe,de.TRIANGLES,C,G,Q,qe.disabled,function(N,W){var H=W.stride,C=o.create();return o.ortho(C,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(C,C,[0,-o.EXTENT,0]),{u_matrix:C,u_image:1,u_dimension:[H,H],u_zoom:N.overscaledZ,u_unpack:W.getUnpackVector()}}(W.tileID,Ae),H.id,N.rasterBoundsBuffer,N.quadTriangleIndexBuffer,N.rasterBoundsSegments),W.needsHillshadePrepare=!1}}function $l(N,W,H,C,G){var Q=C.paint.get("raster-fade-duration");if(Q>0){var oe=o.browser.now(),de=(oe-N.timeAdded)/Q,Ae=W?(oe-W.timeAdded)/Q:-1,De=H.getSource(),je=G.coveringZoomLevel({tileSize:De.tileSize,roundZoom:De.roundZoom}),Ye=!W||Math.abs(W.tileID.overscaledZ-je)>Math.abs(N.tileID.overscaledZ-je),Ke=Ye&&N.refreshedUponExpiration?1:o.clamp(Ye?de:1-Ae,0,1);return N.refreshedUponExpiration&&de>=1&&(N.refreshedUponExpiration=!1),W?{opacity:1,mix:1-Ke}:{opacity:Ke,mix:0}}return{opacity:1,mix:0}}var ws=new o.Color(1,0,0,1),Oo=new o.Color(0,1,0,1),Mu=new o.Color(0,0,1,1),Ql=new o.Color(1,0,1,1),wl=new o.Color(0,1,1,1);function sl(N,W,H,C){ul(N,0,W+H/2,N.transform.width,H,C)}function ll(N,W,H,C){ul(N,W-H/2,0,H,N.transform.height,C)}function ul(N,W,H,C,G,Q){var oe=N.context,de=oe.gl;de.enable(de.SCISSOR_TEST),de.scissor(W*o.browser.devicePixelRatio,H*o.browser.devicePixelRatio,C*o.browser.devicePixelRatio,G*o.browser.devicePixelRatio),oe.clear({color:Q}),de.disable(de.SCISSOR_TEST)}function Pl(N,W,H){var C=N.context,G=C.gl,Q=H.posMatrix,oe=N.useProgram("debug"),de=Ut.disabled,Ae=Je.disabled,De=N.colorModeForRenderPass();C.activeTexture.set(G.TEXTURE0),N.emptyTexture.bind(G.LINEAR,G.CLAMP_TO_EDGE),oe.draw(C,G.LINE_STRIP,de,Ae,De,qe.disabled,Vu(Q,o.Color.red),"$debug",N.debugBuffer,N.tileBorderIndexBuffer,N.debugSegments);var Ye=W.getTileByID(H.key).latestRawTileData,st=Math.floor((Ye&&Ye.byteLength||0)/1024),mt=W.getTile(H).tileSize,xt=512/Math.min(mt,512)*(H.overscaledZ/N.transform.zoom)*.5,Et=H.canonical.toString();H.overscaledZ!==H.canonical.z&&(Et+=" => "+H.overscaledZ),function(Dt,It){Dt.initDebugOverlayCanvas();var qt=Dt.debugOverlayCanvas,Ft=Dt.context.gl,on=Dt.debugOverlayCanvas.getContext("2d");on.clearRect(0,0,qt.width,qt.height),on.shadowColor="white",on.shadowBlur=2,on.lineWidth=1.5,on.strokeStyle="white",on.textBaseline="top",on.font="bold 36px Open Sans, sans-serif",on.fillText(It,5,5),on.strokeText(It,5,5),Dt.debugOverlayTexture.update(qt),Dt.debugOverlayTexture.bind(Ft.LINEAR,Ft.CLAMP_TO_EDGE)}(N,Et+" "+st+"kb"),oe.draw(C,G.TRIANGLES,de,Ae,et.alphaBlended,qe.disabled,Vu(Q,o.Color.transparent,xt),"$debug",N.debugBuffer,N.quadTriangleIndexBuffer,N.debugSegments)}var eu={symbol:function(N,W,H,C,G){if("translucent"===N.renderPass){var Q=Je.disabled,oe=N.colorModeForRenderPass();H.layout.get("text-variable-anchor")&&function(de,Ae,De,je,Ye,Ke,st){for(var mt=Ae.transform,xt="map"===Ye,Et="map"===Ke,Dt=0,It=de;Dt<It.length;Dt+=1){var qt=It[Dt],Ft=je.getTile(qt),on=Ft.getBucket(De);if(on&&on.text&&on.text.segments.get().length){var Kt=o.evaluateSizeForZoom(on.textSizeData,mt.zoom),kn=nr(Ft,1,Ae.transform.zoom),En=Dn(qt.posMatrix,Et,xt,Ae.transform,kn),Bn="none"!==De.layout.get("icon-text-fit")&&on.hasIconData();if(Kt){var qn=Math.pow(2,mt.zoom-Ft.tileID.overscaledZ);ku(on,xt,Et,st,o.symbolSize,mt,En,qt.posMatrix,qn,Kt,Bn)}}}}(C,N,H,W,H.layout.get("text-rotation-alignment"),H.layout.get("text-pitch-alignment"),G),0!==H.paint.get("icon-opacity").constantOr(1)&&Po(N,W,H,C,!1,H.paint.get("icon-translate"),H.paint.get("icon-translate-anchor"),H.layout.get("icon-rotation-alignment"),H.layout.get("icon-pitch-alignment"),H.layout.get("icon-keep-upright"),Q,oe),0!==H.paint.get("text-opacity").constantOr(1)&&Po(N,W,H,C,!0,H.paint.get("text-translate"),H.paint.get("text-translate-anchor"),H.layout.get("text-rotation-alignment"),H.layout.get("text-pitch-alignment"),H.layout.get("text-keep-upright"),Q,oe),W.map.showCollisionBoxes&&(Ll(N,W,H,C,H.paint.get("text-translate"),H.paint.get("text-translate-anchor"),!0),Ll(N,W,H,C,H.paint.get("icon-translate"),H.paint.get("icon-translate-anchor"),!1))}},circle:function(N,W,H,C){if("translucent"===N.renderPass){var G=H.paint.get("circle-opacity"),Q=H.paint.get("circle-stroke-width"),oe=H.paint.get("circle-stroke-opacity"),de=void 0!==H.layout.get("circle-sort-key").constantOr(1);if(0!==G.constantOr(1)||0!==Q.constantOr(1)&&0!==oe.constantOr(1)){for(var Ae=N.context,De=Ae.gl,je=N.depthModeForSublayer(0,Ut.ReadOnly),Ye=Je.disabled,Ke=N.colorModeForRenderPass(),st=[],mt=0;mt<C.length;mt++){var xt=C[mt],Et=W.getTile(xt),Dt=Et.getBucket(H);if(Dt){var It=Dt.programConfigurations.get(H.id),qt={programConfiguration:It,program:N.useProgram("circle",It),layoutVertexBuffer:Dt.layoutVertexBuffer,indexBuffer:Dt.indexBuffer,uniformValues:wu(N,xt,Et,H)};if(de)for(var Ft=0,on=Dt.segments.get();Ft<on.length;Ft+=1){var Qt=on[Ft];st.push({segments:new o.SegmentVector([Qt]),sortKey:Qt.sortKey,state:qt})}else st.push({segments:Dt.segments,sortKey:0,state:qt})}}de&&st.sort(function(Dr,Wr){return Dr.sortKey-Wr.sortKey});for(var Kt=0,kn=st;Kt<kn.length;Kt+=1){var En=kn[Kt],Bn=En.state;Bn.program.draw(Ae,De.TRIANGLES,je,Ye,Ke,qe.disabled,Bn.uniformValues,H.id,Bn.layoutVertexBuffer,Bn.indexBuffer,En.segments,H.paint,N.transform.zoom,Bn.programConfiguration)}}}},heatmap:function(N,W,H,C){if(0!==H.paint.get("heatmap-opacity"))if("offscreen"===N.renderPass){var G=N.context,Q=G.gl,oe=Je.disabled,de=new et([Q.ONE,Q.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(xt,Et,Dt){var It=xt.gl;xt.activeTexture.set(It.TEXTURE1),xt.viewport.set([0,0,Et.width/4,Et.height/4]);var on,Qt,Kt,kn,En,qt=Dt.heatmapFbo;if(qt)It.bindTexture(It.TEXTURE_2D,qt.colorAttachment.get()),xt.bindFramebuffer.set(qt.framebuffer);else{var Ft=It.createTexture();It.bindTexture(It.TEXTURE_2D,Ft),It.texParameteri(It.TEXTURE_2D,It.TEXTURE_WRAP_S,It.CLAMP_TO_EDGE),It.texParameteri(It.TEXTURE_2D,It.TEXTURE_WRAP_T,It.CLAMP_TO_EDGE),It.texParameteri(It.TEXTURE_2D,It.TEXTURE_MIN_FILTER,It.LINEAR),It.texParameteri(It.TEXTURE_2D,It.TEXTURE_MAG_FILTER,It.LINEAR),Kt=Ft,kn=qt=Dt.heatmapFbo=xt.createFramebuffer(Et.width/4,Et.height/4,!1),(En=(on=xt).gl).texImage2D(En.TEXTURE_2D,0,En.RGBA,(Qt=Et).width/4,Qt.height/4,0,En.RGBA,on.extRenderToTextureHalfFloat?on.extTextureHalfFloat.HALF_FLOAT_OES:En.UNSIGNED_BYTE,null),kn.colorAttachment.set(Kt)}})(G,N,H),G.clear({color:o.Color.transparent});for(var Ae=0;Ae<C.length;Ae++){var De=C[Ae];if(!W.hasRenderableParent(De)){var je=W.getTile(De),Ye=je.getBucket(H);if(Ye){var Ke=Ye.programConfigurations.get(H.id);N.useProgram("heatmap",Ke).draw(G,Q.TRIANGLES,Ut.disabled,oe,de,qe.disabled,ec(De.posMatrix,je,N.transform.zoom,H.paint.get("heatmap-intensity")),H.id,Ye.layoutVertexBuffer,Ye.indexBuffer,Ye.segments,H.paint,N.transform.zoom,Ke)}}}G.viewport.set([0,0,N.width,N.height])}else"translucent"===N.renderPass&&(N.context.setColorMode(N.colorModeForRenderPass()),function(xt,Et){var Dt=xt.context,It=Dt.gl,qt=Et.heatmapFbo;if(qt){Dt.activeTexture.set(It.TEXTURE0),It.bindTexture(It.TEXTURE_2D,qt.colorAttachment.get()),Dt.activeTexture.set(It.TEXTURE1);var Ft=Et.colorRampTexture;Ft||(Ft=Et.colorRampTexture=new o.Texture(Dt,Et.colorRamp,It.RGBA)),Ft.bind(It.LINEAR,It.CLAMP_TO_EDGE),xt.useProgram("heatmapTexture").draw(Dt,It.TRIANGLES,Ut.disabled,Je.disabled,xt.colorModeForRenderPass(),qe.disabled,function(N,W,H,C){var G=o.create();o.ortho(G,0,N.width,N.height,0,0,1);var Q=N.context.gl;return{u_matrix:G,u_world:[Q.drawingBufferWidth,Q.drawingBufferHeight],u_image:H,u_color_ramp:C,u_opacity:W.paint.get("heatmap-opacity")}}(xt,Et,0,1),Et.id,xt.viewportBuffer,xt.quadTriangleIndexBuffer,xt.viewportSegments,Et.paint,xt.transform.zoom)}}(N,H))},line:function(N,W,H,C){if("translucent"===N.renderPass){var G=H.paint.get("line-opacity"),Q=H.paint.get("line-width");if(0!==G.constantOr(1)&&0!==Q.constantOr(1))for(var oe=N.depthModeForSublayer(0,Ut.ReadOnly),de=N.colorModeForRenderPass(),Ae=H.paint.get("line-dasharray"),De=H.paint.get("line-pattern"),je=De.constantOr(1),Ye=H.paint.get("line-gradient"),Ke=H.getCrossfadeParameters(),st=je?"linePattern":Ae?"lineSDF":Ye?"lineGradient":"line",mt=N.context,xt=mt.gl,Et=!0,Dt=0,It=C;Dt<It.length;Dt+=1){var qt=It[Dt],Ft=W.getTile(qt);if(!je||Ft.patternsLoaded()){var on=Ft.getBucket(H);if(on){var Qt=on.programConfigurations.get(H.id),Kt=N.context.program.get(),kn=N.useProgram(st,Qt),En=Et||kn.program!==Kt,Bn=De.constantOr(null);if(Bn&&Ft.imageAtlas){var qn=Ft.imageAtlas,er=qn.patternPositions[Bn.to.toString()],gr=qn.patternPositions[Bn.from.toString()];er&&gr&&Qt.setConstantPatternPositions(er,gr)}var wr=je?bs(N,Ft,H,Ke):Ae?il(N,Ft,H,Ae,Ke):Ye?bl(N,Ft,H,on.lineClipsArray.length):Wo(N,Ft,H);if(je)mt.activeTexture.set(xt.TEXTURE0),Ft.imageAtlasTexture.bind(xt.LINEAR,xt.CLAMP_TO_EDGE),Qt.updatePaintBuffers(Ke);else if(Ae&&(En||N.lineAtlas.dirty))mt.activeTexture.set(xt.TEXTURE0),N.lineAtlas.bind(mt);else if(Ye){var sr=on.gradients[H.id],_r=sr.texture;if(H.gradientVersion!==sr.version){var Dr=256;if(H.stepInterpolant){var Wr=W.getSource().maxzoom,mr=qt.canonical.z===Wr?Math.ceil(1<<N.transform.maxZoom-qt.canonical.z):1;Dr=o.clamp(o.nextPowerOfTwo(on.maxLineLength/o.EXTENT*1024*mr),256,mt.maxTextureSize)}sr.gradient=o.renderColorRamp({expression:H.gradientExpression(),evaluationKey:"lineProgress",resolution:Dr,image:sr.gradient||void 0,clips:on.lineClipsArray}),sr.texture?sr.texture.update(sr.gradient):sr.texture=new o.Texture(mt,sr.gradient,xt.RGBA),sr.version=H.gradientVersion,_r=sr.texture}mt.activeTexture.set(xt.TEXTURE0),_r.bind(H.stepInterpolant?xt.NEAREST:xt.LINEAR,xt.CLAMP_TO_EDGE)}kn.draw(mt,xt.TRIANGLES,oe,N.stencilModeForClipping(qt),de,qe.disabled,wr,H.id,on.layoutVertexBuffer,on.indexBuffer,on.segments,H.paint,N.transform.zoom,Qt,on.layoutVertexBuffer2),Et=!1}}}}},fill:function(N,W,H,C){var G=H.paint.get("fill-color"),Q=H.paint.get("fill-opacity");if(0!==Q.constantOr(1)){var oe=N.colorModeForRenderPass(),de=H.paint.get("fill-pattern"),Ae=N.opaquePassEnabledForLayer()&&!de.constantOr(1)&&1===G.constantOr(o.Color.transparent).a&&1===Q.constantOr(0)?"opaque":"translucent";if(N.renderPass===Ae){var De=N.depthModeForSublayer(1,"opaque"===N.renderPass?Ut.ReadWrite:Ut.ReadOnly);Ea(N,W,H,C,De,oe,!1)}if("translucent"===N.renderPass&&H.paint.get("fill-antialias")){var je=N.depthModeForSublayer(H.getPaintProperty("fill-outline-color")?2:0,Ut.ReadOnly);Ea(N,W,H,C,je,oe,!0)}}},"fill-extrusion":function(N,W,H,C){var G=H.paint.get("fill-extrusion-opacity");if(0!==G&&"translucent"===N.renderPass){var Q=new Ut(N.context.gl.LEQUAL,Ut.ReadWrite,N.depthRangeFor3D);if(1!==G||H.paint.get("fill-extrusion-pattern").constantOr(1))cs(N,W,H,C,Q,Je.disabled,et.disabled),cs(N,W,H,C,Q,N.stencilModeFor3D(),N.colorModeForRenderPass());else{var oe=N.colorModeForRenderPass();cs(N,W,H,C,Q,Je.disabled,oe)}}},hillshade:function(N,W,H,C){if("offscreen"===N.renderPass||"translucent"===N.renderPass){for(var G=N.context,Q=N.depthModeForSublayer(0,Ut.ReadOnly),oe=N.colorModeForRenderPass(),de="translucent"===N.renderPass?N.stencilConfigForOverlap(C):[{},C],Ae=de[0],De=0,je=de[1];De<je.length;De+=1){var Ye=je[De],Ke=W.getTile(Ye);Ke.needsHillshadePrepare&&"offscreen"===N.renderPass?tc(N,Ke,H,Q,Je.disabled,oe):"translucent"===N.renderPass&&Il(N,Ke,H,Q,Ae[Ye.overscaledZ],oe)}G.viewport.set([0,0,N.width,N.height])}},raster:function(N,W,H,C){if("translucent"===N.renderPass&&0!==H.paint.get("raster-opacity")&&C.length)for(var G=N.context,Q=G.gl,oe=W.getSource(),de=N.useProgram("raster"),Ae=N.colorModeForRenderPass(),De=oe instanceof B?[{},C]:N.stencilConfigForOverlap(C),je=De[0],Ye=De[1],Ke=Ye[Ye.length-1].overscaledZ,st=!N.options.moving,mt=0,xt=Ye;mt<xt.length;mt+=1){var Et=xt[mt],Dt=N.depthModeForSublayer(Et.overscaledZ-Ke,1===H.paint.get("raster-opacity")?Ut.ReadWrite:Ut.ReadOnly,Q.LESS),It=W.getTile(Et),qt=N.transform.calculatePosMatrix(Et.toUnwrapped(),st);It.registerFadeDuration(H.paint.get("raster-fade-duration"));var Ft=W.findLoadedParent(Et,0),on=$l(It,Ft,W,H,N.transform),Qt=void 0,Kt=void 0,kn="nearest"===H.paint.get("raster-resampling")?Q.NEAREST:Q.LINEAR;G.activeTexture.set(Q.TEXTURE0),It.texture.bind(kn,Q.CLAMP_TO_EDGE,Q.LINEAR_MIPMAP_NEAREST),G.activeTexture.set(Q.TEXTURE1),Ft?(Ft.texture.bind(kn,Q.CLAMP_TO_EDGE,Q.LINEAR_MIPMAP_NEAREST),Qt=Math.pow(2,Ft.tileID.overscaledZ-It.tileID.overscaledZ),Kt=[It.tileID.canonical.x*Qt%1,It.tileID.canonical.y*Qt%1]):It.texture.bind(kn,Q.CLAMP_TO_EDGE,Q.LINEAR_MIPMAP_NEAREST);var En=Xl(qt,Kt||[0,0],Qt||1,on,H);oe instanceof B?de.draw(G,Q.TRIANGLES,Dt,Je.disabled,Ae,qe.disabled,En,H.id,oe.boundsBuffer,N.quadTriangleIndexBuffer,oe.boundsSegments):de.draw(G,Q.TRIANGLES,Dt,je[Et.overscaledZ],Ae,qe.disabled,En,H.id,N.rasterBoundsBuffer,N.quadTriangleIndexBuffer,N.rasterBoundsSegments)}},background:function(N,W,H){var C=H.paint.get("background-color"),G=H.paint.get("background-opacity");if(0!==G){var Q=N.context,oe=Q.gl,de=N.transform,Ae=de.tileSize,De=H.paint.get("background-pattern");if(!N.isPatternMissing(De)){var je=!De&&1===C.a&&1===G&&N.opaquePassEnabledForLayer()?"opaque":"translucent";if(N.renderPass===je){var Ye=Je.disabled,Ke=N.depthModeForSublayer(0,"opaque"===je?Ut.ReadWrite:Ut.ReadOnly),st=N.colorModeForRenderPass(),mt=N.useProgram(De?"backgroundPattern":"background"),xt=de.coveringTiles({tileSize:Ae});De&&(Q.activeTexture.set(oe.TEXTURE0),N.imageManager.bind(N.context));for(var Et=H.getCrossfadeParameters(),Dt=0,It=xt;Dt<It.length;Dt+=1){var qt=It[Dt],Ft=N.transform.calculatePosMatrix(qt.toUnwrapped()),on=De?Tu(Ft,G,N,De,{tileID:qt,tileSize:Ae},Et):Zo(Ft,G,C);mt.draw(Q,oe.TRIANGLES,Ke,Ye,st,qe.disabled,on,H.id,N.tileExtentBuffer,N.quadTriangleIndexBuffer,N.tileExtentSegments)}}}}},debug:function(N,W,H){for(var C=0;C<H.length;C++)Pl(N,W,H[C])},custom:function(N,W,H){var C=N.context,G=H.implementation;if("offscreen"===N.renderPass){var Q=G.prerender;Q&&(N.setCustomLayerDefaults(),C.setColorMode(N.colorModeForRenderPass()),Q.call(G,C.gl,N.transform.customLayerMatrix()),C.setDirty(),N.setBaseState())}else if("translucent"===N.renderPass){N.setCustomLayerDefaults(),C.setColorMode(N.colorModeForRenderPass()),C.setStencilMode(Je.disabled);var oe="3d"===G.renderingMode?new Ut(N.context.gl.LEQUAL,Ut.ReadWrite,N.depthRangeFor3D):N.depthModeForSublayer(0,Ut.ReadOnly);C.setDepthMode(oe),G.render(C.gl,N.transform.customLayerMatrix()),C.setDirty(),N.setBaseState(),C.bindFramebuffer.set(null)}}},Di=function(N,W){this.context=new $e(N),this.transform=W,this._tileTextures={},this.setup(),this.numSublayers=pt.maxUnderzooming+pt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Xn,this.gpuTimers={}};Di.prototype.resize=function(N,W){if(this.width=N*o.browser.devicePixelRatio,this.height=W*o.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var H=0,C=this.style._order;H<C.length;H+=1)this.style._layers[C[H]].resize()},Di.prototype.setup=function(){var N=this.context,W=new o.StructArrayLayout2i4;W.emplaceBack(0,0),W.emplaceBack(o.EXTENT,0),W.emplaceBack(0,o.EXTENT),W.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=N.createVertexBuffer(W,cr.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);var H=new o.StructArrayLayout2i4;H.emplaceBack(0,0),H.emplaceBack(o.EXTENT,0),H.emplaceBack(0,o.EXTENT),H.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=N.createVertexBuffer(H,cr.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);var C=new o.StructArrayLayout4i8;C.emplaceBack(0,0,0,0),C.emplaceBack(o.EXTENT,0,o.EXTENT,0),C.emplaceBack(0,o.EXTENT,0,o.EXTENT),C.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.rasterBoundsBuffer=N.createVertexBuffer(C,Y.members),this.rasterBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);var G=new o.StructArrayLayout2i4;G.emplaceBack(0,0),G.emplaceBack(1,0),G.emplaceBack(0,1),G.emplaceBack(1,1),this.viewportBuffer=N.createVertexBuffer(G,cr.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);var Q=new o.StructArrayLayout1ui2;Q.emplaceBack(0),Q.emplaceBack(1),Q.emplaceBack(3),Q.emplaceBack(2),Q.emplaceBack(0),this.tileBorderIndexBuffer=N.createIndexBuffer(Q);var oe=new o.StructArrayLayout3ui6;oe.emplaceBack(0,1,2),oe.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=N.createIndexBuffer(oe),this.emptyTexture=new o.Texture(N,{width:1,height:1,data:new Uint8Array([0,0,0,0])},N.gl.RGBA);var de=this.context.gl;this.stencilClearMode=new Je({func:de.ALWAYS,mask:0},0,255,de.ZERO,de.ZERO,de.ZERO)},Di.prototype.clearStencil=function(){var N=this.context,W=N.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var H=o.create();o.ortho(H,0,this.width,this.height,0,0,1),o.scale(H,H,[W.drawingBufferWidth,W.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(N,W.TRIANGLES,Ut.disabled,this.stencilClearMode,et.disabled,qe.disabled,Io(H),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Di.prototype._renderTileClippingMasks=function(N,W){if(this.currentStencilSource!==N.source&&N.isTileClipped()&&W&&W.length){this.currentStencilSource=N.source;var H=this.context,C=H.gl;this.nextStencilID+W.length>256&&this.clearStencil(),H.setColorMode(et.disabled),H.setDepthMode(Ut.disabled);var G=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Q=0,oe=W;Q<oe.length;Q+=1){var de=oe[Q],Ae=this._tileClippingMaskIDs[de.key]=this.nextStencilID++;G.draw(H,C.TRIANGLES,Ut.disabled,new Je({func:C.ALWAYS,mask:0},Ae,255,C.KEEP,C.KEEP,C.REPLACE),et.disabled,qe.disabled,Io(de.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Di.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var N=this.nextStencilID++,W=this.context.gl;return new Je({func:W.NOTEQUAL,mask:255},N,255,W.KEEP,W.KEEP,W.REPLACE)},Di.prototype.stencilModeForClipping=function(N){var W=this.context.gl;return new Je({func:W.EQUAL,mask:255},this._tileClippingMaskIDs[N.key],0,W.KEEP,W.KEEP,W.REPLACE)},Di.prototype.stencilConfigForOverlap=function(N){var W,H=this.context.gl,C=N.sort(function(Ae,De){return De.overscaledZ-Ae.overscaledZ}),G=C[C.length-1].overscaledZ,Q=C[0].overscaledZ-G+1;if(Q>1){this.currentStencilSource=void 0,this.nextStencilID+Q>256&&this.clearStencil();for(var oe={},de=0;de<Q;de++)oe[de+G]=new Je({func:H.GEQUAL,mask:255},de+this.nextStencilID,255,H.KEEP,H.KEEP,H.REPLACE);return this.nextStencilID+=Q,[oe,C]}return[(W={},W[G]=Je.disabled,W),C]},Di.prototype.colorModeForRenderPass=function(){var N=this.context.gl;if(this._showOverdrawInspector){var W=.125;return new et([N.CONSTANT_COLOR,N.ONE],new o.Color(W,W,W,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?et.unblended:et.alphaBlended},Di.prototype.depthModeForSublayer=function(N,W,H){if(!this.opaquePassEnabledForLayer())return Ut.disabled;var C=1-((1+this.currentLayer)*this.numSublayers+N)*this.depthEpsilon;return new Ut(H||this.context.gl.LEQUAL,W,[C,C])},Di.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Di.prototype.render=function(N,W){var H=this;this.style=N,this.options=W,this.lineAtlas=N.lineAtlas,this.imageManager=N.imageManager,this.glyphManager=N.glyphManager,this.symbolFadeChange=N.placement.symbolFadeChange(o.browser.now()),this.imageManager.beginFrame();var C=this.style._order,G=this.style.sourceCaches;for(var Q in G){var oe=G[Q];oe.used&&oe.prepare(this.context)}var de,Ae,De={},je={},Ye={};for(var Ke in G){var st=G[Ke];De[Ke]=st.getVisibleCoordinates(),je[Ke]=De[Ke].slice().reverse(),Ye[Ke]=st.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var mt=0;mt<C.length;mt++)if(this.style._layers[C[mt]].is3D()){this.opaquePassCutoff=mt;break}this.renderPass="offscreen";for(var Et=0,Dt=C;Et<Dt.length;Et+=1){var qt=this.style._layers[Dt[Et]];if(qt.hasOffscreenPass()&&!qt.isHidden(this.transform.zoom)){var Ft=je[qt.source];("custom"===qt.type||Ft.length)&&this.renderLayer(this,G[qt.source],qt,Ft)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:W.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=W.showOverdrawInspector,this.depthRangeFor3D=[0,1-(N._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=C.length-1;this.currentLayer>=0;this.currentLayer--){var on=this.style._layers[C[this.currentLayer]],Qt=G[on.source],Kt=De[on.source];this._renderTileClippingMasks(on,Kt),this.renderLayer(this,Qt,on,Kt)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<C.length;this.currentLayer++){var kn=this.style._layers[C[this.currentLayer]],En=G[kn.source],Bn=("symbol"===kn.type?Ye:je)[kn.source];this._renderTileClippingMasks(kn,De[kn.source]),this.renderLayer(this,En,kn,Bn)}this.options.showTileBoundaries&&(o.values(this.style._layers).forEach(function(qn){qn.source&&!qn.isHidden(H.transform.zoom)&&(qn.source!==(Ae&&Ae.id)&&(Ae=H.style.sourceCaches[qn.source]),(!de||de.getSource().maxzoom<Ae.getSource().maxzoom)&&(de=Ae))}),de&&eu.debug(this,de,de.getVisibleCoordinates())),this.options.showPadding&&function Us(N){var W=N.transform.padding;sl(N,N.transform.height-(W.top||0),3,ws),sl(N,W.bottom||0,3,Oo),ll(N,W.left||0,3,Mu),ll(N,N.transform.width-(W.right||0),3,Ql);var C,G,Q,oe,H=N.transform.centerPoint;ul(C=N,(G=H.x)-1,(Q=N.transform.height-H.y)-10,2,20,oe=wl),ul(C,G-10,Q-1,20,2,oe)}(this),this.context.setDefault()},Di.prototype.renderLayer=function(N,W,H,C){H.isHidden(this.transform.zoom)||("background"===H.type||"custom"===H.type||C.length)&&(this.id=H.id,this.gpuTimingStart(H),eu[H.type](N,W,H,C,this.style.placement.variableOffsets),this.gpuTimingEnd())},Di.prototype.gpuTimingStart=function(N){if(this.options.gpuTiming){var W=this.context.extTimerQuery,H=this.gpuTimers[N.id];H||(H=this.gpuTimers[N.id]={calls:0,cpuTime:0,query:W.createQueryEXT()}),H.calls++,W.beginQueryEXT(W.TIME_ELAPSED_EXT,H.query)}},Di.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var N=this.context.extTimerQuery;N.endQueryEXT(N.TIME_ELAPSED_EXT)}},Di.prototype.collectGpuTimers=function(){var N=this.gpuTimers;return this.gpuTimers={},N},Di.prototype.queryGpuTimers=function(N){var W={};for(var H in N){var C=N[H],G=this.context.extTimerQuery,Q=G.getQueryObjectEXT(C.query,G.QUERY_RESULT_EXT)/1e6;G.deleteQueryEXT(C.query),W[H]=Q}return W},Di.prototype.translatePosMatrix=function(N,W,H,C,G){if(!H[0]&&!H[1])return N;var Q=G?"map"===C?this.transform.angle:0:"viewport"===C?-this.transform.angle:0;if(Q){var oe=Math.sin(Q),de=Math.cos(Q);H=[H[0]*de-H[1]*oe,H[0]*oe+H[1]*de]}var Ae=[G?H[0]:nr(W,H[0],this.transform.zoom),G?H[1]:nr(W,H[1],this.transform.zoom),0],De=new Float32Array(16);return o.translate(De,N,Ae),De},Di.prototype.saveTileTexture=function(N){var W=this._tileTextures[N.size[0]];W?W.push(N):this._tileTextures[N.size[0]]=[N]},Di.prototype.getTileTexture=function(N){var W=this._tileTextures[N];return W&&W.length>0?W.pop():null},Di.prototype.isPatternMissing=function(N){if(!N)return!1;if(!N.from||!N.to)return!0;var W=this.imageManager.getPattern(N.from.toString()),H=this.imageManager.getPattern(N.to.toString());return!W||!H},Di.prototype.useProgram=function(N,W){this.cache=this.cache||{};var H=""+N+(W?W.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[H]||(this.cache[H]=new oo(this.context,N,wa[N],W,Kl[N],this._showOverdrawInspector)),this.cache[H]},Di.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Di.prototype.setBaseState=function(){var N=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(N.FUNC_ADD)},Di.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Di.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Vs=function(N,W){this.points=N,this.planes=W};Vs.fromInvProjectionMatrix=function(N,W,H){var C=Math.pow(2,H),G=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(oe){return o.transformMat4([],oe,N)}).map(function(oe){return o.scale$1([],oe,1/oe[3]/W*C)}),Q=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(oe){var de=o.sub([],G[oe[0]],G[oe[1]]),Ae=o.sub([],G[oe[2]],G[oe[1]]),De=o.normalize([],o.cross([],de,Ae)),je=-o.dot(De,G[oe[1]]);return De.concat(je)});return new Vs(G,Q)};var Wa=function(N,W){this.min=N,this.max=W,this.center=o.scale$2([],o.add([],this.min,this.max),.5)};Wa.prototype.quadrant=function(N){for(var W=[N%2==0,N<2],H=o.clone$2(this.min),C=o.clone$2(this.max),G=0;G<W.length;G++)H[G]=W[G]?this.min[G]:this.center[G],C[G]=W[G]?this.center[G]:this.max[G];return C[2]=this.max[2],new Wa(H,C)},Wa.prototype.distanceX=function(N){return Math.max(Math.min(this.max[0],N[0]),this.min[0])-N[0]},Wa.prototype.distanceY=function(N){return Math.max(Math.min(this.max[1],N[1]),this.min[1])-N[1]},Wa.prototype.intersects=function(N){for(var W=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],H=!0,C=0;C<N.planes.length;C++){for(var G=N.planes[C],Q=0,oe=0;oe<W.length;oe++)Q+=o.dot$1(G,W[oe])>=0;if(0===Q)return 0;Q!==W.length&&(H=!1)}if(H)return 2;for(var de=0;de<3;de++){for(var Ae=Number.MAX_VALUE,De=-Number.MAX_VALUE,je=0;je<N.points.length;je++){var Ye=N.points[je][de]-this.min[de];Ae=Math.min(Ae,Ye),De=Math.max(De,Ye)}if(De<0||Ae>this.max[de]-this.min[de])return 0}return 1};var Xo=function(N,W,H,C){if(void 0===N&&(N=0),void 0===W&&(W=0),void 0===H&&(H=0),void 0===C&&(C=0),isNaN(N)||N<0||isNaN(W)||W<0||isNaN(H)||H<0||isNaN(C)||C<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=N,this.bottom=W,this.left=H,this.right=C};Xo.prototype.interpolate=function(N,W,H){return null!=W.top&&null!=N.top&&(this.top=o.number(N.top,W.top,H)),null!=W.bottom&&null!=N.bottom&&(this.bottom=o.number(N.bottom,W.bottom,H)),null!=W.left&&null!=N.left&&(this.left=o.number(N.left,W.left,H)),null!=W.right&&null!=N.right&&(this.right=o.number(N.right,W.right,H)),this},Xo.prototype.getCenter=function(N,W){var H=o.clamp((this.left+N-this.right)/2,0,N),C=o.clamp((this.top+W-this.bottom)/2,0,W);return new o.Point(H,C)},Xo.prototype.equals=function(N){return this.top===N.top&&this.bottom===N.bottom&&this.left===N.left&&this.right===N.right},Xo.prototype.clone=function(){return new Xo(this.top,this.bottom,this.left,this.right)},Xo.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Ai=function(N,W,H,C,G){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===G||G,this._minZoom=N||0,this._maxZoom=W||22,this._minPitch=H??0,this._maxPitch=C??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Xo,this._posMatrixCache={},this._alignedPosMatrixCache={}},Ii={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Ai.prototype.clone=function(){var N=new Ai(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return N.tileSize=this.tileSize,N.latRange=this.latRange,N.width=this.width,N.height=this.height,N._center=this._center,N.zoom=this.zoom,N.angle=this.angle,N._fov=this._fov,N._pitch=this._pitch,N._unmodified=this._unmodified,N._edgeInsets=this._edgeInsets.clone(),N._calcMatrices(),N},Ii.minZoom.get=function(){return this._minZoom},Ii.minZoom.set=function(N){this._minZoom!==N&&(this._minZoom=N,this.zoom=Math.max(this.zoom,N))},Ii.maxZoom.get=function(){return this._maxZoom},Ii.maxZoom.set=function(N){this._maxZoom!==N&&(this._maxZoom=N,this.zoom=Math.min(this.zoom,N))},Ii.minPitch.get=function(){return this._minPitch},Ii.minPitch.set=function(N){this._minPitch!==N&&(this._minPitch=N,this.pitch=Math.max(this.pitch,N))},Ii.maxPitch.get=function(){return this._maxPitch},Ii.maxPitch.set=function(N){this._maxPitch!==N&&(this._maxPitch=N,this.pitch=Math.min(this.pitch,N))},Ii.renderWorldCopies.get=function(){return this._renderWorldCopies},Ii.renderWorldCopies.set=function(N){void 0===N?N=!0:null===N&&(N=!1),this._renderWorldCopies=N},Ii.worldSize.get=function(){return this.tileSize*this.scale},Ii.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Ii.size.get=function(){return new o.Point(this.width,this.height)},Ii.bearing.get=function(){return-this.angle/Math.PI*180},Ii.bearing.set=function(N){var W=-o.wrap(N,-180,180)*Math.PI/180;this.angle!==W&&(this._unmodified=!1,this.angle=W,this._calcMatrices(),this.rotationMatrix=o.create$2(),o.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Ii.pitch.get=function(){return this._pitch/Math.PI*180},Ii.pitch.set=function(N){var W=o.clamp(N,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==W&&(this._unmodified=!1,this._pitch=W,this._calcMatrices())},Ii.fov.get=function(){return this._fov/Math.PI*180},Ii.fov.set=function(N){N=Math.max(.01,Math.min(60,N)),this._fov!==N&&(this._unmodified=!1,this._fov=N/180*Math.PI,this._calcMatrices())},Ii.zoom.get=function(){return this._zoom},Ii.zoom.set=function(N){var W=Math.min(Math.max(N,this.minZoom),this.maxZoom);this._zoom!==W&&(this._unmodified=!1,this._zoom=W,this.scale=this.zoomScale(W),this.tileZoom=Math.floor(W),this.zoomFraction=W-this.tileZoom,this._constrain(),this._calcMatrices())},Ii.center.get=function(){return this._center},Ii.center.set=function(N){N.lat===this._center.lat&&N.lng===this._center.lng||(this._unmodified=!1,this._center=N,this._constrain(),this._calcMatrices())},Ii.padding.get=function(){return this._edgeInsets.toJSON()},Ii.padding.set=function(N){this._edgeInsets.equals(N)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,N,1),this._calcMatrices())},Ii.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Ai.prototype.isPaddingEqual=function(N){return this._edgeInsets.equals(N)},Ai.prototype.interpolatePadding=function(N,W,H){this._unmodified=!1,this._edgeInsets.interpolate(N,W,H),this._constrain(),this._calcMatrices()},Ai.prototype.coveringZoomLevel=function(N){var W=(N.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/N.tileSize));return Math.max(0,W)},Ai.prototype.getVisibleUnwrappedCoordinates=function(N){var W=[new o.UnwrappedTileID(0,N)];if(this._renderWorldCopies)for(var H=this.pointCoordinate(new o.Point(0,0)),C=this.pointCoordinate(new o.Point(this.width,0)),G=this.pointCoordinate(new o.Point(this.width,this.height)),Q=this.pointCoordinate(new o.Point(0,this.height)),oe=Math.floor(Math.min(H.x,C.x,G.x,Q.x)),de=Math.floor(Math.max(H.x,C.x,G.x,Q.x)),Ae=oe-1;Ae<=de+1;Ae++)0!==Ae&&W.push(new o.UnwrappedTileID(Ae,N));return W},Ai.prototype.coveringTiles=function(N){var W=this.coveringZoomLevel(N),H=W;if(void 0!==N.minzoom&&W<N.minzoom)return[];void 0!==N.maxzoom&&W>N.maxzoom&&(W=N.maxzoom);var C=o.MercatorCoordinate.fromLngLat(this.center),G=Math.pow(2,W),Q=[G*C.x,G*C.y,0],oe=Vs.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,W),de=N.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(de=W);var Ae=function(Bn){return{aabb:new Wa([Bn*G,0,0],[(Bn+1)*G,G,0]),zoom:0,x:0,y:0,wrap:Bn,fullyVisible:!1}},De=[],je=[],Ye=W,Ke=N.reparseOverscaled?H:W;if(this._renderWorldCopies)for(var st=1;st<=3;st++)De.push(Ae(-st)),De.push(Ae(st));for(De.push(Ae(0));De.length>0;){var mt=De.pop(),xt=mt.x,Et=mt.y,Dt=mt.fullyVisible;if(!Dt){var It=mt.aabb.intersects(oe);if(0===It)continue;Dt=2===It}var qt=mt.aabb.distanceX(Q),Ft=mt.aabb.distanceY(Q),on=Math.max(Math.abs(qt),Math.abs(Ft));if(mt.zoom===Ye||on>3+(1<<Ye-mt.zoom)-2&&mt.zoom>=de)je.push({tileID:new o.OverscaledTileID(mt.zoom===Ye?Ke:mt.zoom,mt.wrap,mt.zoom,xt,Et),distanceSq:o.sqrLen([Q[0]-.5-xt,Q[1]-.5-Et])});else for(var Kt=0;Kt<4;Kt++){var kn=(xt<<1)+Kt%2,En=(Et<<1)+(Kt>>1);De.push({aabb:mt.aabb.quadrant(Kt),zoom:mt.zoom+1,x:kn,y:En,wrap:mt.wrap,fullyVisible:Dt})}}return je.sort(function(Bn,qn){return Bn.distanceSq-qn.distanceSq}).map(function(Bn){return Bn.tileID})},Ai.prototype.resize=function(N,W){this.width=N,this.height=W,this.pixelsToGLUnits=[2/N,-2/W],this._constrain(),this._calcMatrices()},Ii.unmodified.get=function(){return this._unmodified},Ai.prototype.zoomScale=function(N){return Math.pow(2,N)},Ai.prototype.scaleZoom=function(N){return Math.log(N)/Math.LN2},Ai.prototype.project=function(N){var W=o.clamp(N.lat,-this.maxValidLatitude,this.maxValidLatitude);return new o.Point(o.mercatorXfromLng(N.lng)*this.worldSize,o.mercatorYfromLat(W)*this.worldSize)},Ai.prototype.unproject=function(N){return new o.MercatorCoordinate(N.x/this.worldSize,N.y/this.worldSize).toLngLat()},Ii.point.get=function(){return this.project(this.center)},Ai.prototype.setLocationAtPoint=function(N,W){var H=this.pointCoordinate(W),C=this.pointCoordinate(this.centerPoint),G=this.locationCoordinate(N),Q=new o.MercatorCoordinate(G.x-(H.x-C.x),G.y-(H.y-C.y));this.center=this.coordinateLocation(Q),this._renderWorldCopies&&(this.center=this.center.wrap())},Ai.prototype.locationPoint=function(N){return this.coordinatePoint(this.locationCoordinate(N))},Ai.prototype.pointLocation=function(N){return this.coordinateLocation(this.pointCoordinate(N))},Ai.prototype.locationCoordinate=function(N){return o.MercatorCoordinate.fromLngLat(N)},Ai.prototype.coordinateLocation=function(N){return N.toLngLat()},Ai.prototype.pointCoordinate=function(N){var W=[N.x,N.y,0,1],H=[N.x,N.y,1,1];o.transformMat4(W,W,this.pixelMatrixInverse),o.transformMat4(H,H,this.pixelMatrixInverse);var C=W[3],G=H[3],de=W[1]/C,Ae=H[1]/G,De=W[2]/C,je=H[2]/G,Ye=De===je?0:(0-De)/(je-De);return new o.MercatorCoordinate(o.number(W[0]/C,H[0]/G,Ye)/this.worldSize,o.number(de,Ae,Ye)/this.worldSize)},Ai.prototype.coordinatePoint=function(N){var W=[N.x*this.worldSize,N.y*this.worldSize,0,1];return o.transformMat4(W,W,this.pixelMatrix),new o.Point(W[0]/W[3],W[1]/W[3])},Ai.prototype.getBounds=function(){return(new o.LngLatBounds).extend(this.pointLocation(new o.Point(0,0))).extend(this.pointLocation(new o.Point(this.width,0))).extend(this.pointLocation(new o.Point(this.width,this.height))).extend(this.pointLocation(new o.Point(0,this.height)))},Ai.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new o.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Ai.prototype.setMaxBounds=function(N){N?(this.lngRange=[N.getWest(),N.getEast()],this.latRange=[N.getSouth(),N.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Ai.prototype.calculatePosMatrix=function(N,W){void 0===W&&(W=!1);var H=N.key,C=W?this._alignedPosMatrixCache:this._posMatrixCache;if(C[H])return C[H];var G=N.canonical,Q=this.worldSize/this.zoomScale(G.z),oe=G.x+Math.pow(2,G.z)*N.wrap,de=o.identity(new Float64Array(16));return o.translate(de,de,[oe*Q,G.y*Q,0]),o.scale(de,de,[Q/o.EXTENT,Q/o.EXTENT,1]),o.multiply(de,W?this.alignedProjMatrix:this.projMatrix,de),C[H]=new Float32Array(de),C[H]},Ai.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Ai.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var N,W,H,C,G=-90,Q=90,oe=-180,de=180,Ae=this.size,De=this._unmodified;if(this.latRange){var je=this.latRange;G=o.mercatorYfromLat(je[1])*this.worldSize,N=(Q=o.mercatorYfromLat(je[0])*this.worldSize)-G<Ae.y?Ae.y/(Q-G):0}if(this.lngRange){var Ye=this.lngRange;oe=o.mercatorXfromLng(Ye[0])*this.worldSize,W=(de=o.mercatorXfromLng(Ye[1])*this.worldSize)-oe<Ae.x?Ae.x/(de-oe):0}var Ke=this.point,st=Math.max(W||0,N||0);if(st)return this.center=this.unproject(new o.Point(W?(de+oe)/2:Ke.x,N?(Q+G)/2:Ke.y)),this.zoom+=this.scaleZoom(st),this._unmodified=De,void(this._constraining=!1);if(this.latRange){var mt=Ke.y,xt=Ae.y/2;mt-xt<G&&(C=G+xt),mt+xt>Q&&(C=Q-xt)}if(this.lngRange){var Et=Ke.x,Dt=Ae.x/2;Et-Dt<oe&&(H=oe+Dt),Et+Dt>de&&(H=de-Dt)}void 0===H&&void 0===C||(this.center=this.unproject(new o.Point(void 0!==H?H:Ke.x,void 0!==C?C:Ke.y))),this._unmodified=De,this._constraining=!1}},Ai.prototype._calcMatrices=function(){if(this.height){var W=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var H=Math.PI/2+this._pitch,C=this._fov*(.5+W.y/this.height),G=Math.sin(C)*this.cameraToCenterDistance/Math.sin(o.clamp(Math.PI-H-C,.01,Math.PI-.01)),Q=this.point,oe=Q.x,de=Q.y,Ae=1.01*(Math.cos(Math.PI/2-this._pitch)*G+this.cameraToCenterDistance),De=this.height/50,je=new Float64Array(16);o.perspective(je,this._fov,this.width/this.height,De,Ae),je[8]=2*-W.x/this.width,je[9]=2*W.y/this.height,o.scale(je,je,[1,-1,1]),o.translate(je,je,[0,0,-this.cameraToCenterDistance]),o.rotateX(je,je,this._pitch),o.rotateZ(je,je,this.angle),o.translate(je,je,[-oe,-de,0]),this.mercatorMatrix=o.scale([],je,[this.worldSize,this.worldSize,this.worldSize]),o.scale(je,je,[1,1,o.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=je,this.invProjMatrix=o.invert([],this.projMatrix);var Ye=this.width%2/2,Ke=this.height%2/2,st=Math.cos(this.angle),mt=Math.sin(this.angle),xt=oe-Math.round(oe)+st*Ye+mt*Ke,Et=de-Math.round(de)+st*Ke+mt*Ye,Dt=new Float64Array(je);if(o.translate(Dt,Dt,[xt>.5?xt-1:xt,Et>.5?Et-1:Et,0]),this.alignedProjMatrix=Dt,je=o.create(),o.scale(je,je,[this.width/2,-this.height/2,1]),o.translate(je,je,[1,-1,0]),this.labelPlaneMatrix=je,je=o.create(),o.scale(je,je,[1,-1,1]),o.translate(je,je,[-1,-1,0]),o.scale(je,je,[2/this.width,2/this.height,1]),this.glCoordMatrix=je,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(je=o.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=je,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Ai.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var N=this.pointCoordinate(new o.Point(0,0)),W=[N.x*this.worldSize,N.y*this.worldSize,0,1];return o.transformMat4(W,W,this.pixelMatrix)[3]/this.cameraToCenterDistance},Ai.prototype.getCameraPoint=function(){var W=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.Point(0,W))},Ai.prototype.getCameraQueryGeometry=function(N){var W=this.getCameraPoint();if(1===N.length)return[N[0],W];for(var H=W.x,C=W.y,G=W.x,Q=W.y,oe=0,de=N;oe<de.length;oe+=1){var Ae=de[oe];H=Math.min(H,Ae.x),C=Math.min(C,Ae.y),G=Math.max(G,Ae.x),Q=Math.max(Q,Ae.y)}return[new o.Point(H,C),new o.Point(G,C),new o.Point(G,Q),new o.Point(H,Q),new o.Point(H,C)]},Object.defineProperties(Ai.prototype,Ii);var Ro=function(N){var W,C,G,Q;this._hashName=N&&encodeURIComponent(N),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(W=this._updateHashUnthrottled.bind(this),300,C=!1,G=null,Q=function(){G=null,C&&(W(),G=setTimeout(Q,300),C=!1)},function(){return C=!0,G||Q(),G})};Ro.prototype.addTo=function(N){return this._map=N,o.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Ro.prototype.remove=function(){return o.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Ro.prototype.getHashString=function(N){var W=this._map.getCenter(),H=Math.round(100*this._map.getZoom())/100,C=Math.ceil((H*Math.LN2+Math.log(512/360/.5))/Math.LN10),G=Math.pow(10,C),Q=Math.round(W.lng*G)/G,oe=Math.round(W.lat*G)/G,de=this._map.getBearing(),Ae=this._map.getPitch(),De="";if(De+=N?"/"+Q+"/"+oe+"/"+H:H+"/"+oe+"/"+Q,(de||Ae)&&(De+="/"+Math.round(10*de)/10),Ae&&(De+="/"+Math.round(Ae)),this._hashName){var je=this._hashName,Ye=!1,Ke=o.window.location.hash.slice(1).split("&").map(function(st){var mt=st.split("=")[0];return mt===je?(Ye=!0,mt+"="+De):st}).filter(function(st){return st});return Ye||Ke.push(je+"="+De),"#"+Ke.join("&")}return"#"+De},Ro.prototype._getCurrentHash=function(){var N,W=this,H=o.window.location.hash.replace("#","");return this._hashName?(H.split("&").map(function(C){return C.split("=")}).forEach(function(C){C[0]===W._hashName&&(N=C)}),(N&&N[1]||"").split("/")):H.split("/")},Ro.prototype._onHashChange=function(){var N=this._getCurrentHash();if(N.length>=3&&!N.some(function(H){return isNaN(H)})){var W=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(N[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+N[2],+N[1]],zoom:+N[0],bearing:W,pitch:+(N[4]||0)}),!0}return!1},Ro.prototype._updateHashUnthrottled=function(){var N=o.window.location.href.replace(/(#.+)?$/,this.getHashString());try{o.window.history.replaceState(o.window.history.state,null,N)}catch{}};var Gs={linearity:.3,easing:o.bezier(0,0,.3,1)},Tl=o.extend({deceleration:2500,maxSpeed:1400},Gs),Ol=o.extend({deceleration:20,maxSpeed:1400},Gs),kl=o.extend({deceleration:1e3,maxSpeed:360},Gs),tu=o.extend({deceleration:1e3,maxSpeed:90},Gs),xo=function(N){this._map=N,this.clear()};function Ts(N,W){(!N.duration||N.duration<W.duration)&&(N.duration=W.duration,N.easing=W.easing)}function cl(N,W,H){var C=H.maxSpeed,G=H.linearity,Q=H.deceleration,oe=o.clamp(N*G/(W/1e3),-C,C),de=Math.abs(oe)/(Q*G);return{easing:H.easing,duration:1e3*de,amount:oe*(de/2)}}xo.prototype.clear=function(){this._inertiaBuffer=[]},xo.prototype.record=function(N){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.browser.now(),settings:N})},xo.prototype._drainInertiaBuffer=function(){for(var N=this._inertiaBuffer,W=o.browser.now();N.length>0&&W-N[0].time>160;)N.shift()},xo.prototype._onMoveEnd=function(N){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var W={zoom:0,bearing:0,pitch:0,pan:new o.Point(0,0),pinchAround:void 0,around:void 0},H=0,C=this._inertiaBuffer;H<C.length;H+=1){var G=C[H].settings;W.zoom+=G.zoomDelta||0,W.bearing+=G.bearingDelta||0,W.pitch+=G.pitchDelta||0,G.panDelta&&W.pan._add(G.panDelta),G.around&&(W.around=G.around),G.pinchAround&&(W.pinchAround=G.pinchAround)}var Q=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,oe={};if(W.pan.mag()){var de=cl(W.pan.mag(),Q,o.extend({},Tl,N||{}));oe.offset=W.pan.mult(de.amount/W.pan.mag()),oe.center=this._map.transform.center,Ts(oe,de)}if(W.zoom){var Ae=cl(W.zoom,Q,Ol);oe.zoom=this._map.transform.zoom+Ae.amount,Ts(oe,Ae)}if(W.bearing){var De=cl(W.bearing,Q,kl);oe.bearing=this._map.transform.bearing+o.clamp(De.amount,-179,179),Ts(oe,De)}if(W.pitch){var je=cl(W.pitch,Q,tu);oe.pitch=this._map.transform.pitch+je.amount,Ts(oe,je)}if(oe.zoom||oe.bearing){var Ye=void 0===W.pinchAround?W.around:W.pinchAround;oe.around=Ye?this._map.unproject(Ye):this._map.getCenter()}return this.clear(),o.extend(oe,{noMoveStart:!0})}};var $a=function(N){function W(C,G,Q,oe){void 0===oe&&(oe={});var de=_.mousePos(G.getCanvasContainer(),Q),Ae=G.unproject(de);N.call(this,C,o.extend({point:de,lngLat:Ae,originalEvent:Q},oe)),this._defaultPrevented=!1,this.target=G}N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W;var H={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},H.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,H),W}(o.Event),Al=function(N){function W(C,G,Q){var oe="touchend"===C?Q.changedTouches:Q.touches,de=_.touchPos(G.getCanvasContainer(),oe),Ae=de.map(function(Ye){return G.unproject(Ye)}),De=de.reduce(function(Ye,Ke,st,mt){return Ye.add(Ke.div(mt.length))},new o.Point(0,0)),je=G.unproject(De);N.call(this,C,{points:de,point:De,lngLats:Ae,lngLat:je,originalEvent:Q}),this._defaultPrevented=!1}N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W;var H={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},H.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,H),W}(o.Event),bo=function(N){function W(C,G,Q){N.call(this,C,{originalEvent:Q}),this._defaultPrevented=!1}N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W;var H={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},H.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,H),W}(o.Event),Ra=function(N,W){this._map=N,this._clickTolerance=W.clickTolerance};Ra.prototype.reset=function(){delete this._mousedownPos},Ra.prototype.wheel=function(N){return this._firePreventable(new bo(N.type,this._map,N))},Ra.prototype.mousedown=function(N,W){return this._mousedownPos=W,this._firePreventable(new $a(N.type,this._map,N))},Ra.prototype.mouseup=function(N){this._map.fire(new $a(N.type,this._map,N))},Ra.prototype.click=function(N,W){this._mousedownPos&&this._mousedownPos.dist(W)>=this._clickTolerance||this._map.fire(new $a(N.type,this._map,N))},Ra.prototype.dblclick=function(N){return this._firePreventable(new $a(N.type,this._map,N))},Ra.prototype.mouseover=function(N){this._map.fire(new $a(N.type,this._map,N))},Ra.prototype.mouseout=function(N){this._map.fire(new $a(N.type,this._map,N))},Ra.prototype.touchstart=function(N){return this._firePreventable(new Al(N.type,this._map,N))},Ra.prototype.touchmove=function(N){this._map.fire(new Al(N.type,this._map,N))},Ra.prototype.touchend=function(N){this._map.fire(new Al(N.type,this._map,N))},Ra.prototype.touchcancel=function(N){this._map.fire(new Al(N.type,this._map,N))},Ra.prototype._firePreventable=function(N){if(this._map.fire(N),N.defaultPrevented)return{}},Ra.prototype.isEnabled=function(){return!0},Ra.prototype.isActive=function(){return!1},Ra.prototype.enable=function(){},Ra.prototype.disable=function(){};var ja=function(N){this._map=N};ja.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},ja.prototype.mousemove=function(N){this._map.fire(new $a(N.type,this._map,N))},ja.prototype.mousedown=function(){this._delayContextMenu=!0},ja.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new $a("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},ja.prototype.contextmenu=function(N){this._delayContextMenu?this._contextMenuEvent=N:this._map.fire(new $a(N.type,this._map,N)),this._map.listens("contextmenu")&&N.preventDefault()},ja.prototype.isEnabled=function(){return!0},ja.prototype.isActive=function(){return!1},ja.prototype.enable=function(){},ja.prototype.disable=function(){};var Bi=function(N,W){this._map=N,this._el=N.getCanvasContainer(),this._container=N.getContainer(),this._clickTolerance=W.clickTolerance||1};function Da(N,W){for(var H={},C=0;C<N.length;C++)H[N[C].identifier]=W[C];return H}Bi.prototype.isEnabled=function(){return!!this._enabled},Bi.prototype.isActive=function(){return!!this._active},Bi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Bi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Bi.prototype.mousedown=function(N,W){this.isEnabled()&&N.shiftKey&&0===N.button&&(_.disableDrag(),this._startPos=this._lastPos=W,this._active=!0)},Bi.prototype.mousemoveWindow=function(N,W){if(this._active){var H=W;if(!(this._lastPos.equals(H)||!this._box&&H.dist(this._startPos)<this._clickTolerance)){var C=this._startPos;this._lastPos=H,this._box||(this._box=_.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",N));var G=Math.min(C.x,H.x),Q=Math.max(C.x,H.x),oe=Math.min(C.y,H.y),de=Math.max(C.y,H.y);_.setTransform(this._box,"translate("+G+"px,"+oe+"px)"),this._box.style.width=Q-G+"px",this._box.style.height=de-oe+"px"}}},Bi.prototype.mouseupWindow=function(N,W){var H=this;if(this._active&&0===N.button){var C=this._startPos,G=W;if(this.reset(),_.suppressClick(),C.x!==G.x||C.y!==G.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:N})),{cameraAnimation:function(Q){return Q.fitScreenCoordinates(C,G,H._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",N)}},Bi.prototype.keydown=function(N){this._active&&27===N.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",N))},Bi.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(_.remove(this._box),this._box=null),_.enableDrag(),delete this._startPos,delete this._lastPos},Bi.prototype._fireEvent=function(N,W){return this._map.fire(new o.Event(N,{originalEvent:W}))};var ks=function(N){this.reset(),this.numTouches=N.numTouches};ks.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},ks.prototype.touchstart=function(N,W,H){(this.centroid||H.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=N.timeStamp),H.length===this.numTouches&&(this.centroid=function(C){for(var G=new o.Point(0,0),Q=0,oe=C;Q<oe.length;Q+=1)G._add(oe[Q]);return G.div(C.length)}(W),this.touches=Da(H,W)))},ks.prototype.touchmove=function(N,W,H){if(!this.aborted&&this.centroid){var C=Da(H,W);for(var G in this.touches){var oe=C[G];(!oe||oe.dist(this.touches[G])>30)&&(this.aborted=!0)}}},ks.prototype.touchend=function(N,W,H){if((!this.centroid||N.timeStamp-this.startTime>500)&&(this.aborted=!0),0===H.length){var C=!this.aborted&&this.centroid;if(this.reset(),C)return C}};var fl=function(N){this.singleTap=new ks(N),this.numTaps=N.numTaps,this.reset()};fl.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},fl.prototype.touchstart=function(N,W,H){this.singleTap.touchstart(N,W,H)},fl.prototype.touchmove=function(N,W,H){this.singleTap.touchmove(N,W,H)},fl.prototype.touchend=function(N,W,H){var C=this.singleTap.touchend(N,W,H);if(C){var G=N.timeStamp-this.lastTime<500,Q=!this.lastTap||this.lastTap.dist(C)<30;if(G&&Q||this.reset(),this.count++,this.lastTime=N.timeStamp,this.lastTap=C,this.count===this.numTaps)return this.reset(),C}};var Qa=function(){this._zoomIn=new fl({numTouches:1,numTaps:2}),this._zoomOut=new fl({numTouches:2,numTaps:1}),this.reset()};Qa.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Qa.prototype.touchstart=function(N,W,H){this._zoomIn.touchstart(N,W,H),this._zoomOut.touchstart(N,W,H)},Qa.prototype.touchmove=function(N,W,H){this._zoomIn.touchmove(N,W,H),this._zoomOut.touchmove(N,W,H)},Qa.prototype.touchend=function(N,W,H){var C=this,G=this._zoomIn.touchend(N,W,H),Q=this._zoomOut.touchend(N,W,H);return G?(this._active=!0,N.preventDefault(),setTimeout(function(){return C.reset()},0),{cameraAnimation:function(oe){return oe.easeTo({duration:300,zoom:oe.getZoom()+1,around:oe.unproject(G)},{originalEvent:N})}}):Q?(this._active=!0,N.preventDefault(),setTimeout(function(){return C.reset()},0),{cameraAnimation:function(oe){return oe.easeTo({duration:300,zoom:oe.getZoom()-1,around:oe.unproject(Q)},{originalEvent:N})}}):void 0},Qa.prototype.touchcancel=function(){this.reset()},Qa.prototype.enable=function(){this._enabled=!0},Qa.prototype.disable=function(){this._enabled=!1,this.reset()},Qa.prototype.isEnabled=function(){return this._enabled},Qa.prototype.isActive=function(){return this._active};var Hs={0:1,2:2},eo=function(N){this.reset(),this._clickTolerance=N.clickTolerance||1};eo.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},eo.prototype._correctButton=function(N,W){return!1},eo.prototype._move=function(N,W){return{}},eo.prototype.mousedown=function(N,W){if(!this._lastPoint){var H=_.mouseButton(N);this._correctButton(N,H)&&(this._lastPoint=W,this._eventButton=H)}},eo.prototype.mousemoveWindow=function(N,W){var C,Q,H=this._lastPoint;if(H)if(N.preventDefault(),Q=Hs[this._eventButton],void 0===(C=N).buttons||(C.buttons&Q)!==Q)this.reset();else if(this._moved||!(W.dist(H)<this._clickTolerance))return this._moved=!0,this._lastPoint=W,this._move(H,W)},eo.prototype.mouseupWindow=function(N){this._lastPoint&&_.mouseButton(N)===this._eventButton&&(this._moved&&_.suppressClick(),this.reset())},eo.prototype.enable=function(){this._enabled=!0},eo.prototype.disable=function(){this._enabled=!1,this.reset()},eo.prototype.isEnabled=function(){return this._enabled},eo.prototype.isActive=function(){return this._active};var Ml=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.mousedown=function(H,C){N.prototype.mousedown.call(this,H,C),this._lastPoint&&(this._active=!0)},W.prototype._correctButton=function(H,C){return 0===C&&!H.ctrlKey},W.prototype._move=function(H,C){return{around:C,panDelta:C.sub(H)}},W}(eo),fs=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype._correctButton=function(H,C){return 0===C&&H.ctrlKey||2===C},W.prototype._move=function(H,C){var G=.8*(C.x-H.x);if(G)return this._active=!0,{bearingDelta:G}},W.prototype.contextmenu=function(H){H.preventDefault()},W}(eo),_o=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype._correctButton=function(H,C){return 0===C&&H.ctrlKey||2===C},W.prototype._move=function(H,C){var G=-.5*(C.y-H.y);if(G)return this._active=!0,{pitchDelta:G}},W.prototype.contextmenu=function(H){H.preventDefault()},W}(eo),Ko=function(N){this._minTouches=1,this._clickTolerance=N.clickTolerance||1,this.reset()};Ko.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new o.Point(0,0)},Ko.prototype.touchstart=function(N,W,H){return this._calculateTransform(N,W,H)},Ko.prototype.touchmove=function(N,W,H){if(this._active&&!(H.length<this._minTouches))return N.preventDefault(),this._calculateTransform(N,W,H)},Ko.prototype.touchend=function(N,W,H){this._calculateTransform(N,W,H),this._active&&H.length<this._minTouches&&this.reset()},Ko.prototype.touchcancel=function(){this.reset()},Ko.prototype._calculateTransform=function(N,W,H){H.length>0&&(this._active=!0);var C=Da(H,W),G=new o.Point(0,0),Q=new o.Point(0,0),oe=0;for(var de in C){var Ae=C[de],De=this._touches[de];De&&(G._add(Ae),Q._add(Ae.sub(De)),oe++,C[de]=Ae)}if(this._touches=C,!(oe<this._minTouches)&&Q.mag()){var je=Q.div(oe);if(this._sum._add(je),!(this._sum.mag()<this._clickTolerance))return{around:G.div(oe),panDelta:je}}},Ko.prototype.enable=function(){this._enabled=!0},Ko.prototype.disable=function(){this._enabled=!1,this.reset()},Ko.prototype.isEnabled=function(){return this._enabled},Ko.prototype.isActive=function(){return this._active};var qi=function(){this.reset()};function Do(N,W,H){for(var C=0;C<N.length;C++)if(N[C].identifier===H)return W[C]}function Hr(N,W){return Math.log(N/W)/Math.LN2}qi.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},qi.prototype._start=function(N){},qi.prototype._move=function(N,W,H){return{}},qi.prototype.touchstart=function(N,W,H){this._firstTwoTouches||H.length<2||(this._firstTwoTouches=[H[0].identifier,H[1].identifier],this._start([W[0],W[1]]))},qi.prototype.touchmove=function(N,W,H){if(this._firstTwoTouches){N.preventDefault();var C=this._firstTwoTouches,Q=C[1],oe=Do(H,W,C[0]),de=Do(H,W,Q);if(oe&&de){var Ae=this._aroundCenter?null:oe.add(de).div(2);return this._move([oe,de],Ae,N)}}},qi.prototype.touchend=function(N,W,H){if(this._firstTwoTouches){var C=this._firstTwoTouches,Q=C[1],oe=Do(H,W,C[0]),de=Do(H,W,Q);oe&&de||(this._active&&_.suppressClick(),this.reset())}},qi.prototype.touchcancel=function(){this.reset()},qi.prototype.enable=function(N){this._enabled=!0,this._aroundCenter=!!N&&"center"===N.around},qi.prototype.disable=function(){this._enabled=!1,this.reset()},qi.prototype.isEnabled=function(){return this._enabled},qi.prototype.isActive=function(){return this._active};var qs=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.reset=function(){N.prototype.reset.call(this),delete this._distance,delete this._startDistance},W.prototype._start=function(H){this._startDistance=this._distance=H[0].dist(H[1])},W.prototype._move=function(H,C){var G=this._distance;if(this._distance=H[0].dist(H[1]),this._active||!(Math.abs(Hr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Hr(this._distance,G),pinchAround:C}},W}(qi);function nu(N,W){return 180*N.angleWith(W)/Math.PI}var hs=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.reset=function(){N.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},W.prototype._start=function(H){this._startVector=this._vector=H[0].sub(H[1]),this._minDiameter=H[0].dist(H[1])},W.prototype._move=function(H,C){var G=this._vector;if(this._vector=H[0].sub(H[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:nu(this._vector,G),pinchAround:C}},W.prototype._isBelowThreshold=function(H){this._minDiameter=Math.min(this._minDiameter,H.mag());var C=25/(Math.PI*this._minDiameter)*360,G=nu(H,this._startVector);return Math.abs(G)<C},W}(qi);function Ws(N){return Math.abs(N.y)>Math.abs(N.x)}var hl=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.reset=function(){N.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},W.prototype._start=function(H){this._lastPoints=H,Ws(H[0].sub(H[1]))&&(this._valid=!1)},W.prototype._move=function(H,C,G){var Q=H[0].sub(this._lastPoints[0]),oe=H[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Q,oe,G.timeStamp),this._valid)return this._lastPoints=H,this._active=!0,{pitchDelta:(Q.y+oe.y)/2*-.5}},W.prototype.gestureBeginsVertically=function(H,C,G){if(void 0!==this._valid)return this._valid;var Q=H.mag()>=2,oe=C.mag()>=2;if(Q||oe){if(!Q||!oe)return void 0===this._firstMove&&(this._firstMove=G),G-this._firstMove<100&&void 0;var de=H.y>0==C.y>0;return Ws(H)&&Ws(C)&&de}},W}(qi),zo={panStep:100,bearingStep:15,pitchStep:10},Or=function(){var N=zo;this._panStep=N.panStep,this._bearingStep=N.bearingStep,this._pitchStep=N.pitchStep,this._rotationDisabled=!1};function ru(N){return N*(2-N)}Or.prototype.reset=function(){this._active=!1},Or.prototype.keydown=function(N){var W=this;if(!(N.altKey||N.ctrlKey||N.metaKey)){var H=0,C=0,G=0,Q=0,oe=0;switch(N.keyCode){case 61:case 107:case 171:case 187:H=1;break;case 189:case 109:case 173:H=-1;break;case 37:N.shiftKey?C=-1:(N.preventDefault(),Q=-1);break;case 39:N.shiftKey?C=1:(N.preventDefault(),Q=1);break;case 38:N.shiftKey?G=1:(N.preventDefault(),oe=-1);break;case 40:N.shiftKey?G=-1:(N.preventDefault(),oe=1);break;default:return}return this._rotationDisabled&&(C=0,G=0),{cameraAnimation:function(de){var Ae=de.getZoom();de.easeTo({duration:300,easeId:"keyboardHandler",easing:ru,zoom:H?Math.round(Ae)+H*(N.shiftKey?2:1):Ae,bearing:de.getBearing()+C*W._bearingStep,pitch:de.getPitch()+G*W._pitchStep,offset:[-Q*W._panStep,-oe*W._panStep],center:de.getCenter()},{originalEvent:N})}}}},Or.prototype.enable=function(){this._enabled=!0},Or.prototype.disable=function(){this._enabled=!1,this.reset()},Or.prototype.isEnabled=function(){return this._enabled},Or.prototype.isActive=function(){return this._active},Or.prototype.disableRotation=function(){this._rotationDisabled=!0},Or.prototype.enableRotation=function(){this._rotationDisabled=!1};var ds=4.000244140625,za=function(N,W){this._map=N,this._el=N.getCanvasContainer(),this._handler=W,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,o.bindAll(["_onTimeout"],this)};za.prototype.setZoomRate=function(N){this._defaultZoomRate=N},za.prototype.setWheelZoomRate=function(N){this._wheelZoomRate=N},za.prototype.isEnabled=function(){return!!this._enabled},za.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},za.prototype.isZooming=function(){return!!this._zooming},za.prototype.enable=function(N){this.isEnabled()||(this._enabled=!0,this._aroundCenter=N&&"center"===N.around)},za.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},za.prototype.wheel=function(N){if(this.isEnabled()){var W=N.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*N.deltaY:N.deltaY,H=o.browser.now(),C=H-(this._lastWheelEventTime||0);this._lastWheelEventTime=H,0!==W&&W%ds==0?this._type="wheel":0!==W&&Math.abs(W)<4?this._type="trackpad":C>400?(this._type=null,this._lastValue=W,this._timeout=setTimeout(this._onTimeout,40,N)):this._type||(this._type=Math.abs(C*W)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,W+=this._lastValue)),N.shiftKey&&W&&(W/=4),this._type&&(this._lastWheelEvent=N,this._delta-=W,this._active||this._start(N)),N.preventDefault()}},za.prototype._onTimeout=function(N){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(N)},za.prototype._start=function(N){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var W=_.mousePos(this._el,N);this._around=o.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(W)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},za.prototype.renderFrame=function(){var N=this;if(this._frameId&&(this._frameId=null,this.isActive())){var W=this._map.transform;if(0!==this._delta){var H="wheel"===this._type&&Math.abs(this._delta)>ds?this._wheelZoomRate:this._defaultZoomRate,C=2/(1+Math.exp(-Math.abs(this._delta*H)));this._delta<0&&0!==C&&(C=1/C);var G="number"==typeof this._targetZoom?W.zoomScale(this._targetZoom):W.scale;this._targetZoom=Math.min(W.maxZoom,Math.max(W.minZoom,W.scaleZoom(G*C))),"wheel"===this._type&&(this._startZoom=W.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Q,oe="number"==typeof this._targetZoom?this._targetZoom:W.zoom,de=this._startZoom,Ae=this._easing,De=!1;if("wheel"===this._type&&de&&Ae){var je=Math.min((o.browser.now()-this._lastWheelEventTime)/200,1),Ye=Ae(je);Q=o.number(de,oe,Ye),je<1?this._frameId||(this._frameId=!0):De=!0}else Q=oe,De=!0;return this._active=!0,De&&(this._active=!1,this._finishTimeout=setTimeout(function(){N._zooming=!1,N._handler._triggerRenderFrame(),delete N._targetZoom,delete N._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!De,zoomDelta:Q-W.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},za.prototype._smoothOutEasing=function(N){var W=o.ease;if(this._prevEase){var H=this._prevEase,C=(o.browser.now()-H.start)/H.duration,G=H.easing(C+.01)-H.easing(C),Q=.27/Math.sqrt(G*G+1e-4)*.01,oe=Math.sqrt(.0729-Q*Q);W=o.bezier(Q,oe,.25,1)}return this._prevEase={start:o.browser.now(),duration:N,easing:W},W},za.prototype.reset=function(){this._active=!1};var Ys=function(N,W){this._clickZoom=N,this._tapZoom=W};Ys.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Ys.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Ys.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Ys.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var wo=function(){this.reset()};wo.prototype.reset=function(){this._active=!1},wo.prototype.dblclick=function(N,W){return N.preventDefault(),{cameraAnimation:function(H){H.easeTo({duration:300,zoom:H.getZoom()+(N.shiftKey?-1:1),around:H.unproject(W)},{originalEvent:N})}}},wo.prototype.enable=function(){this._enabled=!0},wo.prototype.disable=function(){this._enabled=!1,this.reset()},wo.prototype.isEnabled=function(){return this._enabled},wo.prototype.isActive=function(){return this._active};var Jo=function(){this._tap=new fl({numTouches:1,numTaps:1}),this.reset()};Jo.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Jo.prototype.touchstart=function(N,W,H){this._swipePoint||(this._tapTime&&N.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?H.length>0&&(this._swipePoint=W[0],this._swipeTouch=H[0].identifier):this._tap.touchstart(N,W,H))},Jo.prototype.touchmove=function(N,W,H){if(this._tapTime){if(this._swipePoint){if(H[0].identifier!==this._swipeTouch)return;var C=W[0],G=C.y-this._swipePoint.y;return this._swipePoint=C,N.preventDefault(),this._active=!0,{zoomDelta:G/128}}}else this._tap.touchmove(N,W,H)},Jo.prototype.touchend=function(N,W,H){this._tapTime?this._swipePoint&&0===H.length&&this.reset():this._tap.touchend(N,W,H)&&(this._tapTime=N.timeStamp)},Jo.prototype.touchcancel=function(){this.reset()},Jo.prototype.enable=function(){this._enabled=!0},Jo.prototype.disable=function(){this._enabled=!1,this.reset()},Jo.prototype.isEnabled=function(){return this._enabled},Jo.prototype.isActive=function(){return this._active};var Ya=function(N,W,H){this._el=N,this._mousePan=W,this._touchPan=H};Ya.prototype.enable=function(N){this._inertiaOptions=N||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Ya.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Ya.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Ya.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var $o=function(N,W,H){this._pitchWithRotate=N.pitchWithRotate,this._mouseRotate=W,this._mousePitch=H};$o.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},$o.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},$o.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},$o.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Qo=function(N,W,H,C){this._el=N,this._touchZoom=W,this._touchRotate=H,this._tapDragZoom=C,this._rotationDisabled=!1,this._enabled=!0};Qo.prototype.enable=function(N){this._touchZoom.enable(N),this._rotationDisabled||this._touchRotate.enable(N),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Qo.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Qo.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Qo.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Qo.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Qo.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var As=function(N){return N.zoom||N.drag||N.pitch||N.rotate},dl=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W}(o.Event);function Ms(N){return N.panDelta&&N.panDelta.mag()||N.zoomDelta||N.bearingDelta||N.pitchDelta}var Mi=function(N,W){this._map=N,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new xo(N),this._bearingSnap=W.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(W),o.bindAll(["handleEvent","handleWindowEvent"],this);var H=this._el;this._listeners=[[H,"touchstart",{passive:!0}],[H,"touchmove",{passive:!1}],[H,"touchend",void 0],[H,"touchcancel",void 0],[H,"mousedown",void 0],[H,"mousemove",void 0],[H,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[H,"mouseover",void 0],[H,"mouseout",void 0],[H,"dblclick",void 0],[H,"click",void 0],[H,"keydown",{capture:!1}],[H,"keyup",void 0],[H,"wheel",{passive:!1}],[H,"contextmenu",void 0],[o.window,"blur",void 0]];for(var C=0,G=this._listeners;C<G.length;C+=1){var Q=G[C],oe=Q[0];_.addEventListener(oe,Q[1],oe===o.window.document?this.handleWindowEvent:this.handleEvent,Q[2])}};Mi.prototype.destroy=function(){for(var N=0,W=this._listeners;N<W.length;N+=1){var H=W[N],C=H[0];_.removeEventListener(C,H[1],C===o.window.document?this.handleWindowEvent:this.handleEvent,H[2])}},Mi.prototype._addDefaultHandlers=function(N){var W=this._map,H=W.getCanvasContainer();this._add("mapEvent",new Ra(W,N));var C=W.boxZoom=new Bi(W,N);this._add("boxZoom",C);var G=new Qa,Q=new wo;W.doubleClickZoom=new Ys(Q,G),this._add("tapZoom",G),this._add("clickZoom",Q);var oe=new Jo;this._add("tapDragZoom",oe);var de=W.touchPitch=new hl;this._add("touchPitch",de);var Ae=new fs(N),De=new _o(N);W.dragRotate=new $o(N,Ae,De),this._add("mouseRotate",Ae,["mousePitch"]),this._add("mousePitch",De,["mouseRotate"]);var je=new Ml(N),Ye=new Ko(N);W.dragPan=new Ya(H,je,Ye),this._add("mousePan",je),this._add("touchPan",Ye,["touchZoom","touchRotate"]);var Ke=new hs,st=new qs;W.touchZoomRotate=new Qo(H,st,Ke,oe),this._add("touchRotate",Ke,["touchPan","touchZoom"]),this._add("touchZoom",st,["touchPan","touchRotate"]);var mt=W.scrollZoom=new za(W,this);this._add("scrollZoom",mt,["mousePan"]);var xt=W.keyboard=new Or;this._add("keyboard",xt),this._add("blockableMapEvent",new ja(W));for(var Et=0,Dt=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Et<Dt.length;Et+=1){var It=Dt[Et];N.interactive&&N[It]&&W[It].enable(N[It])}},Mi.prototype._add=function(N,W,H){this._handlers.push({handlerName:N,handler:W,allowed:H}),this._handlersById[N]=W},Mi.prototype.stop=function(N){if(!this._updatingCamera){for(var W=0,H=this._handlers;W<H.length;W+=1)H[W].handler.reset();this._inertia.clear(),this._fireEvents({},{},N),this._changes=[]}},Mi.prototype.isActive=function(){for(var N=0,W=this._handlers;N<W.length;N+=1)if(W[N].handler.isActive())return!0;return!1},Mi.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Mi.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Mi.prototype.isMoving=function(){return!!As(this._eventsInProgress)||this.isZooming()},Mi.prototype._blockedByActive=function(N,W,H){for(var C in N)if(C!==H&&(!W||W.indexOf(C)<0))return!0;return!1},Mi.prototype.handleWindowEvent=function(N){this.handleEvent(N,N.type+"Window")},Mi.prototype._getMapTouches=function(N){for(var W=[],H=0,C=N;H<C.length;H+=1){var G=C[H];this._el.contains(G.target)&&W.push(G)}return W},Mi.prototype.handleEvent=function(N,W){if("blur"!==N.type){this._updatingCamera=!0;for(var H="renderFrame"===N.type?void 0:N,C={needsRenderFrame:!1},G={},Q={},oe=N.touches?this._getMapTouches(N.touches):void 0,de=oe?_.touchPos(this._el,oe):_.mousePos(this._el,N),Ae=0,De=this._handlers;Ae<De.length;Ae+=1){var je=De[Ae],Ye=je.handlerName,Ke=je.handler,st=je.allowed;if(Ke.isEnabled()){var mt=void 0;this._blockedByActive(Q,st,Ye)?Ke.reset():Ke[W||N.type]&&(mt=Ke[W||N.type](N,de,oe),this.mergeHandlerResult(C,G,mt,Ye,H),mt&&mt.needsRenderFrame&&this._triggerRenderFrame()),(mt||Ke.isActive())&&(Q[Ye]=Ke)}}var xt={};for(var Et in this._previousActiveHandlers)Q[Et]||(xt[Et]=H);this._previousActiveHandlers=Q,(Object.keys(xt).length||Ms(C))&&(this._changes.push([C,G,xt]),this._triggerRenderFrame()),(Object.keys(Q).length||Ms(C))&&this._map._stop(!0),this._updatingCamera=!1;var Dt=C.cameraAnimation;Dt&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Dt(this._map))}else this.stop(!0)},Mi.prototype.mergeHandlerResult=function(N,W,H,C,G){if(H){o.extend(N,H);var Q={handlerName:C,originalEvent:H.originalEvent||G};void 0!==H.zoomDelta&&(W.zoom=Q),void 0!==H.panDelta&&(W.drag=Q),void 0!==H.pitchDelta&&(W.pitch=Q),void 0!==H.bearingDelta&&(W.rotate=Q)}},Mi.prototype._applyChanges=function(){for(var N={},W={},H={},C=0,G=this._changes;C<G.length;C+=1){var Q=G[C],oe=Q[0],de=Q[1],Ae=Q[2];oe.panDelta&&(N.panDelta=(N.panDelta||new o.Point(0,0))._add(oe.panDelta)),oe.zoomDelta&&(N.zoomDelta=(N.zoomDelta||0)+oe.zoomDelta),oe.bearingDelta&&(N.bearingDelta=(N.bearingDelta||0)+oe.bearingDelta),oe.pitchDelta&&(N.pitchDelta=(N.pitchDelta||0)+oe.pitchDelta),void 0!==oe.around&&(N.around=oe.around),void 0!==oe.pinchAround&&(N.pinchAround=oe.pinchAround),oe.noInertia&&(N.noInertia=oe.noInertia),o.extend(W,de),o.extend(H,Ae)}this._updateMapTransform(N,W,H),this._changes=[]},Mi.prototype._updateMapTransform=function(N,W,H){var C=this._map,G=C.transform;if(!Ms(N))return this._fireEvents(W,H,!0);var Q=N.panDelta,oe=N.zoomDelta,de=N.bearingDelta,Ae=N.pitchDelta,De=N.around,je=N.pinchAround;void 0!==je&&(De=je),C._stop(!0),De=De||C.transform.centerPoint;var Ye=G.pointLocation(Q?De.sub(Q):De);de&&(G.bearing+=de),Ae&&(G.pitch+=Ae),oe&&(G.zoom+=oe),G.setLocationAtPoint(Ye,De),this._map._update(),N.noInertia||this._inertia.record(N),this._fireEvents(W,H,!0)},Mi.prototype._fireEvents=function(N,W,H){var C=this,G=As(this._eventsInProgress),Q=As(N),oe={};for(var de in N)this._eventsInProgress[de]||(oe[de+"start"]=N[de].originalEvent),this._eventsInProgress[de]=N[de];for(var De in!G&&Q&&this._fireEvent("movestart",Q.originalEvent),oe)this._fireEvent(De,oe[De]);for(var je in Q&&this._fireEvent("move",Q.originalEvent),N)this._fireEvent(je,N[je].originalEvent);var Ke,st={};for(var mt in this._eventsInProgress){var xt=this._eventsInProgress[mt],Et=xt.handlerName,Dt=xt.originalEvent;this._handlersById[Et].isActive()||(delete this._eventsInProgress[mt],st[mt+"end"]=Ke=W[Et]||Dt)}for(var It in st)this._fireEvent(It,st[It]);var qt=As(this._eventsInProgress);if(H&&(G||Q)&&!qt){this._updatingCamera=!0;var Ft=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),on=function(Qt){return 0!==Qt&&-C._bearingSnap<Qt&&Qt<C._bearingSnap};Ft?(on(Ft.bearing||this._map.getBearing())&&(Ft.bearing=0),this._map.easeTo(Ft,{originalEvent:Ke})):(this._map.fire(new o.Event("moveend",{originalEvent:Ke})),on(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Mi.prototype._fireEvent=function(N,W){this._map.fire(new o.Event(N,W?{originalEvent:W}:{}))},Mi.prototype._requestFrame=function(){var N=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(W){delete N._frameId,N.handleEvent(new dl("renderFrame",{timeStamp:W})),N._applyChanges()})},Mi.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var Aa=function(N){function W(H,C){N.call(this),this._moving=!1,this._zooming=!1,this.transform=H,this._bearingSnap=C.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.getCenter=function(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)},W.prototype.setCenter=function(H,C){return this.jumpTo({center:H},C)},W.prototype.panBy=function(H,C,G){return H=o.Point.convert(H).mult(-1),this.panTo(this.transform.center,o.extend({offset:H},C),G)},W.prototype.panTo=function(H,C,G){return this.easeTo(o.extend({center:H},C),G)},W.prototype.getZoom=function(){return this.transform.zoom},W.prototype.setZoom=function(H,C){return this.jumpTo({zoom:H},C),this},W.prototype.zoomTo=function(H,C,G){return this.easeTo(o.extend({zoom:H},C),G)},W.prototype.zoomIn=function(H,C){return this.zoomTo(this.getZoom()+1,H,C),this},W.prototype.zoomOut=function(H,C){return this.zoomTo(this.getZoom()-1,H,C),this},W.prototype.getBearing=function(){return this.transform.bearing},W.prototype.setBearing=function(H,C){return this.jumpTo({bearing:H},C),this},W.prototype.getPadding=function(){return this.transform.padding},W.prototype.setPadding=function(H,C){return this.jumpTo({padding:H},C),this},W.prototype.rotateTo=function(H,C,G){return this.easeTo(o.extend({bearing:H},C),G)},W.prototype.resetNorth=function(H,C){return this.rotateTo(0,o.extend({duration:1e3},H),C),this},W.prototype.resetNorthPitch=function(H,C){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},H),C),this},W.prototype.snapToNorth=function(H,C){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(H,C):this},W.prototype.getPitch=function(){return this.transform.pitch},W.prototype.setPitch=function(H,C){return this.jumpTo({pitch:H},C),this},W.prototype.cameraForBounds=function(H,C){H=o.LngLatBounds.convert(H);var G=C&&C.bearing||0;return this._cameraForBoxAndBearing(H.getNorthWest(),H.getSouthEast(),G,C)},W.prototype._cameraForBoxAndBearing=function(H,C,G,Q){var oe={top:0,bottom:0,right:0,left:0};if("number"==typeof(Q=o.extend({padding:oe,offset:[0,0],maxZoom:this.transform.maxZoom},Q)).padding){var de=Q.padding;Q.padding={top:de,bottom:de,right:de,left:de}}Q.padding=o.extend(oe,Q.padding);var Ae=this.transform,De=Ae.padding,je=Ae.project(o.LngLat.convert(H)),Ye=Ae.project(o.LngLat.convert(C)),Ke=je.rotate(-G*Math.PI/180),st=Ye.rotate(-G*Math.PI/180),mt=new o.Point(Math.max(Ke.x,st.x),Math.max(Ke.y,st.y)),xt=new o.Point(Math.min(Ke.x,st.x),Math.min(Ke.y,st.y)),Et=mt.sub(xt),Dt=(Ae.width-(De.left+De.right+Q.padding.left+Q.padding.right))/Et.x,It=(Ae.height-(De.top+De.bottom+Q.padding.top+Q.padding.bottom))/Et.y;if(!(It<0||Dt<0)){var qt=Math.min(Ae.scaleZoom(Ae.scale*Math.min(Dt,It)),Q.maxZoom),Ft="number"==typeof Q.offset.x?new o.Point(Q.offset.x,Q.offset.y):o.Point.convert(Q.offset),Kt=new o.Point((Q.padding.left-Q.padding.right)/2,(Q.padding.top-Q.padding.bottom)/2).rotate(G*Math.PI/180),kn=Ft.add(Kt).mult(Ae.scale/Ae.zoomScale(qt));return{center:Ae.unproject(je.add(Ye).div(2).sub(kn)),zoom:qt,bearing:G}}o.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},W.prototype.fitBounds=function(H,C,G){return this._fitInternal(this.cameraForBounds(H,C),C,G)},W.prototype.fitScreenCoordinates=function(H,C,G,Q,oe){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.Point.convert(H)),this.transform.pointLocation(o.Point.convert(C)),G,Q),Q,oe)},W.prototype._fitInternal=function(H,C,G){return H?(delete(C=o.extend(H,C)).padding,C.linear?this.easeTo(C,G):this.flyTo(C,G)):this},W.prototype.jumpTo=function(H,C){this.stop();var G=this.transform,Q=!1,oe=!1,de=!1;return"zoom"in H&&G.zoom!==+H.zoom&&(Q=!0,G.zoom=+H.zoom),void 0!==H.center&&(G.center=o.LngLat.convert(H.center)),"bearing"in H&&G.bearing!==+H.bearing&&(oe=!0,G.bearing=+H.bearing),"pitch"in H&&G.pitch!==+H.pitch&&(de=!0,G.pitch=+H.pitch),null==H.padding||G.isPaddingEqual(H.padding)||(G.padding=H.padding),this.fire(new o.Event("movestart",C)).fire(new o.Event("move",C)),Q&&this.fire(new o.Event("zoomstart",C)).fire(new o.Event("zoom",C)).fire(new o.Event("zoomend",C)),oe&&this.fire(new o.Event("rotatestart",C)).fire(new o.Event("rotate",C)).fire(new o.Event("rotateend",C)),de&&this.fire(new o.Event("pitchstart",C)).fire(new o.Event("pitch",C)).fire(new o.Event("pitchend",C)),this.fire(new o.Event("moveend",C))},W.prototype.easeTo=function(H,C){var G=this;this._stop(!1,H.easeId),(!1===(H=o.extend({offset:[0,0],duration:500,easing:o.ease},H)).animate||!H.essential&&o.browser.prefersReducedMotion)&&(H.duration=0);var Q=this.transform,oe=this.getZoom(),de=this.getBearing(),Ae=this.getPitch(),De=this.getPadding(),je="zoom"in H?+H.zoom:oe,Ye="bearing"in H?this._normalizeBearing(H.bearing,de):de,Ke="pitch"in H?+H.pitch:Ae,st="padding"in H?H.padding:Q.padding,mt=o.Point.convert(H.offset),xt=Q.centerPoint.add(mt),Et=Q.pointLocation(xt),Dt=o.LngLat.convert(H.center||Et);this._normalizeCenter(Dt);var It,qt,Ft=Q.project(Et),on=Q.project(Dt).sub(Ft),Qt=Q.zoomScale(je-oe);H.around&&(It=o.LngLat.convert(H.around),qt=Q.locationPoint(It));var Kt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||je!==oe,this._rotating=this._rotating||de!==Ye,this._pitching=this._pitching||Ke!==Ae,this._padding=!Q.isPaddingEqual(st),this._easeId=H.easeId,this._prepareEase(C,H.noMoveStart,Kt),this._ease(function(kn){if(G._zooming&&(Q.zoom=o.number(oe,je,kn)),G._rotating&&(Q.bearing=o.number(de,Ye,kn)),G._pitching&&(Q.pitch=o.number(Ae,Ke,kn)),G._padding&&(Q.interpolatePadding(De,st,kn),xt=Q.centerPoint.add(mt)),It)Q.setLocationAtPoint(It,qt);else{var En=Q.zoomScale(Q.zoom-oe),Bn=je>oe?Math.min(2,Qt):Math.max(.5,Qt),qn=Math.pow(Bn,1-kn),er=Q.unproject(Ft.add(on.mult(kn*qn)).mult(En));Q.setLocationAtPoint(Q.renderWorldCopies?er.wrap():er,xt)}G._fireMoveEvents(C)},function(kn){G._afterEase(C,kn)},H),this},W.prototype._prepareEase=function(H,C,G){void 0===G&&(G={}),this._moving=!0,C||G.moving||this.fire(new o.Event("movestart",H)),this._zooming&&!G.zooming&&this.fire(new o.Event("zoomstart",H)),this._rotating&&!G.rotating&&this.fire(new o.Event("rotatestart",H)),this._pitching&&!G.pitching&&this.fire(new o.Event("pitchstart",H))},W.prototype._fireMoveEvents=function(H){this.fire(new o.Event("move",H)),this._zooming&&this.fire(new o.Event("zoom",H)),this._rotating&&this.fire(new o.Event("rotate",H)),this._pitching&&this.fire(new o.Event("pitch",H))},W.prototype._afterEase=function(H,C){if(!this._easeId||!C||this._easeId!==C){delete this._easeId;var G=this._zooming,Q=this._rotating,oe=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,G&&this.fire(new o.Event("zoomend",H)),Q&&this.fire(new o.Event("rotateend",H)),oe&&this.fire(new o.Event("pitchend",H)),this.fire(new o.Event("moveend",H))}},W.prototype.flyTo=function(H,C){var G=this;if(!H.essential&&o.browser.prefersReducedMotion){var Q=o.pick(H,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Q,C)}this.stop(),H=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},H);var oe=this.transform,de=this.getZoom(),Ae=this.getBearing(),De=this.getPitch(),je=this.getPadding(),Ye="zoom"in H?o.clamp(+H.zoom,oe.minZoom,oe.maxZoom):de,Ke="bearing"in H?this._normalizeBearing(H.bearing,Ae):Ae,st="pitch"in H?+H.pitch:De,mt="padding"in H?H.padding:oe.padding,xt=oe.zoomScale(Ye-de),Et=o.Point.convert(H.offset),Dt=oe.centerPoint.add(Et),It=oe.pointLocation(Dt),qt=o.LngLat.convert(H.center||It);this._normalizeCenter(qt);var Ft=oe.project(It),on=oe.project(qt).sub(Ft),Qt=H.curve,Kt=Math.max(oe.width,oe.height),kn=Kt/xt,En=on.mag();if("minZoom"in H){var Bn=o.clamp(Math.min(H.minZoom,de,Ye),oe.minZoom,oe.maxZoom),qn=Kt/oe.zoomScale(Bn-de);Qt=Math.sqrt(qn/En*2)}var er=Qt*Qt;function gr(Mr){var Gr=(kn*kn-Kt*Kt+(Mr?-1:1)*er*er*En*En)/(2*(Mr?kn:Kt)*er*En);return Math.log(Math.sqrt(Gr*Gr+1)-Gr)}function wr(Mr){return(Math.exp(Mr)-Math.exp(-Mr))/2}function sr(Mr){return(Math.exp(Mr)+Math.exp(-Mr))/2}var _r=gr(0),Dr=function(Mr){return sr(_r)/sr(_r+Qt*Mr)},Wr=function(Mr){return Kt*((sr(_r)*(wr(Gr=_r+Qt*Mr)/sr(Gr))-wr(_r))/er)/En;var Gr},mr=(gr(1)-_r)/Qt;if(Math.abs(En)<1e-6||!isFinite(mr)){if(Math.abs(Kt-kn)<1e-6)return this.easeTo(H,C);var br=kn<Kt?-1:1;mr=Math.abs(Math.log(kn/Kt))/Qt,Wr=function(){return 0},Dr=function(Mr){return Math.exp(br*Qt*Mr)}}return H.duration="duration"in H?+H.duration:1e3*mr/("screenSpeed"in H?+H.screenSpeed/Qt:+H.speed),H.maxDuration&&H.duration>H.maxDuration&&(H.duration=0),this._zooming=!0,this._rotating=Ae!==Ke,this._pitching=st!==De,this._padding=!oe.isPaddingEqual(mt),this._prepareEase(C,!1),this._ease(function(Mr){var Gr=Mr*mr,$r=1/Dr(Gr);oe.zoom=1===Mr?Ye:de+oe.scaleZoom($r),G._rotating&&(oe.bearing=o.number(Ae,Ke,Mr)),G._pitching&&(oe.pitch=o.number(De,st,Mr)),G._padding&&(oe.interpolatePadding(je,mt,Mr),Dt=oe.centerPoint.add(Et));var si=1===Mr?qt:oe.unproject(Ft.add(on.mult(Wr(Gr))).mult($r));oe.setLocationAtPoint(oe.renderWorldCopies?si.wrap():si,Dt),G._fireMoveEvents(C)},function(){return G._afterEase(C)},H),this},W.prototype.isEasing=function(){return!!this._easeFrameId},W.prototype.stop=function(){return this._stop()},W.prototype._stop=function(H,C){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var G=this._onEaseEnd;delete this._onEaseEnd,G.call(this,C)}if(!H){var Q=this.handlers;Q&&Q.stop(!1)}return this},W.prototype._ease=function(H,C,G){!1===G.animate||0===G.duration?(H(1),C()):(this._easeStart=o.browser.now(),this._easeOptions=G,this._onEaseFrame=H,this._onEaseEnd=C,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},W.prototype._renderFrameCallback=function(){var H=Math.min((o.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(H)),H<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},W.prototype._normalizeBearing=function(H,C){H=o.wrap(H,-180,180);var G=Math.abs(H-C);return Math.abs(H-360-C)<G&&(H-=360),Math.abs(H+360-C)<G&&(H+=360),H},W.prototype._normalizeCenter=function(H){var C=this.transform;if(C.renderWorldCopies&&!C.lngRange){var G=H.lng-C.center.lng;H.lng+=G>180?-360:G<-180?360:0}},W}(o.Evented),ho=function(N){void 0===N&&(N={}),this.options=N,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};ho.prototype.getDefaultPosition=function(){return"bottom-right"},ho.prototype.onAdd=function(N){var W=this.options&&this.options.compact;return this._map=N,this._container=_.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=_.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=_.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),W&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===W&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},ho.prototype.onRemove=function(){_.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},ho.prototype._setElementTitle=function(N,W){var H=this._map._getUIString("AttributionControl."+W);N.title=H,N.setAttribute("aria-label",H)},ho.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},ho.prototype._updateEditLink=function(){var N=this._editLink;N||(N=this._editLink=this._container.querySelector(".mapbox-improve-map"));var W=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(N){var H=W.reduce(function(C,G,Q){return G.value&&(C+=G.key+"="+G.value+(Q<W.length-1?"&":"")),C},"?");N.href=o.config.FEEDBACK_URL+"/"+H+(this._map._hash?this._map._hash.getHashString(!0):""),N.rel="noopener nofollow",this._setElementTitle(N,"MapFeedback")}},ho.prototype._updateData=function(N){!N||"metadata"!==N.sourceDataType&&"visibility"!==N.sourceDataType&&"style"!==N.dataType||(this._updateAttributions(),this._updateEditLink())},ho.prototype._updateAttributions=function(){if(this._map.style){var N=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?N=N.concat(this.options.customAttribution.map(function(de){return"string"!=typeof de?"":de})):"string"==typeof this.options.customAttribution&&N.push(this.options.customAttribution)),this._map.style.stylesheet){var W=this._map.style.stylesheet;this.styleOwner=W.owner,this.styleId=W.id}var H=this._map.style.sourceCaches;for(var C in H){var G=H[C];if(G.used){var Q=G.getSource();Q.attribution&&N.indexOf(Q.attribution)<0&&N.push(Q.attribution)}}N.sort(function(de,Ae){return de.length-Ae.length});var oe=(N=N.filter(function(de,Ae){for(var De=Ae+1;De<N.length;De++)if(N[De].indexOf(de)>=0)return!1;return!0})).join(" | ");oe!==this._attribHTML&&(this._attribHTML=oe,N.length?(this._innerContainer.innerHTML=oe,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},ho.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Ss=function(){o.bindAll(["_updateLogo"],this),o.bindAll(["_updateCompact"],this)};Ss.prototype.onAdd=function(N){this._map=N,this._container=_.create("div","mapboxgl-ctrl");var W=_.create("a","mapboxgl-ctrl-logo");return W.target="_blank",W.rel="noopener nofollow",W.href="https://www.mapbox.com/",W.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),W.setAttribute("rel","noopener nofollow"),this._container.appendChild(W),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Ss.prototype.onRemove=function(){_.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Ss.prototype.getDefaultPosition=function(){return"bottom-left"},Ss.prototype._updateLogo=function(N){N&&"metadata"!==N.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Ss.prototype._logoRequired=function(){if(this._map.style){var N=this._map.style.sourceCaches;for(var W in N)if(N[W].getSource().mapbox_logo)return!0;return!1}},Ss.prototype._updateCompact=function(){var N=this._container.children;if(N.length){var W=N[0];this._map.getCanvasContainer().offsetWidth<250?W.classList.add("mapboxgl-compact"):W.classList.remove("mapboxgl-compact")}};var Ma=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Ma.prototype.add=function(N){var W=++this._id;return this._queue.push({callback:N,id:W,cancelled:!1}),W},Ma.prototype.remove=function(N){for(var W=this._currentlyRunning,H=0,C=W?this._queue.concat(W):this._queue;H<C.length;H+=1){var G=C[H];if(G.id===N)return void(G.cancelled=!0)}},Ma.prototype.run=function(N){void 0===N&&(N=0);var W=this._currentlyRunning=this._queue;this._queue=[];for(var H=0,C=W;H<C.length;H+=1){var G=C[H];if(!G.cancelled&&(G.callback(N),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Ma.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Sl={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Rl=o.window.HTMLImageElement,to=o.window.HTMLElement,bi=o.window.ImageBitmap,Es={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},es=function(N){function W(C){var G=this;if(null!=(C=o.extend({},Es,C)).minZoom&&null!=C.maxZoom&&C.minZoom>C.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=C.minPitch&&null!=C.maxPitch&&C.minPitch>C.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=C.minPitch&&C.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=C.maxPitch&&C.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var Q=new Ai(C.minZoom,C.maxZoom,C.minPitch,C.maxPitch,C.renderWorldCopies);if(N.call(this,Q,C),this._interactive=C.interactive,this._maxTileCacheSize=C.maxTileCacheSize,this._failIfMajorPerformanceCaveat=C.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=C.preserveDrawingBuffer,this._antialias=C.antialias,this._trackResize=C.trackResize,this._bearingSnap=C.bearingSnap,this._refreshExpiredTiles=C.refreshExpiredTiles,this._fadeDuration=C.fadeDuration,this._crossSourceCollisions=C.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=C.collectResourceTiming,this._renderTaskQueue=new Ma,this._controls=[],this._mapId=o.uniqueId(),this._locale=o.extend({},Sl,C.locale),this._clickTolerance=C.clickTolerance,this._requestManager=new o.RequestManager(C.transformRequest,C.accessToken),"string"==typeof C.container){if(this._container=o.window.document.getElementById(C.container),!this._container)throw new Error("Container '"+C.container+"' not found.")}else{if(!(C.container instanceof to))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=C.container}if(C.maxBounds&&this.setMaxBounds(C.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return G._update(!1)}),this.on("moveend",function(){return G._update(!1)}),this.on("zoom",function(){return G._update(!0)}),void 0!==o.window&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Mi(this,C),this._hash=C.hash&&new Ro("string"==typeof C.hash&&C.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:C.center,zoom:C.zoom,bearing:C.bearing,pitch:C.pitch}),C.bounds&&(this.resize(),this.fitBounds(C.bounds,o.extend({},C.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=C.localIdeographFontFamily,C.style&&this.setStyle(C.style,{localIdeographFontFamily:C.localIdeographFontFamily}),C.attributionControl&&this.addControl(new ho({customAttribution:C.customAttribution})),this.addControl(new Ss,C.logoPosition),this.on("style.load",function(){G.transform.unmodified&&G.jumpTo(G.style.stylesheet)}),this.on("data",function(de){G._update("style"===de.dataType),G.fire(new o.Event(de.dataType+"data",de))}),this.on("dataloading",function(de){G.fire(new o.Event(de.dataType+"dataloading",de))})}N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W;var H={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return W.prototype._getMapId=function(){return this._mapId},W.prototype.addControl=function(C,G){if(void 0===G&&(G=C.getDefaultPosition?C.getDefaultPosition():"top-right"),!C||!C.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Q=C.onAdd(this);this._controls.push(C);var oe=this._controlPositions[G];return-1!==G.indexOf("bottom")?oe.insertBefore(Q,oe.firstChild):oe.appendChild(Q),this},W.prototype.removeControl=function(C){if(!C||!C.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var G=this._controls.indexOf(C);return G>-1&&this._controls.splice(G,1),C.onRemove(this),this},W.prototype.hasControl=function(C){return this._controls.indexOf(C)>-1},W.prototype.resize=function(C){var G=this._containerDimensions(),Q=G[0],oe=G[1];this._resizeCanvas(Q,oe),this.transform.resize(Q,oe),this.painter.resize(Q,oe);var de=!this._moving;return de&&(this.stop(),this.fire(new o.Event("movestart",C)).fire(new o.Event("move",C))),this.fire(new o.Event("resize",C)),de&&this.fire(new o.Event("moveend",C)),this},W.prototype.getBounds=function(){return this.transform.getBounds()},W.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},W.prototype.setMaxBounds=function(C){return this.transform.setMaxBounds(o.LngLatBounds.convert(C)),this._update()},W.prototype.setMinZoom=function(C){if((C=C??-2)>=-2&&C<=this.transform.maxZoom)return this.transform.minZoom=C,this._update(),this.getZoom()<C&&this.setZoom(C),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},W.prototype.getMinZoom=function(){return this.transform.minZoom},W.prototype.setMaxZoom=function(C){if((C=C??22)>=this.transform.minZoom)return this.transform.maxZoom=C,this._update(),this.getZoom()>C&&this.setZoom(C),this;throw new Error("maxZoom must be greater than the current minZoom")},W.prototype.getMaxZoom=function(){return this.transform.maxZoom},W.prototype.setMinPitch=function(C){if((C=C??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(C>=0&&C<=this.transform.maxPitch)return this.transform.minPitch=C,this._update(),this.getPitch()<C&&this.setPitch(C),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},W.prototype.getMinPitch=function(){return this.transform.minPitch},W.prototype.setMaxPitch=function(C){if((C=C??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(C>=this.transform.minPitch)return this.transform.maxPitch=C,this._update(),this.getPitch()>C&&this.setPitch(C),this;throw new Error("maxPitch must be greater than the current minPitch")},W.prototype.getMaxPitch=function(){return this.transform.maxPitch},W.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},W.prototype.setRenderWorldCopies=function(C){return this.transform.renderWorldCopies=C,this._update()},W.prototype.project=function(C){return this.transform.locationPoint(o.LngLat.convert(C))},W.prototype.unproject=function(C){return this.transform.pointLocation(o.Point.convert(C))},W.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},W.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},W.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},W.prototype._createDelegatedListener=function(C,G,Q){var oe,de=this;if("mouseenter"===C||"mouseover"===C){var Ae=!1;return{layer:G,listener:Q,delegates:{mousemove:function(je){var Ye=de.getLayer(G)?de.queryRenderedFeatures(je.point,{layers:[G]}):[];Ye.length?Ae||(Ae=!0,Q.call(de,new $a(C,de,je.originalEvent,{features:Ye}))):Ae=!1},mouseout:function(){Ae=!1}}}}if("mouseleave"===C||"mouseout"===C){var De=!1;return{layer:G,listener:Q,delegates:{mousemove:function(je){(de.getLayer(G)?de.queryRenderedFeatures(je.point,{layers:[G]}):[]).length?De=!0:De&&(De=!1,Q.call(de,new $a(C,de,je.originalEvent)))},mouseout:function(je){De&&(De=!1,Q.call(de,new $a(C,de,je.originalEvent)))}}}}return{layer:G,listener:Q,delegates:(oe={},oe[C]=function(je){var Ye=de.getLayer(G)?de.queryRenderedFeatures(je.point,{layers:[G]}):[];Ye.length&&(je.features=Ye,Q.call(de,je),delete je.features)},oe)}},W.prototype.on=function(C,G,Q){if(void 0===Q)return N.prototype.on.call(this,C,G);var oe=this._createDelegatedListener(C,G,Q);for(var de in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[C]=this._delegatedListeners[C]||[],this._delegatedListeners[C].push(oe),oe.delegates)this.on(de,oe.delegates[de]);return this},W.prototype.once=function(C,G,Q){if(void 0===Q)return N.prototype.once.call(this,C,G);var oe=this._createDelegatedListener(C,G,Q);for(var de in oe.delegates)this.once(de,oe.delegates[de]);return this},W.prototype.off=function(C,G,Q){var oe=this;return void 0===Q?N.prototype.off.call(this,C,G):(this._delegatedListeners&&this._delegatedListeners[C]&&function(de){for(var Ae=de[C],De=0;De<Ae.length;De++){var je=Ae[De];if(je.layer===G&&je.listener===Q){for(var Ye in je.delegates)oe.off(Ye,je.delegates[Ye]);return Ae.splice(De,1),oe}}}(this._delegatedListeners),this)},W.prototype.queryRenderedFeatures=function(C,G){if(!this.style)return[];var Q;if(void 0!==G||void 0===C||C instanceof o.Point||Array.isArray(C)||(G=C,C=void 0),G=G||{},(C=C||[[0,0],[this.transform.width,this.transform.height]])instanceof o.Point||"number"==typeof C[0])Q=[o.Point.convert(C)];else{var oe=o.Point.convert(C[0]),de=o.Point.convert(C[1]);Q=[oe,new o.Point(de.x,oe.y),de,new o.Point(oe.x,de.y),oe]}return this.style.queryRenderedFeatures(Q,G,this.transform)},W.prototype.querySourceFeatures=function(C,G){return this.style.querySourceFeatures(C,G)},W.prototype.setStyle=function(C,G){return!1!==(G=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},G)).diff&&G.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&C?(this._diffStyle(C,G),this):(this._localIdeographFontFamily=G.localIdeographFontFamily,this._updateStyle(C,G))},W.prototype._getUIString=function(C){var G=this._locale[C];if(null==G)throw new Error("Missing UI string '"+C+"'");return G},W.prototype._updateStyle=function(C,G){return this.style&&(this.style.setEventedParent(null),this.style._remove()),C?(this.style=new vr(this,G||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof C?this.style.loadURL(C):this.style.loadJSON(C),this):(delete this.style,this)},W.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new vr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},W.prototype._diffStyle=function(C,G){var Q=this;if("string"==typeof C){var oe=this._requestManager.normalizeStyleURL(C),de=this._requestManager.transformRequest(oe,o.ResourceType.Style);o.getJSON(de,function(Ae,De){Ae?Q.fire(new o.ErrorEvent(Ae)):De&&Q._updateDiff(De,G)})}else"object"==typeof C&&this._updateDiff(C,G)},W.prototype._updateDiff=function(C,G){try{this.style.setState(C)&&this._update(!0)}catch(Q){o.warnOnce("Unable to perform style diff: "+(Q.message||Q.error||Q)+".  Rebuilding the style from scratch."),this._updateStyle(C,G)}},W.prototype.getStyle=function(){if(this.style)return this.style.serialize()},W.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():o.warnOnce("There is no style added to the map.")},W.prototype.addSource=function(C,G){return this._lazyInitEmptyStyle(),this.style.addSource(C,G),this._update(!0)},W.prototype.isSourceLoaded=function(C){var G=this.style&&this.style.sourceCaches[C];if(void 0!==G)return G.loaded();this.fire(new o.ErrorEvent(new Error("There is no source with ID '"+C+"'")))},W.prototype.areTilesLoaded=function(){var C=this.style&&this.style.sourceCaches;for(var G in C){var Q=C[G]._tiles;for(var oe in Q){var de=Q[oe];if("loaded"!==de.state&&"errored"!==de.state)return!1}}return!0},W.prototype.addSourceType=function(C,G,Q){return this._lazyInitEmptyStyle(),this.style.addSourceType(C,G,Q)},W.prototype.removeSource=function(C){return this.style.removeSource(C),this._update(!0)},W.prototype.getSource=function(C){return this.style.getSource(C)},W.prototype.addImage=function(C,G,Q){void 0===Q&&(Q={});var oe=Q.pixelRatio;void 0===oe&&(oe=1);var de=Q.sdf;void 0===de&&(de=!1);var Ae=Q.stretchX,De=Q.stretchY,je=Q.content;if(this._lazyInitEmptyStyle(),G instanceof Rl||bi&&G instanceof bi){var Ye=o.browser.getImageData(G);this.style.addImage(C,{data:new o.RGBAImage({width:Ye.width,height:Ye.height},Ye.data),pixelRatio:oe,stretchX:Ae,stretchY:De,content:je,sdf:de,version:0})}else{if(void 0===G.width||void 0===G.height)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var It=G;this.style.addImage(C,{data:new o.RGBAImage({width:G.width,height:G.height},new Uint8Array(G.data)),pixelRatio:oe,stretchX:Ae,stretchY:De,content:je,sdf:de,version:0,userImage:It}),It.onAdd&&It.onAdd(this,C)}},W.prototype.updateImage=function(C,G){var Q=this.style.getImage(C);if(!Q)return this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var oe=G instanceof Rl||bi&&G instanceof bi?o.browser.getImageData(G):G,de=oe.width,Ae=oe.height,De=oe.data;return void 0===de||void 0===Ae?this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):de!==Q.data.width||Ae!==Q.data.height?this.fire(new o.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(Q.data.replace(De,!(G instanceof Rl||bi&&G instanceof bi)),void this.style.updateImage(C,Q))},W.prototype.hasImage=function(C){return C?!!this.style.getImage(C):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)},W.prototype.removeImage=function(C){this.style.removeImage(C)},W.prototype.loadImage=function(C,G){o.getImage(this._requestManager.transformRequest(C,o.ResourceType.Image),G)},W.prototype.listImages=function(){return this.style.listImages()},W.prototype.addLayer=function(C,G){return this._lazyInitEmptyStyle(),this.style.addLayer(C,G),this._update(!0)},W.prototype.moveLayer=function(C,G){return this.style.moveLayer(C,G),this._update(!0)},W.prototype.removeLayer=function(C){return this.style.removeLayer(C),this._update(!0)},W.prototype.getLayer=function(C){return this.style.getLayer(C)},W.prototype.setLayerZoomRange=function(C,G,Q){return this.style.setLayerZoomRange(C,G,Q),this._update(!0)},W.prototype.setFilter=function(C,G,Q){return void 0===Q&&(Q={}),this.style.setFilter(C,G,Q),this._update(!0)},W.prototype.getFilter=function(C){return this.style.getFilter(C)},W.prototype.setPaintProperty=function(C,G,Q,oe){return void 0===oe&&(oe={}),this.style.setPaintProperty(C,G,Q,oe),this._update(!0)},W.prototype.getPaintProperty=function(C,G){return this.style.getPaintProperty(C,G)},W.prototype.setLayoutProperty=function(C,G,Q,oe){return void 0===oe&&(oe={}),this.style.setLayoutProperty(C,G,Q,oe),this._update(!0)},W.prototype.getLayoutProperty=function(C,G){return this.style.getLayoutProperty(C,G)},W.prototype.setLight=function(C,G){return void 0===G&&(G={}),this._lazyInitEmptyStyle(),this.style.setLight(C,G),this._update(!0)},W.prototype.getLight=function(){return this.style.getLight()},W.prototype.setFeatureState=function(C,G){return this.style.setFeatureState(C,G),this._update()},W.prototype.removeFeatureState=function(C,G){return this.style.removeFeatureState(C,G),this._update()},W.prototype.getFeatureState=function(C){return this.style.getFeatureState(C)},W.prototype.getContainer=function(){return this._container},W.prototype.getCanvasContainer=function(){return this._canvasContainer},W.prototype.getCanvas=function(){return this._canvas},W.prototype._containerDimensions=function(){var C=0,G=0;return this._container&&(C=this._container.clientWidth||400,G=this._container.clientHeight||300),[C,G]},W.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},W.prototype._setupContainer=function(){var C=this._container;C.classList.add("mapboxgl-map"),(this._missingCSSCanary=_.create("div","mapboxgl-canary",C)).style.visibility="hidden",this._detectMissingCSS();var G=this._canvasContainer=_.create("div","mapboxgl-canvas-container",C);this._interactive&&G.classList.add("mapboxgl-interactive"),this._canvas=_.create("canvas","mapboxgl-canvas",G),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var Q=this._containerDimensions();this._resizeCanvas(Q[0],Q[1]);var oe=this._controlContainer=_.create("div","mapboxgl-control-container",C),de=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Ae){de[Ae]=_.create("div","mapboxgl-ctrl-"+Ae,oe)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},W.prototype._resizeCanvas=function(C,G){var Q=o.browser.devicePixelRatio||1;this._canvas.width=Q*C,this._canvas.height=Q*G,this._canvas.style.width=C+"px",this._canvas.style.height=G+"px"},W.prototype._setupPainter=function(){var C=o.extend({},T.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),G=this._canvas.getContext("webgl",C)||this._canvas.getContext("experimental-webgl",C);G?(this.painter=new Di(G,this.transform),o.webpSupported.testSupport(G)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))},W.prototype._contextLost=function(C){C.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:C}))},W.prototype._contextRestored=function(C){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:C}))},W.prototype._onMapScroll=function(C){if(C.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},W.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},W.prototype._update=function(C){return this.style?(this._styleDirty=this._styleDirty||C,this._sourcesDirty=!0,this.triggerRepaint(),this):this},W.prototype._requestRenderFrame=function(C){return this._update(),this._renderTaskQueue.add(C)},W.prototype._cancelRenderFrame=function(C){this._renderTaskQueue.remove(C)},W.prototype._render=function(C){var G,Q=this,oe=0,de=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(G=de.createQueryEXT(),de.beginQueryEXT(de.TIME_ELAPSED_EXT,G),oe=o.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(C),!this._removed){var Ae=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var De=this.transform.zoom,je=o.browser.now();this.style.zoomHistory.update(De,je);var Ye=new o.EvaluationParameters(De,{now:je,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ke=Ye.crossFadingFactor();1===Ke&&Ke===this._crossFadingFactor||(Ae=!0,this._crossFadingFactor=Ke),this.style.update(Ye)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&(this.style.hasTransitions()||Ae)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var st=o.browser.now()-oe;de.endQueryEXT(de.TIME_ELAPSED_EXT,G),setTimeout(function(){var Et=de.getQueryObjectEXT(G,de.QUERY_RESULT_EXT)/1e6;de.deleteQueryEXT(G),Q.fire(new o.Event("gpu-timing-frame",{cpuTime:st,gpuTime:Et}))},50)}if(this.listens("gpu-timing-layer")){var mt=this.painter.collectGpuTimers();setTimeout(function(){var Et=Q.painter.queryGpuTimers(mt);Q.fire(new o.Event("gpu-timing-layer",{layerTimes:Et}))},50)}var xt=this._sourcesDirty||this._styleDirty||this._placementDirty;return xt||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.Event("idle")),!this._loaded||this._fullyLoaded||xt||(this._fullyLoaded=!0),this}},W.prototype.remove=function(){this._hash&&this._hash.remove();for(var C=0,G=this._controls;C<G.length;C+=1)G[C].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==o.window&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1));var Q=this.painter.context.gl.getExtension("WEBGL_lose_context");Q&&Q.loseContext&&Q.loseContext(),Cs(this._canvasContainer),Cs(this._controlContainer),Cs(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new o.Event("remove"))},W.prototype.triggerRepaint=function(){var C=this;this.style&&!this._frame&&(this._frame=o.browser.frame(function(G){C._frame=null,C._render(G)}))},W.prototype._onWindowOnline=function(){this._update()},W.prototype._onWindowResize=function(C){this._trackResize&&this.resize({originalEvent:C})._update()},H.showTileBoundaries.get=function(){return!!this._showTileBoundaries},H.showTileBoundaries.set=function(C){this._showTileBoundaries!==C&&(this._showTileBoundaries=C,this._update())},H.showPadding.get=function(){return!!this._showPadding},H.showPadding.set=function(C){this._showPadding!==C&&(this._showPadding=C,this._update())},H.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},H.showCollisionBoxes.set=function(C){this._showCollisionBoxes!==C&&(this._showCollisionBoxes=C,C?this.style._generateCollisionBoxes():this._update())},H.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},H.showOverdrawInspector.set=function(C){this._showOverdrawInspector!==C&&(this._showOverdrawInspector=C,this._update())},H.repaint.get=function(){return!!this._repaint},H.repaint.set=function(C){this._repaint!==C&&(this._repaint=C,this.triggerRepaint())},H.vertices.get=function(){return!!this._vertices},H.vertices.set=function(C){this._vertices=C,this._update()},W.prototype._setCacheLimits=function(C,G){o.setCacheLimits(C,G)},H.version.get=function(){return o.version},Object.defineProperties(W.prototype,H),W}(Aa);function Cs(N){N.parentNode&&N.parentNode.removeChild(N)}var El={showCompass:!0,showZoom:!0,visualizePitch:!1},ts=function(N){var W=this;this.options=o.extend({},El,N),this._container=_.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(H){return H.preventDefault()}),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(H){return W._map.zoomIn({},{originalEvent:H})}),_.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(H){return W._map.zoomOut({},{originalEvent:H})}),_.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(H){W.options.visualizePitch?W._map.resetNorthPitch({},{originalEvent:H}):W._map.resetNorth({},{originalEvent:H})}),this._compassIcon=_.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};ts.prototype._updateZoomButtons=function(){var N=this._map.getZoom(),W=N===this._map.getMaxZoom(),H=N===this._map.getMinZoom();this._zoomInButton.disabled=W,this._zoomOutButton.disabled=H,this._zoomInButton.setAttribute("aria-disabled",W.toString()),this._zoomOutButton.setAttribute("aria-disabled",H.toString())},ts.prototype._rotateCompassArrow=function(){var N=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=N},ts.prototype.onAdd=function(N){return this._map=N,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ji(this._map,this._compass,this.options.visualizePitch)),this._container},ts.prototype.onRemove=function(){_.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},ts.prototype._createButton=function(N,W){var H=_.create("button",N,this._container);return H.type="button",H.addEventListener("click",W),H},ts.prototype._setButtonTitle=function(N,W){var H=this._map._getUIString("NavigationControl."+W);N.title=H,N.setAttribute("aria-label",H)};var Ji=function(N,W,H){void 0===H&&(H=!1),this._clickTolerance=10,this.element=W,this.mouseRotate=new fs({clickTolerance:N.dragRotate._mouseRotate._clickTolerance}),this.map=N,H&&(this.mousePitch=new _o({clickTolerance:N.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),_.addEventListener(W,"mousedown",this.mousedown),_.addEventListener(W,"touchstart",this.touchstart,{passive:!1}),_.addEventListener(W,"touchmove",this.touchmove),_.addEventListener(W,"touchend",this.touchend),_.addEventListener(W,"touchcancel",this.reset)};function pl(N,W,H){if(N=new o.LngLat(N.lng,N.lat),W){var C=new o.LngLat(N.lng-360,N.lat),G=new o.LngLat(N.lng+360,N.lat),Q=H.locationPoint(N).distSqr(W);H.locationPoint(C).distSqr(W)<Q?N=C:H.locationPoint(G).distSqr(W)<Q&&(N=G)}for(;Math.abs(N.lng-H.center.lng)>180;){var oe=H.locationPoint(N);if(oe.x>=0&&oe.y>=0&&oe.x<=H.width&&oe.y<=H.height)break;N.lng>H.center.lng?N.lng-=360:N.lng+=360}return N}Ji.prototype.down=function(N,W){this.mouseRotate.mousedown(N,W),this.mousePitch&&this.mousePitch.mousedown(N,W),_.disableDrag()},Ji.prototype.move=function(N,W){var H=this.map,C=this.mouseRotate.mousemoveWindow(N,W);if(C&&C.bearingDelta&&H.setBearing(H.getBearing()+C.bearingDelta),this.mousePitch){var G=this.mousePitch.mousemoveWindow(N,W);G&&G.pitchDelta&&H.setPitch(H.getPitch()+G.pitchDelta)}},Ji.prototype.off=function(){var N=this.element;_.removeEventListener(N,"mousedown",this.mousedown),_.removeEventListener(N,"touchstart",this.touchstart,{passive:!1}),_.removeEventListener(N,"touchmove",this.touchmove),_.removeEventListener(N,"touchend",this.touchend),_.removeEventListener(N,"touchcancel",this.reset),this.offTemp()},Ji.prototype.offTemp=function(){_.enableDrag(),_.removeEventListener(o.window,"mousemove",this.mousemove),_.removeEventListener(o.window,"mouseup",this.mouseup)},Ji.prototype.mousedown=function(N){this.down(o.extend({},N,{ctrlKey:!0,preventDefault:function(){return N.preventDefault()}}),_.mousePos(this.element,N)),_.addEventListener(o.window,"mousemove",this.mousemove),_.addEventListener(o.window,"mouseup",this.mouseup)},Ji.prototype.mousemove=function(N){this.move(N,_.mousePos(this.element,N))},Ji.prototype.mouseup=function(N){this.mouseRotate.mouseupWindow(N),this.mousePitch&&this.mousePitch.mouseupWindow(N),this.offTemp()},Ji.prototype.touchstart=function(N){1!==N.targetTouches.length?this.reset():(this._startPos=this._lastPos=_.touchPos(this.element,N.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return N.preventDefault()}},this._startPos))},Ji.prototype.touchmove=function(N){1!==N.targetTouches.length?this.reset():(this._lastPos=_.touchPos(this.element,N.targetTouches)[0],this.move({preventDefault:function(){return N.preventDefault()}},this._lastPos))},Ji.prototype.touchend=function(N){0===N.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Ji.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Vr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Yr(N,W,H){var C=N.classList;for(var G in Vr)C.remove("mapboxgl-"+H+"-anchor-"+G);C.add("mapboxgl-"+H+"-anchor-"+W)}var To,Fo=function(N){function W(H,C){if(N.call(this),(H instanceof o.window.HTMLElement||C)&&(H=o.extend({element:H},C)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=H&&H.anchor||"center",this._color=H&&H.color||"#3FB1CE",this._scale=H&&H.scale||1,this._draggable=H&&H.draggable||!1,this._clickTolerance=H&&H.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=H&&H.rotation||0,this._rotationAlignment=H&&H.rotationAlignment||"auto",this._pitchAlignment=H&&H.pitchAlignment&&"auto"!==H.pitchAlignment?H.pitchAlignment:this._rotationAlignment,H&&H.element)this._element=H.element,this._offset=o.Point.convert(H&&H.offset||[0,0]);else{this._defaultMarker=!0,this._element=_.create("div"),this._element.setAttribute("aria-label","Map marker");var G=_.createNS("http://www.w3.org/2000/svg","svg");G.setAttributeNS(null,"display","block"),G.setAttributeNS(null,"height","41px"),G.setAttributeNS(null,"width","27px"),G.setAttributeNS(null,"viewBox","0 0 27 41");var Q=_.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"stroke","none"),Q.setAttributeNS(null,"stroke-width","1"),Q.setAttributeNS(null,"fill","none"),Q.setAttributeNS(null,"fill-rule","evenodd");var oe=_.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"fill-rule","nonzero");var de=_.createNS("http://www.w3.org/2000/svg","g");de.setAttributeNS(null,"transform","translate(3.0, 29.0)"),de.setAttributeNS(null,"fill","#000000");for(var Ae=0,De=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Ae<De.length;Ae+=1){var je=De[Ae],Ye=_.createNS("http://www.w3.org/2000/svg","ellipse");Ye.setAttributeNS(null,"opacity","0.04"),Ye.setAttributeNS(null,"cx","10.5"),Ye.setAttributeNS(null,"cy","5.80029008"),Ye.setAttributeNS(null,"rx",je.rx),Ye.setAttributeNS(null,"ry",je.ry),de.appendChild(Ye)}var Ke=_.createNS("http://www.w3.org/2000/svg","g");Ke.setAttributeNS(null,"fill",this._color);var st=_.createNS("http://www.w3.org/2000/svg","path");st.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Ke.appendChild(st);var mt=_.createNS("http://www.w3.org/2000/svg","g");mt.setAttributeNS(null,"opacity","0.25"),mt.setAttributeNS(null,"fill","#000000");var xt=_.createNS("http://www.w3.org/2000/svg","path");xt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),mt.appendChild(xt);var Et=_.createNS("http://www.w3.org/2000/svg","g");Et.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Et.setAttributeNS(null,"fill","#FFFFFF");var Dt=_.createNS("http://www.w3.org/2000/svg","g");Dt.setAttributeNS(null,"transform","translate(8.0, 8.0)");var It=_.createNS("http://www.w3.org/2000/svg","circle");It.setAttributeNS(null,"fill","#000000"),It.setAttributeNS(null,"opacity","0.25"),It.setAttributeNS(null,"cx","5.5"),It.setAttributeNS(null,"cy","5.5"),It.setAttributeNS(null,"r","5.4999962");var qt=_.createNS("http://www.w3.org/2000/svg","circle");qt.setAttributeNS(null,"fill","#FFFFFF"),qt.setAttributeNS(null,"cx","5.5"),qt.setAttributeNS(null,"cy","5.5"),qt.setAttributeNS(null,"r","5.4999962"),Dt.appendChild(It),Dt.appendChild(qt),oe.appendChild(de),oe.appendChild(Ke),oe.appendChild(mt),oe.appendChild(Et),oe.appendChild(Dt),G.appendChild(oe),G.setAttributeNS(null,"height",41*this._scale+"px"),G.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(G),this._offset=o.Point.convert(H&&H.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Ft){Ft.preventDefault()}),this._element.addEventListener("mousedown",function(Ft){Ft.preventDefault()}),Yr(this._element,this._anchor,"marker"),this._popup=null}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.addTo=function(H){return this.remove(),this._map=H,H.getCanvasContainer().appendChild(this._element),H.on("move",this._update),H.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},W.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),_.remove(this._element),this._popup&&this._popup.remove(),this},W.prototype.getLngLat=function(){return this._lngLat},W.prototype.setLngLat=function(H){return this._lngLat=o.LngLat.convert(H),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},W.prototype.getElement=function(){return this._element},W.prototype.setPopup=function(H){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),H){if(!("offset"in H.options)){var G=Math.sqrt(Math.pow(13.5,2)/2);H.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[G,-1*(24.6+G)],"bottom-right":[-G,-1*(24.6+G)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=H,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},W.prototype._onKeyPress=function(H){var C=H.code,G=H.charCode||H.keyCode;"Space"!==C&&"Enter"!==C&&32!==G&&13!==G||this.togglePopup()},W.prototype._onMapClick=function(H){var C=H.originalEvent.target,G=this._element;this._popup&&(C===G||G.contains(C))&&this.togglePopup()},W.prototype.getPopup=function(){return this._popup},W.prototype.togglePopup=function(){var H=this._popup;return H?(H.isOpen()?H.remove():H.addTo(this._map),this):this},W.prototype._update=function(H){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=pl(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var C="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?C="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(C="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var G="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?G="rotateX(0deg)":"map"===this._pitchAlignment&&(G="rotateX("+this._map.getPitch()+"deg)"),H&&"moveend"!==H.type||(this._pos=this._pos.round()),_.setTransform(this._element,Vr[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+G+" "+C)}},W.prototype.getOffset=function(){return this._offset},W.prototype.setOffset=function(H){return this._offset=o.Point.convert(H),this._update(),this},W.prototype._onMove=function(H){if(!this._isDragging){var C=this._clickTolerance||this._map._clickTolerance;this._isDragging=H.point.dist(this._pointerdownPos)>=C}this._isDragging&&(this._pos=H.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag")))},W.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new o.Event("dragend")),this._state="inactive"},W.prototype._addDragHandler=function(H){this._element.contains(H.originalEvent.target)&&(H.preventDefault(),this._positionDelta=H.point.sub(this._pos).add(this._offset),this._pointerdownPos=H.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},W.prototype.setDraggable=function(H){return this._draggable=!!H,this._map&&(H?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},W.prototype.isDraggable=function(){return this._draggable},W.prototype.setRotation=function(H){return this._rotation=H||0,this._update(),this},W.prototype.getRotation=function(){return this._rotation},W.prototype.setRotationAlignment=function(H){return this._rotationAlignment=H||"auto",this._update(),this},W.prototype.getRotationAlignment=function(){return this._rotationAlignment},W.prototype.setPitchAlignment=function(H){return this._pitchAlignment=H&&"auto"!==H?H:this._rotationAlignment,this._update(),this},W.prototype.getPitchAlignment=function(){return this._pitchAlignment},W}(o.Evented),Bo={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},ya=0,fi=!1,Hi=function(N){function W(H){N.call(this),this.options=o.extend({},Bo,H),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.onAdd=function(H){return this._map=H,this._container=_.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),C=this._setupUI,void 0!==To?C(To):void 0!==o.window.navigator.permissions?o.window.navigator.permissions.query({name:"geolocation"}).then(function(G){C(To="denied"!==G.state)}):C(To=!!o.window.navigator.geolocation),this._container;var C},W.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),_.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ya=0,fi=!1},W.prototype._isOutOfMapMaxBounds=function(H){var C=this._map.getMaxBounds(),G=H.coords;return C&&(G.longitude<C.getWest()||G.longitude>C.getEast()||G.latitude<C.getSouth()||G.latitude>C.getNorth())},W.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},W.prototype._onSuccess=function(H){if(this._map){if(this._isOutOfMapMaxBounds(H))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",H)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=H,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(H),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(H),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",H)),this._finish()}},W.prototype._updateCamera=function(H){var C=new o.LngLat(H.coords.longitude,H.coords.latitude),G=H.coords.accuracy,Q=this._map.getBearing(),oe=o.extend({bearing:Q},this.options.fitBoundsOptions);this._map.fitBounds(C.toBounds(G),oe,{geolocateSource:!0})},W.prototype._updateMarker=function(H){if(H){var C=new o.LngLat(H.coords.longitude,H.coords.latitude);this._accuracyCircleMarker.setLngLat(C).addTo(this._map),this._userLocationDotMarker.setLngLat(C).addTo(this._map),this._accuracy=H.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},W.prototype._updateCircleRadius=function(){var H=this._map._container.clientHeight/2,C=this._map.unproject([0,H]),G=this._map.unproject([1,H]),Q=C.distanceTo(G),oe=Math.ceil(2*this._accuracy/Q);this._circleElement.style.width=oe+"px",this._circleElement.style.height=oe+"px"},W.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},W.prototype._onError=function(H){if(this._map){if(this.options.trackUserLocation)if(1===H.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var C=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=C,this._geolocateButton.setAttribute("aria-label",C),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===H.code&&fi)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",H)),this._finish()}},W.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},W.prototype._setupUI=function(H){var C=this;if(this._container.addEventListener("contextmenu",function(oe){return oe.preventDefault()}),this._geolocateButton=_.create("button","mapboxgl-ctrl-geolocate",this._container),_.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===H){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var G=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=G,this._geolocateButton.setAttribute("aria-label",G)}else{var Q=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Q,this._geolocateButton.setAttribute("aria-label",Q)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=_.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Fo(this._dotElement),this._circleElement=_.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Fo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(oe){oe.geolocateSource||"ACTIVE_LOCK"!==C._watchState||oe.originalEvent&&"resize"===oe.originalEvent.type||(C._watchState="BACKGROUND",C._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),C._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),C.fire(new o.Event("trackuserlocationend")))})},W.prototype.trigger=function(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ya--,fi=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var H;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++ya>1?(H={maximumAge:6e5,timeout:0},fi=!0):(H=this.options.positionOptions,fi=!1),this._geolocationWatchID=o.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,H)}}else o.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},W.prototype._clearWatch=function(){o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},W}(o.Evented),Su={maxWidth:100,unit:"metric"},ko=function(N){this.options=o.extend({},Su,N),o.bindAll(["_onMove","setUnit"],this)};function hi(N,W,H){var C=H&&H.maxWidth||100,G=N._container.clientHeight/2,Q=N.unproject([0,G]),oe=N.unproject([C,G]),de=Q.distanceTo(oe);if(H&&"imperial"===H.unit){var Ae=3.2808*de;Ae>5280?Wi(W,C,Ae/5280,N._getUIString("ScaleControl.Miles")):Wi(W,C,Ae,N._getUIString("ScaleControl.Feet"))}else H&&"nautical"===H.unit?Wi(W,C,de/1852,N._getUIString("ScaleControl.NauticalMiles")):de>=1e3?Wi(W,C,de/1e3,N._getUIString("ScaleControl.Kilometers")):Wi(W,C,de,N._getUIString("ScaleControl.Meters"))}function Wi(N,W,H,C){var G,Q,oe,De,je,de=(G=H,(Q=Math.pow(10,(""+Math.floor(G)).length-1))*((oe=G/Q)>=10?10:oe>=5?5:oe>=3?3:oe>=2?2:oe>=1?1:(De=oe,je=Math.pow(10,Math.ceil(-Math.log(De)/Math.LN10)),Math.round(De*je)/je)));N.style.width=W*(de/H)+"px",N.innerHTML=de+"&nbsp;"+C}ko.prototype.getDefaultPosition=function(){return"bottom-left"},ko.prototype._onMove=function(){hi(this._map,this._container,this.options)},ko.prototype.onAdd=function(N){return this._map=N,this._container=_.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",N.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},ko.prototype.onRemove=function(){_.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},ko.prototype.setUnit=function(N){this.options.unit=N,hi(this._map,this._container,this.options)};var so=function(N){this._fullscreen=!1,N&&N.container&&(N.container instanceof o.window.HTMLElement?this._container=N.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in o.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in o.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in o.window.document&&(this._fullscreenchange="MSFullscreenChange")};so.prototype.onAdd=function(N){return this._map=N,this._container||(this._container=this._map.getContainer()),this._controlContainer=_.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},so.prototype.onRemove=function(){_.remove(this._controlContainer),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},so.prototype._checkFullscreenSupport=function(){return!!(o.window.document.fullscreenEnabled||o.window.document.mozFullScreenEnabled||o.window.document.msFullscreenEnabled||o.window.document.webkitFullscreenEnabled)},so.prototype._setupUI=function(){var N=this._fullscreenButton=_.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);_.create("span","mapboxgl-ctrl-icon",N).setAttribute("aria-hidden",!0),N.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},so.prototype._updateTitle=function(){var N=this._getTitle();this._fullscreenButton.setAttribute("aria-label",N),this._fullscreenButton.title=N},so.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},so.prototype._isFullscreen=function(){return this._fullscreen},so.prototype._changeIcon=function(){(o.window.document.fullscreenElement||o.window.document.mozFullScreenElement||o.window.document.webkitFullscreenElement||o.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},so.prototype._onClickFullscreen=function(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.mozCancelFullScreen?o.window.document.mozCancelFullScreen():o.window.document.msExitFullscreen?o.window.document.msExitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var No={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Ls=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),tt=function(N){function W(H){N.call(this),this.options=o.extend(Object.create(No),H),o.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return N&&(W.__proto__=N),(W.prototype=Object.create(N&&N.prototype)).constructor=W,W.prototype.addTo=function(H){return this._map&&this.remove(),this._map=H,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new o.Event("open")),this},W.prototype.isOpen=function(){return!!this._map},W.prototype.remove=function(){return this._content&&_.remove(this._content),this._container&&(_.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new o.Event("close")),this},W.prototype.getLngLat=function(){return this._lngLat},W.prototype.setLngLat=function(H){return this._lngLat=o.LngLat.convert(H),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},W.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},W.prototype.getElement=function(){return this._container},W.prototype.setText=function(H){return this.setDOMContent(o.window.document.createTextNode(H))},W.prototype.setHTML=function(H){var C,G=o.window.document.createDocumentFragment(),Q=o.window.document.createElement("body");for(Q.innerHTML=H;C=Q.firstChild;)G.appendChild(C);return this.setDOMContent(G)},W.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},W.prototype.setMaxWidth=function(H){return this.options.maxWidth=H,this._update(),this},W.prototype.setDOMContent=function(H){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=_.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(H),this._createCloseButton(),this._update(),this._focusFirstElement(),this},W.prototype.addClassName=function(H){this._container&&this._container.classList.add(H)},W.prototype.removeClassName=function(H){this._container&&this._container.classList.remove(H)},W.prototype.setOffset=function(H){return this.options.offset=H,this._update(),this},W.prototype.toggleClassName=function(H){if(this._container)return this._container.classList.toggle(H)},W.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=_.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},W.prototype._onMouseUp=function(H){this._update(H.point)},W.prototype._onMouseMove=function(H){this._update(H.point)},W.prototype._onDrag=function(H){this._update(H.point)},W.prototype._update=function(H){var C=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=_.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=_.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Ke){return C._container.classList.add(Ke)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=pl(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||H)){var Q=this._pos=this._trackPointer&&H?H:this._map.project(this._lngLat),oe=this.options.anchor,de=at(this.options.offset);if(!oe){var Ae,De=this._container.offsetWidth,je=this._container.offsetHeight;Ae=Q.y+de.bottom.y<je?["top"]:Q.y>this._map.transform.height-je?["bottom"]:[],Q.x<De/2?Ae.push("left"):Q.x>this._map.transform.width-De/2&&Ae.push("right"),oe=0===Ae.length?"bottom":Ae.join("-")}var Ye=Q.add(de[oe]).round();_.setTransform(this._container,Vr[oe]+" translate("+Ye.x+"px,"+Ye.y+"px)"),Yr(this._container,oe,"popup")}},W.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var H=this._container.querySelector(Ls);H&&H.focus()}},W.prototype._onClose=function(){this.remove()},W}(o.Evented);function at(N){if(N){if("number"==typeof N){var W=Math.round(Math.sqrt(.5*Math.pow(N,2)));return{center:new o.Point(0,0),top:new o.Point(0,N),"top-left":new o.Point(W,W),"top-right":new o.Point(-W,W),bottom:new o.Point(0,-N),"bottom-left":new o.Point(W,-W),"bottom-right":new o.Point(-W,-W),left:new o.Point(N,0),right:new o.Point(-N,0)}}if(N instanceof o.Point||Array.isArray(N)){var H=o.Point.convert(N);return{center:H,top:H,"top-left":H,"top-right":H,bottom:H,"bottom-left":H,"bottom-right":H,left:H,right:H}}return{center:o.Point.convert(N.center||[0,0]),top:o.Point.convert(N.top||[0,0]),"top-left":o.Point.convert(N["top-left"]||[0,0]),"top-right":o.Point.convert(N["top-right"]||[0,0]),bottom:o.Point.convert(N.bottom||[0,0]),"bottom-left":o.Point.convert(N["bottom-left"]||[0,0]),"bottom-right":o.Point.convert(N["bottom-right"]||[0,0]),left:o.Point.convert(N.left||[0,0]),right:o.Point.convert(N.right||[0,0])}}return at(new o.Point(0,0))}var dt={version:o.version,supported:T,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:es,NavigationControl:ts,GeolocateControl:Hi,AttributionControl:ho,ScaleControl:ko,FullscreenControl:so,Popup:tt,Marker:Fo,Style:vr,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.Point,MercatorCoordinate:o.MercatorCoordinate,Evented:o.Evented,config:o.config,prewarm:function(){kt().acquire(ut)},clearPrewarmedResources:function(){var N=yt;N&&(N.isPreloaded()&&1===N.numActive()?(N.release(ut),yt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(N){o.config.ACCESS_TOKEN=N},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(N){o.config.API_URL=N},get workerCount(){return Qe.workerCount},set workerCount(N){Qe.workerCount=N},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(N){o.config.MAX_PARALLEL_IMAGE_REQUESTS=N},clearStorage:function(N){o.clearTileCache(N)},workerUrl:""};return dt}),M}()},3108:function(ne,F,e){"use strict";ne.exports=e(26099)},26099:function(ne,F,e){"use strict";var M=e(64928),k=e(32420),o=e(51160),T=e(76752),_=e(55616),p=e(31264),l=e(47520),t=e(18400),i=e(72512),r=e(76244);function n(a,s){for(var u=s[0],f=s[1],c=1/(s[2]-u),y=1/(s[3]-f),d=new Array(a.length),m=0,g=a.length/2;m<g;m++)d[2*m]=k((a[2*m]-u)*c,0,1),d[2*m+1]=k((a[2*m+1]-f)*y,0,1);return d}ne.exports=function(a,s){s||(s={}),a=l(a,"float64"),s=_(s,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var u=p(s.maxDepth,255),f=p(s.bounds,T(a,2));f[0]===f[2]&&f[2]++,f[1]===f[3]&&f[3]++;var c,y=n(a,f),d=a.length>>>1;s.dtype||(s.dtype="array"),"string"==typeof s.dtype?c=new(i(s.dtype))(d):s.dtype&&(c=s.dtype,Array.isArray(c)&&(c.length=d));for(var m=0;m<d;++m)c[m]=m;var g=[],x=[],v=[],b=[];!function z(U,R,j,Y,B,V){if(!Y.length)return null;var q=g[B]||(g[B]=[]),ie=v[B]||(v[B]=[]),te=x[B]||(x[B]=[]),ee=q.length;if(++B>u||V>1073741824){for(var $=0;$<Y.length;$++)q.push(Y[$]),ie.push(V),te.push(null,null,null,null);return ee}if(q.push(Y[0]),ie.push(V),Y.length<=1)return te.push(null,null,null,null),ee;for(var J=.5*j,X=U+J,ae=R+J,ce=[],le=[],pe=[],we=[],Te=1,ye=Y.length;Te<ye;Te++){var ve=Y[Te],Ce=y[2*ve+1];y[2*ve]<X?Ce<ae?ce.push(ve):le.push(ve):Ce<ae?pe.push(ve):we.push(ve)}return te.push(z(U,R,J,ce,B,V<<=2),z(U,ae,J,le,B,V+1),z(X,R,J,pe,B,V+2),z(X,ae,J,we,B,V+3)),ee}(0,0,1,c,0,1);for(var h=0,S=0;S<g.length;S++){var w=g[S];if(c.set)c.set(w,h);else for(var E=0,P=w.length;E<P;E++)c[E+h]=w[E];var I=h+g[S].length;b[S]=[h,I],h=I}return c.range=function(){for(var z,U=[],R=arguments.length;R--;)U[R]=arguments[R];if(t(U[U.length-1])){var j=U.pop();U.length||null==j.x&&null==j.l&&null==j.left||(U=[j],z={}),z=_(j,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else z={};U.length||(U=f);var Y,B=o.apply(void 0,U),V=[Math.min(B.x,B.x+B.width),Math.min(B.y,B.y+B.height),Math.max(B.x,B.x+B.width),Math.max(B.y,B.y+B.height)],q=V[0],ie=V[1],te=V[2],ee=V[3],$=n([q,ie,te,ee],f),J=$[0],X=$[1],ae=$[2],ce=$[3],le=p(z.level,g.length);if(null!=z.d&&("number"==typeof z.d?Y=[z.d,z.d]:z.d.length&&(Y=z.d),le=Math.min(Math.max(Math.ceil(-r(Math.abs(Y[0])/(f[2]-f[0]))),Math.ceil(-r(Math.abs(Y[1])/(f[3]-f[1])))),le)),le=Math.min(le,g.length),z.lod)return function(we,Te,ye,ve,xe){for(var Ce=[],Oe=0;Oe<xe;Oe++){var be=v[Oe],ue=b[Oe][0],se=O(we,Te,Oe),ge=O(ye,ve,Oe),Ie=M.ge(be,se),ke=M.gt(be,ge,Ie,be.length-1);Ce[Oe]=[Ie+ue,ke+ue]}return Ce}(J,X,ae,ce,le);var pe=[];return function we(Te,ye,ve,xe,Ce,Oe){if(null!==Ce&&null!==Oe&&!(J>Te+ve||X>ye+ve||ae<Te||ce<ye||xe>=le||Ce===Oe)){var be=g[xe];void 0===Oe&&(Oe=be.length);for(var ue=Ce;ue<Oe;ue++){var se=be[ue],ge=a[2*se],Ie=a[2*se+1];ge>=q&&ge<=te&&Ie>=ie&&Ie<=ee&&pe.push(se)}var ke=x[xe],Se=ke[4*Ce+0],Pe=ke[4*Ce+1],Fe=ke[4*Ce+2],Be=ke[4*Ce+3],me=function(Ne,Re){for(var He=null,Ze=0;null===He;)if(He=Ne[4*Re+Ze],++Ze>Ne.length)return null;return He}(ke,Ce+1),Me=.5*ve,Le=xe+1;we(Te,ye,Me,Le,Se,Pe||Fe||Be||me),we(Te,ye+Me,Me,Le,Pe,Fe||Be||me),we(Te+Me,ye,Me,Le,Fe,Be||me),we(Te+Me,ye+Me,Me,Le,Be,me)}}(0,0,1,0,0,1),pe},c;function O(z,U,R){for(var j=1,Y=.5,B=.5,V=.5,q=0;q<R;q++)j<<=2,j+=z<Y?U<B?0:1:U<B?2:3,V*=.5,Y+=z<Y?-V:V,B+=U<B?-V:V;return j}}},40440:function(ne,F,e){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var M=e(3256),k=6378137;function o(p){var l=0;if(p&&p.length>0){l+=Math.abs(T(p[0]));for(var t=1;t<p.length;t++)l-=Math.abs(T(p[t]))}return l}function T(p){var l,t,i,r,n,a,s=0,u=p.length;if(u>2){for(a=0;a<u;a++)a===u-2?(i=u-2,r=u-1,n=0):a===u-1?(i=u-1,r=0,n=1):(i=a,r=a+1,n=a+2),l=p[i],t=p[r],s+=(_(p[n][0])-_(l[0]))*Math.sin(_(t[1]));s=s*k*k/2}return s}function _(p){return p*Math.PI/180}F.default=function(p){return M.geomReduce(p,function(l,t){return l+function(i){var r,n=0;switch(i.type){case"Polygon":return o(i.coordinates);case"MultiPolygon":for(r=0;r<i.coordinates.length;r++)n+=o(i.coordinates[r]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)},0)}},46284:function(ne,F){"use strict";function e(a,s,u){void 0===u&&(u={});var f={type:"Feature"};return(0===u.id||u.id)&&(f.id=u.id),u.bbox&&(f.bbox=u.bbox),f.properties=s||{},f.geometry=a,f}function M(a,s,u){if(void 0===u&&(u={}),!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!n(a[0])||!n(a[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:a},s,u)}function k(a,s,u){void 0===u&&(u={});for(var f=0,c=a;f<c.length;f++){var y=c[f];if(y.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var d=0;d<y[y.length-1].length;d++)if(y[y.length-1][d]!==y[0][d])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},s,u)}function o(a,s,u){if(void 0===u&&(u={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},s,u)}function T(a,s){void 0===s&&(s={});var u={type:"FeatureCollection"};return s.id&&(u.id=s.id),s.bbox&&(u.bbox=s.bbox),u.features=a,u}function _(a,s,u){return void 0===u&&(u={}),e({type:"MultiLineString",coordinates:a},s,u)}function p(a,s,u){return void 0===u&&(u={}),e({type:"MultiPoint",coordinates:a},s,u)}function l(a,s,u){return void 0===u&&(u={}),e({type:"MultiPolygon",coordinates:a},s,u)}function t(a,s){void 0===s&&(s="kilometers");var u=F.factors[s];if(!u)throw new Error(s+" units is invalid");return a*u}function i(a,s){void 0===s&&(s="kilometers");var u=F.factors[s];if(!u)throw new Error(s+" units is invalid");return a/u}function r(a){return a%(2*Math.PI)*180/Math.PI}function n(a){return!isNaN(a)&&null!==a&&!Array.isArray(a)}Object.defineProperty(F,"__esModule",{value:!0}),F.earthRadius=6371008.8,F.factors={centimeters:100*F.earthRadius,centimetres:100*F.earthRadius,degrees:F.earthRadius/111325,feet:3.28084*F.earthRadius,inches:39.37*F.earthRadius,kilometers:F.earthRadius/1e3,kilometres:F.earthRadius/1e3,meters:F.earthRadius,metres:F.earthRadius,miles:F.earthRadius/1609.344,millimeters:1e3*F.earthRadius,millimetres:1e3*F.earthRadius,nauticalmiles:F.earthRadius/1852,radians:1,yards:1.0936*F.earthRadius},F.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/F.earthRadius,yards:1.0936133},F.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},F.feature=e,F.geometry=function(a,s,u){switch(void 0===u&&(u={}),a){case"Point":return M(s).geometry;case"LineString":return o(s).geometry;case"Polygon":return k(s).geometry;case"MultiPoint":return p(s).geometry;case"MultiLineString":return _(s).geometry;case"MultiPolygon":return l(s).geometry;default:throw new Error(a+" is invalid")}},F.point=M,F.points=function(a,s,u){return void 0===u&&(u={}),T(a.map(function(f){return M(f,s)}),u)},F.polygon=k,F.polygons=function(a,s,u){return void 0===u&&(u={}),T(a.map(function(f){return k(f,s)}),u)},F.lineString=o,F.lineStrings=function(a,s,u){return void 0===u&&(u={}),T(a.map(function(f){return o(f,s)}),u)},F.featureCollection=T,F.multiLineString=_,F.multiPoint=p,F.multiPolygon=l,F.geometryCollection=function(a,s,u){return void 0===u&&(u={}),e({type:"GeometryCollection",geometries:a},s,u)},F.round=function(a,s){if(void 0===s&&(s=0),s&&!(s>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,s||0);return Math.round(a*u)/u},F.radiansToLength=t,F.lengthToRadians=i,F.lengthToDegrees=function(a,s){return r(i(a,s))},F.bearingToAzimuth=function(a){var s=a%360;return s<0&&(s+=360),s},F.radiansToDegrees=r,F.degreesToRadians=function(a){return a%360*Math.PI/180},F.convertLength=function(a,s,u){if(void 0===s&&(s="kilometers"),void 0===u&&(u="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(i(a,s),u)},F.convertArea=function(a,s,u){if(void 0===s&&(s="meters"),void 0===u&&(u="kilometers"),!(a>=0))throw new Error("area must be a positive number");var f=F.areaFactors[s];if(!f)throw new Error("invalid original units");var c=F.areaFactors[u];if(!c)throw new Error("invalid final units");return a/f*c},F.isNumber=n,F.isObject=function(a){return!!a&&a.constructor===Object},F.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(4!==a.length&&6!==a.length)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(s){if(!n(s))throw new Error("bbox must only contain numbers")})},F.validateId=function(a){if(!a)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof a))throw new Error("id must be a number or a string")}},3256:function(ne,F,e){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var M=e(46284);function k(i,r,n){if(null!==i)for(var a,s,u,f,c,y,d,m,g=0,x=0,v=i.type,b="FeatureCollection"===v,h="Feature"===v,S=b?i.features.length:1,w=0;w<S;w++){c=(m=!!(d=b?i.features[w].geometry:h?i.geometry:i)&&"GeometryCollection"===d.type)?d.geometries.length:1;for(var E=0;E<c;E++){var P=0,I=0;if(null!==(f=m?d.geometries[E]:d)){y=f.coordinates;var O=f.type;switch(g=!n||"Polygon"!==O&&"MultiPolygon"!==O?0:1,O){case null:break;case"Point":if(!1===r(y,x,w,P,I))return!1;x++,P++;break;case"LineString":case"MultiPoint":for(a=0;a<y.length;a++){if(!1===r(y[a],x,w,P,I))return!1;x++,"MultiPoint"===O&&P++}"LineString"===O&&P++;break;case"Polygon":case"MultiLineString":for(a=0;a<y.length;a++){for(s=0;s<y[a].length-g;s++){if(!1===r(y[a][s],x,w,P,I))return!1;x++}"MultiLineString"===O&&P++,"Polygon"===O&&I++}"Polygon"===O&&P++;break;case"MultiPolygon":for(a=0;a<y.length;a++){for(I=0,s=0;s<y[a].length;s++){for(u=0;u<y[a][s].length-g;u++){if(!1===r(y[a][s][u],x,w,P,I))return!1;x++}I++}P++}break;case"GeometryCollection":for(a=0;a<f.geometries.length;a++)if(!1===k(f.geometries[a],r,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(i,r){var n;switch(i.type){case"FeatureCollection":for(n=0;n<i.features.length&&!1!==r(i.features[n].properties,n);n++);break;case"Feature":r(i.properties,0)}}function T(i,r){if("Feature"===i.type)r(i,0);else if("FeatureCollection"===i.type)for(var n=0;n<i.features.length&&!1!==r(i.features[n],n);n++);}function _(i,r){var n,a,s,u,f,c,y,d,m,g,x=0,v="FeatureCollection"===i.type,b="Feature"===i.type,h=v?i.features.length:1;for(n=0;n<h;n++){for(d=v?i.features[n].properties:b?i.properties:{},m=v?i.features[n].bbox:b?i.bbox:void 0,g=v?i.features[n].id:b?i.id:void 0,f=(y=!!(c=v?i.features[n].geometry:b?i.geometry:i)&&"GeometryCollection"===c.type)?c.geometries.length:1,s=0;s<f;s++)if(null!==(u=y?c.geometries[s]:c))switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===r(u,x,d,m,g))return!1;break;case"GeometryCollection":for(a=0;a<u.geometries.length;a++)if(!1===r(u.geometries[a],x,d,m,g))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===r(null,x,d,m,g))return!1;x++}}function p(i,r){_(i,function(n,a,s,u,f){var c,y=null===n?null:n.type;switch(y){case null:case"Point":case"LineString":case"Polygon":return!1!==r(M.feature(n,s,{bbox:u,id:f}),a,0)&&void 0}switch(y){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var d=0;d<n.coordinates.length;d++)if(!1===r(M.feature({type:c,coordinates:n.coordinates[d]},s),a,d))return!1})}function l(i,r){p(i,function(n,a,s){var u=0;if(n.geometry){var f=n.geometry.type;if("Point"!==f&&"MultiPoint"!==f){var c,y=0,d=0,m=0;return!1!==k(n,function(g,x,v,b,h){if(void 0===c||a>y||b>d||h>m)return c=g,y=a,d=b,m=h,void(u=0);var S=M.lineString([c,g],n.properties);if(!1===r(S,a,s,h,u))return!1;u++,c=g})&&void 0}}})}function t(i,r){if(!i)throw new Error("geojson is required");p(i,function(n,a,s){if(null!==n.geometry){var f=n.geometry.coordinates;switch(n.geometry.type){case"LineString":if(!1===r(n,a,s,0,0))return!1;break;case"Polygon":for(var c=0;c<f.length;c++)if(!1===r(M.lineString(f[c],n.properties),a,s,c))return!1}}})}F.coordEach=k,F.coordReduce=function(i,r,n,a){var s=n;return k(i,function(u,f,c,y,d){s=0===f&&void 0===n?u:r(s,u,f,c,y,d)},a),s},F.propEach=o,F.propReduce=function(i,r,n){var a=n;return o(i,function(s,u){a=0===u&&void 0===n?s:r(a,s,u)}),a},F.featureEach=T,F.featureReduce=function(i,r,n){var a=n;return T(i,function(s,u){a=0===u&&void 0===n?s:r(a,s,u)}),a},F.coordAll=function(i){var r=[];return k(i,function(n){r.push(n)}),r},F.geomEach=_,F.geomReduce=function(i,r,n){var a=n;return _(i,function(s,u,f,c,y){a=0===u&&void 0===n?s:r(a,s,u,f,c,y)}),a},F.flattenEach=p,F.flattenReduce=function(i,r,n){var a=n;return p(i,function(s,u,f){a=0===u&&0===f&&void 0===n?s:r(a,s,u,f)}),a},F.segmentEach=l,F.segmentReduce=function(i,r,n){var a=n,s=!1;return l(i,function(u,f,c,y,d){a=!1===s&&void 0===n?u:r(a,u,f,c,y,d),s=!0}),a},F.lineEach=t,F.lineReduce=function(i,r,n){var a=n;return t(i,function(s,u,f,c){a=0===u&&void 0===n?s:r(a,s,u,f,c)}),a},F.findSegment=function(i,r){if(!M.isObject(r=r||{}))throw new Error("options is invalid");var n,a=r.featureIndex||0,s=r.multiFeatureIndex||0,u=r.geometryIndex||0,f=r.segmentIndex||0,c=r.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),c=c||i.features[a].properties,n=i.features[a].geometry;break;case"Feature":c=c||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var y=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return f<0&&(f=y.length+f-1),M.lineString([y[f],y[f+1]],c,r);case"Polygon":return u<0&&(u=y.length+u),f<0&&(f=y[u].length+f-1),M.lineString([y[u][f],y[u][f+1]],c,r);case"MultiLineString":return s<0&&(s=y.length+s),f<0&&(f=y[s].length+f-1),M.lineString([y[s][f],y[s][f+1]],c,r);case"MultiPolygon":return s<0&&(s=y.length+s),u<0&&(u=y[s].length+u),f<0&&(f=y[s][u].length-f-1),M.lineString([y[s][u][f],y[s][u][f+1]],c,r)}throw new Error("geojson is invalid")},F.findPoint=function(i,r){if(!M.isObject(r=r||{}))throw new Error("options is invalid");var n,a=r.featureIndex||0,s=r.multiFeatureIndex||0,u=r.geometryIndex||0,f=r.coordIndex||0,c=r.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),c=c||i.features[a].properties,n=i.features[a].geometry;break;case"Feature":c=c||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var y=n.coordinates;switch(n.type){case"Point":return M.point(y,c,r);case"MultiPoint":return s<0&&(s=y.length+s),M.point(y[s],c,r);case"LineString":return f<0&&(f=y.length+f),M.point(y[f],c,r);case"Polygon":return u<0&&(u=y.length+u),f<0&&(f=y[u].length+f),M.point(y[u][f],c,r);case"MultiLineString":return s<0&&(s=y.length+s),f<0&&(f=y[s].length+f),M.point(y[s][f],c,r);case"MultiPolygon":return s<0&&(s=y.length+s),u<0&&(u=y[s].length+u),f<0&&(f=y[s][u].length-f),M.point(y[s][u][f],c,r)}throw new Error("geojson is invalid")}},42428:function(ne,F,e){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var M=e(84880);function k(o){var T=[1/0,1/0,-1/0,-1/0];return M.coordEach(o,function(_){T[0]>_[0]&&(T[0]=_[0]),T[1]>_[1]&&(T[1]=_[1]),T[2]<_[0]&&(T[2]=_[0]),T[3]<_[1]&&(T[3]=_[1])}),T}k.default=k,F.default=k},76796:function(ne,F){"use strict";function e(a,s,u){void 0===u&&(u={});var f={type:"Feature"};return(0===u.id||u.id)&&(f.id=u.id),u.bbox&&(f.bbox=u.bbox),f.properties=s||{},f.geometry=a,f}function M(a,s,u){if(void 0===u&&(u={}),!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!n(a[0])||!n(a[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:a},s,u)}function k(a,s,u){void 0===u&&(u={});for(var f=0,c=a;f<c.length;f++){var y=c[f];if(y.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var d=0;d<y[y.length-1].length;d++)if(y[y.length-1][d]!==y[0][d])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},s,u)}function o(a,s,u){if(void 0===u&&(u={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},s,u)}function T(a,s){void 0===s&&(s={});var u={type:"FeatureCollection"};return s.id&&(u.id=s.id),s.bbox&&(u.bbox=s.bbox),u.features=a,u}function _(a,s,u){return void 0===u&&(u={}),e({type:"MultiLineString",coordinates:a},s,u)}function p(a,s,u){return void 0===u&&(u={}),e({type:"MultiPoint",coordinates:a},s,u)}function l(a,s,u){return void 0===u&&(u={}),e({type:"MultiPolygon",coordinates:a},s,u)}function t(a,s){void 0===s&&(s="kilometers");var u=F.factors[s];if(!u)throw new Error(s+" units is invalid");return a*u}function i(a,s){void 0===s&&(s="kilometers");var u=F.factors[s];if(!u)throw new Error(s+" units is invalid");return a/u}function r(a){return a%(2*Math.PI)*180/Math.PI}function n(a){return!isNaN(a)&&null!==a&&!Array.isArray(a)}Object.defineProperty(F,"__esModule",{value:!0}),F.earthRadius=6371008.8,F.factors={centimeters:100*F.earthRadius,centimetres:100*F.earthRadius,degrees:F.earthRadius/111325,feet:3.28084*F.earthRadius,inches:39.37*F.earthRadius,kilometers:F.earthRadius/1e3,kilometres:F.earthRadius/1e3,meters:F.earthRadius,metres:F.earthRadius,miles:F.earthRadius/1609.344,millimeters:1e3*F.earthRadius,millimetres:1e3*F.earthRadius,nauticalmiles:F.earthRadius/1852,radians:1,yards:1.0936*F.earthRadius},F.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/F.earthRadius,yards:1.0936133},F.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},F.feature=e,F.geometry=function(a,s,u){switch(void 0===u&&(u={}),a){case"Point":return M(s).geometry;case"LineString":return o(s).geometry;case"Polygon":return k(s).geometry;case"MultiPoint":return p(s).geometry;case"MultiLineString":return _(s).geometry;case"MultiPolygon":return l(s).geometry;default:throw new Error(a+" is invalid")}},F.point=M,F.points=function(a,s,u){return void 0===u&&(u={}),T(a.map(function(f){return M(f,s)}),u)},F.polygon=k,F.polygons=function(a,s,u){return void 0===u&&(u={}),T(a.map(function(f){return k(f,s)}),u)},F.lineString=o,F.lineStrings=function(a,s,u){return void 0===u&&(u={}),T(a.map(function(f){return o(f,s)}),u)},F.featureCollection=T,F.multiLineString=_,F.multiPoint=p,F.multiPolygon=l,F.geometryCollection=function(a,s,u){return void 0===u&&(u={}),e({type:"GeometryCollection",geometries:a},s,u)},F.round=function(a,s){if(void 0===s&&(s=0),s&&!(s>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,s||0);return Math.round(a*u)/u},F.radiansToLength=t,F.lengthToRadians=i,F.lengthToDegrees=function(a,s){return r(i(a,s))},F.bearingToAzimuth=function(a){var s=a%360;return s<0&&(s+=360),s},F.radiansToDegrees=r,F.degreesToRadians=function(a){return a%360*Math.PI/180},F.convertLength=function(a,s,u){if(void 0===s&&(s="kilometers"),void 0===u&&(u="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(i(a,s),u)},F.convertArea=function(a,s,u){if(void 0===s&&(s="meters"),void 0===u&&(u="kilometers"),!(a>=0))throw new Error("area must be a positive number");var f=F.areaFactors[s];if(!f)throw new Error("invalid original units");var c=F.areaFactors[u];if(!c)throw new Error("invalid final units");return a/f*c},F.isNumber=n,F.isObject=function(a){return!!a&&a.constructor===Object},F.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(4!==a.length&&6!==a.length)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(s){if(!n(s))throw new Error("bbox must only contain numbers")})},F.validateId=function(a){if(!a)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof a))throw new Error("id must be a number or a string")}},84880:function(ne,F,e){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var M=e(76796);function k(i,r,n){if(null!==i)for(var a,s,u,f,c,y,d,m,g=0,x=0,v=i.type,b="FeatureCollection"===v,h="Feature"===v,S=b?i.features.length:1,w=0;w<S;w++){c=(m=!!(d=b?i.features[w].geometry:h?i.geometry:i)&&"GeometryCollection"===d.type)?d.geometries.length:1;for(var E=0;E<c;E++){var P=0,I=0;if(null!==(f=m?d.geometries[E]:d)){y=f.coordinates;var O=f.type;switch(g=!n||"Polygon"!==O&&"MultiPolygon"!==O?0:1,O){case null:break;case"Point":if(!1===r(y,x,w,P,I))return!1;x++,P++;break;case"LineString":case"MultiPoint":for(a=0;a<y.length;a++){if(!1===r(y[a],x,w,P,I))return!1;x++,"MultiPoint"===O&&P++}"LineString"===O&&P++;break;case"Polygon":case"MultiLineString":for(a=0;a<y.length;a++){for(s=0;s<y[a].length-g;s++){if(!1===r(y[a][s],x,w,P,I))return!1;x++}"MultiLineString"===O&&P++,"Polygon"===O&&I++}"Polygon"===O&&P++;break;case"MultiPolygon":for(a=0;a<y.length;a++){for(I=0,s=0;s<y[a].length;s++){for(u=0;u<y[a][s].length-g;u++){if(!1===r(y[a][s][u],x,w,P,I))return!1;x++}I++}P++}break;case"GeometryCollection":for(a=0;a<f.geometries.length;a++)if(!1===k(f.geometries[a],r,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(i,r){var n;switch(i.type){case"FeatureCollection":for(n=0;n<i.features.length&&!1!==r(i.features[n].properties,n);n++);break;case"Feature":r(i.properties,0)}}function T(i,r){if("Feature"===i.type)r(i,0);else if("FeatureCollection"===i.type)for(var n=0;n<i.features.length&&!1!==r(i.features[n],n);n++);}function _(i,r){var n,a,s,u,f,c,y,d,m,g,x=0,v="FeatureCollection"===i.type,b="Feature"===i.type,h=v?i.features.length:1;for(n=0;n<h;n++){for(d=v?i.features[n].properties:b?i.properties:{},m=v?i.features[n].bbox:b?i.bbox:void 0,g=v?i.features[n].id:b?i.id:void 0,f=(y=!!(c=v?i.features[n].geometry:b?i.geometry:i)&&"GeometryCollection"===c.type)?c.geometries.length:1,s=0;s<f;s++)if(null!==(u=y?c.geometries[s]:c))switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===r(u,x,d,m,g))return!1;break;case"GeometryCollection":for(a=0;a<u.geometries.length;a++)if(!1===r(u.geometries[a],x,d,m,g))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===r(null,x,d,m,g))return!1;x++}}function p(i,r){_(i,function(n,a,s,u,f){var c,y=null===n?null:n.type;switch(y){case null:case"Point":case"LineString":case"Polygon":return!1!==r(M.feature(n,s,{bbox:u,id:f}),a,0)&&void 0}switch(y){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var d=0;d<n.coordinates.length;d++)if(!1===r(M.feature({type:c,coordinates:n.coordinates[d]},s),a,d))return!1})}function l(i,r){p(i,function(n,a,s){var u=0;if(n.geometry){var f=n.geometry.type;if("Point"!==f&&"MultiPoint"!==f){var c,y=0,d=0,m=0;return!1!==k(n,function(g,x,v,b,h){if(void 0===c||a>y||b>d||h>m)return c=g,y=a,d=b,m=h,void(u=0);var S=M.lineString([c,g],n.properties);if(!1===r(S,a,s,h,u))return!1;u++,c=g})&&void 0}}})}function t(i,r){if(!i)throw new Error("geojson is required");p(i,function(n,a,s){if(null!==n.geometry){var f=n.geometry.coordinates;switch(n.geometry.type){case"LineString":if(!1===r(n,a,s,0,0))return!1;break;case"Polygon":for(var c=0;c<f.length;c++)if(!1===r(M.lineString(f[c],n.properties),a,s,c))return!1}}})}F.coordEach=k,F.coordReduce=function(i,r,n,a){var s=n;return k(i,function(u,f,c,y,d){s=0===f&&void 0===n?u:r(s,u,f,c,y,d)},a),s},F.propEach=o,F.propReduce=function(i,r,n){var a=n;return o(i,function(s,u){a=0===u&&void 0===n?s:r(a,s,u)}),a},F.featureEach=T,F.featureReduce=function(i,r,n){var a=n;return T(i,function(s,u){a=0===u&&void 0===n?s:r(a,s,u)}),a},F.coordAll=function(i){var r=[];return k(i,function(n){r.push(n)}),r},F.geomEach=_,F.geomReduce=function(i,r,n){var a=n;return _(i,function(s,u,f,c,y){a=0===u&&void 0===n?s:r(a,s,u,f,c,y)}),a},F.flattenEach=p,F.flattenReduce=function(i,r,n){var a=n;return p(i,function(s,u,f){a=0===u&&0===f&&void 0===n?s:r(a,s,u,f)}),a},F.segmentEach=l,F.segmentReduce=function(i,r,n){var a=n,s=!1;return l(i,function(u,f,c,y,d){a=!1===s&&void 0===n?u:r(a,u,f,c,y,d),s=!0}),a},F.lineEach=t,F.lineReduce=function(i,r,n){var a=n;return t(i,function(s,u,f,c){a=0===u&&void 0===n?s:r(a,s,u,f,c)}),a},F.findSegment=function(i,r){if(!M.isObject(r=r||{}))throw new Error("options is invalid");var n,a=r.featureIndex||0,s=r.multiFeatureIndex||0,u=r.geometryIndex||0,f=r.segmentIndex||0,c=r.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),c=c||i.features[a].properties,n=i.features[a].geometry;break;case"Feature":c=c||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var y=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return f<0&&(f=y.length+f-1),M.lineString([y[f],y[f+1]],c,r);case"Polygon":return u<0&&(u=y.length+u),f<0&&(f=y[u].length+f-1),M.lineString([y[u][f],y[u][f+1]],c,r);case"MultiLineString":return s<0&&(s=y.length+s),f<0&&(f=y[s].length+f-1),M.lineString([y[s][f],y[s][f+1]],c,r);case"MultiPolygon":return s<0&&(s=y.length+s),u<0&&(u=y[s].length+u),f<0&&(f=y[s][u].length-f-1),M.lineString([y[s][u][f],y[s][u][f+1]],c,r)}throw new Error("geojson is invalid")},F.findPoint=function(i,r){if(!M.isObject(r=r||{}))throw new Error("options is invalid");var n,a=r.featureIndex||0,s=r.multiFeatureIndex||0,u=r.geometryIndex||0,f=r.coordIndex||0,c=r.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),c=c||i.features[a].properties,n=i.features[a].geometry;break;case"Feature":c=c||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var y=n.coordinates;switch(n.type){case"Point":return M.point(y,c,r);case"MultiPoint":return s<0&&(s=y.length+s),M.point(y[s],c,r);case"LineString":return f<0&&(f=y.length+f),M.point(y[f],c,r);case"Polygon":return u<0&&(u=y.length+u),f<0&&(f=y[u].length+f),M.point(y[u][f],c,r);case"MultiLineString":return s<0&&(s=y.length+s),f<0&&(f=y[s].length+f),M.point(y[s][f],c,r);case"MultiPolygon":return s<0&&(s=y.length+s),u<0&&(u=y[s].length+u),f<0&&(f=y[s][u].length-f),M.point(y[s][u][f],c,r)}throw new Error("geojson is invalid")}},77844:function(ne,F,e){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var M=e(43752),k=e(49840);F.default=function(o,T){void 0===T&&(T={});var _=0,p=0,l=0;return M.coordEach(o,function(t){_+=t[0],p+=t[1],l++}),k.point([_/l,p/l],T.properties)}},49840:function(ne,F){"use strict";function e(a,s,u){void 0===u&&(u={});var f={type:"Feature"};return(0===u.id||u.id)&&(f.id=u.id),u.bbox&&(f.bbox=u.bbox),f.properties=s||{},f.geometry=a,f}function M(a,s,u){return void 0===u&&(u={}),e({type:"Point",coordinates:a},s,u)}function k(a,s,u){void 0===u&&(u={});for(var f=0,c=a;f<c.length;f++){var y=c[f];if(y.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var d=0;d<y[y.length-1].length;d++)if(y[y.length-1][d]!==y[0][d])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},s,u)}function o(a,s,u){if(void 0===u&&(u={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},s,u)}function T(a,s){void 0===s&&(s={});var u={type:"FeatureCollection"};return s.id&&(u.id=s.id),s.bbox&&(u.bbox=s.bbox),u.features=a,u}function _(a,s,u){return void 0===u&&(u={}),e({type:"MultiLineString",coordinates:a},s,u)}function p(a,s,u){return void 0===u&&(u={}),e({type:"MultiPoint",coordinates:a},s,u)}function l(a,s,u){return void 0===u&&(u={}),e({type:"MultiPolygon",coordinates:a},s,u)}function t(a,s){void 0===s&&(s="kilometers");var u=F.factors[s];if(!u)throw new Error(s+" units is invalid");return a*u}function i(a,s){void 0===s&&(s="kilometers");var u=F.factors[s];if(!u)throw new Error(s+" units is invalid");return a/u}function r(a){return a%(2*Math.PI)*180/Math.PI}function n(a){return!isNaN(a)&&null!==a&&!Array.isArray(a)&&!/^\s*$/.test(a)}Object.defineProperty(F,"__esModule",{value:!0}),F.earthRadius=6371008.8,F.factors={centimeters:100*F.earthRadius,centimetres:100*F.earthRadius,degrees:F.earthRadius/111325,feet:3.28084*F.earthRadius,inches:39.37*F.earthRadius,kilometers:F.earthRadius/1e3,kilometres:F.earthRadius/1e3,meters:F.earthRadius,metres:F.earthRadius,miles:F.earthRadius/1609.344,millimeters:1e3*F.earthRadius,millimetres:1e3*F.earthRadius,nauticalmiles:F.earthRadius/1852,radians:1,yards:F.earthRadius/1.0936},F.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/F.earthRadius,yards:.91441111923921},F.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},F.feature=e,F.geometry=function(a,s,u){switch(void 0===u&&(u={}),a){case"Point":return M(s).geometry;case"LineString":return o(s).geometry;case"Polygon":return k(s).geometry;case"MultiPoint":return p(s).geometry;case"MultiLineString":return _(s).geometry;case"MultiPolygon":return l(s).geometry;default:throw new Error(a+" is invalid")}},F.point=M,F.points=function(a,s,u){return void 0===u&&(u={}),T(a.map(function(f){return M(f,s)}),u)},F.polygon=k,F.polygons=function(a,s,u){return void 0===u&&(u={}),T(a.map(function(f){return k(f,s)}),u)},F.lineString=o,F.lineStrings=function(a,s,u){return void 0===u&&(u={}),T(a.map(function(f){return o(f,s)}),u)},F.featureCollection=T,F.multiLineString=_,F.multiPoint=p,F.multiPolygon=l,F.geometryCollection=function(a,s,u){return void 0===u&&(u={}),e({type:"GeometryCollection",geometries:a},s,u)},F.round=function(a,s){if(void 0===s&&(s=0),s&&!(s>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,s||0);return Math.round(a*u)/u},F.radiansToLength=t,F.lengthToRadians=i,F.lengthToDegrees=function(a,s){return r(i(a,s))},F.bearingToAzimuth=function(a){var s=a%360;return s<0&&(s+=360),s},F.radiansToDegrees=r,F.degreesToRadians=function(a){return a%360*Math.PI/180},F.convertLength=function(a,s,u){if(void 0===s&&(s="kilometers"),void 0===u&&(u="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(i(a,s),u)},F.convertArea=function(a,s,u){if(void 0===s&&(s="meters"),void 0===u&&(u="kilometers"),!(a>=0))throw new Error("area must be a positive number");var f=F.areaFactors[s];if(!f)throw new Error("invalid original units");var c=F.areaFactors[u];if(!c)throw new Error("invalid final units");return a/f*c},F.isNumber=n,F.isObject=function(a){return!!a&&a.constructor===Object},F.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(4!==a.length&&6!==a.length)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(s){if(!n(s))throw new Error("bbox must only contain numbers")})},F.validateId=function(a){if(!a)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof a))throw new Error("id must be a number or a string")},F.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},F.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},F.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},F.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},F.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},F.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},F.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},43752:function(ne,F,e){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var M=e(49840);function k(i,r,n){if(null!==i)for(var a,s,u,f,c,y,d,m,g=0,x=0,v=i.type,b="FeatureCollection"===v,h="Feature"===v,S=b?i.features.length:1,w=0;w<S;w++){c=(m=!!(d=b?i.features[w].geometry:h?i.geometry:i)&&"GeometryCollection"===d.type)?d.geometries.length:1;for(var E=0;E<c;E++){var P=0,I=0;if(null!==(f=m?d.geometries[E]:d)){y=f.coordinates;var O=f.type;switch(g=!n||"Polygon"!==O&&"MultiPolygon"!==O?0:1,O){case null:break;case"Point":if(!1===r(y,x,w,P,I))return!1;x++,P++;break;case"LineString":case"MultiPoint":for(a=0;a<y.length;a++){if(!1===r(y[a],x,w,P,I))return!1;x++,"MultiPoint"===O&&P++}"LineString"===O&&P++;break;case"Polygon":case"MultiLineString":for(a=0;a<y.length;a++){for(s=0;s<y[a].length-g;s++){if(!1===r(y[a][s],x,w,P,I))return!1;x++}"MultiLineString"===O&&P++,"Polygon"===O&&I++}"Polygon"===O&&P++;break;case"MultiPolygon":for(a=0;a<y.length;a++){for(I=0,s=0;s<y[a].length;s++){for(u=0;u<y[a][s].length-g;u++){if(!1===r(y[a][s][u],x,w,P,I))return!1;x++}I++}P++}break;case"GeometryCollection":for(a=0;a<f.geometries.length;a++)if(!1===k(f.geometries[a],r,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(i,r){var n;switch(i.type){case"FeatureCollection":for(n=0;n<i.features.length&&!1!==r(i.features[n].properties,n);n++);break;case"Feature":r(i.properties,0)}}function T(i,r){if("Feature"===i.type)r(i,0);else if("FeatureCollection"===i.type)for(var n=0;n<i.features.length&&!1!==r(i.features[n],n);n++);}function _(i,r){var n,a,s,u,f,c,y,d,m,g,x=0,v="FeatureCollection"===i.type,b="Feature"===i.type,h=v?i.features.length:1;for(n=0;n<h;n++){for(d=v?i.features[n].properties:b?i.properties:{},m=v?i.features[n].bbox:b?i.bbox:void 0,g=v?i.features[n].id:b?i.id:void 0,f=(y=!!(c=v?i.features[n].geometry:b?i.geometry:i)&&"GeometryCollection"===c.type)?c.geometries.length:1,s=0;s<f;s++)if(null!==(u=y?c.geometries[s]:c))switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===r(u,x,d,m,g))return!1;break;case"GeometryCollection":for(a=0;a<u.geometries.length;a++)if(!1===r(u.geometries[a],x,d,m,g))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===r(null,x,d,m,g))return!1;x++}}function p(i,r){_(i,function(n,a,s,u,f){var c,y=null===n?null:n.type;switch(y){case null:case"Point":case"LineString":case"Polygon":return!1!==r(M.feature(n,s,{bbox:u,id:f}),a,0)&&void 0}switch(y){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var d=0;d<n.coordinates.length;d++)if(!1===r(M.feature({type:c,coordinates:n.coordinates[d]},s),a,d))return!1})}function l(i,r){p(i,function(n,a,s){var u=0;if(n.geometry){var f=n.geometry.type;if("Point"!==f&&"MultiPoint"!==f){var c,y=0,d=0,m=0;return!1!==k(n,function(g,x,v,b,h){if(void 0===c||a>y||b>d||h>m)return c=g,y=a,d=b,m=h,void(u=0);var S=M.lineString([c,g],n.properties);if(!1===r(S,a,s,h,u))return!1;u++,c=g})&&void 0}}})}function t(i,r){if(!i)throw new Error("geojson is required");p(i,function(n,a,s){if(null!==n.geometry){var f=n.geometry.coordinates;switch(n.geometry.type){case"LineString":if(!1===r(n,a,s,0,0))return!1;break;case"Polygon":for(var c=0;c<f.length;c++)if(!1===r(M.lineString(f[c],n.properties),a,s,c))return!1}}})}F.coordEach=k,F.coordReduce=function(i,r,n,a){var s=n;return k(i,function(u,f,c,y,d){s=0===f&&void 0===n?u:r(s,u,f,c,y,d)},a),s},F.propEach=o,F.propReduce=function(i,r,n){var a=n;return o(i,function(s,u){a=0===u&&void 0===n?s:r(a,s,u)}),a},F.featureEach=T,F.featureReduce=function(i,r,n){var a=n;return T(i,function(s,u){a=0===u&&void 0===n?s:r(a,s,u)}),a},F.coordAll=function(i){var r=[];return k(i,function(n){r.push(n)}),r},F.geomEach=_,F.geomReduce=function(i,r,n){var a=n;return _(i,function(s,u,f,c,y){a=0===u&&void 0===n?s:r(a,s,u,f,c,y)}),a},F.flattenEach=p,F.flattenReduce=function(i,r,n){var a=n;return p(i,function(s,u,f){a=0===u&&0===f&&void 0===n?s:r(a,s,u,f)}),a},F.segmentEach=l,F.segmentReduce=function(i,r,n){var a=n,s=!1;return l(i,function(u,f,c,y,d){a=!1===s&&void 0===n?u:r(a,u,f,c,y,d),s=!0}),a},F.lineEach=t,F.lineReduce=function(i,r,n){var a=n;return t(i,function(s,u,f,c){a=0===u&&void 0===n?s:r(a,s,u,f,c)}),a},F.findSegment=function(i,r){if(!M.isObject(r=r||{}))throw new Error("options is invalid");var n,a=r.featureIndex||0,s=r.multiFeatureIndex||0,u=r.geometryIndex||0,f=r.segmentIndex||0,c=r.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),c=c||i.features[a].properties,n=i.features[a].geometry;break;case"Feature":c=c||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var y=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return f<0&&(f=y.length+f-1),M.lineString([y[f],y[f+1]],c,r);case"Polygon":return u<0&&(u=y.length+u),f<0&&(f=y[u].length+f-1),M.lineString([y[u][f],y[u][f+1]],c,r);case"MultiLineString":return s<0&&(s=y.length+s),f<0&&(f=y[s].length+f-1),M.lineString([y[s][f],y[s][f+1]],c,r);case"MultiPolygon":return s<0&&(s=y.length+s),u<0&&(u=y[s].length+u),f<0&&(f=y[s][u].length-f-1),M.lineString([y[s][u][f],y[s][u][f+1]],c,r)}throw new Error("geojson is invalid")},F.findPoint=function(i,r){if(!M.isObject(r=r||{}))throw new Error("options is invalid");var n,a=r.featureIndex||0,s=r.multiFeatureIndex||0,u=r.geometryIndex||0,f=r.coordIndex||0,c=r.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),c=c||i.features[a].properties,n=i.features[a].geometry;break;case"Feature":c=c||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var y=n.coordinates;switch(n.type){case"Point":return M.point(y,c,r);case"MultiPoint":return s<0&&(s=y.length+s),M.point(y[s],c,r);case"LineString":return f<0&&(f=y.length+f),M.point(y[f],c,r);case"Polygon":return u<0&&(u=y.length+u),f<0&&(f=y[u].length+f),M.point(y[u][f],c,r);case"MultiLineString":return s<0&&(s=y.length+s),f<0&&(f=y[s].length+f),M.point(y[s][f],c,r);case"MultiPolygon":return s<0&&(s=y.length+s),u<0&&(u=y[s].length+u),f<0&&(f=y[s][u].length-f),M.point(y[s][u][f],c,r)}throw new Error("geojson is invalid")}},49972:function(ne){ne.exports=function(F){var e=0,M=0,k=0,o=0;return F.map(function(T){var _=(T=T.slice())[0],p=_.toUpperCase();if(_!=p)switch(T[0]=p,_){case"a":T[6]+=k,T[7]+=o;break;case"v":T[1]+=o;break;case"h":T[1]+=k;break;default:for(var l=1;l<T.length;)T[l++]+=k,T[l++]+=o}switch(p){case"Z":k=e,o=M;break;case"H":k=T[1];break;case"V":o=T[1];break;case"M":k=e=T[1],o=M=T[2];break;default:k=T[T.length-2],o=T[T.length-1]}return T})}},76752:function(ne){"use strict";ne.exports=function(F,e){if(!F||null==F.length)throw Error("Argument should be an array");e=null==e?1:Math.floor(e);for(var M=Array(2*e),k=0;k<e;k++){for(var o=-1/0,T=1/0,_=k,p=F.length;_<p;_+=e)F[_]>o&&(o=F[_]),F[_]<T&&(T=F[_]);M[k]=T,M[e+k]=o}return M}},10272:function(ne){"use strict";ne.exports=function(F,e,M){if("function"==typeof Array.prototype.findIndex)return F.findIndex(e,M);if("function"!=typeof e)throw new TypeError("predicate must be a function");var k=Object(F),o=k.length;if(0===o)return-1;for(var T=0;T<o;T++)if(e.call(M,k[T],T,k))return T;return-1}},71152:function(ne,F,e){"use strict";var M=e(76752);ne.exports=function(k,o,T){if(!k||null==k.length)throw Error("Argument should be an array");null==o&&(o=1),null==T&&(T=M(k,o));for(var _=0;_<o;_++){var p=T[o+_],l=T[_],t=_,i=k.length;if(p===1/0&&l===-1/0)for(t=_;t<i;t+=o)k[t]=k[t]===p?1:k[t]===l?0:.5;else if(p===1/0)for(t=_;t<i;t+=o)k[t]=k[t]===p?1:0;else if(l===-1/0)for(t=_;t<i;t+=o)k[t]=k[t]===l?0:1;else{var r=p-l;for(t=_;t<i;t+=o)isNaN(k[t])||(k[t]=0===r?.5:(k[t]-l)/r)}}return k}},67752:function(ne){ne.exports=function(F,e){var M="number"==typeof F,k="number"==typeof e;M&&!k?(e=F,F=0):M||k||(F=0,e=0);var o=(e|=0)-(F|=0);if(o<0)throw new Error("array length must be positive");for(var T=new Array(o),_=0,p=F;_<o;_++,p++)T[_]=p;return T}},45408:function(ne,F,e){"use strict";var M=e(4168);function k(R){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(j){return typeof j}:function(j){return j&&"function"==typeof Symbol&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(R)}var o,T,_=e(86832).codes,p=_.ERR_AMBIGUOUS_ARGUMENT,l=_.ERR_INVALID_ARG_TYPE,t=_.ERR_INVALID_ARG_VALUE,i=_.ERR_INVALID_RETURN_VALUE,r=_.ERR_MISSING_ARGS,n=e(26144),a=e(35840).inspect,s=e(35840).types,u=s.isPromise,f=s.isRegExp,c=Object.assign?Object.assign:e(60964).assign,y=Object.is?Object.is:e(39896);function d(){var R=e(25116);o=R.isDeepEqual,T=R.isDeepStrictEqual}var m=!1,g=ne.exports=h,x={};function v(R){throw R.message instanceof Error?R.message:new n(R)}function b(R,j,Y,B){if(!Y){var V=!1;if(0===j)V=!0,B="No value argument passed to `assert.ok()`";else if(B instanceof Error)throw B;var q=new n({actual:Y,expected:!0,message:B,operator:"==",stackStartFn:R});throw q.generatedMessage=V,q}}function h(){for(var R=arguments.length,j=new Array(R),Y=0;Y<R;Y++)j[Y]=arguments[Y];b.apply(void 0,[h,j.length].concat(j))}g.fail=function R(j,Y,B,V,q){var ie,te=arguments.length;if(0===te?ie="Failed":1===te?(B=j,j=void 0):(!1===m&&(m=!0,(M.emitWarning?M.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===te&&(V="!=")),B instanceof Error)throw B;var ee={actual:j,expected:Y,operator:void 0===V?"fail":V,stackStartFn:q||R};void 0!==B&&(ee.message=B);var $=new n(ee);throw ie&&($.message=ie,$.generatedMessage=!0),$},g.AssertionError=n,g.ok=h,g.equal=function R(j,Y,B){if(arguments.length<2)throw new r("actual","expected");j!=Y&&v({actual:j,expected:Y,message:B,operator:"==",stackStartFn:R})},g.notEqual=function R(j,Y,B){if(arguments.length<2)throw new r("actual","expected");j==Y&&v({actual:j,expected:Y,message:B,operator:"!=",stackStartFn:R})},g.deepEqual=function R(j,Y,B){if(arguments.length<2)throw new r("actual","expected");void 0===o&&d(),o(j,Y)||v({actual:j,expected:Y,message:B,operator:"deepEqual",stackStartFn:R})},g.notDeepEqual=function R(j,Y,B){if(arguments.length<2)throw new r("actual","expected");void 0===o&&d(),o(j,Y)&&v({actual:j,expected:Y,message:B,operator:"notDeepEqual",stackStartFn:R})},g.deepStrictEqual=function R(j,Y,B){if(arguments.length<2)throw new r("actual","expected");void 0===o&&d(),T(j,Y)||v({actual:j,expected:Y,message:B,operator:"deepStrictEqual",stackStartFn:R})},g.notDeepStrictEqual=function R(j,Y,B){if(arguments.length<2)throw new r("actual","expected");void 0===o&&d(),T(j,Y)&&v({actual:j,expected:Y,message:B,operator:"notDeepStrictEqual",stackStartFn:R})},g.strictEqual=function R(j,Y,B){if(arguments.length<2)throw new r("actual","expected");y(j,Y)||v({actual:j,expected:Y,message:B,operator:"strictEqual",stackStartFn:R})},g.notStrictEqual=function R(j,Y,B){if(arguments.length<2)throw new r("actual","expected");y(j,Y)&&v({actual:j,expected:Y,message:B,operator:"notStrictEqual",stackStartFn:R})};var S=function R(j,Y,B){var V=this;(function(q,ie){if(!(q instanceof ie))throw new TypeError("Cannot call a class as a function")})(this,R),Y.forEach(function(q){q in j&&(V[q]=void 0!==B&&"string"==typeof B[q]&&f(j[q])&&j[q].test(B[q])?B[q]:j[q])})};function w(R,j,Y,B){if("function"!=typeof j){if(f(j))return j.test(R);if(2===arguments.length)throw new l("expected",["Function","RegExp"],j);if("object"!==k(R)||null===R){var V=new n({actual:R,expected:j,message:Y,operator:"deepStrictEqual",stackStartFn:B});throw V.operator=B.name,V}var q=Object.keys(j);if(j instanceof Error)q.push("name","message");else if(0===q.length)throw new t("error",j,"may not be an empty object");return void 0===o&&d(),q.forEach(function(ie){"string"==typeof R[ie]&&f(j[ie])&&j[ie].test(R[ie])||function(te,ee,$,J,X,ae){if(!($ in te)||!T(te[$],ee[$])){if(!J){var ce=new S(te,X),le=new S(ee,X,te),pe=new n({actual:ce,expected:le,operator:"deepStrictEqual",stackStartFn:ae});throw pe.actual=te,pe.expected=ee,pe.operator=ae.name,pe}v({actual:te,expected:ee,message:J,operator:ae.name,stackStartFn:ae})}}(R,j,ie,Y,q,B)}),!0}return void 0!==j.prototype&&R instanceof j||!Error.isPrototypeOf(j)&&!0===j.call({},R)}function E(R){if("function"!=typeof R)throw new l("fn","Function",R);try{R()}catch(j){return j}return x}function P(R){return u(R)||null!==R&&"object"===k(R)&&"function"==typeof R.then&&"function"==typeof R.catch}function I(R){return Promise.resolve().then(function(){var j;if("function"==typeof R){if(!P(j=R()))throw new i("instance of Promise","promiseFn",j)}else{if(!P(R))throw new l("promiseFn",["Function","Promise"],R);j=R}return Promise.resolve().then(function(){return j}).then(function(){return x}).catch(function(Y){return Y})})}function O(R,j,Y,B){if("string"==typeof Y){if(4===arguments.length)throw new l("error",["Object","Error","Function","RegExp"],Y);if("object"===k(j)&&null!==j){if(j.message===Y)throw new p("error/message",'The error message "'.concat(j.message,'" is identical to the message.'))}else if(j===Y)throw new p("error/message",'The error "'.concat(j,'" is identical to the message.'));B=Y,Y=void 0}else if(null!=Y&&"object"!==k(Y)&&"function"!=typeof Y)throw new l("error",["Object","Error","Function","RegExp"],Y);if(j===x){var V="";Y&&Y.name&&(V+=" (".concat(Y.name,")")),V+=B?": ".concat(B):".",v({actual:void 0,expected:Y,operator:R.name,message:"Missing expected ".concat("rejects"===R.name?"rejection":"exception").concat(V),stackStartFn:R})}if(Y&&!w(j,Y,B,R))throw j}function z(R,j,Y,B){if(j!==x){if("string"==typeof Y&&(B=Y,Y=void 0),!Y||w(j,Y)){var V=B?": ".concat(B):".";v({actual:j,expected:Y,operator:R.name,message:"Got unwanted ".concat("doesNotReject"===R.name?"rejection":"exception").concat(V,"\n")+'Actual message: "'.concat(j&&j.message,'"'),stackStartFn:R})}throw j}}function U(){for(var R=arguments.length,j=new Array(R),Y=0;Y<R;Y++)j[Y]=arguments[Y];b.apply(void 0,[U,j.length].concat(j))}g.throws=function R(j){for(var Y=arguments.length,B=new Array(Y>1?Y-1:0),V=1;V<Y;V++)B[V-1]=arguments[V];O.apply(void 0,[R,E(j)].concat(B))},g.rejects=function R(j){for(var Y=arguments.length,B=new Array(Y>1?Y-1:0),V=1;V<Y;V++)B[V-1]=arguments[V];return I(j).then(function(q){return O.apply(void 0,[R,q].concat(B))})},g.doesNotThrow=function R(j){for(var Y=arguments.length,B=new Array(Y>1?Y-1:0),V=1;V<Y;V++)B[V-1]=arguments[V];z.apply(void 0,[R,E(j)].concat(B))},g.doesNotReject=function R(j){for(var Y=arguments.length,B=new Array(Y>1?Y-1:0),V=1;V<Y;V++)B[V-1]=arguments[V];return I(j).then(function(q){return z.apply(void 0,[R,q].concat(B))})},g.ifError=function R(j){if(null!=j){var Y="ifError got unwanted exception: ";"object"===k(j)&&"string"==typeof j.message?Y+=0===j.message.length&&j.constructor?j.constructor.name:j.message:Y+=a(j);var B=new n({actual:j,expected:null,operator:"ifError",message:Y,stackStartFn:R}),V=j.stack;if("string"==typeof V){var q=V.split("\n");q.shift();for(var ie=B.stack.split("\n"),te=0;te<q.length;te++){var ee=ie.indexOf(q[te]);if(-1!==ee){ie=ie.slice(0,ee);break}}B.stack="".concat(ie.join("\n"),"\n").concat(q.join("\n"))}throw B}},g.strict=c(U,g,{equal:g.strictEqual,deepEqual:g.deepStrictEqual,notEqual:g.notStrictEqual,notDeepEqual:g.notDeepStrictEqual}),g.strict.strict=g.strict},26144:function(ne,F,e){"use strict";var M=e(4168);function k(v,b,h){return b in v?Object.defineProperty(v,b,{value:h,enumerable:!0,configurable:!0,writable:!0}):v[b]=h,v}function T(v,b){return!b||"object"!==r(b)&&"function"!=typeof b?_(v):b}function _(v){if(void 0===v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function p(v){var b="function"==typeof Map?new Map:void 0;return p=function(h){if(null===h||-1===Function.toString.call(h).indexOf("[native code]"))return h;if("function"!=typeof h)throw new TypeError("Super expression must either be null or a function");if(void 0!==b){if(b.has(h))return b.get(h);b.set(h,w)}function w(){return l(h,arguments,i(this).constructor)}return w.prototype=Object.create(h.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),t(w,h)},p(v)}function l(v,b,h){return(l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(S,w,E){var P=[null];P.push.apply(P,w);var I=new(Function.bind.apply(S,P));return E&&t(I,E.prototype),I}).apply(null,arguments)}function t(v,b){return(t=Object.setPrototypeOf||function(h,S){return h.__proto__=S,h})(v,b)}function i(v){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(v)}function r(v){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(v)}var n=e(35840).inspect,a=e(86832).codes.ERR_INVALID_ARG_TYPE;function s(v,b,h){return(void 0===h||h>v.length)&&(h=v.length),v.substring(h-b.length,h)===b}var u="",f="",c="",y="",d={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function m(v){var b=Object.keys(v),h=Object.create(Object.getPrototypeOf(v));return b.forEach(function(S){h[S]=v[S]}),Object.defineProperty(h,"message",{value:v.message}),h}function g(v){return n(v,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var x=function(v){function b(w){var E;if(function(ie,te){if(!(ie instanceof te))throw new TypeError("Cannot call a class as a function")}(this,b),"object"!==r(w)||null===w)throw new a("options","Object",w);var P=w.message,I=w.operator,O=w.stackStartFn,z=w.actual,U=w.expected,R=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=P)E=T(this,i(b).call(this,String(P)));else if(M.stderr&&M.stderr.isTTY&&(M.stderr&&M.stderr.getColorDepth&&1!==M.stderr.getColorDepth()?(u="\x1b[34m",f="\x1b[32m",y="\x1b[39m",c="\x1b[31m"):(u="",f="",y="",c="")),"object"===r(z)&&null!==z&&"object"===r(U)&&null!==U&&"stack"in z&&z instanceof Error&&"stack"in U&&U instanceof Error&&(z=m(z),U=m(U)),"deepStrictEqual"===I||"strictEqual"===I)E=T(this,i(b).call(this,function(ie,te,ee){var $="",J="",X=0,ae="",ce=!1,le=g(ie),pe=le.split("\n"),we=g(te).split("\n"),Te=0,ye="";if("strictEqual"===ee&&"object"===r(ie)&&"object"===r(te)&&null!==ie&&null!==te&&(ee="strictEqualObject"),1===pe.length&&1===we.length&&pe[0]!==we[0]){var ve=pe[0].length+we[0].length;if(ve<=10){if(!("object"===r(ie)&&null!==ie||"object"===r(te)&&null!==te||0===ie&&0===te))return"".concat(d[ee],"\n\n")+"".concat(pe[0]," !== ").concat(we[0],"\n")}else if("strictEqualObject"!==ee&&ve<(M.stderr&&M.stderr.isTTY?M.stderr.columns:80)){for(;pe[0][Te]===we[0][Te];)Te++;Te>2&&(ye="\n  ".concat(function(Fe,Be){if(Be=Math.floor(Be),0==Fe.length||0==Be)return"";var me=Fe.length*Be;for(Be=Math.floor(Math.log(Be)/Math.log(2));Be;)Fe+=Fe,Be--;return Fe+Fe.substring(0,me-Fe.length)}(" ",Te),"^"),Te=0)}}for(var xe=pe[pe.length-1],Ce=we[we.length-1];xe===Ce&&(Te++<2?ae="\n  ".concat(xe).concat(ae):$=xe,pe.pop(),we.pop(),0!==pe.length&&0!==we.length);)xe=pe[pe.length-1],Ce=we[we.length-1];var Oe=Math.max(pe.length,we.length);if(0===Oe){var be=le.split("\n");if(be.length>30)for(be[26]="".concat(u,"...").concat(y);be.length>27;)be.pop();return"".concat(d.notIdentical,"\n\n").concat(be.join("\n"),"\n")}Te>3&&(ae="\n".concat(u,"...").concat(y).concat(ae),ce=!0),""!==$&&(ae="\n  ".concat($).concat(ae),$="");var ue=0,se=d[ee]+"\n".concat(f,"+ actual").concat(y," ").concat(c,"- expected").concat(y),ge=" ".concat(u,"...").concat(y," Lines skipped");for(Te=0;Te<Oe;Te++){var Ie=Te-X;if(pe.length<Te+1)Ie>1&&Te>2&&(Ie>4?(J+="\n".concat(u,"...").concat(y),ce=!0):Ie>3&&(J+="\n  ".concat(we[Te-2]),ue++),J+="\n  ".concat(we[Te-1]),ue++),X=Te,$+="\n".concat(c,"-").concat(y," ").concat(we[Te]),ue++;else if(we.length<Te+1)Ie>1&&Te>2&&(Ie>4?(J+="\n".concat(u,"...").concat(y),ce=!0):Ie>3&&(J+="\n  ".concat(pe[Te-2]),ue++),J+="\n  ".concat(pe[Te-1]),ue++),X=Te,J+="\n".concat(f,"+").concat(y," ").concat(pe[Te]),ue++;else{var ke=we[Te],Se=pe[Te],Pe=Se!==ke&&(!s(Se,",")||Se.slice(0,-1)!==ke);Pe&&s(ke,",")&&ke.slice(0,-1)===Se&&(Pe=!1,Se+=","),Pe?(Ie>1&&Te>2&&(Ie>4?(J+="\n".concat(u,"...").concat(y),ce=!0):Ie>3&&(J+="\n  ".concat(pe[Te-2]),ue++),J+="\n  ".concat(pe[Te-1]),ue++),X=Te,J+="\n".concat(f,"+").concat(y," ").concat(Se),$+="\n".concat(c,"-").concat(y," ").concat(ke),ue+=2):(J+=$,$="",1!==Ie&&0!==Te||(J+="\n  ".concat(Se),ue++))}if(ue>20&&Te<Oe-2)return"".concat(se).concat(ge,"\n").concat(J,"\n").concat(u,"...").concat(y).concat($,"\n")+"".concat(u,"...").concat(y)}return"".concat(se).concat(ce?ge:"","\n").concat(J).concat($).concat(ae).concat(ye)}(z,U,I)));else if("notDeepStrictEqual"===I||"notStrictEqual"===I){var j=d[I],Y=g(z).split("\n");if("notStrictEqual"===I&&"object"===r(z)&&null!==z&&(j=d.notStrictEqualObject),Y.length>30)for(Y[26]="".concat(u,"...").concat(y);Y.length>27;)Y.pop();E=T(this,1===Y.length?i(b).call(this,"".concat(j," ").concat(Y[0])):i(b).call(this,"".concat(j,"\n\n").concat(Y.join("\n"),"\n")))}else{var B=g(z),V="",q=d[I];"notDeepEqual"===I||"notEqual"===I?(B="".concat(d[I],"\n\n").concat(B)).length>1024&&(B="".concat(B.slice(0,1021),"...")):(V="".concat(g(U)),B.length>512&&(B="".concat(B.slice(0,509),"...")),V.length>512&&(V="".concat(V.slice(0,509),"...")),"deepEqual"===I||"equal"===I?B="".concat(q,"\n\n").concat(B,"\n\nshould equal\n\n"):V=" ".concat(I," ").concat(V)),E=T(this,i(b).call(this,"".concat(B).concat(V)))}return Error.stackTraceLimit=R,E.generatedMessage=!P,Object.defineProperty(_(E),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),E.code="ERR_ASSERTION",E.actual=z,E.expected=U,E.operator=I,Error.captureStackTrace&&Error.captureStackTrace(_(E),O),E.name="AssertionError",T(E)}var S;return function(w,E){if("function"!=typeof E&&null!==E)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(E&&E.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),E&&t(w,E)}(b,v),S=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:n.custom,value:function(w,E){return n(this,function(P){for(var I=1;I<arguments.length;I++){var O=null!=arguments[I]?arguments[I]:{},z=Object.keys(O);"function"==typeof Object.getOwnPropertySymbols&&(z=z.concat(Object.getOwnPropertySymbols(O).filter(function(U){return Object.getOwnPropertyDescriptor(O,U).enumerable}))),z.forEach(function(U){k(P,U,O[U])})}return P}({},E,{customInspect:!1,depth:0}))}}],S&&function o(v,b){for(var h=0;h<b.length;h++){var S=b[h];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(v,S.key,S)}}(b.prototype,S),b}(p(Error));ne.exports=x},86832:function(ne,F,e){"use strict";function M(i){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(i)}function k(i){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(i)}function o(i,r){return(o=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n})(i,r)}var T,_,p={};function l(i,r,n){n||(n=Error);var a=function(s){function u(f,c,y){var d,m,g,x;return function(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}(this,u),(d=function(m,g){return!g||"object"!==M(g)&&"function"!=typeof g?function(x){if(void 0===x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}(m):g}(this,k(u).call(this,(m=f,g=c,x=y,"string"==typeof r?r:r(m,g,x))))).code=i,d}return function(f,c){if("function"!=typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(c&&c.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),c&&o(f,c)}(u,s),u}(n);p[i]=a}function t(i,r){if(Array.isArray(i)){var n=i.length;return i=i.map(function(a){return String(a)}),n>2?"one of ".concat(r," ").concat(i.slice(0,n-1).join(", "),", or ")+i[n-1]:2===n?"one of ".concat(r," ").concat(i[0]," or ").concat(i[1]):"of ".concat(r," ").concat(i[0])}return"of ".concat(r," ").concat(String(i))}l("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),l("ERR_INVALID_ARG_TYPE",function(i,r,n){var a,u,f,c,d,g;if(void 0===T&&(T=e(45408)),T("string"==typeof i,"'name' must be a string"),"string"==typeof r&&("not ","not "===r.substr(0,4))?(a="must not be",r=r.replace(/^not /,"")):a="must be",d=i," argument",(void 0===g||g>d.length)&&(g=d.length)," argument"===d.substring(g-9,g))u="The ".concat(i," ").concat(a," ").concat(t(r,"type"));else{var y=("number"!=typeof c&&(c=0),c+1>(f=i).length||-1===f.indexOf(".",c)?"argument":"property");u='The "'.concat(i,'" ').concat(y," ").concat(a," ").concat(t(r,"type"))}return u+". Received type ".concat(M(n))},TypeError),l("ERR_INVALID_ARG_VALUE",function(i,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===_&&(_=e(35840));var a=_.inspect(r);return a.length>128&&(a="".concat(a.slice(0,128),"...")),"The argument '".concat(i,"' ").concat(n,". Received ").concat(a)},TypeError,RangeError),l("ERR_INVALID_RETURN_VALUE",function(i,r,n){var a;return a=n&&n.constructor&&n.constructor.name?"instance of ".concat(n.constructor.name):"type ".concat(M(n)),"Expected ".concat(i,' to be returned from the "').concat(r,'"')+" function but got ".concat(a,".")},TypeError),l("ERR_MISSING_ARGS",function(){for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];void 0===T&&(T=e(45408)),T(r.length>0,"At least one arg needs to be specified");var a="The ",s=r.length;switch(r=r.map(function(u){return'"'.concat(u,'"')}),s){case 1:a+="".concat(r[0]," argument");break;case 2:a+="".concat(r[0]," and ").concat(r[1]," arguments");break;default:a+=r.slice(0,s-1).join(", "),a+=", and ".concat(r[s-1]," arguments")}return"".concat(a," must be specified")},TypeError),ne.exports.codes=p},25116:function(ne,F,e){"use strict";function M(X,ae){return function(ce){if(Array.isArray(ce))return ce}(X)||function(ce,le){var pe=[],we=!0,Te=!1,ye=void 0;try{for(var ve,xe=ce[Symbol.iterator]();!(we=(ve=xe.next()).done)&&(pe.push(ve.value),!le||pe.length!==le);we=!0);}catch(Ce){Te=!0,ye=Ce}finally{try{we||null==xe.return||xe.return()}finally{if(Te)throw ye}}return pe}(X,ae)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function k(X){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ae){return typeof ae}:function(ae){return ae&&"function"==typeof Symbol&&ae.constructor===Symbol&&ae!==Symbol.prototype?"symbol":typeof ae})(X)}var o=void 0!==/a/g.flags,T=function(X){var ae=[];return X.forEach(function(ce){return ae.push(ce)}),ae},_=function(X){var ae=[];return X.forEach(function(ce,le){return ae.push([le,ce])}),ae},p=Object.is?Object.is:e(39896),l=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},t=Number.isNaN?Number.isNaN:e(1560);function i(X){return X.call.bind(X)}var r=i(Object.prototype.hasOwnProperty),n=i(Object.prototype.propertyIsEnumerable),a=i(Object.prototype.toString),s=e(35840).types,u=s.isAnyArrayBuffer,f=s.isArrayBufferView,c=s.isDate,y=s.isMap,d=s.isRegExp,m=s.isSet,g=s.isNativeError,x=s.isBoxedPrimitive,v=s.isNumberObject,b=s.isStringObject,h=s.isBooleanObject,S=s.isBigIntObject,w=s.isSymbolObject,E=s.isFloat32Array,P=s.isFloat64Array;function I(X){if(0===X.length||X.length>10)return!0;for(var ae=0;ae<X.length;ae++){var ce=X.charCodeAt(ae);if(ce<48||ce>57)return!0}return 10===X.length&&X>=Math.pow(2,32)}function O(X){return Object.keys(X).filter(I).concat(l(X).filter(Object.prototype.propertyIsEnumerable.bind(X)))}function z(X,ae){if(X===ae)return 0;for(var ce=X.length,le=ae.length,pe=0,we=Math.min(ce,le);pe<we;++pe)if(X[pe]!==ae[pe]){ce=X[pe],le=ae[pe];break}return ce<le?-1:le<ce?1:0}var U=0,R=1,j=2,Y=3;function B(X,ae,ce,le){if(X===ae)return 0!==X||!ce||p(X,ae);if(ce){if("object"!==k(X))return"number"==typeof X&&t(X)&&t(ae);if("object"!==k(ae)||null===X||null===ae||Object.getPrototypeOf(X)!==Object.getPrototypeOf(ae))return!1}else{if(null===X||"object"!==k(X))return(null===ae||"object"!==k(ae))&&X==ae;if(null===ae||"object"!==k(ae))return!1}var pe,we,Te,ye,ue,se,ve=a(X);if(ve!==a(ae))return!1;if(Array.isArray(X)){if(X.length!==ae.length)return!1;var xe=O(X),Ce=O(ae);return xe.length===Ce.length&&q(X,ae,ce,le,R,xe)}if("[object Object]"===ve&&(!y(X)&&y(ae)||!m(X)&&m(ae)))return!1;if(c(X)){if(!c(ae)||Date.prototype.getTime.call(X)!==Date.prototype.getTime.call(ae))return!1}else if(d(X)){if(!d(ae)||(Te=X,ye=ae,!(o?Te.source===ye.source&&Te.flags===ye.flags:RegExp.prototype.toString.call(Te)===RegExp.prototype.toString.call(ye))))return!1}else if(g(X)||X instanceof Error){if(X.message!==ae.message||X.name!==ae.name)return!1}else{if(f(X)){if(ce||!E(X)&&!P(X)){if((ue=X).byteLength!==(se=ae).byteLength||0!==z(new Uint8Array(ue.buffer,ue.byteOffset,ue.byteLength),new Uint8Array(se.buffer,se.byteOffset,se.byteLength)))return!1}else if(!function(ue,se){if(ue.byteLength!==se.byteLength)return!1;for(var ge=0;ge<ue.byteLength;ge++)if(ue[ge]!==se[ge])return!1;return!0}(X,ae))return!1;var Oe=O(X),be=O(ae);return Oe.length===be.length&&q(X,ae,ce,le,U,Oe)}if(m(X))return!(!m(ae)||X.size!==ae.size)&&q(X,ae,ce,le,j);if(y(X))return!(!y(ae)||X.size!==ae.size)&&q(X,ae,ce,le,Y);if(u(X)){if((pe=X).byteLength!==(we=ae).byteLength||0!==z(new Uint8Array(pe),new Uint8Array(we)))return!1}else if(x(X)&&!function(ue,se){return v(ue)?v(se)&&p(Number.prototype.valueOf.call(ue),Number.prototype.valueOf.call(se)):b(ue)?b(se)&&String.prototype.valueOf.call(ue)===String.prototype.valueOf.call(se):h(ue)?h(se)&&Boolean.prototype.valueOf.call(ue)===Boolean.prototype.valueOf.call(se):S(ue)?S(se)&&BigInt.prototype.valueOf.call(ue)===BigInt.prototype.valueOf.call(se):w(se)&&Symbol.prototype.valueOf.call(ue)===Symbol.prototype.valueOf.call(se)}(X,ae))return!1}return q(X,ae,ce,le,U)}function V(X,ae){return ae.filter(function(ce){return n(X,ce)})}function q(X,ae,ce,le,pe,we){if(5===arguments.length){we=Object.keys(X);var Te=Object.keys(ae);if(we.length!==Te.length)return!1}for(var ye=0;ye<we.length;ye++)if(!r(ae,we[ye]))return!1;if(ce&&5===arguments.length){var ve=l(X);if(0!==ve.length){var xe=0;for(ye=0;ye<ve.length;ye++){var Ce=ve[ye];if(n(X,Ce)){if(!n(ae,Ce))return!1;we.push(Ce),xe++}else if(n(ae,Ce))return!1}var Oe=l(ae);if(ve.length!==Oe.length&&V(ae,Oe).length!==xe)return!1}else{var be=l(ae);if(0!==be.length&&0!==V(ae,be).length)return!1}}if(0===we.length&&(pe===U||pe===R&&0===X.length||0===X.size))return!0;if(void 0===le)le={val1:new Map,val2:new Map,position:0};else{var ue=le.val1.get(X);if(void 0!==ue){var se=le.val2.get(ae);if(void 0!==se)return ue===se}le.position++}le.val1.set(X,le.position),le.val2.set(ae,le.position);var ge=function(Ie,ke,Se,Pe,Fe,Be){var me=0;if(Be===j){if(!function(Re,He,Ze,nt){for(var ft=null,ht=T(Re),Tt=0;Tt<ht.length;Tt++){var At=ht[Tt];if("object"===k(At)&&null!==At)null===ft&&(ft=new Set),ft.add(At);else if(!He.has(At)){if(Ze||!ee(Re,He,At))return!1;null===ft&&(ft=new Set),ft.add(At)}}if(null!==ft){for(var _t=T(He),ot=0;ot<_t.length;ot++){var it=_t[ot];if("object"===k(it)&&null!==it){if(!ie(ft,it,Ze,nt))return!1}else if(!Ze&&!Re.has(it)&&!ie(ft,it,Ze,nt))return!1}return 0===ft.size}return!0}(Ie,ke,Se,Fe))return!1}else if(Be===Y){if(!function(Re,He,Ze,nt){for(var ft=null,ht=_(Re),Tt=0;Tt<ht.length;Tt++){var At=M(ht[Tt],2),_t=At[0],ot=At[1];if("object"===k(_t)&&null!==_t)null===ft&&(ft=new Set),ft.add(_t);else{var it=He.get(_t);if(void 0===it&&!He.has(_t)||!B(ot,it,Ze,nt)){if(Ze||!$(Re,He,_t,ot,nt))return!1;null===ft&&(ft=new Set),ft.add(_t)}}}if(null!==ft){for(var Pt=_(He),jt=0;jt<Pt.length;jt++){var Ut=M(Pt[jt],2),Rt=(_t=Ut[0],Ut[1]);if("object"===k(_t)&&null!==_t){if(!J(ft,Re,_t,Rt,Ze,nt))return!1}else if(!(Ze||Re.has(_t)&&B(Re.get(_t),Rt,!1,nt)||J(ft,Re,_t,Rt,!1,nt)))return!1}return 0===ft.size}return!0}(Ie,ke,Se,Fe))return!1}else if(Be===R)for(;me<Ie.length;me++){if(!r(Ie,me)){if(r(ke,me))return!1;for(var Me=Object.keys(Ie);me<Me.length;me++){var Le=Me[me];if(!r(ke,Le)||!B(Ie[Le],ke[Le],Se,Fe))return!1}return Me.length===Object.keys(ke).length}if(!r(ke,me)||!B(Ie[me],ke[me],Se,Fe))return!1}for(me=0;me<Pe.length;me++){var Ne=Pe[me];if(!B(Ie[Ne],ke[Ne],Se,Fe))return!1}return!0}(X,ae,ce,we,le,pe);return le.val1.delete(X),le.val2.delete(ae),ge}function ie(X,ae,ce,le){for(var pe=T(X),we=0;we<pe.length;we++){var Te=pe[we];if(B(ae,Te,ce,le))return X.delete(Te),!0}return!1}function te(X){switch(k(X)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":X=+X;case"number":if(t(X))return!1}return!0}function ee(X,ae,ce){var le=te(ce);return le??(ae.has(le)&&!X.has(le))}function $(X,ae,ce,le,pe){var we=te(ce);if(null!=we)return we;var Te=ae.get(we);return!(void 0===Te&&!ae.has(we)||!B(le,Te,!1,pe))&&!X.has(we)&&B(le,Te,!1,pe)}function J(X,ae,ce,le,pe,we){for(var Te=T(X),ye=0;ye<Te.length;ye++){var ve=Te[ye];if(B(ce,ve,pe,we)&&B(le,ae.get(ve),pe,we))return X.delete(ve),!0}return!1}ne.exports={isDeepEqual:function(X,ae){return B(X,ae,!1)},isDeepStrictEqual:function(X,ae){return B(X,ae,!0)}}},83160:function(ne,F,e){"use strict";e.r(F),e.d(F,{decode:function(){return _},encode:function(){return T}});for(var M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k=typeof Uint8Array>"u"?[]:new Uint8Array(256),o=0;o<64;o++)k[M.charCodeAt(o)]=o;var T=function(p){var l,t=new Uint8Array(p),i=t.length,r="";for(l=0;l<i;l+=3)r+=M[t[l]>>2],r+=M[(3&t[l])<<4|t[l+1]>>4],r+=M[(15&t[l+1])<<2|t[l+2]>>6],r+=M[63&t[l+2]];return i%3==2?r=r.substring(0,r.length-1)+"=":i%3==1&&(r=r.substring(0,r.length-2)+"=="),r},_=function(p){var l,t,i,r,n,a=.75*p.length,s=p.length,u=0;"="===p[p.length-1]&&(a--,"="===p[p.length-2]&&a--);var f=new ArrayBuffer(a),c=new Uint8Array(f);for(l=0;l<s;l+=4)t=k[p.charCodeAt(l)],i=k[p.charCodeAt(l+1)],r=k[p.charCodeAt(l+2)],n=k[p.charCodeAt(l+3)],c[u++]=t<<2|i>>4,c[u++]=(15&i)<<4|r>>2,c[u++]=(3&r)<<6|63&n;return f}},59968:function(ne,F){"use strict";F.byteLength=function(l){var t=_(l),r=t[1];return 3*(t[0]+r)/4-r},F.toByteArray=function(l){var t,i,d,r=_(l),n=r[0],a=r[1],s=new k(3*(n+(d=a))/4-d),u=0,f=a>0?n-4:n;for(i=0;i<f;i+=4)t=M[l.charCodeAt(i)]<<18|M[l.charCodeAt(i+1)]<<12|M[l.charCodeAt(i+2)]<<6|M[l.charCodeAt(i+3)],s[u++]=t>>16&255,s[u++]=t>>8&255,s[u++]=255&t;return 2===a&&(t=M[l.charCodeAt(i)]<<2|M[l.charCodeAt(i+1)]>>4,s[u++]=255&t),1===a&&(t=M[l.charCodeAt(i)]<<10|M[l.charCodeAt(i+1)]<<4|M[l.charCodeAt(i+2)]>>2,s[u++]=t>>8&255,s[u++]=255&t),s},F.fromByteArray=function(l){for(var t,i=l.length,r=i%3,n=[],a=16383,s=0,u=i-r;s<u;s+=a)n.push(p(l,s,s+a>u?u:s+a));return 1===r?n.push(e[(t=l[i-1])>>2]+e[t<<4&63]+"=="):2===r&&n.push(e[(t=(l[i-2]<<8)+l[i-1])>>10]+e[t>>4&63]+e[t<<2&63]+"="),n.join("")};for(var e=[],M=[],k=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=0;T<64;++T)e[T]=o[T],M[o.charCodeAt(T)]=T;function _(l){var t=l.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=l.indexOf("=");return-1===i&&(i=t),[i,i===t?0:4-i%4]}function p(l,t,i){for(var n,a=[],s=t;s<i;s+=3)a.push(e[(n=(l[s]<<16&16711680)+(l[s+1]<<8&65280)+(255&l[s+2]))>>18&63]+e[n>>12&63]+e[n>>6&63]+e[63&n]);return a.join("")}M["-".charCodeAt(0)]=62,M["_".charCodeAt(0)]=63},64928:function(ne){"use strict";function F(_,p,l,t,i){for(var r=i+1;t<=i;){var n=t+i>>>1,a=_[n];(void 0!==l?l(a,p):a-p)>=0?(r=n,i=n-1):t=n+1}return r}function e(_,p,l,t,i){for(var r=i+1;t<=i;){var n=t+i>>>1,a=_[n];(void 0!==l?l(a,p):a-p)>0?(r=n,i=n-1):t=n+1}return r}function M(_,p,l,t,i){for(var r=t-1;t<=i;){var n=t+i>>>1,a=_[n];(void 0!==l?l(a,p):a-p)<0?(r=n,t=n+1):i=n-1}return r}function k(_,p,l,t,i){for(var r=t-1;t<=i;){var n=t+i>>>1,a=_[n];(void 0!==l?l(a,p):a-p)<=0?(r=n,t=n+1):i=n-1}return r}function o(_,p,l,t,i){for(;t<=i;){var r=t+i>>>1,n=_[r],a=void 0!==l?l(n,p):n-p;if(0===a)return r;a<=0?t=r+1:i=r-1}return-1}function T(_,p,l,t,i,r){return"function"==typeof l?r(_,p,l,void 0===t?0:0|t,void 0===i?_.length-1:0|i):r(_,p,void 0,void 0===l?0:0|l,void 0===t?_.length-1:0|t)}ne.exports={ge:function(_,p,l,t,i){return T(_,p,l,t,i,F)},gt:function(_,p,l,t,i){return T(_,p,l,t,i,e)},lt:function(_,p,l,t,i){return T(_,p,l,t,i,M)},le:function(_,p,l,t,i){return T(_,p,l,t,i,k)},eq:function(_,p,l,t,i){return T(_,p,l,t,i,o)}}},308:function(ne,F){"use strict";function e(k){var o=32;return(k&=-k)&&o--,65535&k&&(o-=16),16711935&k&&(o-=8),252645135&k&&(o-=4),858993459&k&&(o-=2),1431655765&k&&(o-=1),o}F.INT_BITS=32,F.INT_MAX=2147483647,F.INT_MIN=-2147483648,F.sign=function(k){return(k>0)-(k<0)},F.abs=function(k){var o=k>>31;return(k^o)-o},F.min=function(k,o){return o^(k^o)&-(k<o)},F.max=function(k,o){return k^(k^o)&-(k<o)},F.isPow2=function(k){return!(k&k-1||!k)},F.log2=function(k){var o,T;return o=(k>65535)<<4,o|=T=((k>>>=o)>255)<<3,o|=T=((k>>>=T)>15)<<2,(o|=T=((k>>>=T)>3)<<1)|(k>>>=T)>>1},F.log10=function(k){return k>=1e9?9:k>=1e8?8:k>=1e7?7:k>=1e6?6:k>=1e5?5:k>=1e4?4:k>=1e3?3:k>=100?2:k>=10?1:0},F.popCount=function(k){return 16843009*((k=(858993459&(k-=k>>>1&1431655765))+(k>>>2&858993459))+(k>>>4)&252645135)>>>24},F.countTrailingZeros=e,F.nextPow2=function(k){return k+=0===k,--k,k|=k>>>1,k|=k>>>2,k|=k>>>4,1+((k|=k>>>8)|k>>>16)},F.prevPow2=function(k){return k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,(k|=k>>>16)-(k>>>1)},F.parity=function(k){return k^=k>>>16,k^=k>>>8,k^=k>>>4,27030>>>(k&=15)&1};var M=new Array(256);(function(k){for(var o=0;o<256;++o){var T=o,_=o,p=7;for(T>>>=1;T;T>>>=1)_<<=1,_|=1&T,--p;k[o]=_<<p&255}})(M),F.reverse=function(k){return M[255&k]<<24|M[k>>>8&255]<<16|M[k>>>16&255]<<8|M[k>>>24&255]},F.interleave2=function(k,o){return(k=1431655765&((k=858993459&((k=252645135&((k=16711935&((k&=65535)|k<<8))|k<<4))|k<<2))|k<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o&=65535)|o<<8))|o<<4))|o<<2))|o<<1))<<1},F.deinterleave2=function(k,o){return(k=65535&((k=16711935&((k=252645135&((k=858993459&((k=k>>>o&1431655765)|k>>>1))|k>>>2))|k>>>4))|k>>>16))<<16>>16},F.interleave3=function(k,o,T){return k=1227133513&((k=3272356035&((k=251719695&((k=4278190335&((k&=1023)|k<<16))|k<<8))|k<<4))|k<<2),(k|=(o=1227133513&((o=3272356035&((o=251719695&((o=4278190335&((o&=1023)|o<<16))|o<<8))|o<<4))|o<<2))<<1)|(T=1227133513&((T=3272356035&((T=251719695&((T=4278190335&((T&=1023)|T<<16))|T<<8))|T<<4))|T<<2))<<2},F.deinterleave3=function(k,o){return(k=1023&((k=4278190335&((k=251719695&((k=3272356035&((k=k>>>o&1227133513)|k>>>2))|k>>>4))|k>>>8))|k>>>16))<<22>>22},F.nextCombination=function(k){var o=k|k-1;return o+1|(~o&-~o)-1>>>e(k)+1}},29620:function(ne,F,e){"use strict";var M=e(32420);ne.exports=function(_,p){p||(p={});var l,t,i,r,n,a,u,c,y,d=null==p.cutoff?.25:p.cutoff,m=null==p.radius?8:p.radius,g=p.channel||0;if(ArrayBuffer.isView(_)||Array.isArray(_)){if(!p.width||!p.height)throw Error("For raw data width and height should be provided by options");l=p.width,t=p.height,r=_,a=p.stride?p.stride:Math.floor(_.length/l/t)}else window.HTMLCanvasElement&&_ instanceof window.HTMLCanvasElement?(r=(u=_).getContext("2d").getImageData(0,0,l=u.width,t=u.height).data,a=4):window.CanvasRenderingContext2D&&_ instanceof window.CanvasRenderingContext2D?(l=(u=_.canvas).width,r=_.getImageData(0,0,l,t=u.height).data,a=4):window.ImageData&&_ instanceof window.ImageData&&(l=_.width,t=_.height,r=_.data,a=4);if(i=Math.max(l,t),window.Uint8ClampedArray&&r instanceof window.Uint8ClampedArray||window.Uint8Array&&r instanceof window.Uint8Array)for(n=r,r=Array(l*t),c=0,y=n.length;c<y;c++)r[c]=n[c*a+g]/255;else if(1!==a)throw Error("Raw data can have only 1 value per pixel");var x=Array(l*t),v=Array(l*t),b=Array(i),h=Array(i),S=Array(i+1),w=Array(i);for(c=0,y=l*t;c<y;c++){var E=r[c];x[c]=1===E?0:0===E?k:Math.pow(Math.max(0,.5-E),2),v[c]=1===E?k:0===E?0:Math.pow(Math.max(0,E-.5),2)}o(x,l,t,b,h,w,S),o(v,l,t,b,h,w,S);var P=window.Float32Array?new Float32Array(l*t):new Array(l*t);for(c=0,y=l*t;c<y;c++)P[c]=M(1-((x[c]-v[c])/m+d),0,1);return P};var k=1e20;function o(_,p,l,t,i,r,n){for(var a=0;a<p;a++){for(var s=0;s<l;s++)t[s]=_[s*p+a];for(T(t,i,r,n,l),s=0;s<l;s++)_[s*p+a]=i[s]}for(s=0;s<l;s++){for(a=0;a<p;a++)t[a]=_[s*p+a];for(T(t,i,r,n,p),a=0;a<p;a++)_[s*p+a]=Math.sqrt(i[a])}}function T(_,p,l,t,i){l[0]=0,t[0]=-k,t[1]=+k;for(var r=1,n=0;r<i;r++){for(var a=(_[r]+r*r-(_[l[n]]+l[n]*l[n]))/(2*r-2*l[n]);a<=t[n];)n--,a=(_[r]+r*r-(_[l[n]]+l[n]*l[n]))/(2*r-2*l[n]);l[++n]=r,t[n]=a,t[n+1]=+k}for(r=0,n=0;r<i;r++){for(;t[n+1]<r;)n++;p[r]=(r-l[n])*(r-l[n])+_[l[n]]}}},99676:function(ne,F,e){"use strict";var M=e(53664),k=e(57916),o=k(M("String.prototype.indexOf"));ne.exports=function(T,_){var p=M(T,!!_);return"function"==typeof p&&o(T,".prototype.")>-1?k(p):p}},57916:function(ne,F,e){"use strict";var M=e(8844),k=e(53664),o=e(14500),T=k("%TypeError%"),_=k("%Function.prototype.apply%"),p=k("%Function.prototype.call%"),l=k("%Reflect.apply%",!0)||M.call(p,_),t=k("%Object.defineProperty%",!0),i=k("%Math.max%");if(t)try{t({},"a",{value:1})}catch{t=null}ne.exports=function(n){if("function"!=typeof n)throw new T("a function is required");var a=l(M,p,arguments);return o(a,1+i(0,n.length-(arguments.length-1)),!0)};var r=function(){return l(M,_,arguments)};t?t(ne.exports,"apply",{value:r}):ne.exports.apply=r},32420:function(ne){ne.exports=function(F,e,M){return e<M?F<e?e:F>M?M:F:F<M?M:F>e?e:F}},3808:function(ne,F,e){"use strict";var M=e(32420);function k(o,T){null==T&&(T=!0);var _=o[0],p=o[1],l=o[2],t=o[3];return null==t&&(t=T?1:255),T&&(_*=255,p*=255,l*=255,t*=255),16777216*(_=255&M(_,0,255))+((p=255&M(p,0,255))<<16)+((l=255&M(l,0,255))<<8)+(255&M(t,0,255))}ne.exports=k,ne.exports.to=k,ne.exports.from=function(o,T){var _=(o=+o)>>>24,p=(16711680&o)>>>16,l=(65280&o)>>>8,t=255&o;return!1===T?[_,p,l,t]:[_/255,p/255,l/255,t/255]}},17592:function(ne){"use strict";ne.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},72160:function(ne,F,e){"use strict";var M=e(96824),k=e(32420),o=e(72512);ne.exports=function(T,_){"float"!==_&&_||(_="array"),"uint"===_&&(_="uint8"),"uint_clamped"===_&&(_="uint8_clamped");var t,p=new(o(_))(4),l="uint8"!==_&&"uint8_clamped"!==_;return T.length&&"string"!=typeof T||((T=M(T))[0]/=255,T[1]/=255,T[2]/=255),(t=T)instanceof Uint8Array||t instanceof Uint8ClampedArray||Array.isArray(t)&&(t[0]>1||0===t[0])&&(t[1]>1||0===t[1])&&(t[2]>1||0===t[2])&&(!t[3]||t[3]>1)?(p[0]=T[0],p[1]=T[1],p[2]=T[2],p[3]=null!=T[3]?T[3]:255,l&&(p[0]/=255,p[1]/=255,p[2]/=255,p[3]/=255),p):(l?(p[0]=T[0],p[1]=T[1],p[2]=T[2],p[3]=null!=T[3]?T[3]:1):(p[0]=k(Math.floor(255*T[0]),0,255),p[1]=k(Math.floor(255*T[1]),0,255),p[2]=k(Math.floor(255*T[2]),0,255),p[3]=null==T[3]?255:k(Math.floor(255*T[3]),0,255)),p)}},96824:function(ne,F,e){"use strict";var M=e(95532),k=e(53576),o=e(32420);ne.exports=function(T){var _,p=M(T);return p.space?((_=Array(3))[0]=o(p.values[0],0,255),_[1]=o(p.values[1],0,255),_[2]=o(p.values[2],0,255),"h"===p.space[0]&&(_=k.rgb(_)),_.push(o(p.alpha,0,1)),_):[]}},95532:function(ne,F,e){"use strict";var M=e(17592);ne.exports=function(o){var T,_,p=[],l=1;if("string"==typeof o)if(o=o.toLowerCase(),M[o])p=M[o].slice(),_="rgb";else if("transparent"===o)l=0,_="rgb",p=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(o)){var t=o.slice(1);l=1,(n=t.length)<=4?(p=[parseInt(t[0]+t[0],16),parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16)],4===n&&(l=parseInt(t[3]+t[3],16)/255)):(p=[parseInt(t[0]+t[1],16),parseInt(t[2]+t[3],16),parseInt(t[4]+t[5],16)],8===n&&(l=parseInt(t[6]+t[7],16)/255)),p[0]||(p[0]=0),p[1]||(p[1]=0),p[2]||(p[2]=0),_="rgb"}else if(T=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(o)){var i=T[1],r="rgb"===i;_=t=i.replace(/a$/,"");var n="cmyk"===t?4:"gray"===t?1:3;p=T[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(a,s){if(/%$/.test(a))return s===n?parseFloat(a)/100:"rgb"===t?255*parseFloat(a)/100:parseFloat(a);if("h"===t[s]){if(/deg$/.test(a))return parseFloat(a);if(void 0!==k[a])return k[a]}return parseFloat(a)}),i===t&&p.push(1),l=r||void 0===p[n]?1:p[n],p=p.slice(0,n)}else o.length>10&&/[0-9](?:\s|\/)/.test(o)&&(p=o.match(/([0-9]+)/g).map(function(a){return parseFloat(a)}),_=o.match(/([a-z])/gi).join("").toLowerCase());else isNaN(o)?Array.isArray(o)||o.length?(p=[o[0],o[1],o[2]],_="rgb",l=4===o.length?o[3]:1):o instanceof Object&&(null!=o.r||null!=o.red||null!=o.R?(_="rgb",p=[o.r||o.red||o.R||0,o.g||o.green||o.G||0,o.b||o.blue||o.B||0]):(_="hsl",p=[o.h||o.hue||o.H||0,o.s||o.saturation||o.S||0,o.l||o.lightness||o.L||o.b||o.brightness]),l=o.a||o.alpha||o.opacity||1,null!=o.opacity&&(l/=100)):(_="rgb",p=[o>>>16,(65280&o)>>>8,255&o]);return{space:_,values:p,alpha:l}};var k={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},53576:function(ne,F,e){"use strict";var M=e(19336);ne.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(k){var o,T,_,p,l,t=k[0]/360,i=k[1]/100,r=k[2]/100;if(0===i)return[l=255*r,l,l];o=2*r-(T=r<.5?r*(1+i):r+i-r*i),p=[0,0,0];for(var n=0;n<3;n++)(_=t+.3333333333333333*-(n-1))<0?_++:_>1&&_--,p[n]=255*(l=6*_<1?o+6*(T-o)*_:2*_<1?T:3*_<2?o+(T-o)*(.6666666666666666-_)*6:o);return p}},M.hsl=function(k){var o,T,_=k[0]/255,p=k[1]/255,l=k[2]/255,t=Math.min(_,p,l),i=Math.max(_,p,l),r=i-t;return i===t?o=0:_===i?o=(p-l)/r:p===i?o=2+(l-_)/r:l===i&&(o=4+(_-p)/r),(o=Math.min(60*o,360))<0&&(o+=360),T=(t+i)/2,[o,100*(i===t?0:T<=.5?r/(i+t):r/(2-i-t)),100*T]}},19336:function(ne){"use strict";ne.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},36116:function(ne){ne.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xe7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xe9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xe9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xe3)o.?tom(e|\xe9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},42771:function(ne,F,e){"use strict";ne.exports={parse:e(46416),stringify:e(49395)}},8744:function(ne,F,e){"use strict";var M=e(30584);ne.exports={isSize:function(k){return/^[\d\.]/.test(k)||-1!==k.indexOf("/")||-1!==M.indexOf(k)}}},46416:function(ne,F,e){"use strict";var M=e(92384),k=e(68194),o=e(3748),T=e(2904),_=e(47916),p=e(7294),l=e(39956),t=e(8744).isSize;ne.exports=r;var i=r.cache={};function r(a){if("string"!=typeof a)throw new Error("Font argument must be a string.");if(i[a])return i[a];if(""===a)throw new Error("Cannot parse an empty string.");if(-1!==o.indexOf(a))return i[a]={system:a};for(var s,u={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},f=l(a,/\s+/);s=f.shift();){if(-1!==k.indexOf(s))return["style","variant","weight","stretch"].forEach(function(y){u[y]=s}),i[a]=u;if(-1===_.indexOf(s))if("normal"!==s&&"small-caps"!==s)if(-1===p.indexOf(s)){if(-1===T.indexOf(s)){if(t(s)){var c=l(s,"/");if(u.size=c[0],null!=c[1]?u.lineHeight=n(c[1]):"/"===f[0]&&(f.shift(),u.lineHeight=n(f.shift())),!f.length)throw new Error("Missing required font-family.");return u.family=l(f.join(" "),/\s*,\s*/).map(M),i[a]=u}throw new Error("Unknown or unsupported font token: "+s)}u.weight=s}else u.stretch=s;else u.variant=s;else u.style=s}throw new Error("Missing required font-size.")}function n(a){var s=parseFloat(a);return s.toString()===a?s:a}},49395:function(ne,F,e){"use strict";var M=e(55616),k=e(8744).isSize,o=a(e(68194)),T=a(e(3748)),_=a(e(2904)),p=a(e(47916)),l=a(e(7294)),t={normal:1,"small-caps":1},i={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},r="serif";function n(s,u){if(s&&!u[s]&&!o[s])throw Error("Unknown keyword `"+s+"`");return s}function a(s){for(var u={},f=0;f<s.length;f++)u[s[f]]=1;return u}ne.exports=function(s){if((s=M(s,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return s.system&&n(s.system,T),s.system;if(n(s.style,p),n(s.variant,t),n(s.weight,_),n(s.stretch,l),null==s.size&&(s.size="1rem"),"number"==typeof s.size&&(s.size+="px"),!k)throw Error("Bad size value `"+s.size+"`");s.family||(s.family=r),Array.isArray(s.family)&&(s.family.length||(s.family=[r]),s.family=s.family.map(function(f){return i[f]?f:'"'+f+'"'}).join(", "));var u=[];return u.push(s.style),s.variant!==s.style&&u.push(s.variant),s.weight!==s.variant&&s.weight!==s.style&&u.push(s.weight),s.stretch!==s.weight&&s.stretch!==s.variant&&s.stretch!==s.style&&u.push(s.stretch),u.push(s.size+(null==s.lineHeight||"normal"===s.lineHeight||s.lineHeight+""=="1"?"":"/"+s.lineHeight)),u.push(s.family),u.filter(Boolean).join(" ")}},27940:function(ne,F,e){"use strict";var M,k=e(81680),o=e(18496),T=e(87396),_=e(95920),p=e(50868),l=e(84323),t=Function.prototype.bind,i=Object.defineProperty,r=Object.prototype.hasOwnProperty;M=function(n,a,s){var u,f=o(a)&&T(a.value);return delete(u=_(a)).writable,delete u.value,u.get=function(){return!s.overwriteDefinition&&r.call(this,n)?f:(a.value=t.call(f,s.resolveContext?s.resolveContext(this):this),i(this,n,a),this[n])},u},ne.exports=function(n){var a=p(arguments[1]);return k(a.resolveContext)&&T(a.resolveContext),l(n,function(s,u){return M(u,s,a)})}},21092:function(ne,F,e){"use strict";var M=e(81680),k=e(85488),o=e(38452),T=e(50868),_=e(71056),p=ne.exports=function(l,t){var i,r,n,a,s;return arguments.length<2||"string"!=typeof l?(a=t,t=l,l=null):a=arguments[2],M(l)?(i=_.call(l,"c"),r=_.call(l,"e"),n=_.call(l,"w")):(i=n=!0,r=!1),s={value:t,configurable:i,enumerable:r,writable:n},a?o(T(a),s):s};p.gs=function(l,t,i){var r,n,a,s;return"string"!=typeof l?(a=i,i=t,t=l,l=null):a=arguments[3],M(t)?k(t)?M(i)?k(i)||(a=i,i=void 0):i=void 0:(a=t,t=i=void 0):t=void 0,M(l)?(r=_.call(l,"c"),n=_.call(l,"e")):(r=!0,n=!1),s={get:t,set:i,configurable:r,enumerable:n},a?o(T(a),s):s}},84706:function(ne,F,e){"use strict";function M(a,s){return a<s?-1:a>s?1:a>=s?0:NaN}var k,o;function _(a,s){var u,f,c=a.length,y=-1;if(null==s){for(;++y<c;)if(null!=(u=a[y])&&u>=u)for(f=u;++y<c;)null!=(u=a[y])&&u>f&&(f=u)}else for(;++y<c;)if(null!=(u=s(a[y],y,a))&&u>=u)for(f=u;++y<c;)null!=(u=s(a[y],y,a))&&u>f&&(f=u);return f}function p(a){return null===a?NaN:+a}function l(a,s){var u,f=a.length,c=f,y=-1,d=0;if(null==s)for(;++y<f;)isNaN(u=p(a[y]))?--c:d+=u;else for(;++y<f;)isNaN(u=p(s(a[y],y,a)))?--c:d+=u;if(c)return d/c}function t(a){for(var s,u,f,c=a.length,y=-1,d=0;++y<c;)d+=a[y].length;for(u=new Array(d);--c>=0;)for(s=(f=a[c]).length;--s>=0;)u[--d]=f[s];return u}function i(a,s){var u,f,c=a.length,y=-1;if(null==s){for(;++y<c;)if(null!=(u=a[y])&&u>=u)for(f=u;++y<c;)null!=(u=a[y])&&f>u&&(f=u)}else for(;++y<c;)if(null!=(u=s(a[y],y,a))&&u>=u)for(f=u;++y<c;)null!=(u=s(a[y],y,a))&&f>u&&(f=u);return f}function r(a,s,u){a=+a,s=+s,u=(c=arguments.length)<2?(s=a,a=0,1):c<3?1:+u;for(var f=-1,c=0|Math.max(0,Math.ceil((s-a)/u)),y=new Array(c);++f<c;)y[f]=a+f*u;return y}function n(a,s){var u,f=a.length,c=-1,y=0;if(null==s)for(;++c<f;)(u=+a[c])&&(y+=u);else for(;++c<f;)(u=+s(a[c],c,a))&&(y+=u);return y}e.d(F,{XE:function(){return M},kv:function(){return _},mo:function(){return l},Uf:function(){return t},SY:function(){return i},ik:function(){return r},oh:function(){return n}}),1===(k=M).length&&(o=k,k=function(a,s){return M(o(a),s)}),Math.sqrt(50),Math.sqrt(10),Math.sqrt(2)},34712:function(ne,F,e){"use strict";e.d(F,{kH:function(){return T},UJ:function(){return _}});var M="$";function k(){}function o(a,s){var u=new k;if(a instanceof k)a.each(function(m,g){u.set(g,m)});else if(Array.isArray(a)){var f,c=-1,y=a.length;if(null==s)for(;++c<y;)u.set(c,a[c]);else for(;++c<y;)u.set(s(f=a[c],c,a),f)}else if(a)for(var d in a)u.set(d,a[d]);return u}k.prototype=o.prototype={constructor:k,has:function(a){return M+a in this},get:function(a){return this[M+a]},set:function(a,s){return this[M+a]=s,this},remove:function(a){var s=M+a;return s in this&&delete this[s]},clear:function(){for(var a in this)a[0]===M&&delete this[a]},keys:function(){var a=[];for(var s in this)s[0]===M&&a.push(s.slice(1));return a},values:function(){var a=[];for(var s in this)s[0]===M&&a.push(this[s]);return a},entries:function(){var a=[];for(var s in this)s[0]===M&&a.push({key:s.slice(1),value:this[s]});return a},size:function(){var a=0;for(var s in this)s[0]===M&&++a;return a},empty:function(){for(var a in this)if(a[0]===M)return!1;return!0},each:function(a){for(var s in this)s[0]===M&&a(this[s],s.slice(1),this)}};var T=o;function _(){var a,s,u,f=[],c=[];function y(m,g,x,v){if(g>=f.length)return null!=a&&m.sort(a),null!=s?s(m):m;for(var b,h,S,w=-1,E=m.length,P=f[g++],I=T(),O=x();++w<E;)(S=I.get(b=P(h=m[w])+""))?S.push(h):I.set(b,[h]);return I.each(function(z,U){v(O,U,y(z,g,x,v))}),O}function d(m,g){if(++g>f.length)return m;var x,v=c[g-1];return null!=s&&g>=f.length?x=m.entries():(x=[],m.each(function(b,h){x.push({key:h,values:d(b,g)})})),null!=v?x.sort(function(b,h){return v(b.key,h.key)}):x}return u={object:function(m){return y(m,0,p,l)},map:function(m){return y(m,0,t,i)},entries:function(m){return d(y(m,0,t,i),0)},key:function(m){return f.push(m),u},sortKeys:function(m){return c[f.length-1]=m,u},sortValues:function(m){return a=m,u},rollup:function(m){return s=m,u}}}function p(){return{}}function l(a,s,u){a[s]=u}function t(){return T()}function i(a,s,u){a.set(s,u)}function r(){}var n=T.prototype;r.prototype=function(a,s){var u=new r;if(a instanceof r)a.each(function(y){u.add(y)});else if(a){var f=-1,c=a.length;if(null==s)for(;++f<c;)u.add(a[f]);else for(;++f<c;)u.add(s(a[f],f,a))}return u}.prototype={constructor:r,has:n.has,add:function(a){return this[M+(a+="")]=a,this},remove:n.remove,clear:n.clear,values:n.keys,size:n.size,empty:n.empty,each:n.each}},49812:function(ne,F,e){"use strict";function M(ve,xe){var Ce;function Oe(){var be,ue,se=Ce.length,ge=0,Ie=0;for(be=0;be<se;++be)ge+=(ue=Ce[be]).x,Ie+=ue.y;for(ge=ge/se-ve,Ie=Ie/se-xe,be=0;be<se;++be)(ue=Ce[be]).x-=ge,ue.y-=Ie}return null==ve&&(ve=0),null==xe&&(xe=0),Oe.initialize=function(be){Ce=be},Oe.x=function(be){return arguments.length?(ve=+be,Oe):ve},Oe.y=function(be){return arguments.length?(xe=+be,Oe):xe},Oe}function k(ve){return function(){return ve}}function o(){return 1e-6*(Math.random()-.5)}function T(ve,xe,Ce,Oe){if(isNaN(xe)||isNaN(Ce))return ve;var be,ue,se,ge,Ie,ke,Se,Pe,Fe,Be=ve._root,me={data:Oe},Me=ve._x0,Le=ve._y0,Ne=ve._x1,Re=ve._y1;if(!Be)return ve._root=me,ve;for(;Be.length;)if((ke=xe>=(ue=(Me+Ne)/2))?Me=ue:Ne=ue,(Se=Ce>=(se=(Le+Re)/2))?Le=se:Re=se,be=Be,!(Be=Be[Pe=Se<<1|ke]))return be[Pe]=me,ve;if(ge=+ve._x.call(null,Be.data),Ie=+ve._y.call(null,Be.data),xe===ge&&Ce===Ie)return me.next=Be,be?be[Pe]=me:ve._root=me,ve;do{be=be?be[Pe]=new Array(4):ve._root=new Array(4),(ke=xe>=(ue=(Me+Ne)/2))?Me=ue:Ne=ue,(Se=Ce>=(se=(Le+Re)/2))?Le=se:Re=se}while((Pe=Se<<1|ke)==(Fe=(Ie>=se)<<1|ge>=ue));return be[Fe]=Be,be[Pe]=me,ve}function _(ve,xe,Ce,Oe,be){this.node=ve,this.x0=xe,this.y0=Ce,this.x1=Oe,this.y1=be}function p(ve){return ve[0]}function l(ve){return ve[1]}function t(ve,xe,Ce){var Oe=new i(xe??p,Ce??l,NaN,NaN,NaN,NaN);return null==ve?Oe:Oe.addAll(ve)}function i(ve,xe,Ce,Oe,be,ue){this._x=ve,this._y=xe,this._x0=Ce,this._y0=Oe,this._x1=be,this._y1=ue,this._root=void 0}function r(ve){for(var xe={data:ve.data},Ce=xe;ve=ve.next;)Ce=Ce.next={data:ve.data};return xe}e.r(F),e.d(F,{forceCenter:function(){return M},forceCollide:function(){return u},forceLink:function(){return d},forceManyBody:function(){return pe},forceRadial:function(){return we},forceSimulation:function(){return le},forceX:function(){return Te},forceY:function(){return ye}});var n=t.prototype=i.prototype;function a(ve){return ve.x+ve.vx}function s(ve){return ve.y+ve.vy}function u(ve){var xe,Ce,Oe=1,be=1;function ue(){for(var Ie,ke,Se,Pe,Fe,Be,me,Me=xe.length,Le=0;Le<be;++Le)for(ke=t(xe,a,s).visitAfter(se),Ie=0;Ie<Me;++Ie)me=(Be=Ce[(Se=xe[Ie]).index])*Be,Pe=Se.x+Se.vx,Fe=Se.y+Se.vy,ke.visit(Ne);function Ne(Re,He,Ze,nt,ft){var ht=Re.data,Tt=Re.r,At=Be+Tt;if(!ht)return He>Pe+At||nt<Pe-At||Ze>Fe+At||ft<Fe-At;if(ht.index>Se.index){var _t=Pe-ht.x-ht.vx,ot=Fe-ht.y-ht.vy,it=_t*_t+ot*ot;it<At*At&&(0===_t&&(it+=(_t=o())*_t),0===ot&&(it+=(ot=o())*ot),it=(At-(it=Math.sqrt(it)))/it*Oe,Se.vx+=(_t*=it)*(At=(Tt*=Tt)/(me+Tt)),Se.vy+=(ot*=it)*At,ht.vx-=_t*(At=1-At),ht.vy-=ot*At)}}}function se(Ie){if(Ie.data)return Ie.r=Ce[Ie.data.index];for(var ke=Ie.r=0;ke<4;++ke)Ie[ke]&&Ie[ke].r>Ie.r&&(Ie.r=Ie[ke].r)}function ge(){if(xe){var Ie,ke,Se=xe.length;for(Ce=new Array(Se),Ie=0;Ie<Se;++Ie)Ce[(ke=xe[Ie]).index]=+ve(ke,Ie,xe)}}return"function"!=typeof ve&&(ve=k(null==ve?1:+ve)),ue.initialize=function(Ie){xe=Ie,ge()},ue.iterations=function(Ie){return arguments.length?(be=+Ie,ue):be},ue.strength=function(Ie){return arguments.length?(Oe=+Ie,ue):Oe},ue.radius=function(Ie){return arguments.length?(ve="function"==typeof Ie?Ie:k(+Ie),ge(),ue):ve},ue}n.copy=function(){var ve,xe,Ce=new i(this._x,this._y,this._x0,this._y0,this._x1,this._y1),Oe=this._root;if(!Oe)return Ce;if(!Oe.length)return Ce._root=r(Oe),Ce;for(ve=[{source:Oe,target:Ce._root=new Array(4)}];Oe=ve.pop();)for(var be=0;be<4;++be)(xe=Oe.source[be])&&(xe.length?ve.push({source:xe,target:Oe.target[be]=new Array(4)}):Oe.target[be]=r(xe));return Ce},n.add=function(ve){var xe=+this._x.call(null,ve),Ce=+this._y.call(null,ve);return T(this.cover(xe,Ce),xe,Ce,ve)},n.addAll=function(ve){var xe,Ce,Oe,be,ue=ve.length,se=new Array(ue),ge=new Array(ue),Ie=1/0,ke=1/0,Se=-1/0,Pe=-1/0;for(Ce=0;Ce<ue;++Ce)isNaN(Oe=+this._x.call(null,xe=ve[Ce]))||isNaN(be=+this._y.call(null,xe))||(se[Ce]=Oe,ge[Ce]=be,Oe<Ie&&(Ie=Oe),Oe>Se&&(Se=Oe),be<ke&&(ke=be),be>Pe&&(Pe=be));if(Ie>Se||ke>Pe)return this;for(this.cover(Ie,ke).cover(Se,Pe),Ce=0;Ce<ue;++Ce)T(this,se[Ce],ge[Ce],ve[Ce]);return this},n.cover=function(ve,xe){if(isNaN(ve=+ve)||isNaN(xe=+xe))return this;var Ce=this._x0,Oe=this._y0,be=this._x1,ue=this._y1;if(isNaN(Ce))be=(Ce=Math.floor(ve))+1,ue=(Oe=Math.floor(xe))+1;else{for(var se,ge,Ie=be-Ce,ke=this._root;Ce>ve||ve>=be||Oe>xe||xe>=ue;)switch(ge=(xe<Oe)<<1|ve<Ce,(se=new Array(4))[ge]=ke,ke=se,Ie*=2,ge){case 0:be=Ce+Ie,ue=Oe+Ie;break;case 1:Ce=be-Ie,ue=Oe+Ie;break;case 2:be=Ce+Ie,Oe=ue-Ie;break;case 3:Ce=be-Ie,Oe=ue-Ie}this._root&&this._root.length&&(this._root=ke)}return this._x0=Ce,this._y0=Oe,this._x1=be,this._y1=ue,this},n.data=function(){var ve=[];return this.visit(function(xe){if(!xe.length)do{ve.push(xe.data)}while(xe=xe.next)}),ve},n.extent=function(ve){return arguments.length?this.cover(+ve[0][0],+ve[0][1]).cover(+ve[1][0],+ve[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},n.find=function(ve,xe,Ce){var Oe,be,ue,se,ge,Ie,ke,Se=this._x0,Pe=this._y0,Fe=this._x1,Be=this._y1,me=[],Me=this._root;for(Me&&me.push(new _(Me,Se,Pe,Fe,Be)),null==Ce?Ce=1/0:(Se=ve-Ce,Pe=xe-Ce,Fe=ve+Ce,Be=xe+Ce,Ce*=Ce);Ie=me.pop();)if(!(!(Me=Ie.node)||(be=Ie.x0)>Fe||(ue=Ie.y0)>Be||(se=Ie.x1)<Se||(ge=Ie.y1)<Pe))if(Me.length){var Le=(be+se)/2,Ne=(ue+ge)/2;me.push(new _(Me[3],Le,Ne,se,ge),new _(Me[2],be,Ne,Le,ge),new _(Me[1],Le,ue,se,Ne),new _(Me[0],be,ue,Le,Ne)),(ke=(xe>=Ne)<<1|ve>=Le)&&(Ie=me[me.length-1],me[me.length-1]=me[me.length-1-ke],me[me.length-1-ke]=Ie)}else{var Re=ve-+this._x.call(null,Me.data),He=xe-+this._y.call(null,Me.data),Ze=Re*Re+He*He;if(Ze<Ce){var nt=Math.sqrt(Ce=Ze);Se=ve-nt,Pe=xe-nt,Fe=ve+nt,Be=xe+nt,Oe=Me.data}}return Oe},n.remove=function(ve){if(isNaN(ue=+this._x.call(null,ve))||isNaN(se=+this._y.call(null,ve)))return this;var xe,Ce,Oe,be,ue,se,ge,Ie,ke,Se,Pe,Fe,Be=this._root,me=this._x0,Me=this._y0,Le=this._x1,Ne=this._y1;if(!Be)return this;if(Be.length)for(;;){if((ke=ue>=(ge=(me+Le)/2))?me=ge:Le=ge,(Se=se>=(Ie=(Me+Ne)/2))?Me=Ie:Ne=Ie,xe=Be,!(Be=Be[Pe=Se<<1|ke]))return this;if(!Be.length)break;(xe[Pe+1&3]||xe[Pe+2&3]||xe[Pe+3&3])&&(Ce=xe,Fe=Pe)}for(;Be.data!==ve;)if(Oe=Be,!(Be=Be.next))return this;return(be=Be.next)&&delete Be.next,Oe?(be?Oe.next=be:delete Oe.next,this):xe?(be?xe[Pe]=be:delete xe[Pe],(Be=xe[0]||xe[1]||xe[2]||xe[3])&&Be===(xe[3]||xe[2]||xe[1]||xe[0])&&!Be.length&&(Ce?Ce[Fe]=Be:this._root=Be),this):(this._root=be,this)},n.removeAll=function(ve){for(var xe=0,Ce=ve.length;xe<Ce;++xe)this.remove(ve[xe]);return this},n.root=function(){return this._root},n.size=function(){var ve=0;return this.visit(function(xe){if(!xe.length)do{++ve}while(xe=xe.next)}),ve},n.visit=function(ve){var xe,Ce,Oe,be,ue,se,ge=[],Ie=this._root;for(Ie&&ge.push(new _(Ie,this._x0,this._y0,this._x1,this._y1));xe=ge.pop();)if(!ve(Ie=xe.node,Oe=xe.x0,be=xe.y0,ue=xe.x1,se=xe.y1)&&Ie.length){var ke=(Oe+ue)/2,Se=(be+se)/2;(Ce=Ie[3])&&ge.push(new _(Ce,ke,Se,ue,se)),(Ce=Ie[2])&&ge.push(new _(Ce,Oe,Se,ke,se)),(Ce=Ie[1])&&ge.push(new _(Ce,ke,be,ue,Se)),(Ce=Ie[0])&&ge.push(new _(Ce,Oe,be,ke,Se))}return this},n.visitAfter=function(ve){var xe,Ce=[],Oe=[];for(this._root&&Ce.push(new _(this._root,this._x0,this._y0,this._x1,this._y1));xe=Ce.pop();){var be=xe.node;if(be.length){var ue,se=xe.x0,ge=xe.y0,Ie=xe.x1,ke=xe.y1,Se=(se+Ie)/2,Pe=(ge+ke)/2;(ue=be[0])&&Ce.push(new _(ue,se,ge,Se,Pe)),(ue=be[1])&&Ce.push(new _(ue,Se,ge,Ie,Pe)),(ue=be[2])&&Ce.push(new _(ue,se,Pe,Se,ke)),(ue=be[3])&&Ce.push(new _(ue,Se,Pe,Ie,ke))}Oe.push(xe)}for(;xe=Oe.pop();)ve(xe.node,xe.x0,xe.y0,xe.x1,xe.y1);return this},n.x=function(ve){return arguments.length?(this._x=ve,this):this._x},n.y=function(ve){return arguments.length?(this._y=ve,this):this._y};var f=e(34712);function c(ve){return ve.index}function y(ve,xe){var Ce=ve.get(xe);if(!Ce)throw new Error("missing: "+xe);return Ce}function d(ve){var xe,Ce,Oe,be,ue,se=c,ge=function(me){return 1/Math.min(be[me.source.index],be[me.target.index])},Ie=k(30),ke=1;function Se(me){for(var Me=0,Le=ve.length;Me<ke;++Me)for(var Ne,Re,He,Ze,nt,ft,ht,Tt=0;Tt<Le;++Tt)Re=(Ne=ve[Tt]).source,Ze=(He=Ne.target).x+He.vx-Re.x-Re.vx||o(),nt=He.y+He.vy-Re.y-Re.vy||o(),Ze*=ft=((ft=Math.sqrt(Ze*Ze+nt*nt))-Ce[Tt])/ft*me*xe[Tt],nt*=ft,He.vx-=Ze*(ht=ue[Tt]),He.vy-=nt*ht,Re.vx+=Ze*(ht=1-ht),Re.vy+=nt*ht}function Pe(){if(Oe){var me,Me,Le=Oe.length,Ne=ve.length,Re=(0,f.kH)(Oe,se);for(me=0,be=new Array(Le);me<Ne;++me)(Me=ve[me]).index=me,"object"!=typeof Me.source&&(Me.source=y(Re,Me.source)),"object"!=typeof Me.target&&(Me.target=y(Re,Me.target)),be[Me.source.index]=(be[Me.source.index]||0)+1,be[Me.target.index]=(be[Me.target.index]||0)+1;for(me=0,ue=new Array(Ne);me<Ne;++me)ue[me]=be[(Me=ve[me]).source.index]/(be[Me.source.index]+be[Me.target.index]);xe=new Array(Ne),Fe(),Ce=new Array(Ne),Be()}}function Fe(){if(Oe)for(var me=0,Me=ve.length;me<Me;++me)xe[me]=+ge(ve[me],me,ve)}function Be(){if(Oe)for(var me=0,Me=ve.length;me<Me;++me)Ce[me]=+Ie(ve[me],me,ve)}return null==ve&&(ve=[]),Se.initialize=function(me){Oe=me,Pe()},Se.links=function(me){return arguments.length?(ve=me,Pe(),Se):ve},Se.id=function(me){return arguments.length?(se=me,Se):se},Se.iterations=function(me){return arguments.length?(ke=+me,Se):ke},Se.strength=function(me){return arguments.length?(ge="function"==typeof me?me:k(+me),Fe(),Se):ge},Se.distance=function(me){return arguments.length?(Ie="function"==typeof me?me:k(+me),Be(),Se):Ie},Se}var m={value:function(){}};function g(){for(var ve,xe=0,Ce=arguments.length,Oe={};xe<Ce;++xe){if(!(ve=arguments[xe]+"")||ve in Oe||/[\s.]/.test(ve))throw new Error("illegal type: "+ve);Oe[ve]=[]}return new x(Oe)}function x(ve){this._=ve}function v(ve,xe){for(var Ce,Oe=0,be=ve.length;Oe<be;++Oe)if((Ce=ve[Oe]).name===xe)return Ce.value}function b(ve,xe,Ce){for(var Oe=0,be=ve.length;Oe<be;++Oe)if(ve[Oe].name===xe){ve[Oe]=m,ve=ve.slice(0,Oe).concat(ve.slice(Oe+1));break}return null!=Ce&&ve.push({name:xe,value:Ce}),ve}x.prototype=g.prototype={constructor:x,on:function(ve,xe){var Ce,Oe,be=this._,ue=(Oe=be,(ve+"").trim().split(/^|\s+/).map(function(Ie){var ke="",Se=Ie.indexOf(".");if(Se>=0&&(ke=Ie.slice(Se+1),Ie=Ie.slice(0,Se)),Ie&&!Oe.hasOwnProperty(Ie))throw new Error("unknown type: "+Ie);return{type:Ie,name:ke}})),se=-1,ge=ue.length;if(!(arguments.length<2)){if(null!=xe&&"function"!=typeof xe)throw new Error("invalid callback: "+xe);for(;++se<ge;)if(Ce=(ve=ue[se]).type)be[Ce]=b(be[Ce],ve.name,xe);else if(null==xe)for(Ce in be)be[Ce]=b(be[Ce],ve.name,null);return this}for(;++se<ge;)if((Ce=(ve=ue[se]).type)&&(Ce=v(be[Ce],ve.name)))return Ce},copy:function(){var ve={},xe=this._;for(var Ce in xe)ve[Ce]=xe[Ce].slice();return new x(ve)},call:function(ve,xe){if((Ce=arguments.length-2)>0)for(var Ce,Oe,be=new Array(Ce),ue=0;ue<Ce;++ue)be[ue]=arguments[ue+2];if(!this._.hasOwnProperty(ve))throw new Error("unknown type: "+ve);for(ue=0,Ce=(Oe=this._[ve]).length;ue<Ce;++ue)Oe[ue].value.apply(xe,be)},apply:function(ve,xe,Ce){if(!this._.hasOwnProperty(ve))throw new Error("unknown type: "+ve);for(var Oe=this._[ve],be=0,ue=Oe.length;be<ue;++be)Oe[be].value.apply(xe,Ce)}};var h,S,w=g,E=0,P=0,I=0,O=1e3,z=0,U=0,R=0,j="object"==typeof performance&&performance.now?performance:Date,Y="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(ve){setTimeout(ve,17)};function B(){return U||(Y(V),U=j.now()+R)}function V(){U=0}function q(){this._call=this._time=this._next=null}function ie(ve,xe,Ce){var Oe=new q;return Oe.restart(ve,xe,Ce),Oe}function te(){U=(z=j.now())+R,E=P=0;try{!function(){B(),++E;for(var ve,xe=h;xe;)(ve=U-xe._time)>=0&&xe._call.call(null,ve),xe=xe._next;--E}()}finally{E=0,function(){for(var ve,xe,Ce=h,Oe=1/0;Ce;)Ce._call?(Oe>Ce._time&&(Oe=Ce._time),ve=Ce,Ce=Ce._next):(xe=Ce._next,Ce._next=null,Ce=ve?ve._next=xe:h=xe);S=ve,$(Oe)}(),U=0}}function ee(){var ve=j.now(),xe=ve-z;xe>O&&(R-=xe,z=ve)}function $(ve){E||(P&&(P=clearTimeout(P)),ve-U>24?(ve<1/0&&(P=setTimeout(te,ve-j.now()-R)),I&&(I=clearInterval(I))):(I||(z=j.now(),I=setInterval(ee,O)),E=1,Y(te)))}function J(ve){return ve.x}function X(ve){return ve.y}q.prototype=ie.prototype={constructor:q,restart:function(ve,xe,Ce){if("function"!=typeof ve)throw new TypeError("callback is not a function");Ce=(null==Ce?B():+Ce)+(null==xe?0:+xe),this._next||S===this||(S?S._next=this:h=this,S=this),this._call=ve,this._time=Ce,$()},stop:function(){this._call&&(this._call=null,this._time=1/0,$())}};var ae=10,ce=Math.PI*(3-Math.sqrt(5));function le(ve){var xe,Ce=1,Oe=.001,be=1-Math.pow(Oe,1/300),ue=0,se=.6,ge=(0,f.kH)(),Ie=ie(Se),ke=w("tick","end");function Se(){Pe(),ke.call("tick",xe),Ce<Oe&&(Ie.stop(),ke.call("end",xe))}function Pe(me){var Me,Le,Ne=ve.length;void 0===me&&(me=1);for(var Re=0;Re<me;++Re)for(Ce+=(ue-Ce)*be,ge.each(function(He){He(Ce)}),Me=0;Me<Ne;++Me)null==(Le=ve[Me]).fx?Le.x+=Le.vx*=se:(Le.x=Le.fx,Le.vx=0),null==Le.fy?Le.y+=Le.vy*=se:(Le.y=Le.fy,Le.vy=0);return xe}function Fe(){for(var me,Me=0,Le=ve.length;Me<Le;++Me){if((me=ve[Me]).index=Me,null!=me.fx&&(me.x=me.fx),null!=me.fy&&(me.y=me.fy),isNaN(me.x)||isNaN(me.y)){var Ne=ae*Math.sqrt(Me),Re=Me*ce;me.x=Ne*Math.cos(Re),me.y=Ne*Math.sin(Re)}(isNaN(me.vx)||isNaN(me.vy))&&(me.vx=me.vy=0)}}function Be(me){return me.initialize&&me.initialize(ve),me}return null==ve&&(ve=[]),Fe(),xe={tick:Pe,restart:function(){return Ie.restart(Se),xe},stop:function(){return Ie.stop(),xe},nodes:function(me){return arguments.length?(ve=me,Fe(),ge.each(Be),xe):ve},alpha:function(me){return arguments.length?(Ce=+me,xe):Ce},alphaMin:function(me){return arguments.length?(Oe=+me,xe):Oe},alphaDecay:function(me){return arguments.length?(be=+me,xe):+be},alphaTarget:function(me){return arguments.length?(ue=+me,xe):ue},velocityDecay:function(me){return arguments.length?(se=1-me,xe):1-se},force:function(me,Me){return arguments.length>1?(null==Me?ge.remove(me):ge.set(me,Be(Me)),xe):ge.get(me)},find:function(me,Me,Le){var Ne,Re,He,Ze,nt,ft=0,ht=ve.length;for(null==Le?Le=1/0:Le*=Le,ft=0;ft<ht;++ft)(He=(Ne=me-(Ze=ve[ft]).x)*Ne+(Re=Me-Ze.y)*Re)<Le&&(nt=Ze,Le=He);return nt},on:function(me,Me){return arguments.length>1?(ke.on(me,Me),xe):ke.on(me)}}}function pe(){var ve,xe,Ce,Oe,be=k(-30),ue=1,se=1/0,ge=.81;function Ie(Fe){var Be,me=ve.length,Me=t(ve,J,X).visitAfter(Se);for(Ce=Fe,Be=0;Be<me;++Be)xe=ve[Be],Me.visit(Pe)}function ke(){if(ve){var Fe,Be,me=ve.length;for(Oe=new Array(me),Fe=0;Fe<me;++Fe)Oe[(Be=ve[Fe]).index]=+be(Be,Fe,ve)}}function Se(Fe){var Be,me,Me,Le,Ne,Re=0,He=0;if(Fe.length){for(Me=Le=Ne=0;Ne<4;++Ne)(Be=Fe[Ne])&&(me=Math.abs(Be.value))&&(Re+=Be.value,He+=me,Me+=me*Be.x,Le+=me*Be.y);Fe.x=Me/He,Fe.y=Le/He}else{(Be=Fe).x=Be.data.x,Be.y=Be.data.y;do{Re+=Oe[Be.data.index]}while(Be=Be.next)}Fe.value=Re}function Pe(Fe,Be,me,Me){if(!Fe.value)return!0;var Le=Fe.x-xe.x,Ne=Fe.y-xe.y,Re=Me-Be,He=Le*Le+Ne*Ne;if(Re*Re/ge<He)return He<se&&(0===Le&&(He+=(Le=o())*Le),0===Ne&&(He+=(Ne=o())*Ne),He<ue&&(He=Math.sqrt(ue*He)),xe.vx+=Le*Fe.value*Ce/He,xe.vy+=Ne*Fe.value*Ce/He),!0;if(!(Fe.length||He>=se)){(Fe.data!==xe||Fe.next)&&(0===Le&&(He+=(Le=o())*Le),0===Ne&&(He+=(Ne=o())*Ne),He<ue&&(He=Math.sqrt(ue*He)));do{Fe.data!==xe&&(xe.vx+=Le*(Re=Oe[Fe.data.index]*Ce/He),xe.vy+=Ne*Re)}while(Fe=Fe.next)}}return Ie.initialize=function(Fe){ve=Fe,ke()},Ie.strength=function(Fe){return arguments.length?(be="function"==typeof Fe?Fe:k(+Fe),ke(),Ie):be},Ie.distanceMin=function(Fe){return arguments.length?(ue=Fe*Fe,Ie):Math.sqrt(ue)},Ie.distanceMax=function(Fe){return arguments.length?(se=Fe*Fe,Ie):Math.sqrt(se)},Ie.theta=function(Fe){return arguments.length?(ge=Fe*Fe,Ie):Math.sqrt(ge)},Ie}function we(ve,xe,Ce){var Oe,be,ue,se=k(.1);function ge(ke){for(var Se=0,Pe=Oe.length;Se<Pe;++Se){var Fe=Oe[Se],Be=Fe.x-xe||1e-6,me=Fe.y-Ce||1e-6,Me=Math.sqrt(Be*Be+me*me),Le=(ue[Se]-Me)*be[Se]*ke/Me;Fe.vx+=Be*Le,Fe.vy+=me*Le}}function Ie(){if(Oe){var ke,Se=Oe.length;for(be=new Array(Se),ue=new Array(Se),ke=0;ke<Se;++ke)ue[ke]=+ve(Oe[ke],ke,Oe),be[ke]=isNaN(ue[ke])?0:+se(Oe[ke],ke,Oe)}}return"function"!=typeof ve&&(ve=k(+ve)),null==xe&&(xe=0),null==Ce&&(Ce=0),ge.initialize=function(ke){Oe=ke,Ie()},ge.strength=function(ke){return arguments.length?(se="function"==typeof ke?ke:k(+ke),Ie(),ge):se},ge.radius=function(ke){return arguments.length?(ve="function"==typeof ke?ke:k(+ke),Ie(),ge):ve},ge.x=function(ke){return arguments.length?(xe=+ke,ge):xe},ge.y=function(ke){return arguments.length?(Ce=+ke,ge):Ce},ge}function Te(ve){var xe,Ce,Oe,be=k(.1);function ue(ge){for(var Ie,ke=0,Se=xe.length;ke<Se;++ke)(Ie=xe[ke]).vx+=(Oe[ke]-Ie.x)*Ce[ke]*ge}function se(){if(xe){var ge,Ie=xe.length;for(Ce=new Array(Ie),Oe=new Array(Ie),ge=0;ge<Ie;++ge)Ce[ge]=isNaN(Oe[ge]=+ve(xe[ge],ge,xe))?0:+be(xe[ge],ge,xe)}}return"function"!=typeof ve&&(ve=k(null==ve?0:+ve)),ue.initialize=function(ge){xe=ge,se()},ue.strength=function(ge){return arguments.length?(be="function"==typeof ge?ge:k(+ge),se(),ue):be},ue.x=function(ge){return arguments.length?(ve="function"==typeof ge?ge:k(+ge),se(),ue):ve},ue}function ye(ve){var xe,Ce,Oe,be=k(.1);function ue(ge){for(var Ie,ke=0,Se=xe.length;ke<Se;++ke)(Ie=xe[ke]).vy+=(Oe[ke]-Ie.y)*Ce[ke]*ge}function se(){if(xe){var ge,Ie=xe.length;for(Ce=new Array(Ie),Oe=new Array(Ie),ge=0;ge<Ie;++ge)Ce[ge]=isNaN(Oe[ge]=+ve(xe[ge],ge,xe))?0:+be(xe[ge],ge,xe)}}return"function"!=typeof ve&&(ve=k(null==ve?0:+ve)),ue.initialize=function(ge){xe=ge,se()},ue.strength=function(ge){return arguments.length?(be="function"==typeof ge?ge:k(+ge),se(),ue):be},ue.y=function(ge){return arguments.length?(ve="function"==typeof ge?ge:k(+ge),se(),ue):ve},ue}},57624:function(ne,F,e){"use strict";function M(u,f){if((c=(u=f?u.toExponential(f-1):u.toExponential()).indexOf("e"))<0)return null;var c,y=u.slice(0,c);return[y.length>1?y[0]+y.slice(2):y,+u.slice(c+1)]}e.d(F,{E9:function(){return r},SO:function(){return s}});var k,o=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function T(u){if(!(f=o.exec(u)))throw new Error("invalid format: "+u);var f;return new _({fill:f[1],align:f[2],sign:f[3],symbol:f[4],zero:f[5],width:f[6],comma:f[7],precision:f[8]&&f[8].slice(1),trim:f[9],type:f[10]})}function _(u){this.fill=void 0===u.fill?" ":u.fill+"",this.align=void 0===u.align?">":u.align+"",this.sign=void 0===u.sign?"-":u.sign+"",this.symbol=void 0===u.symbol?"":u.symbol+"",this.zero=!!u.zero,this.width=void 0===u.width?void 0:+u.width,this.comma=!!u.comma,this.precision=void 0===u.precision?void 0:+u.precision,this.trim=!!u.trim,this.type=void 0===u.type?"":u.type+""}function p(u,f){var c=M(u,f);if(!c)return u+"";var y=c[0],d=c[1];return d<0?"0."+new Array(-d).join("0")+y:y.length>d+1?y.slice(0,d+1)+"."+y.slice(d+1):y+new Array(d-y.length+2).join("0")}T.prototype=_.prototype,_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var l={"%":function(u,f){return(100*u).toFixed(f)},b:function(u){return Math.round(u).toString(2)},c:function(u){return u+""},d:function(u){return Math.abs(u=Math.round(u))>=1e21?u.toLocaleString("en").replace(/,/g,""):u.toString(10)},e:function(u,f){return u.toExponential(f)},f:function(u,f){return u.toFixed(f)},g:function(u,f){return u.toPrecision(f)},o:function(u){return Math.round(u).toString(8)},p:function(u,f){return p(100*u,f)},r:p,s:function(u,f){var c=M(u,f);if(!c)return u+"";var y=c[0],d=c[1],m=d-(k=3*Math.max(-8,Math.min(8,Math.floor(d/3))))+1,g=y.length;return m===g?y:m>g?y+new Array(m-g+1).join("0"):m>0?y.slice(0,m)+"."+y.slice(m):"0."+new Array(1-m).join("0")+M(u,Math.max(0,f+m-1))[0]},X:function(u){return Math.round(u).toString(16).toUpperCase()},x:function(u){return Math.round(u).toString(16)}};function t(u){return u}var i,r,n=Array.prototype.map,a=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function s(u){var f,c,w,y=void 0===u.grouping||void 0===u.thousands?t:(f=n.call(u.grouping,Number),c=u.thousands+"",function(w,E){for(var P=w.length,I=[],O=0,z=f[0],U=0;P>0&&z>0&&(U+z+1>E&&(z=Math.max(1,E-U)),I.push(w.substring(P-=z,P+z)),!((U+=z+1)>E));)z=f[O=(O+1)%f.length];return I.reverse().join(c)}),d=void 0===u.currency?"":u.currency[0]+"",m=void 0===u.currency?"":u.currency[1]+"",g=void 0===u.decimal?".":u.decimal+"",x=void 0===u.numerals?t:(w=n.call(u.numerals,String),function(E){return E.replace(/[0-9]/g,function(P){return w[+P]})}),v=void 0===u.percent?"%":u.percent+"",b=void 0===u.minus?"-":u.minus+"",h=void 0===u.nan?"NaN":u.nan+"";function S(w){var E=(w=T(w)).fill,P=w.align,I=w.sign,O=w.symbol,z=w.zero,U=w.width,R=w.comma,j=w.precision,Y=w.trim,B=w.type;"n"===B?(R=!0,B="g"):l[B]||(void 0===j&&(j=12),Y=!0,B="g"),(z||"0"===E&&"="===P)&&(z=!0,E="0",P="=");var V="$"===O?d:"#"===O&&/[boxX]/.test(B)?"0"+B.toLowerCase():"",q="$"===O?m:/[%p]/.test(B)?v:"",ie=l[B],te=/[defgprs%]/.test(B);function ee($){var J,X,ae,ce=V,le=q;if("c"===B)le=ie($)+le,$="";else{var pe=($=+$)<0||1/$<0;if($=isNaN($)?h:ie(Math.abs($),j),Y&&($=function(ye){e:for(var ve,xe=ye.length,Ce=1,Oe=-1;Ce<xe;++Ce)switch(ye[Ce]){case".":Oe=ve=Ce;break;case"0":0===Oe&&(Oe=Ce),ve=Ce;break;default:if(!+ye[Ce])break e;Oe>0&&(Oe=0)}return Oe>0?ye.slice(0,Oe)+ye.slice(ve+1):ye}($)),pe&&0==+$&&"+"!==I&&(pe=!1),ce=(pe?"("===I?I:b:"-"===I||"("===I?"":I)+ce,le=("s"===B?a[8+k/3]:"")+le+(pe&&"("===I?")":""),te)for(J=-1,X=$.length;++J<X;)if(48>(ae=$.charCodeAt(J))||ae>57){le=(46===ae?g+$.slice(J+1):$.slice(J))+le,$=$.slice(0,J);break}}R&&!z&&($=y($,1/0));var we=ce.length+$.length+le.length,Te=we<U?new Array(U-we+1).join(E):"";switch(R&&z&&($=y(Te+$,Te.length?U-le.length:1/0),Te=""),P){case"<":$=ce+$+le+Te;break;case"=":$=ce+Te+$+le;break;case"^":$=Te.slice(0,we=Te.length>>1)+ce+$+le+Te.slice(we);break;default:$=Te+ce+$+le}return x($)}return j=void 0===j?6:/[gprs]/.test(B)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j)),ee.toString=function(){return w+""},ee}return{format:S,formatPrefix:function(w,E){var P,I=S(((w=T(w)).type="f",w)),O=3*Math.max(-8,Math.min(8,Math.floor((P=E,((P=M(Math.abs(P)))?P[1]:NaN)/3)))),z=Math.pow(10,-O),U=a[8+O/3];return function(R){return I(z*R)+U}}}}i=s({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),r=i.format},87108:function(ne,F,e){"use strict";e.r(F),e.d(F,{geoAiry:function(){return R},geoAiryRaw:function(){return U},geoAitoff:function(){return Y},geoAitoffRaw:function(){return j},geoArmadillo:function(){return V},geoArmadilloRaw:function(){return B},geoAugust:function(){return ie},geoAugustRaw:function(){return q},geoBaker:function(){return J},geoBakerRaw:function(){return $},geoBerghaus:function(){return ce},geoBerghausRaw:function(){return ae},geoBertin1953:function(){return Ce},geoBertin1953Raw:function(){return xe},geoBoggs:function(){return Se},geoBoggsRaw:function(){return ke},geoBonne:function(){return Me},geoBonneRaw:function(){return me},geoBottomley:function(){return Ne},geoBottomleyRaw:function(){return Le},geoBromley:function(){return He},geoBromleyRaw:function(){return Re},geoChamberlin:function(){return it},geoChamberlinAfrica:function(){return ot},geoChamberlinRaw:function(){return At},geoCollignon:function(){return jt},geoCollignonRaw:function(){return Pt},geoCraig:function(){return Rt},geoCraigRaw:function(){return Ut},geoCraster:function(){return qe},geoCrasterRaw:function(){return et},geoCylindricalEqualArea:function(){return pt},geoCylindricalEqualAreaRaw:function(){return $e},geoCylindricalStereographic:function(){return Ve},geoCylindricalStereographicRaw:function(){return ct},geoEckert1:function(){return ut},geoEckert1Raw:function(){return Ge},geoEckert2:function(){return yt},geoEckert2Raw:function(){return Qe},geoEckert3:function(){return kt},geoEckert3Raw:function(){return wt},geoEckert4:function(){return Lt},geoEckert4Raw:function(){return vt},geoEckert5:function(){return Ot},geoEckert5Raw:function(){return St},geoEckert6:function(){return Bt},geoEckert6Raw:function(){return Nt},geoEisenlohr:function(){return gn},geoEisenlohrRaw:function(){return nn},geoFahey:function(){return Xt},geoFaheyRaw:function(){return an},geoFoucaut:function(){return Dn},geoFoucautRaw:function(){return Gn},geoFoucautSinusoidal:function(){return cn},geoFoucautSinusoidalRaw:function(){return An},geoGilbert:function(){return Pn},geoGingery:function(){return Jn},geoGingeryRaw:function(){return Nn},geoGinzburg4:function(){return rr},geoGinzburg4Raw:function(){return hr},geoGinzburg5:function(){return nr},geoGinzburg5Raw:function(){return dr},geoGinzburg6:function(){return ln},geoGinzburg6Raw:function(){return Sr},geoGinzburg8:function(){return Un},geoGinzburg8Raw:function(){return dn},geoGinzburg9:function(){return Hn},geoGinzburg9Raw:function(){return Mn},geoGringorten:function(){return lr},geoGringortenQuincuncial:function(){return eo},geoGringortenRaw:function(){return $n},geoGuyou:function(){return zt},geoGuyouRaw:function(){return Sn},geoHammer:function(){return Te},geoHammerRaw:function(){return pe},geoHammerRetroazimuthal:function(){return Tn},geoHammerRetroazimuthalRaw:function(){return un},geoHealpix:function(){return Xn},geoHealpixRaw:function(){return fn},geoHill:function(){return pr},geoHillRaw:function(){return Qn},geoHomolosine:function(){return Fr},geoHomolosineRaw:function(){return Ar},geoHufnagel:function(){return xr},geoHufnagelRaw:function(){return Lr},geoHyperelliptical:function(){return Fi},geoHyperellipticalRaw:function(){return Qr},geoInterrupt:function(){return Gi},geoInterruptedBoggs:function(){return qa},geoInterruptedHomolosine:function(){return _a},geoInterruptedMollweide:function(){return ka},geoInterruptedMollweideHemispheres:function(){return ma},geoInterruptedQuarticAuthalic:function(){return ol},geoInterruptedSinuMollweide:function(){return Ho},geoInterruptedSinusoidal:function(){return tl},geoKavrayskiy7:function(){return Co},geoKavrayskiy7Raw:function(){return co},geoLagrange:function(){return ki},geoLagrangeRaw:function(){return os},geoLarrivee:function(){return yo},geoLarriveeRaw:function(){return fo},geoLaskowski:function(){return Lo},geoLaskowskiRaw:function(){return oo},geoLittrow:function(){return nl},geoLittrowRaw:function(){return qo},geoLoximuthal:function(){return Ns},geoLoximuthalRaw:function(){return va},geoMiller:function(){return _u},geoMillerRaw:function(){return ys},geoModifiedStereographic:function(){return bs},geoModifiedStereographicAlaska:function(){return _c},geoModifiedStereographicGs48:function(){return wc},geoModifiedStereographicGs50:function(){return rl},geoModifiedStereographicLee:function(){return bl},geoModifiedStereographicMiller:function(){return Wo},geoModifiedStereographicRaw:function(){return wu},geoMollweide:function(){return se},geoMollweideRaw:function(){return ue},geoMtFlatPolarParabolic:function(){return Xl},geoMtFlatPolarParabolicRaw:function(){return Yo},geoMtFlatPolarQuartic:function(){return us},geoMtFlatPolarQuarticRaw:function(){return ls},geoMtFlatPolarSinusoidal:function(){return js},geoMtFlatPolarSinusoidalRaw:function(){return _s},geoNaturalEarth:function(){return mi.c},geoNaturalEarth2:function(){return Tu},geoNaturalEarth2Raw:function(){return Zo},geoNaturalEarthRaw:function(){return mi.g},geoNellHammer:function(){return Ll},geoNellHammerRaw:function(){return Kl},geoNicolosi:function(){return Au},geoNicolosiRaw:function(){return ku},geoPatterson:function(){return Ql},geoPattersonRaw:function(){return Mu},geoPeirceQuincuncial:function(){return Ml},geoPierceQuincuncial:function(){return Ml},geoPolyconic:function(){return Us},geoPolyconicRaw:function(){return wl},geoPolyhedral:function(){return Di},geoPolyhedralButterfly:function(){return Gs},geoPolyhedralCollignon:function(){return kl},geoPolyhedralWaterman:function(){return tu},geoProject:function(){return Al},geoQuantize:function(){return fs},geoQuincuncial:function(){return Hs},geoRectangularPolyconic:function(){return Ko},geoRectangularPolyconicRaw:function(){return _o},geoRobinson:function(){return Hr},geoRobinsonRaw:function(){return Do},geoSatellite:function(){return nu},geoSatelliteRaw:function(){return qs},geoSinuMollweide:function(){return cr},geoSinuMollweideRaw:function(){return vr},geoSinusoidal:function(){return Be},geoSinusoidalRaw:function(){return Fe},geoStitch:function(){return Aa},geoTimes:function(){return Ss},geoTimesRaw:function(){return ho},geoTwoPointAzimuthal:function(){return to},geoTwoPointAzimuthalRaw:function(){return Sl},geoTwoPointAzimuthalUsa:function(){return Rl},geoTwoPointEquidistant:function(){return Es},geoTwoPointEquidistantRaw:function(){return bi},geoTwoPointEquidistantUsa:function(){return ps},geoVanDerGrinten:function(){return Cs},geoVanDerGrinten2:function(){return ts},geoVanDerGrinten2Raw:function(){return El},geoVanDerGrinten3:function(){return pl},geoVanDerGrinten3Raw:function(){return Ji},geoVanDerGrinten4:function(){return Yr},geoVanDerGrinten4Raw:function(){return Vr},geoVanDerGrintenRaw:function(){return es},geoWagner:function(){return Fo},geoWagner4:function(){return Su},geoWagner4Raw:function(){return Hi},geoWagner6:function(){return hi},geoWagner6Raw:function(){return ko},geoWagner7:function(){return Bo},geoWagnerRaw:function(){return To},geoWiechel:function(){return so},geoWiechelRaw:function(){return Wi},geoWinkel3:function(){return Ls},geoWinkel3Raw:function(){return No}});var M=e(87952),k=Math.abs,o=Math.atan,T=Math.atan2,_=Math.cos,p=Math.exp,l=Math.floor,t=Math.log,i=Math.max,r=Math.min,n=Math.pow,a=Math.round,s=Math.sign||function(tt){return tt>0?1:tt<0?-1:0},u=Math.sin,f=Math.tan,c=1e-6,y=1e-12,d=Math.PI,m=d/2,g=d/4,x=Math.SQRT1_2,v=I(2),b=I(d),h=2*d,S=180/d,w=d/180;function E(tt){return tt>1?m:tt<-1?-m:Math.asin(tt)}function P(tt){return tt>1?0:tt<-1?d:Math.acos(tt)}function I(tt){return tt>0?Math.sqrt(tt):0}function O(tt){return(p(tt)-p(-tt))/2}function z(tt){return(p(tt)+p(-tt))/2}function U(tt){var at=f(tt/2),dt=2*t(_(tt/2))/(at*at);function N(W,H){var C=_(W),G=_(H),Q=u(H),oe=G*C,de=-((1-oe?t((1+oe)/2)/(1-oe):-.5)+dt/(1+oe));return[de*G*u(W),de*Q]}return N.invert=function(W,H){var C,G=I(W*W+H*H),Q=-tt/2,oe=50;if(!G)return[0,0];do{var de=Q/2,Ae=_(de),De=u(de),je=De/Ae,Ye=-t(k(Ae));Q-=C=(2/je*Ye-dt*je-G)/(-Ye/(De*De)+1-dt/(2*Ae*Ae))*(Ae<0?.7:1)}while(k(C)>c&&--oe>0);var Ke=u(Q);return[T(W*Ke,G*_(Q)),E(H*Ke/G)]},N}function R(){var tt=m,at=(0,M.U)(U),dt=at(tt);return dt.radius=function(N){return arguments.length?at(tt=N*w):tt*S},dt.scale(179.976).clipAngle(147)}function j(tt,at){var W,dt=_(at),N=(W=P(dt*_(tt/=2)))?W/Math.sin(W):1;return[2*dt*u(tt)*N,u(at)*N]}function Y(){return(0,M.c)(j).scale(152.63)}function B(tt){var at=u(tt),dt=_(tt),N=tt>=0?1:-1,W=f(N*tt),H=(1+at-dt)/2;function C(G,Q){var oe=_(Q),de=_(G/=2);return[(1+oe)*u(G),(N*Q>-T(de,W)-.001?0:10*-N)+H+u(Q)*dt-(1+oe)*at*de]}return C.invert=function(G,Q){var oe=0,de=0,Ae=50;do{var De=_(oe),je=u(oe),Ye=_(de),Ke=u(de),st=1+Ye,mt=st*je-G,xt=H+Ke*dt-st*at*De-Q,Et=st*De/2,Dt=-je*Ke,It=at*st*je/2,qt=dt*Ye+at*De*Ke,Ft=Dt*It-qt*Et,on=(xt*Dt-mt*qt)/Ft/2,Qt=(mt*It-xt*Et)/Ft;k(Qt)>2&&(Qt/=2),oe-=on,de-=Qt}while((k(on)>c||k(Qt)>c)&&--Ae>0);return N*de>-T(_(oe),W)-.001?[2*oe,de]:null},C}function V(){var tt=20*w,at=tt>=0?1:-1,dt=f(at*tt),N=(0,M.U)(B),W=N(tt),H=W.stream;return W.parallel=function(C){return arguments.length?(dt=f((at=(tt=C*w)>=0?1:-1)*tt),N(tt)):tt*S},W.stream=function(C){var G=W.rotate(),Q=H(C),oe=(W.rotate([0,0]),H(C)),de=W.precision();return W.rotate(G),Q.sphere=function(){oe.polygonStart(),oe.lineStart();for(var Ae=-180*at;at*Ae<180;Ae+=90*at)oe.point(Ae,90*at);if(tt)for(;at*(Ae-=3*at*de)>=-180;)oe.point(Ae,at*-T(_(Ae*w/2),dt)*S);oe.lineEnd(),oe.polygonEnd()},Q},W.scale(218.695).center([0,28.0974])}function q(tt,at){var dt=f(at/2),N=I(1-dt*dt),W=1+N*_(tt/=2),H=u(tt)*N/W,C=dt/W,G=H*H,Q=C*C;return[1.3333333333333333*H*(3+G-3*Q),1.3333333333333333*C*(3+3*G-Q)]}function ie(){return(0,M.c)(q).scale(66.1603)}j.invert=function(tt,at){if(!(tt*tt+4*at*at>d*d+c)){var dt=tt,N=at,W=25;do{var H,C=u(dt),G=u(dt/2),Q=_(dt/2),oe=u(N),de=_(N),Ae=u(2*N),De=oe*oe,je=de*de,Ye=G*G,Ke=1-je*Q*Q,st=Ke?P(de*Q)*I(H=1/Ke):H=0,mt=2*st*de*G-tt,xt=st*oe-at,Et=H*(je*Ye+st*de*Q*De),Dt=H*(.5*C*Ae-2*st*oe*G),It=.25*H*(Ae*G-st*oe*je*C),qt=H*(De*Q+st*Ye*de),Ft=Dt*It-qt*Et;if(!Ft)break;var on=(xt*Dt-mt*qt)/Ft,Qt=(mt*It-xt*Et)/Ft;dt-=on,N-=Qt}while((k(on)>c||k(Qt)>c)&&--W>0);return[dt,N]}},q.invert=function(tt,at){if(at*=.375,!(tt*=.375)&&k(at)>1)return null;var oe,dt=1+tt*tt+at*at,N=I((dt-I(dt*dt-4*at*at))/2),W=E(N)/3,H=N?(oe=k(at/N),t(oe+I(oe*oe-1))/3):function(oe){return t(oe+I(oe*oe+1))}(k(tt))/3,C=_(W),G=z(H),Q=G*G-C*C;return[2*s(tt)*T(O(H)*C,.25-Q),2*s(at)*T(G*u(W),.25+Q)]};var te=I(8),ee=t(1+v);function $(tt,at){var dt=k(at);return dt<g?[tt,t(f(g+at/2))]:[tt*_(dt)*(2*v-1/u(dt)),s(at)*(2*v*(dt-g)-t(f(dt/2)))]}function J(){return(0,M.c)($).scale(112.314)}$.invert=function(tt,at){if((N=k(at))<ee)return[tt,2*o(p(at))-m];var dt,N,W=g,H=25;do{var C=_(W/2),G=f(W/2);W-=dt=(te*(W-g)-t(G)-N)/(te-C*C/(2*G))}while(k(dt)>y&&--H>0);return[tt/(_(W)*(te-1/u(W))),s(at)*W]};var X=e(69020);function ae(tt){var at=2*d/tt;function dt(N,W){var H=(0,X.O)(N,W);if(k(N)>m){var C=T(H[1],H[0]),G=I(H[0]*H[0]+H[1]*H[1]),Q=at*a((C-m)/at)+m,oe=T(u(C-=Q),2-_(C));C=Q+E(d/G*u(oe))-oe,H[0]=G*_(C),H[1]=G*u(C)}return H}return dt.invert=function(N,W){var H=I(N*N+W*W);if(H>m){var C=T(W,N),G=at*a((C-m)/at)+m,Q=C>G?-1:1,oe=H*_(G-C),de=1/f(Q*P((oe-d)/I(d*(d-2*oe)+H*H)));C=G+2*o((de+Q*I(de*de-3))/3),N=H*_(C),W=H*u(C)}return X.O.invert(N,W)},dt}function ce(){var tt=5,at=(0,M.U)(ae),dt=at(tt),N=dt.stream,W=.01,H=-_(W*w),C=u(W*w);return dt.lobes=function(G){return arguments.length?at(tt=+G):tt},dt.stream=function(G){var Q=dt.rotate(),oe=N(G),de=(dt.rotate([0,0]),N(G));return dt.rotate(Q),oe.sphere=function(){de.polygonStart(),de.lineStart();for(var Ae=0,De=360/tt,je=2*d/tt,Ye=90-180/tt,Ke=m;Ae<tt;++Ae,Ye-=De,Ke-=je)de.point(T(C*_(Ke),H)*S,E(C*u(Ke))*S),Ye<-90?(de.point(-90,-180-Ye-W),de.point(-90,-180-Ye+W)):(de.point(90,Ye+W),de.point(90,Ye-W));de.lineEnd(),de.polygonEnd()},oe},dt.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}var le=e(54724);function pe(tt,at){if(arguments.length<2&&(at=tt),1===at)return le.y;if(at===1/0)return we;function dt(N,W){var H=(0,le.y)(N/at,W);return H[0]*=tt,H}return dt.invert=function(N,W){var H=le.y.invert(N/tt,W);return H[0]*=at,H},dt}function we(tt,at){return[tt*_(at)/_(at/=2),2*u(at)]}function Te(){var tt=2,at=(0,M.U)(pe),dt=at(tt);return dt.coefficient=function(N){return arguments.length?at(tt=+N):tt},dt.scale(169.529)}function ye(tt,at,dt){var N,W,H,C=100;dt=void 0===dt?0:+dt,at=+at;do{(W=tt(dt))===(H=tt(dt+c))&&(H=W+c),dt-=N=-1*c*(W-at)/(W-H)}while(C-- >0&&k(N)>c);return C<0?NaN:dt}function ve(tt,at,dt){return void 0===at&&(at=40),void 0===dt&&(dt=y),function(N,W,H,C){var G,Q,oe;H=void 0===H?0:+H,C=void 0===C?0:+C;for(var de=0;de<at;de++){var Ae=tt(H,C),De=Ae[0]-N,je=Ae[1]-W;if(k(De)<dt&&k(je)<dt)break;var Ye=De*De+je*je;if(Ye>G)H-=Q/=2,C-=oe/=2;else{G=Ye;var Ke=(H>0?-1:1)*dt,st=(C>0?-1:1)*dt,mt=tt(H+Ke,C),xt=tt(H,C+st),Et=(mt[0]-Ae[0])/Ke,Dt=(mt[1]-Ae[1])/Ke,It=(xt[0]-Ae[0])/st,qt=(xt[1]-Ae[1])/st,Ft=qt*Et-Dt*It,on=(k(Ft)<.5?.5:1)/Ft;if(H+=Q=(je*It-De*qt)*on,C+=oe=(De*Dt-je*Et)*on,k(Q)<dt&&k(oe)<dt)break}}return[H,C]}}function xe(){var tt=pe(1.68,2);function at(dt,N){if(dt+N<-1.4){var W=(dt-N+1.6)*(dt+N+1.4)/8;dt+=W,N-=.8*W*u(N+d/2)}var H=tt(dt,N),C=(1-_(dt*N))/12;return H[1]<0&&(H[0]*=1+C),H[1]>0&&(H[1]*=1+C/1.5*H[0]*H[0]),H}return at.invert=ve(at),at}function Ce(){return(0,M.c)(xe()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function Oe(tt,at){var dt,N=tt*u(at),W=30;do{at-=dt=(at+u(at)-N)/(1+_(at))}while(k(dt)>c&&--W>0);return at/2}function be(tt,at,dt){function N(W,H){return[tt*W*_(H=Oe(dt,H)),at*u(H)]}return N.invert=function(W,H){return H=E(H/at),[W/(tt*_(H)),E((2*H+u(2*H))/dt)]},N}we.invert=function(tt,at){var dt=2*E(at/2);return[tt*_(dt/2)/_(dt),dt]};var ue=be(v/m,v,d);function se(){return(0,M.c)(ue).scale(169.529)}var ge=2.00276,Ie=1.11072;function ke(tt,at){var dt=Oe(d,at);return[ge*tt/(1/_(at)+Ie/_(dt)),(at+v*u(dt))/ge]}function Se(){return(0,M.c)(ke).scale(160.857)}function Pe(tt){var at=0,dt=(0,M.U)(tt),N=dt(at);return N.parallel=function(W){return arguments.length?dt(at=W*w):at*S},N}function Fe(tt,at){return[tt*_(at),at]}function Be(){return(0,M.c)(Fe).scale(152.63)}function me(tt){if(!tt)return Fe;var at=1/f(tt);function dt(N,W){var H=at+tt-W,C=H&&N*_(W)/H;return[H*u(C),at-H*_(C)]}return dt.invert=function(N,W){var H=I(N*N+(W=at-W)*W),C=at+tt-H;return[H/_(C)*T(N,W),C]},dt}function Me(){return Pe(me).scale(123.082).center([0,26.1441]).parallel(45)}function Le(tt){function at(dt,N){var W=m-N,H=W&&dt*tt*u(W)/W;return[W*u(H)/tt,m-W*_(H)]}return at.invert=function(dt,N){var W=dt*tt,H=m-N,C=I(W*W+H*H),G=T(W,H);return[(C?C/u(C):1)*G/tt,m-C]},at}function Ne(){var tt=.5,at=(0,M.U)(Le),dt=at(tt);return dt.fraction=function(N){return arguments.length?at(tt=+N):tt},dt.scale(158.837)}ke.invert=function(tt,at){var dt,N,W=ge*at,H=at<0?-g:g,C=25;do{N=W-v*u(H),H-=dt=(u(2*H)+2*H-d*u(N))/(2*_(2*H)+2+d*_(N)*v*_(H))}while(k(dt)>c&&--C>0);return N=W-v*u(H),[tt*(1/_(N)+Ie/_(H))/ge,N]},Fe.invert=function(tt,at){return[tt/_(at),at]};var Re=be(1,4/d,d);function He(){return(0,M.c)(Re).scale(152.63)}var Ze=e(24052),nt=e(92992);function ft(tt,at,dt,N,W,H){var C,G=_(H);if(k(tt)>1||k(H)>1)C=P(dt*W+at*N*G);else{var Q=u(tt/2),oe=u(H/2);C=2*E(I(Q*Q+at*N*oe*oe))}return k(C)>c?[C,T(N*u(H),at*W-dt*N*G)]:[0,0]}function ht(tt,at,dt){return P((tt*tt+at*at-dt*dt)/(2*tt*at))}function Tt(tt){return tt-2*d*l((tt+d)/(2*d))}function At(tt,at,dt){for(var N,W=[[tt[0],tt[1],u(tt[1]),_(tt[1])],[at[0],at[1],u(at[1]),_(at[1])],[dt[0],dt[1],u(dt[1]),_(dt[1])]],H=W[2],C=0;C<3;++C,H=N)H.v=ft((N=W[C])[1]-H[1],H[3],H[2],N[3],N[2],N[0]-H[0]),H.point=[0,0];var G=ht(W[0].v[0],W[2].v[0],W[1].v[0]),Q=ht(W[0].v[0],W[1].v[0],W[2].v[0]),oe=d-G;W[2].point[1]=0,W[0].point[0]=-(W[1].point[0]=W[0].v[0]/2);var de=[W[2].point[0]=W[0].point[0]+W[2].v[0]*_(G),2*(W[0].point[1]=W[1].point[1]=W[2].v[0]*u(G))];return function(Ae,De){var je,Ye=u(De),Ke=_(De),st=new Array(3);for(je=0;je<3;++je){var mt=W[je];if(st[je]=ft(De-mt[1],mt[3],mt[2],Ke,Ye,Ae-mt[0]),!st[je][0])return mt.point;st[je][1]=Tt(st[je][1]-mt.v[1])}var xt=de.slice();for(je=0;je<3;++je){var Dt=ht(W[je].v[0],st[je][0],st[2==je?0:je+1][0]);st[je][1]<0&&(Dt=-Dt),je?1==je?(xt[0]-=st[je][0]*_(Dt=Q-Dt),xt[1]-=st[je][0]*u(Dt)):(xt[0]+=st[je][0]*_(Dt=oe-Dt),xt[1]+=st[je][0]*u(Dt)):(xt[0]+=st[je][0]*_(Dt),xt[1]-=st[je][0]*u(Dt))}return xt[0]/=3,xt[1]/=3,xt}}function _t(tt){return tt[0]*=w,tt[1]*=w,tt}function ot(){return it([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function it(tt,at,dt){var N=(0,Ze.c)({type:"MultiPoint",coordinates:[tt,at,dt]}),W=[-N[0],-N[1]],H=(0,nt.c)(W),C=At(_t(H(tt)),_t(H(at)),_t(H(dt)));C.invert=ve(C);var G=(0,M.c)(C).rotate(W),Q=G.center;return delete G.rotate,G.center=function(oe){return arguments.length?Q(H(oe)):H.invert(Q())},G.clipAngle(90)}function Pt(tt,at){var dt=I(1-u(at));return[2/b*tt*dt,b*(1-dt)]}function jt(){return(0,M.c)(Pt).scale(95.6464).center([0,30])}function Ut(tt){var at=f(tt);function dt(N,W){return[N,(N?N/u(N):1)*(u(W)*_(N)-at*_(W))]}return dt.invert=at?function(N,W){N&&(W*=u(N)/N);var H=_(N);return[N,2*T(I(H*H+at*at-W*W)-H,at-W)]}:function(N,W){return[N,E(N?W*f(N)/N:W)]},dt}function Rt(){return Pe(Ut).scale(249.828).clipAngle(90)}Pt.invert=function(tt,at){var dt=(dt=at/b-1)*dt;return[dt>0?tt*I(d/dt)/2:0,E(1-dt)]};var Je=I(3);function et(tt,at){return[Je*tt*(2*_(2*at/3)-1)/b,Je*b*u(at/3)]}function qe(){return(0,M.c)(et).scale(156.19)}function $e(tt){var at=_(tt);function dt(N,W){return[N*at,u(W)/at]}return dt.invert=function(N,W){return[N/at,E(W*at)]},dt}function pt(){return Pe($e).parallel(38.58).scale(195.044)}function ct(tt){var at=_(tt);function dt(N,W){return[N*at,(1+at)*f(W/2)]}return dt.invert=function(N,W){return[N/at,2*o(W/(1+at))]},dt}function Ve(){return Pe(ct).scale(124.75)}function Ge(tt,at){var dt=I(8/(3*d));return[dt*tt*(1-k(at)/d),dt*at]}function ut(){return(0,M.c)(Ge).scale(165.664)}function Qe(tt,at){var dt=I(4-3*u(k(at)));return[2/I(6*d)*tt*dt,s(at)*I(2*d/3)*(2-dt)]}function yt(){return(0,M.c)(Qe).scale(165.664)}function wt(tt,at){var dt=I(d*(4+d));return[2/dt*tt*(1+I(1-4*at*at/(d*d))),4/dt*at]}function kt(){return(0,M.c)(wt).scale(180.739)}function vt(tt,at){var dt=(2+m)*u(at);at/=2;for(var N=0,W=1/0;N<10&&k(W)>c;N++){var H=_(at);at-=W=(at+u(at)*(H+2)-dt)/(2*H*(1+H))}return[2/I(d*(4+d))*tt*(1+_(at)),2*I(d/(4+d))*u(at)]}function Lt(){return(0,M.c)(vt).scale(180.739)}function St(tt,at){return[tt*(1+_(at))/I(2+d),2*at/I(2+d)]}function Ot(){return(0,M.c)(St).scale(173.044)}function Nt(tt,at){for(var dt=(1+m)*u(at),N=0,W=1/0;N<10&&k(W)>c;N++)at-=W=(at+u(at)-dt)/(1+_(at));return dt=I(2+d),[tt*(1+_(at))/dt,2*at/dt]}function Bt(){return(0,M.c)(Nt).scale(173.044)}et.invert=function(tt,at){var dt=3*E(at/(Je*b));return[b*tt/(Je*(2*_(2*dt/3)-1)),dt]},Ge.invert=function(tt,at){var dt=I(8/(3*d)),N=at/dt;return[tt/(dt*(1-k(N)/d)),N]},Qe.invert=function(tt,at){var dt=2-k(at)/I(2*d/3);return[tt*I(6*d)/(2*dt),s(at)*E((4-dt*dt)/3)]},wt.invert=function(tt,at){var dt=I(d*(4+d))/2;return[tt*dt/(1+I(1-at*at*(4+d)/(4*d))),at*dt/2]},vt.invert=function(tt,at){var dt=at*I((4+d)/d)/2,N=E(dt),W=_(N);return[tt/(2/I(d*(4+d))*(1+W)),E((N+dt*(W+2))/(2+m))]},St.invert=function(tt,at){var dt=I(2+d),N=at*dt/2;return[dt*tt/(1+_(N)),N]},Nt.invert=function(tt,at){var dt=1+m,N=I(dt/2);return[2*tt*N/(1+_(at*=N)),E((at+u(at))/dt)]};var Vt=3+2*v;function nn(tt,at){var dt=u(tt/=2),N=_(tt),W=I(_(at)),H=_(at/=2),C=u(at)/(H+v*N*W),G=I(2/(1+C*C)),Q=I((v*H+(N+dt)*W)/(v*H+(N-dt)*W));return[Vt*(G*(Q-1/Q)-2*t(Q)),Vt*(G*C*(Q+1/Q)-2*o(C))]}function gn(){return(0,M.c)(nn).scale(62.5271)}nn.invert=function(tt,at){if(!(dt=q.invert(tt/1.2,1.065*at)))return null;var dt,N=dt[0],W=dt[1],H=20;tt/=Vt,at/=Vt;do{var C=N/2,G=W/2,Q=u(C),oe=_(C),de=u(G),Ae=_(G),De=_(W),je=I(De),Ye=de/(Ae+v*oe*je),Ke=Ye*Ye,st=I(2/(1+Ke)),mt=(v*Ae+(oe+Q)*je)/(v*Ae+(oe-Q)*je),xt=I(mt),Et=xt-1/xt,Dt=xt+1/xt,It=st*Et-2*t(xt)-tt,qt=st*Ye*Dt-2*o(Ye)-at,Ft=de&&x*je*Q*Ke/de,on=(v*oe*Ae+je)/(2*(Ae+v*oe*je)*(Ae+v*oe*je)*je),Qt=-.5*Ye*st*st*st,Kt=Qt*Ft,kn=Qt*on,En=(En=2*Ae+v*je*(oe-Q))*En*xt,Bn=(v*oe*Ae*je+De)/En,qn=-v*Q*de/(je*En),er=Et*Kt-2*Bn/xt+st*(Bn+Bn/mt),gr=Et*kn-2*qn/xt+st*(qn+qn/mt),wr=Ye*Dt*Kt-2*Ft/(1+Ke)+st*Dt*Ft+st*Ye*(Bn-Bn/mt),sr=Ye*Dt*kn-2*on/(1+Ke)+st*Dt*on+st*Ye*(qn-qn/mt),_r=gr*wr-sr*er;if(!_r)break;var Dr=(qt*gr-It*sr)/_r,Wr=(It*wr-qt*er)/_r;N-=Dr,W=i(-m,r(m,W-Wr))}while((k(Dr)>c||k(Wr)>c)&&--H>0);return k(k(W)-m)<c?[0,W]:H&&[N,W]};var Jt=_(35*w);function an(tt,at){var dt=f(at/2);return[tt*Jt*I(1-dt*dt),(1+Jt)*dt]}function Xt(){return(0,M.c)(an).scale(137.152)}function Gn(tt,at){var dt=at/2,N=_(dt);return[2*tt/b*_(at)*N*N,b*f(dt)]}function Dn(){return(0,M.c)(Gn).scale(135.264)}function An(tt){var at=1-tt,dt=W(d,0)[0]-W(-d,0)[0],N=I(2*(W(0,m)[1]-W(0,-m)[1])/dt);function W(G,Q){var oe=_(Q),de=u(Q);return[oe/(at+tt*oe)*G,at*Q+tt*de]}function H(G,Q){var oe=W(G,Q);return[oe[0]*N,oe[1]/N]}function C(G){return H(0,G)[1]}return H.invert=function(G,Q){var oe=ye(C,Q);return[G/N*(tt+at/_(oe)),oe]},H}function cn(){var tt=.5,at=(0,M.U)(An),dt=at(tt);return dt.alpha=function(N){return arguments.length?at(tt=+N):tt},dt.scale(168.725)}an.invert=function(tt,at){var dt=at/(1+Jt);return[tt&&tt/(Jt*I(1-dt*dt)),2*o(dt)]},Gn.invert=function(tt,at){var dt=o(at/b),N=_(dt),W=2*dt;return[tt*b/2/(_(W)*N*N),W]};var bn=e(4888),hn=e(69604);function wn(tt){return[tt[0]/2,E(f(tt[1]/2*w))*S]}function Ln(tt){return[2*tt[0],2*o(u(tt[1]*w))*S]}function Pn(tt){null==tt&&(tt=bn.c);var at=tt(),dt=(0,hn.c)().scale(S).precision(0).clipAngle(null).translate([0,0]);function N(H){return at(wn(H))}function W(H){N[H]=function(){return arguments.length?(at[H].apply(at,arguments),N):at[H]()}}return at.invert&&(N.invert=function(H){return Ln(at.invert(H))}),N.stream=function(H){var C=at.stream(H),G=dt.stream({point:function(Q,oe){C.point(Q/2,E(f(-oe/2*w))*S)},lineStart:function(){C.lineStart()},lineEnd:function(){C.lineEnd()},polygonStart:function(){C.polygonStart()},polygonEnd:function(){C.polygonEnd()}});return G.sphere=C.sphere,G},N.rotate=function(H){return arguments.length?(dt.rotate(H),N):dt.rotate()},N.center=function(H){return arguments.length?(at.center(wn(H)),N):Ln(at.center())},W("angle"),W("clipAngle"),W("clipExtent"),W("fitExtent"),W("fitHeight"),W("fitSize"),W("fitWidth"),W("scale"),W("translate"),W("precision"),N.scale(249.5)}function Nn(tt,at){var dt=2*d/at,N=tt*tt;function W(H,C){var G=(0,X.O)(H,C),Q=G[0],oe=G[1],de=Q*Q+oe*oe;if(de>N){var Ae=I(de),De=T(oe,Q),je=dt*a(De/dt),Ye=De-je,Ke=tt*_(Ye),st=(tt*u(Ye)-Ye*u(Ke))/(m-Ke),mt=jn(Ye,st),xt=(d-tt)/Fn(mt,Ke,d);Q=Ae;var Et,Dt=50;do{Q-=Et=(tt+Fn(mt,Ke,Q)*xt-Ae)/(mt(Q)*xt)}while(k(Et)>c&&--Dt>0);oe=Ye*u(Q),Q<m&&(oe-=st*(Q-m));var It=u(je),qt=_(je);G[0]=Q*qt-oe*It,G[1]=Q*It+oe*qt}return G}return W.invert=function(H,C){var G=H*H+C*C;if(G>N){var Q=I(G),oe=T(C,H),de=dt*a(oe/dt),Ae=oe-de;H=Q*_(Ae),C=Q*u(Ae);for(var De=H-m,je=u(H),Ye=C/je,Ke=H<m?1/0:0,st=10;;){var mt=tt*u(Ye),xt=tt*_(Ye),Et=u(xt),Dt=m-xt,It=(mt-Ye*Et)/Dt,qt=jn(Ye,It);if(k(Ke)<y||! --st)break;Ye-=Ke=(Ye*je-It*De-C)/(je-2*De*(Dt*(xt+Ye*mt*_(xt)-Et)-mt*(mt-Ye*Et))/(Dt*Dt))}H=(Q=tt+Fn(qt,xt,H)*(d-tt)/Fn(qt,xt,d))*_(oe=de+Ye),C=Q*u(oe)}return X.O.invert(H,C)},W}function jn(tt,at){return function(dt){var N=tt*_(dt);return dt<m&&(N-=at),I(1+N*N)}}function Fn(tt,at,dt){for(var N=(dt-at)/50,W=tt(at)+tt(dt),H=1,C=at;H<50;++H)W+=2*tt(C+=N);return.5*W*N}function Jn(){var tt=6,at=30*w,dt=_(at),N=u(at),W=(0,M.U)(Nn),H=W(at,tt),C=H.stream,G=-_(.01*w),Q=u(.01*w);return H.radius=function(oe){return arguments.length?(dt=_(at=oe*w),N=u(at),W(at,tt)):at*S},H.lobes=function(oe){return arguments.length?W(at,tt=+oe):tt},H.stream=function(oe){var de=H.rotate(),Ae=C(oe),De=(H.rotate([0,0]),C(oe));return H.rotate(de),Ae.sphere=function(){De.polygonStart(),De.lineStart();for(var je=0,Ye=2*d/tt,Ke=0;je<tt;++je,Ke-=Ye)De.point(T(Q*_(Ke),G)*S,E(Q*u(Ke))*S),De.point(T(N*_(Ke-Ye/2),dt)*S,E(N*u(Ke-Ye/2))*S);De.lineEnd(),De.polygonEnd()},Ae},H.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function Zn(tt,at,dt,N,W,H,C,G){function Q(oe,de){if(!de)return[tt*oe/d,0];var Ae=de*de,De=tt+Ae*(at+Ae*(dt+Ae*N)),je=de*(W-1+Ae*(H-G+Ae*C)),Ye=(De*De+je*je)/(2*je),Ke=oe*E(De/Ye)/d;return[Ye*u(Ke),de*(1+Ae*G)+Ye*(1-_(Ke))]}return arguments.length<8&&(G=0),Q.invert=function(oe,de){var Ae,De,je=d*oe/tt,Ye=de,Ke=50;do{var st=Ye*Ye,mt=tt+st*(at+st*(dt+st*N)),xt=Ye*(W-1+st*(H-G+st*C)),Et=mt*mt+xt*xt,Dt=2*xt,It=Et/Dt,qt=It*It,Ft=E(mt/It)/d,on=je*Ft,Qt=mt*mt,Kt=(2*at+st*(4*dt+6*st*N))*Ye,kn=W+st*(3*H+5*st*C),En=(2*(mt*Kt+xt*(kn-1))*Dt-Et*(2*(kn-1)))/(Dt*Dt),Bn=_(on),qn=u(on),er=It*Bn,gr=It*qn,wr=je/d*(1/I(1-Qt/qt))*(Kt*It-mt*En)/qt,sr=gr-oe,_r=Ye*(1+st*G)+It-er-de,Dr=En*qn+er*wr,Wr=er*Ft,mr=1+En-(En*Bn-gr*wr),br=gr*Ft,jr=Dr*br-mr*Wr;if(!jr)break;je-=Ae=(_r*Dr-sr*mr)/jr,Ye-=De=(sr*br-_r*Wr)/jr}while((k(Ae)>c||k(De)>c)&&--Ke>0);return[je,Ye]},Q}var hr=Zn(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function rr(){return(0,M.c)(hr).scale(149.995)}var dr=Zn(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function nr(){return(0,M.c)(dr).scale(153.93)}var Sr=Zn(5/6*d,-.62636,-.0344,0,1.3493,-.05524,0,.045);function ln(){return(0,M.c)(Sr).scale(130.945)}function dn(tt,at){var dt=tt*tt,N=at*at;return[tt*(1-.162388*N)*(.87-952426e-9*dt*dt),at*(1+N/12)]}function Un(){return(0,M.c)(dn).scale(131.747)}dn.invert=function(tt,at){var dt,N=tt,W=at,H=50;do{var C=W*W;W-=dt=(W*(1+C/12)-at)/(1+C/4)}while(k(dt)>c&&--H>0);H=50,tt/=1-.162388*C;do{var G=(G=N*N)*G;N-=dt=(N*(.87-952426e-9*G)-tt)/(.87-.00476213*G)}while(k(dt)>c&&--H>0);return[N,W]};var Mn=Zn(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Hn(){return(0,M.c)(Mn).scale(131.087)}function Wn(tt){var at=tt(m,0)[0]-tt(-m,0)[0];function dt(N,W){var H=N>0?-.5:.5,C=tt(N+H*d,W);return C[0]-=H*at,C}return tt.invert&&(dt.invert=function(N,W){var H=N>0?-.5:.5,C=tt.invert(N+H*at,W),G=C[0]-H*d;return G<-d?G+=2*d:G>d&&(G-=2*d),C[0]=G,C}),dt}function $n(tt,at){var dt=s(tt),N=s(at),W=_(at),H=_(tt)*W,C=u(tt)*W,G=u(N*at);tt=k(T(C,G)),at=E(H),k(tt-m)>c&&(tt%=m);var Q=function(oe,de){if(de===m)return[0,0];var Ae,De,je=u(de),Ye=je*je,Ke=Ye*Ye,st=1+Ke,mt=1+3*Ke,xt=1-Ke,Et=E(1/I(st)),Dt=xt+Ye*st*Et,It=(1-je)/Dt,qt=I(It),Ft=It*st,on=I(Ft),Qt=qt*xt;if(0===oe)return[0,-(Qt+Ye*on)];var Kt,kn=_(de),En=1/kn,Bn=2*je*kn,qn=(-Dt*kn-(-3*Ye+Et*mt)*Bn*(1-je))/(Dt*Dt),er=-En*Bn,gr=-En*(Ye*st*qn+It*mt*Bn),wr=-2*En*(xt*(.5*qn/qt)-2*Ye*qt*Bn),sr=4*oe/d;if(oe>.222*d||de<d/4&&oe>.175*d){if(Ae=(Qt+Ye*I(Ft*(1+Ke)-Qt*Qt))/(1+Ke),oe>d/4)return[Ae,Ae];var _r=Ae,Dr=.5*Ae;Ae=.5*(Dr+_r),De=50;do{var Wr=Ae*(wr+er*I(Ft-Ae*Ae))+gr*E(Ae/on)-sr;if(!Wr)break;Wr<0?Dr=Ae:_r=Ae,Ae=.5*(Dr+_r)}while(k(_r-Dr)>c&&--De>0)}else{Ae=c,De=25;do{var mr=Ae*Ae,br=I(Ft-mr),jr=wr+er*br,Mr=Ae*jr+gr*E(Ae/on)-sr;Ae-=Kt=br?Mr/(jr+(gr-er*mr)/br):0}while(k(Kt)>c&&--De>0)}return[Ae,-Qt-Ye*I(Ft-Ae*Ae)]}(tt>d/4?m-tt:tt,at);return tt>d/4&&(G=Q[0],Q[0]=-Q[1],Q[1]=-G),Q[0]*=dt,Q[1]*=-N,Q}function lr(){return(0,M.c)(Wn($n)).scale(239.75)}function Cr(tt,at){var dt,N,W,H,C,G;if(at<c)return[(H=u(tt))-(dt=at*(tt-H*(N=_(tt)))/4)*N,N+dt*H,1-at*H*H/2,tt-dt];if(at>=1-c)return dt=(1-at)/4,W=1/(N=z(tt)),[(H=((G=p(2*(G=tt)))-1)/(G+1))+dt*((C=N*O(tt))-tt)/(N*N),W-dt*H*W*(C-tt),W+dt*H*W*(C+tt),2*o(p(tt))-m+dt*(C-tt)/N];var Q=[1,0,0,0,0,0,0,0,0],oe=[I(at),0,0,0,0,0,0,0,0],de=0;for(N=I(1-at),C=1;k(oe[de]/Q[de])>c&&de<8;)dt=Q[de++],oe[de]=(dt-N)/2,Q[de]=(dt+N)/2,N=I(dt*N),C*=2;W=C*Q[de]*tt;do{W=(E(H=oe[de]*u(N=W)/Q[de])+W)/2}while(--de);return[u(W),H=_(W),H/_(W-N),W]}function sn(tt,at){if(!at)return tt;if(1===at)return t(f(tt/2+g));for(var dt=1,N=I(1-at),W=I(at),H=0;k(W)>c;H++){if(tt%d){var C=o(N*f(tt)/dt);C<0&&(C+=d),tt+=C+~~(tt/d)*d}else tt+=tt;W=(dt+N)/2,N=I(dt*N),W=((dt=W)-N)/2}return tt/(n(2,H)*dt)}function Sn(tt,at){var oe,de,Ae,De,je,dt=(v-1)/(v+1),N=I(1-dt*dt),W=sn(m,N*N),H=t(f(d/4+k(at)/2)),C=p(-1*H)/I(dt),G=(oe=C*_(-1*tt),De=(de=C*u(-1*tt))+1,[.5*((oe>=0?m:-m)-T(je=1-(Ae=oe*oe)-de*de,2*oe)),-.25*t(je*je+4*Ae)+.5*t(De*De+Ae)]),Q=function(oe,de,Ae){var De=k(oe),je=O(k(de));if(De){var Ye=1/u(De),Ke=1/(f(De)*f(De)),st=-(Ke+Ae*(je*je*Ye*Ye)-1+Ae),mt=(-st+I(st*st-(Ae-1)*Ke*4))/2;return[sn(o(1/I(mt)),Ae)*s(oe),sn(o(I((mt/Ke-1)/Ae)),1-Ae)*s(de)]}return[0,sn(o(je),1-Ae)*s(de)]}(G[0],G[1],N*N);return[-Q[1],(at>=0?1:-1)*(.5*W-Q[0])]}function zt(){return(0,M.c)(Wn(Sn)).scale(151.496)}$n.invert=function(tt,at){k(tt)>1&&(tt=2*s(tt)-tt),k(at)>1&&(at=2*s(at)-at);var dt=s(tt),N=s(at),W=-dt*tt,H=-N*at,C=H/W<1,G=function(Ae,De){for(var je=0,Ye=1,Ke=.5,st=50;;){var mt=Ke*Ke,xt=I(Ke),Et=E(1/I(1+mt)),Dt=1-mt+Ke*(1+mt)*Et,It=(1-xt)/Dt,qt=I(It),Ft=It*(1+mt),on=qt*(1-mt),Qt=I(Ft-Ae*Ae),Kt=De+on+Ke*Qt;if(k(Ye-je)<y||0==--st||0===Kt)break;Kt>0?je=Ke:Ye=Ke,Ke=.5*(je+Ye)}if(!st)return null;var kn=E(xt),En=_(kn),Bn=1/En,qn=2*xt*En,er=(-Dt*En-(-3*Ke+Et*(1+3*mt))*qn*(1-xt))/(Dt*Dt);return[d/4*(Ae*(-2*Bn*(.5*er/qt*(1-mt)-2*Ke*qt*qn)+-Bn*qn*Qt)+-Bn*(Ke*(1+mt)*er+It*(1+3*mt)*qn)*E(Ae/I(Ft))),kn]}(C?H:W,C?W:H),Q=G[0],oe=G[1],de=_(oe);return C&&(Q=-m-Q),[dt*(T(u(Q)*de,-u(oe))+d),N*E(_(Q)*de)]},Sn.invert=function(tt,at){var dt,N,W,H,C,G,De,je,Ye,Q=(v-1)/(v+1),oe=I(1-Q*Q),de=(N=-tt,W=oe*oe,(dt=.5*sn(m,oe*oe)-at)?(H=Cr(dt,W),N?(G=(C=Cr(N,1-W))[1]*C[1]+W*H[0]*H[0]*C[0]*C[0],[[H[0]*C[2]/G,H[1]*H[2]*C[0]*C[1]/G],[H[1]*C[1]/G,-H[0]*H[2]*C[0]*C[2]/G],[H[2]*C[1]*C[2]/G,-W*H[0]*H[1]*C[0]/G]]):[[H[0],0],[H[1],0],[H[2],0]]):[[0,(C=Cr(N,1-W))[0]/C[1]],[1/C[1],0],[C[2]/C[1],0]]),Ae=[((De=de[0])[0]*(je=de[1])[0]+De[1]*je[1])/(Ye=je[0]*je[0]+je[1]*je[1]),(De[1]*je[0]-De[0]*je[1])/Ye];return[T(Ae[1],Ae[0])/-1,2*o(p(-.5*t(Q*Ae[0]*Ae[0]+Q*Ae[1]*Ae[1])))-m]};var Yt=e(61780);function un(tt){var at=u(tt),dt=_(tt),N=_n(tt);function W(H,C){var G=N(H,C);H=G[0];var Q=u(C=G[1]),oe=_(C),de=_(H),Ae=P(at*Q+dt*oe*de),De=u(Ae),je=k(De)>c?Ae/De:1;return[je*dt*u(H),(k(H)>m?je:-je)*(at*oe-dt*Q*de)]}return N.invert=_n(-tt),W.invert=function(H,C){var G=I(H*H+C*C),Q=-u(G),oe=_(G),de=G*oe,Ae=-C*Q,De=G*at,je=I(de*de+Ae*Ae-De*De),Ye=T(de*De+Ae*je,Ae*De-de*je),Ke=(G>m?-1:1)*T(H*Q,G*_(Ye)*oe+C*u(Ye)*Q);return N.invert(Ke,Ye)},W}function _n(tt){var at=u(tt),dt=_(tt);return function(N,W){var H=_(W),C=_(N)*H,G=u(N)*H,Q=u(W);return[T(G,C*dt-Q*at),E(Q*dt+C*at)]}}function Tn(){var tt=0,at=(0,M.U)(un),dt=at(tt),N=dt.rotate,W=dt.stream,H=(0,Yt.c)();return dt.parallel=function(C){if(!arguments.length)return tt*S;var G=dt.rotate();return at(tt=C*w).rotate(G)},dt.rotate=function(C){return arguments.length?(N.call(dt,[C[0],C[1]-tt*S]),H.center([-C[0],-C[1]]),dt):((C=N.call(dt))[1]+=tt*S,C)},dt.stream=function(C){return(C=W(C)).sphere=function(){C.polygonStart();var G,Q=H.radius(89.99)().coordinates[0],oe=Q.length-1,de=-1;for(C.lineStart();++de<oe;)C.point((G=Q[de])[0],G[1]);for(C.lineEnd(),oe=(Q=H.radius(90.01)().coordinates[0]).length-1,C.lineStart();--de>=0;)C.point((G=Q[de])[0],G[1]);C.lineEnd(),C.polygonEnd()},C},dt.scale(79.4187).parallel(45).clipAngle(179.999)}var Cn=e(84706),vn=e(16016),rn=E(1-1/3)*S,tn=$e(0);function fn(tt){var at=rn*w,dt=Pt(d,at)[0]-Pt(-d,at)[0],N=tn(0,at)[1],W=Pt(0,at)[1],H=b-W,C=h/tt,G=4/h,Q=N+H*H*4/h;function oe(de,Ae){var De,je=k(Ae);if(je>at){var Ye=r(tt-1,i(0,l((de+d)/C)));(De=Pt(de+=d*(tt-1)/tt-Ye*C,je))[0]=De[0]*h/dt-h*(tt-1)/(2*tt)+Ye*h/tt,De[1]=N+4*(De[1]-W)*H/h,Ae<0&&(De[1]=-De[1])}else De=tn(de,Ae);return De[0]*=G,De[1]/=Q,De}return oe.invert=function(de,Ae){de/=G;var De=k(Ae*=Q);if(De>N){var je=r(tt-1,i(0,l((de+d)/C))),Ye=Pt.invert(de=(de+d*(tt-1)/tt-je*C)*dt/h,.25*(De-N)*h/H+W);return Ye[0]-=d*(tt-1)/tt-je*C,Ae<0&&(Ye[1]=-Ye[1]),Ye}return tn.invert(de,Ae)},oe}function yn(tt,at){return[tt,1&at?90-c:rn]}function zn(tt,at){return[tt,1&at?-90+c:-rn]}function Vn(tt){return[tt[0]*(1-c),tt[1]]}function Xn(){var tt=4,at=(0,M.U)(fn),dt=at(tt),N=dt.stream;return dt.lobes=function(W){return arguments.length?at(tt=+W):tt},dt.stream=function(W){var H=dt.rotate(),C=N(W),G=(dt.rotate([0,0]),N(W));return dt.rotate(H),C.sphere=function(){var Q,oe;(0,vn.c)((oe=[].concat((0,Cn.ik)(-180,180+(Q=180/tt)/2,Q).map(yn),(0,Cn.ik)(180,-180-Q/2,-Q).map(zn)),{type:"Polygon",coordinates:[180===Q?oe.map(Vn):oe]}),G)},C},dt.scale(239.75)}function Qn(tt){var at,dt=1+tt,N=E(u(1/dt)),W=2*I(d/(at=d+4*N*dt)),H=.5*W*(dt+I(tt*(2+tt))),C=tt*tt,G=dt*dt;function Q(oe,de){var Ae,De,je=1-u(de);if(je&&je<2){var Ye,Ke=m-de,st=25;do{var mt=u(Ke),xt=_(Ke),Et=N+T(mt,dt-xt),Dt=1+G-2*dt*xt;Ke-=Ye=(Ke-C*N-dt*mt+Dt*Et-.5*je*at)/(2*dt*mt*Et)}while(k(Ye)>y&&--st>0);Ae=W*I(Dt),De=oe*Et/d}else Ae=W*(tt+je),De=oe*N/d;return[Ae*u(De),H-Ae*_(De)]}return Q.invert=function(oe,de){var Ae=oe*oe+(de-=H)*de,De=(1+G-Ae/(W*W))/(2*dt),je=P(De),Ye=u(je),Ke=N+T(Ye,dt-De);return[E(oe/I(Ae))*d/Ke,E(1-2*(je-C*N-dt*Ye+(1+G-2*dt*De)*Ke)/at)]},Q}function pr(){var tt=1,at=(0,M.U)(Qn),dt=at(tt);return dt.ratio=function(N){return arguments.length?at(tt=+N):tt},dt.scale(167.774).center([0,18.67])}var or=.7109889596207567,fr=.0528035274542;function vr(tt,at){return at>-or?((tt=ue(tt,at))[1]+=fr,tt):Fe(tt,at)}function cr(){return(0,M.c)(vr).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function Ar(tt,at){return k(at)>or?((tt=ue(tt,at))[1]-=at>0?fr:-fr,tt):Fe(tt,at)}function Fr(){return(0,M.c)(Ar).scale(152.63)}function Lr(tt,at,dt,N){var W=I(4*d/(2*dt+(1+tt-at/2)*u(2*dt)+(tt+at)/2*u(4*dt)+at/2*u(6*dt))),H=I(N*u(dt)*I((1+tt*_(2*dt)+at*_(4*dt))/(1+tt+at))),C=dt*Q(1);function G(Ae){return I(1+tt*_(2*Ae)+at*_(4*Ae))}function Q(Ae){var De=Ae*dt;return(2*De+(1+tt-at/2)*u(2*De)+(tt+at)/2*u(4*De)+at/2*u(6*De))/dt}function oe(Ae){return G(Ae)*u(Ae)}var de=function(Ae,De){var je=dt*ye(Q,C*u(De)/dt,De/d);isNaN(je)&&(je=dt*s(De));var Ye=W*G(je);return[Ye*H*Ae/d*_(je),Ye/H*u(je)]};return de.invert=function(Ae,De){var je=ye(oe,De*H/W);return[Ae*d/(_(je)*W*H*G(je)),E(dt*Q(je/dt)/C)]},0===dt&&(W=I(N/d),(de=function(Ae,De){return[Ae*W,u(De)/W]}).invert=function(Ae,De){return[Ae/W,E(De*W)]}),de}function xr(){var tt=1,at=0,dt=45*w,N=2,W=(0,M.U)(Lr),H=W(tt,at,dt,N);return H.a=function(C){return arguments.length?W(tt=+C,at,dt,N):tt},H.b=function(C){return arguments.length?W(tt,at=+C,dt,N):at},H.psiMax=function(C){return arguments.length?W(tt,at,dt=+C*w,N):dt*S},H.ratio=function(C){return arguments.length?W(tt,at,dt,N=+C):N},H.scale(180.739)}function Pr(tt,at,dt,N,W,H,C,G,Q,oe,de){if(de.nanEncountered)return NaN;var Ae,De,je,Ye,Ke,st,mt,xt,Et,Dt;if(De=tt(at+.25*(Ae=dt-at)),je=tt(dt-.25*Ae),isNaN(De))de.nanEncountered=!0;else{if(!isNaN(je))return Dt=((st=(Ye=Ae*(N+4*De+W)/12)+(Ke=Ae*(W+4*je+H)/12))-C)/15,oe>Q?(de.maxDepthCount++,st+Dt):Math.abs(Dt)<G?st+Dt:(xt=Pr(tt,at,mt=at+.5*Ae,N,De,W,Ye,.5*G,Q,oe+1,de),isNaN(xt)?(de.nanEncountered=!0,NaN):(Et=Pr(tt,mt,dt,W,je,H,Ke,.5*G,Q,oe+1,de),isNaN(Et)?(de.nanEncountered=!0,NaN):xt+Et));de.nanEncountered=!0}}function qr(tt,at,dt,N,W){void 0===N&&(N=1e-8),void 0===W&&(W=20);var H=tt(at),C=tt(.5*(at+dt)),G=tt(dt);return Pr(tt,at,dt,H,C,G,(H+4*C+G)*(dt-at)/6,N,W,1,{maxDepthCount:0,nanEncountered:!1})}function Qr(tt,at,dt){function N(je){return tt+(1-tt)*n(1-n(je,at),1/at)}function W(je){return qr(N,0,je,1e-4)}for(var H=1/W(1),C=1e3,G=1.00000001*H,Q=[],oe=0;oe<=C;oe++)Q.push(W(oe/C)*G);function de(je){var Ye=0,Ke=C,st=500;do{Q[st]>je?Ke=st:Ye=st,st=Ye+Ke>>1}while(st>Ye);var mt=Q[st+1]-Q[st];return mt&&(mt=(je-Q[st+1])/mt),(st+1+mt)/C}var Ae=2*de(1)/d*H/dt,De=function(je,Ye){var Ke=de(k(u(Ye))),st=N(Ke)*je;return Ke/=Ae,[st,Ye>=0?Ke:-Ke]};return De.invert=function(je,Ye){var Ke;return k(Ye*=Ae)<1&&(Ke=s(Ye)*E(W(k(Ye))*H)),[je/N(k(Ye)),Ke]},De}function Fi(){var tt=0,at=2.5,dt=1.183136,N=(0,M.U)(Qr),W=N(tt,at,dt);return W.alpha=function(H){return arguments.length?N(tt=+H,at,dt):tt},W.k=function(H){return arguments.length?N(tt,at=+H,dt):at},W.gamma=function(H){return arguments.length?N(tt,at,dt=+H):dt},W.scale(152.63)}function ta(tt,at){return k(tt[0]-at[0])<c&&k(tt[1]-at[1])<c}function Ta(tt,at){for(var dt,N,W,H=-1,C=tt.length,G=tt[0],Q=[];++H<C;){N=((dt=tt[H])[0]-G[0])/at,W=(dt[1]-G[1])/at;for(var oe=0;oe<at;++oe)Q.push([G[0]+oe*N,G[1]+oe*W]);G=dt}return Q.push(dt),Q}function Gi(tt,at,dt){var N,W;function H(Q,oe){for(var de=oe<0?-1:1,Ae=at[+(oe<0)],De=0,je=Ae.length-1;De<je&&Q>Ae[De][2][0];++De);var Ye=tt(Q-Ae[De][1][0],oe);return Ye[0]+=tt(Ae[De][1][0],de*oe>de*Ae[De][0][1]?Ae[De][0][1]:oe)[0],Ye}dt?H.invert=dt(H):tt.invert&&(H.invert=function(Q,oe){for(var de=W[+(oe<0)],Ae=at[+(oe<0)],De=0,je=de.length;De<je;++De){var Ye=de[De];if(Ye[0][0]<=Q&&Q<Ye[1][0]&&Ye[0][1]<=oe&&oe<Ye[1][1]){var Ke=tt.invert(Q-tt(Ae[De][1][0],0)[0],oe);return Ke[0]+=Ae[De][1][0],ta(H(Ke[0],Ke[1]),[Q,oe])?Ke:null}}});var C=(0,M.c)(H),G=C.stream;return C.stream=function(Q){var oe=C.rotate(),de=G(Q),Ae=(C.rotate([0,0]),G(Q));return C.rotate(oe),de.sphere=function(){(0,vn.c)(N,Ae)},de},C.lobes=function(Q){return arguments.length?(N=function(oe){var de,Ae,je,Ye,st,mt=[],xt=oe[0].length;for(st=0;st<xt;++st)Ae=(de=oe[0][st])[0][0],mt.push(Ta([[Ae+c,de[0][1]+c],[Ae+c,(je=de[1][1])-c],[(Ye=de[2][0])-c,je-c],[Ye-c,de[2][1]+c]],30));for(st=oe[1].length-1;st>=0;--st)Ae=(de=oe[1][st])[0][0],mt.push(Ta([[(Ye=de[2][0])-c,de[2][1]-c],[Ye-c,(je=de[1][1])+c],[Ae+c,je+c],[Ae+c,de[0][1]-c]],30));return{type:"Polygon",coordinates:[(0,Cn.Uf)(mt)]}}(Q),at=Q.map(function(oe){return oe.map(function(de){return[[de[0][0]*w,de[0][1]*w],[de[1][0]*w,de[1][1]*w],[de[2][0]*w,de[2][1]*w]]})}),W=at.map(function(oe){return oe.map(function(de){var Ae,De=tt(de[0][0],de[0][1])[0],je=tt(de[2][0],de[2][1])[0],Ye=tt(de[1][0],de[0][1])[1],Ke=tt(de[1][0],de[1][1])[1];return Ye>Ke&&(Ae=Ye,Ye=Ke,Ke=Ae),[[De,Ye],[je,Ke]]})}),C):at.map(function(oe){return oe.map(function(de){return[[de[0][0]*S,de[0][1]*S],[de[1][0]*S,de[1][1]*S],[de[2][0]*S,de[2][1]*S]]})})},null!=at&&C.lobes(at),C}vr.invert=function(tt,at){return at>-or?ue.invert(tt,at-fr):Fe.invert(tt,at)},Ar.invert=function(tt,at){return k(at)>or?ue.invert(tt,at+(at>0?fr:-fr)):Fe.invert(tt,at)};var pa=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function qa(){return Gi(ke,pa).scale(160.857)}var ti=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function _a(){return Gi(Ar,ti).scale(152.63)}var vo=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function ka(){return Gi(ue,vo).scale(169.529)}var vs=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function ma(){return Gi(ue,vs).scale(169.529).rotate([20,0])}var Na=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function Ho(){return Gi(vr,Na,ve).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var as=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function tl(){return Gi(Fe,as).scale(152.63).rotate([-20,0])}function co(tt,at){return[3/h*tt*I(d*d/3-at*at),at]}function Co(){return(0,M.c)(co).scale(158.837)}function os(tt){function at(dt,N){if(k(k(N)-m)<c)return[0,N<0?-2:2];var W=u(N),H=n((1+W)/(1-W),tt/2),C=.5*(H+1/H)+_(dt*=tt);return[2*u(dt)/C,(H-1/H)/C]}return at.invert=function(dt,N){var W=k(N);if(k(W-2)<c)return dt?null:[0,s(N)*m];if(W>2)return null;var H=(dt/=2)*dt,C=(N/=2)*N,G=2*N/(1+H+C);return G=n((1+G)/(1-G),1/tt),[T(2*dt,1-H-C)/tt,E((G-1)/(G+1))]},at}function ki(){var tt=.5,at=(0,M.U)(os),dt=at(tt);return dt.spacing=function(N){return arguments.length?at(tt=+N):tt},dt.scale(124.75)}co.invert=function(tt,at){return[h/3*tt/I(d*d/3-at*at),at]};var wa=d/v;function fo(tt,at){return[tt*(1+I(_(at)))/2,at/(_(at/2)*_(tt/6))]}function yo(){return(0,M.c)(fo).scale(97.2672)}function oo(tt,at){var dt=tt*tt,N=at*at;return[tt*(.975534+N*(-.0143059*dt-.119161+-.0547009*N)),at*(1.00384+dt*(.0802894+-.02855*N+199025e-9*dt)+N*(.0998909+-.0491032*N))]}function Lo(){return(0,M.c)(oo).scale(139.98)}function qo(tt,at){return[u(tt)/_(at),f(at)*_(tt)]}function nl(){return(0,M.c)(qo).scale(144.049).clipAngle(89.999)}function va(tt){var at=_(tt),dt=f(g+tt/2);function N(W,H){var C=H-tt,G=k(C)<c?W*at:k(G=g+H/2)<c||k(k(G)-m)<c?0:W*C/t(f(G)/dt);return[G,C]}return N.invert=function(W,H){var C,G=H+tt;return[k(H)<c?W/at:k(C=g+G/2)<c||k(k(C)-m)<c?0:W*t(f(C)/dt)/H,G]},N}function Ns(){return Pe(va).parallel(40).scale(158.837)}function ys(tt,at){return[tt,1.25*t(f(g+.4*at))]}function _u(){return(0,M.c)(ys).scale(108.318)}function wu(tt){var at=tt.length-1;function dt(N,W){for(var H,C=_(W),G=2/(1+C*_(N)),Q=G*C*u(N),oe=G*u(W),de=at,Ae=tt[de],De=Ae[0],je=Ae[1];--de>=0;)De=(Ae=tt[de])[0]+Q*(H=De)-oe*je,je=Ae[1]+Q*je+oe*H;return[De=Q*(H=De)-oe*je,je=Q*je+oe*H]}return dt.invert=function(N,W){var H=20,C=N,G=W;do{for(var Q,oe=at,de=tt[oe],Ae=de[0],De=de[1],je=0,Ye=0;--oe>=0;)je=Ae+C*(Q=je)-G*Ye,Ye=De+C*Ye+G*Q,Ae=(de=tt[oe])[0]+C*(Q=Ae)-G*De,De=de[1]+C*De+G*Q;var Ke,st,mt=(je=Ae+C*(Q=je)-G*Ye)*je+(Ye=De+C*Ye+G*Q)*Ye;C-=Ke=((Ae=C*(Q=Ae)-G*De-N)*je+(De=C*De+G*Q-W)*Ye)/mt,G-=st=(De*je-Ae*Ye)/mt}while(k(Ke)+k(st)>c*c&&--H>0);if(H){var xt=I(C*C+G*G),Et=2*o(.5*xt),Dt=u(Et);return[T(C*Dt,xt*_(Et)),xt?E(G*Dt/xt):0]}},dt}fo.invert=function(tt,at){var dt=k(tt),N=k(at),W=c,H=m;N<wa?H*=N/wa:W+=6*P(wa/N);for(var C=0;C<25;C++){var G=u(H),Q=I(_(H)),oe=u(H/2),de=_(H/2),Ae=u(W/6),De=_(W/6),je=.5*W*(1+Q)-dt,Ye=H/(de*De)-N,Ke=Q?-.25*W*G/Q:0,st=.5*(1+Q),mt=(1+.5*H*oe/de)/(de*De),xt=H/de*(Ae/6)/(De*De),Et=Ke*xt-mt*st,Dt=(je*xt-Ye*st)/Et,It=(Ye*Ke-je*mt)/Et;if(H-=Dt,W-=It,k(Dt)<c&&k(It)<c)break}return[tt<0?-W:W,at<0?-H:H]},oo.invert=function(tt,at){var dt=s(tt)*d,N=at/2,W=50;do{var H=dt*dt,C=N*N,G=dt*N,Q=dt*(.975534+C*(-.0143059*H-.119161+-.0547009*C))-tt,oe=N*(1.00384+H*(.0802894+-.02855*C+199025e-9*H)+C*(.0998909+-.0491032*C))-at,de=.975534-C*(.119161+3*H*.0143059+.0547009*C),Ae=-G*(.238322+.2188036*C+.0286118*H),De=G*(.1605788+7961e-7*H+-.0571*C),je=1.00384+H*(.0802894+199025e-9*H)+C*(3*(.0998909-.02855*H)-.245516*C),Ye=Ae*De-je*de,Ke=(oe*Ae-Q*je)/Ye,st=(Q*De-oe*de)/Ye;dt-=Ke,N-=st}while((k(Ke)>c||k(st)>c)&&--W>0);return W&&[dt,N]},qo.invert=function(tt,at){var dt=tt*tt,N=at*at+1,W=dt+N,H=tt?x*I((W-I(W*W-4*dt))/dt):1/I(N);return[E(tt*H),s(at)*P(H)]},ys.invert=function(tt,at){return[tt,2.5*o(p(.8*at))-.625*d]};var xs=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],ss=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Vu=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Io=[[.9245,0],[0,0],[.01943,0]],ec=[[.721316,0],[0,0],[-.00881625,-.00617325]];function _c(){return bs(xs,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function wc(){return bs(ss,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function rl(){return bs(Vu,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function Wo(){return bs(Io,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function bl(){return bs(ec,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function bs(tt,at){var dt=(0,M.c)(wu(tt)).rotate(at).clipAngle(90),N=(0,nt.c)(at),W=dt.center;return delete dt.rotate,dt.center=function(H){return arguments.length?W(N(H)):N.invert(W())},dt}var il=I(6),al=I(7);function Yo(tt,at){var dt=E(7*u(at)/(3*il));return[il*tt*(2*_(2*dt/3)-1)/al,9*u(dt/3)/al]}function Xl(){return(0,M.c)(Yo).scale(164.859)}function ls(tt,at){for(var dt,N=(1+x)*u(at),W=at,H=0;H<25&&(W-=dt=(u(W/2)+u(W)-N)/(.5*_(W/2)+_(W)),!(k(dt)<c));H++);return[tt*(1+2*_(W)/_(W/2))/(3*v),2*I(3)*u(W/2)/I(2+v)]}function us(){return(0,M.c)(ls).scale(188.209)}function _s(tt,at){for(var dt,N=I(6/(4+d)),W=(1+d/4)*u(at),H=at/2,C=0;C<25&&(H-=dt=(H/2+u(H)-W)/(.5+_(H)),!(k(dt)<c));C++);return[N*(.5+_(H))*tt/1.5,N*H]}function js(){return(0,M.c)(_s).scale(166.518)}Yo.invert=function(tt,at){var dt=3*E(at*al/9);return[tt*al/(il*(2*_(2*dt/3)-1)),E(3*u(dt)*il/7)]},ls.invert=function(tt,at){var dt=at*I(2+v)/(2*I(3)),N=2*E(dt);return[3*v*tt/(1+2*_(N)/_(N/2)),E((dt+u(N))/(1+x))]},_s.invert=function(tt,at){var dt=I(6/(4+d)),N=at/dt;return k(k(N)-m)<c&&(N=N<0?-m:m),[1.5*tt/(dt*(.5+_(N))),E((N/2+u(N))/(1+d/4))]};var mi=e(47984);function Zo(tt,at){var dt=at*at,N=dt*dt,W=dt*N;return[tt*(.84719-.13063*dt+W*W*(.05494*dt-.04515-.02326*N+.00331*W)),at*(1.01183+N*N*(.01926*dt-.02625-.00396*N))]}function Tu(){return(0,M.c)(Zo).scale(175.295)}function Kl(tt,at){return[tt*(1+_(at))/2,2*(at-f(at/2))]}function Ll(){return(0,M.c)(Kl).scale(152.63)}Zo.invert=function(tt,at){var dt,N,W,H,C=at,G=25;do{C-=dt=(C*(1.01183+(W=(N=C*C)*N)*W*(.01926*N-.02625-.00396*W))-at)/(1.01183+W*W*(.21186*N-.23625+-.05148*W))}while(k(dt)>y&&--G>0);return[tt/(.84719-.13063*(N=C*C)+(H=N*(W=N*N))*H*(.05494*N-.04515-.02326*W+.00331*H)),C]},Kl.invert=function(tt,at){for(var dt=at/2,N=0,W=1/0;N<10&&k(W)>c;++N){var H=_(at/2);at-=W=(at-f(at/2)-dt)/(1-.5/(H*H))}return[2*tt/(1+_(at)),at]};var Jl=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function ol(){return Gi(pe(1/0),Jl).rotate([20,0]).scale(152.63)}function ku(tt,at){var dt=u(at),N=_(at),W=s(tt);if(0===tt||k(at)===m)return[0,at];if(0===at)return[tt,0];if(k(tt)===m)return[tt*N,m*dt];var H=d/(2*tt)-2*tt/d,C=2*at/d,G=(1-C*C)/(dt-C),Q=H*H,oe=G*G,de=1+Q/oe,Ae=1+oe/Q,De=(H*dt/G-H/2)/de,je=(oe*dt/Q+G/2)/Ae,Ye=je*je-(oe*dt*dt/Q+G*dt-1)/Ae;return[m*(De+I(De*De+N*N/de)*W),m*(je+I(Ye<0?0:Ye)*s(-at*H)*W)]}function Au(){return(0,M.c)(ku).scale(127.267)}ku.invert=function(tt,at){var dt=(tt/=m)*tt,N=dt+(at/=m)*at,W=d*d;return[tt?(N-1+I((1-N)*(1-N)+4*dt))/(2*tt)*m:0,ye(function(H){return N*(d*u(H)-2*H)*d+4*H*H*(at-u(H))+2*d*H-W*at},0)]};var Po=1.0148,_l=.23185,Ea=-.14499,cs=.02406,Il=Po,tc=5*_l,$l=7*Ea,ws=9*cs,Oo=1.790857183;function Mu(tt,at){var dt=at*at;return[tt,at*(Po+dt*dt*(_l+dt*(Ea+cs*dt)))]}function Ql(){return(0,M.c)(Mu).scale(139.319)}function wl(tt,at){if(k(at)<c)return[tt,0];var dt=f(at),N=tt*u(at);return[u(N)/dt,at+(1-_(N))/dt]}function Us(){return(0,M.c)(wl).scale(103.74)}Mu.invert=function(tt,at){at>Oo?at=Oo:at<-1.790857183&&(at=-1.790857183);var dt,N=at;do{var W=N*N;N-=dt=(N*(Po+W*W*(_l+W*(Ea+cs*W)))-at)/(Il+W*W*(tc+W*($l+ws*W)))}while(k(dt)>c);return[tt,N]},wl.invert=function(tt,at){if(k(at)<c)return[tt,0];var dt,N=tt*tt+at*at,W=.5*at,H=10;do{var C=f(W),G=1/_(W),Q=N-2*at*W+W*W;W-=dt=(C*Q+2*(W-at))/(2+Q*G*G+2*(W-at)*C)}while(k(dt)>c&&--H>0);return C=f(W),[(k(at)<k(W+1/C)?E(tt*C):s(at)*s(tt)*(P(k(tt*C))+m))/u(W),W]};var sl=e(13696),ll=e(27284);function ul(tt,at){return[tt[0]*at[0]+tt[1]*at[3],tt[0]*at[1]+tt[1]*at[4],tt[0]*at[2]+tt[1]*at[5]+tt[2],tt[3]*at[0]+tt[4]*at[3],tt[3]*at[1]+tt[4]*at[4],tt[3]*at[2]+tt[4]*at[5]+tt[5]]}function Pl(tt,at){return[tt[0]-at[0],tt[1]-at[1]]}function eu(tt){return I(tt[0]*tt[0]+tt[1]*tt[1])}function Di(tt,at,dt){function N(G,Q){var oe,de=at(G,Q),Ae=de.project([G*S,Q*S]);return(oe=de.transform)?[oe[0]*Ae[0]+oe[1]*Ae[1]+oe[2],-(oe[3]*Ae[0]+oe[4]*Ae[1]+oe[5])]:(Ae[1]=-Ae[1],Ae)}function W(G,Q){var st,mt,oe=G.project.invert,de=G.transform,Ae=Q;if(de&&(Ae=[(de=[(mt=1/((st=de)[0]*st[4]-st[1]*st[3]))*st[4],-mt*st[1],mt*(st[1]*st[5]-st[2]*st[4]),-mt*st[3],mt*st[0],mt*(st[2]*st[3]-st[0]*st[5])])[0]*Ae[0]+de[1]*Ae[1]+de[2],de[3]*Ae[0]+de[4]*Ae[1]+de[5]]),oe&&G===function(st){return at(st[0]*w,st[1]*w)}(De=oe(Ae)))return De;for(var De,je=G.children,Ye=0,Ke=je&&je.length;Ye<Ke;++Ye)if(De=W(je[Ye],Q))return De}(function G(Q,oe){if(Q.edges=function(It){for(var qt=It.length,Ft=[],on=It[qt-1],Qt=0;Qt<qt;++Qt)Ft.push([on,on=It[Qt]]);return Ft}(Q.face),oe.face){var de=Q.shared=function(It,qt){for(var Ft,on,Qt=It.length,Kt=null,kn=0;kn<Qt;++kn){Ft=It[kn];for(var En=qt.length;--En>=0;)if(Ft[0]===(on=qt[En])[0]&&Ft[1]===on[1]){if(Kt)return[Kt,Ft];Kt=Ft}}}(Q.face,oe.face),Ae=(Ke=de.map(oe.project),st=de.map(Q.project),mt=Pl(Ke[1],Ke[0]),xt=Pl(st[1],st[0]),Et=T((It=mt)[0]*(qt=xt)[1]-It[1]*qt[0],It[0]*qt[0]+It[1]*qt[1]),Dt=eu(mt)/eu(xt),ul([1,0,Ke[0][0],0,1,Ke[0][1]],ul([Dt,0,0,0,Dt,0],ul([_(Et),u(Et),0,-u(Et),_(Et),0],[1,0,-st[0][0],0,1,-st[0][1]]))));Q.transform=oe.transform?ul(oe.transform,Ae):Ae;for(var De=oe.edges,je=0,Ye=De.length;je<Ye;++je)Wa(de[0],De[je][1])&&Wa(de[1],De[je][0])&&(De[je]=Q),Wa(de[0],De[je][0])&&Wa(de[1],De[je][1])&&(De[je]=Q);for(je=0,Ye=(De=Q.edges).length;je<Ye;++je)Wa(de[0],De[je][0])&&Wa(de[1],De[je][1])&&(De[je]=oe),Wa(de[0],De[je][1])&&Wa(de[1],De[je][0])&&(De[je]=oe)}else Q.transform=oe.transform;var It,qt,Ke,st,mt,xt,Et,Dt;return Q.children&&Q.children.forEach(function(It){G(It,Q)}),Q})(tt,{transform:null}),Xo(tt)&&(N.invert=function(G,Q){var oe=W(tt,[G,-Q]);return oe&&(oe[0]*=w,oe[1]*=w,oe)});var H=(0,M.c)(N),C=H.stream;return H.stream=function(G){var Q=H.rotate(),oe=C(G),de=(H.rotate([0,0]),C(G));return H.rotate(Q),oe.sphere=function(){de.polygonStart(),de.lineStart(),Vs(de,tt),de.lineEnd(),de.polygonEnd()},oe},H.angle(null==dt?-30:dt*S)}function Vs(tt,at,dt){var N,W,H=at.edges,C=H.length,G={type:"MultiPoint",coordinates:at.face},Q=at.face.filter(function(Ke){return 90!==k(Ke[1])}),oe=(0,sl.c)({type:"MultiPoint",coordinates:Q}),de=!1,Ae=-1,De=oe[1][0]-oe[0][0],je=180===De||360===De?[(oe[0][0]+oe[1][0])/2,(oe[0][1]+oe[1][1])/2]:(0,Ze.c)(G);if(dt)for(;++Ae<C&&H[Ae]!==dt;);++Ae;for(var Ye=0;Ye<C;++Ye)W=H[(Ye+Ae)%C],Array.isArray(W)?(de||(tt.point((N=(0,ll.c)(W[0],je)(c))[0],N[1]),de=!0),tt.point((N=(0,ll.c)(W[1],je)(c))[0],N[1])):(de=!1,W!==dt&&Vs(tt,W,at))}function Wa(tt,at){return tt&&at&&tt[0]===at[0]&&tt[1]===at[1]}function Xo(tt){return tt.project.invert||tt.children&&tt.children.some(Xo)}var Ai=e(53285),Ii=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Ro=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(tt){return tt.map(function(at){return Ii[at]})});function Gs(tt){tt=tt||function(dt){var N=(0,Ze.c)({type:"MultiPoint",coordinates:dt});return(0,Ai.c)().scale(1).translate([0,0]).rotate([-N[0],-N[1]])};var at=Ro.map(function(dt){return{face:dt,project:tt(dt)}});return[-1,0,0,1,0,1,4,5].forEach(function(dt,N){var W=at[dt];W&&(W.children||(W.children=[])).push(at[N])}),Di(at[0],function(dt,N){return at[dt<-d/2?N<0?6:4:dt<0?N<0?2:0:dt<d/2?N<0?3:1:N<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var Tl=2/I(3);function Ol(tt,at){var dt=Pt(tt,at);return[dt[0]*Tl,dt[1]]}function kl(tt){tt=tt||function(dt){var N=(0,Ze.c)({type:"MultiPoint",coordinates:dt});return(0,M.c)(Ol).translate([0,0]).scale(1).rotate(N[1]>0?[-N[0],0]:[180-N[0],180])};var at=Ro.map(function(dt){return{face:dt,project:tt(dt)}});return[-1,0,0,1,0,1,4,5].forEach(function(dt,N){var W=at[dt];W&&(W.children||(W.children=[])).push(at[N])}),Di(at[0],function(dt,N){return at[dt<-d/2?N<0?6:4:dt<0?N<0?2:0:dt<d/2?N<0?3:1:N<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function tu(tt){tt=tt||function(H){var C=6===H.length?(0,Ze.c)({type:"MultiPoint",coordinates:H}):H[0];return(0,Ai.c)().scale(1).translate([0,0]).rotate([-C[0],-C[1]])};var at=Ro.map(function(H){for(var C,G=H.map(cl),Q=G.length,oe=G[Q-1],de=[],Ae=0;Ae<Q;++Ae)de.push(Ts([.9486832980505138*oe[0]+.31622776601683794*(C=G[Ae])[0],.9486832980505138*oe[1]+.31622776601683794*C[1],.9486832980505138*oe[2]+.31622776601683794*C[2]]),Ts([.9486832980505138*C[0]+.31622776601683794*oe[0],.9486832980505138*C[1]+.31622776601683794*oe[1],.9486832980505138*C[2]+.31622776601683794*oe[2]])),oe=C;return de}),dt=[],N=[-1,0,0,1,0,1,4,5];at.forEach(function(H,C){for(var G,Q,oe=Ro[C],de=oe.length,Ae=dt[C]=[],De=0;De<de;++De)at.push([oe[De],H[(2*De+2)%(2*de)],H[(2*De+1)%(2*de)]]),N.push(C),Ae.push((G=cl(H[(2*De+2)%(2*de)]),Q=cl(H[(2*De+1)%(2*de)]),[G[1]*Q[2]-G[2]*Q[1],G[2]*Q[0]-G[0]*Q[2],G[0]*Q[1]-G[1]*Q[0]]))});var W=at.map(function(H){return{project:tt(H),face:H}});return N.forEach(function(H,C){var G=W[H];G&&(G.children||(G.children=[])).push(W[C])}),Di(W[0],function(H,C){var G=_(C),Q=[G*_(H),G*u(H),u(C)],oe=H<-d/2?C<0?6:4:H<0?C<0?2:0:H<d/2?C<0?3:1:C<0?7:5,de=dt[oe];return W[xo(de[0],Q)<0?8+3*oe:xo(de[1],Q)<0?8+3*oe+1:xo(de[2],Q)<0?8+3*oe+2:oe]}).angle(-30).scale(110.625).center([0,45])}function xo(tt,at){for(var dt=0,N=tt.length,W=0;dt<N;++dt)W+=tt[dt]*at[dt];return W}function Ts(tt){return[T(tt[1],tt[0])*S,E(i(-1,r(1,tt[2])))*S]}function cl(tt){var at=tt[0]*w,dt=tt[1]*w,N=_(dt);return[N*_(at),N*u(at),u(dt)]}function $a(){}function Al(tt,at){var dt,N=at.stream;if(!N)throw new Error("invalid projection");switch(tt&&tt.type){case"Feature":dt=Ra;break;case"FeatureCollection":dt=bo;break;default:dt=ja}return dt(tt,N)}function bo(tt,at){return{type:"FeatureCollection",features:tt.features.map(function(dt){return Ra(dt,at)})}}function Ra(tt,at){return{type:"Feature",id:tt.id,properties:tt.properties,geometry:ja(tt.geometry,at)}}function ja(tt,at){if(!tt)return null;if("GeometryCollection"===tt.type)return W=at,{type:"GeometryCollection",geometries:tt.geometries.map(function(H){return ja(H,W)})};var W,dt;switch(tt.type){case"Point":case"MultiPoint":dt=ks;break;case"LineString":case"MultiLineString":dt=fl;break;case"Polygon":case"MultiPolygon":case"Sphere":dt=Qa;break;default:return null}return(0,vn.c)(tt,at(dt)),dt.result()}Ol.invert=function(tt,at){return Pt.invert(tt/Tl,at)};var Bi=[],Da=[],ks={point:function(tt,at){Bi.push([tt,at])},result:function(){var tt=Bi.length?Bi.length<2?{type:"Point",coordinates:Bi[0]}:{type:"MultiPoint",coordinates:Bi}:null;return Bi=[],tt}},fl={lineStart:$a,point:function(tt,at){Bi.push([tt,at])},lineEnd:function(){Bi.length&&(Da.push(Bi),Bi=[])},result:function(){var tt=Da.length?Da.length<2?{type:"LineString",coordinates:Da[0]}:{type:"MultiLineString",coordinates:Da}:null;return Da=[],tt}},Qa={polygonStart:$a,lineStart:$a,point:function(tt,at){Bi.push([tt,at])},lineEnd:function(){var tt=Bi.length;if(tt){do{Bi.push(Bi[0].slice())}while(++tt<4);Da.push(Bi),Bi=[]}},polygonEnd:$a,result:function(){if(!Da.length)return null;var tt=[],at=[];return Da.forEach(function(dt){!function(N){if((W=N.length)<4)return!1;for(var W,H=0,C=N[W-1][1]*N[0][0]-N[W-1][0]*N[0][1];++H<W;)C+=N[H-1][1]*N[H][0]-N[H-1][0]*N[H][1];return C<=0}(dt)?at.push(dt):tt.push([dt])}),at.forEach(function(dt){var N=dt[0];tt.some(function(W){if(function(H,C){for(var G=C[0],Q=C[1],oe=!1,de=0,Ae=H.length,De=Ae-1;de<Ae;De=de++){var je=H[de],Ye=je[0],Ke=je[1],st=H[De],xt=st[1];Ke>Q^xt>Q&&G<(st[0]-Ye)*(Q-Ke)/(xt-Ke)+Ye&&(oe=!oe)}return oe}(W[0],N))return W.push(dt),!0})||tt.push([dt])}),Da=[],tt.length?tt.length>1?{type:"MultiPolygon",coordinates:tt}:{type:"Polygon",coordinates:tt[0]}:null}};function Hs(tt){var at=tt(m,0)[0]-tt(-m,0)[0];function dt(N,W){var H=k(N)<m,C=tt(H?N:N>0?N-d:N+d,W),G=(C[0]-C[1])*x,Q=(C[0]+C[1])*x;if(H)return[G,Q];var oe=at*x,de=G>0^Q>0?-1:1;return[de*G-s(Q)*oe,de*Q-s(G)*oe]}return tt.invert&&(dt.invert=function(N,W){var H=(N+W)*x,C=(W-N)*x,G=k(H)<.5*at&&k(C)<.5*at;if(!G){var Q=at*x,oe=H>0^C>0?-1:1,de=-oe*N+(C>0?1:-1)*Q,Ae=-oe*W+(H>0?1:-1)*Q;H=(-de-Ae)*x,C=(de-Ae)*x}var De=tt.invert(H,C);return G||(De[0]+=H>0?d:-d),De}),(0,M.c)(dt).rotate([-90,-90,45]).clipAngle(179.999)}function eo(){return Hs($n).scale(176.423)}function Ml(){return Hs(Sn).scale(111.48)}function fs(tt,at){if(!(0<=(at=+at)&&at<=20))throw new Error("invalid digits");function dt(oe){var de=oe.length,Ae=2,De=new Array(de);for(De[0]=+oe[0].toFixed(at),De[1]=+oe[1].toFixed(at);Ae<de;)De[Ae]=oe[Ae],++Ae;return De}function N(oe){return oe.map(dt)}function W(oe){for(var de=dt(oe[0]),Ae=[de],De=1;De<oe.length;De++){var je=dt(oe[De]);(je.length>2||je[0]!=de[0]||je[1]!=de[1])&&(Ae.push(je),de=je)}return 1===Ae.length&&oe.length>1&&Ae.push(dt(oe[oe.length-1])),Ae}function H(oe){return oe.map(W)}function C(oe){if(null==oe)return oe;var de;switch(oe.type){case"GeometryCollection":de={type:"GeometryCollection",geometries:oe.geometries.map(C)};break;case"Point":de={type:"Point",coordinates:dt(oe.coordinates)};break;case"MultiPoint":de={type:oe.type,coordinates:N(oe.coordinates)};break;case"LineString":de={type:oe.type,coordinates:W(oe.coordinates)};break;case"MultiLineString":case"Polygon":de={type:oe.type,coordinates:H(oe.coordinates)};break;case"MultiPolygon":de={type:"MultiPolygon",coordinates:oe.coordinates.map(H)};break;default:return oe}return null!=oe.bbox&&(de.bbox=oe.bbox),de}function G(oe){var de={type:"Feature",properties:oe.properties,geometry:C(oe.geometry)};return null!=oe.id&&(de.id=oe.id),null!=oe.bbox&&(de.bbox=oe.bbox),de}if(null!=tt)switch(tt.type){case"Feature":return G(tt);case"FeatureCollection":var Q={type:"FeatureCollection",features:tt.features.map(G)};return null!=tt.bbox&&(Q.bbox=tt.bbox),Q;default:return C(tt)}return tt}function _o(tt){var at=u(tt);function dt(N,W){var H=at?f(N*at/2)/at:N/2;if(!W)return[2*H,-tt];var C=2*o(H*u(W)),G=1/f(W);return[u(C)*G,W+(1-_(C))*G-tt]}return dt.invert=function(N,W){if(k(W+=tt)<c)return[at?2*o(at*N/2)/at:N,0];var H,C=N*N+W*W,G=0,Q=10;do{var oe=f(G),de=1/_(G),Ae=C-2*W*G+G*G;G-=H=(oe*Ae+2*(G-W))/(2+Ae*de*de+2*(G-W)*oe)}while(k(H)>c&&--Q>0);var De=N*(oe=f(G)),je=f(k(W)<k(G+1/oe)?.5*E(De):.5*P(De)+d/4)/u(G);return[at?2*o(at*je)/at:2*je,G]},dt}function Ko(){return Pe(_o).scale(131.215)}var qi=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function Do(tt,at){var dt,N=r(18,36*k(at)/d),W=l(N),H=N-W,C=(dt=qi[W])[0],G=dt[1],Q=(dt=qi[++W])[0],oe=dt[1],de=(dt=qi[r(19,++W)])[0],Ae=dt[1];return[tt*(Q+H*(de-C)/2+H*H*(de-2*Q+C)/2),(at>0?m:-m)*(oe+H*(Ae-G)/2+H*H*(Ae-2*oe+G)/2)]}function Hr(){return(0,M.c)(Do).scale(152.63)}function qs(tt,at){var dt=function(C){function G(Q,oe){var de=_(oe),Ae=(C-1)/(C-de*_(Q));return[Ae*de*u(Q),Ae*u(oe)]}return G.invert=function(Q,oe){var de=Q*Q+oe*oe,Ae=I(de),De=(C-I(1-de*(C+1)/(C-1)))/((C-1)/Ae+Ae/(C-1));return[T(Q*De,Ae*I(1-De*De)),Ae?E(oe*De/Ae):0]},G}(tt);if(!at)return dt;var N=_(at),W=u(at);function H(C,G){var Q=dt(C,G),oe=Q[1],de=oe*W/(tt-1)+N;return[Q[0]*N/de,oe/de]}return H.invert=function(C,G){var Q=(tt-1)/(tt-1-G*W);return dt.invert(Q*C,Q*G*N)},H}function nu(){var tt=2,at=0,dt=(0,M.U)(qs),N=dt(tt,at);return N.distance=function(W){return arguments.length?dt(tt=+W,at):tt},N.tilt=function(W){return arguments.length?dt(tt,at=W*w):at*S},N.scale(432.147).clipAngle(P(1/tt)*S-1e-6)}qi.forEach(function(tt){tt[1]*=1.0144}),Do.invert=function(tt,at){var dt=at/m,N=90*dt,W=r(18,k(N/5)),H=i(0,l(W));do{var C=qi[H][1],G=qi[H+1][1],Q=qi[r(19,H+2)][1],oe=Q-C,de=Q-2*G+C,Ae=2*(k(dt)-G)/oe,De=de/oe,je=Ae*(1-De*Ae*(1-2*De*Ae));if(je>=0||1===H){N=(at>=0?5:-5)*(je+W);var Ye,Ke=50;do{je=(W=r(18,k(N)/5))-(H=l(W)),C=qi[H][1],G=qi[H+1][1],Q=qi[r(19,H+2)][1],N-=(Ye=(at>=0?m:-m)*(G+je*(Q-C)/2+je*je*(Q-2*G+C)/2)-at)*S}while(k(Ye)>y&&--Ke>0);break}}while(--H>=0);var st=qi[H][0],mt=qi[H+1][0],xt=qi[r(19,H+2)][0];return[tt/(mt+je*(xt-st)/2+je*je*(xt-2*mt+st)/2),N*w]};var hs=1e-4,Ws=1e4,hl=-180,zo=hl+hs,Or=180,ru=Or-hs,ds=-90,za=ds+hs,Ys=90,wo=Ys-hs;function Jo(tt){return tt.length>0}function Ya(tt){return tt===ds||tt===Ys?[0,tt]:[hl,(at=tt,Math.floor(at*Ws)/Ws)];var at}function $o(tt){var at=tt[0],dt=tt[1],N=!1;return at<=zo?(at=hl,N=!0):at>=ru&&(at=Or,N=!0),dt<=za?(dt=ds,N=!0):dt>=wo&&(dt=Ys,N=!0),N?[at,dt]:tt}function Qo(tt){return tt.map($o)}function As(tt,at,dt){for(var N=0,W=tt.length;N<W;++N){var H=tt[N].slice();dt.push({index:-1,polygon:at,ring:H});for(var C=0,G=H.length;C<G;++C){var Q=H[C],oe=Q[0],de=Q[1];if(oe<=zo||oe>=ru||de<=za||de>=wo){H[C]=$o(Q);for(var Ae=C+1;Ae<G;++Ae){var De=H[Ae],je=De[0],Ye=De[1];if(je>zo&&je<ru&&Ye>za&&Ye<wo)break}if(Ae===C+1)continue;if(C){var Ke={index:-1,polygon:at,ring:H.slice(0,C+1)};Ke.ring[Ke.ring.length-1]=Ya(de),dt[dt.length-1]=Ke}else dt.pop();if(Ae>=G)break;dt.push({index:-1,polygon:at,ring:H=H.slice(Ae-1)}),H[0]=Ya(H[0][1]),C=-1,G=H.length}}}}function dl(tt){var at,dt,N,W,H,C,G=tt.length,Q={},oe={};for(at=0;at<G;++at)(N=(dt=tt[at]).ring[0])[0]!==(H=dt.ring[dt.ring.length-1])[0]||N[1]!==H[1]?(dt.index=at,Q[N]=oe[H]=dt):(dt.polygon.push(dt.ring),tt[at]=null);for(at=0;at<G;++at)if(dt=tt[at]){if(W=oe[N=dt.ring[0]],C=Q[H=dt.ring[dt.ring.length-1]],delete Q[N],delete oe[H],N[0]===H[0]&&N[1]===H[1]){dt.polygon.push(dt.ring);continue}W?(delete oe[N],delete Q[W.ring[0]],W.ring.pop(),tt[W.index]=null,dt={index:-1,polygon:W.polygon,ring:W.ring.concat(dt.ring)},W===C?dt.polygon.push(dt.ring):(dt.index=G++,tt.push(Q[dt.ring[0]]=oe[dt.ring[dt.ring.length-1]]=dt))):C?(delete Q[H],delete oe[C.ring[C.ring.length-1]],dt.ring.pop(),dt={index:G++,polygon:C.polygon,ring:dt.ring.concat(C.ring)},tt[C.index]=null,tt.push(Q[dt.ring[0]]=oe[dt.ring[dt.ring.length-1]]=dt)):(dt.ring.push(dt.ring[0]),dt.polygon.push(dt.ring))}}function Ms(tt){var at={type:"Feature",geometry:Mi(tt.geometry)};return null!=tt.id&&(at.id=tt.id),null!=tt.bbox&&(at.bbox=tt.bbox),null!=tt.properties&&(at.properties=tt.properties),at}function Mi(tt){if(null==tt)return tt;var at,dt,N,W;switch(tt.type){case"GeometryCollection":at={type:"GeometryCollection",geometries:tt.geometries.map(Mi)};break;case"Point":at={type:"Point",coordinates:$o(tt.coordinates)};break;case"MultiPoint":case"LineString":at={type:tt.type,coordinates:Qo(tt.coordinates)};break;case"MultiLineString":at={type:"MultiLineString",coordinates:tt.coordinates.map(Qo)};break;case"Polygon":var H=[];As(tt.coordinates,H,dt=[]),dl(dt),at={type:"Polygon",coordinates:H};break;case"MultiPolygon":dt=[],N=-1,W=tt.coordinates.length;for(var C=new Array(W);++N<W;)As(tt.coordinates[N],C[N]=[],dt);dl(dt),at={type:"MultiPolygon",coordinates:C.filter(Jo)};break;default:return tt}return null!=tt.bbox&&(at.bbox=tt.bbox),at}function Aa(tt){if(null==tt)return tt;switch(tt.type){case"Feature":return Ms(tt);case"FeatureCollection":var at={type:"FeatureCollection",features:tt.features.map(Ms)};return null!=tt.bbox&&(at.bbox=tt.bbox),at;default:return Mi(tt)}}function ho(tt,at){var dt=f(at/2),N=u(g*dt);return[tt*(.74482-.34588*N*N),1.70711*dt]}function Ss(){return(0,M.c)(ho).scale(146.153)}function Ma(tt,at,dt){var N=(0,ll.c)(at,dt),W=N(.5),H=(0,nt.c)([-W[0],-W[1]])(at),C=N.distance/2,G=-E(u(H[1]*w)/u(C)),Q=[-W[0],-W[1],-(H[0]>0?d-G:G)*S],oe=(0,M.c)(tt(C)).rotate(Q),de=(0,nt.c)(Q),Ae=oe.center;return delete oe.rotate,oe.center=function(De){return arguments.length?Ae(de(De)):de.invert(Ae())},oe.clipAngle(90)}function Sl(tt){var at=_(tt);function dt(N,W){var H=(0,Ai.Y)(N,W);return H[0]*=at,H}return dt.invert=function(N,W){return Ai.Y.invert(N/at,W)},dt}function Rl(){return to([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function to(tt,at){return Ma(Sl,tt,at)}function bi(tt){if(!(tt*=2))return X.O;var at=-tt/2,dt=-at,N=tt*tt,W=f(dt),H=.5/u(dt);function C(G,Q){var oe=P(_(Q)*_(G-at)),de=P(_(Q)*_(G-dt));return[((oe*=oe)-(de*=de))/(2*tt),(Q<0?-1:1)*I(4*N*de-(N-oe+de)*(N-oe+de))/(2*tt)]}return C.invert=function(G,Q){var oe,de,Ae=Q*Q,De=_(I(Ae+(oe=G+at)*oe)),je=_(I(Ae+(oe=G+dt)*oe));return[T(de=De-je,oe=(De+je)*W),(Q<0?-1:1)*P(I(oe*oe+de*de)*H)]},C}function ps(){return Es([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function Es(tt,at){return Ma(bi,tt,at)}function es(tt,at){if(k(at)<c)return[tt,0];var dt=k(at/m),N=E(dt);if(k(tt)<c||k(k(at)-m)<c)return[0,s(at)*d*f(N/2)];var W=_(N),H=k(d/tt-tt/d)/2,C=H*H,G=W/(dt+W-1),Q=G*(2/dt-1),oe=Q*Q,de=oe+C,Ae=G-oe,De=C+G;return[s(tt)*d*(H*Ae+I(C*Ae*Ae-de*(G*G-oe)))/de,s(at)*d*(Q*De-H*I((C+1)*de-De*De))/de]}function Cs(){return(0,M.c)(es).scale(79.4183)}function El(tt,at){if(k(at)<c)return[tt,0];var dt=k(at/m),N=E(dt);if(k(tt)<c||k(k(at)-m)<c)return[0,s(at)*d*f(N/2)];var W=_(N),H=k(d/tt-tt/d)/2,C=H*H,G=W*(I(1+C)-H*W)/(1+C*dt*dt);return[s(tt)*d*G,s(at)*d*I(1-G*(2*H+G))]}function ts(){return(0,M.c)(El).scale(79.4183)}function Ji(tt,at){if(k(at)<c)return[tt,0];var dt=at/m,N=E(dt);if(k(tt)<c||k(k(at)-m)<c)return[0,d*f(N/2)];var W=(d/tt-tt/d)/2,H=dt/(1+_(N));return[d*(s(tt)*I(W*W+1-H*H)-W),d*H]}function pl(){return(0,M.c)(Ji).scale(79.4183)}function Vr(tt,at){if(!at)return[tt,0];var dt=k(at);if(!tt||dt===m)return[0,at];var N=dt/m,W=N*N,H=(8*N-W*(W+2)-5)/(2*W*(N-1)),C=H*H,G=N*H,Q=W+C+2*G,oe=N+3*H,de=tt/m,Ae=de+1/de,De=s(k(tt)-m)*I(Ae*Ae-4),je=De*De,Ye=(De*(Q+C-1)+2*I(Q*(W+C*je-1)+(1-W)*(W*(oe*oe+4*C)+12*G*C+4*C*C)))/(4*Q+je);return[s(tt)*m*Ye,s(at)*m*I(1+De*k(Ye)-Ye*Ye)]}function Yr(){return(0,M.c)(Vr).scale(127.16)}function To(tt,at,dt,N){var W=d/3;tt=i(tt,c),at=i(at,c),tt=r(tt,m),at=r(at,d-c),dt=i(dt,0),dt=r(dt,100-c);var H=(N=i(N,c))/100,C=P((dt/100+1)*_(W))/W,G=u(tt)/u(C*m),Q=at/d,oe=I(H*u(tt/2)/u(at/2));return function(de,Ae,De,je,Ye){function Ke(st,mt){var xt=De*u(je*mt),Et=I(1-xt*xt),Dt=I(2/(1+Et*_(st*=Ye)));return[de*Et*Dt*u(st),Ae*xt*Dt]}return Ke.invert=function(st,mt){var xt=st/de,Et=mt/Ae,Dt=I(xt*xt+Et*Et),It=2*E(Dt/2);return[T(st*f(It),de*Dt)/Ye,Dt&&E(mt*u(It)/(Ae*De*Dt))/je]},Ke}(oe/I(Q*G*C),1/(oe*I(Q*G*C)),G,C,Q)}function Fo(){var tt=65*w,at=60*w,dt=20,N=200,W=(0,M.U)(To),H=W(tt,at,dt,N);return H.poleline=function(C){return arguments.length?W(tt=+C*w,at,dt,N):tt*S},H.parallels=function(C){return arguments.length?W(tt,at=+C*w,dt,N):at*S},H.inflation=function(C){return arguments.length?W(tt,at,dt=+C,N):dt},H.ratio=function(C){return arguments.length?W(tt,at,dt,N=+C):N},H.scale(163.775)}function Bo(){return Fo().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}ho.invert=function(tt,at){var dt=at/1.70711,N=u(g*dt);return[tt/(.74482-.34588*N*N),2*o(dt)]},es.invert=function(tt,at){if(k(at)<c)return[tt,0];if(k(tt)<c)return[0,m*u(2*o(at/d))];var dt=(tt/=d)*tt,N=(at/=d)*at,W=dt+N,H=W*W,C=-k(at)*(1+W),G=C-2*N+dt,Q=-2*C+1+2*N+H,oe=N/Q+(2*G*G*G/(Q*Q*Q)-9*C*G/(Q*Q))/27,de=(C-G*G/(3*Q))/Q,Ae=2*I(-de/3),De=P(3*oe/(de*Ae))/3;return[d*(W-1+I(1+2*(dt-N)+H))/(2*tt),s(at)*d*(-Ae*_(De+d/3)-G/(3*Q))]},El.invert=function(tt,at){if(!tt)return[0,m*u(2*o(at/d))];var dt=k(tt/d),N=(1-dt*dt-(at/=d)*at)/(2*dt),W=I(N*N+1);return[s(tt)*d*(W-N),s(at)*m*u(2*T(I((1-2*N*dt)*(N+W)-dt),I(W+N+dt)))]},Ji.invert=function(tt,at){if(!at)return[tt,0];var dt=at/d,N=(d*d*(1-dt*dt)-tt*tt)/(2*d*tt);return[tt?d*(s(tt)*I(N*N+1)-N):0,m*u(2*o(dt))]},Vr.invert=function(tt,at){var dt;if(!tt||!at)return[tt,at];at/=d;var N=s(tt)*tt/m,W=(N*N-1+4*at*at)/k(N),H=W*W,C=2*at,G=50;do{var Q=C*C,oe=(8*C-Q*(Q+2)-5)/(2*Q*(C-1)),de=(3*C-Q*C-10)/(2*Q*C),Ae=oe*oe,De=C*oe,je=C+oe,Ye=je*je,Ke=C+3*oe,st=-2*je*(4*De*Ae+(1-4*Q+3*Q*Q)*(1+de)+Ae*(14*Q-6-H+(8*Q-8-2*H)*de)+De*(12*Q-8+(10*Q-10-H)*de)),mt=I(Ye*(Q+Ae*H-1)+(1-Q)*(Q*(Ke*Ke+4*Ae)+Ae*(12*De+4*Ae)));C-=dt=(W*(Ye+Ae-1)+2*mt-N*(4*Ye+H))/(W*(2*oe*de+2*je*(1+de))+st/mt-8*je*(W*(-1+Ae+Ye)+2*mt)*(1+de)/(H+4*Ye))}while(dt>c&&--G>0);return[s(tt)*(I(W*W+4)+W)*d/4,m*C]};var ya=4*d+3*I(3),fi=2*I(2*d*I(3)/ya),Hi=be(fi*I(3)/d,fi,ya/6);function Su(){return(0,M.c)(Hi).scale(176.84)}function ko(tt,at){return[tt*I(1-3*at*at/(d*d)),at]}function hi(){return(0,M.c)(ko).scale(152.63)}function Wi(tt,at){var dt=_(at),N=_(tt)*dt,W=1-N,H=_(tt=T(u(tt)*dt,-u(at))),C=u(tt);return[C*(dt=I(1-N*N))-H*W,-H*dt-C*W]}function so(){return(0,M.c)(Wi).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function No(tt,at){var dt=j(tt,at);return[(dt[0]+tt/m)/2,(dt[1]+at)/2]}function Ls(){return(0,M.c)(No).scale(158.837)}ko.invert=function(tt,at){return[tt/I(1-3*at*at/(d*d)),at]},Wi.invert=function(tt,at){var dt=(tt*tt+at*at)/-2,N=I(-dt*(2+dt)),W=at*dt+tt*N,H=tt*dt-at*N,C=I(H*H+W*W);return[T(N*W,C*(1+dt)),C?-E(N*H/C):0]},No.invert=function(tt,at){var dt=tt,N=at,W=25;do{var H,C=_(N),G=u(N),Q=u(2*N),oe=G*G,de=C*C,Ae=u(dt),De=_(dt/2),je=u(dt/2),Ye=je*je,Ke=1-de*De*De,st=Ke?P(C*De)*I(H=1/Ke):H=0,mt=.5*(2*st*C*je+dt/m)-tt,xt=.5*(st*G+N)-at,Et=.5*H*(de*Ye+st*C*De*oe)+.5/m,Dt=H*(Ae*Q/4-st*G*je),It=.125*H*(Q*je-st*G*de*Ae),qt=.5*H*(oe*De+st*Ye*C)+.5,Ft=Dt*It-qt*Et,on=(xt*Dt-mt*qt)/Ft,Qt=(mt*It-xt*Et)/Ft;dt-=on,N-=Qt}while((k(on)>c||k(Qt)>c)&&--W>0);return[dt,N]}},88728:function(ne,F,e){"use strict";function M(){return new k}function k(){this.reset()}e.d(F,{c:function(){return M}}),k.prototype={constructor:k,reset:function(){this.s=this.t=0},add:function(_){T(o,_,this.t),T(this,o.s,this.s),this.s?this.t+=o.t:this.s=o.t},valueOf:function(){return this.s}};var o=new k;function T(_,p,l){var t=_.s=p+l,i=t-p;_.t=p-(t-i)+(l-i)}},95384:function(ne,F,e){"use strict";e.d(F,{cp:function(){return y},mQ:function(){return r},oB:function(){return a}});var M,k,o,T,_,p=e(88728),l=e(64528),t=e(70932),i=e(16016),r=(0,p.c)(),n=(0,p.c)(),a={point:t.c,lineStart:t.c,lineEnd:t.c,polygonStart:function(){r.reset(),a.lineStart=s,a.lineEnd=u},polygonEnd:function(){var d=+r;n.add(d<0?l.kD+d:d),this.lineStart=this.lineEnd=this.point=t.c},sphere:function(){n.add(l.kD)}};function s(){a.point=f}function u(){c(M,k)}function f(d,m){a.point=c,M=d,k=m,o=d*=l.qw,T=(0,l.W8)(m=(m*=l.qw)/2+l.wL),_=(0,l.g$)(m)}function c(d,m){m=(m*=l.qw)/2+l.wL;var g=(d*=l.qw)-o,x=g>=0?1:-1,v=x*g,b=(0,l.W8)(m),h=(0,l.g$)(m),S=_*h,w=T*b+S*(0,l.W8)(v),E=S*x*(0,l.g$)(v);r.add((0,l.WE)(E,w)),o=d,T=b,_=h}function y(d){return n.reset(),(0,i.c)(d,a),2*n}},13696:function(ne,F,e){"use strict";e.d(F,{c:function(){return P}});var M,k,o,T,_,p,l,t,i,r,n=e(88728),a=e(95384),s=e(84220),u=e(64528),f=e(16016),c=(0,n.c)(),y={point:d,lineStart:g,lineEnd:x,polygonStart:function(){y.point=v,y.lineStart=b,y.lineEnd=h,c.reset(),a.oB.polygonStart()},polygonEnd:function(){a.oB.polygonEnd(),y.point=d,y.lineStart=g,y.lineEnd=x,a.mQ<0?(M=-(o=180),k=-(T=90)):c>u.Gg?T=90:c<-u.Gg&&(k=-90),r[0]=M,r[1]=o},sphere:function(){M=-(o=180),k=-(T=90)}};function d(I,O){i.push(r=[M=I,o=I]),O<k&&(k=O),O>T&&(T=O)}function m(I,O){var z=(0,s.ux)([I*u.qw,O*u.qw]);if(t){var U=(0,s.CW)(t,z),j=(0,s.CW)([U[1],-U[0],0],U);(0,s.cJ)(j),j=(0,s.G)(j);var Y,B=I-_,V=B>0?1:-1,q=j[0]*u.oh*V,ie=(0,u.a2)(B)>180;ie^(V*_<q&&q<V*I)?(Y=j[1]*u.oh)>T&&(T=Y):ie^(V*_<(q=(q+360)%360-180)&&q<V*I)?(Y=-j[1]*u.oh)<k&&(k=Y):(O<k&&(k=O),O>T&&(T=O)),ie?I<_?S(M,I)>S(M,o)&&(o=I):S(I,o)>S(M,o)&&(M=I):o>=M?(I<M&&(M=I),I>o&&(o=I)):I>_?S(M,I)>S(M,o)&&(o=I):S(I,o)>S(M,o)&&(M=I)}else i.push(r=[M=I,o=I]);O<k&&(k=O),O>T&&(T=O),t=z,_=I}function g(){y.point=m}function x(){r[0]=M,r[1]=o,y.point=d,t=null}function v(I,O){if(t){var z=I-_;c.add((0,u.a2)(z)>180?z+(z>0?360:-360):z)}else p=I,l=O;a.oB.point(I,O),m(I,O)}function b(){a.oB.lineStart()}function h(){v(p,l),a.oB.lineEnd(),(0,u.a2)(c)>u.Gg&&(M=-(o=180)),r[0]=M,r[1]=o,t=null}function S(I,O){return(O-=I)<0?O+360:O}function w(I,O){return I[0]-O[0]}function E(I,O){return I[0]<=I[1]?I[0]<=O&&O<=I[1]:O<I[0]||I[1]<O}function P(I){var O,z,U,R,j,Y,B;if(T=o=-(M=k=1/0),i=[],(0,f.c)(I,y),z=i.length){for(i.sort(w),O=1,j=[U=i[0]];O<z;++O)E(U,(R=i[O])[0])||E(U,R[1])?(S(U[0],R[1])>S(U[0],U[1])&&(U[1]=R[1]),S(R[0],U[1])>S(U[0],U[1])&&(U[0]=R[0])):j.push(U=R);for(Y=-1/0,O=0,U=j[z=j.length-1];O<=z;U=R,++O)(B=S(U[1],(R=j[O])[0]))>Y&&(Y=B,M=R[0],o=U[1])}return i=r=null,M===1/0||k===1/0?[[NaN,NaN],[NaN,NaN]]:[[M,k],[o,T]]}},84220:function(ne,F,e){"use strict";e.d(F,{CW:function(){return _},Ez:function(){return T},G:function(){return k},cJ:function(){return t},mg:function(){return p},ux:function(){return o},wx:function(){return l}});var M=e(64528);function k(i){return[(0,M.WE)(i[1],i[0]),(0,M.qR)(i[2])]}function o(i){var r=i[0],n=i[1],a=(0,M.W8)(n);return[a*(0,M.W8)(r),a*(0,M.g$)(r),(0,M.g$)(n)]}function T(i,r){return i[0]*r[0]+i[1]*r[1]+i[2]*r[2]}function _(i,r){return[i[1]*r[2]-i[2]*r[1],i[2]*r[0]-i[0]*r[2],i[0]*r[1]-i[1]*r[0]]}function p(i,r){i[0]+=r[0],i[1]+=r[1],i[2]+=r[2]}function l(i,r){return[i[0]*r,i[1]*r,i[2]*r]}function t(i){var r=(0,M._I)(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);i[0]/=r,i[1]/=r,i[2]/=r}},24052:function(ne,F,e){"use strict";e.d(F,{c:function(){return z}});var M,k,o,T,_,p,l,t,i,r,n,a,s,u,f,c,y=e(64528),d=e(70932),m=e(16016),g={sphere:d.c,point:x,lineStart:b,lineEnd:w,polygonStart:function(){g.lineStart=E,g.lineEnd=P},polygonEnd:function(){g.lineStart=b,g.lineEnd=w}};function x(U,R){U*=y.qw;var j=(0,y.W8)(R*=y.qw);v(j*(0,y.W8)(U),j*(0,y.g$)(U),(0,y.g$)(R))}function v(U,R,j){++M,o+=(U-o)/M,T+=(R-T)/M,_+=(j-_)/M}function b(){g.point=h}function h(U,R){U*=y.qw;var j=(0,y.W8)(R*=y.qw);u=j*(0,y.W8)(U),f=j*(0,y.g$)(U),c=(0,y.g$)(R),g.point=S,v(u,f,c)}function S(U,R){U*=y.qw;var j=(0,y.W8)(R*=y.qw),Y=j*(0,y.W8)(U),B=j*(0,y.g$)(U),V=(0,y.g$)(R),q=(0,y.WE)((0,y._I)((q=f*V-c*B)*q+(q=c*Y-u*V)*q+(q=u*B-f*Y)*q),u*Y+f*B+c*V);k+=q,p+=q*(u+(u=Y)),l+=q*(f+(f=B)),t+=q*(c+(c=V)),v(u,f,c)}function w(){g.point=x}function E(){g.point=I}function P(){O(a,s),g.point=x}function I(U,R){a=U,s=R,U*=y.qw,R*=y.qw,g.point=O;var j=(0,y.W8)(R);u=j*(0,y.W8)(U),f=j*(0,y.g$)(U),c=(0,y.g$)(R),v(u,f,c)}function O(U,R){U*=y.qw;var j=(0,y.W8)(R*=y.qw),Y=j*(0,y.W8)(U),B=j*(0,y.g$)(U),V=(0,y.g$)(R),q=f*V-c*B,ie=c*Y-u*V,te=u*B-f*Y,ee=(0,y._I)(q*q+ie*ie+te*te),$=(0,y.qR)(ee),J=ee&&-$/ee;i+=J*q,r+=J*ie,n+=J*te,k+=$,p+=$*(u+(u=Y)),l+=$*(f+(f=B)),t+=$*(c+(c=V)),v(u,f,c)}function z(U){M=k=o=T=_=p=l=t=i=r=n=0,(0,m.c)(U,g);var R=i,j=r,Y=n,B=R*R+j*j+Y*Y;return B<y.a8&&(R=p,j=l,Y=t,k<y.Gg&&(R=o,j=T,Y=_),(B=R*R+j*j+Y*Y)<y.a8)?[NaN,NaN]:[(0,y.WE)(j,R)*y.oh,(0,y.qR)(Y/(0,y._I)(B))*y.oh]}},61780:function(ne,F,e){"use strict";e.d(F,{Q:function(){return _},c:function(){return l}});var M=e(84220);function k(t){return function(){return t}}var o=e(64528),T=e(92992);function _(t,i,r,n,a,s){if(r){var u=(0,o.W8)(i),f=(0,o.g$)(i),c=n*r;null==a?(a=i+n*o.kD,s=i-c/2):(a=p(u,a),s=p(u,s),(n>0?a<s:a>s)&&(a+=n*o.kD));for(var y,d=a;n>0?d>s:d<s;d-=c)y=(0,M.G)([u,-f*(0,o.W8)(d),-f*(0,o.g$)(d)]),t.point(y[0],y[1])}}function p(t,i){(i=(0,M.ux)(i))[0]-=t,(0,M.cJ)(i);var r=(0,o.mE)(-i[1]);return((-i[2]<0?-r:r)+o.kD-o.Gg)%o.kD}function l(){var t,i,r=k([0,0]),n=k(90),a=k(6),s={point:function(f,c){t.push(f=i(f,c)),f[0]*=o.oh,f[1]*=o.oh}};function u(){var f=r.apply(this,arguments),c=n.apply(this,arguments)*o.qw,y=a.apply(this,arguments)*o.qw;return t=[],i=(0,T.O)(-f[0]*o.qw,-f[1]*o.qw,0).invert,_(s,c,y,1),f={type:"Polygon",coordinates:[t]},t=i=null,f}return u.center=function(f){return arguments.length?(r="function"==typeof f?f:k([+f[0],+f[1]]),u):r},u.radius=function(f){return arguments.length?(n="function"==typeof f?f:k(+f),u):n},u.precision=function(f){return arguments.length?(a="function"==typeof f?f:k(+f),u):a},u}},78284:function(ne,F,e){"use strict";var M=e(14229),k=e(64528);F.c=(0,M.c)(function(){return!0},function(o){var T,_=NaN,p=NaN,l=NaN;return{lineStart:function(){o.lineStart(),T=1},point:function(t,i){var a,s,u,f,c,y,d,r=t>0?k.pi:-k.pi,n=(0,k.a2)(t-_);(0,k.a2)(n-k.pi)<k.Gg?(o.point(_,p=(p+i)/2>0?k.or:-k.or),o.point(l,p),o.lineEnd(),o.lineStart(),o.point(r,p),o.point(t,p),T=0):l!==r&&n>=k.pi&&((0,k.a2)(_-l)<k.Gg&&(_-=l*k.Gg),(0,k.a2)(t-r)<k.Gg&&(t-=r*k.Gg),s=p,f=i,d=(0,k.g$)((a=_)-(u=t)),p=(0,k.a2)(d)>k.Gg?(0,k.MQ)(((0,k.g$)(s)*(y=(0,k.W8)(f))*(0,k.g$)(u)-(0,k.g$)(f)*(c=(0,k.W8)(s))*(0,k.g$)(a))/(c*y*d)):(s+f)/2,o.point(l,p),o.lineEnd(),o.lineStart(),o.point(r,p),T=0),o.point(_=t,p=i),l=r},lineEnd:function(){o.lineEnd(),_=p=NaN},clean:function(){return 2-T}}},function(o,T,_,p){var l;if(null==o)p.point(-k.pi,l=_*k.or),p.point(0,l),p.point(k.pi,l),p.point(k.pi,0),p.point(k.pi,-l),p.point(0,-l),p.point(-k.pi,-l),p.point(-k.pi,0),p.point(-k.pi,l);else if((0,k.a2)(o[0]-T[0])>k.Gg){var t=o[0]<T[0]?k.pi:-k.pi;p.point(-t,l=_*t/2),p.point(0,l),p.point(t,l)}else p.point(T[0],T[1])},[-k.pi,-k.or])},97208:function(ne,F,e){"use strict";e.d(F,{c:function(){return k}});var M=e(70932);function k(){var o,T=[];return{point:function(_,p,l){o.push([_,p,l])},lineStart:function(){T.push(o=[])},lineEnd:M.c,rejoin:function(){T.length>1&&T.push(T.pop().concat(T.shift()))},result:function(){var _=T;return T=[],o=null,_}}}},2728:function(ne,F,e){"use strict";e.d(F,{c:function(){return p}});var M=e(84220),k=e(61780),o=e(64528),T=e(41860),_=e(14229);function p(l){var t=(0,o.W8)(l),i=6*o.qw,r=t>0,n=(0,o.a2)(t)>o.Gg;function a(f,c){return(0,o.W8)(f)*(0,o.W8)(c)>t}function s(f,c,y){var d=(0,M.ux)(f),m=(0,M.ux)(c),g=[1,0,0],x=(0,M.CW)(d,m),v=(0,M.Ez)(x,x),b=x[0],h=v-b*b;if(!h)return!y&&f;var S=t*v/h,w=-t*b/h,E=(0,M.CW)(g,x),P=(0,M.wx)(g,S),I=(0,M.wx)(x,w);(0,M.mg)(P,I);var O=E,z=(0,M.Ez)(P,O),U=(0,M.Ez)(O,O),R=z*z-U*((0,M.Ez)(P,P)-1);if(!(R<0)){var j=(0,o._I)(R),Y=(0,M.wx)(O,(-z-j)/U);if((0,M.mg)(Y,P),Y=(0,M.G)(Y),!y)return Y;var B,V=f[0],q=c[0],ie=f[1],te=c[1];q<V&&(B=V,V=q,q=B);var ee=q-V,$=(0,o.a2)(ee-o.pi)<o.Gg;if(!$&&te<ie&&(B=ie,ie=te,te=B),$||ee<o.Gg?$?ie+te>0^Y[1]<((0,o.a2)(Y[0]-V)<o.Gg?ie:te):ie<=Y[1]&&Y[1]<=te:ee>o.pi^(V<=Y[0]&&Y[0]<=q)){var J=(0,M.wx)(O,(-z+j)/U);return(0,M.mg)(J,P),[Y,(0,M.G)(J)]}}}function u(f,c){var y=r?l:o.pi-l,d=0;return f<-y?d|=1:f>y&&(d|=2),c<-y?d|=4:c>y&&(d|=8),d}return(0,_.c)(a,function(f){var c,y,d,m,g;return{lineStart:function(){m=d=!1,g=1},point:function(x,v){var b,h=[x,v],S=a(x,v),w=r?S?0:u(x,v):S?u(x+(x<0?o.pi:-o.pi),v):0;if(!c&&(m=d=S)&&f.lineStart(),S!==d&&(!(b=s(c,h))||(0,T.c)(c,b)||(0,T.c)(h,b))&&(h[2]=1),S!==d)g=0,S?(f.lineStart(),b=s(h,c),f.point(b[0],b[1])):(b=s(c,h),f.point(b[0],b[1],2),f.lineEnd()),c=b;else if(n&&c&&r^S){var E;w&y||!(E=s(h,c,!0))||(g=0,r?(f.lineStart(),f.point(E[0][0],E[0][1]),f.point(E[1][0],E[1][1]),f.lineEnd()):(f.point(E[1][0],E[1][1]),f.lineEnd(),f.lineStart(),f.point(E[0][0],E[0][1],3)))}!S||c&&(0,T.c)(c,h)||f.point(h[0],h[1]),c=h,d=S,y=w},lineEnd:function(){d&&f.lineEnd(),c=null},clean:function(){return g|(m&&d)<<1}}},function(f,c,y,d){(0,k.Q)(d,l,i,y,f,c)},r?[0,-l]:[-o.pi,l-o.pi])}},14229:function(ne,F,e){"use strict";e.d(F,{c:function(){return p}});var M=e(97208),k=e(32232),o=e(64528),T=e(58196),_=e(84706);function p(i,r,n,a){return function(s){var u,f,c,y=r(s),d=(0,M.c)(),m=r(d),g=!1,x={point:v,lineStart:h,lineEnd:S,polygonStart:function(){x.point=w,x.lineStart=E,x.lineEnd=P,f=[],u=[]},polygonEnd:function(){x.point=v,x.lineStart=h,x.lineEnd=S,f=(0,_.Uf)(f);var I=(0,T.c)(u,a);f.length?(g||(s.polygonStart(),g=!0),(0,k.c)(f,t,I,n,s)):I&&(g||(s.polygonStart(),g=!0),s.lineStart(),n(null,null,1,s),s.lineEnd()),g&&(s.polygonEnd(),g=!1),f=u=null},sphere:function(){s.polygonStart(),s.lineStart(),n(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function v(I,O){i(I,O)&&s.point(I,O)}function b(I,O){y.point(I,O)}function h(){x.point=b,y.lineStart()}function S(){x.point=v,y.lineEnd()}function w(I,O){c.push([I,O]),m.point(I,O)}function E(){m.lineStart(),c=[]}function P(){w(c[0][0],c[0][1]),m.lineEnd();var I,O,z,U,R=m.clean(),j=d.result(),Y=j.length;if(c.pop(),u.push(c),c=null,Y)if(1&R){if((O=(z=j[0]).length-1)>0){for(g||(s.polygonStart(),g=!0),s.lineStart(),I=0;I<O;++I)s.point((U=z[I])[0],U[1]);s.lineEnd()}}else Y>1&&2&R&&j.push(j.pop().concat(j.shift())),f.push(j.filter(l))}return x}}function l(i){return i.length>1}function t(i,r){return((i=i.x)[0]<0?i[1]-o.or-o.Gg:o.or-i[1])-((r=r.x)[0]<0?r[1]-o.or-o.Gg:o.or-r[1])}},21676:function(ne,F,e){"use strict";e.d(F,{c:function(){return l}});var M=e(64528),k=e(97208),o=e(32232),T=e(84706),_=1e9,p=-_;function l(t,i,r,n){function a(y,d){return t<=y&&y<=r&&i<=d&&d<=n}function s(y,d,m,g){var x=0,v=0;if(null==y||(x=u(y,m))!==(v=u(d,m))||c(y,d)<0^m>0)do{g.point(0===x||3===x?t:r,x>1?n:i)}while((x=(x+m+4)%4)!==v);else g.point(d[0],d[1])}function u(y,d){return(0,M.a2)(y[0]-t)<M.Gg?d>0?0:3:(0,M.a2)(y[0]-r)<M.Gg?d>0?2:1:(0,M.a2)(y[1]-i)<M.Gg?d>0?1:0:d>0?3:2}function f(y,d){return c(y.x,d.x)}function c(y,d){var m=u(y,1),g=u(d,1);return m!==g?m-g:0===m?d[1]-y[1]:1===m?y[0]-d[0]:2===m?y[1]-d[1]:d[0]-y[0]}return function(y){var d,m,g,x,v,b,h,S,w,E,P,I=y,O=(0,k.c)(),z={point:U,lineStart:function(){z.point=R,m&&m.push(g=[]),E=!0,w=!1,h=S=NaN},lineEnd:function(){d&&(R(x,v),b&&w&&O.rejoin(),d.push(O.result())),z.point=U,w&&I.lineEnd()},polygonStart:function(){I=O,d=[],m=[],P=!0},polygonEnd:function(){var j=function(){for(var V=0,q=0,ie=m.length;q<ie;++q)for(var te,ee,$=m[q],J=1,X=$.length,ae=$[0],ce=ae[0],le=ae[1];J<X;++J)te=ce,ee=le,ce=(ae=$[J])[0],le=ae[1],ee<=n?le>n&&(ce-te)*(n-ee)>(le-ee)*(t-te)&&++V:le<=n&&(ce-te)*(n-ee)<(le-ee)*(t-te)&&--V;return V}(),Y=P&&j,B=(d=(0,T.Uf)(d)).length;(Y||B)&&(y.polygonStart(),Y&&(y.lineStart(),s(null,null,1,y),y.lineEnd()),B&&(0,o.c)(d,f,j,s,y),y.polygonEnd()),I=y,d=m=g=null}};function U(j,Y){a(j,Y)&&I.point(j,Y)}function R(j,Y){var B=a(j,Y);if(m&&g.push([j,Y]),E)x=j,v=Y,b=B,E=!1,B&&(I.lineStart(),I.point(j,Y));else if(B&&w)I.point(j,Y);else{var V=[h=Math.max(p,Math.min(_,h)),S=Math.max(p,Math.min(_,S))],q=[j=Math.max(p,Math.min(_,j)),Y=Math.max(p,Math.min(_,Y))];!function(ie,te,ee,$,J,X){var ae,ce=ie[0],le=ie[1],pe=0,we=1,Te=te[0]-ce,ye=te[1]-le;if(ae=ee-ce,Te||!(ae>0)){if(ae/=Te,Te<0){if(ae<pe)return;ae<we&&(we=ae)}else if(Te>0){if(ae>we)return;ae>pe&&(pe=ae)}if(ae=J-ce,Te||!(ae<0)){if(ae/=Te,Te<0){if(ae>we)return;ae>pe&&(pe=ae)}else if(Te>0){if(ae<pe)return;ae<we&&(we=ae)}if(ae=$-le,ye||!(ae>0)){if(ae/=ye,ye<0){if(ae<pe)return;ae<we&&(we=ae)}else if(ye>0){if(ae>we)return;ae>pe&&(pe=ae)}if(ae=X-le,ye||!(ae<0)){if(ae/=ye,ye<0){if(ae>we)return;ae>pe&&(pe=ae)}else if(ye>0){if(ae<pe)return;ae<we&&(we=ae)}return pe>0&&(ie[0]=ce+pe*Te,ie[1]=le+pe*ye),we<1&&(te[0]=ce+we*Te,te[1]=le+we*ye),!0}}}}}(V,q,t,i,r,n)?B&&(I.lineStart(),I.point(j,Y),P=!1):(w||(I.lineStart(),I.point(V[0],V[1])),I.point(q[0],q[1]),B||I.lineEnd(),P=!1)}h=j,S=Y,w=B}return z}}},32232:function(ne,F,e){"use strict";e.d(F,{c:function(){return T}});var M=e(41860),k=e(64528);function o(p,l,t,i){this.x=p,this.z=l,this.o=t,this.e=i,this.v=!1,this.n=this.p=null}function T(p,l,t,i,r){var n,a,s=[],u=[];if(p.forEach(function(g){if(!((x=g.length-1)<=0)){var x,v,b=g[0],h=g[x];if((0,M.c)(b,h)){if(!b[2]&&!h[2]){for(r.lineStart(),n=0;n<x;++n)r.point((b=g[n])[0],b[1]);return void r.lineEnd()}h[0]+=2*k.Gg}s.push(v=new o(b,g,null,!0)),u.push(v.o=new o(b,null,v,!1)),s.push(v=new o(h,g,null,!1)),u.push(v.o=new o(h,null,v,!0))}}),s.length){for(u.sort(l),_(s),_(u),n=0,a=u.length;n<a;++n)u[n].e=t=!t;for(var f,c,y=s[0];;){for(var d=y,m=!0;d.v;)if((d=d.n)===y)return;f=d.z,r.lineStart();do{if(d.v=d.o.v=!0,d.e){if(m)for(n=0,a=f.length;n<a;++n)r.point((c=f[n])[0],c[1]);else i(d.x,d.n.x,1,r);d=d.n}else{if(m)for(n=(f=d.p.z).length-1;n>=0;--n)r.point((c=f[n])[0],c[1]);else i(d.x,d.p.x,-1,r);d=d.p}f=(d=d.o).z,m=!m}while(!d.v);r.lineEnd()}}}function _(p){if(l=p.length){for(var l,t,i=0,r=p[0];++i<l;)r.n=t=p[i],t.p=r,r=t;r.n=t=p[0],t.p=r}}},68120:function(ne,F,e){"use strict";function M(k,o){function T(_,p){return _=k(_,p),o(_[0],_[1])}return k.invert&&o.invert&&(T.invert=function(_,p){return(_=o.invert(_,p))&&k.invert(_[0],_[1])}),T}e.d(F,{c:function(){return M}})},7376:function(ne,F,e){"use strict";function M(k){return k}e.d(F,{c:function(){return M}})},83356:function(ne,F,e){"use strict";e.r(F),e.d(F,{geoAlbers:function(){return kt},geoAlbersUsa:function(){return Lt},geoArea:function(){return M.cp},geoAzimuthalEqualArea:function(){return St.c},geoAzimuthalEqualAreaRaw:function(){return St.y},geoAzimuthalEquidistant:function(){return Ot.c},geoAzimuthalEquidistantRaw:function(){return Ot.O},geoBounds:function(){return k.c},geoCentroid:function(){return o.c},geoCircle:function(){return T.c},geoClipAntimeridian:function(){return _.c},geoClipCircle:function(){return p.c},geoClipExtent:function(){return t},geoClipRectangle:function(){return l.c},geoConicConformal:function(){return an},geoConicConformalRaw:function(){return Jt},geoConicEqualArea:function(){return wt},geoConicEqualAreaRaw:function(){return yt},geoConicEquidistant:function(){return Dn},geoConicEquidistantRaw:function(){return Gn},geoContains:function(){return j},geoDistance:function(){return S},geoEqualEarth:function(){return Pn},geoEqualEarthRaw:function(){return Ln},geoEquirectangular:function(){return Xt.c},geoEquirectangularRaw:function(){return Xt.u},geoGnomonic:function(){return Nn.c},geoGnomonicRaw:function(){return Nn.Y},geoGraticule:function(){return q},geoGraticule10:function(){return ie},geoIdentity:function(){return Fn},geoInterpolate:function(){return X.c},geoLength:function(){return v},geoMercator:function(){return Vt},geoMercatorRaw:function(){return Bt},geoNaturalEarth1:function(){return Jn.c},geoNaturalEarth1Raw:function(){return Jn.g},geoOrthographic:function(){return Zn.c},geoOrthographicRaw:function(){return Zn.t},geoPath:function(){return Ge},geoProjection:function(){return ut.c},geoProjectionMutator:function(){return ut.U},geoRotation:function(){return Nt.c},geoStereographic:function(){return dr},geoStereographicRaw:function(){return rr},geoStream:function(){return c.c},geoTransform:function(){return jn.c},geoTransverseMercator:function(){return Sr},geoTransverseMercatorRaw:function(){return nr}});var M=e(95384),k=e(13696),o=e(24052),T=e(61780),_=e(78284),p=e(2728),l=e(21676);function t(){var ln,dn,Un,Mn=0,Hn=0,Wn=960,$n=500;return Un={stream:function(lr){return ln&&dn===lr?ln:ln=(0,l.c)(Mn,Hn,Wn,$n)(dn=lr)},extent:function(lr){return arguments.length?(Mn=+lr[0][0],Hn=+lr[0][1],Wn=+lr[1][0],$n=+lr[1][1],ln=dn=null,Un):[[Mn,Hn],[Wn,$n]]}}}var i,r,n,a=e(58196),s=e(88728),u=e(64528),f=e(70932),c=e(16016),y=(0,s.c)(),d={sphere:f.c,point:f.c,lineStart:function(){d.point=g,d.lineEnd=m},lineEnd:f.c,polygonStart:f.c,polygonEnd:f.c};function m(){d.point=d.lineEnd=f.c}function g(ln,dn){i=ln*=u.qw,r=(0,u.g$)(dn*=u.qw),n=(0,u.W8)(dn),d.point=x}function x(ln,dn){ln*=u.qw;var Un=(0,u.g$)(dn*=u.qw),Mn=(0,u.W8)(dn),Hn=(0,u.a2)(ln-i),Wn=(0,u.W8)(Hn),$n=Mn*(0,u.g$)(Hn),lr=n*Un-r*Mn*Wn,Cr=r*Un+n*Mn*Wn;y.add((0,u.WE)((0,u._I)($n*$n+lr*lr),Cr)),i=ln,r=Un,n=Mn}function v(ln){return y.reset(),(0,c.c)(ln,d),+y}var b=[null,null],h={type:"LineString",coordinates:b};function S(ln,dn){return b[0]=ln,b[1]=dn,v(h)}var w={Feature:function(ln,dn){return P(ln.geometry,dn)},FeatureCollection:function(ln,dn){for(var Un=ln.features,Mn=-1,Hn=Un.length;++Mn<Hn;)if(P(Un[Mn].geometry,dn))return!0;return!1}},E={Sphere:function(){return!0},Point:function(ln,dn){return I(ln.coordinates,dn)},MultiPoint:function(ln,dn){for(var Un=ln.coordinates,Mn=-1,Hn=Un.length;++Mn<Hn;)if(I(Un[Mn],dn))return!0;return!1},LineString:function(ln,dn){return O(ln.coordinates,dn)},MultiLineString:function(ln,dn){for(var Un=ln.coordinates,Mn=-1,Hn=Un.length;++Mn<Hn;)if(O(Un[Mn],dn))return!0;return!1},Polygon:function(ln,dn){return z(ln.coordinates,dn)},MultiPolygon:function(ln,dn){for(var Un=ln.coordinates,Mn=-1,Hn=Un.length;++Mn<Hn;)if(z(Un[Mn],dn))return!0;return!1},GeometryCollection:function(ln,dn){for(var Un=ln.geometries,Mn=-1,Hn=Un.length;++Mn<Hn;)if(P(Un[Mn],dn))return!0;return!1}};function P(ln,dn){return!(!ln||!E.hasOwnProperty(ln.type))&&E[ln.type](ln,dn)}function I(ln,dn){return 0===S(ln,dn)}function O(ln,dn){for(var Un,Mn,Hn,Wn=0,$n=ln.length;Wn<$n;Wn++){if(0===(Mn=S(ln[Wn],dn))||Wn>0&&(Hn=S(ln[Wn],ln[Wn-1]))>0&&Un<=Hn&&Mn<=Hn&&(Un+Mn-Hn)*(1-Math.pow((Un-Mn)/Hn,2))<u.a8*Hn)return!0;Un=Mn}return!1}function z(ln,dn){return!!(0,a.c)(ln.map(U),R(dn))}function U(ln){return(ln=ln.map(R)).pop(),ln}function R(ln){return[ln[0]*u.qw,ln[1]*u.qw]}function j(ln,dn){return(ln&&w.hasOwnProperty(ln.type)?w[ln.type]:P)(ln,dn)}var Y=e(84706);function B(ln,dn,Un){var Mn=(0,Y.ik)(ln,dn-u.Gg,Un).concat(dn);return function(Hn){return Mn.map(function(Wn){return[Hn,Wn]})}}function V(ln,dn,Un){var Mn=(0,Y.ik)(ln,dn-u.Gg,Un).concat(dn);return function(Hn){return Mn.map(function(Wn){return[Wn,Hn]})}}function q(){var ln,dn,Un,Mn,Hn,Wn,$n,lr,Cr,sn,Sn,zt,Yt=10,un=Yt,_n=90,Tn=360,Cn=2.5;function vn(){return{type:"MultiLineString",coordinates:rn()}}function rn(){return(0,Y.ik)((0,u.Km)(Mn/_n)*_n,Un,_n).map(Sn).concat((0,Y.ik)((0,u.Km)(lr/Tn)*Tn,$n,Tn).map(zt)).concat((0,Y.ik)((0,u.Km)(dn/Yt)*Yt,ln,Yt).filter(function(tn){return(0,u.a2)(tn%_n)>u.Gg}).map(Cr)).concat((0,Y.ik)((0,u.Km)(Wn/un)*un,Hn,un).filter(function(tn){return(0,u.a2)(tn%Tn)>u.Gg}).map(sn))}return vn.lines=function(){return rn().map(function(tn){return{type:"LineString",coordinates:tn}})},vn.outline=function(){return{type:"Polygon",coordinates:[Sn(Mn).concat(zt($n).slice(1),Sn(Un).reverse().slice(1),zt(lr).reverse().slice(1))]}},vn.extent=function(tn){return arguments.length?vn.extentMajor(tn).extentMinor(tn):vn.extentMinor()},vn.extentMajor=function(tn){return arguments.length?(lr=+tn[0][1],$n=+tn[1][1],(Mn=+tn[0][0])>(Un=+tn[1][0])&&(tn=Mn,Mn=Un,Un=tn),lr>$n&&(tn=lr,lr=$n,$n=tn),vn.precision(Cn)):[[Mn,lr],[Un,$n]]},vn.extentMinor=function(tn){return arguments.length?(Wn=+tn[0][1],Hn=+tn[1][1],(dn=+tn[0][0])>(ln=+tn[1][0])&&(tn=dn,dn=ln,ln=tn),Wn>Hn&&(tn=Wn,Wn=Hn,Hn=tn),vn.precision(Cn)):[[dn,Wn],[ln,Hn]]},vn.step=function(tn){return arguments.length?vn.stepMajor(tn).stepMinor(tn):vn.stepMinor()},vn.stepMajor=function(tn){return arguments.length?(_n=+tn[0],Tn=+tn[1],vn):[_n,Tn]},vn.stepMinor=function(tn){return arguments.length?(Yt=+tn[0],un=+tn[1],vn):[Yt,un]},vn.precision=function(tn){return arguments.length?(Cn=+tn,Cr=B(Wn,Hn,90),sn=V(dn,ln,Cn),Sn=B(lr,$n,90),zt=V(Mn,Un,Cn),vn):Cn},vn.extentMajor([[-180,-90+u.Gg],[180,90-u.Gg]]).extentMinor([[-180,-80-u.Gg],[180,80+u.Gg]])}function ie(){return q()()}var te,ee,$,J,X=e(27284),ae=e(7376),ce=(0,s.c)(),le=(0,s.c)(),pe={point:f.c,lineStart:f.c,lineEnd:f.c,polygonStart:function(){pe.lineStart=we,pe.lineEnd=ve},polygonEnd:function(){pe.lineStart=pe.lineEnd=pe.point=f.c,ce.add((0,u.a2)(le)),le.reset()},result:function(){var ln=ce/2;return ce.reset(),ln}};function we(){pe.point=Te}function Te(ln,dn){pe.point=ye,te=$=ln,ee=J=dn}function ye(ln,dn){le.add(J*ln-$*dn),$=ln,J=dn}function ve(){ye(te,ee)}var xe,Ce,Oe,be,ue=pe,se=e(73784),ge=0,Ie=0,ke=0,Se=0,Pe=0,Fe=0,Be=0,me=0,Me=0,Le={point:Ne,lineStart:Re,lineEnd:nt,polygonStart:function(){Le.lineStart=ft,Le.lineEnd=ht},polygonEnd:function(){Le.point=Ne,Le.lineStart=Re,Le.lineEnd=nt},result:function(){var ln=Me?[Be/Me,me/Me]:Fe?[Se/Fe,Pe/Fe]:ke?[ge/ke,Ie/ke]:[NaN,NaN];return ge=Ie=ke=Se=Pe=Fe=Be=me=Me=0,ln}};function Ne(ln,dn){ge+=ln,Ie+=dn,++ke}function Re(){Le.point=He}function He(ln,dn){Le.point=Ze,Ne(Oe=ln,be=dn)}function Ze(ln,dn){var Un=ln-Oe,Mn=dn-be,Hn=(0,u._I)(Un*Un+Mn*Mn);Se+=Hn*(Oe+ln)/2,Pe+=Hn*(be+dn)/2,Fe+=Hn,Ne(Oe=ln,be=dn)}function nt(){Le.point=Ne}function ft(){Le.point=Tt}function ht(){At(xe,Ce)}function Tt(ln,dn){Le.point=At,Ne(xe=Oe=ln,Ce=be=dn)}function At(ln,dn){var Un=ln-Oe,Mn=dn-be,Hn=(0,u._I)(Un*Un+Mn*Mn);Se+=Hn*(Oe+ln)/2,Pe+=Hn*(be+dn)/2,Fe+=Hn,Be+=(Hn=be*ln-Oe*dn)*(Oe+ln),me+=Hn*(be+dn),Me+=3*Hn,Ne(Oe=ln,be=dn)}var _t=Le;function ot(ln){this._context=ln}ot.prototype={_radius:4.5,pointRadius:function(ln){return this._radius=ln,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(ln,dn){switch(this._point){case 0:this._context.moveTo(ln,dn),this._point=1;break;case 1:this._context.lineTo(ln,dn);break;default:this._context.moveTo(ln+this._radius,dn),this._context.arc(ln,dn,this._radius,0,u.kD)}},result:f.c};var it,Pt,jt,Ut,Rt,Je=(0,s.c)(),et={point:f.c,lineStart:function(){et.point=qe},lineEnd:function(){it&&$e(Pt,jt),et.point=f.c},polygonStart:function(){it=!0},polygonEnd:function(){it=null},result:function(){var ln=+Je;return Je.reset(),ln}};function qe(ln,dn){et.point=$e,Pt=Ut=ln,jt=Rt=dn}function $e(ln,dn){Je.add((0,u._I)((Ut-=ln)*Ut+(Rt-=dn)*Rt)),Ut=ln,Rt=dn}var pt=et;function ct(){this._string=[]}function Ve(ln){return"m0,"+ln+"a"+ln+","+ln+" 0 1,1 0,"+-2*ln+"a"+ln+","+ln+" 0 1,1 0,"+2*ln+"z"}function Ge(ln,dn){var Un,Mn,Hn=4.5;function Wn($n){return $n&&("function"==typeof Hn&&Mn.pointRadius(+Hn.apply(this,arguments)),(0,c.c)($n,Un(Mn))),Mn.result()}return Wn.area=function($n){return(0,c.c)($n,Un(ue)),ue.result()},Wn.measure=function($n){return(0,c.c)($n,Un(pt)),pt.result()},Wn.bounds=function($n){return(0,c.c)($n,Un(se.c)),se.c.result()},Wn.centroid=function($n){return(0,c.c)($n,Un(_t)),_t.result()},Wn.projection=function($n){return arguments.length?(Un=null==$n?(ln=null,ae.c):(ln=$n).stream,Wn):ln},Wn.context=function($n){return arguments.length?(Mn=null==$n?(dn=null,new ct):new ot(dn=$n),"function"!=typeof Hn&&Mn.pointRadius(Hn),Wn):dn},Wn.pointRadius=function($n){return arguments.length?(Hn="function"==typeof $n?$n:(Mn.pointRadius(+$n),+$n),Wn):Hn},Wn.projection(ln).context(dn)}ct.prototype={_radius:4.5,_circle:Ve(4.5),pointRadius:function(ln){return(ln=+ln)!==this._radius&&(this._radius=ln,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(ln,dn){switch(this._point){case 0:this._string.push("M",ln,",",dn),this._point=1;break;case 1:this._string.push("L",ln,",",dn);break;default:null==this._circle&&(this._circle=Ve(this._radius)),this._string.push("M",ln,",",dn,this._circle)}},result:function(){if(this._string.length){var ln=this._string.join("");return this._string=[],ln}return null}};var ut=e(87952);function Qe(ln){var dn=0,Un=u.pi/3,Mn=(0,ut.U)(ln),Hn=Mn(dn,Un);return Hn.parallels=function(Wn){return arguments.length?Mn(dn=Wn[0]*u.qw,Un=Wn[1]*u.qw):[dn*u.oh,Un*u.oh]},Hn}function yt(ln,dn){var Un=(0,u.g$)(ln),Mn=(Un+(0,u.g$)(dn))/2;if((0,u.a2)(Mn)<u.Gg)return function(lr){var Cr=(0,u.W8)(lr);function sn(Sn,zt){return[Sn*Cr,(0,u.g$)(zt)/Cr]}return sn.invert=function(Sn,zt){return[Sn/Cr,(0,u.qR)(zt*Cr)]},sn}(ln);var Hn=1+Un*(2*Mn-Un),Wn=(0,u._I)(Hn)/Mn;function $n(lr,Cr){var sn=(0,u._I)(Hn-2*Mn*(0,u.g$)(Cr))/Mn;return[sn*(0,u.g$)(lr*=Mn),Wn-sn*(0,u.W8)(lr)]}return $n.invert=function(lr,Cr){var sn=Wn-Cr,Sn=(0,u.WE)(lr,(0,u.a2)(sn))*(0,u.kq)(sn);return sn*Mn<0&&(Sn-=u.pi*(0,u.kq)(lr)*(0,u.kq)(sn)),[Sn/Mn,(0,u.qR)((Hn-(lr*lr+sn*sn)*Mn*Mn)/(2*Mn))]},$n}function wt(){return Qe(yt).scale(155.424).center([0,33.6442])}function kt(){return wt().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var vt=e(86420);function Lt(){var ln,dn,Un,Mn,Hn,Wn,$n=kt(),lr=wt().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Cr=wt().rotate([157,0]).center([-3,19.9]).parallels([8,18]),sn={point:function(Yt,un){Wn=[Yt,un]}};function Sn(Yt){var un=Yt[0],_n=Yt[1];return Wn=null,Un.point(un,_n),Wn||(Mn.point(un,_n),Wn)||(Hn.point(un,_n),Wn)}function zt(){return ln=dn=null,Sn}return Sn.invert=function(Yt){var un=$n.scale(),_n=$n.translate(),Tn=(Yt[0]-_n[0])/un,Cn=(Yt[1]-_n[1])/un;return(Cn>=.12&&Cn<.234&&Tn>=-.425&&Tn<-.214?lr:Cn>=.166&&Cn<.234&&Tn>=-.214&&Tn<-.115?Cr:$n).invert(Yt)},Sn.stream=function(Yt){return ln&&dn===Yt?ln:(un=[$n.stream(dn=Yt),lr.stream(Yt),Cr.stream(Yt)],_n=un.length,ln={point:function(Tn,Cn){for(var vn=-1;++vn<_n;)un[vn].point(Tn,Cn)},sphere:function(){for(var Tn=-1;++Tn<_n;)un[Tn].sphere()},lineStart:function(){for(var Tn=-1;++Tn<_n;)un[Tn].lineStart()},lineEnd:function(){for(var Tn=-1;++Tn<_n;)un[Tn].lineEnd()},polygonStart:function(){for(var Tn=-1;++Tn<_n;)un[Tn].polygonStart()},polygonEnd:function(){for(var Tn=-1;++Tn<_n;)un[Tn].polygonEnd()}});var un,_n},Sn.precision=function(Yt){return arguments.length?($n.precision(Yt),lr.precision(Yt),Cr.precision(Yt),zt()):$n.precision()},Sn.scale=function(Yt){return arguments.length?($n.scale(Yt),lr.scale(.35*Yt),Cr.scale(Yt),Sn.translate($n.translate())):$n.scale()},Sn.translate=function(Yt){if(!arguments.length)return $n.translate();var un=$n.scale(),_n=+Yt[0],Tn=+Yt[1];return Un=$n.translate(Yt).clipExtent([[_n-.455*un,Tn-.238*un],[_n+.455*un,Tn+.238*un]]).stream(sn),Mn=lr.translate([_n-.307*un,Tn+.201*un]).clipExtent([[_n-.425*un+u.Gg,Tn+.12*un+u.Gg],[_n-.214*un-u.Gg,Tn+.234*un-u.Gg]]).stream(sn),Hn=Cr.translate([_n-.205*un,Tn+.212*un]).clipExtent([[_n-.214*un+u.Gg,Tn+.166*un+u.Gg],[_n-.115*un-u.Gg,Tn+.234*un-u.Gg]]).stream(sn),zt()},Sn.fitExtent=function(Yt,un){return(0,vt.QX)(Sn,Yt,un)},Sn.fitSize=function(Yt,un){return(0,vt.UV)(Sn,Yt,un)},Sn.fitWidth=function(Yt,un){return(0,vt.Qx)(Sn,Yt,un)},Sn.fitHeight=function(Yt,un){return(0,vt.OW)(Sn,Yt,un)},Sn.scale(1070)}var St=e(54724),Ot=e(69020),Nt=e(92992);function Bt(ln,dn){return[ln,(0,u.Yz)((0,u.a6)((u.or+dn)/2))]}function Vt(){return nn(Bt).scale(961/u.kD)}function nn(ln){var dn,Un,Mn,Hn=(0,ut.c)(ln),Wn=Hn.center,$n=Hn.scale,lr=Hn.translate,Cr=Hn.clipExtent,sn=null;function Sn(){var zt=u.pi*$n(),Yt=Hn((0,Nt.c)(Hn.rotate()).invert([0,0]));return Cr(null==sn?[[Yt[0]-zt,Yt[1]-zt],[Yt[0]+zt,Yt[1]+zt]]:ln===Bt?[[Math.max(Yt[0]-zt,sn),dn],[Math.min(Yt[0]+zt,Un),Mn]]:[[sn,Math.max(Yt[1]-zt,dn)],[Un,Math.min(Yt[1]+zt,Mn)]])}return Hn.scale=function(zt){return arguments.length?($n(zt),Sn()):$n()},Hn.translate=function(zt){return arguments.length?(lr(zt),Sn()):lr()},Hn.center=function(zt){return arguments.length?(Wn(zt),Sn()):Wn()},Hn.clipExtent=function(zt){return arguments.length?(null==zt?sn=dn=Un=Mn=null:(sn=+zt[0][0],dn=+zt[0][1],Un=+zt[1][0],Mn=+zt[1][1]),Sn()):null==sn?null:[[sn,dn],[Un,Mn]]},Sn()}function gn(ln){return(0,u.a6)((u.or+ln)/2)}function Jt(ln,dn){var Un=(0,u.W8)(ln),Mn=ln===dn?(0,u.g$)(ln):(0,u.Yz)(Un/(0,u.W8)(dn))/(0,u.Yz)(gn(dn)/gn(ln)),Hn=Un*(0,u.g3)(gn(ln),Mn)/Mn;if(!Mn)return Bt;function Wn($n,lr){Hn>0?lr<-u.or+u.Gg&&(lr=-u.or+u.Gg):lr>u.or-u.Gg&&(lr=u.or-u.Gg);var Cr=Hn/(0,u.g3)(gn(lr),Mn);return[Cr*(0,u.g$)(Mn*$n),Hn-Cr*(0,u.W8)(Mn*$n)]}return Wn.invert=function($n,lr){var Cr=Hn-lr,sn=(0,u.kq)(Mn)*(0,u._I)($n*$n+Cr*Cr),Sn=(0,u.WE)($n,(0,u.a2)(Cr))*(0,u.kq)(Cr);return Cr*Mn<0&&(Sn-=u.pi*(0,u.kq)($n)*(0,u.kq)(Cr)),[Sn/Mn,2*(0,u.MQ)((0,u.g3)(Hn/sn,1/Mn))-u.or]},Wn}function an(){return Qe(Jt).scale(109.5).parallels([30,30])}Bt.invert=function(ln,dn){return[ln,2*(0,u.MQ)((0,u.oN)(dn))-u.or]};var Xt=e(69604);function Gn(ln,dn){var Un=(0,u.W8)(ln),Mn=ln===dn?(0,u.g$)(ln):(Un-(0,u.W8)(dn))/(dn-ln),Hn=Un/Mn+ln;if((0,u.a2)(Mn)<u.Gg)return Xt.u;function Wn($n,lr){var Cr=Hn-lr,sn=Mn*$n;return[Cr*(0,u.g$)(sn),Hn-Cr*(0,u.W8)(sn)]}return Wn.invert=function($n,lr){var Cr=Hn-lr,sn=(0,u.WE)($n,(0,u.a2)(Cr))*(0,u.kq)(Cr);return Cr*Mn<0&&(sn-=u.pi*(0,u.kq)($n)*(0,u.kq)(Cr)),[sn/Mn,Hn-(0,u.kq)(Mn)*(0,u._I)($n*$n+Cr*Cr)]},Wn}function Dn(){return Qe(Gn).scale(131.154).center([0,13.9389])}var An=1.340264,cn=-.081106,bn=893e-6,hn=.003796,wn=(0,u._I)(3)/2;function Ln(ln,dn){var Un=(0,u.qR)(wn*(0,u.g$)(dn)),Mn=Un*Un,Hn=Mn*Mn*Mn;return[ln*(0,u.W8)(Un)/(wn*(An+3*cn*Mn+Hn*(7*bn+9*hn*Mn))),Un*(An+cn*Mn+Hn*(bn+hn*Mn))]}function Pn(){return(0,ut.c)(Ln).scale(177.158)}Ln.invert=function(ln,dn){for(var Un,Mn=dn,Hn=Mn*Mn,Wn=Hn*Hn*Hn,$n=0;$n<12&&(Wn=(Hn=(Mn-=Un=(Mn*(An+cn*Hn+Wn*(bn+hn*Hn))-dn)/(An+3*cn*Hn+Wn*(7*bn+9*hn*Hn)))*Mn)*Hn*Hn,!((0,u.a2)(Un)<u.a8));++$n);return[wn*ln*(An+3*cn*Hn+Wn*(7*bn+9*hn*Hn))/(0,u.W8)(Mn),(0,u.qR)((0,u.g$)(Mn)/wn)]};var Nn=e(53285),jn=e(15196);function Fn(){var ln,dn,Un,Mn,Hn,Wn,$n,lr=1,Cr=0,sn=0,Sn=1,zt=1,Yt=0,un=null,_n=1,Tn=1,Cn=(0,jn.s)({point:function(fn,yn){var zn=tn([fn,yn]);this.stream.point(zn[0],zn[1])}}),vn=ae.c;function rn(){return _n=lr*Sn,Tn=lr*zt,Wn=$n=null,tn}function tn(fn){var yn=fn[0]*_n,zn=fn[1]*Tn;if(Yt){var Vn=zn*ln-yn*dn;yn=yn*ln+zn*dn,zn=Vn}return[yn+Cr,zn+sn]}return tn.invert=function(fn){var yn=fn[0]-Cr,zn=fn[1]-sn;if(Yt){var Vn=zn*ln+yn*dn;yn=yn*ln-zn*dn,zn=Vn}return[yn/_n,zn/Tn]},tn.stream=function(fn){return Wn&&$n===fn?Wn:Wn=Cn(vn($n=fn))},tn.postclip=function(fn){return arguments.length?(vn=fn,un=Un=Mn=Hn=null,rn()):vn},tn.clipExtent=function(fn){return arguments.length?(vn=null==fn?(un=Un=Mn=Hn=null,ae.c):(0,l.c)(un=+fn[0][0],Un=+fn[0][1],Mn=+fn[1][0],Hn=+fn[1][1]),rn()):null==un?null:[[un,Un],[Mn,Hn]]},tn.scale=function(fn){return arguments.length?(lr=+fn,rn()):lr},tn.translate=function(fn){return arguments.length?(Cr=+fn[0],sn=+fn[1],rn()):[Cr,sn]},tn.angle=function(fn){return arguments.length?(dn=(0,u.g$)(Yt=fn%360*u.qw),ln=(0,u.W8)(Yt),rn()):Yt*u.oh},tn.reflectX=function(fn){return arguments.length?(Sn=fn?-1:1,rn()):Sn<0},tn.reflectY=function(fn){return arguments.length?(zt=fn?-1:1,rn()):zt<0},tn.fitExtent=function(fn,yn){return(0,vt.QX)(tn,fn,yn)},tn.fitSize=function(fn,yn){return(0,vt.UV)(tn,fn,yn)},tn.fitWidth=function(fn,yn){return(0,vt.Qx)(tn,fn,yn)},tn.fitHeight=function(fn,yn){return(0,vt.OW)(tn,fn,yn)},tn}var Jn=e(47984),Zn=e(4888),hr=e(62280);function rr(ln,dn){var Un=(0,u.W8)(dn),Mn=1+(0,u.W8)(ln)*Un;return[Un*(0,u.g$)(ln)/Mn,(0,u.g$)(dn)/Mn]}function dr(){return(0,ut.c)(rr).scale(250).clipAngle(142)}function nr(ln,dn){return[(0,u.Yz)((0,u.a6)((u.or+dn)/2)),-ln]}function Sr(){var ln=nn(nr),dn=ln.center,Un=ln.rotate;return ln.center=function(Mn){return arguments.length?dn([-Mn[1],Mn[0]]):[(Mn=dn())[1],-Mn[0]]},ln.rotate=function(Mn){return arguments.length?Un([Mn[0],Mn[1],Mn.length>2?Mn[2]+90:90]):[(Mn=Un())[0],Mn[1],Mn[2]-90]},Un([0,0,90]).scale(159.155)}rr.invert=(0,hr.g)(function(ln){return 2*(0,u.MQ)(ln)}),nr.invert=function(ln,dn){return[-dn,2*(0,u.MQ)((0,u.oN)(ln))-u.or]}},27284:function(ne,F,e){"use strict";e.d(F,{c:function(){return k}});var M=e(64528);function k(o,T){var _=o[0]*M.qw,p=o[1]*M.qw,l=T[0]*M.qw,t=T[1]*M.qw,i=(0,M.W8)(p),r=(0,M.g$)(p),n=(0,M.W8)(t),a=(0,M.g$)(t),s=i*(0,M.W8)(_),u=i*(0,M.g$)(_),f=n*(0,M.W8)(l),c=n*(0,M.g$)(l),y=2*(0,M.qR)((0,M._I)((0,M.SD)(t-p)+i*n*(0,M.SD)(l-_))),d=(0,M.g$)(y),m=y?function(g){var x=(0,M.g$)(g*=y)/d,v=(0,M.g$)(y-g)/d,b=v*s+x*f,h=v*u+x*c,S=v*r+x*a;return[(0,M.WE)(h,b)*M.oh,(0,M.WE)(S,(0,M._I)(b*b+h*h))*M.oh]}:function(){return[_*M.oh,p*M.oh]};return m.distance=y,m}},64528:function(ne,F,e){"use strict";e.d(F,{Gg:function(){return M},Km:function(){return s},MQ:function(){return r},SD:function(){return b},W8:function(){return a},WE:function(){return n},Yz:function(){return f},_I:function(){return m},a2:function(){return i},a6:function(){return g},a8:function(){return k},g$:function(){return y},g3:function(){return c},kD:function(){return p},kq:function(){return d},mE:function(){return x},oN:function(){return u},oh:function(){return l},or:function(){return T},pi:function(){return o},qR:function(){return v},qw:function(){return t},wL:function(){return _}});var M=1e-6,k=1e-12,o=Math.PI,T=o/2,_=o/4,p=2*o,l=180/o,t=o/180,i=Math.abs,r=Math.atan,n=Math.atan2,a=Math.cos,s=Math.ceil,u=Math.exp,f=Math.log,c=Math.pow,y=Math.sin,d=Math.sign||function(h){return h>0?1:h<0?-1:0},m=Math.sqrt,g=Math.tan;function x(h){return h>1?0:h<-1?o:Math.acos(h)}function v(h){return h>1?T:h<-1?-T:Math.asin(h)}function b(h){return(h=y(h/2))*h}},70932:function(ne,F,e){"use strict";function M(){}e.d(F,{c:function(){return M}})},73784:function(ne,F,e){"use strict";var M=e(70932),k=1/0,o=k,T=-k,_=T;F.c={point:function(l,t){l<k&&(k=l),l>T&&(T=l),t<o&&(o=t),t>_&&(_=t)},lineStart:M.c,lineEnd:M.c,polygonStart:M.c,polygonEnd:M.c,result:function(){var l=[[k,o],[T,_]];return T=_=-(o=k=1/0),l}}},41860:function(ne,F,e){"use strict";e.d(F,{c:function(){return k}});var M=e(64528);function k(o,T){return(0,M.a2)(o[0]-T[0])<M.Gg&&(0,M.a2)(o[1]-T[1])<M.Gg}},58196:function(ne,F,e){"use strict";e.d(F,{c:function(){return p}});var M=e(88728),k=e(84220),o=e(64528),T=(0,M.c)();function _(l){return(0,o.a2)(l[0])<=o.pi?l[0]:(0,o.kq)(l[0])*(((0,o.a2)(l[0])+o.pi)%o.kD-o.pi)}function p(l,t){var i=_(t),r=t[1],n=(0,o.g$)(r),a=[(0,o.g$)(i),-(0,o.W8)(i),0],s=0,u=0;T.reset(),1===n?r=o.or+o.Gg:-1===n&&(r=-o.or-o.Gg);for(var f=0,c=l.length;f<c;++f)if(d=(y=l[f]).length)for(var y,d,m=y[d-1],g=_(m),x=m[1]/2+o.wL,v=(0,o.g$)(x),b=(0,o.W8)(x),h=0;h<d;++h,g=w,v=P,b=I,m=S){var S=y[h],w=_(S),E=S[1]/2+o.wL,P=(0,o.g$)(E),I=(0,o.W8)(E),O=w-g,z=O>=0?1:-1,U=z*O,R=U>o.pi,j=v*P;if(T.add((0,o.WE)(j*z*(0,o.g$)(U),b*I+j*(0,o.W8)(U))),s+=R?O+z*o.kD:O,R^g>=i^w>=i){var Y=(0,k.CW)((0,k.ux)(m),(0,k.ux)(S));(0,k.cJ)(Y);var B=(0,k.CW)(a,Y);(0,k.cJ)(B);var V=(R^O>=0?-1:1)*(0,o.qR)(B[2]);(r>V||r===V&&(Y[0]||Y[1]))&&(u+=R^O>=0?1:-1)}}return(s<-o.Gg||s<o.Gg&&T<-o.Gg)^1&u}},62280:function(ne,F,e){"use strict";e.d(F,{a:function(){return k},g:function(){return o}});var M=e(64528);function k(T){return function(_,p){var l=(0,M.W8)(_),t=(0,M.W8)(p),i=T(l*t);return[i*t*(0,M.g$)(_),i*(0,M.g$)(p)]}}function o(T){return function(_,p){var l=(0,M._I)(_*_+p*p),t=T(l),i=(0,M.g$)(t),r=(0,M.W8)(t);return[(0,M.WE)(_*i,l*r),(0,M.qR)(l&&p*i/l)]}}},54724:function(ne,F,e){"use strict";e.d(F,{c:function(){return _},y:function(){return T}});var M=e(64528),k=e(62280),o=e(87952),T=(0,k.a)(function(p){return(0,M._I)(2/(1+p))});function _(){return(0,o.c)(T).scale(124.75).clipAngle(179.999)}T.invert=(0,k.g)(function(p){return 2*(0,M.qR)(p/2)})},69020:function(ne,F,e){"use strict";e.d(F,{O:function(){return T},c:function(){return _}});var M=e(64528),k=e(62280),o=e(87952),T=(0,k.a)(function(p){return(p=(0,M.mE)(p))&&p/(0,M.g$)(p)});function _(){return(0,o.c)(T).scale(79.4188).clipAngle(179.999)}T.invert=(0,k.g)(function(p){return p})},69604:function(ne,F,e){"use strict";e.d(F,{c:function(){return o},u:function(){return k}});var M=e(87952);function k(T,_){return[T,_]}function o(){return(0,M.c)(k).scale(152.63)}k.invert=k},86420:function(ne,F,e){"use strict";e.d(F,{OW:function(){return l},QX:function(){return T},Qx:function(){return p},UV:function(){return _}});var M=e(16016),k=e(73784);function o(t,i,r){var n=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=n&&t.clipExtent(null),(0,M.c)(r,t.stream(k.c)),i(k.c.result()),null!=n&&t.clipExtent(n),t}function T(t,i,r){return o(t,function(n){var a=i[1][0]-i[0][0],s=i[1][1]-i[0][1],u=Math.min(a/(n[1][0]-n[0][0]),s/(n[1][1]-n[0][1])),f=+i[0][0]+(a-u*(n[1][0]+n[0][0]))/2,c=+i[0][1]+(s-u*(n[1][1]+n[0][1]))/2;t.scale(150*u).translate([f,c])},r)}function _(t,i,r){return T(t,[[0,0],i],r)}function p(t,i,r){return o(t,function(n){var a=+i,s=a/(n[1][0]-n[0][0]),u=(a-s*(n[1][0]+n[0][0]))/2,f=-s*n[0][1];t.scale(150*s).translate([u,f])},r)}function l(t,i,r){return o(t,function(n){var a=+i,s=a/(n[1][1]-n[0][1]),u=-s*n[0][0],f=(a-s*(n[1][1]+n[0][1]))/2;t.scale(150*s).translate([u,f])},r)}},53285:function(ne,F,e){"use strict";e.d(F,{Y:function(){return T},c:function(){return _}});var M=e(64528),k=e(62280),o=e(87952);function T(p,l){var t=(0,M.W8)(l),i=(0,M.W8)(p)*t;return[t*(0,M.g$)(p)/i,(0,M.g$)(l)/i]}function _(){return(0,o.c)(T).scale(144.049).clipAngle(60)}T.invert=(0,k.g)(M.MQ)},87952:function(ne,F,e){"use strict";e.d(F,{c:function(){return y},U:function(){return d}});var M=e(78284),k=e(2728),o=e(21676),T=e(68120),_=e(7376),p=e(64528),l=e(92992),t=e(15196),i=e(86420),r=e(84220),n=16,a=(0,p.W8)(30*p.qw);function s(m,g){return+g?function(x,v){function b(h,S,w,E,P,I,O,z,U,R,j,Y,B,V){var q=O-h,ie=z-S,te=q*q+ie*ie;if(te>4*v&&B--){var ee=E+R,$=P+j,J=I+Y,X=(0,p._I)(ee*ee+$*$+J*J),ae=(0,p.qR)(J/=X),ce=(0,p.a2)((0,p.a2)(J)-1)<p.Gg||(0,p.a2)(w-U)<p.Gg?(w+U)/2:(0,p.WE)($,ee),le=x(ce,ae),pe=le[0],we=le[1],Te=pe-h,ye=we-S,ve=ie*Te-q*ye;(ve*ve/te>v||(0,p.a2)((q*Te+ie*ye)/te-.5)>.3||E*R+P*j+I*Y<a)&&(b(h,S,w,E,P,I,pe,we,ce,ee/=X,$/=X,J,B,V),V.point(pe,we),b(pe,we,ce,ee,$,J,O,z,U,R,j,Y,B,V))}}return function(h){var S,w,E,P,I,O,z,U,R,j,Y,B,V={point:q,lineStart:ie,lineEnd:ee,polygonStart:function(){h.polygonStart(),V.lineStart=$},polygonEnd:function(){h.polygonEnd(),V.lineStart=ie}};function q(ae,ce){ae=x(ae,ce),h.point(ae[0],ae[1])}function ie(){U=NaN,V.point=te,h.lineStart()}function te(ae,ce){var le=(0,r.ux)([ae,ce]),pe=x(ae,ce);b(U,R,z,j,Y,B,U=pe[0],R=pe[1],z=ae,j=le[0],Y=le[1],B=le[2],n,h),h.point(U,R)}function ee(){V.point=q,h.lineEnd()}function $(){ie(),V.point=J,V.lineEnd=X}function J(ae,ce){te(S=ae,ce),w=U,E=R,P=j,I=Y,O=B,V.point=te}function X(){b(U,R,z,j,Y,B,w,E,S,P,I,O,n,h),V.lineEnd=ee,ee()}return V}}(m,g):(x=m,(0,t.s)({point:function(v,b){v=x(v,b),this.stream.point(v[0],v[1])}}));var x}var u=(0,t.s)({point:function(m,g){this.stream.point(m*p.qw,g*p.qw)}});function f(m,g,x,v,b){function h(S,w){return[g+m*(S*=v),x-m*(w*=b)]}return h.invert=function(S,w){return[(S-g)/m*v,(x-w)/m*b]},h}function c(m,g,x,v,b,h){var S=(0,p.W8)(h),w=(0,p.g$)(h),E=S*m,P=w*m,I=S/m,O=w/m,z=(w*x-S*g)/m,U=(w*g+S*x)/m;function R(j,Y){return[E*(j*=v)-P*(Y*=b)+g,x-P*j-E*Y]}return R.invert=function(j,Y){return[v*(I*j-O*Y+z),b*(U-O*j-I*Y)]},R}function y(m){return d(function(){return m})()}function d(m){var g,x,v,b,h,S,w,E,P,I,O=150,z=480,U=250,R=0,j=0,Y=0,B=0,V=0,q=0,ie=1,te=1,ee=null,$=M.c,J=null,X=_.c,ae=.5;function ce(Te){return E(Te[0]*p.qw,Te[1]*p.qw)}function le(Te){return(Te=E.invert(Te[0],Te[1]))&&[Te[0]*p.oh,Te[1]*p.oh]}function pe(){var Te=c(O,0,0,ie,te,q).apply(null,g(R,j)),ye=(q?c:f)(O,z-Te[0],U-Te[1],ie,te,q);return x=(0,l.O)(Y,B,V),w=(0,T.c)(g,ye),E=(0,T.c)(x,w),S=s(w,ae),we()}function we(){return P=I=null,ce}return ce.stream=function(Te){return P&&I===Te?P:P=u((ye=x,(0,t.s)({point:function(ve,xe){var Ce=ye(ve,xe);return this.stream.point(Ce[0],Ce[1])}}))($(S(X(I=Te)))));var ye},ce.preclip=function(Te){return arguments.length?($=Te,ee=void 0,we()):$},ce.postclip=function(Te){return arguments.length?(X=Te,J=v=b=h=null,we()):X},ce.clipAngle=function(Te){return arguments.length?($=+Te?(0,k.c)(ee=Te*p.qw):(ee=null,M.c),we()):ee*p.oh},ce.clipExtent=function(Te){return arguments.length?(X=null==Te?(J=v=b=h=null,_.c):(0,o.c)(J=+Te[0][0],v=+Te[0][1],b=+Te[1][0],h=+Te[1][1]),we()):null==J?null:[[J,v],[b,h]]},ce.scale=function(Te){return arguments.length?(O=+Te,pe()):O},ce.translate=function(Te){return arguments.length?(z=+Te[0],U=+Te[1],pe()):[z,U]},ce.center=function(Te){return arguments.length?(R=Te[0]%360*p.qw,j=Te[1]%360*p.qw,pe()):[R*p.oh,j*p.oh]},ce.rotate=function(Te){return arguments.length?(Y=Te[0]%360*p.qw,B=Te[1]%360*p.qw,V=Te.length>2?Te[2]%360*p.qw:0,pe()):[Y*p.oh,B*p.oh,V*p.oh]},ce.angle=function(Te){return arguments.length?(q=Te%360*p.qw,pe()):q*p.oh},ce.reflectX=function(Te){return arguments.length?(ie=Te?-1:1,pe()):ie<0},ce.reflectY=function(Te){return arguments.length?(te=Te?-1:1,pe()):te<0},ce.precision=function(Te){return arguments.length?(S=s(w,ae=Te*Te),we()):(0,p._I)(ae)},ce.fitExtent=function(Te,ye){return(0,i.QX)(ce,Te,ye)},ce.fitSize=function(Te,ye){return(0,i.UV)(ce,Te,ye)},ce.fitWidth=function(Te,ye){return(0,i.Qx)(ce,Te,ye)},ce.fitHeight=function(Te,ye){return(0,i.OW)(ce,Te,ye)},function(){return g=m.apply(this,arguments),ce.invert=g.invert&&le,pe()}}},47984:function(ne,F,e){"use strict";e.d(F,{c:function(){return T},g:function(){return o}});var M=e(87952),k=e(64528);function o(_,p){var l=p*p,t=l*l;return[_*(.8707-.131979*l+t*(t*(.003971*l-.001529*t)-.013791)),p*(1.007226+l*(.015085+t*(.028874*l-.044475-.005916*t)))]}function T(){return(0,M.c)(o).scale(175.295)}o.invert=function(_,p){var l,t=p,i=25;do{var r=t*t,n=r*r;t-=l=(t*(1.007226+r*(.015085+n*(.028874*r-.044475-.005916*n)))-p)/(1.007226+r*(.045255+n*(.259866*r-.311325-.06507600000000001*n)))}while((0,k.a2)(l)>k.Gg&&--i>0);return[_/(.8707+(r=t*t)*(r*(r*r*r*(.003971-.001529*r)-.013791)-.131979)),t]}},4888:function(ne,F,e){"use strict";e.d(F,{c:function(){return _},t:function(){return T}});var M=e(64528),k=e(62280),o=e(87952);function T(p,l){return[(0,M.W8)(l)*(0,M.g$)(p),(0,M.g$)(l)]}function _(){return(0,o.c)(T).scale(249.5).clipAngle(90+M.Gg)}T.invert=(0,k.g)(M.qR)},92992:function(ne,F,e){"use strict";e.d(F,{O:function(){return T},c:function(){return t}});var M=e(68120),k=e(64528);function o(i,r){return[(0,k.a2)(i)>k.pi?i+Math.round(-i/k.kD)*k.kD:i,r]}function T(i,r,n){return(i%=k.kD)?r||n?(0,M.c)(p(i),l(r,n)):p(i):r||n?l(r,n):o}function _(i){return function(r,n){return[(r+=i)>k.pi?r-k.kD:r<-k.pi?r+k.kD:r,n]}}function p(i){var r=_(i);return r.invert=_(-i),r}function l(i,r){var n=(0,k.W8)(i),a=(0,k.g$)(i),s=(0,k.W8)(r),u=(0,k.g$)(r);function f(c,y){var d=(0,k.W8)(y),m=(0,k.W8)(c)*d,g=(0,k.g$)(c)*d,x=(0,k.g$)(y),v=x*n+m*a;return[(0,k.WE)(g*s-v*u,m*n-x*a),(0,k.qR)(v*s+g*u)]}return f.invert=function(c,y){var d=(0,k.W8)(y),m=(0,k.W8)(c)*d,g=(0,k.g$)(c)*d,x=(0,k.g$)(y),v=x*s-g*u;return[(0,k.WE)(g*s+x*u,m*n+v*a),(0,k.qR)(v*n-m*a)]},f}function t(i){function r(n){return(n=i(n[0]*k.qw,n[1]*k.qw))[0]*=k.oh,n[1]*=k.oh,n}return i=T(i[0]*k.qw,i[1]*k.qw,i.length>2?i[2]*k.qw:0),r.invert=function(n){return(n=i.invert(n[0]*k.qw,n[1]*k.qw))[0]*=k.oh,n[1]*=k.oh,n},r}o.invert=o},16016:function(ne,F,e){"use strict";function M(l,t){l&&o.hasOwnProperty(l.type)&&o[l.type](l,t)}e.d(F,{c:function(){return p}});var k={Feature:function(l,t){M(l.geometry,t)},FeatureCollection:function(l,t){for(var i=l.features,r=-1,n=i.length;++r<n;)M(i[r].geometry,t)}},o={Sphere:function(l,t){t.sphere()},Point:function(l,t){t.point((l=l.coordinates)[0],l[1],l[2])},MultiPoint:function(l,t){for(var i=l.coordinates,r=-1,n=i.length;++r<n;)t.point((l=i[r])[0],l[1],l[2])},LineString:function(l,t){T(l.coordinates,t,0)},MultiLineString:function(l,t){for(var i=l.coordinates,r=-1,n=i.length;++r<n;)T(i[r],t,0)},Polygon:function(l,t){_(l.coordinates,t)},MultiPolygon:function(l,t){for(var i=l.coordinates,r=-1,n=i.length;++r<n;)_(i[r],t)},GeometryCollection:function(l,t){for(var i=l.geometries,r=-1,n=i.length;++r<n;)M(i[r],t)}};function T(l,t,i){var r,n=-1,a=l.length-i;for(t.lineStart();++n<a;)t.point((r=l[n])[0],r[1],r[2]);t.lineEnd()}function _(l,t){var i=-1,r=l.length;for(t.polygonStart();++i<r;)T(l[i],t,1);t.polygonEnd()}function p(l,t){l&&k.hasOwnProperty(l.type)?k[l.type](l,t):M(l,t)}},15196:function(ne,F,e){"use strict";function M(T){return{stream:k(T)}}function k(T){return function(_){var p=new o;for(var l in T)p[l]=T[l];return p.stream=_,p}}function o(){}e.d(F,{c:function(){return M},s:function(){return k}}),o.prototype={constructor:o,point:function(T,_){this.stream.point(T,_)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},74148:function(ne,F,e){"use strict";function M(se,ge){return se.parent===ge.parent?1:2}function k(se,ge){return se+ge.x}function o(se,ge){return Math.max(se,ge.y)}function T(){var se=M,ge=1,Ie=1,ke=!1;function Se(Pe){var Fe,Be=0;Pe.eachAfter(function(Re){var Ze,He=Re.children;He?(Re.x=(Ze=He).reduce(k,0)/Ze.length,Re.y=function(Ze){return 1+Ze.reduce(o,0)}(He)):(Re.x=Fe?Be+=se(Re,Fe):0,Re.y=0,Fe=Re)});var me=function(Re){for(var He;He=Re.children;)Re=He[0];return Re}(Pe),Me=function(Re){for(var He;He=Re.children;)Re=He[He.length-1];return Re}(Pe),Le=me.x-se(me,Me)/2,Ne=Me.x+se(Me,me)/2;return Pe.eachAfter(ke?function(Re){Re.x=(Re.x-Pe.x)*ge,Re.y=(Pe.y-Re.y)*Ie}:function(Re){Re.x=(Re.x-Le)/(Ne-Le)*ge,Re.y=(1-(Pe.y?Re.y/Pe.y:1))*Ie})}return Se.separation=function(Pe){return arguments.length?(se=Pe,Se):se},Se.size=function(Pe){return arguments.length?(ke=!1,ge=+Pe[0],Ie=+Pe[1],Se):ke?null:[ge,Ie]},Se.nodeSize=function(Pe){return arguments.length?(ke=!0,ge=+Pe[0],Ie=+Pe[1],Se):ke?[ge,Ie]:null},Se}function _(se){var ge=0,Ie=se.children,ke=Ie&&Ie.length;if(ke)for(;--ke>=0;)ge+=Ie[ke].value;else ge=1;se.value=ge}function p(se,ge){var Ie,ke,Se,Pe,Fe,Be=new r(se),me=+se.value&&(Be.value=se.value),Me=[Be];for(null==ge&&(ge=l);Ie=Me.pop();)if(me&&(Ie.value=+Ie.data.value),(Se=ge(Ie.data))&&(Fe=Se.length))for(Ie.children=new Array(Fe),Pe=Fe-1;Pe>=0;--Pe)Me.push(ke=Ie.children[Pe]=new r(Se[Pe])),ke.parent=Ie,ke.depth=Ie.depth+1;return Be.eachBefore(i)}function l(se){return se.children}function t(se){se.data=se.data.data}function i(se){var ge=0;do{se.height=ge}while((se=se.parent)&&se.height<++ge)}function r(se){this.data=se,this.depth=this.height=0,this.parent=null}e.r(F),e.d(F,{cluster:function(){return T},hierarchy:function(){return p},pack:function(){return O},packEnclose:function(){return a},packSiblings:function(){return S},partition:function(){return B},stratify:function(){return $},tree:function(){return we},treemap:function(){return Ce},treemapBinary:function(){return Oe},treemapDice:function(){return Y},treemapResquarify:function(){return ue},treemapSlice:function(){return Te},treemapSliceDice:function(){return be},treemapSquarify:function(){return xe}}),r.prototype=p.prototype={constructor:r,count:function(){return this.eachAfter(_)},each:function(se){var ge,Ie,ke,Se,Pe=this,Fe=[Pe];do{for(ge=Fe.reverse(),Fe=[];Pe=ge.pop();)if(se(Pe),Ie=Pe.children)for(ke=0,Se=Ie.length;ke<Se;++ke)Fe.push(Ie[ke])}while(Fe.length);return this},eachAfter:function(se){for(var ge,Ie,ke,Se=this,Pe=[Se],Fe=[];Se=Pe.pop();)if(Fe.push(Se),ge=Se.children)for(Ie=0,ke=ge.length;Ie<ke;++Ie)Pe.push(ge[Ie]);for(;Se=Fe.pop();)se(Se);return this},eachBefore:function(se){for(var ge,Ie,ke=this,Se=[ke];ke=Se.pop();)if(se(ke),ge=ke.children)for(Ie=ge.length-1;Ie>=0;--Ie)Se.push(ge[Ie]);return this},sum:function(se){return this.eachAfter(function(ge){for(var Ie=+se(ge.data)||0,ke=ge.children,Se=ke&&ke.length;--Se>=0;)Ie+=ke[Se].value;ge.value=Ie})},sort:function(se){return this.eachBefore(function(ge){ge.children&&ge.children.sort(se)})},path:function(se){for(var ge=this,Ie=function(Pe,Fe){if(Pe===Fe)return Pe;var Be=Pe.ancestors(),me=Fe.ancestors(),Me=null;for(Pe=Be.pop(),Fe=me.pop();Pe===Fe;)Me=Pe,Pe=Be.pop(),Fe=me.pop();return Me}(ge,se),ke=[ge];ge!==Ie;)ke.push(ge=ge.parent);for(var Se=ke.length;se!==Ie;)ke.splice(Se,0,se),se=se.parent;return ke},ancestors:function(){for(var se=this,ge=[se];se=se.parent;)ge.push(se);return ge},descendants:function(){var se=[];return this.each(function(ge){se.push(ge)}),se},leaves:function(){var se=[];return this.eachBefore(function(ge){ge.children||se.push(ge)}),se},links:function(){var se=this,ge=[];return se.each(function(Ie){Ie!==se&&ge.push({source:Ie.parent,target:Ie})}),ge},copy:function(){return p(this).eachBefore(t)}};var n=Array.prototype.slice;function a(se){for(var ge,Ie,ke=0,Se=(se=function(Fe){for(var Be,me,Me=Fe.length;Me;)me=Math.random()*Me--|0,Be=Fe[Me],Fe[Me]=Fe[me],Fe[me]=Be;return Fe}(n.call(se))).length,Pe=[];ke<Se;)ge=se[ke],Ie&&f(Ie,ge)?++ke:(Ie=y(Pe=s(Pe,ge)),ke=0);return Ie}function s(se,ge){var Ie,ke;if(c(ge,se))return[ge];for(Ie=0;Ie<se.length;++Ie)if(u(ge,se[Ie])&&c(d(se[Ie],ge),se))return[se[Ie],ge];for(Ie=0;Ie<se.length-1;++Ie)for(ke=Ie+1;ke<se.length;++ke)if(u(d(se[Ie],se[ke]),ge)&&u(d(se[Ie],ge),se[ke])&&u(d(se[ke],ge),se[Ie])&&c(m(se[Ie],se[ke],ge),se))return[se[Ie],se[ke],ge];throw new Error}function u(se,ge){var Ie=se.r-ge.r,ke=ge.x-se.x,Se=ge.y-se.y;return Ie<0||Ie*Ie<ke*ke+Se*Se}function f(se,ge){var Ie=se.r-ge.r+1e-6,ke=ge.x-se.x,Se=ge.y-se.y;return Ie>0&&Ie*Ie>ke*ke+Se*Se}function c(se,ge){for(var Ie=0;Ie<ge.length;++Ie)if(!f(se,ge[Ie]))return!1;return!0}function y(se){switch(se.length){case 1:return{x:(ge=se[0]).x,y:ge.y,r:ge.r};case 2:return d(se[0],se[1]);case 3:return m(se[0],se[1],se[2])}var ge}function d(se,ge){var Ie=se.x,ke=se.y,Se=se.r,Pe=ge.x,Fe=ge.y,Be=ge.r,me=Pe-Ie,Me=Fe-ke,Le=Be-Se,Ne=Math.sqrt(me*me+Me*Me);return{x:(Ie+Pe+me/Ne*Le)/2,y:(ke+Fe+Me/Ne*Le)/2,r:(Ne+Se+Be)/2}}function m(se,ge,Ie){var ke=se.x,Se=se.y,Pe=se.r,Fe=ge.x,Be=ge.y,me=ge.r,Me=Ie.x,Le=Ie.y,Ne=Ie.r,Re=ke-Fe,He=ke-Me,Ze=Se-Be,nt=Se-Le,ft=me-Pe,ht=Ne-Pe,Tt=ke*ke+Se*Se-Pe*Pe,At=Tt-Fe*Fe-Be*Be+me*me,_t=Tt-Me*Me-Le*Le+Ne*Ne,ot=He*Ze-Re*nt,it=(Ze*_t-nt*At)/(2*ot)-ke,Pt=(nt*ft-Ze*ht)/ot,jt=(He*At-Re*_t)/(2*ot)-Se,Ut=(Re*ht-He*ft)/ot,Rt=Pt*Pt+Ut*Ut-1,Je=2*(Pe+it*Pt+jt*Ut),et=it*it+jt*jt-Pe*Pe,qe=-(Rt?(Je+Math.sqrt(Je*Je-4*Rt*et))/(2*Rt):et/Je);return{x:ke+it+Pt*qe,y:Se+jt+Ut*qe,r:qe}}function g(se,ge,Ie){var ke,Se,Pe,Fe,Be=se.x-ge.x,me=se.y-ge.y,Me=Be*Be+me*me;Me?(Se=ge.r+Ie.r,Fe=se.r+Ie.r,(Se*=Se)>(Fe*=Fe)?(ke=(Me+Fe-Se)/(2*Me),Pe=Math.sqrt(Math.max(0,Fe/Me-ke*ke)),Ie.x=se.x-ke*Be-Pe*me,Ie.y=se.y-ke*me+Pe*Be):(ke=(Me+Se-Fe)/(2*Me),Pe=Math.sqrt(Math.max(0,Se/Me-ke*ke)),Ie.x=ge.x+ke*Be-Pe*me,Ie.y=ge.y+ke*me+Pe*Be)):(Ie.x=ge.x+Ie.r,Ie.y=ge.y)}function x(se,ge){var Ie=se.r+ge.r-1e-6,ke=ge.x-se.x,Se=ge.y-se.y;return Ie>0&&Ie*Ie>ke*ke+Se*Se}function v(se){var ge=se._,Ie=se.next._,ke=ge.r+Ie.r,Se=(ge.x*Ie.r+Ie.x*ge.r)/ke,Pe=(ge.y*Ie.r+Ie.y*ge.r)/ke;return Se*Se+Pe*Pe}function b(se){this._=se,this.next=null,this.previous=null}function h(se){if(!(Se=se.length))return 0;var ge,Ie,ke,Se,Pe,Fe,Be,me,Me,Le,Ne;if((ge=se[0]).x=0,ge.y=0,!(Se>1))return ge.r;if(ge.x=-(Ie=se[1]).r,Ie.x=ge.r,Ie.y=0,!(Se>2))return ge.r+Ie.r;g(Ie,ge,ke=se[2]),ge=new b(ge),Ie=new b(Ie),ke=new b(ke),ge.next=ke.previous=Ie,Ie.next=ge.previous=ke,ke.next=Ie.previous=ge;e:for(Be=3;Be<Se;++Be){g(ge._,Ie._,ke=se[Be]),ke=new b(ke),me=Ie.next,Me=ge.previous,Le=Ie._.r,Ne=ge._.r;do{if(Le<=Ne){if(x(me._,ke._)){ge.next=Ie=me,Ie.previous=ge,--Be;continue e}Le+=me._.r,me=me.next}else{if(x(Me._,ke._)){(ge=Me).next=Ie,Ie.previous=ge,--Be;continue e}Ne+=Me._.r,Me=Me.previous}}while(me!==Me.next);for(ke.previous=ge,ke.next=Ie,ge.next=Ie.previous=Ie=ke,Pe=v(ge);(ke=ke.next)!==Ie;)(Fe=v(ke))<Pe&&(ge=ke,Pe=Fe);Ie=ge.next}for(ge=[Ie._],ke=Ie;(ke=ke.next)!==Ie;)ge.push(ke._);for(ke=a(ge),Be=0;Be<Se;++Be)(ge=se[Be]).x-=ke.x,ge.y-=ke.y;return ke.r}function S(se){return h(se),se}function w(se){if("function"!=typeof se)throw new Error;return se}function E(){return 0}function P(se){return function(){return se}}function I(se){return Math.sqrt(se.value)}function O(){var se=null,ge=1,Ie=1,ke=E;function Se(Pe){return Pe.x=ge/2,Pe.y=Ie/2,se?Pe.eachBefore(z(se)).eachAfter(U(ke,.5)).eachBefore(R(1)):Pe.eachBefore(z(I)).eachAfter(U(E,1)).eachAfter(U(ke,Pe.r/Math.min(ge,Ie))).eachBefore(R(Math.min(ge,Ie)/(2*Pe.r))),Pe}return Se.radius=function(Pe){return arguments.length?(se=null==(Fe=Pe)?null:w(Fe),Se):se;var Fe},Se.size=function(Pe){return arguments.length?(ge=+Pe[0],Ie=+Pe[1],Se):[ge,Ie]},Se.padding=function(Pe){return arguments.length?(ke="function"==typeof Pe?Pe:P(+Pe),Se):ke},Se}function z(se){return function(ge){ge.children||(ge.r=Math.max(0,+se(ge)||0))}}function U(se,ge){return function(Ie){if(ke=Ie.children){var ke,Se,Pe,Fe=ke.length,Be=se(Ie)*ge||0;if(Be)for(Se=0;Se<Fe;++Se)ke[Se].r+=Be;if(Pe=h(ke),Be)for(Se=0;Se<Fe;++Se)ke[Se].r-=Be;Ie.r=Pe+Be}}}function R(se){return function(ge){var Ie=ge.parent;ge.r*=se,Ie&&(ge.x=Ie.x+se*ge.x,ge.y=Ie.y+se*ge.y)}}function j(se){se.x0=Math.round(se.x0),se.y0=Math.round(se.y0),se.x1=Math.round(se.x1),se.y1=Math.round(se.y1)}function Y(se,ge,Ie,ke,Se){for(var Pe,Fe=se.children,Be=-1,me=Fe.length,Me=se.value&&(ke-ge)/se.value;++Be<me;)(Pe=Fe[Be]).y0=Ie,Pe.y1=Se,Pe.x0=ge,Pe.x1=ge+=Pe.value*Me}function B(){var se=1,ge=1,Ie=0,ke=!1;function Se(Pe){var Be,me,Fe=Pe.height+1;return Pe.x0=Pe.y0=Ie,Pe.x1=se,Pe.y1=ge/Fe,Pe.eachBefore((Be=ge,me=Fe,function(Me){Me.children&&Y(Me,Me.x0,Be*(Me.depth+1)/me,Me.x1,Be*(Me.depth+2)/me);var Le=Me.x0,Ne=Me.y0,Re=Me.x1-Ie,He=Me.y1-Ie;Re<Le&&(Le=Re=(Le+Re)/2),He<Ne&&(Ne=He=(Ne+He)/2),Me.x0=Le,Me.y0=Ne,Me.x1=Re,Me.y1=He})),ke&&Pe.eachBefore(j),Pe}return Se.round=function(Pe){return arguments.length?(ke=!!Pe,Se):ke},Se.size=function(Pe){return arguments.length?(se=+Pe[0],ge=+Pe[1],Se):[se,ge]},Se.padding=function(Pe){return arguments.length?(Ie=+Pe,Se):Ie},Se}var V="$",q={depth:-1},ie={};function te(se){return se.id}function ee(se){return se.parentId}function $(){var se=te,ge=ee;function Ie(ke){var Se,Pe,Fe,Be,me,Me,Le,Ne=ke.length,Re=new Array(Ne),He={};for(Pe=0;Pe<Ne;++Pe)me=Re[Pe]=new r(Se=ke[Pe]),null!=(Me=se(Se,Pe,ke))&&(Me+="")&&(He[Le=V+(me.id=Me)]=Le in He?ie:me);for(Pe=0;Pe<Ne;++Pe)if(me=Re[Pe],null!=(Me=ge(ke[Pe],Pe,ke))&&(Me+="")){if(!(Be=He[V+Me]))throw new Error("missing: "+Me);if(Be===ie)throw new Error("ambiguous: "+Me);Be.children?Be.children.push(me):Be.children=[me],me.parent=Be}else{if(Fe)throw new Error("multiple roots");Fe=me}if(!Fe)throw new Error("no root");if(Fe.parent=q,Fe.eachBefore(function(Ze){Ze.depth=Ze.parent.depth+1,--Ne}).eachBefore(i),Fe.parent=null,Ne>0)throw new Error("cycle");return Fe}return Ie.id=function(ke){return arguments.length?(se=w(ke),Ie):se},Ie.parentId=function(ke){return arguments.length?(ge=w(ke),Ie):ge},Ie}function J(se,ge){return se.parent===ge.parent?1:2}function X(se){var ge=se.children;return ge?ge[0]:se.t}function ae(se){var ge=se.children;return ge?ge[ge.length-1]:se.t}function ce(se,ge,Ie){var ke=Ie/(ge.i-se.i);ge.c-=ke,ge.s+=Ie,se.c+=ke,ge.z+=Ie,ge.m+=Ie}function le(se,ge,Ie){return se.a.parent===ge.parent?se.a:Ie}function pe(se,ge){this._=se,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=ge}function we(){var se=J,ge=1,Ie=1,ke=null;function Se(me){var Me=function(ht){for(var Tt,At,_t,ot,it,Pt=new pe(ht,0),jt=[Pt];Tt=jt.pop();)if(_t=Tt._.children)for(Tt.children=new Array(it=_t.length),ot=it-1;ot>=0;--ot)jt.push(At=Tt.children[ot]=new pe(_t[ot],ot)),At.parent=Tt;return(Pt.parent=new pe(null,0)).children=[Pt],Pt}(me);if(Me.eachAfter(Pe),Me.parent.m=-Me.z,Me.eachBefore(Fe),ke)me.eachBefore(Be);else{var Le=me,Ne=me,Re=me;me.eachBefore(function(ht){ht.x<Le.x&&(Le=ht),ht.x>Ne.x&&(Ne=ht),ht.depth>Re.depth&&(Re=ht)});var He=Le===Ne?1:se(Le,Ne)/2,Ze=He-Le.x,nt=ge/(Ne.x+He+Ze),ft=Ie/(Re.depth||1);me.eachBefore(function(ht){ht.x=(ht.x+Ze)*nt,ht.y=ht.depth*ft})}return me}function Pe(me){var Me=me.children,Le=me.parent.children,Ne=me.i?Le[me.i-1]:null;if(Me){!function(He){for(var Ze,nt=0,ft=0,ht=He.children,Tt=ht.length;--Tt>=0;)(Ze=ht[Tt]).z+=nt,Ze.m+=nt,nt+=Ze.s+(ft+=Ze.c)}(me);var Re=(Me[0].z+Me[Me.length-1].z)/2;Ne?(me.z=Ne.z+se(me._,Ne._),me.m=me.z-Re):me.z=Re}else Ne&&(me.z=Ne.z+se(me._,Ne._));me.parent.A=function(He,Ze,nt){if(Ze){for(var ft,ht=He,Tt=He,At=Ze,_t=ht.parent.children[0],ot=ht.m,it=Tt.m,Pt=At.m,jt=_t.m;At=ae(At),ht=X(ht),At&&ht;)_t=X(_t),(Tt=ae(Tt)).a=He,(ft=At.z+Pt-ht.z-ot+se(At._,ht._))>0&&(ce(le(At,He,nt),He,ft),ot+=ft,it+=ft),Pt+=At.m,ot+=ht.m,jt+=_t.m,it+=Tt.m;At&&!ae(Tt)&&(Tt.t=At,Tt.m+=Pt-it),ht&&!X(_t)&&(_t.t=ht,_t.m+=ot-jt,nt=He)}return nt}(me,Ne,me.parent.A||Le[0])}function Fe(me){me._.x=me.z+me.parent.m,me.m+=me.parent.m}function Be(me){me.x*=ge,me.y=me.depth*Ie}return Se.separation=function(me){return arguments.length?(se=me,Se):se},Se.size=function(me){return arguments.length?(ke=!1,ge=+me[0],Ie=+me[1],Se):ke?null:[ge,Ie]},Se.nodeSize=function(me){return arguments.length?(ke=!0,ge=+me[0],Ie=+me[1],Se):ke?[ge,Ie]:null},Se}function Te(se,ge,Ie,ke,Se){for(var Pe,Fe=se.children,Be=-1,me=Fe.length,Me=se.value&&(Se-Ie)/se.value;++Be<me;)(Pe=Fe[Be]).x0=ge,Pe.x1=ke,Pe.y0=Ie,Pe.y1=Ie+=Pe.value*Me}pe.prototype=Object.create(r.prototype);var ye=(1+Math.sqrt(5))/2;function ve(se,ge,Ie,ke,Se,Pe){for(var Fe,Be,me,Me,Le,Ne,Re,He,Ze,nt,ft,ht=[],Tt=ge.children,At=0,_t=0,ot=Tt.length,it=ge.value;At<ot;){me=Se-Ie,Me=Pe-ke;do{Le=Tt[_t++].value}while(!Le&&_t<ot);for(Ne=Re=Le,ft=Le*Le*(nt=Math.max(Me/me,me/Me)/(it*se)),Ze=Math.max(Re/ft,ft/Ne);_t<ot;++_t){if(Le+=Be=Tt[_t].value,Be<Ne&&(Ne=Be),Be>Re&&(Re=Be),ft=Le*Le*nt,(He=Math.max(Re/ft,ft/Ne))>Ze){Le-=Be;break}Ze=He}ht.push(Fe={value:Le,dice:me<Me,children:Tt.slice(At,_t)}),Fe.dice?Y(Fe,Ie,ke,Se,it?ke+=Me*Le/it:Pe):Te(Fe,Ie,ke,it?Ie+=me*Le/it:Se,Pe),it-=Le,At=_t}return ht}var xe=function se(ge){function Ie(ke,Se,Pe,Fe,Be){ve(ge,ke,Se,Pe,Fe,Be)}return Ie.ratio=function(ke){return se((ke=+ke)>1?ke:1)},Ie}(ye);function Ce(){var se=xe,ge=!1,Ie=1,ke=1,Se=[0],Pe=E,Fe=E,Be=E,me=E,Me=E;function Le(Re){return Re.x0=Re.y0=0,Re.x1=Ie,Re.y1=ke,Re.eachBefore(Ne),Se=[0],ge&&Re.eachBefore(j),Re}function Ne(Re){var He=Se[Re.depth],Ze=Re.x0+He,nt=Re.y0+He,ft=Re.x1-He,ht=Re.y1-He;ft<Ze&&(Ze=ft=(Ze+ft)/2),ht<nt&&(nt=ht=(nt+ht)/2),Re.x0=Ze,Re.y0=nt,Re.x1=ft,Re.y1=ht,Re.children&&(He=Se[Re.depth+1]=Pe(Re)/2,Ze+=Me(Re)-He,nt+=Fe(Re)-He,(ft-=Be(Re)-He)<Ze&&(Ze=ft=(Ze+ft)/2),(ht-=me(Re)-He)<nt&&(nt=ht=(nt+ht)/2),se(Re,Ze,nt,ft,ht))}return Le.round=function(Re){return arguments.length?(ge=!!Re,Le):ge},Le.size=function(Re){return arguments.length?(Ie=+Re[0],ke=+Re[1],Le):[Ie,ke]},Le.tile=function(Re){return arguments.length?(se=w(Re),Le):se},Le.padding=function(Re){return arguments.length?Le.paddingInner(Re).paddingOuter(Re):Le.paddingInner()},Le.paddingInner=function(Re){return arguments.length?(Pe="function"==typeof Re?Re:P(+Re),Le):Pe},Le.paddingOuter=function(Re){return arguments.length?Le.paddingTop(Re).paddingRight(Re).paddingBottom(Re).paddingLeft(Re):Le.paddingTop()},Le.paddingTop=function(Re){return arguments.length?(Fe="function"==typeof Re?Re:P(+Re),Le):Fe},Le.paddingRight=function(Re){return arguments.length?(Be="function"==typeof Re?Re:P(+Re),Le):Be},Le.paddingBottom=function(Re){return arguments.length?(me="function"==typeof Re?Re:P(+Re),Le):me},Le.paddingLeft=function(Re){return arguments.length?(Me="function"==typeof Re?Re:P(+Re),Le):Me},Le}function Oe(se,ge,Ie,ke,Se){var Pe,Fe,Be=se.children,me=Be.length,Me=new Array(me+1);for(Me[0]=Fe=Pe=0;Pe<me;++Pe)Me[Pe+1]=Fe+=Be[Pe].value;!function Le(Ne,Re,He,Ze,nt,ft,ht){if(Ne>=Re-1){var Tt=Be[Ne];return Tt.x0=Ze,Tt.y0=nt,Tt.x1=ft,void(Tt.y1=ht)}for(var At=Me[Ne],_t=He/2+At,ot=Ne+1,it=Re-1;ot<it;){var Pt=ot+it>>>1;Me[Pt]<_t?ot=Pt+1:it=Pt}_t-Me[ot-1]<Me[ot]-_t&&Ne+1<ot&&--ot;var jt=Me[ot]-At,Ut=He-jt;if(ft-Ze>ht-nt){var Rt=(Ze*Ut+ft*jt)/He;Le(Ne,ot,jt,Ze,nt,Rt,ht),Le(ot,Re,Ut,Rt,nt,ft,ht)}else{var Je=(nt*Ut+ht*jt)/He;Le(Ne,ot,jt,Ze,nt,ft,Je),Le(ot,Re,Ut,Ze,Je,ft,ht)}}(0,me,se.value,ge,Ie,ke,Se)}function be(se,ge,Ie,ke,Se){(1&se.depth?Te:Y)(se,ge,Ie,ke,Se)}var ue=function se(ge){function Ie(ke,Se,Pe,Fe,Be){if((me=ke._squarify)&&me.ratio===ge)for(var me,Me,Le,Ne,Re,He=-1,Ze=me.length,nt=ke.value;++He<Ze;){for(Le=(Me=me[He]).children,Ne=Me.value=0,Re=Le.length;Ne<Re;++Ne)Me.value+=Le[Ne].value;Me.dice?Y(Me,Se,Pe,Fe,Pe+=(Be-Pe)*Me.value/nt):Te(Me,Se,Pe,Se+=(Fe-Se)*Me.value/nt,Be),nt-=Me.value}else ke._squarify=me=ve(ge,ke,Se,Pe,Fe,Be),me.ratio=ge}return Ie.ratio=function(ke){return se((ke=+ke)>1?ke:1)},Ie}(ye)},10132:function(ne,F,e){"use strict";e.d(F,{ak:function(){return f}});var M=Math.PI,k=2*M,o=1e-6,T=k-o;function _(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function p(){return new _}_.prototype=p.prototype={constructor:_,moveTo:function(c,y){this._+="M"+(this._x0=this._x1=+c)+","+(this._y0=this._y1=+y)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(c,y){this._+="L"+(this._x1=+c)+","+(this._y1=+y)},quadraticCurveTo:function(c,y,d,m){this._+="Q"+ +c+","+ +y+","+(this._x1=+d)+","+(this._y1=+m)},bezierCurveTo:function(c,y,d,m,g,x){this._+="C"+ +c+","+ +y+","+ +d+","+ +m+","+(this._x1=+g)+","+(this._y1=+x)},arcTo:function(c,y,d,m,g){var x=this._x1,v=this._y1,b=(d=+d)-(c=+c),h=(m=+m)-(y=+y),S=x-c,w=v-y,E=S*S+w*w;if((g=+g)<0)throw new Error("negative radius: "+g);if(null===this._x1)this._+="M"+(this._x1=c)+","+(this._y1=y);else if(E>o)if(Math.abs(w*b-h*S)>o&&g){var P=d-x,I=m-v,O=b*b+h*h,z=P*P+I*I,U=Math.sqrt(O),R=Math.sqrt(E),j=g*Math.tan((M-Math.acos((O+E-z)/(2*U*R)))/2),Y=j/R,B=j/U;Math.abs(Y-1)>o&&(this._+="L"+(c+Y*S)+","+(y+Y*w)),this._+="A"+g+","+g+",0,0,"+ +(w*P>S*I)+","+(this._x1=c+B*b)+","+(this._y1=y+B*h)}else this._+="L"+(this._x1=c)+","+(this._y1=y)},arc:function(c,y,d,m,g,x){c=+c,y=+y,x=!!x;var v=(d=+d)*Math.cos(m),b=d*Math.sin(m),h=c+v,S=y+b,w=1^x,E=x?m-g:g-m;if(d<0)throw new Error("negative radius: "+d);null===this._x1?this._+="M"+h+","+S:(Math.abs(this._x1-h)>o||Math.abs(this._y1-S)>o)&&(this._+="L"+h+","+S),d&&(E<0&&(E=E%k+k),E>T?this._+="A"+d+","+d+",0,1,"+w+","+(c-v)+","+(y-b)+"A"+d+","+d+",0,1,"+w+","+(this._x1=h)+","+(this._y1=S):E>o&&(this._+="A"+d+","+d+",0,"+ +(E>=M)+","+w+","+(this._x1=c+d*Math.cos(g))+","+(this._y1=y+d*Math.sin(g))))},rect:function(c,y,d,m){this._+="M"+(this._x0=this._x1=+c)+","+(this._y0=this._y1=+y)+"h"+ +d+"v"+ +m+"h"+-d+"Z"},toString:function(){return this._}};var l=p,t=Array.prototype.slice;function i(c){return function(){return c}}function r(c){return c[0]}function n(c){return c[1]}function a(c){return c.source}function s(c){return c.target}function u(c,y,d,m,g){c.moveTo(y,d),c.bezierCurveTo(y=(y+m)/2,d,y,g,m,g)}function f(){return function(c){var y=a,d=s,m=r,g=n,x=null;function v(){var b,h=t.call(arguments),S=y.apply(this,h),w=d.apply(this,h);if(x||(x=b=l()),c(x,+m.apply(this,(h[0]=S,h)),+g.apply(this,h),+m.apply(this,(h[0]=w,h)),+g.apply(this,h)),b)return x=null,b+""||null}return v.source=function(b){return arguments.length?(y=b,v):y},v.target=function(b){return arguments.length?(d=b,v):d},v.x=function(b){return arguments.length?(m="function"==typeof b?b:i(+b),v):m},v.y=function(b){return arguments.length?(g="function"==typeof b?b:i(+b),v):g},v.context=function(b){return arguments.length?(x=b??null,v):x},v}(u)}},94336:function(ne,F,e){"use strict";e.d(F,{Yn:function(){return a},m_:function(){return r},E9:function(){return s}});var M=e(8208),k=e(58931),o=e(46192),T=e(68936),_=e(32171),p=e(53528);function l(ot){if(0<=ot.y&&ot.y<100){var it=new Date(-1,ot.m,ot.d,ot.H,ot.M,ot.S,ot.L);return it.setFullYear(ot.y),it}return new Date(ot.y,ot.m,ot.d,ot.H,ot.M,ot.S,ot.L)}function t(ot){if(0<=ot.y&&ot.y<100){var it=new Date(Date.UTC(-1,ot.m,ot.d,ot.H,ot.M,ot.S,ot.L));return it.setUTCFullYear(ot.y),it}return new Date(Date.UTC(ot.y,ot.m,ot.d,ot.H,ot.M,ot.S,ot.L))}function i(ot,it,Pt){return{y:ot,m:it,d:Pt,H:0,M:0,S:0,L:0}}function r(ot){var it=ot.dateTime,Pt=ot.date,jt=ot.time,Ut=ot.periods,Rt=ot.days,Je=ot.shortDays,et=ot.months,qe=ot.shortMonths,$e=g(Ut),pt=x(Ut),ct=g(Rt),Ve=x(Rt),Ge=g(Je),ut=x(Je),Qe=g(et),yt=x(et),wt=g(qe),kt=x(qe),vt={a:function(Vt){return Je[Vt.getDay()]},A:function(Vt){return Rt[Vt.getDay()]},b:function(Vt){return qe[Vt.getMonth()]},B:function(Vt){return et[Vt.getMonth()]},c:null,d:$,e:$,f:le,H:J,I:X,j:ae,L:ce,m:pe,M:we,p:function(Vt){return Ut[+(Vt.getHours()>=12)]},q:function(Vt){return 1+~~(Vt.getMonth()/3)},Q:At,s:_t,S:Te,u:ye,U:ve,V:xe,w:Ce,W:Oe,x:null,X:null,y:be,Y:ue,Z:se,"%":Tt},Lt={a:function(Vt){return Je[Vt.getUTCDay()]},A:function(Vt){return Rt[Vt.getUTCDay()]},b:function(Vt){return qe[Vt.getUTCMonth()]},B:function(Vt){return et[Vt.getUTCMonth()]},c:null,d:ge,e:ge,f:Fe,H:Ie,I:ke,j:Se,L:Pe,m:Be,M:me,p:function(Vt){return Ut[+(Vt.getUTCHours()>=12)]},q:function(Vt){return 1+~~(Vt.getUTCMonth()/3)},Q:At,s:_t,S:Me,u:Le,U:Ne,V:Re,w:He,W:Ze,x:null,X:null,y:nt,Y:ft,Z:ht,"%":Tt},St={a:function(Vt,nn,gn){var Jt=Ge.exec(nn.slice(gn));return Jt?(Vt.w=ut[Jt[0].toLowerCase()],gn+Jt[0].length):-1},A:function(Vt,nn,gn){var Jt=ct.exec(nn.slice(gn));return Jt?(Vt.w=Ve[Jt[0].toLowerCase()],gn+Jt[0].length):-1},b:function(Vt,nn,gn){var Jt=wt.exec(nn.slice(gn));return Jt?(Vt.m=kt[Jt[0].toLowerCase()],gn+Jt[0].length):-1},B:function(Vt,nn,gn){var Jt=Qe.exec(nn.slice(gn));return Jt?(Vt.m=yt[Jt[0].toLowerCase()],gn+Jt[0].length):-1},c:function(Vt,nn,gn){return Bt(Vt,it,nn,gn)},d:U,e:U,f:q,H:j,I:j,j:R,L:V,m:z,M:Y,p:function(Vt,nn,gn){var Jt=$e.exec(nn.slice(gn));return Jt?(Vt.p=pt[Jt[0].toLowerCase()],gn+Jt[0].length):-1},q:O,Q:te,s:ee,S:B,u:b,U:h,V:S,w:v,W:w,x:function(Vt,nn,gn){return Bt(Vt,Pt,nn,gn)},X:function(Vt,nn,gn){return Bt(Vt,jt,nn,gn)},y:P,Y:E,Z:I,"%":ie};function Ot(Vt,nn){return function(gn){var Jt,an,Xt,Gn=[],Dn=-1,An=0,cn=Vt.length;for(gn instanceof Date||(gn=new Date(+gn));++Dn<cn;)37===Vt.charCodeAt(Dn)&&(Gn.push(Vt.slice(An,Dn)),null!=(an=u[Jt=Vt.charAt(++Dn)])?Jt=Vt.charAt(++Dn):an="e"===Jt?" ":"0",(Xt=nn[Jt])&&(Jt=Xt(gn,an)),Gn.push(Jt),An=Dn+1);return Gn.push(Vt.slice(An,Dn)),Gn.join("")}}function Nt(Vt,nn){return function(gn){var Jt,an,Xt=i(1900,void 0,1);if(Bt(Xt,Vt,gn+="",0)!=gn.length)return null;if("Q"in Xt)return new Date(Xt.Q);if("s"in Xt)return new Date(1e3*Xt.s+("L"in Xt?Xt.L:0));if(nn&&!("Z"in Xt)&&(Xt.Z=0),"p"in Xt&&(Xt.H=Xt.H%12+12*Xt.p),void 0===Xt.m&&(Xt.m="q"in Xt?Xt.q:0),"V"in Xt){if(Xt.V<1||Xt.V>53)return null;"w"in Xt||(Xt.w=1),"Z"in Xt?(an=(Jt=t(i(Xt.y,0,1))).getUTCDay(),Jt=an>4||0===an?M.ot.ceil(Jt):(0,M.ot)(Jt),Jt=k.c.offset(Jt,7*(Xt.V-1)),Xt.y=Jt.getUTCFullYear(),Xt.m=Jt.getUTCMonth(),Xt.d=Jt.getUTCDate()+(Xt.w+6)%7):(an=(Jt=l(i(Xt.y,0,1))).getDay(),Jt=an>4||0===an?o.qT.ceil(Jt):(0,o.qT)(Jt),Jt=T.c.offset(Jt,7*(Xt.V-1)),Xt.y=Jt.getFullYear(),Xt.m=Jt.getMonth(),Xt.d=Jt.getDate()+(Xt.w+6)%7)}else("W"in Xt||"U"in Xt)&&("w"in Xt||(Xt.w="u"in Xt?Xt.u%7:"W"in Xt?1:0),an="Z"in Xt?t(i(Xt.y,0,1)).getUTCDay():l(i(Xt.y,0,1)).getDay(),Xt.m=0,Xt.d="W"in Xt?(Xt.w+6)%7+7*Xt.W-(an+5)%7:Xt.w+7*Xt.U-(an+6)%7);return"Z"in Xt?(Xt.H+=Xt.Z/100|0,Xt.M+=Xt.Z%100,t(Xt)):l(Xt)}}function Bt(Vt,nn,gn,Jt){for(var an,Xt,Gn=0,Dn=nn.length,An=gn.length;Gn<Dn;){if(Jt>=An)return-1;if(37===(an=nn.charCodeAt(Gn++))){if(an=nn.charAt(Gn++),!(Xt=St[an in u?nn.charAt(Gn++):an])||(Jt=Xt(Vt,gn,Jt))<0)return-1}else if(an!=gn.charCodeAt(Jt++))return-1}return Jt}return vt.x=Ot(Pt,vt),vt.X=Ot(jt,vt),vt.c=Ot(it,vt),Lt.x=Ot(Pt,Lt),Lt.X=Ot(jt,Lt),Lt.c=Ot(it,Lt),{format:function(Vt){var nn=Ot(Vt+="",vt);return nn.toString=function(){return Vt},nn},parse:function(Vt){var nn=Nt(Vt+="",!1);return nn.toString=function(){return Vt},nn},utcFormat:function(Vt){var nn=Ot(Vt+="",Lt);return nn.toString=function(){return Vt},nn},utcParse:function(Vt){var nn=Nt(Vt+="",!0);return nn.toString=function(){return Vt},nn}}}var n,a,s,u={"-":"",_:" ",0:"0"},f=/^\s*\d+/,c=/^%/,y=/[\\^$*+?|[\]().{}]/g;function d(ot,it,Pt){var jt=ot<0?"-":"",Ut=(jt?-ot:ot)+"",Rt=Ut.length;return jt+(Rt<Pt?new Array(Pt-Rt+1).join(it)+Ut:Ut)}function m(ot){return ot.replace(y,"\\$&")}function g(ot){return new RegExp("^(?:"+ot.map(m).join("|")+")","i")}function x(ot){for(var it={},Pt=-1,jt=ot.length;++Pt<jt;)it[ot[Pt].toLowerCase()]=Pt;return it}function v(ot,it,Pt){var jt=f.exec(it.slice(Pt,Pt+1));return jt?(ot.w=+jt[0],Pt+jt[0].length):-1}function b(ot,it,Pt){var jt=f.exec(it.slice(Pt,Pt+1));return jt?(ot.u=+jt[0],Pt+jt[0].length):-1}function h(ot,it,Pt){var jt=f.exec(it.slice(Pt,Pt+2));return jt?(ot.U=+jt[0],Pt+jt[0].length):-1}function S(ot,it,Pt){var jt=f.exec(it.slice(Pt,Pt+2));return jt?(ot.V=+jt[0],Pt+jt[0].length):-1}function w(ot,it,Pt){var jt=f.exec(it.slice(Pt,Pt+2));return jt?(ot.W=+jt[0],Pt+jt[0].length):-1}function E(ot,it,Pt){var jt=f.exec(it.slice(Pt,Pt+4));return jt?(ot.y=+jt[0],Pt+jt[0].length):-1}function P(ot,it,Pt){var jt=f.exec(it.slice(Pt,Pt+2));return jt?(ot.y=+jt[0]+(+jt[0]>68?1900:2e3),Pt+jt[0].length):-1}function I(ot,it,Pt){var jt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(it.slice(Pt,Pt+6));return jt?(ot.Z=jt[1]?0:-(jt[2]+(jt[3]||"00")),Pt+jt[0].length):-1}function O(ot,it,Pt){var jt=f.exec(it.slice(Pt,Pt+1));return jt?(ot.q=3*jt[0]-3,Pt+jt[0].length):-1}function z(ot,it,Pt){var jt=f.exec(it.slice(Pt,Pt+2));return jt?(ot.m=jt[0]-1,Pt+jt[0].length):-1}function U(ot,it,Pt){var jt=f.exec(it.slice(Pt,Pt+2));return jt?(ot.d=+jt[0],Pt+jt[0].length):-1}function R(ot,it,Pt){var jt=f.exec(it.slice(Pt,Pt+3));return jt?(ot.m=0,ot.d=+jt[0],Pt+jt[0].length):-1}function j(ot,it,Pt){var jt=f.exec(it.slice(Pt,Pt+2));return jt?(ot.H=+jt[0],Pt+jt[0].length):-1}function Y(ot,it,Pt){var jt=f.exec(it.slice(Pt,Pt+2));return jt?(ot.M=+jt[0],Pt+jt[0].length):-1}function B(ot,it,Pt){var jt=f.exec(it.slice(Pt,Pt+2));return jt?(ot.S=+jt[0],Pt+jt[0].length):-1}function V(ot,it,Pt){var jt=f.exec(it.slice(Pt,Pt+3));return jt?(ot.L=+jt[0],Pt+jt[0].length):-1}function q(ot,it,Pt){var jt=f.exec(it.slice(Pt,Pt+6));return jt?(ot.L=Math.floor(jt[0]/1e3),Pt+jt[0].length):-1}function ie(ot,it,Pt){var jt=c.exec(it.slice(Pt,Pt+1));return jt?Pt+jt[0].length:-1}function te(ot,it,Pt){var jt=f.exec(it.slice(Pt));return jt?(ot.Q=+jt[0],Pt+jt[0].length):-1}function ee(ot,it,Pt){var jt=f.exec(it.slice(Pt));return jt?(ot.s=+jt[0],Pt+jt[0].length):-1}function $(ot,it){return d(ot.getDate(),it,2)}function J(ot,it){return d(ot.getHours(),it,2)}function X(ot,it){return d(ot.getHours()%12||12,it,2)}function ae(ot,it){return d(1+T.c.count((0,_.c)(ot),ot),it,3)}function ce(ot,it){return d(ot.getMilliseconds(),it,3)}function le(ot,it){return ce(ot,it)+"000"}function pe(ot,it){return d(ot.getMonth()+1,it,2)}function we(ot,it){return d(ot.getMinutes(),it,2)}function Te(ot,it){return d(ot.getSeconds(),it,2)}function ye(ot){var it=ot.getDay();return 0===it?7:it}function ve(ot,it){return d(o.uU.count((0,_.c)(ot)-1,ot),it,2)}function xe(ot,it){var Pt=ot.getDay();return ot=Pt>=4||0===Pt?(0,o.kD)(ot):o.kD.ceil(ot),d(o.kD.count((0,_.c)(ot),ot)+(4===(0,_.c)(ot).getDay()),it,2)}function Ce(ot){return ot.getDay()}function Oe(ot,it){return d(o.qT.count((0,_.c)(ot)-1,ot),it,2)}function be(ot,it){return d(ot.getFullYear()%100,it,2)}function ue(ot,it){return d(ot.getFullYear()%1e4,it,4)}function se(ot){var it=ot.getTimezoneOffset();return(it>0?"-":(it*=-1,"+"))+d(it/60|0,"0",2)+d(it%60,"0",2)}function ge(ot,it){return d(ot.getUTCDate(),it,2)}function Ie(ot,it){return d(ot.getUTCHours(),it,2)}function ke(ot,it){return d(ot.getUTCHours()%12||12,it,2)}function Se(ot,it){return d(1+k.c.count((0,p.c)(ot),ot),it,3)}function Pe(ot,it){return d(ot.getUTCMilliseconds(),it,3)}function Fe(ot,it){return Pe(ot,it)+"000"}function Be(ot,it){return d(ot.getUTCMonth()+1,it,2)}function me(ot,it){return d(ot.getUTCMinutes(),it,2)}function Me(ot,it){return d(ot.getUTCSeconds(),it,2)}function Le(ot){var it=ot.getUTCDay();return 0===it?7:it}function Ne(ot,it){return d(M.EV.count((0,p.c)(ot)-1,ot),it,2)}function Re(ot,it){var Pt=ot.getUTCDay();return ot=Pt>=4||0===Pt?(0,M.yA)(ot):M.yA.ceil(ot),d(M.yA.count((0,p.c)(ot),ot)+(4===(0,p.c)(ot).getUTCDay()),it,2)}function He(ot){return ot.getUTCDay()}function Ze(ot,it){return d(M.ot.count((0,p.c)(ot)-1,ot),it,2)}function nt(ot,it){return d(ot.getUTCFullYear()%100,it,2)}function ft(ot,it){return d(ot.getUTCFullYear()%1e4,it,4)}function ht(){return"+0000"}function Tt(){return"%"}function At(ot){return+ot}function _t(ot){return Math.floor(+ot/1e3)}n=r({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),a=n.format,s=n.utcFormat},68936:function(ne,F,e){"use strict";e.d(F,{m:function(){return T}});var M=e(81628),k=e(69792),o=(0,M.c)(function(_){_.setHours(0,0,0,0)},function(_,p){_.setDate(_.getDate()+p)},function(_,p){return(p-_-(p.getTimezoneOffset()-_.getTimezoneOffset())*k.iy)/k.SK},function(_){return _.getDate()-1});F.c=o;var T=o.range},69792:function(ne,F,e){"use strict";e.d(F,{KK:function(){return _},SK:function(){return T},cg:function(){return o},iy:function(){return k},yc:function(){return M}});var M=1e3,k=6e4,o=36e5,T=864e5,_=6048e5},73220:function(ne,F,e){"use strict";e.r(F),e.d(F,{timeDay:function(){return f.c},timeDays:function(){return f.m},timeFriday:function(){return c.iB},timeFridays:function(){return c.sJ},timeHour:function(){return s},timeHours:function(){return u},timeInterval:function(){return M.c},timeMillisecond:function(){return o},timeMilliseconds:function(){return T},timeMinute:function(){return r},timeMinutes:function(){return n},timeMonday:function(){return c.qT},timeMondays:function(){return c.QP},timeMonth:function(){return d},timeMonths:function(){return m},timeSaturday:function(){return c.Wc},timeSaturdays:function(){return c.aI},timeSecond:function(){return l},timeSeconds:function(){return t},timeSunday:function(){return c.uU},timeSundays:function(){return c.Ab},timeThursday:function(){return c.kD},timeThursdays:function(){return c.eC},timeTuesday:function(){return c.Mf},timeTuesdays:function(){return c.Oc},timeWednesday:function(){return c.eg},timeWednesdays:function(){return c.sn},timeWeek:function(){return c.uU},timeWeeks:function(){return c.Ab},timeYear:function(){return g.c},timeYears:function(){return g.Q},utcDay:function(){return E.c},utcDays:function(){return E.o},utcFriday:function(){return P.od},utcFridays:function(){return P.iG},utcHour:function(){return S},utcHours:function(){return w},utcMillisecond:function(){return o},utcMilliseconds:function(){return T},utcMinute:function(){return v},utcMinutes:function(){return b},utcMonday:function(){return P.ot},utcMondays:function(){return P.iO},utcMonth:function(){return O},utcMonths:function(){return z},utcSaturday:function(){return P.Ad},utcSaturdays:function(){return P.K8},utcSecond:function(){return l},utcSeconds:function(){return t},utcSunday:function(){return P.EV},utcSundays:function(){return P.Wq},utcThursday:function(){return P.yA},utcThursdays:function(){return P.ob},utcTuesday:function(){return P.sG},utcTuesdays:function(){return P.kl},utcWednesday:function(){return P._6},utcWednesdays:function(){return P.W_},utcWeek:function(){return P.EV},utcWeeks:function(){return P.Wq},utcYear:function(){return U.c},utcYears:function(){return U.i}});var M=e(81628),k=(0,M.c)(function(){},function(R,j){R.setTime(+R+j)},function(R,j){return j-R});k.every=function(R){return R=Math.floor(R),isFinite(R)&&R>0?R>1?(0,M.c)(function(j){j.setTime(Math.floor(j/R)*R)},function(j,Y){j.setTime(+j+Y*R)},function(j,Y){return(Y-j)/R}):k:null};var o=k,T=k.range,_=e(69792),p=(0,M.c)(function(R){R.setTime(R-R.getMilliseconds())},function(R,j){R.setTime(+R+j*_.yc)},function(R,j){return(j-R)/_.yc},function(R){return R.getUTCSeconds()}),l=p,t=p.range,i=(0,M.c)(function(R){R.setTime(R-R.getMilliseconds()-R.getSeconds()*_.yc)},function(R,j){R.setTime(+R+j*_.iy)},function(R,j){return(j-R)/_.iy},function(R){return R.getMinutes()}),r=i,n=i.range,a=(0,M.c)(function(R){R.setTime(R-R.getMilliseconds()-R.getSeconds()*_.yc-R.getMinutes()*_.iy)},function(R,j){R.setTime(+R+j*_.cg)},function(R,j){return(j-R)/_.cg},function(R){return R.getHours()}),s=a,u=a.range,f=e(68936),c=e(46192),y=(0,M.c)(function(R){R.setDate(1),R.setHours(0,0,0,0)},function(R,j){R.setMonth(R.getMonth()+j)},function(R,j){return j.getMonth()-R.getMonth()+12*(j.getFullYear()-R.getFullYear())},function(R){return R.getMonth()}),d=y,m=y.range,g=e(32171),x=(0,M.c)(function(R){R.setUTCSeconds(0,0)},function(R,j){R.setTime(+R+j*_.iy)},function(R,j){return(j-R)/_.iy},function(R){return R.getUTCMinutes()}),v=x,b=x.range,h=(0,M.c)(function(R){R.setUTCMinutes(0,0,0)},function(R,j){R.setTime(+R+j*_.cg)},function(R,j){return(j-R)/_.cg},function(R){return R.getUTCHours()}),S=h,w=h.range,E=e(58931),P=e(8208),I=(0,M.c)(function(R){R.setUTCDate(1),R.setUTCHours(0,0,0,0)},function(R,j){R.setUTCMonth(R.getUTCMonth()+j)},function(R,j){return j.getUTCMonth()-R.getUTCMonth()+12*(j.getUTCFullYear()-R.getUTCFullYear())},function(R){return R.getUTCMonth()}),O=I,z=I.range,U=e(53528)},81628:function(ne,F,e){"use strict";e.d(F,{c:function(){return o}});var M=new Date,k=new Date;function o(T,_,p,l){function t(i){return T(i=0===arguments.length?new Date:new Date(+i)),i}return t.floor=function(i){return T(i=new Date(+i)),i},t.ceil=function(i){return T(i=new Date(i-1)),_(i,1),T(i),i},t.round=function(i){var r=t(i),n=t.ceil(i);return i-r<n-i?r:n},t.offset=function(i,r){return _(i=new Date(+i),null==r?1:Math.floor(r)),i},t.range=function(i,r,n){var a,s=[];if(i=t.ceil(i),n=null==n?1:Math.floor(n),!(i<r&&n>0))return s;do{s.push(a=new Date(+i)),_(i,n),T(i)}while(a<i&&i<r);return s},t.filter=function(i){return o(function(r){if(r>=r)for(;T(r),!i(r);)r.setTime(r-1)},function(r,n){if(r>=r)if(n<0)for(;++n<=0;)for(;_(r,-1),!i(r););else for(;--n>=0;)for(;_(r,1),!i(r););})},p&&(t.count=function(i,r){return M.setTime(+i),k.setTime(+r),T(M),T(k),Math.floor(p(M,k))},t.every=function(i){return i=Math.floor(i),isFinite(i)&&i>0?i>1?t.filter(l?function(r){return l(r)%i==0}:function(r){return t.count(0,r)%i==0}):t:null}),t}},58931:function(ne,F,e){"use strict";e.d(F,{o:function(){return T}});var M=e(81628),k=e(69792),o=(0,M.c)(function(_){_.setUTCHours(0,0,0,0)},function(_,p){_.setUTCDate(_.getUTCDate()+p)},function(_,p){return(p-_)/k.SK},function(_){return _.getUTCDate()-1});F.c=o;var T=o.range},8208:function(ne,F,e){"use strict";e.d(F,{Ad:function(){return r},EV:function(){return T},K8:function(){return y},W_:function(){return u},Wq:function(){return n},_6:function(){return l},iG:function(){return c},iO:function(){return a},kl:function(){return s},ob:function(){return f},od:function(){return i},ot:function(){return _},sG:function(){return p},yA:function(){return t}});var M=e(81628),k=e(69792);function o(d){return(0,M.c)(function(m){m.setUTCDate(m.getUTCDate()-(m.getUTCDay()+7-d)%7),m.setUTCHours(0,0,0,0)},function(m,g){m.setUTCDate(m.getUTCDate()+7*g)},function(m,g){return(g-m)/k.KK})}var T=o(0),_=o(1),p=o(2),l=o(3),t=o(4),i=o(5),r=o(6),n=T.range,a=_.range,s=p.range,u=l.range,f=t.range,c=i.range,y=r.range},53528:function(ne,F,e){"use strict";e.d(F,{i:function(){return o}});var M=e(81628),k=(0,M.c)(function(T){T.setUTCMonth(0,1),T.setUTCHours(0,0,0,0)},function(T,_){T.setUTCFullYear(T.getUTCFullYear()+_)},function(T,_){return _.getUTCFullYear()-T.getUTCFullYear()},function(T){return T.getUTCFullYear()});k.every=function(T){return isFinite(T=Math.floor(T))&&T>0?(0,M.c)(function(_){_.setUTCFullYear(Math.floor(_.getUTCFullYear()/T)*T),_.setUTCMonth(0,1),_.setUTCHours(0,0,0,0)},function(_,p){_.setUTCFullYear(_.getUTCFullYear()+p*T)}):null},F.c=k;var o=k.range},46192:function(ne,F,e){"use strict";e.d(F,{Ab:function(){return n},Mf:function(){return p},Oc:function(){return s},QP:function(){return a},Wc:function(){return r},aI:function(){return y},eC:function(){return f},eg:function(){return l},iB:function(){return i},kD:function(){return t},qT:function(){return _},sJ:function(){return c},sn:function(){return u},uU:function(){return T}});var M=e(81628),k=e(69792);function o(d){return(0,M.c)(function(m){m.setDate(m.getDate()-(m.getDay()+7-d)%7),m.setHours(0,0,0,0)},function(m,g){m.setDate(m.getDate()+7*g)},function(m,g){return(g-m-(g.getTimezoneOffset()-m.getTimezoneOffset())*k.iy)/k.KK})}var T=o(0),_=o(1),p=o(2),l=o(3),t=o(4),i=o(5),r=o(6),n=T.range,a=_.range,s=p.range,u=l.range,f=t.range,c=i.range,y=r.range},32171:function(ne,F,e){"use strict";e.d(F,{Q:function(){return o}});var M=e(81628),k=(0,M.c)(function(T){T.setMonth(0,1),T.setHours(0,0,0,0)},function(T,_){T.setFullYear(T.getFullYear()+_)},function(T,_){return _.getFullYear()-T.getFullYear()},function(T){return T.getFullYear()});k.every=function(T){return isFinite(T=Math.floor(T))&&T>0?(0,M.c)(function(_){_.setFullYear(Math.floor(_.getFullYear()/T)*T),_.setMonth(0,1),_.setHours(0,0,0,0)},function(_,p){_.setFullYear(_.getFullYear()+p*T)}):null},F.c=k;var o=k.range},64348:function(ne,F,e){"use strict";var M=e(39640)(),k=e(53664),o=M&&k("%Object.defineProperty%",!0);if(o)try{o({},"a",{value:1})}catch{o=!1}var T=k("%SyntaxError%"),_=k("%TypeError%"),p=e(2304);ne.exports=function(l,t,i){if(!l||"object"!=typeof l&&"function"!=typeof l)throw new _("`obj` must be an object or a function`");if("string"!=typeof t&&"symbol"!=typeof t)throw new _("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new _("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new _("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new _("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new _("`loose`, if provided, must be a boolean");var r=arguments.length>3?arguments[3]:null,n=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,s=arguments.length>6&&arguments[6],u=!!p&&p(l,t);if(o)o(l,t,{configurable:null===a&&u?u.configurable:!a,enumerable:null===r&&u?u.enumerable:!r,value:i,writable:null===n&&u?u.writable:!n});else{if(!s&&(r||n||a))throw new T("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");l[t]=i}}},81288:function(ne,F,e){"use strict";var M=e(41820),k="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),o=Object.prototype.toString,T=Array.prototype.concat,_=Object.defineProperty,p=e(39640)(),l=_&&p,t=function(r,n,a,s){if(n in r)if(!0===s){if(r[n]===a)return}else if("function"!=typeof(u=s)||"[object Function]"!==o.call(u)||!s())return;var u;l?_(r,n,{configurable:!0,enumerable:!1,value:a,writable:!0}):r[n]=a},i=function(r,n){var a=arguments.length>2?arguments[2]:{},s=M(n);k&&(s=T.call(s,Object.getOwnPropertySymbols(n)));for(var u=0;u<s.length;u+=1)t(r,s[u],n[s[u]],a[s[u]])};i.supportsDescriptors=!!l,ne.exports=i},31264:function(ne){ne.exports=function(){for(var F=0;F<arguments.length;F++)if(void 0!==arguments[F])return arguments[F]}},63768:function(ne){"use strict";ne.exports=M;var F=(M.canvas=document.createElement("canvas")).getContext("2d"),e=k([32,126]);function M(o,T){Array.isArray(o)&&(o=o.join(", "));var _,p={},l=16,t=.05;T&&(2===T.length&&"number"==typeof T[0]?_=k(T):Array.isArray(T)?_=T:(T.o?_=k(T.o):T.pairs&&(_=T.pairs),T.fontSize&&(l=T.fontSize),null!=T.threshold&&(t=T.threshold))),_||(_=e),F.font=l+"px "+o;for(var i=0;i<_.length;i++){var r=_[i],n=F.measureText(r[0]).width+F.measureText(r[1]).width,a=F.measureText(r).width;Math.abs(n-a)>l*t&&(p[r]=(a-n)/l*1e3)}return p}function k(o){for(var T=[],_=o[0];_<=o[1];_++)for(var p=String.fromCharCode(_),l=o[0];l<o[1];l++){var t=p+String.fromCharCode(l);T.push(t)}return T}M.createPairs=k,M.ascii=e},22235:function(ne,F,e){var M=e(49972),k=e(48816),o={M:"moveTo",C:"bezierCurveTo"};ne.exports=function(T,_){T.beginPath(),k(M(_)).forEach(function(p){var l=p[0],t=p.slice(1);T[o[l]].apply(T,t)}),T.closePath()}},72512:function(ne){ne.exports=function(F){switch(F){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},10352:function(ne){"use strict";function F(e,M,k){var o=0|e[k];if(o<=0)return[];var T,_=new Array(o);if(k===e.length-1)for(T=0;T<o;++T)_[T]=M;else for(T=0;T<o;++T)_[T]=F(e,M,k+1);return _}ne.exports=function(e,M){switch(void 0===M&&(M=0),typeof e){case"number":if(e>0)return function(k,o){var T,_;for(T=new Array(k),_=0;_<k;++_)T[_]=o;return T}(0|e,M);break;case"object":if("number"==typeof e.length)return F(e,M,0)}return[]}},28912:function(ne){"use strict";function F(S,w,E){E=E||2;var P,I,O,z,U,R,j,Y=w&&w.length,B=Y?w[0]*E:S.length,V=e(S,0,B,E,!0),q=[];if(!V||V.next===V.prev)return q;if(Y&&(V=function(te,ee,$,J){var X,ae,ce,le=[];for(X=0,ae=ee.length;X<ae;X++)(ce=e(te,ee[X]*J,X<ae-1?ee[X+1]*J:te.length,J,!1))===ce.next&&(ce.steiner=!0),le.push(n(ce));for(le.sort(l),X=0;X<le.length;X++)t(le[X],$),$=M($,$.next);return $}(S,w,V,E)),S.length>80*E){P=O=S[0],I=z=S[1];for(var ie=E;ie<B;ie+=E)(U=S[ie])<P&&(P=U),(R=S[ie+1])<I&&(I=R),U>O&&(O=U),R>z&&(z=R);j=0!==(j=Math.max(O-P,z-I))?1/j:0}return k(V,q,E,P,I,j),q}function e(S,w,E,P,I){var O,z;if(I===h(S,w,E,P)>0)for(O=w;O<E;O+=P)z=x(O,S[O],S[O+1],z);else for(O=E-P;O>=w;O-=P)z=x(O,S[O],S[O+1],z);return z&&f(z,z.next)&&(v(z),z=z.next),z}function M(S,w){if(!S)return S;w||(w=S);var E,P=S;do{if(E=!1,P.steiner||!f(P,P.next)&&0!==u(P.prev,P,P.next))P=P.next;else{if(v(P),(P=w=P.prev)===P.next)break;E=!0}}while(E||P!==w);return w}function k(S,w,E,P,I,O,z){if(S){!z&&O&&function(Y,B,V,q){var ie=Y;do{null===ie.z&&(ie.z=r(ie.x,ie.y,B,V,q)),ie.prevZ=ie.prev,ie.nextZ=ie.next,ie=ie.next}while(ie!==Y);ie.prevZ.nextZ=null,ie.prevZ=null,function(te){var ee,$,J,X,ae,ce,le,pe,we=1;do{for($=te,te=null,ae=null,ce=0;$;){for(ce++,J=$,le=0,ee=0;ee<we&&(le++,J=J.nextZ);ee++);for(pe=we;le>0||pe>0&&J;)0!==le&&(0===pe||!J||$.z<=J.z)?(X=$,$=$.nextZ,le--):(X=J,J=J.nextZ,pe--),ae?ae.nextZ=X:te=X,X.prevZ=ae,ae=X;$=J}ae.nextZ=null,we*=2}while(ce>1)}(ie)}(S,P,I,O);for(var U,R,j=S;S.prev!==S.next;)if(U=S.prev,R=S.next,O?T(S,P,I,O):o(S))w.push(U.i/E),w.push(S.i/E),w.push(R.i/E),v(S),S=R.next,j=R.next;else if((S=R)===j){z?1===z?k(S=_(M(S),w,E),w,E,P,I,O,2):2===z&&p(S,w,E,P,I,O):k(M(S),w,E,P,I,O,1);break}}}function o(S){var w=S.prev,E=S,P=S.next;if(u(w,E,P)>=0)return!1;for(var I=S.next.next;I!==S.prev;){if(a(w.x,w.y,E.x,E.y,P.x,P.y,I.x,I.y)&&u(I.prev,I,I.next)>=0)return!1;I=I.next}return!0}function T(S,w,E,P){var I=S.prev,O=S,z=S.next;if(u(I,O,z)>=0)return!1;for(var j=I.x>O.x?I.x>z.x?I.x:z.x:O.x>z.x?O.x:z.x,Y=I.y>O.y?I.y>z.y?I.y:z.y:O.y>z.y?O.y:z.y,B=r(I.x<O.x?I.x<z.x?I.x:z.x:O.x<z.x?O.x:z.x,I.y<O.y?I.y<z.y?I.y:z.y:O.y<z.y?O.y:z.y,w,E,P),V=r(j,Y,w,E,P),q=S.prevZ,ie=S.nextZ;q&&q.z>=B&&ie&&ie.z<=V;){if(q!==S.prev&&q!==S.next&&a(I.x,I.y,O.x,O.y,z.x,z.y,q.x,q.y)&&u(q.prev,q,q.next)>=0||(q=q.prevZ,ie!==S.prev&&ie!==S.next&&a(I.x,I.y,O.x,O.y,z.x,z.y,ie.x,ie.y)&&u(ie.prev,ie,ie.next)>=0))return!1;ie=ie.nextZ}for(;q&&q.z>=B;){if(q!==S.prev&&q!==S.next&&a(I.x,I.y,O.x,O.y,z.x,z.y,q.x,q.y)&&u(q.prev,q,q.next)>=0)return!1;q=q.prevZ}for(;ie&&ie.z<=V;){if(ie!==S.prev&&ie!==S.next&&a(I.x,I.y,O.x,O.y,z.x,z.y,ie.x,ie.y)&&u(ie.prev,ie,ie.next)>=0)return!1;ie=ie.nextZ}return!0}function _(S,w,E){var P=S;do{var I=P.prev,O=P.next.next;!f(I,O)&&c(I,P,P.next,O)&&m(I,O)&&m(O,I)&&(w.push(I.i/E),w.push(P.i/E),w.push(O.i/E),v(P),v(P.next),P=S=O),P=P.next}while(P!==S);return M(P)}function p(S,w,E,P,I,O){var z=S;do{for(var U=z.next.next;U!==z.prev;){if(z.i!==U.i&&s(z,U)){var R=g(z,U);return z=M(z,z.next),R=M(R,R.next),k(z,w,E,P,I,O),void k(R,w,E,P,I,O)}U=U.next}z=z.next}while(z!==S)}function l(S,w){return S.x-w.x}function t(S,w){if(w=function(P,I){var O,z=I,U=P.x,R=P.y,j=-1/0;do{if(R<=z.y&&R>=z.next.y&&z.next.y!==z.y){var Y=z.x+(R-z.y)*(z.next.x-z.x)/(z.next.y-z.y);if(Y<=U&&Y>j){if(j=Y,Y===U){if(R===z.y)return z;if(R===z.next.y)return z.next}O=z.x<z.next.x?z:z.next}}z=z.next}while(z!==I);if(!O)return null;if(U===j)return O;var B,V=O,q=O.x,ie=O.y,te=1/0;z=O;do{U>=z.x&&z.x>=q&&U!==z.x&&a(R<ie?U:j,R,q,ie,R<ie?j:U,R,z.x,z.y)&&(B=Math.abs(R-z.y)/(U-z.x),m(z,P)&&(B<te||B===te&&(z.x>O.x||z.x===O.x&&i(O,z)))&&(O=z,te=B)),z=z.next}while(z!==V);return O}(S,w)){var E=g(w,S);M(w,w.next),M(E,E.next)}}function i(S,w){return u(S.prev,S,w.prev)<0&&u(w.next,S,S.next)<0}function r(S,w,E,P,I){return(S=1431655765&((S=858993459&((S=252645135&((S=16711935&((S=32767*(S-E)*I)|S<<8))|S<<4))|S<<2))|S<<1))|(w=1431655765&((w=858993459&((w=252645135&((w=16711935&((w=32767*(w-P)*I)|w<<8))|w<<4))|w<<2))|w<<1))<<1}function n(S){var w=S,E=S;do{(w.x<E.x||w.x===E.x&&w.y<E.y)&&(E=w),w=w.next}while(w!==S);return E}function a(S,w,E,P,I,O,z,U){return(I-z)*(w-U)-(S-z)*(O-U)>=0&&(S-z)*(P-U)-(E-z)*(w-U)>=0&&(E-z)*(O-U)-(I-z)*(P-U)>=0}function s(S,w){return S.next.i!==w.i&&S.prev.i!==w.i&&!function(E,P){var I=E;do{if(I.i!==E.i&&I.next.i!==E.i&&I.i!==P.i&&I.next.i!==P.i&&c(I,I.next,E,P))return!0;I=I.next}while(I!==E);return!1}(S,w)&&(m(S,w)&&m(w,S)&&function(E,P){var I=E,O=!1,z=(E.x+P.x)/2,U=(E.y+P.y)/2;do{I.y>U!=I.next.y>U&&I.next.y!==I.y&&z<(I.next.x-I.x)*(U-I.y)/(I.next.y-I.y)+I.x&&(O=!O),I=I.next}while(I!==E);return O}(S,w)&&(u(S.prev,S,w.prev)||u(S,w.prev,w))||f(S,w)&&u(S.prev,S,S.next)>0&&u(w.prev,w,w.next)>0)}function u(S,w,E){return(w.y-S.y)*(E.x-w.x)-(w.x-S.x)*(E.y-w.y)}function f(S,w){return S.x===w.x&&S.y===w.y}function c(S,w,E,P){var I=d(u(S,w,E)),O=d(u(S,w,P)),z=d(u(E,P,S)),U=d(u(E,P,w));return I!==O&&z!==U||!(0!==I||!y(S,E,w))||!(0!==O||!y(S,P,w))||!(0!==z||!y(E,S,P))||!(0!==U||!y(E,w,P))}function y(S,w,E){return w.x<=Math.max(S.x,E.x)&&w.x>=Math.min(S.x,E.x)&&w.y<=Math.max(S.y,E.y)&&w.y>=Math.min(S.y,E.y)}function d(S){return S>0?1:S<0?-1:0}function m(S,w){return u(S.prev,S,S.next)<0?u(S,w,S.next)>=0&&u(S,S.prev,w)>=0:u(S,w,S.prev)<0||u(S,S.next,w)<0}function g(S,w){var E=new b(S.i,S.x,S.y),P=new b(w.i,w.x,w.y),I=S.next,O=w.prev;return S.next=w,w.prev=S,E.next=I,I.prev=E,P.next=E,E.prev=P,O.next=P,P.prev=O,P}function x(S,w,E,P){var I=new b(S,w,E);return P?(I.next=P.next,I.prev=P,P.next.prev=I,P.next=I):(I.prev=I,I.next=I),I}function v(S){S.next.prev=S.prev,S.prev.next=S.next,S.prevZ&&(S.prevZ.nextZ=S.nextZ),S.nextZ&&(S.nextZ.prevZ=S.prevZ)}function b(S,w,E){this.i=S,this.x=w,this.y=E,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function h(S,w,E,P){for(var I=0,O=w,z=E-P;O<E;O+=P)I+=(S[z]-S[O])*(S[O+1]+S[z+1]),z=O;return I}ne.exports=F,ne.exports.default=F,F.deviation=function(S,w,E,P){var I=w&&w.length,z=Math.abs(h(S,0,I?w[0]*E:S.length,E));if(I)for(var U=0,R=w.length;U<R;U++)z-=Math.abs(h(S,w[U]*E,U<R-1?w[U+1]*E:S.length,E));var B=0;for(U=0;U<P.length;U+=3){var V=P[U]*E,q=P[U+1]*E,ie=P[U+2]*E;B+=Math.abs((S[V]-S[ie])*(S[q+1]-S[V+1])-(S[V]-S[q])*(S[ie+1]-S[V+1]))}return 0===z&&0===B?0:Math.abs((B-z)/z)},F.flatten=function(S){for(var w=S[0][0].length,E={vertices:[],holes:[],dimensions:w},P=0,I=0;I<S.length;I++){for(var O=0;O<S[I].length;O++)for(var z=0;z<w;z++)E.vertices.push(S[I][O][z]);I>0&&E.holes.push(P+=S[I-1].length)}return E}},6688:function(ne,F,e){var M=e(78484);ne.exports=function(k,o){var T,_=[],p=[],l=[],t={},i=[];function r(m){l[m]=!1,t.hasOwnProperty(m)&&Object.keys(t[m]).forEach(function(g){delete t[m][g],l[g]&&r(g)})}function n(m){var g,x,v=!1;for(p.push(m),l[m]=!0,g=0;g<i[m].length;g++)(x=i[m][g])===T?(a(T,p),v=!0):l[x]||(v=n(x));if(v)r(m);else for(g=0;g<i[m].length;g++){var b=t[x=i[m][g]];b||(t[x]=b={}),b[x]=!0}return p.pop(),v}function a(m,g){var x=[].concat(g).concat(m);o?o(n):_.push(x)}function s(m){!function(E){for(var P=0;P<k.length;P++)P<E&&(k[P]=[]),k[P]=k[P].filter(function(I){return I>=E})}(m);for(var g,x=M(k).components.filter(function(E){return E.length>1}),v=1/0,b=0;b<x.length;b++)for(var h=0;h<x[b].length;h++)x[b][h]<v&&(v=x[b][h],g=b);var S=x[g];return!!S&&{leastVertex:v,adjList:k.map(function(E,P){return-1===S.indexOf(P)?[]:E.filter(function(I){return-1!==S.indexOf(I)})})}}T=0;for(var u=k.length;T<u;){var f=s(T);if(T=f.leastVertex,i=f.adjList){for(var c=0;c<i.length;c++)for(var y=0;y<i[c].length;y++){var d=i[c][y];l[+d]=!1,t[d]={}}n(T),T+=1}else T=u}return o?void 0:_}},41476:function(ne,F,e){"use strict";var M=e(9252);ne.exports=function(){return M(this).length=0,this}},74772:function(ne,F,e){"use strict";ne.exports=e(44716)()?Array.from:e(80816)},44716:function(ne){"use strict";ne.exports=function(){var F,e,M=Array.from;return"function"==typeof M&&!(!(e=M(F=["raz","dwa"]))||e===F||"dwa"!==e[1])}},80816:function(ne,F,e){"use strict";var M=e(92664).iterator,k=e(60948),o=e(17024),T=e(81304),_=e(34044),p=e(9252),l=e(42584),t=e(29768),i=Array.isArray,r=Function.prototype.call,n={configurable:!0,enumerable:!0,writable:!0,value:null},a=Object.defineProperty;ne.exports=function(s){var u,f,c,y,d,m,g,x,v,b,h=arguments[1],S=arguments[2];if(s=Object(p(s)),l(h)&&_(h),this&&this!==Array&&o(this))u=this;else{if(!h){if(k(s))return 1!==(d=s.length)?Array.apply(null,s):((y=new Array(1))[0]=s[0],y);if(i(s)){for(y=new Array(d=s.length),f=0;f<d;++f)y[f]=s[f];return y}}y=[]}if(!i(s))if(void 0!==(v=s[M])){for(g=_(v).call(s),u&&(y=new u),x=g.next(),f=0;!x.done;)b=h?r.call(h,S,x.value,f):x.value,u?(n.value=b,a(y,f,n)):y[f]=b,x=g.next(),++f;d=f}else if(t(s)){for(d=s.length,u&&(y=new u),f=0,c=0;f<d;++f)b=s[f],f+1<d&&(m=b.charCodeAt(0))>=55296&&m<=56319&&(b+=s[++f]),b=h?r.call(h,S,b,c):b,u?(n.value=b,a(y,c,n)):y[c]=b,++c;d=c}if(void 0===d)for(d=T(s.length),u&&(y=new u(d)),f=0;f<d;++f)b=h?r.call(h,S,s[f],f):s[f],u?(n.value=b,a(y,f,n)):y[f]=b;return u&&(n.value=null,y.length=d),y}},60948:function(ne){"use strict";var F=Object.prototype.toString,e=F.call(function(){return arguments}());ne.exports=function(M){return F.call(M)===e}},17024:function(ne){"use strict";var F=Object.prototype.toString,e=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);ne.exports=function(M){return"function"==typeof M&&e(F.call(M))}},33208:function(ne){"use strict";ne.exports=function(){}},85608:function(ne,F,e){"use strict";ne.exports=e(37328)()?Math.sign:e(92928)},37328:function(ne){"use strict";ne.exports=function(){var F=Math.sign;return"function"==typeof F&&1===F(10)&&-1===F(-20)}},92928:function(ne){"use strict";ne.exports=function(F){return F=Number(F),isNaN(F)||0===F?F:F>0?1:-1}},96936:function(ne,F,e){"use strict";var M=e(85608),k=Math.abs,o=Math.floor;ne.exports=function(T){return isNaN(T)?0:0!==(T=Number(T))&&isFinite(T)?M(T)*o(k(T)):T}},81304:function(ne,F,e){"use strict";var M=e(96936),k=Math.max;ne.exports=function(o){return k(0,M(o))}},14428:function(ne,F,e){"use strict";var M=e(34044),k=e(9252),o=Function.prototype.bind,T=Function.prototype.call,_=Object.keys,p=Object.prototype.propertyIsEnumerable;ne.exports=function(l,t){return function(i,r){var n,a=arguments[2],s=arguments[3];return i=Object(k(i)),M(r),n=_(i),s&&n.sort("function"==typeof s?o.call(s,i):void 0),"function"!=typeof l&&(l=n[l]),T.call(l,n,function(u,f){return p.call(i,u)?T.call(r,a,i[u],u,i,f):t})}}},38452:function(ne,F,e){"use strict";ne.exports=e(96276)()?Object.assign:e(81892)},96276:function(ne){"use strict";ne.exports=function(){var F,e=Object.assign;return"function"==typeof e&&(e(F={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),F.foo+F.bar+F.trzy==="razdwatrzy")}},81892:function(ne,F,e){"use strict";var M=e(54768),k=e(9252),o=Math.max;ne.exports=function(T,_){var p,l,t,i=o(arguments.length,2);for(T=Object(k(T)),t=function(r){try{T[r]=_[r]}catch(n){p||(p=n)}},l=1;l<i;++l)M(_=arguments[l]).forEach(t);if(void 0!==p)throw p;return T}},95920:function(ne,F,e){"use strict";var M=e(74772),k=e(38452),o=e(9252);ne.exports=function(T){var _=Object(o(T)),p=arguments[1],l=Object(arguments[2]);if(_!==T&&!p)return _;var t={};return p?M(p,function(i){(l.ensure||i in T)&&(t[i]=T[i])}):k(t,T),t}},14452:function(ne,F,e){"use strict";var M,k,o,T,_=Object.create;e(63092)()||(M=e(8672)),ne.exports=M?1!==M.level?_:(k={},o={},T={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(p){o[p]="__proto__"!==p?T:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(k,o),Object.defineProperty(M,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:k}),function(p,l){return _(null===p?k:p,l)}):_},42748:function(ne,F,e){"use strict";ne.exports=e(14428)("forEach")},69127:function(ne,F,e){"use strict";var M=e(42584),k={function:!0,object:!0};ne.exports=function(o){return M(o)&&k[typeof o]||!1}},42584:function(ne,F,e){"use strict";var M=e(33208)();ne.exports=function(k){return k!==M&&null!==k}},54768:function(ne,F,e){"use strict";ne.exports=e(87888)()?Object.keys:e(89592)},87888:function(ne){"use strict";ne.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},89592:function(ne,F,e){"use strict";var M=e(42584),k=Object.keys;ne.exports=function(o){return k(M(o)?Object(o):o)}},84323:function(ne,F,e){"use strict";var M=e(34044),k=e(42748),o=Function.prototype.call;ne.exports=function(T,_){var p={},l=arguments[2];return M(_),k(T,function(t,i,r,n){p[i]=o.call(_,l,t,i,r,n)}),p}},50868:function(ne,F,e){"use strict";var M=e(42584),k=Array.prototype.forEach,o=Object.create;ne.exports=function(T){var _=o(null);return k.call(arguments,function(p){M(p)&&function(l,t){var i;for(i in l)t[i]=l[i]}(Object(p),_)}),_}},69932:function(ne,F,e){"use strict";ne.exports=e(63092)()?Object.setPrototypeOf:e(8672)},63092:function(ne){"use strict";var F=Object.create,e=Object.getPrototypeOf,M={};ne.exports=function(){var k=Object.setPrototypeOf;return"function"==typeof k&&e(k((arguments[0]||F)(null),M))===M}},8672:function(ne,F,e){"use strict";var M,k,o,T,_=e(69127),p=e(9252),l=Object.prototype.isPrototypeOf,t=Object.defineProperty,i={configurable:!0,enumerable:!1,writable:!0,value:void 0};M=function(r,n){if(p(r),null===n||_(n))return r;throw new TypeError("Prototype must be null or an object")},ne.exports=(k=function(){var r,n=Object.create(null),a={},s=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(s){try{(r=s.set).call(n,a)}catch{}if(Object.getPrototypeOf(n)===a)return{set:r,level:2}}return n.__proto__=a,Object.getPrototypeOf(n)===a?{level:2}:((n={}).__proto__=a,Object.getPrototypeOf(n)===a&&{level:1})}())?(2===k.level?k.set?(T=k.set,o=function(r,n){return T.call(M(r,n),n),r}):o=function(r,n){return M(r,n).__proto__=n,r}:o=function r(n,a){var s;return M(n,a),(s=l.call(r.nullPolyfill,n))&&delete r.nullPolyfill.__proto__,null===a&&(a=r.nullPolyfill),n.__proto__=a,s&&t(r.nullPolyfill,"__proto__",i),n},Object.defineProperty(o,"level",{configurable:!1,enumerable:!1,writable:!1,value:k.level})):null,e(14452)},34044:function(ne){"use strict";ne.exports=function(F){if("function"!=typeof F)throw new TypeError(F+" is not a function");return F}},92584:function(ne,F,e){"use strict";var M=e(69127);ne.exports=function(k){if(!M(k))throw new TypeError(k+" is not an Object");return k}},9252:function(ne,F,e){"use strict";var M=e(42584);ne.exports=function(k){if(!M(k))throw new TypeError("Cannot use null or undefined");return k}},71056:function(ne,F,e){"use strict";ne.exports=e(42976)()?String.prototype.contains:e(93040)},42976:function(ne){"use strict";var F="razdwatrzy";ne.exports=function(){return"function"==typeof F.contains&&!0===F.contains("dwa")&&!1===F.contains("foo")}},93040:function(ne){"use strict";var F=String.prototype.indexOf;ne.exports=function(e){return F.call(this,e,arguments[1])>-1}},29768:function(ne){"use strict";var F=Object.prototype.toString,e=F.call("");ne.exports=function(M){return"string"==typeof M||M&&"object"==typeof M&&(M instanceof String||F.call(M)===e)||!1}},82252:function(ne){"use strict";var F=Object.create(null),e=Math.random;ne.exports=function(){var M;do{M=e().toString(36).slice(2)}while(F[M]);return M}},52104:function(ne,F,e){"use strict";var M,k=e(69932),o=e(71056),T=e(21092),_=e(92664),p=e(85512),l=Object.defineProperty;M=ne.exports=function(t,i){if(!(this instanceof M))throw new TypeError("Constructor requires 'new'");p.call(this,t),i=i?o.call(i,"key+value")?"key+value":o.call(i,"key")?"key":"value":"value",l(this,"__kind__",T("",i))},k&&k(M,p),delete M.prototype.constructor,M.prototype=Object.create(p.prototype,{_resolve:T(function(t){return"value"===this.__kind__?this.__list__[t]:"key+value"===this.__kind__?[t,this.__list__[t]]:t})}),l(M.prototype,_.toStringTag,T("c","Array Iterator"))},76024:function(ne,F,e){"use strict";var M=e(60948),k=e(34044),o=e(29768),T=e(76252),_=Array.isArray,p=Function.prototype.call,l=Array.prototype.some;ne.exports=function(t,i){var r,n,a,s,u,f,c,y,d=arguments[2];if(_(t)||M(t)?r="array":o(t)?r="string":t=T(t),k(i),a=function(){s=!0},"array"!==r)if("string"!==r)for(n=t.next();!n.done;){if(p.call(i,d,n.value,a),s)return;n=t.next()}else for(f=t.length,u=0;u<f&&(c=t[u],u+1<f&&(y=c.charCodeAt(0))>=55296&&y<=56319&&(c+=t[++u]),p.call(i,d,c,a),!s);++u);else l.call(t,function(m){return p.call(i,d,m,a),s})}},76252:function(ne,F,e){"use strict";var M=e(60948),k=e(29768),o=e(52104),T=e(80940),_=e(52891),p=e(92664).iterator;ne.exports=function(l){return"function"==typeof _(l)[p]?l[p]():M(l)?new o(l):k(l)?new T(l):new o(l)}},85512:function(ne,F,e){"use strict";var M,k=e(41476),o=e(38452),T=e(34044),_=e(9252),p=e(21092),l=e(27940),t=e(92664),i=Object.defineProperty,r=Object.defineProperties;ne.exports=M=function(n,a){if(!(this instanceof M))throw new TypeError("Constructor requires 'new'");r(this,{__list__:p("w",_(n)),__context__:p("w",a),__nextIndex__:p("w",0)}),a&&(T(a.on),a.on("_add",this._onAdd),a.on("_delete",this._onDelete),a.on("_clear",this._onClear))},delete M.prototype.constructor,r(M.prototype,o({_next:p(function(){var n;if(this.__list__)return this.__redo__&&void 0!==(n=this.__redo__.shift())?n:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:p(function(){return this._createResult(this._next())}),_createResult:p(function(n){return void 0===n?{done:!0,value:void 0}:{done:!1,value:this._resolve(n)}}),_resolve:p(function(n){return this.__list__[n]}),_unBind:p(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:p(function(){return"[object "+(this[t.toStringTag]||"Object")+"]"})},l({_onAdd:p(function(n){n>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(a,s){a>=n&&(this.__redo__[s]=++a)},this),this.__redo__.push(n)):i(this,"__redo__",p("c",[n])))}),_onDelete:p(function(n){var a;n>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(a=this.__redo__.indexOf(n))&&this.__redo__.splice(a,1),this.__redo__.forEach(function(s,u){s>n&&(this.__redo__[u]=--s)},this)))}),_onClear:p(function(){this.__redo__&&k.call(this.__redo__),this.__nextIndex__=0})}))),i(M.prototype,t.iterator,p(function(){return this}))},76368:function(ne,F,e){"use strict";var M=e(60948),k=e(42584),o=e(29768),T=e(92664).iterator,_=Array.isArray;ne.exports=function(p){return!(!k(p)||!_(p)&&!o(p)&&!M(p)&&"function"!=typeof p[T])}},80940:function(ne,F,e){"use strict";var M,k=e(69932),o=e(21092),T=e(92664),_=e(85512),p=Object.defineProperty;M=ne.exports=function(l){if(!(this instanceof M))throw new TypeError("Constructor requires 'new'");l=String(l),_.call(this,l),p(this,"__length__",o("",l.length))},k&&k(M,_),delete M.prototype.constructor,M.prototype=Object.create(_.prototype,{_next:o(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:o(function(l){var t,i=this.__list__[l];return this.__nextIndex__===this.__length__?i:(t=i.charCodeAt(0))>=55296&&t<=56319?i+this.__list__[this.__nextIndex__++]:i})}),p(M.prototype,T.toStringTag,o("c","String Iterator"))},52891:function(ne,F,e){"use strict";var M=e(76368);ne.exports=function(k){if(!M(k))throw new TypeError(k+" is not iterable");return k}},60964:function(ne){"use strict";function F(e,M){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var k=Object(e),o=1;o<arguments.length;o++){var T=arguments[o];if(null!=T)for(var _=Object.keys(Object(T)),p=0,l=_.length;p<l;p++){var t=_[p],i=Object.getOwnPropertyDescriptor(T,t);void 0!==i&&i.enumerable&&(k[t]=T[t])}}return k}ne.exports={assign:F,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:F})}}},92664:function(ne,F,e){"use strict";ne.exports=e(43580)()?e(12296).Symbol:e(18376)},43580:function(ne,F,e){"use strict";var M=e(12296),k={object:!0,symbol:!0};ne.exports=function(){var o,T=M.Symbol;if("function"!=typeof T)return!1;o=T("test symbol");try{String(o)}catch{return!1}return!!k[typeof T.iterator]&&!!k[typeof T.toPrimitive]&&!!k[typeof T.toStringTag]}},53908:function(ne){"use strict";ne.exports=function(F){return!!F&&("symbol"==typeof F||!!F.constructor&&"Symbol"===F.constructor.name&&"Symbol"===F[F.constructor.toStringTag])}},96863:function(ne,F,e){"use strict";var M=e(21092),o=Object.defineProperty,T=Object.prototype,_=(0,Object.create)(null);ne.exports=function(p){for(var l,t,i=0;_[p+(i||"")];)++i;return _[p+=i||""]=!0,o(T,l="@@"+p,M.gs(null,function(r){t||(t=!0,o(this,l,M(r)),t=!1)})),l}},53540:function(ne,F,e){"use strict";var M=e(21092),k=e(12296).Symbol;ne.exports=function(o){return Object.defineProperties(o,{hasInstance:M("",k&&k.hasInstance||o("hasInstance")),isConcatSpreadable:M("",k&&k.isConcatSpreadable||o("isConcatSpreadable")),iterator:M("",k&&k.iterator||o("iterator")),match:M("",k&&k.match||o("match")),replace:M("",k&&k.replace||o("replace")),search:M("",k&&k.search||o("search")),species:M("",k&&k.species||o("species")),split:M("",k&&k.split||o("split")),toPrimitive:M("",k&&k.toPrimitive||o("toPrimitive")),toStringTag:M("",k&&k.toStringTag||o("toStringTag")),unscopables:M("",k&&k.unscopables||o("unscopables"))})}},73852:function(ne,F,e){"use strict";var M=e(21092),k=e(63948),o=Object.create(null);ne.exports=function(T){return Object.defineProperties(T,{for:M(function(_){return o[_]?o[_]:o[_]=T(String(_))}),keyFor:M(function(_){var p;for(p in k(_),o)if(o[p]===_)return p})})}},18376:function(ne,F,e){"use strict";var M,k,o,T=e(21092),_=e(63948),p=e(12296).Symbol,l=e(96863),t=e(53540),i=e(73852),r=Object.create,n=Object.defineProperties,a=Object.defineProperty;if("function"==typeof p)try{String(p()),o=!0}catch{}else p=null;k=function(s){if(this instanceof k)throw new TypeError("Symbol is not a constructor");return M(s)},ne.exports=M=function s(u){var f;if(this instanceof s)throw new TypeError("Symbol is not a constructor");return o?p(u):(f=r(k.prototype),u=void 0===u?"":String(u),n(f,{__description__:T("",u),__name__:T("",l(u))}))},t(M),i(M),n(k.prototype,{constructor:T(M),toString:T("",function(){return this.__name__})}),n(M.prototype,{toString:T(function(){return"Symbol ("+_(this).__description__+")"}),valueOf:T(function(){return _(this)})}),a(M.prototype,M.toPrimitive,T("",function(){var s=_(this);return"symbol"==typeof s?s:s.toString()})),a(M.prototype,M.toStringTag,T("c","Symbol")),a(k.prototype,M.toStringTag,T("c",M.prototype[M.toStringTag])),a(k.prototype,M.toPrimitive,T("c",M.prototype[M.toPrimitive]))},63948:function(ne,F,e){"use strict";var M=e(53908);ne.exports=function(k){if(!M(k))throw new TypeError(k+" is not a symbol");return k}},60463:function(ne,F,e){"use strict";ne.exports=e(96979)()?WeakMap:e(64864)},96979:function(ne){"use strict";ne.exports=function(){var F,e;if("function"!=typeof WeakMap)return!1;try{F=new WeakMap([[e={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return"[object WeakMap]"===String(F)&&"function"==typeof F.set&&F.set({},1)===F&&"function"==typeof F.delete&&"function"==typeof F.has&&"one"===F.get(e)}},69876:function(ne){"use strict";ne.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},64864:function(ne,F,e){"use strict";var M,k=e(42584),o=e(69932),T=e(92584),_=e(9252),p=e(82252),l=e(21092),t=e(76252),i=e(76024),r=e(92664).toStringTag,n=e(69876),a=Array.isArray,s=Object.defineProperty,u=Object.prototype.hasOwnProperty,f=Object.getPrototypeOf;ne.exports=M=function(){var c,y=arguments[0];if(!(this instanceof M))throw new TypeError("Constructor requires 'new'");return c=n&&o&&WeakMap!==M?o(new WeakMap,f(this)):this,k(y)&&(a(y)||(y=t(y))),s(c,"__weakMapData__",l("c","$weakMap$"+p())),y&&i(y,function(d){_(d),c.set(d[0],d[1])}),c},n&&(o&&o(M,WeakMap),M.prototype=Object.create(WeakMap.prototype,{constructor:l(M)})),Object.defineProperties(M.prototype,{delete:l(function(c){return!!u.call(T(c),this.__weakMapData__)&&(delete c[this.__weakMapData__],!0)}),get:l(function(c){if(u.call(T(c),this.__weakMapData__))return c[this.__weakMapData__]}),has:l(function(c){return u.call(T(c),this.__weakMapData__)}),set:l(function(c,y){return s(T(c),this.__weakMapData__,l("c",y)),this}),toString:l(function(){return"[object WeakMap]"})}),s(M.prototype,r,l("c","WeakMap"))},61252:function(ne){"use strict";var F,e="object"==typeof Reflect?Reflect:null,M=e&&"function"==typeof e.apply?e.apply:function(u,f,c){return Function.prototype.apply.call(u,f,c)};F=e&&"function"==typeof e.ownKeys?e.ownKeys:Object.getOwnPropertySymbols?function(u){return Object.getOwnPropertyNames(u).concat(Object.getOwnPropertySymbols(u))}:function(u){return Object.getOwnPropertyNames(u)};var k=Number.isNaN||function(u){return u!=u};function o(){o.init.call(this)}ne.exports=o,ne.exports.once=function(u,f){return new Promise(function(c,y){function d(g){u.removeListener(f,m),y(g)}function m(){"function"==typeof u.removeListener&&u.removeListener("error",d),c([].slice.call(arguments))}var g;s(u,f,m,{once:!0}),"error"!==f&&("function"==typeof(g=u).on&&s(g,"error",d,{once:!0}))})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var T=10;function _(u){if("function"!=typeof u)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof u)}function p(u){return void 0===u._maxListeners?o.defaultMaxListeners:u._maxListeners}function l(u,f,c,y){var d,m,g;if(_(c),void 0===(m=u._events)?(m=u._events=Object.create(null),u._eventsCount=0):(void 0!==m.newListener&&(u.emit("newListener",f,c.listener?c.listener:c),m=u._events),g=m[f]),void 0===g)g=m[f]=c,++u._eventsCount;else if("function"==typeof g?g=m[f]=y?[c,g]:[g,c]:y?g.unshift(c):g.push(c),(d=p(u))>0&&g.length>d&&!g.warned){g.warned=!0;var v=new Error("Possible EventEmitter memory leak detected. "+g.length+" "+String(f)+" listeners added. Use emitter.setMaxListeners() to increase limit");v.name="MaxListenersExceededWarning",v.emitter=u,v.type=f,v.count=g.length,console&&console.warn&&console.warn(v)}return u}function t(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function i(u,f,c){var y={fired:!1,wrapFn:void 0,target:u,type:f,listener:c},d=t.bind(y);return d.listener=c,y.wrapFn=d,d}function r(u,f,c){var y=u._events;if(void 0===y)return[];var d=y[f];return void 0===d?[]:"function"==typeof d?c?[d.listener||d]:[d]:c?function(m){for(var g=new Array(m.length),x=0;x<g.length;++x)g[x]=m[x].listener||m[x];return g}(d):a(d,d.length)}function n(u){var f=this._events;if(void 0!==f){var c=f[u];if("function"==typeof c)return 1;if(void 0!==c)return c.length}return 0}function a(u,f){for(var c=new Array(f),y=0;y<f;++y)c[y]=u[y];return c}function s(u,f,c,y){if("function"==typeof u.on)y.once?u.once(f,c):u.on(f,c);else{if("function"!=typeof u.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof u);u.addEventListener(f,function d(m){y.once&&u.removeEventListener(f,d),c(m)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return T},set:function(u){if("number"!=typeof u||u<0||k(u))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+u+".");T=u}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(u){if("number"!=typeof u||u<0||k(u))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+u+".");return this._maxListeners=u,this},o.prototype.getMaxListeners=function(){return p(this)},o.prototype.emit=function(u){for(var f=[],c=1;c<arguments.length;c++)f.push(arguments[c]);var y="error"===u,d=this._events;if(void 0!==d)y=y&&void 0===d.error;else if(!y)return!1;if(y){var m;if(f.length>0&&(m=f[0]),m instanceof Error)throw m;var g=new Error("Unhandled error."+(m?" ("+m.message+")":""));throw g.context=m,g}var x=d[u];if(void 0===x)return!1;if("function"==typeof x)M(x,this,f);else{var v=x.length,b=a(x,v);for(c=0;c<v;++c)M(b[c],this,f)}return!0},o.prototype.on=o.prototype.addListener=function(u,f){return l(this,u,f,!1)},o.prototype.prependListener=function(u,f){return l(this,u,f,!0)},o.prototype.once=function(u,f){return _(f),this.on(u,i(this,u,f)),this},o.prototype.prependOnceListener=function(u,f){return _(f),this.prependListener(u,i(this,u,f)),this},o.prototype.off=o.prototype.removeListener=function(u,f){var c,y,d,m,g;if(_(f),void 0===(y=this._events))return this;if(void 0===(c=y[u]))return this;if(c===f||c.listener===f)0==--this._eventsCount?this._events=Object.create(null):(delete y[u],y.removeListener&&this.emit("removeListener",u,c.listener||f));else if("function"!=typeof c){for(d=-1,m=c.length-1;m>=0;m--)if(c[m]===f||c[m].listener===f){g=c[m].listener,d=m;break}if(d<0)return this;0===d?c.shift():function(x,v){for(;v+1<x.length;v++)x[v]=x[v+1];x.pop()}(c,d),1===c.length&&(y[u]=c[0]),void 0!==y.removeListener&&this.emit("removeListener",u,g||f)}return this},o.prototype.removeAllListeners=function(u){var f,c,y;if(void 0===(c=this._events))return this;if(void 0===c.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==c[u]&&(0==--this._eventsCount?this._events=Object.create(null):delete c[u]),this;if(0===arguments.length){var d,m=Object.keys(c);for(y=0;y<m.length;++y)"removeListener"!==(d=m[y])&&this.removeAllListeners(d);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(f=c[u]))this.removeListener(u,f);else if(void 0!==f)for(y=f.length-1;y>=0;y--)this.removeListener(u,f[y]);return this},o.prototype.listeners=function(u){return r(this,u,!0)},o.prototype.rawListeners=function(u){return r(this,u,!1)},o.listenerCount=function(u,f){return"function"==typeof u.listenerCount?u.listenerCount(f):n.call(u,f)},o.prototype.listenerCount=n,o.prototype.eventNames=function(){return this._eventsCount>0?F(this._events):[]}},39072:function(ne){var F=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};ne.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return F()}try{return __global__||F()}finally{delete Object.prototype.__global__}}()},12296:function(ne,F,e){"use strict";ne.exports=e(45072)()?globalThis:e(39072)},45072:function(ne){"use strict";ne.exports=function(){return"object"==typeof globalThis&&!!globalThis&&globalThis.Array===Array}},38248:function(ne,F,e){"use strict";var M=e(94576);ne.exports=function(k){var o=typeof k;if("string"===o){var T=k;if(0==(k=+k)&&M(T))return!1}else if("number"!==o)return!1;return k-k<1}},47520:function(ne,F,e){var M=e(72512);ne.exports=function(k,o,T){if(!k)throw new TypeError("must specify data as first parameter");if(T=0|+(T||0),Array.isArray(k)&&k[0]&&"number"==typeof k[0][0]){var _,p,l,t,i=k[0].length,r=k.length*i;o&&"string"!=typeof o||(o=new(M(o||"float32"))(r+T));var n=o.length-T;if(r!==n)throw new Error("source length "+r+" ("+i+"x"+k.length+") does not match destination length "+n);for(_=0,l=T;_<k.length;_++)for(p=0;p<i;p++)o[l++]=null===k[_][p]?NaN:k[_][p]}else if(o&&"string"!=typeof o)o.set(k,T);else{var a=M(o||"float32");if(Array.isArray(k)||"array"===o)for(_=0,l=T,t=(o=new a(k.length+T)).length;l<t;l++,_++)o[l]=null===k[_]?NaN:k[_];else 0===T?o=new a(k):(o=new a(k.length+T)).set(k,T)}return o}},33888:function(ne,F,e){"use strict";var M=e(49395),k=[32,126];ne.exports=function(o){var T=(o=o||{}).shape?o.shape:o.canvas?[o.canvas.width,o.canvas.height]:[512,512],_=o.canvas||document.createElement("canvas"),p=o.font,l="number"==typeof o.step?[o.step,o.step]:o.step||[32,32],t=o.chars||k;if(p&&"string"!=typeof p&&(p=M(p)),Array.isArray(t)){if(2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]){for(var i=[],r=t[0],n=0;r<=t[1];r++)i[n++]=String.fromCharCode(r);t=i}}else t=String(t).split("");T=T.slice(),_.width=T[0],_.height=T[1];var a=_.getContext("2d");a.fillStyle="#000",a.fillRect(0,0,_.width,_.height),a.font=p,a.textAlign="center",a.textBaseline="middle",a.fillStyle="#fff";var s=l[0]/2,u=l[1]/2;for(r=0;r<t.length;r++)a.fillText(t[r],s,u),(s+=l[0])>T[0]-l[0]/2&&(s=l[0]/2,u+=l[1]);return _}},71920:function(ne){"use strict";function F(o,T){T||(T={}),("string"==typeof o||Array.isArray(o))&&(T.family=o);var _=Array.isArray(T.family)?T.family.join(", "):T.family;if(!_)throw Error("`family` must be defined");var p=T.size||T.fontSize||T.em||48,t=(o=[T.style||T.fontStyle||"",T.weight||T.fontWeight||"",p].join(" ")+"px "+_,T.origin||"top");if(F.cache[_]&&p<=F.cache[_].em)return e(F.cache[_],t);var i=T.canvas||F.canvas,r=i.getContext("2d"),n={upper:void 0!==T.upper?T.upper:"H",lower:void 0!==T.lower?T.lower:"x",descent:void 0!==T.descent?T.descent:"p",ascent:void 0!==T.ascent?T.ascent:"h",tittle:void 0!==T.tittle?T.tittle:"i",overshoot:void 0!==T.overshoot?T.overshoot:"O"},a=Math.ceil(1.5*p);i.height=a,i.width=.5*a,r.font=o;var s="H",u={top:0};r.clearRect(0,0,a,a),r.textBaseline="top",r.fillStyle="black",r.fillText(s,0,0);var f=M(r.getImageData(0,0,a,a));r.clearRect(0,0,a,a),r.textBaseline="bottom",r.fillText(s,0,a);var c=M(r.getImageData(0,0,a,a));u.lineHeight=u.bottom=a-c+f,r.clearRect(0,0,a,a),r.textBaseline="alphabetic",r.fillText(s,0,a);var y=a-M(r.getImageData(0,0,a,a))-1+f;u.baseline=u.alphabetic=y,r.clearRect(0,0,a,a),r.textBaseline="middle",r.fillText(s,0,.5*a);var d=M(r.getImageData(0,0,a,a));u.median=u.middle=a-d-1+f-.5*a,r.clearRect(0,0,a,a),r.textBaseline="hanging",r.fillText(s,0,.5*a);var m=M(r.getImageData(0,0,a,a));u.hanging=a-m-1+f-.5*a,r.clearRect(0,0,a,a),r.textBaseline="ideographic",r.fillText(s,0,a);var g=M(r.getImageData(0,0,a,a));if(u.ideographic=a-g-1+f,n.upper&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.upper,0,0),u.upper=M(r.getImageData(0,0,a,a)),u.capHeight=u.baseline-u.upper),n.lower&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.lower,0,0),u.lower=M(r.getImageData(0,0,a,a)),u.xHeight=u.baseline-u.lower),n.tittle&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.tittle,0,0),u.tittle=M(r.getImageData(0,0,a,a))),n.ascent&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.ascent,0,0),u.ascent=M(r.getImageData(0,0,a,a))),n.descent&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.descent,0,0),u.descent=k(r.getImageData(0,0,a,a))),n.overshoot){r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.overshoot,0,0);var x=k(r.getImageData(0,0,a,a));u.overshoot=x-y}for(var v in u)u[v]/=p;return u.em=p,F.cache[_]=u,e(u,t)}function e(o,T){var _={};for(var p in"string"==typeof T&&(T=o[T]),o)"em"!==p&&(_[p]=o[p]-T);return _}function M(o){for(var T=o.height,_=o.data,p=3;p<_.length;p+=4)if(0!==_[p])return Math.floor(.25*(p-3)/T)}function k(o){for(var T=o.height,_=o.data,p=_.length-1;p>0;p-=4)if(0!==_[p])return Math.floor(.25*(p-3)/T)}ne.exports=F,F.canvas=document.createElement("canvas"),F.cache={}},46492:function(ne,F,e){"use strict";var M=e(90720),k=Object.prototype.toString,o=Object.prototype.hasOwnProperty;ne.exports=function(T,_,p){if(!M(_))throw new TypeError("iterator must be a function");var l;arguments.length>=3&&(l=p),"[object Array]"===k.call(T)?function(t,i,r){for(var n=0,a=t.length;n<a;n++)o.call(t,n)&&(null==r?i(t[n],n,t):i.call(r,t[n],n,t))}(T,_,l):"string"==typeof T?function(t,i,r){for(var n=0,a=t.length;n<a;n++)null==r?i(t.charAt(n),n,t):i.call(r,t.charAt(n),n,t)}(T,_,l):function(t,i,r){for(var n in t)o.call(t,n)&&(null==r?i(t[n],n,t):i.call(r,t[n],n,t))}(T,_,l)}},74336:function(ne){"use strict";var F=Object.prototype.toString,e=Math.max,M=function(k,o){for(var T=[],_=0;_<k.length;_+=1)T[_]=k[_];for(var p=0;p<o.length;p+=1)T[p+k.length]=o[p];return T};ne.exports=function(k){var o=this;if("function"!=typeof o||"[object Function]"!==F.apply(o))throw new TypeError("Function.prototype.bind called on incompatible "+o);for(var T,_=function(r,n){for(var a=[],s=1,u=0;s<r.length;s+=1,u+=1)a[u]=r[s];return a}(arguments),p=e(0,o.length-_.length),l=[],t=0;t<p;t++)l[t]="$"+t;if(T=Function("binder","return function ("+function(r,n){for(var a="",s=0;s<r.length;s+=1)a+=r[s],s+1<r.length&&(a+=",");return a}(l)+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof T){var r=o.apply(this,M(_,arguments));return Object(r)===r?r:this}return o.apply(k,M(_,arguments))}),o.prototype){var i=function(){};i.prototype=o.prototype,T.prototype=new i,i.prototype=null}return T}},8844:function(ne,F,e){"use strict";var M=e(74336);ne.exports=Function.prototype.bind||M},13380:function(ne){ne.exports=function(F,e){if("string"!=typeof F)throw new TypeError("must specify type string");if(e=e||{},typeof document>"u"&&!e.canvas)return null;var M=e.canvas||document.createElement("canvas");"number"==typeof e.width&&(M.width=e.width),"number"==typeof e.height&&(M.height=e.height);var k,o=e;try{var T=[F];0===F.indexOf("webgl")&&T.push("experimental-"+F);for(var _=0;_<T.length;_++)if(k=M.getContext(T[_],o))return k}catch{k=null}return k||null}},53664:function(ne,F,e){"use strict";var M,k=SyntaxError,o=Function,T=TypeError,_=function(P){try{return o('"use strict"; return ('+P+").constructor;")()}catch{}},p=Object.getOwnPropertyDescriptor;if(p)try{p({},"")}catch{p=null}var l=function(){throw new T},t=p?function(){try{return l}catch{try{return p(arguments,"callee").get}catch{return l}}}():l,i=e(71080)(),r=e(69572)(),n=Object.getPrototypeOf||(r?function(P){return P.__proto__}:null),a={},s=typeof Uint8Array<"u"&&n?n(Uint8Array):M,u={"%AggregateError%":typeof AggregateError>"u"?M:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?M:ArrayBuffer,"%ArrayIteratorPrototype%":i&&n?n([][Symbol.iterator]()):M,"%AsyncFromSyncIteratorPrototype%":M,"%AsyncFunction%":a,"%AsyncGenerator%":a,"%AsyncGeneratorFunction%":a,"%AsyncIteratorPrototype%":a,"%Atomics%":typeof Atomics>"u"?M:Atomics,"%BigInt%":typeof BigInt>"u"?M:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?M:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?M:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?M:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?M:Float32Array,"%Float64Array%":typeof Float64Array>"u"?M:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?M:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":a,"%Int8Array%":typeof Int8Array>"u"?M:Int8Array,"%Int16Array%":typeof Int16Array>"u"?M:Int16Array,"%Int32Array%":typeof Int32Array>"u"?M:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":i&&n?n(n([][Symbol.iterator]())):M,"%JSON%":"object"==typeof JSON?JSON:M,"%Map%":typeof Map>"u"?M:Map,"%MapIteratorPrototype%":typeof Map<"u"&&i&&n?n((new Map)[Symbol.iterator]()):M,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?M:Promise,"%Proxy%":typeof Proxy>"u"?M:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?M:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?M:Set,"%SetIteratorPrototype%":typeof Set<"u"&&i&&n?n((new Set)[Symbol.iterator]()):M,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?M:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":i&&n?n(""[Symbol.iterator]()):M,"%Symbol%":i?Symbol:M,"%SyntaxError%":k,"%ThrowTypeError%":t,"%TypedArray%":s,"%TypeError%":T,"%Uint8Array%":typeof Uint8Array>"u"?M:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?M:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?M:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?M:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?M:WeakMap,"%WeakRef%":typeof WeakRef>"u"?M:WeakRef,"%WeakSet%":typeof WeakSet>"u"?M:WeakSet};if(n)try{null.error}catch(P){var f=n(n(P));u["%Error.prototype%"]=f}var c=function P(I){var O;if("%AsyncFunction%"===I)O=_("async function () {}");else if("%GeneratorFunction%"===I)O=_("function* () {}");else if("%AsyncGeneratorFunction%"===I)O=_("async function* () {}");else if("%AsyncGenerator%"===I){var z=P("%AsyncGeneratorFunction%");z&&(O=z.prototype)}else if("%AsyncIteratorPrototype%"===I){var U=P("%AsyncGenerator%");U&&n&&(O=n(U.prototype))}return u[I]=O,O},y={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},d=e(8844),m=e(92064),g=d.call(Function.call,Array.prototype.concat),x=d.call(Function.apply,Array.prototype.splice),v=d.call(Function.call,String.prototype.replace),b=d.call(Function.call,String.prototype.slice),h=d.call(Function.call,RegExp.prototype.exec),S=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,w=/\\(\\)?/g,E=function(P,I){var O,z=P;if(m(y,z)&&(z="%"+(O=y[z])[0]+"%"),m(u,z)){var U=u[z];if(U===a&&(U=c(z)),void 0===U&&!I)throw new T("intrinsic "+P+" exists, but is not available. Please file an issue!");return{alias:O,name:z,value:U}}throw new k("intrinsic "+P+" does not exist!")};ne.exports=function(P,I){if("string"!=typeof P||0===P.length)throw new T("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof I)throw new T('"allowMissing" argument must be a boolean');if(null===h(/^%?[^%]*%?$/,P))throw new k("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var O=function(J){var X=b(J,0,1),ae=b(J,-1);if("%"===X&&"%"!==ae)throw new k("invalid intrinsic syntax, expected closing `%`");if("%"===ae&&"%"!==X)throw new k("invalid intrinsic syntax, expected opening `%`");var ce=[];return v(J,S,function(le,pe,we,Te){ce[ce.length]=we?v(Te,w,"$1"):pe||le}),ce}(P),z=O.length>0?O[0]:"",U=E("%"+z+"%",I),R=U.name,j=U.value,Y=!1,B=U.alias;B&&(z=B[0],x(O,g([0,1],B)));for(var V=1,q=!0;V<O.length;V+=1){var ie=O[V],te=b(ie,0,1),ee=b(ie,-1);if(('"'===te||"'"===te||"`"===te||'"'===ee||"'"===ee||"`"===ee)&&te!==ee)throw new k("property names with quotes must have matching quotes");if("constructor"!==ie&&q||(Y=!0),m(u,R="%"+(z+="."+ie)+"%"))j=u[R];else if(null!=j){if(!(ie in j)){if(!I)throw new T("base intrinsic for "+P+" exists, but the property is not available.");return}if(p&&V+1>=O.length){var $=p(j,ie);j=(q=!!$)&&"get"in $&&!("originalValue"in $.get)?$.get:j[ie]}else q=m(j,ie),j=j[ie];q&&!Y&&(u[R]=j)}}return j}},12408:function(ne){ne.exports=function(F,e){var M=e[0],k=e[1],o=e[2],T=e[3],_=e[4],p=e[5],l=e[6],t=e[7],i=e[8],r=e[9],n=e[10],a=e[11],s=e[12],u=e[13],f=e[14],c=e[15];return F[0]=p*(n*c-a*f)-r*(l*c-t*f)+u*(l*a-t*n),F[1]=-(k*(n*c-a*f)-r*(o*c-T*f)+u*(o*a-T*n)),F[2]=k*(l*c-t*f)-p*(o*c-T*f)+u*(o*t-T*l),F[3]=-(k*(l*a-t*n)-p*(o*a-T*n)+r*(o*t-T*l)),F[4]=-(_*(n*c-a*f)-i*(l*c-t*f)+s*(l*a-t*n)),F[5]=M*(n*c-a*f)-i*(o*c-T*f)+s*(o*a-T*n),F[6]=-(M*(l*c-t*f)-_*(o*c-T*f)+s*(o*t-T*l)),F[7]=M*(l*a-t*n)-_*(o*a-T*n)+i*(o*t-T*l),F[8]=_*(r*c-a*u)-i*(p*c-t*u)+s*(p*a-t*r),F[9]=-(M*(r*c-a*u)-i*(k*c-T*u)+s*(k*a-T*r)),F[10]=M*(p*c-t*u)-_*(k*c-T*u)+s*(k*t-T*p),F[11]=-(M*(p*a-t*r)-_*(k*a-T*r)+i*(k*t-T*p)),F[12]=-(_*(r*f-n*u)-i*(p*f-l*u)+s*(p*n-l*r)),F[13]=M*(r*f-n*u)-i*(k*f-o*u)+s*(k*n-o*r),F[14]=-(M*(p*f-l*u)-_*(k*f-o*u)+s*(k*l-o*p)),F[15]=M*(p*n-l*r)-_*(k*n-o*r)+i*(k*l-o*p),F}},76860:function(ne){ne.exports=function(F){var e=new Float32Array(16);return e[0]=F[0],e[1]=F[1],e[2]=F[2],e[3]=F[3],e[4]=F[4],e[5]=F[5],e[6]=F[6],e[7]=F[7],e[8]=F[8],e[9]=F[9],e[10]=F[10],e[11]=F[11],e[12]=F[12],e[13]=F[13],e[14]=F[14],e[15]=F[15],e}},64492:function(ne){ne.exports=function(F,e){return F[0]=e[0],F[1]=e[1],F[2]=e[2],F[3]=e[3],F[4]=e[4],F[5]=e[5],F[6]=e[6],F[7]=e[7],F[8]=e[8],F[9]=e[9],F[10]=e[10],F[11]=e[11],F[12]=e[12],F[13]=e[13],F[14]=e[14],F[15]=e[15],F}},54212:function(ne){ne.exports=function(){var F=new Float32Array(16);return F[0]=1,F[1]=0,F[2]=0,F[3]=0,F[4]=0,F[5]=1,F[6]=0,F[7]=0,F[8]=0,F[9]=0,F[10]=1,F[11]=0,F[12]=0,F[13]=0,F[14]=0,F[15]=1,F}},70800:function(ne){ne.exports=function(F){var e=F[0],M=F[1],k=F[2],o=F[3],T=F[4],_=F[5],p=F[6],l=F[7],t=F[8],i=F[9],r=F[10],n=F[11],a=F[12],s=F[13],u=F[14],f=F[15];return(e*_-M*T)*(r*f-n*u)-(e*p-k*T)*(i*f-n*s)+(e*l-o*T)*(i*u-r*s)+(M*p-k*_)*(t*f-n*a)-(M*l-o*_)*(t*u-r*a)+(k*l-o*p)*(t*s-i*a)}},61784:function(ne){ne.exports=function(F,e){var M=e[0],k=e[1],o=e[2],T=e[3],_=M+M,p=k+k,l=o+o,t=M*_,i=k*_,r=k*p,n=o*_,a=o*p,s=o*l,u=T*_,f=T*p,c=T*l;return F[0]=1-r-s,F[1]=i+c,F[2]=n-f,F[3]=0,F[4]=i-c,F[5]=1-t-s,F[6]=a+u,F[7]=0,F[8]=n+f,F[9]=a-u,F[10]=1-t-r,F[11]=0,F[12]=0,F[13]=0,F[14]=0,F[15]=1,F}},91616:function(ne){ne.exports=function(F,e,M){var k,o,T,_=M[0],p=M[1],l=M[2],t=Math.sqrt(_*_+p*p+l*l);return Math.abs(t)<1e-6?null:(_*=t=1/t,p*=t,l*=t,k=Math.sin(e),T=1-(o=Math.cos(e)),F[0]=_*_*T+o,F[1]=p*_*T+l*k,F[2]=l*_*T-p*k,F[3]=0,F[4]=_*p*T-l*k,F[5]=p*p*T+o,F[6]=l*p*T+_*k,F[7]=0,F[8]=_*l*T+p*k,F[9]=p*l*T-_*k,F[10]=l*l*T+o,F[11]=0,F[12]=0,F[13]=0,F[14]=0,F[15]=1,F)}},51944:function(ne){ne.exports=function(F,e,M){var k=e[0],o=e[1],T=e[2],_=e[3],p=k+k,l=o+o,t=T+T,i=k*p,r=k*l,n=k*t,a=o*l,s=o*t,u=T*t,f=_*p,c=_*l,y=_*t;return F[0]=1-(a+u),F[1]=r+y,F[2]=n-c,F[3]=0,F[4]=r-y,F[5]=1-(i+u),F[6]=s+f,F[7]=0,F[8]=n+c,F[9]=s-f,F[10]=1-(i+a),F[11]=0,F[12]=M[0],F[13]=M[1],F[14]=M[2],F[15]=1,F}},69444:function(ne){ne.exports=function(F,e){return F[0]=e[0],F[1]=0,F[2]=0,F[3]=0,F[4]=0,F[5]=e[1],F[6]=0,F[7]=0,F[8]=0,F[9]=0,F[10]=e[2],F[11]=0,F[12]=0,F[13]=0,F[14]=0,F[15]=1,F}},48268:function(ne){ne.exports=function(F,e){return F[0]=1,F[1]=0,F[2]=0,F[3]=0,F[4]=0,F[5]=1,F[6]=0,F[7]=0,F[8]=0,F[9]=0,F[10]=1,F[11]=0,F[12]=e[0],F[13]=e[1],F[14]=e[2],F[15]=1,F}},21856:function(ne){ne.exports=function(F,e){var M=Math.sin(e),k=Math.cos(e);return F[0]=1,F[1]=0,F[2]=0,F[3]=0,F[4]=0,F[5]=k,F[6]=M,F[7]=0,F[8]=0,F[9]=-M,F[10]=k,F[11]=0,F[12]=0,F[13]=0,F[14]=0,F[15]=1,F}},79216:function(ne){ne.exports=function(F,e){var M=Math.sin(e),k=Math.cos(e);return F[0]=k,F[1]=0,F[2]=-M,F[3]=0,F[4]=0,F[5]=1,F[6]=0,F[7]=0,F[8]=M,F[9]=0,F[10]=k,F[11]=0,F[12]=0,F[13]=0,F[14]=0,F[15]=1,F}},57736:function(ne){ne.exports=function(F,e){var M=Math.sin(e),k=Math.cos(e);return F[0]=k,F[1]=M,F[2]=0,F[3]=0,F[4]=-M,F[5]=k,F[6]=0,F[7]=0,F[8]=0,F[9]=0,F[10]=1,F[11]=0,F[12]=0,F[13]=0,F[14]=0,F[15]=1,F}},38848:function(ne){ne.exports=function(F,e,M,k,o,T,_){var p=1/(M-e),l=1/(o-k),t=1/(T-_);return F[0]=2*T*p,F[1]=0,F[2]=0,F[3]=0,F[4]=0,F[5]=2*T*l,F[6]=0,F[7]=0,F[8]=(M+e)*p,F[9]=(o+k)*l,F[10]=(_+T)*t,F[11]=-1,F[12]=0,F[13]=0,F[14]=_*T*2*t,F[15]=0,F}},36635:function(ne){ne.exports=function(F){return F[0]=1,F[1]=0,F[2]=0,F[3]=0,F[4]=0,F[5]=1,F[6]=0,F[7]=0,F[8]=0,F[9]=0,F[10]=1,F[11]=0,F[12]=0,F[13]=0,F[14]=0,F[15]=1,F}},36524:function(ne,F,e){ne.exports={create:e(54212),clone:e(76860),copy:e(64492),identity:e(36635),transpose:e(86520),invert:e(4308),adjoint:e(12408),determinant:e(70800),multiply:e(80944),translate:e(35176),scale:e(68152),rotate:e(30016),rotateX:e(15456),rotateY:e(64840),rotateZ:e(4192),fromRotation:e(91616),fromRotationTranslation:e(51944),fromScaling:e(69444),fromTranslation:e(48268),fromXRotation:e(21856),fromYRotation:e(79216),fromZRotation:e(57736),fromQuat:e(61784),frustum:e(38848),perspective:e(51296),perspectiveFromFieldOfView:e(63688),ortho:e(97688),lookAt:e(56508),str:e(89412)}},4308:function(ne){ne.exports=function(F,e){var M=e[0],k=e[1],o=e[2],T=e[3],_=e[4],p=e[5],l=e[6],t=e[7],i=e[8],r=e[9],n=e[10],a=e[11],s=e[12],u=e[13],f=e[14],c=e[15],y=M*p-k*_,d=M*l-o*_,m=M*t-T*_,g=k*l-o*p,x=k*t-T*p,v=o*t-T*l,b=i*u-r*s,h=i*f-n*s,S=i*c-a*s,w=r*f-n*u,E=r*c-a*u,P=n*c-a*f,I=y*P-d*E+m*w+g*S-x*h+v*b;return I?(F[0]=(p*P-l*E+t*w)*(I=1/I),F[1]=(o*E-k*P-T*w)*I,F[2]=(u*v-f*x+c*g)*I,F[3]=(n*x-r*v-a*g)*I,F[4]=(l*S-_*P-t*h)*I,F[5]=(M*P-o*S+T*h)*I,F[6]=(f*m-s*v-c*d)*I,F[7]=(i*v-n*m+a*d)*I,F[8]=(_*E-p*S+t*b)*I,F[9]=(k*S-M*E-T*b)*I,F[10]=(s*x-u*m+c*y)*I,F[11]=(r*m-i*x-a*y)*I,F[12]=(p*h-_*w-l*b)*I,F[13]=(M*w-k*h+o*b)*I,F[14]=(u*d-s*g-f*y)*I,F[15]=(i*g-r*d+n*y)*I,F):null}},56508:function(ne,F,e){var M=e(36635);ne.exports=function(k,o,T,_){var p,l,t,i,r,n,a,s,u,f,c=o[0],y=o[1],d=o[2],m=_[0],g=_[1],x=_[2],v=T[0],b=T[1],h=T[2];return Math.abs(c-v)<1e-6&&Math.abs(y-b)<1e-6&&Math.abs(d-h)<1e-6?M(k):(a=c-v,s=y-b,u=d-h,p=g*(u*=f=1/Math.sqrt(a*a+s*s+u*u))-x*(s*=f),l=x*(a*=f)-m*u,t=m*s-g*a,(f=Math.sqrt(p*p+l*l+t*t))?(p*=f=1/f,l*=f,t*=f):(p=0,l=0,t=0),i=s*t-u*l,r=u*p-a*t,n=a*l-s*p,(f=Math.sqrt(i*i+r*r+n*n))?(i*=f=1/f,r*=f,n*=f):(i=0,r=0,n=0),k[0]=p,k[1]=i,k[2]=a,k[3]=0,k[4]=l,k[5]=r,k[6]=s,k[7]=0,k[8]=t,k[9]=n,k[10]=u,k[11]=0,k[12]=-(p*c+l*y+t*d),k[13]=-(i*c+r*y+n*d),k[14]=-(a*c+s*y+u*d),k[15]=1,k)}},80944:function(ne){ne.exports=function(F,e,M){var k=e[0],o=e[1],T=e[2],_=e[3],p=e[4],l=e[5],t=e[6],i=e[7],r=e[8],n=e[9],a=e[10],s=e[11],u=e[12],f=e[13],c=e[14],y=e[15],d=M[0],m=M[1],g=M[2],x=M[3];return F[0]=d*k+m*p+g*r+x*u,F[1]=d*o+m*l+g*n+x*f,F[2]=d*T+m*t+g*a+x*c,F[3]=d*_+m*i+g*s+x*y,F[4]=(d=M[4])*k+(m=M[5])*p+(g=M[6])*r+(x=M[7])*u,F[5]=d*o+m*l+g*n+x*f,F[6]=d*T+m*t+g*a+x*c,F[7]=d*_+m*i+g*s+x*y,F[8]=(d=M[8])*k+(m=M[9])*p+(g=M[10])*r+(x=M[11])*u,F[9]=d*o+m*l+g*n+x*f,F[10]=d*T+m*t+g*a+x*c,F[11]=d*_+m*i+g*s+x*y,F[12]=(d=M[12])*k+(m=M[13])*p+(g=M[14])*r+(x=M[15])*u,F[13]=d*o+m*l+g*n+x*f,F[14]=d*T+m*t+g*a+x*c,F[15]=d*_+m*i+g*s+x*y,F}},97688:function(ne){ne.exports=function(F,e,M,k,o,T,_){var p=1/(e-M),l=1/(k-o),t=1/(T-_);return F[0]=-2*p,F[1]=0,F[2]=0,F[3]=0,F[4]=0,F[5]=-2*l,F[6]=0,F[7]=0,F[8]=0,F[9]=0,F[10]=2*t,F[11]=0,F[12]=(e+M)*p,F[13]=(o+k)*l,F[14]=(_+T)*t,F[15]=1,F}},51296:function(ne){ne.exports=function(F,e,M,k,o){var T=1/Math.tan(e/2),_=1/(k-o);return F[0]=T/M,F[1]=0,F[2]=0,F[3]=0,F[4]=0,F[5]=T,F[6]=0,F[7]=0,F[8]=0,F[9]=0,F[10]=(o+k)*_,F[11]=-1,F[12]=0,F[13]=0,F[14]=2*o*k*_,F[15]=0,F}},63688:function(ne){ne.exports=function(F,e,M,k){var o=Math.tan(e.upDegrees*Math.PI/180),T=Math.tan(e.downDegrees*Math.PI/180),_=Math.tan(e.leftDegrees*Math.PI/180),p=Math.tan(e.rightDegrees*Math.PI/180),l=2/(_+p),t=2/(o+T);return F[0]=l,F[1]=0,F[2]=0,F[3]=0,F[4]=0,F[5]=t,F[6]=0,F[7]=0,F[8]=-(_-p)*l*.5,F[9]=(o-T)*t*.5,F[10]=k/(M-k),F[11]=-1,F[12]=0,F[13]=0,F[14]=k*M/(M-k),F[15]=0,F}},30016:function(ne){ne.exports=function(F,e,M,k){var o,T,_,p,l,t,i,r,n,a,s,u,f,c,y,d,m,g,x,v,b,h,S,w,E=k[0],P=k[1],I=k[2],O=Math.sqrt(E*E+P*P+I*I);return Math.abs(O)<1e-6?null:(E*=O=1/O,P*=O,I*=O,o=Math.sin(M),_=1-(T=Math.cos(M)),l=e[1],t=e[2],i=e[3],n=e[5],a=e[6],s=e[7],f=e[9],c=e[10],y=e[11],x=E*P*_-I*o,v=P*P*_+T,b=I*P*_+E*o,h=E*I*_+P*o,S=P*I*_-E*o,w=I*I*_+T,F[0]=(p=e[0])*(d=E*E*_+T)+(r=e[4])*(m=P*E*_+I*o)+(u=e[8])*(g=I*E*_-P*o),F[1]=l*d+n*m+f*g,F[2]=t*d+a*m+c*g,F[3]=i*d+s*m+y*g,F[4]=p*x+r*v+u*b,F[5]=l*x+n*v+f*b,F[6]=t*x+a*v+c*b,F[7]=i*x+s*v+y*b,F[8]=p*h+r*S+u*w,F[9]=l*h+n*S+f*w,F[10]=t*h+a*S+c*w,F[11]=i*h+s*S+y*w,e!==F&&(F[12]=e[12],F[13]=e[13],F[14]=e[14],F[15]=e[15]),F)}},15456:function(ne){ne.exports=function(F,e,M){var k=Math.sin(M),o=Math.cos(M),T=e[4],_=e[5],p=e[6],l=e[7],t=e[8],i=e[9],r=e[10],n=e[11];return e!==F&&(F[0]=e[0],F[1]=e[1],F[2]=e[2],F[3]=e[3],F[12]=e[12],F[13]=e[13],F[14]=e[14],F[15]=e[15]),F[4]=T*o+t*k,F[5]=_*o+i*k,F[6]=p*o+r*k,F[7]=l*o+n*k,F[8]=t*o-T*k,F[9]=i*o-_*k,F[10]=r*o-p*k,F[11]=n*o-l*k,F}},64840:function(ne){ne.exports=function(F,e,M){var k=Math.sin(M),o=Math.cos(M),T=e[0],_=e[1],p=e[2],l=e[3],t=e[8],i=e[9],r=e[10],n=e[11];return e!==F&&(F[4]=e[4],F[5]=e[5],F[6]=e[6],F[7]=e[7],F[12]=e[12],F[13]=e[13],F[14]=e[14],F[15]=e[15]),F[0]=T*o-t*k,F[1]=_*o-i*k,F[2]=p*o-r*k,F[3]=l*o-n*k,F[8]=T*k+t*o,F[9]=_*k+i*o,F[10]=p*k+r*o,F[11]=l*k+n*o,F}},4192:function(ne){ne.exports=function(F,e,M){var k=Math.sin(M),o=Math.cos(M),T=e[0],_=e[1],p=e[2],l=e[3],t=e[4],i=e[5],r=e[6],n=e[7];return e!==F&&(F[8]=e[8],F[9]=e[9],F[10]=e[10],F[11]=e[11],F[12]=e[12],F[13]=e[13],F[14]=e[14],F[15]=e[15]),F[0]=T*o+t*k,F[1]=_*o+i*k,F[2]=p*o+r*k,F[3]=l*o+n*k,F[4]=t*o-T*k,F[5]=i*o-_*k,F[6]=r*o-p*k,F[7]=n*o-l*k,F}},68152:function(ne){ne.exports=function(F,e,M){var k=M[0],o=M[1],T=M[2];return F[0]=e[0]*k,F[1]=e[1]*k,F[2]=e[2]*k,F[3]=e[3]*k,F[4]=e[4]*o,F[5]=e[5]*o,F[6]=e[6]*o,F[7]=e[7]*o,F[8]=e[8]*T,F[9]=e[9]*T,F[10]=e[10]*T,F[11]=e[11]*T,F[12]=e[12],F[13]=e[13],F[14]=e[14],F[15]=e[15],F}},89412:function(ne){ne.exports=function(F){return"mat4("+F[0]+", "+F[1]+", "+F[2]+", "+F[3]+", "+F[4]+", "+F[5]+", "+F[6]+", "+F[7]+", "+F[8]+", "+F[9]+", "+F[10]+", "+F[11]+", "+F[12]+", "+F[13]+", "+F[14]+", "+F[15]+")"}},35176:function(ne){ne.exports=function(F,e,M){var k,o,T,_,p,l,t,i,r,n,a,s,u=M[0],f=M[1],c=M[2];return e===F?(F[12]=e[0]*u+e[4]*f+e[8]*c+e[12],F[13]=e[1]*u+e[5]*f+e[9]*c+e[13],F[14]=e[2]*u+e[6]*f+e[10]*c+e[14],F[15]=e[3]*u+e[7]*f+e[11]*c+e[15]):(o=e[1],T=e[2],_=e[3],p=e[4],l=e[5],t=e[6],i=e[7],r=e[8],n=e[9],a=e[10],s=e[11],F[0]=k=e[0],F[1]=o,F[2]=T,F[3]=_,F[4]=p,F[5]=l,F[6]=t,F[7]=i,F[8]=r,F[9]=n,F[10]=a,F[11]=s,F[12]=k*u+p*f+r*c+e[12],F[13]=o*u+l*f+n*c+e[13],F[14]=T*u+t*f+a*c+e[14],F[15]=_*u+i*f+s*c+e[15]),F}},86520:function(ne){ne.exports=function(F,e){if(F===e){var M=e[1],k=e[2],o=e[3],T=e[6],_=e[7],p=e[11];F[1]=e[4],F[2]=e[8],F[3]=e[12],F[4]=M,F[6]=e[9],F[7]=e[13],F[8]=k,F[9]=T,F[11]=e[14],F[12]=o,F[13]=_,F[14]=p}else F[0]=e[0],F[1]=e[4],F[2]=e[8],F[3]=e[12],F[4]=e[1],F[5]=e[5],F[6]=e[9],F[7]=e[13],F[8]=e[2],F[9]=e[6],F[10]=e[10],F[11]=e[14],F[12]=e[3],F[13]=e[7],F[14]=e[11],F[15]=e[15];return F}},23352:function(ne,F,e){"use strict";var M=e(42771),k=e(55616),o=e(28624),T=e(55212),_=e(60463),p=e(72160),l=e(33888),t=e(14144),i=e(51160),r=e(58908),n=e(65819),a=e(23464),s=e(63768),u=e(50896),f=e(71920),c=e(47520),y=e(308).nextPow2,d=new _,m=!1;if(document.body){var g=document.body.appendChild(document.createElement("div"));g.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(g).fontStretch&&(m=!0),document.body.removeChild(g)}var x=function(v){var b;this.gl="function"==typeof(b=v)&&b._gl&&b.prop&&b.texture&&b.buffer?(v={regl:v}).regl._gl:T(v),this.shader=d.get(this.gl),this.regl=this.shader?this.shader.regl:v.regl||o({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),d.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(r(v)?v:{})};x.prototype.createShader=function(){var v=this.regl,b=v({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:v.prop("count"),offset:v.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:v.this("sizeBuffer")},width:{offset:0,stride:8,buffer:v.this("sizeBuffer")},char:v.this("charBuffer"),position:v.this("position")},uniforms:{atlasSize:function(h,S){return[S.atlas.width,S.atlas.height]},atlasDim:function(h,S){return[S.atlas.cols,S.atlas.rows]},atlas:function(h,S){return S.atlas.texture},charStep:function(h,S){return S.atlas.step},em:function(h,S){return S.atlas.em},color:v.prop("color"),opacity:v.prop("opacity"),viewport:v.this("viewportArray"),scale:v.this("scale"),align:v.prop("align"),baseline:v.prop("baseline"),translate:v.this("translate"),positionOffset:v.prop("positionOffset")},primitive:"points",viewport:v.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\tvec2 offset = floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ vec2(positionOffset.x, -positionOffset.y)))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position = (position + translate) * scale;\n\t\t\t\tposition += offset * scale;\n\n\t\t\t\tcharCoord = position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position = vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize = charStep;\n\n\t\t\t\tcharId.x = mod(char, atlasDim.x);\n\t\t\t\tcharId.y = floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth = width * em;\n\n\t\t\t\tfontColor = color / 255.;\n\t\t\t}",frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform sampler2D atlas;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep = floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y = charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth = ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) > halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) < halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv += charId * charStep;\n\t\t\t\tuv = uv / atlasSize;\n\n\t\t\t\tvec4 color = fontColor;\n\t\t\t\tvec4 mask = texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY = lightness(mask);\n\t\t\t\t// float colorY = lightness(color);\n\t\t\t\tcolor.a *= maskY;\n\t\t\t\tcolor.a *= opacity;\n\n\t\t\t\t// color.a += .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb += (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor = color;\n\t\t\t}"});return{regl:v,draw:b,atlas:{}}},x.prototype.update=function(v){var b=this;if("string"==typeof v)v={text:v};else if(!v)return;null!=(v=k(v,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity&&(this.opacity=Array.isArray(v.opacity)?v.opacity.map(function(ge){return parseFloat(ge)}):parseFloat(v.opacity)),null!=v.viewport&&(this.viewport=i(v.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null!=v.kerning&&(this.kerning=v.kerning),null!=v.offset&&("number"==typeof v.offset&&(v.offset=[v.offset,0]),this.positionOffset=c(v.offset)),v.direction&&(this.direction=v.direction),v.range&&(this.range=v.range,this.scale=[1/(v.range[2]-v.range[0]),1/(v.range[3]-v.range[1])],this.translate=[-v.range[0],-v.range[1]]),v.scale&&(this.scale=v.scale),v.translate&&(this.translate=v.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||v.font||(v.font=x.baseFontSize+"px sans-serif");var h,S=!1,w=!1;if(v.font&&(Array.isArray(v.font)?v.font:[v.font]).forEach(function(ge,Ie){if("string"==typeof ge)try{ge=M.parse(ge)}catch{ge=M.parse(x.baseFontSize+"px "+ge)}else{var ke=ge.style,Se=ge.weight,Pe=ge.stretch,Fe=ge.variant;ge=M.parse(M.stringify(ge)),ke&&(ge.style=ke),Se&&(ge.weight=Se),Pe&&(ge.stretch=Pe),Fe&&(ge.variant=Fe)}var Be=M.stringify({size:x.baseFontSize,family:ge.family,stretch:m?ge.stretch:void 0,variant:ge.variant,weight:ge.weight,style:ge.style}),me=n(ge.size),Me=Math.round(me[0]*a(me[1]));if(Me!==b.fontSize[Ie]&&(w=!0,b.fontSize[Ie]=Me),!(b.font[Ie]&&Be==b.font[Ie].baseString||(S=!0,b.font[Ie]=x.fonts[Be],b.font[Ie]))){var Le=ge.family.join(", "),Ne=[ge.style];ge.style!=ge.variant&&Ne.push(ge.variant),ge.variant!=ge.weight&&Ne.push(ge.weight),m&&ge.weight!=ge.stretch&&Ne.push(ge.stretch),b.font[Ie]={baseString:Be,family:Le,weight:ge.weight,stretch:ge.stretch,style:ge.style,variant:ge.variant,width:{},kerning:{},metrics:f(Le,{origin:"top",fontSize:x.baseFontSize,fontStyle:Ne.join(" ")})},x.fonts[Be]=b.font[Ie]}}),(S||w)&&this.font.forEach(function(ge,Ie){var ke=M.stringify({size:b.fontSize[Ie],family:ge.family,stretch:m?ge.stretch:void 0,variant:ge.variant,weight:ge.weight,style:ge.style});b.fontAtlas[Ie]=b.shader.atlas[ke],b.fontAtlas[Ie]||(b.shader.atlas[ke]=b.fontAtlas[Ie]={fontString:ke,step:2*Math.ceil(b.fontSize[Ie]*ge.metrics.bottom*.5),em:b.fontSize[Ie],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:b.regl.texture()}),null==v.text&&(v.text=b.text)}),"string"==typeof v.text&&v.position&&v.position.length>2){for(var E=Array(.5*v.position.length),P=0;P<E.length;P++)E[P]=v.text;v.text=E}if(null!=v.text||S){if(this.textOffsets=[0],Array.isArray(v.text)){this.count=v.text[0].length,this.counts=[this.count];for(var I=1;I<v.text.length;I++)this.textOffsets[I]=this.textOffsets[I-1]+v.text[I-1].length,this.count+=v.text[I].length,this.counts.push(v.text[I].length);this.text=v.text.join("")}else this.text=v.text,this.count=this.text.length,this.counts=[this.count];h=[],this.font.forEach(function(ge,Ie){x.atlasContext.font=ge.baseString;for(var ke=b.fontAtlas[Ie],Se=0;Se<b.text.length;Se++){var Pe=b.text.charAt(Se);if(null==ke.ids[Pe]&&(ke.ids[Pe]=ke.chars.length,ke.chars.push(Pe),h.push(Pe)),null==ge.width[Pe]&&(ge.width[Pe]=x.atlasContext.measureText(Pe).width/x.baseFontSize,b.kerning)){var Fe=[];for(var Be in ge.width)Fe.push(Be+Pe,Pe+Be);u(ge.kerning,s(ge.family,{pairs:Fe}))}}})}if(v.position)if(v.position.length>2){for(var O=!v.position[0].length,z=t.mallocFloat(2*this.count),U=0,R=0;U<this.counts.length;U++){var j=this.counts[U];if(O)for(var Y=0;Y<j;Y++)z[R++]=v.position[2*U],z[R++]=v.position[2*U+1];else for(var B=0;B<j;B++)z[R++]=v.position[U][0],z[R++]=v.position[U][1]}this.position.call?this.position({type:"float",data:z}):this.position=this.regl.buffer({type:"float",data:z}),t.freeFloat(z)}else this.position.destroy&&this.position.destroy(),this.position={constant:v.position};if(v.text||S){var V=t.mallocUint8(this.count),q=t.mallocFloat(2*this.count);this.textWidth=[];for(var ie=0,te=0;ie<this.counts.length;ie++){for(var ee=this.counts[ie],$=this.font[ie]||this.font[0],J=this.fontAtlas[ie]||this.fontAtlas[0],X=0;X<ee;X++){var ae=this.text.charAt(te),ce=this.text.charAt(te-1);if(V[te]=J.ids[ae],q[2*te]=$.width[ae],X){var we=q[2*te-1]+.5*q[2*te-2]+.5*q[2*te];if(this.kerning){var Te=$.kerning[ce+ae];Te&&(we+=.001*Te)}q[2*te+1]=we}else q[2*te+1]=.5*q[2*te];te++}this.textWidth.push(q.length?.5*q[2*te-2]+q[2*te-1]:0)}v.align||(v.align=this.align),this.charBuffer({data:V,type:"uint8",usage:"stream"}),this.sizeBuffer({data:q,type:"float",usage:"stream"}),t.freeUint8(V),t.freeFloat(q),h.length&&this.font.forEach(function(ge,Ie){var ke=b.fontAtlas[Ie],Se=ke.step,Pe=Math.floor(x.maxAtlasSize/Se),Fe=Math.min(Pe,ke.chars.length),Be=Math.ceil(ke.chars.length/Fe),me=y(Fe*Se),Me=y(Be*Se);ke.width=me,ke.height=Me,ke.rows=Be,ke.cols=Fe,ke.em&&ke.texture({data:l({canvas:x.atlasCanvas,font:ke.fontString,chars:ke.chars,shape:[me,Me],step:[Se,Se]})})})}if(v.align&&(this.align=v.align,this.alignOffset=this.textWidth.map(function(ge,Ie){var ke=Array.isArray(b.align)?b.align.length>1?b.align[Ie]:b.align[0]:b.align;if("number"==typeof ke)return ke;switch(ke){case"right":case"end":return-ge;case"center":case"centre":case"middle":return.5*-ge}return 0})),null==this.baseline&&null==v.baseline&&(v.baseline=0),null!=v.baseline&&(this.baseline=v.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(ge,Ie){var ke=(b.font[Ie]||b.font[0]).metrics,Se=0;return-1*((Se+=.5*ke.bottom)+("number"==typeof ge?ge-ke.baseline:-ke[ge]))})),null!=v.color)if(v.color||(v.color="transparent"),"string"!=typeof v.color&&isNaN(v.color)){var ye;if("number"==typeof v.color[0]&&v.color.length>this.counts.length){var ve=v.color.length;ye=t.mallocUint8(ve);for(var xe=(v.color.subarray||v.color.slice).bind(v.color),Ce=0;Ce<ve;Ce+=4)ye.set(p(xe(Ce,Ce+4),"uint8"),Ce)}else{var Oe=v.color.length;ye=t.mallocUint8(4*Oe);for(var be=0;be<Oe;be++)ye.set(p(v.color[be]||0,"uint8"),4*be)}this.color=ye}else this.color=p(v.color,"uint8");if(v.position||v.text||v.color||v.baseline||v.align||v.font||v.offset||v.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var ue=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(ue);for(var se=0;se<this.batch.length;se++)this.batch[se]={count:this.counts.length>1?this.counts[se]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[se]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*se,4*se+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[se]:this.opacity,baseline:null!=this.baselineOffset[se]?this.baselineOffset[se]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[se]?this.alignOffset[se]:this.alignOffset[0]:0,atlas:this.fontAtlas[se]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*se,2*se+2):this.positionOffset}}else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:[]},x.prototype.destroy=function(){},x.prototype.kerning=!0,x.prototype.position={constant:new Float32Array(2)},x.prototype.translate=null,x.prototype.scale=null,x.prototype.font=null,x.prototype.text="",x.prototype.positionOffset=[0,0],x.prototype.opacity=1,x.prototype.color=new Uint8Array([0,0,0,255]),x.prototype.alignOffset=[0,0],x.maxAtlasSize=1024,x.atlasCanvas=document.createElement("canvas"),x.atlasContext=x.atlasCanvas.getContext("2d",{alpha:!1}),x.baseFontSize=64,x.fonts={},ne.exports=x},55212:function(ne,F,e){"use strict";var M=e(55616);function k(_){if(_.container)if(_.container==document.body)document.body.style.width||(_.canvas.width=_.width||_.pixelRatio*e.g.innerWidth),document.body.style.height||(_.canvas.height=_.height||_.pixelRatio*e.g.innerHeight);else{var p=_.container.getBoundingClientRect();_.canvas.width=_.width||p.right-p.left,_.canvas.height=_.height||p.bottom-p.top}}function o(_){return"function"==typeof _.getContext&&"width"in _&&"height"in _}function T(){var _=document.createElement("canvas");return _.style.position="absolute",_.style.top=0,_.style.left=0,_}ne.exports=function(_){var p,t;if(_?"string"==typeof _&&(_={container:_}):_={},(_=o(_)||"string"==typeof(p=_).nodeName&&"function"==typeof p.appendChild&&"function"==typeof p.getBoundingClientRect?{container:_}:(t=_,"function"==typeof t.drawArrays||"function"==typeof t.drawElements?{gl:_}:M(_,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0))).pixelRatio||(_.pixelRatio=e.g.pixelRatio||1),_.gl)return _.gl;if(_.canvas&&(_.container=_.canvas.parentNode),_.container){if("string"==typeof _.container){var l=document.querySelector(_.container);if(!l)throw Error("Element "+_.container+" is not found");_.container=l}o(_.container)?(_.canvas=_.container,_.container=_.canvas.parentNode):_.canvas||(_.canvas=T(),_.container.appendChild(_.canvas),k(_))}else if(!_.canvas){if(typeof document>"u")throw Error("Not DOM environment. Use headless-gl.");_.container=document.body||document.documentElement,_.canvas=T(),_.container.appendChild(_.canvas),k(_)}return _.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(t){try{_.gl=_.canvas.getContext(t,_.attrs)}catch{}return _.gl}),_.gl}},26444:function(ne){ne.exports=function(F){"string"==typeof F&&(F=[F]);for(var e=[].slice.call(arguments,1),M=[],k=0;k<F.length-1;k++)M.push(F[k],e[k]||"");return M.push(F[k]),M.join("")}},2304:function(ne,F,e){"use strict";var M=e(53664)("%Object.getOwnPropertyDescriptor%",!0);if(M)try{M([],"length")}catch{M=null}ne.exports=M},52264:function(ne,F,e){"use strict";var M,k=e(24200);M="function"==typeof e.g.matchMedia?!e.g.matchMedia("(hover: none)").matches:k,ne.exports=M},89184:function(ne,F,e){"use strict";var M=e(24200);ne.exports=M&&function(){var k=!1;try{var o=Object.defineProperty({},"passive",{get:function(){k=!0}});window.addEventListener("test",null,o),window.removeEventListener("test",null,o)}catch{k=!1}return k}()},39640:function(ne,F,e){"use strict";var M=e(53664)("%Object.defineProperty%",!0),k=function(){if(M)try{return M({},"a",{value:1}),!0}catch{return!1}return!1};k.hasArrayLengthDefineBug=function(){if(!k())return null;try{return 1!==M([],"length",{value:1}).length}catch{return!0}},ne.exports=k},69572:function(ne){"use strict";var F={foo:{}},e=Object;ne.exports=function(){return{__proto__:F}.foo===F.foo&&!({__proto__:null}instanceof e)}},71080:function(ne,F,e){"use strict";var M=typeof Symbol<"u"&&Symbol,k=e(89320);ne.exports=function(){return"function"==typeof M&&"function"==typeof Symbol&&"symbol"==typeof M("foo")&&"symbol"==typeof Symbol("bar")&&k()}},89320:function(ne){"use strict";ne.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var F={},e=Symbol("test"),M=Object(e);if("string"==typeof e||"[object Symbol]"!==Object.prototype.toString.call(e)||"[object Symbol]"!==Object.prototype.toString.call(M))return!1;for(e in F[e]=42,F)return!1;if("function"==typeof Object.keys&&0!==Object.keys(F).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(F).length)return!1;var k=Object.getOwnPropertySymbols(F);if(1!==k.length||k[0]!==e||!Object.prototype.propertyIsEnumerable.call(F,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(F,e);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},46672:function(ne,F,e){"use strict";var M=e(89320);ne.exports=function(){return M()&&!!Symbol.toStringTag}},92064:function(ne,F,e){"use strict";var M=Function.prototype.call,k=Object.prototype.hasOwnProperty,o=e(8844);ne.exports=o.call(M,k)},35984:function(ne,F){F.read=function(e,M,k,o,T){var _,p,l=8*T-o-1,t=(1<<l)-1,i=t>>1,r=-7,n=k?T-1:0,a=k?-1:1,s=e[M+n];for(n+=a,_=s&(1<<-r)-1,s>>=-r,r+=l;r>0;_=256*_+e[M+n],n+=a,r-=8);for(p=_&(1<<-r)-1,_>>=-r,r+=o;r>0;p=256*p+e[M+n],n+=a,r-=8);if(0===_)_=1-i;else{if(_===t)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,o),_-=i}return(s?-1:1)*p*Math.pow(2,_-o)},F.write=function(e,M,k,o,T,_){var p,l,t,i=8*_-T-1,r=(1<<i)-1,n=r>>1,a=23===T?Math.pow(2,-24)-Math.pow(2,-77):0,s=o?0:_-1,u=o?1:-1,f=M<0||0===M&&1/M<0?1:0;for(M=Math.abs(M),isNaN(M)||M===1/0?(l=isNaN(M)?1:0,p=r):(p=Math.floor(Math.log(M)/Math.LN2),M*(t=Math.pow(2,-p))<1&&(p--,t*=2),(M+=p+n>=1?a/t:a*Math.pow(2,1-n))*t>=2&&(p++,t/=2),p+n>=r?(l=0,p=r):p+n>=1?(l=(M*t-1)*Math.pow(2,T),p+=n):(l=M*Math.pow(2,n-1)*Math.pow(2,T),p=0));T>=8;e[k+s]=255&l,s+=u,l/=256,T-=8);for(p=p<<T|l,i+=T;i>0;e[k+s]=255&p,s+=u,p/=256,i-=8);e[k+s-u]|=128*f}},6768:function(ne){ne.exports="function"==typeof Object.create?function(F,e){e&&(F.super_=e,F.prototype=Object.create(e.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}))}:function(F,e){if(e){F.super_=e;var M=function(){};M.prototype=e.prototype,F.prototype=new M,F.prototype.constructor=F}}},91148:function(ne,F,e){"use strict";var M=e(46672)(),k=e(99676)("Object.prototype.toString"),o=function(p){return!(M&&p&&"object"==typeof p&&Symbol.toStringTag in p)&&"[object Arguments]"===k(p)},T=function(p){return!!o(p)||null!==p&&"object"==typeof p&&"number"==typeof p.length&&p.length>=0&&"[object Array]"!==k(p)&&"[object Function]"===k(p.callee)},_=function(){return o(arguments)}();o.isLegacyArguments=T,ne.exports=_?o:T},24200:function(ne){ne.exports=!0},90720:function(ne){"use strict";var F,e,M=Function.prototype.toString,k="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof k&&"function"==typeof Object.defineProperty)try{F=Object.defineProperty({},"length",{get:function(){throw e}}),e={},k(function(){throw 42},null,F)}catch(n){n!==e&&(k=null)}else k=null;var o=/^\s*class\b/,T=function(n){try{var a=M.call(n);return o.test(a)}catch{return!1}},_=function(n){try{return!T(n)&&(M.call(n),!0)}catch{return!1}},p=Object.prototype.toString,l="function"==typeof Symbol&&!!Symbol.toStringTag,t=!(0 in[,]),i=function(){return!1};if("object"==typeof document){var r=document.all;p.call(r)===p.call(document.all)&&(i=function(n){if((t||!n)&&(void 0===n||"object"==typeof n))try{var a=p.call(n);return("[object HTMLAllCollection]"===a||"[object HTML document.all class]"===a||"[object HTMLCollection]"===a||"[object Object]"===a)&&null==n("")}catch{}return!1})}ne.exports=k?function(n){if(i(n))return!0;if(!n||"function"!=typeof n&&"object"!=typeof n)return!1;try{k(n,null,F)}catch(a){if(a!==e)return!1}return!T(n)&&_(n)}:function(n){if(i(n))return!0;if(!n||"function"!=typeof n&&"object"!=typeof n)return!1;if(l)return _(n);if(T(n))return!1;var a=p.call(n);return!("[object Function]"!==a&&"[object GeneratorFunction]"!==a&&!/^\[object HTML/.test(a))&&_(n)}},84420:function(ne,F,e){"use strict";var M,k=Object.prototype.toString,o=Function.prototype.toString,T=/^\s*(?:function)?\*/,_=e(46672)(),p=Object.getPrototypeOf;ne.exports=function(l){if("function"!=typeof l)return!1;if(T.test(o.call(l)))return!0;if(!_)return"[object GeneratorFunction]"===k.call(l);if(!p)return!1;if(void 0===M){var t=function(){if(!_)return!1;try{return Function("return function*() {}")()}catch{}}();M=!!t&&p(t)}return p(l)===M}},96604:function(ne){"use strict";ne.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},85992:function(ne){"use strict";ne.exports=function(F){return F!=F}},1560:function(ne,F,e){"use strict";var M=e(57916),k=e(81288),o=e(85992),T=e(57740),_=e(59736),p=M(T(),Number);k(p,{getPolyfill:T,implementation:o,shim:_}),ne.exports=p},57740:function(ne,F,e){"use strict";var M=e(85992);ne.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:M}},59736:function(ne,F,e){"use strict";var M=e(81288),k=e(57740);ne.exports=function(){var o=k();return M(Number,{isNaN:o},{isNaN:function(){return Number.isNaN!==o}}),o}},18400:function(ne){"use strict";ne.exports=function(F){var e=typeof F;return null!==F&&("object"===e||"function"===e)}},58908:function(ne){"use strict";var F=Object.prototype.toString;ne.exports=function(e){var M;return"[object Object]"===F.call(e)&&(null===(M=Object.getPrototypeOf(e))||M===Object.getPrototypeOf({}))}},94576:function(ne){"use strict";ne.exports=function(F){for(var e,M=F.length,k=0;k<M;k++)if(((e=F.charCodeAt(k))<9||e>13)&&32!==e&&133!==e&&160!==e&&5760!==e&&6158!==e&&(e<8192||e>8205)&&8232!==e&&8233!==e&&8239!==e&&8287!==e&&8288!==e&&12288!==e&&65279!==e)return!1;return!0}},53520:function(ne){"use strict";ne.exports=function(F){return"string"==typeof F&&(F=F.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(F)&&/[\dz]$/i.test(F)&&F.length>4))}},7728:function(ne,F,e){"use strict";var M=e(46492),k=e(63436),o=e(99676),T=o("Object.prototype.toString"),_=e(46672)(),p=e(2304),l=typeof globalThis>"u"?e.g:globalThis,t=k(),i=o("Array.prototype.indexOf",!0)||function(s,u){for(var f=0;f<s.length;f+=1)if(s[f]===u)return f;return-1},r=o("String.prototype.slice"),n={},a=Object.getPrototypeOf;_&&p&&a&&M(t,function(s){var u=new l[s];if(Symbol.toStringTag in u){var f=a(u),c=p(f,Symbol.toStringTag);if(!c){var y=a(f);c=p(y,Symbol.toStringTag)}n[s]=c.get}}),ne.exports=function(s){if(!s||"object"!=typeof s)return!1;if(!_||!(Symbol.toStringTag in s)){var u=r(T(s),8,-1);return i(t,u)>-1}return!!p&&(f=s,c=!1,M(n,function(y,d){if(!c)try{c=y.call(f)===d}catch{}}),c);var f,c}},76244:function(ne){"use strict";ne.exports=Math.log2||function(F){return Math.log(F)*Math.LOG2E}},62644:function(ne,F,e){"use strict";ne.exports=function(k,o){o||(o=k,k=window);var T=0,_=0,p=0,l={shift:!1,alt:!1,control:!1,meta:!1},t=!1;function i(m){var g=!1;return"altKey"in m&&(g=g||m.altKey!==l.alt,l.alt=!!m.altKey),"shiftKey"in m&&(g=g||m.shiftKey!==l.shift,l.shift=!!m.shiftKey),"ctrlKey"in m&&(g=g||m.ctrlKey!==l.control,l.control=!!m.ctrlKey),"metaKey"in m&&(g=g||m.metaKey!==l.meta,l.meta=!!m.metaKey),g}function r(m,g){var x=M.x(g),v=M.y(g);"buttons"in g&&(m=0|g.buttons),(m!==T||x!==_||v!==p||i(g))&&(T=0|m,_=x||0,p=v||0,o&&o(T,_,p,l))}function n(m){r(0,m)}function a(){(T||_||p||l.shift||l.alt||l.meta||l.control)&&(_=p=0,T=0,l.shift=l.alt=l.control=l.meta=!1,o&&o(0,0,0,l))}function s(m){i(m)&&o&&o(T,_,p,l)}function u(m){0===M.buttons(m)?r(0,m):r(T,m)}function f(m){r(T|M.buttons(m),m)}function c(m){r(T&~M.buttons(m),m)}function y(){t||(t=!0,k.addEventListener("mousemove",u),k.addEventListener("mousedown",f),k.addEventListener("mouseup",c),k.addEventListener("mouseleave",n),k.addEventListener("mouseenter",n),k.addEventListener("mouseout",n),k.addEventListener("mouseover",n),k.addEventListener("blur",a),k.addEventListener("keyup",s),k.addEventListener("keydown",s),k.addEventListener("keypress",s),k!==window&&(window.addEventListener("blur",a),window.addEventListener("keyup",s),window.addEventListener("keydown",s),window.addEventListener("keypress",s)))}y();var d={element:k};return Object.defineProperties(d,{enabled:{get:function(){return t},set:function(m){m?y():t&&(t=!1,k.removeEventListener("mousemove",u),k.removeEventListener("mousedown",f),k.removeEventListener("mouseup",c),k.removeEventListener("mouseleave",n),k.removeEventListener("mouseenter",n),k.removeEventListener("mouseout",n),k.removeEventListener("mouseover",n),k.removeEventListener("blur",a),k.removeEventListener("keyup",s),k.removeEventListener("keydown",s),k.removeEventListener("keypress",s),k!==window&&(window.removeEventListener("blur",a),window.removeEventListener("keyup",s),window.removeEventListener("keydown",s),window.removeEventListener("keypress",s)))},enumerable:!0},buttons:{get:function(){return T},enumerable:!0},x:{get:function(){return _},enumerable:!0},y:{get:function(){return p},enumerable:!0},mods:{get:function(){return l},enumerable:!0}}),d};var M=e(93784)},29128:function(ne){var F={left:0,top:0};ne.exports=function(e,M,k){M=M||e.currentTarget||e.srcElement,Array.isArray(k)||(k=[0,0]);var o,T=e.clientX||0,_=e.clientY||0,p=(o=M)===window||o===document||o===document.body?F:o.getBoundingClientRect();return k[0]=T-p.left,k[1]=_-p.top,k}},93784:function(ne,F){"use strict";function e(M){return M.target||M.srcElement||window}F.buttons=function(M){if("object"==typeof M){if("buttons"in M)return M.buttons;if("which"in M){if(2===(k=M.which))return 4;if(3===k)return 2;if(k>0)return 1<<k-1}else if("button"in M){var k;if(1===(k=M.button))return 4;if(2===k)return 2;if(k>=0)return 1<<k}}return 0},F.element=e,F.x=function(M){if("object"==typeof M){if("offsetX"in M)return M.offsetX;var k=e(M).getBoundingClientRect();return M.clientX-k.left}return 0},F.y=function(M){if("object"==typeof M){if("offsetY"in M)return M.offsetY;var k=e(M).getBoundingClientRect();return M.clientY-k.top}return 0}},97264:function(ne,F,e){"use strict";var M=e(23464);ne.exports=function(k,o,T){"function"==typeof k&&(T=!!o,o=k,k=window);var _=M("ex",k),p=function(l){T&&l.preventDefault();var t=l.deltaX||0,i=l.deltaY||0,r=l.deltaZ||0,n=1;switch(l.deltaMode){case 1:n=_;break;case 2:n=window.innerHeight}if(i*=n,r*=n,(t*=n)||i||r)return o(t,i,r,l)};return k.addEventListener("wheel",p),p}},88324:function(ne,F,e){var M,k,o;(o=void 0!==e.g?e.g:this)[k="Promise"]=o[k]||function(){"use strict";var _,p,l,t=Object.prototype.toString,i=typeof setImmediate<"u"?function(x){return setImmediate(x)}:setTimeout;try{Object.defineProperty({},"x",{}),_=function(x,v,b,h){return Object.defineProperty(x,v,{value:b,writable:!0,configurable:!1!==h})}}catch{_=function(v,b,h){return v[b]=h,v}}function r(x,v){l.add(x,v),p||(p=i(l.drain))}function n(x){var v,b=typeof x;return null==x||"object"!=b&&"function"!=b||(v=x.then),"function"==typeof v&&v}function a(){for(var x=0;x<this.chain.length;x++)s(this,1===this.state?this.chain[x].success:this.chain[x].failure,this.chain[x]);this.chain.length=0}function s(x,v,b){var h,S;try{!1===v?b.reject(x.msg):(h=!0===v?x.msg:v.call(void 0,x.msg))===b.promise?b.reject(TypeError("Promise-chain cycle")):(S=n(h))?S.call(h,b.resolve,b.reject):b.resolve(h)}catch(w){b.reject(w)}}function u(x){var v,b=this;if(!b.triggered){b.triggered=!0,b.def&&(b=b.def);try{(v=n(x))?r(function(){var h=new y(b);try{v.call(x,function(){u.apply(h,arguments)},function(){f.apply(h,arguments)})}catch(S){f.call(h,S)}}):(b.msg=x,b.state=1,b.chain.length>0&&r(a,b))}catch(h){f.call(new y(b),h)}}}function f(x){var v=this;v.triggered||(v.triggered=!0,v.def&&(v=v.def),v.msg=x,v.state=2,v.chain.length>0&&r(a,v))}function c(x,v,b,h){for(var S=0;S<v.length;S++)!function(w){x.resolve(v[w]).then(function(E){b(w,E)},h)}(S)}function y(x){this.def=x,this.triggered=!1}function d(x){this.promise=x,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function m(x){if("function"!=typeof x)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var v=new d(this);this.then=function(b,h){var S={success:"function"!=typeof b||b,failure:"function"==typeof h&&h};return S.promise=new this.constructor(function(w,E){if("function"!=typeof w||"function"!=typeof E)throw TypeError("Not a function");S.resolve=w,S.reject=E}),v.chain.push(S),0!==v.state&&r(a,v),S.promise},this.catch=function(b){return this.then(void 0,b)};try{x.call(void 0,function(b){u.call(v,b)},function(b){f.call(v,b)})}catch(b){f.call(v,b)}}l=function(){var x,v,b;function h(S,w){this.fn=S,this.self=w,this.next=void 0}return{add:function(S,w){b=new h(S,w),v?v.next=b:x=b,v=b,b=void 0},drain:function(){var S=x;for(x=v=p=void 0;S;)S.fn.call(S.self),S=S.next}}}();var g=_({},"constructor",m,!1);return m.prototype=g,_(g,"__NPO__",0,!1),_(m,"resolve",function(x){return x&&"object"==typeof x&&1===x.__NPO__?x:new this(function(v,b){if("function"!=typeof v||"function"!=typeof b)throw TypeError("Not a function");v(x)})}),_(m,"reject",function(x){return new this(function(v,b){if("function"!=typeof v||"function"!=typeof b)throw TypeError("Not a function");b(x)})}),_(m,"all",function(x){var v=this;return"[object Array]"!=t.call(x)?v.reject(TypeError("Not an array")):0===x.length?v.resolve([]):new v(function(b,h){if("function"!=typeof b||"function"!=typeof h)throw TypeError("Not a function");var S=x.length,w=Array(S),E=0;c(v,x,function(P,I){w[P]=I,++E===S&&b(w)},h)})}),_(m,"race",function(x){var v=this;return"[object Array]"!=t.call(x)?v.reject(TypeError("Not an array")):new v(function(b,h){if("function"!=typeof b||"function"!=typeof h)throw TypeError("Not a function");c(v,x,function(S,w){b(w)},h)})}),m}(),ne.exports?ne.exports=o[k]:void 0===(M=function(){return o[k]}.call(F,e,F,ne))||(ne.exports=M)},48816:function(ne){var F=Math.PI,e=_(120);function M(p,l,t,i){return["C",p,l,t,i,t,i]}function k(p,l,t,i,r,n){return["C",p/3+.6666666666666666*t,l/3+.6666666666666666*i,r/3+.6666666666666666*t,n/3+.6666666666666666*i,r,n]}function o(p,l,t,i,r,n,a,s,u,f){if(f)S=f[0],w=f[1],b=f[2],h=f[3];else{var c=T(p,l,-r);l=c.y;var y=((p=c.x)-(s=(c=T(s,u,-r)).x))/2,d=(l-(u=c.y))/2,m=y*y/(t*t)+d*d/(i*i);m>1&&(t*=m=Math.sqrt(m),i*=m);var g=t*t,x=i*i,v=(n==a?-1:1)*Math.sqrt(Math.abs((g*x-g*d*d-x*y*y)/(g*d*d+x*y*y)));v==1/0&&(v=1);var b=v*t*d/i+(p+s)/2,h=v*-i*y/t+(l+u)/2,S=Math.asin(((l-h)/i).toFixed(9)),w=Math.asin(((u-h)/i).toFixed(9));(S=p<b?F-S:S)<0&&(S=2*F+S),(w=s<b?F-w:w)<0&&(w=2*F+w),a&&S>w&&(S-=2*F),!a&&w>S&&(w-=2*F)}if(Math.abs(w-S)>e){var E=w,P=s,I=u;w=S+e*(a&&w>S?1:-1);var O=o(s=b+t*Math.cos(w),u=h+i*Math.sin(w),t,i,r,0,a,P,I,[w,E,b,h])}var z=Math.tan((w-S)/4),U=4/3*t*z,R=4/3*i*z,j=[2*p-(p+U*Math.sin(S)),2*l-(l-R*Math.cos(S)),s+U*Math.sin(w),u-R*Math.cos(w),s,u];if(f)return j;O&&(j=j.concat(O));for(var Y=0;Y<j.length;){var B=T(j[Y],j[Y+1],r);j[Y++]=B.x,j[Y++]=B.y}return j}function T(p,l,t){return{x:p*Math.cos(t)-l*Math.sin(t),y:p*Math.sin(t)+l*Math.cos(t)}}function _(p){return p*(F/180)}ne.exports=function(p){for(var l,t=[],i=0,r=0,n=0,a=0,s=null,u=null,f=0,c=0,y=0,d=p.length;y<d;y++){var m=p[y],g=m[0];switch(g){case"M":n=m[1],a=m[2];break;case"A":(m=o(f,c,m[1],m[2],_(m[3]),m[4],m[5],m[6],m[7])).unshift("C"),m.length>7&&(t.push(m.splice(0,7)),m.unshift("C"));break;case"S":var x=f,v=c;"C"!=l&&"S"!=l||(x+=x-i,v+=v-r),m=["C",x,v,m[1],m[2],m[3],m[4]];break;case"T":"Q"==l||"T"==l?(s=2*f-s,u=2*c-u):(s=f,u=c),m=k(f,c,s,u,m[1],m[2]);break;case"Q":s=m[1],u=m[2],m=k(f,c,m[1],m[2],m[3],m[4]);break;case"L":m=M(f,c,m[1],m[2]);break;case"H":m=M(f,c,m[1],c);break;case"V":m=M(f,c,f,m[1]);break;case"Z":m=M(f,c,n,a)}l=g,f=m[m.length-2],c=m[m.length-1],m.length>4?(i=m[m.length-4],r=m[m.length-3]):(i=f,r=c),t.push(m)}return t}},50896:function(ne){"use strict";var F=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;ne.exports=function(){try{if(!Object.assign)return!1;var k=new String("abc");if(k[5]="de","5"===Object.getOwnPropertyNames(k)[0])return!1;for(var o={},T=0;T<10;T++)o["_"+String.fromCharCode(T)]=T;if("0123456789"!==Object.getOwnPropertyNames(o).map(function(p){return o[p]}).join(""))return!1;var _={};return"abcdefghijklmnopqrst".split("").forEach(function(p){_[p]=p}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},_)).join("")}catch{return!1}}()?Object.assign:function(k,o){for(var T,_,p=function(r){if(null==r)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}(k),l=1;l<arguments.length;l++){for(var t in T=Object(arguments[l]))e.call(T,t)&&(p[t]=T[t]);if(F){_=F(T);for(var i=0;i<_.length;i++)M.call(T,_[i])&&(p[_[i]]=T[_[i]])}}return p}},76835:function(ne){"use strict";var F=function(e){return e!=e};ne.exports=function(e,M){return 0===e&&0===M?1/e==1/M:e===M||!(!F(e)||!F(M))}},39896:function(ne,F,e){"use strict";var M=e(81288),k=e(57916),o=e(76835),T=e(66148),_=e(16408),p=k(T(),Object);M(p,{getPolyfill:T,implementation:o,shim:_}),ne.exports=p},66148:function(ne,F,e){"use strict";var M=e(76835);ne.exports=function(){return"function"==typeof Object.is?Object.is:M}},16408:function(ne,F,e){"use strict";var M=e(66148),k=e(81288);ne.exports=function(){var o=M();return k(Object,{is:o},{is:function(){return Object.is!==o}}),o}},32764:function(ne,F,e){"use strict";var M;if(!Object.keys){var k=Object.prototype.hasOwnProperty,o=Object.prototype.toString,T=e(97344),_=Object.prototype.propertyIsEnumerable,p=!_.call({toString:null},"toString"),l=_.call(function(){},"prototype"),t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=function(a){var s=a.constructor;return s&&s.prototype===a},r={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},n=function(){if(typeof window>"u")return!1;for(var a in window)try{if(!r["$"+a]&&k.call(window,a)&&null!==window[a]&&"object"==typeof window[a])try{i(window[a])}catch{return!0}}catch{return!0}return!1}();M=function(a){var s=null!==a&&"object"==typeof a,u="[object Function]"===o.call(a),f=T(a),c=s&&"[object String]"===o.call(a),y=[];if(!s&&!u&&!f)throw new TypeError("Object.keys called on a non-object");var d=l&&u;if(c&&a.length>0&&!k.call(a,0))for(var m=0;m<a.length;++m)y.push(String(m));if(f&&a.length>0)for(var g=0;g<a.length;++g)y.push(String(g));else for(var x in a)d&&"prototype"===x||!k.call(a,x)||y.push(String(x));if(p)for(var v=function(h){if(typeof window>"u"||!n)return i(h);try{return i(h)}catch{return!1}}(a),b=0;b<t.length;++b)v&&"constructor"===t[b]||!k.call(a,t[b])||y.push(t[b]);return y}}ne.exports=M},41820:function(ne,F,e){"use strict";var M=Array.prototype.slice,k=e(97344),o=Object.keys,T=o?function(p){return o(p)}:e(32764),_=Object.keys;T.shim=function(){if(Object.keys){var p=function(){var l=Object.keys(arguments);return l&&l.length===arguments.length}(1,2);p||(Object.keys=function(l){return k(l)?_(M.call(l)):_(l)})}else Object.keys=T;return Object.keys||T},ne.exports=T},97344:function(ne){"use strict";var F=Object.prototype.toString;ne.exports=function(e){var M=F.call(e),k="[object Arguments]"===M;return k||(k="[object Array]"!==M&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===F.call(e.callee)),k}},32868:function(ne){"use strict";function F(k,o){if("string"!=typeof k)return[k];var T=[k];"string"==typeof o||Array.isArray(o)?o={brackets:o}:o||(o={});var _=o.brackets?Array.isArray(o.brackets)?o.brackets:[o.brackets]:["{}","[]","()"],p=o.escape||"___",l=!!o.flat;_.forEach(function(i){var r=new RegExp(["\\",i[0],"[^\\",i[0],"\\",i[1],"]*\\",i[1]].join("")),n=[];function a(s,u,f){var c=T.push(s.slice(i[0].length,-i[1].length))-1;return n.push(c),p+c+p}T.forEach(function(s,u){for(var f,c=0;s!=f;)if(f=s,s=s.replace(r,a),c++>1e4)throw Error("References have circular dependency. Please, check them.");T[u]=s}),n=n.reverse(),T=T.map(function(s){return n.forEach(function(u){s=s.replace(new RegExp("(\\"+p+u+"\\"+p+")","g"),i[0]+"$1"+i[1])}),s})});var t=new RegExp("\\"+p+"([0-9]+)\\"+p);return l?T:function i(r,n,a){for(var s,u=[],f=0;s=t.exec(r);){if(f++>1e4)throw Error("Circular references in parenthesis");u.push(r.slice(0,s.index)),u.push(i(n[s[1]],n)),r=r.slice(s.index+s[0].length)}return u.push(r),u}(T[0],T)}function e(k,o){if(o&&o.flat){var T,_=o&&o.escape||"___",p=k[0];if(!p)return"";for(var l=new RegExp("\\"+_+"([0-9]+)\\"+_),t=0;p!=T;){if(t++>1e4)throw Error("Circular references in "+k);T=p,p=p.replace(l,i)}return p}return k.reduce(function r(n,a){return Array.isArray(a)&&(a=a.reduce(r,"")),n+a},"");function i(r,n){if(null==k[n])throw Error("Reference "+n+"is undefined");return k[n]}}function M(k,o){return Array.isArray(k)?e(k,o):F(k,o)}M.parse=F,M.stringify=e,ne.exports=M},51160:function(ne,F,e){"use strict";var M=e(55616);ne.exports=function(k){var o;return arguments.length>1&&(k=arguments),"string"==typeof k?k=k.split(/\s/).map(parseFloat):"number"==typeof k&&(k=[k]),k.length&&"number"==typeof k[0]?o=1===k.length?{width:k[0],height:k[0],x:0,y:0}:2===k.length?{width:k[0],height:k[1],x:0,y:0}:{x:k[0],y:k[1],width:k[2]-k[0]||0,height:k[3]-k[1]||0}:k&&((o={x:(k=M(k,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:k.top||0}).width=null==k.width?k.right?k.right-o.x:0:k.width,o.height=null==k.height?k.bottom?k.bottom-o.y:0:k.height),o}},21984:function(ne){ne.exports=function(k){var o=[];return k.replace(e,function(T,_,p){var i,l=_.toLowerCase();for(i=void 0,p=(i=p.match(M))?i.map(Number):[],"m"==l&&p.length>2&&(o.push([_].concat(p.splice(0,2))),l="l",_="m"==_?"l":"L");;){if(p.length==F[l])return p.unshift(_),o.push(p);if(p.length<F[l])throw new Error("malformed path data");o.push([_].concat(p.splice(0,F[l])))}}),o};var F={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/gi,M=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},65819:function(ne){ne.exports=function(F,e){e||(e=[0,""]),F=String(F);var M=parseFloat(F,10);return e[0]=M,e[1]=F.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},41984:function(ne,F,e){var M=e(4168);(function(){var k,o,T,_,p,l;typeof performance<"u"&&null!==performance&&performance.now?ne.exports=function(){return performance.now()}:null!=M&&M.hrtime?(ne.exports=function(){return(k()-p)/1e6},o=M.hrtime,_=(k=function(){var t;return 1e9*(t=o())[0]+t[1]})(),l=1e9*M.uptime(),p=_-l):Date.now?(ne.exports=function(){return Date.now()-T},T=Date.now()):(ne.exports=function(){return(new Date).getTime()-T},T=(new Date).getTime())}).call(this)},55616:function(ne){"use strict";ne.exports=function(M,k,o){var T,_,p={};if("string"==typeof k&&(k=e(k)),Array.isArray(k)){var l={};for(_=0;_<k.length;_++)l[k[_]]=!0;k=l}for(T in k)k[T]=e(k[T]);var t={};for(T in k){var i=k[T];if(Array.isArray(i))for(_=0;_<i.length;_++){var r=i[_];if(o&&(t[r]=!0),r in M){if(p[T]=M[r],o)for(var n=_;n<i.length;n++)t[i[n]]=!0;break}}else T in M&&(k[T]&&(p[T]=M[T]),o&&(t[T]=!0))}if(o)for(T in M)t[T]||(p[T]=M[T]);return p};var F={};function e(M){return F[M]?F[M]:("string"==typeof M&&(M=F[M]=M.split(/\s*,\s*|\s+/)),M)}},61456:function(ne){ne.exports=function(F,e,M,k){var o=F[0],T=F[1],_=!1;void 0===M&&(M=0),void 0===k&&(k=e.length);for(var p=k-M,l=0,t=p-1;l<p;t=l++){var i=e[l+M][0],r=e[l+M][1],a=e[t+M][1];r>T!=a>T&&o<(e[t+M][0]-i)*(T-r)/(a-r)+i&&(_=!_)}return _}},14756:function(ne,F,e){var M,k=e(7688),o=e(28648),T=e(72200),_=e(11403),p=e(82368),l=e(17792),t=!1,i=o();function r(n,a,s){var u=M.segments(n),f=M.segments(a),c=s(M.combine(u,f));return M.polygon(c)}M={buildLog:function(n){return!0===n?t=k():!1===n&&(t=!1),!1!==t&&t.list},epsilon:function(n){return i.epsilon(n)},segments:function(n){var a=T(!0,i,t);return n.regions.forEach(a.addRegion),{segments:a.calculate(n.inverted),inverted:n.inverted}},combine:function(n,a){return{combined:T(!1,i,t).calculate(n.segments,n.inverted,a.segments,a.inverted),inverted1:n.inverted,inverted2:a.inverted}},selectUnion:function(n){return{segments:p.union(n.combined,t),inverted:n.inverted1||n.inverted2}},selectIntersect:function(n){return{segments:p.intersect(n.combined,t),inverted:n.inverted1&&n.inverted2}},selectDifference:function(n){return{segments:p.difference(n.combined,t),inverted:n.inverted1&&!n.inverted2}},selectDifferenceRev:function(n){return{segments:p.differenceRev(n.combined,t),inverted:!n.inverted1&&n.inverted2}},selectXor:function(n){return{segments:p.xor(n.combined,t),inverted:n.inverted1!==n.inverted2}},polygon:function(n){return{regions:_(n.segments,i,t),inverted:n.inverted}},polygonFromGeoJSON:function(n){return l.toPolygon(M,n)},polygonToGeoJSON:function(n){return l.fromPolygon(M,i,n)},union:function(n,a){return r(n,a,M.selectUnion)},intersect:function(n,a){return r(n,a,M.selectIntersect)},difference:function(n,a){return r(n,a,M.selectDifference)},differenceRev:function(n,a){return r(n,a,M.selectDifferenceRev)},xor:function(n,a){return r(n,a,M.selectXor)}},"object"==typeof window&&(window.PolyBool=M),ne.exports=M},7688:function(ne){ne.exports=function(){var F,e=0,M=!1;function k(o,T){return F.list.push({type:o,data:T?JSON.parse(JSON.stringify(T)):void 0}),F}return F={list:[],segmentId:function(){return e++},checkIntersection:function(o,T){return k("check",{seg1:o,seg2:T})},segmentChop:function(o,T){return k("div_seg",{seg:o,pt:T}),k("chop",{seg:o,pt:T})},statusRemove:function(o){return k("pop_seg",{seg:o})},segmentUpdate:function(o){return k("seg_update",{seg:o})},segmentNew:function(o,T){return k("new_seg",{seg:o,primary:T})},segmentRemove:function(o){return k("rem_seg",{seg:o})},tempStatus:function(o,T,_){return k("temp_status",{seg:o,above:T,below:_})},rewind:function(o){return k("rewind",{seg:o})},status:function(o,T,_){return k("status",{seg:o,above:T,below:_})},vert:function(o){return o===M?F:(M=o,k("vert",{x:o}))},log:function(o){return"string"!=typeof o&&(o=JSON.stringify(o,!1,"  ")),k("log",{txt:o})},reset:function(){return k("reset")},selected:function(o){return k("selected",{segs:o})},chainStart:function(o){return k("chain_start",{seg:o})},chainRemoveHead:function(o,T){return k("chain_rem_head",{index:o,pt:T})},chainRemoveTail:function(o,T){return k("chain_rem_tail",{index:o,pt:T})},chainNew:function(o,T){return k("chain_new",{pt1:o,pt2:T})},chainMatch:function(o){return k("chain_match",{index:o})},chainClose:function(o){return k("chain_close",{index:o})},chainAddHead:function(o,T){return k("chain_add_head",{index:o,pt:T})},chainAddTail:function(o,T){return k("chain_add_tail",{index:o,pt:T})},chainConnect:function(o,T){return k("chain_con",{index1:o,index2:T})},chainReverse:function(o){return k("chain_rev",{index:o})},chainJoin:function(o,T){return k("chain_join",{index1:o,index2:T})},done:function(){return k("done")}}}},28648:function(ne){ne.exports=function(F){"number"!=typeof F&&(F=1e-10);var e={epsilon:function(M){return"number"==typeof M&&(F=M),F},pointAboveOrOnLine:function(M,k,o){var T=k[0],_=k[1];return(o[0]-T)*(M[1]-_)-(o[1]-_)*(M[0]-T)>=-F},pointBetween:function(M,k,o){var _=o[0]-k[0],l=o[1]-k[1],t=(M[0]-k[0])*_+(M[1]-k[1])*l;return!(t<F||t-(_*_+l*l)>-F)},pointsSameX:function(M,k){return Math.abs(M[0]-k[0])<F},pointsSameY:function(M,k){return Math.abs(M[1]-k[1])<F},pointsSame:function(M,k){return e.pointsSameX(M,k)&&e.pointsSameY(M,k)},pointsCompare:function(M,k){return e.pointsSameX(M,k)?e.pointsSameY(M,k)?0:M[1]<k[1]?-1:1:M[0]<k[0]?-1:1},pointsCollinear:function(M,k,o){return Math.abs((M[0]-k[0])*(k[1]-o[1])-(k[0]-o[0])*(M[1]-k[1]))<F},linesIntersect:function(M,k,o,T){var _=k[0]-M[0],p=k[1]-M[1],l=T[0]-o[0],t=T[1]-o[1],i=_*t-p*l;if(Math.abs(i)<F)return!1;var r=M[0]-o[0],n=M[1]-o[1],a=(l*n-t*r)/i,s=(_*n-p*r)/i,u={alongA:0,alongB:0,pt:[M[0]+a*_,M[1]+a*p]};return u.alongA=a<=-F?-2:a<F?-1:a-1<=-F?0:a-1<F?1:2,u.alongB=s<=-F?-2:s<F?-1:s-1<=-F?0:s-1<F?1:2,u},pointInsideRegion:function(M,k){for(var o=M[0],T=M[1],_=k[k.length-1][0],p=k[k.length-1][1],l=!1,t=0;t<k.length;t++){var i=k[t][0],r=k[t][1];r-T>F!=p-T>F&&(_-i)*(T-r)/(p-r)+i-o>F&&(l=!l),_=i,p=r}return l}};return e}},17792:function(ne){ne.exports={toPolygon:function(e,M){function k(_){if(_.length<=0)return e.segments({inverted:!1,regions:[]});function p(i){var r=i.slice(0,i.length-1);return e.segments({inverted:!1,regions:[r]})}for(var l=p(_[0]),t=1;t<_.length;t++)l=e.selectDifference(e.combine(l,p(_[t])));return l}if("Polygon"===M.type)return e.polygon(k(M.coordinates));if("MultiPolygon"===M.type){for(var o=e.segments({inverted:!1,regions:[]}),T=0;T<M.coordinates.length;T++)o=e.selectUnion(e.combine(o,k(M.coordinates[T])));return e.polygon(o)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,M,k){function o(s,u){return M.pointInsideRegion([.5*(s[0][0]+s[1][0]),.5*(s[0][1]+s[1][1])],u)}function T(s){return{region:s,children:[]}}k=e.polygon(e.segments(k));var _=T(null);function p(s,u){for(var f=0;f<s.children.length;f++)if(o(u,(y=s.children[f]).region))return void p(y,u);var c=T(u);for(f=0;f<s.children.length;f++){var y;o((y=s.children[f]).region,u)&&(c.children.push(y),s.children.splice(f,1),f--)}s.children.push(c)}for(var l=0;l<k.regions.length;l++){var t=k.regions[l];t.length<3||p(_,t)}function i(s,u){for(var f=0,c=s[s.length-1][0],y=s[s.length-1][1],d=[],m=0;m<s.length;m++){var g=s[m][0],x=s[m][1];d.push([g,x]),f+=x*c-g*y,c=g,y=x}return f<0!==u&&d.reverse(),d.push([d[0][0],d[0][1]]),d}var r=[];function n(s){var u=[i(s.region,!1)];r.push(u);for(var f=0;f<s.children.length;f++)u.push(a(s.children[f]))}function a(s){for(var u=0;u<s.children.length;u++)n(s.children[u]);return i(s.region,!0)}for(l=0;l<_.children.length;l++)n(_.children[l]);return r.length<=0?{type:"Polygon",coordinates:[]}:1==r.length?{type:"Polygon",coordinates:r[0]}:{type:"MultiPolygon",coordinates:r}}}},72200:function(ne,F,e){var M=e(48088);ne.exports=function(k,o,T){function _(n,a,s){return{id:T?T.segmentId():-1,start:n,end:a,myFill:{above:s.myFill.above,below:s.myFill.below},otherFill:null}}var p=M.create();function l(n,a){p.insertBefore(n,function(s){return u=n.isStart,c=a,y=s.isStart,m=s.other.pt,(0!==(g=o.pointsCompare(n.pt,d=s.pt))?g:o.pointsSame(c,m)?0:u!==y?u?1:-1:o.pointAboveOrOnLine(c,y?d:m,y?m:d)?1:-1)<0;var u,c,y,d,m,g})}function t(n,a){var u,c,s=(l(c=M.node({isStart:!0,pt:(u=n).start,seg:u,primary:a,other:null,status:null}),u.end),c);return function(u,f,c){var y=M.node({isStart:!1,pt:f.end,seg:f,primary:c,other:u,status:null});u.other=y,l(y,u.pt)}(s,n,a),s}function i(n,a){var u,f,s=_(a,n.seg.end,n.seg);return u=n,f=a,T&&T.segmentChop(u.seg,f),u.other.remove(),u.seg.end=f,u.other.pt=f,l(u.other,u.pt),t(s,n.primary)}function r(n,a){var s=M.create();function u(E){return s.findTransition(function(P){var I,O,z,U,R,j;return U=(I=E).seg.end,(o.pointsCollinear(z=I.seg.start,R=(O=P.ev).seg.start,j=O.seg.end)?o.pointsCollinear(U,R,j)||o.pointAboveOrOnLine(U,R,j)?1:-1:o.pointAboveOrOnLine(z,R,j)?1:-1)>0})}function f(E,P){var I=E.seg,O=P.seg,z=I.start,U=I.end,R=O.start,j=O.end;T&&T.checkIntersection(I,O);var Y=o.linesIntersect(z,U,R,j);if(!1===Y){if(!o.pointsCollinear(z,U,R)||o.pointsSame(z,j)||o.pointsSame(U,R))return!1;var B=o.pointsSame(z,R),V=o.pointsSame(U,j);if(B&&V)return P;var q=!B&&o.pointBetween(z,R,j),ie=!V&&o.pointBetween(U,R,j);if(B)return ie?i(P,U):i(E,j),P;q&&(V||(ie?i(P,U):i(E,j)),i(P,z))}else 0===Y.alongA&&(-1===Y.alongB?i(E,R):0===Y.alongB?i(E,Y.pt):1===Y.alongB&&i(E,j)),0===Y.alongB&&(-1===Y.alongA?i(P,z):0===Y.alongA?i(P,Y.pt):1===Y.alongA&&i(P,U));return!1}for(var c=[];!p.isEmpty();){var y=p.getHead();if(T&&T.vert(y.pt[0]),y.isStart){let E=function(){if(m){var P=f(y,m);if(P)return P}return!!g&&f(y,g)};T&&T.segmentNew(y.seg,y.primary);var d=u(y),m=d.before?d.before.ev:null,g=d.after?d.after.ev:null;T&&T.tempStatus(y.seg,!!m&&m.seg,!!g&&g.seg);var x,v,b=E();if(b&&(k?(v=null===y.seg.myFill.below||y.seg.myFill.above!==y.seg.myFill.below)&&(b.seg.myFill.above=!b.seg.myFill.above):b.seg.otherFill=y.seg.myFill,T&&T.segmentUpdate(b.seg),y.other.remove(),y.remove()),p.getHead()!==y){T&&T.rewind(y.seg);continue}k?(v=null===y.seg.myFill.below||y.seg.myFill.above!==y.seg.myFill.below,y.seg.myFill.below=g?g.seg.myFill.above:n,y.seg.myFill.above=v?!y.seg.myFill.below:y.seg.myFill.below):null===y.seg.otherFill&&(y.seg.otherFill={above:x=g?y.primary===g.primary?g.seg.otherFill.above:g.seg.myFill.above:y.primary?a:n,below:x}),T&&T.status(y.seg,!!m&&m.seg,!!g&&g.seg),y.other.status=d.insert(M.node({ev:y}))}else{var h=y.status;if(null===h)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(s.exists(h.prev)&&s.exists(h.next)&&f(h.prev.ev,h.next.ev),T&&T.statusRemove(h.ev.seg),h.remove(),!y.primary){var S=y.seg.myFill;y.seg.myFill=y.seg.otherFill,y.seg.otherFill=S}c.push(y.seg)}p.getHead().remove()}return T&&T.done(),c}return k?{addRegion:function(n){for(var a,s,u,f=n[n.length-1],c=0;c<n.length;c++){var y=o.pointsCompare(a=f,f=n[c]);0!==y&&t((s=y<0?a:f,u=y<0?f:a,{id:T?T.segmentId():-1,start:s,end:u,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(n){return r(n,!1)}}:{calculate:function(n,a,s,u){return n.forEach(function(f){t(_(f.start,f.end,f),!0)}),s.forEach(function(f){t(_(f.start,f.end,f),!1)}),r(a,u)}}}},48088:function(ne){ne.exports={create:function(){var F={root:{root:!0,next:null},exists:function(e){return null!==e&&e!==F.root},isEmpty:function(){return null===F.root.next},getHead:function(){return F.root.next},insertBefore:function(e,M){for(var k=F.root,o=F.root.next;null!==o;){if(M(o))return e.prev=o.prev,e.next=o,o.prev.next=e,void(o.prev=e);k=o,o=o.next}k.next=e,e.prev=k,e.next=null},findTransition:function(e){for(var M=F.root,k=F.root.next;null!==k&&!e(k);)M=k,k=k.next;return{before:M===F.root?null:M,after:k,insert:function(o){return o.prev=M,o.next=k,M.next=o,null!==k&&(k.prev=o),o}}}};return F},node:function(F){return F.prev=null,F.next=null,F.remove=function(){F.prev.next=F.next,F.next&&(F.next.prev=F.prev),F.prev=null,F.next=null},F}}},11403:function(ne){ne.exports=function(F,e,M){var k=[],o=[];return F.forEach(function(T){var _=T.start,p=T.end;if(e.pointsSame(_,p))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{M&&M.chainStart(T);for(var l={index:0,matches_head:!1,matches_pt1:!1},t={index:0,matches_head:!1,matches_pt1:!1},i=l,r=0;r<k.length;r++){var n=(c=k[r])[0],a=c[c.length-1];if(e.pointsSame(n,_)){if(h(r,!0,!0))break}else if(e.pointsSame(n,p)){if(h(r,!0,!1))break}else if(e.pointsSame(a,_)){if(h(r,!1,!0))break}else if(e.pointsSame(a,p)&&h(r,!1,!1))break}if(i===l)return k.push([_,p]),void(M&&M.chainNew(_,p));if(i===t){M&&M.chainMatch(l.index);var s=l.index,u=l.matches_pt1?p:_,f=l.matches_head,c=k[s],y=f?c[0]:c[c.length-1],d=f?c[1]:c[c.length-2],m=f?c[c.length-1]:c[0],g=f?c[c.length-2]:c[1];return e.pointsCollinear(d,y,u)&&(f?(M&&M.chainRemoveHead(l.index,u),c.shift()):(M&&M.chainRemoveTail(l.index,u),c.pop()),y=d),e.pointsSame(m,u)?(k.splice(s,1),e.pointsCollinear(g,m,y)&&(f?(M&&M.chainRemoveTail(l.index,y),c.pop()):(M&&M.chainRemoveHead(l.index,y),c.shift())),M&&M.chainClose(l.index),void o.push(c)):void(f?(M&&M.chainAddHead(l.index,u),c.unshift(u)):(M&&M.chainAddTail(l.index,u),c.push(u)))}var x=l.index,v=t.index;M&&M.chainConnect(x,v);var b=k[x].length<k[v].length;l.matches_head?t.matches_head?b?(S(x),w(x,v)):(S(v),w(v,x)):w(v,x):t.matches_head?w(x,v):b?(S(x),w(v,x)):(S(v),w(x,v))}function h(E,P,I){return i.index=E,i.matches_head=P,i.matches_pt1=I,i===l?(i=t,!1):(i=null,!0)}function S(E){M&&M.chainReverse(E),k[E].reverse()}function w(E,P){var I=k[E],O=k[P],z=I[I.length-1],U=I[I.length-2],R=O[0],j=O[1];e.pointsCollinear(U,z,R)&&(M&&M.chainRemoveTail(E,z),I.pop(),z=U),e.pointsCollinear(z,R,j)&&(M&&M.chainRemoveHead(P,R),O.shift()),M&&M.chainJoin(E,P),k[E]=I.concat(O),k.splice(P,1)}}),o}},82368:function(ne){function F(M,k,o){var T=[];return M.forEach(function(_){var p=(_.myFill.above?8:0)+(_.myFill.below?4:0)+(_.otherFill&&_.otherFill.above?2:0)+(_.otherFill&&_.otherFill.below?1:0);0!==k[p]&&T.push({id:o?o.segmentId():-1,start:_.start,end:_.end,myFill:{above:1===k[p],below:2===k[p]},otherFill:null})}),o&&o.selected(T),T}ne.exports={union:function(M,k){return F(M,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],k)},intersect:function(M,k){return F(M,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],k)},difference:function(M,k){return F(M,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],k)},differenceRev:function(M,k){return F(M,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],k)},xor:function(M,k){return F(M,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],k)}}},9696:function(ne,F,e){"use strict";var M=e(29936).Transform,k=e(55619);function o(){M.call(this,{readableObjectMode:!0})}function T(_,p,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name=this.constructor.name,this.message=_,p&&(this.code=p),l&&(this.statusCode=l)}(o.prototype=Object.create(M.prototype)).constructor=o,k(o.prototype),F.gS=function(_,p,l){for(var t=p,i=0;i<l.length;)if(_[t++]!==l[i++])return!1;return!0},F.wR=function(_,p){var l=[],t=0;if(p&&"hex"===p)for(;t<_.length;)l.push(parseInt(_.slice(t,t+2),16)),t+=2;else for(;t<_.length;t++)l.push(255&_.charCodeAt(t));return l},F.Bz=function(_,p){return _[p]|_[p+1]<<8},F.eW=function(_,p){return _[p+1]|_[p]<<8},F.st=function(_,p){return _[p]|_[p+1]<<8|_[p+2]<<16|16777216*_[p+3]},F.eI=function(_,p){return _[p+3]|_[p+2]<<8|_[p+1]<<16|16777216*_[p]},(T.prototype=Object.create(Error.prototype)).constructor=T},11688:function(ne){"use strict";function F(k,o){var T=new Error(k);return T.code=o,T}function e(k){try{return decodeURIComponent(escape(k))}catch{return k}}function M(k,o,T){this.input=k.subarray(o,T),this.start=o;var _=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\0"!==_&&"MM\0*"!==_)throw F("invalid TIFF signature","EBADDATA");this.big_endian="M"===_[0]}M.prototype.each=function(k){this.aborted=!1;var o=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:o}];this.ifds_to_read.length>0&&!this.aborted;){var T=this.ifds_to_read.shift();T.offset&&this.scan_ifd(T.id,T.offset,k)}},M.prototype.read_uint16=function(k){var o=this.input;if(k+2>o.length)throw F("unexpected EOF","EBADDATA");return this.big_endian?256*o[k]+o[k+1]:o[k]+256*o[k+1]},M.prototype.read_uint32=function(k){var o=this.input;if(k+4>o.length)throw F("unexpected EOF","EBADDATA");return this.big_endian?16777216*o[k]+65536*o[k+1]+256*o[k+2]+o[k+3]:o[k]+256*o[k+1]+65536*o[k+2]+16777216*o[k+3]},M.prototype.is_subifd_link=function(k,o){return 0===k&&34665===o||0===k&&34853===o||34665===k&&40965===o},M.prototype.exif_format_length=function(k){switch(k){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},M.prototype.exif_format_read=function(k,o){var T;switch(k){case 1:case 2:return this.input[o];case 6:return(T=this.input[o])|33554430*(128&T);case 3:return this.read_uint16(o);case 8:return(T=this.read_uint16(o))|131070*(32768&T);case 4:return this.read_uint32(o);case 9:return 0|this.read_uint32(o);default:return null}},M.prototype.scan_ifd=function(k,o,T){var _=this.read_uint16(o);o+=2;for(var p=0;p<_;p++){var l=this.read_uint16(o),t=this.read_uint16(o+2),i=this.read_uint32(o+4),r=this.exif_format_length(t),n=i*r,a=n<=4?o+8:this.read_uint32(o+8),s=!1;if(a+n>this.input.length)throw F("unexpected EOF","EBADDATA");for(var u=[],f=a,c=0;c<i;c++,f+=r){var y=this.exif_format_read(t,f);if(null===y){u=null;break}u.push(y)}if(Array.isArray(u)&&2===t&&(u=e(String.fromCharCode.apply(null,u)))&&"\0"===u[u.length-1]&&(u=u.slice(0,-1)),this.is_subifd_link(k,l)&&Array.isArray(u)&&Number.isInteger(u[0])&&u[0]>0&&(this.ifds_to_read.push({id:l,offset:u[0]}),s=!0),!1===T({is_big_endian:this.big_endian,ifd:k,tag:l,format:t,count:i,entry_offset:o+this.start,data_length:n,data_offset:a+this.start,value:u,is_subifd_link:s}))return void(this.aborted=!0);o+=12}0===k&&this.ifds_to_read.push({id:1,offset:this.read_uint32(o)})},ne.exports.ExifParser=M,ne.exports.get_orientation=function(k){var o=0;try{return new M(k,0,k.length).each(function(T){if(0===T.ifd&&274===T.tag&&Array.isArray(T.value))return o=T.value[0],!1}),o}catch{return-1}}},44600:function(ne,F,e){"use strict";var M=e(9696).eW,k=e(9696).eI;function o(i,r){if(i.length<4+r)return null;var n=k(i,r);return i.length<n+r||n<8?null:{boxtype:String.fromCharCode.apply(null,i.slice(r+4,r+8)),data:i.slice(r+8,r+n),end:r+n}}function T(i,r){for(var n=0;;){var a=o(i,n);if(!a)break;switch(a.boxtype){case"ispe":r.sizes.push({width:k(a.data,4),height:k(a.data,8)});break;case"irot":r.transforms.push({type:"irot",value:3&a.data[0]});break;case"imir":r.transforms.push({type:"imir",value:1&a.data[0]})}n=a.end}}function _(i,r,n){for(var a=0,s=0;s<n;s++)a=256*a+(i[r+s]||0);return a}function p(i,r){for(var n=i[4]>>4&15,a=15&i[4],s=i[5]>>4&15,u=M(i,6),f=8,c=0;c<u;c++){var y=M(i,f),d=M(i,f+=2),m=_(i,f+=2,s),g=M(i,f+=s);if(f+=2,0===d&&1===g){var x=_(i,f,n),v=_(i,f+n,a);r.item_loc[y]={length:v,offset:x+m}}f+=g*(n+a)}}function l(i,r){for(var n=M(i,4),a=6,s=0;s<n;s++){var u=o(i,a);if(!u)break;if("infe"===u.boxtype){for(var f=M(u.data,4),c="",y=8;y<u.data.length&&u.data[y];y++)c+=String.fromCharCode(u.data[y]);r.item_inf[c]=f}a=u.end}}function t(i,r){for(var n=0;;){var a=o(i,n);if(!a)break;"ipco"===a.boxtype&&T(a.data,r),n=a.end}}ne.exports.unbox=o,ne.exports.readSizeFromMeta=function(i){var r={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(y,d){for(var m=4;;){var g=o(y,m);if(!g)break;"iprp"===g.boxtype&&t(g.data,d),"iloc"===g.boxtype&&p(g.data,d),"iinf"===g.boxtype&&l(g.data,d),m=g.end}}(i,r),r.sizes.length){var n,a,s,u=(a=(n=r.sizes).reduce(function(y,d){return y.width>d.width||y.width===d.width&&y.height>d.height?y:d}),s=n.reduce(function(y,d){return y.height>d.height||y.height===d.height&&y.width>d.width?y:d}),a.width>s.height||a.width===s.height&&a.height>s.width?a:s),f=1;r.transforms.forEach(function(y){var d={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},m={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if("imir"===y.type&&(f=0===y.value?m[f]:d[f=d[f=m[f]]]),"irot"===y.type)for(var g=0;g<y.value;g++)f=d[f]});var c=null;return r.item_inf.Exif&&(c=r.item_loc[r.item_inf.Exif]),{width:u.width,height:u.height,orientation:r.transforms.length?f:null,variants:r.sizes,exif_location:c}}},ne.exports.getMimeType=function(i){var r=String.fromCharCode.apply(null,i.slice(0,4)),n={};n[r]=!0;for(var a=8;a<i.length;a+=4)n[String.fromCharCode.apply(null,i.slice(a,a+4))]=!0;if(n.mif1||n.msf1||n.miaf)return"avif"===r||"avis"===r||"avio"===r?{type:"avif",mime:"image/avif"}:"heic"===r||"heix"===r?{type:"heic",mime:"image/heic"}:"hevc"===r||"hevx"===r?{type:"heic",mime:"image/heic-sequence"}:n.avif||n.avis?{type:"avif",mime:"image/avif"}:n.heic||n.heix||n.hevc||n.hevx||n.heis?n.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},40528:function(ne,F,e){"use strict";var M=e(9696).wR,k=e(9696).gS,o=e(9696).eI,T=e(44600),_=e(11688),p=M("ftyp");ne.exports=function(l){if(k(l,4,p)){var t=T.unbox(l,0);if(t){var i=T.getMimeType(t.data);if(i){for(var r,n=t.end;;){var a=T.unbox(l,n);if(!a)break;if(n=a.end,"mdat"===a.boxtype)return;if("meta"===a.boxtype){r=a.data;break}}if(r){var s=T.readSizeFromMeta(r);if(s){var u={width:s.width,height:s.height,type:i.type,mime:i.mime,wUnits:"px",hUnits:"px"};if(s.variants.length>1&&(u.variants=s.variants),s.orientation&&(u.orientation=s.orientation),s.exif_location&&s.exif_location.offset+s.exif_location.length<=l.length){var f=o(l,s.exif_location.offset),c=l.slice(s.exif_location.offset+f+4,s.exif_location.offset+s.exif_location.length),y=_.get_orientation(c);y>0&&(u.orientation=y)}return u}}}}}}},38728:function(ne,F,e){"use strict";var M=e(9696).wR,k=e(9696).gS,o=e(9696).Bz,T=M("BM");ne.exports=function(_){if(!(_.length<26)&&k(_,0,T))return{width:o(_,18),height:o(_,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},5588:function(ne,F,e){"use strict";var M=e(9696).wR,k=e(9696).gS,o=e(9696).Bz,T=M("GIF87a"),_=M("GIF89a");ne.exports=function(p){if(!(p.length<10)&&(k(p,0,T)||k(p,0,_)))return{width:o(p,6),height:o(p,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},41924:function(ne,F,e){"use strict";var M=e(9696).Bz;ne.exports=function(k){var o=M(k,0),T=M(k,2),_=M(k,4);if(0===o&&1===T&&_){for(var p=[],l={width:0,height:0},t=0;t<_;t++){var i=k[6+16*t]||256,r=k[6+16*t+1]||256,n={width:i,height:r};p.push(n),(i>l.width||r>l.height)&&(l=n)}return{width:l.width,height:l.height,variants:p,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},87968:function(ne,F,e){"use strict";var M=e(9696).eW,k=e(9696).wR,o=e(9696).gS,T=e(11688),_=k("Exif\0\0");ne.exports=function(p){if(!(p.length<2)&&255===p[0]&&216===p[1]&&255===p[2])for(var l=2;;){for(;;){if(p.length-l<2)return;if(255===p[l++])break}for(var t,i,r=p[l++];255===r;)r=p[l++];if(208<=r&&r<=217||1===r)t=0;else{if(!(192<=r&&r<=254)||p.length-l<2)return;t=M(p,l)-2,l+=2}if(217===r||218===r)return;if(225===r&&t>=10&&o(p,l,_)&&(i=T.get_orientation(p.slice(l+6,l+t))),t>=5&&192<=r&&r<=207&&196!==r&&200!==r&&204!==r){if(p.length-l<t)return;var n={width:M(p,l+3),height:M(p,l+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return i>0&&(n.orientation=i),n}l+=t}}},37276:function(ne,F,e){"use strict";var M=e(9696).wR,k=e(9696).gS,o=e(9696).eI,T=M("\x89PNG\r\n\x1a\n"),_=M("IHDR");ne.exports=function(p){if(!(p.length<24)&&k(p,0,T)&&k(p,12,_))return{width:o(p,16),height:o(p,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},90328:function(ne,F,e){"use strict";var M=e(9696).wR,k=e(9696).gS,o=e(9696).eI,T=M("8BPS\0\x01");ne.exports=function(_){if(!(_.length<22)&&k(_,0,T))return{width:o(_,18),height:o(_,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},16024:function(ne){"use strict";function F(l){return"number"==typeof l&&isFinite(l)&&l>0}var e=/<[-_.:a-zA-Z0-9][^>]*>/,M=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,k=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,o=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,T=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,_=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function p(l){return _.test(l)?l.match(_)[0]:"px"}ne.exports=function(l){if(function(m){var g,x=0,v=m.length;for(239===m[0]&&187===m[1]&&191===m[2]&&(x=3);x<v&&(32===(g=m[x])||9===g||13===g||10===g);)x++;return x!==v&&60===m[x]}(l)){for(var t="",i=0;i<l.length;i++)t+=String.fromCharCode(l[i]);var r=(t.match(e)||[""])[0];if(M.test(r)){var n=(g=(m=r).match(k),x=m.match(o),v=m.match(T),{width:g&&(g[1]||g[2]),height:x&&(x[1]||x[2]),viewbox:v&&(v[1]||v[2])}),a=parseFloat(n.width),s=parseFloat(n.height);if(n.width&&n.height)return F(a)&&F(s)?{width:a,height:s,type:"svg",mime:"image/svg+xml",wUnits:p(n.width),hUnits:p(n.height)}:void 0;var u=(n.viewbox||"").split(" "),f={width:u[2],height:u[3]},c=parseFloat(f.width),y=parseFloat(f.height);if(F(c)&&F(y)&&p(f.width)===p(f.height)){var d=c/y;return n.width?F(a)?{width:a,height:a/d,type:"svg",mime:"image/svg+xml",wUnits:p(n.width),hUnits:p(n.width)}:void 0:n.height?F(s)?{width:s*d,height:s,type:"svg",mime:"image/svg+xml",wUnits:p(n.height),hUnits:p(n.height)}:void 0:{width:c,height:y,type:"svg",mime:"image/svg+xml",wUnits:p(f.width),hUnits:p(f.height)}}}}var m,g,x,v}},98792:function(ne,F,e){"use strict";var M=e(9696).wR,k=e(9696).gS,o=e(9696).Bz,T=e(9696).eW,_=e(9696).st,p=e(9696).eI,l=M("II*\0"),t=M("MM\0*");function i(a,s,u){return u?T(a,s):o(a,s)}function r(a,s,u){return u?p(a,s):_(a,s)}function n(a,s,u){var f=i(a,s+2,u);return 1!==r(a,s+4,u)||3!==f&&4!==f?null:3===f?i(a,s+8,u):r(a,s+8,u)}ne.exports=function(a){if(!(a.length<8)&&(k(a,0,l)||k(a,0,t))){var s=77===a[0],u=r(a,4,s)-8;if(!(u<0)){var f=u+8;if(!(a.length-f<2)){var c=12*i(a,f+0,s);if(!(c<=0||(f+=2,a.length-f<c))){var y,d,m,g;for(y=0;y<c;y+=12)256===(g=i(a,f+y,s))?d=n(a,f+y,s):257===g&&(m=n(a,f+y,s));return d&&m?{width:d,height:m,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},20704:function(ne,F,e){"use strict";var M=e(9696).wR,k=e(9696).gS,o=e(9696).Bz,T=e(9696).st,_=e(11688),p=M("RIFF"),l=M("WEBP");function t(n,a){if(157===n[a+3]&&1===n[a+4]&&42===n[a+5])return{width:16383&o(n,a+6),height:16383&o(n,a+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function i(n,a){if(47===n[a]){var s=T(n,a+1);return{width:1+(16383&s),height:1+(s>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function r(n,a){return{width:1+(n[a+6]<<16|n[a+5]<<8|n[a+4]),height:1+(n[a+9]<<a|n[a+8]<<8|n[a+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}ne.exports=function(n){if(!(n.length<16)&&(k(n,0,p)||k(n,8,l))){var a=12,s=null,u=0,f=T(n,4)+8;if(!(f>n.length)){for(;a+8<f;)if(0!==n[a]){var c=String.fromCharCode.apply(null,n.slice(a,a+4)),y=T(n,a+4);"VP8 "===c&&y>=10?s=s||t(n,a+8):"VP8L"===c&&y>=9?s=s||i(n,a+8):"VP8X"===c&&y>=10?s=s||r(n,a+8):"EXIF"===c&&(u=_.get_orientation(n.slice(a+8,a+8+y)),a=1/0),a+=8+y}else a++;if(s)return u>0&&(s.orientation=u),s}}}},87480:function(ne,F,e){"use strict";ne.exports={avif:e(40528),bmp:e(38728),gif:e(5588),ico:e(41924),jpeg:e(87968),png:e(37276),psd:e(90328),svg:e(16024),tiff:e(98792),webp:e(20704)}},19480:function(ne,F,e){"use strict";var M=e(87480);ne.exports=function(k){return function(o){for(var T=Object.keys(M),_=0;_<T.length;_++){var p=M[T[_]](o);if(p)return p}return null}(k)},ne.exports.parsers=M},4168:function(ne){var F,e,M=ne.exports={};function k(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function T(s){if(F===setTimeout)return setTimeout(s,0);if((F===k||!F)&&setTimeout)return F=setTimeout,setTimeout(s,0);try{return F(s,0)}catch{try{return F.call(null,s,0)}catch{return F.call(this,s,0)}}}!function(){try{F="function"==typeof setTimeout?setTimeout:k}catch{F=k}try{e="function"==typeof clearTimeout?clearTimeout:o}catch{e=o}}();var _,p=[],l=!1,t=-1;function i(){l&&_&&(l=!1,_.length?p=_.concat(p):t=-1,p.length&&r())}function r(){if(!l){var s=T(i);l=!0;for(var u=p.length;u;){for(_=p,p=[];++t<u;)_&&_[t].run();t=-1,u=p.length}_=null,l=!1,function(f){if(e===clearTimeout)return clearTimeout(f);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(f);try{return e(f)}catch{try{return e.call(null,f)}catch{return e.call(this,f)}}}(s)}}function n(s,u){this.fun=s,this.array=u}function a(){}M.nextTick=function(s){var u=new Array(arguments.length-1);if(arguments.length>1)for(var f=1;f<arguments.length;f++)u[f-1]=arguments[f];p.push(new n(s,u)),1!==p.length||l||T(r)},n.prototype.run=function(){this.fun.apply(null,this.array)},M.title="browser",M.browser=!0,M.env={},M.argv=[],M.version="",M.versions={},M.on=a,M.addListener=a,M.once=a,M.off=a,M.removeListener=a,M.removeAllListeners=a,M.emit=a,M.prependListener=a,M.prependOnceListener=a,M.listeners=function(s){return[]},M.binding=function(s){throw new Error("process.binding is not supported")},M.cwd=function(){return"/"},M.chdir=function(s){throw new Error("process.chdir is not supported")},M.umask=function(){return 0}},3951:function(ne,F,e){for(var M=e(41984),k=typeof window>"u"?e.g:window,o=["moz","webkit"],T="AnimationFrame",_=k["request"+T],p=k["cancel"+T]||k["cancelRequest"+T],l=0;!_&&l<o.length;l++)_=k[o[l]+"Request"+T],p=k[o[l]+"Cancel"+T]||k[o[l]+"CancelRequest"+T];if(!_||!p){var t=0,i=0,r=[];_=function(n){if(0===r.length){var a=M(),s=Math.max(0,16.666666666666668-(a-t));t=s+a,setTimeout(function(){var u=r.slice(0);r.length=0;for(var f=0;f<u.length;f++)if(!u[f].cancelled)try{u[f].callback(t)}catch(c){setTimeout(function(){throw c},0)}},Math.round(s))}return r.push({handle:++i,callback:n,cancelled:!1}),i},p=function(n){for(var a=0;a<r.length;a++)r[a].handle===n&&(r[a].cancelled=!0)}}ne.exports=function(n){return _.call(k,n)},ne.exports.cancel=function(){p.apply(k,arguments)},ne.exports.polyfill=function(n){n||(n=k),n.requestAnimationFrame=_,n.cancelAnimationFrame=p}},24544:function(ne,F,e){"use strict";var M=e(76752),k=e(72160),o=e(45223),T=e(55616),_=e(50896),p=e(47520),l=e(37816),t=l.float32,i=l.fract32;ne.exports=function(n,a){if("function"==typeof n?(a||(a={}),a.regl=n):a=n,a.length&&(a.positions=a),!(n=a.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var s,u,f,c,y,d,m=n._gl,g={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},x=[];return c=n.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),u=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),f=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),y=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),d=n.buffer({usage:"static",type:"float",data:r}),S(a),s=n({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor = color / 255.;\n\n\t\t\tvec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position = position + dxy;\n\n\t\t\tvec2 pos = (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos += pixelOffset / viewport.zw;\n\n\t\t\tgl_Position = vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = fragColor;\n\t\t\tgl_FragColor.a *= opacity;\n\t\t}\n\t\t",uniforms:{range:n.prop("range"),lineWidth:n.prop("lineWidth"),capSize:n.prop("capSize"),opacity:n.prop("opacity"),scale:n.prop("scale"),translate:n.prop("translate"),scaleFract:n.prop("scaleFract"),translateFract:n.prop("translateFract"),viewport:function(E,P){return[P.viewport.x,P.viewport.y,E.viewportWidth,E.viewportHeight]}},attributes:{color:{buffer:c,offset:function(E,P){return 4*P.offset},divisor:1},position:{buffer:u,offset:function(E,P){return 8*P.offset},divisor:1},positionFract:{buffer:f,offset:function(E,P){return 8*P.offset},divisor:1},error:{buffer:y,offset:function(E,P){return 16*P.offset},divisor:1},direction:{buffer:d,stride:24,offset:0},lineOffset:{buffer:d,stride:24,offset:8},capOffset:{buffer:d,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:n.prop("viewport")},viewport:n.prop("viewport"),stencil:!1,instances:n.prop("count"),count:r.length}),_(v,{update:S,draw:b,destroy:w,regl:n,gl:m,canvas:m.canvas,groups:x}),v;function v(E){E?S(E):null===E&&w(),b()}function b(E){if("number"==typeof E)return h(E);E&&!Array.isArray(E)&&(E=[E]),n._refresh(),x.forEach(function(P,I){P&&(E&&(P.draw=!!E[I]),P.draw?h(I):P.draw=!0)})}function h(E){"number"==typeof E&&(E=x[E]),null!=E&&E&&E.count&&E.color&&E.opacity&&E.positions&&E.positions.length>1&&(E.scaleRatio=[E.scale[0]*E.viewport.width,E.scale[1]*E.viewport.height],s(E),E.after&&E.after(E))}function S(E){if(E){null!=E.length?"number"==typeof E[0]&&(E=[{positions:E}]):Array.isArray(E)||(E=[E]);var P=0,I=0;if(v.groups=x=E.map(function(B,V){var q=x[V];return B&&("function"==typeof B?B={after:B}:"number"==typeof B[0]&&(B={positions:B}),B=T(B,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),q||(x[V]=q={id:V,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},B=_({},g,B)),o(q,B,[{lineWidth:function(ie){return.5*+ie},capSize:function(ie){return.5*+ie},opacity:parseFloat,errors:function(ie){return ie=p(ie),I+=ie.length,ie},positions:function(ie,te){return ie=p(ie,"float64"),te.count=Math.floor(ie.length/2),te.bounds=M(ie,2),te.offset=P,P+=te.count,ie}},{color:function(ie,te){var ee=te.count;if(ie||(ie="transparent"),!Array.isArray(ie)||"number"==typeof ie[0]){var $=ie;ie=Array(ee);for(var J=0;J<ee;J++)ie[J]=$}if(ie.length<ee)throw Error("Not enough colors");for(var X=new Uint8Array(4*ee),ae=0;ae<ee;ae++){var ce=k(ie[ae],"uint8");X.set(ce,4*ae)}return X},range:function(ie,te,ee){return ie||(ie=te.bounds),te.scale=[1/(ie[2]-ie[0]),1/(ie[3]-ie[1])],te.translate=[-ie[0],-ie[1]],te.scaleFract=i(te.scale),te.translateFract=i(te.translate),ie},viewport:function(ie){var te;return Array.isArray(ie)?te={x:ie[0],y:ie[1],width:ie[2]-ie[0],height:ie[3]-ie[1]}:ie?((te={x:ie.x||ie.left||0,y:ie.y||ie.top||0}).width=ie.right?ie.right-te.x:ie.w||ie.width||0,te.height=ie.bottom?ie.bottom-te.y:ie.h||ie.height||0):te={x:0,y:0,width:m.drawingBufferWidth,height:m.drawingBufferHeight},te}}])),q}),P||I){var O=x.reduce(function(B,V,q){return B+(V?V.count:0)},0),z=new Float64Array(2*O),U=new Uint8Array(4*O),R=new Float32Array(4*O);x.forEach(function(B,V){if(B){var q=B.positions,te=B.offset,$=B.errors;B.count&&(U.set(B.color,4*te),R.set($,4*te),z.set(q,2*te))}});var j=t(z);u(j);var Y=i(z,j);f(Y),c(U),y(R)}}}function w(){u.destroy(),f.destroy(),c.destroy(),y.destroy(),d.destroy()}};var r=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},13472:function(ne,F,e){"use strict";var M=e(72160),k=e(76752),o=e(50896),T=e(55616),_=e(47520),p=e(28912),l=e(71152),t=e(37816),i=t.float32,r=t.fract32,n=e(60463),a=e(51160),s=e(10272);function u(f,c){if(!(this instanceof u))return new u(f,c);if("function"==typeof f?(c||(c={}),c.regl=f):c=f,c.length&&(c.positions=c),!(f=c.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=f._gl,this.regl=f,this.passes=[],this.shaders=u.shaders.has(f)?u.shaders.get(f):u.shaders.set(f,u.createShaders(f)).get(f),this.update(c)}ne.exports=u,u.dashMult=2,u.maxPatternLength=256,u.precisionThreshold=3e6,u.maxPoints=1e4,u.maxLines=2048,u.shaders=new n,u.createShaders=function(f){var c,y=f.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),d={primitive:"triangle strip",instances:f.prop("count"),count:4,offset:0,uniforms:{miterMode:function(g,x){return"round"===x.join?2:1},miterLimit:f.prop("miterLimit"),scale:f.prop("scale"),scaleFract:f.prop("scaleFract"),translateFract:f.prop("translateFract"),translate:f.prop("translate"),thickness:f.prop("thickness"),dashTexture:f.prop("dashTexture"),opacity:f.prop("opacity"),pixelRatio:f.context("pixelRatio"),id:f.prop("id"),dashLength:f.prop("dashLength"),viewport:function(g,x){return[x.viewport.x,x.viewport.y,g.viewportWidth,g.viewportHeight]},depth:f.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(g,x){return!x.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:f.prop("viewport")},viewport:f.prop("viewport")},m=f(o({vert:"\nprecision highp float;\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineOffset = lineTop * 2. - 1.;\n\n\tvec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent = normalize(diff * scale * viewport.zw);\n\tvec2 normal = vec2(-tangent.y, tangent.x);\n\n\tvec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n",frag:"\nprecision highp float;\n\nuniform float dashLength, pixelRatio, thickness, opacity, id;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha = 1.;\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n",attributes:{lineEnd:{buffer:y,divisor:0,stride:8,offset:0},lineTop:{buffer:y,divisor:0,stride:8,offset:4},aCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:f.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:f.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:f.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},d));try{c=f(o({cull:{enable:!0,face:"back"},vert:"\nprecision highp float;\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIFF = 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio = adjustedScale * viewport.zw;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineBot = 1. - lineTop;\n\n\tfragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n\tif (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\n\tvec2 prevDiff = aCoord - prevCoord;\n\tvec2 currDiff = bCoord - aCoord;\n\tvec2 nextDiff = nextCoord - bCoord;\n\n\tvec2 prevTangent = normalize(prevDiff * scaleRatio);\n\tvec2 currTangent = normalize(currDiff * scaleRatio);\n\tvec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal = vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection = normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff = abs(prevTangent - currTangent);\n\tvec2 nextTanDiff = abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {\n\t\tstartJoinDirection = currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {\n\t\tendJoinDirection = currNormal;\n\t}\n\tif (aCoord == bCoord) {\n\t\tendJoinDirection = startJoinDirection;\n\t\tcurrNormal = prevNormal;\n\t\tcurrTangent = prevTangent;\n\t}\n\n\ttangent = currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift = dot(currNormal, startJoinDirection);\n\tfloat endJoinShift = dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio = abs(1. / startJoinShift);\n\tfloat endMiterRatio = abs(1. / endJoinShift);\n\n\tvec2 startJoin = startJoinDirection * startMiterRatio;\n\tvec2 endJoin = endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin = sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin = -startTopJoin;\n\n\tendTopJoin = sign(endJoinShift) * endJoin * .5;\n\tendBotJoin = -endTopJoin;\n\n\tvec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\tbool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -= normalWidth * endTopJoin;\n\t\tbTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -= normalWidth * startBotJoin;\n\t\taBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition = (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition = (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition = (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition = (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter = step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n",frag:"\nprecision highp float;\n\nuniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha = 1., distToStart, distToEnd;\n\tfloat cutoff = thickness * .5;\n\n\t//bevel miter\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n",attributes:{lineEnd:{buffer:y,divisor:0,stride:8,offset:0},lineTop:{buffer:y,divisor:0,stride:8,offset:4},aColor:{buffer:f.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:f.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},d))}catch{c=m}return{fill:f({primitive:"triangle",elements:function(g,x){return x.triangles},offset:0,vert:"\nprecision highp float;\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n\tfloat depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n\tfragColor.a *= opacity;\n}\n",frag:"\nprecision highp float;\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor = fragColor;\n}\n",uniforms:{scale:f.prop("scale"),color:f.prop("fill"),scaleFract:f.prop("scaleFract"),translateFract:f.prop("translateFract"),translate:f.prop("translate"),opacity:f.prop("opacity"),pixelRatio:f.context("pixelRatio"),id:f.prop("id"),viewport:function(g,x){return[x.viewport.x,x.viewport.y,g.viewportWidth,g.viewportHeight]}},attributes:{position:{buffer:f.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:f.prop("positionFractBuffer"),stride:8,offset:8}},blend:d.blend,depth:{enable:!1},scissor:d.scissor,stencil:d.stencil,viewport:d.viewport}),rect:m,miter:c}},u.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},u.prototype.render=function(){for(var f,c=[],y=arguments.length;y--;)c[y]=arguments[y];c.length&&(f=this).update.apply(f,c),this.draw()},u.prototype.draw=function(){for(var f=this,c=[],y=arguments.length;y--;)c[y]=arguments[y];return(c.length?c:this.passes).forEach(function(d,m){var g;if(d&&Array.isArray(d))return(g=f).draw.apply(g,d);"number"==typeof d&&(d=f.passes[d]),d&&d.count>1&&d.opacity&&(f.regl._refresh(),d.fill&&d.triangles&&d.triangles.length>2&&f.shaders.fill(d),d.thickness&&(d.scale[0]*d.viewport.width>u.precisionThreshold||d.scale[1]*d.viewport.height>u.precisionThreshold||"rect"===d.join||!d.join&&(d.thickness<=2||d.count>=u.maxPoints)?f.shaders.rect(d):f.shaders.miter(d)))}),this},u.prototype.update=function(f){var c=this;if(f){null!=f.length?"number"==typeof f[0]&&(f=[{positions:f}]):Array.isArray(f)||(f=[f]);var y=this.regl,d=this.gl;if(f.forEach(function(b,h){var S=c.passes[h];if(void 0!==b)if(null!==b){if("number"==typeof b[0]&&(b={positions:b}),b=T(b,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),S||(c.passes[h]=S={id:h,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:y.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:y.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:y.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:y.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},b=o({},u.defaults,b)),null!=b.thickness&&(S.thickness=parseFloat(b.thickness)),null!=b.opacity&&(S.opacity=parseFloat(b.opacity)),null!=b.miterLimit&&(S.miterLimit=parseFloat(b.miterLimit)),null!=b.overlay&&(S.overlay=!!b.overlay,h<u.maxLines&&(S.depth=2*(u.maxLines-1-h%u.maxLines)/u.maxLines-1)),null!=b.join&&(S.join=b.join),null!=b.hole&&(S.hole=b.hole),null!=b.fill&&(S.fill=b.fill?M(b.fill,"uint8"):null),null!=b.viewport&&(S.viewport=a(b.viewport)),S.viewport||(S.viewport=a([d.drawingBufferWidth,d.drawingBufferHeight])),null!=b.close&&(S.close=b.close),null===b.positions&&(b.positions=[]),b.positions){var w,E;if(b.positions.x&&b.positions.y){var P=b.positions.x,I=b.positions.y;E=S.count=Math.max(P.length,I.length),w=new Float64Array(2*E);for(var O=0;O<E;O++)w[2*O]=P[O],w[2*O+1]=I[O]}else w=_(b.positions,"float64"),E=S.count=Math.floor(w.length/2);var z=S.bounds=k(w,2);if(S.fill){for(var U=[],R={},j=0,Y=0,B=0,V=S.count;Y<V;Y++){var q=w[2*Y],ie=w[2*Y+1];isNaN(q)||isNaN(ie)||null==q||null==ie?(q=w[2*j],ie=w[2*j+1],R[Y]=j):j=Y,U[B++]=q,U[B++]=ie}if(b.splitNull){S.count-1 in R||(R[S.count]=S.count-1);var te=Object.keys(R).map(Number).sort(function(At,_t){return At-_t}),ee=[],$=0,J=null!=S.hole?S.hole[0]:null;if(null!=J){var X=s(te,function(At){return At>=J});(te=te.slice(0,X)).push(J)}for(var ae=function(At){var _t=U.slice(2*$,2*te[At]).concat(J?U.slice(2*J):[]),ot=(S.hole||[]).map(function(Pt){return Pt-J+(te[At]-$)}),it=p(_t,ot);it=it.map(function(Pt){return Pt+$+(Pt+$<te[At]?0:J-te[At])}),ee.push.apply(ee,it),$=te[At]+1},ce=0;ce<te.length;ce++)ae(ce);for(var le=0,pe=ee.length;le<pe;le++)null!=R[ee[le]]&&(ee[le]=R[ee[le]]);S.triangles=ee}else{for(var we=p(U,S.hole||[]),Te=0,ye=we.length;Te<ye;Te++)null!=R[we[Te]]&&(we[Te]=R[we[Te]]);S.triangles=we}}var ve=new Float64Array(w);l(ve,2,z);var xe=new Float64Array(2*E+6);S.close?w[0]===w[2*E-2]&&w[1]===w[2*E-1]?(xe[0]=ve[2*E-4],xe[1]=ve[2*E-3]):(xe[0]=ve[2*E-2],xe[1]=ve[2*E-1]):(xe[0]=ve[0],xe[1]=ve[1]),xe.set(ve,2),S.close?w[0]===w[2*E-2]&&w[1]===w[2*E-1]?(xe[2*E+2]=ve[2],xe[2*E+3]=ve[3],S.count-=1):(xe[2*E+2]=ve[0],xe[2*E+3]=ve[1],xe[2*E+4]=ve[2],xe[2*E+5]=ve[3]):(xe[2*E+2]=ve[2*E-2],xe[2*E+3]=ve[2*E-1],xe[2*E+4]=ve[2*E-2],xe[2*E+5]=ve[2*E-1]);var Ce=i(xe);S.positionBuffer(Ce);var Oe=r(xe,Ce);S.positionFractBuffer(Oe)}if(b.range?S.range=b.range:S.range||(S.range=S.bounds),(b.range||b.positions)&&S.count){var be=S.bounds,ge=S.range[2]-S.range[0],Ie=S.range[3]-S.range[1];S.scale=[(be[2]-be[0])/ge,(be[3]-be[1])/Ie],S.translate=[-S.range[0]/ge+be[0]/ge||0,-S.range[1]/Ie+be[1]/Ie||0],S.scaleFract=r(S.scale),S.translateFract=r(S.translate)}if(b.dashes){var ke,Se=0;if(!b.dashes||b.dashes.length<2)Se=1,ke=new Uint8Array([255,255,255,255,255,255,255,255]);else{Se=0;for(var Pe=0;Pe<b.dashes.length;++Pe)Se+=b.dashes[Pe];ke=new Uint8Array(Se*u.dashMult);for(var Fe=0,Be=255,me=0;me<2;me++)for(var Me=0;Me<b.dashes.length;++Me){for(var Le=0,Ne=b.dashes[Me]*u.dashMult*.5;Le<Ne;++Le)ke[Fe++]=Be;Be^=255}}S.dashLength=Se,S.dashTexture({channels:1,data:ke,width:ke.length,height:1,mag:"linear",min:"linear"},0,0)}if(b.color){var Re=S.count,He=b.color;He||(He="transparent");var Ze=new Uint8Array(4*Re+4);if(Array.isArray(He)&&"number"!=typeof He[0]){for(var nt=0;nt<Re;nt++){var ft=M(He[nt],"uint8");Ze.set(ft,4*nt)}Ze.set(M(He[0],"uint8"),4*Re)}else for(var ht=M(He,"uint8"),Tt=0;Tt<Re+1;Tt++)Ze.set(ht,4*Tt);S.colorBuffer({usage:"dynamic",type:"uint8",data:Ze})}}else c.passes[h]=null}),f.length<this.passes.length){for(var m=f.length;m<this.passes.length;m++){var g=this.passes[m];g&&(g.colorBuffer.destroy(),g.positionBuffer.destroy(),g.dashTexture.destroy())}this.passes.length=f.length}for(var x=[],v=0;v<this.passes.length;v++)null!==this.passes[v]&&x.push(this.passes[v]);return this.passes=x,this}},u.prototype.destroy=function(){return this.passes.forEach(function(f){f.colorBuffer.destroy(),f.positionBuffer.destroy(),f.dashTexture.destroy()}),this.passes.length=0,this}},38540:function(ne,F,e){"use strict";function M(m,g){return function(x){if(Array.isArray(x))return x}(m)||function(x,v){var b=null==x?null:typeof Symbol<"u"&&x[Symbol.iterator]||x["@@iterator"];if(null!=b){var h,S,w,E,P=[],I=!0,O=!1;try{if(w=(b=b.call(x)).next,0===v){if(Object(b)!==b)return;I=!1}else for(;!(I=(h=w.call(b)).done)&&(P.push(h.value),P.length!==v);I=!0);}catch(z){O=!0,S=z}finally{try{if(!I&&null!=b.return&&(E=b.return(),Object(E)!==E))return}finally{if(O)throw S}}return P}}(m,g)||k(m,g)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(m,g){if(m){if("string"==typeof m)return o(m,g);var x=Object.prototype.toString.call(m).slice(8,-1);return"Object"===x&&m.constructor&&(x=m.constructor.name),"Map"===x||"Set"===x?Array.from(m):"Arguments"===x||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?o(m,g):void 0}}function o(m,g){(null==g||g>m.length)&&(g=m.length);for(var x=0,v=new Array(g);x<g;x++)v[x]=m[x];return v}var T=e(72160),_=e(76752),p=e(3808),l=e(3108),t=e(50896),i=e(26444),r=e(55616),n=e(45223),a=e(47520),s=e(96604),u=e(37816),f=e(51160),c=y;function y(m,g){var x=this;if(!(this instanceof y))return new y(m,g);"function"==typeof m?(g||(g={}),g.regl=m):(g=m,m=null),g&&g.length&&(g.positions=g);var v,b=(m=g.regl)._gl,h=[];this.tooManyColors=s,v=m.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),t(this,{regl:m,gl:b,groups:[],markerCache:[null],markerTextures:[null],palette:h,paletteIds:{},paletteTexture:v,maxColors:255,maxSize:100,canvas:b.canvas}),this.update(g);var S={uniforms:{constPointSize:!!g.constPointSize,opacity:m.prop("opacity"),paletteSize:function(P,I){return[x.tooManyColors?0:255,v.height]},pixelRatio:m.context("pixelRatio"),scale:m.prop("scale"),scaleFract:m.prop("scaleFract"),translate:m.prop("translate"),translateFract:m.prop("translateFract"),markerTexture:m.prop("markerTexture"),paletteTexture:v},attributes:{x:function(P,I){return I.xAttr||{buffer:I.positionBuffer,stride:8,offset:0}},y:function(P,I){return I.yAttr||{buffer:I.positionBuffer,stride:8,offset:4}},xFract:function(P,I){return I.xAttr?{constant:[0,0]}:{buffer:I.positionFractBuffer,stride:8,offset:0}},yFract:function(P,I){return I.yAttr?{constant:[0,0]}:{buffer:I.positionFractBuffer,stride:8,offset:4}},size:function(P,I){return I.size.length?{buffer:I.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*I.size/x.maxSize)]}},borderSize:function(P,I){return I.borderSize.length?{buffer:I.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*I.borderSize/x.maxSize)]}},colorId:function(P,I){return I.color.length?{buffer:I.colorBuffer,stride:x.tooManyColors?8:4,offset:0}:{constant:x.tooManyColors?h.slice(4*I.color,4*I.color+4):[I.color]}},borderColorId:function(P,I){return I.borderColor.length?{buffer:I.colorBuffer,stride:x.tooManyColors?8:4,offset:x.tooManyColors?4:2}:{constant:x.tooManyColors?h.slice(4*I.borderColor,4*I.borderColor+4):[I.borderColor]}},isActive:function(P,I){return!0===I.activation?{constant:[1]}:I.activation?I.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:m.prop("viewport")},viewport:m.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:m.prop("elements"),count:m.prop("count"),offset:m.prop("offset"),primitive:"points"},w=t({},S);w.frag=i(["precision highp float;\n#define GLSLIFY 1\n\nuniform float opacity;\nuniform sampler2D markerTexture;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]),w.vert=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\n// `invariant` effectively turns off optimizations for the position.\n// We need this because -fast-math on M1 Macs is re-ordering\n// floating point operations in a way that causes floating point\n// precision limits to put points in the wrong locations.\ninvariant gl_Position;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pointSizeScale;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}\n"]),this.drawMarker=m(w);var E=t({},S);E.frag=i(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nuniform float opacity;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius > 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]),E.vert=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\n// `invariant` effectively turns off optimizations for the position.\n// We need this because -fast-math on M1 Macs is re-ordering\n// floating point operations in a way that causes floating point\n// precision limits to put points in the wrong locations.\ninvariant gl_Position;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 paletteSize, scale, scaleFract, translate, translateFract;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pointSizeScale;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),s&&(E.frag=E.frag.replace("smoothstep","smoothStep"),w.frag=w.frag.replace("smoothstep","smoothStep")),this.drawCircle=m(E)}y.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},y.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},y.prototype.draw=function(){for(var m=this,g=arguments.length,x=new Array(g),v=0;v<g;v++)x[v]=arguments[v];var b=this.groups;if(1===x.length&&Array.isArray(x[0])&&(null===x[0][0]||Array.isArray(x[0][0]))&&(x=x[0]),this.regl._refresh(),x.length)for(var h=0;h<x.length;h++)this.drawItem(h,x[h]);else b.forEach(function(S,w){m.drawItem(w)});return this},y.prototype.drawItem=function(m,g){var x,v=this.groups,b=v[m];if("number"==typeof g&&(m=g,b=v[g],g=null),b&&b.count&&b.opacity){b.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,b,g));for(var h=[],S=1;S<b.activation.length;S++)b.activation[S]&&(!0===b.activation[S]||b.activation[S].data.length)&&h.push.apply(h,function(w){if(Array.isArray(w))return o(w)}(x=this.getMarkerDrawOptions(S,b,g))||function(w){if(typeof Symbol<"u"&&null!=w[Symbol.iterator]||null!=w["@@iterator"])return Array.from(w)}(x)||k(x)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());h.length&&this.drawMarker(h)}},y.prototype.getMarkerDrawOptions=function(m,g,x){var v=g.range,b=g.tree,h=g.viewport,S=g.activation,w=g.selectionBuffer,E=g.count;if(!b)return x?[t({},g,{markerTexture:this.markerTextures[m],activation:S[m],count:x.length,elements:x,offset:0})]:[t({},g,{markerTexture:this.markerTextures[m],activation:S[m],offset:0})];var P=[],I=b.range(v,{lod:!0,px:[(v[2]-v[0])/h.width,(v[3]-v[1])/h.height]});if(x){for(var O=S[m].data,z=new Uint8Array(E),U=0;U<x.length;U++){var R=x[U];z[R]=O?O[R]:1}w.subdata(z)}for(var j=I.length;j--;){var Y=M(I[j],2),B=Y[0];P.push(t({},g,{markerTexture:this.markerTextures[m],activation:x?w:S[m],offset:B,count:Y[1]-B}))}return P},y.prototype.update=function(){for(var m=this,g=arguments.length,x=new Array(g),v=0;v<g;v++)x[v]=arguments[v];if(x.length){1===x.length&&Array.isArray(x[0])&&(x=x[0]);var b=this.groups,h=this.gl,S=this.regl,w=this.maxSize,E=this.maxColors,P=this.palette;this.groups=b=x.map(function(I,O){var z=b[O];if(void 0===I)return z;null===I?I={positions:null}:"function"==typeof I?I={ondraw:I}:"number"==typeof I[0]&&(I={positions:I}),null===(I=r(I,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions&&(I.positions=[]),null!=I.tooManyColors&&(m.tooManyColors=I.tooManyColors),z||(b[O]=z={id:O,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:S.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},I=t({},y.defaults,I)),I.positions&&!("marker"in I)&&(I.marker=z.marker,delete z.marker),I.marker&&!("positions"in I)&&(I.positions=z.positions,delete z.positions);var U=0,R=0;if(n(z,I,[{snap:!0,size:function(ye,ve){return null==ye&&(ye=y.defaults.size),U+=ye&&ye.length?1:0,ye},borderSize:function(ye,ve){return null==ye&&(ye=y.defaults.borderSize),U+=ye&&ye.length?1:0,ye},opacity:parseFloat,color:function(ye,ve){return null==ye&&(ye=y.defaults.color),ye=m.updateColor(ye),R++,ye},borderColor:function(ye,ve){return null==ye&&(ye=y.defaults.borderColor),ye=m.updateColor(ye),R++,ye},bounds:function(ye,ve,xe){return"range"in xe||(xe.range=null),ye},positions:function(ye,ve,xe){var Ce=ve.snap,Oe=ve.positionBuffer,be=ve.positionFractBuffer,ue=ve.selectionBuffer;if(ye.x||ye.y)return ve.xAttr=ye.x.length?{buffer:S.buffer(ye.x),offset:0,stride:4,count:ye.x.length}:{buffer:ye.x.buffer,offset:4*ye.x.offset||0,stride:4*(ye.x.stride||1),count:ye.x.count},ve.yAttr=ye.y.length?{buffer:S.buffer(ye.y),offset:0,stride:4,count:ye.y.length}:{buffer:ye.y.buffer,offset:4*ye.y.offset||0,stride:4*(ye.y.stride||1),count:ye.y.count},ve.count=Math.max(ve.xAttr.count,ve.yAttr.count),ye;ye=a(ye,"float64");var se=ve.count=Math.floor(ye.length/2),ge=ve.bounds=se?_(ye,2):null;if(xe.range||ve.range||(delete ve.range,xe.range=ge),xe.marker||ve.marker||(delete ve.marker,xe.marker=null),Ce&&(!0===Ce||se>Ce)?ve.tree=l(ye,{bounds:ge}):Ce&&Ce.length&&(ve.tree=Ce),ve.tree){var Ie={primitive:"points",usage:"static",data:ve.tree,type:"uint32"};ve.elements?ve.elements(Ie):ve.elements=S.elements(Ie)}var ke=u.float32(ye);return Oe({data:ke,usage:"dynamic"}),be({data:u.fract32(ye,ke),usage:"dynamic"}),ue({data:new Uint8Array(se),type:"uint8",usage:"stream"}),ye}},{marker:function(ye,ve,xe){var Ce=ve.activation;if(Ce.forEach(function(ke){return ke&&ke.destroy&&ke.destroy()}),Ce.length=0,ye&&"number"!=typeof ye[0]){for(var Oe=[],be=0,ue=Math.min(ye.length,ve.count);be<ue;be++){var se=m.addMarker(ye[be]);Oe[se]||(Oe[se]=new Uint8Array(ve.count)),Oe[se][be]=1}for(var ge=0;ge<Oe.length;ge++)if(Oe[ge]){var Ie={data:Oe[ge],type:"uint8",usage:"static"};Ce[ge]?Ce[ge](Ie):Ce[ge]=S.buffer(Ie),Ce[ge].data=Oe[ge]}}else Ce[m.addMarker(ye)]=!0;return ye},range:function(ye,ve,xe){var Ce=ve.bounds;if(Ce)return ye||(ye=Ce),ve.scale=[1/(ye[2]-ye[0]),1/(ye[3]-ye[1])],ve.translate=[-ye[0],-ye[1]],ve.scaleFract=u.fract(ve.scale),ve.translateFract=u.fract(ve.translate),ye},viewport:function(ye){return f(ye||[h.drawingBufferWidth,h.drawingBufferHeight])}}]),U){var Y=z.count,B=z.size,V=z.borderSize,q=z.sizeBuffer,ie=new Uint8Array(2*Y);if(B.length||V.length)for(var te=0;te<Y;te++)ie[2*te]=Math.round(255*(null==B[te]?B:B[te])/w),ie[2*te+1]=Math.round(255*(null==V[te]?V:V[te])/w);q({data:ie,usage:"dynamic"})}if(R){var ee,J=z.count,X=z.color,ae=z.borderColor,ce=z.colorBuffer;if(m.tooManyColors){if(X.length||ae.length){ee=new Uint8Array(8*J);for(var le=0;le<J;le++){var pe=X[le];ee[8*le]=P[4*pe],ee[8*le+1]=P[4*pe+1],ee[8*le+2]=P[4*pe+2],ee[8*le+3]=P[4*pe+3];var we=ae[le];ee[8*le+4]=P[4*we],ee[8*le+5]=P[4*we+1],ee[8*le+6]=P[4*we+2],ee[8*le+7]=P[4*we+3]}}}else if(X.length||ae.length){ee=new Uint8Array(4*J+2);for(var Te=0;Te<J;Te++)null!=X[Te]&&(ee[4*Te]=X[Te]%E,ee[4*Te+1]=Math.floor(X[Te]/E)),null!=ae[Te]&&(ee[4*Te+2]=ae[Te]%E,ee[4*Te+3]=Math.floor(ae[Te]/E))}ce({data:ee||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return z})}},y.prototype.addMarker=function(m){var g,x=this.markerTextures,v=this.regl,b=this.markerCache,h=null==m?0:b.indexOf(m);if(h>=0)return h;if(m instanceof Uint8Array||m instanceof Uint8ClampedArray)g=m;else{g=new Uint8Array(m.length);for(var S=0,w=m.length;S<w;S++)g[S]=255*m[S]}var E=Math.floor(Math.sqrt(g.length));return h=x.length,b.push(m),x.push(v.texture({channels:1,data:g,radius:E,mag:"linear",min:"linear"})),h},y.prototype.updateColor=function(m){var g=this.paletteIds,x=this.palette,v=this.maxColors;Array.isArray(m)||(m=[m]);var b=[];if("number"==typeof m[0]){var h=[];if(Array.isArray(m))for(var S=0;S<m.length;S+=4)h.push(m.slice(S,S+4));else for(var w=0;w<m.length;w+=4)h.push(m.subarray(w,w+4));m=h}for(var E=0;E<m.length;E++){var P=m[E];P=T(P,"uint8");var I=p(P,!1);if(null==g[I]){var O=x.length;g[I]=Math.floor(O/4),x[O]=P[0],x[O+1]=P[1],x[O+2]=P[2],x[O+3]=P[3]}b[E]=g[I]}return!this.tooManyColors&&x.length>4*v&&(this.tooManyColors=!0),this.updatePalette(x),1===b.length?b[0]:b},y.prototype.updatePalette=function(m){if(!this.tooManyColors){var g=this.maxColors,x=this.paletteTexture,v=Math.ceil(.25*m.length/g);if(v>1)for(var b=.25*(m=m.slice()).length%g;b<v*g;b++)m.push(0,0,0,0);x.height<v&&x.resize(g,v),x.subimage({width:Math.min(.25*m.length,g),height:v,data:m},0,0)}},y.prototype.destroy=function(){return this.groups.forEach(function(m){m.sizeBuffer.destroy(),m.positionBuffer.destroy(),m.positionFractBuffer.destroy(),m.colorBuffer.destroy(),m.activation.forEach(function(g){return g&&g.destroy&&g.destroy()}),m.selectionBuffer.destroy(),m.elements&&m.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(m){return m&&m.destroy&&m.destroy()}),this};var d=e(50896);ne.exports=function(m,g){var x=new c(m,g),v=x.render.bind(x);return d(v,{render:v,update:x.update.bind(x),draw:x.draw.bind(x),destroy:x.destroy.bind(x),regl:x.regl,gl:x.gl,canvas:x.gl.canvas,groups:x.groups,markers:x.markerCache,palette:x.palette}),v}},55795:function(ne,F,e){"use strict";var M=e(38540),k=e(55616),o=e(76752),T=e(3951),_=e(67752),p=e(51160),l=e(47520);function t(a,s){if(!(this instanceof t))return new t(a,s);this.traces=[],this.passes={},this.regl=a,this.scatter=M(a),this.canvas=this.scatter.canvas}function i(a,s,u){return(null!=a.id?a.id:a)<<16|(255&s)<<8|255&u}function r(a,s,u){var f,c,y,d,m=a[s],g=a[u];return m.length>2?(f=m[1],c=m[3]):m.length?(f=m[0],c=m[1]):(f=m.y,c=m.y+m.height),g.length>2?(y=g[0],d=g[2]):g.length?(y=g[0],d=g[1]):(y=g.x,d=g.x+g.width),[y,f,d,c]}function n(a){if("number"==typeof a)return[a,a,a,a];if(2===a.length)return[a[0],a[1],a[0],a[1]];var s=p(a);return[s.x,s.y,s.x+s.width,s.y+s.height]}ne.exports=t,t.prototype.render=function(){for(var a,s=this,u=[],f=arguments.length;f--;)u[f]=arguments[f];return u.length&&(a=this).update.apply(a,u),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?null==this.planned&&(this.planned=T(function(){s.draw(),s.dirty=!0,s.planned=null})):(this.draw(),this.dirty=!0,T(function(){s.dirty=!1})),this)},t.prototype.update=function(){for(var a,s=[],u=arguments.length;u--;)s[u]=arguments[u];if(s.length){for(var f=0;f<s.length;f++)this.updateItem(f,s[f]);this.traces=this.traces.filter(Boolean);for(var c=[],y=0,d=0;d<this.traces.length;d++){for(var m=this.traces[d],g=this.traces[d].passes,x=0;x<g.length;x++)c.push(this.passes[g[x]]);m.passOffset=y,y+=m.passes.length}return(a=this.scatter).update.apply(a,c),this}},t.prototype.updateItem=function(a,s){var u=this.regl;if(null===s)return this.traces[a]=null,this;if(!s)return this;var f,c=k(s,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),y=this.traces[a]||(this.traces[a]={id:a,buffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:p([u._gl.drawingBufferWidth,u._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(null!=c.color&&(y.color=c.color),null!=c.size&&(y.size=c.size),null!=c.marker&&(y.marker=c.marker),null!=c.borderColor&&(y.borderColor=c.borderColor),null!=c.borderSize&&(y.borderSize=c.borderSize),null!=c.opacity&&(y.opacity=c.opacity),c.viewport&&(y.viewport=p(c.viewport)),null!=c.diagonal&&(y.diagonal=c.diagonal),null!=c.upper&&(y.upper=c.upper),null!=c.lower&&(y.lower=c.lower),c.data){y.buffer(l(c.data)),y.columns=c.data.length,y.count=c.data[0].length,y.bounds=[];for(var d=0;d<y.columns;d++)y.bounds[d]=o(c.data[d],1)}c.range&&(y.range=c.range,f=y.range&&"number"!=typeof y.range[0]),c.domain&&(y.domain=c.domain);var m=!1;null!=c.padding&&(Array.isArray(c.padding)&&c.padding.length===y.columns&&"number"==typeof c.padding[c.padding.length-1]?(y.padding=c.padding.map(n),m=!0):y.padding=n(c.padding));var g=y.columns,x=y.count,v=y.viewport.width,b=y.viewport.height,h=y.viewport.x,S=y.viewport.y,w=v/g,E=b/g;y.passes=[];for(var P=0;P<g;P++)for(var I=0;I<g;I++)if((y.diagonal||I!==P)&&(y.upper||!(P>I))&&(y.lower||!(P<I))){var O=i(y.id,P,I),z=this.passes[O]||(this.passes[O]={});if(c.data&&(z.positions=c.transpose?{x:{buffer:y.buffer,offset:I,count:x,stride:g},y:{buffer:y.buffer,offset:P,count:x,stride:g}}:{x:{buffer:y.buffer,offset:I*x,count:x},y:{buffer:y.buffer,offset:P*x,count:x}},z.bounds=r(y.bounds,P,I)),c.domain||c.viewport||c.data){var U=m?r(y.padding,P,I):y.padding;if(y.domain){var R=r(y.domain,P,I);z.viewport=[h+R[0]*v+U[0],S+R[1]*b+U[1],h+R[2]*v-U[2],S+R[3]*b-U[3]]}else z.viewport=[h+I*w+w*U[0],S+P*E+E*U[1],h+(I+1)*w-w*U[2],S+(P+1)*E-E*U[3]]}c.color&&(z.color=y.color),c.size&&(z.size=y.size),c.marker&&(z.marker=y.marker),c.borderSize&&(z.borderSize=y.borderSize),c.borderColor&&(z.borderColor=y.borderColor),c.opacity&&(z.opacity=y.opacity),c.range&&(z.range=f?r(y.range,P,I):y.range||z.bounds),y.passes.push(O)}return this},t.prototype.draw=function(){for(var a,s=[],u=arguments.length;u--;)s[u]=arguments[u];if(s.length){for(var f=[],c=0;c<s.length;c++)if("number"==typeof s[c]){var y=this.traces[s[c]],m=y.passOffset;f.push.apply(f,_(m,m+y.passes.length))}else if(s[c].length){var g=s[c],x=this.traces[c],v=x.passes,b=x.passOffset;v=v.map(function(h,S){f[b+S]=g})}(a=this.scatter).draw.apply(a,f)}else this.scatter.draw();return this},t.prototype.destroy=function(){return this.traces.forEach(function(a){a.buffer&&a.buffer.destroy&&a.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},28624:function(ne){ne.exports=function(){function F(qe,$e){this.id=ae++,this.type=qe,this.data=$e}function e(qe){if(0===qe.length)return[];var $e=qe.charAt(0),pt=qe.charAt(qe.length-1);if(1<qe.length&&$e===pt&&('"'===$e||"'"===$e))return['"'+qe.substr(1,qe.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if($e=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(qe))return e(qe.substr(0,$e.index)).concat(e($e[1])).concat(e(qe.substr($e.index+$e[0].length)));if(1===($e=qe.split(".")).length)return['"'+qe.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(qe=[],pt=0;pt<$e.length;++pt)qe=qe.concat(e($e[pt]));return qe}function M(qe){return"["+e(qe).join("][")+"]"}function k(qe){return"string"==typeof qe?qe.split():qe}function o(qe){return"string"==typeof qe?document.querySelector(qe):qe}function _(qe,$e){for(var pt=Array(qe),ct=0;ct<qe;++ct)pt[ct]=$e(ct);return pt}function p(qe){var $e,pt;return $e=(65535<qe)<<4,$e|=pt=(255<(qe>>>=$e))<<3,($e|=pt=(15<(qe>>>=pt))<<2)|(pt=(3<(qe>>>=pt))<<1)|qe>>>pt>>1}function l(){function qe(ct){e:{for(var Ve=16;268435456>=Ve;Ve*=16)if(ct<=Ve){ct=Ve;break e}ct=0}return 0<(Ve=pt[p(ct)>>2]).length?Ve.pop():new ArrayBuffer(ct)}function $e(ct){pt[p(ct.byteLength)>>2].push(ct)}var pt=_(8,function(){return[]});return{alloc:qe,free:$e,allocType:function(ct,Ve){var Ge=null;switch(ct){case 5120:Ge=new Int8Array(qe(Ve),0,Ve);break;case 5121:Ge=new Uint8Array(qe(Ve),0,Ve);break;case 5122:Ge=new Int16Array(qe(2*Ve),0,Ve);break;case 5123:Ge=new Uint16Array(qe(2*Ve),0,Ve);break;case 5124:Ge=new Int32Array(qe(4*Ve),0,Ve);break;case 5125:Ge=new Uint32Array(qe(4*Ve),0,Ve);break;case 5126:Ge=new Float32Array(qe(4*Ve),0,Ve);break;default:return null}return Ge.length!==Ve?Ge.subarray(0,Ve):Ge},freeType:function(ct){$e(ct.buffer)}}}function t(qe){return!!qe&&"object"==typeof qe&&Array.isArray(qe.shape)&&Array.isArray(qe.stride)&&"number"==typeof qe.offset&&qe.shape.length===qe.stride.length&&(Array.isArray(qe.data)||ye(qe.data))}function i(qe,$e,pt,ct,Ve,Ge){for(var ut=0;ut<$e;++ut)for(var Qe=qe[ut],yt=0;yt<pt;++yt)for(var wt=Qe[yt],kt=0;kt<ct;++kt)Ve[Ge++]=wt[kt]}function r(qe,$e,pt,ct,Ve){for(var Ge=1,ut=pt+1;ut<$e.length;++ut)Ge*=$e[ut];var Qe=$e[pt];if($e.length-pt==4){var yt=$e[pt+1],wt=$e[pt+2];for($e=$e[pt+3],ut=0;ut<Qe;++ut)i(qe[ut],yt,wt,$e,ct,Ve),Ve+=Ge}else for(ut=0;ut<Qe;++ut)r(qe[ut],$e,pt+1,ct,Ve),Ve+=Ge}function n(qe){return 0|Ce[Object.prototype.toString.call(qe)]}function a(qe,$e){for(var pt=0;pt<$e.length;++pt)qe[pt]=$e[pt]}function s(qe,$e,pt,ct,Ve,Ge,ut){for(var Qe=0,yt=0;yt<pt;++yt)for(var wt=0;wt<ct;++wt)qe[Qe++]=$e[Ve*yt+Ge*wt+ut]}function c(qe){for(var $e=we.allocType(5123,qe.length),pt=0;pt<qe.length;++pt)if(isNaN(qe[pt]))$e[pt]=65535;else if(qe[pt]===1/0)$e[pt]=31744;else if(qe[pt]===-1/0)$e[pt]=64512;else{ke[0]=qe[pt];var ct=(Ge=Se[0])>>>31<<15,Ve=(Ge<<1>>>24)-127,Ge=Ge>>13&1023;$e[pt]=-24>Ve?ct:-14>Ve?ct+(Ge+1024>>-14-Ve):15<Ve?ct+31744:ct+(Ve+15<<10)+Ge}return $e}function y(qe){return Array.isArray(qe)||ye(qe)}function d(qe){return"[object "+qe+"]"}function m(qe){return Array.isArray(qe)&&(0===qe.length||"number"==typeof qe[0])}function g(qe){return!(!Array.isArray(qe)||0===qe.length||!y(qe[0]))}function x(qe){return Object.prototype.toString.call(qe)}function v(qe){if(!qe)return!1;var $e=x(qe);return 0<=Ze.indexOf($e)||m(qe)||g(qe)||t(qe)}function b(qe,$e){36193===qe.type?(qe.data=c($e),we.freeType($e)):qe.data=$e}function h(qe,$e,pt,ct,Ve,Ge){if(qe=void 0!==ft[qe]?ft[qe]:Be[qe]*nt[$e],Ge&&(qe*=6),Ve){for(ct=0;1<=pt;)ct+=qe*pt*pt,pt/=2;return ct}return qe*pt*ct}function E(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function z(qe,$e){return qe>>>$e|qe<<32-$e}function U(qe,$e){var pt=(65535&qe)+(65535&$e);return(qe>>16)+($e>>16)+(pt>>16)<<16|65535&pt}function R(qe){return Array.prototype.slice.call(qe)}function j(qe){return R(qe).join("")}function B(qe){return Array.isArray(qe)||ye(qe)||t(qe)}function V(qe){return qe.sort(function($e,pt){return"viewport"===$e?-1:"viewport"===pt?1:$e<pt?-1:1})}function q(qe,$e,pt,ct){this.thisDep=qe,this.contextDep=$e,this.propDep=pt,this.append=ct}function ie(qe){return qe&&!(qe.thisDep||qe.contextDep||qe.propDep)}function te(qe){return new q(!1,!1,!1,qe)}function ee(qe,$e){var pt=qe.type;if(0===pt)return new q(!0,1<=(pt=qe.data.length),2<=pt,$e);if(4===pt)return new q((pt=qe.data).thisDep,pt.contextDep,pt.propDep,$e);if(5===pt)return new q(!1,!1,!1,$e);if(6===pt){for(var ct=pt=!1,Ve=!1,Ge=0;Ge<qe.data.length;++Ge){var ut=qe.data[Ge];1===ut.type?Ve=!0:2===ut.type?ct=!0:3===ut.type?pt=!0:0===ut.type?(pt=!0,1<=(ut=ut.data)&&(ct=!0),2<=ut&&(Ve=!0)):4===ut.type&&(pt=pt||ut.data.thisDep,ct=ct||ut.data.contextDep,Ve=Ve||ut.data.propDep)}return new q(pt,ct,Ve,$e)}return new q(3===pt,2===pt,1===pt,$e)}function $(qe,$e,pt,ct,Ve,Ge,ut,Qe,yt,wt,kt,vt,Lt,St,Ot,Nt){function Bt(zt){return zt.replace(".","_")}function Vt(zt,Yt,un){var _n=Bt(zt);Wn.push(zt),Hn[_n]=Mn[_n]=!!un,$n[_n]=Yt}function nn(zt,Yt,un){var _n=Bt(zt);Wn.push(zt),Array.isArray(un)?(Mn[_n]=un.slice(),Hn[_n]=un.slice()):Mn[_n]=Hn[_n]=un,lr[_n]=Yt}function gn(){var zt=function Y(qe){function $e(){var kt=[],vt=[];return X(function(){kt.push.apply(kt,R(arguments))},{def:function(){var Lt="v"+Ve++;return vt.push(Lt),0<arguments.length&&(kt.push(Lt,"="),kt.push.apply(kt,R(arguments)),kt.push(";")),Lt},toString:function(){return j([0<vt.length?"var "+vt.join(",")+";":"",j(kt)])}})}function pt(){function kt(Nt,Bt){Lt(Nt,Bt,"=",vt.def(Nt,Bt),";")}var vt=$e(),Lt=$e(),St=vt.toString,Ot=Lt.toString;return X(function(){vt.apply(vt,R(arguments))},{def:vt.def,entry:vt,exit:Lt,save:kt,set:function(Nt,Bt,Vt){kt(Nt,Bt),vt(Nt,Bt,"=",Vt,";")},toString:function(){return St()+Ot()}})}var ct=qe&&qe.cache,Ve=0,Ge=[],ut=[],Qe=[],yt=$e(),wt={};return{global:yt,link:function(kt,vt){var Lt=vt&&vt.stable;if(!Lt)for(var St=0;St<ut.length;++St)if(ut[St]===kt&&!Qe[St])return Ge[St];return St="g"+Ve++,Ge.push(St),ut.push(kt),Qe.push(Lt),St},block:$e,proc:function(kt,vt){function Lt(){var Bt="a"+St.length;return St.push(Bt),Bt}var St=[];vt=vt||0;for(var Ot=0;Ot<vt;++Ot)Lt();var Nt=(Ot=pt()).toString;return wt[kt]=X(Ot,{arg:Lt,toString:function(){return j(["function(",St.join(),"){",Nt(),"}"])}})},scope:pt,cond:function(){var kt=j(arguments),vt=pt(),Lt=pt(),St=vt.toString,Ot=Lt.toString;return X(vt,{then:function(){return vt.apply(vt,R(arguments)),this},else:function(){return Lt.apply(Lt,R(arguments)),this},toString:function(){var Nt=Ot();return Nt&&(Nt="else{"+Nt+"}"),j(["if(",kt,"){",St(),"}",Nt])}})},compile:function(){var kt=['"use strict";',yt,"return {"];Object.keys(wt).forEach(function(St){kt.push('"',St,'":',wt[St].toString(),",")}),kt.push("}");var vt,Lt=j(kt).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return ct&&(vt=function(St){for(var Ot,Nt="",Bt=0;Bt<St.length;Bt++)Ot=St.charCodeAt(Bt),Nt+="0123456789abcdef".charAt(Ot>>>4&15)+"0123456789abcdef".charAt(15&Ot);return Nt}(function(St){for(var Ot=Array(St.length>>2),Nt=0;Nt<Ot.length;Nt++)Ot[Nt]=0;for(Nt=0;Nt<8*St.length;Nt+=8)Ot[Nt>>5]|=(255&St.charCodeAt(Nt/8))<<24-Nt%32;var Bt,Vt,nn,gn,Jt,an,Xt,Gn,Dn,An,cn,bn=8*St.length;for(St=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Nt=Array(64),Ot[bn>>5]|=128<<24-bn%32,Ot[15+(bn+64>>9<<4)]=bn,Gn=0;Gn<Ot.length;Gn+=16){for(bn=St[0],Bt=St[1],Vt=St[2],nn=St[3],gn=St[4],Jt=St[5],an=St[6],Xt=St[7],Dn=0;64>Dn;Dn++){var hn;16>Dn?Nt[Dn]=Ot[Dn+Gn]:(An=Dn,cn=U(cn=z(cn=Nt[Dn-2],17)^z(cn,19)^cn>>>10,Nt[Dn-7]),hn=z(hn=Nt[Dn-15],7)^z(hn,18)^hn>>>3,Nt[An]=U(U(cn,hn),Nt[Dn-16])),An=U(U(U(U(Xt,An=z(An=gn,6)^z(An,11)^z(An,25)),gn&Jt^~gn&an),ot[Dn]),Nt[Dn]),cn=U(Xt=z(Xt=bn,2)^z(Xt,13)^z(Xt,22),bn&Bt^bn&Vt^Bt&Vt),Xt=an,an=Jt,Jt=gn,gn=U(nn,An),nn=Vt,Vt=Bt,Bt=bn,bn=U(An,cn)}St[0]=U(bn,St[0]),St[1]=U(Bt,St[1]),St[2]=U(Vt,St[2]),St[3]=U(nn,St[3]),St[4]=U(gn,St[4]),St[5]=U(Jt,St[5]),St[6]=U(an,St[6]),St[7]=U(Xt,St[7])}for(Ot="",Nt=0;Nt<32*St.length;Nt+=8)Ot+=String.fromCharCode(St[Nt>>5]>>>24-Nt%32&255);return Ot}(function(St){for(var Ot,Nt,Bt="",Vt=-1;++Vt<St.length;)Ot=St.charCodeAt(Vt),Nt=Vt+1<St.length?St.charCodeAt(Vt+1):0,55296<=Ot&&56319>=Ot&&56320<=Nt&&57343>=Nt&&(Ot=65536+((1023&Ot)<<10)+(1023&Nt),Vt++),127>=Ot?Bt+=String.fromCharCode(Ot):2047>=Ot?Bt+=String.fromCharCode(192|Ot>>>6&31,128|63&Ot):65535>=Ot?Bt+=String.fromCharCode(224|Ot>>>12&15,128|Ot>>>6&63,128|63&Ot):2097151>=Ot&&(Bt+=String.fromCharCode(240|Ot>>>18&7,128|Ot>>>12&63,128|Ot>>>6&63,128|63&Ot));return Bt}(Lt))),ct[vt])?ct[vt].apply(null,ut):(Lt=Function.apply(null,Ge.concat(Lt)),ct&&(ct[vt]=Lt),Lt.apply(null,ut))}}}({cache:Ot}),Yt=zt.link,un=zt.global;zt.id=Sn++,zt.batchId="0";var _n=Yt(Cr),Tn=zt.shared={props:"a0"};Object.keys(Cr).forEach(function(fn){Tn[fn]=un.def(_n,".",fn)});var Cn=zt.next={},vn=zt.current={};Object.keys(lr).forEach(function(fn){Array.isArray(Mn[fn])&&(Cn[fn]=un.def(Tn.next,".",fn),vn[fn]=un.def(Tn.current,".",fn))});var rn=zt.constants={};Object.keys(sn).forEach(function(fn){rn[fn]=un.def(JSON.stringify(sn[fn]))}),zt.invoke=function(fn,yn){switch(yn.type){case 0:var zn=["this",Tn.context,Tn.props,zt.batchId];return fn.def(Yt(yn.data),".call(",zn.slice(0,Math.max(yn.data.length+1,4)),")");case 1:return fn.def(Tn.props,yn.data);case 2:return fn.def(Tn.context,yn.data);case 3:return fn.def("this",yn.data);case 4:return yn.data.append(zt,fn),yn.data.ref;case 5:return yn.data.toString();case 6:return yn.data.map(function(Vn){return zt.invoke(fn,Vn)})}},zt.attribCache={};var tn={};return zt.scopeAttrib=function(fn){if((fn=$e.id(fn))in tn)return tn[fn];var yn=wt.scope[fn];return yn||(yn=wt.scope[fn]=new nr),tn[fn]=Yt(yn)},zt}function Dn(zt,Yt,un,_n,Tn){function Cn(pr){var or=rn[pr];or&&(fn[pr]=or)}var pr,fr,vr,cr,vn=function(pr,or){if("string"==typeof(fr=pr.static).frag&&"string"==typeof fr.vert){if(0<Object.keys(or.dynamic).length)return null;var fr=or.static,vr=Object.keys(fr);if(0<vr.length&&"number"==typeof fr[vr[0]]){for(var cr=[],Ar=0;Ar<vr.length;++Ar)cr.push([0|fr[vr[Ar]],vr[Ar]]);return cr}}return null}(zt,Yt),rn=function(pr,or,fr){function vr(Lr){if(Lr in cr){var xr=cr[Lr];Lr=!0;var Pr,qr,Qr=0|xr.x,Fi=0|xr.y;return"width"in xr?Pr=0|xr.width:Lr=!1,"height"in xr?qr=0|xr.height:Lr=!1,new q(!Lr&&or&&or.thisDep,!Lr&&or&&or.contextDep,!Lr&&or&&or.propDep,function(Ta,Gi){var pa=Ta.shared.context,qa=Pr;"width"in xr||(qa=Gi.def(pa,".","framebufferWidth","-",Qr));var ti=qr;return"height"in xr||(ti=Gi.def(pa,".","framebufferHeight","-",Fi)),[Qr,Fi,qa,ti]})}if(Lr in Ar){var ta=Ar[Lr];return Lr=ee(ta,function(Ta,Gi){var pa=Ta.invoke(Gi,ta),qa=Ta.shared.context,ti=Gi.def(pa,".x|0"),_a=Gi.def(pa,".y|0");return[ti,_a,Gi.def('"width" in ',pa,"?",pa,".width|0:","(",qa,".","framebufferWidth","-",ti,")"),pa=Gi.def('"height" in ',pa,"?",pa,".height|0:","(",qa,".","framebufferHeight","-",_a,")")]}),or&&(Lr.thisDep=Lr.thisDep||or.thisDep,Lr.contextDep=Lr.contextDep||or.contextDep,Lr.propDep=Lr.propDep||or.propDep),Lr}return or?new q(or.thisDep,or.contextDep,or.propDep,function(Ta,Gi){var pa=Ta.shared.context;return[0,0,Gi.def(pa,".","framebufferWidth"),Gi.def(pa,".","framebufferHeight")]}):null}var cr=pr.static,Ar=pr.dynamic;if(pr=vr("viewport")){var Fr=pr;pr=new q(pr.thisDep,pr.contextDep,pr.propDep,function(Lr,xr){var Pr=Fr.append(Lr,xr),qr=Lr.shared.context;return xr.set(qr,".viewportWidth",Pr[2]),xr.set(qr,".viewportHeight",Pr[3]),Pr})}return{viewport:pr,scissor_box:vr("scissor.box")}}(zt,zn=function Jt(zt,Yt){var un=zt.static,_n=zt.dynamic;if("framebuffer"in un){var Tn=un.framebuffer;return Tn?(Tn=Qe.getFramebuffer(Tn),te(function(vn,rn){var tn=vn.link(Tn),fn=vn.shared;return rn.set(fn.framebuffer,".next",tn),rn.set(fn=fn.context,".framebufferWidth",tn+".width"),rn.set(fn,".framebufferHeight",tn+".height"),tn})):te(function(vn,rn){var tn=vn.shared;return rn.set(tn.framebuffer,".next","null"),rn.set(tn=tn.context,".framebufferWidth",tn+".drawingBufferWidth"),rn.set(tn,".framebufferHeight",tn+".drawingBufferHeight"),"null"})}if("framebuffer"in _n){var Cn=_n.framebuffer;return ee(Cn,function(vn,rn){var tn=vn.invoke(rn,Cn),fn=vn.shared,yn=fn.framebuffer;return tn=rn.def(yn,".getFramebuffer(",tn,")"),rn.set(yn,".next",tn),rn.set(fn=fn.context,".framebufferWidth",tn+"?"+tn+".width:"+fn+".drawingBufferWidth"),rn.set(fn,".framebufferHeight",tn+"?"+tn+".height:"+fn+".drawingBufferHeight"),tn})}return null}(zt)),tn=function Xt(zt,Yt){function un(Qn,pr){if(Qn in _n){var or=0|_n[Qn];return pr?Cn.offset=or:Cn.instances=or,te(function(vr,cr){return pr&&(vr.OFFSET=or),or})}if(Qn in Tn){var fr=Tn[Qn];return ee(fr,function(vr,cr){var Ar=vr.invoke(cr,fr);return pr&&(vr.OFFSET=Ar),Ar})}if(pr){if(tn)return te(function(vr,cr){return vr.OFFSET=0});if(vn)return new q(rn.thisDep,rn.contextDep,rn.propDep,function(vr,cr){return cr.def(vr.shared.vao+".currentVAO?"+vr.shared.vao+".currentVAO.offset:0")})}else if(vn)return new q(rn.thisDep,rn.contextDep,rn.propDep,function(vr,cr){return cr.def(vr.shared.vao+".currentVAO?"+vr.shared.vao+".currentVAO.instances:-1")});return null}var _n=zt.static,Tn=zt.dynamic,Cn={},vn=!1,rn=function(){if("vao"in _n){var Qn=_n.vao;return null!==Qn&&null===wt.getVAO(Qn)&&(Qn=wt.createVAO(Qn)),vn=!0,Cn.vao=Qn,te(function(or){var fr=wt.getVAO(Qn);return fr?or.link(fr):"null"})}if("vao"in Tn){vn=!0;var pr=Tn.vao;return ee(pr,function(or,fr){var vr=or.invoke(fr,pr);return fr.def(or.shared.vao+".getVAO("+vr+")")})}return null}(),tn=!1,fn=function(){if("elements"in _n){var Qn=_n.elements;if(Cn.elements=Qn,B(Qn)){var pr=Cn.elements=Ge.create(Qn,!0);Qn=Ge.getElements(pr),tn=!0}else Qn&&(Qn=Ge.getElements(Qn),tn=!0);return(pr=te(function(fr,vr){if(Qn){var cr=fr.link(Qn);return fr.ELEMENTS=cr}return fr.ELEMENTS=null})).value=Qn,pr}if("elements"in Tn){tn=!0;var or=Tn.elements;return ee(or,function(fr,vr){var cr=(Ar=fr.shared).isBufferArgs,Ar=Ar.elements,Fr=fr.invoke(vr,or),Lr=vr.def("null");return cr=vr.def(cr,"(",Fr,")"),Fr=fr.cond(cr).then(Lr,"=",Ar,".createStream(",Fr,");").else(Lr,"=",Ar,".getElements(",Fr,");"),vr.entry(Fr),vr.exit(fr.cond(cr).then(Ar,".destroyStream(",Lr,");")),fr.ELEMENTS=Lr})}return vn?new q(rn.thisDep,rn.contextDep,rn.propDep,function(fr,vr){return vr.def(fr.shared.vao+".currentVAO?"+fr.shared.elements+".getElements("+fr.shared.vao+".currentVAO.elements):null")}):null}(),yn=un("offset",!0),zn=function(){if("primitive"in _n){var Qn=_n.primitive;return Cn.primitive=Qn,te(function(or,fr){return Ie[Qn]})}if("primitive"in Tn){var pr=Tn.primitive;return ee(pr,function(or,fr){var vr=or.constants.primTypes,cr=or.invoke(fr,pr);return fr.def(vr,"[",cr,"]")})}return tn?ie(fn)?te(fn.value?function(or,fr){return fr.def(or.ELEMENTS,".primType")}:function(){return 4}):new q(fn.thisDep,fn.contextDep,fn.propDep,function(or,fr){var vr=or.ELEMENTS;return fr.def(vr,"?",vr,".primType:",4)}):vn?new q(rn.thisDep,rn.contextDep,rn.propDep,function(or,fr){return fr.def(or.shared.vao+".currentVAO?"+or.shared.vao+".currentVAO.primitive:4")}):null}(),Vn=function(){if("count"in _n){var Qn=0|_n.count;return Cn.count=Qn,te(function(){return Qn})}if("count"in Tn){var pr=Tn.count;return ee(pr,function(or,fr){return or.invoke(fr,pr)})}return tn?ie(fn)?fn?yn?new q(yn.thisDep,yn.contextDep,yn.propDep,function(or,fr){return fr.def(or.ELEMENTS,".vertCount-",or.OFFSET)}):te(function(or,fr){return fr.def(or.ELEMENTS,".vertCount")}):te(function(){return-1}):new q(fn.thisDep||yn.thisDep,fn.contextDep||yn.contextDep,fn.propDep||yn.propDep,function(or,fr){var vr=or.ELEMENTS;return or.OFFSET?fr.def(vr,"?",vr,".vertCount-",or.OFFSET,":-1"):fr.def(vr,"?",vr,".vertCount:-1")}):vn?new q(rn.thisDep,rn.contextDep,rn.propDep,function(or,fr){return fr.def(or.shared.vao,".currentVAO?",or.shared.vao,".currentVAO.count:-1")}):null}(),Xn=un("instances",!1);return{elements:fn,primitive:zn,count:Vn,instances:Xn,offset:yn,vao:rn,vaoActive:vn,elementsActive:tn,static:Cn}}(zt),fn=(fr=(pr=zt).static,vr=pr.dynamic,cr={},Wn.forEach(function(Ar){function Fr(xr,Pr){if(Ar in fr){var qr=xr(fr[Ar]);cr[Lr]=te(function(){return qr})}else if(Ar in vr){var Qr=vr[Ar];cr[Lr]=ee(Qr,function(Fi,ta){return Pr(Fi,ta,Fi.invoke(ta,Qr))})}}var Lr=Bt(Ar);switch(Ar){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return Fr(function(xr){return xr},function(xr,Pr,qr){return qr});case"depth.func":return Fr(function(xr){return Ut[xr]},function(xr,Pr,qr){return Pr.def(xr.constants.compareFuncs,"[",qr,"]")});case"depth.range":return Fr(function(xr){return xr},function(xr,Pr,qr){return[Pr.def("+",qr,"[0]"),Pr=Pr.def("+",qr,"[1]")]});case"blend.func":return Fr(function(xr){return[jt["srcRGB"in xr?xr.srcRGB:xr.src],jt["dstRGB"in xr?xr.dstRGB:xr.dst],jt["srcAlpha"in xr?xr.srcAlpha:xr.src],jt["dstAlpha"in xr?xr.dstAlpha:xr.dst]]},function(xr,Pr,qr){function Qr(Gi,pa){return Pr.def('"',Gi,pa,'" in ',qr,"?",qr,".",Gi,pa,":",qr,".",Gi)}xr=xr.constants.blendFuncs;var Fi=Qr("src","RGB"),ta=Qr("dst","RGB"),Ta=(Fi=Pr.def(xr,"[",Fi,"]"),Pr.def(xr,"[",Qr("src","Alpha"),"]"));return[Fi,ta=Pr.def(xr,"[",ta,"]"),Ta,xr=Pr.def(xr,"[",Qr("dst","Alpha"),"]")]});case"blend.equation":return Fr(function(xr){return"string"==typeof xr?[Sr[xr],Sr[xr]]:"object"==typeof xr?[Sr[xr.rgb],Sr[xr.alpha]]:void 0},function(xr,Pr,qr){var Qr=xr.constants.blendEquations,Fi=Pr.def(),ta=Pr.def();return(xr=xr.cond("typeof ",qr,'==="string"')).then(Fi,"=",ta,"=",Qr,"[",qr,"];"),xr.else(Fi,"=",Qr,"[",qr,".rgb];",ta,"=",Qr,"[",qr,".alpha];"),Pr(xr),[Fi,ta]});case"blend.color":return Fr(function(xr){return _(4,function(Pr){return+xr[Pr]})},function(xr,Pr,qr){return _(4,function(Qr){return Pr.def("+",qr,"[",Qr,"]")})});case"stencil.mask":return Fr(function(xr){return 0|xr},function(xr,Pr,qr){return Pr.def(qr,"|0")});case"stencil.func":return Fr(function(xr){return[Ut[xr.cmp||"keep"],xr.ref||0,"mask"in xr?xr.mask:-1]},function(xr,Pr,qr){return[xr=Pr.def('"cmp" in ',qr,"?",xr.constants.compareFuncs,"[",qr,".cmp]",":",7680),Pr.def(qr,".ref|0"),Pr=Pr.def('"mask" in ',qr,"?",qr,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return Fr(function(xr){return["stencil.opBack"===Ar?1029:1028,Rt[xr.fail||"keep"],Rt[xr.zfail||"keep"],Rt[xr.zpass||"keep"]]},function(xr,Pr,qr){function Qr(ta){return Pr.def('"',ta,'" in ',qr,"?",Fi,"[",qr,".",ta,"]:",7680)}var Fi=xr.constants.stencilOps;return["stencil.opBack"===Ar?1029:1028,Qr("fail"),Qr("zfail"),Qr("zpass")]});case"polygonOffset.offset":return Fr(function(xr){return[0|xr.factor,0|xr.units]},function(xr,Pr,qr){return[Pr.def(qr,".factor|0"),Pr=Pr.def(qr,".units|0")]});case"cull.face":return Fr(function(xr){var Pr=0;return"front"===xr?Pr=1028:"back"===xr&&(Pr=1029),Pr},function(xr,Pr,qr){return Pr.def(qr,'==="front"?',1028,":",1029)});case"frontFace":return Fr(function(xr){return Je[xr]},function(xr,Pr,qr){return Pr.def(qr+'==="cw"?2304:2305')});case"colorMask":return Fr(function(xr){return xr.map(function(Pr){return!!Pr})},function(xr,Pr,qr){return _(4,function(Qr){return"!!"+qr+"["+Qr+"]"})});case"sample.coverage":return Fr(function(xr){return["value"in xr?xr.value:1,!!xr.invert]},function(xr,Pr,qr){return[Pr.def('"value" in ',qr,"?+",qr,".value:1"),Pr=Pr.def("!!",qr,".invert")]})}}),cr),yn=function an(zt,Yt,un){function _n(fn){if(fn in Tn){var yn=$e.id(Tn[fn]);return(fn=te(function(){return yn})).id=yn,fn}if(fn in Cn){var zn=Cn[fn];return ee(zn,function(Vn,Xn){var Qn=Vn.invoke(Xn,zn);return Xn.def(Vn.shared.strings,".id(",Qn,")")})}return null}var Tn=zt.static,Cn=zt.dynamic,vn=_n("frag"),rn=_n("vert"),tn=null;return ie(vn)&&ie(rn)?(tn=kt.program(rn.id,vn.id,null,un),zt=te(function(fn,yn){return fn.link(tn)})):zt=new q(vn&&vn.thisDep||rn&&rn.thisDep,vn&&vn.contextDep||rn&&rn.contextDep,vn&&vn.propDep||rn&&rn.propDep,function(fn,yn){var zn,Vn,Xn=fn.shared.shader;return zn=vn?vn.append(fn,yn):yn.def(Xn,".","frag"),Vn=rn?rn.append(fn,yn):yn.def(Xn,".","vert"),yn.def(Xn+".program("+Vn+","+zn+")")}),{frag:vn,vert:rn,progVar:zt,program:tn}}(zt,0,vn);Cn("viewport"),Cn(Bt("scissor.box"));var zn,Vn=0<Object.keys(fn).length;if((zn={framebuffer:zn,draw:tn,shader:yn,state:fn,dirty:Vn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(pr){var or,fr=pr.static;if(pr=pr.dynamic,"profile"in fr){var vr=!!fr.profile;(or=te(function(Ar,Fr){return vr})).enable=vr}else if("profile"in pr){var cr=pr.profile;or=ee(cr,function(Ar,Fr){return Ar.invoke(Fr,cr)})}return or}(zt),zn.uniforms=function(pr,or){var fr=pr.static,vr=pr.dynamic,cr={};return Object.keys(fr).forEach(function(Ar){var Fr,Lr=fr[Ar];if("number"==typeof Lr||"boolean"==typeof Lr)Fr=te(function(){return Lr});else if("function"==typeof Lr){var xr=Lr._reglType;"texture2d"===xr||"textureCube"===xr?Fr=te(function(Pr){return Pr.link(Lr)}):"framebuffer"!==xr&&"framebufferCube"!==xr||(Fr=te(function(Pr){return Pr.link(Lr.color[0])}))}else y(Lr)&&(Fr=te(function(Pr){return Pr.global.def("[",_(Lr.length,function(qr){return Lr[qr]}),"]")}));Fr.value=Lr,cr[Ar]=Fr}),Object.keys(vr).forEach(function(Ar){var Fr=vr[Ar];cr[Ar]=ee(Fr,function(Lr,xr){return Lr.invoke(xr,Fr)})}),cr}(un),zn.drawVAO=zn.scopeVAO=tn.vao,!zn.drawVAO&&yn.program&&!vn&&pt.angle_instanced_arrays&&tn.static.elements){var Xn=!0;if(zt=yn.program.attributes.map(function(pr){return pr=Yt.static[pr],Xn=Xn&&!!pr,pr}),Xn&&0<zt.length){var Qn=wt.getVAO(wt.createVAO({attributes:zt,elements:tn.static.elements}));zn.drawVAO=new q(null,null,null,function(pr,or){return pr.link(Qn)}),zn.useVAO=!0}}return vn?zn.useVAO=!0:zn.attributes=function Gn(zt,Yt){var un=zt.static,_n=zt.dynamic,Tn={};return Object.keys(un).forEach(function(Cn){var vn=un[Cn],rn=$e.id(Cn),tn=new nr;if(B(vn))tn.state=1,tn.buffer=Ve.getBuffer(Ve.create(vn,34962,!1,!0)),tn.type=0;else if(yn=Ve.getBuffer(vn))tn.state=1,tn.buffer=yn,tn.type=0;else if("constant"in vn){var fn=vn.constant;tn.buffer="null",tn.state=2,"number"==typeof fn?tn.x=fn:it.forEach(function(or,fr){fr<fn.length&&(tn[or]=fn[fr])})}else{var yn=B(vn.buffer)?Ve.getBuffer(Ve.create(vn.buffer,34962,!1,!0)):Ve.getBuffer(vn.buffer),zn=0|vn.offset,Vn=0|vn.stride,Xn=0|vn.size,Qn=!!vn.normalized,pr=0;"type"in vn&&(pr=Oe[vn.type]),vn=0|vn.divisor,tn.buffer=yn,tn.state=1,tn.size=Xn,tn.normalized=Qn,tn.type=pr||yn.dtype,tn.offset=zn,tn.stride=Vn,tn.divisor=vn}Tn[Cn]=te(function(or,fr){var vr=or.attribCache;if(rn in vr)return vr[rn];var cr={isStream:!1};return Object.keys(tn).forEach(function(Ar){cr[Ar]=tn[Ar]}),tn.buffer&&(cr.buffer=or.link(tn.buffer),cr.type=cr.type||cr.buffer+".dtype"),vr[rn]=cr})}),Object.keys(_n).forEach(function(Cn){var vn=_n[Cn];Tn[Cn]=ee(vn,function(rn,tn){function fn(vr){tn(Qn[vr],"=",yn,".",vr,"|0;")}var yn=rn.invoke(tn,vn),zn=rn.shared,Vn=rn.constants,Xn=zn.isBufferArgs,Qn=(zn=zn.buffer,{isStream:tn.def(!1)}),pr=new nr;pr.state=1,Object.keys(pr).forEach(function(vr){Qn[vr]=tn.def(""+pr[vr])});var or=Qn.buffer,fr=Qn.type;return tn("if(",Xn,"(",yn,")){",Qn.isStream,"=true;",or,"=",zn,".createStream(",34962,",",yn,");",fr,"=",or,".dtype;","}else{",or,"=",zn,".getBuffer(",yn,");","if(",or,"){",fr,"=",or,".dtype;",'}else if("constant" in ',yn,"){",Qn.state,"=",2,";","if(typeof "+yn+'.constant === "number"){',Qn[it[0]],"=",yn,".constant;",it.slice(1).map(function(vr){return Qn[vr]}).join("="),"=0;","}else{",it.map(function(vr,cr){return Qn[vr]+"="+yn+".constant.length>"+cr+"?"+yn+".constant["+cr+"]:0;"}).join(""),"}}else{","if(",Xn,"(",yn,".buffer)){",or,"=",zn,".createStream(",34962,",",yn,".buffer);","}else{",or,"=",zn,".getBuffer(",yn,".buffer);","}",fr,'="type" in ',yn,"?",Vn.glTypes,"[",yn,".type]:",or,".dtype;",Qn.normalized,"=!!",yn,".normalized;"),fn("size"),fn("offset"),fn("stride"),fn("divisor"),tn("}}"),tn.exit("if(",Qn.isStream,"){",zn,".destroyStream(",or,");","}"),Qn})}),Tn}(Yt),zn.context=function(pr){var or=pr.static,fr=pr.dynamic,vr={};return Object.keys(or).forEach(function(cr){var Ar=or[cr];vr[cr]=te(function(Fr,Lr){return"number"==typeof Ar||"boolean"==typeof Ar?""+Ar:Fr.link(Ar)})}),Object.keys(fr).forEach(function(cr){var Ar=fr[cr];vr[cr]=ee(Ar,function(Fr,Lr){return Fr.invoke(Lr,Ar)})}),vr}(_n),zn}function An(zt,Yt,un){var _n=zt.shared.context,Tn=zt.scope();Object.keys(un).forEach(function(Cn){Yt.save(_n,"."+Cn);var vn=un[Cn].append(zt,Yt);Array.isArray(vn)?Tn(_n,".",Cn,"=[",vn.join(),"];"):Tn(_n,".",Cn,"=",vn,";")}),Yt(Tn)}function cn(zt,Yt,un,_n){var Tn,Cn=(rn=zt.shared).gl,vn=rn.framebuffer;dn&&(Tn=Yt.def(rn.extensions,".webgl_draw_buffers"));var rn=(tn=zt.constants).drawBuffer,tn=tn.backBuffer;zt=un?un.append(zt,Yt):Yt.def(vn,".next"),_n||Yt("if(",zt,"!==",vn,".cur){"),Yt("if(",zt,"){",Cn,".bindFramebuffer(",36160,",",zt,".framebuffer);"),dn&&Yt(Tn,".drawBuffersWEBGL(",rn,"[",zt,".colorAttachments.length]);"),Yt("}else{",Cn,".bindFramebuffer(",36160,",null);"),dn&&Yt(Tn,".drawBuffersWEBGL(",tn,");"),Yt("}",vn,".cur=",zt,";"),_n||Yt("}")}function bn(zt,Yt,un){var _n=zt.shared,Tn=_n.gl,Cn=zt.current,vn=zt.next,rn=_n.current,tn=_n.next,fn=zt.cond(rn,".dirty");Wn.forEach(function(yn){var zn,Vn;if(!((yn=Bt(yn))in un.state))if(yn in vn){zn=vn[yn],Vn=Cn[yn];var Xn=_(Mn[yn].length,function(Qn){return fn.def(zn,"[",Qn,"]")});fn(zt.cond(Xn.map(function(Qn,pr){return Qn+"!=="+Vn+"["+pr+"]"}).join("||")).then(Tn,".",lr[yn],"(",Xn,");",Xn.map(function(Qn,pr){return Vn+"["+pr+"]="+Qn}).join(";"),";"))}else zn=fn.def(tn,".",yn),Xn=zt.cond(zn,"!==",rn,".",yn),fn(Xn),yn in $n?Xn(zt.cond(zn).then(Tn,".enable(",$n[yn],");").else(Tn,".disable(",$n[yn],");"),rn,".",yn,"=",zn,";"):Xn(Tn,".",lr[yn],"(",zn,");",rn,".",yn,"=",zn,";")}),0===Object.keys(un.state).length&&fn(rn,".dirty=false;"),Yt(fn)}function hn(zt,Yt,un,_n){var Tn,Cn=zt.shared,vn=zt.current,rn=Cn.current,tn=Cn.gl;V(Object.keys(un)).forEach(function(fn){var yn=un[fn];if(!_n||_n(yn)){var zn=yn.append(zt,Yt);if($n[fn]){var Vn=$n[fn];ie(yn)?(Tn=zt.link(zn,{stable:!0}),Yt(zt.cond(Tn).then(tn,".enable(",Vn,");").else(tn,".disable(",Vn,");")),Yt(rn,".",fn,"=",Tn,";")):(Yt(zt.cond(zn).then(tn,".enable(",Vn,");").else(tn,".disable(",Vn,");")),Yt(rn,".",fn,"=",zn,";"))}else if(y(zn)){var Xn=vn[fn];Yt(tn,".",lr[fn],"(",zn,");",zn.map(function(Qn,pr){return Xn+"["+pr+"]="+Qn}).join(";"),";")}else ie(yn)?(Tn=zt.link(zn,{stable:!0}),Yt(tn,".",lr[fn],"(",Tn,");",rn,".",fn,"=",Tn,";")):Yt(tn,".",lr[fn],"(",zn,");",rn,".",fn,"=",zn,";")}})}function wn(zt,Yt){ln&&(zt.instancing=Yt.def(zt.shared.extensions,".angle_instanced_arrays"))}function Ln(zt,Yt,un,_n,Tn){function Cn(){return typeof performance>"u"?"Date.now()":"performance.now()"}function vn(pr){pr(fn=Yt.def(),"=",Cn(),";"),"string"==typeof Tn?pr(Vn,".count+=",Tn,";"):pr(Vn,".count++;"),St&&(_n?pr(yn=Yt.def(),"=",Qn,".getNumPendingQueries();"):pr(Qn,".beginQuery(",Vn,");"))}function rn(pr){pr(Vn,".cpuTime+=",Cn(),"-",fn,";"),St&&(_n?pr(Qn,".pushScopeStats(",yn,",",Qn,".getNumPendingQueries(),",Vn,");"):pr(Qn,".endQuery();"))}function tn(pr){var or=Yt.def(Xn,".profile");Yt(Xn,".profile=",pr,";"),Yt.exit(Xn,".profile=",or,";")}var fn,yn,zn=zt.shared,Vn=zt.stats,Xn=zn.current,Qn=zn.timer;if(un=un.profile){if(ie(un))return void(un.enable?(vn(Yt),rn(Yt.exit),tn("true")):tn("false"));tn(un=un.append(zt,Yt))}else un=Yt.def(Xn,".profile");vn(zn=zt.block()),Yt("if(",un,"){",zn,"}"),rn(zt=zt.block()),Yt.exit("if(",un,"){",zt,"}")}function Pn(zt,Yt,un,_n,Tn){var vn=zt.shared;_n.forEach(function(rn){var tn,fn=rn.name,yn=un.attributes[fn];if(yn){if(!Tn(yn))return;tn=yn.append(zt,Yt)}else{if(!Tn(et))return;var zn=zt.scopeAttrib(fn);tn={},Object.keys(new nr).forEach(function(Vn){tn[Vn]=Yt.def(zn,".",Vn)})}!function Cn(rn,tn,fn){function yn(){Yt("if(!",Qn,".buffer){",Vn,".enableVertexAttribArray(",Xn,");}");var vr,cr=fn.type;vr=fn.size?Yt.def(fn.size,"||",tn):tn,Yt("if(",Qn,".type!==",cr,"||",Qn,".size!==",vr,"||",fr.map(function(Ar){return Qn+"."+Ar+"!=="+fn[Ar]}).join("||"),"){",Vn,".bindBuffer(",34962,",",pr,".buffer);",Vn,".vertexAttribPointer(",[Xn,vr,cr,fn.normalized,fn.stride,fn.offset],");",Qn,".type=",cr,";",Qn,".size=",vr,";",fr.map(function(Ar){return Qn+"."+Ar+"="+fn[Ar]+";"}).join(""),"}"),ln&&Yt("if(",Qn,".divisor!==",cr=fn.divisor,"){",zt.instancing,".vertexAttribDivisorANGLE(",[Xn,cr],");",Qn,".divisor=",cr,";}")}function zn(){Yt("if(",Qn,".buffer){",Vn,".disableVertexAttribArray(",Xn,");",Qn,".buffer=null;","}if(",it.map(function(vr,cr){return Qn+"."+vr+"!=="+or[cr]}).join("||"),"){",Vn,".vertexAttrib4f(",Xn,",",or,");",it.map(function(vr,cr){return Qn+"."+vr+"="+or[cr]+";"}).join(""),"}")}var Vn=vn.gl,Xn=Yt.def(rn,".location"),Qn=Yt.def(vn.attributes,"[",Xn,"]"),pr=fn.buffer,or=[fn.x,fn.y,fn.z,fn.w],fr=["buffer","normalized","offset","stride"];1===(rn=fn.state)?yn():2===rn?zn():(Yt("if(",rn,"===",1,"){"),yn(),Yt("}else{"),zn(),Yt("}"))}(zt.link(rn),function(Vn){switch(Vn){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(rn.info.type),tn)})}function Nn(zt,Yt,un,_n,Tn,Cn){for(var vn,rn=zt.shared,tn=rn.gl,fn=0;fn<_n.length;++fn){var yn,zn=(Qn=_n[fn]).name,Vn=Qn.info.type,Xn=un.uniforms[zn],Qn=zt.link(Qn)+".location";if(Xn){if(!Tn(Xn))continue;if(ie(Xn)){if(zn=Xn.value,35678===Vn||35680===Vn)Yt(tn,".uniform1i(",Qn,",",(Vn=zt.link(zn._texture||zn.color[0]._texture))+".bind());"),Yt.exit(Vn,".unbind();");else if(35674===Vn||35675===Vn||35676===Vn)Xn=2,35675===Vn?Xn=3:35676===Vn&&(Xn=4),Yt(tn,".uniformMatrix",Xn,"fv(",Qn,",false,",zn=zt.global.def("new Float32Array(["+Array.prototype.slice.call(zn)+"])"),");");else{switch(Vn){case 5126:vn="1f";break;case 35664:vn="2f";break;case 35665:vn="3f";break;case 35666:vn="4f";break;case 35670:case 5124:vn="1i";break;case 35671:case 35667:vn="2i";break;case 35672:case 35668:vn="3i";break;case 35673:case 35669:vn="4i"}Yt(tn,".uniform",vn,"(",Qn,",",y(zn)?Array.prototype.slice.call(zn):zn,");")}continue}yn=Xn.append(zt,Yt)}else{if(!Tn(et))continue;yn=Yt.def(rn.uniforms,"[",$e.id(zn),"]")}switch(35678===Vn?Yt("if(",yn,"&&",yn,'._reglType==="framebuffer"){',yn,"=",yn,".color[0];","}"):35680===Vn&&Yt("if(",yn,"&&",yn,'._reglType==="framebufferCube"){',yn,"=",yn,".color[0];","}"),zn=1,Vn){case 35678:case 35680:Vn=Yt.def(yn,"._texture"),Yt(tn,".uniform1i(",Qn,",",Vn,".bind());"),Yt.exit(Vn,".unbind();");continue;case 5124:case 35670:vn="1i";break;case 35667:case 35671:vn="2i",zn=2;break;case 35668:case 35672:vn="3i",zn=3;break;case 35669:case 35673:vn="4i",zn=4;break;case 5126:vn="1f";break;case 35664:vn="2f",zn=2;break;case 35665:vn="3f",zn=3;break;case 35666:vn="4f",zn=4;break;case 35674:vn="Matrix2fv";break;case 35675:vn="Matrix3fv";break;case 35676:vn="Matrix4fv"}if("M"===vn.charAt(0)){Yt(tn,".uniform",vn,"(",Qn,","),Qn=Math.pow(Vn-35674+2,2);var pr=zt.global.def("new Float32Array(",Qn,")");Array.isArray(yn)?Yt("false,(",_(Qn,function(fr){return pr+"["+fr+"]="+yn[fr]}),",",pr,")"):Yt("false,(Array.isArray(",yn,")||",yn," instanceof Float32Array)?",yn,":(",_(Qn,function(fr){return pr+"["+fr+"]="+yn+"["+fr+"]"}),",",pr,")"),Yt(");")}else{if(1<zn){Vn=[];var or=[];for(Xn=0;Xn<zn;++Xn)Array.isArray(yn)?or.push(yn[Xn]):or.push(Yt.def(yn+"["+Xn+"]")),Cn&&Vn.push(Yt.def());Cn&&Yt("if(!",zt.batchId,"||",Vn.map(function(fr,vr){return fr+"!=="+or[vr]}).join("||"),"){",Vn.map(function(fr,vr){return fr+"="+or[vr]+";"}).join("")),Yt(tn,".uniform",vn,"(",Qn,",",or.join(","),");")}else Cn&&(Vn=Yt.def(),Yt("if(!",zt.batchId,"||",Vn,"!==",yn,"){",Vn,"=",yn,";")),Yt(tn,".uniform",vn,"(",Qn,",",yn,");");Cn&&Yt("}")}}}function jn(zt,Yt,un,_n){function Tn(cr){var Ar=Vn[cr];return Ar?Ar.append(zt,Ar.contextDep&&_n.contextDynamic||Ar.propDep?un:Yt):Yt.def(zn,".",cr)}function Cn(){function cr(){un(tn,".drawElementsInstancedANGLE(",[Qn,or,fr,pr+"<<(("+fr+"-5121)>>1)",rn],");")}function Ar(){un(tn,".drawArraysInstancedANGLE(",[Qn,pr,or,rn],");")}Xn&&"null"!==Xn?vr?cr():(un("if(",Xn,"){"),cr(),un("}else{"),Ar(),un("}")):Ar()}function vn(){function cr(){un(yn+".drawElements("+[Qn,or,fr,pr+"<<(("+fr+"-5121)>>1)"]+");")}function Ar(){un(yn+".drawArrays("+[Qn,pr,or]+");")}Xn&&"null"!==Xn?vr?cr():(un("if(",Xn,"){"),cr(),un("}else{"),Ar(),un("}")):Ar()}var rn,tn,cr,Ar,fn=zt.shared,yn=fn.gl,zn=fn.draw,Vn=_n.draw,Xn=(Ar=Yt,(cr=Vn.elements)?((cr.contextDep&&_n.contextDynamic||cr.propDep)&&(Ar=un),cr=cr.append(zt,Ar),Vn.elementsActive&&Ar("if("+cr+")"+yn+".bindBuffer(34963,"+cr+".buffer.buffer);")):(cr=Ar.def(),Ar(cr,"=",zn,".","elements",";","if(",cr,"){",yn,".bindBuffer(",34963,",",cr,".buffer.buffer);}","else if(",fn.vao,".currentVAO){",cr,"=",zt.shared.elements+".getElements("+fn.vao,".currentVAO.elements);",Un?"":"if("+cr+")"+yn+".bindBuffer(34963,"+cr+".buffer.buffer);","}")),cr),Qn=Tn("primitive"),pr=Tn("offset"),or=function(){var cr=Vn.count,Ar=Yt;return cr?((cr.contextDep&&_n.contextDynamic||cr.propDep)&&(Ar=un),cr=cr.append(zt,Ar)):cr=Ar.def(zn,".","count"),cr}();if("number"==typeof or){if(0===or)return}else un("if(",or,"){"),un.exit("}");ln&&(rn=Tn("instances"),tn=zt.instancing);var fr=Xn+".type",vr=Vn.elements&&ie(Vn.elements)&&!Vn.vaoActive;ln&&("number"!=typeof rn||0<=rn)?"string"==typeof rn?(un("if(",rn,">0){"),Cn(),un("}else if(",rn,"<0){"),vn(),un("}")):Cn():vn()}function Fn(zt,Yt,un,_n,Tn){return Tn=(Yt=gn()).proc("body",Tn),ln&&(Yt.instancing=Tn.def(Yt.shared.extensions,".angle_instanced_arrays")),zt(Yt,Tn,un,_n),Yt.compile().body}function Jn(zt,Yt,un,_n){wn(zt,Yt),un.useVAO?un.drawVAO?Yt(zt.shared.vao,".setVAO(",un.drawVAO.append(zt,Yt),");"):Yt(zt.shared.vao,".setVAO(",zt.shared.vao,".targetVAO);"):(Yt(zt.shared.vao,".setVAO(null);"),Pn(zt,Yt,un,_n.attributes,function(){return!0})),Nn(zt,Yt,un,_n.uniforms,function(){return!0},!1),jn(zt,Yt,Yt,un)}function Zn(zt,Yt,un,_n){function Tn(){return!0}zt.batchId="a1",wn(zt,Yt),Pn(zt,Yt,un,_n.attributes,Tn),Nn(zt,Yt,un,_n.uniforms,Tn,!1),jn(zt,Yt,Yt,un)}function hr(zt,Yt,un,_n){function Tn(zn){return zn.contextDep&&vn||zn.propDep}function Cn(zn){return!Tn(zn)}wn(zt,Yt);var vn=un.contextDep,rn=Yt.def(),tn=Yt.def();zt.shared.props=tn,zt.batchId=rn;var fn=zt.scope(),yn=zt.scope();Yt(fn.entry,"for(",rn,"=0;",rn,"<","a1",";++",rn,"){",tn,"=","a0","[",rn,"];",yn,"}",fn.exit),un.needsContext&&An(zt,yn,un.context),un.needsFramebuffer&&cn(zt,yn,un.framebuffer),hn(zt,yn,un.state,Tn),un.profile&&Tn(un.profile)&&Ln(zt,yn,un,!1,!0),_n?(un.useVAO?un.drawVAO?Tn(un.drawVAO)?yn(zt.shared.vao,".setVAO(",un.drawVAO.append(zt,yn),");"):fn(zt.shared.vao,".setVAO(",un.drawVAO.append(zt,fn),");"):fn(zt.shared.vao,".setVAO(",zt.shared.vao,".targetVAO);"):(fn(zt.shared.vao,".setVAO(null);"),Pn(zt,fn,un,_n.attributes,Cn),Pn(zt,yn,un,_n.attributes,Tn)),Nn(zt,fn,un,_n.uniforms,Cn,!1),Nn(zt,yn,un,_n.uniforms,Tn,!0),jn(zt,fn,yn,un)):(Yt=zt.global.def("{}"),_n=un.shader.progVar.append(zt,yn),tn=yn.def(_n,".id"),fn=yn.def(Yt,"[",tn,"]"),yn(zt.shared.gl,".useProgram(",_n,".program);","if(!",fn,"){",fn,"=",Yt,"[",tn,"]=",zt.link(function(zn){return Fn(Zn,zt,un,zn,2)}),"(",_n,");}",fn,".call(this,a0[",rn,"],",rn,");"))}function dr(zt,Yt,un){var _n=Yt.static[un];if(_n&&function(yn){if("object"==typeof yn&&!y(yn)){for(var zn=Object.keys(yn),Vn=0;Vn<zn.length;++Vn)if(ce.isDynamic(yn[zn[Vn]]))return!0;return!1}}(_n)){var Tn=zt.global,Cn=Object.keys(_n),vn=!1,rn=!1,tn=!1,fn=zt.global.def("{}");Cn.forEach(function(yn){var zn=_n[yn];if(ce.isDynamic(zn))"function"==typeof zn&&(zn=_n[yn]=ce.unbox(zn)),yn=ee(zn,null),vn=vn||yn.thisDep,tn=tn||yn.propDep,rn=rn||yn.contextDep;else{switch(Tn(fn,".",yn,"="),typeof zn){case"number":Tn(zn);break;case"string":Tn('"',zn,'"');break;case"object":Array.isArray(zn)&&Tn("[",zn.join(),"]");break;default:Tn(zt.link(zn))}Tn(";")}}),Yt.dynamic[un]=new ce.DynamicVariable(4,{thisDep:vn,contextDep:rn,propDep:tn,ref:fn,append:function(yn,zn){Cn.forEach(function(Vn){var Xn=_n[Vn];ce.isDynamic(Xn)&&(Xn=yn.invoke(zn,Xn),zn(fn,".",Vn,"=",Xn,";"))})}}),delete Yt.static[un]}}var nr=wt.Record,Sr={add:32774,subtract:32778,"reverse subtract":32779};pt.ext_blend_minmax&&(Sr.min=32775,Sr.max=32776);var ln=pt.angle_instanced_arrays,dn=pt.webgl_draw_buffers,Un=pt.oes_vertex_array_object,Mn={dirty:!0,profile:Nt.profile},Hn={},Wn=[],$n={},lr={};Vt("dither",3024),Vt("blend.enable",3042),nn("blend.color","blendColor",[0,0,0,0]),nn("blend.equation","blendEquationSeparate",[32774,32774]),nn("blend.func","blendFuncSeparate",[1,0,1,0]),Vt("depth.enable",2929,!0),nn("depth.func","depthFunc",513),nn("depth.range","depthRange",[0,1]),nn("depth.mask","depthMask",!0),nn("colorMask","colorMask",[!0,!0,!0,!0]),Vt("cull.enable",2884),nn("cull.face","cullFace",1029),nn("frontFace","frontFace",2305),nn("lineWidth","lineWidth",1),Vt("polygonOffset.enable",32823),nn("polygonOffset.offset","polygonOffset",[0,0]),Vt("sample.alpha",32926),Vt("sample.enable",32928),nn("sample.coverage","sampleCoverage",[1,!1]),Vt("stencil.enable",2960),nn("stencil.mask","stencilMask",-1),nn("stencil.func","stencilFunc",[519,0,-1]),nn("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),nn("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),Vt("scissor.enable",3089),nn("scissor.box","scissor",[0,0,qe.drawingBufferWidth,qe.drawingBufferHeight]),nn("viewport","viewport",[0,0,qe.drawingBufferWidth,qe.drawingBufferHeight]);var Cr={gl:qe,context:Lt,strings:$e,next:Hn,current:Mn,draw:vt,elements:Ge,buffer:Ve,shader:kt,attributes:wt.state,vao:wt,uniforms:yt,framebuffer:Qe,extensions:pt,timer:St,isBufferArgs:B},sn={primTypes:Ie,compareFuncs:Ut,blendFuncs:jt,blendEquations:Sr,stencilOps:Rt,glTypes:Oe,orientationType:Je};dn&&(sn.backBuffer=[1029],sn.drawBuffer=_(ct.maxDrawbuffers,function(zt){return 0===zt?[0]:_(zt,function(Yt){return 36064+Yt})}));var Sn=0;return{next:Hn,current:Mn,procs:function(){var zt=gn(),Yt=zt.proc("poll"),un=zt.proc("refresh"),_n=zt.block();Yt(_n),un(_n);var Tn,Cn=(tn=zt.shared).gl,vn=tn.next,rn=tn.current;_n(rn,".dirty=false;"),cn(zt,Yt),cn(zt,un,null,!0),ln&&(Tn=zt.link(ln)),pt.oes_vertex_array_object&&un(zt.link(pt.oes_vertex_array_object),".bindVertexArrayOES(null);");var tn=un.def(tn.attributes),fn=un.def(0),yn=zt.cond(fn,".buffer");yn.then(Cn,".enableVertexAttribArray(i);",Cn,".bindBuffer(",34962,",",fn,".buffer.buffer);",Cn,".vertexAttribPointer(i,",fn,".size,",fn,".type,",fn,".normalized,",fn,".stride,",fn,".offset);").else(Cn,".disableVertexAttribArray(i);",Cn,".vertexAttrib4f(i,",fn,".x,",fn,".y,",fn,".z,",fn,".w);",fn,".buffer=null;");var zn=zt.link(ct.maxAttributes,{stable:!0});return un("for(var i=0;i<",zn,";++i){",fn,"=",tn,"[i];",yn,"}"),ln&&un("for(var i=0;i<",zn,";++i){",Tn,".vertexAttribDivisorANGLE(i,",tn,"[i].divisor);","}"),un(zt.shared.vao,".currentVAO=null;",zt.shared.vao,".setVAO(",zt.shared.vao,".targetVAO);"),Object.keys($n).forEach(function(Vn){var Xn=$n[Vn],Qn=_n.def(vn,".",Vn),pr=zt.block();pr("if(",Qn,"){",Cn,".enable(",Xn,")}else{",Cn,".disable(",Xn,")}",rn,".",Vn,"=",Qn,";"),un(pr),Yt("if(",Qn,"!==",rn,".",Vn,"){",pr,"}")}),Object.keys(lr).forEach(function(Vn){var Xn,Qn,pr=lr[Vn],or=Mn[Vn],fr=zt.block();fr(Cn,".",pr,"("),y(or)?(pr=or.length,Xn=zt.global.def(vn,".",Vn),Qn=zt.global.def(rn,".",Vn),fr(_(pr,function(vr){return Xn+"["+vr+"]"}),");",_(pr,function(vr){return Qn+"["+vr+"]="+Xn+"["+vr+"];"}).join("")),Yt("if(",_(pr,function(vr){return Xn+"["+vr+"]!=="+Qn+"["+vr+"]"}).join("||"),"){",fr,"}")):(Xn=_n.def(vn,".",Vn),Qn=_n.def(rn,".",Vn),fr(Xn,");",rn,".",Vn,"=",Xn,";"),Yt("if(",Xn,"!==",Qn,"){",fr,"}")),un(fr)}),zt.compile()}(),compile:function(zt,Yt,un,_n,Tn){var Cn=gn();Cn.stats=Cn.link(Tn),Object.keys(Yt.static).forEach(function(rn){dr(Cn,Yt,rn)}),Pt.forEach(function(rn){dr(Cn,zt,rn)});var vn=Dn(zt,Yt,un,_n);return vn.shader.program&&(vn.shader.program.attributes.sort(function(rn,tn){return rn.name<tn.name?-1:1}),vn.shader.program.uniforms.sort(function(rn,tn){return rn.name<tn.name?-1:1})),function(rn,tn){var fn=rn.proc("draw",1);wn(rn,fn),An(rn,fn,tn.context),cn(rn,fn,tn.framebuffer),bn(rn,fn,tn),hn(rn,fn,tn.state),Ln(rn,fn,tn,!1,!0);var yn=tn.shader.progVar.append(rn,fn);if(fn(rn.shared.gl,".useProgram(",yn,".program);"),tn.shader.program)Jn(rn,fn,tn,tn.shader.program);else{fn(rn.shared.vao,".setVAO(null);");var zn=rn.global.def("{}"),Vn=fn.def(yn,".id"),Xn=fn.def(zn,"[",Vn,"]");fn(rn.cond(Xn).then(Xn,".call(this,a0);").else(Xn,"=",zn,"[",Vn,"]=",rn.link(function(Qn){return Fn(Jn,rn,tn,Qn,1)}),"(",yn,");",Xn,".call(this,a0);"))}0<Object.keys(tn.state).length&&fn(rn.shared.current,".dirty=true;"),rn.shared.vao&&fn(rn.shared.vao,".setVAO(null);")}(Cn,vn),function rr(zt,Yt){function un(rn){var tn=Yt.shader[rn];tn&&(tn=tn.append(zt,_n),isNaN(tn)?_n.set(Tn.shader,"."+rn,tn):_n.set(Tn.shader,"."+rn,zt.link(tn,{stable:!0})))}var _n=zt.proc("scope",3);zt.batchId="a2";var Tn=zt.shared,Cn=Tn.current;if(An(zt,_n,Yt.context),Yt.framebuffer&&Yt.framebuffer.append(zt,_n),V(Object.keys(Yt.state)).forEach(function(rn){var tn=Yt.state[rn],fn=tn.append(zt,_n);y(fn)?fn.forEach(function(yn,zn){isNaN(yn)?_n.set(zt.next[rn],"["+zn+"]",yn):_n.set(zt.next[rn],"["+zn+"]",zt.link(yn,{stable:!0}))}):ie(tn)?_n.set(Tn.next,"."+rn,zt.link(fn,{stable:!0})):_n.set(Tn.next,"."+rn,fn)}),Ln(zt,_n,Yt,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(rn){var tn=Yt.draw[rn];tn&&(tn=tn.append(zt,_n),isNaN(tn)?_n.set(Tn.draw,"."+rn,tn):_n.set(Tn.draw,"."+rn,zt.link(tn),{stable:!0}))}),Object.keys(Yt.uniforms).forEach(function(rn){var tn=Yt.uniforms[rn].append(zt,_n);Array.isArray(tn)&&(tn="["+tn.map(function(fn){return isNaN(fn)?fn:zt.link(fn,{stable:!0})})+"]"),_n.set(Tn.uniforms,"["+zt.link($e.id(rn),{stable:!0})+"]",tn)}),Object.keys(Yt.attributes).forEach(function(rn){var tn=Yt.attributes[rn].append(zt,_n),fn=zt.scopeAttrib(rn);Object.keys(new nr).forEach(function(yn){_n.set(fn,"."+yn,tn[yn])})}),Yt.scopeVAO){var vn=Yt.scopeVAO.append(zt,_n);isNaN(vn)?_n.set(Tn.vao,".targetVAO",vn):_n.set(Tn.vao,".targetVAO",zt.link(vn,{stable:!0}))}un("vert"),un("frag"),0<Object.keys(Yt.state).length&&(_n(Cn,".dirty=true;"),_n.exit(Cn,".dirty=true;")),_n("a1(",zt.shared.context,",a0,",zt.batchId,");")}(Cn,vn),function(rn,tn){function fn(or){return or.contextDep&&zn||or.propDep}var yn=rn.proc("batch",2);rn.batchId="0",wn(rn,yn);var zn=!1,Vn=!0;Object.keys(tn.context).forEach(function(or){zn=zn||tn.context[or].propDep}),zn||(An(rn,yn,tn.context),Vn=!1);var Xn=!1;if((Qn=tn.framebuffer)?(Qn.propDep?zn=Xn=!0:Qn.contextDep&&zn&&(Xn=!0),Xn||cn(rn,yn,Qn)):cn(rn,yn,null),tn.state.viewport&&tn.state.viewport.propDep&&(zn=!0),bn(rn,yn,tn),hn(rn,yn,tn.state,function(or){return!fn(or)}),tn.profile&&fn(tn.profile)||Ln(rn,yn,tn,!1,"a1"),tn.contextDep=zn,tn.needsContext=Vn,tn.needsFramebuffer=Xn,(Vn=tn.shader.progVar).contextDep&&zn||Vn.propDep)hr(rn,yn,tn,null);else if(Vn=Vn.append(rn,yn),yn(rn.shared.gl,".useProgram(",Vn,".program);"),tn.shader.program)hr(rn,yn,tn,tn.shader.program);else{yn(rn.shared.vao,".setVAO(null);");var Qn=rn.global.def("{}"),pr=(Xn=yn.def(Vn,".id"),yn.def(Qn,"[",Xn,"]"));yn(rn.cond(pr).then(pr,".call(this,a0,a1);").else(pr,"=",Qn,"[",Xn,"]=",rn.link(function(or){return Fn(hr,rn,tn,or,2)}),"(",Vn,");",pr,".call(this,a0,a1);"))}0<Object.keys(tn.state).length&&yn(rn.shared.current,".dirty=true;"),rn.shared.vao&&yn(rn.shared.vao,".setVAO(null);")}(Cn,vn),X(Cn.compile(),{destroy:function(){vn.shader.program.destroy()}})}}}function J(qe,$e){for(var pt=0;pt<qe.length;++pt)if(qe[pt]===$e)return pt;return-1}var X=function(qe,$e){for(var pt=Object.keys($e),ct=0;ct<pt.length;++ct)qe[pt[ct]]=$e[pt[ct]];return qe},ae=0,ce={DynamicVariable:F,define:function(qe,$e){return new F(qe,M($e+""))},isDynamic:function(qe){return"function"==typeof qe&&!qe._reglType||qe instanceof F},unbox:function qe($e,pt){return"function"==typeof $e?new F(0,$e):"number"==typeof $e||"boolean"==typeof $e?new F(5,$e):Array.isArray($e)?new F(6,$e.map(function(ct,Ve){return qe(ct,pt+"["+Ve+"]")})):$e instanceof F?$e:void 0},accessor:M},le={next:"function"==typeof requestAnimationFrame?function(qe){return requestAnimationFrame(qe)}:function(qe){return setTimeout(qe,16)},cancel:"function"==typeof cancelAnimationFrame?function(qe){return cancelAnimationFrame(qe)}:clearTimeout},pe=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},we=l();we.zero=l();var ye=function(qe){return qe instanceof Uint8Array||qe instanceof Uint16Array||qe instanceof Uint32Array||qe instanceof Int8Array||qe instanceof Int16Array||qe instanceof Int32Array||qe instanceof Float32Array||qe instanceof Float64Array||qe instanceof Uint8ClampedArray},ve=function(qe){return Object.keys(qe).map(function($e){return qe[$e]})},xe={shape:function(qe){for(var $e=[];qe.length;qe=qe[0])$e.push(qe.length);return $e},flatten:function(qe,$e,pt,ct){var Ve=1;if($e.length)for(var Ge=0;Ge<$e.length;++Ge)Ve*=$e[Ge];else Ve=0;switch(pt=ct||we.allocType(pt,Ve),$e.length){case 0:break;case 1:for(ct=$e[0],$e=0;$e<ct;++$e)pt[$e]=qe[$e];break;case 2:for(ct=$e[0],$e=$e[1],Ge=Ve=0;Ge<ct;++Ge)for(var ut=qe[Ge],Qe=0;Qe<$e;++Qe)pt[Ve++]=ut[Qe];break;case 3:i(qe,$e[0],$e[1],$e[2],pt,0);break;default:r(qe,$e,0,pt,0)}return pt}},Ce={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Oe={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},be={dynamic:35048,stream:35040,static:35044},ue=xe.flatten,se=xe.shape,ge=[];ge[5120]=1,ge[5122]=2,ge[5124]=4,ge[5121]=1,ge[5123]=2,ge[5125]=4,ge[5126]=4;var Ie={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},ke=new Float32Array(1),Se=new Uint32Array(ke.buffer),Pe=[9984,9986,9985,9987],Fe=[0,6409,6410,6407,6408],Be={};Be[6409]=Be[6406]=Be[6402]=1,Be[34041]=Be[6410]=2,Be[6407]=Be[35904]=3,Be[6408]=Be[35906]=4;var me=d("HTMLCanvasElement"),Me=d("OffscreenCanvas"),Le=d("CanvasRenderingContext2D"),Ne=d("ImageBitmap"),Re=d("HTMLImageElement"),He=d("HTMLVideoElement"),Ze=Object.keys(Ce).concat([me,Me,Le,Ne,Re,He]),nt=[];nt[5121]=1,nt[5126]=4,nt[36193]=2,nt[5123]=2,nt[5125]=4;var ft=[];ft[32854]=2,ft[32855]=2,ft[36194]=2,ft[34041]=4,ft[33776]=.5,ft[33777]=.5,ft[33778]=1,ft[33779]=1,ft[35986]=.5,ft[35987]=1,ft[34798]=1,ft[35840]=.5,ft[35841]=.25,ft[35842]=.5,ft[35843]=.25,ft[36196]=.5;var ht=[];ht[32854]=2,ht[32855]=2,ht[36194]=2,ht[33189]=2,ht[36168]=1,ht[34041]=4,ht[35907]=4,ht[34836]=16,ht[34842]=8,ht[34843]=6;var At=[];At[6408]=4,At[6407]=3;var _t=[];_t[5121]=1,_t[5126]=4,_t[36193]=2;var ot=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],it=["x","y","z","w"],Pt="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),jt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ut={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Rt={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Je={cw:2304,ccw:2305},et=new q(!1,!1,!1,function(){});return function(qe){function $e(){if(0===Zn.length)Jt&&Jt.update(),nr=null;else{nr=le.next($e),kt();for(var ln=Zn.length-1;0<=ln;--ln){var dn=Zn[ln];dn&&dn(Dn,null,0)}St.flush(),Jt&&Jt.update()}}function pt(){!nr&&0<Zn.length&&(nr=le.next($e))}function ct(){nr&&(le.cancel($e),nr=null)}function Ve(ln){ln.preventDefault(),ct(),hr.forEach(function(dn){dn()})}function Ge(ln){St.getError(),Nt.restore(),wn.restore(),cn.restore(),Ln.restore(),Pn.restore(),Nn.restore(),hn.restore(),Jt&&Jt.restore(),jn.procs.refresh(),pt(),rr.forEach(function(dn){dn()})}function ut(ln){function dn(zt,Yt){var un={},_n={};return Object.keys(zt).forEach(function(Tn){var Cn=zt[Tn];if(ce.isDynamic(Cn))_n[Tn]=ce.unbox(Cn,Tn);else{if(Yt&&Array.isArray(Cn))for(var vn=0;vn<Cn.length;++vn)if(ce.isDynamic(Cn[vn]))return void(_n[Tn]=ce.unbox(Cn,Tn));un[Tn]=Cn}}),{dynamic:_n,static:un}}var Un=dn(ln.context||{},!0),Mn=dn(ln.uniforms||{},!0),Hn=dn(ln.attributes||{},!1);ln=dn(function(zt){function Yt(_n){if(_n in un){var Tn=un[_n];delete un[_n],Object.keys(Tn).forEach(function(Cn){un[_n+"."+Cn]=Tn[Cn]})}}var un=X({},zt);return delete un.uniforms,delete un.attributes,delete un.context,delete un.vao,"stencil"in un&&un.stencil.op&&(un.stencil.opBack=un.stencil.opFront=un.stencil.op,delete un.stencil.op),Yt("blend"),Yt("depth"),Yt("cull"),Yt("stencil"),Yt("polygonOffset"),Yt("scissor"),Yt("sample"),"vao"in zt&&(un.vao=zt.vao),un}(ln),!1);var Wn={gpuTime:0,cpuTime:0,count:0},$n=jn.compile(ln,Hn,Mn,Un,Wn),lr=$n.draw,Cr=$n.batch,sn=$n.scope,Sn=[];return X(function(zt,Yt){var un;if("function"==typeof zt)return sn.call(this,null,zt,0);if("function"==typeof Yt)if("number"==typeof zt)for(un=0;un<zt;++un)sn.call(this,null,Yt,un);else{if(!Array.isArray(zt))return sn.call(this,zt,Yt,0);for(un=0;un<zt.length;++un)sn.call(this,zt[un],Yt,un)}else if("number"==typeof zt){if(0<zt)return Cr.call(this,function(_n){for(;Sn.length<_n;)Sn.push(null);return Sn}(0|zt),0|zt)}else{if(!Array.isArray(zt))return lr.call(this,zt);if(zt.length)return Cr.call(this,zt,zt.length)}},{stats:Wn,destroy:function(){$n.destroy()}})}function Qe(ln,dn){var Un=0;jn.procs.poll();var Mn=dn.color;Mn&&(St.clearColor(+Mn[0]||0,+Mn[1]||0,+Mn[2]||0,+Mn[3]||0),Un|=16384),"depth"in dn&&(St.clearDepth(+dn.depth),Un|=256),"stencil"in dn&&(St.clearStencil(0|dn.stencil),Un|=1024),St.clear(Un)}function yt(ln){return Zn.push(ln),pt(),{cancel:function(){var dn=J(Zn,ln);Zn[dn]=function Un(){var Mn=J(Zn,Un);Zn[Mn]=Zn[Zn.length-1],--Zn.length,0>=Zn.length&&ct()}}}}function wt(){var ln=Fn.viewport,dn=Fn.scissor_box;ln[0]=ln[1]=dn[0]=dn[1]=0,Dn.viewportWidth=Dn.framebufferWidth=Dn.drawingBufferWidth=ln[2]=dn[2]=St.drawingBufferWidth,Dn.viewportHeight=Dn.framebufferHeight=Dn.drawingBufferHeight=ln[3]=dn[3]=St.drawingBufferHeight}function kt(){Dn.tick+=1,Dn.time=Lt(),wt(),jn.procs.poll()}function vt(){Ln.refresh(),wt(),jn.procs.refresh(),Jt&&Jt.update()}function Lt(){return(pe()-an)/1e3}if(!(qe=function T(qe){var $e,pt,ct,Ve,Ge=qe||{};qe={};var ut=[],Qe=[],yt=typeof window>"u"?1:window.devicePixelRatio,wt=!1,kt={},vt=function(St){},Lt=function(){};if("string"==typeof Ge?$e=document.querySelector(Ge):"object"==typeof Ge&&("string"==typeof Ge.nodeName&&"function"==typeof Ge.appendChild&&"function"==typeof Ge.getBoundingClientRect?$e=Ge:"function"==typeof Ge.drawArrays||"function"==typeof Ge.drawElements?ct=(Ve=Ge).canvas:("gl"in Ge?Ve=Ge.gl:"canvas"in Ge?ct=o(Ge.canvas):"container"in Ge&&(pt=o(Ge.container)),"attributes"in Ge&&(qe=Ge.attributes),"extensions"in Ge&&(ut=k(Ge.extensions)),"optionalExtensions"in Ge&&(Qe=k(Ge.optionalExtensions)),"onDone"in Ge&&(vt=Ge.onDone),"profile"in Ge&&(wt=!!Ge.profile),"pixelRatio"in Ge&&(yt=+Ge.pixelRatio),"cachedCode"in Ge&&(kt=Ge.cachedCode))),$e&&("canvas"===$e.nodeName.toLowerCase()?ct=$e:pt=$e),!Ve){if(!ct){if(!($e=function(St,Ot,Nt){function Bt(){var gn=window.innerWidth,Jt=window.innerHeight;St!==document.body&&(gn=(Jt=nn.getBoundingClientRect()).right-Jt.left,Jt=Jt.bottom-Jt.top),nn.width=Nt*gn,nn.height=Nt*Jt}var Vt,nn=document.createElement("canvas");return X(nn.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),St.appendChild(nn),St===document.body&&(nn.style.position="absolute",X(St.style,{margin:0,padding:0})),St!==document.body&&"function"==typeof ResizeObserver?(Vt=new ResizeObserver(function(){setTimeout(Bt)})).observe(St):window.addEventListener("resize",Bt,!1),Bt(),{canvas:nn,onDestroy:function(){Vt?Vt.disconnect():window.removeEventListener("resize",Bt),St.removeChild(nn)}}}(pt||document.body,0,yt)))return null;ct=$e.canvas,Lt=$e.onDestroy}void 0===qe.premultipliedAlpha&&(qe.premultipliedAlpha=!0),Ve=function(St,Ot){function Nt(Bt){try{return St.getContext(Bt,Ot)}catch{return null}}return Nt("webgl")||Nt("experimental-webgl")||Nt("webgl-experimental")}(ct,qe)}return Ve?{gl:Ve,canvas:ct,container:pt,extensions:ut,optionalExtensions:Qe,pixelRatio:yt,profile:wt,cachedCode:kt,onDone:vt,onDestroy:Lt}:(Lt(),vt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}(qe)))return null;var St=qe.gl,Ot=St.getContextAttributes();St.isContextLost();var Nt=function(ln,dn){function Un($n){var lr;$n=$n.toLowerCase();try{lr=Mn[$n]=ln.getExtension($n)}catch{}return!!lr}for(var Mn={},Hn=0;Hn<dn.extensions.length;++Hn){var Wn=dn.extensions[Hn];if(!Un(Wn))return dn.onDestroy(),dn.onDone('"'+Wn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return dn.optionalExtensions.forEach(Un),{extensions:Mn,restore:function(){Object.keys(Mn).forEach(function($n){if(Mn[$n]&&!Un($n))throw Error("(regl): error restoring extension "+$n)})}}}(St,qe);if(!Nt)return null;var ln,dn,Bt=(ln={"":0},dn=[""],{id:function(Un){var Mn=ln[Un];return Mn||(Mn=ln[Un]=dn.length,dn.push(Un),Mn)},str:function(Un){return dn[Un]}}),Vt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},nn=qe.cachedCode||{},gn=Nt.extensions,Jt=function(ln,dn){function Un(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function Mn(Sn,zt,Yt){var un=$n.pop()||new Un;un.startQueryIndex=Sn,un.endQueryIndex=zt,un.sum=0,un.stats=Yt,lr.push(un)}if(!dn.ext_disjoint_timer_query)return null;var Hn=[],Wn=[],$n=[],lr=[],Cr=[],sn=[];return{beginQuery:function(Sn){var zt=Hn.pop()||dn.ext_disjoint_timer_query.createQueryEXT();dn.ext_disjoint_timer_query.beginQueryEXT(35007,zt),Wn.push(zt),Mn(Wn.length-1,Wn.length,Sn)},endQuery:function(){dn.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:Mn,update:function(){var Sn,zt;if(0!==(Sn=Wn.length)){sn.length=Math.max(sn.length,Sn+1),Cr.length=Math.max(Cr.length,Sn+1),Cr[0]=0;var Yt=sn[0]=0;for(zt=Sn=0;zt<Wn.length;++zt){var un=Wn[zt];dn.ext_disjoint_timer_query.getQueryObjectEXT(un,34919)?(Yt+=dn.ext_disjoint_timer_query.getQueryObjectEXT(un,34918),Hn.push(un)):Wn[Sn++]=un,Cr[zt+1]=Yt,sn[zt+1]=Sn}for(Wn.length=Sn,zt=Sn=0;zt<lr.length;++zt){var _n=(Yt=lr[zt]).startQueryIndex;Yt.sum+=Cr[un=Yt.endQueryIndex]-Cr[_n],(un=sn[un])===(_n=sn[_n])?(Yt.stats.gpuTime+=Yt.sum/1e6,$n.push(Yt)):(Yt.startQueryIndex=_n,Yt.endQueryIndex=un,lr[Sn++]=Yt)}lr.length=Sn}},getNumPendingQueries:function(){return Wn.length},clear:function(){Hn.push.apply(Hn,Wn);for(var Sn=0;Sn<Hn.length;Sn++)dn.ext_disjoint_timer_query.deleteQueryEXT(Hn[Sn]);Wn.length=0,Hn.length=0},restore:function(){Wn.length=0,Hn.length=0}}}(0,gn),an=pe(),Xt=St.drawingBufferWidth,Gn=St.drawingBufferHeight,Dn={tick:0,time:0,viewportWidth:Xt,viewportHeight:Gn,framebufferWidth:Xt,framebufferHeight:Gn,drawingBufferWidth:Xt,drawingBufferHeight:Gn,pixelRatio:qe.pixelRatio},An=(Xt={elements:null,primitive:4,count:-1,offset:0,instances:-1},function(qe,$e){var pt=1;$e.ext_texture_filter_anisotropic&&(pt=qe.getParameter(34047));var ct=1,Ve=1;$e.webgl_draw_buffers&&(ct=qe.getParameter(34852),Ve=qe.getParameter(36063));var Ge=!!$e.oes_texture_float;if(Ge){Ge=qe.createTexture(),qe.bindTexture(3553,Ge),qe.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var ut=qe.createFramebuffer();if(qe.bindFramebuffer(36160,ut),qe.framebufferTexture2D(36160,36064,3553,Ge,0),qe.bindTexture(3553,null),36053!==qe.checkFramebufferStatus(36160))Ge=!1;else{qe.viewport(0,0,1,1),qe.clearColor(1,0,0,1),qe.clear(16384);var Qe=we.allocType(5126,4);qe.readPixels(0,0,1,1,6408,5126,Qe),qe.getError()?Ge=!1:(qe.deleteFramebuffer(ut),qe.deleteTexture(Ge),Ge=1===Qe[0]),we.freeType(Qe)}}return Qe=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(Qe=qe.createTexture(),ut=we.allocType(5121,36),qe.activeTexture(33984),qe.bindTexture(34067,Qe),qe.texImage2D(34069,0,6408,3,3,0,6408,5121,ut),we.freeType(ut),qe.bindTexture(34067,null),qe.deleteTexture(Qe),Qe=!qe.getError()),{colorBits:[qe.getParameter(3410),qe.getParameter(3411),qe.getParameter(3412),qe.getParameter(3413)],depthBits:qe.getParameter(3414),stencilBits:qe.getParameter(3415),subpixelBits:qe.getParameter(3408),extensions:Object.keys($e).filter(function(yt){return!!$e[yt]}),maxAnisotropic:pt,maxDrawbuffers:ct,maxColorAttachments:Ve,pointSizeDims:qe.getParameter(33901),lineWidthDims:qe.getParameter(33902),maxViewportDims:qe.getParameter(3386),maxCombinedTextureUnits:qe.getParameter(35661),maxCubeMapSize:qe.getParameter(34076),maxRenderbufferSize:qe.getParameter(34024),maxTextureUnits:qe.getParameter(34930),maxTextureSize:qe.getParameter(3379),maxAttributes:qe.getParameter(34921),maxVertexUniforms:qe.getParameter(36347),maxVertexTextureUnits:qe.getParameter(35660),maxVaryingVectors:qe.getParameter(36348),maxFragmentUniforms:qe.getParameter(36349),glsl:qe.getParameter(35724),renderer:qe.getParameter(7937),vendor:qe.getParameter(7936),version:qe.getParameter(7938),readFloat:Ge,npotTextureCube:Qe}}(St,gn)),cn=function u(qe,$e,pt,ct){function Ve(vt){this.id=yt++,this.buffer=qe.createBuffer(),this.type=vt,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,pt.profile&&(this.stats={size:0})}function Ge(vt,Lt,St){vt.byteLength=Lt.byteLength,qe.bufferData(vt.type,Lt,St)}function ut(vt,Lt,St,Ot,Nt,Bt){if(vt.usage=St,Array.isArray(Lt)){if(vt.dtype=Ot||5126,0<Lt.length)if(Array.isArray(Lt[0])){Nt=se(Lt);for(var Vt=Ot=1;Vt<Nt.length;++Vt)Ot*=Nt[Vt];vt.dimension=Ot,Ge(vt,Lt=ue(Lt,Nt,vt.dtype),St),Bt?vt.persistentData=Lt:we.freeType(Lt)}else"number"==typeof Lt[0]?(vt.dimension=Nt,a(Nt=we.allocType(vt.dtype,Lt.length),Lt),Ge(vt,Nt,St),Bt?vt.persistentData=Nt:we.freeType(Nt)):ye(Lt[0])&&(vt.dimension=Lt[0].length,vt.dtype=Ot||n(Lt[0])||5126,Ge(vt,Lt=ue(Lt,[Lt.length,Lt[0].length],vt.dtype),St),Bt?vt.persistentData=Lt:we.freeType(Lt))}else if(ye(Lt))vt.dtype=Ot||n(Lt),vt.dimension=Nt,Ge(vt,Lt,St),Bt&&(vt.persistentData=new Uint8Array(new Uint8Array(Lt.buffer)));else if(t(Lt)){var nn=Lt.stride,gn=(Vt=Lt.offset,0),Jt=0,an=0,Xt=0;1===(Nt=Lt.shape).length?(gn=Nt[0],Jt=1,an=nn[0],Xt=0):2===Nt.length&&(gn=Nt[0],Jt=Nt[1],an=nn[0],Xt=nn[1]),vt.dtype=Ot||n(Lt.data)||5126,vt.dimension=Jt,s(Nt=we.allocType(vt.dtype,gn*Jt),Lt.data,gn,Jt,an,Xt,Vt),Ge(vt,Nt,St),Bt?vt.persistentData=Nt:we.freeType(Nt)}else Lt instanceof ArrayBuffer&&(vt.dtype=5121,vt.dimension=Nt,Ge(vt,Lt,St),Bt&&(vt.persistentData=new Uint8Array(new Uint8Array(Lt))))}function Qe(vt){$e.bufferCount--,ct(vt),qe.deleteBuffer(vt.buffer),vt.buffer=null,delete wt[vt.id]}var yt=0,wt={};Ve.prototype.bind=function(){qe.bindBuffer(this.type,this.buffer)},Ve.prototype.destroy=function(){Qe(this)};var kt=[];return pt.profile&&($e.getTotalBufferSize=function(){var vt=0;return Object.keys(wt).forEach(function(Lt){vt+=wt[Lt].stats.size}),vt}),{create:function(vt,Lt,St,Ot){function Nt(Vt){var nn=35044,gn=null,Jt=0,an=0,Xt=1;return Array.isArray(Vt)||ye(Vt)||t(Vt)||Vt instanceof ArrayBuffer?gn=Vt:"number"==typeof Vt?Jt=0|Vt:Vt&&("data"in Vt&&(gn=Vt.data),"usage"in Vt&&(nn=be[Vt.usage]),"type"in Vt&&(an=Oe[Vt.type]),"dimension"in Vt&&(Xt=0|Vt.dimension),"length"in Vt&&(Jt=0|Vt.length)),Bt.bind(),gn?ut(Bt,gn,nn,an,Xt,Ot):(Jt&&qe.bufferData(Bt.type,Jt,nn),Bt.dtype=an||5121,Bt.usage=nn,Bt.dimension=Xt,Bt.byteLength=Jt),pt.profile&&(Bt.stats.size=Bt.byteLength*ge[Bt.dtype]),Nt}$e.bufferCount++;var Bt=new Ve(Lt);return wt[Bt.id]=Bt,St||Nt(vt),Nt._reglType="buffer",Nt._buffer=Bt,Nt.subdata=function(Vt,nn){var gn,Jt=0|(nn||0);if(Bt.bind(),ye(Vt)||Vt instanceof ArrayBuffer)qe.bufferSubData(Bt.type,Jt,Vt);else if(Array.isArray(Vt)){if(0<Vt.length)if("number"==typeof Vt[0]){var an=we.allocType(Bt.dtype,Vt.length);a(an,Vt),qe.bufferSubData(Bt.type,Jt,an),we.freeType(an)}else(Array.isArray(Vt[0])||ye(Vt[0]))&&(gn=se(Vt),an=ue(Vt,gn,Bt.dtype),qe.bufferSubData(Bt.type,Jt,an),we.freeType(an))}else if(t(Vt)){var Xt=Vt.stride,Gn=an=0,Dn=0,An=0;1===(gn=Vt.shape).length?(an=gn[0],Gn=1,Dn=Xt[0],An=0):2===gn.length&&(an=gn[0],Gn=gn[1],Dn=Xt[0],An=Xt[1]),gn=Array.isArray(Vt.data)?Bt.dtype:n(Vt.data),s(gn=we.allocType(gn,an*Gn),Vt.data,an,Gn,Dn,An,Vt.offset),qe.bufferSubData(Bt.type,Jt,gn),we.freeType(gn)}return Nt},pt.profile&&(Nt.stats=Bt.stats),Nt.destroy=function(){Qe(Bt)},Nt},createStream:function(vt,Lt){var St=kt.pop();return St||(St=new Ve(vt)),St.bind(),ut(St,Lt,35040,0,1,!1),St},destroyStream:function(vt){kt.push(vt)},clear:function(){ve(wt).forEach(Qe),kt.forEach(Qe)},getBuffer:function(vt){return vt&&vt._buffer instanceof Ve?vt._buffer:null},restore:function(){ve(wt).forEach(function(vt){vt.buffer=qe.createBuffer(),qe.bindBuffer(vt.type,vt.buffer),qe.bufferData(vt.type,vt.persistentData||vt.byteLength,vt.usage)})},_initBuffer:ut}}(St,Vt,qe,function(ln){return hn.destroyBuffer(ln)}),bn=function f(qe,$e,pt,ct){function Ve(vt){this.id=yt++,Qe[this.id]=this,this.buffer=vt,this.primType=4,this.type=this.vertCount=0}function Ge(vt,Lt,St,Ot,Nt,Bt,Vt){var nn;if(vt.buffer.bind(),Lt?((nn=Vt)||ye(Lt)&&(!t(Lt)||ye(Lt.data))||(nn=$e.oes_element_index_uint?5125:5123),pt._initBuffer(vt.buffer,Lt,St,nn,3)):(qe.bufferData(34963,Bt,St),vt.buffer.dtype=nn||5121,vt.buffer.usage=St,vt.buffer.dimension=3,vt.buffer.byteLength=Bt),nn=Vt,!Vt){switch(vt.buffer.dtype){case 5121:case 5120:nn=5121;break;case 5123:case 5122:nn=5123;break;case 5125:case 5124:nn=5125}vt.buffer.dtype=nn}vt.type=nn,0>(Lt=Nt)&&(Lt=vt.buffer.byteLength,5123===nn?Lt>>=1:5125===nn&&(Lt>>=2)),vt.vertCount=Lt,Lt=Ot,0>Ot&&(Lt=4,1===(Ot=vt.buffer.dimension)&&(Lt=0),2===Ot&&(Lt=1),3===Ot&&(Lt=4)),vt.primType=Lt}function ut(vt){ct.elementsCount--,delete Qe[vt.id],vt.buffer.destroy(),vt.buffer=null}var Qe={},yt=0,wt={uint8:5121,uint16:5123};$e.oes_element_index_uint&&(wt.uint32=5125),Ve.prototype.bind=function(){this.buffer.bind()};var kt=[];return{create:function(vt,Lt){function St(Bt){if(Bt)if("number"==typeof Bt)Ot(Bt),Nt.primType=4,Nt.vertCount=0|Bt,Nt.type=5121;else{var Vt=null,nn=35044,gn=-1,Jt=-1,an=0,Xt=0;Array.isArray(Bt)||ye(Bt)||t(Bt)?Vt=Bt:("data"in Bt&&(Vt=Bt.data),"usage"in Bt&&(nn=be[Bt.usage]),"primitive"in Bt&&(gn=Ie[Bt.primitive]),"count"in Bt&&(Jt=0|Bt.count),"type"in Bt&&(Xt=wt[Bt.type]),"length"in Bt?an=0|Bt.length:(an=Jt,5123===Xt||5122===Xt?an*=2:5125!==Xt&&5124!==Xt||(an*=4))),Ge(Nt,Vt,nn,gn,Jt,an,Xt)}else Ot(),Nt.primType=4,Nt.vertCount=0,Nt.type=5121;return St}var Ot=pt.create(null,34963,!0),Nt=new Ve(Ot._buffer);return ct.elementsCount++,St(vt),St._reglType="elements",St._elements=Nt,St.subdata=function(Bt,Vt){return Ot.subdata(Bt,Vt),St},St.destroy=function(){ut(Nt)},St},createStream:function(vt){var Lt=kt.pop();return Lt||(Lt=new Ve(pt.create(null,34963,!0,!1)._buffer)),Ge(Lt,vt,35040,-1,-1,0,0),Lt},destroyStream:function(vt){kt.push(vt)},getElements:function(vt){return"function"==typeof vt&&vt._elements instanceof Ve?vt._elements:null},clear:function(){ve(Qe).forEach(ut)}}}(St,gn,cn,Vt),hn=function P(qe,$e,pt,ct,Ve,Ge,ut){function Qe(){this.id=++kt,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var St=$e.oes_vertex_array_object;this.vao=St?St.createVertexArrayOES():null,vt[this.id]=this,this.buffers=[]}var yt=pt.maxAttributes,wt=Array(yt);for(pt=0;pt<yt;++pt)wt[pt]=new E;var kt=0,vt={},Lt={Record:E,scope:{},state:wt,currentVAO:null,targetVAO:null,restore:$e.oes_vertex_array_object?function(){$e.oes_vertex_array_object&&ve(vt).forEach(function(St){St.refresh()})}:function(){},createVAO:function(St){function Ot(Bt){var Vt;Array.isArray(Bt)?(Vt=Bt,Nt.elements&&Nt.ownsElements&&Nt.elements.destroy(),Nt.elements=null,Nt.ownsElements=!1,Nt.offset=0,Nt.count=0,Nt.instances=-1,Nt.primitive=4):(Bt.elements?(Vt=Bt.elements,Nt.ownsElements?("function"==typeof Vt&&"elements"===Vt._reglType?Nt.elements.destroy():Nt.elements(Vt),Nt.ownsElements=!1):Ge.getElements(Bt.elements)?(Nt.elements=Bt.elements,Nt.ownsElements=!1):(Nt.elements=Ge.create(Bt.elements),Nt.ownsElements=!0)):(Nt.elements=null,Nt.ownsElements=!1),Vt=Bt.attributes,Nt.offset=0,Nt.count=-1,Nt.instances=-1,Nt.primitive=4,Nt.elements&&(Nt.count=Nt.elements._elements.vertCount,Nt.primitive=Nt.elements._elements.primType),"offset"in Bt&&(Nt.offset=0|Bt.offset),"count"in Bt&&(Nt.count=0|Bt.count),"instances"in Bt&&(Nt.instances=0|Bt.instances),"primitive"in Bt&&(Nt.primitive=Ie[Bt.primitive])),Bt={};var nn=Nt.attributes;nn.length=Vt.length;for(var gn=0;gn<Vt.length;++gn){var Jt,an=Vt[gn],Xt=nn[gn]=new E,Gn=an.data||an;Array.isArray(Gn)||ye(Gn)||t(Gn)?(Nt.buffers[gn]&&(Jt=Nt.buffers[gn],ye(Gn)&&Jt._buffer.byteLength>=Gn.byteLength?Jt.subdata(Gn):(Jt.destroy(),Nt.buffers[gn]=null)),Nt.buffers[gn]||(Jt=Nt.buffers[gn]=Ve.create(an,34962,!1,!0)),Xt.buffer=Ve.getBuffer(Jt),Xt.size=0|Xt.buffer.dimension,Xt.normalized=!1,Xt.type=Xt.buffer.dtype,Xt.offset=0,Xt.stride=0,Xt.divisor=0,Xt.state=1,Bt[gn]=1):Ve.getBuffer(an)?(Xt.buffer=Ve.getBuffer(an),Xt.size=0|Xt.buffer.dimension,Xt.normalized=!1,Xt.type=Xt.buffer.dtype,Xt.offset=0,Xt.stride=0,Xt.divisor=0,Xt.state=1):Ve.getBuffer(an.buffer)?(Xt.buffer=Ve.getBuffer(an.buffer),Xt.size=0|(+an.size||Xt.buffer.dimension),Xt.normalized=!!an.normalized||!1,Xt.type="type"in an?Oe[an.type]:Xt.buffer.dtype,Xt.offset=0|(an.offset||0),Xt.stride=0|(an.stride||0),Xt.divisor=0|(an.divisor||0),Xt.state=1):"x"in an&&(Xt.x=+an.x||0,Xt.y=+an.y||0,Xt.z=+an.z||0,Xt.w=+an.w||0,Xt.state=2)}for(Jt=0;Jt<Nt.buffers.length;++Jt)!Bt[Jt]&&Nt.buffers[Jt]&&(Nt.buffers[Jt].destroy(),Nt.buffers[Jt]=null);return Nt.refresh(),Ot}var Nt=new Qe;return ct.vaoCount+=1,Ot.destroy=function(){for(var Bt=0;Bt<Nt.buffers.length;++Bt)Nt.buffers[Bt]&&Nt.buffers[Bt].destroy();Nt.buffers.length=0,Nt.ownsElements&&(Nt.elements.destroy(),Nt.elements=null,Nt.ownsElements=!1),Nt.destroy()},Ot._vao=Nt,Ot._reglType="vao",Ot(St)},getVAO:function(St){return"function"==typeof St&&St._vao?St._vao:null},destroyBuffer:function(St){for(var Ot=0;Ot<wt.length;++Ot){var Nt=wt[Ot];Nt.buffer===St&&(qe.disableVertexAttribArray(Ot),Nt.buffer=null)}},setVAO:$e.oes_vertex_array_object?function(St){St!==Lt.currentVAO&&($e.oes_vertex_array_object.bindVertexArrayOES(St?St.vao:null),Lt.currentVAO=St)}:function(St){if(St!==Lt.currentVAO){if(St)St.bindAttrs();else{for(var Ot=$e.angle_instanced_arrays,Nt=0;Nt<wt.length;++Nt){var Bt=wt[Nt];Bt.buffer?(qe.enableVertexAttribArray(Nt),Bt.buffer.bind(),qe.vertexAttribPointer(Nt,Bt.size,Bt.type,Bt.normalized,Bt.stride,Bt.offfset),Ot&&Bt.divisor&&Ot.vertexAttribDivisorANGLE(Nt,Bt.divisor)):(qe.disableVertexAttribArray(Nt),qe.vertexAttrib4f(Nt,Bt.x,Bt.y,Bt.z,Bt.w))}qe.bindBuffer(34963,ut.elements?ut.elements.buffer.buffer:null)}Lt.currentVAO=St}},clear:$e.oes_vertex_array_object?function(){ve(vt).forEach(function(St){St.destroy()})}:function(){}};return Qe.prototype.bindAttrs=function(){for(var St=$e.angle_instanced_arrays,Ot=this.attributes,Nt=0;Nt<Ot.length;++Nt){var Bt=Ot[Nt];Bt.buffer?(qe.enableVertexAttribArray(Nt),qe.bindBuffer(34962,Bt.buffer.buffer),qe.vertexAttribPointer(Nt,Bt.size,Bt.type,Bt.normalized,Bt.stride,Bt.offset),St&&Bt.divisor&&St.vertexAttribDivisorANGLE(Nt,Bt.divisor)):(qe.disableVertexAttribArray(Nt),qe.vertexAttrib4f(Nt,Bt.x,Bt.y,Bt.z,Bt.w))}for(St=Ot.length;St<yt;++St)qe.disableVertexAttribArray(St);(St=Ge.getElements(this.elements))?qe.bindBuffer(34963,St.buffer.buffer):qe.bindBuffer(34963,null)},Qe.prototype.refresh=function(){var St=$e.oes_vertex_array_object;St&&(St.bindVertexArrayOES(this.vao),this.bindAttrs(),Lt.currentVAO=null,St.bindVertexArrayOES(null))},Qe.prototype.destroy=function(){if(this.vao){var St=$e.oes_vertex_array_object;this===Lt.currentVAO&&(Lt.currentVAO=null,St.bindVertexArrayOES(null)),St.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),vt[this.id]&&(delete vt[this.id],--ct.vaoCount)},Lt}(St,gn,An,Vt,cn,bn,Xt),wn=function I(qe,$e,pt,ct){function Ve(Ot,Nt,Bt,Vt){this.name=Ot,this.id=Nt,this.location=Bt,this.info=Vt}function Ge(Ot,Nt){for(var Bt=0;Bt<Ot.length;++Bt)if(Ot[Bt].id===Nt.id)return void(Ot[Bt].location=Nt.location);Ot.push(Nt)}function ut(Ot,Nt,Bt){if(!(nn=(Bt=35632===Ot?wt:kt)[Nt])){var Vt=$e.str(Nt),nn=qe.createShader(Ot);qe.shaderSource(nn,Vt),qe.compileShader(nn),Bt[Nt]=nn}return nn}function Qe(Ot,Nt){this.id=St++,this.fragId=Ot,this.vertId=Nt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,ct.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function yt(Ot,Nt,Bt){var Vt;Vt=ut(35632,Ot.fragId);var nn=ut(35633,Ot.vertId);if(Nt=Ot.program=qe.createProgram(),qe.attachShader(Nt,Vt),qe.attachShader(Nt,nn),Bt)for(Vt=0;Vt<Bt.length;++Vt)qe.bindAttribLocation(Nt,(nn=Bt[Vt])[0],nn[1]);qe.linkProgram(Nt),nn=qe.getProgramParameter(Nt,35718),ct.profile&&(Ot.stats.uniformsCount=nn);var gn=Ot.uniforms;for(Vt=0;Vt<nn;++Vt)if(Bt=qe.getActiveUniform(Nt,Vt))if(1<Bt.size)for(var Jt=0;Jt<Bt.size;++Jt){var an=Bt.name.replace("[0]","["+Jt+"]");Ge(gn,new Ve(an,$e.id(an),qe.getUniformLocation(Nt,an),Bt))}else Ge(gn,new Ve(Bt.name,$e.id(Bt.name),qe.getUniformLocation(Nt,Bt.name),Bt));for(nn=qe.getProgramParameter(Nt,35721),ct.profile&&(Ot.stats.attributesCount=nn),Ot=Ot.attributes,Vt=0;Vt<nn;++Vt)(Bt=qe.getActiveAttrib(Nt,Vt))&&Ge(Ot,new Ve(Bt.name,$e.id(Bt.name),qe.getAttribLocation(Nt,Bt.name),Bt))}var wt={},kt={},vt={},Lt=[],St=0;return ct.profile&&(pt.getMaxUniformsCount=function(){var Ot=0;return Lt.forEach(function(Nt){Nt.stats.uniformsCount>Ot&&(Ot=Nt.stats.uniformsCount)}),Ot},pt.getMaxAttributesCount=function(){var Ot=0;return Lt.forEach(function(Nt){Nt.stats.attributesCount>Ot&&(Ot=Nt.stats.attributesCount)}),Ot}),{clear:function(){var Ot=qe.deleteShader.bind(qe);ve(wt).forEach(Ot),wt={},ve(kt).forEach(Ot),kt={},Lt.forEach(function(Nt){qe.deleteProgram(Nt.program)}),Lt.length=0,vt={},pt.shaderCount=0},program:function(Ot,Nt,Bt,Vt){var nn=vt[Nt];nn||(nn=vt[Nt]={});var gn=nn[Ot];if(gn&&(gn.refCount++,!Vt))return gn;var Jt=new Qe(Nt,Ot);return pt.shaderCount++,yt(Jt,Bt,Vt),gn||(nn[Ot]=Jt),Lt.push(Jt),X(Jt,{destroy:function(){if(Jt.refCount--,0>=Jt.refCount){qe.deleteProgram(Jt.program);var an=Lt.indexOf(Jt);Lt.splice(an,1),pt.shaderCount--}0>=nn[Jt.vertId].refCount&&(qe.deleteShader(kt[Jt.vertId]),delete kt[Jt.vertId],delete vt[Jt.fragId][Jt.vertId]),Object.keys(vt[Jt.fragId]).length||(qe.deleteShader(wt[Jt.fragId]),delete wt[Jt.fragId],delete vt[Jt.fragId])}})},restore:function(){wt={},kt={};for(var Ot=0;Ot<Lt.length;++Ot)yt(Lt[Ot],null,Lt[Ot].attributes.map(function(Nt){return[Nt.location,Nt.name]}))},shader:ut,frag:-1,vert:-1}}(St,Bt,Vt,qe),Ln=function S(qe,$e,pt,ct,Ve,Ge,ut){function Qe(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function yt(sn,Sn){sn.internalformat=Sn.internalformat,sn.format=Sn.format,sn.type=Sn.type,sn.compressed=Sn.compressed,sn.premultiplyAlpha=Sn.premultiplyAlpha,sn.flipY=Sn.flipY,sn.unpackAlignment=Sn.unpackAlignment,sn.colorSpace=Sn.colorSpace,sn.width=Sn.width,sn.height=Sn.height,sn.channels=Sn.channels}function wt(sn,Sn){if("object"==typeof Sn&&Sn){"premultiplyAlpha"in Sn&&(sn.premultiplyAlpha=Sn.premultiplyAlpha),"flipY"in Sn&&(sn.flipY=Sn.flipY),"alignment"in Sn&&(sn.unpackAlignment=Sn.alignment),"colorSpace"in Sn&&(sn.colorSpace=jn[Sn.colorSpace]),"type"in Sn&&(sn.type=Fn[Sn.type]);var zt=sn.width,Yt=sn.height,un=sn.channels,_n=!1;"shape"in Sn?(zt=Sn.shape[0],Yt=Sn.shape[1],3===Sn.shape.length&&(un=Sn.shape[2],_n=!0)):("radius"in Sn&&(zt=Yt=Sn.radius),"width"in Sn&&(zt=Sn.width),"height"in Sn&&(Yt=Sn.height),"channels"in Sn&&(un=Sn.channels,_n=!0)),sn.width=0|zt,sn.height=0|Yt,sn.channels=0|un,zt=!1,"format"in Sn&&(Yt=sn.internalformat=Jn[zt=Sn.format],sn.format=Un[Yt],zt in Fn&&!("type"in Sn)&&(sn.type=Fn[zt]),zt in Zn&&(sn.compressed=!0),zt=!0),!_n&&zt?sn.channels=Be[sn.format]:_n&&!zt&&sn.channels!==Fe[sn.format]&&(sn.format=sn.internalformat=Fe[sn.channels])}}function kt(sn){qe.pixelStorei(37440,sn.flipY),qe.pixelStorei(37441,sn.premultiplyAlpha),qe.pixelStorei(37443,sn.colorSpace),qe.pixelStorei(3317,sn.unpackAlignment)}function vt(){Qe.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Lt(sn,Sn){var zt=null;if(v(Sn)?zt=Sn:Sn&&(wt(sn,Sn),"x"in Sn&&(sn.xOffset=0|Sn.x),"y"in Sn&&(sn.yOffset=0|Sn.y),v(Sn.data)&&(zt=Sn.data)),Sn.copy){var Yt=Ve.viewportWidth,un=Ve.viewportHeight;sn.width=sn.width||Yt-sn.xOffset,sn.height=sn.height||un-sn.yOffset,sn.needsCopy=!0}else if(zt){if(ye(zt))sn.channels=sn.channels||4,sn.data=zt,"type"in Sn||5121!==sn.type||(sn.type=0|Ce[Object.prototype.toString.call(zt)]);else if(m(zt)){switch(sn.channels=sn.channels||4,un=(Yt=zt).length,sn.type){case 5121:case 5123:case 5125:case 5126:(un=we.allocType(sn.type,un)).set(Yt),sn.data=un;break;case 36193:sn.data=c(Yt)}sn.alignment=1,sn.needsFree=!0}else if(t(zt)){Yt=zt.data,Array.isArray(Yt)||5121!==sn.type||(sn.type=0|Ce[Object.prototype.toString.call(Yt)]);var _n,Tn,Cn,vn,rn=zt.stride;3===(un=zt.shape).length?(Cn=un[2],vn=rn[2]):vn=Cn=1,_n=un[0],Tn=un[1],un=rn[0],rn=rn[1],sn.alignment=1,sn.width=_n,sn.height=Tn,sn.channels=Cn,sn.format=sn.internalformat=Fe[Cn],sn.needsFree=!0,_n=vn,zt=zt.offset;for(var tn=we.allocType(36193===sn.type?5126:sn.type,(Cn=sn.width)*(vn=sn.height)*(Tn=sn.channels)),fn=0,yn=0;yn<vn;++yn)for(var zn=0;zn<Cn;++zn)for(var Vn=0;Vn<Tn;++Vn)tn[fn++]=Yt[un*zn+rn*yn+_n*Vn+zt];b(sn,tn)}else if(x(zt)===me||x(zt)===Me||x(zt)===Le)sn.element=x(zt)===me||x(zt)===Me?zt:zt.canvas,sn.width=sn.element.width,sn.height=sn.element.height,sn.channels=4;else if(x(zt)===Ne)sn.element=zt,sn.width=zt.width,sn.height=zt.height,sn.channels=4;else if(x(zt)===Re)sn.element=zt,sn.width=zt.naturalWidth,sn.height=zt.naturalHeight,sn.channels=4;else if(x(zt)===He)sn.element=zt,sn.width=zt.videoWidth,sn.height=zt.videoHeight,sn.channels=4;else if(g(zt)){for(Yt=sn.width||zt[0].length,un=sn.height||zt.length,rn=sn.channels,rn=y(zt[0][0])?rn||zt[0][0].length:rn||1,_n=xe.shape(zt),Cn=1,vn=0;vn<_n.length;++vn)Cn*=_n[vn];Cn=we.allocType(36193===sn.type?5126:sn.type,Cn),xe.flatten(zt,_n,"",Cn),b(sn,Cn),sn.alignment=1,sn.width=Yt,sn.height=un,sn.channels=rn,sn.format=sn.internalformat=Fe[rn],sn.needsFree=!0}}else sn.width=sn.width||1,sn.height=sn.height||1,sn.channels=sn.channels||4}function St(sn,Sn,zt,Yt,un){var _n=sn.element,Tn=sn.data,Cn=sn.internalformat,vn=sn.format,rn=sn.type,tn=sn.width,fn=sn.height;kt(sn),_n?qe.texSubImage2D(Sn,un,zt,Yt,vn,rn,_n):sn.compressed?qe.compressedTexSubImage2D(Sn,un,zt,Yt,Cn,tn,fn,Tn):sn.needsCopy?(ct(),qe.copyTexSubImage2D(Sn,un,zt,Yt,sn.xOffset,sn.yOffset,tn,fn)):qe.texSubImage2D(Sn,un,zt,Yt,tn,fn,vn,rn,Tn)}function Ot(){return Mn.pop()||new vt}function Nt(sn){sn.needsFree&&we.freeType(sn.data),vt.call(sn),Mn.push(sn)}function Bt(){Qe.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function Vt(sn,Sn,zt){var Yt=sn.images[0]=Ot();sn.mipmask=1,Yt.width=sn.width=Sn,Yt.height=sn.height=zt,Yt.channels=sn.channels=4}function nn(sn,Sn){var zt=null;if(v(Sn))yt(zt=sn.images[0]=Ot(),sn),Lt(zt,Sn),sn.mipmask=1;else if(wt(sn,Sn),Array.isArray(Sn.mipmap))for(var Yt=Sn.mipmap,un=0;un<Yt.length;++un)yt(zt=sn.images[un]=Ot(),sn),zt.width>>=un,zt.height>>=un,Lt(zt,Yt[un]),sn.mipmask|=1<<un;else yt(zt=sn.images[0]=Ot(),sn),Lt(zt,Sn),sn.mipmask=1;yt(sn,sn.images[0])}function gn(sn,Sn){for(var zt=sn.images,Yt=0;Yt<zt.length&&zt[Yt];++Yt){var un=zt[Yt],_n=Sn,Tn=Yt,Cn=un.element,vn=un.data,rn=un.internalformat,tn=un.format,fn=un.type,yn=un.width,zn=un.height;kt(un),Cn?qe.texImage2D(_n,Tn,tn,tn,fn,Cn):un.compressed?qe.compressedTexImage2D(_n,Tn,rn,yn,zn,0,vn):un.needsCopy?(ct(),qe.copyTexImage2D(_n,Tn,tn,un.xOffset,un.yOffset,yn,zn,0)):qe.texImage2D(_n,Tn,tn,yn,zn,0,tn,fn,vn||null)}}function Jt(){var sn=Hn.pop()||new Bt;Qe.call(sn);for(var Sn=sn.mipmask=0;16>Sn;++Sn)sn.images[Sn]=null;return sn}function an(sn){for(var Sn=sn.images,zt=0;zt<Sn.length;++zt)Sn[zt]&&Nt(Sn[zt]),Sn[zt]=null;Hn.push(sn)}function Xt(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Gn(sn,Sn){"min"in Sn&&(sn.minFilter=Nn[Sn.min],0<=Pe.indexOf(sn.minFilter)&&!("faces"in Sn)&&(sn.genMipmaps=!0)),"mag"in Sn&&(sn.magFilter=Pn[Sn.mag]);var zt=sn.wrapS,Yt=sn.wrapT;if("wrap"in Sn){var un=Sn.wrap;"string"==typeof un?zt=Yt=Ln[un]:Array.isArray(un)&&(zt=Ln[un[0]],Yt=Ln[un[1]])}else"wrapS"in Sn&&(zt=Ln[Sn.wrapS]),"wrapT"in Sn&&(Yt=Ln[Sn.wrapT]);if(sn.wrapS=zt,sn.wrapT=Yt,"anisotropic"in Sn&&(sn.anisotropic=Sn.anisotropic),"mipmap"in Sn){switch(zt=!1,typeof Sn.mipmap){case"string":sn.mipmapHint=wn[Sn.mipmap],zt=sn.genMipmaps=!0;break;case"boolean":zt=sn.genMipmaps=Sn.mipmap;break;case"object":sn.genMipmaps=!1,zt=!0}!zt||"min"in Sn||(sn.minFilter=9984)}}function Dn(sn,Sn){qe.texParameteri(Sn,10241,sn.minFilter),qe.texParameteri(Sn,10240,sn.magFilter),qe.texParameteri(Sn,10242,sn.wrapS),qe.texParameteri(Sn,10243,sn.wrapT),$e.ext_texture_filter_anisotropic&&qe.texParameteri(Sn,34046,sn.anisotropic),sn.genMipmaps&&(qe.hint(33170,sn.mipmapHint),qe.generateMipmap(Sn))}function An(sn){Qe.call(this),this.mipmask=0,this.internalformat=6408,this.id=Wn++,this.refCount=1,this.target=sn,this.texture=qe.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Xt,ut.profile&&(this.stats={size:0})}function cn(sn){qe.activeTexture(33984),qe.bindTexture(sn.target,sn.texture)}function bn(){var sn=Cr[0];sn?qe.bindTexture(sn.target,sn.texture):qe.bindTexture(3553,null)}function hn(sn){var Sn=sn.texture,zt=sn.unit,Yt=sn.target;0<=zt&&(qe.activeTexture(33984+zt),qe.bindTexture(Yt,null),Cr[zt]=null),qe.deleteTexture(Sn),sn.texture=null,sn.params=null,sn.pixels=null,sn.refCount=0,delete $n[sn.id],Ge.textureCount--}var wn={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Ln={repeat:10497,clamp:33071,mirror:33648},Pn={nearest:9728,linear:9729},Nn=X({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Pn),jn={none:0,browser:37444},Fn={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Jn={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Zn={};$e.ext_srgb&&(Jn.srgb=35904,Jn.srgba=35906),$e.oes_texture_float&&(Fn.float32=Fn.float=5126),$e.oes_texture_half_float&&(Fn.float16=Fn["half float"]=36193),$e.webgl_depth_texture&&(X(Jn,{depth:6402,"depth stencil":34041}),X(Fn,{uint16:5123,uint32:5125,"depth stencil":34042})),$e.webgl_compressed_texture_s3tc&&X(Zn,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),$e.webgl_compressed_texture_atc&&X(Zn,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),$e.webgl_compressed_texture_pvrtc&&X(Zn,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),$e.webgl_compressed_texture_etc1&&(Zn["rgb etc1"]=36196);var hr=Array.prototype.slice.call(qe.getParameter(34467));Object.keys(Zn).forEach(function(sn){var Sn=Zn[sn];0<=hr.indexOf(Sn)&&(Jn[sn]=Sn)});var rr=Object.keys(Jn);pt.textureFormats=rr;var dr=[];Object.keys(Jn).forEach(function(sn){dr[Jn[sn]]=sn});var nr=[];Object.keys(Fn).forEach(function(sn){nr[Fn[sn]]=sn});var Sr=[];Object.keys(Pn).forEach(function(sn){Sr[Pn[sn]]=sn});var ln=[];Object.keys(Nn).forEach(function(sn){ln[Nn[sn]]=sn});var dn=[];Object.keys(Ln).forEach(function(sn){dn[Ln[sn]]=sn});var Un=rr.reduce(function(sn,Sn){var zt=Jn[Sn];return sn[zt]=6409===zt||6406===zt||6409===zt||6410===zt||6402===zt||34041===zt||$e.ext_srgb&&(35904===zt||35906===zt)?zt:32855===zt||0<=Sn.indexOf("rgba")?6408:6407,sn},{}),Mn=[],Hn=[],Wn=0,$n={},lr=pt.maxTextureUnits,Cr=Array(lr).map(function(){return null});return X(An.prototype,{bind:function(){this.bindCount+=1;var sn=this.unit;if(0>sn){for(var Sn=0;Sn<lr;++Sn){var zt=Cr[Sn];if(zt){if(0<zt.bindCount)continue;zt.unit=-1}Cr[Sn]=this,sn=Sn;break}ut.profile&&Ge.maxTextureUnits<sn+1&&(Ge.maxTextureUnits=sn+1),this.unit=sn,qe.activeTexture(33984+sn),qe.bindTexture(this.target,this.texture)}return sn},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&hn(this)}}),ut.profile&&(Ge.getTotalTextureSize=function(){var sn=0;return Object.keys($n).forEach(function(Sn){sn+=$n[Sn].stats.size}),sn}),{create2D:function(sn,Sn){function zt(un,_n){var Tn=Yt.texInfo;Xt.call(Tn);var Cn=Jt();return"number"==typeof un?Vt(Cn,0|un,"number"==typeof _n?0|_n:0|un):un?(Gn(Tn,un),nn(Cn,un)):Vt(Cn,1,1),Tn.genMipmaps&&(Cn.mipmask=(Cn.width<<1)-1),Yt.mipmask=Cn.mipmask,yt(Yt,Cn),Yt.internalformat=Cn.internalformat,zt.width=Cn.width,zt.height=Cn.height,cn(Yt),gn(Cn,3553),Dn(Tn,3553),bn(),an(Cn),ut.profile&&(Yt.stats.size=h(Yt.internalformat,Yt.type,Cn.width,Cn.height,Tn.genMipmaps,!1)),zt.format=dr[Yt.internalformat],zt.type=nr[Yt.type],zt.mag=Sr[Tn.magFilter],zt.min=ln[Tn.minFilter],zt.wrapS=dn[Tn.wrapS],zt.wrapT=dn[Tn.wrapT],zt}var Yt=new An(3553);return $n[Yt.id]=Yt,Ge.textureCount++,zt(sn,Sn),zt.subimage=function(un,_n,Tn,Cn){_n|=0,Tn|=0,Cn|=0;var vn=Ot();return yt(vn,Yt),vn.width=0,vn.height=0,Lt(vn,un),vn.width=vn.width||(Yt.width>>Cn)-_n,vn.height=vn.height||(Yt.height>>Cn)-Tn,cn(Yt),St(vn,3553,_n,Tn,Cn),bn(),Nt(vn),zt},zt.resize=function(un,_n){var Tn=0|un,Cn=0|_n||Tn;if(Tn===Yt.width&&Cn===Yt.height)return zt;zt.width=Yt.width=Tn,zt.height=Yt.height=Cn,cn(Yt);for(var vn=0;Yt.mipmask>>vn;++vn){var rn=Tn>>vn,tn=Cn>>vn;if(!rn||!tn)break;qe.texImage2D(3553,vn,Yt.format,rn,tn,0,Yt.format,Yt.type,null)}return bn(),ut.profile&&(Yt.stats.size=h(Yt.internalformat,Yt.type,Tn,Cn,!1,!1)),zt},zt._reglType="texture2d",zt._texture=Yt,ut.profile&&(zt.stats=Yt.stats),zt.destroy=function(){Yt.decRef()},zt},createCube:function(sn,Sn,zt,Yt,un,_n){function Tn(rn,tn,fn,yn,zn,Vn){var Xn,Qn=Cn.texInfo;for(Xt.call(Qn),Xn=0;6>Xn;++Xn)vn[Xn]=Jt();if("number"!=typeof rn&&rn){if("object"==typeof rn)if(tn)nn(vn[0],rn),nn(vn[1],tn),nn(vn[2],fn),nn(vn[3],yn),nn(vn[4],zn),nn(vn[5],Vn);else if(Gn(Qn,rn),wt(Cn,rn),"faces"in rn)for(rn=rn.faces,Xn=0;6>Xn;++Xn)yt(vn[Xn],Cn),nn(vn[Xn],rn[Xn]);else for(Xn=0;6>Xn;++Xn)nn(vn[Xn],rn)}else for(rn=0|rn||1,Xn=0;6>Xn;++Xn)Vt(vn[Xn],rn,rn);for(yt(Cn,vn[0]),Cn.mipmask=Qn.genMipmaps?(vn[0].width<<1)-1:vn[0].mipmask,Cn.internalformat=vn[0].internalformat,Tn.width=vn[0].width,Tn.height=vn[0].height,cn(Cn),Xn=0;6>Xn;++Xn)gn(vn[Xn],34069+Xn);for(Dn(Qn,34067),bn(),ut.profile&&(Cn.stats.size=h(Cn.internalformat,Cn.type,Tn.width,Tn.height,Qn.genMipmaps,!0)),Tn.format=dr[Cn.internalformat],Tn.type=nr[Cn.type],Tn.mag=Sr[Qn.magFilter],Tn.min=ln[Qn.minFilter],Tn.wrapS=dn[Qn.wrapS],Tn.wrapT=dn[Qn.wrapT],Xn=0;6>Xn;++Xn)an(vn[Xn]);return Tn}var Cn=new An(34067);$n[Cn.id]=Cn,Ge.cubeCount++;var vn=Array(6);return Tn(sn,Sn,zt,Yt,un,_n),Tn.subimage=function(rn,tn,fn,yn,zn){fn|=0,yn|=0,zn|=0;var Vn=Ot();return yt(Vn,Cn),Vn.width=0,Vn.height=0,Lt(Vn,tn),Vn.width=Vn.width||(Cn.width>>zn)-fn,Vn.height=Vn.height||(Cn.height>>zn)-yn,cn(Cn),St(Vn,34069+rn,fn,yn,zn),bn(),Nt(Vn),Tn},Tn.resize=function(rn){if((rn|=0)!==Cn.width){Tn.width=Cn.width=rn,Tn.height=Cn.height=rn,cn(Cn);for(var tn=0;6>tn;++tn)for(var fn=0;Cn.mipmask>>fn;++fn)qe.texImage2D(34069+tn,fn,Cn.format,rn>>fn,rn>>fn,0,Cn.format,Cn.type,null);return bn(),ut.profile&&(Cn.stats.size=h(Cn.internalformat,Cn.type,Tn.width,Tn.height,!1,!0)),Tn}},Tn._reglType="textureCube",Tn._texture=Cn,ut.profile&&(Tn.stats=Cn.stats),Tn.destroy=function(){Cn.decRef()},Tn},clear:function(){for(var sn=0;sn<lr;++sn)qe.activeTexture(33984+sn),qe.bindTexture(3553,null),Cr[sn]=null;ve($n).forEach(hn),Ge.cubeCount=0,Ge.textureCount=0},getTexture:function(sn){return null},restore:function(){for(var sn=0;sn<lr;++sn){var Sn=Cr[sn];Sn&&(Sn.bindCount=0,Sn.unit=-1,Cr[sn]=null)}ve($n).forEach(function(zt){zt.texture=qe.createTexture(),qe.bindTexture(zt.target,zt.texture);for(var Yt=0;32>Yt;++Yt)if(zt.mipmask&1<<Yt)if(3553===zt.target)qe.texImage2D(3553,Yt,zt.internalformat,zt.width>>Yt,zt.height>>Yt,0,zt.internalformat,zt.type,null);else for(var un=0;6>un;++un)qe.texImage2D(34069+un,Yt,zt.internalformat,zt.width>>Yt,zt.height>>Yt,0,zt.internalformat,zt.type,null);Dn(zt.texInfo,zt.target)})},refresh:function(){for(var sn=0;sn<lr;++sn){var Sn=Cr[sn];Sn&&(Sn.bindCount=0,Sn.unit=-1,Cr[sn]=null),qe.activeTexture(33984+sn),qe.bindTexture(3553,null),qe.bindTexture(34067,null)}}}}(St,gn,An,function(){jn.procs.poll()},Dn,Vt,qe),Pn=function(qe,$e,pt,ct,Ve){function Ge(vt){this.id=wt++,this.refCount=1,this.renderbuffer=vt,this.format=32854,this.height=this.width=0,Ve.profile&&(this.stats={size:0})}function ut(vt){var Lt=vt.renderbuffer;qe.bindRenderbuffer(36161,null),qe.deleteRenderbuffer(Lt),vt.renderbuffer=null,vt.refCount=0,delete kt[vt.id],ct.renderbufferCount--}var Qe={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};$e.ext_srgb&&(Qe.srgba=35907),$e.ext_color_buffer_half_float&&(Qe.rgba16f=34842,Qe.rgb16f=34843),$e.webgl_color_buffer_float&&(Qe.rgba32f=34836);var yt=[];Object.keys(Qe).forEach(function(vt){yt[Qe[vt]]=vt});var wt=0,kt={};return Ge.prototype.decRef=function(){0>=--this.refCount&&ut(this)},Ve.profile&&(ct.getTotalRenderbufferSize=function(){var vt=0;return Object.keys(kt).forEach(function(Lt){vt+=kt[Lt].stats.size}),vt}),{create:function(vt,Lt){function St(Nt,Bt){var Vt=0,nn=0,gn=32854;if("object"==typeof Nt&&Nt?("shape"in Nt?(Vt=0|(nn=Nt.shape)[0],nn=0|nn[1]):("radius"in Nt&&(Vt=nn=0|Nt.radius),"width"in Nt&&(Vt=0|Nt.width),"height"in Nt&&(nn=0|Nt.height)),"format"in Nt&&(gn=Qe[Nt.format])):"number"==typeof Nt?(Vt=0|Nt,nn="number"==typeof Bt?0|Bt:Vt):Nt||(Vt=nn=1),Vt!==Ot.width||nn!==Ot.height||gn!==Ot.format)return St.width=Ot.width=Vt,St.height=Ot.height=nn,Ot.format=gn,qe.bindRenderbuffer(36161,Ot.renderbuffer),qe.renderbufferStorage(36161,gn,Vt,nn),Ve.profile&&(Ot.stats.size=ht[Ot.format]*Ot.width*Ot.height),St.format=yt[Ot.format],St}var Ot=new Ge(qe.createRenderbuffer());return kt[Ot.id]=Ot,ct.renderbufferCount++,St(vt,Lt),St.resize=function(Nt,Bt){var Vt=0|Nt,nn=0|Bt||Vt;return Vt===Ot.width&&nn===Ot.height||(St.width=Ot.width=Vt,St.height=Ot.height=nn,qe.bindRenderbuffer(36161,Ot.renderbuffer),qe.renderbufferStorage(36161,Ot.format,Vt,nn),Ve.profile&&(Ot.stats.size=ht[Ot.format]*Ot.width*Ot.height)),St},St._reglType="renderbuffer",St._renderbuffer=Ot,Ve.profile&&(St.stats=Ot.stats),St.destroy=function(){Ot.decRef()},St},clear:function(){ve(kt).forEach(ut)},restore:function(){ve(kt).forEach(function(vt){vt.renderbuffer=qe.createRenderbuffer(),qe.bindRenderbuffer(36161,vt.renderbuffer),qe.renderbufferStorage(36161,vt.format,vt.width,vt.height)}),qe.bindRenderbuffer(36161,null)}}}(St,gn,0,Vt,qe),Nn=function w(qe,$e,pt,ct,Ve,Ge){function ut(An,cn,bn){this.target=An,this.texture=cn,this.renderbuffer=bn;var hn=An=0;cn?(An=cn.width,hn=cn.height):bn&&(An=bn.width,hn=bn.height),this.width=An,this.height=hn}function Qe(An){An&&(An.texture&&An.texture._texture.decRef(),An.renderbuffer&&An.renderbuffer._renderbuffer.decRef())}function yt(An,cn,bn){An&&(An.texture?An.texture._texture.refCount+=1:An.renderbuffer._renderbuffer.refCount+=1)}function wt(An,cn){cn&&(cn.texture?qe.framebufferTexture2D(36160,An,cn.target,cn.texture._texture.texture,0):qe.framebufferRenderbuffer(36160,An,36161,cn.renderbuffer._renderbuffer.renderbuffer))}function kt(An){var cn=3553,bn=null,hn=null,wn=An;return"object"==typeof An&&(wn=An.data,"target"in An&&(cn=0|An.target)),"texture2d"===(An=wn._reglType)||"textureCube"===An?bn=wn:"renderbuffer"===An&&(hn=wn,cn=36161),new ut(cn,bn,hn)}function vt(An,cn,bn,hn,wn){return bn?((An=ct.create2D({width:An,height:cn,format:hn,type:wn}))._texture.refCount=0,new ut(3553,An,null)):((An=Ve.create({width:An,height:cn,format:hn}))._renderbuffer.refCount=0,new ut(36161,null,An))}function Lt(An){return An&&(An.texture||An.renderbuffer)}function St(An,cn,bn){An&&(An.texture?An.texture.resize(cn,bn):An.renderbuffer&&An.renderbuffer.resize(cn,bn),An.width=cn,An.height=bn)}function Ot(){this.id=Gn++,Dn[this.id]=this,this.framebuffer=qe.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Nt(An){An.colorAttachments.forEach(Qe),Qe(An.depthAttachment),Qe(An.stencilAttachment),Qe(An.depthStencilAttachment)}function Bt(An){qe.deleteFramebuffer(An.framebuffer),An.framebuffer=null,Ge.framebufferCount--,delete Dn[An.id]}function Vt(An){var cn;qe.bindFramebuffer(36160,An.framebuffer);var bn=An.colorAttachments;for(cn=0;cn<bn.length;++cn)wt(36064+cn,bn[cn]);for(cn=bn.length;cn<pt.maxColorAttachments;++cn)qe.framebufferTexture2D(36160,36064+cn,3553,null,0);qe.framebufferTexture2D(36160,33306,3553,null,0),qe.framebufferTexture2D(36160,36096,3553,null,0),qe.framebufferTexture2D(36160,36128,3553,null,0),wt(36096,An.depthAttachment),wt(36128,An.stencilAttachment),wt(33306,An.depthStencilAttachment),qe.checkFramebufferStatus(36160),qe.isContextLost(),qe.bindFramebuffer(36160,gn.next?gn.next.framebuffer:null),gn.cur=gn.next,qe.getError()}function nn(An,cn){function bn(wn,Ln){var Pn,Nn=0,jn=0,Fn=!0,Jn=!0;Pn=null;var Zn=!0,hr="rgba",rr="uint8",dr=1,nr=null,Sr=null,ln=null,dn=!1;"number"==typeof wn?(Nn=0|wn,jn=0|Ln||Nn):wn?("shape"in wn?(Nn=(jn=wn.shape)[0],jn=jn[1]):("radius"in wn&&(Nn=jn=wn.radius),"width"in wn&&(Nn=wn.width),"height"in wn&&(jn=wn.height)),("color"in wn||"colors"in wn)&&(Pn=wn.color||wn.colors,Array.isArray(Pn)),Pn||("colorCount"in wn&&(dr=0|wn.colorCount),"colorTexture"in wn&&(Zn=!!wn.colorTexture,hr="rgba4"),"colorType"in wn&&(rr=wn.colorType,!Zn)&&("half float"===rr||"float16"===rr?hr="rgba16f":"float"!==rr&&"float32"!==rr||(hr="rgba32f")),"colorFormat"in wn&&(0<=Jt.indexOf(hr=wn.colorFormat)?Zn=!0:0<=an.indexOf(hr)&&(Zn=!1))),("depthTexture"in wn||"depthStencilTexture"in wn)&&(dn=!(!wn.depthTexture&&!wn.depthStencilTexture)),"depth"in wn&&("boolean"==typeof wn.depth?Fn=wn.depth:(nr=wn.depth,Jn=!1)),"stencil"in wn&&("boolean"==typeof wn.stencil?Jn=wn.stencil:(Sr=wn.stencil,Fn=!1)),"depthStencil"in wn&&("boolean"==typeof wn.depthStencil?Fn=Jn=wn.depthStencil:(ln=wn.depthStencil,Jn=Fn=!1))):Nn=jn=1;var Un=null,Mn=null,Hn=null,Wn=null;if(Array.isArray(Pn))Un=Pn.map(kt);else if(Pn)Un=[kt(Pn)];else for(Un=Array(dr),Pn=0;Pn<dr;++Pn)Un[Pn]=vt(Nn,jn,Zn,hr,rr);for(Nn=Nn||Un[0].width,jn=jn||Un[0].height,nr?Mn=kt(nr):Fn&&!Jn&&(Mn=vt(Nn,jn,dn,"depth","uint32")),Sr?Hn=kt(Sr):Jn&&!Fn&&(Hn=vt(Nn,jn,!1,"stencil","uint8")),ln?Wn=kt(ln):!nr&&!Sr&&Jn&&Fn&&(Wn=vt(Nn,jn,dn,"depth stencil","depth stencil")),Fn=null,Pn=0;Pn<Un.length;++Pn)yt(Un[Pn]),Un[Pn]&&Un[Pn].texture&&(Jn=At[Un[Pn].texture._texture.format]*_t[Un[Pn].texture._texture.type],null===Fn&&(Fn=Jn));return yt(Mn),yt(Hn),yt(Wn),Nt(hn),hn.width=Nn,hn.height=jn,hn.colorAttachments=Un,hn.depthAttachment=Mn,hn.stencilAttachment=Hn,hn.depthStencilAttachment=Wn,bn.color=Un.map(Lt),bn.depth=Lt(Mn),bn.stencil=Lt(Hn),bn.depthStencil=Lt(Wn),bn.width=hn.width,bn.height=hn.height,Vt(hn),bn}var hn=new Ot;return Ge.framebufferCount++,bn(An,cn),X(bn,{resize:function(wn,Ln){var Pn=Math.max(0|wn,1),Nn=Math.max(0|Ln||Pn,1);if(Pn===hn.width&&Nn===hn.height)return bn;for(var jn=hn.colorAttachments,Fn=0;Fn<jn.length;++Fn)St(jn[Fn],Pn,Nn);return St(hn.depthAttachment,Pn,Nn),St(hn.stencilAttachment,Pn,Nn),St(hn.depthStencilAttachment,Pn,Nn),hn.width=bn.width=Pn,hn.height=bn.height=Nn,Vt(hn),bn},_reglType:"framebuffer",_framebuffer:hn,destroy:function(){Bt(hn),Nt(hn)},use:function(wn){gn.setFBO({framebuffer:bn},wn)}})}var gn={cur:null,next:null,dirty:!1,setFBO:null},Jt=["rgba"],an=["rgba4","rgb565","rgb5 a1"];$e.ext_srgb&&an.push("srgba"),$e.ext_color_buffer_half_float&&an.push("rgba16f","rgb16f"),$e.webgl_color_buffer_float&&an.push("rgba32f");var Xt=["uint8"];$e.oes_texture_half_float&&Xt.push("half float","float16"),$e.oes_texture_float&&Xt.push("float","float32");var Gn=0,Dn={};return X(gn,{getFramebuffer:function(An){return"function"==typeof An&&"framebuffer"===An._reglType&&(An=An._framebuffer)instanceof Ot?An:null},create:nn,createCube:function(An){function cn(hn){var wn,Ln={color:null},Pn=0,Nn=null;wn="rgba";var jn="uint8",Fn=1;if("number"==typeof hn?Pn=0|hn:hn?("shape"in hn?Pn=hn.shape[0]:("radius"in hn&&(Pn=0|hn.radius),"width"in hn?Pn=0|hn.width:"height"in hn&&(Pn=0|hn.height)),("color"in hn||"colors"in hn)&&(Nn=hn.color||hn.colors,Array.isArray(Nn)),Nn||("colorCount"in hn&&(Fn=0|hn.colorCount),"colorType"in hn&&(jn=hn.colorType),"colorFormat"in hn&&(wn=hn.colorFormat)),"depth"in hn&&(Ln.depth=hn.depth),"stencil"in hn&&(Ln.stencil=hn.stencil),"depthStencil"in hn&&(Ln.depthStencil=hn.depthStencil)):Pn=1,Nn)if(Array.isArray(Nn))for(hn=[],wn=0;wn<Nn.length;++wn)hn[wn]=Nn[wn];else hn=[Nn];else for(hn=Array(Fn),Nn={radius:Pn,format:wn,type:jn},wn=0;wn<Fn;++wn)hn[wn]=ct.createCube(Nn);for(Ln.color=Array(hn.length),wn=0;wn<hn.length;++wn)Fn=hn[wn],Pn=Pn||Fn.width,Ln.color[wn]={target:34069,data:hn[wn]};for(wn=0;6>wn;++wn){for(Fn=0;Fn<hn.length;++Fn)Ln.color[Fn].target=34069+wn;0<wn&&(Ln.depth=bn[0].depth,Ln.stencil=bn[0].stencil,Ln.depthStencil=bn[0].depthStencil),bn[wn]?bn[wn](Ln):bn[wn]=nn(Ln)}return X(cn,{width:Pn,height:Pn,color:hn})}var bn=Array(6);return cn(An),X(cn,{faces:bn,resize:function(hn){var wn=0|hn;if(wn===cn.width)return cn;var Ln=cn.color;for(hn=0;hn<Ln.length;++hn)Ln[hn].resize(wn);for(hn=0;6>hn;++hn)bn[hn].resize(wn);return cn.width=cn.height=wn,cn},_reglType:"framebufferCube",destroy:function(){bn.forEach(function(hn){hn.destroy()})}})},clear:function(){ve(Dn).forEach(Bt)},restore:function(){gn.cur=null,gn.next=null,gn.dirty=!0,ve(Dn).forEach(function(An){An.framebuffer=qe.createFramebuffer(),Vt(An)})}})}(St,gn,An,Ln,Pn,Vt),jn=$(St,Bt,gn,An,cn,bn,0,Nn,{},hn,wn,Xt,Dn,Jt,nn,qe),Fn=(Bt=function O(qe,$e,pt,ct,Ve,Ge,ut){function Qe(yt){var wt;wt=null===$e.next?5121:$e.next.colorAttachments[0].texture._texture.type;var kt=0,vt=0,Lt=ct.framebufferWidth,St=ct.framebufferHeight,Ot=null;return ye(yt)?Ot=yt:yt&&(kt=0|yt.x,vt=0|yt.y,Lt=0|(yt.width||ct.framebufferWidth-kt),St=0|(yt.height||ct.framebufferHeight-vt),Ot=yt.data||null),pt(),yt=Lt*St*4,Ot||(5121===wt?Ot=new Uint8Array(yt):5126===wt&&(Ot=Ot||new Float32Array(yt))),qe.pixelStorei(3333,4),qe.readPixels(kt,vt,Lt,St,6408,wt,Ot),Ot}return function(yt){return yt&&"framebuffer"in yt?($e.setFBO({framebuffer:(wt=yt).framebuffer},function(){kt=Qe(wt)}),kt):Qe(yt);var wt,kt}}(St,Nn,jn.procs.poll,Dn),jn.next),Jn=St.canvas,Zn=[],hr=[],rr=[],dr=[qe.onDestroy],nr=null;Jn&&(Jn.addEventListener("webglcontextlost",Ve,!1),Jn.addEventListener("webglcontextrestored",Ge,!1));var Sr=Nn.setFBO=ut({framebuffer:ce.define.call(null,1,"framebuffer")});return vt(),Ot=X(ut,{clear:function(ln){if("framebuffer"in ln)if(ln.framebuffer&&"framebufferCube"===ln.framebuffer_reglType)for(var dn=0;6>dn;++dn)Sr(X({framebuffer:ln.framebuffer.faces[dn]},ln),Qe);else Sr(ln,Qe);else Qe(0,ln)},prop:ce.define.bind(null,1),context:ce.define.bind(null,2),this:ce.define.bind(null,3),draw:ut({}),buffer:function(ln){return cn.create(ln,34962,!1,!1)},elements:function(ln){return bn.create(ln,!1)},texture:Ln.create2D,cube:Ln.createCube,renderbuffer:Pn.create,framebuffer:Nn.create,framebufferCube:Nn.createCube,vao:hn.createVAO,attributes:Ot,frame:yt,on:function(ln,dn){var Un;switch(ln){case"frame":return yt(dn);case"lost":Un=hr;break;case"restore":Un=rr;break;case"destroy":Un=dr}return Un.push(dn),{cancel:function(){for(var Mn=0;Mn<Un.length;++Mn)if(Un[Mn]===dn){Un[Mn]=Un[Un.length-1],Un.pop();break}}}},limits:An,hasExtension:function(ln){return 0<=An.extensions.indexOf(ln.toLowerCase())},read:Bt,destroy:function(){Zn.length=0,ct(),Jn&&(Jn.removeEventListener("webglcontextlost",Ve),Jn.removeEventListener("webglcontextrestored",Ge)),wn.clear(),Nn.clear(),Pn.clear(),hn.clear(),Ln.clear(),bn.clear(),cn.clear(),Jt&&Jt.clear(),dr.forEach(function(ln){ln()})},_gl:St,_refresh:vt,poll:function(){kt(),Jt&&Jt.update()},now:Lt,stats:Vt,getCachedCode:function(){return nn},preloadCachedCode:function(ln){Object.entries(ln).forEach(function(dn){nn[dn[0]]=dn[1]})}}),qe.onDone(null,Ot),Ot}}()},30456:function(ne,F,e){var M=e(33576),k=M.Buffer;function o(_,p){for(var l in _)p[l]=_[l]}function T(_,p,l){return k(_,p,l)}k.from&&k.alloc&&k.allocUnsafe&&k.allocUnsafeSlow?ne.exports=M:(o(M,F),F.Buffer=T),T.prototype=Object.create(k.prototype),o(k,T),T.from=function(_,p,l){if("number"==typeof _)throw new TypeError("Argument must not be a number");return k(_,p,l)},T.alloc=function(_,p,l){if("number"!=typeof _)throw new TypeError("Argument must be a number");var t=k(_);return void 0!==p?"string"==typeof l?t.fill(p,l):t.fill(p):t.fill(0),t},T.allocUnsafe=function(_){if("number"!=typeof _)throw new TypeError("Argument must be a number");return k(_)},T.allocUnsafeSlow=function(_){if("number"!=typeof _)throw new TypeError("Argument must be a number");return M.SlowBuffer(_)}},14500:function(ne,F,e){"use strict";var M=e(53664),k=e(64348),o=e(39640)(),T=e(2304),_=M("%TypeError%"),p=M("%Math.floor%");ne.exports=function(l,t){if("function"!=typeof l)throw new _("`fn` is not a function");if("number"!=typeof t||t<0||t>4294967295||p(t)!==t)throw new _("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],r=!0,n=!0;if("length"in l&&T){var a=T(l,"length");a&&!a.configurable&&(r=!1),a&&!a.writable&&(n=!1)}return(r||n||!i)&&(o?k(l,"length",t,!0,!0):k(l,"length",t)),l}},29936:function(ne,F,e){ne.exports=k;var M=e(61252).EventEmitter;function k(){M.call(this)}e(6768)(k,M),k.Readable=e(12348),k.Writable=e(11288),k.Duplex=e(15316),k.Transform=e(22477),k.PassThrough=e(27136),k.finished=e(15932),k.pipeline=e(38180),k.Stream=k,k.prototype.pipe=function(o,T){var _=this;function p(s){o.writable&&!1===o.write(s)&&_.pause&&_.pause()}function l(){_.readable&&_.resume&&_.resume()}_.on("data",p),o.on("drain",l),o._isStdio||T&&!1===T.end||(_.on("end",i),_.on("close",r));var t=!1;function i(){t||(t=!0,o.end())}function r(){t||(t=!0,"function"==typeof o.destroy&&o.destroy())}function n(s){if(a(),0===M.listenerCount(this,"error"))throw s}function a(){_.removeListener("data",p),o.removeListener("drain",l),_.removeListener("end",i),_.removeListener("close",r),_.removeListener("error",n),o.removeListener("error",n),_.removeListener("end",a),_.removeListener("close",a),o.removeListener("close",a)}return _.on("error",n),o.on("error",n),_.on("end",a),_.on("close",a),o.on("close",a),o.emit("pipe",_),o}},92784:function(ne){"use strict";var F={};function e(k,o,T){T||(T=Error);var _=function(p){var l,t;function i(r,n,a){return p.call(this,"string"==typeof o?o:o(r,n,a))||this}return t=p,(l=i).prototype=Object.create(t.prototype),l.prototype.constructor=l,l.__proto__=t,i}(T);_.prototype.name=T.name,_.prototype.code=k,F[k]=_}function M(k,o){if(Array.isArray(k)){var T=k.length;return k=k.map(function(_){return String(_)}),T>2?"one of ".concat(o," ").concat(k.slice(0,T-1).join(", "),", or ")+k[T-1]:2===T?"one of ".concat(o," ").concat(k[0]," or ").concat(k[1]):"of ".concat(o," ").concat(k[0])}return"of ".concat(o," ").concat(String(k))}e("ERR_INVALID_OPT_VALUE",function(k,o){return'The value "'+o+'" is invalid for option "'+k+'"'},TypeError),e("ERR_INVALID_ARG_TYPE",function(k,o,T){var _,l,t,i,n,s;if("string"==typeof o&&("not ","not "===o.substr(0,4))?(_="must not be",o=o.replace(/^not /,"")):_="must be",n=k," argument",(void 0===s||s>n.length)&&(s=n.length)," argument"===n.substring(s-9,s))l="The ".concat(k," ").concat(_," ").concat(M(o,"type"));else{var r=("number"!=typeof i&&(i=0),i+1>(t=k).length||-1===t.indexOf(".",i)?"argument":"property");l='The "'.concat(k,'" ').concat(r," ").concat(_," ").concat(M(o,"type"))}return l+". Received type ".concat(typeof T)},TypeError),e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),e("ERR_METHOD_NOT_IMPLEMENTED",function(k){return"The "+k+" method is not implemented"}),e("ERR_STREAM_PREMATURE_CLOSE","Premature close"),e("ERR_STREAM_DESTROYED",function(k){return"Cannot call "+k+" after a stream was destroyed"}),e("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),e("ERR_STREAM_WRITE_AFTER_END","write after end"),e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),e("ERR_UNKNOWN_ENCODING",function(k){return"Unknown encoding: "+k},TypeError),e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),ne.exports.i=F},15316:function(ne,F,e){"use strict";var M=e(4168),k=Object.keys||function(n){var a=[];for(var s in n)a.push(s);return a};ne.exports=t;var o=e(12348),T=e(11288);e(6768)(t,o);for(var _=k(T.prototype),p=0;p<_.length;p++){var l=_[p];t.prototype[l]||(t.prototype[l]=T.prototype[l])}function t(n){if(!(this instanceof t))return new t(n);o.call(this,n),T.call(this,n),this.allowHalfOpen=!0,n&&(!1===n.readable&&(this.readable=!1),!1===n.writable&&(this.writable=!1),!1===n.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",i)))}function i(){this._writableState.ended||M.nextTick(r,this)}function r(n){n.end()}Object.defineProperty(t.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(t.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(t.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(t.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(n){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=n,this._writableState.destroyed=n)}})},27136:function(ne,F,e){"use strict";ne.exports=k;var M=e(22477);function k(o){if(!(this instanceof k))return new k(o);M.call(this,o)}e(6768)(k,M),k.prototype._transform=function(o,T,_){_(null,o)}},12348:function(ne,F,e){"use strict";var M,k=e(4168);ne.exports=b,b.ReadableState=v,e(61252);var o,T=function(te,ee){return te.listeners(ee).length},_=e(4776),p=e(33576).Buffer,l=e.g.Uint8Array||function(){},t=e(19768);o=t&&t.debuglog?t.debuglog("stream"):function(){};var i,r,n,a=e(47264),s=e(55324),u=e(24888).getHighWaterMark,f=e(92784).i,c=f.ERR_INVALID_ARG_TYPE,y=f.ERR_STREAM_PUSH_AFTER_EOF,d=f.ERR_METHOD_NOT_IMPLEMENTED,m=f.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e(6768)(b,_);var g=s.errorOrDestroy,x=["error","close","destroy","pause","resume"];function v(te,ee,$){M=M||e(15316),"boolean"!=typeof $&&($=ee instanceof M),this.objectMode=!!(te=te||{}).objectMode,$&&(this.objectMode=this.objectMode||!!te.readableObjectMode),this.highWaterMark=u(this,te,"readableHighWaterMark",$),this.buffer=new a,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==te.emitClose,this.autoDestroy=!!te.autoDestroy,this.destroyed=!1,this.defaultEncoding=te.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,te.encoding&&(i||(i=e(86032).o),this.decoder=new i(te.encoding),this.encoding=te.encoding)}function b(te){if(M=M||e(15316),!(this instanceof b))return new b(te);this._readableState=new v(te,this,this instanceof M),this.readable=!0,te&&("function"==typeof te.read&&(this._read=te.read),"function"==typeof te.destroy&&(this._destroy=te.destroy)),_.call(this)}function h(te,ee,$,J,X){o("readableAddChunk",ee);var ae,le,pe,we,Te,ce=te._readableState;if(null===ee)ce.reading=!1,function(le,pe){if(o("onEofChunk"),!pe.ended){if(pe.decoder){var we=pe.decoder.end();we&&we.length&&(pe.buffer.push(we),pe.length+=pe.objectMode?1:we.length)}pe.ended=!0,pe.sync?P(le):(pe.needReadable=!1,pe.emittedReadable||(pe.emittedReadable=!0,I(le)))}}(te,ce);else if(X||(le=ce,p.isBuffer(Te=pe=ee)||Te instanceof l||"string"==typeof pe||void 0===pe||le.objectMode||(we=new c("chunk",["string","Buffer","Uint8Array"],pe)),ae=we),ae)g(te,ae);else if(ce.objectMode||ee&&ee.length>0)if("string"==typeof ee||ce.objectMode||Object.getPrototypeOf(ee)===p.prototype||(ee=function(le){return p.from(le)}(ee)),J)ce.endEmitted?g(te,new m):S(te,ce,ee,!0);else if(ce.ended)g(te,new y);else{if(ce.destroyed)return!1;ce.reading=!1,ce.decoder&&!$?(ee=ce.decoder.write(ee),ce.objectMode||0!==ee.length?S(te,ce,ee,!1):O(te,ce)):S(te,ce,ee,!1)}else J||(ce.reading=!1,O(te,ce));return!ce.ended&&(ce.length<ce.highWaterMark||0===ce.length)}function S(te,ee,$,J){ee.flowing&&0===ee.length&&!ee.sync?(ee.awaitDrain=0,te.emit("data",$)):(ee.length+=ee.objectMode?1:$.length,J?ee.buffer.unshift($):ee.buffer.push($),ee.needReadable&&P(te)),O(te,ee)}Object.defineProperty(b.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(te){this._readableState&&(this._readableState.destroyed=te)}}),b.prototype.destroy=s.destroy,b.prototype._undestroy=s.undestroy,b.prototype._destroy=function(te,ee){ee(te)},b.prototype.push=function(te,ee){var $,J=this._readableState;return J.objectMode?$=!0:"string"==typeof te&&((ee=ee||J.defaultEncoding)!==J.encoding&&(te=p.from(te,ee),ee=""),$=!0),h(this,te,ee,!1,$)},b.prototype.unshift=function(te){return h(this,te,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(te){i||(i=e(86032).o);var ee=new i(te);this._readableState.decoder=ee,this._readableState.encoding=this._readableState.decoder.encoding;for(var $=this._readableState.buffer.head,J="";null!==$;)J+=ee.write($.data),$=$.next;return this._readableState.buffer.clear(),""!==J&&this._readableState.buffer.push(J),this._readableState.length=J.length,this};var w=1073741824;function E(te,ee){return te<=0||0===ee.length&&ee.ended?0:ee.objectMode?1:te!=te?ee.flowing&&ee.length?ee.buffer.head.data.length:ee.length:(te>ee.highWaterMark&&(ee.highWaterMark=(($=te)>=w?$=w:($--,$|=$>>>1,$|=$>>>2,$|=$>>>4,$|=$>>>8,$|=$>>>16,$++),$)),te<=ee.length?te:ee.ended?ee.length:(ee.needReadable=!0,0));var $}function P(te){var ee=te._readableState;o("emitReadable",ee.needReadable,ee.emittedReadable),ee.needReadable=!1,ee.emittedReadable||(o("emitReadable",ee.flowing),ee.emittedReadable=!0,k.nextTick(I,te))}function I(te){var ee=te._readableState;o("emitReadable_",ee.destroyed,ee.length,ee.ended),ee.destroyed||!ee.length&&!ee.ended||(te.emit("readable"),ee.emittedReadable=!1),ee.needReadable=!ee.flowing&&!ee.ended&&ee.length<=ee.highWaterMark,Y(te)}function O(te,ee){ee.readingMore||(ee.readingMore=!0,k.nextTick(z,te,ee))}function z(te,ee){for(;!ee.reading&&!ee.ended&&(ee.length<ee.highWaterMark||ee.flowing&&0===ee.length);){var $=ee.length;if(o("maybeReadMore read 0"),te.read(0),$===ee.length)break}ee.readingMore=!1}function U(te){var ee=te._readableState;ee.readableListening=te.listenerCount("readable")>0,ee.resumeScheduled&&!ee.paused?ee.flowing=!0:te.listenerCount("data")>0&&te.resume()}function R(te){o("readable nexttick read 0"),te.read(0)}function j(te,ee){o("resume",ee.reading),ee.reading||te.read(0),ee.resumeScheduled=!1,te.emit("resume"),Y(te),ee.flowing&&!ee.reading&&te.read(0)}function Y(te){var ee=te._readableState;for(o("flow",ee.flowing);ee.flowing&&null!==te.read(););}function B(te,ee){return 0===ee.length?null:(ee.objectMode?$=ee.buffer.shift():!te||te>=ee.length?($=ee.decoder?ee.buffer.join(""):1===ee.buffer.length?ee.buffer.first():ee.buffer.concat(ee.length),ee.buffer.clear()):$=ee.buffer.consume(te,ee.decoder),$);var $}function V(te){var ee=te._readableState;o("endReadable",ee.endEmitted),ee.endEmitted||(ee.ended=!0,k.nextTick(q,ee,te))}function q(te,ee){if(o("endReadableNT",te.endEmitted,te.length),!te.endEmitted&&0===te.length&&(te.endEmitted=!0,ee.readable=!1,ee.emit("end"),te.autoDestroy)){var $=ee._writableState;(!$||$.autoDestroy&&$.finished)&&ee.destroy()}}function ie(te,ee){for(var $=0,J=te.length;$<J;$++)if(te[$]===ee)return $;return-1}b.prototype.read=function(te){o("read",te),te=parseInt(te,10);var ee=this._readableState,$=te;if(0!==te&&(ee.emittedReadable=!1),0===te&&ee.needReadable&&((0!==ee.highWaterMark?ee.length>=ee.highWaterMark:ee.length>0)||ee.ended))return o("read: emitReadable",ee.length,ee.ended),0===ee.length&&ee.ended?V(this):P(this),null;if(0===(te=E(te,ee))&&ee.ended)return 0===ee.length&&V(this),null;var J,X=ee.needReadable;return o("need readable",X),(0===ee.length||ee.length-te<ee.highWaterMark)&&o("length less than watermark",X=!0),ee.ended||ee.reading?o("reading or ended",X=!1):X&&(o("do read"),ee.reading=!0,ee.sync=!0,0===ee.length&&(ee.needReadable=!0),this._read(ee.highWaterMark),ee.sync=!1,ee.reading||(te=E($,ee))),null===(J=te>0?B(te,ee):null)?(ee.needReadable=ee.length<=ee.highWaterMark,te=0):(ee.length-=te,ee.awaitDrain=0),0===ee.length&&(ee.ended||(ee.needReadable=!0),$!==te&&ee.ended&&V(this)),null!==J&&this.emit("data",J),J},b.prototype._read=function(te){g(this,new d("_read()"))},b.prototype.pipe=function(te,ee){var $=this,J=this._readableState;switch(J.pipesCount){case 0:J.pipes=te;break;case 1:J.pipes=[J.pipes,te];break;default:J.pipes.push(te)}J.pipesCount+=1,o("pipe count=%d opts=%j",J.pipesCount,ee);var X=ee&&!1===ee.end||te===k.stdout||te===k.stderr?ve:ae;function ae(){o("onend"),te.end()}J.endEmitted?k.nextTick(X):$.once("end",X),te.on("unpipe",function xe(Ce,Oe){o("onunpipe"),Ce===$&&Oe&&!1===Oe.hasUnpiped&&(Oe.hasUnpiped=!0,o("cleanup"),te.removeListener("close",Te),te.removeListener("finish",ye),te.removeListener("drain",ce),te.removeListener("error",we),te.removeListener("unpipe",xe),$.removeListener("end",ae),$.removeListener("end",ve),$.removeListener("data",pe),le=!0,!J.awaitDrain||te._writableState&&!te._writableState.needDrain||ce())});var xe,ce=(xe=$,function(){var Ce=xe._readableState;o("pipeOnDrain",Ce.awaitDrain),Ce.awaitDrain&&Ce.awaitDrain--,0===Ce.awaitDrain&&T(xe,"data")&&(Ce.flowing=!0,Y(xe))});te.on("drain",ce);var le=!1;function pe(xe){o("ondata");var Ce=te.write(xe);o("dest.write",Ce),!1===Ce&&((1===J.pipesCount&&J.pipes===te||J.pipesCount>1&&-1!==ie(J.pipes,te))&&!le&&(o("false write response, pause",J.awaitDrain),J.awaitDrain++),$.pause())}function we(xe){o("onerror",xe),ve(),te.removeListener("error",we),0===T(te,"error")&&g(te,xe)}function Te(){te.removeListener("finish",ye),ve()}function ye(){o("onfinish"),te.removeListener("close",Te),ve()}function ve(){o("unpipe"),$.unpipe(te)}return $.on("data",pe),function(xe,Ce,Oe){if("function"==typeof xe.prependListener)return xe.prependListener(Ce,Oe);xe._events&&xe._events[Ce]?Array.isArray(xe._events[Ce])?xe._events[Ce].unshift(Oe):xe._events[Ce]=[Oe,xe._events[Ce]]:xe.on(Ce,Oe)}(te,"error",we),te.once("close",Te),te.once("finish",ye),te.emit("pipe",$),J.flowing||(o("pipe resume"),$.resume()),te},b.prototype.unpipe=function(te){var ee=this._readableState,$={hasUnpiped:!1};if(0===ee.pipesCount)return this;if(1===ee.pipesCount)return te&&te!==ee.pipes||(te||(te=ee.pipes),ee.pipes=null,ee.pipesCount=0,ee.flowing=!1,te&&te.emit("unpipe",this,$)),this;if(!te){var J=ee.pipes,X=ee.pipesCount;ee.pipes=null,ee.pipesCount=0,ee.flowing=!1;for(var ae=0;ae<X;ae++)J[ae].emit("unpipe",this,{hasUnpiped:!1});return this}var ce=ie(ee.pipes,te);return-1===ce||(ee.pipes.splice(ce,1),ee.pipesCount-=1,1===ee.pipesCount&&(ee.pipes=ee.pipes[0]),te.emit("unpipe",this,$)),this},b.prototype.addListener=b.prototype.on=function(te,ee){var $=_.prototype.on.call(this,te,ee),J=this._readableState;return"data"===te?(J.readableListening=this.listenerCount("readable")>0,!1!==J.flowing&&this.resume()):"readable"===te&&(J.endEmitted||J.readableListening||(J.readableListening=J.needReadable=!0,J.flowing=!1,J.emittedReadable=!1,o("on readable",J.length,J.reading),J.length?P(this):J.reading||k.nextTick(R,this))),$},b.prototype.removeListener=function(te,ee){var $=_.prototype.removeListener.call(this,te,ee);return"readable"===te&&k.nextTick(U,this),$},b.prototype.removeAllListeners=function(te){var ee=_.prototype.removeAllListeners.apply(this,arguments);return"readable"!==te&&void 0!==te||k.nextTick(U,this),ee},b.prototype.resume=function(){var $,te=this._readableState;return te.flowing||(o("resume"),te.flowing=!te.readableListening,this,($=te).resumeScheduled||($.resumeScheduled=!0,k.nextTick(j,this,$))),te.paused=!1,this},b.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},b.prototype.wrap=function(te){var ee=this,$=this._readableState,J=!1;for(var X in te.on("end",function(){if(o("wrapped end"),$.decoder&&!$.ended){var ce=$.decoder.end();ce&&ce.length&&ee.push(ce)}ee.push(null)}),te.on("data",function(ce){o("wrapped data"),$.decoder&&(ce=$.decoder.write(ce)),$.objectMode&&null==ce||($.objectMode||ce&&ce.length)&&(ee.push(ce)||(J=!0,te.pause()))}),te)void 0===this[X]&&"function"==typeof te[X]&&(this[X]=function(ce){return function(){return te[ce].apply(te,arguments)}}(X));for(var ae=0;ae<x.length;ae++)te.on(x[ae],this.emit.bind(this,x[ae]));return this._read=function(ce){o("wrapped _read",ce),J&&(J=!1,te.resume())},this},"function"==typeof Symbol&&(b.prototype[Symbol.asyncIterator]=function(){return void 0===r&&(r=e(60328)),r(this)}),Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(b.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(b.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(te){this._readableState&&(this._readableState.flowing=te)}}),b._fromList=B,Object.defineProperty(b.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(b.from=function(te,ee){return void 0===n&&(n=e(90555)),n(b,te,ee)})},22477:function(ne,F,e){"use strict";ne.exports=t;var M=e(92784).i,k=M.ERR_METHOD_NOT_IMPLEMENTED,o=M.ERR_MULTIPLE_CALLBACK,T=M.ERR_TRANSFORM_ALREADY_TRANSFORMING,_=M.ERR_TRANSFORM_WITH_LENGTH_0,p=e(15316);function l(n,a){var s=this._transformState;s.transforming=!1;var u=s.writecb;if(null===u)return this.emit("error",new o);s.writechunk=null,s.writecb=null,null!=a&&this.push(a),u(n);var f=this._readableState;f.reading=!1,(f.needReadable||f.length<f.highWaterMark)&&this._read(f.highWaterMark)}function t(n){if(!(this instanceof t))return new t(n);p.call(this,n),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,n&&("function"==typeof n.transform&&(this._transform=n.transform),"function"==typeof n.flush&&(this._flush=n.flush)),this.on("prefinish",i)}function i(){var n=this;"function"!=typeof this._flush||this._readableState.destroyed?r(this,null,null):this._flush(function(a,s){r(n,a,s)})}function r(n,a,s){if(a)return n.emit("error",a);if(null!=s&&n.push(s),n._writableState.length)throw new _;if(n._transformState.transforming)throw new T;return n.push(null)}e(6768)(t,p),t.prototype.push=function(n,a){return this._transformState.needTransform=!1,p.prototype.push.call(this,n,a)},t.prototype._transform=function(n,a,s){s(new k("_transform()"))},t.prototype._write=function(n,a,s){var u=this._transformState;if(u.writecb=s,u.writechunk=n,u.writeencoding=a,!u.transforming){var f=this._readableState;(u.needTransform||f.needReadable||f.length<f.highWaterMark)&&this._read(f.highWaterMark)}},t.prototype._read=function(n){var a=this._transformState;null===a.writechunk||a.transforming?a.needTransform=!0:(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform))},t.prototype._destroy=function(n,a){p.prototype._destroy.call(this,n,function(s){a(s)})}},11288:function(ne,F,e){"use strict";var M,k=e(4168);function o(O){var z=this;this.next=null,this.entry=null,this.finish=function(){!function(U,R,j){var Y=U.entry;for(U.entry=null;Y;){var B=Y.callback;R.pendingcb--,B(void 0),Y=Y.next}R.corkedRequestsFree.next=U}(z,O)}}ne.exports=b,b.WritableState=v;var T,_={deprecate:e(96656)},p=e(4776),l=e(33576).Buffer,t=e.g.Uint8Array||function(){},i=e(55324),r=e(24888).getHighWaterMark,n=e(92784).i,a=n.ERR_INVALID_ARG_TYPE,s=n.ERR_METHOD_NOT_IMPLEMENTED,u=n.ERR_MULTIPLE_CALLBACK,f=n.ERR_STREAM_CANNOT_PIPE,c=n.ERR_STREAM_DESTROYED,y=n.ERR_STREAM_NULL_VALUES,d=n.ERR_STREAM_WRITE_AFTER_END,m=n.ERR_UNKNOWN_ENCODING,g=i.errorOrDestroy;function x(){}function v(O,z,U){M=M||e(15316),"boolean"!=typeof U&&(U=z instanceof M),this.objectMode=!!(O=O||{}).objectMode,U&&(this.objectMode=this.objectMode||!!O.writableObjectMode),this.highWaterMark=r(this,O,"writableHighWaterMark",U),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===O.decodeStrings),this.defaultEncoding=O.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(j){!function(Y,B){var ee,V=Y._writableState,q=V.sync,ie=V.writecb;if("function"!=typeof ie)throw new u;if((ee=V).writing=!1,ee.writecb=null,ee.length-=ee.writelen,ee.writelen=0,B)!function(ee,$,J,X,ae){--$.pendingcb,J?(k.nextTick(ae,X),k.nextTick(I,ee,$),ee._writableState.errorEmitted=!0,g(ee,X)):(ae(X),ee._writableState.errorEmitted=!0,g(ee,X),I(ee,$))}(Y,V,q,B,ie);else{var te=E(V)||Y.destroyed;te||V.corked||V.bufferProcessing||!V.bufferedRequest||w(Y,V),q?k.nextTick(S,Y,V,te,ie):S(Y,V,te,ie)}}(z,j)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==O.emitClose,this.autoDestroy=!!O.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function b(O){var z=this instanceof(M=M||e(15316));if(!z&&!T.call(b,this))return new b(O);this._writableState=new v(O,this,z),this.writable=!0,O&&("function"==typeof O.write&&(this._write=O.write),"function"==typeof O.writev&&(this._writev=O.writev),"function"==typeof O.destroy&&(this._destroy=O.destroy),"function"==typeof O.final&&(this._final=O.final)),p.call(this)}function h(O,z,U,R,j,Y,B){z.writelen=R,z.writecb=B,z.writing=!0,z.sync=!0,z.destroyed?z.onwrite(new c("write")):U?O._writev(j,z.onwrite):O._write(j,Y,z.onwrite),z.sync=!1}function S(O,z,U,R){var j,Y;U||(j=O,0===(Y=z).length&&Y.needDrain&&(Y.needDrain=!1,j.emit("drain"))),z.pendingcb--,R(),I(O,z)}function w(O,z){z.bufferProcessing=!0;var U=z.bufferedRequest;if(O._writev&&U&&U.next){var j=new Array(z.bufferedRequestCount),Y=z.corkedRequestsFree;Y.entry=U;for(var B=0,V=!0;U;)j[B]=U,U.isBuf||(V=!1),U=U.next,B+=1;j.allBuffers=V,h(O,z,!0,z.length,j,"",Y.finish),z.pendingcb++,z.lastBufferedRequest=null,Y.next?(z.corkedRequestsFree=Y.next,Y.next=null):z.corkedRequestsFree=new o(z),z.bufferedRequestCount=0}else{for(;U;){var q=U.chunk;if(h(O,z,!1,z.objectMode?1:q.length,q,U.encoding,U.callback),U=U.next,z.bufferedRequestCount--,z.writing)break}null===U&&(z.lastBufferedRequest=null)}z.bufferedRequest=U,z.bufferProcessing=!1}function E(O){return O.ending&&0===O.length&&null===O.bufferedRequest&&!O.finished&&!O.writing}function P(O,z){O._final(function(U){z.pendingcb--,U&&g(O,U),z.prefinished=!0,O.emit("prefinish"),I(O,z)})}function I(O,z){var j,Y,U=E(z);if(U&&(j=O,(Y=z).prefinished||Y.finalCalled||("function"!=typeof j._final||Y.destroyed?(Y.prefinished=!0,j.emit("prefinish")):(Y.pendingcb++,Y.finalCalled=!0,k.nextTick(P,j,Y))),0===z.pendingcb&&(z.finished=!0,O.emit("finish"),z.autoDestroy))){var R=O._readableState;(!R||R.autoDestroy&&R.endEmitted)&&O.destroy()}return U}e(6768)(b,p),v.prototype.getBuffer=function(){for(var O=this.bufferedRequest,z=[];O;)z.push(O),O=O.next;return z},function(){try{Object.defineProperty(v.prototype,"buffer",{get:_.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(T=Function.prototype[Symbol.hasInstance],Object.defineProperty(b,Symbol.hasInstance,{value:function(O){return!!T.call(this,O)||this===b&&O&&O._writableState instanceof v}})):T=function(O){return O instanceof this},b.prototype.pipe=function(){g(this,new f)},b.prototype.write=function(O,z,U){var R,V,q,ie,j=this._writableState,Y=!1,B=!j.objectMode&&(l.isBuffer(R=O)||R instanceof t);return B&&!l.isBuffer(O)&&(O=l.from(O)),"function"==typeof z&&(U=z,z=null),B?z="buffer":z||(z=j.defaultEncoding),"function"!=typeof U&&(U=x),j.ending?(V=this,q=U,ie=new d,g(V,ie),k.nextTick(q,ie)):(B||function(V,q,ie,te){var ee;return null===ie?ee=new y:"string"==typeof ie||q.objectMode||(ee=new a("chunk",["string","Buffer"],ie)),!ee||(g(V,ee),k.nextTick(te,ee),!1)}(this,j,O,U))&&(j.pendingcb++,Y=function(V,q,ie,te,ee,$){if(!ie){var J=(pe=te,(le=q).objectMode||!1===le.decodeStrings||"string"!=typeof pe||(pe=l.from(pe,ee)),pe);te!==J&&(ie=!0,ee="buffer",te=J)}var le,pe,X=q.objectMode?1:te.length;q.length+=X;var ae=q.length<q.highWaterMark;if(ae||(q.needDrain=!0),q.writing||q.corked){var ce=q.lastBufferedRequest;q.lastBufferedRequest={chunk:te,encoding:ee,isBuf:ie,callback:$,next:null},ce?ce.next=q.lastBufferedRequest:q.bufferedRequest=q.lastBufferedRequest,q.bufferedRequestCount+=1}else h(V,q,!1,X,te,ee,$);return ae}(this,j,B,O,z,U)),Y},b.prototype.cork=function(){this._writableState.corked++},b.prototype.uncork=function(){var O=this._writableState;O.corked&&(O.corked--,O.writing||O.corked||O.bufferProcessing||!O.bufferedRequest||w(this,O))},b.prototype.setDefaultEncoding=function(O){if("string"==typeof O&&(O=O.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((O+"").toLowerCase())>-1))throw new m(O);return this._writableState.defaultEncoding=O,this},Object.defineProperty(b.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),b.prototype._write=function(O,z,U){U(new s("_write()"))},b.prototype._writev=null,b.prototype.end=function(O,z,U){var j,Y,B,R=this._writableState;return"function"==typeof O?(U=O,O=null,z=null):"function"==typeof z&&(U=z,z=null),null!=O&&this.write(O,z),R.corked&&(R.corked=1,this.uncork()),R.ending||(j=this,B=U,(Y=R).ending=!0,I(j,Y),B&&(Y.finished?k.nextTick(B):j.once("finish",B)),Y.ended=!0,j.writable=!1),this},Object.defineProperty(b.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(b.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(O){this._writableState&&(this._writableState.destroyed=O)}}),b.prototype.destroy=i.destroy,b.prototype._undestroy=i.undestroy,b.prototype._destroy=function(O,z){z(O)}},60328:function(ne,F,e){"use strict";var M,k=e(4168);function o(y,d,m){return d in y?Object.defineProperty(y,d,{value:m,enumerable:!0,configurable:!0,writable:!0}):y[d]=m,y}var T=e(15932),_=Symbol("lastResolve"),p=Symbol("lastReject"),l=Symbol("error"),t=Symbol("ended"),i=Symbol("lastPromise"),r=Symbol("handlePromise"),n=Symbol("stream");function a(y,d){return{value:y,done:d}}function s(y){var d=y[_];if(null!==d){var m=y[n].read();null!==m&&(y[i]=null,y[_]=null,y[p]=null,d(a(m,!1)))}}function u(y){k.nextTick(s,y)}var f=Object.getPrototypeOf(function(){}),c=Object.setPrototypeOf((o(M={get stream(){return this[n]},next:function(){var y=this,d=this[l];if(null!==d)return Promise.reject(d);if(this[t])return Promise.resolve(a(void 0,!0));if(this[n].destroyed)return new Promise(function(v,b){k.nextTick(function(){y[l]?b(y[l]):v(a(void 0,!0))})});var m,v,b,g=this[i];if(g)m=new Promise((v=g,b=this,function(h,S){v.then(function(){b[t]?h(a(void 0,!0)):b[r](h,S)},S)}));else{var x=this[n].read();if(null!==x)return Promise.resolve(a(x,!1));m=new Promise(this[r])}return this[i]=m,m}},Symbol.asyncIterator,function(){return this}),o(M,"return",function(){var y=this;return new Promise(function(d,m){y[n].destroy(null,function(g){g?m(g):d(a(void 0,!0))})})}),M),f);ne.exports=function(y){var d,m=Object.create(c,(o(d={},n,{value:y,writable:!0}),o(d,_,{value:null,writable:!0}),o(d,p,{value:null,writable:!0}),o(d,l,{value:null,writable:!0}),o(d,t,{value:y._readableState.endEmitted,writable:!0}),o(d,r,{value:function(g,x){var v=m[n].read();v?(m[i]=null,m[_]=null,m[p]=null,g(a(v,!1))):(m[_]=g,m[p]=x)},writable:!0}),d));return m[i]=null,T(y,function(g){if(g&&"ERR_STREAM_PREMATURE_CLOSE"!==g.code){var x=m[p];return null!==x&&(m[i]=null,m[_]=null,m[p]=null,x(g)),void(m[l]=g)}var v=m[_];null!==v&&(m[i]=null,m[_]=null,m[p]=null,v(a(void 0,!0))),m[t]=!0}),y.on("readable",u.bind(null,m)),m}},47264:function(ne,F,e){"use strict";function M(l,t){var i=Object.keys(l);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(l);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(l,n).enumerable})),i.push.apply(i,r)}return i}function k(l,t,i){return t in l?Object.defineProperty(l,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):l[t]=i,l}var T=e(33576).Buffer,_=e(21576).inspect,p=_&&_.custom||"inspect";ne.exports=function(){function l(){(function(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")})(this,l),this.head=null,this.tail=null,this.length=0}var i;return i=[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};0===this.length&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(0!==this.length){var r=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(0===this.length)return"";for(var n=this.head,a=""+n.data;n=n.next;)a+=r+n.data;return a}},{key:"concat",value:function(r){if(0===this.length)return T.alloc(0);for(var u=T.allocUnsafe(r>>>0),f=this.head,c=0;f;)T.prototype.copy.call(f.data,u,c),c+=f.data.length,f=f.next;return u}},{key:"consume",value:function(r,n){var a;return r<this.head.data.length?(a=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):a=r===this.head.data.length?this.shift():n?this._getString(r):this._getBuffer(r),a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,a=1,s=n.data;for(r-=s.length;n=n.next;){var u=n.data,f=r>u.length?u.length:r;if(s+=f===u.length?u:u.slice(0,r),0==(r-=f)){f===u.length?(++a,this.head=n.next?n.next:this.tail=null):(this.head=n,n.data=u.slice(f));break}++a}return this.length-=a,s}},{key:"_getBuffer",value:function(r){var n=T.allocUnsafe(r),a=this.head,s=1;for(a.data.copy(n),r-=a.data.length;a=a.next;){var u=a.data,f=r>u.length?u.length:r;if(u.copy(n,n.length-r,0,f),0==(r-=f)){f===u.length?(++s,this.head=a.next?a.next:this.tail=null):(this.head=a,a.data=u.slice(f));break}++s}return this.length-=s,n}},{key:p,value:function(r,n){return _(this,function(a){for(var s=1;s<arguments.length;s++){var u=null!=arguments[s]?arguments[s]:{};s%2?M(Object(u),!0).forEach(function(f){k(a,f,u[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(u)):M(Object(u)).forEach(function(f){Object.defineProperty(a,f,Object.getOwnPropertyDescriptor(u,f))})}return a}({},n,{depth:0,customInspect:!1}))}}],i&&function o(l,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(l,r.key,r)}}(l.prototype,i),l}()},55324:function(ne,F,e){"use strict";var M=e(4168);function k(_,p){T(_,p),o(_)}function o(_){_._writableState&&!_._writableState.emitClose||_._readableState&&!_._readableState.emitClose||_.emit("close")}function T(_,p){_.emit("error",p)}ne.exports={destroy:function(_,p){var l=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(p?p(_):_&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,M.nextTick(T,this,_)):M.nextTick(T,this,_)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(_||null,function(r){!p&&r?l._writableState?l._writableState.errorEmitted?M.nextTick(o,l):(l._writableState.errorEmitted=!0,M.nextTick(k,l,r)):M.nextTick(k,l,r):p?(M.nextTick(o,l),p(r)):M.nextTick(o,l)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(_,p){var l=_._readableState,t=_._writableState;l&&l.autoDestroy||t&&t.autoDestroy?_.destroy(p):_.emit("error",p)}}},15932:function(ne,F,e){"use strict";var M=e(92784).i.ERR_STREAM_PREMATURE_CLOSE;function k(){}ne.exports=function o(T,_,p){if("function"==typeof _)return o(T,null,_);var y,d;_||(_={}),y=p||k,d=!1,p=function(){if(!d){d=!0;for(var m=arguments.length,g=new Array(m),x=0;x<m;x++)g[x]=arguments[x];y.apply(this,g)}};var l=_.readable||!1!==_.readable&&T.readable,t=_.writable||!1!==_.writable&&T.writable,i=function(){T.writable||n()},r=T._writableState&&T._writableState.finished,n=function(){t=!1,r=!0,l||p.call(T)},a=T._readableState&&T._readableState.endEmitted,s=function(){l=!1,a=!0,t||p.call(T)},u=function(y){p.call(T,y)},f=function(){var y;return l&&!a?(T._readableState&&T._readableState.ended||(y=new M),p.call(T,y)):t&&!r?(T._writableState&&T._writableState.ended||(y=new M),p.call(T,y)):void 0},c=function(){T.req.on("finish",n)};return function(y){return y.setHeader&&"function"==typeof y.abort}(T)?(T.on("complete",n),T.on("abort",f),T.req?c():T.on("request",c)):t&&!T._writableState&&(T.on("end",i),T.on("close",i)),T.on("end",s),T.on("finish",n),!1!==_.error&&T.on("error",u),T.on("close",f),function(){T.removeListener("complete",n),T.removeListener("abort",f),T.removeListener("request",c),T.req&&T.req.removeListener("finish",n),T.removeListener("end",i),T.removeListener("close",i),T.removeListener("finish",n),T.removeListener("end",s),T.removeListener("error",u),T.removeListener("close",f)}}},90555:function(ne){ne.exports=function(){throw new Error("Readable.from is not available in the browser")}},38180:function(ne,F,e){"use strict";var M,k=e(92784).i,o=k.ERR_MISSING_ARGS,T=k.ERR_STREAM_DESTROYED;function _(t){if(t)throw t}function p(t){t()}function l(t,i){return t.pipe(i)}ne.exports=function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];var n,u,a=(u=i).length?"function"!=typeof u[u.length-1]?_:u.pop():_;if(Array.isArray(i[0])&&(i=i[0]),i.length<2)throw new o("streams");var s=i.map(function(u,f){var c=f<i.length-1;return function(y,d,m,g){var b,h;b=g,h=!1,g=function(){h||(h=!0,b.apply(void 0,arguments))};var x=!1;y.on("close",function(){x=!0}),void 0===M&&(M=e(15932)),M(y,{readable:d,writable:m},function(b){if(b)return g(b);x=!0,g()});var v=!1;return function(b){if(!x&&!v)return v=!0,function(h){return h.setHeader&&"function"==typeof h.abort}(y)?y.abort():"function"==typeof y.destroy?y.destroy():void g(b||new T("pipe"))}}(u,c,f>0,function(y){n||(n=y),y&&s.forEach(p),c||(s.forEach(p),a(n))})});return i.reduce(l)}},24888:function(ne,F,e){"use strict";var M=e(92784).i.ERR_INVALID_OPT_VALUE;ne.exports={getHighWaterMark:function(k,o,T,_){var l,p=null!=(l=o).highWaterMark?l.highWaterMark:_?l[T]:null;if(null!=p){if(!isFinite(p)||Math.floor(p)!==p||p<0)throw new M(_?T:"highWaterMark",p);return Math.floor(p)}return k.objectMode?16:16384}}},4776:function(ne,F,e){ne.exports=e(61252).EventEmitter},86032:function(ne,F,e){"use strict";var M=e(30456).Buffer,k=M.isEncoding||function(a){switch((a=""+a)&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(a){var s;switch(this.encoding=function(u){var f=function(c){if(!c)return"utf8";for(var y;;)switch(c){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return c;default:if(y)return;c=(""+c).toLowerCase(),y=!0}}(u);if("string"!=typeof f&&(M.isEncoding===k||!k(u)))throw new Error("Unknown encoding: "+u);return f||u}(a),this.encoding){case"utf16le":this.text=p,this.end=l,s=4;break;case"utf8":this.fillLast=_,s=4;break;case"base64":this.text=t,this.end=i,s=3;break;default:return this.write=r,void(this.end=n)}this.lastNeed=0,this.lastTotal=0,this.lastChar=M.allocUnsafe(s)}function T(a){return a<=127?0:a>>5==6?2:a>>4==14?3:a>>3==30?4:a>>6==2?-1:-2}function _(a){var s=this.lastTotal-this.lastNeed,u=function(f,c,y){if(128!=(192&c[0]))return f.lastNeed=0,"\ufffd";if(f.lastNeed>1&&c.length>1){if(128!=(192&c[1]))return f.lastNeed=1,"\ufffd";if(f.lastNeed>2&&c.length>2&&128!=(192&c[2]))return f.lastNeed=2,"\ufffd"}}(this,a);return void 0!==u?u:this.lastNeed<=a.length?(a.copy(this.lastChar,s,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(a.copy(this.lastChar,s,0,a.length),void(this.lastNeed-=a.length))}function p(a,s){if((a.length-s)%2==0){var u=a.toString("utf16le",s);if(u){var f=u.charCodeAt(u.length-1);if(f>=55296&&f<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],u.slice(0,-1)}return u}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=a[a.length-1],a.toString("utf16le",s,a.length-1)}function l(a){var s=a&&a.length?this.write(a):"";return this.lastNeed?s+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):s}function t(a,s){var u=(a.length-s)%3;return 0===u?a.toString("base64",s):(this.lastNeed=3-u,this.lastTotal=3,1===u?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]),a.toString("base64",s,a.length-u))}function i(a){var s=a&&a.length?this.write(a):"";return this.lastNeed?s+this.lastChar.toString("base64",0,3-this.lastNeed):s}function r(a){return a.toString(this.encoding)}function n(a){return a&&a.length?this.write(a):""}F.o=o,o.prototype.write=function(a){if(0===a.length)return"";var s,u;if(this.lastNeed){if(void 0===(s=this.fillLast(a)))return"";u=this.lastNeed,this.lastNeed=0}else u=0;return u<a.length?s?s+this.text(a,u):this.text(a,u):s||""},o.prototype.end=function(a){var s=a&&a.length?this.write(a):"";return this.lastNeed?s+"\ufffd":s},o.prototype.text=function(a,s){var u=function(c,y,d){var m=y.length-1;if(m<d)return 0;var g=T(y[m]);return g>=0?(g>0&&(c.lastNeed=g-1),g):--m<d||-2===g?0:(g=T(y[m]))>=0?(g>0&&(c.lastNeed=g-2),g):--m<d||-2===g?0:(g=T(y[m]))>=0?(g>0&&(2===g?g=0:c.lastNeed=g-3),g):0}(this,a,s);if(!this.lastNeed)return a.toString("utf8",s);this.lastTotal=u;var f=a.length-(u-this.lastNeed);return a.copy(this.lastChar,0,f),a.toString("utf8",s,f)},o.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length),this.lastNeed-=a.length}},55619:function(ne,F,e){var M=e(45408),k=e(86844)("stream-parser");ne.exports=function(c){var y=c&&"function"==typeof c._transform;if(!(y||c&&"function"==typeof c._write))throw new Error("must pass a Writable or Transform stream in");k("extending Parser into stream"),c._bytes=t,c._skipBytes=i,y&&(c._passthrough=r),y?c._transform=a:c._write=n};var o=-1,T=0,_=1,p=2;function l(c){k("initializing parser stream"),c._parserBytesLeft=0,c._parserBuffers=[],c._parserBuffered=0,c._parserState=o,c._parserCallback=null,"function"==typeof c.push&&(c._parserOutput=c.push.bind(c)),c._parserInit=!0}function t(c,y){M(!this._parserCallback,'there is already a "callback" set!'),M(isFinite(c)&&c>0,'can only buffer a finite number of bytes > 0, got "'+c+'"'),this._parserInit||l(this),k("buffering %o bytes",c),this._parserBytesLeft=c,this._parserCallback=y,this._parserState=T}function i(c,y){M(!this._parserCallback,'there is already a "callback" set!'),M(c>0,'can only skip > 0 bytes, got "'+c+'"'),this._parserInit||l(this),k("skipping %o bytes",c),this._parserBytesLeft=c,this._parserCallback=y,this._parserState=_}function r(c,y){M(!this._parserCallback,'There is already a "callback" set!'),M(c>0,'can only pass through > 0 bytes, got "'+c+'"'),this._parserInit||l(this),k("passing through %o bytes",c),this._parserBytesLeft=c,this._parserCallback=y,this._parserState=p}function n(c,y,d){this._parserInit||l(this),k("write(%o bytes)",c.length),"function"==typeof y&&(d=y),u(this,c,null,d)}function a(c,y,d){this._parserInit||l(this),k("transform(%o bytes)",c.length),"function"!=typeof y&&(y=this._parserOutput),u(this,c,y,d)}function s(c,y,d,m){if(c._parserBytesLeft-=y.length,k("%o bytes left for stream piece",c._parserBytesLeft),c._parserState===T?(c._parserBuffers.push(y),c._parserBuffered+=y.length):c._parserState===p&&d(y),0!==c._parserBytesLeft)return m;var g=c._parserCallback;if(g&&c._parserState===T&&c._parserBuffers.length>1&&(y=Buffer.concat(c._parserBuffers,c._parserBuffered)),c._parserState!==T&&(y=null),c._parserCallback=null,c._parserBuffered=0,c._parserState=o,c._parserBuffers.splice(0),g){var x=[];y&&x.push(y),d&&x.push(d);var v=g.length>x.length;v&&x.push(f(m));var b=g.apply(c,x);if(!v||m===b)return m}}var u=f(function c(y,d,m,g){return y._parserBytesLeft<=0?g(new Error("got data but not currently parsing anything")):d.length<=y._parserBytesLeft?function(){return s(y,d,m,g)}:function(){var x=d.slice(0,y._parserBytesLeft);return s(y,x,m,function(v){return v?g(v):d.length>x.length?function(){return c(y,d.slice(x.length),m,g)}:void 0})}});function f(c){return function(){for(var y=c.apply(this,arguments);"function"==typeof y;)y=y();return y}}},86844:function(ne,F,e){var M=e(4168);function k(){var o;try{o=F.storage.debug}catch{}return!o&&void 0!==M&&"env"in M&&(o=M.env.DEBUG),o}(F=ne.exports=e(89416)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},F.formatArgs=function(o){var T=this.useColors;if(o[0]=(T?"%c":"")+this.namespace+(T?" %c":" ")+o[0]+(T?"%c ":" ")+"+"+F.humanize(this.diff),T){var _="color: "+this.color;o.splice(1,0,_,"color: inherit");var p=0,l=0;o[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(p++,"%c"===t&&(l=p))}),o.splice(l,0,_)}},F.save=function(o){try{null==o?F.storage.removeItem("debug"):F.storage.debug=o}catch{}},F.load=k,F.useColors=function(){return!(typeof window>"u"||!window.process||"renderer"!==window.process.type)||typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},F.storage=typeof chrome<"u"&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),F.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],F.formatters.j=function(o){try{return JSON.stringify(o)}catch(T){return"[UnexpectedJSONParseError]: "+T.message}},F.enable(k())},89416:function(ne,F,e){var M;function k(o){function T(){if(T.enabled){var _=T,p=+new Date;_.diff=p-(M||p),_.prev=M,_.curr=p,M=p;for(var t=new Array(arguments.length),i=0;i<t.length;i++)t[i]=arguments[i];t[0]=F.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var r=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(n,a){if("%%"===n)return n;r++;var s=F.formatters[a];return"function"==typeof s&&(n=s.call(_,t[r]),t.splice(r,1),r--),n}),F.formatArgs.call(_,t),(T.log||F.log||console.log.bind(console)).apply(_,t)}}return T.namespace=o,T.enabled=F.enabled(o),T.useColors=F.useColors(),T.color=function(_){var p,l=0;for(p in _)l=(l<<5)-l+_.charCodeAt(p),l|=0;return F.colors[Math.abs(l)%F.colors.length]}(o),"function"==typeof F.init&&F.init(T),T}(F=ne.exports=k.debug=k.default=k).coerce=function(o){return o instanceof Error?o.stack||o.message:o},F.disable=function(){F.enable("")},F.enable=function(o){F.save(o),F.names=[],F.skips=[];for(var T=("string"==typeof o?o:"").split(/[\s,]+/),_=T.length,p=0;p<_;p++)T[p]&&("-"===(o=T[p].replace(/\*/g,".*?"))[0]?F.skips.push(new RegExp("^"+o.substr(1)+"$")):F.names.push(new RegExp("^"+o+"$")))},F.enabled=function(o){var T,_;for(T=0,_=F.skips.length;T<_;T++)if(F.skips[T].test(o))return!1;for(T=0,_=F.names.length;T<_;T++)if(F.names[T].test(o))return!0;return!1},F.humanize=e(93744),F.names=[],F.skips=[],F.formatters={}},93744:function(ne){var F=1e3,e=60*F,M=60*e,k=24*M;function o(T,_,p){if(!(T<_))return T<1.5*_?Math.floor(T/_)+" "+p:Math.ceil(T/_)+" "+p+"s"}ne.exports=function(T,_){_=_||{};var p,t,l=typeof T;if("string"===l&&T.length>0)return function(t){if(!((t=String(t)).length>100)){var i=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(i){var r=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"days":case"day":case"d":return r*k;case"hours":case"hour":case"hrs":case"hr":case"h":return r*M;case"minutes":case"minute":case"mins":case"min":case"m":return r*e;case"seconds":case"second":case"secs":case"sec":case"s":return r*F;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(T);if("number"===l&&!1===isNaN(T))return _.long?o(p=T,k,"day")||o(p,M,"hour")||o(p,e,"minute")||o(p,F,"second")||p+" ms":(t=T)>=k?Math.round(t/k)+"d":t>=M?Math.round(t/M)+"h":t>=e?Math.round(t/e)+"m":t>=F?Math.round(t/F)+"s":t+"ms";throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(T))}},39956:function(ne,F,e){"use strict";var M=e(32868);ne.exports=function(k,o,T){if(null==k)throw Error("First argument should be a string");if(null==o)throw Error("Separator should be a string or a RegExp");T?("string"==typeof T||Array.isArray(T))&&(T={ignore:T}):T={},null==T.escape&&(T.escape=!0),null==T.ignore?T.ignore=["[]","()","{}","<>",'""',"''","``","\u201c\u201d","\xab\xbb"]:("string"==typeof T.ignore&&(T.ignore=[T.ignore]),T.ignore=T.ignore.map(function(n){return 1===n.length&&(n+=n),n}));var _=M.parse(k,{flat:!0,brackets:T.ignore}),p=_[0].split(o);if(T.escape){for(var l=[],t=0;t<p.length;t++){var i=p[t];"\\"===i[i.length-1]&&"\\"!==i[i.length-2]?(l.push(i+o+p[t+1]),t++):l.push(i)}p=l}for(t=0;t<p.length;t++)_[0]=p[t],p[t]=M.stringify(_,{flat:!0});return p}},78484:function(ne){"use strict";ne.exports=function(F){for(var e=F.length,M=new Array(e),k=new Array(e),o=new Array(e),T=new Array(e),_=new Array(e),p=new Array(e),l=0;l<e;++l)M[l]=-1,k[l]=0,o[l]=!1,T[l]=0,_[l]=-1,p[l]=[];var t,i=0,r=[],n=[];function a(f){var c=[f],y=[f];for(M[f]=k[f]=i,o[f]=!0,i+=1;y.length>0;){var d=F[f=y[y.length-1]];if(T[f]<d.length){for(var m=T[f];m<d.length;++m){var g=d[m];if(M[g]<0){M[g]=k[g]=i,o[g]=!0,i+=1,c.push(g),y.push(g);break}o[g]&&(k[f]=0|Math.min(k[f],k[g])),_[g]>=0&&p[f].push(_[g])}T[f]=m}else{if(k[f]===M[f]){var x=[],v=[],b=0;for(m=c.length-1;m>=0;--m){var h=c[m];if(o[h]=!1,x.push(h),v.push(p[h]),b+=p[h].length,_[h]=r.length,h===f){c.length=m;break}}r.push(x);var S=new Array(b);for(m=0;m<v.length;m++)for(var w=0;w<v[m].length;w++)S[--b]=v[m][w];n.push(S)}y.pop()}}}for(l=0;l<e;++l)M[l]<0&&a(l);for(l=0;l<n.length;l++){var s=n[l];if(0!==s.length){s.sort(function(f,c){return f-c}),t=[s[0]];for(var u=1;u<s.length;u++)s[u]!==s[u-1]&&t.push(s[u]);n[l]=t}}return{components:r,adjacencyList:n}}},92848:function(ne,F,e){"use strict";e.r(F);var M=2*Math.PI,k=function(_,p,l,t,i,r,n){var a=_.x,s=_.y;return{x:t*(a*=p)-i*(s*=l)+r,y:i*a+t*s+n}},o=function(_,p){var l=1.5707963267948966===p?.551915024494:-1.5707963267948966===p?-.551915024494:1.3333333333333333*Math.tan(p/4),t=Math.cos(_),i=Math.sin(_),r=Math.cos(_+p),n=Math.sin(_+p);return[{x:t-i*l,y:i+t*l},{x:r+n*l,y:n-r*l},{x:r,y:n}]},T=function(_,p,l,t){var i=_*l+p*t;return i>1&&(i=1),i<-1&&(i=-1),(_*t-p*l<0?-1:1)*Math.acos(i)};F.default=function(_){var p=_.px,l=_.py,t=_.cx,i=_.cy,r=_.rx,n=_.ry,a=_.xAxisRotation,s=void 0===a?0:a,u=_.largeArcFlag,f=void 0===u?0:u,c=_.sweepFlag,y=void 0===c?0:c,d=[];if(0===r||0===n)return[];var m=Math.sin(s*M/360),g=Math.cos(s*M/360),x=g*(p-t)/2+m*(l-i)/2,v=-m*(p-t)/2+g*(l-i)/2;if(0===x&&0===v)return[];r=Math.abs(r),n=Math.abs(n);var b=Math.pow(x,2)/Math.pow(r,2)+Math.pow(v,2)/Math.pow(n,2);b>1&&(r*=Math.sqrt(b),n*=Math.sqrt(b));var S=function(R,j){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return function(Y,B){var V=[],q=!0,ie=!1,te=void 0;try{for(var ee,$=Y[Symbol.iterator]();!(q=(ee=$.next()).done)&&(V.push(ee.value),4!==V.length);q=!0);}catch(J){ie=!0,te=J}finally{try{!q&&$.return&&$.return()}finally{if(ie)throw te}}return V}(R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(function(R,j,Y,B,V,q,ie,te,ee,$,J,X){var ae=Math.pow(V,2),ce=Math.pow(q,2),le=Math.pow(J,2),pe=Math.pow(X,2),we=ae*ce-ae*pe-ce*le;we<0&&(we=0),we/=ae*pe+ce*le;var Te=(we=Math.sqrt(we)*(ie===te?-1:1))*V/q*X,ye=we*-q/V*J,ve=$*Te-ee*ye+(R+Y)/2,xe=ee*Te+$*ye+(j+B)/2,Ce=(J-Te)/V,Oe=(X-ye)/q,be=(-J-Te)/V,ue=(-X-ye)/q,se=T(1,0,Ce,Oe),ge=T(Ce,Oe,be,ue);return 0===te&&ge>0&&(ge-=M),1===te&&ge<0&&(ge+=M),[ve,xe,se,ge]}(p,l,t,i,r,n,f,y,m,g,x,v)),w=S[0],E=S[1],P=S[2],I=S[3],O=Math.abs(I)/(M/4);Math.abs(1-O)<1e-7&&(O=1);var z=Math.max(Math.ceil(O),1);I/=z;for(var U=0;U<z;U++)d.push(o(P,I)),P+=I;return d.map(function(R){var j=k(R[0],r,n,g,m,w,E),Y=j.x,B=j.y,V=k(R[1],r,n,g,m,w,E),q=V.x,ie=V.y,te=k(R[2],r,n,g,m,w,E);return{x1:Y,y1:B,x2:q,y2:ie,x:te.x,y:te.y}})}},74840:function(ne,F,e){"use strict";var M=e(21984),k=e(49972),o=e(41976),T=e(53520),_=e(45408);ne.exports=function(p){if(Array.isArray(p)&&1===p.length&&"string"==typeof p[0]&&(p=p[0]),"string"==typeof p&&(_(T(p),"String is not an SVG path."),p=M(p)),_(Array.isArray(p),"Argument should be a string or an array of path segments."),p=k(p),!(p=o(p)).length)return[0,0,0,0];for(var l=[1/0,1/0,-1/0,-1/0],t=0,i=p.length;t<i;t++)for(var r=p[t].slice(1),n=0;n<r.length;n+=2)r[n+0]<l[0]&&(l[0]=r[n+0]),r[n+1]<l[1]&&(l[1]=r[n+1]),r[n+0]>l[2]&&(l[2]=r[n+0]),r[n+1]>l[3]&&(l[3]=r[n+1]);return l}},41976:function(ne,F,e){"use strict";ne.exports=function(T){for(var _,p=[],l=0,t=0,i=0,r=0,n=null,a=null,s=0,u=0,f=0,c=T.length;f<c;f++){var y=T[f],d=y[0];switch(d){case"M":i=y[1],r=y[2];break;case"A":var m=M({px:s,py:u,cx:y[6],cy:y[7],rx:y[1],ry:y[2],xAxisRotation:y[3],largeArcFlag:y[4],sweepFlag:y[5]});if(!m.length)continue;for(var g,x=0;x<m.length;x++)y=["C",(g=m[x]).x1,g.y1,g.x2,g.y2,g.x,g.y],x<m.length-1&&p.push(y);break;case"S":var v=s,b=u;"C"!=_&&"S"!=_||(v+=v-l,b+=b-t),y=["C",v,b,y[1],y[2],y[3],y[4]];break;case"T":"Q"==_||"T"==_?(n=2*s-n,a=2*u-a):(n=s,a=u),y=o(s,u,n,a,y[1],y[2]);break;case"Q":n=y[1],a=y[2],y=o(s,u,y[1],y[2],y[3],y[4]);break;case"L":y=k(s,u,y[1],y[2]);break;case"H":y=k(s,u,y[1],u);break;case"V":y=k(s,u,s,y[1]);break;case"Z":y=k(s,u,i,r)}_=d,s=y[y.length-2],u=y[y.length-1],y.length>4?(l=y[y.length-4],t=y[y.length-3]):(l=s,t=u),p.push(y)}return p};var M=e(92848);function k(T,_,p,l){return["C",T,_,p,l,p,l]}function o(T,_,p,l,t,i){return["C",T/3+.6666666666666666*p,_/3+.6666666666666666*l,t/3+.6666666666666666*p,i/3+.6666666666666666*l,t,i]}},20472:function(ne,F,e){"use strict";var M,k=e(74840),o=e(21984),T=e(22235),_=e(53520),p=e(29620),l=document.createElement("canvas"),t=l.getContext("2d");ne.exports=function(i,r){if(!_(i))throw Error("Argument should be valid svg path string");var n,a;r||(r={}),r.shape?(n=r.shape[0],a=r.shape[1]):(n=l.width=r.w||r.width||200,a=l.height=r.h||r.height||200);var s=Math.min(n,a),u=r.stroke||0,f=r.viewbox||r.viewBox||k(i),c=[n/(f[2]-f[0]),a/(f[3]-f[1])],y=Math.min(c[0]||0,c[1]||0)/2;if(t.fillStyle="black",t.fillRect(0,0,n,a),t.fillStyle="white",u&&("number"!=typeof u&&(u=1),t.strokeStyle=u>0?"white":"black",t.lineWidth=Math.abs(u)),t.translate(.5*n,.5*a),t.scale(y,y),function(){if(null!=M)return M;var g=document.createElement("canvas").getContext("2d");if(g.canvas.width=g.canvas.height=1,!window.Path2D)return M=!1;var x=new Path2D("M0,0h1v1h-1v-1Z");g.fillStyle="black",g.fill(x);var v=g.getImageData(0,0,1,1);return M=v&&v.data&&255===v.data[3]}()){var d=new Path2D(i);t.fill(d),u&&t.stroke(d)}else{var m=o(i);T(t,m),t.fill(),u&&t.stroke()}return t.setTransform(1,0,0,1,0,0),p(t,{cutoff:null!=r.cutoff?r.cutoff:.5,radius:null!=r.radius?r.radius:.5*s})}},49760:function(ne,F,e){var M;!function(k){var o=/^\s+/,T=/\s+$/,_=0,p=k.round,l=k.min,t=k.max,i=k.random;function r(J,X){if(X=X||{},(J=J||"")instanceof r)return J;if(!(this instanceof r))return new r(J,X);var ce,pe,we,Te,ye,ve,xe,Ce,Oe,be,ae=(Te={r:0,g:0,b:0},ye=1,ve=null,xe=null,Ce=null,Oe=!1,be=!1,"string"==typeof(ce=J)&&(ce=function(ue){ue=ue.replace(o,"").replace(T,"").toLowerCase();var se,ge=!1;if(P[ue])ue=P[ue],ge=!0;else if("transparent"==ue)return{r:0,g:0,b:0,a:0,format:"name"};return(se=ee.rgb.exec(ue))?{r:se[1],g:se[2],b:se[3]}:(se=ee.rgba.exec(ue))?{r:se[1],g:se[2],b:se[3],a:se[4]}:(se=ee.hsl.exec(ue))?{h:se[1],s:se[2],l:se[3]}:(se=ee.hsla.exec(ue))?{h:se[1],s:se[2],l:se[3],a:se[4]}:(se=ee.hsv.exec(ue))?{h:se[1],s:se[2],v:se[3]}:(se=ee.hsva.exec(ue))?{h:se[1],s:se[2],v:se[3],a:se[4]}:(se=ee.hex8.exec(ue))?{r:R(se[1]),g:R(se[2]),b:R(se[3]),a:V(se[4]),format:ge?"name":"hex8"}:(se=ee.hex6.exec(ue))?{r:R(se[1]),g:R(se[2]),b:R(se[3]),format:ge?"name":"hex"}:(se=ee.hex4.exec(ue))?{r:R(se[1]+""+se[1]),g:R(se[2]+""+se[2]),b:R(se[3]+""+se[3]),a:V(se[4]+""+se[4]),format:ge?"name":"hex8"}:!!(se=ee.hex3.exec(ue))&&{r:R(se[1]+""+se[1]),g:R(se[2]+""+se[2]),b:R(se[3]+""+se[3]),format:ge?"name":"hex"}}(ce)),"object"==typeof ce&&($(ce.r)&&$(ce.g)&&$(ce.b)?(pe=ce.g,we=ce.b,Te={r:255*z(ce.r,255),g:255*z(pe,255),b:255*z(we,255)},Oe=!0,be="%"===String(ce.r).substr(-1)?"prgb":"rgb"):$(ce.h)&&$(ce.s)&&$(ce.v)?(ve=Y(ce.s),xe=Y(ce.v),Te=function(ue,se,ge){ue=6*z(ue,360),se=z(se,100),ge=z(ge,100);var Ie=k.floor(ue),ke=ue-Ie,Se=ge*(1-se),Pe=ge*(1-ke*se),Fe=ge*(1-(1-ke)*se),Be=Ie%6;return{r:255*[ge,Pe,Se,Se,Fe,ge][Be],g:255*[Fe,ge,ge,Pe,Se,Se][Be],b:255*[Se,Se,Fe,ge,ge,Pe][Be]}}(ce.h,ve,xe),Oe=!0,be="hsv"):$(ce.h)&&$(ce.s)&&$(ce.l)&&(ve=Y(ce.s),Ce=Y(ce.l),Te=function(ue,se,ge){var Ie,ke,Se;function Pe(me,Me,Le){return Le<0&&(Le+=1),Le>1&&(Le-=1),Le<1/6?me+6*(Me-me)*Le:Le<.5?Me:Le<2/3?me+(Me-me)*(2/3-Le)*6:me}if(ue=z(ue,360),se=z(se,100),ge=z(ge,100),0===se)Ie=ke=Se=ge;else{var Fe=ge<.5?ge*(1+se):ge+se-ge*se,Be=2*ge-Fe;Ie=Pe(Be,Fe,ue+1/3),ke=Pe(Be,Fe,ue),Se=Pe(Be,Fe,ue-1/3)}return{r:255*Ie,g:255*ke,b:255*Se}}(ce.h,ve,Ce),Oe=!0,be="hsl"),ce.hasOwnProperty("a")&&(ye=ce.a)),ye=O(ye),{ok:Oe,format:ce.format||be,r:l(255,t(Te.r,0)),g:l(255,t(Te.g,0)),b:l(255,t(Te.b,0)),a:ye});this._originalInput=J,this._r=ae.r,this._g=ae.g,this._b=ae.b,this._a=ae.a,this._roundA=p(100*this._a)/100,this._format=X.format||ae.format,this._gradientType=X.gradientType,this._r<1&&(this._r=p(this._r)),this._g<1&&(this._g=p(this._g)),this._b<1&&(this._b=p(this._b)),this._ok=ae.ok,this._tc_id=_++}function n(J,X,ae){J=z(J,255),X=z(X,255),ae=z(ae,255);var ce,le,pe=t(J,X,ae),we=l(J,X,ae),Te=(pe+we)/2;if(pe==we)ce=le=0;else{var ye=pe-we;switch(le=Te>.5?ye/(2-pe-we):ye/(pe+we),pe){case J:ce=(X-ae)/ye+(X<ae?6:0);break;case X:ce=(ae-J)/ye+2;break;case ae:ce=(J-X)/ye+4}ce/=6}return{h:ce,s:le,l:Te}}function a(J,X,ae){J=z(J,255),X=z(X,255),ae=z(ae,255);var ce,le,pe=t(J,X,ae),we=l(J,X,ae),Te=pe,ye=pe-we;if(le=0===pe?0:ye/pe,pe==we)ce=0;else{switch(pe){case J:ce=(X-ae)/ye+(X<ae?6:0);break;case X:ce=(ae-J)/ye+2;break;case ae:ce=(J-X)/ye+4}ce/=6}return{h:ce,s:le,v:Te}}function s(J,X,ae,ce){var le=[j(p(J).toString(16)),j(p(X).toString(16)),j(p(ae).toString(16))];return ce&&le[0].charAt(0)==le[0].charAt(1)&&le[1].charAt(0)==le[1].charAt(1)&&le[2].charAt(0)==le[2].charAt(1)?le[0].charAt(0)+le[1].charAt(0)+le[2].charAt(0):le.join("")}function u(J,X,ae,ce){return[j(B(ce)),j(p(J).toString(16)),j(p(X).toString(16)),j(p(ae).toString(16))].join("")}function f(J,X){X=0===X?0:X||10;var ae=r(J).toHsl();return ae.s-=X/100,ae.s=U(ae.s),r(ae)}function c(J,X){X=0===X?0:X||10;var ae=r(J).toHsl();return ae.s+=X/100,ae.s=U(ae.s),r(ae)}function y(J){return r(J).desaturate(100)}function d(J,X){X=0===X?0:X||10;var ae=r(J).toHsl();return ae.l+=X/100,ae.l=U(ae.l),r(ae)}function m(J,X){X=0===X?0:X||10;var ae=r(J).toRgb();return ae.r=t(0,l(255,ae.r-p(-X/100*255))),ae.g=t(0,l(255,ae.g-p(-X/100*255))),ae.b=t(0,l(255,ae.b-p(-X/100*255))),r(ae)}function g(J,X){X=0===X?0:X||10;var ae=r(J).toHsl();return ae.l-=X/100,ae.l=U(ae.l),r(ae)}function x(J,X){var ae=r(J).toHsl(),ce=(ae.h+X)%360;return ae.h=ce<0?360+ce:ce,r(ae)}function v(J){var X=r(J).toHsl();return X.h=(X.h+180)%360,r(X)}function b(J){var X=r(J).toHsl(),ae=X.h;return[r(J),r({h:(ae+120)%360,s:X.s,l:X.l}),r({h:(ae+240)%360,s:X.s,l:X.l})]}function h(J){var X=r(J).toHsl(),ae=X.h;return[r(J),r({h:(ae+90)%360,s:X.s,l:X.l}),r({h:(ae+180)%360,s:X.s,l:X.l}),r({h:(ae+270)%360,s:X.s,l:X.l})]}function S(J){var X=r(J).toHsl(),ae=X.h;return[r(J),r({h:(ae+72)%360,s:X.s,l:X.l}),r({h:(ae+216)%360,s:X.s,l:X.l})]}function w(J,X,ae){X=X||6,ae=ae||30;var ce=r(J).toHsl(),le=360/ae,pe=[r(J)];for(ce.h=(ce.h-(le*X>>1)+720)%360;--X;)ce.h=(ce.h+le)%360,pe.push(r(ce));return pe}function E(J,X){X=X||6;for(var ae=r(J).toHsv(),ce=ae.h,le=ae.s,pe=ae.v,we=[],Te=1/X;X--;)we.push(r({h:ce,s:le,v:pe})),pe=(pe+Te)%1;return we}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var J=this.toRgb();return(299*J.r+587*J.g+114*J.b)/1e3},getLuminance:function(){var J,X,ae,ce=this.toRgb();return X=ce.g/255,ae=ce.b/255,.2126*((J=ce.r/255)<=.03928?J/12.92:k.pow((J+.055)/1.055,2.4))+.7152*(X<=.03928?X/12.92:k.pow((X+.055)/1.055,2.4))+.0722*(ae<=.03928?ae/12.92:k.pow((ae+.055)/1.055,2.4))},setAlpha:function(J){return this._a=O(J),this._roundA=p(100*this._a)/100,this},toHsv:function(){var J=a(this._r,this._g,this._b);return{h:360*J.h,s:J.s,v:J.v,a:this._a}},toHsvString:function(){var J=a(this._r,this._g,this._b),X=p(360*J.h),ae=p(100*J.s),ce=p(100*J.v);return 1==this._a?"hsv("+X+", "+ae+"%, "+ce+"%)":"hsva("+X+", "+ae+"%, "+ce+"%, "+this._roundA+")"},toHsl:function(){var J=n(this._r,this._g,this._b);return{h:360*J.h,s:J.s,l:J.l,a:this._a}},toHslString:function(){var J=n(this._r,this._g,this._b),X=p(360*J.h),ae=p(100*J.s),ce=p(100*J.l);return 1==this._a?"hsl("+X+", "+ae+"%, "+ce+"%)":"hsla("+X+", "+ae+"%, "+ce+"%, "+this._roundA+")"},toHex:function(J){return s(this._r,this._g,this._b,J)},toHexString:function(J){return"#"+this.toHex(J)},toHex8:function(J){return ae=this._g,ce=this._b,le=this._a,pe=J,we=[j(p(this._r).toString(16)),j(p(ae).toString(16)),j(p(ce).toString(16)),j(B(le))],pe&&we[0].charAt(0)==we[0].charAt(1)&&we[1].charAt(0)==we[1].charAt(1)&&we[2].charAt(0)==we[2].charAt(1)&&we[3].charAt(0)==we[3].charAt(1)?we[0].charAt(0)+we[1].charAt(0)+we[2].charAt(0)+we[3].charAt(0):we.join("");var ae,ce,le,pe,we},toHex8String:function(J){return"#"+this.toHex8(J)},toRgb:function(){return{r:p(this._r),g:p(this._g),b:p(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+p(this._r)+", "+p(this._g)+", "+p(this._b)+")":"rgba("+p(this._r)+", "+p(this._g)+", "+p(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:p(100*z(this._r,255))+"%",g:p(100*z(this._g,255))+"%",b:p(100*z(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+p(100*z(this._r,255))+"%, "+p(100*z(this._g,255))+"%, "+p(100*z(this._b,255))+"%)":"rgba("+p(100*z(this._r,255))+"%, "+p(100*z(this._g,255))+"%, "+p(100*z(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(I[s(this._r,this._g,this._b,!0)]||!1)},toFilter:function(J){var X="#"+u(this._r,this._g,this._b,this._a),ae=X,ce=this._gradientType?"GradientType = 1, ":"";if(J){var le=r(J);ae="#"+u(le._r,le._g,le._b,le._a)}return"progid:DXImageTransform.Microsoft.gradient("+ce+"startColorstr="+X+",endColorstr="+ae+")"},toString:function(J){var X=!!J;J=J||this._format;var ae=!1;return X||!(this._a<1&&this._a>=0)||"hex"!==J&&"hex6"!==J&&"hex3"!==J&&"hex4"!==J&&"hex8"!==J&&"name"!==J?("rgb"===J&&(ae=this.toRgbString()),"prgb"===J&&(ae=this.toPercentageRgbString()),"hex"!==J&&"hex6"!==J||(ae=this.toHexString()),"hex3"===J&&(ae=this.toHexString(!0)),"hex4"===J&&(ae=this.toHex8String(!0)),"hex8"===J&&(ae=this.toHex8String()),"name"===J&&(ae=this.toName()),"hsl"===J&&(ae=this.toHslString()),"hsv"===J&&(ae=this.toHsvString()),ae||this.toHexString()):"name"===J&&0===this._a?this.toName():this.toRgbString()},clone:function(){return r(this.toString())},_applyModification:function(J,X){var ae=J.apply(null,[this].concat([].slice.call(X)));return this._r=ae._r,this._g=ae._g,this._b=ae._b,this.setAlpha(ae._a),this},lighten:function(){return this._applyModification(d,arguments)},brighten:function(){return this._applyModification(m,arguments)},darken:function(){return this._applyModification(g,arguments)},desaturate:function(){return this._applyModification(f,arguments)},saturate:function(){return this._applyModification(c,arguments)},greyscale:function(){return this._applyModification(y,arguments)},spin:function(){return this._applyModification(x,arguments)},_applyCombination:function(J,X){return J.apply(null,[this].concat([].slice.call(X)))},analogous:function(){return this._applyCombination(w,arguments)},complement:function(){return this._applyCombination(v,arguments)},monochromatic:function(){return this._applyCombination(E,arguments)},splitcomplement:function(){return this._applyCombination(S,arguments)},triad:function(){return this._applyCombination(b,arguments)},tetrad:function(){return this._applyCombination(h,arguments)}},r.fromRatio=function(J,X){if("object"==typeof J){var ae={};for(var ce in J)J.hasOwnProperty(ce)&&(ae[ce]="a"===ce?J[ce]:Y(J[ce]));J=ae}return r(J,X)},r.equals=function(J,X){return!(!J||!X)&&r(J).toRgbString()==r(X).toRgbString()},r.random=function(){return r.fromRatio({r:i(),g:i(),b:i()})},r.mix=function(J,X,ae){ae=0===ae?0:ae||50;var ce=r(J).toRgb(),le=r(X).toRgb(),pe=ae/100;return r({r:(le.r-ce.r)*pe+ce.r,g:(le.g-ce.g)*pe+ce.g,b:(le.b-ce.b)*pe+ce.b,a:(le.a-ce.a)*pe+ce.a})},r.readability=function(J,X){var ae=r(J),ce=r(X);return(k.max(ae.getLuminance(),ce.getLuminance())+.05)/(k.min(ae.getLuminance(),ce.getLuminance())+.05)},r.isReadable=function(J,X,ae){var ce,le,pe,we,Te,ye=r.readability(J,X);switch(le=!1,(pe=ae,"AA"!==(we=((pe=pe||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==we&&(we="AA"),"small"!==(Te=(pe.size||"small").toLowerCase())&&"large"!==Te&&(Te="small"),ce={level:we,size:Te}).level+ce.size){case"AAsmall":case"AAAlarge":le=ye>=4.5;break;case"AAlarge":le=ye>=3;break;case"AAAsmall":le=ye>=7}return le},r.mostReadable=function(J,X,ae){var ce,le,pe,we,Te=null,ye=0;le=(ae=ae||{}).includeFallbackColors,pe=ae.level,we=ae.size;for(var ve=0;ve<X.length;ve++)(ce=r.readability(J,X[ve]))>ye&&(ye=ce,Te=r(X[ve]));return r.isReadable(J,Te,{level:pe,size:we})||!le?Te:(ae.includeFallbackColors=!1,r.mostReadable(J,["#fff","#000"],ae))};var P=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},I=r.hexNames=function(J){var X={};for(var ae in J)J.hasOwnProperty(ae)&&(X[J[ae]]=ae);return X}(P);function O(J){return J=parseFloat(J),(isNaN(J)||J<0||J>1)&&(J=1),J}function z(J,X){var ce;"string"==typeof(ce=J)&&-1!=ce.indexOf(".")&&1===parseFloat(ce)&&(J="100%");var ae=function(ce){return"string"==typeof ce&&-1!=ce.indexOf("%")}(J);return J=l(X,t(0,parseFloat(J))),ae&&(J=parseInt(J*X,10)/100),k.abs(J-X)<1e-6?1:J%X/parseFloat(X)}function U(J){return l(1,t(0,J))}function R(J){return parseInt(J,16)}function j(J){return 1==J.length?"0"+J:""+J}function Y(J){return J<=1&&(J=100*J+"%"),J}function B(J){return k.round(255*parseFloat(J)).toString(16)}function V(J){return R(J)/255}var q,ie,te,ee=(ie="[\\s|\\(]+("+(q="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+q+")[,|\\s]+("+q+")\\s*\\)?",te="[\\s|\\(]+("+q+")[,|\\s]+("+q+")[,|\\s]+("+q+")[,|\\s]+("+q+")\\s*\\)?",{CSS_UNIT:new RegExp(q),rgb:new RegExp("rgb"+ie),rgba:new RegExp("rgba"+te),hsl:new RegExp("hsl"+ie),hsla:new RegExp("hsla"+te),hsv:new RegExp("hsv"+ie),hsva:new RegExp("hsva"+te),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function $(J){return!!ee.CSS_UNIT.exec(J)}ne.exports?ne.exports=r:void 0===(M=function(){return r}.call(F,e,F,ne))||(ne.exports=M)}(Math)},37816:function(ne){"use strict";ne.exports=e,ne.exports.float32=ne.exports.float=e,ne.exports.fract32=ne.exports.fract=function(M,k){if(M.length){if(M instanceof Float32Array)return new Float32Array(M.length);k instanceof Float32Array||(k=e(M));for(var o=0,T=k.length;o<T;o++)k[o]=M[o]-k[o];return k}return e(M-e(M))};var F=new Float32Array(1);function e(M){return M.length?M instanceof Float32Array?M:new Float32Array(M):(F[0]=M,F[0])}},23464:function(ne,F,e){"use strict";var M=e(65819);ne.exports=T;var k=96;function o(_,p){var l=M(getComputedStyle(_).getPropertyValue(p));return l[0]*T(l[1],_)}function T(_,p){switch(p=p||document.body,_=(_||"px").trim().toLowerCase(),p!==window&&p!==document||(p=document.body),_){case"%":return p.clientHeight/100;case"ch":case"ex":return function(l,t){var i=document.createElement("div");i.style["font-size"]="128"+l,t.appendChild(i);var r=o(i,"font-size")/128;return t.removeChild(i),r}(_,p);case"em":return o(p,"font-size");case"rem":return o(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return k;case"cm":return k/2.54;case"mm":return k/25.4;case"pt":return k/72;case"pc":return k/6}return 1}},55712:function(ne,F,e){"use strict";function M(T){return T}function k(T,_){return"string"==typeof _&&(_=T.objects[_]),"GeometryCollection"===_.type?{type:"FeatureCollection",features:_.geometries.map(function(p){return o(T,p)})}:o(T,_)}function o(T,_){var p=_.id,l=_.bbox,t=null==_.properties?{}:_.properties,i=function(r,n){var a=function(m){if(null==m)return M;var g,x,v=m.scale[0],b=m.scale[1],h=m.translate[0],S=m.translate[1];return function(w,E){E||(g=x=0);var P=2,I=w.length,O=new Array(I);for(O[0]=(g+=w[0])*v+h,O[1]=(x+=w[1])*b+S;P<I;)O[P]=w[P],++P;return O}}(r.transform),s=r.arcs;function u(m,g){g.length&&g.pop();for(var x=s[m<0?~m:m],v=0,b=x.length;v<b;++v)g.push(a(x[v],v));m<0&&function(h,S){for(var w,E=h.length,P=E-S;P<--E;)w=h[P],h[P++]=h[E],h[E]=w}(g,b)}function f(m){return a(m)}function c(m){for(var g=[],x=0,v=m.length;x<v;++x)u(m[x],g);return g.length<2&&g.push(g[0]),g}function y(m){for(var g=c(m);g.length<4;)g.push(g[0]);return g}function d(m){return m.map(y)}return function m(g){var x,v=g.type;switch(v){case"GeometryCollection":return{type:v,geometries:g.geometries.map(m)};case"Point":x=f(g.coordinates);break;case"MultiPoint":x=g.coordinates.map(f);break;case"LineString":x=c(g.arcs);break;case"MultiLineString":x=g.arcs.map(c);break;case"Polygon":x=d(g.arcs);break;case"MultiPolygon":x=g.arcs.map(d);break;default:return null}return{type:v,coordinates:x}}(n)}(T,_);return null==p&&null==l?{type:"Feature",properties:t,geometry:i}:null==l?{type:"Feature",id:p,properties:t,geometry:i}:{type:"Feature",id:p,bbox:l,properties:t,geometry:i}}e.d(F,{NO:function(){return k}})},73384:function(ne,F,e){"use strict";var M=e(54612);ne.exports=function(k){if("function"!=typeof k||!hasOwnProperty.call(k,"length"))return!1;try{if("number"!=typeof k.length||"function"!=typeof k.call||"function"!=typeof k.apply)return!1}catch{return!1}return!M(k)}},57980:function(ne,F,e){"use strict";var M=e(81680),k=e(7328),o=e(33940),T=e(18856),_=function(p,l){return p.replace("%v",T(l))};ne.exports=function(p,l,t){if(!k(t))throw new TypeError(_(l,p));if(!M(p)){if("default"in t)return t.default;if(t.isOptional)return null}var i=o(t.errorMessage);throw M(i)||(i=l),new TypeError(_(i,p))}},32336:function(ne){"use strict";ne.exports=function(F){try{return F.toString()}catch{try{return String(F)}catch{return null}}}},18856:function(ne,F,e){"use strict";var M=e(32336),k=/[\n\r\u2028\u2029]/g;ne.exports=function(o){var T=M(o);return null===T?"<Non-coercible to string value>":(T.length>100&&(T=T.slice(0,99)+"\u2026"),T=T.replace(k,function(_){switch(_){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},7328:function(ne,F,e){"use strict";var M=e(81680),k={object:!0,function:!0,undefined:!0};ne.exports=function(o){return!!M(o)&&hasOwnProperty.call(k,typeof o)}},87396:function(ne,F,e){"use strict";var M=e(57980),k=e(85488);ne.exports=function(o){return k(o)?o:M(o,"%v is not a plain function",arguments[1])}},85488:function(ne,F,e){"use strict";var M=e(73384),k=/^\s*class[\s{/}]/,o=Function.prototype.toString;ne.exports=function(T){return!!M(T)&&!k.test(o.call(T))}},54612:function(ne,F,e){"use strict";var M=e(7328);ne.exports=function(k){if(!M(k))return!1;try{return!!k.constructor&&k.constructor.prototype===k}catch{return!1}}},33940:function(ne,F,e){"use strict";var M=e(81680),k=e(7328),o=Object.prototype.toString;ne.exports=function(T){if(!M(T))return null;if(k(T)){var _=T.toString;if("function"!=typeof _||_===o)return null}try{return""+T}catch{return null}}},18496:function(ne,F,e){"use strict";var M=e(57980),k=e(81680);ne.exports=function(o){return k(o)?o:M(o,"Cannot use %v",arguments[1])}},81680:function(ne){"use strict";ne.exports=function(F){return null!=F}},14144:function(ne,F,e){"use strict";var M=e(308),k=e(10352),o=e(33576).Buffer;e.g.__TYPEDARRAY_POOL||(e.g.__TYPEDARRAY_POOL={UINT8:k([32,0]),UINT16:k([32,0]),UINT32:k([32,0]),BIGUINT64:k([32,0]),INT8:k([32,0]),INT16:k([32,0]),INT32:k([32,0]),BIGINT64:k([32,0]),FLOAT:k([32,0]),DOUBLE:k([32,0]),DATA:k([32,0]),UINT8C:k([32,0]),BUFFER:k([32,0])});var T=typeof Uint8ClampedArray<"u",_=typeof BigUint64Array<"u",p=typeof BigInt64Array<"u",l=e.g.__TYPEDARRAY_POOL;l.UINT8C||(l.UINT8C=k([32,0])),l.BIGUINT64||(l.BIGUINT64=k([32,0])),l.BIGINT64||(l.BIGINT64=k([32,0])),l.BUFFER||(l.BUFFER=k([32,0]));var t=l.DATA,i=l.BUFFER;function r(S){if(S){var E=M.log2(S.length||S.byteLength);t[E].push(S)}}function n(S){S=M.nextPow2(S);var w=M.log2(S),E=t[w];return E.length>0?E.pop():new ArrayBuffer(S)}function a(S){return new Uint8Array(n(S),0,S)}function s(S){return new Uint16Array(n(2*S),0,S)}function u(S){return new Uint32Array(n(4*S),0,S)}function f(S){return new Int8Array(n(S),0,S)}function c(S){return new Int16Array(n(2*S),0,S)}function y(S){return new Int32Array(n(4*S),0,S)}function d(S){return new Float32Array(n(4*S),0,S)}function m(S){return new Float64Array(n(8*S),0,S)}function g(S){return T?new Uint8ClampedArray(n(S),0,S):a(S)}function x(S){return _?new BigUint64Array(n(8*S),0,S):null}function v(S){return p?new BigInt64Array(n(8*S),0,S):null}function b(S){return new DataView(n(S),0,S)}function h(S){S=M.nextPow2(S);var w=M.log2(S),E=i[w];return E.length>0?E.pop():new o(S)}F.free=function(S){if(o.isBuffer(S))i[M.log2(S.length)].push(S);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(S)&&(S=S.buffer),!S)return;var E=0|M.log2(S.length||S.byteLength);t[E].push(S)}},F.freeUint8=F.freeUint16=F.freeUint32=F.freeBigUint64=F.freeInt8=F.freeInt16=F.freeInt32=F.freeBigInt64=F.freeFloat32=F.freeFloat=F.freeFloat64=F.freeDouble=F.freeUint8Clamped=F.freeDataView=function(S){r(S.buffer)},F.freeArrayBuffer=r,F.freeBuffer=function(S){i[M.log2(S.length)].push(S)},F.malloc=function(S,w){if(void 0===w||"arraybuffer"===w)return n(S);switch(w){case"uint8":return a(S);case"uint16":return s(S);case"uint32":return u(S);case"int8":return f(S);case"int16":return c(S);case"int32":return y(S);case"float":case"float32":return d(S);case"double":case"float64":return m(S);case"uint8_clamped":return g(S);case"bigint64":return v(S);case"biguint64":return x(S);case"buffer":return h(S);case"data":case"dataview":return b(S);default:return null}return null},F.mallocArrayBuffer=n,F.mallocUint8=a,F.mallocUint16=s,F.mallocUint32=u,F.mallocInt8=f,F.mallocInt16=c,F.mallocInt32=y,F.mallocFloat32=F.mallocFloat=d,F.mallocFloat64=F.mallocDouble=m,F.mallocUint8Clamped=g,F.mallocBigUint64=x,F.mallocBigInt64=v,F.mallocDataView=b,F.mallocBuffer=h,F.clearCache=function(){for(var S=0;S<32;++S)l.UINT8[S].length=0,l.UINT16[S].length=0,l.UINT32[S].length=0,l.INT8[S].length=0,l.INT16[S].length=0,l.INT32[S].length=0,l.FLOAT[S].length=0,l.DOUBLE[S].length=0,l.BIGUINT64[S].length=0,l.BIGINT64[S].length=0,l.UINT8C[S].length=0,t[S].length=0,i[S].length=0}},92384:function(ne){var F=/[\'\"]/;ne.exports=function(e){return e?(F.test(e.charAt(0))&&(e=e.substr(1)),F.test(e.charAt(e.length-1))&&(e=e.substr(0,e.length-1)),e):""}},45223:function(ne){"use strict";ne.exports=function(F,e,M){Array.isArray(M)||(M=[].slice.call(arguments,2));for(var k=0,o=M.length;k<o;k++){var T=M[k];for(var _ in T)if((void 0===e[_]||Array.isArray(e[_])||F[_]!==e[_])&&_ in e){var p;if(!0===T[_])p=e[_];else if(!1===T[_]||"function"==typeof T[_]&&void 0===(p=T[_](e[_],F,e)))continue;F[_]=p}}return F}},96656:function(ne,F,e){function M(k){try{if(!e.g.localStorage)return!1}catch{return!1}var o=e.g.localStorage[k];return null!=o&&"true"===String(o).toLowerCase()}ne.exports=function(k,o){if(M("noDeprecation"))return k;var T=!1;return function(){if(!T){if(M("throwDeprecation"))throw new Error(o);M("traceDeprecation")?console.trace(o):console.warn(o),T=!0}return k.apply(this,arguments)}}},75272:function(ne){ne.exports=function(F){return F&&"object"==typeof F&&"function"==typeof F.copy&&"function"==typeof F.fill&&"function"==typeof F.readUInt8}},41088:function(ne,F,e){"use strict";var M=e(91148),k=e(84420),o=e(96632),T=e(7728);function _(z){return z.call.bind(z)}var p=typeof BigInt<"u",l=typeof Symbol<"u",t=_(Object.prototype.toString),i=_(Number.prototype.valueOf),r=_(String.prototype.valueOf),n=_(Boolean.prototype.valueOf);if(p)var a=_(BigInt.prototype.valueOf);if(l)var s=_(Symbol.prototype.valueOf);function u(z,U){if("object"!=typeof z)return!1;try{return U(z),!0}catch{return!1}}function f(z){return"[object Map]"===t(z)}function c(z){return"[object Set]"===t(z)}function y(z){return"[object WeakMap]"===t(z)}function d(z){return"[object WeakSet]"===t(z)}function m(z){return"[object ArrayBuffer]"===t(z)}function g(z){return typeof ArrayBuffer<"u"&&(m.working?m(z):z instanceof ArrayBuffer)}function x(z){return"[object DataView]"===t(z)}function v(z){return typeof DataView<"u"&&(x.working?x(z):z instanceof DataView)}F.isArgumentsObject=M,F.isGeneratorFunction=k,F.isTypedArray=T,F.isPromise=function(z){return typeof Promise<"u"&&z instanceof Promise||null!==z&&"object"==typeof z&&"function"==typeof z.then&&"function"==typeof z.catch},F.isArrayBufferView=function(z){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(z):T(z)||v(z)},F.isUint8Array=function(z){return"Uint8Array"===o(z)},F.isUint8ClampedArray=function(z){return"Uint8ClampedArray"===o(z)},F.isUint16Array=function(z){return"Uint16Array"===o(z)},F.isUint32Array=function(z){return"Uint32Array"===o(z)},F.isInt8Array=function(z){return"Int8Array"===o(z)},F.isInt16Array=function(z){return"Int16Array"===o(z)},F.isInt32Array=function(z){return"Int32Array"===o(z)},F.isFloat32Array=function(z){return"Float32Array"===o(z)},F.isFloat64Array=function(z){return"Float64Array"===o(z)},F.isBigInt64Array=function(z){return"BigInt64Array"===o(z)},F.isBigUint64Array=function(z){return"BigUint64Array"===o(z)},f.working=typeof Map<"u"&&f(new Map),F.isMap=function(z){return typeof Map<"u"&&(f.working?f(z):z instanceof Map)},c.working=typeof Set<"u"&&c(new Set),F.isSet=function(z){return typeof Set<"u"&&(c.working?c(z):z instanceof Set)},y.working=typeof WeakMap<"u"&&y(new WeakMap),F.isWeakMap=function(z){return typeof WeakMap<"u"&&(y.working?y(z):z instanceof WeakMap)},d.working=typeof WeakSet<"u"&&d(new WeakSet),F.isWeakSet=function(z){return d(z)},m.working=typeof ArrayBuffer<"u"&&m(new ArrayBuffer),F.isArrayBuffer=g,x.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&x(new DataView(new ArrayBuffer(1),0,1)),F.isDataView=v;var b=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function h(z){return"[object SharedArrayBuffer]"===t(z)}function S(z){return void 0!==b&&(void 0===h.working&&(h.working=h(new b)),h.working?h(z):z instanceof b)}function w(z){return u(z,i)}function E(z){return u(z,r)}function P(z){return u(z,n)}function I(z){return p&&u(z,a)}function O(z){return l&&u(z,s)}F.isSharedArrayBuffer=S,F.isAsyncFunction=function(z){return"[object AsyncFunction]"===t(z)},F.isMapIterator=function(z){return"[object Map Iterator]"===t(z)},F.isSetIterator=function(z){return"[object Set Iterator]"===t(z)},F.isGeneratorObject=function(z){return"[object Generator]"===t(z)},F.isWebAssemblyCompiledModule=function(z){return"[object WebAssembly.Module]"===t(z)},F.isNumberObject=w,F.isStringObject=E,F.isBooleanObject=P,F.isBigIntObject=I,F.isSymbolObject=O,F.isBoxedPrimitive=function(z){return w(z)||E(z)||P(z)||I(z)||O(z)},F.isAnyArrayBuffer=function(z){return typeof Uint8Array<"u"&&(g(z)||S(z))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(z){Object.defineProperty(F,z,{enumerable:!1,value:function(){throw new Error(z+" is not supported in userland")}})})},35840:function(ne,F,e){var M=e(4168),k=Object.getOwnPropertyDescriptors||function(O){for(var z=Object.keys(O),U={},R=0;R<z.length;R++)U[z[R]]=Object.getOwnPropertyDescriptor(O,z[R]);return U},o=/%[sdj%]/g;F.format=function(O){if(!y(O)){for(var z=[],U=0;U<arguments.length;U++)z.push(l(arguments[U]));return z.join(" ")}U=1;for(var R=arguments,j=R.length,Y=String(O).replace(o,function(V){if("%%"===V)return"%";if(U>=j)return V;switch(V){case"%s":return String(R[U++]);case"%d":return Number(R[U++]);case"%j":try{return JSON.stringify(R[U++])}catch{return"[Circular]"}default:return V}}),B=R[U];U<j;B=R[++U])f(B)||!g(B)?Y+=" "+B:Y+=" "+l(B);return Y},F.deprecate=function(O,z){if(void 0!==M&&!0===M.noDeprecation)return O;if(void 0===M)return function(){return F.deprecate(O,z).apply(this,arguments)};var U=!1;return function(){if(!U){if(M.throwDeprecation)throw new Error(z);M.traceDeprecation?console.trace(z):console.error(z),U=!0}return O.apply(this,arguments)}};var T={},_=/^$/;if(M.env.NODE_DEBUG){var p=M.env.NODE_DEBUG;p=p.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),_=new RegExp("^"+p+"$","i")}function l(O,z){var U={seen:[],stylize:i};return arguments.length>=3&&(U.depth=arguments[2]),arguments.length>=4&&(U.colors=arguments[3]),u(z)?U.showHidden=z:z&&F._extend(U,z),d(U.showHidden)&&(U.showHidden=!1),d(U.depth)&&(U.depth=2),d(U.colors)&&(U.colors=!1),d(U.customInspect)&&(U.customInspect=!0),U.colors&&(U.stylize=t),r(U,O,U.depth)}function t(O,z){var U=l.styles[z];return U?"\x1b["+l.colors[U][0]+"m"+O+"\x1b["+l.colors[U][1]+"m":O}function i(O,z){return O}function r(O,z,U){if(O.customInspect&&z&&b(z.inspect)&&z.inspect!==F.inspect&&(!z.constructor||z.constructor.prototype!==z)){var R=z.inspect(U,O);return y(R)||(R=r(O,R,U)),R}var j=function($,J){if(d(J))return $.stylize("undefined","undefined");if(y(J)){var X="'"+JSON.stringify(J).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return $.stylize(X,"string")}return c(J)?$.stylize(""+J,"number"):u(J)?$.stylize(""+J,"boolean"):f(J)?$.stylize("null","null"):void 0}(O,z);if(j)return j;var J,Y=Object.keys(z),B=(J={},Y.forEach(function(X,ae){J[X]=!0}),J);if(O.showHidden&&(Y=Object.getOwnPropertyNames(z)),v(z)&&(Y.indexOf("message")>=0||Y.indexOf("description")>=0))return n(z);if(0===Y.length){if(b(z))return O.stylize("[Function"+(z.name?": "+z.name:"")+"]","special");if(m(z))return O.stylize(RegExp.prototype.toString.call(z),"regexp");if(x(z))return O.stylize(Date.prototype.toString.call(z),"date");if(v(z))return n(z)}var q,ie="",te=!1,ee=["{","}"];return s(z)&&(te=!0,ee=["[","]"]),b(z)&&(ie=" [Function"+(z.name?": "+z.name:"")+"]"),m(z)&&(ie=" "+RegExp.prototype.toString.call(z)),x(z)&&(ie=" "+Date.prototype.toUTCString.call(z)),v(z)&&(ie=" "+n(z)),0!==Y.length||te&&0!=z.length?U<0?m(z)?O.stylize(RegExp.prototype.toString.call(z),"regexp"):O.stylize("[Object]","special"):(O.seen.push(z),q=te?function($,J,X,ae,ce){for(var le=[],pe=0,we=J.length;pe<we;++pe)E(J,String(pe))?le.push(a($,J,X,ae,String(pe),!0)):le.push("");return ce.forEach(function(Te){Te.match(/^\d+$/)||le.push(a($,J,X,ae,Te,!0))}),le}(O,z,U,B,Y):Y.map(function($){return a(O,z,U,B,$,te)}),O.seen.pop(),function($,J,X){return $.reduce(function(ae,ce){return ce.indexOf("\n"),ae+ce.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?X[0]+(""===J?"":J+"\n ")+" "+$.join(",\n  ")+" "+X[1]:X[0]+J+" "+$.join(", ")+" "+X[1]}(q,ie,ee)):ee[0]+ie+ee[1]}function n(O){return"["+Error.prototype.toString.call(O)+"]"}function a(O,z,U,R,j,Y){var B,V,q;if((q=Object.getOwnPropertyDescriptor(z,j)||{value:z[j]}).get?V=O.stylize(q.set?"[Getter/Setter]":"[Getter]","special"):q.set&&(V=O.stylize("[Setter]","special")),E(R,j)||(B="["+j+"]"),V||(O.seen.indexOf(q.value)<0?(V=f(U)?r(O,q.value,null):r(O,q.value,U-1)).indexOf("\n")>-1&&(V=Y?V.split("\n").map(function(ie){return"  "+ie}).join("\n").slice(2):"\n"+V.split("\n").map(function(ie){return"   "+ie}).join("\n")):V=O.stylize("[Circular]","special")),d(B)){if(Y&&j.match(/^\d+$/))return V;(B=JSON.stringify(""+j)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(B=B.slice(1,-1),B=O.stylize(B,"name")):(B=B.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),B=O.stylize(B,"string"))}return B+": "+V}function s(O){return Array.isArray(O)}function u(O){return"boolean"==typeof O}function f(O){return null===O}function c(O){return"number"==typeof O}function y(O){return"string"==typeof O}function d(O){return void 0===O}function m(O){return g(O)&&"[object RegExp]"===h(O)}function g(O){return"object"==typeof O&&null!==O}function x(O){return g(O)&&"[object Date]"===h(O)}function v(O){return g(O)&&("[object Error]"===h(O)||O instanceof Error)}function b(O){return"function"==typeof O}function h(O){return Object.prototype.toString.call(O)}function S(O){return O<10?"0"+O.toString(10):O.toString(10)}F.debuglog=function(O){if(O=O.toUpperCase(),!T[O])if(_.test(O)){var z=M.pid;T[O]=function(){var U=F.format.apply(F,arguments);console.error("%s %d: %s",O,z,U)}}else T[O]=function(){};return T[O]},F.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},F.types=e(41088),F.isArray=s,F.isBoolean=u,F.isNull=f,F.isNullOrUndefined=function(O){return null==O},F.isNumber=c,F.isString=y,F.isSymbol=function(O){return"symbol"==typeof O},F.isUndefined=d,F.isRegExp=m,F.types.isRegExp=m,F.isObject=g,F.isDate=x,F.types.isDate=x,F.isError=v,F.types.isNativeError=v,F.isFunction=b,F.isPrimitive=function(O){return null===O||"boolean"==typeof O||"number"==typeof O||"string"==typeof O||"symbol"==typeof O||void 0===O},F.isBuffer=e(75272);var w=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(O,z){return Object.prototype.hasOwnProperty.call(O,z)}F.log=function(){var O,z;console.log("%s - %s",(z=[S((O=new Date).getHours()),S(O.getMinutes()),S(O.getSeconds())].join(":"),[O.getDate(),w[O.getMonth()],z].join(" ")),F.format.apply(F,arguments))},F.inherits=e(6768),F._extend=function(O,z){if(!z||!g(z))return O;for(var U=Object.keys(z),R=U.length;R--;)O[U[R]]=z[U[R]];return O};var P=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function I(O,z){if(!O){var U=new Error("Promise was rejected with a falsy value");U.reason=O,O=U}return z(O)}F.promisify=function(O){if("function"!=typeof O)throw new TypeError('The "original" argument must be of type Function');if(P&&O[P]){var z;if("function"!=typeof(z=O[P]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(z,P,{value:z,enumerable:!1,writable:!1,configurable:!0}),z}function z(){for(var U,R,j=new Promise(function(V,q){U=V,R=q}),Y=[],B=0;B<arguments.length;B++)Y.push(arguments[B]);Y.push(function(V,q){V?R(V):U(q)});try{O.apply(this,Y)}catch(V){R(V)}return j}return Object.setPrototypeOf(z,Object.getPrototypeOf(O)),P&&Object.defineProperty(z,P,{value:z,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(z,k(O))},F.promisify.custom=P,F.callbackify=function(O){if("function"!=typeof O)throw new TypeError('The "original" argument must be of type Function');function z(){for(var U=[],R=0;R<arguments.length;R++)U.push(arguments[R]);var j=U.pop();if("function"!=typeof j)throw new TypeError("The last argument must be of type Function");var Y=this,B=function(){return j.apply(Y,arguments)};O.apply(this,U).then(function(V){M.nextTick(B.bind(null,null,V))},function(V){M.nextTick(I.bind(null,V,B))})}return Object.setPrototypeOf(z,Object.getPrototypeOf(O)),Object.defineProperties(z,k(O)),z}},5408:function(ne,F,e){var M=e(13380);ne.exports=function(k){return M("webgl",k)}},96632:function(ne,F,e){"use strict";var M=e(46492),k=e(63436),o=e(57916),T=e(99676),_=e(2304),p=T("Object.prototype.toString"),l=e(46672)(),t=typeof globalThis>"u"?e.g:globalThis,i=k(),r=T("String.prototype.slice"),n=Object.getPrototypeOf,a=T("Array.prototype.indexOf",!0)||function(u,f){for(var c=0;c<u.length;c+=1)if(u[c]===f)return c;return-1},s={__proto__:null};M(i,l&&_&&n?function(u){var f=new t[u];if(Symbol.toStringTag in f){var c=n(f),y=_(c,Symbol.toStringTag);if(!y){var d=n(c);y=_(d,Symbol.toStringTag)}s["$"+u]=o(y.get)}}:function(u){var f=new t[u],c=f.slice||f.set;c&&(s["$"+u]=o(c))}),ne.exports=function(u){if(!u||"object"!=typeof u)return!1;if(!l){var f=r(p(u),8,-1);return a(i,f)>-1?f:"Object"===f&&(c=u,y=!1,M(s,function(d,m){if(!y)try{d(c),y=r(m,1)}catch{}}),y)}var c,y;return _?function(c){var y=!1;return M(s,function(d,m){if(!y)try{"$"+d(c)===m&&(y=r(m,1))}catch{}}),y}(u):null}},67020:function(ne,F,e){var M=e(38700),k=e(50896),o=M.instance();function T(n){this.local=this.regionalOptions[n||""]||this.regionalOptions[""]}k(T.prototype=new M.baseCalendar,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(n,a){if("string"==typeof n){var s=n.match(p);return s?s[0]:""}var u=this._validateYear(n),f=n.month(),c=""+this.toChineseMonth(u,f);return a&&c.length<2&&(c="0"+c),this.isIntercalaryMonth(u,f)&&(c+="i"),c},monthNames:function(n){if("string"==typeof n){var a=n.match(l);return a?a[0]:""}var s=this._validateYear(n),u=n.month(),f=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"][this.toChineseMonth(s,u)-1];return this.isIntercalaryMonth(s,u)&&(f="\u95f0"+f),f},monthNamesShort:function(n){if("string"==typeof n){var a=n.match(t);return a?a[0]:""}var s=this._validateYear(n),u=n.month(),f=["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"][this.toChineseMonth(s,u)-1];return this.isIntercalaryMonth(s,u)&&(f="\u95f0"+f),f},parseMonth:function(n,a){n=this._validateYear(n);var s,u=parseInt(a);if(isNaN(u))"\u95f0"===a[0]&&(s=!0,a=a.substring(1)),"\u6708"===a[a.length-1]&&(a=a.substring(0,a.length-1)),u=1+["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"].indexOf(a);else{var f=a[a.length-1];s="i"===f||"I"===f}return this.toMonthIndex(n,u,s)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(n,a){if(n.year&&(n=n.year()),"number"!=typeof n||n<1888||n>2111)throw a.replace(/\{0\}/,this.local.name);return n},toMonthIndex:function(n,a,s){var u=this.intercalaryMonth(n);if(s&&a!==u||a<1||a>12)throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);return u?!s&&a<=u?a-1:a:a-1},toChineseMonth:function(n,a){n.year&&(a=(n=n.year()).month());var s=this.intercalaryMonth(n);if(a<0||a>(s?12:11))throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);return s?a<s?a+1:a:a+1},intercalaryMonth:function(n){return n=this._validateYear(n),i[n-i[0]]>>13},isIntercalaryMonth:function(n,a){n.year&&(a=(n=n.year()).month());var s=this.intercalaryMonth(n);return!!s&&s===a},leapYear:function(n){return 0!==this.intercalaryMonth(n)},weekOfYear:function(n,a,s){var u,f=this._validateYear(n,M.local.invalidyear),c=r[f-r[0]];(u=o.newDate(c>>9&4095,c>>5&15,31&c)).add(4-(u.dayOfWeek()||7),"d");var g=this.toJD(n,a,s)-u.toJD();return 1+Math.floor(g/7)},monthsInYear:function(n){return this.leapYear(n)?13:12},daysInMonth:function(n,a){n.year&&(a=n.month(),n=n.year()),n=this._validateYear(n);var s=i[n-i[0]];if(a>(s>>13?12:11))throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);return s&1<<12-a?30:29},weekDay:function(n,a,s){return(this.dayOfWeek(n,a,s)||7)<6},toJD:function(n,a,s){var u=this._validate(n,c,s,M.local.invalidDate);n=this._validateYear(u.year()),a=u.month(),s=u.day();var f=this.isIntercalaryMonth(n,a),c=this.toChineseMonth(n,a),y=function(d,m,g,x,v){var b,h,S;if("object"==typeof d)h=d,b=m||{};else{var w;if(!("number"==typeof d&&d>=1888&&d<=2111))throw new Error("Lunar year outside range 1888-2111");if(!("number"==typeof m&&m>=1&&m<=12))throw new Error("Lunar month outside range 1 - 12");if(!("number"==typeof g&&g>=1&&g<=30))throw new Error("Lunar day outside range 1 - 30");"object"==typeof x?(w=!1,b=x):(w=!!x,b={}),h={year:d,month:m,day:g,isIntercalary:w}}S=h.day-1;var E,P=i[h.year-i[0]],I=P>>13;E=I&&(h.month>I||h.isIntercalary)?h.month:h.month-1;for(var O=0;O<E;O++)S+=P&1<<12-O?30:29;var z=r[h.year-r[0]],U=new Date(z>>9&4095,(z>>5&15)-1,(31&z)+S);return b.year=U.getFullYear(),b.month=1+U.getMonth(),b.day=U.getDate(),b}(n,c,s,f);return o.toJD(y.year,y.month,y.day)},fromJD:function(n){var a=o.fromJD(n),s=function(f,c,y,d){var m,g;if("object"==typeof f)m=f,g=c||{};else{if(!("number"==typeof f&&f>=1888&&f<=2111))throw new Error("Solar year outside range 1888-2111");if(!("number"==typeof c&&c>=1&&c<=12))throw new Error("Solar month outside range 1 - 12");if(!("number"==typeof y&&y>=1&&y<=31))throw new Error("Solar day outside range 1 - 31");m={year:f,month:c,day:y},g={}}var x=r[m.year-r[0]];g.year=(m.year<<9|m.month<<5|m.day)>=x?m.year:m.year-1,x=r[g.year-r[0]];var b,h=new Date(x>>9&4095,(x>>5&15)-1,31&x),S=new Date(m.year,m.month-1,m.day);b=Math.round((S-h)/864e5);var w,E=i[g.year-i[0]];for(w=0;w<13;w++){var P=E&1<<12-w?30:29;if(b<P)break;b-=P}var I=E>>13;return!I||w<I?(g.isIntercalary=!1,g.month=1+w):w===I?(g.isIntercalary=!0,g.month=w):(g.isIntercalary=!1,g.month=w),g.day=1+b,g}(a.year(),a.month(),a.day()),u=this.toMonthIndex(s.year,s.month,s.isIntercalary);return this.newDate(s.year,u,s.day)},fromString:function(n){var a=n.match(_),s=this._validateYear(+a[1]),c=this.toMonthIndex(s,+a[2],!!a[3]);return this.newDate(s,c,+a[4])},add:function(n,a,s){var u=n.year(),f=n.month(),c=this.isIntercalaryMonth(u,f),y=this.toChineseMonth(u,f),d=Object.getPrototypeOf(T.prototype).add.call(this,n,a,s);if("y"===s){var m=d.year(),g=d.month(),x=this.isIntercalaryMonth(m,y),v=this.toMonthIndex(m,y,!(!c||!x));v!==g&&d.month(v)}return d}});var _=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,p=/^\d?\d[iI]?/m,l=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?\u6708/m,t=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?/m;M.calendars.chinese=T;var i=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],r=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},89792:function(ne,F,e){var M=e(38700);function o(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}e(50896)(o.prototype=new M.baseCalendar,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var _=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear);return(T=_.year()+(_.year()<0?1:0))%4==3||T%4==-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear),13},weekOfYear:function(T,_,p){var l=this.newDate(T,_,p);return l.add(-l.dayOfWeek(),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(T,_){var p=this._validate(T,_,this.minDay,M.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(13===p.month()&&this.leapYear(p.year())?1:0)},weekDay:function(T,_,p){return(this.dayOfWeek(T,_,p)||7)<6},toJD:function(T,_,p){var l=this._validate(T,_,p,M.local.invalidDate);return(T=l.year())<0&&T++,l.day()+30*(l.month()-1)+365*(T-1)+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var _=Math.floor(T)+.5-this.jdEpoch,p=Math.floor((_-Math.floor((_+366)/1461))/365)+1;p<=0&&p--,_=Math.floor(T)+.5-this.newDate(p,1,1).toJD();var l=Math.floor(_/30)+1;return this.newDate(p,l,_-30*(l-1)+1)}}),M.calendars.coptic=o},55668:function(ne,F,e){var M=e(38700);function o(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}e(50896)(o.prototype=new M.baseCalendar,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(_){return this._validate(_,this.minMonth,this.minDay,M.local.invalidYear),!1},monthsInYear:function(_){return this._validate(_,this.minMonth,this.minDay,M.local.invalidYear),13},daysInYear:function(_){return this._validate(_,this.minMonth,this.minDay,M.local.invalidYear),400},weekOfYear:function(_,p,l){var t=this.newDate(_,p,l);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/8)+1},daysInMonth:function(_,p){var l=this._validate(_,p,this.minDay,M.local.invalidMonth);return this.daysPerMonth[l.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(_,p,l){return(this._validate(_,p,l,M.local.invalidDate).day()+1)%8},weekDay:function(_,p,l){var t=this.dayOfWeek(_,p,l);return t>=2&&t<=6},extraInfo:function(_,p,l){var t=this._validate(_,p,l,M.local.invalidDate);return{century:T[Math.floor((t.year()-1)/100)+1]||""}},toJD:function(_,p,l){var t=this._validate(_,p,l,M.local.invalidDate);return _=t.year()+(t.year()<0?1:0),p=t.month(),(l=t.day())+(p>1?16:0)+(p>2?32*(p-2):0)+400*(_-1)+this.jdEpoch-1},fromJD:function(_){_=Math.floor(_+.5)-Math.floor(this.jdEpoch)-1;var p=Math.floor(_/400)+1;_-=400*(p-1),_+=_>15?16:0;var l=Math.floor(_/32)+1;return this.newDate(p<=0?p-1:p,l,_-32*(l-1)+1)}});var T={20:"Fruitbat",21:"Anchovy"};M.calendars.discworld=o},65168:function(ne,F,e){var M=e(38700);function o(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}e(50896)(o.prototype=new M.baseCalendar,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var _=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear);return(T=_.year()+(_.year()<0?1:0))%4==3||T%4==-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear),13},weekOfYear:function(T,_,p){var l=this.newDate(T,_,p);return l.add(-l.dayOfWeek(),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(T,_){var p=this._validate(T,_,this.minDay,M.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(13===p.month()&&this.leapYear(p.year())?1:0)},weekDay:function(T,_,p){return(this.dayOfWeek(T,_,p)||7)<6},toJD:function(T,_,p){var l=this._validate(T,_,p,M.local.invalidDate);return(T=l.year())<0&&T++,l.day()+30*(l.month()-1)+365*(T-1)+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var _=Math.floor(T)+.5-this.jdEpoch,p=Math.floor((_-Math.floor((_+366)/1461))/365)+1;p<=0&&p--,_=Math.floor(T)+.5-this.newDate(p,1,1).toJD();var l=Math.floor(_/30)+1;return this.newDate(p,l,_-30*(l-1)+1)}}),M.calendars.ethiopian=o},2084:function(ne,F,e){var M=e(38700);function o(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}function T(_,p){return _-p*Math.floor(_/p)}e(50896)(o.prototype=new M.baseCalendar,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(_){var p=this._validate(_,this.minMonth,this.minDay,M.local.invalidYear);return this._leapYear(p.year())},_leapYear:function(_){return T(7*(_=_<0?_+1:_)+1,19)<7},monthsInYear:function(_){return this._validate(_,this.minMonth,this.minDay,M.local.invalidYear),this._leapYear(_.year?_.year():_)?13:12},weekOfYear:function(_,p,l){var t=this.newDate(_,p,l);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(_){return _=this._validate(_,this.minMonth,this.minDay,M.local.invalidYear).year(),this.toJD(-1===_?1:_+1,7,1)-this.toJD(_,7,1)},daysInMonth:function(_,p){return _.year&&(p=_.month(),_=_.year()),this._validate(_,p,this.minDay,M.local.invalidMonth),12===p&&this.leapYear(_)||8===p&&5===T(this.daysInYear(_),10)?30:9===p&&3===T(this.daysInYear(_),10)?29:this.daysPerMonth[p-1]},weekDay:function(_,p,l){return 6!==this.dayOfWeek(_,p,l)},extraInfo:function(_,p,l){var t=this._validate(_,p,l,M.local.invalidDate);return{yearType:(this.leapYear(t)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(t)%10-3]}},toJD:function(_,p,l){var t=this._validate(_,p,l,M.local.invalidDate);_=t.year(),p=t.month(),l=t.day();var i=_<=0?_+1:_,r=this.jdEpoch+this._delay1(i)+this._delay2(i)+l+1;if(p<7){for(var n=7;n<=this.monthsInYear(_);n++)r+=this.daysInMonth(_,n);for(n=1;n<p;n++)r+=this.daysInMonth(_,n)}else for(n=7;n<p;n++)r+=this.daysInMonth(_,n);return r},_delay1:function(_){var p=Math.floor((235*_-234)/19),t=29*p+Math.floor((12084+13753*p)/25920);return T(3*(t+1),7)<3&&t++,t},_delay2:function(_){var p=this._delay1(_-1),l=this._delay1(_);return this._delay1(_+1)-l==356?2:l-p==382?1:0},fromJD:function(_){_=Math.floor(_)+.5;for(var p=Math.floor(98496*(_-this.jdEpoch)/35975351)-1;_>=this.toJD(-1===p?1:p+1,7,1);)p++;for(var l=_<this.toJD(p,1,1)?7:1;_>this.toJD(p,l,this.daysInMonth(p,l));)l++;var t=_-this.toJD(p,l,1)+1;return this.newDate(p,l,t)}}),M.calendars.hebrew=o},26368:function(ne,F,e){var M=e(38700);function o(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}e(50896)(o.prototype=new M.baseCalendar,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(T){return(11*this._validate(T,this.minMonth,this.minDay,M.local.invalidYear).year()+14)%30<11},weekOfYear:function(T,_,p){var l=this.newDate(T,_,p);return l.add(-l.dayOfWeek(),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInYear:function(T){return this.leapYear(T)?355:354},daysInMonth:function(T,_){var p=this._validate(T,_,this.minDay,M.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(12===p.month()&&this.leapYear(p.year())?1:0)},weekDay:function(T,_,p){return 5!==this.dayOfWeek(T,_,p)},toJD:function(T,_,p){var l=this._validate(T,_,p,M.local.invalidDate);return T=l.year(),_=l.month(),T=T<=0?T+1:T,(p=l.day())+Math.ceil(29.5*(_-1))+354*(T-1)+Math.floor((3+11*T)/30)+this.jdEpoch-1},fromJD:function(T){T=Math.floor(T)+.5;var _=Math.floor((30*(T-this.jdEpoch)+10646)/10631);_=_<=0?_-1:_;var p=Math.min(12,Math.ceil((T-29-this.toJD(_,1,1))/29.5)+1),l=T-this.toJD(_,p,1)+1;return this.newDate(_,p,l)}}),M.calendars.islamic=o},24747:function(ne,F,e){var M=e(38700);function o(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}e(50896)(o.prototype=new M.baseCalendar,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var _=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear);return(T=_.year()<0?_.year()+1:_.year())%4==0},weekOfYear:function(T,_,p){var l=this.newDate(T,_,p);return l.add(4-(l.dayOfWeek()||7),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(T,_){var p=this._validate(T,_,this.minDay,M.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(2===p.month()&&this.leapYear(p.year())?1:0)},weekDay:function(T,_,p){return(this.dayOfWeek(T,_,p)||7)<6},toJD:function(T,_,p){var l=this._validate(T,_,p,M.local.invalidDate);return T=l.year(),_=l.month(),p=l.day(),T<0&&T++,_<=2&&(T--,_+=12),Math.floor(365.25*(T+4716))+Math.floor(30.6001*(_+1))+p-1524.5},fromJD:function(T){var _=Math.floor(T+.5)+1524,p=Math.floor((_-122.1)/365.25),l=Math.floor(365.25*p),t=Math.floor((_-l)/30.6001),i=t-Math.floor(t<14?1:13),r=p-Math.floor(i>2?4716:4715),n=_-l-Math.floor(30.6001*t);return r<=0&&r--,this.newDate(r,i,n)}}),M.calendars.julian=o},65616:function(ne,F,e){var M=e(38700);function o(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}function T(p,l){return p-l*Math.floor(p/l)}function _(p,l){return T(p-1,l)+1}e(50896)(o.prototype=new M.baseCalendar,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(p){return this._validate(p,this.minMonth,this.minDay,M.local.invalidYear),!1},formatYear:function(p){p=this._validate(p,this.minMonth,this.minDay,M.local.invalidYear).year();var l=Math.floor(p/400);return p%=400,p+=p<0?400:0,l+"."+Math.floor(p/20)+"."+p%20},forYear:function(p){if((p=p.split(".")).length<3)throw"Invalid Mayan year";for(var l=0,t=0;t<p.length;t++){var i=parseInt(p[t],10);if(Math.abs(i)>19||t>0&&i<0)throw"Invalid Mayan year";l=20*l+i}return l},monthsInYear:function(p){return this._validate(p,this.minMonth,this.minDay,M.local.invalidYear),18},weekOfYear:function(p,l,t){return this._validate(p,l,t,M.local.invalidDate),0},daysInYear:function(p){return this._validate(p,this.minMonth,this.minDay,M.local.invalidYear),360},daysInMonth:function(p,l){return this._validate(p,l,this.minDay,M.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(p,l,t){return this._validate(p,l,t,M.local.invalidDate).day()},weekDay:function(p,l,t){return this._validate(p,l,t,M.local.invalidDate),!0},extraInfo:function(p,l,t){var i=this._validate(p,l,t,M.local.invalidDate).toJD(),r=this._toHaab(i),n=this._toTzolkin(i);return{haabMonthName:this.local.haabMonths[r[0]-1],haabMonth:r[0],haabDay:r[1],tzolkinDayName:this.local.tzolkinMonths[n[0]-1],tzolkinDay:n[0],tzolkinTrecena:n[1]}},_toHaab:function(p){var l=T(8+(p-=this.jdEpoch)+340,365);return[Math.floor(l/20)+1,T(l,20)]},_toTzolkin:function(p){return[_(20+(p-=this.jdEpoch),20),_(p+4,13)]},toJD:function(p,l,t){var i=this._validate(p,l,t,M.local.invalidDate);return i.day()+20*i.month()+360*i.year()+this.jdEpoch},fromJD:function(p){p=Math.floor(p)+.5-this.jdEpoch;var l=Math.floor(p/360);p%=360,p+=p<0?360:0;var t=Math.floor(p/20);return this.newDate(l,t,p%20)}}),M.calendars.mayan=o},30632:function(ne,F,e){var M=e(38700),k=e(50896);function o(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar;var T=M.instance("gregorian");k(o.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(_){var p=this._validate(_,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear);return T.leapYear(p.year()+(p.year()<1?1:0)+1469)},weekOfYear:function(_,p,l){var t=this.newDate(_,p,l);return t.add(1-(t.dayOfWeek()||7),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(_,p){var l=this._validate(_,p,this.minDay,M.local.invalidMonth);return this.daysPerMonth[l.month()-1]+(12===l.month()&&this.leapYear(l.year())?1:0)},weekDay:function(_,p,l){return(this.dayOfWeek(_,p,l)||7)<6},toJD:function(_,p,l){var t=this._validate(_,p,l,M.local.invalidMonth);(_=t.year())<0&&_++;for(var i=t.day(),r=1;r<t.month();r++)i+=this.daysPerMonth[r-1];return i+T.toJD(_+1468,3,13)},fromJD:function(_){_=Math.floor(_+.5);for(var p=Math.floor((_-(this.jdEpoch-1))/366);_>=this.toJD(p+1,1,1);)p++;for(var l=_-Math.floor(this.toJD(p,1,1)+.5)+1,t=1;l>this.daysInMonth(p,t);)l-=this.daysInMonth(p,t),t++;return this.newDate(p,t,l)}}),M.calendars.nanakshahi=o},73040:function(ne,F,e){var M=e(38700);function o(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}e(50896)(o.prototype=new M.baseCalendar,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(T){return this.daysInYear(T)!==this.daysPerYear},weekOfYear:function(T,_,p){var l=this.newDate(T,_,p);return l.add(-l.dayOfWeek(),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInYear:function(T){if(T=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[T])return this.daysPerYear;for(var _=0,p=this.minMonth;p<=12;p++)_+=this.NEPALI_CALENDAR_DATA[T][p];return _},daysInMonth:function(T,_){return T.year&&(_=T.month(),T=T.year()),this._validate(T,_,this.minDay,M.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[T]?this.daysPerMonth[_-1]:this.NEPALI_CALENDAR_DATA[T][_]},weekDay:function(T,_,p){return 6!==this.dayOfWeek(T,_,p)},toJD:function(T,_,p){var l=this._validate(T,_,p,M.local.invalidDate);T=l.year(),_=l.month(),p=l.day();var t=M.instance(),i=0,r=_,n=T;this._createMissingCalendarData(T);var a=T-(r>9||9===r&&p>=this.NEPALI_CALENDAR_DATA[n][0]?56:57);for(9!==_&&(i=p,r--);9!==r;)r<=0&&(r=12,n--),i+=this.NEPALI_CALENDAR_DATA[n][r],r--;return 9===_?(i+=p-this.NEPALI_CALENDAR_DATA[n][0])<0&&(i+=t.daysInYear(a)):i+=this.NEPALI_CALENDAR_DATA[n][9]-this.NEPALI_CALENDAR_DATA[n][0],t.newDate(a,1,1).add(i,"d").toJD()},fromJD:function(T){var _=M.instance().fromJD(T),p=_.year(),l=_.dayOfYear(),t=p+56;this._createMissingCalendarData(t);for(var i=9,n=this.NEPALI_CALENDAR_DATA[t][i]-this.NEPALI_CALENDAR_DATA[t][0]+1;l>n;)++i>12&&(i=1,t++),n+=this.NEPALI_CALENDAR_DATA[t][i];return this.newDate(t,i,this.NEPALI_CALENDAR_DATA[t][i]-(n-l))},_createMissingCalendarData:function(T){var _=this.daysPerMonth.slice(0);_.unshift(17);for(var p=T-1;p<T+2;p++)void 0===this.NEPALI_CALENDAR_DATA[p]&&(this.NEPALI_CALENDAR_DATA[p]=_)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),M.calendars.nepali=o},1104:function(ne,F,e){var M=e(38700);function o(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}function T(_,p){return _-p*Math.floor(_/p)}e(50896)(o.prototype=new M.baseCalendar,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xe6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xe6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(_){var p=this._validate(_,this.minMonth,this.minDay,M.local.invalidYear);return 682*((p.year()-(p.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(_,p,l){var t=this.newDate(_,p,l);return t.add(-(t.dayOfWeek()+1)%7,"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(_,p){var l=this._validate(_,p,this.minDay,M.local.invalidMonth);return this.daysPerMonth[l.month()-1]+(12===l.month()&&this.leapYear(l.year())?1:0)},weekDay:function(_,p,l){return 5!==this.dayOfWeek(_,p,l)},toJD:function(_,p,l){var t=this._validate(_,p,l,M.local.invalidDate);_=t.year(),p=t.month(),l=t.day();var i=_-(_>=0?474:473),r=474+T(i,2820);return l+(p<=7?31*(p-1):30*(p-1)+6)+Math.floor((682*r-110)/2816)+365*(r-1)+1029983*Math.floor(i/2820)+this.jdEpoch-1},fromJD:function(_){var p=(_=Math.floor(_)+.5)-this.toJD(475,1,1),l=Math.floor(p/1029983),t=T(p,1029983),i=2820;if(1029982!==t){var r=Math.floor(t/366),n=T(t,366);i=Math.floor((2134*r+2816*n+2815)/1028522)+r+1}var a=i+2820*l+474,s=_-this.toJD(a=a<=0?a-1:a,1,1)+1,u=s<=186?Math.ceil(s/31):Math.ceil((s-6)/30),f=_-this.toJD(a,u,1)+1;return this.newDate(a,u,f)}}),M.calendars.persian=o,M.calendars.jalali=o},51456:function(ne,F,e){var M=e(38700),k=e(50896),o=M.instance();function T(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}k(T.prototype=new M.baseCalendar,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(_){var p=this._validate(_,this.minMonth,this.minDay,M.local.invalidYear);return _=this._t2gYear(p.year()),o.leapYear(_)},weekOfYear:function(_,p,l){var t=this._validate(_,this.minMonth,this.minDay,M.local.invalidYear);return _=this._t2gYear(t.year()),o.weekOfYear(_,t.month(),t.day())},daysInMonth:function(_,p){var l=this._validate(_,p,this.minDay,M.local.invalidMonth);return this.daysPerMonth[l.month()-1]+(2===l.month()&&this.leapYear(l.year())?1:0)},weekDay:function(_,p,l){return(this.dayOfWeek(_,p,l)||7)<6},toJD:function(_,p,l){var t=this._validate(_,p,l,M.local.invalidDate);return _=this._t2gYear(t.year()),o.toJD(_,t.month(),t.day())},fromJD:function(_){var p=o.fromJD(_),l=this._g2tYear(p.year());return this.newDate(l,p.month(),p.day())},_t2gYear:function(_){return _+this.yearsOffset+(_>=-this.yearsOffset&&_<=-1?1:0)},_g2tYear:function(_){return _-this.yearsOffset-(_>=1&&_<=this.yearsOffset?1:0)}}),M.calendars.taiwan=T},4592:function(ne,F,e){var M=e(38700),k=e(50896),o=M.instance();function T(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}k(T.prototype=new M.baseCalendar,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(_){var p=this._validate(_,this.minMonth,this.minDay,M.local.invalidYear);return _=this._t2gYear(p.year()),o.leapYear(_)},weekOfYear:function(_,p,l){var t=this._validate(_,this.minMonth,this.minDay,M.local.invalidYear);return _=this._t2gYear(t.year()),o.weekOfYear(_,t.month(),t.day())},daysInMonth:function(_,p){var l=this._validate(_,p,this.minDay,M.local.invalidMonth);return this.daysPerMonth[l.month()-1]+(2===l.month()&&this.leapYear(l.year())?1:0)},weekDay:function(_,p,l){return(this.dayOfWeek(_,p,l)||7)<6},toJD:function(_,p,l){var t=this._validate(_,p,l,M.local.invalidDate);return _=this._t2gYear(t.year()),o.toJD(_,t.month(),t.day())},fromJD:function(_){var p=o.fromJD(_),l=this._g2tYear(p.year());return this.newDate(l,p.month(),p.day())},_t2gYear:function(_){return _-this.yearsOffset-(_>=1&&_<=this.yearsOffset?1:0)},_g2tYear:function(_){return _+this.yearsOffset+(_>=-this.yearsOffset&&_<=-1?1:0)}}),M.calendars.thai=T},45348:function(ne,F,e){var M=e(38700);function o(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}e(50896)(o.prototype=new M.baseCalendar,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(_){var p=this._validate(_,this.minMonth,this.minDay,M.local.invalidYear);return 355===this.daysInYear(p.year())},weekOfYear:function(_,p,l){var t=this.newDate(_,p,l);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(_){for(var p=0,l=1;l<=12;l++)p+=this.daysInMonth(_,l);return p},daysInMonth:function(_,p){for(var l=this._validate(_,p,this.minDay,M.local.invalidMonth).toJD()-24e5+.5,t=0,i=0;i<T.length;i++){if(T[i]>l)return T[t]-T[t-1];t++}return 30},weekDay:function(_,p,l){return 5!==this.dayOfWeek(_,p,l)},toJD:function(_,p,l){var t=this._validate(_,p,l,M.local.invalidDate),i=12*(t.year()-1)+t.month()-15292;return t.day()+T[i-1]-1+24e5-.5},fromJD:function(_){for(var p=_-24e5+.5,l=0,t=0;t<T.length&&!(T[t]>p);t++)l++;var i=l+15292,r=Math.floor((i-1)/12);return this.newDate(r+1,i-12*r,p-T[l-1]+1)},isValid:function(_,p,l){var t=M.baseCalendar.prototype.isValid.apply(this,arguments);return t&&(t=(_=null!=_.year?_.year:_)>=1276&&_<=1500),t},_validate:function(_,p,l,t){var i=M.baseCalendar.prototype._validate.apply(this,arguments);if(i.year<1276||i.year>1500)throw t.replace(/\{0\}/,this.local.name);return i}}),M.calendars.ummalqura=o;var T=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},38700:function(ne,F,e){var M=e(50896);function k(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function o(t,i,r,n){if(this._calendar=t,this._year=i,this._month=r,this._day=n,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(l.local.invalidDate||l.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function T(t,i){return"000000".substring(0,i-(t=""+t).length)+t}function _(){this.shortYearCutoff="+10"}function p(t){this.local=this.regionalOptions[t]||this.regionalOptions[""]}M(k.prototype,{instance:function(t,i){t=(t||"gregorian").toLowerCase();var r=this._localCals[t+"-"+(i=i||"")];if(!r&&this.calendars[t]&&(r=new this.calendars[t](i),this._localCals[t+"-"+i]=r),!r)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,t);return r},newDate:function(t,i,r,n,a){return(n=(null!=t&&t.year?t.calendar():"string"==typeof n?this.instance(n,a):n)||this.instance()).newDate(t,i,r)},substituteDigits:function(t){return function(i){return(i+"").replace(/[0-9]/g,function(r){return t[r]})}},substituteChineseDigits:function(t,i){return function(r){for(var n="",a=0;r>0;){var s=r%10;n=(0===s?"":t[s]+i[a])+n,a++,r=Math.floor(r/10)}return 0===n.indexOf(t[1]+i[1])&&(n=n.substr(1)),n||t[0]}}}),M(o.prototype,{newDate:function(t,i,r){return this._calendar.newDate(t??this,i,r)},year:function(t){return 0===arguments.length?this._year:this.set(t,"y")},month:function(t){return 0===arguments.length?this._month:this.set(t,"m")},day:function(t){return 0===arguments.length?this._day:this.set(t,"d")},date:function(t,i,r){if(!this._calendar.isValid(t,i,r))throw(l.local.invalidDate||l.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=t,this._month=i,this._day=r,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(t,i){return this._calendar.add(this,t,i)},set:function(t,i){return this._calendar.set(this,t,i)},compareTo:function(t){if(this._calendar.name!==t._calendar.name)throw(l.local.differentCalendars||l.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,t._calendar.local.name);var i=this._year!==t._year?this._year-t._year:this._month!==t._month?this.monthOfYear()-t.monthOfYear():this._day-t._day;return 0===i?0:i<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(t){return this._calendar.fromJD(t)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(t){return this._calendar.fromJSDate(t)},toString:function(){return(this.year()<0?"-":"")+T(Math.abs(this.year()),4)+"-"+T(this.month(),2)+"-"+T(this.day(),2)}}),M(_.prototype,{_validateLevel:0,newDate:function(t,i,r){return null==t?this.today():(t.year&&(this._validate(t,i,r,l.local.invalidDate||l.regionalOptions[""].invalidDate),r=t.day(),i=t.month(),t=t.year()),new o(this,t,i,r))},today:function(){return this.fromJSDate(new Date)},epoch:function(t){return this._validate(t,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear);return(i.year()<0?"-":"")+T(Math.abs(i.year()),4)},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear),12},monthOfYear:function(t,i){var r=this._validate(t,i,this.minDay,l.local.invalidMonth||l.regionalOptions[""].invalidMonth);return(r.month()+this.monthsInYear(r)-this.firstMonth)%this.monthsInYear(r)+this.minMonth},fromMonthOfYear:function(t,i){var r=(i+this.firstMonth-2*this.minMonth)%this.monthsInYear(t)+this.minMonth;return this._validate(t,r,this.minDay,l.local.invalidMonth||l.regionalOptions[""].invalidMonth),r},daysInYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear);return this.leapYear(i)?366:365},dayOfYear:function(t,i,r){var n=this._validate(t,i,r,l.local.invalidDate||l.regionalOptions[""].invalidDate);return n.toJD()-this.newDate(n.year(),this.fromMonthOfYear(n.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(t,i,r){var n=this._validate(t,i,r,l.local.invalidDate||l.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(n))+2)%this.daysInWeek()},extraInfo:function(t,i,r){return this._validate(t,i,r,l.local.invalidDate||l.regionalOptions[""].invalidDate),{}},add:function(t,i,r){return this._validate(t,this.minMonth,this.minDay,l.local.invalidDate||l.regionalOptions[""].invalidDate),this._correctAdd(t,this._add(t,i,r),i,r)},_add:function(t,i,r){if(this._validateLevel++,"d"===r||"w"===r){var n=t.toJD()+i*("w"===r?this.daysInWeek():1),a=t.calendar().fromJD(n);return this._validateLevel--,[a.year(),a.month(),a.day()]}try{var s=t.year()+("y"===r?i:0),u=t.monthOfYear()+("m"===r?i:0);a=t.day(),"y"===r?(t.month()!==this.fromMonthOfYear(s,u)&&(u=this.newDate(s,t.month(),this.minDay).monthOfYear()),u=Math.min(u,this.monthsInYear(s)),a=Math.min(a,this.daysInMonth(s,this.fromMonthOfYear(s,u)))):"m"===r&&(function(c){for(;u<c.minMonth;)s--,u+=c.monthsInYear(s);for(var y=c.monthsInYear(s);u>y-1+c.minMonth;)s++,u-=y,y=c.monthsInYear(s)}(this),a=Math.min(a,this.daysInMonth(s,this.fromMonthOfYear(s,u))));var f=[s,this.fromMonthOfYear(s,u),a];return this._validateLevel--,f}catch(c){throw this._validateLevel--,c}},_correctAdd:function(t,i,r,n){if(!(this.hasYearZero||"y"!==n&&"m"!==n||0!==i[0]&&t.year()>0==i[0]>0)){var a={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[n];i=this._add(t,r*a[0]+(r<0?-1:1)*a[1],a[2])}return t.date(i[0],i[1],i[2])},set:function(t,i,r){this._validate(t,this.minMonth,this.minDay,l.local.invalidDate||l.regionalOptions[""].invalidDate);var n="y"===r?i:t.year(),a="m"===r?i:t.month(),s="d"===r?i:t.day();return"y"!==r&&"m"!==r||(s=Math.min(s,this.daysInMonth(n,a))),t.date(n,a,s)},isValid:function(t,i,r){this._validateLevel++;var n=this.hasYearZero||0!==t;if(n){var a=this.newDate(t,i,this.minDay);n=i>=this.minMonth&&i-this.minMonth<this.monthsInYear(a)&&r>=this.minDay&&r-this.minDay<this.daysInMonth(a)}return this._validateLevel--,n},toJSDate:function(t,i,r){var n=this._validate(t,i,r,l.local.invalidDate||l.regionalOptions[""].invalidDate);return l.instance().fromJD(this.toJD(n)).toJSDate()},fromJSDate:function(t){return this.fromJD(l.instance().fromJSDate(t).toJD())},_validate:function(t,i,r,n){if(t.year){if(0===this._validateLevel&&this.name!==t.calendar().name)throw(l.local.differentCalendars||l.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,t.calendar().local.name);return t}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(t,i,r))throw n.replace(/\{0\}/,this.local.name);var a=this.newDate(t,i,r);return this._validateLevel--,a}catch(s){throw this._validateLevel--,s}}}),M(p.prototype=new _,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear);return(t=i.year()+(i.year()<0?1:0))%4==0&&(t%100!=0||t%400==0)},weekOfYear:function(t,i,r){var n=this.newDate(t,i,r);return n.add(4-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(t,i){var r=this._validate(t,i,this.minDay,l.local.invalidMonth||l.regionalOptions[""].invalidMonth);return this.daysPerMonth[r.month()-1]+(2===r.month()&&this.leapYear(r.year())?1:0)},weekDay:function(t,i,r){return(this.dayOfWeek(t,i,r)||7)<6},toJD:function(t,i,r){var n=this._validate(t,i,r,l.local.invalidDate||l.regionalOptions[""].invalidDate);t=n.year(),i=n.month(),r=n.day(),t<0&&t++,i<3&&(i+=12,t--);var a=Math.floor(t/100),s=2-a+Math.floor(a/4);return Math.floor(365.25*(t+4716))+Math.floor(30.6001*(i+1))+r+s-1524.5},fromJD:function(t){var i=Math.floor(t+.5),r=Math.floor((i-1867216.25)/36524.25),n=1524+(r=i+1+r-Math.floor(r/4)),a=Math.floor((n-122.1)/365.25),s=Math.floor(365.25*a),u=Math.floor((n-s)/30.6001),f=n-s-Math.floor(30.6001*u),c=u-(u>13.5?13:1),y=a-(c>2.5?4716:4715);return y<=0&&y--,this.newDate(y,c,f)},toJSDate:function(t,i,r){var n=this._validate(t,i,r,l.local.invalidDate||l.regionalOptions[""].invalidDate),a=new Date(n.year(),n.month()-1,n.day());return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a.setHours(a.getHours()>12?a.getHours()+2:0),a},fromJSDate:function(t){return this.newDate(t.getFullYear(),t.getMonth()+1,t.getDate())}});var l=ne.exports=new k;l.cdate=o,l.baseCalendar=_,l.calendars.gregorian=p},15168:function(ne,F,e){var M=e(50896),k=e(38700);M(k.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),k.local=k.regionalOptions[""],M(k.cdate.prototype,{formatDate:function(o,T){return"string"!=typeof o&&(T=o,o=""),this._calendar.formatDate(o||"",this,T)}}),M(k.baseCalendar.prototype,{UNIX_EPOCH:k.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:k.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(o,T,_){if("string"!=typeof o&&(_=T,T=o,o=""),!T)return"";if(T.calendar()!==this)throw k.local.invalidFormat||k.regionalOptions[""].invalidFormat;o=o||this.local.dateFormat;for(var p,l,t,i=(_=_||{}).dayNamesShort||this.local.dayNamesShort,r=_.dayNames||this.local.dayNames,n=_.monthNumbers||this.local.monthNumbers,a=_.monthNamesShort||this.local.monthNamesShort,s=_.monthNames||this.local.monthNames,u=function(h,S){for(var w=1;b+w<o.length&&o.charAt(b+w)===h;)w++;return b+=w-1,Math.floor(w/(S||1))>1},f=function(h,S,w,E){var P=""+S;if(u(h,E))for(;P.length<w;)P="0"+P;return P},c=this,d=function(h,S){return S?"function"==typeof s?s.call(c,h):s[h.month()-c.minMonth]:"function"==typeof a?a.call(c,h):a[h.month()-c.minMonth]},m=this.local.digits,g=function(h){return _.localNumbers&&m?m(h):h},x="",v=!1,b=0;b<o.length;b++)if(v)"'"!==o.charAt(b)||u("'")?x+=o.charAt(b):v=!1;else switch(o.charAt(b)){case"d":x+=g(f("d",T.day(),2));break;case"D":x+=(p=T.dayOfWeek(),l=i,t=r,u("D")?t[p]:l[p]);break;case"o":x+=f("o",T.dayOfYear(),3);break;case"w":x+=f("w",T.weekOfYear(),2);break;case"m":x+=(h=T,"function"==typeof n?n.call(c,h,u("m")):g(f("m",h.month(),2)));break;case"M":x+=d(T,u("M"));break;case"y":x+=u("y",2)?T.year():(T.year()%100<10?"0":"")+T.year()%100;break;case"Y":u("Y",2),x+=T.formatYear();break;case"J":x+=T.toJD();break;case"@":x+=(T.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":x+=(T.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":u("'")?x+="'":v=!0;break;default:x+=o.charAt(b)}var h;return x},parseDate:function(o,T,_){if(null==T)throw k.local.invalidArguments||k.regionalOptions[""].invalidArguments;if(""===(T="object"==typeof T?T.toString():T+""))return null;o=o||this.local.dateFormat;var p=(_=_||{}).shortYearCutoff||this.shortYearCutoff;p="string"!=typeof p?p:this.today().year()%100+parseInt(p,10);for(var l=_.dayNamesShort||this.local.dayNamesShort,t=_.dayNames||this.local.dayNames,i=_.parseMonth||this.local.parseMonth,r=_.monthNumbers||this.local.monthNumbers,n=_.monthNamesShort||this.local.monthNamesShort,a=_.monthNames||this.local.monthNames,s=-1,u=-1,f=-1,c=-1,y=-1,d=!1,m=!1,g=function(z,U){for(var R=1;P+R<o.length&&o.charAt(P+R)===z;)R++;return P+=R-1,Math.floor(R/(U||1))>1},x=function(z,U){var R=g(z,U),j=[2,3,R?4:2,R?4:2,10,11,20]["oyYJ@!".indexOf(z)+1],Y=new RegExp("^-?\\d{1,"+j+"}"),B=T.substring(E).match(Y);if(!B)throw(k.local.missingNumberAt||k.regionalOptions[""].missingNumberAt).replace(/\{0\}/,E);return E+=B[0].length,parseInt(B[0],10)},v=this,b=function(){if("function"==typeof r){g("m");var z=r.call(v,T.substring(E));return E+=z.length,z}return x("m")},h=function(z,U,R,j){for(var Y=g(z,j)?R:U,B=0;B<Y.length;B++)if(T.substr(E,Y[B].length).toLowerCase()===Y[B].toLowerCase())return E+=Y[B].length,B+v.minMonth;throw(k.local.unknownNameAt||k.regionalOptions[""].unknownNameAt).replace(/\{0\}/,E)},S=function(){if("function"==typeof a){var z=g("M")?a.call(v,T.substring(E)):n.call(v,T.substring(E));return E+=z.length,z}return h("M",n,a)},w=function(){if(T.charAt(E)!==o.charAt(P))throw(k.local.unexpectedLiteralAt||k.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,E);E++},E=0,P=0;P<o.length;P++)if(m)"'"!==o.charAt(P)||g("'")?w():m=!1;else switch(o.charAt(P)){case"d":c=x("d");break;case"D":h("D",l,t);break;case"o":y=x("o");break;case"w":x("w");break;case"m":f=b();break;case"M":f=S();break;case"y":var I=P;d=!g("y",2),P=I,u=x("y",2);break;case"Y":u=x("Y",2);break;case"J":s=x("J")+.5,"."===T.charAt(E)&&(E++,x("J"));break;case"@":s=x("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":s=x("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":E=T.length;break;case"'":g("'")?w():m=!0;break;default:w()}if(E<T.length)throw k.local.unexpectedText||k.regionalOptions[""].unexpectedText;if(-1===u?u=this.today().year():u<100&&d&&(u+=-1===p?1900:this.today().year()-this.today().year()%100-(u<=p?0:100)),"string"==typeof f&&(f=i.call(this,u,f)),y>-1){c=y;for(var O=this.daysInMonth(u,f=1);c>O;O=this.daysInMonth(u,f))f++,c-=O}return s>-1?this.fromJD(s):this.newDate(u,f,c)},determineDate:function(o,T,_,p,l){_&&"object"!=typeof _&&(l=p,p=_,_=null),"string"!=typeof p&&(l=p,p="");var t=this;return T=T?T.newDate():null,null==o?T:"string"==typeof o?function(i){try{return t.parseDate(p,i,l)}catch{}for(var r=((i=i.toLowerCase()).match(/^c/)&&_?_.newDate():null)||t.today(),n=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,a=n.exec(i);a;)r.add(parseInt(a[1],10),a[2]||"d"),a=n.exec(i);return r}(o):"number"==typeof o?isNaN(o)||o===1/0||o===-1/0?T:t.today().add(o,"d"):t.newDate(o)}})},21576:function(){},19768:function(){},63436:function(ne,F,e){"use strict";var M=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],k=typeof globalThis>"u"?e.g:globalThis;ne.exports=function(){for(var o=[],T=0;T<M.length;T++)"function"==typeof k[M[T]]&&(o[o.length]=M[T]);return o}},67756:function(ne,F,e){"use strict";function M(ye,ve,xe){ye.prototype=ve.prototype=xe,xe.constructor=ye}function k(ye,ve){var xe=Object.create(ye.prototype);for(var Ce in ve)xe[Ce]=ve[Ce];return xe}function o(){}e.d(F,{qy:function(){return Te},Gz:function(){return $}});var T=.7,_=1/T,p="\\s*([+-]?\\d+)\\s*",l="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",i=/^#([0-9a-f]{3,8})$/,r=new RegExp("^rgb\\(".concat(p,",").concat(p,",").concat(p,"\\)$")),n=new RegExp("^rgb\\(".concat(t,",").concat(t,",").concat(t,"\\)$")),a=new RegExp("^rgba\\(".concat(p,",").concat(p,",").concat(p,",").concat(l,"\\)$")),s=new RegExp("^rgba\\(".concat(t,",").concat(t,",").concat(t,",").concat(l,"\\)$")),u=new RegExp("^hsl\\(".concat(l,",").concat(t,",").concat(t,"\\)$")),f=new RegExp("^hsla\\(".concat(l,",").concat(t,",").concat(t,",").concat(l,"\\)$")),c={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function y(){return this.rgb().formatHex()}function d(){return this.rgb().formatRgb()}function m(ye){var ve,xe;return ye=(ye+"").trim().toLowerCase(),(ve=i.exec(ye))?(xe=ve[1].length,ve=parseInt(ve[1],16),6===xe?g(ve):3===xe?new b(ve>>8&15|ve>>4&240,ve>>4&15|240&ve,(15&ve)<<4|15&ve,1):8===xe?x(ve>>24&255,ve>>16&255,ve>>8&255,(255&ve)/255):4===xe?x(ve>>12&15|ve>>8&240,ve>>8&15|ve>>4&240,ve>>4&15|240&ve,((15&ve)<<4|15&ve)/255):null):(ve=r.exec(ye))?new b(ve[1],ve[2],ve[3],1):(ve=n.exec(ye))?new b(255*ve[1]/100,255*ve[2]/100,255*ve[3]/100,1):(ve=a.exec(ye))?x(ve[1],ve[2],ve[3],ve[4]):(ve=s.exec(ye))?x(255*ve[1]/100,255*ve[2]/100,255*ve[3]/100,ve[4]):(ve=u.exec(ye))?I(ve[1],ve[2]/100,ve[3]/100,1):(ve=f.exec(ye))?I(ve[1],ve[2]/100,ve[3]/100,ve[4]):c.hasOwnProperty(ye)?g(c[ye]):"transparent"===ye?new b(NaN,NaN,NaN,0):null}function g(ye){return new b(ye>>16&255,ye>>8&255,255&ye,1)}function x(ye,ve,xe,Ce){return Ce<=0&&(ye=ve=xe=NaN),new b(ye,ve,xe,Ce)}function v(ye,ve,xe,Ce){return 1===arguments.length?((Oe=ye)instanceof o||(Oe=m(Oe)),Oe?new b((Oe=Oe.rgb()).r,Oe.g,Oe.b,Oe.opacity):new b):new b(ye,ve,xe,Ce??1);var Oe}function b(ye,ve,xe,Ce){this.r=+ye,this.g=+ve,this.b=+xe,this.opacity=+Ce}function h(){return"#".concat(P(this.r)).concat(P(this.g)).concat(P(this.b))}function S(){var ye=w(this.opacity);return"".concat(1===ye?"rgb(":"rgba(").concat(E(this.r),", ").concat(E(this.g),", ").concat(E(this.b)).concat(1===ye?")":", ".concat(ye,")"))}function w(ye){return isNaN(ye)?1:Math.max(0,Math.min(1,ye))}function E(ye){return Math.max(0,Math.min(255,Math.round(ye)||0))}function P(ye){return((ye=E(ye))<16?"0":"")+ye.toString(16)}function I(ye,ve,xe,Ce){return Ce<=0?ye=ve=xe=NaN:xe<=0||xe>=1?ye=ve=NaN:ve<=0&&(ye=NaN),new z(ye,ve,xe,Ce)}function O(ye){if(ye instanceof z)return new z(ye.h,ye.s,ye.l,ye.opacity);if(ye instanceof o||(ye=m(ye)),!ye)return new z;if(ye instanceof z)return ye;var ve=(ye=ye.rgb()).r/255,xe=ye.g/255,Ce=ye.b/255,Oe=Math.min(ve,xe,Ce),be=Math.max(ve,xe,Ce),ue=NaN,se=be-Oe,ge=(be+Oe)/2;return se?(ue=ve===be?(xe-Ce)/se+6*(xe<Ce):xe===be?(Ce-ve)/se+2:(ve-xe)/se+4,se/=ge<.5?be+Oe:2-be-Oe,ue*=60):se=ge>0&&ge<1?0:ue,new z(ue,se,ge,ye.opacity)}function z(ye,ve,xe,Ce){this.h=+ye,this.s=+ve,this.l=+xe,this.opacity=+Ce}function U(ye){return(ye=(ye||0)%360)<0?ye+360:ye}function R(ye){return Math.max(0,Math.min(1,ye||0))}function j(ye,ve,xe){return 255*(ye<60?ve+(xe-ve)*ye/60:ye<180?xe:ye<240?ve+(xe-ve)*(240-ye)/60:ve)}function Y(ye,ve,xe,Ce,Oe){var be=ye*ye,ue=be*ye;return((1-3*ye+3*be-ue)*ve+(4-6*be+3*ue)*xe+(1+3*ye+3*be-3*ue)*Ce+ue*Oe)/6}M(o,m,{copy:function(ye){return Object.assign(new this.constructor,this,ye)},displayable:function(){return this.rgb().displayable()},hex:y,formatHex:y,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return O(this).formatHsl()},formatRgb:d,toString:d}),M(b,v,k(o,{brighter:function(ye){return ye=null==ye?_:Math.pow(_,ye),new b(this.r*ye,this.g*ye,this.b*ye,this.opacity)},darker:function(ye){return ye=null==ye?T:Math.pow(T,ye),new b(this.r*ye,this.g*ye,this.b*ye,this.opacity)},rgb:function(){return this},clamp:function(){return new b(E(this.r),E(this.g),E(this.b),w(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:h,formatHex:h,formatHex8:function(){return"#".concat(P(this.r)).concat(P(this.g)).concat(P(this.b)).concat(P(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:S,toString:S})),M(z,function(ye,ve,xe,Ce){return 1===arguments.length?O(ye):new z(ye,ve,xe,Ce??1)},k(o,{brighter:function(ye){return ye=null==ye?_:Math.pow(_,ye),new z(this.h,this.s,this.l*ye,this.opacity)},darker:function(ye){return ye=null==ye?T:Math.pow(T,ye),new z(this.h,this.s,this.l*ye,this.opacity)},rgb:function(){var ye=this.h%360+360*(this.h<0),ve=isNaN(ye)||isNaN(this.s)?0:this.s,xe=this.l,Ce=xe+(xe<.5?xe:1-xe)*ve,Oe=2*xe-Ce;return new b(j(ye>=240?ye-240:ye+120,Oe,Ce),j(ye,Oe,Ce),j(ye<120?ye+240:ye-120,Oe,Ce),this.opacity)},clamp:function(){return new z(U(this.h),R(this.s),R(this.l),w(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var ye=w(this.opacity);return"".concat(1===ye?"hsl(":"hsla(").concat(U(this.h),", ").concat(100*R(this.s),"%, ").concat(100*R(this.l),"%").concat(1===ye?")":", ".concat(ye,")"))}}));var B=function(ye){return function(){return ye}};function V(ye,ve){var Ce,Oe,xe=ve-ye;return xe?(Ce=ye,Oe=xe,function(be){return Ce+be*Oe}):B(isNaN(ye)?ve:ye)}var q=function ye(ve){var Oe,xe=1==(Oe=+(Oe=ve))?V:function(be,ue){return ue-be?(se=be,ge=ue,Ie=Oe,se=Math.pow(se,Ie),ge=Math.pow(ge,Ie)-se,Ie=1/Ie,function(ke){return Math.pow(se+ke*ge,Ie)}):B(isNaN(be)?ue:be);var se,ge,Ie};function Ce(Oe,be){var ue=xe((Oe=v(Oe)).r,(be=v(be)).r),se=xe(Oe.g,be.g),ge=xe(Oe.b,be.b),Ie=V(Oe.opacity,be.opacity);return function(ke){return Oe.r=ue(ke),Oe.g=se(ke),Oe.b=ge(ke),Oe.opacity=Ie(ke),Oe+""}}return Ce.gamma=ye,Ce}(1);function ie(ye){return function(ve){var xe,Ce,Oe=ve.length,be=new Array(Oe),ue=new Array(Oe),se=new Array(Oe);for(xe=0;xe<Oe;++xe)Ce=v(ve[xe]),be[xe]=Ce.r||0,ue[xe]=Ce.g||0,se[xe]=Ce.b||0;return be=ye(be),ue=ye(ue),se=ye(se),Ce.opacity=1,function(ge){return Ce.r=be(ge),Ce.g=ue(ge),Ce.b=se(ge),Ce+""}}}function te(ye,ve){var xe,Ce=ve?ve.length:0,Oe=ye?Math.min(Ce,ye.length):0,be=new Array(Oe),ue=new Array(Ce);for(xe=0;xe<Oe;++xe)be[xe]=Te(ye[xe],ve[xe]);for(;xe<Ce;++xe)ue[xe]=ve[xe];return function(se){for(xe=0;xe<Oe;++xe)ue[xe]=be[xe](se);return ue}}function ee(ye,ve){var xe=new Date;return ye=+ye,ve=+ve,function(Ce){return xe.setTime(ye*(1-Ce)+ve*Ce),xe}}function $(ye,ve){return ye=+ye,ve=+ve,function(xe){return ye*(1-xe)+ve*xe}}function J(ye){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ve){return typeof ve}:function(ve){return ve&&"function"==typeof Symbol&&ve.constructor===Symbol&&ve!==Symbol.prototype?"symbol":typeof ve})(ye)}function X(ye,ve){var xe,Ce={},Oe={};for(xe in null!==ye&&"object"===J(ye)||(ye={}),null!==ve&&"object"===J(ve)||(ve={}),ve)xe in ye?Ce[xe]=Te(ye[xe],ve[xe]):Oe[xe]=ve[xe];return function(be){for(xe in Ce)Oe[xe]=Ce[xe](be);return Oe}}ie(function(ye){var ve=ye.length-1;return function(xe){var Ce=xe<=0?xe=0:xe>=1?(xe=1,ve-1):Math.floor(xe*ve),Oe=ye[Ce],be=ye[Ce+1];return Y((xe-Ce/ve)*ve,Ce>0?ye[Ce-1]:2*Oe-be,Oe,be,Ce<ve-1?ye[Ce+2]:2*be-Oe)}}),ie(function(ye){var ve=ye.length;return function(xe){var Ce=Math.floor(((xe%=1)<0?++xe:xe)*ve);return Y((xe-Ce/ve)*ve,ye[(Ce+ve-1)%ve],ye[Ce%ve],ye[(Ce+1)%ve],ye[(Ce+2)%ve])}});var ae=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ce=new RegExp(ae.source,"g");function le(ye,ve){var xe,Ce,Oe,Ie,be=ae.lastIndex=ce.lastIndex=0,ue=-1,se=[],ge=[];for(ye+="",ve+="";(xe=ae.exec(ye))&&(Ce=ce.exec(ve));)(Oe=Ce.index)>be&&(Oe=ve.slice(be,Oe),se[ue]?se[ue]+=Oe:se[++ue]=Oe),(xe=xe[0])===(Ce=Ce[0])?se[ue]?se[ue]+=Ce:se[++ue]=Ce:(se[++ue]=null,ge.push({i:ue,x:$(xe,Ce)})),be=ce.lastIndex;return be<ve.length&&(Oe=ve.slice(be),se[ue]?se[ue]+=Oe:se[++ue]=Oe),se.length<2?ge[0]?(Ie=ge[0].x,function(ke){return Ie(ke)+""}):function(Ie){return function(){return Ie}}(ve):(ve=ge.length,function(Ie){for(var ke,Se=0;Se<ve;++Se)se[(ke=ge[Se]).i]=ke.x(Ie);return se.join("")})}function pe(ye,ve){ve||(ve=[]);var xe,Ce=ye?Math.min(ve.length,ye.length):0,Oe=ve.slice();return function(be){for(xe=0;xe<Ce;++xe)Oe[xe]=ye[xe]*(1-be)+ve[xe]*be;return Oe}}function we(ye){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ve){return typeof ve}:function(ve){return ve&&"function"==typeof Symbol&&ve.constructor===Symbol&&ve!==Symbol.prototype?"symbol":typeof ve})(ye)}function Te(ye,ve){var xe,Ce,Oe=we(ve);return null==ve||"boolean"===Oe?B(ve):("number"===Oe?$:"string"===Oe?(xe=m(ve))?(ve=xe,q):le:ve instanceof m?q:ve instanceof Date?ee:(Ce=ve,!ArrayBuffer.isView(Ce)||Ce instanceof DataView?Array.isArray(ve)?te:"function"!=typeof ve.valueOf&&"function"!=typeof ve.toString||isNaN(ve)?X:$:pe))(ye,ve)}},30584:function(ne){"use strict";ne.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},7294:function(ne){"use strict";ne.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},47916:function(ne){"use strict";ne.exports=JSON.parse('["normal","italic","oblique"]')},2904:function(ne){"use strict";ne.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},68194:function(ne){"use strict";ne.exports=JSON.parse('["inherit","initial","unset"]')},3748:function(ne){"use strict";ne.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},da={};function Ri(ne){var F=da[ne];if(void 0!==F)return F.exports;var e=da[ne]={exports:{}};return bc[ne].call(e.exports,e,e.exports,Ri),e.exports}return Ri.n=function(ne){var F=ne&&ne.__esModule?function(){return ne.default}:function(){return ne};return Ri.d(F,{a:F}),F},Ri.d=function(ne,F){for(var e in F)Ri.o(F,e)&&!Ri.o(ne,e)&&Object.defineProperty(ne,e,{enumerable:!0,get:F[e]})},Ri.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),Ri.o=function(ne,F){return Object.prototype.hasOwnProperty.call(ne,F)},Ri.r=function(ne){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(ne,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ne,"__esModule",{value:!0})},Ri(13792)}()},1414:function(Xh){Xh.exports=function(){"use strict";function bc(n,a,s,u,f){!function c(y,d,m,g,x){for(;g>m;){if(g-m>600){var v=g-m+1,b=d-m+1,h=Math.log(v),S=.5*Math.exp(2*h/3),w=.5*Math.sqrt(h*S*(v-S)/v)*(b-v/2<0?-1:1);c(y,d,Math.max(m,Math.floor(d-b*S/v+w)),Math.min(g,Math.floor(d+(v-b)*S/v+w)),x)}var I=y[d],O=m,z=g;for(da(y,m,d),x(y[g],I)>0&&da(y,m,g);O<z;){for(da(y,O,z),O++,z--;x(y[O],I)<0;)O++;for(;x(y[z],I)>0;)z--}0===x(y[m],I)?da(y,m,z):da(y,++z,g),z<=d&&(m=z+1),d<=z&&(g=z-1)}}(n,a,s||0,u||n.length-1,f||Ri)}function da(n,a,s){var u=n[a];n[a]=n[s],n[s]=u}function Ri(n,a){return n<a?-1:n>a?1:0}var ne=function(n){void 0===n&&(n=9),this._maxEntries=Math.max(4,n),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function F(n,a,s){if(!s)return a.indexOf(n);for(var u=0;u<a.length;u++)if(s(n,a[u]))return u;return-1}function e(n,a){M(n,0,n.children.length,a,n)}function M(n,a,s,u,f){f||(f=i(null)),f.minX=1/0,f.minY=1/0,f.maxX=-1/0,f.maxY=-1/0;for(var c=a;c<s;c++){var y=n.children[c];k(f,n.leaf?u(y):y)}return f}function k(n,a){return n.minX=Math.min(n.minX,a.minX),n.minY=Math.min(n.minY,a.minY),n.maxX=Math.max(n.maxX,a.maxX),n.maxY=Math.max(n.maxY,a.maxY),n}function o(n,a){return n.minX-a.minX}function T(n,a){return n.minY-a.minY}function _(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function p(n){return n.maxX-n.minX+(n.maxY-n.minY)}function l(n,a){return n.minX<=a.minX&&n.minY<=a.minY&&a.maxX<=n.maxX&&a.maxY<=n.maxY}function t(n,a){return a.minX<=n.maxX&&a.minY<=n.maxY&&a.maxX>=n.minX&&a.maxY>=n.minY}function i(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function r(n,a,s,u,f){for(var c=[a,s];c.length;)if(!((s=c.pop())-(a=c.pop())<=u)){var y=a+Math.ceil((s-a)/u/2)*u;bc(n,y,a,s,f),c.push(a,y,y,s)}}return ne.prototype.all=function(){return this._all(this.data,[])},ne.prototype.search=function(n){var a=this.data,s=[];if(!t(n,a))return s;for(var u=this.toBBox,f=[];a;){for(var c=0;c<a.children.length;c++){var y=a.children[c],d=a.leaf?u(y):y;t(n,d)&&(a.leaf?s.push(y):l(n,d)?this._all(y,s):f.push(y))}a=f.pop()}return s},ne.prototype.collides=function(n){var a=this.data;if(!t(n,a))return!1;for(var s=[];a;){for(var u=0;u<a.children.length;u++){var f=a.children[u],c=a.leaf?this.toBBox(f):f;if(t(n,c)){if(a.leaf||l(n,c))return!0;s.push(f)}}a=s.pop()}return!1},ne.prototype.load=function(n){if(!n||!n.length)return this;if(n.length<this._minEntries){for(var a=0;a<n.length;a++)this.insert(n[a]);return this}var s=this._build(n.slice(),0,n.length-1,0);if(this.data.children.length)if(this.data.height===s.height)this._splitRoot(this.data,s);else{if(this.data.height<s.height){var u=this.data;this.data=s,s=u}this._insert(s,this.data.height-s.height-1,!0)}else this.data=s;return this},ne.prototype.insert=function(n){return n&&this._insert(n,this.data.height-1),this},ne.prototype.clear=function(){return this.data=i([]),this},ne.prototype.remove=function(n,a){if(!n)return this;for(var s,u,f,c=this.data,y=this.toBBox(n),d=[],m=[];c||d.length;){if(c||(c=d.pop(),u=d[d.length-1],s=m.pop(),f=!0),c.leaf){var g=F(n,c.children,a);if(-1!==g)return c.children.splice(g,1),d.push(c),this._condense(d),this}f||c.leaf||!l(c,y)?u?(s++,c=u.children[s],f=!1):c=null:(d.push(c),m.push(s),s=0,u=c,c=c.children[0])}return this},ne.prototype.toBBox=function(n){return n},ne.prototype.compareMinX=function(n,a){return n.minX-a.minX},ne.prototype.compareMinY=function(n,a){return n.minY-a.minY},ne.prototype.toJSON=function(){return this.data},ne.prototype.fromJSON=function(n){return this.data=n,this},ne.prototype._all=function(n,a){for(var s=[];n;)n.leaf?a.push.apply(a,n.children):s.push.apply(s,n.children),n=s.pop();return a},ne.prototype._build=function(n,a,s,u){var f,c=s-a+1,y=this._maxEntries;if(c<=y)return e(f=i(n.slice(a,s+1)),this.toBBox),f;u||(u=Math.ceil(Math.log(c)/Math.log(y)),y=Math.ceil(c/Math.pow(y,u-1))),(f=i([])).leaf=!1,f.height=u;var d=Math.ceil(c/y),m=d*Math.ceil(Math.sqrt(y));r(n,a,s,m,this.compareMinX);for(var g=a;g<=s;g+=m){var x=Math.min(g+m-1,s);r(n,g,x,d,this.compareMinY);for(var v=g;v<=x;v+=d){var b=Math.min(v+d-1,x);f.children.push(this._build(n,v,b,u-1))}}return e(f,this.toBBox),f},ne.prototype._chooseSubtree=function(n,a,s,u){for(;u.push(a),!a.leaf&&u.length-1!==s;){for(var f=1/0,c=1/0,y=void 0,d=0;d<a.children.length;d++){var m=a.children[d],g=_(m),x=(v=n,b=m,(Math.max(b.maxX,v.maxX)-Math.min(b.minX,v.minX))*(Math.max(b.maxY,v.maxY)-Math.min(b.minY,v.minY))-g);x<c?(c=x,f=g<f?g:f,y=m):x===c&&g<f&&(f=g,y=m)}a=y||a.children[0]}var v,b;return a},ne.prototype._insert=function(n,a,s){var u=s?n:this.toBBox(n),f=[],c=this._chooseSubtree(u,this.data,a,f);for(c.children.push(n),k(c,u);a>=0&&f[a].children.length>this._maxEntries;)this._split(f,a),a--;this._adjustParentBBoxes(u,f,a)},ne.prototype._split=function(n,a){var s=n[a],u=s.children.length,f=this._minEntries;this._chooseSplitAxis(s,f,u);var c=this._chooseSplitIndex(s,f,u),y=i(s.children.splice(c,s.children.length-c));y.height=s.height,y.leaf=s.leaf,e(s,this.toBBox),e(y,this.toBBox),a?n[a-1].children.push(y):this._splitRoot(s,y)},ne.prototype._splitRoot=function(n,a){this.data=i([n,a]),this.data.height=n.height+1,this.data.leaf=!1,e(this.data,this.toBBox)},ne.prototype._chooseSplitIndex=function(n,a,s){for(var u,f,c,y,d,m,g,x=1/0,v=1/0,b=a;b<=s-a;b++){var h=M(n,0,b,this.toBBox),S=M(n,b,s,this.toBBox),w=(f=h,c=S,void 0,void 0,void 0,void 0,y=Math.max(f.minX,c.minX),d=Math.max(f.minY,c.minY),m=Math.min(f.maxX,c.maxX),g=Math.min(f.maxY,c.maxY),Math.max(0,m-y)*Math.max(0,g-d)),E=_(h)+_(S);w<x?(x=w,u=b,v=E<v?E:v):w===x&&E<v&&(v=E,u=b)}return u||s-a},ne.prototype._chooseSplitAxis=function(n,a,s){var u=n.leaf?this.compareMinX:o,f=n.leaf?this.compareMinY:T;this._allDistMargin(n,a,s,u)<this._allDistMargin(n,a,s,f)&&n.children.sort(u)},ne.prototype._allDistMargin=function(n,a,s,u){n.children.sort(u);for(var f=this.toBBox,c=M(n,0,a,f),y=M(n,s-a,s,f),d=p(c)+p(y),m=a;m<s-a;m++){var g=n.children[m];k(c,n.leaf?f(g):g),d+=p(c)}for(var x=s-a-1;x>=a;x--){var v=n.children[x];k(y,n.leaf?f(v):v),d+=p(y)}return d},ne.prototype._adjustParentBBoxes=function(n,a,s){for(var u=s;u>=0;u--)k(a[u],n)},ne.prototype._condense=function(n){for(var a=n.length-1,s=void 0;a>=0;a--)0===n[a].children.length?a>0?(s=n[a-1].children).splice(s.indexOf(n[a]),1):this.clear():e(n[a],this.toBBox)},ne}()}}]);