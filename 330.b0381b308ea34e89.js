(self.webpackChunktiles=self.webpackChunktiles||[]).push([[330],{330:(jd,Zu,Aa)=>{"use strict";Aa.r(Zu),Aa.d(Zu,{MapGridModule:()=>j1});var Hi=Aa(6814),ie=Aa(7664);const k=class F{constructor(A){this.type=A,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}},b=class T{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};function l(ee,A){return ee>A?1:ee<A?-1:0}function i(ee,A,B){if(ee[0]<=A)return 0;const J=ee.length;if(A<=ee[J-1])return J-1;if("function"==typeof B){for(let se=1;se<J;++se){const Se=ee[se];if(Se===A)return se;if(Se<A)return B(A,ee[se-1],Se)>0?se-1:se}return J-1}if(B>0){for(let se=1;se<J;++se)if(ee[se]<A)return se-1;return J-1}if(B<0){for(let se=1;se<J;++se)if(ee[se]<=A)return se;return J-1}for(let se=1;se<J;++se){if(ee[se]==A)return se;if(ee[se]<A)return ee[se-1]-A<A-ee[se]?se-1:se}return J-1}function r(ee,A,B){for(;A<B;){const J=ee[A];ee[A]=ee[B],ee[B]=J,++A,--B}}function n(ee,A){const B=Array.isArray(A)?A:[A],J=B.length;for(let se=0;se<J;se++)ee[ee.length]=B[se]}function s(ee,A){const B=ee.length;if(B!==A.length)return!1;for(let J=0;J<B;J++)if(ee[J]!==A[J])return!1;return!0}function u(){return!0}function y(){return!1}function d(){}function m(ee){let B,J,se,A=!1;return function(){const Se=Array.prototype.slice.call(arguments);return(!A||this!==se||!s(Se,J))&&(A=!0,se=this,J=Se,B=ee.apply(this,arguments)),B}}function x(ee){for(const A in ee)delete ee[A]}function v(ee){let A;for(A in ee)return!1;return!A}const f=class _ extends b{constructor(A){super(),this.eventTarget_=A,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(A,B){if(!A||!B)return;const J=this.listeners_||(this.listeners_={}),se=J[A]||(J[A]=[]);se.includes(B)||se.push(B)}dispatchEvent(A){const B="string"==typeof A,J=B?A:A.type,se=this.listeners_&&this.listeners_[J];if(!se)return;const Se=B?new k(A):A;Se.target||(Se.target=this.eventTarget_||this);const Re=this.dispatching_||(this.dispatching_={}),Ze=this.pendingRemovals_||(this.pendingRemovals_={});let $e;J in Re||(Re[J]=0,Ze[J]=0),++Re[J];for(let wt=0,bt=se.length;wt<bt;++wt)if($e="handleEvent"in se[wt]?se[wt].handleEvent(Se):se[wt].call(this,Se),!1===$e||Se.propagationStopped){$e=!1;break}if(0==--Re[J]){let wt=Ze[J];for(delete Ze[J];wt--;)this.removeEventListener(J,d);delete Re[J]}return $e}disposeInternal(){this.listeners_&&x(this.listeners_)}getListeners(A){return this.listeners_&&this.listeners_[A]||void 0}hasListener(A){return!!this.listeners_&&(A?A in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(A,B){if(!this.listeners_)return;const J=this.listeners_[A];if(!J)return;const se=J.indexOf(B);-1!==se&&(this.pendingRemovals_&&A in this.pendingRemovals_?(J[se]=d,++this.pendingRemovals_[A]):(J.splice(se,1),0===J.length&&delete this.listeners_[A]))}};function w(ee,A,B,J,se){if(J&&J!==ee&&(B=B.bind(J)),se){const Re=B;B=function(){ee.removeEventListener(A,B),Re.apply(this,arguments)}}const Se={target:ee,type:A,listener:B};return ee.addEventListener(A,B),Se}function E(ee,A,B,J){return w(ee,A,B,J,!0)}function P(ee){ee&&ee.target&&(ee.target.removeEventListener(ee.type,ee.listener),x(ee))}const z=class L extends f{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent("change")}getRevision(){return this.revision_}onInternal(A,B){if(Array.isArray(A)){const J=A.length,se=new Array(J);for(let Se=0;Se<J;++Se)se[Se]=w(this,A[Se],B);return se}return w(this,A,B)}onceInternal(A,B){let J;if(Array.isArray(A)){const se=A.length;J=new Array(se);for(let Se=0;Se<se;++Se)J[Se]=E(this,A[Se],B)}else J=E(this,A,B);return B.ol_key=J,J}unInternal(A,B){const J=B.ol_key;if(J)!function O(ee){if(Array.isArray(ee))for(let A=0,B=ee.length;A<B;++A)P(ee[A]);else P(ee)}(J);else if(Array.isArray(A))for(let se=0,Se=A.length;se<Se;++se)this.removeEventListener(A[se],B);else this.removeEventListener(A,B)}};function V(){throw new Error("Unimplemented abstract method.")}let R=0;function U(ee){return ee.ol_uid||(ee.ol_uid=String(++R))}class N extends k{constructor(A,B,J){super(A),this.key=B,this.oldValue=J}}const W=class G extends z{constructor(A){super(),U(this),this.values_=null,void 0!==A&&this.setProperties(A)}get(A){let B;return this.values_&&this.values_.hasOwnProperty(A)&&(B=this.values_[A]),B}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(A,B){let J;J=`change:${A}`,this.hasListener(J)&&this.dispatchEvent(new N(J,A,B)),J="propertychange",this.hasListener(J)&&this.dispatchEvent(new N(J,A,B))}addChangeListener(A,B){this.addEventListener(`change:${A}`,B)}removeChangeListener(A,B){this.removeEventListener(`change:${A}`,B)}set(A,B,J){const se=this.values_||(this.values_={});if(J)se[A]=B;else{const Se=se[A];se[A]=B,Se!==B&&this.notify(A,Se)}}setProperties(A,B){for(const J in A)this.set(J,A[J],B)}applyProperties(A){A.values_&&Object.assign(this.values_||(this.values_={}),A.values_)}unset(A,B){if(this.values_&&A in this.values_){const J=this.values_[A];delete this.values_[A],v(this.values_)&&(this.values_=null),B||this.notify(A,J)}}};class ne extends k{constructor(A,B,J){super(A),this.element=B,this.index=J}}const $=class Q extends W{constructor(A,B){if(super(),this.unique_=!!(B=B||{}).unique,this.array_=A||[],this.unique_)for(let J=0,se=this.array_.length;J<se;++J)this.assertUnique_(this.array_[J],J);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(A){for(let B=0,J=A.length;B<J;++B)this.push(A[B]);return this}forEach(A){const B=this.array_;for(let J=0,se=B.length;J<se;++J)A(B[J],J,B)}getArray(){return this.array_}item(A){return this.array_[A]}getLength(){return this.get("length")}insertAt(A,B){if(A<0||A>this.getLength())throw new Error("Index out of bounds: "+A);this.unique_&&this.assertUnique_(B),this.array_.splice(A,0,B),this.updateLength_(),this.dispatchEvent(new ne("add",B,A))}pop(){return this.removeAt(this.getLength()-1)}push(A){this.unique_&&this.assertUnique_(A);const B=this.getLength();return this.insertAt(B,A),this.getLength()}remove(A){const B=this.array_;for(let J=0,se=B.length;J<se;++J)if(B[J]===A)return this.removeAt(J)}removeAt(A){if(A<0||A>=this.getLength())return;const B=this.array_[A];return this.array_.splice(A,1),this.updateLength_(),this.dispatchEvent(new ne("remove",B,A)),B}setAt(A,B){if(A>=this.getLength())return void this.insertAt(A,B);if(A<0)throw new Error("Index out of bounds: "+A);this.unique_&&this.assertUnique_(B,A);const se=this.array_[A];this.array_[A]=B,this.dispatchEvent(new ne("remove",se,A)),this.dispatchEvent(new ne("add",B,A))}updateLength_(){this.set("length",this.array_.length)}assertUnique_(A,B){for(let J=0,se=this.array_.length;J<se;++J)if(this.array_[J]===A&&J!==B)throw new Error("Duplicate item added to a unique collection")}};function oe(ee,A){if(!ee)throw new Error(A)}function fe(ee,A,B){return Math.min(Math.max(ee,A),B)}function ue(ee,A,B,J,se,Se){const Re=se-B,Ze=Se-J;if(0!==Re||0!==Ze){const $e=((ee-B)*Re+(A-J)*Ze)/(Re*Re+Ze*Ze);$e>1?(B=se,J=Se):$e>0&&(B+=Re*$e,J+=Ze*$e)}return ge(ee,A,B,J)}function ge(ee,A,B,J){const se=B-ee,Se=J-A;return se*se+Se*Se}function xe(ee){return ee*Math.PI/180}function ye(ee,A){const B=ee%A;return B*A<0?B+A:B}function _e(ee,A,B){return ee+B*(A-ee)}function Ie(ee,A){const B=Math.pow(10,A);return Math.round(ee*B)/B}function be(ee,A){return Math.floor(Ie(ee,A))}function he(ee,A){return Math.ceil(Ie(ee,A))}const me=class ce extends W{constructor(A){super(),this.background_=A.background;const B=Object.assign({},A);"object"==typeof A.properties&&(delete B.properties,Object.assign(B,A.properties)),B.opacity=void 0!==A.opacity?A.opacity:1,oe("number"==typeof B.opacity,"Layer opacity must be a number"),B.visible=void 0===A.visible||A.visible,B.zIndex=A.zIndex,B.maxResolution=void 0!==A.maxResolution?A.maxResolution:1/0,B.minResolution=void 0!==A.minResolution?A.minResolution:0,B.minZoom=void 0!==A.minZoom?A.minZoom:-1/0,B.maxZoom=void 0!==A.maxZoom?A.maxZoom:1/0,this.className_=void 0!==B.className?B.className:"ol-layer",delete B.className,this.setProperties(B),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(A){const B=this.state_||{layer:this,managed:void 0===A||A},J=this.getZIndex();return B.opacity=fe(Math.round(100*this.getOpacity())/100,0,1),B.visible=this.getVisible(),B.extent=this.getExtent(),B.zIndex=void 0!==J||B.managed?J:1/0,B.maxResolution=this.getMaxResolution(),B.minResolution=Math.max(this.getMinResolution(),0),B.minZoom=this.getMinZoom(),B.maxZoom=this.getMaxZoom(),this.state_=B,B}getLayersArray(A){return V()}getLayerStatesArray(A){return V()}getExtent(){return this.get("extent")}getMaxResolution(){return this.get("maxResolution")}getMinResolution(){return this.get("minResolution")}getMinZoom(){return this.get("minZoom")}getMaxZoom(){return this.get("maxZoom")}getOpacity(){return this.get("opacity")}getSourceState(){return V()}getVisible(){return this.get("visible")}getZIndex(){return this.get("zIndex")}setBackground(A){this.background_=A,this.changed()}setExtent(A){this.set("extent",A)}setMaxResolution(A){this.set("maxResolution",A)}setMinResolution(A){this.set("minResolution",A)}setMaxZoom(A){this.set("maxZoom",A)}setMinZoom(A){this.set("minZoom",A)}setOpacity(A){oe("number"==typeof A,"Layer opacity must be a number"),this.set("opacity",A)}setVisible(A){this.set("visible",A)}setZIndex(A){this.set("zIndex",A)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}},Ce={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},Oe=42,Ne=256,Me={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937},Ue=class Le{constructor(A){this.code_=A.code,this.units_=A.units,this.extent_=void 0!==A.extent?A.extent:null,this.worldExtent_=void 0!==A.worldExtent?A.worldExtent:null,this.axisOrientation_=void 0!==A.axisOrientation?A.axisOrientation:"enu",this.global_=void 0!==A.global&&A.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=A.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=A.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Me[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(A){this.global_=A,this.canWrapX_=!(!A||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(A){this.defaultTileGrid_=A}setExtent(A){this.extent_=A,this.canWrapX_=!(!this.global_||!A)}setWorldExtent(A){this.worldExtent_=A}setGetPointResolution(A){this.getPointResolutionFunc_=A}getPointResolutionFunc(){return this.getPointResolutionFunc_}},ze=6378137,qe=Math.PI*ze,Ke=[-qe,-qe,qe,qe],it=[-180,-85,180,85],ft=ze*Math.log(Math.tan(Math.PI/2));class dt extends Ue{constructor(A){super({code:A,units:"m",extent:Ke,global:!0,worldExtent:it,getPointResolution:function(B,J){return B/Math.cosh(J[1]/ze)}})}}const kt=[new dt("EPSG:3857"),new dt("EPSG:102100"),new dt("EPSG:102113"),new dt("EPSG:900913"),new dt("http://www.opengis.net/def/crs/EPSG/0/3857"),new dt("http://www.opengis.net/gml/srs/epsg.xml#3857")];function St(ee,A,B){const J=ee.length;B=B>1?B:2,void 0===A&&(A=B>2?ee.slice():new Array(J));for(let se=0;se<J;se+=B){A[se]=qe*ee[se]/180;let Se=ze*Math.log(Math.tan(Math.PI*(+ee[se+1]+90)/360));Se>ft?Se=ft:Se<-ft&&(Se=-ft),A[se+1]=Se}return A}function Tt(ee,A,B){const J=ee.length;B=B>1?B:2,void 0===A&&(A=B>2?ee.slice():new Array(J));for(let se=0;se<J;se+=B)A[se]=180*ee[se]/qe,A[se+1]=360*Math.atan(Math.exp(ee[se+1]/ze))/Math.PI-90;return A}const ot=[-180,-90,180,90],Rt=6378137*Math.PI/180;class Vt extends Ue{constructor(A,B){super({code:A,units:"degrees",extent:ot,axisOrientation:B,global:!0,metersPerUnit:Rt,worldExtent:ot})}}const Ht=[new Vt("CRS:84"),new Vt("EPSG:4326","neu"),new Vt("urn:ogc:def:crs:OGC:1.3:CRS84"),new Vt("urn:ogc:def:crs:OGC:2:84"),new Vt("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Vt("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Vt("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let zt={},et={};function ht(ee,A,B){const J=ee.getCode(),se=A.getCode();J in et||(et[J]={}),et[J][se]=B}const ut={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function tt(ee){const A=[1/0,1/0,-1/0,-1/0];for(let B=0,J=ee.length;B<J;++B)hn(A,ee[B]);return A}function At(ee,A,B){return B?(B[0]=ee[0]-A,B[1]=ee[1]-A,B[2]=ee[2]+A,B[3]=ee[3]+A,B):[ee[0]-A,ee[1]-A,ee[2]+A,ee[3]+A]}function Mt(ee,A){return A?(A[0]=ee[0],A[1]=ee[1],A[2]=ee[2],A[3]=ee[3],A):ee.slice()}function yt(ee,A,B){let J,se;return J=A<ee[0]?ee[0]-A:ee[2]<A?A-ee[2]:0,se=B<ee[1]?ee[1]-B:ee[3]<B?B-ee[3]:0,J*J+se*se}function Pt(ee,A){return Dt(ee,A[0],A[1])}function Ct(ee,A){return ee[0]<=A[0]&&A[2]<=ee[2]&&ee[1]<=A[1]&&A[3]<=ee[3]}function Dt(ee,A,B){return ee[0]<=A&&A<=ee[2]&&ee[1]<=B&&B<=ee[3]}function Ut(ee,A){const Re=A[0],Ze=A[1];let $e=ut.UNKNOWN;return Re<ee[0]?$e|=ut.LEFT:Re>ee[2]&&($e|=ut.RIGHT),Ze<ee[1]?$e|=ut.BELOW:Ze>ee[3]&&($e|=ut.ABOVE),$e===ut.UNKNOWN&&($e=ut.INTERSECTING),$e}function qt(ee,A,B,J,se){return se?(se[0]=ee,se[1]=A,se[2]=B,se[3]=J,se):[ee,A,B,J]}function an(ee){return qt(1/0,1/0,-1/0,-1/0,ee)}function mn(ee,A){const B=ee[0],J=ee[1];return qt(B,J,B,J,A)}function sn(ee,A,B,J,se){return pn(an(se),ee,A,B,J)}function qn(ee,A){return ee[0]==A[0]&&ee[2]==A[2]&&ee[1]==A[1]&&ee[3]==A[3]}function hn(ee,A){A[0]<ee[0]&&(ee[0]=A[0]),A[0]>ee[2]&&(ee[2]=A[0]),A[1]<ee[1]&&(ee[1]=A[1]),A[1]>ee[3]&&(ee[3]=A[1])}function pn(ee,A,B,J,se){for(;B<J;B+=se)On(ee,A[B],A[B+1]);return ee}function On(ee,A,B){ee[0]=Math.min(ee[0],A),ee[1]=Math.min(ee[1],B),ee[2]=Math.max(ee[2],A),ee[3]=Math.max(ee[3],B)}function Dn(ee,A){let B;return B=A(Gn(ee)),!!(B||(B=A(Nn(ee)),B)||(B=A(Zn(ee)),B)||(B=A(En(ee)),B))&&B}function Vn(ee){let A=0;return fr(ee)||(A=Kn(ee)*or(ee)),A}function Gn(ee){return[ee[0],ee[1]]}function Nn(ee){return[ee[2],ee[1]]}function ir(ee){return[(ee[0]+ee[2])/2,(ee[1]+ee[3])/2]}function $n(ee,A){let B;if("bottom-left"===A)B=Gn(ee);else if("bottom-right"===A)B=Nn(ee);else if("top-left"===A)B=En(ee);else{if("top-right"!==A)throw new Error("Invalid corner");B=Zn(ee)}return B}function lr(ee,A,B,J,se){const[Se,Re,Ze,$e,wt,bt,Gt,rn]=vr(ee,A,B,J);return qt(Math.min(Se,Ze,wt,Gt),Math.min(Re,$e,bt,rn),Math.max(Se,Ze,wt,Gt),Math.max(Re,$e,bt,rn),se)}function vr(ee,A,B,J){const se=A*J[0]/2,Se=A*J[1]/2,Re=Math.cos(B),Ze=Math.sin(B),$e=se*Re,wt=se*Ze,bt=Se*Re,Gt=Se*Ze,rn=ee[0],_n=ee[1];return[rn-$e+Gt,_n-wt-bt,rn-$e-Gt,_n-wt+bt,rn+$e-Gt,_n+wt+bt,rn+$e+Gt,_n+wt-bt,rn-$e+Gt,_n-wt-bt]}function or(ee){return ee[3]-ee[1]}function fn(ee,A,B){const J=B||[1/0,1/0,-1/0,-1/0];return tr(ee,A)?(J[0]=ee[0]>A[0]?ee[0]:A[0],J[1]=ee[1]>A[1]?ee[1]:A[1],J[2]=ee[2]<A[2]?ee[2]:A[2],J[3]=ee[3]<A[3]?ee[3]:A[3]):an(J),J}function En(ee){return[ee[0],ee[3]]}function Zn(ee){return[ee[2],ee[3]]}function Kn(ee){return ee[2]-ee[0]}function tr(ee,A){return ee[0]<=A[2]&&ee[2]>=A[0]&&ee[1]<=A[3]&&ee[3]>=A[1]}function fr(ee){return ee[2]<ee[0]||ee[3]<ee[1]}function Zt(ee,A){const B=A.getExtent(),J=ir(ee);if(A.canWrapX()&&(J[0]<B[0]||J[0]>=B[2])){const se=Kn(B),Re=Math.floor((J[0]-B[0])/se)*se;ee[0]-=Re,ee[2]-=Re}return ee}function un(ee,A,B){if(A.canWrapX()){const J=A.getExtent();if(!isFinite(ee[0])||!isFinite(ee[2]))return[[J[0],ee[1],J[2],ee[3]]];Zt(ee,A);const se=Kn(J);if(Kn(ee)>se&&!B)return[[J[0],ee[1],J[2],ee[3]]];if(ee[0]<J[0])return[[ee[0]+se,ee[1],J[2],ee[3]],[J[0],ee[1],ee[2],ee[3]]];if(ee[2]>J[2])return[[ee[0],ee[1],J[2],ee[3]],[J[0],ee[1],ee[2]-se,ee[3]]]}return[ee]}function dn(ee,A){let B=!0;for(let J=ee.length-1;J>=0;--J)if(ee[J]!=A[J]){B=!1;break}return B}function xn(ee,A){const B=Math.cos(A),J=Math.sin(A),Se=ee[1]*B+ee[0]*J;return ee[0]=ee[0]*B-ee[1]*J,ee[1]=Se,ee}function gr(ee,A){if(A.canWrapX()){const B=Kn(A.getExtent()),J=function br(ee,A,B){const J=A.getExtent();let se=0;return A.canWrapX()&&(ee[0]<J[0]||ee[0]>J[2])&&(B=B||Kn(J),se=Math.floor((ee[0]-J[0])/B)),se}(ee,A,B);J&&(ee[0]-=J*B)}return ee}const pr=6371008.8;function Lr(ee,A,B){B=B||pr;const J=xe(ee[1]),se=xe(A[1]),Se=(se-J)/2,Re=xe(A[0]-ee[0])/2,Ze=Math.sin(Se)*Math.sin(Se)+Math.sin(Re)*Math.sin(Re)*Math.cos(J)*Math.cos(se);return 2*B*Math.atan2(Math.sqrt(Ze),Math.sqrt(1-Ze))}const ai={info:1,warn:2,error:3,none:4};let Xi=ai.info;function ea(...ee){Xi>ai.warn||console.warn(...ee)}let so=!0;function li(ee){so=!(void 0===ee||ee)}function za(ee,A){if(void 0!==A)for(let B=0,J=ee.length;B<J;++B)A[B]=ee[B];else A=ee.slice();return A}function No(ee,A){if(void 0!==A&&ee!==A){for(let B=0,J=ee.length;B<J;++B)A[B]=ee[B];ee=A}return ee}function Na(ee){(function We(ee,A){zt[ee]=A})(ee.getCode(),ee),ht(ee,ee,za)}function Ia(ee){return"string"==typeof ee?function nt(ee){return zt[ee]||zt[ee.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(ee):ee||null}function Qa(ee,A,B,J){let se;const Se=(ee=Ia(ee)).getPointResolutionFunc();if(Se){if(se=Se(A,B),J&&J!==ee.getUnits()){const Re=ee.getMetersPerUnit();Re&&(se=se*Re/Me[J])}}else{const Re=ee.getUnits();if("degrees"==Re&&!J||"degrees"==J)se=A;else{const Ze=To(ee,Ia("EPSG:4326"));if(Ze===No&&"degrees"!==Re)se=A*ee.getMetersPerUnit();else{let wt=[B[0]-A/2,B[1],B[0]+A/2,B[1],B[0],B[1]-A/2,B[0],B[1]+A/2];wt=Ze(wt,wt,2),se=(Lr(wt.slice(0,2),wt.slice(2,4))+Lr(wt.slice(4,6),wt.slice(6,8)))/2}const $e=J?Me[J]:ee.getMetersPerUnit();void 0!==$e&&(se/=$e)}}return se}function ds(ee){(function js(ee){ee.forEach(Na)})(ee),ee.forEach(function(A){ee.forEach(function(B){A!==B&&ht(A,B,za)})})}function Eo(ee,A){return ee?"string"==typeof ee?Ia(ee):ee:Ia(A)}function Ei(ee,A){return li(),vo(ee,"EPSG:4326",void 0!==A?A:"EPSG:3857")}function Fa(ee,A){const B=vo(ee,void 0!==A?A:"EPSG:3857","EPSG:4326"),J=B[0];return(J<-180||J>180)&&(B[0]=ye(J+180,360)-180),B}function Io(ee,A){if(ee===A)return!0;const B=ee.getUnits()===A.getUnits();return(ee.getCode()===A.getCode()||To(ee,A)===za)&&B}function To(ee,A){let se=function He(ee,A){let B;return ee in et&&A in et[ee]&&(B=et[ee][A]),B}(ee.getCode(),A.getCode());return se||(se=No),se}function Ao(ee,A){return To(Ia(ee),Ia(A))}function vo(ee,A,B){return Ao(A,B)(ee,void 0,ee.length)}let Oa=null;function Ul(){return Oa}function Vs(ee,A){return ee}function Is(ee,A){return so&&!dn(ee,[0,0])&&ee[0]>=-180&&ee[0]<=180&&ee[1]>=-90&&ee[1]<=90&&(so=!1,ea("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),ee}function ac(ee,A){return ee}function jo(ee,A){return ee}function gs(ee,A,B){return function(J,se,Se,Re,Ze){if(!J)return;if(!se&&!A)return J;const $e=A?0:Se[0]*se,wt=A?0:Se[1]*se,bt=Ze?Ze[0]:0,Gt=Ze?Ze[1]:0;let rn=ee[0]+$e/2+bt,_n=ee[2]-$e/2+bt,Cn=ee[1]+wt/2+Gt,jn=ee[3]-wt/2+Gt;rn>_n&&(rn=(_n+rn)/2,_n=rn),Cn>jn&&(Cn=(jn+Cn)/2,jn=Cn);let Yn=fe(J[0],rn,_n),er=fe(J[1],Cn,jn);if(Re&&B&&se){const rr=30*se;Yn+=-rr*Math.log(1+Math.max(0,rn-J[0])/rr)+rr*Math.log(1+Math.max(0,J[0]-_n)/rr),er+=-rr*Math.log(1+Math.max(0,Cn-J[1])/rr)+rr*Math.log(1+Math.max(0,J[1]-jn)/rr)}return[Yn,er]}}function Vl(ee){return ee}function Gs(ee,A,B,J){const se=Kn(A)/B[0],Se=or(A)/B[1];return J?Math.min(ee,Math.max(se,Se)):Math.min(ee,Math.min(se,Se))}function wl(ee,A,B){let J=Math.min(ee,A);return J*=Math.log(1+50*Math.max(0,ee/A-1))/50+1,B&&(J=Math.max(J,B),J/=Math.log(1+50*Math.max(0,B/ee-1))/50+1),fe(J,B/2,2*A)}function Ac(ee,A,B,J,se){return B=void 0===B||B,function(Se,Re,Ze,$e){if(void 0!==Se){const wt=J?Gs(ee,J,Ze,se):ee;return B&&$e?wl(Se,wt,A):fe(Se,A,wt)}}}function Ls(ee){if(void 0!==ee)return 0}function Ps(ee){if(void 0!==ee)return ee}function ki(ee){return Math.pow(ee,3)}function vs(ee){return 1-ki(1-ee)}function Kc(ee){return 3*ee*ee-2*ee*ee*ee}function kc(ee){return ee}function ka(ee,A){const B=A[0],J=A[1];return A[0]=ee[0]*B+ee[2]*J+ee[4],A[1]=ee[1]*B+ee[3]*J+ee[5],A}function Uo(ee,A,B,J,se,Se,Re,Ze){const $e=Math.sin(Se),wt=Math.cos(Se);return ee[0]=J*wt,ee[1]=se*$e,ee[2]=-J*$e,ee[3]=se*wt,ee[4]=Re*J*wt-Ze*J*$e+A,ee[5]=Re*se*$e+Ze*se*wt+B,ee}function Cc(ee,A){const B=function Gl(ee){return ee[0]*ee[3]-ee[1]*ee[2]}(A);oe(0!==B,"Transformation matrix cannot be inverted");const J=A[0],se=A[1],Se=A[2],Re=A[3],Ze=A[4],$e=A[5];return ee[0]=Re/B,ee[1]=-se/B,ee[2]=-Se/B,ee[3]=J/B,ee[4]=(Se*$e-Re*Ze)/B,ee[5]=-(J*$e-se*Ze)/B,ee}!function bl(){ds(kt),ds(Ht),function Cs(ee,A,B,J){ee.forEach(function(se){A.forEach(function(Se){ht(se,Se,B),ht(Se,se,J)})})}(Ht,kt,St,Tt)}(),new Array(6);const sl=[1e6,1e6,1e6,1e6,2,2];function Lo(ee,A,B,J,se,Se){Se=Se||[];let Re=0;for(let Ze=A;Ze<B;Ze+=J){const $e=ee[Ze],wt=ee[Ze+1];Se[Re++]=se[0]*$e+se[2]*wt+se[4],Se[Re++]=se[1]*$e+se[3]*wt+se[5]}return Se&&Se.length!=Re&&(Se.length=Re),Se}function ll(ee,A,B,J,se,Se,Re){Re=Re||[];const Ze=Math.cos(se),$e=Math.sin(se),wt=Se[0],bt=Se[1];let Gt=0;for(let rn=A;rn<B;rn+=J){const _n=ee[rn]-wt,Cn=ee[rn+1]-bt;Re[Gt++]=wt+_n*Ze-Cn*$e,Re[Gt++]=bt+_n*$e+Cn*Ze;for(let jn=rn+2;jn<rn+J;++jn)Re[Gt++]=ee[jn]}return Re&&Re.length!=Gt&&(Re.length=Gt),Re}const qi=[1,0,0,1,0,0],lo=class cl extends W{constructor(){super(),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=m((A,B,J)=>{if(!J)return this.getSimplifiedGeometry(B);const se=this.clone();return se.applyTransform(J),se.getSimplifiedGeometry(B)})}simplifyTransformed(A,B){return this.simplifyTransformedInternal(this.getRevision(),A,B)}clone(){return V()}closestPointXY(A,B,J,se){return V()}containsXY(A,B){const J=this.getClosestPoint([A,B]);return J[0]===A&&J[1]===B}getClosestPoint(A,B){return this.closestPointXY(A[0],A[1],B=B||[NaN,NaN],1/0),B}intersectsCoordinate(A){return this.containsXY(A[0],A[1])}computeExtent(A){return V()}getExtent(A){if(this.extentRevision_!=this.getRevision()){const B=this.computeExtent(this.extent_);(isNaN(B[0])||isNaN(B[1]))&&an(B),this.extentRevision_=this.getRevision()}return function Dr(ee,A){return A?(A[0]=ee[0],A[1]=ee[1],A[2]=ee[2],A[3]=ee[3],A):ee}(this.extent_,A)}rotate(A,B){V()}scale(A,B,J){V()}simplify(A){return this.getSimplifiedGeometry(A*A)}getSimplifiedGeometry(A){return V()}getType(){return V()}applyTransform(A){V()}intersectsExtent(A){return V()}translate(A,B){V()}transform(A,B){const J=Ia(A),se="tile-pixels"==J.getUnits()?function(Se,Re,Ze){const $e=J.getExtent(),wt=J.getWorldExtent(),bt=or(wt)/or($e);return Uo(qi,wt[0],wt[3],bt,-bt,0,0,0),Lo(Se,0,Se.length,Ze,qi,Re),Ao(J,B)(Se,Re,Ze)}:Ao(J,B);return this.applyTransform(se),this}};function Ui(ee){let A;return"XY"==ee?A=2:"XYZ"==ee||"XYM"==ee?A=3:"XYZM"==ee&&(A=4),A}const ul=class ys extends lo{constructor(){super(),this.layout="XY",this.stride=2}computeExtent(A){return sn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,A)}getCoordinates(){return V()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(A){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),A<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&A<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const B=this.getSimplifiedGeometryInternal(A);return B.getFlatCoordinates().length<this.flatCoordinates.length?B:(this.simplifiedGeometryMaxMinSquaredTolerance=A,this)}getSimplifiedGeometryInternal(A){return this}getStride(){return this.stride}setFlatCoordinates(A,B){this.stride=Ui(A),this.layout=A,this.flatCoordinates=B}setCoordinates(A,B){V()}setLayout(A,B,J){let se;if(A)se=Ui(A);else{for(let Se=0;Se<J;++Se){if(0===B.length)return this.layout="XY",void(this.stride=2);B=B[0]}se=B.length,A=function Di(ee){let A;return 2==ee?A="XY":3==ee?A="XYZ":4==ee&&(A="XYZM"),A}(se)}this.layout=A,this.stride=se}applyTransform(A){this.flatCoordinates&&(A(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(A,B){const J=this.getFlatCoordinates();if(J){const se=this.getStride();ll(J,0,J.length,se,A,B,J),this.changed()}}scale(A,B,J){void 0===B&&(B=A),J||(J=ir(this.getExtent()));const se=this.getFlatCoordinates();if(se){const Se=this.getStride();(function lc(ee,A,B,J,se,Se,Re,Ze){Ze=Ze||[];const $e=Re[0],wt=Re[1];let bt=0;for(let Gt=A;Gt<B;Gt+=J){const _n=ee[Gt+1]-wt;Ze[bt++]=$e+se*(ee[Gt]-$e),Ze[bt++]=wt+Se*_n;for(let Cn=Gt+2;Cn<Gt+J;++Cn)Ze[bt++]=ee[Cn]}Ze&&Ze.length!=bt&&(Ze.length=bt)})(se,0,se.length,Se,A,B,J,se),this.changed()}}translate(A,B){const J=this.getFlatCoordinates();if(J){const se=this.getStride();(function Ec(ee,A,B,J,se,Se,Re){Re=Re||[];let Ze=0;for(let $e=A;$e<B;$e+=J){Re[Ze++]=ee[$e]+se,Re[Ze++]=ee[$e+1]+Se;for(let wt=$e+2;wt<$e+J;++wt)Re[Ze++]=ee[wt]}Re&&Re.length!=Ze&&(Re.length=Ze)})(J,0,J.length,se,A,B,J),this.changed()}}};function Hl(ee,A,B,J,se,Se,Re){const Ze=ee[A],$e=ee[A+1],wt=ee[B]-Ze,bt=ee[B+1]-$e;let Gt;if(0===wt&&0===bt)Gt=A;else{const rn=((se-Ze)*wt+(Se-$e)*bt)/(wt*wt+bt*bt);if(rn>1)Gt=B;else{if(rn>0){for(let _n=0;_n<J;++_n)Re[_n]=_e(ee[A+_n],ee[B+_n],rn);return void(Re.length=J)}Gt=A}}for(let rn=0;rn<J;++rn)Re[rn]=ee[Gt+rn];Re.length=J}function cc(ee,A,B,J,se){let Se=ee[A],Re=ee[A+1];for(A+=J;A<B;A+=J){const Ze=ee[A],$e=ee[A+1],wt=ge(Se,Re,Ze,$e);wt>se&&(se=wt),Se=Ze,Re=$e}return se}function Go(ee,A,B,J,se,Se,Re,Ze,$e,wt,bt){if(A==B)return wt;let Gt,rn;if(0===se){if(rn=ge(Re,Ze,ee[A],ee[A+1]),rn<wt){for(Gt=0;Gt<J;++Gt)$e[Gt]=ee[A+Gt];return $e.length=J,rn}return wt}bt=bt||[NaN,NaN];let _n=A+J;for(;_n<B;)if(Hl(ee,_n-J,_n,J,Re,Ze,bt),rn=ge(Re,Ze,bt[0],bt[1]),rn<wt){for(wt=rn,Gt=0;Gt<J;++Gt)$e[Gt]=bt[Gt];$e.length=J,_n+=J}else _n+=J*Math.max((Math.sqrt(rn)-Math.sqrt(wt))/se|0,1);if(Se&&(Hl(ee,B-J,A,J,Re,Ze,bt),rn=ge(Re,Ze,bt[0],bt[1]),rn<wt)){for(wt=rn,Gt=0;Gt<J;++Gt)$e[Gt]=bt[Gt];$e.length=J}return wt}function Wl(ee,A,B,J){for(let se=0,Se=B.length;se<Se;++se){const Re=B[se];for(let Ze=0;Ze<J;++Ze)ee[A++]=Re[Ze]}return A}function Wi(ee,A,B,J,se,Se,Re){const Ze=(B-A)/J;if(Ze<3){for(;A<B;A+=J)Se[Re++]=ee[A],Se[Re++]=ee[A+1];return Re}const $e=new Array(Ze);$e[0]=1,$e[Ze-1]=1;const wt=[A,B-J];let bt=0;for(;wt.length>0;){const Gt=wt.pop(),rn=wt.pop();let _n=0;const Cn=ee[rn],jn=ee[rn+1],Yn=ee[Gt],er=ee[Gt+1];for(let rr=rn+J;rr<Gt;rr+=J){const Tr=ue(ee[rr],ee[rr+1],Cn,jn,Yn,er);Tr>_n&&(bt=rr,_n=Tr)}_n>se&&($e[(bt-A)/J]=1,rn+J<bt&&wt.push(rn,bt),bt+J<Gt&&wt.push(bt,Gt))}for(let Gt=0;Gt<Ze;++Gt)$e[Gt]&&(Se[Re++]=ee[A+Gt*J],Se[Re++]=ee[A+Gt*J+1]);return Re}function co(ee,A){return A*Math.round(ee/A)}function hl(ee,A,B,J,se,Se,Re){if(A==B)return Re;let wt,bt,Ze=co(ee[A],se),$e=co(ee[A+1],se);A+=J,Se[Re++]=Ze,Se[Re++]=$e;do{if(wt=co(ee[A],se),bt=co(ee[A+1],se),(A+=J)==B)return Se[Re++]=wt,Se[Re++]=bt,Re}while(wt==Ze&&bt==$e);for(;A<B;){const Gt=co(ee[A],se),rn=co(ee[A+1],se);if(A+=J,Gt==wt&&rn==bt)continue;const _n=wt-Ze,Cn=bt-$e,jn=Gt-Ze,Yn=rn-$e;_n*Yn==Cn*jn&&(_n<0&&jn<_n||_n==jn||_n>0&&jn>_n)&&(Cn<0&&Yn<Cn||Cn==Yn||Cn>0&&Yn>Cn)?(wt=Gt,bt=rn):(Se[Re++]=wt,Se[Re++]=bt,Ze=wt,$e=bt,wt=Gt,bt=rn)}return Se[Re++]=wt,Se[Re++]=bt,Re}function uo(ee,A,B,J,se,Se,Re,Ze){for(let $e=0,wt=B.length;$e<wt;++$e){const bt=B[$e];Re=hl(ee,A,bt,J,se,Se,Re),Ze.push(Re),A=bt}return Re}function Po(ee,A,B,J,se){se=void 0!==se?se:[];let Se=0;for(let Re=A;Re<B;Re+=J)se[Se++]=ee.slice(Re,Re+J);return se.length=Se,se}function ko(ee,A,B,J,se){se=void 0!==se?se:[];let Se=0;for(let Re=0,Ze=B.length;Re<Ze;++Re){const $e=B[Re];se[Se++]=Po(ee,A,$e,J,se[Se]),A=$e}return se.length=Se,se}function qo(ee,A,B,J,se){se=void 0!==se?se:[];let Se=0;for(let Re=0,Ze=B.length;Re<Ze;++Re){const $e=B[Re];se[Se++]=1===$e.length&&$e[0]===A?[]:ko(ee,A,$e,J,se[Se]),A=$e[$e.length-1]}return se.length=Se,se}function na(ee,A,B,J){let se=0,Se=ee[B-J],Re=ee[B-J+1];for(;A<B;A+=J){const Ze=ee[A],$e=ee[A+1];se+=Re*Ze-Se*$e,Se=Ze,Re=$e}return se/2}class fl extends ul{constructor(A,B){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===B||Array.isArray(A[0])?this.setCoordinates(A,B):this.setFlatCoordinates(B,A)}clone(){return new fl(this.flatCoordinates.slice(),this.layout)}closestPointXY(A,B,J,se){return se<yt(this.getExtent(),A,B)?se:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(cc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Go(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,A,B,J,se))}getArea(){return na(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Po(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(A){const B=[];return B.length=Wi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,A,B,0),new fl(B,"XY")}getType(){return"LinearRing"}intersectsExtent(A){return!1}setCoordinates(A,B){this.setLayout(B,A,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Wl(this.flatCoordinates,0,A,this.stride),this.changed()}}const Lc=fl;class Rs extends ul{constructor(A,B){super(),this.setCoordinates(A,B)}clone(){const A=new Rs(this.flatCoordinates.slice(),this.layout);return A.applyProperties(this),A}closestPointXY(A,B,J,se){const Se=this.flatCoordinates,Re=ge(A,B,Se[0],Se[1]);if(Re<se){const Ze=this.stride;for(let $e=0;$e<Ze;++$e)J[$e]=Se[$e];return J.length=Ze,Re}return se}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(A){return mn(this.flatCoordinates,A)}getType(){return"Point"}intersectsExtent(A){return Dt(A,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(A,B){this.setLayout(B,A,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function yo(ee,A,B,J){for(let se=0,Se=B.length;se<Se;++se)ee[A++]=B[se];return A}(this.flatCoordinates,0,A),this.changed()}}const Ds=Rs;function Cl(ee,A,B,J,se){return!Dn(se,function(Re){return!rs(ee,A,B,J,Re[0],Re[1])})}function rs(ee,A,B,J,se,Se){let Re=0,Ze=ee[B-J],$e=ee[B-J+1];for(;A<B;A+=J){const wt=ee[A],bt=ee[A+1];$e<=Se?bt>Se&&(wt-Ze)*(Se-$e)-(se-Ze)*(bt-$e)>0&&Re++:bt<=Se&&(wt-Ze)*(Se-$e)-(se-Ze)*(bt-$e)<0&&Re--,Ze=wt,$e=bt}return 0!==Re}function Br(ee,A,B,J,se,Se){if(0===B.length||!rs(ee,A,B[0],J,se,Se))return!1;for(let Re=1,Ze=B.length;Re<Ze;++Re)if(rs(ee,B[Re-1],B[Re],J,se,Se))return!1;return!0}function xs(ee,A,B,J,se,Se,Re){let Ze,$e,wt,bt,Gt,rn,_n;const Cn=se[Se+1],jn=[];for(let rr=0,Ar=B.length;rr<Ar;++rr){const Er=B[rr];for(bt=ee[Er-J],rn=ee[Er-J+1],Ze=A;Ze<Er;Ze+=J)Gt=ee[Ze],_n=ee[Ze+1],(Cn<=rn&&_n<=Cn||rn<=Cn&&Cn<=_n)&&(wt=(Cn-rn)/(_n-rn)*(Gt-bt)+bt,jn.push(wt)),bt=Gt,rn=_n}let Yn=NaN,er=-1/0;for(jn.sort(l),bt=jn[0],Ze=1,$e=jn.length;Ze<$e;++Ze){Gt=jn[Ze];const rr=Math.abs(Gt-bt);rr>er&&(wt=(bt+Gt)/2,Br(ee,A,B,J,wt,Cn)&&(Yn=wt,er=rr)),bt=Gt}return isNaN(Yn)&&(Yn=se[Se]),Re?(Re.push(Yn,Cn,er),Re):[Yn,Cn,er]}function Wo(ee,A,B,J,se){const Se=pn([1/0,1/0,-1/0,-1/0],ee,A,B,J);return!!tr(se,Se)&&(!!(Ct(se,Se)||Se[0]>=se[0]&&Se[2]<=se[2]||Se[1]>=se[1]&&Se[3]<=se[3])||function dl(ee,A,B,J,se){let Se;for(A+=J;A<B;A+=J)if(Se=se(ee.slice(A-J,A),ee.slice(A,A+J)),Se)return Se;return!1}(ee,A,B,J,function(Re,Ze){return function In(ee,A,B){let J=!1;const se=Ut(ee,A),Se=Ut(ee,B);if(se===ut.INTERSECTING||Se===ut.INTERSECTING)J=!0;else{const Re=ee[0],Ze=ee[1],$e=ee[2],wt=ee[3],rn=B[0],_n=B[1],Cn=(_n-A[1])/(rn-A[0]);let jn,Yn;Se&ut.ABOVE&&!(se&ut.ABOVE)&&(jn=rn-(_n-wt)/Cn,J=jn>=Re&&jn<=$e),!J&&Se&ut.RIGHT&&!(se&ut.RIGHT)&&(Yn=_n-(rn-$e)*Cn,J=Yn>=Ze&&Yn<=wt),!J&&Se&ut.BELOW&&!(se&ut.BELOW)&&(jn=rn-(_n-Ze)/Cn,J=jn>=Re&&jn<=$e),!J&&Se&ut.LEFT&&!(se&ut.LEFT)&&(Yn=_n-(rn-Re)*Cn,J=Yn>=Ze&&Yn<=wt)}return J}(se,Re,Ze)}))}function ho(ee,A,B,J,se){return!!(Wo(ee,A,B,J,se)||rs(ee,A,B,J,se[0],se[1])||rs(ee,A,B,J,se[0],se[3])||rs(ee,A,B,J,se[2],se[1])||rs(ee,A,B,J,se[2],se[3]))}function Ys(ee,A,B,J){for(;A<B-J;){for(let se=0;se<J;++se){const Se=ee[A+se];ee[A+se]=ee[B-J+se],ee[B-J+se]=Se}A+=J,B-=J}}function El(ee,A,B,J){let se=0,Se=ee[B-J],Re=ee[B-J+1];for(;A<B;A+=J){const Ze=ee[A],$e=ee[A+1];se+=(Ze-Se)*($e+Re),Se=Ze,Re=$e}return 0===se?void 0:se>0}function ja(ee,A,B,J,se){se=void 0!==se&&se;for(let Se=0,Re=B.length;Se<Re;++Se){const Ze=B[Se],$e=El(ee,A,Ze,J);(0===Se?se&&$e||!se&&!$e:se&&!$e||!se&&$e)&&Ys(ee,A,Ze,J),A=Ze}return A}class Ua extends ul{constructor(A,B,J){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==B&&J?(this.setFlatCoordinates(B,A),this.ends_=J):this.setCoordinates(A,B)}appendLinearRing(A){this.flatCoordinates?n(this.flatCoordinates,A.getFlatCoordinates()):this.flatCoordinates=A.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const A=new Ua(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return A.applyProperties(this),A}closestPointXY(A,B,J,se){return se<yt(this.getExtent(),A,B)?se:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function ql(ee,A,B,J,se){for(let Se=0,Re=B.length;Se<Re;++Se){const Ze=B[Se];se=cc(ee,A,Ze,J,se),A=Ze}return se}(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function qs(ee,A,B,J,se,Se,Re,Ze,$e,wt,bt){bt=bt||[NaN,NaN];for(let Gt=0,rn=B.length;Gt<rn;++Gt){const _n=B[Gt];wt=Go(ee,A,_n,J,se,Se,Re,Ze,$e,wt,bt),A=_n}return wt}(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,A,B,J,se))}containsXY(A,B){return Br(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,A,B)}getArea(){return function ns(ee,A,B,J){let se=0;for(let Se=0,Re=B.length;Se<Re;++Se){const Ze=B[Se];se+=na(ee,A,Ze,J),A=Ze}return se}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(A){let B;return void 0!==A?(B=this.getOrientedFlatCoordinates().slice(),ja(B,0,this.ends_,this.stride,A)):B=this.flatCoordinates,ko(B,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const A=ir(this.getExtent());this.flatInteriorPoint_=xs(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,A,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Ds(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(A){return A<0||this.ends_.length<=A?null:new Lc(this.flatCoordinates.slice(0===A?0:this.ends_[A-1],this.ends_[A]),this.layout)}getLinearRings(){const A=this.layout,B=this.flatCoordinates,J=this.ends_,se=[];let Se=0;for(let Re=0,Ze=J.length;Re<Ze;++Re){const $e=J[Re],wt=new Lc(B.slice(Se,$e),A);se.push(wt),Se=$e}return se}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const A=this.flatCoordinates;!function Zs(ee,A,B,J,se){se=void 0!==se&&se;for(let Se=0,Re=B.length;Se<Re;++Se){const Ze=B[Se],$e=El(ee,A,Ze,J);if(0===Se){if(se&&$e||!se&&!$e)return!1}else if(se&&!$e||!se&&$e)return!1;A=Ze}return!0}(A,0,this.ends_,this.stride)?(this.orientedFlatCoordinates_=A.slice(),this.orientedFlatCoordinates_.length=ja(this.orientedFlatCoordinates_,0,this.ends_,this.stride)):this.orientedFlatCoordinates_=A,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(A){const B=[],J=[];return B.length=uo(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(A),B,0,J),new Ua(B,"XY",J)}getType(){return"Polygon"}intersectsExtent(A){return function bs(ee,A,B,J,se){if(!ho(ee,A,B[0],J,se))return!1;if(1===B.length)return!0;for(let Se=1,Re=B.length;Se<Re;++Se)if(Cl(ee,B[Se-1],B[Se],J,se)&&!Wo(ee,B[Se-1],B[Se],J,se))return!1;return!0}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,A)}setCoordinates(A,B){this.setLayout(B,A,2),this.flatCoordinates||(this.flatCoordinates=[]);const J=function Ho(ee,A,B,J,se){se=se||[];let Se=0;for(let Re=0,Ze=B.length;Re<Ze;++Re){const $e=Wl(ee,A,B[Re],J);se[Se++]=$e,A=$e}return se.length=Se,se}(this.flatCoordinates,0,A,this.stride,this.ends_);this.flatCoordinates.length=0===J.length?0:J[J.length-1],this.changed()}}const Zl=Ua;function xo(ee){if(fr(ee))throw new Error("Cannot create polygon from empty extent");const A=ee[0],B=ee[1],J=ee[2],se=ee[3],Se=[A,B,A,se,J,se,J,B,A,B];return new Ua(Se,"XY",[Se.length])}function Ks(ee,A){setTimeout(function(){ee(A)},0)}function Xr(ee,A,B,J,se){const Se=Math.cos(-se);let Re=Math.sin(-se),Ze=ee[0]*Se-ee[1]*Re,$e=ee[1]*Se+ee[0]*Re;return Ze+=(A[0]/2-B[0])*J,$e+=(B[1]-A[1]/2)*J,Re=-Re,[Ze*Se-$e*Re,$e*Se+Ze*Re]}const ti=class Ts extends W{constructor(A){super(),A=Object.assign({},A),this.hints_=[0,0],this.animations_=[],this.projection_=Eo(A.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.nextCenter_=null,this.cancelAnchor_=void 0,A.projection&&li(),A.center&&(A.center=Is(A.center)),A.extent&&(A.extent=jo(A.extent)),this.applyOptions_(A)}applyOptions_(A){const B=Object.assign({},A);for(const Ze in Ce)delete B[Ze];this.setProperties(B,!0);const J=function As(ee){let A,B,J,Re=void 0!==ee.minZoom?ee.minZoom:0,Ze=void 0!==ee.maxZoom?ee.maxZoom:28;const $e=void 0!==ee.zoomFactor?ee.zoomFactor:2,wt=void 0!==ee.multiWorld&&ee.multiWorld,bt=void 0===ee.smoothResolutionConstraint||ee.smoothResolutionConstraint,Gt=void 0!==ee.showFullExtent&&ee.showFullExtent,rn=Eo(ee.projection,"EPSG:3857"),_n=rn.getExtent();let Cn=ee.constrainOnlyCenter,jn=ee.extent;if(!wt&&!jn&&rn.isGlobal()&&(Cn=!1,jn=_n),void 0!==ee.resolutions){const Yn=ee.resolutions;B=Yn[Re],J=void 0!==Yn[Ze]?Yn[Ze]:Yn[Yn.length-1],A=ee.constrainResolution?function Tl(ee,A,B,J){return A=void 0===A||A,function(se,Se,Re,Ze){if(void 0!==se){const $e=ee[0],wt=ee[ee.length-1],bt=B?Gs($e,B,Re,J):$e;if(Ze)return A?wl(se,bt,wt):fe(se,wt,bt);const Gt=Math.min(bt,se),rn=Math.floor(i(ee,Gt,Se));return ee[rn]>bt&&rn<ee.length-1?ee[rn+1]:ee[rn]}}}(Yn,bt,!Cn&&jn,Gt):Ac(B,J,bt,!Cn&&jn,Gt)}else{const er=(_n?Math.max(Kn(_n),or(_n)):360*Me.degrees/rn.getMetersPerUnit())/Ne/Math.pow(2,0),rr=er/Math.pow(2,28);B=ee.maxResolution,void 0!==B?Re=0:B=er/Math.pow($e,Re),J=ee.minResolution,void 0===J&&(J=void 0!==ee.maxZoom?void 0!==ee.maxResolution?B/Math.pow($e,Ze):er/Math.pow($e,Ze):rr),Ze=Re+Math.floor(Math.log(B/J)/Math.log($e)),J=B/Math.pow($e,Ze-Re),A=ee.constrainResolution?function ms(ee,A,B,J,se,Se){return J=void 0===J||J,B=void 0!==B?B:0,function(Re,Ze,$e,wt){if(void 0!==Re){const bt=se?Gs(A,se,$e,Se):A;if(wt)return J?wl(Re,bt,B):fe(Re,B,bt);const Gt=1e-9,rn=Math.ceil(Math.log(A/bt)/Math.log(ee)-Gt),_n=-Ze*(.5-Gt)+.5,Cn=Math.min(bt,Re),jn=Math.floor(Math.log(A/Cn)/Math.log(ee)+_n),Yn=Math.max(rn,jn);return fe(A/Math.pow(ee,Yn),B,bt)}}}($e,B,J,bt,!Cn&&jn,Gt):Ac(B,J,bt,!Cn&&jn,Gt)}return{constraint:A,maxResolution:B,minResolution:J,minZoom:Re,zoomFactor:$e}}(A);this.maxResolution_=J.maxResolution,this.minResolution_=J.minResolution,this.zoomFactor_=J.zoomFactor,this.resolutions_=A.resolutions,this.padding_=A.padding,this.minZoom_=J.minZoom;const se=function Xl(ee){if(void 0!==ee.extent)return gs(ee.extent,ee.constrainOnlyCenter,void 0===ee.smoothExtentConstraint||ee.smoothExtentConstraint);const A=Eo(ee.projection,"EPSG:3857");if(!0!==ee.multiWorld&&A.isGlobal()){const B=A.getExtent().slice();return B[0]=-1/0,B[2]=1/0,gs(B,!1,!1)}return Vl}(A),Se=J.constraint,Re=function la(ee){if(void 0===ee.enableRotation||ee.enableRotation){const B=ee.constrainRotation;return void 0===B||!0===B?function ol(ee){const A=void 0===ee?xe(5):ee;return function(B,J){return J||void 0===B?B:Math.abs(B)<=A?0:B}}():!1===B?Ps:"number"==typeof B?function Hs(ee){const A=2*Math.PI/ee;return function(B,J){return J?B:void 0!==B?B=Math.floor(B/A+.5)*A:void 0}}(B):Ps}return Ls}(A);this.constraints_={center:se,resolution:Se,rotation:Re},this.setRotation(void 0!==A.rotation?A.rotation:0),this.setCenterInternal(void 0!==A.center?A.center:null),void 0!==A.resolution?this.setResolution(A.resolution):void 0!==A.zoom&&this.setZoom(A.zoom)}get padding(){return this.padding_}set padding(A){let B=this.padding_;this.padding_=A;const J=this.getCenterInternal();if(J){const se=A||[0,0,0,0];B=B||[0,0,0,0];const Se=this.getResolution();this.setCenterInternal([J[0]+Se/2*(se[3]-B[3]+B[1]-se[1]),J[1]-Se/2*(se[0]-B[0]+B[2]-se[2])])}}getUpdatedOptions_(A){const B=this.getProperties();return void 0!==B.resolution?B.resolution=this.getResolution():B.zoom=this.getZoom(),B.center=this.getCenterInternal(),B.rotation=this.getRotation(),Object.assign({},B,A)}animate(A){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const B=new Array(arguments.length);for(let J=0;J<B.length;++J){let se=arguments[J];se.center&&(se=Object.assign({},se),se.center=Is(se.center,this.getProjection())),se.anchor&&(se=Object.assign({},se),se.anchor=Is(se.anchor,this.getProjection())),B[J]=se}this.animateInternal.apply(this,B)}animateInternal(A){let J,B=arguments.length;B>1&&"function"==typeof arguments[B-1]&&(J=arguments[B-1],--B);let se=0;for(;se<B&&!this.isDef();++se){const bt=arguments[se];bt.center&&this.setCenterInternal(bt.center),void 0!==bt.zoom?this.setZoom(bt.zoom):bt.resolution&&this.setResolution(bt.resolution),void 0!==bt.rotation&&this.setRotation(bt.rotation)}if(se===B)return void(J&&Ks(J,!0));let Se=Date.now(),Re=this.targetCenter_.slice(),Ze=this.targetResolution_,$e=this.targetRotation_;const wt=[];for(;se<B;++se){const bt=arguments[se],Gt={start:Se,complete:!1,anchor:bt.anchor,duration:void 0!==bt.duration?bt.duration:1e3,easing:bt.easing||Kc,callback:J};if(bt.center&&(Gt.sourceCenter=Re,Gt.targetCenter=bt.center.slice(),Re=Gt.targetCenter),void 0!==bt.zoom?(Gt.sourceResolution=Ze,Gt.targetResolution=this.getResolutionForZoom(bt.zoom),Ze=Gt.targetResolution):bt.resolution&&(Gt.sourceResolution=Ze,Gt.targetResolution=bt.resolution,Ze=Gt.targetResolution),void 0!==bt.rotation){Gt.sourceRotation=$e;const rn=ye(bt.rotation-$e+Math.PI,2*Math.PI)-Math.PI;Gt.targetRotation=$e+rn,$e=Gt.targetRotation}(ee=Gt).sourceCenter&&ee.targetCenter&&!dn(ee.sourceCenter,ee.targetCenter)||ee.sourceResolution!==ee.targetResolution||ee.sourceRotation!==ee.targetRotation?Se+=Gt.duration:Gt.complete=!0,wt.push(Gt)}var ee;this.animations_.push(wt),this.setHint(0,1),this.updateAnimations_()}getAnimating(){return this.hints_[0]>0}getInteracting(){return this.hints_[1]>0}cancelAnimations(){let A;this.setHint(0,-this.hints_[0]);for(let B=0,J=this.animations_.length;B<J;++B){const se=this.animations_[B];if(se[0].callback&&Ks(se[0].callback,!1),!A)for(let Se=0,Re=se.length;Se<Re;++Se){const Ze=se[Se];if(!Ze.complete){A=Ze.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=A,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const A=Date.now();let B=!1;for(let J=this.animations_.length-1;J>=0;--J){const se=this.animations_[J];let Se=!0;for(let Re=0,Ze=se.length;Re<Ze;++Re){const $e=se[Re];if($e.complete)continue;let bt=$e.duration>0?(A-$e.start)/$e.duration:1;bt>=1?($e.complete=!0,bt=1):Se=!1;const Gt=$e.easing(bt);if($e.sourceCenter){const rn=$e.sourceCenter[0],_n=$e.sourceCenter[1],Cn=$e.targetCenter[0],jn=$e.targetCenter[1];this.nextCenter_=$e.targetCenter,this.targetCenter_=[rn+Gt*(Cn-rn),_n+Gt*(jn-_n)]}if($e.sourceResolution&&$e.targetResolution){const rn=1===Gt?$e.targetResolution:$e.sourceResolution+Gt*($e.targetResolution-$e.sourceResolution);if($e.anchor){const _n=this.getViewportSize_(this.getRotation()),Cn=this.constraints_.resolution(rn,0,_n,!0);this.targetCenter_=this.calculateCenterZoom(Cn,$e.anchor)}this.nextResolution_=$e.targetResolution,this.targetResolution_=rn,this.applyTargetState_(!0)}if(void 0!==$e.sourceRotation&&void 0!==$e.targetRotation){const rn=1===Gt?ye($e.targetRotation+Math.PI,2*Math.PI)-Math.PI:$e.sourceRotation+Gt*($e.targetRotation-$e.sourceRotation);if($e.anchor){const _n=this.constraints_.rotation(rn,!0);this.targetCenter_=this.calculateCenterRotate(_n,$e.anchor)}this.nextRotation_=$e.targetRotation,this.targetRotation_=rn}if(this.applyTargetState_(!0),B=!0,!$e.complete)break}if(Se){this.animations_[J]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const Re=se[0].callback;Re&&Ks(Re,!0)}}this.animations_=this.animations_.filter(Boolean),B&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(A,B){let J;const se=this.getCenterInternal();return void 0!==se&&(J=[se[0]-B[0],se[1]-B[1]],xn(J,A-this.getRotation()),function Tn(ee,A){ee[0]+=+A[0],ee[1]+=+A[1]}(J,B)),J}calculateCenterZoom(A,B){let J;const se=this.getCenterInternal(),Se=this.getResolution();return void 0!==se&&void 0!==Se&&(J=[B[0]-A*(B[0]-se[0])/Se,B[1]-A*(B[1]-se[1])/Se]),J}getViewportSize_(A){const B=this.viewportSize_;if(A){const J=B[0],se=B[1];return[Math.abs(J*Math.cos(A))+Math.abs(se*Math.sin(A)),Math.abs(J*Math.sin(A))+Math.abs(se*Math.cos(A))]}return B}setViewportSize(A){this.viewportSize_=Array.isArray(A)?A.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const A=this.getCenterInternal();return A&&Vs(A,this.getProjection())}getCenterInternal(){return this.get(Ce.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(A){return void 0!==A?(A[0]=this.hints_[0],A[1]=this.hints_[1],A):this.hints_.slice()}calculateExtent(A){return ac(this.calculateExtentInternal(A),this.getProjection())}calculateExtentInternal(A){A=A||this.getViewportSizeMinusPadding_();const B=this.getCenterInternal();oe(B,"The view center is not defined");const J=this.getResolution();oe(void 0!==J,"The view resolution is not defined");const se=this.getRotation();return oe(void 0!==se,"The view rotation is not defined"),lr(B,J,se,A)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(A){this.applyOptions_(this.getUpdatedOptions_({maxZoom:A}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(A){this.applyOptions_(this.getUpdatedOptions_({minZoom:A}))}setConstrainResolution(A){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:A}))}getProjection(){return this.projection_}getResolution(){return this.get(Ce.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(A,B){return this.getResolutionForExtentInternal(jo(A,this.getProjection()),B)}getResolutionForExtentInternal(A,B){B=B||this.getViewportSizeMinusPadding_();const J=Kn(A)/B[0],se=or(A)/B[1];return Math.max(J,se)}getResolutionForValueFunction(A){A=A||2;const B=this.getConstrainedResolution(this.maxResolution_),se=Math.log(B/this.minResolution_)/Math.log(A);return function(Se){return B/Math.pow(A,Se*se)}}getRotation(){return this.get(Ce.ROTATION)}getValueForResolutionFunction(A){const B=Math.log(A||2),J=this.getConstrainedResolution(this.maxResolution_),Se=Math.log(J/this.minResolution_)/B;return function(Re){return Math.log(J/Re)/B/Se}}getViewportSizeMinusPadding_(A){let B=this.getViewportSize_(A);const J=this.padding_;return J&&(B=[B[0]-J[1]-J[3],B[1]-J[0]-J[2]]),B}getState(){const A=this.getProjection(),B=this.getResolution(),J=this.getRotation();let se=this.getCenterInternal();const Se=this.padding_;if(Se){const Re=this.getViewportSizeMinusPadding_();se=Xr(se,this.getViewportSize_(),[Re[0]/2+Se[3],Re[1]/2+Se[0]],B,J)}return{center:se.slice(0),projection:void 0!==A?A:null,resolution:B,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:J,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let A;const B=this.getResolution();return void 0!==B&&(A=this.getZoomForResolution(B)),A}getZoomForResolution(A){let J,se,B=this.minZoom_||0;if(this.resolutions_){const Se=i(this.resolutions_,A,1);B=Se,J=this.resolutions_[Se],se=Se==this.resolutions_.length-1?2:J/this.resolutions_[Se+1]}else J=this.maxResolution_,se=this.zoomFactor_;return B+Math.log(J/A)/Math.log(se)}getResolutionForZoom(A){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const B=fe(Math.floor(A),0,this.resolutions_.length-2);return this.resolutions_[B]/Math.pow(this.resolutions_[B]/this.resolutions_[B+1],fe(A-B,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,A-this.minZoom_)}fit(A,B){let J;if(oe(Array.isArray(A)||"function"==typeof A.getSimplifiedGeometry,"Invalid extent or geometry provided as `geometry`"),Array.isArray(A))oe(!fr(A),"Cannot fit empty extent provided as `geometry`"),J=xo(jo(A,this.getProjection()));else if("Circle"===A.getType()){const se=jo(A.getExtent(),this.getProjection());J=xo(se),J.rotate(this.getRotation(),ir(se))}else{const se=Ul();J=se?A.clone().transform(se,this.getProjection()):A}this.fitInternal(J,B)}rotatedExtentForGeometry(A){const B=this.getRotation(),J=Math.cos(B),se=Math.sin(-B),Se=A.getFlatCoordinates(),Re=A.getStride();let Ze=1/0,$e=1/0,wt=-1/0,bt=-1/0;for(let Gt=0,rn=Se.length;Gt<rn;Gt+=Re){const _n=Se[Gt]*J-Se[Gt+1]*se,Cn=Se[Gt]*se+Se[Gt+1]*J;Ze=Math.min(Ze,_n),$e=Math.min($e,Cn),wt=Math.max(wt,_n),bt=Math.max(bt,Cn)}return[Ze,$e,wt,bt]}fitInternal(A,B){let J=(B=B||{}).size;J||(J=this.getViewportSizeMinusPadding_());const se=void 0!==B.padding?B.padding:[0,0,0,0],Se=void 0!==B.nearest&&B.nearest;let Re;Re=void 0!==B.minResolution?B.minResolution:void 0!==B.maxZoom?this.getResolutionForZoom(B.maxZoom):0;const Ze=this.rotatedExtentForGeometry(A);let $e=this.getResolutionForExtentInternal(Ze,[J[0]-se[1]-se[3],J[1]-se[0]-se[2]]);$e=isNaN($e)?Re:Math.max($e,Re),$e=this.getConstrainedResolution($e,Se?0:1);const wt=this.getRotation(),bt=Math.sin(wt),Gt=Math.cos(wt),rn=ir(Ze);rn[0]+=(se[1]-se[3])/2*$e,rn[1]+=(se[0]-se[2])/2*$e;const jn=this.getConstrainedCenter([rn[0]*Gt-rn[1]*bt,rn[1]*Gt+rn[0]*bt],$e),Yn=B.callback?B.callback:d;void 0!==B.duration?this.animateInternal({resolution:$e,center:jn,duration:B.duration,easing:B.easing},Yn):(this.targetResolution_=$e,this.targetCenter_=jn,this.applyTargetState_(!1,!0),Ks(Yn,!0))}centerOn(A,B,J){this.centerOnInternal(Is(A,this.getProjection()),B,J)}centerOnInternal(A,B,J){this.setCenterInternal(Xr(A,B,J,this.getResolution(),this.getRotation()))}calculateCenterShift(A,B,J,se){let Se;const Re=this.padding_;if(Re&&A){const Ze=this.getViewportSizeMinusPadding_(-J),$e=Xr(A,se,[Ze[0]/2+Re[3],Ze[1]/2+Re[0]],B,J);Se=[A[0]-$e[0],A[1]-$e[1]]}return Se}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(A){const B=Vs(this.targetCenter_,this.getProjection());this.setCenter([B[0]+A[0],B[1]+A[1]])}adjustCenterInternal(A){const B=this.targetCenter_;this.setCenterInternal([B[0]+A[0],B[1]+A[1]])}adjustResolution(A,B){B=B&&Is(B,this.getProjection()),this.adjustResolutionInternal(A,B)}adjustResolutionInternal(A,B){const J=this.getAnimating()||this.getInteracting(),se=this.getViewportSize_(this.getRotation()),Se=this.constraints_.resolution(this.targetResolution_*A,0,se,J);B&&(this.targetCenter_=this.calculateCenterZoom(Se,B)),this.targetResolution_*=A,this.applyTargetState_()}adjustZoom(A,B){this.adjustResolution(Math.pow(this.zoomFactor_,-A),B)}adjustRotation(A,B){B&&(B=Is(B,this.getProjection())),this.adjustRotationInternal(A,B)}adjustRotationInternal(A,B){const J=this.getAnimating()||this.getInteracting(),se=this.constraints_.rotation(this.targetRotation_+A,J);B&&(this.targetCenter_=this.calculateCenterRotate(se,B)),this.targetRotation_+=A,this.applyTargetState_()}setCenter(A){this.setCenterInternal(A&&Is(A,this.getProjection()))}setCenterInternal(A){this.targetCenter_=A,this.applyTargetState_()}setHint(A,B){return this.hints_[A]+=B,this.changed(),this.hints_[A]}setResolution(A){this.targetResolution_=A,this.applyTargetState_()}setRotation(A){this.targetRotation_=A,this.applyTargetState_()}setZoom(A){this.setResolution(this.getResolutionForZoom(A))}applyTargetState_(A,B){const J=this.getAnimating()||this.getInteracting()||B,se=this.constraints_.rotation(this.targetRotation_,J),Se=this.getViewportSize_(se),Re=this.constraints_.resolution(this.targetResolution_,0,Se,J),Ze=this.constraints_.center(this.targetCenter_,Re,Se,J,this.calculateCenterShift(this.targetCenter_,Re,se,Se));this.get(Ce.ROTATION)!==se&&this.set(Ce.ROTATION,se),this.get(Ce.RESOLUTION)!==Re&&(this.set(Ce.RESOLUTION,Re),this.set("zoom",this.getZoom(),!0)),(!Ze||!this.get(Ce.CENTER)||!dn(this.get(Ce.CENTER),Ze))&&this.set(Ce.CENTER,Ze),this.getAnimating()&&!A&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(A,B,J){A=void 0!==A?A:200;const se=B||0,Se=this.constraints_.rotation(this.targetRotation_),Re=this.getViewportSize_(Se),Ze=this.constraints_.resolution(this.targetResolution_,se,Re),$e=this.constraints_.center(this.targetCenter_,Ze,Re,!1,this.calculateCenterShift(this.targetCenter_,Ze,Se,Re));if(0===A&&!this.cancelAnchor_)return this.targetResolution_=Ze,this.targetRotation_=Se,this.targetCenter_=$e,void this.applyTargetState_();J=J||(0===A?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==Ze||this.getRotation()!==Se||!this.getCenterInternal()||!dn(this.getCenterInternal(),$e))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:Se,center:$e,resolution:Ze,duration:A,easing:vs,anchor:J}))}beginInteraction(){this.resolveConstraints(0),this.setHint(1,1)}endInteraction(A,B,J){J=J&&Is(J,this.getProjection()),this.endInteractionInternal(A,B,J)}endInteractionInternal(A,B,J){this.getInteracting()&&(this.setHint(1,-1),this.resolveConstraints(A,B,J))}getConstrainedCenter(A,B){const J=this.getViewportSize_(this.getRotation());return this.constraints_.center(A,B||this.getResolution(),J)}getConstrainedZoom(A,B){const J=this.getResolutionForZoom(A);return this.getZoomForResolution(this.getConstrainedResolution(J,B))}getConstrainedResolution(A,B){B=B||0;const J=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(A,B,J)}};function is(ee,A){if(!ee.visible)return!1;const B=A.resolution;if(B<ee.minResolution||B>=ee.maxResolution)return!1;const J=A.zoom;return J>ee.minZoom&&J<=ee.maxZoom}const as=class Yo extends me{constructor(A){const B=Object.assign({},A);delete B.source,super(B),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,A.render&&(this.render=A.render),A.map&&this.setMap(A.map),this.addChangeListener("source",this.handleSourcePropertyChange_),this.setSource(A.source?A.source:null)}getLayersArray(A){return(A=A||[]).push(this),A}getLayerStatesArray(A){return(A=A||[]).push(this.getLayerState()),A}getSource(){return this.get("source")||null}getRenderSource(){return this.getSource()}getSourceState(){const A=this.getSource();return A?A.getState():"undefined"}handleSourceChange_(){this.changed(),!this.sourceReady_&&"ready"===this.getSource().getState()&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(P(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const A=this.getSource();A&&(this.sourceChangeKey_=w(A,"change",this.handleSourceChange_,this),"ready"===A.getState()&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(A){return this.renderer_?this.renderer_.getFeatures(A):Promise.resolve([])}getData(A){return this.renderer_&&this.rendered?this.renderer_.getData(A):null}isVisible(A){let B;const J=this.getMapInternal();let se;!A&&J&&(A=J.getView()),B=A instanceof ti?{viewState:A.getState(),extent:A.calculateExtent()}:A,!B.layerStatesArray&&J&&(B.layerStatesArray=J.getLayerGroup().getLayerStatesArray()),se=B.layerStatesArray?B.layerStatesArray.find(Re=>Re.layer===this):this.getLayerState();const Se=this.getExtent();return is(se,B.viewState)&&(!Se||tr(Se,B.extent))}getAttributions(A){if(!this.isVisible(A))return[];let B;const J=this.getSource();if(J&&(B=J.getAttributions()),!B)return[];let Se=B(A instanceof ti?A.getViewStateAndExtent():A);return Array.isArray(Se)||(Se=[Se]),Se}render(A,B){const J=this.getRenderer();return J.prepareFrame(A)?(this.rendered=!0,J.renderFrame(A,B)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(A,B){}renderDeferred(A){const B=this.getRenderer();B&&B.renderDeferred(A)}setMapInternal(A){A||this.unrender(),this.set("map",A)}getMapInternal(){return this.get("map")}setMap(A){this.mapPrecomposeKey_&&(P(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),A||this.changed(),this.mapRenderKey_&&(P(this.mapRenderKey_),this.mapRenderKey_=null),A&&(this.mapPrecomposeKey_=w(A,"precompose",function(B){const se=B.frameState.layerStatesArray,Se=this.getLayerState(!1);oe(!se.some(function(Re){return Re.layer===Se.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),se.push(Se)},this),this.mapRenderKey_=w(this,"change",A.render,A),this.changed())}setSource(A){this.set("source",A)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};var La=Aa(1414);const gi_IDLE=0,gi_LOADING=1,gi_LOADED=2,gi_ERROR=3;function eu(ee){return ee[0]>0&&ee[1]>0}function wi(ee,A){return Array.isArray(ee)?ee:(void 0===A?A=[ee,ee]:(A[0]=ee,A[1]=ee),A)}class ra{constructor(A){this.opacity_=A.opacity,this.rotateWithView_=A.rotateWithView,this.rotation_=A.rotation,this.scale_=A.scale,this.scaleArray_=wi(A.scale),this.displacement_=A.displacement,this.declutterMode_=A.declutterMode}clone(){const A=this.getScale();return new ra({opacity:this.getOpacity(),scale:Array.isArray(A)?A.slice():A,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return V()}getImage(A){return V()}getHitDetectionImage(){return V()}getPixelRatio(A){return 1}getImageState(){return V()}getImageSize(){return V()}getOrigin(){return V()}getSize(){return V()}setDisplacement(A){this.displacement_=A}setOpacity(A){this.opacity_=A}setRotateWithView(A){this.rotateWithView_=A}setRotation(A){this.rotation_=A}setScale(A){this.scale_=A,this.scaleArray_=wi(A)}listenImageChange(A){V()}load(){V()}unlistenImageChange(A){V()}ready(){return Promise.resolve()}}const Mo=ra,os={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var Js={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"],whitepoint:{2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}}};Js.max=Js.whitepoint[2].D65,Js.rgb=function(ee,A){var Se,Re,Ze,B=ee[0]/(A=A||Js.whitepoint[2].E)[0],J=ee[1]/A[1],se=ee[2]/A[2];return Re=-.96924363628087*B+1.87596750150772*J+.041555057407175*se,Ze=.055630079696993*B+-.20397695888897*J+1.056971514242878*se,Se=(Se=3.240969941904521*B+-1.537383177570093*J+-.498610760293*se)>.0031308?1.055*Math.pow(Se,1/2.4)-.055:Se*=12.92,Re=Re>.0031308?1.055*Math.pow(Re,1/2.4)-.055:Re*=12.92,Ze=Ze>.0031308?1.055*Math.pow(Ze,1/2.4)-.055:Ze*=12.92,[255*(Se=Math.min(Math.max(0,Se),1)),255*(Re=Math.min(Math.max(0,Re),1)),255*(Ze=Math.min(Math.max(0,Ze),1))]},os.xyz=function(ee,A){var B=ee[0]/255,J=ee[1]/255,se=ee[2]/255;return[(.41239079926595*(B=B>.04045?Math.pow((B+.055)/1.055,2.4):B/12.92)+.35758433938387*(J=J>.04045?Math.pow((J+.055)/1.055,2.4):J/12.92)+.18048078840183*(se=se>.04045?Math.pow((se+.055)/1.055,2.4):se/12.92))*(A=A||Js.whitepoint[2].E)[0],(.21263900587151*B+.71516867876775*J+.072192315360733*se)*A[1],(.019330818715591*B+.11919477979462*J+.95053215224966*se)*A[2]]};const rt=Js,st={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(ee,A,B){var J,se,Se,wt,Gt,rn,_n;return 0===(Se=ee[0])?[0,0,0]:(J=ee[1]/(13*Se)+4*(Gt=rt.whitepoint[B=B||2][A=A||"D65"][0])/(Gt+15*(rn=rt.whitepoint[B][A][1])+3*(_n=rt.whitepoint[B][A][2]))||0,se=ee[2]/(13*Se)+9*rn/(Gt+15*rn+3*_n)||0,[9*(wt=Se>8?rn*Math.pow((Se+16)/116,3):rn*Se*.0011070564598794539)*J/(4*se)||0,wt,wt*(12-3*J-20*se)/(4*se)||0])}};rt.luv=function(ee,A,B){var J,se,Se,$e,wt,bt,Gt,rn,_n,Cn,jn;Cn=4*(Gt=rt.whitepoint[B=B||2][A=A||"D65"][0])/(Gt+15*(rn=rt.whitepoint[B][A][1])+3*(_n=rt.whitepoint[B][A][2])),jn=9*rn/(Gt+15*rn+3*_n),J=4*($e=ee[0])/($e+15*(wt=ee[1])+3*(bt=ee[2]))||0,se=9*wt/($e+15*wt+3*bt)||0;var rr=wt/rn;return[Se=rr<=.008856451679035631?903.2962962962961*rr:116*Math.pow(rr,1/3)-16,13*Se*(J-Cn),13*Se*(se-jn)]};var pt={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(ee){var Re,B=ee[1];return Re=ee[2]/360*2*Math.PI,[ee[0],B*Math.cos(Re),B*Math.sin(Re)]},xyz:function(ee){return st.xyz(pt.luv(ee))}};const j=pt;st.lchuv=function(ee){var A=ee[0],B=ee[1],J=ee[2],se=Math.sqrt(B*B+J*J),Re=360*Math.atan2(J,B)/2/Math.PI;return Re<0&&(Re+=360),[A,se,Re]},rt.lchuv=function(ee){return st.lchuv(rt.luv(ee))};const Y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},q=function H(ee){var A,se,B=[],J=1;if("number"==typeof ee)return{space:"rgb",values:[ee>>>16,(65280&ee)>>>8,255&ee],alpha:1};if("number"==typeof ee)return{space:"rgb",values:[ee>>>16,(65280&ee)>>>8,255&ee],alpha:1};if(ee=String(ee).toLowerCase(),Y[ee])B=Y[ee].slice(),se="rgb";else if("transparent"===ee)J=0,se="rgb",B=[0,0,0];else if("#"===ee[0]){var Se=ee.slice(1),Re=Se.length;J=1,Re<=4?(B=[parseInt(Se[0]+Se[0],16),parseInt(Se[1]+Se[1],16),parseInt(Se[2]+Se[2],16)],4===Re&&(J=parseInt(Se[3]+Se[3],16)/255)):(B=[parseInt(Se[0]+Se[1],16),parseInt(Se[2]+Se[3],16),parseInt(Se[4]+Se[5],16)],8===Re&&(J=parseInt(Se[6]+Se[7],16)/255)),B[0]||(B[0]=0),B[1]||(B[1]=0),B[2]||(B[2]=0),se="rgb"}else if(A=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(ee)){var wt="cmyk"===(se=A[1].replace(/a$/,""))?4:"gray"===se?1:3;B=A[2].trim().split(/\s*[,\/]\s*|\s+/),"color"===se&&(se=B.shift()),J=(B=B.map(function(bt,Gt){if("%"===bt[bt.length-1])return bt=parseFloat(bt)/100,3===Gt?bt:"rgb"===se?255*bt:"h"===se[0]||"l"===se[0]&&!Gt?100*bt:"lab"===se?125*bt:"lch"===se?Gt<2?150*bt:360*bt:"o"!==se[0]||Gt?"oklab"===se?.4*bt:"oklch"===se?Gt<2?.4*bt:360*bt:bt:bt;if("h"===se[Gt]||2===Gt&&"h"===se[se.length-1]){if(void 0!==I[bt])return I[bt];if(bt.endsWith("deg"))return parseFloat(bt);if(bt.endsWith("turn"))return 360*parseFloat(bt);if(bt.endsWith("grad"))return 360*parseFloat(bt)/400;if(bt.endsWith("rad"))return 180*parseFloat(bt)/Math.PI}return"none"===bt?0:parseFloat(bt)})).length>wt?B.pop():1}else/[0-9](?:\s|\/|,)/.test(ee)&&(B=ee.match(/([0-9]+)/g).map(function(bt){return parseFloat(bt)}),se=ee.match(/([a-z])/gi)?.join("")?.toLowerCase()||"rgb");return{space:se,values:B,alpha:J}};var I={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};const te={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(ee){var se,Se,Re,Ze,$e,A=ee[0]/360,B=ee[1]/100,J=ee[2]/100,wt=0;if(0===B)return[$e=255*J,$e,$e];for(se=2*J-(Se=J<.5?J*(1+B):J+B-J*B),Ze=[0,0,0];wt<3;)(Re=A+1/3*-(wt-1))<0?Re++:Re>1&&Re--,Ze[wt++]=255*($e=6*Re<1?se+6*(Se-se)*Re:2*Re<1?Se:3*Re<2?se+(Se-se)*(2/3-Re)*6:se);return Ze}};os.hsl=function(ee){var Ze,wt,A=ee[0]/255,B=ee[1]/255,J=ee[2]/255,se=Math.min(A,B,J),Se=Math.max(A,B,J),Re=Se-se;return Se===se?Ze=0:A===Se?Ze=(B-J)/Re:B===Se?Ze=2+(J-A)/Re:J===Se&&(Ze=4+(A-B)/Re),(Ze=Math.min(60*Ze,360))<0&&(Ze+=360),wt=(se+Se)/2,[Ze,100*(Se===se?0:wt<=.5?Re/(Se+se):Re/(2-Se-se)),100*wt]};const ke=1024,Fe={};let Ve=0;function Xe(ee){if(4===ee.length)return ee;const A=ee.slice();return A[3]=1,A}function Je(ee){const A=rt.lchuv(os.xyz(ee));return A[3]=ee[3],A}function vt(ee){if(Fe.hasOwnProperty(ee))return Fe[ee];if(Ve>=ke){let B=0;for(const J in Fe)3&B++||(delete Fe[J],--Ve)}const A=function le(ee){Array.isArray(ee)&&ee.raw&&(ee=String.raw(...arguments)),ee instanceof Number&&(ee=+ee);var A,se=q(ee);if(!se.space)return[];const Se="h"===se.space[0]?te.min:os.min,Re="h"===se.space[0]?te.max:os.max;return(A=Array(3))[0]=Math.min(Math.max(se.values[0],Se[0]),Re[0]),A[1]=Math.min(Math.max(se.values[1],Se[1]),Re[1]),A[2]=Math.min(Math.max(se.values[2],Se[2]),Re[2]),"h"===se.space[0]&&(A=te.rgb(A)),A.push(Math.min(Math.max(se.alpha,0),1)),A}(ee);if(4!==A.length)throw new Error('Failed to parse "'+ee+'" as color');for(const B of A)if(isNaN(B))throw new Error('Failed to parse "'+ee+'" as color');return It(A),Fe[ee]=A,++Ve,A}function _t(ee){return Array.isArray(ee)?ee:vt(ee)}function It(ee){return ee[0]=fe(ee[0]+.5|0,0,255),ee[1]=fe(ee[1]+.5|0,0,255),ee[2]=fe(ee[2]+.5|0,0,255),ee[3]=fe(ee[3],0,1),ee}function Ft(ee){let A=ee[0];A!=(0|A)&&(A=A+.5|0);let B=ee[1];B!=(0|B)&&(B=B+.5|0);let J=ee[2];return J!=(0|J)&&(J=J+.5|0),"rgba("+A+","+B+","+J+","+(void 0===ee[3]?1:Math.round(1e3*ee[3])/1e3)+")"}const Yt=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",jt=Yt.includes("firefox"),Jt=(Yt.includes("safari")&&!Yt.includes("chrom")&&(Yt.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Yt)),Yt.includes("webkit")&&!Yt.includes("edge")),Mn=Yt.includes("macintosh"),Ln=typeof devicePixelRatio<"u"?devicePixelRatio:1,Un=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Xn=typeof Image<"u"&&Image.prototype.decode,xr=function(){let ee=!1;try{const A=Object.defineProperty({},"passive",{get:function(){ee=!0}});window.addEventListener("_",null,A),window.removeEventListener("_",null,A)}catch{}return ee}();function Mr(ee,A,B,J){let se;return se=B&&B.length?B.shift():Un?new OffscreenCanvas(ee||300,A||300):document.createElement("canvas"),ee&&(se.width=ee),A&&(se.height=A),se.getContext("2d",J)}let hr;function Cr(){return hr||(hr=Mr(1,1)),hr}function Nr(ee){const A=ee.canvas;A.width=1,A.height=1,ee.clearRect(0,0,1,1)}function Sr(ee,A){const B=A.parentNode;B&&B.replaceChild(ee,A)}function Hr(ee){return ee&&ee.parentNode?ee.parentNode.removeChild(ee):null}function to(ee,A,B){return A+":"+ee+":"+(B?_t(B):"null")}const ya=new class Pa{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let A=0;for(const B in this.cache_)!(3&A++)&&!this.cache_[B].hasListener()&&(delete this.cache_[B],delete this.patternCache_[B],--this.cacheSize_)}}get(A,B,J){const se=to(A,B,J);return se in this.cache_?this.cache_[se]:null}getPattern(A,B,J){const se=to(A,B,J);return se in this.patternCache_?this.patternCache_[se]:null}set(A,B,J,se,Se){const Re=to(A,B,J),Ze=Re in this.cache_;this.cache_[Re]=se,Se&&(se.getImageState()===gi_IDLE&&se.load(),se.getImageState()===gi_LOADING?se.ready().then(()=>{this.patternCache_[Re]=Cr().createPattern(se.getImage(1),"repeat")}):this.patternCache_[Re]=Cr().createPattern(se.getImage(1),"repeat")),Ze||++this.cacheSize_}setSize(A){this.maxCacheSize_=A,this.expire()}};let Ki=null;class Pi extends f{constructor(A,B,J,se,Se){super(),this.hitDetectionImage_=null,this.image_=A,this.crossOrigin_=J,this.canvas_={},this.color_=Se,this.imageState_=void 0===se?gi_IDLE:se,this.size_=A&&A.width&&A.height?[A.width,A.height]:null,this.src_=B,this.ready_=null}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===gi_LOADED){Ki||(Ki=Mr(1,1,void 0,{willReadFrequently:!0})),Ki.drawImage(this.image_,0,0);try{Ki.getImageData(0,0,1,1),this.tainted_=!1}catch{Ki=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent("change")}handleImageError_(){this.imageState_=gi_ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=gi_LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(A){return this.image_||this.initializeImage_(),this.replaceColor_(A),this.canvas_[A]?this.canvas_[A]:this.image_}getPixelRatio(A){return this.replaceColor_(A),this.canvas_[A]?A:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const A=this.size_[0],B=this.size_[1],J=Mr(A,B);J.fillRect(0,0,A,B),this.hitDetectionImage_=J.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===gi_IDLE){this.image_||this.initializeImage_(),this.imageState_=gi_LOADING;try{void 0!==this.src_&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&function Ti(ee,A){return A&&(ee.src=A),ee.src&&Xn?new Promise((B,J)=>ee.decode().then(()=>B(ee)).catch(se=>ee.complete&&ee.width?B(ee):J(se))):function mi(ee,A){return new Promise((B,J)=>{function se(){Re(),B(ee)}function Se(){Re(),J(new Error("Image load error"))}function Re(){ee.removeEventListener("load",se),ee.removeEventListener("error",Se)}ee.addEventListener("load",se),ee.addEventListener("error",Se),A&&(ee.src=A)})}(ee)}(this.image_,this.src_).then(A=>{this.image_=A,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(A){if(!this.color_||this.canvas_[A]||this.imageState_!==gi_LOADED)return;const B=this.image_,J=document.createElement("canvas");J.width=Math.ceil(B.width*A),J.height=Math.ceil(B.height*A);const se=J.getContext("2d");se.scale(A,A),se.drawImage(B,0,0),se.globalCompositeOperation="multiply",se.fillStyle=function pe(ee){return"string"==typeof ee?ee:Ft(ee)}(this.color_),se.fillRect(0,0,J.width/A,J.height/A),se.globalCompositeOperation="destination-in",se.drawImage(B,0,0),this.canvas_[A]=J}ready(){return this.ready_||(this.ready_=new Promise(A=>{this.imageState_===gi_LOADED||this.imageState_===gi_ERROR?A():this.addEventListener("change",function B(){(this.imageState_===gi_LOADED||this.imageState_===gi_ERROR)&&(this.removeEventListener("change",B),A())})})),this.ready_}}function ga(ee,A,B,J,se,Se){let Re=void 0===A?void 0:ya.get(A,B,se);return Re||(Re=new Pi(ee,ee&&"src"in ee?ee.src||void 0:A,B,J,se),ya.set(A,B,se,Re,Se)),Se&&Re&&!ya.getPattern(A,B,se)&&ya.set(A,B,se,Re,Se),Re}function bi(ee){return ee?Array.isArray(ee)?Ft(ee):"object"==typeof ee&&"src"in ee?function Ma(ee){if(!ee.offset||!ee.size)return ya.getPattern(ee.src,"anonymous",ee.color);const A=ee.src+":"+ee.offset,B=ya.getPattern(A,void 0,ee.color);if(B)return B;const J=ya.get(ee.src,"anonymous",null);if(J.getImageState()!==gi_LOADED)return null;const se=Mr(ee.size[0],ee.size[1]);return se.drawImage(J.getImage(1),ee.offset[0],ee.offset[1],ee.size[0],ee.size[1],0,0,ee.size[0],ee.size[1]),ga(se.canvas,A,void 0,gi_LOADED,ee.color,!0),ya.getPattern(A,void 0,ee.color)}(ee):ee:null}const ma="ol-hidden",$s="ol-unselectable",Oi="ol-control",fc="ol-collapsed",dc=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),Bs=["style","variant","weight","size","lineHeight","family"],xa=function(ee){const A=ee.match(dc);if(!A)return null;const B={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let J=0,se=Bs.length;J<se;++J){const Se=A[J+1];void 0!==Se&&(B[Bs[J]]=Se)}return B.families=B.family.split(/,\s?/),B},Ro="10px sans-serif",Yi="#000",Kl="round",pc=[],gu="round",Su="#000",Ql="center",Cu="middle",Oc=[0,0,0,0],tu=new W;let Ju,Rc=null;const $u={},e0=function(){const A="32px ",B=["monospace","serif"],J=B.length,se="wmytzilWMYTZIL@#/&?$%10\uf013";let Se,Re;function Ze(wt,bt,Gt){let rn=!0;for(let _n=0;_n<J;++_n){const Cn=B[_n];if(Re=Qu(wt+" "+bt+" "+A+Cn,se),Gt!=Cn){const jn=Qu(wt+" "+bt+" "+A+Gt+","+Cn,se);rn=rn&&jn!=Re}}return!!rn}function $e(){let wt=!0;const bt=tu.getKeys();for(let Gt=0,rn=bt.length;Gt<rn;++Gt){const _n=bt[Gt];tu.get(_n)<100&&(Ze.apply(this,_n.split("\n"))?(x($u),Rc=null,Ju=void 0,tu.set(_n,100)):(tu.set(_n,tu.get(_n)+1,!0),wt=!1))}wt&&(clearInterval(Se),Se=void 0)}return function(wt){const bt=xa(wt);if(!bt)return;const Gt=bt.families;for(let rn=0,_n=Gt.length;rn<_n;++rn){const Cn=Gt[rn],jn=bt.style+"\n"+bt.weight+"\n"+Cn;void 0===tu.get(jn)&&(tu.set(jn,100,!0),Ze(bt.style,bt.weight,Cn)||(tu.set(jn,0,!0),void 0===Se&&(Se=setInterval($e,32))))}}}(),t0=function(){let ee;return function(A){let B=$u[A];if(null==B){if(Un){const J=xa(A),se=Qs(A,"\u017dg");B=(isNaN(Number(J.lineHeight))?1.2:Number(J.lineHeight))*(se.actualBoundingBoxAscent+se.actualBoundingBoxDescent)}else ee||(ee=document.createElement("div"),ee.innerHTML="M",ee.style.minHeight="0",ee.style.maxHeight="none",ee.style.height="auto",ee.style.padding="0",ee.style.border="none",ee.style.position="absolute",ee.style.display="block",ee.style.left="-99999px"),ee.style.font=A,document.body.appendChild(ee),B=ee.offsetHeight,document.body.removeChild(ee);$u[A]=B}return B}}();function Qs(ee,A){return Rc||(Rc=Mr(1,1)),ee!=Ju&&(Rc.font=ee,Ju=Rc.font),Rc.measureText(A)}function Qu(ee,A){return Qs(ee,A).width}function Vf(ee,A,B){if(A in B)return B[A];const J=A.split("\n").reduce((se,Se)=>Math.max(se,Qu(ee,Se)),0);return B[A]=J,J}class Hf extends Mo{constructor(A){super({opacity:1,rotateWithView:void 0!==A.rotateWithView&&A.rotateWithView,rotation:void 0!==A.rotation?A.rotation:0,scale:void 0!==A.scale?A.scale:1,displacement:void 0!==A.displacement?A.displacement:[0,0],declutterMode:A.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=void 0!==A.fill?A.fill:null,this.origin_=[0,0],this.points_=A.points,this.radius_=A.radius,this.radius2_=A.radius2,this.angle_=void 0!==A.angle?A.angle:0,this.stroke_=void 0!==A.stroke?A.stroke:null,this.imageState_=this.fill_&&this.fill_.loading()?gi_LOADING:gi_LOADED,this.imageState_===gi_LOADING&&this.ready().then(()=>this.imageState_=gi_LOADED),this.render()}clone(){const A=this.getScale(),B=new Hf({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(A)?A.slice():A,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return B.setOpacity(this.getOpacity()),B}getAnchor(){const A=this.size_,B=this.getDisplacement(),J=this.getScaleArray();return[A[0]/2-B[0]/J[0],A[1]/2+B[1]/J[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(A){this.fill_=A,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(A){let B=this.canvases_[A];if(!B){const J=this.renderOptions_,se=Mr(J.size*A,J.size*A);this.draw_(J,se,A),B=se.canvas,this.canvases_[A]=B}return B}getPixelRatio(A){return A}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(A){this.stroke_=A,this.render()}listenImageChange(A){}load(){}unlistenImageChange(A){}calculateLineJoinSize_(A,B,J){if(0===B||this.points_===1/0||"bevel"!==A&&"miter"!==A)return B;let se=this.radius_,Se=void 0===this.radius2_?se:this.radius2_;if(se<Se){const Yr=se;se=Se,Se=Yr}const Ze=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),$e=Se*Math.sin(Ze),bt=se-Math.sqrt(Se*Se-$e*$e),Gt=Math.sqrt($e*$e+bt*bt),rn=Gt/$e;if("miter"===A&&rn<=J)return rn*B;const _n=B/2/rn,Cn=B/2*(bt/Gt),Yn=Math.sqrt((se+_n)*(se+_n)+Cn*Cn)-se;if(void 0===this.radius2_||"bevel"===A)return 2*Yn;const er=se*Math.sin(Ze),Ar=Se-Math.sqrt(se*se-er*er),Tr=Math.sqrt(er*er+Ar*Ar)/er;return Tr<=J?2*Math.max(Yn,Tr*B/2-Se-se):2*Yn}createRenderOptions(){let Re,A=Kl,B=gu,J=0,se=null,Se=0,Ze=0;this.stroke_&&(Re=bi(this.stroke_.getColor()??Su),Ze=this.stroke_.getWidth()??1,se=this.stroke_.getLineDash(),Se=this.stroke_.getLineDashOffset()??0,B=this.stroke_.getLineJoin()??gu,A=this.stroke_.getLineCap()??Kl,J=this.stroke_.getMiterLimit()??10);const $e=this.calculateLineJoinSize_(B,Ze,J),wt=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:Re,strokeWidth:Ze,size:Math.ceil(2*wt+$e),lineCap:A,lineDash:se,lineDashOffset:Se,lineJoin:B,miterLimit:J}}render(){this.renderOptions_=this.createRenderOptions();const A=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[A,A]}draw_(A,B,J){if(B.scale(J,J),B.translate(A.size/2,A.size/2),this.createPath_(B),this.fill_){let se=this.fill_.getColor();null===se&&(se=Yi),B.fillStyle=bi(se),B.fill()}A.strokeStyle&&(B.strokeStyle=A.strokeStyle,B.lineWidth=A.strokeWidth,A.lineDash&&(B.setLineDash(A.lineDash),B.lineDashOffset=A.lineDashOffset),B.lineCap=A.lineCap,B.lineJoin=A.lineJoin,B.miterLimit=A.miterLimit,B.stroke())}createHitDetectionCanvas_(A){let B;if(this.fill_){let J=this.fill_.getColor(),se=0;"string"==typeof J&&(J=_t(J)),null===J?se=1:Array.isArray(J)&&(se=4===J.length?J[3]:1),0===se&&(B=Mr(A.size,A.size),this.drawHitDetectionCanvas_(A,B))}return B?B.canvas:this.getImage(1)}createPath_(A){let B=this.points_;const J=this.radius_;if(B===1/0)A.arc(0,0,J,0,2*Math.PI);else{const se=void 0===this.radius2_?J:this.radius2_;void 0!==this.radius2_&&(B*=2);const Se=this.angle_-Math.PI/2,Re=2*Math.PI/B;for(let Ze=0;Ze<B;Ze++){const $e=Se+Ze*Re,wt=Ze%2==0?J:se;A.lineTo(wt*Math.cos($e),wt*Math.sin($e))}A.closePath()}}drawHitDetectionCanvas_(A,B){B.translate(A.size/2,A.size/2),this.createPath_(B),B.fillStyle=Yi,B.fill(),A.strokeStyle&&(B.strokeStyle=A.strokeStyle,B.lineWidth=A.strokeWidth,A.lineDash&&(B.setLineDash(A.lineDash),B.lineDashOffset=A.lineDashOffset),B.lineJoin=A.lineJoin,B.miterLimit=A.miterLimit,B.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}const Ud=Hf;class uf extends Ud{constructor(A){super({points:1/0,fill:(A=A||{radius:5}).fill,radius:A.radius,stroke:A.stroke,scale:void 0!==A.scale?A.scale:1,rotation:void 0!==A.rotation?A.rotation:0,rotateWithView:void 0!==A.rotateWithView&&A.rotateWithView,displacement:void 0!==A.displacement?A.displacement:[0,0],declutterMode:A.declutterMode})}clone(){const A=this.getScale(),B=new uf({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(A)?A.slice():A,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return B.setOpacity(this.getOpacity()),B}setRadius(A){this.radius_=A,this.render()}}const qf=uf;class Ch{constructor(A){A=A||{},this.patternImage_=null,this.color_=null,void 0!==A.color&&this.setColor(A.color)}clone(){const A=this.getColor();return new Ch({color:Array.isArray(A)?A.slice():A||void 0})}getColor(){return this.color_}setColor(A){if(null!==A&&"object"==typeof A&&"src"in A){const B=ga(null,A.src,"anonymous",void 0,A.offset?null:A.color?A.color:null,!(A.offset&&A.size));B.ready().then(()=>{this.patternImage_=null}),B.getImageState()===gi_IDLE&&B.load(),B.getImageState()===gi_LOADING&&(this.patternImage_=B)}this.color_=A}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}const hf=Ch;class Eh{constructor(A){this.color_=void 0!==(A=A||{}).color?A.color:null,this.lineCap_=A.lineCap,this.lineDash_=void 0!==A.lineDash?A.lineDash:null,this.lineDashOffset_=A.lineDashOffset,this.lineJoin_=A.lineJoin,this.miterLimit_=A.miterLimit,this.width_=A.width}clone(){const A=this.getColor();return new Eh({color:Array.isArray(A)?A.slice():A||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(A){this.color_=A}setLineCap(A){this.lineCap_=A}setLineDash(A){this.lineDash_=A}setLineDashOffset(A){this.lineDashOffset_=A}setLineJoin(A){this.lineJoin_=A}setMiterLimit(A){this.miterLimit_=A}setWidth(A){this.width_=A}}const mu=Eh;class fo{constructor(A){A=A||{},this.geometry_=null,this.geometryFunction_=Gd,void 0!==A.geometry&&this.setGeometry(A.geometry),this.fill_=void 0!==A.fill?A.fill:null,this.image_=void 0!==A.image?A.image:null,this.renderer_=void 0!==A.renderer?A.renderer:null,this.hitDetectionRenderer_=void 0!==A.hitDetectionRenderer?A.hitDetectionRenderer:null,this.stroke_=void 0!==A.stroke?A.stroke:null,this.text_=void 0!==A.text?A.text:null,this.zIndex_=A.zIndex}clone(){let A=this.getGeometry();return A&&"object"==typeof A&&(A=A.clone()),new fo({geometry:A??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(A){this.renderer_=A}setHitDetectionRenderer(A){this.hitDetectionRenderer_=A}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(A){this.fill_=A}getImage(){return this.image_}setImage(A){this.image_=A}getStroke(){return this.stroke_}setStroke(A){this.stroke_=A}getText(){return this.text_}setText(A){this.text_=A}getZIndex(){return this.zIndex_}setGeometry(A){"function"==typeof A?this.geometryFunction_=A:"string"==typeof A?this.geometryFunction_=function(B){return B.get(A)}:A?void 0!==A&&(this.geometryFunction_=function(){return A}):this.geometryFunction_=Gd,this.geometry_=A}setZIndex(A){this.zIndex_=A}}let ff=null;function Vd(ee,A){if(!ff){const B=new hf({color:"rgba(255,255,255,0.4)"}),J=new mu({color:"#3399CC",width:1.25});ff=[new fo({image:new qf({fill:B,stroke:J,radius:5}),fill:B,stroke:J})]}return ff}function Gd(ee){return ee.getGeometry()}const eh=fo;function df(ee,A,B,J){return void 0!==B&&void 0!==J?[B/ee,J/A]:void 0!==B?B/ee:void 0!==J?J/A:1}class Wf extends Mo{constructor(A){super({opacity:void 0!==(A=A||{}).opacity?A.opacity:1,rotation:void 0!==A.rotation?A.rotation:0,scale:void 0!==A.scale?A.scale:1,displacement:void 0!==A.displacement?A.displacement:[0,0],rotateWithView:void 0!==A.rotateWithView&&A.rotateWithView,declutterMode:A.declutterMode}),this.anchor_=void 0!==A.anchor?A.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==A.anchorOrigin?A.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==A.anchorXUnits?A.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==A.anchorYUnits?A.anchorYUnits:"fraction",this.crossOrigin_=void 0!==A.crossOrigin?A.crossOrigin:null;const Re=void 0!==A.img?A.img:null;let $e,Ze=A.src;if(oe(!(void 0!==Ze&&Re),"`image` and `src` cannot be provided at the same time"),(void 0===Ze||0===Ze.length)&&Re&&(Ze=Re.src||U(Re)),oe(void 0!==Ze&&Ze.length>0,"A defined and non-empty `src` or `image` must be provided"),oe(!((void 0!==A.width||void 0!==A.height)&&void 0!==A.scale),"`width` or `height` cannot be provided together with `scale`"),void 0!==A.src?$e=gi_IDLE:void 0!==Re&&($e="complete"in Re?Re.complete?Re.src?gi_LOADED:gi_IDLE:gi_LOADING:gi_LOADED),this.color_=void 0!==A.color?_t(A.color):null,this.iconImage_=ga(Re,Ze,this.crossOrigin_,$e,this.color_),this.offset_=void 0!==A.offset?A.offset:[0,0],this.offsetOrigin_=void 0!==A.offsetOrigin?A.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==A.size?A.size:null,void 0!==A.width||void 0!==A.height){let wt,bt;if(A.size)[wt,bt]=A.size;else{const Gt=this.getImage(1);if(Gt.width&&Gt.height)wt=Gt.width,bt=Gt.height;else if(Gt instanceof HTMLImageElement){this.initialOptions_=A;const rn=()=>{if(this.unlistenImageChange(rn),!this.initialOptions_)return;const _n=this.iconImage_.getSize();this.setScale(df(_n[0],_n[1],A.width,A.height))};return void this.listenImageChange(rn)}}void 0!==wt&&this.setScale(df(wt,bt,A.width,A.height))}}clone(){let A,B,J;return this.initialOptions_?(B=this.initialOptions_.width,J=this.initialOptions_.height):(A=this.getScale(),A=Array.isArray(A)?A.slice():A),new Wf({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:A,width:B,height:J,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let A=this.normalizedAnchor_;if(!A){A=this.anchor_;const se=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!se)return null;A=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(A[0]*=se[0]),"fraction"==this.anchorYUnits_&&(A[1]*=se[1])}if("top-left"!=this.anchorOrigin_){if(!se)return null;A===this.anchor_&&(A=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(A[0]=-A[0]+se[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(A[1]=-A[1]+se[1])}this.normalizedAnchor_=A}const B=this.getDisplacement(),J=this.getScaleArray();return[A[0]-B[0]/J[0],A[1]+B[1]/J[1]]}setAnchor(A){this.anchor_=A,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(A){return this.iconImage_.getImage(A)}getPixelRatio(A){return this.iconImage_.getPixelRatio(A)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let A=this.offset_;if("top-left"!=this.offsetOrigin_){const B=this.getSize(),J=this.iconImage_.getSize();if(!B||!J)return null;A=A.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(A[0]=J[0]-B[0]-A[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(A[1]=J[1]-B[1]-A[1])}return this.origin_=A,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const A=this.getScaleArray();return this.size_?this.size_[0]*A[0]:this.iconImage_.getImageState()==gi_LOADED?this.iconImage_.getSize()[0]*A[0]:void 0}getHeight(){const A=this.getScaleArray();return this.size_?this.size_[1]*A[1]:this.iconImage_.getImageState()==gi_LOADED?this.iconImage_.getSize()[1]*A[1]:void 0}setScale(A){delete this.initialOptions_,super.setScale(A)}listenImageChange(A){this.iconImage_.addEventListener("change",A)}load(){this.iconImage_.load()}unlistenImageChange(A){this.iconImage_.removeEventListener("change",A)}ready(){return this.iconImage_.ready()}}const Eu=Wf;class Dc{constructor(A){this.font_=(A=A||{}).font,this.rotation_=A.rotation,this.rotateWithView_=A.rotateWithView,this.scale_=A.scale,this.scaleArray_=wi(void 0!==A.scale?A.scale:1),this.text_=A.text,this.textAlign_=A.textAlign,this.justify_=A.justify,this.repeat_=A.repeat,this.textBaseline_=A.textBaseline,this.fill_=void 0!==A.fill?A.fill:new hf({color:"#333"}),this.maxAngle_=void 0!==A.maxAngle?A.maxAngle:Math.PI/4,this.placement_=void 0!==A.placement?A.placement:"point",this.overflow_=!!A.overflow,this.stroke_=void 0!==A.stroke?A.stroke:null,this.offsetX_=void 0!==A.offsetX?A.offsetX:0,this.offsetY_=void 0!==A.offsetY?A.offsetY:0,this.backgroundFill_=A.backgroundFill?A.backgroundFill:null,this.backgroundStroke_=A.backgroundStroke?A.backgroundStroke:null,this.padding_=void 0===A.padding?null:A.padding,this.declutterMode_=A.declutterMode}clone(){const A=this.getScale();return new Dc({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(A)?A.slice():A,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(A){this.overflow_=A}setFont(A){this.font_=A}setMaxAngle(A){this.maxAngle_=A}setOffsetX(A){this.offsetX_=A}setOffsetY(A){this.offsetY_=A}setPlacement(A){this.placement_=A}setRepeat(A){this.repeat_=A}setRotateWithView(A){this.rotateWithView_=A}setFill(A){this.fill_=A}setRotation(A){this.rotation_=A}setScale(A){this.scale_=A,this.scaleArray_=wi(void 0!==A?A:1)}setStroke(A){this.stroke_=A}setText(A){this.text_=A}setTextAlign(A){this.textAlign_=A}setJustify(A){this.justify_=A}setTextBaseline(A){this.textBaseline_=A}setBackgroundFill(A){this.backgroundFill_=A}setBackgroundStroke(A){this.backgroundStroke_=A}setPadding(A){this.padding_=A}}const Ih=Dc;let Iu=0;const th=0,_o=1<<Iu++,ui=1<<Iu++,Ll=1<<Iu++,ss=1<<Iu++,zc=1<<Iu++,Lu=1<<Iu++,Ns=Math.pow(2,6)-1,Pu={[_o]:"boolean",[ui]:"number",[Ll]:"string",[ss]:"color",[zc]:"number[]",[Lu]:"size"},o0=Object.keys(Pu).map(Number).sort(l);function Zi(ee){const A=[];for(const B of o0)pf(ee,B)&&A.push(Pu[B]);return 0===A.length?"untyped":A.length<3?A.join(" or "):A.slice(0,-1).join(", ")+", or "+A[A.length-1]}function pf(ee,A){return(ee&A)===A}function gc(ee,A){return!!(ee&A)}function Ou(ee,A){return ee===A}class mc{constructor(A,B){this.type=A,this.value=B}}class Lh{constructor(A,B,...J){this.type=A,this.operator=B,this.args=J}}function Yf(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,style:{}}}function ca(ee,A,B){switch(typeof ee){case"boolean":return new mc(_o,ee);case"number":return new mc(B===Lu?Lu:ui,ee);case"string":{let se=Ll;return function Ot(ee){try{return vt(ee),!0}catch{return!1}}(ee)&&(se|=ss),Ou(se&B,th)||(se&=B),new mc(se,ee)}}if(!Array.isArray(ee))throw new Error("Expression must be an array or a primitive value");if(0===ee.length)throw new Error("Empty expression");if("string"==typeof ee[0])return function f0(ee,A,B){const J=ee[0],se=Zf[J];if(!se)throw new Error(`Unknown operator: ${J}`);return se(ee,A,B)}(ee,A,B);for(const se of ee)if("number"!=typeof se)throw new Error("Expected an array of numbers");let J=zc;return 2===ee.length?J|=Lu:(3===ee.length||4===ee.length)&&(J|=ss),B&&(J&=B),new mc(J,ee)}const Ir={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string"},Zf={[Ir.Get]:Si(([ee,A])=>void 0!==A?function qd(ee){switch(ee){case"string":return Ll;case"color":return ss;case"number":return ui;case"boolean":return _o;case"number[]":return zc;default:throw new Error(`Unrecognized type hint: ${ee}`)}}(A.value):Ns,ji(1,2),function s0(ee,A){const B=ca(ee[1],A);if(!(B instanceof mc))throw new Error("Expected a literal argument for get operation");if("string"!=typeof B.value)throw new Error("Expected a string argument for get operation");return A.properties.add(B.value),3===ee.length?[B,ca(ee[2],A)]:[B]}),[Ir.Var]:Si(([ee])=>ee.type,ji(1,1),function Wd(ee,A,B,J){const se=ee[1];if("string"!=typeof se)throw new Error("Expected a string argument for var operation");if(A.variables.add(se),!("variables"in A.style)||void 0===A.style.variables[se])return[new mc(Ns,se)];const Re=ca(A.style.variables[se],A);if(Re.value=se,J&&!gc(J,Re.type))throw new Error(`The variable ${se} has type ${Zi(Re.type)} but the following type was expected: ${Zi(J)}`);return[Re]}),[Ir.Id]:Si(ui|Ll,Ru,function Ph(ee,A){A.featureId=!0}),[Ir.Concat]:Si(Ll,ji(2,1/0),aa(Ns)),[Ir.GeometryType]:Si(Ll,Ru,function l0(ee,A){A.geometryType=!0}),[Ir.Resolution]:Si(ui,Ru),[Ir.Zoom]:Si(ui,Ru),[Ir.Time]:Si(ui,Ru),[Ir.Any]:Si(_o,ji(2,1/0),aa(_o)),[Ir.All]:Si(_o,ji(2,1/0),aa(_o)),[Ir.Not]:Si(_o,ji(1,1),aa(_o)),[Ir.Equal]:Si(_o,ji(2,2),aa(Ns),Fc),[Ir.NotEqual]:Si(_o,ji(2,2),aa(Ns),Fc),[Ir.GreaterThan]:Si(_o,ji(2,2),aa(Ns),Fc),[Ir.GreaterThanOrEqualTo]:Si(_o,ji(2,2),aa(Ns),Fc),[Ir.LessThan]:Si(_o,ji(2,2),aa(Ns),Fc),[Ir.LessThanOrEqualTo]:Si(_o,ji(2,2),aa(Ns),Fc),[Ir.Multiply]:Si(ee=>{let A=ui|ss;for(let B=0;B<ee.length;B++)A&=ee[B].type;return A},ji(2,1/0),aa(ui|ss),Fc),[Ir.Coalesce]:Si(ee=>{let A=Ns;for(let B=1;B<ee.length;B+=2)A&=ee[B].type;return A&=ee[ee.length-1].type,A},ji(2,1/0),aa(Ns),Fc),[Ir.Divide]:Si(ui,ji(2,2),aa(ui)),[Ir.Add]:Si(ui,ji(2,1/0),aa(ui)),[Ir.Subtract]:Si(ui,ji(2,2),aa(ui)),[Ir.Clamp]:Si(ui,ji(3,3),aa(ui)),[Ir.Mod]:Si(ui,ji(2,2),aa(ui)),[Ir.Pow]:Si(ui,ji(2,2),aa(ui)),[Ir.Abs]:Si(ui,ji(1,1),aa(ui)),[Ir.Floor]:Si(ui,ji(1,1),aa(ui)),[Ir.Ceil]:Si(ui,ji(1,1),aa(ui)),[Ir.Round]:Si(ui,ji(1,1),aa(ui)),[Ir.Sin]:Si(ui,ji(1,1),aa(ui)),[Ir.Cos]:Si(ui,ji(1,1),aa(ui)),[Ir.Atan]:Si(ui,ji(1,2),aa(ui)),[Ir.Sqrt]:Si(ui,ji(1,1),aa(ui)),[Ir.Match]:Si(ee=>{let A=Ns;for(let B=2;B<ee.length;B+=2)A&=ee[B].type;return A&=ee[ee.length-1].type,A},ji(4,1/0),Yd,function c0(ee,A,B,J){const se=ee.length-1;let Re=ca(ee[1],A).type;const Ze=ca(ee[ee.length-1],A);let $e=void 0!==J?J&Ze.type:Ze.type;const wt=new Array(se-2);for(let Gt=0;Gt<se-2;Gt+=2){const rn=ca(ee[Gt+2],A),_n=ca(ee[Gt+3],A);Re&=rn.type,$e&=_n.type,wt[Gt]=rn,wt[Gt+1]=_n}const bt=Ll|ui|_o;if(!gc(bt,Re))throw new Error(`Expected an input of type ${Zi(bt)} for the interpolate operation, got ${Zi(Re)} instead`);if(Re&=bt,Ou($e,th))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(ee));for(let Gt=0;Gt<se-2;Gt+=2){const rn=ca(ee[Gt+2],A,Re),_n=ca(ee[Gt+3],A,$e);wt[Gt]=rn,wt[Gt+1]=_n}return[ca(ee[1],A,Re),...wt,ca(ee[ee.length-1],A,$e)]}),[Ir.Between]:Si(_o,ji(3,3),aa(ui)),[Ir.Interpolate]:Si(ee=>{let A=ss|ui;for(let B=3;B<ee.length;B+=2)A&=ee[B].type;return A},ji(6,1/0),Yd,function u0(ee,A,B,J){const se=ee[1];let Se;switch(se[0]){case"linear":Se=1;break;case"exponential":if(Se=se[1],"number"!=typeof Se)throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(Se)} instead`);break;default:Se=null}if(!Se)throw new Error(`Invalid interpolation type: ${JSON.stringify(se)}`);Se=ca(Se,A);let Re=ca(ee[2],A);if(!gc(ui,Re.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${Zi(Re.type)} instead`);Re=ca(ee[2],A,ui);const Ze=new Array(ee.length-3);for(let $e=0;$e<Ze.length;$e+=2){let wt=ca(ee[$e+3],A);if(!gc(ui,wt.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${Zi(wt.type)} at position ${$e+2} instead`);let bt=ca(ee[$e+4],A);if(!gc(ui|ss,bt.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${Zi(bt.type)} at position ${$e+3} instead`);wt=ca(ee[$e+3],A,ui),bt=ca(ee[$e+4],A,ui|ss),Ze[$e]=wt,Ze[$e+1]=bt}return[Se,Re,...Ze]}),[Ir.Case]:Si(ee=>{let A=Ns;for(let B=1;B<ee.length;B+=2)A&=ee[B].type;return A&=ee[ee.length-1].type,A},ji(3,1/0),function vc(ee,A){const J=ee.length-1;if(J%2==0)throw new Error(`An odd amount of arguments was expected for operation ${ee[0]}, got ${JSON.stringify(J)} instead`)},function h0(ee,A,B,J){const se=ca(ee[ee.length-1],A,J);let Se=void 0!==J?J&se.type:se.type;const Re=new Array(ee.length-1);for(let Ze=0;Ze<Re.length-1;Ze+=2){const $e=ca(ee[Ze+1],A),wt=ca(ee[Ze+2],A,J);if(!gc(_o,$e.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${Zi($e.type)} at position ${Ze} instead`);Se&=wt.type,Re[Ze]=$e,Re[Ze+1]=wt}if(Ou(Se,th))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(ee));for(let Ze=0;Ze<Re.length-1;Ze+=2)Re[Ze+1]=ca(ee[Ze+2],A,Se);return Re[Re.length-1]=ca(ee[ee.length-1],A,Se),Re}),[Ir.In]:Si(_o,ji(2,2),function Zd(ee,A){let B=ee[2];if(!Array.isArray(B))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if("string"==typeof B[0]){if("literal"!==B[0])throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(B[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');B=B[1]}let J=Ll|ui;const se=new Array(B.length);for(let Re=0;Re<se.length;Re++){const Ze=ca(B[Re],A);J&=Ze.type,se[Re]=Ze}if(Ou(J,th))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(ee));return[ca(ee[1],A,J),...se]}),[Ir.Number]:Si(ui,ji(1,1/0),aa(Ns)),[Ir.String]:Si(Ll,ji(1,1/0),aa(Ns)),[Ir.Array]:Si(ee=>2===ee.length?zc|Lu:3===ee.length||4===ee.length?zc|ss:zc,ji(1,1/0),aa(ui)),[Ir.Color]:Si(ss,ji(1,4),aa(ui)),[Ir.Band]:Si(ui,ji(1,3),aa(ui)),[Ir.Palette]:Si(ss,ji(2,2),function nh(ee,A){const B=ca(ee[1],A,ui);if(B.type!==ui)throw new Error(`The first argument of palette must be an number, got ${Zi(B.type)} instead`);const J=ee[2];if(!Array.isArray(J))throw new Error("The second argument of palette must be an array");const se=new Array(J.length);for(let Se=0;Se<se.length;Se++){const Re=ca(J[Se],A,ss);if(!(Re instanceof mc))throw new Error(`The palette color at index ${Se} must be a literal value`);if(!gc(Re.type,ss))throw new Error(`The palette color at index ${Se} should be of type color, got ${Zi(Re.type)} instead`);se[Se]=Re}return[B,...se]}),[Ir.ToString]:Si(Ll,ji(1,1),aa(_o|ui|Ll|ss))};function Ru(ee,A){if(1!==ee.length)throw new Error(`Expected no arguments for ${ee[0]} operation`);return[]}function ji(ee,A){return function(B,J){const se=B[0],Se=B.length-1;if(ee===A){if(Se!==ee)throw new Error(`Expected ${ee} argument${1===ee?"":"s"} for ${se}, got ${Se}`)}else if(Se<ee||Se>A)throw new Error(`Expected ${A===1/0?`${ee} or more`:`${ee} to ${A}`} arguments for ${se}, got ${Se}`)}}function aa(ee){return function(A,B){const J=A[0],se=A.length-1,Se=new Array(se);for(let Re=0;Re<se;++Re){const Ze=ca(A[Re+1],B);if(!gc(ee,Ze.type)){const $e=Zi(ee),wt=Zi(Ze.type);throw new Error(`Unexpected type for argument ${Re} of ${J} operation, got ${$e} but expected ${wt}`)}Ze.type&=ee,Se[Re]=Ze}return Se}}function Fc(ee,A,B){const J=ee[0],se=ee.length-1;let Se=Ns;for(let Ze=0;Ze<B.length;++Ze)Se&=B[Ze].type;if(Se===th)throw new Error(`No common type could be found for arguments of ${J} operation`);const Re=new Array(se);for(let Ze=0;Ze<se;++Ze)Re[Ze]=ca(ee[Ze+1],A,Se);return Re}function Yd(ee,A){const J=ee.length-1;if(J%2==1)throw new Error(`An even amount of arguments was expected for operation ${ee[0]}, got ${JSON.stringify(J)} instead`)}function Si(ee,...A){return function(B,J,se){const Se=B[0];let Re=[];for(let $e=0;$e<A.length;$e++)Re=A[$e](B,J,Re,se)||Re;let Ze="function"==typeof ee?ee(Re):ee;if(void 0!==se){if(!gc(Ze,se))throw new Error(`The following expression was expected to return ${Zi(se)}, but returns ${Zi(Ze)} instead: ${JSON.stringify(B)}`);Ze&=se}if(Ze===th)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(B)}`);return new Lh(Ze,Se,...Re)}}function Xf(ee){if(!ee)return"";const A=ee.getType();switch(A){case"Point":case"LineString":case"Polygon":return A;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return A.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return Xf(ee.getGeometries()[0]);default:return""}}function nu(ee,A,B){const J=ca(ee,B);if(!gc(A,J.type)){const se=Zi(A),Se=Zi(J.type);throw new Error(`Expected expression to be of type ${se}, got ${Se}`)}return yc(J,B)}function yc(ee,A){if(ee instanceof mc){if(ee.type===ss&&"string"==typeof ee.value){const J=vt(ee.value);return function(){return J}}return function(){return ee.value}}const B=ee.operator;switch(B){case Ir.Number:case Ir.String:case Ir.Coalesce:return function rh(ee,A){const B=ee.operator,J=ee.args.length,se=new Array(J);for(let Se=0;Se<J;++Se)se[Se]=yc(ee.args[Se],A);switch(B){case Ir.Coalesce:return Se=>{for(let Re=0;Re<J;++Re){const Ze=se[Re](Se);if(typeof Ze<"u"&&null!==Ze)return Ze}throw new Error("Expected one of the values to be non-null")};case Ir.Number:case Ir.String:return Se=>{for(let Re=0;Re<J;++Re){const Ze=se[Re](Se);if(typeof Ze===B)return Ze}throw new Error(`Expected one of the values to be a ${B}`)};default:throw new Error(`Unsupported assertion operator ${B}`)}}(ee,A);case Ir.Get:case Ir.Var:return function d0(ee,A){const J=ee.args[0].value;switch(ee.operator){case Ir.Get:return se=>se.properties[J];case Ir.Var:return se=>se.variables[J];default:throw new Error(`Unsupported accessor operator ${ee.operator}`)}}(ee);case Ir.Id:return J=>J.featureId;case Ir.GeometryType:return J=>J.geometryType;case Ir.Concat:{const J=ee.args.map(se=>yc(se,A));return se=>"".concat(...J.map(Se=>Se(se).toString()))}case Ir.Resolution:return J=>J.resolution;case Ir.Any:case Ir.All:case Ir.Between:case Ir.In:case Ir.Not:return function Oh(ee,A){const B=ee.operator,J=ee.args.length,se=new Array(J);for(let Se=0;Se<J;++Se)se[Se]=yc(ee.args[Se],A);switch(B){case Ir.Any:return Se=>{for(let Re=0;Re<J;++Re)if(se[Re](Se))return!0;return!1};case Ir.All:return Se=>{for(let Re=0;Re<J;++Re)if(!se[Re](Se))return!1;return!0};case Ir.Between:return Se=>{const Re=se[0](Se),Ze=se[1](Se),$e=se[2](Se);return Re>=Ze&&Re<=$e};case Ir.In:return Se=>{const Re=se[0](Se);for(let Ze=1;Ze<J;++Ze)if(Re===se[Ze](Se))return!0;return!1};case Ir.Not:return Se=>!se[0](Se);default:throw new Error(`Unsupported logical operator ${B}`)}}(ee,A);case Ir.Equal:case Ir.NotEqual:case Ir.LessThan:case Ir.LessThanOrEqualTo:case Ir.GreaterThan:case Ir.GreaterThanOrEqualTo:return function Jf(ee,A){const B=ee.operator,J=yc(ee.args[0],A),se=yc(ee.args[1],A);switch(B){case Ir.Equal:return Se=>J(Se)===se(Se);case Ir.NotEqual:return Se=>J(Se)!==se(Se);case Ir.LessThan:return Se=>J(Se)<se(Se);case Ir.LessThanOrEqualTo:return Se=>J(Se)<=se(Se);case Ir.GreaterThan:return Se=>J(Se)>se(Se);case Ir.GreaterThanOrEqualTo:return Se=>J(Se)>=se(Se);default:throw new Error(`Unsupported comparison operator ${B}`)}}(ee,A);case Ir.Multiply:case Ir.Divide:case Ir.Add:case Ir.Subtract:case Ir.Clamp:case Ir.Mod:case Ir.Pow:case Ir.Abs:case Ir.Floor:case Ir.Ceil:case Ir.Round:case Ir.Sin:case Ir.Cos:case Ir.Atan:case Ir.Sqrt:return function xc(ee,A){const B=ee.operator,J=ee.args.length,se=new Array(J);for(let Se=0;Se<J;++Se)se[Se]=yc(ee.args[Se],A);switch(B){case Ir.Multiply:return Se=>{let Re=1;for(let Ze=0;Ze<J;++Ze)Re*=se[Ze](Se);return Re};case Ir.Divide:return Se=>se[0](Se)/se[1](Se);case Ir.Add:return Se=>{let Re=0;for(let Ze=0;Ze<J;++Ze)Re+=se[Ze](Se);return Re};case Ir.Subtract:return Se=>se[0](Se)-se[1](Se);case Ir.Clamp:return Se=>{const Re=se[0](Se),Ze=se[1](Se);if(Re<Ze)return Ze;const $e=se[2](Se);return Re>$e?$e:Re};case Ir.Mod:return Se=>se[0](Se)%se[1](Se);case Ir.Pow:return Se=>Math.pow(se[0](Se),se[1](Se));case Ir.Abs:return Se=>Math.abs(se[0](Se));case Ir.Floor:return Se=>Math.floor(se[0](Se));case Ir.Ceil:return Se=>Math.ceil(se[0](Se));case Ir.Round:return Se=>Math.round(se[0](Se));case Ir.Sin:return Se=>Math.sin(se[0](Se));case Ir.Cos:return Se=>Math.cos(se[0](Se));case Ir.Atan:return 2===J?Se=>Math.atan2(se[0](Se),se[1](Se)):Se=>Math.atan(se[0](Se));case Ir.Sqrt:return Se=>Math.sqrt(se[0](Se));default:throw new Error(`Unsupported numeric operator ${B}`)}}(ee,A);case Ir.Case:return function p0(ee,A){const B=ee.args.length,J=new Array(B);for(let se=0;se<B;++se)J[se]=yc(ee.args[se],A);return se=>{for(let Se=0;Se<B-1;Se+=2)if(J[Se](se))return J[Se+1](se);return J[B-1](se)}}(ee,A);case Ir.Match:return function g0(ee,A){const B=ee.args.length,J=new Array(B);for(let se=0;se<B;++se)J[se]=yc(ee.args[se],A);return se=>{const Se=J[0](se);for(let Re=1;Re<B;Re+=2)if(Se===J[Re](se))return J[Re+1](se);return J[B-1](se)}}(ee,A);case Ir.Interpolate:return function m0(ee,A){const B=ee.args.length,J=new Array(B);for(let se=0;se<B;++se)J[se]=yc(ee.args[se],A);return se=>{const Se=J[0](se),Re=J[1](se);let Ze,$e;for(let wt=2;wt<B;wt+=2){const bt=J[wt](se);let Gt=J[wt+1](se);const rn=Array.isArray(Gt);if(rn&&(Gt=Xe(Gt)),bt>=Re)return 2===wt?Gt:rn?v0(Se,Re,Ze,$e,bt,Gt):ih(Se,Re,Ze,$e,bt,Gt);Ze=bt,$e=Gt}return $e}}(ee,A);case Ir.ToString:return function Rh(ee,A){const B=ee.operator,J=ee.args.length,se=new Array(J);for(let Se=0;Se<J;++Se)se[Se]=yc(ee.args[Se],A);if(B===Ir.ToString)return Se=>{const Re=se[0](Se);return ee.args[0].type===ss?Ft(Re):Re.toString()};throw new Error(`Unsupported convert operator ${B}`)}(ee,A);default:throw new Error(`Unsupported operator ${B}`)}}function ih(ee,A,B,J,se,Se){const Re=se-B;if(0===Re)return J;const Ze=A-B;return J+(1===ee?Ze/Re:(Math.pow(ee,Ze)-1)/(Math.pow(ee,Re)-1))*(Se-J)}function v0(ee,A,B,J,se,Se){if(se-B==0)return J;const Ze=Je(J),$e=Je(Se);let wt=$e[2]-Ze[2];return wt>180?wt-=360:wt<-180&&(wt+=360),It(function ct(ee){const A=rt.rgb(j.xyz(ee));return A[3]=ee[3],A}([ih(ee,A,B,Ze[0],se,$e[0]),ih(ee,A,B,Ze[1],se,$e[1]),Ze[2]+ih(ee,A,B,0,se,wt),ih(ee,A,B,J[3],se,Se[3])]))}function y0(ee){return!0}function x0(ee){const A=Yf(),B=function Kd(ee,A){const B=ee.length,J=new Array(B);for(let se=0;se<B;++se){const Se=ee[se],Re="filter"in Se?nu(Se.filter,_o,A):y0;let Ze;if(Array.isArray(Se.style)){const $e=Se.style.length;Ze=new Array($e);for(let wt=0;wt<$e;++wt)Ze[wt]=Xo(Se.style[wt],A)}else Ze=[Xo(Se.style,A)];J[se]={filter:Re,styles:Ze}}return function(se){const Se=[];let Re=!1;for(let Ze=0;Ze<B;++Ze)if((0,J[Ze].filter)(se)&&(!ee[Ze].else||!Re)){Re=!0;for(const wt of J[Ze].styles){const bt=wt(se);bt&&Se.push(bt)}}return Se}}(ee,A),J={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""};return function(se,Se){if(J.properties=se.getPropertiesInternal(),J.resolution=Se,A.featureId){const Re=se.getId();J.featureId=void 0!==Re?Re:null}return A.geometryType&&(J.geometryType=Xf(se.getGeometry())),B(J)}}function Xd(ee){const A=Yf(),B=ee.length,J=new Array(B);for(let Re=0;Re<B;++Re)J[Re]=Xo(ee[Re],A);const se={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""},Se=new Array(B);return function(Re,Ze){if(se.properties=Re.getPropertiesInternal(),se.resolution=Ze,A.featureId){const wt=Re.getId();se.featureId=void 0!==wt?wt:null}let $e=0;for(let wt=0;wt<B;++wt){const bt=J[wt](se);bt&&(Se[$e]=bt,$e+=1)}return Se.length=$e,Se}}function Xo(ee,A){const B=Dh(ee,"",A),J=ah(ee,"",A),se=function _0(ee,A){const B="text-",J=ru(ee,B+"value",A);if(!J)return null;const se=Dh(ee,B,A),Se=Dh(ee,B+"background-",A),Re=ah(ee,B,A),Ze=ah(ee,B+"background-",A),$e=ru(ee,B+"font",A),wt=ml(ee,B+"max-angle",A),bt=ml(ee,B+"offset-x",A),Gt=ml(ee,B+"offset-y",A),rn=zh(ee,B+"overflow",A),_n=ru(ee,B+"placement",A),Cn=ml(ee,B+"repeat",A),jn=Fh(ee,B+"scale",A),Yn=zh(ee,B+"rotate-with-view",A),er=ml(ee,B+"rotation",A),rr=ru(ee,B+"align",A),Ar=ru(ee,B+"justify",A),Er=ru(ee,B+"baseline",A),Tr=oh(ee,B+"padding",A),Yr=au(ee,B+"declutter-mode"),Zr=new Ih({declutterMode:Yr});return function(qr){if(Zr.setText(J(qr)),se&&Zr.setFill(se(qr)),Se&&Zr.setBackgroundFill(Se(qr)),Re&&Zr.setStroke(Re(qr)),Ze&&Zr.setBackgroundStroke(Ze(qr)),$e&&Zr.setFont($e(qr)),wt&&Zr.setMaxAngle(wt(qr)),bt&&Zr.setOffsetX(bt(qr)),Gt&&Zr.setOffsetY(Gt(qr)),rn&&Zr.setOverflow(rn(qr)),_n){const Gr=_n(qr);if("point"!==Gr&&"line"!==Gr)throw new Error("Expected point or line for text-placement");Zr.setPlacement(Gr)}if(Cn&&Zr.setRepeat(Cn(qr)),jn&&Zr.setScale(jn(qr)),Yn&&Zr.setRotateWithView(Yn(qr)),er&&Zr.setRotation(er(qr)),rr){const Gr=rr(qr);if("left"!==Gr&&"center"!==Gr&&"right"!==Gr&&"end"!==Gr&&"start"!==Gr)throw new Error("Expected left, right, center, start, or end for text-align");Zr.setTextAlign(Gr)}if(Ar){const Gr=Ar(qr);if("left"!==Gr&&"right"!==Gr&&"center"!==Gr)throw new Error("Expected left, right, or center for text-justify");Zr.setJustify(Gr)}if(Er){const Gr=Er(qr);if("bottom"!==Gr&&"top"!==Gr&&"middle"!==Gr&&"alphabetic"!==Gr&&"hanging"!==Gr)throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");Zr.setTextBaseline(Gr)}return Tr&&Zr.setPadding(Tr(qr)),Zr}}(ee,A),Se=function Jd(ee,A){return"icon-src"in ee?function b0(ee,A){const B="icon-",J=B+"src",se=tp(ee[J],J),Se=po(ee,B+"anchor",A),Re=Fh(ee,B+"scale",A),Ze=ml(ee,B+"opacity",A),$e=po(ee,B+"displacement",A),wt=ml(ee,B+"rotation",A),bt=zh(ee,B+"rotate-with-view",A),Gt=td(ee,B+"anchor-origin"),rn=nd(ee,B+"anchor-x-units"),_n=nd(ee,B+"anchor-y-units"),Cn=function ep(ee,A){const B=ee[A];if(void 0!==B)return np(B,A)}(ee,B+"color"),jn=function ed(ee,A){const B=ee[A];if(void 0!==B){if("string"!=typeof B)throw new Error(`Expected a string for ${A}`);return B}}(ee,B+"cross-origin"),Yn=function iu(ee,A){const B=ee[A];if(void 0!==B)return Bh(B,A)}(ee,B+"offset"),er=td(ee,B+"offset-origin"),rr=Du(ee,B+"width"),Ar=Du(ee,B+"height"),Er=function Sa(ee,A){const B=ee[A];if(void 0!==B){if("number"==typeof B)return wi(B);if(!Array.isArray(B))throw new Error(`Expected a number or size array for ${A}`);if(2!==B.length||"number"!=typeof B[0]||"number"!=typeof B[1])throw new Error(`Expected a number or size array for ${A}`);return B}}(ee,B+"size"),Tr=au(ee,B+"declutter-mode"),Yr=new Eu({src:se,anchorOrigin:Gt,anchorXUnits:rn,anchorYUnits:_n,color:Cn,crossOrigin:jn,offset:Yn,offsetOrigin:er,height:Ar,width:rr,size:Er,declutterMode:Tr});return function(Zr){return Ze&&Yr.setOpacity(Ze(Zr)),$e&&Yr.setDisplacement($e(Zr)),wt&&Yr.setRotation(wt(Zr)),bt&&Yr.setRotateWithView(bt(Zr)),Re&&Yr.setScale(Re(Zr)),Se&&Yr.setAnchor(Se(Zr)),Yr}}(ee,A):"shape-points"in ee?function $d(ee,A){const B="shape-",J=B+"points",se=B+"radius",Se=rd(ee[J],J),Re=rd(ee[se],se),Ze=Dh(ee,B,A),$e=ah(ee,B,A),wt=Fh(ee,B+"scale",A),bt=po(ee,B+"displacement",A),Gt=ml(ee,B+"rotation",A),rn=zh(ee,B+"rotate-with-view",A),_n=Du(ee,B+"radius2"),Cn=Du(ee,B+"angle"),jn=au(ee,B+"declutter-mode"),Yn=new Ud({points:Se,radius:Re,radius2:_n,angle:Cn,declutterMode:jn});return function(er){return Ze&&Yn.setFill(Ze(er)),$e&&Yn.setStroke($e(er)),bt&&Yn.setDisplacement(bt(er)),Gt&&Yn.setRotation(Gt(er)),rn&&Yn.setRotateWithView(rn(er)),wt&&Yn.setScale(wt(er)),Yn}}(ee,A):"circle-radius"in ee?function w0(ee,A){const B="circle-",J=Dh(ee,B,A),se=ah(ee,B,A),Se=ml(ee,B+"radius",A),Re=Fh(ee,B+"scale",A),Ze=po(ee,B+"displacement",A),$e=ml(ee,B+"rotation",A),wt=zh(ee,B+"rotate-with-view",A),bt=au(ee,B+"declutter-mode"),Gt=new qf({radius:5,declutterMode:bt});return function(rn){return Se&&Gt.setRadius(Se(rn)),J&&Gt.setFill(J(rn)),se&&Gt.setStroke(se(rn)),Ze&&Gt.setDisplacement(Ze(rn)),$e&&Gt.setRotation($e(rn)),wt&&Gt.setRotateWithView(wt(rn)),Re&&Gt.setScale(Re(rn)),Gt}}(ee,A):null}(ee,A),Re=ml(ee,"z-index",A);if(!(B||J||se||Se||v(ee)))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(ee));const Ze=new eh;return function($e){let wt=!0;if(B){const bt=B($e);bt&&(wt=!1),Ze.setFill(bt)}if(J){const bt=J($e);bt&&(wt=!1),Ze.setStroke(bt)}if(se){const bt=se($e);bt&&(wt=!1),Ze.setText(bt)}if(Se){const bt=Se($e);bt&&(wt=!1),Ze.setImage(bt)}return Re&&Ze.setZIndex(Re($e)),wt?null:Ze}}function Dh(ee,A,B){let J;if(J=A+"fill-pattern-src"in ee?function Qd(ee,A,B){const J=ru(ee,A+"pattern-src",B),se=Qf(ee,A+"pattern-offset",B),Se=Qf(ee,A+"pattern-size",B),Re=$f(ee,A+"color",B);return function(Ze){return{src:J(Ze),offset:se&&se(Ze),size:Se&&Se(Ze),color:Re&&Re(Ze)}}}(ee,A+"fill-",B):$f(ee,A+"fill-color",B),!J)return null;const se=new hf;return function(Se){const Re=J(Se);return"none"===Re?null:(se.setColor(Re),se)}}function ah(ee,A,B){const J=ml(ee,A+"stroke-width",B),se=$f(ee,A+"stroke-color",B);if(!J&&!se)return null;const Se=ru(ee,A+"stroke-line-cap",B),Re=ru(ee,A+"stroke-line-join",B),Ze=oh(ee,A+"stroke-line-dash",B),$e=ml(ee,A+"stroke-line-dash-offset",B),wt=ml(ee,A+"stroke-miter-limit",B),bt=new mu;return function(Gt){if(se){const rn=se(Gt);if("none"===rn)return null;bt.setColor(rn)}if(J&&bt.setWidth(J(Gt)),Se){const rn=Se(Gt);if("butt"!==rn&&"round"!==rn&&"square"!==rn)throw new Error("Expected butt, round, or square line cap");bt.setLineCap(rn)}if(Re){const rn=Re(Gt);if("bevel"!==rn&&"round"!==rn&&"miter"!==rn)throw new Error("Expected bevel, round, or miter line join");bt.setLineJoin(rn)}return Ze&&bt.setLineDash(Ze(Gt)),$e&&bt.setLineDashOffset($e(Gt)),wt&&bt.setMiterLimit(wt(Gt)),bt}}function ml(ee,A,B){if(!(A in ee))return;const J=nu(ee[A],ui,B);return function(se){return rd(J(se),A)}}function ru(ee,A,B){if(!(A in ee))return null;const J=nu(ee[A],Ll,B);return function(se){return tp(J(se),A)}}function zh(ee,A,B){if(!(A in ee))return null;const J=nu(ee[A],_o,B);return function(se){const Se=J(se);if("boolean"!=typeof Se)throw new Error(`Expected a boolean for ${A}`);return Se}}function $f(ee,A,B){if(!(A in ee))return null;const J=nu(ee[A],ss|Ll,B);return function(se){return np(J(se),A)}}function oh(ee,A,B){if(!(A in ee))return null;const J=nu(ee[A],zc,B);return function(se){return Bh(J(se),A)}}function po(ee,A,B){if(!(A in ee))return null;const J=nu(ee[A],zc,B);return function(se){const Se=Bh(J(se),A);if(2!==Se.length)throw new Error(`Expected two numbers for ${A}`);return Se}}function Qf(ee,A,B){if(!(A in ee))return null;const J=nu(ee[A],zc,B);return function(se){return rp(J(se),A)}}function Fh(ee,A,B){if(!(A in ee))return null;const J=nu(ee[A],zc|ui,B);return function(se){return function T0(ee,A){return"number"==typeof ee?ee:rp(ee,A)}(J(se),A)}}function Du(ee,A){const B=ee[A];if(void 0!==B){if("number"!=typeof B)throw new Error(`Expected a number for ${A}`);return B}}function td(ee,A){const B=ee[A];if(void 0!==B){if("bottom-left"!==B&&"bottom-right"!==B&&"top-left"!==B&&"top-right"!==B)throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${A}`);return B}}function nd(ee,A){const B=ee[A];if(void 0!==B){if("pixels"!==B&&"fraction"!==B)throw new Error(`Expected pixels or fraction for ${A}`);return B}}function au(ee,A){const B=ee[A];if(void 0!==B){if("string"!=typeof B)throw new Error(`Expected a string for ${A}`);if("declutter"!==B&&"obstacle"!==B&&"none"!==B)throw new Error(`Expected declutter, obstacle, or none for ${A}`);return B}}function Bh(ee,A){if(!Array.isArray(ee))throw new Error(`Expected an array for ${A}`);const B=ee.length;for(let J=0;J<B;++J)if("number"!=typeof ee[J])throw new Error(`Expected an array of numbers for ${A}`);return ee}function tp(ee,A){if("string"!=typeof ee)throw new Error(`Expected a string for ${A}`);return ee}function rd(ee,A){if("number"!=typeof ee)throw new Error(`Expected a number for ${A}`);return ee}function np(ee,A){if("string"==typeof ee)return ee;const B=Bh(ee,A),J=B.length;if(J<3||J>4)throw new Error(`Expected a color with 3 or 4 values for ${A}`);return B}function rp(ee,A){const B=Bh(ee,A);if(2!==B.length)throw new Error(`Expected an array of two numbers for ${A}`);return B}const Nh=class A0 extends as{constructor(A){A=A||{};const B=Object.assign({},A);delete B.style,delete B.renderBuffer,delete B.updateWhileAnimating,delete B.updateWhileInteracting,super(B),this.declutter_=A.declutter?String(A.declutter):void 0,this.renderBuffer_=void 0!==A.renderBuffer?A.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(A.style),this.updateWhileAnimating_=void 0!==A.updateWhileAnimating&&A.updateWhileAnimating,this.updateWhileInteracting_=void 0!==A.updateWhileInteracting&&A.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(A){return super.getFeatures(A)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get("renderOrder")}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(A,B){const J=this.getDeclutter();J in A.declutter||(A.declutter[J]=new La(9)),this.getRenderer().renderDeclutter(A,B)}setRenderOrder(A){this.set("renderOrder",A)}setStyle(A){this.style_=void 0===A?Vd:A;const B=function k0(ee){if(void 0===ee)return Vd;if(!ee)return null;if("function"==typeof ee||ee instanceof eh)return ee;if(!Array.isArray(ee))return Xd([ee]);if(0===ee.length)return[];const A=ee.length,B=ee[0];if(B instanceof eh){const se=new Array(A);for(let Se=0;Se<A;++Se){const Re=ee[Se];if(!(Re instanceof eh))throw new Error("Expected a list of style instances");se[Se]=Re}return se}if("style"in B){const se=new Array(A);for(let Se=0;Se<A;++Se){const Re=ee[Se];if(!("style"in Re))throw new Error("Expected a list of rules with a style property");se[Se]=Re}return x0(se)}return Xd(ee)}(A);this.styleFunction_=null===A?void 0:function a0(ee){let A;if("function"==typeof ee)A=ee;else{let B;Array.isArray(ee)?B=ee:(oe("function"==typeof ee.getZIndex,"Expected an `Style` or an array of `Style`"),B=[ee]),A=function(){return B}}return A}(B),this.changed()}};function ap(ee,A){ya.expire()}const id=class sh extends b{constructor(A){super(),this.map_=A}dispatchRenderEvent(A,B){V()}calculateMatrices2D(A){const B=A.viewState,J=A.coordinateToPixelTransform,se=A.pixelToCoordinateTransform;Uo(J,A.size[0]/2,A.size[1]/2,1/B.resolution,-1/B.resolution,-B.rotation,-B.center[0],-B.center[1]),Cc(se,J)}forEachFeatureAtCoordinate(A,B,J,se,Se,Re,Ze,$e){let wt;const bt=B.viewState;function Gt(Er,Tr,Yr,Zr){return Se.call(Re,Tr,Er?Yr:null,Zr)}const rn=bt.projection,_n=gr(A.slice(),rn),Cn=[[0,0]];if(rn.canWrapX()&&se){const Tr=Kn(rn.getExtent());Cn.push([-Tr,0],[Tr,0])}const jn=B.layerStatesArray,Yn=jn.length,er=[],rr=[];for(let Er=0;Er<Cn.length;Er++)for(let Tr=Yn-1;Tr>=0;--Tr){const Yr=jn[Tr],Zr=Yr.layer;if(Zr.hasRenderer()&&is(Yr,bt)&&Ze.call($e,Zr)){const qr=Zr.getRenderer(),Gr=Zr.getSource();if(qr&&Gr){const Ri=Gr.getWrapX()?_n:A,Ci=Gt.bind(null,Yr.managed);rr[0]=Ri[0]+Cn[Er][0],rr[1]=Ri[1]+Cn[Er][1],wt=qr.forEachFeatureAtCoordinate(rr,B,J,Ci,er)}if(wt)return wt}}if(0===er.length)return;const Ar=1/er.length;return er.forEach((Er,Tr)=>Er.distanceSq+=Tr*Ar),er.sort((Er,Tr)=>Er.distanceSq-Tr.distanceSq),er.some(Er=>wt=Er.callback(Er.feature,Er.layer,Er.geometry)),wt}hasFeatureAtCoordinate(A,B,J,se,Se,Re){return void 0!==this.forEachFeatureAtCoordinate(A,B,J,se,u,this,Se,Re)}getMap(){return this.map_}renderFrame(A){V()}scheduleExpireIconCache(A){ya.canExpireCache()&&A.postRenderFunctions.push(ap)}},op=class M0 extends k{constructor(A,B,J,se){super(A),this.inversePixelTransform=B,this.frameState=J,this.context=se}},sp=class S0 extends id{constructor(A){super(A),this.fontChangeListenerKey_=w(tu,"propertychange",A.redrawText.bind(A)),this.element_=document.createElement("div");const B=this.element_.style;B.position="absolute",B.width="100%",B.height="100%",B.zIndex="0",this.element_.className=$s+" ol-layers";const J=A.getViewport();J.insertBefore(this.element_,J.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(A,B){const J=this.getMap();if(J.hasListener(A)){const se=new op(A,void 0,B);J.dispatchEvent(se)}}disposeInternal(){P(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(A){if(!A)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(A),this.dispatchRenderEvent("precompose",A);const B=A.layerStatesArray.sort(function(Ze,$e){return Ze.zIndex-$e.zIndex});B.some(Ze=>Ze.layer instanceof Nh&&Ze.layer.getDeclutter())&&(A.declutter={});const se=A.viewState;this.children_.length=0;const Se=[];let Re=null;for(let Ze=0,$e=B.length;Ze<$e;++Ze){const wt=B[Ze];A.layerIndex=Ze;const bt=wt.layer,Gt=bt.getSourceState();if(!is(wt,se)||"ready"!=Gt&&"undefined"!=Gt){bt.unrender();continue}const rn=bt.render(A,Re);rn&&(rn!==Re&&(this.children_.push(rn),Re=rn),Se.push(wt))}this.declutter(A,Se),function Kr(ee,A){const B=ee.childNodes;for(let J=0;;++J){const se=B[J],Se=A[J];if(!se&&!Se)break;if(se!==Se){if(!se){ee.appendChild(Se);continue}if(!Se){ee.removeChild(se),--J;continue}ee.insertBefore(Se,se)}}}(this.element_,this.children_),this.dispatchRenderEvent("postcompose",A),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(A)}declutter(A,B){if(A.declutter){for(let J=B.length-1;J>=0;--J){const se=B[J],Se=se.layer;Se.getDeclutter()&&Se.renderDeclutter(A,se)}B.forEach(J=>J.layer.renderDeferred(A))}}};class ou extends k{constructor(A,B){super(A),this.layer=B}}class lh extends me{constructor(A){A=A||{};const B=Object.assign({},A);delete B.layers;let J=A.layers;super(B),this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener("layers",this.handleLayersChanged_),J?Array.isArray(J)?J=new $(J.slice(),{unique:!0}):oe("function"==typeof J.getArray,"Expected `layers` to be an array or a `Collection`"):J=new $(void 0,{unique:!0}),this.setLayers(J)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(P),this.layersListenerKeys_.length=0;const A=this.getLayers();this.layersListenerKeys_.push(w(A,"add",this.handleLayersAdd_,this),w(A,"remove",this.handleLayersRemove_,this));for(const J in this.listenerKeys_)this.listenerKeys_[J].forEach(P);x(this.listenerKeys_);const B=A.getArray();for(let J=0,se=B.length;J<se;J++){const Se=B[J];this.registerLayerListeners_(Se),this.dispatchEvent(new ou("addlayer",Se))}this.changed()}registerLayerListeners_(A){const B=[w(A,"propertychange",this.handleLayerChange_,this),w(A,"change",this.handleLayerChange_,this)];A instanceof lh&&B.push(w(A,"addlayer",this.handleLayerGroupAdd_,this),w(A,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[U(A)]=B}handleLayerGroupAdd_(A){this.dispatchEvent(new ou("addlayer",A.layer))}handleLayerGroupRemove_(A){this.dispatchEvent(new ou("removelayer",A.layer))}handleLayersAdd_(A){const B=A.element;this.registerLayerListeners_(B),this.dispatchEvent(new ou("addlayer",B)),this.changed()}handleLayersRemove_(A){const B=A.element,J=U(B);this.listenerKeys_[J].forEach(P),delete this.listenerKeys_[J],this.dispatchEvent(new ou("removelayer",B)),this.changed()}getLayers(){return this.get("layers")}setLayers(A){const B=this.getLayers();if(B){const J=B.getArray();for(let se=0,Se=J.length;se<Se;++se)this.dispatchEvent(new ou("removelayer",J[se]))}this.set("layers",A)}getLayersArray(A){return A=void 0!==A?A:[],this.getLayers().forEach(function(B){B.getLayersArray(A)}),A}getLayerStatesArray(A){const B=void 0!==A?A:[],J=B.length;this.getLayers().forEach(function(Re){Re.getLayerStatesArray(B)});const se=this.getLayerState();let Se=se.zIndex;!A&&void 0===se.zIndex&&(Se=0);for(let Re=J,Ze=B.length;Re<Ze;Re++){const $e=B[Re];$e.opacity*=se.opacity,$e.visible=$e.visible&&se.visible,$e.maxResolution=Math.min($e.maxResolution,se.maxResolution),$e.minResolution=Math.max($e.minResolution,se.minResolution),$e.minZoom=Math.max($e.minZoom,se.minZoom),$e.maxZoom=Math.min($e.maxZoom,se.maxZoom),void 0!==se.extent&&($e.extent=void 0!==$e.extent?fn($e.extent,se.extent):se.extent),void 0===$e.zIndex&&($e.zIndex=Se)}return B}getSourceState(){return"ready"}}const vu=lh,Ko=class jh extends k{constructor(A,B,J){super(A),this.map=B,this.frameState=void 0!==J?J:null}},Pl=class Uh extends Ko{constructor(A,B,J,se,Se,Re){super(A,B,Se),this.originalEvent=J,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==se&&se,this.activePointers=Re}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(A){this.pixel_=A}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(A){this.coordinate_=A}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},Vi={SINGLECLICK:"singleclick",CLICK:"click",DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},el=class gf extends f{constructor(A,B){super(A),this.map_=A,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===B?1:B,this.down_=null;const J=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=J,this.pointerdownListenerKey_=w(J,"pointerdown",this.handlePointerDown_,this),this.relayedListenerKey_=w(J,"pointermove",this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener("touchmove",this.boundHandleTouchMove_,!!xr&&{passive:!1})}emulateClick_(A){let B=new Pl(Vi.CLICK,this.map_,A);this.dispatchEvent(B),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,B=new Pl(Vi.DBLCLICK,this.map_,A),this.dispatchEvent(B)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const J=new Pl(Vi.SINGLECLICK,this.map_,A);this.dispatchEvent(J)},250)}updateActivePointers_(A){const B=A,J=B.pointerId;if(B.type==Vi.POINTERUP||B.type==Vi.POINTERCANCEL){delete this.trackedTouches_[J];for(const se in this.trackedTouches_)if(this.trackedTouches_[se].target!==B.target){delete this.trackedTouches_[se];break}}else(B.type==Vi.POINTERDOWN||B.type==Vi.POINTERMOVE)&&(this.trackedTouches_[J]=B);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(A){this.updateActivePointers_(A);const B=new Pl(Vi.POINTERUP,this.map_,A,void 0,void 0,this.activePointers_);this.dispatchEvent(B),this.emulateClicks_&&!B.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(A)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(P),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(A){return 0===A.button}handlePointerDown_(A){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(A);const B=new Pl(Vi.POINTERDOWN,this.map_,A,void 0,void 0,this.activePointers_);if(this.dispatchEvent(B),this.down_=new PointerEvent(A.type,A),Object.defineProperty(this.down_,"target",{writable:!1,value:A.target}),0===this.dragListenerKeys_.length){const J=this.map_.getOwnerDocument();this.dragListenerKeys_.push(w(J,Vi.POINTERMOVE,this.handlePointerMove_,this),w(J,Vi.POINTERUP,this.handlePointerUp_,this),w(this.element_,Vi.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==J&&this.dragListenerKeys_.push(w(this.element_.getRootNode(),Vi.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(A){if(this.isMoving_(A)){this.updateActivePointers_(A),this.dragging_=!0;const B=new Pl(Vi.POINTERDRAG,this.map_,A,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(B)}}relayMoveEvent_(A){this.originalPointerMoveEvent_=A;const B=!(!this.down_||!this.isMoving_(A));this.dispatchEvent(new Pl(Vi.POINTERMOVE,this.map_,A,B))}handleTouchMove_(A){const B=this.originalPointerMoveEvent_;(!B||B.defaultPrevented)&&("boolean"!=typeof A.cancelable||!0===A.cancelable)&&A.preventDefault()}isMoving_(A){return this.dragging_||Math.abs(A.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(A.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(P(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener("touchmove",this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(P(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(P),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},mf=1/0,cp=class lp{constructor(A,B){this.priorityFunction_=A,this.keyFunction_=B,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,x(this.queuedElements_)}dequeue(){const A=this.elements_,B=this.priorities_,J=A[0];1==A.length?(A.length=0,B.length=0):(A[0]=A.pop(),B[0]=B.pop(),this.siftUp_(0));const se=this.keyFunction_(J);return delete this.queuedElements_[se],J}enqueue(A){oe(!(this.keyFunction_(A)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const B=this.priorityFunction_(A);return B!=mf&&(this.elements_.push(A),this.priorities_.push(B),this.queuedElements_[this.keyFunction_(A)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(A){return 2*A+1}getRightChildIndex_(A){return 2*A+2}getParentIndex_(A){return A-1>>1}heapify_(){let A;for(A=(this.elements_.length>>1)-1;A>=0;A--)this.siftUp_(A)}isEmpty(){return 0===this.elements_.length}isKeyQueued(A){return A in this.queuedElements_}isQueued(A){return this.isKeyQueued(this.keyFunction_(A))}siftUp_(A){const B=this.elements_,J=this.priorities_,se=B.length,Se=B[A],Re=J[A],Ze=A;for(;A<se>>1;){const $e=this.getLeftChildIndex_(A),wt=this.getRightChildIndex_(A),bt=wt<se&&J[wt]<J[$e]?wt:$e;B[A]=B[bt],J[A]=J[bt],A=bt}B[A]=Se,J[A]=Re,this.siftDown_(Ze,A)}siftDown_(A,B){const J=this.elements_,se=this.priorities_,Se=J[B],Re=se[B];for(;B>A;){const Ze=this.getParentIndex_(B);if(!(se[Ze]>Re))break;J[B]=J[Ze],se[B]=se[Ze],B=Ze}J[B]=Se,se[B]=Re}reprioritize(){const A=this.priorityFunction_,B=this.elements_,J=this.priorities_;let se=0;const Se=B.length;let Re,Ze,$e;for(Ze=0;Ze<Se;++Ze)Re=B[Ze],$e=A(Re),$e==mf?delete this.queuedElements_[this.keyFunction_(Re)]:(J[se]=$e,B[se++]=Re);B.length=se,J.length=se,this.heapify_()}},C0=class ad extends cp{constructor(A,B){super(function(J){return A.apply(null,J)},function(J){return J[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=B,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(A){const B=super.enqueue(A);return B&&A[0].addEventListener("change",this.boundHandleTileChange_),B}getTilesLoading(){return this.tilesLoading_}handleTileChange(A){const B=A.target,J=B.getState();if(2===J||3===J||4===J){3!==J&&B.removeEventListener("change",this.boundHandleTileChange_);const se=B.getKey();se in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[se],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(A,B){let se,Se,Re,J=0;for(;this.tilesLoading_<A&&J<B&&this.getCount()>0;)Se=this.dequeue()[0],Re=Se.getKey(),se=Se.getState(),0===se&&!(Re in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[Re]=!0,++this.tilesLoading_,++J,Se.load())}};var yu=Aa(5861);const Vh=class _c extends W{constructor(A){super();const B=A.element;B&&!A.target&&!B.style.pointerEvents&&(B.style.pointerEvents="auto"),this.element=B||null,this.target_=null,this.map_=null,this.listenerKeys=[],A.render&&(this.render=A.render),A.target&&this.setTarget(A.target)}disposeInternal(){Hr(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(A){this.map_&&Hr(this.element);for(let B=0,J=this.listenerKeys.length;B<J;++B)P(this.listenerKeys[B]);this.listenerKeys.length=0,this.map_=A,A&&((this.target_?this.target_:A.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==d&&this.listenerKeys.push(w(A,"postrender",this.render,this)),A.render())}render(A){}setTarget(A){this.target_="string"==typeof A?document.getElementById(A):A}},fp=class hp extends Vh{constructor(A){A=A||{},super({element:document.createElement("div"),render:A.render,target:A.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===A.collapsed||A.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==A.collapsible,this.collapsible_=void 0===A.collapsible||A.collapsible,this.collapsible_||(this.collapsed_=!1);const B=void 0!==A.className?A.className:"ol-attribution",J=void 0!==A.tipLabel?A.tipLabel:"Attributions",se=void 0!==A.expandClassName?A.expandClassName:B+"-expand",Se=void 0!==A.collapseLabel?A.collapseLabel:"\u203a",Re=void 0!==A.collapseClassName?A.collapseClassName:B+"-collapse";"string"==typeof Se?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=Se,this.collapseLabel_.className=Re):this.collapseLabel_=Se;const Ze=void 0!==A.label?A.label:"i";"string"==typeof Ze?(this.label_=document.createElement("span"),this.label_.textContent=Ze,this.label_.className=se):this.label_=Ze;const $e=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=J,this.toggleButton_.appendChild($e),this.toggleButton_.addEventListener("click",this.handleClick_.bind(this),!1);const bt=this.element;bt.className=B+" "+$s+" "+Oi+(this.collapsed_&&this.collapsible_?" "+fc:"")+(this.collapsible_?"":" ol-uncollapsible"),bt.appendChild(this.toggleButton_),bt.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(A){const B=Array.from(new Set(this.getMap().getAllLayers().flatMap(se=>se.getAttributions(A)))),J=!this.getMap().getAllLayers().some(se=>se.getSource()&&!1===se.getSource().getAttributionsCollapsible());return this.overrideCollapsible_||this.setCollapsible(J),B}updateElement_(A){var B=this;return(0,yu.Z)(function*(){if(!A)return void(B.renderedVisible_&&(B.element.style.display="none",B.renderedVisible_=!1));const J=yield Promise.all(B.collectSourceAttributions_(A).map(Se=>function g(ee){return function A(){let B;try{B=ee()}catch(J){return Promise.reject(J)}return B instanceof Promise?B:Promise.resolve(B)}()}(()=>Se))),se=J.length>0;if(B.renderedVisible_!=se&&(B.element.style.display=se?"":"none",B.renderedVisible_=se),!s(J,B.renderedAttributions_)){!function Pr(ee){for(;ee.lastChild;)ee.removeChild(ee.lastChild)}(B.ulElement_);for(let Se=0,Re=J.length;Se<Re;++Se){const Ze=document.createElement("li");Ze.innerHTML=J[Se],B.ulElement_.appendChild(Ze)}B.renderedAttributions_=J}})()}handleClick_(A){A.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(fc),this.collapsed_?Sr(this.collapseLabel_,this.label_):Sr(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(A){this.collapsible_!==A&&(this.collapsible_=A,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(A){this.userCollapsed_=A,this.collapsible_&&this.collapsed_!==A&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(A){this.updateElement_(A.frameState)}},dp=class E0 extends Vh{constructor(A){A=A||{},super({element:document.createElement("div"),render:A.render,target:A.target});const B=void 0!==A.className?A.className:"ol-rotate",J=void 0!==A.label?A.label:"\u21e7",se=void 0!==A.compassClassName?A.compassClassName:"ol-compass";this.label_=null,"string"==typeof J?(this.label_=document.createElement("span"),this.label_.className=se,this.label_.textContent=J):(this.label_=J,this.label_.classList.add(se));const Se=A.tipLabel?A.tipLabel:"Reset rotation",Re=document.createElement("button");Re.className=B+"-reset",Re.setAttribute("type","button"),Re.title=Se,Re.appendChild(this.label_),Re.addEventListener("click",this.handleClick_.bind(this),!1);const $e=this.element;$e.className=B+" "+$s+" "+Oi,$e.appendChild(Re),this.callResetNorth_=A.resetNorth?A.resetNorth:void 0,this.duration_=void 0!==A.duration?A.duration:250,this.autoHide_=void 0===A.autoHide||A.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(ma)}handleClick_(A){A.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const B=this.getMap().getView();if(!B)return;const J=B.getRotation();void 0!==J&&(this.duration_>0&&J%(2*Math.PI)!=0?B.animate({rotation:0,duration:this.duration_,easing:vs}):B.setRotation(0))}render(A){const B=A.frameState;if(!B)return;const J=B.viewState.rotation;if(J!=this.rotation_){const se="rotate("+J+"rad)";if(this.autoHide_){const Se=this.element.classList.contains(ma);Se||0!==J?Se&&0!==J&&this.element.classList.remove(ma):this.element.classList.add(ma)}this.label_.style.transform=se}this.rotation_=J}},gp=class pp extends Vh{constructor(A){A=A||{},super({element:document.createElement("div"),target:A.target});const B=void 0!==A.className?A.className:"ol-zoom",J=void 0!==A.delta?A.delta:1,se=void 0!==A.zoomInClassName?A.zoomInClassName:B+"-in",Se=void 0!==A.zoomOutClassName?A.zoomOutClassName:B+"-out",Re=void 0!==A.zoomInLabel?A.zoomInLabel:"+",Ze=void 0!==A.zoomOutLabel?A.zoomOutLabel:"\u2013",$e=void 0!==A.zoomInTipLabel?A.zoomInTipLabel:"Zoom in",wt=void 0!==A.zoomOutTipLabel?A.zoomOutTipLabel:"Zoom out",bt=document.createElement("button");bt.className=se,bt.setAttribute("type","button"),bt.title=$e,bt.appendChild("string"==typeof Re?document.createTextNode(Re):Re),bt.addEventListener("click",this.handleClick_.bind(this,J),!1);const Gt=document.createElement("button");Gt.className=Se,Gt.setAttribute("type","button"),Gt.title=wt,Gt.appendChild("string"==typeof Ze?document.createTextNode(Ze):Ze),Gt.addEventListener("click",this.handleClick_.bind(this,-J),!1);const _n=this.element;_n.className=B+" "+$s+" "+Oi,_n.appendChild(bt),_n.appendChild(Gt),this.duration_=void 0!==A.duration?A.duration:250}handleClick_(A,B){B.preventDefault(),this.zoomByDelta_(A)}zoomByDelta_(A){const J=this.getMap().getView();if(!J)return;const se=J.getZoom();if(void 0!==se){const Se=J.getConstrainedZoom(se+A);this.duration_>0?(J.getAnimating()&&J.cancelAnimations(),J.animate({zoom:Se,duration:this.duration_,easing:vs})):J.setZoom(Se)}}};function vf(ee,A,B,J){const se=ee.getZoom();if(void 0===se)return;const Se=ee.getConstrainedZoom(se+A),Re=ee.getResolutionForZoom(Se);ee.getAnimating()&&ee.cancelAnimations(),ee.animate({resolution:Re,anchor:B,duration:void 0!==J?J:250,easing:vs})}const Bc=class I0 extends W{constructor(A){super(),A&&A.handleEvent&&(this.handleEvent=A.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get("active")}getMap(){return this.map_}handleEvent(A){return!0}setActive(A){this.set("active",A)}setMap(A){this.map_=A}},yf=class xp extends Bc{constructor(A){super(),this.delta_=(A=A||{}).delta?A.delta:1,this.duration_=void 0!==A.duration?A.duration:250}handleEvent(A){let B=!1;if(A.type==Vi.DBLCLICK){const J=A.originalEvent,Se=A.coordinate,Re=J.shiftKey?-this.delta_:this.delta_;vf(A.map.getView(),Re,Se,this.duration_),J.preventDefault(),B=!0}return!B}};function uh(ee){const A=ee.length;let B=0,J=0;for(let se=0;se<A;se++)B+=ee[se].clientX,J+=ee[se].clientY;return{clientX:B/A,clientY:J/A}}const bc=class _p extends Bc{constructor(A){super(A=A||{}),A.handleDownEvent&&(this.handleDownEvent=A.handleDownEvent),A.handleDragEvent&&(this.handleDragEvent=A.handleDragEvent),A.handleMoveEvent&&(this.handleMoveEvent=A.handleMoveEvent),A.handleUpEvent&&(this.handleUpEvent=A.handleUpEvent),A.stopDown&&(this.stopDown=A.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(A){return!1}handleDragEvent(A){}handleEvent(A){if(!A.originalEvent)return!0;let B=!1;if(this.updateTrackedPointers_(A),this.handlingDownUpSequence){if(A.type==Vi.POINTERDRAG)this.handleDragEvent(A),A.originalEvent.preventDefault();else if(A.type==Vi.POINTERUP){const J=this.handleUpEvent(A);this.handlingDownUpSequence=J&&this.targetPointers.length>0}}else if(A.type==Vi.POINTERDOWN){const J=this.handleDownEvent(A);this.handlingDownUpSequence=J,B=this.stopDown(J)}else A.type==Vi.POINTERMOVE&&this.handleMoveEvent(A);return!B}handleMoveEvent(A){}handleUpEvent(A){return!1}stopDown(A){return A}updateTrackedPointers_(A){A.activePointers&&(this.targetPointers=A.activePointers)}};function hh(ee){const A=arguments;return function(B){let J=!0;for(let se=0,Se=A.length;se<Se&&(J=J&&A[se](B),J);++se);return J}}const L0=function(ee){const A=ee.originalEvent;return A.altKey&&!(A.metaKey||A.ctrlKey)&&A.shiftKey},bp=function(ee){return!ee.map.getTargetElement().hasAttribute("tabindex")||function(ee){const A=ee.map.getTargetElement(),B=ee.map.getOwnerDocument().activeElement;return A.contains(B)}(ee)},fh=u,xf=function(ee){const A=ee.originalEvent;return 0==A.button&&!(Jt&&Mn&&A.ctrlKey)},od=function(ee){const A=ee.originalEvent;return!A.altKey&&!(A.metaKey||A.ctrlKey)&&!A.shiftKey},z0=function(ee){const A=ee.originalEvent;return!A.altKey&&!(A.metaKey||A.ctrlKey)&&A.shiftKey},Tp=function(ee){const A=ee.originalEvent,B=A.target.tagName;return"INPUT"!==B&&"SELECT"!==B&&"TEXTAREA"!==B&&!A.target.isContentEditable},dh=function(ee){const A=ee.originalEvent;return oe(void 0!==A,"mapBrowserEvent must originate from a pointer event"),"mouse"==A.pointerType},ph=function(ee){const A=ee.originalEvent;return oe(void 0!==A,"mapBrowserEvent must originate from a pointer event"),A.isPrimary&&0===A.button},ua=class qh extends bc{constructor(A){super({stopDown:y}),this.kinetic_=(A=A||{}).kinetic,this.lastCentroid=null,this.panning_=!1;const B=A.condition?A.condition:hh(od,ph);this.condition_=A.onFocusOnly?hh(bp,B):B,this.noKinetic_=!1}handleDragEvent(A){const B=A.map;this.panning_||(this.panning_=!0,B.getView().beginInteraction());const J=this.targetPointers,se=B.getEventPixel(uh(J));if(J.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(se[0],se[1]),this.lastCentroid){const Se=[this.lastCentroid[0]-se[0],se[1]-this.lastCentroid[1]],Ze=A.map.getView();(function Bn(ee,A){ee[0]*=A,ee[1]*=A})(Se,Ze.getResolution()),xn(Se,Ze.getRotation()),Ze.adjustCenterInternal(Se)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=se,this.lastPointersCount_=J.length,A.originalEvent.preventDefault()}handleUpEvent(A){const B=A.map,J=B.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const se=this.kinetic_.getDistance(),Se=this.kinetic_.getAngle(),Re=J.getCenterInternal(),Ze=B.getPixelFromCoordinateInternal(Re),$e=B.getCoordinateFromPixelInternal([Ze[0]-se*Math.cos(Se),Ze[1]-se*Math.sin(Se)]);J.animateInternal({center:J.getConstrainedCenter($e),duration:500,easing:vs})}return this.panning_&&(this.panning_=!1,J.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(A){if(this.targetPointers.length>0&&this.condition_(A)){const J=A.map.getView();return this.lastCentroid=null,J.getAnimating()&&J.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}},sd=class F0 extends bc{constructor(A){A=A||{},super({stopDown:y}),this.condition_=A.condition?A.condition:L0,this.lastAngle_=void 0,this.duration_=void 0!==A.duration?A.duration:250}handleDragEvent(A){if(!dh(A))return;const B=A.map,J=B.getView();if(J.getConstraints().rotation===Ls)return;const se=B.getSize(),Se=A.pixel,Re=Math.atan2(se[1]/2-Se[1],Se[0]-se[0]/2);void 0!==this.lastAngle_&&J.adjustRotationInternal(-(Re-this.lastAngle_)),this.lastAngle_=Re}handleUpEvent(A){return!dh(A)||(A.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(A){return!!(dh(A)&&xf(A)&&this.condition_(A))&&(A.map.getView().beginInteraction(),this.lastAngle_=void 0,!0)}},B0=class gh extends b{constructor(A){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+A,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const A=this.startPixel_,B=this.endPixel_,J="px",se=this.element_.style;se.left=Math.min(A[0],B[0])+J,se.top=Math.min(A[1],B[1])+J,se.width=Math.abs(B[0]-A[0])+J,se.height=Math.abs(B[1]-A[1])+J}setMap(A){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const B=this.element_.style;B.left="inherit",B.top="inherit",B.width="inherit",B.height="inherit"}this.map_=A,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(A,B){this.startPixel_=A,this.endPixel_=B,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const A=this.startPixel_,B=this.endPixel_,se=[A,[A[0],B[1]],B,[B[0],A[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);se[4]=se[0].slice(),this.geometry_?this.geometry_.setCoordinates([se]):this.geometry_=new Zl([se])}getGeometry(){return this.geometry_}};class bf extends k{constructor(A,B,J){super(A),this.coordinate=B,this.mapBrowserEvent=J}}const j0=class N0 extends bc{constructor(A){super(),this.box_=new B0((A=A||{}).className||"ol-dragbox"),this.minArea_=void 0!==A.minArea?A.minArea:64,A.onBoxEnd&&(this.onBoxEnd=A.onBoxEnd),this.startPixel_=null,this.condition_=A.condition?A.condition:xf,this.boxEndCondition_=A.boxEndCondition?A.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(A,B,J){const se=J[0]-B[0],Se=J[1]-B[1];return se*se+Se*Se>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(A){this.startPixel_&&(this.box_.setPixels(this.startPixel_,A.pixel),this.dispatchEvent(new bf("boxdrag",A.coordinate,A)))}handleUpEvent(A){if(!this.startPixel_)return!1;this.box_.setMap(null);const B=this.boxEndCondition_(A,this.startPixel_,A.pixel);return B&&this.onBoxEnd(A),this.dispatchEvent(new bf(B?"boxend":"boxcancel",A.coordinate,A)),!1}handleDownEvent(A){return!!this.condition_(A)&&(this.startPixel_=A.pixel,this.box_.setMap(A.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new bf("boxstart",A.coordinate,A)),!0)}onBoxEnd(A){}setActive(A){A||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new bf("boxcancel",this.startPixel_,null)),this.startPixel_=null)),super.setActive(A)}},V0=class U0 extends j0{constructor(A){super({condition:(A=A||{}).condition?A.condition:z0,className:A.className||"ol-dragzoom",minArea:A.minArea}),this.duration_=void 0!==A.duration?A.duration:200,this.out_=void 0!==A.out&&A.out}onBoxEnd(A){const J=this.getMap().getView();let se=this.getGeometry();if(this.out_){const Se=J.rotatedExtentForGeometry(se),Re=J.getResolutionForExtentInternal(Se),Ze=J.getResolution()/Re;se=se.clone(),se.scale(Ze*Ze)}J.fitInternal(se,{duration:this.duration_,easing:vs})}},Mp=class kp extends Bc{constructor(A){super(),A=A||{},this.defaultCondition_=function(B){return od(B)&&Tp(B)},this.condition_=void 0!==A.condition?A.condition:this.defaultCondition_,this.duration_=void 0!==A.duration?A.duration:100,this.pixelDelta_=void 0!==A.pixelDelta?A.pixelDelta:128}handleEvent(A){let B=!1;if("keydown"==A.type){const J=A.originalEvent,se=J.key;if(this.condition_(A)&&("ArrowDown"==se||"ArrowLeft"==se||"ArrowRight"==se||"ArrowUp"==se)){const Re=A.map.getView(),Ze=Re.getResolution()*this.pixelDelta_;let $e=0,wt=0;"ArrowDown"==se?wt=-Ze:"ArrowLeft"==se?$e=-Ze:"ArrowRight"==se?$e=Ze:wt=Ze;const bt=[$e,wt];xn(bt,Re.getRotation()),function yp(ee,A,B){const J=ee.getCenterInternal();J&&ee.animateInternal({duration:void 0!==B?B:250,easing:kc,center:ee.getConstrainedCenter([J[0]+A[0],J[1]+A[1]])})}(Re,bt,this.duration_),J.preventDefault(),B=!0}}return!B}},wf=class Sp extends Bc{constructor(A){super(),this.condition_=(A=A||{}).condition?A.condition:function(B){return!function(ee){const A=ee.originalEvent;return Mn?A.metaKey:A.ctrlKey}(B)&&Tp(B)},this.delta_=A.delta?A.delta:1,this.duration_=void 0!==A.duration?A.duration:100}handleEvent(A){let B=!1;if("keydown"==A.type||"keypress"==A.type){const J=A.originalEvent,se=J.key;if(this.condition_(A)&&("+"===se||"-"===se)){const Re="+"===se?this.delta_:-this.delta_;vf(A.map.getView(),Re,void 0,this.duration_),J.preventDefault(),B=!0}}return!B}},ld=class Fu{constructor(A,B,J){this.decay_=A,this.minVelocity_=B,this.delay_=J,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(A,B){this.points_.push(A,B,Date.now())}end(){if(this.points_.length<6)return!1;const A=Date.now()-this.delay_,B=this.points_.length-3;if(this.points_[B+2]<A)return!1;let J=B-3;for(;J>0&&this.points_[J+2]>A;)J-=3;const se=this.points_[B+2]-this.points_[J+2];if(se<1e3/60)return!1;const Se=this.points_[B]-this.points_[J],Re=this.points_[B+1]-this.points_[J+1];return this.angle_=Math.atan2(Re,Se),this.initialVelocity_=Math.sqrt(Se*Se+Re*Re)/se,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}},Cp=class mh extends Bc{constructor(A){super(A=A||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==A.maxDelta?A.maxDelta:1,this.duration_=void 0!==A.duration?A.duration:250,this.timeout_=void 0!==A.timeout?A.timeout:80,this.useAnchor_=void 0===A.useAnchor||A.useAnchor,this.constrainResolution_=void 0!==A.constrainResolution&&A.constrainResolution;const B=A.condition?A.condition:fh;this.condition_=A.onFocusOnly?hh(bp,B):B,this.lastAnchor_=null,this.startTime_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const A=this.getMap();A&&A.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(A){if(!this.condition_(A)||"wheel"!==A.type)return!0;const J=A.map,se=A.originalEvent;let Se;if(se.preventDefault(),this.useAnchor_&&(this.lastAnchor_=A.coordinate),"wheel"==A.type&&(Se=se.deltaY,jt&&se.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(Se/=Ln),se.deltaMode===WheelEvent.DOM_DELTA_LINE&&(Se*=40)),0===Se)return!1;this.lastDelta_=Se;const Re=Date.now();void 0===this.startTime_&&(this.startTime_=Re),(!this.mode_||Re-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(Se)<4?"trackpad":"wheel");const Ze=J.getView();if("trackpad"===this.mode_&&!Ze.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(Ze.getAnimating()&&Ze.cancelAnimations(),Ze.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),Ze.adjustZoom(-Se/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=Re,!1;this.totalDelta_+=Se;const $e=Math.max(this.timeout_-(Re-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,J),$e),!1}handleWheelZoom_(A){const B=A.getView();B.getAnimating()&&B.cancelAnimations();let J=-fe(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(B.getConstrainResolution()||this.constrainResolution_)&&(J=J?J>0?1:-1:0),vf(B,J,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(A){this.useAnchor_=A,A||(this.lastAnchor_=null)}},Ep=class go extends bc{constructor(A){const B=A=A||{};B.stopDown||(B.stopDown=y),super(B),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==A.threshold?A.threshold:.3,this.duration_=void 0!==A.duration?A.duration:250}handleDragEvent(A){let B=0;const J=this.targetPointers[0],se=this.targetPointers[1],Se=Math.atan2(se.clientY-J.clientY,se.clientX-J.clientX);if(void 0!==this.lastAngle_){const $e=Se-this.lastAngle_;this.rotationDelta_+=$e,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),B=$e}this.lastAngle_=Se;const Re=A.map,Ze=Re.getView();Ze.getConstraints().rotation!==Ls&&(this.anchor_=Re.getCoordinateFromPixelInternal(Re.getEventPixel(uh(this.targetPointers))),this.rotating_&&(Re.render(),Ze.adjustRotationInternal(B,this.anchor_)))}handleUpEvent(A){return!(this.targetPointers.length<2&&(A.map.getView().endInteraction(this.duration_),1))}handleDownEvent(A){if(this.targetPointers.length>=2){const B=A.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||B.getView().beginInteraction(),!0}return!1}},Ip=class Ra extends bc{constructor(A){const B=A=A||{};B.stopDown||(B.stopDown=y),super(B),this.anchor_=null,this.duration_=void 0!==A.duration?A.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(A){let B=1;const J=this.targetPointers[0],se=this.targetPointers[1],Se=J.clientX-se.clientX,Re=J.clientY-se.clientY,Ze=Math.sqrt(Se*Se+Re*Re);void 0!==this.lastDistance_&&(B=this.lastDistance_/Ze),this.lastDistance_=Ze;const $e=A.map,wt=$e.getView();1!=B&&(this.lastScaleDelta_=B),this.anchor_=$e.getCoordinateFromPixelInternal($e.getEventPixel(uh(this.targetPointers))),$e.render(),wt.adjustResolutionInternal(B,this.anchor_)}handleUpEvent(A){return!(this.targetPointers.length<2)||(A.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),!1)}handleDownEvent(A){if(this.targetPointers.length>=2){const B=A.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||B.getView().beginInteraction(),!0}return!1}};function Yh(ee){ee=ee||{};const A=new $,B=new ld(-.005,.05,100);return(void 0===ee.altShiftDragRotate||ee.altShiftDragRotate)&&A.push(new sd),(void 0===ee.doubleClickZoom||ee.doubleClickZoom)&&A.push(new yf({delta:ee.zoomDelta,duration:ee.zoomDuration})),(void 0===ee.dragPan||ee.dragPan)&&A.push(new ua({onFocusOnly:ee.onFocusOnly,kinetic:B})),(void 0===ee.pinchRotate||ee.pinchRotate)&&A.push(new Ep),(void 0===ee.pinchZoom||ee.pinchZoom)&&A.push(new Ip({duration:ee.zoomDuration})),(void 0===ee.keyboard||ee.keyboard)&&(A.push(new Mp),A.push(new wf({delta:ee.zoomDelta,duration:ee.zoomDuration}))),(void 0===ee.mouseWheelZoom||ee.mouseWheelZoom)&&A.push(new Cp({onFocusOnly:ee.onFocusOnly,duration:ee.zoomDuration})),(void 0===ee.shiftDragZoom||ee.shiftDragZoom)&&A.push(new V0({duration:ee.zoomDuration})),A}function cd(ee){ee instanceof as?ee.setMapInternal(null):ee instanceof vu&&ee.getLayers().forEach(cd)}function ud(ee,A){if(ee instanceof as)ee.setMapInternal(A);else if(ee instanceof vu){const B=ee.getLayers().getArray();for(let J=0,se=B.length;J<se;++J)ud(B[J],A)}}const lu=class Lp extends W{constructor(A){super();const B=function hd(ee){let A=null;void 0!==ee.keyboardEventTarget&&(A="string"==typeof ee.keyboardEventTarget?document.getElementById(ee.keyboardEventTarget):ee.keyboardEventTarget);const B={},J=ee.layers&&"function"==typeof ee.layers.getLayers?ee.layers:new vu({layers:ee.layers});let se,Se,Re;return B.layergroup=J,B.target=ee.target,B.view=ee.view instanceof ti?ee.view:new ti,void 0!==ee.controls&&(Array.isArray(ee.controls)?se=new $(ee.controls.slice()):(oe("function"==typeof ee.controls.getArray,"Expected `controls` to be an array or an `ol/Collection.js`"),se=ee.controls)),void 0!==ee.interactions&&(Array.isArray(ee.interactions)?Se=new $(ee.interactions.slice()):(oe("function"==typeof ee.interactions.getArray,"Expected `interactions` to be an array or an `ol/Collection.js`"),Se=ee.interactions)),void 0!==ee.overlays?Array.isArray(ee.overlays)?Re=new $(ee.overlays.slice()):(oe("function"==typeof ee.overlays.getArray,"Expected `overlays` to be an array or an `ol/Collection.js`"),Re=ee.overlays):Re=new $,{controls:se,interactions:Se,keyboardEventTarget:A,overlays:Re,values:B}}(A=A||{});this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==A.maxTilesLoading?A.maxTilesLoading:16,this.pixelRatio_=void 0!==A.pixelRatio?A.pixelRatio:Ln,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=A.moveTolerance,this.keyboardEventTarget_=B.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=B.controls||function mp(ee){ee=ee||{};const A=new $;return(void 0===ee.zoom||ee.zoom)&&A.push(new gp(ee.zoomOptions)),(void 0===ee.rotate||ee.rotate)&&A.push(new dp(ee.rotateOptions)),(void 0===ee.attribution||ee.attribution)&&A.push(new fp(ee.attributionOptions)),A}(),this.interactions=B.interactions||Yh({onFocusOnly:!0}),this.overlays_=B.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new C0(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener("layergroup",this.handleLayerGroupChanged_),this.addChangeListener("view",this.handleViewChanged_),this.addChangeListener("size",this.handleSizeChanged_),this.addChangeListener("target",this.handleTargetChanged_),this.setProperties(B.values);const J=this;A.view&&!(A.view instanceof ti)&&A.view.then(function(se){J.setView(new ti(se))}),this.controls.addEventListener("add",se=>{se.element.setMap(this)}),this.controls.addEventListener("remove",se=>{se.element.setMap(null)}),this.interactions.addEventListener("add",se=>{se.element.setMap(this)}),this.interactions.addEventListener("remove",se=>{se.element.setMap(null)}),this.overlays_.addEventListener("add",se=>{this.addOverlayInternal_(se.element)}),this.overlays_.addEventListener("remove",se=>{const Se=se.element.getId();void 0!==Se&&delete this.overlayIdIndex_[Se.toString()],se.element.setMap(null)}),this.controls.forEach(se=>{se.setMap(this)}),this.interactions.forEach(se=>{se.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(A){this.getControls().push(A)}addInteraction(A){this.getInteractions().push(A)}addLayer(A){this.getLayerGroup().getLayers().push(A)}handleLayerAdd_(A){ud(A.layer,this)}addOverlay(A){this.getOverlays().push(A)}addOverlayInternal_(A){const B=A.getId();void 0!==B&&(this.overlayIdIndex_[B.toString()]=A),A.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(A,B,J){if(!this.frameState_||!this.renderer_)return;const se=this.getCoordinateFromPixelInternal(A);return this.renderer_.forEachFeatureAtCoordinate(se,this.frameState_,void 0!==(J=void 0!==J?J:{}).hitTolerance?J.hitTolerance:0,!1!==J.checkWrapped,B,null,void 0!==J.layerFilter?J.layerFilter:u,null)}getFeaturesAtPixel(A,B){const J=[];return this.forEachFeatureAtPixel(A,function(se){J.push(se)},B),J}getAllLayers(){const A=[];return function B(J){J.forEach(function(se){se instanceof vu?B(se.getLayers()):A.push(se)})}(this.getLayers()),A}hasFeatureAtPixel(A,B){if(!this.frameState_||!this.renderer_)return!1;const J=this.getCoordinateFromPixelInternal(A);return this.renderer_.hasFeatureAtCoordinate(J,this.frameState_,void 0!==(B=void 0!==B?B:{}).hitTolerance?B.hitTolerance:0,!1!==B.checkWrapped,void 0!==B.layerFilter?B.layerFilter:u,null)}getEventCoordinate(A){return this.getCoordinateFromPixel(this.getEventPixel(A))}getEventCoordinateInternal(A){return this.getCoordinateFromPixelInternal(this.getEventPixel(A))}getEventPixel(A){const J=this.viewport_.getBoundingClientRect(),se=this.getSize(),Ze="changedTouches"in A?A.changedTouches[0]:A;return[(Ze.clientX-J.left)/(J.width/se[0]),(Ze.clientY-J.top)/(J.height/se[1])]}getTarget(){return this.get("target")}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(A){return Vs(this.getCoordinateFromPixelInternal(A),this.getView().getProjection())}getCoordinateFromPixelInternal(A){const B=this.frameState_;return B?ka(B.pixelToCoordinateTransform,A.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(A){const B=this.overlayIdIndex_[A.toString()];return void 0!==B?B:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get("layergroup")}setLayers(A){const B=this.getLayerGroup();if(A instanceof $)return void B.setLayers(A);const J=B.getLayers();J.clear(),J.extend(A)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const A=this.getLayerGroup().getLayerStatesArray();for(let B=0,J=A.length;B<J;++B){const se=A[B];if(!se.visible)continue;const Se=se.layer.getRenderer();if(Se&&!Se.ready)return!0;const Re=se.layer.getSource();if(Re&&Re.loading)return!0}return!1}getPixelFromCoordinate(A){const B=Is(A,this.getView().getProjection());return this.getPixelFromCoordinateInternal(B)}getPixelFromCoordinateInternal(A){const B=this.frameState_;return B?ka(B.coordinateToPixelTransform,A.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get("size")}getView(){return this.get("view")}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const A=this.getTargetElement();return A?A.ownerDocument:document}getTilePriority(A,B,J,se){return function up(ee,A,B,J,se){if(!ee||!(B in ee.wantedTiles)||!ee.wantedTiles[B][A.getKey()])return mf;const Se=ee.viewState.center,Re=J[0]-Se[0],Ze=J[1]-Se[1];return 65536*Math.log(se)+Math.sqrt(Re*Re+Ze*Ze)/se}(this.frameState_,A,B,J,se)}handleBrowserEvent(A,B){const J=new Pl(B=B||A.type,this,A);this.handleMapBrowserEvent(J)}handleMapBrowserEvent(A){if(!this.frameState_)return;const B=A.originalEvent,J=B.type;if("pointerdown"===J||"wheel"===J||"keydown"===J){const se=this.getOwnerDocument(),Se=this.viewport_.getRootNode?this.viewport_.getRootNode():se,Re=B.target;if(this.overlayContainerStopEvent_.contains(Re)||!(Se===se?se.documentElement:Se).contains(Re))return}if(A.frameState=this.frameState_,!1!==this.dispatchEvent(A)){const se=this.getInteractions().getArray().slice();for(let Se=se.length-1;Se>=0;Se--){const Re=se[Se];if(Re.getMap()===this&&Re.getActive()&&this.getTargetElement()&&(!Re.handleEvent(A)||A.propagationStopped))break}}}handlePostRender(){const A=this.frameState_,B=this.tileQueue_;if(!B.isEmpty()){let se=this.maxTilesLoading_,Se=se;if(A){const Re=A.viewHints;if(Re[0]||Re[1]){const Ze=Date.now()-A.time>8;se=Ze?0:8,Se=Ze?0:2}}B.getTilesLoading()<se&&(B.reprioritize(),B.loadMoreTiles(se,Se))}A&&this.renderer_&&!A.animate&&(!0===this.renderComplete_?(this.hasListener("rendercomplete")&&this.renderer_.dispatchRenderEvent("rendercomplete",A),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new Ko("loadend",this,A)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new Ko("loadstart",this,A))));const J=this.postRenderFunctions_;for(let se=0,Se=J.length;se<Se;++se)J[se](this,A);J.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let J=0,se=this.targetChangeHandlerKeys_.length;J<se;++J)P(this.targetChangeHandlerKeys_[J]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener("contextmenu",this.boundHandleBrowserEvent_),this.viewport_.removeEventListener("wheel",this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Hr(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const J=this.targetElement_.getRootNode();J instanceof ShadowRoot&&this.resizeObserver_.unobserve(J.host),this.setSize(void 0)}const A=this.getTarget(),B="string"==typeof A?document.getElementById(A):A;if(this.targetElement_=B,B){B.appendChild(this.viewport_),this.renderer_||(this.renderer_=new sp(this)),this.mapBrowserEventHandler_=new el(this,this.moveTolerance_);for(const Se in Vi)this.mapBrowserEventHandler_.addEventListener(Vi[Se],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener("contextmenu",this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener("wheel",this.boundHandleBrowserEvent_,!!xr&&{passive:!1});const J=this.keyboardEventTarget_?this.keyboardEventTarget_:B;this.targetChangeHandlerKeys_=[w(J,"keydown",this.handleBrowserEvent,this),w(J,"keypress",this.handleBrowserEvent,this)];const se=B.getRootNode();se instanceof ShadowRoot&&this.resizeObserver_.observe(se.host),this.resizeObserver_.observe(B)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(P(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(P(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const A=this.getView();A&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=w(A,"propertychange",this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=w(A,"change",this.handleViewPropertyChanged_,this),A.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(P),this.layerGroupPropertyListenerKeys_=null);const A=this.getLayerGroup();A&&(this.handleLayerAdd_(new ou("addlayer",A)),this.layerGroupPropertyListenerKeys_=[w(A,"propertychange",this.render,this),w(A,"change",this.render,this),w(A,"addlayer",this.handleLayerAdd_,this),w(A,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const A=this.getLayerGroup().getLayerStatesArray();for(let B=0,J=A.length;B<J;++B){const se=A[B].layer;se.hasRenderer()&&se.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(A){return this.getControls().remove(A)}removeInteraction(A){return this.getInteractions().remove(A)}removeLayer(A){return this.getLayerGroup().getLayers().remove(A)}handleLayerRemove_(A){cd(A.layer)}removeOverlay(A){return this.getOverlays().remove(A)}renderFrame_(A){const B=this.getSize(),J=this.getView(),se=this.frameState_;let Se=null;if(void 0!==B&&eu(B)&&J&&J.isDef()){const Re=J.getHints(this.frameState_?this.frameState_.viewHints:void 0),Ze=J.getState();if(Se={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:lr(Ze.center,Ze.resolution,Ze.rotation,B),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:B,tileQueue:this.tileQueue_,time:A,usedTiles:{},viewState:Ze,viewHints:Re,wantedTiles:{},mapId:U(this),renderTargets:{}},Ze.nextCenter&&Ze.nextResolution){const $e=isNaN(Ze.nextRotation)?Ze.rotation:Ze.nextRotation;Se.nextExtent=lr(Ze.nextCenter,Ze.nextResolution,$e,B)}}this.frameState_=Se,this.renderer_.renderFrame(Se),Se&&(Se.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,Se.postRenderFunctions),se&&(!this.previousExtent_||!fr(this.previousExtent_)&&!qn(Se.extent,this.previousExtent_))&&(this.dispatchEvent(new Ko("movestart",this,se)),this.previousExtent_=an(this.previousExtent_)),this.previousExtent_&&!Se.viewHints[0]&&!Se.viewHints[1]&&!qn(Se.extent,this.previousExtent_)&&(this.dispatchEvent(new Ko("moveend",this,Se)),Mt(Se.extent,this.previousExtent_))),this.dispatchEvent(new Ko("postrender",this,Se)),this.renderComplete_=this.hasListener("loadstart")||this.hasListener("loadend")||this.hasListener("rendercomplete")?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(A){const B=this.getLayerGroup();B&&this.handleLayerRemove_(new ou("removelayer",B)),this.set("layergroup",A)}setSize(A){this.set("size",A)}setTarget(A){this.set("target",A)}setView(A){if(!A||A instanceof ti)return void this.set("view",A);this.set("view",new ti);const B=this;A.then(function(J){B.setView(new ti(J))})}updateSize(){const A=this.getTargetElement();let B;if(A){const se=getComputedStyle(A),Se=A.offsetWidth-parseFloat(se.borderLeftWidth)-parseFloat(se.paddingLeft)-parseFloat(se.paddingRight)-parseFloat(se.borderRightWidth),Re=A.offsetHeight-parseFloat(se.borderTopWidth)-parseFloat(se.paddingTop)-parseFloat(se.paddingBottom)-parseFloat(se.borderBottomWidth);!isNaN(Se)&&!isNaN(Re)&&(B=[Se,Re],!eu(B)&&(A.offsetWidth||A.offsetHeight||A.getClientRects().length)&&ea("No map visible because the map container's width or height are 0."))}const J=this.getSize();B&&(!J||!s(B,J))&&(this.setSize(B),this.updateViewportSize_(B))}updateViewportSize_(A){const B=this.getView();B&&B.setViewportSize(A)}},mo=class Pp extends as{constructor(A){A=A||{};const B=Object.assign({},A);delete B.preload,delete B.useInterimTilesOnError,super(B),this.setPreload(void 0!==A.preload?A.preload:0),this.setUseInterimTilesOnError(void 0===A.useInterimTilesOnError||A.useInterimTilesOnError)}getPreload(){return this.get("preload")}setPreload(A){this.set("preload",A)}getUseInterimTilesOnError(){return this.get("useInterimTilesOnError")}setUseInterimTilesOnError(A){this.set("useInterimTilesOnError",A)}getData(A){return super.getData(A)}},cu=class Zh extends z{constructor(A){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=A}getFeatures(A){return V()}getData(A){return null}prepareFrame(A){return V()}renderFrame(A,B){return V()}loadedTileCallback(A,B,J){A[B]||(A[B]={}),A[B][J.tileCoord.toString()]=J}createLoadedTileFinder(A,B,J){return(se,Se)=>{const Re=this.loadedTileCallback.bind(this,J,se);return A.forEachLoadedTile(B,se,Se,Re)}}forEachFeatureAtCoordinate(A,B,J,se,Se){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(A){const B=A.target;(B.getState()===gi_LOADED||B.getState()===gi_ERROR)&&this.renderIfReadyAndVisible()}loadImage(A){let B=A.getState();return B!=gi_LOADED&&B!=gi_ERROR&&A.addEventListener("change",this.boundHandleImageChange_),B==gi_IDLE&&(A.load(),B=A.getState()),B==gi_LOADED}renderIfReadyAndVisible(){const A=this.getLayer();A&&A.getVisible()&&"ready"===A.getSourceState()&&A.changed()}renderDeferred(A){}disposeInternal(){delete this.layer_,super.disposeInternal()}},Xh=class Tf{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Cr(),{get:(A,B)=>{if("function"==typeof Cr()[B])return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(B),this.pushMethodArgs_},set:(A,B,J)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(B,J),!0)})}pushMethodArgs_=(...A)=>(this.instructions_[this.zIndex+this.offset_].push(A),this);pushFunction(A){this.instructions_[this.zIndex+this.offset_].push(A)}getContext(){return this.context_}draw(A){this.instructions_.forEach(B=>{for(let J=0,se=B.length;J<se;++J){const Se=B[J];if("function"==typeof Se){Se(A);continue}const Re=B[++J];if("function"==typeof A[Se])A[Se](...Re);else{if("function"==typeof Re){A[Se]=Re(A);continue}A[Se]=Re}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}},Af=[];let wc=null;const fd=class Op extends cu{constructor(A){super(A),this.container=null,this.tempTransform=[1,0,0,1,0,0],this.pixelTransform=[1,0,0,1,0,0],this.inversePixelTransform=[1,0,0,1,0,0],this.context=null,this.deferredContext_=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(A,B,J){let se;wc||function uu(){wc=Mr(1,1,void 0,{willReadFrequently:!0})}(),wc.clearRect(0,0,1,1);try{wc.drawImage(A,B,J,1,1,0,0,1,1),se=wc.getImageData(0,0,1,1).data}catch{return wc=null,null}return se}getBackground(A){let J=this.getLayer().getBackground();return"function"==typeof J&&(J=J(A.viewState.resolution)),J||void 0}useContainer(A,B,J){const se=this.getLayer().getClassName();let Se,Re;if(A&&A.className===se&&(!J||A&&A.style.backgroundColor&&s(_t(A.style.backgroundColor),_t(J)))){const Ze=A.firstElementChild;Ze instanceof HTMLCanvasElement&&(Re=Ze.getContext("2d"))}if(Re&&Re.canvas.style.transform===B?(this.container=A,this.context=Re,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){Se=document.createElement("div"),Se.className=se;let Ze=Se.style;Ze.position="absolute",Ze.width="100%",Ze.height="100%",Re=Mr();const $e=Re.canvas;Se.appendChild($e),Ze=$e.style,Ze.position="absolute",Ze.left="0",Ze.transformOrigin="top left",this.container=Se,this.context=Re}!this.containerReused&&J&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=J)}clipUnrotated(A,B,J){const se=En(J),Se=Zn(J),Re=Nn(J),Ze=Gn(J);ka(B.coordinateToPixelTransform,se),ka(B.coordinateToPixelTransform,Se),ka(B.coordinateToPixelTransform,Re),ka(B.coordinateToPixelTransform,Ze);const $e=this.inversePixelTransform;ka($e,se),ka($e,Se),ka($e,Re),ka($e,Ze),A.save(),A.beginPath(),A.moveTo(Math.round(se[0]),Math.round(se[1])),A.lineTo(Math.round(Se[0]),Math.round(Se[1])),A.lineTo(Math.round(Re[0]),Math.round(Re[1])),A.lineTo(Math.round(Ze[0]),Math.round(Ze[1])),A.clip()}prepareContainer(A,B){const J=A.extent,se=A.viewState.resolution,Se=A.viewState.rotation,Re=A.pixelRatio,Ze=Math.round(Kn(J)/se*Re),$e=Math.round(or(J)/se*Re);Uo(this.pixelTransform,A.size[0]/2,A.size[1]/2,1/Re,1/Re,Se,-Ze/2,-$e/2),Cc(this.inversePixelTransform,this.pixelTransform);const wt=function kl(ee){return"matrix("+ee.map((B,J)=>Math.round(B*sl[J])/sl[J]).join(", ")+")"}(this.pixelTransform);if(this.useContainer(B,wt,this.getBackground(A)),!this.containerReused){const bt=this.context.canvas;bt.width!=Ze||bt.height!=$e?(bt.width=Ze,bt.height=$e):this.context.clearRect(0,0,Ze,$e),wt!==bt.style.transform&&(bt.style.transform=wt)}}dispatchRenderEvent_(A,B,J){const se=this.getLayer();if(se.hasListener(A)){const Se=new op(A,this.inversePixelTransform,J,B);se.dispatchEvent(Se)}}preRender(A,B){this.frameState=B,!B.declutter&&this.dispatchRenderEvent_("prerender",A,B)}postRender(A,B){B.declutter||this.dispatchRenderEvent_("postrender",A,B)}renderDeferredInternal(A){}getRenderContext(A){return A.declutter&&!this.deferredContext_&&(this.deferredContext_=new Xh),A.declutter?this.deferredContext_.getContext():this.context}renderDeferred(A){A.declutter&&(this.dispatchRenderEvent_("prerender",this.context,A),A.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(A),this.dispatchRenderEvent_("postrender",this.context,A))}getRenderTransform(A,B,J,se,Se,Re,Ze){const bt=se/B;return Uo(this.tempTransform,Se/2,Re/2,bt,-bt,-J,-A[0]+Ze,-A[1])}disposeInternal(){delete this.frameState,super.disposeInternal()}},bo=class G0 extends f{constructor(A,B,J){super(),J=J||{},this.tileCoord=A,this.state=B,this.interimTile=null,this.key="",this.transition_=void 0===J.transition?250:J.transition,this.transitionStarts_={},this.interpolate=!!J.interpolate}changed(){this.dispatchEvent("change")}release(){3===this.state&&this.setState(4)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let A=this.interimTile;if(!A)return this;do{if(2==A.getState())return this.transition_=0,A;A=A.interimTile}while(A);return this}refreshInterimChain(){let A=this.interimTile;if(!A)return;let B=this;do{if(2==A.getState()){A.interimTile=null;break}1==A.getState()?B=A:0==A.getState()?B.interimTile=A.interimTile:B=A,A=B.interimTile}while(A)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(A){if(3!==this.state&&this.state>A)throw new Error("Tile load sequence violation");this.state=A,this.changed()}load(){V()}getAlpha(A,B){if(!this.transition_)return 1;let J=this.transitionStarts_[A];if(J){if(-1===J)return 1}else J=B,this.transitionStarts_[A]=J;const se=B-J+1e3/60;return se>=this.transition_?1:ki(se/this.transition_)}inTransition(A){return!!this.transition_&&-1!==this.transitionStarts_[A]}endTransition(A){this.transition_&&(this.transitionStarts_[A]=-1)}},M=class _u extends bo{constructor(A,B,J,se,Se,Re){super(A,B,Re),this.crossOrigin_=se,this.src_=J,this.key=J,this.image_=new Image,null!==se&&(this.image_.crossOrigin=se),this.unlisten_=null,this.tileLoadFunction_=Se}getImage(){return this.image_}setImage(A){this.image_=A,this.state=2,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=3,this.unlistenImage_(),this.image_=function Rp(){const ee=Mr(1,1);return ee.fillStyle="rgba(0,0,0,0)",ee.fillRect(0,0,1,1),ee.canvas}(),this.changed()}handleImageLoad_(){const A=this.image_;this.state=A.naturalWidth&&A.naturalHeight?2:4,this.unlistenImage_(),this.changed()}load(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=function di(ee,A,B){const J=ee;let se=!0,Se=!1,Re=!1;const Ze=[E(J,"load",function(){Re=!0,Se||A()})];return J.src&&Xn?(Se=!0,J.decode().then(function(){se&&A()}).catch(function($e){se&&(Re?A():B())})):Ze.push(E(J,"error",B)),function(){se=!1,Ze.forEach(P)}}(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}},Be=class Ee{constructor(A,B,J,se,Se,Re){this.sourceProj_=A,this.targetProj_=B;let Ze={};const $e=Ao(this.targetProj_,this.sourceProj_);this.transformInv_=function(rr){const Ar=rr[0]+"/"+rr[1];return Ze[Ar]||(Ze[Ar]=$e(rr)),Ze[Ar]},this.maxSourceExtent_=se,this.errorThresholdSquared_=Se*Se,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!se&&!!this.sourceProj_.getExtent()&&Kn(se)>=Kn(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Kn(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Kn(this.targetProj_.getExtent()):null;const wt=En(J),bt=Zn(J),Gt=Nn(J),rn=Gn(J),_n=this.transformInv_(wt),Cn=this.transformInv_(bt),jn=this.transformInv_(Gt),Yn=this.transformInv_(rn),er=10+(Re?Math.max(0,Math.ceil(Math.log2(Vn(J)/(Re*Re*256*256)))):0);if(this.addQuad_(wt,bt,Gt,rn,_n,Cn,jn,Yn,er),this.wrapsXInSource_){let rr=1/0;this.triangles_.forEach(function(Ar,Er,Tr){rr=Math.min(rr,Ar.source[0][0],Ar.source[1][0],Ar.source[2][0])}),this.triangles_.forEach(Ar=>{if(Math.max(Ar.source[0][0],Ar.source[1][0],Ar.source[2][0])-rr>this.sourceWorldWidth_/2){const Er=[[Ar.source[0][0],Ar.source[0][1]],[Ar.source[1][0],Ar.source[1][1]],[Ar.source[2][0],Ar.source[2][1]]];Er[0][0]-rr>this.sourceWorldWidth_/2&&(Er[0][0]-=this.sourceWorldWidth_),Er[1][0]-rr>this.sourceWorldWidth_/2&&(Er[1][0]-=this.sourceWorldWidth_),Er[2][0]-rr>this.sourceWorldWidth_/2&&(Er[2][0]-=this.sourceWorldWidth_);const Tr=Math.min(Er[0][0],Er[1][0],Er[2][0]);Math.max(Er[0][0],Er[1][0],Er[2][0])-Tr<this.sourceWorldWidth_/2&&(Ar.source=Er)}})}Ze={}}addTriangle_(A,B,J,se,Se,Re){this.triangles_.push({source:[se,Se,Re],target:[A,B,J]})}addQuad_(A,B,J,se,Se,Re,Ze,$e,wt){const bt=tt([Se,Re,Ze,$e]),Gt=this.sourceWorldWidth_?Kn(bt)/this.sourceWorldWidth_:null,rn=this.sourceWorldWidth_,_n=this.sourceProj_.canWrapX()&&Gt>.5&&Gt<1;let Cn=!1;if(wt>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(Cn=Kn(tt([A,B,J,se]))/this.targetWorldWidth_>.25||Cn),!_n&&this.sourceProj_.isGlobal()&&Gt&&(Cn=Gt>.25||Cn)),!Cn&&this.maxSourceExtent_&&isFinite(bt[0])&&isFinite(bt[1])&&isFinite(bt[2])&&isFinite(bt[3])&&!tr(bt,this.maxSourceExtent_))return;let jn=0;if(!(Cn||isFinite(Se[0])&&isFinite(Se[1])&&isFinite(Re[0])&&isFinite(Re[1])&&isFinite(Ze[0])&&isFinite(Ze[1])&&isFinite($e[0])&&isFinite($e[1])))if(wt>0)Cn=!0;else if(jn=(isFinite(Se[0])&&isFinite(Se[1])?0:8)+(isFinite(Re[0])&&isFinite(Re[1])?0:4)+(isFinite(Ze[0])&&isFinite(Ze[1])?0:2)+(isFinite($e[0])&&isFinite($e[1])?0:1),1!=jn&&2!=jn&&4!=jn&&8!=jn)return;if(wt>0){if(!Cn){const er=this.transformInv_([(A[0]+J[0])/2,(A[1]+J[1])/2]);let rr;rr=_n?(ye(Se[0],rn)+ye(Ze[0],rn))/2-ye(er[0],rn):(Se[0]+Ze[0])/2-er[0];const Ar=(Se[1]+Ze[1])/2-er[1];Cn=rr*rr+Ar*Ar>this.errorThresholdSquared_}if(Cn){if(Math.abs(A[0]-J[0])<=Math.abs(A[1]-J[1])){const Yn=[(B[0]+J[0])/2,(B[1]+J[1])/2],er=this.transformInv_(Yn),rr=[(se[0]+A[0])/2,(se[1]+A[1])/2],Ar=this.transformInv_(rr);this.addQuad_(A,B,Yn,rr,Se,Re,er,Ar,wt-1),this.addQuad_(rr,Yn,J,se,Ar,er,Ze,$e,wt-1)}else{const Yn=[(A[0]+B[0])/2,(A[1]+B[1])/2],er=this.transformInv_(Yn),rr=[(J[0]+se[0])/2,(J[1]+se[1])/2],Ar=this.transformInv_(rr);this.addQuad_(A,Yn,rr,se,Se,er,Ar,$e,wt-1),this.addQuad_(Yn,B,J,rr,er,Re,Ze,Ar,wt-1)}return}}if(_n){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}11&jn||this.addTriangle_(A,J,se,Se,Ze,$e),14&jn||this.addTriangle_(A,J,B,Se,Ze,Re),jn&&(13&jn||this.addTriangle_(B,se,A,Re,$e,Se),7&jn||this.addTriangle_(B,se,J,Re,$e,Ze))}calculateSourceExtent(){const A=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(B,J,se){const Se=B.source;hn(A,Se[0]),hn(A,Se[1]),hn(A,Se[2])}),A}getTriangles(){return this.triangles_}};let Ye;const at=[];function mt(ee,A,B,J,se){ee.beginPath(),ee.moveTo(0,0),ee.lineTo(A,B),ee.lineTo(J,se),ee.closePath(),ee.save(),ee.clip(),ee.fillRect(0,0,Math.max(A,J)+1,Math.max(B,se)),ee.restore()}function Et(ee,A){return Math.abs(ee[4*A]-210)>2||Math.abs(ee[4*A+3]-191.25)>2}function Wt(ee,A,B,J){const se=vo(B,A,ee);let Se=Qa(A,J,B);const Re=A.getMetersPerUnit();void 0!==Re&&(Se*=Re);const Ze=ee.getMetersPerUnit();void 0!==Ze&&(Se/=Ze);const $e=ee.getExtent();if(!$e||Pt($e,se)){const wt=Qa(ee,Se,se)/Se;isFinite(wt)&&wt>0&&(Se/=wt)}return Se}const bn=class vn extends bo{constructor(A,B,J,se,Se,Re,Ze,$e,wt,bt,Gt,rn){super(Se,0,rn),this.renderEdges_=void 0!==Gt&&Gt,this.pixelRatio_=Ze,this.gutter_=$e,this.canvas_=null,this.sourceTileGrid_=B,this.targetTileGrid_=se,this.wrappedTileCoord_=Re||Se,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=A.canWrapX()?A.getExtent():void 0;const _n=se.getTileCoordExtent(this.wrappedTileCoord_),Cn=this.targetTileGrid_.getExtent();let jn=this.sourceTileGrid_.getExtent();const Yn=Cn?fn(_n,Cn):_n;if(0===Vn(Yn))return void(this.state=4);const er=A.getExtent();er&&(jn=jn?fn(jn,er):er);const rr=se.getResolution(this.wrappedTileCoord_[0]),Ar=function en(ee,A,B,J){const se=ir(B);let Se=Wt(ee,A,se,J);return(!isFinite(Se)||Se<=0)&&Dn(B,function(Re){return Se=Wt(ee,A,Re,J),isFinite(Se)&&Se>0}),Se}(A,J,Yn,rr);if(!isFinite(Ar)||Ar<=0)return void(this.state=4);if(this.triangulation_=new Be(A,J,Yn,jn,Ar*(void 0!==bt?bt:.5),rr),0===this.triangulation_.getTriangles().length)return void(this.state=4);this.sourceZ_=B.getZForResolution(Ar);let Tr=this.triangulation_.calculateSourceExtent();if(jn&&(A.canWrapX()?(Tr[1]=fe(Tr[1],jn[1],jn[3]),Tr[3]=fe(Tr[3],jn[1],jn[3])):Tr=fn(Tr,jn)),Vn(Tr)){let Yr=0,Zr=0;A.canWrapX()&&(Yr=Kn(er),Zr=Math.floor((Tr[0]-er[0])/Yr)),un(Tr.slice(),A,!0).forEach(Gr=>{const Ri=B.getTileRangeForExtentAndZ(Gr,this.sourceZ_);for(let Ci=Ri.minX;Ci<=Ri.maxX;Ci++)for(let xi=Ri.minY;xi<=Ri.maxY;xi++){const Bi=wt(this.sourceZ_,Ci,xi,Ze);Bi&&this.sourceTiles_.push({tile:Bi,offset:Zr*Yr})}++Zr}),0===this.sourceTiles_.length&&(this.state=4)}else this.state=4}getImage(){return this.canvas_}reproject_(){const A=[];if(this.sourceTiles_.forEach(B=>{const J=B.tile;if(J&&2==J.getState()){const se=this.sourceTileGrid_.getTileCoordExtent(J.tileCoord);se[0]+=B.offset,se[2]+=B.offset;const Se=this.clipExtent_?.slice();Se&&(Se[0]+=B.offset,Se[2]+=B.offset),A.push({extent:se,clipExtent:Se,image:J.getImage()})}}),this.sourceTiles_.length=0,0===A.length)this.state=3;else{const B=this.wrappedTileCoord_[0],J=this.targetTileGrid_.getTileSize(B),se="number"==typeof J?J:J[0],Se="number"==typeof J?J:J[1],Re=this.targetTileGrid_.getResolution(B),Ze=this.sourceTileGrid_.getResolution(this.sourceZ_),$e=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function Xt(ee,A,B,J,se,Se,Re,Ze,$e,wt,bt,Gt,rn,_n){const Cn=Mr(Math.round(B*ee),Math.round(B*A),at);if(Gt||(Cn.imageSmoothingEnabled=!1),0===$e.length)return Cn.canvas;function jn(Tr){return Math.round(Tr*B)/B}Cn.scale(B,B),Cn.globalCompositeOperation="lighter";const Yn=[1/0,1/0,-1/0,-1/0];let er;$e.forEach(function(Tr,Yr,Zr){!function Sn(ee,A){A[0]<ee[0]&&(ee[0]=A[0]),A[2]>ee[2]&&(ee[2]=A[2]),A[1]<ee[1]&&(ee[1]=A[1]),A[3]>ee[3]&&(ee[3]=A[3])}(Yn,Tr.extent)});const rr=B/J,Ar=(Gt?1:1+Math.pow(2,-24))/rr;if(!rn||1!==$e.length||0!==wt){if(er=Mr(Math.round(Kn(Yn)*rr),Math.round(or(Yn)*rr),at),Gt||(er.imageSmoothingEnabled=!1),se&&_n){const Tr=(se[0]-Yn[0])*rr,Yr=-(se[3]-Yn[3])*rr,Zr=Kn(se)*rr,qr=or(se)*rr;er.rect(Tr,Yr,Zr,qr),er.clip()}$e.forEach(function(Tr,Yr,Zr){if(Tr.image.width>0&&Tr.image.height>0){if(Tr.clipExtent){er.save();const xi=(Tr.clipExtent[0]-Yn[0])*rr,Bi=-(Tr.clipExtent[3]-Yn[3])*rr,Xa=Kn(Tr.clipExtent)*rr,yi=or(Tr.clipExtent)*rr;er.rect(Gt?xi:Math.round(xi),Gt?Bi:Math.round(Bi),Gt?Xa:Math.round(xi+Xa)-Math.round(xi),Gt?yi:Math.round(Bi+yi)-Math.round(Bi)),er.clip()}const qr=(Tr.extent[0]-Yn[0])*rr,Gr=-(Tr.extent[3]-Yn[3])*rr,Ri=Kn(Tr.extent)*rr,Ci=or(Tr.extent)*rr;er.drawImage(Tr.image,wt,wt,Tr.image.width-2*wt,Tr.image.height-2*wt,Gt?qr:Math.round(qr),Gt?Gr:Math.round(Gr),Gt?Ri:Math.round(qr+Ri)-Math.round(qr),Gt?Ci:Math.round(Gr+Ci)-Math.round(Gr)),Tr.clipExtent&&er.restore()}})}const Er=En(Re);return Ze.getTriangles().forEach(function(Tr,Yr,Zr){const qr=Tr.source,Gr=Tr.target;let Ri=qr[0][0],Ci=qr[0][1],xi=qr[1][0],Bi=qr[1][1],Xa=qr[2][0],yi=qr[2][1];const si=jn((Gr[0][0]-Er[0])/Se),Mi=jn(-(Gr[0][1]-Er[1])/Se),Ni=jn((Gr[1][0]-Er[0])/Se),ao=jn(-(Gr[1][1]-Er[1])/Se),Qi=jn((Gr[2][0]-Er[0])/Se),Ta=jn(-(Gr[2][1]-Er[1])/Se),va=Ri,oo=Ci;Ri=0,Ci=0,xi-=va,Bi-=oo,Xa-=va,yi-=oo;const Bl=function we(ee){const A=ee.length;for(let J=0;J<A;J++){let se=J,Se=Math.abs(ee[J][J]);for(let Ze=J+1;Ze<A;Ze++){const $e=Math.abs(ee[Ze][J]);$e>Se&&(Se=$e,se=Ze)}if(0===Se)return null;const Re=ee[se];ee[se]=ee[J],ee[J]=Re;for(let Ze=J+1;Ze<A;Ze++){const $e=-ee[Ze][J]/ee[J][J];for(let wt=J;wt<A+1;wt++)J==wt?ee[Ze][wt]=0:ee[Ze][wt]+=$e*ee[J][wt]}}const B=new Array(A);for(let J=A-1;J>=0;J--){B[J]=ee[J][A]/ee[J][J];for(let se=J-1;se>=0;se--)ee[se][A]-=ee[se][J]*B[J]}return B}([[xi,Bi,0,0,Ni-si],[Xa,yi,0,0,Qi-si],[0,0,xi,Bi,ao-Mi],[0,0,Xa,yi,Ta-Mi]]);if(!Bl)return;if(Cn.save(),Cn.beginPath(),function Lt(){if(void 0===Ye){const ee=Mr(6,6,at);ee.globalCompositeOperation="lighter",ee.fillStyle="rgba(210, 0, 0, 0.75)",mt(ee,4,5,4,0),mt(ee,4,5,0,5);const A=ee.getImageData(0,0,3,3).data;Ye=Et(A,0)||Et(A,4)||Et(A,8),Nr(ee),at.push(ee.canvas)}return Ye}()||!Gt){Cn.moveTo(Ni,ao);const fs=4,fu=si-Ni,rf=Mi-ao;for(let Nl=0;Nl<fs;Nl++)Cn.lineTo(Ni+jn((Nl+1)*fu/fs),ao+jn(Nl*rf/(fs-1))),Nl!=fs-1&&Cn.lineTo(Ni+jn((Nl+1)*fu/fs),ao+jn((Nl+1)*rf/(fs-1)));Cn.lineTo(Qi,Ta)}else Cn.moveTo(Ni,ao),Cn.lineTo(si,Mi),Cn.lineTo(Qi,Ta);let yl;if(Cn.clip(),Cn.transform(Bl[0],Bl[2],Bl[1],Bl[3],si,Mi),Cn.translate(Yn[0]-va,Yn[3]-oo),er)yl=er.canvas,Cn.scale(Ar,-Ar);else{const fs=$e[0],fu=fs.extent;yl=fs.image,Cn.scale(Kn(fu)/yl.width,-or(fu)/yl.height)}Cn.drawImage(yl,0,0),Cn.restore()}),er&&(Nr(er),at.push(er.canvas)),bt&&(Cn.save(),Cn.globalCompositeOperation="source-over",Cn.strokeStyle="black",Cn.lineWidth=1,Ze.getTriangles().forEach(function(Tr,Yr,Zr){const qr=Tr.target,Gr=(qr[0][0]-Er[0])/Se,Ri=-(qr[0][1]-Er[1])/Se,Ci=(qr[1][0]-Er[0])/Se,xi=-(qr[1][1]-Er[1])/Se,Bi=(qr[2][0]-Er[0])/Se,Xa=-(qr[2][1]-Er[1])/Se;Cn.beginPath(),Cn.moveTo(Ci,xi),Cn.lineTo(Gr,Ri),Cn.lineTo(Bi,Xa),Cn.closePath(),Cn.stroke()}),Cn.restore()),Cn.canvas}(se,Se,this.pixelRatio_,Ze,this.sourceTileGrid_.getExtent(),Re,$e,this.triangulation_,A,this.gutter_,this.renderEdges_,this.interpolate),this.state=2}this.changed()}load(){if(0==this.state){this.state=1,this.changed();let A=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:B})=>{const J=B.getState();if(0==J||1==J){A++;const se=w(B,"change",function(Se){const Re=B.getState();(2==Re||3==Re||4==Re)&&(P(se),A--,0===A&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(se)}}),0===A?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:B},J,se){0==B.getState()&&B.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(P),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Nr(this.canvas_.getContext("2d")),at.push(this.canvas_),this.canvas_=null),super.release()}};class zn{constructor(A,B,J,se){this.minX=A,this.maxX=B,this.minY=J,this.maxY=se}contains(A){return this.containsXY(A[1],A[2])}containsTileRange(A){return this.minX<=A.minX&&A.maxX<=this.maxX&&this.minY<=A.minY&&A.maxY<=this.maxY}containsXY(A,B){return this.minX<=A&&A<=this.maxX&&this.minY<=B&&B<=this.maxY}equals(A){return this.minX==A.minX&&this.minY==A.minY&&this.maxX==A.maxX&&this.maxY==A.maxY}extend(A){A.minX<this.minX&&(this.minX=A.minX),A.maxX>this.maxX&&(this.maxX=A.maxX),A.minY<this.minY&&(this.minY=A.minY),A.maxY>this.maxY&&(this.maxY=A.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(A){return this.minX<=A.maxX&&this.maxX>=A.minX&&this.minY<=A.maxY&&this.maxY>=A.minY}}function Rn(ee,A,B,J,se){return void 0!==se?(se.minX=ee,se.maxX=A,se.minY=B,se.maxY=J,se):new zn(ee,A,B,J)}const Jn=zn,cr=class nr extends fd{constructor(A){super(A),this.extentChanged=!0,this.renderedExtent_=null,this.renderedProjection=null,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=[1/0,1/0,-1/0,-1/0],this.tmpTileRange_=new Jn(0,0,0,0)}isDrawableTile(A){const B=this.getLayer(),J=A.getState(),se=B.getUseInterimTilesOnError();return 2==J||4==J||3==J&&!se}getTile(A,B,J,se){const Se=se.pixelRatio,Re=se.viewState.projection,Ze=this.getLayer();let wt=Ze.getSource().getTile(A,B,J,Se,Re);return 3==wt.getState()&&Ze.getUseInterimTilesOnError()&&Ze.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(wt)||(wt=wt.getInterimTile()),wt}getData(A){const B=this.frameState;if(!B)return null;const J=this.getLayer(),se=ka(B.pixelToCoordinateTransform,A.slice()),Se=J.getExtent();if(Se&&!Pt(Se,se))return null;const Re=B.pixelRatio,Ze=B.viewState.projection,$e=B.viewState,wt=J.getRenderSource(),bt=wt.getTileGridForProjection($e.projection),Gt=wt.getTilePixelRatio(B.pixelRatio);for(let rn=bt.getZForResolution($e.resolution);rn>=bt.getMinZoom();--rn){const _n=bt.getTileCoordForCoordAndZ(se,rn),Cn=wt.getTile(rn,_n[1],_n[2],Re,Ze);if(!(Cn instanceof M||Cn instanceof bn)||Cn instanceof bn&&4===Cn.getState())return null;if(2!==Cn.getState())continue;const jn=bt.getOrigin(rn),Yn=wi(bt.getTileSize(rn)),er=bt.getResolution(rn),rr=Math.floor(Gt*((se[0]-jn[0])/er-_n[1]*Yn[0])),Ar=Math.floor(Gt*((jn[1]-se[1])/er-_n[2]*Yn[1])),Er=Math.round(Gt*wt.getGutterForProjection($e.projection));return this.getImageData(Cn.getImage(),rr+Er,Ar+Er)}return null}loadedTileCallback(A,B,J){return!!this.isDrawableTile(J)&&super.loadedTileCallback(A,B,J)}prepareFrame(A){return!!this.getLayer().getSource()}renderFrame(A,B){const J=A.layerStatesArray[A.layerIndex],se=A.viewState,Se=se.projection,Re=se.resolution,Ze=se.center,$e=se.rotation,wt=A.pixelRatio,bt=this.getLayer(),Gt=bt.getSource(),rn=Gt.getRevision(),_n=Gt.getTileGridForProjection(Se),Cn=_n.getZForResolution(Re,Gt.zDirection),jn=_n.getResolution(Cn);let Yn=A.extent;const er=A.viewState.resolution,rr=Gt.getTilePixelRatio(wt);this.prepareContainer(A,B);const Ar=this.context.canvas.width,Er=this.context.canvas.height,Tr=J.extent&&jo(J.extent);Tr&&(Yn=fn(Yn,jo(J.extent)));const Yr=jn*Ar/2/rr,Zr=jn*Er/2/rr,qr=[Ze[0]-Yr,Ze[1]-Zr,Ze[0]+Yr,Ze[1]+Zr],Gr=_n.getTileRangeForExtentAndZ(Yn,Cn),Ri={};Ri[Cn]={};const Ci=this.createLoadedTileFinder(Gt,Se,Ri),xi=this.tmpExtent,Bi=this.tmpTileRange_;this.newTiles_=!1;const Xa=$e?vr(se.center,er,$e,A.size):void 0;for(let Ta=Gr.minX;Ta<=Gr.maxX;++Ta)for(let va=Gr.minY;va<=Gr.maxY;++va){if($e&&!_n.tileCoordIntersectsViewport([Cn,Ta,va],Xa))continue;const oo=this.getTile(Cn,Ta,va,A);if(this.isDrawableTile(oo)){const yl=U(this);if(2==oo.getState()){Ri[Cn][oo.tileCoord.toString()]=oo;let fs=oo.inTransition(yl);fs&&1!==J.opacity&&(oo.endTransition(yl),fs=!1),!this.newTiles_&&(fs||!this.renderedTiles.includes(oo))&&(this.newTiles_=!0)}if(1===oo.getAlpha(yl,A.time))continue}const Jr=_n.getTileCoordChildTileRange(oo.tileCoord,Bi,xi);let Bl=!1;Jr&&(Bl=Ci(Cn+1,Jr)),Bl||_n.forEachTileCoordParentTileRange(oo.tileCoord,Ci,Bi,xi)}const yi=jn/Re*wt/rr,si=this.getRenderContext(A);Uo(this.tempTransform,Ar/2,Er/2,yi,yi,0,-Ar/2,-Er/2),Tr&&this.clipUnrotated(si,A,Tr),Gt.getInterpolate()||(si.imageSmoothingEnabled=!1),this.preRender(si,A),this.renderedTiles.length=0;let Ni,ao,Qi,Mi=Object.keys(Ri).map(Number);Mi.sort(l),1!==J.opacity||this.containerReused&&!Gt.getOpaque(A.viewState.projection)?(Ni=[],ao=[]):Mi=Mi.reverse();for(let Ta=Mi.length-1;Ta>=0;--Ta){const va=Mi[Ta],oo=Gt.getTilePixelSize(va,wt,Se),Bl=_n.getResolution(va)/jn,yl=oo[0]*Bl*yi,fs=oo[1]*Bl*yi,fu=_n.getTileCoordForCoordAndZ(En(qr),va),rf=_n.getTileCoordExtent(fu),Nl=ka(this.tempTransform,[rr*(rf[0]-qr[0])/jn,rr*(qr[3]-rf[3])/jn]),$p=rr*Gt.getGutterForProjection(Se),Rd=Ri[va];for(const ig in Rd){const Ah=Rd[ig],Dd=Ah.tileCoord,kh=fu[1]-Dd[1],zd=Math.round(Nl[0]-(kh-1)*yl),Qp=fu[2]-Dd[2],ag=Math.round(Nl[1]-(Qp-1)*fs),du=Math.round(Nl[0]-kh*yl),qc=Math.round(Nl[1]-Qp*fs),Hu=zd-du,af=ag-qc,of=Cn===va,Mh=of&&1!==Ah.getAlpha(U(this),A.time);let sf=!1;if(!Mh)if(Ni){Qi=[du,qc,du+Hu,qc,du+Hu,qc+af,du,qc+af];for(let Sh=0,Uf=Ni.length;Sh<Uf;++Sh)if(Cn!==va&&va<ao[Sh]){const il=Ni[Sh];tr([du,qc,du+Hu,qc+af],[il[0],il[3],il[4],il[7]])&&(sf||(si.save(),sf=!0),si.beginPath(),si.moveTo(Qi[0],Qi[1]),si.lineTo(Qi[2],Qi[3]),si.lineTo(Qi[4],Qi[5]),si.lineTo(Qi[6],Qi[7]),si.moveTo(il[6],il[7]),si.lineTo(il[4],il[5]),si.lineTo(il[2],il[3]),si.lineTo(il[0],il[1]),si.clip())}Ni.push(Qi),ao.push(va)}else si.clearRect(du,qc,Hu,af);this.drawTileImage(Ah,A,du,qc,Hu,af,$p,of),Ni&&!Mh?(sf&&si.restore(),this.renderedTiles.unshift(Ah)):this.renderedTiles.push(Ah),this.updateUsedTiles(A.usedTiles,Gt,Ah)}}return this.renderedRevision=rn,this.renderedResolution=jn,this.extentChanged=!this.renderedExtent_||!qn(this.renderedExtent_,qr),this.renderedExtent_=qr,this.renderedPixelRatio=wt,this.renderedProjection=Se,this.manageTilePyramid(A,Gt,_n,wt,Se,Yn,Cn,bt.getPreload()),this.scheduleExpireCache(A,Gt),this.postRender(this.context,A),J.extent&&si.restore(),si.imageSmoothingEnabled=!0,this.container}drawTileImage(A,B,J,se,Se,Re,Ze,$e){const wt=this.getTileImage(A);if(!wt)return;const bt=this.getRenderContext(B),Gt=U(this),rn=B.layerStatesArray[B.layerIndex],_n=rn.opacity*($e?A.getAlpha(Gt,B.time):1),Cn=_n!==bt.globalAlpha;Cn&&(bt.save(),bt.globalAlpha=_n),bt.drawImage(wt,Ze,Ze,wt.width-2*Ze,wt.height-2*Ze,J,se,Se,Re),Cn&&bt.restore(),_n!==rn.opacity?B.animate=!0:$e&&A.endTransition(Gt)}getImage(){const A=this.context;return A?A.canvas:null}getTileImage(A){return A.getImage()}scheduleExpireCache(A,B){if(B.canExpireCache()){const J=function(se,Se,Re){const Ze=U(se);Ze in Re.usedTiles&&se.expireCache(Re.viewState.projection,Re.usedTiles[Ze])}.bind(null,B);A.postRenderFunctions.push(J)}}updateUsedTiles(A,B,J){const se=U(B);se in A||(A[se]={}),A[se][J.getKey()]=!0}manageTilePyramid(A,B,J,se,Se,Re,Ze,$e,wt){const bt=U(B);bt in A.wantedTiles||(A.wantedTiles[bt]={});const Gt=A.wantedTiles[bt],rn=A.tileQueue,_n=J.getMinZoom(),Cn=A.viewState.rotation,jn=Cn?vr(A.viewState.center,A.viewState.resolution,Cn,A.size):void 0;let er,rr,Ar,Er,Tr,Yr,Yn=0;for(Yr=_n;Yr<=Ze;++Yr)for(rr=J.getTileRangeForExtentAndZ(Re,Yr,rr),Ar=J.getResolution(Yr),Er=rr.minX;Er<=rr.maxX;++Er)for(Tr=rr.minY;Tr<=rr.maxY;++Tr)Cn&&!J.tileCoordIntersectsViewport([Yr,Er,Tr],jn)||(Ze-Yr<=$e?(++Yn,er=B.getTile(Yr,Er,Tr,se,Se),0==er.getState()&&(Gt[er.getKey()]=!0,rn.isKeyQueued(er.getKey())||rn.enqueue([er,bt,J.getTileCoordCenter(er.tileCoord),Ar])),void 0!==wt&&wt(er)):B.useTile(Yr,Er,Tr,Se));B.updateCacheSize(Yn,Se)}},wr=class dr extends mo{constructor(A){super(A)}createRenderer(){return new cr(this)}},Rr=class jr{constructor(A){this.highWaterMark=void 0!==A?A:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(A){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(A){return this.entries_.hasOwnProperty(A)}forEach(A){let B=this.oldest_;for(;B;)A(B.value_,B.key_,this),B=B.newer}get(A,B){const J=this.entries_[A];return oe(void 0!==J,"Tried to get a value for a key that does not exist in the cache"),J===this.newest_||(J===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(J.newer.older=J.older,J.older.newer=J.newer),J.newer=null,J.older=this.newest_,this.newest_.newer=J,this.newest_=J),J.value_}remove(A){const B=this.entries_[A];return oe(void 0!==B,"Tried to get a value for a key that does not exist in the cache"),B===this.newest_?(this.newest_=B.older,this.newest_&&(this.newest_.newer=null)):B===this.oldest_?(this.oldest_=B.newer,this.oldest_&&(this.oldest_.older=null)):(B.newer.older=B.older,B.older.newer=B.newer),delete this.entries_[A],--this.count_,B.value_}getCount(){return this.count_}getKeys(){const A=new Array(this.count_);let J,B=0;for(J=this.newest_;J;J=J.older)A[B++]=J.key_;return A}getValues(){const A=new Array(this.count_);let J,B=0;for(J=this.newest_;J;J=J.older)A[B++]=J.value_;return A}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(A){return this.entries_[A]?.value_}pop(){const A=this.oldest_;return delete this.entries_[A.key_],A.newer&&(A.newer.older=null),this.oldest_=A.newer,this.oldest_||(this.newest_=null),--this.count_,A.value_}replace(A,B){this.get(A),this.entries_[A].value_=B}set(A,B){oe(!(A in this.entries_),"Tried to set a value for a key that is used already");const J={key_:A,newer:null,older:this.newest_,value_:B};this.newest_?this.newest_.newer=J:this.oldest_=J,this.newest_=J,this.entries_[A]=J,++this.count_}setSize(A){this.highWaterMark=A}};function Vr(ee,A,B,J){return void 0!==J?(J[0]=ee,J[1]=A,J[2]=B,J):[ee,A,B]}function Wr(ee,A,B){return ee+"/"+A+"/"+B}function hi(ee){return Wr(ee[0],ee[1],ee[2])}const _i=class Fi extends Rr{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(A){for(;this.canExpireCache()&&!(this.peekLast().getKey()in A);)this.pop().release()}pruneExceptNewestZ(){if(0===this.getCount())return;const J=function fi(ee){return ee.split("/").map(Number)}(this.peekFirstKey())[0];this.forEach(se=>{se.tileCoord[0]!==J&&(this.remove(hi(se.tileCoord)),se.release())})}};function oa(ee){return ee?Array.isArray(ee)?function(A){return ee}:"function"==typeof ee?ee:function(A){return[ee]}:null}const _a=class ci extends W{constructor(A){super(),this.projection=Ia(A.projection),this.attributions_=oa(A.attributions),this.attributionsCollapsible_=void 0===A.attributionsCollapsible||A.attributionsCollapsible,this.loading=!1,this.state_=void 0!==A.state?A.state:"ready",this.wrapX_=void 0!==A.wrapX&&A.wrapX,this.interpolate_=!!A.interpolate,this.viewResolver=null,this.viewRejector=null;const B=this;this.viewPromise_=new Promise(function(J,se){B.viewResolver=J,B.viewRejector=se})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(A){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(A){this.attributions_=oa(A),this.changed()}setState(A){this.state_=A,this.changed()}},sa=[0,0,0],no=class ba{constructor(A){let B;if(this.minZoom=void 0!==A.minZoom?A.minZoom:0,this.resolutions_=A.resolutions,oe(function h(ee,A,B){const J=A||l;return ee.every(function(se,Se){if(0===Se)return!0;const Re=J(ee[Se-1],se);return!(Re>0||B&&0===Re)})}(this.resolutions_,(se,Se)=>Se-se,!0),"`resolutions` must be sorted in descending order"),!A.origins)for(let se=0,Se=this.resolutions_.length-1;se<Se;++se)if(B){if(this.resolutions_[se]/this.resolutions_[se+1]!==B){B=void 0;break}}else B=this.resolutions_[se]/this.resolutions_[se+1];this.zoomFactor_=B,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==A.origin?A.origin:null,this.origins_=null,void 0!==A.origins&&(this.origins_=A.origins,oe(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const J=A.extent;void 0!==J&&!this.origin_&&!this.origins_&&(this.origin_=En(J)),oe(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,void 0!==A.tileSizes&&(this.tileSizes_=A.tileSizes,oe(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=void 0!==A.tileSize?A.tileSize:this.tileSizes_?null:Ne,oe(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=void 0!==J?J:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==A.sizes?this.fullTileRanges_=A.sizes.map((se,Se)=>{const Re=new Jn(Math.min(0,se[0]),Math.max(se[0]-1,-1),Math.min(0,se[1]),Math.max(se[1]-1,-1));if(J){const Ze=this.getTileRangeForExtentAndZ(J,Se);Re.minX=Math.max(Ze.minX,Re.minX),Re.maxX=Math.min(Ze.maxX,Re.maxX),Re.minY=Math.max(Ze.minY,Re.minY),Re.maxY=Math.min(Ze.maxY,Re.maxY)}return Re}):J&&this.calculateTileRanges_(J)}forEachTileCoord(A,B,J){const se=this.getTileRangeForExtentAndZ(A,B);for(let Se=se.minX,Re=se.maxX;Se<=Re;++Se)for(let Ze=se.minY,$e=se.maxY;Ze<=$e;++Ze)J([B,Se,Ze])}forEachTileCoordParentTileRange(A,B,J,se){let Se,Re,Ze,$e=null,wt=A[0]-1;for(2===this.zoomFactor_?(Re=A[1],Ze=A[2]):$e=this.getTileCoordExtent(A,se);wt>=this.minZoom;){if(void 0!==Re&&void 0!==Ze?(Re=Math.floor(Re/2),Ze=Math.floor(Ze/2),Se=Rn(Re,Re,Ze,Ze,J)):Se=this.getTileRangeForExtentAndZ($e,wt,J),B(wt,Se))return!0;--wt}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(A){return this.origin_?this.origin_:this.origins_[A]}getResolution(A){return this.resolutions_[A]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(A,B,J){if(A[0]<this.maxZoom){if(2===this.zoomFactor_){const Se=2*A[1],Re=2*A[2];return Rn(Se,Se+1,Re,Re+1,B)}const se=this.getTileCoordExtent(A,J||this.tmpExtent_);return this.getTileRangeForExtentAndZ(se,A[0]+1,B)}return null}getTileRangeForTileCoordAndZ(A,B,J){if(B>this.maxZoom||B<this.minZoom)return null;const se=A[0],Se=A[1],Re=A[2];if(B===se)return Rn(Se,Re,Se,Re,J);if(this.zoomFactor_){const $e=Math.pow(this.zoomFactor_,B-se),wt=Math.floor(Se*$e),bt=Math.floor(Re*$e);return B<se?Rn(wt,wt,bt,bt,J):Rn(wt,Math.floor($e*(Se+1))-1,bt,Math.floor($e*(Re+1))-1,J)}const Ze=this.getTileCoordExtent(A,this.tmpExtent_);return this.getTileRangeForExtentAndZ(Ze,B,J)}getTileRangeForExtentAndZ(A,B,J){this.getTileCoordForXYAndZ_(A[0],A[3],B,!1,sa);const se=sa[1],Se=sa[2];return this.getTileCoordForXYAndZ_(A[2],A[1],B,!0,sa),Rn(se,sa[1],Se,sa[2],J)}getTileCoordCenter(A){const B=this.getOrigin(A[0]),J=this.getResolution(A[0]),se=wi(this.getTileSize(A[0]),this.tmpSize_);return[B[0]+(A[1]+.5)*se[0]*J,B[1]-(A[2]+.5)*se[1]*J]}getTileCoordExtent(A,B){const J=this.getOrigin(A[0]),se=this.getResolution(A[0]),Se=wi(this.getTileSize(A[0]),this.tmpSize_),Re=J[0]+A[1]*Se[0]*se,Ze=J[1]-(A[2]+1)*Se[1]*se;return qt(Re,Ze,Re+Se[0]*se,Ze+Se[1]*se,B)}getTileCoordForCoordAndResolution(A,B,J){return this.getTileCoordForXYAndResolution_(A[0],A[1],B,!1,J)}getTileCoordForXYAndResolution_(A,B,J,se,Se){const Re=this.getZForResolution(J),Ze=J/this.getResolution(Re),$e=this.getOrigin(Re),wt=wi(this.getTileSize(Re),this.tmpSize_);let bt=Ze*(A-$e[0])/J/wt[0],Gt=Ze*($e[1]-B)/J/wt[1];return se?(bt=he(bt,5)-1,Gt=he(Gt,5)-1):(bt=be(bt,5),Gt=be(Gt,5)),Vr(Re,bt,Gt,Se)}getTileCoordForXYAndZ_(A,B,J,se,Se){const Re=this.getOrigin(J),Ze=this.getResolution(J),$e=wi(this.getTileSize(J),this.tmpSize_);let wt=(A-Re[0])/Ze/$e[0],bt=(Re[1]-B)/Ze/$e[1];return se?(wt=he(wt,5)-1,bt=he(bt,5)-1):(wt=be(wt,5),bt=be(bt,5)),Vr(J,wt,bt,Se)}getTileCoordForCoordAndZ(A,B,J){return this.getTileCoordForXYAndZ_(A[0],A[1],B,!1,J)}getTileCoordResolution(A){return this.resolutions_[A[0]]}getTileSize(A){return this.tileSize_?this.tileSize_:this.tileSizes_[A]}getFullTileRange(A){return this.fullTileRanges_?this.fullTileRanges_[A]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,A):null}getZForResolution(A,B){return fe(i(this.resolutions_,A,B||0),this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(A,B){return ho(B,0,B.length,2,this.getTileCoordExtent(A))}calculateTileRanges_(A){const B=this.resolutions_.length,J=new Array(B);for(let se=this.minZoom;se<B;++se)J[se]=this.getTileRangeForExtentAndZ(A,se);this.fullTileRanges_=J}};function Da(ee){let A=ee.getDefaultTileGrid();return A||(A=function zo(ee,A,B,J){return function Jo(ee,A,B,J){J=void 0!==J?J:"top-left";const se=ls(ee,A,B);return new no({extent:ee,origin:$n(ee,J),resolutions:se,tileSize:B})}(ro(ee),A,B,J)}(ee),ee.setDefaultTileGrid(A)),A}function ls(ee,A,B,J){A=void 0!==A?A:Oe,B=wi(void 0!==B?B:Ne);const se=or(ee),Se=Kn(ee);J=J>0?J:Math.max(Se/B[0],se/B[1]);const Re=A+1,Ze=new Array(Re);for(let $e=0;$e<Re;++$e)Ze[$e]=J/Math.pow(2,$e);return Ze}function ro(ee){let A=(ee=Ia(ee)).getExtent();if(!A){const B=180*Me.degrees/ee.getMetersPerUnit();A=qt(-B,-B,B,B)}return A}class Co extends k{constructor(A,B){super(A),this.tile=B}}const wo=class Fo extends _a{constructor(A){super({attributions:A.attributions,attributionsCollapsible:A.attributionsCollapsible,projection:A.projection,state:A.state,wrapX:A.wrapX,interpolate:A.interpolate}),this.opaque_=void 0!==A.opaque&&A.opaque,this.tilePixelRatio_=void 0!==A.tilePixelRatio?A.tilePixelRatio:1,this.tileGrid=void 0!==A.tileGrid?A.tileGrid:null,this.tileGrid&&wi(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tileCache=new _i(A.cacheSize||0),this.tmpSize=[0,0],this.key_=A.key||"",this.tileOptions={transition:A.transition,interpolate:A.interpolate},this.zDirection=A.zDirection?A.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(A,B){const J=this.getTileCacheForProjection(A);J&&J.expireCache(B)}forEachLoadedTile(A,B,J,se){const Se=this.getTileCacheForProjection(A);if(!Se)return!1;let Ze,$e,wt,Re=!0;for(let bt=J.minX;bt<=J.maxX;++bt)for(let Gt=J.minY;Gt<=J.maxY;++Gt)$e=Wr(B,bt,Gt),wt=!1,Se.containsKey($e)&&(Ze=Se.get($e),wt=2===Ze.getState(),wt&&(wt=!1!==se(Ze))),wt||(Re=!1);return Re}getGutterForProjection(A){return 0}getKey(){return this.key_}setKey(A){this.key_!==A&&(this.key_=A,this.changed())}getOpaque(A){return this.opaque_}getResolutions(A){const B=A?this.getTileGridForProjection(A):this.tileGrid;return B?B.getResolutions():null}getTile(A,B,J,se,Se){return V()}getTileGrid(){return this.tileGrid}getTileGridForProjection(A){return this.tileGrid?this.tileGrid:Da(A)}getTileCacheForProjection(A){const B=this.getProjection();return oe(null===B||Io(B,A),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(A){return this.tilePixelRatio_}getTilePixelSize(A,B,J){const se=this.getTileGridForProjection(J),Se=this.getTilePixelRatio(B),Re=wi(se.getTileSize(A),this.tmpSize);return 1==Se?Re:function Zo(ee,A,B){return void 0===B&&(B=[0,0]),B[0]=ee[0]*A+.5|0,B[1]=ee[1]*A+.5|0,B}(Re,Se,this.tmpSize)}getTileCoordForTileUrlFunction(A,B){B=void 0!==B?B:this.getProjection();const J=this.getTileGridForProjection(B);return this.getWrapX()&&B.isGlobal()&&(A=function So(ee,A,B){const J=A[0],se=ee.getTileCoordCenter(A),Se=ro(B);if(!Pt(Se,se)){const Re=Kn(Se),Ze=Math.ceil((Se[0]-se[0])/Re);return se[0]+=Re*Ze,ee.getTileCoordForCoordAndZ(se,J)}return A}(J,A,B)),function ni(ee,A){const B=ee[0],J=ee[1],se=ee[2];if(A.getMinZoom()>B||B>A.getMaxZoom())return!1;const Se=A.getFullTileRange(B);return!Se||Se.containsXY(J,se)}(A,J)?A:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(A,B){const J=this.getTileCacheForProjection(B);A>J.highWaterMark&&(J.highWaterMark=A)}useTile(A,B,J,se){}};function Ai(ee,A){const B=/\{z\}/g,J=/\{x\}/g,se=/\{y\}/g,Se=/\{-y\}/g;return function(Re,Ze,$e){if(Re)return ee.replace(B,Re[0].toString()).replace(J,Re[1].toString()).replace(se,Re[2].toString()).replace(Se,function(){const bt=A.getFullTileRange(Re[0]);if(!bt)throw new Error("The {-y} placeholder requires a tile grid with extent");return(bt.getHeight()-Re[2]-1).toString()})}}class Ca extends wo{constructor(A){super({attributions:A.attributions,cacheSize:A.cacheSize,opaque:A.opaque,projection:A.projection,state:A.state,tileGrid:A.tileGrid,tilePixelRatio:A.tilePixelRatio,wrapX:A.wrapX,transition:A.transition,interpolate:A.interpolate,key:A.key,attributionsCollapsible:A.attributionsCollapsible,zDirection:A.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Ca.prototype.tileUrlFunction,this.tileLoadFunction=A.tileLoadFunction,A.tileUrlFunction&&(this.tileUrlFunction=A.tileUrlFunction),this.urls=null,A.urls?this.setUrls(A.urls):A.url&&this.setUrl(A.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(A){const B=A.target,J=U(B),se=B.getState();let Se;1==se?(this.tileLoadingKeys_[J]=!0,Se="tileloadstart"):J in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[J],Se=3==se?"tileloaderror":2==se?"tileloadend":void 0),null!=Se&&this.dispatchEvent(new Co(Se,B))}setTileLoadFunction(A){this.tileCache.clear(),this.tileLoadFunction=A,this.changed()}setTileUrlFunction(A,B){this.tileUrlFunction=A,this.tileCache.pruneExceptNewestZ(),typeof B<"u"?this.setKey(B):this.changed()}setUrl(A){const B=function Va(ee){const A=[];let B=/\{([a-z])-([a-z])\}/.exec(ee);if(B){const J=B[1].charCodeAt(0),se=B[2].charCodeAt(0);let Se;for(Se=J;Se<=se;++Se)A.push(ee.replace(B[0],String.fromCharCode(Se)));return A}if(B=/\{(\d+)-(\d+)\}/.exec(ee),B){const J=parseInt(B[2],10);for(let se=parseInt(B[1],10);se<=J;se++)A.push(ee.replace(B[0],se.toString()));return A}return A.push(ee),A}(A);this.urls=B,this.setUrls(B)}setUrls(A){this.urls=A;const B=A.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function Gi(ee,A){const B=ee.length,J=new Array(B);for(let se=0;se<B;++se)J[se]=Ai(ee[se],A);return function Ya(ee){return 1===ee.length?ee[0]:function(A,B,J){if(!A)return;const se=function oi(ee){return(ee[1]<<ee[0])+ee[2]}(A),Se=ye(se,ee.length);return ee[Se](A,B,J)}}(J)}(A,this.tileGrid),B):this.setKey(B)}tileUrlFunction(A,B,J){}useTile(A,B,J){const se=Wr(A,B,J);this.tileCache.containsKey(se)&&this.tileCache.get(se)}}const $i=Ca;function Ss(ee,A){ee.getImage().src=A}const tl=class Za extends $i{constructor(A){super({attributions:A.attributions,cacheSize:A.cacheSize,opaque:A.opaque,projection:A.projection,state:A.state,tileGrid:A.tileGrid,tileLoadFunction:A.tileLoadFunction?A.tileLoadFunction:Ss,tilePixelRatio:A.tilePixelRatio,tileUrlFunction:A.tileUrlFunction,url:A.url,urls:A.urls,wrapX:A.wrapX,transition:A.transition,interpolate:void 0===A.interpolate||A.interpolate,key:A.key,attributionsCollapsible:A.attributionsCollapsible,zDirection:A.zDirection}),this.crossOrigin=void 0!==A.crossOrigin?A.crossOrigin:null,this.tileClass=void 0!==A.tileClass?A.tileClass:M,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=A.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const A in this.tileCacheForProjection)if(this.tileCacheForProjection[A].canExpireCache())return!0;return!1}expireCache(A,B){const J=this.getTileCacheForProjection(A);this.tileCache.expireCache(this.tileCache==J?B:{});for(const se in this.tileCacheForProjection){const Se=this.tileCacheForProjection[se];Se.expireCache(Se==J?B:{})}}getGutterForProjection(A){return this.getProjection()&&A&&!Io(this.getProjection(),A)?0:this.getGutter()}getGutter(){return 0}getKey(){let A=super.getKey();return this.getInterpolate()||(A+=":disable-interpolation"),A}getOpaque(A){return!(this.getProjection()&&A&&!Io(this.getProjection(),A))&&super.getOpaque(A)}getTileGridForProjection(A){const B=this.getProjection();if(this.tileGrid&&(!B||Io(B,A)))return this.tileGrid;const J=U(A);return J in this.tileGridForProjection||(this.tileGridForProjection[J]=Da(A)),this.tileGridForProjection[J]}getTileCacheForProjection(A){const B=this.getProjection();if(!B||Io(B,A))return this.tileCache;const J=U(A);return J in this.tileCacheForProjection||(this.tileCacheForProjection[J]=new _i(this.tileCache.highWaterMark)),this.tileCacheForProjection[J]}createTile_(A,B,J,se,Se,Re){const Ze=[A,B,J],$e=this.getTileCoordForTileUrlFunction(Ze,Se),wt=$e?this.tileUrlFunction($e,se,Se):void 0,bt=new this.tileClass(Ze,void 0!==wt?0:4,void 0!==wt?wt:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return bt.key=Re,bt.addEventListener("change",this.handleTileChange.bind(this)),bt}getTile(A,B,J,se,Se){const Re=this.getProjection();if(!Re||!Se||Io(Re,Se))return this.getTileInternal(A,B,J,se,Re||Se);const Ze=this.getTileCacheForProjection(Se),$e=[A,B,J];let wt;const bt=hi($e);Ze.containsKey(bt)&&(wt=Ze.get(bt));const Gt=this.getKey();if(wt&&wt.key==Gt)return wt;const rn=this.getTileGridForProjection(Re),_n=this.getTileGridForProjection(Se),Cn=this.getTileCoordForTileUrlFunction($e,Se),jn=new bn(Re,rn,Se,_n,$e,Cn,this.getTilePixelRatio(se),this.getGutter(),(Yn,er,rr,Ar)=>this.getTileInternal(Yn,er,rr,Ar,Re),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return jn.key=Gt,wt?(jn.interimTile=wt,jn.refreshInterimChain(),Ze.replace(bt,jn)):Ze.set(bt,jn),jn}getTileInternal(A,B,J,se,Se){let Re=null;const Ze=Wr(A,B,J),$e=this.getKey();if(this.tileCache.containsKey(Ze)){if(Re=this.tileCache.get(Ze),Re.key!=$e){const wt=Re;Re=this.createTile_(A,B,J,se,Se,$e),Re.interimTile=0==wt.getState()?wt.interimTile:wt,Re.refreshInterimChain(),this.tileCache.replace(Ze,Re)}}else Re=this.createTile_(A,B,J,se,Se,$e),this.tileCache.set(Ze,Re);return Re}setRenderReprojectionEdges(A){if(this.renderReprojectionEdges_!=A){this.renderReprojectionEdges_=A;for(const B in this.tileCacheForProjection)this.tileCacheForProjection[B].clear();this.changed()}}setTileGridForProjection(A,B){const J=Ia(A);if(J){const se=U(J);se in this.tileGridForProjection||(this.tileGridForProjection[se]=B)}}clear(){super.clear();for(const A in this.tileCacheForProjection)this.tileCacheForProjection[A].clear()}},Ol=class cs extends tl{constructor(A){const B=void 0!==(A=A||{}).projection?A.projection:"EPSG:3857",J=void 0!==A.tileGrid?A.tileGrid:function Do(ee){const A=ee||{},B=A.extent||Ia("EPSG:3857").getExtent(),J={extent:B,minZoom:A.minZoom,tileSize:A.tileSize,resolutions:ls(B,A.maxZoom,A.tileSize,A.maxResolution)};return new no(J)}({extent:ro(B),maxResolution:A.maxResolution,maxZoom:A.maxZoom,minZoom:A.minZoom,tileSize:A.tileSize});super({attributions:A.attributions,cacheSize:A.cacheSize,crossOrigin:A.crossOrigin,interpolate:A.interpolate,opaque:A.opaque,projection:B,reprojectionErrorThreshold:A.reprojectionErrorThreshold,tileGrid:J,tileLoadFunction:A.tileLoadFunction,tilePixelRatio:A.tilePixelRatio,tileUrlFunction:A.tileUrlFunction,url:A.url,urls:A.urls,wrapX:void 0===A.wrapX||A.wrapX,transition:A.transition,attributionsCollapsible:A.attributionsCollapsible,zDirection:A.zDirection}),this.gutter_=void 0!==A.gutter?A.gutter:0}getGutter(){return this.gutter_}},Rl={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},io=[Rl.FILL],us=[Rl.STROKE],hs=[Rl.BEGIN_PATH],Dl=[Rl.CLOSE_PATH],pi=Rl,bu=class kf{drawCustom(A,B,J,se,Se){}drawGeometry(A){}setStyle(A){}drawCircle(A,B,J){}drawFeature(A,B,J){}drawGeometryCollection(A,B,J){}drawLineString(A,B,J){}drawMultiLineString(A,B,J){}drawMultiPoint(A,B,J){}drawMultiPolygon(A,B,J){}drawPoint(A,B,J){}drawPolygon(A,B,J){}drawText(A,B,J){}setFillStrokeStyle(A,B){}setImageStyle(A,B){}setTextStyle(A,B){}},hu=class Mf extends bu{constructor(A,B,J,se){super(),this.tolerance=A,this.maxExtent=B,this.pixelRatio=se,this.maxLineWidth=0,this.resolution=J,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(A){const B=this.pixelRatio;return 1==B?A:A.map(function(J){return J*B})}appendFlatPointCoordinates(A,B){const J=this.getBufferedMaxExtent(),se=this.tmpCoordinate_,Se=this.coordinates;let Re=Se.length;for(let Ze=0,$e=A.length;Ze<$e;Ze+=B)se[0]=A[Ze],se[1]=A[Ze+1],Pt(J,se)&&(Se[Re++]=se[0],Se[Re++]=se[1]);return Re}appendFlatLineCoordinates(A,B,J,se,Se,Re){const Ze=this.coordinates;let $e=Ze.length;const wt=this.getBufferedMaxExtent();Re&&(B+=se);let bt=A[B],Gt=A[B+1];const rn=this.tmpCoordinate_;let Cn,jn,Yn,_n=!0;for(Cn=B+se;Cn<J;Cn+=se)rn[0]=A[Cn],rn[1]=A[Cn+1],Yn=Ut(wt,rn),Yn!==jn?(_n&&(Ze[$e++]=bt,Ze[$e++]=Gt,_n=!1),Ze[$e++]=rn[0],Ze[$e++]=rn[1]):Yn===ut.INTERSECTING?(Ze[$e++]=rn[0],Ze[$e++]=rn[1],_n=!1):_n=!0,bt=rn[0],Gt=rn[1],jn=Yn;return(Se&&_n||Cn===B+se)&&(Ze[$e++]=bt,Ze[$e++]=Gt),$e}drawCustomCoordinates_(A,B,J,se,Se){for(let Re=0,Ze=J.length;Re<Ze;++Re){const $e=J[Re],wt=this.appendFlatLineCoordinates(A,B,$e,se,!1,!1);Se.push(wt),B=$e}return B}drawCustom(A,B,J,se,Se){this.beginGeometry(A,B,Se);const Re=A.getType(),Ze=A.getStride(),$e=this.coordinates.length;let wt,bt,Gt,rn,_n;switch(Re){case"MultiPolygon":wt=A.getOrientedFlatCoordinates(),rn=[];const Cn=A.getEndss();_n=0;for(let jn=0,Yn=Cn.length;jn<Yn;++jn){const er=[];_n=this.drawCustomCoordinates_(wt,_n,Cn[jn],Ze,er),rn.push(er)}this.instructions.push([pi.CUSTOM,$e,rn,A,J,qo,Se]),this.hitDetectionInstructions.push([pi.CUSTOM,$e,rn,A,se||J,qo,Se]);break;case"Polygon":case"MultiLineString":Gt=[],wt="Polygon"==Re?A.getOrientedFlatCoordinates():A.getFlatCoordinates(),_n=this.drawCustomCoordinates_(wt,0,A.getEnds(),Ze,Gt),this.instructions.push([pi.CUSTOM,$e,Gt,A,J,ko,Se]),this.hitDetectionInstructions.push([pi.CUSTOM,$e,Gt,A,se||J,ko,Se]);break;case"LineString":case"Circle":wt=A.getFlatCoordinates(),bt=this.appendFlatLineCoordinates(wt,0,wt.length,Ze,!1,!1),this.instructions.push([pi.CUSTOM,$e,bt,A,J,Po,Se]),this.hitDetectionInstructions.push([pi.CUSTOM,$e,bt,A,se||J,Po,Se]);break;case"MultiPoint":wt=A.getFlatCoordinates(),bt=this.appendFlatPointCoordinates(wt,Ze),bt>$e&&(this.instructions.push([pi.CUSTOM,$e,bt,A,J,Po,Se]),this.hitDetectionInstructions.push([pi.CUSTOM,$e,bt,A,se||J,Po,Se]));break;case"Point":wt=A.getFlatCoordinates(),this.coordinates.push(wt[0],wt[1]),bt=this.coordinates.length,this.instructions.push([pi.CUSTOM,$e,bt,A,J,void 0,Se]),this.hitDetectionInstructions.push([pi.CUSTOM,$e,bt,A,se||J,void 0,Se])}this.endGeometry(B)}beginGeometry(A,B,J){this.beginGeometryInstruction1_=[pi.BEGIN_GEOMETRY,B,0,A,J],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[pi.BEGIN_GEOMETRY,B,0,A,J],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const A=this.hitDetectionInstructions;let B;A.reverse();const J=A.length;let se,Se,Re=-1;for(B=0;B<J;++B)se=A[B],Se=se[0],Se==pi.END_GEOMETRY?Re=B:Se==pi.BEGIN_GEOMETRY&&(se[2]=B,r(this.hitDetectionInstructions,Re,B),Re=-1)}setFillStrokeStyle(A,B){const J=this.state;if(A){const se=A.getColor();J.fillPatternScale=se&&"object"==typeof se&&"src"in se?this.pixelRatio:1,J.fillStyle=bi(se||Yi)}else J.fillStyle=void 0;if(B){const se=B.getColor();J.strokeStyle=bi(se||Su);const Se=B.getLineCap();J.lineCap=void 0!==Se?Se:Kl;const Re=B.getLineDash();J.lineDash=Re?Re.slice():pc;const Ze=B.getLineDashOffset();J.lineDashOffset=Ze||0;const $e=B.getLineJoin();J.lineJoin=void 0!==$e?$e:gu;const wt=B.getWidth();J.lineWidth=void 0!==wt?wt:1;const bt=B.getMiterLimit();J.miterLimit=void 0!==bt?bt:10,J.lineWidth>this.maxLineWidth&&(this.maxLineWidth=J.lineWidth,this.bufferedMaxExtent_=null)}else J.strokeStyle=void 0,J.lineCap=void 0,J.lineDash=null,J.lineDashOffset=void 0,J.lineJoin=void 0,J.lineWidth=void 0,J.miterLimit=void 0}createFill(A){const B=A.fillStyle,J=[pi.SET_FILL_STYLE,B];return"string"!=typeof B&&J.push(A.fillPatternScale),J}applyStroke(A){this.instructions.push(this.createStroke(A))}createStroke(A){return[pi.SET_STROKE_STYLE,A.strokeStyle,A.lineWidth*this.pixelRatio,A.lineCap,A.lineJoin,A.miterLimit,this.applyPixelRatio(A.lineDash),A.lineDashOffset*this.pixelRatio]}updateFillStyle(A,B){const J=A.fillStyle;("string"!=typeof J||A.currentFillStyle!=J)&&(void 0!==J&&this.instructions.push(B.call(this,A)),A.currentFillStyle=J)}updateStrokeStyle(A,B){const J=A.strokeStyle,se=A.lineCap,Se=A.lineDash,Re=A.lineDashOffset,Ze=A.lineJoin,$e=A.lineWidth,wt=A.miterLimit;(A.currentStrokeStyle!=J||A.currentLineCap!=se||Se!=A.currentLineDash&&!s(A.currentLineDash,Se)||A.currentLineDashOffset!=Re||A.currentLineJoin!=Ze||A.currentLineWidth!=$e||A.currentMiterLimit!=wt)&&(void 0!==J&&B.call(this,A),A.currentStrokeStyle=J,A.currentLineCap=se,A.currentLineDash=Se,A.currentLineDashOffset=Re,A.currentLineJoin=Ze,A.currentLineWidth=$e,A.currentMiterLimit=wt)}endGeometry(A){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const B=[pi.END_GEOMETRY,A];this.instructions.push(B),this.hitDetectionInstructions.push(B)}getBufferedMaxExtent(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Mt(this.maxExtent),this.maxLineWidth>0)&&At(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_}},yh=class Ef extends hu{constructor(A,B,J,se){super(A,B,J,se)}drawFlatCoordinatess_(A,B,J,se){const Se=this.state,Re=void 0!==Se.fillStyle,Ze=void 0!==Se.strokeStyle,$e=J.length;this.instructions.push(hs),this.hitDetectionInstructions.push(hs);for(let wt=0;wt<$e;++wt){const bt=J[wt],Gt=this.coordinates.length,rn=this.appendFlatLineCoordinates(A,B,bt,se,!0,!Ze),_n=[pi.MOVE_TO_LINE_TO,Gt,rn];this.instructions.push(_n),this.hitDetectionInstructions.push(_n),Ze&&(this.instructions.push(Dl),this.hitDetectionInstructions.push(Dl)),B=bt}return Re&&(this.instructions.push(io),this.hitDetectionInstructions.push(io)),Ze&&(this.instructions.push(us),this.hitDetectionInstructions.push(us)),B}drawCircle(A,B,J){const se=this.state;if(void 0===se.fillStyle&&void 0===se.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(A,B,J),void 0!==se.fillStyle&&this.hitDetectionInstructions.push([pi.SET_FILL_STYLE,Yi]),void 0!==se.strokeStyle&&this.hitDetectionInstructions.push([pi.SET_STROKE_STYLE,se.strokeStyle,se.lineWidth,se.lineCap,se.lineJoin,se.miterLimit,pc,0]);const Ze=A.getFlatCoordinates(),$e=A.getStride(),wt=this.coordinates.length;this.appendFlatLineCoordinates(Ze,0,Ze.length,$e,!1,!1);const bt=[pi.CIRCLE,wt];this.instructions.push(hs,bt),this.hitDetectionInstructions.push(hs,bt),void 0!==se.fillStyle&&(this.instructions.push(io),this.hitDetectionInstructions.push(io)),void 0!==se.strokeStyle&&(this.instructions.push(us),this.hitDetectionInstructions.push(us)),this.endGeometry(B)}drawPolygon(A,B,J){const se=this.state;if(void 0===se.fillStyle&&void 0===se.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(A,B,J),void 0!==se.fillStyle&&this.hitDetectionInstructions.push([pi.SET_FILL_STYLE,Yi]),void 0!==se.strokeStyle&&this.hitDetectionInstructions.push([pi.SET_STROKE_STYLE,se.strokeStyle,se.lineWidth,se.lineCap,se.lineJoin,se.miterLimit,pc,0]);const Ze=A.getEnds(),$e=A.getOrientedFlatCoordinates(),wt=A.getStride();this.drawFlatCoordinatess_($e,0,Ze,wt),this.endGeometry(B)}drawMultiPolygon(A,B,J){const se=this.state;if(void 0===se.fillStyle&&void 0===se.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(A,B,J),void 0!==se.fillStyle&&this.hitDetectionInstructions.push([pi.SET_FILL_STYLE,Yi]),void 0!==se.strokeStyle&&this.hitDetectionInstructions.push([pi.SET_STROKE_STYLE,se.strokeStyle,se.lineWidth,se.lineCap,se.lineJoin,se.miterLimit,pc,0]);const Ze=A.getEndss(),$e=A.getOrientedFlatCoordinates(),wt=A.getStride();let bt=0;for(let Gt=0,rn=Ze.length;Gt<rn;++Gt)bt=this.drawFlatCoordinatess_($e,bt,Ze[Gt],wt);this.endGeometry(B)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const A=this.tolerance;if(0!==A){const B=this.coordinates;for(let J=0,se=B.length;J<se;++J)B[J]=co(B[J],A)}return super.finish()}setFillStrokeStyles_(){const A=this.state;void 0!==A.fillStyle&&this.updateFillStyle(A,this.createFill),void 0!==A.strokeStyle&&this.updateStrokeStyle(A,this.applyStroke)}};function pd(ee,A,B,J,se){const Se=[];let Re=B,Ze=0,$e=A.slice(B,2);for(;Ze<ee&&Re+se<J;){const[wt,bt]=$e.slice(-2),Gt=A[Re+se],rn=A[Re+se+1],_n=Math.sqrt((Gt-wt)*(Gt-wt)+(rn-bt)*(rn-bt));if(Ze+=_n,Ze>=ee){const Cn=(ee-Ze+_n)/_n,jn=_e(wt,Gt,Cn),Yn=_e(bt,rn,Cn);$e.push(jn,Yn),Se.push($e),$e=[jn,Yn],Ze==ee&&(Re+=se),Ze=0}else if(Ze<ee)$e.push(A[Re+se],A[Re+se+1]),Re+=se;else{const Cn=_n-Ze,jn=_e(wt,Gt,Cn/_n),Yn=_e(bt,rn,Cn/_n);$e.push(jn,Yn),Se.push($e),$e=[jn,Yn],Ze=0,Re+=se}}return Ze>0&&Se.push($e),Se}function Kh(ee,A,B,J,se){let bt,Gt,rn,_n,Cn,jn,Yn,er,rr,Ar,Se=B,Re=B,Ze=0,$e=0,wt=B;for(Gt=B;Gt<J;Gt+=se){const Er=A[Gt],Tr=A[Gt+1];void 0!==Cn&&(rr=Er-Cn,Ar=Tr-jn,_n=Math.sqrt(rr*rr+Ar*Ar),void 0!==Yn&&($e+=rn,bt=Math.acos((Yn*rr+er*Ar)/(rn*_n)),bt>ee&&($e>Ze&&(Ze=$e,Se=wt,Re=Gt),$e=0,wt=Gt-se)),rn=_n,Yn=rr,er=Ar),Cn=Er,jn=Tr}return $e+=_n,$e>Ze?[wt,Gt]:[Se,Re]}const jc={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},If={Circle:yh,Default:hu,Image:class dd extends hu{constructor(A,B,J,se){super(A,B,J,se),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(A,B,J){if(!this.image_||this.maxExtent&&!Pt(this.maxExtent,A.getFlatCoordinates()))return;this.beginGeometry(A,B,J);const se=A.getFlatCoordinates(),Se=A.getStride(),Re=this.coordinates.length,Ze=this.appendFlatPointCoordinates(se,Se);this.instructions.push([pi.DRAW_IMAGE,Re,Ze,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([pi.DRAW_IMAGE,Re,Ze,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(B)}drawMultiPoint(A,B,J){if(!this.image_)return;this.beginGeometry(A,B,J);const se=A.getFlatCoordinates(),Se=[];for(let $e=0,wt=se.length;$e<wt;$e+=A.getStride())(!this.maxExtent||Pt(this.maxExtent,se.slice($e,$e+2)))&&Se.push(se[$e],se[$e+1]);const Re=this.coordinates.length,Ze=this.appendFlatPointCoordinates(Se,2);this.instructions.push([pi.DRAW_IMAGE,Re,Ze,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([pi.DRAW_IMAGE,Re,Ze,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(B)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(A,B){const J=A.getAnchor(),se=A.getSize(),Se=A.getOrigin();this.imagePixelRatio_=A.getPixelRatio(this.pixelRatio),this.anchorX_=J[0],this.anchorY_=J[1],this.hitDetectionImage_=A.getHitDetectionImage(),this.image_=A.getImage(this.pixelRatio),this.height_=se[1],this.opacity_=A.getOpacity(),this.originX_=Se[0],this.originY_=Se[1],this.rotateWithView_=A.getRotateWithView(),this.rotation_=A.getRotation(),this.scale_=A.getScaleArray(),this.width_=se[0],this.declutterMode_=A.getDeclutterMode(),this.declutterImageWithText_=B}},LineString:class vh extends hu{constructor(A,B,J,se){super(A,B,J,se)}drawFlatCoordinates_(A,B,J,se){const Se=this.coordinates.length,Re=this.appendFlatLineCoordinates(A,B,J,se,!1,!1),Ze=[pi.MOVE_TO_LINE_TO,Se,Re];return this.instructions.push(Ze),this.hitDetectionInstructions.push(Ze),J}drawLineString(A,B,J){const se=this.state;if(void 0===se.strokeStyle||void 0===se.lineWidth)return;this.updateStrokeStyle(se,this.applyStroke),this.beginGeometry(A,B,J),this.hitDetectionInstructions.push([pi.SET_STROKE_STYLE,se.strokeStyle,se.lineWidth,se.lineCap,se.lineJoin,se.miterLimit,pc,0],hs);const Ze=A.getFlatCoordinates(),$e=A.getStride();this.drawFlatCoordinates_(Ze,0,Ze.length,$e),this.hitDetectionInstructions.push(us),this.endGeometry(B)}drawMultiLineString(A,B,J){const se=this.state;if(void 0===se.strokeStyle||void 0===se.lineWidth)return;this.updateStrokeStyle(se,this.applyStroke),this.beginGeometry(A,B,J),this.hitDetectionInstructions.push([pi.SET_STROKE_STYLE,se.strokeStyle,se.lineWidth,se.lineCap,se.lineJoin,se.miterLimit,pc,0],hs);const Ze=A.getEnds(),$e=A.getFlatCoordinates(),wt=A.getStride();let bt=0;for(let Gt=0,rn=Ze.length;Gt<rn;++Gt)bt=this.drawFlatCoordinates_($e,bt,Ze[Gt],wt);this.hitDetectionInstructions.push(us),this.endGeometry(B)}finish(){const A=this.state;return null!=A.lastStroke&&A.lastStroke!=this.coordinates.length&&this.instructions.push(us),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(A){null!=A.lastStroke&&A.lastStroke!=this.coordinates.length&&(this.instructions.push(us),A.lastStroke=this.coordinates.length),A.lastStroke=0,super.applyStroke(A),this.instructions.push(hs)}},Polygon:yh,Text:class xh extends hu{constructor(A,B,J,se){super(A,B,J,se),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Yi]={fillStyle:Yi},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const A=super.finish();return A.textStates=this.textStates,A.fillStates=this.fillStates,A.strokeStates=this.strokeStates,A}drawText(A,B,J){const Re=this.textState_;if(""===this.text_||!Re||!this.textFillState_&&!this.textStrokeState_)return;const Ze=this.coordinates;let $e=Ze.length;const wt=A.getType();let bt=null,Gt=A.getStride();if("line"!==Re.placement||"LineString"!=wt&&"MultiLineString"!=wt&&"Polygon"!=wt&&"MultiPolygon"!=wt){let rn=Re.overflow?null:[];switch(wt){case"Point":case"MultiPoint":bt=A.getFlatCoordinates();break;case"LineString":bt=A.getFlatMidpoint();break;case"Circle":bt=A.getCenter();break;case"MultiLineString":bt=A.getFlatMidpoints(),Gt=2;break;case"Polygon":bt=A.getFlatInteriorPoint(),Re.overflow||rn.push(bt[2]/this.resolution),Gt=3;break;case"MultiPolygon":const rr=A.getFlatInteriorPoints();bt=[];for(let Ar=0,Er=rr.length;Ar<Er;Ar+=3)Re.overflow||rn.push(rr[Ar+2]/this.resolution),bt.push(rr[Ar],rr[Ar+1]);if(0===bt.length)return;Gt=2}const _n=this.appendFlatPointCoordinates(bt,Gt);if(_n===$e)return;if(rn&&(_n-$e)/2!=bt.length/Gt){let rr=$e/2;rn=rn.filter((Ar,Er)=>{const Tr=Ze[2*(rr+Er)]===bt[Er*Gt]&&Ze[2*(rr+Er)+1]===bt[Er*Gt+1];return Tr||--rr,Tr})}this.saveTextStates_(),(Re.backgroundFill||Re.backgroundStroke)&&(this.setFillStrokeStyle(Re.backgroundFill,Re.backgroundStroke),Re.backgroundFill&&this.updateFillStyle(this.state,this.createFill),Re.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(A,B,J);let Cn=Re.padding;if(Cn!=Oc&&(Re.scale[0]<0||Re.scale[1]<0)){let rr=Re.padding[0],Ar=Re.padding[1],Er=Re.padding[2],Tr=Re.padding[3];Re.scale[0]<0&&(Ar=-Ar,Tr=-Tr),Re.scale[1]<0&&(rr=-rr,Er=-Er),Cn=[rr,Ar,Er,Tr]}const jn=this.pixelRatio;this.instructions.push([pi.DRAW_IMAGE,$e,_n,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,Cn==Oc?Oc:Cn.map(function(rr){return rr*jn}),!!Re.backgroundFill,!!Re.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,rn]);const Yn=1/jn,er=this.state.fillStyle;Re.backgroundFill&&(this.state.fillStyle=Yi,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([pi.DRAW_IMAGE,$e,_n,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[Yn,Yn],NaN,this.declutterMode_,this.declutterImageWithText_,Cn,!!Re.backgroundFill,!!Re.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Yi:this.fillKey_,this.textOffsetX_,this.textOffsetY_,rn]),Re.backgroundFill&&(this.state.fillStyle=er,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(B)}else{if(!tr(this.maxExtent,A.getExtent()))return;let rn;if(bt=A.getFlatCoordinates(),"LineString"==wt)rn=[bt.length];else if("MultiLineString"==wt)rn=A.getEnds();else if("Polygon"==wt)rn=A.getEnds().slice(0,1);else if("MultiPolygon"==wt){const Yn=A.getEndss();rn=[];for(let er=0,rr=Yn.length;er<rr;++er)rn.push(Yn[er][0])}this.beginGeometry(A,B,J);const _n=Re.repeat,Cn=_n?void 0:Re.textAlign;let jn=0;for(let Yn=0,er=rn.length;Yn<er;++Yn){let rr;rr=_n?pd(_n*this.resolution,bt,jn,rn[Yn],Gt):[bt.slice(jn,rn[Yn])];for(let Ar=0,Er=rr.length;Ar<Er;++Ar){const Tr=rr[Ar];let Yr=0,Zr=Tr.length;if(null==Cn){const Gr=Kh(Re.maxAngle,Tr,0,Tr.length,2);Yr=Gr[0],Zr=Gr[1]}for(let Gr=Yr;Gr<Zr;Gr+=Gt)Ze.push(Tr[Gr],Tr[Gr+1]);const qr=Ze.length;jn=rn[Yn],this.drawChars_($e,qr),$e=qr}}this.endGeometry(B)}}saveTextStates_(){const A=this.textStrokeState_,B=this.textState_,J=this.textFillState_,se=this.strokeKey_;A&&(se in this.strokeStates||(this.strokeStates[se]={strokeStyle:A.strokeStyle,lineCap:A.lineCap,lineDashOffset:A.lineDashOffset,lineWidth:A.lineWidth,lineJoin:A.lineJoin,miterLimit:A.miterLimit,lineDash:A.lineDash}));const Se=this.textKey_;Se in this.textStates||(this.textStates[Se]={font:B.font,textAlign:B.textAlign||Ql,justify:B.justify,textBaseline:B.textBaseline||Cu,scale:B.scale});const Re=this.fillKey_;J&&(Re in this.fillStates||(this.fillStates[Re]={fillStyle:J.fillStyle}))}drawChars_(A,B){const J=this.textStrokeState_,se=this.textState_,Se=this.strokeKey_,Re=this.textKey_,Ze=this.fillKey_;this.saveTextStates_();const $e=this.pixelRatio,wt=jc[se.textBaseline],bt=this.textOffsetY_*$e,Gt=this.text_,rn=J?J.lineWidth*Math.abs(se.scale[0])/2:0;this.instructions.push([pi.DRAW_CHARS,A,B,wt,se.overflow,Ze,se.maxAngle,$e,bt,Se,rn*$e,Gt,Re,1,this.declutterMode_]),this.hitDetectionInstructions.push([pi.DRAW_CHARS,A,B,wt,se.overflow,Ze&&Yi,se.maxAngle,$e,bt,Se,rn*$e,Gt,Re,1/$e,this.declutterMode_])}setTextStyle(A,B){let J,se,Se;if(A){const Re=A.getFill();Re?(se=this.textFillState_,se||(se={},this.textFillState_=se),se.fillStyle=bi(Re.getColor()||Yi)):(se=null,this.textFillState_=se);const Ze=A.getStroke();if(Ze){Se=this.textStrokeState_,Se||(Se={},this.textStrokeState_=Se);const Cn=Ze.getLineDash(),jn=Ze.getLineDashOffset(),Yn=Ze.getWidth(),er=Ze.getMiterLimit();Se.lineCap=Ze.getLineCap()||Kl,Se.lineDash=Cn?Cn.slice():pc,Se.lineDashOffset=void 0===jn?0:jn,Se.lineJoin=Ze.getLineJoin()||gu,Se.lineWidth=void 0===Yn?1:Yn,Se.miterLimit=void 0===er?10:er,Se.strokeStyle=bi(Ze.getColor()||Su)}else Se=null,this.textStrokeState_=Se;J=this.textState_;const $e=A.getFont()||Ro;e0($e);const wt=A.getScaleArray();J.overflow=A.getOverflow(),J.font=$e,J.maxAngle=A.getMaxAngle(),J.placement=A.getPlacement(),J.textAlign=A.getTextAlign(),J.repeat=A.getRepeat(),J.justify=A.getJustify(),J.textBaseline=A.getTextBaseline()||Cu,J.backgroundFill=A.getBackgroundFill(),J.backgroundStroke=A.getBackgroundStroke(),J.padding=A.getPadding()||Oc,J.scale=void 0===wt?[1,1]:wt;const bt=A.getOffsetX(),Gt=A.getOffsetY(),rn=A.getRotateWithView(),_n=A.getRotation();this.text_=A.getText()||"",this.textOffsetX_=void 0===bt?0:bt,this.textOffsetY_=void 0===Gt?0:Gt,this.textRotateWithView_=void 0!==rn&&rn,this.textRotation_=void 0===_n?0:_n,this.strokeKey_=Se?("string"==typeof Se.strokeStyle?Se.strokeStyle:U(Se.strokeStyle))+Se.lineCap+Se.lineDashOffset+"|"+Se.lineWidth+Se.lineJoin+Se.miterLimit+"["+Se.lineDash.join()+"]":"",this.textKey_=J.font+J.scale+(J.textAlign||"?")+(J.repeat||"?")+(J.justify||"?")+(J.textBaseline||"?"),this.fillKey_=se&&se.fillStyle?"string"==typeof se.fillStyle?se.fillStyle:"|"+U(se.fillStyle):""}else this.text_="";this.declutterMode_=A.getDeclutterMode(),this.declutterImageWithText_=B}}},Lf=class _h{constructor(A,B,J,se){this.tolerance_=A,this.maxExtent_=B,this.pixelRatio_=se,this.resolution_=J,this.buildersByZIndex_={}}finish(){const A={};for(const B in this.buildersByZIndex_){A[B]=A[B]||{};const J=this.buildersByZIndex_[B];for(const se in J){const Se=J[se].finish();A[B][se]=Se}}return A}getBuilder(A,B){const J=void 0!==A?A.toString():"0";let se=this.buildersByZIndex_[J];void 0===se&&(se={},this.buildersByZIndex_[J]=se);let Se=se[B];return void 0===Se&&(Se=new(0,If[B])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),se[B]=Se),Se}};function Pf(ee,A,B,J,se,Se,Re,Ze,$e,wt,bt,Gt){let rn=ee[A],_n=ee[A+1],Cn=0,jn=0,Yn=0,er=0;function rr(){Cn=rn,jn=_n,rn=ee[A+=J],_n=ee[A+1],er+=Yn,Yn=Math.sqrt((rn-Cn)*(rn-Cn)+(_n-jn)*(_n-jn))}do{rr()}while(A<B-J&&er+Yn<Se);let Ar=0===Yn?0:(Se-er)/Yn;const Er=_e(Cn,rn,Ar),Tr=_e(jn,_n,Ar),Yr=A-J,Zr=er,qr=Se+Ze*$e(wt,se,bt);for(;A<B-J&&er+Yn<qr;)rr();Ar=0===Yn?0:(qr-er)/Yn;const Gr=_e(Cn,rn,Ar),Ri=_e(jn,_n,Ar);let Ci;if(Gt){const si=[Er,Tr,Gr,Ri];ll(si,0,4,2,Gt,si,si),Ci=si[0]>si[2]}else Ci=Er>Gr;const xi=Math.PI,Bi=[],Xa=Yr+J===A;let yi;if(Yn=0,er=Zr,rn=ee[A=Yr],_n=ee[A+1],Xa)return rr(),yi=Math.atan2(_n-jn,rn-Cn),Ci&&(yi+=yi>0?-xi:xi),Bi[0]=[(Gr+Er)/2,(Ri+Tr)/2,(qr-Se)/2,yi,se],Bi;for(let si=0,Mi=(se=se.replace(/\n/g," ")).length;si<Mi;){rr();let Ni=Math.atan2(_n-jn,rn-Cn);if(Ci&&(Ni+=Ni>0?-xi:xi),void 0!==yi){let Jr=Ni-yi;if(Jr+=Jr>xi?-2*xi:Jr<-xi?2*xi:0,Math.abs(Jr)>Re)return null}yi=Ni;const ao=si;let Qi=0;for(;si<Mi;++si){const Bl=Ze*$e(wt,se[Ci?Mi-si-1:si],bt);if(A+J<B&&er+Yn<Se+Qi+Bl/2)break;Qi+=Bl}if(si===ao)continue;const Ta=Ci?se.substring(Mi-ao,Mi-si):se.substring(ao,si);Ar=0===Yn?0:(Se+Qi/2-er)/Yn;const va=_e(Cn,rn,Ar),oo=_e(jn,_n,Ar);Bi.push([va,oo,Qi/2,Ni,Ta]),Se+=Qi}return Bi}function bh(ee,A,B,J){let se=ee[A],Se=ee[A+1],Re=0;for(let Ze=A+J;Ze<B;Ze+=J){const $e=ee[Ze],wt=ee[Ze+1];Re+=Math.sqrt(($e-se)*($e-se)+(wt-Se)*(wt-Se)),se=$e,Se=wt}return Re}const ec=[1/0,1/0,-1/0,-1/0],tc=[],nl=[],zl=[],nc=[];function md(ee){return ee[3].declutterBox}const Rf=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Df(ee,A){return"start"===A?A=Rf.test(ee)?"right":"left":"end"===A&&(A=Rf.test(ee)?"left":"right"),jc[A]}function vd(ee,A,B){return B>0&&ee.push("\n",""),ee.push(A,""),ee}const Dp=class yd{constructor(A,B,J,se,Se){this.overlaps=J,this.pixelRatio=B,this.resolution=A,this.instructions=se.instructions,this.coordinates=se.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=se.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=se.fillStates||{},this.strokeStates=se.strokeStates||{},this.textStates=se.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=Se?new Xh:null}getZIndexContext(){return this.zIndexContext_}createLabel(A,B,J,se){const Se=A+B+J+se;if(this.labels_[Se])return this.labels_[Se];const Re=se?this.strokeStates[se]:null,Ze=J?this.fillStates[J]:null,$e=this.textStates[B],wt=this.pixelRatio,bt=[$e.scale[0]*wt,$e.scale[1]*wt],Gt=Array.isArray(A),rn=$e.justify?jc[$e.justify]:Df(Array.isArray(A)?A[0]:A,$e.textAlign||Ql),_n=se&&Re.lineWidth?Re.lineWidth:0,Cn=Gt?A:A.split("\n").reduce(vd,[]),{width:jn,height:Yn,widths:er,heights:rr,lineWidths:Ar}=function n0(ee,A){const B=[],J=[],se=[];let Se=0,Re=0,Ze=0,$e=0;for(let wt=0,bt=A.length;wt<=bt;wt+=2){const Gt=A[wt];if("\n"===Gt||wt===bt){Se=Math.max(Se,Re),se.push(Re),Re=0,Ze+=$e,$e=0;continue}const rn=A[wt+1]||ee.font,_n=Qu(rn,Gt);B.push(_n),Re+=_n;const Cn=t0(rn);J.push(Cn),$e=Math.max($e,Cn)}return{width:Se,height:Ze,widths:B,heights:J,lineWidths:se}}($e,Cn),Er=jn+_n,Tr=[],Yr=(Er+2)*bt[0],Zr=(Yn+_n)*bt[1],qr={width:Yr<0?Math.floor(Yr):Math.ceil(Yr),height:Zr<0?Math.floor(Zr):Math.ceil(Zr),contextInstructions:Tr};(1!=bt[0]||1!=bt[1])&&Tr.push("scale",bt),se&&(Tr.push("strokeStyle",Re.strokeStyle),Tr.push("lineWidth",_n),Tr.push("lineCap",Re.lineCap),Tr.push("lineJoin",Re.lineJoin),Tr.push("miterLimit",Re.miterLimit),Tr.push("setLineDash",[Re.lineDash]),Tr.push("lineDashOffset",Re.lineDashOffset)),J&&Tr.push("fillStyle",Ze.fillStyle),Tr.push("textBaseline","middle"),Tr.push("textAlign","center");const Gr=.5-rn;let Ri=rn*Er+Gr*_n;const Ci=[],xi=[];let Mi,Bi=0,Xa=0,yi=0,si=0;for(let Ni=0,ao=Cn.length;Ni<ao;Ni+=2){const Qi=Cn[Ni];if("\n"===Qi){Xa+=Bi,Bi=0,Ri=rn*Er+Gr*_n,++si;continue}const Ta=Cn[Ni+1]||$e.font;Ta!==Mi&&(se&&Ci.push("font",Ta),J&&xi.push("font",Ta),Mi=Ta),Bi=Math.max(Bi,rr[yi]);const va=[Qi,Ri+Gr*er[yi]+rn*(er[yi]-Ar[si]),.5*(_n+Bi)+Xa];Ri+=er[yi],se&&Ci.push("strokeText",va),J&&xi.push("fillText",va),++yi}return Array.prototype.push.apply(Tr,Ci),Array.prototype.push.apply(Tr,xi),this.labels_[Se]=qr,qr}replayTextBackground_(A,B,J,se,Se,Re,Ze){A.beginPath(),A.moveTo.apply(A,B),A.lineTo.apply(A,J),A.lineTo.apply(A,se),A.lineTo.apply(A,Se),A.lineTo.apply(A,B),Re&&(this.alignAndScaleFill_=Re[2],this.fill_(A)),Ze&&(this.setStrokeStyle_(A,Ze),A.stroke())}calculateImageOrLabelDimensions_(A,B,J,se,Se,Re,Ze,$e,wt,bt,Gt,rn,_n,Cn,jn,Yn){let er=J-(Ze*=rn[0]),rr=se-($e*=rn[1]);const Ar=Se+wt>A?A-wt:Se,Er=Re+bt>B?B-bt:Re,Tr=Cn[3]+Ar*rn[0]+Cn[1],Yr=Cn[0]+Er*rn[1]+Cn[2],Zr=er-Cn[3],qr=rr-Cn[0];let Gr;return(jn||0!==Gt)&&(tc[0]=Zr,nc[0]=Zr,tc[1]=qr,nl[1]=qr,nl[0]=Zr+Tr,zl[0]=nl[0],zl[1]=qr+Yr,nc[1]=zl[1]),0!==Gt?(Gr=Uo([1,0,0,1,0,0],J,se,1,1,Gt,-J,-se),ka(Gr,tc),ka(Gr,nl),ka(Gr,zl),ka(Gr,nc),qt(Math.min(tc[0],nl[0],zl[0],nc[0]),Math.min(tc[1],nl[1],zl[1],nc[1]),Math.max(tc[0],nl[0],zl[0],nc[0]),Math.max(tc[1],nl[1],zl[1],nc[1]),ec)):qt(Math.min(Zr,Zr+Tr),Math.min(qr,qr+Yr),Math.max(Zr,Zr+Tr),Math.max(qr,qr+Yr),ec),_n&&(er=Math.round(er),rr=Math.round(rr)),{drawImageX:er,drawImageY:rr,drawImageW:Ar,drawImageH:Er,originX:wt,originY:bt,declutterBox:{minX:ec[0],minY:ec[1],maxX:ec[2],maxY:ec[3],value:Yn},canvasTransform:Gr,scale:rn}}replayImageOrLabel_(A,B,J,se,Se,Re,Ze){const wt=se.declutterBox,bt=Ze?Ze[2]*se.scale[0]/2:0;return wt.minX-bt<=B[0]&&wt.maxX+bt>=0&&wt.minY-bt<=B[1]&&wt.maxY+bt>=0&&(!(!Re&&!Ze)&&this.replayTextBackground_(A,tc,nl,zl,nc,Re,Ze),function r0(ee,A,B,J,se,Se,Re,Ze,$e,wt,bt){ee.save(),1!==B&&(void 0===ee.globalAlpha?ee.globalAlpha=Gt=>Gt.globalAlpha*=B:ee.globalAlpha*=B),A&&ee.transform.apply(ee,A),J.contextInstructions?(ee.translate($e,wt),ee.scale(bt[0],bt[1]),function cf(ee,A){const B=ee.contextInstructions;for(let J=0,se=B.length;J<se;J+=2)Array.isArray(B[J+1])?A[B[J]].apply(A,B[J+1]):A[B[J]]=B[J+1]}(J,ee)):bt[0]<0||bt[1]<0?(ee.translate($e,wt),ee.scale(bt[0],bt[1]),ee.drawImage(J,se,Se,Re,Ze,0,0,Re,Ze)):ee.drawImage(J,se,Se,Re,Ze,$e,wt,Re*bt[0],Ze*bt[1]),ee.restore()}(A,se.canvasTransform,Se,J,se.originX,se.originY,se.drawImageW,se.drawImageH,se.drawImageX,se.drawImageY,se.scale)),!0}fill_(A){const B=this.alignAndScaleFill_;if(B){const J=ka(this.renderedTransform_,[0,0]),se=512*this.pixelRatio;A.save(),A.translate(J[0]%se,J[1]%se),1!==B&&A.scale(B,B),A.rotate(this.viewRotation_)}A.fill(),B&&A.restore()}setStrokeStyle_(A,B){A.strokeStyle=B[1],A.lineWidth=B[2],A.lineCap=B[3],A.lineJoin=B[4],A.miterLimit=B[5],A.lineDashOffset=B[7],A.setLineDash(B[6])}drawLabelWithPointPlacement_(A,B,J,se){const Se=this.textStates[B],Re=this.createLabel(A,B,se,J),Ze=this.strokeStates[J],$e=this.pixelRatio,wt=Df(Array.isArray(A)?A[0]:A,Se.textAlign||Ql),bt=jc[Se.textBaseline||Cu],Gt=Ze&&Ze.lineWidth?Ze.lineWidth:0;return{label:Re,anchorX:wt*(Re.width/$e-2*Se.scale[0])+2*(.5-wt)*Gt,anchorY:bt*Re.height/$e+2*(.5-bt)*Gt}}execute_(A,B,J,se,Se,Re,Ze,$e){const wt=this.zIndexContext_;let bt;this.pixelCoordinates_&&s(J,this.renderedTransform_)?bt=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),bt=Lo(this.coordinates,0,this.coordinates.length,2,J,this.pixelCoordinates_),function Al(ee,A){ee[0]=A[0],ee[1]=A[1],ee[2]=A[2],ee[3]=A[3],ee[4]=A[4],ee[5]=A[5]}(this.renderedTransform_,J));let Gt=0;const rn=se.length;let Cn,jn,Yn,er,rr,Ar,Er,Tr,Yr,Zr,qr,Gr,Ri,_n=0,Ci=0,xi=0,Bi=null,Xa=null;const yi=this.coordinateCache_,si=this.viewRotation_,Mi=Math.round(1e12*Math.atan2(-J[1],J[0]))/1e12,Ni={context:A,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:si},ao=this.instructions!=se||this.overlaps?0:200;let Qi,Ta,va,oo;for(;Gt<rn;){const Jr=se[Gt];switch(Jr[0]){case pi.BEGIN_GEOMETRY:Qi=Jr[1],oo=Jr[3],Qi.getGeometry()?void 0===Ze||tr(Ze,oo.getExtent())?++Gt:Gt=Jr[2]+1:Gt=Jr[2],wt&&(wt.zIndex=Jr[4]);break;case pi.BEGIN_PATH:Ci>ao&&(this.fill_(A),Ci=0),xi>ao&&(A.stroke(),xi=0),!Ci&&!xi&&(A.beginPath(),rr=NaN,Ar=NaN),++Gt;break;case pi.CIRCLE:_n=Jr[1];const yl=bt[_n],fs=bt[_n+1],Nl=bt[_n+2]-yl,$p=bt[_n+3]-fs,Rd=Math.sqrt(Nl*Nl+$p*$p);A.moveTo(yl+Rd,fs),A.arc(yl,fs,Rd,0,2*Math.PI,!0),++Gt;break;case pi.CLOSE_PATH:A.closePath(),++Gt;break;case pi.CUSTOM:_n=Jr[1],Cn=Jr[2];const Ah=Jr[4],Dd=Jr[5];Ni.geometry=Jr[3],Ni.feature=Qi,Gt in yi||(yi[Gt]=[]);const kh=yi[Gt];Dd?Dd(bt,_n,Cn,2,kh):(kh[0]=bt[_n],kh[1]=bt[_n+1],kh.length=2),wt&&(wt.zIndex=Jr[6]),Ah(kh,Ni),++Gt;break;case pi.DRAW_IMAGE:_n=Jr[1],Cn=Jr[2],Yr=Jr[3],jn=Jr[4],Yn=Jr[5];let zd=Jr[6];const Qp=Jr[7],ag=Jr[8],du=Jr[9],qc=Jr[10];let Hu=Jr[11];const af=Jr[12];let of=Jr[13];er=Jr[14]||"declutter";const Mh=Jr[15];if(!Yr&&Jr.length>=20){Zr=Jr[19],qr=Jr[20],Gr=Jr[21],Ri=Jr[22];const Wc=this.drawLabelWithPointPlacement_(Zr,qr,Gr,Ri);Yr=Wc.label,Jr[3]=Yr,jn=(Wc.anchorX-Jr[23])*this.pixelRatio,Jr[4]=jn,Yn=(Wc.anchorY-Jr[24])*this.pixelRatio,Jr[5]=Yn,zd=Yr.height,Jr[6]=zd,of=Yr.width,Jr[13]=of}let sf,Sh,Uf,il;Jr.length>25&&(sf=Jr[25]),Jr.length>17?(Sh=Jr[16],Uf=Jr[17],il=Jr[18]):(Sh=Oc,Uf=!1,il=!1),qc&&Mi?Hu+=si:!qc&&!Mi&&(Hu-=si);let U1=0;for(;_n<Cn;_n+=2){if(sf&&sf[U1++]<of/this.pixelRatio)continue;const Wc=this.calculateImageOrLabelDimensions_(Yr.width,Yr.height,bt[_n],bt[_n+1],of,zd,jn,Yn,ag,du,Hu,af,Se,Sh,Uf||il,Qi),lf=[A,B,Yr,Wc,Qp,Uf?Bi:null,il?Xa:null];if($e){let Yc,ku,Zc,qu,Wu;if(Mh){const Bo=Cn-_n;if(!Mh[Bo]){Mh[Bo]={args:lf,declutterMode:er};continue}const jl=Mh[Bo];Yc=jl.args,ku=jl.declutterMode,delete Mh[Bo],Zc=md(Yc)}if(Yc&&("declutter"!==ku||!$e.collides(Zc))&&(qu=!0),("declutter"!==er||!$e.collides(Wc.declutterBox))&&(Wu=!0),"declutter"===ku&&"declutter"===er){const Bo=qu&&Wu;qu=Bo,Wu=Bo}qu&&("none"!==ku&&$e.insert(Zc),this.replayImageOrLabel_.apply(this,Yc)),Wu&&("none"!==er&&$e.insert(Wc.declutterBox),this.replayImageOrLabel_.apply(this,lf))}else this.replayImageOrLabel_.apply(this,lf)}++Gt;break;case pi.DRAW_CHARS:const mg=Jr[1],vg=Jr[2],og=Jr[3],V1=Jr[4];Ri=Jr[5];const G1=Jr[6],yg=Jr[7],xg=Jr[8];Gr=Jr[9];const sg=Jr[10];Zr=Jr[11],qr=Jr[12];const _g=[Jr[13],Jr[13]];er=Jr[14]||"declutter";const lg=this.textStates[qr],Fd=lg.font,Bd=[lg.scale[0]*yg,lg.scale[1]*yg];let Nd;Fd in this.widths_?Nd=this.widths_[Fd]:(Nd={},this.widths_[Fd]=Nd);const bg=bh(bt,mg,vg,2),wg=Math.abs(Bd[0])*Vf(Fd,Zr,Nd);if(V1||wg<=bg){const Yc=Pf(bt,mg,vg,2,Zr,(bg-wg)*Df(Zr,this.textStates[qr].textAlign),G1,Math.abs(Bd[0]),Vf,Fd,Nd,Mi?0:this.viewRotation_);e:if(Yc){const ku=[];let Zc,qu,Wu,Bo,jl;if(Gr)for(Zc=0,qu=Yc.length;Zc<qu;++Zc){jl=Yc[Zc],Wu=jl[4],Bo=this.createLabel(Wu,qr,"",Gr),jn=jl[2]+(Bd[0]<0?-sg:sg),Yn=og*Bo.height+2*(.5-og)*sg*Bd[1]/Bd[0]-xg;const Yu=this.calculateImageOrLabelDimensions_(Bo.width,Bo.height,jl[0],jl[1],Bo.width,Bo.height,jn,Yn,0,0,jl[3],_g,!1,Oc,!1,Qi);if($e&&"declutter"===er&&$e.collides(Yu.declutterBox))break e;ku.push([A,B,Bo,Yu,1,null,null])}if(Ri)for(Zc=0,qu=Yc.length;Zc<qu;++Zc){jl=Yc[Zc],Wu=jl[4],Bo=this.createLabel(Wu,qr,Ri,""),jn=jl[2],Yn=og*Bo.height-xg;const Yu=this.calculateImageOrLabelDimensions_(Bo.width,Bo.height,jl[0],jl[1],Bo.width,Bo.height,jn,Yn,0,0,jl[3],_g,!1,Oc,!1,Qi);if($e&&"declutter"===er&&$e.collides(Yu.declutterBox))break e;ku.push([A,B,Bo,Yu,1,null,null])}$e&&"none"!==er&&$e.load(ku.map(md));for(let Yu=0,H1=ku.length;Yu<H1;++Yu)this.replayImageOrLabel_.apply(this,ku[Yu])}}++Gt;break;case pi.END_GEOMETRY:if(void 0!==Re){Qi=Jr[1];const Wc=Re(Qi,oo,er);if(Wc)return Wc}++Gt;break;case pi.FILL:ao?Ci++:this.fill_(A),++Gt;break;case pi.MOVE_TO_LINE_TO:for(_n=Jr[1],Cn=Jr[2],Ta=bt[_n],va=bt[_n+1],A.moveTo(Ta,va),rr=Ta+.5|0,Ar=va+.5|0,_n+=2;_n<Cn;_n+=2)Ta=bt[_n],va=bt[_n+1],Er=Ta+.5|0,Tr=va+.5|0,(_n==Cn-2||Er!==rr||Tr!==Ar)&&(A.lineTo(Ta,va),rr=Er,Ar=Tr);++Gt;break;case pi.SET_FILL_STYLE:Bi=Jr,this.alignAndScaleFill_=Jr[2],Ci&&(this.fill_(A),Ci=0,xi&&(A.stroke(),xi=0)),A.fillStyle=Jr[1],++Gt;break;case pi.SET_STROKE_STYLE:Xa=Jr,xi&&(A.stroke(),xi=0),this.setStrokeStyle_(A,Jr),++Gt;break;case pi.STROKE:ao?xi++:A.stroke(),++Gt;break;default:++Gt}}Ci&&this.fill_(A),xi&&A.stroke()}execute(A,B,J,se,Se,Re){this.viewRotation_=se,this.execute_(A,B,J,this.instructions,Se,void 0,void 0,Re)}executeHitDetection(A,B,J,se,Se){return this.viewRotation_=J,this.execute_(A,[A.canvas.width,A.canvas.height],B,this.hitDetectionInstructions,!0,se,Se)}},wu=["Polygon","Circle","LineString","Image","Text","Default"],xd=["Image","Text"],_d=wu.filter(ee=>!xd.includes(ee)),Bu={},Tc=class H0{constructor(A,B,J,se,Se,Re,Ze){this.maxExtent_=A,this.overlaps_=se,this.pixelRatio_=J,this.resolution_=B,this.renderBuffer_=Re,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(Se,Ze)}clip(A,B){const J=this.getClipCoords(B);A.beginPath(),A.moveTo(J[0],J[1]),A.lineTo(J[2],J[3]),A.lineTo(J[4],J[5]),A.lineTo(J[6],J[7]),A.clip()}createExecutors_(A,B){for(const J in A){let se=this.executorsByZIndex_[J];void 0===se&&(se={},this.executorsByZIndex_[J]=se);const Se=A[J];for(const Re in Se)se[Re]=new Dp(this.resolution_,this.pixelRatio_,this.overlaps_,Se[Re],B)}}hasExecutors(A){for(const B in this.executorsByZIndex_){const J=this.executorsByZIndex_[B];for(let se=0,Se=A.length;se<Se;++se)if(A[se]in J)return!0}return!1}forEachFeatureAtCoordinate(A,B,J,se,Se,Re){const Ze=2*(se=Math.round(se))+1,$e=Uo(this.hitDetectionTransform_,se+.5,se+.5,1/B,-1/B,-J,-A[0],-A[1]),wt=!this.hitDetectionContext_;wt&&(this.hitDetectionContext_=Mr(Ze,Ze,void 0,{willReadFrequently:!0}));const bt=this.hitDetectionContext_;let Gt;bt.canvas.width!==Ze||bt.canvas.height!==Ze?(bt.canvas.width=Ze,bt.canvas.height=Ze):wt||bt.clearRect(0,0,Ze,Ze),void 0!==this.renderBuffer_&&(Gt=[1/0,1/0,-1/0,-1/0],hn(Gt,A),At(Gt,B*(this.renderBuffer_+se),Gt));const rn=function $a(ee){if(void 0!==Bu[ee])return Bu[ee];const A=2*ee+1,B=ee*ee,J=new Array(B+1);for(let Se=0;Se<=ee;++Se)for(let Re=0;Re<=ee;++Re){const Ze=Se*Se+Re*Re;if(Ze>B)break;let $e=J[Ze];$e||($e=[],J[Ze]=$e),$e.push(4*((ee+Se)*A+(ee+Re))+3),Se>0&&$e.push(4*((ee-Se)*A+(ee+Re))+3),Re>0&&($e.push(4*((ee+Se)*A+(ee-Re))+3),Se>0&&$e.push(4*((ee-Se)*A+(ee-Re))+3))}const se=[];for(let Se=0,Re=J.length;Se<Re;++Se)J[Se]&&se.push(...J[Se]);return Bu[ee]=se,se}(se);let _n;function Cn(Tr,Yr,Zr){const qr=bt.getImageData(0,0,Ze,Ze).data;for(let Gr=0,Ri=rn.length;Gr<Ri;Gr++)if(qr[rn[Gr]]>0){if(!Re||"none"===Zr||"Image"!==_n&&"Text"!==_n||Re.includes(Tr)){const Ci=(rn[Gr]-3)/4,xi=se-Ci%Ze,Bi=se-(Ci/Ze|0),Xa=Se(Tr,Yr,xi*xi+Bi*Bi);if(Xa)return Xa}bt.clearRect(0,0,Ze,Ze);break}}const jn=Object.keys(this.executorsByZIndex_).map(Number);let Yn,er,rr,Ar,Er;for(jn.sort(l),Yn=jn.length-1;Yn>=0;--Yn){const Tr=jn[Yn].toString();for(rr=this.executorsByZIndex_[Tr],er=wu.length-1;er>=0;--er)if(_n=wu[er],Ar=rr[_n],void 0!==Ar&&(Er=Ar.executeHitDetection(bt,$e,J,Cn,Gt),Er))return Er}}getClipCoords(A){const B=this.maxExtent_;if(!B)return null;const J=B[0],se=B[1],Se=B[2],Re=B[3],Ze=[J,se,J,Re,Se,Re,Se,se];return Lo(Ze,0,8,2,A,Ze),Ze}isEmpty(){return v(this.executorsByZIndex_)}execute(A,B,J,se,Se,Re,Ze){const $e=Object.keys(this.executorsByZIndex_).map(Number);$e.sort(l),Re=Re||wu;const wt=wu.length;let bt,Gt,rn,_n,Cn;for(Ze&&$e.reverse(),bt=0,Gt=$e.length;bt<Gt;++bt){const jn=$e[bt].toString();for(Cn=this.executorsByZIndex_[jn],rn=0,_n=Re.length;rn<_n;++rn){const Yn=Re[rn],er=Cn[Yn];if(void 0!==er){const rr=null===Ze?void 0:er.getZIndexContext(),Ar=rr?rr.getContext():A,Er=this.maxExtent_&&"Image"!==Yn&&"Text"!==Yn;if(Er&&(Ar.save(),this.clip(Ar,J)),rr&&"Text"!==Yn&&"Image"!==Yn?rr.pushFunction(Tr=>er.execute(Tr,B,J,se,Se,Ze)):er.execute(Ar,B,J,se,Se,Ze),Er&&Ar.restore(),rr){rr.offset();const Tr=$e[bt]*wt+rn;this.deferredZIndexContexts_[Tr]||(this.deferredZIndexContexts_[Tr]=[]),this.deferredZIndexContexts_[Tr].push(rr)}}}}this.renderedContext_=A}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const A=this.deferredZIndexContexts_,B=Object.keys(A).map(Number).sort(l);for(let J=0,se=B.length;J<se;++J)A[B[J]].forEach(Se=>{Se.draw(this.renderedContext_),Se.clear()}),A[B[J]].length=0}},Tu=class q0 extends bu{constructor(A,B,J,se,Se,Re,Ze){super(),this.context_=A,this.pixelRatio_=B,this.extent_=J,this.transform_=se,this.transformRotation_=se?Ie(Math.atan2(se[1],se[0]),10):0,this.viewRotation_=Se,this.squaredTolerance_=Re,this.userTransform_=Ze,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}drawImages_(A,B,J,se){if(!this.image_)return;const Se=Lo(A,B,J,se,this.transform_,this.pixelCoordinates_),Re=this.context_,Ze=this.tmpLocalTransform_,$e=Re.globalAlpha;1!=this.imageOpacity_&&(Re.globalAlpha=$e*this.imageOpacity_);let wt=this.imageRotation_;0===this.transformRotation_&&(wt-=this.viewRotation_),this.imageRotateWithView_&&(wt+=this.viewRotation_);for(let bt=0,Gt=Se.length;bt<Gt;bt+=2){const rn=Se[bt]-this.imageAnchorX_,_n=Se[bt+1]-this.imageAnchorY_;if(0!==wt||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const Cn=rn+this.imageAnchorX_,jn=_n+this.imageAnchorY_;Uo(Ze,Cn,jn,1,1,wt,-Cn,-jn),Re.save(),Re.transform.apply(Re,Ze),Re.translate(Cn,jn),Re.scale(this.imageScale_[0],this.imageScale_[1]),Re.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),Re.restore()}else Re.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,rn,_n,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(Re.globalAlpha=$e)}drawText_(A,B,J,se){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const Se=Lo(A,B,J,se,this.transform_,this.pixelCoordinates_),Re=this.context_;let Ze=this.textRotation_;for(0===this.transformRotation_&&(Ze-=this.viewRotation_),this.textRotateWithView_&&(Ze+=this.viewRotation_);B<J;B+=se){const $e=Se[B]+this.textOffsetX_,wt=Se[B+1]+this.textOffsetY_;0!==Ze||1!=this.textScale_[0]||1!=this.textScale_[1]?(Re.save(),Re.translate($e-this.textOffsetX_,wt-this.textOffsetY_),Re.rotate(Ze),Re.translate(this.textOffsetX_,this.textOffsetY_),Re.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&Re.strokeText(this.text_,0,0),this.textFillState_&&Re.fillText(this.text_,0,0),Re.restore()):(this.textStrokeState_&&Re.strokeText(this.text_,$e,wt),this.textFillState_&&Re.fillText(this.text_,$e,wt))}}moveToLineTo_(A,B,J,se,Se){const Re=this.context_,Ze=Lo(A,B,J,se,this.transform_,this.pixelCoordinates_);Re.moveTo(Ze[0],Ze[1]);let $e=Ze.length;Se&&($e-=2);for(let wt=2;wt<$e;wt+=2)Re.lineTo(Ze[wt],Ze[wt+1]);return Se&&Re.closePath(),J}drawRings_(A,B,J,se){for(let Se=0,Re=J.length;Se<Re;++Se)B=this.moveToLineTo_(A,B,J[Se],se,!0);return B}drawCircle(A){if(this.squaredTolerance_&&(A=A.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),tr(this.extent_,A.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const B=function Vo(ee,A,B){const J=ee.getFlatCoordinates();if(!J)return null;const se=ee.getStride();return Lo(J,0,J.length,se,A,B)}(A,this.transform_,this.pixelCoordinates_),J=B[2]-B[0],se=B[3]-B[1],Se=Math.sqrt(J*J+se*se),Re=this.context_;Re.beginPath(),Re.arc(B[0],B[1],Se,0,2*Math.PI),this.fillState_&&Re.fill(),this.strokeState_&&Re.stroke()}""!==this.text_&&this.drawText_(A.getCenter(),0,2,2)}}setStyle(A){this.setFillStrokeStyle(A.getFill(),A.getStroke()),this.setImageStyle(A.getImage()),this.setTextStyle(A.getText())}setTransform(A){this.transform_=A}drawGeometry(A){switch(A.getType()){case"Point":this.drawPoint(A);break;case"LineString":this.drawLineString(A);break;case"Polygon":this.drawPolygon(A);break;case"MultiPoint":this.drawMultiPoint(A);break;case"MultiLineString":this.drawMultiLineString(A);break;case"MultiPolygon":this.drawMultiPolygon(A);break;case"GeometryCollection":this.drawGeometryCollection(A);break;case"Circle":this.drawCircle(A)}}drawFeature(A,B){const J=B.getGeometryFunction()(A);J&&(this.setStyle(B),this.drawGeometry(J))}drawGeometryCollection(A){const B=A.getGeometriesArray();for(let J=0,se=B.length;J<se;++J)this.drawGeometry(B[J])}drawPoint(A){this.squaredTolerance_&&(A=A.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const B=A.getFlatCoordinates(),J=A.getStride();this.image_&&this.drawImages_(B,0,B.length,J),""!==this.text_&&this.drawText_(B,0,B.length,J)}drawMultiPoint(A){this.squaredTolerance_&&(A=A.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const B=A.getFlatCoordinates(),J=A.getStride();this.image_&&this.drawImages_(B,0,B.length,J),""!==this.text_&&this.drawText_(B,0,B.length,J)}drawLineString(A){if(this.squaredTolerance_&&(A=A.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),tr(this.extent_,A.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const B=this.context_,J=A.getFlatCoordinates();B.beginPath(),this.moveToLineTo_(J,0,J.length,A.getStride(),!1),B.stroke()}if(""!==this.text_){const B=A.getFlatMidpoint();this.drawText_(B,0,2,2)}}}drawMultiLineString(A){this.squaredTolerance_&&(A=A.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const B=A.getExtent();if(tr(this.extent_,B)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const J=this.context_,se=A.getFlatCoordinates();let Se=0;const Re=A.getEnds(),Ze=A.getStride();J.beginPath();for(let $e=0,wt=Re.length;$e<wt;++$e)Se=this.moveToLineTo_(se,Se,Re[$e],Ze,!1);J.stroke()}if(""!==this.text_){const J=A.getFlatMidpoints();this.drawText_(J,0,J.length,2)}}}drawPolygon(A){if(this.squaredTolerance_&&(A=A.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),tr(this.extent_,A.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const B=this.context_;B.beginPath(),this.drawRings_(A.getOrientedFlatCoordinates(),0,A.getEnds(),A.getStride()),this.fillState_&&B.fill(),this.strokeState_&&B.stroke()}if(""!==this.text_){const B=A.getFlatInteriorPoint();this.drawText_(B,0,2,2)}}}drawMultiPolygon(A){if(this.squaredTolerance_&&(A=A.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),tr(this.extent_,A.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const B=this.context_,J=A.getOrientedFlatCoordinates();let se=0;const Se=A.getEndss(),Re=A.getStride();B.beginPath();for(let Ze=0,$e=Se.length;Ze<$e;++Ze)se=this.drawRings_(J,se,Se[Ze],Re);this.fillState_&&B.fill(),this.strokeState_&&B.stroke()}if(""!==this.text_){const B=A.getFlatInteriorPoints();this.drawText_(B,0,B.length,2)}}}setContextFillState_(A){const B=this.context_,J=this.contextFillState_;J?J.fillStyle!=A.fillStyle&&(J.fillStyle=A.fillStyle,B.fillStyle=A.fillStyle):(B.fillStyle=A.fillStyle,this.contextFillState_={fillStyle:A.fillStyle})}setContextStrokeState_(A){const B=this.context_,J=this.contextStrokeState_;J?(J.lineCap!=A.lineCap&&(J.lineCap=A.lineCap,B.lineCap=A.lineCap),s(J.lineDash,A.lineDash)||B.setLineDash(J.lineDash=A.lineDash),J.lineDashOffset!=A.lineDashOffset&&(J.lineDashOffset=A.lineDashOffset,B.lineDashOffset=A.lineDashOffset),J.lineJoin!=A.lineJoin&&(J.lineJoin=A.lineJoin,B.lineJoin=A.lineJoin),J.lineWidth!=A.lineWidth&&(J.lineWidth=A.lineWidth,B.lineWidth=A.lineWidth),J.miterLimit!=A.miterLimit&&(J.miterLimit=A.miterLimit,B.miterLimit=A.miterLimit),J.strokeStyle!=A.strokeStyle&&(J.strokeStyle=A.strokeStyle,B.strokeStyle=A.strokeStyle)):(B.lineCap=A.lineCap,B.setLineDash(A.lineDash),B.lineDashOffset=A.lineDashOffset,B.lineJoin=A.lineJoin,B.lineWidth=A.lineWidth,B.miterLimit=A.miterLimit,B.strokeStyle=A.strokeStyle,this.contextStrokeState_={lineCap:A.lineCap,lineDash:A.lineDash,lineDashOffset:A.lineDashOffset,lineJoin:A.lineJoin,lineWidth:A.lineWidth,miterLimit:A.miterLimit,strokeStyle:A.strokeStyle})}setContextTextState_(A){const B=this.context_,J=this.contextTextState_,se=A.textAlign?A.textAlign:Ql;J?(J.font!=A.font&&(J.font=A.font,B.font=A.font),J.textAlign!=se&&(J.textAlign=se,B.textAlign=se),J.textBaseline!=A.textBaseline&&(J.textBaseline=A.textBaseline,B.textBaseline=A.textBaseline)):(B.font=A.font,B.textAlign=se,B.textBaseline=A.textBaseline,this.contextTextState_={font:A.font,textAlign:se,textBaseline:A.textBaseline})}setFillStrokeStyle(A,B){if(A){const J=A.getColor();this.fillState_={fillStyle:bi(J||Yi)}}else this.fillState_=null;if(B){const J=B.getColor(),se=B.getLineCap(),Se=B.getLineDash(),Re=B.getLineDashOffset(),Ze=B.getLineJoin(),$e=B.getWidth(),wt=B.getMiterLimit(),bt=Se||pc;this.strokeState_={lineCap:void 0!==se?se:Kl,lineDash:1===this.pixelRatio_?bt:bt.map(Gt=>Gt*this.pixelRatio_),lineDashOffset:(Re||0)*this.pixelRatio_,lineJoin:void 0!==Ze?Ze:gu,lineWidth:(void 0!==$e?$e:1)*this.pixelRatio_,miterLimit:void 0!==wt?wt:10,strokeStyle:bi(J||Su)}}else this.strokeState_=null}setImageStyle(A){let B;if(!A||!(B=A.getSize()))return void(this.image_=null);const J=A.getPixelRatio(this.pixelRatio_),se=A.getAnchor(),Se=A.getOrigin();this.image_=A.getImage(this.pixelRatio_),this.imageAnchorX_=se[0]*J,this.imageAnchorY_=se[1]*J,this.imageHeight_=B[1]*J,this.imageOpacity_=A.getOpacity(),this.imageOriginX_=Se[0],this.imageOriginY_=Se[1],this.imageRotateWithView_=A.getRotateWithView(),this.imageRotation_=A.getRotation();const Re=A.getScaleArray();this.imageScale_=[Re[0]*this.pixelRatio_/J,Re[1]*this.pixelRatio_/J],this.imageWidth_=B[0]*J}setTextStyle(A){if(A){const B=A.getFill();if(B){const _n=B.getColor();this.textFillState_={fillStyle:bi(_n||Yi)}}else this.textFillState_=null;const J=A.getStroke();if(J){const _n=J.getColor(),Cn=J.getLineCap(),jn=J.getLineDash(),Yn=J.getLineDashOffset(),er=J.getLineJoin(),rr=J.getWidth(),Ar=J.getMiterLimit();this.textStrokeState_={lineCap:void 0!==Cn?Cn:Kl,lineDash:jn||pc,lineDashOffset:Yn||0,lineJoin:void 0!==er?er:gu,lineWidth:void 0!==rr?rr:1,miterLimit:void 0!==Ar?Ar:10,strokeStyle:bi(_n||Su)}}else this.textStrokeState_=null;const se=A.getFont(),Se=A.getOffsetX(),Re=A.getOffsetY(),Ze=A.getRotateWithView(),$e=A.getRotation(),wt=A.getScaleArray(),bt=A.getText(),Gt=A.getTextAlign(),rn=A.getTextBaseline();this.textState_={font:void 0!==se?se:Ro,textAlign:void 0!==Gt?Gt:Ql,textBaseline:void 0!==rn?rn:Cu},this.text_=void 0!==bt?Array.isArray(bt)?bt.reduce((_n,Cn,jn)=>_n+(jn%2?" ":Cn),""):bt:"",this.textOffsetX_=void 0!==Se?this.pixelRatio_*Se:0,this.textOffsetY_=void 0!==Re?this.pixelRatio_*Re:0,this.textRotateWithView_=void 0!==Ze&&Ze,this.textRotation_=void 0!==$e?$e:0,this.textScale_=[this.pixelRatio_*wt[0],this.pixelRatio_*wt[1]]}else this.text_=""}},rc=.5,Uc=.5,Jh={Point:function vl(ee,A,B,J,se,Se){const Re=B.getImage(),Ze=B.getText(),$e=Ze&&Ze.getText(),wt=Se&&Re&&$e?{}:void 0;if(Re){if(Re.getImageState()!=gi_LOADED)return;const bt=ee.getBuilder(B.getZIndex(),"Image");bt.setImageStyle(Re,wt),bt.drawPoint(A,J,se)}if($e){const bt=ee.getBuilder(B.getZIndex(),"Text");bt.setTextStyle(Ze,wt),bt.drawText(A,J,se)}},LineString:function Bp(ee,A,B,J,se){const Se=B.getStroke();if(Se){const Ze=ee.getBuilder(B.getZIndex(),"LineString");Ze.setFillStrokeStyle(null,Se),Ze.drawLineString(A,J,se)}const Re=B.getText();if(Re&&Re.getText()){const Ze=ee.getBuilder(B.getZIndex(),"Text");Ze.setTextStyle(Re),Ze.drawText(A,J,se)}},Polygon:function Up(ee,A,B,J,se){const Se=B.getFill(),Re=B.getStroke();if(Se||Re){const $e=ee.getBuilder(B.getZIndex(),"Polygon");$e.setFillStrokeStyle(Se,Re),$e.drawPolygon(A,J,se)}const Ze=B.getText();if(Ze&&Ze.getText()){const $e=ee.getBuilder(B.getZIndex(),"Text");$e.setTextStyle(Ze),$e.drawText(A,J,se)}},MultiPoint:function Ff(ee,A,B,J,se,Se){const Re=B.getImage(),Ze=Re&&0!==Re.getOpacity(),$e=B.getText(),wt=$e&&$e.getText(),bt=Se&&Ze&&wt?{}:void 0;if(Ze){if(Re.getImageState()!=gi_LOADED)return;const Gt=ee.getBuilder(B.getZIndex(),"Image");Gt.setImageStyle(Re,bt),Gt.drawMultiPoint(A,J,se)}if(wt){const Gt=ee.getBuilder(B.getZIndex(),"Text");Gt.setTextStyle($e,bt),Gt.drawText(A,J,se)}},MultiLineString:function Np(ee,A,B,J,se){const Se=B.getStroke();if(Se){const Ze=ee.getBuilder(B.getZIndex(),"LineString");Ze.setFillStrokeStyle(null,Se),Ze.drawMultiLineString(A,J,se)}const Re=B.getText();if(Re&&Re.getText()){const Ze=ee.getBuilder(B.getZIndex(),"Text");Ze.setTextStyle(Re),Ze.drawText(A,J,se)}},MultiPolygon:function jp(ee,A,B,J,se){const Se=B.getFill(),Re=B.getStroke();if(Re||Se){const $e=ee.getBuilder(B.getZIndex(),"Polygon");$e.setFillStrokeStyle(Se,Re),$e.drawMultiPolygon(A,J,se)}const Ze=B.getText();if(Ze&&Ze.getText()){const $e=ee.getBuilder(B.getZIndex(),"Text");$e.setTextStyle(Ze),$e.drawText(A,J,se)}},GeometryCollection:function Fp(ee,A,B,J,se,Se){const Re=A.getGeometriesArray();let Ze,$e;for(Ze=0,$e=Re.length;Ze<$e;++Ze)(0,Jh[Re[Ze].getType()])(ee,Re[Ze],B,J,se,Se)},Circle:function bd(ee,A,B,J,se){const Se=B.getFill(),Re=B.getStroke();if(Se||Re){const $e=ee.getBuilder(B.getZIndex(),"Circle");$e.setFillStrokeStyle(Se,Re),$e.drawCircle(A,J,se)}const Ze=B.getText();if(Ze&&Ze.getText()){const $e=ee.getBuilder(B.getZIndex(),"Text");$e.setTextStyle(Ze),$e.drawText(A,J)}}};function $h(ee,A){return parseInt(U(ee),10)-parseInt(U(A),10)}function Qh(ee,A){const B=ef(ee,A);return B*B}function ef(ee,A){return Uc*ee/A}function wd(ee,A,B,J,se,Se,Re,Ze){const $e=[],wt=B.getImage();if(wt){let rn=!0;const _n=wt.getImageState();_n==gi_LOADED||_n==gi_ERROR?rn=!1:_n==gi_IDLE&&wt.load(),rn&&$e.push(wt.ready())}const bt=B.getFill();bt&&bt.loading()&&$e.push(bt.ready());const Gt=$e.length>0;return Gt&&Promise.all($e).then(()=>se(null)),function tf(ee,A,B,J,se,Se,Re){const Ze=B.getGeometryFunction()(A);if(!Ze)return;const $e=Ze.simplifyTransformed(J,se);B.getRenderer()?Td(ee,$e,B,A,Re):(0,Jh[$e.getType()])(ee,$e,B,A,Re,Se)}(ee,A,B,J,Se,Re,Ze),Gt}function Td(ee,A,B,J,se){if("GeometryCollection"!=A.getType())ee.getBuilder(B.getZIndex(),"Default").drawCustom(A,J,B.getRenderer(),B.getHitDetectionRenderer(),se);else{const Re=A.getGeometries();for(let Ze=0,$e=Re.length;Ze<$e;++Ze)Td(ee,Re[Ze],B,J,se)}}const W0=class Vc extends fd{constructor(A){super(A),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(A,B,J){const se=B.extent,Se=B.viewState,Re=Se.center,Ze=Se.resolution,$e=Se.projection,wt=Se.rotation,bt=$e.getExtent(),Gt=this.getLayer().getSource(),rn=this.getLayer().getDeclutter(),_n=B.pixelRatio,Cn=B.viewHints,jn=!(Cn[0]||Cn[1]),Yn=this.context,er=Math.round(Kn(se)/Ze*_n),rr=Math.round(or(se)/Ze*_n),Ar=Gt.getWrapX()&&$e.canWrapX(),Er=Ar?Kn(bt):null,Tr=Ar?Math.ceil((se[2]-bt[2])/Er)+1:1;let Yr=Ar?Math.floor((se[0]-bt[0])/Er):0;do{let Zr=this.getRenderTransform(Re,Ze,0,_n,er,rr,Yr*Er);B.declutter&&(Zr=Zr.slice(0)),A.execute(Yn,[Yn.canvas.width,Yn.canvas.height],Zr,wt,jn,void 0===J?wu:J?xd:_d,J?rn&&B.declutter[rn]:void 0)}while(++Yr<Tr)}setDrawContext_(){1!==this.opacity_&&(this.targetContext_=this.context,this.context=Mr(this.context.canvas.width,this.context.canvas.height,Af))}resetDrawContext_(){if(1!==this.opacity_){const A=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=A,Nr(this.context),Af.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(A){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,A,!0)}renderDeferredInternal(A){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(A,B){const J=A.layerStatesArray[A.layerIndex];this.opacity_=J.opacity;const se=A.viewState;this.prepareContainer(A,B);const Se=this.context,Re=this.replayGroup_;let Ze=Re&&!Re.isEmpty();if(!Ze&&!this.getLayer().hasListener("prerender")&&!this.getLayer().hasListener("postrender"))return null;this.setDrawContext_(),this.preRender(Se,A);if(this.clipped_=!1,Ze&&J.extent&&this.clipping){const wt=jo(J.extent);Ze=tr(wt,A.extent),this.clipped_=Ze&&!Ct(wt,A.extent),this.clipped_&&this.clipUnrotated(Se,A,wt)}return Ze&&this.renderWorlds(Re,A,!this.getLayer().getDeclutter()&&void 0),!A.declutter&&this.clipped_&&Se.restore(),this.postRender(Se,A),this.renderedRotation_!==se.rotation&&(this.renderedRotation_=se.rotation,this.hitDetectionImageData_=null),A.declutter||this.resetDrawContext_(),this.container}getFeatures(A){return new Promise(B=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const J=this.frameState.size.slice(),se=this.renderedCenter_,Se=this.renderedResolution_,Re=this.renderedRotation_,Ze=this.renderedProjection_,$e=this.wrappedRenderedExtent_,wt=this.getLayer(),bt=[],Gt=J[0]*rc,rn=J[1]*rc;bt.push(this.getRenderTransform(se,Se,Re,rc,Gt,rn,0).slice());const _n=wt.getSource(),Cn=Ze.getExtent();if(_n.getWrapX()&&Ze.canWrapX()&&!Ct(Cn,$e)){let Yn=$e[0];const er=Kn(Cn);let Ar,rr=0;for(;Yn<Cn[0];)--rr,Ar=er*rr,bt.push(this.getRenderTransform(se,Se,Re,rc,Gt,rn,Ar).slice()),Yn+=er;for(rr=0,Yn=$e[2];Yn>Cn[2];)++rr,Ar=er*rr,bt.push(this.getRenderTransform(se,Se,Re,rc,Gt,rn,Ar).slice()),Yn-=er}const jn=Ul();this.hitDetectionImageData_=function zp(ee,A,B,J,se,Se,Re,Ze,$e){const wt=$e?ac(se):se,rn=Mr(ee[0]*rc,ee[1]*rc);rn.imageSmoothingEnabled=!1;const _n=rn.canvas,Cn=new Tu(rn,rc,se,null,Re,Ze,$e?To(Ul(),$e):null),jn=B.length,Yn=Math.floor(16777215/jn),er={};for(let Ar=1;Ar<=jn;++Ar){const Er=B[Ar-1],Tr=Er.getStyleFunction()||J;if(!Tr)continue;let Yr=Tr(Er,Se);if(!Yr)continue;Array.isArray(Yr)||(Yr=[Yr]);const qr=(Ar*Yn).toString(16).padStart(7,"#00000");for(let Gr=0,Ri=Yr.length;Gr<Ri;++Gr){const Ci=Yr[Gr],xi=Ci.getGeometryFunction()(Er);if(!xi||!tr(wt,xi.getExtent()))continue;const Bi=Ci.clone(),Xa=Bi.getFill();Xa&&Xa.setColor(qr);const yi=Bi.getStroke();yi&&(yi.setColor(qr),yi.setLineDash(null)),Bi.setText(void 0);const si=Ci.getImage();if(si){const Qi=si.getImageSize();if(!Qi)continue;const Ta=Mr(Qi[0],Qi[1],void 0,{alpha:!1}),va=Ta.canvas;Ta.fillStyle=qr,Ta.fillRect(0,0,va.width,va.height),Bi.setImage(new Eu({img:va,anchor:si.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:si.getOrigin(),opacity:1,size:si.getSize(),scale:si.getScale(),rotation:si.getRotation(),rotateWithView:si.getRotateWithView()}))}const Mi=Bi.getZIndex()||0;let Ni=er[Mi];Ni||(Ni={},er[Mi]=Ni,Ni.Polygon=[],Ni.Circle=[],Ni.LineString=[],Ni.Point=[]);const ao=xi.getType();if("GeometryCollection"===ao){const Qi=xi.getGeometriesArrayRecursive();for(let Ta=0,va=Qi.length;Ta<va;++Ta){const oo=Qi[Ta];Ni[oo.getType().replace("Multi","")].push(oo,Bi)}}else Ni[ao.replace("Multi","")].push(xi,Bi)}}const rr=Object.keys(er).map(Number).sort(l);for(let Ar=0,Er=rr.length;Ar<Er;++Ar){const Tr=er[rr[Ar]];for(const Yr in Tr){const Zr=Tr[Yr];for(let qr=0,Gr=Zr.length;qr<Gr;qr+=2){Cn.setStyle(Zr[qr+1]);for(let Ri=0,Ci=A.length;Ri<Ci;++Ri)Cn.setTransform(A[Ri]),Cn.drawGeometry(Zr[qr])}}}return rn.getImageData(0,0,_n.width,_n.height)}(J,bt,this.renderedFeatures_,wt.getStyleFunction(),$e,Se,Re,Qh(Se,this.renderedPixelRatio_),jn?Ze:null)}B(function zf(ee,A,B){const J=[];if(B){const se=Math.floor(Math.round(ee[0])*rc),Se=Math.floor(Math.round(ee[1])*rc),Re=4*(fe(se,0,B.width-1)+fe(Se,0,B.height-1)*B.width),bt=B.data[Re+2]+256*(B.data[Re+1]+256*B.data[Re]),Gt=Math.floor(16777215/A.length);bt&&bt%Gt==0&&J.push(A[bt/Gt-1])}return J}(A,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(A,B,J,se,Se){if(!this.replayGroup_)return;const Re=B.viewState.resolution,Ze=B.viewState.rotation,$e=this.getLayer(),wt={},bt=function(Cn,jn,Yn){const er=U(Cn),rr=wt[er];if(rr){if(!0!==rr&&Yn<rr.distanceSq){if(0===Yn)return wt[er]=!0,Se.splice(Se.lastIndexOf(rr),1),se(Cn,$e,jn);rr.geometry=jn,rr.distanceSq=Yn}}else{if(0===Yn)return wt[er]=!0,se(Cn,$e,jn);Se.push(wt[er]={feature:Cn,layer:$e,geometry:jn,distanceSq:Yn,callback:se})}};let Gt;const rn=[this.replayGroup_],_n=this.getLayer().getDeclutter();return rn.some(Cn=>Gt=Cn.forEachFeatureAtCoordinate(A,Re,Ze,J,bt,_n&&B.declutter[_n]?B.declutter[_n].all().map(jn=>jn.value):null)),Gt}handleFontsChanged(){const A=this.getLayer();A.getVisible()&&this.replayGroup_&&A.changed()}handleStyleImageChange_(A){this.renderIfReadyAndVisible()}prepareFrame(A){const B=this.getLayer(),J=B.getSource();if(!J)return!1;const se=A.viewHints[0],Se=A.viewHints[1],Re=B.getUpdateWhileAnimating(),Ze=B.getUpdateWhileInteracting();if(this.ready&&!Re&&se||!Ze&&Se)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const $e=A.extent,wt=A.viewState,bt=wt.projection,Gt=wt.resolution,rn=A.pixelRatio,_n=B.getRevision(),Cn=B.getRenderBuffer();let jn=B.getRenderOrder();void 0===jn&&(jn=$h);const Yn=wt.center.slice(),er=At($e,Cn*Gt),rr=er.slice(),Ar=[er.slice()],Er=bt.getExtent();if(J.getWrapX()&&bt.canWrapX()&&!Ct(Er,A.extent)){const yi=Kn(Er),si=Math.max(Kn(er)/2,yi);er[0]=Er[0]-si,er[2]=Er[2]+si,gr(Yn,bt);const Mi=Zt(Ar[0],bt);Mi[0]<Er[0]&&Mi[2]<Er[2]?Ar.push([Mi[0]+yi,Mi[1],Mi[2]+yi,Mi[3]]):Mi[0]>Er[0]&&Mi[2]>Er[2]&&Ar.push([Mi[0]-yi,Mi[1],Mi[2]-yi,Mi[3]])}if(this.ready&&this.renderedResolution_==Gt&&this.renderedRevision_==_n&&this.renderedRenderOrder_==jn&&this.renderedFrameDeclutter_===!!A.declutter&&Ct(this.wrappedRenderedExtent_,er))return s(this.renderedExtent_,rr)||(this.hitDetectionImageData_=null,this.renderedExtent_=rr),this.renderedCenter_=Yn,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const Tr=new Lf(ef(Gt,rn),er,Gt,rn),Yr=Ul();let Zr;if(Yr){for(let yi=0,si=Ar.length;yi<si;++yi){const Ni=ac(Ar[yi]);J.loadFeatures(Ni,Gt,Yr)}Zr=To(Yr,bt)}else for(let yi=0,si=Ar.length;yi<si;++yi)J.loadFeatures(Ar[yi],Gt,bt);const qr=Qh(Gt,rn);let Gr=!0;const Ri=(yi,si)=>{let Mi;const Ni=yi.getStyleFunction()||B.getStyleFunction();if(Ni&&(Mi=Ni(yi,Gt)),Mi){const ao=this.renderFeature(yi,qr,Mi,Tr,Zr,this.getLayer().getDeclutter(),si);Gr=Gr&&!ao}},Ci=ac(er),xi=J.getFeaturesInExtent(Ci);jn&&xi.sort(jn);for(let yi=0,si=xi.length;yi<si;++yi)Ri(xi[yi],yi);this.renderedFeatures_=xi,this.ready=Gr;const Bi=Tr.finish(),Xa=new Tc(er,Gt,rn,J.getOverlaps(),Bi,B.getRenderBuffer(),!!A.declutter);return this.renderedResolution_=Gt,this.renderedRevision_=_n,this.renderedRenderOrder_=jn,this.renderedFrameDeclutter_=!!A.declutter,this.renderedExtent_=rr,this.wrappedRenderedExtent_=er,this.renderedCenter_=Yn,this.renderedProjection_=bt,this.renderedPixelRatio_=rn,this.replayGroup_=Xa,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(A,B,J,se,Se,Re,Ze){if(!J)return!1;let $e=!1;if(Array.isArray(J))for(let wt=0,bt=J.length;wt<bt;++wt)$e=wd(se,A,J[wt],B,this.boundHandleStyleImageChange_,Se,Re,Ze)||$e;else $e=wd(se,A,J,B,this.boundHandleStyleImageChange_,Se,Re,Ze);return $e}},Au=class Vp extends Nh{constructor(A){super(A)}createRenderer(){return new W0(this)}},Nu=class wh{constructor(A){this.rbush_=new La(A),this.items_={}}insert(A,B){const J={minX:A[0],minY:A[1],maxX:A[2],maxY:A[3],value:B};this.rbush_.insert(J),this.items_[U(B)]=J}load(A,B){const J=new Array(B.length);for(let se=0,Se=B.length;se<Se;se++){const Re=A[se],Ze=B[se],$e={minX:Re[0],minY:Re[1],maxX:Re[2],maxY:Re[3],value:Ze};J[se]=$e,this.items_[U(Ze)]=$e}this.rbush_.load(J)}remove(A){const B=U(A),J=this.items_[B];return delete this.items_[B],null!==this.rbush_.remove(J)}update(A,B){const J=this.items_[U(B)];qn([J.minX,J.minY,J.maxX,J.maxY],A)||(this.remove(B),this.insert(A,B))}getAll(){return this.rbush_.all().map(function(B){return B.value})}getInExtent(A){return this.rbush_.search({minX:A[0],minY:A[1],maxX:A[2],maxY:A[3]}).map(function(se){return se.value})}forEach(A){return this.forEach_(this.getAll(),A)}forEachInExtent(A,B){return this.forEach_(this.getInExtent(A),B)}forEach_(A,B){let J;for(let se=0,Se=A.length;se<Se;se++)if(J=B(A[se]),J)return J;return J}isEmpty(){return v(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(A){const B=this.rbush_.toJSON();return qt(B.minX,B.minY,B.maxX,B.maxY,A)}concat(A){this.rbush_.load(A.rbush_.all());for(const B in A.items_)this.items_[B]=A.items_[B]}};function ju(ee,A,B,J,se,Se,Re){let Ze,$e;const wt=(B-A)/J;if(1===wt)Ze=A;else if(2===wt)Ze=A,$e=se;else if(0!==wt){let bt=ee[A],Gt=ee[A+1],rn=0;const _n=[0];for(let Yn=A+J;Yn<B;Yn+=J){const er=ee[Yn],rr=ee[Yn+1];rn+=Math.sqrt((er-bt)*(er-bt)+(rr-Gt)*(rr-Gt)),_n.push(rn),bt=er,Gt=rr}const Cn=se*rn,jn=function p(ee,A,B){let J,se;B=B||l;let Se=0,Re=ee.length,Ze=!1;for(;Se<Re;)J=Se+(Re-Se>>1),se=+B(ee[J],A),se<0?Se=J+1:(Re=J,Ze=!se);return Ze?Se:~Se}(_n,Cn);jn<0?($e=(Cn-_n[-jn-2])/(_n[-jn-1]-_n[-jn-2]),Ze=A+(-jn-2)*J):Ze=A+jn*J}Re=Re>1?Re:2,Se=Se||new Array(Re);for(let bt=0;bt<Re;++bt)Se[bt]=void 0===Ze?NaN:void 0===$e?ee[Ze+bt]:_e(ee[Ze+bt],ee[Ze+J+bt],$e);return Se}const Ad=[1,0,0,1,0,0];class Vu{constructor(A,B,J,se,Se,Re){this.id_=Re,this.type_=A,this.flatCoordinates_=B,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=J||null,this.properties_=Se,this.stride_=se}get(A){return this.properties_[A]}getExtent(){return this.extent_||(this.extent_="Point"===this.type_?mn(this.flatCoordinates_):sn(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const A=ir(this.getExtent());this.flatInteriorPoints_=xs(this.flatCoordinates_,0,this.ends_,2,A,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const A=function zs(ee,A){const B=[];let Se,J=0,se=0;for(let Re=0,Ze=A.length;Re<Ze;++Re){const $e=A[Re],wt=El(ee,J,$e,2);if(void 0===Se&&(Se=wt),wt===Se)B.push(A.slice(se,Re+1));else{if(0===B.length)continue;B[B.length-1].push(A[se])}se=Re+1,J=$e}return B}(this.flatCoordinates_,this.ends_),B=function Gp(ee,A,B,J){const se=[];let Se=[1/0,1/0,-1/0,-1/0];for(let Re=0,Ze=B.length;Re<Ze;++Re){const $e=B[Re];Se=sn(ee,A,$e[0],J),se.push((Se[0]+Se[2])/2,(Se[1]+Se[3])/2),A=$e[$e.length-1]}return se}(this.flatCoordinates_,0,A,2);this.flatInteriorPoints_=function qa(ee,A,B,J,se){let Se=[];for(let Re=0,Ze=B.length;Re<Ze;++Re){const $e=B[Re];Se=xs(ee,A,$e,J,se,2*Re,Se),A=$e[$e.length-1]}return Se}(this.flatCoordinates_,0,A,2,B)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=ju(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const A=this.flatCoordinates_;let B=0;const J=this.ends_;for(let se=0,Se=J.length;se<Se;++se){const Re=J[se],Ze=ju(A,B,Re,2,.5);n(this.flatMidpoints_,Ze),B=Re}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(A){return this}simplifyTransformed(A,B){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(A){const B=(A=Ia(A)).getExtent(),J=A.getWorldExtent();if(B&&J){const se=or(J)/or(B);Uo(Ad,J[0],J[3],se,-se,0,0,0),Lo(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Ad,this.flatCoordinates_)}}applyTransform(A){A(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new Vu(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=m((A,B)=>{if(A===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),B&&this.simplifiedGeometry_.applyTransform(B);const J=this.simplifiedGeometry_.getFlatCoordinates();let se;switch(this.type_){case"LineString":J.length=Wi(J,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,A,J,0),se=[J.length];break;case"MultiLineString":se=[],J.length=function Ha(ee,A,B,J,se,Se,Re,Ze){for(let $e=0,wt=B.length;$e<wt;++$e){const bt=B[$e];Re=Wi(ee,A,bt,J,se,Se,Re),Ze.push(Re),A=bt}return Re}(J,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,A,J,0,se);break;case"Polygon":se=[],J.length=uo(J,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(A),J,0,se)}return se&&(this.simplifiedGeometry_=new Vu(this.type_,J,se,2,this.properties_,this.id_)),this.squaredTolerance_=A,this.simplifiedGeometry_}),this}}Vu.prototype.getFlatCoordinates=Vu.prototype.getOrientedFlatCoordinates;const rl=Vu;function Md(ee,A){return[[-1/0,-1/0,1/0,1/0]]}function Cd(ee,A){return function(B,J,se,Se,Re){const Ze=this;!function Sd(ee,A,B,J,se,Se,Re){const Ze=new XMLHttpRequest;Ze.open("GET","function"==typeof ee?ee(B,J,se):ee,!0),"arraybuffer"==A.getType()&&(Ze.responseType="arraybuffer"),Ze.withCredentials=false,Ze.onload=function($e){if(!Ze.status||Ze.status>=200&&Ze.status<300){const wt=A.getType();try{let bt;"text"==wt||"json"==wt?bt=Ze.responseText:"xml"==wt?bt=Ze.responseXML||Ze.responseText:"arraybuffer"==wt&&(bt=Ze.response),bt?Se(A.readFeatures(bt,{extent:B,featureProjection:se}),A.readProjection(bt)):Re()}catch{Re()}}else Re()},Ze.onerror=Re,Ze.send()}(ee,A,B,J,se,function($e,wt){Ze.addFeatures($e),void 0!==Se&&Se($e)},Re||d)}}class Gc extends k{constructor(A,B,J){super(A),this.feature=B,this.features=J}}const Th=class Yp extends _a{constructor(A){super({attributions:(A=A||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===A.wrapX||A.wrapX}),this.loader_=d,this.format_=A.format,this.overlaps_=void 0===A.overlaps||A.overlaps,this.url_=A.url,void 0!==A.loader?this.loader_=A.loader:void 0!==this.url_&&(oe(this.format_,"`format` must be set when `url` is set"),this.loader_=Cd(this.url_,this.format_)),this.strategy_=void 0!==A.strategy?A.strategy:Md;const B=void 0===A.useSpatialIndex||A.useSpatialIndex;let J,se;this.featuresRtree_=B?new Nu:null,this.loadedExtentsRtree_=new Nu,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(A.features)?se=A.features:A.features&&(J=A.features,se=J.getArray()),!B&&void 0===J&&(J=new $(se)),void 0!==se&&this.addFeaturesInternal(se),void 0!==J&&this.bindFeaturesCollection_(J)}addFeature(A){this.addFeatureInternal(A),this.changed()}addFeatureInternal(A){const B=U(A);if(!this.addToIndex_(B,A))return void(this.featuresCollection_&&this.featuresCollection_.remove(A));this.setupChangeEvents_(B,A);const J=A.getGeometry();if(J){const se=J.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(se,A)}else this.nullGeometryFeatures_[B]=A;this.dispatchEvent(new Gc("addfeature",A))}setupChangeEvents_(A,B){B instanceof rl||(this.featureChangeKeys_[A]=[w(B,"change",this.handleFeatureChange_,this),w(B,"propertychange",this.handleFeatureChange_,this)])}addToIndex_(A,B){let J=!0;if(void 0!==B.getId()){const se=String(B.getId());if(se in this.idIndex_)if(B instanceof rl){const Se=this.idIndex_[se];Se instanceof rl?Array.isArray(Se)?Se.push(B):this.idIndex_[se]=[Se,B]:J=!1}else J=!1;else this.idIndex_[se]=B}return J&&(oe(!(A in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[A]=B),J}addFeatures(A){this.addFeaturesInternal(A),this.changed()}addFeaturesInternal(A){const B=[],J=[],se=[];for(let Se=0,Re=A.length;Se<Re;Se++){const Ze=A[Se],$e=U(Ze);this.addToIndex_($e,Ze)&&J.push(Ze)}for(let Se=0,Re=J.length;Se<Re;Se++){const Ze=J[Se],$e=U(Ze);this.setupChangeEvents_($e,Ze);const wt=Ze.getGeometry();if(wt){const bt=wt.getExtent();B.push(bt),se.push(Ze)}else this.nullGeometryFeatures_[$e]=Ze}if(this.featuresRtree_&&this.featuresRtree_.load(B,se),this.hasListener("addfeature"))for(let Se=0,Re=J.length;Se<Re;Se++)this.dispatchEvent(new Gc("addfeature",J[Se]))}bindFeaturesCollection_(A){let B=!1;this.addEventListener("addfeature",function(J){B||(B=!0,A.push(J.feature),B=!1)}),this.addEventListener("removefeature",function(J){B||(B=!0,A.remove(J.feature),B=!1)}),A.addEventListener("add",J=>{B||(B=!0,this.addFeature(J.element),B=!1)}),A.addEventListener("remove",J=>{B||(B=!0,this.removeFeature(J.element),B=!1)}),this.featuresCollection_=A}clear(A){if(A){for(const J in this.featureChangeKeys_)this.featureChangeKeys_[J].forEach(P);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(se=>{this.removeFeatureInternal(se)});for(const se in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[se])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const B=new Gc("clear");this.dispatchEvent(B),this.changed()}forEachFeature(A){if(this.featuresRtree_)return this.featuresRtree_.forEach(A);this.featuresCollection_&&this.featuresCollection_.forEach(A)}forEachFeatureAtCoordinateDirect(A,B){return this.forEachFeatureInExtent([A[0],A[1],A[0],A[1]],function(se){const Se=se.getGeometry();if(Se instanceof rl||Se.intersectsCoordinate(A))return B(se)})}forEachFeatureInExtent(A,B){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(A,B);this.featuresCollection_&&this.featuresCollection_.forEach(B)}forEachFeatureIntersectingExtent(A,B){return this.forEachFeatureInExtent(A,function(J){const se=J.getGeometry();if(se instanceof rl||se.intersectsExtent(A)){const Se=B(J);if(Se)return Se}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let A;return this.featuresCollection_?A=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(A=this.featuresRtree_.getAll(),v(this.nullGeometryFeatures_)||n(A,Object.values(this.nullGeometryFeatures_))),A}getFeaturesAtCoordinate(A){const B=[];return this.forEachFeatureAtCoordinateDirect(A,function(J){B.push(J)}),B}getFeaturesInExtent(A,B){if(this.featuresRtree_){if(!(B&&B.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(A);const se=un(A,B);return[].concat(...se.map(Se=>this.featuresRtree_.getInExtent(Se)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(A,B){const J=A[0],se=A[1];let Se=null;const Re=[NaN,NaN];let Ze=1/0;const $e=[-1/0,-1/0,1/0,1/0];return B=B||u,this.featuresRtree_.forEachInExtent($e,function(wt){if(B(wt)){const bt=wt.getGeometry(),Gt=Ze;if(Ze=bt instanceof rl?0:bt.closestPointXY(J,se,Re,Ze),Ze<Gt){Se=wt;const rn=Math.sqrt(Ze);$e[0]=J-rn,$e[1]=se-rn,$e[2]=J+rn,$e[3]=se+rn}}}),Se}getExtent(A){return this.featuresRtree_.getExtent(A)}getFeatureById(A){const B=this.idIndex_[A.toString()];return void 0!==B?B:null}getFeatureByUid(A){const B=this.uidIndex_[A];return void 0!==B?B:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(A){const B=A.target,J=U(B),se=B.getGeometry();if(se){const Re=se.getExtent();J in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[J],this.featuresRtree_&&this.featuresRtree_.insert(Re,B)):this.featuresRtree_&&this.featuresRtree_.update(Re,B)}else J in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(B),this.nullGeometryFeatures_[J]=B);const Se=B.getId();if(void 0!==Se){const Re=Se.toString();this.idIndex_[Re]!==B&&(this.removeFromIdIndex_(B),this.idIndex_[Re]=B)}else this.removeFromIdIndex_(B),this.uidIndex_[J]=B;this.changed(),this.dispatchEvent(new Gc("changefeature",B))}hasFeature(A){const B=A.getId();return void 0!==B?B in this.idIndex_:U(A)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&v(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(A,B,J){const se=this.loadedExtentsRtree_,Se=this.strategy_(A,B,J);for(let Re=0,Ze=Se.length;Re<Ze;++Re){const $e=Se[Re];se.forEachInExtent($e,function(bt){return Ct(bt.extent,$e)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Gc("featuresloadstart")),this.loader_.call(this,$e,B,J,bt=>{--this.loadingExtentsCount_,this.dispatchEvent(new Gc("featuresloadend",void 0,bt))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Gc("featuresloaderror"))}),se.insert($e,{extent:$e.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(A){const B=this.loadedExtentsRtree_;let J;B.forEachInExtent(A,function(se){if(qn(se.extent,A))return J=se,!0}),J&&B.remove(J)}removeFeatures(A){const B=[];for(let J=0,se=A.length;J<se;++J){const Re=this.removeFeatureInternal(A[J]);Re&&B.push(Re)}B.length>0&&this.changed()}removeFeature(A){A&&this.removeFeatureInternal(A)&&this.changed()}removeFeatureInternal(A){const B=U(A);if(!(B in this.uidIndex_))return;B in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[B]:this.featuresRtree_&&this.featuresRtree_.remove(A),this.featureChangeKeys_[B]?.forEach(P),delete this.featureChangeKeys_[B];const se=A.getId();if(void 0!==se){const Se=se.toString(),Re=this.idIndex_[Se];Re===A?delete this.idIndex_[Se]:Array.isArray(Re)&&(Re.splice(Re.indexOf(A),1),1===Re.length&&(this.idIndex_[Se]=Re[0]))}return delete this.uidIndex_[B],this.hasListener("removefeature")&&this.dispatchEvent(new Gc("removefeature",A)),A}removeFromIdIndex_(A){let B=!1;for(const J in this.idIndex_){const se=this.idIndex_[J];if(A instanceof rl&&Array.isArray(se)&&se.includes(A))se.splice(se.indexOf(A),1);else if(this.idIndex_[J]===A){delete this.idIndex_[J],B=!0;break}}return B}setLoader(A){this.loader_=A}setUrl(A){oe(this.format_,"`format` must be set when `url` is set"),this.url_=A,this.setLoader(Cd(A,this.format_))}};class Bf extends W{constructor(A){super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),A&&("function"==typeof A.getSimplifiedGeometry?this.setGeometry(A):this.setProperties(A))}clone(){const A=new Bf(this.hasProperties()?this.getProperties():null);A.setGeometryName(this.getGeometryName());const B=this.getGeometry();B&&A.setGeometry(B.clone());const J=this.getStyle();return J&&A.setStyle(J),A}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(P(this.geometryChangeKey_),this.geometryChangeKey_=null);const A=this.getGeometry();A&&(this.geometryChangeKey_=w(A,"change",this.handleGeometryChange_,this)),this.changed()}setGeometry(A){this.set(this.geometryName_,A)}setStyle(A){this.style_=A,this.styleFunction_=A?function Nf(ee){if("function"==typeof ee)return ee;let A;return Array.isArray(ee)?A=ee:(oe("function"==typeof ee.getZIndex,"Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),A=[ee]),function(){return A}}(A):void 0,this.changed()}setId(A){this.id_=A,this.changed()}setGeometryName(A){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=A,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const Zp=Bf,Ed="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAABFGVYSWZJSSoACAAAAAsAAAEEAAEAAAAqAAAAAQEEAAEAAAAqAAAAAgEDAAMAAACSAAAADgECABIAAACYAAAAEgEDAAEAAAABAAAAGgEFAAEAAACqAAAAGwEFAAEAAACyAAAAKAEDAAEAAAADAAAAMQECAA0AAAC6AAAAMgECABQAAADIAAAAaYcEAAEAAADcAAAAAAAAAAgACAAIAENyZWF0ZWQgd2l0aCBHSU1QADcCAAAUAAAANwIAABQAAABHSU1QIDIuMTAuMzgAADIwMjQ6MDY6MDIgMjM6MDI6NDEAAgCGkgcAGQAAAPoAAAABoAMAAQAAAAEAAAAAAAAAAAAAAAAAAABDcmVhdGVkIHdpdGggR0lNUAC6hSDuAAABhGlDQ1BJQ0MgcHJvZmlsZQAAeJx9kT1Iw1AUhU9TtSIVETuIOGSoTnZREcdahSJUCLVCqw4mL/2DJg1Jiouj4Fpw8Gex6uDirKuDqyAI/oA4OzgpukiJ9yWFFjFeeLyP8+45vHcfIDQqTLO64oCm22Y6mRCzuVUx9IoeBCEggEGZWcacJKXgW1/31Ed1F+NZ/n1/Vr+atxgQEInjzDBt4g3imU3b4LxPHGElWSU+J54w6YLEj1xXPH7jXHRZ4JkRM5OeJ44Qi8UOVjqYlUyNeJo4qmo65QtZj1XOW5y1So217slfGM7rK8tcpzWKJBaxBAkiFNRQRgU2YrTrpFhI03nCxz/i+iVyKeQqg5FjAVVokF0/+B/8nq1VmJr0ksIJoPvFcT7GgNAu0Kw7zvex4zRPgOAzcKW3/dUGMPtJer2tRY+AgW3g4rqtKXvA5Q4w/GTIpuxKQVpCoQC8n9E35YChW6BvzZtb6xynD0CGZpW6AQ4OgfEiZa/7vLu3c27/9rTm9wPmEXJuseFIqAAADXhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+Cjx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDQuNC4wLUV4aXYyIj4KIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgIHhtbG5zOkdJTVA9Imh0dHA6Ly93d3cuZ2ltcC5vcmcveG1wLyIKICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICB4bXBNTTpEb2N1bWVudElEPSJnaW1wOmRvY2lkOmdpbXA6NzMxYTA5NDQtZjBkOC00M2M4LWEzMjktOWIyOWU2ZTk5MTIwIgogICB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjJjZDFkMWQyLTU0NjgtNDgwNi1hZGUzLTAzNWM2ZTMxOTM5ZCIKICAgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjRjZjkzOGY0LThkMTYtNGIyNy1iOGQxLTc5MmM4M2RhNjMxOCIKICAgZGM6Rm9ybWF0PSJpbWFnZS9wbmciCiAgIEdJTVA6QVBJPSIyLjAiCiAgIEdJTVA6UGxhdGZvcm09IkxpbnV4IgogICBHSU1QOlRpbWVTdGFtcD0iMTcxNzM4MDE2MjU0MTk4OCIKICAgR0lNUDpWZXJzaW9uPSIyLjEwLjM4IgogICB0aWZmOk9yaWVudGF0aW9uPSIxIgogICB4bXA6Q3JlYXRvclRvb2w9IkdJTVAgMi4xMCIKICAgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyNDowNjowMlQyMzowMjo0MS0wMzowMCIKICAgeG1wOk1vZGlmeURhdGU9IjIwMjQ6MDY6MDJUMjM6MDI6NDEtMDM6MDAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo2YTE4NTdiMC0yMjc4LTQ4MmUtYWRkNC0yYjQ1ZWIwM2EyM2YiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDI0LTA2LTAyVDIzOjAyOjQyLTAzOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PkavJT0AAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfoBgMCAipBPxY7AAAAGXRFWHRDb21tZW50AENyZWF0ZWQgd2l0aCBHSU1QV4EOFwAAAMNJREFUWMPtmUESgyAMRQnDDeqi3kTvv2hvoot6haYbnWHX0vygDP/vcIR5hh9MBglA3V+T5uN1eEq4qnQXet2EXnDcZpcAxNCICEpQghKUoAT9Kqk0x/yvfxcAqBXWWpRI4Xt6hm200py+JYjE+al9APtVUIzpaB/+rcyzvkjzD9+fqzUgy+0Rxm1u58BvZuvbSaYeVPXAjx6e9/BUAkVVvCKJAI0FAGJNsNitR9mKEJSgBCUoQS9W+zld30CrcM8LsQ950kUbgWEp2AAAAABJRU5ErkJggg==";var $t=Aa(5849),Id=Aa(1735),Ld=Aa(6306),Pd=Aa(8504);const K0=["plot"],J0=["*"];class fa{static setModuleName(A){fa.moduleName=A}static getModuleName(){return fa.moduleName}static setPlotly(A){if("object"==typeof A&&"function"!=typeof A.react)throw new Error("Invalid plotly.js version. Please, use any version above 1.40.0");fa.plotly=A}static insert(A){return-1===fa.instances.indexOf(A)&&fa.instances.push(A),A}static remove(A){const B=fa.instances.indexOf(A);B>=0&&(fa.instances.splice(B,1),fa.plotly.purge(A))}getInstanceByDivId(A){for(const B of fa.instances)if(B&&B.id===A)return B}getPlotly(){var A=this;return(0,yu.Z)(function*(){return yield A.waitFor(()=>"waiting"!==A._getPlotly()),A._getPlotly()})()}_getPlotly(){if(typeof fa.plotly>"u")throw new Error("ViaCDN"===fa.moduleName?"Error loading Peer dependency plotly.js from CDN url":"Peer dependency plotly.js isn't installed");return fa.plotly}waitFor(A){return new Promise(B=>{const J=()=>{A()?B():setTimeout(J,10)};J()})}newPlot(A,B,J,se,Se){var Re=this;return(0,yu.Z)(function*(){if(yield Re.waitFor(()=>"waiting"!==Re._getPlotly()),Se){const Ze={data:B,layout:J,config:se,frames:Se};return Re._getPlotly().newPlot(A,Ze).then(()=>fa.insert(A))}return Re._getPlotly().newPlot(A,B,J,se).then(()=>fa.insert(A))})()}plot(A,B,J,se,Se){if(Se){const Re={data:B,layout:J,config:se,frames:Se};return this._getPlotly().newPlot(A,Re)}return this._getPlotly().newPlot(A,B,J,se)}update(A,B,J,se,Se){if(Se){const Re={data:B,layout:J,config:se,frames:Se};return this._getPlotly().react(A,Re)}return this._getPlotly().react(A,B,J,se)}resize(A){return this._getPlotly().Plots.resize(A)}}fa.instances=[],fa.plotly=void 0,fa.moduleName=void 0,fa.\u0275fac=function(A){return new(A||fa)},fa.\u0275prov=$t.Yz7({token:fa,factory:fa.\u0275fac,providedIn:"root"});let $0=(()=>{class ee{constructor(){this._isLoading=!1}get isLoading(){return this._isLoading}load(B){return this._isLoading=!0,new Promise(J=>{J(!0)})}}return ee.\u0275fac=function(B){return new(B||ee)},ee.\u0275prov=$t.Yz7({token:ee,factory:ee.\u0275fac,providedIn:"root"}),ee})(),ic=(()=>{class ee{constructor(B,J,se,Se){this.plotly=B,this.themeLoader=J,this.iterableDiffers=se,this.keyValueDiffers=Se,this.defaultClassName="js-plotly-plot",this.theme="none",this.revision=0,this.debug=!1,this.useResizeHandler=!1,this.updateOnLayoutChange=!0,this.updateOnDataChange=!0,this.updateOnlyWithRevision=!1,this.initialized=new $t.vpe,this.update=new $t.vpe,this.purge=new $t.vpe,this.error=new $t.vpe,this.afterExport=new $t.vpe,this.afterPlot=new $t.vpe,this.animated=new $t.vpe,this.animatingFrame=new $t.vpe,this.animationInterrupted=new $t.vpe,this.autoSize=new $t.vpe,this.beforeExport=new $t.vpe,this.beforeHover=new $t.vpe,this.buttonClicked=new $t.vpe,this.click=new $t.vpe,this.plotlyClick=new $t.vpe,this.clickAnnotation=new $t.vpe,this.deselect=new $t.vpe,this.doubleClick=new $t.vpe,this.framework=new $t.vpe,this.hover=new $t.vpe,this.legendClick=new $t.vpe,this.legendDoubleClick=new $t.vpe,this.react=new $t.vpe,this.relayout=new $t.vpe,this.relayouting=new $t.vpe,this.restyle=new $t.vpe,this.redraw=new $t.vpe,this.selected=new $t.vpe,this.selecting=new $t.vpe,this.sliderChange=new $t.vpe,this.sliderEnd=new $t.vpe,this.sliderStart=new $t.vpe,this.sunburstclick=new $t.vpe,this.transitioning=new $t.vpe,this.transitionInterrupted=new $t.vpe,this.unhover=new $t.vpe,this.treemapclick=new $t.vpe,this.webglcontextlost=new $t.vpe,this.eventNames=["afterExport","afterPlot","animated","animatingFrame","animationInterrupted","autoSize","beforeExport","beforeHover","buttonClicked","clickAnnotation","deselect","doubleClick","framework","hover","legendClick","legendDoubleClick","react","relayout","relayouting","restyle","redraw","selected","selecting","sliderChange","sliderEnd","sliderStart","sunburstclick","transitioning","transitionInterrupted","unhover","treemapclick","webglcontextlost"]}ngOnInit(){this.createPlot().then(()=>{const B=this.createFigure();this.initialized.emit(B)}),this.click.observers.length>0&&console.error("DEPRECATED: Reconsider using `(plotlyClick)` instead of `(click)` to avoid event conflict. Please check https://github.com/plotly/angular-plotly.js#FAQ")}ngOnDestroy(){if("function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0),this.plotlyInstance){const B=this.createFigure();this.purge.emit(B),fa.remove(this.plotlyInstance)}}ngOnChanges(B){let J=!1;const se=B.revision;se&&!se.isFirstChange()&&(J=!0);const Se=B.debug;Se&&!Se.isFirstChange()&&(J=!0),J&&this.updatePlot(),this.updateWindowResizeHandler()}ngDoCheck(){if(this.updateOnlyWithRevision)return!1;let B=!1;this.updateOnLayoutChange&&(this.layoutDiffer?this.layoutDiffer.diff(this.layout)&&(B=!0):this.layoutDiffer=this.layout?this.keyValueDiffers.find(this.layout).create():void 0),this.updateOnDataChange&&(this.dataDiffer?this.dataDiffer.diff(this.data)&&(B=!0):this.dataDiffer=Array.isArray(this.data)?this.iterableDiffers.find(this.data).create(this.dataDifferTrackBy):void 0),B&&this.plotlyInstance&&this.updatePlot()}getData(){return this.data??[]}getWindow(){return window}getClassName(){let B=[this.defaultClassName];return Array.isArray(this.className)?B=B.concat(this.className):this.className&&B.push(this.className),B.join(" ")}createPlot(){return this.plotly.newPlot(this.plotEl.nativeElement,this.getData(),this.layout,this.config,this.frames).then(B=>{this.plotlyInstance=B,this.getWindow().gd=this.debug?B:void 0,this.eventNames.forEach(J=>{const se=`plotly_${J.toLowerCase()}`,Se=this[J];B.on(se,Re=>Se.emit(Re))}),B.on("plotly_click",J=>{this.plotlyClick.emit(J)}),this.updateWindowResizeHandler()},B=>{console.error("Error while plotting:",B),this.error.emit(B)})}createFigure(){const B=this.plotlyInstance;return{data:B.data,layout:B.layout,frames:B._transitionData?B._transitionData._frames:null}}updatePlot(){if(!this.plotlyInstance){const J=new Error("Plotly component wasn't initialized");throw this.error.emit(J),J}const B={...this.layout};return this.plotly.update(this.plotlyInstance,this.getData(),B,this.config,this.frames).then(()=>{const J=this.createFigure();this.update.emit(J)},J=>{console.error("Error while updating plot:",J),this.error.emit(J)})}updateWindowResizeHandler(){this.useResizeHandler?void 0===this.resizeHandler&&(this.resizeHandler=()=>this.plotly.resize(this.plotlyInstance),this.getWindow().addEventListener("resize",this.resizeHandler)):"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0)}dataDifferTrackBy(B,J){const se=Object.assign({},J,{uid:""});return JSON.stringify(se)}loadTheme(){void 0!==this.layout&&console.warn("You fulfill both `theme` and `layout` properties. This will overwrite the `layout` data with the `theme` data."),this.themeLoader.load(this.theme).then(B=>this.layout=B)}}return ee.\u0275fac=function(B){return new(B||ee)($t.Y36(fa),$t.Y36($0),$t.Y36($t.ZZ4),$t.Y36($t.aQg))},ee.\u0275cmp=$t.Xpm({type:ee,selectors:[["plotly-plot"]],viewQuery:function(B,J){if(1&B&&$t.Gf(K0,7),2&B){let se;$t.iGM(se=$t.CRH())&&(J.plotEl=se.first)}},inputs:{data:"data",layout:"layout",config:"config",frames:"frames",style:"style",theme:"theme",divId:"divId",revision:"revision",className:"className",debug:"debug",useResizeHandler:"useResizeHandler",updateOnLayoutChange:"updateOnLayoutChange",updateOnDataChange:"updateOnDataChange",updateOnlyWithRevision:"updateOnlyWithRevision"},outputs:{initialized:"initialized",update:"update",purge:"purge",error:"error",afterExport:"afterExport",afterPlot:"afterPlot",animated:"animated",animatingFrame:"animatingFrame",animationInterrupted:"animationInterrupted",autoSize:"autoSize",beforeExport:"beforeExport",beforeHover:"beforeHover",buttonClicked:"buttonClicked",click:"click",plotlyClick:"plotlyClick",clickAnnotation:"clickAnnotation",deselect:"deselect",doubleClick:"doubleClick",framework:"framework",hover:"hover",legendClick:"legendClick",legendDoubleClick:"legendDoubleClick",react:"react",relayout:"relayout",relayouting:"relayouting",restyle:"restyle",redraw:"redraw",selected:"selected",selecting:"selecting",sliderChange:"sliderChange",sliderEnd:"sliderEnd",sliderStart:"sliderStart",sunburstclick:"sunburstclick",transitioning:"transitioning",transitionInterrupted:"transitionInterrupted",unhover:"unhover",treemapclick:"treemapclick",webglcontextlost:"webglcontextlost"},features:[$t._Bn([fa]),$t.TTD],ngContentSelectors:J0,decls:3,vars:3,consts:[[3,"ngClass","ngStyle"],["plot",""]],template:function(B,J){1&B&&($t.F$t(),$t.TgZ(0,"div",0,1),$t.Hsn(2),$t.qZA()),2&B&&($t.Q6J("ngClass",J.getClassName())("ngStyle",J.style),$t.uIk("id",J.divId))},dependencies:[Hi.mk,Hi.PC],encapsulation:2}),ee})(),Hc=(()=>{class ee{constructor(){}}return ee.\u0275fac=function(B){return new(B||ee)},ee.\u0275mod=$t.oAB({type:ee}),ee.\u0275inj=$t.cJS({providers:[fa],imports:[Hi.ez]}),ee})(),Od=(()=>{class ee{constructor(){if(!this.isValid())throw new Error("Invalid PlotlyJS object. Please check https://github.com/plotly/angular-plotly.js#quick-start to see how to add PlotlyJS to your project.");fa.setPlotly(ee.plotlyjs)}isValid(){return void 0!==ee.plotlyjs&&("function"==typeof ee.plotlyjs.plot||"function"==typeof ee.plotlyjs.newPlot)}}return ee.plotlyjs={},ee.\u0275fac=function(B){return new(B||ee)},ee.\u0275mod=$t.oAB({type:ee}),ee.\u0275inj=$t.cJS({providers:[fa],imports:[Hi.ez,Hc,Hc]}),ee})();class Ga{constructor(A){this.plotlyService=A,fa.setModuleName("ViaCDN")}static setPlotlyVersion(A,B="plotly",J=""){if("latest"!==A&&!/^(strict-)?\d\.\d{1,2}\.\d{1,2}$/.test(A))throw new Error("Invalid plotly version. Please set 'latest' or version number (i.e.: 1.4.3) or strict version number (i.e.: strict-1.4.3)");Ga.loadViaCDN(B,J),Ga.plotlyVersion=A}static setPlotlyBundle(A){if(!(null===A||Ga.plotlyBundleNames.indexOf(A)>=0)){const J=Ga.plotlyBundleNames.map(se=>`"${se}"`).join(", ");throw new Error(`Invalid plotly bundle. Please set to null for full or ${J} for a partial bundle.`)}Ga.plotlyBundle=A}static loadViaCDN(A="plotly",B=""){fa.setPlotly("waiting"),setTimeout(()=>{let se="";switch(A){case"cloudflare":if("latest"==Ga.plotlyVersion)throw new Error("As cloudflare hosts version specific files, 'latest' as a version is not supported. Please specify a version or you can choose 'plotly' as a CDN provider.");se=null==Ga.plotlyBundle?`https://cdnjs.cloudflare.com/ajax/libs/plotly.js/${Ga.plotlyVersion}/plotly.min.js`:`https://cdnjs.cloudflare.com/ajax/libs/plotly.js/${Ga.plotlyVersion}/plotly-${Ga.plotlyBundle}.min.js`;break;case"custom":if(!B||"string"!=typeof B)throw new Error("Invalid or missing CDN URL. Please provide a CDN URL in case of custom provider. Alternatively, you can choose from 'plotly' or 'cloudflare'.");se=B;break;default:se=null==Ga.plotlyBundle?`https://cdn.plot.ly/plotly-${Ga.plotlyVersion}.min.js`:`https://cdn.plot.ly/plotly-${Ga.plotlyBundle}-${Ga.plotlyVersion}.min.js`}const Se=document.createElement("script");Se.type="text/javascript",Se.src=se,Se.onerror=()=>console.error(`Error loading plotly.js library from ${se}`),document.getElementsByTagName("head")[0].appendChild(Se);let Ze=200;const $e=()=>{const wt=window.Plotly;if(wt)fa.setPlotly(wt);else{if(!(Ze>0))throw new Error(`Error loading plotly.js library from ${se}. Timeout.`);Ze--,setTimeout($e,50)}};$e()})}}Ga.plotlyBundle=void 0,Ga.plotlyVersion="latest",Ga.plotlyBundleNames=["basic","cartesian","geo","gl3d","gl2d","mapbox","finance"],Ga.\u0275fac=function(A){return new(A||Ga)($t.LFG(fa))},Ga.\u0275mod=$t.oAB({type:Ga}),Ga.\u0275inj=$t.cJS({providers:[fa],imports:[Hi.ez,Hc,Hc]});var Xp=Aa(9862);function Tg(ee,A){if(1&ee&&$t._UZ(0,"plotly-plot",1),2&ee){const B=$t.oxw();$t.Q6J("data",B.plotlyData)("layout",B.layout)}}let hg=(()=>{class ee{constructor(B){this.http=B,this.layout={title:"Sentinel 2 Timeseries",xaxis:{title:"Date",ticks:{color:"#495057"},grid:{color:"#ebedef"}},yaxis:{title:"NDVI",min:0,max:1.2,type:"linear"},yaxis2:{title:"Precipitation (mm)",overlaying:"y",side:"right",type:"linear"}}}ngOnChanges(B){B.lat&&B.lon&&this.isValidLatLon()&&this.loadTimeseries()}isValidLatLon(){return void 0!==this.lat&&void 0!==this.lon&&!isNaN(this.lat)&&!isNaN(this.lon)}loadTimeseries(){this.http.get(`https://tiles.lapig.iesa.ufg.br/api/timeseries/sentinel2/${this.lat}/${this.lon}`).pipe((0,Ld.K)(J=>(console.error("Error fetching timeseries:",J),(0,Pd._)(J)))).subscribe(J=>{console.log(J),this.plotlyData=J})}static#e=this.\u0275fac=function(J){return new(J||ee)($t.Y36(Xp.eN))};static#t=this.\u0275cmp=$t.Xpm({type:ee,selectors:[["app-sentinel-timeseries"]],inputs:{lat:"lat",lon:"lon"},standalone:!0,features:[$t.TTD,$t.jDz],decls:1,vars:1,consts:[[3,"data","layout",4,"ngIf"],[3,"data","layout"]],template:function(J,se){1&J&&$t.YNc(0,Tg,1,2,"plotly-plot",0),2&J&&$t.Q6J("ngIf",se.plotlyData)},dependencies:[Hc,ic,Hi.O5]})}return ee})();var jf=Aa(95),Gu=Aa(5219),eg=Aa(4480),nf=Aa(2332);const Ag=["container"];function kg(ee,A){if(1&ee&&$t._UZ(0,"span",8),2&ee){const B=$t.oxw(2).$implicit;$t.Tol(B.icon),$t.Q6J("ngClass","p-button-icon p-button-icon-left"),$t.uIk("data-pc-section","icon")}}function Mg(ee,A){if(1&ee&&($t.ynx(0),$t.YNc(1,kg,1,4,"span",6),$t.TgZ(2,"span",7),$t._uU(3),$t.qZA(),$t.BQk()),2&ee){const B=$t.oxw().$implicit,J=$t.oxw();$t.xp6(1),$t.Q6J("ngIf",B.icon),$t.xp6(1),$t.uIk("data-pc-section","label"),$t.xp6(1),$t.Oqu(J.getOptionLabel(B))}}function Sg(ee,A){1&ee&&$t.GkF(0)}const Cg=(ee,A)=>({$implicit:ee,index:A});function Eg(ee,A){if(1&ee&&$t.YNc(0,Sg,1,0,"ng-container",9),2&ee){const B=$t.oxw(),J=B.$implicit,se=B.index,Se=$t.oxw();$t.Q6J("ngTemplateOutlet",Se.selectButtonTemplate)("ngTemplateOutletContext",$t.WLB(2,Cg,J,se))}}const Ig=(ee,A,B)=>({"p-highlight":ee,"p-disabled":A,"p-button-icon-only":B});function Lg(ee,A){if(1&ee){const B=$t.EpF();$t.TgZ(0,"div",3),$t.NdJ("click",function(se){const Se=$t.CHM(B),Re=Se.$implicit,Ze=Se.index,$e=$t.oxw();return $t.KtG($e.onOptionSelect(se,Re,Ze))})("keydown",function(se){const Se=$t.CHM(B),Re=Se.$implicit,Ze=Se.index,$e=$t.oxw();return $t.KtG($e.onKeyDown(se,Re,Ze))})("focus",function(se){const Re=$t.CHM(B).index,Ze=$t.oxw();return $t.KtG(Ze.onFocus(se,Re))})("blur",function(){$t.CHM(B);const se=$t.oxw();return $t.KtG(se.onBlur())}),$t.YNc(1,Mg,4,3,"ng-container",4)(2,Eg,1,5,"ng-template",null,5,$t.W1O),$t.qZA()}if(2&ee){const B=A.$implicit,J=A.index,se=$t.MAs(3),Se=$t.oxw();$t.Tol(B.styleClass),$t.Q6J("role",Se.multiple?"checkbox":"radio")("ngClass",$t.kEZ(14,Ig,Se.isSelected(B),Se.disabled||Se.isOptionDisabled(B),B.icon&&!Se.getOptionLabel(B))),$t.uIk("tabindex",J===Se.focusedIndex?"0":"-1")("aria-label",B.label)("aria-checked",Se.isSelected(B))("aria-disabled",Se.optionDisabled)("aria-pressed",Se.isSelected(B))("title",B.title)("aria-labelledby",Se.getOptionLabel(B))("data-pc-section","button"),$t.xp6(1),$t.Q6J("ngIf",!Se.itemTemplate)("ngIfElse",se)}}const Pg={provide:jf.JU,useExisting:(0,$t.Gpc)(()=>tg),multi:!0};let tg=(()=>{class ee{cd;options;optionLabel;optionValue;optionDisabled;unselectable=!1;tabindex=0;multiple;allowEmpty=!0;style;styleClass;ariaLabelledBy;disabled;dataKey;onOptionClick=new $t.vpe;onChange=new $t.vpe;container;itemTemplate;get selectButtonTemplate(){return this.itemTemplate?.template}get equalityKey(){return this.optionValue?null:this.dataKey}value;onModelChange=()=>{};onModelTouched=()=>{};focusedIndex=0;constructor(B){this.cd=B}getOptionLabel(B){return this.optionLabel?nf.gb.resolveFieldData(B,this.optionLabel):null!=B.label?B.label:B}getOptionValue(B){return this.optionValue?nf.gb.resolveFieldData(B,this.optionValue):this.optionLabel||void 0===B.value?B:B.value}isOptionDisabled(B){return this.optionDisabled?nf.gb.resolveFieldData(B,this.optionDisabled):void 0!==B.disabled&&B.disabled}writeValue(B){this.value=B,this.cd.markForCheck()}registerOnChange(B){this.onModelChange=B}registerOnTouched(B){this.onModelTouched=B}setDisabledState(B){this.disabled=B,this.cd.markForCheck()}onOptionSelect(B,J,se){if(this.disabled||this.isOptionDisabled(J))return;let Se=this.isSelected(J);if(Se&&this.unselectable)return;let Ze,Re=this.getOptionValue(J);if(this.multiple)Ze=Se?this.value.filter($e=>!nf.gb.equals($e,Re,this.equalityKey)):this.value?[...this.value,Re]:[Re];else{if(Se&&!this.allowEmpty)return;Ze=Se?null:Re}this.focusedIndex=se,this.value=Ze,this.onModelChange(this.value),this.onChange.emit({originalEvent:B,value:this.value}),this.onOptionClick.emit({originalEvent:B,option:J,index:se})}onKeyDown(B,J,se){switch(B.code){case"Space":this.onOptionSelect(B,J,se),B.preventDefault();break;case"ArrowDown":case"ArrowRight":this.changeTabIndexes(B,"next"),B.preventDefault();break;case"ArrowUp":case"ArrowLeft":this.changeTabIndexes(B,"prev"),B.preventDefault()}}changeTabIndexes(B,J){let se,Se;for(let Re=0;Re<=this.container.nativeElement.children.length-1;Re++)"0"===this.container.nativeElement.children[Re].getAttribute("tabindex")&&(se={elem:this.container.nativeElement.children[Re],index:Re});Se="prev"===J?0===se.index?this.container.nativeElement.children.length-1:se.index-1:se.index===this.container.nativeElement.children.length-1?0:se.index+1,this.focusedIndex=Se,this.container.nativeElement.children[Se].focus()}onFocus(B,J){this.focusedIndex=J}onBlur(){this.onModelTouched()}removeOption(B){this.value=this.value.filter(J=>!nf.gb.equals(J,this.getOptionValue(B),this.dataKey))}isSelected(B){let J=!1;const se=this.getOptionValue(B);if(this.multiple){if(this.value&&Array.isArray(this.value))for(let Se of this.value)if(nf.gb.equals(Se,se,this.dataKey)){J=!0;break}}else J=nf.gb.equals(this.getOptionValue(B),this.value,this.equalityKey);return J}static \u0275fac=function(J){return new(J||ee)($t.Y36($t.sBO))};static \u0275cmp=$t.Xpm({type:ee,selectors:[["p-selectButton"]],contentQueries:function(J,se,Se){if(1&J&&$t.Suo(Se,Gu.jx,5),2&J){let Re;$t.iGM(Re=$t.CRH())&&(se.itemTemplate=Re.first)}},viewQuery:function(J,se){if(1&J&&$t.Gf(Ag,5),2&J){let Se;$t.iGM(Se=$t.CRH())&&(se.container=Se.first)}},hostAttrs:[1,"p-element"],inputs:{options:"options",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",unselectable:"unselectable",tabindex:"tabindex",multiple:"multiple",allowEmpty:"allowEmpty",style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",disabled:"disabled",dataKey:"dataKey"},outputs:{onOptionClick:"onOptionClick",onChange:"onChange"},features:[$t._Bn([Pg])],decls:3,vars:8,consts:[["role","group",3,"ngClass","ngStyle"],["container",""],["pRipple","","class","p-button p-component",3,"role","class","ngClass","click","keydown","focus","blur",4,"ngFor","ngForOf"],["pRipple","",1,"p-button","p-component",3,"role","ngClass","click","keydown","focus","blur"],[4,"ngIf","ngIfElse"],["customcontent",""],[3,"ngClass","class",4,"ngIf"],[1,"p-button-label"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(J,se){1&J&&($t.TgZ(0,"div",0,1),$t.YNc(2,Lg,4,18,"div",2),$t.qZA()),2&J&&($t.Tol(se.styleClass),$t.Q6J("ngClass","p-selectbutton p-buttonset p-component")("ngStyle",se.style),$t.uIk("aria-labelledby",se.ariaLabelledBy)("data-pc-name","selectbutton")("data-pc-section","root"),$t.xp6(2),$t.Q6J("ngForOf",se.options))},dependencies:[Hi.mk,Hi.sg,Hi.O5,Hi.tP,Hi.PC,eg.H],styles:['@layer primeng{.p-button{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label{flex:1 1 auto}.p-button-icon-right{order:1}.p-button:disabled{cursor:default;pointer-events:none}.p-button-icon-only{justify-content:center}.p-button-icon-only:after{content:"p";visibility:hidden;clip:rect(0 0 0 0);width:0}.p-button-vertical{flex-direction:column}.p-button-icon-bottom{order:2}.p-buttonset .p-button{margin:0}.p-buttonset .p-button:not(:last-child){border-right:0 none}.p-buttonset .p-button:not(:first-of-type):not(:last-of-type){border-radius:0}.p-buttonset .p-button:first-of-type{border-top-right-radius:0;border-bottom-right-radius:0}.p-buttonset .p-button:last-of-type{border-top-left-radius:0;border-bottom-left-radius:0}.p-buttonset .p-button:focus{position:relative;z-index:1}p-button[iconpos=right] spinnericon{order:1}}\n'],encapsulation:2,changeDetection:0})}return ee})(),Og=(()=>{class ee{static \u0275fac=function(J){return new(J||ee)};static \u0275mod=$t.oAB({type:ee});static \u0275inj=$t.cJS({imports:[Hi.ez,eg.T,Gu.m8,Gu.m8]})}return ee})();var ng=Aa(411);function Rg(ee,A){if(1&ee&&($t.TgZ(0,"h4",12),$t._uU(1),$t.ALo(2,"number"),$t.ALo(3,"number"),$t.qZA()),2&ee){const B=$t.oxw();$t.xp6(1),$t.AsE("Latitude: ",$t.lcZ(2,2,B.lat),", Longitude: ",$t.lcZ(3,4,B.lon),"")}}function Dg(ee,A){if(1&ee&&($t.TgZ(0,"div",13),$t._UZ(1,"div",14),$t.qZA()),2&ee){const B=A.$implicit;$t.xp6(1),$t.Q6J("id",B.id)}}function zg(ee,A){if(1&ee&&$t._UZ(0,"app-sentinel-timeseries",15),2&ee){const B=$t.oxw();$t.Q6J("lat",B.lat)("lon",B.lon)}}const Kp=(new Date).getFullYear(),Fg=(new Date).getMonth()+1,fg={collections:[{name:"s2_harmonized",visparam:["tvi-green","tvi-red","tvi-rgb"],period:["WET","DRY","MONTH"],year:Array.from({length:Kp-2019+1},(ee,A)=>2019+A),month:["01","02","03","04","05","06","07","08","09","10","11","12"]},{name:"landsat",visparam:["landsat-tvi-false","landsat-tvi-true","landsat-tvi-agri"],period:["WET","DRY","MONTH"],year:Array.from({length:Kp-1985+1},(ee,A)=>1985+A),month:["01","02","03","04","05","06","07","08","09","10","11","12"]}]};let Bg=(()=>{class ee{constructor(B){this.pointService=B,this.sentinelMaps=[],this.landsatMaps=[],this.centerCoordinates=Ei([-57.149819,-21.329828]),this.mapsInstances=[],this.lat=null,this.lon=null,this.sentinelYears=[],this.selectedSentinelYear=Kp,this.sentinelPeriods=["WET","DRY","MONTH"],this.landsatPeriods=["WET","DRY","MONTH"],this.sentinelVisParams=["tvi-green","tvi-red","tvi-rgb"],this.landsatVisParams=["landsat-tvi-false","landsat-tvi-true","landsat-tvi-agri"],this.selectedSentinelPeriod=this.sentinelPeriods[0],this.selectedLandsatPeriod=this.landsatPeriods[0],this.selectedSentinelVisParam=this.sentinelVisParams[0],this.selectedLandsatVisParam=this.landsatVisParams[0]}ngOnInit(){this.initializeMaps(),this.pointService.setPoint({lat:-21.329828,lon:-57.149819}),this.pointService.point$.subscribe({next:J=>{J.lat&&J.lon&&(this.lat=J.lat,this.lon=J.lon,this.updateCenterCoordinates([J.lon,J.lat]))}});const B=fg.collections.find(J=>"s2_harmonized"===J.name);B&&(this.sentinelYears=B.year),this.sentinelYears.unshift("Todos")}addMarker(B,J,se){const Se=new Zp({geometry:new Ds(Ei([J,B]))}),Re=new eh({image:new Eu({anchor:[.5,.5],src:Ed,scale:1})});Se.setStyle(Re);const Ze=new Th({features:[Se]}),$e=new Au({source:Ze});se.addLayer($e)}initializeMaps(){this.createMaps("sentinel",this.selectedSentinelPeriod,this.selectedSentinelVisParam),this.createMaps("landsat",this.selectedLandsatPeriod,this.selectedLandsatVisParam)}createMaps(B,J,se){"sentinel"===B?this.sentinelMaps=[]:this.landsatMaps=[];const Se=fg.collections.find(Re=>Re.name===("sentinel"===B?"s2_harmonized":"landsat"));if(Se)for(let Re of Se.year)if("Todos"==this.selectedSentinelYear||Re===this.selectedSentinelYear)if("MONTH"===J)for(let Ze of Se.month){if(Re===Kp&&parseInt(Ze,10)>Fg)break;this.addMap(B,`${B}-map-${Ze}-${Re}`,"MONTH",Re,se,Ze)}else this.addMap(B,`${B}-map-${J}-${Re}`,J,Re,se)}addMap(B,J,se,Se,Re,Ze){if("Todos"==Se)return;const $e=Number(Se);"sentinel"===B?this.sentinelMaps.push("MONTH"===se?{month:Ze,year:$e,id:J}:{period:se,year:$e,id:J}):this.landsatMaps.push("MONTH"===se?{month:Ze,year:$e,id:J}:{period:se,year:$e,id:J}),this.createMap(J,se,$e,B,Re,Ze)}createMap(B,J,se,Se,Re,Ze){setTimeout(()=>{const wt=new lu({target:B,layers:[new wr({source:new Ol({url:`https://tm{1-5}.lapig.iesa.ufg.br/api/layers/${"sentinel"===Se?"s2_harmonized":"landsat"}/{x}/{y}/{z}?period=${J}&year=${se}&visparam=${Re}${"MONTH"===J?`&month=${Ze}`:""}`,attributions:`${"MONTH"===J?`Month ${Ze}`:J} - ${se}`,attributionsCollapsible:!1})})],view:new ti({center:this.centerCoordinates,zoom:13}),interactions:Yh().extend([new bc({handleDownEvent:Gt=>{const rn=Fa(Gt.coordinate);return console.log(rn),this.updateCenterCoordinates(rn),!0}})])}),bt=vo(this.centerCoordinates,"EPSG:3857","EPSG:4326");this.addMarker(bt[1],bt[0],wt),this.mapsInstances.push({id:B,map:wt})},0)}updateCenterCoordinates(B){this.centerCoordinates=Ei(B),this.updateMaps()}updateMaps(){for(let B of this.mapsInstances){B.map.getView().setCenter(this.centerCoordinates);const se=vo(this.centerCoordinates,"EPSG:3857","EPSG:4326");this.addMarker(se[1],se[0],B.map)}}updateSentinelMaps(){this.mapsInstances=this.mapsInstances.filter(B=>!B.id.startsWith("sentinel-map")),this.createMaps("sentinel",this.selectedSentinelPeriod,this.selectedSentinelVisParam)}static#e=this.\u0275fac=function(J){return new(J||ee)($t.Y36(Id.H))};static#t=this.\u0275cmp=$t.Xpm({type:ee,selectors:[["app-map-grid"]],decls:17,vars:9,consts:[["class","text-center card",4,"ngIf"],[1,"flex","justify-content-evenly"],[1,"flex","flex-column","align-items-center"],["for","period-type-sant"],["id","period-type-sant",1,"w-full",3,"options","ngModel","ngModelChange","onChange"],["for","year-select-sant"],["id","year-select-sant",1,"w-full",3,"options","ngModel","ngModelChange","onChange"],["for","vis-params-sant"],["id","vis-params-sant",1,"w-full",3,"options","ngModel","ngModelChange","onChange"],[1,"map-grid","mt-3"],["class","map-item",4,"ngFor","ngForOf"],[3,"lat","lon",4,"ngIf"],[1,"text-center","card"],[1,"map-item"],[1,"map-container",3,"id"],[3,"lat","lon"]],template:function(J,se){1&J&&($t.YNc(0,Rg,4,6,"h4",0),$t.TgZ(1,"div",1)(2,"span",2)(3,"label",3),$t._uU(4,"Period Type"),$t.qZA(),$t.TgZ(5,"p-selectButton",4),$t.NdJ("ngModelChange",function(Re){return se.selectedSentinelPeriod=Re})("onChange",function(){return se.updateSentinelMaps()}),$t.qZA()(),$t.TgZ(6,"span",2)(7,"label",5),$t._uU(8,"Year"),$t.qZA(),$t.TgZ(9,"p-dropdown",6),$t.NdJ("ngModelChange",function(Re){return se.selectedSentinelYear=Re})("onChange",function(){return se.updateSentinelMaps()}),$t.qZA()(),$t.TgZ(10,"span",2)(11,"label",7),$t._uU(12,"Visualization Params"),$t.qZA(),$t.TgZ(13,"p-selectButton",8),$t.NdJ("ngModelChange",function(Re){return se.selectedSentinelVisParam=Re})("onChange",function(){return se.updateSentinelMaps()}),$t.qZA()()(),$t.TgZ(14,"div",9),$t.YNc(15,Dg,2,1,"div",10),$t.qZA(),$t.YNc(16,zg,1,2,"app-sentinel-timeseries",11)),2&J&&($t.Q6J("ngIf",se.lat&&se.lon),$t.xp6(5),$t.Q6J("options",se.sentinelPeriods)("ngModel",se.selectedSentinelPeriod),$t.xp6(4),$t.Q6J("options",se.sentinelYears)("ngModel",se.selectedSentinelYear),$t.xp6(4),$t.Q6J("options",se.sentinelVisParams)("ngModel",se.selectedSentinelVisParam),$t.xp6(2),$t.Q6J("ngForOf",se.sentinelMaps),$t.xp6(1),$t.Q6J("ngIf",se.lat&&se.lon))},dependencies:[Hi.sg,Hi.O5,hg,jf.JJ,jf.On,tg,ng.Lt,Hi.JJ],styles:[".map-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.map-item[_ngcontent-%COMP%]{flex:1 1 20%;margin:1px;text-align:center}.map-container[_ngcontent-%COMP%]{width:100%;height:300px}.campo[_ngcontent-%COMP%]{display:flex}"]})}return ee})(),Ng=(()=>{class ee{constructor(B){this.http=B,this.baseUrl="https://tiles.lapig.iesa.ufg.br/api/layers/sentinel"}getSentinelLayer(B,J,se,Se,Re,Ze,$e){let wt={};return void 0!==Ze&&(wt.latitude=Ze),void 0!==$e&&(wt.longitude=$e),this.http.get(`${this.baseUrl}/${B}/${J}/${se}/${Se}/${Re}`,{params:wt})}static#e=this.\u0275fac=function(J){return new(J||ee)($t.LFG(Xp.eN))};static#t=this.\u0275prov=$t.Yz7({token:ee,factory:ee.\u0275fac,providedIn:"root"})}return ee})();function jg(ee,A){1&ee&&$t.GkF(0)}function Ug(ee,A){if(1&ee&&($t.TgZ(0,"div",8),$t.Hsn(1,1),$t.YNc(2,jg,1,0,"ng-container",6),$t.qZA()),2&ee){const B=$t.oxw();$t.xp6(2),$t.Q6J("ngTemplateOutlet",B.headerTemplate)}}function Vg(ee,A){1&ee&&$t.GkF(0)}function Gg(ee,A){if(1&ee&&($t.TgZ(0,"div",9),$t._uU(1),$t.YNc(2,Vg,1,0,"ng-container",6),$t.qZA()),2&ee){const B=$t.oxw();$t.xp6(1),$t.hij(" ",B.header," "),$t.xp6(1),$t.Q6J("ngTemplateOutlet",B.titleTemplate)}}function Hg(ee,A){1&ee&&$t.GkF(0)}function qg(ee,A){if(1&ee&&($t.TgZ(0,"div",10),$t._uU(1),$t.YNc(2,Hg,1,0,"ng-container",6),$t.qZA()),2&ee){const B=$t.oxw();$t.xp6(1),$t.hij(" ",B.subheader," "),$t.xp6(1),$t.Q6J("ngTemplateOutlet",B.subtitleTemplate)}}function Wg(ee,A){1&ee&&$t.GkF(0)}function Yg(ee,A){1&ee&&$t.GkF(0)}function Zg(ee,A){if(1&ee&&($t.TgZ(0,"div",11),$t.Hsn(1,2),$t.YNc(2,Yg,1,0,"ng-container",6),$t.qZA()),2&ee){const B=$t.oxw();$t.xp6(2),$t.Q6J("ngTemplateOutlet",B.footerTemplate)}}const Xg=["*",[["p-header"]],[["p-footer"]]],Kg=["*","p-header","p-footer"];let Jg=(()=>{class ee{el;header;subheader;style;styleClass;headerFacet;footerFacet;templates;headerTemplate;titleTemplate;subtitleTemplate;contentTemplate;footerTemplate;constructor(B){this.el=B}ngAfterContentInit(){this.templates.forEach(B=>{switch(B.getType()){case"header":this.headerTemplate=B.template;break;case"title":this.titleTemplate=B.template;break;case"subtitle":this.subtitleTemplate=B.template;break;case"content":default:this.contentTemplate=B.template;break;case"footer":this.footerTemplate=B.template}})}getBlockableElement(){return this.el.nativeElement.children[0]}static \u0275fac=function(J){return new(J||ee)($t.Y36($t.SBq))};static \u0275cmp=$t.Xpm({type:ee,selectors:[["p-card"]],contentQueries:function(J,se,Se){if(1&J&&($t.Suo(Se,Gu.h4,5),$t.Suo(Se,Gu.$_,5),$t.Suo(Se,Gu.jx,4)),2&J){let Re;$t.iGM(Re=$t.CRH())&&(se.headerFacet=Re.first),$t.iGM(Re=$t.CRH())&&(se.footerFacet=Re.first),$t.iGM(Re=$t.CRH())&&(se.templates=Re)}},hostAttrs:[1,"p-element"],inputs:{header:"header",subheader:"subheader",style:"style",styleClass:"styleClass"},ngContentSelectors:Kg,decls:9,vars:10,consts:[[3,"ngClass","ngStyle"],["class","p-card-header",4,"ngIf"],[1,"p-card-body"],["class","p-card-title",4,"ngIf"],["class","p-card-subtitle",4,"ngIf"],[1,"p-card-content"],[4,"ngTemplateOutlet"],["class","p-card-footer",4,"ngIf"],[1,"p-card-header"],[1,"p-card-title"],[1,"p-card-subtitle"],[1,"p-card-footer"]],template:function(J,se){1&J&&($t.F$t(Xg),$t.TgZ(0,"div",0),$t.YNc(1,Ug,3,1,"div",1),$t.TgZ(2,"div",2),$t.YNc(3,Gg,3,2,"div",3)(4,qg,3,2,"div",4),$t.TgZ(5,"div",5),$t.Hsn(6),$t.YNc(7,Wg,1,0,"ng-container",6),$t.qZA(),$t.YNc(8,Zg,3,1,"div",7),$t.qZA()()),2&J&&($t.Tol(se.styleClass),$t.Q6J("ngClass","p-card p-component")("ngStyle",se.style),$t.uIk("data-pc-name","card"),$t.xp6(1),$t.Q6J("ngIf",se.headerFacet||se.headerTemplate),$t.xp6(2),$t.Q6J("ngIf",se.header||se.titleTemplate),$t.xp6(1),$t.Q6J("ngIf",se.subheader||se.subtitleTemplate),$t.xp6(3),$t.Q6J("ngTemplateOutlet",se.contentTemplate),$t.xp6(1),$t.Q6J("ngIf",se.footerFacet||se.footerTemplate))},dependencies:[Hi.mk,Hi.O5,Hi.tP,Hi.PC],styles:["@layer primeng{.p-card-header img{width:100%}}\n"],encapsulation:2,changeDetection:0})}return ee})(),$g=(()=>{class ee{static \u0275fac=function(J){return new(J||ee)};static \u0275mod=$t.oAB({type:ee});static \u0275inj=$t.cJS({imports:[Hi.ez,Gu.m8]})}return ee})(),Qg=(()=>{class ee{constructor(B,J){this.layerService=B,this.pointService=J,this.periods=["WET","DRY"],this.years=[2017,2018,2019,2020,2021,2022,2023],this.months=["02","09"],this.maps=[],this.centerCoordinates=Ei([-57.149819,-21.329828]),this.mapsInstances=[]}ngOnInit(){this.initializeMaps(),this.pointService.point$.subscribe({next:B=>{B.lat&&B.lon&&this.updateCenterCoordinates([B.lon,B.lat])}})}initializeMaps(){for(let B of this.years)for(let J of this.months){let se="02"===J?"WET":"DRY",Se=`map-${se}-${B}`;this.maps.push({period:se,year:B,id:Se}),this.createMap(Se,se,B)}}createMap(B,J,se){setTimeout(()=>{const Se=new lu({target:B,layers:[new wr({source:new Ol({url:`https://tm{1-5}.lapig.iesa.ufg.br/api/layers/s2_harmonized/${J}/${se}/{x}/{y}/{z}`,attributions:`${J} - ${se}`,attributionsCollapsible:!1})})],view:new ti({center:this.centerCoordinates,zoom:13}),interactions:Yh().extend([new bc({handleDownEvent:Re=>{const Ze=Fa(Re.coordinate);return this.updateCenterCoordinates(Ze),!0}})])});this.mapsInstances.push(Se)},0)}updateCenterCoordinates(B){this.centerCoordinates=Ei(B),this.updateMaps()}updateMaps(){for(let B of this.mapsInstances)B.getView().setCenter(this.centerCoordinates)}static#e=this.\u0275fac=function(J){return new(J||ee)($t.Y36(Ng),$t.Y36(Id.H))};static#t=this.\u0275cmp=$t.Xpm({type:ee,selectors:[["app-map-grid"]],decls:7,vars:0,consts:[[1,"text-center"]],template:function(J,se){1&J&&($t.TgZ(0,"p-card")(1,"h1",0),$t._uU(2,"Sentinel 2 Images"),$t.qZA(),$t.TgZ(3,"p"),$t._uU(4,"This component displays multiple map instances based on different periods and years."),$t.qZA(),$t.TgZ(5,"p"),$t._uU(6," The Map Grid Component initializes multiple maps for the specified periods (WET and DRY) and years (2017 to 2023). It uses OpenLayers to render map tiles from a remote server. Users can interact with the maps to update center coordinates. "),$t.qZA()())},dependencies:[Jg],encapsulation:2})}return ee})();function e1(ee,A){if(1&ee&&$t._UZ(0,"plotly-plot",1),2&ee){const B=$t.oxw();$t.Q6J("data",B.plotlyData)("layout",B.layout)}}let dg=(()=>{class ee{constructor(B){this.http=B,this.layout={title:"Landsat Timeseries",xaxis:{title:"Date",ticks:{color:"#495057"},grid:{color:"#ebedef"}},yaxis:{title:"NDVI",min:0,max:1.2,type:"linear"},yaxis2:{title:"Precipitation (mm)",overlaying:"y",side:"right",type:"linear"}}}ngOnChanges(B){B.lat&&B.lon&&this.isValidLatLon()&&this.loadTimeseries()}isValidLatLon(){return void 0!==this.lat&&void 0!==this.lon&&!isNaN(this.lat)&&!isNaN(this.lon)}loadTimeseries(){this.http.get(`https://tiles.lapig.iesa.ufg.br/api/timeseries/landsat/${this.lat}/${this.lon}`).pipe((0,Ld.K)(J=>(console.error("Error fetching timeseries:",J),(0,Pd._)(J)))).subscribe(J=>{console.log(J),this.plotlyData=J})}static#e=this.\u0275fac=function(J){return new(J||ee)($t.Y36(Xp.eN))};static#t=this.\u0275cmp=$t.Xpm({type:ee,selectors:[["app-landsat-timeseries"]],inputs:{lat:"lat",lon:"lon"},standalone:!0,features:[$t.TTD,$t.jDz],decls:1,vars:1,consts:[[3,"data","layout",4,"ngIf"],[3,"data","layout"]],template:function(J,se){1&J&&$t.YNc(0,e1,1,2,"plotly-plot",0),2&J&&$t.Q6J("ngIf",se.plotlyData)},dependencies:[Hc,ic,Hi.O5]})}return ee})();function t1(ee,A){if(1&ee&&($t.TgZ(0,"h4",14),$t._uU(1),$t.ALo(2,"number"),$t.ALo(3,"number"),$t.qZA()),2&ee){const B=$t.oxw();$t.xp6(1),$t.AsE("Latitude: ",$t.lcZ(2,2,B.lat),", Longitude: ",$t.lcZ(3,4,B.lon),"")}}function n1(ee,A){if(1&ee&&($t.TgZ(0,"div",15),$t._UZ(1,"div",16),$t.qZA()),2&ee){const B=A.$implicit;$t.xp6(1),$t.Q6J("id",B.id)}}function r1(ee,A){if(1&ee&&$t._UZ(0,"app-landsat-timeseries",17),2&ee){const B=$t.oxw();$t.Q6J("lat",B.lat)("lon",B.lon)}}const Jp=(new Date).getFullYear(),pg=(new Date).getMonth()+1,rg={collections:[{name:"landsat",visparam:["landsat-tvi-false","landsat-tvi-true","landsat-tvi-agri"],period:["WET","DRY","MONTH"],year:Array.from({length:Jp-1985+1},(ee,A)=>1985+A),month:["01","02","03","04","05","06","07","08","09","10","11","12"]}]};let a1=(()=>{class ee{constructor(B){this.pointService=B,this.landsatMaps=[],this.centerCoordinates=Ei([-57.149819,-21.329828]),this.mapsInstances=[],this.lat=null,this.lon=null,this.landsatYears=[],this.selectedLandsatYear=Jp,this.landsatPeriods=["WET","DRY","MONTH"],this.landsatVisParams=["landsat-tvi-false","landsat-tvi-true","landsat-tvi-agri"],this.selectedLandsatPeriod=this.landsatPeriods[0],this.selectedLandsatVisParam=this.landsatVisParams[0],this.yearTypes=["TRADITIONAL","PRODES-YEAR"],this.selectedYearType=this.yearTypes[0]}ngOnInit(){this.initializeMaps(),this.pointService.setPoint({lat:-21.329828,lon:-57.149819}),this.pointService.point$.subscribe({next:J=>{J.lat&&J.lon&&(this.lat=J.lat,this.lon=J.lon,this.updateCenterCoordinates([J.lon,J.lat]))}});const B=rg.collections.find(J=>"landsat"===J.name);B&&(this.landsatYears=B.year),this.landsatYears.unshift("Todos")}addMarker(B,J,se){const Se=new Zp({geometry:new Ds(Ei([J,B]))}),Re=new eh({image:new Eu({anchor:[.5,.5],src:Ed,scale:1})});Se.setStyle(Re);const Ze=new Th({features:[Se]}),$e=new Au({source:Ze});se.addLayer($e)}initializeMaps(){this.createMaps("landsat",this.selectedLandsatPeriod,this.selectedLandsatVisParam)}createMaps(B,J,se){this.landsatMaps=[];const Se=rg.collections.find(Re=>"landsat"===Re.name);if(Se)for(let Re of Se.year)if("PRODES-YEAR"===this.selectedYearType){if("Todos"!=this.selectedLandsatYear&&Re!==this.selectedLandsatYear)continue;const Ze=new Date(Re-1,8,1),$e=new Date(Re,7,31);this.loadProdesYearMaps(B,Re,se,Ze,$e,J)}else{if("Todos"!=this.selectedLandsatYear&&Re!==this.selectedLandsatYear)continue;this.loadTraditionalYearMaps(B,Re,se,J)}}loadProdesYearMaps(B,J,se,Se,Re,Ze){if("MONTH"===Ze){let $e=Se.getMonth()+1,wt=Se.getFullYear(),bt=Re.getMonth()+1,Gt=Re.getFullYear();for(let rn=wt;rn<=Gt;rn++){let Cn=rn===Gt?bt:12;for(let jn=rn===wt?$e:1;jn<=Cn;jn++){let Yn=jn<10?`0${jn}`:`${jn}`;if(rn===Jp&&parseInt(Yn,10)>pg)break;let er=`${B}-map-${Yn}-${rn}`;this.landsatMaps.push({month:Yn,year:rn,id:er}),this.addMap(B,er,"MONTH",rn,se,Yn)}}}else{let $e=`${B}-map-${Ze}-${J}`;this.landsatMaps.push({period:Ze,year:J,id:$e}),this.addMap(B,$e,Ze,J,se)}}loadTraditionalYearMaps(B,J,se,Se){if("MONTH"===Se)for(let Re of rg.collections[0].month){if(J===Jp&&parseInt(Re,10)>pg)break;let Ze=`${B}-map-${Re}-${J}`;this.landsatMaps.push({month:Re,year:J,id:Ze}),this.addMap(B,Ze,"MONTH",J,se,Re)}else{let Re=`${B}-map-${Se}-${J}`;this.landsatMaps.push({period:Se,year:J,id:Re}),this.addMap(B,Re,Se,J,se)}}addMap(B,J,se,Se,Re,Ze){const $e=`https://tm{1-5}.lapig.iesa.ufg.br/api/layers/landsat/{x}/{y}/{z}?period=${se}&year=${Se}&visparam=${Re}${"MONTH"===se?`&month=${Ze}`:""}`;setTimeout(()=>{const wt=new lu({target:J,layers:[new wr({source:new Ol({url:$e,attributions:`${"MONTH"===se?`Month ${Ze}`:se} - ${Se}`,attributionsCollapsible:!1})})],view:new ti({center:this.centerCoordinates,zoom:13}),interactions:Yh().extend([new bc({handleDownEvent:Gt=>{const rn=Fa(Gt.coordinate);return this.updateCenterCoordinates(rn),!0}})])}),bt=vo(this.centerCoordinates,"EPSG:3857","EPSG:4326");this.addMarker(bt[1],bt[0],wt),this.mapsInstances.push({id:J,map:wt})},0)}updateCenterCoordinates(B){this.centerCoordinates=Ei(B),this.updateMaps()}updateMaps(){for(let B of this.mapsInstances)B.map.getView().setCenter(this.centerCoordinates),vo(this.centerCoordinates,"EPSG:3857","EPSG:4326")}updateLandsatMaps(){this.mapsInstances=this.mapsInstances.filter(B=>!B.id.startsWith("landsat-map")),this.createMaps("landsat",this.selectedLandsatPeriod,this.selectedLandsatVisParam)}static#e=this.\u0275fac=function(J){return new(J||ee)($t.Y36(Id.H))};static#t=this.\u0275cmp=$t.Xpm({type:ee,selectors:[["app-map-grid-landsat"]],decls:21,vars:11,consts:[["class","text-center card",4,"ngIf"],[1,"flex","justify-content-evenly"],[1,"flex","flex-column","align-items-center"],["for","period-type-land"],["id","period-type-land",1,"w-full",3,"options","ngModel","ngModelChange","onChange"],["for","year-type"],["id","year-type",1,"w-full",3,"options","ngModel","ngModelChange","onChange"],["for","year-select-sant"],["id","year-select-sant",1,"w-full",3,"options","ngModel","ngModelChange","onChange"],["for","vis-params-land"],["id","vis-params-land",1,"w-full",3,"options","ngModel","ngModelChange","onChange"],[1,"map-grid","mt-3"],["class","map-item",4,"ngFor","ngForOf"],[3,"lat","lon",4,"ngIf"],[1,"text-center","card"],[1,"map-item"],[1,"map-container",3,"id"],[3,"lat","lon"]],template:function(J,se){1&J&&($t.YNc(0,t1,4,6,"h4",0),$t.TgZ(1,"div",1)(2,"span",2)(3,"label",3),$t._uU(4,"Period Type"),$t.qZA(),$t.TgZ(5,"p-selectButton",4),$t.NdJ("ngModelChange",function(Re){return se.selectedLandsatPeriod=Re})("onChange",function(){return se.updateLandsatMaps()}),$t.qZA()(),$t.TgZ(6,"span",2)(7,"label",5),$t._uU(8,"Year Type"),$t.qZA(),$t.TgZ(9,"p-selectButton",6),$t.NdJ("ngModelChange",function(Re){return se.selectedYearType=Re})("onChange",function(){return se.updateLandsatMaps()}),$t.qZA()(),$t.TgZ(10,"span",2)(11,"label",7),$t._uU(12,"Year"),$t.qZA(),$t.TgZ(13,"p-dropdown",8),$t.NdJ("ngModelChange",function(Re){return se.selectedLandsatYear=Re})("onChange",function(){return se.updateLandsatMaps()}),$t.qZA()(),$t.TgZ(14,"span",2)(15,"label",9),$t._uU(16,"Visualization Params"),$t.qZA(),$t.TgZ(17,"p-selectButton",10),$t.NdJ("ngModelChange",function(Re){return se.selectedLandsatVisParam=Re})("onChange",function(){return se.updateLandsatMaps()}),$t.qZA()()(),$t.TgZ(18,"div",11),$t.YNc(19,n1,2,1,"div",12),$t.qZA(),$t.YNc(20,r1,1,2,"app-landsat-timeseries",13)),2&J&&($t.Q6J("ngIf",se.lat&&se.lon),$t.xp6(5),$t.Q6J("options",se.landsatPeriods)("ngModel",se.selectedLandsatPeriod),$t.xp6(4),$t.Q6J("options",se.yearTypes)("ngModel",se.selectedYearType),$t.xp6(4),$t.Q6J("options",se.landsatYears)("ngModel",se.selectedLandsatYear),$t.xp6(4),$t.Q6J("options",se.landsatVisParams)("ngModel",se.selectedLandsatVisParam),$t.xp6(2),$t.Q6J("ngForOf",se.landsatMaps),$t.xp6(1),$t.Q6J("ngIf",se.lat&&se.lon))},dependencies:[Hi.sg,Hi.O5,dg,jf.JJ,jf.On,tg,ng.Lt,Hi.JJ],styles:[".map-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.map-item[_ngcontent-%COMP%]{flex:1 1 20%;margin:1px;text-align:center}.map-container[_ngcontent-%COMP%]{width:100%;height:300px}"]})}return ee})(),o1=(()=>{class ee{static#e=this.\u0275fac=function(J){return new(J||ee)};static#t=this.\u0275mod=$t.oAB({type:ee});static#n=this.\u0275inj=$t.cJS({imports:[ie.Bz.forChild([{path:"",data:{breadcrumb:"Maps"},component:Qg},{path:"sentinel",data:{breadcrumb:"Maps"},component:Bg},{path:"landsat",data:{breadcrumb:"Maps"},component:a1},{path:"**",redirectTo:"/notfound"}]),ie.Bz]})}return ee})();var s1=Aa(3162);function l1(ee,A){if(1&ee&&$t._UZ(0,"plotly-plot",1),2&ee){const B=$t.oxw();$t.Q6J("data",B.plotlyData)("layout",B.layout)}}let c1=(()=>{class ee{constructor(B){this.http=B,this.layout={title:"MODIS 2 Timeseries",xaxis:{title:"Date",ticks:{color:"#495057"},grid:{color:"#ebedef"}},yaxis:{title:"NDVI",min:0,max:1.2,type:"linear"},yaxis2:{title:"Precipitation (mm)",overlaying:"y",side:"right",type:"linear"}}}ngOnChanges(B){B.lat&&B.lon&&this.isValidLatLon()&&this.loadTimeseries()}isValidLatLon(){return void 0!==this.lat&&void 0!==this.lon&&!isNaN(this.lat)&&!isNaN(this.lon)}loadTimeseries(){this.http.get(`https://tiles.lapig.iesa.ufg.br/api/timeseries/modis/${this.lat}/${this.lon}`).pipe((0,Ld.K)(J=>(console.error("Error fetching timeseries:",J),(0,Pd._)(J)))).subscribe(J=>{console.log(J),this.plotlyData=J})}static#e=this.\u0275fac=function(J){return new(J||ee)($t.Y36(Xp.eN))};static#t=this.\u0275cmp=$t.Xpm({type:ee,selectors:[["app-modis-timeseries"]],inputs:{lat:"lat",lon:"lon"},standalone:!0,features:[$t.TTD,$t.jDz],decls:1,vars:1,consts:[[3,"data","layout",4,"ngIf"],[3,"data","layout"]],template:function(J,se){1&J&&$t.YNc(0,l1,1,2,"plotly-plot",0),2&J&&$t.Q6J("ngIf",se.plotlyData)},dependencies:[Hc,ic,Hi.O5]})}return ee})();var gg=Aa(4713);let u1=(()=>{class ee extends gg.s{static \u0275fac=(()=>{let B;return function(se){return(B||(B=$t.n5z(ee)))(se||ee)}})();static \u0275cmp=$t.Xpm({type:ee,selectors:[["ChevronLeftIcon"]],standalone:!0,features:[$t.qOj,$t.jDz],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M9.61296 13C9.50997 13.0005 9.40792 12.9804 9.3128 12.9409C9.21767 12.9014 9.13139 12.8433 9.05902 12.7701L3.83313 7.54416C3.68634 7.39718 3.60388 7.19795 3.60388 6.99022C3.60388 6.78249 3.68634 6.58325 3.83313 6.43628L9.05902 1.21039C9.20762 1.07192 9.40416 0.996539 9.60724 1.00012C9.81032 1.00371 10.0041 1.08597 10.1477 1.22959C10.2913 1.37322 10.3736 1.56698 10.3772 1.77005C10.3808 1.97313 10.3054 2.16968 10.1669 2.31827L5.49496 6.99022L10.1669 11.6622C10.3137 11.8091 10.3962 12.0084 10.3962 12.2161C10.3962 12.4238 10.3137 12.6231 10.1669 12.7701C10.0945 12.8433 10.0083 12.9014 9.91313 12.9409C9.81801 12.9804 9.71596 13.0005 9.61296 13Z","fill","currentColor"]],template:function(J,se){1&J&&($t.O4$(),$t.TgZ(0,"svg",0),$t._UZ(1,"path",1),$t.qZA()),2&J&&($t.Tol(se.getClassNames()),$t.uIk("aria-label",se.ariaLabel)("aria-hidden",se.ariaHidden)("role",se.role))},encapsulation:2})}return ee})(),h1=(()=>{class ee extends gg.s{static \u0275fac=(()=>{let B;return function(se){return(B||(B=$t.n5z(ee)))(se||ee)}})();static \u0275cmp=$t.Xpm({type:ee,selectors:[["ChevronRightIcon"]],standalone:!0,features:[$t.qOj,$t.jDz],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M4.38708 13C4.28408 13.0005 4.18203 12.9804 4.08691 12.9409C3.99178 12.9014 3.9055 12.8433 3.83313 12.7701C3.68634 12.6231 3.60388 12.4238 3.60388 12.2161C3.60388 12.0084 3.68634 11.8091 3.83313 11.6622L8.50507 6.99022L3.83313 2.31827C3.69467 2.16968 3.61928 1.97313 3.62287 1.77005C3.62645 1.56698 3.70872 1.37322 3.85234 1.22959C3.99596 1.08597 4.18972 1.00371 4.3928 1.00012C4.59588 0.996539 4.79242 1.07192 4.94102 1.21039L10.1669 6.43628C10.3137 6.58325 10.3962 6.78249 10.3962 6.99022C10.3962 7.19795 10.3137 7.39718 10.1669 7.54416L4.94102 12.7701C4.86865 12.8433 4.78237 12.9014 4.68724 12.9409C4.59212 12.9804 4.49007 13.0005 4.38708 13Z","fill","currentColor"]],template:function(J,se){1&J&&($t.O4$(),$t.TgZ(0,"svg",0),$t._UZ(1,"path",1),$t.qZA()),2&J&&($t.Tol(se.getClassNames()),$t.uIk("aria-label",se.ariaLabel)("aria-hidden",se.ariaHidden)("role",se.role))},encapsulation:2})}return ee})();var f1=Aa(7778),d1=Aa(3259);let N1=(()=>{class ee{static \u0275fac=function(J){return new(J||ee)};static \u0275mod=$t.oAB({type:ee});static \u0275inj=$t.cJS({imports:[Hi.ez,Gu.m8,d1.z,eg.T,f1.q,u1,h1,Gu.m8]})}return ee})();Od.plotlyjs=s1;let j1=(()=>{class ee{static#e=this.\u0275fac=function(J){return new(J||ee)};static#t=this.\u0275mod=$t.oAB({type:ee});static#n=this.\u0275inj=$t.cJS({imports:[Hi.ez,o1,$g,Od,c1,dg,hg,N1,jf.u5,Og,ng.kW]})}return ee})()},3162:jd=>{self,jd.exports=function(){var Zu={79288:function(ie,F,e){"use strict";var S=e(3400),k={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var o in k){var T=o.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");S.addStyleRule(T,k[o])}},86712:function(ie,F,e){"use strict";ie.exports=e(84224)},37240:function(ie,F,e){"use strict";ie.exports=e(51132)},29744:function(ie,F,e){"use strict";ie.exports=e(94456)},29352:function(ie,F,e){"use strict";ie.exports=e(67244)},96144:function(ie,F,e){"use strict";ie.exports=e(97776)},53219:function(ie,F,e){"use strict";ie.exports=e(61712)},4624:function(ie,F,e){"use strict";ie.exports=e(95856)},54543:function(ie,F,e){"use strict";ie.exports=e(54272)},45e3:function(ie,F,e){"use strict";ie.exports=e(85404)},62300:function(ie,F,e){"use strict";ie.exports=e(26048)},6920:function(ie,F,e){"use strict";ie.exports=e(66240)},10264:function(ie,F,e){"use strict";ie.exports=e(40448)},32016:function(ie,F,e){"use strict";ie.exports=e(64884)},27528:function(ie,F,e){"use strict";ie.exports=e(15088)},75556:function(ie,F,e){"use strict";ie.exports=e(76744)},39204:function(ie,F,e){"use strict";ie.exports=e(94704)},73996:function(ie,F,e){"use strict";ie.exports=e(62396)},16489:function(ie,F,e){"use strict";ie.exports=e(32028)},5e3:function(ie,F,e){"use strict";ie.exports=e(81932)},77280:function(ie,F,e){"use strict";ie.exports=e(45536)},33992:function(ie,F,e){"use strict";ie.exports=e(42600)},17600:function(ie,F,e){"use strict";ie.exports=e(21536)},49116:function(ie,F,e){"use strict";ie.exports=e(65664)},46808:function(ie,F,e){"use strict";ie.exports=e(29044)},36168:function(ie,F,e){"use strict";ie.exports=e(48928)},13792:function(ie,F,e){"use strict";var S=e(32016);S.register([e(37240),e(29352),e(5e3),e(33992),e(17600),e(49116),e(6920),e(67484),e(79440),e(39204),e(83096),e(36168),e(20260),e(63560),e(65832),e(46808),e(73996),e(48824),e(89904),e(25120),e(13752),e(4340),e(62300),e(29800),e(8363),e(54543),e(86636),e(42192),e(32140),e(77280),e(89296),e(56816),e(70192),e(45e3),e(27528),e(84764),e(3920),e(50248),e(4624),e(69967),e(10264),e(86152),e(53219),e(81604),e(63796),e(29744),e(89336),e(86712),e(75556),e(16489),e(97312),e(96144)]),ie.exports=S},3920:function(ie,F,e){"use strict";ie.exports=e(43480)},25120:function(ie,F,e){"use strict";ie.exports=e(6296)},4340:function(ie,F,e){"use strict";ie.exports=e(7404)},86152:function(ie,F,e){"use strict";ie.exports=e(65456)},56816:function(ie,F,e){"use strict";ie.exports=e(22020)},89296:function(ie,F,e){"use strict";ie.exports=e(29928)},20260:function(ie,F,e){"use strict";ie.exports=e(75792)},32140:function(ie,F,e){"use strict";ie.exports=e(156)},84764:function(ie,F,e){"use strict";ie.exports=e(45499)},48824:function(ie,F,e){"use strict";ie.exports=e(3296)},69967:function(ie,F,e){"use strict";ie.exports=e(4184)},8363:function(ie,F,e){"use strict";ie.exports=e(36952)},86636:function(ie,F,e){"use strict";ie.exports=e(38983)},70192:function(ie,F,e){"use strict";ie.exports=e(11572)},81604:function(ie,F,e){"use strict";ie.exports=e(76924)},63796:function(ie,F,e){"use strict";ie.exports=e(62944)},89336:function(ie,F,e){"use strict";ie.exports=e(95443)},67484:function(ie,F,e){"use strict";ie.exports=e(34864)},97312:function(ie,F,e){"use strict";ie.exports=e(76272)},42192:function(ie,F,e){"use strict";ie.exports=e(97924)},29800:function(ie,F,e){"use strict";ie.exports=e(15436)},63560:function(ie,F,e){"use strict";ie.exports=e(5621)},89904:function(ie,F,e){"use strict";ie.exports=e(91304)},50248:function(ie,F,e){"use strict";ie.exports=e(41724)},65832:function(ie,F,e){"use strict";ie.exports=e(31991)},79440:function(ie,F,e){"use strict";ie.exports=e(22869)},13752:function(ie,F,e){"use strict";ie.exports=e(67776)},83096:function(ie,F,e){"use strict";ie.exports=e(95952)},72196:function(ie){"use strict";ie.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},13916:function(ie,F,e){"use strict";var S=e(72196),k=e(25376),o=e(33816),T=e(31780).templatedArray;e(36208),ie.exports=T("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:k({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:S.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:S.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",o.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",o.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",o.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",o.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:k({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},90272:function(ie,F,e){"use strict";var S=e(3400),k=e(54460),o=e(23816).draw;function T(p){S.filterVisible(p._fullLayout.annotations).forEach(function(t){var i=k.getFromId(p,t.xref),r=k.getFromId(p,t.yref),n=k.getRefType(t.xref),a=k.getRefType(t.yref);t._extremes={},"range"===n&&b(t,i),"range"===a&&b(t,r)})}function b(p,l){var t,i=l._id,r=i.charAt(0),n=p[r],a=p["a"+r],h=p["_"+r+"padplus"],u=p["_"+r+"padminus"],y={x:1,y:-1}[r]*p[r+"shift"],d=3*p.arrowsize*p.arrowwidth||0,m=d+y,g=d-y,x=3*p.startarrowsize*p.arrowwidth||0,v=x+y,_=x-y;if(p["a"+r+"ref"]===p[r+"ref"]){var f=k.findExtremes(l,[l.r2c(n)],{ppadplus:m,ppadminus:g}),C=k.findExtremes(l,[l.r2c(a)],{ppadplus:Math.max(h,v),ppadminus:Math.max(u,_)});t={min:[f.min[0],C.min[0]],max:[f.max[0],C.max[0]]}}else v=a?v+a:v,_=a?_-a:_,t=k.findExtremes(l,[l.r2c(n)],{ppadplus:Math.max(h,m,v),ppadminus:Math.max(u,g,_)});p._extremes[i]=t}ie.exports=function(p){if(S.filterVisible(p._fullLayout.annotations).length&&p._fullData.length)return S.syncOrAsync([o,T],p)}},42300:function(ie,F,e){"use strict";var S=e(3400),k=e(24040),o=e(31780).arrayEditor;function T(p,l){var t,i,r,n,a,s,c,h=p._fullLayout.annotations,u=[],y=[],d=[],m=(l||[]).length;for(t=0;t<h.length;t++)if(n=(r=h[t]).clicktoshow){for(i=0;i<m;i++)if(s=(a=l[i]).xaxis,c=a.yaxis,s._id===r.xref&&c._id===r.yref&&s.d2r(a.x)===b(r._xclick,s)&&c.d2r(a.y)===b(r._yclick,c)){(r.visible?"onout"===n?y:d:u).push(t);break}i===m&&r.visible&&"onout"===n&&y.push(t)}return{on:u,off:y,explicitOff:d}}function b(p,l){return"log"===l.type?l.l2r(p):l.d2r(p)}ie.exports={hasClickToShow:function(p,l){var t=T(p,l);return t.on.length>0||t.explicitOff.length>0},onClick:function(p,l){var t,i,r=T(p,l),n=r.on,a=r.off.concat(r.explicitOff),s={},c=p._fullLayout.annotations;if(n.length||a.length){for(t=0;t<n.length;t++)(i=o(p.layout,"annotations",c[n[t]])).modifyItem("visible",!0),S.extendFlat(s,i.getUpdateObj());for(t=0;t<a.length;t++)(i=o(p.layout,"annotations",c[a[t]])).modifyItem("visible",!1),S.extendFlat(s,i.getUpdateObj());return k.call("update",p,{},s)}}}},87192:function(ie,F,e){"use strict";var S=e(3400),k=e(76308);ie.exports=function(o,T,b,p){p("opacity");var l=p("bgcolor"),t=p("bordercolor"),i=k.opacity(t);p("borderpad");var r=p("borderwidth"),n=p("showarrow");if(p("text",n?" ":b._dfltTitle.annotation),p("textangle"),S.coerceFont(p,"font",b.font),p("width"),p("align"),p("height")&&p("valign"),n){var a,s,c=p("arrowside");-1!==c.indexOf("end")&&(a=p("arrowhead"),s=p("arrowsize")),-1!==c.indexOf("start")&&(p("startarrowhead",a),p("startarrowsize",s)),p("arrowcolor",i?T.bordercolor:k.defaultLine),p("arrowwidth",2*(i&&r||1)),p("standoff"),p("startstandoff")}var h=p("hovertext"),u=b.hoverlabel||{};if(h){var y=p("hoverlabel.bgcolor",u.bgcolor||(k.opacity(l)?k.rgb(l):k.defaultLine)),d=p("hoverlabel.bordercolor",u.bordercolor||k.contrast(y)),m=S.extendFlat({},u.font);m.color||(m.color=d),S.coerceFont(p,"hoverlabel.font",m)}p("captureevents",!!h)}},26828:function(ie,F,e){"use strict";var S=e(38248),k=e(36896);ie.exports=function(o,T,b,p){T=T||{};var l="log"===b&&"linear"===T.type;if(l||"linear"===b&&"log"===T.type)for(var i,r,n=o._fullLayout.annotations,a=T._id.charAt(0),s=0;s<n.length;s++)r="annotations["+s+"].",(i=n[s])[a+"ref"]===T._id&&c(a),i["a"+a+"ref"]===T._id&&c("a"+a);function c(h){var u=i[h],y=null;y=l?k(u,T.range):Math.pow(10,u),S(y)||(y=null),p(r+h,y)}}},45216:function(ie,F,e){"use strict";var S=e(3400),k=e(54460),o=e(51272),T=e(87192),b=e(13916);function p(l,t,i){function r(C,w){return S.coerce(l,t,b,C,w)}var n=r("visible"),a=r("clicktoshow");if(n||a){T(l,t,i,r);for(var s=t.showarrow,c=["x","y"],h=[-10,-30],u={_fullLayout:i},y=0;y<2;y++){var d=c[y],m=k.coerceRef(l,t,u,d,"","paper");if("paper"!==m&&k.getFromId(u,m)._annIndices.push(t._index),k.coercePosition(t,u,r,m,d,.5),s){var g="a"+d,x=k.coerceRef(l,t,u,g,"pixel",["pixel","paper"]);"pixel"!==x&&x!==m&&(x=t[g]="pixel"),k.coercePosition(t,u,r,x,g,"pixel"===x?h[y]:.4)}r(d+"anchor"),r(d+"shift")}if(S.noneOrAll(l,t,["x","y"]),s&&S.noneOrAll(l,t,["ax","ay"]),a){var _=r("xclick"),f=r("yclick");t._xclick=void 0===_?t.x:k.cleanPosition(_,u,t.xref),t._yclick=void 0===f?t.y:k.cleanPosition(f,u,t.yref)}}}ie.exports=function(l,t){o(l,t,{name:"annotations",handleItemDefaults:p})}},23816:function(ie,F,e){"use strict";var S=e(33428),k=e(24040),o=e(7316),T=e(3400),b=T.strTranslate,p=e(54460),l=e(76308),t=e(43616),i=e(93024),r=e(72736),n=e(93972),a=e(86476),s=e(31780).arrayEditor,c=e(33652);function h(d,m){var g=d._fullLayout.annotations[m]||{},x=p.getFromId(d,g.xref),v=p.getFromId(d,g.yref);x&&x.setScale(),v&&v.setScale(),y(d,g,m,!1,x,v)}function u(d,m,g,x,v){var _=v[g],f=v[g+"ref"],C=-1!==g.indexOf("y"),w="domain"===p.getRefType(f),E=C?x.h:x.w;return d?w?_+(C?-m:m)/d._length:d.p2r(d.r2p(_)+m):_+(C?-m:m)/E}function y(d,m,g,x,v,_){var f,C,w=d._fullLayout,E=d._fullLayout._size,P=d._context.edits;x?(f="annotation-"+x,C=x+".annotations"):(f="annotation",C="annotations");var L=s(d.layout,C,m),O=L.modifyBase,z=L.modifyItem,V=L.getUpdateObj;w._infolayer.selectAll("."+f+'[data-index="'+g+'"]').remove();var R="clip"+w._uid+"_ann"+g;if(m._input&&!1!==m.visible){var U={x:{},y:{}},Z=+m.textangle||0,N=w._infolayer.append("g").classed(f,!0).attr("data-index",String(g)).style("opacity",m.opacity),G=N.append("g").classed("annotation-text-g",!0),W=P[m.showarrow?"annotationTail":"annotationPosition"],ae=m.captureevents||P.annotationText||W,re=G.append("g").style("pointer-events",ae?"all":null).call(n,"pointer").on("click",function(){d._dragging=!1,d.emit("plotly_clickannotation",Te(S.event))});m.hovertext&&re.on("mouseover",function(){var _e=m.hoverlabel,Ie=_e.font,De=this.getBoundingClientRect(),be=d.getBoundingClientRect();i.loneHover({x0:De.left-be.left,x1:De.right-be.left,y:(De.top+De.bottom)/2-be.top,text:m.hovertext,color:_e.bgcolor,borderColor:_e.bordercolor,fontFamily:Ie.family,fontSize:Ie.size,fontColor:Ie.color,fontWeight:Ie.weight,fontStyle:Ie.style,fontVariant:Ie.variant,fontShadow:Ie.fontShadow,fontLineposition:Ie.fontLineposition,fontTextcase:Ie.fontTextcase},{container:w._hoverlayer.node(),outerContainer:w._paper.node(),gd:d})}).on("mouseout",function(){i.loneUnhover(w._hoverlayer.node())});var ne=m.borderwidth,$=ne+m.borderpad,X=re.append("rect").attr("class","bg").style("stroke-width",ne+"px").call(l.stroke,m.bordercolor).call(l.fill,m.bgcolor),oe=m.width||m.height,fe=w._topclips.selectAll("#"+R).data(oe?[0]:[]);fe.enter().append("clipPath").classed("annclip",!0).attr("id",R).append("rect"),fe.exit().remove();var ue=m.font,ge=w._meta?T.templateString(m.text,w._meta):m.text,we=re.append("text").classed("annotation-text",!0).text(ge);P.annotationText?we.call(r.makeEditable,{delegate:re,gd:d}).call(xe).on("edit",function(_e){m.text=_e,this.call(xe),z("text",_e),v&&v.autorange&&O(v._name+".autorange",!0),_&&_.autorange&&O(_._name+".autorange",!0),k.call("_guiRelayout",d,V())}):we.call(xe)}else S.selectAll("#"+R).remove();function Te(_e){var Ie={index:g,annotation:m._input,fullAnnotation:m,event:_e};return x&&(Ie.subplotId=x),Ie}function xe(_e){return _e.call(t.font,ue).attr({"text-anchor":{left:"start",right:"end"}[m.align]||"middle"}),r.convertToTspans(_e,d,ye),_e}function ye(){var _e=we.selectAll("a");1===_e.size()&&_e.text()===we.text()&&re.insert("a",":first-child").attr({"xlink:xlink:href":_e.attr("xlink:href"),"xlink:xlink:show":_e.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(X.node());var Ie=re.select(".annotation-text-math-group"),De=!Ie.empty(),be=t.bBox((De?Ie:we).node()),he=be.width,ce=be.height,me=m.width||he,Pe=m.height||ce,Ae=Math.round(me+2*$),Ce=Math.round(Pe+2*$);function Oe(Mt,yt){return"auto"===yt&&(yt=Mt<.3333333333333333?"left":Mt>.6666666666666666?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[yt]}for(var Ne=!1,je=["x","y"],ve=0;ve<je.length;ve++){var Me,Le,Ue,ze,qe,Ke=je[ve],it=m[Ke+"ref"]||Ke,ft=m["a"+Ke+"ref"],dt={x:v,y:_}[Ke],kt=(Z+("x"===Ke?0:-90))*Math.PI/180,St=Ae*Math.cos(kt),Tt=Ce*Math.sin(kt),lt=Math.abs(St)+Math.abs(Tt),ot=m[Ke+"anchor"],Rt=m[Ke+"shift"]*("x"===Ke?1:-1),Vt=U[Ke],Ht=p.getRefType(it);if(dt&&"domain"!==Ht){var zt=dt.r2fraction(m[Ke]);(zt<0||zt>1)&&(ft===it?((zt=dt.r2fraction(m["a"+Ke]))<0||zt>1)&&(Ne=!0):Ne=!0),Me=dt._offset+dt.r2p(m[Ke]),ze=.5}else{var Qe="domain"===Ht;"x"===Ke?(Ue=m[Ke],Me=Qe?dt._offset+dt._length*Ue:Me=E.l+E.w*Ue):(Ue=1-m[Ke],Me=Qe?dt._offset+dt._length*Ue:Me=E.t+E.h*Ue),ze=m.showarrow?.5:Ue}if(m.showarrow){Vt.head=Me;var nt=m["a"+Ke];if(qe=St*Oe(.5,m.xanchor)-Tt*Oe(.5,m.yanchor),ft===it){var We=p.getRefType(ft);"domain"===We?("y"===Ke&&(nt=1-nt),Vt.tail=dt._offset+dt._length*nt):Vt.tail="paper"===We?"y"===Ke?E.t+E.h*(nt=1-nt):E.l+E.w*nt:dt._offset+dt.r2p(nt),Le=qe}else Vt.tail=Me+nt,Le=qe+nt;Vt.text=Vt.tail+qe;var et=w["x"===Ke?"width":"height"];if("paper"===it&&(Vt.head=T.constrain(Vt.head,1,et-1)),"pixel"===ft){var gt=-Math.max(Vt.tail-3,Vt.text),ht=Math.min(Vt.tail+3,Vt.text)-et;gt>0?(Vt.tail+=gt,Vt.text+=gt):ht>0&&(Vt.tail-=ht,Vt.text-=ht)}Vt.tail+=Rt,Vt.head+=Rt}else Le=qe=lt*Oe(ze,ot),Vt.text=Me+qe;Vt.text+=Rt,qe+=Rt,m["_"+Ke+"padplus"]=lt/2+(Le+=Rt),m["_"+Ke+"padminus"]=lt/2-Le,m["_"+Ke+"size"]=lt,m["_"+Ke+"shift"]=qe}if(Ne)re.remove();else{var Ge=0,He=0;"left"!==m.align&&(Ge=(me-he)*("center"===m.align?.5:1)),"top"!==m.valign&&(He=(Pe-ce)*("middle"===m.valign?.5:1)),De?Ie.select("svg").attr({x:$+Ge-1,y:$+He}).call(t.setClipUrl,oe?R:null,d):we.call(r.positionText,$+Ge-be.left,$+He-be.top).call(t.setClipUrl,oe?R:null,d),fe.select("rect").call(t.setRect,$,$,me,Pe),X.call(t.setRect,ne/2,ne/2,Ae-ne,Ce-ne),re.call(t.setTranslate,Math.round(U.x.text-Ae/2),Math.round(U.y.text-Ce/2)),G.attr({transform:"rotate("+Z+","+U.x.text+","+U.y.text+")"});var xt,At=function(Mt,yt){N.selectAll(".annotation-arrow-g").remove();var Pt=U.x.head,Ct=U.y.head,Dt=U.x.tail+Mt,Ut=U.y.tail+yt,Bt=U.x.text+Mt,qt=U.y.text+yt,an=T.rotationXYMatrix(Z,Bt,qt),mn=T.apply2DTransform(an),Qt=T.apply2DTransform2(an),sn=+X.attr("width"),Kt=+X.attr("height"),qn=Bt-.5*sn,Fn=qn+sn,Sn=qt-.5*Kt,hn=Sn+Kt,wn=[[qn,Sn,qn,hn],[qn,hn,Fn,hn],[Fn,hn,Fn,Sn],[Fn,Sn,qn,Sn]].map(Qt);if(!wn.reduce(function(vr,or){return vr^!!T.segmentsIntersect(Pt,Ct,Pt+1e6,Ct+1e6,or[0],or[1],or[2],or[3])},!1)){wn.forEach(function(vr){var or=T.segmentsIntersect(Dt,Ut,Pt,Ct,vr[0],vr[1],vr[2],vr[3]);or&&(Dt=or.x,Ut=or.y)});var pn=m.arrowwidth,An=m.arrowcolor,On=m.arrowside,Dn=N.append("g").style({opacity:l.opacity(An)}).classed("annotation-arrow-g",!0),Vn=Dn.append("path").attr("d","M"+Dt+","+Ut+"L"+Pt+","+Ct).style("stroke-width",pn+"px").call(l.stroke,l.rgb(An));if(c(Vn,On,m),P.annotationPosition&&Vn.node().parentNode&&!x){var Gn=Pt,Nn=Ct;if(m.standoff){var ir=Math.sqrt(Math.pow(Pt-Dt,2)+Math.pow(Ct-Ut,2));Gn+=m.standoff*(Dt-Pt)/ir,Nn+=m.standoff*(Ut-Ct)/ir}var $n,mr,lr=Dn.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Dt-Gn)+","+(Ut-Nn),transform:b(Gn,Nn)}).style("stroke-width",pn+6+"px").call(l.stroke,"rgba(0,0,0,0)").call(l.fill,"rgba(0,0,0,0)");a.init({element:lr.node(),gd:d,prepFn:function(){var vr=t.getTranslate(re);$n=vr.x,mr=vr.y,v&&v.autorange&&O(v._name+".autorange",!0),_&&_.autorange&&O(_._name+".autorange",!0)},moveFn:function(vr,or){var Or=mn($n,mr),fn=Or[0]+vr,gn=Or[1]+or;re.call(t.setTranslate,fn,gn),z("x",u(v,vr,"x",E,m)),z("y",u(_,or,"y",E,m)),m.axref===m.xref&&z("ax",u(v,vr,"ax",E,m)),m.ayref===m.yref&&z("ay",u(_,or,"ay",E,m)),Dn.attr("transform",b(vr,or)),G.attr({transform:"rotate("+Z+","+fn+","+gn+")"})},doneFn:function(){k.call("_guiRelayout",d,V());var vr=document.querySelector(".js-notes-box-panel");vr&&vr.redraw(vr.selectedObj)}})}}};m.showarrow&&At(0,0),W&&a.init({element:re.node(),gd:d,prepFn:function(){xt=G.attr("transform")},moveFn:function(Mt,yt){var Pt="pointer";if(m.showarrow)z("ax",m.axref===m.xref?u(v,Mt,"ax",E,m):m.ax+Mt),z("ay",m.ayref===m.yref?u(_,yt,"ay",E.w,m):m.ay+yt),At(Mt,yt);else{if(x)return;var Ct,Dt;if(v)Ct=u(v,Mt,"x",E,m);else{var Ut=m._xsize/E.w;Ct=a.align(m.x+(m._xshift-m.xshift)/E.w-Ut/2+Mt/E.w,Ut,0,1,m.xanchor)}if(_)Dt=u(_,yt,"y",E,m);else{var qt=m._ysize/E.h;Dt=a.align(m.y-(m._yshift+m.yshift)/E.h-qt/2-yt/E.h,qt,0,1,m.yanchor)}z("x",Ct),z("y",Dt),v&&_||(Pt=a.getCursor(v?.5:Ct,_?.5:Dt,m.xanchor,m.yanchor))}G.attr({transform:b(Mt,yt)+xt}),n(re,Pt)},clickFn:function(Mt,yt){m.captureevents&&d.emit("plotly_clickannotation",Te(yt))},doneFn:function(){n(re),k.call("_guiRelayout",d,V());var Mt=document.querySelector(".js-notes-box-panel");Mt&&Mt.redraw(Mt.selectedObj)}})}}}ie.exports={draw:function(d){var m=d._fullLayout;m._infolayer.selectAll(".annotation").remove();for(var g=0;g<m.annotations.length;g++)m.annotations[g].visible&&h(d,g);return o.previousPromises(d)},drawOne:h,drawRaw:y}},33652:function(ie,F,e){"use strict";var S=e(33428),k=e(76308),o=e(72196),T=e(3400),b=T.strScale,p=T.strRotate,l=T.strTranslate;ie.exports=function(t,i,r){var n,a,s,c,h=t.node(),u=o[r.arrowhead||0],y=o[r.startarrowhead||0],d=(r.arrowwidth||1)*(r.arrowsize||1),m=(r.arrowwidth||1)*(r.startarrowsize||1),g=i.indexOf("start")>=0,x=i.indexOf("end")>=0,v=u.backoff*d+r.standoff,_=y.backoff*m+r.startstandoff;if("line"===h.nodeName){n={x:+t.attr("x1"),y:+t.attr("y1")},a={x:+t.attr("x2"),y:+t.attr("y2")};var f=n.x-a.x,C=n.y-a.y;if(c=(s=Math.atan2(C,f))+Math.PI,v&&_&&v+_>Math.sqrt(f*f+C*C))return void N();if(v){if(v*v>f*f+C*C)return void N();var w=v*Math.cos(s),E=v*Math.sin(s);a.x+=w,a.y+=E,t.attr({x2:a.x,y2:a.y})}if(_){if(_*_>f*f+C*C)return void N();var P=_*Math.cos(s),L=_*Math.sin(s);n.x-=P,n.y-=L,t.attr({x1:n.x,y1:n.y})}}else if("path"===h.nodeName){var O=h.getTotalLength(),z="";if(O<v+_)return void N();var V=h.getPointAtLength(0),R=h.getPointAtLength(.1);s=Math.atan2(V.y-R.y,V.x-R.x),n=h.getPointAtLength(Math.min(_,O)),z="0px,"+_+"px,";var U=h.getPointAtLength(O),Z=h.getPointAtLength(O-.1);c=Math.atan2(U.y-Z.y,U.x-Z.x),a=h.getPointAtLength(Math.max(0,O-v)),t.style("stroke-dasharray",z+=O-(z?_+v:v)+"px,"+O+"px")}function N(){t.style("stroke-dasharray","0px,100px")}function G(W,ae,re,ne){W.path&&(W.noRotate&&(re=0),S.select(h.parentNode).append("path").attr({class:t.attr("class"),d:W.path,transform:l(ae.x,ae.y)+p(180*re/Math.PI)+b(ne)}).style({fill:k.rgb(r.arrowcolor),"stroke-width":0}))}g&&G(y,n,s,m),x&&G(u,a,c,d)}},79180:function(ie,F,e){"use strict";var S=e(23816),k=e(42300);ie.exports={moduleType:"component",name:"annotations",layoutAttributes:e(13916),supplyLayoutDefaults:e(45216),includeBasePlot:e(36632)("annotations"),calcAutorange:e(90272),draw:S.draw,drawOne:S.drawOne,drawRaw:S.drawRaw,hasClickToShow:k.hasClickToShow,onClick:k.onClick,convertCoords:e(26828)}},45899:function(ie,F,e){"use strict";var S=e(13916),k=e(67824).overrideAll,o=e(31780).templatedArray;ie.exports=k(o("annotation",{visible:S.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:S.xanchor,xshift:S.xshift,yanchor:S.yanchor,yshift:S.yshift,text:S.text,textangle:S.textangle,font:S.font,width:S.width,height:S.height,opacity:S.opacity,align:S.align,valign:S.valign,bgcolor:S.bgcolor,bordercolor:S.bordercolor,borderpad:S.borderpad,borderwidth:S.borderwidth,showarrow:S.showarrow,arrowcolor:S.arrowcolor,arrowhead:S.arrowhead,startarrowhead:S.startarrowhead,arrowside:S.arrowside,arrowsize:S.arrowsize,startarrowsize:S.startarrowsize,arrowwidth:S.arrowwidth,standoff:S.standoff,startstandoff:S.startstandoff,hovertext:S.hovertext,hoverlabel:S.hoverlabel,captureevents:S.captureevents}),"calc","from-root")},42456:function(ie,F,e){"use strict";var S=e(3400),k=e(54460);function o(T,b){var p=b.fullSceneLayout.domain,l=b.fullLayout._size,t={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};T._xa={},S.extendFlat(T._xa,t),k.setConvert(T._xa),T._xa._offset=l.l+p.x[0]*l.w,T._xa.l2p=function(){return.5*(1+T._pdata[0]/T._pdata[3])*l.w*(p.x[1]-p.x[0])},T._ya={},S.extendFlat(T._ya,t),k.setConvert(T._ya),T._ya._offset=l.t+(1-p.y[1])*l.h,T._ya.l2p=function(){return.5*(1-T._pdata[1]/T._pdata[3])*l.h*(p.y[1]-p.y[0])}}ie.exports=function(T){for(var b=T.fullSceneLayout.annotations,p=0;p<b.length;p++)o(b[p],T);T.fullLayout._infolayer.selectAll(".annotation-"+T.id).remove()}},52808:function(ie,F,e){"use strict";var S=e(3400),k=e(54460),o=e(51272),T=e(87192),b=e(45899);function p(l,t,i,r){function n(s,c){return S.coerce(l,t,b,s,c)}function a(s){var c=s+"axis",h={_fullLayout:{}};return h._fullLayout[c]=i[c],k.coercePosition(t,h,n,s,s,.5)}n("visible")&&(T(l,t,r.fullLayout,n),a("x"),a("y"),a("z"),S.noneOrAll(l,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",n("xanchor"),n("yanchor"),n("xshift"),n("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",n("ax",-10),n("ay",-30),S.noneOrAll(l,t,["ax","ay"])))}ie.exports=function(l,t,i){o(l,t,{name:"annotations",handleItemDefaults:p,fullLayout:i.fullLayout})}},71836:function(ie,F,e){"use strict";var S=e(23816).drawRaw,k=e(94424),o=["x","y","z"];ie.exports=function(T){for(var b=T.fullSceneLayout,p=T.dataScale,l=b.annotations,t=0;t<l.length;t++){for(var i=l[t],r=!1,n=0;n<3;n++){var a=o[n],c=b[a+"axis"].r2fraction(i[a]);if(c<0||c>1){r=!0;break}}r?T.fullLayout._infolayer.select(".annotation-"+T.id+'[data-index="'+t+'"]').remove():(i._pdata=k(T.glplot.cameraParams,[b.xaxis.r2l(i.x)*p[0],b.yaxis.r2l(i.y)*p[1],b.zaxis.r2l(i.z)*p[2]]),S(T.graphDiv,i,t,T.id,i._xa,i._ya))}}},56864:function(ie,F,e){"use strict";var S=e(24040),k=e(3400);ie.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e(45899)}}},layoutAttributes:e(45899),handleDefaults:e(52808),includeBasePlot:function(o,T){var b=S.subplotsRegistry.gl3d;if(b)for(var p=b.attrRegex,l=Object.keys(o),t=0;t<l.length;t++){var i=l[t];p.test(i)&&(o[i].annotations||[]).length&&(k.pushUnique(T._basePlotModules,b),k.pushUnique(T._subplots.gl3d,i))}},convert:e(42456),draw:e(71836)}},54976:function(ie,F,e){"use strict";ie.exports=e(38700),e(15168),e(67020),e(89792),e(55668),e(65168),e(2084),e(26368),e(24747),e(65616),e(30632),e(73040),e(1104),e(51456),e(4592),e(45348)},97776:function(ie,F,e){"use strict";var S=e(54976),k=e(3400),o=e(39032),T=o.EPOCHJD,b=o.ONEDAY,p={valType:"enumerated",values:k.sortObjectKeys(S.calendars),editType:"calc",dflt:"gregorian"},l=function(d,m,g,x){var v={};return v[g]=p,k.coerce(d,m,v,g,x)},t="##",i={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:t,w:t,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},r={};function n(d){return r[d]||(r[d]=S.instance(d))}function a(d){return k.extendFlat({},p,{description:d})}function s(d){return"Sets the calendar system to use with `"+d+"` date data."}var c={xcalendar:a(s("x"))},h=k.extendFlat({},c,{ycalendar:a(s("y"))}),u=k.extendFlat({},h,{zcalendar:a(s("z"))}),y=a(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));ie.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:h,bar:h,box:h,heatmap:h,contour:h,histogram:h,histogram2d:h,histogram2dcontour:h,scatter3d:u,surface:u,mesh3d:u,scattergl:h,ohlc:c,candlestick:c},layout:{calendar:a(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:y},yaxis:{calendar:y},scene:{xaxis:{calendar:y},yaxis:{calendar:y},zaxis:{calendar:y}},polar:{radialaxis:{calendar:y}}},transforms:{filter:{valuecalendar:a(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:a(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:p,handleDefaults:l,handleTraceDefaults:function(d,m,g,x){for(var v=0;v<g.length;v++)l(d,m,g[v]+"calendar",x.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:n,worldCalFmt:function(d,m,g){for(var x,v,_,f,C,w=Math.floor((m+.05)/b)+T,E=n(g).fromJD(w),P=0;-1!==(P=d.indexOf("%",P));)"0"===(x=d.charAt(P+1))||"-"===x||"_"===x?(_=3,v=d.charAt(P+2),"_"===x&&(x="-")):(v=x,x="0",_=2),(f=i[v])?(C=f===t?t:E.formatDate(f[x]),d=d.substr(0,P)+C+d.substr(P+_),P+=C.length):P+=_;return d}}},22548:function(ie,F){"use strict";F.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],F.defaultLine="#444",F.lightLine="#eee",F.background="#fff",F.borderLine="#BEC8D9",F.lightFraction=90.9090909090909},76308:function(ie,F,e){"use strict";var S=e(49760),k=e(38248),o=e(38116).isTypedArray,T=ie.exports={},b=e(22548);T.defaults=b.defaults;var p=T.defaultLine=b.defaultLine;T.lightLine=b.lightLine;var l=T.background=b.background;function t(i){if(k(i)||"string"!=typeof i)return i;var r=i.trim();if("rgb"!==r.substr(0,3))return i;var n=r.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return i;var a=n[1].trim().split(/\s*[\s,]\s*/),s="a"===r.charAt(3)&&4===a.length;if(!s&&3!==a.length)return i;for(var c=0;c<a.length;c++){if(!(a[c].length&&(a[c]=Number(a[c]),a[c]>=0)))return i;if(3===c)a[c]>1&&(a[c]=1);else if(a[c]>=1)return i}var h=Math.round(255*a[0])+", "+Math.round(255*a[1])+", "+Math.round(255*a[2]);return s?"rgba("+h+", "+a[3]+")":"rgb("+h+")"}T.tinyRGB=function(i){var r=i.toRgb();return"rgb("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+")"},T.rgb=function(i){return T.tinyRGB(S(i))},T.opacity=function(i){return i?S(i).getAlpha():0},T.addOpacity=function(i,r){var n=S(i).toRgb();return"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+r+")"},T.combine=function(i,r){var n=S(i).toRgb();if(1===n.a)return S(i).toRgbString();var a=S(r||l).toRgb(),s=1===a.a?a:{r:255*(1-a.a)+a.r*a.a,g:255*(1-a.a)+a.g*a.a,b:255*(1-a.a)+a.b*a.a};return S({r:s.r*(1-n.a)+n.r*n.a,g:s.g*(1-n.a)+n.g*n.a,b:s.b*(1-n.a)+n.b*n.a}).toRgbString()},T.interpolate=function(i,r,n){var a=S(i).toRgb(),s=S(r).toRgb();return S({r:n*a.r+(1-n)*s.r,g:n*a.g+(1-n)*s.g,b:n*a.b+(1-n)*s.b}).toRgbString()},T.contrast=function(i,r,n){var a=S(i);return 1!==a.getAlpha()&&(a=S(T.combine(i,l))),(a.isDark()?r?a.lighten(r):l:n?a.darken(n):p).toString()},T.stroke=function(i,r){var n=S(r);i.style({stroke:T.tinyRGB(n),"stroke-opacity":n.getAlpha()})},T.fill=function(i,r){var n=S(r);i.style({fill:T.tinyRGB(n),"fill-opacity":n.getAlpha()})},T.clean=function(i){if(i&&"object"==typeof i){var r,n,a,s,c=Object.keys(i);for(r=0;r<c.length;r++)if(s=i[a=c[r]],"color"===a.substr(a.length-5))if(Array.isArray(s))for(n=0;n<s.length;n++)s[n]=t(s[n]);else i[a]=t(s);else if("colorscale"===a.substr(a.length-10)&&Array.isArray(s))for(n=0;n<s.length;n++)Array.isArray(s[n])&&(s[n][1]=t(s[n][1]));else if(Array.isArray(s)){var h=s[0];if(!Array.isArray(h)&&h&&"object"==typeof h)for(n=0;n<s.length;n++)T.clean(s[n])}else s&&"object"==typeof s&&!o(s)&&T.clean(s)}}},42996:function(ie,F,e){"use strict";var S=e(94724),k=e(25376),o=e(92880).extendFlat,T=e(67824).overrideAll;ie.exports=T({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:S.linecolor,outlinewidth:S.linewidth,bordercolor:S.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:S.minor.tickmode,nticks:S.nticks,tick0:S.tick0,dtick:S.dtick,tickvals:S.tickvals,ticktext:S.ticktext,ticks:o({},S.ticks,{dflt:""}),ticklabeloverflow:o({},S.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:S.ticklen,tickwidth:S.tickwidth,tickcolor:S.tickcolor,ticklabelstep:S.ticklabelstep,showticklabels:S.showticklabels,labelalias:S.labelalias,tickfont:k({}),tickangle:S.tickangle,tickformat:S.tickformat,tickformatstops:S.tickformatstops,tickprefix:S.tickprefix,showtickprefix:S.showtickprefix,ticksuffix:S.ticksuffix,showticksuffix:S.showticksuffix,separatethousands:S.separatethousands,exponentformat:S.exponentformat,minexponent:S.minexponent,showexponent:S.showexponent,title:{text:{valType:"string"},font:k({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:k({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},63964:function(ie){"use strict";ie.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},64013:function(ie,F,e){"use strict";var S=e(3400),k=e(31780),o=e(26332),T=e(25404),b=e(95936),p=e(42568),l=e(42996);ie.exports=function(t,i,r){var n=k.newContainer(i,"colorbar"),a=t.colorbar||{};function s(z,V){return S.coerce(a,n,l,z,V)}var c=r.margin||{t:0,b:0,l:0,r:0},h=r.width-c.l-c.r,u=r.height-c.t-c.b,y="v"===s("orientation"),d=s("thicknessmode");s("thickness","fraction"===d?30/(y?h:u):30);var m=s("lenmode");s("len","fraction"===m?1:y?u:h);var g,x,v,_="paper"===s("yref"),f="paper"===s("xref"),C="left";y?(v="middle",C=f?"left":"right",g=f?1.02:1,x=.5):(v=_?"bottom":"top",C="center",g=.5,x=_?1.02:1),S.coerce(a,n,{x:{valType:"number",min:f?-2:0,max:f?3:1,dflt:g}},"x"),S.coerce(a,n,{y:{valType:"number",min:_?-2:0,max:_?3:1,dflt:x}},"y"),s("xanchor",C),s("xpad"),s("yanchor",v),s("ypad"),S.noneOrAll(a,n,["x","y"]),s("outlinecolor"),s("outlinewidth"),s("bordercolor"),s("borderwidth"),s("bgcolor");var w=S.coerce(a,n,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:y?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");s("ticklabeloverflow",-1!==w.indexOf("inside")?"hide past domain":"hide past div"),o(a,n,s,"linear");var E=r.font,P={noAutotickangles:!0,outerTicks:!1,font:E};-1!==w.indexOf("inside")&&(P.bgColor="black"),p(a,n,s,"linear",P),b(a,n,s,"linear",P),T(a,n,s,"linear",P),s("title.text",r._dfltTitle.colorbar);var L=n.showticklabels?n.tickfont:E,O=S.extendFlat({},E,{family:L.family,size:S.bigFont(L.size)});S.coerceFont(s,"title.font",O),s("title.side",y?"top":"right")}},37848:function(ie,F,e){"use strict";var S=e(33428),k=e(49760),o=e(7316),T=e(24040),b=e(54460),p=e(86476),l=e(3400),t=l.strTranslate,i=e(92880).extendFlat,r=e(93972),n=e(43616),a=e(76308),s=e(81668),c=e(72736),h=e(94288).flipScale,u=e(28336),y=e(37668),d=e(94724),m=e(84284),g=m.LINE_SPACING,x=m.FROM_TL,v=m.FROM_BR,_=e(63964).cn;ie.exports={draw:function(f){var C=f._fullLayout._infolayer.selectAll("g."+_.colorbar).data(function(w){var E,P,L,O,z=w._fullLayout,V=w.calcdata,R=[];function U(oe){return i(oe,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function Z(){"function"==typeof O.calc?O.calc(w,L,E):(E._fillgradient=P.reversescale?h(P.colorscale):P.colorscale,E._zrange=[P[O.min],P[O.max]])}for(var N=0;N<V.length;N++)if((L=V[N][0].trace)._module){var W=L._module.colorbar;if(!0===L.visible&&W)for(var ae=Array.isArray(W),re=ae?W:[W],ne=0;ne<re.length;ne++){var Q=(O=re[ne]).container;(P=Q?L[Q]:L)&&P.showscale&&((E=U(P.colorbar))._id="cb"+L.uid+(ae&&Q?"-"+Q:""),E._traceIndex=L.index,E._propPrefix=(Q?Q+".":"")+"colorbar.",E._meta=L._meta,Z(),R.push(E))}}for(var $ in z._colorAxes)if((P=z[$]).showscale){var X=z._colorAxes[$];(E=U(P.colorbar))._id="cb"+$,E._propPrefix=$+".colorbar.",E._meta=z._meta,O={min:"cmin",max:"cmax"},"heatmap"!==X[0]&&(O.calc=(L=X[1])._module.colorbar.calc),Z(),R.push(E)}return R}(f),function(w){return w._id});C.enter().append("g").attr("class",function(w){return w._id}).classed(_.colorbar,!0),C.each(function(w){var E=S.select(this);l.ensureSingle(E,"rect",_.cbbg),l.ensureSingle(E,"g",_.cbfills),l.ensureSingle(E,"g",_.cblines),l.ensureSingle(E,"g",_.cbaxis,function(L){L.classed(_.crisp,!0)}),l.ensureSingle(E,"g",_.cbtitleunshift,function(L){L.append("g").classed(_.cbtitle,!0)}),l.ensureSingle(E,"rect",_.cboutline);var L,O,z,V,R,U,Z,N,P=function(L,O,z){var V="v"===O.orientation,R=O.len,U=O.lenmode,Z=O.thickness,N=O.thicknessmode,G=O.outlinewidth,W=O.borderwidth,ae=O.bgcolor,re=O.xanchor,ne=O.yanchor,Q=O.xpad,$=O.ypad,X=O.x,oe=V?O.y:1-O.y,fe="paper"===O.yref,ue="paper"===O.xref,ge=z._fullLayout,we=ge._size,Te=O._fillcolor,xe=O._line,ye=O.title,_e=ye.side,Ie=O._zrange||S.extent(("function"==typeof Te?Te:xe.color).domain()),De="function"==typeof xe.color?xe.color:function(){return xe.color},be="function"==typeof Te?Te:function(){return Te},he=O._levels,ce=function(We,et,gt){var ht,Ge,He=et._levels,ut=[],tt=[],xt=He.end+He.size/100,At=He.size,Mt=1.001*gt[0]-.001*gt[1],yt=1.001*gt[1]-.001*gt[0];for(Ge=0;Ge<1e5&&(ht=He.start+Ge*At,!(At>0?ht>=xt:ht<=xt));Ge++)ht>Mt&&ht<yt&&ut.push(ht);if(et._fillgradient)tt=[0];else if("function"==typeof et._fillcolor){var Pt=et._filllevels;if(Pt)for(xt=Pt.end+Pt.size/100,At=Pt.size,Ge=0;Ge<1e5&&(ht=Pt.start+Ge*At,!(At>0?ht>=xt:ht<=xt));Ge++)ht>gt[0]&&ht<gt[1]&&tt.push(ht);else(tt=ut.map(function(Ct){return Ct-He.size/2})).push(tt[tt.length-1]+He.size)}else et._fillcolor&&"string"==typeof et._fillcolor&&(tt=[0]);return He.size<0&&(ut.reverse(),tt.reverse()),{line:ut,fill:tt}}(0,O,Ie),me=ce.fill,Pe=ce.line,Ae=Math.round(Z*("fraction"===N?V?we.w:we.h:1)),Ce=Ae/(V?we.w:we.h),Oe=Math.round(R*("fraction"===U?V?we.h:we.w:1)),Ne=Oe/(V?we.h:we.w),je=ue?we.w:z._fullLayout.width,ve=fe?we.h:z._fullLayout.height,Me=Math.round(V?X*je+Q:oe*ve+$),Le={center:.5,right:1}[re]||0,Ue={top:1,middle:.5}[ne]||0,ze=V?X-Le*Ce:oe-Ue*Ce,qe=V?oe-Ue*Ne:X-Le*Ne,Ke=Math.round(V?ve*(1-qe):je*qe);O._lenFrac=Ne,O._thickFrac=Ce,O._uFrac=ze,O._vFrac=qe;var it=O._axis=function(We,et,gt){var ht=We._fullLayout,Ge="v"===et.orientation,He={type:"linear",range:gt,tickmode:et.tickmode,nticks:et.nticks,tick0:et.tick0,dtick:et.dtick,tickvals:et.tickvals,ticktext:et.ticktext,ticks:et.ticks,ticklen:et.ticklen,tickwidth:et.tickwidth,tickcolor:et.tickcolor,showticklabels:et.showticklabels,labelalias:et.labelalias,ticklabelposition:et.ticklabelposition,ticklabeloverflow:et.ticklabeloverflow,ticklabelstep:et.ticklabelstep,tickfont:et.tickfont,tickangle:et.tickangle,tickformat:et.tickformat,exponentformat:et.exponentformat,minexponent:et.minexponent,separatethousands:et.separatethousands,showexponent:et.showexponent,showtickprefix:et.showtickprefix,tickprefix:et.tickprefix,showticksuffix:et.showticksuffix,ticksuffix:et.ticksuffix,title:et.title,showline:!0,anchor:"free",side:Ge?"right":"bottom",position:1},ut=Ge?"y":"x",tt={type:"linear",_id:ut+et._id},xt={letter:ut,font:ht.font,noAutotickangles:"y"===ut,noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:ht.calendar};function At(Mt,yt){return l.coerce(He,tt,d,Mt,yt)}return u(He,tt,At,xt,ht),y(He,tt,At,xt),tt}(z,O,Ie);it.position=Ce+(V?X+Q/we.w:oe+$/we.h);var ft=-1!==["top","bottom"].indexOf(_e);if(V&&ft&&(it.title.side=_e,it.titlex=X+Q/we.w,it.titley=qe+("top"===ye.side?Ne-$/we.h:$/we.h)),V||ft||(it.title.side=_e,it.titley=oe+$/we.h,it.titlex=qe+Q/we.w),xe.color&&"auto"===O.tickmode){it.tickmode="linear",it.tick0=he.start;var dt=he.size,kt=l.constrain(Oe/50,4,15)+1,St=(Ie[1]-Ie[0])/((O.nticks||kt)*dt);if(St>1){var Tt=Math.pow(10,Math.floor(Math.log(St)/Math.LN10));dt*=Tt*l.roundUp(St/Tt,[2,5,10]),(Math.abs(he.start)/he.size+1e-6)%1<2e-6&&(it.tick0=0)}it.dtick=dt}it.domain=V?[qe+$/we.h,qe+Ne-$/we.h]:[qe+Q/we.w,qe+Ne-Q/we.w],it.setScale(),L.attr("transform",t(Math.round(we.l),Math.round(we.t)));var lt,ot=L.select("."+_.cbtitleunshift).attr("transform",t(-Math.round(we.l),-Math.round(we.t))),Rt=it.ticklabelposition,Vt=it.title.font.size,Ht=L.select("."+_.cbaxis),zt=0,Qe=0;function nt(We,et){var gt={propContainer:it,propName:O._propPrefix+"title",traceIndex:O._traceIndex,_meta:O._meta,placeholder:ge._dfltTitle.colorbar,containerGroup:L.select("."+_.cbtitle)},ht="h"===We.charAt(0)?We.substr(1):"h"+We;L.selectAll("."+ht+",."+ht+"-math-group").remove(),s.draw(z,We,i(gt,et||{}))}return l.syncOrAsync([o.previousPromises,function(){var We,et;(V&&ft||!V&&!ft)&&("top"===_e&&(We=Q+we.l+je*X,et=$+we.t+ve*(1-qe-Ne)+3+.75*Vt),"bottom"===_e&&(We=Q+we.l+je*X,et=$+we.t+ve*(1-qe)-3-.25*Vt),"right"===_e&&(et=$+we.t+ve*oe+3+.75*Vt,We=Q+we.l+je*qe),nt(it._id+"title",{attributes:{x:We,y:et,"text-anchor":V?"start":"middle"}}))},function(){if(!V&&!ft||V&&ft){var We,et=L.select("."+_.cbtitle),gt=et.select("text"),ht=[-G/2,G/2],Ge=et.select(".h"+it._id+"title-math-group").node(),He=15.6;if(gt.node()&&(He=parseInt(gt.node().style.fontSize,10)*g),Ge?(We=n.bBox(Ge),Qe=We.width,(zt=We.height)>He&&(ht[1]-=(zt-He)/2)):gt.node()&&!gt.classed(_.jsPlaceholder)&&(We=n.bBox(gt.node()),Qe=We.width,zt=We.height),V){if(zt){if(zt+=5,"top"===_e)it.domain[1]-=zt/we.h,ht[1]*=-1;else{it.domain[0]+=zt/we.h;var ut=c.lineCount(gt);ht[1]+=(1-ut)*He}et.attr("transform",t(ht[0],ht[1])),it.setScale()}}else Qe&&("right"===_e&&(it.domain[0]+=(Qe+Vt/2)/we.w),et.attr("transform",t(ht[0],ht[1])),it.setScale())}L.selectAll("."+_.cbfills+",."+_.cblines).attr("transform",V?t(0,Math.round(we.h*(1-it.domain[1]))):t(Math.round(we.w*it.domain[0]),0)),Ht.attr("transform",V?t(0,Math.round(-we.t)):t(Math.round(-we.l),0));var tt=L.select("."+_.cbfills).selectAll("rect."+_.cbfill).attr("style","").data(me);tt.enter().append("rect").classed(_.cbfill,!0).attr("style",""),tt.exit().remove();var xt=Ie.map(it.c2p).map(Math.round).sort(function(Ct,Dt){return Ct-Dt});tt.each(function(Ct,Dt){var Ut=[0===Dt?Ie[0]:(me[Dt]+me[Dt-1])/2,Dt===me.length-1?Ie[1]:(me[Dt]+me[Dt+1])/2].map(it.c2p).map(Math.round);V&&(Ut[1]=l.constrain(Ut[1]+(Ut[1]>Ut[0])?1:-1,xt[0],xt[1]));var Bt=S.select(this).attr(V?"x":"y",Me).attr(V?"y":"x",S.min(Ut)).attr(V?"width":"height",Math.max(Ae,2)).attr(V?"height":"width",Math.max(S.max(Ut)-S.min(Ut),2));if(O._fillgradient)n.gradient(Bt,z,O._id,V?"vertical":"horizontalreversed",O._fillgradient,"fill");else{var qt=be(Ct).replace("e-","");Bt.attr("fill",k(qt).toHexString())}});var At=L.select("."+_.cblines).selectAll("path."+_.cbline).data(xe.color&&xe.width?Pe:[]);At.enter().append("path").classed(_.cbline,!0),At.exit().remove(),At.each(function(Ct){var Dt=Me,Ut=Math.round(it.c2p(Ct))+xe.width/2%1;S.select(this).attr("d","M"+(V?Dt+","+Ut:Ut+","+Dt)+(V?"h":"v")+Ae).call(n.lineGroupStyle,xe.width,De(Ct),xe.dash)}),Ht.selectAll("g."+it._id+"tick,path").remove();var Mt=Me+Ae+(G||0)/2-("outside"===O.ticks?1:0),yt=b.calcTicks(it),Pt=b.getTickSigns(it)[2];return b.drawTicks(z,it,{vals:"inside"===it.ticks?b.clipEnds(it,yt):yt,layer:Ht,path:b.makeTickPath(it,Mt,Pt),transFn:b.makeTransTickFn(it)}),b.drawLabels(z,it,{vals:yt,layer:Ht,transFn:b.makeTransTickLabelFn(it),labelFns:b.makeLabelFns(it,Mt)})},function(){if(V&&!ft||!V&&ft){var We,et,gt=it.position||0,ht=it._offset+it._length/2;if("right"===_e)et=ht,We=we.l+je*gt+10+Vt*(it.showticklabels?1:.5);else if(We=ht,"bottom"===_e&&(et=we.t+ve*gt+10+(-1===Rt.indexOf("inside")?it.tickfont.size:0)+("intside"!==it.ticks&&O.ticklen||0)),"top"===_e){var Ge=ye.text.split("<br>").length;et=we.t+ve*gt+10-Ae-g*Vt*Ge}nt((V?"h":"v")+it._id+"title",{avoid:{selection:S.select(z).selectAll("g."+it._id+"tick"),side:_e,offsetTop:V?0:we.t,offsetLeft:V?we.l:0,maxShift:V?ge.width:ge.height},attributes:{x:We,y:et,"text-anchor":"middle"},transform:{rotate:V?-90:0,offset:0}})}},o.previousPromises,function(){var We,et=Ae+G/2;-1===Rt.indexOf("inside")&&(We=n.bBox(Ht.node()),et+=V?We.width:We.height),lt=ot.select("text");var gt=0,ht=V&&"top"===_e,Ge=!V&&"right"===_e,He=0;if(lt.node()&&!lt.classed(_.jsPlaceholder)){var ut,tt=ot.select(".h"+it._id+"title-math-group").node();tt&&(V&&ft||!V&&!ft)?(gt=(We=n.bBox(tt)).width,ut=We.height):(gt=(We=n.bBox(ot.node())).right-we.l-(V?Me:Ke),ut=We.bottom-we.t-(V?Ke:Me),V||"top"!==_e||(et+=We.height,He=We.height)),Ge&&(lt.attr("transform",t(gt/2+Vt/2,0)),gt*=2),et=Math.max(et,V?gt:ut)}var xt=2*(V?Q:$)+et+W+G/2,At=0;!V&&ye.text&&"bottom"===ne&&oe<=0&&(xt+=At=xt/2,He+=At),ge._hColorbarMoveTitle=At,ge._hColorbarMoveCBTitle=He;var Mt=W+G,yt=(V?Me:Ke)-Mt/2-(V?Q:0),Pt=(V?Ke:Me)-(V?Oe:$+He-At);L.select("."+_.cbbg).attr("x",yt).attr("y",Pt).attr(V?"width":"height",Math.max(xt-At,2)).attr(V?"height":"width",Math.max(Oe+Mt,2)).call(a.fill,ae).call(a.stroke,O.bordercolor).style("stroke-width",W);var Ct=Ge?Math.max(gt-10,0):0;L.selectAll("."+_.cboutline).attr("x",(V?Me:Ke+Q)+Ct).attr("y",(V?Ke+$-Oe:Me)+(ht?zt:0)).attr(V?"width":"height",Math.max(Ae,2)).attr(V?"height":"width",Math.max(Oe-(V?2*$+zt:2*Q+Ct),2)).call(a.stroke,O.outlinecolor).style({fill:"none","stroke-width":G});var Dt=V?Le*xt:0,Ut=V?0:(1-Ue)*xt-He;if(L.attr("transform",t(Dt=ue?we.l-Dt:-Dt,Ut=fe?we.t-Ut:-Ut)),!V&&(W||k(ae).getAlpha()&&!k.equals(ge.paper_bgcolor,ae))){var Bt=Ht.selectAll("text"),qt=Bt[0].length,an=L.select("."+_.cbbg).node(),mn=n.bBox(an),Qt=n.getTranslate(L);Bt.each(function(On,Dn){var Vn=qt-1;if(0===Dn||Dn===Vn){var Gn,Nn=n.bBox(this),ir=n.getTranslate(this);Dn===Vn?(Gn=mn.right+Qt.x+Ke-W-2+X-(Nn.right+ir.x))>0&&(Gn=0):0===Dn&&(Gn=mn.left+Qt.x+Ke+W+2-(Nn.left+ir.x))<0&&(Gn=0),Gn&&(qt<3?this.setAttribute("transform","translate("+Gn+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var sn={},Kt=x[re],qn=v[re],Fn=x[ne],Sn=v[ne],hn=xt-Ae;V?("pixels"===U?(sn.y=oe,sn.t=Oe*Fn,sn.b=Oe*Sn):(sn.t=sn.b=0,sn.yt=oe+R*Fn,sn.yb=oe-R*Sn),"pixels"===N?(sn.x=X,sn.l=xt*Kt,sn.r=xt*qn):(sn.l=hn*Kt,sn.r=hn*qn,sn.xl=X-Z*Kt,sn.xr=X+Z*qn)):("pixels"===U?(sn.x=X,sn.l=Oe*Kt,sn.r=Oe*qn):(sn.l=sn.r=0,sn.xl=X+R*Kt,sn.xr=X-R*qn),"pixels"===N?(sn.y=1-oe,sn.t=xt*Fn,sn.b=xt*Sn):(sn.t=hn*Fn,sn.b=hn*Sn,sn.yt=oe-Z*Fn,sn.yb=oe+Z*Sn));var wn=O.y<.5?"b":"t",pn=O.x<.5?"l":"r";z._fullLayout._reservedMargin[O._id]={};var An={r:ge.width-yt-Dt,l:yt+sn.r,b:ge.height-Pt-Ut,t:Pt+sn.b};ue&&fe?o.autoMargin(z,O._id,sn):ue?z._fullLayout._reservedMargin[O._id][wn]=An[wn]:fe||V?z._fullLayout._reservedMargin[O._id][pn]=An[pn]:z._fullLayout._reservedMargin[O._id][wn]=An[wn]}],z)}(E,w,f);P&&P.then&&(f._promises||[]).push(P),f._context.edits.colorbarPosition&&(Z="v"===(O=w).orientation,N=(z=f)._fullLayout._size,p.init({element:(L=E).node(),gd:z,prepFn:function(){V=L.attr("transform"),r(L)},moveFn:function(G,W){L.attr("transform",V+t(G,W)),R=p.align((Z?O._uFrac:O._vFrac)+G/N.w,Z?O._thickFrac:O._lenFrac,0,1,O.xanchor),U=p.align((Z?O._vFrac:1-O._uFrac)-W/N.h,Z?O._lenFrac:O._thickFrac,0,1,O.yanchor);var ae=p.getCursor(R,U,O.xanchor,O.yanchor);r(L,ae)},doneFn:function(){if(r(L),void 0!==R&&void 0!==U){var G={};G[O._propPrefix+"x"]=R,G[O._propPrefix+"y"]=U,void 0!==O._traceIndex?T.call("_guiRestyle",z,G,O._traceIndex):T.call("_guiRelayout",z,G)}}}))}),C.exit().each(function(w){o.autoMargin(f,w._id)}).remove(),C.order()}}},90553:function(ie,F,e){"use strict";var S=e(3400);ie.exports=function(k){return S.isPlainObject(k.colorbar)}},55080:function(ie,F,e){"use strict";ie.exports={moduleType:"component",name:"colorbar",attributes:e(42996),supplyDefaults:e(64013),draw:e(37848).draw,hasColorbar:e(90553)}},49084:function(ie,F,e){"use strict";var S=e(42996),k=e(53756).counter,o=e(95376),T=e(88304).scales;function b(p){return"`"+p+"`"}o(T),ie.exports=function(p,l){p=p||"";var t,i=(l=l||{}).cLetter||"c",r="noScale"in l?l.noScale:"marker.line"===p,n="showScaleDflt"in l?l.showScaleDflt:"z"===i,a="string"==typeof l.colorscaleDflt?T[l.colorscaleDflt]:null,s=l.editTypeOverride||"",c=p?p+".":"";"colorAttr"in l?t=l.colorAttr:b(c+(t={z:"z",c:"color"}[i]));var h=i+"auto",u=i+"min",y=i+"max",d=i+"mid",m=(b(c+h),b(c+u),b(c+y),{});m[u]=m[y]=void 0;var g={};g[h]=!1;var x={};return"color"===t&&(x.color={valType:"color",arrayOk:!0,editType:s||"style"},l.anim&&(x.color.anim=!0)),x[h]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:m},x[u]={valType:"number",dflt:null,editType:s||"plot",impliedEdits:g},x[y]={valType:"number",dflt:null,editType:s||"plot",impliedEdits:g},x[d]={valType:"number",dflt:null,editType:"calc",impliedEdits:m},x.colorscale={valType:"colorscale",editType:"calc",dflt:a,impliedEdits:{autocolorscale:!1}},x.autocolorscale={valType:"boolean",dflt:!1!==l.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},x.reversescale={valType:"boolean",dflt:!1,editType:"plot"},r||(x.showscale={valType:"boolean",dflt:n,editType:"calc"},x.colorbar=S),l.noColorAxis||(x.coloraxis={valType:"subplotid",regex:k("coloraxis"),dflt:null,editType:"calc"}),x}},47128:function(ie,F,e){"use strict";var S=e(38248),k=e(3400),o=e(94288).extractOpts;ie.exports=function(T,b,p){var t=T._fullLayout,i=p.vals,r=p.containerStr,n=r?k.nestedProperty(b,r).get():b,a=o(n),s=!1!==a.auto,c=a.min,h=a.max,u=a.mid,y=function(){return k.aggNums(Math.min,null,i)},d=function(){return k.aggNums(Math.max,null,i)};void 0===c?c=y():s&&(c=n._colorAx&&S(c)?Math.min(c,y()):y()),void 0===h?h=d():s&&(h=n._colorAx&&S(h)?Math.max(h,d()):d()),s&&void 0!==u&&(h-u>u-c?c=u-(h-u):h-u<u-c&&(h=u+(u-c))),c===h&&(c-=.5,h+=.5),a._sync("min",c),a._sync("max",h),a.autocolorscale&&a._sync("colorscale",c*h<0?t.colorscale.diverging:c>=0?t.colorscale.sequential:t.colorscale.sequentialminus)}},95504:function(ie,F,e){"use strict";var S=e(3400),k=e(94288).hasColorscale,o=e(94288).extractOpts;ie.exports=function(T,b){function p(s,c){var h=s["_"+c];void 0!==h&&(s[c]=h)}function l(s,c){var h=c.container?S.nestedProperty(s,c.container).get():s;if(h)if(h.coloraxis)h._colorAx=b[h.coloraxis];else{var u=o(h),y=u.auto;(y||void 0===u.min)&&p(h,c.min),(y||void 0===u.max)&&p(h,c.max),u.autocolorscale&&p(h,"colorscale")}}for(var t=0;t<T.length;t++){var i=T[t],r=i._module.colorbar;if(r)if(Array.isArray(r))for(var n=0;n<r.length;n++)l(i,r[n]);else l(i,r);k(i,"marker.line")&&l(i,{container:"marker.line",min:"cmin",max:"cmax"})}for(var a in b._colorAxes)l(b[a],{min:"cmin",max:"cmax"})}},27260:function(ie,F,e){"use strict";var S=e(38248),k=e(3400),o=e(90553),T=e(64013),b=e(88304).isValid,p=e(24040).traceIs;function l(t,i){var r=i.slice(0,i.length-1);return i?k.nestedProperty(t,r).get()||{}:t}ie.exports=function t(i,r,n,a,s){var c=s.prefix,h=s.cLetter,u="_module"in r,y=l(i,c),d=l(r,c),m=l(r._template||{},c)||{},g=function(){return delete i.coloraxis,delete r.coloraxis,t(i,r,n,a,s)};if(u){var x=n._colorAxes||{},v=a(c+"coloraxis");if(v){var _=p(r,"contour")&&k.nestedProperty(r,"contours.coloring").get()||"heatmap",f=x[v];return void(f?(f[2].push(g),f[0]!==_&&(f[0]=!1,k.warn(["Ignoring coloraxis:",v,"setting","as it is linked to incompatible colorscales."].join(" ")))):x[v]=[_,r,[g]])}}var C=y[h+"min"],w=y[h+"max"],E=S(C)&&S(w)&&C<w;a(c+h+"auto",!E)?a(c+h+"mid"):(a(c+h+"min"),a(c+h+"max"));var P,L,O=y.colorscale,z=m.colorscale;void 0!==O&&(P=!b(O)),void 0!==z&&(P=!b(z)),a(c+"autocolorscale",P),a(c+"colorscale"),a(c+"reversescale"),"marker.line."!==c&&(c&&u&&(L=o(y)),a(c+"showscale",L)&&(c&&m&&(d._template=m),T(y,d,n)))}},94288:function(ie,F,e){"use strict";var S=e(33428),k=e(49760),o=e(38248),T=e(3400),b=e(76308),p=e(88304).isValid,l=["showscale","autocolorscale","colorscale","reversescale","colorbar"],t=["min","max","mid","auto"];function i(c){var h,u,y,d=c._colorAx,m=d||c,g={};for(u=0;u<l.length;u++)g[y=l[u]]=m[y];if(d)for(h="c",u=0;u<t.length;u++)g[y=t[u]]=m["c"+y];else{var x;for(u=0;u<t.length;u++)((x="c"+(y=t[u]))in m||(x="z"+y)in m)&&(g[y]=m[x]);h=x.charAt(0)}return g._sync=function(v,_){var f=-1!==t.indexOf(v)?h+v:v;m[f]=m["_"+f]=_},g}function r(c){for(var h=i(c),u=h.min,y=h.max,d=h.reversescale?n(h.colorscale):h.colorscale,m=d.length,g=new Array(m),x=new Array(m),v=0;v<m;v++){var _=d[v];g[v]=u+_[0]*(y-u),x[v]=_[1]}return{domain:g,range:x}}function n(c){for(var h=c.length,u=new Array(h),y=h-1,d=0;y>=0;y--,d++){var m=c[y];u[d]=[1-m[0],m[1]]}return u}function a(c,h){h=h||{};for(var u=c.domain,y=c.range,d=y.length,m=new Array(d),g=0;g<d;g++){var x=k(y[g]).toRgb();m[g]=[x.r,x.g,x.b,x.a]}var v,_=S.scale.linear().domain(u).range(m).clamp(!0),f=h.noNumericCheck,C=h.returnArray;return(v=f&&C?_:f?function(w){return s(_(w))}:C?function(w){return o(w)?_(w):k(w).isValid()?w:b.defaultLine}:function(w){return o(w)?s(_(w)):k(w).isValid()?w:b.defaultLine}).domain=_.domain,v.range=function(){return y},v}function s(c){return k({r:c[0],g:c[1],b:c[2],a:c[3]}).toRgbString()}ie.exports={hasColorscale:function(c,h,u){var y=h?T.nestedProperty(c,h).get()||{}:c,d=y[u||"color"];d&&d._inputArray&&(d=d._inputArray);var m=!1;if(T.isArrayOrTypedArray(d))for(var g=0;g<d.length;g++)if(o(d[g])){m=!0;break}return T.isPlainObject(y)&&(m||!0===y.showscale||o(y.cmin)&&o(y.cmax)||p(y.colorscale)||T.isPlainObject(y.colorbar))},extractOpts:i,extractScale:r,flipScale:n,makeColorScaleFunc:a,makeColorScaleFuncFromTrace:function(c,h){return a(r(c),h)}}},8932:function(ie,F,e){"use strict";var S=e(88304),k=e(94288);ie.exports={moduleType:"component",name:"colorscale",attributes:e(49084),layoutAttributes:e(92332),supplyLayoutDefaults:e(51608),handleDefaults:e(27260),crossTraceDefaults:e(95504),calc:e(47128),scales:S.scales,defaultScale:S.defaultScale,getScale:S.get,isValidScale:S.isValid,hasColorscale:k.hasColorscale,extractOpts:k.extractOpts,extractScale:k.extractScale,flipScale:k.flipScale,makeColorScaleFunc:k.makeColorScaleFunc,makeColorScaleFuncFromTrace:k.makeColorScaleFuncFromTrace}},92332:function(ie,F,e){"use strict";var S=e(92880).extendFlat,k=e(49084),o=e(88304).scales;ie.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:o.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:o.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:o.RdBu,editType:"calc"}},coloraxis:S({_isSubplotObj:!0,editType:"calc"},k("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},51608:function(ie,F,e){"use strict";var S=e(3400),k=e(31780),o=e(92332),T=e(27260);ie.exports=function(b,p){function l(h,u){return S.coerce(b,p,o,h,u)}l("colorscale.sequential"),l("colorscale.sequentialminus"),l("colorscale.diverging");var t,i,r=p._colorAxes;function n(h,u){return S.coerce(t,i,o.coloraxis,h,u)}for(var a in r){var s=r[a];if(s[0])t=b[a]||{},(i=k.newContainer(p,a,"coloraxis"))._name=a,T(t,i,p,n,{prefix:"",cLetter:"c"});else{for(var c=0;c<s[2].length;c++)s[2][c]();delete p._colorAxes[a]}}}},88304:function(ie,F,e){"use strict";var S=e(49760),k={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},o=k.RdBu;function T(b){var p=0;if(!Array.isArray(b)||b.length<2||!b[0]||!b[b.length-1]||0!=+b[0][0]||1!=+b[b.length-1][0])return!1;for(var l=0;l<b.length;l++){var t=b[l];if(2!==t.length||+t[0]<p||!S(t[1]).isValid())return!1;p=+t[0]}return!0}ie.exports={scales:k,defaultScale:o,get:function(b,p){if(p||(p=o),!b)return p;function l(){try{b=k[b]||JSON.parse(b)}catch{b=p}}return"string"==typeof b&&(l(),"string"==typeof b&&l()),T(b)?b:p},isValid:function(b){return void 0!==k[b]||T(b)}}},78316:function(ie){"use strict";ie.exports=function(F,e,S,k,o){var T=(F-S)/(k-S),b=T+e/(k-S),p=(T+b)/2;return"left"===o||"bottom"===o?T:"center"===o||"middle"===o?p:"right"===o||"top"===o?b:T<.6666666666666666-p?T:b>1.3333333333333333-p?b:p}},67416:function(ie,F,e){"use strict";var S=e(3400),k=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];ie.exports=function(o,T,b,p){return o="left"===b?0:"center"===b?1:"right"===b?2:S.constrain(Math.floor(3*o),0,2),T="bottom"===p?0:"middle"===p?1:"top"===p?2:S.constrain(Math.floor(3*T),0,2),k[T][o]}},72760:function(ie,F){"use strict";F.selectMode=function(e){return"lasso"===e||"select"===e},F.drawMode=function(e){return"drawclosedpath"===e||"drawopenpath"===e||"drawline"===e||"drawrect"===e||"drawcircle"===e},F.openMode=function(e){return"drawline"===e||"drawopenpath"===e},F.rectMode=function(e){return"select"===e||"drawline"===e||"drawrect"===e||"drawcircle"===e},F.freeMode=function(e){return"lasso"===e||"drawclosedpath"===e||"drawopenpath"===e},F.selectingOrDrawing=function(e){return F.freeMode(e)||F.rectMode(e)}},86476:function(ie,F,e){"use strict";var S=e(29128),k=e(52264),o=e(89184),T=e(3400).removeElement,b=e(33816),p=ie.exports={};p.align=e(78316),p.getCursor=e(67416);var l=e(2616);function t(){var r=document.createElement("div");r.className="dragcover";var n=r.style;return n.position="fixed",n.left=0,n.right=0,n.top=0,n.bottom=0,n.zIndex=999999999,n.background="none",document.body.appendChild(r),r}function i(r){return S(r.changedTouches?r.changedTouches[0]:r,document.body)}p.unhover=l.wrapped,p.unhoverRaw=l.raw,p.init=function(r){var n,a,s,c,h,u,y,d,m=r.gd,g=1,x=m._context.doubleClickDelay,v=r.element;m._mouseDownTime||(m._mouseDownTime=0),v.style.pointerEvents="all",v.onmousedown=f,o?(v._ontouchstart&&v.removeEventListener("touchstart",v._ontouchstart),v._ontouchstart=f,v.addEventListener("touchstart",f,{passive:!1})):v.ontouchstart=f;var _=r.clampFn||function(E,P,L){return Math.abs(E)<L&&(E=0),Math.abs(P)<L&&(P=0),[E,P]};function f(E){m._dragged=!1,m._dragging=!0;var P=i(E);n=P[0],a=P[1],y=E.target,u=E,d=2===E.buttons||E.ctrlKey,void 0===E.clientX&&void 0===E.clientY&&(E.clientX=n,E.clientY=a),(s=(new Date).getTime())-m._mouseDownTime<x?g+=1:(g=1,m._mouseDownTime=s),r.prepFn&&r.prepFn(E,n,a),k&&!d?(h=t()).style.cursor=window.getComputedStyle(v).cursor:k||(h=document,c=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(v).cursor),document.addEventListener("mouseup",w),document.addEventListener("touchend",w),!1!==r.dragmode&&(E.preventDefault(),document.addEventListener("mousemove",C),document.addEventListener("touchmove",C,{passive:!1}))}function C(E){E.preventDefault();var P=i(E),O=_(P[0]-n,P[1]-a,r.minDrag||b.MINDRAG),z=O[0],V=O[1];(z||V)&&(m._dragged=!0,p.unhover(m,E)),m._dragged&&r.moveFn&&!d&&(m._dragdata={element:v,dx:z,dy:V},r.moveFn(z,V))}function w(E){if(delete m._dragdata,!1!==r.dragmode&&(E.preventDefault(),document.removeEventListener("mousemove",C),document.removeEventListener("touchmove",C)),document.removeEventListener("mouseup",w),document.removeEventListener("touchend",w),k?T(h):c&&(h.documentElement.style.cursor=c,c=null),m._dragging){if(m._dragging=!1,(new Date).getTime()-m._mouseDownTime>x&&(g=Math.max(g-1,1)),m._dragged)r.doneFn&&r.doneFn();else if(r.clickFn&&r.clickFn(g,u),!d){var P;try{P=new MouseEvent("click",E)}catch{var L=i(E);(P=document.createEvent("MouseEvents")).initMouseEvent("click",E.bubbles,E.cancelable,E.view,E.detail,E.screenX,E.screenY,L[0],L[1],E.ctrlKey,E.altKey,E.shiftKey,E.metaKey,E.button,E.relatedTarget)}y.dispatchEvent(P)}m._dragging=!1,m._dragged=!1}else m._dragged=!1}},p.coverSlip=t},2616:function(ie,F,e){"use strict";var S=e(95924),k=e(91200),o=e(52200).getGraphDiv,T=e(92456),b=ie.exports={};b.wrapped=function(p,l,t){(p=o(p))._fullLayout&&k.clear(p._fullLayout._uid+T.HOVERID),b.raw(p,l,t)},b.raw=function(p,l){var t=p._fullLayout,i=p._hoverdata;l||(l={}),l.target&&!p._dragged&&!1===S.triggerHandler(p,"plotly_beforehover",l)||(t._hoverlayer.selectAll("g").remove(),t._hoverlayer.selectAll("line").remove(),t._hoverlayer.selectAll("circle").remove(),p._hoverdata=void 0,l.target&&i&&p.emit("plotly_unhover",{event:l,points:i}))}},98192:function(ie,F){"use strict";F.u={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},F.c={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},43616:function(ie,F,e){"use strict";var S=e(33428),k=e(3400),o=k.numberFormat,T=e(38248),b=e(49760),p=e(24040),l=e(76308),t=e(8932),i=k.strTranslate,r=e(72736),n=e(9616),a=e(84284).LINE_SPACING,s=e(13448).DESELECTDIM,c=e(43028),h=e(7152),u=e(10624).appendArrayPointValue,y=ie.exports={};function d(be){return"none"===be?void 0:be}y.font=function(be,he){var ce=he.variant,me=he.style,Pe=he.weight,Ae=he.color,Ce=he.size,Oe=he.family,Ne=he.shadow,je=he.lineposition,ve=he.textcase;Oe&&be.style("font-family",Oe),Ce+1&&be.style("font-size",Ce+"px"),Ae&&be.call(l.fill,Ae),Pe&&be.style("font-weight",Pe),me&&be.style("font-style",me),ce&&be.style("font-variant",ce),ve&&be.style("text-transform",d(m[ve])),Ne&&be.style("text-shadow","auto"===Ne?r.makeTextShadow(l.contrast(Ae)):d(Ne)),je&&be.style("text-decoration-line",d(je.replace("under","underline").replace("over","overline").replace("through","line-through").split("+").join(" ")))};var m={normal:"none",lower:"lowercase",upper:"uppercase","word caps":"capitalize"};function g(be,he,ce,me){var Pe=he.fillpattern,Ae=he.fillgradient,Ce=Pe&&y.getPatternAttr(Pe.shape,0,"");if(Ce){var Oe=y.getPatternAttr(Pe.bgcolor,0,null),Ne=y.getPatternAttr(Pe.fgcolor,0,null),je=Pe.fgopacity,ve=y.getPatternAttr(Pe.size,0,8),Me=y.getPatternAttr(Pe.solidity,0,.3);y.pattern(be,"point",ce,he.uid,Ce,ve,Me,void 0,Pe.fillmode,Oe,Ne,je)}else if(Ae&&"none"!==Ae.type){var Ue,ze,qe=Ae.type,Ke="scatterfill-"+he.uid;me&&(Ke="legendfill-"+he.uid),me||void 0===Ae.start&&void 0===Ae.stop?("horizontal"===qe&&(qe+="reversed"),be.call(y.gradient,ce,Ke,qe,Ae.colorscale,"fill")):("horizontal"===qe?(Ue={x:Ae.start,y:0},ze={x:Ae.stop,y:0}):"vertical"===qe&&(Ue={x:0,y:Ae.start},ze={x:0,y:Ae.stop}),Ue.x=he._xA.c2p(void 0===Ue.x?he._extremes.x.min[0].val:Ue.x,!0),Ue.y=he._yA.c2p(void 0===Ue.y?he._extremes.y.min[0].val:Ue.y,!0),ze.x=he._xA.c2p(void 0===ze.x?he._extremes.x.max[0].val:ze.x,!0),ze.y=he._yA.c2p(void 0===ze.y?he._extremes.y.max[0].val:ze.y,!0),be.call(w,ce,Ke,"linear",Ae.colorscale,"fill",Ue,ze,!0,!1))}else he.fillcolor&&be.call(l.fill,he.fillcolor)}y.setPosition=function(be,he,ce){be.attr("x",he).attr("y",ce)},y.setSize=function(be,he,ce){be.attr("width",he).attr("height",ce)},y.setRect=function(be,he,ce,me,Pe){be.call(y.setPosition,he,ce).call(y.setSize,me,Pe)},y.translatePoint=function(be,he,ce,me){var Pe=ce.c2p(be.x),Ae=me.c2p(be.y);return!!(T(Pe)&&T(Ae)&&he.node())&&("text"===he.node().nodeName?he.attr("x",Pe).attr("y",Ae):he.attr("transform",i(Pe,Ae)),!0)},y.translatePoints=function(be,he,ce){be.each(function(me){var Pe=S.select(this);y.translatePoint(me,Pe,he,ce)})},y.hideOutsideRangePoint=function(be,he,ce,me,Pe,Ae){he.attr("display",ce.isPtWithinRange(be,Pe)&&me.isPtWithinRange(be,Ae)?null:"none")},y.hideOutsideRangePoints=function(be,he){if(he._hasClipOnAxisFalse){var ce=he.xaxis,me=he.yaxis;be.each(function(Pe){var Ae=Pe[0].trace,Ce=Ae.xcalendar,Oe=Ae.ycalendar,Ne=p.traceIs(Ae,"bar-like")?".bartext":".point,.textpoint";be.selectAll(Ne).each(function(je){y.hideOutsideRangePoint(je,S.select(this),ce,me,Ce,Oe)})})}},y.crispRound=function(be,he,ce){return he&&T(he)?be._context.staticPlot?he:he<1?1:Math.round(he):ce||0},y.singleLineStyle=function(be,he,ce,me,Pe){he.style("fill","none");var Ae=(((be||[])[0]||{}).trace||{}).line||{},Ce=ce||Ae.width||0,Oe=Pe||Ae.dash||"";l.stroke(he,me||Ae.color),y.dashLine(he,Oe,Ce)},y.lineGroupStyle=function(be,he,ce,me){be.style("fill","none").each(function(Pe){var Ae=(((Pe||[])[0]||{}).trace||{}).line||{},Ce=he||Ae.width||0,Oe=me||Ae.dash||"";S.select(this).call(l.stroke,ce||Ae.color).call(y.dashLine,Oe,Ce)})},y.dashLine=function(be,he,ce){he=y.dashStyle(he,ce=+ce||0),be.style({"stroke-dasharray":he,"stroke-width":ce+"px"})},y.dashStyle=function(be,he){he=+he||1;var ce=Math.max(he,3);return"solid"===be?be="":"dot"===be?be=ce+"px,"+ce+"px":"dash"===be?be=3*ce+"px,"+3*ce+"px":"longdash"===be?be=5*ce+"px,"+5*ce+"px":"dashdot"===be?be=3*ce+"px,"+ce+"px,"+ce+"px,"+ce+"px":"longdashdot"===be&&(be=5*ce+"px,"+2*ce+"px,"+ce+"px,"+2*ce+"px"),be},y.singleFillStyle=function(be,he){var ce=S.select(be.node());g(be,((ce.data()[0]||[])[0]||{}).trace||{},he,!1)},y.fillGroupStyle=function(be,he,ce){be.style("stroke-width",0).each(function(me){var Pe=S.select(this);me[0].trace&&g(Pe,me[0].trace,he,ce)})};var x=e(71984);y.symbolNames=[],y.symbolFuncs=[],y.symbolBackOffs=[],y.symbolNeedLines={},y.symbolNoDot={},y.symbolNoFill={},y.symbolList=[],Object.keys(x).forEach(function(be){var he=x[be],ce=he.n;y.symbolList.push(ce,String(ce),be,ce+100,String(ce+100),be+"-open"),y.symbolNames[ce]=be,y.symbolFuncs[ce]=he.f,y.symbolBackOffs[ce]=he.backoff||0,he.needLine&&(y.symbolNeedLines[ce]=!0),he.noDot?y.symbolNoDot[ce]=!0:y.symbolList.push(ce+200,String(ce+200),be+"-dot",ce+300,String(ce+300),be+"-open-dot"),he.noFill&&(y.symbolNoFill[ce]=!0)});var v=y.symbolNames.length;function _(be,he,ce,me){return y.symbolFuncs[be%100](he,ce,me)+(be>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}y.symbolNumber=function(be){if(T(be))be=+be;else if("string"==typeof be){var he=0;be.indexOf("-open")>0&&(he=100,be=be.replace("-open","")),be.indexOf("-dot")>0&&(he+=200,be=be.replace("-dot","")),(be=y.symbolNames.indexOf(be))>=0&&(be+=he)}return be%100>=v||be>=400?0:Math.floor(Math.max(be,0))};var f=o("~f"),C={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};function w(be,he,ce,me,Pe,Ae,Ce,Oe,Ne,je){var ve,Me=Pe.length;"linear"===me?ve={node:"linearGradient",attrs:{x1:Ce.x,y1:Ce.y,x2:Oe.x,y2:Oe.y,gradientUnits:Ne?"userSpaceOnUse":"objectBoundingBox"},reversed:je}:"radial"===me&&(ve={node:"radialGradient",reversed:je});for(var Le=new Array(Me),Ue=0;Ue<Me;Ue++)ve.reversed?Le[Me-1-Ue]=[f(100*(1-Pe[Ue][0])),Pe[Ue][1]]:Le[Ue]=[f(100*Pe[Ue][0]),Pe[Ue][1]];var ze=he._fullLayout,qe="g"+ze._uid+"-"+ce,Ke=ze._defs.select(".gradients").selectAll("#"+qe).data([me+Le.join(";")],k.identity);Ke.exit().remove(),Ke.enter().append(ve.node).each(function(){var it=S.select(this);ve.attrs&&it.attr(ve.attrs),it.attr("id",qe);var ft=it.selectAll("stop").data(Le);ft.exit().remove(),ft.enter().append("stop"),ft.each(function(dt){var kt=b(dt[1]);S.select(this).attr({offset:dt[0]+"%","stop-color":l.tinyRGB(kt),"stop-opacity":kt.getAlpha()})})}),be.style(Ae,ne(qe,he)).style(Ae+"-opacity",null),be.classed("gradient_filled",!0)}y.gradient=function(be,he,ce,me,Pe,Ae){var Ce=C[me];return w(be,he,ce,Ce.type,Pe,Ae,Ce.start,Ce.stop,!1,Ce.reversed)},y.pattern=function(be,he,ce,me,Pe,Ae,Ce,Oe,Ne,je,ve,Me){var Le="legend"===he;Oe&&("overlay"===Ne?ve=l.contrast(je=Oe):(je=void 0,ve=Oe));var Ue,ze,qe,Ke,it,ft,dt,kt,St,Tt=ce._fullLayout,lt="p"+Tt._uid+"-"+me,ot={},Rt=b(ve),Vt=l.tinyRGB(Rt),Ht=Me*Rt.getAlpha();switch(Pe){case"/":Ue=Ae*Math.sqrt(2),ze=Ae*Math.sqrt(2),ft="path",ot={d:qe="M-"+Ue/4+","+ze/4+"l"+Ue/2+",-"+ze/2+"M0,"+ze+"L"+Ue+",0M"+Ue/4*3+","+ze/4*5+"l"+Ue/2+",-"+ze/2,opacity:Ht,stroke:Vt,"stroke-width":(Ke=Ce*Ae)+"px"};break;case"\\":Ue=Ae*Math.sqrt(2),ze=Ae*Math.sqrt(2),ft="path",ot={d:qe="M"+Ue/4*3+",-"+ze/4+"l"+Ue/2+","+ze/2+"M0,0L"+Ue+","+ze+"M-"+Ue/4+","+ze/4*3+"l"+Ue/2+","+ze/2,opacity:Ht,stroke:Vt,"stroke-width":(Ke=Ce*Ae)+"px"};break;case"x":Ue=Ae*Math.sqrt(2),ze=Ae*Math.sqrt(2),qe="M-"+Ue/4+","+ze/4+"l"+Ue/2+",-"+ze/2+"M0,"+ze+"L"+Ue+",0M"+Ue/4*3+","+ze/4*5+"l"+Ue/2+",-"+ze/2+"M"+Ue/4*3+",-"+ze/4+"l"+Ue/2+","+ze/2+"M0,0L"+Ue+","+ze+"M-"+Ue/4+","+ze/4*3+"l"+Ue/2+","+ze/2,Ke=Ae-Ae*Math.sqrt(1-Ce),ft="path",ot={d:qe,opacity:Ht,stroke:Vt,"stroke-width":Ke+"px"};break;case"|":ft="path",ft="path",ot={d:qe="M"+(Ue=Ae)/2+",0L"+Ue/2+","+(ze=Ae),opacity:Ht,stroke:Vt,"stroke-width":(Ke=Ce*Ae)+"px"};break;case"-":ft="path",ft="path",ot={d:qe="M0,"+(ze=Ae)/2+"L"+(Ue=Ae)+","+ze/2,opacity:Ht,stroke:Vt,"stroke-width":(Ke=Ce*Ae)+"px"};break;case"+":ft="path",qe="M"+(Ue=Ae)/2+",0L"+Ue/2+","+(ze=Ae)+"M0,"+ze/2+"L"+Ue+","+ze/2,Ke=Ae-Ae*Math.sqrt(1-Ce),ft="path",ot={d:qe,opacity:Ht,stroke:Vt,"stroke-width":Ke+"px"};break;case".":Ue=Ae,ze=Ae,Ce<Math.PI/4?it=Math.sqrt(Ce*Ae*Ae/Math.PI):(dt=Ce,kt=Math.PI/4,it=(St=Ae/2)+(Ae/Math.sqrt(2)-St)*(dt-kt)/(1-kt)),ft="circle",ot={cx:Ue/2,cy:ze/2,r:it,opacity:Ht,fill:Vt}}var zt=[Pe||"noSh",je||"noBg",ve||"noFg",Ae,Ce].join(";"),Qe=Tt._defs.select(".patterns").selectAll("#"+lt).data([zt],k.identity);Qe.exit().remove(),Qe.enter().append("pattern").each(function(){var nt=S.select(this);if(nt.attr({id:lt,width:Ue+"px",height:ze+"px",patternUnits:"userSpaceOnUse",patternTransform:Le?"scale(0.8)":""}),je){var We=b(je),et=l.tinyRGB(We),gt=We.getAlpha(),ht=nt.selectAll("rect").data([0]);ht.exit().remove(),ht.enter().append("rect").attr({width:Ue+"px",height:ze+"px",fill:et,"fill-opacity":gt})}var Ge=nt.selectAll(ft).data([0]);Ge.exit().remove(),Ge.enter().append(ft).attr(ot)}),be.style("fill",ne(lt,ce)).style("fill-opacity",null),be.classed("pattern_filled",!0)},y.initGradients=function(be){k.ensureSingle(be._fullLayout._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),S.select(be).selectAll(".gradient_filled").classed("gradient_filled",!1)},y.initPatterns=function(be){k.ensureSingle(be._fullLayout._defs,"g","patterns").selectAll("pattern").remove(),S.select(be).selectAll(".pattern_filled").classed("pattern_filled",!1)},y.getPatternAttr=function(be,he,ce){return be&&k.isArrayOrTypedArray(be)?he<be.length?be[he]:ce:be},y.pointStyle=function(be,he,ce,me){if(be.size()){var Pe=y.makePointStyleFns(he);be.each(function(Ae){y.singlePointStyle(Ae,S.select(this),he,Pe,ce,me)})}},y.singlePointStyle=function(be,he,ce,me,Pe,Ae){var Ce=ce.marker,Oe=Ce.line;if(Ae&&Ae.i>=0&&void 0===be.i&&(be.i=Ae.i),he.style("opacity",me.selectedOpacityFn?me.selectedOpacityFn(be):void 0===be.mo?Ce.opacity:be.mo),me.ms2mrc){var Ne;Ne="various"===be.ms||"various"===Ce.size?3:me.ms2mrc(be.ms),be.mrc=Ne,me.selectedSizeFn&&(Ne=be.mrc=me.selectedSizeFn(be));var je=y.symbolNumber(be.mx||Ce.symbol)||0;be.om=je%200>=100;var ve=De(be,ce),Me=X(be,ce);he.attr("d",_(je,Ne,ve,Me))}var Le,Ue,ze,qe=!1;if(be.so?(ze=Oe.outlierwidth,Ue=Oe.outliercolor,Le=Ce.outliercolor):(ze=(be.mlw+1||(Oe||{}).width+1||(be.trace?(be.trace.marker.line||{}).width:0)+1)-1||0,Ue="mlc"in be?be.mlcc=me.lineScale(be.mlc):k.isArrayOrTypedArray(Oe.color)?l.defaultLine:Oe.color,k.isArrayOrTypedArray(Ce.color)&&(Le=l.defaultLine,qe=!0),Le="mc"in be?be.mcc=me.markerScale(be.mc):Ce.color||Ce.colors||"rgba(0,0,0,0)",me.selectedColorFn&&(Le=me.selectedColorFn(be))),be.om)he.call(l.stroke,Le).style({"stroke-width":(ze||1)+"px",fill:"none"});else{he.style("stroke-width",(be.isBlank?0:ze)+"px");var it=Ce.gradient,ft=be.mgt;ft?qe=!0:ft=it&&it.type,k.isArrayOrTypedArray(ft)&&(C[ft=ft[0]]||(ft=0));var dt=Ce.pattern,kt=dt&&y.getPatternAttr(dt.shape,be.i,"");if(ft&&"none"!==ft){var St=be.mgc;St?qe=!0:St=it.color;var Tt=ce.uid;qe&&(Tt+="-"+be.i),y.gradient(he,Pe,Tt,ft,[[0,St],[1,Le]],"fill")}else if(kt){var lt=!1,ot=dt.fgcolor;!ot&&Ae&&Ae.color&&(ot=Ae.color,lt=!0);var Rt=y.getPatternAttr(ot,be.i,Ae&&Ae.color||null),Vt=y.getPatternAttr(dt.bgcolor,be.i,null),Ht=dt.fgopacity,zt=y.getPatternAttr(dt.size,be.i,8),Qe=y.getPatternAttr(dt.solidity,be.i,.3);lt=lt||be.mcc||k.isArrayOrTypedArray(dt.shape)||k.isArrayOrTypedArray(dt.bgcolor)||k.isArrayOrTypedArray(dt.fgcolor)||k.isArrayOrTypedArray(dt.size)||k.isArrayOrTypedArray(dt.solidity);var nt=ce.uid;lt&&(nt+="-"+be.i),y.pattern(he,"point",Pe,nt,kt,zt,Qe,be.mcc,dt.fillmode,Vt,Rt,Ht)}else k.isArrayOrTypedArray(Le)?l.fill(he,Le[be.i]):l.fill(he,Le);ze&&l.stroke(he,Ue)}},y.makePointStyleFns=function(be){var he={},ce=be.marker;return he.markerScale=y.tryColorscale(ce,""),he.lineScale=y.tryColorscale(ce,"line"),p.traceIs(be,"symbols")&&(he.ms2mrc=c.isBubble(be)?h(be):function(){return(ce.size||6)/2}),be.selectedpoints&&k.extendFlat(he,y.makeSelectedPointStyleFns(be)),he},y.makeSelectedPointStyleFns=function(be){var he={},Pe=be.marker||{},Ae=(be.selected||{}).marker||{},Ce=(be.unselected||{}).marker||{},Ne=Ae.opacity,je=Ce.opacity,ve=void 0!==Ne,Me=void 0!==je;(k.isArrayOrTypedArray(Pe.opacity)||ve||Me)&&(he.selectedOpacityFn=function(kt){var St=void 0===kt.mo?Pe.opacity:kt.mo;return kt.selected?ve?Ne:St:Me?je:s*St});var Le=Pe.color,Ue=Ae.color,ze=Ce.color;(Ue||ze)&&(he.selectedColorFn=function(kt){var St=kt.mcc||Le;return kt.selected?Ue||St:ze||St});var qe=Pe.size,Ke=Ae.size,it=Ce.size,ft=void 0!==Ke,dt=void 0!==it;return p.traceIs(be,"symbols")&&(ft||dt)&&(he.selectedSizeFn=function(kt){var St=kt.mrc||qe/2;return kt.selected?ft?Ke/2:St:dt?it/2:St}),he},y.makeSelectedTextStyleFns=function(be){var he={},Oe=(be.textfont||{}).color,Ne=((be.selected||{}).textfont||{}).color,je=((be.unselected||{}).textfont||{}).color;return he.selectedTextColorFn=function(ve){var Me=ve.tc||Oe;return ve.selected?Ne||Me:je||(Ne?Me:l.addOpacity(Me,s))},he},y.selectedPointStyle=function(be,he){if(be.size()&&he.selectedpoints){var ce=y.makeSelectedPointStyleFns(he),me=he.marker||{},Pe=[];ce.selectedOpacityFn&&Pe.push(function(Ae,Ce){Ae.style("opacity",ce.selectedOpacityFn(Ce))}),ce.selectedColorFn&&Pe.push(function(Ae,Ce){l.fill(Ae,ce.selectedColorFn(Ce))}),ce.selectedSizeFn&&Pe.push(function(Ae,Ce){var Oe=Ce.mx||me.symbol||0,Ne=ce.selectedSizeFn(Ce);Ae.attr("d",_(y.symbolNumber(Oe),Ne,De(Ce,he),X(Ce,he))),Ce.mrc2=Ne}),Pe.length&&be.each(function(Ae){for(var Ce=S.select(this),Oe=0;Oe<Pe.length;Oe++)Pe[Oe](Ce,Ae)})}},y.tryColorscale=function(be,he){var ce=he?k.nestedProperty(be,he).get():be;return ce&&(ce.colorscale||ce._colorAx)&&k.isArrayOrTypedArray(ce.color)?t.makeColorScaleFuncFromTrace(ce):k.identity};var E,P,L={start:1,end:-1,middle:0,bottom:1,top:-1};function O(be,he,ce,me,Pe){var Ae=S.select(be.node().parentNode),Ce=-1!==he.indexOf("top")?"top":-1!==he.indexOf("bottom")?"bottom":"middle",Oe=-1!==he.indexOf("left")?"end":-1!==he.indexOf("right")?"start":"middle",Ne=me?me/.8+1:0,je=(r.lineCount(be)-1)*a+1,ve=L[Oe]*Ne,Me=.75*ce+L[Ce]*Ne+(L[Ce]-1)*je*ce/2;be.attr("text-anchor",Oe),Pe||Ae.attr("transform",i(ve,Me))}function z(be,he){var ce=be.ts||he.textfont.size;return T(ce)&&ce>0?ce:0}function V(be,he,ce){return ce&&(be=W(be)),he?U(be[1]):R(be[0])}function R(be){var he=S.round(be,2);return E=he,he}function U(be){var he=S.round(be,2);return P=he,he}function Z(be,he,ce,me){var Pe=be[0]-he[0],Ae=be[1]-he[1],Ce=ce[0]-he[0],Oe=ce[1]-he[1],Ne=Math.pow(Pe*Pe+Ae*Ae,.25),je=Math.pow(Ce*Ce+Oe*Oe,.25),ve=(je*je*Pe-Ne*Ne*Ce)*me,Me=(je*je*Ae-Ne*Ne*Oe)*me,Le=3*je*(Ne+je),Ue=3*Ne*(Ne+je);return[[R(he[0]+(Le&&ve/Le)),U(he[1]+(Le&&Me/Le))],[R(he[0]-(Ue&&ve/Ue)),U(he[1]-(Ue&&Me/Ue))]]}y.textPointStyle=function(be,he,ce){if(be.size()){var me;if(he.selectedpoints){var Pe=y.makeSelectedTextStyleFns(he);me=Pe.selectedTextColorFn}var Ae=he.texttemplate,Ce=ce._fullLayout;be.each(function(Oe){var Ne=S.select(this),je=Ae?k.extractOption(Oe,he,"txt","texttemplate"):k.extractOption(Oe,he,"tx","text");if(je||0===je){if(Ae){var ve=he._module.formatLabels,Me=ve?ve(Oe,he,Ce):{},Le={};u(Le,he,Oe.i),je=k.texttemplateString(je,Me,Ce._d3locale,Le,Oe,he._meta||{})}var ze=Oe.tp||he.textposition,qe=z(Oe,he),Ke=me?me(Oe):Oe.tc||he.textfont.color;Ne.call(y.font,{family:Oe.tf||he.textfont.family,weight:Oe.tw||he.textfont.weight,style:Oe.ty||he.textfont.style,variant:Oe.tv||he.textfont.variant,textcase:Oe.tC||he.textfont.textcase,lineposition:Oe.tE||he.textfont.lineposition,shadow:Oe.tS||he.textfont.shadow,size:qe,color:Ke}).text(je).call(r.convertToTspans,ce).call(O,ze,qe,Oe.mrc)}else Ne.remove()})}},y.selectedTextStyle=function(be,he){if(be.size()&&he.selectedpoints){var ce=y.makeSelectedTextStyleFns(he);be.each(function(me){var Pe=S.select(this),Ae=ce.selectedTextColorFn(me),Ce=me.tp||he.textposition,Oe=z(me,he);l.fill(Pe,Ae);var Ne=p.traceIs(he,"bar-like");O(Pe,Ce,Oe,me.mrc2||me.mrc,Ne)})}},y.smoothopen=function(be,he){if(be.length<3)return"M"+be.join("L");var ce,me="M"+be[0],Pe=[];for(ce=1;ce<be.length-1;ce++)Pe.push(Z(be[ce-1],be[ce],be[ce+1],he));for(me+="Q"+Pe[0][0]+" "+be[1],ce=2;ce<be.length-1;ce++)me+="C"+Pe[ce-2][1]+" "+Pe[ce-1][0]+" "+be[ce];return me+"Q"+Pe[be.length-3][1]+" "+be[be.length-1]},y.smoothclosed=function(be,he){if(be.length<3)return"M"+be.join("L")+"Z";var ce,me="M"+be[0],Pe=be.length-1,Ae=[Z(be[Pe],be[0],be[1],he)];for(ce=1;ce<Pe;ce++)Ae.push(Z(be[ce-1],be[ce],be[ce+1],he));for(Ae.push(Z(be[Pe-1],be[Pe],be[0],he)),ce=1;ce<=Pe;ce++)me+="C"+Ae[ce-1][1]+" "+Ae[ce][0]+" "+be[ce];return me+"C"+Ae[Pe][1]+" "+Ae[0][0]+" "+be[0]+"Z"};var N={hv:function(be,he,ce){return"H"+R(he[0])+"V"+V(he,1,ce)},vh:function(be,he,ce){return"V"+U(he[1])+"H"+V(he,0,ce)},hvh:function(be,he,ce){return"H"+R((be[0]+he[0])/2)+"V"+U(he[1])+"H"+V(he,0,ce)},vhv:function(be,he,ce){return"V"+U((be[1]+he[1])/2)+"H"+R(he[0])+"V"+V(he,1,ce)}},G=function(be,he,ce){return"L"+V(he,0,ce)+","+V(he,1,ce)};function W(be,he){var ce=be.backoff,me=be.trace,Pe=be.d,Ae=be.i;if(ce&&me&&me.marker&&me.marker.angle%360==0&&me.line&&"spline"!==me.line.shape){var Ce=k.isArrayOrTypedArray(ce),Oe=be,Ne=he?he[0]:E||0,je=he?he[1]:P||0,ve=Oe[0],Me=Oe[1],ze=Math.atan2(Me-je,ve-Ne),qe=Ce?ce[Ae]:ce;if("auto"===qe){var Ke=Oe.i;"scatter"===me.type&&Ke--;var it=Oe.marker,ft=it.symbol;k.isArrayOrTypedArray(ft)&&(ft=ft[Ke]);var dt=it.size;k.isArrayOrTypedArray(dt)&&(dt=dt[Ke]),qe=it?y.symbolBackOffs[y.symbolNumber(ft)]*dt:0,qe+=y.getMarkerStandoff(Pe[Ke],me)||0}var kt=ve-qe*Math.cos(ze),St=Me-qe*Math.sin(ze);(kt<=ve&&kt>=Ne||kt>=ve&&kt<=Ne)&&(St<=Me&&St>=je||St>=Me&&St<=je)&&(be=[kt,St])}return be}y.steps=function(be){var he=N[be]||G;return function(ce){for(var me="M"+R(ce[0][0])+","+U(ce[0][1]),Pe=ce.length,Ae=1;Ae<Pe;Ae++)me+=he(ce[Ae-1],ce[Ae],Ae===Pe-1);return me}},y.applyBackoff=W,y.makeTester=function(){var be=k.ensureSingleById(S.select("body"),"svg","js-plotly-tester",function(ce){ce.attr(n.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),he=k.ensureSingle(be,"path","js-reference-point",function(ce){ce.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});y.tester=be,y.testref=he},y.savedBBoxes={};var ae=0;function re(be){var he=be.getAttribute("data-unformatted");if(null!==he)return he+be.getAttribute("data-math")+be.getAttribute("text-anchor")+be.getAttribute("style")}function ne(be,he){if(!be)return null;var ce=he._context,me=ce._exportedPlot?"":ce._baseUrl||"";return me?"url('"+me+"#"+be+"')":"url(#"+be+")"}y.bBox=function(be,he,ce){var me,Pe,Ae;if(ce||(ce=re(be)),ce){if(me=y.savedBBoxes[ce])return k.extendFlat({},me)}else if(1===be.childNodes.length){var Ce=be.childNodes[0];if(ce=re(Ce)){var Oe=+Ce.getAttribute("x")||0,Ne=+Ce.getAttribute("y")||0,je=Ce.getAttribute("transform");if(!je){var ve=y.bBox(Ce,!1,ce);return Oe&&(ve.left+=Oe,ve.right+=Oe),Ne&&(ve.top+=Ne,ve.bottom+=Ne),ve}if(me=y.savedBBoxes[ce+="~"+Oe+"~"+Ne+"~"+je])return k.extendFlat({},me)}}he?Pe=be:(Ae=y.tester.node(),Pe=be.cloneNode(!0),Ae.appendChild(Pe)),S.select(Pe).attr("transform",null).call(r.positionText,0,0);var Me=Pe.getBoundingClientRect(),Le=y.testref.node().getBoundingClientRect();he||Ae.removeChild(Pe);var Ue={height:Me.height,width:Me.width,left:Me.left-Le.left,top:Me.top-Le.top,right:Me.right-Le.left,bottom:Me.bottom-Le.top};return ae>=1e4&&(y.savedBBoxes={},ae=0),ce&&(y.savedBBoxes[ce]=Ue),ae++,k.extendFlat({},Ue)},y.setClipUrl=function(be,he,ce){be.attr("clip-path",ne(he,ce))},y.getTranslate=function(be){var he=(be[be.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(ce,me,Pe){return[me,Pe].join(" ")}).split(" ");return{x:+he[0]||0,y:+he[1]||0}},y.setTranslate=function(be,he,ce){var Pe=be.attr?"attr":"setAttribute",Ae=be[be.attr?"attr":"getAttribute"]("transform")||"";return he=he||0,ce=ce||0,Ae=Ae.replace(/(\btranslate\(.*?\);?)/,"").trim(),Ae=(Ae+=i(he,ce)).trim(),be[Pe]("transform",Ae),Ae},y.getScale=function(be){var he=(be[be.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(ce,me,Pe){return[me,Pe].join(" ")}).split(" ");return{x:+he[0]||1,y:+he[1]||1}},y.setScale=function(be,he,ce){var Pe=be.attr?"attr":"setAttribute",Ae=be[be.attr?"attr":"getAttribute"]("transform")||"";return he=he||1,ce=ce||1,Ae=Ae.replace(/(\bscale\(.*?\);?)/,"").trim(),Ae=(Ae+="scale("+he+","+ce+")").trim(),be[Pe]("transform",Ae),Ae};var Q=/\s*sc.*/;y.setPointGroupScale=function(be,he,ce){if(he=he||1,ce=ce||1,be){var me=1===he&&1===ce?"":"scale("+he+","+ce+")";be.each(function(){var Pe=(this.getAttribute("transform")||"").replace(Q,"");Pe=(Pe+=me).trim(),this.setAttribute("transform",Pe)})}};var $=/translate\([^)]*\)\s*$/;function X(be,he){var ce;return be&&(ce=be.mf),void 0===ce&&(ce=he.marker&&he.marker.standoff||0),he._geo||he._xA?ce:-ce}y.setTextPointsScale=function(be,he,ce){be&&be.each(function(){var me,Pe=S.select(this),Ae=Pe.select("text");if(Ae.node()){var Ce=parseFloat(Ae.attr("x")||0),Oe=parseFloat(Ae.attr("y")||0),Ne=(Pe.attr("transform")||"").match($);me=1===he&&1===ce?[]:[i(Ce,Oe),"scale("+he+","+ce+")",i(-Ce,-Oe)],Ne&&me.push(Ne),Pe.attr("transform",me.join(""))}})},y.getMarkerStandoff=X;var oe,fe,ue,ge,we,Te,xe=Math.atan2,ye=Math.cos,_e=Math.sin;function Ie(be,he){var ce=he[0],me=he[1];return[ce*ye(be)-me*_e(be),ce*_e(be)+me*ye(be)]}function De(be,he){var ce,me,Pe=be.ma;void 0===Pe&&((Pe=he.marker.angle)&&!k.isArrayOrTypedArray(Pe)||(Pe=0));var Ae=he.marker.angleref;if("previous"===Ae||"north"===Ae){if(he._geo){var Ce=he._geo.project(be.lonlat);ce=Ce[0],me=Ce[1]}else{var Oe=he._xA,Ne=he._yA;if(!Oe||!Ne)return 90;ce=Oe.c2p(be.x),me=Ne.c2p(be.y)}if(he._geo){var je,ve=be.lonlat[0],Me=be.lonlat[1],Le=he._geo.project([ve,Me+1e-5]),Ue=he._geo.project([ve+1e-5,Me]),ze=xe(Ue[1]-me,Ue[0]-ce),qe=xe(Le[1]-me,Le[0]-ce);if("north"===Ae)je=Pe/180*Math.PI;else if("previous"===Ae){var Ke=ve/180*Math.PI,it=Me/180*Math.PI,ft=oe/180*Math.PI,dt=fe/180*Math.PI,kt=ft-Ke,St=ye(dt)*_e(kt),Tt=_e(dt)*ye(it)-ye(dt)*_e(it)*ye(kt);je=-xe(St,Tt)-Math.PI,oe=ve,fe=Me}var lt=Ie(ze,[ye(je),0]),ot=Ie(qe,[_e(je),0]);Pe=xe(lt[1]+ot[1],lt[0]+ot[0])/Math.PI*180,"previous"!==Ae||Te===he.uid&&be.i===we+1||(Pe=null)}if("previous"===Ae&&!he._geo)if(Te===he.uid&&be.i===we+1&&T(ce)&&T(me)){var Rt=ce-ue,Vt=me-ge,Ht=he.line&&he.line.shape||"",zt=Ht.slice(Ht.length-1);"h"===zt&&(Vt=0),"v"===zt&&(Rt=0),Pe+=xe(Vt,Rt)/Math.PI*180+90}else Pe=null}return ue=ce,ge=me,we=be.i,Te=he.uid,Pe}y.getMarkerAngle=De},71984:function(ie,F,e){"use strict";var S,k,o,T,b=e(21984),p=e(33428).round,l="M0,0Z",t=Math.sqrt(2),i=Math.sqrt(3),r=Math.PI,n=Math.cos,a=Math.sin;function s(h){return null===h}function c(h,u,y){if(!(h&&h%360!=0||u))return y;if(o===h&&T===u&&S===y)return k;function d(z,V){var R=n(z),U=a(z),Z=V[0],N=V[1]+(u||0);return[Z*R-N*U,Z*U+N*R]}o=h,T=u,S=y;for(var m=h/180*r,g=0,x=0,v=b(y),_="",f=0;f<v.length;f++){var C=v[f],w=C[0],E=g,P=x;if("M"===w||"L"===w)g=+C[1],x=+C[2];else if("m"===w||"l"===w)g+=+C[1],x+=+C[2];else if("H"===w)g=+C[1];else if("h"===w)g+=+C[1];else if("V"===w)x=+C[1];else if("v"===w)x+=+C[1];else if("A"===w){g=+C[1],x=+C[2];var L=d(m,[+C[6],+C[7]]);C[6]=L[0],C[7]=L[1],C[3]=+C[3]+h}"H"!==w&&"V"!==w||(w="L"),"h"!==w&&"v"!==w||(w="l"),"m"!==w&&"l"!==w||(g-=E,x-=P);var O=d(m,[g,x]);"H"!==w&&"V"!==w||(w="L"),"M"!==w&&"L"!==w&&"m"!==w&&"l"!==w||(C[1]=O[0],C[2]=O[1]),C[0]=w,_+=C[0]+C.slice(1).join(",")}return k=_,_}ie.exports={circle:{n:0,f:function(h,u,y){if(s(u))return l;var d=p(h,2),m="M"+d+",0A"+d+","+d+" 0 1,1 0,-"+d+"A"+d+","+d+" 0 0,1 "+d+",0Z";return y?c(u,y,m):m}},square:{n:1,f:function(h,u,y){if(s(u))return l;var d=p(h,2);return c(u,y,"M"+d+","+d+"H-"+d+"V-"+d+"H"+d+"Z")}},diamond:{n:2,f:function(h,u,y){if(s(u))return l;var d=p(1.3*h,2);return c(u,y,"M"+d+",0L0,"+d+"L-"+d+",0L0,-"+d+"Z")}},cross:{n:3,f:function(h,u,y){if(s(u))return l;var d=p(.4*h,2),m=p(1.2*h,2);return c(u,y,"M"+m+","+d+"H"+d+"V"+m+"H-"+d+"V"+d+"H-"+m+"V-"+d+"H-"+d+"V-"+m+"H"+d+"V-"+d+"H"+m+"Z")}},x:{n:4,f:function(h,u,y){if(s(u))return l;var d=p(.8*h/t,2),m="l"+d+","+d,g="l"+d+",-"+d,x="l-"+d+",-"+d,v="l-"+d+","+d;return c(u,y,"M0,"+d+m+g+x+g+x+v+x+v+m+v+m+"Z")}},"triangle-up":{n:5,f:function(h,u,y){if(s(u))return l;var d=p(2*h/i,2);return c(u,y,"M-"+d+","+p(h/2,2)+"H"+d+"L0,-"+p(h,2)+"Z")}},"triangle-down":{n:6,f:function(h,u,y){if(s(u))return l;var d=p(2*h/i,2);return c(u,y,"M-"+d+",-"+p(h/2,2)+"H"+d+"L0,"+p(h,2)+"Z")}},"triangle-left":{n:7,f:function(h,u,y){if(s(u))return l;var d=p(2*h/i,2);return c(u,y,"M"+p(h/2,2)+",-"+d+"V"+d+"L-"+p(h,2)+",0Z")}},"triangle-right":{n:8,f:function(h,u,y){if(s(u))return l;var d=p(2*h/i,2);return c(u,y,"M-"+p(h/2,2)+",-"+d+"V"+d+"L"+p(h,2)+",0Z")}},"triangle-ne":{n:9,f:function(h,u,y){if(s(u))return l;var d=p(.6*h,2),m=p(1.2*h,2);return c(u,y,"M-"+m+",-"+d+"H"+d+"V"+m+"Z")}},"triangle-se":{n:10,f:function(h,u,y){if(s(u))return l;var d=p(.6*h,2),m=p(1.2*h,2);return c(u,y,"M"+d+",-"+m+"V"+d+"H-"+m+"Z")}},"triangle-sw":{n:11,f:function(h,u,y){if(s(u))return l;var d=p(.6*h,2),m=p(1.2*h,2);return c(u,y,"M"+m+","+d+"H-"+d+"V-"+m+"Z")}},"triangle-nw":{n:12,f:function(h,u,y){if(s(u))return l;var d=p(.6*h,2),m=p(1.2*h,2);return c(u,y,"M-"+d+","+m+"V-"+d+"H"+m+"Z")}},pentagon:{n:13,f:function(h,u,y){if(s(u))return l;var d=p(.951*h,2),m=p(.588*h,2),g=p(-h,2),x=p(-.309*h,2);return c(u,y,"M"+d+","+x+"L"+m+","+p(.809*h,2)+"H-"+m+"L-"+d+","+x+"L0,"+g+"Z")}},hexagon:{n:14,f:function(h,u,y){if(s(u))return l;var d=p(h,2),m=p(h/2,2),g=p(h*i/2,2);return c(u,y,"M"+g+",-"+m+"V"+m+"L0,"+d+"L-"+g+","+m+"V-"+m+"L0,-"+d+"Z")}},hexagon2:{n:15,f:function(h,u,y){if(s(u))return l;var d=p(h,2),m=p(h/2,2),g=p(h*i/2,2);return c(u,y,"M-"+m+","+g+"H"+m+"L"+d+",0L"+m+",-"+g+"H-"+m+"L-"+d+",0Z")}},octagon:{n:16,f:function(h,u,y){if(s(u))return l;var d=p(.924*h,2),m=p(.383*h,2);return c(u,y,"M-"+m+",-"+d+"H"+m+"L"+d+",-"+m+"V"+m+"L"+m+","+d+"H-"+m+"L-"+d+","+m+"V-"+m+"Z")}},star:{n:17,f:function(h,u,y){if(s(u))return l;var d=1.4*h,m=p(.225*d,2),g=p(.951*d,2),x=p(.363*d,2),v=p(.588*d,2),_=p(-d,2),f=p(-.309*d,2),C=p(.118*d,2),w=p(.809*d,2);return c(u,y,"M"+m+","+f+"H"+g+"L"+x+","+C+"L"+v+","+w+"L0,"+p(.382*d,2)+"L-"+v+","+w+"L-"+x+","+C+"L-"+g+","+f+"H-"+m+"L0,"+_+"Z")}},hexagram:{n:18,f:function(h,u,y){if(s(u))return l;var d=p(.66*h,2),m=p(.38*h,2),g=p(.76*h,2);return c(u,y,"M-"+g+",0l-"+m+",-"+d+"h"+g+"l"+m+",-"+d+"l"+m+","+d+"h"+g+"l-"+m+","+d+"l"+m+","+d+"h-"+g+"l-"+m+","+d+"l-"+m+",-"+d+"h-"+g+"Z")}},"star-triangle-up":{n:19,f:function(h,u,y){if(s(u))return l;var d=p(h*i*.8,2),m=p(.8*h,2),g=p(1.6*h,2),x=p(4*h,2),v="A "+x+","+x+" 0 0 1 ";return c(u,y,"M-"+d+","+m+v+d+","+m+v+"0,-"+g+v+"-"+d+","+m+"Z")}},"star-triangle-down":{n:20,f:function(h,u,y){if(s(u))return l;var d=p(h*i*.8,2),m=p(.8*h,2),g=p(1.6*h,2),x=p(4*h,2),v="A "+x+","+x+" 0 0 1 ";return c(u,y,"M"+d+",-"+m+v+"-"+d+",-"+m+v+"0,"+g+v+d+",-"+m+"Z")}},"star-square":{n:21,f:function(h,u,y){if(s(u))return l;var d=p(1.1*h,2),m=p(2*h,2),g="A "+m+","+m+" 0 0 1 ";return c(u,y,"M-"+d+",-"+d+g+"-"+d+","+d+g+d+","+d+g+d+",-"+d+g+"-"+d+",-"+d+"Z")}},"star-diamond":{n:22,f:function(h,u,y){if(s(u))return l;var d=p(1.4*h,2),m=p(1.9*h,2),g="A "+m+","+m+" 0 0 1 ";return c(u,y,"M-"+d+",0"+g+"0,"+d+g+d+",0"+g+"0,-"+d+g+"-"+d+",0Z")}},"diamond-tall":{n:23,f:function(h,u,y){if(s(u))return l;var d=p(.7*h,2),m=p(1.4*h,2);return c(u,y,"M0,"+m+"L"+d+",0L0,-"+m+"L-"+d+",0Z")}},"diamond-wide":{n:24,f:function(h,u,y){if(s(u))return l;var d=p(1.4*h,2),m=p(.7*h,2);return c(u,y,"M0,"+m+"L"+d+",0L0,-"+m+"L-"+d+",0Z")}},hourglass:{n:25,f:function(h,u,y){if(s(u))return l;var d=p(h,2);return c(u,y,"M"+d+","+d+"H-"+d+"L"+d+",-"+d+"H-"+d+"Z")},noDot:!0},bowtie:{n:26,f:function(h,u,y){if(s(u))return l;var d=p(h,2);return c(u,y,"M"+d+","+d+"V-"+d+"L-"+d+","+d+"V-"+d+"Z")},noDot:!0},"circle-cross":{n:27,f:function(h,u,y){if(s(u))return l;var d=p(h,2);return c(u,y,"M0,"+d+"V-"+d+"M"+d+",0H-"+d+"M"+d+",0A"+d+","+d+" 0 1,1 0,-"+d+"A"+d+","+d+" 0 0,1 "+d+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(h,u,y){if(s(u))return l;var d=p(h,2),m=p(h/t,2);return c(u,y,"M"+m+","+m+"L-"+m+",-"+m+"M"+m+",-"+m+"L-"+m+","+m+"M"+d+",0A"+d+","+d+" 0 1,1 0,-"+d+"A"+d+","+d+" 0 0,1 "+d+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(h,u,y){if(s(u))return l;var d=p(h,2);return c(u,y,"M0,"+d+"V-"+d+"M"+d+",0H-"+d+"M"+d+","+d+"H-"+d+"V-"+d+"H"+d+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(h,u,y){if(s(u))return l;var d=p(h,2);return c(u,y,"M"+d+","+d+"L-"+d+",-"+d+"M"+d+",-"+d+"L-"+d+","+d+"M"+d+","+d+"H-"+d+"V-"+d+"H"+d+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(h,u,y){if(s(u))return l;var d=p(1.3*h,2);return c(u,y,"M"+d+",0L0,"+d+"L-"+d+",0L0,-"+d+"ZM0,-"+d+"V"+d+"M-"+d+",0H"+d)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(h,u,y){if(s(u))return l;var d=p(1.3*h,2),m=p(.65*h,2);return c(u,y,"M"+d+",0L0,"+d+"L-"+d+",0L0,-"+d+"ZM-"+m+",-"+m+"L"+m+","+m+"M-"+m+","+m+"L"+m+",-"+m)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(h,u,y){if(s(u))return l;var d=p(1.4*h,2);return c(u,y,"M0,"+d+"V-"+d+"M"+d+",0H-"+d)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(h,u,y){if(s(u))return l;var d=p(h,2);return c(u,y,"M"+d+","+d+"L-"+d+",-"+d+"M"+d+",-"+d+"L-"+d+","+d)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(h,u,y){if(s(u))return l;var d=p(1.2*h,2),m=p(.85*h,2);return c(u,y,"M0,"+d+"V-"+d+"M"+d+",0H-"+d+"M"+m+","+m+"L-"+m+",-"+m+"M"+m+",-"+m+"L-"+m+","+m)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(h,u,y){if(s(u))return l;var d=p(h/2,2),m=p(h,2);return c(u,y,"M"+d+","+m+"V-"+m+"M"+(d-m)+",-"+m+"V"+m+"M"+m+","+d+"H-"+m+"M-"+m+","+(d-m)+"H"+m)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(h,u,y){if(s(u))return l;var d=p(1.2*h,2),m=p(1.6*h,2),g=p(.8*h,2);return c(u,y,"M-"+d+","+g+"L0,0M"+d+","+g+"L0,0M0,-"+m+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(h,u,y){if(s(u))return l;var d=p(1.2*h,2),m=p(1.6*h,2),g=p(.8*h,2);return c(u,y,"M-"+d+",-"+g+"L0,0M"+d+",-"+g+"L0,0M0,"+m+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(h,u,y){if(s(u))return l;var d=p(1.2*h,2),m=p(1.6*h,2),g=p(.8*h,2);return c(u,y,"M"+g+","+d+"L0,0M"+g+",-"+d+"L0,0M-"+m+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(h,u,y){if(s(u))return l;var d=p(1.2*h,2),m=p(1.6*h,2),g=p(.8*h,2);return c(u,y,"M-"+g+","+d+"L0,0M-"+g+",-"+d+"L0,0M"+m+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(h,u,y){if(s(u))return l;var d=p(1.4*h,2);return c(u,y,"M"+d+",0H-"+d)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(h,u,y){if(s(u))return l;var d=p(1.4*h,2);return c(u,y,"M0,"+d+"V-"+d)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(h,u,y){if(s(u))return l;var d=p(h,2);return c(u,y,"M"+d+",-"+d+"L-"+d+","+d)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(h,u,y){if(s(u))return l;var d=p(h,2);return c(u,y,"M"+d+","+d+"L-"+d+",-"+d)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(h,u,y){if(s(u))return l;var d=p(h,2);return c(u,y,"M0,0L-"+d+","+p(2*h,2)+"H"+d+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(h,u,y){if(s(u))return l;var d=p(h,2);return c(u,y,"M0,0L-"+d+",-"+p(2*h,2)+"H"+d+"Z")},noDot:!0},"arrow-left":{n:47,f:function(h,u,y){if(s(u))return l;var d=p(2*h,2),m=p(h,2);return c(u,y,"M0,0L"+d+",-"+m+"V"+m+"Z")},noDot:!0},"arrow-right":{n:48,f:function(h,u,y){if(s(u))return l;var d=p(2*h,2),m=p(h,2);return c(u,y,"M0,0L-"+d+",-"+m+"V"+m+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(h,u,y){if(s(u))return l;var d=p(h,2);return c(u,y,"M-"+d+",0H"+d+"M0,0L-"+d+","+p(2*h,2)+"H"+d+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(h,u,y){if(s(u))return l;var d=p(h,2);return c(u,y,"M-"+d+",0H"+d+"M0,0L-"+d+",-"+p(2*h,2)+"H"+d+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(h,u,y){if(s(u))return l;var d=p(2*h,2),m=p(h,2);return c(u,y,"M0,-"+m+"V"+m+"M0,0L"+d+",-"+m+"V"+m+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(h,u,y){if(s(u))return l;var d=p(2*h,2),m=p(h,2);return c(u,y,"M0,-"+m+"V"+m+"M0,0L-"+d+",-"+m+"V"+m+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(h,u,y){if(s(u))return l;var d=r/2.5,m=2*h*n(d),g=2*h*a(d);return c(u,y,"M0,0L"+-m+","+g+"L"+m+","+g+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(h,u,y){if(s(u))return l;var d=r/4,m=2*h*n(d),g=2*h*a(d);return c(u,y,"M0,0L"+-m+","+g+"A "+2*h+","+2*h+" 0 0 1 "+m+","+g+"Z")},backoff:.4,noDot:!0}}},97644:function(ie){"use strict";ie.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},14880:function(ie,F,e){"use strict";var S=e(38248),k=e(24040),o=e(54460),T=e(3400),b=e(93792);function p(l,t,i,r){var n=t["error_"+r]||{},a=[];if(n.visible&&-1!==["linear","log"].indexOf(i.type)){for(var s=b(n),c=0;c<l.length;c++){var h=l[c],u=h.i;if(void 0===u)u=c;else if(null===u)continue;var y=h[r];if(S(i.c2l(y))){var d=s(y,u);if(S(d[0])&&S(d[1])){var m=h[r+"s"]=y-d[0],g=h[r+"h"]=y+d[1];a.push(m,g)}}}var v=t._extremes[i._id],_=o.findExtremes(i,a,T.extendFlat({tozero:v.opts.tozero},{padded:!0}));v.min=v.min.concat(_.min),v.max=v.max.concat(_.max)}}ie.exports=function(l){for(var t=l.calcdata,i=0;i<t.length;i++){var r=t[i],n=r[0].trace;if(!0===n.visible&&k.traceIs(n,"errorBarsOK")){var a=o.getFromId(l,n.xaxis),s=o.getFromId(l,n.yaxis);p(r,n,a,"x"),p(r,n,s,"y")}}}},93792:function(ie){"use strict";function F(e,S){return"percent"===e?function(k){return Math.abs(k*S/100)}:"constant"===e?function(){return Math.abs(S)}:"sqrt"===e?function(k){return Math.sqrt(Math.abs(k))}:void 0}ie.exports=function(e){var S=e.type,k=e.symmetric;if("data"===S){var o=e.array||[];if(k)return function(l,t){var i=+o[t];return[i,i]};var T=e.arrayminus||[];return function(l,t){var i=+o[t],r=+T[t];return isNaN(i)&&isNaN(r)?[NaN,NaN]:[r||0,i||0]}}var b=F(S,e.value),p=F(S,e.valueminus);return k||void 0===e.valueminus?function(l){var t=b(l);return[t,t]}:function(l){return[p(l),b(l)]}}},65200:function(ie,F,e){"use strict";var S=e(38248),k=e(24040),o=e(3400),T=e(31780),b=e(97644);ie.exports=function(p,l,t,i){var r="error_"+i.axis,n=T.newContainer(l,r),a=p[r]||{};function s(y,d){return o.coerce(a,n,b,y,d)}if(!1!==s("visible",void 0!==a.array||void 0!==a.value||"sqrt"===a.type)){var c=s("type","array"in a?"data":"percent"),h=!0;"sqrt"!==c&&(h=s("symmetric",!(("data"===c?"arrayminus":"valueminus")in a))),"data"===c?(s("array"),s("traceref"),h||(s("arrayminus"),s("tracerefminus"))):"percent"!==c&&"constant"!==c||(s("value"),h||s("valueminus"));var u="copy_"+i.inherit+"style";i.inherit&&(l["error_"+i.inherit]||{}).visible&&s(u,!(a.color||S(a.thickness)||S(a.width))),i.inherit&&n[u]||(s("color",t),s("thickness"),s("width",k.traceIs(l,"gl3d")?0:4))}}},64968:function(ie,F,e){"use strict";var S=e(3400),k=e(67824).overrideAll,o=e(97644),T={error_x:S.extendFlat({},o),error_y:S.extendFlat({},o)};delete T.error_x.copy_zstyle,delete T.error_y.copy_zstyle,delete T.error_y.copy_ystyle;var b={error_x:S.extendFlat({},o),error_y:S.extendFlat({},o),error_z:S.extendFlat({},o)};delete b.error_x.copy_ystyle,delete b.error_y.copy_ystyle,delete b.error_z.copy_ystyle,delete b.error_z.copy_zstyle,ie.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:T,bar:T,histogram:T,scatter3d:k(b,"calc","nested"),scattergl:k(T,"calc","nested")}},supplyDefaults:e(65200),calc:e(14880),makeComputeError:e(93792),plot:e(78512),style:e(92036),hoverInfo:function(p,l,t){(l.error_y||{}).visible&&(t.yerr=p.yh-p.y,l.error_y.symmetric||(t.yerrneg=p.y-p.ys)),(l.error_x||{}).visible&&(t.xerr=p.xh-p.x,l.error_x.symmetric||(t.xerrneg=p.x-p.xs))}}},78512:function(ie,F,e){"use strict";var S=e(33428),k=e(38248),o=e(43616),T=e(43028);ie.exports=function(b,p,l,t){var i=l.xaxis,r=l.yaxis,n=t&&t.duration>0,a=b._context.staticPlot;p.each(function(s){var c,h=s[0].trace,u=h.error_x||{},y=h.error_y||{};h.ids&&(c=function(x){return x.id});var d=T.hasMarkers(h)&&h.marker.maxdisplayed>0;y.visible||u.visible||(s=[]);var m=S.select(this).selectAll("g.errorbar").data(s,c);if(m.exit().remove(),s.length){u.visible||m.selectAll("path.xerror").remove(),y.visible||m.selectAll("path.yerror").remove(),m.style("opacity",1);var g=m.enter().append("g").classed("errorbar",!0);n&&g.style("opacity",0).transition().duration(t.duration).style("opacity",1),o.setClipUrl(m,l.layerClipId,b),m.each(function(x){var L,O,z,V,v=S.select(this),_=(z=r,V={x:(O=i).c2p((L=x).x),y:z.c2p(L.y)},void 0!==L.yh&&(V.yh=z.c2p(L.yh),V.ys=z.c2p(L.ys),k(V.ys)||(V.noYS=!0,V.ys=z.c2p(L.ys,!0))),void 0!==L.xh&&(V.xh=O.c2p(L.xh),V.xs=O.c2p(L.xs),k(V.xs)||(V.noXS=!0,V.xs=O.c2p(L.xs,!0))),V);if(!d||x.vis){var f,C=v.select("path.yerror");if(y.visible&&k(_.x)&&k(_.yh)&&k(_.ys)){var w=y.width;f="M"+(_.x-w)+","+_.yh+"h"+2*w+"m-"+w+",0V"+_.ys,_.noYS||(f+="m-"+w+",0h"+2*w),C.size()?n&&(C=C.transition().duration(t.duration).ease(t.easing)):C=v.append("path").style("vector-effect",a?"none":"non-scaling-stroke").classed("yerror",!0),C.attr("d",f)}else C.remove();var E=v.select("path.xerror");if(u.visible&&k(_.y)&&k(_.xh)&&k(_.xs)){var P=(u.copy_ystyle?y:u).width;f="M"+_.xh+","+(_.y-P)+"v"+2*P+"m0,-"+P+"H"+_.xs,_.noXS||(f+="m0,-"+P+"v"+2*P),E.size()?n&&(E=E.transition().duration(t.duration).ease(t.easing)):E=v.append("path").style("vector-effect",a?"none":"non-scaling-stroke").classed("xerror",!0),E.attr("d",f)}else E.remove()}})}})}},92036:function(ie,F,e){"use strict";var S=e(33428),k=e(76308);ie.exports=function(o){o.each(function(T){var b=T[0].trace,p=b.error_y||{},l=b.error_x||{},t=S.select(this);t.selectAll("path.yerror").style("stroke-width",p.thickness+"px").call(k.stroke,p.color),l.copy_ystyle&&(l=p),t.selectAll("path.xerror").style("stroke-width",l.thickness+"px").call(k.stroke,l.color)})}},55756:function(ie,F,e){"use strict";var S=e(25376),k=e(65460).hoverlabel,o=e(92880).extendFlat;ie.exports={hoverlabel:{bgcolor:o({},k.bgcolor,{arrayOk:!0}),bordercolor:o({},k.bordercolor,{arrayOk:!0}),font:S({arrayOk:!0,editType:"none"}),align:o({},k.align,{arrayOk:!0}),namelength:o({},k.namelength,{arrayOk:!0}),editType:"none"}}},55056:function(ie,F,e){"use strict";var S=e(3400),k=e(24040);function o(T,b,p,l){l=l||S.identity,Array.isArray(T)&&(b[0][p]=l(T))}ie.exports=function(T){var b=T.calcdata,p=T._fullLayout;function l(a){return function(s){return S.coerceHoverinfo({hoverinfo:s},{_module:a._module},p)}}for(var t=0;t<b.length;t++){var i=b[t],r=i[0].trace;if(!k.traceIs(r,"pie-like")){var n=k.traceIs(r,"2dMap")?o:S.fillArray;n(r.hoverinfo,i,"hi",l(r)),r.hovertemplate&&n(r.hovertemplate,i,"ht"),r.hoverlabel&&(n(r.hoverlabel.bgcolor,i,"hbg"),n(r.hoverlabel.bordercolor,i,"hbc"),n(r.hoverlabel.font.size,i,"hts"),n(r.hoverlabel.font.color,i,"htc"),n(r.hoverlabel.font.family,i,"htf"),n(r.hoverlabel.font.weight,i,"htw"),n(r.hoverlabel.font.style,i,"hty"),n(r.hoverlabel.font.variant,i,"htv"),n(r.hoverlabel.namelength,i,"hnl"),n(r.hoverlabel.align,i,"hta"))}}}},62376:function(ie,F,e){"use strict";var S=e(24040),k=e(83292).hover;ie.exports=function(o,T,b){var p=S.getComponentMethod("annotations","onClick")(o,o._hoverdata);function l(){o.emit("plotly_click",{points:o._hoverdata,event:T})}void 0!==b&&k(o,T,b,!0),o._hoverdata&&T&&T.target&&(p&&p.then?p.then(l):l(),T.stopImmediatePropagation&&T.stopImmediatePropagation())}},92456:function(ie){"use strict";ie.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},95448:function(ie,F,e){"use strict";var S=e(3400),k=e(55756),o=e(16132);ie.exports=function(T,b,p,l){var t=S.extendFlat({},l.hoverlabel);b.hovertemplate&&(t.namelength=-1),o(T,b,function(i,r){return S.coerce(T,b,k,i,r)},t)}},10624:function(ie,F,e){"use strict";var S=e(3400);F.getSubplot=function(l){return l.subplot||l.xaxis+l.yaxis||l.geo},F.isTraceInSubplots=function(l,t){if("splom"===l.type){for(var i=l.xaxes||[],r=l.yaxes||[],n=0;n<i.length;n++)for(var a=0;a<r.length;a++)if(-1!==t.indexOf(i[n]+r[a]))return!0;return!1}return-1!==t.indexOf(F.getSubplot(l))},F.flat=function(l,t){for(var i=new Array(l.length),r=0;r<l.length;r++)i[r]=t;return i},F.p2c=function(l,t){for(var i=new Array(l.length),r=0;r<l.length;r++)i[r]=l[r].p2c(t);return i},F.getDistanceFunction=function(l,t,i,r){return"closest"===l?r||F.quadrature(t,i):"x"===l.charAt(0)?t:i},F.getClosest=function(l,t,i){if(!1!==i.index)i.index>=0&&i.index<l.length?i.distance=0:i.index=!1;else for(var r=0;r<l.length;r++){var n=t(l[r]);n<=i.distance&&(i.index=r,i.distance=n)}return i},F.inbox=function(l,t,i){return l*t<0||0===l?i:1/0},F.quadrature=function(l,t){return function(i){var r=l(i),n=t(i);return Math.sqrt(r*r+n*n)}},F.makeEventData=function(l,t,i){var r="index"in l?l.index:l.pointNumber,n={data:t._input,fullData:t,curveNumber:t.index,pointNumber:r};if(t._indexToPoints){var a=t._indexToPoints[r];1===a.length?n.pointIndex=a[0]:n.pointIndices=a}else n.pointIndex=r;return t._module.eventData?n=t._module.eventData(n,l,t,i,r):("xVal"in l?n.x=l.xVal:"x"in l&&(n.x=l.x),"yVal"in l?n.y=l.yVal:"y"in l&&(n.y=l.y),l.xa&&(n.xaxis=l.xa),l.ya&&(n.yaxis=l.ya),void 0!==l.zLabelVal&&(n.z=l.zLabelVal)),F.appendArrayPointValue(n,t,r),n},F.appendArrayPointValue=function(l,t,i){var r=t._arrayAttrs;if(r)for(var n=0;n<r.length;n++){var a=r[n],s=o(a);if(void 0===l[s]){var c=T(S.nestedProperty(t,a).get(),i);void 0!==c&&(l[s]=c)}}},F.appendArrayMultiPointValues=function(l,t,i){var r=t._arrayAttrs;if(r)for(var n=0;n<r.length;n++){var a=r[n],s=o(a);if(void 0===l[s]){for(var c=S.nestedProperty(t,a).get(),h=new Array(i.length),u=0;u<i.length;u++)h[u]=T(c,i[u]);l[s]=h}}};var k={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function o(l){return k[l]||l}function T(l,t){return Array.isArray(t)?Array.isArray(l)&&Array.isArray(l[t[0]])?l[t[0]][t[1]]:void 0:l[t]}var b={x:!0,y:!0},p={"x unified":!0,"y unified":!0};F.isUnifiedHover=function(l){return"string"==typeof l&&!!p[l]},F.isXYhover=function(l){return"string"==typeof l&&!!b[l]}},83292:function(ie,F,e){"use strict";var S=e(33428),k=e(38248),o=e(49760),T=e(3400),b=T.pushUnique,p=T.strTranslate,l=T.strRotate,t=e(95924),i=e(72736),r=e(72213),n=e(43616),a=e(76308),s=e(86476),c=e(54460),h=e(24040),u=e(10624),y=e(92456),d=e(77864),m=e(31140),g=y.YANGLE,x=Math.PI*g/180,v=1/Math.sin(x),_=Math.cos(x),f=Math.sin(x),C=y.HOVERARROWSIZE,w=y.HOVERTEXTPAD,E={box:!0,ohlc:!0,violin:!0,candlestick:!0},P={scatter:!0,scattergl:!0,splom:!0};function L(X,oe){return X.distance-oe.distance}function O(X){return[X.trace.index,X.index,X.x0,X.y0,X.name,X.attr,X.xa?X.xa._id:"",X.ya?X.ya._id:""].join(",")}F.hover=function(X,oe,fe,ue){X=T.getGraphDiv(X);var ge=oe.target;T.throttle(X._fullLayout._uid+y.HOVERID,y.HOVERMINTIME,function(){!function(we,Te,xe,ye,_e){xe||(xe="xy");var Ie,De,be,he=Array.isArray(xe)?xe:[xe],ce=we._fullLayout,me=ce.hoversubplots,Pe=ce._plots||[],Ae=Pe[xe],Ce=ce._has("cartesian"),Oe=Te.hovermode||ce.hovermode,Ne="x"===(Oe||"").charAt(0),je="y"===(Oe||"").charAt(0);if(Ce&&(Ne||je)&&"axis"===me)for(var ve=he.length,Me=0;Me<ve;Me++)if(Pe[Ie=he[Me]]){De=c.getFromId(we,Ie,"x"),be=c.getFromId(we,Ie,"y");var Le=(Ne?De:be)._subplotsWith;if(Le&&Le.length)for(var Ue=0;Ue<Le.length;Ue++)b(he,Le[Ue])}if(Ae&&"single"!==me){var ze=Ae.overlays.map(function(Zt){return Zt.id});he=he.concat(ze)}for(var qe=he.length,Ke=new Array(qe),it=new Array(qe),ft=!1,dt=0;dt<qe;dt++)if(Pe[Ie=he[dt]])ft=!0,Ke[dt]=Pe[Ie].xaxis,it[dt]=Pe[Ie].yaxis;else{if(!ce[Ie]||!ce[Ie]._subplot)return void T.warn("Unrecognized subplot: "+Ie);var kt=ce[Ie]._subplot;Ke[dt]=kt.xaxis,it[dt]=kt.yaxis}if(Oe&&!ft&&(Oe="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(Oe)||!we.calcdata||we.querySelector(".zoombox")||we._dragging)return s.unhoverRaw(we,Te);var St=ce.hoverdistance;-1===St&&(St=1/0);var Tt=ce.spikedistance;-1===Tt&&(Tt=1/0);var lt,ot,Rt,Vt,Ht,zt,Qe,nt,We,et,gt,ht,Ge,He=[],ut=[],tt={hLinePoint:null,vLinePoint:null},xt=!1;if(Array.isArray(Te))for(Oe="array",Rt=0;Rt<Te.length;Rt++)(Ht=we.calcdata[Te[Rt].curveNumber||0])&&(zt=Ht[0].trace,"skip"!==Ht[0].trace.hoverinfo&&(ut.push(Ht),"h"===zt.orientation&&(xt=!0)));else{var At,Mt,yt=we.calcdata.slice();for(yt.sort(function(Zt,un){return(Zt[0].trace.zorder||0)-(un[0].trace.zorder||0)}),Vt=0;Vt<yt.length;Vt++)"skip"!==(zt=(Ht=yt[Vt])[0].trace).hoverinfo&&u.isTraceInSubplots(zt,he)&&(ut.push(Ht),"h"===zt.orientation&&(xt=!0));if(_e){if(!1===t.triggerHandler(we,"plotly_beforehover",Te))return;var Pt=_e.getBoundingClientRect();At=Te.clientX-Pt.left,Mt=Te.clientY-Pt.top,ce._calcInverseTransform(we);var Ct=T.apply3DTransform(ce._invTransform)(At,Mt);if(Mt=Ct[1],(At=Ct[0])<0||At>Ke[0]._length||Mt<0||Mt>it[0]._length)return s.unhoverRaw(we,Te)}else At="xpx"in Te?Te.xpx:Ke[0]._length/2,Mt="ypx"in Te?Te.ypx:it[0]._length/2;if(Te.pointerX=At+Ke[0]._offset,Te.pointerY=Mt+it[0]._offset,lt="xval"in Te?u.flat(he,Te.xval):u.p2c(Ke,At),ot="yval"in Te?u.flat(he,Te.yval):u.p2c(it,Mt),!k(lt[0])||!k(ot[0]))return T.warn("Fx.hover failed",Te,we),s.unhoverRaw(we,Te)}var Dt=1/0;function Ut(Zt,un){for(Vt=0;Vt<ut.length;Vt++)if((Ht=ut[Vt])&&Ht[0]&&Ht[0].trace&&!0===(zt=Ht[0].trace).visible&&0!==zt._length&&-1===["carpet","contourcarpet"].indexOf(zt._module.name)){if(u.isUnifiedHover(We=Oe)&&(We=We.charAt(0)),"splom"===zt.type?Qe=he[nt=0]:(Qe=u.getSubplot(zt),nt=he.indexOf(Qe)),ht={cd:Ht,trace:zt,xa:Ke[nt],ya:it[nt],maxHoverDistance:St,maxSpikeDistance:Tt,index:!1,distance:Math.min(Dt,St),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:a.defaultLine,name:zt.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ce[Qe]&&(ht.subplot=ce[Qe]._subplot),ce._splomScenes&&ce._splomScenes[zt.uid]&&(ht.scene=ce._splomScenes[zt.uid]),"array"===We){var Tn=Te[Vt];"pointNumber"in Tn?(ht.index=Tn.pointNumber,We="closest"):(We="","xval"in Tn&&(et=Tn.xval,We="x"),"yval"in Tn&&(gt=Tn.yval,We=We?"closest":"y"))}else void 0!==Zt&&void 0!==un?(et=Zt,gt=un):(et=lt[nt],gt=ot[nt]);if(Ge=He.length,0!==St)if(zt._module&&zt._module.hoverPoints){var kn=zt._module.hoverPoints(ht,et,gt,We,{finiteRange:!0,hoverLayer:ce._hoverlayer,hoversubplots:me,gd:we});if(kn)for(var Pn,yn=0;yn<kn.length;yn++)k((Pn=kn[yn]).x0)&&k(Pn.y0)&&He.push(N(Pn,Oe))}else T.log("Unrecognized trace type in hover:",zt);if("closest"===Oe&&He.length>Ge&&(He.splice(0,Ge),Dt=He[0].distance),Ce&&0!==Tt&&0===He.length){ht.distance=Tt,ht.index=!1;var on=zt._module.hoverPoints(ht,et,gt,"closest",{hoverLayer:ce._hoverlayer});if(on&&(on=on.filter(function(Qn){return Qn.spikeDistance<=Tt})),on&&on.length){var nn,dn=on.filter(function(Qn){return Qn.xa.showspikes&&"hovered data"!==Qn.xa.spikesnap});if(dn.length){var xn=dn[0];k(xn.x0)&&k(xn.y0)&&(nn=qt(xn),(!tt.vLinePoint||tt.vLinePoint.spikeDistance>nn.spikeDistance)&&(tt.vLinePoint=nn))}var Bn=on.filter(function(Qn){return Qn.ya.showspikes&&"hovered data"!==Qn.ya.spikesnap});if(Bn.length){var Wn=Bn[0];k(Wn.x0)&&k(Wn.y0)&&(nn=qt(Wn),(!tt.hLinePoint||tt.hLinePoint.spikeDistance>nn.spikeDistance)&&(tt.hLinePoint=nn))}}}}}function Bt(Zt,un,Tn){for(var kn,Pn=null,yn=1/0,on=0;on<Zt.length;on++)De&&De._id!==Zt[on].xa._id||be&&be._id!==Zt[on].ya._id||(kn=Zt[on].spikeDistance,Tn&&0===on&&(kn=-1/0),kn<=yn&&kn<=un&&(Pn=Zt[on],yn=kn));return Pn}function qt(Zt){return Zt?{xa:Zt.xa,ya:Zt.ya,x:void 0!==Zt.xSpike?Zt.xSpike:(Zt.x0+Zt.x1)/2,y:void 0!==Zt.ySpike?Zt.ySpike:(Zt.y0+Zt.y1)/2,distance:Zt.distance,spikeDistance:Zt.spikeDistance,curveNumber:Zt.trace.index,color:Zt.color,pointNumber:Zt.index}:null}Ut();var an={fullLayout:ce,container:ce._hoverlayer,event:Te},mn=we._spikepoints;we._spikepoints={vLinePoint:tt.vLinePoint,hLinePoint:tt.hLinePoint};var sn=function(){var Zt=He.filter(function(Tn){return De&&De._id===Tn.xa._id&&be&&be._id===Tn.ya._id}),un=He.filter(function(Tn){return!(De&&De._id===Tn.xa._id&&be&&be._id===Tn.ya._id)});Zt.sort(L),un.sort(L),He=function(Tn,kn){for(var Pn=kn.charAt(0),yn=[],on=[],nn=[],dn=0;dn<Tn.length;dn++){var xn=Tn[dn];h.traceIs(xn.trace,"bar-like")||h.traceIs(xn.trace,"box-violin")?nn.push(xn):xn.trace[Pn+"period"]?on.push(xn):yn.push(xn)}return yn.concat(on).concat(nn)}(He=Zt.concat(un),Oe)};sn();var Kt=Oe.charAt(0),qn=("x"===Kt||"y"===Kt)&&He[0]&&P[He[0].trace.type];if(Ce&&0!==Tt&&0!==He.length){var Fn=Bt(He.filter(function(Zt){return Zt.ya.showspikes}),Tt,qn);tt.hLinePoint=qt(Fn);var Sn=Bt(He.filter(function(Zt){return Zt.xa.showspikes}),Tt,qn);tt.vLinePoint=qt(Sn)}if(0===He.length){var hn=s.unhoverRaw(we,Te);return!Ce||null===tt.hLinePoint&&null===tt.vLinePoint||W(mn)&&G(we,tt,an),hn}if(Ce&&W(mn)&&G(we,tt,an),u.isXYhover(We)&&0!==He[0].length&&"splom"!==He[0].trace.type){var wn=He[0],pn=(He=E[wn.trace.type]?He.filter(function(Zt){return Zt.trace.index===wn.trace.index}):[wn]).length;Ut(re("x",wn,ce),re("y",wn,ce));var An,On=[],Dn={},Vn=0,Gn=function(Zt){var un=E[Zt.trace.type]?O(Zt):Zt.trace.index;if(Dn[un]){var Tn=Dn[un]-1,kn=On[Tn];Tn>0&&Math.abs(Zt.distance)<Math.abs(kn.distance)&&(On[Tn]=Zt)}else Vn++,Dn[un]=Vn,On.push(Zt)};for(An=0;An<pn;An++)Gn(He[An]);for(An=He.length-1;An>pn-1;An--)Gn(He[An]);He=On,sn()}var Nn=we._hoverdata,ir=[],$n=ne(we),mr=Q(we);for(Rt=0;Rt<He.length;Rt++){var lr=He[Rt],vr=u.makeEventData(lr,lr.trace,lr.cd);if(!1!==lr.hovertemplate){var or=!1;lr.cd[lr.index]&&lr.cd[lr.index].ht&&(or=lr.cd[lr.index].ht),lr.hovertemplate=or||lr.trace.hovertemplate||!1}if(lr.xa&&lr.ya){var Or=lr.x0+lr.xa._offset,fn=lr.x1+lr.xa._offset,gn=lr.y0+lr.ya._offset,Hn=lr.y1+lr.ya._offset,En=Math.min(Or,fn),Zn=Math.max(Or,fn),Kn=Math.min(gn,Hn),tr=Math.max(gn,Hn);vr.bbox={x0:En+mr,x1:Zn+mr,y0:Kn+$n,y1:tr+$n}}lr.eventData=[vr],ir.push(vr)}we._hoverdata=ir;var fr="y"===Oe&&(ut.length>1||He.length>1)||"closest"===Oe&&xt&&He.length>1,Dr=a.combine(ce.plot_bgcolor||a.background,ce.paper_bgcolor),cn=V(He,{gd:we,hovermode:Oe,rotateLabels:fr,bgColor:Dr,container:ce._hoverlayer,outerContainer:ce._paper.node(),commonLabelOpts:ce.hoverlabel,hoverdistance:ce.hoverdistance}),In=cn.hoverLabels;if(u.isUnifiedHover(Oe)||(function(Zt,un,Tn,kn){var Pn,yn,on,nn,dn,xn,Bn,Wn=un?"xa":"ya",Qn=un?"ya":"xa",ar=0,yr=1,ur=Zt.size(),gr=new Array(ur),br=0,pr=kn.minX,Lr=kn.maxX,Ur=kn.minY,zr=kn.maxY,kr=function(li){return li*Tn._invScaleX},Fr=function(li){return li*Tn._invScaleY};function Qr(li){var za=li[0],No=li[li.length-1];if(on=No.pos+No.dp+No.size-za.pmax,(yn=za.pmin-za.pos-za.dp+za.size)>.01){for(dn=li.length-1;dn>=0;dn--)li[dn].dp+=yn;Pn=!1}if(!(on<.01)){if(yn<-.01){for(dn=li.length-1;dn>=0;dn--)li[dn].dp-=on;Pn=!1}if(Pn){var Na=0;for(nn=0;nn<li.length;nn++)(xn=li[nn]).pos+xn.dp+xn.size>za.pmax&&Na++;for(nn=li.length-1;nn>=0&&!(Na<=0);nn--)(xn=li[nn]).pos>za.pmax-1&&(xn.del=!0,Na--);for(nn=0;nn<li.length&&!(Na<=0);nn++)if((xn=li[nn]).pos<za.pmin+1)for(xn.del=!0,Na--,on=2*xn.size,dn=li.length-1;dn>=0;dn--)li[dn].dp-=on;for(nn=li.length-1;nn>=0&&!(Na<=0);nn--)(xn=li[nn]).pos+xn.dp+xn.size>za.pmax&&(xn.del=!0,Na--)}}}for(Zt.each(function(li){var za=li[Wn],No=li[Qn],Na="x"===za._id.charAt(0),js=za.range;0===br&&js&&js[0]>js[1]!==Na&&(yr=-1);var Ia=0,Qa=Na?Tn.width:Tn.height;if("x"===Tn.hovermode||"y"===Tn.hovermode){var ds,Cs,xl=U(li,un),Eo=li.anchor,$o="end"===Eo?-1:1;if("middle"===Eo)Cs=(ds=li.crossPos+(Na?Fr(xl.y-li.by/2):kr(li.bx/2+li.tx2width/2)))+(Na?Fr(li.by):kr(li.bx));else if(Na)Cs=(ds=li.crossPos+Fr(C+xl.y)-Fr(li.by/2-C))+Fr(li.by);else{var Es=kr($o*C+xl.x),Ei=Es+kr($o*li.bx);ds=li.crossPos+Math.min(Es,Ei),Cs=li.crossPos+Math.max(Es,Ei)}Na?void 0!==Ur&&void 0!==zr&&Math.min(Cs,zr)-Math.max(ds,Ur)>1&&("left"===No.side?(Ia=No._mainLinePosition,Qa=Tn.width):Qa=No._mainLinePosition):void 0!==pr&&void 0!==Lr&&Math.min(Cs,Lr)-Math.max(ds,pr)>1&&("top"===No.side?(Ia=No._mainLinePosition,Qa=Tn.height):Qa=No._mainLinePosition)}gr[br++]=[{datum:li,traceIndex:li.trace.index,dp:0,pos:li.pos,posref:li.posref,size:li.by*(Na?v:1)/2,pmin:Ia,pmax:Qa}]}),gr.sort(function(li,za){return li[0].posref-za[0].posref||yr*(za[0].traceIndex-li[0].traceIndex)});!Pn&&ar<=ur;){for(ar++,Pn=!0,nn=0;nn<gr.length-1;){var ai=gr[nn],Xi=gr[nn+1],da=ai[ai.length-1],Ba=Xi[0];if((yn=da.pos+da.dp+da.size-Ba.pos-Ba.dp+Ba.size)>.01&&da.pmin===Ba.pmin&&da.pmax===Ba.pmax){for(dn=Xi.length-1;dn>=0;dn--)Xi[dn].dp+=yn;for(ai.push.apply(ai,Xi),gr.splice(nn+1,1),Bn=0,dn=ai.length-1;dn>=0;dn--)Bn+=ai[dn].dp;for(on=Bn/ai.length,dn=ai.length-1;dn>=0;dn--)ai[dn].dp-=on;Pn=!1}else nn++}gr.forEach(Qr)}for(nn=gr.length-1;nn>=0;nn--){var ea=gr[nn];for(dn=ea.length-1;dn>=0;dn--){var Ea=ea[dn],so=Ea.datum;so.offset=Ea.dp,so.del=Ea.del}}}(In,fr,ce,cn.commonLabelBoundingBox),Z(In,fr,ce._invScaleX,ce._invScaleY)),_e&&_e.tagName){var Nt=h.getComponentMethod("annotations","hasClickToShow")(we,ir);r(S.select(_e),Nt?"pointer":"")}_e&&!ye&&function(Zt,un,Tn){if(!Tn||Tn.length!==Zt._hoverdata.length)return!0;for(var kn=Tn.length-1;kn>=0;kn--){var Pn=Tn[kn],yn=Zt._hoverdata[kn];if(Pn.curveNumber!==yn.curveNumber||String(Pn.pointNumber)!==String(yn.pointNumber)||String(Pn.pointNumbers)!==String(yn.pointNumbers))return!0}return!1}(we,0,Nn)&&(Nn&&we.emit("plotly_unhover",{event:Te,points:Nn}),we.emit("plotly_hover",{event:Te,points:we._hoverdata,xaxes:Ke,yaxes:it,xvals:lt,yvals:ot}))}(X,oe,fe,ue,ge)})},F.loneHover=function(X,oe){var fe=!0;Array.isArray(X)||(fe=!1,X=[X]);var ue=oe.gd,ge=ne(ue),we=Q(ue),Te=V(X.map(function(_e){var Ie=_e._x0||_e.x0||_e.x||0,De=_e._x1||_e.x1||_e.x||0,be=_e._y0||_e.y0||_e.y||0,he=_e._y1||_e.y1||_e.y||0,ce=_e.eventData;if(ce){var me=Math.min(Ie,De),Pe=Math.max(Ie,De),Ae=Math.min(be,he),Ce=Math.max(be,he),Oe=_e.trace;if(h.traceIs(Oe,"gl3d")){var Ne=ue._fullLayout[Oe.scene]._scene.container,je=Ne.offsetLeft,ve=Ne.offsetTop;me+=je,Pe+=je,Ae+=ve,Ce+=ve}ce.bbox={x0:me+we,x1:Pe+we,y0:Ae+ge,y1:Ce+ge},oe.inOut_bbox&&oe.inOut_bbox.push(ce.bbox)}else ce=!1;return{color:_e.color||a.defaultLine,x0:_e.x0||_e.x||0,x1:_e.x1||_e.x||0,y0:_e.y0||_e.y||0,y1:_e.y1||_e.y||0,xLabel:_e.xLabel,yLabel:_e.yLabel,zLabel:_e.zLabel,text:_e.text,name:_e.name,idealAlign:_e.idealAlign,borderColor:_e.borderColor,fontFamily:_e.fontFamily,fontSize:_e.fontSize,fontColor:_e.fontColor,fontWeight:_e.fontWeight,fontStyle:_e.fontStyle,fontVariant:_e.fontVariant,nameLength:_e.nameLength,textAlign:_e.textAlign,trace:_e.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:_e.hovertemplate||!1,hovertemplateLabels:_e.hovertemplateLabels||!1,eventData:ce}}),{gd:ue,hovermode:"closest",rotateLabels:!1,bgColor:oe.bgColor||a.background,container:S.select(oe.container),outerContainer:oe.outerContainer||oe.container}).hoverLabels,xe=0,ye=0;return Te.sort(function(_e,Ie){return _e.y0-Ie.y0}).each(function(_e,Ie){var De=_e.y0-_e.by/2;_e.offset=De-5<xe?xe-De+5:0,xe=De+_e.by+_e.offset,Ie===oe.anchorIndex&&(ye=_e.offset)}).each(function(_e){_e.offset-=ye}),Z(Te,!1,ue._fullLayout._invScaleX,ue._fullLayout._invScaleY),fe?Te:Te.node()};var z=/<extra>([\s\S]*)<\/extra>/;function V(X,oe){var fe=oe.gd,ue=fe._fullLayout,ge=oe.hovermode,we=oe.rotateLabels,Te=oe.bgColor,xe=oe.container,ye=oe.outerContainer,_e=oe.commonLabelOpts||{};if(0===X.length)return[[]];var Ie=oe.fontFamily||y.HOVERFONT,De=oe.fontSize||y.HOVERFONTSIZE,be=oe.fontWeight||ue.font.weight,he=oe.fontStyle||ue.font.style,ce=oe.fontVariant||ue.font.variant,me=oe.fontTextcase||ue.font.textcase,Pe=oe.fontLineposition||ue.font.lineposition,Ae=oe.fontShadow||ue.font.shadow,Ce=X[0],Oe=Ce.xa,Ne=Ce.ya,je=ge.charAt(0),ve=je+"Label",Me=Ce[ve];if(void 0===Me&&"multicategory"===Oe.type)for(var Le=0;Le<X.length&&void 0===(Me=X[Le][ve]);Le++);var Ue=$(fe,ye),ze=Ue.top,qe=Ue.width,Ke=Ue.height,it=void 0!==Me&&Ce.distance<=oe.hoverdistance&&("x"===ge||"y"===ge);if(it){var ft,dt,kt=!0;for(ft=0;ft<X.length;ft++)if(kt&&void 0===X[ft].zLabel&&(kt=!1),dt=X[ft].hoverinfo||X[ft].trace.hoverinfo){var St=Array.isArray(dt)?dt:dt.split("+");if(-1===St.indexOf("all")&&-1===St.indexOf(ge)){it=!1;break}}kt&&(it=!1)}var Tt=xe.selectAll("g.axistext").data(it?[0]:[]);Tt.enter().append("g").classed("axistext",!0),Tt.exit().remove();var lt={minX:0,maxX:0,minY:0,maxY:0};if(Tt.each(function(){var Kt=S.select(this),qn=T.ensureSingle(Kt,"path","",function(En){En.style({"stroke-width":"1px"})}),Fn=T.ensureSingle(Kt,"text","",function(En){En.attr("data-notex",1)}),Sn=_e.bgcolor||a.defaultLine,hn=_e.bordercolor||a.contrast(Sn),wn=a.contrast(Sn),pn=_e.font,An={weight:pn.weight||be,style:pn.style||he,variant:pn.variant||ce,textcase:pn.textcase||me,lineposition:pn.lineposition||Pe,shadow:pn.shadow||Ae,family:pn.family||Ie,size:pn.size||De,color:pn.color||wn};qn.style({fill:Sn,stroke:hn}),Fn.text(Me).call(n.font,An).call(i.positionText,0,0).call(i.convertToTspans,fe),Kt.attr("transform","");var On,Dn,Vn=$(fe,Fn.node());if("x"===ge){var Gn="top"===Oe.side?"-":"";Fn.attr("text-anchor","middle").call(i.positionText,0,"top"===Oe.side?ze-Vn.bottom-C-w:ze-Vn.top+C+w),Dn=Ne._offset+("top"===Oe.side?0:Ne._length);var Nn=Vn.width/2+w,ir=On=Oe._offset+(Ce.x0+Ce.x1)/2;On<Nn?ir=Nn:On>ue.width-Nn&&(ir=ue.width-Nn),qn.attr("d","M"+(On-ir)+",0L"+(On-ir+C)+","+Gn+C+"H"+Nn+"v"+Gn+(2*w+Vn.height)+"H"+-Nn+"V"+Gn+C+"H"+(On-ir-C)+"Z"),lt.minX=(On=ir)-Nn,lt.maxX=On+Nn,"top"===Oe.side?(lt.minY=Dn-(2*w+Vn.height),lt.maxY=Dn-w):(lt.minY=Dn+w,lt.maxY=Dn+(2*w+Vn.height))}else{var $n,mr,lr;"right"===Ne.side?($n="start",mr=1,lr="",On=Oe._offset+Oe._length):($n="end",mr=-1,lr="-",On=Oe._offset),Dn=Ne._offset+(Ce.y0+Ce.y1)/2,Fn.attr("text-anchor",$n),qn.attr("d","M0,0L"+lr+C+","+C+"V"+(w+Vn.height/2)+"h"+lr+(2*w+Vn.width)+"V-"+(w+Vn.height/2)+"H"+lr+C+"V-"+C+"Z"),lt.minY=Dn-(w+Vn.height/2),lt.maxY=Dn+(w+Vn.height/2),"right"===Ne.side?(lt.minX=On+C,lt.maxX=On+C+(2*w+Vn.width)):(lt.minX=On-C-(2*w+Vn.width),lt.maxX=On-C);var vr,or=Vn.height/2,Or=ze-Vn.top-or,fn="clip"+ue._uid+"commonlabel"+Ne._id;if(On<Vn.width+2*w+C){vr="M-"+(C+w)+"-"+or+"h-"+(Vn.width-w)+"V"+or+"h"+(Vn.width-w)+"Z";var gn=Vn.width-On+w;i.positionText(Fn,gn,Or),"end"===$n&&Fn.selectAll("tspan").each(function(){var En=S.select(this),Zn=n.tester.append("text").text(En.text()).call(n.font,An),Kn=$(fe,Zn.node());Math.round(Kn.width)<Math.round(Vn.width)&&En.attr("x",gn-Kn.width),Zn.remove()})}else i.positionText(Fn,mr*(w+C),Or),vr=null;var Hn=ue._topclips.selectAll("#"+fn).data(vr?[0]:[]);Hn.enter().append("clipPath").attr("id",fn).append("path"),Hn.exit().remove(),Hn.select("path").attr("d",vr),n.setClipUrl(Fn,vr?fn:null,fe)}Kt.attr("transform",p(On,Dn))}),u.isUnifiedHover(ge)){xe.selectAll("g.hovertext").remove();var ot=X.filter(function(Kt){return"none"!==Kt.hoverinfo});if(0===ot.length)return[];var Rt=ue.hoverlabel,Vt=Rt.font,zt={font:Vt};d({showlegend:!0,legend:{title:{text:Me,font:Vt},font:Vt,bgcolor:Rt.bgcolor,bordercolor:Rt.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:ue.legend?ue.legend.traceorder:void 0,orientation:"v"}},zt,fe._fullData);var Qe=zt.legend;Qe.entries=[];for(var nt=0;nt<ot.length;nt++){var We=ot[nt];if("none"!==We.hoverinfo){var et=R(We,!0,ge,ue,Me),gt=et[0],ht=et[1];We.name=ht,We.text=""!==ht?ht+" : "+gt:gt;var Ge=We.cd[We.index];Ge&&(Ge.mc&&(We.mc=Ge.mc),Ge.mcc&&(We.mc=Ge.mcc),Ge.mlc&&(We.mlc=Ge.mlc),Ge.mlcc&&(We.mlc=Ge.mlcc),Ge.mlw&&(We.mlw=Ge.mlw),Ge.mrc&&(We.mrc=Ge.mrc),Ge.dir&&(We.dir=Ge.dir)),We._distinct=!0,Qe.entries.push([We])}}Qe.entries.sort(function(Kt,qn){return Kt[0].trace.index-qn[0].trace.index}),Qe.layer=xe,Qe._inHover=!0,Qe._groupTitleFont=Rt.grouptitlefont,m(fe,Qe);var He,ut,tt,xt,At=xe.select("g.legend"),Mt=$(fe,At.node()),yt=Mt.width+2*w,Pt=Mt.height+2*w,Ct=ot[0],Dt=(Ct.x0+Ct.x1)/2,Ut=(Ct.y0+Ct.y1)/2,Bt=!(h.traceIs(Ct.trace,"bar-like")||h.traceIs(Ct.trace,"box-violin"));"y"===je?Bt?(ut=Ut-w,He=Ut+w):(ut=Math.min.apply(null,ot.map(function(Kt){return Math.min(Kt.y0,Kt.y1)})),He=Math.max.apply(null,ot.map(function(Kt){return Math.max(Kt.y0,Kt.y1)}))):ut=He=T.mean(ot.map(function(Kt){return(Kt.y0+Kt.y1)/2}))-Pt/2,"x"===je?Bt?(tt=Dt+w,xt=Dt-w):(tt=Math.max.apply(null,ot.map(function(Kt){return Math.max(Kt.x0,Kt.x1)})),xt=Math.min.apply(null,ot.map(function(Kt){return Math.min(Kt.x0,Kt.x1)}))):tt=xt=T.mean(ot.map(function(Kt){return(Kt.x0+Kt.x1)/2}))-yt/2;var qt,an,mn=Oe._offset,Qt=Ne._offset;return xt+=mn-yt,ut+=Qt-Pt,qt=(tt+=mn)+yt<qe&&tt>=0?tt:xt+yt<qe&&xt>=0?xt:mn+yt<qe?mn:tt-Dt<Dt-xt+yt?qe-yt:0,an=(He+=Qt)+Pt<Ke&&He>=0?He:ut+Pt<Ke&&ut>=0?ut:Qt+Pt<Ke?Qt:He-Ut<Ut-ut+Pt?Ke-Pt:0,At.attr("transform",p((qt+=w)-1,(an+=w)-1)),At}var sn=xe.selectAll("g.hovertext").data(X,function(Kt){return O(Kt)});return sn.enter().append("g").classed("hovertext",!0).each(function(){var Kt=S.select(this);Kt.append("rect").call(a.fill,a.addOpacity(Te,.8)),Kt.append("text").classed("name",!0),Kt.append("path").style("stroke-width","1px"),Kt.append("text").classed("nums",!0).call(n.font,{weight:be,style:he,variant:ce,textcase:me,lineposition:Pe,shadow:Ae,family:Ie,size:De})}),sn.exit().remove(),sn.each(function(Kt){var qn=S.select(this).attr("transform",""),Fn=Kt.color;Array.isArray(Fn)&&(Fn=Fn[Kt.eventData[0].pointNumber]);var Sn=Kt.bgcolor||Fn,hn=a.combine(a.opacity(Sn)?Sn:a.defaultLine,Te),wn=a.combine(a.opacity(Fn)?Fn:a.defaultLine,Te),pn=Kt.borderColor||a.contrast(hn),An=R(Kt,it,ge,ue,Me,qn),On=An[0],Dn=An[1],Vn=qn.select("text.nums").call(n.font,{family:Kt.fontFamily||Ie,size:Kt.fontSize||De,color:Kt.fontColor||pn,weight:Kt.fontWeight||be,style:Kt.fontStyle||he,variant:Kt.fontVariant||ce,textcase:Kt.fontTextcase||me,lineposition:Kt.fontLineposition||Pe,shadow:Kt.fontShadow||Ae}).text(On).attr("data-notex",1).call(i.positionText,0,0).call(i.convertToTspans,fe),Gn=qn.select("text.name"),Nn=0,ir=0;if(Dn&&Dn!==On){Gn.call(n.font,{family:Kt.fontFamily||Ie,size:Kt.fontSize||De,color:wn,weight:Kt.fontWeight||be,style:Kt.fontStyle||he,variant:Kt.fontVariant||ce,textcase:Kt.fontTextcase||me,lineposition:Kt.fontLineposition||Pe,shadow:Kt.fontShadow||Ae}).text(Dn).attr("data-notex",1).call(i.positionText,0,0).call(i.convertToTspans,fe);var $n=$(fe,Gn.node());Nn=$n.width+2*w,ir=$n.height+2*w}else Gn.remove(),qn.select("rect").remove();qn.select("path").style({fill:hn,stroke:pn});var mr=Kt.xa._offset+(Kt.x0+Kt.x1)/2,lr=Kt.ya._offset+(Kt.y0+Kt.y1)/2,vr=Math.abs(Kt.x1-Kt.x0),or=Math.abs(Kt.y1-Kt.y0),Or=$(fe,Vn.node()),fn=Or.width/ue._invScaleX,gn=Or.height/ue._invScaleY;Kt.ty0=(ze-Or.top)/ue._invScaleY,Kt.bx=fn+2*w,Kt.by=Math.max(gn+2*w,ir),Kt.anchor="start",Kt.txwidth=fn,Kt.tx2width=Nn,Kt.offset=0;var Hn,En,Zn=(fn+C+w+Nn)*ue._invScaleX;if(we)Kt.pos=mr,Hn=lr+or/2+Zn<=Ke,En=lr-or/2-Zn>=0,"top"!==Kt.idealAlign&&Hn||!En?Hn?(lr+=or/2,Kt.anchor="start"):Kt.anchor="middle":(lr-=or/2,Kt.anchor="end"),Kt.crossPos=lr;else{if(Kt.pos=lr,Hn=mr+vr/2+Zn<=qe,En=mr-vr/2-Zn>=0,"left"!==Kt.idealAlign&&Hn||!En)if(Hn)mr+=vr/2,Kt.anchor="start";else{Kt.anchor="middle";var Kn=Zn/2,tr=mr+Kn-qe,fr=mr-Kn;tr>0&&(mr-=tr),fr<0&&(mr+=-fr)}else mr-=vr/2,Kt.anchor="end";Kt.crossPos=mr}Vn.attr("text-anchor",Kt.anchor),Nn&&Gn.attr("text-anchor",Kt.anchor),qn.attr("transform",p(mr,lr)+(we?l(g):""))}),{hoverLabels:sn,commonLabelBoundingBox:lt}}function R(X,oe,fe,ue,ge,we){var Te="",xe="";void 0!==X.nameOverride&&(X.name=X.nameOverride),X.name&&(X.trace._meta&&(X.name=T.templateString(X.name,X.trace._meta)),Te=ae(X.name,X.nameLength));var ye=fe.charAt(0);void 0!==X.zLabel?(void 0!==X.xLabel&&(xe+="x: "+X.xLabel+"<br>"),void 0!==X.yLabel&&(xe+="y: "+X.yLabel+"<br>"),"choropleth"!==X.trace.type&&"choroplethmapbox"!==X.trace.type&&(xe+=(xe?"z: ":"")+X.zLabel)):oe&&X[ye+"Label"]===ge?xe=X[("x"===ye?"y":"x")+"Label"]||"":void 0===X.xLabel?void 0!==X.yLabel&&"scattercarpet"!==X.trace.type&&(xe=X.yLabel):xe=void 0===X.yLabel?X.xLabel:"("+X.xLabel+", "+X.yLabel+")",!X.text&&0!==X.text||Array.isArray(X.text)||(xe+=(xe?"<br>":"")+X.text),void 0!==X.extraText&&(xe+=(xe?"<br>":"")+X.extraText),we&&""===xe&&!X.hovertemplate&&(""===Te&&we.remove(),xe=Te);var Ie=X.hovertemplate||!1;if(Ie){var De=X.hovertemplateLabels||X;X[ye+"Label"]!==ge&&(De[ye+"other"]=De[ye+"Val"],De[ye+"otherLabel"]=De[ye+"Label"]),xe=(xe=T.hovertemplateString(Ie,De,ue._d3locale,X.eventData[0]||{},X.trace._meta)).replace(z,function(be,he){return Te=ae(he,X.nameLength),""})}return[xe,Te]}function U(X,oe){var fe=0,ue=X.offset;return oe&&(ue*=-f,fe=X.offset*_),{x:fe,y:ue}}function Z(X,oe,fe,ue){var ge=function(Te){return Te*fe},we=function(Te){return Te*ue};X.each(function(Te){var xe=S.select(this);if(Te.del)return xe.remove();var ye,_e,Ie,De,be=xe.select("text.nums"),he=Te.anchor,ce="end"===he?-1:1,me=(De=(Ie=(_e={start:1,end:-1,middle:0}[(ye=Te).anchor])*(C+w))+_e*(ye.txwidth+w),"middle"===ye.anchor&&(Ie-=ye.tx2width/2,De+=ye.txwidth/2+w),{alignShift:_e,textShiftX:Ie,text2ShiftX:De}),Pe=U(Te,oe),Ae=Pe.x,Ce=Pe.y,Oe="middle"===he;xe.select("path").attr("d",Oe?"M-"+ge(Te.bx/2+Te.tx2width/2)+","+we(Ce-Te.by/2)+"h"+ge(Te.bx)+"v"+we(Te.by)+"h-"+ge(Te.bx)+"Z":"M0,0L"+ge(ce*C+Ae)+","+we(C+Ce)+"v"+we(Te.by/2-C)+"h"+ge(ce*Te.bx)+"v-"+we(Te.by)+"H"+ge(ce*C+Ae)+"V"+we(Ce-C)+"Z");var Ne=Ae+me.textShiftX,je=Ce+Te.ty0-Te.by/2+w,ve=Te.textAlign||"auto";"auto"!==ve&&("left"===ve&&"start"!==he?(be.attr("text-anchor","start"),Ne=Oe?-Te.bx/2-Te.tx2width/2+w:-Te.bx-w):"right"===ve&&"end"!==he&&(be.attr("text-anchor","end"),Ne=Oe?Te.bx/2-Te.tx2width/2-w:Te.bx+w)),be.call(i.positionText,ge(Ne),we(je)),Te.tx2width&&(xe.select("text.name").call(i.positionText,ge(me.text2ShiftX+me.alignShift*w+Ae),we(Ce+Te.ty0-Te.by/2+w)),xe.select("rect").call(n.setRect,ge(me.text2ShiftX+(me.alignShift-1)*Te.tx2width/2+Ae),we(Ce-Te.by/2-1),ge(Te.tx2width),we(Te.by+2)))})}function N(X,oe){var fe=X.index,ue=X.trace||{},ge=X.cd[0],we=X.cd[fe]||{};function Te(be){return be||k(be)&&0===be}var xe=Array.isArray(fe)?function(be,he){var ce=T.castOption(ge,fe,be);return Te(ce)?ce:T.extractOption({},ue,"",he)}:function(be,he){return T.extractOption(we,ue,be,he)};function ye(be,he,ce){var me=xe(he,ce);Te(me)&&(X[be]=me)}if(ye("hoverinfo","hi","hoverinfo"),ye("bgcolor","hbg","hoverlabel.bgcolor"),ye("borderColor","hbc","hoverlabel.bordercolor"),ye("fontFamily","htf","hoverlabel.font.family"),ye("fontSize","hts","hoverlabel.font.size"),ye("fontColor","htc","hoverlabel.font.color"),ye("fontWeight","htw","hoverlabel.font.weight"),ye("fontStyle","hty","hoverlabel.font.style"),ye("fontVariant","htv","hoverlabel.font.variant"),ye("nameLength","hnl","hoverlabel.namelength"),ye("textAlign","hta","hoverlabel.align"),X.posref="y"===oe||"closest"===oe&&"h"===ue.orientation?X.xa._offset+(X.x0+X.x1)/2:X.ya._offset+(X.y0+X.y1)/2,X.x0=T.constrain(X.x0,0,X.xa._length),X.x1=T.constrain(X.x1,0,X.xa._length),X.y0=T.constrain(X.y0,0,X.ya._length),X.y1=T.constrain(X.y1,0,X.ya._length),void 0!==X.xLabelVal&&(X.xLabel="xLabel"in X?X.xLabel:c.hoverLabelText(X.xa,X.xLabelVal,ue.xhoverformat),X.xVal=X.xa.c2d(X.xLabelVal)),void 0!==X.yLabelVal&&(X.yLabel="yLabel"in X?X.yLabel:c.hoverLabelText(X.ya,X.yLabelVal,ue.yhoverformat),X.yVal=X.ya.c2d(X.yLabelVal)),void 0!==X.zLabelVal&&void 0===X.zLabel&&(X.zLabel=String(X.zLabelVal)),!(isNaN(X.xerr)||"log"===X.xa.type&&X.xerr<=0)){var _e=c.tickText(X.xa,X.xa.c2l(X.xerr),"hover").text;X.xLabel+=void 0!==X.xerrneg?" +"+_e+" / -"+c.tickText(X.xa,X.xa.c2l(X.xerrneg),"hover").text:" \xb1 "+_e,"x"===oe&&(X.distance+=1)}if(!(isNaN(X.yerr)||"log"===X.ya.type&&X.yerr<=0)){var Ie=c.tickText(X.ya,X.ya.c2l(X.yerr),"hover").text;X.yLabel+=void 0!==X.yerrneg?" +"+Ie+" / -"+c.tickText(X.ya,X.ya.c2l(X.yerrneg),"hover").text:" \xb1 "+Ie,"y"===oe&&(X.distance+=1)}var De=X.hoverinfo||X.trace.hoverinfo;return De&&"all"!==De&&(-1===(De=Array.isArray(De)?De:De.split("+")).indexOf("x")&&(X.xLabel=void 0),-1===De.indexOf("y")&&(X.yLabel=void 0),-1===De.indexOf("z")&&(X.zLabel=void 0),-1===De.indexOf("text")&&(X.text=void 0),-1===De.indexOf("name")&&(X.name=void 0)),X}function G(X,oe,fe){var ue,ge,we=fe.container,Te=fe.fullLayout,xe=Te._size,ye=fe.event,_e=!!oe.hLinePoint,Ie=!!oe.vLinePoint;if(we.selectAll(".spikeline").remove(),Ie||_e){var De=a.combine(Te.plot_bgcolor,Te.paper_bgcolor);if(_e){var be,he,ce=oe.hLinePoint;ue=ce&&ce.xa,"cursor"===(ge=ce&&ce.ya).spikesnap?(be=ye.pointerX,he=ye.pointerY):(be=ue._offset+ce.x,he=ge._offset+ce.y);var me,Pe,Ae=o.readability(ce.color,De)<1.5?a.contrast(De):ce.color,Ce=ge.spikemode,Oe=ge.spikethickness,Ne=ge.spikecolor||Ae,je=c.getPxPosition(X,ge);if(-1!==Ce.indexOf("toaxis")||-1!==Ce.indexOf("across")){if(-1!==Ce.indexOf("toaxis")&&(me=je,Pe=be),-1!==Ce.indexOf("across")){var ve=ge._counterDomainMin,Me=ge._counterDomainMax;"free"===ge.anchor&&(ve=Math.min(ve,ge.position),Me=Math.max(Me,ge.position)),me=xe.l+ve*xe.w,Pe=xe.l+Me*xe.w}we.insert("line",":first-child").attr({x1:me,x2:Pe,y1:he,y2:he,"stroke-width":Oe,stroke:Ne,"stroke-dasharray":n.dashStyle(ge.spikedash,Oe)}).classed("spikeline",!0).classed("crisp",!0),we.insert("line",":first-child").attr({x1:me,x2:Pe,y1:he,y2:he,"stroke-width":Oe+2,stroke:De}).classed("spikeline",!0).classed("crisp",!0)}-1!==Ce.indexOf("marker")&&we.insert("circle",":first-child").attr({cx:je+("right"!==ge.side?Oe:-Oe),cy:he,r:Oe,fill:Ne}).classed("spikeline",!0)}if(Ie){var Le,Ue,ze=oe.vLinePoint;ge=ze&&ze.ya,"cursor"===(ue=ze&&ze.xa).spikesnap?(Le=ye.pointerX,Ue=ye.pointerY):(Le=ue._offset+ze.x,Ue=ge._offset+ze.y);var qe,Ke,it=o.readability(ze.color,De)<1.5?a.contrast(De):ze.color,ft=ue.spikemode,dt=ue.spikethickness,kt=ue.spikecolor||it,St=c.getPxPosition(X,ue);if(-1!==ft.indexOf("toaxis")||-1!==ft.indexOf("across")){if(-1!==ft.indexOf("toaxis")&&(qe=St,Ke=Ue),-1!==ft.indexOf("across")){var Tt=ue._counterDomainMin,lt=ue._counterDomainMax;"free"===ue.anchor&&(Tt=Math.min(Tt,ue.position),lt=Math.max(lt,ue.position)),qe=xe.t+(1-lt)*xe.h,Ke=xe.t+(1-Tt)*xe.h}we.insert("line",":first-child").attr({x1:Le,x2:Le,y1:qe,y2:Ke,"stroke-width":dt,stroke:kt,"stroke-dasharray":n.dashStyle(ue.spikedash,dt)}).classed("spikeline",!0).classed("crisp",!0),we.insert("line",":first-child").attr({x1:Le,x2:Le,y1:qe,y2:Ke,"stroke-width":dt+2,stroke:De}).classed("spikeline",!0).classed("crisp",!0)}-1!==ft.indexOf("marker")&&we.insert("circle",":first-child").attr({cx:Le,cy:St-("top"!==ue.side?dt:-dt),r:dt,fill:kt}).classed("spikeline",!0)}}}function W(X,oe){return!oe||oe.vLinePoint!==X._spikepoints.vLinePoint||oe.hLinePoint!==X._spikepoints.hLinePoint}function ae(X,oe){return i.plainText(X||"",{len:oe,allowedTags:["br","sub","sup","b","i","em"]})}function re(X,oe,fe){var ue=oe[X+"a"],ge=oe[X+"Val"],we=oe.cd[0];if("category"===ue.type||"multicategory"===ue.type)ge=ue._categoriesMap[ge];else if("date"===ue.type){var Te=oe.trace[X+"periodalignment"];if(Te){var xe=oe.cd[oe.index],ye=xe[X+"Start"];void 0===ye&&(ye=xe[X]);var _e=xe[X+"End"];void 0===_e&&(_e=xe[X]);var Ie=_e-ye;"end"===Te?ge+=Ie:"middle"===Te&&(ge+=Ie/2)}ge=ue.d2c(ge)}return we&&we.t&&we.t.posLetter===ue._id&&("group"!==fe.boxmode&&"group"!==fe.violinmode||(ge+=we.t.dPos)),ge}function ne(X){return X.offsetTop+X.clientTop}function Q(X){return X.offsetLeft+X.clientLeft}function $(X,oe){var fe=X._fullLayout,ue=oe.getBoundingClientRect(),ge=ue.left,we=ue.top,Te=ge+ue.width,xe=we+ue.height,ye=T.apply3DTransform(fe._invTransform)(ge,we),_e=T.apply3DTransform(fe._invTransform)(Te,xe),Ie=ye[0],De=ye[1],be=_e[0],he=_e[1];return{x:Ie,y:De,width:be-Ie,height:he-De,top:Math.min(De,he),left:Math.min(Ie,be),right:Math.max(Ie,be),bottom:Math.max(De,he)}}},16132:function(ie,F,e){"use strict";var S=e(3400),k=e(76308),o=e(10624).isUnifiedHover;ie.exports=function(T,b,p,l){l=l||{};var t=b.legend;function i(r){l.font[r]||(l.font[r]=t?b.legend.font[r]:b.font[r])}b&&o(b.hovermode)&&(l.font||(l.font={}),i("size"),i("family"),i("color"),i("weight"),i("style"),i("variant"),t?(l.bgcolor||(l.bgcolor=k.combine(b.legend.bgcolor,b.paper_bgcolor)),l.bordercolor||(l.bordercolor=b.legend.bordercolor)):l.bgcolor||(l.bgcolor=b.paper_bgcolor)),p("hoverlabel.bgcolor",l.bgcolor),p("hoverlabel.bordercolor",l.bordercolor),p("hoverlabel.namelength",l.namelength),S.coerceFont(p,"hoverlabel.font",l.font),p("hoverlabel.align",l.align)}},41008:function(ie,F,e){"use strict";var S=e(3400),k=e(65460);ie.exports=function(o,T){function b(p,l){return void 0!==T[p]?T[p]:S.coerce(o,T,k,p,l)}return b("clickmode"),b("hoversubplots"),b("hovermode")}},93024:function(ie,F,e){"use strict";var S=e(33428),k=e(3400),o=e(86476),T=e(10624),b=e(65460),p=e(83292);ie.exports={moduleType:"component",name:"fx",constants:e(92456),schema:{layout:b},attributes:e(55756),layoutAttributes:b,supplyLayoutGlobalDefaults:e(81976),supplyDefaults:e(95448),supplyLayoutDefaults:e(88336),calc:e(55056),getDistanceFunction:T.getDistanceFunction,getClosest:T.getClosest,inbox:T.inbox,quadrature:T.quadrature,appendArrayPointValue:T.appendArrayPointValue,castHoverOption:function(l,t,i){return k.castOption(l,t,"hoverlabel."+i)},castHoverinfo:function(l,t,i){return k.castOption(l,i,"hoverinfo",function(r){return k.coerceHoverinfo({hoverinfo:r},{_module:l._module},t)})},hover:p.hover,unhover:o.unhover,loneHover:p.loneHover,loneUnhover:function(l){var t=k.isD3Selection(l)?l:S.select(l);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()},click:e(62376)}},65460:function(ie,F,e){"use strict";var S=e(92456),k=e(25376),o=k({editType:"none"});o.family.dflt=S.HOVERFONT,o.size.dflt=S.HOVERFONTSIZE,ie.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoversubplots:{valType:"enumerated",values:["single","overlaying","axis"],dflt:"overlaying",editType:"none"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:o,grouptitlefont:k({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},88336:function(ie,F,e){"use strict";var S=e(3400),k=e(65460),o=e(41008),T=e(16132);ie.exports=function(b,p){function l(n,a){return S.coerce(b,p,k,n,a)}o(b,p)&&(l("hoverdistance"),l("spikedistance")),"select"===l("dragmode")&&l("selectdirection");var t=p._has("mapbox"),i=p._has("geo"),r=p._basePlotModules.length;"zoom"===p.dragmode&&((t||i)&&1===r||t&&i&&2===r)&&(p.dragmode="pan"),T(b,p,l),S.coerceFont(l,"hoverlabel.grouptitlefont",p.hoverlabel.font)}},81976:function(ie,F,e){"use strict";var S=e(3400),k=e(16132),o=e(65460);ie.exports=function(T,b){k(T,b,function(p,l){return S.coerce(T,b,o,p,l)})}},12704:function(ie,F,e){"use strict";var S=e(3400),k=e(53756).counter,o=e(86968).u,T=e(33816).idRegex,b=e(31780),p={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[k("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:o({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function l(r,n,a){var s=n[a+"axes"],c=Object.keys((r._splomAxes||{})[a]||{});return Array.isArray(s)?s:c.length?c:void 0}function t(r,n,a,s,c,h){var u=n(r+"gap",a),y=n("domain."+r);n(r+"side",s);for(var d=new Array(c),m=y[0],g=(y[1]-m)/(c-u),x=g*(1-u),v=0;v<c;v++){var _=m+g*v;d[h?c-1-v:v]=[_,_+x]}return d}function i(r,n,a,s,c){var h,u=new Array(a);function y(d,m){-1!==n.indexOf(m)&&void 0===s[m]?(u[d]=m,s[m]=d):u[d]=""}if(Array.isArray(r))for(h=0;h<a;h++)y(h,r[h]);else for(y(0,c),h=1;h<a;h++)y(h,c+(h+1));return u}ie.exports={moduleType:"component",name:"grid",schema:{layout:{grid:p}},layoutAttributes:p,sizeDefaults:function(r,n){var a=r.grid||{},s=l(n,a,"x"),c=l(n,a,"y");if(r.grid||s||c){var h,u,y=Array.isArray(a.subplots)&&Array.isArray(a.subplots[0]),d=Array.isArray(s),m=Array.isArray(c),g=d&&s!==a.xaxes&&m&&c!==a.yaxes;y?(h=a.subplots.length,u=a.subplots[0].length):(m&&(h=c.length),d&&(u=s.length));var x=b.newContainer(n,"grid"),v=L("rows",h),_=L("columns",u);if(v*_>1){y||d||m||"independent"===L("pattern")&&(y=!0),x._hasSubplotGrid=y;var f,C,w="top to bottom"===L("roworder"),P=y?.3:.1;g&&n._splomGridDflt&&(f=n._splomGridDflt.xside,C=n._splomGridDflt.yside),x._domains={x:t("x",L,y?.2:.1,f,_),y:t("y",L,P,C,v,w)}}else delete n.grid}function L(O,z){return S.coerce(a,x,p,O,z)}},contentDefaults:function(r,n){var a=n.grid;if(a&&a._domains){var s,c,h,u,y,d,m,g=r.grid||{},x=n._subplots,v=a._hasSubplotGrid,_=a.rows,f=a.columns,C="independent"===a.pattern,w=a._axisMap={};if(v){var E=g.subplots||[];d=a.subplots=new Array(_);var P=1;for(s=0;s<_;s++){var L=d[s]=new Array(f),O=E[s]||[];for(c=0;c<f;c++)if(C?(y=1===P?"xy":"x"+P+"y"+P,P++):y=O[c],L[c]="",-1!==x.cartesian.indexOf(y)){if(m=y.indexOf("y"),h=y.slice(0,m),u=y.slice(m),void 0!==w[h]&&w[h]!==c||void 0!==w[u]&&w[u]!==s)continue;L[c]=y,w[h]=c,w[u]=s}}}else{var z=l(n,g,"x"),V=l(n,g,"y");a.xaxes=i(z,x.xaxis,f,w,"x"),a.yaxes=i(V,x.yaxis,_,w,"y")}var R=a._anchors={},U="top to bottom"===a.roworder;for(var Z in w){var N,G,W,ae=Z.charAt(0),re=a[ae+"side"];if(re.length<8)R[Z]="free";else if("x"===ae){if("t"===re.charAt(0)===U?(N=0,G=1,W=_):(N=_-1,G=-1,W=-1),v){var ne=w[Z];for(s=N;s!==W;s+=G)if((y=d[s][ne])&&(m=y.indexOf("y"),y.slice(0,m)===Z)){R[Z]=y.slice(m);break}}else for(s=N;s!==W;s+=G)if(-1!==x.cartesian.indexOf(Z+(u=a.yaxes[s]))){R[Z]=u;break}}else if("l"===re.charAt(0)?(N=0,G=1,W=f):(N=f-1,G=-1,W=-1),v){var Q=w[Z];for(s=N;s!==W;s+=G)if((y=d[Q][s])&&(m=y.indexOf("y"),y.slice(m)===Z)){R[Z]=y.slice(0,m);break}}else for(s=N;s!==W;s+=G)if(-1!==x.cartesian.indexOf((h=a.xaxes[s])+Z)){R[Z]=h;break}}}}}},65760:function(ie,F,e){"use strict";var S=e(33816),k=e(31780).templatedArray;e(36208),ie.exports=k("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",S.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",S.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},63556:function(ie,F,e){"use strict";var S=e(38248),k=e(36896);ie.exports=function(o,T,b,p){T=T||{};var l="log"===b&&"linear"===T.type;if(l||"linear"===b&&"log"===T.type)for(var i,r,n=o._fullLayout.images,a=T._id.charAt(0),s=0;s<n.length;s++)if(r="images["+s+"].",(i=n[s])[a+"ref"]===T._id){var c=i[a],h=i["size"+a],u=null,y=null;if(l){u=k(c,T.range);var d=h/Math.pow(10,u)/2;y=2*Math.log(d+Math.sqrt(1+d*d))/Math.LN10}else y=(u=Math.pow(10,c))*(Math.pow(10,h/2)-Math.pow(10,-h/2));S(u)?S(y)||(y=null):(u=null,y=null),p(r+a,u),p(r+"size"+a,y)}}},25024:function(ie,F,e){"use strict";var S=e(3400),k=e(54460),o=e(51272),T=e(65760);function b(p,l,t){function i(u,y){return S.coerce(p,l,T,u,y)}var r=i("source");if(!i("visible",!!r))return l;i("layer"),i("xanchor"),i("yanchor"),i("sizex"),i("sizey"),i("sizing"),i("opacity");for(var n={_fullLayout:t},a=["x","y"],s=0;s<2;s++){var c=a[s],h=k.coerceRef(p,l,n,c,"paper",void 0);"paper"!==h&&k.getFromId(n,h)._imgIndices.push(l._index),k.coercePosition(l,n,i,h,c,0)}return l}ie.exports=function(p,l){o(p,l,{name:"images",handleItemDefaults:b})}},60963:function(ie,F,e){"use strict";var S=e(33428),k=e(43616),o=e(54460),T=e(79811),b=e(9616);ie.exports=function(p){var l,t,i=p._fullLayout,r=[],n={},a=[];for(t=0;t<i.images.length;t++){var s=i.images[t];if(s.visible)if("below"===s.layer&&"paper"!==s.xref&&"paper"!==s.yref){l=T.ref2id(s.xref)+T.ref2id(s.yref);var c=i._plots[l];if(!c){a.push(s);continue}c.mainplot&&(l=c.mainplot.id),n[l]||(n[l]=[]),n[l].push(s)}else"above"===s.layer?r.push(s):a.push(s)}var h={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},u={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function y(f){var C=S.select(this);if(this._imgSrc!==f.source)if(C.attr("xmlns",b.svg),f.source&&"data:"===f.source.slice(0,5))C.attr("xlink:href",f.source),this._imgSrc=f.source;else{var w=new Promise(function(E){var P=new Image;function L(){C.remove(),E()}this.img=P,P.setAttribute("crossOrigin","anonymous"),P.onerror=L,P.onload=function(){var O=document.createElement("canvas");O.width=this.width,O.height=this.height,O.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var z=O.toDataURL("image/png");C.attr("xlink:href",z),E()},C.on("error",L),P.src=f.source,this._imgSrc=f.source}.bind(this));p._promises.push(w)}}function d(f){var C,w,E=S.select(this),P=o.getFromId(p,f.xref),L=o.getFromId(p,f.yref),O="domain"===o.getRefType(f.xref),z="domain"===o.getRefType(f.yref),V=i._size;C=void 0!==P?"string"==typeof f.xref&&O?P._length*f.sizex:Math.abs(P.l2p(f.sizex)-P.l2p(0)):f.sizex*V.w,w=void 0!==L?"string"==typeof f.yref&&z?L._length*f.sizey:Math.abs(L.l2p(f.sizey)-L.l2p(0)):f.sizey*V.h;var R,U,Z=C*h[f.xanchor].offset,N=w*u[f.yanchor].offset,G=h[f.xanchor].sizing+u[f.yanchor].sizing;switch(R=void 0!==P?"string"==typeof f.xref&&O?P._length*f.x+P._offset:P.r2p(f.x)+P._offset:f.x*V.w+V.l,R+=Z,U=void 0!==L?"string"==typeof f.yref&&z?L._length*(1-f.y)+L._offset:L.r2p(f.y)+L._offset:V.h-f.y*V.h+V.t,U+=N,f.sizing){case"fill":G+=" slice";break;case"stretch":G="none"}E.attr({x:R,y:U,width:C,height:w,preserveAspectRatio:G,opacity:f.opacity});var W=(P&&"domain"!==o.getRefType(f.xref)?P._id:"")+(L&&"domain"!==o.getRefType(f.yref)?L._id:"");k.setClipUrl(E,W?"clip"+i._uid+W:null,p)}var m=i._imageLowerLayer.selectAll("image").data(a),g=i._imageUpperLayer.selectAll("image").data(r);m.enter().append("image"),g.enter().append("image"),m.exit().remove(),g.exit().remove(),m.each(function(f){y.bind(this)(f),d.bind(this)(f)}),g.each(function(f){y.bind(this)(f),d.bind(this)(f)});var x=Object.keys(i._plots);for(t=0;t<x.length;t++){var v=i._plots[l=x[t]];if(v.imagelayer){var _=v.imagelayer.selectAll("image").data(n[l]||[]);_.enter().append("image"),_.exit().remove(),_.each(function(f){y.bind(this)(f),d.bind(this)(f)})}}}},7402:function(ie,F,e){"use strict";ie.exports={moduleType:"component",name:"images",layoutAttributes:e(65760),supplyLayoutDefaults:e(25024),includeBasePlot:e(36632)("images"),draw:e(60963),convertCoords:e(63556)}},3800:function(ie,F,e){"use strict";var S=e(25376),k=e(22548);ie.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:S({editType:"legend"}),grouptitlefont:S({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},indentation:{valType:"number",min:-15,dflt:0,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:S({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}},65196:function(ie){"use strict";ie.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},77864:function(ie,F,e){"use strict";var S=e(24040),k=e(3400),o=e(31780),T=e(45464),b=e(3800),p=e(64859),l=e(42451);function t(i,r,n,a){var s=r[i]||{},c=o.newContainer(n,i);function h(G,W){return k.coerce(s,c,b,G,W)}var u=k.coerceFont(h,"font",n.font);if(h("bgcolor",n.paper_bgcolor),h("bordercolor"),h("visible")){for(var y,d=function(G,W){return k.coerce(y._input,y,T,G,W)},m=n.font||{},g=k.coerceFont(h,"grouptitlefont",m,{overrideDflt:{size:Math.round(1.1*m.size)}}),x=0,v=!1,_="normal",f=(n.shapes||[]).filter(function(G){return G.showlegend}),C=a.concat(f).filter(function(G){return i===(G.legend||"legend")}),w=0;w<C.length;w++)if((y=C[w]).visible){var E=y._isShape;(y.showlegend||y._dfltShowLegend&&!(y._module&&y._module.attributes&&y._module.attributes.showlegend&&!1===y._module.attributes.showlegend.dflt))&&(x++,y.showlegend&&(v=!0,(!E&&S.traceIs(y,"pie-like")||!0===y._input.showlegend)&&x++),k.coerceFont(d,"legendgrouptitle.font",g)),(!E&&S.traceIs(y,"bar")&&"stack"===n.barmode||-1!==["tonextx","tonexty"].indexOf(y.fill))&&(_=l.isGrouped({traceorder:_})?"grouped+reversed":"reversed"),void 0!==y.legendgroup&&""!==y.legendgroup&&(_=l.isReversed({traceorder:_})?"reversed+grouped":"grouped")}var P=k.coerce(r,n,p,"showlegend",v&&x>("legend"===i?1:0));if(!1===P&&(n[i]=void 0),(!1!==P||s.uirevision)&&(h("uirevision",n.uirevision),!1!==P)){h("borderwidth");var L,O,z,V="h"===h("orientation"),R="paper"===h("yref"),U="paper"===h("xref"),Z="left";if(V?(L=0,S.getComponentMethod("rangeslider","isVisible")(r.xaxis)?R?(O=1.1,z="bottom"):(O=1,z="top"):R?(O=-.1,z="top"):(O=0,z="bottom")):(O=1,z="auto",U?L=1.02:(L=1,Z="right")),k.coerce(s,c,{x:{valType:"number",editType:"legend",min:U?-2:0,max:U?3:1,dflt:L}},"x"),k.coerce(s,c,{y:{valType:"number",editType:"legend",min:R?-2:0,max:R?3:1,dflt:O}},"y"),h("traceorder",_),l.isGrouped(n[i])&&h("tracegroupgap"),h("entrywidth"),h("entrywidthmode"),h("indentation"),h("itemsizing"),h("itemwidth"),h("itemclick"),h("itemdoubleclick"),h("groupclick"),h("xanchor",Z),h("yanchor",z),h("valign"),k.noneOrAll(s,c,["x","y"]),h("title.text")){h("title.side",V?"left":"top");var N=k.extendFlat({},u,{size:k.bigFont(u.size)});k.coerceFont(h,"title.font",N)}}}}ie.exports=function(i,r,n){var a,s=n.slice(),c=r.shapes;if(c)for(a=0;a<c.length;a++){var h=c[a];h.showlegend&&s.push({_input:h._input,visible:h.visible,showlegend:h.showlegend,legend:h.legend})}var y=["legend"];for(a=0;a<s.length;a++)k.pushUnique(y,s[a].legend);for(r._legends=[],a=0;a<y.length;a++){var d=y[a];t(d,i,r,s),r[d]&&r[d].visible&&(r[d]._id=d),r._legends.push(d)}}},31140:function(ie,F,e){"use strict";var S=e(33428),k=e(3400),o=e(7316),T=e(24040),b=e(95924),p=e(86476),l=e(43616),t=e(76308),i=e(72736),r=e(33048),n=e(65196),a=e(84284),s=a.LINE_SPACING,c=a.FROM_TL,h=a.FROM_BR,u=e(35456),y=e(2012),d=e(42451),m=1,g=/^legend[0-9]*$/;function x(z,V){var R,U,Z=V||{},N=z._fullLayout,G=O(Z),W=Z._inHover;if(W?(U=Z.layer,R="hover"):(U=N._infolayer,R=G),U){var ae;if(R+=N._uid,z._legendMouseDownTime||(z._legendMouseDownTime=0),W){if(!Z.entries)return;ae=u(Z.entries,Z)}else{for(var re=(z.calcdata||[]).slice(),ne=N.shapes,Q=0;Q<ne.length;Q++){var $=ne[Q];$.showlegend&&re.push([{trace:{_isShape:!0,_fullInput:$,index:$._index,name:$.name||$.label.text||"shape "+$._index,legend:$.legend,legendgroup:$.legendgroup,legendgrouptitle:$.legendgrouptitle,legendrank:$.legendrank,legendwidth:$.legendwidth,showlegend:$.showlegend,visible:$.visible,opacity:$.opacity,mode:"line"===$.type?"lines":"markers",line:$.line,marker:{line:$.line,color:$.fillcolor,size:12,symbol:"rect"===$.type?"square":"circle"===$.type?"circle":"hexagon2"}}}])}ae=N.showlegend&&u(re,Z,N._legends.length>1)}var oe=N.hiddenlabels||[];if(!(W||N.showlegend&&ae.length))return U.selectAll("."+G).remove(),N._topdefs.select("#"+R).remove(),o.autoMargin(z,G);var fe=k.ensureSingle(U,"g",G,function(De){W||De.attr("pointer-events","all")}),ue=k.ensureSingleById(N._topdefs,"clipPath",R,function(De){De.append("rect")}),ge=k.ensureSingle(fe,"rect","bg",function(De){De.attr("shape-rendering","crispEdges")});ge.call(t.stroke,Z.bordercolor).call(t.fill,Z.bgcolor).style("stroke-width",Z.borderwidth+"px");var we,Te=k.ensureSingle(fe,"g","scrollbox"),xe=Z.title;Z._titleWidth=0,Z._titleHeight=0,xe.text?((we=k.ensureSingle(Te,"text",G+"titletext")).attr("text-anchor","start").call(l.font,xe.font).text(xe.text),E(we,Te,z,Z,m)):Te.selectAll("."+G+"titletext").remove();var ye=k.ensureSingle(fe,"rect","scrollbar",function(De){De.attr(n.scrollBarEnterAttrs).call(t.fill,n.scrollBarColor)}),_e=Te.selectAll("g.groups").data(ae);_e.enter().append("g").attr("class","groups"),_e.exit().remove();var Ie=_e.selectAll("g.traces").data(k.identity);Ie.enter().append("g").attr("class","traces"),Ie.exit().remove(),Ie.style("opacity",function(De){var be=De[0].trace;return T.traceIs(be,"pie-like")?-1!==oe.indexOf(De[0].label)?.5:1:"legendonly"===be.visible?.5:1}).each(function(){S.select(this).call(f,z,Z)}).call(y,z,Z).each(function(){W||S.select(this).call(w,z,G)}),k.syncOrAsync([o.previousPromises,function(){return function(De,be,he,ce){var me=De._fullLayout,Pe=O(ce);ce||(ce=me[Pe]);var Ae=me._size,Ce=d.isVertical(ce),Oe=d.isGrouped(ce),Ne="fraction"===ce.entrywidthmode,je=ce.borderwidth,ve=2*je,Me=n.itemGap,Le=ce.indentation+ce.itemwidth+2*Me,Ue=2*(je+Me),ze=L(ce),qe=ce.y<0||0===ce.y&&"top"===ze,Ke=ce.y>1||1===ce.y&&"bottom"===ze,it=ce.tracegroupgap,ft={};ce._maxHeight=Math.max(qe||Ke?me.height/2:Ae.h,30);var dt=0;ce._width=0,ce._height=0;var At,Mt,yt,Pt,kt=(Mt=0,yt=0,(Pt=(At=ce).title.side)&&(-1!==Pt.indexOf("left")&&(Mt=At._titleWidth),-1!==Pt.indexOf("top")&&(yt=At._titleHeight)),[Mt,yt]);if(Ce)he.each(function(At){var Mt=At[0].height;l.setTranslate(this,je+kt[0],je+kt[1]+ce._height+Mt/2+Me),ce._height+=Mt,ce._width=Math.max(ce._width,At[0].width)}),dt=Le+ce._width,ce._width+=Me+Le+ve,ce._height+=Ue,Oe&&(be.each(function(At,Mt){l.setTranslate(this,0,Mt*ce.tracegroupgap)}),ce._height+=(ce._lgroupsLength-1)*ce.tracegroupgap);else{var St=P(ce),ot=Ke||qe,Rt=me.width/2;ce._maxWidth=Math.max(ce.x<0||0===ce.x&&"right"===St?ot&&"left"===St?Ae.l+Ae.w:Rt:ce.x>1||1===ce.x&&"left"===St?ot&&"right"===St?Ae.r+Ae.w:Rt:Ae.w,2*Le);var Vt=0,Ht=0;he.each(function(At){var Mt=v(At,ce,Le);Vt=Math.max(Vt,Mt),Ht+=Mt}),dt=null;var zt=0;if(Oe){var Qe=0,nt=0,We=0;be.each(function(){var At=0,Mt=0;S.select(this).selectAll("g.traces").each(function(Pt){var Ct=v(Pt,ce,Le),Dt=Pt[0].height;l.setTranslate(this,kt[0],kt[1]+je+Me+Dt/2+Mt),Mt+=Dt,At=Math.max(At,Ct),ft[Pt[0].trace.legendgroup]=At});var yt=At+Me;nt>0&&yt+je+nt>ce._maxWidth?(zt=Math.max(zt,nt),nt=0,We+=Qe+it,Qe=Mt):Qe=Math.max(Qe,Mt),l.setTranslate(this,nt,We),nt+=yt}),ce._width=Math.max(zt,nt)+je,ce._height=We+Qe+Ue}else{var et=he.size(),gt=Ht+ve+(et-1)*Me<ce._maxWidth,ht=0,Ge=0,He=0,ut=0;he.each(function(At){var Mt=At[0].height,yt=v(At,ce,Le),Pt=gt?yt:Vt;Ne||(Pt+=Me),Pt+je+Ge-Me>=ce._maxWidth&&(zt=Math.max(zt,ut),Ge=0,He+=ht,ce._height+=ht,ht=0),l.setTranslate(this,kt[0]+je+Ge,kt[1]+je+He+Mt/2+Me),ut=Ge+yt+Me,Ge+=Pt,ht=Math.max(ht,Mt)}),gt?(ce._width=Ge+ve,ce._height=ht+Ue):(ce._width=Math.max(zt,ut)+ve,ce._height+=ht+Ue)}}ce._width=Math.ceil(Math.max(ce._width+kt[0],ce._titleWidth+2*(je+n.titlePad))),ce._height=Math.ceil(Math.max(ce._height+kt[1],ce._titleHeight+2*(je+n.itemGap))),ce._effHeight=Math.min(ce._height,ce._maxHeight);var tt=De._context.edits,xt=tt.legendText||tt.legendPosition;he.each(function(At){var Mt=S.select(this).select("."+Pe+"toggle"),yt=At[0].height,Pt=At[0].trace.legendgroup,Ct=v(At,ce,Le);Oe&&""!==Pt&&(Ct=ft[Pt]);var Dt=xt?Le:dt||Ct;Ce||Ne||(Dt+=Me/2),l.setRect(Mt,0,-yt/2,Dt,yt)})}(z,_e,Ie,Z)},function(){var De,be,he,ce,me=N._size,Pe=Z.borderwidth,Ae="paper"===Z.xref,Ce="paper"===Z.yref;if(xe.text&&function(ot,Rt,Vt){if("top center"===Rt.title.side||"top right"===Rt.title.side){var Ht=Rt.title.font.size*s,zt=0,Qe=ot.node(),nt=l.bBox(Qe).width;"top center"===Rt.title.side?zt=.5*(Rt._width-2*Vt-2*n.titlePad-nt):"top right"===Rt.title.side&&(zt=Rt._width-2*Vt-2*n.titlePad-nt),i.positionText(ot,Vt+n.titlePad+zt,Vt+Ht)}}(we,Z,Pe),!W){var Oe,Ne;if(Oe=Ae?me.l+me.w*Z.x-c[P(Z)]*Z._width:N.width*Z.x-c[P(Z)]*Z._width,Ne=Ce?me.t+me.h*(1-Z.y)-c[L(Z)]*Z._effHeight:N.height*(1-Z.y)-c[L(Z)]*Z._effHeight,function(ot,Rt,Vt,Ht){var zt=ot._fullLayout,Qe=zt[Rt],nt=P(Qe),We=L(Qe),et="paper"===Qe.xref,gt="paper"===Qe.yref;ot._fullLayout._reservedMargin[Rt]={};var ht=Qe.y<.5?"b":"t",Ge=Qe.x<.5?"l":"r",He={r:zt.width-Vt,l:Vt+Qe._width,b:zt.height-Ht,t:Ht+Qe._effHeight};if(et&&gt)return o.autoMargin(ot,Rt,{x:Qe.x,y:Qe.y,l:Qe._width*c[nt],r:Qe._width*h[nt],b:Qe._effHeight*h[We],t:Qe._effHeight*c[We]});et?ot._fullLayout._reservedMargin[Rt][ht]=He[ht]:gt||"v"===Qe.orientation?ot._fullLayout._reservedMargin[Rt][Ge]=He[Ge]:ot._fullLayout._reservedMargin[Rt][ht]=He[ht]}(z,G,Oe,Ne))return;if(N.margin.autoexpand){var ve=Oe,Me=Ne;Oe=Ae?k.constrain(Oe,0,N.width-Z._width):ve,Ne=Ce?k.constrain(Ne,0,N.height-Z._effHeight):Me,Oe!==ve&&k.log("Constrain "+G+".x to make legend fit inside graph"),Ne!==Me&&k.log("Constrain "+G+".y to make legend fit inside graph")}l.setTranslate(fe,Oe,Ne)}if(ye.on(".drag",null),fe.on("wheel",null),W||Z._height<=Z._maxHeight||z._context.staticPlot){var Le=Z._effHeight;W&&(Le=Z._height),ge.attr({width:Z._width-Pe,height:Le-Pe,x:Pe/2,y:Pe/2}),l.setTranslate(Te,0,0),ue.select("rect").attr({width:Z._width-2*Pe,height:Le-2*Pe,x:Pe,y:Pe}),l.setClipUrl(Te,R,z),l.setRect(ye,0,0,0,0),delete Z._scrollY}else{var Ue,qe,Ke=Math.max(n.scrollBarMinHeight,Z._effHeight*Z._effHeight/Z._height),it=Z._effHeight-Ke-2*n.scrollBarMargin,ft=Z._height-Z._effHeight,dt=it/ft,kt=Math.min(Z._scrollY||0,ft);ge.attr({width:Z._width-2*Pe+n.scrollBarWidth+n.scrollBarMargin,height:Z._effHeight-Pe,x:Pe/2,y:Pe/2}),ue.select("rect").attr({width:Z._width-2*Pe+n.scrollBarWidth+n.scrollBarMargin,height:Z._effHeight-2*Pe,x:Pe,y:Pe+kt}),l.setClipUrl(Te,R,z),lt(kt,Ke,dt),fe.on("wheel",function(){lt(kt=k.constrain(Z._scrollY+S.event.deltaY/it*ft,0,ft),Ke,dt),0!==kt&&kt!==ft&&S.event.preventDefault()});var St=S.behavior.drag().on("dragstart",function(){var ot=S.event.sourceEvent;Ue="touchstart"===ot.type?ot.changedTouches[0].clientY:ot.clientY,qe=kt}).on("drag",function(){var ot=S.event.sourceEvent;2===ot.buttons||ot.ctrlKey||lt(kt=k.constrain((("touchmove"===ot.type?ot.changedTouches[0].clientY:ot.clientY)-Ue)/dt+qe,0,ft),Ke,dt)});ye.call(St);var Tt=S.behavior.drag().on("dragstart",function(){var ot=S.event.sourceEvent;"touchstart"===ot.type&&(Ue=ot.changedTouches[0].clientY,qe=kt)}).on("drag",function(){var ot=S.event.sourceEvent;"touchmove"===ot.type&&lt(kt=k.constrain((Ue-ot.changedTouches[0].clientY)/dt+qe,0,ft),Ke,dt)});Te.call(Tt)}function lt(ot,Rt,Vt){Z._scrollY=z._fullLayout[G]._scrollY=ot,l.setTranslate(Te,0,-ot),l.setRect(ye,Z._width,n.scrollBarMargin+ot*Vt,n.scrollBarWidth,Rt),ue.select("rect").attr("y",Pe+ot)}z._context.edits.legendPosition&&(fe.classed("cursor-move",!0),p.init({element:fe.node(),gd:z,prepFn:function(ot){if(ot.target!==ye.node()){var Rt=l.getTranslate(fe);he=Rt.x,ce=Rt.y}},moveFn:function(ot,Rt){if(void 0!==he&&void 0!==ce){var Vt=he+ot,Ht=ce+Rt;l.setTranslate(fe,Vt,Ht),De=p.align(Vt,Z._width,me.l,me.l+me.w,Z.xanchor),be=p.align(Ht+Z._height,-Z._height,me.t+me.h,me.t,Z.yanchor)}},doneFn:function(){if(void 0!==De&&void 0!==be){var ot={};ot[G+".x"]=De,ot[G+".y"]=be,T.call("_guiRelayout",z,ot)}},clickFn:function(ot,Rt){var Vt=U.selectAll("g.traces").filter(function(){var Ht=this.getBoundingClientRect();return Rt.clientX>=Ht.left&&Rt.clientX<=Ht.right&&Rt.clientY>=Ht.top&&Rt.clientY<=Ht.bottom});Vt.size()>0&&_(z,fe,Vt,ot,Rt)}}))}],z)}}function v(z,V,R){var U=z[0],G=U.trace.legendwidth||V.entrywidth;return"fraction"===V.entrywidthmode?V._maxWidth*G:R+(G||U.width)}function _(z,V,R,U,Z){var N=R.data()[0][0].trace,G={event:Z,node:R.node(),curveNumber:N.index,expandedIndex:N._expandedIndex,data:z.data,layout:z.layout,frames:z._transitionData._frames,config:z._context,fullData:z._fullData,fullLayout:z._fullLayout};N._group&&(G.group=N._group),T.traceIs(N,"pie-like")&&(G.label=R.datum()[0].label);var W=b.triggerHandler(z,"plotly_legendclick",G);if(1===U){if(!1===W)return;V._clickTimeout=setTimeout(function(){z._fullLayout&&r(R,z,U)},z._context.doubleClickDelay)}else 2===U&&(V._clickTimeout&&clearTimeout(V._clickTimeout),z._legendMouseDownTime=0,!1!==b.triggerHandler(z,"plotly_legenddoubleclick",G)&&!1!==W&&r(R,z,U))}function f(z,V,R){var U,Z,N=O(R),G=z.data()[0][0],W=G.trace,ae=T.traceIs(W,"pie-like"),re=!R._inHover&&V._context.edits.legendText&&!ae,ne=R._maxNameLength;G.groupTitle?(U=G.groupTitle.text,Z=G.groupTitle.font):(Z=R.font,R.entries?U=G.text:(U=ae?G.label:W.name,W._meta&&(U=k.templateString(U,W._meta))));var Q=k.ensureSingle(z,"text",N+"text");Q.attr("text-anchor","start").call(l.font,Z).text(re?C(U,ne):U),i.positionText(Q,R.indentation+R.itemwidth+2*n.itemGap,0),re?Q.call(i.makeEditable,{gd:V,text:U}).call(E,z,V,R).on("edit",function(X){this.text(C(X,ne)).call(E,z,V,R);var oe=G.trace._fullInput||{},fe={};if(T.hasTransform(oe,"groupby")){var ue=T.getTransformIndices(oe,"groupby"),we=k.keyedContainer(oe,"transforms["+ue[ue.length-1]+"].styles","target","value.name");we.set(G.trace._group,X),fe=we.constructUpdate()}else fe.name=X;return oe._isShape?T.call("_guiRelayout",V,"shapes["+W.index+"].name",fe.name):T.call("_guiRestyle",V,fe,W.index)}):E(Q,z,V,R)}function C(z,V){var R=Math.max(4,V);if(z&&z.trim().length>=R/2)return z;for(var U=R-(z=z||"").length;U>0;U--)z+=" ";return z}function w(z,V,R){var U,Z=V._context.doubleClickDelay,N=1,G=k.ensureSingle(z,"rect",R+"toggle",function(W){V._context.staticPlot||W.style("cursor","pointer").attr("pointer-events","all"),W.call(t.fill,"rgba(0,0,0,0)")});V._context.staticPlot||(G.on("mousedown",function(){(U=(new Date).getTime())-V._legendMouseDownTime<Z?N+=1:(N=1,V._legendMouseDownTime=U)}),G.on("mouseup",function(){if(!V._dragged&&!V._editing){var W=V._fullLayout[R];(new Date).getTime()-V._legendMouseDownTime>Z&&(N=Math.max(N-1,1)),_(V,W,z,N,S.event)}}))}function E(z,V,R,U,Z){U._inHover&&z.attr("data-notex",!0),i.convertToTspans(z,R,function(){!function(N,G,W,ae){var re=N.data()[0][0];if(W._inHover||!re||re.trace.showlegend){var ne=N.select("g[class*=math-group]"),Q=ne.node(),$=O(W);W||(W=G._fullLayout[$]);var X,oe,fe=W.borderwidth,ue=(ae===m?W.title.font:re.groupTitle?re.groupTitle.font:W.font).size*s;if(Q){var ge=l.bBox(Q);X=ge.height,oe=ge.width,ae===m?l.setTranslate(ne,fe,fe+.75*X):l.setTranslate(ne,0,.25*X)}else{var Te=N.select("."+$+(ae===m?"title":"")+"text"),xe=i.lineCount(Te),ye=Te.node();if(X=ue*xe,oe=ye?l.bBox(ye).width:0,ae===m)"left"===W.title.side&&(oe+=2*n.itemGap),i.positionText(Te,fe+n.titlePad,fe+ue);else{var _e=2*n.itemGap+W.indentation+W.itemwidth;re.groupTitle&&(_e=n.itemGap,oe-=W.indentation+W.itemwidth),i.positionText(Te,_e,-ue*((xe-1)/2-.3))}}ae===m?(W._titleWidth=oe,W._titleHeight=X):(re.lineHeight=ue,re.height=Math.max(X,16)+3,re.width=oe)}else N.remove()}(V,R,U,Z)})}function P(z){return k.isRightAnchor(z)?"right":k.isCenterAnchor(z)?"center":"left"}function L(z){return k.isBottomAnchor(z)?"bottom":k.isMiddleAnchor(z)?"middle":"top"}function O(z){return z._id||"legend"}ie.exports=function(z,V){if(V)x(z,V);else{var R=z._fullLayout,U=R._legends;R._infolayer.selectAll('[class^="legend"]').each(function(){var G=S.select(this),W=G.attr("class").split(" ")[0];W.match(g)&&-1===U.indexOf(W)&&G.remove()});for(var Z=0;Z<U.length;Z++)x(z,z._fullLayout[U[Z]])}}},35456:function(ie,F,e){"use strict";var S=e(24040),k=e(42451);ie.exports=function(o,T,b){var p,l,t=T._inHover,i=k.isGrouped(T),r=k.isReversed(T),n={},a=[],s=!1,c={},h=0,u=0;function y(U,Z,N){if(!1!==T.visible&&(!b||U===T._id))if(""!==Z&&k.isGrouped(T))-1===a.indexOf(Z)?(a.push(Z),s=!0,n[Z]=[N]):n[Z].push(N);else{var G="~~i"+h;a.push(G),n[G]=[N],h++}}for(p=0;p<o.length;p++){var d=o[p],m=d[0],g=m.trace,x=g.legend,v=g.legendgroup;if(t||g.visible&&g.showlegend)if(S.traceIs(g,"pie-like"))for(c[v]||(c[v]={}),l=0;l<d.length;l++){var _=d[l].label;c[v][_]||(y(x,v,{label:_,color:d[l].color,i:d[l].i,trace:g,pts:d[l].pts}),c[v][_]=!0,u=Math.max(u,(_||"").length))}else y(x,v,m),u=Math.max(u,(g.name||"").length)}if(!a.length)return[];var f=!s||!i,C=[];for(p=0;p<a.length;p++){var w=n[a[p]];C.push(f?w[0]:w)}for(f&&(C=[C]),p=0;p<C.length;p++){var E=1/0;for(l=0;l<C[p].length;l++){var P=C[p][l].trace.legendrank;E>P&&(E=P)}C[p][0]._groupMinRank=E,C[p][0]._preGroupSort=p}var L=function(U,Z){return U.trace.legendrank-Z.trace.legendrank||U._preSort-Z._preSort};for(C.forEach(function(U,Z){U[0]._preGroupSort=Z}),C.sort(function(U,Z){return U[0]._groupMinRank-Z[0]._groupMinRank||U[0]._preGroupSort-Z[0]._preGroupSort}),p=0;p<C.length;p++){C[p].forEach(function(U,Z){U._preSort=Z}),C[p].sort(L);var O=C[p][0].trace,z=null;for(l=0;l<C[p].length;l++){var V=C[p][l].trace.legendgrouptitle;if(V&&V.text){z=V,t&&(V.font=T._groupTitleFont);break}}if(r&&C[p].reverse(),z){var R=!1;for(l=0;l<C[p].length;l++)if(S.traceIs(C[p][l].trace,"pie-like")){R=!0;break}C[p].unshift({i:-1,groupTitle:z,noClick:R,trace:{showlegend:O.showlegend,legendgroup:O.legendgroup,visible:"toggleitem"===T.groupclick||O.visible}})}for(l=0;l<C[p].length;l++)C[p][l]=[C[p][l]]}return T._lgroupsLength=C.length,T._maxNameLength=u,C}},33048:function(ie,F,e){"use strict";var S=e(24040),k=e(3400),o=k.pushUnique,T=!0;ie.exports=function(b,p,l){var t=p._fullLayout;if(!p._dragged&&!p._editing){var i,r=t.legend.itemclick,n=t.legend.itemdoubleclick,a=t.legend.groupclick;if(1===l&&"toggle"===r&&"toggleothers"===n&&T&&p.data&&p._context.showTips&&k.notifier(k._(p,"Double-click on legend to isolate one trace"),"long"),T=!1,1===l?i=r:2===l&&(i=n),i){var s="togglegroup"===a,c=t.hiddenlabels?t.hiddenlabels.slice():[],h=b.data()[0][0];if(!h.groupTitle||!h.noClick){var u=p._fullData,y=(t.shapes||[]).filter(function(be){return be.showlegend}),d=u.concat(y),m=h.trace;m._isShape&&(m=m._fullInput);var g,x,v,_,f,C=m.legendgroup,w={},E=[],P=[],L=[],O=(t.shapes||[]).map(function(be){return be._input}),z=!1,V=m.legend,R=m._fullInput;if(R&&R._isShape||!S.traceIs(m,"pie-like")){var U,Z=C&&C.length,N=[];if(Z)for(g=0;g<d.length;g++)(U=d[g]).visible&&U.legendgroup===C&&N.push(g);if("toggle"===i){var G;switch(m.visible){case!0:G="legendonly";break;case!1:G=!1;break;case"legendonly":G=!0}if(Z)if(s)for(g=0;g<d.length;g++){var W=d[g];!1!==W.visible&&W.legendgroup===C&&De(W,G)}else De(m,G);else De(m,G)}else if("toggleothers"===i){var ae,re,Q,$=!0;for(g=0;g<d.length;g++)if(ae=(Q=d[g])===m,re=!0!==Q.showlegend,!(ae||re||Z&&Q.legendgroup===C||Q.legend!==V||!0!==Q.visible||S.traceIs(Q,"notLegendIsolatable"))){$=!1;break}for(g=0;g<d.length;g++)if(!1!==(Q=d[g]).visible&&Q.legend===V&&!S.traceIs(Q,"notLegendIsolatable"))switch(m.visible){case"legendonly":De(Q,!0);break;case!0:re=!0!==Q.showlegend&&!Q.legendgroup,De(Q,!!((ae=Q===m)||Z&&Q.legendgroup===C||re)||!!$||"legendonly")}}for(g=0;g<P.length;g++)if(v=P[g]){var X=v.constructUpdate(),oe=Object.keys(X);for(x=0;x<oe.length;x++)(w[_=oe[x]]=w[_]||[])[L[g]]=X[_]}for(f=Object.keys(w),g=0;g<f.length;g++)for(_=f[g],x=0;x<E.length;x++)w[_].hasOwnProperty(x)||(w[_][x]=void 0);z?S.call("_guiUpdate",p,w,{shapes:O},E):S.call("_guiRestyle",p,w,E)}else{var fe=h.label,ue=c.indexOf(fe);if("toggle"===i)-1===ue?c.push(fe):c.splice(ue,1);else if("toggleothers"===i){var ge=-1!==ue,we=[];for(g=0;g<p.calcdata.length;g++){var Te=p.calcdata[g];for(x=0;x<Te.length;x++){var xe=Te[x].label;V===Te[0].trace.legend&&fe!==xe&&(-1===c.indexOf(xe)&&(ge=!0),o(c,xe),we.push(xe))}}if(!ge)for(var ye=0;ye<we.length;ye++){var _e=c.indexOf(we[ye]);-1!==_e&&c.splice(_e,1)}}S.call("_guiRelayout",p,"hiddenlabels",c)}}}}function Ie(be,he){var ce=E.indexOf(be),me=w.visible;return me||(me=w.visible=[]),-1===E.indexOf(be)&&(E.push(be),ce=E.length-1),me[ce]=he,ce}function De(be,he){if(!h.groupTitle||s){var me=be._fullInput||be,Pe=me._isShape,Ae=me.index;if(void 0===Ae&&(Ae=me._index),S.hasTransform(me,"groupby")){var Ce=P[Ae];if(!Ce){var Oe=S.getTransformIndices(me,"groupby");Ce=k.keyedContainer(me,"transforms["+Oe[Oe.length-1]+"].styles","target","value.visible"),P[Ae]=Ce}var je=Ce.get(be._group);void 0===je&&(je=!0),!1!==je&&Ce.set(be._group,he),L[Ae]=Ie(Ae,!1!==me.visible)}else{var ve=!1!==me.visible&&he;Pe?(O[Ae].visible=ve,z=!0):Ie(Ae,ve)}}}}},42451:function(ie,F){"use strict";F.isGrouped=function(e){return-1!==(e.traceorder||"").indexOf("grouped")},F.isVertical=function(e){return"h"!==e.orientation},F.isReversed=function(e){return-1!==(e.traceorder||"").indexOf("reversed")}},2780:function(ie,F,e){"use strict";ie.exports={moduleType:"component",name:"legend",layoutAttributes:e(3800),supplyLayoutDefaults:e(77864),draw:e(31140),style:e(2012)}},2012:function(ie,F,e){"use strict";var S=e(33428),k=e(24040),o=e(3400),T=o.strTranslate,b=e(43616),p=e(76308),l=e(94288).extractOpts,t=e(43028),i=e(10528),r=e(69656).castOption,n=e(65196);function a(h,u){return(u?"radial":"horizontal")+(h?"":"reversed")}function s(h){var u=h[0].trace,y=u.contours,d=t.hasLines(u),m=t.hasMarkers(u),g=u.visible&&u.fill&&"none"!==u.fill,x=!1,v=!1;if(y){var _=y.coloring;"lines"===_?x=!0:d="none"===_||"heatmap"===_||y.showlines,"constraint"===y.type?g="="!==y._operation:"fill"!==_&&"heatmap"!==_||(v=!0)}return{showMarker:m,showLine:d,showFill:g,showGradientLine:x,showGradientFill:v,anyLine:d||x,anyFill:g||v}}function c(h,u,y){return h&&o.isArrayOrTypedArray(h)?u:h>y?y:h}ie.exports=function(h,u,y){y||(y=u._fullLayout.legend);var m="constant"===y.itemsizing,g=y.itemwidth,v=T((g+2*n.itemGap)/2,0),_=function(w,E,P,L){var O;if(w+1)O=w;else{if(!(E&&E.width>0))return 0;O=E.width}return m?L:Math.min(O,P)};function f(w,E,P){var L=w[0].trace,O=L.marker||{},z=O.line||{},V=O.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",R=P?L.visible&&L.type===P:k.traceIs(L,"bar"),U=S.select(E).select("g.legendpoints").selectAll("path.legend"+P).data(R?[w]:[]);U.enter().append("path").classed("legend"+P,!0).attr("d",V).attr("transform",v),U.exit().remove(),U.each(function(Z){var N=S.select(this),G=Z[0],W=_(G.mlw,O.line,5,2);N.style("stroke-width",W+"px");var ae=G.mcc;if(!y._inHover&&"mc"in G){var re=l(O),ne=re.mid;void 0===ne&&(ne=(re.max+re.min)/2),ae=b.tryColorscale(O,"")(ne)}var Q=ae||G.mc||O.color,$=O.pattern,X=$&&b.getPatternAttr($.shape,0,"");if(X){var oe=b.getPatternAttr($.bgcolor,0,null),fe=b.getPatternAttr($.fgcolor,0,null),ue=$.fgopacity,ge=c($.size,8,10),we=c($.solidity,.5,1);N.call(b.pattern,"legend",u,"legend-"+L.uid,X,ge,we,ae,$.fillmode,oe,fe,ue)}else N.call(p.fill,Q);W&&p.stroke(N,G.mlc||z.color)})}function C(w,E,P){var L=w[0],O=L.trace,z=P?O.visible&&O.type===P:k.traceIs(O,P),V=S.select(E).select("g.legendpoints").selectAll("path.legend"+P).data(z?[w]:[]);if(V.enter().append("path").classed("legend"+P,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",v),V.exit().remove(),V.size()){var R=O.marker||{},U=_(r(R.line.width,L.pts),R.line,5,2),Z="pieLike",N=o.minExtend(O,{marker:{line:{width:U}}},Z),G=o.minExtend(L,{trace:N},Z);i(V,G,N,u)}}h.each(function(w){var E=S.select(this),P=o.ensureSingle(E,"g","layers");P.style("opacity",w[0].trace.opacity);var O=y.valign,z=w[0].lineHeight,V=w[0].height;P.attr("transform","middle"===O&&0===y.indentation||!z||!V?null:T(y.indentation,{top:1,bottom:-1}[O]*(.5*(z-V+3))||0)),P.selectAll("g.legendfill").data([w]).enter().append("g").classed("legendfill",!0),P.selectAll("g.legendlines").data([w]).enter().append("g").classed("legendlines",!0);var Z=P.selectAll("g.legendsymbols").data([w]);Z.enter().append("g").classed("legendsymbols",!0),Z.selectAll("g.legendpoints").data([w]).enter().append("g").classed("legendpoints",!0)}).each(function(w){var E,P=w[0].trace,L=[];if(P.visible)switch(P.type){case"histogram2d":case"heatmap":L=[["M-15,-2V4H15V-2Z"]],E=!0;break;case"choropleth":case"choroplethmapbox":L=[["M-6,-6V6H6V-6Z"]],E=!0;break;case"densitymapbox":L=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],E="radial";break;case"cone":L=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],E=!1;break;case"streamtube":L=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],E=!1;break;case"surface":L=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],E=!0;break;case"mesh3d":L=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!1;break;case"volume":L=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!0;break;case"isosurface":L=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],E=!1}var O=S.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(L);O.enter().append("path").classed("legend3dandfriends",!0).attr("transform",v).style("stroke-miterlimit",1),O.exit().remove(),O.each(function(z,V){var R,U=S.select(this),Z=l(P),N=Z.colorscale,G=Z.reversescale;if(N){if(!E){var W=N.length;R=0===V?N[G?W-1:0][1]:1===V?N[G?0:W-1][1]:N[Math.floor((W-1)/2)][1]}}else{var ae=P.vertexcolor||P.facecolor||P.color;R=o.isArrayOrTypedArray(ae)?ae[V]||ae[0]:ae}U.attr("d",z[0]),R?U.call(p.fill,R):U.call(function(re){re.size()&&b.gradient(re,u,"legendfill-"+P.uid,a(G,"radial"===E),N,"fill")})})}).each(function(w){var E=w[0].trace,P="waterfall"===E.type;if(w[0]._distinct&&P){var L=w[0].trace[w[0].dir].marker;return w[0].mc=L.color,w[0].mlw=L.line.width,w[0].mlc=L.line.color,f(w,this,"waterfall")}var O=[];E.visible&&P&&(O=w[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var z=S.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(O);z.enter().append("path").classed("legendwaterfall",!0).attr("transform",v).style("stroke-miterlimit",1),z.exit().remove(),z.each(function(V){var R=S.select(this),U=E[V[0]].marker,Z=_(void 0,U.line,5,2);R.attr("d",V[1]).style("stroke-width",Z+"px").call(p.fill,U.color),Z&&R.call(p.stroke,U.line.color)})}).each(function(w){f(w,this,"funnel")}).each(function(w){f(w,this)}).each(function(w){var E=w[0].trace,P=S.select(this).select("g.legendpoints").selectAll("path.legendbox").data(E.visible&&k.traceIs(E,"box-violin")?[w]:[]);P.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",v),P.exit().remove(),P.each(function(){var L=S.select(this);if("all"!==E.boxpoints&&"all"!==E.points||0!==p.opacity(E.fillcolor)||0!==p.opacity((E.line||{}).color)){var O=_(void 0,E.line,5,2);L.style("stroke-width",O+"px").call(p.fill,E.fillcolor),O&&p.stroke(L,E.line.color)}else{var z=o.minExtend(E,{marker:{size:m?12:o.constrain(E.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});P.call(b.pointStyle,z,u)}})}).each(function(w){C(w,this,"funnelarea")}).each(function(w){C(w,this,"pie")}).each(function(w){var E,P,L=s(w),O=L.showFill,z=L.showLine,V=L.showGradientLine,R=L.showGradientFill,U=L.anyFill,Z=L.anyLine,N=w[0],G=N.trace,W=l(G),ae=W.colorscale,re=W.reversescale,ne=t.hasMarkers(G)||!U?"M5,0":Z?"M5,-2":"M5,-3",Q=S.select(this),$=Q.select(".legendfill").selectAll("path").data(O||R?[w]:[]);if($.enter().append("path").classed("js-fill",!0),$.exit().remove(),$.attr("d",ne+"h"+g+"v6h-"+g+"z").call(function(fe){fe.size()&&(O?b.fillGroupStyle(fe,u,!0):b.gradient(fe,u,"legendfill-"+G.uid,a(re),ae,"fill"))}),z||V){var X=_(void 0,G.line,10,5);P=o.minExtend(G,{line:{width:X}}),E=[o.minExtend(N,{trace:P})]}var oe=Q.select(".legendlines").selectAll("path").data(z||V?[E]:[]);oe.enter().append("path").classed("js-line",!0),oe.exit().remove(),oe.attr("d",ne+(V?"l"+g+",0.0001":"h"+g)).call(z?b.lineGroupStyle:function(fe){if(fe.size()){var ue="legendline-"+G.uid;b.lineGroupStyle(fe),b.gradient(fe,u,ue,a(re),ae,"stroke")}})}).each(function(w){var E,P,L=s(w),V=L.showLine,R=L.showMarker,U=w[0],Z=U.trace,N=!R&&!L.anyLine&&!L.anyFill&&t.hasText(Z);function G(oe,fe,ue,ge){var we=o.nestedProperty(Z,oe).get(),Te=o.isArrayOrTypedArray(we)&&fe?fe(we):we;if(m&&Te&&void 0!==ge&&(Te=ge),ue){if(Te<ue[0])return ue[0];if(Te>ue[1])return ue[1]}return Te}function W(oe){return U._distinct&&U.index&&oe[U.index]?oe[U.index]:oe[0]}if(R||N||V){var ae={},re={};if(R){ae.mc=G("marker.color",W),ae.mx=G("marker.symbol",W),ae.mo=G("marker.opacity",o.mean,[.2,1]),ae.mlc=G("marker.line.color",W),ae.mlw=G("marker.line.width",o.mean,[0,5],2),re.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var ne=G("marker.size",o.mean,[2,16],12);ae.ms=ne,re.marker.size=ne}V&&(re.line={width:G("line.width",W,[0,10],5)}),N&&(ae.tx="Aa",ae.tp=G("textposition",W),ae.ts=10,ae.tc=G("textfont.color",W),ae.tf=G("textfont.family",W),ae.tw=G("textfont.weight",W),ae.ty=G("textfont.style",W),ae.tv=G("textfont.variant",W),ae.tC=G("textfont.textcase",W),ae.tE=G("textfont.lineposition",W),ae.tS=G("textfont.shadow",W)),E=[o.minExtend(U,ae)],(P=o.minExtend(Z,re)).selectedpoints=null,P.texttemplate=null}var Q=S.select(this).select("g.legendpoints"),$=Q.selectAll("path.scatterpts").data(R?E:[]);$.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",v),$.exit().remove(),$.call(b.pointStyle,P,u),R&&(E[0].mrc=3);var X=Q.selectAll("g.pointtext").data(N?E:[]);X.enter().append("g").classed("pointtext",!0).append("text").attr("transform",v),X.exit().remove(),X.selectAll("text").call(b.textPointStyle,P,u)}).each(function(w){var E=w[0].trace,P=S.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(E.visible&&"candlestick"===E.type?[w,w]:[]);P.enter().append("path").classed("legendcandle",!0).attr("d",function(L,O){return O?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",v).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(L,O){var z=S.select(this),V=E[O?"increasing":"decreasing"],R=_(void 0,V.line,5,2);z.style("stroke-width",R+"px").call(p.fill,V.fillcolor),R&&p.stroke(z,V.line.color)})}).each(function(w){var E=w[0].trace,P=S.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(E.visible&&"ohlc"===E.type?[w,w]:[]);P.enter().append("path").classed("legendohlc",!0).attr("d",function(L,O){return O?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",v).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(L,O){var z=S.select(this),V=E[O?"increasing":"decreasing"],R=_(void 0,V.line,5,2);z.style("fill","none").call(b.dashLine,V.line.dash,R),R&&p.stroke(z,V.line.color)})})}},66540:function(ie,F,e){"use strict";e(76052),ie.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},44248:function(ie,F,e){"use strict";var S=e(24040),k=e(7316),o=e(79811),T=e(9224),b=e(4016).eraseActiveShape,p=e(3400),l=p._,t=ie.exports={};function i(d,m){var g,x,v=m.currentTarget,_=v.getAttribute("data-attr"),f=v.getAttribute("data-val")||!0,C=d._fullLayout,w={},E=o.list(d,null,!0),P=C._cartesianSpikesEnabled;if("zoom"===_){var L,O="in"===f?.5:2,z=(1+O)/2,V=(1-O)/2;for(x=0;x<E.length;x++)if(!(g=E[x]).fixedrange)if(L=g._name,"auto"===f)w[L+".autorange"]=!0;else if("reset"===f)void 0===g._rangeInitial0&&void 0===g._rangeInitial1?w[L+".autorange"]=!0:void 0===g._rangeInitial0?(w[L+".autorange"]=g._autorangeInitial,w[L+".range"]=[null,g._rangeInitial1]):void 0===g._rangeInitial1?(w[L+".range"]=[g._rangeInitial0,null],w[L+".autorange"]=g._autorangeInitial):w[L+".range"]=[g._rangeInitial0,g._rangeInitial1],void 0!==g._showSpikeInitial&&(w[L+".showspikes"]=g._showSpikeInitial,"on"!==P||g._showSpikeInitial||(P="off"));else{var R=[g.r2l(g.range[0]),g.r2l(g.range[1])],U=[z*R[0]+V*R[1],z*R[1]+V*R[0]];w[L+".range[0]"]=g.l2r(U[0]),w[L+".range[1]"]=g.l2r(U[1])}}else"hovermode"!==_||"x"!==f&&"y"!==f||v.setAttribute("data-val",f=C._isHoriz?"y":"x"),w[_]=f;C._cartesianSpikesEnabled=P,S.call("_guiRelayout",d,w)}function r(d,m){for(var g=m.currentTarget,x=g.getAttribute("data-attr"),v=g.getAttribute("data-val")||!0,_=d._fullLayout._subplots.gl3d||[],f={},C=x.split("."),w=0;w<_.length;w++)f[_[w]+"."+C[1]]=v;f.dragmode="pan"===v?v:"zoom",S.call("_guiRelayout",d,f)}function n(d,m){for(var g=m.currentTarget.getAttribute("data-attr"),x="resetLastSave"===g,v="resetDefault"===g,_=d._fullLayout,f=_._subplots.gl3d||[],C={},w=0;w<f.length;w++){var E,P=f[w],L=P+".camera",O=P+".aspectratio",z=P+".aspectmode",V=_[P]._scene;x?(C[L+".up"]=V.viewInitial.up,C[L+".eye"]=V.viewInitial.eye,C[L+".center"]=V.viewInitial.center,E=!0):v&&(C[L+".up"]=null,C[L+".eye"]=null,C[L+".center"]=null,E=!0),E&&(C[O+".x"]=V.viewInitial.aspectratio.x,C[O+".y"]=V.viewInitial.aspectratio.y,C[O+".z"]=V.viewInitial.aspectratio.z,C[z]=V.viewInitial.aspectmode)}S.call("_guiRelayout",d,C)}function a(d,m){var g=m.currentTarget,x=g._previousVal,v=d._fullLayout,_=v._subplots.gl3d||[],f=["xaxis","yaxis","zaxis"],C={},w={};if(x)w=x,g._previousVal=null;else{for(var E=0;E<_.length;E++){var P=_[E],L=v[P],O=P+".hovermode";C[O]=L.hovermode,w[O]=!1;for(var z=0;z<3;z++){var V=f[z],R=P+"."+V+".showspikes";w[R]=!1,C[R]=L[V].showspikes}}g._previousVal=C}return w}function s(d,m){for(var g=m.currentTarget,x=g.getAttribute("data-attr"),v=g.getAttribute("data-val")||!0,_=d._fullLayout,f=_._subplots.geo||[],C=0;C<f.length;C++){var w=f[C];if("zoom"===x){var P=_[w].projection.scale;S.call("_guiRelayout",d,w+".projection.scale","in"===v?2*P:.5*P)}}"reset"===x&&y(d,"geo")}function c(d){var m=d._fullLayout;return!m.hovermode&&(m._has("cartesian")?m._isHoriz?"y":"x":"closest")}function h(d){var m=c(d);S.call("_guiRelayout",d,"hovermode",m)}function u(d,m){for(var g=m.currentTarget.getAttribute("data-val"),x=d._fullLayout,v=x._subplots.mapbox||[],_={},f=0;f<v.length;f++){var C=v[f],w=x[C].zoom;_[C+".zoom"]="in"===g?1.05*w:w/1.05}S.call("_guiRelayout",d,_)}function y(d,m){for(var g=d._fullLayout,x=g._subplots[m]||[],v={},_=0;_<x.length;_++)for(var f=x[_],C=g[f]._subplot.viewInitial,w=Object.keys(C),E=0;E<w.length;E++){var P=w[E];v[f+"."+P]=C[P]}S.call("_guiRelayout",d,v)}t.toImage={name:"toImage",title:function(d){return l(d,"png"===((d._context.toImageButtonOptions||{}).format||"png")?"Download plot as a png":"Download plot")},icon:T.camera,click:function(d){var m=d._context.toImageButtonOptions,g={format:m.format||"png"};p.notifier(l(d,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==g.format&&p.isIE()&&(p.notifier(l(d,"IE only supports svg.  Changing format to svg."),"long"),g.format="svg"),["filename","width","height","scale"].forEach(function(x){x in m&&(g[x]=m[x])}),S.call("downloadImage",d,g).then(function(x){p.notifier(l(d,"Snapshot succeeded")+" - "+x,"long")}).catch(function(){p.notifier(l(d,"Sorry, there was a problem downloading your snapshot!"),"long")})}},t.sendDataToCloud={name:"sendDataToCloud",title:function(d){return l(d,"Edit in Chart Studio")},icon:T.disk,click:function(d){k.sendDataToCloud(d)}},t.editInChartStudio={name:"editInChartStudio",title:function(d){return l(d,"Edit in Chart Studio")},icon:T.pencil,click:function(d){k.sendDataToCloud(d)}},t.zoom2d={name:"zoom2d",_cat:"zoom",title:function(d){return l(d,"Zoom")},attr:"dragmode",val:"zoom",icon:T.zoombox,click:i},t.pan2d={name:"pan2d",_cat:"pan",title:function(d){return l(d,"Pan")},attr:"dragmode",val:"pan",icon:T.pan,click:i},t.select2d={name:"select2d",_cat:"select",title:function(d){return l(d,"Box Select")},attr:"dragmode",val:"select",icon:T.selectbox,click:i},t.lasso2d={name:"lasso2d",_cat:"lasso",title:function(d){return l(d,"Lasso Select")},attr:"dragmode",val:"lasso",icon:T.lasso,click:i},t.drawclosedpath={name:"drawclosedpath",title:function(d){return l(d,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:T.drawclosedpath,click:i},t.drawopenpath={name:"drawopenpath",title:function(d){return l(d,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:T.drawopenpath,click:i},t.drawline={name:"drawline",title:function(d){return l(d,"Draw line")},attr:"dragmode",val:"drawline",icon:T.drawline,click:i},t.drawrect={name:"drawrect",title:function(d){return l(d,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:T.drawrect,click:i},t.drawcircle={name:"drawcircle",title:function(d){return l(d,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:T.drawcircle,click:i},t.eraseshape={name:"eraseshape",title:function(d){return l(d,"Erase active shape")},icon:T.eraseshape,click:b},t.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(d){return l(d,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:i},t.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(d){return l(d,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:i},t.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(d){return l(d,"Autoscale")},attr:"zoom",val:"auto",icon:T.autoscale,click:i},t.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(d){return l(d,"Reset axes")},attr:"zoom",val:"reset",icon:T.home,click:i},t.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(d){return l(d,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:i},t.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(d){return l(d,"Compare data on hover")},attr:"hovermode",val:function(d){return d._fullLayout._isHoriz?"y":"x"},icon:T.tooltip_compare,gravity:"ne",click:i},t.zoom3d={name:"zoom3d",_cat:"zoom",title:function(d){return l(d,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:T.zoombox,click:r},t.pan3d={name:"pan3d",_cat:"pan",title:function(d){return l(d,"Pan")},attr:"scene.dragmode",val:"pan",icon:T.pan,click:r},t.orbitRotation={name:"orbitRotation",title:function(d){return l(d,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:T["3d_rotate"],click:r},t.tableRotation={name:"tableRotation",title:function(d){return l(d,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:T["z-axis"],click:r},t.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(d){return l(d,"Reset camera to default")},attr:"resetDefault",icon:T.home,click:n},t.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(d){return l(d,"Reset camera to last save")},attr:"resetLastSave",icon:T.movie,click:n},t.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(d){return l(d,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(d,m){var g=a(d,m);S.call("_guiRelayout",d,g)}},t.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(d){return l(d,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:s},t.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(d){return l(d,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:s},t.resetGeo={name:"resetGeo",_cat:"reset",title:function(d){return l(d,"Reset")},attr:"reset",val:null,icon:T.autoscale,click:s},t.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(d){return l(d,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:h},t.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(d){return l(d,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:h},t.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(d){return l(d,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:h},t.resetViewSankey={name:"resetSankeyGroup",title:function(d){return l(d,"Reset view")},icon:T.home,click:function(d){for(var m={"node.groups":[],"node.x":[],"node.y":[]},g=0;g<d._fullData.length;g++){var x=d._fullData[g]._viewInitial;m["node.groups"].push(x.node.groups.slice()),m["node.x"].push(x.node.x.slice()),m["node.y"].push(x.node.y.slice())}S.call("restyle",d,m)}},t.toggleHover={name:"toggleHover",title:function(d){return l(d,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(d,m){var g=a(d,m);g.hovermode=c(d),S.call("_guiRelayout",d,g)}},t.resetViews={name:"resetViews",title:function(d){return l(d,"Reset views")},icon:T.home,click:function(d,m){var g=m.currentTarget;g.setAttribute("data-attr","zoom"),g.setAttribute("data-val","reset"),i(d,m),g.setAttribute("data-attr","resetLastSave"),n(d,m),y(d,"geo"),y(d,"mapbox")}},t.toggleSpikelines={name:"toggleSpikelines",title:function(d){return l(d,"Toggle Spike Lines")},icon:T.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(d){var m=d._fullLayout;m._cartesianSpikesEnabled="on"===m._cartesianSpikesEnabled?"off":"on",S.call("_guiRelayout",d,function(x){for(var v="on"===x._fullLayout._cartesianSpikesEnabled,_=o.list(x,null,!0),f={},C=0;C<_.length;C++){var w=_[C];f[w._name+".showspikes"]=!!v||w._showSpikeInitial}return f}(d))}},t.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(d){return l(d,"Reset view")},attr:"reset",icon:T.home,click:function(d){y(d,"mapbox")}},t.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(d){return l(d,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:u},t.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(d){return l(d,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:u}},76052:function(ie,F,e){"use strict";var S=e(44248),k=Object.keys(S),o=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],T=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(o),b=[];k.forEach(function(p){!function(l){if(-1===T.indexOf(l._cat||l.name)){var t=l.name,i=(l._cat||l.name).toLowerCase();-1===b.indexOf(t)&&b.push(t),-1===b.indexOf(i)&&b.push(i)}}(S[p])}),b.sort(),ie.exports={DRAW_MODES:o,backButtons:T,foreButtons:b}},90824:function(ie,F,e){"use strict";var S=e(3400),k=e(76308),o=e(31780),T=e(66540);ie.exports=function(b,p){var l=b.modebar||{},t=o.newContainer(p,"modebar");function i(n,a){return S.coerce(l,t,T,n,a)}i("orientation"),i("bgcolor",k.addOpacity(p.paper_bgcolor,.5));var r=k.contrast(k.rgb(p.modebar.bgcolor));i("color",k.addOpacity(r,.3)),i("activecolor",k.addOpacity(r,.7)),i("uirevision",p.uirevision),i("add"),i("remove")}},45460:function(ie,F,e){"use strict";ie.exports={moduleType:"component",name:"modebar",layoutAttributes:e(66540),supplyLayoutDefaults:e(90824),manage:e(18816)}},18816:function(ie,F,e){"use strict";var S=e(79811),k=e(43028),o=e(24040),T=e(10624).isUnifiedHover,b=e(66400),p=e(44248),l=e(76052).DRAW_MODES,t=e(3400).extendDeep;ie.exports=function(i){var r=i._fullLayout,n=i._context,a=r._modeBar;if(n.displayModeBar||n.watermark){if(!Array.isArray(n.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(n.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var s,c=n.modeBarButtons;s=Array.isArray(c)&&c.length?function(h){for(var u=t([],h),y=0;y<u.length;y++)for(var d=u[y],m=0;m<d.length;m++){var g=d[m];if("string"==typeof g){if(void 0===p[g])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));u[y][m]=p[g]}}return u}(c):!n.displayModeBar&&n.watermark?[]:function(h){var u=h._fullLayout,y=h._fullData,d=h._context;function m(we,Te){if("string"==typeof Te){if(Te.toLowerCase()===we.toLowerCase())return!0}else if(Te.name===we||(Te._cat||Te.name)===we.toLowerCase())return!0;return!1}var g=u.modebar.add;"string"==typeof g&&(g=[g]);var x=u.modebar.remove;"string"==typeof x&&(x=[x]);var v=d.modeBarButtonsToAdd.concat(g.filter(function(we){for(var Te=0;Te<d.modeBarButtonsToRemove.length;Te++)if(m(we,d.modeBarButtonsToRemove[Te]))return!1;return!0})),_=d.modeBarButtonsToRemove.concat(x.filter(function(we){for(var Te=0;Te<d.modeBarButtonsToAdd.length;Te++)if(m(we,d.modeBarButtonsToAdd[Te]))return!1;return!0})),f=u._has("cartesian"),C=u._has("gl3d"),w=u._has("geo"),E=u._has("pie"),P=u._has("funnelarea"),L=u._has("gl2d"),O=u._has("ternary"),z=u._has("mapbox"),V=u._has("polar"),R=u._has("smith"),U=u._has("sankey"),Z=function(we){for(var Te=S.list({_fullLayout:we},null,!0),xe=0;xe<Te.length;xe++)if(!Te[xe].fixedrange)return!1;return!0}(u),N=T(u.hovermode),G=[];function W(we){if(we.length){for(var Te=[],xe=0;xe<we.length;xe++){for(var ye=we[xe],_e=p[ye],Ie=_e.name.toLowerCase(),De=(_e._cat||_e.name).toLowerCase(),be=!1,he=0;he<_.length;he++){var ce=_[he].toLowerCase();if(ce===Ie||ce===De){be=!0;break}}be||Te.push(p[ye])}G.push(Te)}}var ae=["toImage"];d.showEditInChartStudio?ae.push("editInChartStudio"):d.showSendToCloud&&ae.push("sendDataToCloud"),W(ae);var re=[],ne=[],Q=[],$=[];(f||L||E||P||O)+w+C+z+V+R>1?(ne=["toggleHover"],Q=["resetViews"]):w?(re=["zoomInGeo","zoomOutGeo"],ne=["hoverClosestGeo"],Q=["resetGeo"]):C?(ne=["hoverClosest3d"],Q=["resetCameraDefault3d","resetCameraLastSave3d"]):z?(re=["zoomInMapbox","zoomOutMapbox"],ne=["toggleHover"],Q=["resetViewMapbox"]):L?ne=["hoverClosestGl2d"]:E?ne=["hoverClosestPie"]:U?(ne=["hoverClosestCartesian","hoverCompareCartesian"],Q=["resetViewSankey"]):ne=["toggleHover"],f&&(ne=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(we){for(var Te=0;Te<we.length;Te++)if(!o.traceIs(we[Te],"noHover"))return!1;return!0}(y)||N)&&(ne=[]),!f&&!L||Z||(re=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==Q[0]&&(Q=["resetScale2d"])),C?$=["zoom3d","pan3d","orbitRotation","tableRotation"]:(f||L)&&!Z||O?$=["zoom2d","pan2d"]:z||w?$=["pan2d"]:V&&($=["zoom2d"]),function(we){for(var Te=!1,xe=0;xe<we.length&&!Te;xe++){var ye=we[xe];ye._module&&ye._module.selectPoints&&(o.traceIs(ye,"scatter-like")?(k.hasMarkers(ye)||k.hasText(ye))&&(Te=!0):o.traceIs(ye,"box-violin")&&"all"!==ye.boxpoints&&"all"!==ye.points||(Te=!0))}return Te}(y)&&$.push("select2d","lasso2d");var X=[],oe=function(we){-1===X.indexOf(we)&&-1!==ne.indexOf(we)&&X.push(we)};if(Array.isArray(v)){for(var fe=[],ue=0;ue<v.length;ue++){var ge=v[ue];"string"==typeof ge?(ge=ge.toLowerCase(),-1!==l.indexOf(ge)?(u._has("mapbox")||u._has("cartesian"))&&$.push(ge):"togglespikelines"===ge?oe("toggleSpikelines"):"togglehover"===ge?oe("toggleHover"):"hovercompare"===ge?oe("hoverCompareCartesian"):"hoverclosest"===ge?(oe("hoverClosestCartesian"),oe("hoverClosestGeo"),oe("hoverClosest3d"),oe("hoverClosestGl2d"),oe("hoverClosestPie")):"v1hovermode"===ge&&(oe("toggleHover"),oe("hoverClosestCartesian"),oe("hoverCompareCartesian"),oe("hoverClosestGeo"),oe("hoverClosest3d"),oe("hoverClosestGl2d"),oe("hoverClosestPie"))):fe.push(ge)}v=fe}return W($),W(re.concat(Q)),W(X),function(we,Te){if(Te.length)if(Array.isArray(Te[0]))for(var xe=0;xe<Te.length;xe++)we.push(Te[xe]);else we.push(Te);return we}(G,v)}(i),a?a.update(i,s):r._modeBar=b(i,s)}else a&&(a.destroy(),delete r._modeBar)}},66400:function(ie,F,e){"use strict";var S=e(33428),k=e(38248),o=e(3400),T=e(9224),b=e(25788).version,p=new DOMParser;function l(i){this.container=i.container,this.element=document.createElement("div"),this.update(i.graphInfo,i.buttons),this.container.appendChild(this.element)}var t=l.prototype;t.update=function(i,r){this.graphInfo=i;var n=this.graphInfo._context,a=this.graphInfo._fullLayout,s="modebar-"+a._uid;this.element.setAttribute("id",s),this._uid=s,this.element.className="modebar","hover"===n.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===a.modebar.orientation&&(this.element.className+=" vertical",r=r.reverse());var c=a.modebar,h="hover"===n.displayModeBar?".js-plotly-plot .plotly:hover ":"";o.deleteRelatedStyleRule(s),o.addRelatedStyleRule(s,h+"#"+s+" .modebar-group","background-color: "+c.bgcolor),o.addRelatedStyleRule(s,"#"+s+" .modebar-btn .icon path","fill: "+c.color),o.addRelatedStyleRule(s,"#"+s+" .modebar-btn:hover .icon path","fill: "+c.activecolor),o.addRelatedStyleRule(s,"#"+s+" .modebar-btn.active .icon path","fill: "+c.activecolor);var u=!this.hasButtons(r),y=this.hasLogo!==n.displaylogo,d=this.locale!==n.locale;if(this.locale=n.locale,(u||y||d)&&(this.removeAllButtons(),this.updateButtons(r),n.watermark||n.displaylogo)){var m=this.getLogo();n.watermark&&(m.className=m.className+" watermark"),"v"===a.modebar.orientation?this.element.insertBefore(m,this.element.childNodes[0]):this.element.appendChild(m),this.hasLogo=!0}this.updateActiveButton()},t.updateButtons=function(i){var r=this;this.buttons=i,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(n){var a=r.createGroup();n.forEach(function(s){var c=s.name;if(!c)throw new Error("must provide button 'name' in button config");if(-1!==r.buttonsNames.indexOf(c))throw new Error("button name '"+c+"' is taken");r.buttonsNames.push(c);var h=r.createButton(s);r.buttonElements.push(h),a.appendChild(h)}),r.element.appendChild(a)})},t.createGroup=function(){var i=document.createElement("div");return i.className="modebar-group",i},t.createButton=function(i){var r=this,n=document.createElement("a");n.setAttribute("rel","tooltip"),n.className="modebar-btn";var a=i.title;void 0===a?a=i.name:"function"==typeof a&&(a=a(this.graphInfo)),(a||0===a)&&n.setAttribute("data-title",a),void 0!==i.attr&&n.setAttribute("data-attr",i.attr);var s=i.val;if(void 0!==s&&("function"==typeof s&&(s=s(this.graphInfo)),n.setAttribute("data-val",s)),"function"!=typeof i.click)throw new Error("must provide button 'click' function in button config");n.addEventListener("click",function(h){i.click(r.graphInfo,h),r.updateActiveButton(h.currentTarget)}),n.setAttribute("data-toggle",i.toggle||!1),i.toggle&&S.select(n).classed("active",!0);var c=i.icon;return n.appendChild("function"==typeof c?c():this.createIcon(c||T.question)),n.setAttribute("data-gravity",i.gravity||"n"),n},t.createIcon=function(i){var r,n=k(i.height)?Number(i.height):i.ascent-i.descent,a="http://www.w3.org/2000/svg";if(i.path){(r=document.createElementNS(a,"svg")).setAttribute("viewBox",[0,0,i.width,n].join(" ")),r.setAttribute("class","icon");var s=document.createElementNS(a,"path");s.setAttribute("d",i.path),i.transform?s.setAttribute("transform",i.transform):void 0!==i.ascent&&s.setAttribute("transform","matrix(1 0 0 -1 0 "+i.ascent+")"),r.appendChild(s)}return i.svg&&(r=p.parseFromString(i.svg,"application/xml").childNodes[0]),r.setAttribute("height","1em"),r.setAttribute("width","1em"),r},t.updateActiveButton=function(i){var r=this.graphInfo._fullLayout,n=void 0!==i?i.getAttribute("data-attr"):null;this.buttonElements.forEach(function(a){var s=a.getAttribute("data-val")||!0,c=a.getAttribute("data-attr"),h="true"===a.getAttribute("data-toggle"),u=S.select(a);if(h)c===n&&u.classed("active",!u.classed("active"));else{var y=null===c?c:o.nestedProperty(r,c).get();u.classed("active",y===s)}})},t.hasButtons=function(i){var r=this.buttons;if(!r||i.length!==r.length)return!1;for(var n=0;n<i.length;++n){if(i[n].length!==r[n].length)return!1;for(var a=0;a<i[n].length;a++)if(i[n][a].name!==r[n][a].name)return!1}return!0},t.getLogo=function(){var i=this.createGroup(),r=document.createElement("a");return r.href="https://plotly.com/",r.target="_blank",r.setAttribute("data-title",o._(this.graphInfo,"Produced with Plotly.js")+" (v"+b+")"),r.className="modebar-btn plotlyjsicon modebar-btn--logo",r.appendChild(this.createIcon(T.newplotlylogo)),i.appendChild(r),i},t.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},t.destroy=function(){o.removeElement(this.container.querySelector(".modebar")),o.deleteRelatedStyleRule(this._uid)},ie.exports=function(i,r){var n=i._fullLayout,a=new l({graphInfo:i,container:n._modebardiv.node(),buttons:r});return n._privateplot&&S.select(a.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),a}},26680:function(ie,F,e){"use strict";var S=e(25376),k=e(22548),o=(0,e(31780).templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});ie.exports={visible:{valType:"boolean",editType:"plot"},buttons:o,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:S({editType:"plot"}),bgcolor:{valType:"color",dflt:k.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},85984:function(ie){"use strict";ie.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},22148:function(ie,F,e){"use strict";var S=e(3400),k=e(76308),o=e(31780),T=e(51272),b=e(26680),p=e(85984);function l(t,i,r,n){var a=n.calendar;function s(h,u){return S.coerce(t,i,b.buttons,h,u)}if(s("visible")){var c=s("step");"all"!==c&&(!a||"gregorian"===a||"month"!==c&&"year"!==c?s("stepmode"):i.stepmode="backward",s("count")),s("label")}}ie.exports=function(t,i,r,n,a){var s=t.rangeselector||{},c=o.newContainer(i,"rangeselector");function h(d,m){return S.coerce(s,c,b,d,m)}if(h("visible",T(s,c,{name:"buttons",handleItemDefaults:l,calendar:a}).length>0)){var u=function(d,m,g){for(var x=g.filter(function(C){return m[C].anchor===d._id}),v=0,_=0;_<x.length;_++){var f=m[x[_]].domain;f&&(v=Math.max(f[1],v))}return[d.domain[0],v+p.yPad]}(i,r,n);h("x",u[0]),h("y",u[1]),S.noneOrAll(t,i,["x","y"]),h("xanchor"),h("yanchor"),S.coerceFont(h,"font",r.font);var y=h("bgcolor");h("activecolor",k.contrast(y,p.lightAmount,p.darkAmount)),h("bordercolor"),h("borderwidth")}}},50216:function(ie,F,e){"use strict";var S=e(33428),k=e(24040),o=e(7316),T=e(76308),b=e(43616),p=e(3400),l=p.strTranslate,t=e(72736),i=e(79811),r=e(84284),n=r.LINE_SPACING,a=r.FROM_TL,s=r.FROM_BR,c=e(85984),h=e(48040);function u(m){return m._id}function y(m,g,x){var _,f,v=p.ensureSingle(m,"rect","selector-rect",function(_){_.attr("shape-rendering","crispEdges")});v.attr({rx:c.rx,ry:c.ry}),v.call(T.stroke,g.bordercolor).call(T.fill,(_=g,f=x,f._isActive||f._isHovered?_.activecolor:_.bgcolor)).style("stroke-width",g.borderwidth+"px")}function d(m,g,x,v){var _,f;p.ensureSingle(m,"text","selector-text",function(C){C.attr("text-anchor","middle")}).call(b.font,g.font).text((_=x,f=v._fullLayout._meta,_.label?f?p.templateString(_.label,f):_.label:"all"===_.step?"all":_.count+_.step.charAt(0))).call(function(C){t.convertToTspans(C,v)})}ie.exports=function(m){var g=m._fullLayout._infolayer.selectAll(".rangeselector").data(function(x){for(var v=i.list(x,"x",!0),_=[],f=0;f<v.length;f++){var C=v[f];C.rangeselector&&C.rangeselector.visible&&_.push(C)}return _}(m),u);g.enter().append("g").classed("rangeselector",!0),g.exit().remove(),g.style({cursor:"pointer","pointer-events":"all"}),g.each(function(x){var v=S.select(this),_=x,f=_.rangeselector,C=v.selectAll("g.button").data(p.filterVisible(f.buttons));C.enter().append("g").classed("button",!0),C.exit().remove(),C.each(function(w){var E=S.select(this),P=h(_,w);w._isActive=function(L,O,z){if("all"===O.step)return!0===L.autorange;var V=Object.keys(z);return L.range[0]===z[V[0]]&&L.range[1]===z[V[1]]}(_,w,P),E.call(y,f,w),E.call(d,f,w,m),E.on("click",function(){m._dragged||k.call("_guiRelayout",m,P)}),E.on("mouseover",function(){w._isHovered=!0,E.call(y,f,w)}),E.on("mouseout",function(){w._isHovered=!1,E.call(y,f,w)})}),function(w,E,P,L,O){var z=0,V=0,R=P.borderwidth;E.each(function(){var ae=S.select(this).select(".selector-text"),ne=Math.max(P.font.size*n*t.lineCount(ae),16)+3;V=Math.max(V,ne)}),E.each(function(){var ae=S.select(this),re=ae.select(".selector-rect"),ne=ae.select(".selector-text"),Q=ne.node()&&b.bBox(ne.node()).width,$=P.font.size*n,X=t.lineCount(ne),oe=Math.max(Q+10,c.minButtonWidth);ae.attr("transform",l(R+z,R)),re.attr({x:0,y:0,width:oe,height:V}),t.positionText(ne,oe/2,V/2-(X-1)*$/2+3),z+=oe+5});var U=w._fullLayout._size,Z=U.l+U.w*P.x,N=U.t+U.h*(1-P.y),G="left";p.isRightAnchor(P)&&(Z-=z,G="right"),p.isCenterAnchor(P)&&(Z-=z/2,G="center");var W="top";p.isBottomAnchor(P)&&(N-=V,W="bottom"),p.isMiddleAnchor(P)&&(N-=V/2,W="middle"),z=Math.ceil(z),V=Math.ceil(V),Z=Math.round(Z),N=Math.round(N),o.autoMargin(w,L+"-range-selector",{x:P.x,y:P.y,l:z*a[G],r:z*s[G],b:V*s[W],t:V*a[W]}),O.attr("transform",l(Z,N))}(m,C,f,_._name,v)})}},48040:function(ie,F,e){"use strict";var S=e(73220),k=e(3400).titleCase;ie.exports=function(o,T){var b=o._name,p={};if("all"===T.step)p[b+".autorange"]=!0;else{var l=function(t,i){var r,n=t.range,a=new Date(t.r2l(n[1])),c=S["utc"+k(i.step)],h=i.count;switch(i.stepmode){case"backward":r=t.l2r(+c.offset(a,-h));break;case"todate":var u=c.offset(a,-h);r=t.l2r(+c.ceil(u))}return[r,n[1]]}(o,T);p[b+".range[0]"]=l[0],p[b+".range[1]"]=l[1]}return p}},41152:function(ie,F,e){"use strict";ie.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e(26680)}}},layoutAttributes:e(26680),handleDefaults:e(22148),draw:e(50216)}},11200:function(ie,F,e){"use strict";var S=e(22548);ie.exports={bgcolor:{valType:"color",dflt:S.background,editType:"plot"},bordercolor:{valType:"color",dflt:S.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},26652:function(ie,F,e){"use strict";var S=e(79811).list,k=e(19280).getAutoRange,o=e(74636);ie.exports=function(T){for(var b=S(T,"x",!0),p=0;p<b.length;p++){var l=b[p],t=l[o.name];t&&t.visible&&t.autorange&&(t._input.autorange=!0,t._input.range=t.range=k(T,l))}}},74636:function(ie){"use strict";ie.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},94040:function(ie,F,e){"use strict";var S=e(3400),k=e(31780),o=e(79811),T=e(11200),b=e(10936);ie.exports=function(p,l,t){var i=p[t],r=l[t];if(i.rangeslider||l._requestRangeslider[r._id]){S.isPlainObject(i.rangeslider)||(i.rangeslider={});var n,a,s=i.rangeslider,c=k.newContainer(r,"rangeslider");if(v("visible")){v("bgcolor",l.plot_bgcolor),v("bordercolor"),v("borderwidth"),v("thickness"),v("autorange",!r.isValidRange(s.range)),v("range");var h=l._subplots;if(h)for(var u=h.cartesian.filter(function(f){return f.substr(0,f.indexOf("y"))===o.name2id(t)}).map(function(f){return f.substr(f.indexOf("y"),f.length)}),y=S.simpleMap(u,o.id2name),d=0;d<y.length;d++){var m=y[d];n=s[m]||{},a=k.newContainer(c,m,"yaxis");var g,x=l[m];n.range&&x.isValidRange(n.range)&&(g="fixed"),"match"!==_("rangemode",g)&&_("range",x.range.slice())}c._input=s}}function v(f,C){return S.coerce(s,c,T,f,C)}function _(f,C){return S.coerce(n,a,b,f,C)}}},20060:function(ie,F,e){"use strict";var S=e(33428),k=e(24040),o=e(7316),T=e(3400),b=T.strTranslate,p=e(43616),l=e(76308),t=e(81668),i=e(57952),r=e(79811),n=e(86476),a=e(93972),s=e(74636);function c(x){return"number"==typeof x.clientX?x.clientX:x.touches&&x.touches.length>0?x.touches[0].clientX:0}function h(x,v,_,f){var C=T.ensureSingle(x,"rect",s.bgClassName,function(L){L.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),w=f.borderwidth%2==0?f.borderwidth:f.borderwidth-1,E=-f._offsetShift,P=p.crispRound(v,f.borderwidth);C.attr({width:f._width+w,height:f._height+w,transform:b(E,E),"stroke-width":P}).call(l.stroke,f.bordercolor).call(l.fill,f.bgcolor)}function u(x,v,_,f){T.ensureSingleById(v._fullLayout._topdefs,"clipPath",f._clipId,function(w){w.append("rect").attr({x:0,y:0})}).select("rect").attr({width:f._width,height:f._height})}function y(x,v,_,f){var C,w=v.calcdata,E=x.selectAll("g."+s.rangePlotClassName).data(_._subplotsWith,T.identity);E.enter().append("g").attr("class",function(P){return s.rangePlotClassName+" "+P}).call(p.setClipUrl,f._clipId,v),E.order(),E.exit().remove(),E.each(function(P,L){var O=S.select(this),z=0===L,V=r.getFromId(v,P,"y"),R=V._name,U=f[R],Z={data:[],layout:{xaxis:{type:_.type,domain:[0,1],range:f.range.slice(),calendar:_.calendar},width:f._width,height:f._height,margin:{t:0,b:0,l:0,r:0}},_context:v._context};_.rangebreaks&&(Z.layout.xaxis.rangebreaks=_.rangebreaks),Z.layout[R]={type:V.type,domain:[0,1],range:"match"!==U.rangemode?U.range.slice():V.range.slice(),calendar:V.calendar},V.rangebreaks&&(Z.layout[R].rangebreaks=V.rangebreaks),o.supplyDefaults(Z);var N=Z._fullLayout.xaxis,G=Z._fullLayout[R];N.clearCalc(),N.setScale(),G.clearCalc(),G.setScale();var W={id:P,plotgroup:O,xaxis:N,yaxis:G,isRangePlot:!0};z?C=W:(W.mainplot="xy",W.mainplotinfo=C),i.rangePlot(v,W,function(ae,re){for(var ne=[],Q=0;Q<ae.length;Q++){var $=ae[Q],X=$[0].trace;X.xaxis+X.yaxis===re&&ne.push($)}return ne}(w,P))})}function d(x,v,_,f,C){T.ensureSingle(x,"rect",s.maskMinClassName,function(w){w.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",f._height).call(l.fill,s.maskColor),T.ensureSingle(x,"rect",s.maskMaxClassName,function(w){w.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",f._height).call(l.fill,s.maskColor),"match"!==C.rangemode&&(T.ensureSingle(x,"rect",s.maskMinOppAxisClassName,function(w){w.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",f._width).call(l.fill,s.maskOppAxisColor),T.ensureSingle(x,"rect",s.maskMaxOppAxisClassName,function(w){w.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",f._width).style("border-top",s.maskOppBorder).call(l.fill,s.maskOppAxisColor))}function m(x,v,_,f){v._context.staticPlot||T.ensureSingle(x,"rect",s.slideBoxClassName,function(C){C.attr({y:0,cursor:s.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:f._height,fill:s.slideBoxFill})}function g(x,v,_,f){var C=T.ensureSingle(x,"g",s.grabberMinClassName),w=T.ensureSingle(x,"g",s.grabberMaxClassName),E={x:0,width:s.handleWidth,rx:s.handleRadius,fill:l.background,stroke:l.defaultLine,"stroke-width":s.handleStrokeWidth,"shape-rendering":"crispEdges"},P={y:Math.round(f._height/4),height:Math.round(f._height/2)};T.ensureSingle(C,"rect",s.handleMinClassName,function(O){O.attr(E)}).attr(P),T.ensureSingle(w,"rect",s.handleMaxClassName,function(O){O.attr(E)}).attr(P);var L={width:s.grabAreaWidth,x:0,y:0,fill:s.grabAreaFill,cursor:v._context.staticPlot?void 0:s.grabAreaCursor};T.ensureSingle(C,"rect",s.grabAreaMinClassName,function(O){O.attr(L)}).attr("height",f._height),T.ensureSingle(w,"rect",s.grabAreaMaxClassName,function(O){O.attr(L)}).attr("height",f._height)}ie.exports=function(x){for(var v=x._fullLayout,_=v._rangeSliderData,f=0;f<_.length;f++){var C=_[f][s.name];C._clipId=C._id+"-"+v._uid}var w=v._infolayer.selectAll("g."+s.containerClassName).data(_,function(E){return E._name});w.exit().each(function(E){v._topdefs.select("#"+E[s.name]._clipId).remove()}).remove(),0!==_.length&&(w.enter().append("g").classed(s.containerClassName,!0).attr("pointer-events","all"),w.each(function(E){var P=S.select(this),L=E[s.name],O=v[r.id2name(E.anchor)],z=L[r.id2name(E.anchor)];if(L.range){var V,R=T.simpleMap(L.range,E.r2l),U=T.simpleMap(E.range,E.r2l);V=U[0]<U[1]?[Math.min(R[0],U[0]),Math.max(R[1],U[1])]:[Math.max(R[0],U[0]),Math.min(R[1],U[1])],L.range=L._input.range=T.simpleMap(V,E.l2r)}E.cleanRange("rangeslider.range");var Z=v._size,N=E.domain;L._width=Z.w*(N[1]-N[0]);var G=Math.round(Z.l+Z.w*N[0]),W=Math.round(Z.t+Z.h*(1-E._counterDomainMin)+("bottom"===E.side?E._depth:0)+L._offsetShift+s.extraPad);P.attr("transform",b(G,W)),L._rl=T.simpleMap(L.range,E.r2l);var ae=L._rl[0],re=L._rl[1],ne=re-ae;if(L.p2d=function(Te){return Te/L._width*ne+ae},L.d2p=function(Te){return(Te-ae)/ne*L._width},E.rangebreaks){var Q=E.locateBreaks(ae,re);if(Q.length){var $,X,oe=0;for($=0;$<Q.length;$++)oe+=(X=Q[$]).max-X.min;var fe=L._width/(re-ae-oe),ue=[-fe*ae];for($=0;$<Q.length;$++)ue.push(ue[ue.length-1]-fe*((X=Q[$]).max-X.min));for(L.d2p=function(Te){for(var xe=ue[0],ye=0;ye<Q.length;ye++){var _e=Q[ye];if(Te>=_e.max)xe=ue[ye+1];else if(Te<_e.min)break}return xe+fe*Te},$=0;$<Q.length;$++)(X=Q[$]).pmin=L.d2p(X.min),X.pmax=L.d2p(X.max);L.p2d=function(Te){for(var xe=ue[0],ye=0;ye<Q.length;ye++){var _e=Q[ye];if(Te>=_e.pmax)xe=ue[ye+1];else if(Te<_e.pmin)break}return(Te-xe)/fe}}}if("match"!==z.rangemode){var ge=O.r2l(z.range[0]),we=O.r2l(z.range[1])-ge;L.d2pOppAxis=function(Te){return(Te-ge)/we*L._height}}P.call(h,x,E,L).call(u,x,E,L).call(y,x,E,L).call(d,x,E,L,z).call(m,x,E,L).call(g,x,E,L),function(Te,xe,ye,_e){if(!xe._context.staticPlot){var Ie=Te.select("rect."+s.slideBoxClassName).node(),De=Te.select("rect."+s.grabAreaMinClassName).node(),be=Te.select("rect."+s.grabAreaMaxClassName).node();Te.on("mousedown",he),Te.on("touchstart",he)}function he(){var ce=S.event,me=ce.target,Pe=c(ce),Ae=Pe-Te.node().getBoundingClientRect().left,Ce=_e.d2p(ye._rl[0]),Oe=_e.d2p(ye._rl[1]),Ne=n.coverSlip();function je(Me){var Le,Ue,ze,qe=+c(Me)-Pe;switch(me){case Ie:if(ze="ew-resize",Ce+qe>ye._length||Oe+qe<0)return;Le=Ce+qe,Ue=Oe+qe;break;case De:if(ze="col-resize",Ce+qe>ye._length)return;Le=Ce+qe,Ue=Oe;break;case be:if(ze="col-resize",Oe+qe<0)return;Le=Ce,Ue=Oe+qe;break;default:ze="ew-resize",Le=Ae,Ue=Ae+qe}if(Ue<Le){var Ke=Ue;Ue=Le,Le=Ke}_e._pixelMin=Le,_e._pixelMax=Ue,a(S.select(Ne),ze),function(it,ft,dt,kt){function St(ot){return dt.l2r(T.constrain(ot,kt._rl[0],kt._rl[1]))}var Tt=St(kt.p2d(kt._pixelMin)),lt=St(kt.p2d(kt._pixelMax));window.requestAnimationFrame(function(){k.call("_guiRelayout",ft,dt._name+".range",[Tt,lt])})}(0,xe,ye,_e)}function ve(){Ne.removeEventListener("mousemove",je),Ne.removeEventListener("mouseup",ve),this.removeEventListener("touchmove",je),this.removeEventListener("touchend",ve),T.removeElement(Ne)}this.addEventListener("touchmove",je),this.addEventListener("touchend",ve),Ne.addEventListener("mousemove",je),Ne.addEventListener("mouseup",ve)}}(P,x,E,L),function(Te,xe,ye,_e,Ie,De){var be=s.handleWidth/2;function he(Me){return T.constrain(Me,0,_e._width)}function ce(Me){return T.constrain(Me,0,_e._height)}function me(Me){return T.constrain(Me,-be,_e._width+be)}var Pe=he(_e.d2p(ye._rl[0])),Ae=he(_e.d2p(ye._rl[1]));if(Te.select("rect."+s.slideBoxClassName).attr("x",Pe).attr("width",Ae-Pe),Te.select("rect."+s.maskMinClassName).attr("width",Pe),Te.select("rect."+s.maskMaxClassName).attr("x",Ae).attr("width",_e._width-Ae),"match"!==De.rangemode){var Ce=_e._height-ce(_e.d2pOppAxis(Ie._rl[1])),Oe=_e._height-ce(_e.d2pOppAxis(Ie._rl[0]));Te.select("rect."+s.maskMinOppAxisClassName).attr("x",Pe).attr("height",Ce).attr("width",Ae-Pe),Te.select("rect."+s.maskMaxOppAxisClassName).attr("x",Pe).attr("y",Oe).attr("height",_e._height-Oe).attr("width",Ae-Pe),Te.select("rect."+s.slideBoxClassName).attr("y",Ce).attr("height",Oe-Ce)}var je=Math.round(me(Pe-be))-.5,ve=Math.round(me(Ae-be))+.5;Te.select("g."+s.grabberMinClassName).attr("transform",b(je,.5)),Te.select("g."+s.grabberMaxClassName).attr("transform",b(ve,.5))}(P,0,E,L,O,z),"bottom"===E.side&&t.draw(x,E._id+"title",{propContainer:E,propName:E._name+".title",placeholder:v._dfltTitle.x,attributes:{x:E._offset+E._length/2,y:W+L._height+L._offsetShift+10+1.5*E.title.font.size,"text-anchor":"middle"}})}))}},97944:function(ie,F,e){"use strict";var S=e(79811),k=e(72736),o=e(74636),T=e(84284).LINE_SPACING,b=o.name;function p(l){var t=l&&l[b];return t&&t.visible}F.isVisible=p,F.makeData=function(l){var t=S.list({_fullLayout:l},"x",!0),i=l.margin,r=[];if(!l._has("gl2d"))for(var n=0;n<t.length;n++){var a=t[n];if(p(a)){r.push(a);var s=a[b];s._id=b+a._id,s._height=(l.height-i.b-i.t)*s.thickness,s._offsetShift=Math.floor(s.borderwidth/2)}}l._rangeSliderData=r},F.autoMarginOpts=function(l,t){var i=l._fullLayout,r=t[b],n=t._id.charAt(0),a=0,s=0;return"bottom"===t.side&&(a=t._depth,t.title.text!==i._dfltTitle[n]&&(s=1.5*t.title.font.size+10+r._offsetShift,s+=(t.title.text.match(k.BR_TAG_ALL)||[]).length*t.title.font.size*T)),{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:r._height+a+Math.max(i.margin.b,s),pad:o.extraPad+2*r._offsetShift}}},49692:function(ie,F,e){"use strict";var S=e(3400),k=e(11200),o=e(10936),T=e(97944);ie.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:S.extendFlat({},k,{yaxis:o})}}},layoutAttributes:e(11200),handleDefaults:e(94040),calcAutorange:e(26652),draw:e(20060),isVisible:T.isVisible,makeData:T.makeData,autoMarginOpts:T.autoMarginOpts}},10936:function(ie){"use strict";ie.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},93956:function(ie,F,e){"use strict";var S=e(13916),k=e(52904).line,o=e(98192).u,T=e(92880).extendFlat,b=e(67824).overrideAll,p=e(31780).templatedArray;e(36208),ie.exports=b(p("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:T({},S.xref,{}),yref:T({},S.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:k.color,width:T({},k.width,{min:1,dflt:1}),dash:T({},o,{dflt:"dot"})}}),"arraydraw","from-root")},83280:function(ie){"use strict";ie.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},74224:function(ie,F,e){"use strict";var S=e(3400),k=e(54460),o=e(51272),T=e(93956),b=e(65152);function p(l,t,i){function r(E,P){return S.coerce(l,t,T,E,P)}var n=r("path"),a="path"!==r("type",n?"path":"rect");a&&delete t.path,r("opacity"),r("line.color"),r("line.width"),r("line.dash");for(var s=["x","y"],c=0;c<2;c++){var h,u,y,d=s[c],m={_fullLayout:i},g=k.coerceRef(l,t,m,d);if((h=k.getFromId(m,g))._selectionIndices.push(t._index),y=b.rangeToShapePosition(h),u=b.shapePositionToRange(h),a){var x=d+"0",v=d+"1",_=l[x],f=l[v];l[x]=u(l[x],!0),l[v]=u(l[v],!0),k.coercePosition(t,m,r,g,x),k.coercePosition(t,m,r,g,v);var C=t[x],w=t[v];void 0!==C&&void 0!==w&&(t[x]=y(C),t[v]=y(w),l[x]=_,l[v]=f)}}a&&S.noneOrAll(l,t,["x0","x1","y0","y1"])}ie.exports=function(l,t){o(l,t,{name:"selections",handleItemDefaults:p});for(var i=t.selections,r=0;r<i.length;r++){var n=i[r];n&&void 0===n.path&&(void 0!==n.x0&&void 0!==n.x1&&void 0!==n.y0&&void 0!==n.y1||(t.selections[r]=null))}}},23640:function(ie,F,e){"use strict";var S=e(9856).readPaths,k=e(55496),o=e(1936).clearOutlineControllers,T=e(76308),b=e(43616),p=e(31780).arrayEditor,l=e(65152),t=l.getPathString;function i(c){var h=c._fullLayout;for(var u in o(c),h._selectionLayer.selectAll("path").remove(),h._plots){var y=h._plots[u].selectionLayer;y&&y.selectAll("path").remove()}for(var d=0;d<h.selections.length;d++)n(c,d)}function r(c){return c._context.editSelection}function n(c,h){c._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+h+'"]').remove();var u=l.makeSelectionsOptionsAndPlotinfo(c,h),y=u.options,d=u.plotinfo;y._input&&function(m){var g=t(c,y),x={"data-index":h,"fill-rule":"evenodd",d:g},v=y.opacity,_="rgba(0,0,0,0)",f=y.line.color||T.contrast(c._fullLayout.plot_bgcolor),C=y.line.width,w=y.line.dash;C||(C=5,w="solid");var E=r(c)&&c._fullLayout._activeSelectionIndex===h;E&&(_=c._fullLayout.activeselection.fillcolor,v=c._fullLayout.activeselection.opacity);for(var P=[],L=1;L>=0;L--){var O=m.append("path").attr(x).style("opacity",L?.1:v).call(T.stroke,f).call(T.fill,_).call(b.dashLine,L?"solid":w,L?4+C:C);if(a(O,c,y),E){var z=p(c.layout,"selections",y);O.style({cursor:"move"});var V={element:O.node(),plotinfo:d,gd:c,editHelpers:z,isActiveSelection:!0},R=S(g,c);k(R,O,V)}else O.style("pointer-events",L?"all":"none");P[L]=O}var U=P[0];P[1].node().addEventListener("click",function(){return function(Z,N){if(r(Z)){var G=+N.node().getAttribute("data-index");if(G>=0){if(G===Z._fullLayout._activeSelectionIndex)return void s(Z);Z._fullLayout._activeSelectionIndex=G,Z._fullLayout._deactivateSelection=s,i(Z)}}}(c,U)})}(c._fullLayout._selectionLayer)}function a(c,h,u){b.setClipUrl(c,"clip"+h._fullLayout._uid+(u.xref+u.yref),h)}function s(c){r(c)&&c._fullLayout._activeSelectionIndex>=0&&(o(c),delete c._fullLayout._activeSelectionIndex,i(c))}ie.exports={draw:i,drawOne:n,activateLastSelection:function(c){r(c)&&(c._fullLayout._activeSelectionIndex=c._fullLayout.selections.length-1,c._fullLayout._deactivateSelection=s,i(c))}}},34200:function(ie,F,e){"use strict";var S=e(98192).u,k=e(92880).extendFlat;ie.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:k({},S,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},81004:function(ie){"use strict";ie.exports=function(F,e,S){S("newselection.mode"),S("newselection.line.width")&&(S("newselection.line.color"),S("newselection.line.dash")),S("activeselection.fillcolor"),S("activeselection.opacity")}},5968:function(ie,F,e){"use strict";var S=e(72760).selectMode,k=e(1936).clearOutline,o=e(9856),T=o.readPaths,b=o.writePaths,p=o.fixDatesForPaths;ie.exports=function(l,t){if(l.length){var i=l[0][0];if(i){var r=i.getAttribute("d"),n=t.gd,a=n._fullLayout.newselection,s=t.plotinfo,c=s.xaxis,h=s.yaxis,u=t.isActiveSelection,y=t.dragmode,d=(n.layout||{}).selections||[];if(!S(y)&&void 0!==u){var m=n._fullLayout._activeSelectionIndex;if(m<d.length)switch(n._fullLayout.selections[m].type){case"rect":y="select";break;case"path":y="lasso"}}var g,x=T(r,n,s,u),v={xref:c._id,yref:h._id,opacity:a.opacity,line:{color:a.line.color,width:a.line.width,dash:a.line.dash}};1===x.length&&(g=x[0]),g&&5===g.length&&"select"===y?(v.type="rect",v.x0=g[0][1],v.y0=g[0][2],v.x1=g[2][1],v.y1=g[2][2]):(v.type="path",c&&h&&p(x,c,h),v.path=b(x),g=null),k(n);for(var _=t.editHelpers,f=(_||{}).modifyItem,C=[],w=0;w<d.length;w++){var E=n._fullLayout.selections[w];if(E){if(C[w]=E._input,void 0!==u&&w===n._fullLayout._activeSelectionIndex){var P=v;switch(E.type){case"rect":f("x0",P.x0),f("x1",P.x1),f("y0",P.y0),f("y1",P.y1);break;case"path":f("path",P.path)}}}else C[w]=E}return void 0===u?(C.push(v),C):_?_.getUpdateObj():{}}}}},5840:function(ie,F,e){"use strict";var S=e(3400).strTranslate;function k(o,T){switch(o.type){case"log":return o.p2d(T);case"date":return o.p2r(T,0,o.calendar);default:return o.p2r(T)}}ie.exports={p2r:k,r2p:function(o,T){switch(o.type){case"log":return o.d2p(T);case"date":return o.r2p(T,0,o.calendar);default:return o.r2p(T)}},axValue:function(o){var T="y"===o._id.charAt(0)?1:0;return function(b){return k(o,b[T])}},getTransform:function(o){return S(o.xaxis._offset,o.yaxis._offset)}}},22676:function(ie,F,e){"use strict";var S=e(23640),k=e(43156);ie.exports={moduleType:"component",name:"selections",layoutAttributes:e(93956),supplyLayoutDefaults:e(74224),supplyDrawNewSelectionDefaults:e(81004),includeBasePlot:e(36632)("selections"),draw:S.draw,drawOne:S.drawOne,reselect:k.reselect,prepSelect:k.prepSelect,clearOutline:k.clearOutline,clearSelectionsCache:k.clearSelectionsCache,selectOnClick:k.selectOnClick}},43156:function(ie,F,e){"use strict";var S=e(14756),k=e(61456),o=e(24040),T=e(43616).dashStyle,b=e(76308),p=e(93024),l=e(10624).makeEventData,t=e(72760),i=t.freeMode,r=t.rectMode,n=t.drawMode,a=t.openMode,s=t.selectMode,c=e(65152),h=e(85448),u=e(55496),y=e(1936).clearOutline,d=e(9856),m=d.handleEllipse,g=d.readPaths,x=e(93940).newShapes,v=e(5968),_=e(23640).activateLastSelection,f=e(3400),C=f.sorterAsc,w=e(92065),E=e(91200),P=e(79811).getFromId,L=e(73696),O=e(39172).redrawReglTraces,z=e(83280),V=z.MINSELECT,R=w.filter,U=w.tester,Z=e(5840),N=Z.p2r,G=Z.axValue,W=Z.getTransform;function ae(je){return void 0!==je.subplot}function re(je,ve,Me,Le,Ue,ze,qe){var Ke,it,ft,dt,kt,St,Tt,lt,ot,et,Rt=ve._hoverdata,Vt=ve._fullLayout.clickmode.indexOf("event")>-1,Ht=[];if((et=Rt)&&Array.isArray(et)&&!0!==et[0].hoverOnBox){X(je,ve,ze);var zt=function(et,gt){var ht,Ge,He=et[0],ut=-1,tt=[];for(Ge=0;Ge<gt.length;Ge++)if(He.fullData._expandedIndex===(ht=gt[Ge]).cd[0].trace._expandedIndex){if(!0===He.hoverOnBox)break;void 0!==He.pointNumber?ut=He.pointNumber:void 0!==He.binNumber&&(ut=He.binNumber,tt=He.pointNumbers);break}return{pointNumber:ut,pointNumbers:tt,searchInfo:ht}}(Rt,Ke=ue(ve,Me,Le,Ue));if(zt.pointNumbers.length>0?function(et,gt){var ht,Ge,He,ut=[];for(He=0;He<et.length;He++)(ht=et[He]).cd[0].trace.selectedpoints&&ht.cd[0].trace.selectedpoints.length>0&&ut.push(ht);if(1===ut.length&&ut[0]===gt.searchInfo&&(Ge=gt.searchInfo.cd[0].trace).selectedpoints.length===gt.pointNumbers.length){for(He=0;He<gt.pointNumbers.length;He++)if(Ge.selectedpoints.indexOf(gt.pointNumbers[He])<0)return!1;return!0}return!1}(Ke,zt):function(et){var gt,ht,Ge=0;for(ht=0;ht<et.length;ht++)if((gt=et[ht].cd[0].trace).selectedpoints&&(gt.selectedpoints.length>1||(Ge+=gt.selectedpoints.length)>1))return!1;return 1===Ge}(Ke)&&(St=we(zt))){for(qe&&qe.remove(),ot=0;ot<Ke.length;ot++)(it=Ke[ot])._module.selectPoints(it,!1);Te(ve,Ke),oe(ze),Vt&&Ne(ve)}else{for(Tt=je.shiftKey&&(void 0!==St?St:we(zt)),ft=function(et,gt,ht){return{pointNumber:et,searchInfo:gt,subtract:!!ht}}(zt.pointNumber,zt.searchInfo,Tt),dt=$(ze.selectionDefs.concat([ft])),ot=0;ot<Ke.length;ot++)if(kt=ye(Ke[ot]._module.selectPoints(Ke[ot],dt),Ke[ot]),Ht.length)for(var Qe=0;Qe<kt.length;Qe++)Ht.push(kt[Qe]);else Ht=kt;if(Te(ve,Ke,lt={points:Ht}),ft&&ze&&ze.selectionDefs.push(ft),qe){var nt=ze.mergedPolygons,We=a(ze.dragmode);u(_e(nt,We),qe,ze)}Vt&&Oe(ve,lt)}}}function ne(je){return"pointNumber"in je&&"searchInfo"in je}function Q(je){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(ve,Me,Le,Ue){return Ue.cd[0].trace._expandedIndex===je.searchInfo.cd[0].trace._expandedIndex&&Le===je.pointNumber},isRect:!1,degenerate:!1,subtract:!!je.subtract}}function $(je){if(je.length){for(var ve=[],Me=ne(je[0])?0:je[0][0][0],Le=Me,Ue=ne(je[0])?0:je[0][0][1],ze=Ue,qe=0;qe<je.length;qe++)if(ne(je[qe]))ve.push(Q(je[qe]));else{var Ke=U(je[qe]);Ke.subtract=!!je[qe].subtract,ve.push(Ke),Me=Math.min(Me,Ke.xmin),Le=Math.max(Le,Ke.xmax),Ue=Math.min(Ue,Ke.ymin),ze=Math.max(ze,Ke.ymax)}return{xmin:Me,xmax:Le,ymin:Ue,ymax:ze,pts:[],contains:function(it,ft,dt,kt){for(var St=!1,Tt=0;Tt<ve.length;Tt++)ve[Tt].contains(it,ft,dt,kt)&&(St=!ve[Tt].subtract);return St},isRect:!1,degenerate:!1}}}function X(je,ve,Me){var Le=ve._fullLayout,Ue=Me.plotinfo,ze=Me.dragmode,qe=Le._lastSelectedSubplot&&Le._lastSelectedSubplot===Ue.id,Ke=(je.shiftKey||je.altKey)&&!(n(ze)&&a(ze));qe&&Ke&&Ue.selection&&Ue.selection.selectionDefs&&!Me.selectionDefs?(Me.selectionDefs=Ue.selection.selectionDefs,Me.mergedPolygons=Ue.selection.mergedPolygons):Ke&&Ue.selection||oe(Me),qe||(y(ve),Le._lastSelectedSubplot=Ue.id)}function oe(je,ve){var Me=je.dragmode,Le=je.plotinfo,Ue=je.gd;Ue._fullLayout._activeShapeIndex>=0&&Ue._fullLayout._deactivateShape(Ue),Ue._fullLayout._activeSelectionIndex>=0&&Ue._fullLayout._deactivateSelection(Ue);var ze=Ue._fullLayout._zoomlayer,qe=n(Me),Ke=s(Me);if(qe||Ke){var it,ft,dt=ze.selectAll(".select-outline-"+Le.id);dt&&Ue._fullLayout._outlining&&(qe&&(it=x(dt,je)),it&&o.call("_guiRelayout",Ue,{shapes:it}),Ke&&!ae(je)&&(ft=v(dt,je)),ft&&(Ue._fullLayout._noEmitSelectedAtStart=!0,o.call("_guiRelayout",Ue,{selections:ft}).then(function(){ve&&_(Ue)})),Ue._fullLayout._outlining=!1)}Le.selection={},Le.selection.selectionDefs=je.selectionDefs=[],Le.selection.mergedPolygons=je.mergedPolygons=[]}function fe(je){return je._id}function ue(je,ve,Me,Le){if(!je.calcdata)return[];var Ue,ze,qe,Ke=[],it=ve.map(fe),ft=Me.map(fe);for(qe=0;qe<je.calcdata.length;qe++)if(!0===(ze=(Ue=je.calcdata[qe])[0].trace).visible&&ze._module&&ze._module.selectPoints)if(!ae({subplot:Le})||ze.subplot!==Le&&ze.geo!==Le)if("splom"===ze.type){if(ze._xaxes[it[0]]&&ze._yaxes[ft[0]]){var dt=ge(ze._module,Ue,ve[0],Me[0]);dt.scene=je._fullLayout._splomScenes[ze.uid],Ke.push(dt)}}else if("sankey"===ze.type){var kt=ge(ze._module,Ue,ve[0],Me[0]);Ke.push(kt)}else{if(!(-1!==it.indexOf(ze.xaxis)||ze._xA&&ze._xA.overlaying)||!(-1!==ft.indexOf(ze.yaxis)||ze._yA&&ze._yA.overlaying))continue;Ke.push(ge(ze._module,Ue,P(je,ze.xaxis),P(je,ze.yaxis)))}else Ke.push(ge(ze._module,Ue,ve[0],Me[0]));return Ke}function ge(je,ve,Me,Le){return{_module:je,cd:ve,xaxis:Me,yaxis:Le}}function we(je){var ve=je.searchInfo.cd[0].trace,Le=je.pointNumbers;return!!ve.selectedpoints&&ve.selectedpoints.indexOf(Le.length>0?Le[0]:je.pointNumber)>-1}function Te(je,ve,Me){var Le,Ue;for(Le=0;Le<ve.length;Le++){var ze=ve[Le].cd[0].trace._fullInput,qe=je._fullLayout._tracePreGUI[ze.uid]||{};void 0===qe.selectedpoints&&(qe.selectedpoints=ze._input.selectedpoints||null)}if(Me){var Ke=Me.points||[];for(Le=0;Le<ve.length;Le++)(Ue=ve[Le].cd[0].trace)._input.selectedpoints=Ue._fullInput.selectedpoints=[],Ue._fullInput!==Ue&&(Ue.selectedpoints=[]);for(var it=0;it<Ke.length;it++){var ft=Ke[it],dt=ft.data,kt=ft.fullData,St=ft.pointIndex,Tt=ft.pointIndices;Tt?([].push.apply(dt.selectedpoints,Tt),Ue._fullInput!==Ue&&[].push.apply(kt.selectedpoints,Tt)):(dt.selectedpoints.push(St),Ue._fullInput!==Ue&&kt.selectedpoints.push(St))}}else for(Le=0;Le<ve.length;Le++)delete(Ue=ve[Le].cd[0].trace).selectedpoints,delete Ue._input.selectedpoints,Ue._fullInput!==Ue&&delete Ue._fullInput.selectedpoints;!function(lt,ot){for(var Rt=!1,Vt=0;Vt<ot.length;Vt++){var Ht=ot[Vt],zt=Ht.cd;o.traceIs(zt[0].trace,"regl")&&(Rt=!0);var Qe=Ht._module,nt=Qe.styleOnSelect||Qe.style;nt&&(nt(lt,zt,zt[0].node3),zt[0].nodeRangePlot3&&nt(lt,zt,zt[0].nodeRangePlot3))}Rt&&(L(lt),O(lt))}(je,ve)}function xe(je,ve,Me){for(var Le=(Me?S.difference:S.union)({regions:je},{regions:[ve]}).regions.reverse(),Ue=0;Ue<Le.length;Ue++){var ze=Le[Ue];ze.subtract=me(ze,Le.slice(0,Ue))}return Le}function ye(je,ve){if(Array.isArray(je))for(var Me=ve.cd,Le=ve.cd[0].trace,Ue=0;Ue<je.length;Ue++)je[Ue]=l(je[Ue],Le,Me);return je}function _e(je,ve){for(var Me=[],Le=0;Le<je.length;Le++){Me[Le]=[];for(var Ue=0;Ue<je[Le].length;Ue++){Me[Le][Ue]=[],Me[Le][Ue][0]=Ue?"L":"M";for(var ze=0;ze<je[Le][Ue].length;ze++)Me[Le][Ue].push(je[Le][Ue][ze])}ve||Me[Le].push(["Z",Me[Le][0][1],Me[Le][0][2]])}return Me}function Ie(je,ve){for(var Me,Le,Ue=[],ze=[],qe=0;qe<ve.length;qe++){var Ke=ve[qe];Le=Ke._module.selectPoints(Ke,je),ze.push(Le),Me=ye(Le,Ke),Ue=Ue.concat(Me)}return Ue}function De(je,ve,Me,Le,Ue){var ze,qe,Ke,it=!!Le;Ue&&(ze=Ue.plotinfo,qe=Ue.xaxes[0]._id,Ke=Ue.yaxes[0]._id);var ft=[],dt=[],kt=ce(je),St=je._fullLayout;if(ze){var Tt=St._zoomlayer,lt=St.dragmode,ot=n(lt),Rt=s(lt);if(ot||Rt){var Vt=P(je,qe,"x"),Ht=P(je,Ke,"y");if(Vt&&Ht){var zt=Tt.selectAll(".select-outline-"+ze.id);if(zt&&je._fullLayout._outlining&&zt.length){for(var Qe=zt[0][0].getAttribute("d"),nt=g(Qe,je,ze),We=[],et=0;et<nt.length;et++){for(var gt=nt[et],ht=[],Ge=0;Ge<gt.length;Ge++)ht.push([Pe(Vt,gt[Ge][1]),Pe(Ht,gt[Ge][2])]);ht.xref=qe,ht.yref=Ke,ht.subtract=me(ht,We),We.push(ht)}kt=kt.concat(We)}}}}var He=qe&&Ke?[qe+Ke]:St._subplots.cartesian;!function(Vn){var Gn=Vn.calcdata;if(Gn)for(var Nn=0;Nn<Gn.length;Nn++){var $n=Vn._fullLayout._splomScenes;if($n){var mr=$n[Gn[Nn][0].trace.uid];mr&&(mr.selectBatch=[])}}}(je);for(var ut={},tt=0;tt<He.length;tt++){var xt=He[tt],At=xt.indexOf("y"),Mt=xt.slice(0,At),yt=xt.slice(At),Pt=qe&&Ke?Me:void 0;if(Pt=he(kt,Mt,yt,Pt)){var Ct=Le;if(!it){var Dt=P(je,Mt,"x"),Ut=P(je,yt,"y");Ct=ue(je,[Dt],[Ut],xt);for(var Bt=0;Bt<Ct.length;Bt++){var qt=Ct[Bt],an=qt.cd[0],mn=an.trace;if("scattergl"===qt._module.name&&!an.t.xpx){var Qt=mn.x,sn=mn.y,Kt=mn._length;an.t.xpx=[],an.t.ypx=[];for(var qn=0;qn<Kt;qn++)an.t.xpx[qn]=Dt.c2p(Qt[qn]),an.t.ypx[qn]=Ut.c2p(sn[qn])}"splom"===qt._module.name&&(ut[mn.uid]||(ut[mn.uid]=!0))}}var Fn=Ie(Pt,Ct);ft=ft.concat(Fn),dt=dt.concat(Ct)}}var Sn={points:ft};Te(je,dt,Sn);var hn=St.clickmode.indexOf("event")>-1&&ve;if(!ze&&ve){var wn=ce(je,!0);if(wn.length){var pn=wn[0].xref,An=wn[0].yref;if(pn&&An){var On=Ae(wn);Ce([P(je,pn,"x"),P(je,An,"y")])(Sn,On)}}je._fullLayout._noEmitSelectedAtStart?je._fullLayout._noEmitSelectedAtStart=!1:hn&&Oe(je,Sn),St._reselect=!1}if(!ze&&St._deselect){var Dn=St._deselect;(function(Vn,Gn,Nn){for(var ir=0;ir<Nn.length;ir++){var $n=Nn[ir];if($n.xaxis&&$n.xaxis._id===Vn&&$n.yaxis&&$n.yaxis._id===Gn)return!0}return!1})(qe=Dn.xref,Ke=Dn.yref,dt)||be(je,qe,Ke,Le),hn&&(Sn.points.length?Oe(je,Sn):Ne(je)),St._deselect=!1}return{eventData:Sn,selectionTesters:Me}}function be(je,ve,Me,Le){Le=ue(je,[P(je,ve,"x")],[P(je,Me,"y")],ve+Me);for(var Ue=0;Ue<Le.length;Ue++){var ze=Le[Ue];ze._module.selectPoints(ze,!1)}Te(je,Le)}function he(je,ve,Me,Le){for(var Ue,ze=0;ze<je.length;ze++){var qe=je[ze];ve===qe.xref&&Me===qe.yref&&(Ue?Le=$(Ue=xe(Ue,qe,!!qe.subtract)):(Ue=[qe],Le=U(qe)))}return Le}function ce(je,ve){for(var Me=[],Le=je._fullLayout,Ue=Le.selections,ze=Ue.length,qe=0;qe<ze;qe++)if(!ve||qe===Le._activeSelectionIndex){var Ke=Ue[qe];if(Ke){var it,ft,dt,kt,St,Tt=Ke.xref,lt=Ke.yref,ot=P(je,Tt,"x"),Rt=P(je,lt,"y");if("rect"===Ke.type){St=[];var Vt=Pe(ot,Ke.x0),Ht=Pe(ot,Ke.x1),zt=Pe(Rt,Ke.y0),Qe=Pe(Rt,Ke.y1);St=[[Vt,zt],[Vt,Qe],[Ht,Qe],[Ht,zt]],it=Math.min(Vt,Ht),ft=Math.max(Vt,Ht),dt=Math.min(zt,Qe),kt=Math.max(zt,Qe),St.xmin=it,St.xmax=ft,St.ymin=dt,St.ymax=kt,St.xref=Tt,St.yref=lt,St.subtract=!1,St.isRect=!0,Me.push(St)}else if("path"===Ke.type)for(var nt=Ke.path.split("Z"),We=[],et=0;et<nt.length;et++){var gt=nt[et];if(gt){var ht=c.extractPathCoords(gt+="Z",h.paramIsX,"raw"),Ge=c.extractPathCoords(gt,h.paramIsY,"raw");it=1/0,ft=-1/0,dt=1/0,kt=-1/0,St=[];for(var He=0;He<ht.length;He++){var ut=Pe(ot,ht[He]),tt=Pe(Rt,Ge[He]);St.push([ut,tt]),it=Math.min(ut,it),ft=Math.max(ut,ft),dt=Math.min(tt,dt),kt=Math.max(tt,kt)}St.xmin=it,St.xmax=ft,St.ymin=dt,St.ymax=kt,St.xref=Tt,St.yref=lt,St.subtract=me(St,We),We.push(St),Me.push(St)}}}}return Me}function me(je,ve){for(var Me=!1,Le=0;Le<ve.length;Le++)for(var Ue=ve[Le],ze=0;ze<je.length;ze++)if(k(je[ze],Ue)){Me=!Me;break}return Me}function Pe(je,ve){return"date"===je.type&&(ve=ve.replace("_"," ")),"log"===je.type?je.c2p(ve):je.r2p(ve,null,je.calendar)}function Ae(je){for(var ve=je.length,Me=[],Le=0;Le<ve;Le++){var Ue=je[Le];Me=(Me=Me.concat(Ue)).concat([Ue[0]])}return(ze=Me).isRect=5===ze.length&&ze[0][0]===ze[4][0]&&ze[0][1]===ze[4][1]&&ze[0][0]===ze[1][0]&&ze[2][0]===ze[3][0]&&ze[0][1]===ze[3][1]&&ze[1][1]===ze[2][1]||ze[0][1]===ze[1][1]&&ze[2][1]===ze[3][1]&&ze[0][0]===ze[3][0]&&ze[1][0]===ze[2][0],ze.isRect&&(ze.xmin=Math.min(ze[0][0],ze[2][0]),ze.xmax=Math.max(ze[0][0],ze[2][0]),ze.ymin=Math.min(ze[0][1],ze[2][1]),ze.ymax=Math.max(ze[0][1],ze[2][1])),ze;var ze}function Ce(je){return function(ve,Me){for(var Le,Ue,ze=0;ze<je.length;ze++){var qe=je[ze],Ke=qe._id,it=Ke.charAt(0);if(Me.isRect){Le||(Le={});var ft=Me[it+"min"],dt=Me[it+"max"];void 0!==ft&&void 0!==dt&&(Le[Ke]=[N(qe,ft),N(qe,dt)].sort(C))}else Ue||(Ue={}),Ue[Ke]=Me.map(G(qe))}Le&&(ve.range=Le),Ue&&(ve.lassoPoints=Ue)}}function Oe(je,ve){ve&&(ve.selections=(je.layout||{}).selections||[]),je.emit("plotly_selected",ve)}function Ne(je){je.emit("plotly_deselect",null)}ie.exports={reselect:De,prepSelect:function(je,ve,Me,Le,Ue){var ze=!ae(Le),qe=i(Ue),Ke=r(Ue),it=a(Ue),ft=n(Ue),dt=s(Ue),kt="drawcircle"===Ue,St="drawline"===Ue||kt,Tt=Le.gd,lt=Tt._fullLayout,ot=dt&&"immediate"===lt.newselection.mode&&ze,Rt=lt._zoomlayer,Vt=Le.element.getBoundingClientRect(),Ht=Le.plotinfo,zt=W(Ht),Qe=ve-Vt.left,nt=Me-Vt.top;lt._calcInverseTransform(Tt);var et,gt,ht,Ge,He,ut,tt,We=f.apply3DTransform(lt._invTransform)(Qe,nt),xt=lt._invScaleX,At=lt._invScaleY,Mt=Qe=We[0],yt=nt=We[1],Pt="M"+Qe+","+nt,Ct=Le.xaxes[0],Dt=Le.yaxes[0],Ut=Ct._length,Bt=Dt._length,qt=je.altKey&&!(n(Ue)&&it);X(je,Tt,Le),qe&&(et=R([[Qe,nt]],z.BENDPX));var an=Rt.selectAll("path.select-outline-"+Ht.id).data([1]),mn=ft?lt.newshape:lt.newselection;ft&&(Le.hasText=mn.label.text||mn.label.texttemplate);var Qt=ft&&!it?mn.fillcolor:"rgba(0,0,0,0)",sn=mn.line.color||(ze?b.contrast(Tt._fullLayout.plot_bgcolor):"#7f7f7f");an.enter().append("path").attr("class","select-outline select-outline-"+Ht.id).style({opacity:ft?mn.opacity/2:1,"stroke-dasharray":T(mn.line.dash,mn.line.width),"stroke-width":mn.line.width+"px","shape-rendering":"crispEdges"}).call(b.stroke,sn).call(b.fill,Qt).attr("fill-rule","evenodd").classed("cursor-move",!!ft).attr("transform",zt).attr("d",Pt+"Z");var Kt=Rt.append("path").attr("class","zoombox-corners").style({fill:b.background,stroke:b.defaultLine,"stroke-width":1}).attr("transform",zt).attr("d","M0,0Z");if(ft&&Le.hasText){var qn=Rt.select(".label-temp");qn.empty()&&(qn=Rt.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var Fn=lt._uid+z.SELECTID,Sn=[],hn=ue(Tt,Le.xaxes,Le.yaxes,Le.subplot);ot&&!je.shiftKey&&(Le._clearSubplotSelections=function(){if(ze){var pn=Ct._id,An=Dt._id;be(Tt,pn,An,hn);for(var On=(Tt.layout||{}).selections||[],Dn=[],Vn=!1,Gn=0;Gn<On.length;Gn++){var Nn=lt.selections[Gn];Nn.xref!==pn||Nn.yref!==An?Dn.push(On[Gn]):Vn=!0}Vn&&(Tt._fullLayout._noEmitSelectedAtStart=!0,o.call("_guiRelayout",Tt,{selections:Dn}))}});var pn,wn=(pn=Le).plotinfo.fillRangeItems||Ce(pn.xaxes.concat(pn.yaxes));Le.moveFn=function(pn,An){Le._clearSubplotSelections&&(Le._clearSubplotSelections(),Le._clearSubplotSelections=void 0),Mt=Math.max(0,Math.min(Ut,xt*pn+Qe)),yt=Math.max(0,Math.min(Bt,At*An+nt));var On=Math.abs(Mt-Qe),Dn=Math.abs(yt-nt);if(Ke){var Vn,Gn,Nn;if(dt){var ir=lt.selectdirection;switch(Vn="any"===ir?Dn<Math.min(.6*On,V)?"h":On<Math.min(.6*Dn,V)?"v":"d":ir){case"h":Gn=kt?Bt/2:0,Nn=Bt;break;case"v":Gn=kt?Ut/2:0,Nn=Ut}}if(ft)switch(lt.newshape.drawdirection){case"vertical":Vn="h",Gn=kt?Bt/2:0,Nn=Bt;break;case"horizontal":Vn="v",Gn=kt?Ut/2:0,Nn=Ut;break;case"ortho":On<Dn?(Vn="h",Gn=nt,Nn=yt):(Vn="v",Gn=Qe,Nn=Mt);break;default:Vn="d"}"h"===Vn?((Ge=St?m(kt,[Mt,Gn],[Mt,Nn]):[[Qe,Gn],[Qe,Nn],[Mt,Nn],[Mt,Gn]]).xmin=St?Mt:Math.min(Qe,Mt),Ge.xmax=St?Mt:Math.max(Qe,Mt),Ge.ymin=Math.min(Gn,Nn),Ge.ymax=Math.max(Gn,Nn),Kt.attr("d","M"+Ge.xmin+","+(nt-V)+"h-4v"+2*V+"h4ZM"+(Ge.xmax-1)+","+(nt-V)+"h4v"+2*V+"h-4Z")):"v"===Vn?((Ge=St?m(kt,[Gn,yt],[Nn,yt]):[[Gn,nt],[Gn,yt],[Nn,yt],[Nn,nt]]).xmin=Math.min(Gn,Nn),Ge.xmax=Math.max(Gn,Nn),Ge.ymin=St?yt:Math.min(nt,yt),Ge.ymax=St?yt:Math.max(nt,yt),Kt.attr("d","M"+(Qe-V)+","+Ge.ymin+"v-4h"+2*V+"v4ZM"+(Qe-V)+","+(Ge.ymax-1)+"v4h"+2*V+"v-4Z")):"d"===Vn&&((Ge=St?m(kt,[Qe,nt],[Mt,yt]):[[Qe,nt],[Qe,yt],[Mt,yt],[Mt,nt]]).xmin=Math.min(Qe,Mt),Ge.xmax=Math.max(Qe,Mt),Ge.ymin=Math.min(nt,yt),Ge.ymax=Math.max(nt,yt),Kt.attr("d","M0,0Z"))}else qe&&(et.addPt([Mt,yt]),Ge=et.filtered);if(Le.selectionDefs&&Le.selectionDefs.length?(ht=xe(Le.mergedPolygons,Ge,qt),Ge.subtract=qt,gt=$(Le.selectionDefs.concat([Ge]))):(ht=[Ge],gt=U(Ge)),u(_e(ht,it),an,Le),dt){var $n,mr=De(Tt,!1),lr=mr.eventData?mr.eventData.points.slice():[];mr=De(Tt,!1,gt,hn,Le),gt=mr.selectionTesters,tt=mr.eventData,$n=et?et.filtered:Ae(ht),E.throttle(Fn,z.SELECTDELAY,function(){for(var vr=(Sn=Ie(gt,hn)).slice(),or=0;or<lr.length;or++){for(var Or=lr[or],fn=!1,gn=0;gn<vr.length;gn++)if(vr[gn].curveNumber===Or.curveNumber&&vr[gn].pointNumber===Or.pointNumber){fn=!0;break}fn||vr.push(Or)}vr.length&&(tt||(tt={}),tt.points=vr),wn(tt,$n),Tt.emit("plotly_selecting",tt)})}},Le.clickFn=function(pn,An){if(Kt.remove(),Tt._fullLayout._activeShapeIndex>=0)Tt._fullLayout._deactivateShape(Tt);else if(!ft){var On=lt.clickmode;E.done(Fn).then(function(){if(E.clear(Fn),2===pn){for(an.remove(),He=0;He<hn.length;He++)(ut=hn[He])._module.selectPoints(ut,!1);if(Te(Tt,hn),oe(Le),Ne(Tt),hn.length){var Dn=hn[0].xaxis,Vn=hn[0].yaxis;if(Dn&&Vn){for(var Gn=[],Nn=Tt._fullLayout.selections,ir=0;ir<Nn.length;ir++){var $n=Nn[ir];$n&&($n.xref===Dn._id&&$n.yref===Vn._id||Gn.push($n))}Gn.length<Nn.length&&(Tt._fullLayout._noEmitSelectedAtStart=!0,o.call("_guiRelayout",Tt,{selections:Gn}))}}}else On.indexOf("select")>-1&&re(An,Tt,Le.xaxes,Le.yaxes,Le.subplot,Le,an),"event"===On&&Oe(Tt,void 0);p.click(Tt,An,Ht.id)}).catch(f.error)}},Le.doneFn=function(){Kt.remove(),E.done(Fn).then(function(){E.clear(Fn),!ot&&Ge&&Le.selectionDefs&&(Ge.subtract=qt,Le.selectionDefs.push(Ge),Le.mergedPolygons.length=0,[].push.apply(Le.mergedPolygons,ht)),(ot||ft)&&oe(Le,ot),Le.doneFnCompleted&&Le.doneFnCompleted(Sn),dt&&Oe(Tt,tt)}).catch(f.error)}},clearOutline:y,clearSelectionsCache:oe,selectOnClick:re}},46056:function(ie,F,e){"use strict";var S=e(13916),k=e(25376),o=e(52904).line,T=e(98192).u,b=e(92880).extendFlat,p=e(31780).templatedArray,l=(e(36208),e(45464)),t=e(21776).ye,i=e(97728);ie.exports=p("shape",{visible:b({},l.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:b({},l.legend,{editType:"calc+arraydraw"}),legendgroup:b({},l.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:b({},l.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:k({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:b({},l.legendrank,{editType:"calc+arraydraw"}),legendwidth:b({},l.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",editType:"arraydraw"},xref:b({},S.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:b({},S.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:b({},o.color,{editType:"arraydraw"}),width:b({},o.width,{editType:"calc+arraydraw"}),dash:b({},T,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:t({},{keys:Object.keys(i)}),font:k({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})},96084:function(ie,F,e){"use strict";var S=e(3400),k=e(54460),o=e(85448),T=e(65152);function b(i){return l(i.line.width,i.xsizemode,i.x0,i.x1,i.path,!1)}function p(i){return l(i.line.width,i.ysizemode,i.y0,i.y1,i.path,!0)}function l(i,r,n,a,s,c){var h=i/2,u=c;if("pixel"===r){var y=s?T.extractPathCoords(s,c?o.paramIsY:o.paramIsX):[n,a],d=S.aggNums(Math.max,null,y),m=S.aggNums(Math.min,null,y),g=m<0?Math.abs(m)+h:h,x=d>0?d+h:h;return{ppad:h,ppadplus:u?g:x,ppadminus:u?x:g}}return{ppad:h}}function t(i,r,n,a,s){var c="category"===i.type||"multicategory"===i.type?i.r2c:i.d2c;if(void 0!==r)return[c(r),c(n)];if(a){var h,u,y,d,m=1/0,g=-1/0,x=a.match(o.segmentRE);for("date"===i.type&&(c=T.decodeDate(c)),h=0;h<x.length;h++)void 0!==(u=s[x[h].charAt(0)].drawn)&&(!(y=x[h].substr(1).match(o.paramRE))||y.length<u||((d=c(y[u]))<m&&(m=d),d>g&&(g=d)));return g>=m?[m,g]:void 0}}ie.exports=function(i){var n=S.filterVisible(i._fullLayout.shapes);if(n.length&&i._fullData.length)for(var a=0;a<n.length;a++){var s,c,h=n[a];h._extremes={};var u=k.getRefType(h.xref),y=k.getRefType(h.yref);if("paper"!==h.xref&&"domain"!==u){var d="pixel"===h.xsizemode?h.xanchor:h.x0,m="pixel"===h.xsizemode?h.xanchor:h.x1;(c=t(s=k.getFromId(i,h.xref),d,m,h.path,o.paramIsX))&&(h._extremes[s._id]=k.findExtremes(s,c,b(h)))}if("paper"!==h.yref&&"domain"!==y){var g="pixel"===h.ysizemode?h.yanchor:h.y0,x="pixel"===h.ysizemode?h.yanchor:h.y1;(c=t(s=k.getFromId(i,h.yref),g,x,h.path,o.paramIsY))&&(h._extremes[s._id]=k.findExtremes(s,c,p(h)))}}}},85448:function(ie){"use strict";ie.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},43712:function(ie,F,e){"use strict";var S=e(3400),k=e(54460),o=e(51272),T=e(46056),b=e(65152);function p(l,t,i){function r(Z,N){return S.coerce(l,t,T,Z,N)}if(t._isShape=!0,r("visible")){r("showlegend")&&(r("legend"),r("legendwidth"),r("legendgroup"),r("legendgrouptitle.text"),S.coerceFont(r,"legendgrouptitle.font"),r("legendrank"));var n=r("path"),a=r("type",n?"path":"rect"),s="path"!==a;s&&delete t.path,r("editable"),r("layer"),r("opacity"),r("fillcolor"),r("fillrule"),r("line.width")&&(r("line.color"),r("line.dash"));for(var c=r("xsizemode"),h=r("ysizemode"),u=["x","y"],y=0;y<2;y++){var d,m,g,x=u[y],v=x+"anchor",_="x"===x?c:h,f={_fullLayout:i},C=k.coerceRef(l,t,f,x,void 0,"paper");if("range"===k.getRefType(C)?((d=k.getFromId(f,C))._shapeIndices.push(t._index),g=b.rangeToShapePosition(d),m=b.shapePositionToRange(d)):m=g=S.identity,s){var w=x+"0",E=x+"1",P=l[w],L=l[E];l[w]=m(l[w],!0),l[E]=m(l[E],!0),"pixel"===_?(r(w,0),r(E,10)):(k.coercePosition(t,f,r,C,w,.25),k.coercePosition(t,f,r,C,E,.75)),t[w]=g(t[w]),t[E]=g(t[E]),l[w]=P,l[E]=L}if("pixel"===_){var O=l[v];l[v]=m(l[v],!0),k.coercePosition(t,f,r,C,v,.25),t[v]=g(t[v]),l[v]=O}}s&&S.noneOrAll(l,t,["x0","x1","y0","y1"]);var z,V,R="line"===a;if(s&&(z=r("label.texttemplate")),z||(V=r("label.text")),V||z){r("label.textangle");var U=r("label.textposition",R?"middle":"middle center");r("label.xanchor"),r("label.yanchor",(N=U,R?"bottom":-1!==N.indexOf("top")?"top":-1!==N.indexOf("bottom")?"bottom":"middle")),r("label.padding"),S.coerceFont(r,"label.font",i.font)}}var N}ie.exports=function(l,t){o(l,t,{name:"shapes",handleItemDefaults:p})}},60728:function(ie,F,e){"use strict";var S=e(3400),k=e(54460),o=e(72736),T=e(43616),b=e(9856).readPaths,p=e(65152),l=p.getPathString,t=e(97728),i=e(84284).FROM_TL;ie.exports=function(r,n,a,s){if(s.selectAll(".shape-label").remove(),a.label.text||a.label.texttemplate){var c;if(a.label.texttemplate){var h={};if("path"!==a.type){var u=k.getFromId(r,a.xref),y=k.getFromId(r,a.yref);for(var d in t){var m=t[d](a,u,y);void 0!==m&&(h[d]=m)}}c=S.texttemplateStringForShapes(a.label.texttemplate,{},r._fullLayout._d3locale,h)}else c=a.label.text;var g,x,v,_,f={"data-index":n},C=a.label.font,w=s.append("g").attr(f).classed("shape-label",!0).append("text").attr({"data-notex":1}).classed("shape-label-text",!0).text(c);if(a.path){var E=l(r,a),P=b(E,r);g=1/0,v=1/0,x=-1/0,_=-1/0;for(var L=0;L<P.length;L++)for(var O=0;O<P[L].length;O++)for(var z=P[L][O],V=1;V<z.length;V+=2){var R=z[V],U=z[V+1];g=Math.min(g,R),x=Math.max(x,R),v=Math.min(v,U),_=Math.max(_,U)}}else{var Z=k.getFromId(r,a.xref),N=k.getRefType(a.xref),G=k.getFromId(r,a.yref),W=k.getRefType(a.yref),ae=p.getDataToPixel(r,Z,!1,N),re=p.getDataToPixel(r,G,!0,W);g=ae(a.x0),x=ae(a.x1),v=re(a.y0),_=re(a.y1)}var ne=a.label.textangle;"auto"===ne&&(ne="line"===a.type?(fe=g,ue=v,ge=x,we=_,xe=Math.abs(ge-fe),-180/Math.PI*Math.atan2(ge>=fe?ue-we:we-ue,xe)):0),w.call(function(fe){return fe.call(T.font,C).attr({}),o.convertToTspans(fe,r),fe});var Q=function(fe,ue,ge,we,Te,xe,ye){var _e,Ie,De,be,he=Te.label.textposition,ce=Te.label.textangle,me=Te.label.padding,Pe=Te.type,Ae=Math.PI/180*xe,Ce=Math.sin(Ae),Oe=Math.cos(Ae),Ne=Te.label.xanchor,je=Te.label.yanchor;if("line"===Pe){"start"===he?(_e=fe,Ie=ue):"end"===he?(_e=ge,Ie=we):(_e=(fe+ge)/2,Ie=(ue+we)/2),"auto"===Ne&&(Ne="start"===he?"auto"===ce?ge>fe?"left":ge<fe?"right":"center":ge>fe?"right":ge<fe?"left":"center":"end"===he?"auto"===ce?ge>fe?"right":ge<fe?"left":"center":ge>fe?"left":ge<fe?"right":"center":"center");var ve={bottom:-1,middle:0,top:1};if("auto"===ce){var Me=ve[je];De=-me*Ce*Me,be=me*Oe*Me}else De=me*{left:1,center:0,right:-1}[Ne],be=me*ve[je];_e+=De,Ie+=be}else De=me+3,-1!==he.indexOf("right")?(_e=Math.max(fe,ge)-De,"auto"===Ne&&(Ne="right")):-1!==he.indexOf("left")?(_e=Math.min(fe,ge)+De,"auto"===Ne&&(Ne="left")):(_e=(fe+ge)/2,"auto"===Ne&&(Ne="center")),Ie=-1!==he.indexOf("top")?Math.min(ue,we):-1!==he.indexOf("bottom")?Math.max(ue,we):(ue+we)/2,be=me,"bottom"===je?Ie-=be:"top"===je&&(Ie+=be);var Le=i[je],Ue=Te.label.font.size,ze=ye.height;return{textx:_e+(ze*Le-Ue)*Ce,texty:Ie+-(ze*Le-Ue)*Oe,xanchor:Ne}}(g,v,x,_,a,ne,T.bBox(w.node())),$=Q.textx,X=Q.texty;w.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[Q.xanchor],y:X,x:$,transform:"rotate("+ne+","+$+","+X+")"}).call(o.positionText,$,X)}var fe,ue,ge,we,xe}},55496:function(ie,F,e){"use strict";var S=e(3400).strTranslate,k=e(86476),o=e(72760),T=o.drawMode,b=o.selectMode,p=e(24040),l=e(76308),t=e(7e3),i=t.i000,r=t.i090,n=t.i180,a=t.i270,s=e(1936).clearOutlineControllers,c=e(9856),h=c.pointsOnRectangle,u=c.pointsOnEllipse,y=c.writePaths,d=e(93940).newShapes,m=e(93940).createShapeObj,g=e(5968),x=e(60728);function v(_,f){var C,w,E,O=_.length;return w=_[C=(f+1)%O][1],E=_[C][2],w===_[f][1]&&E===_[f][2]&&(w=_[C=(f+2)%O][1],E=_[C][2]),[C,w,E]}ie.exports=function _(f,C,w,E){E||(E=0);var P=w.gd;function L(){_(f,C,w,E++),(u(f[0])||w.hasText)&&O({redrawing:!0})}function O(Te){var xe={};void 0!==w.isActiveShape&&(w.isActiveShape=!1,xe=d(C,w)),void 0!==w.isActiveSelection&&(w.isActiveSelection=!1,xe=g(C,w),P._fullLayout._reselect=!0),Object.keys(xe).length&&p.call((Te||{}).redrawing?"relayout":"_guiRelayout",P,xe)}var z,V,R,U,Z,N=P._fullLayout._zoomlayer,G=w.dragmode,W=T(G),ae=b(G);if((W||ae)&&(P._fullLayout._outlining=!0),s(P),C.attr("d",y(f)),E||!w.isActiveShape&&!w.isActiveSelection||(Z=function(Te,xe){for(var ye=0;ye<xe.length;ye++){var _e=xe[ye];Te[ye]=[];for(var Ie=0;Ie<_e.length;Ie++){Te[ye][Ie]=[];for(var De=0;De<_e[Ie].length;De++)Te[ye][Ie][De]=_e[Ie][De]}}return Te}([],f),function(Te){z=[];for(var xe=0;xe<f.length;xe++){var ye=f[xe],_e=h(ye),Ie=!_e&&u(ye);z[xe]=[];for(var De=ye.length,be=0;be<De;be++)if("Z"!==ye[be][0]&&(!Ie||be===i||be===r||be===n||be===a)){var he,ce=_e&&w.isActiveSelection;ce&&(he=v(ye,be));var me=ye[be][1],Pe=ye[be][2],Ae=Te.append(ce?"rect":"circle").attr("data-i",xe).attr("data-j",be).style({fill:l.background,stroke:l.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(ce){var Ce=he[1]-me,Oe=he[2]-Pe,Ne=Oe?5:Math.max(Math.min(25,Math.abs(Ce)-5),5),je=Ce?5:Math.max(Math.min(25,Math.abs(Oe)-5),5);Ae.classed(Oe?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",Ne).attr("height",je).attr("x",me-Ne/2).attr("y",Pe-je/2).attr("transform",S(Ce/2,Oe/2))}else Ae.classed("cursor-grab",!0).attr("r",5).attr("cx",me).attr("cy",Pe);z[xe][be]={element:Ae.node(),gd:P,prepFn:Q,doneFn:X,clickFn:oe},k.init(z[xe][be])}}}(N.append("g").attr("class","outline-controllers")),V=[],f.length&&(V[0]={element:C[0][0],gd:P,prepFn:function ue(Te){(R=+Te.srcElement.getAttribute("data-i"))||(R=0),V[R].moveFn=fe},doneFn:function ge(){O()},clickFn:function we(Te){2===Te&&function(xe){if(b(xe._fullLayout.dragmode)){s(xe);var ye=xe._fullLayout._activeSelectionIndex,_e=(xe.layout||{}).selections||[];if(ye<_e.length){for(var Ie=[],De=0;De<_e.length;De++)De!==ye&&Ie.push(_e[De]);delete xe._fullLayout._activeSelectionIndex;var be=xe._fullLayout.selections[ye];xe._fullLayout._deselect={xref:be.xref,yref:be.yref},p.call("_guiRelayout",xe,{selections:Ie})}}}(P)}},k.init(V[0]))),W&&w.hasText){var re=N.select(".label-temp"),ne=m(C,w,w.dragmode);x(P,"label-temp",ne,re)}function Q(Te){R=+Te.srcElement.getAttribute("data-i"),U=+Te.srcElement.getAttribute("data-j"),z[R][U].moveFn=$}function $(Te,xe){if(f.length){var ye=Z[R][U][1],_e=Z[R][U][2],Ie=f[R],De=Ie.length;if(h(Ie)){var be=Te,he=xe;w.isActiveSelection&&(v(Ie,U)[1]===Ie[U][1]?he=0:be=0);for(var ce=0;ce<De;ce++)if(ce!==U){var me=Ie[ce];me[1]===Ie[U][1]&&(me[1]=ye+be),me[2]===Ie[U][2]&&(me[2]=_e+he)}if(Ie[U][1]=ye+be,Ie[U][2]=_e+he,!h(Ie))for(var Pe=0;Pe<De;Pe++)for(var Ae=0;Ae<Ie[Pe].length;Ae++)Ie[Pe][Ae]=Z[R][Pe][Ae]}else Ie[U][1]=ye+Te,Ie[U][2]=_e+xe;L()}}function X(){O()}function oe(Te,xe){if(2===Te){R=+xe.srcElement.getAttribute("data-i"),U=+xe.srcElement.getAttribute("data-j");var ye=f[R];h(ye)||u(ye)||function(){if(f.length&&f[R]&&f[R].length){for(var _e=[],Ie=0;Ie<f[R].length;Ie++)Ie!==U&&_e.push(f[R][Ie]);_e.length>1&&(2!==_e.length||"Z"!==_e[1][0])&&(0===U&&(_e[0][0]="M"),f[R]=_e,L(),O())}}()}}function fe(Te,xe){(function(ye,_e){if(f.length)for(var Ie=0;Ie<f.length;Ie++)for(var De=0;De<f[Ie].length;De++)for(var be=0;be+2<f[Ie][De].length;be+=2)f[Ie][De][be+1]=Z[Ie][De][be+1]+ye,f[Ie][De][be+2]=Z[Ie][De][be+2]+_e})(Te,xe),L()}}},4016:function(ie,F,e){"use strict";var S=e(33428),k=e(24040),o=e(3400),T=e(54460),b=e(9856).readPaths,p=e(55496),l=e(60728),t=e(1936).clearOutlineControllers,i=e(76308),r=e(43616),n=e(31780).arrayEditor,a=e(86476),s=e(93972),c=e(85448),h=e(65152),u=h.getPathString;function y(f){var C=f._fullLayout;for(var w in C._shapeUpperLayer.selectAll("path").remove(),C._shapeLowerLayer.selectAll("path").remove(),C._shapeUpperLayer.selectAll("text").remove(),C._shapeLowerLayer.selectAll("text").remove(),C._plots){var E=C._plots[w].shapelayer;E&&(E.selectAll("path").remove(),E.selectAll("text").remove())}for(var P=0;P<C.shapes.length;P++)!0===C.shapes[P].visible&&g(f,P)}function d(f){return!!f._fullLayout._outlining}function m(f){return!f._context.edits.shapePosition}function g(f,C){f._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+C+'"]').remove();var w=h.makeShapesOptionsAndPlotinfo(f,C),E=w.options,P=w.plotinfo;E._input&&!0===E.visible&&function L(O){var z=u(f,E),V={"data-index":C,"fill-rule":E.fillrule,d:z},R=E.opacity,U=E.fillcolor,Z=E.line.width?E.line.color:"rgba(0,0,0,0)",N=E.line.width,G=E.line.dash;N||!0!==E.editable||(N=5,G="solid");var W="Z"!==z[z.length-1],ae=m(f)&&E.editable&&f._fullLayout._activeShapeIndex===C;ae&&(U=W?"rgba(0,0,0,0)":f._fullLayout.activeshape.fillcolor,R=f._fullLayout.activeshape.opacity);var re,ne=O.append("g").classed("shape-group",!0).attr({"data-index":C}),Q=ne.append("path").attr(V).style("opacity",R).call(i.stroke,Z).call(i.fill,U).call(r.dashLine,G,N);if(x(ne,f,E),l(f,C,E,ne),(ae||f._context.edits.shapePosition)&&(re=n(f.layout,"shapes",E)),ae){Q.style({cursor:"move"});var $={element:Q.node(),plotinfo:P,gd:f,editHelpers:re,hasText:E.label.text||E.label.texttemplate,isActiveShape:!0},X=b(z,f);p(X,Q,$)}else f._context.edits.shapePosition?function(oe,fe,ue,ge,we,Te){var xe,ye,_e,Ie,De,be,he,ce,me,Pe,Ae,Ce,Oe,Ne,je,ve,Ue="pixel"===ue.xsizemode,ze="pixel"===ue.ysizemode,qe="line"===ue.type,Ke="path"===ue.type,it=Te.modifyItem,ft=S.select(fe.node().parentNode),dt=T.getFromId(oe,ue.xref),kt=T.getRefType(ue.xref),St=T.getFromId(oe,ue.yref),Tt=T.getRefType(ue.yref),lt=h.getDataToPixel(oe,dt,!1,kt),ot=h.getDataToPixel(oe,St,!0,Tt),Rt=h.getPixelToData(oe,dt,!1,kt),Vt=h.getPixelToData(oe,St,!0,Tt),Ht=qe?function(){var Ge=Math.max(ue.line.width,10),He=we.append("g").attr("data-index",ge).attr("drag-helper",!0);He.append("path").attr("d",fe.attr("d")).style({cursor:"move","stroke-width":Ge,"stroke-opacity":"0"});var ut={"fill-opacity":"0"},tt=Math.max(Ge/2,10);return He.append("circle").attr({"data-line-point":"start-point",cx:Ue?lt(ue.xanchor)+ue.x0:lt(ue.x0),cy:ze?ot(ue.yanchor)-ue.y0:ot(ue.y0),r:tt}).style(ut).classed("cursor-grab",!0),He.append("circle").attr({"data-line-point":"end-point",cx:Ue?lt(ue.xanchor)+ue.x1:lt(ue.x1),cy:ze?ot(ue.yanchor)-ue.y1:ot(ue.y1),r:tt}).style(ut).classed("cursor-grab",!0),He}():fe,zt={element:Ht.node(),gd:oe,prepFn:function(ht){var Ge,He,ut,tt,xt,At,Mt,yt;d(oe)||(Ue&&(De=lt(ue.xanchor)),ze&&(be=ot(ue.yanchor)),"path"===ue.type?je=ue.path:(xe=Ue?ue.x0:lt(ue.x0),ye=ze?ue.y0:ot(ue.y0),_e=Ue?ue.x1:lt(ue.x1),Ie=ze?ue.y1:ot(ue.y1)),xe<_e?(me=xe,Oe="x0",Pe=_e,Ne="x1"):(me=_e,Oe="x1",Pe=xe,Ne="x0"),!ze&&ye<Ie||ze&&ye>Ie?(he=ye,Ae="y0",ce=Ie,Ce="y1"):(he=Ie,Ae="y1",ce=ye,Ce="y0"),Qe(ht),et(we,ue),Ge=fe,xt=(He=ue).yref,At=T.getFromId(ut=oe,tt=He.xref),Mt=T.getFromId(ut,xt),yt="","paper"===tt||At.autorange||(yt+=tt),"paper"===xt||Mt.autorange||(yt+=xt),r.setClipUrl(Ge,yt?"clip"+ut._fullLayout._uid+yt:null,ut),zt.moveFn="move"===ve?nt:We,zt.altKey=ht.altKey)},doneFn:function(){d(oe)||(s(fe),gt(we),x(fe,oe,ue),k.call("_guiRelayout",oe,Te.getUpdateObj()))},clickFn:function(){d(oe)||gt(we)}};function Qe(ht){if(d(oe))ve=null;else if(qe)ve="path"===ht.target.tagName?"move":"start-point"===ht.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var Ge=zt.element.getBoundingClientRect(),He=Ge.right-Ge.left,ut=Ge.bottom-Ge.top,At=!Ke&&He>10&&ut>10&&!ht.shiftKey?a.getCursor((ht.clientX-Ge.left)/He,1-(ht.clientY-Ge.top)/ut):"move";s(fe,At),ve=At.split("-")[0]}}function nt(ht,Ge){if("path"===ue.type){var He=function(xt){return xt},ut=He,tt=He;Ue?it("xanchor",ue.xanchor=Rt(De+ht)):(ut=function(xt){return Rt(lt(xt)+ht)},dt&&"date"===dt.type&&(ut=h.encodeDate(ut))),ze?it("yanchor",ue.yanchor=Vt(be+Ge)):(tt=function(xt){return Vt(ot(xt)+Ge)},St&&"date"===St.type&&(tt=h.encodeDate(tt))),it("path",ue.path=v(je,ut,tt))}else Ue?it("xanchor",ue.xanchor=Rt(De+ht)):(it("x0",ue.x0=Rt(xe+ht)),it("x1",ue.x1=Rt(_e+ht))),ze?it("yanchor",ue.yanchor=Vt(be+Ge)):(it("y0",ue.y0=Vt(ye+Ge)),it("y1",ue.y1=Vt(Ie+Ge)));fe.attr("d",u(oe,ue)),et(we,ue),l(oe,ge,ue,ft)}function We(ht,Ge){if(Ke){var He=function(sn){return sn},ut=He,tt=He;Ue?it("xanchor",ue.xanchor=Rt(De+ht)):(ut=function(sn){return Rt(lt(sn)+ht)},dt&&"date"===dt.type&&(ut=h.encodeDate(ut))),ze?it("yanchor",ue.yanchor=Vt(be+Ge)):(tt=function(sn){return Vt(ot(sn)+Ge)},St&&"date"===St.type&&(tt=h.encodeDate(tt))),it("path",ue.path=v(je,ut,tt))}else if(qe){if("resize-over-start-point"===ve){var xt=xe+ht,At=ze?ye-Ge:ye+Ge;it("x0",ue.x0=Ue?xt:Rt(xt)),it("y0",ue.y0=ze?At:Vt(At))}else if("resize-over-end-point"===ve){var Mt=_e+ht,yt=ze?Ie-Ge:Ie+Ge;it("x1",ue.x1=Ue?Mt:Rt(Mt)),it("y1",ue.y1=ze?yt:Vt(yt))}}else{var Pt=function(sn){return-1!==ve.indexOf(sn)},Ct=Pt("n"),Dt=Pt("s"),Ut=Pt("w"),Bt=Pt("e"),qt=Ct?he+Ge:he,an=Dt?ce+Ge:ce,mn=Ut?me+ht:me,Qt=Bt?Pe+ht:Pe;ze&&(Ct&&(qt=he-Ge),Dt&&(an=ce-Ge)),(!ze&&an-qt>10||ze&&qt-an>10)&&(it(Ae,ue[Ae]=ze?qt:Vt(qt)),it(Ce,ue[Ce]=ze?an:Vt(an))),Qt-mn>10&&(it(Oe,ue[Oe]=Ue?mn:Rt(mn)),it(Ne,ue[Ne]=Ue?Qt:Rt(Qt)))}fe.attr("d",u(oe,ue)),et(we,ue),l(oe,ge,ue,ft)}function et(ht,Ge){(Ue||ze)&&function(){var He="path"!==Ge.type,ut=ht.selectAll(".visual-cue").data([0]);ut.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var tt=lt(Ue?Ge.xanchor:o.midRange(He?[Ge.x0,Ge.x1]:h.extractPathCoords(Ge.path,c.paramIsX))),xt=ot(ze?Ge.yanchor:o.midRange(He?[Ge.y0,Ge.y1]:h.extractPathCoords(Ge.path,c.paramIsY)));tt=h.roundPositionForSharpStrokeRendering(tt,1),xt=h.roundPositionForSharpStrokeRendering(xt,1),ut.attr("d",Ue&&ze?"M"+(tt-1-1)+","+(xt-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z":Ue?"M"+(tt-1-1)+","+(xt-9-1)+"v18 h2 v-18 Z":"M"+(tt-9-1)+","+(xt-1-1)+"h18 v2 h-18 Z")}()}function gt(ht){ht.selectAll(".visual-cue").remove()}a.init(zt),Ht.node().onmousemove=Qe}(f,Q,E,C,O,re):!0===E.editable&&Q.style("pointer-events",W||i.opacity(U)*R<=.5?"stroke":"all");Q.node().addEventListener("click",function(){return function(oe,fe){if(m(oe)){var ue=+fe.node().getAttribute("data-index");if(ue>=0){if(ue===oe._fullLayout._activeShapeIndex)return void _(oe);oe._fullLayout._activeShapeIndex=ue,oe._fullLayout._deactivateShape=_,y(oe)}}}(f,Q)})}("above"===E.layer?f._fullLayout._shapeUpperLayer:"paper"===E.xref||"paper"===E.yref?f._fullLayout._shapeLowerLayer:"between"===E.layer?P.shapelayerBetween:P._hadPlotinfo?(P.mainplotinfo||P).shapelayer:f._fullLayout._shapeLowerLayer)}function x(f,C,w){var E=(w.xref+w.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");r.setClipUrl(f,E?"clip"+C._fullLayout._uid+E:null,C)}function v(f,C,w){return f.replace(c.segmentRE,function(E){var P=0,L=E.charAt(0),O=c.paramIsX[L],z=c.paramIsY[L],V=c.numParams[L];return L+E.substr(1).replace(c.paramRE,function(R){return P>=V||(O[P]?R=C(R):z[P]&&(R=w(R)),P++),R})})}function _(f){m(f)&&f._fullLayout._activeShapeIndex>=0&&(t(f),delete f._fullLayout._activeShapeIndex,y(f))}ie.exports={draw:y,drawOne:g,eraseActiveShape:function(f){if(m(f)){t(f);var C=f._fullLayout._activeShapeIndex,w=(f.layout||{}).shapes||[];if(C<w.length){for(var E=[],P=0;P<w.length;P++)P!==C&&E.push(w[P]);return delete f._fullLayout._activeShapeIndex,k.call("_guiRelayout",f,{shapes:E})}}},drawLabel:l}},92872:function(ie,F,e){"use strict";var S=e(67824).overrideAll,k=e(45464),o=e(25376),T=e(98192).u,b=e(92880).extendFlat,p=e(21776).ye,l=e(97728);ie.exports=S({newshape:{visible:b({},k.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:b({},k.legend,{}),legendgroup:b({},k.legendgroup,{}),legendgrouptitle:{text:b({},k.legendgrouptitle.text,{}),font:o({})},legendrank:b({},k.legendrank,{}),legendwidth:b({},k.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:b({},T,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:b({},k.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:p({newshape:!0},{keys:Object.keys(l)}),font:o({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")},7e3:function(ie){"use strict";ie.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},65144:function(ie,F,e){"use strict";var S=e(76308),k=e(3400);ie.exports=function(o,T,b){b("newshape.visible"),b("newshape.name"),b("newshape.showlegend"),b("newshape.legend"),b("newshape.legendwidth"),b("newshape.legendgroup"),b("newshape.legendgrouptitle.text"),k.coerceFont(b,"newshape.legendgrouptitle.font"),b("newshape.legendrank"),b("newshape.drawdirection"),b("newshape.layer"),b("newshape.fillcolor"),b("newshape.fillrule"),b("newshape.opacity"),b("newshape.line.width")&&(b("newshape.line.color",S.contrast((o||{}).plot_bgcolor||"#FFF")),b("newshape.line.dash"));var a,l="drawline"===o.dragmode,t=b("newshape.label.text"),i=b("newshape.label.texttemplate");if(t||i){b("newshape.label.textangle");var r=b("newshape.label.textposition",l?"middle":"middle center");b("newshape.label.xanchor"),b("newshape.label.yanchor",(a=r,l?"bottom":-1!==a.indexOf("top")?"top":-1!==a.indexOf("bottom")?"bottom":"middle")),b("newshape.label.padding"),k.coerceFont(b,"newshape.label.font",T.font)}b("activeshape.fillcolor"),b("activeshape.opacity")}},9856:function(ie,F,e){"use strict";var S=e(21984),k=e(7e3),o=k.CIRCLE_SIDES,T=k.SQRT2,b=e(5840),p=b.p2r,l=b.r2p,t=[0,3,4,5,6,1,2],i=[0,3,4,1,2];function r(a,s){return Math.abs(a-s)<=1e-6}function n(a,s){var c=s[1]-a[1],h=s[2]-a[2];return Math.sqrt(c*c+h*h)}F.writePaths=function(a){var s=a.length;if(!s)return"M0,0Z";for(var c="",h=0;h<s;h++)for(var u=a[h].length,y=0;y<u;y++){var d=a[h][y][0];if("Z"===d)c+="Z";else for(var m=a[h][y].length,g=0;g<m;g++){var x=g;"Q"===d||"S"===d?x=i[g]:"C"===d&&(x=t[g]),c+=a[h][y][x],g>0&&g<m-1&&(c+=",")}}return c},F.readPaths=function(a,s,c,h){var u,y,d,m=S(a),g=[],x=-1,v=0,_=0,f=function(){y=v,d=_};f();for(var C=0;C<m.length;C++){var O=[],z=m[C][0],V=z;switch(z){case"M":g[++x]=[],O.push([V,v=+m[C][1],_=+m[C][2]]),f();break;case"Q":case"S":O.push([V,v=+m[C][3],_=+m[C][4],+m[C][1],+m[C][2]]);break;case"C":O.push([V,v=+m[C][5],_=+m[C][6],+m[C][1],+m[C][2],+m[C][3],+m[C][4]]);break;case"T":case"L":O.push([V,v=+m[C][1],_=+m[C][2]]);break;case"H":O.push([V="L",v=+m[C][1],_]);break;case"V":O.push([V="L",v,_=+m[C][1]]);break;case"A":V="L";var R=+m[C][1],U=+m[C][2];+m[C][4]||(R=-R,U=-U);var Z=v-R,N=_;for(u=1;u<=o/2;u++){var G=2*Math.PI*u/o;O.push([V,Z+R*Math.cos(G),N+U*Math.sin(G)])}break;case"Z":v===y&&_===d||O.push([V,v=y,_=d])}for(var W=(c||{}).domain,ae=s._fullLayout._size,re=c&&"pixel"===c.xsizemode,ne=c&&"pixel"===c.ysizemode,Q=!1===h,$=0;$<O.length;$++){for(u=0;u+2<7;u+=2){var X=O[$][u+1],oe=O[$][u+2];void 0!==X&&void 0!==oe&&(v=X,_=oe,c&&(c.xaxis&&c.xaxis.p2r?(Q&&(X-=c.xaxis._offset),X=re?l(c.xaxis,c.xanchor)+X:p(c.xaxis,X)):(Q&&(X-=ae.l),W?X=W.x[0]+X/ae.w:X/=ae.w),c.yaxis&&c.yaxis.p2r?(Q&&(oe-=c.yaxis._offset),oe=ne?l(c.yaxis,c.yanchor)-oe:p(c.yaxis,oe)):(Q&&(oe-=ae.t),oe=W?W.y[1]-oe/ae.h:1-oe/ae.h)),O[$][u+1]=X,O[$][u+2]=oe)}g[x].push(O[$].slice())}}return g},F.pointsOnRectangle=function(a){if(5!==a.length)return!1;for(var s=1;s<3;s++)if(!r(a[0][s]-a[1][s],a[3][s]-a[2][s])||!r(a[0][s]-a[3][s],a[1][s]-a[2][s]))return!1;return!(!r(a[0][1],a[1][1])&&!r(a[0][1],a[3][1])||!(n(a[0],a[1])*n(a[0],a[3])))},F.pointsOnEllipse=function(a){var s=a.length;if(s!==o+1)return!1;s=o;for(var c=0;c<s;c++){var h=(2*s-c)%s,u=(s/2+h)%s;if(!r(n(a[c],a[(s/2+c)%s]),n(a[h],a[u])))return!1}return!0},F.handleEllipse=function(a,s,c){if(!a)return[s,c];var h=F.ellipseOver({x0:s[0],y0:s[1],x1:c[0],y1:c[1]}),u=(h.x1+h.x0)/2,y=(h.y1+h.y0)/2,d=(h.x1-h.x0)/2,m=(h.y1-h.y0)/2;d||(d=m/=T),m||(m=d/=T);for(var g=[],x=0;x<o;x++){var v=2*x*Math.PI/o;g.push([u+d*Math.cos(v),y+m*Math.sin(v)])}return g},F.ellipseOver=function(a){var s=a.x0,c=a.y0,h=a.x1,u=a.y1,y=h-s,d=u-c,m=((s-=y)+h)/2,g=((c-=d)+u)/2;return{x0:m-(y*=T),y0:g-(d*=T),x1:m+y,y1:g+d}},F.fixDatesForPaths=function(a,s,c){var h="date"===s.type,u="date"===c.type;if(!h&&!u)return a;for(var y=0;y<a.length;y++)for(var d=0;d<a[y].length;d++)for(var m=0;m+2<a[y][d].length;m+=2)h&&(a[y][d][m+1]=a[y][d][m+1].replace(" ","_")),u&&(a[y][d][m+2]=a[y][d][m+2].replace(" ","_"));return a}},93940:function(ie,F,e){"use strict";var S=e(72760),k=S.drawMode,o=S.openMode,T=e(7e3),b=T.i000,p=T.i090,l=T.i180,t=T.i270,i=T.cos45,r=T.sin45,n=e(5840),a=n.p2r,s=n.r2p,c=e(1936).clearOutline,h=e(9856),u=h.readPaths,y=h.writePaths,d=h.ellipseOver,m=h.fixDatesForPaths;function g(x,v,_){var f,w=v.gd,E=x[0][0].getAttribute("d"),P=w._fullLayout.newshape,L=v.plotinfo,O=v.isActiveShape,z=L.xaxis,V=L.yaxis,R=!!L.domain||!L.xaxis,U=!!L.domain||!L.yaxis,Z=o(_),N=u(E,w,L,O),G={editable:!0,visible:P.visible,name:P.name,showlegend:P.showlegend,legend:P.legend,legendwidth:P.legendwidth,legendgroup:P.legendgroup,legendgrouptitle:{text:P.legendgrouptitle.text,font:P.legendgrouptitle.font},legendrank:P.legendrank,label:P.label,xref:R?"paper":z._id,yref:U?"paper":V._id,layer:P.layer,opacity:P.opacity,line:{color:P.line.color,width:P.line.width,dash:P.line.dash}};if(Z||(G.fillcolor=P.fillcolor,G.fillrule=P.fillrule),1===N.length&&(f=N[0]),f&&5===f.length&&"drawrect"===_)G.type="rect",G.x0=f[0][1],G.y0=f[0][2],G.x1=f[2][1],G.y1=f[2][2];else if(f&&"drawline"===_)G.type="line",G.x0=f[0][1],G.y0=f[0][2],G.x1=f[1][1],G.y1=f[1][2];else if(f&&"drawcircle"===_){G.type="circle";var W=f[b][1],ae=f[p][1],re=f[l][1],ne=f[t][1],Q=f[b][2],$=f[p][2],X=f[l][2],oe=f[t][2],fe=L.xaxis&&("date"===L.xaxis.type||"log"===L.xaxis.type),ue=L.yaxis&&("date"===L.yaxis.type||"log"===L.yaxis.type);fe&&(W=s(L.xaxis,W),ae=s(L.xaxis,ae),re=s(L.xaxis,re),ne=s(L.xaxis,ne)),ue&&(Q=s(L.yaxis,Q),$=s(L.yaxis,$),X=s(L.yaxis,X),oe=s(L.yaxis,oe));var ge=(ae+ne)/2,we=(Q+X)/2,Te=d({x0:ge,y0:we,x1:ge+(ne-ae+re-W)/2*i,y1:we+(oe-$+X-Q)/2*r});fe&&(Te.x0=a(L.xaxis,Te.x0),Te.x1=a(L.xaxis,Te.x1)),ue&&(Te.y0=a(L.yaxis,Te.y0),Te.y1=a(L.yaxis,Te.y1)),G.x0=Te.x0,G.y0=Te.y0,G.x1=Te.x1,G.y1=Te.y1}else G.type="path",z&&V&&m(N,z,V),G.path=y(N),f=null;return G}ie.exports={newShapes:function(x,v){if(x.length&&x[0][0]){var _=v.gd,f=v.isActiveShape,C=v.dragmode,w=(_.layout||{}).shapes||[];if(!k(C)&&void 0!==f){var E=_._fullLayout._activeShapeIndex;if(E<w.length)switch(_._fullLayout.shapes[E].type){case"rect":C="drawrect";break;case"circle":C="drawcircle";break;case"line":C="drawline";break;case"path":var P=w[E].path||"";C="Z"===P[P.length-1]?"drawclosedpath":"drawopenpath"}}var L=g(x,v,C);c(_);for(var O=v.editHelpers,z=(O||{}).modifyItem,V=[],R=0;R<w.length;R++){var U=_._fullLayout.shapes[R];if(V[R]=U._input,void 0!==f&&R===_._fullLayout._activeShapeIndex){var Z=L;switch(U.type){case"line":case"rect":case"circle":z("x0",Z.x0),z("x1",Z.x1),z("y0",Z.y0),z("y1",Z.y1);break;case"path":z("path",Z.path)}}}return void 0===f?(V.push(L),V):O?O.getUpdateObj():{}}},createShapeObj:g}},1936:function(ie){"use strict";ie.exports={clearOutlineControllers:function(F){var e=F._fullLayout._zoomlayer;e&&e.selectAll(".outline-controllers").remove()},clearOutline:function(F){var e=F._fullLayout._zoomlayer;e&&e.selectAll(".select-outline").remove(),F._fullLayout._outlining=!1}}},65152:function(ie,F,e){"use strict";var S=e(85448),k=e(3400),o=e(54460);F.rangeToShapePosition=function(T){return"log"===T.type?T.r2d:function(b){return b}},F.shapePositionToRange=function(T){return"log"===T.type?T.d2r:function(b){return b}},F.decodeDate=function(T){return function(b){return b.replace&&(b=b.replace("_"," ")),T(b)}},F.encodeDate=function(T){return function(b){return T(b).replace(" ","_")}},F.extractPathCoords=function(T,b,p){var l=[];return T.match(S.segmentRE).forEach(function(t){var i=b[t.charAt(0)].drawn;if(void 0!==i){var r=t.substr(1).match(S.paramRE);if(r&&!(r.length<i)){var n=r[i],a=p?n:k.cleanNumber(n);l.push(a)}}}),l},F.getDataToPixel=function(T,b,p,l){var t,i=T._fullLayout._size;if(b)if("domain"===l)t=function(n){return b._length*(p?1-n:n)+b._offset};else{var r=F.shapePositionToRange(b);t=function(n){return b._offset+b.r2p(r(n,!0))},"date"===b.type&&(t=F.decodeDate(t))}else t=p?function(n){return i.t+i.h*(1-n)}:function(n){return i.l+i.w*n};return t},F.getPixelToData=function(T,b,p,l){var t,i=T._fullLayout._size;if(b)if("domain"===l)t=function(n){var a=(n-b._offset)/b._length;return p?1-a:a};else{var r=F.rangeToShapePosition(b);t=function(n){return r(b.p2r(n-b._offset))}}else t=p?function(n){return 1-(n-i.t)/i.h}:function(n){return(n-i.l)/i.w};return t},F.roundPositionForSharpStrokeRendering=function(T,b){var p=1===Math.round(b%2),l=Math.round(T);return p?l+.5:l},F.makeShapesOptionsAndPlotinfo=function(T,b){var p=T._fullLayout.shapes[b]||{},l=T._fullLayout._plots[p.xref+p.yref];return l?l._hadPlotinfo=!0:(l={},p.xref&&"paper"!==p.xref&&(l.xaxis=T._fullLayout[p.xref+"axis"]),p.yref&&"paper"!==p.yref&&(l.yaxis=T._fullLayout[p.yref+"axis"])),l.xsizemode=p.xsizemode,l.ysizemode=p.ysizemode,l.xanchor=p.xanchor,l.yanchor=p.yanchor,{options:p,plotinfo:l}},F.makeSelectionsOptionsAndPlotinfo=function(T,b){var p=T._fullLayout.selections[b]||{},l=T._fullLayout._plots[p.xref+p.yref];return l?l._hadPlotinfo=!0:(l={},p.xref&&(l.xaxis=T._fullLayout[p.xref+"axis"]),p.yref&&(l.yaxis=T._fullLayout[p.yref+"axis"])),{options:p,plotinfo:l}},F.getPathString=function(T,b){var p,l,t,i,r,n,a,s,P,L,O,V,R,U,Z,c=b.type,h=o.getRefType(b.xref),u=o.getRefType(b.yref),y=o.getFromId(T,b.xref),d=o.getFromId(T,b.yref),m=T._fullLayout._size;if(y?"domain"===h?l=function(P){return y._offset+y._length*P}:(p=F.shapePositionToRange(y),l=function(P){return y._offset+y.r2p(p(P,!0))}):l=function(P){return m.l+m.w*P},d?"domain"===u?i=function(P){return d._offset+d._length*(1-P)}:(t=F.shapePositionToRange(d),i=function(P){return d._offset+d.r2p(t(P,!0))}):i=function(P){return m.t+m.h*(1-P)},"path"===c)return y&&"date"===y.type&&(l=F.decodeDate(l)),d&&"date"===d.type&&(i=F.decodeDate(i)),L=l,O=i,V=(P=b).xsizemode,R=P.ysizemode,U=P.xanchor,Z=P.yanchor,P.path.replace(S.segmentRE,function(N){var G=0,W=N.charAt(0),ae=S.paramIsX[W],re=S.paramIsY[W],ne=S.numParams[W],Q=N.substr(1).replace(S.paramRE,function($){return ae[G]?$="pixel"===V?L(U)+Number($):L($):re[G]&&($="pixel"===R?O(Z)-Number($):O($)),++G>ne&&($="X"),$});return G>ne&&(Q=Q.replace(/[\s,]*X.*/,""),k.log("Ignoring extra params in segment "+N)),W+Q});if("pixel"===b.xsizemode){var g=l(b.xanchor);r=g+b.x0,n=g+b.x1}else r=l(b.x0),n=l(b.x1);if("pixel"===b.ysizemode){var x=i(b.yanchor);a=x-b.y0,s=x-b.y1}else a=i(b.y0),s=i(b.y1);if("line"===c)return"M"+r+","+a+"L"+n+","+s;if("rect"===c)return"M"+r+","+a+"H"+n+"V"+s+"H"+r+"Z";var v=(r+n)/2,_=(a+s)/2,f=Math.abs(v-r),C=Math.abs(_-a),w="A"+f+","+C,E=v+f+","+_;return"M"+E+w+" 0 1,1 "+v+","+(_-C)+w+" 0 0,1 "+E+"Z"}},41592:function(ie,F,e){"use strict";var S=e(4016);ie.exports={moduleType:"component",name:"shapes",layoutAttributes:e(46056),supplyLayoutDefaults:e(43712),supplyDrawNewShapeDefaults:e(65144),includeBasePlot:e(36632)("shapes"),calcAutorange:e(96084),draw:S.draw,drawOne:S.drawOne}},97728:function(ie){"use strict";function F(o,T){return T?T.d2l(o):o}function e(o,T){return T?T.l2d(o):o}function S(o,T){return F(o.x1,T)-F(o.x0,T)}function k(o,T,b){return F(o.y1,b)-F(o.y0,b)}ie.exports={x0:function(o){return o.x0},x1:function(o){return o.x1},y0:function(o){return o.y0},y1:function(o){return o.y1},slope:function(o,T,b){return"line"!==o.type?void 0:k(o,0,b)/S(o,T)},dx:S,dy:k,width:function(o,T){return Math.abs(S(o,T))},height:function(o,T,b){return Math.abs(k(o,0,b))},length:function(o,T,b){return"line"!==o.type?void 0:Math.sqrt(Math.pow(S(o,T),2)+Math.pow(k(o,0,b),2))},xcenter:function(o,T){return e((F(o.x1,T)+F(o.x0,T))/2,T)},ycenter:function(o,T,b){return e((F(o.y1,b)+F(o.y0,b))/2,b)}}},89861:function(ie,F,e){"use strict";var S=e(25376),k=e(66741),o=e(92880).extendDeepAll,T=e(67824).overrideAll,b=e(85656),p=e(31780).templatedArray,l=e(60876),t=p("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});ie.exports=T(p("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:t,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:o(k({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:b.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:S({})},font:S({}),activebgcolor:{valType:"color",dflt:l.gripBgActiveColor},bgcolor:{valType:"color",dflt:l.railBgColor},bordercolor:{valType:"color",dflt:l.railBorderColor},borderwidth:{valType:"number",min:0,dflt:l.railBorderWidth},ticklen:{valType:"number",min:0,dflt:l.tickLength},tickcolor:{valType:"color",dflt:l.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:l.minorTickLength}}),"arraydraw","from-root")},60876:function(ie){"use strict";ie.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},8132:function(ie,F,e){"use strict";var S=e(3400),k=e(51272),o=e(89861),T=e(60876).name,b=o.steps;function p(t,i,r){function n(u,y){return S.coerce(t,i,o,u,y)}for(var a=k(t,i,{name:"steps",handleItemDefaults:l}),s=0,c=0;c<a.length;c++)a[c].visible&&s++;if(s<2?i.visible=!1:n("visible")){i._stepCount=s;var h=i._visibleSteps=S.filterVisible(a);(a[n("active")]||{}).visible||(i.active=h[0]._index),n("x"),n("y"),S.noneOrAll(t,i,["x","y"]),n("xanchor"),n("yanchor"),n("len"),n("lenmode"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),S.coerceFont(n,"font",r.font),n("currentvalue.visible")&&(n("currentvalue.xanchor"),n("currentvalue.prefix"),n("currentvalue.suffix"),n("currentvalue.offset"),S.coerceFont(n,"currentvalue.font",i.font)),n("transition.duration"),n("transition.easing"),n("bgcolor"),n("activebgcolor"),n("bordercolor"),n("borderwidth"),n("ticklen"),n("tickwidth"),n("tickcolor"),n("minorticklen")}}function l(t,i){function r(a,s){return S.coerce(t,i,b,a,s)}if("skip"===t.method||Array.isArray(t.args)?r("visible"):i.visible=!1){r("method"),r("args");var n=r("label","step-"+i._index);r("value",n),r("execute")}}ie.exports=function(t,i){k(t,i,{name:T,handleItemDefaults:p})}},79664:function(ie,F,e){"use strict";var S=e(33428),k=e(7316),o=e(76308),T=e(43616),b=e(3400),p=b.strTranslate,l=e(72736),t=e(31780).arrayEditor,i=e(60876),r=e(84284),n=r.LINE_SPACING,a=r.FROM_TL,s=r.FROM_BR;function c(O){return i.autoMarginIdRoot+O._index}function h(O){return O._index}function u(O,z){var V=T.tester.selectAll("g."+i.labelGroupClass).data(z._visibleSteps);V.enter().append("g").classed(i.labelGroupClass,!0);var R=0,U=0;V.each(function($){var X=m(S.select(this),{step:$},z).node();if(X){var oe=T.bBox(X);U=Math.max(U,oe.height),R=Math.max(R,oe.width)}}),V.remove();var Z=z._dims={};Z.inputAreaWidth=Math.max(i.railWidth,i.gripHeight);var N=O._fullLayout._size;if(Z.lx=N.l+N.w*z.x,Z.ly=N.t+N.h*(1-z.y),Z.outerLength="fraction"===z.lenmode?Math.round(N.w*z.len):z.len,Z.inputAreaStart=0,Z.inputAreaLength=Math.round(Z.outerLength-z.pad.l-z.pad.r),Z.labelStride=Math.max(1,Math.ceil((R+i.labelPadding)/((Z.inputAreaLength-2*i.stepInset)/(z._stepCount-1)))),Z.labelHeight=U,Z.currentValueMaxWidth=0,Z.currentValueHeight=0,Z.currentValueTotalHeight=0,Z.currentValueMaxLines=1,z.currentvalue.visible){var ae=T.tester.append("g");V.each(function($){var X=y(ae,z,$.label),oe=X.node()&&T.bBox(X.node())||{width:0,height:0},fe=l.lineCount(X);Z.currentValueMaxWidth=Math.max(Z.currentValueMaxWidth,Math.ceil(oe.width)),Z.currentValueHeight=Math.max(Z.currentValueHeight,Math.ceil(oe.height)),Z.currentValueMaxLines=Math.max(Z.currentValueMaxLines,fe)}),Z.currentValueTotalHeight=Z.currentValueHeight+z.currentvalue.offset,ae.remove()}Z.height=Z.currentValueTotalHeight+i.tickOffset+z.ticklen+i.labelOffset+Z.labelHeight+z.pad.t+z.pad.b;var re="left";b.isRightAnchor(z)&&(Z.lx-=Z.outerLength,re="right"),b.isCenterAnchor(z)&&(Z.lx-=Z.outerLength/2,re="center");var ne="top";b.isBottomAnchor(z)&&(Z.ly-=Z.height,ne="bottom"),b.isMiddleAnchor(z)&&(Z.ly-=Z.height/2,ne="middle"),Z.outerLength=Math.ceil(Z.outerLength),Z.height=Math.ceil(Z.height),Z.lx=Math.round(Z.lx),Z.ly=Math.round(Z.ly);var Q={y:z.y,b:Z.height*s[ne],t:Z.height*a[ne]};"fraction"===z.lenmode?(Q.l=0,Q.xl=z.x-z.len*a[re],Q.r=0,Q.xr=z.x+z.len*s[re]):(Q.x=z.x,Q.l=Z.outerLength*a[re],Q.r=Z.outerLength*s[re]),k.autoMargin(O,c(z),Q)}function y(O,z,V){if(z.currentvalue.visible){var R,U,Z=z._dims;switch(z.currentvalue.xanchor){case"right":R=Z.inputAreaLength-i.currentValueInset-Z.currentValueMaxWidth,U="left";break;case"center":R=.5*Z.inputAreaLength,U="middle";break;default:R=i.currentValueInset,U="left"}var N=b.ensureSingle(O,"text",i.labelClass,function(Q){Q.attr({"text-anchor":U,"data-notex":1})}),G=z.currentvalue.prefix?z.currentvalue.prefix:"";if("string"==typeof V)G+=V;else{var W=z.steps[z.active].label,ae=z._gd._fullLayout._meta;ae&&(W=b.templateString(W,ae)),G+=W}z.currentvalue.suffix&&(G+=z.currentvalue.suffix),N.call(T.font,z.currentvalue.font).text(G).call(l.convertToTspans,z._gd);var re=l.lineCount(N);return l.positionText(N,R,(Z.currentValueMaxLines+1-re)*z.currentvalue.font.size*n),N}}function d(O,z,V){b.ensureSingle(O,"rect",i.gripRectClass,function(R){R.call(_,z,O,V).style("pointer-events","all")}).attr({width:i.gripWidth,height:i.gripHeight,rx:i.gripRadius,ry:i.gripRadius}).call(o.stroke,V.bordercolor).call(o.fill,V.bgcolor).style("stroke-width",V.borderwidth+"px")}function m(O,z,V){var R=b.ensureSingle(O,"text",i.labelClass,function(N){N.attr({"text-anchor":"middle","data-notex":1})}),U=z.step.label,Z=V._gd._fullLayout._meta;return Z&&(U=b.templateString(U,Z)),R.call(T.font,V.font).text(U).call(l.convertToTspans,V._gd),R}function g(O,z){var V=b.ensureSingle(O,"g",i.labelsClass),R=z._dims,U=V.selectAll("g."+i.labelGroupClass).data(R.labelSteps);U.enter().append("g").classed(i.labelGroupClass,!0),U.exit().remove(),U.each(function(Z){var N=S.select(this);N.call(m,Z,z),T.setTranslate(N,w(z,Z.fraction),i.tickOffset+z.ticklen+z.font.size*n+i.labelOffset+R.currentValueTotalHeight)})}function x(O,z,V,R,U){var Z=Math.round(R*(V._stepCount-1)),N=V._visibleSteps[Z]._index;N!==V.active&&v(O,z,V,N,!0,U)}function v(O,z,V,R,U,Z){var N=V.active;V.active=R,t(O.layout,i.name,V).applyUpdate("active",R);var G=V.steps[V.active];z.call(C,V,Z),z.call(y,V),O.emit("plotly_sliderchange",{slider:V,step:V.steps[V.active],interaction:U,previousActive:N}),G&&G.method&&U&&(z._nextMethod?(z._nextMethod.step=G,z._nextMethod.doCallback=U,z._nextMethod.doTransition=Z):(z._nextMethod={step:G,doCallback:U,doTransition:Z},z._nextMethodRaf=window.requestAnimationFrame(function(){var W=z._nextMethod.step;W.method&&(W.execute&&k.executeAPICommand(O,W.method,W.args),z._nextMethod=null,z._nextMethodRaf=null)})))}function _(O,z,V){if(!z._context.staticPlot){var R=V.node(),U=S.select(z);O.on("mousedown",N),O.on("touchstart",N)}function Z(){return V.data()[0]}function N(){var G=Z();z.emit("plotly_sliderstart",{slider:G});var W=V.select("."+i.gripRectClass);S.event.stopPropagation(),S.event.preventDefault(),W.call(o.fill,G.activebgcolor);var ae=E(G,S.mouse(R)[0]);function re(){var Q=Z(),$=E(Q,S.mouse(R)[0]);x(z,V,Q,$,!1)}function ne(){var Q=Z();Q._dragging=!1,W.call(o.fill,Q.bgcolor),U.on("mouseup",null),U.on("mousemove",null),U.on("touchend",null),U.on("touchmove",null),z.emit("plotly_sliderend",{slider:Q,step:Q.steps[Q.active]})}x(z,V,G,ae,!0),G._dragging=!0,U.on("mousemove",re),U.on("touchmove",re),U.on("mouseup",ne),U.on("touchend",ne)}}function f(O,z){var V=O.selectAll("rect."+i.tickRectClass).data(z._visibleSteps),R=z._dims;V.enter().append("rect").classed(i.tickRectClass,!0),V.exit().remove(),V.attr({width:z.tickwidth+"px","shape-rendering":"crispEdges"}),V.each(function(U,Z){var N=Z%R.labelStride==0,G=S.select(this);G.attr({height:N?z.ticklen:z.minorticklen}).call(o.fill,z.tickcolor),T.setTranslate(G,w(z,Z/(z._stepCount-1))-.5*z.tickwidth,(N?i.tickOffset:i.minorTickOffset)+R.currentValueTotalHeight)})}function C(O,z,V){for(var R=O.select("rect."+i.gripRectClass),U=0,Z=0;Z<z._stepCount;Z++)if(z._visibleSteps[Z]._index===z.active){U=Z;break}var N=w(z,U/(z._stepCount-1));if(!z._invokingCommand){var G=R;V&&z.transition.duration>0&&(G=G.transition().duration(z.transition.duration).ease(z.transition.easing)),G.attr("transform",p(N-.5*i.gripWidth,z._dims.currentValueTotalHeight))}}function w(O,z){var V=O._dims;return V.inputAreaStart+i.stepInset+(V.inputAreaLength-2*i.stepInset)*Math.min(1,Math.max(0,z))}function E(O,z){var V=O._dims;return Math.min(1,Math.max(0,(z-i.stepInset-V.inputAreaStart)/(V.inputAreaLength-2*i.stepInset-2*V.inputAreaStart)))}function P(O,z,V){var R=V._dims,U=b.ensureSingle(O,"rect",i.railTouchRectClass,function(Z){Z.call(_,z,O,V).style("pointer-events","all")});U.attr({width:R.inputAreaLength,height:Math.max(R.inputAreaWidth,i.tickOffset+V.ticklen+R.labelHeight)}).call(o.fill,V.bgcolor).attr("opacity",0),T.setTranslate(U,0,R.currentValueTotalHeight)}function L(O,z){var V=z._dims,R=V.inputAreaLength-2*i.railInset,U=b.ensureSingle(O,"rect",i.railRectClass);U.attr({width:R,height:i.railWidth,rx:i.railRadius,ry:i.railRadius,"shape-rendering":"crispEdges"}).call(o.stroke,z.bordercolor).call(o.fill,z.bgcolor).style("stroke-width",z.borderwidth+"px"),T.setTranslate(U,i.railInset,.5*(V.inputAreaWidth-i.railWidth)+V.currentValueTotalHeight)}ie.exports=function(O){var z=O._context.staticPlot,V=O._fullLayout,R=function(ae,re){for(var ne=ae[i.name],Q=[],$=0;$<ne.length;$++){var X=ne[$];X.visible&&(X._gd=re,Q.push(X))}return Q}(V,O),U=V._infolayer.selectAll("g."+i.containerClassName).data(R.length>0?[0]:[]);function Z(ae){ae._commandObserver&&(ae._commandObserver.remove(),delete ae._commandObserver),k.autoMargin(O,c(ae))}if(U.enter().append("g").classed(i.containerClassName,!0).style("cursor",z?null:"ew-resize"),U.exit().each(function(){S.select(this).selectAll("g."+i.groupClassName).each(Z)}).remove(),0!==R.length){var N=U.selectAll("g."+i.groupClassName).data(R,h);N.enter().append("g").classed(i.groupClassName,!0),N.exit().each(Z).remove();for(var G=0;G<R.length;G++)u(O,R[G]);N.each(function(ae){var re=S.select(this);(function(ne){var Q=ne._dims;Q.labelSteps=[];for(var $=ne._stepCount,X=0;X<$;X+=Q.labelStride)Q.labelSteps.push({fraction:X/($-1),step:ne._visibleSteps[X]})})(ae),k.manageCommandObserver(O,ae,ae._visibleSteps,function(ne){var Q=re.data()[0];Q.active!==ne.index&&(Q._dragging||v(O,re,Q,ne.index,!1,!0))}),function(ne,Q,$){($.steps[$.active]||{}).visible||($.active=$._visibleSteps[0]._index),Q.call(y,$).call(L,$).call(g,$).call(f,$).call(P,ne,$).call(d,ne,$);var X=$._dims;T.setTranslate(Q,X.lx+$.pad.l,X.ly+$.pad.t),Q.call(C,$,!1),Q.call(y,$)}(O,S.select(this),ae)})}}},97544:function(ie,F,e){"use strict";var S=e(60876);ie.exports={moduleType:"component",name:S.name,layoutAttributes:e(89861),supplyLayoutDefaults:e(8132),draw:e(79664)}},81668:function(ie,F,e){"use strict";var S=e(33428),k=e(38248),o=e(7316),T=e(24040),b=e(3400),p=b.strTranslate,l=e(43616),t=e(76308),i=e(72736),r=e(13448),n=e(84284).OPPOSITE_SIDE,a=/ [XY][0-9]* /;ie.exports={draw:function(s,c,h){var u,y=h.propContainer,d=h.propName,m=h.placeholder,g=h.traceIndex,x=h.avoid||{},v=h.attributes,_=h.transform,f=h.containerGroup,C=s._fullLayout,w=1,E=!1,P=y.title,L=(P&&P.text?P.text:"").trim(),O=P&&P.font?P.font:{},z=O.family,V=O.size,R=O.color,U=O.weight,Z=O.style,N=O.variant,G=O.textcase,W=O.lineposition,ae=O.shadow;"title.text"===d?u="titleText":-1!==d.indexOf("axis")?u="axisTitleText":d.indexOf(!0)&&(u="colorbarTitleText");var re=s._context.edits[u];""===L?w=0:L.replace(a," % ")===m.replace(a," % ")&&(w=.2,E=!0,re||(L="")),h._meta?L=b.templateString(L,h._meta):C._meta&&(L=b.templateString(L,C._meta));var ne,Q=L||re;f||(f=b.ensureSingle(C._infolayer,"g","g-"+c),ne=C._hColorbarMoveTitle);var $=f.selectAll("text").data(Q?[0]:[]);if($.enter().append("text"),$.text(L).attr("class",c),$.exit().remove(),!Q)return f;function X(ue){b.syncOrAsync([oe,fe],ue)}function oe(ue){var ge;return!_&&ne&&(_={}),_?(ge="",_.rotate&&(ge+="rotate("+[_.rotate,v.x,v.y]+")"),(_.offset||ne)&&(ge+=p(0,(_.offset||0)-(ne||0)))):ge=null,ue.attr("transform",ge),ue.style("opacity",w*t.opacity(R)).call(l.font,{color:t.rgb(R),size:S.round(V,2),family:z,weight:U,style:Z,variant:N,textcase:G,shadow:ae,lineposition:W}).attr(v).call(i.convertToTspans,s),o.previousPromises(s)}function fe(ue){var ge=S.select(ue.node().parentNode);if(x&&x.selection&&x.side&&L){ge.attr("transform",null);var we=n[x.side],Te="left"===x.side||"top"===x.side?-1:1,xe=k(x.pad)?x.pad:2,ye=l.bBox(ge.node()),_e={t:0,b:0,l:0,r:0},Ie=s._fullLayout._reservedMargin;for(var De in Ie)for(var be in Ie[De])_e[be]=Math.max(_e[be],Ie[De][be]);var me=x.maxShift||Te*({left:_e.l,top:_e.t,right:C.width-_e.r,bottom:C.height-_e.b}[x.side]-ye[x.side]),Pe=0;if(me<0)Pe=me;else{var Ae=x.offsetLeft||0,Ce=x.offsetTop||0;ye.left-=Ae,ye.right-=Ae,ye.top-=Ce,ye.bottom-=Ce,x.selection.each(function(){var Ne=l.bBox(this);b.bBoxIntersect(ye,Ne,xe)&&(Pe=Math.max(Pe,Te*(Ne[x.side]-ye[we])+xe))}),Pe=Math.min(me,Pe),y._titleScoot=Math.abs(Pe)}if(Pe>0||me<0){var Oe={left:[-Pe,0],right:[Pe,0],top:[0,-Pe],bottom:[0,Pe]}[x.side];ge.attr("transform",p(Oe[0],Oe[1]))}}}return $.call(X),re&&(L?$.on(".opacity",null):(w=0,E=!0,$.text(m).on("mouseover.opacity",function(){S.select(this).transition().duration(r.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){S.select(this).transition().duration(r.HIDE_PLACEHOLDER).style("opacity",0)})),$.call(i.makeEditable,{gd:s}).on("edit",function(ue){void 0!==g?T.call("_guiRestyle",s,d,ue,g):T.call("_guiRelayout",s,d,ue)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(X)}).on("input",function(ue){this.text(ue||" ").call(i.positionText,v.x,v.y)})),$.classed("js-placeholder",E),f}}},88444:function(ie,F,e){"use strict";var S=e(25376),k=e(22548),o=e(92880).extendFlat,T=e(67824).overrideAll,b=e(66741),p=e(31780).templatedArray,l=p("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});ie.exports=T(p("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:l,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:o(b({editType:"arraydraw"}),{}),font:S({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:k.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},73712:function(ie){"use strict";ie.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}}},91384:function(ie,F,e){"use strict";var S=e(3400),k=e(51272),o=e(88444),T=e(73712).name,b=o.buttons;function p(t,i,r){function n(a,s){return S.coerce(t,i,o,a,s)}n("visible",k(t,i,{name:"buttons",handleItemDefaults:l}).length>0)&&(n("active"),n("direction"),n("type"),n("showactive"),n("x"),n("y"),S.noneOrAll(t,i,["x","y"]),n("xanchor"),n("yanchor"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),S.coerceFont(n,"font",r.font),n("bgcolor",r.paper_bgcolor),n("bordercolor"),n("borderwidth"))}function l(t,i){function r(n,a){return S.coerce(t,i,b,n,a)}r("visible","skip"===t.method||Array.isArray(t.args))&&(r("method"),r("args"),r("args2"),r("label"),r("execute"))}ie.exports=function(t,i){k(t,i,{name:T,handleItemDefaults:p})}},14420:function(ie,F,e){"use strict";var S=e(33428),k=e(7316),o=e(76308),T=e(43616),b=e(3400),p=e(72736),l=e(31780).arrayEditor,t=e(84284).LINE_SPACING,i=e(73712),r=e(37400);function n(w){return w._index}function a(w,E){return+w.attr(i.menuIndexAttrName)===E._index}function s(w,E,P,L,O,z,V,R){E.active=V,l(w.layout,i.name,E).applyUpdate("active",V),"buttons"===E.type?h(w,L,null,null,E):"dropdown"===E.type&&(O.attr(i.menuIndexAttrName,"-1"),c(w,L,O,z,E),R||h(w,L,O,z,E))}function c(w,E,P,L,O){var z=b.ensureSingle(E,"g",i.headerClassName,function(G){G.style("pointer-events","all")}),V=O._dims,Z={y:O.pad.t,yPad:0,x:O.pad.l,xPad:0,index:0},N={width:V.headerWidth,height:V.headerHeight};z.call(u,O,O.buttons[O.active]||i.blankHeaderOpts,w).call(f,O,Z,N),b.ensureSingle(E,"text",i.headerArrowClassName,function(G){G.attr("text-anchor","end").call(T.font,O.font).text(i.arrowSymbol[O.direction])}).attr({x:V.headerWidth-i.arrowOffsetX+O.pad.l,y:V.headerHeight/2+i.textOffsetY+O.pad.t}),z.on("click",function(){P.call(C,String(a(P,O)?-1:O._index)),h(w,E,P,L,O)}),z.on("mouseover",function(){z.call(g)}),z.on("mouseout",function(){z.call(x,O)}),T.setTranslate(E,V.lx,V.ly)}function h(w,E,P,L,O){P||(P=E).attr("pointer-events","all");var z=-1==+P.attr(i.menuIndexAttrName)&&"buttons"!==O.type?[]:O.buttons,V="dropdown"===O.type?i.dropdownButtonClassName:i.buttonClassName,R=P.selectAll("g."+V).data(b.filterVisible(z)),U=R.enter().append("g").classed(V,!0),Z=R.exit();"dropdown"===O.type?(U.attr("opacity","0").transition().attr("opacity","1"),Z.transition().attr("opacity","0").remove()):Z.remove();var N=0,G=0,W=O._dims,ae=-1!==["up","down"].indexOf(O.direction);"dropdown"===O.type&&(ae?G=W.headerHeight+i.gapButtonHeader:N=W.headerWidth+i.gapButtonHeader),"dropdown"===O.type&&"up"===O.direction&&(G=-i.gapButtonHeader+i.gapButton-W.openHeight),"dropdown"===O.type&&"left"===O.direction&&(N=-i.gapButtonHeader+i.gapButton-W.openWidth);var Q,$,X,re={x:W.lx+N+O.pad.l,y:W.ly+G+O.pad.t,yPad:i.gapButton,xPad:i.gapButton,index:0},ne={l:re.x+O.borderwidth,t:re.y+O.borderwidth};R.each(function(Q,$){var X=S.select(this);X.call(u,O,Q,w).call(f,O,re),X.on("click",function(){S.event.defaultPrevented||(Q.execute&&(Q.args2&&O.active===$?(s(w,O,0,E,P,L,-1),k.executeAPICommand(w,Q.method,Q.args2)):(s(w,O,0,E,P,L,$),k.executeAPICommand(w,Q.method,Q.args))),w.emit("plotly_buttonclicked",{menu:O,button:Q,active:O.active}))}),X.on("mouseover",function(){X.call(g)}),X.on("mouseout",function(){X.call(x,O),R.call(m,O)})}),R.call(m,O),ae?(ne.w=Math.max(W.openWidth,W.headerWidth),ne.h=re.y-ne.t):(ne.w=re.x-ne.l,ne.h=Math.max(W.openHeight,W.headerHeight)),ne.direction=O.direction,L&&(R.size()?function(Q,$,X,oe,fe,ue){var ge,we,Te,xe=fe.direction,_e=fe._dims,Ie=fe.active;if("up"===xe||"down"===xe)for(we=0,Te=0;Te<Ie;Te++)we+=_e.heights[Te]+i.gapButton;else for(ge=0,Te=0;Te<Ie;Te++)ge+=_e.widths[Te]+i.gapButton;oe.enable(ue,ge,we),oe.hbar&&oe.hbar.attr("opacity","0").transition().attr("opacity","1"),oe.vbar&&oe.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,L,O,ne):(X=!!(Q=L).vbar,($=!!Q.hbar)&&Q.hbar.transition().attr("opacity","0").each("end",function(){$=!1,X||Q.disable()}),X&&Q.vbar.transition().attr("opacity","0").each("end",function(){X=!1,$||Q.disable()})))}function u(w,E,P,L){w.call(y,E).call(d,E,P,L)}function y(w,E){b.ensureSingle(w,"rect",i.itemRectClassName,function(P){P.attr({rx:i.rx,ry:i.ry,"shape-rendering":"crispEdges"})}).call(o.stroke,E.bordercolor).call(o.fill,E.bgcolor).style("stroke-width",E.borderwidth+"px")}function d(w,E,P,L){var O=b.ensureSingle(w,"text",i.itemTextClassName,function(R){R.attr({"text-anchor":"start","data-notex":1})}),z=P.label,V=L._fullLayout._meta;V&&(z=b.templateString(z,V)),O.call(T.font,E.font).text(z).call(p.convertToTspans,L)}function m(w,E){var P=E.active;w.each(function(L,O){var z=S.select(this);O===P&&E.showactive&&z.select("rect."+i.itemRectClassName).call(o.fill,i.activeColor)})}function g(w){w.select("rect."+i.itemRectClassName).call(o.fill,i.hoverColor)}function x(w,E){w.select("rect."+i.itemRectClassName).call(o.fill,E.bgcolor)}function v(w,E){var P=E._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},L=T.tester.selectAll("g."+i.dropdownButtonClassName).data(b.filterVisible(E.buttons));L.enter().append("g").classed(i.dropdownButtonClassName,!0);var O=-1!==["up","down"].indexOf(E.direction);L.each(function(N,G){var W=S.select(this);W.call(u,E,N,w);var ae=W.select("."+i.itemTextClassName),re=ae.node()&&T.bBox(ae.node()).width,ne=Math.max(re+i.textPadX,i.minWidth),Q=E.font.size*t,$=p.lineCount(ae),X=Math.max(Q*$,i.minHeight)+i.textOffsetY;X=Math.ceil(X),ne=Math.ceil(ne),P.widths[G]=ne,P.heights[G]=X,P.height1=Math.max(P.height1,X),P.width1=Math.max(P.width1,ne),O?(P.totalWidth=Math.max(P.totalWidth,ne),P.openWidth=P.totalWidth,P.totalHeight+=X+i.gapButton,P.openHeight+=X+i.gapButton):(P.totalWidth+=ne+i.gapButton,P.openWidth+=ne+i.gapButton,P.totalHeight=Math.max(P.totalHeight,X),P.openHeight=P.totalHeight)}),O?P.totalHeight-=i.gapButton:P.totalWidth-=i.gapButton,P.headerWidth=P.width1+i.arrowPadX,P.headerHeight=P.height1,"dropdown"===E.type&&(O?(P.width1+=i.arrowPadX,P.totalHeight=P.height1):P.totalWidth=P.width1,P.totalWidth+=i.arrowPadX),L.remove();var z=P.totalWidth+E.pad.l+E.pad.r,V=P.totalHeight+E.pad.t+E.pad.b,R=w._fullLayout._size;P.lx=R.l+R.w*E.x,P.ly=R.t+R.h*(1-E.y);var U="left";b.isRightAnchor(E)&&(P.lx-=z,U="right"),b.isCenterAnchor(E)&&(P.lx-=z/2,U="center");var Z="top";b.isBottomAnchor(E)&&(P.ly-=V,Z="bottom"),b.isMiddleAnchor(E)&&(P.ly-=V/2,Z="middle"),P.totalWidth=Math.ceil(P.totalWidth),P.totalHeight=Math.ceil(P.totalHeight),P.lx=Math.round(P.lx),P.ly=Math.round(P.ly),k.autoMargin(w,_(E),{x:E.x,y:E.y,l:z*({right:1,center:.5}[U]||0),r:z*({left:1,center:.5}[U]||0),b:V*({top:1,middle:.5}[Z]||0),t:V*({bottom:1,middle:.5}[Z]||0)})}function _(w){return i.autoMarginIdRoot+w._index}function f(w,E,P,L){L=L||{};var O=w.select("."+i.itemRectClassName),z=w.select("."+i.itemTextClassName),V=E.borderwidth,R=P.index,U=E._dims;T.setTranslate(w,V+P.x,V+P.y);var Z=-1!==["up","down"].indexOf(E.direction),N=L.height||(Z?U.heights[R]:U.height1);O.attr({x:0,y:0,width:L.width||(Z?U.width1:U.widths[R]),height:N});var G=E.font.size*t,W=(p.lineCount(z)-1)*G/2;p.positionText(z,i.textOffsetX,N/2-W+i.textOffsetY),Z?P.y+=U.heights[R]+P.yPad:P.x+=U.widths[R]+P.xPad,P.index++}function C(w,E){w.attr(i.menuIndexAttrName,E||"-1").selectAll("g."+i.dropdownButtonClassName).remove()}ie.exports=function(w){var E=w._fullLayout,P=b.filterVisible(E[i.name]);function L(G){k.autoMargin(w,_(G))}var O=E._menulayer.selectAll("g."+i.containerClassName).data(P.length>0?[0]:[]);if(O.enter().append("g").classed(i.containerClassName,!0).style("cursor","pointer"),O.exit().each(function(){S.select(this).selectAll("g."+i.headerGroupClassName).each(L)}).remove(),0!==P.length){var z=O.selectAll("g."+i.headerGroupClassName).data(P,n);z.enter().append("g").classed(i.headerGroupClassName,!0);for(var V=b.ensureSingle(O,"g",i.dropdownButtonGroupClassName,function(G){G.style("pointer-events","all")}),R=0;R<P.length;R++)v(w,P[R]);var N=new r(w,V,"updatemenus"+E._uid);z.enter().size()&&(V.node().parentNode.appendChild(V.node()),V.call(C)),z.exit().each(function(G){V.call(C),L(G)}).remove(),z.each(function(G){var W=S.select(this),ae="dropdown"===G.type?V:null;k.manageCommandObserver(w,G,G.buttons,function(re){s(w,G,0,W,ae,N,re.index,!0)}),"dropdown"===G.type?(c(w,W,V,N,G),a(V,G)&&h(w,W,V,N,G)):h(w,W,null,null,G)})}}},76908:function(ie,F,e){"use strict";var S=e(73712);ie.exports={moduleType:"component",name:S.name,layoutAttributes:e(88444),supplyLayoutDefaults:e(91384),draw:e(14420)}},37400:function(ie,F,e){"use strict";ie.exports=b;var S=e(33428),k=e(76308),o=e(43616),T=e(3400);function b(p,l,t){this.gd=p,this.container=l,this.id=t,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}b.barWidth=2,b.barLength=20,b.barRadius=2,b.barPad=1,b.barColor="#808BA4",b.prototype.enable=function(p,l,t){var i=this.gd._fullLayout,r=i.width,n=i.height;this.position=p;var a,s,c,h,u=this.position.l,y=this.position.w,d=this.position.t,m=this.position.h,g=this.position.direction,x="down"===g,v="left"===g,_="up"===g,f=y,C=m;x||v||"right"===g||_||(this.position.direction="down",x=!0),x||_?(s=(a=u)+f,x?(c=d,C=(h=Math.min(c+C,n))-c):C=(h=d+C)-(c=Math.max(h-C,0))):(h=(c=d)+C,v?f=(s=u+f)-(a=Math.max(s-f,0)):(a=u,f=(s=Math.min(a+f,r))-a)),this._box={l:a,t:c,w:f,h:C};var w=y>f,E=b.barLength+2*b.barPad,P=b.barWidth+2*b.barPad,L=u,O=d+m;O+P>n&&(O=n-P);var z=this.container.selectAll("rect.scrollbar-horizontal").data(w?[0]:[]);z.exit().on(".drag",null).remove(),z.enter().append("rect").classed("scrollbar-horizontal",!0).call(k.fill,b.barColor),w?(this.hbar=z.attr({rx:b.barRadius,ry:b.barRadius,x:L,y:O,width:E,height:P}),this._hbarXMin=L+E/2,this._hbarTranslateMax=f-E):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var V=m>C,R=b.barWidth+2*b.barPad,U=b.barLength+2*b.barPad,Z=u+y,N=d;Z+R>r&&(Z=r-R);var G=this.container.selectAll("rect.scrollbar-vertical").data(V?[0]:[]);G.exit().on(".drag",null).remove(),G.enter().append("rect").classed("scrollbar-vertical",!0).call(k.fill,b.barColor),V?(this.vbar=G.attr({rx:b.barRadius,ry:b.barRadius,x:Z,y:N,width:R,height:U}),this._vbarYMin=N+U/2,this._vbarTranslateMax=C-U):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var W=this.id,ae=a-.5,re=V?s+R+.5:s+.5,ne=c-.5,Q=w?h+P+.5:h+.5,$=i._topdefs.selectAll("#"+W).data(w||V?[0]:[]);if($.exit().remove(),$.enter().append("clipPath").attr("id",W).append("rect"),w||V?(this._clipRect=$.select("rect").attr({x:Math.floor(ae),y:Math.floor(ne),width:Math.ceil(re)-Math.floor(ae),height:Math.ceil(Q)-Math.floor(ne)}),this.container.call(o.setClipUrl,W,this.gd),this.bg.attr({x:u,y:d,width:y,height:m})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(o.setClipUrl,null),delete this._clipRect),w||V){var X=S.behavior.drag().on("dragstart",function(){S.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(X);var oe=S.behavior.drag().on("dragstart",function(){S.event.sourceEvent.preventDefault(),S.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));w&&this.hbar.on(".drag",null).call(oe),V&&this.vbar.on(".drag",null).call(oe)}this.setTranslate(l,t)},b.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(o.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},b.prototype._onBoxDrag=function(){var p=this.translateX,l=this.translateY;this.hbar&&(p-=S.event.dx),this.vbar&&(l-=S.event.dy),this.setTranslate(p,l)},b.prototype._onBoxWheel=function(){var p=this.translateX,l=this.translateY;this.hbar&&(p+=S.event.deltaY),this.vbar&&(l+=S.event.deltaY),this.setTranslate(p,l)},b.prototype._onBarDrag=function(){var p=this.translateX,l=this.translateY;if(this.hbar){var t=p+this._hbarXMin,i=t+this._hbarTranslateMax;p=(T.constrain(S.event.x,t,i)-t)/(i-t)*(this.position.w-this._box.w)}if(this.vbar){var r=l+this._vbarYMin,n=r+this._vbarTranslateMax;l=(T.constrain(S.event.y,r,n)-r)/(n-r)*(this.position.h-this._box.h)}this.setTranslate(p,l)},b.prototype.setTranslate=function(p,l){var t=this.position.w-this._box.w,i=this.position.h-this._box.h;p=T.constrain(p||0,0,t),l=T.constrain(l||0,0,i),this.translateX=p,this.translateY=l,this.container.call(o.setTranslate,this._box.l-this.position.l-p,this._box.t-this.position.t-l),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+p-.5),y:Math.floor(this.position.t+l-.5)}),this.hbar&&this.hbar.call(o.setTranslate,p+p/t*this._hbarTranslateMax,l),this.vbar&&this.vbar.call(o.setTranslate,p,l+l/i*this._vbarTranslateMax)}},84284:function(ie){"use strict";ie.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},36208:function(ie){"use strict";ie.exports={axisRefDescription:function(F,e,S){return["If set to a",F,"axis id (e.g. *"+F+"* or","*"+F+"2*), the `"+F+"` position refers to a",F,"coordinate. If set to *paper*, the `"+F+"`","position refers to the distance from the",e,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",e,"("+S+"). If set to a",F,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",e,"of the domain of that axis: e.g.,","*"+F+"2 domain* refers to the domain of the second",F," axis and a",F,"position of 0.5 refers to the","point between the",e,"and the",S,"of the domain of the","second",F,"axis."].join(" ")}}},48164:function(ie){"use strict";ie.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25b2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25bc"}}},26880:function(ie){"use strict";ie.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},69104:function(ie){"use strict";ie.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},99168:function(ie){"use strict";ie.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87792:function(ie){"use strict";ie.exports={circle:"\u25cf","circle-open":"\u25cb",square:"\u25a0","square-open":"\u25a1",diamond:"\u25c6","diamond-open":"\u25c7",cross:"+",x:"\u274c"}},13448:function(ie){"use strict";ie.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},39032:function(ie){"use strict";ie.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},2264:function(ie,F){"use strict";F.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]],F.STYLE=F.CSS_DECLARATIONS.map(function(e){return e.join(": ")+"; "}).join("")},9616:function(ie,F){"use strict";F.xmlns="http://www.w3.org/2000/xmlns/",F.svg="http://www.w3.org/2000/svg",F.xlink="http://www.w3.org/1999/xlink",F.svgAttrs={xmlns:F.svg,"xmlns:xlink":F.xlink}},64884:function(ie,F,e){"use strict";F.version=e(25788).version,e(88324),e(79288);for(var S=e(24040),k=F.register=S.register,o=e(22448),T=Object.keys(o),b=0;b<T.length;b++){var p=T[b];"_"!==p.charAt(0)&&(F[p]=o[p]),k({moduleType:"apiMethod",name:p,fn:o[p]})}k(e(65875)),k([e(79180),e(56864),e(22676),e(41592),e(7402),e(76908),e(97544),e(49692),e(41152),e(12704),e(64968),e(8932),e(55080),e(2780),e(93024),e(45460)]),k([e(6580),e(11680)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(k(window.PlotlyLocales),delete window.PlotlyLocales),F.Icons=e(9224);var l=e(93024),t=e(7316);F.Plots={resize:t.resize,graphJson:t.graphJson,sendDataToCloud:t.sendDataToCloud},F.Fx={hover:l.hover,unhover:l.unhover,loneHover:l.loneHover,loneUnhover:l.loneUnhover},F.Snapshot=e(78904),F.PlotSchema=e(73060)},9224:function(ie){"use strict";ie.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},98308:function(ie,F){"use strict";F.isLeftAnchor=function(e){return"left"===e.xanchor||"auto"===e.xanchor&&e.x<=.3333333333333333},F.isCenterAnchor=function(e){return"center"===e.xanchor||"auto"===e.xanchor&&e.x>.3333333333333333&&e.x<.6666666666666666},F.isRightAnchor=function(e){return"right"===e.xanchor||"auto"===e.xanchor&&e.x>=.6666666666666666},F.isTopAnchor=function(e){return"top"===e.yanchor||"auto"===e.yanchor&&e.y>=.6666666666666666},F.isMiddleAnchor=function(e){return"middle"===e.yanchor||"auto"===e.yanchor&&e.y>.3333333333333333&&e.y<.6666666666666666},F.isBottomAnchor=function(e){return"bottom"===e.yanchor||"auto"===e.yanchor&&e.y<=.3333333333333333}},11864:function(ie,F,e){"use strict";var S=e(20435),k=S.mod,o=S.modHalf,T=Math.PI,b=2*T;function p(r){return Math.abs(r[1]-r[0])>b-1e-14}function l(r,n){return o(n-r,b)}function t(r,n){if(p(n))return!0;var a,s;n[0]<n[1]?(a=n[0],s=n[1]):(a=n[1],s=n[0]),(a=k(a,b))>(s=k(s,b))&&(s+=b);var c=k(r,b),h=c+b;return c>=a&&c<=s||h>=a&&h<=s}function i(r,n,a,s,c,h,u){c=c||0,h=h||0;var y,d,m,g,x,v=p([a,s]);function _(E,P){return[E*Math.cos(P)+c,h-E*Math.sin(P)]}v?(y=0,d=T,m=b):a<s?(y=a,m=s):(y=s,m=a),r<n?(g=r,x=n):(g=n,x=r);var f,C=Math.abs(m-y)<=T?0:1;function w(E,P,L){return"A"+[E,E]+" "+[0,C,L]+" "+_(E,P)}return v?f=null===g?"M"+_(x,y)+w(x,d,0)+w(x,m,0)+"Z":"M"+_(g,y)+w(g,d,0)+w(g,m,0)+"ZM"+_(x,y)+w(x,d,1)+w(x,m,1)+"Z":null===g?(f="M"+_(x,y)+w(x,m,0),u&&(f+="L0,0Z")):f="M"+_(g,y)+"L"+_(x,y)+w(x,m,0)+"L"+_(g,m)+w(g,y,1)+"Z",f}ie.exports={deg2rad:function(r){return r/180*T},rad2deg:function(r){return r/T*180},angleDelta:l,angleDist:function(r,n){return Math.abs(l(r,n))},isFullCircle:p,isAngleInsideSector:t,isPtInsideSector:function(r,n,a,s){return!!t(n,s)&&(a[0]<a[1]?(c=a[0],h=a[1]):(c=a[1],h=a[0]),r>=c&&r<=h);var c,h},pathArc:function(r,n,a,s,c){return i(null,r,n,a,s,c,0)},pathSector:function(r,n,a,s,c){return i(null,r,n,a,s,c,1)},pathAnnulus:function(r,n,a,s,c,h){return i(r,n,a,s,c,h,1)}}},38116:function(ie,F,e){"use strict";var S=e(83160).decode,k=e(63620),o=Array.isArray,T=ArrayBuffer,b=DataView;function p(n){return T.isView(n)&&!(n instanceof b)}function l(n){return o(n)||p(n)}F.isTypedArray=p,F.isArrayOrTypedArray=l,F.isArray1D=function(n){return!l(n[0])},F.ensureArray=function(n,a){return o(n)||(n=[]),n.length=a,n};var t={u1c:typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray,i1:typeof Int8Array>"u"?void 0:Int8Array,u1:typeof Uint8Array>"u"?void 0:Uint8Array,i2:typeof Int16Array>"u"?void 0:Int16Array,u2:typeof Uint16Array>"u"?void 0:Uint16Array,i4:typeof Int32Array>"u"?void 0:Int32Array,u4:typeof Uint32Array>"u"?void 0:Uint32Array,f4:typeof Float32Array>"u"?void 0:Float32Array,f8:typeof Float64Array>"u"?void 0:Float64Array};function i(n){return n.constructor===ArrayBuffer}function r(n,a,s){if(l(n)){if(l(n[0])){for(var c=s,h=0;h<n.length;h++)c=a(c,n[h].length);return c}return n.length}return 0}t.uint8c=t.u1c,t.uint8=t.u1,t.int8=t.i1,t.uint16=t.u2,t.int16=t.i2,t.uint32=t.u4,t.int32=t.i4,t.float32=t.f4,t.float64=t.f8,F.isArrayBuffer=i,F.decodeTypedArraySpec=function(n){var E,a=[],s={bdata:(E=n).bdata,dtype:E.dtype,shape:E.shape},c=s.dtype,h=t[c];if(!h)throw new Error('Error in dtype: "'+c+'"');var u=h.BYTES_PER_ELEMENT,y=s.bdata;i(y)||(y=S(y));var d=void 0===s.shape?[y.byteLength/u]:(""+s.shape).split(",");d.reverse();var m,g,x=d.length,v=+d[0],_=u*v,f=0;if(1===x)a=new h(y);else if(2===x)for(m=+d[1],g=0;g<m;g++)a[g]=new h(y,f,v),f+=_;else{if(3!==x)throw new Error("ndim: "+x+'is not supported with the shape:"'+s.shape+'"');m=+d[1];for(var C=+d[2],w=0;w<C;w++)for(a[w]=[],g=0;g<m;g++)a[w][g]=new h(y,f,v),f+=_}return a.bdata=s.bdata,a.dtype=s.dtype,a.shape=d.reverse().join(","),n._inputArray=a,a},F.isTypedArraySpec=function(n){return k(n)&&n.hasOwnProperty("dtype")&&"string"==typeof n.dtype&&n.hasOwnProperty("bdata")&&("string"==typeof n.bdata||i(n.bdata))&&(void 0===n.shape||n.hasOwnProperty("shape")&&("string"==typeof n.shape||"number"==typeof n.shape))},F.concat=function(){var n,a,s,c,h,u,y,d,m=[],g=!0,x=0;for(s=0;s<arguments.length;s++)(u=(c=arguments[s]).length)&&(a?m.push(c):(a=c,h=u),o(c)?n=!1:(g=!1,x?n!==c.constructor&&(n=!1):n=c.constructor),x+=u);if(!x)return[];if(!m.length)return a;if(g)return a.concat.apply(a,m);if(n){for((y=new n(x)).set(a),s=0;s<m.length;s++)y.set(c=m[s],h),h+=c.length;return y}for(y=new Array(x),d=0;d<a.length;d++)y[d]=a[d];for(s=0;s<m.length;s++){for(c=m[s],d=0;d<c.length;d++)y[h+d]=c[d];h+=d}return y},F.maxRowLength=function(n){return r(n,Math.max,0)},F.minRowLength=function(n){return r(n,Math.min,1/0)}},54037:function(ie,F,e){"use strict";var S=e(38248),k=e(39032).BADNUM,o=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;ie.exports=function(T){return"string"==typeof T&&(T=T.replace(o,"")),S(T)?Number(T):k}},73696:function(ie){"use strict";ie.exports=function(F){var e=F._fullLayout;e._glcanvas&&e._glcanvas.size()&&e._glcanvas.each(function(S){S.regl&&S.regl.clear({color:!0,depth:!0})})}},75352:function(ie){"use strict";ie.exports=function(F){F._responsiveChartHandler&&(window.removeEventListener("resize",F._responsiveChartHandler),delete F._responsiveChartHandler)}},63064:function(ie,F,e){"use strict";var S=e(38248),k=e(49760),o=e(92880).extendFlat,T=e(45464),b=e(88304),p=e(76308),l=e(13448).DESELECTDIM,t=e(22296),i=e(53756).counter,r=e(20435).modHalf,n=e(38116).isArrayOrTypedArray,a=e(38116).isTypedArraySpec,s=e(38116).decodeTypedArraySpec;function c(h,u){var y=F.valObjectMeta[u.valType];if(u.arrayOk&&n(h))return!0;if(y.validateFunction)return y.validateFunction(h,u);var d={},m=d;return y.coerceFunction(h,{set:function(x){m=x}},d,u),m!==d}F.valObjectMeta={data_array:{coerceFunction:function(h,u,y){u.set(n(h)?h:a(h)?s(h):y)}},enumerated:{coerceFunction:function(h,u,y,d){d.coerceNumber&&(h=+h),-1===d.values.indexOf(h)?u.set(y):u.set(h)},validateFunction:function(h,u){u.coerceNumber&&(h=+h);for(var y=u.values,d=0;d<y.length;d++){var m=String(y[d]);if("/"===m.charAt(0)&&"/"===m.charAt(m.length-1)){if(new RegExp(m.substr(1,m.length-2)).test(h))return!0}else if(h===y[d])return!0}return!1}},boolean:{coerceFunction:function(h,u,y){u.set(!0===h||!1===h?h:y)}},number:{coerceFunction:function(h,u,y,d){a(h)&&(h=s(h)),!S(h)||void 0!==d.min&&h<d.min||void 0!==d.max&&h>d.max?u.set(y):u.set(+h)}},integer:{coerceFunction:function(h,u,y,d){-1===(d.extras||[]).indexOf(h)?(a(h)&&(h=s(h)),h%1||!S(h)||void 0!==d.min&&h<d.min||void 0!==d.max&&h>d.max?u.set(y):u.set(+h)):u.set(h)}},string:{coerceFunction:function(h,u,y,d){u.set("string"!=typeof h?!0!==d.strict&&"number"==typeof h?String(h):y:d.noBlank&&!h?y:h)}},color:{coerceFunction:function(h,u,y){a(h)&&(h=s(h)),k(h).isValid()?u.set(h):u.set(y)}},colorlist:{coerceFunction:function(h,u,y){Array.isArray(h)&&h.length&&h.every(function(d){return k(d).isValid()})?u.set(h):u.set(y)}},colorscale:{coerceFunction:function(h,u,y){u.set(b.get(h,y))}},angle:{coerceFunction:function(h,u,y){a(h)&&(h=s(h)),"auto"===h?u.set("auto"):S(h)?u.set(r(+h,360)):u.set(y)}},subplotid:{coerceFunction:function(h,u,y,d){var m=d.regex||i(y);"string"==typeof h&&m.test(h)?u.set(h):u.set(y)},validateFunction:function(h,u){var y=u.dflt;return h===y||"string"==typeof h&&!!i(y).test(h)}},flaglist:{coerceFunction:function(h,u,y,d){if(-1===(d.extras||[]).indexOf(h))if("string"==typeof h){for(var m=h.split("+"),g=0;g<m.length;){var x=m[g];-1===d.flags.indexOf(x)||m.indexOf(x)<g?m.splice(g,1):g++}u.set(m.length?m.join("+"):y)}else u.set(y);else u.set(h)}},any:{coerceFunction:function(h,u,y){u.set(void 0===h?y:a(h)?s(h):h)}},info_array:{coerceFunction:function(h,u,y,d){function m(R,U,Z){var N;return void 0===Z&&(Z=U.dflt),F.valObjectMeta[U.valType].coerceFunction(R,{set:function(W){N=W}},Z,U),N}if(a(h)&&(h=s(h)),n(h)){var g,x,v,f,C,w=2===d.dimensions||"1-2"===d.dimensions&&Array.isArray(h)&&n(h[0]),E=d.items,P=[],L=Array.isArray(E),O=L&&w&&n(E[0]),z=w&&L&&!O,V=L&&!z?E.length:h.length;if(y=Array.isArray(y)?y:[],w)for(g=0;g<V;g++)for(P[g]=[],v=n(h[g])?h[g]:[],f=z?E.length:L?E[g].length:v.length,x=0;x<f;x++)void 0!==(C=m(v[x],z?E[x]:L?E[g][x]:E,(y[g]||[])[x]))&&(P[g][x]=C);else for(g=0;g<V;g++)void 0!==(C=m(h[g],L?E[g]:E,y[g]))&&(P[g]=C);u.set(P)}else u.set(y)},validateFunction:function(h,u){if(!n(h))return!1;var y=u.items,d=Array.isArray(y),m=2===u.dimensions;if(!u.freeLength&&h.length!==y.length)return!1;for(var g=0;g<h.length;g++)if(m){if(!n(h[g])||!u.freeLength&&h[g].length!==y[g].length)return!1;for(var x=0;x<h[g].length;x++)if(!c(h[g][x],d?y[g][x]:y))return!1}else if(!c(h[g],d?y[g]:y))return!1;return!0}}},F.coerce=function(h,u,y,d,m){var g=t(y,d).get(),x=t(h,d),v=t(u,d),_=x.get(),f=u._template;if(void 0===_&&f&&(_=t(f,d).get(),f=0),void 0===m&&(m=g.dflt),g.arrayOk){if(n(_))return v.set(_),_;if(a(_))return _=s(_),v.set(_),_}var C=F.valObjectMeta[g.valType].coerceFunction;C(_,v,m,g);var w=v.get();return f&&w===m&&!c(_,g)&&(C(_=t(f,d).get(),v,m,g),w=v.get()),w},F.coerce2=function(h,u,y,d,m){var g=t(h,d),x=F.coerce(h,u,y,d,m);return null!=g.get()&&x},F.coerceFont=function(h,u,y,d){d||(d={}),y=o({},y);var m={family:h(u+".family",(y=o(y,d.overrideDflt||{})).family),size:h(u+".size",y.size),color:h(u+".color",y.color),weight:h(u+".weight",y.weight),style:h(u+".style",y.style)};if(d.noFontVariant||(m.variant=h(u+".variant",y.variant)),d.noFontLineposition||(m.lineposition=h(u+".lineposition",y.lineposition)),d.noFontTextcase||(m.textcase=h(u+".textcase",y.textcase)),!d.noFontShadow){var g=y.shadow;"none"===g&&d.autoShadowDflt&&(g="auto"),m.shadow=h(u+".shadow",g)}return m},F.coercePattern=function(h,u,y,d){if(h(u+".shape")){h(u+".solidity"),h(u+".size");var m="overlay"===h(u+".fillmode");if(!d){var g=h(u+".bgcolor",m?y:void 0);h(u+".fgcolor",m?p.contrast(g):y)}h(u+".fgopacity",m?.5:1)}},F.coerceHoverinfo=function(h,u,y){var d,m=u._module.attributes,g=m.hoverinfo?m:T,x=g.hoverinfo;if(1===y._dataLength){var v="all"===x.dflt?x.flags.slice():x.dflt.split("+");v.splice(v.indexOf("name"),1),d=v.join("+")}return F.coerce(h,u,g,"hoverinfo",d)},F.coerceSelectionMarkerOpacity=function(h,u){if(h.marker){var y,d,m=h.marker.opacity;void 0!==m&&(n(m)||h.selected||h.unselected||(y=m,d=l*m),u("selected.marker.opacity",y),u("unselected.marker.opacity",d))}},F.validate=c},67555:function(ie,F,e){"use strict";var S,k,o=e(94336).Yn,T=e(38248),b=e(24248),p=e(20435).mod,l=e(39032),t=l.BADNUM,i=l.ONEDAY,r=l.ONEHOUR,n=l.ONEMIN,a=l.ONESEC,s=l.EPOCHJD,c=e(24040),h=e(94336).E9,u=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,y=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,d=(new Date).getFullYear()-70;function m(z){return z&&c.componentsRegistry.calendars&&"string"==typeof z&&"gregorian"!==z}function g(z,V){return String(z+Math.pow(10,V)).substr(1)}F.dateTick0=function(z,V){var Z,N,R=(N=!!V,m(Z=z)?N?c.getComponentMethod("calendars","CANONICAL_SUNDAY")[Z]:c.getComponentMethod("calendars","CANONICAL_TICK")[Z]:N?"2000-01-02":"2000-01-01");if(V<2)return R;var U=F.dateTime2ms(R,z);return F.ms2DateTime(U+=i*(V-1),0,z)},F.dfltRange=function(z){return m(z)?c.getComponentMethod("calendars","DFLTRANGE")[z]:["2000-01-01","2001-01-01"]},F.isJSDate=function(z){return"object"==typeof z&&null!==z&&"function"==typeof z.getTime},F.dateTime2ms=function(z,V){if(F.isJSDate(z)){var R=z.getTimezoneOffset()*n,U=(z.getUTCMinutes()-z.getMinutes())*n+(z.getUTCSeconds()-z.getSeconds())*a+(z.getUTCMilliseconds()-z.getMilliseconds());if(U){var Z=3*n;R=R-Z/2+p(U-R+Z/2,Z)}return(z=Number(z)-R)>=S&&z<=k?z:t}if("string"!=typeof z&&"number"!=typeof z)return t;z=String(z);var N=m(V),G=z.charAt(0);!N||"G"!==G&&"g"!==G||(z=z.substr(1),V="");var W=N&&"chinese"===V.substr(0,7),ae=z.match(W?y:u);if(!ae)return t;var re=ae[1],ne=ae[3]||"1",Q=Number(ae[5]||1),$=Number(ae[7]||0),X=Number(ae[9]||0),oe=Number(ae[11]||0);if(N){if(2===re.length)return t;var fe;re=Number(re);try{var ue=c.getComponentMethod("calendars","getCal")(V);if(W){var ge="i"===ne.charAt(ne.length-1);ne=parseInt(ne,10),fe=ue.newDate(re,ue.toMonthIndex(re,ne,ge),Q)}else fe=ue.newDate(re,Number(ne),Q)}catch{return t}return fe?(fe.toJD()-s)*i+$*r+X*n+oe*a:t}re=2===re.length?(Number(re)+2e3-d)%100+d:Number(re),ne-=1;var we=new Date(Date.UTC(2e3,ne,Q,$,X));return we.setUTCFullYear(re),we.getUTCMonth()!==ne||we.getUTCDate()!==Q?t:we.getTime()+oe*a},S=F.MIN_MS=F.dateTime2ms("-9999"),k=F.MAX_MS=F.dateTime2ms("9999-12-31 23:59:59.9999"),F.isDateTime=function(z,V){return F.dateTime2ms(z,V)!==t};var x=90*i,v=3*r,_=5*n;function f(z,V,R,U,Z){if((V||R||U||Z)&&(z+=" "+g(V,2)+":"+g(R,2),(U||Z)&&(z+=":"+g(U,2),Z))){for(var N=4;Z%10==0;)N-=1,Z/=10;z+="."+g(Z,N)}return z}F.ms2DateTime=function(z,V,R){if("number"!=typeof z||!(z>=S&&z<=k))return t;V||(V=0);var U,Z,N,G,W,ae,re=Math.floor(10*p(z+.05,1)),ne=Math.round(z-re/10);if(m(R)){var Q=Math.floor(ne/i)+s,$=Math.floor(p(z,i));try{U=c.getComponentMethod("calendars","getCal")(R).fromJD(Q).formatDate("yyyy-mm-dd")}catch{U=h("G%Y-%m-%d")(new Date(ne))}if("-"===U.charAt(0))for(;U.length<11;)U="-0"+U.substr(1);else for(;U.length<10;)U="0"+U;Z=V<x?Math.floor($/r):0,N=V<x?Math.floor($%r/n):0,G=V<v?Math.floor($%n/a):0,W=V<_?$%a*10+re:0}else ae=new Date(ne),U=h("%Y-%m-%d")(ae),Z=V<x?ae.getUTCHours():0,N=V<x?ae.getUTCMinutes():0,G=V<v?ae.getUTCSeconds():0,W=V<_?10*ae.getUTCMilliseconds()+re:0;return f(U,Z,N,G,W)},F.ms2DateTimeLocal=function(z){if(!(z>=S+i&&z<=k-i))return t;var V=Math.floor(10*p(z+.05,1)),R=new Date(Math.round(z-V/10));return f(o("%Y-%m-%d")(R),R.getHours(),R.getMinutes(),R.getSeconds(),10*R.getUTCMilliseconds()+V)},F.cleanDate=function(z,V,R){if(z===t)return V;if(F.isJSDate(z)||"number"==typeof z&&isFinite(z)){if(m(R))return b.error("JS Dates and milliseconds are incompatible with world calendars",z),V;if(!(z=F.ms2DateTimeLocal(+z))&&void 0!==V)return V}else if(!F.isDateTime(z,R))return b.error("unrecognized date",z),V;return z};var C=/%\d?f/g,w=/%h/g,E={1:"1",2:"1",3:"2",4:"2"};function P(z,V,R,U){z=z.replace(C,function(N){var G=Math.min(+N.charAt(1)||6,6);return(V/1e3%1+2).toFixed(G).substr(2).replace(/0+$/,"")||"0"});var Z=new Date(Math.floor(V+.05));if(z=z.replace(w,function(){return E[R("%q")(Z)]}),m(U))try{z=c.getComponentMethod("calendars","worldCalFmt")(z,V,U)}catch{return"Invalid"}return R(z)(Z)}var L=[59,59.9,59.99,59.999,59.9999];F.formatDate=function(z,V,R,U,Z,N){if(Z=m(Z)&&Z,!V)if("y"===R)V=N.year;else if("m"===R)V=N.month;else{if("d"!==R)return function(G,W){var ae=p(G+.05,i),re=g(Math.floor(ae/r),2)+":"+g(p(Math.floor(ae/n),60),2);if("M"!==W){T(W)||(W=0);var ne=(100+Math.min(p(G/a,60),L[W])).toFixed(W).substr(1);W>0&&(ne=ne.replace(/0+$/,"").replace(/[\.]$/,"")),re+=":"+ne}return re}(z,R)+"\n"+P(N.dayMonthYear,z,U,Z);V=N.dayMonth+"\n"+N.year}return P(V,z,U,Z)};var O=3*i;F.incrementMonth=function(z,V,R){R=m(R)&&R;var U=p(z,i);if(z=Math.round(z-U),R)try{var Z=Math.round(z/i)+s,N=c.getComponentMethod("calendars","getCal")(R),G=N.fromJD(Z);return V%12?N.add(G,V,"m"):N.add(G,V/12,"y"),(G.toJD()-s)*i+U}catch{b.error("invalid ms "+z+" in calendar "+R)}var W=new Date(z+O);return W.setUTCMonth(W.getUTCMonth()+V)+U-O},F.findExactDates=function(z,V){for(var R,U,Z=0,N=0,G=0,W=0,ae=m(V)&&c.getComponentMethod("calendars","getCal")(V),re=0;re<z.length;re++)if(T(U=z[re])){if(!(U%i))if(ae)try{1===(R=ae.fromJD(U/i+s)).day()?1===R.month()?Z++:N++:G++}catch{}else 1===(R=new Date(U)).getUTCDate()?0===R.getUTCMonth()?Z++:N++:G++}else W++;G+=N+=Z;var ne=z.length-W;return{exactYears:Z/ne,exactMonths:N/ne,exactDays:G/ne}}},52200:function(ie,F,e){"use strict";var S=e(33428),k=e(24248),o=e(52248),T=e(36524);function b(r){var n=r&&r.parentNode;n&&n.removeChild(r)}function p(r,n,a){var s="plotly.js-style-"+r,c=document.getElementById(s);c||((c=document.createElement("style")).setAttribute("id",s),c.appendChild(document.createTextNode("")),document.head.appendChild(c));var h=c.sheet;h.insertRule?h.insertRule(n+"{"+a+"}",0):h.addRule?h.addRule(n,a,0):k.warn("addStyleRule failed")}function l(r){var n=window.getComputedStyle(r,null),a=n.getPropertyValue("-webkit-transform")||n.getPropertyValue("-moz-transform")||n.getPropertyValue("-ms-transform")||n.getPropertyValue("-o-transform")||n.getPropertyValue("transform");return"none"===a?null:a.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(s){return+s})}function t(r){for(var n=[];i(r);)n.push(r),r=r.parentNode,"function"==typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host);return n}function i(r){return r&&(r instanceof Element||r instanceof HTMLElement)}ie.exports={getGraphDiv:function(r){var n;if("string"==typeof r){if(null===(n=document.getElementById(r)))throw new Error("No DOM element with id '"+r+"' exists on the page.");return n}if(null==r)throw new Error("DOM element provided is null or undefined");return r},isPlotDiv:function(r){var n=S.select(r);return n.node()instanceof HTMLElement&&n.size()&&n.classed("js-plotly-plot")},removeElement:b,addStyleRule:function(r,n){p("global",r,n)},addRelatedStyleRule:p,deleteRelatedStyleRule:function(r){var a=document.getElementById("plotly.js-style-"+r);a&&b(a)},getFullTransformMatrix:function(r){var n=t(r),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return n.forEach(function(s){var c=l(s);if(c){var h=o.convertCssMatrix(c);a=T.multiply(a,a,h)}}),a},getElementTransformMatrix:l,getElementAndAncestors:t,equalDomRects:function(r,n){return r&&n&&r.top===n.top&&r.left===n.left&&r.right===n.right&&r.bottom===n.bottom}}},95924:function(ie,F,e){"use strict";var S=e(61252).EventEmitter;ie.exports={init:function(o){if(o._ev instanceof S)return o;var T=new S,b=new S;return o._ev=T,o._internalEv=b,o.on=T.on.bind(T),o.once=T.once.bind(T),o.removeListener=T.removeListener.bind(T),o.removeAllListeners=T.removeAllListeners.bind(T),o._internalOn=b.on.bind(b),o._internalOnce=b.once.bind(b),o._removeInternalListener=b.removeListener.bind(b),o._removeAllInternalListeners=b.removeAllListeners.bind(b),o.emit=function(p,l){typeof jQuery<"u"&&jQuery(o).trigger(p,l),T.emit(p,l),b.emit(p,l)},o},triggerHandler:function(o,T,b){var p,l;typeof jQuery<"u"&&(p=jQuery(o).triggerHandler(T,b));var t=o._ev;if(!t)return p;var i,r=t._events[T];if(!r)return p;function n(a){return a.listener?(t.removeListener(T,a.listener),a.fired?void 0:(a.fired=!0,a.listener.apply(t,[b]))):a.apply(t,[b])}for(r=Array.isArray(r)?r:[r],i=0;i<r.length-1;i++)n(r[i]);return l=n(r[i]),void 0!==p?p:l},purge:function(o){return delete o._ev,delete o.on,delete o.once,delete o.removeListener,delete o.removeAllListeners,delete o.emit,delete o._ev,delete o._internalEv,delete o._internalOn,delete o._internalOnce,delete o._removeInternalListener,delete o._removeAllInternalListeners,o}}},92880:function(ie,F,e){"use strict";var S=e(63620),k=Array.isArray;function o(T,b,p,l){var t,i,r,n,a,s,h=T[0],u=T.length;if(2===u&&k(h)&&k(T[1])&&0===h.length){if(function(d,m){var g,x;for(g=0;g<d.length;g++){if(null!==(x=d[g])&&"object"==typeof x)return!1;void 0!==x&&(m[g]=x)}return!0}(T[1],h))return h;h.splice(0,h.length)}for(var y=1;y<u;y++)for(i in t=T[y])r=h[i],n=t[i],l&&k(n)?h[i]=n:b&&n&&(S(n)||(a=k(n)))?(a?(a=!1,s=r&&k(r)?r:[]):s=r&&S(r)?r:{},h[i]=o([s,n],b,p,l)):(void 0!==n||p)&&(h[i]=n);return h}F.extendFlat=function(){return o(arguments,!1,!1,!1)},F.extendDeep=function(){return o(arguments,!0,!1,!1)},F.extendDeepAll=function(){return o(arguments,!0,!0,!1)},F.extendDeepNoArrays=function(){return o(arguments,!0,!1,!0)}},68944:function(ie){"use strict";ie.exports=function(F){for(var e={},S=[],k=0,o=0;o<F.length;o++){var T=F[o];1!==e[T]&&(e[T]=1,S[k++]=T)}return S}},43880:function(ie){"use strict";function F(S){return!0===S.visible}function e(S){var k=S[0].trace;return!0===k.visible&&0!==k._length}ie.exports=function(S){for(var k,o=(k=S,Array.isArray(k)&&Array.isArray(k[0])&&k[0][0]&&k[0][0].trace?e:F),T=[],b=0;b<S.length;b++){var p=S[b];o(p)&&T.push(p)}return T}},27144:function(ie,F,e){"use strict";var S=e(33428),k=e(36116),o=e(40440),T=e(77844),b=e(42428),p=e(35536),l=e(24248),t=e(63620),i=e(22296),r=e(92065),n=Object.keys(k),a={"ISO-3":p,"USA-states":p,"country names":function(c){for(var h=0;h<n.length;h++){var u=n[h];if(new RegExp(k[u]).test(c.trim().toLowerCase()))return u}return l.log("Unrecognized country name: "+c+"."),!1}};function s(c){var h=c.geojson,u=window.PlotlyGeoAssets||{},y="string"==typeof h?u[h]:h;return t(y)?y:(l.error("Oops ... something went wrong when fetching "+h),!1)}ie.exports={locationToFeature:function(c,h,u){if(!h||"string"!=typeof h)return!1;var y,d,m,g=a[c](h);if(g){if("USA-states"===c)for(y=[],m=0;m<u.length;m++)(d=u[m]).properties&&d.properties.gu&&"USA"===d.properties.gu&&y.push(d);else y=u;for(m=0;m<y.length;m++)if((d=y[m]).id===g)return d;l.log(["Location with id",g,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(c){var h,u,y,d,m=c.geometry,g=m.coordinates,x=c.id,v=[];function _(f){for(var C=0;C<f.length-1;C++)if(f[C][0]>0&&f[C+1][0]<0)return C;return null}switch(h="RUS"===x||"FJI"===x?function(f){var C;if(null===_(f))C=f;else for(C=new Array(f.length),d=0;d<f.length;d++)C[d]=[f[d][0]<0?f[d][0]+360:f[d][0],f[d][1]];v.push(r.tester(C))}:"ATA"===x?function(f){var C=_(f);if(null===C)return v.push(r.tester(f));var w=new Array(f.length+1),E=0;for(d=0;d<f.length;d++)d>C?w[E++]=[f[d][0]+360,f[d][1]]:d===C?(w[E++]=f[d],w[E++]=[f[d][0],-90]):w[E++]=f[d];var P=r.tester(w);P.pts.pop(),v.push(P)}:function(f){v.push(r.tester(f))},m.type){case"MultiPolygon":for(u=0;u<g.length;u++)for(y=0;y<g[u].length;y++)h(g[u][y]);break;case"Polygon":for(u=0;u<g.length;u++)h(g[u])}return v},getTraceGeojson:s,extractTraceFeature:function(c){var h=c[0].trace,u=s(h);if(!u)return!1;var y,d={},m=[];for(y=0;y<h._length;y++){var g=c[y];(g.loc||0===g.loc)&&(d[g.loc]=g)}function x(f){var C=i(f,h.featureidkey||"id").get(),w=d[C];if(w){var E=f.geometry;if("Polygon"===E.type||"MultiPolygon"===E.type){var P={type:"Feature",id:C,geometry:E,properties:{}};P.properties.ct=function(L){var O,z=L.geometry;if("MultiPolygon"===z.type)for(var V=z.coordinates,R=0,U=0;U<V.length;U++){var Z={type:"Polygon",coordinates:V[U]},N=o.default(Z);N>R&&(R=N,O=Z)}else O=z;return T.default(O).geometry.coordinates}(P),w.fIn=f,w.fOut=P,m.push(P)}else l.log(["Location",w.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete d[C]}switch(u.type){case"FeatureCollection":var v=u.features;for(y=0;y<v.length;y++)x(v[y]);break;case"Feature":x(u);break;default:return l.warn(["Invalid GeoJSON type",(u.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var _ in d)l.log(["Location *"+_+"*","does not have a matching feature with id-key","*"+h.featureidkey+"*."].join(" "));return m},fetchTraceGeoData:function(c){var h=window.PlotlyGeoAssets||{},u=[];function y(x){return new Promise(function(v,_){S.json(x,function(f,C){return f?(delete h[x],_(new Error(404===f.status?'GeoJSON at URL "'+x+'" does not exist.':"Unexpected error while fetching from "+x))):(h[x]=C,v(C))})})}function d(x){return new Promise(function(v,_){var f=0,C=setInterval(function(){return h[x]&&"pending"!==h[x]?(clearInterval(C),v(h[x])):f>100?(clearInterval(C),_("Unexpected error while fetching from "+x)):void f++},50)})}for(var m=0;m<c.length;m++){var g=c[m][0].trace.geojson;"string"==typeof g&&(h[g]?"pending"===h[g]&&u.push(d(g)):(h[g]="pending",u.push(y(g))))}return u},computeBbox:function(c){return b.default(c)}}},44808:function(ie,F,e){"use strict";var S=e(39032).BADNUM;F.calcTraceToLineCoords=function(k){for(var o=k[0].trace.connectgaps,T=[],b=[],p=0;p<k.length;p++){var l=k[p].lonlat;l[0]!==S?b.push(l):!o&&b.length>0&&(T.push(b),b=[])}return b.length>0&&T.push(b),T},F.makeLine=function(k){return 1===k.length?{type:"LineString",coordinates:k[0]}:{type:"MultiLineString",coordinates:k}},F.makePolygon=function(k){if(1===k.length)return{type:"Polygon",coordinates:k};for(var o=new Array(k.length),T=0;T<k.length;T++)o[T]=[k[T]];return{type:"MultiPolygon",coordinates:o}},F.makeBlank=function(){return{type:"Point",coordinates:[]}}},92348:function(ie,F,e){"use strict";var S,k,o,T=e(20435).mod;function b(l,t,i,r,n,a,s,c){var h=i-l,u=n-l,y=s-n,d=r-t,m=a-t,g=c-a,x=h*g-y*d;if(0===x)return null;var v=(u*g-y*m)/x,_=(u*d-h*m)/x;return _<0||_>1||v<0||v>1?null:{x:l+h*v,y:t+d*v}}function p(l,t,i,r,n){var a=r*l+n*t;if(a<0)return r*r+n*n;if(a>i){var s=r-l,c=n-t;return s*s+c*c}var h=r*t-n*l;return h*h/i}F.segmentsIntersect=b,F.segmentDistance=function(l,t,i,r,n,a,s,c){if(b(l,t,i,r,n,a,s,c))return 0;var h=i-l,u=r-t,y=s-n,d=c-a,m=h*h+u*u,g=y*y+d*d,x=Math.min(p(h,u,m,n-l,a-t),p(h,u,m,s-l,c-t),p(y,d,g,l-n,t-a),p(y,d,g,i-n,r-a));return Math.sqrt(x)},F.getTextLocation=function(l,t,i,r){if(l===k&&r===o||(S={},k=l,o=r),S[i])return S[i];var n=l.getPointAtLength(T(i-r/2,t)),a=l.getPointAtLength(T(i+r/2,t)),s=Math.atan((a.y-n.y)/(a.x-n.x)),c=l.getPointAtLength(T(i,t)),h={x:(4*c.x+n.x+a.x)/6,y:(4*c.y+n.y+a.y)/6,theta:s};return S[i]=h,h},F.clearLocationCache=function(){k=null},F.getVisibleSegment=function(l,t,i){var r,n,a=t.left,s=t.right,c=t.top,h=t.bottom,u=0,y=l.getTotalLength(),d=y;function m(x){var v=l.getPointAtLength(x);0===x?r=v:x===y&&(n=v);var _=v.x<a?a-v.x:v.x>s?v.x-s:0,f=v.y<c?c-v.y:v.y>h?v.y-h:0;return Math.sqrt(_*_+f*f)}for(var g=m(u);g;){if((u+=g+i)>d)return;g=m(u)}for(g=m(d);g;){if(u>(d-=g+i))return;g=m(d)}return{min:u,max:d,len:d-u,total:y,isClosed:0===u&&d===y&&Math.abs(r.x-n.x)<.1&&Math.abs(r.y-n.y)<.1}},F.findPointOnPath=function(l,t,i,r){for(var n,a,s,c=(r=r||{}).pathLength||l.getTotalLength(),h=r.tolerance||.001,u=r.iterationLimit||30,y=l.getPointAtLength(0)[i]>l.getPointAtLength(c)[i]?-1:1,d=0,m=0,g=c;d<u;){if(s=(a=l.getPointAtLength(n=(m+g)/2))[i]-t,Math.abs(s)<h)return a;y*s>0?g=n:m=n,d++}return a}},33040:function(ie,F,e){"use strict";var S=e(38248),k=e(49760),o=e(72160),T=e(8932),b=e(22548).defaultLine,p=e(38116).isArrayOrTypedArray,l=o(b);function t(n,a){var s=n;return s[3]*=a,s}function i(n){if(S(n))return l;var a=o(n);return a.length?a:l}function r(n){return S(n)?n:1}ie.exports={formatColor:function(n,a,s){var c=n.color;c&&c._inputArray&&(c=c._inputArray);var h,u,y,d,m,g=p(c),x=p(a),v=T.extractOpts(n),_=[];if(h=void 0!==v.colorscale?T.makeColorScaleFuncFromTrace(n):i,u=g?function(C,w){return void 0===C[w]?l:o(h(C[w]))}:i,y=x?function(C,w){return void 0===C[w]?1:r(C[w])}:r,g||x)for(var f=0;f<s;f++)d=u(c,f),m=y(a,f),_[f]=t(d,m);else _=t(o(c),a);return _},parseColorScale:function(n){var a=T.extractOpts(n),s=a.colorscale;return a.reversescale&&(s=T.flipScale(a.colorscale)),s.map(function(c){var h=c[0],u=k(c[1]).toRgb();return{index:h,rgb:[u.r,u.g,u.b,u.a]}})}}},71688:function(ie,F,e){"use strict";var S=e(35536);function k(o){return[o]}ie.exports={keyFun:function(o){return o.key},repeat:k,descend:S,wrap:k,unwrap:function(o){return o[0]}}},35536:function(ie){"use strict";ie.exports=function(F){return F}},1396:function(ie){"use strict";ie.exports=function(F,e){if(!e)return F;var S=1/Math.abs(e),k=S>1?(S*F+S*e)/S:F+e,o=String(k).length;if(o>16){var T=String(e).length;if(o>=String(F).length+T){var b=parseFloat(k).toPrecision(12);-1===b.indexOf("e+")&&(k=+b)}}return k}},3400:function(ie,F,e){"use strict";var S=e(33428),k=e(94336).E9,o=e(57624).E9,T=e(38248),b=e(39032),p=b.FP_SAFE,l=-p,t=b.BADNUM,i=ie.exports={};i.adjustFormat=function($){return!$||/^\d[.]\df/.test($)||/[.]\d%/.test($)?$:"0.f"===$?"~f":/^\d%/.test($)?"~%":/^\ds/.test($)?"~s":!/^[~,.0$]/.test($)&&/[&fps]/.test($)?"~"+$:$};var r={};i.warnBadFormat=function($){var X=String($);r[X]||(r[X]=1,i.warn('encountered bad format: "'+X+'"'))},i.noFormat=function($){return String($)},i.numberFormat=function($){var X;try{X=o(i.adjustFormat($))}catch{return i.warnBadFormat($),i.noFormat}return X},i.nestedProperty=e(22296),i.keyedContainer=e(37804),i.relativeAttr=e(23193),i.isPlainObject=e(63620),i.toLogRange=e(36896),i.relinkPrivateKeys=e(51528);var n=e(38116);i.isArrayBuffer=n.isArrayBuffer,i.isTypedArray=n.isTypedArray,i.isArrayOrTypedArray=n.isArrayOrTypedArray,i.isArray1D=n.isArray1D,i.ensureArray=n.ensureArray,i.concat=n.concat,i.maxRowLength=n.maxRowLength,i.minRowLength=n.minRowLength;var a=e(20435);i.mod=a.mod,i.modHalf=a.modHalf;var s=e(63064);i.valObjectMeta=s.valObjectMeta,i.coerce=s.coerce,i.coerce2=s.coerce2,i.coerceFont=s.coerceFont,i.coercePattern=s.coercePattern,i.coerceHoverinfo=s.coerceHoverinfo,i.coerceSelectionMarkerOpacity=s.coerceSelectionMarkerOpacity,i.validate=s.validate;var c=e(67555);i.dateTime2ms=c.dateTime2ms,i.isDateTime=c.isDateTime,i.ms2DateTime=c.ms2DateTime,i.ms2DateTimeLocal=c.ms2DateTimeLocal,i.cleanDate=c.cleanDate,i.isJSDate=c.isJSDate,i.formatDate=c.formatDate,i.incrementMonth=c.incrementMonth,i.dateTick0=c.dateTick0,i.dfltRange=c.dfltRange,i.findExactDates=c.findExactDates,i.MIN_MS=c.MIN_MS,i.MAX_MS=c.MAX_MS;var h=e(14952);i.findBin=h.findBin,i.sorterAsc=h.sorterAsc,i.sorterDes=h.sorterDes,i.distinctVals=h.distinctVals,i.roundUp=h.roundUp,i.sort=h.sort,i.findIndexOfMin=h.findIndexOfMin,i.sortObjectKeys=e(95376);var u=e(63084);i.aggNums=u.aggNums,i.len=u.len,i.mean=u.mean,i.median=u.median,i.midRange=u.midRange,i.variance=u.variance,i.stdev=u.stdev,i.interp=u.interp;var y=e(52248);i.init2dArray=y.init2dArray,i.transposeRagged=y.transposeRagged,i.dot=y.dot,i.translationMatrix=y.translationMatrix,i.rotationMatrix=y.rotationMatrix,i.rotationXYMatrix=y.rotationXYMatrix,i.apply3DTransform=y.apply3DTransform,i.apply2DTransform=y.apply2DTransform,i.apply2DTransform2=y.apply2DTransform2,i.convertCssMatrix=y.convertCssMatrix,i.inverseTransformMatrix=y.inverseTransformMatrix;var d=e(11864);i.deg2rad=d.deg2rad,i.rad2deg=d.rad2deg,i.angleDelta=d.angleDelta,i.angleDist=d.angleDist,i.isFullCircle=d.isFullCircle,i.isAngleInsideSector=d.isAngleInsideSector,i.isPtInsideSector=d.isPtInsideSector,i.pathArc=d.pathArc,i.pathSector=d.pathSector,i.pathAnnulus=d.pathAnnulus;var m=e(98308);i.isLeftAnchor=m.isLeftAnchor,i.isCenterAnchor=m.isCenterAnchor,i.isRightAnchor=m.isRightAnchor,i.isTopAnchor=m.isTopAnchor,i.isMiddleAnchor=m.isMiddleAnchor,i.isBottomAnchor=m.isBottomAnchor;var g=e(92348);i.segmentsIntersect=g.segmentsIntersect,i.segmentDistance=g.segmentDistance,i.getTextLocation=g.getTextLocation,i.clearLocationCache=g.clearLocationCache,i.getVisibleSegment=g.getVisibleSegment,i.findPointOnPath=g.findPointOnPath;var x=e(92880);i.extendFlat=x.extendFlat,i.extendDeep=x.extendDeep,i.extendDeepAll=x.extendDeepAll,i.extendDeepNoArrays=x.extendDeepNoArrays;var v=e(24248);i.log=v.log,i.warn=v.warn,i.error=v.error;var _=e(53756);i.counterRegex=_.counter;var f=e(91200);i.throttle=f.throttle,i.throttleDone=f.done,i.clearThrottle=f.clear;var C=e(52200);function w($){var X={};for(var oe in $)for(var fe=$[oe],ue=0;ue<fe.length;ue++)X[fe[ue]]=+oe;return X}i.getGraphDiv=C.getGraphDiv,i.isPlotDiv=C.isPlotDiv,i.removeElement=C.removeElement,i.addStyleRule=C.addStyleRule,i.addRelatedStyleRule=C.addRelatedStyleRule,i.deleteRelatedStyleRule=C.deleteRelatedStyleRule,i.getFullTransformMatrix=C.getFullTransformMatrix,i.getElementTransformMatrix=C.getElementTransformMatrix,i.getElementAndAncestors=C.getElementAndAncestors,i.equalDomRects=C.equalDomRects,i.clearResponsive=e(75352),i.preserveDrawingBuffer=e(34296),i.makeTraceGroups=e(30988),i._=e(98356),i.notifier=e(41792),i.filterUnique=e(68944),i.filterVisible=e(43880),i.pushUnique=e(52416),i.increment=e(1396),i.cleanNumber=e(54037),i.ensureNumber=function($){return T($)?($=Number($))>p||$<l?t:$:t},i.isIndex=function($,X){return!(void 0!==X&&$>=X)&&T($)&&$>=0&&$%1==0},i.noop=e(16628),i.identity=e(35536),i.repeat=function($,X){for(var oe=new Array(X),fe=0;fe<X;fe++)oe[fe]=$;return oe},i.swapAttrs=function($,X,oe,fe){oe||(oe="x"),fe||(fe="y");for(var ue=0;ue<X.length;ue++){var ge=X[ue],we=i.nestedProperty($,ge.replace("?",oe)),Te=i.nestedProperty($,ge.replace("?",fe)),xe=we.get();we.set(Te.get()),Te.set(xe)}},i.raiseToTop=function($){$.parentNode.appendChild($)},i.cancelTransition=function($){return $.transition().duration(0)},i.constrain=function($,X,oe){return X>oe?Math.max(oe,Math.min(X,$)):Math.max(X,Math.min(oe,$))},i.bBoxIntersect=function($,X,oe){return $.left<=X.right+(oe=oe||0)&&X.left<=$.right+oe&&$.top<=X.bottom+oe&&X.top<=$.bottom+oe},i.simpleMap=function($,X,oe,fe,ue){for(var ge=$.length,we=new Array(ge),Te=0;Te<ge;Te++)we[Te]=X($[Te],oe,fe,ue);return we},i.randstr=function $(X,oe,fe,ue){if(fe||(fe=16),void 0===oe&&(oe=24),oe<=0)return"0";var ge,we,Te=Math.log(Math.pow(2,oe))/Math.log(fe),xe="";for(ge=2;Te===1/0;ge*=2)Te=Math.log(Math.pow(2,oe/ge))/Math.log(fe)*ge;var ye=Te-Math.floor(Te);for(ge=0;ge<Math.floor(Te);ge++)xe=Math.floor(Math.random()*fe).toString(fe)+xe;ye&&(we=Math.pow(fe,ye),xe=Math.floor(Math.random()*we).toString(fe)+xe);var _e=parseInt(xe,fe);return X&&X[xe]||_e!==1/0&&_e>=Math.pow(2,oe)?ue>10?(i.warn("randstr failed uniqueness"),xe):$(X,oe,fe,(ue||0)+1):xe},i.OptionControl=function($,X){$||($={}),X||(X="opt");var oe={optionList:[],_newoption:function(fe){fe[X]=$,oe[fe.name]=fe,oe.optionList.push(fe)}};return oe["_"+X]=$,oe},i.smooth=function($,X){if((X=Math.round(X)||0)<2)return $;var oe,fe,ue,ge,we=$.length,Te=2*we,xe=2*X-1,ye=new Array(xe),_e=new Array(we);for(oe=0;oe<xe;oe++)ye[oe]=(1-Math.cos(Math.PI*(oe+1)/X))/(2*X);for(oe=0;oe<we;oe++){for(ge=0,fe=0;fe<xe;fe++)(ue=oe+fe+1-X)<-we?ue-=Te*Math.round(ue/Te):ue>=Te&&(ue-=Te*Math.floor(ue/Te)),ue<0?ue=-1-ue:ue>=we&&(ue=Te-1-ue),ge+=$[ue]*ye[fe];_e[oe]=ge}return _e},i.syncOrAsync=function($,X,oe){var fe;function ue(){return i.syncOrAsync($,X,oe)}for(;$.length;)if((fe=(0,$.splice(0,1)[0])(X))&&fe.then)return fe.then(ue);return oe&&oe(X)},i.stripTrailingSlash=function($){return"/"===$.substr(-1)?$.substr(0,$.length-1):$},i.noneOrAll=function($,X,oe){if($){var fe,ue=!1,ge=!0;for(fe=0;fe<oe.length;fe++)null!=$[oe[fe]]?ue=!0:ge=!1;if(ue&&!ge)for(fe=0;fe<oe.length;fe++)$[oe[fe]]=X[oe[fe]]}},i.mergeArray=function($,X,oe,fe){var ue="function"==typeof fe;if(i.isArrayOrTypedArray($))for(var ge=Math.min($.length,X.length),we=0;we<ge;we++){var Te=$[we];X[we][oe]=ue?fe(Te):Te}},i.mergeArrayCastPositive=function($,X,oe){return i.mergeArray($,X,oe,function(fe){var ue=+fe;return isFinite(ue)&&ue>0?ue:0})},i.fillArray=function($,X,oe,fe){if(fe=fe||i.identity,i.isArrayOrTypedArray($))for(var ue=0;ue<X.length;ue++)X[ue][oe]=fe($[ue])},i.castOption=function($,X,oe,fe){fe=fe||i.identity;var ue=i.nestedProperty($,oe).get();return i.isArrayOrTypedArray(ue)?Array.isArray(X)&&i.isArrayOrTypedArray(ue[X[0]])?fe(ue[X[0]][X[1]]):fe(ue[X]):ue},i.extractOption=function($,X,oe,fe){if(oe in $)return $[oe];var ue=i.nestedProperty(X,fe).get();return Array.isArray(ue)?void 0:ue},i.tagSelected=function($,X,oe){var fe,ue,ge=X.selectedpoints,we=X._indexToPoints;we&&(fe=w(we));for(var Te=0;Te<ge.length;Te++){var xe=ge[Te];if(i.isIndex(xe)||i.isArrayOrTypedArray(xe)&&i.isIndex(xe[0])&&i.isIndex(xe[1])){var ye=fe?fe[xe]:xe,_e=oe?oe[ye]:ye;void 0!==(ue=_e)&&ue<$.length&&($[_e].selected=1)}}},i.selIndices2selPoints=function($){var X=$.selectedpoints,oe=$._indexToPoints;if(oe){for(var fe=w(oe),ue=[],ge=0;ge<X.length;ge++){var we=X[ge];if(i.isIndex(we)){var Te=fe[we];i.isIndex(Te)&&ue.push(Te)}}return ue}return X},i.getTargetArray=function($,X){var oe=X.target;if("string"==typeof oe&&oe){var fe=i.nestedProperty($,oe).get();return!!i.isArrayOrTypedArray(fe)&&fe}return!!i.isArrayOrTypedArray(oe)&&oe},i.minExtend=function $(X,oe,fe){var ue={};"object"!=typeof oe&&(oe={});var ge,we,Te,xe="pieLike"===fe?-1:3,ye=Object.keys(X);for(ge=0;ge<ye.length;ge++)Te=X[we=ye[ge]],"_"!==we.charAt(0)&&"function"!=typeof Te&&(ue[we]="module"===we?Te:Array.isArray(Te)?"colorscale"===we||-1===xe?Te.slice():Te.slice(0,xe):i.isTypedArray(Te)?-1===xe?Te.subarray():Te.subarray(0,xe):Te&&"object"==typeof Te?$(X[we],oe[we],fe):Te);for(ye=Object.keys(oe),ge=0;ge<ye.length;ge++)"object"==typeof(Te=oe[we=ye[ge]])&&we in ue&&"object"==typeof ue[we]||(ue[we]=Te);return ue},i.titleCase=function($){return $.charAt(0).toUpperCase()+$.substr(1)},i.containsAny=function($,X){for(var oe=0;oe<X.length;oe++)if(-1!==$.indexOf(X[oe]))return!0;return!1},i.isIE=function(){return void 0!==window.navigator.msSaveBlob};var E=/Version\/[\d\.]+.*Safari/;i.isSafari=function(){return E.test(window.navigator.userAgent)};var P=/iPad|iPhone|iPod/;i.isIOS=function(){return P.test(window.navigator.userAgent)};var L=/Firefox\/(\d+)\.\d+/;i.getFirefoxVersion=function(){var $=L.exec(window.navigator.userAgent);if($&&2===$.length){var X=parseInt($[1]);if(!isNaN(X))return X}return null},i.isD3Selection=function($){return $ instanceof S.selection},i.ensureSingle=function($,X,oe,fe){var ue=$.select(X+(oe?"."+oe:""));if(ue.size())return ue;var ge=$.append(X);return oe&&ge.classed(oe,!0),fe&&ge.call(fe),ge},i.ensureSingleById=function($,X,oe,fe){var ue=$.select(X+"#"+oe);if(ue.size())return ue;var ge=$.append(X).attr("id",oe);return fe&&ge.call(fe),ge},i.objectFromPath=function($,X){for(var oe,fe=$.split("."),ue=oe={},ge=0;ge<fe.length;ge++){var we=fe[ge],Te=null,xe=fe[ge].match(/(.*)\[([0-9]+)\]/);xe?(Te=xe[2],(oe=oe[we=xe[1]]=[])[Te]=ge===fe.length-1?X:{},oe=oe[Te]):(oe[we]=ge===fe.length-1?X:{},oe=oe[we])}return ue};var O=/^([^\[\.]+)\.(.+)?/,z=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function V($){return"__"===$.slice(0,2)}i.expandObjectPaths=function($){var X,oe,fe,ue,ge,we,Te;if("object"==typeof $&&!Array.isArray($))for(oe in $)if($.hasOwnProperty(oe))if(X=oe.match(O)){if(ue=$[oe],V(fe=X[1]))continue;delete $[oe],$[fe]=i.extendDeepNoArrays($[fe]||{},i.objectFromPath(oe,i.expandObjectPaths(ue))[fe])}else if(X=oe.match(z)){if(ue=$[oe],V(fe=X[1]))continue;if(ge=parseInt(X[2]),delete $[oe],$[fe]=$[fe]||[],"."===X[3])Te=X[4],we=$[fe][ge]=$[fe][ge]||{},i.extendDeepNoArrays(we,i.objectFromPath(Te,i.expandObjectPaths(ue)));else{if(V(fe))continue;$[fe][ge]=i.expandObjectPaths(ue)}}else{if(V(oe))continue;$[oe]=i.expandObjectPaths($[oe])}return $},i.numSeparate=function($,X,oe){if(oe||(oe=!1),"string"!=typeof X||0===X.length)throw new Error("Separator string required for formatting!");"number"==typeof $&&($=String($));var fe=/(\d+)(\d{3})/,ue=X.charAt(0),ge=X.charAt(1),we=$.split("."),Te=we[0],xe=we.length>1?ue+we[1]:"";if(ge&&(we.length>1||Te.length>4||oe))for(;fe.test(Te);)Te=Te.replace(fe,"$1"+ge+"$2");return Te+xe},i.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var R=/^\w*$/;i.templateString=function($,X){var oe={};return $.replace(i.TEMPLATE_STRING_REGEX,function(fe,ue){var ge;return R.test(ue)?ge=X[ue]:(oe[ue]=oe[ue]||i.nestedProperty(X,ue).get,ge=oe[ue]()),i.isValidTextValue(ge)?ge:""})};var U={max:10,count:0,name:"hovertemplate"};i.hovertemplateString=function(){return ae.apply(U,arguments)};var Z={max:10,count:0,name:"texttemplate"};i.texttemplateString=function(){return ae.apply(Z,arguments)};var N=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/,G={max:10,count:0,name:"texttemplate",parseMultDiv:!0};i.texttemplateStringForShapes=function(){return ae.apply(G,arguments)};var W=/^[:|\|]/;function ae($,X,oe){var fe=this,ue=arguments;X||(X={});var ge={};return $.replace(i.TEMPLATE_STRING_REGEX,function(we,Te,xe){var ye="_xother"===Te||"_yother"===Te,_e="_xother_"===Te||"_yother_"===Te,Ie="xother_"===Te||"yother_"===Te,De="xother"===Te||"yother"===Te||ye||Ie||_e,be=Te;(ye||_e)&&(be=be.substring(1)),(Ie||_e)&&(be=be.substring(0,be.length-1));var he,ce,me,ve,Me,Pe=null,Ae=null;if(fe.parseMultDiv){var Ce=(Me=(ve=be).match(N))?{key:Me[1],op:Me[2],number:Number(Me[3])}:{key:ve,op:null,number:null};be=Ce.key,Pe=Ce.op,Ae=Ce.number}if(De){if(void 0===(he=X[be]))return""}else for(me=3;me<ue.length;me++)if(ce=ue[me]){if(ce.hasOwnProperty(be)){he=ce[be];break}if(R.test(be)||(he=i.nestedProperty(ce,be).get(),(he=ge[be]||i.nestedProperty(ce,be).get())&&(ge[be]=he)),void 0!==he)break}if(void 0!==he&&("*"===Pe&&(he*=Ae),"/"===Pe&&(he/=Ae)),void 0===he&&fe)return fe.count<fe.max&&(i.warn("Variable '"+be+"' in "+fe.name+" could not be found!"),he=we),fe.count===fe.max&&i.warn("Too many "+fe.name+" warnings - additional warnings will be suppressed"),fe.count++,we;if(xe){var Oe;if(":"===xe[0]&&(Oe=oe?oe.numberFormat:i.numberFormat,""!==he&&(he=Oe(xe.replace(W,""))(he))),"|"===xe[0]){Oe=oe?oe.timeFormat:k;var Ne=i.dateTime2ms(he);he=i.formatDate(Ne,xe.replace(W,""),!1,Oe)}}else{var je=be+"Label";X.hasOwnProperty(je)&&(he=X[je])}return De&&(he="("+he+")",(ye||_e)&&(he=" "+he),(Ie||_e)&&(he+=" ")),he})}i.subplotSort=function($,X){for(var oe=Math.min($.length,X.length)+1,fe=0,ue=0,ge=0;ge<oe;ge++){var we=$.charCodeAt(ge)||0,Te=X.charCodeAt(ge)||0,xe=we>=48&&we<=57,ye=Te>=48&&Te<=57;if(xe&&(fe=10*fe+we-48),ye&&(ue=10*ue+Te-48),!xe||!ye){if(fe!==ue)return fe-ue;if(we!==Te)return we-Te}}return ue-fe};var re=2e9;i.seedPseudoRandom=function(){re=2e9},i.pseudoRandom=function(){var $=re;return re=(69069*re+1)%4294967296,Math.abs(re-$)<429496729?i.pseudoRandom():re/4294967296},i.fillText=function($,X,oe){var fe=Array.isArray(oe)?function(we){oe.push(we)}:function(we){oe.text=we},ue=i.extractOption($,X,"htx","hovertext");if(i.isValidTextValue(ue))return fe(ue);var ge=i.extractOption($,X,"tx","text");return i.isValidTextValue(ge)?fe(ge):void 0},i.isValidTextValue=function($){return $||0===$},i.formatPercent=function($,X){X=X||0;for(var oe=(Math.round(100*$*Math.pow(10,X))*Math.pow(.1,X)).toFixed(X)+"%",fe=0;fe<X;fe++)-1!==oe.indexOf(".")&&(oe=(oe=oe.replace("0%","%")).replace(".%","%"));return oe},i.isHidden=function($){var X=window.getComputedStyle($).display;return!X||"none"===X},i.strTranslate=function($,X){return $||X?"translate("+$+","+X+")":""},i.strRotate=function($){return $?"rotate("+$+")":""},i.strScale=function($){return 1!==$?"scale("+$+")":""},i.getTextTransform=function($){var X=$.noCenter,oe=$.textX,fe=$.textY,xe=$.rotate,ye=$.scale;return ye?ye>1&&(ye=1):ye=0,i.strTranslate($.targetX-ye*(oe+($.anchorX||0)),$.targetY-ye*(fe+($.anchorY||0)))+i.strScale(ye)+(xe?"rotate("+xe+(X?"":" "+oe+" "+fe)+")":"")},i.setTransormAndDisplay=function($,X){$.attr("transform",i.getTextTransform(X)),$.style("display",X.scale?null:"none")},i.ensureUniformFontSize=function($,X){var oe=i.extendFlat({},X);return oe.size=Math.max(X.size,$._fullLayout.uniformtext.minsize||0),oe},i.join2=function($,X,oe){var fe=$.length;return fe>1?$.slice(0,-1).join(X)+oe+$[fe-1]:$.join(X)},i.bigFont=function($){return Math.round(1.2*$)};var ne=i.getFirefoxVersion(),Q=null!==ne&&ne<86;i.getPositionFromD3Event=function(){return Q?[S.event.layerX,S.event.layerY]:[S.event.offsetX,S.event.offsetY]}},63620:function(ie){"use strict";ie.exports=function(F){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(F):"[object Object]"===Object.prototype.toString.call(F)&&Object.getPrototypeOf(F).hasOwnProperty("hasOwnProperty")}},37804:function(ie,F,e){"use strict";var S=e(22296),k=/^\w*$/;ie.exports=function(o,T,b,p){var l,t,i;b=b||"name",p=p||"value";var r={};T&&T.length?(i=S(o,T),t=i.get()):t=o,T=T||"";var n={};if(t)for(l=0;l<t.length;l++)n[t[l][b]]=l;var a=k.test(p),s={set:function(c,h){var u=null===h?4:0;if(!t){if(!i||4===u)return;i.set(t=[])}var y=n[c];if(void 0===y){if(4===u)return;u|=3,n[c]=y=t.length}else h!==(a?t[y][p]:S(t[y],p).get())&&(u|=2);var d=t[y]=t[y]||{};return d[b]=c,a?d[p]=h:S(d,p).set(h),null!==h&&(u&=-5),r[y]=r[y]|u,s},get:function(c){if(t){var h=n[c];return void 0===h?void 0:a?t[h][p]:S(t[h],p).get()}},rename:function(c,h){var u=n[c];return void 0===u||(r[u]=1|r[u],n[h]=u,delete n[c],t[u][b]=h),s},remove:function(c){var h=n[c];if(void 0===h)return s;var u=t[h];if(Object.keys(u).length>2)return r[h]=2|r[h],s.set(c,null);if(a){for(l=h;l<t.length;l++)r[l]=3|r[l];for(l=h;l<t.length;l++)n[t[l][b]]--;t.splice(h,1),delete n[c]}else S(u,p).set(null),r[h]=6|r[h];return s},constructUpdate:function(){for(var c,h,u={},y=Object.keys(r),d=0;d<y.length;d++)c=T+"["+(h=y[d])+"]",t[h]?(1&r[h]&&(u[c+"."+b]=t[h][b]),2&r[h]&&(u[c+"."+p]=a?4&r[h]?null:t[h][p]:4&r[h]?null:S(t[h],p).get())):u[c]=null;return u}};return s}},98356:function(ie,F,e){"use strict";var S=e(24040);ie.exports=function(k,o){for(var T=k._context.locale,b=0;b<2;b++){for(var p=k._context.locales,l=0;l<2;l++){var t=(p[T]||{}).dictionary;if(t){var i=t[o];if(i)return i}p=S.localeRegistry}var r=T.split("-")[0];if(r===T)break;T=r}return o}},24248:function(ie,F,e){"use strict";var S=e(20556).dfltConfig,k=e(41792),o=ie.exports={};o.log=function(){var T;if(S.logging>1){var b=["LOG:"];for(T=0;T<arguments.length;T++)b.push(arguments[T]);console.trace.apply(console,b)}if(S.notifyOnLogging>1){var p=[];for(T=0;T<arguments.length;T++)p.push(arguments[T]);k(p.join("<br>"),"long")}},o.warn=function(){var T;if(S.logging>0){var b=["WARN:"];for(T=0;T<arguments.length;T++)b.push(arguments[T]);console.trace.apply(console,b)}if(S.notifyOnLogging>0){var p=[];for(T=0;T<arguments.length;T++)p.push(arguments[T]);k(p.join("<br>"),"stick")}},o.error=function(){var T;if(S.logging>0){var b=["ERROR:"];for(T=0;T<arguments.length;T++)b.push(arguments[T]);console.error.apply(console,b)}if(S.notifyOnLogging>0){var p=[];for(T=0;T<arguments.length;T++)p.push(arguments[T]);k(p.join("<br>"),"stick")}}},30988:function(ie,F,e){"use strict";var S=e(33428);ie.exports=function(k,o,T){var b=k.selectAll("g."+T.replace(/\s/g,".")).data(o,function(l){return l[0].trace.uid});b.exit().remove(),b.enter().append("g").attr("class",T),b.order();var p=k.classed("rangeplot")?"nodeRangePlot3":"node3";return b.each(function(l){l[0][p]=S.select(this)}),b}},52248:function(ie,F,e){"use strict";var S=e(36524);F.init2dArray=function(k,o){for(var T=new Array(k),b=0;b<k;b++)T[b]=new Array(o);return T},F.transposeRagged=function(k){var o,T,b=0,p=k.length;for(o=0;o<p;o++)b=Math.max(b,k[o].length);var l=new Array(b);for(o=0;o<b;o++)for(l[o]=new Array(p),T=0;T<p;T++)l[o][T]=k[T][o];return l},F.dot=function(k,o){if(!k.length||!o.length||k.length!==o.length)return null;var T,b,p=k.length;if(k[0].length)for(T=new Array(p),b=0;b<p;b++)T[b]=F.dot(k[b],o);else if(o[0].length){var l=F.transposeRagged(o);for(T=new Array(l.length),b=0;b<l.length;b++)T[b]=F.dot(k,l[b])}else for(T=0,b=0;b<p;b++)T+=k[b]*o[b];return T},F.translationMatrix=function(k,o){return[[1,0,k],[0,1,o],[0,0,1]]},F.rotationMatrix=function(k){var o=k*Math.PI/180;return[[Math.cos(o),-Math.sin(o),0],[Math.sin(o),Math.cos(o),0],[0,0,1]]},F.rotationXYMatrix=function(k,o,T){return F.dot(F.dot(F.translationMatrix(o,T),F.rotationMatrix(k)),F.translationMatrix(-o,-T))},F.apply3DTransform=function(k){return function(){var o=arguments,T=1===arguments.length?o[0]:[o[0],o[1],o[2]||0];return F.dot(k,[T[0],T[1],T[2],1]).slice(0,3)}},F.apply2DTransform=function(k){return function(){var o=arguments;3===o.length&&(o=o[0]);var T=1===arguments.length?o[0]:[o[0],o[1]];return F.dot(k,[T[0],T[1],1]).slice(0,2)}},F.apply2DTransform2=function(k){var o=F.apply2DTransform(k);return function(T){return o(T.slice(0,2)).concat(o(T.slice(2,4)))}},F.convertCssMatrix=function(k){if(k){var o=k.length;if(16===o)return k;if(6===o)return[k[0],k[1],0,0,k[2],k[3],0,0,0,0,1,0,k[4],k[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},F.inverseTransformMatrix=function(k){var o=[];return S.invert(o,k),[[o[0],o[1],o[2],o[3]],[o[4],o[5],o[6],o[7]],[o[8],o[9],o[10],o[11]],[o[12],o[13],o[14],o[15]]]}},20435:function(ie){"use strict";ie.exports={mod:function(F,e){var S=F%e;return S<0?S+e:S},modHalf:function(F,e){return Math.abs(F)>e/2?F-Math.round(F/e)*e:F}}},22296:function(ie,F,e){"use strict";var S=e(38248),k=e(38116).isArrayOrTypedArray;function o(r,n){return function(){var a,s,c,h,u,y=r;for(h=0;h<n.length-1;h++){if(-1===(a=n[h])){for(s=!0,c=[],u=0;u<y.length;u++)c[u]=o(y[u],n.slice(h+1))(),c[u]!==c[0]&&(s=!1);return s?c[0]:c}if("number"==typeof a&&!k(y)||"object"!=typeof(y=y[a])||null===y)return}if("object"==typeof y&&null!==y&&null!==(c=y[n[h]]))return c}}ie.exports=function(r,n){if(S(n))n=String(n);else if("string"!=typeof n||"[-1]"===n.substr(n.length-4))throw"bad property string";var a,s,c,h,u=n.split(".");for(h=0;h<u.length;h++)if("__"===String(u[h]).slice(0,2))throw"bad property string";for(h=0;h<u.length;){if(a=String(u[h]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(a[1])u[h]=a[1];else{if(0!==h)throw"bad property string";u.splice(0,1)}for(s=a[2].substr(1,a[2].length-2).split("]["),c=0;c<s.length;c++)h++,u.splice(h,0,Number(s[c]))}h++}return"object"!=typeof r?{set:function(){throw"bad container"},get:function(){},astr:n,parts:u,obj:r}:{set:p(r,u,n),get:o(r,u),astr:n,parts:u,obj:r}};var T=/(^|\.)args\[/;function b(r,n){return void 0===r||null===r&&!n.match(T)}function p(r,n,a){return function(s){var c,h,u=r,y="",d=[[r,y]],m=b(s,a);for(h=0;h<n.length-1;h++){if("number"==typeof(c=n[h])&&!k(u))throw"array index but container is not an array";if(-1===c){if(m=!t(u,n.slice(h+1),s,a))break;return}if(!i(u,c,n[h+1],m))break;if("object"!=typeof(u=u[c])||null===u)throw"container is not an object";y=l(y,c),d.push([u,y])}if(m){if(h===n.length-1&&(delete u[n[h]],Array.isArray(u)&&+n[h]==u.length-1))for(;u.length&&void 0===u[u.length-1];)u.pop()}else u[n[h]]=s}}function l(r,n){var a=n;return S(n)?a="["+n+"]":r&&(a="."+n),r+a}function t(r,n,a,s){var c,h=k(a),u=!0,y=a,d=s.replace("-1",0),m=!h&&b(a,d),g=n[0];for(c=0;c<r.length;c++)d=s.replace("-1",c),h&&(m=b(y=a[c%a.length],d)),m&&(u=!1),i(r,c,g,m)&&p(r[c],n,s.replace("-1",c))(y);return u}function i(r,n,a,s){if(void 0===r[n]){if(s)return!1;r[n]="number"==typeof a?[]:{}}return!0}},16628:function(ie){"use strict";ie.exports=function(){}},41792:function(ie,F,e){"use strict";var S=e(33428),k=e(38248),o=[];ie.exports=function(T,b){if(-1===o.indexOf(T)){o.push(T);var p=1e3;k(b)?p=b:"long"===b&&(p=3e3);var l=S.select("body").selectAll(".plotly-notifier").data([0]);l.enter().append("div").classed("plotly-notifier",!0),l.selectAll(".notifier-note").data(o).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(i){var r=S.select(this);r.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){r.transition().call(t)});for(var n=r.append("p"),a=i.split(/<br\s*\/?>/g),s=0;s<a.length;s++)s&&n.append("br"),n.append("span").text(a[s]);"stick"===b?r.transition().duration(350).style("opacity",1):r.transition().duration(700).style("opacity",1).transition().delay(p).call(t)})}function t(i){i.duration(700).style("opacity",0).each("end",function(r){var n=o.indexOf(r);-1!==n&&o.splice(n,1),S.select(this).remove()})}}},72213:function(ie,F,e){"use strict";var S=e(93972),k="data-savedcursor";ie.exports=function(o,T){var b=o.attr(k);if(T){if(!b){for(var p=(o.attr("class")||"").split(" "),l=0;l<p.length;l++){var t=p[l];0===t.indexOf("cursor-")&&o.attr(k,t.substr(7)).classed(t,!1)}o.attr(k)||o.attr(k,"!!")}S(o,T)}else b&&(o.attr(k,null),"!!"===b?S(o):S(o,b))}},92065:function(ie,F,e){"use strict";var S=e(52248).dot,k=e(39032).BADNUM,o=ie.exports={};o.tester=function(T){var b,p=T.slice(),l=p[0][0],t=l,i=p[0][1],r=i;for(p[p.length-1][0]===p[0][0]&&p[p.length-1][1]===p[0][1]||p.push(p[0]),b=1;b<p.length;b++)l=Math.min(l,p[b][0]),t=Math.max(t,p[b][0]),i=Math.min(i,p[b][1]),r=Math.max(r,p[b][1]);var n,a=!1;5===p.length&&(p[0][0]===p[1][0]?p[2][0]===p[3][0]&&p[0][1]===p[3][1]&&p[1][1]===p[2][1]&&(a=!0,n=function(h){return h[0]===p[0][0]}):p[0][1]===p[1][1]&&p[2][1]===p[3][1]&&p[0][0]===p[3][0]&&p[1][0]===p[2][0]&&(a=!0,n=function(h){return h[1]===p[0][1]}));var s=!0,c=p[0];for(b=1;b<p.length;b++)if(c[0]!==p[b][0]||c[1]!==p[b][1]){s=!1;break}return{xmin:l,xmax:t,ymin:i,ymax:r,pts:p,contains:a?function(h,u){var y=h[0],d=h[1];return!(y===k||y<l||y>t||d===k||d<i||d>r||u&&n(h))}:function(h,u){var y=h[0],d=h[1];if(y===k||y<l||y>t||d===k||d<i||d>r)return!1;var m,g,x,v,_,f=p.length,C=p[0][0],w=p[0][1],E=0;for(m=1;m<f;m++)if(g=C,x=w,C=p[m][0],w=p[m][1],!(y<(v=Math.min(g,C))||y>Math.max(g,C)||d>Math.max(x,w)))if(d<Math.min(x,w))y!==v&&E++;else{if(d===(_=C===g?d:x+(y-g)*(w-x)/(C-g)))return 1!==m||!u;d<=_&&y!==v&&E++}return E%2==1},isRect:a,degenerate:s}},o.isSegmentBent=function(T,b,p,l){var t,i,r,n=T[b],a=[T[p][0]-n[0],T[p][1]-n[1]],s=S(a,a),c=Math.sqrt(s),h=[-a[1]/c,a[0]/c];for(t=b+1;t<p;t++)if((r=S(i=[T[t][0]-n[0],T[t][1]-n[1]],a))<0||r>s||Math.abs(S(i,h))>l)return!0;return!1},o.filter=function(T,b){var p=[T[0]],l=0,t=0;function i(r){T.push(r);var n=p.length,a=l;p.splice(t+1);for(var s=a+1;s<T.length;s++)(s===T.length-1||o.isSegmentBent(T,a,s+1,b))&&(p.push(T[s]),p.length<n-2&&(l=s,t=p.length-1),a=s)}return T.length>1&&i(T.pop()),{addPt:i,raw:T,filtered:p}}},5048:function(ie,F,e){"use strict";var S=e(16576),k=e(28624);ie.exports=function(o,T,b){var p=o._fullLayout,l=!0;return p._glcanvas.each(function(t){if(t.regl)t.regl.preloadCachedCode(b);else if(!t.pick||p._has("parcoords")){try{t.regl=k({canvas:this,attributes:{antialias:!t.pick,preserveDrawingBuffer:!0},pixelRatio:o._context.plotGlPixelRatio||e.g.devicePixelRatio,extensions:T||[],cachedCode:b||{}})}catch{l=!1}t.regl||(l=!1),l&&this.addEventListener("webglcontextlost",function(i){o&&o.emit&&o.emit("plotly_webglcontextlost",{event:i,layer:t.key})},!1)}}),l||S({container:p._glcontainer.node()}),l}},34296:function(ie,F,e){"use strict";var S=e(38248),k=e(25928);ie.exports=function(o){var T,n;if("string"!=typeof(T=o&&o.hasOwnProperty("userAgent")?o.userAgent:(typeof navigator<"u"&&(n=navigator.userAgent),n&&n.headers&&"string"==typeof n.headers["user-agent"]&&(n=n.headers["user-agent"]),n)))return!0;var b=k({ua:{headers:{"user-agent":T}},tablet:!0,featureDetect:!1});if(!b)for(var p=T.split(" "),l=1;l<p.length;l++)if(-1!==p[l].indexOf("Safari"))for(var t=l-1;t>-1;t--){var i=p[t];if("Version/"===i.substr(0,8)){var r=i.substr(8).split(".")[0];if(S(r)&&(r=+r),r>=13)return!0}}return b}},52416:function(ie){"use strict";ie.exports=function(F,e){if(e instanceof RegExp){for(var S=e.toString(),k=0;k<F.length;k++)if(F[k]instanceof RegExp&&F[k].toString()===S)return F;F.push(e)}else!e&&0!==e||-1!==F.indexOf(e)||F.push(e);return F}},94552:function(ie,F,e){"use strict";var S=e(3400),k=e(20556).dfltConfig,o={add:function(T,b,p,l,t){var i,r;T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},r=T.undoQueue.index,T.autoplay?T.undoQueue.inSequence||(T.autoplay=!1):(!T.undoQueue.sequence||T.undoQueue.beginSequence?(T.undoQueue.queue.splice(r,T.undoQueue.queue.length-r,i={undo:{calls:[],args:[]},redo:{calls:[],args:[]}}),T.undoQueue.index+=1):i=T.undoQueue.queue[r-1],T.undoQueue.beginSequence=!1,i&&(i.undo.calls.unshift(b),i.undo.args.unshift(p),i.redo.calls.push(l),i.redo.args.push(t)),T.undoQueue.queue.length>k.queueLength&&(T.undoQueue.queue.shift(),T.undoQueue.index--))},startSequence:function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!0,T.undoQueue.beginSequence=!0},stopSequence:function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!1,T.undoQueue.beginSequence=!1},undo:function(T){var b,p;if(!(void 0===T.undoQueue||isNaN(T.undoQueue.index)||T.undoQueue.index<=0)){for(T.undoQueue.index--,b=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,p=0;p<b.undo.calls.length;p++)o.plotDo(T,b.undo.calls[p],b.undo.args[p]);T.undoQueue.inSequence=!1,T.autoplay=!1}},redo:function(T){var b,p;if(!(void 0===T.undoQueue||isNaN(T.undoQueue.index)||T.undoQueue.index>=T.undoQueue.queue.length)){for(b=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,p=0;p<b.redo.calls.length;p++)o.plotDo(T,b.redo.calls[p],b.redo.args[p]);T.undoQueue.inSequence=!1,T.autoplay=!1,T.undoQueue.index++}},plotDo:function(T,b,p){T.autoplay=!0,p=function(l,t){for(var i,r=[],n=0;n<t.length;n++)r[n]=(i=t[n])===l?i:"object"==typeof i?Array.isArray(i)?S.extendDeep([],i):S.extendDeepAll({},i):i;return r}(T,p),b.apply(null,p)}};ie.exports=o},53756:function(ie,F){"use strict";F.counter=function(e,S,k,o){var T=(S||"")+(k?"":"$"),b=!1===o?"":"^";return"xy"===e?new RegExp(b+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+T):new RegExp(b+e+"([2-9]|[1-9][0-9]+)?"+T)}},23193:function(ie){"use strict";var F=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,e=/^[^\.\[\]]+$/;ie.exports=function(S,k){for(;k;){var o=S.match(F);if(o)S=o[1];else{if(!S.match(e))throw new Error("bad relativeAttr call:"+[S,k]);S=""}if("^"!==k.charAt(0))break;k=k.slice(1)}return S&&"["!==k.charAt(0)?S+"."+k:S+k}},51528:function(ie,F,e){"use strict";var S=e(38116).isArrayOrTypedArray,k=e(63620);ie.exports=function o(T,b){for(var p in b){var l=b[p],t=T[p];if(t!==l)if("_"===p.charAt(0)||"function"==typeof l){if(p in T)continue;T[p]=l}else if(S(l)&&S(t)&&k(l[0])){if("customdata"===p||"ids"===p)continue;for(var i=Math.min(l.length,t.length),r=0;r<i;r++)t[r]!==l[r]&&k(l[r])&&k(t[r])&&o(t[r],l[r])}else k(l)&&k(t)&&(o(t,l),Object.keys(t).length||delete T[p])}}},14952:function(ie,F,e){"use strict";var S=e(38248),k=e(24248),o=e(35536),T=e(39032).BADNUM,b=1e-9;function p(r,n){return r<n}function l(r,n){return r<=n}function t(r,n){return r>n}function i(r,n){return r>=n}F.findBin=function(r,n,a){if(S(n.start))return a?Math.ceil((r-n.start)/n.size-b)-1:Math.floor((r-n.start)/n.size+b);var s,c,h=0,u=n.length,y=0,d=u>1?(n[u-1]-n[0])/(u-1):1;for(c=d>=0?a?p:l:a?i:t,r+=d*b*(a?-1:1)*(d>=0?1:-1);h<u&&y++<100;)c(n[s=Math.floor((h+u)/2)],r)?h=s+1:u=s;return y>90&&k.log("Long binary search..."),h-1},F.sorterAsc=function(r,n){return r-n},F.sorterDes=function(r,n){return n-r},F.distinctVals=function(r){var n,a=r.slice();for(a.sort(F.sorterAsc),n=a.length-1;n>-1&&a[n]===T;n--);for(var s,c=a[n]-a[0]||1,h=c/(n||1)/1e4,u=[],y=0;y<=n;y++){var d=a[y],m=d-s;void 0===s?(u.push(d),s=d):m>h&&(c=Math.min(c,m),u.push(d),s=d)}return{vals:u,minDiff:c}},F.roundUp=function(r,n,a){for(var s,c=0,h=n.length-1,u=0,y=a?0:1,d=a?1:0,m=a?Math.ceil:Math.floor;c<h&&u++<100;)n[s=m((c+h)/2)]<=r?c=s+y:h=s-d;return n[c]},F.sort=function(r,n){for(var a=0,s=0,c=1;c<r.length;c++){var h=n(r[c],r[c-1]);if(h<0?a=1:h>0&&(s=1),a&&s)return r.sort(n)}return s?r:r.reverse()},F.findIndexOfMin=function(r,n){n=n||o;for(var a,s=1/0,c=0;c<r.length;c++){var h=n(r[c]);h<s&&(s=h,a=c)}return a}},93972:function(ie){"use strict";ie.exports=function(F,e){(F.attr("class")||"").split(" ").forEach(function(S){0===S.indexOf("cursor-")&&F.classed(S,!1)}),e&&F.classed("cursor-"+e,!0)}},16576:function(ie,F,e){"use strict";var S=e(76308),k=function(){};ie.exports=function(o){for(var T in o)"function"==typeof o[T]&&(o[T]=k);o.destroy=function(){o.container.parentNode.removeChild(o.container)};var b=document.createElement("div");b.className="no-webgl",b.style.cursor="pointer",b.style.fontSize="24px",b.style.color=S.defaults[0],b.style.position="absolute",b.style.left=b.style.top="0px",b.style.width=b.style.height="100%",b.style["background-color"]=S.lightLine,b.style["z-index"]=30;var p=document.createElement("p");return p.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",p.style.position="relative",p.style.top="50%",p.style.left="50%",p.style.height="30%",p.style.width="50%",p.style.margin="-15% 0 0 -25%",b.appendChild(p),o.container.appendChild(b),o.container.style.background="#FFFFFF",o.container.onclick=function(){window.open("https://get.webgl.org")},!1}},95376:function(ie){"use strict";ie.exports=function(F){return Object.keys(F).sort()}},63084:function(ie,F,e){"use strict";var S=e(38248),k=e(38116).isArrayOrTypedArray;F.aggNums=function(o,T,b,p){var l,t;if((!p||p>b.length)&&(p=b.length),S(T)||(T=!1),k(b[0])){for(t=new Array(p),l=0;l<p;l++)t[l]=F.aggNums(o,T,b[l]);b=t}for(l=0;l<p;l++)S(T)?S(b[l])&&(T=o(+T,+b[l])):T=b[l];return T},F.len=function(o){return F.aggNums(function(T){return T+1},0,o)},F.mean=function(o,T){return T||(T=F.len(o)),F.aggNums(function(b,p){return b+p},0,o)/T},F.midRange=function(o){if(void 0!==o&&0!==o.length)return(F.aggNums(Math.max,null,o)+F.aggNums(Math.min,null,o))/2},F.variance=function(o,T,b){return T||(T=F.len(o)),S(b)||(b=F.mean(o,T)),F.aggNums(function(p,l){return p+Math.pow(l-b,2)},0,o)/T},F.stdev=function(o,T,b){return Math.sqrt(F.variance(o,T,b))},F.median=function(o){var T=o.slice().sort();return F.interp(T,.5)},F.interp=function(o,T){if(!S(T))throw"n should be a finite number";if((T=T*o.length-.5)<0)return o[0];if(T>o.length-1)return o[o.length-1];var b=T%1;return b*o[Math.ceil(T)]+(1-b)*o[Math.floor(T)]}},43080:function(ie,F,e){"use strict";var S=e(72160);ie.exports=function(k){return k?S(k):[0,0,0,1]}},9188:function(ie,F,e){"use strict";var S=e(2264),k=e(43616),o=e(3400),T=null;ie.exports=function(){if(null!==T)return T;T=!1;var b=o.isIE()||o.isSafari()||o.isIOS();if(window.navigator.userAgent&&!b){var p=Array.from(S.CSS_DECLARATIONS).reverse(),l=window.CSS&&window.CSS.supports||window.supportsCSS;if("function"==typeof l)T=p.some(function(r){return l.apply(null,r)});else{var t=k.tester.append("image").attr("style",S.STYLE),i=window.getComputedStyle(t.node()).imageRendering;T=p.some(function(r){var n=r[1];return i===n||i===n.toLowerCase()}),t.remove()}}return T}},72736:function(ie,F,e){"use strict";var S=e(33428),k=e(3400),o=k.strTranslate,T=e(9616),b=e(84284).LINE_SPACING,p=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;F.convertToTspans=function(z,V,R){var U=z.text(),Z=!z.attr("data-notex")&&V&&V._context.typesetMath&&typeof MathJax<"u"&&U.match(p),N=S.select(z.node().parentNode);if(!N.empty()){var G=z.attr("class")?z.attr("class").split(" ")[0]:"text";return N.selectAll("svg."+(G+="-math")).remove(),N.selectAll("g."+G+"-group").remove(),z.style("display",null).attr({"data-unformatted":U,"data-math":"N"}),Z?(V&&V._promises||[]).push(new Promise(function(ae){z.style("display","none");var re=parseInt(z.node().style.fontSize,10);!function(Q,$,X){var oe,fe,ue,ge,we=parseInt((MathJax.version||"").split(".")[0]);if(2===we||3===we){var Te=function(){var ye="math-output-"+k.randstr({},64),_e=(ge=S.select("body").append("div").attr({id:ye}).style({visibility:"hidden",position:"absolute","font-size":$.fontSize+"px"}).text(Q.replace(l,"\\lt ").replace(t,"\\gt "))).node();return 2===we?MathJax.Hub.Typeset(_e):MathJax.typeset([_e])},xe=function(){var ye=ge.select(2===we?".MathJax_SVG":".MathJax"),_e=!ye.empty()&&ge.select("svg").node();if(_e){var Ie,De=_e.getBoundingClientRect();Ie=2===we?S.select("body").select("#MathJax_SVG_glyphs"):ye.select("defs"),X(ye,Ie,De)}else k.log("There was an error in the tex syntax.",Q),X();ge.remove()};2===we?MathJax.Hub.Queue(function(){return fe=k.extendDeepAll({},MathJax.Hub.config),ue=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:i},displayAlign:"left"})},function(){if("SVG"!==(oe=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},Te,xe,function(){if("SVG"!==oe)return MathJax.Hub.setRenderer(oe)},function(){return void 0!==ue&&(MathJax.Hub.processSectionDelay=ue),MathJax.Hub.Config(fe)}):3===we&&(fe=k.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=i,"svg"!==(oe=MathJax.config.startup.output)&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){Te(),xe(),"svg"!==oe&&(MathJax.config.startup.output=oe),MathJax.config=fe}))}else k.warn("No MathJax version:",MathJax.version)}(Z[2],{fontSize:re},function(Q,$,X){N.selectAll("svg."+G).remove(),N.selectAll("g."+G+"-group").remove();var oe=Q&&Q.select("svg");if(!oe||!oe.node())return W(),void ae();var fe=N.append("g").classed(G+"-group",!0).attr({"pointer-events":"none","data-unformatted":U,"data-math":"Y"});fe.node().appendChild(oe.node()),$&&$.node()&&oe.node().insertBefore($.node().cloneNode(!0),oe.node().firstChild);var ue=X.width,ge=X.height;oe.attr({class:G,height:ge,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var we=z.node().style.fill||"black",Te=oe.select("g");Te.attr({fill:we,stroke:we});var xe=Te.node().getBoundingClientRect(),ye=xe.width,_e=xe.height;(ye>ue||_e>ge)&&(oe.style("overflow","hidden"),ye=(xe=oe.node().getBoundingClientRect()).width,_e=xe.height);var Ie=+z.attr("x"),De=+z.attr("y"),be=-(re||z.node().getBoundingClientRect().height)/4;if("y"===G[0])fe.attr({transform:"rotate("+[-90,Ie,De]+")"+o(-ye/2,be-_e/2)});else if("l"===G[0])De=be-_e/2;else if("a"===G[0]&&0!==G.indexOf("atitle"))Ie=0,De=be;else{var he=z.attr("text-anchor");Ie-=ye*("middle"===he?.5:"end"===he?1:0),De=De+be-_e/2}oe.attr({x:Ie,y:De}),R&&R.call(z,fe),ae(fe)})})):W(),z}function W(){N.empty()||(G=z.attr("class")+"-math",N.select("svg."+G).remove()),z.text("").style("white-space","pre"),function(re,ne){ne=ne.replace(h," ");var Q,$=!1,X=[],oe=-1;function fe(){oe++;var Ae=document.createElementNS(T.svg,"tspan");S.select(Ae).attr({class:"line",dy:oe*b+"em"}),re.appendChild(Ae),Q=Ae;var Ce=X;if(X=[{node:Ae}],Ce.length>1)for(var Oe=1;Oe<Ce.length;Oe++)ue(Ce[Oe])}function ue(Ae){var Ce,Oe=Ae.type,Ne={};if("a"===Oe){Ce="a";var je=Ae.target,ve=Ae.href,Me=Ae.popup;ve&&(Ne={"xlink:xlink:show":"_blank"===je||"_"!==je.charAt(0)?"new":"replace",target:je,"xlink:xlink:href":ve},Me&&(Ne.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Me+'");return false;'))}else Ce="tspan";Ae.style&&(Ne.style=Ae.style);var Le=document.createElementNS(T.svg,Ce);if("sup"===Oe||"sub"===Oe){ge(Q,s),Q.appendChild(Le);var Ue=document.createElementNS(T.svg,"tspan");ge(Ue,s),S.select(Ue).attr("dy",a[Oe]),Ne.dy=n[Oe],Q.appendChild(Le),Q.appendChild(Ue)}else Q.appendChild(Le);S.select(Le).attr(Ne),Q=Ae.node=Le,X.push(Ae)}function ge(Ae,Ce){Ae.appendChild(document.createTextNode(Ce))}function we(Ae){if(1!==X.length){var Ce=X.pop();Ae!==Ce.type&&k.log("Start tag <"+Ce.type+"> doesnt match end tag <"+Ae+">. Pretending it did match.",ne),Q=X[X.length-1].node}else k.log("Ignoring unexpected end tag </"+Ae+">.",ne)}d.test(ne)?fe():(Q=re,X=[{node:re}]);for(var Te=ne.split(u),xe=0;xe<Te.length;xe++){var ye=Te[xe],_e=ye.match(y),Ie=_e&&_e[2].toLowerCase(),De=r[Ie];if("br"===Ie)fe();else if(void 0===De)ge(Q,E(ye));else if(_e[1])we(Ie);else{var be=_e[4],he={type:Ie},ce=_(be,m);if(ce?(ce=ce.replace(f,"$1 fill:"),De&&(ce+=";"+De)):De&&(ce=De),ce&&(he.style=ce),"a"===Ie){$=!0;var me=_(be,g);if(me){var Pe=P(me);Pe&&(he.href=Pe,he.target=_(be,x)||"_blank",he.popup=_(be,v))}}ue(he)}}return $}(z.node(),U)&&z.style("pointer-events","all"),F.positionText(z),R&&R.call(z)}};var l=/(<|&lt;|&#60;)/g,t=/(>|&gt;|&#62;)/g,i=[["$","$"],["\\(","\\)"]],r={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},n={sub:"0.3em",sup:"-0.6em"},a={sub:"-0.21em",sup:"0.42em"},s="\u200b",c=["http:","https:","mailto:","",void 0,":"],h=F.NEWLINES=/(\r\n?|\n)/g,u=/(<[^<>]*>)/,y=/<(\/?)([^ >]*)(\s+(.*))?>/i,d=/<br(\s+.*)?>/i;F.BR_TAG_ALL=/<br(\s+.*)?>/gi;var m=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,g=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,x=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,v=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function _(z,V){if(!z)return null;var R=z.match(V),U=R&&(R[3]||R[4]);return U&&E(U)}var f=/(^|;)\s*color:/;F.plainText=function(z,V){for(var R=void 0!==(V=V||{}).len&&-1!==V.len?V.len:1/0,U=void 0!==V.allowedTags?V.allowedTags:["br"],Z=z.split(u),N=[],G="",W=0,ae=0;ae<Z.length;ae++){var re=Z[ae],ne=re.match(y),Q=ne&&ne[2].toLowerCase();if(Q)-1!==U.indexOf(Q)&&(N.push(re),G=Q);else{var $=re.length;if(W+$<R)N.push(re),W+=$;else if(W<R){var X=R-W;G&&("br"!==G||X<=3||$<=3)&&N.pop(),N.push(R>3?re.substr(0,X-3)+"...":re.substr(0,X));break}G=""}}return N.join("")};var C={mu:"\u03bc",amp:"&",lt:"<",gt:">",nbsp:"\xa0",times:"\xd7",plusmn:"\xb1",deg:"\xb0"},w=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function E(z){return z.replace(w,function(V,R){return("#"===R.charAt(0)?function(U){if(!(U>1114111)){var Z=String.fromCodePoint;if(Z)return Z(U);var N=String.fromCharCode;return U<=65535?N(U):N(55232+(U>>10),U%1024+56320)}}("x"===R.charAt(1)?parseInt(R.substr(2),16):parseInt(R.substr(1),10)):C[R])||V})}function P(z){var V=encodeURI(decodeURI(z)),R=document.createElement("a"),U=document.createElement("a");R.href=z,U.href=V;var N=U.protocol;return-1!==c.indexOf(R.protocol)&&-1!==c.indexOf(N)?V:""}function L(z,V,R){var U,Z,N,G=R.horizontalAlign,W=R.verticalAlign||"top",ae=z.node().getBoundingClientRect(),re=V.node().getBoundingClientRect();return Z="bottom"===W?function(){return ae.bottom-U.height}:"middle"===W?function(){return ae.top+(ae.height-U.height)/2}:function(){return ae.top},N="right"===G?function(){return ae.right-U.width}:"center"===G?function(){return ae.left+(ae.width-U.width)/2}:function(){return ae.left},function(){U=this.node().getBoundingClientRect();var ne=N()-re.left,Q=Z()-re.top,$=R.gd||{};if(R.gd){$._fullLayout._calcInverseTransform($);var X=k.apply3DTransform($._fullLayout._invTransform)(ne,Q);ne=X[0],Q=X[1]}return this.style({top:Q+"px",left:ne+"px","z-index":1e3}),this}}F.convertEntities=E,F.sanitizeHTML=function(z){z=z.replace(h," ");for(var V=document.createElement("p"),R=V,U=[],Z=z.split(u),N=0;N<Z.length;N++){var G=Z[N],W=G.match(y),ae=W&&W[2].toLowerCase();if(ae in r)if(W[1])U.length&&(R=U.pop());else{var re=W[4],ne=_(re,m),Q=ne?{style:ne}:{};if("a"===ae){var $=_(re,g);if($){var X=P($);if(X){Q.href=X;var oe=_(re,x);oe&&(Q.target=oe)}}}var fe=document.createElement(ae);R.appendChild(fe),S.select(fe).attr(Q),R=fe,U.push(fe)}else R.appendChild(document.createTextNode(E(G)))}return V.innerHTML},F.lineCount=function(z){return z.selectAll("tspan.line").size()||1},F.positionText=function(z,V,R){return z.each(function(){var U=S.select(this);function Z(W,ae){return void 0===ae?null===(ae=U.attr(W))&&(U.attr(W,0),ae=0):U.attr(W,ae),ae}var N=Z("x",V),G=Z("y",R);"text"===this.nodeName&&U.selectAll("tspan.line").attr({x:N,y:G})})};var O="1px ";F.makeTextShadow=function(z){return O+O+O+z+", -"+O+"-"+O+O+z+", "+O+"-"+O+O+z+", -"+O+O+O+z},F.makeEditable=function(z,V){var R=V.gd,U=V.delegate,Z=S.dispatch("edit","input","cancel"),N=U||z;if(z.style({"pointer-events":U?"none":"all"}),1!==z.size())throw new Error("boo");function G(){var ae,re,ne,Q,$;ae=S.select(R).select(".svg-container"),re=ae.append("div"),ne=z.node().style,Q=parseFloat(ne.fontSize||12),void 0===($=V.text)&&($=z.attr("data-unformatted")),re.classed("plugin-editable editable",!0).style({position:"absolute","font-family":ne.fontFamily||"Arial","font-size":Q,color:V.fill||ne.fill||"black",opacity:1,"background-color":V.background||"transparent",outline:"#ffffff33 1px solid",margin:[-Q/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text($).call(L(z,ae,V)).on("blur",function(){R._editing=!1,z.text(this.textContent).style({opacity:1});var fe,ue=S.select(this).attr("class");(fe=ue?"."+ue.split(" ")[0]+"-math-group":"[class*=-math-group]")&&S.select(z.node().parentNode).select(fe).style({opacity:0});var ge=this.textContent;S.select(this).transition().duration(0).remove(),S.select(document).on("mouseup",null),Z.edit.call(z,ge)}).on("focus",function(){var fe=this;R._editing=!0,S.select(document).on("mouseup",function(){if(S.event.target===fe)return!1;document.activeElement===re.node()&&re.node().blur()})}).on("keyup",function(){27===S.event.which?(R._editing=!1,z.style({opacity:1}),S.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),Z.cancel.call(z,this.textContent)):(Z.input.call(z,this.textContent),S.select(this).call(L(z,ae,V)))}).on("keydown",function(){13===S.event.which&&this.blur()}).call(W),z.style({opacity:0});var X,oe=N.attr("class");(X=oe?"."+oe.split(" ")[0]+"-math-group":"[class*=-math-group]")&&S.select(z.node().parentNode).select(X).style({opacity:0})}function W(ae){var re=ae.node(),ne=document.createRange();ne.selectNodeContents(re);var Q=window.getSelection();Q.removeAllRanges(),Q.addRange(ne),re.focus()}return V.immediate?G():N.on("click",G),S.rebind(z,Z,"on")}},91200:function(ie,F){"use strict";var e={};function S(k){k&&null!==k.timer&&(clearTimeout(k.timer),k.timer=null)}F.throttle=function(k,o,T){var b=e[k],p=Date.now();if(!b){for(var l in e)e[l].ts<p-6e4&&delete e[l];b=e[k]={ts:0,timer:null}}function t(){T(),b.ts=Date.now(),b.onDone&&(b.onDone(),b.onDone=null)}S(b),p>b.ts+o?t():b.timer=setTimeout(function(){t(),b.timer=null},o)},F.done=function(k){var o=e[k];return o&&o.timer?new Promise(function(T){var b=o.onDone;o.onDone=function(){b&&b(),T(),o.onDone=null}}):Promise.resolve()},F.clear=function(k){if(k)S(e[k]),delete e[k];else for(var o in e)F.clear(o)}},36896:function(ie,F,e){"use strict";var S=e(38248);ie.exports=function(k,o){if(k>0)return Math.log(k)/Math.LN10;var T=Math.log(Math.min(o[0],o[1]))/Math.LN10;return S(T)||(T=Math.log(Math.max(o[0],o[1]))/Math.LN10-6),T}},59972:function(ie,F,e){"use strict";var S=ie.exports={},k=e(79552).locationmodeToLayer,o=e(55712).NO;S.getTopojsonName=function(T){return[T.scope.replace(/ /g,"-"),"_",T.resolution.toString(),"m"].join("")},S.getTopojsonPath=function(T,b){return T+b+".json"},S.getTopojsonFeatures=function(T,b){return o(b,b.objects[k[T.locationmode]]).features}},11680:function(ie){"use strict";ie.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},6580:function(ie){"use strict";ie.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},69820:function(ie,F,e){"use strict";var S=e(24040);ie.exports=function(k){for(var o,T,b=S.layoutArrayContainers,p=S.layoutArrayRegexes,l=k.split("[")[0],t=0;t<p.length;t++)if((T=k.match(p[t]))&&0===T.index){o=T[0];break}if(o||(o=b[b.indexOf(l)]),!o)return!1;var i=k.substr(o.length);return i?!!(T=i.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:o,index:Number(T[1]),property:T[3]||""}:{array:o,index:"",property:""}}},67824:function(ie,F,e){"use strict";var S=e(92880).extendFlat,k=e(63620),o={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},T={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},b=o.flags.slice().concat(["fullReplot"]),p=T.flags.slice().concat("layoutReplot");function l(r){for(var n={},a=0;a<r.length;a++)n[r[a]]=!1;return n}function t(r,n,a){var s=S({},r);for(var c in s){var h=s[c];k(h)&&(s[c]=i(h,n,0,c))}return"from-root"===a&&(s.editType=n),s}function i(r,n,a,s){if(r.valType){var c=S({},r);if(c.editType=n,Array.isArray(r.items)){c.items=new Array(r.items.length);for(var h=0;h<r.items.length;h++)c.items[h]=i(r.items[h],n)}return c}return t(r,n,"_"===s.charAt(0)?"nested":"from-root")}ie.exports={traces:o,layout:T,traceFlags:function(){return l(b)},layoutFlags:function(){return l(p)},update:function(r,n){var a=n.editType;if(a&&"none"!==a)for(var s=a.split("+"),c=0;c<s.length;c++)r[s[c]]=!0},overrideAll:t}},93404:function(ie,F,e){"use strict";var S=e(38248),k=e(61784),o=e(24040),T=e(3400),b=e(7316),p=e(79811),l=e(76308),t=p.cleanId,i=p.getFromTrace,r=o.traceIs;function n(g,x){var v=g[x],_=x.charAt(0);v&&"paper"!==v&&(g[x]=t(v,_,!0))}function a(g){function x(v,_){g[v]&&(!g.title||!g.title[_])&&(g.title||(g.title={}),g.title[_]=g[v],delete g[v])}g&&("string"!=typeof g.title&&"number"!=typeof g.title||(g.title={text:g.title}),x("titlefont","font"),x("titleposition","position"),x("titleside","side"),x("titleoffset","offset"))}function s(g){if(!T.isPlainObject(g))return!1;var x=g.name;return delete g.name,delete g.showlegend,("string"==typeof x||"number"==typeof x)&&String(x)}function c(g,x,v,_){if(v&&!_)return g;if(_&&!v||!g.trim())return x;if(!x.trim())return g;var f,C=Math.min(g.length,x.length);for(f=0;f<C&&g.charAt(f)===x.charAt(f);f++);return g.substr(0,f).trim()}function h(g){var x="middle",v="center";return"string"==typeof g&&(-1!==g.indexOf("top")?x="top":-1!==g.indexOf("bottom")&&(x="bottom"),-1!==g.indexOf("left")?v="left":-1!==g.indexOf("right")&&(v="right")),x+" "+v}function u(g,x){return x in g&&"object"==typeof g[x]&&0===Object.keys(g[x]).length}F.clearPromiseQueue=function(g){Array.isArray(g._promises)&&g._promises.length>0&&T.log("Clearing previous rejected promises from queue."),g._promises=[]},F.cleanLayout=function(g){var x,v;g||(g={}),g.xaxis1&&(g.xaxis||(g.xaxis=g.xaxis1),delete g.xaxis1),g.yaxis1&&(g.yaxis||(g.yaxis=g.yaxis1),delete g.yaxis1),g.scene1&&(g.scene||(g.scene=g.scene1),delete g.scene1);var _=(b.subplotsRegistry.cartesian||{}).attrRegex,f=(b.subplotsRegistry.polar||{}).attrRegex,C=(b.subplotsRegistry.ternary||{}).attrRegex,w=(b.subplotsRegistry.gl3d||{}).attrRegex,E=Object.keys(g);for(x=0;x<E.length;x++){var P=E[x];if(_&&_.test(P)){var L=g[P];L.anchor&&"free"!==L.anchor&&(L.anchor=t(L.anchor)),L.overlaying&&(L.overlaying=t(L.overlaying)),L.type||(L.isdate?L.type="date":L.islog?L.type="log":!1===L.isdate&&!1===L.islog&&(L.type="linear")),"withzero"!==L.autorange&&"tozero"!==L.autorange||(L.autorange=!0,L.rangemode="tozero"),L.insiderange&&delete L.range,delete L.islog,delete L.isdate,delete L.categories,u(L,"domain")&&delete L.domain,void 0!==L.autotick&&(void 0===L.tickmode&&(L.tickmode=L.autotick?"auto":"linear"),delete L.autotick),a(L)}else if(f&&f.test(P))a(g[P].radialaxis);else if(C&&C.test(P)){var O=g[P];a(O.aaxis),a(O.baxis),a(O.caxis)}else if(w&&w.test(P)){var z=g[P],V=z.cameraposition;if(Array.isArray(V)&&4===V[0].length){var U=V[1],Z=V[2],N=k([],V[0]),G=[];for(v=0;v<3;++v)G[v]=U[v]+Z*N[2+4*v];z.camera={eye:{x:G[0],y:G[1],z:G[2]},center:{x:U[0],y:U[1],z:U[2]},up:{x:0,y:0,z:1}},delete z.cameraposition}a(z.xaxis),a(z.yaxis),a(z.zaxis)}}var W=Array.isArray(g.annotations)?g.annotations.length:0;for(x=0;x<W;x++){var ae=g.annotations[x];T.isPlainObject(ae)&&(ae.ref&&("paper"===ae.ref?(ae.xref="paper",ae.yref="paper"):"data"===ae.ref&&(ae.xref="x",ae.yref="y"),delete ae.ref),n(ae,"xref"),n(ae,"yref"))}var re=Array.isArray(g.shapes)?g.shapes.length:0;for(x=0;x<re;x++){var ne=g.shapes[x];T.isPlainObject(ne)&&(n(ne,"xref"),n(ne,"yref"))}var Q=Array.isArray(g.images)?g.images.length:0;for(x=0;x<Q;x++){var $=g.images[x];T.isPlainObject($)&&(n($,"xref"),n($,"yref"))}var X=g.legend;return X&&(X.x>3?(X.x=1.02,X.xanchor="left"):X.x<-2&&(X.x=-.02,X.xanchor="right"),X.y>3?(X.y=1.02,X.yanchor="bottom"):X.y<-2&&(X.y=-.02,X.yanchor="top")),a(g),"rotate"===g.dragmode&&(g.dragmode="orbit"),l.clean(g),g.template&&g.template.layout&&F.cleanLayout(g.template.layout),g},F.cleanData=function(g){for(var x=0;x<g.length;x++){var v,_=g[x];if("histogramy"===_.type&&"xbins"in _&&!("ybins"in _)&&(_.ybins=_.xbins,delete _.xbins),_.error_y&&"opacity"in _.error_y){var f=l.defaults,C=_.error_y.color||(r(_,"bar")?l.defaultLine:f[x%f.length]);_.error_y.color=l.addOpacity(l.rgb(C),l.opacity(C)*_.error_y.opacity),delete _.error_y.opacity}if("bardir"in _&&("h"!==_.bardir||!r(_,"bar")&&"histogram"!==_.type.substr(0,9)||(_.orientation="h",F.swapXYData(_)),delete _.bardir),"histogramy"===_.type&&F.swapXYData(_),"histogramx"!==_.type&&"histogramy"!==_.type||(_.type="histogram"),"scl"in _&&!("colorscale"in _)&&(_.colorscale=_.scl,delete _.scl),"reversescl"in _&&!("reversescale"in _)&&(_.reversescale=_.reversescl,delete _.reversescl),_.xaxis&&(_.xaxis=t(_.xaxis,"x")),_.yaxis&&(_.yaxis=t(_.yaxis,"y")),r(_,"gl3d")&&_.scene&&(_.scene=b.subplotsRegistry.gl3d.cleanId(_.scene)),!r(_,"pie-like")&&!r(_,"bar-like"))if(Array.isArray(_.textposition))for(v=0;v<_.textposition.length;v++)_.textposition[v]=h(_.textposition[v]);else _.textposition&&(_.textposition=h(_.textposition));var w=o.getModule(_);if(w&&w.colorbar){var E=w.colorbar.container,P=E?_[E]:_;P&&P.colorscale&&("YIGnBu"===P.colorscale&&(P.colorscale="YlGnBu"),"YIOrRd"===P.colorscale&&(P.colorscale="YlOrRd"))}if("surface"===_.type&&T.isPlainObject(_.contours)){var L=["x","y","z"];for(v=0;v<L.length;v++){var O=_.contours[L[v]];T.isPlainObject(O)&&(O.highlightColor&&(O.highlightcolor=O.highlightColor,delete O.highlightColor),O.highlightWidth&&(O.highlightwidth=O.highlightWidth,delete O.highlightWidth))}}if("candlestick"===_.type||"ohlc"===_.type){var z=!1!==(_.increasing||{}).showlegend,V=!1!==(_.decreasing||{}).showlegend,R=s(_.increasing),U=s(_.decreasing);if(!1!==R&&!1!==U){var Z=c(R,U,z,V);Z&&(_.name=Z)}else!R&&!U||_.name||(_.name=R||U)}if(Array.isArray(_.transforms)){var N=_.transforms;for(v=0;v<N.length;v++){var G=N[v];if(T.isPlainObject(G))switch(G.type){case"filter":G.filtersrc&&(G.target=G.filtersrc,delete G.filtersrc),G.calendar&&(G.valuecalendar||(G.valuecalendar=G.calendar),delete G.calendar);break;case"groupby":if(G.styles=G.styles||G.style,G.styles&&!Array.isArray(G.styles)){var W=G.styles,ae=Object.keys(W);G.styles=[];for(var re=0;re<ae.length;re++)G.styles.push({target:ae[re],value:W[ae[re]]})}}}}u(_,"line")&&delete _.line,"marker"in _&&(u(_.marker,"line")&&delete _.marker.line,u(_,"marker")&&delete _.marker),l.clean(_),_.autobinx&&(delete _.autobinx,delete _.xbins),_.autobiny&&(delete _.autobiny,delete _.ybins),a(_),_.colorbar&&a(_.colorbar),_.marker&&_.marker.colorbar&&a(_.marker.colorbar),_.line&&_.line.colorbar&&a(_.line.colorbar),_.aaxis&&a(_.aaxis),_.baxis&&a(_.baxis)}},F.swapXYData=function(g){var x;if(T.swapAttrs(g,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(g.z)&&Array.isArray(g.z[0])&&(g.transpose?delete g.transpose:g.transpose=!0),g.error_x&&g.error_y){var v=g.error_y,_="copy_ystyle"in v?v.copy_ystyle:!(v.color||v.thickness||v.width);T.swapAttrs(g,["error_?.copy_ystyle"]),_&&T.swapAttrs(g,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof g.hoverinfo){var f=g.hoverinfo.split("+");for(x=0;x<f.length;x++)"x"===f[x]?f[x]="y":"y"===f[x]&&(f[x]="x");g.hoverinfo=f.join("+")}},F.coerceTraceIndices=function(g,x){if(S(x))return[x];if(!Array.isArray(x)||!x.length)return g.data.map(function(f,C){return C});if(Array.isArray(x)){for(var v=[],_=0;_<x.length;_++)T.isIndex(x[_],g.data.length)?v.push(x[_]):T.warn("trace index (",x[_],") is not a number or is out of bounds");return v}return x},F.manageArrayContainers=function(g,x,v){var _=g.obj,f=g.parts,C=f.length,w=f[C-1],E=S(w);if(E&&null===x){var P=f.slice(0,C-1).join(".");T.nestedProperty(_,P).get().splice(w,1)}else E&&void 0===g.get()&&void 0===g.get()&&(v[g.astr]=null),g.set(x)};var y=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function d(g){var x=g.search(y);if(x>0)return g.substr(0,x)}F.hasParent=function(g,x){for(var v=d(x);v;){if(v in g)return!0;v=d(v)}return!1};var m=["x","y","z"];F.clearAxisTypes=function(g,x,v){for(var _=0;_<x.length;_++)for(var f=g._fullData[_],C=0;C<3;C++){var w=i(g,f,m[C]);if(w&&"log"!==w.type){var E=w._name,P=w._id.substr(1);if("scene"===P.substr(0,5)){if(void 0!==v[P])continue;E=P+"."+E}var L=E+".type";void 0===v[E]&&void 0===v[L]&&T.nestedProperty(g.layout,L).set(null)}}}},22448:function(ie,F,e){"use strict";var S=e(36424);F._doPlot=S._doPlot,F.newPlot=S.newPlot,F.restyle=S.restyle,F.relayout=S.relayout,F.redraw=S.redraw,F.update=S.update,F._guiRestyle=S._guiRestyle,F._guiRelayout=S._guiRelayout,F._guiUpdate=S._guiUpdate,F._storeDirectGUIEdit=S._storeDirectGUIEdit,F.react=S.react,F.extendTraces=S.extendTraces,F.prependTraces=S.prependTraces,F.addTraces=S.addTraces,F.deleteTraces=S.deleteTraces,F.moveTraces=S.moveTraces,F.purge=S.purge,F.addFrames=S.addFrames,F.deleteFrames=S.deleteFrames,F.animate=S.animate,F.setPlotConfig=S.setPlotConfig;var k=e(52200).getGraphDiv,o=e(4016).eraseActiveShape;F.deleteActiveShape=function(b){return o(k(b))},F.toImage=e(67024),F.validate=e(21480),F.downloadImage=e(39792);var T=e(94828);F.makeTemplate=T.makeTemplate,F.validateTemplate=T.validateTemplate},17680:function(ie,F,e){"use strict";var S=e(63620),k=e(16628),o=e(24248),T=e(14952).sorterAsc,b=e(24040);F.containerArrayMatch=e(69820);var p=F.isAddVal=function(t){return"add"===t||S(t)},l=F.isRemoveVal=function(t){return null===t||"remove"===t};F.applyContainerArrayChanges=function(t,i,r,n,a){var s=i.astr,c=b.getComponentMethod(s,"supplyLayoutDefaults"),h=b.getComponentMethod(s,"draw"),u=b.getComponentMethod(s,"drawOne"),y=n.replot||n.recalc||c===k||h===k,d=t.layout,m=t._fullLayout;if(r[""]){Object.keys(r).length>1&&o.warn("Full array edits are incompatible with other edits",s);var g=r[""][""];if(l(g))i.set(null);else{if(!Array.isArray(g))return o.warn("Unrecognized full array edit value",s,g),!0;i.set(g)}return!y&&(c(d,m),h(t),!0)}var x,v,_,f,C,w,E,L=Object.keys(r).map(Number).sort(T),O=i.get(),z=O||[],V=a(m,s).get(),R=[],U=-1,Z=z.length;for(x=0;x<L.length;x++)if(f=r[_=L[x]],C=Object.keys(f),E=p(w=f[""]),_<0||_>z.length-(E?0:1))o.warn("index out of range",s,_);else if(void 0!==w)C.length>1&&o.warn("Insertion & removal are incompatible with edits to the same index.",s,_),l(w)?R.push(_):E?("add"===w&&(w={}),z.splice(_,0,w),V&&V.splice(_,0,{})):o.warn("Unrecognized full object edit value",s,_,w),-1===U&&(U=_);else for(v=0;v<C.length;v++)a(z[_],C[v],s+"["+_+"].").set(f[C[v]]);for(x=R.length-1;x>=0;x--)z.splice(R[x],1),V&&V.splice(R[x],1);if(z.length?O||i.set(z):i.set(null),y)return!1;if(c(d,m),u!==k){var N;if(-1===U)N=L;else{for(Z=Math.max(z.length,Z),N=[],x=0;x<L.length&&!((_=L[x])>=U);x++)N.push(_);for(x=U;x<Z;x++)N.push(x)}for(x=0;x<N.length;x++)u(t,N[x])}else h(t);return!0}},36424:function(ie,F,e){"use strict";var S=e(33428),k=e(38248),o=e(52264),T=e(3400),b=T.nestedProperty,p=e(95924),l=e(94552),t=e(24040),i=e(73060),r=e(7316),n=e(54460),a=e(96312),s=e(94724),c=e(43616),h=e(76308),u=e(42464).initInteractions,y=e(9616),d=e(22676).clearOutline,m=e(20556).dfltConfig,g=e(17680),x=e(93404),v=e(39172),_=e(67824),f=e(33816).AX_NAME_PATTERN,C=0;function w(Ae){var Ce=Ae._fullLayout;Ce._redrawFromAutoMarginCount?Ce._redrawFromAutoMarginCount--:Ae.emit("plotly_afterplot")}function E(Ae,Ce){try{Ae._fullLayout._paper.style("background",Ce)}catch(Oe){T.error(Oe)}}function P(Ae,Ce){E(Ae,h.combine(Ce,"white"))}function L(Ae,Ce){if(!Ae._context){Ae._context=T.extendDeep({},m);var Oe=S.select("base");Ae._context._baseUrl=Oe.size()&&Oe.attr("href")?window.location.href.split("#")[0]:""}var Ne,je,ve,Me=Ae._context;if(Ce){for(je=Object.keys(Ce),Ne=0;Ne<je.length;Ne++)"editable"!==(ve=je[Ne])&&"edits"!==ve&&ve in Me&&(Me[ve]="setBackground"===ve&&"opaque"===Ce[ve]?P:Ce[ve]);Ce.plot3dPixelRatio&&!Me.plotGlPixelRatio&&(Me.plotGlPixelRatio=Me.plot3dPixelRatio);var Le=Ce.editable;if(void 0!==Le)for(Me.editable=Le,je=Object.keys(Me.edits),Ne=0;Ne<je.length;Ne++)Me.edits[je[Ne]]=Le;if(Ce.edits)for(je=Object.keys(Ce.edits),Ne=0;Ne<je.length;Ne++)(ve=je[Ne])in Me.edits&&(Me.edits[ve]=Ce.edits[ve]);Me._exportedPlot=Ce._exportedPlot}Me.staticPlot&&(Me.editable=!1,Me.edits={},Me.autosizable=!1,Me.scrollZoom=!1,Me.doubleClick=!1,Me.showTips=!1,Me.showLink=!1,Me.displayModeBar=!1),"hover"!==Me.displayModeBar||o||(Me.displayModeBar=!0),"transparent"!==Me.setBackground&&"function"==typeof Me.setBackground||(Me.setBackground=E),Me._hasZeroHeight=Me._hasZeroHeight||0===Ae.clientHeight,Me._hasZeroWidth=Me._hasZeroWidth||0===Ae.clientWidth;var Ue=Me.scrollZoom,ze=Me._scrollZoom={};if(!0===Ue)ze.cartesian=1,ze.gl3d=1,ze.geo=1,ze.mapbox=1;else if("string"==typeof Ue){var qe=Ue.split("+");for(Ne=0;Ne<qe.length;Ne++)ze[qe[Ne]]=1}else!1!==Ue&&(ze.gl3d=1,ze.geo=1,ze.mapbox=1)}function O(Ae,Ce){var Oe,Ne,je=Ce+1,ve=[];for(Oe=0;Oe<Ae.length;Oe++)(Ne=Ae[Oe])<0?ve.push(je+Ne):ve.push(Ne);return ve}function z(Ae,Ce,Oe){var Ne,je;for(Ne=0;Ne<Ce.length;Ne++){if((je=Ce[Ne])!==parseInt(je,10))throw new Error("all values in "+Oe+" must be integers");if(je>=Ae.data.length||je<-Ae.data.length)throw new Error(Oe+" must be valid indices for gd.data.");if(Ce.indexOf(je,Ne+1)>-1||je>=0&&Ce.indexOf(-Ae.data.length+je)>-1||je<0&&Ce.indexOf(Ae.data.length+je)>-1)throw new Error("each index in "+Oe+" must be unique.")}}function V(Ae,Ce,Oe){if(!Array.isArray(Ae.data))throw new Error("gd.data must be an array.");if(void 0===Ce)throw new Error("currentIndices is a required argument.");if(Array.isArray(Ce)||(Ce=[Ce]),z(Ae,Ce,"currentIndices"),void 0===Oe||Array.isArray(Oe)||(Oe=[Oe]),void 0!==Oe&&z(Ae,Oe,"newIndices"),void 0!==Oe&&Ce.length!==Oe.length)throw new Error("current and new indices must be of equal length.")}function R(Ae,Ce,Oe,Ne,je){!function(it,ft,dt,kt){var St=T.isPlainObject(kt);if(!Array.isArray(it.data))throw new Error("gd.data must be an array");if(!T.isPlainObject(ft))throw new Error("update must be a key:value object");if(void 0===dt)throw new Error("indices must be an integer or array of integers");for(var Tt in z(it,dt,"indices"),ft){if(!Array.isArray(ft[Tt])||ft[Tt].length!==dt.length)throw new Error("attribute "+Tt+" must be an array of length equal to indices array length");if(St&&(!(Tt in kt)||!Array.isArray(kt[Tt])||kt[Tt].length!==ft[Tt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(Ae,Ce,Oe,Ne);for(var ve=function(it,ft,dt,kt){var Tt,lt,ot,Rt,Vt=T.isPlainObject(kt),Ht=[];for(var zt in Array.isArray(dt)||(dt=[dt]),dt=O(dt,it.data.length-1),ft)for(var Qe=0;Qe<dt.length;Qe++){if(Tt=(lt=b(it.data[dt[Qe]],zt)).get(),!T.isArrayOrTypedArray(ot=ft[zt][Qe]))throw new Error("attribute: "+zt+" index: "+Qe+" must be an array");if(!T.isArrayOrTypedArray(Tt))throw new Error("cannot extend missing or non-array attribute: "+zt);if(Tt.constructor!==ot.constructor)throw new Error("cannot extend array with an array of a different type: "+zt);k(Rt=Vt?kt[zt][Qe]:kt)||(Rt=-1),Ht.push({prop:lt,target:Tt,insert:ot,maxp:Math.floor(Rt)})}return Ht}(Ae,Ce,Oe,Ne),Me={},Le={},Ue=0;Ue<ve.length;Ue++){var ze=ve[Ue].prop,Ke=je(ve[Ue].target,ve[Ue].insert,ve[Ue].maxp);ze.set(Ke[0]),Array.isArray(Me[ze.astr])||(Me[ze.astr]=[]),Me[ze.astr].push(Ke[1]),Array.isArray(Le[ze.astr])||(Le[ze.astr]=[]),Le[ze.astr].push(ve[Ue].target.length)}return{update:Me,maxPoints:Le}}function U(Ae,Ce){var Oe=new Ae.constructor(Ae.length+Ce.length);return Oe.set(Ae),Oe.set(Ce,Ae.length),Oe}function Z(Ae,Ce,Oe,Ne){Ae=T.getGraphDiv(Ae),x.clearPromiseQueue(Ae);var je={};if("string"==typeof Ce)je[Ce]=Oe;else{if(!T.isPlainObject(Ce))return T.warn("Restyle fail.",Ce,Oe,Ne),Promise.reject();je=T.extendFlat({},Ce),void 0===Ne&&(Ne=Oe)}Object.keys(je).length&&(Ae.changed=!0);var ve=x.coerceTraceIndices(Ae,Ne),Me=ae(Ae,je,ve),Le=Me.flags;Le.calc&&(Ae.calcdata=void 0),Le.clearAxisTypes&&x.clearAxisTypes(Ae,ve,{});var Ue=[];Le.fullReplot?Ue.push(F._doPlot):(Ue.push(r.previousPromises),r.supplyDefaults(Ae),Le.markerSize&&(r.doCalcdata(Ae),$(Ue)),Le.style&&Ue.push(v.doTraceStyle),Le.colorbars&&Ue.push(v.doColorBars),Ue.push(w)),Ue.push(r.rehover,r.redrag,r.reselect),l.add(Ae,Z,[Ae,Me.undoit,Me.traces],Z,[Ae,Me.redoit,Me.traces]);var ze=T.syncOrAsync(Ue,Ae);return ze&&ze.then||(ze=Promise.resolve()),ze.then(function(){return Ae.emit("plotly_restyle",Me.eventData),Ae})}function N(Ae){return void 0===Ae?null:Ae}function G(Ae,Ce){return Ce?function(Oe,Ne,je){var ve=b(Oe,Ne),Me=ve.set;return ve.set=function(Le){W((je||"")+Ne,ve.get(),Le,Ae),Me(Le)},ve}:b}function W(Ae,Ce,Oe,Ne){if(Array.isArray(Ce)||Array.isArray(Oe))for(var je=Array.isArray(Ce)?Ce:[],ve=Array.isArray(Oe)?Oe:[],Me=Math.max(je.length,ve.length),Le=0;Le<Me;Le++)W(Ae+"["+Le+"]",je[Le],ve[Le],Ne);else if(T.isPlainObject(Ce)||T.isPlainObject(Oe)){var Ue=T.isPlainObject(Ce)?Ce:{},ze=T.isPlainObject(Oe)?Oe:{},qe=T.extendFlat({},Ue,ze);for(var Ke in qe)W(Ae+"."+Ke,Ue[Ke],ze[Ke],Ne)}else void 0===Ne[Ae]&&(Ne[Ae]=N(Ce))}function ae(Ae,Ce,Oe){var Ne,je=Ae._fullLayout,ve=Ae._fullData,Me=Ae.data,Le=je._guiEditing,Ue=G(je._preGUI,Le),ze=T.extendDeepAll({},Ce);re(Ce);var qe,Ke=_.traceFlags(),it={},ft={};function dt(){return Oe.map(function(){})}function kt(Qt){var sn=n.id2name(Qt);-1===qe.indexOf(sn)&&qe.push(sn)}function St(Qt){return"LAYOUT"+Qt+".autorange"}function Tt(Qt){return"LAYOUT"+Qt+".range"}function lt(Qt){for(var sn=Qt;sn<ve.length;sn++)if(ve[sn]._input===Me[Qt])return ve[sn]}function ot(Qt,sn,Kt){if(Array.isArray(Qt))Qt.forEach(function(Sn){ot(Sn,sn,Kt)});else if(!(Qt in Ce)&&!x.hasParent(Ce,Qt)){var qn;if("LAYOUT"===Qt.substr(0,6))qn=Ue(Ae.layout,Qt.replace("LAYOUT",""));else{var Fn=Oe[Kt];qn=G(je._tracePreGUI[lt(Fn)._fullInput.uid],Le)(Me[Fn],Qt)}Qt in ft||(ft[Qt]=dt()),void 0===ft[Qt][Kt]&&(ft[Qt][Kt]=N(qn.get())),void 0!==sn&&qn.set(sn)}}function Rt(Qt){return function(sn){return ve[sn][Qt]}}function Vt(Qt){return function(sn,Kt){return!1===sn?ve[Oe[Kt]][Qt]:null}}for(var Ht in Ce){if(x.hasParent(Ce,Ht))throw new Error("cannot set "+Ht+" and a parent attribute simultaneously");var zt,Qe,nt,We,et,gt,ht=Ce[Ht];if("autobinx"!==Ht&&"autobiny"!==Ht||(Ht=Ht.charAt(Ht.length-1)+"bins",ht=Array.isArray(ht)?ht.map(Vt(Ht)):!1===ht?Oe.map(Rt(Ht)):null),it[Ht]=ht,"LAYOUT"!==Ht.substr(0,6)){for(ft[Ht]=dt(),Ne=0;Ne<Oe.length;Ne++)if(zt=Me[Oe[Ne]],Qe=lt(Oe[Ne]),We=(nt=G(je._tracePreGUI[Qe._fullInput.uid],Le)(zt,Ht)).get(),void 0!==(et=Array.isArray(ht)?ht[Ne%ht.length]:ht)){var Ge=nt.parts[nt.parts.length-1],He=Ht.substr(0,Ht.length-Ge.length-1),ut=He?He+".":"",tt=He?b(Qe,He).get():Qe;if((gt=i.getTraceValObject(Qe,nt.parts))&&gt.impliedEdits&&null!==et)for(var xt in gt.impliedEdits)ot(T.relativeAttr(Ht,xt),gt.impliedEdits[xt],Ne);else if("thicknessmode"!==Ge&&"lenmode"!==Ge||We===et||"fraction"!==et&&"pixels"!==et||!tt){if("type"===Ht&&("pie"===et!=("pie"===We)||"funnelarea"===et!=("funnelarea"===We))){var At="x",Mt="y";"bar"!==et&&"bar"!==We||"h"!==zt.orientation||(At="y",Mt="x"),T.swapAttrs(zt,["?","?src"],"labels",At),T.swapAttrs(zt,["d?","?0"],"label",At),T.swapAttrs(zt,["?","?src"],"values",Mt),"pie"===We||"funnelarea"===We?(b(zt,"marker.color").set(b(zt,"marker.colors").get()),je._pielayer.selectAll("g.trace").remove()):t.traceIs(zt,"cartesian")&&b(zt,"marker.colors").set(b(zt,"marker.color").get())}}else{var yt=je._size,Pt=tt.orient,Ct="top"===Pt||"bottom"===Pt;if("thicknessmode"===Ge){var Dt=Ct?yt.h:yt.w;ot(ut+"thickness",tt.thickness*("fraction"===et?1/Dt:Dt),Ne)}else{var Ut=Ct?yt.w:yt.h;ot(ut+"len",tt.len*("fraction"===et?1/Ut:Ut),Ne)}}if(ft[Ht][Ne]=N(We),-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(Ht)){if("orientation"===Ht){nt.set(et);var Bt=zt.x&&!zt.y?"h":"v";if((nt.get()||Bt)===Qe.orientation)continue}else"orientationaxes"===Ht&&(zt.orientation={v:"h",h:"v"}[Qe.orientation]);x.swapXYData(zt),Ke.calc=Ke.clearAxisTypes=!0}else-1!==r.dataArrayContainers.indexOf(nt.parts[0])?(x.manageArrayContainers(nt,et,ft),Ke.calc=!0):(gt?gt.arrayOk&&!t.traceIs(Qe,"regl")&&(T.isArrayOrTypedArray(et)||T.isArrayOrTypedArray(We))?Ke.calc=!0:_.update(Ke,gt):Ke.calc=!0,nt.set(et))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(Ht)&&n.swap(Ae,Oe),"orientationaxes"===Ht){var qt=b(Ae.layout,"hovermode"),an=qt.get();"x"===an?qt.set("y"):"y"===an?qt.set("x"):"x unified"===an?qt.set("y unified"):"y unified"===an&&qt.set("x unified")}if(-1!==["orientation","type"].indexOf(Ht)){for(qe=[],Ne=0;Ne<Oe.length;Ne++){var mn=Me[Oe[Ne]];t.traceIs(mn,"cartesian")&&(kt(mn.xaxis||"x"),kt(mn.yaxis||"y"))}ot(qe.map(St),!0,0),ot(qe.map(Tt),[0,1],0)}}else nt=Ue(Ae.layout,Ht.replace("LAYOUT","")),ft[Ht]=[N(nt.get())],nt.set(Array.isArray(ht)?ht[0]:ht),Ke.calc=!0}return(Ke.calc||Ke.plot)&&(Ke.fullReplot=!0),{flags:Ke,undoit:ft,redoit:it,traces:Oe,eventData:T.extendDeepNoArrays([],[ze,Oe])}}function re(Ae){var Ce,Oe,Ne,je=T.counterRegex("axis",".title",!1,!1),ve=/colorbar\.title$/,Me=Object.keys(Ae);for(Ce=0;Ce<Me.length;Ce++)Ne=Ae[Oe=Me[Ce]],"title"!==Oe&&!je.test(Oe)&&!ve.test(Oe)||"string"!=typeof Ne&&"number"!=typeof Ne?Oe.indexOf("titlefont")>-1&&-1===Oe.indexOf("grouptitlefont")?Le(Oe,Oe.replace("titlefont","title.font")):Oe.indexOf("titleposition")>-1?Le(Oe,Oe.replace("titleposition","title.position")):Oe.indexOf("titleside")>-1?Le(Oe,Oe.replace("titleside","title.side")):Oe.indexOf("titleoffset")>-1&&Le(Oe,Oe.replace("titleoffset","title.offset")):Le(Oe,Oe.replace("title","title.text"));function Le(Ue,ze){Ae[ze]=Ae[Ue],delete Ae[Ue]}}function ne(Ae,Ce,Oe){Ae=T.getGraphDiv(Ae),x.clearPromiseQueue(Ae);var Ne={};if("string"==typeof Ce)Ne[Ce]=Oe;else{if(!T.isPlainObject(Ce))return T.warn("Relayout fail.",Ce,Oe),Promise.reject();Ne=T.extendFlat({},Ce)}Object.keys(Ne).length&&(Ae.changed=!0);var je=ue(Ae,Ne),ve=je.flags;ve.calc&&(Ae.calcdata=void 0);var Me=[r.previousPromises];ve.layoutReplot?Me.push(v.layoutReplot):Object.keys(Ne).length&&(Q(Ae,ve,je)||r.supplyDefaults(Ae),ve.legend&&Me.push(v.doLegend),ve.layoutstyle&&Me.push(v.layoutStyles),ve.axrange&&$(Me,je.rangesAltered),ve.ticks&&Me.push(v.doTicksRelayout),ve.modebar&&Me.push(v.doModeBar),ve.camera&&Me.push(v.doCamera),ve.colorbars&&Me.push(v.doColorBars),Me.push(w)),Me.push(r.rehover,r.redrag,r.reselect),l.add(Ae,ne,[Ae,je.undoit],ne,[Ae,je.redoit]);var Le=T.syncOrAsync(Me,Ae);return Le&&Le.then||(Le=Promise.resolve(Ae)),Le.then(function(){return Ae.emit("plotly_relayout",je.eventData),Ae})}function Q(Ae,Ce,Oe){var Ne,je,ve=Ae._fullLayout;if(!Ce.axrange)return!1;for(var Me in Ce)if("axrange"!==Me&&Ce[Me])return!1;var Le=function(ft,dt){return T.coerce(Ne,je,s,ft,dt)},Ue={};for(var ze in Oe.rangesAltered){var qe=n.id2name(ze);if(a(Ne=Ae.layout[qe],je=ve[qe],Le,Ue),je._matchGroup)for(var Ke in je._matchGroup)if(Ke!==ze){var it=ve[n.id2name(Ke)];it.autorange=je.autorange,it.range=je.range.slice(),it._input.range=je.range.slice()}}return!0}function $(Ae,Ce){Ae.push(d,v.doAutoRangeAndConstraints,Ce?function(Ne){var je=[];for(var ve in Ce){var Me=n.getFromId(Ne,ve);if(je.push(ve),-1!==(Me.ticklabelposition||"").indexOf("inside")&&Me._anchorAxis&&je.push(Me._anchorAxis._id),Me._matchGroup)for(var Le in Me._matchGroup)Ce[Le]||je.push(Le)}return n.draw(Ne,je,{skipTitle:!0})}:function(Ne){return n.draw(Ne,"redraw")},v.drawData,v.finalDraw)}var X=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,oe=/^[xyz]axis[0-9]*\.autorange$/,fe=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function ue(Ae,Ce){var Oe,Ne,je,ve=Ae.layout,Me=Ae._fullLayout,Ue=G(Me._preGUI,Me._guiEditing),ze=Object.keys(Ce),qe=n.list(Ae),Ke=T.extendDeepAll({},Ce),it={};for(re(Ce),ze=Object.keys(Ce),Ne=0;Ne<ze.length;Ne++)if(0===ze[Ne].indexOf("allaxes")){for(je=0;je<qe.length;je++){var ft=qe[je]._id.substr(1),dt=-1!==ft.indexOf("scene")?ft+".":"",kt=ze[Ne].replace("allaxes",dt+qe[je]._name);Ce[kt]||(Ce[kt]=Ce[ze[Ne]])}delete Ce[ze[Ne]]}var St=_.layoutFlags(),Tt={},lt={};function ot(Sn,hn){if(Array.isArray(Sn))Sn.forEach(function(pn){ot(pn,hn)});else if(!(Sn in Ce)&&!x.hasParent(Ce,Sn)){var wn=Ue(ve,Sn);Sn in lt||(lt[Sn]=N(wn.get())),void 0!==hn&&wn.set(hn)}}var Rt,Vt={};function Ht(Sn){var hn=n.name2id(Sn.split(".")[0]);return Vt[hn]=1,hn}for(var zt in Ce){if(x.hasParent(Ce,zt))throw new Error("cannot set "+zt+" and a parent attribute simultaneously");for(var Qe=Ue(ve,zt),nt=Ce[zt],We=Qe.parts.length-1;We>0&&"string"!=typeof Qe.parts[We];)We--;var et=Qe.parts[We],gt=Qe.parts[We-1]+"."+et,ht=Qe.parts.slice(0,We).join("."),Ge=b(Ae.layout,ht).get(),He=b(Me,ht).get(),ut=Qe.get();if(void 0!==nt){Tt[zt]=nt,lt[zt]="reverse"===et?nt:N(ut);var tt=i.getLayoutValObject(Me,Qe.parts);if(tt&&tt.impliedEdits&&null!==nt)for(var xt in tt.impliedEdits)ot(T.relativeAttr(zt,xt),tt.impliedEdits[xt]);if(-1!==["width","height"].indexOf(zt))if(nt){ot("autosize",null);var At="height"===zt?"width":"height";ot(At,Me[At])}else Me[zt]=Ae._initialAutoSize[zt];else if("autosize"===zt)ot("width",nt?null:Me.width),ot("height",nt?null:Me.height);else if(gt.match(X))Ht(gt),b(Me,ht+"._inputRange").set(null);else if(gt.match(oe)){Ht(gt),b(Me,ht+"._inputRange").set(null);var Mt=b(Me,ht).get();Mt._inputDomain&&(Mt._input.domain=Mt._inputDomain.slice())}else gt.match(fe)&&b(Me,ht+"._inputDomain").set(null);if("type"===et){Rt=Ge;var yt="linear"===He.type&&"log"===nt;if(yt||"log"===He.type&&"linear"===nt){if(Rt&&Rt.range)if(He.autorange)yt&&(Rt.range=Rt.range[1]>Rt.range[0]?[1,2]:[2,1]);else{var Ct=Rt.range[0],Dt=Rt.range[1];yt?(Ct<=0&&Dt<=0&&ot(ht+".autorange",!0),Ct<=0?Ct=Dt/1e6:Dt<=0&&(Dt=Ct/1e6),ot(ht+".range[0]",Math.log(Ct)/Math.LN10),ot(ht+".range[1]",Math.log(Dt)/Math.LN10)):(ot(ht+".range[0]",Math.pow(10,Ct)),ot(ht+".range[1]",Math.pow(10,Dt)))}else ot(ht+".autorange",!0);Array.isArray(Me._subplots.polar)&&Me._subplots.polar.length&&Me[Qe.parts[0]]&&"radialaxis"===Qe.parts[1]&&delete Me[Qe.parts[0]]._subplot.viewInitial["radialaxis.range"],t.getComponentMethod("annotations","convertCoords")(Ae,He,nt,ot),t.getComponentMethod("images","convertCoords")(Ae,He,nt,ot)}else ot(ht+".autorange",!0),ot(ht+".range",null);b(Me,ht+"._inputRange").set(null)}else if(et.match(f)){var Ut=b(Me,zt).get(),Bt=(nt||{}).type;Bt&&"-"!==Bt||(Bt="linear"),t.getComponentMethod("annotations","convertCoords")(Ae,Ut,Bt,ot),t.getComponentMethod("images","convertCoords")(Ae,Ut,Bt,ot)}var qt=g.containerArrayMatch(zt);if(qt){Oe=qt.array;var an=qt.property,mn=tt||{editType:"calc"};""!==(Ne=qt.index)&&""===an&&(g.isAddVal(nt)?lt[zt]=null:g.isRemoveVal(nt)?lt[zt]=(b(ve,Oe).get()||[])[Ne]:T.warn("unrecognized full object value",Ce)),_.update(St,mn),it[Oe]||(it[Oe]={});var Qt=it[Oe][Ne];Qt||(Qt=it[Oe][Ne]={}),Qt[an]=nt,delete Ce[zt]}else"reverse"===et?(Ge.range?Ge.range.reverse():(ot(ht+".autorange",!0),Ge.range=[1,0]),He.autorange?St.calc=!0:St.plot=!0):("dragmode"===zt&&(!1===nt&&!1!==ut||!1!==nt&&!1===ut)||Me._has("scatter-like")&&Me._has("regl")&&"dragmode"===zt&&("lasso"===nt||"select"===nt)&&"lasso"!==ut&&"select"!==ut||Me._has("gl2d")?St.plot=!0:tt?_.update(St,tt):St.calc=!0,Qe.set(nt))}}for(Oe in it)g.applyContainerArrayChanges(Ae,Ue(ve,Oe),it[Oe],St,Ue)||(St.plot=!0);for(var sn in Vt){var Kt=(Rt=n.getFromId(Ae,sn))&&Rt._constraintGroup;if(Kt)for(var qn in St.calc=!0,Kt)Vt[qn]||(n.getFromId(Ae,qn)._constraintShrinkable=!0)}(ge(Ae)||Ce.height||Ce.width)&&(St.plot=!0);var Fn=Me.shapes;for(Ne=0;Ne<Fn.length;Ne++)if(Fn[Ne].showlegend){St.calc=!0;break}return(St.plot||St.calc)&&(St.layoutReplot=!0),{flags:St,rangesAltered:Vt,undoit:lt,redoit:Tt,eventData:Ke}}function ge(Ae){var Ce=Ae._fullLayout,Oe=Ce.width,Ne=Ce.height;return Ae.layout.autosize&&r.plotAutoSize(Ae,Ae.layout,Ce),Ce.width!==Oe||Ce.height!==Ne}function we(Ae,Ce,Oe,Ne){Ae=T.getGraphDiv(Ae),x.clearPromiseQueue(Ae),T.isPlainObject(Ce)||(Ce={}),T.isPlainObject(Oe)||(Oe={}),Object.keys(Ce).length&&(Ae.changed=!0),Object.keys(Oe).length&&(Ae.changed=!0);var je=x.coerceTraceIndices(Ae,Ne),ve=ae(Ae,T.extendFlat({},Ce),je),Me=ve.flags,Le=ue(Ae,T.extendFlat({},Oe)),Ue=Le.flags;(Me.calc||Ue.calc)&&(Ae.calcdata=void 0),Me.clearAxisTypes&&x.clearAxisTypes(Ae,je,Oe);var ze=[];Ue.layoutReplot?ze.push(v.layoutReplot):Me.fullReplot?ze.push(F._doPlot):(ze.push(r.previousPromises),Q(Ae,Ue,Le)||r.supplyDefaults(Ae),Me.style&&ze.push(v.doTraceStyle),(Me.colorbars||Ue.colorbars)&&ze.push(v.doColorBars),Ue.legend&&ze.push(v.doLegend),Ue.layoutstyle&&ze.push(v.layoutStyles),Ue.axrange&&$(ze,Le.rangesAltered),Ue.ticks&&ze.push(v.doTicksRelayout),Ue.modebar&&ze.push(v.doModeBar),Ue.camera&&ze.push(v.doCamera),ze.push(w)),ze.push(r.rehover,r.redrag,r.reselect),l.add(Ae,we,[Ae,ve.undoit,Le.undoit,ve.traces],we,[Ae,ve.redoit,Le.redoit,ve.traces]);var qe=T.syncOrAsync(ze,Ae);return qe&&qe.then||(qe=Promise.resolve(Ae)),qe.then(function(){return Ae.emit("plotly_update",{data:ve.eventData,layout:Le.eventData}),Ae})}function Te(Ae){return function(Ce){Ce._fullLayout._guiEditing=!0;var Oe=Ae.apply(null,arguments);return Ce._fullLayout._guiEditing=!1,Oe}}var xe=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],ye=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function _e(Ae,Ce){for(var Oe=0;Oe<Ce.length;Oe++){var Ne=Ce[Oe],je=Ae.match(Ne.pattern);if(je){var ve=je[1]||"";return{head:ve,tail:Ae.substr(ve.length+1),attr:Ne.attr}}}}function Ie(Ae,Ce){var Oe=b(Ce,Ae).get();if(void 0!==Oe)return Oe;var Ne=Ae.split(".");for(Ne.pop();Ne.length>1;)if(Ne.pop(),void 0!==(Oe=b(Ce,Ne.join(".")+".uirevision").get()))return Oe;return Ce.uirevision}function De(Ae,Ce){for(var Oe=0;Oe<Ce.length;Oe++)if(Ce[Oe]._fullInput.uid===Ae)return Oe;return-1}function be(Ae,Ce,Oe){for(var Ne=0;Ne<Ce.length;Ne++)if(Ce[Ne].uid===Ae)return Ne;return!Ce[Oe]||Ce[Oe].uid?-1:Oe}function he(Ae,Ce){var Oe=T.isPlainObject(Ae),Ne=Array.isArray(Ae);return Oe||Ne?(Oe&&T.isPlainObject(Ce)||Ne&&Array.isArray(Ce))&&JSON.stringify(Ae)===JSON.stringify(Ce):Ae===Ce}function ce(Ae,Ce,Oe,Ne){var je,ve,Me,Le=Ne.getValObject,Ue=Ne.flags,ze=Ne.immutable,qe=Ne.inArray,Ke=Ne.arrayIndex;function it(){var Ge=je.editType;qe&&-1!==Ge.indexOf("arraydraw")?T.pushUnique(Ue.arrays[qe],Ke):(_.update(Ue,je),"none"!==Ge&&Ue.nChanges++,Ne.transition&&je.anim&&Ue.nChangesAnim++,(X.test(Me)||oe.test(Me))&&(Ue.rangesAltered[Oe[0]]=1),fe.test(Me)&&b(Ce,"_inputDomain").set(null),"datarevision"===ve&&(Ue.newDataRevision=1))}function ft(Ge){return"data_array"===Ge.valType||Ge.arrayOk}for(ve in Ae){if(Ue.calc&&!Ne.transition)return;var dt=Ae[ve],kt=Ce[ve],St=Oe.concat(ve);if(Me=St.join("."),"_"!==ve.charAt(0)&&"function"!=typeof dt&&dt!==kt){if(("tick0"===ve||"dtick"===ve)&&"geo"!==Oe[0]){var Tt=Ce.tickmode;if("auto"===Tt||"array"===Tt||!Tt)continue}if(("range"!==ve||!Ce.autorange)&&("zmin"!==ve&&"zmax"!==ve||"contourcarpet"!==Ce.type)&&(je=Le(St))&&(!je._compareAsJSON||JSON.stringify(dt)!==JSON.stringify(kt))){var lt,ot=je.valType,Rt=ft(je),Vt=Array.isArray(dt),Ht=Array.isArray(kt);if(Vt&&Ht){var zt="_input_"+ve,Qe=Ae[zt],nt=Ce[zt];if(Array.isArray(Qe)&&Qe===nt)continue}if(void 0===kt)Rt&&Vt?Ue.calc=!0:it();else if(je._isLinkedToArray){var We=[],et=!1;qe||(Ue.arrays[ve]=We);var gt=Math.min(dt.length,kt.length),ht=Math.max(dt.length,kt.length);if(gt!==ht){if("arraydraw"!==je.editType){it();continue}et=!0}for(lt=0;lt<gt;lt++)ce(dt[lt],kt[lt],St.concat(lt),T.extendFlat({inArray:ve,arrayIndex:lt},Ne));if(et)for(lt=gt;lt<ht;lt++)We.push(lt)}else!ot&&T.isPlainObject(dt)?ce(dt,kt,St,Ne):Rt?Vt&&Ht?(ze&&(Ue.calc=!0),(ze||Ne.newDataRevision)&&it()):Vt!==Ht?Ue.calc=!0:it():Vt&&Ht&&dt.length===kt.length&&String(dt)===String(kt)||it()}}}for(ve in Ce)if(!(ve in Ae)&&"_"!==ve.charAt(0)&&"function"!=typeof Ce[ve]){if(ft(je=Le(Oe.concat(ve)))&&Array.isArray(Ce[ve]))return void(Ue.calc=!0);it()}}function me(Ae,Ce){var Oe;for(Oe in Ae)if("_"!==Oe.charAt(0)){var Ne=Ae[Oe],je=Ce[Oe];if(Ne!==je)if(T.isPlainObject(Ne)&&T.isPlainObject(je)){if(me(Ne,je))return!0}else{if(!Array.isArray(Ne)||!Array.isArray(je)||Ne.length!==je.length)return!0;for(var ve=0;ve<Ne.length;ve++)if(Ne[ve]!==je[ve]&&(!T.isPlainObject(Ne[ve])||!T.isPlainObject(je[ve])||me(Ne[ve],je[ve])))return!0}}}function Pe(Ae){var Ce=Ae._fullLayout,Oe=Ae.getBoundingClientRect();if(!T.equalDomRects(Oe,Ce._lastBBox)){var Ne=Ce._invTransform=T.inverseTransformMatrix(T.getFullTransformMatrix(Ae));Ce._invScaleX=Math.sqrt(Ne[0][0]*Ne[0][0]+Ne[0][1]*Ne[0][1]+Ne[0][2]*Ne[0][2]),Ce._invScaleY=Math.sqrt(Ne[1][0]*Ne[1][0]+Ne[1][1]*Ne[1][1]+Ne[1][2]*Ne[1][2]),Ce._lastBBox=Oe}}F.animate=function(Ae,Ce,Oe){if(Ae=T.getGraphDiv(Ae),!T.isPlotDiv(Ae))throw new Error("This element is not a Plotly plot: "+Ae+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Ne=Ae._transitionData;Ne._frameQueue||(Ne._frameQueue=[]);var je=(Oe=r.supplyAnimationDefaults(Oe)).transition,ve=Oe.frame;function Me(ze){return Array.isArray(je)?ze>=je.length?je[0]:je[ze]:je}function Le(ze){return Array.isArray(ve)?ze>=ve.length?ve[0]:ve[ze]:ve}function Ue(ze,qe){var Ke=0;return function(){if(ze&&++Ke===qe)return ze()}}return void 0===Ne._frameWaitingCnt&&(Ne._frameWaitingCnt=0),new Promise(function(ze,qe){var it,ft,dt=0;function kt(zt){return zt.transitionOpts=Array.isArray(je)?dt>=je.length?je[dt]:je[0]:je,dt++,zt}var St=[],Tt=null==Ce,lt=Array.isArray(Ce);if(Tt||lt||!T.isPlainObject(Ce)){if(Tt||-1!==["string","number"].indexOf(typeof Ce))for(it=0;it<Ne._frames.length;it++)(ft=Ne._frames[it])&&(Tt||String(ft.group)===String(Ce))&&St.push({type:"byname",name:String(ft.name),data:kt({name:ft.name})});else if(lt)for(it=0;it<Ce.length;it++){var ot=Ce[it];-1!==["number","string"].indexOf(typeof ot)?(ot=String(ot),St.push({type:"byname",name:ot,data:kt({name:ot})})):T.isPlainObject(ot)&&St.push({type:"object",data:kt(T.extendFlat({},ot))})}}else St.push({type:"object",data:kt(T.extendFlat({},Ce))});for(it=0;it<St.length;it++)if("byname"===(ft=St[it]).type&&!Ne._frameHash[ft.data.name])return T.warn('animate failure: frame not found: "'+ft.data.name+'"'),void qe();-1!==["next","immediate"].indexOf(Oe.mode)&&function(){if(0!==Ne._frameQueue.length){for(;Ne._frameQueue.length;){var zt=Ne._frameQueue.pop();zt.onInterrupt&&zt.onInterrupt()}Ae.emit("plotly_animationinterrupted",[])}}(),"reverse"===Oe.direction&&St.reverse();var Rt=Ae._fullLayout._currentFrame;if(Rt&&Oe.fromcurrent){var Vt=-1;for(it=0;it<St.length;it++)if("byname"===(ft=St[it]).type&&ft.name===Rt){Vt=it;break}if(Vt>0&&Vt<St.length-1){var Ht=[];for(it=0;it<St.length;it++)ft=St[it],("byname"!==St[it].type||it>Vt)&&Ht.push(ft);St=Ht}}St.length>0?function(zt){if(0!==zt.length){for(var Qe=0;Qe<zt.length;Qe++){var nt;nt="byname"===zt[Qe].type?r.computeFrame(Ae,zt[Qe].name):zt[Qe].data;var We=Le(Qe),et=Me(Qe);et.duration=Math.min(et.duration,We.duration);var gt={frame:nt,name:zt[Qe].name,frameOpts:We,transitionOpts:et};Qe===zt.length-1&&(gt.onComplete=Ue(ze,2),gt.onInterrupt=qe),Ne._frameQueue.push(gt)}"immediate"===Oe.mode&&(Ne._lastFrameAt=-1/0),Ne._animationRaf||function Ke(){Ae.emit("plotly_animating"),Ne._lastFrameAt=-1/0,Ne._timeToNext=0,Ne._runningTransitions=0,Ne._currentFrame=null;var zt=function(){Ne._animationRaf=window.requestAnimationFrame(zt),Date.now()-Ne._lastFrameAt>Ne._timeToNext&&function(){Ne._currentFrame&&Ne._currentFrame.onComplete&&Ne._currentFrame.onComplete();var Qe=Ne._currentFrame=Ne._frameQueue.shift();if(Qe){var nt=Qe.name?Qe.name.toString():null;Ae._fullLayout._currentFrame=nt,Ne._lastFrameAt=Date.now(),Ne._timeToNext=Qe.frameOpts.duration,r.transition(Ae,Qe.frame.data,Qe.frame.layout,x.coerceTraceIndices(Ae,Qe.frame.traces),Qe.frameOpts,Qe.transitionOpts).then(function(){Qe.onComplete&&Qe.onComplete()}),Ae.emit("plotly_animatingframe",{name:nt,frame:Qe.frame,animation:{frame:Qe.frameOpts,transition:Qe.transitionOpts}})}else Ae.emit("plotly_animated"),window.cancelAnimationFrame(Ne._animationRaf),Ne._animationRaf=null}()};zt()}()}}(St):(Ae.emit("plotly_animated"),ze())})},F.addFrames=function(Ae,Ce,Oe){if(Ae=T.getGraphDiv(Ae),null==Ce)return Promise.resolve();if(!T.isPlotDiv(Ae))throw new Error("This element is not a Plotly plot: "+Ae+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Ne,je,ve,Me,Le=Ae._transitionData._frames,Ue=Ae._transitionData._frameHash;if(!Array.isArray(Ce))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Ce);var ze=Le.length+2*Ce.length,qe=[],Ke={};for(Ne=Ce.length-1;Ne>=0;Ne--)if(T.isPlainObject(Ce[Ne])){var it=Ce[Ne].name,ft=(Ue[it]||Ke[it]||{}).name,dt=Ce[Ne].name;ft&&dt&&"number"==typeof dt&&(Ue[ft]||Ke[ft])&&C<5&&(C++,T.warn('addFrames: overwriting frame "'+(Ue[ft]||Ke[ft]).name+'" with a frame whose name of type "number" also equates to "'+ft+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===C&&T.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Ke[it]={name:it},qe.push({frame:r.supplyFrameDefaults(Ce[Ne]),index:Oe&&null!=Oe[Ne]?Oe[Ne]:ze+Ne})}qe.sort(function(zt,Qe){return zt.index>Qe.index?-1:zt.index<Qe.index?1:0});var St=[],Tt=[],lt=Le.length;for(Ne=qe.length-1;Ne>=0;Ne--){if("number"==typeof(je=qe[Ne].frame).name&&T.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!je.name)for(;Ue[je.name="frame "+Ae._transitionData._counter++];);if(Ue[je.name]){for(ve=0;ve<Le.length&&(Le[ve]||{}).name!==je.name;ve++);St.push({type:"replace",index:ve,value:je}),Tt.unshift({type:"replace",index:ve,value:Le[ve]})}else Me=Math.max(0,Math.min(qe[Ne].index,lt)),St.push({type:"insert",index:Me,value:je}),Tt.unshift({type:"delete",index:Me}),lt++}return l&&l.add(Ae,r.modifyFrames,[Ae,Tt],r.modifyFrames,[Ae,St]),r.modifyFrames(Ae,St)},F.deleteFrames=function(Ae,Ce){if(Ae=T.getGraphDiv(Ae),!T.isPlotDiv(Ae))throw new Error("This element is not a Plotly plot: "+Ae);var Oe,Ne,je=Ae._transitionData._frames,ve=[],Me=[];if(!Ce)for(Ce=[],Oe=0;Oe<je.length;Oe++)Ce.push(Oe);for((Ce=Ce.slice()).sort(),Oe=Ce.length-1;Oe>=0;Oe--)ve.push({type:"delete",index:Ne=Ce[Oe]}),Me.unshift({type:"insert",index:Ne,value:je[Ne]});return l&&l.add(Ae,r.modifyFrames,[Ae,Me],r.modifyFrames,[Ae,ve]),r.modifyFrames(Ae,ve)},F.addTraces=function Ae(Ce,Oe,Ne){Ce=T.getGraphDiv(Ce);var je,ve,Me=[],Le=F.deleteTraces,Ue=Ae,ze=[Ce,Me],qe=[Ce,Oe];for(function(Ke,it,ft){var dt,kt;if(!Array.isArray(Ke.data))throw new Error("gd.data must be an array.");if(void 0===it)throw new Error("traces must be defined.");for(Array.isArray(it)||(it=[it]),dt=0;dt<it.length;dt++)if("object"!=typeof(kt=it[dt])||Array.isArray(kt)||null===kt)throw new Error("all values in traces array must be non-array objects");if(void 0===ft||Array.isArray(ft)||(ft=[ft]),void 0!==ft&&ft.length!==it.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(Ce,Oe,Ne),Array.isArray(Oe)||(Oe=[Oe]),Oe=Oe.map(function(Ke){return T.extendFlat({},Ke)}),x.cleanData(Oe),je=0;je<Oe.length;je++)Ce.data.push(Oe[je]);for(je=0;je<Oe.length;je++)Me.push(-Oe.length+je);if(void 0===Ne)return ve=F.redraw(Ce),l.add(Ce,Le,ze,Ue,qe),ve;Array.isArray(Ne)||(Ne=[Ne]);try{V(Ce,Me,Ne)}catch(Ke){throw Ce.data.splice(Ce.data.length-Oe.length,Oe.length),Ke}return l.startSequence(Ce),l.add(Ce,Le,ze,Ue,qe),ve=F.moveTraces(Ce,Me,Ne),l.stopSequence(Ce),ve},F.deleteTraces=function Ae(Ce,Oe){Ce=T.getGraphDiv(Ce);var Ne,je,ve=[],Me=F.addTraces,Le=Ae,Ue=[Ce,ve,Oe],ze=[Ce,Oe];if(void 0===Oe)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Oe)||(Oe=[Oe]),z(Ce,Oe,"indices"),(Oe=O(Oe,Ce.data.length-1)).sort(T.sorterDes),Ne=0;Ne<Oe.length;Ne+=1)je=Ce.data.splice(Oe[Ne],1)[0],ve.push(je);var qe=F.redraw(Ce);return l.add(Ce,Me,Ue,Le,ze),qe},F.extendTraces=function Ae(Ce,Oe,Ne,je){var ve=R(Ce=T.getGraphDiv(Ce),Oe,Ne,je,function(Ue,ze,qe){var Ke,it;if(T.isTypedArray(Ue))if(qe<0){var ft=new Ue.constructor(0),dt=U(Ue,ze);qe<0?(Ke=dt,it=ft):(Ke=ft,it=dt)}else if(Ke=new Ue.constructor(qe),it=new Ue.constructor(Ue.length+ze.length-qe),qe===ze.length)Ke.set(ze),it.set(Ue);else if(qe<ze.length){var kt=ze.length-qe;Ke.set(ze.subarray(kt)),it.set(Ue),it.set(ze.subarray(0,kt),Ue.length)}else{var St=qe-ze.length,Tt=Ue.length-St;Ke.set(Ue.subarray(Tt)),Ke.set(ze,St),it.set(Ue.subarray(0,Tt))}else Ke=Ue.concat(ze),it=qe>=0&&qe<Ke.length?Ke.splice(0,Ke.length-qe):[];return[Ke,it]}),Me=F.redraw(Ce);return l.add(Ce,F.prependTraces,[Ce,ve.update,Ne,ve.maxPoints],Ae,arguments),Me},F.moveTraces=function Ae(Ce,Oe,Ne){var je,ve=[],Me=[],Le=Ae,Ue=Ae,ze=[Ce=T.getGraphDiv(Ce),Ne,Oe],qe=[Ce,Oe,Ne];if(V(Ce,Oe,Ne),Oe=Array.isArray(Oe)?Oe:[Oe],void 0===Ne)for(Ne=[],je=0;je<Oe.length;je++)Ne.push(-Oe.length+je);for(Ne=Array.isArray(Ne)?Ne:[Ne],Oe=O(Oe,Ce.data.length-1),Ne=O(Ne,Ce.data.length-1),je=0;je<Ce.data.length;je++)-1===Oe.indexOf(je)&&ve.push(Ce.data[je]);for(je=0;je<Oe.length;je++)Me.push({newIndex:Ne[je],trace:Ce.data[Oe[je]]});for(Me.sort(function(it,ft){return it.newIndex-ft.newIndex}),je=0;je<Me.length;je+=1)ve.splice(Me[je].newIndex,0,Me[je].trace);Ce.data=ve;var Ke=F.redraw(Ce);return l.add(Ce,Le,ze,Ue,qe),Ke},F.prependTraces=function Ae(Ce,Oe,Ne,je){var ve=R(Ce=T.getGraphDiv(Ce),Oe,Ne,je,function(Ue,ze,qe){var Ke,it;if(T.isTypedArray(Ue))if(qe<=0){var ft=new Ue.constructor(0),dt=U(ze,Ue);qe<0?(Ke=dt,it=ft):(Ke=ft,it=dt)}else if(Ke=new Ue.constructor(qe),it=new Ue.constructor(Ue.length+ze.length-qe),qe===ze.length)Ke.set(ze),it.set(Ue);else if(qe<ze.length){var kt=ze.length-qe;Ke.set(ze.subarray(0,kt)),it.set(ze.subarray(kt)),it.set(Ue,kt)}else{var St=qe-ze.length;Ke.set(ze),Ke.set(Ue.subarray(0,St),ze.length),it.set(Ue.subarray(St))}else Ke=ze.concat(Ue),it=qe>=0&&qe<Ke.length?Ke.splice(qe,Ke.length):[];return[Ke,it]}),Me=F.redraw(Ce);return l.add(Ce,F.extendTraces,[Ce,ve.update,Ne,ve.maxPoints],Ae,arguments),Me},F.newPlot=function(Ae,Ce,Oe,Ne){return Ae=T.getGraphDiv(Ae),r.cleanPlot([],{},Ae._fullData||[],Ae._fullLayout||{}),r.purge(Ae),F._doPlot(Ae,Ce,Oe,Ne)},F._doPlot=function(Ae,Ce,Oe,Ne){var je;if(Ae=T.getGraphDiv(Ae),p.init(Ae),T.isPlainObject(Ce)){var ve=Ce;Ce=ve.data,Oe=ve.layout,Ne=ve.config,je=ve.frames}if(!1===p.triggerHandler(Ae,"plotly_beforeplot",[Ce,Oe,Ne]))return Promise.reject();Ce||Oe||T.isPlotDiv(Ae)||T.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",Ae),L(Ae,Ne),Oe||(Oe={}),S.select(Ae).classed("js-plotly-plot",!0),c.makeTester(),Array.isArray(Ae._promises)||(Ae._promises=[]);var Me=0===(Ae.data||[]).length&&Array.isArray(Ce);Array.isArray(Ce)&&(x.cleanData(Ce),Me?Ae.data=Ce:Ae.data.push.apply(Ae.data,Ce),Ae.empty=!1),Ae.layout&&!Me||(Ae.layout=x.cleanLayout(Oe)),r.supplyDefaults(Ae);var Le=Ae._fullLayout,Ue=Le._has("cartesian");Le._replotting=!0,(Me||Le._shouldCreateBgLayer)&&(function(Tt){var lt=S.select(Tt),ot=Tt._fullLayout;if(ot._calcInverseTransform=Pe,ot._calcInverseTransform(Tt),ot._container=lt.selectAll(".plot-container").data([0]),ot._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),ot._paperdiv=ot._container.selectAll(".svg-container").data([0]),ot._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),ot._glcontainer=ot._paperdiv.selectAll(".gl-container").data([{}]),ot._glcontainer.enter().append("div").classed("gl-container",!0),ot._paperdiv.selectAll(".main-svg").remove(),ot._paperdiv.select(".modebar-container").remove(),ot._paper=ot._paperdiv.insert("svg",":first-child").classed("main-svg",!0),ot._toppaper=ot._paperdiv.append("svg").classed("main-svg",!0),ot._modebardiv=ot._paperdiv.append("div"),delete ot._modeBar,ot._hoverpaper=ot._paperdiv.append("svg").classed("main-svg",!0),!ot._uid){var Rt={};S.selectAll("defs").each(function(){this.id&&(Rt[this.id.split("-")[1]]=1)}),ot._uid=T.randstr(Rt)}ot._paperdiv.selectAll(".main-svg").attr(y.svgAttrs),ot._defs=ot._paper.append("defs").attr("id","defs-"+ot._uid),ot._clips=ot._defs.append("g").classed("clips",!0),ot._topdefs=ot._toppaper.append("defs").attr("id","topdefs-"+ot._uid),ot._topclips=ot._topdefs.append("g").classed("clips",!0),ot._bgLayer=ot._paper.append("g").classed("bglayer",!0),ot._draggers=ot._paper.append("g").classed("draglayer",!0);var Vt=ot._paper.append("g").classed("layer-below",!0);ot._imageLowerLayer=Vt.append("g").classed("imagelayer",!0),ot._shapeLowerLayer=Vt.append("g").classed("shapelayer",!0),ot._cartesianlayer=ot._paper.append("g").classed("cartesianlayer",!0),ot._polarlayer=ot._paper.append("g").classed("polarlayer",!0),ot._smithlayer=ot._paper.append("g").classed("smithlayer",!0),ot._ternarylayer=ot._paper.append("g").classed("ternarylayer",!0),ot._geolayer=ot._paper.append("g").classed("geolayer",!0),ot._funnelarealayer=ot._paper.append("g").classed("funnelarealayer",!0),ot._pielayer=ot._paper.append("g").classed("pielayer",!0),ot._iciclelayer=ot._paper.append("g").classed("iciclelayer",!0),ot._treemaplayer=ot._paper.append("g").classed("treemaplayer",!0),ot._sunburstlayer=ot._paper.append("g").classed("sunburstlayer",!0),ot._indicatorlayer=ot._toppaper.append("g").classed("indicatorlayer",!0),ot._glimages=ot._paper.append("g").classed("glimages",!0);var Ht=ot._toppaper.append("g").classed("layer-above",!0);ot._imageUpperLayer=Ht.append("g").classed("imagelayer",!0),ot._shapeUpperLayer=Ht.append("g").classed("shapelayer",!0),ot._selectionLayer=ot._toppaper.append("g").classed("selectionlayer",!0),ot._infolayer=ot._toppaper.append("g").classed("infolayer",!0),ot._menulayer=ot._toppaper.append("g").classed("menulayer",!0),ot._zoomlayer=ot._toppaper.append("g").classed("zoomlayer",!0),ot._hoverlayer=ot._hoverpaper.append("g").classed("hoverlayer",!0),ot._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Tt.emit("plotly_framework")}(Ae),Le._shouldCreateBgLayer&&delete Le._shouldCreateBgLayer),c.initGradients(Ae),c.initPatterns(Ae),Me&&n.saveShowSpikeInitial(Ae);var ze=!Ae.calcdata||Ae.calcdata.length!==(Ae._fullData||[]).length;ze&&r.doCalcdata(Ae);for(var qe=0;qe<Ae.calcdata.length;qe++)Ae.calcdata[qe][0].trace=Ae._fullData[qe];Ae._context.responsive?Ae._responsiveChartHandler||(Ae._responsiveChartHandler=function(){T.isHidden(Ae)||r.resize(Ae)},window.addEventListener("resize",Ae._responsiveChartHandler)):T.clearResponsive(Ae);var Ke=T.extendFlat({},Le._size),it=0;function ft(){if(r.clearAutoMarginIds(Ae),v.drawMarginPushers(Ae),n.allowAutoMargin(Ae),Ae._fullLayout.title.text&&Ae._fullLayout.title.automargin&&r.allowAutoMargin(Ae,"title.automargin"),Le._has("pie"))for(var Tt=Ae._fullData,lt=0;lt<Tt.length;lt++){var ot=Tt[lt];"pie"===ot.type&&ot.automargin&&r.allowAutoMargin(Ae,"pie."+ot.uid+".automargin")}return r.doAutoMargin(Ae),r.previousPromises(Ae)}function dt(){Ae._transitioning||(v.doAutoRangeAndConstraints(Ae),Me&&n.saveRangeInitial(Ae),t.getComponentMethod("rangeslider","calcAutorange")(Ae))}var kt=[r.previousPromises,function(){if(je)return F.addFrames(Ae,je)},function Tt(){for(var lt=Le._basePlotModules,ot=0;ot<lt.length;ot++)lt[ot].drawFramework&&lt[ot].drawFramework(Ae);!Le._glcanvas&&Le._has("gl")&&(Le._glcanvas=Le._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(zt){return zt.key}),Le._glcanvas.enter().append("canvas").attr("class",function(zt){return"gl-canvas gl-canvas-"+zt.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Rt=Ae._context.plotGlPixelRatio;if(Le._glcanvas){Le._glcanvas.attr("width",Le.width*Rt).attr("height",Le.height*Rt).style("width",Le.width+"px").style("height",Le.height+"px");var Vt=Le._glcanvas.data()[0].regl;if(Vt&&(Math.floor(Le.width*Rt)!==Vt._gl.drawingBufferWidth||Math.floor(Le.height*Rt)!==Vt._gl.drawingBufferHeight)){var Ht="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!it)return T.log(Ht+" Clearing graph and plotting again."),r.cleanPlot([],{},Ae._fullData,Le),r.supplyDefaults(Ae),Le=Ae._fullLayout,r.doCalcdata(Ae),it++,Tt();T.error(Ht)}}return"h"===Le.modebar.orientation?Le._modebardiv.style("height",null).style("width","100%"):Le._modebardiv.style("width",null).style("height",Le.height+"px"),r.previousPromises(Ae)},ft,function(){if(r.didMarginChange(Ke,Le._size))return T.syncOrAsync([ft,v.layoutStyles],Ae)}];Ue&&kt.push(function(){if(ze)return T.syncOrAsync([t.getComponentMethod("shapes","calcAutorange"),t.getComponentMethod("annotations","calcAutorange"),dt],Ae);dt()}),kt.push(v.layoutStyles),Ue&&kt.push(function(){return n.draw(Ae,Me?"":"redraw")},function(Tt){var lt=Tt._fullLayout._insideTickLabelsUpdaterange;if(lt)return Tt._fullLayout._insideTickLabelsUpdaterange=void 0,ne(Tt,lt).then(function(){n.saveRangeInitial(Tt,!0)})}),kt.push(v.drawData,v.finalDraw,u,r.addLinks,r.rehover,r.redrag,r.reselect,r.doAutoMargin,r.previousPromises);var St=T.syncOrAsync(kt,Ae);return St&&St.then||(St=Promise.resolve()),St.then(function(){return w(Ae),Ae})},F.purge=function(Ae){var Ce=(Ae=T.getGraphDiv(Ae))._fullLayout||{};return r.cleanPlot([],{},Ae._fullData||[],Ce),r.purge(Ae),p.purge(Ae),Ce._container&&Ce._container.remove(),delete Ae._context,Ae},F.react=function(Ae,Ce,Oe,Ne){var je,ve;Ae=T.getGraphDiv(Ae),x.clearPromiseQueue(Ae);var ht,Ge,He,ut,tt,xt,Me=Ae._fullData,Le=Ae._fullLayout;if(T.isPlotDiv(Ae)&&Me&&Le){if(T.isPlainObject(Ce)){var Ue=Ce;Ce=Ue.data,Oe=Ue.layout,Ne=Ue.config,je=Ue.frames}var ze=!1;if(Ne){var qe=T.extendDeep({},Ae._context);Ae._context=void 0,L(Ae,Ne),ze=me(qe,Ae._context)}Ae.data=Ce||[],x.cleanData(Ae.data),Ae.layout=Oe||{},x.cleanLayout(Ae.layout),function(ht,Ge,He,ut){var tt,xt,At,Mt,yt,Pt,Ct,Dt,Ut,Bt,qt=ut._preGUI,an=[],mn={},Qt={};for(tt in qt){if(yt=_e(tt,xe)){if(Ut=yt.head,Bt=yt.tail,(Mt=(At=b(ut,xt=yt.attr||Ut+".uirevision").get())&&Ie(xt,Ge))&&Mt===At){if(null===(Pt=qt[tt])&&(Pt=void 0),he(Dt=(Ct=b(Ge,tt)).get(),Pt)){void 0===Dt&&"autorange"===Bt&&an.push(Ut),Ct.set(N(b(ut,tt).get()));continue}if("autorange"===Bt||"range["===Bt.substr(0,6)){var qn=qt[Ut+".autorange"];if(qn||null===qn&&null===qt[Ut+".range[0]"]&&null===qt[Ut+".range[1]"]){if(!(Ut in mn)){var Fn=b(Ge,Ut).get();mn[Ut]=Fn&&(Fn.autorange||!1!==Fn.autorange&&(!Fn.range||2!==Fn.range.length))}if(mn[Ut]){Ct.set(N(b(ut,tt).get()));continue}}}}}else T.warn("unrecognized GUI edit: "+tt);delete qt[tt],yt&&"range["===yt.tail.substr(0,6)&&(Qt[yt.head]=1)}for(var Sn=0;Sn<an.length;Sn++){var hn=an[Sn];if(Qt[hn]){var wn=b(Ge,hn).get();wn&&delete wn.autorange}}var pn=ut._tracePreGUI;for(var An in pn){var On,Dn=pn[An],Vn=null;for(tt in Dn){if(!Vn){var Gn=De(An,He);if(Gn<0){delete pn[An];break}var Nn=be(An,ht,(On=He[Gn]._fullInput).index);if(Nn<0){delete pn[An];break}Vn=ht[Nn]}if(yt=_e(tt,ye)){if(yt.attr?Mt=(At=b(ut,yt.attr).get())&&Ie(yt.attr,Ge):(At=On.uirevision,void 0===(Mt=Vn.uirevision)&&(Mt=Ge.uirevision)),Mt&&Mt===At&&(null===(Pt=Dn[tt])&&(Pt=void 0),he(Dt=(Ct=b(Vn,tt)).get(),Pt))){Ct.set(N(b(On,tt).get()));continue}}else T.warn("unrecognized GUI edit: "+tt+" in trace uid "+An);delete Dn[tt]}}}(Ae.data,Ae.layout,Me,Le),r.supplyDefaults(Ae,{skipUpdateCalc:!0});var Ke=Ae._fullData,it=Ae._fullLayout,ft=void 0===it.datarevision,dt=it.transition,kt=(ht=Ae,Ge=Le,He=it,ut=ft,tt=dt,(xt=_.layoutFlags()).arrays={},xt.rangesAltered={},xt.nChanges=0,xt.nChangesAnim=0,ce(Ge,He,[],{getValObject:function(At){return i.getLayoutValObject(He,At)},flags:xt,immutable:ut,transition:tt,gd:ht}),(xt.plot||xt.calc)&&(xt.layoutReplot=!0),tt&&xt.nChanges&&xt.nChangesAnim&&(xt.anim=xt.nChanges===xt.nChangesAnim?"all":"some"),xt),Tt=function(ht,Ge,He,ut,tt,xt){var At=Ge.length===He.length;if(!tt&&!At)return{fullReplot:!0,calc:!0};var Mt,yt,Pt=_.traceFlags();Pt.arrays={},Pt.nChanges=0,Pt.nChangesAnim=0;var Ct={getValObject:function(Ut){var Bt=i.getTraceValObject(yt,Ut);return!yt._module.animatable&&Bt.anim&&(Bt.anim=!1),Bt},flags:Pt,immutable:ut,transition:tt,newDataRevision:xt,gd:ht},Dt={};for(Mt=0;Mt<Ge.length;Mt++)if(He[Mt]){if(r.hasMakesDataTransform(yt=He[Mt]._fullInput)&&(yt=He[Mt]),Dt[yt.uid])continue;Dt[yt.uid]=1,ce(Ge[Mt]._fullInput,yt,[],Ct)}return(Pt.calc||Pt.plot)&&(Pt.fullReplot=!0),tt&&Pt.nChanges&&Pt.nChangesAnim&&(Pt.anim=Pt.nChanges===Pt.nChangesAnim&&At?"all":"some"),Pt}(Ae,Me,Ke,ft,dt,kt.newDataRevision);if(ge(Ae)&&(kt.layoutReplot=!0),Tt.calc||kt.calc){Ae.calcdata=void 0;for(var lt=Object.getOwnPropertyNames(it),ot=0;ot<lt.length;ot++){var Rt=lt[ot],Vt=Rt.substring(0,5);if("xaxis"===Vt||"yaxis"===Vt){var Ht=it[Rt]._emptyCategories;Ht&&Ht()}}}else r.supplyDefaultsUpdateCalc(Ae.calcdata,Ke);var zt=[];if(je&&(Ae._transitionData={},r.createTransitionData(Ae),zt.push(function(){return F.addFrames(Ae,je)})),it.transition&&!ze&&(Tt.anim||kt.anim))kt.ticks&&zt.push(v.doTicksRelayout),r.doCalcdata(Ae),v.doAutoRangeAndConstraints(Ae),zt.push(function(){return r.transitionFromReact(Ae,Tt,kt,Le)});else if(Tt.fullReplot||kt.layoutReplot||ze)Ae._fullLayout._skipDefaults=!0,zt.push(F._doPlot);else{for(var Qe in kt.arrays){var nt=kt.arrays[Qe];if(nt.length){var We=t.getComponentMethod(Qe,"drawOne");if(We!==T.noop)for(var et=0;et<nt.length;et++)We(Ae,nt[et]);else{var gt=t.getComponentMethod(Qe,"draw");if(gt===T.noop)throw new Error("cannot draw components: "+Qe);gt(Ae)}}}zt.push(r.previousPromises),Tt.style&&zt.push(v.doTraceStyle),(Tt.colorbars||kt.colorbars)&&zt.push(v.doColorBars),kt.legend&&zt.push(v.doLegend),kt.layoutstyle&&zt.push(v.layoutStyles),kt.axrange&&$(zt),kt.ticks&&zt.push(v.doTicksRelayout),kt.modebar&&zt.push(v.doModeBar),kt.camera&&zt.push(v.doCamera),zt.push(w)}zt.push(r.rehover,r.redrag,r.reselect),(ve=T.syncOrAsync(zt,Ae))&&ve.then||(ve=Promise.resolve(Ae))}else ve=F.newPlot(Ae,Ce,Oe,Ne);return ve.then(function(){return Ae.emit("plotly_react",{data:Ce,layout:Oe}),Ae})},F.redraw=function(Ae){if(Ae=T.getGraphDiv(Ae),!T.isPlotDiv(Ae))throw new Error("This element is not a Plotly plot: "+Ae);return x.cleanData(Ae.data),x.cleanLayout(Ae.layout),Ae.calcdata=void 0,F._doPlot(Ae).then(function(){return Ae.emit("plotly_redraw"),Ae})},F.relayout=ne,F.restyle=Z,F.setPlotConfig=function(Ae){return T.extendFlat(m,Ae)},F.update=we,F._guiRelayout=Te(ne),F._guiRestyle=Te(Z),F._guiUpdate=Te(we),F._storeDirectGUIEdit=function(Ae,Ce,Oe){for(var Ne in Oe)W(Ne,b(Ae,Ne).get(),Oe[Ne],Ce)}},20556:function(ie){"use strict";var F={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},e={};(function S(k,o){for(var T in k){var b=k[T];b.valType?o[T]=b.dflt:(o[T]||(o[T]={}),S(b,o[T]))}})(F,e),ie.exports={configAttributes:F,dfltConfig:e}},73060:function(ie,F,e){"use strict";var S=e(24040),k=e(3400),o=e(45464),T=e(64859),b=e(16672),p=e(85656),l=e(20556).configAttributes,t=e(67824),i=k.extendDeepAll,r=k.isPlainObject,n=k.isArrayOrTypedArray,a=k.nestedProperty,s=k.valObjectMeta,c="_isSubplotObj",h="_isLinkedToArray",u="_deprecated",y=[c,h,"_arrayAttrRegexps",u];function d(f,C,w){if(!f)return!1;if(f._isLinkedToArray)if(m(C[w]))w++;else if(w<C.length)return!1;for(;w<C.length;w++){var E=f[C[w]];if(!r(E)||(f=E,w===C.length-1))break;if(f._isLinkedToArray){if(!m(C[++w]))return!1}else if("info_array"===f.valType){var P=C[++w];if(!m(P))return!1;var L=f.items;if(Array.isArray(L)){if(P>=L.length)return!1;if(2===f.dimensions){if(w++,C.length===w)return f;var O=C[w];if(!m(O))return!1;f=L[P][O]}else f=L[P]}else f=L}}return f}function m(f){return f===Math.round(f)&&f>=0}function g(){var f,C,w={};for(f in i(w,T),S.subplotsRegistry)if((C=S.subplotsRegistry[f]).layoutAttributes)if(Array.isArray(C.attr))for(var E=0;E<C.attr.length;E++)v(w,C,C.attr[E]);else v(w,C,"subplot"===C.attr?C.name:C.attr);for(f in S.componentsRegistry){var P=(C=S.componentsRegistry[f]).schema;if(P&&(P.subplots||P.layout)){var L=P.subplots;if(L&&L.xaxis&&!L.yaxis)for(var O in L.xaxis)delete w.yaxis[O];delete w.xaxis.shift,delete w.xaxis.autoshift}else"colorscale"===C.name?i(w,C.layoutAttributes):C.layoutAttributes&&_(w,C.layoutAttributes,C.name)}return{layoutAttributes:x(w)}}function x(f){return F.crawl(f,function(w,E,P){F.isValObject(w)?!0!==w.arrayOk&&"data_array"!==w.valType||(P[E+"src"]={valType:"string",editType:"none"}):r(w)&&(w.role="object")}),F.crawl(f,function(w,E,P){if(w){var L=w[h];L&&(delete w[h],P[E]={items:{}},P[E].items[L]=w,P[E].role="object")}}),function(C){!function w(E){for(var P in E)if(r(E[P]))w(E[P]);else if(Array.isArray(E[P]))for(var L=0;L<E[P].length;L++)w(E[P][L]);else E[P]instanceof RegExp&&(E[P]=E[P].toString())}(C)}(f),f}function v(f,C,w){var E=a(f,w),P=i({},C.layoutAttributes);P[c]=!0,E.set(P)}function _(f,C,w){var E=a(f,w);E.set(i(E.get()||{},C))}F.IS_SUBPLOT_OBJ=c,F.IS_LINKED_TO_ARRAY=h,F.DEPRECATED=u,F.UNDERSCORE_ATTRS=y,F.get=function(){var f={};S.allTypes.forEach(function(E){f[E]=function(P){var L,O;O=(L=S.modules[P]._module).basePlotModule;var z={type:null},V=i({},o),R=i({},L.attributes);F.crawl(R,function(N,G,W,ae,re){a(V,re).set(void 0),void 0===N&&a(R,re).set(void 0)}),i(z,V),S.traceIs(P,"noOpacity")&&delete z.opacity,S.traceIs(P,"showLegend")||(delete z.showlegend,delete z.legendgroup),S.traceIs(P,"noHover")&&(delete z.hoverinfo,delete z.hoverlabel),L.selectPoints||delete z.selectedpoints,i(z,R),O.attributes&&i(z,O.attributes),z.type=P;var U={meta:L.meta||{},categories:L.categories||{},animatable:!!L.animatable,type:P,attributes:x(z)};if(L.layoutAttributes){var Z={};i(Z,L.layoutAttributes),U.layoutAttributes=x(Z)}return L.animatable||F.crawl(U,function(N){F.isValObject(N)&&"anim"in N&&delete N.anim}),U}(E)});var C,w={};return Object.keys(S.transformsRegistry).forEach(function(E){var P,O;w[E]=(O=i({},S.transformsRegistry[P=E].attributes),Object.keys(S.componentsRegistry).forEach(function(z){var V=S.componentsRegistry[z];V.schema&&V.schema.transforms&&V.schema.transforms[P]&&Object.keys(V.schema.transforms[P]).forEach(function(R){_(O,V.schema.transforms[P][R],R)})}),{attributes:x(O)})}),{defs:{valObjects:s,metaKeys:y.concat(["description","role","editType","impliedEdits"]),editType:{traces:t.traces,layout:t.layout},impliedEdits:{}},traces:f,layout:g(),transforms:w,frames:(C={frames:i({},b)},x(C),C.frames),animation:x(p),config:x(l)}},F.crawl=function(f,C,w,E){var P=w||0;E=E||"",Object.keys(f).forEach(function(L){var O=f[L];if(-1===y.indexOf(L)){var z=(E?E+".":"")+L;C(O,L,f,P,z),F.isValObject(O)||r(O)&&"impliedEdits"!==L&&F.crawl(O,C,P+1,z)}})},F.isValObject=function(f){return f&&void 0!==f.valType},F.findArrayAttributes=function(f){var C,w,E=[],P=[],L=[];function O(N,G,W,ae){P=P.slice(0,ae).concat([G]),L=L.slice(0,ae).concat([N&&N._isLinkedToArray]),N&&("data_array"===N.valType||!0===N.arrayOk)&&("colorbar"!==P[ae-1]||"ticktext"!==G&&"tickvals"!==G)&&z(C,0,"")}function z(N,G,W){var ae=N[P[G]],re=W+P[G];if(G===P.length-1)n(ae)&&E.push(w+re);else if(L[G]){if(Array.isArray(ae))for(var ne=0;ne<ae.length;ne++)r(ae[ne])&&z(ae[ne],G+1,re+"["+ne+"].")}else r(ae)&&z(ae,G+1,re+".")}C=f,w="",F.crawl(o,O),f._module&&f._module.attributes&&F.crawl(f._module.attributes,O);var V=f.transforms;if(V)for(var R=0;R<V.length;R++){var U=V[R],Z=U._module;Z&&(w="transforms["+R+"].",C=U,F.crawl(Z.attributes,O))}return E},F.getTraceValObject=function(f,C){var w,E,P=C[0],L=1;if("transforms"===P){if(1===C.length)return o.transforms;var O=f.transforms;if(!Array.isArray(O)||!O.length)return!1;var z=C[1];if(!m(z)||z>=O.length)return!1;E=(w=(S.transformsRegistry[O[z].type]||{}).attributes)&&w[C[2]],L=3}else{var V=f._module;if(V||(V=(S.modules[f.type||o.type.dflt]||{})._module),!V)return!1;if(!(E=(w=V.attributes)&&w[P])){var R=V.basePlotModule;R&&R.attributes&&(E=R.attributes[P])}E||(E=o[P])}return d(E,C,L)},F.getLayoutValObject=function(f,C){return d(function(E,P){var L,O,z,V,R=E._basePlotModules;if(R){var U;for(L=0;L<R.length;L++){if((z=R[L]).attrRegex&&z.attrRegex.test(P)){if(z.layoutAttrOverrides)return z.layoutAttrOverrides;!U&&z.layoutAttributes&&(U=z.layoutAttributes)}var Z=z.baseLayoutAttrOverrides;if(Z&&P in Z)return Z[P]}if(U)return U}var N=E._modules;if(N)for(L=0;L<N.length;L++)if((V=N[L].layoutAttributes)&&P in V)return V[P];for(O in S.componentsRegistry){if("colorscale"===(z=S.componentsRegistry[O]).name&&0===P.indexOf("coloraxis"))return z.layoutAttributes[P];if(!z.schema&&P===z.name)return z.layoutAttributes}return P in T&&T[P]}(f,C[0]),C,1)}},31780:function(ie,F,e){"use strict";var S=e(3400),k=e(45464),o="templateitemname",T={name:{valType:"string",editType:"none"}};function b(l){return l&&"string"==typeof l}function p(l){return"s"!==l.charAt(l.length-1)&&S.warn("bad argument to arrayDefaultKey: "+l),l.substr(0,l.length-1)+"defaults"}T[o]={valType:"string",editType:"calc"},F.templatedArray=function(l,t){return t._isLinkedToArray=l,t.name=T.name,t[o]=T[o],t},F.traceTemplater=function(l){var t,i,r={};for(t in l)i=l[t],Array.isArray(i)&&i.length&&(r[t]=0);return{newTrace:function(n){var a={type:t=S.coerce(n,{},k,"type"),_template:null};if(t in r){var s=r[t]%(i=l[t]).length;r[t]++,a._template=i[s]}return a}}},F.newContainer=function(l,t,i){var r=l._template,n=r&&(r[t]||i&&r[i]);return S.isPlainObject(n)||(n=null),l[t]={_template:n}},F.arrayTemplater=function(l,t,i){var r=l._template,n=r&&r[p(t)],a=r&&r[t];Array.isArray(a)&&a.length||(a=[]);var s={};return{newItem:function(c){var h={name:c.name,_input:c},u=h[o]=c[o];if(!b(u))return h._template=n,h;for(var y=0;y<a.length;y++){var d=a[y];if(d.name===u)return s[u]=1,h._template=d,h}return h[i]=c[i]||!1,h._template=!1,h},defaultItems:function(){for(var c=[],h=0;h<a.length;h++){var u=a[h],y=u.name;if(b(y)&&!s[y]){var d={_template:u,name:y,_input:{_templateitemname:y}};d[o]=u[o],c.push(d),s[y]=1}}return c}}},F.arrayDefaultKey=p,F.arrayEditor=function(l,t,i){var r=(S.nestedProperty(l,t).get()||[]).length,n=i._index,a=n>=r&&(i._input||{})._templateitemname;a&&(n=r);var s,c=t+"["+n+"]";function h(){s={},a&&(s[c]={},s[c][o]=a)}function u(d,m){a?S.nestedProperty(s[c],d).set(m):s[c+"."+d]=m}function y(){var d=s;return h(),d}return h(),{modifyBase:function(d,m){s[d]=m},modifyItem:u,getUpdateObj:y,applyUpdate:function(d,m){d&&u(d,m);var g=y();for(var x in g)S.nestedProperty(l,x).set(g[x])}}}},39172:function(ie,F,e){"use strict";var S=e(33428),k=e(24040),o=e(7316),T=e(3400),b=e(72736),p=e(73696),l=e(76308),t=e(43616),i=e(81668),r=e(45460),n=e(54460),a=e(84284),s=e(71888),c=s.enforce,h=s.clean,u=e(19280).doAutoRange,y="start";function d(_,f,C){for(var w=0;w<C.length;w++){var E=C[w][0],P=C[w][1];if(!(E[0]>=_[1]||E[1]<=_[0])&&P[0]<f[1]&&P[1]>f[0])return!0}return!1}function m(_){var f,C,w,E,P,L,O=_._fullLayout,z=O._size,V=z.p,R=n.list(_,"",!0);if(O._paperdiv.style({width:_._context.responsive&&O.autosize&&!_._context._hasZeroWidth&&!_.layout.width?"100%":O.width+"px",height:_._context.responsive&&O.autosize&&!_._context._hasZeroHeight&&!_.layout.height?"100%":O.height+"px"}).selectAll(".main-svg").call(t.setSize,O.width,O.height),_._context.setBackground(_,O.paper_bgcolor),F.drawMainTitle(_),r.manage(_),!O._has("cartesian"))return o.previousPromises(_);function U(ze,qe,Ke){var it=ze._lw/2;return"x"===ze._id.charAt(0)?qe?"top"===Ke?qe._offset-V-it:qe._offset+qe._length+V+it:z.t+z.h*(1-(ze.position||0))+it%1:qe?"right"===Ke?qe._offset+qe._length+V+it:qe._offset-V-it:z.l+z.w*(ze.position||0)+it%1}for(f=0;f<R.length;f++){var Z=(E=R[f])._anchorAxis;E._linepositions={},E._lw=t.crispRound(_,E.linewidth,1),E._mainLinePosition=U(E,Z,E.side),E._mainMirrorPosition=E.mirror&&Z?U(E,Z,a.OPPOSITE_SIDE[E.side]):null}var N=[],G=[],W=[],ae=1===l.opacity(O.paper_bgcolor)&&1===l.opacity(O.plot_bgcolor)&&O.paper_bgcolor===O.plot_bgcolor;for(C in O._plots)if((w=O._plots[C]).mainplot)w.bg&&w.bg.remove(),w.bg=void 0;else{var re=w.xaxis.domain,ne=w.yaxis.domain,Q=w.plotgroup;if(d(re,ne,W)){var $=Q.node(),X=w.bg=T.ensureSingle(Q,"rect","bg");$.insertBefore(X.node(),$.childNodes[0]),G.push(C)}else Q.select("rect.bg").remove(),W.push([re,ne]),ae||(N.push(C),G.push(C))}var oe,fe,ue,ge,we,Te,xe,ye,_e,Ie,De,be,he,ce=O._bgLayer.selectAll(".bg").data(N);for(ce.enter().append("rect").classed("bg",!0),ce.exit().remove(),ce.each(function(ze){O._plots[ze].bg=S.select(this)}),f=0;f<G.length;f++)P=(w=O._plots[G[f]]).xaxis,L=w.yaxis,w.bg&&void 0!==P._offset&&void 0!==L._offset&&w.bg.call(t.setRect,P._offset-V,L._offset-V,P._length+2*V,L._length+2*V).call(l.fill,O.plot_bgcolor).style("stroke-width",0);if(!O._hasOnlyLargeSploms)for(C in O._plots){P=(w=O._plots[C]).xaxis,L=w.yaxis;var me,Pe,Ae=w.clipId="clip"+O._uid+C+"plot",Ce=T.ensureSingleById(O._clips,"clipPath",Ae,function(ze){ze.classed("plotclip",!0).append("rect")});w.clipRect=Ce.select("rect").attr({width:P._length,height:L._length}),t.setTranslate(w.plot,P._offset,L._offset),w._hasClipOnAxisFalse?(me=null,Pe=Ae):(me=Ae,Pe=null),t.setClipUrl(w.plot,me,_),w.layerClipId=Pe}function Oe(ze){return"M"+oe+","+ze+"H"+fe}function Ne(ze){return"M"+P._offset+","+ze+"h"+P._length}function je(ze){return"M"+ze+","+ye+"V"+xe}function ve(ze){return void 0!==L._shift&&(ze+=L._shift),"M"+ze+","+L._offset+"v"+L._length}function Me(ze,qe,Ke){if(!ze.showline||C!==ze._mainSubplot)return"";if(!ze._anchorAxis)return Ke(ze._mainLinePosition);var it=qe(ze._mainLinePosition);return ze.mirror&&(it+=qe(ze._mainMirrorPosition)),it}for(C in O._plots){L=(w=O._plots[C]).yaxis;var Le="M0,0";g(P=w.xaxis,C)&&(we=v(P,"left",L,R),oe=P._offset-(we?V+we:0),Te=v(P,"right",L,R),fe=P._offset+P._length+(Te?V+Te:0),ue=U(P,L,"bottom"),ge=U(P,L,"top"),!(he=!P._anchorAxis||C!==P._mainSubplot)||"allticks"!==P.mirror&&"all"!==P.mirror||(P._linepositions[C]=[ue,ge]),Le=Me(P,Oe,Ne),he&&P.showline&&("all"===P.mirror||"allticks"===P.mirror)&&(Le+=Oe(ue)+Oe(ge)),w.xlines.style("stroke-width",P._lw+"px").call(l.stroke,P.showline?P.linecolor:"rgba(0,0,0,0)")),w.xlines.attr("d",Le);var Ue="M0,0";g(L,C)&&(De=v(L,"bottom",P,R),xe=L._offset+L._length+(De?V:0),be=v(L,"top",P,R),ye=L._offset-(be?V:0),_e=U(L,P,"left"),Ie=U(L,P,"right"),!(he=!L._anchorAxis||C!==L._mainSubplot)||"allticks"!==L.mirror&&"all"!==L.mirror||(L._linepositions[C]=[_e,Ie]),Ue=Me(L,je,ve),he&&L.showline&&("all"===L.mirror||"allticks"===L.mirror)&&(Ue+=je(_e)+je(Ie)),w.ylines.style("stroke-width",L._lw+"px").call(l.stroke,L.showline?L.linecolor:"rgba(0,0,0,0)")),w.ylines.attr("d",Ue)}return n.makeClipPaths(_),o.previousPromises(_)}function g(_,f){return(_.ticks||_.showline)&&(f===_._mainSubplot||"all"===_.mirror||"allticks"===_.mirror)}function x(_,f,C){if(!C.showline||!C._lw)return!1;if("all"===C.mirror||"allticks"===C.mirror)return!0;var w=C._anchorAxis;if(!w)return!1;var E=a.FROM_BL[f];return C.side===f?w.domain[E]===_.domain[E]:C.mirror&&w.domain[1-E]===_.domain[1-E]}function v(_,f,C,w){if(x(_,f,C))return C._lw;for(var E=0;E<w.length;E++){var P=w[E];if(P._mainAxis===C._mainAxis&&x(_,f,P))return P._lw}return 0}F.layoutStyles=function(_){return T.syncOrAsync([o.doAutoMargin,m],_)},F.drawMainTitle=function(_){var f,G,W,C=_._fullLayout.title,w=_._fullLayout,E=(W="middle",T.isRightAnchor(G=w.title)?W="end":T.isLeftAnchor(G)&&(W=y),W),P=function(N){var G=N.title,W="0em";return T.isTopAnchor(G)?W=a.CAP_SHIFT+"em":T.isMiddleAnchor(G)&&(W=a.MID_SHIFT+"em"),W}(w),L=function(N,G){var W=N.title,ae=N._size,re=0;return"0em"!==G&&G?G===a.CAP_SHIFT+"em"&&(re=W.pad.t):re=-W.pad.b,"auto"===W.y?ae.t/2:"paper"===W.yref?ae.t+ae.h-ae.h*W.y+re:N.height-N.height*W.y+re}(w,P),O=function(N,G){var W=N.title,ae=N._size,re=0;return G===y?re=W.pad.l:"end"===G&&(re=-W.pad.r),"paper"===W.xref?ae.l+ae.w*W.x+re:N.width*W.x+re}(w,E);if(i.draw(_,"gtitle",{propContainer:w,propName:"title.text",placeholder:w._dfltTitle.plot,attributes:{x:O,y:L,"text-anchor":E,dy:P}}),C.text&&C.automargin){var z=S.selectAll(".gtitle"),V=t.bBox(z.node()).height,R=function(N,G,W){var oe,fe,ue,ge,we,ae=G.y,ne=ae>.5?"t":"b",$=0;return"paper"===G.yref?$=W+G.pad.t+G.pad.b:"container"===G.yref&&(oe=ae,ue=N._fullLayout.height,ge=W,we=0,"middle"===(fe=G.yanchor)&&(we+=ge/2),"t"===ne?("top"===fe&&(we+=ge),we+=ue-oe*ue):("bottom"===fe&&(we+=ge),we+=oe*ue),$=we+G.pad.t+G.pad.b),$>N._fullLayout.margin[ne]?$:0}(_,C,V);if(R>0){(function(N,G,W,ae){var oe,fe,ue,ge,we,Te,xe,ye,re="title.automargin",ne=N._fullLayout.title,Q=ne.y>.5?"t":"b",$={x:ne.x,y:ne.y,t:0,b:0},X={};"paper"===ne.yref&&(oe=N,ue=Q,ge=G,we=ae,Te="paper"===(fe=ne).yref?oe._fullLayout._size.h:oe._fullLayout.height,xe=T.isTopAnchor(fe)?ge:ge-we,ye="b"===ue?Te-xe:xe,!(T.isTopAnchor(fe)&&"t"===ue||T.isBottomAnchor(fe)&&"b"===ue)&&ye<we)?$[Q]=W:"container"===ne.yref&&(X[Q]=W,N._fullLayout._reservedMargin[re]=X),o.allowAutoMargin(N,re),o.autoMargin(N,re,$)})(_,L,R,V),z.attr({x:O,y:L,"text-anchor":E,dy:(f=C.yanchor,"top"===f?a.CAP_SHIFT+.3+"em":"bottom"===f?"-0.3em":a.MID_SHIFT+"em")}).call(b.positionText,O,L);var U=(C.text.match(b.BR_TAG_ALL)||[]).length;if(U){var Z=a.LINE_SPACING*U+a.MID_SHIFT;0===C.y&&(Z=-Z),z.selectAll(".line").each(function(){var N=+this.getAttribute("dy").slice(0,-2)-Z+"em";this.setAttribute("dy",N)})}}}},F.doTraceStyle=function(_){var f,C=_.calcdata,w=[];for(f=0;f<C.length;f++){var E=C[f],P=E[0]||{},L=P.trace||{},O=L._module||{},z=O.arraysToCalcdata;z&&z(E,L);var V=O.editStyle;V&&w.push({fn:V,cd0:P})}if(w.length){for(f=0;f<w.length;f++){var R=w[f];R.fn(_,R.cd0)}p(_),F.redrawReglTraces(_)}return o.style(_),k.getComponentMethod("legend","draw")(_),o.previousPromises(_)},F.doColorBars=function(_){return k.getComponentMethod("colorbar","draw")(_),o.previousPromises(_)},F.layoutReplot=function(_){var f=_.layout;return _.layout=void 0,k.call("_doPlot",_,"",f)},F.doLegend=function(_){return k.getComponentMethod("legend","draw")(_),o.previousPromises(_)},F.doTicksRelayout=function(_){return n.draw(_,"redraw"),_._fullLayout._hasOnlyLargeSploms&&(k.subplotsRegistry.splom.updateGrid(_),p(_),F.redrawReglTraces(_)),F.drawMainTitle(_),o.previousPromises(_)},F.doModeBar=function(_){var f=_._fullLayout;r.manage(_);for(var C=0;C<f._basePlotModules.length;C++){var w=f._basePlotModules[C].updateFx;w&&w(_)}return o.previousPromises(_)},F.doCamera=function(_){for(var f=_._fullLayout,C=f._subplots.gl3d,w=0;w<C.length;w++){var E=f[C[w]];E._scene.setViewport(E)}},F.drawData=function(_){var f=_._fullLayout;p(_);for(var C=f._basePlotModules,w=0;w<C.length;w++)C[w].plot(_);return F.redrawReglTraces(_),o.style(_),k.getComponentMethod("selections","draw")(_),k.getComponentMethod("shapes","draw")(_),k.getComponentMethod("annotations","draw")(_),k.getComponentMethod("images","draw")(_),f._replotting=!1,o.previousPromises(_)},F.redrawReglTraces=function(_){var f=_._fullLayout;if(f._has("regl")){var C,w,E=_._fullData,P=[],L=[];for(f._hasOnlyLargeSploms&&f._splomGrid.draw(),C=0;C<E.length;C++){var O=E[C];!0===O.visible&&0!==O._length&&("splom"===O.type?f._splomScenes[O.uid].draw():"scattergl"===O.type?T.pushUnique(P,O.xaxis+O.yaxis):"scatterpolargl"===O.type&&T.pushUnique(L,O.subplot))}for(C=0;C<P.length;C++)(w=f._plots[P[C]])._scene&&w._scene.draw();for(C=0;C<L.length;C++)(w=f[L[C]]._subplot)._scene&&w._scene.draw()}},F.doAutoRangeAndConstraints=function(_){for(var f,C=n.list(_,"",!0),w={},E=0;E<C.length;E++)if(!w[(f=C[E])._id]){w[f._id]=1,h(_,f),u(_,f);var P=f._matchGroup;if(P)for(var L in P){var O=n.getFromId(_,L);u(_,O,f.range),w[L]=1}}c(_)},F.finalDraw=function(_){k.getComponentMethod("rangeslider","draw")(_),k.getComponentMethod("rangeselector","draw")(_)},F.drawMarginPushers=function(_){k.getComponentMethod("legend","draw")(_),k.getComponentMethod("rangeselector","draw")(_),k.getComponentMethod("sliders","draw")(_),k.getComponentMethod("updatemenus","draw")(_),k.getComponentMethod("colorbar","draw")(_)}},94828:function(ie,F,e){"use strict";var S=e(3400),k=S.isPlainObject,o=e(73060),T=e(7316),b=e(45464),p=e(31780),l=e(20556).dfltConfig;function t(u,y){u=S.extendDeep({},u);var d,m,g=Object.keys(u).sort();function x(w,E,P){if(k(E)&&k(w))t(w,E);else if(Array.isArray(E)&&Array.isArray(w)){var L=p.arrayTemplater({_template:u},P);for(m=0;m<E.length;m++){var O=E[m],z=L.newItem(O)._template;z&&t(z,O)}var V=L.defaultItems();for(m=0;m<V.length;m++)E.push(V[m]._template);for(m=0;m<E.length;m++)delete E[m].templateitemname}}for(d=0;d<g.length;d++){var v=g[d],_=u[v];if(v in y?x(_,y[v],v):y[v]=_,i(v)===v)for(var f in y){var C=i(f);f===C||C!==v||f in u||x(_,y[f],v)}}}function i(u){return u.replace(/[0-9]+$/,"")}function r(u,y,d,m,g){var x=g&&d(g);for(var v in u){var _=u[v],f=s(u,v,m),C=s(u,v,g),w=d(C);if(!w){var E=i(v);E!==v&&(w=d(C=s(u,E,g)))}if(!(x&&x===w||!w||w._noTemplating||"data_array"===w.valType||w.arrayOk&&Array.isArray(_)))if(!w.valType&&k(_))r(_,y,d,f,C);else if(w._isLinkedToArray&&Array.isArray(_))for(var P=!1,L=0,O={},z=0;z<_.length;z++){var V=_[z];if(k(V)){var R=V.name;if(R)O[R]||(r(V,y,d,s(_,L,f),s(_,L,C)),L++,O[R]=1);else if(!P){var U=s(u,p.arrayDefaultKey(v),m),Z=s(_,L,f);r(V,y,d,Z,s(_,L,C));var N=S.nestedProperty(y,Z);S.nestedProperty(y,U).set(N.get()),N.set(null),P=!0}}}else S.nestedProperty(y,f).set(_)}}function n(u,y){return o.getLayoutValObject(u,S.nestedProperty({},y).parts)}function a(u,y){return o.getTraceValObject(u,S.nestedProperty({},y).parts)}function s(u,y,d){return d?Array.isArray(u)?d+"["+y+"]":d+"."+y:y}function c(u){for(var y=0;y<u.length;y++)if(k(u[y]))return!0}function h(u){var y;switch(u.code){case"data":y="The template has no key data.";break;case"layout":y="The template has no key layout.";break;case"missing":y=u.path?"There are no templates for item "+u.path+" with name "+u.templateitemname:"There are no templates for trace "+u.index+", of type "+u.traceType+".";break;case"unused":y=u.path?"The template item at "+u.path+" was not used in constructing the plot.":u.dataCount?"Some of the templates of type "+u.traceType+" were not used. The template has "+u.templateCount+" traces, the data only has "+u.dataCount+" of this type.":"The template has "+u.templateCount+" traces of type "+u.traceType+" but there are none in the data.";break;case"reused":y="Some of the templates of type "+u.traceType+" were used more than once. The template has "+u.templateCount+" traces, the data has "+u.dataCount+" of this type."}return u.msg=y,u}F.makeTemplate=function(u){u=S.isPlainObject(u)?u:S.getGraphDiv(u),u=S.extendDeep({_context:l},{data:u.data,layout:u.layout}),T.supplyDefaults(u);var y=u.data||[],d=u.layout||{};d._basePlotModules=u._fullLayout._basePlotModules,d._modules=u._fullLayout._modules;var m={data:{},layout:{}};y.forEach(function(L){var O={};r(L,O,a.bind(null,L));var z=S.coerce(L,{},b,"type"),V=m.data[z];V||(V=m.data[z]=[]),V.push(O)}),r(d,m.layout,n.bind(null,d)),delete m.layout.template;var g=d.template;if(k(g)){var x,v,_,f,C,w,E=g.layout;k(E)&&t(E,m.layout);var P=g.data;if(k(P)){for(v in m.data)if(_=P[v],Array.isArray(_)){for(w=(C=m.data[v]).length,f=_.length,x=0;x<w;x++)t(_[x%f],C[x]);for(x=w;x<f;x++)C.push(S.extendDeep({},_[x]))}for(v in P)v in m.data||(m.data[v]=S.extendDeep([],P[v]))}}return m},F.validateTemplate=function(u,y){var d=S.extendDeep({},{_context:l,data:u.data,layout:u.layout}),m=d.layout||{};k(y)||(y=m.template||{});var g=y.layout,x=y.data,v=[];d.layout=m,d.layout.template=y,T.supplyDefaults(d);var _=d._fullLayout,f=d._fullData,C={};if(k(g)?(function V(R,U){for(var Z in R)if("_"!==Z.charAt(0)&&k(R[Z])){var N,G=i(Z),W=[];for(N=0;N<U.length;N++)W.push(s(R,Z,U[N])),G!==Z&&W.push(s(R,G,U[N]));for(N=0;N<W.length;N++)C[W[N]]=1;V(R[Z],W)}}(_,["layout"]),function V(R,U){for(var Z in R)if(-1===Z.indexOf("defaults")&&k(R[Z])){var N=s(R,Z,U);C[N]?V(R[Z],N):v.push({code:"unused",path:N})}}(g,"layout")):v.push({code:"layout"}),k(x)){for(var w,E={},P=0;P<f.length;P++){var L=f[P];E[w=L.type]=(E[w]||0)+1,L._fullInput._template||v.push({code:"missing",index:L._fullInput.index,traceType:w})}for(w in x){var O=x[w].length,z=E[w]||0;O>z?v.push({code:"unused",traceType:w,templateCount:O,dataCount:z}):z>O&&v.push({code:"reused",traceType:w,templateCount:O,dataCount:z})}}else v.push({code:"data"});if(function V(R,U){for(var Z in R)if("_"!==Z.charAt(0)){var N=R[Z],G=s(R,Z,U);k(N)?(Array.isArray(R)&&!1===N._template&&N.templateitemname&&v.push({code:"missing",path:G,templateitemname:N.templateitemname}),V(N,G)):Array.isArray(N)&&c(N)&&V(N,G)}}({data:f,layout:_},""),v.length)return v.map(h)}},67024:function(ie,F,e){"use strict";var S=e(38248),k=e(36424),o=e(7316),T=e(3400),b=e(81792),p=e(37164),l=e(63268),t=e(25788).version,i={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};ie.exports=function(r,n){var a,s,c,h;function u(z){return!(z in n)||T.validate(n[z],i[z])}if(n=n||{},T.isPlainObject(r)?(a=r.data||[],s=r.layout||{},c=r.config||{},h={}):(r=T.getGraphDiv(r),a=T.extendDeep([],r.data),s=T.extendDeep({},r.layout),c=r._context,h=r._fullLayout||{}),!u("width")&&null!==n.width||!u("height")&&null!==n.height)throw new Error("Height and width should be pixel values.");if(!u("format"))throw new Error("Export format is not "+T.join2(i.format.values,", "," or ")+".");var y={};function d(z,V){return T.coerce(n,y,i,z,V)}var m=d("format"),g=d("width"),x=d("height"),v=d("scale"),_=d("setBackground"),f=d("imageDataOnly"),C=document.createElement("div");C.style.position="absolute",C.style.left="-5000px",document.body.appendChild(C);var w=T.extendFlat({},s);g?w.width=g:null===n.width&&S(h.width)&&(w.width=h.width),x?w.height=x:null===n.height&&S(h.height)&&(w.height=h.height);var E=T.extendFlat({},c,{_exportedPlot:!0,staticPlot:!0,setBackground:_}),P=b.getRedrawFunc(C);function L(){return new Promise(function(z){setTimeout(z,b.getDelay(C._fullLayout))})}function O(){return new Promise(function(z,V){var R=p(C,m,v),U=C._fullLayout.width,Z=C._fullLayout.height;function N(){k.purge(C),document.body.removeChild(C)}if("full-json"===m){var G=o.graphJson(C,!1,"keepdata","object",!0,!0);return G.version=t,G=JSON.stringify(G),N(),z(f?G:b.encodeJSON(G))}if(N(),"svg"===m)return z(f?R:b.encodeSVG(R));var W=document.createElement("canvas");W.id=T.randstr(),l({format:m,width:U,height:Z,scale:v,canvas:W,svg:R,promise:!0}).then(z).catch(V)})}return new Promise(function(z,V){k.newPlot(C,a,w,E).then(P).then(L).then(O).then(function(R){var U;z((U=R,f?U.replace(b.IMAGE_URL_PREFIX,""):U))}).catch(function(R){V(R)})})}},21480:function(ie,F,e){"use strict";var S=e(3400),k=e(7316),o=e(73060),T=e(20556).dfltConfig,b=S.isPlainObject,p=Array.isArray,l=S.isArrayOrTypedArray;function t(u,y,d,m,g,x){x=x||[];for(var v=Object.keys(u),_=0;_<v.length;_++){var f=v[_];if("transforms"!==f){var C=x.slice();C.push(f);var w=u[f],E=y[f],P=s(d,f),L=(P||{}).valType,O="info_array"===L,z="colorscale"===L,V=(P||{}).items;if(a(d,f))if(b(w)&&b(E)&&"any"!==L)t(w,E,P,m,g,C);else if(O&&p(w)){w.length>E.length&&m.push(n("unused",g,C.concat(E.length)));var R,U,N,G,W=E.length,ae=Array.isArray(V);if(ae&&(W=Math.min(W,V.length)),2===P.dimensions)for(U=0;U<W;U++)if(p(w[U])){w[U].length>E[U].length&&m.push(n("unused",g,C.concat(U,E[U].length)));var re=E[U].length;for(R=0;R<(ae?Math.min(re,V[U].length):re);R++)G=E[U][R],S.validate(N=w[U][R],ae?V[U][R]:V)?G!==N&&G!==+N&&m.push(n("dynamic",g,C.concat(U,R),N,G)):m.push(n("value",g,C.concat(U,R),N))}else m.push(n("array",g,C.concat(U),w[U]));else for(U=0;U<W;U++)G=E[U],S.validate(N=w[U],ae?V[U]:V)?G!==N&&G!==+N&&m.push(n("dynamic",g,C.concat(U),N,G)):m.push(n("value",g,C.concat(U),N))}else if(P.items&&!O&&p(w)){var ne,Q,$=V[Object.keys(V)[0]],X=[];for(ne=0;ne<E.length;ne++){var oe=E[ne]._index||ne;if((Q=C.slice()).push(oe),b(w[oe])&&b(E[ne])){X.push(oe);var fe=w[oe],ue=E[ne];b(fe)&&!1!==fe.visible&&!1===ue.visible?m.push(n("invisible",g,Q)):t(fe,ue,$,m,g,Q)}}for(ne=0;ne<w.length;ne++)(Q=C.slice()).push(ne),b(w[ne])?-1===X.indexOf(ne)&&m.push(n("unused",g,Q)):m.push(n("object",g,Q,w[ne]))}else!b(w)&&b(E)?m.push(n("object",g,C,w)):l(w)||!l(E)||O||z?f in y?S.validate(w,P)?"enumerated"===P.valType&&(P.coerceNumber&&w!==+E||w!==E)&&m.push(n("dynamic",g,C,w,E)):m.push(n("value",g,C,w)):m.push(n("unused",g,C,w)):m.push(n("array",g,C,w));else m.push(n("schema",g,C))}}return m}ie.exports=function(u,y){void 0===u&&(u=[]),void 0===y&&(y={});var d,m,g=o.get(),x=[],v={_context:S.extendFlat({},T)};p(u)?(v.data=S.extendDeep([],u),d=u):(v.data=[],d=[],x.push(n("array","data"))),b(y)?(v.layout=S.extendDeep({},y),m=y):(v.layout={},m={},arguments.length>1&&x.push(n("object","layout"))),k.supplyDefaults(v);for(var _=v._fullData,f=d.length,C=0;C<f;C++){var w=d[C],E=["data",C];if(b(w)){var P=_[C],L=P.type,O=g.traces[L].attributes;O.type={valType:"enumerated",values:[L]},!1===P.visible&&!1!==w.visible&&x.push(n("invisible",E)),t(w,P,O,x,E);var z=w.transforms,V=P.transforms;if(z){p(z)||x.push(n("array",E,["transforms"])),E.push("transforms");for(var R=0;R<z.length;R++){var U=["transforms",R],Z=z[R].type;if(b(z[R])){var N=g.transforms[Z]?g.transforms[Z].attributes:{};N.type={valType:"enumerated",values:Object.keys(g.transforms)},t(z[R],V[R],N,x,E,U)}else x.push(n("object",E,U))}}}else x.push(n("object",E))}return t(m,v._fullLayout,function(ae,re){for(var ne=ae.layout.layoutAttributes,Q=0;Q<re.length;Q++){var $=re[Q],X=ae.traces[$.type],oe=X.layoutAttributes;oe&&S.extendFlat($.subplot?ne[X.attributes.subplot.dflt]:ne,oe)}return ne}(g,_),x,"layout"),0===x.length?void 0:x};var i={object:function(u,y){return("layout"===u&&""===y?"The layout argument":"data"===u[0]&&""===y?"Trace "+u[1]+" in the data argument":r(u)+"key "+y)+" must be linked to an object container"},array:function(u,y){return("data"===u?"The data argument":r(u)+"key "+y)+" must be linked to an array container"},schema:function(u,y){return r(u)+"key "+y+" is not part of the schema"},unused:function(u,y,d){var m=b(d)?"container":"key";return r(u)+m+" "+y+" did not get coerced"},dynamic:function(u,y,d,m){return[r(u)+"key",y,"(set to '"+d+"')","got reset to","'"+m+"'","during defaults."].join(" ")},invisible:function(u,y){return(y?r(u)+"item "+y:"Trace "+u[1])+" got defaulted to be not visible"},value:function(u,y,d){return[r(u)+"key "+y,"is set to an invalid value ("+d+")"].join(" ")}};function r(u){return p(u)?"In data trace "+u[1]+", ":"In "+u+", "}function n(u,y,d,m,g){var x,v;d=d||"",p(y)?(x=y[0],v=y[1]):(x=y,v=null);var _=function(C){if(!p(C))return String(C);for(var w="",E=0;E<C.length;E++){var P=C[E];"number"==typeof P?w=w.substr(0,w.length-1)+"["+P+"]":w+=P,E<C.length-1&&(w+=".")}return w}(d),f=i[u](y,_,m,g);return S.log(f),{code:u,container:x,trace:v,path:d,astr:_,msg:f}}function a(u,y){var d=h(y),m=d.keyMinusId;return!!(m in u&&u[m]._isSubplotObj&&d.id)||y in u}function s(u,y){return y in u?u[y]:u[h(y).keyMinusId]}var c=S.counterRegex("([a-z]+)");function h(u){var y=u.match(c);return{keyMinusId:y&&y[1],id:y&&y[2]}}},85656:function(ie){"use strict";ie.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},51272:function(ie,F,e){"use strict";var S=e(3400),k=e(31780);ie.exports=function(o,T,b){var p,l,t=b.name,i=b.inclusionAttr||"visible",r=T[t],n=S.isArrayOrTypedArray(o[t])?o[t]:[],a=T[t]=[],s=k.arrayTemplater(T,t,i);for(p=0;p<n.length;p++){var c=n[p];S.isPlainObject(c)?l=s.newItem(c):(l=s.newItem({}))[i]=!1,l._index=p,!1!==l[i]&&b.handleItemDefaults(c,l,T,b),a.push(l)}var h=s.defaultItems();for(p=0;p<h.length;p++)(l=h[p])._index=a.length,b.handleItemDefaults({},l,T,b,{}),a.push(l);if(S.isArrayOrTypedArray(r)){var u=Math.min(r.length,a.length);for(p=0;p<u;p++)S.relinkPrivateKeys(a[p],r[p])}return a}},45464:function(ie,F,e){"use strict";var S=e(25376),k=e(55756);ie.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:S({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:k.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},1220:function(ie,F,e){"use strict";var S=e(38248),k=e(3400),o=k.dateTime2ms,T=k.incrementMonth,b=e(39032).ONEAVGMONTH;ie.exports=function(p,l,t,i){if("date"!==l.type)return{vals:i};var r=p[t+"periodalignment"];if(!r)return{vals:i};var n,a=p[t+"period"];if(S(a)){if((a=+a)<=0)return{vals:i}}else if("string"==typeof a&&"M"===a.charAt(0)){var s=+a.substring(1);if(!(s>0&&Math.round(s)===s))return{vals:i};n=s}for(var c=l.calendar,h="start"===r,u="end"===r,d=o(p[t+"period0"],c)||0,m=[],g=[],x=[],v=i.length,_=0;_<v;_++){var f,C,w,E=i[_];if(n){for(f=Math.round((E-d)/(n*b)),w=T(d,n*f,c);w>E;)w=T(w,-n,c);for(;w<=E;)w=T(w,n,c);C=T(w,-n,c)}else{for(w=d+(f=Math.round((E-d)/a))*a;w>E;)w-=a;for(;w<=E;)w+=a;C=w-a}m[_]=h?C:u?w:(C+w)/2,g[_]=C,x[_]=w}return{vals:m,starts:g,ends:x}}},26720:function(ie){"use strict";ie.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},19280:function(ie,F,e){"use strict";var S=e(33428),k=e(38248),o=e(3400),T=e(39032).FP_SAFE,b=e(24040),p=e(43616),l=e(79811),t=l.getFromId,i=l.isLinked;function r(_,f){var C,w,E=[],P=_._fullLayout,L=a(P,f,0),O=a(P,f,1),z=c(_,f),V=z.min,R=z.max;if(0===V.length||0===R.length)return o.simpleMap(f.range,f.r2l);var U=V[0].val,Z=R[0].val;for(C=1;C<V.length&&U===Z;C++)U=Math.min(U,V[C].val);for(C=1;C<R.length&&U===Z;C++)Z=Math.max(Z,R[C].val);var N=f.autorange,G="reversed"===N||"min reversed"===N||"max reversed"===N;if(!G&&f.range){var W=o.simpleMap(f.range,f.r2l);G=W[1]<W[0]}"reversed"===f.autorange&&(f.autorange=!0);var ae,re,ne,Q,$,X,oe=f.rangemode,fe="tozero"===oe,ue="nonnegative"===oe,ge=f._length,we=ge/10,Te=0;for(C=0;C<V.length;C++)for(ae=V[C],w=0;w<R.length;w++)(X=(re=R[w]).val-ae.val-n(f,ae.val,re.val))>0&&(($=ge-L(ae)-O(re))>we?X/$>Te&&(ne=ae,Q=re,Te=X/$):X/ge>Te&&(ne={val:ae.val,nopad:1},Q={val:re.val,nopad:1},Te=X/ge));if(U===Z){var xe=U-1,ye=U+1;if(fe)if(0===U)E=[0,1];else{var _e=(U>0?R:V).reduce(function(De,be){return Math.max(De,O(be))},0),Ie=U/(1-Math.min(.5,_e/ge));E=U>0?[0,Ie]:[Ie,0]}else E=ue?[Math.max(0,xe),Math.max(1,ye)]:[xe,ye]}else fe?(ne.val>=0&&(ne={val:0,nopad:1}),Q.val<=0&&(Q={val:0,nopad:1})):ue&&(ne.val-Te*L(ne)<0&&(ne={val:0,nopad:1}),Q.val<=0&&(Q={val:1,nopad:1})),Te=(Q.val-ne.val-n(f,ae.val,re.val))/(ge-L(ne)-O(Q)),E=[ne.val-Te*L(ne),Q.val+Te*O(Q)];return E=v(E,f),f.limitRange&&f.limitRange(),G&&E.reverse(),o.simpleMap(E,f.l2r||Number)}function n(_,f,C){var w=0;if(_.rangebreaks)for(var E=_.locateBreaks(f,C),P=0;P<E.length;P++){var L=E[P];w+=L.max-L.min}return w}function a(_,f,C){var w=.05*f._length,E=f._anchorAxis||{};if(-1!==(f.ticklabelposition||"").indexOf("inside")||-1!==(E.ticklabelposition||"").indexOf("inside")){var P=f.isReversed();if(!P){var L=o.simpleMap(f.range,f.r2l);P=L[1]<L[0]}P&&(C=!C)}var O=0;return i(_,f._id)||(O=function(z,V,R){var U=0,Z="x"===V._id.charAt(0);for(var N in z._plots){var G=z._plots[N];if(V._id===G.xaxis._id||V._id===G.yaxis._id){var W=(Z?G.yaxis:G.xaxis)||{};if(-1!==(W.ticklabelposition||"").indexOf("inside")&&(!R&&("left"===W.side||"bottom"===W.side)||R&&("top"===W.side||"right"===W.side))){if(W._vals){var ae=o.deg2rad(W._tickAngles[W._id+"tick"]||0),re=Math.abs(Math.cos(ae)),ne=Math.abs(Math.sin(ae));W._vals[0].bb||W._selections[W._id+"tick"].each(function(ue){var ge=S.select(this);ge.select(".text-math-group").empty()&&(ue.bb=p.bBox(ge.node()))});for(var $=0;$<W._vals.length;$++){var X=W._vals[$].bb;if(X){var oe=2*s+X.width,fe=2*s+X.height;U=Math.max(U,Z?Math.max(oe*re,fe*ne):Math.max(fe*re,oe*ne))}}}"inside"===W.ticks&&"inside"===W.ticklabelposition&&(U+=W.ticklen||0)}}}return U}(_,f,C)),w=Math.max(O,w),"domain"===f.constrain&&f._inputDomain&&(w*=(f._inputDomain[1]-f._inputDomain[0])/(f.domain[1]-f.domain[0])),function(z){return z.nopad?0:z.pad+(z.extrapad?w:O)}}ie.exports={applyAutorangeOptions:v,getAutoRange:r,makePadFn:a,doAutoRange:function(_,f,C){if(f.setScale(),f.autorange){f.range=C?C.slice():r(_,f),f._r=f.range.slice(),f._rl=o.simpleMap(f._r,f.r2l);var w=f._input,E={};E[f._attr+".range"]=f.range,E[f._attr+".autorange"]=f.autorange,b.call("_storeDirectGUIEdit",_.layout,_._fullLayout._preGUI,E),w.range=f.range.slice(),w.autorange=f.autorange}var P=f._anchorAxis;if(P&&P.rangeslider){var L=P.rangeslider[f._name];L&&"auto"===L.rangemode&&(L.range=r(_,f)),P._input.rangeslider[f._name]=o.extendFlat({},L)}},findExtremes:function(_,f,C){C||(C={}),_._m||_.setScale();var w,E,P,L,O,z,V,R,U,Z=[],N=[],G=f.length,W=C.padded||!1,ae=C.tozero&&("linear"===_.type||"-"===_.type),re="log"===_.type,ne=!1,Q=C.vpadLinearized||!1;function $(xe){if(Array.isArray(xe))return ne=!0,function(_e){return Math.max(Number(xe[_e]||0),0)};var ye=Math.max(Number(xe||0),0);return function(){return ye}}var X=$((_._m>0?C.ppadplus:C.ppadminus)||C.ppad||0),oe=$((_._m>0?C.ppadminus:C.ppadplus)||C.ppad||0),fe=$(C.vpadplus||C.vpad),ue=$(C.vpadminus||C.vpad);if(!ne){if(R=1/0,U=-1/0,re)for(w=0;w<G;w++)(E=f[w])<R&&E>0&&(R=E),E>U&&E<T&&(U=E);else for(w=0;w<G;w++)(E=f[w])<R&&E>-T&&(R=E),E>U&&E<T&&(U=E);f=[R,U],G=2}var ge={tozero:ae,extrapad:W};function we(xe){k(P=f[xe])&&(z=X(xe),V=oe(xe),Q?(L=_.c2l(P)-ue(xe),O=_.c2l(P)+fe(xe)):(R=P-ue(xe),U=P+fe(xe),re&&R<U/10&&(R=U/10),L=_.c2l(R),O=_.c2l(U)),ae&&(L=Math.min(0,L),O=Math.max(0,O)),d(L)&&h(Z,L,V,ge),d(O)&&u(N,O,z,ge))}var Te=Math.min(6,G);for(w=0;w<Te;w++)we(w);for(w=G-1;w>=Te;w--)we(w);return{min:Z,max:N,opts:C}},concatExtremes:c};var s=3;function c(_,f,C){var w,E,P,L=f._id,z=_._fullLayout,V=[],R=[];function U(ae,re){for(w=0;w<re.length;w++){var ne=ae[re[w]],Q=(ne._extremes||{})[L];if(!0===ne.visible&&Q){for(E=0;E<Q.min.length;E++)h(V,(P=Q.min[E]).val,P.pad,{extrapad:P.extrapad});for(E=0;E<Q.max.length;E++)u(R,(P=Q.max[E]).val,P.pad,{extrapad:P.extrapad})}}}if(U(_._fullData,f._traceIndices),U(z.annotations||[],f._annIndices||[]),U(z.shapes||[],f._shapeIndices||[]),f._matchGroup&&!C)for(var Z in f._matchGroup)if(Z!==f._id){var N=t(_,Z),G=c(_,N,!0),W=f._length/N._length;for(E=0;E<G.min.length;E++)h(V,(P=G.min[E]).val,P.pad*W,{extrapad:P.extrapad});for(E=0;E<G.max.length;E++)u(R,(P=G.max[E]).val,P.pad*W,{extrapad:P.extrapad})}return{min:V,max:R}}function h(_,f,C,w){y(_,f,C,w,m)}function u(_,f,C,w){y(_,f,C,w,g)}function y(_,f,C,w,E){for(var P=w.tozero,L=w.extrapad,O=!0,z=0;z<_.length&&O;z++){var V=_[z];if(E(V.val,f)&&V.pad>=C&&(V.extrapad||!L)){O=!1;break}E(f,V.val)&&V.pad<=C&&(L||!V.extrapad)&&(_.splice(z,1),z--)}if(O){var R=P&&0===f;_.push({val:f,pad:R?0:C,extrapad:!R&&L})}}function d(_){return k(_)&&Math.abs(_)<T}function m(_,f){return _<=f}function g(_,f){return _>=f}function x(_,f,C){return void 0===f||void 0===C||(f=_.d2l(f))<_.d2l(C)}function v(_,f){if(!f||!f.autorangeoptions)return _;var V,R,U,C=_[0],w=_[1],E=f.autorangeoptions.include;if(void 0!==E){var P=f.d2l(C),L=f.d2l(w);o.isArrayOrTypedArray(E)||(E=[E]);for(var O=0;O<E.length;O++){var z=f.d2l(E[O]);P>=z&&(P=z,C=z),L<=z&&(L=z,w=z)}}return V=C,C=(U=(R=f).autorangeoptions)&&void 0!==U.minallowed&&x(R,U.minallowed,U.maxallowed)?U.minallowed:U&&void 0!==U.clipmin&&x(R,U.clipmin,U.clipmax)?Math.max(V,R.d2l(U.clipmin)):V,w=function(V,R){var U=R.autorangeoptions;return U&&void 0!==U.maxallowed&&x(R,U.minallowed,U.maxallowed)?U.maxallowed:U&&void 0!==U.clipmax&&x(R,U.clipmin,U.clipmax)?Math.min(V,R.d2l(U.clipmax)):V}(w,f),[C,w]}},76808:function(ie){"use strict";ie.exports=function(F,e,S){var k,o;if(S){var T="reversed"===e||"min reversed"===e||"max reversed"===e;k=S[T?1:0],o=S[T?0:1]}var b=F("autorangeoptions.minallowed",null===o?k:void 0),p=F("autorangeoptions.maxallowed",null===k?o:void 0);void 0===b&&F("autorangeoptions.clipmin"),void 0===p&&F("autorangeoptions.clipmax"),F("autorangeoptions.include")}},54460:function(ie,F,e){"use strict";var S=e(33428),k=e(38248),o=e(7316),T=e(24040),b=e(3400),p=b.strTranslate,l=e(72736),t=e(81668),i=e(76308),r=e(43616),n=e(94724),a=e(98728),s=e(39032),c=s.ONEMAXYEAR,h=s.ONEAVGYEAR,u=s.ONEMINYEAR,y=s.ONEMAXQUARTER,d=s.ONEAVGQUARTER,m=s.ONEMINQUARTER,g=s.ONEMAXMONTH,x=s.ONEAVGMONTH,v=s.ONEMINMONTH,_=s.ONEWEEK,f=s.ONEDAY,C=f/2,w=s.ONEHOUR,E=s.ONEMIN,P=s.ONESEC,L=s.MINUS_SIGN,O=s.BADNUM,z={K:"zeroline"},V={K:"gridline",L:"path"},R={K:"minor-gridline",L:"path"},U={K:"tick",L:"path"},Z={K:"tick",L:"text"},N={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},G=e(84284),W=G.MID_SHIFT,ae=G.CAP_SHIFT,re=G.LINE_SPACING,ne=G.OPPOSITE_SIDE,Q=ie.exports={};Q.setConvert=e(78344);var $=e(52976),X=e(79811),oe=X.idSort,fe=X.isLinked;Q.id2name=X.id2name,Q.name2id=X.name2id,Q.cleanId=X.cleanId,Q.list=X.list,Q.listIds=X.listIds,Q.getFromId=X.getFromId,Q.getFromTrace=X.getFromTrace;var ue=e(19280);Q.getAutoRange=ue.getAutoRange,Q.findExtremes=ue.findExtremes;var ge=1e-4;function we(Ge){var He=(Ge[1]-Ge[0])*ge;return[Ge[0]-He,Ge[1]+He]}Q.coerceRef=function(Ge,He,ut,tt,xt,At){var Mt=tt.charAt(tt.length-1),yt=ut._fullLayout._subplots[Mt+"axis"],Pt=tt+"ref",Ct={};return xt||(xt=yt[0]||("string"==typeof At?At:At[0])),At||(At=xt),yt=yt.concat(yt.map(function(Dt){return Dt+" domain"})),Ct[Pt]={valType:"enumerated",values:yt.concat(At?"string"==typeof At?[At]:At:[]),dflt:xt},b.coerce(Ge,He,Ct,Pt)},Q.getRefType=function(Ge){return void 0===Ge?Ge:"paper"===Ge?"paper":"pixel"===Ge?"pixel":/( domain)$/.test(Ge)?"domain":"range"},Q.coercePosition=function(Ge,He,ut,tt,xt,At){var Mt,yt;if("range"!==Q.getRefType(tt))Mt=b.ensureNumber,yt=ut(xt,At);else{var Pt=Q.getFromId(He,tt);yt=ut(xt,At=Pt.fraction2r(At)),Mt=Pt.cleanPos}Ge[xt]=Mt(yt)},Q.cleanPosition=function(Ge,He,ut){return("paper"===ut||"pixel"===ut?b.ensureNumber:Q.getFromId(He,ut).cleanPos)(Ge)},Q.redrawComponents=function(Ge,He){He=He||Q.listIds(Ge);var ut=Ge._fullLayout;function tt(xt,At,Mt,yt){for(var Pt=T.getComponentMethod(xt,At),Ct={},Dt=0;Dt<He.length;Dt++)for(var Ut=ut[Q.id2name(He[Dt])][Mt],Bt=0;Bt<Ut.length;Bt++){var qt=Ut[Bt];if(!Ct[qt]&&(Pt(Ge,qt),Ct[qt]=1,yt))return}}tt("annotations","drawOne","_annIndices"),tt("shapes","drawOne","_shapeIndices"),tt("images","draw","_imgIndices",!0),tt("selections","drawOne","_selectionIndices")};var Te=Q.getDataConversions=function(Ge,He,ut,tt){var xt,At="x"===ut||"y"===ut||"z"===ut?ut:tt;if(b.isArrayOrTypedArray(At)){if(xt={type:$(tt,void 0,{autotypenumbers:Ge._fullLayout.autotypenumbers}),_categories:[]},Q.setConvert(xt),"category"===xt.type)for(var Mt=0;Mt<tt.length;Mt++)xt.d2c(tt[Mt])}else xt=Q.getFromTrace(Ge,He,At);return xt?{d2c:xt.d2c,c2d:xt.c2d}:"ids"===At?{d2c:ye,c2d:ye}:{d2c:xe,c2d:xe}};function xe(Ge){return+Ge}function ye(Ge){return String(Ge)}function _e(Ge,He){return Math.abs((Ge/He+.5)%1-.5)<.001}function Ie(Ge,He){return Math.abs(Ge/He-1)<.001}function De(Ge){return+Ge.substring(1)}function be(Ge,He){return Ge.rangebreaks&&(He=He.filter(function(ut){return Ge.maskBreaks(ut.x)!==O})),He}function he(Ge){var He=Ge._mainAxis,ut=[];if(He._vals)for(var tt=0;tt<He._vals.length;tt++)if(!He._vals[tt].noTick){var xt=He.l2p(He._vals[tt].x),At=Ge.p2l(xt),Mt=Q.tickText(Ge,At);He._vals[tt].minor&&(Mt.minor=!0,Mt.text=""),ut.push(Mt)}return be(Ge,ut)}function ce(Ge,He){var ut=we(b.simpleMap(Ge.range,Ge.r2l)),tt=Math.min(ut[0],ut[1]),xt=Math.max(ut[0],ut[1]),At="category"===Ge.type?Ge.d2l_noadd:Ge.d2l;"log"===Ge.type&&"L"!==String(Ge.dtick).charAt(0)&&(Ge.dtick="L"+Math.pow(10,Math.floor(Math.min(Ge.range[0],Ge.range[1]))-1));for(var Mt=[],yt=0;yt<=1;yt++)if((void 0===He||!(He&&yt||!1===He&&!yt))&&(!yt||Ge.minor)){var Pt=yt?Ge.minor.tickvals:Ge.tickvals,Ct=yt?[]:Ge.ticktext;if(Pt){b.isArrayOrTypedArray(Ct)||(Ct=[]);for(var Dt=0;Dt<Pt.length;Dt++){var Ut=At(Pt[Dt]);if(Ut>tt&&Ut<xt){var Bt=Q.tickText(Ge,Ut,!1,String(Ct[Dt]));yt&&(Bt.minor=!0,Bt.text=""),Mt.push(Bt)}}}}return be(Ge,Mt)}Q.getDataToCoordFunc=function(Ge,He,ut,tt){return Te(Ge,He,ut,tt).d2c},Q.counterLetter=function(Ge){var He=Ge.charAt(0);return"x"===He?"y":"y"===He?"x":void 0},Q.minDtick=function(Ge,He,ut,tt){-1===["log","category","multicategory"].indexOf(Ge.type)&&tt?void 0===Ge._minDtick?(Ge._minDtick=He,Ge._forceTick0=ut):Ge._minDtick&&((Ge._minDtick/He+1e-6)%1<2e-6&&((ut-Ge._forceTick0)/He%1+1.000001)%1<2e-6?(Ge._minDtick=He,Ge._forceTick0=ut):((He/Ge._minDtick+1e-6)%1>2e-6||((ut-Ge._forceTick0)/Ge._minDtick%1+1.000001)%1>2e-6)&&(Ge._minDtick=0)):Ge._minDtick=0},Q.saveRangeInitial=function(Ge,He){for(var ut=Q.list(Ge,"",!0),tt=!1,xt=0;xt<ut.length;xt++){var At=ut[xt],Mt=void 0===At._rangeInitial0&&void 0===At._rangeInitial1,Pt=At.autorange;(Mt&&!0!==Pt||He&&(Mt||At.range[0]!==At._rangeInitial0||At.range[1]!==At._rangeInitial1))&&(At._rangeInitial0="min"===Pt||"max reversed"===Pt?void 0:At.range[0],At._rangeInitial1="max"===Pt||"min reversed"===Pt?void 0:At.range[1],At._autorangeInitial=Pt,tt=!0)}return tt},Q.saveShowSpikeInitial=function(Ge,He){for(var ut=Q.list(Ge,"",!0),tt=!1,xt="on",At=0;At<ut.length;At++){var Mt=ut[At],yt=void 0===Mt._showSpikeInitial;(yt||He&&(yt||Mt.showspikes!==Mt._showspikes))&&(Mt._showSpikeInitial=Mt.showspikes,tt=!0),"on"!==xt||Mt.showspikes||(xt="off")}return Ge._fullLayout._cartesianSpikesEnabled=xt,tt},Q.autoBin=function(Ge,He,ut,tt,xt,At){var Mt,yt=b.aggNums(Math.min,null,Ge),Pt=b.aggNums(Math.max,null,Ge);if("category"===He.type||"multicategory"===He.type)return{start:yt-.5,end:Pt+.5,size:Math.max(1,Math.round(At)||1),_dataSpan:Pt-yt};if(xt||(xt=He.calendar),Mt="log"===He.type?{type:"linear",range:[yt,Pt]}:{type:He.type,range:b.simpleMap([yt,Pt],He.c2r,0,xt),calendar:xt},Q.setConvert(Mt),At=At&&a.dtick(At,Mt.type))Mt.dtick=At,Mt.tick0=a.tick0(void 0,Mt.type,xt);else{var Ct;if(ut)Ct=(Pt-yt)/ut;else{var Dt=b.distinctVals(Ge),Ut=Math.pow(10,Math.floor(Math.log(Dt.minDiff)/Math.LN10)),Bt=Ut*b.roundUp(Dt.minDiff/Ut,[.9,1.9,4.9,9.9],!0);Ct=Math.max(Bt,2*b.stdev(Ge)/Math.pow(Ge.length,tt?.25:.4)),k(Ct)||(Ct=1)}Q.autoTicks(Mt,Ct)}var qt,an=Mt.dtick,mn=Q.tickIncrement(Q.tickFirst(Mt),an,"reverse",xt);if("number"==typeof an)qt=(mn=function(Qt,sn,Kt,qn,Fn){var Sn=0,hn=0,wn=0,pn=0;function An(Gn){return(1+100*(Gn-Qt)/Kt.dtick)%100<2}for(var On=0;On<sn.length;On++)sn[On]%1==0?wn++:k(sn[On])||pn++,An(sn[On])&&Sn++,An(sn[On]+Kt.dtick/2)&&hn++;var Dn=sn.length-pn;if(wn===Dn&&"date"!==Kt.type)Kt.dtick<1?Qt=qn-.5*Kt.dtick:(Qt-=.5)+Kt.dtick<qn&&(Qt+=Kt.dtick);else if(hn<.1*Dn&&(Sn>.3*Dn||An(qn)||An(Fn))){var Vn=Kt.dtick/2;Qt+=Qt+Vn<qn?Vn:-Vn}return Qt}(mn,Ge,Mt,yt,Pt))+(1+Math.floor((Pt-mn)/an))*an;else for("M"===Mt.dtick.charAt(0)&&(mn=function(Qt,sn,Kt,qn,Fn){var Sn=b.findExactDates(sn,Fn);if(Sn.exactDays>.8){var hn=Number(Kt.substr(1));Sn.exactYears>.8&&hn%12==0?Qt=Q.tickIncrement(Qt,"M6","reverse")+1.5*f:Sn.exactMonths>.8?Qt=Q.tickIncrement(Qt,"M1","reverse")+15.5*f:Qt-=C;var wn=Q.tickIncrement(Qt,Kt);if(wn<=qn)return wn}return Qt}(mn,Ge,an,yt,xt)),qt=mn;qt<=Pt;)qt=Q.tickIncrement(qt,an,!1,xt);return{start:He.c2r(mn,0,xt),end:He.c2r(qt,0,xt),size:an,_dataSpan:Pt-yt}},Q.prepMinorTicks=function(Ge,He,ut){if(!He.minor.dtick){delete Ge.dtick;var tt,xt=He.dtick&&k(He._tmin);if(xt){var At=Q.tickIncrement(He._tmin,He.dtick,!0);tt=[He._tmin,.99*At+.01*He._tmin]}else{var Mt=b.simpleMap(He.range,He.r2l);tt=[Mt[0],.8*Mt[0]+.2*Mt[1]]}if(Ge.range=b.simpleMap(tt,He.l2r),Ge._isMinor=!0,Q.prepTicks(Ge,ut),xt){var yt=k(He.dtick),Pt=k(Ge.dtick),Ct=yt?He.dtick:+He.dtick.substring(1),Dt=Pt?Ge.dtick:+Ge.dtick.substring(1);yt&&Pt?_e(Ct,Dt)?Ct===2*_&&Dt===2*f&&(Ge.dtick=_):Ge.dtick=Ct===2*_&&Dt===3*f?_:Ct!==_||(He._input.minor||{}).nticks?Ie(Ct/Dt,2.5)?Ct/2:Ct:f:"M"===String(He.dtick).charAt(0)?Pt?Ge.dtick="M1":_e(Ct,Dt)?Ct>=12&&2===Dt&&(Ge.dtick="M3"):Ge.dtick=He.dtick:"L"===String(Ge.dtick).charAt(0)?"L"===String(He.dtick).charAt(0)?_e(Ct,Dt)||(Ge.dtick=Ie(Ct/Dt,2.5)?He.dtick/2:He.dtick):Ge.dtick="D1":"D2"===Ge.dtick&&+He.dtick>1&&(Ge.dtick=1)}Ge.range=He.range}void 0===He.minor._tick0Init&&(Ge.tick0=He.tick0)},Q.prepTicks=function(Ge,He){var ut=b.simpleMap(Ge.range,Ge.r2l,void 0,void 0,He);if("auto"===Ge.tickmode||!Ge.dtick){var tt,xt=Ge.nticks;xt||("category"===Ge.type||"multicategory"===Ge.type?(tt=Ge.tickfont?b.bigFont(Ge.tickfont.size||12):15,xt=Ge._length/tt):(tt="y"===Ge._id.charAt(0)?40:80,xt=b.constrain(Ge._length/tt,4,9)+1),"radialaxis"===Ge._name&&(xt*=2)),Ge.minor&&"array"!==Ge.minor.tickmode||"array"===Ge.tickmode&&(xt*=100),Ge._roughDTick=Math.abs(ut[1]-ut[0])/xt,Q.autoTicks(Ge,Ge._roughDTick),Ge._minDtick>0&&Ge.dtick<2*Ge._minDtick&&(Ge.dtick=Ge._minDtick,Ge.tick0=Ge.l2r(Ge._forceTick0))}"period"===Ge.ticklabelmode&&function(At){var Mt;function yt(){return!(k(At.dtick)||"M"!==At.dtick.charAt(0))}var Pt=yt(),Ct=Q.getTickFormat(At);if(Ct){var Dt=At._dtickInit!==At.dtick;/%[fLQsSMX]/.test(Ct)||(/%[HI]/.test(Ct)?(Mt=w,Dt&&!Pt&&At.dtick<w&&(At.dtick=w)):/%p/.test(Ct)?(Mt=C,Dt&&!Pt&&At.dtick<C&&(At.dtick=C)):/%[Aadejuwx]/.test(Ct)?(Mt=f,Dt&&!Pt&&At.dtick<f&&(At.dtick=f)):/%[UVW]/.test(Ct)?(Mt=_,Dt&&!Pt&&At.dtick<_&&(At.dtick=_)):/%[Bbm]/.test(Ct)?(Mt=x,Dt&&(Pt?De(At.dtick)<1:At.dtick<v)&&(At.dtick="M1")):/%[q]/.test(Ct)?(Mt=d,Dt&&(Pt?De(At.dtick)<3:At.dtick<m)&&(At.dtick="M3")):/%[Yy]/.test(Ct)&&(Mt=h,Dt&&(Pt?De(At.dtick)<12:At.dtick<u)&&(At.dtick="M12")))}(Pt=yt())&&At.tick0===At._dowTick0&&(At.tick0=At._rawTick0),At._definedDelta=Mt}(Ge),Ge.tick0||(Ge.tick0="date"===Ge.type?"2000-01-01":0),"date"===Ge.type&&Ge.dtick<.1&&(Ge.dtick=.1),Me(Ge)},Q.calcTicks=function(Ge,He){for(var ut,tt,xt=Ge.type,At=Ge.calendar,Mt=Ge.ticklabelstep,yt="period"===Ge.ticklabelmode,Pt=b.simpleMap(Ge.range,Ge.r2l,void 0,void 0,He),Ct=Pt[1]<Pt[0],Dt=Math.min(Pt[0],Pt[1]),Ut=Math.max(Pt[0],Pt[1]),Bt=Math.max(1e3,Ge._length||0),qt=[],an=[],mn=[],Qt=[],sn=Ge.minor&&(Ge.minor.ticks||Ge.minor.showgrid),Kt=1;Kt>=(sn?0:1);Kt--){var qn=!Kt;Kt?(Ge._dtickInit=Ge.dtick,Ge._tick0Init=Ge.tick0):(Ge.minor._dtickInit=Ge.minor.dtick,Ge.minor._tick0Init=Ge.minor.tick0);var Fn=Kt?Ge:b.extendFlat({},Ge,Ge.minor);if(qn?Q.prepMinorTicks(Fn,Ge,He):Q.prepTicks(Fn,He),"array"!==Fn.tickmode)if("sync"!==Fn.tickmode){var Sn=we(Pt),hn=Sn[0],wn=Sn[1],pn=k(Fn.dtick),An="log"===xt&&!(pn||"L"===Fn.dtick.charAt(0)),On=Q.tickFirst(Fn,He);if(Kt){if(Ge._tmin=On,On<hn!==Ct)break;"category"!==xt&&"multicategory"!==xt||(wn=Ct?Math.max(-.5,wn):Math.min(Ge._categories.length-.5,wn))}var Dn,Vn,Gn=null,Nn=On;Kt&&(pn?Vn=Ge.dtick:"date"===xt?"string"==typeof Ge.dtick&&"M"===Ge.dtick.charAt(0)&&(Vn=x*Ge.dtick.substring(1)):Vn=Ge._roughDTick,Dn=Math.round((Ge.r2l(Nn)-Ge.r2l(Ge.tick0))/Vn)-1);var ir=Fn.dtick;for(Fn.rangebreaks&&Fn._tick0Init!==Fn.tick0&&(Nn=We(Nn,Ge),Ct||(Nn=Q.tickIncrement(Nn,ir,!Ct,At))),Kt&&yt&&(Nn=Q.tickIncrement(Nn,ir,!Ct,At),Dn--);Ct?Nn>=wn:Nn<=wn;Nn=Q.tickIncrement(Nn,ir,Ct,At)){if(Kt&&Dn++,Fn.rangebreaks&&!Ct){if(Nn<hn)continue;if(Fn.maskBreaks(Nn)===O&&We(Nn,Fn)>=Ut)break}if(mn.length>Bt||Nn===Gn)break;Gn=Nn;var $n={value:Nn};Kt?(An&&Nn!==(0|Nn)&&($n.simpleLabel=!0),Mt>1&&Dn%Mt&&($n.skipLabel=!0),mn.push($n)):($n.minor=!0,Qt.push($n))}}else mn=[],qt=he(Ge);else Kt?(mn=[],qt=ce(Ge,!qn)):(Qt=[],an=ce(Ge,!qn))}if(sn&&!("inside"===Ge.minor.ticks&&"outside"===Ge.ticks||"outside"===Ge.minor.ticks&&"inside"===Ge.ticks)){for(var mr=mn.map(function(Nt){return Nt.value}),lr=[],vr=0;vr<Qt.length;vr++){var or=Qt[vr],Or=or.value;if(-1===mr.indexOf(Or)){for(var fn=!1,gn=0;!fn&&gn<mn.length;gn++)1e7+mn[gn].value===1e7+Or&&(fn=!0);fn||lr.push(or)}}Qt=lr}if(yt&&function(Nt,Zt,un){for(var Tn=0;Tn<Nt.length;Tn++){var kn=Nt[Tn].value,Pn=Tn,yn=Tn+1;Tn<Nt.length-1?(Pn=Tn,yn=Tn+1):Tn>0?(Pn=Tn-1,yn=Tn):(Pn=Tn,yn=Tn);var on,xn=Math.abs(Nt[yn].value-Nt[Pn].value),Bn=un||xn,Wn=0;Bn>=u?Wn=xn>=u&&xn<=c?xn:h:un===d&&Bn>=m?Wn=xn>=m&&xn<=y?xn:d:Bn>=v?Wn=xn>=v&&xn<=g?xn:x:un===_&&Bn>=_?Wn=_:Bn>=f?Wn=f:un===C&&Bn>=C?Wn=C:un===w&&Bn>=w&&(Wn=w),Wn>=xn&&(Wn=xn,on=!0);var Qn=kn+Wn;if(Zt.rangebreaks&&Wn>0){for(var ar=0,yr=0;yr<84;yr++){var ur=(yr+.5)/84;Zt.maskBreaks(kn*(1-ur)+ur*Qn)!==O&&ar++}(Wn*=ar/84)||(Nt[Tn].drop=!0),on&&xn>_&&(Wn=xn)}(Wn>0||0===Tn)&&(Nt[Tn].periodX=kn+Wn/2)}}(mn,Ge,Ge._definedDelta),Ge.rangebreaks){var Hn="y"===Ge._id.charAt(0),En=1;"auto"===Ge.tickmode&&(En=Ge.tickfont?Ge.tickfont.size:12);var Zn=NaN;for(ut=mn.length-1;ut>-1;ut--)if(mn[ut].drop)mn.splice(ut,1);else{mn[ut].value=We(mn[ut].value,Ge);var Kn=Ge.c2p(mn[ut].value);(Hn?Zn>Kn-En:Zn<Kn+En)?mn.splice(Ct?ut+1:ut,1):Zn=Kn}}nt(Ge)&&360===Math.abs(Pt[1]-Pt[0])&&mn.pop(),Ge._tmax=(mn[mn.length-1]||{}).value,Ge._prevDateHead="",Ge._inCalcTicks=!0;var tr,fr,Dr=function(Nt){Nt.text="",Ge._prevDateHead=tt};for(mn=mn.concat(Qt),ut=0;ut<mn.length;ut++){var In=mn[ut].value;mn[ut].minor?an.push({x:In,minor:!0}):(tt=Ge._prevDateHead,tr=Q.tickText(Ge,In,!1,mn[ut].simpleLabel),void 0!==(fr=mn[ut].periodX)&&(tr.periodX=fr,(fr>Ut||fr<Dt)&&(fr>Ut&&(tr.periodX=Ut),fr<Dt&&(tr.periodX=Dt),Dr(tr))),mn[ut].skipLabel&&Dr(tr),qt.push(tr))}return qt=qt.concat(an),Ge._inCalcTicks=!1,yt&&qt.length&&(qt[0].noTick=!0),qt};var me=[2,5,10],Pe=[1,2,3,6,12],Ae=[1,2,5,10,15,30],Ce=[1,2,3,7,14],Oe=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Ne=[-.301,0,.301,.699,1],je=[15,30,45,90,180];function ve(Ge,He,ut){return He*b.roundUp(Ge/He,ut)}function Me(Ge){var He=Ge.dtick;if(Ge._tickexponent=0,k(He)||"string"==typeof He||(He=1),"category"!==Ge.type&&"multicategory"!==Ge.type||(Ge._tickround=null),"date"===Ge.type){var ut=Ge.r2l(Ge.tick0),tt=Ge.l2r(ut).replace(/(^-|i)/g,""),xt=tt.length;if("M"===String(He).charAt(0))Ge._tickround=xt>10||"01-01"!==tt.substr(5)?"d":+He.substr(1)%12==0?"y":"m";else if(He>=f&&xt<=10||He>=15*f)Ge._tickround="d";else if(He>=E&&xt<=16||He>=w)Ge._tickround="M";else if(He>=P&&xt<=19||He>=E)Ge._tickround="S";else{var At=Ge.l2r(ut+He).replace(/^-/,"").length;Ge._tickround=Math.max(xt,At)-20,Ge._tickround<0&&(Ge._tickround=4)}}else if(k(He)||"L"===He.charAt(0)){var Mt=Ge.range.map(Ge.r2d||Number);k(He)||(He=Number(He.substr(1))),Ge._tickround=2-Math.floor(Math.log(He)/Math.LN10+.01);var yt=Math.max(Math.abs(Mt[0]),Math.abs(Mt[1])),Pt=Math.floor(Math.log(yt)/Math.LN10+.01),Ct=void 0===Ge.minexponent?3:Ge.minexponent;Math.abs(Pt)>Ct&&(Ge._tickexponent=ze(Ge.exponentformat)&&!qe(Pt)?3*Math.round((Pt-1)/3):Pt)}else Ge._tickround=null}function Le(Ge,He,ut){var tt=Ge.tickfont||{};return{x:He,dx:0,dy:0,text:ut||"",fontSize:tt.size,font:tt.family,fontWeight:tt.weight,fontStyle:tt.style,fontVariant:tt.variant,fontTextcase:tt.textcase,fontLineposition:tt.lineposition,fontShadow:tt.shadow,fontColor:tt.color}}Q.autoTicks=function(Ge,He,ut){var tt;function xt(Ut){return Math.pow(Ut,Math.floor(Math.log(He)/Math.LN10))}if("date"===Ge.type){Ge.tick0=b.dateTick0(Ge.calendar,0);var At=2*He;if(At>h)He/=h,tt=xt(10),Ge.dtick="M"+12*ve(He,tt,me);else if(At>x)Ge.dtick="M"+ve(He/=x,1,Pe);else if(At>f){if(Ge.dtick=ve(He,f,Ge._hasDayOfWeekBreaks?[1,2,7,14]:Ce),!ut){var Mt=Q.getTickFormat(Ge),yt="period"===Ge.ticklabelmode;yt&&(Ge._rawTick0=Ge.tick0),Ge.tick0=/%[uVW]/.test(Mt)?b.dateTick0(Ge.calendar,2):b.dateTick0(Ge.calendar,1),yt&&(Ge._dowTick0=Ge.tick0)}}else At>w?Ge.dtick=ve(He,w,Pe):At>E?Ge.dtick=ve(He,E,Ae):At>P?Ge.dtick=ve(He,P,Ae):(tt=xt(10),Ge.dtick=ve(He,tt,me))}else if("log"===Ge.type){Ge.tick0=0;var Pt=b.simpleMap(Ge.range,Ge.r2l);if(Ge._isMinor&&(He*=1.5),He>.7)Ge.dtick=Math.ceil(He);else if(Math.abs(Pt[1]-Pt[0])<1){var Ct=1.5*Math.abs((Pt[1]-Pt[0])/He);He=Math.abs(Math.pow(10,Pt[1])-Math.pow(10,Pt[0]))/Ct,tt=xt(10),Ge.dtick="L"+ve(He,tt,me)}else Ge.dtick=He>.3?"D2":"D1"}else"category"===Ge.type||"multicategory"===Ge.type?(Ge.tick0=0,Ge.dtick=Math.ceil(Math.max(He,1))):nt(Ge)?(Ge.tick0=0,Ge.dtick=ve(He,tt=1,je)):(Ge.tick0=0,tt=xt(10),Ge.dtick=ve(He,tt,me));if(0===Ge.dtick&&(Ge.dtick=1),!k(Ge.dtick)&&"string"!=typeof Ge.dtick){var Dt=Ge.dtick;throw Ge.dtick=1,"ax.dtick error: "+String(Dt)}},Q.tickIncrement=function(Ge,He,ut,tt){var xt=ut?-1:1;if(k(He))return b.increment(Ge,xt*He);var At=He.charAt(0),Mt=xt*Number(He.substr(1));if("M"===At)return b.incrementMonth(Ge,Mt,tt);if("L"===At)return Math.log(Math.pow(10,Ge)+Mt)/Math.LN10;if("D"===At){var yt="D2"===He?Ne:Oe,Pt=Ge+.01*xt,Ct=b.roundUp(b.mod(Pt,1),yt,ut);return Math.floor(Pt)+Math.log(S.round(Math.pow(10,Ct),1))/Math.LN10}throw"unrecognized dtick "+String(He)},Q.tickFirst=function(Ge,He){var ut=Ge.r2l||Number,tt=b.simpleMap(Ge.range,ut,void 0,void 0,He),xt=tt[1]<tt[0],At=xt?Math.floor:Math.ceil,Mt=we(tt)[0],yt=Ge.dtick,Pt=ut(Ge.tick0);if(k(yt)){var Ct=At((Mt-Pt)/yt)*yt+Pt;return"category"!==Ge.type&&"multicategory"!==Ge.type||(Ct=b.constrain(Ct,0,Ge._categories.length-1)),Ct}var Dt=yt.charAt(0),Ut=Number(yt.substr(1));if("M"===Dt){for(var Bt,qt,an,mn=0,Qt=Pt;mn<10;){if(((Bt=Q.tickIncrement(Qt,yt,xt,Ge.calendar))-Mt)*(Qt-Mt)<=0)return xt?Math.min(Qt,Bt):Math.max(Qt,Bt);qt=(Mt-(Qt+Bt)/2)/(Bt-Qt),an=Dt+(Math.abs(Math.round(qt))||1)*Ut,Qt=Q.tickIncrement(Qt,an,qt<0?!xt:xt,Ge.calendar),mn++}return b.error("tickFirst did not converge",Ge),Qt}if("L"===Dt)return Math.log(At((Math.pow(10,Mt)-Pt)/Ut)*Ut+Pt)/Math.LN10;if("D"===Dt){var sn="D2"===yt?Ne:Oe,Kt=b.roundUp(b.mod(Mt,1),sn,xt);return Math.floor(Mt)+Math.log(S.round(Math.pow(10,Kt),1))/Math.LN10}throw"unrecognized dtick "+String(yt)},Q.tickText=function(Ge,He,ut,tt){var xt,At=Le(Ge,He),Mt="array"===Ge.tickmode,yt=ut||Mt,Pt=Ge.type,Ct="category"===Pt?Ge.d2l_noadd:Ge.d2l,Dt=function(Qt){var sn=Ge.l2p(Qt);return sn>=0&&sn<=Ge._length?Qt:null};if(Mt&&b.isArrayOrTypedArray(Ge.ticktext)){var Ut=b.simpleMap(Ge.range,Ge.r2l),Bt=(Math.abs(Ut[1]-Ut[0])-(Ge._lBreaks||0))/1e4;for(xt=0;xt<Ge.ticktext.length&&!(Math.abs(He-Ct(Ge.tickvals[xt]))<Bt);xt++);if(xt<Ge.ticktext.length)return At.text=String(Ge.ticktext[xt]),At.xbnd=[Dt(At.x-.5),Dt(At.x+Ge.dtick-.5)],At}function qt(Qt){return void 0===Qt||(ut?"none"===Qt:"all"!==Qt&&He!=={first:Ge._tmin,last:Ge._tmax}[Qt])}var sn,Kt,an=ut?"never":"none"!==Ge.exponentformat&&qt(Ge.showexponent)?"hide":"";if("date"===Pt?function(Qt,sn,Kt,qn){var Fn=Qt._tickround,Sn=Kt&&Qt.hoverformat||Q.getTickFormat(Qt);(qn=!Sn&&qn)&&(Fn=k(Fn)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[Fn]);var hn,wn=b.formatDate(sn.x,Sn,Fn,Qt._dateFormat,Qt.calendar,Qt._extraFormat),pn=wn.indexOf("\n");if(-1!==pn&&(hn=wn.substr(pn+1),wn=wn.substr(0,pn)),qn&&(void 0===hn||"00:00:00"!==wn&&"00:00"!==wn?8===wn.length&&(wn=wn.replace(/:00$/,"")):(wn=hn,hn="")),hn)if(Kt)"d"===Fn?wn+=", "+hn:wn=hn+(wn?", "+wn:"");else if(Qt._inCalcTicks&&Qt._prevDateHead===hn){var An=et(Qt),On=Qt._trueSide||Qt.side;(!An&&"top"===On||An&&"bottom"===On)&&(wn+="<br> ")}else Qt._prevDateHead=hn,wn+="<br>"+hn;sn.text=wn}(Ge,At,ut,yt):"log"===Pt?function(Qt,sn,Kt,qn,Fn){var Sn=Qt.dtick,hn=sn.x,wn=Qt.tickformat,pn="string"==typeof Sn&&Sn.charAt(0);if("never"===Fn&&(Fn=""),qn&&"L"!==pn&&(Sn="L3",pn="L"),wn||"L"===pn)sn.text=Ke(Math.pow(10,hn),Qt,Fn,qn);else if(k(Sn)||"D"===pn&&b.mod(hn+.01,1)<.1){var An=Math.round(hn),On=Math.abs(An),Dn=Qt.exponentformat;"power"===Dn||ze(Dn)&&qe(An)?(sn.text=0===An?1:1===An?"10":"10<sup>"+(An>1?"":L)+On+"</sup>",sn.fontSize*=1.25):("e"===Dn||"E"===Dn)&&On>2?sn.text="1"+Dn+(An>0?"+":L)+On:(sn.text=Ke(Math.pow(10,hn),Qt,"","fakehover"),"D1"===Sn&&"y"===Qt._id.charAt(0)&&(sn.dy-=sn.fontSize/6))}else{if("D"!==pn)throw"unrecognized dtick "+String(Sn);sn.text=String(Math.round(Math.pow(10,b.mod(hn,1)))),sn.fontSize*=.75}if("D1"===Qt.dtick){var Vn=String(sn.text).charAt(0);"0"!==Vn&&"1"!==Vn||("y"===Qt._id.charAt(0)?sn.dx-=sn.fontSize/4:(sn.dy+=sn.fontSize/2,sn.dx+=(Qt.range[1]>Qt.range[0]?1:-1)*sn.fontSize*(hn<0?.5:.25)))}}(Ge,At,0,yt,an):"category"===Pt?(sn=At,void 0===(Kt=Ge._categories[Math.round(sn.x)])&&(Kt=""),sn.text=String(Kt)):"multicategory"===Pt?function(Qt,sn,Kt){var qn=Math.round(sn.x),Fn=Qt._categories[qn]||[],Sn=void 0===Fn[1]?"":String(Fn[1]),hn=void 0===Fn[0]?"":String(Fn[0]);Kt?sn.text=hn+" - "+Sn:(sn.text=Sn,sn.text2=hn)}(Ge,At,ut):nt(Ge)?function(Qt,sn,Kt,qn,Fn){if("radians"!==Qt.thetaunit||Kt)sn.text=Ke(sn.x,Qt,Fn,qn);else{var Sn=sn.x/180;if(0===Sn)sn.text="0";else{var hn=function(pn){function An(Gn,Nn){return Math.abs(Gn-Nn)<=1e-6}var On=function(Gn){for(var Nn=1;!An(Math.round(Gn*Nn)/Nn,Gn);)Nn*=10;return Nn}(pn),Dn=pn*On,Vn=Math.abs(function Gn(Nn,ir){return An(ir,0)?Nn:Gn(ir,Nn%ir)}(Dn,On));return[Math.round(Dn/Vn),Math.round(On/Vn)]}(Sn);if(hn[1]>=100)sn.text=Ke(b.deg2rad(sn.x),Qt,Fn,qn);else{var wn=sn.x<0;sn.text=1===hn[1]?1===hn[0]?"\u03c0":hn[0]+"\u03c0":["<sup>",hn[0],"</sup>","\u2044","<sub>",hn[1],"</sub>","\u03c0"].join(""),wn&&(sn.text=L+sn.text)}}}}(Ge,At,ut,yt,an):function(Qt,sn,Kt,qn,Fn){"never"===Fn?Fn="":"all"===Qt.showexponent&&Math.abs(sn.x/Qt.dtick)<1e-6&&(Fn="hide"),sn.text=Ke(sn.x,Qt,Fn,qn)}(Ge,At,0,yt,an),tt||(Ge.tickprefix&&!qt(Ge.showtickprefix)&&(At.text=Ge.tickprefix+At.text),Ge.ticksuffix&&!qt(Ge.showticksuffix)&&(At.text+=Ge.ticksuffix)),Ge.labelalias&&Ge.labelalias.hasOwnProperty(At.text)){var mn=Ge.labelalias[At.text];"string"==typeof mn&&(At.text=mn)}return("boundaries"===Ge.tickson||Ge.showdividers)&&(At.xbnd=[Dt(At.x-.5),Dt(At.x+Ge.dtick-.5)]),At},Q.hoverLabelText=function(Ge,He,ut){ut&&(Ge=b.extendFlat({},Ge,{hoverformat:ut}));var tt=b.isArrayOrTypedArray(He)?He[0]:He,xt=b.isArrayOrTypedArray(He)?He[1]:void 0;if(void 0!==xt&&xt!==tt)return Q.hoverLabelText(Ge,tt,ut)+" - "+Q.hoverLabelText(Ge,xt,ut);var At="log"===Ge.type&&tt<=0,Mt=Q.tickText(Ge,Ge.c2l(At?-tt:tt),"hover").text;return At?0===tt?"0":L+Mt:Mt};var Ue=["f","p","n","\u03bc","m","","k","M","G","T"];function ze(Ge){return"SI"===Ge||"B"===Ge}function qe(Ge){return Ge>14||Ge<-15}function Ke(Ge,He,ut,tt){var xt=Ge<0,At=He._tickround,Mt=ut||He.exponentformat||"B",yt=He._tickexponent,Pt=Q.getTickFormat(He),Ct=He.separatethousands;if(tt){var Dt={exponentformat:Mt,minexponent:He.minexponent,dtick:"none"===He.showexponent?He.dtick:k(Ge)&&Math.abs(Ge)||1,range:"none"===He.showexponent?He.range.map(He.r2d):[0,Ge||1]};Me(Dt),At=(Number(Dt._tickround)||0)+4,yt=Dt._tickexponent,He.hoverformat&&(Pt=He.hoverformat)}if(Pt)return He._numFormat(Pt)(Ge).replace(/-/g,L);var Ut,Bt=Math.pow(10,-At)/2;if("none"===Mt&&(yt=0),(Ge=Math.abs(Ge))<Bt)Ge="0",xt=!1;else{if(Ge+=Bt,yt&&(Ge*=Math.pow(10,-yt),At+=yt),0===At)Ge=String(Math.floor(Ge));else if(At<0){Ge=(Ge=String(Math.round(Ge))).substr(0,Ge.length+At);for(var qt=At;qt<0;qt++)Ge+="0"}else{var an=(Ge=String(Ge)).indexOf(".")+1;an&&(Ge=Ge.substr(0,an+At).replace(/\.?0+$/,""))}Ge=b.numSeparate(Ge,He._separators,Ct)}return yt&&"hide"!==Mt&&(ze(Mt)&&qe(yt)&&(Mt="power"),Ut=yt<0?L+-yt:"power"!==Mt?"+"+yt:String(yt),"e"===Mt||"E"===Mt?Ge+=Mt+Ut:"power"===Mt?Ge+="\xd710<sup>"+Ut+"</sup>":"B"===Mt&&9===yt?Ge+="B":ze(Mt)&&(Ge+=Ue[yt/3+5])),xt?L+Ge:Ge}function it(Ge,He){if(Ge){var ut=Object.keys(N).reduce(function(tt,xt){return-1!==He.indexOf(xt)&&N[xt].forEach(function(At){tt[At]=1}),tt},{});Object.keys(Ge).forEach(function(tt){ut[tt]||(1===tt.length?Ge[tt]=0:delete Ge[tt])})}}function ft(Ge,He){for(var ut=[],tt={},xt=0;xt<He.length;xt++){var At=He[xt];tt[At.text2]?tt[At.text2].push(At.x):tt[At.text2]=[At.x]}for(var Mt in tt)ut.push(Le(Ge,b.interp(tt[Mt],.5),Mt));return ut}function dt(Ge){return void 0!==Ge.periodX?Ge.periodX:Ge.x}function kt(Ge){return[Ge.text,Ge.x,Ge.axInfo,Ge.font,Ge.fontSize,Ge.fontColor].join("_")}function St(Ge){var He=Ge.title.font.size,ut=(Ge.title.text.match(l.BR_TAG_ALL)||[]).length;return Ge.title.hasOwnProperty("standoff")?He*(ae+ut*re):ut?He*(ut+1)*re:He}function Tt(Ge,He){var ut=Ge.l2p(He);return ut>1&&ut<Ge._length-1}function lt(Ge){var He=S.select(Ge),ut=He.select(".text-math-group");return ut.empty()?He.select("text"):ut}function ot(Ge){return Ge._id+".automargin"}function Rt(Ge){return ot(Ge)+".mirror"}function Vt(Ge){return Ge._id+".rangeslider"}function Ht(Ge,He){for(var ut=0;ut<He.length;ut++)-1===Ge.indexOf(He[ut])&&Ge.push(He[ut])}function zt(Ge,He,ut){var tt,xt,At=[],Mt=[],yt=Ge.layout;for(tt=0;tt<He.length;tt++)At.push(Q.getFromId(Ge,He[tt]));for(tt=0;tt<ut.length;tt++)Mt.push(Q.getFromId(Ge,ut[tt]));var Pt=Object.keys(n),Ct=["anchor","domain","overlaying","position","side","tickangle","editType"],Dt=["linear","log"];for(tt=0;tt<Pt.length;tt++){var Ut=Pt[tt],Bt=At[0][Ut],qt=Mt[0][Ut],an=!0,mn=!1,Qt=!1;if("_"!==Ut.charAt(0)&&"function"!=typeof Bt&&-1===Ct.indexOf(Ut)){for(xt=1;xt<At.length&&an;xt++){var sn=At[xt][Ut];"type"===Ut&&-1!==Dt.indexOf(Bt)&&-1!==Dt.indexOf(sn)&&Bt!==sn?mn=!0:sn!==Bt&&(an=!1)}for(xt=1;xt<Mt.length&&an;xt++){var Kt=Mt[xt][Ut];"type"===Ut&&-1!==Dt.indexOf(qt)&&-1!==Dt.indexOf(Kt)&&qt!==Kt?Qt=!0:Mt[xt][Ut]!==qt&&(an=!1)}an&&(mn&&(yt[At[0]._name].type="linear"),Qt&&(yt[Mt[0]._name].type="linear"),Qe(yt,Ut,At,Mt,Ge._fullLayout._dfltTitle))}}for(tt=0;tt<Ge._fullLayout.annotations.length;tt++){var qn=Ge._fullLayout.annotations[tt];-1!==He.indexOf(qn.xref)&&-1!==ut.indexOf(qn.yref)&&b.swapAttrs(yt.annotations[tt],["?"])}}function Qe(Ge,He,ut,tt,xt){var At,Mt=b.nestedProperty,yt=Mt(Ge[ut[0]._name],He).get(),Pt=Mt(Ge[tt[0]._name],He).get();for("title"===He&&(yt&&yt.text===xt.x&&(yt.text=xt.y),Pt&&Pt.text===xt.y&&(Pt.text=xt.x)),At=0;At<ut.length;At++)Mt(Ge,ut[At]._name+"."+He).set(Pt);for(At=0;At<tt.length;At++)Mt(Ge,tt[At]._name+"."+He).set(yt)}function nt(Ge){return"angularaxis"===Ge._id}function We(Ge,He){for(var ut=He._rangebreaks.length,tt=0;tt<ut;tt++){var xt=He._rangebreaks[tt];if(Ge>=xt.min&&Ge<xt.max)return xt.max}return Ge}function et(Ge){return-1!==(Ge.ticklabelposition||"").indexOf("inside")}function gt(Ge,He){et(Ge._anchorAxis||{})&&Ge._hideCounterAxisInsideTickLabels&&Ge._hideCounterAxisInsideTickLabels(He)}function ht(Ge,He,ut,tt){var xt,At="free"===Ge.anchor||void 0!==Ge.overlaying&&!1!==Ge.overlaying?Ge.overlaying:Ge._id;xt=tt?"right"===Ge.side?He:-He:He,At in ut||(ut[At]={}),Ge.side in ut[At]||(ut[At][Ge.side]=0),ut[At][Ge.side]+=xt}Q.getTickFormat=function(Ge){var He,ut,tt,xt,At,Mt,yt,Pt,Bt,qt,an,mn,Qt,sn;function Ct(Bt){return"string"!=typeof Bt?Bt:Number(Bt.replace("M",""))*x}function Dt(Bt,qt){var an=["L","D"];if(typeof Bt==typeof qt){if("number"==typeof Bt)return Bt-qt;var mn=an.indexOf(Bt.charAt(0)),Qt=an.indexOf(qt.charAt(0));return mn===Qt?Number(Bt.replace(/(L|D)/g,""))-Number(qt.replace(/(L|D)/g,"")):mn-Qt}return"number"==typeof Bt?1:-1}if(Ge.tickformatstops&&Ge.tickformatstops.length>0)switch(Ge.type){case"date":case"linear":for(He=0;He<Ge.tickformatstops.length;He++)if((tt=Ge.tickformatstops[He]).enabled&&(xt=Ge.dtick,Mt=void 0,void 0,void 0,Mt=Ct||function(Bt){return Bt},Pt=(At=tt.dtickrange)[1],(!(yt=At[0])&&"number"!=typeof yt||Mt(yt)<=Mt(xt))&&(!Pt&&"number"!=typeof Pt||Mt(Pt)>=Mt(xt)))){ut=tt;break}break;case"log":for(He=0;He<Ge.tickformatstops.length;He++)if((tt=Ge.tickformatstops[He]).enabled&&(an=void 0,mn=void 0,Qt=void 0,sn=void 0,an=null===(qt=tt.dtickrange)[0],mn=null===qt[1],Qt=Dt(Bt=Ge.dtick,qt[0])>=0,sn=Dt(Bt,qt[1])<=0,(an||Qt)&&(mn||sn))){ut=tt;break}}return ut?ut.value:Ge.tickformat},Q.getSubplots=function(Ge,He){var ut=Ge._fullLayout._subplots,tt=ut.cartesian.concat(ut.gl2d||[]),xt=He?Q.findSubplotsWithAxis(tt,He):tt;return xt.sort(function(At,Mt){var yt=At.substr(1).split("y"),Pt=Mt.substr(1).split("y");return yt[0]===Pt[0]?+yt[1]-+Pt[1]:+yt[0]-+Pt[0]}),xt},Q.findSubplotsWithAxis=function(Ge,He){for(var ut=new RegExp("x"===He._id.charAt(0)?"^"+He._id+"y":He._id+"$"),tt=[],xt=0;xt<Ge.length;xt++){var At=Ge[xt];ut.test(At)&&tt.push(At)}return tt},Q.makeClipPaths=function(Ge){var He=Ge._fullLayout;if(!He._hasOnlyLargeSploms){var ut,tt,xt={_offset:0,_length:He.width,_id:""},At={_offset:0,_length:He.height,_id:""},Mt=Q.list(Ge,"x",!0),yt=Q.list(Ge,"y",!0),Pt=[];for(ut=0;ut<Mt.length;ut++)for(Pt.push({x:Mt[ut],y:At}),tt=0;tt<yt.length;tt++)0===ut&&Pt.push({x:xt,y:yt[tt]}),Pt.push({x:Mt[ut],y:yt[tt]});var Ct=He._clips.selectAll(".axesclip").data(Pt,function(Dt){return Dt.x._id+Dt.y._id});Ct.enter().append("clipPath").classed("axesclip",!0).attr("id",function(Dt){return"clip"+He._uid+Dt.x._id+Dt.y._id}).append("rect"),Ct.exit().remove(),Ct.each(function(Dt){S.select(this).select("rect").attr({x:Dt.x._offset||0,y:Dt.y._offset||0,width:Dt.x._length||1,height:Dt.y._length||1})})}},Q.draw=function(Ge,He,ut){var tt=Ge._fullLayout;"redraw"===He&&tt._paper.selectAll("g.subplot").each(function(yt){var Ct=tt._plots[yt[0]];if(Ct){var Dt=Ct.xaxis,Ut=Ct.yaxis;Ct.xaxislayer.selectAll("."+Dt._id+"tick").remove(),Ct.yaxislayer.selectAll("."+Ut._id+"tick").remove(),Ct.xaxislayer.selectAll("."+Dt._id+"tick2").remove(),Ct.yaxislayer.selectAll("."+Ut._id+"tick2").remove(),Ct.xaxislayer.selectAll("."+Dt._id+"divider").remove(),Ct.yaxislayer.selectAll("."+Ut._id+"divider").remove(),Ct.minorGridlayer&&Ct.minorGridlayer.selectAll("path").remove(),Ct.gridlayer&&Ct.gridlayer.selectAll("path").remove(),Ct.zerolinelayer&&Ct.zerolinelayer.selectAll("path").remove(),tt._infolayer.select(".g-"+Dt._id+"title").remove(),tt._infolayer.select(".g-"+Ut._id+"title").remove()}});var xt=He&&"redraw"!==He?He:Q.listIds(Ge),At=Q.list(Ge).filter(function(yt){return yt.autoshift}).map(function(yt){return yt.overlaying});xt.map(function(yt){var Pt=Q.getFromId(Ge,yt);if("sync"===Pt.tickmode&&Pt.overlaying){var Ct=xt.findIndex(function(Dt){return Dt===Pt.overlaying});Ct>=0&&xt.unshift(xt.splice(Ct,1).shift())}});var Mt={false:{left:0,right:0}};return b.syncOrAsync(xt.map(function(yt){return function(){if(yt){var Pt=Q.getFromId(Ge,yt);ut||(ut={}),ut.axShifts=Mt,ut.overlayingShiftedAx=At;var Ct=Q.drawOne(Ge,Pt,ut);return Pt._shiftPusher&&ht(Pt,Pt._fullDepth||0,Mt,!0),Pt._r=Pt.range.slice(),Pt._rl=b.simpleMap(Pt._r,Pt.r2l),Ct}}}))},Q.drawOne=function(Ge,He,ut){var tt,xt,At,Mt=(ut=ut||{}).axShifts||{},yt=ut.overlayingShiftedAx||[];He.setScale();var yn,Pt=Ge._fullLayout,Ct=He._id,Dt=Ct.charAt(0),Ut=Q.counterLetter(Ct),Bt=Pt._plots[He._mainSubplot];if(Bt){if(He._shiftPusher=He.autoshift||-1!==yt.indexOf(He._id)||-1!==yt.indexOf(He.overlaying),He._shiftPusher&"free"===He.anchor){var qt=He.linewidth/2||0;"inside"===He.ticks&&(qt+=He.ticklen),ht(He,qt,Mt,!0),ht(He,He.shift||0,Mt,!1)}!0===ut.skipTitle&&void 0!==He._shift||(He._shift=(yn=He).autoshift?Mt[yn.overlaying][yn.side]:yn.shift||0);var an=Bt[Dt+"axislayer"],mn=He._mainLinePosition,Qt=mn+=He._shift,sn=He._mainMirrorPosition,Kt=He._vals=Q.calcTicks(He),qn=[He.mirror,Qt,sn].join("_");for(tt=0;tt<Kt.length;tt++)Kt[tt].axInfo=qn;He._selections={},He._tickAngles&&(He._prevTickAngles=He._tickAngles),He._tickAngles={},He._depth=null;var Fn={};if(He.visible){var Sn,hn,wn=Q.makeTransTickFn(He),pn=Q.makeTransTickLabelFn(He),An="inside"===He.ticks,On="outside"===He.ticks;if("boundaries"===He.tickson){var Dn=function(yn,on){var nn,dn=[],xn=function(Bn,Wn){var Qn=Bn.xbnd[Wn];null!==Qn&&dn.push(b.extendFlat({},Bn,{x:Qn}))};if(on.length){for(nn=0;nn<on.length;nn++)xn(on[nn],0);xn(on[nn-1],1)}return dn}(0,Kt);hn=Q.clipEnds(He,Dn),Sn=An?hn:Dn}else hn=Q.clipEnds(He,Kt),Sn=An&&"period"!==He.ticklabelmode?hn:Kt;var Vn,Gn=He._gridVals=hn,Nn=function(yn,on){var nn,dn,xn=[],Bn=on.length&&on[on.length-1].x<on[0].x,Wn=function(ar,yr){var ur=ar.xbnd[yr];null!==ur&&xn.push(b.extendFlat({},ar,{x:ur}))};if(yn.showdividers&&on.length){for(nn=0;nn<on.length;nn++){var Qn=on[nn];Qn.text2!==dn&&Wn(Qn,Bn?1:0),dn=Qn.text2}Wn(on[nn-1],Bn?0:1)}return xn}(He,Kt);if(!Pt._hasOnlyLargeSploms){var ir=He._subplotsWith,$n={};for(tt=0;tt<ir.length;tt++){var mr=(At=Pt._plots[xt=ir[tt]])[Ut+"axis"],lr=mr._mainAxis._id;if(!$n[lr]){$n[lr]=1;var vr="x"===Dt?"M0,"+mr._offset+"v"+mr._length:"M"+mr._offset+",0h"+mr._length;Q.drawGrid(Ge,He,{vals:Gn,counterAxis:mr,layer:At.gridlayer.select("."+Ct),minorLayer:At.minorGridlayer.select("."+Ct),path:vr,transFn:wn}),Q.drawZeroLine(Ge,He,{counterAxis:mr,layer:At.zerolinelayer,path:vr,transFn:wn})}}}var or=Q.getTickSigns(He),Or=Q.getTickSigns(He,"minor");if(He.ticks||He.minor&&He.minor.ticks){var fn,gn,Hn,En,Zn=Q.makeTickPath(He,Qt,or[2]),Kn=Q.makeTickPath(He,Qt,Or[2],{minor:!0});if(He._anchorAxis&&He.mirror&&!0!==He.mirror?(fn=Q.makeTickPath(He,sn,or[3]),gn=Q.makeTickPath(He,sn,Or[3],{minor:!0}),Hn=Zn+fn,En=Kn+gn):(fn="",gn="",Hn=Zn,En=Kn),He.showdividers&&On&&"boundaries"===He.tickson){var tr={};for(tt=0;tt<Nn.length;tt++)tr[Nn[tt].x]=1;Vn=function(yn){return tr[yn.x]?fn:Hn}}else Vn=function(yn){return yn.minor?En:Hn}}if(Q.drawTicks(Ge,He,{vals:Sn,layer:an,path:Vn,transFn:wn}),"allticks"===He.mirror){var fr=Object.keys(He._linepositions||{});for(tt=0;tt<fr.length;tt++){At=Pt._plots[xt=fr[tt]];var Dr=He._linepositions[xt]||[],In=Dr[1],Nt=Dr[2],Zt=Q.makeTickPath(He,Dr[0],Nt?or[0]:Or[0],{minor:Nt})+Q.makeTickPath(He,In,Nt?or[1]:Or[1],{minor:Nt});Q.drawTicks(Ge,He,{vals:Sn,layer:At[Dt+"axislayer"],path:Zt,transFn:wn})}}var un=[];if(un.push(function(){return Q.drawLabels(Ge,He,{vals:Kt,layer:an,plotinfo:At,transFn:pn,labelFns:Q.makeLabelFns(He,Qt)})}),"multicategory"===He.type){var Tn={x:2,y:10}[Dt];un.push(function(){var yn={x:"height",y:"width"}[Dt],on=Pn()[yn]+Tn+(He._tickAngles[Ct+"tick"]?He.tickfont.size*re:0);return Q.drawLabels(Ge,He,{vals:ft(He,Kt),layer:an,cls:Ct+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:wn,labelFns:Q.makeLabelFns(He,Qt+on*or[4])})}),un.push(function(){return He._depth=or[4]*(Pn("tick2")[He.side]-Qt),function(yn,on,nn){var dn=on._id+"divider",xn=nn.vals,Bn=nn.layer.selectAll("path."+dn).data(xn,kt);Bn.exit().remove(),Bn.enter().insert("path",":first-child").classed(dn,1).classed("crisp",1).call(i.stroke,on.dividercolor).style("stroke-width",r.crispRound(yn,on.dividerwidth,1)+"px"),Bn.attr("transform",nn.transFn).attr("d",nn.path)}(Ge,He,{vals:Nn,layer:an,path:Q.makeTickPath(He,Qt,or[4],{len:He._depth}),transFn:wn})})}else He.title.hasOwnProperty("standoff")&&un.push(function(){He._depth=or[4]*(Pn()[He.side]-Qt)});var kn=T.getComponentMethod("rangeslider","isVisible")(He);return ut.skipTitle||kn&&"bottom"===He.side||un.push(function(){return function(yn,on){var nn,dn=yn._fullLayout,xn=on._id,Bn=xn.charAt(0),Wn=on.title.font.size,Qn=(on.title.text.match(l.BR_TAG_ALL)||[]).length;if(on.title.hasOwnProperty("standoff"))"bottom"===on.side||"right"===on.side?nn=on._depth+on.title.standoff+Wn*ae:"top"!==on.side&&"left"!==on.side||(nn=on._depth+on.title.standoff+Wn*(W+Qn*re));else{var ar=et(on);if("multicategory"===on.type)nn=on._depth;else{var yr=1.5*Wn;ar&&(yr=.5*Wn,"outside"===on.ticks&&(yr+=on.ticklen)),nn=10+yr+(on.linewidth?on.linewidth-1:0)}ar||(nn+="x"===Bn?"top"===on.side?Wn*(on.showticklabels?1:0):Wn*(on.showticklabels?1.5:.5):"right"===on.side?Wn*(on.showticklabels?1:.5):Wn*(on.showticklabels?.5:0))}var ur,gr,br,pr,Lr=Q.getPxPosition(yn,on);if("x"===Bn?(gr=on._offset+on._length/2,br="top"===on.side?Lr-nn:Lr+nn):(br=on._offset+on._length/2,gr="right"===on.side?Lr+nn:Lr-nn,ur={rotate:"-90",offset:0}),"multicategory"!==on.type){var Ur=on._selections[on._id+"tick"];if(pr={selection:Ur,side:on.side},Ur&&Ur.node()&&Ur.node().parentNode){var zr=r.getTranslate(Ur.node().parentNode);pr.offsetLeft=zr.x,pr.offsetTop=zr.y}on.title.hasOwnProperty("standoff")&&(pr.pad=0)}return on._titleStandoff=nn,t.draw(yn,xn+"title",{propContainer:on,propName:on._name+".title.text",placeholder:dn._dfltTitle[Bn],avoid:pr,transform:ur,attributes:{x:gr,y:br,"text-anchor":"middle"}})}(Ge,He)}),un.push(function(){var yn,on,nn,dn,xn=He.side.charAt(0),Bn=ne[He.side].charAt(0),Wn=Q.getPxPosition(Ge,He),Qn=On?He.ticklen:0;(He.automargin||kn||He._shiftPusher)&&("multicategory"===He.type?yn=Pn("tick2"):(yn=Pn(),"x"===Dt&&"b"===xn&&(He._depth=Math.max(yn.width>0?yn.bottom-Wn:0,Qn))));var ar=0,yr=0;if(He._shiftPusher&&(ar=Math.max(Qn,yn.height>0?"l"===xn?Wn-yn.left:yn.right-Wn:0),He.title.text!==Pt._dfltTitle[Dt]&&(yr=(He._titleStandoff||0)+(He._titleScoot||0),"l"===xn&&(yr+=St(He))),He._fullDepth=Math.max(ar,yr)),He.automargin){on={x:0,y:0,r:0,l:0,t:0,b:0};var ur=[0,1],gr="number"==typeof He._shift?He._shift:0;if("x"===Dt){if("b"===xn?on[xn]=He._depth:(on[xn]=He._depth=Math.max(yn.width>0?Wn-yn.top:0,Qn),ur.reverse()),yn.width>0){var br=yn.right-(He._offset+He._length);br>0&&(on.xr=1,on.r=br);var pr=He._offset-yn.left;pr>0&&(on.xl=0,on.l=pr)}}else if("l"===xn?(He._depth=Math.max(yn.height>0?Wn-yn.left:0,Qn),on[xn]=He._depth-gr):(He._depth=Math.max(yn.height>0?yn.right-Wn:0,Qn),on[xn]=He._depth+gr,ur.reverse()),yn.height>0){var Lr=yn.bottom-(He._offset+He._length);Lr>0&&(on.yb=0,on.b=Lr);var Ur=He._offset-yn.top;Ur>0&&(on.yt=1,on.t=Ur)}on[Ut]="free"===He.anchor?He.position:He._anchorAxis.domain[ur[0]],He.title.text!==Pt._dfltTitle[Dt]&&(on[xn]+=St(He)+(He.title.standoff||0)),He.mirror&&"free"!==He.anchor&&((nn={x:0,y:0,r:0,l:0,t:0,b:0})[Bn]=He.linewidth,He.mirror&&!0!==He.mirror&&(nn[Bn]+=Qn),!0===He.mirror||"ticks"===He.mirror?nn[Ut]=He._anchorAxis.domain[ur[1]]:"all"!==He.mirror&&"allticks"!==He.mirror||(nn[Ut]=[He._counterDomainMin,He._counterDomainMax][ur[1]]))}kn&&(dn=T.getComponentMethod("rangeslider","autoMarginOpts")(Ge,He)),"string"==typeof He.automargin&&(it(on,He.automargin),it(nn,He.automargin)),o.autoMargin(Ge,ot(He),on),o.autoMargin(Ge,Rt(He),nn),o.autoMargin(Ge,Vt(He),dn)}),b.syncOrAsync(un)}}function Pn(yn){var on=Ct+(yn||"tick");return Fn[on]||(Fn[on]=function(nn,dn,xn){var Bn,Wn,Qn,ar;if(nn._selections[dn].size())Bn=1/0,Wn=-1/0,Qn=1/0,ar=-1/0,nn._selections[dn].each(function(){var ur=lt(this),gr=r.bBox(ur.node().parentNode);Bn=Math.min(Bn,gr.top),Wn=Math.max(Wn,gr.bottom),Qn=Math.min(Qn,gr.left),ar=Math.max(ar,gr.right)});else{var yr=Q.makeLabelFns(nn,xn);Bn=Wn=yr.yFn({dx:0,dy:0,fontSize:0}),Qn=ar=yr.xFn({dx:0,dy:0,fontSize:0})}return{top:Bn,bottom:Wn,left:Qn,right:ar,height:Wn-Bn,width:ar-Qn}}(He,on,Qt)),Fn[on]}},Q.getTickSigns=function(Ge,He){var ut=Ge._id.charAt(0),xt=Ge.side==={x:"top",y:"right"}[ut]?1:-1,At=[-1,1,xt,-xt];return"inside"!==(He?(Ge.minor||{}).ticks:Ge.ticks)==("x"===ut)&&(At=At.map(function(Mt){return-Mt})),Ge.side&&At.push({l:-1,t:-1,r:1,b:1}[Ge.side.charAt(0)]),At},Q.makeTransTickFn=function(Ge){return"x"===Ge._id.charAt(0)?function(He){return p(Ge._offset+Ge.l2p(He.x),0)}:function(He){return p(0,Ge._offset+Ge.l2p(He.x))}},Q.makeTransTickLabelFn=function(Ge){var He=function(xt){var At=xt.ticklabelposition||"",Mt=function(sn){return-1!==At.indexOf(sn)},yt=Mt("top"),Pt=Mt("left"),Ct=Mt("right"),Dt=Mt("bottom"),Ut=Mt("inside"),Bt=Dt||Pt||yt||Ct;if(!Bt&&!Ut)return[0,0];var qt=xt.side,an=Bt?(xt.tickwidth||0)/2:0,mn=3,Qt=xt.tickfont?xt.tickfont.size:12;return(Dt||yt)&&(an+=Qt*ae,mn+=(xt.linewidth||0)/2),(Pt||Ct)&&(an+=(xt.linewidth||0)/2,mn+=3),Ut&&"top"===qt&&(mn-=Qt*(1-ae)),(Pt||yt)&&(an=-an),"bottom"!==qt&&"right"!==qt||(mn=-mn),[Bt?an:0,Ut?mn:0]}(Ge),ut=He[0],tt=He[1];return"x"===Ge._id.charAt(0)?function(xt){return p(ut+Ge._offset+Ge.l2p(dt(xt)),tt)}:function(xt){return p(tt,ut+Ge._offset+Ge.l2p(dt(xt)))}},Q.makeTickPath=function(Ge,He,ut,tt){tt||(tt={});var xt=tt.minor;if(xt&&!Ge.minor)return"";var At=void 0!==tt.len?tt.len:xt?Ge.minor.ticklen:Ge.ticklen,Mt=Ge._id.charAt(0),yt=(Ge.linewidth||1)/2;return"x"===Mt?"M0,"+(He+yt*ut)+"v"+At*ut:"M"+(He+yt*ut)+",0h"+At*ut},Q.makeLabelFns=function(Ge,He,ut){var tt=Ge.ticklabelposition||"",xt=function(Dn){return-1!==tt.indexOf(Dn)},At=xt("top"),Mt=xt("left"),yt=xt("right"),Pt=xt("bottom")||Mt||At||yt,Ct=xt("inside"),Dt="inside"===tt&&"inside"===Ge.ticks||!Ct&&"outside"===Ge.ticks&&"boundaries"!==Ge.tickson,Ut=0,Bt=0,qt=Dt?Ge.ticklen:0;if(Ct?qt*=-1:Pt&&(qt=0),Dt&&(Ut+=qt,ut)){var an=b.deg2rad(ut);Ut=qt*Math.cos(an)+1,Bt=qt*Math.sin(an)}Ge.showticklabels&&(Dt||Ge.showline)&&(Ut+=.2*Ge.tickfont.size);var mn,Qt,sn,Kt,qn,Fn={labelStandoff:Ut+=(Ge.linewidth||1)/2*(Ct?-1:1),labelShift:Bt},Sn=0,hn=Ge.side,wn=Ge._id.charAt(0),pn=Ge.tickangle;if("x"===wn)Kt=(qn=!Ct&&"bottom"===hn||Ct&&"top"===hn)?1:-1,Ct&&(Kt*=-1),mn=Bt*Kt,Qt=He+Ut*Kt,sn=qn?1:-.2,90===Math.abs(pn)&&(Ct?sn+=W:sn=-90===pn&&"bottom"===hn?ae:90===pn&&"top"===hn?W:.5,Sn=W/2*(pn/90)),Fn.xFn=function(Dn){return Dn.dx+mn+Sn*Dn.fontSize},Fn.yFn=function(Dn){return Dn.dy+Qt+Dn.fontSize*sn},Fn.anchorFn=function(Dn,Vn){if(Pt){if(Mt)return"end";if(yt)return"start"}return k(Vn)&&0!==Vn&&180!==Vn?Vn*Kt<0!==Ct?"end":"start":"middle"},Fn.heightFn=function(Dn,Vn,Gn){return Vn<-60||Vn>60?-.5*Gn:"top"===Ge.side!==Ct?-Gn:0};else if("y"===wn){if(Kt=(qn=!Ct&&"left"===hn||Ct&&"right"===hn)?1:-1,Ct&&(Kt*=-1),mn=Ut,Qt=Bt*Kt,sn=0,Ct||90!==Math.abs(pn)||(sn=-90===pn&&"left"===hn||90===pn&&"right"===hn?ae:.5),Ct){var An=k(pn)?+pn:0;if(0!==An){var On=b.deg2rad(An);Sn=Math.abs(Math.sin(On))*ae*Kt,sn=0}}Fn.xFn=function(Dn){return Dn.dx+He-(mn+Dn.fontSize*sn)*Kt+Sn*Dn.fontSize},Fn.yFn=function(Dn){return Dn.dy+Qt+Dn.fontSize*W},Fn.anchorFn=function(Dn,Vn){return k(Vn)&&90===Math.abs(Vn)?"middle":qn?"end":"start"},Fn.heightFn=function(Dn,Vn,Gn){return"right"===Ge.side&&(Vn*=-1),Vn<-30?-Gn:Vn<30?-.5*Gn:0}}return Fn},Q.drawTicks=function(Ge,He,ut){ut=ut||{};var tt=He._id+"tick",xt=[].concat(He.minor&&He.minor.ticks?ut.vals.filter(function(Mt){return Mt.minor&&!Mt.noTick}):[]).concat(He.ticks?ut.vals.filter(function(Mt){return!Mt.minor&&!Mt.noTick}):[]),At=ut.layer.selectAll("path."+tt).data(xt,kt);At.exit().remove(),At.enter().append("path").classed(tt,1).classed("ticks",1).classed("crisp",!1!==ut.crisp).each(function(Mt){return i.stroke(S.select(this),Mt.minor?He.minor.tickcolor:He.tickcolor)}).style("stroke-width",function(Mt){return r.crispRound(Ge,Mt.minor?He.minor.tickwidth:He.tickwidth,1)+"px"}).attr("d",ut.path).style("display",null),gt(He,[U]),At.attr("transform",ut.transFn)},Q.drawGrid=function(Ge,He,ut){if(ut=ut||{},"sync"!==He.tickmode){var tt=He._id+"grid",xt=He.minor&&He.minor.showgrid,At=xt?ut.vals.filter(function(sn){return sn.minor}):[],Mt=He.showgrid?ut.vals.filter(function(sn){return!sn.minor}):[],yt=ut.counterAxis;if(yt&&Q.shouldShowZeroLine(Ge,He,yt))for(var Pt="array"===He.tickmode,Ct=0;Ct<Mt.length;Ct++){var Dt=Mt[Ct].x;if(Pt?!Dt:Math.abs(Dt)<He.dtick/100){if(Mt=Mt.slice(0,Ct).concat(Mt.slice(Ct+1)),!Pt)break;Ct--}}He._gw=r.crispRound(Ge,He.gridwidth,1);for(var Ut=xt?r.crispRound(Ge,He.minor.gridwidth,1):0,Bt=ut.layer,qt=ut.minorLayer,an=1;an>=0;an--){var mn=an?Bt:qt;if(mn){var Qt=mn.selectAll("path."+tt).data(an?Mt:At,kt);Qt.exit().remove(),Qt.enter().append("path").classed(tt,1).classed("crisp",!1!==ut.crisp),Qt.attr("transform",ut.transFn).attr("d",ut.path).each(function(sn){return i.stroke(S.select(this),sn.minor?He.minor.gridcolor:He.gridcolor||"#ddd")}).style("stroke-dasharray",function(sn){return r.dashStyle(sn.minor?He.minor.griddash:He.griddash,sn.minor?He.minor.gridwidth:He.gridwidth)}).style("stroke-width",function(sn){return(sn.minor?Ut:He._gw)+"px"}).style("display",null),"function"==typeof ut.path&&Qt.attr("d",ut.path)}}gt(He,[V,R])}},Q.drawZeroLine=function(Ge,He,ut){var tt=He._id+"zl",xt=Q.shouldShowZeroLine(Ge,He,(ut=ut||ut).counterAxis),At=ut.layer.selectAll("path."+tt).data(xt?[{x:0,id:He._id}]:[]);At.exit().remove(),At.enter().append("path").classed(tt,1).classed("zl",1).classed("crisp",!1!==ut.crisp).each(function(){ut.layer.selectAll("path").sort(function(Mt,yt){return oe(Mt.id,yt.id)})}),At.attr("transform",ut.transFn).attr("d",ut.path).call(i.stroke,He.zerolinecolor||i.defaultLine).style("stroke-width",r.crispRound(Ge,He.zerolinewidth,He._gw||1)+"px").style("display",null),gt(He,[z])},Q.drawLabels=function(Ge,He,ut){var tt=Ge._fullLayout,At=(ut=ut||{}).cls||He._id+"tick",Mt=ut.vals.filter(function($n){return $n.text}),yt=ut.labelFns,Pt=ut.secondary?0:He.tickangle,Ct=(He._prevTickAngles||{})[At],Dt=ut.layer.selectAll("g."+At).data(He.showticklabels?Mt:[],kt),Ut=[];function Bt($n,mr){$n.each(function(lr){var vr=S.select(this),or=vr.select(".text-math-group"),Or=yt.anchorFn(lr,mr),fn=ut.transFn.call(vr.node(),lr)+(k(mr)&&0!=+mr?" rotate("+mr+","+yt.xFn(lr)+","+(yt.yFn(lr)-lr.fontSize/2)+")":""),gn=l.lineCount(vr),Hn=re*lr.fontSize,En=yt.heightFn(lr,k(mr)?+mr:0,(gn-1)*Hn);if(En&&(fn+=p(0,En)),or.empty()){var Zn=vr.select("text");Zn.attr({transform:fn,"text-anchor":Or}),Zn.style("opacity",1),He._adjustTickLabelsOverflow&&He._adjustTickLabelsOverflow()}else{var Kn=r.bBox(or.node()).width*{end:-.5,start:.5}[Or];or.attr("transform",fn+p(Kn,0))}})}Dt.enter().append("g").classed(At,1).append("text").attr("text-anchor","middle").each(function($n){var mr=S.select(this),lr=Ge._promises.length;mr.call(l.positionText,yt.xFn($n),yt.yFn($n)).call(r.font,{family:$n.font,size:$n.fontSize,color:$n.fontColor,weight:$n.fontWeight,style:$n.fontStyle,variant:$n.fontVariant,textcase:$n.fontTextcase,lineposition:$n.fontLineposition,shadow:$n.fontShadow}).text($n.text).call(l.convertToTspans,Ge),Ge._promises[lr]?Ut.push(Ge._promises.pop().then(function(){Bt(mr,Pt)})):Bt(mr,Pt)}),gt(He,[Z]),Dt.exit().remove(),ut.repositionOnUpdate&&Dt.each(function($n){S.select(this).select("text").call(l.positionText,yt.xFn($n),yt.yFn($n))}),He._adjustTickLabelsOverflow=function(){var $n=He.ticklabeloverflow;if($n&&"allow"!==$n){var mr=-1!==$n.indexOf("hide"),lr="x"===He._id.charAt(0),vr=0,or=lr?Ge._fullLayout.width:Ge._fullLayout.height;if(-1!==$n.indexOf("domain")){var Or=b.simpleMap(He.range,He.r2l);vr=He.l2p(Or[0])+He._offset,or=He.l2p(Or[1])+He._offset}var fn=Math.min(vr,or),gn=Math.max(vr,or),Hn=He.side,En=1/0,Zn=-1/0;for(var Kn in Dt.each(function(Dr){var cn=S.select(this);if(cn.select(".text-math-group").empty()){var In=r.bBox(cn.node()),Nt=0;lr?(In.right>gn||In.left<fn)&&(Nt=1):(In.bottom>gn||In.top+(He.tickangle?0:Dr.fontSize/4)<fn)&&(Nt=1);var Zt=cn.select("text");Nt?mr&&Zt.style("opacity",0):(Zt.style("opacity",1),En="bottom"===Hn||"right"===Hn?Math.min(En,lr?In.top:In.left):-1/0,Zn="top"===Hn||"left"===Hn?Math.max(Zn,lr?In.bottom:In.right):1/0)}}),tt._plots){var tr=tt._plots[Kn];if(He._id===tr.xaxis._id||He._id===tr.yaxis._id){var fr=lr?tr.yaxis:tr.xaxis;fr&&(fr["_visibleLabelMin_"+He._id]=En,fr["_visibleLabelMax_"+He._id]=Zn)}}}},He._hideCounterAxisInsideTickLabels=function($n){var mr="x"===He._id.charAt(0),lr=[];for(var vr in tt._plots){var or=tt._plots[vr];He._id!==or.xaxis._id&&He._id!==or.yaxis._id||lr.push(mr?or.yaxis:or.xaxis)}lr.forEach(function(Or,fn){Or&&et(Or)&&($n||[z,R,V,U,Z]).forEach(function(gn){var Hn="tick"===gn.K&&"text"===gn.L&&"period"===He.ticklabelmode,En=tt._plots[He._mainSubplot];(gn.K===z.K?En.zerolinelayer.selectAll("."+He._id+"zl"):gn.K===R.K?En.minorGridlayer.selectAll("."+He._id):gn.K===V.K?En.gridlayer.selectAll("."+He._id):En[He._id.charAt(0)+"axislayer"]).each(function(){var Zn=S.select(this);gn.L&&(Zn=Zn.selectAll(gn.L)),Zn.each(function(Kn){var tr=He.l2p(Hn?dt(Kn):Kn.x)+He._offset,fr=S.select(this);tr<He["_visibleLabelMax_"+Or._id]&&tr>He["_visibleLabelMin_"+Or._id]?fr.style("display","none"):"tick"!==gn.K||fn||fr.style("display",null)})})})})},Bt(Dt,Ct+1?Ct:Pt);var qt=null;He._selections&&(He._selections[At]=Dt);var an=[function(){return Ut.length&&Promise.all(Ut)}];He.automargin&&tt._redrawFromAutoMarginCount&&90===Ct?(qt=Ct,an.push(function(){Bt(Dt,Ct)})):an.push(function(){if(Bt(Dt,Pt),Mt.length&&He.autotickangles&&("log"!==He.type||"D"!==String(He.dtick).charAt(0))){qt=He.autotickangles[0];var $n,mr=0,lr=[],vr=1;Dt.each(function(Pn){mr=Math.max(mr,Pn.fontSize);var yn=He.l2p(Pn.x),on=lt(this),nn=r.bBox(on.node());vr=Math.max(vr,l.lineCount(on)),lr.push({top:0,bottom:10,height:10,left:yn-nn.width/2,right:yn+nn.width/2+2,width:nn.width+2})});var or=("boundaries"===He.tickson||He.showdividers)&&!ut.secondary,Or=Mt.length,fn=Math.abs((Mt[Or-1].x-Mt[0].x)*He._m)/(Or-1),gn=or?fn/2:fn,Hn=or?He.ticklen:1.25*mr*vr,En=gn/Math.sqrt(Math.pow(gn,2)+Math.pow(Hn,2)),Zn=He.autotickangles.map(function(Pn){return Pn*Math.PI/180}),Kn=Zn.find(function(Pn){return Math.abs(Math.cos(Pn))<=En});void 0===Kn&&(Kn=Zn.reduce(function(Pn,yn){return Math.abs(Math.cos(Pn))<Math.abs(Math.cos(yn))?Pn:yn},Zn[0]));var tr=Kn*(180/Math.PI);if(or){var fr=2;for(He.ticks&&(fr+=He.tickwidth/2),$n=0;$n<lr.length;$n++){var Dr=Mt[$n].xbnd,cn=lr[$n];if(null!==Dr[0]&&cn.left-He.l2p(Dr[0])<fr||null!==Dr[1]&&He.l2p(Dr[1])-cn.right<fr){qt=tr;break}}}else{var In=He.ticklabelposition||"",Nt=function(Pn){return-1!==In.indexOf(Pn)},Zt=Nt("top"),un=Nt("left"),Tn=Nt("right"),kn=Nt("bottom")||un||Zt||Tn?(He.tickwidth||0)+6:0;for($n=0;$n<lr.length-1;$n++)if(b.bBoxIntersect(lr[$n],lr[$n+1],kn)){qt=tr;break}}qt&&Bt(Dt,qt)}}),He._tickAngles&&an.push(function(){He._tickAngles[At]=null===qt?k(Pt)?Pt:0:qt});var mn=function(){var $n=0,mr=0;return Dt.each(function(lr,vr){var or,Or=lt(this);Or.select(".text-math-group").empty()&&(He._vals[vr]&&(or=He._vals[vr].bb||r.bBox(Or.node()),He._vals[vr].bb=or),$n=Math.max($n,or.width),mr=Math.max(mr,or.height))}),{labelsMaxW:$n,labelsMaxH:mr}},Qt=He._anchorAxis;if(Qt&&(Qt.autorange||Qt.insiderange)&&et(He)&&!fe(tt,He._id)&&(tt._insideTickLabelsUpdaterange||(tt._insideTickLabelsUpdaterange={}),Qt.autorange&&(tt._insideTickLabelsUpdaterange[Qt._name+".autorange"]=Qt.autorange,an.push(mn)),Qt.insiderange)){var sn=mn(),Kt="y"===He._id.charAt(0)?sn.labelsMaxW:sn.labelsMaxH;Kt+=6,"inside"===He.ticklabelposition&&(Kt+=He.ticklen||0);var qn="right"===He.side||"top"===He.side?1:-1,Fn=1===qn?1:0,Sn=1===qn?0:1,hn=[];hn[Sn]=Qt.range[Sn];var wn=Qt.range,pn=Qt.r2p(wn[Fn]),An=Qt.r2p(wn[Sn]),On=tt._insideTickLabelsUpdaterange[Qt._name+".range"];if(On){var Dn=Qt.r2p(On[Fn]),Vn=Qt.r2p(On[Sn]),Gn=qn*("y"===He._id.charAt(0)?1:-1);Gn*pn<Gn*Dn&&(pn=Dn,hn[Fn]=wn[Fn]=On[Fn]),Gn*An>Gn*Vn&&(An=Vn,hn[Sn]=wn[Sn]=On[Sn])}var Nn=Math.abs(An-pn);Nn-Kt>0?Kt*=1+Kt/(Nn-=Kt):Kt=0,"y"!==He._id.charAt(0)&&(Kt=-Kt),hn[Fn]=Qt.p2r(Qt.r2p(wn[Fn])+qn*Kt),"min"===Qt.autorange||"max reversed"===Qt.autorange?(hn[0]=null,Qt._rangeInitial0=void 0,Qt._rangeInitial1=void 0):"max"!==Qt.autorange&&"min reversed"!==Qt.autorange||(hn[1]=null,Qt._rangeInitial0=void 0,Qt._rangeInitial1=void 0),tt._insideTickLabelsUpdaterange[Qt._name+".range"]=hn}var ir=b.syncOrAsync(an);return ir&&ir.then&&Ge._promises.push(ir),ir},Q.getPxPosition=function(Ge,He){var ut,tt=Ge._fullLayout._size,xt=He._id.charAt(0),At=He.side;return"free"!==He.anchor?ut=He._anchorAxis:"x"===xt?ut={_offset:tt.t+(1-(He.position||0))*tt.h,_length:0}:"y"===xt&&(ut={_offset:tt.l+(He.position||0)*tt.w+He._shift,_length:0}),"top"===At||"left"===At?ut._offset:"bottom"===At||"right"===At?ut._offset+ut._length:void 0},Q.shouldShowZeroLine=function(Ge,He,ut){var tt=b.simpleMap(He.range,He.r2l);return tt[0]*tt[1]<=0&&He.zeroline&&("linear"===He.type||"-"===He.type)&&!(He.rangebreaks&&He.maskBreaks(0)===O)&&(Tt(He,0)||!function(xt,At,Mt,yt){var Pt=Mt._mainAxis;if(Pt){var Ct=xt._fullLayout,Dt=At._id.charAt(0),Ut=Q.counterLetter(At._id),Bt=At._offset+(Math.abs(yt[0])<Math.abs(yt[1])==("x"===Dt)?0:At._length),qt=Ct._plots[Mt._mainSubplot];if(!(qt.mainplotinfo||qt).overlays.length)return sn(Mt);for(var an=Q.list(xt,Ut),mn=0;mn<an.length;mn++){var Qt=an[mn];if(Qt._mainAxis===Pt&&sn(Qt))return!0}}function sn(Kt){if(!Kt.showline||!Kt.linewidth)return!1;var qn=Math.max((Kt.linewidth+At.zerolinewidth)/2,1);function Fn(wn){return"number"==typeof wn&&Math.abs(wn-Bt)<qn}if(Fn(Kt._mainLinePosition)||Fn(Kt._mainMirrorPosition))return!0;var Sn=Kt._linepositions||{};for(var hn in Sn)if(Fn(Sn[hn][0])||Fn(Sn[hn][1]))return!0}}(Ge,He,ut,tt)||function(xt,At){for(var Mt=xt._fullData,yt=At._mainSubplot,Pt=At._id.charAt(0),Ct=0;Ct<Mt.length;Ct++){var Dt=Mt[Ct];if(!0===Dt.visible&&Dt.xaxis+Dt.yaxis===yt&&(T.traceIs(Dt,"bar-like")&&Dt.orientation==={x:"h",y:"v"}[Pt]||Dt.fill&&Dt.fill.charAt(Dt.fill.length-1)===Pt))return!0}return!1}(Ge,He))},Q.clipEnds=function(Ge,He){return He.filter(function(ut){return Tt(Ge,ut.x)})},Q.allowAutoMargin=function(Ge){for(var He=Q.list(Ge,"",!0),ut=0;ut<He.length;ut++){var tt=He[ut];tt.automargin&&(o.allowAutoMargin(Ge,ot(tt)),tt.mirror&&o.allowAutoMargin(Ge,Rt(tt))),T.getComponentMethod("rangeslider","isVisible")(tt)&&o.allowAutoMargin(Ge,Vt(tt))}},Q.swap=function(Ge,He){for(var ut=function(xt,At){var Mt,yt,Pt=[];for(Mt=0;Mt<At.length;Mt++){var Ct=[],Dt=xt._fullData[At[Mt]].xaxis,Ut=xt._fullData[At[Mt]].yaxis;if(Dt&&Ut){for(yt=0;yt<Pt.length;yt++)-1===Pt[yt].x.indexOf(Dt)&&-1===Pt[yt].y.indexOf(Ut)||Ct.push(yt);if(Ct.length){var Bt,qt=Pt[Ct[0]];if(Ct.length>1)for(yt=1;yt<Ct.length;yt++)Ht(qt.x,(Bt=Pt[Ct[yt]]).x),Ht(qt.y,Bt.y);Ht(qt.x,[Dt]),Ht(qt.y,[Ut])}else Pt.push({x:[Dt],y:[Ut]})}}return Pt}(Ge,He),tt=0;tt<ut.length;tt++)zt(Ge,ut[tt].x,ut[tt].y)}},52976:function(ie,F,e){"use strict";var S=e(38248),k=e(3400),o=e(39032).BADNUM,T=k.isArrayOrTypedArray,b=k.isDateTime,p=k.cleanNumber,l=Math.round;function t(r,n){return n?S(r):"number"==typeof r}function i(r){return Math.max(1,(r-1)/1e3)}ie.exports=function(r,n,a){var m,s=r,c=a.noMultiCategory;if(T(s)&&!s.length)return"-";if(!c&&T((m=s)[0])&&T(m[1]))return"multicategory";if(c&&Array.isArray(s[0])){for(var h=[],u=0;u<s.length;u++)if(T(s[u]))for(var y=0;y<s[u].length;y++)h.push(s[u][y]);s=h}if(function(m,g){for(var x=m.length,v=i(x),_=0,f=0,C={},w=0;w<x;w+=v){var E=m[l(w)],P=String(E);C[P]||(C[P]=1,b(E,g)&&_++,S(E)&&f++)}return _>2*f}(s,n))return"date";var d="strict"!==a.autotypenumbers;return function(m,g){for(var x=m.length,v=i(x),_=0,f=0,C={},w=0;w<x;w+=v){var E=m[l(w)],P=String(E);if(!C[P]){C[P]=1;var L=typeof E;"boolean"===L?f++:(g?p(E)!==o:"number"===L)?_++:"string"===L&&f++}}return f>2*_}(s,d)?"category":function(m,g){for(var x=m.length,v=0;v<x;v++)if(t(m[v],g))return!0;return!1}(s,d)?"linear":"-"}},28336:function(ie,F,e){"use strict";var S=e(38248),k=e(24040),o=e(3400),T=e(31780),b=e(51272),p=e(94724),l=e(26332),t=e(25404),i=e(95936),r=e(42568),n=e(22416),a=e(42136),s=e(96312),c=e(78344),h=e(33816).WEEKDAY_PATTERN,u=e(33816).HOUR_PATTERN;function y(g,x,v){function _(z,V){return o.coerce(g,x,p.rangebreaks,z,V)}if(_("enabled")){var f=_("bounds");if(f&&f.length>=2){var C,w,E="";if(2===f.length)for(C=0;C<2;C++)if(w=m(f[C])){E=h;break}var P=_("pattern",E);if(P===h)for(C=0;C<2;C++)(w=m(f[C]))&&(x.bounds[C]=f[C]=w-1);if(P)for(C=0;C<2;C++)switch(w=f[C],P){case h:if(!S(w)||(w=+w)!==Math.floor(w)||w<0||w>=7)return void(x.enabled=!1);x.bounds[C]=f[C]=w;break;case u:if(!S(w)||(w=+w)<0||w>24)return void(x.enabled=!1);x.bounds[C]=f[C]=w}if(!1===v.autorange){var L=v.range;if(L[0]<L[1]){if(f[0]<L[0]&&f[1]>L[1])return void(x.enabled=!1)}else if(f[0]>L[0]&&f[1]<L[1])return void(x.enabled=!1)}}else{var O=_("values");if(!O||!O.length)return void(x.enabled=!1);_("dvalue")}}}ie.exports=function(g,x,v,_,f){var C,w=_.letter,E=_.font||{},P=_.splomStash||{},L=v("visible",!_.visibleDflt),z=x.type||(x._template||{}).type||"-";"date"===z&&(k.getComponentMethod("calendars","handleDefaults")(g,x,"calendar",_.calendar),_.noTicklabelmode||(C=v("ticklabelmode")));var V="";_.noTicklabelposition&&"multicategory"!==z||(V=o.coerce(g,x,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===C?["outside","inside"]:"x"===w?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),_.noTicklabeloverflow||v("ticklabeloverflow",-1!==V.indexOf("inside")?"hide past domain":"category"===z||"multicategory"===z?"allow":"hide past div"),c(x,f),s(g,x,v,_),n(g,x,v,_),"category"===z||_.noHover||v("hoverformat");var R=v("color"),U=R!==p.color.dflt?R:E.color,Z=P.label||f._dfltTitle[w];if(r(g,x,v,z,_),!L)return x;v("title.text",Z),o.coerceFont(v,"title.font",E,{overrideDflt:{size:o.bigFont(E.size),color:U}}),l(g,x,v,z);var N=_.hasMinor;if(N&&(T.newContainer(x,"minor"),l(g,x,v,z,{isMinor:!0})),i(g,x,v,z,_),t(g,x,v,_),N){var G=_.isMinor;_.isMinor=!0,t(g,x,v,_),_.isMinor=G}a(g,x,v,{dfltColor:R,bgColor:_.bgColor,showGrid:_.showGrid,hasMinor:N,attributes:p}),!N||x.minor.ticks||x.minor.showgrid||delete x.minor,(x.showline||x.ticks)&&v("mirror");var W,ae="multicategory"===z;if(_.noTickson||"category"!==z&&!ae||!x.ticks&&!x.showgrid||(ae&&(W="boundaries"),"boundaries"===v("tickson",W)&&delete x.ticklabelposition),ae&&v("showdividers")&&(v("dividercolor"),v("dividerwidth")),"date"===z)if(b(g,x,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:y}),x.rangebreaks.length){for(var re=0;re<x.rangebreaks.length;re++)if(x.rangebreaks[re].pattern===h){x._hasDayOfWeekBreaks=!0;break}if(c(x,f),f._has("scattergl")||f._has("splom"))for(var ne=0;ne<_.data.length;ne++){var Q=_.data[ne];"scattergl"!==Q.type&&"splom"!==Q.type||(Q.visible=!1,o.warn(Q.type+" traces do not work on axes with rangebreaks. Setting trace "+Q.index+" to `visible: false`."))}}else delete x.rangebreaks;return x};var d={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function m(g){if("string"==typeof g)return d[g.substr(0,3).toLowerCase()]}},29736:function(ie,F,e){"use strict";var S=e(26880),k=S.FORMAT_LINK,o=S.DATE_FORMAT_LINK;function T(p,l){return["Sets the "+p+" formatting rule"+(l?"for `"+l+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+k+"."].join(" ")}function b(p,l){return T(p,l)+[" And for dates see: "+o+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}ie.exports={axisHoverFormat:function(p,l){return{valType:"string",dflt:"",editType:"none",description:(l?T:b)("hover text",p)+["By default the values are formatted using "+(l?"generic number format":"`"+p+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:T,descriptionWithDates:b}},79811:function(ie,F,e){"use strict";var S=e(24040),k=e(33816);function o(T,b){if(b&&b.length)for(var p=0;p<b.length;p++)if(b[p][T])return!0;return!1}F.id2name=function(T){if("string"==typeof T&&T.match(k.AX_ID_PATTERN)){var b=T.split(" ")[0].substr(1);return"1"===b&&(b=""),T.charAt(0)+"axis"+b}},F.name2id=function(T){if(T.match(k.AX_NAME_PATTERN)){var b=T.substr(5);return"1"===b&&(b=""),T.charAt(0)+b}},F.cleanId=function(T,b,p){var l=/( domain)$/.test(T);if("string"==typeof T&&T.match(k.AX_ID_PATTERN)&&(!b||T.charAt(0)===b)&&(!l||p)){var t=T.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===t&&(t=""),T.charAt(0)+t+(l&&p?" domain":"")}},F.list=function(T,b,p){var l=T._fullLayout;if(!l)return[];var t,i=F.listIds(T,b),r=new Array(i.length);for(t=0;t<i.length;t++){var n=i[t];r[t]=l[n.charAt(0)+"axis"+n.substr(1)]}if(!p){var a=l._subplots.gl3d||[];for(t=0;t<a.length;t++){var s=l[a[t]];b?r.push(s[b+"axis"]):r.push(s.xaxis,s.yaxis,s.zaxis)}}return r},F.listIds=function(T,b){var p=T._fullLayout;if(!p)return[];var l=p._subplots;return b?l[b+"axis"]:l.xaxis.concat(l.yaxis)},F.getFromId=function(T,b,p){var l=T._fullLayout;return b=void 0===b||"string"!=typeof b?b:b.replace(" domain",""),"x"===p?b=b.replace(/y[0-9]*/,""):"y"===p&&(b=b.replace(/x[0-9]*/,"")),l[F.id2name(b)]},F.getFromTrace=function(T,b,p){var l=T._fullLayout,t=null;if(S.traceIs(b,"gl3d")){var i=b.scene;"scene"===i.substr(0,5)&&(t=l[i][p+"axis"])}else t=F.getFromId(T,b[p+"axis"]||p);return t},F.idSort=function(T,b){var p=T.charAt(0),l=b.charAt(0);return p!==l?p>l?1:-1:+(T.substr(1)||1)-+(b.substr(1)||1)},F.ref2id=function(T){return!!/^[xyz]/.test(T)&&T.split(" ")[0]},F.isLinked=function(T,b){return o(b,T._axisMatchGroups)||o(b,T._axisConstraintGroups)}},22416:function(ie,F,e){"use strict";var S=e(38116).isTypedArraySpec;ie.exports=function(k,o,T,b){if("category"===o.type){var p,l=k.categoryarray,t=Array.isArray(l)&&l.length>0||S(l);t&&(p="array");var i,r=T("categoryorder",p);"array"===r&&(i=T("categoryarray")),t||"array"!==r||(r=o.categoryorder="trace"),"trace"===r?o._initialCategories=[]:"array"===r?o._initialCategories=i.slice():(i=function(n,a){var s,c,h,u=a.dataAttr||n._id.charAt(0),y={};if(a.axData)s=a.axData;else for(s=[],c=0;c<a.data.length;c++){var d=a.data[c];d[u+"axis"]===n._id&&s.push(d)}for(c=0;c<s.length;c++){var m=s[c][u];for(h=0;h<m.length;h++){var g=m[h];null!=g&&(y[g]=1)}}return Object.keys(y)}(o,b).sort(),"category ascending"===r?o._initialCategories=i:"category descending"===r&&(o._initialCategories=i.reverse()))}}},98728:function(ie,F,e){"use strict";var S=e(38248),k=e(3400),o=e(39032),T=o.ONEDAY,b=o.ONEWEEK;F.dtick=function(p,l){var t="log"===l,i="date"===l,r="category"===l,n=i?T:1;if(!p)return n;if(S(p))return(p=Number(p))<=0?n:r?Math.max(1,Math.round(p)):i?Math.max(.1,p):p;if("string"!=typeof p||!i&&!t)return n;var a=p.charAt(0),s=p.substr(1);return(s=S(s)?Number(s):0)<=0||!(i&&"M"===a&&s===Math.round(s)||t&&"L"===a||t&&"D"===a&&(1===s||2===s))?n:p},F.tick0=function(p,l,t,i){return"date"===l?k.cleanDate(p,k.dateTick0(t,i%b==0?1:0)):"D1"!==i&&"D2"!==i?S(p)?Number(p):0:void 0}},33816:function(ie,F,e){"use strict";var S=e(53756).counter;ie.exports={idRegex:{x:S("x","( domain)?"),y:S("y","( domain)?")},attrRegex:S("[xy]axis"),xAxisMatch:S("xaxis"),yAxisMatch:S("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},71888:function(ie,F,e){"use strict";var S=e(3400),k=e(19280),o=e(79811).id2name,T=e(94724),b=e(21160),p=e(78344),l=e(39032).ALMOST_EQUAL,t=e(84284).FROM_BL;function i(u,y,d){var m=d.axIds,g=d.layoutOut,x=d.hasImage,v=g._axisConstraintGroups,_=g._axisMatchGroups,f=y._id,C=f.charAt(0),w=((g._splomAxes||{})[C]||{})[f]||{},E=y._id,P="x"===E.charAt(0);function L($,X){return S.coerce(u,y,T,$,X)}y._matchGroup=null,y._constraintGroup=null,L("constrain",x?"domain":"range"),S.coerce(u,y,{constraintoward:{valType:"enumerated",values:P?["left","center","right"]:["bottom","middle","top"],dflt:P?"center":"middle"}},"constraintoward");var O,z,V=y.type,R=[];for(O=0;O<m.length;O++)(z=m[O])!==E&&g[o(z)].type===V&&R.push(z);var U=n(v,E);if(U){var Z=[];for(O=0;O<R.length;O++)U[z=R[O]]||Z.push(z);R=Z}var N,G,W=R.length;W&&(u.matches||w.matches)&&(N=S.coerce(u,y,{matches:{valType:"enumerated",values:R,dflt:-1!==R.indexOf(w.matches)?w.matches:void 0}},"matches"));var ae=x&&!P?y.anchor:void 0;if(W&&!N&&(u.scaleanchor||ae)&&(G=S.coerce(u,y,{scaleanchor:{valType:"enumerated",values:R.concat([!1])}},"scaleanchor",ae)),N){y._matchGroup=a(_,E,N,1);var re=g[o(N)],ne=r(g,y)/r(g,re);P!==("x"===N.charAt(0))&&(ne=(P?"x":"y")+ne),a(v,E,N,ne)}else u.matches&&-1!==m.indexOf(u.matches)&&S.warn("ignored "+y._name+'.matches: "'+u.matches+'" to avoid an infinite loop');if(G){var Q=L("scaleratio");Q||(Q=y.scaleratio=1),a(v,E,G,Q)}else u.scaleanchor&&-1!==m.indexOf(u.scaleanchor)&&S.warn("ignored "+y._name+'.scaleanchor: "'+u.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function r(u,y){var d=y.domain;return d||(d=u[o(y.overlaying)].domain),d[1]-d[0]}function n(u,y){for(var d=0;d<u.length;d++)if(u[d][y])return u[d];return null}function a(u,y,d,m){var g,x,v,_,f,C=n(u,y);null===C?((C={})[y]=1,f=u.length,u.push(C)):f=u.indexOf(C);var w=Object.keys(C);for(g=0;g<u.length;g++)if(v=u[g],g!==f&&v[d]){var E=v[d];for(x=0;x<w.length;x++)v[_=w[x]]=s(E,s(m,C[_]));return void u.splice(f,1)}if(1!==m)for(x=0;x<w.length;x++){var P=w[x];C[P]=s(m,C[P])}C[d]=1}function s(u,y){var d,m,g="",x="";"string"==typeof u&&(d=(g=u.match(/^[xy]*/)[0]).length,u=+u.substr(d)),"string"==typeof y&&(m=(x=y.match(/^[xy]*/)[0]).length,y=+y.substr(m));var v=u*y;return d||m?d&&m&&g.charAt(0)!==x.charAt(0)?d===m?v:(d>m?g.substr(m):x.substr(d))+v:g+x+u*y:v}function c(u,y){for(var d=y._size,m=d.h/d.w,g={},x=Object.keys(u),v=0;v<x.length;v++){var _=x[v],f=u[_];if("string"==typeof f){var C=f.match(/^[xy]*/)[0],w=C.length;f=+f.substr(w);for(var E="y"===C.charAt(0)?m:1/m,P=0;P<w;P++)f*=E}g[_]=f}return g}function h(u,y){var d=u._inputDomain,g=d[0]+(d[1]-d[0])*t[u.constraintoward];u.domain=u._input.domain=[g+(d[0]-g)/y,g+(d[1]-g)/y],u.setScale()}F.handleDefaults=function(u,y,d){var m,g,x,v,_,f,C,w,E=d.axIds,P=d.axHasImage,L=y._axisConstraintGroups=[],O=y._axisMatchGroups=[];for(m=0;m<E.length;m++)i(_=u[v=o(E[m])],f=y[v],{axIds:E,layoutOut:y,hasImage:P[v]});function z(re,ne){for(m=0;m<re.length;m++)for(x in g=re[m])y[o(x)][ne]=g}for(z(O,"_matchGroup"),m=0;m<L.length;m++)for(x in g=L[m])if((f=y[o(x)]).fixedrange){for(var V in g){var R=o(V);!1===(u[R]||{}).fixedrange&&S.warn("fixedrange was specified as false for axis "+R+" but was overridden because another axis in its constraint group has fixedrange true"),y[R].fixedrange=!0}break}for(m=0;m<L.length;){for(x in g=L[m]){(f=y[o(x)])._matchGroup&&Object.keys(f._matchGroup).length===Object.keys(g).length&&(L.splice(m,1),m--);break}m++}z(L,"_constraintGroup");var U=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],Z=!1,N=!1;function G(){w=f[C],"rangebreaks"===C&&(N=f._hasDayOfWeekBreaks)}for(m=0;m<O.length;m++){g=O[m];for(var W=0;W<U.length;W++){var ae;for(x in C=U[W],w=null,g)if(_=u[v=o(x)],C in(f=y[v])){if(!f.matches&&(ae=f,C in _)){G();break}null===w&&C in _&&G()}if("range"===C&&w&&_.range&&2===_.range.length&&null!==_.range[0]&&null!==_.range[1]&&(Z=!0),"autorange"===C&&null===w&&Z&&(w=!1),null===w&&C in ae&&(w=ae[C]),null!==w)for(x in g)(f=y[o(x)])[C]="range"===C?w.slice():w,"rangebreaks"===C&&(f._hasDayOfWeekBreaks=N,p(f,y))}}},F.enforce=function(u){var y,d,m,g,x,v,_,f,C=u._fullLayout,w=C._axisConstraintGroups||[];for(y=0;y<w.length;y++){m=c(w[y],C);var E=Object.keys(m),P=1/0,L=0,O=1/0,z={},V={},R=!1;for(d=0;d<E.length;d++)V[g=E[d]]=x=C[o(g)],x._inputDomain?x.domain=x._inputDomain.slice():x._inputDomain=x.domain.slice(),x._inputRange||(x._inputRange=x.range.slice()),x.setScale(),z[g]=v=Math.abs(x._m)/m[g],P=Math.min(P,v),"domain"!==x.constrain&&x._constraintShrinkable||(O=Math.min(O,v)),delete x._constraintShrinkable,L=Math.max(L,v),"domain"===x.constrain&&(R=!0);if(!(P>l*L)||R)for(d=0;d<E.length;d++)if(v=z[g=E[d]],_=(x=V[g]).constrain,v!==O||"domain"===_)if(f=v/O,"range"===_)b(x,f);else{var U=x._inputDomain,Z=(x.domain[1]-x.domain[0])/(U[1]-U[0]),N=(x.r2l(x.range[1])-x.r2l(x.range[0]))/(x.r2l(x._inputRange[1])-x.r2l(x._inputRange[0]));if((f/=Z)*N<1){x.domain=x._input.domain=U.slice(),b(x,f);continue}if(N<1&&(x.range=x._input.range=x._inputRange.slice(),f*=N),x.autorange){var G=x.r2l(x.range[0]),W=x.r2l(x.range[1]),ae=(G+W)/2,re=ae,ne=ae,Q=Math.abs(W-ae),$=ae-Q*f*1.0001,X=ae+Q*f*1.0001,oe=k.makePadFn(C,x,0),fe=k.makePadFn(C,x,1);h(x,f);var ue,ge,we=Math.abs(x._m),Te=k.concatExtremes(u,x),xe=Te.min,ye=Te.max;for(ge=0;ge<xe.length;ge++)(ue=xe[ge].val-oe(xe[ge])/we)>$&&ue<re&&(re=ue);for(ge=0;ge<ye.length;ge++)(ue=ye[ge].val+fe(ye[ge])/we)<X&&ue>ne&&(ne=ue);f/=(ne-re)/(2*Q),re=x.l2r(re),ne=x.l2r(ne),x.range=x._input.range=G<W?[re,ne]:[ne,re]}h(x,f)}}},F.getAxisGroup=function(u,y){for(var d=u._axisMatchGroups,m=0;m<d.length;m++)if(d[m][y])return"g"+m;return y},F.clean=function(u,y){if(y._inputDomain){for(var d=!1,m=y._id,g=u._fullLayout._axisConstraintGroups,x=0;x<g.length;x++)if(g[x][m]){d=!0;break}d&&"domain"===y.constrain||(y._input.domain=y.domain=y._inputDomain,delete y._inputDomain)}}},51184:function(ie,F,e){"use strict";var S=e(33428),k=e(3400),o=k.numberFormat,T=e(49760),b=e(89184),p=e(24040),l=k.strTranslate,t=e(72736),i=e(76308),r=e(43616),n=e(93024),a=e(54460),s=e(93972),c=e(86476),h=e(72760),u=h.selectingOrDrawing,y=h.freeMode,d=e(84284).FROM_TL,m=e(73696),g=e(39172).redrawReglTraces,x=e(7316),v=e(79811).getFromId,_=e(22676).prepSelect,f=e(22676).clearOutline,C=e(22676).selectOnClick,w=e(21160),E=e(33816),P=E.MINDRAG,L=E.MINZOOM,O=!0;function z(ue,ge,we,Te){var xe=k.ensureSingle(ue.draglayer,ge,we,function(ye){ye.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ue.id)});return xe.call(s,Te),xe.node()}function V(ue,ge,we,Te,xe,ye,_e){var Ie=z(ue,"rect",ge,we);return S.select(Ie).call(r.setRect,Te,xe,ye,_e),Ie}function R(ue,ge){for(var we=0;we<ue.length;we++)if(!ue[we].fixedrange)return ge;return""}function U(ue,ge,we,Te,xe){for(var ye=0;ye<ue.length;ye++){var _e=ue[ye];if(!_e.fixedrange)if(_e.rangebreaks){var Ie="y"===_e._id.charAt(0),be=Ie?1-we:we;Te[_e._name+".range[0]"]=_e.l2r(_e.p2l((Ie?1-ge:ge)*_e._length)),Te[_e._name+".range[1]"]=_e.l2r(_e.p2l(be*_e._length))}else{var he=_e._rl[0],ce=_e._rl[1]-he;Te[_e._name+".range[0]"]=_e.l2r(he+ce*ge),Te[_e._name+".range[1]"]=_e.l2r(he+ce*we)}}if(xe&&xe.length){var me=(ge+(1-we))/2;U(xe,me,1-me,Te,[])}}function Z(ue,ge){for(var we=0;we<ue.length;we++){var Te=ue[we];if(!Te.fixedrange){if(Te.rangebreaks){var xe=Te._length,ye=(Te.p2l(0+ge)-Te.p2l(0)+(Te.p2l(xe+ge)-Te.p2l(xe)))/2;Te.range=[Te.l2r(Te._rl[0]-ye),Te.l2r(Te._rl[1]-ye)]}else Te.range=[Te.l2r(Te._rl[0]-ge/Te._m),Te.l2r(Te._rl[1]-ge/Te._m)];Te.limitRange&&Te.limitRange()}}}function N(ue){return 1-(ue>=0?Math.min(ue,.9):1/(1/Math.max(ue,-.3)+3.222))}function G(ue,ge,we,Te,xe){return ue.append("path").attr("class","zoombox").style({fill:ge>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",l(we,Te)).attr("d",xe+"Z")}function W(ue,ge,we){return ue.append("path").attr("class","zoombox-corners").style({fill:i.background,stroke:i.defaultLine,"stroke-width":1,opacity:0}).attr("transform",l(ge,we)).attr("d","M0,0Z")}function ae(ue,ge,we,Te,xe,ye){ue.attr("d",Te+"M"+we.l+","+we.t+"v"+we.h+"h"+we.w+"v-"+we.h+"h-"+we.w+"Z"),re(ue,ge,xe,ye)}function re(ue,ge,we,Te){we||(ue.transition().style("fill",Te>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ge.transition().style("opacity",1).duration(200))}function ne(ue){S.select(ue).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function Q(ue){O&&ue.data&&ue._context.showTips&&(k.notifier(k._(ue,"Double-click to zoom back out"),"long"),O=!1)}function $(ue){var ge=Math.floor(Math.min(ue.b-ue.t,ue.r-ue.l,L)/2);return"M"+(ue.l-3.5)+","+(ue.t-.5+ge)+"h3v"+-ge+"h"+ge+"v-3h-"+(ge+3)+"ZM"+(ue.r+3.5)+","+(ue.t-.5+ge)+"h-3v"+-ge+"h"+-ge+"v-3h"+(ge+3)+"ZM"+(ue.r+3.5)+","+(ue.b+.5-ge)+"h-3v"+ge+"h"+-ge+"v3h"+(ge+3)+"ZM"+(ue.l-3.5)+","+(ue.b+.5-ge)+"h3v"+ge+"h"+ge+"v3h-"+(ge+3)+"Z"}function X(ue,ge,we,Te,xe){for(var ye,_e,Ie,De,be=!1,he={},ce={},me=(xe||{}).xaHash,Pe=(xe||{}).yaHash,Ae=0;Ae<ge.length;Ae++){var Ce=ge[Ae];for(ye in we)if(Ce[ye]){for(Ie in Ce)xe&&(me[Ie]||Pe[Ie])||("x"===Ie.charAt(0)?we:Te)[Ie]||(he[Ie]=ye);for(_e in Te)xe&&(me[_e]||Pe[_e])||!Ce[_e]||(be=!0)}for(_e in Te)if(Ce[_e])for(De in Ce)xe&&(me[De]||Pe[De])||("x"===De.charAt(0)?we:Te)[De]||(ce[De]=_e)}be&&(k.extendFlat(he,ce),ce={});var Oe={},Ne=[];for(Ie in he){var je=v(ue,Ie);Ne.push(je),Oe[je._id]=je}var ve={},Me=[];for(De in ce){var Le=v(ue,De);Me.push(Le),ve[Le._id]=Le}return{xaHash:Oe,yaHash:ve,xaxes:Ne,yaxes:Me,xLinks:he,yLinks:ce,isSubplotConstrained:be}}function oe(ue,ge){if(b){var we=void 0!==ue.onwheel?"wheel":"mousewheel";ue._onwheel&&ue.removeEventListener(we,ue._onwheel),ue._onwheel=ge,ue.addEventListener(we,ge,{passive:!1})}else void 0!==ue.onwheel?ue.onwheel=ge:void 0!==ue.onmousewheel?ue.onmousewheel=ge:ue.isAddedWheelEvent||(ue.isAddedWheelEvent=!0,ue.addEventListener("wheel",ge,{passive:!1}))}function fe(ue){var ge=[];for(var we in ue)ge.push(ue[we]);return ge}ie.exports={makeDragBox:function(ue,ge,we,Te,xe,ye,_e,Ie){var De,be,he,ce,me,Pe,Ae,Ce,Oe,Ne,je,ve,Me,Le,Ue,ze,qe,Ke,it,ft,dt,kt,St,Tt=ue._fullLayout._zoomlayer,lt=_e+Ie==="nsew",ot=1===(_e+Ie).length;function Rt(){if(Oe=(De=ge.xaxis)._length,Ne=(be=ge.yaxis)._length,Ae=De._offset,Ce=be._offset,(he={})[De._id]=De,(ce={})[be._id]=be,_e&&Ie)for(var hn=ge.overlays,wn=0;wn<hn.length;wn++){var pn=hn[wn].xaxis;he[pn._id]=pn;var An=hn[wn].yaxis;ce[An._id]=An}me=fe(he),Pe=fe(ce),Me=R(me,Ie),Le=R(Pe,_e),Ue=!Le&&!Me,ve=X(ue,ue._fullLayout._axisMatchGroups,he,ce);var On=(je=X(ue,ue._fullLayout._axisConstraintGroups,he,ce,ve)).isSubplotConstrained||ve.isSubplotConstrained;ze=Ie||On,qe=_e||On;var Dn=ue._fullLayout;Ke=Dn._has("scattergl"),it=Dn._has("splom"),ft=Dn._has("svg")}we+=ge.yaxis._shift,Rt();var hn,Vt=(hn=Le+Me)?"nsew"===hn?lt?"":"pan"===ue._fullLayout.dragmode?"move":"crosshair":hn.toLowerCase()+"-resize":"pointer",Ht=V(ge,_e+Ie+"drag",Vt,we,Te,xe,ye);if(Ue&&!lt)return Ht.onmousedown=null,Ht.style.pointerEvents="none",Ht;var zt,Qe,nt,We,et,gt,ht,Ge,He,ut,tt={element:Ht,gd:ue,plotinfo:ge};function xt(){tt.plotinfo.selection=!1,f(ue)}function At(hn,wn){var $n,mr,lr,vr,or,pn=tt.gd;if(pn._fullLayout._activeShapeIndex>=0)pn._fullLayout._deactivateShape(pn);else{var An=pn._fullLayout.clickmode;if(ne(pn),2!==hn||ot||function Qt(){if(!ue._transitioningWithDuration){var hn=ue._context.doubleClick,wn=[];Me&&(wn=wn.concat(me)),Le&&(wn=wn.concat(Pe)),ve.xaxes&&(wn=wn.concat(ve.xaxes)),ve.yaxes&&(wn=wn.concat(ve.yaxes));var pn,An,On={};if("reset+autosize"===hn)for(hn="autosize",An=0;An<wn.length;An++){var Dn=(pn=wn[An])._rangeInitial0,Vn=pn._rangeInitial1,Gn=void 0!==Dn||void 0!==Vn;if(Gn&&(void 0!==Dn&&Dn!==pn.range[0]||void 0!==Vn&&Vn!==pn.range[1])||!Gn&&!0!==pn.autorange){hn="reset";break}}if("autosize"===hn)for(An=0;An<wn.length;An++)(pn=wn[An]).fixedrange||(On[pn._name+".autorange"]=!0);else if("reset"===hn)for((Me||je.isSubplotConstrained)&&(wn=wn.concat(je.xaxes)),Le&&!je.isSubplotConstrained&&(wn=wn.concat(je.yaxes)),je.isSubplotConstrained&&(Me?Le||(wn=wn.concat(Pe)):wn=wn.concat(me)),An=0;An<wn.length;An++)if(!(pn=wn[An]).fixedrange){var Nn=pn._name,ir=pn._autorangeInitial;void 0===pn._rangeInitial0&&void 0===pn._rangeInitial1?On[Nn+".autorange"]=!0:void 0===pn._rangeInitial0?(On[Nn+".autorange"]=ir,On[Nn+".range"]=[null,pn._rangeInitial1]):void 0===pn._rangeInitial1?(On[Nn+".range"]=[pn._rangeInitial0,null],On[Nn+".autorange"]=ir):On[Nn+".range"]=[pn._rangeInitial0,pn._rangeInitial1]}ue.emit("plotly_doubleclick",null),p.call("_guiRelayout",ue,On)}}(),lt)An.indexOf("select")>-1&&C(wn,pn,me,Pe,ge.id,tt),An.indexOf("event")>-1&&n.click(pn,wn,ge.id);else if(1===hn&&ot){var On=_e?be:De,Dn="s"===_e||"w"===Ie?0:1,Vn=On._name+".range["+Dn+"]",Gn=(vr=($n=On).range[mr=Dn],or=Math.abs(vr-$n.range[1-mr]),"date"===$n.type?vr:"log"===$n.type?(lr=Math.ceil(Math.max(0,-Math.log(or)/Math.LN10))+3,o("."+lr+"g")(Math.pow(10,vr))):(lr=Math.floor(Math.log(Math.abs(vr))/Math.LN10)-Math.floor(Math.log(or)/Math.LN10)+4,o("."+String(lr)+"g")(vr))),Nn="left",ir="middle";if(On.fixedrange)return;_e?(ir="n"===_e?"top":"bottom","right"===On.side&&(Nn="right")):"e"===Ie&&(Nn="right"),pn._context.showAxisRangeEntryBoxes&&S.select(Ht).call(t.makeEditable,{gd:pn,immediate:!0,background:pn._fullLayout.paper_bgcolor,text:String(Gn),fill:On.tickfont?On.tickfont.color:"#444",horizontalAlign:Nn,verticalAlign:ir}).on("edit",function($n){var mr=On.d2r($n);void 0!==mr&&p.call("_guiRelayout",pn,Vn,mr)})}}}function Mt(hn,wn){if(ue._transitioningWithDuration)return!1;var ir,$n,pn=Math.max(0,Math.min(Oe,kt*hn+zt)),An=Math.max(0,Math.min(Ne,St*wn+Qe)),On=Math.abs(pn-zt),Dn=Math.abs(An-Qe);function Vn(){ht="",nt.r=nt.l,nt.t=nt.b,He.attr("d","M0,0Z")}if(nt.l=Math.min(zt,pn),nt.r=Math.max(zt,pn),nt.t=Math.min(Qe,An),nt.b=Math.max(Qe,An),je.isSubplotConstrained)On>L||Dn>L?(ht="xy",On/Oe>Dn/Ne?(Dn=On*Ne/Oe,Qe>An?nt.t=Qe-Dn:nt.b=Qe+Dn):(On=Dn*Oe/Ne,zt>pn?nt.l=zt-On:nt.r=zt+On),He.attr("d",$(nt))):Vn();else if(ve.isSubplotConstrained)if(On>L||Dn>L){ht="xy";var Gn=Math.min(nt.l/Oe,(Ne-nt.b)/Ne),Nn=Math.max(nt.r/Oe,(Ne-nt.t)/Ne);nt.l=Gn*Oe,nt.r=Nn*Oe,nt.b=(1-Gn)*Ne,nt.t=(1-Nn)*Ne,He.attr("d",$(nt))}else Vn();else!Le||Dn<Math.min(Math.max(.6*On,P),L)?On<P||!Me?Vn():(nt.t=0,nt.b=Ne,ht="x",He.attr("d","M"+((ir=nt).l-.5)+","+(($n=Qe)-L-.5)+"h-3v"+(2*L+1)+"h3ZM"+(ir.r+.5)+","+($n-L-.5)+"h3v"+(2*L+1)+"h-3Z")):!Me||On<Math.min(.6*Dn,L)?(nt.l=0,nt.r=Oe,ht="y",He.attr("d",function(ir,$n){return"M"+($n-L-.5)+","+(ir.t-.5)+"v-3h"+(2*L+1)+"v3ZM"+($n-L-.5)+","+(ir.b+.5)+"v3h"+(2*L+1)+"v-3Z"}(nt,zt))):(ht="xy",He.attr("d",$(nt)));nt.w=nt.r-nt.l,nt.h=nt.b-nt.t,ht&&(ut=!0),ue._dragged=ut,ae(Ge,He,nt,et,gt,We),yt(),ue.emit("plotly_relayouting",dt),gt=!0}function yt(){dt={},"xy"!==ht&&"x"!==ht||(U(me,nt.l/Oe,nt.r/Oe,dt,je.xaxes),an("x",dt)),"xy"!==ht&&"y"!==ht||(U(Pe,(Ne-nt.b)/Ne,(Ne-nt.t)/Ne,dt,je.yaxes),an("y",dt))}function Pt(){yt(),ne(ue),sn(),Q(ue)}tt.prepFn=function(hn,wn,pn){var An=tt.dragmode,On=ue._fullLayout.dragmode;On!==An&&(tt.dragmode=On),Rt(),kt=ue._fullLayout._invScaleX,St=ue._fullLayout._invScaleY,Ue||(lt?hn.shiftKey?"pan"===On?On="zoom":u(On)||(On="pan"):hn.ctrlKey&&(On="pan"):On="pan"),tt.minDrag=y(On)?1:void 0,u(On)?(tt.xaxes=me,tt.yaxes=Pe,_(hn,wn,pn,tt,On)):(tt.clickFn=At,u(An)&&xt(),Ue||("zoom"===On?(tt.moveFn=Mt,tt.doneFn=Pt,tt.minDrag=1,function(Dn,Vn,Gn){var Nn=Ht.getBoundingClientRect();zt=Vn-Nn.left,Qe=Gn-Nn.top,ue._fullLayout._calcInverseTransform(ue);var ir=k.apply3DTransform(ue._fullLayout._invTransform)(zt,Qe);nt={l:zt=ir[0],r:zt,w:0,t:Qe=ir[1],b:Qe,h:0},We=ue._hmpixcount?ue._hmlumcount/ue._hmpixcount:T(ue._fullLayout.plot_bgcolor).getLuminance(),gt=!1,ht="xy",ut=!1,Ge=G(Tt,We,Ae,Ce,et="M0,0H"+Oe+"V"+Ne+"H0V0"),He=W(Tt,Ae,Ce)}(0,wn,pn)):"pan"===On&&(tt.moveFn=qt,tt.doneFn=sn))),ue._fullLayout._redrag=function(){var Dn=ue._dragdata;Dn&&Dn.element===Ht&&(u(ue._fullLayout.dragmode)||(Rt(),Kt([0,0,Oe,Ne]),tt.moveFn(Dn.dx,Dn.dy)))}},c.init(tt);var Ct=[0,0,Oe,Ne],Dt=null,Ut=E.REDRAWDELAY,Bt=ge.mainplot?ue._fullLayout._plots[ge.mainplot]:ge;function qt(hn,wn){if(hn*=kt,wn*=St,!ue._transitioningWithDuration){if(ue._fullLayout._replotting=!0,"ew"===Me||"ns"===Le){var pn=Me?-hn:0,An=Le?-wn:0;if(ve.isSubplotConstrained){if(Me&&Le){var On=(hn/Oe-wn/Ne)/2;pn=-(hn=On*Oe),An=-(wn=-On*Ne)}Le?pn=-An*Oe/Ne:An=-pn*Ne/Oe}return Me&&(Z(me,hn),an("x")),Le&&(Z(Pe,wn),an("y")),Kt([pn,An,Oe,Ne]),mn(),void ue.emit("plotly_relayouting",dt)}var Dn,Vn,Gn="w"===Me==("n"===Le)?1:-1;if(Me&&Le&&(je.isSubplotConstrained||ve.isSubplotConstrained)){var Nn=(hn/Oe+Gn*wn/Ne)/2;hn=Nn*Oe,wn=Gn*Nn*Ne}if("w"===Me?hn=lr(me,0,hn):"e"===Me?hn=lr(me,1,-hn):Me||(hn=0),"n"===Le?wn=lr(Pe,1,wn):"s"===Le?wn=lr(Pe,0,-wn):Le||(wn=0),Dn="w"===Me?hn:0,Vn="n"===Le?wn:0,je.isSubplotConstrained&&!ve.isSubplotConstrained||ve.isSubplotConstrained&&Me&&Le&&Gn>0){var ir;if(ve.isSubplotConstrained||!Me&&1===Le.length){for(ir=0;ir<me.length;ir++)me[ir].range=me[ir]._r.slice(),w(me[ir],1-wn/Ne);Dn=(hn=wn*Oe/Ne)/2}if(ve.isSubplotConstrained||!Le&&1===Me.length){for(ir=0;ir<Pe.length;ir++)Pe[ir].range=Pe[ir]._r.slice(),w(Pe[ir],1-hn/Oe);Vn=(wn=hn*Ne/Oe)/2}}ve.isSubplotConstrained&&Le||an("x"),ve.isSubplotConstrained&&Me||an("y");var $n=Oe-hn,mr=Ne-wn;!ve.isSubplotConstrained||Me&&Le||(Me?(Vn=Dn?0:hn*Ne/Oe,mr=$n*Ne/Oe):(Dn=Vn?0:wn*Oe/Ne,$n=mr*Oe/Ne)),Kt([Dn,Vn,$n,mr]),mn(),ue.emit("plotly_relayouting",dt)}function lr(vr,or,Or){for(var fn,gn,Hn=1-or,En=0;En<vr.length;En++){var Zn=vr[En];if(!Zn.fixedrange){fn=Zn,gn=Zn._rl[Hn]+(Zn._rl[or]-Zn._rl[Hn])/N(Or/Zn._length);var Kn=Zn.l2r(gn);!1!==Kn&&void 0!==Kn&&(Zn.range[or]=Kn)}}return fn._length*(fn._rl[or]-gn)/(fn._rl[or]-fn._rl[Hn])}}function an(hn,wn){for(var pn=ve.isSubplotConstrained?{x:Pe,y:me}[hn]:ve[hn+"axes"],An=ve.isSubplotConstrained?{x:me,y:Pe}[hn]:[],On=0;On<pn.length;On++){var Dn=pn[On],Vn=Dn._id,Gn=ve.xLinks[Vn]||ve.yLinks[Vn],Nn=An[0]||he[Gn]||ce[Gn];Nn&&(wn?(wn[Dn._name+".range[0]"]=wn[Nn._name+".range[0]"],wn[Dn._name+".range[1]"]=wn[Nn._name+".range[1]"]):Dn.range=Nn.range.slice())}}function mn(){var hn,wn=[];function pn(Vn){for(hn=0;hn<Vn.length;hn++)Vn[hn].fixedrange||wn.push(Vn[hn]._id)}function An(Vn,Gn){for(hn=0;hn<Vn.length;hn++){var Nn=Vn[hn],ir=Nn[Gn];Nn.fixedrange||"sync"!==ir.tickmode||wn.push(ir._id)}}for(ze&&(pn(me),pn(je.xaxes),pn(ve.xaxes),An(ge.overlays,"xaxis")),qe&&(pn(Pe),pn(je.yaxes),pn(ve.yaxes),An(ge.overlays,"yaxis")),dt={},hn=0;hn<wn.length;hn++){var Dn=v(ue,wn[hn]);a.drawOne(ue,Dn,{skipTitle:!0}),dt[Dn._name+".range[0]"]=Dn.range[0],dt[Dn._name+".range[1]"]=Dn.range[1]}a.redrawComponents(ue,wn)}function sn(){Kt([0,0,Oe,Ne]),k.syncOrAsync([x.previousPromises,function(){ue._fullLayout._replotting=!1,p.call("_guiRelayout",ue,dt)}],ue)}function Kt(hn){var wn,pn,An,On,Dn=ue._fullLayout,Vn=Dn._plots,Gn=Dn._subplots.cartesian;if(it&&p.subplotsRegistry.splom.drag(ue),Ke)for(wn=0;wn<Gn.length;wn++)if(An=(pn=Vn[Gn[wn]]).xaxis,On=pn.yaxis,pn._scene){var Nn=k.simpleMap(An.range,An.r2l),ir=k.simpleMap(On.range,On.r2l);An.limitRange&&An.limitRange(),On.limitRange&&On.limitRange(),pn._scene.update({range:[(Nn=An.range)[0],(ir=On.range)[0],Nn[1],ir[1]]})}if((it||Ke)&&(m(ue),g(ue)),ft){var $n=hn[2]/De._length,mr=hn[3]/be._length;for(wn=0;wn<Gn.length;wn++){An=(pn=Vn[Gn[wn]]).xaxis,On=pn.yaxis;var lr,vr,or,Or,gn=(qe||ve.isSubplotConstrained)&&!On.fixedrange&&ce[On._id];if((ze||ve.isSubplotConstrained)&&!An.fixedrange&&he[An._id]?(lr=$n,or=Ie||ve.isSubplotConstrained?hn[0]:Sn(An,lr)):ve.xaHash[An._id]?(lr=$n,or=hn[0]*An._length/De._length):ve.yaHash[An._id]?(lr=mr,or="ns"===Le?-hn[1]*An._length/be._length:Sn(An,lr,{n:"top",s:"bottom"}[Le])):or=Fn(An,lr=qn(An,$n,mr)),lr>1&&(void 0!==An.maxallowed&&ze===(An.range[0]<An.range[1]?"e":"w")||void 0!==An.minallowed&&ze===(An.range[0]<An.range[1]?"w":"e"))&&(lr=1,or=0),gn?(vr=mr,Or=_e||ve.isSubplotConstrained?hn[1]:Sn(On,vr)):ve.yaHash[On._id]?(vr=mr,Or=hn[1]*On._length/be._length):ve.xaHash[On._id]?(vr=$n,Or="ew"===Me?-hn[0]*On._length/De._length:Sn(On,vr,{e:"right",w:"left"}[Me])):Or=Fn(On,vr=qn(On,$n,mr)),vr>1&&(void 0!==On.maxallowed&&qe===(On.range[0]<On.range[1]?"n":"s")||void 0!==On.minallowed&&qe===(On.range[0]<On.range[1]?"s":"n"))&&(vr=1,Or=0),lr||vr){lr||(lr=1),vr||(vr=1);var Hn=An._offset-or/lr,En=On._offset-Or/vr;pn.clipRect.call(r.setTranslate,or,Or).call(r.setScale,lr,vr),pn.plot.call(r.setTranslate,Hn,En).call(r.setScale,1/lr,1/vr),lr===pn.xScaleFactor&&vr===pn.yScaleFactor||(r.setPointGroupScale(pn.zoomScalePts,lr,vr),r.setTextPointsScale(pn.zoomScaleTxt,lr,vr)),r.hideOutsideRangePoints(pn.clipOnAxisFalseTraces,pn),pn.xScaleFactor=lr,pn.yScaleFactor=vr}}}}function qn(hn,wn,pn){return hn.fixedrange?0:ze&&je.xaHash[hn._id]?wn:qe&&(je.isSubplotConstrained?je.xaHash:je.yaHash)[hn._id]?pn:0}function Fn(hn,wn){return wn?(hn.range=hn._r.slice(),w(hn,wn),Sn(hn,wn)):0}function Sn(hn,wn,pn){return hn._length*(1-wn)*d[pn||hn.constraintoward||"middle"]}return _e.length*Ie.length!=1&&oe(Ht,function(hn){if(ue._context._scrollZoom.cartesian||ue._fullLayout._enablescrollzoom){if(xt(),ue._transitioningWithDuration)return hn.preventDefault(),void hn.stopPropagation();Rt(),clearTimeout(Dt);var wn=-hn.deltaY;if(isFinite(wn)||(wn=hn.wheelDelta/10),isFinite(wn)){var pn,An=Math.exp(-Math.min(Math.max(wn,-20),20)/200),On=Bt.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Dn=(hn.clientX-On.left)/On.width,Vn=(On.bottom-hn.clientY)/On.height;if(ze){for(Ie||(Dn=.5),pn=0;pn<me.length;pn++)Gn(me[pn],Dn,An);an("x"),Ct[2]*=An,Ct[0]+=Ct[2]*Dn*(1/An-1)}if(qe){for(_e||(Vn=.5),pn=0;pn<Pe.length;pn++)Gn(Pe[pn],Vn,An);an("y"),Ct[3]*=An,Ct[1]+=Ct[3]*(1-Vn)*(1/An-1)}Kt(Ct),mn(),ue.emit("plotly_relayouting",dt),Dt=setTimeout(function(){ue._fullLayout&&(Ct=[0,0,Oe,Ne],sn())},Ut),hn.preventDefault()}else k.log("Did not find wheel motion attributes: ",hn)}function Gn(Nn,ir,$n){if(!Nn.fixedrange){var mr=k.simpleMap(Nn.range,Nn.r2l),lr=mr[0]+(mr[1]-mr[0])*ir;Nn.range=mr.map(function(vr){return Nn.l2r(lr+(vr-lr)*$n)})}}}),Ht},makeDragger:z,makeRectDragger:V,makeZoombox:G,makeCorners:W,updateZoombox:ae,xyCorners:$,transitionZoombox:re,removeZoombox:ne,showDoubleClickNotifier:Q,attachWheelEventHandler:oe}},42464:function(ie,F,e){"use strict";var S=e(33428),k=e(93024),o=e(86476),T=e(93972),b=e(51184).makeDragBox,p=e(33816).DRAGGERSIZE;F.initInteractions=function(l){var t=l._fullLayout;if(l._context.staticPlot)S.select(l).selectAll(".drag").remove();else if(t._has("cartesian")||t._has("splom")){Object.keys(t._plots||{}).sort(function(r,n){if((t._plots[r].mainplot&&!0)===(t._plots[n].mainplot&&!0)){var a=r.split("y"),s=n.split("y");return a[0]===s[0]?Number(a[1]||1)-Number(s[1]||1):Number(a[0]||1)-Number(s[0]||1)}return t._plots[r].mainplot?1:-1}).forEach(function(r){var n=t._plots[r],a=n.xaxis,s=n.yaxis;if(!n.mainplot){var c=b(l,n,a._offset,s._offset,a._length,s._length,"ns","ew");c.onmousemove=function(y){l._fullLayout._rehover=function(){l._fullLayout._hoversubplot===r&&l._fullLayout._plots[r]&&k.hover(l,y,r)},k.hover(l,y,r),l._fullLayout._lasthover=c,l._fullLayout._hoversubplot=r},c.onmouseout=function(y){l._dragging||(l._fullLayout._hoversubplot=null,o.unhover(l,y))},l._context.showAxisDragHandles&&(b(l,n,a._offset-p,s._offset-p,p,p,"n","w"),b(l,n,a._offset+a._length,s._offset-p,p,p,"n","e"),b(l,n,a._offset-p,s._offset+s._length,p,p,"s","w"),b(l,n,a._offset+a._length,s._offset+s._length,p,p,"s","e"))}if(l._context.showAxisDragHandles){if(r===a._mainSubplot){var h=a._mainLinePosition;"top"===a.side&&(h-=p),b(l,n,a._offset+.1*a._length,h,.8*a._length,p,"","ew"),b(l,n,a._offset,h,.1*a._length,p,"","w"),b(l,n,a._offset+.9*a._length,h,.1*a._length,p,"","e")}if(r===s._mainSubplot){var u=s._mainLinePosition;"right"!==s.side&&(u-=p),b(l,n,u,s._offset+.1*s._length,p,.8*s._length,"ns",""),b(l,n,u,s._offset+.9*s._length,p,.1*s._length,"s",""),b(l,n,u,s._offset,p,.1*s._length,"n","")}}});var i=t._hoverlayer.node();i.onmousemove=function(r){r.target=l._fullLayout._lasthover,k.hover(l,r,t._hoversubplot)},i.onclick=function(r){r.target=l._fullLayout._lasthover,k.click(l,r)},i.onmousedown=function(r){l._fullLayout._lasthover.onmousedown(r)},F.updateFx(l)}},F.updateFx=function(l){var t=l._fullLayout;T(t._draggers,"pan"===t.dragmode?"move":"crosshair")}},36632:function(ie,F,e){"use strict";var S=e(24040),k=e(3400),o=e(79811);ie.exports=function(T){return function(b,p){var l=b[T];if(Array.isArray(l))for(var t=S.subplotsRegistry.cartesian,i=t.idRegex,r=p._subplots,n=r.xaxis,a=r.yaxis,s=r.cartesian,c=p._has("cartesian")||p._has("gl2d"),h=0;h<l.length;h++){var u=l[h];if(k.isPlainObject(u)){var y=o.cleanId(u.xref,"x",!1),d=o.cleanId(u.yref,"y",!1),m=i.x.test(y),g=i.y.test(d);if(m||g){c||k.pushUnique(p._basePlotModules,t);var x=!1;m&&-1===n.indexOf(y)&&(n.push(y),x=!0),g&&-1===a.indexOf(d)&&(a.push(d),x=!0),x&&m&&g&&s.push(y+d)}}}}}},57952:function(ie,F,e){"use strict";var S=e(33428),k=e(24040),o=e(3400),T=e(7316),b=e(43616),p=e(84888)._M,l=e(79811),t=e(33816),i=e(9616),r=o.ensureSingle;function n(u,y,d){return o.ensureSingle(u,y,d,function(m){m.datum(d)})}function a(u,y,d,m,g){for(var x,v,_,f=t.traceLayerClasses,C=u._fullLayout,w=C._modules,E={},P=0;P<d.length;P++){var L=d[P][0].trace.zorder||0;E[L]||(E[L]=[]),E[L].push(d[P])}for(var O=[],z=[],V=Object.keys(E).map(Number).sort(o.sorterAsc),R=0;R<V.length;R++)for(var U=V[R],Z=0;Z<w.length;Z++){var N=(x=w[Z]).name,G=k.modules[N].categories;if(G.svg){var W=x.layerName||N+"layer",ae=W+(R?Number(R)+1:""),re=x.plot;_=(v=p(d,re,U))[0],d=v[1],_.length&&O.push({i:f.indexOf(W),zorder:R,className:ae,plotMethod:re,cdModule:_}),G.zoomScale&&z.push("."+ae)}}O.sort(function($,X){return($.zorder||0)-(X.zorder||0)||$.i-X.i});var ne=y.plot.selectAll("g.mlayer").data(O,function($){return $.className});if(ne.enter().append("g").attr("class",function($){return $.className}).classed("mlayer",!0).classed("rangeplot",y.isRangePlot),ne.exit().remove(),ne.order(),ne.each(function($){var X=S.select(this),oe=$.className;$.plotMethod(u,y,$.cdModule,X,m,g),-1===t.clipOnAxisFalseQuery.indexOf("."+oe)&&b.setClipUrl(X,y.layerClipId,u)}),C._has("scattergl")&&(x=k.getModule("scattergl"),_=p(d,x)[0],x.plot(u,y,_)),!u._context.staticPlot&&(y._hasClipOnAxisFalse&&(y.clipOnAxisFalseTraces=y.plot.selectAll(t.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),z.length)){var Q=y.plot.selectAll(z.join(",")).selectAll(".trace");y.zoomScalePts=Q.selectAll("path.point"),y.zoomScaleTxt=Q.selectAll(".textpoint")}}function s(u,y){var d=y.plotgroup,m=y.id,g=t.layerValue2layerClass[y.xaxis.layer],x=t.layerValue2layerClass[y.yaxis.layer],v=u._fullLayout._hasOnlyLargeSploms;if(y.mainplot){var _=y.mainplotinfo,f=_.plotgroup,C=m+"-x",w=m+"-y";y.minorGridlayer=_.minorGridlayer,y.gridlayer=_.gridlayer,y.zerolinelayer=_.zerolinelayer,r(_.overlinesBelow,"path",C),r(_.overlinesBelow,"path",w),r(_.overaxesBelow,"g",C),r(_.overaxesBelow,"g",w),y.plot=r(_.overplot,"g",m),r(_.overlinesAbove,"path",C),r(_.overlinesAbove,"path",w),r(_.overaxesAbove,"g",C),r(_.overaxesAbove,"g",w),y.xlines=f.select(".overlines-"+g).select("."+C),y.ylines=f.select(".overlines-"+x).select("."+w),y.xaxislayer=f.select(".overaxes-"+g).select("."+C),y.yaxislayer=f.select(".overaxes-"+x).select("."+w)}else if(v)y.xlines=r(d,"path","xlines-above"),y.ylines=r(d,"path","ylines-above"),y.xaxislayer=r(d,"g","xaxislayer-above"),y.yaxislayer=r(d,"g","yaxislayer-above");else{var E=r(d,"g","layer-subplot");y.shapelayer=r(E,"g","shapelayer"),y.imagelayer=r(E,"g","imagelayer"),y.minorGridlayer=r(d,"g","minor-gridlayer"),y.gridlayer=r(d,"g","gridlayer"),y.zerolinelayer=r(d,"g","zerolinelayer");var P=r(d,"g","layer-between");y.shapelayerBetween=r(P,"g","shapelayer"),y.imagelayerBetween=r(P,"g","imagelayer"),r(d,"path","xlines-below"),r(d,"path","ylines-below"),y.overlinesBelow=r(d,"g","overlines-below"),r(d,"g","xaxislayer-below"),r(d,"g","yaxislayer-below"),y.overaxesBelow=r(d,"g","overaxes-below"),y.plot=r(d,"g","plot"),y.overplot=r(d,"g","overplot"),y.xlines=r(d,"path","xlines-above"),y.ylines=r(d,"path","ylines-above"),y.overlinesAbove=r(d,"g","overlines-above"),r(d,"g","xaxislayer-above"),r(d,"g","yaxislayer-above"),y.overaxesAbove=r(d,"g","overaxes-above"),y.xlines=d.select(".xlines-"+g),y.ylines=d.select(".ylines-"+x),y.xaxislayer=d.select(".xaxislayer-"+g),y.yaxislayer=d.select(".yaxislayer-"+x)}v||(n(y.minorGridlayer,"g",y.xaxis._id),n(y.minorGridlayer,"g",y.yaxis._id),y.minorGridlayer.selectAll("g").map(function(L){return L[0]}).sort(l.idSort),n(y.gridlayer,"g",y.xaxis._id),n(y.gridlayer,"g",y.yaxis._id),y.gridlayer.selectAll("g").map(function(L){return L[0]}).sort(l.idSort)),y.xlines.style("fill","none").classed("crisp",!0),y.ylines.style("fill","none").classed("crisp",!0)}function c(u,y){if(u){var d={};for(var m in u.each(function(_){var f=_[0];S.select(this).remove(),h(f,y),d[f]=!0}),y._plots)for(var g=y._plots[m].overlays||[],x=0;x<g.length;x++){var v=g[x];d[v.id]&&v.plot.selectAll(".trace").remove()}}}function h(u,y){y._draggers.selectAll("g."+u).remove(),y._defs.select("#clip"+y._uid+u+"plot").remove()}F.name="cartesian",F.attr=["xaxis","yaxis"],F.idRoot=["x","y"],F.idRegex=t.idRegex,F.attrRegex=t.attrRegex,F.attributes=e(26720),F.layoutAttributes=e(94724),F.supplyLayoutDefaults=e(67352),F.transitionAxes=e(73736),F.finalizeSubplots=function(u,y){var d,m,g,x=y._subplots,v=x.xaxis,_=x.yaxis,f=x.cartesian,C=f.concat(x.gl2d||[]),w={},E={};for(d=0;d<C.length;d++){var P=C[d].split("y");w[P[0]]=1,E["y"+P[1]]=1}for(d=0;d<v.length;d++)w[m=v[d]]||(g=(u[l.id2name(m)]||{}).anchor,t.idRegex.y.test(g)||(g="y"),f.push(m+g),C.push(m+g),E[g]||(E[g]=1,o.pushUnique(_,g)));for(d=0;d<_.length;d++)E[g=_[d]]||(m=(u[l.id2name(g)]||{}).anchor,t.idRegex.x.test(m)||(m="x"),f.push(m+g),C.push(m+g),w[m]||(w[m]=1,o.pushUnique(v,m)));if(!C.length){for(var L in m="",g="",u)t.attrRegex.test(L)&&("x"===L.charAt(0)?(!m||+L.substr(5)<+m.substr(5))&&(m=L):(!g||+L.substr(5)<+g.substr(5))&&(g=L));m=m?l.name2id(m):"x",g=g?l.name2id(g):"y",v.push(m),_.push(g),f.push(m+g)}},F.plot=function(u,y,d,m){var g,x=u._fullLayout,v=x._subplots.cartesian,_=u.calcdata;if(!Array.isArray(y))for(y=[],g=0;g<_.length;g++)y.push(g);for(g=0;g<v.length;g++){for(var f,C=v[g],w=x._plots[C],E=[],P=0;P<_.length;P++){var L=_[P],O=L[0].trace;O.xaxis+O.yaxis===C&&((-1!==y.indexOf(O.index)||O.carpet)&&(f&&f[0].trace.xaxis+f[0].trace.yaxis===C&&-1!==["tonextx","tonexty","tonext"].indexOf(O.fill)&&-1===E.indexOf(f)&&E.push(f),E.push(L)),f=L)}a(u,w,E,d,m)}},F.clean=function(u,y,d,m){var g,x,v,_=m._plots||{},f=y._plots||{},C=m._subplots||{};if(m._hasOnlyLargeSploms&&!y._hasOnlyLargeSploms)for(v in _)(g=_[v]).plotgroup&&g.plotgroup.remove();var w=m._has&&m._has("gl"),E=y._has&&y._has("gl");if(w&&!E)for(v in _)(g=_[v])._scene&&g._scene.destroy();if(C.xaxis&&C.yaxis){var P=l.listIds({_fullLayout:m});for(x=0;x<P.length;x++){var L=P[x];y[l.id2name(L)]||m._infolayer.selectAll(".g-"+L+"title").remove()}}var O=m._has&&m._has("cartesian"),z=y._has&&y._has("cartesian");if(O&&!z)c(m._cartesianlayer.selectAll(".subplot"),m),m._defs.selectAll(".axesclip").remove(),delete m._axisConstraintGroups,delete m._axisMatchGroups;else if(C.cartesian)for(x=0;x<C.cartesian.length;x++){var V=C.cartesian[x];f[V]||(m._cartesianlayer.selectAll("."+V+",."+V+"-x,."+V+"-y").remove(),h(V,m))}},F.drawFramework=function(u){var y=u._fullLayout,d=function(g){var x,v,_,f,C,w,E=g._fullLayout,P=E._subplots.cartesian,L=P.length,O=[],z=[];for(x=0;x<L;x++){var U=(C=(f=E._plots[_=P[x]]).xaxis)._mainAxis._id+(w=f.yaxis)._mainAxis._id,Z=E._plots[U];f.overlays=[],U!==_&&Z?(f.mainplot=U,f.mainplotinfo=Z,z.push(_)):(f.mainplot=void 0,f.mainplotinfo=void 0,O.push(_))}for(x=0;x<z.length;x++)(f=E._plots[_=z[x]]).mainplotinfo.overlays.push(f);var N=O.concat(z),G=new Array(L);for(x=0;x<L;x++){var W=[_=N[x],(C=(f=E._plots[_]).xaxis).layer,(w=f.yaxis).layer,C.overlaying||"",w.overlaying||""];for(v=0;v<f.overlays.length;v++)W.push(f.overlays[v].id);G[x]=W}return G}(u),m=y._cartesianlayer.selectAll(".subplot").data(d,String);m.enter().append("g").attr("class",function(g){return"subplot "+g[0]}),m.order(),m.exit().call(c,y),m.each(function(g){var x=g[0],v=y._plots[x];v.plotgroup=S.select(this),s(u,v),v.draglayer=r(y._draggers,"g",x)})},F.rangePlot=function(u,y,d){s(u,y),a(u,y,d),T.style(u)},F.toSVG=function(u){var y=u._fullLayout._glimages,d=S.select(u).selectAll(".svg-container");d.filter(function(m,g){return g===d.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var m=this,g=m.toDataURL("image/png");y.append("svg:image").attr({xmlns:i.svg,"xlink:href":g,preserveAspectRatio:"none",x:0,y:0,width:m.style.width,height:m.style.height})})},F.updateFx=e(42464).updateFx},94724:function(ie,F,e){"use strict";var S=e(25376),k=e(22548),o=e(98192).u,T=e(92880).extendFlat,b=e(31780).templatedArray,p=e(29736).descriptionWithDates,l=e(39032).ONEDAY,t=e(33816),i=t.HOUR_PATTERN,r=t.WEEKDAY_PATTERN,n={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},a=T({},n,{values:n.values.slice().concat(["sync"])});function s(C){return{valType:"integer",min:0,dflt:C?5:0,editType:"ticks"}}var c={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},h={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},u={valType:"data_array",editType:"ticks"},y={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function d(C){var w={valType:"number",min:0,editType:"ticks"};return C||(w.dflt=5),w}function m(C){var w={valType:"number",min:0,editType:"ticks"};return C||(w.dflt=1),w}var g={valType:"color",dflt:k.defaultLine,editType:"ticks"},x={valType:"color",dflt:k.lightLine,editType:"ticks"};function v(C){var w={valType:"number",min:0,editType:"ticks"};return C||(w.dflt=1),w}var _=T({},o,{editType:"ticks"}),f={valType:"boolean",editType:"ticks"};ie.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:k.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:S({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"calc"},rangebreaks:b("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[r,i,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:l},editType:"calc"}),tickmode:a,nticks:s(),tick0:c,dtick:h,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:u,ticktext:{valType:"data_array",editType:"ticks"},ticks:y,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:d(),tickwidth:m(),tickcolor:g,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:T({},o,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:S({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:p("tick label")},tickformatstops:b("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:p("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:k.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:f,gridcolor:x,gridwidth:v(),griddash:_,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:k.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:k.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},minor:{tickmode:n,nticks:s("minor"),tick0:c,dtick:h,tickvals:u,ticks:y,ticklen:d("minor"),tickwidth:m("minor"),tickcolor:g,gridcolor:x,gridwidth:v("minor"),griddash:_,showgrid:f,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:S({editType:"ticks"})}}},67352:function(ie,F,e){"use strict";var S=e(3400),k=e(76308),o=e(10624).isUnifiedHover,T=e(41008),b=e(31780),p=e(64859),l=e(94724),t=e(14944),i=e(28336),r=e(71888),n=e(37668),a=e(79811),s=a.id2name,c=a.name2id,h=e(33816).AX_ID_PATTERN,u=e(24040),y=u.traceIs,d=u.getComponentMethod;function m(g,x,v){Array.isArray(g[x])?g[x].push(v):g[x]=[v]}ie.exports=function(g,x,v){var _,f,C=x.autotypenumbers,w={},E={},P={},L={},O={},z={},V={},R={},U={},Z={};for(_=0;_<v.length;_++){var N=v[_];if(y(N,"cartesian")||y(N,"gl2d")){var G,W;if(N.xaxis)G=s(N.xaxis),m(w,G,N);else if(N.xaxes)for(f=0;f<N.xaxes.length;f++)m(w,s(N.xaxes[f]),N);if(N.yaxis)W=s(N.yaxis),m(w,W,N);else if(N.yaxes)for(f=0;f<N.yaxes.length;f++)m(w,s(N.yaxes[f]),N);"funnel"===N.type?"h"===N.orientation?(G&&(E[G]=!0),W&&(V[W]=!0)):W&&(P[W]=!0):"image"===N.type?(W&&(R[W]=!0),G&&(R[G]=!0)):(W&&(O[W]=!0,z[W]=!0),y(N,"carpet")&&("carpet"!==N.type||N._cheater)||G&&(L[G]=!0)),"carpet"===N.type&&N._cheater&&G&&(E[G]=!0),y(N,"2dMap")&&(U[G]=!0,U[W]=!0),y(N,"oriented")&&(Z["h"===N.orientation?W:G]=!0)}}var ae=x._subplots,re=ae.xaxis,ne=ae.yaxis,Q=S.simpleMap(re,s),$=S.simpleMap(ne,s),X=Q.concat($),oe=k.background;re.length&&ne.length&&(oe=S.coerce(g,x,p,"plot_bgcolor"));var fe,ue,ge,we,Te,xe=k.combine(oe,x.paper_bgcolor);function ye(){Te._traceIndices=(w[fe]||[]).map(function(Rt){return Rt._expandedIndex}),Te._annIndices=[],Te._shapeIndices=[],Te._selectionIndices=[],Te._imgIndices=[],Te._subplotsWith=[],Te._counterAxes=[],Te._name=Te._attr=fe,Te._id=ue}function _e(ot,Rt){return S.coerce(we,Te,l,ot,Rt)}function Ie(ot,Rt){return S.coerce2(we,Te,l,ot,Rt)}function De(ot){return"x"===ot?ne:re}function be(ot,Rt){for(var Vt="x"===ot?Q:$,Ht=[],zt=0;zt<Vt.length;zt++){var Qe=Vt[zt];Qe===Rt||(g[Qe]||{}).overlaying||Ht.push(c(Qe))}return Ht}var he={x:De("x"),y:De("y")},ce=he.x.concat(he.y),me={},Pe=[];function Ae(){var ot=we.matches;h.test(ot)&&-1===ce.indexOf(ot)&&(me[ot]=we.type,Pe=Object.keys(me))}var Ce=T(g,x),Oe=o(Ce);for(_=0;_<X.length;_++){ue=c(fe=X[_]),ge=fe.charAt(0),S.isPlainObject(g[fe])||(g[fe]={}),we=g[fe],Te=b.newContainer(x,fe,ge+"axis"),ye();var ve={hasMinor:!0,letter:ge,font:x.font,outerTicks:U[fe],showGrid:!Z[fe],data:w[fe]||[],bgColor:xe,calendar:x.calendar,automargin:!0,visibleDflt:"x"===ge&&!L[fe]&&E[fe]||"y"===ge&&!O[fe]&&P[fe],reverseDflt:"y"===ge&&(!z[fe]&&V[fe]||R[fe]),autotypenumbersDflt:C,splomStash:((x._splomAxes||{})[ge]||{})[ue],noAutotickangles:"y"===ge};_e("uirevision",x.uirevision),t(we,Te,_e,ve),i(we,Te,_e,ve,x);var Me=Oe&&ge===Ce.charAt(0),Le=Ie("spikecolor",Oe?Te.color:void 0),Ue=Ie("spikethickness",Oe?1.5:void 0),ze=Ie("spikedash",Oe?"dot":void 0),qe=Ie("spikemode",Oe?"across":void 0),Ke=Ie("spikesnap");_e("showspikes",!!(Me||Le||Ue||ze||qe||Ke))||(delete Te.spikecolor,delete Te.spikethickness,delete Te.spikedash,delete Te.spikemode,delete Te.spikesnap);var it=s(we.overlaying),ft=[0,1];if(void 0!==x[it]){var dt=s(x[it].anchor);void 0!==x[dt]&&(ft=x[dt].domain)}n(we,Te,_e,{letter:ge,counterAxes:he[ge],overlayableAxes:be(ge,fe),grid:x.grid,overlayingDomain:ft}),_e("title.standoff"),Ae(),Te._input=we}for(_=0;_<Pe.length;){ue=Pe[_++],ge=(fe=s(ue)).charAt(0),S.isPlainObject(g[fe])||(g[fe]={}),we=g[fe],Te=b.newContainer(x,fe,ge+"axis"),ye();var kt={letter:ge,font:x.font,outerTicks:U[fe],showGrid:!Z[fe],data:[],bgColor:xe,calendar:x.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:C,splomStash:((x._splomAxes||{})[ge]||{})[ue]};_e("uirevision",x.uirevision),Te.type=me[ue]||"linear",i(we,Te,_e,kt,x),n(we,Te,_e,{letter:ge,counterAxes:he[ge],overlayableAxes:be(ge,fe),grid:x.grid}),_e("fixedrange"),Ae(),Te._input=we}var St=d("rangeslider","handleDefaults"),Tt=d("rangeselector","handleDefaults");for(_=0;_<Q.length;_++)we=g[fe=Q[_]],Te=x[fe],St(g,x,fe),"date"===Te.type&&Tt(we,Te,x,$,Te.calendar),_e("fixedrange");for(_=0;_<$.length;_++){we=g[fe=$[_]];var lt=x[s((Te=x[fe]).anchor)];_e("fixedrange",d("rangeslider","isVisible")(lt))}r.handleDefaults(g,x,{axIds:ce.concat(Pe).sort(a.idSort),axHasImage:R})}},42136:function(ie,F,e){"use strict";var S=e(49760).mix,k=e(22548),o=e(3400);ie.exports=function(T,b,p,l){var t=(l=l||{}).dfltColor;function i(g,x){return o.coerce2(T,b,l.attributes,g,x)}var r=i("linecolor",t),n=i("linewidth");p("showline",l.showLine||!!r||!!n)||(delete b.linecolor,delete b.linewidth);var a=i("gridcolor",S(t,l.bgColor,l.blend||k.lightFraction).toRgbString()),s=i("gridwidth"),c=i("griddash");if(p("showgrid",l.showGrid||!!a||!!s||!!c)||(delete b.gridcolor,delete b.gridwidth,delete b.griddash),l.hasMinor){var h=i("minor.gridcolor",S(b.gridcolor,l.bgColor,67).toRgbString()),u=i("minor.gridwidth",b.gridwidth||1),y=i("minor.griddash",b.griddash||"solid");p("minor.showgrid",!!h||!!u||!!y)||(delete b.minor.gridcolor,delete b.minor.gridwidth,delete b.minor.griddash)}if(!l.noZeroLine){var d=i("zerolinecolor",t),m=i("zerolinewidth");p("zeroline",l.showGrid||!!d||!!m)||(delete b.zerolinecolor,delete b.zerolinewidth)}}},37668:function(ie,F,e){"use strict";var S=e(38248),k=e(3400);ie.exports=function(o,T,b,p){var l,t,i,r,n,a,s=p.counterAxes||[],c=p.overlayableAxes||[],h=p.letter,u=p.grid,y=p.overlayingDomain;u&&(l=u._anchors[T._id],(t=u._domains[h][u._axisMap[T._id]])&&(i=u[h+"side"].split(" ")[0],r=u.domain[h]["right"===i||"top"===i?1:0])),t=t||[0,1],l=l||(S(o.position)?"free":s[0]||"free"),i=i||("x"===h?"bottom":"left"),r=r||0,n=0,a=!1;var d=k.coerce(o,T,{anchor:{valType:"enumerated",values:["free"].concat(s),dflt:l}},"anchor"),m=k.coerce(o,T,{side:{valType:"enumerated",values:"x"===h?["bottom","top"]:["left","right"],dflt:i}},"side");"free"===d&&("y"===h&&(b("autoshift")&&(r="left"===m?y[0]:y[1],a=!T.automargin||T.automargin,n="left"===m?-3:3),b("shift",n)),b("position",r)),b("automargin",a);var g=!1;if(c.length&&(g=k.coerce(o,T,{overlaying:{valType:"enumerated",values:[!1].concat(c),dflt:!1}},"overlaying")),!g){var x=b("domain",t);x[0]>x[1]-.000244140625&&(T.domain=t),k.noneOrAll(o.domain,T.domain,t),"sync"===T.tickmode&&(T.tickmode="auto")}return b("layer"),T}},42568:function(ie,F,e){"use strict";var S=e(85024);ie.exports=function(k,o,T,b,p){p||(p={});var l=p.tickSuffixDflt,t=S(k);T("tickprefix")&&T("showtickprefix",t),T("ticksuffix",l)&&T("showticksuffix",t)}},96312:function(ie,F,e){"use strict";var S=e(76808);ie.exports=function(k,o,T,b){var l=o.type||(o._template||{}).type||"-";T("minallowed"),T("maxallowed");var t,i=T("range");i||b.noInsiderange||"log"===l||(!(t=T("insiderange"))||null!==t[0]&&null!==t[1]||(o.insiderange=!1,t=void 0),t&&(i=T("range",t)));var r,n=o.getAutorangeDflt(i,b),a=T("autorange",n);!i||(null!==i[0]||null!==i[1])&&(null!==i[0]&&null!==i[1]||"reversed"!==a&&!0!==a)&&(null===i[0]||"min"!==a&&"max reversed"!==a)&&(null===i[1]||"max"!==a&&"min reversed"!==a)||(i=void 0,delete o.range,o.autorange=!0,r=!0),r||(a=T("autorange",n=o.getAutorangeDflt(i,b))),a&&(S(T,a,i),"linear"!==l&&"-"!==l||T("rangemode")),o.cleanRange()}},21160:function(ie,F,e){"use strict";var S=e(84284).FROM_BL;ie.exports=function(k,o,T){void 0===T&&(T=S[k.constraintoward||"center"]);var b=[k.r2l(k.range[0]),k.r2l(k.range[1])],p=b[0]+(b[1]-b[0])*T;k.range=k._input.range=[k.l2r(p+(b[0]-p)*o),k.l2r(p+(b[1]-p)*o)],k.setScale()}},78344:function(ie,F,e){"use strict";var S=e(33428),k=e(94336).E9,o=e(3400),T=o.numberFormat,b=e(38248),p=o.cleanNumber,l=o.ms2DateTime,t=o.dateTime2ms,i=o.ensureNumber,r=o.isArrayOrTypedArray,n=e(39032),a=n.FP_SAFE,s=n.BADNUM,c=n.LOG_CLIP,h=n.ONEWEEK,u=n.ONEDAY,y=n.ONEHOUR,d=n.ONEMIN,m=n.ONESEC,g=e(79811),x=e(33816),v=x.HOUR_PATTERN,_=x.WEEKDAY_PATTERN;function f(w){return Math.pow(10,w)}function C(w){return null!=w}ie.exports=function(w,E){E=E||{};var P=w._id||"x",L=P.charAt(0);function O(X,oe){if(X>0)return Math.log(X)/Math.LN10;if(X<=0&&oe&&w.range&&2===w.range.length){var fe=w.range[0],ue=w.range[1];return.5*(fe+ue-2*c*Math.abs(fe-ue))}return s}function z(X,oe,fe,ue){if((ue||{}).msUTC&&b(X))return+X;var ge=t(X,fe||w.calendar);if(ge===s){if(!b(X))return s;X=+X;var we=Math.floor(10*o.mod(X+.05,1)),Te=Math.round(X-we/10);ge=t(new Date(Te))+we/10}return ge}function V(X,oe,fe){return l(X,oe,fe||w.calendar)}function R(X){return w._categories[Math.round(X)]}function U(X){if(C(X)){if(void 0===w._categoriesMap&&(w._categoriesMap={}),void 0!==w._categoriesMap[X])return w._categoriesMap[X];w._categories.push("number"==typeof X?String(X):X);var oe=w._categories.length-1;return w._categoriesMap[X]=oe,oe}return s}function Z(X){if(w._categoriesMap)return w._categoriesMap[X]}function N(X){var oe=Z(X);return void 0!==oe?oe:b(X)?+X:void 0}function G(X){return b(X)?+X:Z(X)}function W(X,oe,fe){return S.round(fe+oe*X,2)}function ae(X,oe,fe){return(X-fe)/oe}var re=function(X){return b(X)?W(X,w._m,w._b):s},ne=function(X){return ae(X,w._m,w._b)};if(w.rangebreaks){var Q="y"===L;re=function(X){if(!b(X))return s;var oe=w._rangebreaks.length;if(!oe)return W(X,w._m,w._b);var fe=Q;w.range[0]>w.range[1]&&(fe=!fe);for(var ue=fe?-1:1,ge=ue*X,we=0,Te=0;Te<oe;Te++){var xe=ue*w._rangebreaks[Te].min,ye=ue*w._rangebreaks[Te].max;if(ge<xe)break;if(!(ge>ye)){we=ge<(xe+ye)/2?Te:Te+1;break}we=Te+1}var _e=w._B[we]||0;return isFinite(_e)?W(X,w._m2,_e):0},ne=function(X){var oe=w._rangebreaks.length;if(!oe)return ae(X,w._m,w._b);for(var fe=0,ue=0;ue<oe&&!(X<w._rangebreaks[ue].pmin);ue++)X>w._rangebreaks[ue].pmax&&(fe=ue+1);return ae(X,w._m2,w._B[fe])}}w.c2l="log"===w.type?O:i,w.l2c="log"===w.type?f:i,w.l2p=re,w.p2l=ne,w.c2p="log"===w.type?function(X,oe){return re(O(X,oe))}:re,w.p2c="log"===w.type?function(X){return f(ne(X))}:ne,-1!==["linear","-"].indexOf(w.type)?(w.d2r=w.r2d=w.d2c=w.r2c=w.d2l=w.r2l=p,w.c2d=w.c2r=w.l2d=w.l2r=i,w.d2p=w.r2p=function(X){return w.l2p(p(X))},w.p2d=w.p2r=ne,w.cleanPos=i):"log"===w.type?(w.d2r=w.d2l=function(X,oe){return O(p(X),oe)},w.r2d=w.r2c=function(X){return f(p(X))},w.d2c=w.r2l=p,w.c2d=w.l2r=i,w.c2r=O,w.l2d=f,w.d2p=function(X,oe){return w.l2p(w.d2r(X,oe))},w.p2d=function(X){return f(ne(X))},w.r2p=function(X){return w.l2p(p(X))},w.p2r=ne,w.cleanPos=i):"date"===w.type?(w.d2r=w.r2d=o.identity,w.d2c=w.r2c=w.d2l=w.r2l=z,w.c2d=w.c2r=w.l2d=w.l2r=V,w.d2p=w.r2p=function(X,oe,fe){return w.l2p(z(X,0,fe))},w.p2d=w.p2r=function(X,oe,fe){return V(ne(X),oe,fe)},w.cleanPos=function(X){return o.cleanDate(X,s,w.calendar)}):"category"===w.type?(w.d2c=w.d2l=U,w.r2d=w.c2d=w.l2d=R,w.d2r=w.d2l_noadd=N,w.r2c=function(X){var oe=G(X);return void 0!==oe?oe:w.fraction2r(.5)},w.l2r=w.c2r=i,w.r2l=G,w.d2p=function(X){return w.l2p(w.r2c(X))},w.p2d=function(X){return R(ne(X))},w.r2p=w.d2p,w.p2r=ne,w.cleanPos=function(X){return"string"==typeof X&&""!==X?X:i(X)}):"multicategory"===w.type&&(w.r2d=w.c2d=w.l2d=R,w.d2r=w.d2l_noadd=N,w.r2c=function(X){var oe=N(X);return void 0!==oe?oe:w.fraction2r(.5)},w.r2c_just_indices=Z,w.l2r=w.c2r=i,w.r2l=N,w.d2p=function(X){return w.l2p(w.r2c(X))},w.p2d=function(X){return R(ne(X))},w.r2p=w.d2p,w.p2r=ne,w.cleanPos=function(X){return Array.isArray(X)||"string"==typeof X&&""!==X?X:i(X)},w.setupMultiCategory=function(X){var oe,fe,ue=w._traceIndices,ge=w._matchGroup;if(ge&&0===w._categories.length)for(var we in ge)if(we!==P){var Te=E[g.id2name(we)];ue=ue.concat(Te._traceIndices)}var xe=[[0,{}],[0,{}]],ye=[];for(oe=0;oe<ue.length;oe++){var _e=X[ue[oe]];if(L in _e){var Ie=_e[L],De=_e._length||o.minRowLength(Ie);if(r(Ie[0])&&r(Ie[1]))for(fe=0;fe<De;fe++){var be=Ie[0][fe],he=Ie[1][fe];C(be)&&C(he)&&(ye.push([be,he]),be in xe[0][1]||(xe[0][1][be]=xe[0][0]++),he in xe[1][1]||(xe[1][1][he]=xe[1][0]++))}}}for(ye.sort(function(ce,me){var Pe=xe[0][1],Ae=Pe[ce[0]]-Pe[me[0]];if(Ae)return Ae;var Ce=xe[1][1];return Ce[ce[1]]-Ce[me[1]]}),oe=0;oe<ye.length;oe++)U(ye[oe])}),w.fraction2r=function(X){var oe=w.r2l(w.range[0]),fe=w.r2l(w.range[1]);return w.l2r(oe+X*(fe-oe))},w.r2fraction=function(X){var oe=w.r2l(w.range[0]),fe=w.r2l(w.range[1]);return(w.r2l(X)-oe)/(fe-oe)},w.limitRange=function(X){var oe=w.minallowed,fe=w.maxallowed;if(void 0!==oe||void 0!==fe){X||(X="range");var ue=o.nestedProperty(w,X).get(),ge=o.simpleMap(ue,w.r2l),we=ge[1]<ge[0];we&&ge.reverse();var Te=o.simpleMap([oe,fe],w.r2l);if(void 0!==oe&&ge[0]<Te[0]&&(ue[we?1:0]=oe),void 0!==fe&&ge[1]>Te[1]&&(ue[we?0:1]=fe),ue[0]===ue[1]){var xe=w.l2r(oe),ye=w.l2r(fe);if(void 0!==oe){var _e=xe+1;void 0!==fe&&(_e=Math.min(_e,ye)),ue[we?1:0]=_e}if(void 0!==fe){var Ie=ye+1;void 0!==oe&&(Ie=Math.max(Ie,xe)),ue[we?0:1]=Ie}}}},w.cleanRange=function(X,oe){w._cleanRange(X,oe),w.limitRange(X)},w._cleanRange=function(X,oe){oe||(oe={}),X||(X="range");var fe,ue,ge=o.nestedProperty(w,X).get();if(ue=(ue="date"===w.type?o.dfltRange(w.calendar):"y"===L?x.DFLTRANGEY:"realaxis"===w._name?[0,1]:oe.dfltRange||x.DFLTRANGEX).slice(),"tozero"!==w.rangemode&&"nonnegative"!==w.rangemode||(ue[0]=0),ge&&2===ge.length){var we=null===ge[0],Te=null===ge[1];for("date"!==w.type||w.autorange||(ge[0]=o.cleanDate(ge[0],s,w.calendar),ge[1]=o.cleanDate(ge[1],s,w.calendar)),fe=0;fe<2;fe++)if("date"===w.type){if(!o.isDateTime(ge[fe],w.calendar)){w[X]=ue;break}if(w.r2l(ge[0])===w.r2l(ge[1])){var xe=o.constrain(w.r2l(ge[0]),o.MIN_MS+1e3,o.MAX_MS-1e3);ge[0]=w.l2r(xe-1e3),ge[1]=w.l2r(xe+1e3);break}}else{if(!b(ge[fe])){if(we||Te||!b(ge[1-fe])){w[X]=ue;break}ge[fe]=ge[1-fe]*(fe?10:.1)}if(ge[fe]<-a?ge[fe]=-a:ge[fe]>a&&(ge[fe]=a),ge[0]===ge[1]){var ye=Math.max(1,Math.abs(1e-6*ge[0]));ge[0]-=ye,ge[1]+=ye}}}else o.nestedProperty(w,X).set(ue)},w.setScale=function(X){var oe=E._size;if(w.overlaying){var fe=g.getFromId({_fullLayout:E},w.overlaying);w.domain=fe.domain}var ue=X&&w._r?"_r":"range",ge=w.calendar;w.cleanRange(ue);var we,Te,xe=w.r2l(w[ue][0],ge),ye=w.r2l(w[ue][1],ge),_e="y"===L;if(_e?(w._offset=oe.t+(1-w.domain[1])*oe.h,w._length=oe.h*(w.domain[1]-w.domain[0]),w._m=w._length/(xe-ye),w._b=-w._m*ye):(w._offset=oe.l+w.domain[0]*oe.w,w._length=oe.w*(w.domain[1]-w.domain[0]),w._m=w._length/(ye-xe),w._b=-w._m*xe),w._rangebreaks=[],w._lBreaks=0,w._m2=0,w._B=[],w.rangebreaks&&(w._rangebreaks=w.locateBreaks(Math.min(xe,ye),Math.max(xe,ye)),w._rangebreaks.length)){for(we=0;we<w._rangebreaks.length;we++)Te=w._rangebreaks[we],w._lBreaks+=Math.abs(Te.max-Te.min);var Ie=_e;xe>ye&&(Ie=!Ie),Ie&&w._rangebreaks.reverse();var De=Ie?-1:1;for(w._m2=De*w._length/(Math.abs(ye-xe)-w._lBreaks),w._B.push(-w._m2*(_e?ye:xe)),we=0;we<w._rangebreaks.length;we++)w._B.push(w._B[w._B.length-1]-De*w._m2*((Te=w._rangebreaks[we]).max-Te.min));for(we=0;we<w._rangebreaks.length;we++)(Te=w._rangebreaks[we]).pmin=re(Te.min),Te.pmax=re(Te.max)}if(!isFinite(w._m)||!isFinite(w._b)||w._length<0)throw E._replotting=!1,new Error("Something went wrong with axis scaling")},w.maskBreaks=function(X){var oe,fe,ue,ge,we,Te=w.rangebreaks||[];Te._cachedPatterns||(Te._cachedPatterns=Te.map(function(be){return be.enabled&&be.bounds?o.simpleMap(be.bounds,be.pattern?p:w.d2c):null})),Te._cachedValues||(Te._cachedValues=Te.map(function(be){return be.enabled&&be.values?o.simpleMap(be.values,w.d2c).sort(o.sorterAsc):null}));for(var xe=0;xe<Te.length;xe++){var ye=Te[xe];if(ye.enabled)if(ye.bounds){switch(fe=(oe=Te._cachedPatterns[xe])[0],ue=oe[1],ye.pattern){case _:ge=(we=new Date(X)).getUTCDay(),fe>ue&&(ue+=7,ge<fe&&(ge+=7));break;case v:ge=(we=new Date(X)).getUTCHours()+(we.getUTCMinutes()/60+we.getUTCSeconds()/3600+we.getUTCMilliseconds()/36e5),fe>ue&&(ue+=24,ge<fe&&(ge+=24));break;case"":ge=X}if(ge>=fe&&ge<ue)return s}else for(var Ie=Te._cachedValues[xe],De=0;De<Ie.length;De++)if(ue=(fe=Ie[De])+ye.dvalue,X>=fe&&X<ue)return s}return X},w.locateBreaks=function(X,oe){var fe,ue,ge,we,Te=[];if(!w.rangebreaks)return Te;var xe=w.rangebreaks.slice().sort(function(Ce,Oe){return Ce.pattern===_&&Oe.pattern===v?-1:Oe.pattern===_&&Ce.pattern===v?1:0}),ye=function(Ce,Oe){if((Ce=o.constrain(Ce,X,oe))!==(Oe=o.constrain(Oe,X,oe))){for(var Ne=!0,je=0;je<Te.length;je++){var ve=Te[je];Ce<ve.max&&Oe>=ve.min&&(Ce<ve.min&&(ve.min=Ce),Oe>ve.max&&(ve.max=Oe),Ne=!1)}Ne&&Te.push({min:Ce,max:Oe})}};for(fe=0;fe<xe.length;fe++){var _e=xe[fe];if(_e.enabled)if(_e.bounds){var Ie=X,De=oe;_e.pattern&&(Ie=Math.floor(Ie)),ge=(ue=o.simpleMap(_e.bounds,_e.pattern?p:w.r2l))[0],we=ue[1];var be,he,ce=new Date(Ie);switch(_e.pattern){case _:he=h,be=(we-ge+(we<ge?7:0))*u,Ie+=ge*u-(ce.getUTCDay()*u+ce.getUTCHours()*y+ce.getUTCMinutes()*d+ce.getUTCSeconds()*m+ce.getUTCMilliseconds());break;case v:he=u,be=(we-ge+(we<ge?24:0))*y,Ie+=ge*y-(ce.getUTCHours()*y+ce.getUTCMinutes()*d+ce.getUTCSeconds()*m+ce.getUTCMilliseconds());break;default:Ie=Math.min(ue[0],ue[1]),be=he=(De=Math.max(ue[0],ue[1]))-Ie}for(var me=Ie;me<De;me+=he)ye(me,me+be)}else for(var Pe=o.simpleMap(_e.values,w.d2c),Ae=0;Ae<Pe.length;Ae++)ye(ge=Pe[Ae],we=ge+_e.dvalue)}return Te.sort(function(Ce,Oe){return Ce.min-Oe.min}),Te},w.makeCalcdata=function(X,oe,fe){var ue,ge,we,Te,xe=w.type,ye="date"===xe&&X[oe+"calendar"];if(oe in X){if(ue=X[oe],Te=X._length||o.minRowLength(ue),o.isTypedArray(ue)&&("linear"===xe||"log"===xe)){if(Te===ue.length)return ue;if(ue.subarray)return ue.subarray(0,Te)}if("multicategory"===xe)return function(De,be){for(var he=new Array(be),ce=0;ce<be;ce++)he[ce]=Z([(De[0]||[])[ce],(De[1]||[])[ce]]);return he}(ue,Te);for(ge=new Array(Te),we=0;we<Te;we++)ge[we]=w.d2c(ue[we],0,ye,fe)}else{var _e=oe+"0"in X?w.d2c(X[oe+"0"],0,ye):0,Ie=X["d"+oe]?Number(X["d"+oe]):1;for(ue=X[{x:"y",y:"x"}[oe]],Te=X._length||ue.length,ge=new Array(Te),we=0;we<Te;we++)ge[we]=_e+we*Ie}if(w.rangebreaks)for(we=0;we<Te;we++)ge[we]=w.maskBreaks(ge[we]);return ge},w.isValidRange=function(X,oe){return Array.isArray(X)&&2===X.length&&(oe&&null===X[0]||b(w.r2l(X[0])))&&(oe&&null===X[1]||b(w.r2l(X[1])))},w.getAutorangeDflt=function(X,oe){var fe=!w.isValidRange(X,"nullOk");return fe&&oe&&oe.reverseDflt?fe="reversed":X&&(null===X[0]&&null===X[1]?fe=!0:null===X[0]&&null!==X[1]?fe="min":null!==X[0]&&null===X[1]&&(fe="max")),fe},w.isReversed=function(){var X=w.autorange;return"reversed"===X||"min reversed"===X||"max reversed"===X},w.isPtWithinRange=function(X,oe){var fe=w.c2l(X[L],null,oe),ue=w.r2l(w.range[0]),ge=w.r2l(w.range[1]);return ue<ge?ue<=fe&&fe<=ge:ge<=fe&&fe<=ue},w._emptyCategories=function(){w._categories=[],w._categoriesMap={}},w.clearCalc=function(){var X=w._matchGroup;if(X){var oe=null,fe=null;for(var ue in X){var ge=E[g.id2name(ue)];if(ge._categories){oe=ge._categories,fe=ge._categoriesMap;break}}oe&&fe?(w._categories=oe,w._categoriesMap=fe):w._emptyCategories()}else w._emptyCategories();if(w._initialCategories)for(var we=0;we<w._initialCategories.length;we++)U(w._initialCategories[we])},w.sortByInitialCategories=function(){var X=[];if(w._emptyCategories(),w._initialCategories)for(var oe=0;oe<w._initialCategories.length;oe++)U(w._initialCategories[oe]);X=X.concat(w._traceIndices);var fe=w._matchGroup;for(var ue in fe)if(P!==ue){var ge=E[g.id2name(ue)];ge._categories=w._categories,ge._categoriesMap=w._categoriesMap,X=X.concat(ge._traceIndices)}return X};var $=E._d3locale;"date"===w.type&&(w._dateFormat=$?$.timeFormat:k,w._extraFormat=E._extraFormat),w._separators=E.separators,w._numFormat=$?$.numberFormat:T,delete w._minDtick,delete w._forceTick0}},85024:function(ie){"use strict";ie.exports=function(F){var e=["showexponent","showtickprefix","showticksuffix"].filter(function(S){return void 0!==F[S]});if(e.every(function(S){return F[S]===F[e[0]]})||1===e.length)return F[e[0]]}},95936:function(ie,F,e){"use strict";var S=e(3400),k=e(76308).contrast,o=e(94724),T=e(85024),b=e(51272);function p(l,t){function i(r,n){return S.coerce(l,t,o.tickformatstops,r,n)}i("enabled")&&(i("dtickrange"),i("value"))}ie.exports=function(l,t,i,r,n){n||(n={});var a=i("labelalias");S.isPlainObject(a)||delete t.labelalias;var s=T(l);if(i("showticklabels")){var c=n.font||{},h=t.color,u=-1!==(t.ticklabelposition||"").indexOf("inside")?k(n.bgColor):h&&h!==o.color.dflt?h:c.color;if(S.coerceFont(i,"tickfont",c,{overrideDflt:{color:u}}),n.noTicklabelstep||"multicategory"===r||"log"===r||i("ticklabelstep"),!n.noAng){var y=i("tickangle");n.noAutotickangles||"auto"!==y||i("autotickangles")}if("category"!==r){var d=i("tickformat");b(l,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:p}),t.tickformatstops.length||delete t.tickformatstops,n.noExp||d||"date"===r||(i("showexponent",s),i("exponentformat"),i("minexponent"),i("separatethousands"))}}}},25404:function(ie,F,e){"use strict";var S=e(3400),k=e(94724);ie.exports=function(o,T,b,p){var l=p.isMinor,t=l?o.minor||{}:o,i=l?T.minor:T,r=l?k.minor:k,n=l?"minor.":"",a=S.coerce2(t,i,r,"ticklen",l?.6*(T.ticklen||5):void 0),s=S.coerce2(t,i,r,"tickwidth",l?T.tickwidth||1:void 0),c=S.coerce2(t,i,r,"tickcolor",(l?T.tickcolor:void 0)||i.color);b(n+"ticks",!l&&p.outerTicks||a||s||c?"outside":"")||(delete i.ticklen,delete i.tickwidth,delete i.tickcolor)}},26332:function(ie,F,e){"use strict";var S=e(98728),k=e(3400).isArrayOrTypedArray,o=e(38116).isTypedArraySpec,T=e(38116).decodeTypedArraySpec;ie.exports=function(b,p,l,t,i){i||(i={});var r=i.isMinor,n=r?b.minor||{}:b,a=r?p.minor:p,s=r?"minor.":"";function c(g){var x=n[g];return o(x)&&(x=T(x)),void 0!==x?x:(a._template||{})[g]}var h=c("tick0"),u=c("dtick"),y=c("tickvals"),d=l(s+"tickmode",k(y)?"array":u?"linear":"auto");if("auto"===d||"sync"===d)l(s+"nticks");else if("linear"===d){var m=a.dtick=S.dtick(u,t);a.tick0=S.tick0(h,t,p.calendar,m)}else"multicategory"!==t&&(void 0===l(s+"tickvals")?a.tickmode="auto":r||l("ticktext"))}},73736:function(ie,F,e){"use strict";var S=e(33428),k=e(24040),o=e(3400),T=e(43616),b=e(54460);ie.exports=function(p,l,t,i){var r=p._fullLayout;if(0!==l.length){var n,a,s,c;i&&(n=i());var h=S.ease(t.easing);return p._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(c),c=null,function(){for(var d={},m=0;m<l.length;m++){var g=l[m],v=g.plotinfo.yaxis;g.xr0&&(d[g.plotinfo.xaxis._name+".range"]=g.xr0.slice()),g.yr0&&(d[v._name+".range"]=g.yr0.slice())}return k.call("relayout",p,d).then(function(){for(var _=0;_<l.length;_++)u(l[_].plotinfo)})}()}),a=Date.now(),c=window.requestAnimationFrame(function d(){s=Date.now();for(var m=Math.min(1,(s-a)/t.duration),g=h(m),x=0;x<l.length;x++)y(l[x],g);s-a>t.duration?(function(){for(var v={},_=0;_<l.length;_++){var f=l[_],w=f.plotinfo.yaxis;f.xr1&&(v[f.plotinfo.xaxis._name+".range"]=f.xr1.slice()),f.yr1&&(v[w._name+".range"]=f.yr1.slice())}n&&n(),k.call("relayout",p,v).then(function(){for(var E=0;E<l.length;E++)u(l[E].plotinfo)})}(),c=window.cancelAnimationFrame(d)):c=window.requestAnimationFrame(d)}),Promise.resolve()}function u(d){var m=d.xaxis,g=d.yaxis;r._defs.select("#"+d.clipId+"> rect").call(T.setTranslate,0,0).call(T.setScale,1,1),d.plot.call(T.setTranslate,m._offset,g._offset).call(T.setScale,1,1);var x=d.plot.selectAll(".scatterlayer .trace");x.selectAll(".point").call(T.setPointGroupScale,1,1),x.selectAll(".textpoint").call(T.setTextPointsScale,1,1),x.call(T.hideOutsideRangePoints,d)}function y(d,m){var g=d.plotinfo,x=g.xaxis,v=g.yaxis,_=x._length,f=v._length,C=!!d.xr1,w=!!d.yr1,E=[];if(C){var P=o.simpleMap(d.xr0,x.r2l),L=o.simpleMap(d.xr1,x.r2l),O=P[1]-P[0],z=L[1]-L[0];E[0]=(P[0]*(1-m)+m*L[0]-P[0])/(P[1]-P[0])*_,E[2]=_*(1-m+m*z/O),x.range[0]=x.l2r(P[0]*(1-m)+m*L[0]),x.range[1]=x.l2r(P[1]*(1-m)+m*L[1])}else E[0]=0,E[2]=_;if(w){var V=o.simpleMap(d.yr0,v.r2l),R=o.simpleMap(d.yr1,v.r2l),U=V[1]-V[0],Z=R[1]-R[0];E[1]=(V[1]*(1-m)+m*R[1]-V[1])/(V[0]-V[1])*f,E[3]=f*(1-m+m*Z/U),v.range[0]=x.l2r(V[0]*(1-m)+m*R[0]),v.range[1]=v.l2r(V[1]*(1-m)+m*R[1])}else E[1]=0,E[3]=f;b.drawOne(p,x,{skipTitle:!0}),b.drawOne(p,v,{skipTitle:!0}),b.redrawComponents(p,[x._id,v._id]);var N=C?_/E[2]:1,G=w?f/E[3]:1,Q=x._offset-(C?E[0]/E[2]*_:0),$=v._offset-(w?E[1]/E[3]*f:0);g.clipRect.call(T.setTranslate,C?E[0]:0,w?E[1]:0).call(T.setScale,1/N,1/G),g.plot.call(T.setTranslate,Q,$).call(T.setScale,N,G),T.setPointGroupScale(g.zoomScalePts,1/N,1/G),T.setTextPointsScale(g.zoomScaleTxt,1/N,1/G)}b.redrawComponents(p)}},14944:function(ie,F,e){"use strict";var S=e(24040).traceIs,k=e(52976);function o(b){return{v:"x",h:"y"}[b.orientation||"v"]}function T(b,p){var l=o(b),t=S(b,"box-violin"),i=S(b._fullInput||{},"candlestick");return t&&!i&&p===l&&void 0===b[l]&&void 0===b[l+"0"]}ie.exports=function(b,p,l,t){l("autotypenumbers",t.autotypenumbersDflt),"-"===l("type",(t.splomStash||{}).type)&&(function(i,r){if("-"===i.type){var n,a=i._id,s=a.charAt(0);-1!==a.indexOf("scene")&&(a=s);var c=function(v,_,f){for(var C=0;C<v.length;C++){var w=v[C];if("splom"===w.type&&w._length>0&&(w["_"+f+"axes"]||{})[_]||(w[f+"axis"]||f)===_&&(T(w,f)||(w[f]||[]).length||w[f+"0"]))return w}}(r,a,s);if(c)if("histogram"!==c.type||s!=={v:"y",h:"x"}[c.orientation||"v"]){var h=s+"calendar",u=c[h],y={noMultiCategory:!S(c,"cartesian")||S(c,"noMultiCategory")};if("box"===c.type&&c._hasPreCompStats&&s==={h:"x",v:"y"}[c.orientation||"v"]&&(y.noMultiCategory=!0),y.autotypenumbers=i.autotypenumbers,T(c,s)){var d=o(c),m=[];for(n=0;n<r.length;n++){var g=r[n];S(g,"box-violin")&&(g[s+"axis"]||s)===a&&(m.push(void 0!==g[d]?g[d][0]:void 0!==g.name?g.name:"text"),g[h]!==u&&(u=void 0))}i.type=k(m,u,y)}else if("splom"===c.type){var x=c.dimensions[c._axesDim[a]];x.visible&&(i.type=k(x.values,u,y))}else i.type=k(c[s]||[c[s+"0"]],u,y)}else i.type="linear"}}(p,t.data),"-"===p.type?p.type="linear":b.type=p.type)}},62460:function(ie,F,e){"use strict";var S=e(24040),k=e(3400);function o(l,t,i){var r,n,a,s=!1;if("data"===t.type)r=l._fullData[null!==t.traces?t.traces[0]:0];else{if("layout"!==t.type)return!1;r=l._fullLayout}return n=k.nestedProperty(r,t.prop).get(),(a=i[t.type]=i[t.type]||{}).hasOwnProperty(t.prop)&&a[t.prop]!==n&&(s=!0),a[t.prop]=n,{changed:s,value:n}}function T(l,t){var i=[],r=t[0],n={};if("string"==typeof r)n[r]=t[1];else{if(!k.isPlainObject(r))return i;n=r}return p(n,function(a,s,c){i.push({type:"layout",prop:a,value:c})},"",0),i}function b(l,t){var i,r,n,a,s=[];if(n=t[1],i=t[2],a={},"string"==typeof(r=t[0]))a[r]=n;else{if(!k.isPlainObject(r))return s;a=r,void 0===i&&(i=n)}return void 0===i&&(i=null),p(a,function(c,h,u){var y,d;if(Array.isArray(u)){d=u.slice();var m=Math.min(d.length,l.data.length);i&&(m=Math.min(m,i.length)),y=[];for(var g=0;g<m;g++)y[g]=i?i[g]:g}else d=u,y=i?i.slice():null;if(null===y)Array.isArray(d)&&(d=d[0]);else if(Array.isArray(y)){if(!Array.isArray(d)){var x=d;d=[];for(var v=0;v<y.length;v++)d[v]=x}d.length=Math.min(y.length,d.length)}s.push({type:"data",prop:c,traces:y,value:d})},"",0),s}function p(l,t,i,r){Object.keys(l).forEach(function(n){var a=l[n];if("_"!==n[0]){var s=i+(r>0?".":"")+n;k.isPlainObject(a)?p(a,t,s,r+1):t(s,n,a)}})}F.manageCommandObserver=function(l,t,i,r){var n={},a=!0;t&&t._commandObserver&&(n=t._commandObserver),n.cache||(n.cache={}),n.lookupTable={};var s=F.hasSimpleAPICommandBindings(l,i,n.lookupTable);if(t&&t._commandObserver){if(s)return n;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,n}if(s){o(l,s,n.cache),n.check=function(){if(a){var u=o(l,s,n.cache);return u.changed&&r&&void 0!==n.lookupTable[u.value]&&(n.disable(),Promise.resolve(r({value:u.value,type:s.type,prop:s.prop,traces:s.traces,index:n.lookupTable[u.value]})).then(n.enable,n.enable)),u.changed}};for(var c=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],h=0;h<c.length;h++)l._internalOn(c[h],n.check);n.remove=function(){for(var u=0;u<c.length;u++)l._removeInternalListener(c[u],n.check)}}else k.log("Unable to automatically bind plot updates to API command"),n.lookupTable={},n.remove=function(){};return n.disable=function(){a=!1},n.enable=function(){a=!0},t&&(t._commandObserver=n),n},F.hasSimpleAPICommandBindings=function(l,t,i){var r,n,a=t.length;for(r=0;r<a;r++){var s,c=t[r],h=c.method,u=c.args;if(Array.isArray(u)||(u=[]),!h)return!1;var y=F.computeAPICommandBindings(l,h,u);if(1!==y.length)return!1;if(n){if((s=y[0]).type!==n.type||s.prop!==n.prop)return!1;if(Array.isArray(n.traces)){if(!Array.isArray(s.traces))return!1;s.traces.sort();for(var d=0;d<n.traces.length;d++)if(n.traces[d]!==s.traces[d])return!1}else if(s.prop!==n.prop)return!1}else n=y[0],Array.isArray(n.traces)&&n.traces.sort();var m=(s=y[0]).value;if(Array.isArray(m)){if(1!==m.length)return!1;m=m[0]}i&&(i[m]=r)}return n},F.executeAPICommand=function(l,t,i){if("skip"===t)return Promise.resolve();var r=S.apiMethodRegistry[t],n=[l];Array.isArray(i)||(i=[]);for(var a=0;a<i.length;a++)n.push(i[a]);return r.apply(null,n).catch(function(s){return k.warn("API call to Plotly."+t+" rejected.",s),Promise.reject(s)})},F.computeAPICommandBindings=function(l,t,i){var r,a;switch(Array.isArray(i)||(i=[]),t){case"restyle":r=b(l,i);break;case"relayout":r=T(0,i);break;case"update":r=b(l,[i[0],i[2]]).concat(T(0,[i[1]]));break;case"animate":a=i,r=Array.isArray(a[0])&&1===a[0].length&&-1!==["string","number"].indexOf(typeof a[0][0])?[{type:"layout",prop:"_currentFrame",value:a[0][0].toString()}]:[];break;default:r=[]}return r}},86968:function(ie,F,e){"use strict";var S=e(92880).extendFlat;F.u=function(k,o){o=o||{};var T={valType:"info_array",editType:(k=k||{}).editType,items:[{valType:"number",min:0,max:1,editType:k.editType},{valType:"number",min:0,max:1,editType:k.editType}],dflt:[0,1]},b={x:S({},T,{}),y:S({},T,{}),editType:k.editType};return k.noGridCell||(b.row={valType:"integer",min:0,dflt:0,editType:k.editType},b.column={valType:"integer",min:0,dflt:0,editType:k.editType}),b},F.Q=function(k,o,T,b){var p=b&&b.x||[0,1],l=b&&b.y||[0,1],t=o.grid;if(t){var i=T("domain.column");void 0!==i&&(i<t.columns?p=t._domains.x[i]:delete k.domain.column);var r=T("domain.row");void 0!==r&&(r<t.rows?l=t._domains.y[r]:delete k.domain.row)}var n=T("domain.x",p),a=T("domain.y",l);n[0]<n[1]||(k.domain.x=p.slice()),a[0]<a[1]||(k.domain.y=l.slice())}},25376:function(ie){"use strict";ie.exports=function(F){var e=F.variantValues,S=F.editType,k=F.colorEditType;void 0===k&&(k=S);var o={editType:S,valType:"integer",min:1,max:1e3,extras:["normal","bold"],dflt:"normal"};F.noNumericWeightValues&&(o.valType="enumerated",o.values=o.extras,o.extras=void 0,o.min=void 0,o.max=void 0);var T={family:{valType:"string",noBlank:!0,strict:!0,editType:S},size:{valType:"number",min:1,editType:S},color:{valType:"color",editType:k},weight:o,style:{editType:S,valType:"enumerated",values:["normal","italic"],dflt:"normal"},variant:F.noFontVariant?void 0:{editType:S,valType:"enumerated",values:e||["normal","small-caps","all-small-caps","all-petite-caps","petite-caps","unicase"],dflt:"normal"},textcase:F.noFontTextcase?void 0:{editType:S,valType:"enumerated",values:["normal","word caps","upper","lower"],dflt:"normal"},lineposition:F.noFontLineposition?void 0:{editType:S,valType:"flaglist",flags:["under","over","through"],extras:["none"],dflt:"none"},shadow:F.noFontShadow?void 0:{editType:S,valType:"string",dflt:F.autoShadowDflt?"auto":"none"},editType:S};return F.autoSize&&(T.size.dflt="auto"),F.autoColor&&(T.color.dflt="auto"),F.arrayOk&&(T.family.arrayOk=!0,T.weight.arrayOk=!0,T.style.arrayOk=!0,F.noFontVariant||(T.variant.arrayOk=!0),F.noFontTextcase||(T.textcase.arrayOk=!0),F.noFontLineposition||(T.lineposition.arrayOk=!0),F.noFontShadow||(T.shadow.arrayOk=!0),T.size.arrayOk=!0,T.color.arrayOk=!0),T}},16672:function(ie){"use strict";ie.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},79552:function(ie,F){"use strict";F.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr","equal earth":"equalEarth",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},F.axesNames=["lonaxis","lataxis"],F.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},F.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},F.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},F.clipPad=.001,F.precision=.1,F.landColor="#F0DC82",F.waterColor="#3399FF",F.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},F.sphereSVG={type:"Sphere"},F.fillLayers={ocean:1,land:1,lakes:1},F.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},F.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],F.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],F.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},43520:function(ie,F,e){"use strict";var S=e(33428),k=e(83356),o=k.geoPath,T=k.geoDistance,b=e(87108),p=e(24040),l=e(3400),t=l.strTranslate,i=e(76308),r=e(43616),n=e(93024),a=e(7316),s=e(54460),c=e(19280).getAutoRange,h=e(86476),u=e(22676).prepSelect,y=e(22676).clearOutline,d=e(22676).selectOnClick,m=e(79248),g=e(79552),x=e(27144),v=e(59972),_=e(55712).NO;function f(E){this.id=E.id,this.graphDiv=E.graphDiv,this.container=E.container,this.topojsonURL=E.topojsonURL,this.isStatic=E.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var C=f.prototype;function w(E,P){var L=g.clipPad,O=E[0]+L,z=E[1]-L,V=P[0]+L,R=P[1]-L;O>0&&z<0&&(z+=360);var U=(z-O)/4;return{type:"Polygon",coordinates:[[[O,V],[O,R],[O+U,R],[O+2*U,R],[O+3*U,R],[z,R],[z,V],[z-U,V],[z-2*U,V],[z-3*U,V],[O,V]]]}}ie.exports=function(E){return new f(E)},C.plot=function(E,P,L,O){var z=this;if(O)return z.update(E,P,!0);z._geoCalcData=E,z._fullLayout=P;var V=P[this.id],R=[],U=!1;for(var Z in g.layerNameToAdjective)if("frame"!==Z&&V["show"+Z]){U=!0;break}for(var N=!1,G=0;G<E.length;G++){var W=E[0][0].trace;W._geo=z,W.locationmode&&(U=!0);var ae=W.marker;if(ae){var ne=ae.angleref;(ae.angle||"north"===ne||"previous"===ne)&&(N=!0)}}if(this._hasMarkerAngles=N,U){var Q=v.getTopojsonName(V);null!==z.topojson&&Q===z.topojsonName||(z.topojsonName=Q,void 0===PlotlyGeoAssets.topojson[z.topojsonName]&&R.push(z.fetchTopojson()))}R=R.concat(x.fetchTraceGeoData(E)),L.push(new Promise(function($,X){Promise.all(R).then(function(){z.topojson=PlotlyGeoAssets.topojson[z.topojsonName],z.update(E,P),$()}).catch(X)}))},C.fetchTopojson=function(){var E=this,P=v.getTopojsonPath(E.topojsonURL,E.topojsonName);return new Promise(function(L,O){S.json(P,function(z,V){if(z)return O(404===z.status?new Error(["plotly.js could not find topojson file at",P+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" ")):new Error(["unexpected error while fetching topojson file at",P].join(" ")));PlotlyGeoAssets.topojson[E.topojsonName]=V,L()})})},C.update=function(E,P,L){var O=P[this.id];this.hasChoropleth=!1;for(var z=0;z<E.length;z++){var V=E[z],R=V[0].trace;"choropleth"===R.type&&(this.hasChoropleth=!0),!0===R.visible&&R._length>0&&R._module.calcGeoJSON(V,P)}if(!L){if(this.updateProjection(E,P))return;this.viewInitial&&this.scope===O.scope||this.saveViewInitial(O)}this.scope=O.scope,this.updateBaseLayers(P,O),this.updateDims(P,O),this.updateFx(P,O),a.generalUpdatePerTraceModule(this.graphDiv,this,E,O);var U=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=U.selectAll(".point"),this.dataPoints.text=U.selectAll("text"),this.dataPaths.line=U.selectAll(".js-line");var Z=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=Z.selectAll("path"),this._render()},C.updateProjection=function(E,P){var L=this.graphDiv,O=P[this.id],z=P._size,V=O.domain,R=O.projection,U=O.lonaxis,Z=O.lataxis,N=U._ax,G=Z._ax,W=this.projection=function(ce){var me=ce.projection,Pe=me.type,Ae=g.projNames[Pe];Ae="geo"+l.titleCase(Ae);for(var Ce=(k[Ae]||b[Ae])(),Oe=ce._isSatellite?180*Math.acos(1/me.distance)/Math.PI:ce._isClipped?g.lonaxisSpan[Pe]/2:null,Ne=["center","rotate","parallels","clipExtent"],je=function(Le){return Le?Ce:[]},ve=0;ve<Ne.length;ve++){var Me=Ne[ve];"function"!=typeof Ce[Me]&&(Ce[Me]=je)}return Ce.isLonLatOverEdges=function(Le){if(null===Ce(Le))return!0;if(Oe){var Ue=Ce.rotate();return T(Le,[-Ue[0],-Ue[1]])>Oe*Math.PI/180}return!1},Ce.getPath=function(){return o().projection(Ce)},Ce.getBounds=function(Le){return Ce.getPath().bounds(Le)},Ce.precision(g.precision),ce._isSatellite&&Ce.tilt(me.tilt).distance(me.distance),Oe&&Ce.clipAngle(Oe-g.clipPad),Ce}(O),ae=[[z.l+z.w*V.x[0],z.t+z.h*(1-V.y[1])],[z.l+z.w*V.x[1],z.t+z.h*(1-V.y[0])]],re=O.center||{},ne=R.rotation||{},Q=U.range||[],$=Z.range||[];if(O.fitbounds){N._length=ae[1][0]-ae[0][0],G._length=ae[1][1]-ae[0][1],N.range=c(L,N),G.range=c(L,G);var X=(N.range[0]+N.range[1])/2,oe=(G.range[0]+G.range[1])/2;if(O._isScoped)re={lon:X,lat:oe};else if(O._isClipped){re={lon:X,lat:oe},ne={lon:X,lat:oe,roll:ne.roll};var fe=R.type,ue=g.lonaxisSpan[fe]/2||180,ge=g.lataxisSpan[fe]/2||90;Q=[X-ue,X+ue],$=[oe-ge,oe+ge]}else re={lon:X,lat:oe},ne={lon:X,lat:ne.lat,roll:ne.roll}}W.center([re.lon-ne.lon,re.lat-ne.lat]).rotate([-ne.lon,-ne.lat,ne.roll]).parallels(R.parallels);var we=w(Q,$);W.fitExtent(ae,we);var Te=this.bounds=W.getBounds(we),xe=this.fitScale=W.scale(),ye=W.translate();if(O.fitbounds){var _e=W.getBounds(w(N.range,G.range)),Ie=Math.min((Te[1][0]-Te[0][0])/(_e[1][0]-_e[0][0]),(Te[1][1]-Te[0][1])/(_e[1][1]-_e[0][1]));isFinite(Ie)?W.scale(Ie*xe):l.warn("Something went wrong during"+this.id+"fitbounds computations.")}else W.scale(R.scale*xe);var De=this.midPt=[(Te[0][0]+Te[1][0])/2,(Te[0][1]+Te[1][1])/2];if(W.translate([ye[0]+(De[0]-ye[0]),ye[1]+(De[1]-ye[1])]).clipExtent(Te),O._isAlbersUsa){var be=W([re.lon,re.lat]),he=W.translate();W.translate([he[0]-(be[0]-he[0]),he[1]-(be[1]-he[1])])}},C.updateBaseLayers=function(E,P){var L=this,O=L.topojson,z=L.layers,V=L.basePaths;function R(W){return"lonaxis"===W||"lataxis"===W}function U(W){return!!g.lineLayers[W]}function Z(W){return!!g.fillLayers[W]}var N=(this.hasChoropleth?g.layersForChoropleth:g.layers).filter(function(W){return U(W)||Z(W)?P["show"+W]:!R(W)||P[W].showgrid}),G=L.framework.selectAll(".layer").data(N,String);G.exit().each(function(W){delete z[W],delete V[W],S.select(this).remove()}),G.enter().append("g").attr("class",function(W){return"layer "+W}).each(function(W){var ae=z[W]=S.select(this);"bg"===W?L.bgRect=ae.append("rect").style("pointer-events","all"):R(W)?V[W]=ae.append("path").style("fill","none"):"backplot"===W?ae.append("g").classed("choroplethlayer",!0):"frontplot"===W?ae.append("g").classed("scatterlayer",!0):U(W)?V[W]=ae.append("path").style("fill","none").style("stroke-miterlimit",2):Z(W)&&(V[W]=ae.append("path").style("stroke","none"))}),G.order(),G.each(function(W){var ae=V[W],re=g.layerNameToAdjective[W];"frame"===W?ae.datum(g.sphereSVG):U(W)||Z(W)?ae.datum(_(O,O.objects[W])):R(W)&&ae.datum(function(ne,Q,$){var X,oe,fe,ue=Q[ne],ge=g.scopeDefaults[Q.scope];"lonaxis"===ne?(X=ge.lonaxisRange,oe=ge.lataxisRange,fe=function(he,ce){return[he,ce]}):"lataxis"===ne&&(X=ge.lataxisRange,oe=ge.lonaxisRange,fe=function(he,ce){return[ce,he]});var we={type:"linear",range:[X[0],X[1]-1e-6],tick0:ue.tick0,dtick:ue.dtick};s.setConvert(we,$);var Te=s.calcTicks(we);Q.isScoped||"lonaxis"!==ne||Te.pop();for(var xe=Te.length,ye=new Array(xe),_e=0;_e<xe;_e++)for(var Ie=Te[_e].x,De=ye[_e]=[],be=oe[0];be<oe[1]+2.5;be+=2.5)De.push(fe(Ie,be));return{type:"MultiLineString",coordinates:ye}}(W,P,E)).call(i.stroke,P[W].gridcolor).call(r.dashLine,P[W].griddash,P[W].gridwidth),U(W)?ae.call(i.stroke,P[re+"color"]).call(r.dashLine,"",P[re+"width"]):Z(W)&&ae.call(i.fill,P[re+"color"])})},C.updateDims=function(E,P){var L=this.bounds,O=(P.framewidth||0)/2,z=L[0][0]-O,V=L[0][1]-O,R=L[1][0]-z+O,U=L[1][1]-V+O;r.setRect(this.clipRect,z,V,R,U),this.bgRect.call(r.setRect,z,V,R,U).call(i.fill,P.bgcolor),this.xaxis._offset=z,this.xaxis._length=R,this.yaxis._offset=V,this.yaxis._length=U},C.updateFx=function(E,P){var L=this,O=L.graphDiv,z=L.bgRect,V=E.dragmode,R=E.clickmode;if(!L.isStatic){var U={element:L.bgRect.node(),gd:O,plotinfo:{id:L.id,xaxis:L.xaxis,yaxis:L.yaxis,fillRangeItems:function(N,G){G.isRect?(N.range={})[L.id]=[Z([G.xmin,G.ymin]),Z([G.xmax,G.ymax])]:(N.lassoPoints={})[L.id]=G.map(Z)}},xaxes:[L.xaxis],yaxes:[L.yaxis],subplot:L.id,clickFn:function(N){2===N&&y(O)}};"pan"===V?(z.node().onmousedown=null,z.call(m(L,P)),z.on("dblclick.zoom",function(){var N=L.viewInitial,G={};for(var W in N)G[L.id+"."+W]=N[W];p.call("_guiRelayout",O,G),O.emit("plotly_doubleclick",null)}),O._context._scrollZoom.geo||z.on("wheel.zoom",null)):"select"!==V&&"lasso"!==V||(z.on(".zoom",null),U.prepFn=function(N,G,W){u(N,G,W,U,V)},h.init(U)),z.on("mousemove",function(){var N=L.projection.invert(l.getPositionFromD3Event());if(!N)return h.unhover(O,S.event);L.xaxis.p2c=function(){return N[0]},L.yaxis.p2c=function(){return N[1]},n.hover(O,S.event,L.id)}),z.on("mouseout",function(){O._dragging||h.unhover(O,S.event)}),z.on("click",function(){"select"!==V&&"lasso"!==V&&(R.indexOf("select")>-1&&d(S.event,O,[L.xaxis],[L.yaxis],L.id,U),R.indexOf("event")>-1&&n.click(O,S.event))})}function Z(N){return L.projection.invert([N[0]+L.xaxis._offset,N[1]+L.yaxis._offset])}},C.makeFramework=function(){var E=this,P=E.graphDiv,L=P._fullLayout,O="clip"+L._uid+E.id;E.clipDef=L._clips.append("clipPath").attr("id",O),E.clipRect=E.clipDef.append("rect"),E.framework=S.select(E.container).append("g").attr("class","geo "+E.id).call(r.setClipUrl,O,P),E.project=function(z){var V=E.projection(z);return V?[V[0]-E.xaxis._offset,V[1]-E.yaxis._offset]:[null,null]},E.xaxis={_id:"x",c2p:function(z){return E.project(z)[0]}},E.yaxis={_id:"y",c2p:function(z){return E.project(z)[1]}},E.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},s.setConvert(E.mockAxis,L)},C.saveViewInitial=function(E){var L=E.center||{},O=E.projection,z=O.rotation||{};this.viewInitial={fitbounds:E.fitbounds,"projection.scale":O.scale},l.extendFlat(this.viewInitial,E._isScoped?{"center.lon":L.lon,"center.lat":L.lat}:E._isClipped?{"projection.rotation.lon":z.lon,"projection.rotation.lat":z.lat}:{"center.lon":L.lon,"center.lat":L.lat,"projection.rotation.lon":z.lon})},C.render=function(E){this._hasMarkerAngles&&E?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},C._render=function(){var E,P=this.projection,L=P.getPath();function O(V){var R=P(V.lonlat);return R?t(R[0],R[1]):null}function z(V){return P.isLonLatOverEdges(V.lonlat)?"none":null}for(E in this.basePaths)this.basePaths[E].attr("d",L);for(E in this.dataPaths)this.dataPaths[E].attr("d",function(V){return L(V.geojson)});for(E in this.dataPoints)this.dataPoints[E].attr("display",z).attr("transform",O)}},10816:function(ie,F,e){"use strict";var S=e(84888).KY,k=e(3400).counterRegex,o=e(43520),T="geo",b=k(T),p={};p[T]={valType:"subplotid",dflt:T,editType:"calc"},ie.exports={attr:T,name:T,idRoot:T,idRegex:b,attrRegex:b,attributes:p,layoutAttributes:e(40384),supplyLayoutDefaults:e(86920),plot:function(l){for(var t=l._fullLayout,i=l.calcdata,r=t._subplots[T],n=0;n<r.length;n++){var a=r[n],s=S(i,T,a),c=t[a]._subplot;c||(c=o({id:a,graphDiv:l,container:t._geolayer.node(),topojsonURL:l._context.topojsonURL,staticPlot:l._context.staticPlot}),t[a]._subplot=c),c.plot(s,t,l._promises)}},updateFx:function(l){for(var t=l._fullLayout,i=t._subplots[T],r=0;r<i.length;r++){var n=t[i[r]];n._subplot.updateFx(t,n)}},clean:function(l,t,i,r){for(var n=r._subplots[T]||[],a=0;a<n.length;a++){var s=n[a],c=r[s]._subplot;!t[s]&&c&&(c.framework.remove(),c.clipDef.remove())}}}},40384:function(ie,F,e){"use strict";var S=e(22548),k=e(86968).u,o=e(98192).u,T=e(79552),b=e(67824).overrideAll,p=e(95376),l={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:S.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:o};(ie.exports=b({domain:k({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:p(T.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:p(T.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:S.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:T.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:T.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:T.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:T.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:S.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:S.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:S.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:S.background},lonaxis:l,lataxis:l},"plot","from-root")).uirevision={valType:"any",editType:"none"}},86920:function(ie,F,e){"use strict";var S=e(3400),k=e(168),o=e(84888).op,T=e(79552),b=e(40384),p=T.axesNames;function l(t,i,r,n){var a=o(n.fullData,"geo",n.id).map(function(ne){return ne._expandedIndex}),s=r("resolution"),c=r("scope"),h=T.scopeDefaults[c],u=r("projection.type",h.projType),y=i._isAlbersUsa="albers usa"===u;y&&(c=i.scope="usa");var d=i._isScoped="world"!==c,m=i._isSatellite="satellite"===u,g=i._isConic=-1!==u.indexOf("conic")||"albers"===u,x=i._isClipped=!!T.lonaxisSpan[u];if(!1===t.visible){var v=S.extendDeep({},i._template);v.showcoastlines=!1,v.showcountries=!1,v.showframe=!1,v.showlakes=!1,v.showland=!1,v.showocean=!1,v.showrivers=!1,v.showsubunits=!1,v.lonaxis&&(v.lonaxis.showgrid=!1),v.lataxis&&(v.lataxis.showgrid=!1),i._template=v}for(var _=r("visible"),f=0;f<p.length;f++){var C,w=p[f],E=[30,10][f];if(d)C=h[w+"Range"];else{var P=T[w+"Span"],L=(P[u]||P["*"])/2,O=r("projection.rotation."+w.substr(0,3),h.projRotate[f]);C=[O-L,O+L]}var z=r(w+".range",C);r(w+".tick0"),r(w+".dtick",E),r(w+".showgrid",!!_&&void 0)&&(r(w+".gridcolor"),r(w+".gridwidth"),r(w+".griddash")),i[w]._ax={type:"linear",_id:w.slice(0,3),_traceIndices:a,setScale:S.identity,c2l:S.identity,r2l:S.identity,autorange:!0,range:z.slice(),_m:1,_input:{}}}var V=i.lonaxis.range,R=i.lataxis.range,U=V[0],Z=V[1];U>0&&Z<0&&(Z+=360);var N,G,W,ae=(U+Z)/2;if(!y){var re=d?h.projRotate:[ae,0,0];N=r("projection.rotation.lon",re[0]),r("projection.rotation.lat",re[1]),r("projection.rotation.roll",re[2]),r("showcoastlines",!d&&_)&&(r("coastlinecolor"),r("coastlinewidth")),r("showocean",!!_&&void 0)&&r("oceancolor")}y?(G=-96.6,W=38.7):(G=d?ae:N,W=(R[0]+R[1])/2),r("center.lon",G),r("center.lat",W),m&&(r("projection.tilt"),r("projection.distance")),g&&r("projection.parallels",h.projParallels||[0,60]),r("projection.scale"),r("showland",!!_&&void 0)&&r("landcolor"),r("showlakes",!!_&&void 0)&&r("lakecolor"),r("showrivers",!!_&&void 0)&&(r("rivercolor"),r("riverwidth")),r("showcountries",d&&"usa"!==c&&_)&&(r("countrycolor"),r("countrywidth")),("usa"===c||"north america"===c&&50===s)&&(r("showsubunits",_),r("subunitcolor"),r("subunitwidth")),d||r("showframe",_)&&(r("framecolor"),r("framewidth")),r("bgcolor"),r("fitbounds")&&(delete i.projection.scale,d?(delete i.center.lon,delete i.center.lat):x?(delete i.center.lon,delete i.center.lat,delete i.projection.rotation.lon,delete i.projection.rotation.lat,delete i.lonaxis.range,delete i.lataxis.range):(delete i.center.lon,delete i.center.lat,delete i.projection.rotation.lon))}ie.exports=function(t,i,r){k(t,i,r,{type:"geo",attributes:b,handleDefaults:l,fullData:r,partition:"y"})}},79248:function(ie,F,e){"use strict";var S=e(33428),k=e(3400),o=e(24040),T=Math.PI/180,b=180/Math.PI,p={cursor:"pointer"},l={cursor:"auto"};function t(d,m){return S.behavior.zoom().translate(m.translate()).scale(m.scale())}function i(d,m,g){var x=d.id,v=d.graphDiv,_=v.layout,f=_[x],C=v._fullLayout,w=C[x],E={},P={};function L(O,z){E[x+"."+O]=k.nestedProperty(f,O).get(),o.call("_storeDirectGUIEdit",_,C._preGUI,E);var V=k.nestedProperty(w,O);V.get()!==z&&(V.set(z),k.nestedProperty(f,O).set(z),P[x+"."+O]=z)}g(L),L("projection.scale",m.scale()/d.fitScale),L("fitbounds",!1),v.emit("plotly_relayout",P)}function r(d,m){var g=t(0,m);function x(v){var _=m.invert(d.midPt);v("center.lon",_[0]),v("center.lat",_[1])}return g.on("zoomstart",function(){S.select(this).style(p)}).on("zoom",function(){m.scale(S.event.scale).translate(S.event.translate),d.render(!0);var v=m.invert(d.midPt);d.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":m.scale()/d.fitScale,"geo.center.lon":v[0],"geo.center.lat":v[1]})}).on("zoomend",function(){S.select(this).style(l),i(d,m,x)}),g}function n(d,m){var g,x,v,_,f,C,w,E,P,L=t(0,m);function O(V){return m.invert(V)}function z(V){var R=m.rotate(),U=m.invert(d.midPt);V("projection.rotation.lon",-R[0]),V("center.lon",U[0]),V("center.lat",U[1])}return L.on("zoomstart",function(){S.select(this).style(p),g=S.mouse(this),x=m.rotate(),v=m.translate(),_=x,f=O(g)}).on("zoom",function(){if(C=S.mouse(this),function(U){var Z=O(U);if(!Z)return!0;var N=m(Z);return Math.abs(N[0]-U[0])>2||Math.abs(N[1]-U[1])>2}(g))return L.scale(m.scale()),void L.translate(m.translate());m.scale(S.event.scale),m.translate([v[0],S.event.translate[1]]),f?O(C)&&(E=O(C),m.rotate(w=[_[0]+(E[0]-f[0]),x[1],x[2]]),_=w):f=O(g=C),P=!0,d.render(!0);var V=m.rotate(),R=m.invert(d.midPt);d.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":m.scale()/d.fitScale,"geo.center.lon":R[0],"geo.center.lat":R[1],"geo.projection.rotation.lon":-V[0]})}).on("zoomend",function(){S.select(this).style(l),P&&i(d,m,z)}),L}function a(d,m){var g,x={r:m.rotate(),k:m.scale()},v=t(0,m),_=function(E){for(var P=0,L=arguments.length,O=[];++P<L;)O.push(arguments[P]);var z=S.dispatch.apply(null,O);return z.of=function(V,R){return function(U){var Z;try{Z=U.sourceEvent=S.event,U.target=E,S.event=U,z[U.type].apply(V,R)}finally{S.event=Z}}},z}(v,"zoomstart","zoom","zoomend"),f=0,C=v.on;function w(E){var P=m.rotate();E("projection.rotation.lon",-P[0]),E("projection.rotation.lat",-P[1])}return v.on("zoomstart",function(){S.select(this).style(p);var E,P,L,O,z,V,R,U,Z,N,G,W=S.mouse(this),ae=m.rotate(),re=ae,ne=m.translate(),Q=(P=.5*(E=ae)[0]*T,L=.5*E[1]*T,O=.5*E[2]*T,z=Math.sin(P),V=Math.cos(P),R=Math.sin(L),U=Math.cos(L),Z=Math.sin(O),[V*U*(N=Math.cos(O))+z*R*Z,z*U*N-V*R*Z,V*R*N+z*U*Z,V*U*Z-z*R*N]);g=s(m,W),C.call(v,"zoom",function(){var $,X,oe,fe,ue,ge,we,Te,xe,ye,ce,_e=S.mouse(this);if(m.scale(x.k=S.event.scale),g){if(s(m,_e)){m.rotate(ae).translate(ne);var Ie=s(m,_e),De=function(ce,me){if(ce&&me){var Pe=[(Ne=ce)[1]*(je=me)[2]-Ne[2]*je[1],Ne[2]*je[0]-Ne[0]*je[2],Ne[0]*je[1]-Ne[1]*je[0]],Ae=Math.sqrt(y(Pe,Pe)),Ce=.5*Math.acos(Math.max(-1,Math.min(1,y(ce,me)))),Oe=Math.sin(Ce)/Ae;return Ae&&[Math.cos(Ce),Pe[2]*Oe,-Pe[1]*Oe,Pe[0]*Oe]}var Ne,je}(g,Ie),be=(ce=[(oe=($=Q)[0])*(we=(X=De)[0])-(fe=$[1])*(Te=X[1])-(ue=$[2])*(xe=X[2])-(ge=$[3])*(ye=X[3]),oe*Te+fe*we+ue*ye-ge*xe,oe*xe-fe*ye+ue*we+ge*Te,oe*ye+fe*xe-ue*Te+ge*we],[Math.atan2(2*(ce[0]*ce[1]+ce[2]*ce[3]),1-2*(ce[1]*ce[1]+ce[2]*ce[2]))*b,Math.asin(Math.max(-1,Math.min(1,2*(ce[0]*ce[2]-ce[3]*ce[1]))))*b,Math.atan2(2*(ce[0]*ce[3]+ce[1]*ce[2]),1-2*(ce[2]*ce[2]+ce[3]*ce[3]))*b]),he=x.r=function(ce,me,Pe){var Ae=u(me,2,ce[0]);Ae=u(Ae,1,ce[1]),Ae=u(Ae,0,ce[2]-Pe[2]);var Ce,Oe,Ne=me[0],je=me[1],ve=me[2],Me=Ae[0],Le=Ae[1],Ue=Ae[2],ze=Math.atan2(je,Ne)*b,qe=Math.sqrt(Ne*Ne+je*je);Math.abs(Le)>qe?(Oe=(Le>0?90:-90)-ze,Ce=0):(Oe=Math.asin(Le/qe)*b-ze,Ce=Math.sqrt(qe*qe-Le*Le));var Ke=180-Oe-2*ze,it=(Math.atan2(Ue,Me)-Math.atan2(ve,Ce))*b,ft=(Math.atan2(Ue,Me)-Math.atan2(ve,-Ce))*b;return c(Pe[0],Pe[1],Oe,it)<=c(Pe[0],Pe[1],Ke,ft)?[Oe,it,Pe[2]]:[Ke,ft,Pe[2]]}(be,g,re);isFinite(he[0])&&isFinite(he[1])&&isFinite(he[2])||(he=re),m.rotate(he),re=he}}else g=s(m,W=_e);_.of(this,arguments)({type:"zoom"})}),G=_.of(this,arguments),f++||G({type:"zoomstart"})}).on("zoomend",function(){var E;S.select(this).style(l),C.call(v,"zoom",null),E=_.of(this,arguments),--f||E({type:"zoomend"}),i(d,m,w)}).on("zoom.redraw",function(){d.render(!0);var E=m.rotate();d.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":m.scale()/d.fitScale,"geo.projection.rotation.lon":-E[0],"geo.projection.rotation.lat":-E[1]})}),S.rebind(v,_,"on")}function s(d,m){var x,v,_,f,g=d.invert(m);return g&&isFinite(g[0])&&isFinite(g[1])&&(v=(x=g)[0]*T,_=x[1]*T,[(f=Math.cos(_))*Math.cos(v),f*Math.sin(v),Math.sin(_)])}function c(d,m,g,x){var v=h(g-d),_=h(x-m);return Math.sqrt(v*v+_*_)}function h(d){return(d%360+540)%360-180}function u(d,m,g){var x=g*T,v=d.slice(),_=0===m?1:0,f=2===m?1:2,C=Math.cos(x),w=Math.sin(x);return v[_]=d[_]*C-d[f]*w,v[f]=d[f]*C+d[_]*w,v}function y(d,m){for(var g=0,x=0,v=d.length;x<v;++x)g+=d[x]*m[x];return g}ie.exports=function(d,m){return(m._isScoped?r:m._isClipped?a:n)(d,d.projection)}},84888:function(ie,F,e){"use strict";var S=e(24040),k=e(33816).SUBPLOT_PATTERN;F.KY=function(o,T,b){var p=S.subplotsRegistry[T];if(!p)return[];for(var l=p.attr,t=[],i=0;i<o.length;i++){var r=o[i];r[0].trace[l]===b&&t.push(r)}return t},F._M=function(o,T,b){var p,l=[],t=[];if(!(p="string"==typeof T?S.getModule(T).plot:"function"==typeof T?T:T.plot))return[l,o];for(var i=b,r=0;r<o.length;r++){var n=o[r],a=n[0].trace;!0===a.visible&&0!==a._length&&(!a._module||a._module.plot!==p||void 0!==a.zorder&&a.zorder!==i?t.push(n):l.push(n))}return[l,t]},F.op=function(o,T,b){if(!S.subplotsRegistry[T])return[];var p,l,t,i=S.subplotsRegistry[T].attr,r=[];if("gl2d"===T){var n=b.match(k);l="x"+n[1],t="y"+n[2]}for(var a=0;a<o.length;a++)p=o[a],"gl2d"===T&&S.traceIs(p,"gl2d")?p[i[0]]===l&&p[i[1]]===t&&r.push(p):p[i]===b&&r.push(p);return r}},2428:function(ie,F,e){"use strict";var S=e(62644),k=e(97264),o=e(29128),T=e(33816),b=e(89184);function p(l,t){this.element=l,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}ie.exports=function(l){var t=l.mouseContainer,i=l.glplot,r=new p(t,i);function n(){l.xaxis.autorange=!1,l.yaxis.autorange=!1}function a(s,c,h){var u,y,d=l.calcDataBox(),m=i.viewBox,g=r.lastPos[0],x=r.lastPos[1],v=T.MINDRAG*i.pixelRatio,_=T.MINZOOM*i.pixelRatio;function f(O,z,V){var R=Math.min(z,V),U=Math.max(z,V);R!==U?(d[O]=R,d[O+2]=U,r.dataBox=d,l.setRanges(d)):(l.selectBox.selectBox=[0,0,1,1],l.glplot.setDirty())}switch(c*=i.pixelRatio,h=m[3]-m[1]-(h*=i.pixelRatio),l.fullLayout.dragmode){case"zoom":if(s){var C=c/(m[2]-m[0])*(d[2]-d[0])+d[0],w=h/(m[3]-m[1])*(d[3]-d[1])+d[1];r.boxInited||(r.boxStart[0]=C,r.boxStart[1]=w,r.dragStart[0]=c,r.dragStart[1]=h),r.boxEnd[0]=C,r.boxEnd[1]=w,r.boxInited=!0,r.boxEnabled||r.boxStart[0]===r.boxEnd[0]&&r.boxStart[1]===r.boxEnd[1]||(r.boxEnabled=!0);var E=Math.abs(r.dragStart[0]-c)<_,P=Math.abs(r.dragStart[1]-h)<_;if(!function(){for(var O=l.graphDiv._fullLayout._axisConstraintGroups,z=l.xaxis._id,V=l.yaxis._id,R=0;R<O.length;R++)if(-1!==O[R][z]){if(-1!==O[R][V])return!0;break}return!1}()||E&&P)E&&(r.boxEnd[0]=r.boxStart[0]),P&&(r.boxEnd[1]=r.boxStart[1]);else{u=r.boxEnd[0]-r.boxStart[0],y=r.boxEnd[1]-r.boxStart[1];var L=(d[3]-d[1])/(d[2]-d[0]);Math.abs(u*L)>Math.abs(y)?(r.boxEnd[1]=r.boxStart[1]+Math.abs(u)*L*(y>=0?1:-1),r.boxEnd[1]<d[1]?(r.boxEnd[1]=d[1],r.boxEnd[0]=r.boxStart[0]+(d[1]-r.boxStart[1])/Math.abs(L)):r.boxEnd[1]>d[3]&&(r.boxEnd[1]=d[3],r.boxEnd[0]=r.boxStart[0]+(d[3]-r.boxStart[1])/Math.abs(L))):(r.boxEnd[0]=r.boxStart[0]+Math.abs(y)/L*(u>=0?1:-1),r.boxEnd[0]<d[0]?(r.boxEnd[0]=d[0],r.boxEnd[1]=r.boxStart[1]+(d[0]-r.boxStart[0])*Math.abs(L)):r.boxEnd[0]>d[2]&&(r.boxEnd[0]=d[2],r.boxEnd[1]=r.boxStart[1]+(d[2]-r.boxStart[0])*Math.abs(L)))}}else r.boxEnabled?(y=r.boxStart[1]!==r.boxEnd[1],(u=r.boxStart[0]!==r.boxEnd[0])||y?(u&&(f(0,r.boxStart[0],r.boxEnd[0]),l.xaxis.autorange=!1),y&&(f(1,r.boxStart[1],r.boxEnd[1]),l.yaxis.autorange=!1),l.relayoutCallback()):l.glplot.setDirty(),r.boxEnabled=!1,r.boxInited=!1):r.boxInited&&(r.boxInited=!1);break;case"pan":r.boxEnabled=!1,r.boxInited=!1,s?(r.panning||(r.dragStart[0]=c,r.dragStart[1]=h),Math.abs(r.dragStart[0]-c)<v&&(c=r.dragStart[0]),Math.abs(r.dragStart[1]-h)<v&&(h=r.dragStart[1]),y=(x-h)*(d[3]-d[1])/(i.viewBox[3]-i.viewBox[1]),d[0]+=u=(g-c)*(d[2]-d[0])/(i.viewBox[2]-i.viewBox[0]),d[2]+=u,d[1]+=y,d[3]+=y,l.setRanges(d),r.panning=!0,r.lastInputTime=Date.now(),n(),l.cameraChanged(),l.handleAnnotations()):r.panning&&(r.panning=!1,l.relayoutCallback())}r.lastPos[0]=c,r.lastPos[1]=h}return r.mouseListener=S(t,a),t.addEventListener("touchstart",function(s){var c=o(s.changedTouches[0],t);a(0,c[0],c[1]),a(1,c[0],c[1]),s.preventDefault()},!!b&&{passive:!1}),t.addEventListener("touchmove",function(s){s.preventDefault();var c=o(s.changedTouches[0],t);a(1,c[0],c[1]),s.preventDefault()},!!b&&{passive:!1}),t.addEventListener("touchend",function(s){a(0,r.lastPos[0],r.lastPos[1]),s.preventDefault()},!!b&&{passive:!1}),r.wheelListener=k(t,function(s,c){if(!l.scrollZoom)return!1;var h=l.calcDataBox(),u=i.viewBox,y=r.lastPos[0],d=r.lastPos[1],m=Math.exp(5*c/(u[3]-u[1])),g=y/(u[2]-u[0])*(h[2]-h[0])+h[0],x=d/(u[3]-u[1])*(h[3]-h[1])+h[1];return h[0]=(h[0]-g)*m+g,h[2]=(h[2]-g)*m+g,h[1]=(h[1]-x)*m+x,h[3]=(h[3]-x)*m+x,l.setRanges(h),r.lastInputTime=Date.now(),n(),l.cameraChanged(),l.handleAnnotations(),l.relayoutCallback(),!0},!0),r}},92568:function(ie,F,e){"use strict";var S=e(54460),k=e(43080);function o(p){this.scene=p,this.gl=p.gl,this.pixelRatio=p.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var T=o.prototype,b=["xaxis","yaxis"];T.merge=function(p){var l,t,i,r,n,a,s,c,h,u,y;for(this.titleEnable=!1,this.backgroundColor=k(p.plot_bgcolor),u=0;u<2;++u){var d=(l=b[u]).charAt(0);for(i=(t=p[this.scene[l]._name]).title.text===this.scene.fullLayout._dfltTitle[d]?"":t.title.text,y=0;y<=2;y+=2)this.labelEnable[u+y]=!1,this.labels[u+y]=i,this.labelColor[u+y]=k(t.title.font.color),this.labelFont[u+y]=t.title.font.family,this.labelSize[u+y]=t.title.font.size,this.labelPad[u+y]=this.getLabelPad(l,t),this.tickEnable[u+y]=!1,this.tickColor[u+y]=k((t.tickfont||{}).color),this.tickAngle[u+y]="auto"===t.tickangle?0:Math.PI*-t.tickangle/180,this.tickPad[u+y]=this.getTickPad(t),this.tickMarkLength[u+y]=0,this.tickMarkWidth[u+y]=t.tickwidth||0,this.tickMarkColor[u+y]=k(t.tickcolor),this.borderLineEnable[u+y]=!1,this.borderLineColor[u+y]=k(t.linecolor),this.borderLineWidth[u+y]=t.linewidth||0;s=this.hasSharedAxis(t),n=this.hasAxisInDfltPos(l,t)&&!s,a=this.hasAxisInAltrPos(l,t)&&!s,r=t.mirror||!1,c=s?-1!==String(r).indexOf("all"):!!r,h=s?"allticks"===r:-1!==String(r).indexOf("ticks"),n?this.labelEnable[u]=!0:a&&(this.labelEnable[u+2]=!0),n?this.tickEnable[u]=t.showticklabels:a&&(this.tickEnable[u+2]=t.showticklabels),(n||c)&&(this.borderLineEnable[u]=t.showline),(a||c)&&(this.borderLineEnable[u+2]=t.showline),(n||h)&&(this.tickMarkLength[u]=this.getTickMarkLength(t)),(a||h)&&(this.tickMarkLength[u+2]=this.getTickMarkLength(t)),this.gridLineEnable[u]=t.showgrid,this.gridLineColor[u]=k(t.gridcolor),this.gridLineWidth[u]=t.gridwidth,this.zeroLineEnable[u]=t.zeroline,this.zeroLineColor[u]=k(t.zerolinecolor),this.zeroLineWidth[u]=t.zerolinewidth}},T.hasSharedAxis=function(p){var l=this.scene;return 0!==S.findSubplotsWithAxis(l.fullLayout._subplots.gl2d,p).indexOf(l.id)},T.hasAxisInDfltPos=function(p,l){var t=l.side;return"xaxis"===p?"bottom"===t:"yaxis"===p?"left"===t:void 0},T.hasAxisInAltrPos=function(p,l){var t=l.side;return"xaxis"===p?"top"===t:"yaxis"===p?"right"===t:void 0},T.getLabelPad=function(p,l){var t=1.5,i=l.title.font.size,r=l.showticklabels;return"xaxis"===p?"top"===l.side?i*(t+(r?1:0))-10:i*(t+(r?.5:0))-10:"yaxis"===p?"right"===l.side?10+i*(t+(r?1:.5)):10+i*(t+(r?.5:0)):void 0},T.getTickPad=function(p){return"outside"===p.ticks?10+p.ticklen:15},T.getTickMarkLength=function(p){if(!p.ticks)return 0;var l=p.ticklen;return"inside"===p.ticks?-l:l},ie.exports=function(p){return new o(p)}},39952:function(ie,F,e){"use strict";var S=e(67824).overrideAll,k=e(17188),o=e(64859),T=e(9616),b=e(33816),p=e(57952),l=e(65460),t=e(84888).op;F.name="gl2d",F.attr=["xaxis","yaxis"],F.idRoot=["x","y"],F.idRegex=b.idRegex,F.attrRegex=b.attrRegex,F.attributes=e(26720),F.supplyLayoutDefaults=function(i,r,n){r._has("cartesian")||p.supplyLayoutDefaults(i,r,n)},F.layoutAttrOverrides=S(p.layoutAttributes,"plot","from-root"),F.baseLayoutAttrOverrides=S({plot_bgcolor:o.plot_bgcolor,hoverlabel:l.hoverlabel},"plot","nested"),F.plot=function(i){for(var r=i._fullLayout,n=i._fullData,a=r._subplots.gl2d,s=0;s<a.length;s++){var c=a[s],h=r._plots[c],u=t(n,"gl2d",c),y=h._scene2d;void 0===y&&(y=new k({id:c,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio},r),h._scene2d=y),y.plot(u,i.calcdata,r,i.layout)}},F.clean=function(i,r,n,a){for(var s=a._subplots.gl2d||[],c=0;c<s.length;c++){var h=s[c],u=a._plots[h];u._scene2d&&0===t(i,"gl2d",h).length&&(u._scene2d.destroy(),delete a._plots[h])}p.clean.apply(this,arguments)},F.drawFramework=function(i){i._context.staticPlot||p.drawFramework(i)},F.toSVG=function(i){for(var r=i._fullLayout,n=r._subplots.gl2d,a=0;a<n.length;a++){var s=r._plots[n[a]]._scene2d,c=s.toImage("png");r._glimages.append("svg:image").attr({xmlns:T.svg,"xlink:href":c,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),s.destroy()}},F.updateFx=function(i){for(var r=i._fullLayout,n=r._subplots.gl2d,a=0;a<n.length;a++)r._plots[n[a]]._scene2d.updateFx(r.dragmode)}},17188:function(ie,F,e){"use strict";var S,k,o=e(24040),T=e(54460),b=e(93024),p=e(67792).gl_plot2d,l=e(67792).gl_spikes2d,t=e(67792).gl_select_box,i=e(5408),r=e(92568),n=e(2428),a=e(16576),s=e(71888),c=s.enforce,h=s.clean,u=e(19280).doAutoRange,y=e(72760),d=y.drawMode,m=y.selectMode,g=["xaxis","yaxis"],x=e(33816).SUBPLOT_PATTERN;function v(f,C){this.container=f.container,this.graphDiv=f.graphDiv,this.pixelRatio=f.plotGlPixelRatio||window.devicePixelRatio,this.id=f.id,this.staticPlot=!!f.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(C),this.makeFramework(),this.stopped||(this.glplotOptions=r(this),this.glplotOptions.merge(C),this.glplot=p(this.glplotOptions),this.camera=n(this),this.traces={},this.spikes=l(this.glplot),this.selectBox=t(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}ie.exports=v;var _=v.prototype;_.makeFramework=function(){if(this.staticPlot){if(!(k||(S=document.createElement("canvas"),k=i({canvas:S,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=S,this.gl=k}else{var f=this.container.querySelector(".gl-canvas-focus"),C=i({canvas:f,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!C)return a(this),void(this.stopped=!0);this.canvas=f,this.gl=C}var w=this.canvas;w.style.width="100%",w.style.height="100%",w.style.position="absolute",w.style.top="0px",w.style.left="0px",w.style["pointer-events"]="none",this.updateSize(w);var E=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");E.style.position="absolute",E.style.top=E.style.left="0px",E.style.width=E.style.height="100%",E.style["z-index"]=20,E.style["pointer-events"]="none";var P=this.mouseContainer=document.createElement("div");P.style.position="absolute",P.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var L=this.container;L.appendChild(E),L.appendChild(P);var O=this;P.addEventListener("mouseout",function(){O.isMouseOver=!1,O.unhover()}),P.addEventListener("mouseover",function(){O.isMouseOver=!0})},_.toImage=function(f){f||(f="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(S),this.updateSize(this.canvas);var C=this.glplot.gl,w=C.drawingBufferWidth,E=C.drawingBufferHeight;C.clearColor(1,1,1,0),C.clear(C.COLOR_BUFFER_BIT|C.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),C.bindFramebuffer(C.FRAMEBUFFER,null);var P=new Uint8Array(w*E*4);C.readPixels(0,0,w,E,C.RGBA,C.UNSIGNED_BYTE,P);for(var L=0,O=E-1;L<O;++L,--O)for(var z=0;z<w;++z)for(var V=0;V<4;++V){var R=P[4*(w*L+z)+V];P[4*(w*L+z)+V]=P[4*(w*O+z)+V],P[4*(w*O+z)+V]=R}var U=document.createElement("canvas");U.width=w,U.height=E;var Z,N=U.getContext("2d",{willReadFrequently:!0}),G=N.createImageData(w,E);switch(G.data.set(P),N.putImageData(G,0,0),f){case"jpeg":Z=U.toDataURL("image/jpeg");break;case"webp":Z=U.toDataURL("image/webp");break;default:Z=U.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(S),Z},_.updateSize=function(f){f||(f=this.canvas);var C=this.pixelRatio,w=this.fullLayout,P=w.height,L=0|Math.ceil(C*w.width),O=0|Math.ceil(C*P);return f.width===L&&f.height===O||(f.width=L,f.height=O),f},_.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var f=[T.calcTicks(this.xaxis),T.calcTicks(this.yaxis)],C=0;C<2;++C)for(var w=0;w<f[C].length;++w)f[C][w].text=f[C][w].text+"";return f},_.updateRefs=function(f){this.fullLayout=f;var C=this.id.match(x),E="yaxis"+C[2];this.xaxis=this.fullLayout["xaxis"+C[1]],this.yaxis=this.fullLayout[E]},_.relayoutCallback=function(){var f=this.graphDiv,C=this.xaxis,w=this.yaxis,E=f.layout,P={},L=P[C._name+".range"]=C.range.slice(),O=P[w._name+".range"]=w.range.slice();P[C._name+".autorange"]=C.autorange,P[w._name+".autorange"]=w.autorange,o.call("_storeDirectGUIEdit",f.layout,f._fullLayout._preGUI,P);var z=E[C._name];z.range=L,z.autorange=C.autorange;var V=E[w._name];V.range=O,V.autorange=w.autorange,P.lastInputTime=this.camera.lastInputTime,f.emit("plotly_relayout",P)},_.cameraChanged=function(){var f=this.camera;this.glplot.setDataBox(this.calcDataBox());var C=this.computeTickMarks();(function(w,E){for(var P=0;P<2;++P){var L=w[P],O=E[P];if(L.length!==O.length)return!0;for(var z=0;z<L.length;++z)if(L[z].x!==O[z].x)return!0}return!1})(C,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=C,this.glplotOptions.dataBox=f.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},_.handleAnnotations=function(){for(var f=this.graphDiv,C=this.fullLayout.annotations,w=0;w<C.length;w++){var E=C[w];E.xref===this.xaxis._id&&E.yref===this.yaxis._id&&o.getComponentMethod("annotations","drawOne")(f,w)}},_.destroy=function(){if(this.glplot){var f=this.traces;f&&Object.keys(f).map(function(C){f[C].dispose(),delete f[C]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},_.plot=function(f,C,w){var E=this.glplot;this.updateRefs(w),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(f,C),this.updateFx(w.dragmode);var P=w.width,L=w.height;this.updateSize(this.canvas);var O=this.glplotOptions;O.merge(w),O.screenBox=[0,0,P,L];var z={_fullLayout:{_axisConstraintGroups:w._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:w._size}};h(z,this.xaxis),h(z,this.yaxis);var V,R,U=w._size,Z=this.xaxis.domain,N=this.yaxis.domain;for(O.viewBox=[U.l+Z[0]*U.w,U.b+N[0]*U.h,P-U.r-(1-Z[1])*U.w,L-U.t-(1-N[1])*U.h],this.mouseContainer.style.width=U.w*(Z[1]-Z[0])+"px",this.mouseContainer.style.height=U.h*(N[1]-N[0])+"px",this.mouseContainer.height=U.h*(N[1]-N[0]),this.mouseContainer.style.left=U.l+Z[0]*U.w+"px",this.mouseContainer.style.top=U.t+(1-N[1])*U.h+"px",R=0;R<2;++R)(V=this[g[R]])._length=O.viewBox[R+2]-O.viewBox[R],u(this.graphDiv,V),V.setScale();c(z),O.ticks=this.computeTickMarks(),O.dataBox=this.calcDataBox(),O.merge(w),E.update(O),this.glplot.draw()},_.calcDataBox=function(){var f=this.xaxis,C=this.yaxis,w=f.range,E=C.range,P=f.r2l,L=C.r2l;return[P(w[0]),L(E[0]),P(w[1]),L(E[1])]},_.setRanges=function(f){var C=this.xaxis,w=this.yaxis,E=C.l2r,P=w.l2r;C.range=[E(f[0]),E(f[2])],w.range=[P(f[1]),P(f[3])]},_.updateTraces=function(f,C){var w,E,P,L=Object.keys(this.traces);this.fullData=f;e:for(w=0;w<L.length;w++){var O=L[w],z=this.traces[O];for(E=0;E<f.length;E++)if((P=f[E]).uid===O&&P.type===z.type)continue e;z.dispose(),delete this.traces[O]}for(w=0;w<f.length;w++){var V=C[w],R=this.traces[(P=f[w]).uid];R?R.update(P,V):(R=P._module.plot(this,P,V),this.traces[P.uid]=R)}this.glplot.objects.sort(function(U,Z){return U._trace.index-Z._trace.index})},_.updateFx=function(f){m(f)||d(f)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor="pan"===f?"move":"zoom"===f?"crosshair":null},_.emitPointAction=function(f,C){for(var w,E=f.trace.uid,P=f.pointIndex,L=0;L<this.fullData.length;L++)this.fullData[L].uid===E&&(w=this.fullData[L]);var O={x:f.traceCoord[0],y:f.traceCoord[1],curveNumber:w.index,pointNumber:P,data:w._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};b.appendArrayPointValue(O,w,P),this.graphDiv.emit(C,{points:[O]})},_.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var f=this.glplot,C=this.camera,w=C.mouseListener,E=1===this.lastButtonState&&0===w.buttons,P=this.fullLayout;this.lastButtonState=w.buttons,this.cameraChanged();var L,O=w.x*f.pixelRatio,z=this.canvas.height-f.pixelRatio*w.y;if(C.boxEnabled&&"zoom"===P.dragmode){this.selectBox.enabled=!0;for(var V=this.selectBox.selectBox=[Math.min(C.boxStart[0],C.boxEnd[0]),Math.min(C.boxStart[1],C.boxEnd[1]),Math.max(C.boxStart[0],C.boxEnd[0]),Math.max(C.boxStart[1],C.boxEnd[1])],R=0;R<2;R++)C.boxStart[R]===C.boxEnd[R]&&(V[R]=f.dataBox[R],V[R+2]=f.dataBox[R+2]);f.setDirty()}else if(!C.panning&&this.isMouseOver){this.selectBox.enabled=!1;var U=P._size,G=(L=f.pick(O/f.pixelRatio+U.l+this.xaxis.domain[0]*U.w,z/f.pixelRatio-(U.t+(1-this.yaxis.domain[1])*U.h)))&&L.object._trace.handlePick(L);if(G&&E&&this.emitPointAction(G,"plotly_click"),L&&"skip"!==L.object._trace.hoverinfo&&P.hovermode&&G&&(!this.lastPickResult||this.lastPickResult.traceUid!==G.trace.uid||this.lastPickResult.dataCoord[0]!==G.dataCoord[0]||this.lastPickResult.dataCoord[1]!==G.dataCoord[1])){var W=G;this.lastPickResult={traceUid:G.trace?G.trace.uid:null,dataCoord:G.dataCoord.slice()},this.spikes.update({center:L.dataCoord}),W.screenCoord=[((f.viewBox[2]-f.viewBox[0])*(L.dataCoord[0]-f.dataBox[0])/(f.dataBox[2]-f.dataBox[0])+f.viewBox[0])/f.pixelRatio,(this.canvas.height-(f.viewBox[3]-f.viewBox[1])*(L.dataCoord[1]-f.dataBox[1])/(f.dataBox[3]-f.dataBox[1])-f.viewBox[1])/f.pixelRatio],this.emitPointAction(G,"plotly_hover");var ae=this.fullData[W.trace.index]||{},re=W.pointIndex,ne=b.castHoverinfo(ae,P,re);if(ne&&"all"!==ne){var Q=ne.split("+");-1===Q.indexOf("x")&&(W.traceCoord[0]=void 0),-1===Q.indexOf("y")&&(W.traceCoord[1]=void 0),-1===Q.indexOf("z")&&(W.traceCoord[2]=void 0),-1===Q.indexOf("text")&&(W.textLabel=void 0),-1===Q.indexOf("name")&&(W.name=void 0)}b.loneHover({x:W.screenCoord[0],y:W.screenCoord[1],xLabel:this.hoverFormatter("xaxis",W.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",W.traceCoord[1]),zLabel:W.traceCoord[2],text:W.textLabel,name:W.name,color:b.castHoverOption(ae,re,"bgcolor")||W.color,borderColor:b.castHoverOption(ae,re,"bordercolor"),fontFamily:b.castHoverOption(ae,re,"font.family"),fontSize:b.castHoverOption(ae,re,"font.size"),fontColor:b.castHoverOption(ae,re,"font.color"),nameLength:b.castHoverOption(ae,re,"namelength"),textAlign:b.castHoverOption(ae,re,"align")},{container:this.svgContainer,gd:this.graphDiv})}}L||this.unhover(),f.draw()}},_.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),b.loneUnhover(this.svgContainer))},_.hoverFormatter=function(f,C){if(void 0!==C){var w=this[f];return T.tickText(w,w.c2l(C),"hover").text}}},12536:function(ie,F,e){"use strict";var S=e(67824).overrideAll,k=e(65460),o=e(98432),T=e(84888).op,b=e(3400),p=e(9616),l="gl3d",t="scene";F.name=l,F.attr=t,F.idRoot=t,F.idRegex=F.attrRegex=b.counterRegex("scene"),F.attributes=e(6636),F.layoutAttributes=e(346),F.baseLayoutAttrOverrides=S({hoverlabel:k.hoverlabel},"plot","nested"),F.supplyLayoutDefaults=e(5208),F.plot=function(i){for(var r=i._fullLayout,n=i._fullData,a=r._subplots[l],s=0;s<a.length;s++){var c=a[s],h=T(n,l,c),u=r[c],y=u.camera,d=u._scene;d||(d=new o({id:c,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio,camera:y},r),u._scene=d),d.viewInitial||(d.viewInitial={up:{x:y.up.x,y:y.up.y,z:y.up.z},eye:{x:y.eye.x,y:y.eye.y,z:y.eye.z},center:{x:y.center.x,y:y.center.y,z:y.center.z}}),d.plot(h,r,i.layout)}},F.clean=function(i,r,n,a){for(var s=a._subplots[l]||[],c=0;c<s.length;c++){var h=s[c];!r[h]&&a[h]._scene&&(a[h]._scene.destroy(),a._infolayer&&a._infolayer.selectAll(".annotation-"+h).remove())}},F.toSVG=function(i){for(var r=i._fullLayout,n=r._subplots[l],a=r._size,s=0;s<n.length;s++){var c=r[n[s]],h=c.domain,u=c._scene,y=u.toImage("png");r._glimages.append("svg:image").attr({xmlns:p.svg,"xlink:href":y,x:a.l+a.w*h.x[0],y:a.t+a.h*(1-h.y[1]),width:a.w*(h.x[1]-h.x[0]),height:a.h*(h.y[1]-h.y[0]),preserveAspectRatio:"none"}),u.destroy()}},F.cleanId=function(i){if(i.match(/^scene[0-9]*$/)){var r=i.substr(5);return"1"===r&&(r=""),t+r}},F.updateFx=function(i){for(var r=i._fullLayout,n=r._subplots[l],a=0;a<n.length;a++)r[n[a]]._scene.updateFx(r.dragmode,r.hovermode)}},6636:function(ie){"use strict";ie.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},86140:function(ie,F,e){"use strict";var S=e(76308),k=e(94724),o=e(92880).extendFlat,T=e(67824).overrideAll;ie.exports=T({visible:k.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:S.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:k.color,categoryorder:k.categoryorder,categoryarray:k.categoryarray,title:{text:k.title.text,font:k.title.font},type:o({},k.type,{values:["-","linear","log","date","category"]}),autotypenumbers:k.autotypenumbers,autorange:k.autorange,autorangeoptions:{minallowed:k.autorangeoptions.minallowed,maxallowed:k.autorangeoptions.maxallowed,clipmin:k.autorangeoptions.clipmin,clipmax:k.autorangeoptions.clipmax,include:k.autorangeoptions.include,editType:"plot"},rangemode:k.rangemode,minallowed:k.minallowed,maxallowed:k.maxallowed,range:o({},k.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:k.minor.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,mirror:k.mirror,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,showticklabels:k.showticklabels,labelalias:k.labelalias,tickfont:k.tickfont,tickangle:k.tickangle,tickprefix:k.tickprefix,showtickprefix:k.showtickprefix,ticksuffix:k.ticksuffix,showticksuffix:k.showticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,minexponent:k.minexponent,separatethousands:k.separatethousands,tickformat:k.tickformat,tickformatstops:k.tickformatstops,hoverformat:k.hoverformat,showline:k.showline,linecolor:k.linecolor,linewidth:k.linewidth,showgrid:k.showgrid,gridcolor:o({},k.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:k.gridwidth,zeroline:k.zeroline,zerolinecolor:k.zerolinecolor,zerolinewidth:k.zerolinewidth,_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}},"plot","from-root")},64380:function(ie,F,e){"use strict";var S=e(49760).mix,k=e(3400),o=e(31780),T=e(86140),b=e(14944),p=e(28336),l=["xaxis","yaxis","zaxis"];ie.exports=function(t,i,r){var n,a;function s(u,y){return k.coerce(n,a,T,u,y)}for(var c=0;c<l.length;c++){var h=l[c];n=t[h]||{},(a=o.newContainer(i,h))._id=h[0]+r.scene,a._name=h,b(n,a,s,r),p(n,a,s,{font:r.font,letter:h[0],data:r.data,showGrid:!0,noAutotickangles:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,noInsiderange:!0,bgColor:r.bgColor,calendar:r.calendar},r.fullLayout),s("gridcolor",S(a.color,r.bgColor,72.72727272727273).toRgbString()),s("title.text",h[0]),a.setScale=k.noop,s("showspikes")&&(s("spikesides"),s("spikethickness"),s("spikecolor",a.color)),s("showaxeslabels"),s("showbackground")&&s("backgroundcolor")}}},44728:function(ie,F,e){"use strict";var S=e(43080),k=e(3400),o=["xaxis","yaxis","zaxis"];function T(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickFontWeight=["normal","normal","normal","normal"],this.tickFontStyle=["normal","normal","normal","normal"],this.tickFontVariant=["normal","normal","normal","normal"],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelFontWeight=["normal","normal","normal","normal"],this.labelFontStyle=["normal","normal","normal","normal"],this.labelFontVariant=["normal","normal","normal","normal"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}T.prototype.merge=function(b,p){for(var l=this,t=0;t<3;++t){var i=p[o[t]];i.visible?(l.labels[t]=b._meta?k.templateString(i.title.text,b._meta):i.title.text,"font"in i.title&&(i.title.font.color&&(l.labelColor[t]=S(i.title.font.color)),i.title.font.family&&(l.labelFont[t]=i.title.font.family),i.title.font.size&&(l.labelSize[t]=i.title.font.size),i.title.font.weight&&(l.labelFontWeight[t]=i.title.font.weight),i.title.font.style&&(l.labelFontStyle[t]=i.title.font.style),i.title.font.variant&&(l.labelFontVariant[t]=i.title.font.variant)),"showline"in i&&(l.lineEnable[t]=i.showline),"linecolor"in i&&(l.lineColor[t]=S(i.linecolor)),"linewidth"in i&&(l.lineWidth[t]=i.linewidth),"showgrid"in i&&(l.gridEnable[t]=i.showgrid),"gridcolor"in i&&(l.gridColor[t]=S(i.gridcolor)),"gridwidth"in i&&(l.gridWidth[t]=i.gridwidth),"log"===i.type?l.zeroEnable[t]=!1:"zeroline"in i&&(l.zeroEnable[t]=i.zeroline),"zerolinecolor"in i&&(l.zeroLineColor[t]=S(i.zerolinecolor)),"zerolinewidth"in i&&(l.zeroLineWidth[t]=i.zerolinewidth),l.lineTickEnable[t]=!(!("ticks"in i)||!i.ticks),"ticklen"in i&&(l.lineTickLength[t]=l._defaultLineTickLength[t]=i.ticklen),"tickcolor"in i&&(l.lineTickColor[t]=S(i.tickcolor)),"tickwidth"in i&&(l.lineTickWidth[t]=i.tickwidth),"tickangle"in i&&(l.tickAngle[t]="auto"===i.tickangle?-3600:Math.PI*-i.tickangle/180),"showticklabels"in i&&(l.tickEnable[t]=i.showticklabels),"tickfont"in i&&(i.tickfont.color&&(l.tickColor[t]=S(i.tickfont.color)),i.tickfont.family&&(l.tickFont[t]=i.tickfont.family),i.tickfont.size&&(l.tickSize[t]=i.tickfont.size),i.tickfont.weight&&(l.tickFontWeight[t]=i.tickfont.weight),i.tickfont.style&&(l.tickFontStyle[t]=i.tickfont.style),i.tickfont.variant&&(l.tickFontVariant[t]=i.tickfont.variant)),"mirror"in i?-1!==["ticks","all","allticks"].indexOf(i.mirror)?(l.lineTickMirror[t]=!0,l.lineMirror[t]=!0):!0===i.mirror?(l.lineTickMirror[t]=!1,l.lineMirror[t]=!0):(l.lineTickMirror[t]=!1,l.lineMirror[t]=!1):l.lineMirror[t]=!1,"showbackground"in i&&!1!==i.showbackground?(l.backgroundEnable[t]=!0,l.backgroundColor[t]=S(i.backgroundcolor)):l.backgroundEnable[t]=!1):(l.tickEnable[t]=!1,l.labelEnable[t]=!1,l.lineEnable[t]=!1,l.lineTickEnable[t]=!1,l.gridEnable[t]=!1,l.zeroEnable[t]=!1,l.backgroundEnable[t]=!1)}},ie.exports=function(b,p){var l=new T;return l.merge(b,p),l}},5208:function(ie,F,e){"use strict";var S=e(3400),k=e(76308),o=e(24040),T=e(168),b=e(64380),p=e(346),l=e(84888).op,t="gl3d";function i(r,n,a,s){for(var c=a("bgcolor"),h=k.combine(c,s.paper_bgcolor),u=["up","center","eye"],y=0;y<u.length;y++)a("camera."+u[y]+".x"),a("camera."+u[y]+".y"),a("camera."+u[y]+".z");a("camera.projection.type");var d=!!a("aspectratio.x")&&!!a("aspectratio.y")&&!!a("aspectratio.z"),m=a("aspectmode",d?"manual":"auto");d||(r.aspectratio=n.aspectratio={x:1,y:1,z:1},"manual"===m&&(n.aspectmode="auto"),r.aspectmode=n.aspectmode);var g=l(s.fullData,t,s.id);b(r,n,{font:s.font,scene:s.id,data:g,bgColor:h,calendar:s.calendar,autotypenumbersDflt:s.autotypenumbersDflt,fullLayout:s.fullLayout}),o.getComponentMethod("annotations3d","handleDefaults")(r,n,s);var x=s.getDfltFromLayout("dragmode");if(!1!==x&&!x)if(x="orbit",r.camera&&r.camera.up){var v=r.camera.up.x,_=r.camera.up.y,f=r.camera.up.z;0!==f&&(v&&_&&f?f/Math.sqrt(v*v+_*_+f*f)>.999&&(x="turntable"):x="turntable")}else x="turntable";a("dragmode",x),a("hovermode",s.getDfltFromLayout("hovermode"))}ie.exports=function(r,n,a){var s=n._basePlotModules.length>1;T(r,n,a,{type:t,attributes:p,handleDefaults:i,fullLayout:n,font:n.font,fullData:a,getDfltFromLayout:function(c){if(!s)return S.validate(r[c],p[c])?r[c]:void 0},autotypenumbersDflt:n.autotypenumbers,paper_bgcolor:n.paper_bgcolor,calendar:n.calendar})}},346:function(ie,F,e){"use strict";var S=e(86140),k=e(86968).u,o=e(92880).extendFlat,T=e(3400).counterRegex;function b(p,l,t){return{x:{valType:"number",dflt:p,editType:"camera"},y:{valType:"number",dflt:l,editType:"camera"},z:{valType:"number",dflt:t,editType:"camera"},editType:"camera"}}ie.exports={_arrayAttrRegexps:[T("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:o(b(0,0,1),{}),center:o(b(0,0,0),{}),eye:o(b(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:k({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:S,yaxis:S,zaxis:S,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},9020:function(ie,F,e){"use strict";var S=e(43080),k=["xaxis","yaxis","zaxis"];function o(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}o.prototype.merge=function(T){for(var b=0;b<3;++b){var p=T[k[b]];p.visible?(this.enabled[b]=p.showspikes,this.colors[b]=S(p.spikecolor),this.drawSides[b]=p.spikesides,this.lineWidth[b]=p.spikethickness):(this.enabled[b]=!1,this.drawSides[b]=!1)}},ie.exports=function(T){var b=new o;return b.merge(T),b}},87152:function(ie,F,e){"use strict";ie.exports=function(b){for(var p=b.axesOptions,l=b.glplot.axesPixels,t=b.fullSceneLayout,i=[[],[],[]],r=0;r<3;++r){var n=t[o[r]];if(n._length=(l[r].hi-l[r].lo)*l[r].pixelsPerDataUnit/b.dataScale[r],Math.abs(n._length)===1/0||isNaN(n._length))i[r]=[];else{n._input_range=n.range.slice(),n.range[0]=l[r].lo/b.dataScale[r],n.range[1]=l[r].hi/b.dataScale[r],n._m=1/(b.dataScale[r]*l[r].pixelsPerDataUnit),n.range[0]===n.range[1]&&(n.range[0]-=1,n.range[1]+=1);var a=n.tickmode;if("auto"===n.tickmode){n.tickmode="linear";var s=n.nticks||k.constrain(n._length/40,4,9);S.autoTicks(n,Math.abs(n.range[1]-n.range[0])/s)}for(var c=S.calcTicks(n,{msUTC:!0}),h=0;h<c.length;++h)c[h].x=c[h].x*b.dataScale[r],"date"===n.type&&(c[h].text=c[h].text.replace(/\<br\>/g," "));i[r]=c,n.tickmode=a}}for(p.ticks=i,r=0;r<3;++r)for(T[r]=.5*(b.glplot.bounds[0][r]+b.glplot.bounds[1][r]),h=0;h<2;++h)p.bounds[h][r]=b.glplot.bounds[h][r];b.contourLevels=function(u){for(var y=new Array(3),d=0;d<3;++d){for(var m=u[d],g=new Array(m.length),x=0;x<m.length;++x)g[x]=m[x].x;y[d]=g}return y}(i)};var S=e(54460),k=e(3400),o=["xaxis","yaxis","zaxis"],T=[0,0,0]},94424:function(ie){"use strict";function F(e,S){var k,o,T=[0,0,0,0];for(k=0;k<4;++k)for(o=0;o<4;++o)T[o]+=e[4*k+o]*S[k];return T}ie.exports=function(e,S){return F(e.projection,F(e.view,F(e.model,[S[0],S[1],S[2],1])))}},98432:function(ie,F,e){"use strict";var S,k,o=e(67792).gl_plot3d,T=o.createCamera,b=o.createScene,p=e(5408),l=e(89184),t=e(24040),i=e(3400),r=i.preserveDrawingBuffer(),n=e(54460),a=e(93024),s=e(43080),c=e(16576),h=e(94424),u=e(44728),y=e(9020),d=e(87152),m=e(19280).applyAutorangeOptions,g=!1;function x(w,E){var P=document.createElement("div"),L=w.container;this.graphDiv=w.graphDiv;var O=document.createElementNS("http://www.w3.org/2000/svg","svg");O.style.position="absolute",O.style.top=O.style.left="0px",O.style.width=O.style.height="100%",O.style["z-index"]=20,O.style["pointer-events"]="none",P.appendChild(O),this.svgContainer=O,P.id=w.id,P.style.position="absolute",P.style.top=P.style.left="0px",P.style.width=P.style.height="100%",L.appendChild(P),this.fullLayout=E,this.id=w.id||"scene",this.fullSceneLayout=E[this.id],this.plotArgs=[[],{},{}],this.axesOptions=u(E,E[this.id]),this.spikeOptions=y(E[this.id]),this.container=P,this.staticMode=!!w.staticPlot,this.pixelRatio=this.pixelRatio||w.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=t.getComponentMethod("annotations3d","convert"),this.drawAnnotations=t.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var v=x.prototype;v.prepareOptions=function(){var w=this,E={canvas:w.canvas,gl:w.gl,glOptions:{preserveDrawingBuffer:r,premultipliedAlpha:!0,antialias:!0},container:w.container,axes:w.axesOptions,spikes:w.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:w.camera,pixelRatio:w.pixelRatio};if(w.staticMode){if(!(k||(S=document.createElement("canvas"),k=p({canvas:S,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");E.gl=k,E.canvas=S}return E};var _=!0;v.tryCreatePlot=function(){var w=this,E=w.prepareOptions(),P=!0;try{w.glplot=b(E)}catch{if(w.staticMode||!_||r)P=!1;else{i.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{r=E.glOptions.preserveDrawingBuffer=!0,w.glplot=b(E)}catch{r=E.glOptions.preserveDrawingBuffer=!1,P=!1}}}return _=!1,P},v.initializeGLCamera=function(){var w=this,E=w.fullSceneLayout.camera;w.camera=T(w.container,{center:[E.center.x,E.center.y,E.center.z],eye:[E.eye.x,E.eye.y,E.eye.z],up:[E.up.x,E.up.y,E.up.z],_ortho:"orthographic"===E.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})},v.initializeGLPlot=function(){var w=this;if(w.initializeGLCamera(),!w.tryCreatePlot())return c(w);w.traces={},w.make4thDimension();var E=w.graphDiv,P=E.layout,L=function(){var z={};return w.isCameraChanged(P)&&(z[w.id+".camera"]=w.getCamera()),w.isAspectChanged(P)&&(z[w.id+".aspectratio"]=w.glplot.getAspectratio(),"manual"!==P[w.id].aspectmode&&(w.fullSceneLayout.aspectmode=P[w.id].aspectmode=z[w.id+".aspectmode"]="manual")),z},O=function(z){if(!1!==z.fullSceneLayout.dragmode){var V=L();z.saveLayout(P),z.graphDiv.emit("plotly_relayout",V)}};return w.glplot.canvas&&(w.glplot.canvas.addEventListener("mouseup",function(){O(w)}),w.glplot.canvas.addEventListener("touchstart",function(){g=!0}),w.glplot.canvas.addEventListener("wheel",function(z){if(E._context._scrollZoom.gl3d){if(w.camera._ortho){var V=z.deltaX>z.deltaY?1.1:.9090909090909091,R=w.glplot.getAspectratio();w.glplot.setAspectratio({x:V*R.x,y:V*R.y,z:V*R.z})}O(w)}},!!l&&{passive:!1}),w.glplot.canvas.addEventListener("mousemove",function(){if(!1!==w.fullSceneLayout.dragmode&&0!==w.camera.mouseListener.buttons){var z=L();w.graphDiv.emit("plotly_relayouting",z)}}),w.staticMode||w.glplot.canvas.addEventListener("webglcontextlost",function(z){E&&E.emit&&E.emit("plotly_webglcontextlost",{event:z,layer:w.id})},!1)),w.glplot.oncontextloss=function(){w.recoverContext()},w.glplot.onrender=function(){w.render()},!0},v.render=function(){var w,E=this,P=E.graphDiv,L=E.svgContainer,O=E.container.getBoundingClientRect();P._fullLayout._calcInverseTransform(P);var R=O.width*P._fullLayout._invScaleX,U=O.height*P._fullLayout._invScaleY;L.setAttributeNS(null,"viewBox","0 0 "+R+" "+U),L.setAttributeNS(null,"width",R),L.setAttributeNS(null,"height",U),d(E),E.glplot.axes.update(E.axesOptions);for(var Z=Object.keys(E.traces),N=null,G=E.glplot.selection,W=0;W<Z.length;++W)"skip"!==(w=E.traces[Z[W]]).data.hoverinfo&&w.handlePick(G)&&(N=w),w.setContourLevels&&w.setContourLevels();function ae(ye,_e,Ie){var De=E.fullSceneLayout[ye+"axis"];return"log"!==De.type&&(_e=De.d2l(_e)),n.hoverLabelText(De,_e,Ie)}if(null!==N){var ne,re=h(E.glplot.cameraParams,G.dataCoordinate),Q=P._fullData[(w=N.data).index],$=G.index,X={xLabel:ae("x",G.traceCoordinate[0],w.xhoverformat),yLabel:ae("y",G.traceCoordinate[1],w.yhoverformat),zLabel:ae("z",G.traceCoordinate[2],w.zhoverformat)},oe=a.castHoverinfo(Q,E.fullLayout,$),fe=(oe||"").split("+"),ue=oe&&"all"===oe;Q.hovertemplate||ue||(-1===fe.indexOf("x")&&(X.xLabel=void 0),-1===fe.indexOf("y")&&(X.yLabel=void 0),-1===fe.indexOf("z")&&(X.zLabel=void 0),-1===fe.indexOf("text")&&(G.textLabel=void 0),-1===fe.indexOf("name")&&(N.name=void 0));var ge=[];"cone"===w.type||"streamtube"===w.type?(X.uLabel=ae("x",G.traceCoordinate[3],w.uhoverformat),(ue||-1!==fe.indexOf("u"))&&ge.push("u: "+X.uLabel),X.vLabel=ae("y",G.traceCoordinate[4],w.vhoverformat),(ue||-1!==fe.indexOf("v"))&&ge.push("v: "+X.vLabel),X.wLabel=ae("z",G.traceCoordinate[5],w.whoverformat),(ue||-1!==fe.indexOf("w"))&&ge.push("w: "+X.wLabel),X.normLabel=G.traceCoordinate[6].toPrecision(3),(ue||-1!==fe.indexOf("norm"))&&ge.push("norm: "+X.normLabel),"streamtube"===w.type&&(X.divergenceLabel=G.traceCoordinate[7].toPrecision(3),(ue||-1!==fe.indexOf("divergence"))&&ge.push("divergence: "+X.divergenceLabel)),G.textLabel&&ge.push(G.textLabel),ne=ge.join("<br>")):"isosurface"===w.type||"volume"===w.type?(X.valueLabel=n.hoverLabelText(E._mockAxis,E._mockAxis.d2l(G.traceCoordinate[3]),w.valuehoverformat),ge.push("value: "+X.valueLabel),G.textLabel&&ge.push(G.textLabel),ne=ge.join("<br>")):ne=G.textLabel;var we={x:G.traceCoordinate[0],y:G.traceCoordinate[1],z:G.traceCoordinate[2],data:Q._input,fullData:Q,curveNumber:Q.index,pointNumber:$};a.appendArrayPointValue(we,Q,$),w._module.eventData&&(we=Q._module.eventData(we,G,Q,{},$));var Te={points:[we]};if(E.fullSceneLayout.hovermode){var xe=[];a.loneHover({trace:Q,x:(.5+.5*re[0]/re[3])*R,y:(.5-.5*re[1]/re[3])*U,xLabel:X.xLabel,yLabel:X.yLabel,zLabel:X.zLabel,text:ne,name:N.name,color:a.castHoverOption(Q,$,"bgcolor")||N.color,borderColor:a.castHoverOption(Q,$,"bordercolor"),fontFamily:a.castHoverOption(Q,$,"font.family"),fontSize:a.castHoverOption(Q,$,"font.size"),fontColor:a.castHoverOption(Q,$,"font.color"),nameLength:a.castHoverOption(Q,$,"namelength"),textAlign:a.castHoverOption(Q,$,"align"),hovertemplate:i.castOption(Q,$,"hovertemplate"),hovertemplateLabels:i.extendFlat({},we,X),eventData:[we]},{container:L,gd:P,inOut_bbox:xe}),we.bbox=xe[0]}P.emit(G.distance<5&&(G.buttons||g)?"plotly_click":"plotly_hover",Te),this.oldEventData=Te}else a.loneUnhover(L),this.oldEventData&&P.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;E.drawAnnotations(E)},v.recoverContext=function(){var w=this;w.glplot.dispose();var E=function(){w.glplot.gl.isContextLost()?requestAnimationFrame(E):w.initializeGLPlot()?w.plot.apply(w,w.plotArgs):i.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(E)};var f=["xaxis","yaxis","zaxis"];function C(w,E,P){for(var L=w.fullSceneLayout,O=0;O<3;O++){var z=f[O],V=z.charAt(0),R=L[z],U=E[V],Z=E[V+"calendar"],N=E["_"+V+"length"];if(i.isArrayOrTypedArray(U))for(var G,W=0;W<(N||U.length);W++)if(i.isArrayOrTypedArray(U[W]))for(var ae=0;ae<U[W].length;++ae)G=R.d2l(U[W][ae],0,Z),!isNaN(G)&&isFinite(G)&&(P[0][O]=Math.min(P[0][O],G),P[1][O]=Math.max(P[1][O],G));else G=R.d2l(U[W],0,Z),!isNaN(G)&&isFinite(G)&&(P[0][O]=Math.min(P[0][O],G),P[1][O]=Math.max(P[1][O],G));else P[0][O]=Math.min(P[0][O],0),P[1][O]=Math.max(P[1][O],N-1)}}v.plot=function(w,E,P){var L=this;if(L.plotArgs=[w,E,P],!L.glplot.contextLost){var O,z,V,R,U,Z,N=E[L.id],G=P[L.id];L.fullLayout=E,L.fullSceneLayout=N,L.axesOptions.merge(E,N),L.spikeOptions.merge(N),L.setViewport(N),L.updateFx(N.dragmode,N.hovermode),L.camera.enableWheel=L.graphDiv._context._scrollZoom.gl3d,L.glplot.setClearColor(s(N.bgcolor)),L.setConvert(U),w?Array.isArray(w)||(w=[w]):w=[];var W=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(V=0;V<w.length;++V)!0===(O=w[V]).visible&&0!==O._length&&C(this,O,W);!function(Oe,Ne){for(var je=Oe.fullSceneLayout,ve=je.annotations||[],Me=0;Me<3;Me++)for(var Le=f[Me],Ue=Le.charAt(0),ze=je[Le],qe=0;qe<ve.length;qe++){var Ke=ve[qe];if(Ke.visible){var it=ze.r2l(Ke[Ue]);!isNaN(it)&&isFinite(it)&&(Ne[0][Me]=Math.min(Ne[0][Me],it),Ne[1][Me]=Math.max(Ne[1][Me],it))}}}(this,W);var ae=[1,1,1];for(R=0;R<3;++R)ae[R]=W[1][R]===W[0][R]?1:1/(W[1][R]-W[0][R]);for(L.dataScale=ae,L.convertAnnotations(this),V=0;V<w.length;++V)!0===(O=w[V]).visible&&0!==O._length&&((z=L.traces[O.uid])?z.data.type===O.type?z.update(O):(z.dispose(),z=O._module.plot(this,O),L.traces[O.uid]=z):(z=O._module.plot(this,O),L.traces[O.uid]=z),z.name=O.name);var re=Object.keys(L.traces);e:for(V=0;V<re.length;++V){for(R=0;R<w.length;++R)if(w[R].uid===re[V]&&!0===w[R].visible&&0!==w[R]._length)continue e;(z=L.traces[re[V]]).dispose(),delete L.traces[re[V]]}L.glplot.objects.sort(function(Oe,Ne){return Oe._trace.data.index-Ne._trace.data.index});var ne,Q=[[0,0,0],[0,0,0]],$=[],X={};for(V=0;V<3;++V){var oe;if((Z=(U=N[f[V]]).type)in X?(X[Z].acc*=ae[V],X[Z].count+=1):X[Z]={acc:ae[V],count:1},U.autorange){Q[0][V]=1/0,Q[1][V]=-1/0;var fe=L.glplot.objects,ue=L.fullSceneLayout.annotations||[],ge=U._name.charAt(0);for(R=0;R<fe.length;R++){var we=fe[R],Te=we.bounds,xe=we._trace.data._pad||0;Q[0][V]="ErrorBars"===we.constructor.name&&U._lowerLogErrorBound?Math.min(Q[0][V],U._lowerLogErrorBound):Math.min(Q[0][V],Te[0][V]/ae[V]-xe),Q[1][V]=Math.max(Q[1][V],Te[1][V]/ae[V]+xe)}for(R=0;R<ue.length;R++){var ye=ue[R];if(ye.visible){var _e=U.r2l(ye[ge]);Q[0][V]=Math.min(Q[0][V],_e),Q[1][V]=Math.max(Q[1][V],_e)}}if("rangemode"in U&&"tozero"===U.rangemode&&(Q[0][V]=Math.min(Q[0][V],0),Q[1][V]=Math.max(Q[1][V],0)),Q[0][V]>Q[1][V])Q[0][V]=-1,Q[1][V]=1;else{var Ie=Q[1][V]-Q[0][V];Q[0][V]-=Ie/32,Q[1][V]+=Ie/32}if(oe=m(oe=[Q[0][V],Q[1][V]],U),Q[0][V]=oe[0],Q[1][V]=oe[1],U.isReversed()){var De=Q[0][V];Q[0][V]=Q[1][V],Q[1][V]=De}}else Q[0][V]=U.r2l((oe=U.range)[0]),Q[1][V]=U.r2l(oe[1]);Q[0][V]===Q[1][V]&&(Q[0][V]-=1,Q[1][V]+=1),$[V]=Q[1][V]-Q[0][V],U.range=[Q[0][V],Q[1][V]],U.limitRange(),L.glplot.setBounds(V,{min:U.range[0]*ae[V],max:U.range[1]*ae[V]})}var be=N.aspectmode;if("cube"===be)ne=[1,1,1];else if("manual"===be){var he=N.aspectratio;ne=[he.x,he.y,he.z]}else{if("auto"!==be&&"data"!==be)throw new Error("scene.js aspectRatio was not one of the enumerated types");var ce=[1,1,1];for(V=0;V<3;++V){var me=X[Z=(U=N[f[V]]).type];ce[V]=Math.pow(me.acc,1/me.count)/ae[V]}ne="data"===be||Math.max.apply(null,ce)/Math.min.apply(null,ce)<=4?ce:[1,1,1]}N.aspectratio.x=G.aspectratio.x=ne[0],N.aspectratio.y=G.aspectratio.y=ne[1],N.aspectratio.z=G.aspectratio.z=ne[2],L.glplot.setAspectratio(N.aspectratio),L.viewInitial.aspectratio||(L.viewInitial.aspectratio={x:N.aspectratio.x,y:N.aspectratio.y,z:N.aspectratio.z}),L.viewInitial.aspectmode||(L.viewInitial.aspectmode=N.aspectmode);var Pe=N.domain||null,Ae=E._size||null;if(Pe&&Ae){var Ce=L.container.style;Ce.position="absolute",Ce.left=Ae.l+Pe.x[0]*Ae.w+"px",Ce.top=Ae.t+(1-Pe.y[1])*Ae.h+"px",Ce.width=Ae.w*(Pe.x[1]-Pe.x[0])+"px",Ce.height=Ae.h*(Pe.y[1]-Pe.y[0])+"px"}L.glplot.redraw()}},v.destroy=function(){var w=this;w.glplot&&(w.camera.mouseListener.enabled=!1,w.container.removeEventListener("wheel",w.camera.wheelListener),w.camera=null,w.glplot.dispose(),w.container.parentNode.removeChild(w.container),w.glplot=null)},v.getCamera=function(){var w,E=this;return E.camera.view.recalcMatrix(E.camera.view.lastT()),{up:{x:(w=E.camera).up[0],y:w.up[1],z:w.up[2]},center:{x:w.center[0],y:w.center[1],z:w.center[2]},eye:{x:w.eye[0],y:w.eye[1],z:w.eye[2]},projection:{type:!0===w._ortho?"orthographic":"perspective"}}},v.setViewport=function(w){var E,P=this,L=w.camera;P.camera.lookAt.apply(this,[[(E=L).eye.x,E.eye.y,E.eye.z],[E.center.x,E.center.y,E.center.z],[E.up.x,E.up.y,E.up.z]]),P.glplot.setAspectratio(w.aspectratio),"orthographic"===L.projection.type!==P.camera._ortho&&(P.glplot.redraw(),P.glplot.clearRGBA(),P.glplot.dispose(),P.initializeGLPlot())},v.isCameraChanged=function(w){var E=this.getCamera(),P=i.nestedProperty(w,this.id+".camera").get();var R,U,Z,N,G,W,O=!1;if(void 0===P)O=!0;else{for(var z=0;z<3;z++)for(var V=0;V<3;V++)if(R=E,N=V,G=void 0,W=void 0,W=["x","y","z"],!(U=P)[(G=["up","center","eye"])[Z=z]]||R[G[Z]][W[N]]!==U[G[Z]][W[N]]){O=!0;break}(!P.projection||E.projection&&E.projection.type!==P.projection.type)&&(O=!0)}return O},v.isAspectChanged=function(w){var E=this.glplot.getAspectratio(),P=i.nestedProperty(w,this.id+".aspectratio").get();return void 0===P||P.x!==E.x||P.y!==E.y||P.z!==E.z},v.saveLayout=function(w){var E,P,L,O,z,V,R=this,U=R.fullLayout,Z=R.isCameraChanged(w),N=R.isAspectChanged(w),G=Z||N;if(G){var W={};Z&&(E=R.getCamera(),L=(P=i.nestedProperty(w,R.id+".camera")).get(),W[R.id+".camera"]=L),N&&(O=R.glplot.getAspectratio(),V=(z=i.nestedProperty(w,R.id+".aspectratio")).get(),W[R.id+".aspectratio"]=V),t.call("_storeDirectGUIEdit",w,U._preGUI,W),Z&&(P.set(E),i.nestedProperty(U,R.id+".camera").set(E)),N&&(z.set(O),i.nestedProperty(U,R.id+".aspectratio").set(O),R.glplot.redraw())}return G},v.updateFx=function(w,E){var P=this,L=P.camera;if(L)if("orbit"===w)L.mode="orbit",L.keyBindingMode="rotate";else if("turntable"===w){L.up=[0,0,1],L.mode="turntable",L.keyBindingMode="rotate";var O=P.graphDiv,z=O._fullLayout,V=P.fullSceneLayout.camera,R=V.up.x,U=V.up.y,Z=V.up.z;if(Z/Math.sqrt(R*R+U*U+Z*Z)<.999){var N=P.id+".camera.up",G={x:0,y:0,z:1},W={};W[N]=G;var ae=O.layout;t.call("_storeDirectGUIEdit",ae,z._preGUI,W),V.up=G,i.nestedProperty(ae,N).set(G)}}else L.keyBindingMode=w;P.fullSceneLayout.hovermode=E},v.toImage=function(w){var E=this;w||(w="png"),E.staticMode&&E.container.appendChild(S),E.glplot.redraw();var P=E.glplot.gl,L=P.drawingBufferWidth,O=P.drawingBufferHeight;P.bindFramebuffer(P.FRAMEBUFFER,null);var z=new Uint8Array(L*O*4);P.readPixels(0,0,L,O,P.RGBA,P.UNSIGNED_BYTE,z),function(N,G,W){for(var ae=0,re=W-1;ae<re;++ae,--re)for(var ne=0;ne<G;++ne)for(var Q=0;Q<4;++Q){var $=4*(G*ae+ne)+Q,X=4*(G*re+ne)+Q,oe=N[$];N[$]=N[X],N[X]=oe}}(z,L,O),function(N,G,W){for(var ae=0;ae<W;++ae)for(var re=0;re<G;++re){var ne=4*(G*ae+re),Q=N[ne+3];if(Q>0)for(var $=255/Q,X=0;X<3;++X)N[ne+X]=Math.min($*N[ne+X],255)}}(z,L,O);var V=document.createElement("canvas");V.width=L,V.height=O;var R,U=V.getContext("2d",{willReadFrequently:!0}),Z=U.createImageData(L,O);switch(Z.data.set(z),U.putImageData(Z,0,0),w){case"jpeg":R=V.toDataURL("image/jpeg");break;case"webp":R=V.toDataURL("image/webp");break;default:R=V.toDataURL("image/png")}return E.staticMode&&E.container.removeChild(S),R},v.setConvert=function(){for(var w=0;w<3;w++){var E=this.fullSceneLayout[f[w]];n.setConvert(E,this.fullLayout),E.setScale=i.noop}},v.make4thDimension=function(){var w=this,E=w.graphDiv._fullLayout;w._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},n.setConvert(w._mockAxis,E)},ie.exports=x},52094:function(ie){"use strict";ie.exports=function(F,e,S,k){k=k||F.length;for(var o=new Array(k),T=0;T<k;T++)o[T]=[F[T],e[T],S[T]];return o}},64859:function(ie,F,e){"use strict";var S=e(25376),k=e(85656),o=e(22548),T=e(92872),b=e(34200),p=e(66741),l=e(92880).extendFlat,t=S({editType:"calc"});t.family.dflt='"Open Sans", verdana, arial, sans-serif',t.size.dflt=12,t.color.dflt=o.defaultLine,ie.exports={font:t,title:{text:{valType:"string",editType:"layoutstyle"},font:S({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:l(p({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:o.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:o.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:o.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:T.newshape,activeshape:T.activeshape,newselection:b.newselection,activeselection:b.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:l({},k.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:S({editType:"layoutstyle"})}}},47552:function(ie,F,e){"use strict";var S=e(95376),k="1.13.4",o='\xa9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',T=['\xa9 <a target="_blank" href="https://carto.com/">Carto</a>',o].join(" "),b=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),p={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:o,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:b,tiles:["https://tiles.stadiamaps.com/tiles/stamen_terrain/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:b,tiles:["https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://tiles.stadiamaps.com/tiles/stamen_watercolor/{z}/{x}/{y}.jpg?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},l=S(p);ie.exports={requiredVersion:k,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:p,styleValuesNonMapbox:l,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install @plotly/mapbox-gl@"+k+"."].join("\n"),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join("\n"),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",l.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join("\n"),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},89032:function(ie,F,e){"use strict";var S=e(3400);ie.exports=function(k,o){var T=k.split(" "),b=T[0],p=T[1],l=S.isArrayOrTypedArray(o)?S.mean(o):o,t=.5+l/100,i=1.5+l/100,r=["",""],n=[0,0];switch(b){case"top":r[0]="top",n[1]=-i;break;case"bottom":r[0]="bottom",n[1]=i}switch(p){case"left":r[1]="right",n[0]=-t;break;case"right":r[1]="left",n[0]=t}return{anchor:r[0]&&r[1]?r.join("-"):r[0]?r[0]:r[1]?r[1]:"center",offset:n}}},33688:function(ie,F,e){"use strict";var S=e(3480),k=e(3400),o=k.strTranslate,T=k.strScale,b=e(84888).KY,p=e(9616),l=e(33428),t=e(43616),i=e(72736),r=e(14440),n="mapbox",a=F.constants=e(47552);function s(c){return"string"==typeof c&&(-1!==a.styleValuesMapbox.indexOf(c)||0===c.indexOf("mapbox://")||0===c.indexOf("stamen"))}F.name=n,F.attr="subplot",F.idRoot=n,F.idRegex=F.attrRegex=k.counterRegex(n),F.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},F.layoutAttributes=e(5232),F.supplyLayoutDefaults=e(5976),F.plot=function(c){var h=c._fullLayout,u=c.calcdata,y=h._subplots[n];if(S.version!==a.requiredVersion)throw new Error(a.wrongVersionErrorMsg);var d=function(f,C){var w=f._fullLayout;if(""===f._context.mapboxAccessToken)return"";for(var E=[],P=[],L=!1,O=!1,z=0;z<C.length;z++){var V=w[C[z]],R=V.accesstoken;s(V.style)&&(R?k.pushUnique(E,R):(s(V._input.style)&&(k.error("Uses Mapbox map style, but did not set an access token."),L=!0),O=!0)),R&&k.pushUnique(P,R)}if(O){var U=L?a.noAccessTokenErrorMsg:a.missingStyleErrorMsg;throw k.error(U),new Error(U)}return E.length?(E.length>1&&k.warn(a.multipleTokensErrorMsg),E[0]):(P.length&&k.log(["Listed mapbox access token(s)",P.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(c,y);S.accessToken=d;for(var m=0;m<y.length;m++){var g=y[m],x=b(u,n,g),v=h[g],_=v._subplot;_||(_=new r(c,g),h[g]._subplot=_),_.viewInitial||(_.viewInitial={center:k.extendFlat({},v.center),zoom:v.zoom,bearing:v.bearing,pitch:v.pitch}),_.plot(x,h,c._promises)}},F.clean=function(c,h,u,y){for(var d=y._subplots[n]||[],m=0;m<d.length;m++){var g=d[m];!h[g]&&y[g]._subplot&&y[g]._subplot.destroy()}},F.toSVG=function(c){for(var h=c._fullLayout,u=h._subplots[n],y=h._size,d=0;d<u.length;d++){var m=h[u[d]],g=m.domain,x=m._subplot.toImage("png");h._glimages.append("svg:image").attr({xmlns:p.svg,"xlink:href":x,x:y.l+y.w*g.x[0],y:y.t+y.h*(1-g.y[1]),width:y.w*(g.x[1]-g.x[0]),height:y.h*(g.y[1]-g.y[0]),preserveAspectRatio:"none"});var v=l.select(m._subplot.div);if(null!==v.select(".mapboxgl-ctrl-logo").node().offsetParent){var _=h._glimages.append("g");_.attr("transform",o(y.l+y.w*g.x[0]+10,y.t+y.h*(1-g.y[0])-31)),_.append("path").attr("d",a.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),_.append("path").attr("d",a.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),_.append("path").attr("d",a.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),_.append("polygon").attr("points",a.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var f=v.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),C=h._glimages.append("g"),w=C.append("text");w.text(f).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":f});var E=t.bBox(w.node()),P=y.w*(g.x[1]-g.x[0]);if(E.width>P/2){var L=f.split("|").join("<br>");w.text(L).attr("data-unformatted",L).call(i.convertToTspans,c),E=t.bBox(w.node())}w.attr("transform",o(-3,8-E.height)),C.insert("rect",".static-attribution").attr({x:-E.width-6,y:-E.height-3,width:E.width+6,height:E.height+3,fill:"rgba(255, 255, 255, 0.75)"});var O=1;E.width+6>P&&(O=P/(E.width+6));var z=[y.l+y.w*g.x[1],y.t+y.h*(1-g.y[0])];C.attr("transform",o(z[0],z[1])+T(O))}},F.updateFx=function(c){for(var h=c._fullLayout,u=h._subplots[n],y=0;y<u.length;y++)h[u[y]]._subplot.updateFx(h)}},22360:function(ie,F,e){"use strict";var S=e(3400),k=e(72736).sanitizeHTML,o=e(89032),T=e(47552);function b(i,r){this.subplot=i,this.uid=i.uid+"-"+r,this.index=r,this.idSource="source-"+this.uid,this.idLayer=T.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var p=b.prototype;function l(i){if(!i.visible)return!1;var r=i.source;if(Array.isArray(r)&&r.length>0){for(var n=0;n<r.length;n++)if("string"!=typeof r[n]||0===r[n].length)return!1;return!0}return S.isPlainObject(r)||"string"==typeof r&&r.length>0}function t(i){var r={},n={};switch(i.type){case"circle":S.extendFlat(n,{"circle-radius":i.circle.radius,"circle-color":i.color,"circle-opacity":i.opacity});break;case"line":S.extendFlat(n,{"line-width":i.line.width,"line-color":i.color,"line-opacity":i.opacity,"line-dasharray":i.line.dash});break;case"fill":S.extendFlat(n,{"fill-color":i.color,"fill-outline-color":i.fill.outlinecolor,"fill-opacity":i.opacity});break;case"symbol":var a=i.symbol,s=o(a.textposition,a.iconsize);S.extendFlat(r,{"icon-image":a.icon+"-15","icon-size":a.iconsize/10,"text-field":a.text,"text-size":a.textfont.size,"text-anchor":s.anchor,"text-offset":s.offset,"symbol-placement":a.placement}),S.extendFlat(n,{"icon-color":i.color,"text-color":a.textfont.color,"text-opacity":i.opacity});break;case"raster":S.extendFlat(n,{"raster-fade-duration":0,"raster-opacity":i.opacity})}return{layout:r,paint:n}}p.update=function(i){this.visible?this.needsNewImage(i)?this.updateImage(i):this.needsNewSource(i)?(this.removeLayer(),this.updateSource(i),this.updateLayer(i)):this.needsNewLayer(i)?this.updateLayer(i):this.updateStyle(i):(this.updateSource(i),this.updateLayer(i)),this.visible=l(i)},p.needsNewImage=function(i){return this.subplot.map.getSource(this.idSource)&&"image"===this.sourceType&&"image"===i.sourcetype&&(this.source!==i.source||JSON.stringify(this.coordinates)!==JSON.stringify(i.coordinates))},p.needsNewSource=function(i){return this.sourceType!==i.sourcetype||JSON.stringify(this.source)!==JSON.stringify(i.source)||this.layerType!==i.type},p.needsNewLayer=function(i){return this.layerType!==i.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},p.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},p.updateImage=function(i){this.subplot.map.getSource(this.idSource).updateImage({url:i.source,coordinates:i.coordinates});var r=this.findFollowingMapboxLayerId(this.lookupBelow());null!==r&&this.subplot.map.moveLayer(this.idLayer,r)},p.updateSource=function(i){var a,s,c,h,u,r=this.subplot.map;if(r.getSource(this.idSource)&&r.removeSource(this.idSource),this.sourceType=i.sourcetype,this.source=i.source,l(i)){var n=(h=(a=i).source,u={type:c=a.sourcetype},"geojson"===c?s="data":"vector"===c?s="string"==typeof h?"url":"tiles":"raster"===c?(s="tiles",u.tileSize=256):"image"===c&&(s="url",u.coordinates=a.coordinates),u[s]=h,a.sourceattribution&&(u.attribution=k(a.sourceattribution)),u);r.addSource(this.idSource,n)}},p.findFollowingMapboxLayerId=function(i){if("traces"===i)for(var r=this.subplot.getMapLayers(),n=0;n<r.length;n++){var a=r[n].id;if("string"==typeof a&&0===a.indexOf(T.traceLayerPrefix)){i=a;break}}return i},p.updateLayer=function(i){var r=this.subplot,n=t(i),a=this.lookupBelow(),s=this.findFollowingMapboxLayerId(a);this.removeLayer(),l(i)&&r.addLayer({id:this.idLayer,source:this.idSource,"source-layer":i.sourcelayer||"",type:i.type,minzoom:i.minzoom,maxzoom:i.maxzoom,layout:n.layout,paint:n.paint},s),this.layerType=i.type,this.below=a},p.updateStyle=function(i){if(l(i)){var r=t(i);this.subplot.setOptions(this.idLayer,"setLayoutProperty",r.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",r.paint)}},p.removeLayer=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer)},p.dispose=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer),i.getSource(this.idSource)&&i.removeSource(this.idSource)},ie.exports=function(i,r,n){var a=new b(i,r);return a.update(n),a}},5232:function(ie,F,e){"use strict";var S=e(3400),k=e(76308).defaultLine,o=e(86968).u,T=e(25376),b=e(52904).textposition,p=e(67824).overrideAll,l=e(31780).templatedArray,t=e(47552),i=T({noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0});i.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(ie.exports=p({_arrayAttrRegexps:[S.counterRegex("mapbox",".layers",!0)],domain:o({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:t.styleValuesMapbox.concat(t.styleValuesNonMapbox),dflt:t.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:l("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:k},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:k}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:i,textposition:S.extendFlat({},b,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},5976:function(ie,F,e){"use strict";var S=e(3400),k=e(168),o=e(51272),T=e(5232);function b(l,t,i,r){i("accesstoken",r.accessToken),i("style"),i("center.lon"),i("center.lat"),i("zoom"),i("bearing"),i("pitch");var n=i("bounds.west"),a=i("bounds.east"),s=i("bounds.south"),c=i("bounds.north");void 0!==n&&void 0!==a&&void 0!==s&&void 0!==c||delete t.bounds,o(l,t,{name:"layers",handleItemDefaults:p}),t._input=l}function p(l,t){function i(c,h){return S.coerce(l,t,T.layers,c,h)}if(i("visible")){var r,n=i("sourcetype"),a="raster"===n||"image"===n;i("source"),i("sourceattribution"),"vector"===n&&i("sourcelayer"),"image"===n&&i("coordinates"),a&&(r="raster");var s=i("type",r);a&&"raster"!==s&&(s=t.type="raster",S.log("Source types *raster* and *image* must drawn *raster* layer type.")),i("below"),i("color"),i("opacity"),i("minzoom"),i("maxzoom"),"circle"===s&&i("circle.radius"),"line"===s&&(i("line.width"),i("line.dash")),"fill"===s&&i("fill.outlinecolor"),"symbol"===s&&(i("symbol.icon"),i("symbol.iconsize"),i("symbol.text"),S.coerceFont(i,"symbol.textfont",void 0,{noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}),i("symbol.textposition"),i("symbol.placement"))}}ie.exports=function(l,t,i){k(l,t,i,{type:"mapbox",attributes:T,handleDefaults:b,partition:"y",accessToken:t._mapboxAccessToken})}},14440:function(ie,F,e){"use strict";var S=e(3480),k=e(3400),o=e(27144),T=e(24040),b=e(54460),p=e(86476),l=e(93024),t=e(72760),i=t.drawMode,r=t.selectMode,n=e(22676).prepSelect,a=e(22676).clearOutline,s=e(22676).clearSelectionsCache,c=e(22676).selectOnClick,h=e(47552),u=e(22360);function y(_,f){this.id=f,this.gd=_;var C=_._fullLayout,w=_._context;this.container=C._glcontainer.node(),this.isStatic=w.staticPlot,this.uid=C._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(C),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var d=y.prototype;d.plot=function(_,f,C){var w,E=this;E.map&&f[E.id].accesstoken!==E.accessToken&&(E.map.remove(),E.map=null,E.styleObj=null,E.traceHash={},E.layerList=[]),w=new Promise(E.map?function(L,O){E.updateMap(_,f,L,O)}:function(L,O){E.createMap(_,f,L,O)}),C.push(w)},d.createMap=function(_,f,C,w){var E=this,P=f[E.id],L=E.styleObj=g(P.style,f);E.accessToken=P.accesstoken;var O=P.bounds,z=O?[[O.west,O.south],[O.east,O.north]]:null,V=E.map=new S.Map({container:E.div,style:L.style,center:v(P.center),zoom:P.zoom,bearing:P.bearing,pitch:P.pitch,maxBounds:z,interactive:!E.isStatic,preserveDrawingBuffer:E.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new S.AttributionControl({compact:!0}));V._canvas.style.left="0px",V._canvas.style.top="0px",E.rejectOnError(w),E.isStatic||E.initFx(_,f);var R=[];R.push(new Promise(function(U){V.once("load",U)})),R=R.concat(o.fetchTraceGeoData(_)),Promise.all(R).then(function(){E.fillBelowLookup(_,f),E.updateData(_),E.updateLayout(f),E.resolveOnRender(C)}).catch(w)},d.updateMap=function(_,f,C,w){var E=this,P=E.map,L=f[this.id];E.rejectOnError(w);var O=[],z=g(L.style,f);JSON.stringify(E.styleObj)!==JSON.stringify(z)&&(E.styleObj=z,P.setStyle(z.style),E.traceHash={},O.push(new Promise(function(V){P.once("styledata",V)}))),O=O.concat(o.fetchTraceGeoData(_)),Promise.all(O).then(function(){E.fillBelowLookup(_,f),E.updateData(_),E.updateLayout(f),E.resolveOnRender(C)}).catch(w)},d.fillBelowLookup=function(_,f){var C,w,E=f[this.id].layers,P=this.belowLookup={},L=!1;for(C=0;C<_.length;C++){var O=_[C][0].trace,z=O._module;"string"==typeof O.below?w=O.below:z.getBelow&&(w=z.getBelow(O,this)),""===w&&(L=!0),P["trace-"+O.uid]=w||""}for(C=0;C<E.length;C++){var V=E[C];P["layout-"+C]=w="string"==typeof V.below?V.below:L?"traces":""}var R,U,Z={};for(R in P)Z[w=P[R]]?Z[w].push(R):Z[w]=[R];for(w in Z){var N=Z[w];if(N.length>1)for(C=0;C<N.length;C++)0===(R=N[C]).indexOf("trace-")?(U=R.split("trace-")[1],this.traceHash[U]&&(this.traceHash[U].below=null)):0===R.indexOf("layout-")&&(U=R.split("layout-")[1],this.layerList[U]&&(this.layerList[U].below=null))}};var m={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function g(_,f){var C={};if(k.isPlainObject(_))C.id=_.id,C.style=_;else if("string"==typeof _)if(C.id=_,-1!==h.styleValuesMapbox.indexOf(_))C.style=x(_);else if(h.stylesNonMapbox[_]){C.style=h.stylesNonMapbox[_];var w=C.style.sources["plotly-"+_],E=w?w.tiles:void 0;E&&E[0]&&"?api_key="===E[0].slice(-9)&&(E[0]+=f._mapboxAccessToken)}else C.style=_;else C.id=h.styleValueDflt,C.style=x(h.styleValueDflt);return C.transition={duration:0,delay:0},C}function x(_){return h.styleUrlPrefix+_+"-"+h.styleUrlSuffix}function v(_){return[_.lon,_.lat]}d.updateData=function(_){var f,C,w,E,P=this.traceHash,L=_.slice().sort(function(U,Z){return m[U[0].trace.type]-m[Z[0].trace.type]});for(w=0;w<L.length;w++){var O=L[w],z=!1;(f=P[(C=O[0].trace).uid])&&(f.type===C.type?(f.update(O),z=!0):f.dispose()),!z&&C._module&&(P[C.uid]=C._module.plot(this,O))}var V=Object.keys(P);e:for(w=0;w<V.length;w++){var R=V[w];for(E=0;E<_.length;E++)if(R===(C=_[E][0].trace).uid)continue e;(f=P[R]).dispose(),delete P[R]}},d.updateLayout=function(_){var f=this.map,C=_[this.id];this.dragging||this.wheeling||(f.setCenter(v(C.center)),f.setZoom(C.zoom),f.setBearing(C.bearing),f.setPitch(C.pitch)),this.updateLayers(_),this.updateFramework(_),this.updateFx(_),this.map.resize(),this.gd._context._scrollZoom.mapbox?f.scrollZoom.enable():f.scrollZoom.disable()},d.resolveOnRender=function(_){var f=this.map;f.on("render",function C(){f.loaded()&&(f.off("render",C),setTimeout(_,10))})},d.rejectOnError=function(_){var f=this.map;function C(){_(new Error(h.mapOnErrorMsg))}f.once("error",C),f.once("style.error",C),f.once("source.error",C),f.once("tile.error",C),f.once("layer.error",C)},d.createFramework=function(_){var f=this,C=f.div=document.createElement("div");C.id=f.uid,C.style.position="absolute",f.container.appendChild(C),f.xaxis={_id:"x",c2p:function(w){return f.project(w).x}},f.yaxis={_id:"y",c2p:function(w){return f.project(w).y}},f.updateFramework(_),f.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},b.setConvert(f.mockAxis,_)},d.initFx=function(_,f){var C=this,w=C.gd,E=C.map;function P(){l.loneUnhover(f._hoverlayer)}function L(){var O=C.getView();w.emit("plotly_relayouting",C.getViewEditsWithDerived(O))}E.on("moveend",function(O){if(C.map){var z=w._fullLayout;if(O.originalEvent||C.wheeling){var V=z[C.id];T.call("_storeDirectGUIEdit",w.layout,z._preGUI,C.getViewEdits(V));var R=C.getView();V._input.center=V.center=R.center,V._input.zoom=V.zoom=R.zoom,V._input.bearing=V.bearing=R.bearing,V._input.pitch=V.pitch=R.pitch,w.emit("plotly_relayout",C.getViewEditsWithDerived(R))}O.originalEvent&&"mouseup"===O.originalEvent.type?C.dragging=!1:C.wheeling&&(C.wheeling=!1),z._rehover&&z._rehover()}}),E.on("wheel",function(){C.wheeling=!0}),E.on("mousemove",function(O){var z=C.div.getBoundingClientRect(),V=[O.originalEvent.offsetX,O.originalEvent.offsetY];O.target.getBoundingClientRect=function(){return z},C.xaxis.p2c=function(){return E.unproject(V).lng},C.yaxis.p2c=function(){return E.unproject(V).lat},w._fullLayout._rehover=function(){w._fullLayout._hoversubplot===C.id&&w._fullLayout[C.id]&&l.hover(w,O,C.id)},l.hover(w,O,C.id),w._fullLayout._hoversubplot=C.id}),E.on("dragstart",function(){C.dragging=!0,P()}),E.on("zoomstart",P),E.on("mouseout",function(){w._fullLayout._hoversubplot=null}),E.on("drag",L),E.on("zoom",L),E.on("dblclick",function(){var O=w._fullLayout[C.id];T.call("_storeDirectGUIEdit",w.layout,w._fullLayout._preGUI,C.getViewEdits(O));var z=C.viewInitial;E.setCenter(v(z.center)),E.setZoom(z.zoom),E.setBearing(z.bearing),E.setPitch(z.pitch);var V=C.getView();O._input.center=O.center=V.center,O._input.zoom=O.zoom=V.zoom,O._input.bearing=O.bearing=V.bearing,O._input.pitch=O.pitch=V.pitch,w.emit("plotly_doubleclick",null),w.emit("plotly_relayout",C.getViewEditsWithDerived(V))}),C.clearOutline=function(){s(C.dragOptions),a(C.dragOptions.gd)},C.onClickInPanFn=function(O){return function(z){var V=w._fullLayout.clickmode;V.indexOf("select")>-1&&c(z.originalEvent,w,[C.xaxis],[C.yaxis],C.id,O),V.indexOf("event")>-1&&l.click(w,z.originalEvent)}}},d.updateFx=function(_){var f=this,C=f.map;if(!f.isStatic){var P=_.dragmode;f.dragOptions=k.extendDeep(f.dragOptions||{},{dragmode:_.dragmode,element:f.div,gd:f.gd,plotinfo:{id:f.id,domain:_[f.id].domain,xaxis:f.xaxis,yaxis:f.yaxis,fillRangeItems:function(z,V){V.isRect?(z.range={})[f.id]=[O([V.xmin,V.ymin]),O([V.xmax,V.ymax])]:(z.lassoPoints={})[f.id]=V.map(O)}},xaxes:[f.xaxis],yaxes:[f.yaxis],subplot:f.id}),C.off("click",f.onClickInPanHandler),r(P)||i(P)?(C.dragPan.disable(),C.on("zoomstart",f.clearOutline),f.dragOptions.prepFn=function(z,V,R){n(z,V,R,f.dragOptions,P)},p.init(f.dragOptions)):(C.dragPan.enable(),C.off("zoomstart",f.clearOutline),f.div.onmousedown=null,f.div.ontouchstart=null,f.div.removeEventListener("touchstart",f.div._ontouchstart),f.onClickInPanHandler=f.onClickInPanFn(f.dragOptions),C.on("click",f.onClickInPanHandler))}function O(z){var V=f.map.unproject(z);return[V.lng,V.lat]}},d.updateFramework=function(_){var f=_[this.id].domain,C=_._size,w=this.div.style;w.width=C.w*(f.x[1]-f.x[0])+"px",w.height=C.h*(f.y[1]-f.y[0])+"px",w.left=C.l+f.x[0]*C.w+"px",w.top=C.t+(1-f.y[1])*C.h+"px",this.xaxis._offset=C.l+f.x[0]*C.w,this.xaxis._length=C.w*(f.x[1]-f.x[0]),this.yaxis._offset=C.t+(1-f.y[1])*C.h,this.yaxis._length=C.h*(f.y[1]-f.y[0])},d.updateLayers=function(_){var f,C=_[this.id].layers,w=this.layerList;if(C.length!==w.length){for(f=0;f<w.length;f++)w[f].dispose();for(w=this.layerList=[],f=0;f<C.length;f++)w.push(u(this,f,C[f]))}else for(f=0;f<C.length;f++)w[f].update(C[f])},d.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},d.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},d.setOptions=function(_,f,C){for(var w in C)this.map[f](_,w,C[w])},d.getMapLayers=function(){return this.map.getStyle().layers},d.addLayer=function(_,f){var C=this.map;if("string"==typeof f){if(""===f)return void C.addLayer(_,f);for(var w=this.getMapLayers(),E=0;E<w.length;E++)if(f===w[E].id)return void C.addLayer(_,f);k.warn(["Trying to add layer with *below* value",f,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}C.addLayer(_)},d.project=function(_){return this.map.project(new S.LngLat(_[0],_[1]))},d.getView=function(){var _=this.map,f=_.getCenter(),C={lon:f.lng,lat:f.lat},w=_.getCanvas(),E=parseInt(w.style.width),P=parseInt(w.style.height);return{center:C,zoom:_.getZoom(),bearing:_.getBearing(),pitch:_.getPitch(),_derived:{coordinates:[_.unproject([0,0]).toArray(),_.unproject([E,0]).toArray(),_.unproject([E,P]).toArray(),_.unproject([0,P]).toArray()]}}},d.getViewEdits=function(_){for(var f=this.id,C=["center","zoom","bearing","pitch"],w={},E=0;E<C.length;E++){var P=C[E];w[f+"."+P]=_[P]}return w},d.getViewEditsWithDerived=function(_){var f=this.id,C=this.getViewEdits(_);return C[f+"._derived"]=_._derived,C},ie.exports=y},66741:function(ie){"use strict";ie.exports=function(F){var e=F.editType;return{t:{valType:"number",dflt:0,editType:e},r:{valType:"number",dflt:0,editType:e},b:{valType:"number",dflt:0,editType:e},l:{valType:"number",dflt:0,editType:e},editType:e}}},7316:function(ie,F,e){"use strict";var S=e(33428),k=e(94336).m_,o=e(57624).SO,T=e(38248),b=e(83160),p=e(24040),l=e(73060),t=e(31780),i=e(3400),r=e(76308),n=e(39032).BADNUM,a=e(79811),s=e(1936).clearOutline,c=e(55308),h=e(85656),u=e(16672),y=e(84888)._M,d=i.relinkPrivateKeys,m=i._,g=ie.exports={};i.extendFlat(g,p),g.attributes=e(45464),g.attributes.type.values=g.allTypes,g.fontAttrs=e(25376),g.layoutAttributes=e(64859);var x=g.transformsRegistry,v=e(62460);g.executeAPICommand=v.executeAPICommand,g.computeAPICommandBindings=v.computeAPICommandBindings,g.manageCommandObserver=v.manageCommandObserver,g.hasSimpleAPICommandBindings=v.hasSimpleAPICommandBindings,g.redrawText=function(N){return N=i.getGraphDiv(N),new Promise(function(G){setTimeout(function(){N._fullLayout&&(p.getComponentMethod("annotations","draw")(N),p.getComponentMethod("legend","draw")(N),p.getComponentMethod("colorbar","draw")(N),G(g.previousPromises(N)))},300)})},g.resize=function(N){var G;N=i.getGraphDiv(N);var W=new Promise(function(ae,re){N&&!i.isHidden(N)||re(new Error("Resize must be passed a displayed plot div element.")),N._redrawTimer&&clearTimeout(N._redrawTimer),N._resolveResize&&(G=N._resolveResize),N._resolveResize=ae,N._redrawTimer=setTimeout(function(){if(!N.layout||N.layout.width&&N.layout.height||i.isHidden(N))ae(N);else{delete N.layout.width,delete N.layout.height;var ne=N.changed;N.autoplay=!0,p.call("relayout",N,{autosize:!0}).then(function(){N.changed=ne,N._resolveResize===ae&&(delete N._resolveResize,ae(N))})}},100)});return G&&G(W),W},g.previousPromises=function(N){if((N._promises||[]).length)return Promise.all(N._promises).then(function(){N._promises=[]})},g.addLinks=function(N){if(N._context.showLink||N._context.showSources){var G=N._fullLayout,W=i.ensureSingle(G._paper,"text","js-plot-link-container",function(X){X.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:r.defaultLine,"pointer-events":"all"}).each(function(){var oe=S.select(this);oe.append("tspan").classed("js-link-to-tool",!0),oe.append("tspan").classed("js-link-spacer",!0),oe.append("tspan").classed("js-sourcelinks",!0)})}),ae=W.node(),re={y:G._paper.attr("height")-9};document.body.contains(ae)&&ae.getComputedTextLength()>=G.width-20?(re["text-anchor"]="start",re.x=5):(re["text-anchor"]="end",re.x=G._paper.attr("width")-7),W.attr(re);var ne=W.select(".js-link-to-tool"),Q=W.select(".js-link-spacer"),$=W.select(".js-sourcelinks");N._context.showSources&&N._context.showSources(N),N._context.showLink&&function(X,oe){oe.text("");var fe=oe.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(X._context.linkText+" "+String.fromCharCode(187));if(X._context.sendData)fe.on("click",function(){g.sendDataToCloud(X)});else{var ue=window.location.pathname.split("/"),ge=window.location.search;fe.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+ue[2].split(".")[0]+"/"+ue[1]+ge})}}(N,ne),Q.text(ne.text()&&$.text()?" - ":"")}},g.sendDataToCloud=function(N){var G=(window.PLOTLYENV||{}).BASE_URL||N._context.plotlyServerURL;if(G){N.emit("plotly_beforeexport");var W=S.select(N).append("div").attr("id","hiddenform").style("display","none"),ae=W.append("form").attr({action:G+"/external",method:"post",target:"_blank"});return ae.append("input").attr({type:"text",name:"data"}).node().value=g.graphJson(N,!1,"keepdata"),ae.node().submit(),W.remove(),N.emit("plotly_afterexport"),!1}};var _=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],f=["year","month","dayMonth","dayMonthYear"];function C(N,G){var W=N._context.locale;W||(W="en-US");var ae=!1,re={};function ne(ue){for(var ge=!0,we=0;we<G.length;we++){var Te=G[we];re[Te]||(ue[Te]?re[Te]=ue[Te]:ge=!1)}ge&&(ae=!0)}for(var Q=0;Q<2;Q++){for(var $=N._context.locales,X=0;X<2;X++){var oe=($[W]||{}).format;if(oe&&(ne(oe),ae))break;$=p.localeRegistry}var fe=W.split("-")[0];if(ae||fe===W)break;W=fe}return ae||ne(p.localeRegistry.en.format),re}function w(N,G){var W={_fullLayout:G},ae="x"===N._id.charAt(0),re=N._mainAxis._anchorAxis,ne="",Q="",$="";if(re&&($=re._mainAxis._id,ne=ae?N._id+$:$+N._id),!ne||!G._plots[ne]){ne="";for(var X=N._counterAxes,oe=0;oe<X.length;oe++){var fe=X[oe],ue=ae?N._id+fe:fe+N._id;Q||(Q=ue);var ge=a.getFromId(W,fe);if($&&ge.overlaying===$){ne=ue;break}}}return ne||Q}function E(N){var G=N.transforms;if(Array.isArray(G)&&G.length)for(var W=0;W<G.length;W++){var ae=G[W],re=ae._module||x[ae.type];if(re&&re.makesData)return!0}return!1}function P(N,G,W,ae){for(var re=N.transforms,ne=[N],Q=0;Q<re.length;Q++){var $=re[Q],X=x[$.type];X&&X.transform&&(ne=X.transform(ne,{transform:$,fullTrace:N,fullData:G,layout:W,fullLayout:ae,transformIndex:Q}))}return ne}function L(N){return"string"==typeof N&&"px"===N.substr(N.length-2)&&parseFloat(N)}function O(N){var G=N.margin;if(!N._size){var W=N._size={l:Math.round(G.l),r:Math.round(G.r),t:Math.round(G.t),b:Math.round(G.b),p:Math.round(G.pad)};W.w=Math.round(N.width)-W.l-W.r,W.h=Math.round(N.height)-W.t-W.b}N._pushmargin||(N._pushmargin={}),N._pushmarginIds||(N._pushmarginIds={}),N._reservedMargin||(N._reservedMargin={})}g.supplyDefaults=function(N,G){var ze,qe,W=G&&G.skipUpdateCalc,ae=N._fullLayout||{};if(ae._skipDefaults)delete ae._skipDefaults;else{var re,ne=N._fullLayout={},Q=N.layout||{},$=N._fullData||[],X=N._fullData=[],oe=N.data||[],fe=N.calcdata||[],ue=N._context||{};N._transitionData||g.createTransitionData(N),ne._dfltTitle={plot:m(N,"Click to enter Plot title"),x:m(N,"Click to enter X axis title"),y:m(N,"Click to enter Y axis title"),colorbar:m(N,"Click to enter Colorscale title"),annotation:m(N,"new text")},ne._traceWord=m(N,"trace");var ge=C(N,_);if(ne._mapboxAccessToken=ue.mapboxAccessToken,ae._initialAutoSizeIsDone){var we=ae.width,Te=ae.height;g.supplyLayoutGlobalDefaults(Q,ne,ge),Q.width||(ne.width=we),Q.height||(ne.height=Te),g.sanitizeMargins(ne)}else{g.supplyLayoutGlobalDefaults(Q,ne,ge);var xe=!Q.width||!Q.height,ye=ne.autosize;xe&&(ye||ue.autosizable)?g.plotAutoSize(N,Q,ne):xe&&g.sanitizeMargins(ne),!ye&&xe&&(Q.width=ne.width,Q.height=ne.height)}ne._d3locale=((ze=ge).decimal=(qe=ne.separators).charAt(0),ze.thousands=qe.charAt(1),{numberFormat:function(Ke){try{Ke=o(ze).format(i.adjustFormat(Ke))}catch{return i.warnBadFormat(Ke),i.noFormat}return Ke},timeFormat:k(ze).utcFormat}),ne._extraFormat=C(N,f),ne._initialAutoSizeIsDone=!0,ne._dataLength=oe.length,ne._modules=[],ne._visibleModules=[],ne._basePlotModules=[];var Ie=ne._subplots=function(){var ze,qe,Ke=p.collectableSubplotTypes,it={};if(!Ke){Ke=[];var ft=p.subplotsRegistry;for(var dt in ft){var kt=ft[dt].attr;if(kt&&(Ke.push(dt),Array.isArray(kt)))for(qe=0;qe<kt.length;qe++)i.pushUnique(Ke,kt[qe])}}for(ze=0;ze<Ke.length;ze++)it[Ke[ze]]=[];return it}(),De=ne._splomAxes={x:{},y:{}},be=ne._splomSubplots={};ne._splomGridDflt={},ne._scatterStackOpts={},ne._firstScatter={},ne._alignmentOpts={},ne._colorAxes={},ne._requestRangeslider={},ne._traceUids=function(ze,qe){var Ke,it,ft=qe.length,dt=[];for(Ke=0;Ke<ze.length;Ke++){var kt=ze[Ke]._fullInput;kt!==it&&dt.push(kt),it=kt}var St=dt.length,Tt=new Array(ft),lt={};function ot(Ht,zt){Tt[zt]=Ht,lt[Ht]=1}function Rt(Ht,zt){if(Ht&&"string"==typeof Ht&&!lt[Ht])return ot(Ht,zt),!0}for(Ke=0;Ke<ft;Ke++){var Vt=qe[Ke].uid;"number"==typeof Vt&&(Vt=String(Vt)),Rt(Vt,Ke)||Ke<St&&Rt(dt[Ke].uid,Ke)||ot(i.randstr(lt),Ke)}return Tt}($,oe),ne._globalTransforms=(N._context||{}).globalTransforms,g.supplyDataDefaults(oe,X,Q,ne);var he=Object.keys(De.x),ce=Object.keys(De.y);if(he.length>1&&ce.length>1){for(p.getComponentMethod("grid","sizeDefaults")(Q,ne),re=0;re<he.length;re++)i.pushUnique(Ie.xaxis,he[re]);for(re=0;re<ce.length;re++)i.pushUnique(Ie.yaxis,ce[re]);for(var me in be)i.pushUnique(Ie.cartesian,me)}if(ne._has=g._hasPlotType.bind(ne),$.length===X.length)for(re=0;re<X.length;re++)d(X[re],$[re]);g.supplyLayoutModuleDefaults(Q,ne,X,N._transitionData);var Pe=ne._visibleModules,Ae=[];for(re=0;re<Pe.length;re++){var Ce=Pe[re].crossTraceDefaults;Ce&&i.pushUnique(Ae,Ce)}for(re=0;re<Ae.length;re++)Ae[re](X,ne);ne._hasOnlyLargeSploms=1===ne._basePlotModules.length&&"splom"===ne._basePlotModules[0].name&&he.length>15&&ce.length>15&&0===ne.shapes.length&&0===ne.images.length,g.linkSubplots(X,ne,$,ae),g.cleanPlot(X,ne,$,ae);var Oe=!(!ae._has||!ae._has("gl2d")),Ne=!(!ne._has||!ne._has("gl2d")),je=!(!ae._has||!ae._has("cartesian"))||Oe,ve=!(!ne._has||!ne._has("cartesian"))||Ne;je&&!ve?ae._bgLayer.remove():ve&&!je&&(ne._shouldCreateBgLayer=!0),ae._zoomlayer&&!N._dragging&&s({_fullLayout:ae}),function(ze,qe){var Ke,it=[];qe.meta&&(Ke=qe._meta={meta:qe.meta,layout:{meta:qe.meta}});for(var ft=0;ft<ze.length;ft++){var dt=ze[ft];dt.meta?it[dt.index]=dt._meta={meta:dt.meta}:qe.meta&&(dt._meta={meta:qe.meta}),qe.meta&&(dt._meta.layout={meta:qe.meta})}it.length&&(Ke||(Ke=qe._meta={}),Ke.data=it)}(X,ne),d(ne,ae),p.getComponentMethod("colorscale","crossTraceDefaults")(X,ne),ne._preGUI||(ne._preGUI={}),ne._tracePreGUI||(ne._tracePreGUI={});var Me,Le=ne._tracePreGUI,Ue={};for(Me in Le)Ue[Me]="old";for(re=0;re<X.length;re++)Ue[Me=X[re]._fullInput.uid]||(Le[Me]={}),Ue[Me]="new";for(Me in Ue)"old"===Ue[Me]&&delete Le[Me];O(ne),p.getComponentMethod("rangeslider","makeData")(ne),W||fe.length!==X.length||g.supplyDefaultsUpdateCalc(fe,X)}},g.supplyDefaultsUpdateCalc=function(N,G){for(var W=0;W<G.length;W++){var ae=G[W],re=(N[W]||[])[0];if(re&&re.trace){var ne=re.trace;if(ne._hasCalcTransform){var Q,$,X,oe=ne._arrayAttrs;for(Q=0;Q<oe.length;Q++)X=i.nestedProperty(ne,$=oe[Q]).get().slice(),i.nestedProperty(ae,$).set(X)}re.trace=ae}}},g.createTransitionData=function(N){N._transitionData||(N._transitionData={}),N._transitionData._frames||(N._transitionData._frames=[]),N._transitionData._frameHash||(N._transitionData._frameHash={}),N._transitionData._counter||(N._transitionData._counter=0),N._transitionData._interruptCallbacks||(N._transitionData._interruptCallbacks=[])},g._hasPlotType=function(N){var G,W=this._basePlotModules||[];for(G=0;G<W.length;G++)if(W[G].name===N)return!0;var ae=this._modules||[];for(G=0;G<ae.length;G++){var re=ae[G].name;if(re===N)return!0;var ne=p.modules[re];if(ne&&ne.categories[N])return!0}return!1},g.cleanPlot=function(N,G,W,ae){var re,ne,Q=ae._basePlotModules||[];for(re=0;re<Q.length;re++){var $=Q[re];$.clean&&$.clean(N,G,W,ae)}var X=ae._has&&ae._has("gl"),oe=G._has&&G._has("gl");X&&!oe&&void 0!==ae._glcontainer&&(ae._glcontainer.selectAll(".gl-canvas").remove(),ae._glcontainer.selectAll(".no-webgl").remove(),ae._glcanvas=null);var fe=!!ae._infolayer;e:for(re=0;re<W.length;re++){var ue=W[re].uid;for(ne=0;ne<N.length;ne++)if(ue===N[ne].uid)continue e;fe&&ae._infolayer.select(".cb"+ue).remove()}},g.linkSubplots=function(N,G,W,ae){var re,ne,Q=ae._plots||{},$=G._plots={},X=G._subplots,oe={_fullData:N,_fullLayout:G},fe=X.cartesian.concat(X.gl2d||[]);for(re=0;re<fe.length;re++){var ue,ge=fe[re],we=Q[ge],Te=a.getFromId(oe,ge,"x"),xe=a.getFromId(oe,ge,"y");for(we?ue=$[ge]=we:(ue=$[ge]={}).id=ge,Te._counterAxes.push(xe._id),xe._counterAxes.push(Te._id),Te._subplotsWith.push(ge),xe._subplotsWith.push(ge),ue.xaxis=Te,ue.yaxis=xe,ue._hasClipOnAxisFalse=!1,ne=0;ne<N.length;ne++){var ye=N[ne];if(ye.xaxis===ue.xaxis._id&&ye.yaxis===ue.yaxis._id&&!1===ye.cliponaxis){ue._hasClipOnAxisFalse=!0;break}}}var _e,Ie=a.list(oe,null,!0);for(re=0;re<Ie.length;re++){var De=null;(_e=Ie[re]).overlaying&&(De=a.getFromId(oe,_e.overlaying))&&De.overlaying&&(_e.overlaying=!1,De=null),_e._mainAxis=De||_e,De&&(_e.domain=De.domain.slice()),_e._anchorAxis="free"===_e.anchor?null:a.getFromId(oe,_e.anchor)}for(re=0;re<Ie.length;re++)if((_e=Ie[re])._counterAxes.sort(a.idSort),_e._subplotsWith.sort(i.subplotSort),_e._mainSubplot=w(_e,G),_e._counterAxes.length&&(_e.spikemode&&-1!==_e.spikemode.indexOf("across")||_e.automargin&&_e.mirror&&"free"!==_e.anchor||p.getComponentMethod("rangeslider","isVisible")(_e))){var be=1,he=0;for(ne=0;ne<_e._counterAxes.length;ne++){var ce=a.getFromId(oe,_e._counterAxes[ne]);be=Math.min(be,ce.domain[0]),he=Math.max(he,ce.domain[1])}be<he&&(_e._counterDomainMin=be,_e._counterDomainMax=he)}},g.clearExpandedTraceDefaultColors=function(N){var G,W,ae;for(W=[],(G=N._module._colorAttrs)||(N._module._colorAttrs=G=[],l.crawl(N._module.attributes,function(re,ne,Q,$){W[$]=ne,W.length=$+1,"color"===re.valType&&void 0===re.dflt&&G.push(W.join("."))})),ae=0;ae<G.length;ae++)i.nestedProperty(N,"_input."+G[ae]).get()||i.nestedProperty(N,G[ae]).set(null)},g.supplyDataDefaults=function(N,G,W,ae){var re,ne,Q,$=ae._modules,X=ae._visibleModules,oe=ae._basePlotModules,fe=0,ue=0;function ge(me){G.push(me);var Pe=me._module;Pe&&(i.pushUnique($,Pe),!0===me.visible&&i.pushUnique(X,Pe),i.pushUnique(oe,me._module.basePlotModule),fe++,!1!==me._input.visible&&ue++)}ae._transformModules=[];var we={},Te=[],ye=t.traceTemplater((W.template||{}).data||{});for(re=0;re<N.length;re++){if((ne=ye.newTrace(Q=N[re])).uid=ae._traceUids[re],g.supplyTraceDefaults(Q,ne,ue,ae,re),ne.index=re,ne._input=Q,ne._expandedIndex=fe,ne.transforms&&ne.transforms.length)for(var _e=!1!==Q.visible&&!1===ne.visible,Ie=P(ne,G,W,ae),De=0;De<Ie.length;De++){var be=Ie[De],he={_template:ne._template,type:ne.type,uid:ne.uid+De};_e&&!1===be.visible&&delete be.visible,g.supplyTraceDefaults(be,he,fe,ae,re),d(he,be),he.index=re,he._input=Q,he._fullInput=ne,he._expandedIndex=fe,he._expandedInput=be,ge(he)}else ne._fullInput=ne,ne._expandedInput=ne,ge(ne);p.traceIs(ne,"carpetAxis")&&(we[ne.carpet]=ne),p.traceIs(ne,"carpetDependent")&&Te.push(re)}for(re=0;re<Te.length;re++)if((ne=G[Te[re]]).visible){var ce=we[ne.carpet];ne._carpet=ce,ce&&ce.visible?(ne.xaxis=ce.xaxis,ne.yaxis=ce.yaxis):ne.visible=!1}},g.supplyAnimationDefaults=function(N){var G;N=N||{};var W={};function ae(re,ne){return i.coerce(N||{},W,h,re,ne)}if(ae("mode"),ae("direction"),ae("fromcurrent"),Array.isArray(N.frame))for(W.frame=[],G=0;G<N.frame.length;G++)W.frame[G]=g.supplyAnimationFrameDefaults(N.frame[G]||{});else W.frame=g.supplyAnimationFrameDefaults(N.frame||{});if(Array.isArray(N.transition))for(W.transition=[],G=0;G<N.transition.length;G++)W.transition[G]=g.supplyAnimationTransitionDefaults(N.transition[G]||{});else W.transition=g.supplyAnimationTransitionDefaults(N.transition||{});return W},g.supplyAnimationFrameDefaults=function(N){var G={};function W(ae,re){return i.coerce(N||{},G,h.frame,ae,re)}return W("duration"),W("redraw"),G},g.supplyAnimationTransitionDefaults=function(N){var G={};function W(ae,re){return i.coerce(N||{},G,h.transition,ae,re)}return W("duration"),W("easing"),G},g.supplyFrameDefaults=function(N){var G={};function W(ae,re){return i.coerce(N,G,u,ae,re)}return W("group"),W("name"),W("traces"),W("baseframe"),W("data"),W("layout"),G},g.supplyTraceDefaults=function(N,G,W,ae,re){var ne,Q=ae.colorway||r.defaults,$=Q[W%Q.length];function X(De,be){return i.coerce(N,G,g.attributes,De,be)}var oe=X("visible");X("type"),X("name",ae._traceWord+" "+re),X("uirevision",ae.uirevision);var fe=g.getModule(G);if(G._module=fe,fe){var ue=fe.basePlotModule,ge=ue.attr,we=ue.attributes;if(ge&&we){var Te=ae._subplots,xe="";if(oe||"gl2d"!==ue.name){if(Array.isArray(ge))for(ne=0;ne<ge.length;ne++){var ye=ge[ne],_e=i.coerce(N,G,we,ye);Te[ye]&&i.pushUnique(Te[ye],_e),xe+=_e}else xe=i.coerce(N,G,we,ge);Te[ue.name]&&i.pushUnique(Te[ue.name],xe)}}}if(oe){if(X("customdata"),X("ids"),X("meta"),p.traceIs(G,"showLegend")?(i.coerce(N,G,fe.attributes.showlegend?fe.attributes:g.attributes,"showlegend"),X("legend"),X("legendwidth"),X("legendgroup"),X("legendgrouptitle.text"),X("legendrank"),G._dfltShowLegend=!0):G._dfltShowLegend=!1,fe&&fe.supplyDefaults(N,G,$,ae),p.traceIs(G,"noOpacity")||X("opacity"),p.traceIs(G,"notLegendIsolatable")&&(G.visible=!!G.visible),p.traceIs(G,"noHover")||(G.hovertemplate||i.coerceHoverinfo(N,G,ae),"parcats"!==G.type&&p.getComponentMethod("fx","supplyDefaults")(N,G,$,ae)),fe&&fe.selectPoints){var Ie=X("selectedpoints");i.isTypedArray(Ie)&&(G.selectedpoints=Array.from(Ie))}g.supplyTransformDefaults(N,G,ae)}return G},g.hasMakesDataTransform=E,g.supplyTransformDefaults=function(N,G,W){if(G._length||E(N)){var ae=W._globalTransforms||[],re=W._transformModules||[];if(Array.isArray(N.transforms)||0!==ae.length)for(var Q=ae.concat(N.transforms||[]),$=G.transforms=[],X=0;X<Q.length;X++){var oe,fe=Q[X],ue=fe.type,ge=x[ue],we=!(fe._module&&fe._module===ge),Te=ge&&"function"==typeof ge.transform;ge||i.warn("Unrecognized transform type "+ue+"."),ge&&ge.supplyDefaults&&(we||Te)?((oe=ge.supplyDefaults(fe,G,W,N)).type=ue,oe._module=ge,i.pushUnique(re,ge)):oe=i.extendFlat({},fe),$.push(oe)}}},g.supplyLayoutGlobalDefaults=function(N,G,W){function ae(fe,ue){return i.coerce(N,G,g.layoutAttributes,fe,ue)}var re=N.template;i.isPlainObject(re)&&(G.template=re,G._template=re.layout,G._dataTemplate=re.data),ae("autotypenumbers");var ne=i.coerceFont(ae,"font");i.coerceFont(ae,"title.font",ne,{overrideDflt:{size:Math.round(1.4*ne.size)}}),ae("title.text",G._dfltTitle.plot),ae("title.xref");var $=ae("title.yref");ae("title.pad.t"),ae("title.pad.r"),ae("title.pad.b"),ae("title.pad.l");var X=ae("title.automargin");ae("title.x"),ae("title.xanchor"),ae("title.y"),ae("title.yanchor"),X&&("paper"===$&&(0!==G.title.y&&(G.title.y=1),"auto"===G.title.yanchor&&(G.title.yanchor=0===G.title.y?"top":"bottom")),"container"===$&&("auto"===G.title.y&&(G.title.y=1),"auto"===G.title.yanchor&&(G.title.yanchor=G.title.y<.5?"bottom":"top"))),ae("uniformtext.mode")&&ae("uniformtext.minsize"),ae("autosize",!(N.width&&N.height)),ae("width"),ae("height"),ae("minreducedwidth"),ae("minreducedheight"),ae("margin.l"),ae("margin.r"),ae("margin.t"),ae("margin.b"),ae("margin.pad"),ae("margin.autoexpand"),N.width&&N.height&&g.sanitizeMargins(G),p.getComponentMethod("grid","sizeDefaults")(N,G),ae("paper_bgcolor"),ae("separators",W.decimal+W.thousands),ae("hidesources"),ae("colorway"),ae("datarevision");var oe=ae("uirevision");ae("editrevision",oe),ae("selectionrevision",oe),p.getComponentMethod("modebar","supplyLayoutDefaults")(N,G),p.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(N,G,ae),p.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(N,G,ae),ae("meta"),i.isPlainObject(N.transition)&&(ae("transition.duration"),ae("transition.easing"),ae("transition.ordering")),p.getComponentMethod("calendars","handleDefaults")(N,G,"calendar"),p.getComponentMethod("fx","supplyLayoutGlobalDefaults")(N,G,ae),i.coerce(N,G,c,"scattermode")},g.plotAutoSize=function(N,G,W){var ae,re,ne=N._context||{},Q=ne.frameMargins,$=i.isPlotDiv(N);if($&&N.emit("plotly_autosize"),ne.fillFrame)ae=window.innerWidth,re=window.innerHeight,document.body.style.overflow="hidden";else{var X=$?window.getComputedStyle(N):{};if(ae=L(X.width)||L(X.maxWidth)||W.width,re=L(X.height)||L(X.maxHeight)||W.height,T(Q)&&Q>0){var oe=1-2*Q;ae=Math.round(oe*ae),re=Math.round(oe*re)}}var fe=g.layoutAttributes.width.min,ue=g.layoutAttributes.height.min;ae<fe&&(ae=fe),re<ue&&(re=ue);var ge=!G.width&&Math.abs(W.width-ae)>1,we=!G.height&&Math.abs(W.height-re)>1;(we||ge)&&(ge&&(W.width=ae),we&&(W.height=re)),N._initialAutoSize||(N._initialAutoSize={width:ae,height:re}),g.sanitizeMargins(W)},g.supplyLayoutModuleDefaults=function(N,G,W,ae){var re,ne,Q,$=p.componentsRegistry,X=G._basePlotModules,oe=p.subplotsRegistry.cartesian;for(re in $)(Q=$[re]).includeBasePlot&&Q.includeBasePlot(N,G);for(var fe in X.length||X.push(oe),G._has("cartesian")&&(p.getComponentMethod("grid","contentDefaults")(N,G),oe.finalizeSubplots(N,G)),G._subplots)G._subplots[fe].sort(i.subplotSort);for(ne=0;ne<X.length;ne++)(Q=X[ne]).supplyLayoutDefaults&&Q.supplyLayoutDefaults(N,G,W);var ue=G._modules;for(ne=0;ne<ue.length;ne++)(Q=ue[ne]).supplyLayoutDefaults&&Q.supplyLayoutDefaults(N,G,W);var ge=G._transformModules;for(ne=0;ne<ge.length;ne++)(Q=ge[ne]).supplyLayoutDefaults&&Q.supplyLayoutDefaults(N,G,W,ae);for(re in $)(Q=$[re]).supplyLayoutDefaults&&Q.supplyLayoutDefaults(N,G,W)},g.purge=function(N){var G=N._fullLayout||{};void 0!==G._glcontainer&&(G._glcontainer.selectAll(".gl-canvas").remove(),G._glcontainer.remove(),G._glcanvas=null),G._modeBar&&G._modeBar.destroy(),N._transitionData&&(N._transitionData._interruptCallbacks&&(N._transitionData._interruptCallbacks.length=0),N._transitionData._animationRaf&&window.cancelAnimationFrame(N._transitionData._animationRaf)),i.clearThrottle(),i.clearResponsive(N),delete N.data,delete N.layout,delete N._fullData,delete N._fullLayout,delete N.calcdata,delete N.empty,delete N.fid,delete N.undoqueue,delete N.undonum,delete N.autoplay,delete N.changed,delete N._promises,delete N._redrawTimer,delete N._hmlumcount,delete N._hmpixcount,delete N._transitionData,delete N._transitioning,delete N._initialAutoSize,delete N._transitioningWithDuration,delete N._dragging,delete N._dragged,delete N._dragdata,delete N._hoverdata,delete N._snapshotInProgress,delete N._editing,delete N._mouseDownTime,delete N._legendMouseDownTime,N.removeAllListeners&&N.removeAllListeners()},g.style=function(N){var G,W=N._fullLayout._visibleModules,ae=[];for(G=0;G<W.length;G++){var re=W[G];re.style&&i.pushUnique(ae,re.style)}for(G=0;G<ae.length;G++)ae[G](N)},g.sanitizeMargins=function(N){if(N&&N.margin){var G,W=N.width,ae=N.height,re=N.margin,Q=ae-(re.t+re.b);W-(re.l+re.r)<0&&(G=(W-1)/(re.l+re.r),re.l=Math.floor(G*re.l),re.r=Math.floor(G*re.r)),Q<0&&(G=(ae-1)/(re.t+re.b),re.t=Math.floor(G*re.t),re.b=Math.floor(G*re.b))}},g.clearAutoMarginIds=function(N){N._fullLayout._pushmarginIds={}},g.allowAutoMargin=function(N,G){N._fullLayout._pushmarginIds[G]=1},g.autoMargin=function(N,G,W){var ae=N._fullLayout,re=ae.width,ne=ae.height,Q=ae.margin,X=ae.minreducedheight,oe=i.constrain(re-Q.l-Q.r,2,ae.minreducedwidth),fe=i.constrain(ne-Q.t-Q.b,2,X),ue=Math.max(0,re-oe),ge=Math.max(0,ne-fe),we=ae._pushmargin,Te=ae._pushmarginIds;if(!1!==Q.autoexpand){if(W){var xe=W.pad;if(void 0===xe&&(xe=Math.min(12,Q.l,Q.r,Q.t,Q.b)),ue){var ye=(W.l+W.r)/ue;ye>1&&(W.l/=ye,W.r/=ye)}if(ge){var _e=(W.t+W.b)/ge;_e>1&&(W.t/=_e,W.b/=_e)}we[G]={l:{val:void 0!==W.xl?W.xl:W.x,size:W.l+xe},r:{val:void 0!==W.xr?W.xr:W.x,size:W.r+xe},b:{val:void 0!==W.yb?W.yb:W.y,size:W.b+xe},t:{val:void 0!==W.yt?W.yt:W.y,size:W.t+xe}},Te[G]=1}else delete we[G],delete Te[G];if(!ae._replotting)return g.doAutoMargin(N)}},g.doAutoMargin=function(N){var G=N._fullLayout,W=G.width,ae=G.height;G._size||(G._size={}),O(G);var re=G._size,ne=G.margin,Q={t:0,b:0,l:0,r:0},$=i.extendFlat({},re),X=ne.l,oe=ne.r,fe=ne.t,ue=ne.b,ge=G._pushmargin,we=G._pushmarginIds,Te=G.minreducedwidth,xe=G.minreducedheight;if(!1!==ne.autoexpand){for(var ye in ge)we[ye]||delete ge[ye];var _e=N._fullLayout._reservedMargin;for(var Ie in _e)for(var De in _e[Ie])Q[De]=Math.max(Q[De],_e[Ie][De]);for(var he in ge.base={l:{val:0,size:X},r:{val:1,size:oe},t:{val:1,size:fe},b:{val:0,size:ue}},Q){var ce=0;for(var me in ge)"base"!==me&&T(ge[me][he].size)&&(ce=ge[me][he].size>ce?ge[me][he].size:ce);var Pe=Math.max(0,ne[he]-ce);Q[he]=Math.max(0,Q[he]-Pe)}for(var Ae in ge){var Ce=ge[Ae].l||{},Oe=ge[Ae].b||{},Ne=Ce.val,je=Ce.size,ve=Oe.val,Me=Oe.size,Le=W-Q.r-Q.l,Ue=ae-Q.t-Q.b;for(var ze in ge){if(T(je)&&ge[ze].r){var qe=ge[ze].r.val,Ke=ge[ze].r.size;if(qe>Ne){var it=(je*qe+(Ke-Le)*Ne)/(qe-Ne),ft=(Ke*(1-Ne)+(je-Le)*(1-qe))/(qe-Ne);it+ft>X+oe&&(X=it,oe=ft)}}if(T(Me)&&ge[ze].t){var dt=ge[ze].t.val,kt=ge[ze].t.size;if(dt>ve){var St=(Me*dt+(kt-Ue)*ve)/(dt-ve),Tt=(kt*(1-ve)+(Me-Ue)*(1-dt))/(dt-ve);St+Tt>ue+fe&&(ue=St,fe=Tt)}}}}}var We,lt=i.constrain(W-ne.l-ne.r,2,Te),ot=i.constrain(ae-ne.t-ne.b,2,xe),Rt=Math.max(0,W-lt),Vt=Math.max(0,ae-ot);if(Rt){var Ht=(X+oe)/Rt;Ht>1&&(X/=Ht,oe/=Ht)}if(Vt){var zt=(ue+fe)/Vt;zt>1&&(ue/=zt,fe/=zt)}if(re.l=Math.round(X)+Q.l,re.r=Math.round(oe)+Q.r,re.t=Math.round(fe)+Q.t,re.b=Math.round(ue)+Q.b,re.p=Math.round(ne.pad),re.w=Math.round(W)-re.l-re.r,re.h=Math.round(ae)-re.t-re.b,!G._replotting&&(g.didMarginChange($,re)||function(nt){if("_redrawFromAutoMarginCount"in nt._fullLayout)return!1;var We=a.list(nt,"",!0);for(var et in We)if(We[et].autoshift||We[et].shift)return!0;return!1}(N))){"_redrawFromAutoMarginCount"in G?G._redrawFromAutoMarginCount++:G._redrawFromAutoMarginCount=1;var Qe=3*(1+Object.keys(we).length);if(G._redrawFromAutoMarginCount<Qe)return p.call("_doPlot",N);G._size=$,i.warn("Too many auto-margin redraws.")}We=a.list(N,"",!0),["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(et){for(var gt=0;gt<We.length;gt++){var ht=We[gt][et];ht&&ht()}})};var z=["l","r","t","b","p","w","h"];function V(N,G,W){var ae=!1,ne=i.syncOrAsync([g.previousPromises,function(){if(N._transitionData)return N._transitioning=!1,function(Q){var $=Promise.resolve();if(!Q)return $;for(;Q.length;)$=$.then(Q.shift());return $}(N._transitionData._interruptCallbacks)},W.prepareFn,g.rehover,g.reselect,function(){return N.emit("plotly_transitioning",[]),new Promise(function(Q){N._transitioning=!0,G.duration>0&&(N._transitioningWithDuration=!0),N._transitionData._interruptCallbacks.push(function(){ae=!0}),W.redraw&&N._transitionData._interruptCallbacks.push(function(){return p.call("redraw",N)}),N._transitionData._interruptCallbacks.push(function(){N.emit("plotly_transitioninterrupted",[])});var $=0,X=0;function oe(){return $++,function(){var fe;X++,ae||X!==$||(fe=Q,N._transitionData&&(function(ue){if(ue)for(;ue.length;)ue.shift()}(N._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(W.redraw)return p.call("redraw",N)}).then(function(){N._transitioning=!1,N._transitioningWithDuration=!1,N.emit("plotly_transitioned",[])}).then(fe)))}}W.runFn(oe),setTimeout(oe())})}],N);return ne&&ne.then||(ne=Promise.resolve()),ne.then(function(){return N})}g.didMarginChange=function(N,G){for(var W=0;W<z.length;W++){var ae=z[W],re=N[ae],ne=G[ae];if(!T(re)||Math.abs(ne-re)>1)return!0}return!1},g.graphJson=function(N,G,W,ae,re,ne){(re&&G&&!N._fullData||re&&!G&&!N._fullLayout)&&g.supplyDefaults(N);var $=re?N._fullLayout:N.layout,X=(N._transitionData||{})._frames;function oe(ge,we){if("function"==typeof ge)return we?"_function_":null;if(i.isPlainObject(ge)){var Te,xe={};return Object.keys(ge).sort().forEach(function(De){if(-1===["_","["].indexOf(De.charAt(0)))if("function"!=typeof ge[De]){if("keepdata"===W){if("src"===De.substr(De.length-3))return}else if("keepstream"===W){if("string"==typeof(Te=ge[De+"src"])&&Te.indexOf(":")>0&&!i.isPlainObject(ge.stream))return}else if("keepall"!==W&&"string"==typeof(Te=ge[De+"src"])&&Te.indexOf(":")>0)return;xe[De]=oe(ge[De],we)}else we&&(xe[De]="_function")}),xe}var ye=Array.isArray(ge),_e=i.isTypedArray(ge);if((ye||_e)&&ge.dtype&&ge.shape){var Ie=ge.bdata;return oe({dtype:ge.dtype,shape:ge.shape,bdata:i.isArrayBuffer(Ie)?b.encode(Ie):Ie},we)}return ye?ge.map(function(De){return oe(De,we)}):_e?i.simpleMap(ge,i.identity):i.isJSDate(ge)?i.ms2DateTimeLocal(+ge):ge}var fe={data:((re?N._fullData:N.data)||[]).map(function(ge){var we=oe(ge);return G&&delete we.fit,we})};if(!G&&(fe.layout=oe($),re)){var ue=$._size;fe.layout.computed={margin:{b:ue.b,l:ue.l,r:ue.r,t:ue.t}}}return X&&(fe.frames=oe(X)),ne&&(fe.config=oe(N._context,!0)),"object"===ae?fe:JSON.stringify(fe)},g.modifyFrames=function(N,G){var W,ae,re,ne=N._transitionData._frames,Q=N._transitionData._frameHash;for(W=0;W<G.length;W++)switch((ae=G[W]).type){case"replace":var $=(ne[ae.index]||{}).name,X=(re=ae.value).name;ne[ae.index]=Q[X]=re,X!==$&&(delete Q[$],Q[X]=re);break;case"insert":Q[(re=ae.value).name]=re,ne.splice(ae.index,0,re);break;case"delete":delete Q[(re=ne[ae.index]).name],ne.splice(ae.index,1)}return Promise.resolve()},g.computeFrame=function(N,G){var W,ae,re,ne,Q=N._transitionData._frameHash;if(!G)throw new Error("computeFrame must be given a string frame name");var $=Q[G.toString()];if(!$)return!1;for(var X=[$],oe=[$.name];$.baseframe&&($=Q[$.baseframe.toString()])&&-1===oe.indexOf($.name);)X.push($),oe.push($.name);for(var fe={};$=X.pop();)if($.layout&&(fe.layout=g.extendLayout(fe.layout,$.layout)),$.data){if(fe.data||(fe.data=[]),!(ae=$.traces))for(ae=[],W=0;W<$.data.length;W++)ae[W]=W;for(fe.traces||(fe.traces=[]),W=0;W<$.data.length;W++)null!=(re=ae[W])&&(-1===(ne=fe.traces.indexOf(re))&&(fe.traces[ne=fe.data.length]=re),fe.data[ne]=g.extendTrace(fe.data[ne],$.data[W]))}return fe},g.recomputeFrameHash=function(N){for(var G=N._transitionData._frameHash={},W=N._transitionData._frames,ae=0;ae<W.length;ae++){var re=W[ae];re&&re.name&&(G[re.name]=re)}},g.extendObjectWithContainers=function(N,G,W){var ae,re,ne,Q,$,X,oe,fe=i.extendDeepNoArrays({},G||{}),ue=i.expandObjectPaths(fe),ge={};if(W&&W.length)for(ne=0;ne<W.length;ne++)void 0===(re=(ae=i.nestedProperty(ue,W[ne])).get())?i.nestedProperty(ge,W[ne]).set(null):(ae.set(null),i.nestedProperty(ge,W[ne]).set(re));if(N=i.extendDeepNoArrays(N||{},ue),W&&W.length)for(ne=0;ne<W.length;ne++)if(X=i.nestedProperty(ge,W[ne]).get()){for(oe=($=i.nestedProperty(N,W[ne])).get(),Array.isArray(oe)||$.set(oe=[]),Q=0;Q<X.length;Q++){var we=X[Q];oe[Q]=null===we?null:g.extendObjectWithContainers(oe[Q],we)}$.set(oe)}return N},g.dataArrayContainers=["transforms","dimensions"],g.layoutArrayContainers=p.layoutArrayContainers,g.extendTrace=function(N,G){return g.extendObjectWithContainers(N,G,g.dataArrayContainers)},g.extendLayout=function(N,G){return g.extendObjectWithContainers(N,G,g.layoutArrayContainers)},g.transition=function(N,G,W,ae,re,ne){var Q={redraw:re.redraw},$={},X=[];return Q.prepareFn=function(){for(var oe=Array.isArray(G)?G.length:0,fe=ae.slice(0,oe),ue=0;ue<fe.length;ue++){var ge=fe[ue],we=N._fullData[ge]._module;if(we){if(we.animatable){var Te=we.basePlotModule.name;$[Te]||($[Te]=[]),$[Te].push(ge)}N.data[fe[ue]]=g.extendTrace(N.data[fe[ue]],G[ue])}}var xe=i.expandObjectPaths(i.extendDeepNoArrays({},W)),ye=/^[xy]axis[0-9]*$/;for(var _e in xe)ye.test(_e)&&delete xe[_e].range;g.extendLayout(N.layout,xe),delete N.calcdata,g.supplyDefaults(N),g.doCalcdata(N);var Ie=i.expandObjectPaths(W);if(Ie){var De=N._fullLayout._plots;for(var be in De){var he=De[be],ce=he.xaxis,me=he.yaxis,Pe=ce.range.slice(),Ae=me.range.slice(),Ce=null,Oe=null,Ne=null,je=null;Array.isArray(Ie[ce._name+".range"])?Ce=Ie[ce._name+".range"].slice():Array.isArray((Ie[ce._name]||{}).range)&&(Ce=Ie[ce._name].range.slice()),Array.isArray(Ie[me._name+".range"])?Oe=Ie[me._name+".range"].slice():Array.isArray((Ie[me._name]||{}).range)&&(Oe=Ie[me._name].range.slice()),Pe&&Ce&&(ce.r2l(Pe[0])!==ce.r2l(Ce[0])||ce.r2l(Pe[1])!==ce.r2l(Ce[1]))&&(Ne={xr0:Pe,xr1:Ce}),Ae&&Oe&&(me.r2l(Ae[0])!==me.r2l(Oe[0])||me.r2l(Ae[1])!==me.r2l(Oe[1]))&&(je={yr0:Ae,yr1:Oe}),(Ne||je)&&X.push(i.extendFlat({plotinfo:he},Ne,je))}}return Promise.resolve()},Q.runFn=function(oe){var fe,ue,ge=N._fullLayout._basePlotModules,we=X.length;if(W)for(ue=0;ue<ge.length;ue++)ge[ue].transitionAxes&&ge[ue].transitionAxes(N,X,ne,oe);for(var Te in we?((fe=i.extendFlat({},ne)).duration=0,delete $.cartesian):fe=ne,$){var xe=$[Te];N._fullData[xe[0]]._module.basePlotModule.plot(N,xe,fe,oe)}},V(N,ne,Q)},g.transitionFromReact=function(N,G,W,ae){var re=N._fullLayout,ne=re.transition,Q={},$=[];return Q.prepareFn=function(){var X=re._plots;for(var oe in Q.redraw=!1,"some"===G.anim&&(Q.redraw=!0),"some"===W.anim&&(Q.redraw=!0),X){var fe=X[oe],ue=fe.xaxis,ge=fe.yaxis,we=ae[ue._name].range.slice(),Te=ae[ge._name].range.slice(),xe=ue.range.slice(),ye=ge.range.slice();ue.setScale(),ge.setScale();var _e=null,Ie=null;ue.r2l(we[0])===ue.r2l(xe[0])&&ue.r2l(we[1])===ue.r2l(xe[1])||(_e={xr0:we,xr1:xe}),ge.r2l(Te[0])===ge.r2l(ye[0])&&ge.r2l(Te[1])===ge.r2l(ye[1])||(Ie={yr0:Te,yr1:ye}),(_e||Ie)&&$.push(i.extendFlat({plotinfo:fe},_e,Ie))}return Promise.resolve()},Q.runFn=function(X){for(var oe,fe,ue,ge=N._fullData,we=N._fullLayout._basePlotModules,Te=[],xe=0;xe<ge.length;xe++)Te.push(xe);function ye(){if(N._fullLayout)for(var Ie=0;Ie<we.length;Ie++)we[Ie].transitionAxes&&we[Ie].transitionAxes(N,$,oe,X)}function _e(){if(N._fullLayout)for(var Ie=0;Ie<we.length;Ie++)we[Ie].plot(N,ue,fe,X)}$.length&&G.anim?"traces first"===ne.ordering?(oe=i.extendFlat({},ne,{duration:0}),ue=Te,fe=ne,setTimeout(ye,ne.duration),_e()):(oe=ne,ue=null,fe=i.extendFlat({},ne,{duration:0}),setTimeout(_e,oe.duration),ye()):$.length?(oe=ne,ye()):G.anim&&(ue=Te,fe=ne,_e())},V(N,ne,Q)},g.doCalcdata=function(N,G){var W,ae,re,ne,Q=a.list(N),$=N._fullData,X=N._fullLayout,oe=new Array($.length),fe=(N.calcdata||[]).slice();for(N.calcdata=oe,X._numBoxes=0,X._numViolins=0,X._violinScaleGroupStats={},N._hmpixcount=0,N._hmlumcount=0,X._piecolormap={},X._sunburstcolormap={},X._treemapcolormap={},X._iciclecolormap={},X._funnelareacolormap={},re=0;re<$.length;re++)Array.isArray(G)&&-1===G.indexOf(re)&&(oe[re]=fe[re]);for(re=0;re<$.length;re++)(W=$[re])._arrayAttrs=l.findArrayAttributes(W),W._extremes={};var ue=X._subplots.polar||[];for(re=0;re<ue.length;re++)Q.push(X[ue[re]].radialaxis,X[ue[re]].angularaxis);for(var ge in X._colorAxes){var we=X[ge];!1!==we.cauto&&(delete we.cmin,delete we.cmax)}var Te=!1;function xe(Ie){if(ae=(W=$[Ie])._module,!0===W.visible&&W.transforms){if(ae&&ae.calc){var De=ae.calc(N,W);De[0]&&De[0].t&&De[0].t._scene&&delete De[0].t._scene.dirty}for(ne=0;ne<W.transforms.length;ne++){var be=W.transforms[ne];(ae=x[be.type])&&ae.calcTransform&&(W._hasCalcTransform=!0,Te=!0,ae.calcTransform(N,W,be))}}}function ye(Ie,De){if(!!(ae=(W=$[Ie])._module).isContainer===De){var be=[];if(!0===W.visible&&0!==W._length){delete W._indexToPoints;var he=W.transforms||[];for(ne=he.length-1;ne>=0;ne--)if(he[ne].enabled){W._indexToPoints=he[ne]._indexToPoints;break}ae&&ae.calc&&(be=ae.calc(N,W))}Array.isArray(be)&&be[0]||(be=[{x:n,y:n}]),be[0].t||(be[0].t={}),be[0].trace=W,oe[Ie]=be}}for(U(Q,$,X),re=0;re<$.length;re++)ye(re,!0);for(re=0;re<$.length;re++)xe(re);for(Te&&U(Q,$,X),re=0;re<$.length;re++)ye(re,!0);for(re=0;re<$.length;re++)ye(re,!1);Z(N);var _e=function(Ie,De){var be,he,ce,me,Pe,Ae=[];function Ce(et,gt,ht){var Ge=gt._id.charAt(0);if("histogram2dcontour"===et){var He=gt._counterAxes[0],ut=a.getFromId(De,He),tt="x"===Ge||"x"===He&&"category"===ut.type,xt="y"===Ge||"y"===He&&"category"===ut.type;return function(At,Mt){return 0===At||0===Mt||tt&&At===ht[Mt].length-1||xt&&Mt===ht.length-1?-1:("y"===Ge?Mt:At)-1}}return function(At,Mt){return"y"===Ge?Mt:At}}var Oe={min:function(et){return i.aggNums(Math.min,null,et)},max:function(et){return i.aggNums(Math.max,null,et)},sum:function(et){return i.aggNums(function(gt,ht){return gt+ht},null,et)},total:function(et){return i.aggNums(function(gt,ht){return gt+ht},null,et)},mean:function(et){return i.mean(et)},median:function(et){return i.median(et)}};function Ne(et,gt){return et[1]-gt[1]}function je(et,gt){return gt[1]-et[1]}for(be=0;be<Ie.length;be++){var ve=Ie[be];if("category"===ve.type){var Me=ve.categoryorder.match(R);if(Me){var Le=Me[1],Ue=Me[2],ze=ve._id.charAt(0),qe="x"===ze,Ke=[];for(he=0;he<ve._categories.length;he++)Ke.push([ve._categories[he],[]]);for(he=0;he<ve._traceIndices.length;he++){var it=ve._traceIndices[he],ft=De._fullData[it];if(!0===ft.visible){var dt=ft.type;p.traceIs(ft,"histogram")&&(delete ft._xautoBinFinished,delete ft._yautoBinFinished);var kt="splom"===dt,St="scattergl"===dt,Tt=De.calcdata[it];for(ce=0;ce<Tt.length;ce++){var lt,ot,Rt=Tt[ce];if(kt){var Vt=ft._axesDim[ve._id];if(!qe){var Ht=ft._diag[Vt][0];Ht&&(ve=De._fullLayout[a.id2name(Ht)])}var zt=Rt.trace.dimensions[Vt].values;for(me=0;me<zt.length;me++)for(lt=ve._categoriesMap[zt[me]],Pe=0;Pe<Rt.trace.dimensions.length;Pe++)Pe!==Vt&&Ke[lt][1].push(Rt.trace.dimensions[Pe].values[me])}else if(St){for(me=0;me<Rt.t.x.length;me++)qe?(lt=Rt.t.x[me],ot=Rt.t.y[me]):(lt=Rt.t.y[me],ot=Rt.t.x[me]),Ke[lt][1].push(ot);Rt.t&&Rt.t._scene&&delete Rt.t._scene.dirty}else if(Rt.hasOwnProperty("z")){var nt=Ce(ft.type,ve,ot=Rt.z);for(me=0;me<ot.length;me++)for(Pe=0;Pe<ot[me].length;Pe++)(lt=nt(Pe,me))+1&&Ke[lt][1].push(ot[me][Pe])}else for(void 0===(lt=Rt.p)&&(lt=Rt[ze]),void 0===(ot=Rt.s)&&(ot=Rt.v),void 0===ot&&(ot=qe?Rt.y:Rt.x),Array.isArray(ot)||(ot=void 0===ot?[]:[ot]),me=0;me<ot.length;me++)Ke[lt][1].push(ot[me])}}}ve._categoriesValue=Ke;var We=[];for(he=0;he<Ke.length;he++)We.push([Ke[he][0],Oe[Le](Ke[he][1])]);We.sort("descending"===Ue?je:Ne),ve._categoriesAggregatedValue=We,ve._initialCategories=We.map(function(et){return et[0]}),Ae=Ae.concat(ve.sortByInitialCategories())}}}return Ae}(Q,N);if(_e.length){for(X._numBoxes=0,X._numViolins=0,re=0;re<_e.length;re++)ye(_e[re],!0);for(re=0;re<_e.length;re++)ye(_e[re],!1);Z(N)}p.getComponentMethod("fx","calc")(N),p.getComponentMethod("errorbars","calc")(N)};var R=/(total|sum|min|max|mean|median) (ascending|descending)/;function U(N,G,W){var ae={};function re(X){X.clearCalc(),"multicategory"===X.type&&X.setupMultiCategory(G),ae[X._id]=1}i.simpleMap(N,re);for(var ne=W._axisMatchGroups||[],Q=0;Q<ne.length;Q++)for(var $ in ne[Q])ae[$]||re(W[a.id2name($)])}function Z(N){var G,W,ae,re=N._fullLayout,ne=re._visibleModules,Q={};for(W=0;W<ne.length;W++){var $=ne[W],X=$.crossTraceCalc;if(X){var oe=$.basePlotModule.name;Q[oe]?i.pushUnique(Q[oe],X):Q[oe]=[X]}}for(ae in Q){var fe=Q[ae],ue=re._subplots[ae];if(Array.isArray(ue))for(G=0;G<ue.length;G++){var ge=ue[G],we="cartesian"===ae?re._plots[ge]:re[ge];for(W=0;W<fe.length;W++)fe[W](N,we,ge)}else for(W=0;W<fe.length;W++)fe[W](N)}}g.rehover=function(N){N._fullLayout._rehover&&N._fullLayout._rehover()},g.redrag=function(N){N._fullLayout._redrag&&N._fullLayout._redrag()},g.reselect=function(N){var G=N._fullLayout,W=(N.layout||{}).selections,ae=G._previousSelections;G._previousSelections=W;var re=G._reselect||JSON.stringify(W)!==JSON.stringify(ae);p.getComponentMethod("selections","reselect")(N,re)},g.generalUpdatePerTraceModule=function(N,G,W,ae){var re,ne=G.traceHash,Q={};for(re=0;re<W.length;re++){var $=W[re],X=$[0].trace;X.visible&&(Q[X.type]=Q[X.type]||[],Q[X.type].push($))}for(var oe in ne)if(!Q[oe]){var fe=ne[oe][0];fe[0].trace.visible=!1,Q[oe]=[fe]}for(var ue in Q){var ge=Q[ue];ge[0][0].trace._module.plot(N,G,i.filterVisible(ge),ae)}G.traceHash=Q},g.plotBasePlot=function(N,G,W,ae,re){var ne=p.getModule(N),Q=y(G.calcdata,ne)[0];ne.plot(G,Q,ae,re)},g.cleanBasePlot=function(N,G,W,ae,re){var ne=re._has&&re._has(N),Q=W._has&&W._has(N);ne&&!Q&&re["_"+N+"layer"].selectAll("g.trace").remove()}},39360:function(ie){"use strict";ie.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},57384:function(ie,F,e){"use strict";var S=e(3400),k=e(92065).tester,o=S.findIndexOfMin,T=S.isAngleInsideSector,b=S.angleDelta,p=S.angleDist;function l(n,a,s,c){var h,u,y=c[0],d=c[1],m=i(Math.sin(a)-Math.sin(n)),g=i(Math.cos(a)-Math.cos(n)),x=Math.tan(s),v=i(1/x),_=m/g,f=d-_*y;return v?m&&g?u=x*(h=f/(x-_)):g?(h=d*v,u=d):(h=y,u=y*x):m&&g?(h=0,u=f):g?(h=0,u=d):h=u=NaN,[h,u]}function t(n,a,s,c){return S.isFullCircle([a,s])?function(h,u){var y,d=u.length,m=new Array(d+1);for(y=0;y<d;y++){var g=u[y];m[y]=[h*Math.cos(g),h*Math.sin(g)]}return m[y]=m[0].slice(),m}(n,c):function(h,u,y,d){var m,g,x=d.length,v=[];function _(V){return[h*Math.cos(V),h*Math.sin(V)]}function f(V,R,U){return l(V,R,U,_(V))}function C(V){return S.mod(V,x)}function w(V){return T(V,[u,y])}var E=o(d,function(V){return w(V)?p(V,u):1/0}),P=f(d[E],d[C(E-1)],u);for(v.push(P),m=E,g=0;g<x;m++,g++){var L=d[C(m)];if(!w(L))break;v.push(_(L))}var O=o(d,function(V){return w(V)?p(V,y):1/0}),z=f(d[O],d[C(O+1)],y);return v.push(z),v.push([0,0]),v.push(v[0].slice()),v}(n,a,s,c)}function i(n){return Math.abs(n)>1e-10?n:0}function r(n,a,s){a=a||0,s=s||0;for(var c=n.length,h=new Array(c),u=0;u<c;u++){var y=n[u];h[u]=[a+y[0],s-y[1]]}return h}ie.exports={isPtInsidePolygon:function(n,a,s,c,h){if(!T(a,c))return!1;var u,y;s[0]<s[1]?(u=s[0],y=s[1]):(u=s[1],y=s[0]);var d=k(t(u,c[0],c[1],h)),m=k(t(y,c[0],c[1],h)),g=[n*Math.cos(a),n*Math.sin(a)];return m.contains(g)&&!d.contains(g)},findPolygonOffset:function(n,a,s,c){for(var h=1/0,u=1/0,y=t(n,a,s,c),d=0;d<y.length;d++){var m=y[d];h=Math.min(h,m[0]),u=Math.min(u,-m[1])}return[h,u]},findEnclosingVertexAngles:function(n,a){var s=o(a,function(h){var u=b(h,n);return u>0?u:1/0}),c=S.mod(s+1,a.length);return[a[s],a[c]]},findIntersectionXY:l,findXYatLength:function(n,a,s,c){var h=-a*s,u=a*a+1,y=2*(a*h-s),m=Math.sqrt(y*y-4*u*(h*h+s*s-n*n)),g=(-y+m)/(2*u),x=(-y-m)/(2*u);return[[g,a*g+h+c],[x,a*x+h+c]]},clampTiny:i,pathPolygon:function(n,a,s,c,h,u){return"M"+r(t(n,a,s,c),h,u).join("L")},pathPolygonAnnulus:function(n,a,s,c,h,u,y){var d,m;n<a?(d=n,m=a):(d=a,m=n);var g=r(t(d,s,c,h),u,y);return"M"+r(t(m,s,c,h),u,y).reverse().join("L")+"M"+g.join("L")}}},40872:function(ie,F,e){"use strict";var S=e(84888).KY,k=e(3400).counterRegex,o=e(62400),T=e(39360),b=T.attr,p=T.name,l=k(p),t={};t[b]={valType:"subplotid",dflt:p,editType:"calc"},ie.exports={attr:b,name:p,idRoot:p,idRegex:l,attrRegex:l,attributes:t,layoutAttributes:e(95300),supplyLayoutDefaults:e(84380),plot:function(i){for(var r=i._fullLayout,n=i.calcdata,a=r._subplots[p],s=0;s<a.length;s++){var c=a[s],h=S(n,p,c),u=r[c]._subplot;u||(u=o(i,c),r[c]._subplot=u),u.plot(h,r,i._promises)}},clean:function(i,r,n,a){for(var s=a._subplots[p]||[],c=a._has&&a._has("gl"),h=r._has&&r._has("gl"),u=c&&!h,y=0;y<s.length;y++){var d=s[y],m=a[d]._subplot;if(!r[d]&&m)for(var g in m.framework.remove(),m.layers["radial-axis-title"].remove(),m.clipPaths)m.clipPaths[g].remove();u&&m._scene&&(m._scene.destroy(),m._scene=null)}},toSVG:e(57952).toSVG}},95300:function(ie,F,e){"use strict";var S=e(22548),k=e(94724),o=e(86968).u,T=e(3400).extendFlat,b=e(67824).overrideAll,p=b({color:k.color,showline:T({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:T({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,griddash:k.griddash},"plot","from-root"),l=b({tickmode:k.minor.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,ticklabelstep:k.ticklabelstep,showticklabels:k.showticklabels,labelalias:k.labelalias,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,minexponent:k.minexponent,separatethousands:k.separatethousands,tickfont:k.tickfont,tickangle:k.tickangle,tickformat:k.tickformat,tickformatstops:k.tickformatstops,layer:k.layer},"plot","from-root"),t={visible:T({},k.visible,{dflt:!0}),type:T({},k.type,{values:["-","linear","log","date","category"]}),autotypenumbers:k.autotypenumbers,autorangeoptions:{minallowed:k.autorangeoptions.minallowed,maxallowed:k.autorangeoptions.maxallowed,clipmin:k.autorangeoptions.clipmin,clipmax:k.autorangeoptions.clipmax,include:k.autorangeoptions.include,editType:"plot"},autorange:T({},k.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},minallowed:T({},k.minallowed,{editType:"plot"}),maxallowed:T({},k.maxallowed,{editType:"plot"}),range:T({},k.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:k.categoryorder,categoryarray:k.categoryarray,angle:{valType:"angle",editType:"plot"},autotickangles:k.autotickangles,side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:T({},k.title.text,{editType:"plot",dflt:""}),font:T({},k.title.font,{editType:"plot"}),editType:"plot"},hoverformat:k.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}};T(t,p,l);var i={visible:T({},k.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:k.autotypenumbers,categoryorder:k.categoryorder,categoryarray:k.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:k.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};T(i,p,l),ie.exports={domain:o({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:S.background},radialaxis:t,angularaxis:i,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},84380:function(ie,F,e){"use strict";var S=e(3400),k=e(76308),o=e(31780),T=e(168),b=e(84888).op,p=e(26332),l=e(25404),t=e(95936),i=e(42568),r=e(22416),n=e(42136),a=e(76808),s=e(52976),c=e(95300),h=e(57696),u=e(39360),y=u.axisNames;function d(g,x,v,_){var f=v("bgcolor");_.bgColor=k.combine(f,_.paper_bgcolor);var C=v("sector");v("hole");var w,E=b(_.fullData,u.name,_.id),P=_.layoutOut;function L(_e,Ie){return v(w+"."+_e,Ie)}for(var O=0;O<y.length;O++){S.isPlainObject(g[w=y[O]])||(g[w]={});var z=g[w],V=o.newContainer(x,w);V._id=V._name=w,V._attr=_.id+"."+w,V._traceIndices=E.map(function(_e){return _e._expandedIndex});var R=u.axisName2dataArray[w],U=m(z,V,L,E,R,_);r(z,V,L,{axData:E,dataAttr:R});var Z=L("visible");switch(h(V,x,P),L("uirevision",x.uirevision),V._m=1,w){case"radialaxis":L("minallowed"),L("maxallowed");var N,G=L("range"),W=V.getAutorangeDflt(G),ae=L("autorange",W);!G||(null!==G[0]||null!==G[1])&&(null!==G[0]&&null!==G[1]||"reversed"!==ae&&!0!==ae)&&(null===G[0]||"min"!==ae&&"max reversed"!==ae)&&(null===G[1]||"max"!==ae&&"min reversed"!==ae)||(G=void 0,delete V.range,V.autorange=!0,N=!0),N||(ae=L("autorange",W=V.getAutorangeDflt(G))),z.autorange=ae,ae&&(a(L,ae,G),"linear"!==U&&"-"!==U||L("rangemode"),V.isReversed()&&(V._m=-1)),V.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if("date"===U){S.log("Polar plots do not support date angular axes yet.");for(var re=0;re<E.length;re++)E[re].visible=!1;U=z.type=V.type="linear"}L("linear"===U?"thetaunit":"period");var ne=L("direction");L("rotation",{counterclockwise:0,clockwise:90}[ne])}if(i(z,V,L,V.type,{tickSuffixDflt:"degrees"===V.thetaunit?"\xb0":void 0}),Z){var Q,$,X,oe,fe,ue,ge,we,Te,xe,ye=_.font||{};$=(Q=L("color"))===z.color?Q:ye.color,X=ye.size,oe=ye.family,fe=ye.weight,ue=ye.style,ge=ye.variant,we=ye.textcase,Te=ye.lineposition,xe=ye.shadow,p(z,V,L,V.type),t(z,V,L,V.type,{font:{weight:fe,style:ue,variant:ge,textcase:we,lineposition:Te,shadow:xe,color:$,size:X,family:oe},noAutotickangles:"angularaxis"===w}),l(z,V,L,{outerTicks:!0}),n(z,V,L,{dfltColor:Q,bgColor:_.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:c[w]}),L("layer"),"radialaxis"===w&&(L("side"),L("angle",C[0]),L("title.text"),S.coerceFont(L,"title.font",{weight:fe,style:ue,variant:ge,textcase:we,lineposition:Te,shadow:xe,color:$,size:S.bigFont(X),family:oe}))}"category"!==U&&L("hoverformat"),V._input=z}"category"===x.angularaxis.type&&v("gridshape")}function m(g,x,v,_,f,C){var w=v("autotypenumbers",C.autotypenumbersDflt);if("-"===v("type")){for(var E,P=0;P<_.length;P++)if(_[P].visible){E=_[P];break}E&&E[f]&&(x.type=s(E[f],"gregorian",{noMultiCategory:!0,autotypenumbers:w})),"-"===x.type?x.type="linear":g.type=x.type}return x.type}ie.exports=function(g,x,v){T(g,x,v,{type:u.name,attributes:c,handleDefaults:d,font:x.font,autotypenumbersDflt:x.autotypenumbers,paper_bgcolor:x.paper_bgcolor,fullData:v,layoutOut:x})}},62400:function(ie,F,e){"use strict";var S=e(33428),k=e(49760),o=e(24040),T=e(3400),b=T.strRotate,p=T.strTranslate,l=e(76308),t=e(43616),i=e(7316),r=e(54460),n=e(78344),a=e(57696),s=e(19280).doAutoRange,c=e(51184),h=e(86476),u=e(93024),y=e(81668),d=e(22676).prepSelect,m=e(22676).selectOnClick,g=e(22676).clearOutline,x=e(93972),v=e(73696),_=e(39172).redrawReglTraces,f=e(84284).MID_SHIFT,C=e(39360),w=e(57384),E=e(36416),P=E.smith,L=E.reactanceArc,O=E.resistanceArc,z=E.smithTransform,V=T._,R=T.mod,U=T.deg2rad,Z=T.rad2deg;function N(ne,Q,$){this.isSmith=$||!1,this.id=Q,this.gd=ne,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var X=ne._fullLayout;this.clipIds.forTraces="clip"+X._uid+Q+"-for-traces",this.clipPaths.forTraces=X._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=X["_"+($?"smith":"polar")+"layer"].append("g").attr("class",Q),this.getHole=function(fe){return this.isSmith?0:fe.hole},this.getSector=function(fe){return this.isSmith?[0,360]:fe.sector},this.getRadial=function(fe){return this.isSmith?fe.realaxis:fe.radialaxis},this.getAngular=function(fe){return this.isSmith?fe.imaginaryaxis:fe.angularaxis},$||(this.radialTickLayout=null,this.angularTickLayout=null)}var G=N.prototype;function W(ne){var Q=ne.ticks+String(ne.ticklen)+String(ne.showticklabels);return"side"in ne&&(Q+=ne.side),Q}function ae(ne,Q){return Q[T.findIndexOfMin(Q,function($){return T.angleDist(ne,$)})]}function re(ne,Q,$){return Q?(ne.attr("display",null),ne.attr($)):ne&&ne.attr("display","none"),ne}ie.exports=function(ne,Q,$){return new N(ne,Q,$)},G.plot=function(ne,Q){for(var $=this,X=Q[$.id],oe=!1,fe=0;fe<ne.length;fe++)if(!1===ne[fe][0].trace.cliponaxis){oe=!0;break}$._hasClipOnAxisFalse=oe,$.updateLayers(Q,X),$.updateLayout(Q,X),i.generalUpdatePerTraceModule($.gd,$,ne,X),$.updateFx(Q,X),$.isSmith&&(delete X.realaxis.range,delete X.imaginaryaxis.range)},G.updateLayers=function(ne,Q){var $=this,X=$.isSmith,oe=$.layers,fe=$.getRadial(Q),ue=$.getAngular(Q),ge=C.layerNames,we=ge.indexOf("frontplot"),Te=ge.slice(0,we),xe="below traces"===ue.layer,ye="below traces"===fe.layer;xe&&Te.push("angular-line"),ye&&Te.push("radial-line"),xe&&Te.push("angular-axis"),ye&&Te.push("radial-axis"),Te.push("frontplot"),xe||Te.push("angular-line"),ye||Te.push("radial-line"),xe||Te.push("angular-axis"),ye||Te.push("radial-axis");var _e=(X?"smith":"polar")+"sublayer",Ie=$.framework.selectAll("."+_e).data(Te,String);Ie.enter().append("g").attr("class",function(De){return _e+" "+De}).each(function(De){var be=oe[De]=S.select(this);switch(De){case"frontplot":X||be.append("g").classed("barlayer",!0),be.append("g").classed("scatterlayer",!0);break;case"backplot":be.append("g").classed("maplayer",!0);break;case"plotbg":oe.bg=be.append("path");break;case"radial-grid":case"angular-grid":be.style("fill","none");break;case"radial-line":be.append("line").style("fill","none");break;case"angular-line":be.append("path").style("fill","none")}}),Ie.order()},G.updateLayout=function(ne,Q){var $=this,X=$.layers,oe=ne._size,fe=$.getRadial(Q),ue=$.getAngular(Q),ge=Q.domain.x,we=Q.domain.y;$.xOffset=oe.l+oe.w*ge[0],$.yOffset=oe.t+oe.h*(1-we[1]);var Te=$.xLength=oe.w*(ge[1]-ge[0]),xe=$.yLength=oe.h*(we[1]-we[0]),ye=$.getSector(Q);$.sectorInRad=ye.map(U);var _e,Ie,De,be,he,ft,dt,kt,St,Tt,lt,ot,Rt,Vt,Ht,ce=$.sectorBBox=(St=(ft=ye)[1]-(kt=ft[0]),lt=(Tt=R(kt,360))+St,ot=Math.cos(U(Tt)),Rt=Math.sin(U(Tt)),Vt=Math.cos(U(lt)),Ht=Math.sin(U(lt)),dt=Tt<=90&&lt>=90||Tt>90&&lt>=450?1:Rt<=0&&Ht<=0?0:Math.max(Rt,Ht),[Tt<=180&&lt>=180||Tt>180&&lt>=540?-1:ot>=0&&Vt>=0?0:Math.min(ot,Vt),Tt<=270&&lt>=270||Tt>270&&lt>=630?-1:Rt>=0&&Ht>=0?0:Math.min(Rt,Ht),lt>=360?1:ot<=0&&Vt<=0?0:Math.max(ot,Vt),dt]),me=ce[2]-ce[0],Ae=xe/Te,Ce=Math.abs((ce[3]-ce[1])/me);Ae>Ce?(_e=Te,he=(xe-(Ie=Te*Ce))/oe.h/2,De=[ge[0],ge[1]],be=[we[0]+he,we[1]-he]):(Ie=xe,he=(Te-(_e=xe/Ce))/oe.w/2,De=[ge[0]+he,ge[1]-he],be=[we[0],we[1]]),$.xLength2=_e,$.yLength2=Ie,$.xDomain2=De,$.yDomain2=be;var Oe,Ne=$.xOffset2=oe.l+oe.w*De[0],je=$.yOffset2=oe.t+oe.h*(1-be[1]),ve=$.radius=_e/me,Me=$.innerRadius=$.getHole(Q)*ve,Le=$.cx=Ne-ve*ce[0],Ue=$.cy=je+ve*ce[3],ze=$.cxx=Le-Ne,qe=$.cyy=Ue-je,Ke=fe.side;"counterclockwise"===Ke?(Oe=Ke,Ke="top"):"clockwise"===Ke&&(Oe=Ke,Ke="bottom"),$.radialAxis=$.mockAxis(ne,Q,fe,{_id:"x",side:Ke,_trueSide:Oe,domain:[Me/oe.w,ve/oe.w]}),$.angularAxis=$.mockAxis(ne,Q,ue,{side:"right",domain:[0,Math.PI],autorange:!1}),$.doAutoRange(ne,Q),$.updateAngularAxis(ne,Q),$.updateRadialAxis(ne,Q),$.updateRadialAxisTitle(ne,Q),$.xaxis=$.mockCartesianAxis(ne,Q,{_id:"x",domain:De}),$.yaxis=$.mockCartesianAxis(ne,Q,{_id:"y",domain:be});var it=$.pathSubplot();$.clipPaths.forTraces.select("path").attr("d",it).attr("transform",p(ze,qe)),X.frontplot.attr("transform",p(Ne,je)).call(t.setClipUrl,$._hasClipOnAxisFalse?null:$.clipIds.forTraces,$.gd),X.bg.attr("d",it).attr("transform",p(Le,Ue)).call(l.fill,Q.bgcolor)},G.mockAxis=function(ne,Q,$,X){var oe=T.extendFlat({},$,X);return a(oe,Q,ne),oe},G.mockCartesianAxis=function(ne,Q,$){var X=this,oe=X.isSmith,fe=$._id,ue=T.extendFlat({type:"linear"},$);n(ue,ne);var ge={x:[0,2],y:[1,3]};return ue.setRange=function(){var we=X.sectorBBox,Te=ge[fe],xe=X.radialAxis._rl,ye=(xe[1]-xe[0])/(1-X.getHole(Q));ue.range=[we[Te[0]]*ye,we[Te[1]]*ye]},ue.isPtWithinRange="x"!==fe||oe?function(){return!0}:function(we){return X.isPtInside(we)},ue.setRange(),ue.setScale(),ue},G.doAutoRange=function(ne,Q){var $=this,X=$.gd,oe=$.radialAxis,fe=$.getRadial(Q);s(X,oe);var ue=oe.range;if(fe.range=ue.slice(),fe._input.range=ue.slice(),oe._rl=[oe.r2l(ue[0],null,"gregorian"),oe.r2l(ue[1],null,"gregorian")],void 0!==oe.minallowed){var ge=oe.r2l(oe.minallowed);oe._rl[0]>oe._rl[1]?oe._rl[1]=Math.max(oe._rl[1],ge):oe._rl[0]=Math.max(oe._rl[0],ge)}if(void 0!==oe.maxallowed){var we=oe.r2l(oe.maxallowed);oe._rl[0]<oe._rl[1]?oe._rl[1]=Math.min(oe._rl[1],we):oe._rl[0]=Math.min(oe._rl[0],we)}},G.updateRadialAxis=function(ne,Q){var $=this,X=$.gd,oe=$.layers,fe=$.radius,ue=$.innerRadius,ge=$.cx,we=$.cy,Te=$.getRadial(Q),xe=R($.getSector(Q)[0],360),ye=$.radialAxis,_e=ue<fe,Ie=$.isSmith;Ie||($.fillViewInitialKey("radialaxis.angle",Te.angle),$.fillViewInitialKey("radialaxis.range",ye.range.slice()),ye.setGeometry()),"auto"===ye.tickangle&&xe>90&&xe<=270&&(ye.tickangle=180);var De=Ie?function(je){var ve=z($,P([je.x,0]));return p(ve[0]-ge,ve[1]-we)}:function(je){return p(ye.l2p(je.x)+ue,0)},be=Ie?function(je){return O($,je.x,-1/0,1/0)}:function(je){return $.pathArc(ye.r2p(je.x)+ue)},he=W(Te);if($.radialTickLayout!==he&&(oe["radial-axis"].selectAll(".xtick").remove(),$.radialTickLayout=he),_e){ye.setScale();var ce=0,me=Ie?(ye.tickvals||[]).filter(function(je){return je>=0}).map(function(je){return r.tickText(ye,je,!0,!1)}):r.calcTicks(ye),Pe=Ie?me:r.clipEnds(ye,me),Ae=r.getTickSigns(ye)[2];Ie&&(("top"===ye.ticks&&"bottom"===ye.side||"bottom"===ye.ticks&&"top"===ye.side)&&(Ae=-Ae),"top"===ye.ticks&&"top"===ye.side&&(ce=-ye.ticklen),"bottom"===ye.ticks&&"bottom"===ye.side&&(ce=ye.ticklen)),r.drawTicks(X,ye,{vals:me,layer:oe["radial-axis"],path:r.makeTickPath(ye,0,Ae),transFn:De,crisp:!1}),r.drawGrid(X,ye,{vals:Pe,layer:oe["radial-grid"],path:be,transFn:T.noop,crisp:!1}),r.drawLabels(X,ye,{vals:me,layer:oe["radial-axis"],transFn:De,labelFns:r.makeLabelFns(ye,ce)})}var Ce=$.radialAxisAngle=$.vangles?Z(ae(U(Te.angle),$.vangles)):Te.angle,Oe=p(ge,we),Ne=Oe+b(-Ce);re(oe["radial-axis"],_e&&(Te.showticklabels||Te.ticks),{transform:Ne}),re(oe["radial-grid"],_e&&Te.showgrid,{transform:Ie?"":Oe}),re(oe["radial-line"].select("line"),_e&&Te.showline,{x1:Ie?-fe:ue,y1:0,x2:fe,y2:0,transform:Ne}).attr("stroke-width",Te.linewidth).call(l.stroke,Te.linecolor)},G.updateRadialAxisTitle=function(ne,Q,$){if(!this.isSmith){var X=this,oe=X.gd,fe=X.radius,ue=X.cx,ge=X.cy,we=X.getRadial(Q),Te=X.id+"title",xe=0;if(we.title){var ye=t.bBox(X.layers["radial-axis"].node()).height,_e=we.title.font.size,Ie=we.side;xe="top"===Ie?_e:"counterclockwise"===Ie?-(ye+.4*_e):ye+.8*_e}var De=void 0!==$?$:X.radialAxisAngle,be=U(De),he=Math.cos(be),ce=Math.sin(be),me=ue+fe/2*he+xe*ce,Pe=ge-fe/2*ce+xe*he;X.layers["radial-axis-title"]=y.draw(oe,Te,{propContainer:we,propName:X.id+".radialaxis.title",placeholder:V(oe,"Click to enter radial axis title"),attributes:{x:me,y:Pe,"text-anchor":"middle"},transform:{rotate:-De}})}},G.updateAngularAxis=function(ne,Q){var $=this,X=$.gd,oe=$.layers,fe=$.radius,ue=$.innerRadius,ge=$.cx,we=$.cy,Te=$.getAngular(Q),xe=$.angularAxis,ye=$.isSmith;ye||($.fillViewInitialKey("angularaxis.rotation",Te.rotation),xe.setGeometry(),xe.setScale());var _e=ye?function(je){var ve=z($,P([0,je.x]));return Math.atan2(ve[0]-ge,ve[1]-we)-Math.PI/2}:function(je){return xe.t2g(je.x)};"linear"===xe.type&&"radians"===xe.thetaunit&&(xe.tick0=Z(xe.tick0),xe.dtick=Z(xe.dtick));var Ie=function(je){return p(ge+fe*Math.cos(je),we-fe*Math.sin(je))},De=ye?function(je){var ve=z($,P([0,je.x]));return p(ve[0],ve[1])}:function(je){return Ie(_e(je))},be=ye?function(je){var ve=z($,P([0,je.x])),Me=Math.atan2(ve[0]-ge,ve[1]-we)-Math.PI/2;return p(ve[0],ve[1])+b(-Z(Me))}:function(je){var ve=_e(je);return Ie(ve)+b(-Z(ve))},he=ye?function(je){return L($,je.x,0,1/0)}:function(je){var ve=_e(je),Me=Math.cos(ve),Le=Math.sin(ve);return"M"+[ge+ue*Me,we-ue*Le]+"L"+[ge+fe*Me,we-fe*Le]},ce=r.makeLabelFns(xe,0).labelStandoff,me={xFn:function(je){var ve=_e(je);return Math.cos(ve)*ce},yFn:function(je){var ve=_e(je),Me=Math.sin(ve)>0?.2:1;return-Math.sin(ve)*(ce+je.fontSize*Me)+Math.abs(Math.cos(ve))*(je.fontSize*f)},anchorFn:function(je){var ve=_e(je),Me=Math.cos(ve);return Math.abs(Me)<.1?"middle":Me>0?"start":"end"},heightFn:function(je,ve,Me){var Le=_e(je);return-.5*(1+Math.sin(Le))*Me}},Pe=W(Te);$.angularTickLayout!==Pe&&(oe["angular-axis"].selectAll("."+xe._id+"tick").remove(),$.angularTickLayout=Pe);var Ae,Ce=ye?[1/0].concat(xe.tickvals||[]).map(function(je){return r.tickText(xe,je,!0,!1)}):r.calcTicks(xe);if(ye&&(Ce[0].text="\u221e",Ce[0].fontSize*=1.75),"linear"===Q.gridshape?(Ae=Ce.map(_e),T.angleDelta(Ae[0],Ae[1])<0&&(Ae=Ae.slice().reverse())):Ae=null,$.vangles=Ae,"category"===xe.type&&(Ce=Ce.filter(function(je){return T.isAngleInsideSector(_e(je),$.sectorInRad)})),xe.visible){var Oe="inside"===xe.ticks?-1:1;r.drawTicks(X,xe,{vals:Ce,layer:oe["angular-axis"],path:"M"+Oe*((xe.linewidth||1)/2)+",0h"+Oe*xe.ticklen,transFn:be,crisp:!1}),r.drawGrid(X,xe,{vals:Ce,layer:oe["angular-grid"],path:he,transFn:T.noop,crisp:!1}),r.drawLabels(X,xe,{vals:Ce,layer:oe["angular-axis"],repositionOnUpdate:!0,transFn:De,labelFns:me})}re(oe["angular-line"].select("path"),Te.showline,{d:$.pathSubplot(),transform:p(ge,we)}).attr("stroke-width",Te.linewidth).call(l.stroke,Te.linecolor)},G.updateFx=function(ne,Q){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(ne),this.updateRadialDrag(ne,Q,0),this.updateRadialDrag(ne,Q,1)),this.updateHoverAndMainDrag(ne))},G.updateHoverAndMainDrag=function(ne){var Q,$,X=this,oe=X.isSmith,fe=X.gd,ge=ne._zoomlayer,we=C.MINZOOM,Te=C.OFFEDGE,xe=X.radius,ye=X.innerRadius,_e=X.cx,Ie=X.cy,De=X.cxx,be=X.cyy,he=X.sectorInRad,ce=X.vangles,me=X.radialAxis,Pe=w.clampTiny,Ae=w.findXYatLength,Ce=w.findEnclosingVertexAngles,Oe=C.cornerHalfWidth,Ne=C.cornerLen/2,je=c.makeDragger(X.layers,"path","maindrag",!1===ne.dragmode?"none":"crosshair");S.select(je).attr("d",X.pathSubplot()).attr("transform",p(_e,Ie)),je.onmousemove=function(ht){u.hover(fe,ht,X.id),fe._fullLayout._lasthover=je,fe._fullLayout._hoversubplot=X.id},je.onmouseout=function(ht){fe._dragging||h.unhover(fe,ht)};var ve,Me,Le,Ue,ze,qe,Ke,it,ft,dt={element:je,gd:fe,subplot:X.id,plotinfo:{id:X.id,xaxis:X.xaxis,yaxis:X.yaxis},xaxes:[X.xaxis],yaxes:[X.yaxis]};function kt(ht,Ge){return Math.sqrt(ht*ht+Ge*Ge)}function St(ht,Ge){return kt(ht-De,Ge-be)}function Tt(ht,Ge){return Math.atan2(be-Ge,ht-De)}function lt(ht,Ge){return[ht*Math.cos(Ge),ht*Math.sin(-Ge)]}function ot(ht,Ge){if(0===ht)return X.pathSector(2*Oe);var He=Ne/ht,ut=Ge-He,tt=Ge+He,xt=Math.max(0,Math.min(ht,xe)),At=xt-Oe,Mt=xt+Oe;return"M"+lt(At,ut)+"A"+[At,At]+" 0,0,0 "+lt(At,tt)+"L"+lt(Mt,tt)+"A"+[Mt,Mt]+" 0,0,1 "+lt(Mt,ut)+"Z"}function Rt(ht,Ge,He){if(0===ht)return X.pathSector(2*Oe);var ut,tt,xt=lt(ht,Ge),At=lt(ht,He),Mt=Pe((xt[0]+At[0])/2),yt=Pe((xt[1]+At[1])/2);if(Mt&&yt){var Pt=yt/Mt,Ct=-1/Pt,Dt=Ae(Oe,Pt,Mt,yt);ut=Ae(Ne,Ct,Dt[0][0],Dt[0][1]),tt=Ae(Ne,Ct,Dt[1][0],Dt[1][1])}else{var Ut,Bt;yt?(Ut=Ne,Bt=Oe):(Ut=Oe,Bt=Ne),ut=[[Mt-Ut,yt-Bt],[Mt+Ut,yt-Bt]],tt=[[Mt-Ut,yt+Bt],[Mt+Ut,yt+Bt]]}return"M"+ut.join("L")+"L"+tt.reverse().join("L")+"Z"}function Vt(ht,Ge){return Ge=Math.max(Math.min(Ge,xe),ye),ht<Te?ht=0:xe-ht<Te?ht=xe:Ge<Te?Ge=0:xe-Ge<Te&&(Ge=xe),Math.abs(Ge-ht)>we?(ht<Ge?(Le=ht,Ue=Ge):(Le=Ge,Ue=ht),!0):(Le=null,Ue=null,!1)}function Ht(ht,Ge){Ge=Ge||"M0,0Z",it.attr("d",ht=ht||ze),ft.attr("d",Ge),c.transitionZoombox(it,ft,qe,Ke),qe=!0;var He={};et(He),fe.emit("plotly_relayouting",He)}function zt(ht,Ge){var He,ut,tt=ve+(ht*=Q),xt=Me+(Ge*=$),At=St(ve,Me),Mt=Math.min(St(tt,xt),xe),yt=Tt(ve,Me);Vt(At,Mt)&&(He=ze+X.pathSector(Ue),Le&&(He+=X.pathSector(Le)),ut=ot(Le,yt)+ot(Ue,yt)),Ht(He,ut)}function Qe(ht,Ge,He,ut){var tt=w.findIntersectionXY(He,ut,He,[ht-De,be-Ge]);return kt(tt[0],tt[1])}function nt(ht,Ge){var He,ut,tt=ve+ht,xt=Me+Ge,At=Tt(ve,Me),Mt=Tt(tt,xt),yt=Ce(At,ce),Pt=Ce(Mt,ce);Vt(Qe(ve,Me,yt[0],yt[1]),Math.min(Qe(tt,xt,Pt[0],Pt[1]),xe))&&(He=ze+X.pathSector(Ue),Le&&(He+=X.pathSector(Le)),ut=[Rt(Le,yt[0],yt[1]),Rt(Ue,yt[0],yt[1])].join(" ")),Ht(He,ut)}function We(){if(c.removeZoombox(fe),null!==Le&&null!==Ue){var ht={};et(ht),c.showDoubleClickNotifier(fe),o.call("_guiRelayout",fe,ht)}}function et(ht){var Ge=me._rl,He=(Ge[1]-Ge[0])/(1-ye/xe)/xe;ht[X.id+".radialaxis.range"]=[Ge[0]+(Le-ye)*He,Ge[0]+(Ue-ye)*He]}function gt(ht,Ge){var He=fe._fullLayout.clickmode;if(c.removeZoombox(fe),2===ht){var ut={};for(var tt in X.viewInitial)ut[X.id+"."+tt]=X.viewInitial[tt];fe.emit("plotly_doubleclick",null),o.call("_guiRelayout",fe,ut)}He.indexOf("select")>-1&&1===ht&&m(Ge,fe,[X.xaxis],[X.yaxis],X.id,dt),He.indexOf("event")>-1&&u.click(fe,Ge,X.id)}dt.prepFn=function(ht,Ge,He){var ut=fe._fullLayout.dragmode,tt=je.getBoundingClientRect();fe._fullLayout._calcInverseTransform(fe),Q=fe._fullLayout._invScaleX,$=fe._fullLayout._invScaleY;var At=T.apply3DTransform(fe._fullLayout._invTransform)(Ge-tt.left,He-tt.top);if(ve=At[0],Me=At[1],ce){var Mt=w.findPolygonOffset(xe,he[0],he[1],ce);ve+=De+Mt[0],Me+=be+Mt[1]}switch(ut){case"zoom":dt.clickFn=gt,oe||(dt.moveFn=ce?nt:zt,dt.doneFn=We,Le=null,Ue=null,ze=X.pathSubplot(),qe=!1,Ke=k(fe._fullLayout[X.id].bgcolor).getLuminance(),(it=c.makeZoombox(ge,Ke,_e,Ie,ze)).attr("fill-rule","evenodd"),ft=c.makeCorners(ge,_e,Ie),g(fe));break;case"select":case"lasso":d(ht,Ge,He,dt,ut)}},h.init(dt)},G.updateRadialDrag=function(ne,Q,$){var X=this,oe=X.gd,fe=X.layers,ue=X.radius,ge=X.innerRadius,we=X.cx,Te=X.cy,xe=X.radialAxis,ye=C.radialDragBoxSize,_e=ye/2;if(xe.visible){var Ie,De,be,he=U(X.radialAxisAngle),ce=xe._rl,me=ce[0],Pe=ce[1],Ae=ce[$],Ce=.75*(ce[1]-ce[0])/(1-X.getHole(Q))/ue;$?(Ie=we+(ue+_e)*Math.cos(he),De=Te-(ue+_e)*Math.sin(he),be="radialdrag"):(Ie=we+(ge-_e)*Math.cos(he),De=Te-(ge-_e)*Math.sin(he),be="radialdrag-inner");var Oe,Ne,je,ve=c.makeRectDragger(fe,be,"crosshair",-_e,-_e,ye,ye),Me={element:ve,gd:oe};!1===ne.dragmode&&(Me.dragmode=!1),re(S.select(ve),xe.visible&&ge<ue,{transform:p(Ie,De)}),Me.prepFn=function(){Oe=null,Ne=null,je=null,Me.moveFn=Le,Me.doneFn=Ue,g(oe)},Me.clampFn=function(Ke,it){return Math.sqrt(Ke*Ke+it*it)<C.MINDRAG&&(Ke=0,it=0),[Ke,it]},h.init(Me)}function Le(Ke,it){if(Oe)Oe(Ke,it);else{var ft=[Ke,-it],dt=[Math.cos(he),Math.sin(he)],kt=Math.abs(T.dot(ft,dt)/Math.sqrt(T.dot(ft,ft)));isNaN(kt)||(Oe=kt<.5?ze:qe)}var Tt,St={};Tt=St,null!==Ne?Tt[X.id+".radialaxis.angle"]=Ne:null!==je&&(Tt[X.id+".radialaxis.range["+$+"]"]=je),oe.emit("plotly_relayouting",St)}function Ue(){null!==Ne?o.call("_guiRelayout",oe,X.id+".radialaxis.angle",Ne):null!==je&&o.call("_guiRelayout",oe,X.id+".radialaxis.range["+$+"]",je)}function ze(Ke,it){if(0!==$){Ne=Math.atan2(Te-(De+it),Ie+Ke-we),X.vangles&&(Ne=ae(Ne,X.vangles)),Ne=Z(Ne);var kt=p(we,Te)+b(-Ne);fe["radial-axis"].attr("transform",kt),fe["radial-line"].select("line").attr("transform",kt);var St=X.gd._fullLayout;X.updateRadialAxisTitle(St,St[X.id],Ne)}}function qe(Ke,it){var ft=T.dot([Ke,-it],[Math.cos(he),Math.sin(he)]);if(je=Ae-Ce*ft,Ce>0==($?je>me:je<Pe)){var dt=oe._fullLayout,kt=dt[X.id];xe.range[$]=je,xe._rl[$]=je,X.updateRadialAxis(dt,kt),X.xaxis.setRange(),X.xaxis.setScale(),X.yaxis.setRange(),X.yaxis.setScale();var St=!1;for(var Tt in X.traceHash){var lt=X.traceHash[Tt],ot=T.filterVisible(lt);lt[0][0].trace._module.plot(oe,X,ot,kt),o.traceIs(Tt,"gl")&&ot.length&&(St=!0)}St&&(v(oe),_(oe))}else je=null}},G.updateAngularDrag=function(ne){var Q=this,$=Q.gd,X=Q.layers,oe=Q.radius,fe=Q.angularAxis,ue=Q.cx,ge=Q.cy,we=Q.cxx,Te=Q.cyy,xe=C.angularDragBoxSize,ye=c.makeDragger(X,"path","angulardrag",!1===ne.dragmode?"none":"move"),_e={element:ye,gd:$};function Ie(Me,Le){return Math.atan2(Te+xe-Le,Me-we-xe)}!1===ne.dragmode?_e.dragmode=!1:S.select(ye).attr("d",Q.pathAnnulus(oe,oe+xe)).attr("transform",p(ue,ge)).call(x,"move");var De,be,he,ce,me,Pe,Ae=X.frontplot.select(".scatterlayer").selectAll(".trace"),Ce=Ae.selectAll(".point"),Oe=Ae.selectAll(".textpoint");function Ne(Me,Le){var Ue=Q.gd._fullLayout,ze=Ue[Q.id],qe=Ie(De+Me*ne._invScaleX,be+Le*ne._invScaleY),Ke=Z(qe-Pe);if(ce=he+Ke,X.frontplot.attr("transform",p(Q.xOffset2,Q.yOffset2)+b([-Ke,we,Te])),Q.vangles){me=Q.radialAxisAngle+Ke;var it=p(ue,ge)+b(-Ke),ft=p(ue,ge)+b(-me);X.bg.attr("transform",it),X["radial-grid"].attr("transform",it),X["radial-axis"].attr("transform",ft),X["radial-line"].select("line").attr("transform",ft),Q.updateRadialAxisTitle(Ue,ze,me)}else Q.clipPaths.forTraces.select("path").attr("transform",p(we,Te)+b(Ke));Ce.each(function(){var ot=S.select(this),Rt=t.getTranslate(ot);ot.attr("transform",p(Rt.x,Rt.y)+b([Ke]))}),Oe.each(function(){var ot=S.select(this),Rt=ot.select("text"),Vt=t.getTranslate(ot);ot.attr("transform",b([Ke,Rt.attr("x"),Rt.attr("y")])+p(Vt.x,Vt.y))}),fe.rotation=T.modHalf(ce,360),Q.updateAngularAxis(Ue,ze),Q._hasClipOnAxisFalse&&!T.isFullCircle(Q.sectorInRad)&&Ae.call(t.hideOutsideRangePoints,Q);var dt=!1;for(var kt in Q.traceHash)if(o.traceIs(kt,"gl")){var St=Q.traceHash[kt],Tt=T.filterVisible(St);St[0][0].trace._module.plot($,Q,Tt,ze),Tt.length&&(dt=!0)}dt&&(v($),_($));var lt={};je(lt),$.emit("plotly_relayouting",lt)}function je(Me){Me[Q.id+".angularaxis.rotation"]=ce,Q.vangles&&(Me[Q.id+".radialaxis.angle"]=me)}function ve(){Oe.select("text").attr("transform",null);var Me={};je(Me),o.call("_guiRelayout",$,Me)}_e.prepFn=function(Me,Le,Ue){he=ne[Q.id].angularaxis.rotation;var qe=ye.getBoundingClientRect();De=Le-qe.left,be=Ue-qe.top,$._fullLayout._calcInverseTransform($);var Ke=T.apply3DTransform(ne._invTransform)(De,be);Pe=Ie(De=Ke[0],be=Ke[1]),_e.moveFn=Ne,_e.doneFn=ve,g($)},Q.vangles&&!T.isFullCircle(Q.sectorInRad)&&(_e.prepFn=T.noop,x(S.select(ye),null)),h.init(_e)},G.isPtInside=function(ne){if(this.isSmith)return!0;var Q=this.sectorInRad,$=this.vangles,X=this.angularAxis.c2g(ne.theta),oe=this.radialAxis,fe=oe.c2l(ne.r);return($?w.isPtInsidePolygon:T.isPtInsideSector)(fe,X,oe._rl,Q,$)},G.pathArc=function(ne){var Q=this.sectorInRad,$=this.vangles;return($?w.pathPolygon:T.pathArc)(ne,Q[0],Q[1],$)},G.pathSector=function(ne){var Q=this.sectorInRad,$=this.vangles;return($?w.pathPolygon:T.pathSector)(ne,Q[0],Q[1],$)},G.pathAnnulus=function(ne,Q){var $=this.sectorInRad,X=this.vangles;return(X?w.pathPolygonAnnulus:T.pathAnnulus)(ne,Q,$[0],$[1],X)},G.pathSubplot=function(){var ne=this.innerRadius,Q=this.radius;return ne?this.pathAnnulus(ne,Q):this.pathSector(Q)},G.fillViewInitialKey=function(ne,Q){ne in this.viewInitial||(this.viewInitial[ne]=Q)}},57696:function(ie,F,e){"use strict";var S=e(3400),k=e(78344),o=S.deg2rad,T=S.rad2deg;ie.exports=function(b,p,l){switch(k(b,l),b._id){case"x":case"radialaxis":r=p._subplot,(t=b).setGeometry=function(){var n=t._rl[0],a=t._rl[1],s=r.innerRadius,c=(r.radius-s)/(a-n),h=s/c,u=n>a?function(y){return y<=0}:function(y){return y>=0};t.c2g=function(y){var d=t.c2l(y)-n;return(u(d)?d:0)+h},t.g2c=function(y){return t.l2c(y+n-h)},t.g2p=function(y){return y*c},t.c2p=function(y){return t.g2p(t.c2g(y))}};break;case"angularaxis":!function(t,i){var r=t.type;if("linear"===r){var n=t.d2c,a=t.c2d;t.d2c=function(s,c){return h=n(s),"degrees"===c?o(h):h;var h},t.c2d=function(s,c){return a((h=s,"degrees"===c?T(h):h));var h}}t.makeCalcdata=function(s,c){var h,u,y=s[c],d=s._length,m=function(f){return t.d2c(f,s.thetaunit)};if(y)for(h=new Array(d),u=0;u<d;u++)h[u]=m(y[u]);else{var g=c+"0",x="d"+c,v=g in s?m(s[g]):0,_=s[x]?m(s[x]):(t.period||2*Math.PI)/d;for(h=new Array(d),u=0;u<d;u++)h[u]=v+u*_}return h},t.setGeometry=function(){var s,c,h,u,y=i.sector,d=y.map(o),m={clockwise:-1,counterclockwise:1}[t.direction],g=o(t.rotation),x=function(C){return m*C+g},v=function(C){return(C-g)/m};switch(r){case"linear":c=s=S.identity,u=o,h=T,t.range=S.isFullCircle(d)?[y[0],y[0]+360]:d.map(v).map(T);break;case"category":var _=t._categories.length,f=t.period?Math.max(t.period,_):_;0===f&&(f=1),c=u=function(C){return 2*C*Math.PI/f},s=h=function(C){return C*f/Math.PI/2},t.range=[0,f]}t.c2g=function(C){return x(c(C))},t.g2c=function(C){return s(v(C))},t.t2g=function(C){return x(u(C))},t.g2t=function(C){return h(v(C))}}}(b,p)}var t,r}},55012:function(ie){"use strict";ie.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},36416:function(ie){"use strict";function F(o){return o<0?-1:o>0?1:0}function e(o){var T=o[0],b=o[1];if(!isFinite(T)||!isFinite(b))return[1,0];var p=(T+1)*(T+1)+b*b;return[(T*T+b*b-1)/p,2*b/p]}function S(o,T){return[T[0]*o.radius+o.cx,-T[1]*o.radius+o.cy]}function k(o,T){return T*o.radius}ie.exports={smith:e,reactanceArc:function(o,T,b,p){var l=S(o,e([b,T])),t=l[0],i=l[1],r=S(o,e([p,T])),n=r[0],a=r[1];if(0===T)return["M"+t+","+i,"L"+n+","+a].join(" ");var s=k(o,1/Math.abs(T));return["M"+t+","+i,"A"+s+","+s+" 0 0,"+(T<0?1:0)+" "+n+","+a].join(" ")},resistanceArc:function(o,T,b,p){var l=k(o,1/(T+1)),t=S(o,e([T,b])),i=t[0],r=t[1],n=S(o,e([T,p])),a=n[0],s=n[1];if(F(b)!==F(p)){var c=S(o,e([T,0]));return["M"+i+","+r,"A"+l+","+l+" 0 0,"+(0<b?0:1)+" "+c[0]+","+c[1],"A"+l+","+l+" 0 0,"+(p<0?0:1)+a+","+s].join(" ")}return["M"+i+","+r,"A"+l+","+l+" 0 0,"+(p<b?0:1)+" "+a+","+s].join(" ")},smithTransform:S}},47788:function(ie,F,e){"use strict";var S=e(84888).KY,k=e(3400).counterRegex,o=e(62400),T=e(55012),b=T.attr,p=T.name,l=k(p),t={};t[b]={valType:"subplotid",dflt:p,editType:"calc"},ie.exports={attr:b,name:p,idRoot:p,idRegex:l,attrRegex:l,attributes:t,layoutAttributes:e(6183),supplyLayoutDefaults:e(22836),plot:function(i){for(var r=i._fullLayout,n=i.calcdata,a=r._subplots[p],s=0;s<a.length;s++){var c=a[s],h=S(n,p,c),u=r[c]._subplot;u||(u=o(i,c,!0),r[c]._subplot=u),u.plot(h,r,i._promises)}},clean:function(i,r,n,a){for(var s=a._subplots[p]||[],c=0;c<s.length;c++){var h=s[c],u=a[h]._subplot;if(!r[h]&&u)for(var y in u.framework.remove(),u.clipPaths)u.clipPaths[y].remove()}},toSVG:e(57952).toSVG}},6183:function(ie,F,e){"use strict";var S=e(22548),k=e(94724),o=e(86968).u,T=e(3400).extendFlat,b=e(67824).overrideAll,p=b({color:k.color,showline:T({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:T({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,griddash:k.griddash},"plot","from-root"),l=b({ticklen:k.ticklen,tickwidth:T({},k.tickwidth,{dflt:2}),tickcolor:k.tickcolor,showticklabels:k.showticklabels,labelalias:k.labelalias,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,tickfont:k.tickfont,tickformat:k.tickformat,hoverformat:k.hoverformat,layer:k.layer},"plot","from-root"),t=T({visible:T({},k.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:T({},k.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},p,l),i=T({visible:T({},k.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:k.ticks,editType:"calc"},p,l);ie.exports={domain:o({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:S.background},realaxis:t,imaginaryaxis:i,editType:"calc"}},22836:function(ie,F,e){"use strict";var S,k,o,T=e(3400),b=e(76308),p=e(31780),l=e(168),t=e(84888).op,i=e(42568),r=e(95936),n=e(42136),a=e(78344),s=e(6183),c=e(55012),h=c.axisNames,u=(S=function(d){return T.isTypedArray(d)&&(d=Array.from(d)),d.slice().reverse().map(function(m){return-m}).concat([0]).concat(d)},k=String,o={},function(d){var m=k?k(d):d;if(m in o)return o[m];var g=S(d);return o[m]=g,g});function y(d,m,g,x){var v=g("bgcolor");x.bgColor=b.combine(v,x.paper_bgcolor);var _,f=t(x.fullData,c.name,x.id),C=x.layoutOut;function w(G,W){return g(_+"."+G,W)}for(var E=0;E<h.length;E++){T.isPlainObject(d[_=h[E]])||(d[_]={});var P=d[_],L=p.newContainer(m,_);L._id=L._name=_,L._attr=x.id+"."+_,L._traceIndices=f.map(function(G){return G._expandedIndex});var O=w("visible");if(L.type="linear",a(L,C),i(P,L,w,L.type),O){var z,V,R,U,Z="realaxis"===_;Z&&w("side"),Z?w("tickvals"):w("tickvals",u(m.realaxis.tickvals||s.realaxis.tickvals.dflt)),T.isTypedArray(L.tickvals)&&(L.tickvals=Array.from(L.tickvals));var N=x.font||{};O&&(V=(z=w("color"))===P.color?z:N.color,R=N.size,U=N.family),r(P,L,w,L.type,{noAutotickangles:!0,noTicklabelstep:!0,noAng:!Z,noExp:!0,font:{color:V,size:R,family:U}}),T.coerce2(d,m,s,_+".ticklen"),T.coerce2(d,m,s,_+".tickwidth"),T.coerce2(d,m,s,_+".tickcolor",m.color),w("ticks")||(delete m[_].ticklen,delete m[_].tickwidth,delete m[_].tickcolor),n(P,L,w,{dfltColor:z,bgColor:x.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:s[_]}),w("layer")}w("hoverformat"),delete L.type,L._input=P}}ie.exports=function(d,m,g){l(d,m,g,{noUirevision:!0,type:c.name,attributes:s,handleDefaults:y,font:m.font,paper_bgcolor:m.paper_bgcolor,fullData:g,layoutOut:m})}},168:function(ie,F,e){"use strict";var S=e(3400),k=e(31780),o=e(86968).Q;ie.exports=function(T,b,p,l){var t,i,n=l.attributes,a=l.handleDefaults,s=l.partition||"x",c=b._subplots[l.type],h=c.length,u=h&&c[0].replace(/\d+$/,"");function y(x,v){return S.coerce(t,i,n,x,v)}for(var d=0;d<h;d++){var m=c[d];t=T[m]?T[m]:T[m]={},i=k.newContainer(b,m,u),l.noUirevision||y("uirevision",b.uirevision);var g={};g[s]=[d/h,(d+1)/h],o(i,b,y,g),l.id=m,a(t,i,y,l)}}},21776:function(ie,F,e){"use strict";function k(o){var T=o.description?" "+o.description:"",b=o.keys||[];if(b.length>0){for(var p=[],l=0;l<b.length;l++)p[l]="`"+b[l]+"`";T+="Finally, the template string has access to ",T=1===b.length?T+"variable "+p[0]:T+"variables "+p.slice(0,-1).join(", ")+" and "+p.slice(-1)+"."}return T}e(26880),F.Ks=function(o,T){o=o||{},k(T=T||{});var b={valType:"string",dflt:"",editType:o.editType||"none"};return!1!==o.arrayOk&&(b.arrayOk=!0),b},F.Gw=function(o,T){o=o||{},k(T=T||{});var b={valType:"string",dflt:"",editType:o.editType||"calc"};return!1!==o.arrayOk&&(b.arrayOk=!0),b},F.ye=function(o,T){return o=o||{},k(T=T||{}),{valType:"string",dflt:"",editType:o.editType||"arraydraw"}}},19352:function(ie,F,e){"use strict";var S=e(24696),k=e(84888).KY,o=e(3400).counterRegex,T="ternary";F.name=T;var b=F.attr="subplot";F.idRoot=T,F.idRegex=F.attrRegex=o(T),(F.attributes={})[b]={valType:"subplotid",dflt:"ternary",editType:"calc"},F.layoutAttributes=e(86379),F.supplyLayoutDefaults=e(38536),F.plot=function(p){for(var l=p._fullLayout,t=p.calcdata,i=l._subplots[T],r=0;r<i.length;r++){var n=i[r],a=k(t,T,n),s=l[n]._subplot;s||(s=new S({id:n,graphDiv:p,container:l._ternarylayer.node()},l),l[n]._subplot=s),s.plot(a,l,p._promises)}},F.clean=function(p,l,t,i){for(var r=i._subplots[T]||[],n=0;n<r.length;n++){var a=r[n],s=i[a]._subplot;!l[a]&&s&&(s.plotContainer.remove(),s.clipDef.remove(),s.clipDefRelative.remove(),s.layers["a-title"].remove(),s.layers["b-title"].remove(),s.layers["c-title"].remove())}}},86379:function(ie,F,e){"use strict";var S=e(22548),k=e(86968).u,o=e(94724),T=e(67824).overrideAll,b=e(92880).extendFlat,p={title:{text:o.title.text,font:o.title.font},color:o.color,tickmode:o.minor.tickmode,nticks:b({},o.nticks,{dflt:6,min:1}),tick0:o.tick0,dtick:o.dtick,tickvals:o.tickvals,ticktext:o.ticktext,ticks:o.ticks,ticklen:o.ticklen,tickwidth:o.tickwidth,tickcolor:o.tickcolor,ticklabelstep:o.ticklabelstep,showticklabels:o.showticklabels,labelalias:o.labelalias,showtickprefix:o.showtickprefix,tickprefix:o.tickprefix,showticksuffix:o.showticksuffix,ticksuffix:o.ticksuffix,showexponent:o.showexponent,exponentformat:o.exponentformat,minexponent:o.minexponent,separatethousands:o.separatethousands,tickfont:o.tickfont,tickangle:o.tickangle,tickformat:o.tickformat,tickformatstops:o.tickformatstops,hoverformat:o.hoverformat,showline:b({},o.showline,{dflt:!0}),linecolor:o.linecolor,linewidth:o.linewidth,showgrid:b({},o.showgrid,{dflt:!0}),gridcolor:o.gridcolor,gridwidth:o.gridwidth,griddash:o.griddash,layer:o.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:o._deprecated.title,titlefont:o._deprecated.titlefont}},l=ie.exports=T({domain:k({name:"ternary"}),bgcolor:{valType:"color",dflt:S.background},sum:{valType:"number",dflt:1,min:0},aaxis:p,baxis:p,caxis:p},"plot","from-root");l.uirevision={valType:"any",editType:"none"},l.aaxis.uirevision=l.baxis.uirevision=l.caxis.uirevision={valType:"any",editType:"none"}},38536:function(ie,F,e){"use strict";var S=e(76308),k=e(31780),o=e(3400),T=e(168),b=e(95936),p=e(42568),l=e(25404),t=e(26332),i=e(42136),r=e(86379),n=["aaxis","baxis","caxis"];function a(c,h,u,y){var d,m,g,x=u("bgcolor"),v=u("sum");y.bgColor=S.combine(x,y.paper_bgcolor);for(var _=0;_<n.length;_++)m=c[d=n[_]]||{},(g=k.newContainer(h,d))._name=d,s(m,g,y,h);var f=h.aaxis,C=h.baxis,w=h.caxis;f.min+C.min+w.min>=v&&(f.min=0,C.min=0,w.min=0,c.aaxis&&delete c.aaxis.min,c.baxis&&delete c.baxis.min,c.caxis&&delete c.caxis.min)}function s(c,h,u,y){var d=r[h._name];function m(C,w){return o.coerce(c,h,d,C,w)}m("uirevision",y.uirevision),h.type="linear";var g=m("color"),x=g!==d.color.dflt?g:u.font.color,v=h._name.charAt(0).toUpperCase(),_="Component "+v,f=m("title.text",_);h._hovertitle=f===_?f:v,o.coerceFont(m,"title.font",u.font,{overrideDflt:{size:o.bigFont(u.font.size),color:x}}),m("min"),t(c,h,m,"linear"),p(c,h,m,"linear"),b(c,h,m,"linear",{noAutotickangles:!0}),l(c,h,m,{outerTicks:!0}),m("showticklabels")&&(o.coerceFont(m,"tickfont",u.font,{overrideDflt:{color:x}}),m("tickangle"),m("tickformat")),i(c,h,m,{dfltColor:g,bgColor:u.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:d}),m("hoverformat"),m("layer")}ie.exports=function(c,h,u){T(c,h,u,{type:"ternary",attributes:r,handleDefaults:a,font:h.font,paper_bgcolor:h.paper_bgcolor})}},24696:function(ie,F,e){"use strict";var S=e(33428),k=e(49760),o=e(24040),T=e(3400),b=T.strTranslate,p=T._,l=e(76308),t=e(43616),i=e(78344),r=e(92880).extendFlat,n=e(7316),a=e(54460),s=e(86476),c=e(93024),h=e(72760),u=h.freeMode,y=h.rectMode,d=e(81668),m=e(22676).prepSelect,g=e(22676).selectOnClick,x=e(22676).clearOutline,v=e(22676).clearSelectionsCache,_=e(33816);function f(R,U){this.id=R.id,this.graphDiv=R.graphDiv,this.init(U),this.makeFramework(U),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}ie.exports=f;var C=f.prototype;C.init=function(R){this.container=R._ternarylayer,this.defs=R._defs,this.layoutId=R._uid,this.traceHash={},this.layers={}},C.plot=function(R,U){var Z=this,N=U[Z.id],G=U._size;Z._hasClipOnAxisFalse=!1;for(var W=0;W<R.length;W++)if(!1===R[W][0].trace.cliponaxis){Z._hasClipOnAxisFalse=!0;break}Z.updateLayers(N),Z.adjustLayout(N,G),n.generalUpdatePerTraceModule(Z.graphDiv,Z,R,N),Z.layers.plotbg.select("path").call(l.fill,N.bgcolor)},C.makeFramework=function(R){var U=this,Z=U.graphDiv,N=R[U.id],G=U.clipId="clip"+U.layoutId+U.id,W=U.clipIdRelative="clip-relative"+U.layoutId+U.id;U.clipDef=T.ensureSingleById(R._clips,"clipPath",G,function(ae){ae.append("path").attr("d","M0,0Z")}),U.clipDefRelative=T.ensureSingleById(R._clips,"clipPath",W,function(ae){ae.append("path").attr("d","M0,0Z")}),U.plotContainer=T.ensureSingle(U.container,"g",U.id),U.updateLayers(N),t.setClipUrl(U.layers.backplot,G,Z),t.setClipUrl(U.layers.grids,G,Z)},C.updateLayers=function(R){var U=this.layers,Z=["draglayer","plotbg","backplot","grids"];"below traces"===R.aaxis.layer&&Z.push("aaxis","aline"),"below traces"===R.baxis.layer&&Z.push("baxis","bline"),"below traces"===R.caxis.layer&&Z.push("caxis","cline"),Z.push("frontplot"),"above traces"===R.aaxis.layer&&Z.push("aaxis","aline"),"above traces"===R.baxis.layer&&Z.push("baxis","bline"),"above traces"===R.caxis.layer&&Z.push("caxis","cline");var N=this.plotContainer.selectAll("g.toplevel").data(Z,String),G=["agrid","bgrid","cgrid"];N.enter().append("g").attr("class",function(W){return"toplevel "+W}).each(function(W){var ae=S.select(this);U[W]=ae,"frontplot"===W?ae.append("g").classed("scatterlayer",!0):"backplot"===W?ae.append("g").classed("maplayer",!0):"plotbg"===W?ae.append("path").attr("d","M0,0Z"):"aline"===W||"bline"===W||"cline"===W?ae.append("path"):"grids"===W&&G.forEach(function(re){U[re]=ae.append("g").classed("grid "+re,!0)})}),N.order()};var w=Math.sqrt(4/3);C.adjustLayout=function(R,U){var Z,N,G,W,ae,re,ne=this,Q=R.domain,$=(Q.x[0]+Q.x[1])/2,X=(Q.y[0]+Q.y[1])/2,oe=Q.x[1]-Q.x[0],fe=Q.y[1]-Q.y[0],ue=oe*U.w,ge=fe*U.h,we=R.sum,Te=R.aaxis.min,xe=R.baxis.min,ye=R.caxis.min;ue>w*ge?G=(W=ge)*w:W=(G=ue)/w,ae=oe*G/ue,re=fe*W/ge,N=U.t+U.h*(1-X)-W/2,ne.x0=Z=U.l+U.w*$-G/2,ne.y0=N,ne.w=G,ne.h=W,ne.sum=we,ne.xaxis={type:"linear",range:[Te+2*ye-we,we-Te-2*xe],domain:[$-ae/2,$+ae/2],_id:"x"},i(ne.xaxis,ne.graphDiv._fullLayout),ne.xaxis.setScale(),ne.xaxis.isPtWithinRange=function(Oe){return Oe.a>=ne.aaxis.range[0]&&Oe.a<=ne.aaxis.range[1]&&Oe.b>=ne.baxis.range[1]&&Oe.b<=ne.baxis.range[0]&&Oe.c>=ne.caxis.range[1]&&Oe.c<=ne.caxis.range[0]},ne.yaxis={type:"linear",range:[Te,we-xe-ye],domain:[X-re/2,X+re/2],_id:"y"},i(ne.yaxis,ne.graphDiv._fullLayout),ne.yaxis.setScale(),ne.yaxis.isPtWithinRange=function(){return!0};var _e=ne.yaxis.domain[0],Ie=ne.aaxis=r({},R.aaxis,{range:[Te,we-xe-ye],side:"left",tickangle:(+R.aaxis.tickangle||0)-30,domain:[_e,_e+re*w],anchor:"free",position:0,_id:"y",_length:G});i(Ie,ne.graphDiv._fullLayout),Ie.setScale();var De=ne.baxis=r({},R.baxis,{range:[we-Te-ye,xe],side:"bottom",domain:ne.xaxis.domain,anchor:"free",position:0,_id:"x",_length:G});i(De,ne.graphDiv._fullLayout),De.setScale();var be=ne.caxis=r({},R.caxis,{range:[we-Te-xe,ye],side:"right",tickangle:(+R.caxis.tickangle||0)+30,domain:[_e,_e+re*w],anchor:"free",position:0,_id:"y",_length:G});i(be,ne.graphDiv._fullLayout),be.setScale();var he="M"+Z+","+(N+W)+"h"+G+"l-"+G/2+",-"+W+"Z";ne.clipDef.select("path").attr("d",he),ne.layers.plotbg.select("path").attr("d",he);var ce="M0,"+W+"h"+G+"l-"+G/2+",-"+W+"Z";ne.clipDefRelative.select("path").attr("d",ce);var me=b(Z,N);ne.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",me),ne.clipDefRelative.select("path").attr("transform",null);var Pe=b(Z-De._offset,N+W);ne.layers.baxis.attr("transform",Pe),ne.layers.bgrid.attr("transform",Pe);var Ae=b(Z+G/2,N)+"rotate(30)"+b(0,-Ie._offset);ne.layers.aaxis.attr("transform",Ae),ne.layers.agrid.attr("transform",Ae);var Ce=b(Z+G/2,N)+"rotate(-30)"+b(0,-be._offset);ne.layers.caxis.attr("transform",Ce),ne.layers.cgrid.attr("transform",Ce),ne.drawAxes(!0),ne.layers.aline.select("path").attr("d",Ie.showline?"M"+Z+","+(N+W)+"l"+G/2+",-"+W:"M0,0").call(l.stroke,Ie.linecolor||"#000").style("stroke-width",(Ie.linewidth||0)+"px"),ne.layers.bline.select("path").attr("d",De.showline?"M"+Z+","+(N+W)+"h"+G:"M0,0").call(l.stroke,De.linecolor||"#000").style("stroke-width",(De.linewidth||0)+"px"),ne.layers.cline.select("path").attr("d",be.showline?"M"+(Z+G/2)+","+N+"l"+G/2+","+W:"M0,0").call(l.stroke,be.linecolor||"#000").style("stroke-width",(be.linewidth||0)+"px"),ne.graphDiv._context.staticPlot||ne.initInteractions(),t.setClipUrl(ne.layers.frontplot,ne._hasClipOnAxisFalse?null:ne.clipId,ne.graphDiv)},C.drawAxes=function(R){var U=this,Z=U.graphDiv,N=U.id.substr(7)+"title",G=U.layers,W=U.aaxis,ae=U.baxis,re=U.caxis;if(U.drawAx(W),U.drawAx(ae),U.drawAx(re),R){var ne=Math.max(W.showticklabels?W.tickfont.size/2:0,(re.showticklabels?.75*re.tickfont.size:0)+("outside"===re.ticks?.87*re.ticklen:0)),Q=(ae.showticklabels?ae.tickfont.size:0)+("outside"===ae.ticks?ae.ticklen:0)+3;G["a-title"]=d.draw(Z,"a"+N,{propContainer:W,propName:U.id+".aaxis.title",placeholder:p(Z,"Click to enter Component A title"),attributes:{x:U.x0+U.w/2,y:U.y0-W.title.font.size/3-ne,"text-anchor":"middle"}}),G["b-title"]=d.draw(Z,"b"+N,{propContainer:ae,propName:U.id+".baxis.title",placeholder:p(Z,"Click to enter Component B title"),attributes:{x:U.x0-Q,y:U.y0+U.h+.83*ae.title.font.size+Q,"text-anchor":"middle"}}),G["c-title"]=d.draw(Z,"c"+N,{propContainer:re,propName:U.id+".caxis.title",placeholder:p(Z,"Click to enter Component C title"),attributes:{x:U.x0+U.w+Q,y:U.y0+U.h+.83*re.title.font.size+Q,"text-anchor":"middle"}})}},C.drawAx=function(R){var U,Z=this,N=Z.graphDiv,G=R._name,W=G.charAt(0),ae=R._id,re=Z.layers[G],ne=W+"tickLayout",Q=(U=R).ticks+String(U.ticklen)+String(U.showticklabels);Z[ne]!==Q&&(re.selectAll("."+ae+"tick").remove(),Z[ne]=Q),R.setScale();var $=a.calcTicks(R),X=a.clipEnds(R,$),oe=a.makeTransTickFn(R),fe=a.getTickSigns(R)[2],ue=T.deg2rad(30),ge=fe*(R.linewidth||1)/2,we=fe*R.ticklen,Te=Z.w,xe=Z.h,ye="b"===W?"M0,"+ge+"l"+Math.sin(ue)*we+","+Math.cos(ue)*we:"M"+ge+",0l"+Math.cos(ue)*we+","+-Math.sin(ue)*we,_e={a:"M0,0l"+xe+",-"+Te/2,b:"M0,0l-"+Te/2+",-"+xe,c:"M0,0l-"+xe+","+Te/2}[W];a.drawTicks(N,R,{vals:"inside"===R.ticks?X:$,layer:re,path:ye,transFn:oe,crisp:!1}),a.drawGrid(N,R,{vals:X,layer:Z.layers[W+"grid"],path:_e,transFn:oe,crisp:!1}),a.drawLabels(N,R,{vals:$,layer:re,transFn:oe,labelFns:a.makeLabelFns(R,0,30)})};var E=_.MINZOOM/2+.87,P="m-0.87,.5h"+E+"v3h-"+(E+5.2)+"l"+(E/2+2.6)+",-"+(.87*E+4.5)+"l2.6,1.5l-"+E/2+","+.87*E+"Z",L="m0.87,.5h-"+E+"v3h"+(E+5.2)+"l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-2.6,1.5l"+E/2+","+.87*E+"Z",O="m0,1l"+E/2+","+.87*E+"l2.6,-1.5l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-"+(E/2+2.6)+","+(.87*E+4.5)+"l2.6,1.5l"+E/2+",-"+.87*E+"Z",z=!0;function V(R){S.select(R).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}C.clearOutline=function(){v(this.dragOptions),x(this.dragOptions.gd)},C.initInteractions=function(){var R,U,Z,N,G,W,ae,re,ne,Q,$,X,oe=this,fe=oe.layers.plotbg.select("path").node(),ue=oe.graphDiv,ge=ue._fullLayout._zoomlayer;function we(ce){var me={};return me[oe.id+".aaxis.min"]=ce.a,me[oe.id+".baxis.min"]=ce.b,me[oe.id+".caxis.min"]=ce.c,me}function Te(ce,me){var Pe=ue._fullLayout.clickmode;V(ue),2===ce&&(ue.emit("plotly_doubleclick",null),o.call("_guiRelayout",ue,we({a:0,b:0,c:0}))),Pe.indexOf("select")>-1&&1===ce&&g(me,ue,[oe.xaxis],[oe.yaxis],oe.id,oe.dragOptions),Pe.indexOf("event")>-1&&c.click(ue,me,oe.id)}function xe(ce,me){return 1-me/oe.h}function ye(ce,me){return 1-(ce+(oe.h-me)/Math.sqrt(3))/oe.w}function _e(ce,me){return(ce-(oe.h-me)/Math.sqrt(3))/oe.w}function Ie(ce,me){var Pe=Z+ce*R,Ae=N+me*U,Ce=Math.max(0,Math.min(1,xe(0,N),xe(0,Ae))),Oe=Math.max(0,Math.min(1,ye(Z,N),ye(Pe,Ae))),Ne=Math.max(0,Math.min(1,_e(Z,N),_e(Pe,Ae))),je=(Ce/2+Ne)*oe.w,ve=(1-Ce/2-Oe)*oe.w,Me=(je+ve)/2,Le=ve-je,Ue=(1-Ce)*oe.h,ze=Ue-Le/w;Le<_.MINZOOM?(ae=G,$.attr("d",ne),X.attr("d","M0,0Z")):(ae={a:G.a+Ce*W,b:G.b+Oe*W,c:G.c+Ne*W},$.attr("d",ne+"M"+je+","+Ue+"H"+ve+"L"+Me+","+ze+"L"+je+","+Ue+"Z"),X.attr("d","M"+Z+","+N+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+je+","+Ue+P+"M"+ve+","+Ue+L+"M"+Me+","+ze+O)),Q||($.transition().style("fill",re>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),X.transition().style("opacity",1).duration(200),Q=!0),ue.emit("plotly_relayouting",we(ae))}function De(){V(ue),ae!==G&&(o.call("_guiRelayout",ue,we(ae)),z&&ue.data&&ue._context.showTips&&(T.notifier(p(ue,"Double-click to zoom back out"),"long"),z=!1))}function be(ce,me){var Pe=ce/oe.xaxis._m,Ae=me/oe.yaxis._m,Ce=[(ae={a:G.a-Ae,b:G.b+(Pe+Ae)/2,c:G.c-(Pe-Ae)/2}).a,ae.b,ae.c].sort(T.sorterAsc),Oe=Ce.indexOf(ae.a),Ne=Ce.indexOf(ae.b),je=Ce.indexOf(ae.c);Ce[0]<0&&(Ce[1]+Ce[0]/2<0?(Ce[2]+=Ce[0]+Ce[1],Ce[0]=Ce[1]=0):(Ce[2]+=Ce[0]/2,Ce[1]+=Ce[0]/2,Ce[0]=0),me=(G.a-(ae={a:Ce[Oe],b:Ce[Ne],c:Ce[je]}).a)*oe.yaxis._m,ce=(G.c-ae.c-G.b+ae.b)*oe.xaxis._m);var ve=b(oe.x0+ce,oe.y0+me);oe.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",ve);var Me=b(-ce,-me);oe.clipDefRelative.select("path").attr("transform",Me),oe.aaxis.range=[ae.a,oe.sum-ae.b-ae.c],oe.baxis.range=[oe.sum-ae.a-ae.c,ae.b],oe.caxis.range=[oe.sum-ae.a-ae.b,ae.c],oe.drawAxes(!1),oe._hasClipOnAxisFalse&&oe.plotContainer.select(".scatterlayer").selectAll(".trace").call(t.hideOutsideRangePoints,oe),ue.emit("plotly_relayouting",we(ae))}function he(){o.call("_guiRelayout",ue,we(ae))}this.dragOptions={element:fe,gd:ue,plotinfo:{id:oe.id,domain:ue._fullLayout[oe.id].domain,xaxis:oe.xaxis,yaxis:oe.yaxis},subplot:oe.id,prepFn:function(ce,me,Pe){oe.dragOptions.xaxes=[oe.xaxis],oe.dragOptions.yaxes=[oe.yaxis],R=ue._fullLayout._invScaleX,U=ue._fullLayout._invScaleY;var Ae=oe.dragOptions.dragmode=ue._fullLayout.dragmode;oe.dragOptions.minDrag=u(Ae)?1:void 0,"zoom"===Ae?(oe.dragOptions.moveFn=Ie,oe.dragOptions.clickFn=Te,oe.dragOptions.doneFn=De,function(Ce,Oe,Ne){var je=fe.getBoundingClientRect();Z=Oe-je.left,N=Ne-je.top,ue._fullLayout._calcInverseTransform(ue);var Me=T.apply3DTransform(ue._fullLayout._invTransform)(Z,N);Z=Me[0],N=Me[1],ae=G={a:oe.aaxis.range[0],b:oe.baxis.range[1],c:oe.caxis.range[1]},W=oe.aaxis.range[1]-G.a,re=k(oe.graphDiv._fullLayout[oe.id].bgcolor).getLuminance(),ne="M0,"+oe.h+"L"+oe.w/2+", 0L"+oe.w+","+oe.h+"Z",Q=!1,$=ge.append("path").attr("class","zoombox").attr("transform",b(oe.x0,oe.y0)).style({fill:re>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",ne),X=ge.append("path").attr("class","zoombox-corners").attr("transform",b(oe.x0,oe.y0)).style({fill:l.background,stroke:l.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),oe.clearOutline(ue)}(0,me,Pe)):"pan"===Ae?(oe.dragOptions.moveFn=be,oe.dragOptions.clickFn=Te,oe.dragOptions.doneFn=he,ae=G={a:oe.aaxis.range[0],b:oe.baxis.range[1],c:oe.caxis.range[1]},oe.clearOutline(ue)):(y(Ae)||u(Ae))&&m(ce,me,Pe,oe.dragOptions,Ae)}},fe.onmousemove=function(ce){c.hover(ue,ce,oe.id),ue._fullLayout._lasthover=fe,ue._fullLayout._hoversubplot=oe.id},fe.onmouseout=function(ce){ue._dragging||s.unhover(ue,ce)},s.init(this.dragOptions)}},24040:function(ie,F,e){"use strict";var S=e(24248),k=e(16628),o=e(52416),T=e(63620),b=e(52200).addStyleRule,p=e(92880),l=e(45464),t=e(64859),i=p.extendFlat,r=p.extendDeepAll;function n(g){var x=g.name,v=g.categories,_=g.meta;if(F.modules[x])S.log("Type "+x+" already registered");else{F.subplotsRegistry[g.basePlotModule.name]||function(z){var V=z.name;if(F.subplotsRegistry[V])S.log("Plot type "+V+" already registered.");else for(var R in h(z),F.subplotsRegistry[V]=z,F.componentsRegistry)d(R,z.name)}(g.basePlotModule);for(var f={},C=0;C<v.length;C++)f[v[C]]=!0,F.allCategories[v[C]]=!0;for(var w in F.modules[x]={_module:g,categories:f},_&&Object.keys(_).length&&(F.modules[x].meta=_),F.allTypes.push(x),F.componentsRegistry)u(w,x);g.layoutAttributes&&i(F.traceLayoutAttributes,g.layoutAttributes);var E=g.basePlotModule,P=E.name;if("mapbox"===P){var L=E.constants.styleRules;for(var O in L)b(".js-plotly-plot .plotly .mapboxgl-"+O,L[O])}"geo"!==P&&"mapbox"!==P||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}function a(g){if("string"!=typeof g.name)throw new Error("Component module *name* must be a string.");var x=g.name;for(var v in F.componentsRegistry[x]=g,g.layoutAttributes&&(g.layoutAttributes._isLinkedToArray&&o(F.layoutArrayContainers,x),h(g)),F.modules)u(x,v);for(var _ in F.subplotsRegistry)d(x,_);for(var f in F.transformsRegistry)y(x,f);g.schema&&g.schema.layout&&r(t,g.schema.layout)}function s(g){if("string"!=typeof g.name)throw new Error("Transform module *name* must be a string.");var x="Transform module "+g.name,v="function"==typeof g.transform,_="function"==typeof g.calcTransform;if(!v&&!_)throw new Error(x+" is missing a *transform* or *calcTransform* method.");for(var f in v&&_&&S.log([x+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),T(g.attributes)||S.log(x+" registered without an *attributes* object."),"function"!=typeof g.supplyDefaults&&S.log(x+" registered without a *supplyDefaults* method."),F.transformsRegistry[g.name]=g,F.componentsRegistry)y(f,g.name)}function c(g){var x=g.name,v=x.split("-")[0],_=g.dictionary,f=g.format,C=_&&Object.keys(_).length,w=f&&Object.keys(f).length,E=F.localeRegistry,P=E[x];if(P||(E[x]=P={}),v!==x){var L=E[v];L||(E[v]=L={}),C&&L.dictionary===P.dictionary&&(L.dictionary=_),w&&L.format===P.format&&(L.format=f)}C&&(P.dictionary=_),w&&(P.format=f)}function h(g){if(g.layoutAttributes){var x=g.layoutAttributes._arrayAttrRegexps;if(x)for(var v=0;v<x.length;v++)o(F.layoutArrayRegexes,x[v])}}function u(g,x){var v=F.componentsRegistry[g].schema;if(v&&v.traces){var _=v.traces[x];_&&r(F.modules[x]._module.attributes,_)}}function y(g,x){var v=F.componentsRegistry[g].schema;if(v&&v.transforms){var _=v.transforms[x];_&&r(F.transformsRegistry[x].attributes,_)}}function d(g,x){var v=F.componentsRegistry[g].schema;if(v&&v.subplots){var _=F.subplotsRegistry[x],f=_.layoutAttributes,C="subplot"===_.attr?_.name:_.attr;Array.isArray(C)&&(C=C[0]);var w=v.subplots[C];f&&w&&r(f,w)}}function m(g){return"object"==typeof g&&(g=g.type),g}F.modules={},F.allCategories={},F.allTypes=[],F.subplotsRegistry={},F.transformsRegistry={},F.componentsRegistry={},F.layoutArrayContainers=[],F.layoutArrayRegexes=[],F.traceLayoutAttributes={},F.localeRegistry={},F.apiMethodRegistry={},F.collectableSubplotTypes=null,F.register=function(g){if(F.collectableSubplotTypes=null,!g)throw new Error("No argument passed to Plotly.register.");g&&!Array.isArray(g)&&(g=[g]);for(var x=0;x<g.length;x++){var v=g[x];if(!v)throw new Error("Invalid module was attempted to be registered!");switch(v.moduleType){case"trace":n(v);break;case"transform":s(v);break;case"component":a(v);break;case"locale":c(v);break;case"apiMethod":F.apiMethodRegistry[v.name]=v.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},F.getModule=function(g){var x=F.modules[m(g)];return!!x&&x._module},F.traceIs=function(g,x){if("various"===(g=m(g)))return!1;var v=F.modules[g];return v||(g&&S.log("Unrecognized trace type "+g+"."),v=F.modules[l.type.dflt]),!!v.categories[x]},F.getTransformIndices=function(g,x){for(var v=[],_=g.transforms||[],f=0;f<_.length;f++)_[f].type===x&&v.push(f);return v},F.hasTransform=function(g,x){for(var v=g.transforms||[],_=0;_<v.length;_++)if(v[_].type===x)return!0;return!1},F.getComponentMethod=function(g,x){var v=F.componentsRegistry[g];return v&&v[x]||k},F.call=function(){var g=arguments[0],x=[].slice.call(arguments,1);return F.apiMethodRegistry[g].apply(null,x)}},91536:function(ie,F,e){"use strict";var S=e(24040),k=e(3400),o=k.extendFlat,T=k.extendDeep;function b(p){var l;switch(p){case"themes__thumb":l={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":l={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:l={}}return l}ie.exports=function(p,l){var t,n=p.layout,a=T([],p.data),s=T({},n,b(l.tileClass)),c=p._context||{};if(l.width&&(s.width=l.width),l.height&&(s.height=l.height),"thumbnail"===l.tileClass||"themes__thumb"===l.tileClass){s.annotations=[];var h=Object.keys(s);for(t=0;t<h.length;t++)["xaxis","yaxis","zaxis"].indexOf(h[t].slice(0,5))>-1&&(s[h[t]].title={text:""});for(t=0;t<a.length;t++){var u=a[t];u.showscale=!1,u.marker&&(u.marker.showscale=!1),S.traceIs(u,"pie-like")&&(u.textposition="none")}}if(Array.isArray(l.annotations))for(t=0;t<l.annotations.length;t++)s.annotations.push(l.annotations[t]);var y=Object.keys(s).filter(function(v){return v.match(/^scene\d*$/)});if(y.length){var d={};for("thumbnail"===l.tileClass&&(d={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),t=0;t<y.length;t++){var m=s[y[t]];m.xaxis||(m.xaxis={}),m.yaxis||(m.yaxis={}),m.zaxis||(m.zaxis={}),o(m.xaxis,d),o(m.yaxis,d),o(m.zaxis,d),m._scene=null}}var g=document.createElement("div");l.tileClass&&(g.className=l.tileClass);var x={gd:g,td:g,layout:s,data:a,config:{staticPlot:void 0===l.staticPlot||l.staticPlot,plotGlPixelRatio:void 0===l.plotGlPixelRatio?2:l.plotGlPixelRatio,displaylogo:l.displaylogo||!1,showLink:l.showLink||!1,showTips:l.showTips||!1,mapboxAccessToken:c.mapboxAccessToken}};return"transparent"!==l.setBackground&&(x.config.setBackground=l.setBackground||"opaque"),x.gd.defaultLayout=b(l.tileClass),x}},39792:function(ie,F,e){"use strict";var S=e(3400),k=e(67024),o=e(48616),T=e(81792);ie.exports=function(b,p){var l;return S.isPlainObject(b)||(l=S.getGraphDiv(b)),(p=p||{}).format=p.format||"png",p.width=p.width||null,p.height=p.height||null,p.imageDataOnly=!0,new Promise(function(t,i){l&&l._snapshotInProgress&&i(new Error("Snapshotting already in progress.")),S.isIE()&&"svg"!==p.format&&i(new Error(T.MSG_IE_BAD_FORMAT)),l&&(l._snapshotInProgress=!0);var r=k(b,p),n=p.filename||b.fn||"newplot";n+="."+p.format.replace("-","."),r.then(function(a){return l&&(l._snapshotInProgress=!1),o(a,n,p.format)}).then(function(a){t(a)}).catch(function(a){l&&(l._snapshotInProgress=!1),i(a)})})}},48616:function(ie,F,e){"use strict";var S=e(3400),k=e(81792);ie.exports=function(o,T,b){var p=document.createElement("a"),l="download"in p;return new Promise(function(t,i){var r,n;return S.isIE()?(r=k.createBlob(o,"svg"),window.navigator.msSaveBlob(r,T),r=null,t(T)):l?(r=k.createBlob(o,b),n=k.createObjectURL(r),p.href=n,p.download=T,document.body.appendChild(p),p.click(),document.body.removeChild(p),k.revokeObjectURL(n),r=null,t(T)):S.isSafari()?(k.octetStream(("svg"===b?",":";base64,")+encodeURIComponent(o)),t(T)):void i(new Error("download error"))})}},81792:function(ie,F,e){"use strict";var S=e(24040);F.getDelay=function(o){return o._has&&(o._has("gl3d")||o._has("gl2d")||o._has("mapbox"))?500:0},F.getRedrawFunc=function(o){return function(){S.getComponentMethod("colorbar","draw")(o)}},F.encodeSVG=function(o){return"data:image/svg+xml,"+encodeURIComponent(o)},F.encodeJSON=function(o){return"data:application/json,"+encodeURIComponent(o)};var k=window.URL||window.webkitURL;F.createObjectURL=function(o){return k.createObjectURL(o)},F.revokeObjectURL=function(o){return k.revokeObjectURL(o)},F.createBlob=function(o,T){if("svg"===T)return new window.Blob([o],{type:"image/svg+xml;charset=utf-8"});if("full-json"===T)return new window.Blob([o],{type:"application/json;charset=utf-8"});var b=function(p){for(var l=p.length,t=new ArrayBuffer(l),i=new Uint8Array(t),r=0;r<l;r++)i[r]=p.charCodeAt(r);return t}(window.atob(o));return new window.Blob([b],{type:"image/"+T})},F.octetStream=function(o){document.location.href="data:application/octet-stream"+o},F.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,F.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},78904:function(ie,F,e){"use strict";var S=e(81792),k={getDelay:S.getDelay,getRedrawFunc:S.getRedrawFunc,clone:e(91536),toSVG:e(37164),svgToImg:e(63268),toImage:e(61808),downloadImage:e(39792)};ie.exports=k},63268:function(ie,F,e){"use strict";var S=e(3400),k=e(61252).EventEmitter,o=e(81792);ie.exports=function(T){var b=T.emitter||new k,p=new Promise(function(l,t){var i=window.Image,r=T.svg,n=T.format||"png";if(S.isIE()&&"svg"!==n){var a=new Error(o.MSG_IE_BAD_FORMAT);return t(a),T.promise?p:b.emit("error",a)}var s,c,h=T.canvas,u=T.scale||1,m=u*(T.width||300),g=u*(T.height||150),x=h.getContext("2d",{willReadFrequently:!0}),v=new i;"svg"===n||S.isSafari()?c=o.encodeSVG(r):(s=o.createBlob(r,"svg"),c=o.createObjectURL(s)),h.width=m,h.height=g,v.onload=function(){var _;switch(s=null,o.revokeObjectURL(c),"svg"!==n&&x.drawImage(v,0,0,m,g),n){case"jpeg":_=h.toDataURL("image/jpeg");break;case"png":_=h.toDataURL("image/png");break;case"webp":_=h.toDataURL("image/webp");break;case"svg":_=c;break;default:var f="Image format is not jpeg, png, svg or webp.";if(t(new Error(f)),!T.promise)return b.emit("error",f)}l(_),T.promise||b.emit("success",_)},v.onerror=function(_){if(s=null,o.revokeObjectURL(c),t(_),!T.promise)return b.emit("error",_)},v.src=c});return T.promise?p:b}},61808:function(ie,F,e){"use strict";var S=e(61252).EventEmitter,k=e(24040),o=e(3400),T=e(81792),b=e(91536),p=e(37164),l=e(63268);ie.exports=function(t,i){var r=new S,n=b(t,{format:"png"}),a=n.gd;a.style.position="absolute",a.style.left="-5000px",document.body.appendChild(a);var s=T.getRedrawFunc(a);return k.call("_doPlot",a,n.data,n.layout,n.config).then(s).then(function(){var c=T.getDelay(a._fullLayout);setTimeout(function(){var h=p(a),u=document.createElement("canvas");u.id=o.randstr(),(r=l({format:i.format,width:a._fullLayout.width,height:a._fullLayout.height,canvas:u,emitter:r,svg:h})).clean=function(){a&&document.body.removeChild(a)}},c)}).catch(function(c){r.emit("error",c)}),r}},37164:function(ie,F,e){"use strict";var S=e(33428),k=e(3400),o=e(43616),T=e(76308),b=e(9616),p=/"/g,l="TOBESTRIPPED",t=new RegExp('("'+l+")|("+l+'")',"g");ie.exports=function(i,r,n){var a,s=i._fullLayout,c=s._paper,h=s._toppaper,u=s.width,y=s.height;c.insert("rect",":first-child").call(o.setRect,0,0,u,y).call(T.fill,s.paper_bgcolor);var d=s._basePlotModules||[];for(a=0;a<d.length;a++){var m=d[a];m.toSVG&&m.toSVG(i)}if(h){var g=h.node().childNodes,x=Array.prototype.slice.call(g);for(a=0;a<x.length;a++){var v=x[a];v.childNodes.length&&c.node().appendChild(v)}}s._draggers&&s._draggers.remove(),c.node().style.background="",c.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var f=S.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){f.style({visibility:null,display:null});var C=this.style.fontFamily;C&&-1!==C.indexOf('"')&&f.style("font-family",C.replace(p,l));var w=this.style.fontWeight;!w||"normal"!==w&&"400"!==w||f.style("font-weight",void 0);var E=this.style.fontStyle;E&&"normal"===E&&f.style("font-style",void 0);var P=this.style.fontVariant;P&&"normal"===P&&f.style("font-variant",void 0)}else f.remove()}),c.selectAll(".gradient_filled,.pattern_filled").each(function(){var f=S.select(this),C=this.style.fill;C&&-1!==C.indexOf("url(")&&f.style("fill",C.replace(p,l));var w=this.style.stroke;w&&-1!==w.indexOf("url(")&&f.style("stroke",w.replace(p,l))}),"pdf"!==r&&"eps"!==r||c.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),c.node().setAttributeNS(b.xmlns,"xmlns",b.svg),c.node().setAttributeNS(b.xmlns,"xmlns:xlink",b.xlink),"svg"===r&&n&&(c.attr("width",n*u),c.attr("height",n*y),c.attr("viewBox","0 0 "+u+" "+y));var f,C,w,_=(new window.XMLSerializer).serializeToString(c.node());return _=(_=(f=_,C=S.select("body").append("div").style({display:"none"}).html(""),w=f.replace(/(&[^;]*;)/gi,function(E){return"&lt;"===E?"&#60;":"&rt;"===E?"&#62;":-1!==E.indexOf("<")||-1!==E.indexOf(">")?"":C.html(E).text()}),C.remove(),_=w).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(t,"'"),k.isIE()&&(_=(_=(_=_.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),_}},84664:function(ie,F,e){"use strict";var S=e(3400);ie.exports=function(k,o){for(var T=0;T<k.length;T++)k[T].i=T;S.mergeArray(o.text,k,"tx"),S.mergeArray(o.hovertext,k,"htx");var b=o.marker;if(b){S.mergeArray(b.opacity,k,"mo",!0),S.mergeArray(b.color,k,"mc");var p=b.line;p&&(S.mergeArray(p.color,k,"mlc"),S.mergeArrayCastPositive(p.width,k,"mlw"))}}},20832:function(ie,F,e){"use strict";var S=e(52904),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(21776).Gw,b=e(49084),p=e(25376),l=e(78048),t=e(98192).c,i=e(92880).extendFlat,r=p({editType:"calc",arrayOk:!0,colorEditType:"style"}),n=i({},S.marker.line.width,{dflt:0}),a=i({width:n,editType:"calc"},b("marker.line")),s=i({line:a,editType:"calc"},b("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:t,cornerradius:{valType:"any",editType:"calc"}});ie.exports={x:S.x,x0:S.x0,dx:S.dx,y:S.y,y0:S.y0,dy:S.dy,xperiod:S.xperiod,yperiod:S.yperiod,xperiod0:S.xperiod0,yperiod0:S.yperiod0,xperiodalignment:S.xperiodalignment,yperiodalignment:S.yperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),text:S.text,texttemplate:T({editType:"plot"},{keys:l.eventDataKeys}),hovertext:S.hovertext,hovertemplate:o({},{keys:l.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:i({},r,{}),insidetextfont:i({},r,{}),outsidetextfont:i({},r,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:i({},S.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:s,offsetgroup:S.offsetgroup,alignmentgroup:S.alignmentgroup,selected:{marker:{opacity:S.selected.marker.opacity,color:S.selected.marker.color,editType:"style"},textfont:S.selected.textfont,editType:"style"},unselected:{marker:{opacity:S.unselected.marker.opacity,color:S.unselected.marker.color,editType:"style"},textfont:S.unselected.textfont,editType:"style"},zorder:S.zorder,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},71820:function(ie,F,e){"use strict";var S=e(54460),k=e(1220),o=e(94288).hasColorscale,T=e(47128),b=e(84664),p=e(4500);ie.exports=function(l,t){var i,r,n,a,s,c,h=S.getFromId(l,t.xaxis||"x"),u=S.getFromId(l,t.yaxis||"y"),y={msUTC:!(!t.base&&0!==t.base)};"h"===t.orientation?(i=h.makeCalcdata(t,"x",y),n=u.makeCalcdata(t,"y"),a=k(t,u,"y",n),s=!!t.yperiodalignment,c="y"):(i=u.makeCalcdata(t,"y",y),n=h.makeCalcdata(t,"x"),a=k(t,h,"x",n),s=!!t.xperiodalignment,c="x"),r=a.vals;for(var d=Math.min(r.length,i.length),m=new Array(d),g=0;g<d;g++)m[g]={p:r[g],s:i[g]},s&&(m[g].orig_p=n[g],m[g][c+"End"]=a.ends[g],m[g][c+"Start"]=a.starts[g]),t.ids&&(m[g].id=String(t.ids[g]));return o(t,"marker")&&T(l,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),o(t,"marker.line")&&T(l,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),b(m,t),p(m,t),m}},78048:function(ie){"use strict";ie.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},96376:function(ie,F,e){"use strict";var S=e(38248),k=e(3400).isArrayOrTypedArray,o=e(39032).BADNUM,T=e(24040),b=e(54460),p=e(71888).getAxisGroup,l=e(72592);function t(d,m,g,x,v){if(x.length){var _,f,C,w;switch(function(E,P){var L,O;for(L=0;L<P.length;L++){var z,V=P[L],R=V[0].trace,U="funnel"===R.type?R._base:R.base,Z="h"===R.orientation?R.xcalendar:R.ycalendar,N="category"===E.type||"multicategory"===E.type?function(){return null}:E.d2c;if(k(U)){for(O=0;O<Math.min(U.length,V.length);O++)z=N(U[O],0,Z),S(z)?(V[O].b=+z,V[O].hasB=1):V[O].b=0;for(;O<V.length;O++)V[O].b=0}else{z=N(U,0,Z);var G=S(z);for(z=G?z:0,O=0;O<V.length;O++)V[O].b=z,G&&(V[O].hasB=1)}}}(g,x),v.mode){case"overlay":i(m,g,x,v);break;case"group":for(_=[],f=[],C=0;C<x.length;C++)void 0===(w=x[C])[0].trace.offset?f.push(w):_.push(w);f.length&&(E=d,L=g,V=new l(f,{posAxis:P=m,sepNegVal:!1,overlapNoMerge:!(z=v).norm}),function(R,U,Z,N){for(var G=R._fullLayout,re=Z.minDiff,ne=Z.traces,Q=ne.length,$=Z.positions.length!==Z.distinctPositions.length,X=re*(1-N.gap),oe=p(G,U._id)+ne[0][0].trace.orientation,fe=G._alignmentOpts[oe]||{},ue=0;ue<Q;ue++){var ge,we,Te=ne[ue],xe=Te[0].trace,_e=Object.keys((fe[xe.alignmentgroup]||{}).offsetGroups||{}).length,Ie=(ge=_e?X/_e:$?X/Q:X)*(1-(N.groupgap||0));we=_e?((2*xe._offsetIndex+1-_e)*ge-Ie)/2:$?((2*ue+1-Q)*ge-Ie)/2:-Ie/2;var De=Te[0].t;De.barwidth=Ie,De.poffset=we,De.bargroupwidth=X,De.bardelta=re}Z.binWidth=ne[0][0].t.barwidth/100,n(Z),a(U,Z),s(U,Z,$)}(E,P,V,z),function(R,U){for(var Z=R.traces,N=0;N<Z.length;N++){var G=Z[N];if(void 0===G[0].trace.base)for(var W=new l([G],{posAxis:U,sepNegVal:!0,overlapNoMerge:!0}),ae=0;ae<G.length;ae++){var re=G[ae];if(re.p!==o){var ne=W.put(re.p,re.b+re.s);ne&&(re.b=ne)}}}}(V,P),z.norm?(h(V),u(L,V,z)):c(L,V)),_.length&&i(m,g,_,v);break;case"stack":case"relative":for(_=[],f=[],C=0;C<x.length;C++)void 0===(w=x[C])[0].trace.base?f.push(w):_.push(w);(function(E){if(!(E.length<2)){var P,L,O,z,V,R;for(P=0;P<E.length&&void 0===(z=(L=E[P][0].trace).marker?L.marker.cornerradius:void 0);P++);if(void 0!==z)for(V=S(z)?+z:+z.slice(0,-1),R=S(z)?"px":"%",P=0;P<E.length;P++)(O=E[P][0].t).cornerradiusvalue=V,O.cornerradiusform=R}})(f),f.length&&function(E,P,L,O,z){var V=new l(O,{posAxis:P,sepNegVal:"relative"===z.mode,overlapNoMerge:!(z.norm||"stack"===z.mode||"relative"===z.mode)});r(P,V,z),function(G,W,ae){var re,ne,Q,$,X,oe,fe=y(G),ue=W.traces;for($=0;$<ue.length;$++)if("funnel"===(ne=(re=ue[$])[0].trace).type)for(X=0;X<re.length;X++)(oe=re[X]).s!==o&&W.put(oe.p,-.5*oe.s);for($=0;$<ue.length;$++){Q="funnel"===(ne=(re=ue[$])[0].trace).type;var ge=[];for(X=0;X<re.length;X++)if((oe=re[X]).s!==o){var we,Te=W.put(oe.p,we=Q?oe.s:oe.s+oe.b),xe=Te+we;oe.b=Te,oe[fe]=xe,ae.norm||(ge.push(xe),oe.hasB&&ge.push(Te))}ae.norm||(ne._extremes[G._id]=b.findExtremes(G,ge,{tozero:!0,padded:!0}))}}(L,V,z);for(var R=0;R<O.length;R++)for(var U=O[R],Z=0;Z<U.length;Z++){var N=U[Z];N.s!==o&&N.b+N.s===V.get(N.p,N.s)&&(N._outmost=!0)}z.norm&&u(L,V,z)}(0,m,g,f,v),_.length&&i(m,g,_,v)}(function(E){var P,L,O,z,V,R,U;for(P=0;P<E.length;P++)O=(L=E[P])[0].trace,void 0===(z=L[0].t).cornerradiusvalue&&void 0!==(V=O.marker?O.marker.cornerradius:void 0)&&(R=S(V)?+V:+V.slice(0,-1),U=S(V)?"px":"%",z.cornerradiusvalue=R,z.cornerradiusform=U)})(x),function(E,P){var L,O,z,V=y(P),R={},U=1/0,Z=-1/0;for(L=0;L<E.length;L++)for(z=E[L],O=0;O<z.length;O++){var N=z[O].p;S(N)&&(U=Math.min(U,N),Z=Math.max(Z,N))}var G=1e4/(Z-U),W=R.round=function(xe){return String(Math.round(G*(xe-U)))},ae={},re={},ne=E.some(function(xe){var ye=xe[0].trace;return"marker"in ye&&ye.marker.cornerradius});for(L=0;L<E.length;L++){(z=E[L])[0].t.extents=R;var Q=z[0].t.poffset,$=k(Q);for(O=0;O<z.length;O++){var X=z[O],oe=X[V]-X.w/2;if(S(oe)){var fe=X[V]+X.w/2,ue=W(X.p);R[ue]=R[ue]?[Math.min(oe,R[ue][0]),Math.max(fe,R[ue][1])]:[oe,fe]}if(X.p0=X.p+($?Q[O]:Q),X.p1=X.p0+X.w,X.s0=X.b,X.s1=X.s0+X.s,ne){var ge=Math.min(X.s0,X.s1)||0,we=Math.max(X.s0,X.s1)||0,Te=X[V];ae[Te]=Te in ae?Math.min(ae[Te],ge):ge,re[Te]=Te in re?Math.max(re[Te],we):we}}}ne&&function(xe,ye,_e,Ie){for(var De=y(Ie),be=0;be<xe.length;be++)for(var he=xe[be],ce=0;ce<he.length;ce++){var me=he[ce],Pe=me[De];me._sMin=ye[Pe],me._sMax=_e[Pe]}}(E,ae,re,P)}(x,m)}var E,P,L,z,V}function i(d,m,g,x){for(var v=0;v<g.length;v++){var f=new l([g[v]],{posAxis:d,sepNegVal:!1,overlapNoMerge:!x.norm});r(d,f,x),x.norm?(h(f),u(m,f,x)):c(m,f)}}function r(d,m,g){for(var x=m.minDiff,v=m.traces,_=x*(1-g.gap),f=_*(1-(g.groupgap||0)),C=-f/2,w=0;w<v.length;w++){var E=v[w][0].t;E.barwidth=f,E.poffset=C,E.bargroupwidth=_,E.bardelta=x}m.binWidth=v[0][0].t.barwidth/100,n(m),a(d,m),s(d,m)}function n(d){var m,g,x=d.traces;for(m=0;m<x.length;m++){var v,_=x[m],f=_[0],C=f.trace,w=f.t,E=C._offset||C.offset,P=w.poffset;if(k(E)){for(v=Array.prototype.slice.call(E,0,_.length),g=0;g<v.length;g++)S(v[g])||(v[g]=P);for(g=v.length;g<_.length;g++)v.push(P);w.poffset=v}else void 0!==E&&(w.poffset=E);var L=C._width||C.width,O=w.barwidth;if(k(L)){var z=Array.prototype.slice.call(L,0,_.length);for(g=0;g<z.length;g++)S(z[g])||(z[g]=O);for(g=z.length;g<_.length;g++)z.push(O);if(w.barwidth=z,void 0===E){for(v=[],g=0;g<_.length;g++)v.push(P+(O-z[g])/2);w.poffset=v}}else void 0!==L&&(w.barwidth=L,void 0===E&&(w.poffset=P+(O-L)/2))}}function a(d,m){for(var g=m.traces,x=y(d),v=0;v<g.length;v++)for(var _=g[v],f=_[0].t,C=f.poffset,w=k(C),E=f.barwidth,P=k(E),L=0;L<_.length;L++){var O=_[L],z=O.w=P?E[L]:E;void 0===O.p&&(O.p=O[x],O["orig_"+x]=O[x]),O[x]=O.p+((w?C[L]:C)+z/2)}}function s(d,m,g){var x=m.traces,v=m.minDiff/2;b.minDtick(d,m.minDiff,m.distinctPositions[0],g);for(var _=0;_<x.length;_++){var f,C,w,E,P=x[_],L=P[0],O=L.trace,z=[];for(E=0;E<P.length;E++)C=(f=P[E]).p-v,z.push(C,w=f.p+v);if(O.width||O.offset){var V=L.t,R=V.poffset,U=V.barwidth,Z=k(R),N=k(U);for(E=0;E<P.length;E++)w=(C=(f=P[E]).p+(Z?R[E]:R))+(N?U[E]:U),z.push(C,w)}O._extremes[d._id]=b.findExtremes(d,z,{padded:!1})}}function c(d,m){for(var g=m.traces,x=y(d),v=0;v<g.length;v++){for(var _=g[v],f=_[0].trace,C="scatter"===f.type,w="v"===f.orientation,E=[],P=!1,L=0;L<_.length;L++){var O=_[L],z=C?0:O.b,V=C?w?O.y:O.x:z+O.s;O[x]=V,E.push(V),O.hasB&&E.push(z),O.hasB&&O.b||(P=!0)}f._extremes[d._id]=b.findExtremes(d,E,{tozero:P,padded:!0})}}function h(d){for(var m=d.traces,g=0;g<m.length;g++)for(var x=m[g],v=0;v<x.length;v++){var _=x[v];_.s!==o&&d.put(_.p,_.b+_.s)}}function u(d,m,g){var x=m.traces,v=y(d),_="fraction"===g.norm?1:100,f=_/1e9,C=d.l2c(d.c2l(0)),w="stack"===g.mode?_:C;function E(ae){return S(d.c2l(ae))&&(ae<C-f||ae>w+f||!S(C))}for(var P=0;P<x.length;P++){for(var L=x[P],O=L[0].trace,z=[],V=!1,R=!1,U=0;U<L.length;U++){var Z=L[U];if(Z.s!==o){var N=Math.abs(_/m.get(Z.p,Z.s));Z.b*=N,Z.s*=N;var G=Z.b,W=G+Z.s;Z[v]=W,z.push(W),R=R||E(W),Z.hasB&&(z.push(G),R=R||E(G)),Z.hasB&&Z.b||(V=!0)}}O._extremes[d._id]=b.findExtremes(d,z,{tozero:V,padded:R})}}function y(d){return d._id.charAt(0)}ie.exports={crossTraceCalc:function(d,m){for(var g=m.xaxis,x=m.yaxis,v=d._fullLayout,_=d._fullData,f=d.calcdata,C=[],w=[],E=0;E<_.length;E++){var P=_[E];if(!0===P.visible&&T.traceIs(P,"bar")&&P.xaxis===g._id&&P.yaxis===x._id&&("h"===P.orientation?C.push(f[E]):w.push(f[E]),P._computePh))for(var L=d.calcdata[E],O=0;O<L.length;O++)"function"==typeof L[O].ph0&&(L[O].ph0=L[O].ph0()),"function"==typeof L[O].ph1&&(L[O].ph1=L[O].ph1())}var z={xCat:"category"===g.type||"multicategory"===g.type,yCat:"category"===x.type||"multicategory"===x.type,mode:v.barmode,norm:v.barnorm,gap:v.bargap,groupgap:v.bargroupgap};t(d,g,x,w,z),t(d,x,g,C,z)},setGroupPositions:t}},31508:function(ie,F,e){"use strict";var S=e(38248),k=e(3400),o=e(76308),T=e(24040),b=e(43980),p=e(31147),l=e(55592),t=e(20011),i=e(20832),r=k.coerceFont;function n(s){if(S(s)){if((s=+s)>=0)return s}else if("string"==typeof s&&"%"===(s=s.trim()).slice(-1)&&S(s.slice(0,-1))&&(s=+s.slice(0,-1))>=0)return s+"%"}function a(s,c,h,u,y,d){var m=!1!==(d=d||{}).moduleHasSelected,g=!1!==d.moduleHasUnselected,x=!1!==d.moduleHasConstrain,v=!1!==d.moduleHasCliponaxis,_=!1!==d.moduleHasTextangle,f=!1!==d.moduleHasInsideanchor,C=!!d.hasPathbar,w=Array.isArray(y)||"auto"===y,E=w||"inside"===y,P=w||"outside"===y;if(E||P){var L=r(u,"textfont",h.font),O=k.extendFlat({},L),z=!(s.textfont&&s.textfont.color);if(z&&delete O.color,r(u,"insidetextfont",O),C){var V=k.extendFlat({},L);z&&delete V.color,r(u,"pathbar.textfont",V)}P&&r(u,"outsidetextfont",L),m&&u("selected.textfont.color"),g&&u("unselected.textfont.color"),x&&u("constraintext"),v&&u("cliponaxis"),_&&u("textangle"),u("texttemplate")}E&&f&&u("insidetextanchor")}ie.exports={supplyDefaults:function(s,c,h,u){function y(x,v){return k.coerce(s,c,i,x,v)}if(b(s,c,u,y)){p(s,c,u,y),y("xhoverformat"),y("yhoverformat"),y("zorder"),y("orientation",c.x&&!c.y?"h":"v"),y("base"),y("offset"),y("width"),y("text"),y("hovertext"),y("hovertemplate");var d=y("textposition");a(s,0,u,y,d,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),l(s,c,y,h,u);var m=(c.marker.line||{}).color,g=T.getComponentMethod("errorbars","supplyDefaults");g(s,c,m||o.defaultLine,{axis:"y"}),g(s,c,m||o.defaultLine,{axis:"x",inherit:"y"}),k.coerceSelectionMarkerOpacity(c,y)}else c.visible=!1},crossTraceDefaults:function(s,c){var h,u;function y(g,x){return k.coerce(u._input,u,i,g,x)}for(var d=0;d<s.length;d++)if("bar"===(u=s[d]).type){h=u._input;var m=y("marker.cornerradius",c.barcornerradius);u.marker&&(u.marker.cornerradius=n(m)),"group"===c.barmode&&t(h,u,c,y)}},handleText:a,validateCornerradius:n}},52160:function(ie){"use strict";ie.exports=function(F,e,S){return F.x="xVal"in e?e.xVal:e.x,F.y="yVal"in e?e.yVal:e.y,e.xa&&(F.xaxis=e.xa),e.ya&&(F.yaxis=e.ya),"h"===S.orientation?(F.label=F.y,F.value=F.x):(F.label=F.x,F.value=F.y),F}},60444:function(ie,F,e){"use strict";var S=e(38248),k=e(49760),o=e(3400).isArrayOrTypedArray;F.coerceString=function(T,b,p){if("string"==typeof b){if(b||!T.noBlank)return b}else if(("number"==typeof b||!0===b)&&!T.strict)return String(b);return void 0!==p?p:T.dflt},F.coerceNumber=function(T,b,p){if(S(b)){b=+b;var l=T.min,t=T.max;if(!(void 0!==l&&b<l||void 0!==t&&b>t))return b}return void 0!==p?p:T.dflt},F.coerceColor=function(T,b,p){return k(b).isValid()?b:void 0!==p?p:T.dflt},F.coerceEnumerated=function(T,b,p){return T.coerceNumber&&(b=+b),-1!==T.values.indexOf(b)?b:void 0!==p?p:T.dflt},F.getValue=function(T,b){var p;return o(T)?b<T.length&&(p=T[b]):p=T,p},F.getLineWidth=function(T,b){return 0<b.mlw?b.mlw:o(T.marker.line.width)?0:T.marker.line.width}},63400:function(ie,F,e){"use strict";var S=e(93024),k=e(24040),o=e(76308),T=e(3400).fillText,b=e(60444).getLineWidth,p=e(54460).hoverLabelText,l=e(39032).BADNUM;function t(r,n,a,s,c){var h,u,y,d,m,g,x,v=r.cd,_=v[0].trace,f=v[0].t,C="closest"===s,w="waterfall"===_.type,E=r.maxHoverDistance,P=r.maxSpikeDistance;"h"===_.orientation?(h=a,u=n,y="y",d="x",m=re,g=W):(h=n,u=a,y="x",d="y",g=re,m=W);var L=_[y+"period"],O=C||L;function z(ge){return R(ge,-1)}function V(ge){return R(ge,1)}function R(ge,we){return ge[y]+we*ge.w/2}function U(ge){return ge[y+"End"]-ge[y+"Start"]}var Z=C?z:L?function(ge){return ge.p-U(ge)/2}:function(ge){return Math.min(z(ge),ge.p-f.bardelta/2)},N=C?V:L?function(ge){return ge.p+U(ge)/2}:function(ge){return Math.max(V(ge),ge.p+f.bardelta/2)};function G(ge,we,Te){return c.finiteRange&&(Te=0),S.inbox(ge-h,we-h,Te+Math.min(1,Math.abs(we-ge)/x)-1)}function W(ge){return G(Z(ge),N(ge),E)}function ae(ge){var we=ge[d];if(w){var Te=Math.abs(ge.rawS)||0;u>0?we+=Te:u<0&&(we-=Te)}return we}function re(ge){var we=u,Te=ge.b,xe=ae(ge);return S.inbox(Te-we,xe-we,E+(xe-we)/(xe-Te)-1)}var ne=r[y+"a"],Q=r[d+"a"];x=Math.abs(ne.r2c(ne.range[1])-ne.r2c(ne.range[0]));var ge,we,Te,xe,$=S.getDistanceFunction(s,m,g,function(ge){return(m(ge)+g(ge))/2});if(S.getClosest(v,$,r),!1!==r.index&&v[r.index].p!==l){O||(Z=function(ge){return Math.min(z(ge),ge.p-f.bargroupwidth/2)},N=function(ge){return Math.max(V(ge),ge.p+f.bargroupwidth/2)});var X=v[r.index],oe=_.base?X.b+X.s:X.s;r[d+"0"]=r[d+"1"]=Q.c2p(X[d],!0),r[d+"LabelVal"]=oe;var fe=f.extents[f.extents.round(X.p)];return r[y+"0"]=ne.c2p(C?Z(X):fe[0],!0),r[y+"1"]=ne.c2p(C?N(X):fe[1],!0),r[y+"LabelVal"]=void 0!==X.orig_p?X.orig_p:X.p,r.labelLabel=p(ne,r[y+"LabelVal"],_[y+"hoverformat"]),r.valueLabel=p(Q,r[d+"LabelVal"],_[d+"hoverformat"]),r.baseLabel=p(Q,X.b,_[d+"hoverformat"]),r.spikeDistance=(we=u,Te=(ge=X).b,xe=ae(ge),(S.inbox(Te-we,xe-we,P+(xe-we)/(xe-Te)-1)+function(ge){return G(z(ge),V(ge),P)}(X))/2),r[y+"Spike"]=ne.c2p(X.p,!0),T(X,_,r),r.hovertemplate=_.hovertemplate,r}}function i(r,n){var a=n.mcc||r.marker.color,s=n.mlcc||r.marker.line.color,c=b(r,n);return o.opacity(a)?a:o.opacity(s)&&c?s:void 0}ie.exports={hoverPoints:function(r,n,a,s,c){var h=t(r,n,a,s,c);if(h){var u=h.cd,y=u[0].trace,d=u[h.index];return h.color=i(y,d),k.getComponentMethod("errorbars","hoverInfo")(d,y,h),[h]}},hoverOnBars:t,getTraceColor:i}},51132:function(ie,F,e){"use strict";ie.exports={attributes:e(20832),layoutAttributes:e(39324),supplyDefaults:e(31508).supplyDefaults,crossTraceDefaults:e(31508).crossTraceDefaults,supplyLayoutDefaults:e(37156),calc:e(71820),crossTraceCalc:e(96376).crossTraceCalc,colorbar:e(5528),arraysToCalcdata:e(84664),plot:e(98184).plot,style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,hoverPoints:e(63400).hoverPoints,eventData:e(52160),selectPoints:e(45784),moduleType:"trace",name:"bar",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},39324:function(ie){"use strict";ie.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},barcornerradius:{valType:"any",editType:"calc"}}},37156:function(ie,F,e){"use strict";var S=e(24040),k=e(54460),o=e(3400),T=e(39324),b=e(31508).validateCornerradius;ie.exports=function(p,l,t){function i(m,g){return o.coerce(p,l,T,m,g)}for(var r=!1,n=!1,a=!1,s={},c=i("barmode"),h=0;h<t.length;h++){var u=t[h];if(S.traceIs(u,"bar")&&u.visible){if(r=!0,"group"===c){var y=u.xaxis+u.yaxis;s[y]&&(a=!0),s[y]=!0}u.visible&&"histogram"===u.type&&"category"!==k.getFromId({_fullLayout:l},u["v"===u.orientation?"xaxis":"yaxis"]).type&&(n=!0)}}if(r){"overlay"!==c&&i("barnorm"),i("bargap",n&&!a?0:.2),i("bargroupgap");var d=i("barcornerradius");l.barcornerradius=b(d)}else delete l.barmode}},98184:function(ie,F,e){"use strict";var S=e(33428),k=e(38248),o=e(3400),T=e(72736),b=e(76308),p=e(43616),l=e(24040),t=e(54460).tickText,i=e(82744),r=i.recordMinTextSize,n=i.clearMinTextSize,a=e(60100),s=e(60444),c=e(78048),h=e(20832),u=h.text,y=h.textposition,d=e(10624).appendArrayPointValue,m=c.TEXTPAD;function g(O){return O.id}function v(O){return(O>0)-(O<0)}function _(O,z){return O<z?1:-1}function f(O,z,V,R){var U;return!z.uniformtext.mode&&C(V)?(R&&(U=R()),O.transition().duration(V.duration).ease(V.easing).each("end",function(){U&&U()}).each("interrupt",function(){U&&U()})):O}function C(O){return O&&O.duration>0}function w(O,z,V,R,U){return!(O<0||z<0)&&(V<=O&&R<=z||V<=z&&R<=O||(U?O>=V*(z/R):z>=R*(O/V)))}function E(O){return"auto"===O?0:O}function P(O,z){var V=Math.PI/180*z,R=Math.abs(Math.sin(V)),U=Math.abs(Math.cos(V));return{x:O.width*U+O.height*R,y:O.width*R+O.height*U}}function L(O,z,V,R,U,Z){var N=!!Z.isHorizontal,G=!!Z.constrained,W=Z.angle||0,ae=Z.anchor,re="end"===ae,ne="start"===ae,Q=((Z.leftToRight||0)+1)/2,$=1-Q,X=Z.hasB,oe=Z.r,fe=Z.overhead,ue=U.width,ge=U.height,we=Math.abs(z-O),Te=Math.abs(R-V),xe=we>2*m&&Te>2*m?m:0;we-=2*xe,Te-=2*xe;var ye=E(W);"auto"!==W||ue<=we&&ge<=Te||!(ue>we||ge>Te)||(ue>Te||ge>we)&&ue<ge==we<Te||(ye+=90);var _e,Ie,Me,Le,Ue,ze,qe,Ke,it,ft,dt,kt,St,Tt,lt,ot,Rt,De=P(U,ye);if(oe&&oe-fe>m){var be=(Me=V,Le=R,Ue=De,ze=oe,qe=fe,Ke=N,it=X,Tt=Math.max(0,Math.abs(z-O)-2*m),lt=Math.max(0,Math.abs(Le-Me)-2*m),ot=ze-m,Rt=qe?ot-Math.sqrt(ot*ot-(ot-qe)*(ot-qe)):ot,Ue.y/Ue.x>=lt/(Tt-(it?2*ot:Ke?ot-qe:2*Rt))?St=lt/Ue.y:Ue.y/Ue.x<=(lt-(it?2*ot:Ke?2*Rt:ot-qe))/Tt?St=Tt/Ue.x:!it&&Ke?(ft=Ue.x*Ue.x+Ue.y*Ue.y/4,kt=(Tt-ot)*(Tt-ot)+(lt/2-ot)*(lt/2-ot)-ot*ot,St=(-(dt=-2*Ue.x*(Tt-ot)-Ue.y*(lt/2-ot))+Math.sqrt(dt*dt-4*ft*kt))/(2*ft)):it?(ft=(Ue.x*Ue.x+Ue.y*Ue.y)/4,kt=(Tt/2-ot)*(Tt/2-ot)+(lt/2-ot)*(lt/2-ot)-ot*ot,St=(-(dt=-Ue.x*(Tt/2-ot)-Ue.y*(lt/2-ot))+Math.sqrt(dt*dt-4*ft*kt))/(2*ft)):(ft=Ue.x*Ue.x/4+Ue.y*Ue.y,kt=(Tt/2-ot)*(Tt/2-ot)+(lt-ot)*(lt-ot)-ot*ot,St=(-(dt=-Ue.x*(Tt/2-ot)-2*Ue.y*(lt-ot))+Math.sqrt(dt*dt-4*ft*kt))/(2*ft)),{scale:St=Math.min(1,St),pad:Ke?Math.max(0,ot-Math.sqrt(Math.max(0,ot*ot-(ot-(lt-Ue.y*St)/2)*(ot-(lt-Ue.y*St)/2)))-qe):Math.max(0,ot-Math.sqrt(Math.max(0,ot*ot-(ot-(Tt-Ue.x*St)/2)*(ot-(Tt-Ue.x*St)/2)))-qe)});_e=be.scale,Ie=be.pad}else _e=1,G&&(_e=Math.min(1,we/De.x,Te/De.y)),Ie=0;var he=U.left*$+U.right*Q,ce=(U.top+U.bottom)/2,me=(O+m)*$+(z-m)*Q,Pe=(V+R)/2,Ae=0,Ce=0;if(ne||re){var Oe=(N?De.x:De.y)/2;oe&&(re||X)&&(xe+=Ie);var Ne=N?_(O,z):_(V,R);N?ne?(me=O+Ne*xe,Ae=-Ne*Oe):(me=z-Ne*xe,Ae=Ne*Oe):ne?(Pe=V+Ne*xe,Ce=-Ne*Oe):(Pe=R-Ne*xe,Ce=Ne*Oe)}return{textX:he,textY:ce,targetX:me,targetY:Pe,anchorX:Ae,anchorY:Ce,scale:_e,rotate:ye}}ie.exports={plot:function(O,z,V,R,U,Z){var N=z.xaxis,G=z.yaxis,W=O._fullLayout,ae=O._context.staticPlot;U||(U={mode:W.barmode,norm:W.barmode,gap:W.bargap,groupgap:W.bargroupgap},n("bar",W));var re=o.makeTraceGroups(R,V,"trace bars").each(function(ne){var Q=S.select(this),$=ne[0].trace,X=ne[0].t,ue="histogram"===$.type,ge="bar"===$.type,we=ge||"funnel"===$.type,Te=0;"waterfall"===$.type&&$.connector.visible&&"between"===$.connector.mode&&(Te=$.connector.line.width/2);var xe="h"===$.orientation,ye=C(U),_e=o.ensureSingle(Q,"g","points"),Ie=function x(O){if(O.ids)return g}($),De=_e.selectAll("g.point").data(o.identity,Ie);De.enter().append("g").classed("point",!0),De.exit().remove(),De.each(function(he,ce){var me,Pe,ht,Ge,He,ut,tt,xt,At,Mt,Ae=S.select(this),Ce=(Ge=N,He=G,xt=[],Mt=(ut=xe)?He:Ge,(tt=[])[0]=(At=ut?Ge:He).c2p((ht=he).s0,!0),xt[0]=Mt.c2p(ht.p0,!0),tt[1]=At.c2p(ht.s1,!0),xt[1]=Mt.c2p(ht.p1,!0),ut?[tt,xt]:[xt,tt]),Oe=Ce[0][0],Ne=Ce[0][1],je=Ce[1][0],ve=Ce[1][1],Me=0==(xe?Ne-Oe:ve-je);if(Me&&we&&s.getLineWidth($,he)&&(Me=!1),Me||(Me=!(k(Oe)&&k(Ne)&&k(je)&&k(ve))),he.isBlank=Me,Me&&(xe?Ne=Oe:ve=je),Te&&!Me&&(xe?(Oe-=_(Oe,Ne)*Te,Ne+=_(Oe,Ne)*Te):(je-=_(je,ve)*Te,ve+=_(je,ve)*Te)),"waterfall"===$.type){if(!Me){var Le=$[he.dir].marker;me=Le.line.width,Pe=Le.color}}else me=s.getLineWidth($,he),Pe=he.mc||$.marker.color;function Ue(ht){var Ge=S.round(me/2%1,2);return 0===U.gap&&0===U.groupgap?S.round(Math.round(ht)-Ge,2):ht}var ze=b.opacity(Pe)<1||me>.01?Ue:function(ht,Ge,He){return He&&ht===Ge?ht:Math.abs(ht-Ge)>=2?Ue(ht):ht>Ge?Math.ceil(ht):Math.floor(ht)};O._context.staticPlot||(Oe=ze(Oe,Ne,xe),Ne=ze(Ne,Oe,xe),je=ze(je,ve,!xe),ve=ze(ve,je,!xe));var qe,Ke=xe?N.c2p:G.c2p;qe=he.s0>0?he._sMax:he.s0<0?he._sMin:he.s1>0?he._sMax:he._sMin;var it,ft,dt=ge||ue?function(ht,Ge){if(!ht)return 0;var He,ut=Math.abs(xe?ve-je:Ne-Oe),tt=Math.abs(xe?Ne-Oe:ve-je),xt=ze(Math.abs(Ke(qe,!0)-Ke(0,!0))),At=he.hasB?Math.min(ut/2,tt/2):Math.min(ut/2,xt);return He="%"===Ge?ut*(Math.min(50,ht)/100):ht,ze(Math.max(Math.min(He,At),0))}(X.cornerradiusvalue,X.cornerradiusform):0,kt="M"+Oe+","+je+"V"+ve+"H"+Ne+"V"+je+"Z",St=0;if(dt&&he.s){var Tt=0===v(he.s0)||v(he.s)===v(he.s0)?he.s1:he.s0;if((St=ze(he.hasB?0:Math.abs(Ke(qe,!0)-Ke(Tt,!0))))<dt){var lt=_(Oe,Ne),ot=_(je,ve),Rt=lt===-ot?1:0;if(xe)if(he.hasB)it="M"+(Oe+dt*lt)+","+je+"A "+dt+","+dt+" 0 0 "+Rt+" "+Oe+","+(je+dt*ot)+"V"+(ve-dt*ot)+"A "+dt+","+dt+" 0 0 "+Rt+" "+(Oe+dt*lt)+","+ve+"H"+(Ne-dt*lt)+"A "+dt+","+dt+" 0 0 "+Rt+" "+Ne+","+(ve-dt*ot)+"V"+(je+dt*ot)+"A "+dt+","+dt+" 0 0 "+Rt+" "+(Ne-dt*lt)+","+je+"Z";else{var Vt=(ft=Math.abs(Ne-Oe)+St)<dt?dt-Math.sqrt(ft*(2*dt-ft)):0,Ht=St>0?Math.sqrt(St*(2*dt-St)):0,zt=lt>0?Math.max:Math.min;it="M"+Oe+","+je+"V"+(ve-Vt*ot)+"H"+zt(Ne-(dt-St)*lt,Oe)+"A "+dt+","+dt+" 0 0 "+Rt+" "+Ne+","+(ve-dt*ot-Ht)+"V"+(je+dt*ot+Ht)+"A "+dt+","+dt+" 0 0 "+Rt+" "+zt(Ne-(dt-St)*lt,Oe)+","+(je+Vt*ot)+"Z"}else if(he.hasB)it="M"+(Oe+dt*lt)+","+je+"A "+dt+","+dt+" 0 0 "+Rt+" "+Oe+","+(je+dt*ot)+"V"+(ve-dt*ot)+"A "+dt+","+dt+" 0 0 "+Rt+" "+(Oe+dt*lt)+","+ve+"H"+(Ne-dt*lt)+"A "+dt+","+dt+" 0 0 "+Rt+" "+Ne+","+(ve-dt*ot)+"V"+(je+dt*ot)+"A "+dt+","+dt+" 0 0 "+Rt+" "+(Ne-dt*lt)+","+je+"Z";else{var Qe=(ft=Math.abs(ve-je)+St)<dt?dt-Math.sqrt(ft*(2*dt-ft)):0,nt=St>0?Math.sqrt(St*(2*dt-St)):0,We=ot>0?Math.max:Math.min;it="M"+(Oe+Qe*lt)+","+je+"V"+We(ve-(dt-St)*ot,je)+"A "+dt+","+dt+" 0 0 "+Rt+" "+(Oe+dt*lt-nt)+","+ve+"H"+(Ne-dt*lt+nt)+"A "+dt+","+dt+" 0 0 "+Rt+" "+(Ne-Qe*lt)+","+We(ve-(dt-St)*ot,je)+"V"+je+"Z"}}else it=kt}else it=kt;var et=f(o.ensureSingle(Ae,"path"),W,U,Z);if(et.style("vector-effect",ae?"none":"non-scaling-stroke").attr("d",isNaN((Ne-Oe)*(ve-je))||Me&&O._context.staticPlot?"M0,0Z":it).call(p.setClipUrl,z.layerClipId,O),!W.uniformtext.mode&&ye){var gt=p.makePointStyleFns($);p.singlePointStyle(he,et,$,gt,O)}(function(ht,Ge,He,ut,tt,xt,At,Mt,yt,Pt,Ct,Dt,Ut){var Bt,qt=Ge.xaxis,an=Ge.yaxis,mn=ht._fullLayout;function Qt(Dr,cn,In){return o.ensureSingle(Dr,"text").text(cn).attr({class:"bartext bartext-"+Bt,"text-anchor":"middle","data-notex":1}).call(p.font,In).call(T.convertToTspans,ht)}var cn,In,Nt,Zt,un,Tn,sn=ut[0].trace,Kt="h"===sn.orientation,qn=(In=tt,Nt=qt,Zt=an,un=(Tn=(cn=ut)[0].trace).texttemplate?function(kn,Pn,yn,on,nn){var dn=Pn[0].trace,xn=o.castOption(dn,yn,"texttemplate");if(!xn)return"";var Bn,Wn,Qn,ar,yr="histogram"===dn.type,ur="waterfall"===dn.type,gr="funnel"===dn.type,br="h"===dn.orientation;function pr(ai){return t(ar,ar.c2l(ai),!0).text}br?(Bn="y",Wn=nn,Qn="x",ar=on):(Bn="x",Wn=on,Qn="y",ar=nn);var Ur=Pn[yn],zr={};zr.label=Ur.p,zr.labelLabel=zr[Bn+"Label"]=t(Wn,Wn.c2l(Ur.p),!0).text;var kr=o.castOption(dn,Ur.i,"text");(0===kr||kr)&&(zr.text=kr),zr.value=Ur.s,zr.valueLabel=zr[Qn+"Label"]=pr(Ur.s);var Fr={};d(Fr,dn,Ur.i),(yr||void 0===Fr.x)&&(Fr.x=br?zr.value:zr.label),(yr||void 0===Fr.y)&&(Fr.y=br?zr.label:zr.value),(yr||void 0===Fr.xLabel)&&(Fr.xLabel=br?zr.valueLabel:zr.labelLabel),(yr||void 0===Fr.yLabel)&&(Fr.yLabel=br?zr.labelLabel:zr.valueLabel),ur&&(zr.delta=+Ur.rawS||Ur.s,zr.deltaLabel=pr(zr.delta),zr.final=Ur.v,zr.finalLabel=pr(zr.final),zr.initial=zr.final-zr.delta,zr.initialLabel=pr(zr.initial)),gr&&(zr.value=Ur.s,zr.valueLabel=pr(zr.value),zr.percentInitial=Ur.begR,zr.percentInitialLabel=o.formatPercent(Ur.begR),zr.percentPrevious=Ur.difR,zr.percentPreviousLabel=o.formatPercent(Ur.difR),zr.percentTotal=Ur.sumR,zr.percenTotalLabel=o.formatPercent(Ur.sumR));var Qr=o.castOption(dn,Ur.i,"customdata");return Qr&&(zr.customdata=Qr),o.texttemplateString(xn,zr,kn._d3locale,Fr,zr,dn._meta||{})}(mn,cn,In,Nt,Zt):Tn.textinfo?function(kn,Pn,yn,on){var nn=kn[0].trace,dn="h"===nn.orientation,xn="waterfall"===nn.type,Bn="funnel"===nn.type;function Wn(Qr){return t(dn?yn:on,+Qr,!0).text}var Qn,ur=kn[Pn],gr=nn.textinfo.split("+"),br=[],pr=function(Qr){return-1!==gr.indexOf(Qr)};if(pr("label")&&br.push(t(dn?on:yn,kn[Pn].p,!0).text),pr("text")&&(0===(Qn=o.castOption(nn,ur.i,"text"))||Qn)&&br.push(Qn),xn){var Lr=+ur.rawS||ur.s,Ur=ur.v,zr=Ur-Lr;pr("initial")&&br.push(Wn(zr)),pr("delta")&&br.push(Wn(Lr)),pr("final")&&br.push(Wn(Ur))}if(Bn){pr("value")&&br.push(Wn(ur.s));var kr=0;pr("percent initial")&&kr++,pr("percent previous")&&kr++,pr("percent total")&&kr++;var Fr=kr>1;pr("percent initial")&&(Qn=o.formatPercent(ur.begR),Fr&&(Qn+=" of initial"),br.push(Qn)),pr("percent previous")&&(Qn=o.formatPercent(ur.difR),Fr&&(Qn+=" of previous"),br.push(Qn)),pr("percent total")&&(Qn=o.formatPercent(ur.sumR),Fr&&(Qn+=" of total"),br.push(Qn))}return br.join("<br>")}(cn,In,Nt,Zt):s.getValue(Tn.text,In),s.coerceString(u,un));Bt=function(Dr,cn){var In=s.getValue(Dr.textposition,cn);return s.coerceEnumerated(y,In)}(sn,tt);var Sn=ut[tt],hn=!("stack"===Dt.mode||"relative"===Dt.mode)||Sn._outmost,wn=Sn.hasB,pn=Pt&&Pt-Ct>m;if(qn&&"none"!==Bt&&(!Sn.isBlank&&xt!==At&&Mt!==yt||"auto"!==Bt&&"inside"!==Bt)){var An=mn.font,On=a.getBarColor(ut[tt],sn),Dn=a.getInsideTextFont(sn,tt,An,On),Vn=a.getOutsideTextFont(sn,tt,An),Gn=sn.insidetextanchor||"end",Nn=He.datum();Kt?"log"===qt.type&&Nn.s0<=0&&(xt=qt.range[0]<qt.range[1]?0:qt._length):"log"===an.type&&Nn.s0<=0&&(Mt=an.range[0]<an.range[1]?an._length:0);var ir,$n,mr,lr,vr,or=Math.abs(At-xt),Or=Math.abs(yt-Mt),fn=or-2*m,gn=Or-2*m;if("outside"===Bt&&(hn||Sn.hasB||(Bt="inside")),"auto"===Bt)if(hn){Bt="inside",ir=Qt(He,qn,vr=o.ensureUniformFontSize(ht,Dn)),mr=($n=p.bBox(ir.node())).width,lr=$n.height;var Hn,En=mr>0&&lr>0;Hn=pn?wn?w(fn-2*Pt,gn,mr,lr,Kt)||w(fn,gn-2*Pt,mr,lr,Kt):Kt?w(fn-(Pt-Ct),gn,mr,lr,Kt)||w(fn,gn-2*(Pt-Ct),mr,lr,Kt):w(fn,gn-(Pt-Ct),mr,lr,Kt)||w(fn-2*(Pt-Ct),gn,mr,lr,Kt):w(fn,gn,mr,lr,Kt),En&&Hn?Bt="inside":(Bt="outside",ir.remove(),ir=null)}else Bt="inside";if(!ir){var Zn=(ir=Qt(He,qn,vr=o.ensureUniformFontSize(ht,"outside"===Bt?Vn:Dn))).attr("transform");if(ir.attr("transform",""),mr=($n=p.bBox(ir.node())).width,lr=$n.height,ir.attr("transform",Zn),mr<=0||lr<=0)return void ir.remove()}var Kn,tr=sn.textangle;Kn="outside"===Bt?function(Dr,cn,In,Nt,Zt,un){var Tn,kn=!!un.isHorizontal,Pn=!!un.constrained,yn=un.angle||0,on=Zt.width,nn=Zt.height,dn=Math.abs(cn-Dr),xn=Math.abs(Nt-In);Tn=kn?xn>2*m?m:0:dn>2*m?m:0;var Bn=1;Pn&&(Bn=kn?Math.min(1,xn/nn):Math.min(1,dn/on));var Wn=E(yn),Qn=P(Zt,Wn),ar=(kn?Qn.x:Qn.y)/2,yr=(Zt.left+Zt.right)/2,ur=(Zt.top+Zt.bottom)/2,gr=(Dr+cn)/2,br=(In+Nt)/2,pr=0,Lr=0,Ur=kn?_(cn,Dr):_(In,Nt);return kn?(gr=cn-Ur*Tn,pr=Ur*ar):(br=Nt+Ur*Tn,Lr=-Ur*ar),{textX:yr,textY:ur,targetX:gr,targetY:br,anchorX:pr,anchorY:Lr,scale:Bn,rotate:Wn}}(xt,At,Mt,yt,$n,{isHorizontal:Kt,constrained:"both"===sn.constraintext||"outside"===sn.constraintext,angle:tr}):L(xt,At,Mt,yt,$n,{isHorizontal:Kt,constrained:"both"===sn.constraintext||"inside"===sn.constraintext,angle:tr,anchor:Gn,hasB:wn,r:Pt,overhead:Ct}),Kn.fontSize=vr.size,r("histogram"===sn.type?"bar":sn.type,Kn,mn),Sn.transform=Kn;var fr=f(ir,mn,Dt,Ut);o.setTransormAndDisplay(fr,Kn)}else He.select("text").remove()})(O,z,Ae,ne,ce,Oe,Ne,je,ve,dt,St,U,Z),z.layerClipId&&p.hideOutsideRangePoint(he,Ae.select("text"),N,G,$.xcalendar,$.ycalendar)}),p.setClipUrl(Q,!1===$.cliponaxis?null:z.layerClipId,O)});l.getComponentMethod("errorbars","plot")(O,re,z,U)},toMoveInsideBar:L}},45784:function(ie){"use strict";function F(e,S,k,o,T){var b=S.c2p(o?e.s0:e.p0,!0),p=S.c2p(o?e.s1:e.p1,!0),l=k.c2p(o?e.p0:e.s0,!0),t=k.c2p(o?e.p1:e.s1,!0);return T?[(b+p)/2,(l+t)/2]:o?[p,(l+t)/2]:[(b+p)/2,t]}ie.exports=function(e,S){var k,o=e.cd,T=e.xaxis,b=e.yaxis,p=o[0].trace,l="funnel"===p.type,t="h"===p.orientation,i=[];if(!1===S)for(k=0;k<o.length;k++)o[k].selected=0;else for(k=0;k<o.length;k++){var r=o[k],n="ct"in r?r.ct:F(r,T,b,t,l);S.contains(n,!1,k,e)?(i.push({pointNumber:k,x:T.c2d(r.x),y:b.c2d(r.y)}),r.selected=1):r.selected=0}return i}},72592:function(ie,F,e){"use strict";ie.exports=k;var S=e(3400).distinctVals;function k(o,T){this.traces=o,this.sepNegVal=T.sepNegVal,this.overlapNoMerge=T.overlapNoMerge;for(var b=1/0,p=T.posAxis._id.charAt(0),l=[],t=0;t<o.length;t++){for(var i=o[t],r=0;r<i.length;r++){var n=i[r],a=n.p;void 0===a&&(a=n[p]),void 0!==a&&l.push(a)}i[0]&&i[0].width1&&(b=Math.min(i[0].width1,b))}this.positions=l;var s=S(l);this.distinctPositions=s.vals,this.minDiff=1===s.vals.length&&b!==1/0?b:Math.min(s.minDiff,b);var c=(T.posAxis||{}).type;"category"!==c&&"multicategory"!==c||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}k.prototype.put=function(o,T){var b=this.getLabel(o,T),p=this.bins[b]||0;return this.bins[b]=p+T,p},k.prototype.get=function(o,T){var b=this.getLabel(o,T);return this.bins[b]||0},k.prototype.getLabel=function(o,T){return(T<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?o:Math.round(o/this.binWidth))}},60100:function(ie,F,e){"use strict";var S=e(33428),k=e(76308),o=e(43616),T=e(3400),b=e(24040),p=e(82744).resizeText,l=e(20832),t=l.textfont,i=l.insidetextfont,r=l.outsidetextfont,n=e(60444);function a(g,x,v){o.pointStyle(g.selectAll("path"),x,v),s(g,x,v)}function s(g,x,v){g.selectAll("text").each(function(_){var f=S.select(this),C=T.ensureUniformFontSize(v,c(f,_,x,v));o.font(f,C)})}function c(g,x,v,_){var f=_._fullLayout.font,C=v.textfont;if(g.classed("bartext-inside")){var w=m(x,v);C=u(v,x.i,f,w)}else g.classed("bartext-outside")&&(C=y(v,x.i,f));return C}function h(g,x,v){return d(t,g.textfont,x,v)}function u(g,x,v,_){var f=h(g,x,v);return(void 0===g._input.textfont||void 0===g._input.textfont.color||Array.isArray(g.textfont.color)&&void 0===g.textfont.color[x])&&(f={color:k.contrast(_),family:f.family,size:f.size,weight:f.weight,style:f.style,variant:f.variant,textcase:f.textcase,lineposition:f.lineposition,shadow:f.shadow}),d(i,g.insidetextfont,x,f)}function y(g,x,v){var _=h(g,x,v);return d(r,g.outsidetextfont,x,_)}function d(g,x,v,_){var f=n.getValue((x=x||{}).family,v),C=n.getValue(x.size,v),w=n.getValue(x.color,v),E=n.getValue(x.weight,v),P=n.getValue(x.style,v),L=n.getValue(x.variant,v),O=n.getValue(x.textcase,v),z=n.getValue(x.lineposition,v),V=n.getValue(x.shadow,v);return{family:n.coerceString(g.family,f,_.family),size:n.coerceNumber(g.size,C,_.size),color:n.coerceColor(g.color,w,_.color),weight:n.coerceString(g.weight,E,_.weight),style:n.coerceString(g.style,P,_.style),variant:n.coerceString(g.variant,L,_.variant),textcase:n.coerceString(g.variant,O,_.textcase),lineposition:n.coerceString(g.variant,z,_.lineposition),shadow:n.coerceString(g.variant,V,_.shadow)}}function m(g,x){return"waterfall"===x.type?x[g.dir].marker.color:g.mcc||g.mc||x.marker.color}ie.exports={style:function(g){var x=S.select(g).selectAll('g[class^="barlayer"]').selectAll("g.trace");p(g,x,"bar");var v=x.size(),_=g._fullLayout;x.style("opacity",function(f){return f[0].trace.opacity}).each(function(f){("stack"===_.barmode&&v>1||0===_.bargap&&0===_.bargroupgap&&!f[0].trace.marker.line.width)&&S.select(this).attr("shape-rendering","crispEdges")}),x.selectAll("g.points").each(function(f){a(S.select(this),f[0].trace,g)}),b.getComponentMethod("errorbars","style")(x)},styleTextPoints:s,styleOnSelect:function(g,x,v){var f,C,w,E,P,L,_=x[0].trace;_.selectedpoints?(C=_,w=g,o.selectedPointStyle((f=v).selectAll("path"),C),E=f.selectAll("text"),P=C,L=w,E.each(function(O){var z,V=S.select(this);if(O.selected){z=T.ensureUniformFontSize(L,c(V,O,P,L));var R=P.selected.textfont&&P.selected.textfont.color;R&&(z.color=R),o.font(V,z)}else o.selectedTextStyle(V,P)})):(a(v,_,g),b.getComponentMethod("errorbars","style")(v))},getInsideTextFont:u,getOutsideTextFont:y,getBarColor:m,resizeText:p}},55592:function(ie,F,e){"use strict";var S=e(76308),k=e(94288).hasColorscale,o=e(27260),T=e(3400).coercePattern;ie.exports=function(b,p,l,t,i){var r=l("marker.color",t),n=k(b,"marker");n&&o(b,p,i,l,{prefix:"marker.",cLetter:"c"}),l("marker.line.color",S.defaultLine),k(b,"marker.line")&&o(b,p,i,l,{prefix:"marker.line.",cLetter:"c"}),l("marker.line.width"),l("marker.opacity"),T(l,"marker.pattern",r,n),l("selected.marker.color"),l("unselected.marker.color")}},82744:function(ie,F,e){"use strict";var S=e(33428),k=e(3400);function o(T){return"_"+T+"Text_minsize"}ie.exports={recordMinTextSize:function(T,b,p){if(p.uniformtext.mode){var l=o(T),t=p.uniformtext.minsize,i=b.scale*b.fontSize;b.hide=i<t,p[l]=p[l]||1/0,b.hide||(p[l]=Math.min(p[l],Math.max(i,t)))}},clearMinTextSize:function(T,b){b[o(T)]=void 0},resizeText:function(T,b,p){var l=T._fullLayout,t=l["_"+p+"Text_minsize"];if(t){var i,r="hide"===l.uniformtext.mode;switch(p){case"funnelarea":case"pie":case"sunburst":i="g.slice";break;case"treemap":case"icicle":i="g.slice, g.pathbar";break;default:i="g.points > g.point"}b.selectAll(i).each(function(n){var a=n.transform;if(a){a.scale=r&&a.hide?0:t/a.fontSize;var s=S.select(this).select("text");k.setTransormAndDisplay(s,a)}})}}}},78100:function(ie,F,e){"use strict";var S,k=e(21776).Ks,o=e(92880).extendFlat,T=e(8319),b=e(20832);ie.exports={r:T.r,theta:T.theta,r0:T.r0,dr:T.dr,theta0:T.theta0,dtheta:T.dtheta,thetaunit:T.thetaunit,base:o({},b.base,{}),offset:o({},b.offset,{}),width:o({},b.width,{}),text:o({},b.text,{}),hovertext:o({},b.hovertext,{}),marker:(S=o({},b.marker),delete S.cornerradius,S),hoverinfo:T.hoverinfo,hovertemplate:k(),selected:b.selected,unselected:b.unselected}},47056:function(ie,F,e){"use strict";var S=e(94288).hasColorscale,k=e(47128),o=e(3400).isArrayOrTypedArray,T=e(84664),b=e(96376).setGroupPositions,p=e(4500),l=e(24040).traceIs,t=e(3400).extendFlat;ie.exports={calc:function(i,r){for(var n=i._fullLayout,a=r.subplot,c=n[a].angularaxis,h=n[a].radialaxis.makeCalcdata(r,"r"),u=c.makeCalcdata(r,"theta"),y=r._length,d=new Array(y),m=h,g=u,x=0;x<y;x++)d[x]={p:g[x],s:m[x]};function v(_){var f=r[_];void 0!==f&&(r["_"+_]=o(f)?c.makeCalcdata(r,_):c.d2c(f,r.thetaunit))}return"linear"===c.type&&(v("width"),v("offset")),S(r,"marker")&&k(i,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),S(r,"marker.line")&&k(i,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}),T(d,r),p(d,r),d},crossTraceCalc:function(i,r,n){for(var a=i.calcdata,s=[],c=0;c<a.length;c++){var h=a[c],u=h[0].trace;!0===u.visible&&l(u,"bar")&&u.subplot===n&&s.push(h)}var y=t({},r.radialaxis,{_id:"x"});b(i,r.angularaxis,y,s,{mode:r.barmode,norm:r.barnorm,gap:r.bargap,groupgap:r.bargroupgap})}}},70384:function(ie,F,e){"use strict";var S=e(3400),k=e(85968).handleRThetaDefaults,o=e(55592),T=e(78100);ie.exports=function(b,p,l,t){function i(r,n){return S.coerce(b,p,T,r,n)}k(b,p,t,i)?(i("thetaunit"),i("base"),i("offset"),i("width"),i("text"),i("hovertext"),i("hovertemplate"),o(b,p,i,l,t),S.coerceSelectionMarkerOpacity(p,i)):p.visible=!1}},68896:function(ie,F,e){"use strict";var S=e(93024),k=e(3400),o=e(63400).getTraceColor,T=k.fillText,b=e(8504).makeHoverPointText,p=e(57384).isPtInsidePolygon;ie.exports=function(l,t,i){var r=l.cd,n=r[0].trace,a=l.subplot,s=a.radialAxis,h=a.vangles,u=h?p:k.isPtInsideSector,y=l.maxHoverDistance,d=a.angularAxis._period||2*Math.PI,m=Math.abs(s.g2p(Math.sqrt(t*t+i*i))),g=Math.atan2(i,t);if(s.range[0]>s.range[1]&&(g+=Math.PI),S.getClosest(r,function(_){return u(m,g,[_.rp0,_.rp1],[_.thetag0,_.thetag1],h)?y+Math.min(1,Math.abs(_.thetag1-_.thetag0)/d)-1+(_.rp1-m)/(_.rp1-_.rp0)-1:1/0},l),!1!==l.index){var x=r[l.index];l.x0=l.x1=x.ct[0],l.y0=l.y1=x.ct[1];var v=k.extendFlat({},x,{r:x.s,theta:x.p});return T(x,n,l),b(v,n,a,l),l.hovertemplate=n.hovertemplate,l.color=o(n,x),l.xLabelVal=l.yLabelVal=void 0,x.s<0&&(l.idealAlign="left"),[l]}}},94456:function(ie,F,e){"use strict";ie.exports={moduleType:"trace",name:"barpolar",basePlotModule:e(40872),categories:["polar","bar","showLegend"],attributes:e(78100),layoutAttributes:e(9320),supplyDefaults:e(70384),supplyLayoutDefaults:e(89580),calc:e(47056).calc,crossTraceCalc:e(47056).crossTraceCalc,plot:e(42040),colorbar:e(5528),formatLabels:e(22852),style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,hoverPoints:e(68896),selectPoints:e(45784),meta:{}}},9320:function(ie){"use strict";ie.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},89580:function(ie,F,e){"use strict";var S=e(3400),k=e(9320);ie.exports=function(o,T,b){var p,l={};function t(n,a){return S.coerce(o[p]||{},T[p],k,n,a)}for(var i=0;i<b.length;i++){var r=b[i];"barpolar"===r.type&&!0===r.visible&&(l[p=r.subplot]||(t("barmode"),t("bargap"),l[p]=1))}}},42040:function(ie,F,e){"use strict";var S=e(33428),k=e(38248),o=e(3400),T=e(43616),b=e(57384);ie.exports=function(p,l,t){var u,y,d,i=p._context.staticPlot,r=l.xaxis,n=l.yaxis,a=l.radialAxis,s=l.angularAxis,c=(y=(u=l).cxx,d=u.cyy,u.vangles?function(m,g,x,v){var _,f;o.angleDelta(x,v)>0?(_=x,f=v):(_=v,f=x);var C=[b.findEnclosingVertexAngles(_,u.vangles)[0],(_+f)/2,b.findEnclosingVertexAngles(f,u.vangles)[1]];return b.pathPolygonAnnulus(m,g,_,f,C,y,d)}:function(m,g,x,v){return o.pathAnnulus(m,g,x,v,y,d)}),h=l.layers.frontplot.select("g.barlayer");o.makeTraceGroups(h,t,"trace bars").each(function(){var u=S.select(this),y=o.ensureSingle(u,"g","points").selectAll("g.point").data(o.identity);y.enter().append("g").style("vector-effect",i?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),y.exit().remove(),y.each(function(d){var m,g=S.select(this),x=d.rp0=a.c2p(d.s0),v=d.rp1=a.c2p(d.s1),_=d.thetag0=s.c2g(d.p0),f=d.thetag1=s.c2g(d.p1);if(k(x)&&k(v)&&k(_)&&k(f)&&x!==v&&_!==f){var C=a.c2g(d.s1),w=(_+f)/2;d.ct=[r.c2p(C*Math.cos(w)),n.c2p(C*Math.sin(w))],m=c(x,v,_,f)}else m="M0,0Z";o.ensureSingle(g,"path").attr("d",m)}),T.setClipUrl(u,l._hasClipOnAxisFalse?l.clipIds.forTraces:null,p)})}},63188:function(ie,F,e){"use strict";var S=e(98304),k=e(52904),o=e(20832),T=e(22548),b=e(29736).axisHoverFormat,p=e(21776).Ks,l=e(92880).extendFlat,t=k.marker,i=t.line;ie.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},sdmultiple:{valType:"number",min:0,editType:"calc",dflt:1},sizemode:{valType:"enumerated",values:["quartiles","sd"],editType:"calc",dflt:"quartiles"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:l({},t.symbol,{arrayOk:!1,editType:"plot"}),opacity:l({},t.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:l({},t.angle,{arrayOk:!1,editType:"calc"}),size:l({},t.size,{arrayOk:!1,editType:"calc"}),color:l({},t.color,{arrayOk:!1,editType:"style"}),line:{color:l({},i.color,{arrayOk:!1,dflt:T.defaultLine,editType:"style"}),width:l({},i.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:S(),whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},showwhiskers:{valType:"boolean",editType:"calc"},offsetgroup:o.offsetgroup,alignmentgroup:o.alignmentgroup,selected:{marker:k.selected.marker,editType:"style"},unselected:{marker:k.unselected.marker,editType:"style"},text:l({},k.text,{}),hovertext:l({},k.hovertext,{}),hovertemplate:p({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"},zorder:k.zorder}},62555:function(ie,F,e){"use strict";var S=e(38248),k=e(54460),o=e(1220),T=e(3400),b=e(39032).BADNUM,p=T._;ie.exports=function(u,y){var d,m,g,x,v,_,f,C=u._fullLayout,w=k.getFromId(u,y.xaxis||"x"),E=k.getFromId(u,y.yaxis||"y"),P=[],L="violin"===y.type?"_numViolins":"_numBoxes";"h"===y.orientation?(g=w,x="x",v=E,_="y",f=!!y.yperiodalignment):(g=E,x="y",v=w,_="x",f=!!y.xperiodalignment);var O,z,V,R,U,Z,N=function(Ue,ze,qe,Ke){var it,ft=ze+"0"in Ue;if(ze in Ue||ft&&"d"+ze in Ue){var dt=qe.makeCalcdata(Ue,ze);return[o(Ue,qe,ze,dt).vals,dt]}it=ft?Ue[ze+"0"]:"name"in Ue&&("category"===qe.type||S(Ue.name)&&-1!==["linear","log"].indexOf(qe.type)||T.isDateTime(Ue.name)&&"date"===qe.type)?Ue.name:Ke;for(var kt="multicategory"===qe.type?qe.r2c_just_indices(it):qe.d2c(it,0,Ue[ze+"calendar"]),St=Ue._length,Tt=new Array(St),lt=0;lt<St;lt++)Tt[lt]=kt;return[Tt]}(y,_,v,C[L]),G=N[0],W=N[1],ae=T.distinctVals(G,v),re=ae.vals,ne=ae.minDiff/2,Q="all"===(y.boxpoints||y.points)?T.identity:function(Ue){return Ue.v<O.lf||Ue.v>O.uf};if(y._hasPreCompStats){var $=y[x],X=function(Ue){return g.d2c((y[Ue]||[])[d])},oe=1/0,fe=-1/0;for(d=0;d<y._length;d++){var ue=G[d];if(S(ue)){if((O={}).pos=O[_]=ue,f&&W&&(O.orig_p=W[d]),O.q1=X("q1"),O.med=X("median"),O.q3=X("q3"),z=[],$&&T.isArrayOrTypedArray($[d]))for(m=0;m<$[d].length;m++)(Z=g.d2c($[d][m]))!==b&&(t(U={v:Z,i:[d,m]},y,[d,m]),z.push(U));if(O.pts=z.sort(i),R=(V=O[x]=z.map(r)).length,O.med!==b&&O.q1!==b&&O.q3!==b&&O.med>=O.q1&&O.q3>=O.med){var ge=X("lowerfence");O.lf=ge!==b&&ge<=O.q1?ge:n(O,V,R);var we=X("upperfence");O.uf=we!==b&&we>=O.q3?we:a(O,V,R);var Te=X("mean");O.mean=Te!==b?Te:R?T.mean(V,R):(O.q1+O.q3)/2;var xe=X("sd");O.sd=Te!==b&&xe>=0?xe:R?T.stdev(V,R,O.mean):O.q3-O.q1,O.lo=s(O),O.uo=c(O);var ye=X("notchspan");ye=ye!==b&&ye>0?ye:h(O,R),O.ln=O.med-ye,O.un=O.med+ye;var _e=O.lf,Ie=O.uf;y.boxpoints&&V.length&&(_e=Math.min(_e,V[0]),Ie=Math.max(Ie,V[R-1])),y.notched&&(_e=Math.min(_e,O.ln),Ie=Math.max(Ie,O.un)),O.min=_e,O.max=Ie}else{var De;T.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+O.q1,"median = "+O.med,"q3 = "+O.q3].join("\n")),O.med=De=O.med!==b?O.med:O.q1!==b?O.q3!==b?(O.q1+O.q3)/2:O.q1:O.q3!==b?O.q3:0,O.q1=O.q3=De,O.lf=O.uf=De,O.mean=O.sd=De,O.ln=O.un=De,O.min=O.max=De}oe=Math.min(oe,O.min),fe=Math.max(fe,O.max),O.pts2=z.filter(Q),P.push(O)}}y._extremes[g._id]=k.findExtremes(g,[oe,fe],{padded:!0})}else{var be=g.makeCalcdata(y,x),he=function(Ue,ze){for(var qe=Ue.length,Ke=new Array(qe+1),it=0;it<qe;it++)Ke[it]=Ue[it]-ze;return Ke[qe]=Ue[qe-1]+ze,Ke}(re,ne),ce=re.length,me=function(Ue){for(var ze=new Array(Ue),qe=0;qe<Ue;qe++)ze[qe]=[];return ze}(ce);for(d=0;d<y._length;d++)if(S(Z=be[d])){var Pe=T.findBin(G[d],he);Pe>=0&&Pe<ce&&(t(U={v:Z,i:d},y,d),me[Pe].push(U))}var Ae=1/0,Ce=-1/0,Oe=y.quartilemethod,Ne="exclusive"===Oe,je="inclusive"===Oe;for(d=0;d<ce;d++)if(me[d].length>0){var ve,Me;(O={}).pos=O[_]=re[d],z=O.pts=me[d].sort(i),R=(V=O[x]=z.map(r)).length,O.min=V[0],O.max=V[R-1],O.mean=T.mean(V,R),O.sd=T.stdev(V,R,O.mean)*y.sdmultiple,O.med=T.interp(V,.5),R%2&&(Ne||je)?(Ne?(ve=V.slice(0,R/2),Me=V.slice(R/2+1)):je&&(ve=V.slice(0,R/2+1),Me=V.slice(R/2)),O.q1=T.interp(ve,.5),O.q3=T.interp(Me,.5)):(O.q1=T.interp(V,.25),O.q3=T.interp(V,.75)),O.lf=n(O,V,R),O.uf=a(O,V,R),O.lo=s(O),O.uo=c(O);var Le=h(O,R);O.ln=O.med-Le,O.un=O.med+Le,Ae=Math.min(Ae,O.ln),Ce=Math.max(Ce,O.un),O.pts2=z.filter(Q),P.push(O)}y.notched&&T.isTypedArray(be)&&(be=Array.from(be)),y._extremes[g._id]=k.findExtremes(g,y.notched?be.concat([Ae,Ce]):be,{padded:!0})}return function(Ue,ze){if(T.isArrayOrTypedArray(ze.selectedpoints))for(var qe=0;qe<Ue.length;qe++){for(var Ke=Ue[qe].pts||[],it={},ft=0;ft<Ke.length;ft++)it[Ke[ft].i]=ft;T.tagSelected(Ke,ze,it)}}(P,y),P.length>0?(P[0].t={num:C[L],dPos:ne,posLetter:_,valLetter:x,labels:{med:p(u,"median:"),min:p(u,"min:"),q1:p(u,"q1:"),q3:p(u,"q3:"),max:p(u,"max:"),mean:"sd"===y.boxmean||"sd"===y.sizemode?p(u,"mean \xb1 \u03c3:").replace("\u03c3",1===y.sdmultiple?"\u03c3":y.sdmultiple+"\u03c3"):p(u,"mean:"),lf:p(u,"lower fence:"),uf:p(u,"upper fence:")}},C[L]++,P):[{t:{empty:!0}}]};var l={text:"tx",hovertext:"htx"};function t(u,y,d){for(var m in l)T.isArrayOrTypedArray(y[m])&&(Array.isArray(d)?T.isArrayOrTypedArray(y[m][d[0]])&&(u[l[m]]=y[m][d[0]][d[1]]):u[l[m]]=y[m][d])}function i(u,y){return u.v-y.v}function r(u){return u.v}function n(u,y,d){return 0===d?u.q1:Math.min(u.q1,y[Math.min(T.findBin(2.5*u.q1-1.5*u.q3,y,!0)+1,d-1)])}function a(u,y,d){return 0===d?u.q3:Math.max(u.q3,y[Math.max(T.findBin(2.5*u.q3-1.5*u.q1,y),0)])}function s(u){return 4*u.q1-3*u.q3}function c(u){return 4*u.q3-3*u.q1}function h(u,y){return 0===y?0:1.57*(u.q3-u.q1)/Math.sqrt(y)}},96404:function(ie,F,e){"use strict";var S=e(54460),k=e(3400),o=e(71888).getAxisGroup,T=["v","h"];function b(p,l,t,i){var r,n,a,s=l.calcdata,c=l._fullLayout,h=i._id,u=h.charAt(0),y=[],d=0;for(r=0;r<t.length;r++)for(a=s[t[r]],n=0;n<a.length;n++)y.push(i.c2l(a[n].pos,!0)),d+=(a[n].pts2||[]).length;if(y.length){var m=k.distinctVals(y);"category"!==i.type&&"multicategory"!==i.type||(m.minDiff=1);var g=m.minDiff/2;S.minDtick(i,m.minDiff,m.vals[0],!0);var x=c["violin"===p?"_numViolins":"_numBoxes"],v="group"===c[p+"mode"]&&x>1,_=1-c[p+"gap"],f=1-c[p+"groupgap"];for(r=0;r<t.length;r++){var C,w,E,P,L,O,z=(a=s[t[r]])[0].trace,V=a[0].t,R=z.width,U=z.side;if(R)C=w=P=R/2,E=0;else if(C=g,v){var Z=o(c,i._id)+z.orientation,G=Object.keys(((c._alignmentOpts[Z]||{})[z.alignmentgroup]||{}).offsetGroups||{}).length,W=G||x;w=C*_*f/W,E=2*C*(((G?z._offsetIndex:V.num)+.5)/W-.5)*_,P=C*_/W}else w=C*_*f,E=0,P=C;V.dPos=C,V.bPos=E,V.bdPos=w,V.wHover=P;var ae,re,ne,Q,$,X,oe=E+w,fe=!!R;if("positive"===U?(L=C*(R?1:.5),ae=oe,O=ae=E):"negative"===U?(L=ae=E,O=C*(R?1:.5),re=oe):(L=O=C,ae=re=oe),(z.boxpoints||z.points)&&d>0){var ue=z.pointpos,ge=z.jitter,we=z.marker.size/2,Te=0;ue+ge>=0&&((Te=oe*(ue+ge))>L?(fe=!0,$=we,ne=Te):Te>ae&&($=we,ne=L)),Te<=L&&(ne=L);var xe=0;ue-ge<=0&&((xe=-oe*(ue-ge))>O?(fe=!0,X=we,Q=xe):xe>re&&(X=we,Q=O)),xe<=O&&(Q=O)}else ne=L,Q=O;var ye=new Array(a.length);for(n=0;n<a.length;n++)ye[n]=a[n].pos;z._extremes[h]=S.findExtremes(i,ye,{padded:fe,vpadminus:Q,vpadplus:ne,vpadLinearized:!0,ppadminus:{x:X,y:$}[u],ppadplus:{x:$,y:X}[u]})}}}ie.exports={crossTraceCalc:function(p,l){for(var t=p.calcdata,i=l.xaxis,r=l.yaxis,n=0;n<T.length;n++){for(var a=T[n],s="h"===a?r:i,c=[],h=0;h<t.length;h++){var u=t[h],d=u[0].trace;!0!==d.visible||"box"!==d.type&&"candlestick"!==d.type||u[0].t.empty||(d.orientation||"v")!==a||d.xaxis!==i._id||d.yaxis!==r._id||c.push(h)}b("box",p,c,s)}},setPositionOffset:b}},90624:function(ie,F,e){"use strict";var S=e(3400),k=e(24040),o=e(76308),T=e(31147),b=e(20011),p=e(52976),l=e(63188);function t(r,n,a,s){function c(U){var Z=0;return U&&U.length&&(Z+=1,S.isArrayOrTypedArray(U[0])&&U[0].length&&(Z+=1)),Z}function h(U){return S.validate(r[U],l[U])}var u,y=a("y"),d=a("x");if("box"===n.type){var m=a("q1"),g=a("median"),x=a("q3");n._hasPreCompStats=m&&m.length&&g&&g.length&&x&&x.length,u=Math.min(S.minRowLength(m),S.minRowLength(g),S.minRowLength(x))}var v,_,f=c(y),C=c(d),w=f&&S.minRowLength(y),E=C&&S.minRowLength(d),P=s.calendar,L={autotypenumbers:s.autotypenumbers};if(n._hasPreCompStats)switch(String(C)+String(f)){case"00":var O=h("x0")||h("dx");v=!h("y0")&&!h("dy")||O?"v":"h",_=u;break;case"10":v="v",_=Math.min(u,E);break;case"20":v="h",_=Math.min(u,d.length);break;case"01":v="h",_=Math.min(u,w);break;case"02":v="v",_=Math.min(u,y.length);break;case"12":v="v",_=Math.min(u,E,y.length);break;case"21":v="h",_=Math.min(u,d.length,w);break;case"11":_=0;break;case"22":var z,V=!1;for(z=0;z<d.length;z++)if("category"===p(d[z],P,L)){V=!0;break}if(V)v="v",_=Math.min(u,E,y.length);else{for(z=0;z<y.length;z++)if("category"===p(y[z],P,L)){V=!0;break}V?(v="h",_=Math.min(u,d.length,w)):(v="v",_=Math.min(u,E,y.length))}}else f>0?(v="v",_=C>0?Math.min(E,w):Math.min(w)):C>0?(v="h",_=Math.min(E)):_=0;if(_){n._length=_;var R=a("orientation",v);n._hasPreCompStats?"v"===R&&0===C?(a("x0",0),a("dx",1)):"h"===R&&0===f&&(a("y0",0),a("dy",1)):"v"===R&&0===C?a("x0"):"h"===R&&0===f&&a("y0"),k.getComponentMethod("calendars","handleTraceDefaults")(r,n,["x","y"],s)}else n.visible=!1}function i(r,n,a,s){var c=s.prefix,h=S.coerce2(r,n,l,"marker.outliercolor"),u=a("marker.line.outliercolor"),y="outliers";n._hasPreCompStats?y="all":(h||u)&&(y="suspectedoutliers");var d=a(c+"points",y);d?(a("jitter","all"===d?.3:0),a("pointpos","all"===d?-1.5:0),a("marker.symbol"),a("marker.opacity"),a("marker.size"),a("marker.angle"),a("marker.color",n.line.color),a("marker.line.color"),a("marker.line.width"),"suspectedoutliers"===d&&(a("marker.line.outliercolor",n.marker.color),a("marker.line.outlierwidth")),a("selected.marker.color"),a("unselected.marker.color"),a("selected.marker.size"),a("unselected.marker.size"),a("text"),a("hovertext")):delete n.marker;var m=a("hoveron");"all"!==m&&-1===m.indexOf("points")||a("hovertemplate"),S.coerceSelectionMarkerOpacity(n,a)}ie.exports={supplyDefaults:function(r,n,a,s){function c(_,f){return S.coerce(r,n,l,_,f)}if(t(r,n,c,s),!1!==n.visible){T(r,n,s,c),c("xhoverformat"),c("yhoverformat");var h=n._hasPreCompStats;h&&(c("lowerfence"),c("upperfence")),c("line.color",(r.marker||{}).color||a),c("line.width"),c("fillcolor",o.addOpacity(n.line.color,.5));var u=!1;if(h){var y=c("mean"),d=c("sd");y&&y.length&&(u=!0,d&&d.length&&(u="sd"))}c("whiskerwidth");var m,g=c("sizemode");"quartiles"===g&&(m=c("boxmean",u)),c("showwhiskers","quartiles"===g),"sd"!==g&&"sd"!==m||c("sdmultiple"),c("width"),c("quartilemethod");var x=!1;if(h){var v=c("notchspan");v&&v.length&&(x=!0)}else S.validate(r.notchwidth,l.notchwidth)&&(x=!0);c("notched",x)&&c("notchwidth"),i(r,n,c,{prefix:"box"}),c("zorder")}},crossTraceDefaults:function(r,n){var s;function c(y){return S.coerce(s._input,s,l,y)}for(var h=0;h<r.length;h++){var u=(s=r[h]).type;"box"!==u&&"violin"!==u||"group"===n[u+"mode"]&&b(s._input,s,n,c)}},handleSampleDefaults:t,handlePointsDefaults:i}},10392:function(ie){"use strict";ie.exports=function(F,e){return e.hoverOnBox&&(F.hoverOnBox=e.hoverOnBox),"xVal"in e&&(F.x=e.xVal),"yVal"in e&&(F.y=e.yVal),e.xa&&(F.xaxis=e.xa),e.ya&&(F.yaxis=e.ya),F}},27576:function(ie,F,e){"use strict";var S=e(54460),k=e(3400),o=e(93024),T=e(76308),b=k.fillText;function p(t,i,r,n){var a,s,c,h,u,y,d,m,g,x,v,_,f,C,w=t.cd,E=t.xa,P=t.ya,L=w[0].trace,O=w[0].t,z="violin"===L.type,V=O.bdPos,R=O.wHover,U=function(De){return c.c2l(De.pos)+O.bPos-c.c2l(y)};z&&"both"!==L.side?("positive"===L.side&&(g=function(De){var be=U(De);return o.inbox(be,be+R,x)},_=V,f=0),"negative"===L.side&&(g=function(De){var be=U(De);return o.inbox(be-R,be,x)},_=0,f=V)):(g=function(De){var be=U(De);return o.inbox(be-R,be+R,x)},_=f=V),C=z?function(De){return o.inbox(De.span[0]-u,De.span[1]-u,x)}:function(De){return o.inbox(De.min-u,De.max-u,x)},"h"===L.orientation?(u=i,y=r,d=C,m=g,a="y",c=P,s="x",h=E):(u=r,y=i,d=g,m=C,a="x",c=E,s="y",h=P);var Z=Math.min(1,V/Math.abs(c.r2c(c.range[1])-c.r2c(c.range[0])));function N(De){return(d(De)+m(De))/2}x=t.maxHoverDistance-Z,v=t.maxSpikeDistance-Z;var G=o.getDistanceFunction(n,d,m,N);if(o.getClosest(w,G,t),!1===t.index)return[];var W=w[t.index],ae=L.line.color,re=(L.marker||{}).color;t.color=T.opacity(ae)&&L.line.width?ae:T.opacity(re)&&L.boxpoints?re:L.fillcolor,t[a+"0"]=c.c2p(W.pos+O.bPos-f,!0),t[a+"1"]=c.c2p(W.pos+O.bPos+_,!0),t[a+"LabelVal"]=void 0!==W.orig_p?W.orig_p:W.pos;var ne=a+"Spike";t.spikeDistance=N(W)*v/x,t[ne]=c.c2p(W.pos,!0);var Q=L.boxmean||"sd"===L.sizemode||(L.meanline||{}).visible,$=L.boxpoints||L.points,X=$&&Q?["max","uf","q3","med","mean","q1","lf","min"]:$&&!Q?["max","uf","q3","med","q1","lf","min"]:!$&&Q?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"];L.orientation===(h.range[1]<h.range[0]?"v":"h")&&X.reverse();for(var fe=t.spikeDistance,ue=t[ne],ge=[],we=0;we<X.length;we++){var Te=X[we];if(Te in W){var xe=W[Te],ye=h.c2p(xe,!0),_e=k.extendFlat({},t);_e.attr=Te,_e[s+"0"]=_e[s+"1"]=ye,_e[s+"LabelVal"]=xe,_e[s+"Label"]=(O.labels?O.labels[Te]+" ":"")+S.hoverLabelText(h,xe,L[s+"hoverformat"]),_e.hoverOnBox=!0,"mean"!==Te||!("sd"in W)||"sd"!==L.boxmean&&"sd"!==L.sizemode||(_e[s+"err"]=W.sd),_e.hovertemplate=!1,ge.push(_e)}}t.name="",t.spikeDistance=void 0,t[ne]=void 0;for(var Ie=0;Ie<ge.length;Ie++)"med"!==ge[Ie].attr?(ge[Ie].name="",ge[Ie].spikeDistance=void 0,ge[Ie][ne]=void 0):(ge[Ie].spikeDistance=fe,ge[Ie][ne]=ue);return ge}function l(t,i,r){for(var n,a,s,c=t.cd,h=t.xa,u=t.ya,y=c[0].trace,d=h.c2p(i),m=u.c2p(r),g=o.quadrature(function(z){var V=Math.max(3,z.mrc||0);return Math.max(Math.abs(h.c2p(z.x)-d)-V,1-3/V)},function(z){var V=Math.max(3,z.mrc||0);return Math.max(Math.abs(u.c2p(z.y)-m)-V,1-3/V)}),x=!1,v=0;v<c.length;v++){a=c[v];for(var _=0;_<(a.pts||[]).length;_++){var f=g(s=a.pts[_]);f<=t.distance&&(t.distance=f,x=[v,_])}}if(!x)return!1;s=(a=c[x[0]]).pts[x[1]];var C=h.c2p(s.x,!0),w=u.c2p(s.y,!0),E=s.mrc||1;n=k.extendFlat({},t,{index:s.i,color:(y.marker||{}).color,name:y.name,x0:C-E,x1:C+E,y0:w-E,y1:w+E,spikeDistance:t.distance,hovertemplate:y.hovertemplate});var P,L=a.orig_p,O=void 0!==L?L:a.pos;return"h"===y.orientation?(P=u,n.xLabelVal=s.x,n.yLabelVal=O):(P=h,n.xLabelVal=O,n.yLabelVal=s.y),n[P._id.charAt(0)+"Spike"]=P.c2p(a.pos,!0),b(s,y,n),n}ie.exports={hoverPoints:function(t,i,r,n){var a,s=t.cd[0].trace.hoveron,c=[];return-1!==s.indexOf("boxes")&&(c=c.concat(p(t,i,r,n))),-1!==s.indexOf("points")&&(a=l(t,i,r)),"closest"===n?a?[a]:c:(a&&c.push(a),c)},hoverOnBoxes:p,hoverOnPoints:l}},67244:function(ie,F,e){"use strict";ie.exports={attributes:e(63188),layoutAttributes:e(16560),supplyDefaults:e(90624).supplyDefaults,crossTraceDefaults:e(90624).crossTraceDefaults,supplyLayoutDefaults:e(68832).supplyLayoutDefaults,calc:e(62555),crossTraceCalc:e(96404).crossTraceCalc,plot:e(18728).plot,style:e(25776).style,styleOnSelect:e(25776).styleOnSelect,hoverPoints:e(27576).hoverPoints,eventData:e(10392),selectPoints:e(8264),moduleType:"trace",name:"box",basePlotModule:e(57952),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},16560:function(ie){"use strict";ie.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},68832:function(ie,F,e){"use strict";var S=e(24040),k=e(3400),o=e(16560);function T(b,p,l,t,i){for(var r=i+"Layout",n=!1,a=0;a<l.length;a++)if(S.traceIs(l[a],r)){n=!0;break}n&&(t(i+"mode"),t(i+"gap"),t(i+"groupgap"))}ie.exports={supplyLayoutDefaults:function(b,p,l){T(0,0,l,function(t,i){return k.coerce(b,p,o,t,i)},"box")},_supply:T}},18728:function(ie,F,e){"use strict";var S=e(33428),k=e(3400),o=e(43616);function T(l,t,i,r,n){var a,s,c="h"===i.orientation,h=t.val,u=t.pos,y=!!u.rangebreaks,d=r.bPos,m=r.wdPos||0,g=r.bPosPxOffset||0,x=i.whiskerwidth||0,v=!1!==i.showwhiskers,_=i.notched||!1,f=_?1-2*i.notchwidth:1;Array.isArray(r.bdPos)?(a=r.bdPos[0],s=r.bdPos[1]):(a=r.bdPos,s=r.bdPos);var C=l.selectAll("path.box").data("violin"!==i.type||i.box.visible?k.identity:[]);C.enter().append("path").style("vector-effect",n?"none":"non-scaling-stroke").attr("class","box"),C.exit().remove(),C.each(function(w){if(w.empty)return S.select(this).attr("d","M0,0Z");var E=u.c2l(w.pos+d,!0),P=u.l2p(E-a)+g,L=u.l2p(E+s)+g,O=y?(P+L)/2:u.l2p(E)+g,z=i.whiskerwidth,V=y?P*z+(1-z)*O:u.l2p(E-m)+g,R=y?L*z+(1-z)*O:u.l2p(E+m)+g,U=u.l2p(E-a*f)+g,Z=u.l2p(E+s*f)+g,N="sd"===i.sizemode,G=h.c2p(N?w.mean-w.sd:w.q1,!0),W=h.c2p(N?w.mean+w.sd:w.q3,!0),ae=k.constrain(h.c2p(N?w.mean:w.med,!0),Math.min(G,W)+1,Math.max(G,W)-1),re=void 0===w.lf||!1===i.boxpoints||N,ne=h.c2p(re?w.min:w.lf,!0),Q=h.c2p(re?w.max:w.uf,!0),$=h.c2p(w.ln,!0),X=h.c2p(w.un,!0);c?S.select(this).attr("d","M"+ae+","+U+"V"+Z+"M"+G+","+P+"V"+L+(_?"H"+$+"L"+ae+","+Z+"L"+X+","+L:"")+"H"+W+"V"+P+(_?"H"+X+"L"+ae+","+U+"L"+$+","+P:"")+"Z"+(v?"M"+G+","+O+"H"+ne+"M"+W+","+O+"H"+Q+(0===x?"":"M"+ne+","+V+"V"+R+"M"+Q+","+V+"V"+R):"")):S.select(this).attr("d","M"+U+","+ae+"H"+Z+"M"+P+","+G+"H"+L+(_?"V"+$+"L"+Z+","+ae+"L"+L+","+X:"")+"V"+W+"H"+P+(_?"V"+X+"L"+U+","+ae+"L"+P+","+$:"")+"Z"+(v?"M"+O+","+G+"V"+ne+"M"+O+","+W+"V"+Q+(0===x?"":"M"+V+","+ne+"H"+R+"M"+V+","+Q+"H"+R):""))})}function b(l,t,i,r){var n=t.x,a=t.y,s=r.bdPos,c=r.bPos,h=i.boxpoints||i.points;k.seedPseudoRandom();var u=l.selectAll("g.points").data(h?function(d){return d.forEach(function(m){m.t=r,m.trace=i}),d}:[]);u.enter().append("g").attr("class","points"),u.exit().remove();var y=u.selectAll("path").data(function(d){var m,g,x=d.pts2,v=Math.max((d.max-d.min)/10,d.q3-d.q1),_=1e-9*v,f=.01*v,C=[],w=0;if(i.jitter){if(0===v)for(w=1,C=new Array(x.length),m=0;m<x.length;m++)C[m]=1;else for(m=0;m<x.length;m++){var E=Math.max(0,m-5),P=x[E].v,L=Math.min(x.length-1,m+5),O=x[L].v;"all"!==h&&(x[m].v<d.lf?O=Math.min(O,d.lf):P=Math.max(P,d.uf));var z=Math.sqrt(f*(L-E)/(O-P+_))||0;z=k.constrain(Math.abs(z),0,1),C.push(z),w=Math.max(z,w)}g=2*i.jitter/(w||1)}for(m=0;m<x.length;m++){var V=x[m],R=V.v,U=i.jitter?g*C[m]*(k.pseudoRandom()-.5):0,Z=d.pos+c+s*(i.pointpos+U);"h"===i.orientation?(V.y=Z,V.x=R):(V.x=Z,V.y=R),"suspectedoutliers"===h&&R<d.uo&&R>d.lo&&(V.so=!0)}return x});y.enter().append("path").classed("point",!0),y.exit().remove(),y.call(o.translatePoints,n,a)}function p(l,t,i,r){var n,a,s=t.val,c=t.pos,h=!!c.rangebreaks,u=r.bPos,y=r.bPosPxOffset||0,d=i.boxmean||(i.meanline||{}).visible;Array.isArray(r.bdPos)?(n=r.bdPos[0],a=r.bdPos[1]):(n=r.bdPos,a=r.bdPos);var m=l.selectAll("path.mean").data("box"===i.type&&i.boxmean||"violin"===i.type&&i.box.visible&&i.meanline.visible?k.identity:[]);m.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),m.exit().remove(),m.each(function(g){var x=c.c2l(g.pos+u,!0),v=c.l2p(x-n)+y,_=c.l2p(x+a)+y,f=h?(v+_)/2:c.l2p(x)+y,C=s.c2p(g.mean,!0),w=s.c2p(g.mean-g.sd,!0),E=s.c2p(g.mean+g.sd,!0);"h"===i.orientation?S.select(this).attr("d","M"+C+","+v+"V"+_+("sd"===d?"m0,0L"+w+","+f+"L"+C+","+v+"L"+E+","+f+"Z":"")):S.select(this).attr("d","M"+v+","+C+"H"+_+("sd"===d?"m0,0L"+f+","+w+"L"+v+","+C+"L"+f+","+E+"Z":""))})}ie.exports={plot:function(l,t,i,r){var n=l._context.staticPlot,a=t.xaxis,s=t.yaxis;k.makeTraceGroups(r,i,"trace boxes").each(function(c){var h,u,y=S.select(this),d=c[0],m=d.t,g=d.trace;m.wdPos=m.bdPos*g.whiskerwidth,!0!==g.visible||m.empty?y.remove():("h"===g.orientation?(h=s,u=a):(h=a,u=s),T(y,{pos:h,val:u},g,m,n),b(y,{x:a,y:s},g,m),p(y,{pos:h,val:u},g,m))})},plotBoxAndWhiskers:T,plotPoints:b,plotBoxMean:p}},8264:function(ie){"use strict";ie.exports=function(F,e){var S,k,o=F.cd,T=F.xaxis,b=F.yaxis,p=[];if(!1===e)for(S=0;S<o.length;S++)for(k=0;k<(o[S].pts||[]).length;k++)o[S].pts[k].selected=0;else for(S=0;S<o.length;S++)for(k=0;k<(o[S].pts||[]).length;k++){var l=o[S].pts[k],t=T.c2p(l.x),i=b.c2p(l.y);e.contains([t,i],null,l.i,F)?(p.push({pointNumber:l.i,x:T.c2d(l.x),y:b.c2d(l.y)}),l.selected=1):l.selected=0}return p}},25776:function(ie,F,e){"use strict";var S=e(33428),k=e(76308),o=e(43616);ie.exports={style:function(T,b,p){var l=p||S.select(T).selectAll("g.trace.boxes");l.style("opacity",function(t){return t[0].trace.opacity}),l.each(function(t){var i=S.select(this),r=t[0].trace,n=r.line.width;function a(h,u,y,d){h.style("stroke-width",u+"px").call(k.stroke,y).call(k.fill,d)}var s=i.selectAll("path.box");if("candlestick"===r.type)s.each(function(h){if(!h.empty){var u=S.select(this),y=r[h.dir];a(u,y.line.width,y.line.color,y.fillcolor),u.style("opacity",r.selectedpoints&&!h.selected?.3:1)}});else{a(s,n,r.line.color,r.fillcolor),i.selectAll("path.mean").style({"stroke-width":n,"stroke-dasharray":2*n+"px,"+n+"px"}).call(k.stroke,r.line.color);var c=i.selectAll("path.point");o.pointStyle(c,r,T)}})},styleOnSelect:function(T,b,p){var l=b[0].trace,t=p.selectAll("path.point");l.selectedpoints?o.selectedPointStyle(t,l):o.pointStyle(t,l,T)}}},64216:function(ie,F,e){"use strict";var S=e(3400).extendFlat,k=e(29736).axisHoverFormat,o=e(20279),T=e(63188);function b(p){return{line:{color:S({},T.line.color,{dflt:p}),width:T.line.width,editType:"style"},fillcolor:T.fillcolor,editType:"style"}}ie.exports={xperiod:o.xperiod,xperiod0:o.xperiod0,xperiodalignment:o.xperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),x:o.x,open:o.open,high:o.high,low:o.low,close:o.close,line:{width:S({},T.line.width,{}),editType:"style"},increasing:b(o.increasing.line.color.dflt),decreasing:b(o.decreasing.line.color.dflt),text:o.text,hovertext:o.hovertext,whiskerwidth:S({},T.whiskerwidth,{dflt:0}),hoverlabel:o.hoverlabel,zorder:T.zorder}},46283:function(ie,F,e){"use strict";var S=e(3400),k=e(54460),o=e(1220),T=e(42812).calcCommon;function b(p,l,t,i){return{min:t,q1:Math.min(p,i),med:i,q3:Math.max(p,i),max:l}}ie.exports=function(p,l){var t=p._fullLayout,i=k.getFromId(p,l.xaxis),r=k.getFromId(p,l.yaxis),n=i.makeCalcdata(l,"x"),a=o(l,i,"x",n).vals,s=T(p,l,n,a,r,b);return s.length?(S.extendFlat(s[0].t,{num:t._numBoxes,dPos:S.distinctVals(a).minDiff/2,posLetter:"x",valLetter:"y"}),t._numBoxes++,s):[{t:{empty:!0}}]}},64588:function(ie,F,e){"use strict";var S=e(3400),k=e(76308),o=e(52744),T=e(31147),b=e(64216);function p(l,t,i,r){var n=i(r+".line.color");i(r+".line.width",t.line.width),i(r+".fillcolor",k.addOpacity(n,.5))}ie.exports=function(l,t,i,r){function n(a,s){return S.coerce(l,t,b,a,s)}o(l,t,n,r)?(T(l,t,r,n,{x:!0}),n("xhoverformat"),n("yhoverformat"),n("line.width"),p(0,t,n,"increasing"),p(0,t,n,"decreasing"),n("text"),n("hovertext"),n("whiskerwidth"),r._requestRangeslider[t.xaxis]=!0,n("zorder")):t.visible=!1}},61712:function(ie,F,e){"use strict";ie.exports={moduleType:"trace",name:"candlestick",basePlotModule:e(57952),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:e(64216),layoutAttributes:e(16560),supplyLayoutDefaults:e(68832).supplyLayoutDefaults,crossTraceCalc:e(96404).crossTraceCalc,supplyDefaults:e(64588),calc:e(46283),plot:e(18728).plot,layerName:"boxlayer",style:e(25776).style,hoverPoints:e(18720).hoverPoints,selectPoints:e(97384)}},93504:function(ie,F,e){"use strict";var S=e(63856),k=e(31780);ie.exports=function(o,T,b,p,l){var t,i,r,n;p("a")||(p("da"),p("a0")),p("b")||(p("db"),p("b0")),t=o,i=T,r=b,n=l,["aaxis","baxis"].forEach(function(a){var s=a.charAt(0),c=t[a]||{},h=k.newContainer(i,a);S(c,h,{noAutotickangles:!0,noTicklabelstep:!0,tickfont:"x",id:s+"axis",letter:s,font:i.font,name:a,data:t[s],calendar:i.calendar,dfltColor:n,bgColor:r.paper_bgcolor,autotypenumbersDflt:r.autotypenumbers,fullLayout:r}),h._categories=h._categories||[],t[a]||"-"===c.type||(t[a]={type:c.type})})}},51676:function(ie,F,e){"use strict";var S=e(3400).isArrayOrTypedArray;function k(o,T){if(!S(o)||T>=10)return null;for(var b=1/0,p=-1/0,l=o.length,t=0;t<l;t++){var i=o[t];if(S(i)){var r=k(i,T+1);r&&(b=Math.min(r[0],b),p=Math.max(r[1],p))}else b=Math.min(i,b),p=Math.max(i,p)}return[b,p]}ie.exports=function(o){return k(o,0)}},85720:function(ie,F,e){"use strict";var S=e(25376),k=e(98692),o=e(22548),T=S({editType:"calc"}),b=e(52904).zorder;T.family.dflt='"Open Sans", verdana, arial, sans-serif',T.size.dflt=12,T.color.dflt=o.defaultLine,ie.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:k,baxis:k,font:T,color:{valType:"color",dflt:o.defaultLine,editType:"plot"},transforms:void 0,zorder:b}},77712:function(ie,F,e){"use strict";var S=e(3400).isArrayOrTypedArray;ie.exports=function(k,o,T,b){var p,l,t,i,r,n,a,s,c,h,u,y,d,m=S(T)?"a":"b",g=("a"===m?k.aaxis:k.baxis).smoothing,x="a"===m?k.a2i:k.b2j,v="a"===m?T:b,_="a"===m?b:T,f="a"===m?o.a.length:o.b.length,C="a"===m?o.b.length:o.a.length,w=Math.floor("a"===m?k.b2j(_):k.a2i(_)),E="a"===m?function(ae){return k.evalxy([],ae,w)}:function(ae){return k.evalxy([],w,ae)};g&&(t=Math.max(0,Math.min(C-2,w)),i=w-t,l="a"===m?function(ae,re){return k.dxydi([],ae,t,re,i)}:function(ae,re){return k.dxydj([],t,ae,i,re)});var P=x(v[0]),L=x(v[1]),O=P<L?1:-1,z=1e-8*(L-P),V=O>0?Math.floor:Math.ceil,R=O>0?Math.ceil:Math.floor,U=O>0?Math.min:Math.max,Z=O>0?Math.max:Math.min,N=V(P+z),G=R(L-z),W=[[a=E(P)]];for(p=N;p*O<G*O;p+=O)r=[],u=Z(P,p),d=(y=U(L,p+O))-u,n=Math.max(0,Math.min(f-2,Math.floor(.5*(u+y)))),s=E(y),g&&(c=l(n,u-n),h=l(n,y-n),r.push([a[0]+c[0]/3*d,a[1]+c[1]/3*d]),r.push([s[0]-h[0]/3*d,s[1]-h[1]/3*d])),r.push(s),W.push(r),a=s;return W}},98692:function(ie,F,e){"use strict";var S=e(25376),k=e(22548),o=e(94724),T=e(29736).descriptionWithDates,b=e(67824).overrideAll,p=e(98192).u,l=e(92880).extendFlat;ie.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:S({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:o.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:l({},o.labelalias,{editType:"calc"}),tickfont:S({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:T("tick label")},tickformatstops:b(o.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:k.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:l({},p,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:l({},p,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:k.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:S({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},63856:function(ie,F,e){"use strict";var S=e(85720),k=e(76308).addOpacity,o=e(24040),T=e(3400),b=e(26332),p=e(95936),l=e(42568),t=e(22416),i=e(78344),r=e(52976);ie.exports=function(n,a,s){var c=s.letter,h=s.font||{},u=S[c+"axis"];function y(O,z){return T.coerce(n,a,u,O,z)}function d(O,z){return T.coerce2(n,a,u,O,z)}s.name&&(a._name=s.name,a._id=s.name),y("autotypenumbers",s.autotypenumbersDflt);var m=y("type");"-"===m&&(s.data&&function(O,z){if("-"===O.type){var V=O._id.charAt(0);O.type=r(z,O[V+"calendar"],{autotypenumbers:O.autotypenumbers})}}(a,s.data),"-"===a.type?a.type="linear":m=n.type=a.type),y("smoothing"),y("cheatertype"),y("showticklabels"),y("labelprefix",c+" = "),y("labelsuffix"),y("showtickprefix"),y("showticksuffix"),y("separatethousands"),y("tickformat"),y("exponentformat"),y("minexponent"),y("showexponent"),y("categoryorder"),y("tickmode"),y("tickvals"),y("ticktext"),y("tick0"),y("dtick"),"array"===a.tickmode&&(y("arraytick0"),y("arraydtick")),y("labelpadding"),a._hovertitle=c,"date"===m&&o.getComponentMethod("calendars","handleDefaults")(n,a,"calendar",s.calendar),i(a,s.fullLayout),a.c2p=T.identity;var g=y("color",s.dfltColor),x=g===n.color?g:h.color;y("title.text")&&(T.coerceFont(y,"title.font",h,{overrideDflt:{size:T.bigFont(h.size),color:x}}),y("title.offset")),y("tickangle"),y("autorange",!a.isValidRange(n.range))&&y("rangemode"),y("range"),a.cleanRange(),y("fixedrange"),b(n,a,y,m),l(n,a,y,m,s),p(n,a,y,m,s),t(n,a,y,{data:s.data,dataAttr:c});var v=d("gridcolor",k(g,.3)),_=d("gridwidth"),f=d("griddash"),C=y("showgrid");C||(delete a.gridcolor,delete a.gridwidth,delete a.griddash);var w=d("startlinecolor",g),E=d("startlinewidth",_);y("startline",a.showgrid||!!w||!!E)||(delete a.startlinecolor,delete a.startlinewidth);var P=d("endlinecolor",g),L=d("endlinewidth",_);return y("endline",a.showgrid||!!P||!!L)||(delete a.endlinecolor,delete a.endlinewidth),C?(y("minorgridcount"),y("minorgridwidth",_),y("minorgriddash",f),y("minorgridcolor",k(v,.06)),a.minorgridcount||(delete a.minorgridwidth,delete a.minorgriddash,delete a.minorgridcolor)):(delete a.gridcolor,delete a.gridwidth,delete a.griddash),"none"===a.showticklabels&&(delete a.tickfont,delete a.tickangle,delete a.showexponent,delete a.exponentformat,delete a.minexponent,delete a.tickformat,delete a.showticksuffix,delete a.showtickprefix),a.showticksuffix||delete a.ticksuffix,a.showtickprefix||delete a.tickprefix,y("tickmode"),a}},58744:function(ie,F,e){"use strict";var S=e(54460),k=e(3400).isArray1D,o=e(60776),T=e(51676),b=e(19216),p=e(14724),l=e(24944),t=e(26136),i=e(51512),r=e(2872),n=e(81e3);ie.exports=function(a,s){var c=S.getFromId(a,s.xaxis),h=S.getFromId(a,s.yaxis),u=s.aaxis,y=s.baxis,d=s.x,m=s.y,g=[];d&&k(d)&&g.push("x"),m&&k(m)&&g.push("y"),g.length&&r(s,u,y,"a","b",g);var x=s._a=s._a||s.a,v=s._b=s._b||s.b;d=s._x||s.x,m=s._y||s.y;var _={};s._cheater&&(d=o("index"===u.cheatertype?x.length:x,"index"===y.cheatertype?v.length:v,s.cheaterslope)),s._x=d=t(d),s._y=m=t(m),i(d,x,v),i(m,x,v),n(s),s.setScale();var w=T(d),E=T(m),P=.5*(w[1]-w[0]),L=.5*(w[1]+w[0]),O=.5*(E[1]-E[0]),z=.5*(E[1]+E[0]),V=1.3;return E=[z-O*V,z+O*V],s._extremes[c._id]=S.findExtremes(c,w=[L-P*V,L+P*V],{padded:!0}),s._extremes[h._id]=S.findExtremes(h,E,{padded:!0}),b(s,"a","b"),b(s,"b","a"),p(s,u),p(s,y),_.clipsegments=l(s._xctrl,s._yctrl,u,y),_.x=d,_.y=m,_.a=x,_.b=v,[_]}},24944:function(ie){"use strict";ie.exports=function(F,e,S,k){var o,T,b,p=[],l=!!S.smoothing,t=!!k.smoothing,i=F[0].length-1,r=F.length-1;for(o=0,T=[],b=[];o<=i;o++)T[o]=F[0][o],b[o]=e[0][o];for(p.push({x:T,y:b,bicubic:l}),o=0,T=[],b=[];o<=r;o++)T[o]=F[o][i],b[o]=e[o][i];for(p.push({x:T,y:b,bicubic:t}),o=i,T=[],b=[];o>=0;o--)T[i-o]=F[r][o],b[i-o]=e[r][o];for(p.push({x:T,y:b,bicubic:l}),o=r,T=[],b=[];o>=0;o--)T[r-o]=F[o][0],b[r-o]=e[o][0];return p.push({x:T,y:b,bicubic:t}),p}},19216:function(ie,F,e){"use strict";var S=e(54460),k=e(92880).extendFlat;ie.exports=function(o,T,b){var p,l,t,i,r,n,a,s,c,h,u,y,d,m,g=o["_"+T],x=o[T+"axis"],v=x._gridlines=[],_=x._minorgridlines=[],f=x._boundarylines=[],C=o["_"+b],w=o[b+"axis"];"array"===x.tickmode&&(x.tickvals=g.slice());var E=o._xctrl,P=o._yctrl,L=E[0].length,O=E.length,z=o._a.length,V=o._b.length;S.prepTicks(x),"array"===x.tickmode&&delete x.tickvals;var R=x.smoothing?3:1;function U(N){var G,W,ae,re,ne,Q,$,X,oe,fe,ue,ge,we=[],Te=[],xe={};if("b"===T)for(W=o.b2j(N),ae=Math.floor(Math.max(0,Math.min(V-2,W))),re=W-ae,xe.length=V,xe.crossLength=z,xe.xy=function(ye){return o.evalxy([],ye,W)},xe.dxy=function(ye,_e){return o.dxydi([],ye,ae,_e,re)},G=0;G<z;G++)Q=Math.min(z-2,G),$=G-Q,X=o.evalxy([],G,W),w.smoothing&&G>0&&(oe=o.dxydi([],G-1,ae,0,re),we.push(ne[0]+oe[0]/3),Te.push(ne[1]+oe[1]/3),fe=o.dxydi([],G-1,ae,1,re),we.push(X[0]-fe[0]/3),Te.push(X[1]-fe[1]/3)),we.push(X[0]),Te.push(X[1]),ne=X;else for(G=o.a2i(N),Q=Math.floor(Math.max(0,Math.min(z-2,G))),$=G-Q,xe.length=z,xe.crossLength=V,xe.xy=function(ye){return o.evalxy([],G,ye)},xe.dxy=function(ye,_e){return o.dxydj([],Q,ye,$,_e)},W=0;W<V;W++)ae=Math.min(V-2,W),re=W-ae,X=o.evalxy([],G,W),w.smoothing&&W>0&&(ue=o.dxydj([],Q,W-1,$,0),we.push(ne[0]+ue[0]/3),Te.push(ne[1]+ue[1]/3),ge=o.dxydj([],Q,W-1,$,1),we.push(X[0]-ge[0]/3),Te.push(X[1]-ge[1]/3)),we.push(X[0]),Te.push(X[1]),ne=X;return xe.axisLetter=T,xe.axis=x,xe.crossAxis=w,xe.value=N,xe.constvar=b,xe.index=s,xe.x=we,xe.y=Te,xe.smoothing=w.smoothing,xe}function Z(N){var G,W,ae,re,ne,Q=[],$=[],X={};if(X.length=g.length,X.crossLength=C.length,"b"===T)for(ae=Math.max(0,Math.min(V-2,N)),ne=Math.min(1,Math.max(0,N-ae)),X.xy=function(oe){return o.evalxy([],oe,N)},X.dxy=function(oe,fe){return o.dxydi([],oe,ae,fe,ne)},G=0;G<L;G++)Q[G]=E[N*R][G],$[G]=P[N*R][G];else for(W=Math.max(0,Math.min(z-2,N)),re=Math.min(1,Math.max(0,N-W)),X.xy=function(oe){return o.evalxy([],N,oe)},X.dxy=function(oe,fe){return o.dxydj([],W,oe,re,fe)},G=0;G<O;G++)Q[G]=E[G][N*R],$[G]=P[G][N*R];return X.axisLetter=T,X.axis=x,X.crossAxis=w,X.value=g[N],X.constvar=b,X.index=N,X.x=Q,X.y=$,X.smoothing=w.smoothing,X}if("array"===x.tickmode){for(i=5e-15,n=(r=[Math.floor((g.length-1-x.arraytick0)/x.arraydtick*(1+i)),Math.ceil(-x.arraytick0/x.arraydtick/(1+i))].sort(function(N,G){return N-G}))[0]-1,a=r[1]+1,s=n;s<a;s++)(l=x.arraytick0+x.arraydtick*s)<0||l>g.length-1||v.push(k(Z(l),{color:x.gridcolor,width:x.gridwidth,dash:x.griddash}));for(s=n;s<a;s++)if(t=x.arraytick0+x.arraydtick*s,u=Math.min(t+x.arraydtick,g.length-1),!(t<0||t>g.length-1||u<0||u>g.length-1))for(y=g[t],d=g[u],p=0;p<x.minorgridcount;p++)(m=u-t)<=0||(h=y+(d-y)*(p+1)/(x.minorgridcount+1)*(x.arraydtick/m))<g[0]||h>g[g.length-1]||_.push(k(U(h),{color:x.minorgridcolor,width:x.minorgridwidth,dash:x.minorgriddash}));x.startline&&f.push(k(Z(0),{color:x.startlinecolor,width:x.startlinewidth})),x.endline&&f.push(k(Z(g.length-1),{color:x.endlinecolor,width:x.endlinewidth}))}else{for(i=5e-15,n=(r=[Math.floor((g[g.length-1]-x.tick0)/x.dtick*(1+i)),Math.ceil((g[0]-x.tick0)/x.dtick/(1+i))].sort(function(N,G){return N-G}))[0],a=r[1],s=n;s<=a;s++)v.push(k(U(c=x.tick0+x.dtick*s),{color:x.gridcolor,width:x.gridwidth,dash:x.griddash}));for(s=n-1;s<a+1;s++)for(c=x.tick0+x.dtick*s,p=0;p<x.minorgridcount;p++)(h=c+x.dtick*(p+1)/(x.minorgridcount+1))<g[0]||h>g[g.length-1]||_.push(k(U(h),{color:x.minorgridcolor,width:x.minorgridwidth,dash:x.minorgriddash}));x.startline&&f.push(k(U(g[0]),{color:x.startlinecolor,width:x.startlinewidth})),x.endline&&f.push(k(U(g[g.length-1]),{color:x.endlinecolor,width:x.endlinewidth}))}}},14724:function(ie,F,e){"use strict";var S=e(54460),k=e(92880).extendFlat;ie.exports=function(o,T){var b,p,l,t=T._labels=[],i=T._gridlines;for(b=0;b<i.length;b++)l=i[b],-1!==["start","both"].indexOf(T.showticklabels)&&(p=S.tickText(T,l.value),k(p,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:l.xy(0),dxy:l.dxy(0,0),axis:l.axis,length:l.crossAxis.length,font:l.axis.tickfont,isFirst:0===b,isLast:b===i.length-1}),t.push(p)),-1!==["end","both"].indexOf(T.showticklabels)&&(p=S.tickText(T,l.value),k(p,{endAnchor:!1,xy:l.xy(l.crossLength-1),dxy:l.dxy(l.crossLength-2,1),axis:l.axis,length:l.crossAxis.length,font:l.axis.tickfont,isFirst:0===b,isLast:b===i.length-1}),t.push(p))}},62284:function(ie){"use strict";ie.exports=function(F,e,S,k){var o=F[0]-e[0],T=F[1]-e[1],b=S[0]-e[0],p=S[1]-e[1],l=Math.pow(o*o+T*T,.25),t=Math.pow(b*b+p*p,.25),i=(t*t*o-l*l*b)*k,r=(t*t*T-l*l*p)*k,n=t*(l+t)*3,a=l*(l+t)*3;return[[e[0]+(n&&i/n),e[1]+(n&&r/n)],[e[0]-(a&&i/a),e[1]-(a&&r/a)]]}},60776:function(ie,F,e){"use strict";var S=e(3400).isArrayOrTypedArray;ie.exports=function(k,o,T){var b,p,l,t,i,r,n=[],a=S(k)?k.length:k,s=S(o)?o.length:o,c=S(k)?k:null,h=S(o)?o:null;c&&(l=(c.length-1)/(c[c.length-1]-c[0])/(a-1)),h&&(t=(h.length-1)/(h[h.length-1]-h[0])/(s-1));var u=1/0,y=-1/0;for(p=0;p<s;p++)for(n[p]=[],i=h?(h[p]-h[0])*t:p/(s-1),b=0;b<a;b++)r=(c?(c[b]-c[0])*l:b/(a-1))-i*T,u=Math.min(r,u),y=Math.max(r,y),n[p][b]=r;var d=1/(y-u),m=-u*d;for(p=0;p<s;p++)for(b=0;b<a;b++)n[p][b]=d*n[p][b]+m;return n}},30180:function(ie,F,e){"use strict";var S=e(62284),k=e(3400).ensureArray;function o(T,b,p){return[(2*(-.5*p[0]+1.5*b[0])+T[0])/3,(2*(-.5*p[1]+1.5*b[1])+T[1])/3]}ie.exports=function(T,b,p,l,t,i){var r,n,a,s,c,h,u,y,d,m,g=p[0].length,x=p.length,v=t?3*g-2:g,_=i?3*x-2:x;for(T=k(T,_),b=k(b,_),a=0;a<_;a++)T[a]=k(T[a],v),b[a]=k(b[a],v);for(n=0,s=0;n<x;n++,s+=i?3:1)for(c=T[s],h=b[s],u=p[n],y=l[n],r=0,a=0;r<g;r++,a+=t?3:1)c[a]=u[r],h[a]=y[r];if(t)for(n=0,s=0;n<x;n++,s+=i?3:1){for(r=1,a=3;r<g-1;r++,a+=3)d=S([p[n][r-1],l[n][r-1]],[p[n][r],l[n][r]],[p[n][r+1],l[n][r+1]],t),T[s][a-1]=d[0][0],b[s][a-1]=d[0][1],T[s][a+1]=d[1][0],b[s][a+1]=d[1][1];m=o([T[s][0],b[s][0]],[T[s][2],b[s][2]],[T[s][3],b[s][3]]),T[s][1]=m[0],b[s][1]=m[1],m=o([T[s][v-1],b[s][v-1]],[T[s][v-3],b[s][v-3]],[T[s][v-4],b[s][v-4]]),T[s][v-2]=m[0],b[s][v-2]=m[1]}if(i)for(a=0;a<v;a++){for(s=3;s<_-3;s+=3)d=S([T[s-3][a],b[s-3][a]],[T[s][a],b[s][a]],[T[s+3][a],b[s+3][a]],i),T[s-1][a]=d[0][0],b[s-1][a]=d[0][1],T[s+1][a]=d[1][0],b[s+1][a]=d[1][1];m=o([T[0][a],b[0][a]],[T[2][a],b[2][a]],[T[3][a],b[3][a]]),T[1][a]=m[0],b[1][a]=m[1],m=o([T[_-1][a],b[_-1][a]],[T[_-3][a],b[_-3][a]],[T[_-4][a],b[_-4][a]]),T[_-2][a]=m[0],b[_-2][a]=m[1]}if(t&&i)for(s=1;s<_;s+=(s+1)%3==0?2:1){for(a=3;a<v-3;a+=3)d=S([T[s][a-3],b[s][a-3]],[T[s][a],b[s][a]],[T[s][a+3],b[s][a+3]],t),T[s][a-1]=.5*(T[s][a-1]+d[0][0]),b[s][a-1]=.5*(b[s][a-1]+d[0][1]),T[s][a+1]=.5*(T[s][a+1]+d[1][0]),b[s][a+1]=.5*(b[s][a+1]+d[1][1]);m=o([T[s][0],b[s][0]],[T[s][2],b[s][2]],[T[s][3],b[s][3]]),T[s][1]=.5*(T[s][1]+m[0]),b[s][1]=.5*(b[s][1]+m[1]),m=o([T[s][v-1],b[s][v-1]],[T[s][v-3],b[s][v-3]],[T[s][v-4],b[s][v-4]]),T[s][v-2]=.5*(T[s][v-2]+m[0]),b[s][v-2]=.5*(b[s][v-2]+m[1])}return[T,b]}},24588:function(ie){"use strict";ie.exports={RELATIVE_CULL_TOLERANCE:1e-6}},26435:function(ie){"use strict";ie.exports=function(F,e,S){return e&&S?function(k,o,T,b,p){var l,n,a;k||(k=[]),o*=3,T*=3;var s=b*b,c=1-b,h=c*c,u=c*b*2,y=-3*h,d=3*(h-u),m=3*(u-s),g=3*s,x=p*p,v=x*p,_=1-p,f=_*_,C=f*_;for(a=0;a<F.length;a++)l=y*(n=F[a])[T][o]+d*n[T][o+1]+m*n[T][o+2]+g*n[T][o+3],k[a]=C*l+3*(f*p*(y*n[T+1][o]+d*n[T+1][o+1]+m*n[T+1][o+2]+g*n[T+1][o+3])+_*x*(y*n[T+2][o]+d*n[T+2][o+1]+m*n[T+2][o+2]+g*n[T+2][o+3]))+v*(y*n[T+3][o]+d*n[T+3][o+1]+m*n[T+3][o+2]+g*n[T+3][o+3]);return k}:e?function(k,o,T,b,p){var l,i,r;k||(k=[]),o*=3;var n=b*b,a=1-b,s=a*a,c=a*b*2,h=-3*s,u=3*(s-c),y=3*(c-n),d=3*n,m=1-p;for(i=0;i<F.length;i++)l=h*(r=F[i])[T][o]+u*r[T][o+1]+y*r[T][o+2]+d*r[T][o+3],k[i]=m*l+p*(h*r[T+1][o]+u*r[T+1][o+1]+y*r[T+1][o+2]+d*r[T+1][o+3]);return k}:S?function(k,o,T,b,p){var l,n,a;k||(k=[]),T*=3;var s=p*p,c=s*p,h=1-p,u=h*h,y=u*h;for(n=0;n<F.length;n++)l=(a=F[n])[T][o+1]-a[T][o],k[n]=y*l+3*(u*p*(a[T+1][o+1]-a[T+1][o])+h*s*(a[T+2][o+1]-a[T+2][o]))+c*(a[T+3][o+1]-a[T+3][o]);return k}:function(k,o,T,b,p){var l,i,r;k||(k=[]);var n=1-p;for(i=0;i<F.length;i++)l=(r=F[i])[T][o+1]-r[T][o],k[i]=n*l+p*(r[T+1][o+1]-r[T+1][o]);return k}}},24464:function(ie){"use strict";ie.exports=function(F,e,S){return e&&S?function(k,o,T,b,p){var l,n,a;k||(k=[]),o*=3,T*=3;var s=b*b,c=s*b,h=1-b,u=h*h,y=u*h,d=p*p,m=1-p,g=m*m,x=m*p*2,v=-3*g,_=3*(g-x),f=3*(x-d),C=3*d;for(a=0;a<F.length;a++)l=v*(n=F[a])[T][o]+_*n[T+1][o]+f*n[T+2][o]+C*n[T+3][o],k[a]=y*l+3*(u*b*(v*n[T][o+1]+_*n[T+1][o+1]+f*n[T+2][o+1]+C*n[T+3][o+1])+h*s*(v*n[T][o+2]+_*n[T+1][o+2]+f*n[T+2][o+2]+C*n[T+3][o+2]))+c*(v*n[T][o+3]+_*n[T+1][o+3]+f*n[T+2][o+3]+C*n[T+3][o+3]);return k}:e?function(k,o,T,b,p){var l,n,a;k||(k=[]),o*=3;var s=p*p,c=s*p,h=1-p,u=h*h,y=u*h;for(n=0;n<F.length;n++)l=(a=F[n])[T+1][o]-a[T][o],k[n]=y*l+3*(u*p*(a[T+1][o+1]-a[T][o+1])+h*s*(a[T+1][o+2]-a[T][o+2]))+c*(a[T+1][o+3]-a[T][o+3]);return k}:S?function(k,o,T,b,p){var l,i,r;k||(k=[]),T*=3;var n=1-b,a=p*p,s=1-p,c=s*s,h=s*p*2,u=-3*c,y=3*(c-h),d=3*(h-a),m=3*a;for(i=0;i<F.length;i++)l=u*(r=F[i])[T][o]+y*r[T+1][o]+d*r[T+2][o]+m*r[T+3][o],k[i]=n*l+b*(u*r[T][o+1]+y*r[T+1][o+1]+d*r[T+2][o+1]+m*r[T+3][o+1]);return k}:function(k,o,T,b,p){var l,i,r;k||(k=[]);var n=1-b;for(i=0;i<F.length;i++)l=(r=F[i])[T+1][o]-r[T][o],k[i]=n*l+b*(r[T+1][o+1]-r[T][o+1]);return k}}},29056:function(ie){"use strict";ie.exports=function(F,e,S,k,o){var T=e-2,b=S-2;return k&&o?function(p,l,t){var i,s,c;p||(p=[]);var h=Math.max(0,Math.min(Math.floor(l),T)),u=Math.max(0,Math.min(Math.floor(t),b)),y=Math.max(0,Math.min(1,l-h)),d=Math.max(0,Math.min(1,t-u));h*=3,u*=3;var m=y*y,g=m*y,x=1-y,v=x*x,_=v*x,f=d*d,C=f*d,w=1-d,E=w*w,P=E*w;for(c=0;c<F.length;c++)i=_*(s=F[c])[u][h]+3*(v*y*s[u][h+1]+x*m*s[u][h+2])+g*s[u][h+3],p[c]=P*i+3*(E*d*(_*s[u+1][h]+3*(v*y*s[u+1][h+1]+x*m*s[u+1][h+2])+g*s[u+1][h+3])+w*f*(_*s[u+2][h]+3*(v*y*s[u+2][h+1]+x*m*s[u+2][h+2])+g*s[u+2][h+3]))+C*(_*s[u+3][h]+3*(v*y*s[u+3][h+1]+x*m*s[u+3][h+2])+g*s[u+3][h+3]);return p}:k?function(p,l,t){p||(p=[]);var i,s,c,h=Math.max(0,Math.min(Math.floor(l),T)),u=Math.max(0,Math.min(Math.floor(t),b)),y=Math.max(0,Math.min(1,l-h)),d=Math.max(0,Math.min(1,t-u));h*=3;var m=y*y,g=m*y,x=1-y,v=x*x,_=v*x,f=1-d;for(s=0;s<F.length;s++)i=f*(c=F[s])[u][h]+d*c[u+1][h],p[s]=_*i+3*(v*y*(f*c[u][h+1]+d*c[u+1][h+1])+x*m*(f*c[u][h+2]+d*c[u+1][h+1]))+g*(f*c[u][h+3]+d*c[u+1][h+1]);return p}:o?function(p,l,t){p||(p=[]);var i,s,c,h=Math.max(0,Math.min(Math.floor(l),T)),u=Math.max(0,Math.min(Math.floor(t),b)),y=Math.max(0,Math.min(1,l-h)),d=Math.max(0,Math.min(1,t-u));u*=3;var m=d*d,g=m*d,x=1-d,v=x*x,_=v*x,f=1-y;for(s=0;s<F.length;s++)i=f*(c=F[s])[u][h]+y*c[u][h+1],p[s]=_*i+3*(v*d*(f*c[u+1][h]+y*c[u+1][h+1])+x*m*(f*c[u+2][h]+y*c[u+2][h+1]))+g*(f*c[u+3][h]+y*c[u+3][h+1]);return p}:function(p,l,t){p||(p=[]);var i,n,a,s=Math.max(0,Math.min(Math.floor(l),T)),c=Math.max(0,Math.min(Math.floor(t),b)),h=Math.max(0,Math.min(1,l-s)),u=Math.max(0,Math.min(1,t-c)),y=1-u,d=1-h;for(n=0;n<F.length;n++)i=d*(a=F[n])[c][s]+h*a[c][s+1],p[n]=y*i+u*(d*a[c+1][s]+h*a[c+1][s+1]);return p}}},38356:function(ie,F,e){"use strict";var S=e(3400),k=e(86411),o=e(93504),T=e(85720),b=e(22548);ie.exports=function(p,l,t,i){function r(a,s){return S.coerce(p,l,T,a,s)}l._clipPathId="clip"+l.uid+"carpet";var n=r("color",b.defaultLine);S.coerceFont(r,"font",i.font),r("carpet"),o(p,l,i,r,n),l.a&&l.b?(l.a.length<3&&(l.aaxis.smoothing=0),l.b.length<3&&(l.baxis.smoothing=0),k(p,l,r)||(l.visible=!1),l._cheater&&r("cheaterslope"),r("zorder")):l.visible=!1}},95856:function(ie,F,e){"use strict";ie.exports={attributes:e(85720),supplyDefaults:e(38356),plot:e(164),calc:e(58744),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:e(57952),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},50948:function(ie){"use strict";ie.exports=function(F,e){for(var S,k=F._fullData.length,o=0;o<k;o++){var T=F._fullData[o];if(T.index!==e.index&&"carpet"===T.type&&(S||(S=T),T.carpet===e.carpet))return T}return S}},53416:function(ie){"use strict";ie.exports=function(F,e,S){if(0===F.length)return"";var k,o=[],T=S?3:1;for(k=0;k<F.length;k+=T)o.push(F[k]+","+e[k]),S&&k<F.length-T&&(o.push("C"),o.push([F[k+1]+","+e[k+1],F[k+2]+","+e[k+2]+" "].join(" ")));return o.join(S?"":"L")}},87072:function(ie,F,e){"use strict";var S=e(3400).isArrayOrTypedArray;ie.exports=function(k,o,T){var b;for(S(k)?k.length>o.length&&(k=k.slice(0,o.length)):k=[],b=0;b<o.length;b++)k[b]=T(o[b]);return k}},15584:function(ie){"use strict";ie.exports=function(F,e,S,k,o,T){var b=o[0]*F.dpdx(e),p=o[1]*F.dpdy(S),l=1,t=1;if(T){var i=Math.sqrt(o[0]*o[0]+o[1]*o[1]),r=Math.sqrt(T[0]*T[0]+T[1]*T[1]);t=Math.max(0,(o[0]*T[0]+o[1]*T[1])/i/r)}var a=180*Math.atan2(p,b)/Math.PI;return a<-90?(a+=180,l=-l):a>90&&(a-=180,l=-l),{angle:a,flip:l,p:F.c2p(k,e,S),offsetMultplier:t}}},164:function(ie,F,e){"use strict";var S=e(33428),k=e(43616),o=e(87072),T=e(53416),b=e(15584),p=e(72736),l=e(3400),t=l.strRotate,i=l.strTranslate,r=e(84284);function n(u,y,d,m,g,x,v){var _="const-"+g+"-lines",f=d.selectAll("."+_).data(x);f.enter().append("path").classed(_,!0).style("vector-effect",v?"none":"non-scaling-stroke"),f.each(function(C){var w=C,P=w.y,L=o([],w.x,u.c2p),O=o([],P,y.c2p),z="M"+T(L,O,w.smoothing);S.select(this).attr("d",z).style("stroke-width",w.width).style("stroke",w.color).style("stroke-dasharray",k.dashStyle(w.dash,w.width)).style("fill","none")}),f.exit().remove()}function a(u,y,d,m,g,x,v,_){var f=x.selectAll("text."+_).data(v);f.enter().append("text").classed(_,!0);var C=0,w={};return f.each(function(E,P){var L;if("auto"===E.axis.tickangle)L=b(m,y,d,E.xy,E.dxy);else{var O=(E.axis.tickangle+180)*Math.PI/180;L=b(m,y,d,E.xy,[Math.cos(O),Math.sin(O)])}P||(w={angle:L.angle,flip:L.flip});var z=(E.endAnchor?-1:1)*L.flip,V=S.select(this).attr({"text-anchor":z>0?"start":"end","data-notex":1}).call(k.font,E.font).text(E.text).call(p.convertToTspans,u),R=k.bBox(this);V.attr("transform",i(L.p[0],L.p[1])+t(L.angle)+i(E.axis.labelpadding*z,.3*R.height)),C=Math.max(C,R.width+E.axis.labelpadding)}),f.exit().remove(),w.maxExtent=C,w}ie.exports=function(u,y,d,m){var g=u._context.staticPlot,x=y.xaxis,v=y.yaxis,_=u._fullLayout._clips;l.makeTraceGroups(m,d,"trace").each(function(f){var C=S.select(this),w=f[0],E=w.trace,P=E.aaxis,L=E.baxis,O=l.ensureSingle(C,"g","minorlayer"),z=l.ensureSingle(C,"g","majorlayer"),V=l.ensureSingle(C,"g","boundarylayer"),R=l.ensureSingle(C,"g","labellayer");C.style("opacity",E.opacity),n(x,v,z,0,"a",P._gridlines,!0),n(x,v,z,0,"b",L._gridlines,!0),n(x,v,O,0,"a",P._minorgridlines,!0),n(x,v,O,0,"b",L._minorgridlines,!0),n(x,v,V,0,"a-boundary",P._boundarylines,g),n(x,v,V,0,"b-boundary",L._boundarylines,g);var N,G,W,re,ne,Q,$,X,oe,fe,ue,ge,we,Te,xe,U=a(u,x,v,E,0,R,P._labels,"a-label"),Z=a(u,x,v,E,0,R,L._labels,"b-label");N=u,G=R,W=E,re=x,ne=v,Q=U,$=Z,ge=l.aggNums(Math.min,null,W.a),we=l.aggNums(Math.max,null,W.a),Te=l.aggNums(Math.min,null,W.b),xe=l.aggNums(Math.max,null,W.b),fe=W.ab2xy(X=.5*(ge+we),oe=Te,!0),ue=W.dxyda_rough(X,oe),void 0===Q.angle&&l.extendFlat(Q,b(W,re,ne,fe,W.dxydb_rough(X,oe))),h(N,G,W,0,fe,ue,W.aaxis,re,ne,Q,"a-title"),fe=W.ab2xy(X=ge,oe=.5*(Te+xe),!0),ue=W.dxydb_rough(X,oe),void 0===$.angle&&l.extendFlat($,b(W,re,ne,fe,W.dxyda_rough(X,oe))),h(N,G,W,0,fe,ue,W.baxis,re,ne,$,"b-title"),function(N,G,W,ae,re){var ne,Q,$,X,oe=W.select("#"+N._clipPathId);oe.size()||(oe=W.append("clipPath").classed("carpetclip",!0));var fe=l.ensureSingle(oe,"path","carpetboundary"),ue=G.clipsegments,ge=[];for(X=0;X<ue.length;X++)Q=o([],(ne=ue[X]).x,ae.c2p),$=o([],ne.y,re.c2p),ge.push(T(Q,$,ne.bicubic));var we="M"+ge.join("L")+"Z";oe.attr("id",N._clipPathId),fe.attr("d",we)}(E,w,_,x,v)})};var s=r.LINE_SPACING,c=(1-r.MID_SHIFT)/s+1;function h(u,y,d,m,g,x,v,_,f,C,w){var E=[];v.title.text&&E.push(v.title.text);var P=y.selectAll("text."+w).data(E),L=C.maxExtent;P.enter().append("text").classed(w,!0),P.each(function(){var O=b(d,_,f,g,x);-1===["start","both"].indexOf(v.showticklabels)&&(L=0);var z=v.title.font.size;L+=z+v.title.offset;var V=(C.angle+(C.flip<0?180:0)-O.angle+450)%360,R=V>90&&V<270,U=S.select(this);U.text(v.title.text).call(p.convertToTspans,u),R&&(L=(-p.lineCount(U)+c)*s*z-L),U.attr("transform",i(O.p[0],O.p[1])+t(O.angle)+i(0,L)).attr("text-anchor","middle").call(k.font,v.title.font)}),P.exit().remove()}},81e3:function(ie,F,e){"use strict";var S=e(24588),k=e(14952).findBin,o=e(30180),T=e(29056),b=e(26435),p=e(24464);ie.exports=function(l){var t=l._a,i=l._b,r=t.length,n=i.length,a=l.aaxis,s=l.baxis,c=t[0],h=t[r-1],u=i[0],y=i[n-1],d=t[t.length-1]-t[0],m=i[i.length-1]-i[0],g=d*S.RELATIVE_CULL_TOLERANCE,x=m*S.RELATIVE_CULL_TOLERANCE;c-=g,h+=g,u-=x,y+=x,l.isVisible=function(v,_){return v>c&&v<h&&_>u&&_<y},l.isOccluded=function(v,_){return v<c||v>h||_<u||_>y},l.setScale=function(){var f=o(l._xctrl,l._yctrl,l._x,l._y,a.smoothing,s.smoothing);l._xctrl=f[0],l._yctrl=f[1],l.evalxy=T([l._xctrl,l._yctrl],r,n,a.smoothing,s.smoothing),l.dxydi=b([l._xctrl,l._yctrl],a.smoothing,s.smoothing),l.dxydj=p([l._xctrl,l._yctrl],a.smoothing,s.smoothing)},l.i2a=function(v){var _=Math.max(0,Math.floor(v[0]),r-2),f=v[0]-_;return(1-f)*t[_]+f*t[_+1]},l.j2b=function(v){var _=Math.max(0,Math.floor(v[1]),r-2),f=v[1]-_;return(1-f)*i[_]+f*i[_+1]},l.ij2ab=function(v){return[l.i2a(v[0]),l.j2b(v[1])]},l.a2i=function(v){var _=Math.max(0,Math.min(k(v,t),r-2)),f=t[_];return Math.max(0,Math.min(r-1,_+(v-f)/(t[_+1]-f)))},l.b2j=function(v){var _=Math.max(0,Math.min(k(v,i),n-2)),f=i[_];return Math.max(0,Math.min(n-1,_+(v-f)/(i[_+1]-f)))},l.ab2ij=function(v){return[l.a2i(v[0]),l.b2j(v[1])]},l.i2c=function(v,_){return l.evalxy([],v,_)},l.ab2xy=function(v,_,f){if(!f&&(v<t[0]||v>t[r-1]|_<i[0]||_>i[n-1]))return[!1,!1];var C=l.a2i(v),w=l.b2j(_),E=l.evalxy([],C,w);if(f){var P,L,O,z,V=0,R=0,U=[];v<t[0]?(P=0,L=0,V=(v-t[0])/(t[1]-t[0])):v>t[r-1]?(P=r-2,L=1,V=(v-t[r-1])/(t[r-1]-t[r-2])):L=C-(P=Math.max(0,Math.min(r-2,Math.floor(C)))),_<i[0]?(O=0,z=0,R=(_-i[0])/(i[1]-i[0])):_>i[n-1]?(O=n-2,z=1,R=(_-i[n-1])/(i[n-1]-i[n-2])):z=w-(O=Math.max(0,Math.min(n-2,Math.floor(w)))),V&&(l.dxydi(U,P,O,L,z),E[0]+=U[0]*V,E[1]+=U[1]*V),R&&(l.dxydj(U,P,O,L,z),E[0]+=U[0]*R,E[1]+=U[1]*R)}return E},l.c2p=function(v,_,f){return[_.c2p(v[0]),f.c2p(v[1])]},l.p2x=function(v,_,f){return[_.p2c(v[0]),f.p2c(v[1])]},l.dadi=function(v){var _=Math.max(0,Math.min(t.length-2,v));return t[_+1]-t[_]},l.dbdj=function(v){var _=Math.max(0,Math.min(i.length-2,v));return i[_+1]-i[_]},l.dxyda=function(v,_,f,C){var w=l.dxydi(null,v,_,f,C),E=l.dadi(v,f);return[w[0]/E,w[1]/E]},l.dxydb=function(v,_,f,C){var w=l.dxydj(null,v,_,f,C),E=l.dbdj(_,C);return[w[0]/E,w[1]/E]},l.dxyda_rough=function(v,_,f){var C=d*(f||.1),w=l.ab2xy(v+C,_,!0),E=l.ab2xy(v-C,_,!0);return[.5*(w[0]-E[0])/C,.5*(w[1]-E[1])/C]},l.dxydb_rough=function(v,_,f){var C=m*(f||.1),w=l.ab2xy(v,_+C,!0),E=l.ab2xy(v,_-C,!0);return[.5*(w[0]-E[0])/C,.5*(w[1]-E[1])/C]},l.dpdx=function(v){return v._m},l.dpdy=function(v){return v._m}}},51512:function(ie,F,e){"use strict";var S=e(3400);ie.exports=function(k,o,T){var b,p,l,t=[],i=[],r=k[0].length,n=k.length;var s,c,h,u,y,d,m,g,x,v,N,G,W,ae,re,f=0;for(b=0;b<r;b++)for(p=0;p<n;p++)void 0===k[p][b]&&(t.push(b),i.push(p),k[p][b]=(G=p,W=void 0,ae=void 0,re=void 0,ae=0,re=0,(N=b)>0&&void 0!==(W=k[G][N-1])&&(re++,ae+=W),N<r-1&&void 0!==(W=k[G][N+1])&&(re++,ae+=W),G>0&&void 0!==(W=k[G-1][N])&&(re++,ae+=W),G<n-1&&void 0!==(W=k[G+1][N])&&(re++,ae+=W),ae/Math.max(1,re))),f=Math.max(f,Math.abs(k[p][b]));if(!t.length)return k;var C=0,w=0,E=t.length;do{for(C=0,l=0;l<E;l++){p=i[l];var L,O,z,V,R,U=0,Z=0;0===(b=t[l])?(O=o[V=Math.min(r-1,2)],Z+=(L=k[p][1])+(L-k[p][V])*(o[0]-(z=o[1]))/(z-O),U++):b===r-1&&(O=o[V=Math.max(0,r-3)],Z+=(L=k[p][r-2])+(L-k[p][V])*(o[r-1]-(z=o[r-2]))/(z-O),U++),(0===b||b===r-1)&&p>0&&p<n-1&&(Z+=((c=T[p]-T[p-1])*k[p+1][b]+(s=T[p+1]-T[p])*k[p-1][b])/(c+s),U++),0===p?(O=T[R=Math.min(n-1,2)],Z+=(L=k[1][b])+(L-k[R][b])*(T[0]-(z=T[1]))/(z-O),U++):p===n-1&&(O=T[R=Math.max(0,n-3)],Z+=(L=k[n-2][b])+(L-k[R][b])*(T[n-1]-(z=T[n-2]))/(z-O),U++),(0===p||p===n-1)&&b>0&&b<r-1&&(Z+=((c=o[b]-o[b-1])*k[p][b+1]+(s=o[b+1]-o[b])*k[p][b-1])/(c+s),U++),U?Z/=U:(g=(y=T[p+1]-T[p])*(d=T[p]-T[p-1])*(y+d),Z=((m=(h=o[b+1]-o[b])*(u=o[b]-o[b-1])*(h+u))*(d*k[p+1][b]+y*k[p-1][b])+g*(u*k[p][b+1]+h*k[p][b-1]))/(g*(u+h)+m*(d+y))),C+=(v=(x=Z-k[p][b])/f)*v,k[p][b]+=x*(1+(U?0:.85))}C=Math.sqrt(C)}while(w++<100&&C>1e-5);return S.log("Smoother converged to",C,"after",w,"iterations"),k}},86411:function(ie,F,e){"use strict";var S=e(3400).isArray1D;ie.exports=function(k,o,T){var b=T("x"),p=b&&b.length,l=T("y"),t=l&&l.length;if(!p&&!t)return!1;if(o._cheater=!b,p&&!S(b)||t&&!S(l))o._length=null;else{var i=p?b.length:1/0;t&&(i=Math.min(i,l.length)),o.a&&o.a.length&&(i=Math.min(i,o.a.length)),o.b&&o.b.length&&(i=Math.min(i,o.b.length)),o._length=i}return!0}},83372:function(ie,F,e){"use strict";var S=e(21776).Ks,k=e(6096),o=e(49084),T=e(45464),b=e(22548).defaultLine,p=e(92880).extendFlat,l=k.marker.line;ie.exports=p({locations:{valType:"data_array",editType:"calc"},locationmode:k.locationmode,z:{valType:"data_array",editType:"calc"},geojson:p({},k.geojson,{}),featureidkey:k.featureidkey,text:p({},k.text,{}),hovertext:p({},k.hovertext,{}),marker:{line:{color:p({},l.color,{dflt:b}),width:p({},l.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:k.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:k.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:p({},T.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:S(),showlegend:p({},T.showlegend,{dflt:!1})},o("",{cLetter:"z",editTypeOverride:"calc"}))},7924:function(ie,F,e){"use strict";var S=e(38248),k=e(39032).BADNUM,o=e(47128),T=e(20148),b=e(4500);function p(l){return l&&"string"==typeof l}ie.exports=function(l,t){var i,r=t._length,n=new Array(r);i=t.geojson?function(u){return p(u)||S(u)}:p;for(var a=0;a<r;a++){var s=n[a]={},c=t.locations[a],h=t.z[a];i(c)&&S(h)?(s.loc=c,s.z=h):(s.loc=null,s.z=k),s.index=a}return T(n,t),o(l,t,{vals:t.z,containerStr:"",cLetter:"z"}),b(n,t),n}},30972:function(ie,F,e){"use strict";var S=e(3400),k=e(27260),o=e(83372);ie.exports=function(T,b,p,l){function t(s,c){return S.coerce(T,b,o,s,c)}var i=t("locations"),r=t("z");if(i&&i.length&&S.isArrayOrTypedArray(r)&&r.length){b._length=Math.min(i.length,r.length);var n,a=t("geojson");("string"==typeof a&&""!==a||S.isPlainObject(a))&&(n="geojson-id"),"geojson-id"===t("locationmode",n)&&t("featureidkey"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),k(T,b,l,t,{prefix:"",cLetter:"z"}),S.coerceSelectionMarkerOpacity(b,t)}else b.visible=!1}},52428:function(ie){"use strict";ie.exports=function(F,e,S,k,o){F.location=e.location,F.z=e.z;var T=k[o];return T.fIn&&T.fIn.properties&&(F.properties=T.fIn.properties),F.ct=T.ct,F}},69224:function(ie,F,e){"use strict";var S=e(54460),k=e(83372),o=e(3400).fillText;ie.exports=function(T,b,p){var l,t,i,r,n=T.cd,a=n[0].trace,s=T.subplot,c=[b,p],h=[b+360,p];for(t=0;t<n.length;t++)if(r=!1,(l=n[t])._polygons){for(i=0;i<l._polygons.length;i++)l._polygons[i].contains(c)&&(r=!r),l._polygons[i].contains(h)&&(r=!r);if(r)break}if(r&&l)return T.x0=T.x1=T.xa.c2p(l.ct),T.y0=T.y1=T.ya.c2p(l.ct),T.index=l.index,T.location=l.loc,T.z=l.z,T.zLabel=S.tickText(s.mockAxis,s.mockAxis.c2l(l.z),"hover").text,T.hovertemplate=l.hovertemplate,function(u,y,d){if(!y.hovertemplate){var m=d.hi||y.hoverinfo,g=String(d.loc),x="all"===m?k.hoverinfo.flags:m.split("+"),v=-1!==x.indexOf("name"),_=-1!==x.indexOf("location"),f=-1!==x.indexOf("z"),C=-1!==x.indexOf("text"),w=[];!v&&_?u.nameOverride=g:(v&&(u.nameOverride=y.name),_&&w.push(g)),f&&w.push(u.zLabel),C&&o(d,y,w),u.extraText=w.join("<br>")}}(T,a,l),[T]}},54272:function(ie,F,e){"use strict";ie.exports={attributes:e(83372),supplyDefaults:e(30972),colorbar:e(96288),calc:e(7924),calcGeoJSON:e(88364).calcGeoJSON,plot:e(88364).plot,style:e(7947).style,styleOnSelect:e(7947).styleOnSelect,hoverPoints:e(69224),eventData:e(52428),selectPoints:e(17328),moduleType:"trace",name:"choropleth",basePlotModule:e(10816),categories:["geo","noOpacity","showLegend"],meta:{}}},88364:function(ie,F,e){"use strict";var S=e(33428),k=e(3400),o=e(27144),T=e(59972).getTopojsonFeatures,b=e(19280).findExtremes,p=e(7947).style;ie.exports={calcGeoJSON:function(l,t){for(var i=l[0].trace,r=t[i.geo],n=r._subplot,a=i.locationmode,s=i._length,c="geojson-id"===a?o.extractTraceFeature(l):T(i,n.topojson),h=[],u=[],y=0;y<s;y++){var d=l[y],m="geojson-id"===a?d.fOut:o.locationToFeature(a,d.loc,c);if(m){d.geojson=m,d.ct=m.properties.ct,d._polygons=o.feature2polygons(m);var g=o.computeBbox(m);h.push(g[0],g[2]),u.push(g[1],g[3])}else d.geojson=null}if("geojson"===r.fitbounds&&"geojson-id"===a){var x=o.computeBbox(o.getTraceGeojson(i));h=[x[0],x[2]],u=[x[1],x[3]]}var v={padded:!0};i._extremes.lon=b(r.lonaxis._ax,h,v),i._extremes.lat=b(r.lataxis._ax,u,v)},plot:function(l,t,i){var r=t.layers.backplot.select(".choroplethlayer");k.makeTraceGroups(r,i,"trace choropleth").each(function(n){var a=S.select(this).selectAll("path.choroplethlocation").data(k.identity);a.enter().append("path").classed("choroplethlocation",!0),a.exit().remove(),p(l,n)})}}},17328:function(ie){"use strict";ie.exports=function(F,e){var S,k,o,T,b,p=F.cd,l=F.xaxis,t=F.yaxis,i=[];if(!1===e)for(S=0;S<p.length;S++)p[S].selected=0;else for(S=0;S<p.length;S++)(o=(k=p[S]).ct)&&(T=l.c2p(o),b=t.c2p(o),e.contains([T,b],null,S,F)?(i.push({pointNumber:S,lon:o[0],lat:o[1]}),k.selected=1):k.selected=0);return i}},7947:function(ie,F,e){"use strict";var S=e(33428),k=e(76308),o=e(43616),T=e(8932);function b(p,l){var t=l[0].trace,i=l[0].node3.selectAll(".choroplethlocation"),r=t.marker||{},n=r.line||{},a=T.makeColorScaleFuncFromTrace(t);i.each(function(s){S.select(this).attr("fill",a(s.z)).call(k.stroke,s.mlc||n.color).call(o.dashLine,"",s.mlw||n.width||0).style("opacity",r.opacity)}),o.selectedPointStyle(i,t)}ie.exports={style:function(p,l){l&&b(0,l)},styleOnSelect:function(p,l){var i=l[0].trace;i.selectedpoints?o.selectedPointStyle(l[0].node3.selectAll(".choroplethlocation"),i):b(0,l)}}},45608:function(ie,F,e){"use strict";var S=e(83372),k=e(49084),o=e(21776).Ks,T=e(45464),b=e(92880).extendFlat;ie.exports=b({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:b({},S.featureidkey,{}),below:{valType:"string",editType:"plot"},text:S.text,hovertext:S.hovertext,marker:{line:{color:b({},S.marker.line.color,{editType:"plot"}),width:b({},S.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:b({},S.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:b({},S.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:b({},S.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:S.hoverinfo,hovertemplate:o({},{keys:["properties"]}),showlegend:b({},T.showlegend,{dflt:!1})},k("",{cLetter:"z",editTypeOverride:"calc"}))},13504:function(ie,F,e){"use strict";var S=e(38248),k=e(3400),o=e(8932),T=e(43616),b=e(44808).makeBlank,p=e(27144);function l(t){var i,r=t[0].trace,n=r._opts;if(r.selectedpoints){for(var a=T.makeSelectedPointStyleFns(r),s=0;s<t.length;s++){var c=t[s];c.fOut&&(c.fOut.properties.mo2=a.selectedOpacityFn(c))}i={type:"identity",property:"mo2"}}else i=k.isArrayOrTypedArray(r.marker.opacity)?{type:"identity",property:"mo"}:r.marker.opacity;return k.extendFlat(n.fill.paint,{"fill-opacity":i}),k.extendFlat(n.line.paint,{"line-opacity":i}),n}ie.exports={convert:function(t){var i=t[0].trace,r=!0===i.visible&&0!==i._length,n={layout:{visibility:"none"},paint:{}},a={layout:{visibility:"none"},paint:{}},s=i._opts={fill:n,line:a,geojson:b()};if(!r)return s;var c=p.extractTraceFeature(t);if(!c)return s;var h,u,y,d=o.makeColorScaleFuncFromTrace(i),m=i.marker,g=m.line||{};k.isArrayOrTypedArray(m.opacity)&&(h=function(w){var E=w.mo;return S(E)?+k.constrain(E,0,1):0}),k.isArrayOrTypedArray(g.color)&&(u=function(w){return w.mlc}),k.isArrayOrTypedArray(g.width)&&(y=function(w){return w.mlw});for(var x=0;x<t.length;x++){var v=t[x],_=v.fOut;if(_){var f=_.properties;f.fc=d(v.z),h&&(f.mo=h(v)),u&&(f.mlc=u(v)),y&&(f.mlw=y(v)),v.ct=f.ct,v._polygons=p.feature2polygons(_)}}var C=h?{type:"identity",property:"mo"}:m.opacity;return k.extendFlat(n.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":C}),k.extendFlat(a.paint,{"line-color":u?{type:"identity",property:"mlc"}:g.color,"line-width":y?{type:"identity",property:"mlw"}:g.width,"line-opacity":C}),n.layout.visibility="visible",a.layout.visibility="visible",s.geojson={type:"FeatureCollection",features:c},l(t),s},convertOnSelect:l}},9352:function(ie,F,e){"use strict";var S=e(3400),k=e(27260),o=e(45608);ie.exports=function(T,b,p,l){function t(a,s){return S.coerce(T,b,o,a,s)}var i=t("locations"),r=t("z"),n=t("geojson");S.isArrayOrTypedArray(i)&&i.length&&S.isArrayOrTypedArray(r)&&r.length&&("string"==typeof n&&""!==n||S.isPlainObject(n))?(t("featureidkey"),b._length=Math.min(i.length,r.length),t("below"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),k(T,b,l,t,{prefix:"",cLetter:"z"}),S.coerceSelectionMarkerOpacity(b,t)):b.visible=!1}},85404:function(ie,F,e){"use strict";ie.exports={attributes:e(45608),supplyDefaults:e(9352),colorbar:e(96288),calc:e(7924),plot:e(61288),hoverPoints:e(69224),eventData:e(52428),selectPoints:e(17328),styleOnSelect:function(S,k){k&&k[0].trace._glTrace.updateOnSelect(k)},getBelow:function(S,k){for(var o=k.getMapLayers(),T=o.length-2;T>=0;T--){var b=o[T].id;if("string"==typeof b&&0===b.indexOf("water"))for(var p=T+1;p<o.length;p++)if("string"==typeof(b=o[p].id)&&-1===b.indexOf("plotly-"))return b}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:e(33688),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},61288:function(ie,F,e){"use strict";var S=e(13504).convert,k=e(13504).convertOnSelect,o=e(47552).traceLayerPrefix;function T(p,l){this.type="choroplethmapbox",this.subplot=p,this.uid=l,this.sourceId="source-"+l,this.layerList=[["fill",o+l+"-fill"],["line",o+l+"-line"]],this.below=null}var b=T.prototype;b.update=function(p){this._update(S(p)),p[0].trace._glTrace=this},b.updateOnSelect=function(p){this._update(k(p))},b._update=function(p){var l=this.subplot,t=this.layerList,i=l.belowLookup["trace-"+this.uid];l.map.getSource(this.sourceId).setData(p.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(p,i),this.below=i);for(var r=0;r<t.length;r++){var n=t[r],s=n[1],c=p[n[0]];l.setOptions(s,"setLayoutProperty",c.layout),"visible"===c.layout.visibility&&l.setOptions(s,"setPaintProperty",c.paint)}},b._addLayers=function(p,l){for(var t=this.subplot,i=this.layerList,r=this.sourceId,n=0;n<i.length;n++){var a=i[n],s=a[0],c=p[s];t.addLayer({type:s,id:a[1],source:r,layout:c.layout,paint:c.paint},l)}},b._removeLayers=function(){for(var p=this.subplot.map,l=this.layerList,t=l.length-1;t>=0;t--)p.removeLayer(l[t][1])},b.dispose=function(){var p=this.subplot.map;this._removeLayers(),p.removeSource(this.sourceId)},ie.exports=function(p,l){var t=l[0].trace,i=new T(p,t.uid),r=i.sourceId,n=S(l),a=i.below=p.belowLookup["trace-"+t.uid];return p.map.addSource(r,{type:"geojson",data:n.geojson}),i._addLayers(n,a),l[0].trace._glTrace=i,i}},86040:function(ie,F,e){"use strict";var S=e(49084),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(52948),b=e(45464),p=e(92880).extendFlat,l={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute","raw"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:o({editType:"calc"},{keys:["norm"]}),uhoverformat:k("u",1),vhoverformat:k("v",1),whoverformat:k("w",1),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),showlegend:p({},b.showlegend,{dflt:!1})};p(l,S("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){l[t]=T[t]}),l.hoverinfo=p({},b.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),l.transforms=void 0,ie.exports=l},83344:function(ie,F,e){"use strict";var S=e(47128);ie.exports=function(k,o){for(var T=o.u,b=o.v,p=o.w,l=Math.min(o.x.length,o.y.length,o.z.length,T.length,b.length,p.length),t=-1/0,i=1/0,r=0;r<l;r++){var n=T[r],a=b[r],s=p[r],c=Math.sqrt(n*n+a*a+s*s);t=Math.max(t,c),i=Math.min(i,c)}o._len=l,o._normMax=t,S(k,o,{vals:[i,t],containerStr:"",cLetter:"c"})}},6648:function(ie,F,e){"use strict";var S=e(67792).gl_cone3d,k=e(67792).gl_cone3d.createConeMesh,o=e(3400).simpleMap,T=e(33040).parseColorScale,b=e(8932).extractOpts,p=e(3400).isArrayOrTypedArray,l=e(52094);function t(c,h){this.scene=c,this.uid=h,this.mesh=null,this.data=null}var i=t.prototype;i.handlePick=function(c){if(c.object===this.mesh){var h=c.index=c.data.index,m=this.data.u[h],g=this.data.v[h],x=this.data.w[h];c.traceCoordinate=[this.data.x[h],this.data.y[h],this.data.z[h],m,g,x,Math.sqrt(m*m+g*g+x*x)];var v=this.data.hovertext||this.data.text;return p(v)&&void 0!==v[h]?c.textLabel=v[h]:v&&(c.textLabel=v),!0}};var r={xaxis:0,yaxis:1,zaxis:2},n={tip:1,tail:0,cm:.25,center:.5},a={tip:1,tail:1,cm:.75,center:.5};function s(c,h){var u=c.fullSceneLayout,y=c.dataScale,d={};function m(f,C){var w=u[C],E=y[r[C]];return o(f,function(P){return w.d2l(P)*E})}d.vectors=l(m(h.u,"xaxis"),m(h.v,"yaxis"),m(h.w,"zaxis"),h._len),d.positions=l(m(h.x,"xaxis"),m(h.y,"yaxis"),m(h.z,"zaxis"),h._len);var g=b(h);d.colormap=T(h),d.vertexIntensityBounds=[g.min/h._normMax,g.max/h._normMax],d.coneOffset=n[h.anchor];var x=h.sizemode;"scaled"===x?d.coneSize=h.sizeref||.5:"absolute"===x?d.coneSize=h.sizeref&&h._normMax?h.sizeref/h._normMax:.5:"raw"===x&&(d.coneSize=h.sizeref),d.coneSizemode=x;var v=S(d),_=h.lightposition;return v.lightPosition=[_.x,_.y,_.z],v.ambient=h.lighting.ambient,v.diffuse=h.lighting.diffuse,v.specular=h.lighting.specular,v.roughness=h.lighting.roughness,v.fresnel=h.lighting.fresnel,v.opacity=h.opacity,h._pad=a[h.anchor]*v.vectorScale*v.coneScale*h._normMax,v}i.update=function(c){this.data=c;var h=s(this.scene,c);this.mesh.update(h)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ie.exports=function(c,h){var u=c.glplot.gl,y=s(c,h),d=k(u,y),m=new t(c,h.uid);return m.mesh=d,m.data=h,d._trace=m,c.glplot.add(d),m}},86096:function(ie,F,e){"use strict";var S=e(3400),k=e(27260),o=e(86040);ie.exports=function(T,b,p,l){function t(u,y){return S.coerce(T,b,o,u,y)}var i=t("u"),r=t("v"),n=t("w"),a=t("x"),s=t("y"),c=t("z");if(i&&i.length&&r&&r.length&&n&&n.length&&a&&a.length&&s&&s.length&&c&&c.length){var h=t("sizemode");t("sizeref","raw"===h?1:.5),t("anchor"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),k(T,b,l,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),b._length=null}else b.visible=!1}},26048:function(ie,F,e){"use strict";ie.exports={moduleType:"trace",name:"cone",basePlotModule:e(12536),categories:["gl3d","showLegend"],attributes:e(86040),supplyDefaults:e(86096),colorbar:{min:"cmin",max:"cmax"},calc:e(83344),plot:e(6648),eventData:function(S,k){return S.norm=k.traceCoordinate[6],S},meta:{}}},67104:function(ie,F,e){"use strict";var S=e(83328),k=e(52904),o=e(29736),T=o.axisHoverFormat,b=o.descriptionOnlyNumbers,p=e(49084),l=e(98192).u,t=e(25376),i=e(92880).extendFlat,r=e(69104),n=r.COMPARISON_OPS2,a=r.INTERVAL_OPS,s=k.line;ie.exports=i({z:S.z,x:S.x,x0:S.x0,dx:S.dx,y:S.y,y0:S.y0,dy:S.dy,xperiod:S.xperiod,yperiod:S.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:S.xperiodalignment,yperiodalignment:S.yperiodalignment,text:S.text,hovertext:S.hovertext,transpose:S.transpose,xtype:S.xtype,ytype:S.ytype,xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:S.hovertemplate,texttemplate:i({},S.texttemplate,{}),textfont:i({},S.textfont,{}),hoverongaps:S.hoverongaps,connectgaps:i({},S.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:t({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:b("contour label")},operation:{valType:"enumerated",values:[].concat(n).concat(a),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:i({},s.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:l,smoothing:i({},s.smoothing,{}),editType:"plot"},zorder:k.zorder},p("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},20688:function(ie,F,e){"use strict";var S=e(8932),k=e(19512),o=e(54444),T=e(46960);ie.exports=function(b,p){var l=k(b,p),t=l[0].z;o(p,t);var i,r=p.contours,n=S.extractOpts(p);if("heatmap"===r.coloring&&n.auto&&!1===p.autocontour){var a=r.start,s=T(r),c=r.size||1,h=Math.floor((s-a)/c)+1;isFinite(c)||(c=1,h=1);var u=a-c/2;i=[u,u+h*c]}else i=t;return S.calc(b,p,{vals:i,cLetter:"z"}),l}},56008:function(ie){"use strict";ie.exports=function(F,e){var S,k=F[0],o=k.z;switch(e.type){case"levels":var T=Math.min(o[0][0],o[0][1]);for(S=0;S<F.length;S++){var b=F[S];b.prefixBoundary=!b.edgepaths.length&&(T>b.level||b.starts.length&&T===b.level)}break;case"constraint":if(k.prefixBoundary=!1,k.edgepaths.length)return;var p=k.x.length,l=k.y.length,t=-1/0,i=1/0;for(S=0;S<l;S++)i=Math.min(i,o[S][0]),i=Math.min(i,o[S][p-1]),t=Math.max(t,o[S][0]),t=Math.max(t,o[S][p-1]);for(S=1;S<p-1;S++)i=Math.min(i,o[0][S]),i=Math.min(i,o[l-1][S]),t=Math.max(t,o[0][S]),t=Math.max(t,o[l-1][S]);var r,n,a=e.value;switch(e._operation){case">":a>t&&(k.prefixBoundary=!0);break;case"<":(a<i||k.starts.length&&a===i)&&(k.prefixBoundary=!0);break;case"[]":r=Math.min(a[0],a[1]),((n=Math.max(a[0],a[1]))<i||r>t||k.starts.length&&n===i)&&(k.prefixBoundary=!0);break;case"][":r=Math.min(a[0],a[1]),n=Math.max(a[0],a[1]),r<i&&n>t&&(k.prefixBoundary=!0)}}}},55296:function(ie,F,e){"use strict";var S=e(8932),k=e(41076),o=e(46960);ie.exports={min:"zmin",max:"zmax",calc:function(T,b,p){var l=b.contours,t=b.line,i=l.size||1,r=l.coloring,n=k(b,{isColorbar:!0});if("heatmap"===r){var a=S.extractOpts(b);p._fillgradient=a.reversescale?S.flipScale(a.colorscale):a.colorscale,p._zrange=[a.min,a.max]}else"fill"===r&&(p._fillcolor=n);p._line={color:"lines"===r?n:t.color,width:!1!==l.showlines?t.width:0,dash:t.dash},p._levels={start:l.start,end:o(l),size:i}}}},93252:function(ie){"use strict";ie.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},95536:function(ie,F,e){"use strict";var S=e(38248),k=e(17428),o=e(76308),T=o.addOpacity,b=o.opacity,p=e(69104),l=e(3400).isArrayOrTypedArray,t=p.CONSTRAINT_REDUCTION,i=p.COMPARISON_OPS2;ie.exports=function(r,n,a,s,c,h){var u,y,d,x,v,_,m=n.contours,g=a("contours.operation");m._operation=t[g],x=a,-1===i.indexOf((v=m).operation)?(x("contours.value",[0,1]),l(v.value)?v.value.length>2?v.value=v.value.slice(2):0===v.length?v.value=[0,1]:v.length<2?(_=parseFloat(v.value[0]),v.value=[_,_+1]):v.value=[parseFloat(v.value[0]),parseFloat(v.value[1])]:S(v.value)&&(_=parseFloat(v.value),v.value=[_,_+1])):(x("contours.value",0),S(v.value)||(v.value=l(v.value)?parseFloat(v.value[0]):0)),"="===g?u=m.showlines=!0:(u=a("contours.showlines"),d=a("fillcolor",T((r.line||{}).color||c,.5))),u&&(y=a("line.color",d&&b(d)?T(n.fillcolor,1):c),a("line.width",2),a("line.dash")),a("line.smoothing"),k(a,s,y,h)}},3212:function(ie,F,e){"use strict";var S=e(69104),k=e(38248);function o(p,l){var t,i=Array.isArray(l);function r(n){return k(n)?+n:null}return-1!==S.COMPARISON_OPS2.indexOf(p)?t=r(i?l[0]:l):-1!==S.INTERVAL_OPS.indexOf(p)?t=i?[r(l[0]),r(l[1])]:[r(l),r(l)]:-1!==S.SET_OPS.indexOf(p)&&(t=i?l.map(r):[r(l)]),t}function T(p){return function(l){l=o(p,l);var t=Math.min(l[0],l[1]),i=Math.max(l[0],l[1]);return{start:t,end:i,size:i-t}}}function b(p){return function(l){return{start:l=o(p,l),end:1/0,size:1/0}}}ie.exports={"[]":T("[]"),"][":T("]["),">":b(">"),"<":b("<"),"=":b("=")}},84952:function(ie){"use strict";ie.exports=function(F,e,S,k){var o=k("contours.start"),T=k("contours.end"),b=!1===o||!1===T,p=S("contours.size");!(b?e.autocontour=!0:S("autocontour",!1))&&p||S("ncontours")}},82172:function(ie,F,e){"use strict";var S=e(3400);function k(o){return S.extendFlat({},o,{edgepaths:S.extendDeep([],o.edgepaths),paths:S.extendDeep([],o.paths),starts:S.extendDeep([],o.starts)})}ie.exports=function(o,T){var b,p,l,t=function(n){return n.reverse()},i=function(n){return n};switch(T){case"=":case"<":return o;case">":for(1!==o.length&&S.warn("Contour data invalid for the specified inequality operation."),p=o[0],b=0;b<p.edgepaths.length;b++)p.edgepaths[b]=t(p.edgepaths[b]);for(b=0;b<p.paths.length;b++)p.paths[b]=t(p.paths[b]);for(b=0;b<p.starts.length;b++)p.starts[b]=t(p.starts[b]);return o;case"][":var r=t;t=i,i=r;case"[]":for(2!==o.length&&S.warn("Contour data invalid for the specified inequality range operation."),p=k(o[0]),l=k(o[1]),b=0;b<p.edgepaths.length;b++)p.edgepaths[b]=t(p.edgepaths[b]);for(b=0;b<p.paths.length;b++)p.paths[b]=t(p.paths[b]);for(b=0;b<p.starts.length;b++)p.starts[b]=t(p.starts[b]);for(;l.edgepaths.length;)p.edgepaths.push(i(l.edgepaths.shift()));for(;l.paths.length;)p.paths.push(i(l.paths.shift()));for(;l.starts.length;)p.starts.push(i(l.starts.shift()));return[p]}}},57004:function(ie,F,e){"use strict";var S=e(3400),k=e(51264),o=e(31147),T=e(95536),b=e(84952),p=e(97680),l=e(39096),t=e(67104);ie.exports=function(i,r,n,a){function s(h,u){return S.coerce(i,r,t,h,u)}if(k(i,r,s,a)){o(i,r,a,s),s("xhoverformat"),s("yhoverformat"),s("text"),s("hovertext"),s("hoverongaps"),s("hovertemplate");var c="constraint"===s("contours.type");s("connectgaps",S.isArray1D(r.z)),c?T(i,r,s,a,n):(b(i,r,s,function(h){return S.coerce2(i,r,t,h)}),p(i,r,s,a)),r.contours&&"heatmap"===r.contours.coloring&&l(s,a),s("zorder")}else r.visible=!1}},61512:function(ie,F,e){"use strict";var S=e(3400),k=e(3212),o=e(46960);ie.exports=function(T,b,p){for(var l="constraint"===T.type?k[T._operation](T.value):T,t=l.size,i=[],r=o(l),n=p.trace._carpetTrace,a=n?{xaxis:n.aaxis,yaxis:n.baxis,x:p.a,y:p.b}:{xaxis:b.xaxis,yaxis:b.yaxis,x:p.x,y:p.y},s=l.start;s<r;s+=t)if(i.push(S.extendFlat({level:s,crossings:{},starts:[],edgepaths:[],paths:[],z:p.z,smoothing:p.trace.line.smoothing},a)),i.length>1e3){S.warn("Too many contours, clipping at 1000",T);break}return i}},46960:function(ie){"use strict";ie.exports=function(F){return F.end+F.size/1e6}},88748:function(ie,F,e){"use strict";var S=e(3400),k=e(93252);function o(p,l,t,i){return Math.abs(p[0]-l[0])<t&&Math.abs(p[1]-l[1])<i}function T(p,l,t,i,r){var n,oe,ue,ge,we,a=l.join(","),s=p.crossings[a],c=(ue=l,ge=0,we=0,(oe=s)>20&&t?208===oe||1114===oe?ge=0===ue[0]?1:-1:we=0===ue[1]?1:-1:-1!==k.BOTTOMSTART.indexOf(oe)?we=1:-1!==k.LEFTSTART.indexOf(oe)?ge=1:-1!==k.TOPSTART.indexOf(oe)?we=-1:ge=-1,[ge,we]),h=[b(p,l,[-c[0],-c[1]])],u=p.z.length,y=p.z[0].length,d=l.slice(),m=c.slice();for(n=0;n<1e4;n++){if(s>20?p.crossings[a]=k.SADDLEREMAINDER[s=k.CHOOSESADDLE[s][(c[0]||c[1])<0?0:1]]:delete p.crossings[a],!(c=k.NEWDELTA[s])){S.log("Found bad marching index:",s,l,p.level);break}if(h.push(b(p,l,c)),l[0]+=c[0],l[1]+=c[1],a=l.join(","),o(h[h.length-1],h[h.length-2],i,r)&&h.pop(),l[0]===d[0]&&l[1]===d[1]&&c[0]===m[0]&&c[1]===m[1]||t&&(c[0]&&(l[0]<0||l[0]>y-2)||c[1]&&(l[1]<0||l[1]>u-2)))break;s=p.crossings[a]}1e4===n&&S.log("Infinite loop in contour?");var x,v,_,f,C,w,E,P,L,O,z,V,R,U,Z,N=o(h[0],h[h.length-1],i,r),G=0,W=.2*p.smoothing,ae=[],re=0;for(n=1;n<h.length;n++)U=(V=h[n])[2]-(R=h[n-1])[2],Z=V[3]-R[3],G+=E=Math.sqrt(U*U+Z*Z),ae.push(E);var ne=G/ae.length*W;function Q(oe){return h[oe%h.length]}for(n=h.length-2;n>=re;n--)if((x=ae[n])<ne){for(_=0,v=n-1;v>=re&&x+ae[v]<ne;v--)x+=ae[v];if(N&&n===h.length-2)for(_=0;_<v&&x+ae[_]<ne;_++)x+=ae[_];C=n-v+_+1,w=Math.floor((n+v+_+2)/2),f=N||n!==h.length-2?N||-1!==v?C%2?Q(w):[(Q(w)[0]+Q(w+1)[0])/2,(Q(w)[1]+Q(w+1)[1])/2]:h[0]:h[h.length-1],h.splice(v+1,n-v+1,f),n=v+1,_&&(re=_),N&&(n===h.length-2?h[_]=h[h.length-1]:0===n&&(h[h.length-1]=h[0]))}for(h.splice(0,re),n=0;n<h.length;n++)h[n].length=2;if(!(h.length<2))if(N)h.pop(),p.paths.push(h);else{t||S.log("Unclosed interior contour?",p.level,d.join(","),h.join("L"));var $=!1;for(P=0;P<p.edgepaths.length;P++)if(O=p.edgepaths[P],!$&&o(O[0],h[h.length-1],i,r)){h.pop(),$=!0;var X=!1;for(L=0;L<p.edgepaths.length;L++)if(o((z=p.edgepaths[L])[z.length-1],h[0],i,r)){X=!0,h.shift(),p.edgepaths.splice(P,1),L===P?p.paths.push(h.concat(z)):(L>P&&L--,p.edgepaths[L]=z.concat(h,O));break}X||(p.edgepaths[P]=h.concat(O))}for(P=0;P<p.edgepaths.length&&!$;P++)o((O=p.edgepaths[P])[O.length-1],h[0],i,r)&&(h.shift(),p.edgepaths[P]=O.concat(h),$=!0);$||p.edgepaths.push(h)}}function b(p,l,t){var i=l[0]+Math.max(t[0],0),r=l[1]+Math.max(t[1],0),n=p.z[r][i],a=p.xaxis,s=p.yaxis;if(t[1]){var c=(p.level-n)/(p.z[r][i+1]-n),h=(1!==c?(1-c)*a.c2l(p.x[i]):0)+(0!==c?c*a.c2l(p.x[i+1]):0);return[a.c2p(a.l2c(h),!0),s.c2p(p.y[r],!0),i+c,r]}var u=(p.level-n)/(p.z[r+1][i]-n),y=(1!==u?(1-u)*s.c2l(p.y[r]):0)+(0!==u?u*s.c2l(p.y[r+1]):0);return[a.c2p(p.x[i],!0),s.c2p(s.l2c(y),!0),i,r+u]}ie.exports=function(p,l,t){var i,r,n,a;for(l=l||.01,t=t||.01,r=0;r<p.length;r++){for(n=p[r],a=0;a<n.starts.length;a++)T(n,n.starts[a],"edge",l,t);for(i=0;Object.keys(n.crossings).length&&i<1e4;)i++,T(n,Object.keys(n.crossings)[0].split(",").map(Number),void 0,l,t);1e4===i&&S.log("Infinite loop in contour?")}}},38200:function(ie,F,e){"use strict";var S=e(76308),k=e(55512);ie.exports=function(o,T,b,p,l){l||(l={}),l.isContour=!0;var t=k(o,T,b,p,l);return t&&t.forEach(function(i){var r=i.trace;"constraint"===r.contours.type&&(r.fillcolor&&S.opacity(r.fillcolor)?i.color=S.addOpacity(r.fillcolor,1):r.contours.showlines&&S.opacity(r.line.color)&&(i.color=S.addOpacity(r.line.color,1)))}),t}},66240:function(ie,F,e){"use strict";ie.exports={attributes:e(67104),supplyDefaults:e(57004),calc:e(20688),plot:e(23676).plot,style:e(52440),colorbar:e(55296),hoverPoints:e(38200),moduleType:"trace",name:"contour",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},17428:function(ie,F,e){"use strict";var S=e(3400);ie.exports=function(k,o,T,b){b||(b={}),k("contours.showlabels")&&(S.coerceFont(k,"contours.labelfont",o.font,{overrideDflt:{color:T}}),k("contours.labelformat")),!1!==b.hasHover&&k("zhoverformat")}},41076:function(ie,F,e){"use strict";var S=e(33428),k=e(8932),o=e(46960);ie.exports=function(T){var b=T.contours,p=b.start,l=o(b),t=b.size||1,i=Math.floor((l-p)/t)+1,r="lines"===b.coloring?0:1,n=k.extractOpts(T);isFinite(t)||(t=1,i=1);var a,s,c=n.reversescale?k.flipScale(n.colorscale):n.colorscale,h=c.length,u=new Array(h),y=new Array(h),d=n.min,m=n.max;if("heatmap"===b.coloring){for(s=0;s<h;s++)u[s]=(a=c[s])[0]*(m-d)+d,y[s]=a[1];var g=S.extent([d,m,b.start,b.start+t*(i-1)]),x=g[d<m?0:1],v=g[d<m?1:0];x!==d&&(u.splice(0,0,x),y.splice(0,0,y[0])),v!==m&&(u.push(v),y.push(y[y.length-1]))}else{var _=T._input&&"number"==typeof T._input.zmin&&"number"==typeof T._input.zmax;for(_&&(p<=d||l>=m)&&(p<=d&&(p=d),l>=m&&(l=m),i=Math.floor((l-p)/t)+1,r=0),s=0;s<h;s++)u[s]=((a=c[s])[0]*(i+r-1)-r/2)*t+p,y[s]=a[1];(_||T.autocontour)&&(u[0]>d&&(u.unshift(d),y.unshift(y[0])),u[u.length-1]<m&&(u.push(m),y.push(y[y.length-1])))}return k.makeColorScaleFunc({domain:u,range:y},{noNumericCheck:!0})}},72424:function(ie,F,e){"use strict";var S=e(93252);function k(o,T){var b=(T[0][0]>o?0:1)+(T[0][1]>o?0:2)+(T[1][1]>o?0:4)+(T[1][0]>o?0:8);return 5===b||10===b?o>(T[0][0]+T[0][1]+T[1][0]+T[1][1])/4?5===b?713:1114:5===b?104:208:15===b?0:b}ie.exports=function(o){var T,b,p,l,t,i,r,n,a,s=o[0].z,c=s.length,h=s[0].length,u=2===c||2===h;for(b=0;b<c-1;b++)for(l=[],0===b&&(l=l.concat(S.BOTTOMSTART)),b===c-2&&(l=l.concat(S.TOPSTART)),T=0;T<h-1;T++)for(p=l.slice(),0===T&&(p=p.concat(S.LEFTSTART)),T===h-2&&(p=p.concat(S.RIGHTSTART)),t=T+","+b,i=[[s[b][T],s[b][T+1]],[s[b+1][T],s[b+1][T+1]]],a=0;a<o.length;a++)(r=k((n=o[a]).level,i))&&(n.crossings[t]=r,-1!==p.indexOf(r)&&(n.starts.push([T,b]),u&&-1!==p.indexOf(r,p.indexOf(r)+1)&&n.starts.push([T,b])))}},23676:function(ie,F,e){"use strict";var S=e(33428),k=e(3400),o=e(43616),T=e(8932),b=e(72736),p=e(54460),l=e(78344),t=e(41420),i=e(72424),r=e(88748),n=e(61512),a=e(82172),s=e(56008),c=e(93252),h=c.LABELOPTIMIZER;function u(m,g){var x,v,_,f,C,w,P="",L=0,O=m.edgepaths.map(function(N,G){return G}),z=!0;function V(N){return Math.abs(N[1]-g[2][1])<.01}function U(N){return Math.abs(N[0]-g[2][0])<.01}for(;O.length;){for(w=o.smoothopen(m.edgepaths[L],m.smoothing),P+=z?w:w.replace(/^M/,"L"),O.splice(O.indexOf(L),1),x=m.edgepaths[L][m.edgepaths[L].length-1],f=-1,_=0;_<4;_++){if(!x){k.log("Missing end?",L,m);break}for(Math.abs(x[1]-g[0][1])<.01&&!U(x)?v=g[1]:Math.abs(x[0]-g[0][0])<.01?v=g[0]:V(x)?v=g[3]:U(x)&&(v=g[2]),C=0;C<m.edgepaths.length;C++){var Z=m.edgepaths[C][0];Math.abs(x[0]-v[0])<.01?Math.abs(x[0]-Z[0])<.01&&(Z[1]-x[1])*(v[1]-Z[1])>=0&&(v=Z,f=C):Math.abs(x[1]-v[1])<.01?Math.abs(x[1]-Z[1])<.01&&(Z[0]-x[0])*(v[0]-Z[0])>=0&&(v=Z,f=C):k.log("endpt to newendpt is not vert. or horz.",x,v,Z)}if(x=v,f>=0)break;P+="L"+v}if(f===m.edgepaths.length){k.log("unclosed perimeter path");break}(z=-1===O.indexOf(L=f))&&(L=O[0],P+="Z")}for(L=0;L<m.paths.length;L++)P+=o.smoothclosed(m.paths[L],m.smoothing);return P}function y(m,g,x,v){var _=g.width/2,f=g.height/2,C=m.x,w=m.y,E=m.theta,P=Math.cos(E)*_,L=Math.sin(E)*_,O=(C>v.center?v.right-C:C-v.left)/(P+Math.abs(Math.sin(E)*f)),z=(w>v.middle?v.bottom-w:w-v.top)/(Math.abs(L)+Math.cos(E)*f);if(O<1||z<1)return 1/0;var V=h.EDGECOST*(1/(O-1)+1/(z-1));V+=h.ANGLECOST*E*E;for(var R=C-P,U=w-L,Z=C+P,N=w+L,G=0;G<x.length;G++){var W=x[G],ae=Math.cos(W.theta)*W.width/2,re=Math.sin(W.theta)*W.width/2,ne=2*k.segmentDistance(R,U,Z,N,W.x-ae,W.y-re,W.x+ae,W.y+re)/(g.height+W.height),Q=W.level===g.level,$=Q?h.SAMELEVELDISTANCE:1;if(ne<=$)return 1/0;V+=h.NEIGHBORCOST*(Q?h.SAMELEVELFACTOR:1)/(ne-$)}return V}function d(m){var g,x,v=m.trace._emptypoints,_=[],f=m.z.length,C=m.z[0].length,w=[];for(g=0;g<C;g++)w.push(1);for(g=0;g<f;g++)_.push(w.slice());for(g=0;g<v.length;g++)_[(x=v[g])[0]][x[1]]=0;return m.zmask=_,_}F.plot=function(m,g,x,v){var _=g.xaxis,f=g.yaxis;k.makeTraceGroups(v,x,"contour").each(function(C){var w=S.select(this),E=C[0],L=E.x,O=E.y,z=E.trace.contours,V=n(z,g,E),R=k.ensureSingle(w,"g","heatmapcoloring"),U=[];"heatmap"===z.coloring&&(U=[C]),t(m,g,U,R),i(V),r(V);var Q,$,X,Z=_.c2p(L[0],!0),N=_.c2p(L[L.length-1],!0),G=f.c2p(O[0],!0),W=f.c2p(O[O.length-1],!0),ae=[[Z,W],[N,W],[N,G],[Z,G]],re=V;"constraint"===z.type&&(re=a(V,z._operation)),Q=ae,$=z,(X=k.ensureSingle(w,"g","contourbg").selectAll("path").data("fill"===$.coloring?[0]:[])).enter().append("path"),X.exit().remove(),X.attr("d","M"+Q.join("L")+"Z").style("stroke","none"),function(ne,Q,$,X){var oe="fill"===X.coloring||"constraint"===X.type&&"="!==X._operation,fe="M"+$.join("L")+"Z";oe&&s(Q,X);var ue=k.ensureSingle(ne,"g","contourfill").selectAll("path").data(oe?Q:[]);ue.enter().append("path"),ue.exit().remove(),ue.each(function(ge){var we=(ge.prefixBoundary?fe:"")+u(ge,$);we?S.select(this).attr("d",we).style("stroke","none"):S.select(this).remove()})}(w,re,ae,z),function(ne,Q,$,X,oe){var fe=$._context.staticPlot,ue=k.ensureSingle(ne,"g","contourlines"),ge=!1!==oe.showlines,we=oe.showlabels,Te=ge&&we,xe=F.createLines(ue,ge||we,Q,fe),ye=F.createLineClip(ue,Te,$,X.trace.uid),_e=ne.selectAll("g.contourlabels").data(we?[0]:[]);if(_e.exit().remove(),_e.enter().append("g").classed("contourlabels",!0),we){var Ie=[],De=[];k.clearLocationCache();var be=F.labelFormatter($,X),he=o.tester.append("text").attr("data-notex",1).call(o.font,oe.labelfont),ce=Q[0].xaxis,me=Q[0].yaxis,Pe=ce._length,Ae=me._length,Ce=ce.range,Oe=me.range,Ne=k.aggNums(Math.min,null,X.x),je=k.aggNums(Math.max,null,X.x),ve=k.aggNums(Math.min,null,X.y),Me=k.aggNums(Math.max,null,X.y),Le=Math.max(ce.c2p(Ne,!0),0),Ue=Math.min(ce.c2p(je,!0),Pe),ze=Math.max(me.c2p(Me,!0),0),qe=Math.min(me.c2p(ve,!0),Ae),Ke={};Ce[0]<Ce[1]?(Ke.left=Le,Ke.right=Ue):(Ke.left=Ue,Ke.right=Le),Oe[0]<Oe[1]?(Ke.top=ze,Ke.bottom=qe):(Ke.top=qe,Ke.bottom=ze),Ke.middle=(Ke.top+Ke.bottom)/2,Ke.center=(Ke.left+Ke.right)/2,Ie.push([[Ke.left,Ke.top],[Ke.right,Ke.top],[Ke.right,Ke.bottom],[Ke.left,Ke.bottom]]);var it=Math.sqrt(Pe*Pe+Ae*Ae),ft=c.LABELDISTANCE*it/Math.max(1,Q.length/c.LABELINCREASE);xe.each(function(dt){var kt=F.calcTextOpts(dt.level,be,he,$);S.select(this).selectAll("path").each(function(){var St=k.getVisibleSegment(this,Ke,kt.height/2);if(St&&!(St.len<(kt.width+kt.height)*c.LABELMIN))for(var Tt=Math.min(Math.ceil(St.len/ft),c.LABELMAX),lt=0;lt<Tt;lt++){var ot=F.findBestTextLocation(this,St,kt,De,Ke);if(!ot)break;F.addLabelData(ot,kt,De,Ie)}})}),he.remove(),F.drawLabels(_e,De,$,ye,Te?Ie:null)}we&&!ge&&xe.remove()}(w,V,m,E,z),function(ne,Q,$,X,oe){var fe=X.trace,ge="clip"+fe.uid,we=$._fullLayout._clips.selectAll("#"+ge).data(fe.connectgaps?[]:[0]);if(we.enter().append("clipPath").classed("contourclip",!0).attr("id",ge),we.exit().remove(),!1===fe.connectgaps){var Te={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:Q.xaxis,yaxis:Q.yaxis,x:X.x,y:X.y,z:d(X),smoothing:0};i([Te]),r([Te]),s([Te],{type:"levels"}),k.ensureSingle(we,"path","").attr("d",(Te.prefixBoundary?"M"+oe.join("L")+"Z":"")+u(Te,oe))}else ge=null;o.setClipUrl(ne,ge,$)}(w,g,m,E,ae)})},F.createLines=function(m,g,x,v){var _=x[0].smoothing,f=m.selectAll("g.contourlevel").data(g?x:[]);if(f.exit().remove(),f.enter().append("g").classed("contourlevel",!0),g){var C=f.selectAll("path.openline").data(function(E){return E.pedgepaths||E.edgepaths});C.exit().remove(),C.enter().append("path").classed("openline",!0),C.attr("d",function(E){return o.smoothopen(E,_)}).style("stroke-miterlimit",1).style("vector-effect",v?"none":"non-scaling-stroke");var w=f.selectAll("path.closedline").data(function(E){return E.ppaths||E.paths});w.exit().remove(),w.enter().append("path").classed("closedline",!0),w.attr("d",function(E){return o.smoothclosed(E,_)}).style("stroke-miterlimit",1).style("vector-effect",v?"none":"non-scaling-stroke")}return f},F.createLineClip=function(m,g,x,v){var _=g?"clipline"+v:null,f=x._fullLayout._clips.selectAll("#"+_).data(g?[0]:[]);return f.exit().remove(),f.enter().append("clipPath").classed("contourlineclip",!0).attr("id",_),o.setClipUrl(m,_,x),f},F.labelFormatter=function(m,g){var x=m._fullLayout,v=g.trace,_=v.contours,f={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(_.labelformat)f.tickformat=_.labelformat,l(f,x);else{var C=T.extractOpts(v);if(C&&C.colorbar&&C.colorbar._axis)f=C.colorbar._axis;else{if("constraint"===_.type){var w=_.value;f.range=k.isArrayOrTypedArray(w)?[w[0],w[w.length-1]]:[w,w]}else f.range=[_.start,_.end],f.nticks=(_.end-_.start)/_.size;f.range[0]===f.range[1]&&(f.range[1]+=f.range[0]||1),f.nticks||(f.nticks=1e3),l(f,x),p.prepTicks(f),f._tmin=null,f._tmax=null}}return function(E){return p.tickText(f,E).text}},F.calcTextOpts=function(m,g,x,v){var _=g(m);x.text(_).call(b.convertToTspans,v);var f=x.node(),C=o.bBox(f,!0);return{text:_,width:C.width,height:C.height,fontSize:+f.style["font-size"].replace("px",""),level:m,dy:(C.top+C.bottom)/2}},F.findBestTextLocation=function(m,g,x,v,_){var f,C,w,E,P,L=x.width;g.isClosed?(f=g.min+(C=g.len/h.INITIALSEARCHPOINTS)/2,w=g.max):(f=g.min+(C=(g.len-L)/(h.INITIALSEARCHPOINTS+1))+L/2,w=g.max-(C+L)/2);for(var O=1/0,z=0;z<h.ITERATIONS;z++){for(var V=f;V<w;V+=C){var R=k.getTextLocation(m,g.total,V,L),U=y(R,x,v,_);U<O&&(O=U,P=R,E=V)}if(O>2*h.MAXCOST)break;z&&(C/=2),w=(f=E-C/2)+1.5*C}if(O<=h.MAXCOST)return P},F.addLabelData=function(m,g,x,v){var _=g.fontSize,f=g.width+_/3,C=Math.max(0,g.height-_/3),w=m.x,E=m.y,P=m.theta,L=Math.sin(P),O=Math.cos(P),z=function(R,U){return[w+R*O-U*L,E+R*L+U*O]},V=[z(-f/2,-C/2),z(-f/2,C/2),z(f/2,C/2),z(f/2,-C/2)];x.push({text:g.text,x:w,y:E,dy:g.dy,theta:P,level:g.level,width:f,height:C}),v.push(V)},F.drawLabels=function(m,g,x,v,_){var f=m.selectAll("text").data(g,function(E){return E.text+","+E.x+","+E.y+","+E.theta});if(f.exit().remove(),f.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(E){var P=E.x+Math.sin(E.theta)*E.dy,L=E.y-Math.cos(E.theta)*E.dy;S.select(this).text(E.text).attr({x:P,y:L,transform:"rotate("+180*E.theta/Math.PI+" "+P+" "+L+")"}).call(b.convertToTspans,x)}),_){for(var C="",w=0;w<_.length;w++)C+="M"+_[w].join("L")+"Z";k.ensureSingle(v,"path","").attr("d",C)}}},54444:function(ie,F,e){"use strict";var S=e(54460),k=e(3400);function o(T,b,p){var l={type:"linear",range:[T,b]};return S.autoTicks(l,(b-T)/(p||15)),l}ie.exports=function(T,b){var p=T.contours;if(T.autocontour){var l=T.zmin,t=T.zmax;(T.zauto||void 0===l)&&(l=k.aggNums(Math.min,null,b)),(T.zauto||void 0===t)&&(t=k.aggNums(Math.max,null,b));var i=o(l,t,T.ncontours);p.size=i.dtick,p.start=S.tickFirst(i),i.range.reverse(),p.end=S.tickFirst(i),p.start===l&&(p.start+=p.size),p.end===t&&(p.end-=p.size),p.start>p.end&&(p.start=p.end=(p.start+p.end)/2),T._input.contours||(T._input.contours={}),k.extendFlat(T._input.contours,{start:p.start,end:p.end,size:p.size}),T._input.autocontour=!0}else if("constraint"!==p.type){var r,n=p.start,a=p.end,s=T._input.contours;n>a&&(p.start=s.start=a,a=p.end=s.end=n,n=p.start),p.size>0||(r=n===a?1:o(n,a,T.ncontours).dtick,s.size=p.size=r)}}},52440:function(ie,F,e){"use strict";var S=e(33428),k=e(43616),o=e(41648),T=e(41076);ie.exports=function(b){var p=S.select(b).selectAll("g.contour");p.style("opacity",function(l){return l[0].trace.opacity}),p.each(function(l){var t=S.select(this),i=l[0].trace,r=i.contours,n=i.line,a=r.size||1,s=r.start,c="constraint"===r.type,h=!c&&"lines"===r.coloring,u=!c&&"fill"===r.coloring,y=h||u?T(i):null;t.selectAll("g.contourlevel").each(function(g){S.select(this).selectAll("path").call(k.lineGroupStyle,n.width,h?y(g.level):n.color,n.dash)});var d=r.labelfont;if(t.selectAll("g.contourlabels text").each(function(g){k.font(S.select(this),{weight:d.weight,style:d.style,variant:d.variant,textcase:d.textcase,lineposition:d.lineposition,shadow:d.shadow,family:d.family,size:d.size,color:d.color||(h?y(g.level):n.color)})}),c)t.selectAll("g.contourfill path").style("fill",i.fillcolor);else if(u){var m;t.selectAll("g.contourfill path").style("fill",function(g){return void 0===m&&(m=g.level),y(g.level+.5*a)}),void 0===m&&(m=s),t.selectAll("g.contourbg path").style("fill",y(m-.5*a))}}),o(b)}},97680:function(ie,F,e){"use strict";var S=e(27260),k=e(17428);ie.exports=function(o,T,b,p,l){var t,i=b("contours.coloring"),r="";"fill"===i&&(t=b("contours.showlines")),!1!==t&&("lines"!==i&&(r=b("line.color","#000")),b("line.width",.5),b("line.dash")),"none"!==i&&(!0!==o.showlegend&&(T.showlegend=!1),T._dfltShowLegend=!1,S(o,T,p,b,{prefix:"",cLetter:"z"})),b("line.smoothing"),k(b,p,r,l)}},37960:function(ie,F,e){"use strict";var S=e(83328),k=e(67104),o=e(49084),T=e(92880).extendFlat,b=k.contours;ie.exports=T({carpet:{valType:"string",editType:"calc"},z:S.z,a:S.x,a0:S.x0,da:S.dx,b:S.y,b0:S.y0,db:S.dy,text:S.text,hovertext:S.hovertext,transpose:S.transpose,atype:S.xtype,btype:S.ytype,fillcolor:k.fillcolor,autocontour:k.autocontour,ncontours:k.ncontours,contours:{type:b.type,start:b.start,end:b.end,size:b.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:b.showlines,showlabels:b.showlabels,labelfont:b.labelfont,labelformat:b.labelformat,operation:b.operation,value:b.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:k.line.color,width:k.line.width,dash:k.line.dash,smoothing:k.line.smoothing,editType:"plot"},zorder:k.zorder,transforms:void 0},o("",{cLetter:"z",autoColorDflt:!1}))},30572:function(ie,F,e){"use strict";var S=e(47128),k=e(3400),o=e(2872),T=e(26136),b=e(70448),p=e(11240),l=e(35744),t=e(3252),i=e(50948),r=e(54444);ie.exports=function(n,a){var s=a._carpetTrace=i(n,a);if(s&&s.visible&&"legendonly"!==s.visible){if(!a.a||!a.b){var c=n.data[s.index],h=n.data[a.index];h.a||(h.a=c.a),h.b||(h.b=c.b),t(h,a,a._defaultColor,n._fullLayout)}var u=function(y,d){var m,g,x,v,_,f,C,w=d._carpetTrace,E=w.aaxis,P=w.baxis;E._minDtick=0,P._minDtick=0,k.isArray1D(d.z)&&o(d,E,P,"a","b",["z"]),m=d._a=d._a||d.a,v=d._b=d._b||d.b,m=m?E.makeCalcdata(d,"_a"):[],v=v?P.makeCalcdata(d,"_b"):[],g=d.a0||0,x=d.da||1,_=d.b0||0,f=d.db||1,C=d._z=T(d._z||d.z,d.transpose),d._emptypoints=p(C),b(C,d._emptypoints);var L=k.maxRowLength(C),R={a:l(d,"scaled"===d.xtype?"":m,g,x,L,E),b:l(d,"scaled"===d.ytype?"":v,_,f,C.length,P),z:C};return"levels"===d.contours.type&&"none"!==d.contours.coloring&&S(y,d,{vals:C,containerStr:"",cLetter:"z"}),[R]}(n,a);return r(a,a._z),u}}},3252:function(ie,F,e){"use strict";var S=e(3400),k=e(51264),o=e(37960),T=e(95536),b=e(84952),p=e(97680);ie.exports=function(l,t,i,r){function n(a,s){return S.coerce(l,t,o,a,s)}if(n("carpet"),l.a&&l.b){if(!k(l,t,n,r,"a","b"))return void(t.visible=!1);n("text"),"constraint"===n("contours.type")?T(l,t,n,r,i,{hasHover:!1}):(b(l,t,n,function(a){return S.coerce2(l,t,o,a)}),p(l,t,n,r,{hasHover:!1}))}else t._defaultColor=i,t._length=null;n("zorder")}},40448:function(ie,F,e){"use strict";ie.exports={attributes:e(37960),supplyDefaults:e(3252),colorbar:e(55296),calc:e(30572),plot:e(94440),style:e(52440),moduleType:"trace",name:"contourcarpet",basePlotModule:e(57952),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},94440:function(ie,F,e){"use strict";var S=e(33428),k=e(87072),o=e(53416),T=e(43616),b=e(3400),p=e(72424),l=e(88748),t=e(23676),i=e(93252),r=e(82172),n=e(61512),a=e(56008),s=e(50948),c=e(77712);function h(d,m,g){var x=d.getPointAtLength(m),v=d.getPointAtLength(g),_=v.x-x.x,f=v.y-x.y,C=Math.sqrt(_*_+f*f);return[_/C,f/C]}function u(d){var m=Math.sqrt(d[0]*d[0]+d[1]*d[1]);return[d[0]/m,d[1]/m]}function y(d,m){var g=Math.abs(d[0]*m[0]+d[1]*m[1]);return Math.sqrt(1-g*g)/g}ie.exports=function(d,m,g,x){var v=m.xaxis,_=m.yaxis;b.makeTraceGroups(x,g,"contour").each(function(f){var C=S.select(this),w=f[0],E=w.trace,P=E._carpetTrace=s(d,E),L=d.calcdata[P.index][0];if(P.visible&&"legendonly"!==P.visible){var O=w.a,z=w.b,V=E.contours,R=n(V,m,w),U="constraint"===V.type,Z=V._operation,N=U?"="===Z?"lines":"fill":V.coloring,G=[[O[0],z[z.length-1]],[O[O.length-1],z[z.length-1]],[O[O.length-1],z[0]],[O[0],z[0]]];p(R),l(R,1e-8*(O[O.length-1]-O[0]),1e-8*(z[z.length-1]-z[0]));var re,ne,Q,$,X=R;"constraint"===V.type&&(X=r(R,Z)),function(ge,we){var Te,xe,ye,_e,Ie,De,be,he,ce;for(Te=0;Te<ge.length;Te++){for(Ie=(_e=ge[Te]).pedgepaths=[],De=_e.ppaths=[],xe=0;xe<_e.edgepaths.length;xe++){for(ce=_e.edgepaths[xe],be=[],ye=0;ye<ce.length;ye++)be[ye]=we(ce[ye]);Ie.push(be)}for(xe=0;xe<_e.paths.length;xe++){for(ce=_e.paths[xe],he=[],ye=0;ye<ce.length;ye++)he[ye]=we(ce[ye]);De.push(he)}}}(R,ue);var oe=[];for($=L.clipsegments.length-1;$>=0;$--)ne=k([],(re=L.clipsegments[$]).x,v.c2p),Q=k([],re.y,_.c2p),ne.reverse(),Q.reverse(),oe.push(o(ne,Q,re.bicubic));var fe="M"+oe.join("L")+"Z";(function(ge,we,Te,xe,ye,_e){var Ie,De,be,he,ce=b.ensureSingle(ge,"g","contourbg").selectAll("path").data("fill"!==_e||ye?[]:[0]);ce.enter().append("path"),ce.exit().remove();var me=[];for(he=0;he<we.length;he++)De=k([],(Ie=we[he]).x,Te.c2p),be=k([],Ie.y,xe.c2p),me.push(o(De,be,Ie.bicubic));ce.attr("d","M"+me.join("L")+"Z").style("stroke","none")})(C,L.clipsegments,v,_,U,N),function(ge,we,Te,xe,ye,_e,Ie,De,be,he,ce){var me="fill"===he;me&&a(ye,ge.contours);var Pe=b.ensureSingle(we,"g","contourfill").selectAll("path").data(me?ye:[]);Pe.enter().append("path"),Pe.exit().remove(),Pe.each(function(Ae){var Ce=(Ae.prefixBoundary?ce:"")+function(Oe,Ne,je,ve,Me,Le,Ue,ze){var qe,Ke,it,ft,dt,kt,St,Tt="",lt=Ne.edgepaths.map(function(ht,Ge){return Ge}),ot=!0,Rt=1e-4*Math.abs(je[0][0]-je[2][0]),Vt=1e-4*Math.abs(je[0][1]-je[2][1]);function Ht(ht){return Math.abs(ht[1]-je[0][1])<Vt}function zt(ht){return Math.abs(ht[1]-je[2][1])<Vt}function Qe(ht){return Math.abs(ht[0]-je[0][0])<Rt}function nt(ht){return Math.abs(ht[0]-je[2][0])<Rt}function We(ht,Ge){var He,ut,tt,xt,At="";for(Ht(ht)&&!nt(ht)||zt(ht)&&!Qe(ht)?(xt=Me.aaxis,tt=c(Me,Le,[ht[0],Ge[0]],.5*(ht[1]+Ge[1]))):(xt=Me.baxis,tt=c(Me,Le,.5*(ht[0]+Ge[0]),[ht[1],Ge[1]])),He=1;He<tt.length;He++)for(At+=xt.smoothing?"C":"L",ut=0;ut<tt[He].length;ut++){var Mt=tt[He][ut];At+=[Ue.c2p(Mt[0]),ze.c2p(Mt[1])]+" "}return At}for(qe=0,Ke=null;lt.length;){for(Ke&&(Tt+=We(Ke,Ne.edgepaths[qe][0])),St=T.smoothopen(Ne.edgepaths[qe].map(ve),Ne.smoothing),Tt+=ot?St:St.replace(/^M/,"L"),lt.splice(lt.indexOf(qe),1),Ke=Ne.edgepaths[qe][Ne.edgepaths[qe].length-1],dt=-1,ft=0;ft<4;ft++){if(!Ke){b.log("Missing end?",qe,Ne);break}for(Ht(Ke)&&!nt(Ke)?it=je[1]:Qe(Ke)?it=je[0]:zt(Ke)?it=je[3]:nt(Ke)&&(it=je[2]),kt=0;kt<Ne.edgepaths.length;kt++){var gt=Ne.edgepaths[kt][0];Math.abs(Ke[0]-it[0])<Rt?Math.abs(Ke[0]-gt[0])<Rt&&(gt[1]-Ke[1])*(it[1]-gt[1])>=0&&(it=gt,dt=kt):Math.abs(Ke[1]-it[1])<Vt?Math.abs(Ke[1]-gt[1])<Vt&&(gt[0]-Ke[0])*(it[0]-gt[0])>=0&&(it=gt,dt=kt):b.log("endpt to newendpt is not vert. or horz.",Ke,it,gt)}if(dt>=0)break;Tt+=We(Ke,it),Ke=it}if(dt===Ne.edgepaths.length){b.log("unclosed perimeter path");break}(ot=-1===lt.indexOf(qe=dt))&&(qe=lt[0],Tt+=We(Ke,it)+"Z",Ke=null)}for(qe=0;qe<Ne.paths.length;qe++)Tt+=T.smoothclosed(Ne.paths[qe].map(ve),Ne.smoothing);return Tt}(0,Ae,_e,Ie,De,be,Te,xe);Ce?S.select(this).attr("d",Ce).style("stroke","none"):S.select(this).remove()})}(E,C,v,_,X,G,ue,P,L,N,fe),function(ge,we,Te,xe,ye,_e,Ie){var De=Te._context.staticPlot,be=b.ensureSingle(ge,"g","contourlines"),he=!1!==ye.showlines,ce=ye.showlabels,me=he&&ce,Pe=t.createLines(be,he||ce,we,De),Ae=t.createLineClip(be,me,Te,xe.trace.uid),Ce=ge.selectAll("g.contourlabels").data(ce?[0]:[]);if(Ce.exit().remove(),Ce.enter().append("g").classed("contourlabels",!0),ce){var je=_e.xaxis._length,ve=_e.yaxis._length,Me=[[[0,0],[je,0],[je,ve],[0,ve]]],Le=[];b.clearLocationCache();var Ue=t.labelFormatter(Te,xe),ze=T.tester.append("text").attr("data-notex",1).call(T.font,ye.labelfont),qe={left:0,right:je,center:je/2,top:0,bottom:ve,middle:ve/2},Ke=Math.sqrt(je*je+ve*ve),it=i.LABELDISTANCE*Ke/Math.max(1,we.length/i.LABELINCREASE);Pe.each(function(ft){var dt=t.calcTextOpts(ft.level,Ue,ze,Te);S.select(this).selectAll("path").each(function(kt){var Tt=b.getVisibleSegment(this,qe,dt.height/2);if(Tt&&(function(Vt,Ht,zt,Qe,nt,We){for(var et,gt=0;gt<zt.pedgepaths.length;gt++)Ht===zt.pedgepaths[gt]&&(et=zt.edgepaths[gt]);if(et){var ht=nt.a[0],Ge=nt.a[nt.a.length-1],He=nt.b[0],ut=nt.b[nt.b.length-1],tt=h(Vt,0,1),xt=h(Vt,Qe.total,Qe.total-1),At=yt(et[0],tt),Mt=Qe.total-yt(et[et.length-1],xt);Qe.min<At&&(Qe.min=At),Qe.max>Mt&&(Qe.max=Mt),Qe.len=Qe.max-Qe.min}function yt(Pt,Ct){var Dt,Ut=0;return(Math.abs(Pt[0]-ht)<.1||Math.abs(Pt[0]-Ge)<.1)&&(Dt=u(nt.dxydb_rough(Pt[0],Pt[1],.1)),Ut=Math.max(Ut,We*y(Ct,Dt)/2)),(Math.abs(Pt[1]-He)<.1||Math.abs(Pt[1]-ut)<.1)&&(Dt=u(nt.dxyda_rough(Pt[0],Pt[1],.1)),Ut=Math.max(Ut,We*y(Ct,Dt)/2)),Ut}}(this,kt,ft,Tt,Ie,dt.height),!(Tt.len<(dt.width+dt.height)*i.LABELMIN)))for(var lt=Math.min(Math.ceil(Tt.len/it),i.LABELMAX),ot=0;ot<lt;ot++){var Rt=t.findBestTextLocation(this,Tt,dt,Le,qe);if(!Rt)break;t.addLabelData(Rt,dt,Le,Me)}})}),ze.remove(),t.drawLabels(Ce,Le,Te,Ae,me?Me:null)}ce&&!he&&Pe.remove()}(C,R,d,w,V,m,P),T.setClipUrl(C,P._clipPathId,d)}function ue(ge){var we=P.ab2xy(ge[0],ge[1],!0);return[v.c2p(we[0]),_.c2p(we[1])]}})}},33928:function(ie,F,e){"use strict";var S=e(49084),k=e(21776).Ks,o=e(45464),T=e(31512),b=e(92880).extendFlat;ie.exports=b({lon:T.lon,lat:T.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:T.text,hovertext:T.hovertext,hoverinfo:b({},o.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:k(),showlegend:b({},o.showlegend,{dflt:!1})},S("",{cLetter:"z",editTypeOverride:"calc"}))},90876:function(ie,F,e){"use strict";var S=e(38248),k=e(3400).isArrayOrTypedArray,o=e(39032).BADNUM,T=e(47128),b=e(3400)._;ie.exports=function(p,l){for(var t=l._length,i=new Array(t),r=l.z,n=k(r)&&r.length,a=0;a<t;a++){var s=i[a]={},c=l.lon[a],h=l.lat[a];if(s.lonlat=S(c)&&S(h)?[+c,+h]:[o,o],n){var u=r[a];s.z=S(u)?u:o}}return T(p,l,{vals:n?r:[0,1],containerStr:"",cLetter:"z"}),t&&(i[0].t={labels:{lat:b(p,"lat:")+" ",lon:b(p,"lon:")+" "}}),i}},4629:function(ie,F,e){"use strict";var S=e(38248),k=e(3400),o=e(76308),T=e(8932),b=e(39032).BADNUM,p=e(44808).makeBlank;ie.exports=function(l){var t=l[0].trace,i=!0===t.visible&&0!==t._length,r=t._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:p()};if(!i)return r;var n,a=[],s=t.z,c=t.radius,h=k.isArrayOrTypedArray(s)&&s.length,u=k.isArrayOrTypedArray(c);for(n=0;n<l.length;n++){var y=l[n],d=y.lonlat;if(d[0]!==b){var m={};if(h){var g=y.z;m.z=g!==b?g:0}u&&(m.r=S(c[n])&&c[n]>0?+c[n]:0),a.push({type:"Feature",geometry:{type:"Point",coordinates:d},properties:m})}}var x=T.extractOpts(t),v=x.reversescale?T.flipScale(x.colorscale):x.colorscale,_=v[0][1],f=["interpolate",["linear"],["heatmap-density"],0,o.opacity(_)<1?_:o.addOpacity(_,0)];for(n=1;n<v.length;n++)f.push(v[n][0],v[n][1]);return k.extendFlat(r.heatmap.paint,{"heatmap-weight":h?["interpolate",["linear"],["get","z"],x.min,0,x.max,1]:1/(x.max-x.min),"heatmap-color":f,"heatmap-radius":u?{type:"identity",property:"r"}:t.radius,"heatmap-opacity":t.opacity}),r.geojson={type:"FeatureCollection",features:a},r.heatmap.layout.visibility="visible",r}},97664:function(ie,F,e){"use strict";var S=e(3400),k=e(27260),o=e(33928);ie.exports=function(T,b,p,l){function t(a,s){return S.coerce(T,b,o,a,s)}var i=t("lon")||[],r=t("lat")||[],n=Math.min(i.length,r.length);n?(b._length=n,t("z"),t("radius"),t("below"),t("text"),t("hovertext"),t("hovertemplate"),k(T,b,l,t,{prefix:"",cLetter:"z"})):b.visible=!1}},96176:function(ie){"use strict";ie.exports=function(F,e){return F.lon=e.lon,F.lat=e.lat,F.z=e.z,F}},25336:function(ie,F,e){"use strict";var S=e(54460),k=e(63312).hoverPoints,o=e(63312).getExtraText;ie.exports=function(T,b,p){var l=k(T,b,p);if(l){var t=l[0],i=t.cd,r=i[0].trace,n=i[t.index];if(delete t.color,"z"in n){var a=t.subplot.mockAxis;t.z=n.z,t.zLabel=S.tickText(a,a.c2l(n.z),"hover").text}return t.extraText=o(r,n,i[0].t.labels),[t]}}},15088:function(ie,F,e){"use strict";ie.exports={attributes:e(33928),supplyDefaults:e(97664),colorbar:e(96288),formatLabels:e(11960),calc:e(90876),plot:e(35256),hoverPoints:e(25336),eventData:e(96176),getBelow:function(S,k){for(var o=k.getMapLayers(),T=0;T<o.length;T++){var b=o[T],p=b.id;if("symbol"===b.type&&"string"==typeof p&&-1===p.indexOf("plotly-"))return p}},moduleType:"trace",name:"densitymapbox",basePlotModule:e(33688),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},35256:function(ie,F,e){"use strict";var S=e(4629),k=e(47552).traceLayerPrefix;function o(b,p){this.type="densitymapbox",this.subplot=b,this.uid=p,this.sourceId="source-"+p,this.layerList=[["heatmap",k+p+"-heatmap"]],this.below=null}var T=o.prototype;T.update=function(b){var p=this.subplot,l=this.layerList,t=S(b),i=p.belowLookup["trace-"+this.uid];p.map.getSource(this.sourceId).setData(t.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(t,i),this.below=i);for(var r=0;r<l.length;r++){var n=l[r],s=n[1],c=t[n[0]];p.setOptions(s,"setLayoutProperty",c.layout),"visible"===c.layout.visibility&&p.setOptions(s,"setPaintProperty",c.paint)}},T._addLayers=function(b,p){for(var l=this.subplot,t=this.layerList,i=this.sourceId,r=0;r<t.length;r++){var n=t[r],a=n[0],s=b[a];l.addLayer({type:a,id:n[1],source:i,layout:s.layout,paint:s.paint},p)}},T._removeLayers=function(){for(var b=this.subplot.map,p=this.layerList,l=p.length-1;l>=0;l--)b.removeLayer(p[l][1])},T.dispose=function(){var b=this.subplot.map;this._removeLayers(),b.removeSource(this.sourceId)},ie.exports=function(b,p){var l=p[0].trace,t=new o(b,l.uid),i=t.sourceId,r=S(p),n=t.below=b.belowLookup["trace-"+l.uid];return b.map.addSource(i,{type:"geojson",data:r.geojson}),t._addLayers(r,n),t}},74248:function(ie,F,e){"use strict";var S=e(3400);ie.exports=function(k,o){for(var T=0;T<k.length;T++)k[T].i=T;S.mergeArray(o.text,k,"tx"),S.mergeArray(o.hovertext,k,"htx");var b=o.marker;if(b){S.mergeArray(b.opacity,k,"mo"),S.mergeArray(b.color,k,"mc");var p=b.line;p&&(S.mergeArray(p.color,k,"mlc"),S.mergeArrayCastPositive(p.width,k,"mlw"))}}},20088:function(ie,F,e){"use strict";var S,k=e(20832),o=e(52904).line,T=e(45464),b=e(29736).axisHoverFormat,p=e(21776).Ks,l=e(21776).Gw,t=e(74732),i=e(92880).extendFlat,r=e(76308);ie.exports={x:k.x,x0:k.x0,dx:k.dx,y:k.y,y0:k.y0,dy:k.dy,xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),hovertext:k.hovertext,hovertemplate:p({},{keys:t.eventDataKeys}),hoverinfo:i({},T.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:l({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),text:k.text,textposition:k.textposition,insidetextanchor:i({},k.insidetextanchor,{dflt:"middle"}),textangle:i({},k.textangle,{dflt:0}),textfont:k.textfont,insidetextfont:k.insidetextfont,outsidetextfont:k.outsidetextfont,constraintext:k.constraintext,cliponaxis:k.cliponaxis,orientation:i({},k.orientation,{}),offset:i({},k.offset,{arrayOk:!1}),width:i({},k.width,{arrayOk:!1}),marker:(S=i({},k.marker),delete S.pattern,delete S.cornerradius,S),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:i({},o.color,{dflt:r.defaultLine}),width:i({},o.width,{dflt:0,editType:"plot"}),dash:o.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:k.offsetgroup,alignmentgroup:k.alignmentgroup,zorder:k.zorder}},23096:function(ie,F,e){"use strict";var S=e(54460),k=e(1220),o=e(74248),T=e(4500),b=e(39032).BADNUM;function p(l){return l===b?0:l}ie.exports=function(l,t){var i,r,n,a,s,c,h,u,y=S.getFromId(l,t.xaxis||"x"),d=S.getFromId(l,t.yaxis||"y");"h"===t.orientation?(i=y.makeCalcdata(t,"x"),n=d.makeCalcdata(t,"y"),a=k(t,d,"y",n),s=!!t.yperiodalignment,c="y"):(i=d.makeCalcdata(t,"y"),n=y.makeCalcdata(t,"x"),a=k(t,y,"x",n),s=!!t.xperiodalignment,c="x"),r=a.vals;var m,g=Math.min(r.length,i.length),x=new Array(g);for(t._base=[],h=0;h<g;h++){i[h]<0&&(i[h]=b);var v=!1;i[h]!==b&&h+1<g&&i[h+1]!==b&&(v=!0),u=x[h]={p:r[h],s:i[h],cNext:v},t._base[h]=-.5*u.s,s&&(x[h].orig_p=n[h],x[h][c+"End"]=a.ends[h],x[h][c+"Start"]=a.starts[h]),t.ids&&(u.id=String(t.ids[h])),0===h&&(x[0].vTotal=0),x[0].vTotal+=p(u.s),u.begR=p(u.s)/p(x[0].s)}for(h=0;h<g;h++)(u=x[h]).s!==b&&(u.sumR=u.s/x[0].vTotal,u.difR=void 0!==m?u.s/m:1,m=u.s);return o(x,t),T(x,t),x}},74732:function(ie){"use strict";ie.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},4804:function(ie,F,e){"use strict";var S=e(96376).setGroupPositions;ie.exports=function(k,o){var T,b,p=k._fullLayout,l=k._fullData,t=k.calcdata,i=o.xaxis,r=o.yaxis,n=[],a=[],s=[];for(b=0;b<l.length;b++){var c=l[b];!0===c.visible&&c.xaxis===i._id&&c.yaxis===r._id&&"funnel"===c.type&&(T=t[b],"h"===c.orientation?s.push(T):a.push(T),n.push(T))}var u={mode:p.funnelmode,norm:p.funnelnorm,gap:p.funnelgap,groupgap:p.funnelgroupgap};for(S(k,i,r,a,u),S(k,r,i,s,u),b=0;b<n.length;b++){T=n[b];for(var y=0;y<T.length;y++)y+1<T.length&&(T[y].nextP0=T[y+1].p0,T[y].nextS0=T[y+1].s0,T[y].nextP1=T[y+1].p1,T[y].nextS1=T[y+1].s1)}}},45432:function(ie,F,e){"use strict";var S=e(3400),k=e(20011),o=e(31508).handleText,T=e(43980),b=e(31147),p=e(20088),l=e(76308);ie.exports={supplyDefaults:function(t,i,r,n){function a(u,y){return S.coerce(t,i,p,u,y)}if(T(t,i,n,a)){b(t,i,n,a),a("xhoverformat"),a("yhoverformat"),a("orientation",i.y&&!i.x?"v":"h"),a("offset"),a("width");var s=a("text");a("hovertext"),a("hovertemplate");var c=a("textposition");o(t,i,n,a,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"===i.textposition||i.texttemplate||a("textinfo",S.isArrayOrTypedArray(s)?"text+value":"value");var h=a("marker.color",r);a("marker.line.color",l.defaultLine),a("marker.line.width"),a("connector.visible")&&(a("connector.fillcolor",(y=S.isArrayOrTypedArray(u=h)?"#000":u,l.addOpacity(y,.5*l.opacity(y)))),a("connector.line.width")&&(a("connector.line.color"),a("connector.line.dash"))),a("zorder")}else i.visible=!1;var u,y},crossTraceDefaults:function(t,i){var r,n;function a(c){return S.coerce(n._input,n,p,c)}if("group"===i.funnelmode)for(var s=0;s<t.length;s++)r=(n=t[s])._input,k(r,n,i,a)}}},34580:function(ie){"use strict";ie.exports=function(F,e){return F.x="xVal"in e?e.xVal:e.x,F.y="yVal"in e?e.yVal:e.y,"percentInitial"in e&&(F.percentInitial=e.percentInitial),"percentPrevious"in e&&(F.percentPrevious=e.percentPrevious),"percentTotal"in e&&(F.percentTotal=e.percentTotal),e.xa&&(F.xaxis=e.xa),e.ya&&(F.yaxis=e.ya),F}},31488:function(ie,F,e){"use strict";var S=e(76308).opacity,k=e(63400).hoverOnBars,o=e(3400).formatPercent;ie.exports=function(T,b,p,l,t){var g,x,v,_,f,i=k(T,b,p,l,t);if(i){var r=i.cd,n=r[0].trace,s=r[i.index];i[("h"===n.orientation?"x":"y")+"LabelVal"]=s.s,i.percentInitial=s.begR,i.percentInitialLabel=o(s.begR,1),i.percentPrevious=s.difR,i.percentPreviousLabel=o(s.difR,1),i.percentTotal=s.sumR,i.percentTotalLabel=o(s.sumR,1);var c=s.hi||n.hoverinfo,h=[];if(c&&"none"!==c&&"skip"!==c){var u="all"===c,y=c.split("+"),d=function(m){return u||-1!==y.indexOf(m)};d("percent initial")&&h.push(i.percentInitialLabel+" of initial"),d("percent previous")&&h.push(i.percentPreviousLabel+" of previous"),d("percent total")&&h.push(i.percentTotalLabel+" of total")}return i.extraText=h.join("<br>"),i.color=(x=n.marker,_=(g=s).mlc||x.line.color,f=g.mlw||x.line.width,S(v=g.mc||x.color)?v:S(_)&&f?_:void 0),[i]}}},94704:function(ie,F,e){"use strict";ie.exports={attributes:e(20088),layoutAttributes:e(7076),supplyDefaults:e(45432).supplyDefaults,crossTraceDefaults:e(45432).crossTraceDefaults,supplyLayoutDefaults:e(11631),calc:e(23096),crossTraceCalc:e(4804),plot:e(42200),style:e(44544).style,hoverPoints:e(31488),eventData:e(34580),selectPoints:e(45784),moduleType:"trace",name:"funnel",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},7076:function(ie){"use strict";ie.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},11631:function(ie,F,e){"use strict";var S=e(3400),k=e(7076);ie.exports=function(o,T,b){var p=!1;function l(r,n){return S.coerce(o,T,k,r,n)}for(var t=0;t<b.length;t++){var i=b[t];if(i.visible&&"funnel"===i.type){p=!0;break}}p&&(l("funnelmode"),l("funnelgap",.2),l("funnelgroupgap"))}},42200:function(ie,F,e){"use strict";var S=e(33428),k=e(3400),o=e(43616),T=e(39032).BADNUM,b=e(98184),p=e(82744).clearMinTextSize;function l(t,i,r,n){var a=[],s=[],c=n?i:r,h=n?r:i;return a[0]=c.c2p(t.s0,!0),s[0]=h.c2p(t.p0,!0),a[1]=c.c2p(t.s1,!0),s[1]=h.c2p(t.p1,!0),a[2]=c.c2p(t.nextS0,!0),s[2]=h.c2p(t.nextP0,!0),a[3]=c.c2p(t.nextS1,!0),s[3]=h.c2p(t.nextP1,!0),n?[a,s]:[s,a]}ie.exports=function(t,i,r,n){var s,c,y,d,a=t._fullLayout;p("funnel",a),s=t,y=(c=i).xaxis,d=c.yaxis,k.makeTraceGroups(n,r,"trace bars").each(function(m){var g=S.select(this),x=m[0].trace,v=k.ensureSingle(g,"g","regions");if(x.connector&&x.connector.visible){var _="h"===x.orientation,f=v.selectAll("g.region").data(k.identity);f.enter().append("g").classed("region",!0),f.exit().remove();var C=f.size();f.each(function(w,E){if(E===C-1||w.cNext){var P=l(w,y,d,_),L=P[0],O=P[1],z="";L[0]!==T&&O[0]!==T&&L[1]!==T&&O[1]!==T&&L[2]!==T&&O[2]!==T&&L[3]!==T&&O[3]!==T&&(z+=_?"M"+L[0]+","+O[1]+"L"+L[2]+","+O[2]+"H"+L[3]+"L"+L[1]+","+O[1]+"Z":"M"+L[1]+","+O[1]+"L"+L[2]+","+O[3]+"V"+O[2]+"L"+L[1]+","+O[0]+"Z"),""===z&&(z="M0,0Z"),k.ensureSingle(S.select(this),"path").attr("d",z).call(o.setClipUrl,c.layerClipId,s)}})}else v.remove()}),function(s,c,h,u){var y=c.xaxis,d=c.yaxis;k.makeTraceGroups(u,h,"trace bars").each(function(m){var g=S.select(this),x=m[0].trace,v=k.ensureSingle(g,"g","lines");if(x.connector&&x.connector.visible&&x.connector.line.width){var _="h"===x.orientation,f=v.selectAll("g.line").data(k.identity);f.enter().append("g").classed("line",!0),f.exit().remove();var C=f.size();f.each(function(w,E){if(E===C-1||w.cNext){var P=l(w,y,d,_),L=P[0],O=P[1],z="";void 0!==L[3]&&void 0!==O[3]&&(_?(z+="M"+L[0]+","+O[1]+"L"+L[2]+","+O[2],z+="M"+L[1]+","+O[1]+"L"+L[3]+","+O[2]):(z+="M"+L[1]+","+O[1]+"L"+L[2]+","+O[3],z+="M"+L[1]+","+O[0]+"L"+L[2]+","+O[2])),""===z&&(z="M0,0Z"),k.ensureSingle(S.select(this),"path").attr("d",z).call(o.setClipUrl,c.layerClipId,s)}})}else v.remove()})}(t,i,r,n),b.plot(t,i,r,n,{mode:a.funnelmode,norm:a.funnelmode,gap:a.funnelgap,groupgap:a.funnelgroupgap})}},44544:function(ie,F,e){"use strict";var S=e(33428),k=e(43616),o=e(76308),T=e(13448).DESELECTDIM,b=e(60100),p=e(82744).resizeText,l=b.styleTextPoints;ie.exports={style:function(t,i,r){var n=r||S.select(t).selectAll('g[class^="funnellayer"]').selectAll("g.trace");p(t,n,"funnel"),n.style("opacity",function(a){return a[0].trace.opacity}),n.each(function(a){var s=S.select(this),c=a[0].trace;s.selectAll(".point > path").each(function(h){if(!h.isBlank){var u=c.marker;S.select(this).call(o.fill,h.mc||u.color).call(o.stroke,h.mlc||u.line.color).call(k.dashLine,u.line.dash,h.mlw||u.line.width).style("opacity",c.selectedpoints&&!h.selected?T:1)}}),l(s,c,t),s.selectAll(".regions").each(function(){S.select(this).selectAll("path").style("stroke-width",0).call(o.fill,c.connector.fillcolor)}),s.selectAll(".lines").each(function(){var h=c.connector.line;k.lineGroupStyle(S.select(this).selectAll("path"),h.width,h.color,h.dash)})})}}},22332:function(ie,F,e){"use strict";var S=e(74996),k=e(45464),o=e(86968).u,T=e(21776).Ks,b=e(21776).Gw,p=e(92880).extendFlat;ie.exports={labels:S.labels,label0:S.label0,dlabel:S.dlabel,values:S.values,marker:{colors:S.marker.colors,line:{color:p({},S.marker.line.color,{dflt:null}),width:p({},S.marker.line.width,{dflt:1}),editType:"calc"},pattern:S.marker.pattern,editType:"calc"},text:S.text,hovertext:S.hovertext,scalegroup:p({},S.scalegroup,{}),textinfo:p({},S.textinfo,{flags:["label","text","value","percent"]}),texttemplate:b({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:p({},k.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:T({},{keys:["label","color","value","text","percent"]}),textposition:p({},S.textposition,{values:["inside","none"],dflt:"inside"}),textfont:S.textfont,insidetextfont:S.insidetextfont,title:{text:S.title.text,font:S.title.font,position:p({},S.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:o({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},91248:function(ie,F,e){"use strict";var S=e(7316);F.name="funnelarea",F.plot=function(k,o,T,b){S.plotBasePlot(F.name,k,o,T,b)},F.clean=function(k,o,T,b){S.cleanBasePlot(F.name,k,o,T,b)}},54e3:function(ie,F,e){"use strict";var S=e(45768);ie.exports={calc:function(k,o){return S.calc(k,o)},crossTraceCalc:function(k){S.crossTraceCalc(k,{type:"funnelarea"})}}},92688:function(ie,F,e){"use strict";var S=e(3400),k=e(22332),o=e(86968).Q,T=e(31508).handleText,b=e(74174).handleLabelsAndValues,p=e(74174).handleMarkerDefaults;ie.exports=function(l,t,i,r){function n(g,x){return S.coerce(l,t,k,g,x)}var a=n("labels"),s=n("values"),c=b(a,s),h=c.len;if(t._hasLabels=c.hasLabels,t._hasValues=c.hasValues,!t._hasLabels&&t._hasValues&&(n("label0"),n("dlabel")),h){t._length=h,p(l,t,r,n),n("scalegroup");var u,y=n("text"),d=n("texttemplate");if(d||(u=n("textinfo",Array.isArray(y)?"text+percent":"percent")),n("hovertext"),n("hovertemplate"),d||u&&"none"!==u){var m=n("textposition");T(l,t,r,n,m,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}else"none"===u&&n("textposition","none");o(t,r,n),n("title.text")&&(n("title.position"),S.coerceFont(n,"title.font",r.font)),n("aspectratio"),n("baseratio")}else t.visible=!1}},62396:function(ie,F,e){"use strict";ie.exports={moduleType:"trace",name:"funnelarea",basePlotModule:e(91248),categories:["pie-like","funnelarea","showLegend"],attributes:e(22332),layoutAttributes:e(61280),supplyDefaults:e(92688),supplyLayoutDefaults:e(35384),calc:e(54e3).calc,crossTraceCalc:e(54e3).crossTraceCalc,plot:e(39472),style:e(62096),styleOne:e(10528),meta:{}}},61280:function(ie,F,e){"use strict";var S=e(85204).hiddenlabels;ie.exports={hiddenlabels:S,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},35384:function(ie,F,e){"use strict";var S=e(3400),k=e(61280);ie.exports=function(o,T){function b(p,l){return S.coerce(o,T,k,p,l)}b("hiddenlabels"),b("funnelareacolorway",T.colorway),b("extendfunnelareacolors")}},39472:function(ie,F,e){"use strict";var S=e(33428),k=e(43616),o=e(3400),T=o.strScale,b=o.strTranslate,p=e(72736),l=e(98184).toMoveInsideBar,t=e(82744),i=t.recordMinTextSize,r=t.clearMinTextSize,n=e(69656),a=e(37820),s=a.attachFxHandlers,c=a.determineInsideTextFont,h=a.layoutAreas,u=a.prerenderTitles,y=a.positionTitleOutside,d=a.formatSliceLabel;function m(g,x){return"l"+(x[0]-g[0])+","+(x[1]-g[1])}ie.exports=function(g,x){var v=g._context.staticPlot,_=g._fullLayout;r("funnelarea",_),u(x,g),h(x,_._size),o.makeTraceGroups(_._funnelarealayer,x,"trace").each(function(f){var C=S.select(this),w=f[0],E=w.trace;(function(P){if(P.length){var L=P[0],O=L.trace,z=O.aspectratio,V=O.baseratio;V>.999&&(V=.999);var R,U,Z,N=Math.pow(V,2),G=L.vTotal,W=G,ae=G*N/(1-N)/G,re=[];for(re.push(be()),U=P.length-1;U>-1;U--)(Z=P[U]).hidden||(ae+=Z.v/W,re.push(be()));var Q=1/0,$=-1/0;for(U=0;U<re.length;U++)R=re[U],Q=Math.min(Q,R[1]),$=Math.max($,R[1]);for(U=0;U<re.length;U++)re[U][1]-=($+Q)/2;var oe=L.r,fe=($-Q)/2,ue=oe/re[re.length-1][0],ge=oe/fe*z;for(L.r=ge*fe,U=0;U<re.length;U++)re[U][0]*=ue,re[U][1]*=ge;var we,Te,xe=[-(R=re[0])[0],R[1]],ye=[R[0],R[1]],_e=0;for(U=P.length-1;U>-1;U--)if(!(Z=P[U]).hidden){var Ie=re[_e+=1][0],De=re[_e][1];Z.TL=[-Ie,De],Z.TR=[Ie,De],Z.BL=xe,Z.BR=ye,Z.pxmid=[.5*((we=Z.TR)[0]+(Te=Z.BR)[0]),.5*(we[1]+Te[1])],xe=Z.TL,ye=Z.TR}}function be(){var he,ce={x:he=Math.sqrt(ae),y:-he};return[ce.x,ce.y]}})(f),C.each(function(){var P=S.select(this).selectAll("g.slice").data(f);P.enter().append("g").classed("slice",!0),P.exit().remove(),P.each(function(O,z){if(O.hidden)S.select(this).selectAll("path,g").remove();else{O.pointNumber=O.i,O.curveNumber=E.index;var V=w.cx,R=w.cy,U=S.select(this),Z=U.selectAll("path.surface").data([O]);Z.enter().append("path").classed("surface",!0).style({"pointer-events":v?"none":"all"}),U.call(s,g,f);var N="M"+(V+O.TR[0])+","+(R+O.TR[1])+m(O.TR,O.BR)+m(O.BR,O.BL)+m(O.BL,O.TL)+"Z";Z.attr("d",N),d(g,O,w);var G=n.castOption(E.textposition,O.pts),W=U.selectAll("g.slicetext").data(O.text&&"none"!==G?[0]:[]);W.enter().append("g").classed("slicetext",!0),W.exit().remove(),W.each(function(){var ae=o.ensureSingle(S.select(this),"text","",function(ue){ue.attr("data-notex",1)}),re=o.ensureUniformFontSize(g,c(E,O,_.font));ae.text(O.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(k.font,re).call(p.convertToTspans,g);var ne,Q,$,X=k.bBox(ae.node()),oe=Math.min(O.BL[1],O.BR[1])+R,fe=Math.max(O.TL[1],O.TR[1])+R;Q=Math.max(O.TL[0],O.BL[0])+V,$=Math.min(O.TR[0],O.BR[0])+V,(ne=l(Q,$,oe,fe,X,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=re.size,i(E.type,ne,_),f[z].transform=ne,o.setTransormAndDisplay(ae,ne)})}});var L=S.select(this).selectAll("g.titletext").data(E.title.text?[0]:[]);L.enter().append("g").classed("titletext",!0),L.exit().remove(),L.each(function(){var O=o.ensureSingle(S.select(this),"text","",function(R){R.attr("data-notex",1)}),z=E.title.text;E._meta&&(z=o.templateString(z,E._meta)),O.text(z).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(k.font,E.title.font).call(p.convertToTspans,g);var V=y(w,_._size);O.attr("transform",b(V.x,V.y)+T(Math.min(1,V.scale))+b(V.tx,V.ty))})})})}},62096:function(ie,F,e){"use strict";var S=e(33428),k=e(10528),o=e(82744).resizeText;ie.exports=function(T){var b=T._fullLayout._funnelarealayer.selectAll(".trace");o(T,b,"funnelarea"),b.each(function(p){var l=p[0].trace,t=S.select(this);t.style({opacity:l.opacity}),t.selectAll("path.surface").each(function(i){S.select(this).call(k,i,l,T)})})}},83328:function(ie,F,e){"use strict";var S=e(52904),k=e(45464),o=e(25376),T=e(29736).axisHoverFormat,b=e(21776).Ks,p=e(21776).Gw,l=e(49084),t=e(92880).extendFlat;ie.exports=t({z:{valType:"data_array",editType:"calc"},x:t({},S.x,{impliedEdits:{xtype:"array"}}),x0:t({},S.x0,{impliedEdits:{xtype:"scaled"}}),dx:t({},S.dx,{impliedEdits:{xtype:"scaled"}}),y:t({},S.y,{impliedEdits:{ytype:"array"}}),y0:t({},S.y0,{impliedEdits:{ytype:"scaled"}}),dy:t({},S.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:t({},S.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:t({},S.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:t({},S.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:t({},S.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:t({},S.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:t({},S.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:b(),texttemplate:p({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:o({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:t({},k.showlegend,{dflt:!1}),zorder:S.zorder},{transforms:void 0},l("",{cLetter:"z",autoColorDflt:!1}))},19512:function(ie,F,e){"use strict";var S=e(24040),k=e(3400),o=e(54460),T=e(1220),b=e(55480),p=e(47128),l=e(2872),t=e(26136),i=e(70448),r=e(11240),n=e(35744),a=e(39032).BADNUM;function s(c){for(var h=[],u=c.length,y=0;y<u;y++){var d=c[y];d!==a&&h.push(d)}return h}ie.exports=function(c,h){var u,y,d,m,g,x,v,_,f,C,w,E=o.getFromId(c,h.xaxis||"x"),P=o.getFromId(c,h.yaxis||"y"),L=S.traceIs(h,"contour"),O=S.traceIs(h,"histogram"),z=S.traceIs(h,"gl2d"),V=L?"best":h.zsmooth;if(E._minDtick=0,P._minDtick=0,O)m=(w=b(c,h)).orig_x,u=w.x,y=w.x0,d=w.dx,_=w.orig_y,g=w.y,x=w.y0,v=w.dy,f=w.z;else{var R=h.z;k.isArray1D(R)?(l(h,E,P,"x","y",["z"]),u=h._x,g=h._y,R=h._z):(m=h.x?E.makeCalcdata(h,"x"):[],_=h.y?P.makeCalcdata(h,"y"):[],u=T(h,E,"x",m).vals,g=T(h,P,"y",_).vals,h._x=u,h._y=g),y=h.x0,d=h.dx,x=h.y0,v=h.dy,f=t(R,h,E,P)}function U($){V=h._input.zsmooth=h.zsmooth=!1,k.warn('cannot use zsmooth: "fast": '+$)}function Z($){if($.length>1){var X=($[$.length-1]-$[0])/($.length-1),oe=Math.abs(X/100);for(C=0;C<$.length-1;C++)if(Math.abs($[C+1]-$[C]-X)>oe)return!1}return!0}(E.rangebreaks||P.rangebreaks)&&(f=function($,X,oe){for(var fe=[],ue=-1,ge=0;ge<oe.length;ge++)if(X[ge]!==a){fe[++ue]=[];for(var we=0;we<oe[ge].length;we++)$[we]!==a&&fe[ue].push(oe[ge][we])}return fe}(u,g,f),O||(u=s(u),g=s(g),h._x=u,h._y=g)),O||!L&&!h.connectgaps||(h._emptypoints=r(f),i(f,h._emptypoints)),h._islinear=!1,"log"===E.type||"log"===P.type?"fast"===V&&U("log axis found"):Z(u)?Z(g)?h._islinear=!0:"fast"===V&&U("y scale is not linear"):"fast"===V&&U("x scale is not linear");var N=k.maxRowLength(f),G="scaled"===h.xtype?"":u,W=n(h,G,y,d,N,E),ae="scaled"===h.ytype?"":g,re=n(h,ae,x,v,f.length,P);z||(h._extremes[E._id]=o.findExtremes(E,W),h._extremes[P._id]=o.findExtremes(P,re));var ne={x:W,y:re,z:f,text:h._text||h.text,hovertext:h._hovertext||h.hovertext};if(h.xperiodalignment&&m&&(ne.orig_x=m),h.yperiodalignment&&_&&(ne.orig_y=_),G&&G.length===W.length-1&&(ne.xCenter=G),ae&&ae.length===re.length-1&&(ne.yCenter=ae),O&&(ne.xRanges=w.xRanges,ne.yRanges=w.yRanges,ne.pts=w.pts),L||p(c,h,{vals:f,cLetter:"z"}),L&&h.contours&&"heatmap"===h.contours.coloring){var Q={type:"contour"===h.type?"heatmap":"histogram2d",xcalendar:h.xcalendar,ycalendar:h.ycalendar};ne.xfill=n(Q,G,y,d,N,E),ne.yfill=n(Q,ae,x,v,f.length,P)}return[ne]}},26136:function(ie,F,e){"use strict";var S=e(38248),k=e(3400),o=e(39032).BADNUM;ie.exports=function(T,b,p,l){var t,i,r,n,a,s;function c(g){if(S(g))return+g}if(b&&b.transpose){for(t=0,a=0;a<T.length;a++)t=Math.max(t,T[a].length);if(0===t)return!1;r=function(g){return g.length},n=function(g,x,v){return(g[v]||[])[x]}}else t=T.length,r=function(g,x){return g[x].length},n=function(g,x,v){return(g[x]||[])[v]};function u(g){if(b&&"carpet"!==b.type&&"contourcarpet"!==b.type&&g&&"category"===g.type&&b["_"+g._id.charAt(0)].length){var x=g._id.charAt(0),v={},_=b["_"+x+"CategoryMap"]||b[x];for(a=0;a<_.length;a++)v[_[a]]=a;return function(f){var C=v[g._categories[f]];return C+1?C:o}}return k.identity}var y=u(p),d=u(l);l&&"category"===l.type&&(t=l._categories.length);var g,x,v,m=new Array(t);for(a=0;a<t;a++)for(i=p&&"category"===p.type?p._categories.length:r(T,a),m[a]=new Array(i),s=0;s<i;s++)m[a][s]=c((g=T,x=d(a),v=y(s),x===o||v===o?o:n(g,x,v)));return m}},96288:function(ie){"use strict";ie.exports={min:"zmin",max:"zmax"}},2872:function(ie,F,e){"use strict";var S=e(3400),k=e(39032).BADNUM,o=e(1220);ie.exports=function(T,b,p,l,t,i){var r=T._length,n=b.makeCalcdata(T,l),a=p.makeCalcdata(T,t);n=o(T,b,l,n).vals,a=o(T,p,t,a).vals;var s,c,h,u,y=T.text,d=void 0!==y&&S.isArray1D(y),m=T.hovertext,g=void 0!==m&&S.isArray1D(m),x=S.distinctVals(n),v=x.vals,_=S.distinctVals(a),f=_.vals,C=[],w=f.length,E=v.length;for(s=0;s<i.length;s++)C[s]=S.init2dArray(w,E);d&&(h=S.init2dArray(w,E)),g&&(u=S.init2dArray(w,E));var P=S.init2dArray(w,E);for(s=0;s<r;s++)if(n[s]!==k&&a[s]!==k){var L=S.findBin(n[s]+x.minDiff/2,v),O=S.findBin(a[s]+_.minDiff/2,f);for(c=0;c<i.length;c++)C[c][O][L]=T[i[c]][s],P[O][L]=s;d&&(h[O][L]=y[s]),g&&(u[O][L]=m[s])}for(T["_"+l]=v,T["_"+t]=f,c=0;c<i.length;c++)T["_"+i[c]]=C[c];d&&(T._text=h),g&&(T._hovertext=u),b&&"category"===b.type&&(T["_"+l+"CategoryMap"]=v.map(function(V){return b._categories[V]})),p&&"category"===p.type&&(T["_"+t+"CategoryMap"]=f.map(function(V){return p._categories[V]})),T._after2before=P}},24480:function(ie,F,e){"use strict";var S=e(3400),k=e(51264),o=e(39096),T=e(31147),b=e(82748),p=e(27260),l=e(83328);ie.exports=function(t,i,r,n){function a(s,c){return S.coerce(t,i,l,s,c)}k(t,i,a,n)?(T(t,i,n,a),a("xhoverformat"),a("yhoverformat"),a("text"),a("hovertext"),a("hovertemplate"),o(a,n),b(t,i,a,n),a("hoverongaps"),a("connectgaps",S.isArray1D(i.z)&&!1!==i.zsmooth),p(t,i,n,a,{prefix:"",cLetter:"z"}),a("zorder")):i.visible=!1}},11240:function(ie,F,e){"use strict";var S=e(3400).maxRowLength;ie.exports=function(k){var o,T,b,p,l,t,i,r,n=[],a={},s=[],c=k[0],h=[],u=[0,0,0],y=S(k);for(T=0;T<k.length;T++)for(o=h,h=c,c=k[T+1]||[],b=0;b<y;b++)void 0===h[b]&&((t=(void 0!==h[b-1]?1:0)+(void 0!==h[b+1]?1:0)+(void 0!==o[b]?1:0)+(void 0!==c[b]?1:0))?(0===T&&t++,0===b&&t++,T===k.length-1&&t++,b===h.length-1&&t++,t<4&&(a[[T,b]]=[T,b,t]),n.push([T,b,t])):s.push([T,b]));for(;s.length;){for(i={},r=!1,l=s.length-1;l>=0;l--)(t=((a[[(T=(p=s[l])[0])-1,b=p[1]]]||u)[2]+(a[[T+1,b]]||u)[2]+(a[[T,b-1]]||u)[2]+(a[[T,b+1]]||u)[2])/20)&&(i[p]=[T,b,t],s.splice(l,1),r=!0);if(!r)throw"findEmpties iterated with no new neighbors";for(p in i)a[p]=i[p],n.push(i[p])}return n.sort(function(d,m){return m[2]-d[2]})}},55512:function(ie,F,e){"use strict";var S=e(93024),k=e(3400),o=k.isArrayOrTypedArray,T=e(54460),b=e(8932).extractOpts;ie.exports=function(p,l,t,i,r){r||(r={});var n,a,s,c,h=r.isContour,u=p.cd[0],y=u.trace,d=p.xa,m=p.ya,g=u.x,x=u.y,v=u.z,_=u.xCenter,f=u.yCenter,C=u.zmask,w=y.zhoverformat,E=g,P=x;if(!1!==p.index){try{s=Math.round(p.index[1]),c=Math.round(p.index[0])}catch{return void k.error("Error hovering on heatmap, pointNumber must be [row,col], found:",p.index)}if(s<0||s>=v[0].length||c<0||c>v.length)return}else{if(S.inbox(l-g[0],l-g[g.length-1],0)>0||S.inbox(t-x[0],t-x[x.length-1],0)>0)return;if(h){var L;for(E=[2*g[0]-g[1]],L=1;L<g.length;L++)E.push((g[L]+g[L-1])/2);for(E.push([2*g[g.length-1]-g[g.length-2]]),P=[2*x[0]-x[1]],L=1;L<x.length;L++)P.push((x[L]+x[L-1])/2);P.push([2*x[x.length-1]-x[x.length-2]])}s=Math.max(0,Math.min(E.length-2,k.findBin(l,E))),c=Math.max(0,Math.min(P.length-2,k.findBin(t,P)))}var O,z,V=d.c2p(g[s]),R=d.c2p(g[s+1]),U=m.c2p(x[c]),Z=m.c2p(x[c+1]);h?(R=V,n=(O=u.orig_x||g)[s],Z=U,a=(z=u.orig_y||x)[c]):(O=u.orig_x||_||g,z=u.orig_y||f||x,n=_?O[s]:(O[s]+O[s+1])/2,a=f?z[c]:(z[c]+z[c+1])/2,d&&"category"===d.type&&(n=g[s]),m&&"category"===m.type&&(a=x[c]),y.zsmooth&&(V=R=d.c2p(n),U=Z=m.c2p(a)));var N=v[c][s];if(C&&!C[c][s]&&(N=void 0),void 0!==N||y.hoverongaps){var G;o(u.hovertext)&&o(u.hovertext[c])?G=u.hovertext[c][s]:o(u.text)&&o(u.text[c])&&(G=u.text[c][s]);var W=b(y),re=T.tickText({type:"linear",range:[W.min,W.max],hoverformat:w,_separators:d._separators,_numFormat:d._numFormat},N,"hover").text;return[k.extendFlat(p,{index:y._after2before?y._after2before[c][s]:[c,s],distance:p.maxHoverDistance,spikeDistance:p.maxSpikeDistance,x0:V,x1:R,y0:U,y1:Z,xLabelVal:n,yLabelVal:a,zLabelVal:N,zLabel:re,text:G})]}}},81932:function(ie,F,e){"use strict";ie.exports={attributes:e(83328),supplyDefaults:e(24480),calc:e(19512),plot:e(41420),colorbar:e(96288),style:e(41648),hoverPoints:e(55512),moduleType:"trace",name:"heatmap",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},70448:function(ie,F,e){"use strict";var S=e(3400),k=[[-1,0],[1,0],[0,-1],[0,1]];function o(b){return.5-.25*Math.min(1,.5*b)}function T(b,p,l){var t,i,r,n,a,s,c,h,u,y,d,m,g,x=0;for(n=0;n<p.length;n++){for(d=b[i=(t=p[n])[0]][r=t[1]],y=0,u=0,a=0;a<4;a++)(c=b[i+(s=k[a])[0]])&&void 0!==(h=c[r+s[1]])&&(0===y?m=g=h:(m=Math.min(m,h),g=Math.max(g,h)),u++,y+=h);if(0===u)throw"iterateInterp2d order is wrong: no defined neighbors";b[i][r]=y/u,void 0===d?u<4&&(x=1):(b[i][r]=(1+l)*b[i][r]-l*d,g>m&&(x=Math.max(x,Math.abs(b[i][r]-d)/(g-m))))}return x}ie.exports=function(b,p){var l,t=1;for(T(b,p),l=0;l<p.length&&!(p[l][2]<4);l++);for(p=p.slice(l),l=0;l<100&&t>.01;l++)t=T(b,p,o(t));return t>.01&&S.log("interp2d didn't converge quickly",t),b}},39096:function(ie,F,e){"use strict";var S=e(3400);ie.exports=function(k,o){k("texttemplate");var T=S.extendFlat({},o.font,{color:"auto",size:"auto"});S.coerceFont(k,"textfont",T)}},35744:function(ie,F,e){"use strict";var S=e(24040),k=e(3400).isArrayOrTypedArray;ie.exports=function(o,T,b,p,l,t){var i,r,n,a=[],s=S.traceIs(o,"contour"),c=S.traceIs(o,"histogram"),h=S.traceIs(o,"gl2d");if(k(T)&&T.length>1&&!c&&"category"!==t.type){var u=T.length;if(!(u<=l))return T.slice(0,s?l:l+1);if(s||h)a=Array.from(T).slice(0,l);else if(1===l)a="log"===t.type?[.5*T[0],2*T[0]]:[T[0]-.5,T[0]+.5];else if("log"===t.type){for(a=[Math.pow(T[0],1.5)/Math.pow(T[1],.5)],n=1;n<u;n++)a.push(Math.sqrt(T[n-1]*T[n]));a.push(Math.pow(T[u-1],1.5)/Math.pow(T[u-2],.5))}else{for(a=[1.5*T[0]-.5*T[1]],n=1;n<u;n++)a.push(.5*(T[n-1]+T[n]));a.push(1.5*T[u-1]-.5*T[u-2])}if(u<l){var y,d=a[a.length-1];if("log"===t.type)for(y=d/a[a.length-2],n=u;n<l;n++)a.push(d*=y);else for(y=d-a[a.length-2],n=u;n<l;n++)a.push(d+=y)}}else{var m=o[t._id.charAt(0)+"calendar"];for(i=c?t.r2c(b,0,m):k(T)&&1===T.length?T[0]:void 0===b?0:("log"===t.type?t.d2c:t.r2c)(b,0,m),r=p||1,n=s||h?0:-.5;n<l;n++)a.push(i+r*n)}return a}},41420:function(ie,F,e){"use strict";var S=e(33428),k=e(49760),o=e(24040),T=e(43616),b=e(54460),p=e(3400),l=e(72736),t=e(76688),i=e(76308),r=e(8932).extractOpts,n=e(8932).makeColorScaleFuncFromTrace,a=e(9616),s=e(84284).LINE_SPACING,c=e(9188),h=e(2264).STYLE,u="heatmap-label";function y(v){return v.selectAll("g."+u)}function d(v){y(v).remove()}function m(v,_){var f=_.length-2,C=p.constrain(p.findBin(v,_),0,f),w=_[C],P=p.constrain(C+(v-w)/(_[C+1]-w)-.5,0,f),L=Math.round(P),O=Math.abs(P-L);return P&&P!==f&&O?{bin0:L,frac:O,bin1:Math.round(L+O/(P-L))}:{bin0:L,bin1:L,frac:0}}function g(v,_){var f=_.length-1,C=p.constrain(p.findBin(v,_),0,f),w=_[C],E=(v-w)/(_[C+1]-w)||0;return E<=0?{bin0:C,bin1:C,frac:0}:E<.5?{bin0:C,bin1:C+1,frac:E}:{bin0:C+1,bin1:C,frac:1-E}}function x(v,_,f){v[_]=f[0],v[_+1]=f[1],v[_+2]=f[2],v[_+3]=Math.round(255*f[3])}ie.exports=function(v,_,f,C){var w=_.xaxis,E=_.yaxis;p.makeTraceGroups(C,f,"hm").each(function(P){var L,O,z,V,R,U,Z,N,G=S.select(this),W=P[0],ae=W.trace,re=ae.xgap||0,ne=ae.ygap||0,Q=W.z,$=W.x,X=W.y,oe=W.xCenter,fe=W.yCenter,ue=o.traceIs(ae,"contour"),ge=ue?"best":ae.zsmooth,we=Q.length,Te=p.maxRowLength(Q),xe=!1,ye=!1;for(U=0;void 0===L&&U<$.length-1;)L=w.c2p($[U]),U++;for(U=$.length-1;void 0===O&&U>0;)O=w.c2p($[U]),U--;for(O<L&&(z=O,O=L,L=z,xe=!0),U=0;void 0===V&&U<X.length-1;)V=E.c2p(X[U]),U++;for(U=X.length-1;void 0===R&&U>0;)R=E.c2p(X[U]),U--;R<V&&(z=V,V=R,R=z,ye=!0),ue&&(oe=$,fe=X,$=W.xfill,X=W.yfill);var _e="default";if(ge?_e="best"===ge?"smooth":"fast":ae._islinear&&0===re&&0===ne&&c()&&(_e="fast"),"fast"!==_e){var Ie="best"===ge?0:.5;L=Math.max(-Ie*w._length,L),O=Math.min((1+Ie)*w._length,O),V=Math.max(-Ie*E._length,V),R=Math.min((1+Ie)*E._length,R)}var De,be,he=Math.round(O-L),ce=Math.round(R-V);if(L>=w._length||O<=0||V>=E._length||R<=0)return G.selectAll("image").data([]).exit().remove(),void d(G);"fast"===_e?(De=Te,be=we):(De=he,be=ce);var me=document.createElement("canvas");me.width=De,me.height=be;var Pe,Ae,Ce=me.getContext("2d",{willReadFrequently:!0}),Oe=n(ae,{noNumericCheck:!0,returnArray:!0});"fast"===_e?(Pe=xe?function(Or){return Te-1-Or}:p.identity,Ae=ye?function(Or){return we-1-Or}:p.identity):(Pe=function(Or){return p.constrain(Math.round(w.c2p($[Or])-L),0,he)},Ae=function(Or){return p.constrain(Math.round(E.c2p(X[Or])-V),0,ce)});var Ne,je,ve,Me,Le=Ae(0),Ue=[Le,Le],ze=xe?0:1,qe=ye?0:1,Ke=0,it=0,ft=0,dt=0;function kt(Or,fn){if(void 0!==Or){var gn=Oe(Or);return gn[0]=Math.round(gn[0]),gn[1]=Math.round(gn[1]),gn[2]=Math.round(gn[2]),Ke+=fn,it+=gn[0]*fn,ft+=gn[1]*fn,dt+=gn[2]*fn,gn}return[0,0,0,0]}function St(Or,fn,gn,Hn){var En=Or[gn.bin0];if(void 0===En)return kt(void 0,1);var Kn=Or[gn.bin1],tr=fn[gn.bin0],fr=fn[gn.bin1];return kt(En+gn.frac*(Kn-En||0)+Hn.frac*((tr-En||0)+gn.frac*(void 0===Kn?void 0===fr?0:void 0===tr?2*(fr-En):2*(2*fr-tr-En)/3:void 0===fr?void 0===tr?0:2*(2*En-Kn-tr)/3:void 0===tr?2*(2*fr-Kn-En)/3:fr+En-Kn-tr)))}if("default"!==_e){var Tt,lt=0;try{Tt=new Uint8Array(De*be*4)}catch{Tt=new Array(De*be*4)}if("smooth"===_e){var ot,Rt,Vt,Ht=oe||$,zt=fe||X,Qe=new Array(Ht.length),nt=new Array(zt.length),We=new Array(he),et=oe?g:m,gt=fe?g:m;for(U=0;U<Ht.length;U++)Qe[U]=Math.round(w.c2p(Ht[U])-L);for(U=0;U<zt.length;U++)nt[U]=Math.round(E.c2p(zt[U])-V);for(U=0;U<he;U++)We[U]=et(U,Qe);for(Z=0;Z<ce;Z++)for(Rt=Q[(ot=gt(Z,nt)).bin0],Vt=Q[ot.bin1],U=0;U<he;U++,lt+=4)x(Tt,lt,Me=St(Rt,Vt,We[U],ot))}else for(Z=0;Z<we;Z++)for(ve=Q[Z],Ue=Ae(Z),U=0;U<Te;U++)Me=kt(ve[U],1),x(Tt,lt=4*(Ue*Te+Pe(U)),Me);var ht=Ce.createImageData(De,be);try{ht.data.set(Tt)}catch{var Ge=ht.data,He=Ge.length;for(Z=0;Z<He;Z++)Ge[Z]=Tt[Z]}Ce.putImageData(ht,0,0)}else{var ut=Math.floor(re/2),tt=Math.floor(ne/2);for(Z=0;Z<we;Z++)if(ve=Q[Z],Ue.reverse(),Ue[qe]=Ae(Z+1),Ue[0]!==Ue[1]&&void 0!==Ue[0]&&void 0!==Ue[1])for(Ne=[je=Pe(0),je],U=0;U<Te;U++)Ne.reverse(),Ne[ze]=Pe(U+1),Ne[0]!==Ne[1]&&void 0!==Ne[0]&&void 0!==Ne[1]&&(Me=kt(ve[U],(Ne[1]-Ne[0])*(Ue[1]-Ue[0])),Ce.fillStyle="rgba("+Me.join(",")+")",Ce.fillRect(Ne[0]+ut,Ue[0]+tt,Ne[1]-Ne[0]-re,Ue[1]-Ue[0]-ne))}it=Math.round(it/Ke),ft=Math.round(ft/Ke),dt=Math.round(dt/Ke);var xt=k("rgb("+it+","+ft+","+dt+")");v._hmpixcount=(v._hmpixcount||0)+Ke,v._hmlumcount=(v._hmlumcount||0)+Ke*xt.getLuminance();var At=G.selectAll("image").data(P);At.enter().append("svg:image").attr({xmlns:a.svg,preserveAspectRatio:"none"}),At.attr({height:ce,width:he,x:L,y:V,"xlink:href":me.toDataURL("image/png")}),"fast"!==_e||ge||At.attr("style",h),d(G);var Mt=ae.texttemplate;if(Mt){var yt=r(ae),Pt={type:"linear",range:[yt.min,yt.max],_separators:w._separators,_numFormat:w._numFormat},Ct="histogram2dcontour"===ae.type,Dt="contour"===ae.type,Ut=Dt?we-1:we,Bt=Dt?1:0,qt=Dt?Te-1:Te,an=[];for(U=Dt?1:0;U<Ut;U++){var mn;if(Dt)mn=W.y[U];else if(Ct){if(0===U||U===we-1)continue;mn=W.y[U]}else if(W.yCenter)mn=W.yCenter[U];else{if(U+1===we&&void 0===W.y[U+1])continue;mn=(W.y[U]+W.y[U+1])/2}var Qt=Math.round(E.c2p(mn));if(!(0>Qt||Qt>E._length))for(Z=Bt;Z<qt;Z++){var sn;if(Dt)sn=W.x[Z];else if(Ct){if(0===Z||Z===Te-1)continue;sn=W.x[Z]}else if(W.xCenter)sn=W.xCenter[Z];else{if(Z+1===Te&&void 0===W.x[Z+1])continue;sn=(W.x[Z]+W.x[Z+1])/2}var Kt=Math.round(w.c2p(sn));if(!(0>Kt||Kt>w._length)){var qn=t({x:sn,y:mn},ae,v._fullLayout);qn.x=sn,qn.y=mn;var Fn=W.z[U][Z];void 0===Fn?(qn.z="",qn.zLabel=""):(qn.z=Fn,qn.zLabel=b.tickText(Pt,Fn,"hover").text);var Sn=W.text&&W.text[U]&&W.text[U][Z];void 0!==Sn&&!1!==Sn||(Sn=""),qn.text=Sn;var hn=p.texttemplateString(Mt,qn,v._fullLayout._d3locale,qn,ae._meta||{});if(hn){var wn=hn.split("<br>"),pn=wn.length,An=0;for(N=0;N<pn;N++)An=Math.max(An,wn[N].length);an.push({l:pn,c:An,t:hn,x:Kt,y:Qt,z:Fn})}}}}var On=ae.textfont,Dn=On.size,Vn=v._fullLayout.font.size;if(!Dn||"auto"===Dn){var Gn=1/0,Nn=1/0,ir=0,$n=0;for(N=0;N<an.length;N++){var mr=an[N];if(ir=Math.max(ir,mr.l),$n=Math.max($n,mr.c),N<an.length-1){var lr=an[N+1],vr=Math.abs(lr.x-mr.x),or=Math.abs(lr.y-mr.y);vr&&(Gn=Math.min(Gn,vr)),or&&(Nn=Math.min(Nn,or))}}isFinite(Gn)&&isFinite(Nn)?(Gn-=re,Nn-=ne,Gn/=$n,Nn/=ir,Gn/=s/2,Nn/=s,Dn=Math.min(Math.floor(Gn),Math.floor(Nn),Vn)):Dn=Vn}if(Dn<=0||!isFinite(Dn))return;y(G).data(an).enter().append("g").classed(u,1).append("text").attr("text-anchor","middle").each(function(Or){var Hn,fn=S.select(this),gn=On.color;gn&&"auto"!==gn||(gn=i.contrast(void 0===Or.z?v._fullLayout.plot_bgcolor:"rgba("+Oe(Or.z).join()+")")),fn.attr("data-notex",1).call(l.positionText,(Hn=Or,Hn.x),function(Hn){return Hn.y-Dn*(Hn.l*s/2-1)}(Or)).call(T.font,{family:On.family,size:Dn,color:gn,weight:On.weight,style:On.style,variant:On.variant,textcase:On.textcase,lineposition:On.lineposition,shadow:On.shadow}).text(Or.t).call(l.convertToTspans,v)})}})}},41648:function(ie,F,e){"use strict";var S=e(33428);ie.exports=function(k){S.select(k).selectAll(".hm image").style("opacity",function(o){return o.trace.opacity})}},82748:function(ie){"use strict";ie.exports=function(F,e,S){!1===S("zsmooth")&&(S("xgap"),S("ygap")),S("zhoverformat")}},51264:function(ie,F,e){"use strict";var S=e(38248),k=e(3400),o=e(24040);function T(b,p){var l=p(b);return"scaled"===(l?p(b+"type","array"):"scaled")&&(p(b+"0"),p("d"+b)),l}ie.exports=function(b,p,l,t,i,r){var n,a,s=l("z");if(i=i||"x",r=r||"y",void 0===s||!s.length)return 0;if(k.isArray1D(s)){n=l(i),a=l(r);var c=k.minRowLength(n),h=k.minRowLength(a);if(0===c||0===h)return 0;p._length=Math.min(c,h,s.length)}else{if(n=T(i,l),a=T(r,l),!function(u){for(var y,d=!0,m=!1,g=!1,x=0;x<u.length;x++){if(!k.isArrayOrTypedArray(y=u[x])){d=!1;break}y.length>0&&(m=!0);for(var v=0;v<y.length;v++)if(S(y[v])){g=!0;break}}return d&&m&&g}(s))return 0;l("transpose"),p._length=null}return"heatmapgl"===b.type||o.getComponentMethod("calendars","handleTraceDefaults")(b,p,[i,r],t),!0}},74512:function(ie,F,e){"use strict";for(var S=e(83328),k=e(49084),o=e(92880).extendFlat,T=e(67824).overrideAll,b=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],p={},l=0;l<b.length;l++){var t=b[l];p[t]=S[t]}p.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},o(p,k("",{cLetter:"z",autoColorDflt:!1})),ie.exports=T(p,"calc","nested")},84656:function(ie,F,e){"use strict";var S=e(67792).gl_heatmap2d,k=e(54460),o=e(43080);function T(p,l){this.scene=p,this.uid=l,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=S(p.glplot,this.options),this.heatmap._trace=this}var b=T.prototype;b.handlePick=function(p){var l=this.options,t=l.shape,i=p.pointId,r=i%t[0],n=Math.floor(i/t[0]);return{trace:this,dataCoord:p.dataCoord,traceCoord:[l.x[r],l.y[n],l.z[i]],textLabel:this.textLabels[i],name:this.name,pointIndex:[n,r],hoverinfo:this.hoverinfo}},b.update=function(p,l){var t=l[0];this.index=p.index,this.name=p.name,this.hoverinfo=p.hoverinfo;var i=t.z;this.options.z=[].concat.apply([],i),this.options.shape=[i[0].length,i.length],this.options.x=t.x,this.options.y=t.y,this.options.zsmooth=p.zsmooth;var a=function(y){for(var d=y.colorscale,m=y.zmin,g=y.zmax,x=d.length,v=new Array(x),_=new Array(4*x),f=0;f<x;f++){var C=d[f],w=o(C[1]);v[f]=m+C[0]*(g-m);for(var E=0;E<4;E++)_[4*f+E]=w[E]}return{colorLevels:v,colorValues:_}}(p);this.options.colorLevels=a.colorLevels,this.options.colorValues=a.colorValues,this.textLabels=[].concat.apply([],p.text),this.heatmap.update(this.options);var s,c,h=this.scene.xaxis,u=this.scene.yaxis;!1===p.zsmooth&&(s={ppad:t.x[1]-t.x[0]},c={ppad:t.y[1]-t.y[0]}),p._extremes[h._id]=k.findExtremes(h,t.x,s),p._extremes[u._id]=k.findExtremes(u,t.y,c)},b.dispose=function(){this.heatmap.dispose()},ie.exports=function(p,l,t){var i=new T(p,l.uid);return i.update(l,t),i}},86464:function(ie,F,e){"use strict";var S=e(3400),k=e(51264),o=e(27260),T=e(74512);ie.exports=function(b,p,l,t){function i(r,n){return S.coerce(b,p,T,r,n)}k(b,p,i,t)?(i("text"),i("zsmooth"),o(b,p,t,i,{prefix:"",cLetter:"z"})):p.visible=!1}},45536:function(ie,F,e){"use strict";["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" "),ie.exports={attributes:e(74512),supplyDefaults:e(86464),colorbar:e(96288),calc:e(19512),plot:e(84656),moduleType:"trace",name:"heatmapgl",basePlotModule:e(39952),categories:["gl","gl2d","2dMap"],meta:{}}},40196:function(ie,F,e){"use strict";var S=e(20832),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(21776).Gw,b=e(25376),p=e(11120),l=e(73316),t=e(92880).extendFlat;ie.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:k("x"),yhoverformat:k("y"),text:t({},S.text,{}),hovertext:t({},S.hovertext,{}),orientation:S.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:p("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:p("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:o({},{keys:l.eventDataKeys}),texttemplate:T({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:t({},S.textposition,{arrayOk:!1}),textfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:S.insidetextanchor,textangle:S.textangle,cliponaxis:S.cliponaxis,constraintext:S.constraintext,marker:S.marker,offsetgroup:S.offsetgroup,alignmentgroup:S.alignmentgroup,selected:S.selected,unselected:S.unselected,_deprecated:{bardir:S._deprecated.bardir},zorder:S.zorder}},2e3:function(ie){"use strict";ie.exports=function(F,e){for(var S=F.length,k=0,o=0;o<S;o++)e[o]?(F[o]/=e[o],k+=F[o]):F[o]=null;return k}},11120:function(ie){"use strict";ie.exports=function(F,e){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},16964:function(ie,F,e){"use strict";var S=e(38248);ie.exports={count:function(k,o,T){return T[k]++,1},sum:function(k,o,T,b){var p=b[o];return S(p)?(p=Number(p),T[k]+=p,p):0},avg:function(k,o,T,b,p){var l=b[o];return S(l)&&(l=Number(l),T[k]+=l,p[k]++),0},min:function(k,o,T,b){var p=b[o];if(S(p)){if(p=Number(p),!S(T[k]))return T[k]=p,p;if(T[k]>p){var l=p-T[k];return T[k]=p,l}}return 0},max:function(k,o,T,b){var p=b[o];if(S(p)){if(p=Number(p),!S(T[k]))return T[k]=p,p;if(T[k]<p){var l=p-T[k];return T[k]=p,l}}return 0}}},67712:function(ie,F,e){"use strict";var S=e(39032),k=S.ONEAVGYEAR,o=S.ONEAVGMONTH,T=S.ONEDAY,b=S.ONEHOUR,p=S.ONEMIN,l=S.ONESEC,t=e(54460).tickIncrement;function i(s,c,h,u){if(s*c<=0)return 1/0;for(var y=Math.abs(c-s),d="date"===h.type,m=r(y,d),g=0;g<10;g++){var x=r(80*m,d);if(m===x||!n(x,s,c,d,h,u))break;m=x}return m}function r(s,c){return c&&s>l?s>T?s>1.1*k?k:s>1.1*o?o:T:s>b?b:s>p?p:l:Math.pow(10,Math.floor(Math.log(s)/Math.LN10))}function n(s,c,h,u,y,d){if(u&&s>T){var m=a(c,y,d),g=a(h,y,d),x=s===k?0:1;return m[x]!==g[x]}return Math.floor(h/s)-Math.floor(c/s)>.1}function a(s,c,h){var u=c.c2d(s,k,h).split("-");return""===u[0]&&(u.unshift(),u[0]="-"+u[0]),u}ie.exports=function(s,c,h,u,y){var d,m,g=-1.1*c,x=-.1*c,v=s-x,_=h[0],f=h[1],C=Math.min(i(_+x,_+v,u,y),i(f+x,f+v,u,y)),w=Math.min(i(_+g,_+x,u,y),i(f+g,f+x,u,y));if(C>w&&w<Math.abs(f-_)/4e3?(d=C,m=!1):(d=Math.min(C,w),m=!0),"date"===u.type&&d>T){var E=d===k?1:6,P=d===k?"M12":"M1";return function(L,O){var z=u.c2d(L,k,y),V=z.indexOf("-",E);V>0&&(z=z.substr(0,V));var R=u.d2c(z,0,y);if(R<L){var U=t(R,P,!1,y);(R+U)/2<L+s&&(R=U)}return O&&m?t(R,P,!0,y):R}}return function(L,O){var z=d*Math.round(L/d);return z+d/10<L&&z+.9*d<L+s&&(z+=d),O&&m&&(z-=d),z}}},35852:function(ie,F,e){"use strict";var S=e(38248),k=e(3400),o=e(24040),T=e(54460),b=e(84664),p=e(16964),l=e(10648),t=e(2e3),i=e(67712);function r(n,a,s,c,h){var u,y,d,m,g,x,v,_=c+"bins",f=n._fullLayout,w=f._histogramBinOpts[a["_"+c+"bingroup"]],E="overlay"===f.barmode,P=function(ye){return s.r2c(ye,0,m)},L=function(ye){return s.c2r(ye,0,m)},O="date"===s.type?function(ye){return ye||0===ye?k.cleanDate(ye,null,m):null}:function(ye){return S(ye)?Number(ye):null};function z(ye,_e,Ie){_e[ye+"Found"]?(_e[ye]=O(_e[ye]),null===_e[ye]&&(_e[ye]=Ie[ye])):(x[ye]=_e[ye]=Ie[ye],k.nestedProperty(y[0],_+"."+ye).set(Ie[ye]))}if(a["_"+c+"autoBinFinished"])delete a["_"+c+"autoBinFinished"];else{y=w.traces;var V=[],R=!0,U=!1,Z=!1;for(u=0;u<y.length;u++)if((d=y[u]).visible){var N=w.dirs[u];g=d["_"+N+"pos0"]=s.makeCalcdata(d,N),V=k.concat(V,g),delete d["_"+c+"autoBinFinished"],!0===a.visible&&(R?R=!1:(delete d._autoBin,d["_"+c+"autoBinFinished"]=1),o.traceIs(d,"2dMap")&&(U=!0),"histogram2dcontour"===d.type&&(Z=!0))}var G=T.autoBin(V,s,w.nbins,U,m=y[0][c+"calendar"],w.sizeFound&&w.size),W=y[0]._autoBin={};if(x=W[w.dirs[0]]={},Z&&(w.size||(G.start=L(T.tickIncrement(P(G.start),G.size,!0,m))),void 0===w.end&&(G.end=L(T.tickIncrement(P(G.end),G.size,!1,m)))),E&&!o.traceIs(a,"2dMap")&&0===G._dataSpan&&"category"!==s.type&&"multicategory"!==s.type&&""===a.bingroup&&void 0===a.xbins){if(h)return[G,g,!0];G=function(ye,_e,Ie,De,be){var he,ce,me,Pe=ye._fullLayout,Ae=function(it,ft){for(var dt=ft.xaxis,kt=ft.yaxis,St=ft.orientation,Tt=[],lt=it._fullData,ot=0;ot<lt.length;ot++){var Rt=lt[ot];"histogram"===Rt.type&&!0===Rt.visible&&Rt.orientation===St&&Rt.xaxis===dt&&Rt.yaxis===kt&&Tt.push(Rt)}return Tt}(ye,_e),Ce=!1,Oe=1/0,Ne=[_e];for(he=0;he<Ae.length;he++)if((ce=Ae[he])===_e)Ce=!0;else if(Ce){var je=r(ye,ce,Ie,De,!0),ve=je[0],Me=je[2];ce["_"+De+"autoBinFinished"]=1,ce["_"+De+"pos0"]=je[1],Me?Ne.push(ce):Oe=Math.min(Oe,ve.size)}else me=Pe._histogramBinOpts[ce["_"+De+"bingroup"]],Oe=Math.min(Oe,me.size||ce[be].size);var Le=new Array(Ne.length);for(he=0;he<Ne.length;he++)for(var Ue=Ne[he]["_"+De+"pos0"],ze=0;ze<Ue.length;ze++)if(void 0!==Ue[ze]){Le[he]=Ue[ze];break}for(isFinite(Oe)||(Oe=k.distinctVals(Le).minDiff),he=0;he<Ne.length;he++){var qe=(ce=Ne[he])[De+"calendar"],Ke={start:Ie.c2r(Le[he]-Oe/2,0,qe),end:Ie.c2r(Le[he]+Oe/2,0,qe),size:Oe};ce._input[be]=ce[be]=Ke,(me=Pe._histogramBinOpts[ce["_"+De+"bingroup"]])&&k.extendFlat(me,Ke)}return _e[be]}(n,a,s,c,_)}(v=d.cumulative||{}).enabled&&"include"!==v.currentbin&&("decreasing"===v.direction?G.start=L(T.tickIncrement(P(G.start),G.size,!0,m)):G.end=L(T.tickIncrement(P(G.end),G.size,!1,m))),w.size=G.size,w.sizeFound||(x.size=G.size,k.nestedProperty(y[0],_+".size").set(G.size)),z("start",w,G),z("end",w,G)}g=a["_"+c+"pos0"],delete a["_"+c+"pos0"];var ae=a._input[_]||{},re=k.extendFlat({},w),ne=w.start,Q=s.r2l(ae.start),$=void 0!==Q;if((w.startFound||$)&&Q!==s.r2l(ne)){var X=$?Q:k.aggNums(Math.min,null,g),oe={type:"category"===s.type||"multicategory"===s.type?"linear":s.type,r2l:s.r2l,dtick:w.size,tick0:ne,calendar:m,range:[X,T.tickIncrement(X,w.size,!1,m)].map(s.l2r)},fe=T.tickFirst(oe);fe>s.r2l(X)&&(fe=T.tickIncrement(fe,w.size,!0,m)),re.start=s.l2r(fe),$||k.nestedProperty(a,_+".start").set(re.start)}var ue=w.end,ge=s.r2l(ae.end),we=void 0!==ge;if((w.endFound||we)&&ge!==s.r2l(ue)){var Te=we?ge:k.aggNums(Math.max,null,g);re.end=s.l2r(Te),we||k.nestedProperty(a,_+".start").set(re.end)}var xe="autobin"+c;return!1===a._input[xe]&&(a._input[_]=k.extendFlat({},a[_]||{}),delete a._input[xe],delete a[xe]),[re,g]}ie.exports={calc:function(n,a){var s,c,h,u,y=[],d=[],m="h"===a.orientation,g=T.getFromId(n,m?a.yaxis:a.xaxis),x=m?"y":"x",v={x:"y",y:"x"}[x],_=a[x+"calendar"],f=a.cumulative,C=r(n,a,g,x),w=C[0],E=C[1],P="string"==typeof w.size,L=[],O=P?L:w,z=[],V=[],R=[],U=0,Z=a.histnorm,N=a.histfunc,G=-1!==Z.indexOf("density");f.enabled&&G&&(Z=Z.replace(/ ?density$/,""),G=!1);var W,ae="max"===N||"min"===N?null:0,re=p.count,ne=l[Z],Q=!1,$=function(ce){return g.r2c(ce,0,_)};for(k.isArrayOrTypedArray(a[v])&&"count"!==N&&(W=a[v],Q="avg"===N,re=p[N]),s=$(w.start),h=$(w.end)+(s-T.tickIncrement(s,w.size,!1,_))/1e6;s<h&&y.length<1e6&&(c=T.tickIncrement(s,w.size,!1,_),y.push((s+c)/2),d.push(ae),R.push([]),L.push(s),G&&z.push(1/(c-s)),Q&&V.push(0),!(c<=s));)s=c;L.push(s),P||"date"!==g.type||(O={start:$(O.start),end:$(O.end),size:O.size}),n._fullLayout._roundFnOpts||(n._fullLayout._roundFnOpts={});var X=a["_"+x+"bingroup"],oe={leftGap:1/0,rightGap:1/0};X&&(n._fullLayout._roundFnOpts[X]||(n._fullLayout._roundFnOpts[X]=oe),oe=n._fullLayout._roundFnOpts[X]);var fe,ue=d.length,ge=!0,we=oe.leftGap,Te=oe.rightGap,xe={};for(s=0;s<E.length;s++){var ye=E[s];(u=k.findBin(ye,O))>=0&&u<ue&&(U+=re(u,s,d,W,V),ge&&R[u].length&&ye!==E[R[u][0]]&&(ge=!1),R[u].push(s),xe[s]=u,we=Math.min(we,ye-L[u]),Te=Math.min(Te,L[u+1]-ye))}oe.leftGap=we,oe.rightGap=Te,ge||(fe=function(ce,me){return function(){var Pe=n._fullLayout._roundFnOpts[X];return i(Pe.leftGap,Pe.rightGap,L,g,_)(ce,me)}}),Q&&(U=t(d,V)),ne&&ne(d,U,z),f.enabled&&function(ce,me,Pe){var Ae,Ce,Oe;function Ne(ve){Oe=ce[ve],ce[ve]/=2}function je(ve){ce[ve]=Oe+(Ce=ce[ve])/2,Oe+=Ce}if("half"===Pe)if("increasing"===me)for(Ne(0),Ae=1;Ae<ce.length;Ae++)je(Ae);else for(Ne(ce.length-1),Ae=ce.length-2;Ae>=0;Ae--)je(Ae);else if("increasing"===me){for(Ae=1;Ae<ce.length;Ae++)ce[Ae]+=ce[Ae-1];"exclude"===Pe&&(ce.unshift(0),ce.pop())}else{for(Ae=ce.length-2;Ae>=0;Ae--)ce[Ae]+=ce[Ae+1];"exclude"===Pe&&(ce.push(0),ce.shift())}}(d,f.direction,f.currentbin);var _e=Math.min(y.length,d.length),Ie=[],De=0,be=_e-1;for(s=0;s<_e;s++)if(d[s]){De=s;break}for(s=_e-1;s>=De;s--)if(d[s]){be=s;break}for(s=De;s<=be;s++)if(S(y[s])&&S(d[s])){var he={p:y[s],s:d[s],b:0};f.enabled||(he.pts=R[s],ge?he.ph0=he.ph1=R[s].length?E[R[s][0]]:y[s]:(a._computePh=!0,he.ph0=fe(L[s]),he.ph1=fe(L[s+1],!0))),Ie.push(he)}return 1===Ie.length&&(Ie[0].width1=T.tickIncrement(Ie[0].p,w.size,!1,_)-Ie[0].p),b(Ie,a),k.isArrayOrTypedArray(a.selectedpoints)&&k.tagSelected(Ie,a,xe),Ie},calcAllAutoBins:r}},73316:function(ie){"use strict";ie.exports={eventDataKeys:["binNumber"]}},80536:function(ie,F,e){"use strict";var S=e(3400),k=e(79811),o=e(24040).traceIs,T=e(20011),b=e(31508).validateCornerradius,p=S.nestedProperty,l=e(71888).getAxisGroup,t=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],i=["x","y"];ie.exports=function(r,n){var a,s,c,h,u,y,d,m=n._histogramBinOpts={},g=[],x={},v=[];function _(ae,re){return S.coerce(a._input,a,a._module.attributes,ae,re)}function f(ae){return"v"===ae.orientation?"x":"y"}function C(ae,re,ne){var Q=ae.uid+"__"+ne;re||(re=Q);var $=k.getFromTrace({_fullLayout:n},ae,ne).type,X=ae[ne+"calendar"]||"",oe=m[re],fe=!0;oe&&($===oe.axType&&X===oe.calendar?(fe=!1,oe.traces.push(ae),oe.dirs.push(ne)):(re=Q,$!==oe.axType&&S.warn(["Attempted to group the bins of trace",ae.index,"set on a","type:"+$,"axis","with bins on","type:"+oe.axType,"axis."].join(" ")),X!==oe.calendar&&S.warn(["Attempted to group the bins of trace",ae.index,"set with a",X,"calendar","with bins",oe.calendar?"on a "+oe.calendar+" calendar":"w/o a set calendar"].join(" ")))),fe&&(m[re]={traces:[ae],dirs:[ne],axType:$,calendar:ae[ne+"calendar"]||""}),ae["_"+ne+"bingroup"]=re}for(u=0;u<r.length;u++)if(o(a=r[u],"histogram")){if(g.push(a),delete a._xautoBinFinished,delete a._yautoBinFinished,"histogram"===a.type){var w=_("marker.cornerradius",n.barcornerradius);a.marker&&(a.marker.cornerradius=b(w))}o(a,"2dMap")||T(a._input,a,n,_)}var E=n._alignmentOpts||{};for(u=0;u<g.length;u++){if(c="",!o(a=g[u],"2dMap")){if(h=f(a),"group"===n.barmode&&a.alignmentgroup){var L=l(n,a[h+"axis"])+a.orientation;(E[L]||{})[a.alignmentgroup]&&(c=L)}c||"overlay"===n.barmode||(c=l(n,a.xaxis)+l(n,a.yaxis)+f(a))}c?(x[c]||(x[c]=[]),x[c].push(a)):v.push(a)}for(c in x)if(1!==(s=x[c]).length){var O=!1;for(s.length&&(a=s[0],O=_("bingroup")),c=O||c,u=0;u<s.length;u++){var z=(a=s[u])._input.bingroup;z&&z!==c&&S.warn(["Trace",a.index,"must match","within bingroup",c+".","Ignoring its bingroup:",z,"setting."].join(" ")),a.bingroup=c,C(a,c,f(a))}}else v.push(s[0]);for(u=0;u<v.length;u++){a=v[u];var V=_("bingroup");if(o(a,"2dMap"))for(d=0;d<2;d++){var R=_((h=i[d])+"bingroup",V?V+"__"+h:null);C(a,R,h)}else C(a,V,f(a))}for(c in m){var U=m[c];for(s=U.traces,y=0;y<t.length;y++){var Z,N,G=t[y],W=G.name;if("nbins"!==W||!U.sizeFound){for(u=0;u<s.length;u++){if(void 0!==p((a=s[u])._input,Z=G.aStr[h=U.dirs[u]]).get()){U[W]=_(Z),U[W+"Found"]=!0;break}(N=(a._autoBin||{})[h]||{})[W]&&p(a,Z).set(N[W])}if("start"===W||"end"===W)for(;u<s.length;u++)(a=s[u])["_"+h+"bingroup"]&&_(Z,(N=(a._autoBin||{})[h]||{})[W]);"nbins"!==W||U.sizeFound||U.nbinsFound||(a=s[0],U[W]=_(Z))}}}}},6616:function(ie,F,e){"use strict";var S=e(24040),k=e(3400),o=e(76308),T=e(31508).handleText,b=e(55592),p=e(40196);ie.exports=function(l,t,i,r){function n(x,v){return k.coerce(l,t,p,x,v)}var a=n("x"),s=n("y");n("cumulative.enabled")&&(n("cumulative.direction"),n("cumulative.currentbin")),n("text");var c=n("textposition");T(l,t,r,n,c,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),n("hovertext"),n("hovertemplate"),n("xhoverformat"),n("yhoverformat");var h=n("orientation",s&&!a?"h":"v"),u="v"===h?"x":"y",y="v"===h?"y":"x",d=a&&s?Math.min(k.minRowLength(a)&&k.minRowLength(s)):k.minRowLength(t[u]||[]);if(d){t._length=d,S.getComponentMethod("calendars","handleTraceDefaults")(l,t,["x","y"],r),t[y]&&n("histfunc"),n("histnorm"),n("autobin"+u),b(l,t,n,i,r),k.coerceSelectionMarkerOpacity(t,n);var m=(t.marker.line||{}).color,g=S.getComponentMethod("errorbars","supplyDefaults");g(l,t,m||o.defaultLine,{axis:"y"}),g(l,t,m||o.defaultLine,{axis:"x",inherit:"y"}),n("zorder")}else t.visible=!1}},84980:function(ie){"use strict";ie.exports=function(F,e,S,k,o){if(F.x="xVal"in e?e.xVal:e.x,F.y="yVal"in e?e.yVal:e.y,"zLabelVal"in e&&(F.z=e.zLabelVal),e.xa&&(F.xaxis=e.xa),e.ya&&(F.yaxis=e.ya),!(S.cumulative||{}).enabled){var T,b=Array.isArray(o)?k[0].pts[o[0]][o[1]]:k[o].pts;if(F.pointNumbers=b,F.binNumber=F.pointNumber,delete F.pointNumber,delete F.pointIndex,S._indexToPoints){T=[];for(var p=0;p<b.length;p++)T=T.concat(S._indexToPoints[b[p]])}else T=b;F.pointIndices=T}return F}},43339:function(ie,F,e){"use strict";var S=e(63400).hoverPoints,k=e(54460).hoverLabelText;ie.exports=function(o,T,b,p,l){var t=S(o,T,b,p,l);if(t){var i=(o=t[0]).cd[o.index],r=o.cd[0].trace;if(!r.cumulative.enabled){var n="h"===r.orientation?"y":"x";o[n+"Label"]=k(o[n+"a"],[i.ph0,i.ph1],r[n+"hoverformat"])}return t}}},42600:function(ie,F,e){"use strict";ie.exports={attributes:e(40196),layoutAttributes:e(39324),supplyDefaults:e(6616),crossTraceDefaults:e(80536),supplyLayoutDefaults:e(37156),calc:e(35852).calc,crossTraceCalc:e(96376).crossTraceCalc,plot:e(98184).plot,layerName:"barlayer",style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,colorbar:e(5528),hoverPoints:e(43339),selectPoints:e(45784),eventData:e(84980),moduleType:"trace",name:"histogram",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},10648:function(ie){"use strict";ie.exports={percent:function(F,e){for(var S=F.length,k=100/e,o=0;o<S;o++)F[o]*=k},probability:function(F,e){for(var S=F.length,k=0;k<S;k++)F[k]/=e},density:function(F,e,S,k){var o=F.length;k=k||1;for(var T=0;T<o;T++)F[T]*=S[T]*k},"probability density":function(F,e,S,k){var o=F.length;k&&(e/=k);for(var T=0;T<o;T++)F[T]*=S[T]/e}}},37008:function(ie,F,e){"use strict";var S=e(40196),k=e(11120),o=e(83328),T=e(45464),b=e(29736).axisHoverFormat,p=e(21776).Ks,l=e(21776).Gw,t=e(49084),i=e(92880).extendFlat;ie.exports=i({x:S.x,y:S.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:S.histnorm,histfunc:S.histfunc,nbinsx:S.nbinsx,xbins:k("x"),nbinsy:S.nbinsy,ybins:k("y"),autobinx:S.autobinx,autobiny:S.autobiny,bingroup:i({},S.bingroup,{}),xbingroup:i({},S.bingroup,{}),ybingroup:i({},S.bingroup,{}),xgap:o.xgap,ygap:o.ygap,zsmooth:o.zsmooth,xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z",1),hovertemplate:p({},{keys:"z"}),texttemplate:l({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:o.textfont,showlegend:i({},T.showlegend,{dflt:!1})},t("",{cLetter:"z",autoColorDflt:!1}))},55480:function(ie,F,e){"use strict";var S=e(3400),k=e(54460),o=e(16964),T=e(10648),b=e(2e3),p=e(67712),l=e(35852).calcAllAutoBins;function t(n,a,s,c){var h,u=new Array(n);if(c)for(h=0;h<n;h++)u[h]=1/(a[h+1]-a[h]);else{var y=1/s;for(h=0;h<n;h++)u[h]=y}return u}function i(n,a){return{start:n(a.start),end:n(a.end),size:a.size}}function r(n,a,s,c,h,u){var y,d=n.length-1,m=new Array(d),g=p(s,c,n,h,u);for(y=0;y<d;y++){var x=(a||[])[y];m[y]=void 0===x?[g(n[y]),g(n[y+1],!0)]:[x,x]}return m}ie.exports=function(n,a){var s,c,h,u,y=k.getFromId(n,a.xaxis),d=k.getFromId(n,a.yaxis),m=a.xcalendar,g=a.ycalendar,x=function(kt){return y.r2c(kt,0,m)},v=function(kt){return d.r2c(kt,0,g)},_=l(n,a,y,"x"),f=_[0],C=_[1],w=l(n,a,d,"y"),E=w[0],P=w[1],L=a._length;C.length>L&&C.splice(L,C.length-L),P.length>L&&P.splice(L,P.length-L);var O=[],z=[],V=[],R="string"==typeof f.size,U="string"==typeof E.size,Z=[],N=[],G=R?Z:f,W=U?N:E,ae=0,re=[],ne=[],Q=a.histnorm,$=a.histfunc,X=-1!==Q.indexOf("density"),oe="max"===$||"min"===$?null:0,fe=o.count,ue=T[Q],ge=!1,we=[],Te=[],xe="z"in a?a.z:"marker"in a&&Array.isArray(a.marker.color)?a.marker.color:"";xe&&"count"!==$&&(ge="avg"===$,fe=o[$]);var ye=f.size,_e=x(f.start),Ie=x(f.end)+(_e-k.tickIncrement(_e,ye,!1,m))/1e6;for(s=_e;s<Ie;s=k.tickIncrement(s,ye,!1,m))z.push(oe),Z.push(s),ge&&V.push(0);Z.push(s);var be=z.length,he=(s-_e)/be,ce=y.c2r(_e+he/2,0,m),me=E.size,Pe=v(E.start),Ae=v(E.end)+(Pe-k.tickIncrement(Pe,me,!1,g))/1e6;for(s=Pe;s<Ae;s=k.tickIncrement(s,me,!1,g)){O.push(z.slice()),N.push(s);var Ce=new Array(be);for(c=0;c<be;c++)Ce[c]=[];ne.push(Ce),ge&&re.push(V.slice())}N.push(s);var Oe=O.length,Ne=(s-Pe)/Oe,je=d.c2r(Pe+Ne/2,0,g);X&&(we=t(z.length,G,he,R),Te=t(O.length,W,Ne,U)),R||"date"!==y.type||(G=i(x,G)),U||"date"!==d.type||(W=i(v,W));var ve=!0,Me=!0,Le=new Array(be),Ue=new Array(Oe),ze=1/0,qe=1/0,Ke=1/0,it=1/0;for(s=0;s<L;s++){var ft=C[s],dt=P[s];h=S.findBin(ft,G),u=S.findBin(dt,W),h>=0&&h<be&&u>=0&&u<Oe&&(ae+=fe(h,s,O[u],xe,re[u]),ne[u][h].push(s),ve&&(void 0===Le[h]?Le[h]=ft:Le[h]!==ft&&(ve=!1)),Me&&(void 0===Ue[u]?Ue[u]=dt:Ue[u]!==dt&&(Me=!1)),ze=Math.min(ze,ft-Z[h]),qe=Math.min(qe,Z[h+1]-ft),Ke=Math.min(Ke,dt-N[u]),it=Math.min(it,N[u+1]-dt))}if(ge)for(u=0;u<Oe;u++)ae+=b(O[u],re[u]);if(ue)for(u=0;u<Oe;u++)ue(O[u],ae,we,Te[u]);return{x:C,xRanges:r(Z,ve&&Le,ze,qe,y,m),x0:ce,dx:he,y:P,yRanges:r(N,Me&&Ue,Ke,it,d,g),y0:je,dy:Ne,z:O,pts:ne}}},99784:function(ie,F,e){"use strict";var S=e(3400),k=e(56408),o=e(82748),T=e(27260),b=e(39096),p=e(37008);ie.exports=function(l,t,i,r){function n(a,s){return S.coerce(l,t,p,a,s)}k(l,t,n,r),!1!==t.visible&&(o(l,t,n,r),T(l,t,r,n,{prefix:"",cLetter:"z"}),n("hovertemplate"),b(n,r),n("xhoverformat"),n("yhoverformat"))}},59576:function(ie,F,e){"use strict";var S=e(55512),k=e(54460).hoverLabelText;ie.exports=function(o,T,b,p,l){var t=S(o,T,b,p,l);if(t){var i=(o=t[0]).index,a=o.cd[0],s=a.trace,c=a.xRanges[i[1]],h=a.yRanges[i[0]];return o.xLabel=k(o.xa,[c[0],c[1]],s.xhoverformat),o.yLabel=k(o.ya,[h[0],h[1]],s.yhoverformat),t}}},21536:function(ie,F,e){"use strict";ie.exports={attributes:e(37008),supplyDefaults:e(99784),crossTraceDefaults:e(80536),calc:e(19512),plot:e(41420),layerName:"heatmaplayer",colorbar:e(96288),style:e(41648),hoverPoints:e(59576),eventData:e(84980),moduleType:"trace",name:"histogram2d",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},56408:function(ie,F,e){"use strict";var S=e(24040),k=e(3400);ie.exports=function(o,T,b,p){var l=b("x"),t=b("y"),i=k.minRowLength(l),r=k.minRowLength(t);i&&r?(T._length=Math.min(i,r),S.getComponentMethod("calendars","handleTraceDefaults")(o,T,["x","y"],p),(b("z")||b("marker.color"))&&b("histfunc"),b("histnorm"),b("autobinx"),b("autobiny")):T.visible=!1}},81220:function(ie,F,e){"use strict";var S=e(37008),k=e(67104),o=e(49084),T=e(29736).axisHoverFormat,b=e(92880).extendFlat;ie.exports=b({x:S.x,y:S.y,z:S.z,marker:S.marker,histnorm:S.histnorm,histfunc:S.histfunc,nbinsx:S.nbinsx,xbins:S.xbins,nbinsy:S.nbinsy,ybins:S.ybins,autobinx:S.autobinx,autobiny:S.autobiny,bingroup:S.bingroup,xbingroup:S.xbingroup,ybingroup:S.ybingroup,autocontour:k.autocontour,ncontours:k.ncontours,contours:k.contours,line:{color:k.line.color,width:b({},k.line.width,{dflt:.5}),dash:k.line.dash,smoothing:k.line.smoothing,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:S.hovertemplate,texttemplate:k.texttemplate,textfont:k.textfont},o("",{cLetter:"z",editTypeOverride:"calc"}))},3704:function(ie,F,e){"use strict";var S=e(3400),k=e(56408),o=e(84952),T=e(97680),b=e(39096),p=e(81220);ie.exports=function(l,t,i,r){function n(a,s){return S.coerce(l,t,p,a,s)}k(l,t,n,r),!1!==t.visible&&(o(l,t,n,function(a){return S.coerce2(l,t,p,a)}),T(l,t,n,r),n("xhoverformat"),n("yhoverformat"),n("hovertemplate"),t.contours&&"heatmap"===t.contours.coloring&&b(n,r))}},65664:function(ie,F,e){"use strict";ie.exports={attributes:e(81220),supplyDefaults:e(3704),crossTraceDefaults:e(80536),calc:e(20688),plot:e(23676).plot,layerName:"contourlayer",style:e(52440),colorbar:e(55296),hoverPoints:e(38200),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},97376:function(ie,F,e){"use strict";var S=e(21776).Ks,k=e(21776).Gw,o=e(49084),T=e(86968).u,b=e(74996),p=e(424),l=e(40516),t=e(32984),i=e(92880).extendFlat,r=e(98192).c;ie.exports={labels:p.labels,parents:p.parents,values:p.values,branchvalues:p.branchvalues,count:p.count,level:p.level,maxdepth:p.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:l.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:i({colors:p.marker.colors,line:p.marker.line,pattern:r,editType:"calc"},o("marker",{colorAttr:"colors",anim:!1})),leaf:p.leaf,pathbar:l.pathbar,text:b.text,textinfo:p.textinfo,texttemplate:k({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),hovertext:b.hovertext,hoverinfo:p.hoverinfo,hovertemplate:S({},{keys:t.eventDataKeys}),textfont:b.textfont,insidetextfont:b.insidetextfont,outsidetextfont:l.outsidetextfont,textposition:l.textposition,sort:b.sort,root:p.root,domain:T({name:"icicle",trace:!0,editType:"calc"})}},59564:function(ie,F,e){"use strict";var S=e(7316);F.name="icicle",F.plot=function(k,o,T,b){S.plotBasePlot(F.name,k,o,T,b)},F.clean=function(k,o,T,b){S.cleanBasePlot(F.name,k,o,T,b)}},73876:function(ie,F,e){"use strict";var S=e(3776);F.r=function(k,o){return S.calc(k,o)},F.q=function(k){return S._runCrossTraceCalc("icicle",k)}},7045:function(ie,F,e){"use strict";var S=e(3400),k=e(97376),o=e(76308),T=e(86968).Q,b=e(31508).handleText,p=e(78048).TEXTPAD,l=e(74174).handleMarkerDefaults,t=e(8932),i=t.hasColorscale,r=t.handleDefaults;ie.exports=function(n,a,s,c){function h(v,_){return S.coerce(n,a,k,v,_)}var u=h("labels"),y=h("parents");if(u&&u.length&&y&&y.length){var d=h("values");h(d&&d.length?"branchvalues":"count"),h("level"),h("maxdepth"),h("tiling.orientation"),h("tiling.flip"),h("tiling.pad");var m=h("text");h("texttemplate"),a.texttemplate||h("textinfo",S.isArrayOrTypedArray(m)?"text+label":"label"),h("hovertext"),h("hovertemplate");var g=h("pathbar.visible");b(n,a,c,h,"auto",{hasPathbar:g,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),h("textposition"),l(n,a,c,h);var x=a._hasColorscale=i(n,"marker","colors")||(n.marker||{}).coloraxis;x&&r(n,a,c,h,{prefix:"marker.",cLetter:"c"}),h("leaf.opacity",x?1:.7),a._hovered={marker:{line:{width:2,color:o.contrast(c.paper_bgcolor)}}},g&&(h("pathbar.thickness",a.pathbar.textfont.size+2*p),h("pathbar.side"),h("pathbar.edgeshape")),h("sort"),h("root.color"),T(a,c,h),a._length=null}else a.visible=!1}},67880:function(ie,F,e){"use strict";var S=e(33428),k=e(3400),o=e(43616),T=e(72736),b=e(25132),p=e(47192).styleOne,l=e(32984),t=e(78176),i=e(45716),r=e(96488).formatSliceLabel,n=!1;ie.exports=function(a,s,c,h,u){var y=u.width,d=u.height,m=u.viewX,g=u.viewY,x=u.pathSlice,v=u.toMoveInsideSlice,_=u.strTransform,f=u.hasTransition,C=u.handleSlicesExit,w=u.makeUpdateSliceInterpolator,E=u.makeUpdateTextInterpolator,P=u.prevEntry,L=a._context.staticPlot,O=a._fullLayout,z=s[0].trace,V=-1!==z.textposition.indexOf("left"),R=-1!==z.textposition.indexOf("right"),U=-1!==z.textposition.indexOf("bottom"),Z=b(c,[y,d],{flipX:z.tiling.flip.indexOf("x")>-1,flipY:z.tiling.flip.indexOf("y")>-1,orientation:z.tiling.orientation,pad:{inner:z.tiling.pad},maxDepth:z._maxDepth}).descendants(),N=1/0,G=-1/0;Z.forEach(function(Q){var $=Q.depth;$>=z._maxDepth?(Q.x0=Q.x1=(Q.x0+Q.x1)/2,Q.y0=Q.y1=(Q.y0+Q.y1)/2):(N=Math.min(N,$),G=Math.max(G,$))}),h=h.data(Z,t.getPtId),z._maxVisibleLayers=isFinite(G)?G-N+1:0,h.enter().append("g").classed("slice",!0),C(h,n,{},[y,d],x),h.order();var W=null;if(f&&P){var ae=t.getPtId(P);h.each(function(Q){null===W&&t.getPtId(Q)===ae&&(W={x0:Q.x0,x1:Q.x1,y0:Q.y0,y1:Q.y1})})}var re=function(){return W||{x0:0,x1:y,y0:0,y1:d}},ne=h;return f&&(ne=ne.transition().each("end",function(){var Q=S.select(this);t.setSliceCursor(Q,a,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),ne.each(function(Q){Q._x0=m(Q.x0),Q._x1=m(Q.x1),Q._y0=g(Q.y0),Q._y1=g(Q.y1),Q._hoverX=m(Q.x1-z.tiling.pad),Q._hoverY=g(U?Q.y1-z.tiling.pad/2:Q.y0+z.tiling.pad/2);var $=S.select(this),X=k.ensureSingle($,"path","surface",function(ge){ge.style("pointer-events",L?"none":"all")});f?X.transition().attrTween("d",function(ge){var we=w(ge,n,re(),[y,d],{orientation:z.tiling.orientation,flipX:z.tiling.flip.indexOf("x")>-1,flipY:z.tiling.flip.indexOf("y")>-1});return function(Te){return x(we(Te))}}):X.attr("d",x),$.call(i,c,a,s,{styleOne:p,eventDataKeys:l.eventDataKeys,transitionTime:l.CLICK_TRANSITION_TIME,transitionEasing:l.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,a,{isTransitioning:a._transitioning}),X.call(p,Q,z,a,{hovered:!1}),Q._text=Q.x0===Q.x1||Q.y0===Q.y1?"":r(Q,c,z,s,O)||"";var oe=k.ensureSingle($,"g","slicetext"),fe=k.ensureSingle(oe,"text","",function(ge){ge.attr("data-notex",1)}),ue=k.ensureUniformFontSize(a,t.determineTextFont(z,Q,O.font));fe.text(Q._text||" ").classed("slicetext",!0).attr("text-anchor",R?"end":V?"start":"middle").call(o.font,ue).call(T.convertToTspans,a),Q.textBB=o.bBox(fe.node()),Q.transform=v(Q,{fontSize:ue.size}),Q.transform.fontSize=ue.size,f?fe.transition().attrTween("transform",function(ge){var we=E(ge,n,re(),[y,d]);return function(Te){return _(we(Te))}}):fe.attr("transform",_(Q))}),W}},29044:function(ie,F,e){"use strict";ie.exports={moduleType:"trace",name:"icicle",basePlotModule:e(59564),categories:[],animatable:!0,attributes:e(97376),layoutAttributes:e(90676),supplyDefaults:e(7045),supplyLayoutDefaults:e(4304),calc:e(73876).r,crossTraceCalc:e(73876).q,plot:e(38364),style:e(47192).style,colorbar:e(5528),meta:{}}},90676:function(ie){"use strict";ie.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},4304:function(ie,F,e){"use strict";var S=e(3400),k=e(90676);ie.exports=function(o,T){function b(p,l){return S.coerce(o,T,k,p,l)}b("iciclecolorway",T.colorway),b("extendiciclecolors")}},25132:function(ie,F,e){"use strict";var S=e(74148),k=e(83024);ie.exports=function(o,T,b){var p=b.flipX,l=b.flipY,t="h"===b.orientation,i=b.maxDepth,r=T[0],n=T[1];i&&(r=(o.height+1)*T[0]/Math.min(o.height+1,i),n=(o.height+1)*T[1]/Math.min(o.height+1,i));var a=S.partition().padding(b.pad.inner).size(t?[T[1],r]:[T[0],n])(o);return(t||p||l)&&k(a,T,{swapXY:t,flipX:p,flipY:l}),a}},38364:function(ie,F,e){"use strict";var S=e(95808),k=e(67880);ie.exports=function(o,T,b,p){return S(o,T,b,p,{type:"icicle",drawDescendants:k})}},47192:function(ie,F,e){"use strict";var S=e(33428),k=e(76308),o=e(3400),T=e(82744).resizeText,b=e(60404);function p(l,t,i,r){var a=!t.children,s=t.data.data.i,c=o.castOption(i,s,"marker.line.color")||k.defaultLine,h=o.castOption(i,s,"marker.line.width")||0;l.call(b,t,i,r).style("stroke-width",h).call(k.stroke,c).style("opacity",a?i.leaf.opacity:null)}ie.exports={style:function(l){var t=l._fullLayout._iciclelayer.selectAll(".trace");T(l,t,"icicle"),t.each(function(i){var r=S.select(this),n=i[0].trace;r.style("opacity",n.opacity),r.selectAll("path.surface").each(function(a){S.select(this).call(p,a,n,l)})})},styleOne:p}},95188:function(ie,F,e){"use strict";for(var S=e(45464),k=e(52904).zorder,o=e(21776).Ks,T=e(92880).extendFlat,b=e(47797).colormodel,p=["rgb","rgba","rgba256","hsl","hsla"],l=[],t=[],i=0;i<p.length;i++){var r=b[p[i]];l.push("For the `"+p[i]+"` colormodel, it is ["+(r.zminDflt||r.min).join(", ")+"]."),t.push("For the `"+p[i]+"` colormodel, it is ["+(r.zmaxDflt||r.max).join(", ")+"].")}ie.exports=T({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:p,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:T({},S.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:o({},{keys:["z","color","colormodel"]}),zorder:k,transforms:void 0})},93336:function(ie,F,e){"use strict";var S=e(3400),k=e(47797),o=e(38248),T=e(54460),b=e(3400).maxRowLength,p=e(18712).i;function l(i,r,n,a){return function(s){return S.constrain((s-i)*r,n,a)}}function t(i,r){return function(n){return S.constrain(n,i,r)}}ie.exports=function(i,r){var n,a;if(r._hasZ)n=r.z.length,a=b(r.z);else if(r._hasSource){var s=p(r.source);n=s.height,a=s.width}var c,h=T.getFromId(i,r.xaxis||"x"),u=T.getFromId(i,r.yaxis||"y"),y=h.d2c(r.x0)-r.dx/2,d=u.d2c(r.y0)-r.dy/2,m=[y,y+a*r.dx],g=[d,d+n*r.dy];if(h&&"log"===h.type)for(c=0;c<a;c++)m.push(y+c*r.dx);if(u&&"log"===u.type)for(c=0;c<n;c++)g.push(d+c*r.dy);return r._extremes[h._id]=T.findExtremes(h,m),r._extremes[u._id]=T.findExtremes(u,g),r._scaler=function(x){var v=k.colormodel[x.colormodel],_=(v.colormodel||x.colormodel).length;x._sArray=[];for(var f=0;f<_;f++)x._sArray.push(v.min[f]!==x.zmin[f]||v.max[f]!==x.zmax[f]?l(x.zmin[f],(v.max[f]-v.min[f])/(x.zmax[f]-x.zmin[f]),v.min[f],v.max[f]):t(v.min[f],v.max[f]));return function(C){for(var w=C.slice(0,_),E=0;E<_;E++){var P=w[E];if(!o(P))return!1;w[E]=x._sArray[E](P)}return w}}(r),[{x0:y,y0:d,z:r.z,w:a,h:n}]}},47797:function(ie){"use strict";ie.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(F){return F.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(F){return F.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(F){return F.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(F){var e=F.slice(0,3);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["\xb0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(F){var e=F.slice(0,4);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["\xb0","%","%",""]}}}},13188:function(ie,F,e){"use strict";var S=e(3400),k=e(95188),o=e(47797),T=e(81792).IMAGE_URL_PREFIX;ie.exports=function(b,p){function l(r,n){return S.coerce(b,p,k,r,n)}l("source"),p.source&&!p.source.match(T)&&delete p.source,p._hasSource=!!p.source;var t,i=l("z");p._hasZ=!(void 0===i||!i.length||!i[0]||!i[0].length),p._hasZ||p._hasSource?(l("x0"),l("y0"),l("dx"),l("dy"),p._hasZ?(l("colormodel","rgb"),l("zmin",(t=o.colormodel[p.colormodel]).zminDflt||t.min),l("zmax",t.zmaxDflt||t.max)):p._hasSource&&(p.colormodel="rgba256",p.zmin=(t=o.colormodel[p.colormodel]).zminDflt,p.zmax=t.zmaxDflt),l("zsmooth"),l("text"),l("hovertext"),l("hovertemplate"),p._length=null,l("zorder")):p.visible=!1}},79972:function(ie){"use strict";ie.exports=function(F,e){return"xVal"in e&&(F.x=e.xVal),"yVal"in e&&(F.y=e.yVal),e.xa&&(F.xaxis=e.xa),e.ya&&(F.yaxis=e.ya),F.color=e.color,F.colormodel=e.trace.colormodel,F.z||(F.z=e.color),F}},18712:function(ie,F,e){"use strict";var S=e(19480),k=e(81792).IMAGE_URL_PREFIX,o=e(33576).Buffer;F.i=function(T){var b=T.replace(k,""),p=new o(b,"base64");return S(p)}},24892:function(ie,F,e){"use strict";var S=e(93024),k=e(3400),o=k.isArrayOrTypedArray,T=e(47797);ie.exports=function(b,p,l){var t=b.cd[0],i=t.trace,r=b.xa,n=b.ya;if(!(S.inbox(p-t.x0,p-(t.x0+t.w*i.dx),0)>0||S.inbox(l-t.y0,l-(t.y0+t.h*i.dy),0)>0)){var a,s=Math.floor((p-t.x0)/i.dx),c=Math.floor(Math.abs(l-t.y0)/i.dy);if(i._hasZ?a=t.z[c][s]:i._hasSource&&(a=i._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(s,c,1,1).data),a){var h,u=t.hi||i.hoverinfo;if(u){var y=u.split("+");-1!==y.indexOf("all")&&(y=["color"]),-1!==y.indexOf("color")&&(h=!0)}var d,m=T.colormodel[i.colormodel],g=m.colormodel||i.colormodel,x=g.length,v=i._scaler(a),_=m.suffix,f=[];(i.hovertemplate||h)&&(f.push("["+[v[0]+_[0],v[1]+_[1],v[2]+_[2]].join(", ")),4===x&&f.push(", "+v[3]+_[3]),f.push("]"),f=f.join(""),b.extraText=g.toUpperCase()+": "+f),o(i.hovertext)&&o(i.hovertext[c])?d=i.hovertext[c][s]:o(i.text)&&o(i.text[c])&&(d=i.text[c][s]);var C=n.c2p(t.y0+(c+.5)*i.dy),w=t.x0+(s+.5)*i.dx,E=t.y0+(c+.5)*i.dy,P="["+a.slice(0,i.colormodel.length).join(", ")+"]";return[k.extendFlat(b,{index:[c,s],x0:r.c2p(t.x0+s*i.dx),x1:r.c2p(t.x0+(s+1)*i.dx),y0:C,y1:C,color:v,xVal:w,xLabelVal:w,yVal:E,yLabelVal:E,zLabelVal:P,text:d,hovertemplateLabels:{zLabel:P,colorLabel:f,"color[0]Label":v[0]+_[0],"color[1]Label":v[1]+_[1],"color[2]Label":v[2]+_[2],"color[3]Label":v[3]+_[3]}})]}}}},48928:function(ie,F,e){"use strict";ie.exports={attributes:e(95188),supplyDefaults:e(13188),calc:e(93336),plot:e(63715),style:e(28576),hoverPoints:e(24892),eventData:e(79972),moduleType:"trace",name:"image",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},63715:function(ie,F,e){"use strict";var S=e(33428),k=e(3400),o=k.strTranslate,T=e(9616),b=e(47797),p=e(9188),l=e(2264).STYLE;ie.exports=function(t,i,r,n){var a=i.xaxis,s=i.yaxis,c=!t._context._exportedPlot&&p();k.makeTraceGroups(n,r,"im").each(function(h){var u=S.select(this),y=h[0],d=y.trace,m=("fast"===d.zsmooth||!1===d.zsmooth&&c)&&!d._hasZ&&d._hasSource&&"linear"===a.type&&"linear"===s.type;d._realImage=m;var g,x,v,_,f,C,w=y.z,E=y.x0,P=y.y0,L=y.w,O=y.h,z=d.dx,V=d.dy;for(C=0;void 0===g&&C<L;)g=a.c2p(E+C*z),C++;for(C=L;void 0===x&&C>0;)x=a.c2p(E+C*z),C--;for(C=0;void 0===_&&C<O;)_=s.c2p(P+C*V),C++;for(C=O;void 0===f&&C>0;)f=s.c2p(P+C*V),C--;x<g&&(v=x,x=g,g=v),f<_&&(v=_,_=f,f=v),m||(g=Math.max(-.5*a._length,g),x=Math.min(1.5*a._length,x),_=Math.max(-.5*s._length,_),f=Math.min(1.5*s._length,f));var R=Math.round(x-g),U=Math.round(f-_);if(R<=0||U<=0)u.selectAll("image").data([]).exit().remove();else{var Z=u.selectAll("image").data([h]);Z.enter().append("svg:image").attr({xmlns:T.svg,preserveAspectRatio:"none"}),Z.exit().remove();var N=!1===d.zsmooth?l:"";if(m){var G=k.simpleMap(a.range,a.r2l),W=k.simpleMap(s.range,s.r2l),ae=G[1]<G[0],re=W[1]>W[0];if(ae||re){var ne=g+R/2,Q=_+U/2;N+="transform:"+o(ne+"px",Q+"px")+"scale("+(ae?-1:1)+","+(re?-1:1)+")"+o(-ne+"px",-Q+"px")+";"}}Z.attr("style",N);var $=new Promise(function(oe){if(d._hasZ)oe();else if(d._hasSource)if(d._canvas&&d._canvas.el.width===L&&d._canvas.el.height===O&&d._canvas.source===d.source)oe();else{var fe=document.createElement("canvas");fe.width=L,fe.height=O;var ue=fe.getContext("2d",{willReadFrequently:!0});d._image=d._image||new Image;var ge=d._image;ge.onload=function(){ue.drawImage(ge,0,0),d._canvas={el:fe,source:d.source},oe()},ge.setAttribute("src",d.source)}}).then(function(){var oe;if(d._hasZ)oe=X(function(ge,we){var Te=w[we][ge];return k.isTypedArray(Te)&&(Te=Array.from(Te)),Te}).toDataURL("image/png");else if(d._hasSource)if(m)oe=d.source;else{var ue=d._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,L,O).data;oe=X(function(ge,we){var Te=4*(we*L+ge);return[ue[Te],ue[Te+1],ue[Te+2],ue[Te+3]]}).toDataURL("image/png")}Z.attr({"xlink:href":oe,height:U,width:R,x:g,y:_})});t._promises.push($)}function X(oe){var fe=document.createElement("canvas");fe.width=R,fe.height=U;var ue,ge=fe.getContext("2d",{willReadFrequently:!0}),we=function(me){return k.constrain(Math.round(a.c2p(E+me*z)-g),0,R)},Te=function(me){return k.constrain(Math.round(s.c2p(P+me*V)-_),0,U)},xe=b.colormodel[d.colormodel],ye=xe.colormodel||d.colormodel,_e=xe.fmt;for(C=0;C<y.w;C++){var Ie=we(C),De=we(C+1);if(De!==Ie&&!isNaN(De)&&!isNaN(Ie))for(var be=0;be<y.h;be++){var he=Te(be),ce=Te(be+1);ce===he||isNaN(ce)||isNaN(he)||!oe(C,be)||(ue=d._scaler(oe(C,be)),ge.fillStyle=ue?ye+"("+_e(ue).join(",")+")":"rgba(0,0,0,0)",ge.fillRect(Ie,he,De-Ie,ce-he))}}return fe}})}},28576:function(ie,F,e){"use strict";var S=e(33428);ie.exports=function(k){S.select(k).selectAll(".im image").style("opacity",function(o){return o[0].trace.opacity})}},89864:function(ie,F,e){"use strict";var S=e(92880).extendFlat,k=e(92880).extendDeep,o=e(67824).overrideAll,T=e(25376),b=e(22548),p=e(86968).u,l=e(94724),t=e(31780).templatedArray,i=e(48164),r=e(29736).descriptionOnlyNumbers,n=T({editType:"plot",colorEditType:"plot"}),a={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:b.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},s={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},c=t("step",k({},a,{range:s}));ie.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:p({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:S({},n,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:r("value")},font:S({},n,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:r("value")},increasing:{symbol:{valType:"string",dflt:i.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:i.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:i.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:i.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:S({},n,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:k({},a,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:b.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:o({range:s,visible:S({},l.visible,{dflt:!0}),tickmode:l.minor.tickmode,nticks:l.nticks,tick0:l.tick0,dtick:l.dtick,tickvals:l.tickvals,ticktext:l.ticktext,ticks:S({},l.ticks,{dflt:"outside"}),ticklen:l.ticklen,tickwidth:l.tickwidth,tickcolor:l.tickcolor,ticklabelstep:l.ticklabelstep,showticklabels:l.showticklabels,labelalias:l.labelalias,tickfont:T({}),tickangle:l.tickangle,tickformat:l.tickformat,tickformatstops:l.tickformatstops,tickprefix:l.tickprefix,showtickprefix:l.showtickprefix,ticksuffix:l.ticksuffix,showticksuffix:l.showticksuffix,separatethousands:l.separatethousands,exponentformat:l.exponentformat,minexponent:l.minexponent,showexponent:l.showexponent,editType:"plot"},"plot"),steps:c,threshold:{line:{color:S({},a.line.color,{}),width:S({},a.line.width,{dflt:1}),editType:"plot"},thickness:S({},a.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},92728:function(ie,F,e){"use strict";var S=e(7316);F.name="indicator",F.plot=function(k,o,T,b){S.plotBasePlot(F.name,k,o,T,b)},F.clean=function(k,o,T,b){S.cleanBasePlot(F.name,k,o,T,b)}},79136:function(ie){"use strict";ie.exports={calc:function(F,e){var S=[],k=e.value;"number"!=typeof e._lastValue&&(e._lastValue=e.value);var o=e._lastValue,T=o;return e._hasDelta&&"number"==typeof e.delta.reference&&(T=e.delta.reference),S[0]={y:k,lastY:o,delta:k-T,relativeDelta:(k-T)/T},S}}},12096:function(ie){"use strict";ie.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},20424:function(ie,F,e){"use strict";var S=e(3400),k=e(89864),o=e(86968).Q,T=e(31780),b=e(51272),p=e(12096),l=e(26332),t=e(25404),i=e(95936),r=e(42568);function n(a,s){function c(h,u){return S.coerce(a,s,k.gauge.steps,h,u)}c("color"),c("line.color"),c("line.width"),c("range"),c("thickness")}ie.exports={supplyDefaults:function(a,s,c,h){function u(z,V){return S.coerce(a,s,k,z,V)}o(s,h,u),u("mode"),s._hasNumber=-1!==s.mode.indexOf("number"),s._hasDelta=-1!==s.mode.indexOf("delta"),s._hasGauge=-1!==s.mode.indexOf("gauge");var y=u("value");s._range=[0,"number"==typeof y?1.5*y:1];var d,m,g=new Array(2);if(s._hasNumber){u("number.valueformat");var x=S.extendFlat({},h.font);x.size=void 0,S.coerceFont(u,"number.font",x),void 0===s.number.font.size&&(s.number.font.size=p.defaultNumberFontSize,g[0]=!0),u("number.prefix"),u("number.suffix"),d=s.number.font.size}if(s._hasDelta){var v=S.extendFlat({},h.font);v.size=void 0,S.coerceFont(u,"delta.font",v),void 0===s.delta.font.size&&(s.delta.font.size=(s._hasNumber?.5:1)*(d||p.defaultNumberFontSize),g[1]=!0),u("delta.reference",s.value),u("delta.relative"),u("delta.valueformat",s.delta.relative?"2%":""),u("delta.increasing.symbol"),u("delta.increasing.color"),u("delta.decreasing.symbol"),u("delta.decreasing.color"),u("delta.position"),u("delta.prefix"),u("delta.suffix"),m=s.delta.font.size}s._scaleNumbers=(!s._hasNumber||g[0])&&(!s._hasDelta||g[1])||!1;var _,f,C,w,E=S.extendFlat({},h.font);function P(z,V){return S.coerce(_,f,k.gauge,z,V)}function L(z,V){return S.coerce(C,w,k.gauge.axis,z,V)}if(E.size=.25*(d||m||p.defaultNumberFontSize),S.coerceFont(u,"title.font",E),u("title.text"),s._hasGauge){(_=a.gauge)||(_={}),f=T.newContainer(s,"gauge"),P("shape"),(s._isBullet="bullet"===s.gauge.shape)||u("title.align","center"),(s._isAngular="angular"===s.gauge.shape)||u("align","center"),P("bgcolor",h.paper_bgcolor),P("borderwidth"),P("bordercolor"),P("bar.color"),P("bar.line.color"),P("bar.line.width"),P("bar.thickness",p.valueThickness*("bullet"===s.gauge.shape?.5:1)),b(_,f,{name:"steps",handleItemDefaults:n}),P("threshold.value"),P("threshold.thickness"),P("threshold.line.width"),P("threshold.line.color"),C={},_&&(C=_.axis||{}),w=T.newContainer(f,"axis"),L("visible"),s._range=L("range",s._range);var O={font:h.font,noAutotickangles:!0,outerTicks:!0};l(C,w,L,"linear"),r(C,w,L,"linear",O),i(C,w,L,"linear",O),t(C,w,L,O)}else u("title.align","center"),u("align","center"),s._isAngular=s._isBullet=!1;s._length=null}}},43480:function(ie,F,e){"use strict";ie.exports={moduleType:"trace",name:"indicator",basePlotModule:e(92728),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:e(89864),supplyDefaults:e(20424).supplyDefaults,calc:e(79136).calc,plot:e(97864),meta:{}}},97864:function(ie,F,e){"use strict";var S=e(33428),k=e(67756).qy,o=e(67756).Gz,T=e(3400),b=T.strScale,p=T.strTranslate,l=T.rad2deg,t=e(84284).MID_SHIFT,i=e(43616),r=e(12096),n=e(72736),a=e(54460),s=e(28336),c=e(37668),h=e(94724),u=e(76308),y={left:"start",center:"middle",right:"end"},d={left:0,center:.5,right:1},m=/[yzafpn\xb5mkMGTPEZY]/;function g(w){return w&&w.duration>0}function x(w){w.each(function(E){u.stroke(S.select(this),E.line.color)}).each(function(E){u.fill(S.select(this),E.color)}).style("stroke-width",function(E){return E.line.width})}function v(w,E,P){var L=w._fullLayout,O=T.extendFlat({type:"linear",ticks:"outside",range:P,showline:!0},E),z={type:"linear",_id:"x"+E._id},V={letter:"x",font:L.font,noAutotickangles:!0,noHover:!0,noTickson:!0};function R(U,Z){return T.coerce(O,z,h,U,Z)}return s(O,z,R,V,L),c(O,z,R,V),z}function _(w,E,P){return[Math.min(E/w.width,P/w.height),w,E+"x"+P]}function f(w,E,P,L){var O=document.createElementNS("http://www.w3.org/2000/svg","text"),z=S.select(O);return z.text(w).attr("x",0).attr("y",0).attr("text-anchor",P).attr("data-unformatted",w).call(n.convertToTspans,L).call(i.font,E),i.bBox(z.node())}function C(w,E,P,L,O,z){var V="_cache"+E;w[V]&&w[V].key===O||(w[V]={key:O,value:P});var R=T.aggNums(z,null,[w[V].value,L],2);return w[V].value=R,R}ie.exports=function(w,E,P,L){var O,z=w._fullLayout;g(P)&&L&&(O=L()),T.makeTraceGroups(z._indicatorlayer,E,"trace").each(function(V){var R,U,Z,N,G,W=V[0].trace,ae=S.select(this),re=W._hasGauge,ne=W._isAngular,Q=W._isBullet,$=W.domain,X={w:z._size.w*($.x[1]-$.x[0]),h:z._size.h*($.y[1]-$.y[0]),l:z._size.l+z._size.w*$.x[0],r:z._size.r+z._size.w*(1-$.x[1]),t:z._size.t+z._size.h*(1-$.y[1]),b:z._size.b+z._size.h*$.y[0]},oe=X.l+X.w/2,fe=X.t+X.h/2,ue=Math.min(X.w/2,X.h),ge=r.innerRadius*ue,we=W.align||"center";if(U=fe,re){if(ne&&(R=oe,U=fe+ue/2,Z=function(he){return ce=he,[(me=.9*ge)/Math.sqrt(ce.width/2*(ce.width/2)+ce.height*ce.height),ce,me];var ce,me}),Q){var Te=r.bulletPadding,xe=1-r.bulletNumberDomainSize+Te;R=X.l+(xe+(1-xe)*d[we])*X.w,Z=function(he){return _(he,(r.bulletNumberDomainSize-Te)*X.w,X.h)}}}else R=X.l+d[we]*X.w,Z=function(he){return _(he,X.w,X.h)};(function(he,ce,me,Pe){var Ae,Ce,Oe,Ne=me[0].trace,je=Pe.numbersX,ve=Pe.numbersY,Me=Ne.align||"center",Le=y[Me],Ue=Pe.transitionOpts,ze=Pe.onComplete,qe=T.ensureSingle(ce,"g","numbers"),Ke=[];Ne._hasNumber&&Ke.push("number"),Ne._hasDelta&&(Ke.push("delta"),"left"===Ne.delta.position&&Ke.reverse());var it=qe.selectAll("text").data(Ke);function ft(Vt,Ht,zt,Qe){if(!Vt.match("s")||zt>=0==Qe>=0||Ht(zt).slice(-1).match(m)||Ht(Qe).slice(-1).match(m))return Ht;var nt=Vt.slice().replace("s","f").replace(/\d+/,function(et){return parseInt(et)-1}),We=v(he,{tickformat:nt});return function(et){return Math.abs(et)<1?a.tickText(We,et).text:Ht(et)}}it.enter().append("text"),it.attr("text-anchor",function(){return Le}).attr("class",function(Vt){return Vt}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),it.exit().remove();var dt,kt=Ne.mode+Ne.align;if(Ne._hasDelta&&(dt=function(){var Vt=v(he,{tickformat:Ne.delta.valueformat},Ne._range);Vt.setScale(),a.prepTicks(Vt);var Ht=function(Ge){return a.tickText(Vt,Ge).text},zt=Ne.delta.suffix,Qe=Ne.delta.prefix,nt=function(Ge){return Ne.delta.relative?Ge.relativeDelta:Ge.delta},We=function(Ge,He){return 0===Ge||"number"!=typeof Ge||isNaN(Ge)?"-":(Ge>0?Ne.delta.increasing.symbol:Ne.delta.decreasing.symbol)+Qe+He(Ge)+zt},et=function(Ge){return Ge.delta>=0?Ne.delta.increasing.color:Ne.delta.decreasing.color};void 0===Ne._deltaLastValue&&(Ne._deltaLastValue=nt(me[0]));var gt=qe.select("text.delta");function ht(){gt.text(We(nt(me[0]),Ht)).call(u.fill,et(me[0])).call(n.convertToTspans,he)}return gt.call(i.font,Ne.delta.font).call(u.fill,et({delta:Ne._deltaLastValue})),g(Ue)?gt.transition().duration(Ue.duration).ease(Ue.easing).tween("text",function(){var Ge=S.select(this),He=nt(me[0]),ut=Ne._deltaLastValue,tt=ft(Ne.delta.valueformat,Ht,ut,He),xt=o(ut,He);return Ne._deltaLastValue=He,function(At){Ge.text(We(xt(At),tt)),Ge.call(u.fill,et({delta:xt(At)}))}}).each("end",function(){ht(),ze&&ze()}).each("interrupt",function(){ht(),ze&&ze()}):ht(),Ce=f(We(nt(me[0]),Ht),Ne.delta.font,Le,he),gt}(),kt+=Ne.delta.position+Ne.delta.font.size+Ne.delta.font.family+Ne.delta.valueformat,kt+=Ne.delta.increasing.symbol+Ne.delta.decreasing.symbol,Oe=Ce),Ne._hasNumber&&(function(){var Vt=v(he,{tickformat:Ne.number.valueformat},Ne._range);Vt.setScale(),a.prepTicks(Vt);var Ht=function(et){return a.tickText(Vt,et).text},zt=Ne.number.suffix,Qe=Ne.number.prefix,nt=qe.select("text.number");function We(){var et="number"==typeof me[0].y?Qe+Ht(me[0].y)+zt:"-";nt.text(et).call(i.font,Ne.number.font).call(n.convertToTspans,he)}g(Ue)?nt.transition().duration(Ue.duration).ease(Ue.easing).each("end",function(){We(),ze&&ze()}).each("interrupt",function(){We(),ze&&ze()}).attrTween("text",function(){var et=S.select(this),gt=o(me[0].lastY,me[0].y);Ne._lastValue=me[0].y;var ht=ft(Ne.number.valueformat,Ht,me[0].lastY,me[0].y);return function(Ge){et.text(Qe+ht(gt(Ge))+zt)}}):We(),Ae=f(Qe+Ht(me[0].y)+zt,Ne.number.font,Le,he)}(),kt+=Ne.number.font.size+Ne.number.font.family+Ne.number.valueformat+Ne.number.suffix+Ne.number.prefix,Oe=Ae),Ne._hasDelta&&Ne._hasNumber){var St,Tt,lt=[(Ae.left+Ae.right)/2,(Ae.top+Ae.bottom)/2],ot=[(Ce.left+Ce.right)/2,(Ce.top+Ce.bottom)/2],Rt=.75*Ne.delta.font.size;"left"===Ne.delta.position&&(St=C(Ne,"deltaPos",0,-1*(Ae.width*d[Ne.align]+Ce.width*(1-d[Ne.align])+Rt),kt,Math.min),Tt=lt[1]-ot[1],Oe={width:Ae.width+Ce.width+Rt,height:Math.max(Ae.height,Ce.height),left:Ce.left+St,right:Ae.right,top:Math.min(Ae.top,Ce.top+Tt),bottom:Math.max(Ae.bottom,Ce.bottom+Tt)}),"right"===Ne.delta.position&&(St=C(Ne,"deltaPos",0,Ae.width*(1-d[Ne.align])+Ce.width*d[Ne.align]+Rt,kt,Math.max),Tt=lt[1]-ot[1],Oe={width:Ae.width+Ce.width+Rt,height:Math.max(Ae.height,Ce.height),left:Ae.left,right:Ce.right+St,top:Math.min(Ae.top,Ce.top+Tt),bottom:Math.max(Ae.bottom,Ce.bottom+Tt)}),"bottom"===Ne.delta.position&&(St=null,Tt=Ce.height,Oe={width:Math.max(Ae.width,Ce.width),height:Ae.height+Ce.height,left:Math.min(Ae.left,Ce.left),right:Math.max(Ae.right,Ce.right),top:Ae.bottom-Ae.height,bottom:Ae.bottom+Ce.height}),"top"===Ne.delta.position&&(St=null,Tt=Ae.top,Oe={width:Math.max(Ae.width,Ce.width),height:Ae.height+Ce.height,left:Math.min(Ae.left,Ce.left),right:Math.max(Ae.right,Ce.right),top:Ae.bottom-Ae.height-Ce.height,bottom:Ae.bottom}),dt.attr({dx:St,dy:Tt})}(Ne._hasNumber||Ne._hasDelta)&&qe.attr("transform",function(){var Ht,Vt=Pe.numbersScaler(Oe),zt=C(Ne,"numbersScale",1,Vt[0],kt+=Vt[2],Math.min);Ne._scaleNumbers||(zt=1),Ne._numbersTop=zt*Oe.top+(Ht=Ne._isAngular?ve-zt*Oe.bottom:ve-zt*(Oe.top+Oe.bottom)/2);var Qe=Oe[Me];"center"===Me&&(Qe=(Oe.left+Oe.right)/2);var nt=je-zt*Qe;return nt=C(Ne,"numbersTranslate",0,nt,kt,Math.max),p(nt,Ht)+b(zt)})})(w,ae,V,{numbersX:R,numbersY:U,numbersScaler:Z,transitionOpts:P,onComplete:O}),re&&(N={range:W.gauge.axis.range,color:W.gauge.bgcolor,line:{color:W.gauge.bordercolor,width:0},thickness:1},G={range:W.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:W.gauge.bordercolor,width:W.gauge.borderwidth},thickness:1});var ye=ae.selectAll("g.angular").data(ne?V:[]);ye.exit().remove();var _e=ae.selectAll("g.angularaxis").data(ne?V:[]);_e.exit().remove(),ne&&function(he,ce,me,Pe){var Ae,Ce,Oe,Ne,je=me[0].trace,ve=Pe.size,Me=Pe.radius,Le=Pe.innerRadius,Ue=Pe.gaugeBg,ze=Pe.gaugeOutline,qe=[ve.l+ve.w/2,ve.t+ve.h/2+Me/2],Ke=Pe.gauge,it=Pe.layer,ft=Pe.transitionOpts,dt=Pe.onComplete,kt=Math.PI/2;function St(At){var Mt=je.gauge.axis.range[0],yt=(At-Mt)/(je.gauge.axis.range[1]-Mt)*Math.PI-kt;return yt<-kt?-kt:yt>kt?kt:yt}function Tt(At){return S.svg.arc().innerRadius((Le+Me)/2-At/2*(Me-Le)).outerRadius((Le+Me)/2+At/2*(Me-Le)).startAngle(-kt)}function lt(At){At.attr("d",function(Mt){return Tt(Mt.thickness).startAngle(St(Mt.range[0])).endAngle(St(Mt.range[1]))()})}Ke.enter().append("g").classed("angular",!0),Ke.attr("transform",p(qe[0],qe[1])),it.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),it.selectAll("g.xangularaxistick,path,text").remove(),(Ae=v(he,je.gauge.axis)).type="linear",Ae.range=je.gauge.axis.range,Ae._id="xangularaxis",Ae.ticklabeloverflow="allow",Ae.setScale();var ot=function(At){return(Ae.range[0]-At.x)/(Ae.range[1]-Ae.range[0])*Math.PI+Math.PI},Rt={},Vt=a.makeLabelFns(Ae,0).labelStandoff;Rt.xFn=function(At){var Mt=ot(At);return Math.cos(Mt)*Vt},Rt.yFn=function(At){var Mt=ot(At),yt=Math.sin(Mt)>0?.2:1;return-Math.sin(Mt)*(Vt+At.fontSize*yt)+Math.abs(Math.cos(Mt))*(At.fontSize*t)},Rt.anchorFn=function(At){var Mt=ot(At),yt=Math.cos(Mt);return Math.abs(yt)<.1?"middle":yt>0?"start":"end"},Rt.heightFn=function(At,Mt,yt){var Pt=ot(At);return-.5*(1+Math.sin(Pt))*yt};var Ht=function(At){return p(qe[0]+Me*Math.cos(At),qe[1]-Me*Math.sin(At))};Oe=function(At){return Ht(ot(At))},Ce=a.calcTicks(Ae),Ne=a.getTickSigns(Ae)[2],Ae.visible&&(a.drawTicks(he,Ae,{vals:Ce,layer:it,path:"M"+(Ne="inside"===Ae.ticks?-1:1)*((Ae.linewidth||1)/2)+",0h"+Ne*Ae.ticklen,transFn:function(At){var Mt=ot(At);return Ht(Mt)+"rotate("+-l(Mt)+")"}}),a.drawLabels(he,Ae,{vals:Ce,layer:it,transFn:Oe,labelFns:Rt}));var Qe=[Ue].concat(je.gauge.steps),nt=Ke.selectAll("g.bg-arc").data(Qe);nt.enter().append("g").classed("bg-arc",!0).append("path"),nt.select("path").call(lt).call(x),nt.exit().remove();var We=Tt(je.gauge.bar.thickness),et=Ke.selectAll("g.value-arc").data([je.gauge.bar]);et.enter().append("g").classed("value-arc",!0).append("path");var gt,ht,Ge,He=et.select("path");g(ft)?(He.transition().duration(ft.duration).ease(ft.easing).each("end",function(){dt&&dt()}).each("interrupt",function(){dt&&dt()}).attrTween("d",(gt=We,ht=St(me[0].lastY),Ge=St(me[0].y),function(){var At=k(ht,Ge);return function(Mt){return gt.endAngle(At(Mt))()}})),je._lastValue=me[0].y):He.attr("d","number"==typeof me[0].y?We.endAngle(St(me[0].y)):"M0,0Z"),He.call(x),et.exit().remove(),Qe=[];var ut=je.gauge.threshold.value;(ut||0===ut)&&Qe.push({range:[ut,ut],color:je.gauge.threshold.color,line:{color:je.gauge.threshold.line.color,width:je.gauge.threshold.line.width},thickness:je.gauge.threshold.thickness});var tt=Ke.selectAll("g.threshold-arc").data(Qe);tt.enter().append("g").classed("threshold-arc",!0).append("path"),tt.select("path").call(lt).call(x),tt.exit().remove();var xt=Ke.selectAll("g.gauge-outline").data([ze]);xt.enter().append("g").classed("gauge-outline",!0).append("path"),xt.select("path").call(lt).call(x),xt.exit().remove()}(w,0,V,{radius:ue,innerRadius:ge,gauge:ye,layer:_e,size:X,gaugeBg:N,gaugeOutline:G,transitionOpts:P,onComplete:O});var Ie=ae.selectAll("g.bullet").data(Q?V:[]);Ie.exit().remove();var De=ae.selectAll("g.bulletaxis").data(Q?V:[]);De.exit().remove(),Q&&function(he,ce,me,Pe){var Ae,Ce,Oe,Ne,je,ve=me[0].trace,Me=Pe.gauge,Le=Pe.layer,Ue=Pe.gaugeBg,ze=Pe.gaugeOutline,qe=Pe.size,Ke=ve.domain,it=Pe.transitionOpts,ft=Pe.onComplete;Me.enter().append("g").classed("bullet",!0),Me.attr("transform",p(qe.l,qe.t)),Le.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),Le.selectAll("g.xbulletaxistick,path,text").remove();var dt=qe.h,kt=ve.gauge.bar.thickness*dt,St=Ke.x[0],Tt=Ke.x[0]+(Ke.x[1]-Ke.x[0])*(ve._hasNumber||ve._hasDelta?1-r.bulletNumberDomainSize:1);function lt(nt){nt.attr("width",function(We){return Math.max(0,Ae.c2p(We.range[1])-Ae.c2p(We.range[0]))}).attr("x",function(We){return Ae.c2p(We.range[0])}).attr("y",function(We){return.5*(1-We.thickness)*dt}).attr("height",function(We){return We.thickness*dt})}(Ae=v(he,ve.gauge.axis))._id="xbulletaxis",Ae.domain=[St,Tt],Ae.setScale(),Ce=a.calcTicks(Ae),Oe=a.makeTransTickFn(Ae),Ne=a.getTickSigns(Ae)[2],je=qe.t+qe.h,Ae.visible&&(a.drawTicks(he,Ae,{vals:"inside"===Ae.ticks?a.clipEnds(Ae,Ce):Ce,layer:Le,path:a.makeTickPath(Ae,je,Ne),transFn:Oe}),a.drawLabels(he,Ae,{vals:Ce,layer:Le,transFn:Oe,labelFns:a.makeLabelFns(Ae,je)}));var ot=[Ue].concat(ve.gauge.steps),Rt=Me.selectAll("g.bg-bullet").data(ot);Rt.enter().append("g").classed("bg-bullet",!0).append("rect"),Rt.select("rect").call(lt).call(x),Rt.exit().remove();var Vt=Me.selectAll("g.value-bullet").data([ve.gauge.bar]);Vt.enter().append("g").classed("value-bullet",!0).append("rect"),Vt.select("rect").attr("height",kt).attr("y",(dt-kt)/2).call(x),g(it)?Vt.select("rect").transition().duration(it.duration).ease(it.easing).each("end",function(){ft&&ft()}).each("interrupt",function(){ft&&ft()}).attr("width",Math.max(0,Ae.c2p(Math.min(ve.gauge.axis.range[1],me[0].y)))):Vt.select("rect").attr("width","number"==typeof me[0].y?Math.max(0,Ae.c2p(Math.min(ve.gauge.axis.range[1],me[0].y))):0),Vt.exit().remove();var Ht=me.filter(function(){return ve.gauge.threshold.value||0===ve.gauge.threshold.value}),zt=Me.selectAll("g.threshold-bullet").data(Ht);zt.enter().append("g").classed("threshold-bullet",!0).append("line"),zt.select("line").attr("x1",Ae.c2p(ve.gauge.threshold.value)).attr("x2",Ae.c2p(ve.gauge.threshold.value)).attr("y1",(1-ve.gauge.threshold.thickness)/2*dt).attr("y2",(1-(1-ve.gauge.threshold.thickness)/2)*dt).call(u.stroke,ve.gauge.threshold.line.color).style("stroke-width",ve.gauge.threshold.line.width),zt.exit().remove();var Qe=Me.selectAll("g.gauge-outline").data([ze]);Qe.enter().append("g").classed("gauge-outline",!0).append("rect"),Qe.select("rect").call(lt).call(x),Qe.exit().remove()}(w,0,V,{gauge:Ie,layer:De,size:X,gaugeBg:N,gaugeOutline:G,transitionOpts:P,onComplete:O});var be=ae.selectAll("text.title").data(V);be.exit().remove(),be.enter().append("text").classed("title",!0),be.attr("text-anchor",function(){return Q?y.right:y[W.title.align]}).text(W.title.text).call(i.font,W.title.font).call(n.convertToTspans,w),be.attr("transform",function(){var he,ce=X.l+X.w*d[W.title.align],me=r.titlePadding,Pe=i.bBox(be.node());return re?(ne&&(he=W.gauge.axis.visible?i.bBox(_e.node()).top-me-Pe.bottom:X.t+X.h/2-ue/2-Pe.bottom-me),Q&&(he=U-(Pe.top+Pe.bottom)/2,ce=X.l-r.bulletPadding*X.w)):he=W._numbersTop-me-Pe.bottom,p(ce,he)})})}},50048:function(ie,F,e){"use strict";var S=e(49084),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(52948),b=e(45464),p=e(92880).extendFlat,l=e(67824).overrideAll,t=ie.exports=l(p({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:o(),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),valuehoverformat:k("value",1),showlegend:p({},b.showlegend,{dflt:!1})},S("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,lightposition:T.lightposition,lighting:T.lighting,flatshading:T.flatshading,contour:T.contour,hoverinfo:p({},b.hoverinfo)}),"calc","nested");t.flatshading.dflt=!0,t.lighting.facenormalsepsilon.dflt=0,t.x.editType=t.y.editType=t.z.editType=t.value.editType="calc+clearAxisTypes",t.transforms=void 0},62624:function(ie,F,e){"use strict";var S=e(47128),k=e(3832).processGrid,o=e(3832).filter;ie.exports=function(T,b){b._len=Math.min(b.x.length,b.y.length,b.z.length,b.value.length),b._x=o(b.x,b._len),b._y=o(b.y,b._len),b._z=o(b.z,b._len),b._value=o(b.value,b._len);var p=k(b);b._gridFill=p.fill,b._Xs=p.Xs,b._Ys=p.Ys,b._Zs=p.Zs,b._len=p.len;for(var l=1/0,t=-1/0,i=0;i<b._len;i++){var r=b._value[i];l=Math.min(l,r),t=Math.max(t,r)}b._minValues=l,b._maxValues=t,b._vMin=null==b.isomin?l:b.isomin,b._vMax=null==b.isomax?t:b.isomax,S(T,b,{vals:[b._vMin,b._vMax],containerStr:"",cLetter:"c"})}},31460:function(ie,F,e){"use strict";var S=e(67792).gl_mesh3d,k=e(33040).parseColorScale,o=e(3400).isArrayOrTypedArray,T=e(43080),b=e(8932).extractOpts,p=e(52094),l=function(a,s){for(var c=s.length-1;c>0;c--){var h=Math.min(s[c],s[c-1]),u=Math.max(s[c],s[c-1]);if(u>h&&h<a&&a<=u)return{id:c,distRatio:(u-a)/(u-h)}}return{id:0,distRatio:0}};function t(a,s,c){this.scene=a,this.uid=c,this.mesh=s,this.name="",this.data=null,this.showContour=!1}var i=t.prototype;i.handlePick=function(a){if(a.object===this.mesh){var s=a.data.index,h=this.data._meshY[s],u=this.data._meshZ[s],y=this.data._Ys.length,d=this.data._Zs.length,m=l(this.data._meshX[s],this.data._Xs).id,g=l(h,this.data._Ys).id,x=l(u,this.data._Zs).id,v=a.index=x+d*g+d*y*m;a.traceCoordinate=[this.data._meshX[v],this.data._meshY[v],this.data._meshZ[v],this.data._value[v]];var _=this.data.hovertext||this.data.text;return o(_)&&void 0!==_[v]?a.textLabel=_[v]:_&&(a.textLabel=_),!0}},i.update=function(a){var s=this.scene,c=s.fullSceneLayout;function h(d,m,g,x){return m.map(function(v){return d.d2l(v,0,x)*g})}this.data=n(a);var u={positions:p(h(c.xaxis,a._meshX,s.dataScale[0],a.xcalendar),h(c.yaxis,a._meshY,s.dataScale[1],a.ycalendar),h(c.zaxis,a._meshZ,s.dataScale[2],a.zcalendar)),cells:p(a._meshI,a._meshJ,a._meshK),lightPosition:[a.lightposition.x,a.lightposition.y,a.lightposition.z],ambient:a.lighting.ambient,diffuse:a.lighting.diffuse,specular:a.lighting.specular,roughness:a.lighting.roughness,fresnel:a.lighting.fresnel,vertexNormalsEpsilon:a.lighting.vertexnormalsepsilon,faceNormalsEpsilon:a.lighting.facenormalsepsilon,opacity:a.opacity,contourEnable:a.contour.show,contourColor:T(a.contour.color).slice(0,3),contourWidth:a.contour.width,useFacetNormals:a.flatshading},y=b(a);u.vertexIntensity=a._meshIntensity,u.vertexIntensityBounds=[y.min,y.max],u.colormap=k(a),this.mesh.update(u)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var r=["xyz","xzy","yxz","yzx","zxy","zyx"];function n(a){a._meshI=[],a._meshJ=[],a._meshK=[];var s,c,h,u,y,d,m,g=a.surface.show,x=a.spaceframe.show,v=a.surface.fill,_=a.spaceframe.fill,f=!1,C=!1,w=0,E=a._Xs,P=a._Ys,L=a._Zs,O=E.length,z=P.length,V=L.length,R=r.indexOf(a._gridFill.replace(/-/g,"").replace(/\+/g,"")),U=function(Le,Ue,ze){switch(R){case 5:return ze+V*Ue+V*z*Le;case 4:return ze+V*Le+V*O*Ue;case 3:return Ue+z*ze+z*V*Le;case 2:return Ue+z*Le+z*O*ze;case 1:return Le+O*ze+O*V*Ue;default:return Le+O*Ue+O*z*ze}},Z=a._minValues,N=a._maxValues,G=a._vMin,W=a._vMax;function ae(Le,Ue,ze){for(var qe=d.length,Ke=c;Ke<qe;Ke++)if(Le===h[Ke]&&Ue===u[Ke]&&ze===y[Ke])return Ke;return-1}function re(){c=s}function ne(){h=[],u=[],y=[],d=[],s=0,re()}function Q(Le,Ue,ze,qe){return h.push(Le),u.push(Ue),y.push(ze),d.push(qe),++s-1}function $(Le,Ue,ze){for(var qe=[],Ke=0;Ke<Le.length;Ke++)qe[Ke]=Le[Ke]*(1-ze)+ze*Ue[Ke];return qe}function X(Le){m=Le}function oe(Le,Ue){return"all"===Le||null===Le||Le.indexOf(Ue)>-1}function fe(Le,Ue){return null===Le?Ue:Le}function ue(Le,Ue,ze){re();var Ke,it,Qe,nt,We,et,gt,ht,Ge,He,ut,tt,xt,At,Mt,ft=[Ue],dt=[ze];if(m>=1)ft=[Ue],dt=[ze];else if(m>0){var kt=(nt=ze,He=$(ht=function(yt,Pt,Ct){for(var Dt=[],Ut=0;Ut<yt.length;Ut++)Dt[Ut]=(yt[Ut]+Pt[Ut]+Ct[Ut])/3;return Dt}(We=(Qe=Ue)[0],et=Qe[1],gt=Qe[2]),We,Ge=Math.sqrt(1-m)),{xyzv:[[We,et,ut=$(ht,et,Ge)],[ut,He,We],[et,gt,tt=$(ht,gt,Ge)],[tt,ut,et],[gt,We,He],[He,tt,gt]],abc:[[xt=nt[0],At=nt[1],-1],[-1,-1,xt],[At,Mt=nt[2],-1],[-1,-1,At],[Mt,xt,-1],[-1,-1,Mt]]});ft=kt.xyzv,dt=kt.abc}for(var St=0;St<ft.length;St++){Ue=ft[St],ze=dt[St];for(var Tt=[],lt=0;lt<3;lt++){var ot=Ue[lt][0],Rt=Ue[lt][1],Vt=Ue[lt][2],Ht=Ue[lt][3],zt=ze[lt]>-1?ze[lt]:ae(ot,Rt,Vt);Tt[lt]=zt>-1?zt:Q(ot,Rt,Vt,fe(Le,Ht))}Ke=Tt[1],it=Tt[2],a._meshI.push(Tt[0]),a._meshJ.push(Ke),a._meshK.push(it),++w}}function ge(Le,Ue,ze,qe){var Ke=Le[3];Ke<ze&&(Ke=ze),Ke>qe&&(Ke=qe);for(var it=(Le[3]-Ke)/(Le[3]-Ue[3]+1e-9),ft=[],dt=0;dt<4;dt++)ft[dt]=(1-it)*Le[dt]+it*Ue[dt];return ft}function we(Le,Ue,ze){return Le>=Ue&&Le<=ze}function Te(Le){var Ue=.001*(W-G);return Le>=G-Ue&&Le<=W+Ue}function xe(Le){for(var Ue=[],ze=0;ze<4;ze++){var qe=Le[ze];Ue.push([a._x[qe],a._y[qe],a._z[qe],a._value[qe]])}return Ue}var ye=3;function _e(Le,Ue,ze,qe,Ke,it){it||(it=1),ze=[-1,-1,-1];var ft=!1,dt=[we(Ue[0][3],qe,Ke),we(Ue[1][3],qe,Ke),we(Ue[2][3],qe,Ke)];if(!dt[0]&&!dt[1]&&!dt[2])return!1;var kt=function(Tt,lt,ot){return Te(lt[0][3])&&Te(lt[1][3])&&Te(lt[2][3])?(ue(Tt,lt,ot),!0):it<ye&&_e(Tt,lt,ot,G,W,++it)};if(dt[0]&&dt[1]&&dt[2])return kt(Le,Ue,ze)||ft;var St=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(Tt){if(dt[Tt[0]]&&dt[Tt[1]]&&!dt[Tt[2]]){var lt=Ue[Tt[0]],ot=Ue[Tt[1]],Rt=Ue[Tt[2]],Vt=ge(Rt,lt,qe,Ke),Ht=ge(Rt,ot,qe,Ke);ft=kt(Le,[Ht,Vt,lt],[-1,-1,ze[Tt[0]]])||ft,ft=kt(Le,[lt,ot,Ht],[ze[Tt[0]],ze[Tt[1]],-1])||ft,St=!0}}),St||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(Tt){if(dt[Tt[0]]&&!dt[Tt[1]]&&!dt[Tt[2]]){var lt=Ue[Tt[0]],Rt=Ue[Tt[2]],Vt=ge(Ue[Tt[1]],lt,qe,Ke),Ht=ge(Rt,lt,qe,Ke);ft=kt(Le,[Ht,Vt,lt],[-1,-1,ze[Tt[0]]])||ft,St=!0}}),ft}function Ie(Le,Ue,ze,qe){var kt,St,Tt,lt,Ke=!1,it=xe(Ue),ft=[we(it[0][3],ze,qe),we(it[1][3],ze,qe),we(it[2][3],ze,qe),we(it[3][3],ze,qe)];if(!(ft[0]||ft[1]||ft[2]||ft[3]))return Ke;if(ft[0]&&ft[1]&&ft[2]&&ft[3])return C&&(kt=Le,St=it,Tt=Ue,(lt=function(ot,Rt,Vt){ue(kt,[St[ot],St[Rt],St[Vt]],[Tt[ot],Tt[Rt],Tt[Vt]])})(0,1,2),lt(3,0,1),lt(2,3,0),Ke=void lt(1,2,3)||Ke),Ke;var dt=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(kt){if(ft[kt[0]]&&ft[kt[1]]&&ft[kt[2]]&&!ft[kt[3]]){var St=it[kt[0]],Tt=it[kt[1]],lt=it[kt[2]],ot=it[kt[3]];if(C)Ke=ue(Le,[St,Tt,lt],[Ue[kt[0]],Ue[kt[1]],Ue[kt[2]]])||Ke;else{var Rt=ge(ot,St,ze,qe),Vt=ge(ot,Tt,ze,qe),Ht=ge(ot,lt,ze,qe);Ke=ue(null,[Rt,Vt,Ht],[-1,-1,-1])||Ke}dt=!0}}),dt||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(kt){if(ft[kt[0]]&&ft[kt[1]]&&!ft[kt[2]]&&!ft[kt[3]]){var St=it[kt[0]],Tt=it[kt[1]],lt=it[kt[2]],ot=it[kt[3]],Rt=ge(lt,St,ze,qe),Vt=ge(lt,Tt,ze,qe),Ht=ge(ot,Tt,ze,qe),zt=ge(ot,St,ze,qe);C?(Ke=ue(Le,[St,zt,Rt],[Ue[kt[0]],-1,-1])||Ke,Ke=ue(Le,[Tt,Vt,Ht],[Ue[kt[1]],-1,-1])||Ke):(nt=[Rt,Vt,Ht,zt],We=[-1,-1,-1,-1],(et=function(gt,ht,Ge){ue(null,[nt[gt],nt[ht],nt[Ge]],[We[gt],We[ht],We[Ge]])})(0,1,2),Ke=void et(2,3,0)||Ke),dt=!0}var nt,We,et}),dt||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(kt){if(ft[kt[0]]&&!ft[kt[1]]&&!ft[kt[2]]&&!ft[kt[3]]){var St=it[kt[0]],lt=it[kt[2]],ot=it[kt[3]],Rt=ge(it[kt[1]],St,ze,qe),Vt=ge(lt,St,ze,qe),Ht=ge(ot,St,ze,qe);C?(Ke=ue(Le,[St,Rt,Vt],[Ue[kt[0]],-1,-1])||Ke,Ke=ue(Le,[St,Vt,Ht],[Ue[kt[0]],-1,-1])||Ke,Ke=ue(Le,[St,Ht,Rt],[Ue[kt[0]],-1,-1])||Ke):Ke=ue(null,[Rt,Vt,Ht],[-1,-1,-1])||Ke,dt=!0}})),Ke}function De(Le,Ue,ze,qe,Ke,it,ft,dt,kt,St,Tt){var lt=!1;return f&&(oe(Le,"A")&&(lt=Ie(null,[Ue,ze,qe,it],St,Tt)||lt),oe(Le,"B")&&(lt=Ie(null,[ze,qe,Ke,kt],St,Tt)||lt),oe(Le,"C")&&(lt=Ie(null,[ze,it,ft,kt],St,Tt)||lt),oe(Le,"D")&&(lt=Ie(null,[qe,it,dt,kt],St,Tt)||lt),oe(Le,"E")&&(lt=Ie(null,[ze,qe,it,kt],St,Tt)||lt)),C&&(lt=Ie(Le,[ze,qe,it,kt],St,Tt)||lt),lt}function be(Le,Ue,ze,qe,Ke,it,ft,dt){return[!0===dt[0]||_e(Le,xe([Ue,ze,qe]),[Ue,ze,qe],it,ft),!0===dt[1]||_e(Le,xe([qe,Ke,Ue]),[qe,Ke,Ue],it,ft)]}function he(Le,Ue,ze,qe,Ke,it,ft,dt,kt){return dt?be(Le,Ue,ze,Ke,qe,it,ft,kt):be(Le,ze,Ke,qe,Ue,it,ft,kt)}function ce(Le,Ue,ze,qe,Ke,it,ft){var dt,kt,St,Tt,lt=!1,ot=function(){lt=_e(Le,[dt,kt,St],[-1,-1,-1],Ke,it)||lt,lt=_e(Le,[St,Tt,dt],[-1,-1,-1],Ke,it)||lt},Rt=ft[0],Vt=ft[1],Ht=ft[2];return Rt&&(dt=$(xe([U(Ue,ze-0,qe-0)])[0],xe([U(Ue-1,ze-0,qe-0)])[0],Rt),kt=$(xe([U(Ue,ze-0,qe-1)])[0],xe([U(Ue-1,ze-0,qe-1)])[0],Rt),St=$(xe([U(Ue,ze-1,qe-1)])[0],xe([U(Ue-1,ze-1,qe-1)])[0],Rt),Tt=$(xe([U(Ue,ze-1,qe-0)])[0],xe([U(Ue-1,ze-1,qe-0)])[0],Rt),ot()),Vt&&(dt=$(xe([U(Ue-0,ze,qe-0)])[0],xe([U(Ue-0,ze-1,qe-0)])[0],Vt),kt=$(xe([U(Ue-0,ze,qe-1)])[0],xe([U(Ue-0,ze-1,qe-1)])[0],Vt),St=$(xe([U(Ue-1,ze,qe-1)])[0],xe([U(Ue-1,ze-1,qe-1)])[0],Vt),Tt=$(xe([U(Ue-1,ze,qe-0)])[0],xe([U(Ue-1,ze-1,qe-0)])[0],Vt),ot()),Ht&&(dt=$(xe([U(Ue-0,ze-0,qe)])[0],xe([U(Ue-0,ze-0,qe-1)])[0],Ht),kt=$(xe([U(Ue-0,ze-1,qe)])[0],xe([U(Ue-0,ze-1,qe-1)])[0],Ht),St=$(xe([U(Ue-1,ze-1,qe)])[0],xe([U(Ue-1,ze-1,qe-1)])[0],Ht),Tt=$(xe([U(Ue-1,ze-0,qe)])[0],xe([U(Ue-1,ze-0,qe-1)])[0],Ht),ot()),lt}function me(Le,Ue,ze,qe,Ke,it,ft,dt,kt,St,Tt,lt){var ot=Le;return lt?(f&&"even"===Le&&(ot=null),De(ot,Ue,ze,qe,Ke,it,ft,dt,kt,St,Tt)):(f&&"odd"===Le&&(ot=null),De(ot,kt,dt,ft,it,Ke,qe,ze,Ue,St,Tt))}function Pe(Le,Ue,ze,qe,Ke){for(var it=[],ft=0,dt=0;dt<Ue.length;dt++)for(var kt=Ue[dt],St=1;St<V;St++)for(var Tt=1;Tt<z;Tt++)it.push(he(Le,U(kt,Tt-1,St-1),U(kt,Tt-1,St),U(kt,Tt,St-1),U(kt,Tt,St),ze,qe,(kt+Tt+St)%2,Ke&&Ke[ft]?Ke[ft]:[])),ft++;return it}function Ae(Le,Ue,ze,qe,Ke){for(var it=[],ft=0,dt=0;dt<Ue.length;dt++)for(var kt=Ue[dt],St=1;St<O;St++)for(var Tt=1;Tt<V;Tt++)it.push(he(Le,U(St-1,kt,Tt-1),U(St,kt,Tt-1),U(St-1,kt,Tt),U(St,kt,Tt),ze,qe,(St+kt+Tt)%2,Ke&&Ke[ft]?Ke[ft]:[])),ft++;return it}function Ce(Le,Ue,ze,qe,Ke){for(var it=[],ft=0,dt=0;dt<Ue.length;dt++)for(var kt=Ue[dt],St=1;St<z;St++)for(var Tt=1;Tt<O;Tt++)it.push(he(Le,U(Tt-1,St-1,kt),U(Tt-1,St,kt),U(Tt,St-1,kt),U(Tt,St,kt),ze,qe,(Tt+St+kt)%2,Ke&&Ke[ft]?Ke[ft]:[])),ft++;return it}function Oe(Le,Ue,ze){for(var qe=1;qe<V;qe++)for(var Ke=1;Ke<z;Ke++)for(var it=1;it<O;it++)me(Le,U(it-1,Ke-1,qe-1),U(it-1,Ke-1,qe),U(it-1,Ke,qe-1),U(it-1,Ke,qe),U(it,Ke-1,qe-1),U(it,Ke-1,qe),U(it,Ke,qe-1),U(it,Ke,qe),Ue,ze,(it+Ke+qe)%2)}function Ne(Le,Ue,ze,qe,Ke,it){for(var ft=[],kt=0;kt<Ue.length;kt++)for(var St=Ue[kt],Tt=1;Tt<V;Tt++)for(var lt=1;lt<z;lt++)ft.push(ce(Le,St,lt,Tt,ze,qe,Ke[kt]));return ft}function je(Le,Ue,ze,qe,Ke,it){for(var ft=[],kt=0;kt<Ue.length;kt++)for(var St=Ue[kt],Tt=1;Tt<O;Tt++)for(var lt=1;lt<V;lt++)ft.push(ce(Le,Tt,St,lt,ze,qe,Ke[kt]));return ft}function ve(Le,Ue,ze,qe,Ke,it){for(var ft=[],kt=0;kt<Ue.length;kt++)for(var St=Ue[kt],Tt=1;Tt<z;Tt++)for(var lt=1;lt<O;lt++)ft.push(ce(Le,lt,Tt,St,ze,qe,Ke[kt]));return ft}function Me(Le,Ue){for(var ze=[],qe=Le;qe<Ue;qe++)ze.push(qe);return ze}return function(){ne(),function(){for(var kt=0;kt<O;kt++)for(var St=0;St<z;St++)for(var Tt=0;Tt<V;Tt++){var lt=U(kt,St,Tt);Q(a._x[lt],a._y[lt],a._z[lt],a._value[lt])}}();var Le=null;if(x&&_&&(X(_),C=!0,Oe(Le,G,W),C=!1),g&&v){X(v);for(var Ue=a.surface.pattern,ze=a.surface.count,qe=0;qe<ze;qe++){var Ke=1===ze?.5:qe/(ze-1),it=(1-Ke)*G+Ke*W,ft=Math.abs(it-Z)>Math.abs(it-N)?[Z,it]:[it,N];f=!0,Oe(Ue,ft[0],ft[1]),f=!1}}var dt=[[Math.min(G,N),Math.max(G,N)],[Math.min(Z,W),Math.max(Z,W)]];["x","y","z"].forEach(function(kt){for(var St=[],Tt=0;Tt<dt.length;Tt++){var lt=0,ot=dt[Tt][0],Rt=dt[Tt][1],Vt=a.slices[kt];if(Vt.show&&Vt.fill){X(Vt.fill);var Ht=[],zt=[],Qe=[];if(Vt.locations.length)for(var nt=0;nt<Vt.locations.length;nt++){var We=l(Vt.locations[nt],"x"===kt?E:"y"===kt?P:L);0===We.distRatio?Ht.push(We.id):We.id>0&&(zt.push(We.id),Qe.push("x"===kt?[We.distRatio,0,0]:"y"===kt?[0,We.distRatio,0]:[0,0,We.distRatio]))}else Ht=Me(1,"x"===kt?O-1:"y"===kt?z-1:V-1);zt.length>0&&(St[lt]="x"===kt?Ne(Le,zt,ot,Rt,Qe):"y"===kt?je(Le,zt,ot,Rt,Qe):ve(Le,zt,ot,Rt,Qe),lt++),Ht.length>0&&(St[lt]="x"===kt?Pe(Le,Ht,ot,Rt,St[lt]):"y"===kt?Ae(Le,Ht,ot,Rt,St[lt]):Ce(Le,Ht,ot,Rt,St[lt]),lt++)}var et=a.caps[kt];et.show&&et.fill&&(X(et.fill),St[lt]="x"===kt?Pe(Le,[0,O-1],ot,Rt,St[lt]):"y"===kt?Ae(Le,[0,z-1],ot,Rt,St[lt]):Ce(Le,[0,V-1],ot,Rt,St[lt]),lt++)}}),0===w&&ne(),a._meshX=h,a._meshY=u,a._meshZ=y,a._meshIntensity=d,a._Xs=E,a._Ys=P,a._Zs=L}(),a}ie.exports={findNearestOnAxis:l,generateIsoMeshes:n,createIsosurfaceTrace:function(a,s){var h=S({gl:a.glplot.gl}),u=new t(a,h,s.uid);return h._trace=u,u.update(s),a.glplot.add(h),u}}},70548:function(ie,F,e){"use strict";var S=e(3400),k=e(24040),o=e(50048),T=e(27260);function b(p,l,t,i,r){var n=r("isomin"),a=r("isomax");null!=a&&null!=n&&n>a&&(l.isomin=null,l.isomax=null);var s=r("x"),c=r("y"),h=r("z"),u=r("value");s&&s.length&&c&&c.length&&h&&h.length&&u&&u.length?(k.getComponentMethod("calendars","handleTraceDefaults")(p,l,["x","y","z"],i),r("valuehoverformat"),["x","y","z"].forEach(function(y){r(y+"hoverformat");var d="caps."+y;r(d+".show")&&r(d+".fill");var m="slices."+y;r(m+".show")&&(r(m+".fill"),r(m+".locations"))}),r("spaceframe.show")&&r("spaceframe.fill"),r("surface.show")&&(r("surface.count"),r("surface.fill"),r("surface.pattern")),r("contour.show")&&(r("contour.color"),r("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(y){r(y)}),T(p,l,i,r,{prefix:"",cLetter:"c"}),l._length=null):l.visible=!1}ie.exports={supplyDefaults:function(p,l,t,i){b(p,l,0,i,function(r,n){return S.coerce(p,l,o,r,n)})},supplyIsoDefaults:b}},6296:function(ie,F,e){"use strict";ie.exports={attributes:e(50048),supplyDefaults:e(70548).supplyDefaults,calc:e(62624),colorbar:{min:"cmin",max:"cmax"},plot:e(31460).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},52948:function(ie,F,e){"use strict";var S=e(49084),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(16716),b=e(45464),p=e(92880).extendFlat;ie.exports=p({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:o({editType:"calc"}),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},S("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:p({},T.contours.x.show,{}),color:T.contours.x.color,width:T.contours.x.width,editType:"calc"},lightposition:{x:p({},T.lightposition.x,{dflt:1e5}),y:p({},T.lightposition.y,{dflt:1e5}),z:p({},T.lightposition.z,{dflt:0}),editType:"calc"},lighting:p({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},T.lighting),hoverinfo:p({},b.hoverinfo,{editType:"calc"}),showlegend:p({},b.showlegend,{dflt:!1})})},1876:function(ie,F,e){"use strict";var S=e(47128);ie.exports=function(k,o){o.intensity&&S(k,o,{vals:o.intensity,containerStr:"",cLetter:"c"})}},576:function(ie,F,e){"use strict";var S=e(67792).gl_mesh3d,k=e(67792).delaunay_triangulate,o=e(67792).alpha_shape,T=e(67792).convex_hull,b=e(33040).parseColorScale,p=e(3400).isArrayOrTypedArray,l=e(43080),t=e(8932).extractOpts,i=e(52094);function r(u,y,d){this.scene=u,this.uid=d,this.mesh=y,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var n=r.prototype;function a(u){for(var y=[],d=u.length,m=0;m<d;m++)y[m]=l(u[m]);return y}function s(u,y,d,m){for(var g=[],x=y.length,v=0;v<x;v++)g[v]=u.d2l(y[v],0,m)*d;return g}function c(u){for(var y=[],d=u.length,m=0;m<d;m++)y[m]=Math.round(u[m]);return y}function h(u,y){for(var d=u.length,m=0;m<d;m++)if(u[m]<=-.5||u[m]>=y-.5)return!1;return!0}n.handlePick=function(u){if(u.object===this.mesh){var y=u.index=u.data.index;u.traceCoordinate=u.data._cellCenter?u.data.dataCoordinate:[this.data.x[y],this.data.y[y],this.data.z[y]];var d=this.data.hovertext||this.data.text;return p(d)&&void 0!==d[y]?u.textLabel=d[y]:d&&(u.textLabel=d),!0}},n.update=function(u){var y=this.scene,d=y.fullSceneLayout;this.data=u;var m,g=u.x.length,x=i(s(d.xaxis,u.x,y.dataScale[0],u.xcalendar),s(d.yaxis,u.y,y.dataScale[1],u.ycalendar),s(d.zaxis,u.z,y.dataScale[2],u.zcalendar));if(u.i&&u.j&&u.k){if(u.i.length!==u.j.length||u.j.length!==u.k.length||!h(u.i,g)||!h(u.j,g)||!h(u.k,g))return;m=i(c(u.i),c(u.j),c(u.k))}else m=0===u.alphahull?T(x):u.alphahull>0?o(u.alphahull,x):function(C,w){for(var E=["x","y","z"].indexOf(C),P=[],L=w.length,O=0;O<L;O++)P[O]=[w[O][(E+1)%3],w[O][(E+2)%3]];return k(P)}(u.delaunayaxis,x);var v={positions:x,cells:m,lightPosition:[u.lightposition.x,u.lightposition.y,u.lightposition.z],ambient:u.lighting.ambient,diffuse:u.lighting.diffuse,specular:u.lighting.specular,roughness:u.lighting.roughness,fresnel:u.lighting.fresnel,vertexNormalsEpsilon:u.lighting.vertexnormalsepsilon,faceNormalsEpsilon:u.lighting.facenormalsepsilon,opacity:u.opacity,contourEnable:u.contour.show,contourColor:l(u.contour.color).slice(0,3),contourWidth:u.contour.width,useFacetNormals:u.flatshading};if(u.intensity){var _=t(u);this.color="#fff";var f=u.intensitymode;v[f+"Intensity"]=u.intensity,v[f+"IntensityBounds"]=[_.min,_.max],v.colormap=b(u)}else u.vertexcolor?(this.color=u.vertexcolor[0],v.vertexColors=a(u.vertexcolor)):u.facecolor?(this.color=u.facecolor[0],v.cellColors=a(u.facecolor)):(this.color=u.color,v.meshColor=l(u.color));this.mesh.update(v)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ie.exports=function(u,y){var m=S({gl:u.glplot.gl}),g=new r(u,m,y.uid);return m._trace=g,g.update(y),u.glplot.add(m),g}},74212:function(ie,F,e){"use strict";var S=e(24040),k=e(3400),o=e(27260),T=e(52948);ie.exports=function(b,p,l,t){function i(n,a){return k.coerce(b,p,T,n,a)}function r(n){var a=n.map(function(s){var c=i(s);return c&&k.isArrayOrTypedArray(c)?c:null});return a.every(function(s){return s&&s.length===a[0].length})&&a}r(["x","y","z"])?(r(["i","j","k"]),(!p.i||p.j&&p.k)&&(!p.j||p.k&&p.i)&&(!p.k||p.i&&p.j)?(S.getComponentMethod("calendars","handleTraceDefaults")(b,p,["x","y","z"],t),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(n){i(n)}),i("contour.show")&&(i("contour.color"),i("contour.width")),"intensity"in b?(i("intensity"),i("intensitymode"),o(b,p,t,i,{prefix:"",cLetter:"c"})):(p.showscale=!1,"facecolor"in b?i("facecolor"):"vertexcolor"in b?i("vertexcolor"):i("color",l)),i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),p._length=null):p.visible=!1):p.visible=!1}},7404:function(ie,F,e){"use strict";ie.exports={attributes:e(52948),supplyDefaults:e(74212),calc:e(1876),colorbar:{min:"cmin",max:"cmax"},plot:e(576),moduleType:"trace",name:"mesh3d",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},20279:function(ie,F,e){"use strict";var S=e(3400).extendFlat,k=e(52904),o=e(29736).axisHoverFormat,T=e(98192).u,b=e(55756),p=e(48164),l=p.INCREASING.COLOR,t=p.DECREASING.COLOR,i=k.line;function r(n){return{line:{color:S({},i.color,{dflt:n}),width:i.width,dash:T,editType:"style"},editType:"style"}}ie.exports={xperiod:k.xperiod,xperiod0:k.xperiod0,xperiodalignment:k.xperiodalignment,xhoverformat:o("x"),yhoverformat:o("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:S({},i.width,{}),dash:S({},T,{}),editType:"style"},increasing:r(l),decreasing:r(t),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:S({},b.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}}),zorder:k.zorder}},42812:function(ie,F,e){"use strict";var S=e(3400),k=S._,o=e(54460),T=e(1220),b=e(39032).BADNUM;function p(t,i,r,n){return{o:t,h:i,l:r,c:n}}function l(t,i,r,n,a,s){for(var c=a.makeCalcdata(i,"open"),h=a.makeCalcdata(i,"high"),u=a.makeCalcdata(i,"low"),y=a.makeCalcdata(i,"close"),d=S.isArrayOrTypedArray(i.text),m=S.isArrayOrTypedArray(i.hovertext),g=!0,x=null,v=!!i.xperiodalignment,_=[],f=0;f<n.length;f++){var C=n[f],w=c[f],E=h[f],P=u[f],L=y[f];if(C!==b&&w!==b&&E!==b&&P!==b&&L!==b){L===w?null!==x&&L!==x&&(g=L>x):g=L>w,x=L;var O=s(w,E,P,L);O.pos=C,O.yc=(w+L)/2,O.i=f,O.dir=g?"increasing":"decreasing",O.x=O.pos,O.y=[P,E],v&&(O.orig_p=r[f]),d&&(O.tx=i.text[f]),m&&(O.htx=i.hovertext[f]),_.push(O)}else _.push({pos:C,empty:!0})}return i._extremes[a._id]=o.findExtremes(a,S.concat(u,h),{padded:!0}),_.length&&(_[0].t={labels:{open:k(t,"open:")+" ",high:k(t,"high:")+" ",low:k(t,"low:")+" ",close:k(t,"close:")+" "}}),_}ie.exports={calc:function(t,i){var r=o.getFromId(t,i.xaxis),n=o.getFromId(t,i.yaxis),a=function(y,d,m){var g=m._minDiff;if(!g){var x,v=y._fullData,_=[];for(g=1/0,x=0;x<v.length;x++){var f=v[x];if("ohlc"===f.type&&!0===f.visible&&f.xaxis===d._id){_.push(f);var C=d.makeCalcdata(f,"x");f._origX=C;var w=T(m,d,"x",C).vals;f._xcalc=w;var E=S.distinctVals(w).minDiff;E&&isFinite(E)&&(g=Math.min(g,E))}}for(g===1/0&&(g=1),x=0;x<_.length;x++)_[x]._minDiff=g}return g*m.tickwidth}(t,r,i),s=i._minDiff;i._minDiff=null;var c=i._origX;i._origX=null;var h=i._xcalc;i._xcalc=null;var u=l(t,i,c,h,n,p);return i._extremes[r._id]=o.findExtremes(r,h,{vpad:s/2}),u.length?(S.extendFlat(u[0].t,{wHover:s/2,tickLen:a}),u):[{t:{empty:!0}}]},calcCommon:l}},23860:function(ie,F,e){"use strict";var S=e(3400),k=e(52744),o=e(31147),T=e(20279);function b(p,l,t,i){t(i+".line.color"),t(i+".line.width",l.line.width),t(i+".line.dash",l.line.dash)}ie.exports=function(p,l,t,i){function r(n,a){return S.coerce(p,l,T,n,a)}k(p,l,r,i)?(o(p,l,i,r,{x:!0}),r("xhoverformat"),r("yhoverformat"),r("line.width"),r("line.dash"),b(0,l,r,"increasing"),b(0,l,r,"decreasing"),r("text"),r("hovertext"),r("tickwidth"),i._requestRangeslider[l.xaxis]=!0,r("zorder")):l.visible=!1}},18720:function(ie,F,e){"use strict";var S=e(54460),k=e(3400),o=e(93024),T=e(76308),b=e(3400).fillText,p=e(48164),l={increasing:p.INCREASING.SYMBOL,decreasing:p.DECREASING.SYMBOL};function t(n,a,s,c){var h,u,y=n.cd,d=n.xa,m=y[0].trace,g=y[0].t,x=m.type,v="ohlc"===x?"l":"min",_="ohlc"===x?"h":"max",f=g.bPos||0,C=function(N){return N.pos+f-a},w=g.bdPos||g.tickLen,E=g.wHover,P=Math.min(1,w/Math.abs(d.r2c(d.range[1])-d.r2c(d.range[0])));function L(N){var G=C(N);return o.inbox(G-E,G+E,h)}function O(N){var G=N[v],W=N[_];return G===W||o.inbox(G-s,W-s,h)}function z(N){return(L(N)+O(N))/2}h=n.maxHoverDistance-P,u=n.maxSpikeDistance-P;var V=o.getDistanceFunction(c,L,O,z);if(o.getClosest(y,V,n),!1===n.index)return null;var R=y[n.index];if(R.empty)return null;var U=m[R.dir],Z=U.line.color;return n.color=T.opacity(Z)&&U.line.width?Z:U.fillcolor,n.x0=d.c2p(R.pos+f-w,!0),n.x1=d.c2p(R.pos+f+w,!0),n.xLabelVal=void 0!==R.orig_p?R.orig_p:R.pos,n.spikeDistance=z(R)*u/h,n.xSpike=d.c2p(R.pos,!0),n}function i(n,a,s,c){var h=n.cd,u=n.ya,y=h[0].trace,d=h[0].t,m=[],g=t(n,a,s,c);if(!g)return[];var x=h[g.index].hi||y.hoverinfo,v=x.split("+");if("all"!==x&&-1===v.indexOf("y"))return[];for(var _=["high","open","close","low"],f={},C=0;C<_.length;C++){var w,E=_[C],P=y[E][g.index],L=u.c2p(P,!0);P in f?(w=f[P]).yLabel+="<br>"+d.labels[E]+S.hoverLabelText(u,P,y.yhoverformat):((w=k.extendFlat({},g)).y0=w.y1=L,w.yLabelVal=P,w.yLabel=d.labels[E]+S.hoverLabelText(u,P,y.yhoverformat),w.name="",m.push(w),f[P]=w)}return m}function r(n,a,s,c){var h=n.cd,u=n.ya,y=h[0].trace,d=h[0].t,m=t(n,a,s,c);if(!m)return[];var g=h[m.index],x=m.index=g.i,v=g.dir;function _(O){return d.labels[O]+S.hoverLabelText(u,y[O][x],y.yhoverformat)}var f=g.hi||y.hoverinfo,C=f.split("+"),w="all"===f,E=w||-1!==C.indexOf("y"),P=w||-1!==C.indexOf("text"),L=E?[_("open"),_("high"),_("low"),_("close")+"  "+l[v]]:[];return P&&b(g,y,L),m.extraText=L.join("<br>"),m.y0=m.y1=u.c2p(g.yc,!0),[m]}ie.exports={hoverPoints:function(n,a,s,c){return n.cd[0].trace.hoverlabel.split?i(n,a,s,c):r(n,a,s,c)},hoverSplit:i,hoverOnPoints:r}},65456:function(ie,F,e){"use strict";ie.exports={moduleType:"trace",name:"ohlc",basePlotModule:e(57952),categories:["cartesian","svg","showLegend"],meta:{},attributes:e(20279),supplyDefaults:e(23860),calc:e(42812).calc,plot:e(36664),style:e(14008),hoverPoints:e(18720).hoverPoints,selectPoints:e(97384)}},52744:function(ie,F,e){"use strict";var S=e(24040),k=e(3400);ie.exports=function(o,T,b,p){var l=b("x"),t=b("open"),i=b("high"),r=b("low"),n=b("close");if(b("hoverlabel.split"),S.getComponentMethod("calendars","handleTraceDefaults")(o,T,["x"],p),t&&i&&r&&n){var a=Math.min(t.length,i.length,r.length,n.length);return l&&(a=Math.min(a,k.minRowLength(l))),T._length=a,a}}},36664:function(ie,F,e){"use strict";var S=e(33428),k=e(3400);ie.exports=function(o,T,b,p){var l=T.yaxis,t=T.xaxis,i=!!t.rangebreaks;k.makeTraceGroups(p,b,"trace ohlc").each(function(r){var n=S.select(this),a=r[0],s=a.t;if(!0!==a.trace.visible||s.empty)n.remove();else{var c=s.tickLen,h=n.selectAll("path").data(k.identity);h.enter().append("path"),h.exit().remove(),h.attr("d",function(u){if(u.empty)return"M0,0Z";var y=t.c2p(u.pos-c,!0),d=t.c2p(u.pos+c,!0),m=i?(y+d)/2:t.c2p(u.pos,!0);return"M"+y+","+l.c2p(u.o,!0)+"H"+m+"M"+m+","+l.c2p(u.h,!0)+"V"+l.c2p(u.l,!0)+"M"+d+","+l.c2p(u.c,!0)+"H"+m})}})}},97384:function(ie){"use strict";ie.exports=function(F,e){var S,k=F.cd,o=F.xaxis,T=F.yaxis,b=[],p=k[0].t.bPos||0;if(!1===e)for(S=0;S<k.length;S++)k[S].selected=0;else for(S=0;S<k.length;S++){var l=k[S];e.contains([o.c2p(l.pos+p),T.c2p(l.yc)],null,l.i,F)?(b.push({pointNumber:l.i,x:o.c2d(l.pos),y:T.c2d(l.yc)}),l.selected=1):l.selected=0}return b}},14008:function(ie,F,e){"use strict";var S=e(33428),k=e(43616),o=e(76308);ie.exports=function(T,b,p){var l=p||S.select(T).selectAll("g.ohlclayer").selectAll("g.trace");l.style("opacity",function(t){return t[0].trace.opacity}),l.each(function(t){var i=t[0].trace;S.select(this).selectAll("path").each(function(r){if(!r.empty){var n=i[r.dir].line;S.select(this).style("fill","none").call(o.stroke,n.color).call(k.dashLine,n.dash,n.width).style("opacity",i.selectedpoints&&!r.selected?.3:1)}})})}},72140:function(ie,F,e){"use strict";var S=e(92880).extendFlat,k=e(45464),o=e(25376),T=e(49084),b=e(21776).Ks,p=e(86968).u,l=S({editType:"calc"},T("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:b({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});ie.exports={domain:p({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:S({},k.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:b({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:o({editType:"calc"}),tickfont:o({autoShadowDflt:!0,editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:l,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},91800:function(ie,F,e){"use strict";var S=e(84888)._M,k=e(60268),o="parcats";F.name=o,F.plot=function(T,b,p,l){var t=S(T.calcdata,o);t.length&&k(T,t[0],p,l)},F.clean=function(T,b,p,l){var t=l._has&&l._has("parcats"),i=b._has&&b._has("parcats");t&&!i&&l._paperdiv.selectAll(".parcats").remove()}},69136:function(ie,F,e){"use strict";var S=e(71688).wrap,k=e(94288).hasColorscale,o=e(47128),T=e(68944),b=e(43616),p=e(3400),l=e(38248);function t(n,a,s){n.valueInds.push(a),n.count+=s}function i(n,a,s){return{categoryInds:n,color:a,rawColor:s,valueInds:[],count:0}}function r(n,a,s){n.valueInds.push(a),n.count+=s}ie.exports=function(n,a){var s=p.filterVisible(a.dimensions);if(0===s.length)return[];var c,h,u,y=s.map(function(W){var ae;if("trace"===W.categoryorder)ae=null;else if("array"===W.categoryorder)ae=W.categoryarray;else{ae=T(W.values);for(var re=!0,ne=0;ne<ae.length;ne++)if(!l(ae[ne])){re=!1;break}ae.sort(re?p.sorterAsc:void 0),"category descending"===W.categoryorder&&(ae=ae.reverse())}return function(Q,$){$=null==$?[]:$.map(function(xe){return xe});var X={},oe={},fe=[];$.forEach(function(xe,ye){X[xe]=0,oe[xe]=ye});for(var ue=0;ue<Q.length;ue++){var ge,we=Q[ue];void 0===X[we]?(X[we]=1,ge=$.push(we)-1,oe[we]=ge):(X[we]++,ge=oe[we]),fe.push(ge)}var Te=$.map(function(xe){return X[xe]});return{uniqueValues:$,uniqueCounts:Te,inds:fe}}(W.values,ae)});c=p.isArrayOrTypedArray(a.counts)?a.counts:[a.counts],function(W){var ae;if(function(ne){for(var Q=new Array(ne.length),$=0;$<ne.length;$++){if(ne[$]<0||ne[$]>=ne.length||void 0!==Q[ne[$]])return!1;Q[ne[$]]=!0}return!0}(W.map(function(ne){return ne.displayindex})))for(ae=0;ae<W.length;ae++)W[ae]._displayindex=W[ae].displayindex;else for(ae=0;ae<W.length;ae++)W[ae]._displayindex=ae}(s),s.forEach(function(W,ae){!function(re,ne){re._categoryarray=ne.uniqueValues,re._ticktext=null==re.ticktext?[]:re.ticktext.slice();for(var Q=re._ticktext.length;Q<ne.uniqueValues.length;Q++)re._ticktext.push(ne.uniqueValues[Q])}(W,y[ae])});var d,m=a.line;m?(k(a,"line")&&o(n,a,{vals:a.line.color,containerStr:"line",cLetter:"c"}),d=b.tryColorscale(m)):d=p.identity;var g,x,v,_,f,C=s[0].values.length,w={},E=y.map(function(W){return W.inds});for(u=0,g=0;g<C;g++){var P=[];for(x=0;x<E.length;x++)P.push(E[x][g]);u+=h=c[g%c.length];var L=(v=g,_=void 0,f=void 0,p.isArrayOrTypedArray(m.color)?f=_=m.color[v%m.color.length]:_=m.color,{color:d(_),rawColor:f}),O=P+"-"+L.rawColor;void 0===w[O]&&(w[O]=i(P,L.color,L.rawColor)),r(w[O],g,h)}var z,W,ae,re,ne,V=s.map(function(W,ae){return{dimensionInd:ae,containerInd:W._index,displayInd:W._displayindex,dimensionLabel:W.label,count:u,categories:[],dragX:null}});for(g=0;g<C;g++)for(h=c[g%c.length],x=0;x<V.length;x++){var R=V[x].containerInd,U=y[x].inds[g],Z=V[x].categories;void 0===Z[U]&&(Z[U]={dimensionInd:x,categoryInd:z=U,categoryValue:a.dimensions[R]._categoryarray[U],displayInd:z,categoryLabel:a.dimensions[R]._ticktext[U],valueInds:[],count:0,dragY:null}),t(Z[U],g,h)}return S((ae=w,re=u,ne=(W=V).map(function(Q){return Q.categories.length}).reduce(function(Q,$){return Math.max(Q,$)}),{dimensions:W,paths:ae,trace:void 0,maxCats:ne,count:re}))}},76671:function(ie,F,e){"use strict";var S=e(3400),k=e(94288).hasColorscale,o=e(27260),T=e(86968).Q,b=e(51272),p=e(72140),l=e(26284),t=e(38116).isTypedArraySpec;function i(r,n){function a(m,g){return S.coerce(r,n,p.dimensions,m,g)}var s=a("values"),c=a("visible");if(s&&s.length||(c=n.visible=!1),c){a("label"),a("displayindex",n._index);var h,u=r.categoryarray,y=S.isArrayOrTypedArray(u)&&u.length>0||t(u);y&&(h="array");var d=a("categoryorder",h);"array"===d?(a("categoryarray"),a("ticktext")):(delete r.categoryarray,delete r.ticktext),y||"array"!==d||(n.categoryorder="trace")}}ie.exports=function(r,n,a,s){function c(d,m){return S.coerce(r,n,p,d,m)}var h=b(r,n,{name:"dimensions",handleItemDefaults:i}),u=function(d,m,g,x,v){v("line.shape"),v("line.hovertemplate");var _=v("line.color",x.colorway[0]);if(k(d,"line")&&S.isArrayOrTypedArray(_)){if(_.length)return v("line.colorscale"),o(d,m,x,v,{prefix:"line.",cLetter:"c"}),_.length;m.line.color=g}return 1/0}(r,n,a,s,c);T(n,s,c),Array.isArray(h)&&h.length||(n.visible=!1),l(n,h,"values",u),c("hoveron"),c("hovertemplate"),c("arrangement"),c("bundlecolors"),c("sortpaths"),c("counts");var y=s.font;S.coerceFont(c,"labelfont",y,{overrideDflt:{size:Math.round(y.size)}}),S.coerceFont(c,"tickfont",y,{autoShadowDflt:!0,overrideDflt:{size:Math.round(y.size/1.2)}})}},22020:function(ie,F,e){"use strict";ie.exports={attributes:e(72140),supplyDefaults:e(76671),calc:e(69136),plot:e(60268),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:e(91800),categories:["noOpacity"],meta:{}}},51036:function(ie,F,e){"use strict";var S=e(33428),k=e(67756).Gz,o=e(36424),T=e(93024),b=e(3400),p=b.strTranslate,l=e(43616),t=e(49760),i=e(72736);function r(re,ne,Q,$){var X=ne._context.staticPlot,oe=re.map(Z.bind(0,ne,Q)),fe=$.selectAll("g.parcatslayer").data([null]);fe.enter().append("g").attr("class","parcatslayer").style("pointer-events",X?"none":"all");var ue=fe.selectAll("g.trace.parcats").data(oe,n),ge=ue.enter().append("g").attr("class","trace parcats");ue.attr("transform",function(be){return p(be.x,be.y)}),ge.append("g").attr("class","paths");var we=ue.select("g.paths").selectAll("path.path").data(function(be){return be.paths},n);we.attr("fill",function(be){return be.model.color});var Te=we.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(be){return be.model.color}).attr("fill-opacity",0);m(Te),we.attr("d",function(be){return be.svgD}),Te.empty()||we.sort(s),we.exit().remove(),we.on("mouseover",c).on("mouseout",h).on("click",d),ge.append("g").attr("class","dimensions");var xe=ue.select("g.dimensions").selectAll("g.dimension").data(function(be){return be.dimensions},n);xe.enter().append("g").attr("class","dimension"),xe.attr("transform",function(be){return p(be.x,0)}),xe.exit().remove();var ye=xe.selectAll("g.category").data(function(be){return be.categories},n),_e=ye.enter().append("g").attr("class","category");ye.attr("transform",function(be){return p(0,be.y)}),_e.append("rect").attr("class","catrect").attr("pointer-events","none"),ye.select("rect.catrect").attr("fill","none").attr("width",function(be){return be.width}).attr("height",function(be){return be.height}),x(_e);var Ie=ye.selectAll("rect.bandrect").data(function(be){return be.bands},n);Ie.each(function(){b.raiseToTop(this)}),Ie.attr("fill",function(be){return be.color});var De=Ie.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(be){return be.color}).attr("fill-opacity",0);Ie.attr("fill",function(be){return be.color}).attr("width",function(be){return be.width}).attr("height",function(be){return be.height}).attr("y",function(be){return be.y}).attr("cursor",function(be){return"fixed"===be.parcatsViewModel.arrangement?"default":"perpendicular"===be.parcatsViewModel.arrangement?"ns-resize":"move"}),v(De),Ie.exit().remove(),_e.append("text").attr("class","catlabel").attr("pointer-events","none"),ye.select("text.catlabel").attr("text-anchor",function(be){return a(be)?"start":"end"}).attr("alignment-baseline","middle").style("fill","rgb(0, 0, 0)").attr("x",function(be){return a(be)?be.width+5:-5}).attr("y",function(be){return be.height/2}).text(function(be){return be.model.categoryLabel}).each(function(be){l.font(S.select(this),be.parcatsViewModel.categorylabelfont),i.convertToTspans(S.select(this),ne)}),_e.append("text").attr("class","dimlabel"),ye.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(be){return"fixed"===be.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(be){return be.width/2}).attr("y",-5).text(function(be,he){return 0===he?be.parcatsViewModel.model.dimensions[be.model.dimensionInd].dimensionLabel:null}).each(function(be){l.font(S.select(this),be.parcatsViewModel.labelfont)}),ye.selectAll("rect.bandrect").on("mouseover",E).on("mouseout",P),ye.exit().remove(),xe.call(S.behavior.drag().origin(function(be){return{x:be.x,y:0}}).on("dragstart",L).on("drag",O).on("dragend",z)),ue.each(function(be){be.traceSelection=S.select(this),be.pathSelection=S.select(this).selectAll("g.paths").selectAll("path.path"),be.dimensionSelection=S.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ue.exit().remove()}function n(re){return re.key}function a(re){return re.model.dimensionInd===re.parcatsViewModel.dimensions[re.parcatsViewModel.dimensions.length-1].model.dimensionInd}function s(re,ne){return re.model.rawColor>ne.model.rawColor?1:re.model.rawColor<ne.model.rawColor?-1:0}function c(re){if(!re.parcatsViewModel.dragDimension&&-1===re.parcatsViewModel.hoverinfoItems.indexOf("skip")){b.raiseToTop(this),g(S.select(this));var ne=u(re),Q=y(re);if(re.parcatsViewModel.graphDiv.emit("plotly_hover",{points:ne,event:S.event,constraints:Q}),-1===re.parcatsViewModel.hoverinfoItems.indexOf("none")){var $,X,oe,fe=S.mouse(this)[0],ue=re.parcatsViewModel.graphDiv,ge=re.parcatsViewModel.trace,we=ue._fullLayout,Te=we._paperdiv.node().getBoundingClientRect(),xe=re.parcatsViewModel.graphDiv.getBoundingClientRect();for(oe=0;oe<re.leftXs.length-1;oe++)if(re.leftXs[oe]+re.dimWidths[oe]-2<=fe&&fe<=re.leftXs[oe+1]+2){var ye=re.parcatsViewModel.dimensions[oe];$=(ye.x+ye.width+re.parcatsViewModel.dimensions[oe+1].x)/2,X=(re.topYs[oe]+re.topYs[oe+1]+re.height)/2;break}var Ie=re.parcatsViewModel.x+$,De=re.parcatsViewModel.y+X,be=t.mostReadable(re.model.color,["black","white"]),he=re.model.count,ce=he/re.parcatsViewModel.model.count,me={countLabel:he,probabilityLabel:ce.toFixed(3)},Pe=[];-1!==re.parcatsViewModel.hoverinfoItems.indexOf("count")&&Pe.push(["Count:",me.countLabel].join(" ")),-1!==re.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Pe.push(["P:",me.probabilityLabel].join(" "));var Ae=Pe.join("<br>"),Ce=S.mouse(ue)[0];T.loneHover({trace:ge,x:Ie-Te.left+xe.left,y:De-Te.top+xe.top,text:Ae,color:re.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:be,idealAlign:Ce<Ie?"right":"left",hovertemplate:(ge.line||{}).hovertemplate,hovertemplateLabels:me,eventData:[{data:ge._input,fullData:ge,count:he,probability:ce}]},{container:we._hoverlayer.node(),outerContainer:we._paper.node(),gd:ue})}}}function h(re){if(!re.parcatsViewModel.dragDimension&&(m(S.select(this)),T.loneUnhover(re.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),re.parcatsViewModel.pathSelection.sort(s),-1===re.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var ne=u(re),Q=y(re);re.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:ne,event:S.event,constraints:Q})}}function u(re){for(var ne=[],Q=V(re.parcatsViewModel),$=0;$<re.model.valueInds.length;$++)ne.push({curveNumber:Q,pointNumber:re.model.valueInds[$]});return ne}function y(re){for(var ne={},Q=re.parcatsViewModel.model.dimensions,$=0;$<Q.length;$++){var X=Q[$];ne[X.containerInd]=X.categories[re.model.categoryInds[$]].categoryValue}return void 0!==re.model.rawColor&&(ne.color=re.model.rawColor),ne}function d(re){if(-1===re.parcatsViewModel.hoverinfoItems.indexOf("skip")){var ne=u(re),Q=y(re);re.parcatsViewModel.graphDiv.emit("plotly_click",{points:ne,event:S.event,constraints:Q})}}function m(re){re.attr("fill",function(ne){return ne.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function g(re){re.attr("fill-opacity",.8).attr("stroke",function(ne){return t.mostReadable(ne.model.color,["black","white"])}).attr("stroke-width",.3)}function x(re){re.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function v(re){re.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function _(re){var Q=re.categoryViewModel.model.dimensionInd,$=re.categoryViewModel.model.categoryInd;return re.parcatsViewModel.pathSelection.filter(function(X){return X.model.categoryInds[Q]===$&&X.model.color===re.color})}function f(re,ne,Q){var $=S.select(re).datum(),X=$.categoryViewModel.model,oe=$.parcatsViewModel.graphDiv,fe=S.select(re.parentNode).selectAll("rect.bandrect"),ue=[];fe.each(function(we){_(we).each(function(Te){Array.prototype.push.apply(ue,u(Te))})});var ge={};ge[X.dimensionInd]=X.categoryValue,oe.emit(ne,{points:ue,event:Q,constraints:ge})}function C(re,ne,Q){var $=S.select(re).datum(),X=$.categoryViewModel.model,oe=$.parcatsViewModel.graphDiv,fe=_($),ue=[];fe.each(function(we){Array.prototype.push.apply(ue,u(we))});var ge={};ge[X.dimensionInd]=X.categoryValue,void 0!==$.rawColor&&(ge.color=$.rawColor),oe.emit(ne,{points:ue,event:Q,constraints:ge})}function w(re,ne,Q){re._fullLayout._calcInverseTransform(re);var $,X,oe=re._fullLayout._invScaleX,fe=re._fullLayout._invScaleY,ue=S.select(Q.parentNode).select("rect.catrect"),ge=ue.node().getBoundingClientRect(),we=ue.datum(),Te=we.parcatsViewModel,ye=Te.trace,_e=ge.top+ge.height/2;Te.dimensions.length>1&&Te.model.dimensions[we.model.dimensionInd].displayInd===Te.dimensions.length-1?($=ge.left,X="left"):($=ge.left+ge.width,X="right");var Ie=we.model.count,De=we.model.categoryLabel,be=Ie/we.parcatsViewModel.model.count,he={countLabel:Ie,categoryLabel:De,probabilityLabel:be.toFixed(3)},ce=[];-1!==we.parcatsViewModel.hoverinfoItems.indexOf("count")&&ce.push(["Count:",he.countLabel].join(" ")),-1!==we.parcatsViewModel.hoverinfoItems.indexOf("probability")&&ce.push(["P("+he.categoryLabel+"):",he.probabilityLabel].join(" "));var me=ce.join("<br>");return{trace:ye,x:oe*($-ne.left),y:fe*(_e-ne.top),text:me,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:X,hovertemplate:ye.hovertemplate,hovertemplateLabels:he,eventData:[{data:ye._input,fullData:ye,count:Ie,category:De,probability:be}]}}function E(re){if(!re.parcatsViewModel.dragDimension&&-1===re.parcatsViewModel.hoverinfoItems.indexOf("skip")){if(S.mouse(this)[1]<-1)return;var ne,Q=re.parcatsViewModel.graphDiv,$=Q._fullLayout,X=$._paperdiv.node().getBoundingClientRect(),oe=re.parcatsViewModel.hoveron,fe=this;"color"===oe?(g(we=_(ge=S.select(ue=fe).datum())),we.each(function(){b.raiseToTop(this)}),S.select(ue.parentNode).selectAll("rect.bandrect").filter(function(Te){return Te.color===ge.color}).each(function(){b.raiseToTop(this),S.select(this).attr("stroke","black").attr("stroke-width",1.5)}),C(fe,"plotly_hover",S.event)):(function(ue){S.select(ue.parentNode).selectAll("rect.bandrect").each(function(ge){var we=_(ge);g(we),we.each(function(){b.raiseToTop(this)})}),S.select(ue.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(fe),f(fe,"plotly_hover",S.event)),-1===re.parcatsViewModel.hoverinfoItems.indexOf("none")&&("category"===oe?ne=w(Q,X,fe):"color"===oe?ne=function(ue,ge,we){ue._fullLayout._calcInverseTransform(ue);var Te,xe,ye=ue._fullLayout._invScaleX,_e=ue._fullLayout._invScaleY,Ie=we.getBoundingClientRect(),De=S.select(we).datum(),be=De.categoryViewModel,he=be.parcatsViewModel,me=he.trace,Pe=Ie.y+Ie.height/2;he.dimensions.length>1&&he.model.dimensions[be.model.dimensionInd].displayInd===he.dimensions.length-1?(Te=Ie.left,xe="left"):(Te=Ie.left+Ie.width,xe="right");var Ae=be.model.categoryLabel,Ce=De.parcatsViewModel.model.count,Oe=0;De.categoryViewModel.bands.forEach(function(it){it.color===De.color&&(Oe+=it.count)});var Ne=be.model.count,je=0;he.pathSelection.each(function(it){it.model.color===De.color&&(je+=it.model.count)});var ve=Oe/Ce,Me=Oe/je,Le=Oe/Ne,Ue={countLabel:Oe,categoryLabel:Ae,probabilityLabel:ve.toFixed(3)},ze=[];-1!==be.parcatsViewModel.hoverinfoItems.indexOf("count")&&ze.push(["Count:",Ue.countLabel].join(" ")),-1!==be.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(ze.push("P(color \u2229 "+Ae+"): "+Ue.probabilityLabel),ze.push("P("+Ae+" | color): "+Me.toFixed(3)),ze.push("P(color | "+Ae+"): "+Le.toFixed(3)));var qe=ze.join("<br>"),Ke=t.mostReadable(De.color,["black","white"]);return{trace:me,x:ye*(Te-ge.left),y:_e*(Pe-ge.top),text:qe,color:De.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:Ke,fontSize:10,idealAlign:xe,hovertemplate:me.hovertemplate,hovertemplateLabels:Ue,eventData:[{data:me._input,fullData:me,category:Ae,count:Ce,probability:ve,categorycount:Ne,colorcount:je,bandcolorcount:Oe}]}}(Q,X,fe):"dimension"===oe&&(ne=function(ue,ge,we){var Te=[];return S.select(we.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){Te.push(w(ue,ge,this))}),Te}(Q,X,fe)),ne&&T.loneHover(ne,{container:$._hoverlayer.node(),outerContainer:$._paper.node(),gd:Q}))}var ue,ge,we}function P(re){var ne=re.parcatsViewModel;ne.dragDimension||(m(ne.pathSelection),x(ne.dimensionSelection.selectAll("g.category")),v(ne.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),T.loneUnhover(ne.graphDiv._fullLayout._hoverlayer.node()),ne.pathSelection.sort(s),-1!==ne.hoverinfoItems.indexOf("skip"))||("color"===re.parcatsViewModel.hoveron?C(this,"plotly_unhover",S.event):f(this,"plotly_unhover",S.event))}function L(re){"fixed"!==re.parcatsViewModel.arrangement&&(re.dragDimensionDisplayInd=re.model.displayInd,re.initialDragDimensionDisplayInds=re.parcatsViewModel.model.dimensions.map(function(ne){return ne.displayInd}),re.dragHasMoved=!1,re.dragCategoryDisplayInd=null,S.select(this).selectAll("g.category").select("rect.catrect").each(function(ne){var Q=S.mouse(this)[0],$=S.mouse(this)[1];-2<=Q&&Q<=ne.width+2&&-2<=$&&$<=ne.height+2&&(re.dragCategoryDisplayInd=ne.model.displayInd,re.initialDragCategoryDisplayInds=re.model.categories.map(function(X){return X.displayInd}),ne.model.dragY=ne.y,b.raiseToTop(this.parentNode),S.select(this.parentNode).selectAll("rect.bandrect").each(function(X){X.y<$&&$<=X.y+X.height&&(re.potentialClickBand=this)}))}),re.parcatsViewModel.dragDimension=re,T.loneUnhover(re.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function O(re){if("fixed"!==re.parcatsViewModel.arrangement&&(re.dragHasMoved=!0,null!==re.dragDimensionDisplayInd)){var ne=re.dragDimensionDisplayInd,Q=ne-1,$=ne+1,X=re.parcatsViewModel.dimensions[ne];if(null!==re.dragCategoryDisplayInd){var oe=X.categories[re.dragCategoryDisplayInd];oe.model.dragY+=S.event.dy;var fe=oe.model.dragY,ue=oe.model.displayInd,ge=X.categories,we=ge[ue-1],Te=ge[ue+1];void 0!==we&&fe<we.y+we.height/2&&(oe.model.displayInd=we.model.displayInd,we.model.displayInd=ue),void 0!==Te&&fe+oe.height>Te.y+Te.height/2&&(oe.model.displayInd=Te.model.displayInd,Te.model.displayInd=ue),re.dragCategoryDisplayInd=oe.model.displayInd}if(null===re.dragCategoryDisplayInd||"freeform"===re.parcatsViewModel.arrangement){X.model.dragX=S.event.x;var xe=re.parcatsViewModel.dimensions[Q],ye=re.parcatsViewModel.dimensions[$];void 0!==xe&&X.model.dragX<xe.x+xe.width&&(X.model.displayInd=xe.model.displayInd,xe.model.displayInd=ne),void 0!==ye&&X.model.dragX+X.width>ye.x&&(X.model.displayInd=ye.model.displayInd,ye.model.displayInd=re.dragDimensionDisplayInd),re.dragDimensionDisplayInd=X.model.displayInd}W(re.parcatsViewModel),G(re.parcatsViewModel),U(re.parcatsViewModel),R(re.parcatsViewModel)}}function z(re){if("fixed"!==re.parcatsViewModel.arrangement&&null!==re.dragDimensionDisplayInd){S.select(this).selectAll("text").attr("font-weight","normal");var ne={},Q=V(re.parcatsViewModel),$=re.parcatsViewModel.model.dimensions.map(function(Te){return Te.displayInd}),X=re.initialDragDimensionDisplayInds.some(function(Te,xe){return Te!==$[xe]});X&&$.forEach(function(Te,xe){ne["dimensions["+re.parcatsViewModel.model.dimensions[xe].containerInd+"].displayindex"]=Te});var oe=!1;if(null!==re.dragCategoryDisplayInd){var fe=re.model.categories.map(function(Te){return Te.displayInd});if(oe=re.initialDragCategoryDisplayInds.some(function(Te,xe){return Te!==fe[xe]})){var ue=re.model.categories.slice().sort(function(Te,xe){return Te.displayInd-xe.displayInd}),ge=ue.map(function(Te){return Te.categoryValue}),we=ue.map(function(Te){return Te.categoryLabel});ne["dimensions["+re.model.containerInd+"].categoryarray"]=[ge],ne["dimensions["+re.model.containerInd+"].ticktext"]=[we],ne["dimensions["+re.model.containerInd+"].categoryorder"]="array"}}-1===re.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!re.dragHasMoved&&re.potentialClickBand&&("color"===re.parcatsViewModel.hoveron?C(re.potentialClickBand,"plotly_click",S.event.sourceEvent):f(re.potentialClickBand,"plotly_click",S.event.sourceEvent)),re.model.dragX=null,null!==re.dragCategoryDisplayInd&&(re.parcatsViewModel.dimensions[re.dragDimensionDisplayInd].categories[re.dragCategoryDisplayInd].model.dragY=null,re.dragCategoryDisplayInd=null),re.dragDimensionDisplayInd=null,re.parcatsViewModel.dragDimension=null,re.dragHasMoved=null,re.potentialClickBand=null,W(re.parcatsViewModel),G(re.parcatsViewModel),S.transition().duration(300).ease("cubic-in-out").each(function(){U(re.parcatsViewModel,!0),R(re.parcatsViewModel,!0)}).each("end",function(){(X||oe)&&o.restyle(re.parcatsViewModel.graphDiv,ne,[Q])})}}function V(re){for(var ne,Q=re.graphDiv._fullData,$=0;$<Q.length;$++)if(re.key===Q[$].uid){ne=$;break}return ne}function R(re,ne){var Q;void 0===ne&&(ne=!1),re.pathSelection.data(function($){return $.paths},n),(Q=re.pathSelection,ne?Q.transition():Q).attr("d",function($){return $.svgD})}function U(re,ne){function Q(fe){return ne?fe.transition():fe}void 0===ne&&(ne=!1),re.dimensionSelection.data(function(fe){return fe.dimensions},n);var $=re.dimensionSelection.selectAll("g.category").data(function(fe){return fe.categories},n);Q(re.dimensionSelection).attr("transform",function(fe){return p(fe.x,0)}),Q($).attr("transform",function(fe){return p(0,fe.y)}),$.select(".dimlabel").text(function(fe,ue){return 0===ue?fe.parcatsViewModel.model.dimensions[fe.model.dimensionInd].dimensionLabel:null}),$.select(".catlabel").attr("text-anchor",function(fe){return a(fe)?"start":"end"}).attr("x",function(fe){return a(fe)?fe.width+5:-5}).each(function(fe){var ue,ge;a(fe)?(ue=fe.width+5,ge="start"):(ue=-5,ge="end"),S.select(this).selectAll("tspan").attr("x",ue).attr("text-anchor",ge)});var X=$.selectAll("rect.bandrect").data(function(fe){return fe.bands},n),oe=X.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(fe){return fe.color}).attr("fill-opacity",0);X.attr("fill",function(fe){return fe.color}).attr("width",function(fe){return fe.width}).attr("height",function(fe){return fe.height}).attr("y",function(fe){return fe.y}),v(oe),X.each(function(){b.raiseToTop(this)}),X.exit().remove()}function Z(re,ne,Q){var $,X=Q[0],oe=ne.margin||{l:80,r:80,t:100,b:80},fe=X.trace,ue=fe.domain,ge=ne.width,we=ne.height,Te=Math.floor(ge*(ue.x[1]-ue.x[0])),xe=Math.floor(we*(ue.y[1]-ue.y[0])),ye=ue.x[0]*ge+oe.l,_e=ne.height-ue.y[1]*ne.height+oe.t,Ie=fe.line.shape;$="all"===fe.hoverinfo?["count","probability"]:(fe.hoverinfo||"").split("+");var De={trace:fe,key:fe.uid,model:X,x:ye,y:_e,width:Te,height:xe,hoveron:fe.hoveron,hoverinfoItems:$,arrangement:fe.arrangement,bundlecolors:fe.bundlecolors,sortpaths:fe.sortpaths,labelfont:fe.labelfont,categorylabelfont:fe.tickfont,pathShape:Ie,dragDimension:null,margin:oe,paths:[],dimensions:[],graphDiv:re,traceSelection:null,pathSelection:null,dimensionSelection:null};return X.dimensions&&(W(De),G(De)),De}function N(re,ne,Q,$,X){var oe,fe,ue=[],ge=[];for(fe=0;fe<Q.length-1;fe++)oe=k(Q[fe]+re[fe],re[fe+1]),ue.push(oe(X)),ge.push(oe(1-X));var we="M "+re[0]+","+ne[0];for(we+="l"+Q[0]+",0 ",fe=1;fe<Q.length;fe++)we+="C"+ue[fe-1]+","+ne[fe-1]+" "+ge[fe-1]+","+ne[fe]+" "+re[fe]+","+ne[fe],we+="l"+Q[fe]+",0 ";for(we+="l0,"+$+" ",we+="l -"+Q[Q.length-1]+",0 ",fe=Q.length-2;fe>=0;fe--)we+="C"+ge[fe]+","+(ne[fe+1]+$)+" "+ue[fe]+","+(ne[fe]+$)+" "+(re[fe]+Q[fe])+","+(ne[fe]+$),we+="l-"+Q[fe]+",0 ";return we+"Z"}function G(re){var ne=re.dimensions,Q=re.model,$=ne.map(function(Ue){return Ue.categories.map(function(ze){return ze.y})}),X=re.model.dimensions.map(function(Ue){return Ue.categories.map(function(ze){return ze.displayInd})}),oe=re.model.dimensions.map(function(Ue){return Ue.displayInd}),fe=re.dimensions.map(function(Ue){return Ue.model.dimensionInd}),ue=ne.map(function(Ue){return Ue.x}),ge=ne.map(function(Ue){return Ue.width}),we=[];for(var Te in Q.paths)Q.paths.hasOwnProperty(Te)&&we.push(Q.paths[Te]);function xe(Ue){var ze=Ue.categoryInds.map(function(qe,Ke){return X[Ke][qe]});return fe.map(function(qe){return ze[qe]})}we.sort(function(Ue,ze){var qe=xe(Ue),Ke=xe(ze);return"backward"===re.sortpaths&&(qe.reverse(),Ke.reverse()),qe.push(Ue.valueInds[0]),Ke.push(ze.valueInds[0]),re.bundlecolors&&(qe.unshift(Ue.rawColor),Ke.unshift(ze.rawColor)),qe<Ke?-1:qe>Ke?1:0});for(var ye=new Array(we.length),_e=ne[0].model.count,Ie=ne[0].categories.map(function(Ue){return Ue.height}).reduce(function(Ue,ze){return Ue+ze}),De=0;De<we.length;De++){var be,he=we[De];be=_e>0?Ie*(he.count/_e):0;for(var ce,me=new Array($.length),Pe=0;Pe<he.categoryInds.length;Pe++){var Ce=X[Pe][he.categoryInds[Pe]],Oe=oe[Pe];me[Oe]=$[Oe][Ce],$[Oe][Ce]+=be;var Ne=re.dimensions[Oe].categories[Ce],je=Ne.bands.length,ve=Ne.bands[je-1];if(void 0===ve||he.rawColor!==ve.rawColor){var Me=void 0===ve?0:ve.y+ve.height;Ne.bands.push({key:Me,color:he.color,rawColor:he.rawColor,height:be,width:Ne.width,count:he.count,y:Me,categoryViewModel:Ne,parcatsViewModel:re})}else{var Le=Ne.bands[je-1];Le.height+=be,Le.count+=he.count}}ce=N(ue,me,ge,be,"hspline"===re.pathShape?.5:0),ye[De]={key:he.valueInds[0],model:he,height:be,leftXs:ue,topYs:me,dimWidths:ge,svgD:ce,parcatsViewModel:re}}re.paths=ye}function W(re){var ne=re.model.dimensions.map(function(fe){return{displayInd:fe.displayInd,dimensionInd:fe.dimensionInd}});ne.sort(function(fe,ue){return fe.displayInd-ue.displayInd});var Q=[];for(var $ in ne)Q.push(ae(re,re.model.dimensions[ne[$].dimensionInd]));re.dimensions=Q}function ae(re,ne){var Q,$=re.model.dimensions.length;Q=40+($>1?(re.width-80-16)/($-1):0)*ne.displayInd;var oe,fe,ue,we,Te=[],xe=re.model.maxCats,ye=ne.categories.length,_e=ne.count,Ie=re.height-8*(xe-1),De=8*(xe-ye)/2,be=ne.categories.map(function(he){return{displayInd:he.displayInd,categoryInd:he.categoryInd}});for(be.sort(function(he,ce){return he.displayInd-ce.displayInd}),we=0;we<ye;we++)ue={key:(fe=ne.categories[be[we].categoryInd]).valueInds[0],model:fe,width:16,height:oe=_e>0?fe.count/_e*Ie:0,y:null!==fe.dragY?fe.dragY:De,bands:[],parcatsViewModel:re},De=De+oe+8,Te.push(ue);return{key:ne.dimensionInd,x:null!==ne.dragX?ne.dragX:Q,y:0,width:16,model:ne,categories:Te,parcatsViewModel:re,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}ie.exports=function(re,ne,Q,$){r(Q,re,$,ne)}},60268:function(ie,F,e){"use strict";var S=e(51036);ie.exports=function(k,o,T,b){var p=k._fullLayout,t=p._size;S(k,p._paper,o,{width:t.w,height:t.h,margin:{t:t.t,r:t.r,b:t.b,l:t.l}},T,b)}},82296:function(ie,F,e){"use strict";var S=e(49084),k=e(94724),o=e(25376),T=e(86968).u,b=e(92880).extendFlat,p=e(31780).templatedArray;ie.exports={domain:T({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:o({editType:"plot"}),tickfont:o({autoShadowDflt:!0,editType:"plot"}),rangefont:o({editType:"plot"}),dimensions:p("dimension",{label:{valType:"string",editType:"plot"},tickvals:b({},k.tickvals,{editType:"plot"}),ticktext:b({},k.ticktext,{editType:"plot"}),tickformat:b({},k.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:b({editType:"calc"},S("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},71864:function(ie,F,e){"use strict";var S=e(30140),k=e(33428),o=e(71688).keyFun,T=e(71688).repeat,b=e(3400).sorterAsc,p=e(3400).strTranslate,l=S.bar.snapRatio;function t(w,E){return w*(1-l)+E*l}var i=S.bar.snapClose;function r(w,E){return w*(1-i)+E*i}function n(w,E,P,L){if(function(ae,re){for(var ne=0;ne<re.length;ne++)if(ae>=re[ne][0]&&ae<=re[ne][1])return!0;return!1}(P,L))return P;var O=w?-1:1,z=0,V=E.length-1;if(O<0){var R=z;z=V,V=R}for(var U=E[z],Z=U,N=z;O*N<O*V;N+=O){var G=N+O,W=E[G];if(O*P<O*r(U,W))return t(U,Z);if(O*P<O*W||G===V)return t(W,U);Z=U,U=W}}function a(w){w.attr("x",-S.bar.captureWidth/2).attr("width",S.bar.captureWidth)}function s(w){w.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function c(w){if(!w.brush.filterSpecified)return"0,"+w.height;for(var E,P,L,O=h(w.brush.filter.getConsolidated(),w.height),z=[0],V=O.length?O[0][0]:null,R=0;R<O.length;R++)P=(E=O[R])[1]-E[0],z.push(V),z.push(P),(L=R+1)<O.length&&(V=O[L][0]-E[1]);return z.push(w.height),z}function h(w,E){return w.map(function(P){return P.map(function(L){return Math.max(0,L*E)}).sort(b)})}function u(){k.select(document.body).style("cursor",null)}function y(w){w.attr("stroke-dasharray",c)}function d(w,E){var P=k.select(w).selectAll(".highlight, .highlight-shadow");y(E?P.transition().duration(S.bar.snapDuration).each("end",E):P)}function m(w,E){var P,L=w.brush,O=NaN,z={};if(L.filterSpecified){var V=w.height,R=L.filter.getConsolidated(),U=h(R,V),Z=NaN,N=NaN,G=NaN;for(P=0;P<=U.length;P++){var W=U[P];if(W&&W[0]<=E&&E<=W[1]){Z=P;break}if(N=P?P-1:NaN,W&&W[0]>E){G=P;break}}if(O=Z,isNaN(O)&&(O=isNaN(N)||isNaN(G)?isNaN(N)?G:N:E-U[N][1]<U[G][0]-E?N:G),!isNaN(O)){var ae=U[O],re=function(X,oe){var fe=S.bar.handleHeight;if(!(oe>X[1]+fe||oe<X[0]-fe))return oe>=.9*X[1]+.1*X[0]?"n":oe<=.9*X[0]+.1*X[1]?"s":"ns"}(ae,E);re&&(z.interval=R[O],z.intervalPix=ae,z.region=re)}}if(w.ordinal&&!z.region){var ne=w.unitTickvals,Q=w.unitToPaddedPx.invert(E);for(P=0;P<ne.length;P++){var $=[.25*ne[Math.max(P-1,0)]+.75*ne[P],.25*ne[Math.min(P+1,ne.length-1)]+.75*ne[P]];if(Q>=$[0]&&Q<=$[1]){z.clickableOrdinalRange=$;break}}}return z}function g(w,E){k.event.sourceEvent.stopPropagation();var P=E.height-k.mouse(w)[1]-2*S.verticalPadding,L=E.brush.svgBrush;L.wasDragged=!0,L._dragging=!0,L.newExtent=L.grabbingBar?[P-L.grabPoint,P+L.barLength-L.grabPoint].map(E.unitToPaddedPx.invert):[L.startExtent,E.unitToPaddedPx.invert(P)].sort(b),E.brush.filterSpecified=!0,L.extent=L.stayingIntervals.concat([L.newExtent]),L.brushCallback(E),d(w.parentNode)}function x(w,E){var P=m(E,E.height-k.mouse(w)[1]-2*S.verticalPadding),L="crosshair";P.clickableOrdinalRange?L="pointer":P.region&&(L=P.region+"-resize"),k.select(document.body).style("cursor",L)}function v(w){w.on("mousemove",function(E){k.event.preventDefault(),E.parent.inBrushDrag||x(this,E)}).on("mouseleave",function(E){E.parent.inBrushDrag||u()}).call(k.behavior.drag().on("dragstart",function(E){!function(P,L){k.event.sourceEvent.stopPropagation();var O=L.height-k.mouse(P)[1]-2*S.verticalPadding,z=L.unitToPaddedPx.invert(O),V=L.brush,R=m(L,O),U=R.interval,Z=V.svgBrush;if(Z.wasDragged=!1,Z.grabbingBar="ns"===R.region,Z.grabbingBar){var N=U.map(L.unitToPaddedPx);Z.grabPoint=O-N[0]-S.verticalPadding,Z.barLength=N[1]-N[0]}Z.clickableOrdinalRange=R.clickableOrdinalRange,Z.stayingIntervals=L.multiselect&&V.filterSpecified?V.filter.getConsolidated():[],U&&(Z.stayingIntervals=Z.stayingIntervals.filter(function(G){return G[0]!==U[0]&&G[1]!==U[1]})),Z.startExtent=R.region?U["s"===R.region?1:0]:z,L.parent.inBrushDrag=!0,Z.brushStartCallback()}(this,E)}).on("drag",function(E){g(this,E)}).on("dragend",function(E){!function(P,L){var O=L.brush,z=O.filter,V=O.svgBrush;V._dragging||(x(P,L),g(P,L),L.brush.svgBrush.wasDragged=!1),V._dragging=!1,k.event.sourceEvent.stopPropagation();var R=V.grabbingBar;if(V.grabbingBar=!1,V.grabLocation=void 0,L.parent.inBrushDrag=!1,u(),!V.wasDragged)return V.wasDragged=void 0,V.clickableOrdinalRange?O.filterSpecified&&L.multiselect?V.extent.push(V.clickableOrdinalRange):(V.extent=[V.clickableOrdinalRange],O.filterSpecified=!0):R?(V.extent=V.stayingIntervals,0===V.extent.length&&f(O)):f(O),V.brushCallback(L),d(P.parentNode),void V.brushEndCallback(O.filterSpecified?z.getConsolidated():[]);var U=function(){z.set(z.getConsolidated())};if(L.ordinal){var Z=L.unitTickvals;Z[Z.length-1]<Z[0]&&Z.reverse(),V.newExtent=[n(0,Z,V.newExtent[0],V.stayingIntervals),n(1,Z,V.newExtent[1],V.stayingIntervals)];var N=V.newExtent[1]>V.newExtent[0];V.extent=V.stayingIntervals.concat(N?[V.newExtent]:[]),V.extent.length||f(O),V.brushCallback(L),N?d(P.parentNode,U):(U(),d(P.parentNode))}else U();V.brushEndCallback(O.filterSpecified?z.getConsolidated():[])}(this,E)}))}function _(w,E){return w[0]-E[0]}function f(w){w.filterSpecified=!1,w.svgBrush.extent=[[-1/0,1/0]]}function C(w){for(var E,P=w.slice(),L=[],O=P.shift();O;){for(E=O.slice();(O=P.shift())&&O[0]<=E[1];)E[1]=Math.max(E[1],O[1]);L.push(E)}return 1===L.length&&L[0][0]>L[0][1]&&(L=[]),L}ie.exports={makeBrush:function(w,E,P,L,O,z){var V,U,Z,N,R=(N=[],{set:function(G){1===(N=G.map(function(W){return W.slice().sort(b)}).sort(_)).length&&N[0][0]===-1/0&&N[0][1]===1/0&&(N=[[0,-1]]),U=C(N),Z=N.reduce(function(W,ae){return[Math.min(W[0],ae[0]),Math.max(W[1],ae[1])]},[1/0,-1/0])},get:function(){return N.slice()},getConsolidated:function(){return U},getBounds:function(){return Z}});return R.set(P),{filter:R,filterSpecified:E,svgBrush:{extent:[],brushStartCallback:L,brushCallback:(V=O,function(U){var Z=U.brush,G=Z.svgBrush.extent.map(function(ae){return ae.slice()}).slice();Z.filter.set(G),V()}),brushEndCallback:z}}},ensureAxisBrush:function(w,E,P){var L=w.selectAll("."+S.cn.axisBrush).data(T,o);L.enter().append("g").classed(S.cn.axisBrush,!0),function(O,z,V){var R=V._context.staticPlot,U=O.selectAll(".background").data(T);U.enter().append("rect").classed("background",!0).call(a).call(s).style("pointer-events",R?"none":"auto").attr("transform",p(0,S.verticalPadding)),U.call(v).attr("height",function(G){return G.height-S.verticalPadding});var Z=O.selectAll(".highlight-shadow").data(T);Z.enter().append("line").classed("highlight-shadow",!0).attr("x",-S.bar.width/2).attr("stroke-width",S.bar.width+S.bar.strokeWidth).attr("stroke",z).attr("opacity",S.bar.strokeOpacity).attr("stroke-linecap","butt"),Z.attr("y1",function(G){return G.height}).call(y);var N=O.selectAll(".highlight").data(T);N.enter().append("line").classed("highlight",!0).attr("x",-S.bar.width/2).attr("stroke-width",S.bar.width-S.bar.strokeWidth).attr("stroke",S.bar.fillColor).attr("opacity",S.bar.fillOpacity).attr("stroke-linecap","butt"),N.attr("y1",function(G){return G.height}).call(y)}(L,E,P)},cleanRanges:function(w,E){if(Array.isArray(w[0])?(w=w.map(function(L){return L.sort(b)}),w=E.multiselect?C(w.sort(_)):[w[0]]):w=[w.sort(b)],E.tickvals){var P=E.tickvals.slice().sort(b);if(!(w=w.map(function(L){var O=[n(0,P,L[0],[]),n(1,P,L[1],[])];if(O[1]>O[0])return O}).filter(function(L){return L})).length)return}return w.length>1?w:w[0]}}},61664:function(ie,F,e){"use strict";ie.exports={attributes:e(82296),supplyDefaults:e(60664),calc:e(95044),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:e(19976),categories:["gl","regl","noOpacity","noHover"],meta:{}}},19976:function(ie,F,e){"use strict";var S=e(33428),k=e(84888)._M,o=e(24196),T=e(9616);F.name="parcoords",F.plot=function(b){var p=k(b.calcdata,"parcoords")[0];p.length&&o(b,p)},F.clean=function(b,p,l,t){var i=t._has&&t._has("parcoords"),r=p._has&&p._has("parcoords");i&&!r&&(t._paperdiv.selectAll(".parcoords").remove(),t._glimages.selectAll("*").remove())},F.toSVG=function(b){var p=b._fullLayout._glimages,l=S.select(b).selectAll(".svg-container");l.filter(function(t,i){return i===l.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var t=this,i=t.toDataURL("image/png");p.append("svg:image").attr({xmlns:T.svg,"xlink:href":i,preserveAspectRatio:"none",x:0,y:0,width:t.style.width,height:t.style.height})}),window.setTimeout(function(){S.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},95044:function(ie,F,e){"use strict";var S=e(3400).isArrayOrTypedArray,k=e(8932),o=e(71688).wrap;ie.exports=function(T,b){var p,l;return k.hasColorscale(b,"line")&&S(b.line.color)?(p=b.line.color,l=k.extractOpts(b.line).colorscale,k.calc(T,b,{vals:p,containerStr:"line",cLetter:"c"})):(p=function(t){for(var i=new Array(t),r=0;r<t;r++)i[r]=.5;return i}(b._length),l=[[0,b.line.color],[1,b.line.color]]),o({lineColor:p,cscale:l})}},30140:function(ie){"use strict";ie.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},60664:function(ie,F,e){"use strict";var S=e(3400),k=e(94288).hasColorscale,o=e(27260),T=e(86968).Q,b=e(51272),p=e(54460),l=e(82296),t=e(71864),i=e(30140).maxDimensionCount,r=e(26284);function n(a,s,c,h){function u(x,v){return S.coerce(a,s,l.dimensions,x,v)}var y=u("values"),d=u("visible");if(y&&y.length||(d=s.visible=!1),d){u("label"),u("tickvals"),u("ticktext"),u("tickformat");var m=u("range");s._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:m},p.setConvert(s._ax,h.layout),u("multiselect");var g=u("constraintrange");g&&(s.constraintrange=t.cleanRanges(g,s))}}ie.exports=function(a,s,c,h){function u(x,v){return S.coerce(a,s,l,x,v)}var y=a.dimensions;Array.isArray(y)&&y.length>i&&(S.log("parcoords traces support up to "+i+" dimensions at the moment"),y.splice(i));var d=b(a,s,{name:"dimensions",layout:h,handleItemDefaults:n}),m=function(x,v,_,f,C){var w=C("line.color",_);if(k(x,"line")&&S.isArrayOrTypedArray(w)){if(w.length)return C("line.colorscale"),o(x,v,f,C,{prefix:"line.",cLetter:"c"}),w.length;v.line.color=_}return 1/0}(a,s,c,h,u);T(s,h,u),Array.isArray(d)&&d.length||(s.visible=!1),r(s,d,"values",m);var g=S.extendFlat({},h.font,{size:Math.round(h.font.size/1.2)});S.coerceFont(u,"labelfont",g),S.coerceFont(u,"tickfont",g,{autoShadowDflt:!0}),S.coerceFont(u,"rangefont",g),u("labelangle"),u("labelside"),u("unselected.line.color"),u("unselected.line.opacity")}},95724:function(ie,F,e){"use strict";var S=e(3400).isTypedArray;F.convertTypedArray=function(k){return S(k)?Array.prototype.slice.call(k):k},F.isOrdinal=function(k){return!!k.tickvals},F.isVisible=function(k){return k.visible||!("visible"in k)}},29928:function(ie,F,e){"use strict";var S=e(61664);S.plot=e(24196),ie.exports=S},51352:function(ie,F,e){"use strict";var S=["precision highp float;","","varying vec4 fragColor;","","attribute vec4 p01_04, p05_08, p09_12, p13_16,","               p17_20, p21_24, p25_28, p29_32,","               p33_36, p37_40, p41_44, p45_48,","               p49_52, p53_56, p57_60, colors;","","uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,","             loA, hiA, loB, hiB, loC, hiC, loD, hiD;","","uniform vec2 resolution, viewBoxPos, viewBoxSize;","uniform float maskHeight;","uniform float drwLayer; // 0: context, 1: focus, 2: pick","uniform vec4 contextColor;","uniform sampler2D maskTexture, palette;","","bool isPick    = (drwLayer > 1.5);","bool isContext = (drwLayer < 0.5);","","const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);","const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);","","float val(mat4 p, mat4 v) {","    return dot(matrixCompMult(p, v) * UNITS, UNITS);","}","","float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {","    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);","    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);","    return y1 * (1.0 - ratio) + y2 * ratio;","}","","int iMod(int a, int b) {","    return a - b * (a / b);","}","","bool fOutside(float p, float lo, float hi) {","    return (lo < hi) && (lo > p || p > hi);","}","","bool vOutside(vec4 p, vec4 lo, vec4 hi) {","    return (","        fOutside(p[0], lo[0], hi[0]) ||","        fOutside(p[1], lo[1], hi[1]) ||","        fOutside(p[2], lo[2], hi[2]) ||","        fOutside(p[3], lo[3], hi[3])","    );","}","","bool mOutside(mat4 p, mat4 lo, mat4 hi) {","    return (","        vOutside(p[0], lo[0], hi[0]) ||","        vOutside(p[1], lo[1], hi[1]) ||","        vOutside(p[2], lo[2], hi[2]) ||","        vOutside(p[3], lo[3], hi[3])","    );","}","","bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {","    return mOutside(A, loA, hiA) ||","           mOutside(B, loB, hiB) ||","           mOutside(C, loC, hiC) ||","           mOutside(D, loD, hiD);","}","","bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {","    mat4 pnts[4];","    pnts[0] = A;","    pnts[1] = B;","    pnts[2] = C;","    pnts[3] = D;","","    for(int i = 0; i < 4; ++i) {","        for(int j = 0; j < 4; ++j) {","            for(int k = 0; k < 4; ++k) {","                if(0 == iMod(","                    int(255.0 * texture2D(maskTexture,","                        vec2(","                            (float(i * 2 + j / 2) + 0.5) / 8.0,","                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight","                        ))[3]","                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),","                    2","                )) return true;","            }","        }","    }","    return false;","}","","vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {","    float x = 0.5 * sign(v) + 0.5;","    float y = axisY(x, A, B, C, D);","    float z = 1.0 - abs(v);","","    z += isContext ? 0.0 : 2.0 * float(","        outsideBoundingBox(A, B, C, D) ||","        outsideRasterMask(A, B, C, D)","    );","","    return vec4(","        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,","        z,","        1.0","    );","}","","void main() {","    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);","    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);","    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);","    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);","","    float v = colors[3];","","    gl_Position = position(isContext, v, A, B, C, D);","","    fragColor =","        isContext ? vec4(contextColor) :","        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));","}"].join("\n"),k=["precision highp float;","","varying vec4 fragColor;","","void main() {","    gl_FragColor = fragColor;","}"].join("\n"),o=e(30140).maxDimensionCount,T=e(3400),p=new Uint8Array(4),l=new Uint8Array(4),t={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function i(d,m,g,x,v){var _=d._gl;_.enable(_.SCISSOR_TEST),_.scissor(m,g,x,v),d.clear({color:[0,0,0,0],depth:1})}function r(d,m,g,x,v,_){var f=_.key;g.drawCompleted||(d.read({x:0,y:0,width:1,height:1,data:p}),g.drawCompleted=!0),function C(w){var E=Math.min(x,v-w*x);0===w&&(window.cancelAnimationFrame(g.currentRafs[f]),delete g.currentRafs[f],i(d,_.scissorX,_.scissorY,_.scissorWidth,_.viewBoxSize[1])),g.clearOnly||(_.count=2*E,_.offset=2*w*x,m(_),w*x+E<v&&(g.currentRafs[f]=window.requestAnimationFrame(function(){C(w+1)})),g.drawCompleted=!1)}(0)}function n(d,m){for(var g=new Array(256),x=0;x<256;x++)g[x]=d(x/255).concat(m);return g}function a(d,m){return(d>>>8*m)%256/255}function s(d,m,g){for(var x=new Array(8*m),v=0,_=0;_<m;_++)for(var f=0;f<2;f++)for(var C=0;C<4;C++){var w=4*d+C,E=g[64*_+w];63===w&&0===f&&(E*=-1),x[v++]=E}return x}function c(d){var m="0"+d;return m.substr(m.length-2)}function h(d){return d<o?"p"+c(d+1)+"_"+c(d+4):"colors"}function u(d,m,g,x,v,_,f,C,w,E,P,L,O,z){for(var V=[[],[]],R=0;R<64;R++)V[0][R]=R===v?1:0,V[1][R]=R===_?1:0;var U=d.lines.canvasOverdrag*z,Z=d.domain,N=d.canvasWidth*z,G=d.canvasHeight*z,W=d.pad.l*z,ae=d.pad.b*z,re=d.layoutHeight*z,ne=d.layoutWidth*z,Q=d.deselectedLines.color,$=d.deselectedLines.opacity;return T.extendFlat({key:P,resolution:[N,G],viewBoxPos:[(f*=z)+U,C*=z],viewBoxSize:[w*=z,E*=z],i0:v,i1:_,dim0A:V[0].slice(0,16),dim0B:V[0].slice(16,32),dim0C:V[0].slice(32,48),dim0D:V[0].slice(48,64),dim1A:V[1].slice(0,16),dim1B:V[1].slice(16,32),dim1C:V[1].slice(32,48),dim1D:V[1].slice(48,64),drwLayer:L,contextColor:[Q[0]/255,Q[1]/255,Q[2]/255,"auto"!==$?Q[3]*$:Math.max(.00392156862745098,Math.pow(1/d.lines.color.length,.3333333333333333))],scissorX:(x===m?0:f+U)+(W-U)+ne*Z.x[0],scissorWidth:(x===g?N-f+U:w+.5)+(x===m?f+U:0),scissorY:C+ae+re*Z.y[0],scissorHeight:E,viewportX:W-U+ne*Z.x[0],viewportY:ae+re*Z.y[0],viewportWidth:N,viewportHeight:G},O)}function y(d){var m=2047,g=Math.max(0,Math.floor(d[0]*m),0),x=Math.min(m,Math.ceil(d[1]*m),m);return[Math.min(g,x),Math.max(g,x)]}ie.exports=function(d,m){var g,v,_,f,C=m.context,w=m.pick,E=m.regl,P=E._gl,L=P.getParameter(P.ALIASED_LINE_WIDTH_RANGE),O=Math.max(L[0],Math.min(L[1],m.viewModel.plotGlPixelRatio)),z={currentRafs:{},drawCompleted:!0,clearOnly:!1},V=function(G){for(var W={},ae=0;ae<=o;ae+=4)W[h(ae)]=G.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return W}(E),R=E.texture(t),U=[];N(m);var Z=E({profile:!1,blend:{enable:C,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!C,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:E.prop("scissorX"),y:E.prop("scissorY"),width:E.prop("scissorWidth"),height:E.prop("scissorHeight")}},viewport:{x:E.prop("viewportX"),y:E.prop("viewportY"),width:E.prop("viewportWidth"),height:E.prop("viewportHeight")},dither:!1,vert:S,frag:k,primitive:"lines",lineWidth:O,attributes:V,uniforms:{resolution:E.prop("resolution"),viewBoxPos:E.prop("viewBoxPos"),viewBoxSize:E.prop("viewBoxSize"),dim0A:E.prop("dim0A"),dim1A:E.prop("dim1A"),dim0B:E.prop("dim0B"),dim1B:E.prop("dim1B"),dim0C:E.prop("dim0C"),dim1C:E.prop("dim1C"),dim0D:E.prop("dim0D"),dim1D:E.prop("dim1D"),loA:E.prop("loA"),hiA:E.prop("hiA"),loB:E.prop("loB"),hiB:E.prop("hiB"),loC:E.prop("loC"),hiC:E.prop("hiC"),loD:E.prop("loD"),hiD:E.prop("hiD"),palette:R,contextColor:E.prop("contextColor"),maskTexture:E.prop("maskTexture"),drwLayer:E.prop("drwLayer"),maskHeight:E.prop("maskHeight")},offset:E.prop("offset"),count:E.prop("count")});function N(G){g=G.model,v=G.viewModel.dimensions.slice(),_=v[0]?v[0].values.length:0;var W=g.lines,ae=w?W.color.map(function(ne,Q){return Q/W.color.length}):W.color,re=function(ne,Q,$){for(var oe=new Array(ne*(o+4)),fe=0,ue=0;ue<ne;ue++){for(var ge=0;ge<o;ge++)oe[fe++]=ge<Q.length?Q[ge].paddedUnitValues[ue]:.5;oe[fe++]=a(ue,2),oe[fe++]=a(ue,1),oe[fe++]=a(ue,0),oe[fe++]=Math.max(1e-6,Math.min(.999999,$[ue]))}return oe}(_,v,ae);(function(ne,Q,$){for(var X=0;X<=o;X+=4)ne[h(X)](s(X/4,Q,$))})(V,_,re),C||w||(R=E.texture(T.extendFlat({data:n(g.unitToColor,255)},t)))}return{render:function(G,W,ae){var re,ne,Q,$=G.length,X=1/0,oe=-1/0;for(re=0;re<$;re++)G[re].dim0.canvasX<X&&(X=G[re].dim0.canvasX,ne=re),G[re].dim1.canvasX>oe&&(oe=G[re].dim1.canvasX,Q=re);0===$&&i(E,0,0,g.canvasWidth,g.canvasHeight);var fe=function(be){var he,ce,me,Pe=[[],[]];for(me=0;me<64;me++){var Ae=!be&&me<v.length?v[me].brush.filter.getBounds():[-1/0,1/0];Pe[0][me]=Ae[0],Pe[1][me]=Ae[1]}var Ce=new Array(16384);for(he=0;he<16384;he++)Ce[he]=255;if(!be)for(he=0;he<v.length;he++){var Oe=he%8,Ne=(he-Oe)/8,je=Math.pow(2,Oe),ve=v[he].brush.filter.get();if(!(ve.length<2)){var Me=y(ve[0])[1];for(ce=1;ce<ve.length;ce++){var Le=y(ve[ce]);for(me=Me+1;me<Le[0];me++)Ce[8*me+Ne]&=~je;Me=Math.max(Me,Le[1])}}}var Ue={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:Ce};return f?f(Ue):f=E.texture(Ue),{maskTexture:f,maskHeight:2048,loA:Pe[0].slice(0,16),loB:Pe[0].slice(16,32),loC:Pe[0].slice(32,48),loD:Pe[0].slice(48,64),hiA:Pe[1].slice(0,16),hiB:Pe[1].slice(16,32),hiC:Pe[1].slice(32,48),hiD:Pe[1].slice(48,64)}}(C);for(re=0;re<$;re++){var ue=G[re],ge=ue.dim0.crossfilterDimensionIndex,we=ue.dim1.crossfilterDimensionIndex,Te=ue.canvasX,xe=ue.canvasY,ye=Te+ue.panelSizeX,_e=ue.plotGlPixelRatio;if(W||!U[ge]||U[ge][0]!==Te||U[ge][1]!==ye){U[ge]=[Te,ye];var Ie=u(g,ne,Q,re,ge,we,Te,xe,ue.panelSizeX,ue.panelSizeY,ue.dim0.crossfilterDimensionIndex,C?0:w?2:1,fe,_e);z.clearOnly=ae,r(E,Z,z,W?g.lines.blockLineCount:_,_,Ie)}}},readPixel:function(G,W){return E.read({x:G,y:W,width:1,height:1,data:l}),l},readPixels:function(G,W,ae,re){var ne=new Uint8Array(4*ae*re);return E.read({x:G,y:W,width:ae,height:re,data:ne}),ne},destroy:function(){for(var G in d.style["pointer-events"]="none",R.destroy(),f&&f.destroy(),V)V[G].destroy()},update:N}}},26284:function(ie){"use strict";ie.exports=function(F,e,S,k){var o,T;for(k||(k=1/0),o=0;o<e.length;o++)(T=e[o]).visible&&(k=Math.min(k,T[S].length));for(k===1/0&&(k=0),F._length=k,o=0;o<e.length;o++)(T=e[o]).visible&&(T._length=k);return k}},36336:function(ie,F,e){"use strict";var S=e(33428),k=e(3400),o=k.isArrayOrTypedArray,T=k.numberFormat,b=e(96824),p=e(54460),l=k.strRotate,t=k.strTranslate,i=e(72736),r=e(43616),n=e(8932),a=e(71688),s=a.keyFun,c=a.repeat,h=a.unwrap,u=e(95724),y=e(30140),d=e(71864),m=e(51352);function g(Z,N,G){return k.aggNums(Z,null,N,G)}function x(Z,N){return _(g(Math.min,Z,N),g(Math.max,Z,N))}function v(Z){var N=Z.range;return N?_(N[0],N[1]):x(Z.values,Z._length)}function _(Z,N){return!isNaN(Z)&&isFinite(Z)||(Z=0),!isNaN(N)&&isFinite(N)||(N=0),Z===N&&(0===Z?(Z-=1,N+=1):(Z*=.9,N*=1.1)),[Z,N]}function f(Z,N,G,W,ae){var re,ne,Q=v(G);return W?S.scale.ordinal().domain(W.map((re=T(G.tickformat),ne=ae,ne?function($,X){return ne[X]??re($)}:re))).range(W.map(function($){return Z-N+($-Q[0])/(Q[1]-Q[0])*(2*N-Z)})):S.scale.linear().domain(Q).range([Z-N,N])}function C(Z){if(Z.tickvals){var N=v(Z);return S.scale.ordinal().domain(Z.tickvals).range(Z.tickvals.map(function(G){return(G-N[0])/(N[1]-N[0])}))}}function w(Z){var N=Z.map(function(ae){return ae[0]}),G=Z.map(function(ae){var re=b(ae[1]);return S.rgb("rgb("+re[0]+","+re[1]+","+re[2]+")")}),W="rgb".split("").map(function(ae){return S.scale.linear().clamp(!0).domain(N).range(G.map((re=ae,function(ne){return ne[re]})));var re});return function(ae){return W.map(function(re){return re(ae)})}}function E(Z){return Z.dimensions.some(function(N){return N.brush.filterSpecified})}function P(Z,N,G){var W=h(N),ae=W.trace,re=u.convertTypedArray(W.lineColor),ne=ae.line,Q={color:b(ae.unselected.line.color),opacity:ae.unselected.line.opacity},$=n.extractOpts(ne),X=$.reversescale?n.flipScale(W.cscale):W.cscale,oe=ae.domain,fe=ae.dimensions,ue=Z.width,ge=ae.labelangle,we=ae.labelside,Te=ae.labelfont,xe=ae.tickfont,ye=ae.rangefont,_e=k.extendDeepNoArrays({},ne,{color:re.map(S.scale.linear().domain(v({values:re,range:[$.min,$.max],_length:ae._length}))),blockLineCount:y.blockLineCount,canvasOverdrag:y.overdrag*y.canvasPixelRatio}),Ie=Math.floor(ue*(oe.x[1]-oe.x[0])),De=Math.floor(Z.height*(oe.y[1]-oe.y[0])),be=Z.margin||{l:80,r:80,t:100,b:80},he=Ie,ce=De;return{key:G,colCount:fe.filter(u.isVisible).length,dimensions:fe,tickDistance:y.tickDistance,unitToColor:w(X),lines:_e,deselectedLines:Q,labelAngle:ge,labelSide:we,labelFont:Te,tickFont:xe,rangeFont:ye,layoutWidth:ue,layoutHeight:Z.height,domain:oe,translateX:oe.x[0]*ue,translateY:Z.height-oe.y[1]*Z.height,pad:be,canvasWidth:he*y.canvasPixelRatio+2*_e.canvasOverdrag,canvasHeight:ce*y.canvasPixelRatio,width:he,height:ce,canvasPixelRatio:y.canvasPixelRatio}}function L(Z,N,G){var ue,ge,W=G.width,ae=G.height,re=G.dimensions,ne=G.canvasPixelRatio,Q=function(ue){return W*ue/Math.max(1,G.colCount-1)},$=y.verticalPadding/ae,X=(ue=ae,ge=y.verticalPadding,S.scale.linear().range([ge,ue-ge])),oe={key:G.key,xScale:Q,model:G,inBrushDrag:!1},fe={};return oe.dimensions=re.filter(u.isVisible).map(function(ue,ge){var Oe,Ne,we=(Oe=ue,Ne=$,S.scale.linear().domain(v(Oe)).range([Ne,1-Ne])),Te=fe[ue.label];fe[ue.label]=(Te||0)+1;var xe=ue.label+(Te?"__"+Te:""),ye=ue.constraintrange,_e=ye&&ye.length;_e&&!o(ye[0])&&(ye=[ye]);var Ie=_e?ye.map(function(Oe){return Oe.map(we)}):[[-1/0,1/0]],De=ue.values;De.length>ue._length&&(De=De.slice(0,ue._length));var be,he=ue.tickvals;function ce(Oe,Ne){return{val:Oe,text:be[Ne]}}function me(Oe,Ne){return Oe.val-Ne.val}if(o(he)&&he.length){k.isTypedArray(he)&&(he=Array.from(he)),o(be=ue.ticktext)&&be.length?be.length>he.length?be=be.slice(0,he.length):he.length>be.length&&(he=he.slice(0,be.length)):be=he.map(T(ue.tickformat));for(var Pe=1;Pe<he.length;Pe++)if(he[Pe]<he[Pe-1]){for(var Ae=he.map(ce).sort(me),Ce=0;Ce<he.length;Ce++)he[Ce]=Ae[Ce].val,be[Ce]=Ae[Ce].text;break}}else he=void 0;return De=u.convertTypedArray(De),{key:xe,label:ue.label,tickFormat:ue.tickformat,tickvals:he,ticktext:be,ordinal:u.isOrdinal(ue),multiselect:ue.multiselect,xIndex:ge,crossfilterDimensionIndex:ge,visibleIndex:ue._index,height:ae,values:De,paddedUnitValues:De.map(we),unitTickvals:he&&he.map(we),xScale:Q,x:Q(ge),canvasX:Q(ge)*ne,unitToPaddedPx:X,domainScale:f(ae,y.verticalPadding,ue,he,be),ordinalScale:C(ue),parent:oe,model:G,brush:d.makeBrush(Z,_e,Ie,function(){Z.linePickActive(!1)},function(){var Oe=oe;Oe.focusLayer&&Oe.focusLayer.render(Oe.panels,!0);var Ne=E(Oe);!Z.contextShown()&&Ne?(Oe.contextLayer&&Oe.contextLayer.render(Oe.panels,!0),Z.contextShown(!0)):Z.contextShown()&&!Ne&&(Oe.contextLayer&&Oe.contextLayer.render(Oe.panels,!0,!0),Z.contextShown(!1))},function(Oe){if(oe.focusLayer.render(oe.panels,!0),oe.pickLayer&&oe.pickLayer.render(oe.panels,!0),Z.linePickActive(!0),N&&N.filterChanged){var Ne=we.invert,je=Oe.map(function(ve){return ve.map(Ne).sort(k.sorterAsc)}).sort(function(ve,Me){return ve[0]-Me[0]});N.filterChanged(oe.key,ue._index,je)}})}}),oe}function O(Z){Z.classed(y.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function z(Z,N){var W=Z*Math.PI/180;return{dir:"top"===N?1:-1,dx:Math.sin(W),dy:Math.cos(W),degrees:Z}}function V(Z,N,G){for(var W=N.panels||(N.panels=[]),ae=Z.data(),re=0;re<ae.length-1;re++){var ne=W[re]||(W[re]={}),Q=ae[re],$=ae[re+1];ne.dim0=Q,ne.dim1=$,ne.canvasX=Q.canvasX,ne.panelSizeX=$.canvasX-Q.canvasX,ne.panelSizeY=N.model.canvasHeight,ne.y=0,ne.canvasY=0,ne.plotGlPixelRatio=G}}function R(Z,N){return p.tickText(Z._ax,N,!1).text}function U(Z,N){if(Z.ordinal)return"";var G=Z.domainScale.domain();return R(Z.model.dimensions[Z.visibleIndex],G[N?G.length-1:0])}ie.exports=function(Z,N,G,W){var ae=Z._context.staticPlot,re=Z._fullLayout,ne=re._toppaper,Q=re._glcontainer,$=Z._context.plotGlPixelRatio,X=Z._fullLayout.paper_bgcolor;!function(Oe){for(var Ne=0;Ne<Oe.length;Ne++)for(var je=0;je<Oe[Ne].length;je++)for(var ve=Oe[Ne][je].trace,Me=ve.dimensions,Le=0;Le<Me.length;Le++){var Ue=Me[Le].values,ze=Me[Le]._ax;ze&&(ze.range=ze.range?_(ze.range[0],ze.range[1]):x(Ue,ve._length),ze.dtick||(ze.dtick=.01*(Math.abs(ze.range[1]-ze.range[0])||1)),ze.tickformat=Me[Le].tickformat,p.calcTicks(ze),ze.cleanRange())}}(N);var oe,fe,ue=(oe=!0,fe=!1,{linePickActive:function(Oe){return arguments.length?oe=!!Oe:oe},contextShown:function(Oe){return arguments.length?fe=!!Oe:fe}}),ge=N.filter(function(Oe){return h(Oe).trace.visible}).map(P.bind(0,G)).map(L.bind(0,ue,W));Q.each(function(Oe,Ne){return k.extendFlat(Oe,ge[Ne])});var we=Q.selectAll(".gl-canvas").each(function(Oe){Oe.viewModel=ge[0],Oe.viewModel.plotGlPixelRatio=$,Oe.viewModel.paperColor=X,Oe.model=Oe.viewModel?Oe.viewModel.model:null}),Te=null;we.filter(function(Oe){return Oe.pick}).style("pointer-events",ae?"none":"auto").on("mousemove",function(Oe){if(ue.linePickActive()&&Oe.lineLayer&&W&&W.hover){var Ne=S.event,je=this.width,ve=this.height,Me=S.mouse(this),Le=Me[0],Ue=Me[1];if(Le<0||Ue<0||Le>=je||Ue>=ve)return;var ze=Oe.lineLayer.readPixel(Le,ve-1-Ue),qe=0!==ze[3],Ke=qe?ze[2]+256*(ze[1]+256*ze[0]):null,it={x:Le,y:Ue,clientX:Ne.clientX,clientY:Ne.clientY,dataIndex:Oe.model.key,curveNumber:Ke};Ke!==Te&&(qe?W.hover(it):W.unhover&&W.unhover(it),Te=Ke)}}),we.style("opacity",function(Oe){return Oe.pick?0:1}),ne.style("background","rgba(255, 255, 255, 0)");var xe=ne.selectAll("."+y.cn.parcoords).data(ge,s);xe.exit().remove(),xe.enter().append("g").classed(y.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),xe.attr("transform",function(Oe){return t(Oe.model.translateX,Oe.model.translateY)});var ye=xe.selectAll("."+y.cn.parcoordsControlView).data(c,s);ye.enter().append("g").classed(y.cn.parcoordsControlView,!0),ye.attr("transform",function(Oe){return t(Oe.model.pad.l,Oe.model.pad.t)});var _e=ye.selectAll("."+y.cn.yAxis).data(function(Oe){return Oe.dimensions},s);_e.enter().append("g").classed(y.cn.yAxis,!0),ye.each(function(Oe){V(_e,Oe,$)}),we.each(function(Oe){Oe.viewModel&&(!Oe.lineLayer||W?Oe.lineLayer=m(this,Oe):Oe.lineLayer.update(Oe),(Oe.key||0===Oe.key)&&(Oe.viewModel[Oe.key]=Oe.lineLayer),Oe.lineLayer.render(Oe.viewModel.panels,!Oe.context||W))}),_e.attr("transform",function(Oe){return t(Oe.xScale(Oe.xIndex),0)}),_e.call(S.behavior.drag().origin(function(Oe){return Oe}).on("drag",function(Oe){var Ne=Oe.parent;ue.linePickActive(!1),Oe.x=Math.max(-y.overdrag,Math.min(Oe.model.width+y.overdrag,S.event.x)),Oe.canvasX=Oe.x*Oe.model.canvasPixelRatio,_e.sort(function(je,ve){return je.x-ve.x}).each(function(je,ve){je.xIndex=ve,je.x=Oe===je?je.x:je.xScale(je.xIndex),je.canvasX=je.x*je.model.canvasPixelRatio}),V(_e,Ne,$),_e.filter(function(je){return 0!==Math.abs(Oe.xIndex-je.xIndex)}).attr("transform",function(je){return t(je.xScale(je.xIndex),0)}),S.select(this).attr("transform",t(Oe.x,0)),_e.each(function(je,ve,Me){Me===Oe.parent.key&&(Ne.dimensions[ve]=je)}),Ne.contextLayer&&Ne.contextLayer.render(Ne.panels,!1,!E(Ne)),Ne.focusLayer.render&&Ne.focusLayer.render(Ne.panels)}).on("dragend",function(Oe){var Ne=Oe.parent;Oe.x=Oe.xScale(Oe.xIndex),Oe.canvasX=Oe.x*Oe.model.canvasPixelRatio,V(_e,Ne,$),S.select(this).attr("transform",function(je){return t(je.x,0)}),Ne.contextLayer&&Ne.contextLayer.render(Ne.panels,!1,!E(Ne)),Ne.focusLayer&&Ne.focusLayer.render(Ne.panels),Ne.pickLayer&&Ne.pickLayer.render(Ne.panels,!0),ue.linePickActive(!0),W&&W.axesMoved&&W.axesMoved(Ne.key,Ne.dimensions.map(function(je){return je.crossfilterDimensionIndex}))})),_e.exit().remove();var Ie=_e.selectAll("."+y.cn.axisOverlays).data(c,s);Ie.enter().append("g").classed(y.cn.axisOverlays,!0),Ie.selectAll("."+y.cn.axis).remove();var De=Ie.selectAll("."+y.cn.axis).data(c,s);De.enter().append("g").classed(y.cn.axis,!0),De.each(function(Oe){var Ne=Oe.model.height/Oe.model.tickDistance,je=Oe.domainScale,ve=je.domain();S.select(this).call(S.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Ne,Oe.tickFormat).tickValues(Oe.ordinal?ve:null).tickFormat(function(Me){return u.isOrdinal(Oe)?Me:R(Oe.model.dimensions[Oe.visibleIndex],Me)}).scale(je)),r.font(De.selectAll("text"),Oe.model.tickFont)}),De.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),De.selectAll("text").style("cursor","default");var be=Ie.selectAll("."+y.cn.axisHeading).data(c,s);be.enter().append("g").classed(y.cn.axisHeading,!0);var he=be.selectAll("."+y.cn.axisTitle).data(c,s);he.enter().append("text").classed(y.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",ae?"none":"auto"),he.text(function(Oe){return Oe.label}).each(function(Oe){var Ne=S.select(this);r.font(Ne,Oe.model.labelFont),i.convertToTspans(Ne,Z)}).attr("transform",function(Oe){var Ne=z(Oe.model.labelAngle,Oe.model.labelSide),je=y.axisTitleOffset;return(Ne.dir>0?"":t(0,2*je+Oe.model.height))+l(Ne.degrees)+t(-je*Ne.dx,-je*Ne.dy)}).attr("text-anchor",function(Oe){var Ne=z(Oe.model.labelAngle,Oe.model.labelSide);return 2*Math.abs(Ne.dx)>Math.abs(Ne.dy)?Ne.dir*Ne.dx<0?"start":"end":"middle"});var ce=Ie.selectAll("."+y.cn.axisExtent).data(c,s);ce.enter().append("g").classed(y.cn.axisExtent,!0);var me=ce.selectAll("."+y.cn.axisExtentTop).data(c,s);me.enter().append("g").classed(y.cn.axisExtentTop,!0),me.attr("transform",t(0,-y.axisExtentOffset));var Pe=me.selectAll("."+y.cn.axisExtentTopText).data(c,s);Pe.enter().append("text").classed(y.cn.axisExtentTopText,!0).call(O),Pe.text(function(Oe){return U(Oe,!0)}).each(function(Oe){r.font(S.select(this),Oe.model.rangeFont)});var Ae=ce.selectAll("."+y.cn.axisExtentBottom).data(c,s);Ae.enter().append("g").classed(y.cn.axisExtentBottom,!0),Ae.attr("transform",function(Oe){return t(0,Oe.model.height+y.axisExtentOffset)});var Ce=Ae.selectAll("."+y.cn.axisExtentBottomText).data(c,s);Ce.enter().append("text").classed(y.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(O),Ce.text(function(Oe){return U(Oe,!1)}).each(function(Oe){r.font(S.select(this),Oe.model.rangeFont)}),d.ensureAxisBrush(Ie,X,Z)}},24196:function(ie,F,e){"use strict";var S=e(36336),k=e(5048),o=e(95724).isVisible,T={};function b(p,l,t){var i=l.indexOf(t),r=p.indexOf(i);return-1===r&&(r+=l.length),r}(ie.exports=function(p,l){var t=p._fullLayout;if(k(p,[],T)){var i={},r={},n={},a={},s=t._size;l.forEach(function(c,h){var u=c[0].trace;n[h]=u.index;var y=a[h]=u._fullInput.index;i[h]=p.data[y].dimensions,r[h]=p.data[y].dimensions.slice()}),S(p,l,{width:s.w,height:s.h,margin:{t:s.t,r:s.r,b:s.b,l:s.l}},{filterChanged:function(c,h,u){var y=r[c][h],d=u.map(function(f){return f.slice()}),m="dimensions["+h+"].constraintrange",g=t._tracePreGUI[p._fullData[n[c]]._fullInput.uid];void 0===g[m]&&(g[m]=y.constraintrange||null);var v=p._fullData[n[c]].dimensions[h];d.length?(1===d.length&&(d=d[0]),y.constraintrange=d,v.constraintrange=d.slice(),d=[d]):(delete y.constraintrange,delete v.constraintrange,d=null);var _={};_[m]=d,p.emit("plotly_restyle",[_,[a[c]]])},hover:function(c){p.emit("plotly_hover",c)},unhover:function(c){p.emit("plotly_unhover",c)},axesMoved:function(c,h){var y,d,u=(y=h,d=r[c].filter(o),function(m,g){return b(y,d,m)-b(y,d,g)});i[c].sort(u),r[c].filter(function(y){return!o(y)}).sort(function(y){return r[c].indexOf(y)}).forEach(function(y){i[c].splice(i[c].indexOf(y),1),i[c].splice(r[c].indexOf(y),0,y)}),p.emit("plotly_restyle",[{dimensions:[i[c]]},[a[c]]])}})}}).reglPrecompiled=T},74996:function(ie,F,e){"use strict";var S=e(45464),k=e(86968).u,o=e(25376),T=e(22548),b=e(21776).Ks,p=e(21776).Gw,l=e(92880).extendFlat,t=e(98192).c,i=o({editType:"plot",arrayOk:!0,colorEditType:"plot"});ie.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:T.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:t,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:l({},S.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:b({},{keys:["label","color","value","percent","text"]}),texttemplate:p({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:l({},i,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:l({},i,{}),outsidetextfont:l({},i,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:l({},i,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:k({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:l({},i,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},80036:function(ie,F,e){"use strict";var S=e(7316);F.name="pie",F.plot=function(k,o,T,b){S.plotBasePlot(F.name,k,o,T,b)},F.clean=function(k,o,T,b){S.cleanBasePlot(F.name,k,o,T,b)}},45768:function(ie,F,e){"use strict";var S=e(38248),k=e(49760),o=e(76308),T={};function b(l){return function(t,i){return!!t&&!!(t=k(t)).isValid()&&(t=o.addOpacity(t,t.getAlpha()),l[i]||(l[i]=t),t)}}function p(l,t){var i,r=JSON.stringify(l),n=t[r];if(!n){for(n=l.slice(),i=0;i<l.length;i++)n.push(k(l[i]).lighten(20).toHexString());for(i=0;i<l.length;i++)n.push(k(l[i]).darken(20).toHexString());t[r]=n}return n}ie.exports={calc:function(l,t){var i,r,n=[],a=l._fullLayout,s=a.hiddenlabels||[],c=t.labels,h=t.marker.colors||[],u=t.values,y=t._length,d=t._hasValues&&y;if(t.dlabel)for(c=new Array(y),i=0;i<y;i++)c[i]=String(t.label0+i*t.dlabel);var m={},g=b(a["_"+t.type+"colormap"]),x=0,v=!1;for(i=0;i<y;i++){var _,f,C;if(d){if(!S(_=u[i]))continue;_=+_}else _=1;void 0!==(f=c[i])&&""!==f||(f=i);var w=m[f=String(f)];void 0===w?(m[f]=n.length,(C=-1!==s.indexOf(f))||(x+=_),n.push({v:_,label:f,color:g(h[i],f),i,pts:[i],hidden:C})):(v=!0,(r=n[w]).v+=_,r.pts.push(i),r.hidden||(x+=_),!1===r.color&&h[i]&&(r.color=g(h[i],f)))}return n=n.filter(function(E){return E.v>=0}),("funnelarea"===t.type?v:t.sort)&&n.sort(function(E,P){return P.v-E.v}),n[0]&&(n[0].vTotal=x),n},crossTraceCalc:function(l,t){var i=(t||{}).type;i||(i="pie");var r=l._fullLayout,n=l.calcdata,a=r[i+"colorway"],s=r["_"+i+"colormap"];r["extend"+i+"colors"]&&(a=p(a,T));for(var c=0,h=0;h<n.length;h++){var u=n[h];if(u[0].trace.type===i)for(var y=0;y<u.length;y++){var d=u[y];!1===d.color&&(s[d.label]?d.color=s[d.label]:(s[d.label]=d.color=a[c%a.length],c++))}}},makePullColorFn:b,generateExtendedColors:p}},74174:function(ie,F,e){"use strict";var S=e(38248),k=e(3400),o=e(74996),T=e(86968).Q,b=e(31508).handleText,p=e(3400).coercePattern;function l(i,r){var n=k.isArrayOrTypedArray(i),a=k.isArrayOrTypedArray(r),s=Math.min(n?i.length:1/0,a?r.length:1/0);if(isFinite(s)||(s=0),s&&a){for(var c,h=0;h<s;h++){var u=r[h];if(S(u)&&u>0){c=!0;break}}c||(s=0)}return{hasLabels:n,hasValues:a,len:s}}function t(i,r,n,a,s){a("marker.line.width")&&a("marker.line.color",s?void 0:n.paper_bgcolor);var c=a("marker.colors");p(a,"marker.pattern",c),i.marker&&!r.marker.pattern.fgcolor&&(r.marker.pattern.fgcolor=i.marker.colors),r.marker.pattern.bgcolor||(r.marker.pattern.bgcolor=n.paper_bgcolor)}ie.exports={handleLabelsAndValues:l,handleMarkerDefaults:t,supplyDefaults:function(i,r,n,a){function s(v,_){return k.coerce(i,r,o,v,_)}var c=l(s("labels"),s("values")),h=c.len;if(r._hasLabels=c.hasLabels,r._hasValues=c.hasValues,!r._hasLabels&&r._hasValues&&(s("label0"),s("dlabel")),h){r._length=h,t(i,r,a,s,!0),s("scalegroup");var u,y=s("text"),d=s("texttemplate");if(d||(u=s("textinfo",k.isArrayOrTypedArray(y)?"text+percent":"percent")),s("hovertext"),s("hovertemplate"),d||u&&"none"!==u){var m=s("textposition");b(i,r,a,s,m,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(m)||"auto"===m||"outside"===m)&&s("automargin"),("inside"===m||"auto"===m||Array.isArray(m))&&s("insidetextorientation")}else"none"===u&&s("textposition","none");T(r,a,s);var g=s("hole");if(s("title.text")){var x=s("title.position",g?"middle center":"top center");g||"middle center"!==x||(r.title.position="top center"),k.coerceFont(s,"title.font",a.font)}s("sort"),s("direction"),s("rotation"),s("pull")}else r.visible=!1}}},53644:function(ie,F,e){"use strict";var S=e(10624).appendArrayMultiPointValues;ie.exports=function(k,o){var T={curveNumber:o.index,pointNumbers:k.pts,data:o._input,fullData:o,label:k.label,color:k.color,value:k.v,percent:k.percent,text:k.text,bbox:k.bbox,v:k.v};return 1===k.pts.length&&(T.pointNumber=T.i=k.pts[0]),S(T,o,k.pts),"funnelarea"===o.type&&(delete T.v,delete T.i),T}},21552:function(ie,F,e){"use strict";var S=e(43616),k=e(76308);ie.exports=function(o,T,b,p){var l=b.marker.pattern;l&&l.shape?S.pointStyle(o,b,p,T):k.fill(o,T.color)}},69656:function(ie,F,e){"use strict";var S=e(3400);function k(o){return-1!==o.indexOf("e")?o.replace(/[.]?0+e/,"e"):-1!==o.indexOf(".")?o.replace(/[.]?0+$/,""):o}F.formatPiePercent=function(o,T){var b=k((100*o).toPrecision(3));return S.numSeparate(b,T)+"%"},F.formatPieValue=function(o,T){var b=k(o.toPrecision(10));return S.numSeparate(b,T)},F.getFirstFilled=function(o,T){if(S.isArrayOrTypedArray(o))for(var b=0;b<T.length;b++){var p=o[T[b]];if(p||0===p||""===p)return p}},F.castOption=function(o,T){return S.isArrayOrTypedArray(o)?F.getFirstFilled(o,T):o||void 0},F.getRotationAngle=function(o){return("auto"===o?0:o)*Math.PI/180}},75792:function(ie,F,e){"use strict";ie.exports={attributes:e(74996),supplyDefaults:e(74174).supplyDefaults,supplyLayoutDefaults:e(90248),layoutAttributes:e(85204),calc:e(45768).calc,crossTraceCalc:e(45768).crossTraceCalc,plot:e(37820).plot,style:e(22152),styleOne:e(10528),moduleType:"trace",name:"pie",basePlotModule:e(80036),categories:["pie-like","pie","showLegend"],meta:{}}},85204:function(ie){"use strict";ie.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},90248:function(ie,F,e){"use strict";var S=e(3400),k=e(85204);ie.exports=function(o,T){function b(p,l){return S.coerce(o,T,k,p,l)}b("hiddenlabels"),b("piecolorway",T.colorway),b("extendpiecolors")}},37820:function(ie,F,e){"use strict";var S=e(33428),k=e(7316),o=e(93024),T=e(76308),b=e(43616),p=e(3400),l=p.strScale,t=p.strTranslate,i=e(72736),r=e(82744),n=r.recordMinTextSize,a=r.clearMinTextSize,s=e(78048).TEXTPAD,c=e(69656),h=e(53644),u=e(3400).isValidTextValue;function y(Z,N,G){var W=G[0],ae=W.cx,re=W.cy,ne=W.trace,Q="funnelarea"===ne.type;"_hasHoverLabel"in ne||(ne._hasHoverLabel=!1),"_hasHoverEvent"in ne||(ne._hasHoverEvent=!1),Z.on("mouseover",function($){var X=N._fullLayout,oe=N._fullData[ne.index];if(!N._dragging&&!1!==X.hovermode){var fe=oe.hoverinfo;if(Array.isArray(fe)&&(fe=o.castHoverinfo({hoverinfo:[c.castOption(fe,$.pts)],_module:ne._module},X,0)),"all"===fe&&(fe="label+text+value+percent+name"),oe.hovertemplate||"none"!==fe&&"skip"!==fe&&fe){var ue=$.rInscribed||0,ge=ae+$.pxmid[0]*(1-ue),we=re+$.pxmid[1]*(1-ue),Te=X.separators,xe=[];if(fe&&-1!==fe.indexOf("label")&&xe.push($.label),$.text=c.castOption(oe.hovertext||oe.text,$.pts),fe&&-1!==fe.indexOf("text")){var ye=$.text;p.isValidTextValue(ye)&&xe.push(ye)}$.value=$.v,$.valueLabel=c.formatPieValue($.v,Te),fe&&-1!==fe.indexOf("value")&&xe.push($.valueLabel),$.percent=$.v/W.vTotal,$.percentLabel=c.formatPiePercent($.percent,Te),fe&&-1!==fe.indexOf("percent")&&xe.push($.percentLabel);var _e=oe.hoverlabel,Ie=_e.font,De=[];o.loneHover({trace:ne,x0:ge-ue*W.r,x1:ge+ue*W.r,y:we,_x0:Q?ae+$.TL[0]:ge-ue*W.r,_x1:Q?ae+$.TR[0]:ge+ue*W.r,_y0:Q?re+$.TL[1]:we-ue*W.r,_y1:Q?re+$.BL[1]:we+ue*W.r,text:xe.join("<br>"),name:oe.hovertemplate||-1!==fe.indexOf("name")?oe.name:void 0,idealAlign:$.pxmid[0]<0?"left":"right",color:c.castOption(_e.bgcolor,$.pts)||$.color,borderColor:c.castOption(_e.bordercolor,$.pts),fontFamily:c.castOption(Ie.family,$.pts),fontSize:c.castOption(Ie.size,$.pts),fontColor:c.castOption(Ie.color,$.pts),nameLength:c.castOption(_e.namelength,$.pts),textAlign:c.castOption(_e.align,$.pts),hovertemplate:c.castOption(oe.hovertemplate,$.pts),hovertemplateLabels:$,eventData:[h($,oe)]},{container:X._hoverlayer.node(),outerContainer:X._paper.node(),gd:N,inOut_bbox:De}),$.bbox=De[0],ne._hasHoverLabel=!0}ne._hasHoverEvent=!0,N.emit("plotly_hover",{points:[h($,oe)],event:S.event})}}),Z.on("mouseout",function($){var X=N._fullLayout,oe=N._fullData[ne.index],fe=S.select(this).datum();ne._hasHoverEvent&&($.originalEvent=S.event,N.emit("plotly_unhover",{points:[h(fe,oe)],event:S.event}),ne._hasHoverEvent=!1),ne._hasHoverLabel&&(o.loneUnhover(X._hoverlayer.node()),ne._hasHoverLabel=!1)}),Z.on("click",function($){N._dragging||!1===N._fullLayout.hovermode||(N._hoverdata=[h($,N._fullData[ne.index])],o.click(N,S.event))})}function d(Z,N,G){var W=c.castOption(Z.insidetextfont.color,N.pts);!W&&Z._input.textfont&&(W=c.castOption(Z._input.textfont.color,N.pts));var ae=c.castOption(Z.insidetextfont.family,N.pts)||c.castOption(Z.textfont.family,N.pts)||G.family,re=c.castOption(Z.insidetextfont.size,N.pts)||c.castOption(Z.textfont.size,N.pts)||G.size,ne=c.castOption(Z.insidetextfont.weight,N.pts)||c.castOption(Z.textfont.weight,N.pts)||G.weight,Q=c.castOption(Z.insidetextfont.style,N.pts)||c.castOption(Z.textfont.style,N.pts)||G.style,$=c.castOption(Z.insidetextfont.variant,N.pts)||c.castOption(Z.textfont.variant,N.pts)||G.variant,X=c.castOption(Z.insidetextfont.textcase,N.pts)||c.castOption(Z.textfont.textcase,N.pts)||G.textcase,oe=c.castOption(Z.insidetextfont.lineposition,N.pts)||c.castOption(Z.textfont.lineposition,N.pts)||G.lineposition,fe=c.castOption(Z.insidetextfont.shadow,N.pts)||c.castOption(Z.textfont.shadow,N.pts)||G.shadow;return{color:W||T.contrast(N.color),family:ae,size:re,weight:ne,style:Q,variant:$,textcase:X,lineposition:oe,shadow:fe}}function m(Z,N){for(var G,W,ae=0;ae<Z.length;ae++)if((W=(G=Z[ae][0]).trace).title.text){var re=W.title.text;W._meta&&(re=p.templateString(re,W._meta));var ne=b.tester.append("text").attr("data-notex",1).text(re).call(b.font,W.title.font).call(i.convertToTspans,N),Q=b.bBox(ne.node(),!0);G.titleBox={width:Q.width,height:Q.height},ne.remove()}}function g(Z,N,G){var W=G.r||N.rpx1,ae=N.rInscribed;if(N.startangle===N.stopangle)return{rCenter:1-ae,scale:0,rotate:0,textPosAngle:0};var re,ne=N.ring,Q=1===ne&&Math.abs(N.startangle-N.stopangle)===2*Math.PI,$=N.halfangle,X=N.midangle,oe=G.trace.insidetextorientation,fe="horizontal"===oe,ue="tangential"===oe,ge="radial"===oe,we="auto"===oe,Te=[];if(!we){var xe,ye=function(ce,me){if(ve=(Oe=N).stopangle,(je=Oe.startangle)>(Ne=ce)&&Ne>ve||je<Ne&&Ne<ve){var Pe=Math.abs(ce-N.startangle),Ae=Math.abs(ce-N.stopangle),Ce=Pe<Ae?Pe:Ae;(re="tan"===me?v(Z,W,ne,Ce,0):x(Z,W,ne,Ce,Math.PI/2)).textPosAngle=ce,Te.push(re)}var Oe,Ne,je,ve};if(fe||ue){for(xe=4;xe>=-4;xe-=2)ye(Math.PI*xe,"tan");for(xe=4;xe>=-4;xe-=2)ye(Math.PI*(xe+1),"tan")}if(fe||ge){for(xe=4;xe>=-4;xe-=2)ye(Math.PI*(xe+1.5),"rad");for(xe=4;xe>=-4;xe-=2)ye(Math.PI*(xe+.5),"rad")}}if(Q||we||fe){var _e=Math.sqrt(Z.width*Z.width+Z.height*Z.height);if((re={scale:ae*W*2/_e,rCenter:1-ae,rotate:0}).textPosAngle=(N.startangle+N.stopangle)/2,re.scale>=1)return re;Te.push(re)}(we||ge)&&((re=x(Z,W,ne,$,X)).textPosAngle=(N.startangle+N.stopangle)/2,Te.push(re)),(we||ue)&&((re=v(Z,W,ne,$,X)).textPosAngle=(N.startangle+N.stopangle)/2,Te.push(re));for(var Ie=0,De=0,be=0;be<Te.length;be++){var he=Te[be].scale;if(De<he&&(De=he,Ie=be),!we&&De>=1)break}return Te[Ie]}function x(Z,N,G,W,ae){N=Math.max(0,N-2*s);var re=Z.width/Z.height,ne=C(re,W,N,G);return{scale:2*ne/Z.height,rCenter:_(re,ne/N),rotate:f(ae)}}function v(Z,N,G,W,ae){N=Math.max(0,N-2*s);var re=Z.height/Z.width,ne=C(re,W,N,G);return{scale:2*ne/Z.width,rCenter:_(re,ne/N),rotate:f(ae+Math.PI/2)}}function _(Z,N){return Math.cos(N)-Z*N}function f(Z){return(180/Math.PI*Z+720)%180-90}function C(Z,N,G,W){var ae=Z+1/(2*Math.tan(N));return G*Math.min(1/(Math.sqrt(ae*ae+.5)+ae),W/(Math.sqrt(Z*Z+W/2)+Z))}function w(Z,N){return Z.v!==N.vTotal||N.trace.hole?Math.min(1/(1+1/Math.sin(Z.halfangle)),Z.ring/2):1}function E(Z,N){var G=N.pxmid[0],W=N.pxmid[1],ae=Z.width/2,re=Z.height/2;return G<0&&(ae*=-1),W<0&&(re*=-1),{scale:1,rCenter:1,rotate:0,x:ae+Math.abs(re)*(ae>0?1:-1)/2,y:re/(1+G*G/(W*W)),outside:!0}}function P(Z,N){var G,W,ae,re=Z.trace,ne={x:Z.cx,y:Z.cy},Q={tx:0,ty:0};Q.ty+=re.title.font.size,ae=O(re),-1!==re.title.position.indexOf("top")?(ne.y-=(1+ae)*Z.r,Q.ty-=Z.titleBox.height):-1!==re.title.position.indexOf("bottom")&&(ne.y+=(1+ae)*Z.r);var $,X=Z.r/(void 0===($=Z.trace.aspectratio)?1:$),oe=N.w*(re.domain.x[1]-re.domain.x[0])/2;return-1!==re.title.position.indexOf("left")?(oe+=X,ne.x-=(1+ae)*X,Q.tx+=Z.titleBox.width/2):-1!==re.title.position.indexOf("center")?oe*=2:-1!==re.title.position.indexOf("right")&&(oe+=X,ne.x+=(1+ae)*X,Q.tx-=Z.titleBox.width/2),G=oe/Z.titleBox.width,W=L(Z,N)/Z.titleBox.height,{x:ne.x,y:ne.y,scale:Math.min(G,W),tx:Q.tx,ty:Q.ty}}function L(Z,N){var G=Z.trace;return Math.min(Z.titleBox.height,N.h*(G.domain.y[1]-G.domain.y[0])/2)}function O(Z){var N,G=Z.pull;if(!G)return 0;if(p.isArrayOrTypedArray(G))for(G=0,N=0;N<Z.pull.length;N++)Z.pull[N]>G&&(G=Z.pull[N]);return G}function z(Z,N){for(var G=[],W=0;W<Z.length;W++){var ae=Z[W][0],re=ae.trace,ne=re.domain,Q=N.w*(ne.x[1]-ne.x[0]),$=N.h*(ne.y[1]-ne.y[0]);re.title.text&&"middle center"!==re.title.position&&($-=L(ae,N));var oe=$/2;"funnelarea"!==re.type||re.scalegroup||(oe/=re.aspectratio),ae.r=Math.min(Q/2,oe)/(1+O(re)),ae.cx=N.l+N.w*(re.domain.x[1]+re.domain.x[0])/2,ae.cy=N.t+N.h*(1-re.domain.y[0])-$/2,re.title.text&&-1!==re.title.position.indexOf("bottom")&&(ae.cy-=L(ae,N)),re.scalegroup&&-1===G.indexOf(re.scalegroup)&&G.push(re.scalegroup)}!function(fe,ue){for(var ge,we,Te,xe=0;xe<ue.length;xe++){var ye=1/0,_e=ue[xe];for(we=0;we<fe.length;we++)if((Te=(ge=fe[we][0]).trace).scalegroup===_e){var Ie;if("pie"===Te.type)Ie=ge.r*ge.r;else if("funnelarea"===Te.type){var De,be;Te.aspectratio>1?be=(De=ge.r)/Te.aspectratio:De=(be=ge.r)*Te.aspectratio,Ie=(De*=(1+Te.baseratio)/2)*be}ye=Math.min(ye,Ie/ge.vTotal)}for(we=0;we<fe.length;we++)if((Te=(ge=fe[we][0]).trace).scalegroup===_e){var he=ye*ge.vTotal;"funnelarea"===Te.type&&(he/=(1+Te.baseratio)/2,he/=Te.aspectratio),ge.r=Math.sqrt(he)}}}(Z,G)}function V(Z,N){return[Z*Math.sin(N),-Z*Math.cos(N)]}function R(Z,N,G){var Ie,W=Z._fullLayout,ae=G.trace,re=ae.texttemplate,ne=ae.textinfo;if(!re&&ne&&"none"!==ne){var Q,$=ne.split("+"),X=function(Ie){return-1!==$.indexOf(Ie)},oe=X("label"),fe=X("text"),ue=X("value"),ge=X("percent"),we=W.separators;if(Q=oe?[N.label]:[],fe){var Te=c.getFirstFilled(ae.text,N.pts);u(Te)&&Q.push(Te)}ue&&Q.push(c.formatPieValue(N.v,we)),ge&&Q.push(c.formatPiePercent(N.v/G.vTotal,we)),N.text=Q.join("<br>")}if(re){var xe=p.castOption(ae,N.i,"texttemplate");if(xe){var ye={label:(Ie=N).label,value:Ie.v,valueLabel:c.formatPieValue(Ie.v,W.separators),percent:Ie.v/G.vTotal,percentLabel:c.formatPiePercent(Ie.v/G.vTotal,W.separators),color:Ie.color,text:Ie.text,customdata:p.castOption(ae,Ie.i,"customdata")},_e=c.getFirstFilled(ae.text,N.pts);(u(_e)||""===_e)&&(ye.text=_e),N.text=p.texttemplateString(xe,ye,Z._fullLayout._d3locale,ye,ae._meta||{})}else N.text=""}}function U(Z,N){var G=Z.rotate*Math.PI/180,W=Math.cos(G),ae=Math.sin(G),re=(N.left+N.right)/2,ne=(N.top+N.bottom)/2;Z.textX=re*W-ne*ae,Z.textY=re*ae+ne*W,Z.noCenter=!0}ie.exports={plot:function(Z,N){var G=Z._context.staticPlot,W=Z._fullLayout,ae=W._size;a("pie",W),m(N,Z),z(N,ae);var re=p.makeTraceGroups(W._pielayer,N,"trace").each(function(ne){var Q=S.select(this),$=ne[0],X=$.trace;(function(oe){var fe,ue,ge,we=oe[0],Te=we.r,xe=we.trace,ye=c.getRotationAngle(xe.rotation),_e=2*Math.PI/we.vTotal,Ie="px0",De="px1";if("counterclockwise"===xe.direction){for(fe=0;fe<oe.length&&oe[fe].hidden;fe++);if(fe===oe.length)return;ye+=_e*oe[fe].v,_e*=-1,Ie="px1",De="px0"}for(ge=V(Te,ye),fe=0;fe<oe.length;fe++)(ue=oe[fe]).hidden||(ue[Ie]=ge,ue.startangle=ye,ue.pxmid=V(Te,ye+=_e*ue.v/2),ue.midangle=ye,ge=V(Te,ye+=_e*ue.v/2),ue.stopangle=ye,ue[De]=ge,ue.largeArc=ue.v>we.vTotal/2?1:0,ue.halfangle=Math.PI*Math.min(ue.v/we.vTotal,.5),ue.ring=1-xe.hole,ue.rInscribed=w(ue,we))})(ne),Q.attr("stroke-linejoin","round"),Q.each(function(){var oe=S.select(this).selectAll("g.slice").data(ne);oe.enter().append("g").classed("slice",!0),oe.exit().remove();var fe=[[[],[]],[[],[]]],ue=!1;oe.each(function(De,be){if(De.hidden)S.select(this).selectAll("path,g").remove();else{De.pointNumber=De.i,De.curveNumber=X.index,fe[De.pxmid[1]<0?0:1][De.pxmid[0]<0?0:1].push(De);var he=$.cx,ce=$.cy,me=S.select(this),Pe=me.selectAll("path.surface").data([De]);if(Pe.enter().append("path").classed("surface",!0).style({"pointer-events":G?"none":"all"}),me.call(y,Z,ne),X.pull){var Ae=+c.castOption(X.pull,De.pts)||0;Ae>0&&(he+=Ae*De.pxmid[0],ce+=Ae*De.pxmid[1])}De.cxFinal=he,De.cyFinal=ce;var Ce=X.hole;if(De.v===$.vTotal){var Oe="M"+(he+De.px0[0])+","+(ce+De.px0[1])+Le(De.px0,De.pxmid,!0,1)+Le(De.pxmid,De.px0,!0,1)+"Z";Pe.attr("d",Ce?"M"+(he+Ce*De.px0[0])+","+(ce+Ce*De.px0[1])+Le(De.px0,De.pxmid,!1,Ce)+Le(De.pxmid,De.px0,!1,Ce)+"Z"+Oe:Oe)}else{var Ne=Le(De.px0,De.px1,!0,1);if(Ce){var je=1-Ce;Pe.attr("d","M"+(he+Ce*De.px1[0])+","+(ce+Ce*De.px1[1])+Le(De.px1,De.px0,!1,Ce)+"l"+je*De.px0[0]+","+je*De.px0[1]+Ne+"Z")}else Pe.attr("d","M"+he+","+ce+"l"+De.px0[0]+","+De.px0[1]+Ne+"Z")}R(Z,De,$);var ve=c.castOption(X.textposition,De.pts),Me=me.selectAll("g.slicetext").data(De.text&&"none"!==ve?[0]:[]);Me.enter().append("g").classed("slicetext",!0),Me.exit().remove(),Me.each(function(){var St,Tt,lt,Ue=p.ensureSingle(S.select(this),"text","",function(St){St.attr("data-notex",1)}),ze=p.ensureUniformFontSize(Z,"outside"===ve?(lt=W.font,{color:c.castOption((St=X).outsidetextfont.color,(Tt=De).pts)||c.castOption(St.textfont.color,Tt.pts)||lt.color,family:c.castOption(St.outsidetextfont.family,Tt.pts)||c.castOption(St.textfont.family,Tt.pts)||lt.family,size:c.castOption(St.outsidetextfont.size,Tt.pts)||c.castOption(St.textfont.size,Tt.pts)||lt.size,weight:c.castOption(St.outsidetextfont.weight,Tt.pts)||c.castOption(St.textfont.weight,Tt.pts)||lt.weight,style:c.castOption(St.outsidetextfont.style,Tt.pts)||c.castOption(St.textfont.style,Tt.pts)||lt.style,variant:c.castOption(St.outsidetextfont.variant,Tt.pts)||c.castOption(St.textfont.variant,Tt.pts)||lt.variant,textcase:c.castOption(St.outsidetextfont.textcase,Tt.pts)||c.castOption(St.textfont.textcase,Tt.pts)||lt.textcase,lineposition:c.castOption(St.outsidetextfont.lineposition,Tt.pts)||c.castOption(St.textfont.lineposition,Tt.pts)||lt.lineposition,shadow:c.castOption(St.outsidetextfont.shadow,Tt.pts)||c.castOption(St.textfont.shadow,Tt.pts)||lt.shadow}):d(X,De,W.font));Ue.text(De.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(b.font,ze).call(i.convertToTspans,Z);var qe,Ke=b.bBox(Ue.node());if("outside"===ve)qe=E(Ke,De);else if(qe=g(Ke,De,$),"auto"===ve&&qe.scale<1){var it=p.ensureUniformFontSize(Z,X.outsidetextfont);Ue.call(b.font,it),qe=E(Ke=b.bBox(Ue.node()),De)}var ft=qe.textPosAngle,dt=void 0===ft?De.pxmid:V($.r,ft);if(qe.targetX=he+dt[0]*qe.rCenter+(qe.x||0),qe.targetY=ce+dt[1]*qe.rCenter+(qe.y||0),U(qe,Ke),qe.outside){var kt=qe.targetY;De.yLabelMin=kt-Ke.height/2,De.yLabelMid=kt,De.yLabelMax=kt+Ke.height/2,De.labelExtraX=0,De.labelExtraY=0,ue=!0}qe.fontSize=ze.size,n(X.type,qe,W),ne[be].transform=qe,p.setTransormAndDisplay(Ue,qe)})}function Le(Ue,ze,qe,Ke){return"a"+Ke*$.r+","+Ke*$.r+" 0 "+De.largeArc+(qe?" 1 ":" 0 ")+Ke*(ze[0]-Ue[0])+","+Ke*(ze[1]-Ue[1])}});var be,ge=S.select(this).selectAll("g.titletext").data(X.title.text?[0]:[]);if(ge.enter().append("g").classed("titletext",!0),ge.exit().remove(),ge.each(function(){var De,ce,me,be=p.ensureSingle(S.select(this),"text","",function(ce){ce.attr("data-notex",1)}),he=X.title.text;X._meta&&(he=p.templateString(he,X._meta)),be.text(he).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(b.font,X.title.font).call(i.convertToTspans,Z),De="middle center"===X.title.position?(ce=$,me=Math.sqrt(ce.titleBox.width*ce.titleBox.width+ce.titleBox.height*ce.titleBox.height),{x:ce.cx,y:ce.cy,scale:ce.trace.hole*ce.r*2/me,tx:0,ty:-ce.titleBox.height/2+ce.trace.title.font.size}):P($,ae),be.attr("transform",t(De.x,De.y)+l(Math.min(1,De.scale))+t(De.tx,De.ty))}),ue&&function(De,be){var he,ce,me,Pe,Ae,Ce,Oe,Ne,je,ve,Me,Le,Ue;function ze(ft,dt){return ft.pxmid[1]-dt.pxmid[1]}function qe(ft,dt){return dt.pxmid[1]-ft.pxmid[1]}function Ke(ft,dt){dt||(dt={});var kt,St,Tt,lt,ot=dt.labelExtraY+(ce?dt.yLabelMax:dt.yLabelMin),Rt=ce?ft.yLabelMin:ft.yLabelMax,Vt=ce?ft.yLabelMax:ft.yLabelMin,Ht=ft.cyFinal+Ae(ft.px0[1],ft.px1[1]),zt=ot-Rt;if(zt*Oe>0&&(ft.labelExtraY=zt),p.isArrayOrTypedArray(be.pull))for(St=0;St<ve.length;St++)(Tt=ve[St])===ft||(c.castOption(be.pull,ft.pts)||0)>=(c.castOption(be.pull,Tt.pts)||0)||((ft.pxmid[1]-Tt.pxmid[1])*Oe>0?(zt=Tt.cyFinal+Ae(Tt.px0[1],Tt.px1[1])-Rt-ft.labelExtraY)*Oe>0&&(ft.labelExtraY+=zt):(Vt+ft.labelExtraY-Ht)*Oe>0&&(kt=3*Ce*Math.abs(St-ve.indexOf(ft)),(lt=Tt.cxFinal+Pe(Tt.px0[0],Tt.px1[0])+kt-(ft.cxFinal+ft.pxmid[0])-ft.labelExtraX)*Ce>0&&(ft.labelExtraX+=lt)))}for(ce=0;ce<2;ce++)for(me=ce?ze:qe,Ae=ce?Math.max:Math.min,Oe=ce?1:-1,he=0;he<2;he++){for(Pe=he?Math.max:Math.min,Ce=he?1:-1,(Ne=De[ce][he]).sort(me),ve=(je=De[1-ce][he]).concat(Ne),Le=[],Me=0;Me<Ne.length;Me++)void 0!==Ne[Me].yLabelMid&&Le.push(Ne[Me]);for(Ue=!1,Me=0;ce&&Me<je.length;Me++)if(void 0!==je[Me].yLabelMid){Ue=je[Me];break}for(Me=0;Me<Le.length;Me++){var it=Me&&Le[Me-1];Ue&&!Me&&(it=Ue),Ke(Le[Me],it)}}}(fe,X),be=X,oe.each(function(he){var ce=S.select(this);if(he.labelExtraX||he.labelExtraY){var me=ce.select("g.slicetext text");he.transform.targetX+=he.labelExtraX,he.transform.targetY+=he.labelExtraY,p.setTransormAndDisplay(me,he.transform);var Pe=he.cxFinal+he.pxmid[0],Ae="M"+Pe+","+(he.cyFinal+he.pxmid[1]),Ce=(he.yLabelMax-he.yLabelMin)*(he.pxmid[0]<0?-1:1)/4;if(he.labelExtraX){var Oe=he.labelExtraX*he.pxmid[1]/he.pxmid[0],Ne=he.yLabelMid+he.labelExtraY-(he.cyFinal+he.pxmid[1]);Math.abs(Oe)>Math.abs(Ne)?Ae+="l"+Ne*he.pxmid[0]/he.pxmid[1]+","+Ne+"H"+(Pe+he.labelExtraX+Ce):Ae+="l"+he.labelExtraX+","+Oe+"v"+(Ne-Oe)+"h"+Ce}else Ae+="V"+(he.yLabelMid+he.labelExtraY)+"h"+Ce;p.ensureSingle(ce,"path","textline").call(T.stroke,be.outsidetextfont.color).attr({"stroke-width":Math.min(2,be.outsidetextfont.size/8),d:Ae,fill:"none"})}else ce.select("path.textline").remove()}),ue&&X.automargin){var we=b.bBox(Q.node()),Te=X.domain,_e=(ae.w*(Te.x[1]-Te.x[0])*.5-$.r)/ae.w,Ie=(ae.h*(Te.y[1]-Te.y[0])*.5-$.r)/ae.h;k.autoMargin(Z,"pie."+X.uid+".automargin",{xl:Te.x[0]-_e,xr:Te.x[1]+_e,yb:Te.y[0]-Ie,yt:Te.y[1]+Ie,l:Math.max($.cx-$.r-we.left,0),r:Math.max(we.right-($.cx+$.r),0),b:Math.max(we.bottom-($.cy+$.r),0),t:Math.max($.cy-$.r-we.top,0),pad:5})}})});setTimeout(function(){re.selectAll("tspan").each(function(){var ne=S.select(this);ne.attr("dy")&&ne.attr("dy",ne.attr("dy"))})},0)},formatSliceLabel:R,transformInsideText:g,determineInsideTextFont:d,positionTitleOutside:P,prerenderTitles:m,layoutAreas:z,attachFxHandlers:y,computeTransform:U}},22152:function(ie,F,e){"use strict";var S=e(33428),k=e(10528),o=e(82744).resizeText;ie.exports=function(T){var b=T._fullLayout._pielayer.selectAll(".trace");o(T,b,"pie"),b.each(function(p){var l=p[0].trace,t=S.select(this);t.style({opacity:l.opacity}),t.selectAll("path.surface").each(function(i){S.select(this).call(k,i,l,T)})})}},10528:function(ie,F,e){"use strict";var S=e(76308),k=e(69656).castOption,o=e(21552);ie.exports=function(T,b,p,l){var t=p.marker.line,i=k(t.color,b.pts)||S.defaultLine,r=k(t.width,b.pts)||0;T.call(o,b,p,l).style("stroke-width",r).call(S.stroke,i)}},35484:function(ie,F,e){"use strict";var S=e(52904);ie.exports={x:S.x,y:S.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:S.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},11072:function(ie,F,e){"use strict";var S=e(67792).gl_pointcloud2d,k=e(3400).isArrayOrTypedArray,o=e(43080),T=e(19280).findExtremes,b=e(44928);function p(t,i){this.scene=t,this.uid=i,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=S(t.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var l=p.prototype;l.handlePick=function(t){var i=this.idToIndex[t.pointId];return{trace:this,dataCoord:t.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*i],this.pickXYData[2*i+1]]:[this.pickXData[i],this.pickYData[i]],textLabel:k(this.textLabels)?this.textLabels[i]:this.textLabels,color:this.color,name:this.name,pointIndex:i,hoverinfo:this.hoverinfo}},l.update=function(t){this.index=t.index,this.textLabels=t.text,this.name=t.name,this.hoverinfo=t.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(t),this.color=b(t,{})},l.updateFast=function(t){var i,r,n,a,s,c,h=this.xData=this.pickXData=t.x,u=this.yData=this.pickYData=t.y,y=this.pickXYData=t.xy,m=t.indices,g=this.bounds;if(y){if(n=y,i=y.length>>>1,t.xbounds&&t.ybounds)g[0]=t.xbounds[0],g[2]=t.xbounds[1],g[1]=t.ybounds[0],g[3]=t.ybounds[1];else for(c=0;c<i;c++)s=n[2*c+1],(a=n[2*c])<g[0]&&(g[0]=a),a>g[2]&&(g[2]=a),s<g[1]&&(g[1]=s),s>g[3]&&(g[3]=s);if(m)r=m;else for(r=new Int32Array(i),c=0;c<i;c++)r[c]=c}else for(i=h.length,n=new Float32Array(2*i),r=new Int32Array(i),c=0;c<i;c++)a=h[c],s=u[c],r[c]=c,n[2*c]=a,n[2*c+1]=s,a<g[0]&&(g[0]=a),a>g[2]&&(g[2]=a),s<g[1]&&(g[1]=s),s>g[3]&&(g[3]=s);this.idToIndex=r,this.pointcloudOptions.idToIndex=r,this.pointcloudOptions.positions=n;var x=o(t.marker.color),v=o(t.marker.border.color),_=t.opacity*t.marker.opacity;x[3]*=_,this.pointcloudOptions.color=x;var f=t.marker.blend;null===f&&(f=h.length<100||u.length<100),this.pointcloudOptions.blend=f,v[3]*=_,this.pointcloudOptions.borderColor=v;var C=t.marker.sizemin,w=Math.max(t.marker.sizemax,t.marker.sizemin);this.pointcloudOptions.sizeMin=C,this.pointcloudOptions.sizeMax=w,this.pointcloudOptions.areaRatio=t.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var E=this.scene.xaxis,P=this.scene.yaxis,L=w/2||.5;t._extremes[E._id]=T(E,[g[0],g[2]],{ppad:L}),t._extremes[P._id]=T(P,[g[1],g[3]],{ppad:L})},l.dispose=function(){this.pointcloud.dispose()},ie.exports=function(t,i){var r=new p(t,i.uid);return r.update(i),r}},41904:function(ie,F,e){"use strict";var S=e(3400),k=e(35484);ie.exports=function(o,T,b){function p(l,t){return S.coerce(o,T,k,l,t)}p("x"),p("y"),p("xbounds"),p("ybounds"),o.xy&&o.xy instanceof Float32Array&&(T.xy=o.xy),o.indices&&o.indices instanceof Int32Array&&(T.indices=o.indices),p("text"),p("marker.color",b),p("marker.opacity"),p("marker.blend"),p("marker.sizemin"),p("marker.sizemax"),p("marker.border.color",b),p("marker.border.arearatio"),T._length=null}},156:function(ie,F,e){"use strict";["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" "),ie.exports={attributes:e(35484),supplyDefaults:e(41904),calc:e(41484),plot:e(11072),moduleType:"trace",name:"pointcloud",basePlotModule:e(39952),categories:["gl","gl2d","showLegend"],meta:{}}},41440:function(ie,F,e){"use strict";var S=e(25376),k=e(45464),o=e(22548),T=e(55756),b=e(86968).u,p=e(21776).Ks,l=e(49084),t=e(31780).templatedArray,i=e(29736).descriptionOnlyNumbers,r=e(92880).extendFlat,n=e(67824).overrideAll;(ie.exports=n({hoverinfo:r({},k.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:T.hoverlabel,domain:b({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:i("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:S({autoShadowDflt:!0}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:o.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:p({},{keys:["value","label"]}),align:{valType:"enumerated",values:["justify","left","right","center"],dflt:"justify"}},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},hovercolor:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:o.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:p({},{keys:["value","label"]}),colorscales:t("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:r(l().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},10760:function(ie,F,e){"use strict";var S=e(67824).overrideAll,k=e(84888)._M,o=e(59596),T=e(65460),b=e(93972),p=e(86476),l=e(22676).prepSelect,t=e(3400),i=e(24040),r="sankey";function n(a,s){var c=a._fullData[s],h=a._fullLayout,u=h.dragmode,d=c._bgRect;if(d&&"pan"!==u&&"zoom"!==u){b(d,"pan"===h.dragmode?"move":"crosshair");var m={_id:"x",c2p:t.identity,_offset:c._sankey.translateX,_length:c._sankey.width},g={_id:"y",c2p:t.identity,_offset:c._sankey.translateY,_length:c._sankey.height},x={gd:a,element:d.node(),plotinfo:{id:s,xaxis:m,yaxis:g,fillRangeItems:t.noop},subplot:s,xaxes:[m],yaxes:[g],doneFnCompleted:function(v){var _,f=a._fullData[s],C=f.node.groups.slice(),w=[];function E(z){for(var V=f._sankey.graph.nodes,R=0;R<V.length;R++)if(V[R].pointNumber===z)return V[R]}for(var P=0;P<v.length;P++){var L=E(v[P].pointNumber);if(L)if(L.group){for(var O=0;O<L.childrenNodes.length;O++)w.push(L.childrenNodes[O].pointNumber);C[L.pointNumber-f.node._count]=!1}else w.push(L.pointNumber)}_=C.filter(Boolean).concat([w]),i.call("_guiRestyle",a,{"node.groups":[_]},s)},prepFn:function(v,_,f){l(v,_,f,x,u)}};p.init(x)}}F.name=r,F.baseLayoutAttrOverrides=S({hoverlabel:T.hoverlabel},"plot","nested"),F.plot=function(a){var s=k(a.calcdata,r)[0];o(a,s),F.updateFx(a)},F.clean=function(a,s,c,h){var u=h._has&&h._has(r),y=s._has&&s._has(r);u&&!y&&(h._paperdiv.selectAll(".sankey").remove(),h._paperdiv.selectAll(".bgsankey").remove())},F.updateFx=function(a){for(var s=0;s<a._fullData.length;s++)n(a,s)}},48068:function(ie,F,e){"use strict";var S=e(78484),k=e(3400),o=e(71688).wrap,T=k.isArrayOrTypedArray,b=k.isIndex,p=e(8932);ie.exports=function(l,t){var i=function(r){var n,a=r.node,s=r.link,c=[],h=T(s.color),u=T(s.hovercolor),y=T(s.customdata),d={},m={},g=s.colorscales.length;for(n=0;n<g;n++){var x=s.colorscales[n],v=p.extractScale(x,{cLetter:"c"}),_=p.makeColorScaleFunc(v);m[x.label]=_}var f=0;for(n=0;n<s.value.length;n++)s.source[n]>f&&(f=s.source[n]),s.target[n]>f&&(f=s.target[n]);var C,w=f+1;r.node._count=w;var E=r.node.groups,P={};for(n=0;n<E.length;n++){var L=E[n];for(C=0;C<L.length;C++){var O=L[C],z=w+n;P.hasOwnProperty(O)?k.warn("Node "+O+" is already part of a group."):P[O]=z}}var V={source:[],target:[]};for(n=0;n<s.value.length;n++){var R=s.value[n],U=s.source[n],Z=s.target[n];if(R>0&&b(U,w)&&b(Z,w)&&(!P.hasOwnProperty(U)||!P.hasOwnProperty(Z)||P[U]!==P[Z])){P.hasOwnProperty(Z)&&(Z=P[Z]),P.hasOwnProperty(U)&&(U=P[U]),d[U=+U]=d[Z=+Z]=!0;var N="";s.label&&s.label[n]&&(N=s.label[n]);var G=null;N&&m.hasOwnProperty(N)&&(G=m[N]),c.push({pointNumber:n,label:N,color:h?s.color[n]:s.color,hovercolor:u?s.hovercolor[n]:s.hovercolor,customdata:y?s.customdata[n]:s.customdata,concentrationscale:G,source:U,target:Z,value:+R}),V.source.push(U),V.target.push(Z)}}var W=w+E.length,ae=T(a.color),re=T(a.customdata),ne=[];for(n=0;n<W;n++)d[n]&&ne.push({group:n>w-1,childrenNodes:[],pointNumber:n,label:a.label[n],color:ae?a.color[n]:a.color,customdata:re?a.customdata[n]:a.customdata});var $=!1;return function(X,oe,fe){for(var ue=k.init2dArray(X,0),ge=0;ge<Math.min(oe.length,fe.length);ge++)if(k.isIndex(oe[ge],X)&&k.isIndex(fe[ge],X)){if(oe[ge]===fe[ge])return!0;ue[oe[ge]].push(fe[ge])}return S(ue).components.some(function(we){return we.length>1})}(W,V.source,V.target)&&($=!0),{circular:$,links:c,nodes:ne,groups:E,groupLookup:P}}(t);return o({circular:i.circular,_nodes:i.nodes,_links:i.links,_groups:i.groups,_groupLookup:i.groupLookup})}},11820:function(ie){"use strict";ie.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},47140:function(ie,F,e){"use strict";var S=e(3400),k=e(41440),o=e(76308),T=e(49760),b=e(86968).Q,p=e(16132),l=e(31780),t=e(51272);function i(r,n){function a(s,c){return S.coerce(r,n,k.link.colorscales,s,c)}a("label"),a("cmin"),a("cmax"),a("colorscale")}ie.exports=function(r,n,a,s){function c(E,P){return S.coerce(r,n,k,E,P)}var h=S.extendDeep(s.hoverlabel,r.hoverlabel),u=r.node,y=l.newContainer(n,"node");function d(E,P){return S.coerce(u,y,k.node,E,P)}d("label"),d("groups"),d("x"),d("y"),d("pad"),d("thickness"),d("line.color"),d("line.width"),d("hoverinfo",r.hoverinfo),p(u,y,d,h),d("hovertemplate"),d("align");var m=s.colorway;d("color",y.label.map(function(E,P){return o.addOpacity(m[P%m.length],.8)})),d("customdata");var g=r.link||{},x=l.newContainer(n,"link");function v(E,P){return S.coerce(g,x,k.link,E,P)}v("label"),v("arrowlen"),v("source"),v("target"),v("value"),v("line.color"),v("line.width"),v("hoverinfo",r.hoverinfo),p(g,x,v,h),v("hovertemplate");var _,f=T(s.paper_bgcolor).getLuminance()<.333,C=v("color",f?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)");function w(E){var P=T(E);if(!P.isValid())return E;var L=P.getAlpha();return L<=.8?P.setAlpha(L+.2):P=f?P.brighten():P.darken(),P.toRgbString()}v("hovercolor",Array.isArray(C)?C.map(w):w(C)),v("customdata"),t(g,x,{name:"colorscales",handleItemDefaults:i}),b(n,s,c),c("orientation"),c("valueformat"),c("valuesuffix"),y.x.length&&y.y.length&&(_="freeform"),c("arrangement",_),S.coerceFont(c,"textfont",s.font,{autoShadowDflt:!0}),n._length=null}},45499:function(ie,F,e){"use strict";ie.exports={attributes:e(41440),supplyDefaults:e(47140),calc:e(48068),plot:e(59596),moduleType:"trace",name:"sankey",basePlotModule:e(10760),selectPoints:e(81128),categories:["noOpacity"],meta:{}}},59596:function(ie,F,e){"use strict";var S=e(33428),k=e(3400),o=k.numberFormat,T=e(83248),b=e(93024),p=e(76308),l=e(11820).cn,t=k._;function i(g){return""!==g}function r(g,x){return g.filter(function(v){return v.key===x.traceId})}function n(g,x){S.select(g).select("path").style("fill-opacity",x),S.select(g).select("rect").style("fill-opacity",x)}function a(g){S.select(g).select("text.name").style("fill","black")}function s(g){return function(x){return-1!==g.node.sourceLinks.indexOf(x.link)||-1!==g.node.targetLinks.indexOf(x.link)}}function c(g){return function(x){return-1!==x.node.sourceLinks.indexOf(g.link)||-1!==x.node.targetLinks.indexOf(g.link)}}function h(g,x,v){x&&v&&r(v,x).selectAll("."+l.sankeyLink).filter(s(x)).call(y.bind(0,x,v,!1))}function u(g,x,v){x&&v&&r(v,x).selectAll("."+l.sankeyLink).filter(s(x)).call(d.bind(0,x,v,!1))}function y(g,x,v,_){_.style("fill",function(f){if(!f.link.concentrationscale)return f.tinyColorHoverHue}).style("fill-opacity",function(f){if(!f.link.concentrationscale)return f.tinyColorHoverAlpha}),_.each(function(f){var C=f.link.label;""!==C&&r(x,g).selectAll("."+l.sankeyLink).filter(function(w){return w.link.label===C}).style("fill",function(w){if(!w.link.concentrationscale)return w.tinyColorHoverHue}).style("fill-opacity",function(w){if(!w.link.concentrationscale)return w.tinyColorHoverAlpha})}),v&&r(x,g).selectAll("."+l.sankeyNode).filter(c(g)).call(h)}function d(g,x,v,_){_.style("fill",function(f){return f.tinyColorHue}).style("fill-opacity",function(f){return f.tinyColorAlpha}),_.each(function(f){var C=f.link.label;""!==C&&r(x,g).selectAll("."+l.sankeyLink).filter(function(w){return w.link.label===C}).style("fill",function(w){return w.tinyColorHue}).style("fill-opacity",function(w){return w.tinyColorAlpha})}),v&&r(x,g).selectAll(l.sankeyNode).filter(c(g)).call(u)}function m(g,x){var _=k.nestedProperty(g.hoverlabel||{},x).get();return!Array.isArray(_)&&_}ie.exports=function(g,x){for(var v=g._fullLayout,_=v._paper,f=v._size,C=0;C<g._fullData.length;C++)if(g._fullData[C].visible&&g._fullData[C].type===l.sankey&&!g._fullData[C]._viewInitial){var w=g._fullData[C].node;g._fullData[C]._viewInitial={node:{groups:w.groups.slice(),x:w.x.slice(),y:w.y.slice()}}}var E=t(g,"source:")+" ",P=t(g,"target:")+" ",L=t(g,"concentration:")+" ",O=t(g,"incoming flow count:")+" ",z=t(g,"outgoing flow count:")+" ";T(g,_,x,{width:f.w,height:f.h,margin:{t:f.t,r:f.r,b:f.b,l:f.l}},{linkEvents:{hover:function(V,R,U){!1!==g._fullLayout.hovermode&&(S.select(V).call(y.bind(0,R,U,!0)),"skip"!==R.link.trace.link.hoverinfo&&(R.link.fullData=R.link.trace,g.emit("plotly_hover",{event:S.event,points:[R.link]})))},follow:function(V,R){if(!1!==g._fullLayout.hovermode){var U=R.link.trace.link;if("none"!==U.hoverinfo&&"skip"!==U.hoverinfo){for(var Z=[],N=0,G=0;G<R.flow.links.length;G++){var W=R.flow.links[G];if("closest"!==g._fullLayout.hovermode||R.link.pointNumber===W.pointNumber){R.link.pointNumber===W.pointNumber&&(N=G),W.fullData=W.trace,U=R.link.trace.link;var ae=ne(W),re={valueLabel:o(R.valueFormat)(W.value)+R.valueSuffix};Z.push({x:ae[0],y:ae[1],name:re.valueLabel,text:[W.label||"",E+W.source.label,P+W.target.label,W.concentrationscale?L+o("%0.2f")(W.flow.labelConcentration):""].filter(i).join("<br>"),color:m(U,"bgcolor")||p.addOpacity(W.color,1),borderColor:m(U,"bordercolor"),fontFamily:m(U,"font.family"),fontSize:m(U,"font.size"),fontColor:m(U,"font.color"),fontWeight:m(U,"font.weight"),fontStyle:m(U,"font.style"),fontVariant:m(U,"font.variant"),fontTextcase:m(U,"font.textcase"),fontLineposition:m(U,"font.lineposition"),fontShadow:m(U,"font.shadow"),nameLength:m(U,"namelength"),textAlign:m(U,"align"),idealAlign:S.event.x<ae[0]?"right":"left",hovertemplate:U.hovertemplate,hovertemplateLabels:re,eventData:[W]})}}b.loneHover(Z,{container:v._hoverlayer.node(),outerContainer:v._paper.node(),gd:g,anchorIndex:N}).each(function(){R.link.concentrationscale||n(this,.65),a(this)})}}function ne(Q){var $,X;Q.circular?($=(Q.circularPathData.leftInnerExtent+Q.circularPathData.rightInnerExtent)/2,X=Q.circularPathData.verticalFullExtent):($=(Q.source.x1+Q.target.x0)/2,X=(Q.y0+Q.y1)/2);var oe=[$,X];return"v"===Q.trace.orientation&&oe.reverse(),oe[0]+=R.parent.translateX,oe[1]+=R.parent.translateY,oe}},unhover:function(V,R,U){!1!==g._fullLayout.hovermode&&(S.select(V).call(d.bind(0,R,U,!0)),"skip"!==R.link.trace.link.hoverinfo&&(R.link.fullData=R.link.trace,g.emit("plotly_unhover",{event:S.event,points:[R.link]})),b.loneUnhover(v._hoverlayer.node()))},select:function(V,R){var U=R.link;U.originalEvent=S.event,g._hoverdata=[U],b.click(g,{target:!0})}},nodeEvents:{hover:function(V,R,U){!1!==g._fullLayout.hovermode&&(S.select(V).call(h,R,U),"skip"!==R.node.trace.node.hoverinfo&&(R.node.fullData=R.node.trace,g.emit("plotly_hover",{event:S.event,points:[R.node]})))},follow:function(V,R){if(!1!==g._fullLayout.hovermode){var U=R.node.trace.node;if("none"!==U.hoverinfo&&"skip"!==U.hoverinfo){var Z=S.select(V).select("."+l.nodeRect),N=g._fullLayout._paperdiv.node().getBoundingClientRect(),G=Z.node().getBoundingClientRect(),W=G.left-2-N.left,ae=G.right+2-N.left,re=G.top+G.height/4-N.top,ne={valueLabel:o(R.valueFormat)(R.node.value)+R.valueSuffix};R.node.fullData=R.node.trace,g._fullLayout._calcInverseTransform(g);var Q=g._fullLayout._invScaleX,X=b.loneHover({x0:Q*W,x1:Q*ae,y:g._fullLayout._invScaleY*re,name:o(R.valueFormat)(R.node.value)+R.valueSuffix,text:[R.node.label,O+R.node.targetLinks.length,z+R.node.sourceLinks.length].filter(i).join("<br>"),color:m(U,"bgcolor")||R.tinyColorHue,borderColor:m(U,"bordercolor"),fontFamily:m(U,"font.family"),fontSize:m(U,"font.size"),fontColor:m(U,"font.color"),fontWeight:m(U,"font.weight"),fontStyle:m(U,"font.style"),fontVariant:m(U,"font.variant"),fontTextcase:m(U,"font.textcase"),fontLineposition:m(U,"font.lineposition"),fontShadow:m(U,"font.shadow"),nameLength:m(U,"namelength"),textAlign:m(U,"align"),idealAlign:"left",hovertemplate:U.hovertemplate,hovertemplateLabels:ne,eventData:[R.node]},{container:v._hoverlayer.node(),outerContainer:v._paper.node(),gd:g});n(X,.85),a(X)}}},unhover:function(V,R,U){!1!==g._fullLayout.hovermode&&(S.select(V).call(u,R,U),"skip"!==R.node.trace.node.hoverinfo&&(R.node.fullData=R.node.trace,g.emit("plotly_unhover",{event:S.event,points:[R.node]})),b.loneUnhover(v._hoverlayer.node()))},select:function(V,R,U){var Z=R.node;Z.originalEvent=S.event,g._hoverdata=[Z],S.select(V).call(u,R,U),b.click(g,{target:!0})}}})}},83248:function(ie,F,e){"use strict";var S=e(49812),k=e(67756).Gz,o=e(33428),T=e(26800),b=e(48932),p=e(11820),l=e(49760),t=e(76308),i=e(43616),r=e(3400),n=r.strTranslate,a=r.strRotate,s=e(71688),c=s.keyFun,h=s.repeat,u=s.unwrap,y=e(72736),d=e(24040),m=e(84284),g=m.CAP_SHIFT,x=m.LINE_SPACING;function v(G,W,ae){var re,ne=u(W),Q=ne.trace,$=Q.domain,X="h"===Q.orientation,oe=Q.node.pad,fe=Q.node.thickness,ue={justify:T.sankeyJustify,left:T.sankeyLeft,right:T.sankeyRight,center:T.sankeyCenter}[Q.node.align],ge=G.width*($.x[1]-$.x[0]),we=G.height*($.y[1]-$.y[0]),Te=ne._nodes,xe=ne._links,ye=ne.circular;(re=ye?b.sankeyCircular().circularLinkGap(0):T.sankey()).iterations(p.sankeyIterations).size(X?[ge,we]:[we,ge]).nodeWidth(fe).nodePadding(oe).nodeId(function(Oe){return Oe.pointNumber}).nodeAlign(ue).nodes(Te).links(xe);var _e,Ie,De,be=re();for(var he in re.nodePadding()<oe&&r.warn("node.pad was reduced to ",re.nodePadding()," to fit within the figure."),ne._groupLookup){var ce,me=parseInt(ne._groupLookup[he]);for(_e=0;_e<be.nodes.length;_e++)if(be.nodes[_e].pointNumber===me){ce=be.nodes[_e];break}if(ce){var Pe={pointNumber:parseInt(he),x0:ce.x0,x1:ce.x1,y0:ce.y0,y1:ce.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};be.nodes.unshift(Pe),ce.childrenNodes.unshift(Pe)}}if(function(){for(_e=0;_e<be.nodes.length;_e++){var Oe,Ne,je=be.nodes[_e],ve={};for(Ie=0;Ie<je.targetLinks.length;Ie++)Oe=(Ne=je.targetLinks[Ie]).source.pointNumber+":"+Ne.target.pointNumber,ve.hasOwnProperty(Oe)||(ve[Oe]=[]),ve[Oe].push(Ne);var Me=Object.keys(ve);for(Ie=0;Ie<Me.length;Ie++){var Le=ve[Oe=Me[Ie]],Ue=0,ze={};for(De=0;De<Le.length;De++)ze[(Ne=Le[De]).label]||(ze[Ne.label]=0),ze[Ne.label]+=Ne.value,Ue+=Ne.value;for(De=0;De<Le.length;De++)(Ne=Le[De]).flow={value:Ue,labelConcentration:ze[Ne.label]/Ue,concentration:Ne.value/Ue,links:Le},Ne.concentrationscale&&(Ne.color=l(Ne.concentrationscale(Ne.flow.labelConcentration)))}var qe=0;for(Ie=0;Ie<je.sourceLinks.length;Ie++)qe+=je.sourceLinks[Ie].value;for(Ie=0;Ie<je.sourceLinks.length;Ie++)(Ne=je.sourceLinks[Ie]).concentrationOut=Ne.value/qe;var Ke=0;for(Ie=0;Ie<je.targetLinks.length;Ie++)Ke+=je.targetLinks[Ie].value;for(Ie=0;Ie<je.targetLinks.length;Ie++)(Ne=je.targetLinks[Ie]).concenrationIn=Ne.value/Ke}}(),Q.node.x.length&&Q.node.y.length){for(_e=0;_e<Math.min(Q.node.x.length,Q.node.y.length,be.nodes.length);_e++)if(Q.node.x[_e]&&Q.node.y[_e]){var Ae=[Q.node.x[_e]*ge,Q.node.y[_e]*we];be.nodes[_e].x0=Ae[0]-fe/2,be.nodes[_e].x1=Ae[0]+fe/2;var Ce=be.nodes[_e].y1-be.nodes[_e].y0;be.nodes[_e].y0=Ae[1]-Ce/2,be.nodes[_e].y1=Ae[1]+Ce/2}"snap"===Q.arrangement&&function(Oe){var Ne,je,ve=Oe.map(function(qe,Ke){return{x0:qe.x0,index:Ke}}).sort(function(qe,Ke){return qe.x0-Ke.x0}),Me=[],Le=-1,Ue=-1/0;for(_e=0;_e<ve.length;_e++){var ze=Oe[ve[_e].index];ze.x0>Ue+fe&&(Le+=1,Ne=ze.x0),Ue=ze.x0,Me[Le]||(Me[Le]=[]),Me[Le].push(ze),ze.x0+=je=Ne-ze.x0,ze.x1+=je}return Me}(Te=be.nodes).forEach(function(Oe){var Ne,je,ve,Me=0,Le=Oe.length;for(Oe.sort(function(Ue,ze){return Ue.y0-ze.y0}),ve=0;ve<Le;++ve)(Ne=Oe[ve]).y0>=Me||(je=Me-Ne.y0)>1e-6&&(Ne.y0+=je,Ne.y1+=je),Me=Ne.y1+oe}),re.update(be)}return{circular:ye,key:ae,trace:Q,guid:r.randstr(),horizontal:X,width:ge,height:we,nodePad:Q.node.pad,nodeLineColor:Q.node.line.color,nodeLineWidth:Q.node.line.width,linkLineColor:Q.link.line.color,linkLineWidth:Q.link.line.width,linkArrowLength:Q.link.arrowlen,valueFormat:Q.valueformat,valueSuffix:Q.valuesuffix,textFont:Q.textfont,translateX:$.x[0]*G.width+G.margin.l,translateY:G.height-$.y[1]*G.height+G.margin.t,dragParallel:X?we:ge,dragPerpendicular:X?ge:we,arrangement:Q.arrangement,sankey:re,graph:be,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function _(G,W,ae){var re=l(W.color),ne=l(W.hovercolor),Q=W.source.label+"|"+W.target.label+"__"+ae;return W.trace=G.trace,W.curveNumber=G.trace.index,{circular:G.circular,key:Q,traceId:G.key,pointNumber:W.pointNumber,link:W,tinyColorHue:t.tinyRGB(re),tinyColorAlpha:re.getAlpha(),tinyColorHoverHue:t.tinyRGB(ne),tinyColorHoverAlpha:ne.getAlpha(),linkPath:f,linkLineColor:G.linkLineColor,linkLineWidth:G.linkLineWidth,linkArrowLength:G.linkArrowLength,valueFormat:G.valueFormat,valueSuffix:G.valueSuffix,sankey:G.sankey,parent:G,interactionState:G.interactionState,flow:W.flow}}function f(){return function(G){var _e,Ie,De,be,W=G.linkArrowLength;if(G.link.circular)return Ie=W,De=(_e=G.link).width/2,be=_e.circularPathData,"top"===_e.circularLinkType?"M "+(be.targetX-Ie)+" "+(be.targetY+De)+" L"+(be.rightInnerExtent-Ie)+" "+(be.targetY+De)+"A"+(be.rightLargeArcRadius+De)+" "+(be.rightSmallArcRadius+De)+" 0 0 1 "+(be.rightFullExtent-De-Ie)+" "+(be.targetY-be.rightSmallArcRadius)+"L"+(be.rightFullExtent-De-Ie)+" "+be.verticalRightInnerExtent+"A"+(be.rightLargeArcRadius+De)+" "+(be.rightLargeArcRadius+De)+" 0 0 1 "+(be.rightInnerExtent-Ie)+" "+(be.verticalFullExtent-De)+"L"+be.leftInnerExtent+" "+(be.verticalFullExtent-De)+"A"+(be.leftLargeArcRadius+De)+" "+(be.leftLargeArcRadius+De)+" 0 0 1 "+(be.leftFullExtent+De)+" "+be.verticalLeftInnerExtent+"L"+(be.leftFullExtent+De)+" "+(be.sourceY-be.leftSmallArcRadius)+"A"+(be.leftLargeArcRadius+De)+" "+(be.leftSmallArcRadius+De)+" 0 0 1 "+be.leftInnerExtent+" "+(be.sourceY+De)+"L"+be.sourceX+" "+(be.sourceY+De)+"L"+be.sourceX+" "+(be.sourceY-De)+"L"+be.leftInnerExtent+" "+(be.sourceY-De)+"A"+(be.leftLargeArcRadius-De)+" "+(be.leftSmallArcRadius-De)+" 0 0 0 "+(be.leftFullExtent-De)+" "+(be.sourceY-be.leftSmallArcRadius)+"L"+(be.leftFullExtent-De)+" "+be.verticalLeftInnerExtent+"A"+(be.leftLargeArcRadius-De)+" "+(be.leftLargeArcRadius-De)+" 0 0 0 "+be.leftInnerExtent+" "+(be.verticalFullExtent+De)+"L"+(be.rightInnerExtent-Ie)+" "+(be.verticalFullExtent+De)+"A"+(be.rightLargeArcRadius-De)+" "+(be.rightLargeArcRadius-De)+" 0 0 0 "+(be.rightFullExtent+De-Ie)+" "+be.verticalRightInnerExtent+"L"+(be.rightFullExtent+De-Ie)+" "+(be.targetY-be.rightSmallArcRadius)+"A"+(be.rightLargeArcRadius-De)+" "+(be.rightSmallArcRadius-De)+" 0 0 0 "+(be.rightInnerExtent-Ie)+" "+(be.targetY-De)+"L"+(be.targetX-Ie)+" "+(be.targetY-De)+(Ie>0?"L"+be.targetX+" "+be.targetY:"")+"Z":"M "+(be.targetX-Ie)+" "+(be.targetY-De)+" L"+(be.rightInnerExtent-Ie)+" "+(be.targetY-De)+"A"+(be.rightLargeArcRadius+De)+" "+(be.rightSmallArcRadius+De)+" 0 0 0 "+(be.rightFullExtent-De-Ie)+" "+(be.targetY+be.rightSmallArcRadius)+"L"+(be.rightFullExtent-De-Ie)+" "+be.verticalRightInnerExtent+"A"+(be.rightLargeArcRadius+De)+" "+(be.rightLargeArcRadius+De)+" 0 0 0 "+(be.rightInnerExtent-Ie)+" "+(be.verticalFullExtent+De)+"L"+be.leftInnerExtent+" "+(be.verticalFullExtent+De)+"A"+(be.leftLargeArcRadius+De)+" "+(be.leftLargeArcRadius+De)+" 0 0 0 "+(be.leftFullExtent+De)+" "+be.verticalLeftInnerExtent+"L"+(be.leftFullExtent+De)+" "+(be.sourceY+be.leftSmallArcRadius)+"A"+(be.leftLargeArcRadius+De)+" "+(be.leftSmallArcRadius+De)+" 0 0 0 "+be.leftInnerExtent+" "+(be.sourceY-De)+"L"+be.sourceX+" "+(be.sourceY-De)+"L"+be.sourceX+" "+(be.sourceY+De)+"L"+be.leftInnerExtent+" "+(be.sourceY+De)+"A"+(be.leftLargeArcRadius-De)+" "+(be.leftSmallArcRadius-De)+" 0 0 1 "+(be.leftFullExtent-De)+" "+(be.sourceY+be.leftSmallArcRadius)+"L"+(be.leftFullExtent-De)+" "+be.verticalLeftInnerExtent+"A"+(be.leftLargeArcRadius-De)+" "+(be.leftLargeArcRadius-De)+" 0 0 1 "+be.leftInnerExtent+" "+(be.verticalFullExtent-De)+"L"+(be.rightInnerExtent-Ie)+" "+(be.verticalFullExtent-De)+"A"+(be.rightLargeArcRadius-De)+" "+(be.rightLargeArcRadius-De)+" 0 0 1 "+(be.rightFullExtent+De-Ie)+" "+be.verticalRightInnerExtent+"L"+(be.rightFullExtent+De-Ie)+" "+(be.targetY+be.rightSmallArcRadius)+"A"+(be.rightLargeArcRadius-De)+" "+(be.rightSmallArcRadius-De)+" 0 0 1 "+(be.rightInnerExtent-Ie)+" "+(be.targetY+De)+"L"+(be.targetX-Ie)+" "+(be.targetY+De)+(Ie>0?"L"+be.targetX+" "+be.targetY:"")+"Z";var ae=Math.abs((G.link.target.x0-G.link.source.x1)/2);W>ae&&(W=ae);var re=G.link.source.x1,ne=G.link.target.x0-W,Q=k(re,ne),$=Q(.5),X=Q(.5),oe=G.link.y0-G.link.width/2,fe=G.link.y0+G.link.width/2,ue=G.link.y1-G.link.width/2,ge=G.link.y1+G.link.width/2,ye=W>0?"L"+(ne+W)+","+(ue+G.link.width/2):"";return"M"+re+","+oe+"C"+$+","+oe+" "+X+","+ue+" "+ne+","+ue+(ye+="L"+ne+","+ge)+"C"+X+","+ge+" "+$+","+fe+" "+re+","+fe+"Z"}}function C(G,W){var ae=l(W.color),re=p.nodePadAcross,ne=G.nodePad/2;W.dx=W.x1-W.x0,W.dy=W.y1-W.y0;var Q=W.dx,$=Math.max(.5,W.dy),X="node_"+W.pointNumber;return W.group&&(X=r.randstr()),W.trace=G.trace,W.curveNumber=G.trace.index,{index:W.pointNumber,key:X,partOfGroup:W.partOfGroup||!1,group:W.group,traceId:G.key,trace:G.trace,node:W,nodePad:G.nodePad,nodeLineColor:G.nodeLineColor,nodeLineWidth:G.nodeLineWidth,textFont:G.textFont,size:G.horizontal?G.height:G.width,visibleWidth:Math.ceil(Q),visibleHeight:$,zoneX:-re,zoneY:-ne,zoneWidth:Q+2*re,zoneHeight:$+2*ne,labelY:G.horizontal?W.dy/2+1:W.dx/2+1,left:1===W.originalLayer,sizeAcross:G.width,forceLayouts:G.forceLayouts,horizontal:G.horizontal,darkBackground:ae.getBrightness()<=128,tinyColorHue:t.tinyRGB(ae),tinyColorAlpha:ae.getAlpha(),valueFormat:G.valueFormat,valueSuffix:G.valueSuffix,sankey:G.sankey,graph:G.graph,arrangement:G.arrangement,uniqueNodeLabelPathId:[G.guid,G.key,X].join("_"),interactionState:G.interactionState,figure:G}}function w(G){G.attr("transform",function(W){return n(W.node.x0.toFixed(3),W.node.y0.toFixed(3))})}function E(G){G.call(w)}function P(G,W){G.call(E),W.attr("d",f())}function L(G){G.attr("width",function(W){return W.node.x1-W.node.x0}).attr("height",function(W){return W.visibleHeight})}function O(G){return G.link.width>1||G.linkLineWidth>0}function z(G){return n(G.translateX,G.translateY)+(G.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function V(G,W,ae){G.on(".basic",null).on("mouseover.basic",function(re){re.interactionState.dragInProgress||re.partOfGroup||(ae.hover(this,re,W),re.interactionState.hovered=[this,re])}).on("mousemove.basic",function(re){re.interactionState.dragInProgress||re.partOfGroup||(ae.follow(this,re),re.interactionState.hovered=[this,re])}).on("mouseout.basic",function(re){re.interactionState.dragInProgress||re.partOfGroup||(ae.unhover(this,re,W),re.interactionState.hovered=!1)}).on("click.basic",function(re){re.interactionState.hovered&&(ae.unhover(this,re,W),re.interactionState.hovered=!1),re.interactionState.dragInProgress||re.partOfGroup||ae.select(this,re,W)})}function R(G,W,ae,re){var ne=o.behavior.drag().origin(function(Q){return{x:Q.node.x0+Q.visibleWidth/2,y:Q.node.y0+Q.visibleHeight/2}}).on("dragstart",function(Q){if("fixed"!==Q.arrangement&&(r.ensureSingle(re._fullLayout._infolayer,"g","dragcover",function(X){re._fullLayout._dragCover=X}),r.raiseToTop(this),Q.interactionState.dragInProgress=Q.node,Z(Q.node),Q.interactionState.hovered&&(ae.nodeEvents.unhover.apply(0,Q.interactionState.hovered),Q.interactionState.hovered=!1),"snap"===Q.arrangement)){var $=Q.traceId+"|"+Q.key;Q.forceLayouts[$]?Q.forceLayouts[$].alpha(1):function(X,oe,fe,ue){!function(we){for(var Te=0;Te<we.length;Te++)we[Te].y=(we[Te].y0+we[Te].y1)/2,we[Te].x=(we[Te].x0+we[Te].x1)/2}(fe.graph.nodes);var Te,xe,ye,ge=fe.graph.nodes.filter(function(we){return we.originalX===fe.node.originalX}).filter(function(we){return!we.partOfGroup});fe.forceLayouts[oe]=S.forceSimulation(ge).alphaDecay(0).force("collide",S.forceCollide().radius(function(we){return we.dy/2+fe.nodePad/2}).strength(1).iterations(p.forceIterations)).force("constrain",(Te=oe,xe=ge,ye=fe,function(){for(var _e=0,Ie=0;Ie<xe.length;Ie++){var De=xe[Ie];De===ye.interactionState.dragInProgress?(De.x=De.lastDraggedX,De.y=De.lastDraggedY):(De.vx=(De.originalX-De.x)/p.forceTicksPerFrame,De.y=Math.min(ye.size-De.dy/2,Math.max(De.dy/2,De.y))),_e=Math.max(_e,Math.abs(De.vx),Math.abs(De.vy))}!ye.interactionState.dragInProgress&&_e<.1&&ye.forceLayouts[Te].alpha()>0&&ye.forceLayouts[Te].alpha(0)})).stop()}(0,$,Q),X=G,oe=W,fe=Q,ue=$,ge=re,window.requestAnimationFrame(function we(){var Te;for(Te=0;Te<p.forceTicksPerFrame;Te++)fe.forceLayouts[ue].tick();if(function(ye){for(var _e=0;_e<ye.length;_e++)ye[_e].y0=ye[_e].y-ye[_e].dy/2,ye[_e].y1=ye[_e].y0+ye[_e].dy,ye[_e].x0=ye[_e].x-ye[_e].dx/2,ye[_e].x1=ye[_e].x0+ye[_e].dx}(fe.graph.nodes),fe.sankey.update(fe.graph),P(X.filter(N(fe)),oe),fe.forceLayouts[ue].alpha()>0)window.requestAnimationFrame(we);else{var xe=fe.node.originalX;fe.node.x0=xe-fe.visibleWidth/2,fe.node.x1=xe+fe.visibleWidth/2,U(fe,ge)}})}var X,oe,fe,ue,ge}).on("drag",function(Q){if("fixed"!==Q.arrangement){var $=o.event.x,X=o.event.y;"snap"===Q.arrangement?(Q.node.x0=$-Q.visibleWidth/2,Q.node.x1=$+Q.visibleWidth/2,Q.node.y0=X-Q.visibleHeight/2,Q.node.y1=X+Q.visibleHeight/2):("freeform"===Q.arrangement&&(Q.node.x0=$-Q.visibleWidth/2,Q.node.x1=$+Q.visibleWidth/2),X=Math.max(0,Math.min(Q.size-Q.visibleHeight/2,X)),Q.node.y0=X-Q.visibleHeight/2,Q.node.y1=X+Q.visibleHeight/2),Z(Q.node),"snap"!==Q.arrangement&&(Q.sankey.update(Q.graph),P(G.filter(N(Q)),W))}}).on("dragend",function(Q){if("fixed"!==Q.arrangement){Q.interactionState.dragInProgress=!1;for(var $=0;$<Q.node.childrenNodes.length;$++)Q.node.childrenNodes[$].x=Q.node.x,Q.node.childrenNodes[$].y=Q.node.y;"snap"!==Q.arrangement&&U(Q,re)}});G.on(".drag",null).call(ne)}function U(G,W){for(var ae=[],re=[],ne=0;ne<G.graph.nodes.length;ne++){var $=(G.graph.nodes[ne].y0+G.graph.nodes[ne].y1)/2;ae.push((G.graph.nodes[ne].x0+G.graph.nodes[ne].x1)/2/G.figure.width),re.push($/G.figure.height)}d.call("_guiRestyle",W,{"node.x":[ae],"node.y":[re]},G.trace.index).then(function(){W._fullLayout._dragCover&&W._fullLayout._dragCover.remove()})}function Z(G){G.lastDraggedX=G.x0+G.dx/2,G.lastDraggedY=G.y0+G.dy/2}function N(G){return function(W){return W.node.originalX===G.node.originalX}}ie.exports=function(G,W,ae,re,ne){var Q=G._context.staticPlot,$=!1;r.ensureSingle(G._fullLayout._infolayer,"g","first-render",function(){$=!0});var X=G._fullLayout._dragCover,oe=ae.filter(function(_e){return u(_e).trace.visible}).map(v.bind(null,re)),fe=W.selectAll("."+p.cn.sankey).data(oe,c);fe.exit().remove(),fe.enter().append("g").classed(p.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",Q?"none":"auto").attr("transform",z),fe.each(function(_e,Ie){G._fullData[Ie]._sankey=_e;var De="bgsankey-"+_e.trace.uid+"-"+Ie;r.ensureSingle(G._fullLayout._draggers,"rect",De),G._fullData[Ie]._bgRect=o.select("."+De),G._fullData[Ie]._bgRect.style("pointer-events",Q?"none":"all").attr("width",_e.width).attr("height",_e.height).attr("x",_e.translateX).attr("y",_e.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),fe.transition().ease(p.ease).duration(p.duration).attr("transform",z);var ue=fe.selectAll("."+p.cn.sankeyLinks).data(h,c);ue.enter().append("g").classed(p.cn.sankeyLinks,!0).style("fill","none");var ge=ue.selectAll("."+p.cn.sankeyLink).data(function(_e){return _e.graph.links.filter(function(Ie){return Ie.value}).map(_.bind(null,_e))},c);ge.enter().append("path").classed(p.cn.sankeyLink,!0).call(V,fe,ne.linkEvents),ge.style("stroke",function(_e){return O(_e)?t.tinyRGB(l(_e.linkLineColor)):_e.tinyColorHue}).style("stroke-opacity",function(_e){return O(_e)?t.opacity(_e.linkLineColor):_e.tinyColorAlpha}).style("fill",function(_e){return _e.tinyColorHue}).style("fill-opacity",function(_e){return _e.tinyColorAlpha}).style("stroke-width",function(_e){return O(_e)?_e.linkLineWidth:1}).attr("d",f()),ge.style("opacity",function(){return G._context.staticPlot||$||X?1:0}).transition().ease(p.ease).duration(p.duration).style("opacity",1),ge.exit().transition().ease(p.ease).duration(p.duration).style("opacity",0).remove();var we=fe.selectAll("."+p.cn.sankeyNodeSet).data(h,c);we.enter().append("g").classed(p.cn.sankeyNodeSet,!0),we.style("cursor",function(_e){switch(_e.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var Te=we.selectAll("."+p.cn.sankeyNode).data(function(_e){var Ie=_e.graph.nodes;return function(De){var be,he=[];for(be=0;be<De.length;be++)De[be].originalX=(De[be].x0+De[be].x1)/2,De[be].originalY=(De[be].y0+De[be].y1)/2,-1===he.indexOf(De[be].originalX)&&he.push(De[be].originalX);for(he.sort(function(ce,me){return ce-me}),be=0;be<De.length;be++)De[be].originalLayerIndex=he.indexOf(De[be].originalX),De[be].originalLayer=De[be].originalLayerIndex/(he.length-1)}(Ie),Ie.map(C.bind(null,_e))},c);Te.enter().append("g").classed(p.cn.sankeyNode,!0).call(w).style("opacity",function(_e){return!G._context.staticPlot&&!$||_e.partOfGroup?0:1}),Te.call(V,fe,ne.nodeEvents).call(R,ge,ne,G),Te.transition().ease(p.ease).duration(p.duration).call(w).style("opacity",function(_e){return _e.partOfGroup?0:1}),Te.exit().transition().ease(p.ease).duration(p.duration).style("opacity",0).remove();var xe=Te.selectAll("."+p.cn.nodeRect).data(h);xe.enter().append("rect").classed(p.cn.nodeRect,!0).call(L),xe.style("stroke-width",function(_e){return _e.nodeLineWidth}).style("stroke",function(_e){return t.tinyRGB(l(_e.nodeLineColor))}).style("stroke-opacity",function(_e){return t.opacity(_e.nodeLineColor)}).style("fill",function(_e){return _e.tinyColorHue}).style("fill-opacity",function(_e){return _e.tinyColorAlpha}),xe.transition().ease(p.ease).duration(p.duration).call(L);var ye=Te.selectAll("."+p.cn.nodeLabel).data(h);ye.enter().append("text").classed(p.cn.nodeLabel,!0).style("cursor","default"),ye.attr("data-notex",1).text(function(_e){return _e.node.label}).each(function(_e){var Ie=o.select(this);i.font(Ie,_e.textFont),y.convertToTspans(Ie,G)}).attr("text-anchor",function(_e){return _e.horizontal&&_e.left?"end":"start"}).attr("transform",function(_e){var Ie=o.select(this),De=y.lineCount(Ie),he=_e.nodeLineWidth/2+3,ce=((_e.horizontal?_e.visibleHeight:_e.visibleWidth)-_e.textFont.size*((De-1)*x-g))/2;_e.horizontal&&(_e.left?he=-he:he+=_e.visibleWidth);var me=_e.horizontal?"":"scale(-1,1)"+a(90);return n(_e.horizontal?he:ce,_e.horizontal?ce:he)+me}),ye.transition().ease(p.ease).duration(p.duration)}},81128:function(ie){"use strict";ie.exports=function(F,e){for(var S=[],k=F.cd[0].trace,o=k._sankey.graph.nodes,T=0;T<o.length;T++){var b=o[T];if(!b.partOfGroup){var p=[(b.x0+b.x1)/2,(b.y0+b.y1)/2];"v"===k.orientation&&p.reverse(),e&&e.contains(p,!1,T,F)&&S.push({pointNumber:b.pointNumber})}}return S}},20148:function(ie,F,e){"use strict";var S=e(3400);ie.exports=function(k,o){for(var T=0;T<k.length;T++)k[T].i=T;S.mergeArray(o.text,k,"tx"),S.mergeArray(o.texttemplate,k,"txt"),S.mergeArray(o.hovertext,k,"htx"),S.mergeArray(o.customdata,k,"data"),S.mergeArray(o.textposition,k,"tp"),o.textfont&&(S.mergeArrayCastPositive(o.textfont.size,k,"ts"),S.mergeArray(o.textfont.color,k,"tc"),S.mergeArray(o.textfont.family,k,"tf"),S.mergeArray(o.textfont.weight,k,"tw"),S.mergeArray(o.textfont.style,k,"ty"),S.mergeArray(o.textfont.variant,k,"tv"),S.mergeArray(o.textfont.textcase,k,"tC"),S.mergeArray(o.textfont.lineposition,k,"tE"),S.mergeArray(o.textfont.shadow,k,"tS"));var b=o.marker;if(b){S.mergeArrayCastPositive(b.size,k,"ms"),S.mergeArrayCastPositive(b.opacity,k,"mo"),S.mergeArray(b.symbol,k,"mx"),S.mergeArray(b.angle,k,"ma"),S.mergeArray(b.standoff,k,"mf"),S.mergeArray(b.color,k,"mc");var p=b.line;b.line&&(S.mergeArray(p.color,k,"mlc"),S.mergeArrayCastPositive(p.width,k,"mlw"));var l=b.gradient;l&&"none"!==l.type&&(S.mergeArray(l.type,k,"mgt"),S.mergeArray(l.color,k,"mgc"))}}},52904:function(ie,F,e){"use strict";var S=e(29736).axisHoverFormat,k=e(21776).Gw,o=e(21776).Ks,T=e(49084),b=e(25376),p=e(98192).u,l=e(98192).c,t=e(43616),i=e(88200),r=e(92880).extendFlat,n=e(98304);ie.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:S("x"),yhoverformat:S("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:k({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:o({},{keys:i.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:r({},p,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:n(!0),fillgradient:r({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc"},start:{valType:"number",editType:"calc"},stop:{valType:"number",editType:"calc"},colorscale:{valType:"colorscale",editType:"style"},editType:"calc"}),fillpattern:l,marker:r({symbol:{valType:"enumerated",values:t.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:r({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},T("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},T("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:b({editType:"calc",colorEditType:"style",arrayOk:!0}),zorder:{valType:"integer",dflt:0,editType:"plot"}}},16356:function(ie,F,e){"use strict";var S=e(38248),k=e(3400),o=e(54460),T=e(1220),b=e(39032).BADNUM,p=e(43028),l=e(90136),t=e(20148),i=e(4500);function r(h,u,y,d,m,g,x){var v=u._length,_=h._fullLayout,f=y._id,C=d._id,w=_._firstScatter[s(u)]===u.uid,E=(c(u,_,y,d)||{}).orientation,P=u.fill;y._minDtick=0,d._minDtick=0;var L={padded:!0},O={padded:!0};x&&(L.ppad=O.ppad=x);var z=v<2||m[0]!==m[v-1]||g[0]!==g[v-1];z&&("tozerox"===P||"tonextx"===P&&(w||"h"===E))?L.tozero=!0:(u.error_y||{}).visible||"tonexty"!==P&&"tozeroy"!==P&&(p.hasMarkers(u)||p.hasText(u))||(L.padded=!1,L.ppad=0),z&&("tozeroy"===P||"tonexty"===P&&(w||"v"===E))?O.tozero=!0:"tonextx"!==P&&"tozerox"!==P||(O.padded=!1),f&&(u._extremes[f]=o.findExtremes(y,m,L)),C&&(u._extremes[C]=o.findExtremes(d,g,O))}function n(h,u){if(p.hasMarkers(h)){var y,d=h.marker,m=1.6*(h.marker.sizeref||1);if(y="area"===h.marker.sizemode?function(f){return Math.max(Math.sqrt((f||0)/m),3)}:function(f){return Math.max((f||0)/m,3)},k.isArrayOrTypedArray(d.size)){var g={type:"linear"};o.setConvert(g);for(var x=g.makeCalcdata(h.marker,"size"),v=new Array(u),_=0;_<u;_++)v[_]=y(x[_]);return v}return y(d.size)}}function a(h,u){var y=s(u),d=h._firstScatter;d[y]||(d[y]=u.uid)}function s(h){var u=h.stackgroup;return h.xaxis+h.yaxis+h.type+(u?"-"+u:"")}function c(h,u,y,d){var m=h.stackgroup;if(m){var g=u._scatterStackOpts[y._id+d._id][m],x="v"===g.orientation?d:y;return"linear"===x.type||"log"===x.type?g:void 0}}ie.exports={calc:function(h,u){var y,d,m,g,x,v,_=h._fullLayout,f=u._xA=o.getFromId(h,u.xaxis||"x","x"),C=u._yA=o.getFromId(h,u.yaxis||"y","y"),w=f.makeCalcdata(u,"x"),E=C.makeCalcdata(u,"y"),P=T(u,f,"x",w),L=T(u,C,"y",E),O=P.vals,z=L.vals,V=u._length,R=new Array(V),U=u.ids,Z=c(u,_,f,C),N=!1;a(_,u);var G,W="x",ae="y";Z?(k.pushUnique(Z.traceIndices,u._expandedIndex),(y="v"===Z.orientation)?(ae="s",G="x"):(W="s",G="y"),x="interpolate"===Z.stackgaps):r(h,u,f,C,O,z,n(u,V));var re=!!u.xperiodalignment,ne=!!u.yperiodalignment;for(d=0;d<V;d++){var Q=R[d]={},$=S(O[d]),X=S(z[d]);$&&X?(Q[W]=O[d],Q[ae]=z[d],re&&(Q.orig_x=w[d],Q.xEnd=P.ends[d],Q.xStart=P.starts[d]),ne&&(Q.orig_y=E[d],Q.yEnd=L.ends[d],Q.yStart=L.starts[d])):Z&&(y?$:X)?(Q[G]=y?O[d]:z[d],Q.gap=!0,x?(Q.s=b,N=!0):Q.s=0):Q[W]=Q[ae]=b,U&&(Q.id=String(U[d]))}if(t(R,u),l(h,u),i(R,u),Z){for(d=0;d<R.length;)R[d][G]===b?R.splice(d,1):d++;if(k.sort(R,function(ge,we){return ge[G]-we[G]||ge.i-we.i}),N){for(d=0;d<R.length-1&&R[d].gap;)d++;for((v=R[d].s)||(v=R[d].s=0),m=0;m<d;m++)R[m].s=v;for(g=R.length-1;g>d&&R[g].gap;)g--;for(v=R[g].s,m=R.length-1;m>g;m--)R[m].s=v;for(;d<g;)if(R[++d].gap){for(m=d+1;R[m].gap;)m++;for(var oe=R[d-1][G],fe=R[d-1].s,ue=(R[m].s-fe)/(R[m][G]-oe);d<m;)R[d].s=fe+(R[d][G]-oe)*ue,d++}}}return R},calcMarkerSize:n,calcAxisExpansion:r,setFirstScatter:a,getStackOpts:c}},4500:function(ie,F,e){"use strict";var S=e(3400);ie.exports=function(k,o){S.isArrayOrTypedArray(o.selectedpoints)&&S.tagSelected(k,o)}},90136:function(ie,F,e){"use strict";var S=e(94288).hasColorscale,k=e(47128),o=e(43028);ie.exports=function(T,b){o.hasLines(b)&&S(b,"line")&&k(T,b,{vals:b.line.color,containerStr:"line",cLetter:"c"}),o.hasMarkers(b)&&(S(b,"marker")&&k(T,b,{vals:b.marker.color,containerStr:"marker",cLetter:"c"}),S(b,"marker.line")&&k(T,b,{vals:b.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},88200:function(ie){"use strict";ie.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},96664:function(ie,F,e){"use strict";var S=e(16356),k=e(96376).setGroupPositions;function o(T,b,p,l,t,i,r){t[l]=!0;var s,c,u,y,d,n={i:null,gap:!0,s:0};if(n[r]=p,T.splice(b,0,n),b&&p===T[b-1][r]){var a=T[b-1];n.s=a.s,n.i=a.i,n.gap=a.gap}else i&&(n.s=(u=r,y=(s=T)[(c=b)-1],(d=s[c+1])?y?y.s+(d.s-y.s)*(p-y[u])/(d[u]-y[u]):d.s:y.s));b||(T[0].t=T[1].t,T[0].trace=T[1].trace,delete T[1].t,delete T[1].trace)}ie.exports=function(T,b){"group"===T._fullLayout.scattermode&&function(G,W){for(var ae=W.xaxis,re=W.yaxis,ne=G._fullLayout,Q=G._fullData,$=G.calcdata,X=[],oe=[],fe=0;fe<Q.length;fe++){var ue=Q[fe];!0===ue.visible&&"scatter"===ue.type&&ue.xaxis===ae._id&&ue.yaxis===re._id&&("h"===ue.orientation?X.push($[fe]):"v"===ue.orientation&&oe.push($[fe]))}var ge={mode:ne.scattermode,gap:ne.scattergap};k(G,ae,re,oe,ge),k(G,re,ae,X,ge)}(T,b);var p=b.xaxis,l=b.yaxis,i=T._fullLayout._scatterStackOpts[p._id+l._id];if(i){var r,n,a,s,c,h,u,y,d,m,g,x,v,_,f,C=T.calcdata;for(var w in i){var E=(m=i[w]).traceIndices;if(E.length){for(g="interpolate"===m.stackgaps,x=m.groupnorm,"v"===m.orientation?(v="x",_="y"):(v="y",_="x"),f=new Array(E.length),r=0;r<f.length;r++)f[r]=!1;h=C[E[0]];var P=new Array(h.length);for(r=0;r<h.length;r++)P[r]=h[r][v];for(r=1;r<E.length;r++){for(c=C[E[r]],n=a=0;n<c.length;n++){for(u=c[n][v];u>P[a]&&a<P.length;a++)o(c,n,P[a],r,f,g,v),n++;if(u!==P[a]){for(s=0;s<r;s++)o(C[E[s]],a,u,s,f,g,v);P.splice(a,0,u)}a++}for(;a<P.length;a++)o(c,n,P[a],r,f,g,v),n++}var L=P.length;for(n=0;n<h.length;n++){for(y=h[n][_]=h[n].s,r=1;r<E.length;r++)(c=C[E[r]])[0].trace._rawLength=c[0].trace._length,c[0].trace._length=L,c[n][_]=y+=c[n].s;if(x)for(d=("fraction"===x?y:y/100)||1,r=0;r<E.length;r++){var O=C[E[r]][n];O[_]/=d,O.sNorm=O.s/d}}for(r=0;r<E.length;r++){var z=(c=C[E[r]])[0].trace,V=S.calcMarkerSize(z,z._rawLength),R=Array.isArray(V);if(V&&f[r]||R){var U=V;for(V=new Array(L),n=0;n<L;n++)V[n]=c[n].gap?0:R?U[c[n].i]:U}var Z=new Array(L),N=new Array(L);for(n=0;n<L;n++)Z[n]=c[n].x,N[n]=c[n].y;S.calcAxisExpansion(T,z,p,l,Z,N,V),c[0].t.orientation=m.orientation}}}}}},35036:function(ie,F,e){"use strict";var S=e(3400),k=e(20011),o=e(52904);ie.exports=function(T,b){var l,t;function i(c){return S.coerce(l._input,l,o,c)}if("group"===b.scattermode)for(t=0;t<T.length;t++)"scatter"===(l=T[t]).type&&k(l._input,l,b,i);for(t=0;t<T.length;t++){var r=T[t];if("scatter"===r.type){var n=r.fill;if("none"!==n&&"toself"!==n&&(r.opacity=void 0,"tonexty"===n||"tonextx"===n))for(var a=t-1;a>=0;a--){var s=T[a];if("scatter"===s.type&&s.xaxis===r.xaxis&&s.yaxis===r.yaxis){s.opacity=void 0;break}}}}}},18800:function(ie,F,e){"use strict";var S=e(3400),k=e(24040),o=e(52904),T=e(88200),b=e(43028),p=e(43980),l=e(31147),t=e(43912),i=e(74428),r=e(66828),n=e(11731),a=e(124),s=e(70840),c=e(3400).coercePattern;ie.exports=function(h,u,y,d){function m(E,P){return S.coerce(h,u,o,E,P)}var g=p(h,u,d,m);if(g||(u.visible=!1),u.visible){l(h,u,d,m),m("xhoverformat"),m("yhoverformat"),m("zorder");var x=t(h,u,d,m);"group"===d.scattermode&&void 0===u.orientation&&m("orientation","v");var v=!x&&g<T.PTS_LINESONLY?"lines+markers":"lines";m("text"),m("hovertext"),m("mode",v),b.hasMarkers(u)&&i(h,u,y,d,m,{gradient:!0}),b.hasLines(u)&&(r(h,u,y,d,m,{backoff:!0}),n(h,u,m),m("connectgaps"),m("line.simplify")),b.hasText(u)&&(m("texttemplate"),a(h,u,d,m));var _=[];(b.hasMarkers(u)||b.hasText(u))&&(m("cliponaxis"),m("marker.maxdisplayed"),_.push("points")),m("fill",x?x.fillDflt:"none"),"none"!==u.fill&&(s(h,u,y,m,{moduleHasFillgradient:!0}),b.hasLines(u)||n(h,u,m),c(m,"fillpattern",u.fillcolor,!1));var f=(u.line||{}).color,C=(u.marker||{}).color;"tonext"!==u.fill&&"toself"!==u.fill||_.push("fills"),m("hoveron",_.join("+")||"points"),"fills"!==u.hoveron&&m("hovertemplate");var w=k.getComponentMethod("errorbars","supplyDefaults");w(h,u,f||C||y,{axis:"y"}),w(h,u,f||C||y,{axis:"x",inherit:"y"}),S.coerceSelectionMarkerOpacity(u,m)}}},98304:function(ie){"use strict";ie.exports=function(F){return{valType:"color",editType:"style",anim:!0}}},70840:function(ie,F,e){"use strict";var S=e(76308),k=e(3400).isArrayOrTypedArray;ie.exports=function(o,T,b,p,l){l||(l={});var t,i=!1;if(T.marker){var r=T.marker.color,n=(T.marker.line||{}).color;r&&!k(r)?i=r:n&&!k(n)&&(i=n)}if(l.moduleHasFillgradient&&"none"!==p("fillgradient.type")){p("fillgradient.start"),p("fillgradient.stop");var a=p("fillgradient.colorscale");a&&(t=function(s){for(var c=S.interpolate(s[0][1],s[1][1],.5),h=2;h<s.length;h++){var u=S.interpolate(s[h-1][1],s[h][1],.5);c=S.interpolate(c,u,s[h-1][0]/s[h][0])}return c}(a))}p("fillcolor",S.addOpacity((T.line||{}).color||i||t||b,.5))}},76688:function(ie,F,e){"use strict";var S=e(54460);ie.exports=function(k,o,T){var b={},p={_fullLayout:T},l=S.getFromTrace(p,o,"x"),t=S.getFromTrace(p,o,"y"),i=k.orig_x;void 0===i&&(i=k.x);var r=k.orig_y;return void 0===r&&(r=k.y),b.xLabel=S.tickText(l,l.c2l(i),!0).text,b.yLabel=S.tickText(t,t.c2l(r),!0).text,b}},44928:function(ie,F,e){"use strict";var S=e(76308),k=e(43028);ie.exports=function(o,T){var b,p;if("lines"===o.mode)return(b=o.line.color)&&S.opacity(b)?b:o.fillcolor;if("none"===o.mode)return o.fill?o.fillcolor:"";var l=T.mcc||(o.marker||{}).color,t=T.mlcc||((o.marker||{}).line||{}).color;return(p=l&&S.opacity(l)?l:t&&S.opacity(t)&&(T.mlw||((o.marker||{}).line||{}).width)?t:"")?S.opacity(p)<.3?S.addOpacity(p,.3):p:(b=(o.line||{}).color)&&S.opacity(b)&&k.hasLines(o)&&o.line.width?b:o.fillcolor}},20011:function(ie,F,e){"use strict";var S=e(71888).getAxisGroup;ie.exports=function(k,o,T,b){var p=o.orientation,t=S(T,o[{v:"x",h:"y"}[p]+"axis"])+p,i=T._alignmentOpts||{},r=b("alignmentgroup"),n=i[t];n||(n=i[t]={});var a=n[r];a?a.traces.push(o):a=n[r]={traces:[o],alignmentIndex:Object.keys(n).length,offsetGroups:{}};var s=b("offsetgroup"),c=a.offsetGroups,h=c[s];s&&(h||(h=c[s]={offsetIndex:Object.keys(c).length}),o._offsetIndex=h.offsetIndex)}},98723:function(ie,F,e){"use strict";var S=e(3400),k=e(93024),o=e(24040),T=e(44928),b=e(76308),p=S.fillText;ie.exports=function(l,t,i,r){var n=l.cd,a=n[0].trace,s=l.xa,c=l.ya,h=s.c2p(t),u=c.c2p(i),y=[h,u],d=a.hoveron||"",m=-1!==a.mode.indexOf("markers")?3:.5,g=!!a.xperiodalignment,x=!!a.yperiodalignment;if(-1!==d.indexOf("points")){var v=function(Z){var N=Math.max(m,Z.mrc||0),G=s.c2p(Z.x)-h,W=c.c2p(Z.y)-u;return Math.max(Math.sqrt(G*G+W*W)-N,1-m/N)},_=k.getDistanceFunction(r,function(Z){if(g){var N=s.c2p(Z.xStart),G=s.c2p(Z.xEnd);return h>=Math.min(N,G)&&h<=Math.max(N,G)?0:1/0}var W=Math.max(3,Z.mrc||0),ae=1-1/W,re=Math.abs(s.c2p(Z.x)-h);return re<W?ae*re/W:re-W+ae},function(Z){if(x){var N=c.c2p(Z.yStart),G=c.c2p(Z.yEnd);return u>=Math.min(N,G)&&u<=Math.max(N,G)?0:1/0}var W=Math.max(3,Z.mrc||0),ae=1-1/W,re=Math.abs(c.c2p(Z.y)-u);return re<W?ae*re/W:re-W+ae},v);if(k.getClosest(n,_,l),!1!==l.index){var f=n[l.index],C=s.c2p(f.x,!0),w=c.c2p(f.y,!0),E=f.mrc||1;l.index=f.i;var P=n[0].t.orientation,L=P&&(f.sNorm||f.s),O="h"===P?L:void 0!==f.orig_x?f.orig_x:f.x,z="v"===P?L:void 0!==f.orig_y?f.orig_y:f.y;return S.extendFlat(l,{color:T(a,f),x0:C-E,x1:C+E,xLabelVal:O,y0:w-E,y1:w+E,yLabelVal:z,spikeDistance:v(f),hovertemplate:a.hovertemplate}),p(f,a,l),o.getComponentMethod("errorbars","hoverInfo")(f,a,l),[l]}}function V(Z){if(!Z)return!1;var N=Z.node();try{var G=new DOMPoint(y[0],y[1]);return N.isPointInFill(G)}catch{var W=N.ownerSVGElement.createSVGPoint();return W.x=y[0],W.y=y[1],N.isPointInFill(W)}}if(-1!==d.indexOf("fills")&&a._fillElement&&V(a._fillElement)&&!V(a._fillExclusionElement)){var R=function(Z){var N,G,W,ae,re,ne,$,X,oe=[],fe=1/0,ue=-1/0,ge=1/0,we=-1/0;for(N=0;N<Z.length;N++){var Te=Z[N];Te.contains(y)&&(oe.push(Te),ge=Math.min(ge,Te.ymin),we=Math.max(we,Te.ymax))}if(0===oe.length)return null;for(G=((ge=Math.max(ge,0))+(we=Math.min(we,c._length)))/2,N=0;N<oe.length;N++)for(ae=oe[N].pts,W=1;W<ae.length;W++)($=ae[W-1][1])>G!=(X=ae[W][1])>=G&&(ne=ae[W-1][0],X-$&&(re=ne+(ae[W][0]-ne)*(G-$)/(X-$),fe=Math.min(fe,re),ue=Math.max(ue,re)));return{x0:fe=Math.max(fe,0),x1:ue=Math.min(ue,s._length),y0:G,y1:G}}(a._polygons);null===R&&(R={x0:y[0],x1:y[0],y0:y[1],y1:y[1]});var U=b.defaultLine;return b.opacity(a.fillcolor)?U=a.fillcolor:b.opacity((a.line||{}).color)&&(U=a.line.color),S.extendFlat(l,{distance:l.maxHoverDistance,x0:R.x0,x1:R.x1,y0:R.y0,y1:R.y1,color:U,hovertemplate:!1}),delete l.index,l.text=a.text&&!S.isArrayOrTypedArray(a.text)?String(a.text):a.name,[l]}}},65875:function(ie,F,e){"use strict";var S=e(43028);ie.exports={hasLines:S.hasLines,hasMarkers:S.hasMarkers,hasText:S.hasText,isBubble:S.isBubble,attributes:e(52904),layoutAttributes:e(55308),supplyDefaults:e(18800),crossTraceDefaults:e(35036),supplyLayoutDefaults:e(59748),calc:e(16356).calc,crossTraceCalc:e(96664),arraysToCalcdata:e(20148),plot:e(96504),colorbar:e(5528),formatLabels:e(76688),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(98723),selectPoints:e(91560),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e(57952),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},55308:function(ie){"use strict";ie.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},59748:function(ie,F,e){"use strict";var S=e(3400),k=e(55308);ie.exports=function(o,T){"group"===T.scattermode&&S.coerce(o,T,k,"scattergap","group"===T.barmode?T.bargap:.2)}},66828:function(ie,F,e){"use strict";var S=e(3400).isArrayOrTypedArray,k=e(94288).hasColorscale,o=e(27260);ie.exports=function(T,b,p,l,t,i){i||(i={});var r=(T.marker||{}).color;r&&r._inputArray&&(r=r._inputArray),t("line.color",p),k(T,"line")?o(T,b,l,t,{prefix:"line.",cLetter:"c"}):t("line.color",!S(r)&&r||p),t("line.width"),i.noDash||t("line.dash"),i.backoff&&t("line.backoff")}},52340:function(ie,F,e){"use strict";var S=e(43616),k=e(39032),o=k.BADNUM,T=k.LOG_CLIP,b=T+.5,p=T-.5,l=e(3400),t=l.segmentsIntersect,i=l.constrain,r=e(88200);ie.exports=function(n,a){var s,c,h,u,y,d,m,g,x,v,_,f,C,w,E,P,L,O,z=a.trace||{},V=a.xaxis,R=a.yaxis,U="log"===V.type,Z="log"===R.type,N=V._length,G=R._length,W=a.backoff,ae=z.marker,re=a.connectGaps,ne=a.baseTolerance,Q=a.shape,$="linear"===Q,X=z.fill&&"none"!==z.fill,oe=[],fe=r.minTolerance,ue=n.length,ge=new Array(ue),we=0;function Te(zt){var Qe=n[zt];if(!Qe)return!1;var nt=a.linearized?V.l2p(Qe.x):V.c2p(Qe.x),We=a.linearized?R.l2p(Qe.y):R.c2p(Qe.y);if(nt===o){if(U&&(nt=V.c2p(Qe.x,!0)),nt===o)return!1;Z&&We===o&&(nt*=Math.abs(V._m*G*(V._m>0?b:p)/(R._m*N*(R._m>0?b:p)))),nt*=1e3}if(We===o){if(Z&&(We=R.c2p(Qe.y,!0)),We===o)return!1;We*=1e3}return[nt,We]}function xe(zt,Qe,nt,We){var et=nt-zt,gt=We-Qe,ht=.5-zt,Ge=.5-Qe,He=et*et+gt*gt,ut=et*ht+gt*Ge;if(ut>0&&ut<He){var tt=ht*gt-Ge*et;if(tt*tt<He)return!0}}function ye(zt,Qe){var nt=zt[0]/N,We=zt[1]/G,et=Math.max(0,-nt,nt-1,-We,We-1);return et&&void 0!==L&&xe(nt,We,L,O)&&(et=0),et&&Qe&&xe(nt,We,Qe[0]/N,Qe[1]/G)&&(et=0),(1+r.toleranceGrowth*et)*ne}function _e(zt,Qe){var nt=zt[0]-Qe[0],We=zt[1]-Qe[1];return Math.sqrt(nt*nt+We*We)}var Ie,De,be,he,ce,me,Pe,Ae=r.maxScreensAway,Ce=-N*Ae,Oe=N*(1+Ae),Ne=-G*Ae,je=G*(1+Ae),ve=[[Ce,Ne,Oe,Ne],[Oe,Ne,Oe,je],[Oe,je,Ce,je],[Ce,je,Ce,Ne]];function Me(zt){if(zt[0]<Ce||zt[0]>Oe||zt[1]<Ne||zt[1]>je)return[i(zt[0],Ce,Oe),i(zt[1],Ne,je)]}function Le(zt,Qe){return zt[0]===Qe[0]&&(zt[0]===Ce||zt[0]===Oe)||zt[1]===Qe[1]&&(zt[1]===Ne||zt[1]===je)||void 0}function Ue(zt,Qe,nt){return function(We,et){var gt=Me(We),ht=Me(et),Ge=[];if(gt&&ht&&Le(gt,ht))return Ge;gt&&Ge.push(gt),ht&&Ge.push(ht);var He=2*l.constrain((We[zt]+et[zt])/2,Qe,nt)-((gt||We)[zt]+(ht||et)[zt]);return He&&((gt&&ht?He>0==gt[zt]>ht[zt]?gt:ht:gt||ht)[zt]+=He),Ge}}function ze(zt){var Qe=zt[0],nt=zt[1],We=Qe===ge[we-1][0],et=nt===ge[we-1][1];if(!We||!et)if(we>1){var gt=Qe===ge[we-2][0],ht=nt===ge[we-2][1];We&&(Qe===Ce||Qe===Oe)&&gt?ht?we--:ge[we-1]=zt:et&&(nt===Ne||nt===je)&&ht?gt?we--:ge[we-1]=zt:ge[we++]=zt}else ge[we++]=zt}function qe(zt){ge[we-1][0]!==zt[0]&&ge[we-1][1]!==zt[1]&&ze([be,he]),ze(zt),ce=null,be=he=0}"linear"===Q||"spline"===Q?Pe=function(zt,Qe){for(var nt=[],We=0,et=0;et<4;et++){var gt=ve[et],ht=t(zt[0],zt[1],Qe[0],Qe[1],gt[0],gt[1],gt[2],gt[3]);ht&&(!We||Math.abs(ht.x-nt[0][0])>1||Math.abs(ht.y-nt[0][1])>1)&&(ht=[ht.x,ht.y],We&&_e(ht,zt)<_e(nt[0],zt)?nt.unshift(ht):nt.push(ht),We++)}return nt}:"hv"===Q||"vh"===Q?Pe=function(zt,Qe){var nt=[],We=Me(zt),et=Me(Qe);return We&&et&&Le(We,et)||(We&&nt.push(We),et&&nt.push(et)),nt}:"hvh"===Q?Pe=Ue(0,Ce,Oe):"vhv"===Q&&(Pe=Ue(1,Ne,je));var Ke=l.isArrayOrTypedArray(ae);function it(zt){if(zt&&W&&(zt.i=s,zt.d=n,zt.trace=z,zt.marker=Ke?ae[zt.i]:ae,zt.backoff=W),L=zt[0]/N,O=zt[1]/G,De=zt[1]<Ne?Ne:zt[1]>je?je:0,(Ie=zt[0]<Ce?Ce:zt[0]>Oe?Oe:0)||De){if(we)if(ce){var Qe=Pe(ce,zt);Qe.length>1&&(qe(Qe[0]),ge[we++]=Qe[1])}else me=Pe(ge[we-1],zt)[0],ge[we++]=me;else ge[we++]=[Ie||zt[0],De||zt[1]];var nt=ge[we-1];Ie&&De&&(nt[0]!==Ie||nt[1]!==De)?(ce&&(be!==Ie&&he!==De?ze(be&&he?(gt=(et=zt)[0]-(We=ce)[0],ht=(et[1]-We[1])/gt,(We[1]*et[0]-et[1]*We[0])/gt>0?[ht>0?Ce:Oe,je]:[ht>0?Oe:Ce,Ne]):[be||Ie,he||De]):be&&he&&ze([be,he])),ze([Ie,De])):be-Ie&&he-De&&ze([Ie||be,De||he]),ce=zt,be=Ie,he=De}else ce&&qe(Pe(ce,zt)[0]),ge[we++]=zt;var We,et,gt,ht}for(s=0;s<ue;s++)if(c=Te(s)){for(we=0,ce=null,it(c),s++;s<ue;s++){if(!(u=Te(s))){if(re)continue;break}if($&&a.simplify){var ft=Te(s+1);if(v=_e(u,c),X&&(0===we||we===ue-1)||!(v<ye(u,ft)*fe)){for(g=[(u[0]-c[0])/v,(u[1]-c[1])/v],y=c,_=v,f=w=E=0,m=!1,h=u,s++;s<n.length;s++){if(d=ft,ft=Te(s+1),!d){if(re)continue;break}if(P=(x=[d[0]-c[0],d[1]-c[1]])[0]*g[1]-x[1]*g[0],w=Math.min(w,P),(E=Math.max(E,P))-w>ye(d,ft))break;h=d,(C=x[0]*g[0]+x[1]*g[1])>_?(_=C,u=d,m=!1):C<f&&(f=C,y=d,m=!0)}if(m?(it(u),h!==y&&it(y)):(y!==c&&it(y),h!==u&&it(u)),it(h),s>=n.length||!d)break;it(d),c=d}}else it(u)}ce&&ze([be||ce[0],he||ce[1]]),oe.push(ge.slice(0,we))}var dt=Q.slice(Q.length-1);if(W&&"h"!==dt&&"v"!==dt){for(var kt=!1,St=-1,Tt=[],lt=0;lt<oe.length;lt++)for(var ot=0;ot<oe[lt].length-1;ot++){var Rt=oe[lt][ot],Vt=oe[lt][ot+1],Ht=S.applyBackoff(Vt,Rt);Ht[0]===Vt[0]&&Ht[1]===Vt[1]||(kt=!0),Tt[St+1]||(Tt[++St]=[Rt,[Ht[0],Ht[1]]])}return kt?Tt:oe}return oe}},11731:function(ie){"use strict";ie.exports=function(F,e,S){"spline"===S("line.shape")&&S("line.smoothing")}},14328:function(ie){"use strict";var F={tonextx:1,tonexty:1,tonext:1};ie.exports=function(e,S,k){var o,T,b,p,l,t={},i=!1,r=-1,n=0,a=-1;for(T=0;T<k.length;T++)(b=(o=k[T][0].trace).stackgroup||"")?b in t?l=t[b]:(l=t[b]=n,n++):o.fill in F&&a>=0?l=a:(l=a=n,n++),l<r&&(i=!0),o._groupIndex=r=l;var s=k.slice();i&&s.sort(function(h,u){var y=h[0].trace,d=u[0].trace;return y._groupIndex-d._groupIndex||y.index-d.index});var c={};for(T=0;T<s.length;T++)b=(o=s[T][0].trace).stackgroup||"",!0===o.visible?(o._nexttrace=null,o.fill in F&&(o._prevtrace=(p=c[b])||null,p&&(p._nexttrace=o)),o._ownfill=o.fill&&("tozero"===o.fill.substr(0,6)||"toself"===o.fill||"to"===o.fill.substr(0,2)&&!o._prevtrace),c[b]=o):o._prevtrace=o._nexttrace=o._ownfill=null;return s}},7152:function(ie,F,e){"use strict";var S=e(38248);ie.exports=function(k,o){o||(o=2);var T=k.marker,b=T.sizeref||1,p=T.sizemin||0,l="area"===T.sizemode?function(t){return Math.sqrt(t/b)}:function(t){return t/b};return function(t){var i=l(t/o);return S(i)&&i>0?Math.max(i,p):0}}},5528:function(ie){"use strict";ie.exports={container:"marker",min:"cmin",max:"cmax"}},74428:function(ie,F,e){"use strict";var S=e(76308),k=e(94288).hasColorscale,o=e(27260),T=e(43028);ie.exports=function(b,p,l,t,i,r){var n=T.isBubble(b),a=(b.line||{}).color;r=r||{},a&&(l=a),i("marker.symbol"),i("marker.opacity",n?.7:1),i("marker.size"),r.noAngle||(i("marker.angle"),r.noAngleRef||i("marker.angleref"),r.noStandOff||i("marker.standoff")),i("marker.color",l),k(b,"marker")&&o(b,p,t,i,{prefix:"marker.",cLetter:"c"}),r.noSelect||(i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size")),r.noLine||(i("marker.line.color",a&&!Array.isArray(a)&&p.marker.color!==a?a:n?S.background:S.defaultLine),k(b,"marker.line")&&o(b,p,t,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width",n?1:0)),n&&(i("marker.sizeref"),i("marker.sizemin"),i("marker.sizemode")),r.gradient&&"none"!==i("marker.gradient.type")&&i("marker.gradient.color")}},31147:function(ie,F,e){"use strict";var S=e(3400).dateTick0,k=e(39032).ONEWEEK;function o(T,b){return S(b,T%k==0?1:0)}ie.exports=function(T,b,p,l,t){if(t||(t={x:!0,y:!0}),t.x){var i=l("xperiod");i&&(l("xperiod0",o(i,b.xcalendar)),l("xperiodalignment"))}if(t.y){var r=l("yperiod");r&&(l("yperiod0",o(r,b.ycalendar)),l("yperiodalignment"))}}},96504:function(ie,F,e){"use strict";var S=e(33428),k=e(24040),o=e(3400),T=o.ensureSingle,b=o.identity,p=e(43616),l=e(43028),t=e(52340),i=e(14328),r=e(92065).tester;function n(a,s,c,h,u,y,d){var m,g=a._context.staticPlot;!function(ze,qe,Ke,it,ft){var dt=Ke.xaxis,kt=Ke.yaxis,St=S.extent(o.simpleMap(dt.range,dt.r2c)),Tt=S.extent(o.simpleMap(kt.range,kt.r2c)),lt=it[0].trace;if(l.hasMarkers(lt)){var ot=lt.marker.maxdisplayed;if(0!==ot){var Rt=it.filter(function(Qe){return Qe.x>=St[0]&&Qe.x<=St[1]&&Qe.y>=Tt[0]&&Qe.y<=Tt[1]}),Vt=Math.ceil(Rt.length/ot),Ht=0;ft.forEach(function(Qe,nt){var We=Qe[0].trace;l.hasMarkers(We)&&We.marker.maxdisplayed>0&&nt<qe&&Ht++});var zt=Math.round(Ht*Vt/3+Math.floor(Ht/3)*Vt/7.1);it.forEach(function(Qe){delete Qe.vis}),Rt.forEach(function(Qe,nt){0===Math.round((nt+zt)%Vt)&&(Qe.vis=!0)})}}}(0,s,c,h,u);var x=!!d&&d.duration>0;function v(ze){return x?ze.transition():ze}var _=c.xaxis,f=c.yaxis,C=h[0].trace,w=C.line,E=S.select(y),P=T(E,"g","errorbars"),L=T(E,"g","lines"),O=T(E,"g","points"),z=T(E,"g","text");if(k.getComponentMethod("errorbars","plot")(a,P,c,d),!0===C.visible){var V,R;v(E).style("opacity",C.opacity);var U,Z,N=C.fill.charAt(C.fill.length-1);"x"!==N&&"y"!==N&&(N=""),"y"===N?(U=1,Z=f.c2p(0,!0)):"x"===N&&(U=0,Z=_.c2p(0,!0)),h[0][c.isRangePlot?"nodeRangePlot3":"node3"]=E;var G,W,ae="",re=[],ne=C._prevtrace,Q=null,$=null;ne&&(ae=ne._prevRevpath||"",R=ne._nextFill,re=ne._ownPolygons,Q=ne._fillsegments,$=ne._fillElement);var X,oe,fe,ue,ge,we,Te="",xe="",ye=[];C._polygons=[];var _e=[],Ie=[],De=o.noop;if(V=C._ownFill,l.hasLines(C)||"none"!==C.fill){R&&R.datum(h),-1!==["hv","vh","hvh","vhv"].indexOf(w.shape)?(X=p.steps(w.shape),oe=p.steps(w.shape.split("").reverse().join(""))):X=oe="spline"===w.shape?function(ze){var qe=ze[ze.length-1];return ze.length>1&&ze[0][0]===qe[0]&&ze[0][1]===qe[1]?p.smoothclosed(ze.slice(1),w.smoothing):p.smoothopen(ze,w.smoothing)}:function(ze){return"M"+ze.join("L")},fe=function(ze){return oe(ze.reverse())},Ie=t(h,{xaxis:_,yaxis:f,trace:C,connectGaps:C.connectgaps,baseTolerance:Math.max(w.width||1,3)/4,shape:w.shape,backoff:w.backoff,simplify:w.simplify,fill:C.fill}),_e=new Array(Ie.length);var be=0;for(m=0;m<Ie.length;m++){var he,ce=Ie[m];he&&N?he.push.apply(he,ce):(he=ce.slice(),_e[be]=he,be++)}C._fillElement=null,C._fillExclusionElement=$,C._fillsegments=_e.slice(0,be),_e=C._fillsegments,Ie.length&&(ue=Ie[0][0].slice(),we=(ge=Ie[Ie.length-1])[ge.length-1].slice()),De=function(ze){return function(qe){if(G=X(qe),W=fe(qe),Te?N?(Te+="L"+G.substr(1),xe=W+"L"+xe.substr(1)):(Te+="Z"+G,xe=W+"Z"+xe):(Te=G,xe=W),l.hasLines(C)){var Ke=S.select(this);if(Ke.datum(h),ze)v(Ke.style("opacity",0).attr("d",G).call(p.lineGroupStyle)).style("opacity",1);else{var it=v(Ke);it.attr("d",G),p.singleLineStyle(h,it)}}}}}var me=L.selectAll(".js-line").data(Ie);v(me.exit()).style("opacity",0).remove(),me.each(De(!1)),me.enter().append("path").classed("js-line",!0).style("vector-effect",g?"none":"non-scaling-stroke").call(p.lineGroupStyle).each(De(!0)),p.setClipUrl(me,c.layerClipId,a);var Pe=function(){var ze=new Array(_e.length);for(m=0;m<_e.length;m++)ze[m]=r(_e[m]);return ze},Ae=function(ze){var qe,Ke;if(ze&&0!==ze.length){for(qe=new Array(ze.length-1+_e.length),Ke=0;Ke<ze.length-1;Ke++)qe[Ke]=r(ze[Ke]);var it=ze[ze.length-1].slice();for(it.reverse(),Ke=0;Ke<_e.length;Ke++)qe[ze.length-1+Ke]=r(_e[Ke].concat(it))}else for(qe=new Array(_e.length),Ke=0;Ke<_e.length;Ke++){var ft=_e[Ke][0].slice(),dt=_e[Ke][_e[Ke].length-1].slice();ft[U]=dt[U]=Z;var kt=[dt,ft].concat(_e[Ke]);qe[Ke]=r(kt)}return qe};Ie.length?(V?(V.datum(h),ue&&we&&(N?(ue[U]=we[U]=Z,v(V).attr("d","M"+we+"L"+ue+"L"+Te.substr(1)).call(p.singleFillStyle,a),ye=Ae(null)):(v(V).attr("d",Te+"Z").call(p.singleFillStyle,a),ye=Pe())),C._polygons=ye,C._fillElement=V):R&&("tonext"===C.fill.substr(0,6)&&Te&&ae?("tonext"===C.fill?(v(R).attr("d",Te+"Z"+ae+"Z").call(p.singleFillStyle,a),ye=Pe(),C._polygons=ye.concat(re)):(v(R).attr("d",Te+"L"+ae.substr(1)+"Z").call(p.singleFillStyle,a),ye=Ae(Q),C._polygons=ye),C._fillElement=R):Oe(R)),C._prevRevpath=xe):(V?Oe(V):R&&Oe(R),C._prevRevpath=null),C._ownPolygons=ye,O.datum(h),z.datum(h),function(ze,qe,Ke){var it,ft=Ke[0].trace,dt=l.hasMarkers(ft),kt=l.hasText(ft),St=function Le(ze){if(ze.ids)return Me}(ft),Tt=Ue,lt=Ue;if(dt||kt){var ot=b,Rt=ft.stackgroup,Vt=Rt&&"infer zero"===a._fullLayout._scatterStackOpts[_._id+f._id][Rt].stackgaps;ft.marker.maxdisplayed||ft._needsCull?ot=Vt?je:Ne:Rt&&!Vt&&(ot=ve),dt&&(Tt=ot),kt&&(lt=ot)}var Ht,zt=(it=ze.selectAll("path.point").data(Tt,St)).enter().append("path").classed("point",!0);x&&zt.call(p.pointStyle,ft,a).call(p.translatePoints,_,f).style("opacity",0).transition().style("opacity",1),it.order(),dt&&(Ht=p.makePointStyleFns(ft)),it.each(function(Qe){var nt=S.select(this),We=v(nt);p.translatePoint(Qe,We,_,f)?(p.singlePointStyle(Qe,We,ft,Ht,a),c.layerClipId&&p.hideOutsideRangePoint(Qe,We,_,f,ft.xcalendar,ft.ycalendar),ft.customdata&&nt.classed("plotly-customdata",null!=Qe.data)):We.remove()}),x?it.exit().transition().style("opacity",0).remove():it.exit().remove(),(it=qe.selectAll("g").data(lt,St)).enter().append("g").classed("textpoint",!0).append("text"),it.order(),it.each(function(Qe){var nt=S.select(this),We=v(nt.select("text"));p.translatePoint(Qe,We,_,f)?c.layerClipId&&p.hideOutsideRangePoint(Qe,nt,_,f,ft.xcalendar,ft.ycalendar):nt.remove()}),it.selectAll("text").call(p.textPointStyle,ft,a).each(function(Qe){var nt=_.c2p(Qe.x),We=f.c2p(Qe.y);S.select(this).selectAll("tspan.line").each(function(){v(S.select(this)).attr({x:nt,y:We})})}),it.exit().remove()}(O,z,h);var Ce=!1===C.cliponaxis?null:c.layerClipId;p.setClipUrl(O,Ce,a),p.setClipUrl(z,Ce,a)}function Oe(ze){v(ze).attr("d","M0,0Z")}function Ne(ze){return ze.filter(function(qe){return!qe.gap&&qe.vis})}function je(ze){return ze.filter(function(qe){return qe.vis})}function ve(ze){return ze.filter(function(qe){return!qe.gap})}function Me(ze){return ze.id}function Ue(){return!1}}ie.exports=function(a,s,c,h,u,y){var d,m,_,C,g=!u,x=!!u&&u.duration>0,v=i(a,s,c);(d=h.selectAll("g.trace").data(v,function(_){return _[0].trace.uid})).enter().append("g").attr("class",function(_){return"trace scatter trace"+_[0].trace.uid}).style("stroke-miterlimit",2),d.order(),_=a,C=s,d.each(function(w){var E=T(S.select(this),"g","fills");p.setClipUrl(E,C.layerClipId,_);var P=w[0].trace,L=[];P._ownfill&&L.push("_ownFill"),P._nexttrace&&L.push("_nextFill");var O=E.selectAll("g").data(L,b);O.enter().append("g"),O.exit().each(function(z){P[z]=null}).remove(),O.order().each(function(z){P[z]=T(S.select(this),"path","js-fill")})}),x?(y&&(m=y()),S.transition().duration(u.duration).ease(u.easing).each("end",function(){m&&m()}).each("interrupt",function(){m&&m()}).each(function(){h.selectAll("g.trace").each(function(_,f){n(a,f,s,_,v,this,u)})})):d.each(function(_,f){n(a,f,s,_,v,this,u)}),g&&d.exit().remove(),h.selectAll("path:not([d])").remove()}},91560:function(ie,F,e){"use strict";var S=e(43028);ie.exports=function(k,o){var T,b,p,l,t=k.cd,i=k.xaxis,r=k.yaxis,n=[],a=t[0].trace;if(!S.hasMarkers(a)&&!S.hasText(a))return[];if(!1===o)for(T=0;T<t.length;T++)t[T].selected=0;else for(T=0;T<t.length;T++)p=i.c2p((b=t[T]).x),l=r.c2p(b.y),null!==b.i&&o.contains([p,l],!1,T,k)?(n.push({pointNumber:b.i,x:i.c2d(b.x),y:r.c2d(b.y)}),b.selected=1):b.selected=0;return n}},43912:function(ie){"use strict";var F=["orientation","groupnorm","stackgaps"];ie.exports=function(e,S,k,o){var T=k._scatterStackOpts,b=o("stackgroup");if(b){var p=S.xaxis+S.yaxis,l=T[p];l||(l=T[p]={});var t=l[b],i=!1;t?t.traces.push(S):(t=l[b]={traceIndices:[],traces:[S]},i=!0);for(var r={orientation:S.x&&!S.y?"h":"v"},n=0;n<F.length;n++){var a=F[n],s=a+"Found";if(!t[s]){var c=void 0!==e[a],h="orientation"===a;if((c||i)&&(t[a]=o(a,r[a]),h&&(t.fillDflt="h"===t[a]?"tonextx":"tonexty"),c&&(t[s]=!0,!i&&(delete t.traces[0][a],h))))for(var u=0;u<t.traces.length-1;u++){var y=t.traces[u];y._input.fill!==y.fill&&(y.fill=t.fillDflt)}}}return t}}},49224:function(ie,F,e){"use strict";var S=e(33428),k=e(43616),o=e(24040);function T(p,l,t){k.pointStyle(p.selectAll("path.point"),l,t)}function b(p,l,t){k.textPointStyle(p.selectAll("text"),l,t)}ie.exports={style:function(p){var l=S.select(p).selectAll("g.trace.scatter");l.style("opacity",function(t){return t[0].trace.opacity}),l.selectAll("g.points").each(function(t){T(S.select(this),t.trace||t[0].trace,p)}),l.selectAll("g.text").each(function(t){b(S.select(this),t.trace||t[0].trace,p)}),l.selectAll("g.trace path.js-line").call(k.lineGroupStyle),l.selectAll("g.trace path.js-fill").call(k.fillGroupStyle,p,!1),o.getComponentMethod("errorbars","style")(l)},stylePoints:T,styleText:b,styleOnSelect:function(p,l,t){var i=l[0].trace;i.selectedpoints?(k.selectedPointStyle(t.selectAll("path.point"),i),k.selectedTextStyle(t.selectAll("text"),i)):(T(t,i,p),b(t,i,p))}}},43028:function(ie,F,e){"use strict";var S=e(3400),k=e(38116).isTypedArraySpec;ie.exports={hasLines:function(o){return o.visible&&o.mode&&-1!==o.mode.indexOf("lines")},hasMarkers:function(o){return o.visible&&(o.mode&&-1!==o.mode.indexOf("markers")||"splom"===o.type)},hasText:function(o){return o.visible&&o.mode&&-1!==o.mode.indexOf("text")},isBubble:function(o){var T=o.marker;return S.isPlainObject(T)&&(S.isArrayOrTypedArray(T.size)||k(T.size))}}},124:function(ie,F,e){"use strict";var S=e(3400);ie.exports=function(k,o,T,b,p){p=p||{},b("textposition"),S.coerceFont(b,"textfont",p.font||T.font,p),p.noSelect||(b("selected.textfont.color"),b("unselected.textfont.color"))}},43980:function(ie,F,e){"use strict";var S=e(3400),k=e(24040);ie.exports=function(o,T,b,p){var l,t=p("x"),i=p("y");if(k.getComponentMethod("calendars","handleTraceDefaults")(o,T,["x","y"],b),t){var r=S.minRowLength(t);i?l=Math.min(r,S.minRowLength(i)):(l=r,p("y0"),p("dy"))}else{if(!i)return 0;l=S.minRowLength(i),p("x0"),p("dx")}return T._length=l,l}},91592:function(ie,F,e){"use strict";var S=e(52904),k=e(25376),o=e(49084),T=e(29736).axisHoverFormat,b=e(21776).Ks,p=e(21776).Gw,l=e(45464),t=e(99168),i=e(87792),r=e(92880).extendFlat,n=e(67824).overrideAll,a=e(95376),c=S.marker,h=c.line,u=r({width:S.line.width,dash:{valType:"enumerated",values:a(t),dflt:"solid"}},o("line")),y=ie.exports=n({x:S.x,y:S.y,z:{valType:"data_array"},text:r({},S.text,{}),texttemplate:p({},{}),hovertext:r({},S.hovertext,{}),hovertemplate:b(),xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z"),mode:r({},S.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:S.connectgaps,line:u,marker:r({symbol:{valType:"enumerated",values:a(i),dflt:"circle",arrayOk:!0},size:r({},c.size,{dflt:8}),sizeref:c.sizeref,sizemin:c.sizemin,sizemode:c.sizemode,opacity:r({},c.opacity,{arrayOk:!1}),colorbar:c.colorbar,line:r({width:r({},h.width,{arrayOk:!1})},o("marker.line"))},o("marker")),textposition:r({},S.textposition,{dflt:"top center"}),textfont:k({noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,editType:"calc",colorEditType:"style",arrayOk:!0,variantValues:["normal","small-caps"]}),opacity:l.opacity,hoverinfo:r({},l.hoverinfo)},"calc","nested");y.x.editType=y.y.editType=y.z.editType="calc+clearAxisTypes"},41484:function(ie,F,e){"use strict";var S=e(20148),k=e(90136);ie.exports=function(o,T){var b=[{x:!1,y:!1,trace:T,t:{}}];return S(b,T),k(o,T),b}},45156:function(ie,F,e){"use strict";var S=e(24040);function k(o,T,b,p){if(!T||!T.visible)return null;for(var l=S.getComponentMethod("errorbars","makeComputeError")(T),t=new Array(o.length),i=0;i<o.length;i++){var r=l(+o[i],i);if("log"===p.type){var n=p.c2l(o[i]),a=o[i]-r[0],s=o[i]+r[1];if(t[i]=[(p.c2l(a,!0)-n)*b,(p.c2l(s,!0)-n)*b],a>0){var c=p.c2l(a);p._lowerLogErrorBound||(p._lowerLogErrorBound=c),p._lowerErrorBound=Math.min(p._lowerLogErrorBound,c)}}else t[i]=[-r[0]*b,r[1]*b]}return t}ie.exports=function(o,T,b){var p=[k(o.x,o.error_x,T[0],b.xaxis),k(o.y,o.error_y,T[1],b.yaxis),k(o.z,o.error_z,T[2],b.zaxis)],l=function(s){for(var c=0;c<s.length;c++)if(s[c])return s[c].length;return 0}(p);if(0===l)return null;for(var t=new Array(l),i=0;i<l;i++){for(var r=[[0,0,0],[0,0,0]],n=0;n<3;n++)if(p[n])for(var a=0;a<2;a++)r[a][n]=p[n][i][a];t[i]=r}return t}},41064:function(ie,F,e){"use strict";var S=e(67792).gl_line3d,k=e(67792).gl_scatter3d,o=e(67792).gl_error3d,T=e(67792).gl_mesh3d,b=e(67792).delaunay_triangulate,p=e(3400),l=e(43080),t=e(33040).formatColor,i=e(7152),r=e(99168),n=e(87792),a=e(54460),s=e(10624).appendArrayPointValue,c=e(45156);function h(f,C){this.scene=f,this.uid=C,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var u=h.prototype;function y(f){return null==f?0:f.indexOf("left")>-1?-1:f.indexOf("right")>-1?1:0}function d(f){return null==f?0:f.indexOf("top")>-1?-1:f.indexOf("bottom")>-1?1:0}function m(f,C){return C(4*f)}function g(f){return n[f]}function x(f,C,w,E,P){var L=null;if(p.isArrayOrTypedArray(f)){L=[];for(var O=0;O<C;O++)L[O]=void 0===f[O]?E:w(f[O],P)}else L=w(f,p.identity);return L}function v(f){if(p.isArrayOrTypedArray(f)){var C=f[0];return p.isArrayOrTypedArray(C)&&(f=C),"rgb("+f.slice(0,3).map(function(w){return Math.round(255*w)})+")"}return null}function _(f){return p.isArrayOrTypedArray(f)?4===f.length&&"number"==typeof f[0]?v(f):f.map(v):null}u.handlePick=function(f){if(f.object&&(f.object===this.linePlot||f.object===this.delaunayMesh||f.object===this.textMarkers||f.object===this.scatterPlot)){var C=f.index=f.data.index;return f.object.highlight&&f.object.highlight(null),this.scatterPlot&&(f.object=this.scatterPlot,this.scatterPlot.highlight(f.data)),f.textLabel="",this.textLabels&&(p.isArrayOrTypedArray(this.textLabels)?(this.textLabels[C]||0===this.textLabels[C])&&(f.textLabel=this.textLabels[C]):f.textLabel=this.textLabels),f.traceCoordinate=[this.data.x[C],this.data.y[C],this.data.z[C]],!0}},u.update=function(f){var C,w,E,P,L=this.scene.glplot.gl,O=r.solid;this.data=f;var z=function(U,Z){var N,G,W,ae,re,ne,Q=[],$=U.fullSceneLayout,X=U.dataScale,oe=$.xaxis,fe=$.yaxis,ue=$.zaxis,ge=Z.marker,we=Z.line,Te=Z.x||[],xe=Z.y||[],ye=Z.z||[],_e=Te.length,Ie=Z.xcalendar,De=Z.ycalendar,be=Z.zcalendar;for(re=0;re<_e;re++)N=oe.d2l(Te[re],0,Ie)*X[0],G=fe.d2l(xe[re],0,De)*X[1],W=ue.d2l(ye[re],0,be)*X[2],Q[re]=[N,G,W];if(Array.isArray(Z.text))ne=Z.text;else if(p.isTypedArray(Z.text))ne=Array.from(Z.text);else if(void 0!==Z.text)for(ne=new Array(_e),re=0;re<_e;re++)ne[re]=Z.text;function he(qe,Ke){var it=$[qe];return a.tickText(it,it.d2l(Ke),!0).text}var ce=Z.texttemplate;if(ce){var me=U.fullLayout._d3locale,Pe=Array.isArray(ce),Ae=Pe?Math.min(ce.length,_e):_e,Ce=Pe?function(qe){return ce[qe]}:function(){return ce};for(ne=new Array(Ae),re=0;re<Ae;re++){var Oe={x:Te[re],y:xe[re],z:ye[re]},Ne={xLabel:he("xaxis",Te[re]),yLabel:he("yaxis",xe[re]),zLabel:he("zaxis",ye[re])},je={};s(je,Z,re);var ve=Z._meta||{};ne[re]=p.texttemplateString(Ce(re),Ne,me,je,Oe,ve)}}if(ae={position:Q,mode:Z.mode,text:ne},"line"in Z&&(ae.lineColor=t(we,1,_e),ae.lineWidth=we.width,ae.lineDashes=we.dash),"marker"in Z){var Me=i(Z);ae.scatterColor=t(ge,1,_e),ae.scatterSize=x(ge.size,_e,m,20,Me),ae.scatterMarker=x(ge.symbol,_e,g,"\u25cf"),ae.scatterLineWidth=ge.line.width,ae.scatterLineColor=t(ge.line,1,_e),ae.scatterAngle=0}"textposition"in Z&&(ae.textOffset=function(qe){var Ke=[0,0];if(Array.isArray(qe))for(var it=0;it<qe.length;it++)Ke[it]=[0,0],qe[it]&&(Ke[it][0]=y(qe[it]),Ke[it][1]=d(qe[it]));else Ke[0]=y(qe),Ke[1]=d(qe);return Ke}(Z.textposition),ae.textColor=t(Z.textfont,1,_e),ae.textSize=x(Z.textfont.size,_e,p.identity,12),ae.textFontFamily=Z.textfont.family,ae.textFontWeight=Z.textfont.weight,ae.textFontStyle=Z.textfont.style,ae.textFontVariant=Z.textfont.variant,ae.textAngle=0);var Le=["x","y","z"];for(ae.project=[!1,!1,!1],ae.projectScale=[1,1,1],ae.projectOpacity=[1,1,1],re=0;re<3;++re){var Ue=Z.projection[Le[re]];(ae.project[re]=Ue.show)&&(ae.projectOpacity[re]=Ue.opacity,ae.projectScale[re]=Ue.scale)}ae.errorBounds=c(Z,X,$);var ze=function(qe){for(var Ke=[0,0,0],it=[[0,0,0],[0,0,0],[0,0,0]],ft=[1,1,1],dt=0;dt<3;dt++){var kt=qe[dt];kt&&!1!==kt.copy_zstyle&&!1!==qe[2].visible&&(kt=qe[2]),kt&&kt.visible&&(Ke[dt]=kt.width/2,it[dt]=l(kt.color),ft[dt]=kt.thickness)}return{capSize:Ke,color:it,lineWidth:ft}}([Z.error_x,Z.error_y,Z.error_z]);return ae.errorColor=ze.color,ae.errorLineWidth=ze.lineWidth,ae.errorCapSize=ze.capSize,ae.delaunayAxis=Z.surfaceaxis,ae.delaunayColor=l(Z.surfacecolor),ae}(this.scene,f);"mode"in z&&(this.mode=z.mode),"lineDashes"in z&&z.lineDashes in r&&(O=r[z.lineDashes]),this.color=_(z.scatterColor)||_(z.lineColor),this.dataPoints=z.position,C={gl:this.scene.glplot.gl,position:z.position,color:z.lineColor,lineWidth:z.lineWidth||1,dashes:O[0],dashScale:O[1],opacity:f.opacity,connectGaps:f.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(C):(this.linePlot=S(C),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var V=f.opacity;if(f.marker&&void 0!==f.marker.opacity&&(V*=f.marker.opacity),w={gl:this.scene.glplot.gl,position:z.position,color:z.scatterColor,size:z.scatterSize,glyph:z.scatterMarker,opacity:V,orthographic:!0,lineWidth:z.scatterLineWidth,lineColor:z.scatterLineColor,project:z.project,projectScale:z.projectScale,projectOpacity:z.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(w):(this.scatterPlot=k(w),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),P={gl:this.scene.glplot.gl,position:z.position,glyph:z.text,color:z.textColor,size:z.textSize,angle:z.textAngle,alignment:z.textOffset,font:z.textFontFamily,fontWeight:z.textFontWeight,fontStyle:z.textFontStyle,fontVariant:z.textFontVariant,orthographic:!0,lineWidth:0,project:!1,opacity:f.opacity},this.textLabels=f.hovertext||f.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(P):(this.textMarkers=k(P),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),E={gl:this.scene.glplot.gl,position:z.position,color:z.errorColor,error:z.errorBounds,lineWidth:z.errorLineWidth,capSize:z.errorCapSize,opacity:f.opacity},this.errorBars?z.errorBounds?this.errorBars.update(E):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):z.errorBounds&&(this.errorBars=o(E),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),z.delaunayAxis>=0){var R=function(U,Z,N){var G,W=(N+1)%3,ae=(N+2)%3,re=[],ne=[];for(G=0;G<U.length;++G){var Q=U[G];!isNaN(Q[W])&&isFinite(Q[W])&&!isNaN(Q[ae])&&isFinite(Q[ae])&&(re.push([Q[W],Q[ae]]),ne.push(G))}var $=b(re);for(G=0;G<$.length;++G)for(var X=$[G],oe=0;oe<X.length;++oe)X[oe]=ne[X[oe]];return{positions:U,cells:$,meshColor:Z}}(z.position,z.delaunayColor,z.delaunayAxis);R.opacity=f.opacity,this.delaunayMesh?this.delaunayMesh.update(R):(R.gl=L,this.delaunayMesh=T(R),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},u.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},ie.exports=function(f,C){var w=new h(f,C.uid);return w.update(C),w}},83484:function(ie,F,e){"use strict";var S=e(24040),k=e(3400),o=e(43028),T=e(74428),b=e(66828),p=e(124),l=e(91592);ie.exports=function(t,i,r,n){function a(g,x){return k.coerce(t,i,l,g,x)}var g,x,v,_,f,C,w,E;if(g=t,x=i,_=n,f=0,C=(v=a)("x"),w=v("y"),E=v("z"),S.getComponentMethod("calendars","handleTraceDefaults")(g,x,["x","y","z"],_),C&&w&&E&&(f=Math.min(C.length,w.length,E.length),x._length=x._xlength=x._ylength=x._zlength=f),f){a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),a("mode"),o.hasMarkers(i)&&T(t,i,r,n,a,{noSelect:!0,noAngle:!0}),o.hasLines(i)&&(a("connectgaps"),b(t,i,r,n,a)),o.hasText(i)&&(a("texttemplate"),p(t,i,n,a,{noSelect:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}));var c=(i.line||{}).color,h=(i.marker||{}).color;a("surfaceaxis")>=0&&a("surfacecolor",c||h);for(var u=["x","y","z"],y=0;y<3;++y){var d="projection."+u[y];a(d+".show")&&(a(d+".opacity"),a(d+".scale"))}var m=S.getComponentMethod("errorbars","supplyDefaults");m(t,i,c||h||r,{axis:"z"}),m(t,i,c||h||r,{axis:"y",inherit:"z"}),m(t,i,c||h||r,{axis:"x",inherit:"z"})}else i.visible=!1}},3296:function(ie,F,e){"use strict";ie.exports={plot:e(41064),attributes:e(91592),markerSymbols:e(87792),supplyDefaults:e(83484),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:e(41484),moduleType:"trace",name:"scatter3d",basePlotModule:e(12536),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},90372:function(ie,F,e){"use strict";var S=e(98304),k=e(52904),o=e(45464),T=e(21776).Ks,b=e(21776).Gw,p=e(49084),l=e(92880).extendFlat,t=k.marker,i=k.line,r=t.line;ie.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:l({},k.mode,{dflt:"markers"}),text:l({},k.text,{}),texttemplate:b({editType:"plot"},{keys:["a","b","text"]}),hovertext:l({},k.hovertext,{}),line:{color:i.color,width:i.width,dash:i.dash,backoff:i.backoff,shape:l({},i.shape,{values:["linear","spline"]}),smoothing:i.smoothing,editType:"calc"},connectgaps:k.connectgaps,fill:l({},k.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:S(),marker:l({symbol:t.symbol,opacity:t.opacity,maxdisplayed:t.maxdisplayed,angle:t.angle,angleref:t.angleref,standoff:t.standoff,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,line:l({width:r.width,editType:"calc"},p("marker.line")),gradient:t.gradient,editType:"calc"},p("marker")),textfont:k.textfont,textposition:k.textposition,selected:k.selected,unselected:k.unselected,hoverinfo:l({},o.hoverinfo,{flags:["a","b","text","name"]}),hoveron:k.hoveron,hovertemplate:T(),zorder:k.zorder}},48228:function(ie,F,e){"use strict";var S=e(38248),k=e(90136),o=e(20148),T=e(4500),b=e(16356).calcMarkerSize,p=e(50948);ie.exports=function(l,t){var i=t._carpetTrace=p(l,t);if(i&&i.visible&&"legendonly"!==i.visible){var r;t.xaxis=i.xaxis,t.yaxis=i.yaxis;var n,a,s=t._length,c=new Array(s),h=!1;for(r=0;r<s;r++)if(a=t.b[r],S(n=t.a[r])&&S(a)){var u=i.ab2xy(+n,+a,!0),y=i.isVisible(+n,+a);y||(h=!0),c[r]={x:u[0],y:u[1],a:n,b:a,vis:y}}else c[r]={x:!1,y:!1};return t._needsCull=h,c[0].carpet=i,c[0].trace=t,b(t,s),k(l,t),o(c,t),T(c,t),c}}},6176:function(ie,F,e){"use strict";var S=e(3400),k=e(88200),o=e(43028),T=e(74428),b=e(66828),p=e(11731),l=e(124),t=e(70840),i=e(90372);ie.exports=function(r,n,a,s){function c(m,g){return S.coerce(r,n,i,m,g)}c("carpet"),n.xaxis="x",n.yaxis="y";var h=c("a"),u=c("b"),y=Math.min(h.length,u.length);if(y){n._length=y,c("text"),c("texttemplate"),c("hovertext"),c("mode",y<k.PTS_LINESONLY?"lines+markers":"lines"),o.hasMarkers(n)&&T(r,n,a,s,c,{gradient:!0}),o.hasLines(n)&&(b(r,n,a,s,c,{backoff:!0}),p(r,n,c),c("connectgaps")),o.hasText(n)&&l(r,n,s,c);var d=[];(o.hasMarkers(n)||o.hasText(n))&&(c("marker.maxdisplayed"),d.push("points")),c("fill"),"none"!==n.fill&&(t(r,n,a,c),o.hasLines(n)||p(r,n,c)),"tonext"!==n.fill&&"toself"!==n.fill||d.push("fills"),"fills"!==c("hoveron",d.join("+")||"points")&&c("hovertemplate"),c("zorder"),S.coerceSelectionMarkerOpacity(n,c)}else n.visible=!1}},89307:function(ie){"use strict";ie.exports=function(F,e,S,k,o){var T=k[o];return F.a=T.a,F.b=T.b,F.y=T.y,F}},52364:function(ie){"use strict";ie.exports=function(F,e){var S={},k=e._carpet,o=k.ab2ij([F.a,F.b]),T=Math.floor(o[0]),b=o[0]-T,p=Math.floor(o[1]),t=k.evalxy([],T,p,b,o[1]-p);return S.yLabel=t[1].toFixed(3),S}},58960:function(ie,F,e){"use strict";var S=e(98723),k=e(3400).fillText;ie.exports=function(o,T,b,p){var l=S(o,T,b,p);if(l&&!1!==l[0].index){var t=l[0];if(void 0===t.index){var r=o.xa._length,n=r*(1-t.y0/o.ya._length)/2,a=r-n;return t.x0=Math.max(Math.min(t.x0,a),n),t.x1=Math.max(Math.min(t.x1,a),n),l}var s=t.cd[t.index];t.a=s.a,t.b=s.b,t.xLabelVal=void 0,t.yLabelVal=void 0;var c=t.trace,h=c._carpet,u=c._module.formatLabels(s,c);t.yLabel=u.yLabel,delete t.text;var y=[];if(!c.hovertemplate){var d=(s.hi||c.hoverinfo).split("+");-1!==d.indexOf("all")&&(d=["a","b","text"]),-1!==d.indexOf("a")&&m(h.aaxis,s.a),-1!==d.indexOf("b")&&m(h.baxis,s.b),y.push("y: "+t.yLabel),-1!==d.indexOf("text")&&k(s,c,y),t.extraText=y.join("<br>")}return l}function m(g,x){var v;v=g.labelprefix&&g.labelprefix.length>0?g.labelprefix.replace(/ = $/,""):g._hovertitle,y.push(v+": "+x.toFixed(3)+g.labelsuffix)}}},4184:function(ie,F,e){"use strict";ie.exports={attributes:e(90372),supplyDefaults:e(6176),colorbar:e(5528),formatLabels:e(52364),calc:e(48228),plot:e(20036),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(58960),selectPoints:e(91560),eventData:e(89307),moduleType:"trace",name:"scattercarpet",basePlotModule:e(57952),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},20036:function(ie,F,e){"use strict";var S=e(96504),k=e(54460),o=e(43616);ie.exports=function(T,b,p,l){var t,i,r,n=p[0][0].carpet,a=k.getFromId(T,n.xaxis||"x"),s=k.getFromId(T,n.yaxis||"y"),c={xaxis:a,yaxis:s,plot:b.plot};for(t=0;t<p.length;t++)(i=p[t][0].trace)._xA=a,i._yA=s;for(S(T,c,p,l),t=0;t<p.length;t++)r=l.selectAll("g.trace"+(i=p[t][0].trace).uid+" .js-line"),o.setClipUrl(r,p[t][0].carpet._clipPathId,T)}},6096:function(ie,F,e){"use strict";var S=e(21776).Ks,k=e(21776).Gw,o=e(98304),T=e(52904),b=e(45464),p=e(49084),l=e(98192).u,t=e(92880).extendFlat,i=e(67824).overrideAll,r=T.marker,n=T.line,a=r.line;ie.exports=i({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:t({},T.mode,{dflt:"markers"}),text:t({},T.text,{}),texttemplate:k({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:t({},T.hovertext,{}),textfont:T.textfont,textposition:T.textposition,line:{color:n.color,width:n.width,dash:l},connectgaps:T.connectgaps,marker:t({symbol:r.symbol,opacity:r.opacity,angle:r.angle,angleref:t({},r.angleref,{values:["previous","up","north"]}),standoff:r.standoff,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,colorbar:r.colorbar,line:t({width:a.width},p("marker.line")),gradient:r.gradient},p("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:o(),selected:T.selected,unselected:T.unselected,hoverinfo:t({},b.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:S()},"calc","nested")},25212:function(ie,F,e){"use strict";var S=e(38248),k=e(39032).BADNUM,o=e(90136),T=e(20148),b=e(4500),p=e(3400).isArrayOrTypedArray,l=e(3400)._;function t(i){return i&&"string"==typeof i}ie.exports=function(i,r){var n,a=p(r.locations),s=a?r.locations.length:r._length,c=new Array(s);n=r.geojson?function(g){return t(g)||S(g)}:t;for(var h=0;h<s;h++){var u=c[h]={};if(a){var y=r.locations[h];u.loc=n(y)?y:null}else{var d=r.lon[h],m=r.lat[h];u.lonlat=S(d)&&S(m)?[+d,+m]:[k,k]}}return T(c,r),o(i,r),b(c,r),s&&(c[0].t={labels:{lat:l(i,"lat:")+" ",lon:l(i,"lon:")+" "}}),c}},86188:function(ie,F,e){"use strict";var S=e(3400),k=e(43028),o=e(74428),T=e(66828),b=e(124),p=e(70840),l=e(6096);ie.exports=function(t,i,r,n){function a(m,g){return S.coerce(t,i,l,m,g)}var s,c=a("locations");if(c&&c.length){var h,u=a("geojson");("string"==typeof u&&""!==u||S.isPlainObject(u))&&(h="geojson-id"),"geojson-id"===a("locationmode",h)&&a("featureidkey"),s=c.length}else{var y=a("lon")||[],d=a("lat")||[];s=Math.min(y.length,d.length)}s?(i._length=s,a("text"),a("hovertext"),a("hovertemplate"),a("mode"),k.hasMarkers(i)&&o(t,i,r,n,a,{gradient:!0}),k.hasLines(i)&&(T(t,i,r,n,a),a("connectgaps")),k.hasText(i)&&(a("texttemplate"),b(t,i,n,a)),a("fill"),"none"!==i.fill&&p(t,i,r,a),S.coerceSelectionMarkerOpacity(i,a)):i.visible=!1}},58544:function(ie){"use strict";ie.exports=function(F,e,S,k,o){F.lon=e.lon,F.lat=e.lat,F.location=e.loc?e.loc:null;var T=k[o];return T.fIn&&T.fIn.properties&&(F.properties=T.fIn.properties),F}},56696:function(ie,F,e){"use strict";var S=e(54460);ie.exports=function(k,o,T){var b={},p=T[o.geo]._subplot.mockAxis,l=k.lonlat;return b.lonLabel=S.tickText(p,p.c2l(l[0]),!0).text,b.latLabel=S.tickText(p,p.c2l(l[1]),!0).text,b}},64292:function(ie,F,e){"use strict";var S=e(93024),k=e(39032).BADNUM,o=e(44928),T=e(3400).fillText,b=e(6096);ie.exports=function(p,l,t){var i=p.cd,r=i[0].trace,n=p.xa,a=p.ya,s=p.subplot,c=s.projection.isLonLatOverEdges,h=s.project;if(S.getClosest(i,function(v){var _=v.lonlat;if(_[0]===k||c(_))return 1/0;var f=h(_),C=h([l,t]),w=Math.abs(f[0]-C[0]),E=Math.abs(f[1]-C[1]),P=Math.max(3,v.mrc||0);return Math.max(Math.sqrt(w*w+E*E)-P,1-3/P)},p),!1!==p.index){var u=i[p.index],y=u.lonlat,d=[n.c2p(y),a.c2p(y)],m=u.mrc||1;p.x0=d[0]-m,p.x1=d[0]+m,p.y0=d[1]-m,p.y1=d[1]+m,p.loc=u.loc,p.lon=y[0],p.lat=y[1];var g={};g[r.geo]={_subplot:s};var x=r._module.formatLabels(u,r,g);return p.lonLabel=x.lonLabel,p.latLabel=x.latLabel,p.color=o(r,u),p.extraText=function(v,_,f,C){if(!v.hovertemplate){var w=_.hi||v.hoverinfo,E="all"===w?b.hoverinfo.flags:w.split("+"),P=-1!==E.indexOf("location")&&Array.isArray(v.locations),L=-1!==E.indexOf("lon"),O=-1!==E.indexOf("lat"),z=-1!==E.indexOf("text"),V=[];return P?V.push(_.loc):L&&O?V.push("("+R(f.latLabel)+", "+R(f.lonLabel)+")"):L?V.push(C.lon+R(f.lonLabel)):O&&V.push(C.lat+R(f.latLabel)),z&&T(_,v,V),V.join("<br>")}function R(U){return U+"\xb0"}}(r,u,p,i[0].t.labels),p.hovertemplate=r.hovertemplate,[p]}}},36952:function(ie,F,e){"use strict";ie.exports={attributes:e(6096),supplyDefaults:e(86188),colorbar:e(5528),formatLabels:e(56696),calc:e(25212),calcGeoJSON:e(48691).calcGeoJSON,plot:e(48691).plot,style:e(25064),styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(64292),eventData:e(58544),selectPoints:e(8796),moduleType:"trace",name:"scattergeo",basePlotModule:e(10816),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},48691:function(ie,F,e){"use strict";var S=e(33428),k=e(3400),o=e(59972).getTopojsonFeatures,T=e(44808),b=e(27144),p=e(19280).findExtremes,l=e(39032).BADNUM,t=e(16356).calcMarkerSize,i=e(43028),r=e(25064);ie.exports={calcGeoJSON:function(n,a){var s,c,h=n[0].trace,u=a[h.geo],y=u._subplot,d=h._length;if(k.isArrayOrTypedArray(h.locations)){var m=h.locationmode,g="geojson-id"===m?b.extractTraceFeature(n):o(h,y.topojson);for(s=0;s<d;s++){c=n[s];var x="geojson-id"===m?c.fOut:b.locationToFeature(m,c.loc,g);c.lonlat=x?x.properties.ct:[l,l]}}var v,_,f={padded:!0};if("geojson"===u.fitbounds&&"geojson-id"===h.locationmode){var C=b.computeBbox(b.getTraceGeojson(h));v=[C[0],C[2]],_=[C[1],C[3]]}else{for(v=new Array(d),_=new Array(d),s=0;s<d;s++)v[s]=(c=n[s]).lonlat[0],_[s]=c.lonlat[1];f.ppad=t(h,d)}h._extremes.lon=p(u.lonaxis._ax,v,f),h._extremes.lat=p(u.lataxis._ax,_,f)},plot:function(n,a,s){var c=a.layers.frontplot.select(".scatterlayer"),h=k.makeTraceGroups(c,s,"trace scattergeo");function u(y,d){y.lonlat[0]===l&&S.select(d).remove()}h.selectAll("*").remove(),h.each(function(y){var d=S.select(this),m=y[0].trace;if(i.hasLines(m)||"none"!==m.fill){var g=T.calcTraceToLineCoords(y),x="none"!==m.fill?T.makePolygon(g):T.makeLine(g);d.selectAll("path.js-line").data([{geojson:x,trace:m}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}i.hasMarkers(m)&&d.selectAll("path.point").data(k.identity).enter().append("path").classed("point",!0).each(function(v){u(v,this)}),i.hasText(m)&&d.selectAll("g").data(k.identity).enter().append("g").append("text").each(function(v){u(v,this)}),r(n,y)})}}},8796:function(ie,F,e){"use strict";var S=e(43028),k=e(39032).BADNUM;ie.exports=function(o,T){var b,p,l,t,i,r=o.cd,n=o.xaxis,a=o.yaxis,s=[],c=r[0].trace;if(!S.hasMarkers(c)&&!S.hasText(c))return[];if(!1===T)for(i=0;i<r.length;i++)r[i].selected=0;else for(i=0;i<r.length;i++)(p=(b=r[i]).lonlat)[0]!==k&&(l=n.c2p(p),t=a.c2p(p),T.contains([l,t],null,i,o)?(s.push({pointNumber:i,lon:p[0],lat:p[1]}),b.selected=1):b.selected=0);return s}},25064:function(ie,F,e){"use strict";var S=e(33428),k=e(43616),o=e(76308),T=e(49224),b=T.stylePoints,p=T.styleText;ie.exports=function(l,t){var i,r,n,a;t&&(i=l,n=(r=t)[0].trace,(a=r[0].node3).style("opacity",r[0].trace.opacity),b(a,n,i),p(a,n,i),a.selectAll("path.js-line").style("fill","none").each(function(s){var c=S.select(this),h=s.trace,u=h.line||{};c.call(o.stroke,u.color).call(k.dashLine,u.dash||"",u.width||0),"none"!==h.fill&&c.call(o.fill,h.fillcolor)}))}},2876:function(ie,F,e){"use strict";var S=e(45464),k=e(25376),o=e(98304),T=e(52904),b=e(29736).axisHoverFormat,p=e(49084),l=e(95376),t=e(92880).extendFlat,i=e(67824).overrideAll,r=e(67072).DASHES,n=T.line,a=T.marker,s=a.line,c=ie.exports=i({x:T.x,x0:T.x0,dx:T.dx,y:T.y,y0:T.y0,dy:T.dy,xperiod:T.xperiod,yperiod:T.yperiod,xperiod0:T.xperiod0,yperiod0:T.yperiod0,xperiodalignment:T.xperiodalignment,yperiodalignment:T.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),text:T.text,hovertext:T.hovertext,textposition:T.textposition,textfont:k({noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,editType:"calc",colorEditType:"style",arrayOk:!0,noNumericWeightValues:!0,variantValues:["normal","small-caps"]}),mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:n.color,width:n.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:l(r),dflt:"solid"}},marker:t({},p("marker"),{symbol:a.symbol,angle:a.angle,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,opacity:a.opacity,colorbar:a.colorbar,line:t({},p("marker.line"),{width:s.width})}),connectgaps:T.connectgaps,fill:t({},T.fill,{dflt:"none"}),fillcolor:o(),selected:{marker:T.selected.marker,textfont:T.selected.textfont},unselected:{marker:T.unselected.marker,textfont:T.unselected.textfont},opacity:S.opacity},"calc","nested");c.x.editType=c.y.editType=c.x0.editType=c.y0.editType="calc+clearAxisTypes",c.hovertemplate=T.hovertemplate,c.texttemplate=T.texttemplate},64628:function(ie,F,e){"use strict";var S=e(41272);ie.exports={moduleType:"trace",name:"scattergl",basePlotModule:e(57952),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:e(2876),supplyDefaults:e(80220),crossTraceDefaults:e(35036),colorbar:e(5528),formatLabels:e(99396),calc:e(24856),hoverPoints:S.hoverPoints,selectPoints:e(73224),meta:{}}},24856:function(ie,F,e){"use strict";var S=e(3108),k=e(3400),o=e(79811),T=e(19280).findExtremes,b=e(1220),p=e(16356),l=p.calcMarkerSize,t=p.calcAxisExpansion,i=p.setFirstScatter,r=e(90136),n=e(84236),a=e(74588),s=e(39032).BADNUM,c=e(67072).TOO_MANY_POINTS;function h(u,y,d){var m=u._extremes[y._id],g=T(y,d._bnds,{padded:!0});m.min=m.min.concat(g.min),m.max=m.max.concat(g.max)}ie.exports=function(u,y){var d,m=u._fullLayout,g=y._xA=o.getFromId(u,y.xaxis,"x"),x=y._yA=o.getFromId(u,y.yaxis,"y"),v=m._plots[y.xaxis+y.yaxis],_=y._length,f=_>=c,C=2*_,w={},E=g.makeCalcdata(y,"x"),P=x.makeCalcdata(y,"y"),L=b(y,g,"x",E),O=b(y,x,"y",P),z=L.vals,V=O.vals;y._x=z,y._y=V,y.xperiodalignment&&(y._origX=E,y._xStarts=L.starts,y._xEnds=L.ends),y.yperiodalignment&&(y._origY=P,y._yStarts=O.starts,y._yEnds=O.ends);var R=new Array(C),U=new Array(_);for(d=0;d<_;d++)R[2*d]=z[d]===s?NaN:z[d],R[2*d+1]=V[d]===s?NaN:V[d],U[d]=d;if("log"===g.type)for(d=0;d<C;d+=2)R[d]=g.c2l(R[d]);if("log"===x.type)for(d=1;d<C;d+=2)R[d]=x.c2l(R[d]);f&&"log"!==g.type&&"log"!==x.type?w.tree=S(R):w.ids=U,r(u,y);var Z,N=function(W,ae,re,ne,Q,$){var X=n.style(W,re);if(X.marker&&(X.marker.positions=ne),X.line&&ne.length>1&&k.extendFlat(X.line,n.linePositions(W,re,ne)),X.errorX||X.errorY){var oe=n.errorBarPositions(W,re,ne,Q,$);X.errorX&&k.extendFlat(X.errorX,oe.x),X.errorY&&k.extendFlat(X.errorY,oe.y)}return X.text&&(k.extendFlat(X.text,{positions:ne},n.textPosition(W,re,X.text,X.marker)),k.extendFlat(X.textSel,{positions:ne},n.textPosition(W,re,X.text,X.markerSel)),k.extendFlat(X.textUnsel,{positions:ne},n.textPosition(W,re,X.text,X.markerUnsel))),X}(u,0,y,R,z,V),G=a(u,v);return i(m,y),f?N.marker&&(Z=N.marker.sizeAvg||Math.max(N.marker.size,3)):Z=l(y,_),t(u,y,g,x,z,V,Z),N.errorX&&h(y,g,N.errorX),N.errorY&&h(y,x,N.errorY),N.fill&&!G.fill2d&&(G.fill2d=!0),N.marker&&!G.scatter2d&&(G.scatter2d=!0),N.line&&!G.line2d&&(G.line2d=!0),!N.errorX&&!N.errorY||G.error2d||(G.error2d=!0),N.text&&!G.glText&&(G.glText=!0),N.marker&&(N.marker.snap=_),G.lineOptions.push(N.line),G.errorXOptions.push(N.errorX),G.errorYOptions.push(N.errorY),G.fillOptions.push(N.fill),G.markerOptions.push(N.marker),G.markerSelectedOptions.push(N.markerSel),G.markerUnselectedOptions.push(N.markerUnsel),G.textOptions.push(N.text),G.textSelectedOptions.push(N.textSel),G.textUnselectedOptions.push(N.textUnsel),G.selectBatch.push([]),G.unselectBatch.push([]),w._scene=G,w.index=G.count,w.x=z,w.y=V,w.positions=R,G.count++,[{x:!1,y:!1,t:w,trace:y}]}},67072:function(ie){"use strict";ie.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},84236:function(ie,F,e){"use strict";var S=e(38248),k=e(20472),o=e(72160),T=e(24040),b=e(3400),p=b.isArrayOrTypedArray,l=e(43616),t=e(79811),i=e(33040).formatColor,r=e(43028),n=e(7152),a=e(80088),s=e(67072),c=e(13448).DESELECTDIM,h={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},u=e(10624).appendArrayPointValue;function y(L,O){var z,V=L._fullLayout,R=O._length,U=O.textfont,Z=O.textposition,N=p(Z)?Z:[Z],G=U.color,W=U.size,ae=U.family,re=U.weight,ne=U.style,Q=U.variant,$={},X=L._context.plotGlPixelRatio,oe=O.texttemplate;if(oe){$.text=[];var fe=V._d3locale,ue=Array.isArray(oe),ge=ue?Math.min(oe.length,R):R,we=ue?function(be){return oe[be]}:function(){return oe};for(z=0;z<ge;z++){var Te={i:z},xe=O._module.formatLabels(Te,O,V),ye={};u(ye,O,z);var _e=O._meta||{};$.text.push(b.texttemplateString(we(z),xe,fe,ye,Te,_e))}}else $.text=p(O.text)&&O.text.length<R?O.text.slice():O.text;if(p($.text))for(z=$.text.length;z<R;z++)$.text[z]="";for($.opacity=O.opacity,$.font={},$.align=[],$.baseline=[],z=0;z<N.length;z++){var Ie=N[z].split(/\s+/);switch(Ie[1]){case"left":$.align.push("right");break;case"right":$.align.push("left");break;default:$.align.push(Ie[1])}switch(Ie[0]){case"top":$.baseline.push("bottom");break;case"bottom":$.baseline.push("top");break;default:$.baseline.push(Ie[0])}}if(p(G))for($.color=new Array(R),z=0;z<R;z++)$.color[z]=G[z];else $.color=G;if(p(W)||Array.isArray(ae)||p(re)||Array.isArray(ne)||Array.isArray(Q))for($.font=new Array(R),z=0;z<R;z++){var De=$.font[z]={};De.size=(b.isTypedArray(W)?W[z]:p(W)?S(W[z])?W[z]:0:W)*X,De.family=Array.isArray(ae)?ae[z]:ae,De.weight=d(p(re)?re[z]:re),De.style=Array.isArray(ne)?ne[z]:ne,De.variant=Array.isArray(Q)?Q[z]:Q}else $.font={size:W*X,family:ae,weight:d(re),style:ne,variant:Q};return $}function d(L){return L<=1e3?L>500?"bold":"normal":L}function m(L,O){var z,V,R=O._length,U=O.marker,Z={},N=p(U.symbol),G=p(U.angle),W=p(U.color),ae=p(U.line.color),re=p(U.opacity),ne=p(U.size),Q=p(U.line.width);if(N||(V=a.isOpenSymbol(U.symbol)),N||W||ae||re||G){Z.symbols=new Array(R),Z.angles=new Array(R),Z.colors=new Array(R),Z.borderColors=new Array(R);var $=U.symbol,X=U.angle,oe=i(U,U.opacity,R),fe=i(U.line,U.opacity,R);if(!p(fe[0])){var ue=fe;for(fe=Array(R),z=0;z<R;z++)fe[z]=ue}if(!p(oe[0])){var ge=oe;for(oe=Array(R),z=0;z<R;z++)oe[z]=ge}if(!p($)){var we=$;for($=Array(R),z=0;z<R;z++)$[z]=we}if(!p(X)){var Te=X;for(X=Array(R),z=0;z<R;z++)X[z]=Te}for(Z.symbols=$,Z.angles=X,Z.colors=oe,Z.borderColors=fe,z=0;z<R;z++)N&&(V=a.isOpenSymbol(U.symbol[z])),V&&(fe[z]=oe[z].slice(),oe[z]=oe[z].slice(),oe[z][3]=0);for(Z.opacity=O.opacity,Z.markers=new Array(R),z=0;z<R;z++)Z.markers[z]=P({mx:Z.symbols[z],ma:Z.angles[z]},O)}else V?(Z.color=o(U.color,"uint8"),Z.color[3]=0,Z.borderColor=o(U.color,"uint8")):(Z.color=o(U.color,"uint8"),Z.borderColor=o(U.line.color,"uint8")),Z.opacity=O.opacity*U.opacity,Z.marker=P({mx:U.symbol,ma:U.angle},O);var xe,ye=n(O,1);if(ne||Q){var _e,Ie=Z.sizes=new Array(R),De=Z.borderSizes=new Array(R),be=0;if(ne){for(z=0;z<R;z++)Ie[z]=ye(U.size[z]),be+=Ie[z];_e=be/R}else for(xe=ye(U.size),z=0;z<R;z++)Ie[z]=xe;if(Q)for(z=0;z<R;z++)De[z]=U.line.width[z];else for(xe=U.line.width,z=0;z<R;z++)De[z]=xe;Z.sizeAvg=_e}else Z.size=ye(U&&U.size||10),Z.borderSizes=ye(U.line.width);return Z}function g(L,O,z){var R={};return z&&(z.marker&&z.marker.symbol?R=m(0,b.extendFlat({},O.marker,z.marker)):z.marker&&(z.marker.size&&(R.size=z.marker.size),z.marker.color&&(R.colors=z.marker.color),void 0!==z.marker.opacity&&(R.opacity=z.marker.opacity))),R}function x(L,O,z){var V={};if(!z)return V;if(z.textfont){var R={opacity:1,text:O.text,texttemplate:O.texttemplate,textposition:O.textposition,textfont:b.extendFlat({},O.textfont)};z.textfont&&b.extendFlat(R.textfont,z.textfont),V=y(L,R)}return V}function v(L,O,z){var V={capSize:2*O.width*z,lineWidth:O.thickness*z,color:O.color};return O.copy_ystyle&&(V=L.error_y),V}var _=s.SYMBOL_SDF_SIZE,f=s.SYMBOL_SIZE,C=s.SYMBOL_STROKE,w={},E=l.symbolFuncs[0](.05*f);function P(L,O){var z,V,R=L.mx;if("circle"===R)return null;var U=l.symbolNumber(R),Z=l.symbolFuncs[U%100],N=!!l.symbolNoDot[U%100],G=!!l.symbolNoFill[U%100],W=a.isDotSymbol(R);if(L.ma&&(R+="_"+L.ma),w[R])return w[R];var ae=l.getMarkerAngle(L,O);return z=W&&!N?Z(1.1*f,ae)+E:Z(f,ae),V=k(z,{w:_,h:_,viewBox:[-f,-f,f,f],stroke:G?C:-C}),w[R]=V,V||null}ie.exports={style:function(L,O){var z,V={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},R=L._context.plotGlPixelRatio;if(!0!==O.visible)return V;if(r.hasText(O)&&(V.text=y(L,O),V.textSel=x(L,O,O.selected),V.textUnsel=x(L,O,O.unselected)),r.hasMarkers(O)&&(V.marker=m(0,O),V.markerSel=g(0,O,O.selected),V.markerUnsel=g(0,O,O.unselected),!O.unselected&&p(O.marker.opacity))){var U=O.marker.opacity;for(V.markerUnsel.opacity=new Array(U.length),z=0;z<U.length;z++)V.markerUnsel.opacity[z]=c*U[z]}if(r.hasLines(O)){V.line={overlay:!0,thickness:O.line.width*R,color:O.line.color,opacity:O.opacity};var Z=(s.DASHES[O.line.dash]||[1]).slice();for(z=0;z<Z.length;++z)Z[z]*=O.line.width*R;V.line.dashes=Z}return O.error_x&&O.error_x.visible&&(V.errorX=v(O,O.error_x,R)),O.error_y&&O.error_y.visible&&(V.errorY=v(O,O.error_y,R)),O.fill&&"none"!==O.fill&&(V.fill={closed:!0,fill:O.fillcolor,thickness:0}),V},markerStyle:m,markerSelection:g,linePositions:function(L,O,z){var V,R,U=z.length,Z=U/2;if(r.hasLines(O)&&Z)if("hv"===O.line.shape){for(V=[],R=0;R<Z-1;R++)isNaN(z[2*R])||isNaN(z[2*R+1])?V.push(NaN,NaN,NaN,NaN):(V.push(z[2*R],z[2*R+1]),isNaN(z[2*R+2])||isNaN(z[2*R+3])?V.push(NaN,NaN):V.push(z[2*R+2],z[2*R+1]));V.push(z[U-2],z[U-1])}else if("hvh"===O.line.shape){for(V=[],R=0;R<Z-1;R++)if(isNaN(z[2*R])||isNaN(z[2*R+1])||isNaN(z[2*R+2])||isNaN(z[2*R+3]))isNaN(z[2*R])||isNaN(z[2*R+1])?V.push(NaN,NaN):V.push(z[2*R],z[2*R+1]),V.push(NaN,NaN);else{var N=(z[2*R]+z[2*R+2])/2;V.push(z[2*R],z[2*R+1],N,z[2*R+1],N,z[2*R+3])}V.push(z[U-2],z[U-1])}else if("vhv"===O.line.shape){for(V=[],R=0;R<Z-1;R++)if(isNaN(z[2*R])||isNaN(z[2*R+1])||isNaN(z[2*R+2])||isNaN(z[2*R+3]))isNaN(z[2*R])||isNaN(z[2*R+1])?V.push(NaN,NaN):V.push(z[2*R],z[2*R+1]),V.push(NaN,NaN);else{var G=(z[2*R+1]+z[2*R+3])/2;V.push(z[2*R],z[2*R+1],z[2*R],G,z[2*R+2],G)}V.push(z[U-2],z[U-1])}else if("vh"===O.line.shape){for(V=[],R=0;R<Z-1;R++)isNaN(z[2*R])||isNaN(z[2*R+1])?V.push(NaN,NaN,NaN,NaN):(V.push(z[2*R],z[2*R+1]),isNaN(z[2*R+2])||isNaN(z[2*R+3])?V.push(NaN,NaN):V.push(z[2*R],z[2*R+3]));V.push(z[U-2],z[U-1])}else V=z;var W=!1;for(R=0;R<V.length;R++)if(isNaN(V[R])){W=!0;break}var ae=W||V.length>s.TOO_MANY_POINTS||r.hasMarkers(O)?"rect":"round";if(W&&O.connectgaps){var re=V[0],ne=V[1];for(R=0;R<V.length;R+=2)isNaN(V[R])||isNaN(V[R+1])?(V[R]=re,V[R+1]=ne):(re=V[R],ne=V[R+1])}return{join:ae,positions:V}},errorBarPositions:function(L,O,z,V,R){var U=T.getComponentMethod("errorbars","makeComputeError"),Z=t.getFromId(L,O.xaxis,"x"),N=t.getFromId(L,O.yaxis,"y"),G=z.length/2,W={};function ae(re,ne){var Q=ne._id.charAt(0),$=O["error_"+Q];if($&&$.visible&&("linear"===ne.type||"log"===ne.type)){for(var X=U($),oe={x:0,y:1}[Q],fe={x:[0,1,2,3],y:[2,3,0,1]}[Q],ue=new Float64Array(4*G),ge=1/0,we=-1/0,Te=0,xe=0;Te<G;Te++,xe+=4){var ye=re[Te];if(S(ye)){var _e=z[2*Te+oe],Ie=X(ye,Te),De=Ie[0],be=Ie[1];if(S(De)&&S(be)){var ce=ye+be;ue[xe+fe[0]]=_e-ne.c2l(ye-De),ue[xe+fe[1]]=ne.c2l(ce)-_e,ue[xe+fe[2]]=0,ue[xe+fe[3]]=0,ge=Math.min(ge,ye-De),we=Math.max(we,ye+be)}}}W[Q]={positions:z,errors:ue,_bnds:[ge,we]}}}return ae(V,Z),ae(R,N),W},textPosition:function(L,O,z,V){var R,U=O._length,Z={};if(r.hasMarkers(O)){var N=z.font,G=z.align,W=z.baseline;for(Z.offset=new Array(U),R=0;R<U;R++){var ae=V.sizes?V.sizes[R]:V.size,re=p(N)?N[R].size:N.size,ne=p(G)?G.length>1?G[R]:G[0]:G,Q=p(W)?W.length>1?W[R]:W[0]:W,X=h[Q],oe=ae?ae/.8+1:0;Z.offset[R]=[h[ne]*oe/re,(-X*oe-.5*X)/re]}}return Z}}},80220:function(ie,F,e){"use strict";var S=e(3400),k=e(24040),o=e(80088),T=e(2876),b=e(88200),p=e(43028),l=e(43980),t=e(31147),i=e(74428),r=e(66828),n=e(70840),a=e(124);ie.exports=function(s,c,h,u){function y(C,w){return S.coerce(s,c,T,C,w)}var d=!!s.marker&&o.isOpenSymbol(s.marker.symbol),m=p.isBubble(s),g=l(s,c,u,y);if(g){t(s,c,u,y),y("xhoverformat"),y("yhoverformat");var x=g<b.PTS_LINESONLY?"lines+markers":"lines";y("text"),y("hovertext"),y("hovertemplate"),y("mode",x),p.hasMarkers(c)&&(i(s,c,h,u,y,{noAngleRef:!0,noStandOff:!0}),y("marker.line.width",d||m?1:0)),p.hasLines(c)&&(y("connectgaps"),r(s,c,h,u,y),y("line.shape")),p.hasText(c)&&(y("texttemplate"),a(s,c,u,y,{noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}));var v=(c.line||{}).color,_=(c.marker||{}).color;y("fill"),"none"!==c.fill&&n(s,c,h,y);var f=k.getComponentMethod("errorbars","supplyDefaults");f(s,c,v||_||h,{axis:"y"}),f(s,c,v||_||h,{axis:"x",inherit:"y"}),S.coerceSelectionMarkerOpacity(c,y)}else c.visible=!1}},26768:function(ie,F,e){"use strict";var S=e(3400),k=e(76308),o=e(13448).DESELECTDIM;ie.exports={styleTextSelection:function(T){var b,p,l=T[0],t=l.trace,i=l.t,r=i._scene,n=i.index,a=r.selectBatch[n],s=r.unselectBatch[n],c=r.textOptions[n],h=r.textSelectedOptions[n]||{},u=r.textUnselectedOptions[n]||{},y=S.extendFlat({},c);if(a.length||s.length){var d=h.color,m=u.color,g=c.color,x=S.isArrayOrTypedArray(g);for(y.color=new Array(t._length),b=0;b<a.length;b++)y.color[p=a[b]]=d||(x?g[p]:g);for(b=0;b<s.length;b++){p=s[b];var v=x?g[p]:g;y.color[p]=m||(d?v:k.addOpacity(v,o))}}r.glText[n].update(y)}}},99396:function(ie,F,e){"use strict";var S=e(76688);ie.exports=function(k,o,T){var b=k.i;return"x"in k||(k.x=o._x[b]),"y"in k||(k.y=o._y[b]),S(k,o,T)}},80088:function(ie,F,e){"use strict";var S=e(67072);F.isOpenSymbol=function(k){return"string"==typeof k?S.OPEN_RE.test(k):k%200>100},F.isDotSymbol=function(k){return"string"==typeof k?S.DOT_RE.test(k):k>200}},41272:function(ie,F,e){"use strict";var S=e(24040),k=e(3400),o=e(44928);function T(b,p,l,t){var i=b.xa,r=b.ya,n=b.distance,a=b.dxy,s=b.index,c={pointNumber:s,x:p[s],y:l[s]};c.tx=k.isArrayOrTypedArray(t.text)?t.text[s]:t.text,c.htx=Array.isArray(t.hovertext)?t.hovertext[s]:t.hovertext,c.data=Array.isArray(t.customdata)?t.customdata[s]:t.customdata,c.tp=Array.isArray(t.textposition)?t.textposition[s]:t.textposition;var h=t.textfont;h&&(c.ts=k.isArrayOrTypedArray(h.size)?h.size[s]:h.size,c.tc=k.isArrayOrTypedArray(h.color)?h.color[s]:h.color,c.tf=Array.isArray(h.family)?h.family[s]:h.family,c.tw=Array.isArray(h.weight)?h.weight[s]:h.weight,c.ty=Array.isArray(h.style)?h.style[s]:h.style,c.tv=Array.isArray(h.variant)?h.variant[s]:h.variant);var u=t.marker;u&&(c.ms=k.isArrayOrTypedArray(u.size)?u.size[s]:u.size,c.mo=k.isArrayOrTypedArray(u.opacity)?u.opacity[s]:u.opacity,c.mx=k.isArrayOrTypedArray(u.symbol)?u.symbol[s]:u.symbol,c.ma=k.isArrayOrTypedArray(u.angle)?u.angle[s]:u.angle,c.mc=k.isArrayOrTypedArray(u.color)?u.color[s]:u.color);var y=u&&u.line;y&&(c.mlc=Array.isArray(y.color)?y.color[s]:y.color,c.mlw=k.isArrayOrTypedArray(y.width)?y.width[s]:y.width);var d=u&&u.gradient;d&&"none"!==d.type&&(c.mgt=Array.isArray(d.type)?d.type[s]:d.type,c.mgc=Array.isArray(d.color)?d.color[s]:d.color);var m=i.c2p(c.x,!0),g=r.c2p(c.y,!0),x=c.mrc||1,v=t.hoverlabel;v&&(c.hbg=Array.isArray(v.bgcolor)?v.bgcolor[s]:v.bgcolor,c.hbc=Array.isArray(v.bordercolor)?v.bordercolor[s]:v.bordercolor,c.hts=k.isArrayOrTypedArray(v.font.size)?v.font.size[s]:v.font.size,c.htc=Array.isArray(v.font.color)?v.font.color[s]:v.font.color,c.htf=Array.isArray(v.font.family)?v.font.family[s]:v.font.family,c.hnl=k.isArrayOrTypedArray(v.namelength)?v.namelength[s]:v.namelength);var _=t.hoverinfo;_&&(c.hi=Array.isArray(_)?_[s]:_);var f=t.hovertemplate;f&&(c.ht=Array.isArray(f)?f[s]:f);var C={};C[b.index]=c;var w=t._origX,E=t._origY,P=k.extendFlat({},b,{color:o(t,c),x0:m-x,x1:m+x,xLabelVal:w?w[s]:c.x,y0:g-x,y1:g+x,yLabelVal:E?E[s]:c.y,cd:C,distance:n,spikeDistance:a,hovertemplate:c.ht});return c.htx?P.text=c.htx:c.tx?P.text=c.tx:t.text&&(P.text=t.text),k.fillText(c,t,P),S.getComponentMethod("errorbars","hoverInfo")(c,t,P),P}ie.exports={hoverPoints:function(b,p,l,t){var i,r,n,a,s,c,h,u,y,d,m=b.cd,g=m[0].t,x=m[0].trace,v=b.xa,_=b.ya,f=g.x,C=g.y,w=v.c2p(p),E=_.c2p(l),P=b.distance;if(g.tree){var L=v.p2c(w-P),O=v.p2c(w+P),z=_.p2c(E-P),V=_.p2c(E+P);i="x"===t?g.tree.range(Math.min(L,O),Math.min(_._rl[0],_._rl[1]),Math.max(L,O),Math.max(_._rl[0],_._rl[1])):g.tree.range(Math.min(L,O),Math.min(z,V),Math.max(L,O),Math.max(z,V))}else i=g.ids;var R=P;if("x"===t){var U=!!x.xperiodalignment,Z=!!x.yperiodalignment;for(c=0;c<i.length;c++){if(a=f[r=i[c]],h=Math.abs(v.c2p(a)-w),U){var N=v.c2p(x._xStarts[r]),G=v.c2p(x._xEnds[r]);h=w>=Math.min(N,G)&&w<=Math.max(N,G)?0:1/0}if(h<R){if(R=h,u=_.c2p(s=C[r])-E,Z){var W=_.c2p(x._yStarts[r]),ae=_.c2p(x._yEnds[r]);u=E>=Math.min(W,ae)&&E<=Math.max(W,ae)?0:1/0}d=Math.sqrt(h*h+u*u),n=i[c]}}}else for(c=i.length-1;c>-1;c--)a=f[r=i[c]],s=C[r],h=v.c2p(a)-w,u=_.c2p(s)-E,(y=Math.sqrt(h*h+u*u))<R&&(R=d=y,n=r);return b.index=n,b.distance=R,b.dxy=d,void 0===n?[b]:[T(b,f,C,x)]},calcHover:T}},38983:function(ie,F,e){"use strict";var S=e(64628);S.plot=e(89876),ie.exports=S},89876:function(ie,F,e){"use strict";var S=e(38540),k=e(13472),o=e(24544),T=e(23352),b=e(3400),p=e(72760).selectMode,l=e(5048),t=e(43028),i=e(14328),r=e(26768).styleTextSelection,n={};function a(s,c,h,u){var y=s._size,f=y.w*u,C=y.h*u;return[y.l*u+c.domain[0]*f,y.b*u+h.domain[0]*C,s.width*u-y.r*u-(1-c.domain[1])*f,s.height*u-y.t*u-(1-h.domain[1])*C]}(ie.exports=function(s,c,h){if(h.length){var u,y,d=s._fullLayout,m=c._scene,g=c.xaxis,x=c.yaxis;if(m)if(l(s,["ANGLE_instanced_arrays","OES_element_index_uint"],n)){var v=m.count,_=d._glcanvas.data()[0].regl;if(i(s,c,h),m.dirty){if(!m.line2d&&!m.error2d||m.scatter2d||m.fill2d||m.glText||_.clear({}),!0===m.error2d&&(m.error2d=o(_)),!0===m.line2d&&(m.line2d=k(_)),!0===m.scatter2d&&(m.scatter2d=S(_)),!0===m.fill2d&&(m.fill2d=k(_)),!0===m.glText)for(m.glText=new Array(v),u=0;u<v;u++)m.glText[u]=new T(_);if(m.glText){if(v>m.glText.length){var f=v-m.glText.length;for(u=0;u<f;u++)m.glText.push(new T(_))}else v<m.glText.length&&m.glText.splice(v,m.glText.length-v).forEach(function(oe){oe.destroy()});for(u=0;u<v;u++)m.glText[u].update(m.textOptions[u])}if(m.line2d&&(m.line2d.update(m.lineOptions),m.lineOptions=m.lineOptions.map(function(oe){if(oe&&oe.positions){for(var fe=oe.positions,ue=0;ue<fe.length&&(isNaN(fe[ue])||isNaN(fe[ue+1]));)ue+=2;for(var ge=fe.length-2;ge>ue&&(isNaN(fe[ge])||isNaN(fe[ge+1]));)ge-=2;oe.positions=fe.slice(ue,ge+2)}return oe}),m.line2d.update(m.lineOptions)),m.error2d){var w=(m.errorXOptions||[]).concat(m.errorYOptions||[]);m.error2d.update(w)}m.scatter2d&&m.scatter2d.update(m.markerOptions),m.fillOrder=b.repeat(null,v),m.fill2d&&(m.fillOptions=m.fillOptions.map(function(oe,fe){var ue=h[fe];if(oe&&ue&&ue[0]&&ue[0].trace){var ge,we,Te=ue[0],xe=Te.trace,ye=Te.t,_e=m.lineOptions[fe],Ie=[];xe._ownfill&&Ie.push(fe),xe._nexttrace&&Ie.push(fe+1),Ie.length&&(m.fillOrder[fe]=Ie);var De,be,he=[],ce=_e&&_e.positions||ye.positions;if("tozeroy"===xe.fill){for(De=0;De<ce.length&&isNaN(ce[De+1]);)De+=2;for(be=ce.length-2;be>De&&isNaN(ce[be+1]);)be-=2;0!==ce[De+1]&&(he=[ce[De],0]),he=he.concat(ce.slice(De,be+2)),0!==ce[be+1]&&(he=he.concat([ce[be],0]))}else if("tozerox"===xe.fill){for(De=0;De<ce.length&&isNaN(ce[De]);)De+=2;for(be=ce.length-2;be>De&&isNaN(ce[be]);)be-=2;0!==ce[De]&&(he=[0,ce[De+1]]),he=he.concat(ce.slice(De,be+2)),0!==ce[be]&&(he=he.concat([0,ce[be+1]]))}else if("toself"===xe.fill||"tonext"===xe.fill){for(he=[],ge=0,oe.splitNull=!0,we=0;we<ce.length;we+=2)(isNaN(ce[we])||isNaN(ce[we+1]))&&((he=he.concat(ce.slice(ge,we))).push(ce[ge],ce[ge+1]),he.push(null,null),ge=we+2);he=he.concat(ce.slice(ge)),ge&&he.push(ce[ge],ce[ge+1])}else{var me=xe._nexttrace;if(me){var Pe=m.lineOptions[fe+1];if(Pe){var Ae=Pe.positions;if("tonexty"===xe.fill){for(he=ce.slice(),fe=Math.floor(Ae.length/2);fe--;){var Ce=Ae[2*fe],Oe=Ae[2*fe+1];isNaN(Ce)||isNaN(Oe)||he.push(Ce,Oe)}oe.fill=me.fillcolor}}}}if(xe._prevtrace&&"tonext"===xe._prevtrace.fill){var Ne=m.lineOptions[fe-1].positions,je=he.length/2,ve=[ge=je];for(we=0;we<Ne.length;we+=2)(isNaN(Ne[we])||isNaN(Ne[we+1]))&&(ve.push(we/2+je+1),ge=we+2);he=he.concat(Ne),oe.hole=ve}return oe.fillmode=xe.fill,oe.opacity=xe.opacity,oe.positions=he,oe}}),m.fill2d.update(m.fillOptions))}var P=p(d.dragmode),L=d.clickmode.indexOf("select")>-1;for(u=0;u<v;u++){var O=h[u][0],z=O.trace,V=O.t,R=V.index,U=z._length,Z=V.x,N=V.y;if(z.selectedpoints||P||L){if(P||(P=!0),z.selectedpoints){var G=m.selectBatch[R]=b.selIndices2selPoints(z),W={};for(y=0;y<G.length;y++)W[G[y]]=1;var ae=[];for(y=0;y<U;y++)W[y]||ae.push(y);m.unselectBatch[R]=ae}var re=V.xpx=new Array(U),ne=V.ypx=new Array(U);for(y=0;y<U;y++)re[y]=g.c2p(Z[y]),ne[y]=x.c2p(N[y])}else V.xpx=V.ypx=null}if(P){if(m.select2d||(m.select2d=S(d._glcanvas.data()[1].regl)),m.scatter2d){var Q=new Array(v);for(u=0;u<v;u++)Q[u]=m.selectBatch[u].length||m.unselectBatch[u].length?m.markerUnselectedOptions[u]:{};m.scatter2d.update(Q)}m.select2d&&(m.select2d.update(m.markerOptions),m.select2d.update(m.markerSelectedOptions)),m.glText&&h.forEach(function(oe){t.hasText(((oe||[])[0]||{}).trace||{})&&r(oe)})}else m.scatter2d&&m.scatter2d.update(m.markerOptions);var $={viewport:a(d,g,x,s._context.plotGlPixelRatio),range:[(g._rl||g.range)[0],(x._rl||x.range)[0],(g._rl||g.range)[1],(x._rl||x.range)[1]]},X=b.repeat($,m.count);m.fill2d&&m.fill2d.update(X),m.line2d&&m.line2d.update(X),m.error2d&&m.error2d.update(X.concat(X)),m.scatter2d&&m.scatter2d.update(X),m.select2d&&m.select2d.update(X),m.glText&&m.glText.forEach(function(oe){oe.update($)})}else m.init()}}).reglPrecompiled=n},74588:function(ie,F,e){"use strict";var S=e(3400);ie.exports=function(k,o){var T=o._scene,b={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},p={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return o._scene||((T=o._scene={}).init=function(){S.extendFlat(T,p,b)},T.init(),T.update=function(l){var t=S.repeat(l,T.count);if(T.fill2d&&T.fill2d.update(t),T.scatter2d&&T.scatter2d.update(t),T.line2d&&T.line2d.update(t),T.error2d&&T.error2d.update(t.concat(t)),T.select2d&&T.select2d.update(t),T.glText)for(var i=0;i<T.count;i++)T.glText[i].update(l)},T.draw=function(){for(var l=T.count,t=T.fill2d,i=T.error2d,r=T.line2d,n=T.scatter2d,a=T.glText,s=T.select2d,c=T.selectBatch,h=T.unselectBatch,u=0;u<l;u++){if(t&&T.fillOrder[u]&&t.draw(T.fillOrder[u]),r&&T.lineOptions[u]&&r.draw(u),i&&(T.errorXOptions[u]&&i.draw(u),T.errorYOptions[u]&&i.draw(u+l)),n&&T.markerOptions[u])if(h[u].length){var y=S.repeat([],T.count);y[u]=h[u],n.draw(y)}else c[u].length||n.draw(u);a[u]&&T.textOptions[u]&&a[u].render()}s&&s.draw(c),T.dirty=!1},T.destroy=function(){T.fill2d&&T.fill2d.destroy&&T.fill2d.destroy(),T.scatter2d&&T.scatter2d.destroy&&T.scatter2d.destroy(),T.error2d&&T.error2d.destroy&&T.error2d.destroy(),T.line2d&&T.line2d.destroy&&T.line2d.destroy(),T.select2d&&T.select2d.destroy&&T.select2d.destroy(),T.glText&&T.glText.forEach(function(l){l.destroy&&l.destroy()}),T.lineOptions=null,T.fillOptions=null,T.markerOptions=null,T.markerSelectedOptions=null,T.markerUnselectedOptions=null,T.errorXOptions=null,T.errorYOptions=null,T.textOptions=null,T.textSelectedOptions=null,T.textUnselectedOptions=null,T.selectBatch=null,T.unselectBatch=null,o._scene=null}),T.dirty||S.extendFlat(T,b),T}},73224:function(ie,F,e){"use strict";var S=e(43028),k=e(26768).styleTextSelection;ie.exports=function(o,T){var b=o.cd,p=o.xaxis,l=o.yaxis,t=[],i=b[0].trace,r=b[0].t,n=i._length,a=r.x,s=r.y,c=r._scene,h=r.index;if(!c)return t;var u=S.hasText(i),y=S.hasMarkers(i);if(!0!==i.visible||!y&&!u)return t;var m=[],g=[];if(!1!==T&&!T.degenerate)for(var x=0;x<n;x++)T.contains([r.xpx[x],r.ypx[x]],!1,x,o)?(m.push(x),t.push({pointNumber:x,x:p.c2d(a[x]),y:l.c2d(s[x])})):g.push(x);if(y){var v=c.scatter2d;if(m.length||g.length){if(!c.selectBatch[h].length&&!c.unselectBatch[h].length){var _=new Array(c.count);_[h]=c.markerUnselectedOptions[h],v.update.apply(v,_)}}else{var f=new Array(c.count);f[h]=c.markerOptions[h],v.update.apply(v,f)}}return c.selectBatch[h]=m,c.unselectBatch[h]=g,u&&k(b),t}},31512:function(ie,F,e){"use strict";var S=e(21776).Ks,k=e(21776).Gw,o=e(98304),T=e(6096),b=e(52904),p=e(5232),l=e(45464),t=e(49084),i=e(92880).extendFlat,r=e(67824).overrideAll,n=e(5232),a=T.line,s=T.marker;ie.exports=r({lon:T.lon,lat:T.lat,cluster:{enabled:{valType:"boolean"},maxzoom:i({},n.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:i({},s.opacity,{dflt:1})},mode:i({},b.mode,{dflt:"markers"}),text:i({},b.text,{}),texttemplate:k({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:i({},b.hovertext,{}),line:{color:a.color,width:a.width},connectgaps:b.connectgaps,marker:i({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:s.opacity,size:s.size,sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode},t("marker")),fill:T.fill,fillcolor:o(),textfont:p.layers.symbol.textfont,textposition:p.layers.symbol.textposition,below:{valType:"string"},selected:{marker:b.selected.marker},unselected:{marker:b.unselected.marker},hoverinfo:i({},l.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:S()},"calc","nested")},79732:function(ie){"use strict";var F=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extrabold Italic","Open Sans Extrabold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];ie.exports={isSupportedFont:function(e){return-1!==F.indexOf(e)}}},59392:function(ie,F,e){"use strict";var S=e(38248),k=e(3400),o=e(39032).BADNUM,T=e(44808),b=e(8932),p=e(43616),l=e(7152),t=e(43028),i=e(79732).isSupportedFont,r=e(89032),n=e(10624).appendArrayPointValue,a=e(72736).NEWLINES,s=e(72736).BR_TAG_ALL;function c(g){return{type:g,geojson:T.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function h(g,x){return k.isArrayOrTypedArray(g)?x?function(v){return S(g[v])?+g[v]:0}:function(v){return g[v]}:g?function(){return g}:u}function u(){return""}function y(g){return g[0]===o}function d(g,x){var v;if(k.isArrayOrTypedArray(g)&&k.isArrayOrTypedArray(x)){v=["step",["get","point_count"],g[0]];for(var _=1;_<g.length;_++)v.push(x[_-1],g[_])}else v=g;return v}function m(g){var x=g.textfont,v=x.family,_=x.style,f=x.weight,C=v.split(" "),w="Italic"===C[C.length-1];w&&C.pop(),w=w||"italic"===_;var E=C.join(" ");return"bold"===f&&-1===C.indexOf("Bold")?E+=" Bold":f<=1e3&&("Metropolis"===C[0]?(E="Metropolis",E+=f>850?" Black":f>750?" Extra Bold":f>650?" Bold":f>550?" Semi Bold":f>450?" Medium":f>350?" Regular":f>250?" Light":f>150?" Extra Light":" Thin"):"Open Sans"===C.slice(0,2).join(" ")?(E="Open Sans",E+=f>750?" Extrabold":f>650?" Bold":f>550?" Semibold":f>350?" Regular":" Light"):"Klokantech Noto Sans"===C.slice(0,3).join(" ")&&(E="Klokantech Noto Sans","CJK"===C[3]&&(E+=" CJK"),E+=f>500?" Bold":" Regular")),w&&(E+=" Italic"),"Open Sans Regular Italic"===E?E="Open Sans Italic":"Open Sans Regular Bold"===E?E="Open Sans Bold":"Open Sans Regular Bold Italic"===E?E="Open Sans Bold Italic":"Klokantech Noto Sans Regular Italic"===E&&(E="Klokantech Noto Sans Italic"),i(E)||(E=v),E.split(", ")}ie.exports=function(g,x){var v,_=x[0].trace,f=!0===_.visible&&0!==_._length,C="none"!==_.fill,w=t.hasLines(_),E=t.hasMarkers(_),P=t.hasText(_),L=E&&"circle"===_.marker.symbol,O=E&&"circle"!==_.marker.symbol,z=_.cluster&&_.cluster.enabled,V=c("fill"),R=c("line"),U=c("circle"),Z=c("symbol"),N={fill:V,line:R,circle:U,symbol:Z};if(!f)return N;if((C||w)&&(v=T.calcTraceToLineCoords(x)),C&&(V.geojson=T.makePolygon(v),V.layout.visibility="visible",k.extendFlat(V.paint,{"fill-color":_.fillcolor})),w&&(R.geojson=T.makeLine(v),R.layout.visibility="visible",k.extendFlat(R.paint,{"line-width":_.line.width,"line-color":_.line.color,"line-opacity":_.opacity})),L){var G=function(re){var ne,Q,$,X,oe=re[0].trace,fe=oe.marker,ue=oe.selectedpoints,ge=k.isArrayOrTypedArray(fe.color),we=k.isArrayOrTypedArray(fe.size),Te=k.isArrayOrTypedArray(fe.opacity);function xe(me){return oe.opacity*me}ge&&(Q=b.hasColorscale(oe,"marker")?b.makeColorScaleFuncFromTrace(fe):k.identity),we&&($=l(oe)),Te&&(X=function(me){return xe(S(me)?+k.constrain(me,0,1):0)});var ye,_e,Ie=[];for(ne=0;ne<re.length;ne++){var De=re[ne],be=De.lonlat;if(!y(be)){var he={};Q&&(he.mcc=De.mcc=Q(De.mc)),$&&(he.mrc=De.mrc=$(De.ms)),X&&(he.mo=X(De.mo)),ue&&(he.selected=De.selected||0),Ie.push({type:"Feature",id:ne+1,geometry:{type:"Point",coordinates:be},properties:he})}}if(ue)for(ye=p.makeSelectedPointStyleFns(oe),ne=0;ne<Ie.length;ne++){var ce=Ie[ne].properties;ye.selectedOpacityFn&&(ce.mo=xe(ye.selectedOpacityFn(ce))),ye.selectedColorFn&&(ce.mcc=ye.selectedColorFn(ce)),ye.selectedSizeFn&&(ce.mrc=ye.selectedSizeFn(ce))}return{geojson:{type:"FeatureCollection",features:Ie},mcc:ge||ye&&ye.selectedColorFn?{type:"identity",property:"mcc"}:fe.color,mrc:we||ye&&ye.selectedSizeFn?{type:"identity",property:"mrc"}:(_e=fe.size,_e/2),mo:Te||ye&&ye.selectedOpacityFn?{type:"identity",property:"mo"}:xe(fe.opacity)}}(x);U.geojson=G.geojson,U.layout.visibility="visible",z&&(U.filter=["!",["has","point_count"]],N.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":d(_.cluster.color,_.cluster.step),"circle-radius":d(_.cluster.size,_.cluster.step),"circle-opacity":d(_.cluster.opacity,_.cluster.step)}},N.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":m(_),"text-size":12}}),k.extendFlat(U.paint,{"circle-color":G.mcc,"circle-radius":G.mrc,"circle-opacity":G.mo})}if(L&&z&&(U.filter=["!",["has","point_count"]]),(O||P)&&(Z.geojson=function(re,ne){for(var Q=ne._fullLayout,$=re[0].trace,X=$.marker||{},oe=X.symbol,fe=X.angle,ue="circle"!==oe?h(oe):u,ge="auto"!==fe?h(fe,!0):u,we=t.hasText($)?h($.text):u,Te=[],xe=0;xe<re.length;xe++){var ye=re[xe];if(!y(ye.lonlat)){var _e,Ie=$.texttemplate;if(Ie){var De=Array.isArray(Ie)?Ie[xe]||"":Ie,be=$._module.formatLabels(ye,$,Q),he={};n(he,$,ye.i),_e=k.texttemplateString(De,be,Q._d3locale,he,ye,$._meta||{})}else _e=we(xe);_e&&(_e=_e.replace(a,"").replace(s,"\n")),Te.push({type:"Feature",geometry:{type:"Point",coordinates:ye.lonlat},properties:{symbol:ue(xe),angle:ge(xe),text:_e}})}}return{type:"FeatureCollection",features:Te}}(x,g),k.extendFlat(Z.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),O&&(k.extendFlat(Z.layout,{"icon-size":_.marker.size/10}),"angle"in _.marker&&"auto"!==_.marker.angle&&k.extendFlat(Z.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),Z.layout["icon-allow-overlap"]=_.marker.allowoverlap,k.extendFlat(Z.paint,{"icon-opacity":_.opacity*_.marker.opacity,"icon-color":_.marker.color})),P)){var ae=r(_.textposition,(_.marker||{}).size);k.extendFlat(Z.layout,{"text-size":_.textfont.size,"text-anchor":ae.anchor,"text-offset":ae.offset,"text-font":m(_)}),k.extendFlat(Z.paint,{"text-color":_.textfont.color,"text-opacity":_.opacity})}return N}},15752:function(ie,F,e){"use strict";var S=e(3400),k=e(43028),o=e(74428),T=e(66828),b=e(124),p=e(70840),l=e(31512),t=e(79732).isSupportedFont;ie.exports=function(i,r,n,a){function s(_,f){return S.coerce(i,r,l,_,f)}function c(_,f){return S.coerce2(i,r,l,_,f)}var f,C,w,E,P;if(f=r,w=(C=s)("lon")||[],E=C("lat")||[],P=Math.min(w.length,E.length),f._length=P,P){if(s("text"),s("texttemplate"),s("hovertext"),s("hovertemplate"),s("mode"),s("below"),k.hasMarkers(r)){o(i,r,n,a,s,{noLine:!0,noAngle:!0}),s("marker.allowoverlap"),s("marker.angle");var u=r.marker;"circle"!==u.symbol&&(S.isArrayOrTypedArray(u.size)&&(u.size=u.size[0]),S.isArrayOrTypedArray(u.color)&&(u.color=u.color[0]))}k.hasLines(r)&&(T(i,r,n,a,s,{noDash:!0}),s("connectgaps"));var y=c("cluster.maxzoom"),d=c("cluster.step"),m=c("cluster.color",r.marker&&r.marker.color||n),g=c("cluster.size"),x=c("cluster.opacity");if(s("cluster.enabled",!1!==y||!1!==d||!1!==m||!1!==g||!1!==x)||k.hasText(r)){var v=a.font.family;b(i,r,a,s,{noSelect:!0,noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,font:{family:t(v)?v:"Open Sans Regular",weight:a.font.weight,style:a.font.style,size:a.font.size,color:a.font.color}})}s("fill"),"none"!==r.fill&&p(i,r,n,s),S.coerceSelectionMarkerOpacity(r,s)}else r.visible=!1}},37920:function(ie){"use strict";ie.exports=function(F,e){return F.lon=e.lon,F.lat=e.lat,F}},11960:function(ie,F,e){"use strict";var S=e(54460);ie.exports=function(k,o,T){var b={},p=T[o.subplot]._subplot.mockAxis,l=k.lonlat;return b.lonLabel=S.tickText(p,p.c2l(l[0]),!0).text,b.latLabel=S.tickText(p,p.c2l(l[1]),!0).text,b}},63312:function(ie,F,e){"use strict";var S=e(93024),k=e(3400),o=e(44928),T=k.fillText,b=e(39032).BADNUM,p=e(47552).traceLayerPrefix;function l(t,i,r){if(!t.hovertemplate){var n=(i.hi||t.hoverinfo).split("+"),a=-1!==n.indexOf("all"),s=-1!==n.indexOf("lon"),c=-1!==n.indexOf("lat"),h=i.lonlat,u=[];return a||s&&c?u.push("("+y(h[1])+", "+y(h[0])+")"):s?u.push(r.lon+y(h[0])):c&&u.push(r.lat+y(h[1])),(a||-1!==n.indexOf("text"))&&T(i,t,u),u.join("<br>")}function y(d){return d+"\xb0"}}ie.exports={hoverPoints:function(t,i,r){var n=t.cd,a=n[0].trace,s=t.xa,c=t.ya,h=t.subplot,u=[],d=a.cluster&&a.cluster.enabled;if(d){var m=h.map.queryRenderedFeatures(null,{layers:[p+a.uid+"-circle"]});u=m.map(function(O){return O.id})}var g=360*(i>=0?Math.floor((i+180)/360):Math.ceil((i-180)/360)),x=i-g;if(S.getClosest(n,function(O){var z=O.lonlat;if(z[0]===b||d&&-1===u.indexOf(O.i+1))return 1/0;var V=k.modHalf(z[0],360),R=z[1],U=h.project([V,R]),Z=U.x-s.c2p([x,R]),N=U.y-c.c2p([V,r]),G=Math.max(3,O.mrc||0);return Math.max(Math.sqrt(Z*Z+N*N)-G,1-3/G)},t),!1!==t.index){var v=n[t.index],_=v.lonlat,f=[k.modHalf(_[0],360)+g,_[1]],C=s.c2p(f),w=c.c2p(f),E=v.mrc||1;t.x0=C-E,t.x1=C+E,t.y0=w-E,t.y1=w+E;var P={};P[a.subplot]={_subplot:h};var L=a._module.formatLabels(v,a,P);return t.lonLabel=L.lonLabel,t.latLabel=L.latLabel,t.color=o(a,v),t.extraText=l(a,v,n[0].t.labels),t.hovertemplate=a.hovertemplate,[t]}},getExtraText:l}},11572:function(ie,F,e){"use strict";ie.exports={attributes:e(31512),supplyDefaults:e(15752),colorbar:e(5528),formatLabels:e(11960),calc:e(25212),plot:e(9660),hoverPoints:e(63312).hoverPoints,eventData:e(37920),selectPoints:e(404),styleOnSelect:function(S,k){k&&k[0].trace._glTrace.update(k)},moduleType:"trace",name:"scattermapbox",basePlotModule:e(33688),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},9660:function(ie,F,e){"use strict";var S=e(3400),k=e(59392),o=e(47552).traceLayerPrefix,T={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function b(l,t,i,r){this.type="scattermapbox",this.subplot=l,this.uid=t,this.clusterEnabled=i,this.isHidden=r,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol",cluster:"source-"+t+"-circle",clusterCount:"source-"+t+"-circle"},this.layerIds={fill:o+t+"-fill",line:o+t+"-line",circle:o+t+"-circle",symbol:o+t+"-symbol",cluster:o+t+"-cluster",clusterCount:o+t+"-cluster-count"},this.below=null}var p=b.prototype;p.addSource=function(l,t,i){var r={type:"geojson",data:t.geojson};i&&i.enabled&&S.extendFlat(r,{cluster:!0,clusterMaxZoom:i.maxzoom});var n=this.subplot.map.getSource(this.sourceIds[l]);n?n.setData(t.geojson):this.subplot.map.addSource(this.sourceIds[l],r)},p.setSourceData=function(l,t){this.subplot.map.getSource(this.sourceIds[l]).setData(t.geojson)},p.addLayer=function(l,t,i){var r={type:t.type,id:this.layerIds[l],source:this.sourceIds[l],layout:t.layout,paint:t.paint};t.filter&&(r.filter=t.filter);for(var n,a=this.layerIds[l],s=this.subplot.getMapLayers(),c=0;c<s.length;c++)if(s[c].id===a){n=!0;break}n?(this.subplot.setOptions(a,"setLayoutProperty",r.layout),"visible"===r.layout.visibility&&this.subplot.setOptions(a,"setPaintProperty",r.paint)):this.subplot.addLayer(r,i)},p.update=function(l){var t=l[0].trace,i=this.subplot,r=i.map,n=k(i.gd,l),a=i.belowLookup["trace-"+this.uid],s=!(!t.cluster||!t.cluster.enabled),c=!!this.clusterEnabled,h=this;function u(x){c?function(v){for(var _=T.cluster,f=_.length-1;f>=0;f--)r.removeLayer(h.layerIds[_[f]]);v||r.removeSource(h.sourceIds.circle)}(x):function(v){for(var _=T.nonCluster,f=_.length-1;f>=0;f--){var C=_[f];r.removeLayer(h.layerIds[C]),v||r.removeSource(h.sourceIds[C])}}(x)}function y(x){s?function(v){v||h.addSource("circle",n.circle,t.cluster);for(var _=T.cluster,f=0;f<_.length;f++){var C=_[f];h.addLayer(C,n[C],a)}}(x):function(v){for(var _=T.nonCluster,f=0;f<_.length;f++){var C=_[f],w=n[C];v||h.addSource(C,w),h.addLayer(C,w,a)}}(x)}var m=this.isHidden,g=!0!==t.visible;g?m||u():m?g||y():c!==s?(u(),y()):(this.below!==a&&(u(!0),y(!0)),function d(){for(var x=s?T.cluster:T.nonCluster,v=0;v<x.length;v++){var _=x[v],f=n[_];f&&(i.setOptions(h.layerIds[_],"setLayoutProperty",f.layout),"visible"===f.layout.visibility&&("cluster"!==_&&h.setSourceData(_,f),i.setOptions(h.layerIds[_],"setPaintProperty",f.paint)))}}()),this.clusterEnabled=s,this.isHidden=g,this.below=a,l[0].trace._glTrace=this},p.dispose=function(){for(var l=this.subplot.map,t=this.clusterEnabled?T.cluster:T.nonCluster,i=t.length-1;i>=0;i--){var r=t[i];l.removeLayer(this.layerIds[r]),l.removeSource(this.sourceIds[r])}},ie.exports=function(l,t){var i,r,n,a=t[0].trace,s=a.cluster&&a.cluster.enabled,h=new b(l,a.uid,s,!0!==a.visible),u=k(l.gd,t),y=h.below=l.belowLookup["trace-"+a.uid];if(s)for(h.addSource("circle",u.circle,a.cluster),i=0;i<T.cluster.length;i++)n=u[r=T.cluster[i]],h.addLayer(r,n,y);else for(i=0;i<T.nonCluster.length;i++)n=u[r=T.nonCluster[i]],h.addSource(r,n,a.cluster),h.addLayer(r,n,y);return t[0].trace._glTrace=h,h}},404:function(ie,F,e){"use strict";var S=e(3400),k=e(43028),o=e(39032).BADNUM;ie.exports=function(T,b){var p,l=T.cd,t=T.xaxis,i=T.yaxis,r=[];if(!k.hasMarkers(l[0].trace))return[];if(!1===b)for(p=0;p<l.length;p++)l[p].selected=0;else for(p=0;p<l.length;p++){var a=l[p],s=a.lonlat;if(s[0]!==o){var c=[S.modHalf(s[0],360),s[1]],h=[t.c2p(c),i.c2p(c)];b.contains(h,null,p,T)?(r.push({pointNumber:p,lon:s[0],lat:s[1]}),a.selected=1):a.selected=0}}return r}},8319:function(ie,F,e){"use strict";var S=e(21776).Ks,k=e(21776).Gw,o=e(92880).extendFlat,T=e(98304),b=e(52904),p=e(45464),l=b.line;ie.exports={mode:b.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:b.text,texttemplate:k({editType:"plot"},{keys:["r","theta","text"]}),hovertext:b.hovertext,line:{color:l.color,width:l.width,dash:l.dash,backoff:l.backoff,shape:o({},l.shape,{values:["linear","spline"]}),smoothing:l.smoothing,editType:"calc"},connectgaps:b.connectgaps,marker:b.marker,cliponaxis:o({},b.cliponaxis,{dflt:!1}),textposition:b.textposition,textfont:b.textfont,fill:o({},b.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T(),hoverinfo:o({},p.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:b.hoveron,hovertemplate:S(),selected:b.selected,unselected:b.unselected}},58320:function(ie,F,e){"use strict";var S=e(38248),k=e(39032).BADNUM,o=e(54460),T=e(90136),b=e(20148),p=e(4500),l=e(16356).calcMarkerSize;ie.exports=function(t,i){for(var r=t._fullLayout,n=i.subplot,a=r[n].radialaxis,s=r[n].angularaxis,c=a.makeCalcdata(i,"r"),h=s.makeCalcdata(i,"theta"),u=i._length,y=new Array(u),d=0;d<u;d++){var m=c[d],g=h[d],x=y[d]={};S(m)&&S(g)?(x.r=m,x.theta=g):x.r=k}var v=l(i,u);return i._extremes.x=o.findExtremes(a,c,{ppad:v}),T(t,i),b(y,i),p(y,i),y}},85968:function(ie,F,e){"use strict";var S=e(3400),k=e(43028),o=e(74428),T=e(66828),b=e(11731),p=e(124),l=e(70840),t=e(88200).PTS_LINESONLY,i=e(8319);function r(n,a,s,c){var h,u=c("r"),y=c("theta");if(S.isTypedArray(u)&&(a.r=u=Array.from(u)),S.isTypedArray(y)&&(a.theta=y=Array.from(y)),u)y?h=Math.min(u.length,y.length):(h=u.length,c("theta0"),c("dtheta"));else{if(!y)return 0;h=a.theta.length,c("r0"),c("dr")}return a._length=h,h}ie.exports={handleRThetaDefaults:r,supplyDefaults:function(n,a,s,c){function h(d,m){return S.coerce(n,a,i,d,m)}var u=r(0,a,0,h);if(u){h("thetaunit"),h("mode",u<t?"lines+markers":"lines"),h("text"),h("hovertext"),"fills"!==a.hoveron&&h("hovertemplate"),k.hasMarkers(a)&&o(n,a,s,c,h,{gradient:!0}),k.hasLines(a)&&(T(n,a,s,c,h,{backoff:!0}),b(n,a,h),h("connectgaps")),k.hasText(a)&&(h("texttemplate"),p(n,a,c,h));var y=[];(k.hasMarkers(a)||k.hasText(a))&&(h("cliponaxis"),h("marker.maxdisplayed"),y.push("points")),h("fill"),"none"!==a.fill&&(l(n,a,s,h),k.hasLines(a)||b(n,a,h)),"tonext"!==a.fill&&"toself"!==a.fill||y.push("fills"),h("hoveron",y.join("+")||"points"),S.coerceSelectionMarkerOpacity(a,h)}else a.visible=!1}}},22852:function(ie,F,e){"use strict";var S=e(3400),k=e(54460);ie.exports=function(o,T,b){var p,l,t={},i=b[T.subplot]._subplot;i?(p=i.radialAxis,l=i.angularAxis):(p=(i=b[T.subplot]).radialaxis,l=i.angularaxis);var r=p.c2l(o.r);t.rLabel=k.tickText(p,r,!0).text;var n="degrees"===l.thetaunit?S.rad2deg(o.theta):o.theta;return t.thetaLabel=k.tickText(l,n,!0).text,t}},8504:function(ie,F,e){"use strict";var S=e(98723);function k(o,T,b,p){var l=b.radialAxis,t=b.angularAxis;l._hovertitle="r",t._hovertitle="\u03b8";var i={};i[T.subplot]={_subplot:b};var r=T._module.formatLabels(o,T,i);p.rLabel=r.rLabel,p.thetaLabel=r.thetaLabel;var a=[];function s(h,u){a.push(h._hovertitle+": "+u)}if(!T.hovertemplate){var c=(o.hi||T.hoverinfo).split("+");-1!==c.indexOf("all")&&(c=["r","theta","text"]),-1!==c.indexOf("r")&&s(l,p.rLabel),-1!==c.indexOf("theta")&&s(t,p.thetaLabel),-1!==c.indexOf("text")&&p.text&&(a.push(p.text),delete p.text),p.extraText=a.join("<br>")}}ie.exports={hoverPoints:function(o,T,b,p){var l=S(o,T,b,p);if(l&&!1!==l[0].index){var t=l[0];if(void 0===t.index)return l;var i=o.subplot,r=t.cd[t.index],n=t.trace;if(i.isPtInside(r))return t.xLabelVal=void 0,t.yLabelVal=void 0,k(r,n,i,t),t.hovertemplate=n.hovertemplate,l}},makeHoverPointText:k}},76924:function(ie,F,e){"use strict";ie.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:e(40872),categories:["polar","symbols","showLegend","scatter-like"],attributes:e(8319),supplyDefaults:e(85968).supplyDefaults,colorbar:e(5528),formatLabels:e(22852),calc:e(58320),plot:e(43456),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(8504).hoverPoints,selectPoints:e(91560),meta:{}}},43456:function(ie,F,e){"use strict";var S=e(96504),k=e(39032).BADNUM;ie.exports=function(o,T,b){for(var p=T.layers.frontplot.select("g.scatterlayer"),l=T.xaxis,t=T.yaxis,i={xaxis:l,yaxis:t,plot:T.framework,layerClipId:T._hasClipOnAxisFalse?T.clipIds.forTraces:null},r=T.radialAxis,n=T.angularAxis,a=0;a<b.length;a++)for(var s=b[a],c=0;c<s.length;c++){0===c&&(s[0].trace._xA=l,s[0].trace._yA=t);var h=s[c],u=h.r;if(u===k)h.x=h.y=k;else{var y=r.c2g(u),d=n.c2g(h.theta);h.x=y*Math.cos(d),h.y=y*Math.sin(d)}}S(o,i,b,p)}},24396:function(ie,F,e){"use strict";var S=e(8319),k=e(2876),o=e(21776).Gw;ie.exports={mode:S.mode,r:S.r,theta:S.theta,r0:S.r0,dr:S.dr,theta0:S.theta0,dtheta:S.dtheta,thetaunit:S.thetaunit,text:S.text,texttemplate:o({editType:"plot"},{keys:["r","theta","text"]}),hovertext:S.hovertext,hovertemplate:S.hovertemplate,line:{color:k.line.color,width:k.line.width,dash:k.line.dash,editType:"calc"},connectgaps:k.connectgaps,marker:k.marker,fill:k.fill,fillcolor:k.fillcolor,textposition:k.textposition,textfont:k.textfont,hoverinfo:S.hoverinfo,selected:S.selected,unselected:S.unselected}},27160:function(ie,F,e){"use strict";ie.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:e(40872),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:e(24396),supplyDefaults:e(98608),colorbar:e(5528),formatLabels:e(94120),calc:e(66720),hoverPoints:e(1600).hoverPoints,selectPoints:e(73224),meta:{}}},66720:function(ie,F,e){"use strict";var S=e(90136),k=e(16356).calcMarkerSize,o=e(84236),T=e(54460),b=e(67072).TOO_MANY_POINTS;ie.exports=function(p,l){var t=p._fullLayout,i=l.subplot,r=t[i].radialaxis,n=t[i].angularaxis,a=l._r=r.makeCalcdata(l,"r"),s=l._theta=n.makeCalcdata(l,"theta"),c=l._length,h={};c<a.length&&(a=a.slice(0,c)),c<s.length&&(s=s.slice(0,c)),h.r=a,h.theta=s,S(p,l);var u,y=h.opts=o.style(p,l);return c<b?u=k(l,c):y.marker&&(u=2*(y.marker.sizeAvg||Math.max(y.marker.size,3))),l._extremes.x=T.findExtremes(r,a,{ppad:u}),[{x:!1,y:!1,t:h,trace:l}]}},98608:function(ie,F,e){"use strict";var S=e(3400),k=e(43028),o=e(85968).handleRThetaDefaults,T=e(74428),b=e(66828),p=e(124),l=e(70840),t=e(88200).PTS_LINESONLY,i=e(24396);ie.exports=function(r,n,a,s){function c(u,y){return S.coerce(r,n,i,u,y)}var h=o(r,n,s,c);h?(c("thetaunit"),c("mode",h<t?"lines+markers":"lines"),c("text"),c("hovertext"),"fills"!==n.hoveron&&c("hovertemplate"),k.hasMarkers(n)&&T(r,n,a,s,c,{noAngleRef:!0,noStandOff:!0}),k.hasLines(n)&&(b(r,n,a,s,c),c("connectgaps")),k.hasText(n)&&(c("texttemplate"),p(r,n,s,c,{noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0})),c("fill"),"none"!==n.fill&&l(r,n,a,c),S.coerceSelectionMarkerOpacity(n,c)):n.visible=!1}},94120:function(ie,F,e){"use strict";var S=e(22852);ie.exports=function(k,o,T){var b=k.i;return"r"in k||(k.r=o._r[b]),"theta"in k||(k.theta=o._theta[b]),S(k,o,T)}},1600:function(ie,F,e){"use strict";var S=e(41272),k=e(8504).makeHoverPointText;ie.exports={hoverPoints:function(o,T,b,p){var l=o.cd[0].t,t=l.r,i=l.theta,r=S.hoverPoints(o,T,b,p);if(r&&!1!==r[0].index){var n=r[0];if(void 0===n.index)return r;var a=o.subplot,s=n.cd[n.index],c=n.trace;if(s.r=t[n.index],s.theta=i[n.index],a.isPtInside(s))return n.xLabelVal=void 0,n.yLabelVal=void 0,k(s,c,a,n),r}}}},62944:function(ie,F,e){"use strict";var S=e(27160);S.plot=e(56512),ie.exports=S},56512:function(ie,F,e){"use strict";var S=e(3108),k=e(38248),o=e(89876),T=e(74588),b=e(84236),p=e(3400),l=e(67072).TOO_MANY_POINTS;ie.exports=function(t,i,r){if(r.length){var n=i.radialAxis,a=i.angularAxis,s=T(t,i);return r.forEach(function(c){if(c&&c[0]&&c[0].trace){var h,u=c[0],y=u.trace,d=u.t,m=y._length,g=d.r,x=d.theta,v=d.opts,_=g.slice(),f=x.slice();for(h=0;h<g.length;h++)i.isPtInside({r:g[h],theta:x[h]})||(_[h]=NaN,f[h]=NaN);var C=new Array(2*m),w=Array(m),E=Array(m);for(h=0;h<m;h++){var P,L,O=_[h];if(k(O)){var z=n.c2g(O),V=a.c2g(f[h],y.thetaunit);P=z*Math.cos(V),L=z*Math.sin(V)}else P=L=NaN;w[h]=C[2*h]=P,E[h]=C[2*h+1]=L}d.tree=S(C),v.marker&&m>=l&&(v.marker.cluster=d.tree),v.marker&&(v.markerSel.positions=v.markerUnsel.positions=v.marker.positions=C),v.line&&C.length>1&&p.extendFlat(v.line,b.linePositions(t,y,C)),v.text&&(p.extendFlat(v.text,{positions:C},b.textPosition(t,y,v.text,v.marker)),p.extendFlat(v.textSel,{positions:C},b.textPosition(t,y,v.text,v.markerSel)),p.extendFlat(v.textUnsel,{positions:C},b.textPosition(t,y,v.text,v.markerUnsel))),v.fill&&!s.fill2d&&(s.fill2d=!0),v.marker&&!s.scatter2d&&(s.scatter2d=!0),v.line&&!s.line2d&&(s.line2d=!0),v.text&&!s.glText&&(s.glText=!0),s.lineOptions.push(v.line),s.fillOptions.push(v.fill),s.markerOptions.push(v.marker),s.markerSelectedOptions.push(v.markerSel),s.markerUnselectedOptions.push(v.markerUnsel),s.textOptions.push(v.text),s.textSelectedOptions.push(v.textSel),s.textUnselectedOptions.push(v.textUnsel),s.selectBatch.push([]),s.unselectBatch.push([]),d.x=w,d.y=E,d.rawx=w,d.rawy=E,d.r=g,d.theta=x,d.positions=C,d._scene=s,d.index=s.count,s.count++}}),o(t,i,r)}},ie.exports.reglPrecompiled={}},69496:function(ie,F,e){"use strict";var S=e(21776).Ks,k=e(21776).Gw,o=e(92880).extendFlat,T=e(98304),b=e(52904),p=e(45464),l=b.line;ie.exports={mode:b.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:b.text,texttemplate:k({editType:"plot"},{keys:["real","imag","text"]}),hovertext:b.hovertext,line:{color:l.color,width:l.width,dash:l.dash,backoff:l.backoff,shape:o({},l.shape,{values:["linear","spline"]}),smoothing:l.smoothing,editType:"calc"},connectgaps:b.connectgaps,marker:b.marker,cliponaxis:o({},b.cliponaxis,{dflt:!1}),textposition:b.textposition,textfont:b.textfont,fill:o({},b.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T(),hoverinfo:o({},p.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:b.hoveron,hovertemplate:S(),selected:b.selected,unselected:b.unselected}},47507:function(ie,F,e){"use strict";var S=e(38248),k=e(39032).BADNUM,o=e(90136),T=e(20148),b=e(4500),p=e(16356).calcMarkerSize;ie.exports=function(l,t){for(var i=l._fullLayout,r=t.subplot,a=i[r].imaginaryaxis,s=i[r].realaxis.makeCalcdata(t,"real"),c=a.makeCalcdata(t,"imag"),h=t._length,u=new Array(h),y=0;y<h;y++){var d=s[y],m=c[y],g=u[y]={};S(d)&&S(m)?(g.real=d,g.imag=m):g.real=k}return p(t,h),o(l,t),T(u,t),b(u,t),u}},76716:function(ie,F,e){"use strict";var S=e(3400),k=e(43028),o=e(74428),T=e(66828),b=e(11731),p=e(124),l=e(70840),t=e(88200).PTS_LINESONLY,i=e(69496);ie.exports=function(r,n,a,s){function c(y,d){return S.coerce(r,n,i,y,d)}var d,g,x,v,_,h=(d=n,v=(g=c)("real"),_=g("imag"),v&&_&&(x=Math.min(v.length,_.length)),S.isTypedArray(v)&&(d.real=v=Array.from(v)),S.isTypedArray(_)&&(d.imag=_=Array.from(_)),d._length=x,x);if(h){c("mode",h<t?"lines+markers":"lines"),c("text"),c("hovertext"),"fills"!==n.hoveron&&c("hovertemplate"),k.hasMarkers(n)&&o(r,n,a,s,c,{gradient:!0}),k.hasLines(n)&&(T(r,n,a,s,c,{backoff:!0}),b(r,n,c),c("connectgaps")),k.hasText(n)&&(c("texttemplate"),p(r,n,s,c));var u=[];(k.hasMarkers(n)||k.hasText(n))&&(c("cliponaxis"),c("marker.maxdisplayed"),u.push("points")),c("fill"),"none"!==n.fill&&(l(r,n,a,c),k.hasLines(n)||b(r,n,c)),"tonext"!==n.fill&&"toself"!==n.fill||u.push("fills"),c("hoveron",u.join("+")||"points"),S.coerceSelectionMarkerOpacity(n,c)}else n.visible=!1}},49504:function(ie,F,e){"use strict";var S=e(54460);ie.exports=function(k,o,T){var b={},p=T[o.subplot]._subplot;return b.realLabel=S.tickText(p.radialAxis,k.real,!0).text,b.imagLabel=S.tickText(p.angularAxis,k.imag,!0).text,b}},25292:function(ie,F,e){"use strict";var S=e(98723);function k(o,T,b,p){var l=b.radialAxis,t=b.angularAxis;l._hovertitle="real",t._hovertitle="imag";var i={};i[T.subplot]={_subplot:b};var r=T._module.formatLabels(o,T,i);p.realLabel=r.realLabel,p.imagLabel=r.imagLabel;var a=[];function s(h,u){a.push(h._hovertitle+": "+u)}if(!T.hovertemplate){var c=(o.hi||T.hoverinfo).split("+");-1!==c.indexOf("all")&&(c=["real","imag","text"]),-1!==c.indexOf("real")&&s(l,p.realLabel),-1!==c.indexOf("imag")&&s(t,p.imagLabel),-1!==c.indexOf("text")&&p.text&&(a.push(p.text),delete p.text),p.extraText=a.join("<br>")}}ie.exports={hoverPoints:function(o,T,b,p){var l=S(o,T,b,p);if(l&&!1!==l[0].index){var t=l[0];if(void 0===t.index)return l;var i=o.subplot,r=t.cd[t.index],n=t.trace;if(i.isPtInside(r))return t.xLabelVal=void 0,t.yLabelVal=void 0,k(r,n,i,t),t.hovertemplate=n.hovertemplate,l}},makeHoverPointText:k}},95443:function(ie,F,e){"use strict";ie.exports={moduleType:"trace",name:"scattersmith",basePlotModule:e(47788),categories:["smith","symbols","showLegend","scatter-like"],attributes:e(69496),supplyDefaults:e(76716),colorbar:e(5528),formatLabels:e(49504),calc:e(47507),plot:e(34927),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(25292).hoverPoints,selectPoints:e(91560),meta:{}}},34927:function(ie,F,e){"use strict";var S=e(96504),k=e(39032).BADNUM,o=e(36416).smith;ie.exports=function(T,b,p){for(var l=b.layers.frontplot.select("g.scatterlayer"),t=b.xaxis,i=b.yaxis,r={xaxis:t,yaxis:i,plot:b.framework,layerClipId:b._hasClipOnAxisFalse?b.clipIds.forTraces:null},n=0;n<p.length;n++)for(var a=p[n],s=0;s<a.length;s++){0===s&&(a[0].trace._xA=t,a[0].trace._yA=i);var c=a[s],h=c.real;if(h===k)c.x=c.y=k;else{var u=o([h,c.imag]);c.x=u[0],c.y=u[1]}}S(T,r,p,l)}},5896:function(ie,F,e){"use strict";var S=e(21776).Ks,k=e(21776).Gw,o=e(98304),T=e(52904),b=e(45464),p=e(49084),l=e(98192).u,t=e(92880).extendFlat,i=T.marker,r=T.line,n=i.line;ie.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:t({},T.mode,{dflt:"markers"}),text:t({},T.text,{}),texttemplate:k({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:t({},T.hovertext,{}),line:{color:r.color,width:r.width,dash:l,backoff:r.backoff,shape:t({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:T.connectgaps,cliponaxis:T.cliponaxis,fill:t({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:o(),marker:t({symbol:i.symbol,opacity:i.opacity,angle:i.angle,angleref:i.angleref,standoff:i.standoff,maxdisplayed:i.maxdisplayed,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,line:t({width:n.width,editType:"calc"},p("marker.line")),gradient:i.gradient,editType:"calc"},p("marker")),textfont:T.textfont,textposition:T.textposition,selected:T.selected,unselected:T.unselected,hoverinfo:t({},b.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:T.hoveron,hovertemplate:S()}},34335:function(ie,F,e){"use strict";var S=e(38248),k=e(90136),o=e(20148),T=e(4500),b=e(16356).calcMarkerSize,p=["a","b","c"],l={a:["b","c"],b:["a","c"],c:["a","b"]};ie.exports=function(t,i){var r,n,a,s,c,h,u=t._fullLayout[i.subplot].sum,y=i.sum||u,d={a:i.a,b:i.b,c:i.c};for(r=0;r<p.length;r++)if(!d[a=p[r]]){for(c=d[l[a][0]],h=d[l[a][1]],s=new Array(c.length),n=0;n<c.length;n++)s[n]=y-c[n]-h[n];d[a]=s}var m,g,x,v,C=i._length,w=new Array(C);for(r=0;r<C;r++)g=d.b[r],x=d.c[r],S(m=d.a[r])&&S(g)&&S(x)?(1!=(v=u/((m=+m)+(g=+g)+(x=+x)))&&(m*=v,g*=v,x*=v),w[r]={x:x-g,y:m,a:m,b:g,c:x}):w[r]={x:!1,y:!1};return b(i,C),k(t,i),o(w,i),T(w,i),w}},84256:function(ie,F,e){"use strict";var S=e(3400),k=e(88200),o=e(43028),T=e(74428),b=e(66828),p=e(11731),l=e(124),t=e(70840),i=e(5896);ie.exports=function(r,n,a,s){function c(g,x){return S.coerce(r,n,i,g,x)}var h,u=c("a"),y=c("b"),d=c("c");if(u?(h=u.length,y?(h=Math.min(h,y.length),d&&(h=Math.min(h,d.length))):h=d?Math.min(h,d.length):0):y&&d&&(h=Math.min(y.length,d.length)),h){n._length=h,c("sum"),c("text"),c("hovertext"),"fills"!==n.hoveron&&c("hovertemplate"),c("mode",h<k.PTS_LINESONLY?"lines+markers":"lines"),o.hasMarkers(n)&&T(r,n,a,s,c,{gradient:!0}),o.hasLines(n)&&(b(r,n,a,s,c,{backoff:!0}),p(r,n,c),c("connectgaps")),o.hasText(n)&&(c("texttemplate"),l(r,n,s,c));var m=[];(o.hasMarkers(n)||o.hasText(n))&&(c("cliponaxis"),c("marker.maxdisplayed"),m.push("points")),c("fill"),"none"!==n.fill&&(t(r,n,a,c),o.hasLines(n)||p(r,n,c)),"tonext"!==n.fill&&"toself"!==n.fill||m.push("fills"),c("hoveron",m.join("+")||"points"),S.coerceSelectionMarkerOpacity(n,c)}else n.visible=!1}},97476:function(ie){"use strict";ie.exports=function(F,e,S,k,o){if(e.xa&&(F.xaxis=e.xa),e.ya&&(F.yaxis=e.ya),k[o]){var T=k[o];F.a=T.a,F.b=T.b,F.c=T.c}else F.a=e.a,F.b=e.b,F.c=e.c;return F}},90404:function(ie,F,e){"use strict";var S=e(54460);ie.exports=function(k,o,T){var b={},p=T[o.subplot]._subplot;return b.aLabel=S.tickText(p.aaxis,k.a,!0).text,b.bLabel=S.tickText(p.baxis,k.b,!0).text,b.cLabel=S.tickText(p.caxis,k.c,!0).text,b}},26596:function(ie,F,e){"use strict";var S=e(98723);ie.exports=function(k,o,T,b){var p=S(k,o,T,b);if(p&&!1!==p[0].index){var l=p[0];if(void 0===l.index){var i=k.xa._length,r=i*(1-l.y0/k.ya._length)/2,n=i-r;return l.x0=Math.max(Math.min(l.x0,n),r),l.x1=Math.max(Math.min(l.x1,n),r),p}var a=l.cd[l.index],s=l.trace,c=l.subplot;l.a=a.a,l.b=a.b,l.c=a.c,l.xLabelVal=void 0,l.yLabelVal=void 0;var h={};h[s.subplot]={_subplot:c};var u=s._module.formatLabels(a,s,h);l.aLabel=u.aLabel,l.bLabel=u.bLabel,l.cLabel=u.cLabel;var d=[];if(!s.hovertemplate){var m=(a.hi||s.hoverinfo).split("+");-1!==m.indexOf("all")&&(m=["a","b","c"]),-1!==m.indexOf("a")&&g(c.aaxis,l.aLabel),-1!==m.indexOf("b")&&g(c.baxis,l.bLabel),-1!==m.indexOf("c")&&g(c.caxis,l.cLabel)}return l.extraText=d.join("<br>"),l.hovertemplate=s.hovertemplate,p}function g(x,v){d.push(x._hovertitle+": "+v)}}},34864:function(ie,F,e){"use strict";ie.exports={attributes:e(5896),supplyDefaults:e(84256),colorbar:e(5528),formatLabels:e(90404),calc:e(34335),plot:e(88776),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(26596),selectPoints:e(91560),eventData:e(97476),moduleType:"trace",name:"scatterternary",basePlotModule:e(19352),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},88776:function(ie,F,e){"use strict";var S=e(96504);ie.exports=function(k,o,T){var b=o.plotContainer;b.select(".scatterlayer").selectAll("*").remove();for(var p=o.xaxis,l=o.yaxis,t={xaxis:p,yaxis:l,plot:b,layerClipId:o._hasClipOnAxisFalse?o.clipIdRelative:null},i=o.layers.frontplot.select("g.scatterlayer"),r=0;r<T.length;r++){var n=T[r];n.length&&(n[0].trace._xA=p,n[0].trace._yA=l)}S(k,t,T,i)}},44524:function(ie,F,e){"use strict";var S=e(52904),k=e(49084),o=e(29736).axisHoverFormat,T=e(21776).Ks,b=e(2876),p=e(33816).idRegex,l=e(31780).templatedArray,t=e(92880).extendFlat,i=S.marker,r=i.line,n=t(k("marker.line",{editTypeOverride:"calc"}),{width:t({},r.width,{editType:"calc"}),editType:"calc"}),a=t(k("marker"),{symbol:i.symbol,angle:i.angle,size:t({},i.size,{editType:"markerSize"}),sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,opacity:i.opacity,colorbar:i.colorbar,line:n,editType:"calc"});function s(c){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:p[c],editType:"plot"}}}a.color.editType=a.cmin.editType=a.cmax.editType="style",ie.exports={dimensions:l("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:t({},b.text,{}),hovertext:t({},b.hovertext,{}),hovertemplate:T(),xhoverformat:o("x"),yhoverformat:o("y"),marker:a,xaxes:s("x"),yaxes:s("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:b.selected.marker,editType:"calc"},unselected:{marker:b.unselected.marker,editType:"calc"},opacity:b.opacity}},28888:function(ie,F,e){"use strict";var S=e(24040),k=e(12704);ie.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:e(44524),supplyDefaults:e(69544),colorbar:e(5528),calc:e(66821),plot:e(54840),hoverPoints:e(72248).hoverPoints,selectPoints:e(62500),editStyle:e(83156),meta:{}},S.register(k)},99332:function(ie,F,e){"use strict";var S=e(13472),k=e(24040),o=e(5048),T=e(84888)._M,b=e(57952),p=e(79811).getFromId,l=e(54460).shouldShowZeroLine,t="splom",i={};function r(a,s,c){for(var u=s._visibleDims,y=c.viewOpts.ranges=new Array(c.matrixOptions.data.length),d=0;d<u.length;d++){var m=u[d],g=y[d]=new Array(4),x=p(a,s._diag[m][0]);x&&(g[0]=x.r2l(x.range[0]),g[2]=x.r2l(x.range[1]));var v=p(a,s._diag[m][1]);v&&(g[1]=v.r2l(v.range[0]),g[3]=v.r2l(v.range[1]))}c.selectBatch.length||c.unselectBatch.length?c.matrix.update({ranges:y},{ranges:y}):c.matrix.update({ranges:y})}function n(a){var s=a._fullLayout,c=s._glcanvas.data()[0].regl,h=s._splomGrid;h||(h=s._splomGrid=S(c)),h.update(function(u){var y,d=u._context.plotGlPixelRatio,m=u._fullLayout,g=m._size,x=[0,0,m.width*d,m.height*d],v={};function _(W,ae,re,ne,Q,$){re*=d,ne*=d,Q*=d,$*=d;var X=ae[W+"color"],oe=ae[W+"width"],fe=String(X+oe);fe in v?v[fe].data.push(NaN,NaN,re,ne,Q,$):v[fe]={data:[re,ne,Q,$],join:"rect",thickness:oe*d,color:X,viewport:x,range:x,overlay:!1}}for(y in m._splomSubplots){var f,C,w=m._plots[y],E=w.xaxis,P=w.yaxis,L=E._gridVals,O=P._gridVals,z=E._offset,V=E._length,R=P._length,U=g.b+P.domain[0]*g.h,Z=-P._m,N=-Z*P.r2l(P.range[0],P.calendar);if(E.showgrid)for(y=0;y<L.length;y++)f=z+E.l2p(L[y].x),_("grid",E,f,U,f,U+R);if(P.showgrid)for(y=0;y<O.length;y++)_("grid",P,z,C=U+N+Z*O[y].x,z+V,C);l(u,E,P)&&(f=z+E.l2p(0),_("zeroline",E,f,U,f,U+R)),l(u,P,E)&&_("zeroline",P,z,C=U+N+0,z+V,C)}var G=[];for(y in v)G.push(v[y]);return G}(a))}ie.exports={name:t,attr:b.attr,attrRegex:b.attrRegex,layoutAttributes:b.layoutAttributes,supplyLayoutDefaults:b.supplyLayoutDefaults,drawFramework:b.drawFramework,plot:function(a){var s=a._fullLayout,c=k.getModule(t),h=T(a.calcdata,c)[0];o(a,["ANGLE_instanced_arrays","OES_element_index_uint"],i)&&(s._hasOnlyLargeSploms&&n(a),c.plot(a,{},h))},drag:function(a){var s=a.calcdata,c=a._fullLayout;c._hasOnlyLargeSploms&&n(a);for(var h=0;h<s.length;h++){var u=s[h][0].trace,y=c._splomScenes[u.uid];"splom"===u.type&&y&&y.matrix&&r(a,u,y)}},updateGrid:n,clean:function(a,s,c,h){var u,y={};if(h._splomScenes){for(u=0;u<a.length;u++){var d=a[u];"splom"===d.type&&(y[d.uid]=1)}for(u=0;u<c.length;u++){var m=c[u];if(!y[m.uid]){var g=h._splomScenes[m.uid];g&&g.destroy&&g.destroy(),h._splomScenes[m.uid]=null,delete h._splomScenes[m.uid]}}}0===Object.keys(h._splomScenes||{}).length&&delete h._splomScenes,h._splomGrid&&!s._hasOnlyLargeSploms&&h._hasOnlyLargeSploms&&(h._splomGrid.destroy(),h._splomGrid=null,delete h._splomGrid),b.clean(a,s,c,h)},updateFx:b.updateFx,toSVG:b.toSVG,reglPrecompiled:i}},66821:function(ie,F,e){"use strict";var S=e(3400),k=e(79811),o=e(16356).calcMarkerSize,T=e(16356).calcAxisExpansion,b=e(90136),p=e(84236).markerSelection,l=e(84236).markerStyle,t=e(72308),i=e(39032).BADNUM,r=e(67072).TOO_MANY_POINTS;ie.exports=function(n,a){var s,c,h,u,y,d,m=a.dimensions,g=a._length,x={},v=x.cdata=[],_=x.data=[],f=a._visibleDims=[];function C(E,P){for(var L=E.makeCalcdata({v:P.values,vcalendar:a.calendar},"v"),O=0;O<L.length;O++)L[O]=L[O]===i?NaN:L[O];v.push(L),_.push("log"===E.type?S.simpleMap(L,E.c2l):L)}for(s=0;s<m.length;s++)if((h=m[s]).visible){if(u=k.getFromId(n,a._diag[s][0]),y=k.getFromId(n,a._diag[s][1]),u&&y&&u.type!==y.type){S.log("Skipping splom dimension "+s+" with conflicting axis types");continue}u?(C(u,h),y&&"category"===y.type&&(y._categories=u._categories.slice())):C(y,h),f.push(s)}for(b(n,a),S.extendFlat(x,l(n,a)),d=v.length*g>r?x.sizeAvg||Math.max(x.size,3):o(a,g),c=0;c<f.length;c++)h=m[s=f[c]],u=k.getFromId(n,a._diag[s][0])||{},y=k.getFromId(n,a._diag[s][1])||{},T(n,a,u,y,v[c],v[c],d);var w=t(n,a);return w.matrix||(w.matrix=!0),w.matrixOptions=x,w.selectedOptions=p(n,a,a.selected),w.unselectedOptions=p(n,a,a.unselected),[{x:!1,y:!1,t:{},trace:a}]}},69544:function(ie,F,e){"use strict";var S=e(3400),k=e(51272),o=e(44524),T=e(43028),b=e(74428),p=e(26284),l=e(80088).isOpenSymbol;function t(i,r){function n(s,c){return S.coerce(i,r,o.dimensions,s,c)}n("label");var a=n("values");a&&a.length?n("visible"):r.visible=!1,n("axis.type"),n("axis.matches")}ie.exports=function(i,r,n,a){function s(g,x){return S.coerce(i,r,o,g,x)}var c=k(i,r,{name:"dimensions",handleItemDefaults:t}),h=s("diagonal.visible"),u=s("showupperhalf"),y=s("showlowerhalf");if(p(r,c,"values")&&(h||u||y)){s("text"),s("hovertext"),s("hovertemplate"),s("xhoverformat"),s("yhoverformat"),b(i,r,n,a,s,{noAngleRef:!0,noStandOff:!0});var d=l(r.marker.symbol),m=T.isBubble(r);s("marker.line.width",d||m?1:0),function(g,x,v,_){var f,C,w=x.dimensions,E=w.length,P=x.showupperhalf,L=x.showlowerhalf,O=x.diagonal.visible,z=new Array(E),V=new Array(E);for(f=0;f<E;f++){var R=f?f+1:"";z[f]="x"+R,V[f]="y"+R}var U=_("xaxes",z),Z=_("yaxes",V),N=x._diag=new Array(E);x._xaxes={},x._yaxes={};var G=[],W=[];function ae(ge,we,Te,xe){if(ge){var ye=ge.charAt(0),_e=v._splomAxes[ye];if(x["_"+ye+"axes"][ge]=1,xe.push(ge),!(ge in _e)){var Ie=_e[ge]={};Te&&(Ie.label=Te.label||"",Te.visible&&Te.axis&&(Te.axis.type&&(Ie.type=Te.axis.type),Te.axis.matches&&(Ie.matches=we)))}}}var re=!O&&!L,ne=!O&&!P;for(x._axesDim={},f=0;f<E;f++){var Q=w[f],$=0===f,X=f===E-1,oe=$&&re||X&&ne?void 0:U[f],fe=$&&ne||X&&re?void 0:Z[f];ae(oe,fe,Q,G),ae(fe,oe,Q,W),N[f]=[oe,fe],x._axesDim[oe]=f,x._axesDim[fe]=f}for(f=0;f<G.length;f++)for(C=0;C<W.length;C++){var ue=G[f]+W[C];f>C&&P||f<C&&L?v._splomSubplots[ue]=1:f!==C||!O&&L&&P||(v._splomSubplots[ue]=1)}(!L||!O&&P&&L)&&(v._splomGridDflt.xside="bottom",v._splomGridDflt.yside="left")}(0,r,a,s),S.coerceSelectionMarkerOpacity(r,s)}else r.visible=!1}},83156:function(ie,F,e){"use strict";var S=e(3400),k=e(90136),o=e(84236).markerStyle;ie.exports=function(T,b){var p=b.trace,l=T._fullLayout._splomScenes[p.uid];if(l){k(T,p),S.extendFlat(l.matrixOptions,o(T,p));var t=S.extendFlat({},l.matrixOptions,l.viewOpts);l.matrix.update(t,null)}}},50328:function(ie,F){"use strict";F.getDimIndex=function(e,S){for(var k=S._id,o={x:0,y:1}[k.charAt(0)],T=e._visibleDims,b=0;b<T.length;b++)if(e._diag[T[b]][o]===k)return b;return!1}},72248:function(ie,F,e){"use strict";var S=e(50328),k=e(41272).calcHover,o=e(54460).getFromId,T=e(92880).extendFlat;function b(p,l,t,i){var r=p.cd[0].trace,n=p.scene.matrixOptions.cdata,a=p.xa,s=p.ya,c=a.c2p(l),h=s.c2p(t),u=p.distance,y=S.getDimIndex(r,a),d=S.getDimIndex(r,s);if(!1===y||!1===d)return[p];for(var m,g,x=n[y],v=n[d],_=u,f=0;f<x.length;f++)if(!i||f===p.index){var w=v[f],E=a.c2p(x[f])-c,P=s.c2p(w)-h,L=Math.sqrt(E*E+P*P);(i||L<_)&&(_=g=L,m=f)}return p.index=m,p.distance=_,p.dxy=g,void 0===m?[p]:[k(p,x,v,r)]}ie.exports={hoverPoints:function(p,l,t,i,r){r||(r={});var n="x"===(i||"").charAt(0),a="y"===(i||"").charAt(0),s=b(p,l,t);if((n||a)&&"axis"===r.hoversubplots&&s[0])for(var c=(n?p.xa:p.ya)._subplotsWith,h=r.gd,u=T({},p),y=0;y<c.length;y++){var d=c[y];if(d!==p.xa._id+p.ya._id){a?u.xa=o(h,d,"x"):u.ya=o(h,d,"y");var m=b(u,l,t,n||a);s=s.concat(m)}}return s}}},97924:function(ie,F,e){"use strict";var S=e(28888);S.basePlotModule=e(99332),ie.exports=S},54840:function(ie,F,e){"use strict";var S=e(55795),k=e(3400),o=e(79811),T=e(72760).selectMode;function b(p,l){var t,i,r,n,a,s=p._fullLayout,c=s._size,h=l.trace,u=l.t,y=s._splomScenes[h.uid],d=y.matrixOptions,m=d.cdata,g=s._glcanvas.data()[0].regl,x=s.dragmode;if(0!==m.length){d.lower=h.showupperhalf,d.upper=h.showlowerhalf,d.diagonal=h.diagonal.visible;var v=h._visibleDims,_=m.length,f=y.viewOpts={};for(f.ranges=new Array(_),f.domains=new Array(_),a=0;a<v.length;a++){r=v[a];var C=f.ranges[a]=new Array(4),w=f.domains[a]=new Array(4);(t=o.getFromId(p,h._diag[r][0]))&&(C[0]=t._rl[0],C[2]=t._rl[1],w[0]=t.domain[0],w[2]=t.domain[1]),(i=o.getFromId(p,h._diag[r][1]))&&(C[1]=i._rl[0],C[3]=i._rl[1],w[1]=i.domain[0],w[3]=i.domain[1])}var E=p._context.plotGlPixelRatio,P=c.l*E,L=c.b*E;f.viewport=[P,L,c.w*E+P,c.h*E+L],!0===y.matrix&&(y.matrix=S(g));var V=s.clickmode.indexOf("select")>-1,R=!0;if(T(x)||h.selectedpoints||V){var U=h._length;if(h.selectedpoints){y.selectBatch=h.selectedpoints;var Z=h.selectedpoints,N={};for(r=0;r<Z.length;r++)N[Z[r]]=!0;var G=[];for(r=0;r<U;r++)N[r]||G.push(r);y.unselectBatch=G}var W=u.xpx=new Array(_),ae=u.ypx=new Array(_);for(a=0;a<v.length;a++){if(t=o.getFromId(p,h._diag[r=v[a]][0]))for(W[a]=new Array(U),n=0;n<U;n++)W[a][n]=t.c2p(m[a][n]);if(i=o.getFromId(p,h._diag[r][1]))for(ae[a]=new Array(U),n=0;n<U;n++)ae[a][n]=i.c2p(m[a][n])}if(y.selectBatch.length||y.unselectBatch.length){var re=k.extendFlat({},d,y.unselectedOptions,f),ne=k.extendFlat({},d,y.selectedOptions,f);y.matrix.update(re,ne),R=!1}}else u.xpx=u.ypx=null;if(R){var Q=k.extendFlat({},d,f);y.matrix.update(Q,null)}}}ie.exports=function(p,l,t){if(t.length)for(var i=0;i<t.length;i++)b(p,t[i][0])}},72308:function(ie,F,e){"use strict";var S=e(3400);ie.exports=function(k,o){var T=k._fullLayout,b=o.uid,p=T._splomScenes;p||(p=T._splomScenes={});var l={dirty:!0,selectBatch:[],unselectBatch:[]},t=p[o.uid];return t||((t=p[b]=S.extendFlat({},l,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){t.matrix&&t.matrix.draw&&(t.selectBatch.length||t.unselectBatch.length?t.matrix.draw(t.unselectBatch,t.selectBatch):t.matrix.draw()),t.dirty=!1},t.destroy=function(){t.matrix&&t.matrix.destroy&&t.matrix.destroy(),t.matrixOptions=null,t.selectBatch=null,t.unselectBatch=null,t=null}),t.dirty||S.extendFlat(t,l),t}},62500:function(ie,F,e){"use strict";var S=e(3400),k=S.pushUnique,o=e(43028),T=e(50328);ie.exports=function(b,p){var l=b.cd,t=l[0].trace,i=l[0].t,r=b.scene,n=r.matrixOptions.cdata,a=b.xaxis,s=b.yaxis,c=[];if(!r)return c;var h=!o.hasMarkers(t)&&!o.hasText(t);if(!0!==t.visible||h)return c;var u=T.getDimIndex(t,a),y=T.getDimIndex(t,s);if(!1===u||!1===y)return c;var d=i.xpx[u],m=i.ypx[y],g=n[u],x=n[y],v=(b.scene.selectBatch||[]).slice(),_=[];if(!1!==p&&!p.degenerate)for(var f=0;f<g.length;f++)p.contains([d[f],m[f]],null,f,b)?(c.push({pointNumber:f,x:g[f],y:x[f]}),k(v,f)):-1!==v.indexOf(f)?k(v,f):_.push(f);var C=r.matrixOptions;return v.length||_.length?r.selectBatch.length||r.unselectBatch.length||r.matrix.update(r.unselectedOptions,S.extendFlat({},C,r.selectedOptions,r.viewOpts)):r.matrix.update(C,null),r.selectBatch=v,r.unselectBatch=_,c}},90167:function(ie,F,e){"use strict";var S=e(49084),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(52948),b=e(45464),p=e(92880).extendFlat,l={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:o({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:k("u",1),vhoverformat:k("v",1),whoverformat:k("w",1),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),showlegend:p({},b.showlegend,{dflt:!1})};p(l,S("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){l[t]=T[t]}),l.hoverinfo=p({},b.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),l.transforms=void 0,ie.exports=l},3832:function(ie,F,e){"use strict";var S=e(3400),k=e(47128);function o(p){var l,t,i,r,n,a,s,c,h,u,y,d,m=p._x,g=p._y,x=p._z,v=p._len,_=-1/0,f=1/0,C=-1/0,w=1/0,E=-1/0,P=1/0,L="";for(v&&(s=m[0],h=g[0],y=x[0]),v>1&&(c=m[v-1],u=g[v-1],d=x[v-1]),l=0;l<v;l++)_=Math.max(_,m[l]),f=Math.min(f,m[l]),C=Math.max(C,g[l]),w=Math.min(w,g[l]),E=Math.max(E,x[l]),P=Math.min(P,x[l]),r||m[l]===s||(r=!0,L+="x"),n||g[l]===h||(n=!0,L+="y"),a||x[l]===y||(a=!0,L+="z");r||(L+="x"),n||(L+="y"),a||(L+="z");var O=T(p._x),z=T(p._y),V=T(p._z);L=(L=(L=L.replace("x",(s>c?"-":"+")+"x")).replace("y",(h>u?"-":"+")+"y")).replace("z",(y>d?"-":"+")+"z");var R=function(){v=0,O=[],z=[],V=[]};(!v||v<O.length*z.length*V.length)&&R();var U=function(ye){return"x"===ye?m:"y"===ye?g:x},Z=function(ye){return"x"===ye?O:"y"===ye?z:V},N=function(ye){return ye[v-1]<ye[0]?-1:1},G=U(L[1]),W=U(L[3]),ae=U(L[5]),re=Z(L[1]).length,ne=Z(L[3]).length,Q=Z(L[5]).length,$=!1,X=function(ye,_e,Ie){return re*(ne*ye+_e)+Ie},oe=N(U(L[1])),fe=N(U(L[3])),ue=N(U(L[5]));for(l=0;l<Q-1;l++){for(t=0;t<ne-1;t++){for(i=0;i<re-1;i++){var ge=X(l,t,i),we=X(l,t,i+1),Te=X(l,t+1,i),xe=X(l+1,t,i);if(G[ge]*oe<G[we]*oe&&W[ge]*fe<W[Te]*fe&&ae[ge]*ue<ae[xe]*ue||($=!0),$)break}if($)break}if($)break}return $&&(S.warn("Encountered arbitrary coordinates! Unable to input data grid."),R()),{xMin:f,yMin:w,zMin:P,xMax:_,yMax:C,zMax:E,Xs:O,Ys:z,Zs:V,len:v,fill:L}}function T(p){return S.distinctVals(p).vals}function b(p,l){if(void 0===l&&(l=p.length),S.isTypedArray(p))return p.subarray(0,l);for(var t=[],i=0;i<l;i++)t[i]=+p[i];return t}ie.exports={calc:function(p,l){l._len=Math.min(l.u.length,l.v.length,l.w.length,l.x.length,l.y.length,l.z.length),l._u=b(l.u,l._len),l._v=b(l.v,l._len),l._w=b(l.w,l._len),l._x=b(l.x,l._len),l._y=b(l.y,l._len),l._z=b(l.z,l._len);var t=o(l);l._gridFill=t.fill,l._Xs=t.Xs,l._Ys=t.Ys,l._Zs=t.Zs,l._len=t.len;var i,r,n,a=0;l.starts&&(i=b(l.starts.x||[]),r=b(l.starts.y||[]),n=b(l.starts.z||[]),a=Math.min(i.length,r.length,n.length)),l._startsX=i||[],l._startsY=r||[],l._startsZ=n||[];var s,c=0,h=1/0;for(s=0;s<l._len;s++){var u=l._u[s],y=l._v[s],d=l._w[s],m=Math.sqrt(u*u+y*y+d*d);c=Math.max(c,m),h=Math.min(h,m)}for(k(p,l,{vals:[h,c],containerStr:"",cLetter:"c"}),s=0;s<a;s++){var g=i[s];t.xMax=Math.max(t.xMax,g),t.xMin=Math.min(t.xMin,g);var x=r[s];t.yMax=Math.max(t.yMax,x),t.yMin=Math.min(t.yMin,x);var v=n[s];t.zMax=Math.max(t.zMax,v),t.zMin=Math.min(t.zMin,v)}l._slen=a,l._normMax=c,l._xbnds=[t.xMin,t.xMax],l._ybnds=[t.yMin,t.yMax],l._zbnds=[t.zMin,t.zMax]},filter:b,processGrid:o}},25668:function(ie,F,e){"use strict";var S=e(67792).gl_streamtube3d,k=S.createTubeMesh,o=e(3400),T=e(33040).parseColorScale,b=e(8932).extractOpts,p=e(52094),l={xaxis:0,yaxis:1,zaxis:2};function t(s,c){this.scene=s,this.uid=c,this.mesh=null,this.data=null}var i=t.prototype;function r(s){var c=s.length;return c>2?s.slice(1,c-1):2===c?[(s[0]+s[1])/2]:s}function n(s){var c=s.length;return 1===c?[.5,.5]:[s[1]-s[0],s[c-1]-s[c-2]]}function a(s,c){var h=s.fullSceneLayout,u=s.dataScale,y=c._len,d={};function m(re,ne){var Q=h[ne],$=u[l[ne]];return o.simpleMap(re,function(X){return Q.d2l(X)*$})}if(d.vectors=p(m(c._u,"xaxis"),m(c._v,"yaxis"),m(c._w,"zaxis"),y),!y)return{positions:[],cells:[]};var g=m(c._Xs,"xaxis"),x=m(c._Ys,"yaxis"),v=m(c._Zs,"zaxis");if(d.meshgrid=[g,x,v],d.gridFill=c._gridFill,c._slen)d.startingPositions=p(m(c._startsX,"xaxis"),m(c._startsY,"yaxis"),m(c._startsZ,"zaxis"));else{for(var _=x[0],f=r(g),C=r(v),w=new Array(f.length*C.length),E=0,P=0;P<f.length;P++)for(var L=0;L<C.length;L++)w[E++]=[f[P],_,C[L]];d.startingPositions=w}d.colormap=T(c),d.tubeSize=c.sizeref,d.maxLength=c.maxdisplayed;var O=m(c._xbnds,"xaxis"),z=m(c._ybnds,"yaxis"),V=m(c._zbnds,"zaxis"),R=n(g),U=n(x),Z=n(v),G=S(d,[[O[0]-R[0],z[0]-U[0],V[0]-Z[0]],[O[1]+R[1],z[1]+U[1],V[1]+Z[1]]]),W=b(c);G.vertexIntensityBounds=[W.min/c._normMax,W.max/c._normMax];var ae=c.lightposition;return G.lightPosition=[ae.x,ae.y,ae.z],G.ambient=c.lighting.ambient,G.diffuse=c.lighting.diffuse,G.specular=c.lighting.specular,G.roughness=c.lighting.roughness,G.fresnel=c.lighting.fresnel,G.opacity=c.opacity,c._pad=G.tubeScale*c.sizeref*2,G}i.handlePick=function(s){var c=this.scene.fullSceneLayout,h=this.scene.dataScale;function u(m,g){var v=h[l[g]];return c[g].l2c(m)/v}if(s.object===this.mesh){var y=s.data.position,d=s.data.velocity;return s.traceCoordinate=[u(y[0],"xaxis"),u(y[1],"yaxis"),u(y[2],"zaxis"),u(d[0],"xaxis"),u(d[1],"yaxis"),u(d[2],"zaxis"),s.data.intensity*this.data._normMax,s.data.divergence],s.textLabel=this.data.hovertext||this.data.text,!0}},i.update=function(s){this.data=s;var c=a(this.scene,s);this.mesh.update(c)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ie.exports=function(s,c){var h=s.glplot.gl,u=a(s,c),y=k(h,u),d=new t(s,c.uid);return d.mesh=y,d.data=c,y._trace=d,s.glplot.add(y),d}},54304:function(ie,F,e){"use strict";var S=e(3400),k=e(27260),o=e(90167);ie.exports=function(T,b,p,l){function t(h,u){return S.coerce(T,b,o,h,u)}var i=t("u"),r=t("v"),n=t("w"),a=t("x"),s=t("y"),c=t("z");i&&i.length&&r&&r.length&&n&&n.length&&a&&a.length&&s&&s.length&&c&&c.length?(t("starts.x"),t("starts.y"),t("starts.z"),t("maxdisplayed"),t("sizeref"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),k(T,b,l,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),b._length=null):b.visible=!1}},15436:function(ie,F,e){"use strict";ie.exports={moduleType:"trace",name:"streamtube",basePlotModule:e(12536),categories:["gl3d","showLegend"],attributes:e(90167),supplyDefaults:e(54304),colorbar:{min:"cmin",max:"cmax"},calc:e(3832).calc,plot:e(25668),eventData:function(S,k){return S.tubex=S.x,S.tubey=S.y,S.tubez=S.z,S.tubeu=k.traceCoordinate[3],S.tubev=k.traceCoordinate[4],S.tubew=k.traceCoordinate[5],S.norm=k.traceCoordinate[6],S.divergence=k.traceCoordinate[7],delete S.x,delete S.y,delete S.z,S},meta:{}}},424:function(ie,F,e){"use strict";var S=e(45464),k=e(21776).Ks,o=e(21776).Gw,T=e(49084),b=e(86968).u,p=e(74996),l=e(27328),t=e(92880).extendFlat,i=e(98192).c;ie.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:t({colors:{valType:"data_array",editType:"calc"},line:{color:t({},p.marker.line.color,{dflt:null}),width:t({},p.marker.line.width,{dflt:1}),editType:"calc"},pattern:i,editType:"calc"},T("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:p.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:o({editType:"plot"},{keys:l.eventDataKeys.concat(["label","value"])}),hovertext:p.hovertext,hoverinfo:t({},S.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:k({},{keys:l.eventDataKeys}),textfont:p.textfont,insidetextorientation:p.insidetextorientation,insidetextfont:p.insidetextfont,outsidetextfont:t({},p.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:p.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:b({name:"sunburst",trace:!0,editType:"calc"})}},54904:function(ie,F,e){"use strict";var S=e(7316);F.name="sunburst",F.plot=function(k,o,T,b){S.plotBasePlot(F.name,k,o,T,b)},F.clean=function(k,o,T,b){S.cleanBasePlot(F.name,k,o,T,b)}},3776:function(ie,F,e){"use strict";var S=e(74148),k=e(38248),o=e(3400),T=e(8932).makeColorScaleFuncFromTrace,b=e(45768).makePullColorFn,p=e(45768).generateExtendedColors,l=e(8932).calc,t=e(39032).ALMOST_EQUAL,i={},r={},n={};function a(s,c,h){var u=0,y=s.children;if(y){for(var d=y.length,m=0;m<d;m++)u+=a(y[m],c,h);h.branches&&u++}else h.leaves&&u++;return s.value=s.data.data.value=u,c._values||(c._values=[]),c._values[s.data.data.i]=u,u}F.calc=function(s,c){var h,u,y,d,m,g,x=s._fullLayout,v=c.ids,_=o.isArrayOrTypedArray(v),f=c.labels,C=c.parents,w=c.values,E=o.isArrayOrTypedArray(w),P=[],L={},O={},z=function(ue){return ue||"number"==typeof ue},V=function(ue){return!E||k(w[ue])&&w[ue]>=0};_?(h=Math.min(v.length,C.length),u=function(ue){return z(v[ue])&&V(ue)},y=function(ue){return String(v[ue])}):(h=Math.min(f.length,C.length),u=function(ue){return z(f[ue])&&V(ue)},y=function(ue){return String(f[ue])}),E&&(h=Math.min(h,w.length));for(var R=0;R<h;R++)if(u(R)){var U=y(R),Z=z(C[R])?String(C[R]):"",N={i:R,id:U,pid:Z,label:z(f[R])?String(f[R]):""};E&&(N.v=+w[R]),P.push(N),m=U,L[d=Z]?L[d].push(m):L[d]=[m],O[m]=1}if(L[""]){if(L[""].length>1){for(var G=o.randstr(),W=0;W<P.length;W++)""===P[W].pid&&(P[W].pid=G);P.unshift({hasMultipleRoots:!0,id:G,pid:"",label:""})}}else{var ae,re=[];for(ae in L)O[ae]||re.push(ae);if(1!==re.length)return o.warn(["Multiple implied roots, cannot build",c.type,"hierarchy of",c.name+".","These roots include:",re.join(", ")].join(" "));P.unshift({hasImpliedRoot:!0,id:ae=re[0],pid:"",label:ae})}try{g=S.stratify().id(function(ue){return ue.id}).parentId(function(ue){return ue.pid})(P)}catch(ue){return o.warn(["Failed to build",c.type,"hierarchy of",c.name+".","Error:",ue.message].join(" "))}var ne=S.hierarchy(g),Q=!1;if(E)switch(c.branchvalues){case"remainder":ne.sum(function(ue){return ue.data.v});break;case"total":ne.each(function(ue){var ge=ue.data.data,we=ge.v;if(ue.children){var Te=ue.children.reduce(function(xe,ye){return xe+ye.data.data.v},0);if((ge.hasImpliedRoot||ge.hasMultipleRoots)&&(we=Te),we<Te*t)return Q=!0,o.warn(["Total value for node",ue.data.data.id,"of",c.name,"is smaller than the sum of its children.","\nparent value =",we,"\nchildren sum =",Te].join(" "))}ue.value=we})}else a(ne,c,{branches:-1!==c.count.indexOf("branches"),leaves:-1!==c.count.indexOf("leaves")});if(!Q){var $,X;c.sort&&ne.sort(function(ue,ge){return ge.value-ue.value});var oe=c.marker.colors||[];return c._hasColorscale?(!!oe.length||(oe=E?c.values:c._values),l(s,c,{vals:oe,containerStr:"marker",cLetter:"c"}),X=T(c.marker)):$=b(x["_"+c.type+"colormap"]),ne.each(function(ue){var ge=ue.data.data;ge.color=c._hasColorscale?X(oe[ge.i]):$(oe[ge.i],ge.id)}),P[0].hierarchy=ne,P}},F._runCrossTraceCalc=function(s,c){var h=c._fullLayout,u=c.calcdata,y=h[s+"colorway"],d=h["_"+s+"colormap"];h["extend"+s+"colors"]&&(y=p(y,"icicle"===s?n:"treemap"===s?r:i));var m,g=0;function x(f){var C=f.data.data,w=C.id;!1===C.color&&(d[w]?C.color=d[w]:f.parent?f.parent.parent?C.color=f.parent.data.data.color:(d[w]=C.color=y[g%y.length],g++):C.color=m)}for(var v=0;v<u.length;v++){var _=u[v][0];_.trace.type===s&&_.hierarchy&&(m=_.trace.root.color,_.hierarchy.each(x))}},F.crossTraceCalc=function(s){return F._runCrossTraceCalc("sunburst",s)}},27328:function(ie){"use strict";ie.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},25244:function(ie,F,e){"use strict";var S=e(3400),k=e(424),o=e(86968).Q,T=e(31508).handleText,b=e(74174).handleMarkerDefaults,p=e(8932),l=p.hasColorscale,t=p.handleDefaults;ie.exports=function(i,r,n,a){function s(m,g){return S.coerce(i,r,k,m,g)}var c=s("labels"),h=s("parents");if(c&&c.length&&h&&h.length){var u=s("values");s(u&&u.length?"branchvalues":"count"),s("level"),s("maxdepth"),b(i,r,a,s);var y=r._hasColorscale=l(i,"marker","colors")||(i.marker||{}).coloraxis;y&&t(i,r,a,s,{prefix:"marker.",cLetter:"c"}),s("leaf.opacity",y?1:.7);var d=s("text");s("texttemplate"),r.texttemplate||s("textinfo",S.isArrayOrTypedArray(d)?"text+label":"label"),s("hovertext"),s("hovertemplate"),T(i,r,a,s,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),s("insidetextorientation"),s("sort"),s("rotation"),s("root.color"),o(r,a,s),r._length=null}else r.visible=!1}},60404:function(ie,F,e){"use strict";var S=e(43616),k=e(76308);ie.exports=function(o,T,b,p,l){var t=T.data.data,r=l||t.color;if(t.i>=0){T.i=t.i;var n=b.marker;n.pattern&&n.colors&&n.pattern.shape||(n.color=r,T.color=r),S.pointStyle(o,b,p,T)}else k.fill(o,r)}},45716:function(ie,F,e){"use strict";var S=e(33428),k=e(24040),o=e(10624).appendArrayPointValue,T=e(93024),b=e(3400),p=e(95924),l=e(78176),t=e(69656).formatPieValue;function i(r,n,a){for(var s=r.data.data,c={curveNumber:n.index,pointNumber:s.i,data:n._input,fullData:n},h=0;h<a.length;h++){var u=a[h];u in r&&(c[u]=r[u])}return"parentString"in r&&!l.isHierarchyRoot(r)&&(c.parent=r.parentString),o(c,n,s.i),c}ie.exports=function(r,n,a,s,c){var h=s[0],u=h.trace,y=h.hierarchy,d="sunburst"===u.type,m="treemap"===u.type||"icicle"===u.type;"_hasHoverLabel"in u||(u._hasHoverLabel=!1),"_hasHoverEvent"in u||(u._hasHoverEvent=!1),r.on("mouseover",function(g){var x=a._fullLayout;if(!a._dragging&&!1!==x.hovermode){var v,_=a._fullData[u.index],f=g.data.data,C=f.i,w=l.isHierarchyRoot(g),E=l.getParent(y,g),P=l.getValue(g),L=function(oe){return b.castOption(_,C,oe)},O=L("hovertemplate"),z=T.castHoverinfo(_,x,C),V=x.separators;if(O||z&&"none"!==z&&"skip"!==z){var R,U;d&&(R=h.cx+g.pxmid[0]*(1-g.rInscribed),U=h.cy+g.pxmid[1]*(1-g.rInscribed)),m&&(R=g._hoverX,U=g._hoverY);var Z,N={},G=[],W=[],ae=function(oe){return-1!==G.indexOf(oe)};z&&(G="all"===z?_._module.attributes.hoverinfo.flags:z.split("+")),N.label=f.label,ae("label")&&N.label&&W.push(N.label),f.hasOwnProperty("v")&&(N.value=f.v,N.valueLabel=t(N.value,V),ae("value")&&W.push(N.valueLabel)),N.currentPath=g.currentPath=l.getPath(g.data),ae("current path")&&!w&&W.push(N.currentPath);var re=[],ne=function(){-1===re.indexOf(Z)&&(W.push(Z),re.push(Z))};N.percentParent=g.percentParent=P/l.getValue(E),N.parent=g.parentString=l.getPtLabel(E),ae("percent parent")&&(Z=l.formatPercent(N.percentParent,V)+" of "+N.parent,ne()),N.percentEntry=g.percentEntry=P/l.getValue(n),N.entry=g.entry=l.getPtLabel(n),!ae("percent entry")||w||g.onPathbar||(Z=l.formatPercent(N.percentEntry,V)+" of "+N.entry,ne()),N.percentRoot=g.percentRoot=P/l.getValue(y),N.root=g.root=l.getPtLabel(y),ae("percent root")&&!w&&(Z=l.formatPercent(N.percentRoot,V)+" of "+N.root,ne()),N.text=L("hovertext")||L("text"),ae("text")&&b.isValidTextValue(Z=N.text)&&W.push(Z),v=[i(g,_,c.eventDataKeys)];var Q={trace:_,y:U,_x0:g._x0,_x1:g._x1,_y0:g._y0,_y1:g._y1,text:W.join("<br>"),name:O||ae("name")?_.name:void 0,color:L("hoverlabel.bgcolor")||f.color,borderColor:L("hoverlabel.bordercolor"),fontFamily:L("hoverlabel.font.family"),fontSize:L("hoverlabel.font.size"),fontColor:L("hoverlabel.font.color"),fontWeight:L("hoverlabel.font.weight"),fontStyle:L("hoverlabel.font.style"),fontVariant:L("hoverlabel.font.variant"),nameLength:L("hoverlabel.namelength"),textAlign:L("hoverlabel.align"),hovertemplate:O,hovertemplateLabels:N,eventData:v};d&&(Q.x0=R-g.rInscribed*g.rpx1,Q.x1=R+g.rInscribed*g.rpx1,Q.idealAlign=g.pxmid[0]<0?"left":"right"),m&&(Q.x=R,Q.idealAlign=R<0?"left":"right");var $=[];T.loneHover(Q,{container:x._hoverlayer.node(),outerContainer:x._paper.node(),gd:a,inOut_bbox:$}),v[0].bbox=$[0],u._hasHoverLabel=!0}if(m){var X=r.select("path.surface");c.styleOne(X,g,_,a,{hovered:!0})}u._hasHoverEvent=!0,a.emit("plotly_hover",{points:v||[i(g,_,c.eventDataKeys)],event:S.event})}}),r.on("mouseout",function(g){var x=a._fullLayout,v=a._fullData[u.index],_=S.select(this).datum();if(u._hasHoverEvent&&(g.originalEvent=S.event,a.emit("plotly_unhover",{points:[i(_,v,c.eventDataKeys)],event:S.event}),u._hasHoverEvent=!1),u._hasHoverLabel&&(T.loneUnhover(x._hoverlayer.node()),u._hasHoverLabel=!1),m){var f=r.select("path.surface");c.styleOne(f,_,v,a,{hovered:!1})}}),r.on("click",function(g){var x=a._fullLayout,v=a._fullData[u.index],_=d&&(l.isHierarchyRoot(g)||l.isLeaf(g)),f=l.getPtId(g),C=l.isEntry(g)?l.findEntryWithChild(y,f):l.findEntryWithLevel(y,f),w=l.getPtId(C),E={points:[i(g,v,c.eventDataKeys)],event:S.event};_||(E.nextLevel=w);var P=p.triggerHandler(a,"plotly_"+u.type+"click",E);if(!1!==P&&x.hovermode&&(a._hoverdata=[i(g,v,c.eventDataKeys)],T.click(a,S.event)),!_&&!1!==P&&!a._dragging&&!a._transitioning){k.call("_storeDirectGUIEdit",v,x._tracePreGUI[v.uid],{level:v.level});var L={data:[{level:w}],traces:[u.index]},O={frame:{redraw:!1,duration:c.transitionTime},transition:{duration:c.transitionTime,easing:c.transitionEasing},mode:"immediate",fromcurrent:!0};T.loneUnhover(x._hoverlayer.node()),k.call("animate",a,L,O)}})}},78176:function(ie,F,e){"use strict";var S=e(3400),k=e(76308),o=e(93972),T=e(69656);function b(p){return p.data.data.pid}F.findEntryWithLevel=function(p,l){var t;return l&&p.eachAfter(function(i){if(F.getPtId(i)===l)return t=i.copy()}),t||p},F.findEntryWithChild=function(p,l){var t;return p.eachAfter(function(i){for(var r=i.children||[],n=0;n<r.length;n++)if(F.getPtId(r[n])===l)return t=i.copy()}),t||p},F.isEntry=function(p){return!p.parent},F.isLeaf=function(p){return!p.children},F.getPtId=function(p){return p.data.data.id},F.getPtLabel=function(p){return p.data.data.label},F.getValue=function(p){return p.value},F.isHierarchyRoot=function(p){return""===b(p)},F.setSliceCursor=function(p,l,t){var i=t.isTransitioning;if(!i){var r=p.datum();i=t.hideOnRoot&&F.isHierarchyRoot(r)||t.hideOnLeaves&&F.isLeaf(r)}o(p,i?null:"pointer")},F.getInsideTextFontKey=function(p,l,t,i,r){var a=t.data.data.i;return S.castOption(l,a,((r||{}).onPathbar?"pathbar.textfont":"insidetextfont")+"."+p)||S.castOption(l,a,"textfont."+p)||i.size},F.getOutsideTextFontKey=function(p,l,t,i){var r=t.data.data.i;return S.castOption(l,r,"outsidetextfont."+p)||S.castOption(l,r,"textfont."+p)||i.size},F.isOutsideText=function(p,l){return!p._hasColorscale&&F.isHierarchyRoot(l)},F.determineTextFont=function(p,l,t,i){return F.isOutsideText(p,l)?{color:F.getOutsideTextFontKey("color",r=p,n=l,a=t),family:F.getOutsideTextFontKey("family",r,n,a),size:F.getOutsideTextFontKey("size",r,n,a),weight:F.getOutsideTextFontKey("weight",r,n,a),style:F.getOutsideTextFontKey("style",r,n,a),variant:F.getOutsideTextFontKey("variant",r,n,a),textcase:F.getOutsideTextFontKey("textcase",r,n,a),lineposition:F.getOutsideTextFontKey("lineposition",r,n,a),shadow:F.getOutsideTextFontKey("shadow",r,n,a)}:function(r,n,a,s){var h=n.data.data,u=h.i,y=S.castOption(r,u,((s||{}).onPathbar?"pathbar.textfont":"insidetextfont")+".color");return!y&&r._input.textfont&&(y=S.castOption(r._input,u,"textfont.color")),{color:y||k.contrast(h.color),family:F.getInsideTextFontKey("family",r,n,a,s),size:F.getInsideTextFontKey("size",r,n,a,s),weight:F.getInsideTextFontKey("weight",r,n,a,s),style:F.getInsideTextFontKey("style",r,n,a,s),variant:F.getInsideTextFontKey("variant",r,n,a,s),textcase:F.getInsideTextFontKey("textcase",r,n,a,s),lineposition:F.getInsideTextFontKey("lineposition",r,n,a,s),shadow:F.getInsideTextFontKey("shadow",r,n,a,s)}}(p,l,t,i);var r,n,a},F.hasTransition=function(p){return!!(p&&p.duration>0)},F.getMaxDepth=function(p){return p.maxdepth>=0?p.maxdepth:1/0},F.isHeader=function(p,l){return!(F.isLeaf(p)||p.depth===l._maxDepth-1)},F.getParent=function(p,l){return F.findEntryWithLevel(p,b(l))},F.listPath=function(p,l){var t=p.parent;if(!t)return[];var i=l?[t.data[l]]:[t];return F.listPath(t,l).concat(i)},F.getPath=function(p){return F.listPath(p,"label").join("/")+"/"},F.formatValue=T.formatPieValue,F.formatPercent=function(p,l){var t=S.formatPercent(p,0);return"0%"===t&&(t=T.formatPiePercent(p,l)),t}},5621:function(ie,F,e){"use strict";ie.exports={moduleType:"trace",name:"sunburst",basePlotModule:e(54904),categories:[],animatable:!0,attributes:e(424),layoutAttributes:e(84920),supplyDefaults:e(25244),supplyLayoutDefaults:e(28732),calc:e(3776).calc,crossTraceCalc:e(3776).crossTraceCalc,plot:e(96488).plot,style:e(85676).style,colorbar:e(5528),meta:{}}},84920:function(ie){"use strict";ie.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},28732:function(ie,F,e){"use strict";var S=e(3400),k=e(84920);ie.exports=function(o,T){function b(p,l){return S.coerce(o,T,k,p,l)}b("sunburstcolorway",T.colorway),b("extendsunburstcolors")}},96488:function(ie,F,e){"use strict";var S=e(33428),k=e(74148),o=e(67756).qy,T=e(43616),b=e(3400),p=e(72736),l=e(82744),t=l.recordMinTextSize,i=l.clearMinTextSize,r=e(37820),n=e(69656).getRotationAngle,a=r.computeTransform,s=r.transformInsideText,c=e(85676).styleOne,h=e(60100).resizeText,u=e(45716),y=e(27328),d=e(78176);function m(x,v,_,f){var C=x._context.staticPlot,w=x._fullLayout,E=!w.uniformtext.mode&&d.hasTransition(f),P=S.select(_).selectAll("g.slice"),L=v[0],O=L.trace,V=d.findEntryWithLevel(L.hierarchy,O.level),R=d.getMaxDepth(O),U=w._size,Z=O.domain,G=U.h*(Z.y[1]-Z.y[0]),W=.5*Math.min(U.w*(Z.x[1]-Z.x[0]),G),ae=L.cx=U.l+U.w*(Z.x[1]+Z.x[0])/2,re=L.cy=U.t+U.h*(1-Z.y[0])-G/2;if(!V)return P.remove();var ne=null,Q={};E&&P.each(function(ce){Q[d.getPtId(ce)]={rpx0:ce.rpx0,rpx1:ce.rpx1,x0:ce.x0,x1:ce.x1,transform:ce.transform},!ne&&d.isEntry(ce)&&(ne=ce)});var ce,$=(ce=V,k.partition().size([2*Math.PI,ce.height+1])(ce)).descendants(),X=V.height+1,oe=0,fe=R;L.hasMultipleRoots&&d.isHierarchyRoot(V)&&($=$.slice(1),X-=1,oe=1,fe+=1),$=$.filter(function(ce){return ce.y1<=fe});var ue=n(O.rotation);ue&&$.forEach(function(ce){ce.x0+=ue,ce.x1+=ue});var ge=Math.min(X,R),we=function(ce){return(ce-oe)/ge*W},Te=function(ce,me){return[ce*Math.cos(me),-ce*Math.sin(me)]},xe=function(ce){return b.pathAnnulus(ce.rpx0,ce.rpx1,ce.x0,ce.x1,ae,re)},ye=function(ce){return ae+g(ce)[0]*(ce.transform.rCenter||0)+(ce.transform.x||0)},_e=function(ce){return re+g(ce)[1]*(ce.transform.rCenter||0)+(ce.transform.y||0)};(P=P.data($,d.getPtId)).enter().append("g").classed("slice",!0),E?P.exit().transition().each(function(){var ce=S.select(this);ce.select("path.surface").transition().attrTween("d",function(me){var Pe=function(Ae){var Ce,Oe=d.getPtId(Ae),Ne=Q[Oe],je=Q[d.getPtId(V)];if(je){var ve=(Ae.x1>je.x1?2*Math.PI:0)+ue;Ce=Ae.rpx1<je.rpx1?{x0:Ae.x0,x1:Ae.x1,rpx0:0,rpx1:0}:{x0:ve,x1:ve,rpx0:Ae.rpx0,rpx1:Ae.rpx1}}else{var Me,Le=d.getPtId(Ae.parent);P.each(function(it){if(d.getPtId(it)===Le)return Me=it});var Ue,ze=Me.children;ze.forEach(function(it,ft){if(d.getPtId(it)===Oe)return Ue=ft});var qe=ze.length,Ke=o(Me.x0,Me.x1);Ce={rpx0:W,rpx1:W,x0:Ke(Ue/qe),x1:Ke((Ue+1)/qe)}}return o(Ne,Ce)}(me);return function(Ae){return xe(Pe(Ae))}}),ce.select("g.slicetext").attr("opacity",0)}).remove():P.exit().remove(),P.order();var Ie=null;if(E&&ne){var De=d.getPtId(ne);P.each(function(ce){null===Ie&&d.getPtId(ce)===De&&(Ie=ce.x1)})}var be=P;function he(ce){var me=ce.parent,Pe=Q[d.getPtId(me)],Ae={};if(Pe){var Ce=me.children,Oe=Ce.indexOf(ce),Ne=Ce.length,je=o(Pe.x0,Pe.x1);Ae.x0=je(Oe/Ne),Ae.x1=je(Oe/Ne)}else Ae.x0=Ae.x1=0;return Ae}E&&(be=be.transition().each("end",function(){var ce=S.select(this);d.setSliceCursor(ce,x,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),be.each(function(ce){var ve,me=S.select(this),Pe=b.ensureSingle(me,"path","surface",function(ve){ve.style("pointer-events",C?"none":"all")});ce.rpx0=we(ce.y0),ce.rpx1=we(ce.y1),ce.xmid=(ce.x0+ce.x1)/2,ce.pxmid=Te(ce.rpx1,ce.xmid),ce.midangle=-(ce.xmid-Math.PI/2),ce.startangle=-(ce.x0-Math.PI/2),ce.stopangle=-(ce.x1-Math.PI/2),ce.halfangle=.5*Math.min(b.angleDelta(ce.x0,ce.x1)||Math.PI,Math.PI),ce.ring=1-ce.rpx0/ce.rpx1,ce.rInscribed=0===(ve=ce).rpx0&&b.isFullCircle([ve.x0,ve.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(ve.halfangle)),ve.ring/2)),E?Pe.transition().attrTween("d",function(ve){var Me=function(Le){var Ue,ze=Q[d.getPtId(Le)],qe={x0:Le.x0,x1:Le.x1,rpx0:Le.rpx0,rpx1:Le.rpx1};if(ze)Ue=ze;else if(ne)if(Le.parent)if(Ie){var Ke=(Le.x1>Ie?2*Math.PI:0)+ue;Ue={x0:Ke,x1:Ke}}else b.extendFlat(Ue={rpx0:W,rpx1:W},he(Le));else Ue={rpx0:0,rpx1:0};else Ue={x0:ue,x1:ue};return o(Ue,qe)}(ve);return function(Le){return xe(Me(Le))}}):Pe.attr("d",xe),me.call(u,V,x,v,{eventDataKeys:y.eventDataKeys,transitionTime:y.CLICK_TRANSITION_TIME,transitionEasing:y.CLICK_TRANSITION_EASING}).call(d.setSliceCursor,x,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:x._transitioning}),Pe.call(c,ce,O,x);var Ae=b.ensureSingle(me,"g","slicetext"),Ce=b.ensureSingle(Ae,"text","",function(ve){ve.attr("data-notex",1)}),Oe=b.ensureUniformFontSize(x,d.determineTextFont(O,ce,w.font));Ce.text(F.formatSliceLabel(ce,V,O,v,w)).classed("slicetext",!0).attr("text-anchor","middle").call(T.font,Oe).call(p.convertToTspans,x);var Ne=T.bBox(Ce.node());ce.transform=s(Ne,ce,L),ce.transform.targetX=ye(ce),ce.transform.targetY=_e(ce);var je=function(ve,Me){var Le=ve.transform;return a(Le,Me),Le.fontSize=Oe.size,t(O.type,Le,w),b.getTextTransform(Le)};E?Ce.transition().attrTween("transform",function(ve){var Me=function(Le){var Ue,ze=Q[d.getPtId(Le)],qe=Le.transform;if(ze)Ue=ze;else if(Ue={rpx1:Le.rpx1,transform:{textPosAngle:qe.textPosAngle,scale:0,rotate:qe.rotate,rCenter:qe.rCenter,x:qe.x,y:qe.y}},ne)if(Le.parent)if(Ie){var Ke=Le.x1>Ie?2*Math.PI:0;Ue.x0=Ue.x1=Ke}else b.extendFlat(Ue,he(Le));else Ue.x0=Ue.x1=ue;else Ue.x0=Ue.x1=ue;var it=o(Ue.transform.textPosAngle,Le.transform.textPosAngle),ft=o(Ue.rpx1,Le.rpx1),dt=o(Ue.x0,Le.x0),kt=o(Ue.x1,Le.x1),St=o(Ue.transform.scale,qe.scale),Tt=o(Ue.transform.rotate,qe.rotate),lt=0===qe.rCenter?3:0===Ue.transform.rCenter?1/3:1,ot=o(Ue.transform.rCenter,qe.rCenter);return function(Rt){var Vt=ft(Rt),Ht=dt(Rt),zt=kt(Rt),Qe=ot(Math.pow(Rt,lt)),nt={pxmid:Te(Vt,(Ht+zt)/2),rpx1:Vt,transform:{textPosAngle:it(Rt),rCenter:Qe,x:qe.x,y:qe.y}};return t(O.type,qe,w),{transform:{targetX:ye(nt),targetY:_e(nt),scale:St(Rt),rotate:Tt(Rt),rCenter:Qe}}}}(ve);return function(Le){return je(Me(Le),Ne)}}):Ce.attr("transform",je(ce,Ne))})}function g(x){return _=x.transform.textPosAngle,[(v=x.rpx1)*Math.sin(_),-v*Math.cos(_)];var v,_}F.plot=function(x,v,_,f){var C,w,E=x._fullLayout,P=E._sunburstlayer,L=!_,O=!E.uniformtext.mode&&d.hasTransition(_);i("sunburst",E),(C=P.selectAll("g.trace.sunburst").data(v,function(z){return z[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),C.order(),O?(f&&(w=f()),S.transition().duration(_.duration).ease(_.easing).each("end",function(){w&&w()}).each("interrupt",function(){w&&w()}).each(function(){P.selectAll("g.trace").each(function(z){m(x,z,this,_)})})):(C.each(function(z){m(x,z,this,_)}),E.uniformtext.mode&&h(x,E._sunburstlayer.selectAll(".trace"),"sunburst")),L&&C.exit().remove()},F.formatSliceLabel=function(x,v,_,f,C){var w=_.texttemplate,E=_.textinfo;if(!(w||E&&"none"!==E))return"";var P=C.separators,O=x.data.data,z=f[0].hierarchy,V=d.isHierarchyRoot(x),R=d.getParent(z,x),U=d.getValue(x);if(!w){var Z,N=E.split("+"),G=function(fe){return-1!==N.indexOf(fe)},W=[];if(G("label")&&O.label&&W.push(O.label),O.hasOwnProperty("v")&&G("value")&&W.push(d.formatValue(O.v,P)),!V){G("current path")&&W.push(d.getPath(x.data));var ae=0;G("percent parent")&&ae++,G("percent entry")&&ae++,G("percent root")&&ae++;var re=ae>1;if(ae){var ne,Q=function(fe){Z=d.formatPercent(ne,P),re&&(Z+=" of "+fe),W.push(Z)};G("percent parent")&&!V&&(ne=U/d.getValue(R),Q("parent")),G("percent entry")&&(ne=U/d.getValue(v),Q("entry")),G("percent root")&&(ne=U/d.getValue(z),Q("root"))}}return G("text")&&(Z=b.castOption(_,O.i,"text"),b.isValidTextValue(Z)&&W.push(Z)),W.join("<br>")}var $=b.castOption(_,O.i,"texttemplate");if(!$)return"";var X={};O.label&&(X.label=O.label),O.hasOwnProperty("v")&&(X.value=O.v,X.valueLabel=d.formatValue(O.v,P)),X.currentPath=d.getPath(x.data),V||(X.percentParent=U/d.getValue(R),X.percentParentLabel=d.formatPercent(X.percentParent,P),X.parent=d.getPtLabel(R)),X.percentEntry=U/d.getValue(v),X.percentEntryLabel=d.formatPercent(X.percentEntry,P),X.entry=d.getPtLabel(v),X.percentRoot=U/d.getValue(z),X.percentRootLabel=d.formatPercent(X.percentRoot,P),X.root=d.getPtLabel(z),O.hasOwnProperty("color")&&(X.color=O.color);var oe=b.castOption(_,O.i,"text");return(b.isValidTextValue(oe)||""===oe)&&(X.text=oe),X.customdata=b.castOption(_,O.i,"customdata"),b.texttemplateString($,X,C._d3locale,X,_._meta||{})}},85676:function(ie,F,e){"use strict";var S=e(33428),k=e(76308),o=e(3400),T=e(82744).resizeText,b=e(60404);function p(l,t,i,r){var a=!t.children,s=t.data.data.i,c=o.castOption(i,s,"marker.line.color")||k.defaultLine,h=o.castOption(i,s,"marker.line.width")||0;l.call(b,t,i,r).style("stroke-width",h).call(k.stroke,c).style("opacity",a?i.leaf.opacity:null)}ie.exports={style:function(l){var t=l._fullLayout._sunburstlayer.selectAll(".trace");T(l,t,"sunburst"),t.each(function(i){var r=S.select(this),n=i[0].trace;r.style("opacity",n.opacity),r.selectAll("path.surface").each(function(a){S.select(this).call(p,a,n,l)})})},styleOne:p}},16716:function(ie,F,e){"use strict";var S=e(76308),k=e(49084),o=e(29736).axisHoverFormat,T=e(21776).Ks,b=e(45464),p=e(92880).extendFlat,l=e(67824).overrideAll;function t(r){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:S.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:S.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var i=ie.exports=l(p({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:T(),xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},k("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:t(),y:t(),z:t()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:p({},k.zauto,{}),zmin:p({},k.zmin,{}),zmax:p({},k.zmax,{})},hoverinfo:p({},b.hoverinfo),showlegend:p({},b.showlegend,{dflt:!1})}),"calc","nested");i.x.editType=i.y.editType=i.z.editType="calc+clearAxisTypes",i.transforms=void 0},56576:function(ie,F,e){"use strict";var S=e(47128);ie.exports=function(k,o){S(k,o,o.surfacecolor?{vals:o.surfacecolor,containerStr:"",cLetter:"c"}:{vals:o.z,containerStr:"",cLetter:"c"})}},79164:function(ie,F,e){"use strict";var S=e(67792).gl_surface3d,k=e(67792).ndarray,o=e(67792).ndarray_linear_interpolate.d2,T=e(70448),b=e(11240),p=e(3400).isArrayOrTypedArray,l=e(33040).parseColorScale,t=e(43080),i=e(8932).extractOpts;function r(_,f,C){this.scene=_,this.uid=C,this.surface=f,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var n=r.prototype;n.getXat=function(_,f,C,w){var E=p(this.data.x)?p(this.data.x[0])?this.data.x[f][_]:this.data.x[_]:_;return void 0===C?E:w.d2l(E,0,C)},n.getYat=function(_,f,C,w){var E=p(this.data.y)?p(this.data.y[0])?this.data.y[f][_]:this.data.y[f]:f;return void 0===C?E:w.d2l(E,0,C)},n.getZat=function(_,f,C,w){var E=this.data.z[f][_];return null===E&&this.data.connectgaps&&this.data._interpolatedZ&&(E=this.data._interpolatedZ[f][_]),void 0===C?E:w.d2l(E,0,C)},n.handlePick=function(_){if(_.object===this.surface){var C=(_.data.index[1]-1)/this.dataScaleY-1,w=Math.max(Math.min(Math.round((_.data.index[0]-1)/this.dataScaleX-1),this.data.z[0].length-1),0),E=Math.max(Math.min(Math.round(C),this.data._ylength-1),0);_.index=[w,E],_.traceCoordinate=[this.getXat(w,E),this.getYat(w,E),this.getZat(w,E)],_.dataCoordinate=[this.getXat(w,E,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(w,E,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(w,E,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var P=0;P<3;P++)null!=_.dataCoordinate[P]&&(_.dataCoordinate[P]*=this.scene.dataScale[P]);var L=this.data.hovertext||this.data.text;return _.textLabel=p(L)&&L[E]&&void 0!==L[E][w]?L[E][w]:L||"",_.data.dataCoordinate=_.dataCoordinate.slice(),this.surface.highlight(_.data),this.scene.glplot.spikes.position=_.dataCoordinate,!0}};var a=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function s(_,f){if(_<f)return 0;for(var C=0;0===Math.floor(_%f);)_/=f,C++;return C}function c(_){for(var f=[],C=0;C<a.length;C++)f.push(s(_,a[C]));return f}function h(_){for(var f=c(_),C=_,w=0;w<a.length;w++)if(f[w]>0){C=a[w];break}return C}function u(_,f){if(!(_<1||f<1)){for(var C=c(_),w=c(f),E=1,P=0;P<a.length;P++)E*=Math.pow(a[P],Math.max(C[P],w[P]));return E}}n.calcXnums=function(_){var f,C=[];for(f=1;f<_;f++){var w=this.getXat(f-1,0),E=this.getXat(f,0);C[f-1]=E!==w&&null!=w&&null!=E?Math.abs(E-w):0}var P=0;for(f=1;f<_;f++)P+=C[f-1];for(f=1;f<_;f++)C[f-1]=0===C[f-1]?1:Math.round(P/C[f-1]);return C},n.calcYnums=function(_){var f,C=[];for(f=1;f<_;f++){var w=this.getYat(0,f-1),E=this.getYat(0,f);C[f-1]=E!==w&&null!=w&&null!=E?Math.abs(E-w):0}var P=0;for(f=1;f<_;f++)P+=C[f-1];for(f=1;f<_;f++)C[f-1]=0===C[f-1]?1:Math.round(P/C[f-1]);return C};var y=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],d=y[9],m=y[13];function g(_,f,C){var w=C[8]+C[2]*f[0]+C[5]*f[1];return _[0]=(C[6]+C[0]*f[0]+C[3]*f[1])/w,_[1]=(C[7]+C[1]*f[0]+C[4]*f[1])/w,_}function x(_,f,C){return function(w,E,P,L){for(var O=[0,0],z=w.shape[0],V=w.shape[1],R=0;R<z;R++)for(var U=0;U<V;U++)P(O,[R,U],L),w.set(R,U,o(E,O[0],O[1]))}(_,f,g,C),_}function v(_,f){for(var C=!1,w=0;w<_.length;w++)if(f===_[w]){C=!0;break}!1===C&&_.push(f)}n.estimateScale=function(_,f){for(var C=1+function(E){if(0!==E.length){for(var P=1,L=0;L<E.length;L++)P=u(P,E[L]);return P}}(0===f?this.calcXnums(_):this.calcYnums(_));C<d;)C*=2;for(;C>m;)C--,C/=h(C),++C<d&&(C=m);var w=Math.round(C/_);return w>1?w:1},n.refineCoords=function(_){for(var f=this.dataScaleX,C=this.dataScaleY,w=_[0].shape[0],E=_[0].shape[1],P=0|Math.floor(_[0].shape[0]*f+1),L=0|Math.floor(_[0].shape[1]*C+1),O=1+w+1,z=1+E+1,V=k(new Float32Array(O*z),[O,z]),R=[1/f,0,0,0,1/C,0,0,0,1],U=0;U<_.length;++U){this.surface.padField(V,_[U]);var Z=k(new Float32Array(P*L),[P,L]);x(Z,V,R),_[U]=Z}},n.setContourLevels=function(){var _,f,w=[[],[],[]],E=[!1,!1,!1],P=!1;for(_=0;_<3;++_)if(this.showContour[_]&&(P=!0,this.contourSize[_]>0&&null!==this.contourStart[_]&&null!==this.contourEnd[_]&&this.contourEnd[_]>this.contourStart[_]))for(E[_]=!0,f=this.contourStart[_];f<this.contourEnd[_];f+=this.contourSize[_])v(w[_],f*this.scene.dataScale[_]);if(P){var L=[[],[],[]];for(_=0;_<3;++_)this.showContour[_]&&(L[_]=E[_]?w[_]:this.scene.contourLevels[_]);this.surface.update({levels:L})}},n.update=function(_){var f,C,w,E,P=this.scene,L=P.fullSceneLayout,O=this.surface,z=l(_),V=P.dataScale,R=_.z[0].length,U=_._ylength,Z=P.contourLevels;this.data=_;var N=[];for(f=0;f<3;f++)for(N[f]=[],C=0;C<R;C++)N[f][C]=[];for(C=0;C<R;C++)for(w=0;w<U;w++)N[0][C][w]=this.getXat(C,w,_.xcalendar,L.xaxis),N[1][C][w]=this.getYat(C,w,_.ycalendar,L.yaxis),N[2][C][w]=this.getZat(C,w,_.zcalendar,L.zaxis);if(_.connectgaps)for(_._emptypoints=b(N[2]),T(N[2],_._emptypoints),_._interpolatedZ=[],C=0;C<R;C++)for(_._interpolatedZ[C]=[],w=0;w<U;w++)_._interpolatedZ[C][w]=N[2][C][w];for(f=0;f<3;f++)for(C=0;C<R;C++)for(w=0;w<U;w++)null==(E=N[f][C][w])?N[f][C][w]=NaN:E=N[f][C][w]*=V[f];for(f=0;f<3;f++)for(C=0;C<R;C++)for(w=0;w<U;w++)null!=(E=N[f][C][w])&&(this.minValues[f]>E&&(this.minValues[f]=E),this.maxValues[f]<E&&(this.maxValues[f]=E));for(f=0;f<3;f++)this.objectOffset[f]=.5*(this.minValues[f]+this.maxValues[f]);for(f=0;f<3;f++)for(C=0;C<R;C++)for(w=0;w<U;w++)null!=(E=N[f][C][w])&&(N[f][C][w]-=this.objectOffset[f]);var G=[k(new Float32Array(R*U),[R,U]),k(new Float32Array(R*U),[R,U]),k(new Float32Array(R*U),[R,U])];for(f=0;f<3;f++)for(C=0;C<R;C++)for(w=0;w<U;w++)G[f].set(C,w,N[f][C][w]);N=[];var W={colormap:z,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!_.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:_.opacityscale,opacity:_.opacity},ae=i(_);if(W.intensityBounds=[ae.min,ae.max],_.surfacecolor){var re=k(new Float32Array(R*U),[R,U]);for(C=0;C<R;C++)for(w=0;w<U;w++)re.set(C,w,_.surfacecolor[w][C]);G.push(re)}else W.intensityBounds[0]*=V[2],W.intensityBounds[1]*=V[2];(m<G[0].shape[0]||m<G[0].shape[1])&&(this.refineData=!1),!0===this.refineData&&(this.dataScaleX=this.estimateScale(G[0].shape[0],0),this.dataScaleY=this.estimateScale(G[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(G)),_.surfacecolor&&(W.intensity=G.pop());var X,oe,fe,ne=[!0,!0,!0],Q=["x","y","z"];for(f=0;f<3;++f){var $=_.contours[Q[f]];ne[f]=$.highlight,W.showContour[f]=$.show||$.highlight,W.showContour[f]&&(W.contourProject[f]=[$.project.x,$.project.y,$.project.z],$.show?(this.showContour[f]=!0,W.levels[f]=Z[f],O.highlightColor[f]=W.contourColor[f]=t($.color),O.highlightTint[f]=W.contourTint[f]=$.usecolormap?0:1,W.contourWidth[f]=$.width,this.contourStart[f]=$.start,this.contourEnd[f]=$.end,this.contourSize[f]=$.size):(this.showContour[f]=!1,this.contourStart[f]=null,this.contourEnd[f]=null,this.contourSize[f]=0),$.highlight&&(W.dynamicColor[f]=t($.highlightcolor),W.dynamicWidth[f]=$.highlightwidth))}(oe=(X=z)[0].rgb)[0]===(fe=X[X.length-1].rgb)[0]&&oe[1]===fe[1]&&oe[2]===fe[2]&&oe[3]===fe[3]&&(W.vertexColor=!0),W.objectOffset=this.objectOffset,W.coords=G,O.update(W),O.visible=_.visible,O.enableDynamic=ne,O.enableHighlight=ne,O.snapToData=!0,"lighting"in _&&(O.ambientLight=_.lighting.ambient,O.diffuseLight=_.lighting.diffuse,O.specularLight=_.lighting.specular,O.roughness=_.lighting.roughness,O.fresnel=_.lighting.fresnel),"lightposition"in _&&(O.lightPosition=[_.lightposition.x,_.lightposition.y,_.lightposition.z])},n.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},ie.exports=function(_,f){var w=S({gl:_.glplot.gl}),E=new r(_,w,f.uid);return w._trace=E,E.update(f),_.glplot.add(w),E}},60192:function(ie,F,e){"use strict";var S=e(24040),k=e(3400),o=e(27260),T=e(16716);function b(l,t,i,r){var n=r("opacityscale");"max"===n?t.opacityscale=[[0,.1],[1,1]]:"min"===n?t.opacityscale=[[0,1],[1,.1]]:"extremes"===n?t.opacityscale=function(a,s){for(var c=[],h=0;h<32;h++){var u=h/31,y=.1+.9*(1-Math.pow(Math.sin(1*u*Math.PI),2));c.push([u,Math.max(0,Math.min(1,y))])}return c}():function(a){var s=0;if(!Array.isArray(a)||a.length<2||!a[0]||!a[a.length-1]||0!=+a[0][0]||1!=+a[a.length-1][0])return!1;for(var c=0;c<a.length;c++){var h=a[c];if(2!==h.length||+h[0]<s)return!1;s=+h[0]}return!0}(n)||(t.opacityscale=void 0)}function p(l,t,i){t in l&&!(i in l)&&(l[i]=l[t])}ie.exports={supplyDefaults:function(l,t,i,r){var n,a;function s(v,_){return k.coerce(l,t,T,v,_)}var c=s("x"),h=s("y"),u=s("z");if(!u||!u.length||c&&c.length<1||h&&h.length<1)t.visible=!1;else{t._xlength=Array.isArray(c)&&k.isArrayOrTypedArray(c[0])?u.length:u[0].length,t._ylength=u.length,S.getComponentMethod("calendars","handleTraceDefaults")(l,t,["x","y","z"],r),s("text"),s("hovertext"),s("hovertemplate"),s("xhoverformat"),s("yhoverformat"),s("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(v){s(v)});var y=s("surfacecolor"),d=["x","y","z"];for(n=0;n<3;++n){var m="contours."+d[n],g=s(m+".show"),x=s(m+".highlight");if(g||x)for(a=0;a<3;++a)s(m+".project."+d[a]);g&&(s(m+".color"),s(m+".width"),s(m+".usecolormap")),x&&(s(m+".highlightcolor"),s(m+".highlightwidth")),s(m+".start"),s(m+".end"),s(m+".size")}y||(p(l,"zmin","cmin"),p(l,"zmax","cmax"),p(l,"zauto","cauto")),o(l,t,r,s,{prefix:"",cLetter:"c"}),b(0,t,0,s),t._length=null}},opacityscaleDefaults:b}},91304:function(ie,F,e){"use strict";ie.exports={attributes:e(16716),supplyDefaults:e(60192).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:e(56576),plot:e(79164),moduleType:"trace",name:"surface",basePlotModule:e(12536),categories:["gl3d","2dMap","showLegend"],meta:{}}},60520:function(ie,F,e){"use strict";var S=e(13916),k=e(92880).extendFlat,o=e(67824).overrideAll,T=e(25376),b=e(86968).u,p=e(29736).descriptionOnlyNumbers;(ie.exports=o({domain:b({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:p("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:k({},S.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:k({},T({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:p("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:k({},S.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:k({},T({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},85852:function(ie,F,e){"use strict";var S=e(84888)._M,k=e(24752),o="table";F.name=o,F.plot=function(T){var b=S(T.calcdata,o)[0];b.length&&k(T,b)},F.clean=function(T,b,p,l){var t=l._has&&l._has(o),i=b._has&&b._has(o);t&&!i&&l._paperdiv.selectAll(".table").remove()}},39312:function(ie,F,e){"use strict";var S=e(71688).wrap;ie.exports=function(){return S({})}},23536:function(ie){"use strict";ie.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},55992:function(ie,F,e){"use strict";var S=e(23536),k=e(92880).extendFlat,o=e(38248),T=e(38116).isTypedArray,b=e(38116).isArrayOrTypedArray;function p(s){if(b(s)){for(var c=0,h=0;h<s.length;h++)c=Math.max(c,p(s[h]));return c}return s}function l(s,c){return s+c}function t(s){var c,h=s.slice(),u=1/0,y=0;for(c=0;c<h.length;c++)T(h[c])?h[c]=Array.from(h[c]):b(h[c])||(h[c]=[h[c]]),u=Math.min(u,h[c].length),y=Math.max(y,h[c].length);if(u!==y)for(c=0;c<h.length;c++){var d=y-h[c].length;d&&(h[c]=h[c].concat(i(d)))}return h}function i(s){for(var c=new Array(s),h=0;h<s;h++)c[h]="";return c}function r(s){return s.calcdata.columns.reduce(function(c,h){return h.xIndex<s.xIndex?c+h.columnWidth:c},0)}function n(s,c){return Object.keys(s).map(function(h){return k({},s[h],{auxiliaryBlocks:c})})}function a(s,c){for(var h,u={},y=0,d=0,m={firstRowIndex:null,lastRowIndex:null,rows:[]},g=0,x=0,v=0;v<s.length;v++)m.rows.push({rowIndex:v,rowHeight:h=s[v]}),((d+=h)>=c||v===s.length-1)&&(u[y]=m,m.key=x++,m.firstRowIndex=g,m.lastRowIndex=v,m={firstRowIndex:null,lastRowIndex:null,rows:[]},y+=d,g=v+1,d=0);return u}ie.exports=function(s,c){var h=t(c.cells.values),u=function(U){return U.slice(c.header.values.length,U.length)},y=t(c.header.values);y.length&&!y[0].length&&(y[0]=[""],y=t(y));var d=y.concat(u(h).map(function(){return i((y[0]||[""]).length)})),m=c.domain,g=Math.floor(s._fullLayout._size.w*(m.x[1]-m.x[0])),x=Math.floor(s._fullLayout._size.h*(m.y[1]-m.y[0])),v=c.header.values.length?d[0].map(function(){return c.header.height}):[S.emptyHeaderHeight],_=h.length?h[0].map(function(){return c.cells.height}):[],f=v.reduce(l,0),C=a(_,x-f+S.uplift),w=n(a(v,f),[]),E=n(C,w),P={},L=c._fullInput.columnorder;b(L)&&(L=Array.from(L)),L=L.concat(u(h.map(function(U,Z){return Z})));var O=d.map(function(U,Z){var N=b(c.columnwidth)?c.columnwidth[Math.min(Z,c.columnwidth.length-1)]:c.columnwidth;return o(N)?Number(N):1}),z=O.reduce(l,0);O=O.map(function(U){return U/z*g});var V=Math.max(p(c.header.line.width),p(c.cells.line.width)),R={key:c.uid+s._context.staticPlot,translateX:m.x[0]*s._fullLayout._size.w,translateY:s._fullLayout._size.h*(1-m.y[1]),size:s._fullLayout._size,width:g,maxLineWidth:V,height:x,columnOrder:L,groupHeight:x,rowBlocks:E,headerRowBlocks:w,scrollY:0,cells:k({},c.cells,{values:h}),headerCells:k({},c.header,{values:d}),gdColumns:d.map(function(U){return U[0]}),gdColumnsOriginalOrder:d.map(function(U){return U[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:d.map(function(U,Z){return P[U]=(P[U]||0)+1,{key:U+"__"+P[U],label:U,specIndex:Z,xIndex:L[Z],xScale:r,x:void 0,calcdata:void 0,columnWidth:O[Z]}})};return R.columns.forEach(function(U){U.calcdata=R,U.x=r(U)}),R}},53056:function(ie,F,e){"use strict";var S=e(92880).extendFlat;F.splitToPanels=function(k){var o=[0,0],T=S({},k,{key:"header",type:"header",page:0,prevPages:o,currentRepaint:[null,null],dragHandle:!0,values:k.calcdata.headerCells.values[k.specIndex],rowBlocks:k.calcdata.headerRowBlocks,calcdata:S({},k.calcdata,{cells:k.calcdata.headerCells})});return[S({},k,{key:"cells1",type:"cells",page:0,prevPages:o,currentRepaint:[null,null],dragHandle:!1,values:k.calcdata.cells.values[k.specIndex],rowBlocks:k.calcdata.rowBlocks}),S({},k,{key:"cells2",type:"cells",page:1,prevPages:o,currentRepaint:[null,null],dragHandle:!1,values:k.calcdata.cells.values[k.specIndex],rowBlocks:k.calcdata.rowBlocks}),T]},F.splitToCells=function(k){var T,b,p,o=[p=(b=(T=k).rowBlocks[T.page])?b.rows[0].rowIndex:0,b?p+b.rows.length:0];return(k.values||[]).slice(o[0],o[1]).map(function(T,b){return{keyWithinBlock:b+("string"==typeof T&&T.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:o[0]+b,column:k,calcdata:k.calcdata,page:k.page,rowBlocks:k.rowBlocks,value:T}})}},53212:function(ie,F,e){"use strict";var S=e(3400),k=e(60520),o=e(86968).Q;ie.exports=function(T,b,p,l){function t(i,r){return S.coerce(T,b,k,i,r)}o(b,l,t),t("columnwidth"),t("header.values"),t("header.format"),t("header.align"),t("header.prefix"),t("header.suffix"),t("header.height"),t("header.line.width"),t("header.line.color"),t("header.fill.color"),S.coerceFont(t,"header.font",l.font),function(i,r){for(var a=i.header.values.length,s=(i.columnorder||[]).slice(0,a),c=s.slice().sort(function(y,d){return y-d}),h=s.map(function(y){return c.indexOf(y)}),u=h.length;u<a;u++)h.push(u);r("columnorder",h)}(b,t),t("cells.values"),t("cells.format"),t("cells.align"),t("cells.prefix"),t("cells.suffix"),t("cells.height"),t("cells.line.width"),t("cells.line.color"),t("cells.fill.color"),S.coerceFont(t,"cells.font",l.font),b._length=null}},41724:function(ie,F,e){"use strict";ie.exports={attributes:e(60520),supplyDefaults:e(53212),calc:e(39312),plot:e(24752),moduleType:"trace",name:"table",basePlotModule:e(85852),categories:["noOpacity"],meta:{}}},24752:function(ie,F,e){"use strict";var S=e(23536),k=e(33428),o=e(3400),T=o.numberFormat,b=e(71688),p=e(43616),l=e(72736),t=e(3400).raiseToTop,i=e(3400).strTranslate,r=e(3400).cancelTransition,n=e(55992),a=e(53056),s=e(76308);function c(W){return Math.ceil(W.calcdata.maxLineWidth/2)}function h(W,ae){return"clip"+W._fullLayout._uid+"_scrollAreaBottomClip_"+ae.key}function u(W,ae){return"clip"+W._fullLayout._uid+"_columnBoundaryClippath_"+ae.calcdata.key+"_"+ae.specIndex}function y(W){return[].concat.apply([],W.map(function(ae){return ae})).map(function(ae){return ae.__data__})}function d(W,ae,re){var ne=W.selectAll("."+S.cn.scrollbarKit).data(b.repeat,b.keyFun);ne.enter().append("g").classed(S.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),ne.each(function(fe){var we,ue=fe.scrollbarState;ue.totalHeight=U(we=fe.rowBlocks,we.length-1)+(we.length?Z(we[we.length-1],1/0):1),ue.scrollableAreaHeight=fe.groupHeight-w(fe),ue.currentlyVisibleHeight=Math.min(ue.totalHeight,ue.scrollableAreaHeight),ue.ratio=ue.currentlyVisibleHeight/ue.totalHeight,ue.barLength=Math.max(ue.ratio*ue.currentlyVisibleHeight,S.goldenRatio*S.scrollbarWidth),ue.barWiggleRoom=ue.currentlyVisibleHeight-ue.barLength,ue.wiggleRoom=Math.max(0,ue.totalHeight-ue.scrollableAreaHeight),ue.topY=0===ue.barWiggleRoom?0:fe.scrollY/ue.wiggleRoom*ue.barWiggleRoom,ue.bottomY=ue.topY+ue.barLength,ue.dragMultiplier=ue.wiggleRoom/ue.barWiggleRoom}).attr("transform",function(fe){return i(fe.width+S.scrollbarWidth/2+S.scrollbarOffset,w(fe))});var Q=ne.selectAll("."+S.cn.scrollbar).data(b.repeat,b.keyFun);Q.enter().append("g").classed(S.cn.scrollbar,!0);var $=Q.selectAll("."+S.cn.scrollbarSlider).data(b.repeat,b.keyFun);$.enter().append("g").classed(S.cn.scrollbarSlider,!0),$.attr("transform",function(fe){return i(0,fe.scrollbarState.topY||0)});var X=$.selectAll("."+S.cn.scrollbarGlyph).data(b.repeat,b.keyFun);X.enter().append("line").classed(S.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",S.scrollbarWidth).attr("stroke-linecap","round").attr("y1",S.scrollbarWidth/2),X.attr("y2",function(fe){return fe.scrollbarState.barLength-S.scrollbarWidth/2}).attr("stroke-opacity",function(fe){return fe.columnDragInProgress||!fe.scrollbarState.barWiggleRoom||re?0:.4}),X.transition().delay(0).duration(0),X.transition().delay(S.scrollbarHideDelay).duration(S.scrollbarHideDuration).attr("stroke-opacity",0);var oe=Q.selectAll("."+S.cn.scrollbarCaptureZone).data(b.repeat,b.keyFun);oe.enter().append("line").classed(S.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",S.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(fe){var ue=k.event.y,ge=this.getBoundingClientRect(),we=fe.scrollbarState,Te=ue-ge.top,xe=k.scale.linear().domain([0,we.scrollableAreaHeight]).range([0,we.totalHeight]).clamp(!0);we.topY<=Te&&Te<=we.bottomY||P(ae,W,null,xe(Te-we.barLength/2))(fe)}).call(k.behavior.drag().origin(function(fe){return k.event.stopPropagation(),fe.scrollbarState.scrollbarScrollInProgress=!0,fe}).on("drag",P(ae,W)).on("dragend",function(){})),oe.attr("y2",function(fe){return fe.scrollbarState.scrollableAreaHeight}),ae._context.staticPlot&&(X.remove(),oe.remove())}function m(W,ae,re,ne){var ge,$=function(ue){var ge=ue.selectAll("."+S.cn.columnCell).data(a.splitToCells,function(we){return we.keyWithinBlock});return ge.enter().append("g").classed(S.cn.columnCell,!0),ge.exit().remove(),ge}(((ge=re.selectAll("."+S.cn.columnCells).data(b.repeat,b.keyFun)).enter().append("g").classed(S.cn.columnCells,!0),ge.exit().remove(),ge));$.each(function(ge,we){var Te=ge.calcdata.cells.font,xe=ge.column.specIndex,ye={size:v(Te.size,xe,we),color:v(Te.color,xe,we),family:v(Te.family,xe,we),weight:v(Te.weight,xe,we),style:v(Te.style,xe,we),variant:v(Te.variant,xe,we),textcase:v(Te.textcase,xe,we),lineposition:v(Te.lineposition,xe,we),shadow:v(Te.shadow,xe,we)};ge.rowNumber=ge.key,ge.align=v(ge.calcdata.cells.align,xe,we),ge.cellBorderWidth=v(ge.calcdata.cells.line.width,xe,we),ge.font=ye});var X=function(ue){var ge=ue.selectAll("."+S.cn.cellRect).data(b.repeat,function(we){return we.keyWithinBlock});return ge.enter().append("rect").classed(S.cn.cellRect,!0),ge}($);!function(ue){ue.attr("width",function(ge){return ge.column.columnWidth}).attr("stroke-width",function(ge){return ge.cellBorderWidth}).each(function(ge){var we=k.select(this);s.stroke(we,v(ge.calcdata.cells.line.color,ge.column.specIndex,ge.rowNumber)),s.fill(we,v(ge.calcdata.cells.fill.color,ge.column.specIndex,ge.rowNumber))})}(X);var oe=function(ue){var ge=ue.selectAll("."+S.cn.cellTextHolder).data(b.repeat,function(we){return we.keyWithinBlock});return ge.enter().append("g").classed(S.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ge}($),fe=function(ue){var ge=ue.selectAll("."+S.cn.cellText).data(b.repeat,function(we){return we.keyWithinBlock});return ge.enter().append("text").classed(S.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){k.event.stopPropagation()}),ge}(oe);(function(ue){ue.each(function(ge){p.font(k.select(this),ge.font)})})(fe),g(fe,ae,ne,W),R($)}function g(W,ae,re,ne){W.text(function(Q){var $=Q.column.specIndex,X=Q.rowNumber,oe=Q.value,fe="string"==typeof oe,ue=fe&&oe.match(/<br>/i),ge=!fe||ue;Q.mayHaveMarkup=fe&&oe.match(/[<&>]/);var we,Te="string"==typeof(we=oe)&&we.match(S.latexCheck);Q.latex=Te;var xe,ye,_e=Te?"":v(Q.calcdata.cells.prefix,$,X)||"",Ie=Te?"":v(Q.calcdata.cells.suffix,$,X)||"",De=Te?null:v(Q.calcdata.cells.format,$,X)||null,be=_e+(De?T(De)(Q.value):Q.value)+Ie;if(Q.wrappingNeeded=!Q.wrapped&&!ge&&!Te&&(xe=x(be)),Q.cellHeightMayIncrease=ue||Te||Q.mayHaveMarkup||(void 0===xe?x(be):xe),Q.needsConvertToTspans=Q.mayHaveMarkup||Q.wrappingNeeded||Q.latex,Q.wrappingNeeded){var he=(" "===S.wrapSplitCharacter?be.replace(/<a href=/gi,"<a_href="):be).split(S.wrapSplitCharacter),ce=" "===S.wrapSplitCharacter?he.map(function(me){return me.replace(/<a_href=/gi,"<a href=")}):he;Q.fragments=ce.map(function(me){return{text:me,width:null}}),Q.fragments.push({fragment:S.wrapSpacer,width:null}),ye=ce.join(S.lineBreaker)+S.lineBreaker+S.wrapSpacer}else delete Q.fragments,ye=be;return ye}).attr("dy",function(Q){return Q.needsConvertToTspans?0:"0.75em"}).each(function(Q){var $=this,X=k.select($);Q.needsConvertToTspans?l.convertToTspans(X,ne,(Q.wrappingNeeded?O:z)(re,$,ae,ne,Q)):k.select($.parentNode).attr("transform",function(fe){return i(V(fe),S.cellPad)}).attr("text-anchor",function(fe){return{left:"start",center:"middle",right:"end"}[fe.align]})})}function x(W){return-1!==W.indexOf(S.wrapSplitCharacter)}function v(W,ae,re){if(o.isArrayOrTypedArray(W)){var ne=W[Math.min(ae,W.length-1)];return o.isArrayOrTypedArray(ne)?ne[Math.min(re,ne.length-1)]:ne}return W}function _(W,ae,re){W.transition().ease(S.releaseTransitionEase).duration(S.releaseTransitionDuration).attr("transform",i(ae.x,re))}function f(W){return"cells"===W.type}function C(W){return"header"===W.type}function w(W){return(W.rowBlocks.length?W.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(ae,re){return ae+Z(re,1/0)},0)}function E(W,ae,re){var ne=y(ae)[0];if(void 0!==ne){var Q=ne.rowBlocks,$=ne.calcdata,X=U(Q,Q.length),oe=ne.calcdata.groupHeight-w(ne),fe=$.scrollY=Math.max(0,Math.min(X-oe,$.scrollY)),ue=function(ge,we,Te){for(var xe=[],ye=0,_e=0;_e<ge.length;_e++){for(var Ie=ge[_e],De=Ie.rows,be=0,he=0;he<De.length;he++)be+=De[he].rowHeight;Ie.allRowsHeight=be,we<ye+be&&we+Te>ye&&xe.push(_e),ye+=be}return xe}(Q,fe,oe);1===ue.length&&(ue[0]===Q.length-1?ue.unshift(ue[0]-1):ue.push(ue[0]+1)),ue[0]%2&&ue.reverse(),ae.each(function(ge,we){ge.page=ue[we],ge.scrollY=fe}),ae.attr("transform",function(ge){var we=U(ge.rowBlocks,ge.page)-ge.scrollY;return i(0,we)}),W&&(L(W,re,ae,ue,ne.prevPages,ne,0),L(W,re,ae,ue,ne.prevPages,ne,1),d(re,W))}}function P(W,ae,re,ne){return function(Q){var $=Q.calcdata?Q.calcdata:Q,X=ae.filter(function(ge){return $.key===ge.key}),fe=$.scrollY;$.scrollY=void 0===ne?$.scrollY+(re||$.scrollbarState.dragMultiplier)*k.event.dy:ne;var ue=X.selectAll("."+S.cn.yColumn).selectAll("."+S.cn.columnBlock).filter(f);return E(W,ue,X),$.scrollY===fe}}function L(W,ae,re,ne,Q,$,X){ne[X]!==Q[X]&&(clearTimeout($.currentRepaint[X]),$.currentRepaint[X]=setTimeout(function(){var oe=re.filter(function(fe,ue){return ue===X&&ne[ue]!==Q[ue]});m(W,ae,oe,re),Q[X]=ne[X]}))}function O(W,ae,re,ne){return function(){var Q=k.select(ae.parentNode);Q.each(function($){var X=$.fragments;Q.selectAll("tspan.line").each(function(ye,_e){X[_e].width=this.getComputedTextLength()});var oe,fe,ue=X[X.length-1].width,ge=X.slice(0,-1),we=[],Te=0,xe=$.column.columnWidth-2*S.cellPad;for($.value="";ge.length;)Te+(fe=(oe=ge.shift()).width+ue)>xe&&($.value+=we.join(S.wrapSpacer)+S.lineBreaker,we=[],Te=0),we.push(oe.text),Te+=fe;Te&&($.value+=we.join(S.wrapSpacer)),$.wrapped=!0}),Q.selectAll("tspan.line").remove(),g(Q.select("."+S.cn.cellText),re,W,ne),k.select(ae.parentNode.parentNode).call(R)}}function z(W,ae,re,ne,Q){return function(){if(!Q.settledY){var $=k.select(ae.parentNode),X=G(Q),oe=Q.key-X.firstRowIndex,fe=X.rows[oe].rowHeight,ue=Q.cellHeightMayIncrease?ae.parentNode.getBoundingClientRect().height+2*S.cellPad:fe,ge=Math.max(ue,fe);ge-X.rows[oe].rowHeight&&(X.rows[oe].rowHeight=ge,W.selectAll("."+S.cn.columnCell).call(R),E(null,W.filter(f),0),d(re,ne,!0)),$.attr("transform",function(){var Te=this.parentNode.getBoundingClientRect(),xe=k.select(this.parentNode).select("."+S.cn.cellRect).node().getBoundingClientRect(),ye=this.transform.baseVal.consolidate(),_e=xe.top-Te.top+(ye?ye.matrix.f:S.cellPad);return i(V(Q,k.select(this.parentNode).select("."+S.cn.cellTextHolder).node().getBoundingClientRect().width),_e)}),Q.settledY=!0}}}function V(W,ae){switch(W.align){case"left":default:return S.cellPad;case"right":return W.column.columnWidth-(ae||0)-S.cellPad;case"center":return(W.column.columnWidth-(ae||0))/2}}function R(W){W.attr("transform",function(ae){var re=ae.rowBlocks[0].auxiliaryBlocks.reduce(function(Q,$){return Q+Z($,1/0)},0),ne=Z(G(ae),ae.key);return i(0,ne+re)}).selectAll("."+S.cn.cellRect).attr("height",function(ae){return(re=G(ae),ne=ae.key,re.rows[ne-re.firstRowIndex]).rowHeight;var re,ne})}function U(W,ae){for(var re=0,ne=ae-1;ne>=0;ne--)re+=N(W[ne]);return re}function Z(W,ae){for(var re=0,ne=0;ne<W.rows.length&&W.rows[ne].rowIndex<ae;ne++)re+=W.rows[ne].rowHeight;return re}function N(W){var ae=W.allRowsHeight;if(void 0!==ae)return ae;for(var re=0,ne=0;ne<W.rows.length;ne++)re+=W.rows[ne].rowHeight;return W.allRowsHeight=re,re}function G(W){return W.rowBlocks[W.page]}ie.exports=function(W,ae){var re=!W._context.staticPlot,ne=W._fullLayout._paper.selectAll("."+S.cn.table).data(ae.map(function(Ie){var De=b.unwrap(Ie).trace;return n(W,De)}),b.keyFun);ne.exit().remove(),ne.enter().append("g").classed(S.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),ne.attr("width",function(Ie){return Ie.width+Ie.size.l+Ie.size.r}).attr("height",function(Ie){return Ie.height+Ie.size.t+Ie.size.b}).attr("transform",function(Ie){return i(Ie.translateX,Ie.translateY)});var Q=ne.selectAll("."+S.cn.tableControlView).data(b.repeat,b.keyFun),$=Q.enter().append("g").classed(S.cn.tableControlView,!0).style("box-sizing","content-box");if(re){var X="onwheel"in document?"wheel":"mousewheel";$.on("mousemove",function(Ie){Q.filter(function(De){return Ie===De}).call(d,W)}).on(X,function(Ie){Ie.scrollbarState.wheeling||(Ie.scrollbarState.wheeling=!0,P(W,Q,null,Ie.scrollY+k.event.deltaY)(Ie)||(k.event.stopPropagation(),k.event.preventDefault()),Ie.scrollbarState.wheeling=!1)}).call(d,W,!0)}Q.attr("transform",function(Ie){return i(Ie.size.l,Ie.size.t)});var oe=Q.selectAll("."+S.cn.scrollBackground).data(b.repeat,b.keyFun);oe.enter().append("rect").classed(S.cn.scrollBackground,!0).attr("fill","none"),oe.attr("width",function(Ie){return Ie.width}).attr("height",function(Ie){return Ie.height}),Q.each(function(Ie){p.setClipUrl(k.select(this),h(W,Ie),W)});var fe=Q.selectAll("."+S.cn.yColumn).data(function(Ie){return Ie.columns},b.keyFun);fe.enter().append("g").classed(S.cn.yColumn,!0),fe.exit().remove(),fe.attr("transform",function(Ie){return i(Ie.x,0)}),re&&fe.call(k.behavior.drag().origin(function(Ie){return _(k.select(this),Ie,-S.uplift),t(this),Ie.calcdata.columnDragInProgress=!0,d(Q.filter(function(De){return Ie.calcdata.key===De.key}),W),Ie}).on("drag",function(Ie){var De=k.select(this),be=function(he){return(Ie===he?k.event.x:he.x)+he.columnWidth/2};Ie.x=Math.max(-S.overdrag,Math.min(Ie.calcdata.width+S.overdrag-Ie.columnWidth,k.event.x)),y(fe).filter(function(he){return he.calcdata.key===Ie.calcdata.key}).sort(function(he,ce){return be(he)-be(ce)}).forEach(function(he,ce){he.xIndex=ce,he.x=Ie===he?he.x:he.xScale(he)}),fe.filter(function(he){return Ie!==he}).transition().ease(S.transitionEase).duration(S.transitionDuration).attr("transform",function(he){return i(he.x,0)}),De.call(r).attr("transform",i(Ie.x,-S.uplift))}).on("dragend",function(Ie){var he,ce,me,Pe,De=k.select(this),be=Ie.calcdata;Ie.x=Ie.xScale(Ie),Ie.calcdata.columnDragInProgress=!1,_(De,Ie,0),he=W,ce=be,me=be.columns.map(function(he){return he.xIndex}),Pe=ce.gdColumnsOriginalOrder,ce.gdColumns.sort(function(Ae,Ce){return me[Pe.indexOf(Ae)]-me[Pe.indexOf(Ce)]}),ce.columnorder=me,he.emit("plotly_restyle")})),fe.each(function(Ie){p.setClipUrl(k.select(this),u(W,Ie),W)});var ue=fe.selectAll("."+S.cn.columnBlock).data(a.splitToPanels,b.keyFun);ue.enter().append("g").classed(S.cn.columnBlock,!0).attr("id",function(Ie){return Ie.key}),ue.style("cursor",function(Ie){return Ie.dragHandle?"ew-resize":Ie.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var ge=ue.filter(C),we=ue.filter(f);re&&we.call(k.behavior.drag().origin(function(Ie){return k.event.stopPropagation(),Ie}).on("drag",P(W,Q,-1)).on("dragend",function(){})),m(W,Q,ge,ue),m(W,Q,we,ue);var Te=Q.selectAll("."+S.cn.scrollAreaClip).data(b.repeat,b.keyFun);Te.enter().append("clipPath").classed(S.cn.scrollAreaClip,!0).attr("id",function(Ie){return h(W,Ie)});var xe=Te.selectAll("."+S.cn.scrollAreaClipRect).data(b.repeat,b.keyFun);xe.enter().append("rect").classed(S.cn.scrollAreaClipRect,!0).attr("x",-S.overdrag).attr("y",-S.uplift).attr("fill","none"),xe.attr("width",function(Ie){return Ie.width+2*S.overdrag}).attr("height",function(Ie){return Ie.height+S.uplift}),fe.selectAll("."+S.cn.columnBoundary).data(b.repeat,b.keyFun).enter().append("g").classed(S.cn.columnBoundary,!0);var ye=fe.selectAll("."+S.cn.columnBoundaryClippath).data(b.repeat,b.keyFun);ye.enter().append("clipPath").classed(S.cn.columnBoundaryClippath,!0),ye.attr("id",function(Ie){return u(W,Ie)});var _e=ye.selectAll("."+S.cn.columnBoundaryRect).data(b.repeat,b.keyFun);_e.enter().append("rect").classed(S.cn.columnBoundaryRect,!0).attr("fill","none"),_e.attr("width",function(Ie){return Ie.columnWidth+2*c(Ie)}).attr("height",function(Ie){return Ie.calcdata.height+2*c(Ie)+S.uplift}).attr("x",function(Ie){return-c(Ie)}).attr("y",function(Ie){return-c(Ie)}),E(null,we,Q)}},40516:function(ie,F,e){"use strict";var S=e(21776).Ks,k=e(21776).Gw,o=e(49084),T=e(86968).u,b=e(74996),p=e(424),l=e(32984),t=e(92880).extendFlat,i=e(98192).c;ie.exports={labels:p.labels,parents:p.parents,values:p.values,branchvalues:p.branchvalues,count:p.count,level:p.level,maxdepth:p.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:t({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:p.marker.colors,pattern:i,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:p.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},o("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:t({},b.textfont,{}),editType:"calc"},text:b.text,textinfo:p.textinfo,texttemplate:k({editType:"plot"},{keys:l.eventDataKeys.concat(["label","value"])}),hovertext:b.hovertext,hoverinfo:p.hoverinfo,hovertemplate:S({},{keys:l.eventDataKeys}),textfont:b.textfont,insidetextfont:b.insidetextfont,outsidetextfont:t({},b.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:b.sort,root:p.root,domain:T({name:"treemap",trace:!0,editType:"calc"})}},79516:function(ie,F,e){"use strict";var S=e(7316);F.name="treemap",F.plot=function(k,o,T,b){S.plotBasePlot(F.name,k,o,T,b)},F.clean=function(k,o,T,b){S.cleanBasePlot(F.name,k,o,T,b)}},97840:function(ie,F,e){"use strict";var S=e(3776);F.r=function(k,o){return S.calc(k,o)},F.q=function(k){return S._runCrossTraceCalc("treemap",k)}},32984:function(ie){"use strict";ie.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},34092:function(ie,F,e){"use strict";var S=e(3400),k=e(40516),o=e(76308),T=e(86968).Q,b=e(31508).handleText,p=e(78048).TEXTPAD,l=e(74174).handleMarkerDefaults,t=e(8932),i=t.hasColorscale,r=t.handleDefaults;ie.exports=function(n,a,s,c){function h(_,f){return S.coerce(n,a,k,_,f)}var u=h("labels"),y=h("parents");if(u&&u.length&&y&&y.length){var d=h("values");h(d&&d.length?"branchvalues":"count"),h("level"),h("maxdepth"),"squarify"===h("tiling.packing")&&h("tiling.squarifyratio"),h("tiling.flip"),h("tiling.pad");var m=h("text");h("texttemplate"),a.texttemplate||h("textinfo",S.isArrayOrTypedArray(m)?"text+label":"label"),h("hovertext"),h("hovertemplate");var g=h("pathbar.visible");b(n,a,c,h,"auto",{hasPathbar:g,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),h("textposition");var x=-1!==a.textposition.indexOf("bottom");l(n,a,c,h),(a._hasColorscale=i(n,"marker","colors")||(n.marker||{}).coloraxis)?r(n,a,c,h,{prefix:"marker.",cLetter:"c"}):h("marker.depthfade",!(a.marker.colors||[]).length);var v=2*a.textfont.size;h("marker.pad.t",x?v/4:v),h("marker.pad.l",v/4),h("marker.pad.r",v/4),h("marker.pad.b",x?v:v/4),h("marker.cornerradius"),a._hovered={marker:{line:{width:2,color:o.contrast(c.paper_bgcolor)}}},g&&(h("pathbar.thickness",a.pathbar.textfont.size+2*p),h("pathbar.side"),h("pathbar.edgeshape")),h("sort"),h("root.color"),T(a,c,h),a._length=null}else a.visible=!1}},95808:function(ie,F,e){"use strict";var S=e(33428),k=e(78176),o=e(82744).clearMinTextSize,T=e(60100).resizeText,b=e(52960);ie.exports=function(p,l,t,i,r){var n,a,s=r.type,c=r.drawDescendants,h=p._fullLayout,u=h["_"+s+"layer"],y=!t;o(s,h),(n=u.selectAll("g.trace."+s).data(l,function(d){return d[0].trace.uid})).enter().append("g").classed("trace",!0).classed(s,!0),n.order(),!h.uniformtext.mode&&k.hasTransition(t)?(i&&(a=i()),S.transition().duration(t.duration).ease(t.easing).each("end",function(){a&&a()}).each("interrupt",function(){a&&a()}).each(function(){u.selectAll("g.trace").each(function(d){b(p,d,this,t,c)})})):(n.each(function(d){b(p,d,this,t,c)}),h.uniformtext.mode&&T(p,u.selectAll(".trace"),s)),y&&n.exit().remove()}},27336:function(ie,F,e){"use strict";var S=e(33428),k=e(3400),o=e(43616),T=e(72736),b=e(13832),p=e(66192).styleOne,l=e(32984),t=e(78176),i=e(45716),r=!0;ie.exports=function(n,a,s,c,h){var u=h.barDifY,y=h.width,d=h.height,m=h.viewX,g=h.viewY,x=h.pathSlice,v=h.toMoveInsideSlice,_=h.strTransform,f=h.hasTransition,C=h.handleSlicesExit,w=h.makeUpdateSliceInterpolator,E=h.makeUpdateTextInterpolator,P={},L=n._context.staticPlot,O=n._fullLayout,z=a[0],V=z.trace,R=z.hierarchy,U=y/V._entryDepth,Z=t.listPath(s.data,"id"),N=b(R.copy(),[y,d],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(N=N.filter(function(W){var ae=Z.indexOf(W.data.id);return-1!==ae&&(W.x0=U*ae,W.x1=U*(ae+1),W.y0=u,W.y1=u+d,W.onPathbar=!0,!0)})).reverse(),(c=c.data(N,t.getPtId)).enter().append("g").classed("pathbar",!0),C(c,r,P,[y,d],x),c.order();var G=c;f&&(G=G.transition().each("end",function(){var W=S.select(this);t.setSliceCursor(W,n,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),G.each(function(W){W._x0=m(W.x0),W._x1=m(W.x1),W._y0=g(W.y0),W._y1=g(W.y1),W._hoverX=m(W.x1-Math.min(y,d)/2),W._hoverY=g(W.y1-d/2);var ae=S.select(this),re=k.ensureSingle(ae,"path","surface",function(X){X.style("pointer-events",L?"none":"all")});f?re.transition().attrTween("d",function(X){var oe=w(X,r,P,[y,d]);return function(fe){return x(oe(fe))}}):re.attr("d",x),ae.call(i,s,n,a,{styleOne:p,eventDataKeys:l.eventDataKeys,transitionTime:l.CLICK_TRANSITION_TIME,transitionEasing:l.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,n,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:n._transitioning}),re.call(p,W,V,n,{hovered:!1}),W._text=(t.getPtLabel(W)||"").split("<br>").join(" ")||"";var ne=k.ensureSingle(ae,"g","slicetext"),Q=k.ensureSingle(ne,"text","",function(X){X.attr("data-notex",1)}),$=k.ensureUniformFontSize(n,t.determineTextFont(V,W,O.font,{onPathbar:!0}));Q.text(W._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(o.font,$).call(T.convertToTspans,n),W.textBB=o.bBox(Q.node()),W.transform=v(W,{fontSize:$.size,onPathbar:!0}),W.transform.fontSize=$.size,f?Q.transition().attrTween("transform",function(X){var oe=E(X,r,P,[y,d]);return function(fe){return _(oe(fe))}}):Q.attr("transform",_(W))})}},76477:function(ie,F,e){"use strict";var S=e(33428),k=e(3400),o=e(43616),T=e(72736),b=e(13832),p=e(66192).styleOne,l=e(32984),t=e(78176),i=e(45716),r=e(96488).formatSliceLabel,n=!1;ie.exports=function(a,s,c,h,u){var y=u.width,d=u.height,m=u.viewX,g=u.viewY,x=u.pathSlice,v=u.toMoveInsideSlice,_=u.strTransform,f=u.hasTransition,C=u.handleSlicesExit,w=u.makeUpdateSliceInterpolator,E=u.makeUpdateTextInterpolator,P=u.prevEntry,L=a._context.staticPlot,O=a._fullLayout,z=s[0].trace,V=-1!==z.textposition.indexOf("left"),R=-1!==z.textposition.indexOf("right"),U=-1!==z.textposition.indexOf("bottom"),Z=!U&&!z.marker.pad.t||U&&!z.marker.pad.b,N=b(c,[y,d],{packing:z.tiling.packing,squarifyratio:z.tiling.squarifyratio,flipX:z.tiling.flip.indexOf("x")>-1,flipY:z.tiling.flip.indexOf("y")>-1,pad:{inner:z.tiling.pad,top:z.marker.pad.t,left:z.marker.pad.l,right:z.marker.pad.r,bottom:z.marker.pad.b}}).descendants(),G=1/0,W=-1/0;N.forEach(function($){var X=$.depth;X>=z._maxDepth?($.x0=$.x1=($.x0+$.x1)/2,$.y0=$.y1=($.y0+$.y1)/2):(G=Math.min(G,X),W=Math.max(W,X))}),h=h.data(N,t.getPtId),z._maxVisibleLayers=isFinite(W)?W-G+1:0,h.enter().append("g").classed("slice",!0),C(h,n,{},[y,d],x),h.order();var ae=null;if(f&&P){var re=t.getPtId(P);h.each(function($){null===ae&&t.getPtId($)===re&&(ae={x0:$.x0,x1:$.x1,y0:$.y0,y1:$.y1})})}var ne=function(){return ae||{x0:0,x1:y,y0:0,y1:d}},Q=h;return f&&(Q=Q.transition().each("end",function(){var $=S.select(this);t.setSliceCursor($,a,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),Q.each(function($){var X=t.isHeader($,z);$._x0=m($.x0),$._x1=m($.x1),$._y0=g($.y0),$._y1=g($.y1),$._hoverX=m($.x1-z.marker.pad.r),$._hoverY=g(U?$.y1-z.marker.pad.b/2:$.y0+z.marker.pad.t/2);var oe=S.select(this),fe=k.ensureSingle(oe,"path","surface",function(ye){ye.style("pointer-events",L?"none":"all")});f?fe.transition().attrTween("d",function(ye){var _e=w(ye,n,ne(),[y,d]);return function(Ie){return x(_e(Ie))}}):fe.attr("d",x),oe.call(i,c,a,s,{styleOne:p,eventDataKeys:l.eventDataKeys,transitionTime:l.CLICK_TRANSITION_TIME,transitionEasing:l.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,a,{isTransitioning:a._transitioning}),fe.call(p,$,z,a,{hovered:!1}),$._text=$.x0===$.x1||$.y0===$.y1?"":X?Z?"":t.getPtLabel($)||"":r($,c,z,s,O)||"";var ue=k.ensureSingle(oe,"g","slicetext"),ge=k.ensureSingle(ue,"text","",function(ye){ye.attr("data-notex",1)}),we=k.ensureUniformFontSize(a,t.determineTextFont(z,$,O.font)),Te=$._text||" ",xe=X&&-1===Te.indexOf("<br>");ge.text(Te).classed("slicetext",!0).attr("text-anchor",R?"end":V||xe?"start":"middle").call(o.font,we).call(T.convertToTspans,a),$.textBB=o.bBox(ge.node()),$.transform=v($,{fontSize:we.size,isHeader:X}),$.transform.fontSize=we.size,f?ge.transition().attrTween("transform",function(ye){var _e=E(ye,n,ne(),[y,d]);return function(Ie){return _(_e(Ie))}}):ge.attr("transform",_($))}),ae}},83024:function(ie){"use strict";ie.exports=function F(e,S,k){var o;k.swapXY&&(o=e.x0,e.x0=e.y0,e.y0=o,o=e.x1,e.x1=e.y1,e.y1=o),k.flipX&&(o=e.x0,e.x0=S[0]-e.x1,e.x1=S[0]-o),k.flipY&&(o=e.y0,e.y0=S[1]-e.y1,e.y1=S[1]-o);var T=e.children;if(T)for(var b=0;b<T.length;b++)F(T[b],S,k)}},31991:function(ie,F,e){"use strict";ie.exports={moduleType:"trace",name:"treemap",basePlotModule:e(79516),categories:[],animatable:!0,attributes:e(40516),layoutAttributes:e(45392),supplyDefaults:e(34092),supplyLayoutDefaults:e(77480),calc:e(97840).r,crossTraceCalc:e(97840).q,plot:e(53264),style:e(66192).style,colorbar:e(5528),meta:{}}},45392:function(ie){"use strict";ie.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77480:function(ie,F,e){"use strict";var S=e(3400),k=e(45392);ie.exports=function(o,T){function b(p,l){return S.coerce(o,T,k,p,l)}b("treemapcolorway",T.colorway),b("extendtreemapcolors")}},13832:function(ie,F,e){"use strict";var S=e(74148),k=e(83024);ie.exports=function(o,T,b){var p,l=b.flipX,t=b.flipY,i="dice-slice"===b.packing,r=b.pad[t?"bottom":"top"],n=b.pad[l?"right":"left"],a=b.pad[l?"left":"right"],s=b.pad[t?"top":"bottom"];i&&(p=n,n=r,r=p,p=a,a=s,s=p);var c=S.treemap().tile(function(h,u){switch(h){case"squarify":return S.treemapSquarify.ratio(u);case"binary":return S.treemapBinary;case"dice":return S.treemapDice;case"slice":return S.treemapSlice;default:return S.treemapSliceDice}}(b.packing,b.squarifyratio)).paddingInner(b.pad.inner).paddingLeft(n).paddingRight(a).paddingTop(r).paddingBottom(s).size(i?[T[1],T[0]]:T)(o);return(i||l||t)&&k(c,T,{swapXY:i,flipX:l,flipY:t}),c}},53264:function(ie,F,e){"use strict";var S=e(95808),k=e(76477);ie.exports=function(o,T,b,p){return S(o,T,b,p,{type:"treemap",drawDescendants:k})}},52960:function(ie,F,e){"use strict";var S=e(33428),k=e(67756).qy,o=e(78176),T=e(3400),b=e(78048).TEXTPAD,p=e(98184).toMoveInsideBar,l=e(82744).recordMinTextSize,t=e(32984),i=e(27336);function r(n){return o.isHierarchyRoot(n)?"":o.getPtId(n)}ie.exports=function(n,a,s,c,h){var u=n._fullLayout,y=a[0],d=y.trace,m="icicle"===d.type,g=y.hierarchy,x=o.findEntryWithLevel(g,d.level),v=S.select(s),_=v.selectAll("g.pathbar"),f=v.selectAll("g.slice");if(!x)return _.remove(),void f.remove();var C=o.isHierarchyRoot(x),w=!u.uniformtext.mode&&o.hasTransition(c),E=o.getMaxDepth(d),P=u._size,L=d.domain,O=P.w*(L.x[1]-L.x[0]),z=P.h*(L.y[1]-L.y[0]),V=O,R=d.pathbar.thickness,U=d.marker.line.width+t.gapWithPathbar,Z=d.pathbar.visible?d.pathbar.side.indexOf("bottom")>-1?z+U:-(R+U):0,N={x0:V,x1:V,y0:Z,y1:Z+R},G=function(Me,Le,Ue){var ze=d.tiling.pad,qe=function(dt){return dt-ze<=Le.x0},Ke=function(dt){return dt+ze>=Le.x1},it=function(dt){return dt-ze<=Le.y0},ft=function(dt){return dt+ze>=Le.y1};return Me.x0===Le.x0&&Me.x1===Le.x1&&Me.y0===Le.y0&&Me.y1===Le.y1?{x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1}:{x0:qe(Me.x0-ze)?0:Ke(Me.x0-ze)?Ue[0]:Me.x0,x1:qe(Me.x1+ze)?0:Ke(Me.x1+ze)?Ue[0]:Me.x1,y0:it(Me.y0-ze)?0:ft(Me.y0-ze)?Ue[1]:Me.y0,y1:it(Me.y1+ze)?0:ft(Me.y1+ze)?Ue[1]:Me.y1}},W=null,ae={},re={},ne=null,Q=function(Me,Le){return Le?ae[r(Me)]:re[r(Me)]};y.hasMultipleRoots&&C&&E++,d._maxDepth=E,d._backgroundColor=u.paper_bgcolor,d._entryDepth=x.data.depth,d._atRootLevel=C;var $=-O/2+P.l+P.w*(L.x[1]+L.x[0])/2,X=-z/2+P.t+P.h*(1-(L.y[1]+L.y[0])/2),oe=function(Me){return $+Me},fe=function(Me){return X+Me},ue=fe(0),ge=oe(0),we=function(Me){return ge+Me},Te=function(Me){return ue+Me};function xe(Me,Le){return Me+","+Le}var ye=we(0),_e=function(Me){Me.x=Math.max(ye,Me.x)},Ie=d.pathbar.edgeshape,De=d[m?"tiling":"marker"].pad,be=function(Me){return-1!==d.textposition.indexOf(Me)},he=be("top"),ce=be("left"),me=be("right"),Pe=be("bottom"),Ae=function(Me,Le){var Ue=Me.x0,ze=Me.x1,qe=Me.y0,Ke=Me.y1,it=Me.textBB,ft=he||Le.isHeader&&!Pe?"start":Pe?"end":"middle",dt=be("right"),kt=be("left")||Le.onPathbar?-1:dt?1:0;if(Le.isHeader){if((Ue+=(m?De:De.l)-b)>=(ze-=(m?De:De.r)-b)){var St=(Ue+ze)/2;Ue=St,ze=St}var Tt;Pe?qe<(Tt=Ke-(m?De:De.b))&&Tt<Ke&&(qe=Tt):qe<(Tt=qe+(m?De:De.t))&&Tt<Ke&&(Ke=Tt)}var lt=p(Ue,ze,qe,Ke,it,{isHorizontal:!1,constrained:!0,angle:0,anchor:ft,leftToRight:kt});return lt.fontSize=Le.fontSize,lt.targetX=oe(lt.targetX),lt.targetY=fe(lt.targetY),isNaN(lt.targetX)||isNaN(lt.targetY)?{}:(Ue!==ze&&qe!==Ke&&l(d.type,lt,u),{scale:lt.scale,rotate:lt.rotate,textX:lt.textX,textY:lt.textY,anchorX:lt.anchorX,anchorY:lt.anchorY,targetX:lt.targetX,targetY:lt.targetY})},Ce=function(Me,Le){for(var Ue,ze=0,qe=Me;!Ue&&ze<E;)ze++,(qe=qe.parent)?Ue=Q(qe,Le):ze=E;return Ue||{}},Oe=function(Me,Le,Ue,ze,qe){var Ke,it=Q(Me,Le);if(it)Ke=it;else if(Le)Ke=N;else if(W)if(Me.parent){var ft=ne||Ue;ft&&!Le?Ke=G(Me,ft,ze):T.extendFlat(Ke={},Ce(Me,Le))}else Ke=T.extendFlat({},Me),m&&("h"===qe.orientation?qe.flipX?Ke.x0=Me.x1:Ke.x1=0:qe.flipY?Ke.y0=Me.y1:Ke.y1=0);else Ke={};return k(Ke,{x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1})},Ne=function(Me,Le,Ue,ze){var dt,St,Tt,qe=Q(Me,Le),Ke={},it=(dt=Me,St=Ue,Tt=ze,Le?ae[r(g)]||N:dt.data.depth-x.data.depth<E?G(dt,re[d.level]||St,Tt):{});T.extendFlat(Ke,{transform:Ae({x0:it.x0,x1:it.x1,y0:it.y0,y1:it.y1,textBB:Me.textBB,_text:Me._text},{isHeader:o.isHeader(Me,d)})}),qe?Ke=qe:Me.parent&&T.extendFlat(Ke,Ce(Me,Le));var ft=Me.transform;return Me.x0!==Me.x1&&Me.y0!==Me.y1&&l(d.type,ft,u),k(Ke,{transform:{scale:ft.scale,rotate:ft.rotate,textX:ft.textX,textY:ft.textY,anchorX:ft.anchorX,anchorY:ft.anchorY,targetX:ft.targetX,targetY:ft.targetY}})},je=function(Me,Le,Ue,ze,qe){var Ke=ze[0],it=ze[1];w?Me.exit().transition().each(function(){var ft=S.select(this);ft.select("path.surface").transition().attrTween("d",function(dt){var kt=function(St,Tt,lt,ot){var Rt,Vt=Q(St,Tt);if(Tt)Rt=N;else{var Ht=Q(x,Tt);Rt=Ht?G(St,Ht,ot):{}}return k(Vt,Rt)}(dt,Le,0,[Ke,it]);return function(St){return qe(kt(St))}}),ft.select("g.slicetext").attr("opacity",0)}).remove():Me.exit().remove()},ve=function(Me){var Le=Me.transform;return Me.x0!==Me.x1&&Me.y0!==Me.y1&&l(d.type,Le,u),T.getTextTransform({textX:Le.textX,textY:Le.textY,anchorX:Le.anchorX,anchorY:Le.anchorY,targetX:Le.targetX,targetY:Le.targetY,scale:Le.scale,rotate:Le.rotate})};w&&(_.each(function(Me){ae[r(Me)]={x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1},Me.transform&&(ae[r(Me)].transform={textX:Me.transform.textX,textY:Me.transform.textY,anchorX:Me.transform.anchorX,anchorY:Me.transform.anchorY,targetX:Me.transform.targetX,targetY:Me.transform.targetY,scale:Me.transform.scale,rotate:Me.transform.rotate})}),f.each(function(Me){re[r(Me)]={x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1},Me.transform&&(re[r(Me)].transform={textX:Me.transform.textX,textY:Me.transform.textY,anchorX:Me.transform.anchorX,anchorY:Me.transform.anchorY,targetX:Me.transform.targetX,targetY:Me.transform.targetY,scale:Me.transform.scale,rotate:Me.transform.rotate}),!W&&o.isEntry(Me)&&(W=Me)})),ne=h(n,a,x,f,{width:O,height:z,viewX:oe,viewY:fe,pathSlice:function(Me){var Le=oe(Me.x0),Ue=oe(Me.x1),ze=fe(Me.y0),qe=fe(Me.y1),Ke=Ue-Le,it=qe-ze;if(!Ke||!it)return"";var dt=Math.min(d.marker.cornerradius||0,Ke/2,it/2);dt&&Me.data&&Me.data.data&&Me.data.data.label&&(he&&(dt=Math.min(dt,De.t)),ce&&(dt=Math.min(dt,De.l)),me&&(dt=Math.min(dt,De.r)),Pe&&(dt=Math.min(dt,De.b)));var kt=function(St,Tt){return dt?"a"+xe(dt,dt)+" 0 0 1 "+xe(St,Tt):""};return"M"+xe(Le,ze+dt)+kt(dt,-dt)+"L"+xe(Ue-dt,ze)+kt(dt,dt)+"L"+xe(Ue,qe-dt)+kt(-dt,dt)+"L"+xe(Le+dt,qe)+kt(-dt,-dt)+"Z"},toMoveInsideSlice:Ae,prevEntry:W,makeUpdateSliceInterpolator:Oe,makeUpdateTextInterpolator:Ne,handleSlicesExit:je,hasTransition:w,strTransform:ve}),d.pathbar.visible?i(n,a,x,_,{barDifY:Z,width:V,height:R,viewX:we,viewY:Te,pathSlice:function(Me){var Le=we(Math.max(Math.min(Me.x0,Me.x0),0)),Ue=we(Math.min(Math.max(Me.x1,Me.x1),V)),ze=Te(Me.y0),qe=Te(Me.y1),Ke=R/2,it={},ft={};it.x=Le,ft.x=Ue,it.y=ft.y=(ze+qe)/2;var dt={x:Le,y:ze},kt={x:Ue,y:ze},St={x:Ue,y:qe},Tt={x:Le,y:qe};return">"===Ie?(dt.x-=Ke,kt.x-=Ke,St.x-=Ke,Tt.x-=Ke):"/"===Ie?(St.x-=Ke,Tt.x-=Ke,it.x-=Ke/2,ft.x-=Ke/2):"\\"===Ie?(dt.x-=Ke,kt.x-=Ke,it.x-=Ke/2,ft.x-=Ke/2):"<"===Ie&&(it.x-=Ke,ft.x-=Ke),_e(dt),_e(Tt),_e(it),_e(kt),_e(St),_e(ft),"M"+xe(dt.x,dt.y)+"L"+xe(kt.x,kt.y)+"L"+xe(ft.x,ft.y)+"L"+xe(St.x,St.y)+"L"+xe(Tt.x,Tt.y)+"L"+xe(it.x,it.y)+"Z"},toMoveInsideSlice:Ae,makeUpdateSliceInterpolator:Oe,makeUpdateTextInterpolator:Ne,handleSlicesExit:je,hasTransition:w,strTransform:ve}):_.remove()}},66192:function(ie,F,e){"use strict";var S=e(33428),k=e(76308),o=e(3400),T=e(78176),b=e(82744).resizeText,p=e(60404);function l(t,i,r,n,a){var s,c,h=(a||{}).hovered,u=i.data.data,y=u.i,d=u.color,m=T.isHierarchyRoot(i),g=1;if(h)s=r._hovered.marker.line.color,c=r._hovered.marker.line.width;else if(m&&d===r.root.color)g=100,s="rgba(0,0,0,0)",c=0;else if(s=o.castOption(r,y,"marker.line.color")||k.defaultLine,c=o.castOption(r,y,"marker.line.width")||0,!r._hasColorscale&&!i.onPathbar){var x=r.marker.depthfade;if(x){var v,_=k.combine(k.addOpacity(r._backgroundColor,.75),d);if(!0===x){var f=T.getMaxDepth(r);v=isFinite(f)?T.isLeaf(i)?0:r._maxVisibleLayers-(i.data.depth-r._entryDepth):i.data.height+1}else v=i.data.depth-r._entryDepth,r._atRootLevel||v++;if(v>0)for(var C=0;C<v;C++)d=k.combine(k.addOpacity(_,.5*C/v),d)}}t.call(p,i,r,n,d).style("stroke-width",c).call(k.stroke,s).style("opacity",g)}ie.exports={style:function(t){var i=t._fullLayout._treemaplayer.selectAll(".trace");b(t,i,"treemap"),i.each(function(r){var n=S.select(this),a=r[0].trace;n.style("opacity",a.opacity),n.selectAll("path.surface").each(function(s){S.select(this).call(l,s,a,t,{hovered:!1})})})},styleOne:l}},13988:function(ie,F,e){"use strict";var S=e(63188),k=e(92880).extendFlat,o=e(29736).axisHoverFormat;ie.exports={y:S.y,x:S.x,x0:S.x0,y0:S.y0,xhoverformat:o("x"),yhoverformat:o("y"),name:k({},S.name,{}),orientation:k({},S.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:S.fillcolor,points:k({},S.boxpoints,{}),jitter:k({},S.jitter,{}),pointpos:k({},S.pointpos,{}),width:k({},S.width,{}),marker:S.marker,text:S.text,hovertext:S.hovertext,hovertemplate:S.hovertemplate,quartilemethod:S.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:S.offsetgroup,alignmentgroup:S.alignmentgroup,selected:S.selected,unselected:S.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"},zorder:S.zorder}},67064:function(ie,F,e){"use strict";var S=e(3400),k=e(54460),o=e(62555),T=e(63800),b=e(39032).BADNUM;function p(t,i,r){var n=i.max-i.min;if(!n)return t.bandwidth?t.bandwidth:0;if(t.bandwidth)return Math.max(t.bandwidth,n/1e4);var c,a=r.length,s=S.stdev(r,a-1,i.mean);return Math.max((c=a,1.059*Math.min(s,(i.q3-i.q1)/1.349)*Math.pow(c,-.2)),n/100)}function l(t,i,r,n){var a,s=t.spanmode,c=t.span||[],u=[i.min-2*n,i.max+2*n];function y(m){var g=c[m],x="multicategory"===r.type?r.r2c(g):r.d2c(g,0,t[i.valLetter+"calendar"]);return x===b?u[m]:x}var d={type:"linear",range:a="soft"===s?u:"hard"===s?[i.min,i.max]:[y(0),y(1)]};return k.setConvert(d),d.cleanRange(),a}ie.exports=function(t,i){var r=o(t,i);if(r[0].t.empty)return r;for(var n=t._fullLayout,a=k.getFromId(t,i["h"===i.orientation?"xaxis":"yaxis"]),s=1/0,c=-1/0,h=0,u=0,y=0;y<r.length;y++){var d=r[y],m=d.pts.map(T.extractVal),g=d.bandwidth=p(i,d,m),x=d.span=l(i,d,a,g);if(d.min===d.max&&0===g)x=d.span=[d.min,d.max],d.density=[{v:1,t:x[0]}],d.bandwidth=g,h=Math.max(h,1);else{var v=x[1]-x[0],_=Math.ceil(v/(g/3)),f=v/_;if(!isFinite(f)||!isFinite(_))return S.error("Something went wrong with computing the violin span"),r[0].t.empty=!0,r;var C=T.makeKDE(d,i,m);d.density=new Array(_);for(var w=0,E=x[0];E<x[1]+f/2;w++,E+=f){var P=C(E);d.density[w]={v:P,t:E},h=Math.max(h,P)}}u=Math.max(u,m.length),s=Math.min(s,x[0]),c=Math.max(c,x[1])}var L=k.findExtremes(a,[s,c],{padded:!0});if(i._extremes[a._id]=L,i.width)r[0].t.maxKDE=h;else{var O=n._violinScaleGroupStats,z=i.scalegroup,V=O[z];V?(V.maxKDE=Math.max(V.maxKDE,h),V.maxCount=Math.max(V.maxCount,u)):O[z]={maxKDE:h,maxCount:u}}return r[0].t.labels.kde=S._(t,"kde:"),r}},14348:function(ie,F,e){"use strict";var S=e(96404).setPositionOffset,k=["v","h"];ie.exports=function(o,T){for(var b=o.calcdata,p=T.xaxis,l=T.yaxis,t=0;t<k.length;t++){for(var i=k[t],r="h"===i?l:p,n=[],a=0;a<b.length;a++){var s=b[a],h=s[0].trace;!0!==h.visible||"violin"!==h.type||s[0].t.empty||h.orientation!==i||h.xaxis!==p._id||h.yaxis!==l._id||n.push(a)}S("violin",o,n,r)}}},36240:function(ie,F,e){"use strict";var S=e(3400),k=e(76308),o=e(90624),T=e(13988);ie.exports=function(b,p,l,t){function i(v,_){return S.coerce(b,p,T,v,_)}function r(v,_){return S.coerce2(b,p,T,v,_)}if(o.handleSampleDefaults(b,p,i,t),!1!==p.visible){i("bandwidth"),i("side"),i("width")||(i("scalegroup",p.name),i("scalemode"));var n,a=i("span");Array.isArray(a)&&(n="manual"),i("spanmode",n);var s=i("line.color",(b.marker||{}).color||l),c=i("line.width"),h=i("fillcolor",k.addOpacity(p.line.color,.5));o.handlePointsDefaults(b,p,i,{prefix:""});var u=r("box.width"),y=r("box.fillcolor",h),d=r("box.line.color",s),m=r("box.line.width",c);i("box.visible",!!(u||y||d||m))||(p.box={visible:!1});var g=r("meanline.color",s),x=r("meanline.width",c);i("meanline.visible",!(!g&&!x))||(p.meanline={visible:!1}),i("quartilemethod"),i("zorder")}}},63800:function(ie,F,e){"use strict";var S=e(3400),k=function(o){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*o*o)};F.makeKDE=function(o,T,b){var p=b.length,l=k,t=o.bandwidth,i=1/(p*t);return function(r){for(var n=0,a=0;a<p;a++)n+=l((r-b[a])/t);return i*n}},F.getPositionOnKdePath=function(o,T,b){var p,l;"h"===T.orientation?(p="y",l="x"):(p="x",l="y");var t=S.findPointOnPath(o.path,b,l,{pathLength:o.pathLength}),i=o.posCenterPx,r=t[p];return[r,"both"===T.side?2*i-r:i]},F.getKdeValue=function(o,T,b){var p=o.pts.map(F.extractVal);return F.makeKDE(o,T,p)(b)/o.posDensityScale},F.extractVal=function(o){return o.v}},78e3:function(ie,F,e){"use strict";var S=e(76308),k=e(3400),o=e(54460),T=e(27576),b=e(63800);ie.exports=function(p,l,t,i,r){r||(r={});var n,a,s=r.hoverLayer,c=p.cd,h=c[0].trace,u=h.hoveron,y=-1!==u.indexOf("violins"),d=-1!==u.indexOf("kde"),m=[];if(y||d){var g=T.hoverOnBoxes(p,l,t,i);if(d&&g.length>0){var x,v,_,f,C,w=p.xa,E=p.ya;"h"===h.orientation?(C=l,x="y",_=E,v="x",f=w):(C=t,x="x",_=w,v="y",f=E);var P=c[p.index];if(C>=P.span[0]&&C<=P.span[1]){var L=k.extendFlat({},p),O=f.c2p(C,!0),z=b.getKdeValue(P,h,C),V=b.getPositionOnKdePath(P,h,O),R=_._offset,U=_._length;L[x+"0"]=V[0],L[x+"1"]=V[1],L[v+"0"]=L[v+"1"]=O,L[v+"Label"]=v+": "+o.hoverLabelText(f,C,h[v+"hoverformat"])+", "+c[0].t.labels.kde+" "+z.toFixed(3);for(var Z=0,N=0;N<g.length;N++)if("med"===g[N].attr){Z=N;break}L.spikeDistance=g[Z].spikeDistance;var G=x+"Spike";L[G]=g[Z][G],g[Z].spikeDistance=void 0,g[Z][G]=void 0,L.hovertemplate=!1,m.push(L),(a={})[x+"1"]=k.constrain(R+V[0],R,R+U),a[x+"2"]=k.constrain(R+V[1],R,R+U),a[v+"1"]=a[v+"2"]=f._offset+O}}y&&(m=m.concat(g))}-1!==u.indexOf("points")&&(n=T.hoverOnPoints(p,l,t));var W=s.selectAll(".violinline-"+h.uid).data(a?[0]:[]);return W.enter().append("line").classed("violinline-"+h.uid,!0).attr("stroke-width",1.5),W.exit().remove(),W.attr(a).call(S.stroke,p.color),"closest"===i?n?[n]:m:(n&&m.push(n),m)}},22869:function(ie,F,e){"use strict";ie.exports={attributes:e(13988),layoutAttributes:e(98228),supplyDefaults:e(36240),crossTraceDefaults:e(90624).crossTraceDefaults,supplyLayoutDefaults:e(8939),calc:e(67064),crossTraceCalc:e(14348),plot:e(5140),style:e(95908),styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(78e3),selectPoints:e(8264),moduleType:"trace",name:"violin",basePlotModule:e(57952),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},98228:function(ie,F,e){"use strict";var S=e(16560),k=e(3400).extendFlat;ie.exports={violinmode:k({},S.boxmode,{}),violingap:k({},S.boxgap,{}),violingroupgap:k({},S.boxgroupgap,{})}},8939:function(ie,F,e){"use strict";var S=e(3400),k=e(98228),o=e(68832);ie.exports=function(T,b,p){o._supply(T,b,p,function(l,t){return S.coerce(T,b,k,l,t)},"violin")}},5140:function(ie,F,e){"use strict";var S=e(33428),k=e(3400),o=e(43616),T=e(18728),b=e(52340),p=e(63800);ie.exports=function(l,t,i,r){var n=l._context.staticPlot,a=l._fullLayout,s=t.xaxis,c=t.yaxis;function h(u,y){var d=b(u,{xaxis:s,yaxis:c,trace:y,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return o.smoothopen(d[0],1)}k.makeTraceGroups(r,i,"trace violins").each(function(u){var y=S.select(this),d=u[0],m=d.t,g=d.trace;if(!0!==g.visible||m.empty)y.remove();else{var x=m.bPos,v=m.bdPos,_=t[m.valLetter+"axis"],f=t[m.posLetter+"axis"],C="both"===g.side,w=C||"positive"===g.side,E=C||"negative"===g.side,P=y.selectAll("path.violin").data(k.identity);P.enter().append("path").style("vector-effect",n?"none":"non-scaling-stroke").attr("class","violin"),P.exit().remove(),P.each(function(N){var G,W,ae,re,ne,Q,$,X,oe=S.select(this),fe=N.density,ue=fe.length,ge=f.c2l(N.pos+x,!0),we=f.l2p(ge);if(g.width)G=m.maxKDE/v;else{var Te=a._violinScaleGroupStats[g.scalegroup];G="count"===g.scalemode?Te.maxKDE/v*(Te.maxCount/N.pts.length):Te.maxKDE/v}if(w){for($=new Array(ue),ne=0;ne<ue;ne++)(X=$[ne]={})[m.posLetter]=ge+fe[ne].v/G,X[m.valLetter]=_.c2l(fe[ne].t,!0);W=h($,g)}if(E){for($=new Array(ue),Q=0,ne=ue-1;Q<ue;Q++,ne--)(X=$[Q]={})[m.posLetter]=ge-fe[ne].v/G,X[m.valLetter]=_.c2l(fe[ne].t,!0);ae=h($,g)}if(C)re=W+"L"+ae.substr(1)+"Z";else{var xe=[we,_.c2p(fe[0].t)],ye=[we,_.c2p(fe[ue-1].t)];"h"===g.orientation&&(xe.reverse(),ye.reverse()),re=w?"M"+xe+"L"+W.substr(1)+"L"+ye:"M"+ye+"L"+ae.substr(1)+"L"+xe}oe.attr("d",re),N.posCenterPx=we,N.posDensityScale=G*v,N.path=oe.node(),N.pathLength=N.path.getTotalLength()/(C?2:1)});var L,O,z,V=g.box,R=V.width,U=(V.line||{}).width;C?(L=v*R,O=0):w?(L=[0,v*R/2],O=U*{x:1,y:-1}[m.posLetter]):(L=[v*R/2,0],O=U*{x:-1,y:1}[m.posLetter]),T.plotBoxAndWhiskers(y,{pos:f,val:_},g,{bPos:x,bdPos:L,bPosPxOffset:O}),T.plotBoxMean(y,{pos:f,val:_},g,{bPos:x,bdPos:L,bPosPxOffset:O}),!g.box.visible&&g.meanline.visible&&(z=k.identity);var Z=y.selectAll("path.meanline").data(z||[]);Z.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",n?"none":"non-scaling-stroke"),Z.exit().remove(),Z.each(function(N){var G=_.c2p(N.mean,!0),W=p.getPositionOnKdePath(N,g,G);S.select(this).attr("d","h"===g.orientation?"M"+G+","+W[0]+"V"+W[1]:"M"+W[0]+","+G+"H"+W[1])}),T.plotPoints(y,{x:s,y:c},g,m)}})}},95908:function(ie,F,e){"use strict";var S=e(33428),k=e(76308),o=e(49224).stylePoints;ie.exports=function(T){var b=S.select(T).selectAll("g.trace.violins");b.style("opacity",function(p){return p[0].trace.opacity}),b.each(function(p){var l=p[0].trace,t=S.select(this),i=l.box||{},r=i.line||{},n=l.meanline||{},a=n.width;t.selectAll("path.violin").style("stroke-width",l.line.width+"px").call(k.stroke,l.line.color).call(k.fill,l.fillcolor),t.selectAll("path.box").style("stroke-width",r.width+"px").call(k.stroke,r.color).call(k.fill,i.fillcolor);var s={"stroke-width":a+"px","stroke-dasharray":2*a+"px,"+a+"px"};t.selectAll("path.mean").style(s).call(k.stroke,n.color),t.selectAll("path.meanline").style(s).call(k.stroke,n.color),o(t,l,T)})}},58168:function(ie,F,e){"use strict";var S=e(49084),k=e(50048),o=e(16716),T=e(45464),b=e(92880).extendFlat,p=e(67824).overrideAll,l=ie.exports=p(b({x:k.x,y:k.y,z:k.z,value:k.value,isomin:k.isomin,isomax:k.isomax,surface:k.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:k.slices,caps:k.caps,text:k.text,hovertext:k.hovertext,xhoverformat:k.xhoverformat,yhoverformat:k.yhoverformat,zhoverformat:k.zhoverformat,valuehoverformat:k.valuehoverformat,hovertemplate:k.hovertemplate},S("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:k.colorbar,opacity:k.opacity,opacityscale:o.opacityscale,lightposition:k.lightposition,lighting:k.lighting,flatshading:k.flatshading,contour:k.contour,hoverinfo:b({},T.hoverinfo),showlegend:b({},T.showlegend,{dflt:!1})}),"calc","nested");l.x.editType=l.y.editType=l.z.editType=l.value.editType="calc+clearAxisTypes",l.transforms=void 0},91976:function(ie,F,e){"use strict";var S=e(67792).gl_mesh3d,k=e(33040).parseColorScale,o=e(3400).isArrayOrTypedArray,T=e(43080),b=e(8932).extractOpts,p=e(52094),l=e(31460).findNearestOnAxis,t=e(31460).generateIsoMeshes;function i(n,a,s){this.scene=n,this.uid=s,this.mesh=a,this.name="",this.data=null,this.showContour=!1}var r=i.prototype;r.handlePick=function(n){if(n.object===this.mesh){var a=n.data.index,c=this.data._meshY[a],h=this.data._meshZ[a],u=this.data._Ys.length,y=this.data._Zs.length,d=l(this.data._meshX[a],this.data._Xs).id,m=l(c,this.data._Ys).id,g=l(h,this.data._Zs).id,x=n.index=g+y*m+y*u*d;n.traceCoordinate=[this.data._meshX[x],this.data._meshY[x],this.data._meshZ[x],this.data._value[x]];var v=this.data.hovertext||this.data.text;return o(v)&&void 0!==v[x]?n.textLabel=v[x]:v&&(n.textLabel=v),!0}},r.update=function(n){var a=this.scene,s=a.fullSceneLayout;function c(y,d,m,g){return d.map(function(x){return y.d2l(x,0,g)*m})}this.data=t(n);var h={positions:p(c(s.xaxis,n._meshX,a.dataScale[0],n.xcalendar),c(s.yaxis,n._meshY,a.dataScale[1],n.ycalendar),c(s.zaxis,n._meshZ,a.dataScale[2],n.zcalendar)),cells:p(n._meshI,n._meshJ,n._meshK),lightPosition:[n.lightposition.x,n.lightposition.y,n.lightposition.z],ambient:n.lighting.ambient,diffuse:n.lighting.diffuse,specular:n.lighting.specular,roughness:n.lighting.roughness,fresnel:n.lighting.fresnel,vertexNormalsEpsilon:n.lighting.vertexnormalsepsilon,faceNormalsEpsilon:n.lighting.facenormalsepsilon,opacity:n.opacity,opacityscale:n.opacityscale,contourEnable:n.contour.show,contourColor:T(n.contour.color).slice(0,3),contourWidth:n.contour.width,useFacetNormals:n.flatshading},u=b(n);h.vertexIntensity=n._meshIntensity,h.vertexIntensityBounds=[u.min,u.max],h.colormap=k(n),this.mesh.update(h)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ie.exports=function(n,a){var c=S({gl:n.glplot.gl}),h=new i(n,c,a.uid);return c._trace=h,h.update(a),n.glplot.add(c),h}},12448:function(ie,F,e){"use strict";var S=e(3400),k=e(58168),o=e(70548).supplyIsoDefaults,T=e(60192).opacityscaleDefaults;ie.exports=function(b,p,l,t){function i(r,n){return S.coerce(b,p,k,r,n)}o(b,p,l,t,i),T(b,p,t,i)}},67776:function(ie,F,e){"use strict";ie.exports={attributes:e(58168),supplyDefaults:e(12448),calc:e(62624),colorbar:{min:"cmin",max:"cmax"},plot:e(91976),moduleType:"trace",name:"volume",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},65776:function(ie,F,e){"use strict";var S=e(20832),k=e(52904).line,o=e(45464),T=e(29736).axisHoverFormat,b=e(21776).Ks,p=e(21776).Gw,l=e(10213),t=e(92880).extendFlat,i=e(76308);function r(n){return{marker:{color:t({},S.marker.color,{arrayOk:!1,editType:"style"}),line:{color:t({},S.marker.line.color,{arrayOk:!1,editType:"style"}),width:t({},S.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}ie.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:S.x,x0:S.x0,dx:S.dx,y:S.y,y0:S.y0,dy:S.dy,xperiod:S.xperiod,yperiod:S.yperiod,xperiod0:S.xperiod0,yperiod0:S.yperiod0,xperiodalignment:S.xperiodalignment,yperiodalignment:S.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),hovertext:S.hovertext,hovertemplate:b({},{keys:l.eventDataKeys}),hoverinfo:t({},o.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:p({editType:"plot"},{keys:l.eventDataKeys.concat(["label"])}),text:S.text,textposition:S.textposition,insidetextanchor:S.insidetextanchor,textangle:S.textangle,textfont:S.textfont,insidetextfont:S.insidetextfont,outsidetextfont:S.outsidetextfont,constraintext:S.constraintext,cliponaxis:S.cliponaxis,orientation:S.orientation,offset:S.offset,width:S.width,increasing:r(),decreasing:r(),totals:r(),connector:{line:{color:t({},k.color,{dflt:i.defaultLine}),width:t({},k.width,{editType:"plot"}),dash:k.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:S.offsetgroup,alignmentgroup:S.alignmentgroup,zorder:S.zorder}},73540:function(ie,F,e){"use strict";var S=e(54460),k=e(1220),o=e(3400).mergeArray,T=e(4500),b=e(39032).BADNUM;function p(t){return"a"===t||"absolute"===t}function l(t){return"t"===t||"total"===t}ie.exports=function(t,i){var r,n,a,s,c,h,u=S.getFromId(t,i.xaxis||"x"),y=S.getFromId(t,i.yaxis||"y");"h"===i.orientation?(r=u.makeCalcdata(i,"x"),a=y.makeCalcdata(i,"y"),s=k(i,y,"y",a),c=!!i.yperiodalignment,h="y"):(r=y.makeCalcdata(i,"y"),a=u.makeCalcdata(i,"x"),s=k(i,u,"x",a),c=!!i.xperiodalignment,h="x"),n=s.vals;for(var d,m=Math.min(n.length,r.length),g=new Array(m),x=0,v=!1,_=0;_<m;_++){var f=r[_]||0,C=!1;(r[_]!==b||l(i.measure[_])||p(i.measure[_]))&&_+1<m&&(r[_+1]!==b||l(i.measure[_+1])||p(i.measure[_+1]))&&(C=!0);var w=g[_]={i:_,p:n[_],s:f,rawS:f,cNext:C};p(i.measure[_])?(x=w.s,w.isSum=!0,w.dir="totals",w.s=x):l(i.measure[_])?(w.isSum=!0,w.dir="totals",w.s=x):(w.isSum=!1,w.dir=w.rawS<0?"decreasing":"increasing",w.s=x+(d=w.s),x+=d),"totals"===w.dir&&(v=!0),c&&(g[_].orig_p=a[_],g[_][h+"End"]=s.ends[_],g[_][h+"Start"]=s.starts[_]),i.ids&&(w.id=String(i.ids[_])),w.v=(i.base||0)+x}return g.length&&(g[0].hasTotals=v),o(i.text,g,"tx"),o(i.hovertext,g,"htx"),T(g,i),g}},10213:function(ie){"use strict";ie.exports={eventDataKeys:["initial","delta","final"]}},50152:function(ie,F,e){"use strict";var S=e(96376).setGroupPositions;ie.exports=function(k,o){var T,b,p=k._fullLayout,l=k._fullData,t=k.calcdata,i=o.xaxis,r=o.yaxis,n=[],a=[],s=[];for(b=0;b<l.length;b++){var c=l[b];!0===c.visible&&c.xaxis===i._id&&c.yaxis===r._id&&"waterfall"===c.type&&(T=t[b],"h"===c.orientation?s.push(T):a.push(T),n.push(T))}var h={mode:p.waterfallmode,norm:p.waterfallnorm,gap:p.waterfallgap,groupgap:p.waterfallgroupgap};for(S(k,i,r,a,h),S(k,r,i,s,h),b=0;b<n.length;b++){T=n[b];for(var u=0;u<T.length;u++){var y=T[u];!1===y.isSum&&(y.s0+=0===u?0:T[u-1].s),u+1<T.length&&(T[u].nextP0=T[u+1].p0,T[u].nextS0=T[u+1].s0)}}}},24224:function(ie,F,e){"use strict";var S=e(3400),k=e(20011),o=e(31508).handleText,T=e(43980),b=e(31147),p=e(65776),l=e(76308),t=e(48164),i=t.INCREASING.COLOR,r=t.DECREASING.COLOR;function n(a,s,c){a(s+".marker.color",c),a(s+".marker.line.color",l.defaultLine),a(s+".marker.line.width")}ie.exports={supplyDefaults:function(a,s,c,h){function u(d,m){return S.coerce(a,s,p,d,m)}if(T(a,s,h,u)){b(a,s,h,u),u("xhoverformat"),u("yhoverformat"),u("measure"),u("orientation",s.x&&!s.y?"h":"v"),u("base"),u("offset"),u("width"),u("text"),u("hovertext"),u("hovertemplate");var y=u("textposition");o(a,s,h,u,y,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==s.textposition&&(u("texttemplate"),s.texttemplate||u("textinfo")),n(u,"increasing",i),n(u,"decreasing",r),n(u,"totals","#4499FF"),u("connector.visible")&&(u("connector.mode"),u("connector.line.width")&&(u("connector.line.color"),u("connector.line.dash"))),u("zorder")}else s.visible=!1},crossTraceDefaults:function(a,s){var c,h;function u(d){return S.coerce(h._input,h,p,d)}if("group"===s.waterfallmode)for(var y=0;y<a.length;y++)c=(h=a[y])._input,k(c,h,s,u)}}},53256:function(ie){"use strict";ie.exports=function(F,e){return F.x="xVal"in e?e.xVal:e.x,F.y="yVal"in e?e.yVal:e.y,"initial"in e&&(F.initial=e.initial),"delta"in e&&(F.delta=e.delta),"final"in e&&(F.final=e.final),e.xa&&(F.xaxis=e.xa),e.ya&&(F.yaxis=e.ya),F}},94196:function(ie,F,e){"use strict";var S=e(54460).hoverLabelText,k=e(76308).opacity,o=e(63400).hoverOnBars,T=e(48164),b=T.INCREASING.SYMBOL,p=T.DECREASING.SYMBOL;ie.exports=function(l,t,i,r,n){var L,O,z,V,a=o(l,t,i,r,n);if(a){var s=a.cd,c=s[0].trace,h="h"===c.orientation,u=h?"x":"y",y=h?l.xa:l.ya,d=s[a.index],m=d.isSum?d.b+d.s:d.rawS;a.initial=d.b+d.s-m,a.delta=m,a.final=a.initial+a.delta;var g=w(Math.abs(a.delta));a.deltaLabel=m<0?"("+g+")":g,a.finalLabel=w(a.final),a.initialLabel=w(a.initial);var x=d.hi||c.hoverinfo,v=[];if(x&&"none"!==x&&"skip"!==x){var _="all"===x,f=x.split("+"),C=function(E){return _||-1!==f.indexOf(E)};d.isSum||(!C("final")||C(h?"x":"y")||v.push(a.finalLabel),C("delta")&&v.push(m<0?a.deltaLabel+" "+p:a.deltaLabel+" "+b),C("initial")&&v.push("Initial: "+a.initialLabel))}return v.length&&(a.extraText=v.join("<br>")),a.color=(z=(L=c[d.dir].marker).line.color,V=L.line.width,k(O=L.color)?O:k(z)&&V?z:void 0),[a]}function w(E){return S(y,E,c[u+"hoverformat"])}}},95952:function(ie,F,e){"use strict";ie.exports={attributes:e(65776),layoutAttributes:e(91352),supplyDefaults:e(24224).supplyDefaults,crossTraceDefaults:e(24224).crossTraceDefaults,supplyLayoutDefaults:e(59464),calc:e(73540),crossTraceCalc:e(50152),plot:e(64488),style:e(12252).style,hoverPoints:e(94196),eventData:e(53256),selectPoints:e(45784),moduleType:"trace",name:"waterfall",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},91352:function(ie){"use strict";ie.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},59464:function(ie,F,e){"use strict";var S=e(3400),k=e(91352);ie.exports=function(o,T,b){var p=!1;function l(r,n){return S.coerce(o,T,k,r,n)}for(var t=0;t<b.length;t++){var i=b[t];if(i.visible&&"waterfall"===i.type){p=!0;break}}p&&(l("waterfallmode"),l("waterfallgap",.2),l("waterfallgroupgap"))}},64488:function(ie,F,e){"use strict";var S=e(33428),k=e(3400),o=e(43616),T=e(39032).BADNUM,b=e(98184),p=e(82744).clearMinTextSize;ie.exports=function(l,t,i,r){var a,s,u,y,n=l._fullLayout;p("waterfall",n),b.plot(l,t,i,r,{mode:n.waterfallmode,norm:n.waterfallmode,gap:n.waterfallgap,groupgap:n.waterfallgroupgap}),a=l,u=(s=t).xaxis,y=s.yaxis,k.makeTraceGroups(r,i,"trace bars").each(function(d){var m=S.select(this),g=d[0].trace,x=k.ensureSingle(m,"g","lines");if(g.connector&&g.connector.visible){var v="h"===g.orientation,_=g.connector.mode,f=x.selectAll("g.line").data(k.identity);f.enter().append("g").classed("line",!0),f.exit().remove();var C=f.size();f.each(function(w,E){if(E===C-1||w.cNext){var P=(R=u,U=y,G=[],ae=(Z=v)?U:R,(N=[])[0]=(W=Z?R:U).c2p((V=w).s0,!0),G[0]=ae.c2p(V.p0,!0),N[1]=W.c2p(V.s1,!0),G[1]=ae.c2p(V.p1,!0),N[2]=W.c2p(V.nextS0,!0),G[2]=ae.c2p(V.nextP0,!0),Z?[N,G]:[G,N]),L=P[0],O=P[1],z="";L[0]!==T&&O[0]!==T&&L[1]!==T&&O[1]!==T&&("spanning"===_&&!w.isSum&&E>0&&(z+=v?"M"+L[0]+","+O[1]+"V"+O[0]:"M"+L[1]+","+O[0]+"H"+L[0]),"between"!==_&&(w.isSum||E<C-1)&&(z+=v?"M"+L[1]+","+O[0]+"V"+O[1]:"M"+L[0]+","+O[1]+"H"+L[1]),L[2]!==T&&O[2]!==T&&(z+=v?"M"+L[1]+","+O[1]+"V"+O[2]:"M"+L[1]+","+O[1]+"H"+L[2])),""===z&&(z="M0,0Z"),k.ensureSingle(S.select(this),"path").attr("d",z).call(o.setClipUrl,s.layerClipId,a)}var V,R,U,Z,N,G,W,ae})}else x.remove()})}},12252:function(ie,F,e){"use strict";var S=e(33428),k=e(43616),o=e(76308),T=e(13448).DESELECTDIM,b=e(60100),p=e(82744).resizeText,l=b.styleTextPoints;ie.exports={style:function(t,i,r){var n=r||S.select(t).selectAll('g[class^="waterfalllayer"]').selectAll("g.trace");p(t,n,"waterfall"),n.style("opacity",function(a){return a[0].trace.opacity}),n.each(function(a){var s=S.select(this),c=a[0].trace;s.selectAll(".point > path").each(function(h){if(!h.isBlank){var u=c[h.dir].marker;S.select(this).call(o.fill,u.color).call(o.stroke,u.line.color).call(k.dashLine,u.line.dash,u.line.width).style("opacity",c.selectedpoints&&!h.selected?T:1)}}),l(s,c,t),s.selectAll(".lines").each(function(){var h=c.connector.line;k.lineGroupStyle(S.select(this).selectAll("path"),h.width,h.color,h.dash)})})}}},84224:function(ie,F,e){"use strict";var S=e(54460),k=e(3400),o=e(73060),T=e(60468).W,b=e(39032).BADNUM;F.moduleType="transform",F.name="aggregate";var p=F.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},l=p.aggregations;function t(a,s,c,h){if(h.enabled){for(var u=h.target,y=k.nestedProperty(s,u),d=y.get(),m=function(v,_){var C=_.d2c,w=_.c2d;switch(v.func){case"count":return i;case"first":return r;case"last":return n;case"sum":return function(E,P){for(var L=0,O=0;O<P.length;O++){var z=C(E[P[O]]);z!==b&&(L+=z)}return w(L)};case"avg":return function(E,P){for(var L=0,O=0,z=0;z<P.length;z++){var V=C(E[P[z]]);V!==b&&(L+=V,O++)}return O?w(L/O):b};case"min":return function(E,P){for(var L=1/0,O=0;O<P.length;O++){var z=C(E[P[O]]);z!==b&&(L=Math.min(L,z))}return L===1/0?b:w(L)};case"max":return function(E,P){for(var L=-1/0,O=0;O<P.length;O++){var z=C(E[P[O]]);z!==b&&(L=Math.max(L,z))}return L===-1/0?b:w(L)};case"range":return function(E,P){for(var L=1/0,O=-1/0,z=0;z<P.length;z++){var V=C(E[P[z]]);V!==b&&(L=Math.min(L,V),O=Math.max(O,V))}return O===-1/0||L===1/0?b:w(O-L)};case"change":return function(E,P){var L=C(E[P[0]]),O=C(E[P[P.length-1]]);return L===b||O===b?b:w(O-L)};case"median":return function(E,P){for(var L=[],O=0;O<P.length;O++){var z=C(E[P[O]]);z!==b&&L.push(z)}if(!L.length)return b;L.sort(k.sorterAsc);var V=(L.length-1)/2;return w((L[Math.floor(V)]+L[Math.ceil(V)])/2)};case"mode":return function(E,P){for(var L={},O=0,z=b,V=0;V<P.length;V++){var R=C(E[P[V]]);if(R!==b){var U=L[R]=(L[R]||0)+1;U>O&&(O=U,z=R)}}return O?w(z):b};case"rms":return function(E,P){for(var L=0,O=0,z=0;z<P.length;z++){var V=C(E[P[z]]);V!==b&&(L+=V*V,O++)}return O?w(Math.sqrt(L/O)):b};case"stddev":return function(E,P){var L,O=0,z=0,V=1,R=b;for(L=0;L<P.length&&R===b;L++)R=C(E[P[L]]);if(R===b)return b;for(;L<P.length;L++){var U=C(E[P[L]]);if(U!==b){var Z=U-R;O+=Z,z+=Z*Z,V++}}var N="sample"===v.funcmode?V-1:V;return N?Math.sqrt((z-O*O/V)/N):0}}}(h,S.getDataConversions(a,s,u,d)),g=new Array(c.length),x=0;x<c.length;x++)g[x]=m(d,c[x]);y.set(g),"count"===h.func&&k.pushUnique(s._arrayAttrs,u)}}function i(a,s){return s.length}function r(a,s){return a[s[0]]}function n(a,s){return a[s[s.length-1]]}F.supplyDefaults=function(a,s){var c,h={};function u(w,E){return k.coerce(a,h,p,w,E)}if(!u("enabled"))return h;var y=o.findArrayAttributes(s),d={};for(c=0;c<y.length;c++)d[y[c]]=1;var m=u("groups");if(!Array.isArray(m)){if(!d[m])return h.enabled=!1,h;d[m]=0}var g,x=a.aggregations||[],v=h.aggregations=new Array(x.length);function _(w,E){return k.coerce(x[c],g,l,w,E)}for(c=0;c<x.length;c++){g={_index:c};var f=_("target"),C=_("func");_("enabled")&&f&&(d[f]||"count"===C&&void 0===d[f])?("stddev"===C&&_("funcmode"),d[f]=0,v[c]=g):v[c]={enabled:!1,_index:c}}for(c=0;c<y.length;c++)d[y[c]]&&v.push({target:y[c],func:l.func.dflt,enabled:!0,_index:-1});return h},F.calcTransform=function(a,s,c){if(c.enabled){var h=c.groups,u=k.getTargetArray(s,{target:h});if(u){var y,d,m,x={},v={},_=[],f=T(s.transforms,c),C=u.length;for(s._length&&(C=Math.min(C,s._length)),y=0;y<C;y++)void 0===(m=x[d=u[y]])?(x[d]=_.length,_.push([y]),v[x[d]]=f(y)):(_[m].push(y),v[x[d]]=(v[x[d]]||[]).concat(f(y)));c._indexToPoints=v;var w=c.aggregations;for(y=0;y<w.length;y++)t(a,s,_,w[y]);"string"==typeof h&&t(a,s,_,{target:h,func:"first",enabled:!0}),s._length=_.length}}}},76744:function(ie,F,e){"use strict";var S=e(3400),k=e(24040),o=e(54460),T=e(60468).W,b=e(69104),p=b.COMPARISON_OPS,l=b.INTERVAL_OPS,t=b.SET_OPS;F.moduleType="transform",F.name="filter",F.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(p).concat(l).concat(t),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},F.supplyDefaults=function(i){var r={};function n(c,h){return S.coerce(i,r,F.attributes,c,h)}if(n("enabled")){var a=n("target");if(S.isArrayOrTypedArray(a)&&0===a.length)return r.enabled=!1,r;n("preservegaps"),n("operation"),n("value");var s=k.getComponentMethod("calendars","handleDefaults");s(i,r,"valuecalendar",null),s(i,r,"targetcalendar",null)}return r},F.calcTransform=function(i,r,n){if(n.enabled){var a=S.getTargetArray(r,n);if(a){var s=n.target,c=a.length;r._length&&(c=Math.min(c,r._length));var h=n.targetcalendar,u=r._arrayAttrs,y=n.preservegaps;if("string"==typeof s){var d=S.nestedProperty(r,s+"calendar").get();d&&(h=d)}var m,g,x=function(P,L,O){var z=P.operation,V=P.value,R=S.isArrayOrTypedArray(V);function U(W){return-1!==W.indexOf(z)}var Z,N=function(W){return L(W,0,P.valuecalendar)},G=function(W){return L(W,0,O)};switch(U(p)?Z=N(R?V[0]:V):U(l)?Z=R?[N(V[0]),N(V[1])]:[N(V),N(V)]:U(t)&&(Z=R?V.map(N):[N(V)]),z){case"=":return function(W){return G(W)===Z};case"!=":return function(W){return G(W)!==Z};case"<":return function(W){return G(W)<Z};case"<=":return function(W){return G(W)<=Z};case">":return function(W){return G(W)>Z};case">=":return function(W){return G(W)>=Z};case"[]":return function(W){var ae=G(W);return ae>=Z[0]&&ae<=Z[1]};case"()":return function(W){var ae=G(W);return ae>Z[0]&&ae<Z[1]};case"[)":return function(W){var ae=G(W);return ae>=Z[0]&&ae<Z[1]};case"(]":return function(W){var ae=G(W);return ae>Z[0]&&ae<=Z[1]};case"][":return function(W){var ae=G(W);return ae<=Z[0]||ae>=Z[1]};case")(":return function(W){var ae=G(W);return ae<Z[0]||ae>Z[1]};case"](":return function(W){var ae=G(W);return ae<=Z[0]||ae>Z[1]};case")[":return function(W){var ae=G(W);return ae<Z[0]||ae>=Z[1]};case"{}":return function(W){return-1!==Z.indexOf(G(W))};case"}{":return function(W){return-1===Z.indexOf(G(W))}}}(n,o.getDataToCoordFunc(i,r,s,a),h),v={},_={},f=0;y?(m=function(P){v[P.astr]=S.extendDeep([],P.get()),P.set(new Array(c))},g=function(P,L){var O=v[P.astr][L];P.get()[L]=O}):(m=function(P){v[P.astr]=S.extendDeep([],P.get()),P.set([])},g=function(P,L){var O=v[P.astr][L];P.get().push(O)}),E(m);for(var C=T(r.transforms,n),w=0;w<c;w++)x(a[w])?(E(g,w),_[f++]=C(w)):y&&f++;n._indexToPoints=_,r._length=f}}function E(P,L){for(var O=0;O<u.length;O++)P(S.nestedProperty(r,u[O]),L)}}},32028:function(ie,F,e){"use strict";var S=e(3400),k=e(73060),o=e(7316),T=e(60468).W;function b(p,l){var t,i,r,n,a,s,c,h,u,y,d=l.transform,m=l.transformIndex,g=p.transforms[m].groups,x=T(p.transforms,d);if(!S.isArrayOrTypedArray(g)||0===g.length)return[p];var v=S.filterUnique(g),_=new Array(v.length),f=g.length,C=k.findArrayAttributes(p),w=d.styles||[],E={};for(t=0;t<w.length;t++)E[w[t].target]=w[t].value;d.styles&&(y=S.keyedContainer(d,"styles","target","value.name"));var P={},L={};for(t=0;t<v.length;t++){P[s=v[t]]=t,L[s]=0,(c=_[t]=S.extendDeepNoArrays({},p))._group=s,c.transforms[m]._indexToPoints={};var O=null;for(y&&(O=y.get(s)),c.name=O||""===O?O:S.templateString(d.nameformat,{trace:p.name,group:s}),h=c.transforms,c.transforms=[],i=0;i<h.length;i++)c.transforms[i]=S.extendDeepNoArrays({},h[i]);for(i=0;i<C.length;i++)S.nestedProperty(c,C[i]).set([])}for(r=0;r<C.length;r++){for(n=C[r],i=0,u=[];i<v.length;i++)u[i]=S.nestedProperty(_[i],n).get();for(a=S.nestedProperty(p,n).get(),i=0;i<f;i++)u[P[g[i]]].push(a[i])}for(i=0;i<f;i++)(c=_[P[g[i]]]).transforms[m]._indexToPoints[L[g[i]]]=x(i),L[g[i]]++;for(t=0;t<v.length;t++)s=v[t],o.clearExpandedTraceDefaultColors(c=_[t]),c=S.extendDeepNoArrays(c,E[s]||{});return _}F.moduleType="transform",F.name="groupby",F.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},F.supplyDefaults=function(p,l,t){var i,r={};function n(u,y){return S.coerce(p,r,F.attributes,u,y)}if(!n("enabled"))return r;n("groups"),n("nameformat",t._dataLength>1?"%{group} (%{trace})":"%{group}");var a=p.styles,s=r.styles=[];if(a)for(i=0;i<a.length;i++){var c=s[i]={};S.coerce(a[i],s[i],F.attributes.styles,"target");var h=S.coerce(a[i],s[i],F.attributes.styles,"value");S.isPlainObject(h)?c.value=S.extendDeep({},h):h&&delete c.value}return r},F.transform=function(p,l){var t,i,r,n=[];for(i=0;i<p.length;i++)for(t=b(p[i],l),r=0;r<t.length;r++)n.push(t[r]);return n}},60468:function(ie,F){"use strict";F.W=function(e,S){for(var k,o,T=0;T<e.length&&(k=e[T])!==S;T++)k._indexToPoints&&!1!==k.enabled&&(o=k._indexToPoints);return o?function(p){return o[p]}:function(p){return[p]}}},76272:function(ie,F,e){"use strict";var S=e(3400),k=e(54460),o=e(60468).W,T=e(39032).BADNUM;F.moduleType="transform",F.name="sort",F.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},F.supplyDefaults=function(b){var p={};function l(t,i){return S.coerce(b,p,F.attributes,t,i)}return l("enabled")&&(l("target"),l("order")),p},F.calcTransform=function(b,p,l){if(l.enabled){var t=S.getTargetArray(p,l);if(t){var i=l.target,r=t.length;p._length&&(r=Math.min(r,p._length));var n,a,s=p._arrayAttrs,c=function(g,x,v,_){var f,C=new Array(_),w=new Array(_);for(f=0;f<_;f++)C[f]={v:x[f],i:f};for(C.sort(function(E,P){switch(E.order){case"ascending":return function(L,O){var z=P(L.v),V=P(O.v);return z===T?1:V===T?-1:z-V};case"descending":return function(L,O){var z=P(L.v),V=P(O.v);return z===T?1:V===T?-1:V-z}}}(g,v)),f=0;f<_;f++)w[f]=C[f].i;return w}(l,t,k.getDataToCoordFunc(b,p,i,t),r),h=o(p.transforms,l),u={};for(n=0;n<s.length;n++){var y=S.nestedProperty(p,s[n]),d=y.get(),m=new Array(r);for(a=0;a<r;a++)m[a]=d[c[a]];y.set(m)}for(a=0;a<r;a++)u[a]=h(c[a]);l._indexToPoints=u,p._length=r}}}},25788:function(ie,F){"use strict";F.version="2.33.0"},67792:function(ie,F,e){var S=e(4168);!function(){var k={1964:function(p,l,t){p.exports={alpha_shape:t(3502),convex_hull:t(7352),delaunay_triangulate:t(7642),gl_cone3d:t(6405),gl_error3d:t(9165),gl_heatmap2d:t(2510),gl_line3d:t(5714),gl_mesh3d:t(7201),gl_plot2d:t(1850),gl_plot3d:t(4100),gl_pointcloud2d:t(4696),gl_scatter3d:t(8418),gl_select_box:t(3161),gl_spikes2d:t(4098),gl_streamtube3d:t(7815),gl_surface3d:t(9499),ndarray:t(9618),ndarray_linear_interpolate:t(4317)}},4793:function(p,l,t){"use strict";function r(ve){var Me=function(Le,Ue){if("object"!=c(Le)||!Le)return Le;var ze=Le[Symbol.toPrimitive];if(void 0!==ze){var qe=ze.call(Le,"string");if("object"!=c(qe))return qe;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Le)}(ve);return"symbol"==c(Me)?Me:Me+""}function n(){try{var ve=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(n=function(){return!!ve})()}function a(ve){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Me){return Me.__proto__||Object.getPrototypeOf(Me)})(ve)}function s(ve,Me){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Le,Ue){return Le.__proto__=Ue,Le})(ve,Me)}function c(ve){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Me){return typeof Me}:function(Me){return Me&&"function"==typeof Symbol&&Me.constructor===Symbol&&Me!==Symbol.prototype?"symbol":typeof Me})(ve)}var h=t(7507),u=t(3778),y="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;l.hp=g,l.IS=50;var d=2147483647;function m(ve){if(ve>d)throw new RangeError('The value "'+ve+'" is invalid for option "size"');var Me=new Uint8Array(ve);return Object.setPrototypeOf(Me,g.prototype),Me}function g(ve,Me,Le){if("number"==typeof ve){if("string"==typeof Me)throw new TypeError('The "string" argument must be of type string. Received type number');return _(ve)}return x(ve,Me,Le)}function x(ve,Me,Le){if("string"==typeof ve)return function(qe,Ke){if("string"==typeof Ke&&""!==Ke||(Ke="utf8"),!g.isEncoding(Ke))throw new TypeError("Unknown encoding: "+Ke);var it=0|E(qe,Ke),ft=m(it),dt=ft.write(qe,Ke);return dt!==it&&(ft=ft.slice(0,dt)),ft}(ve,Me);if(ArrayBuffer.isView(ve))return function(qe){if(Ae(qe,Uint8Array)){var Ke=new Uint8Array(qe);return C(Ke.buffer,Ke.byteOffset,Ke.byteLength)}return f(qe)}(ve);if(null==ve)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+c(ve));if(Ae(ve,ArrayBuffer)||ve&&Ae(ve.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ae(ve,SharedArrayBuffer)||ve&&Ae(ve.buffer,SharedArrayBuffer)))return C(ve,Me,Le);if("number"==typeof ve)throw new TypeError('The "value" argument must not be of type number. Received type number');var Ue=ve.valueOf&&ve.valueOf();if(null!=Ue&&Ue!==ve)return g.from(Ue,Me,Le);var ze=function(qe){if(g.isBuffer(qe)){var Ke=0|w(qe.length),it=m(Ke);return 0===it.length||qe.copy(it,0,0,Ke),it}return void 0!==qe.length?"number"!=typeof qe.length||Ce(qe.length)?m(0):f(qe):"Buffer"===qe.type&&Array.isArray(qe.data)?f(qe.data):void 0}(ve);if(ze)return ze;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof ve[Symbol.toPrimitive])return g.from(ve[Symbol.toPrimitive]("string"),Me,Le);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+c(ve))}function v(ve){if("number"!=typeof ve)throw new TypeError('"size" argument must be of type number');if(ve<0)throw new RangeError('The value "'+ve+'" is invalid for option "size"')}function _(ve){return v(ve),m(ve<0?0:0|w(ve))}function f(ve){for(var Me=ve.length<0?0:0|w(ve.length),Le=m(Me),Ue=0;Ue<Me;Ue+=1)Le[Ue]=255&ve[Ue];return Le}function C(ve,Me,Le){if(Me<0||ve.byteLength<Me)throw new RangeError('"offset" is outside of buffer bounds');if(ve.byteLength<Me+(Le||0))throw new RangeError('"length" is outside of buffer bounds');var Ue;return Ue=void 0===Me&&void 0===Le?new Uint8Array(ve):void 0===Le?new Uint8Array(ve,Me):new Uint8Array(ve,Me,Le),Object.setPrototypeOf(Ue,g.prototype),Ue}function w(ve){if(ve>=d)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d.toString(16)+" bytes");return 0|ve}function E(ve,Me){if(g.isBuffer(ve))return ve.length;if(ArrayBuffer.isView(ve)||Ae(ve,ArrayBuffer))return ve.byteLength;if("string"!=typeof ve)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+c(ve));var Le=ve.length,Ue=arguments.length>2&&!0===arguments[2];if(!Ue&&0===Le)return 0;for(var ze=!1;;)switch(Me){case"ascii":case"latin1":case"binary":return Le;case"utf8":case"utf-8":return ce(ve).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Le;case"hex":return Le>>>1;case"base64":return me(ve).length;default:if(ze)return Ue?-1:ce(ve).length;Me=(""+Me).toLowerCase(),ze=!0}}function P(ve,Me,Le){var Ue=!1;if((void 0===Me||Me<0)&&(Me=0),Me>this.length||((void 0===Le||Le>this.length)&&(Le=this.length),Le<=0)||(Le>>>=0)<=(Me>>>=0))return"";for(ve||(ve="utf8");;)switch(ve){case"hex":return Q(this,Me,Le);case"utf8":case"utf-8":return W(this,Me,Le);case"ascii":return re(this,Me,Le);case"latin1":case"binary":return ne(this,Me,Le);case"base64":return G(this,Me,Le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,Me,Le);default:if(Ue)throw new TypeError("Unknown encoding: "+ve);ve=(ve+"").toLowerCase(),Ue=!0}}function L(ve,Me,Le){var Ue=ve[Me];ve[Me]=ve[Le],ve[Le]=Ue}function O(ve,Me,Le,Ue,ze){if(0===ve.length)return-1;if("string"==typeof Le?(Ue=Le,Le=0):Le>2147483647?Le=2147483647:Le<-2147483648&&(Le=-2147483648),Ce(Le=+Le)&&(Le=ze?0:ve.length-1),Le<0&&(Le=ve.length+Le),Le>=ve.length){if(ze)return-1;Le=ve.length-1}else if(Le<0){if(!ze)return-1;Le=0}if("string"==typeof Me&&(Me=g.from(Me,Ue)),g.isBuffer(Me))return 0===Me.length?-1:z(ve,Me,Le,Ue,ze);if("number"==typeof Me)return Me&=255,"function"==typeof Uint8Array.prototype.indexOf?ze?Uint8Array.prototype.indexOf.call(ve,Me,Le):Uint8Array.prototype.lastIndexOf.call(ve,Me,Le):z(ve,[Me],Le,Ue,ze);throw new TypeError("val must be string, number or Buffer")}function z(ve,Me,Le,Ue,ze){var qe,Ke=1,it=ve.length,ft=Me.length;if(void 0!==Ue&&("ucs2"===(Ue=String(Ue).toLowerCase())||"ucs-2"===Ue||"utf16le"===Ue||"utf-16le"===Ue)){if(ve.length<2||Me.length<2)return-1;Ke=2,it/=2,ft/=2,Le/=2}function dt(lt,ot){return 1===Ke?lt[ot]:lt.readUInt16BE(ot*Ke)}if(ze){var kt=-1;for(qe=Le;qe<it;qe++)if(dt(ve,qe)===dt(Me,-1===kt?0:qe-kt)){if(-1===kt&&(kt=qe),qe-kt+1===ft)return kt*Ke}else-1!==kt&&(qe-=qe-kt),kt=-1}else for(Le+ft>it&&(Le=it-ft),qe=Le;qe>=0;qe--){for(var St=!0,Tt=0;Tt<ft;Tt++)if(dt(ve,qe+Tt)!==dt(Me,Tt)){St=!1;break}if(St)return qe}return-1}function V(ve,Me,Le,Ue){Le=Number(Le)||0;var ze=ve.length-Le;Ue?(Ue=Number(Ue))>ze&&(Ue=ze):Ue=ze;var qe,Ke=Me.length;for(Ue>Ke/2&&(Ue=Ke/2),qe=0;qe<Ue;++qe){var it=parseInt(Me.substr(2*qe,2),16);if(Ce(it))return qe;ve[Le+qe]=it}return qe}function R(ve,Me,Le,Ue){return Pe(ce(Me,ve.length-Le),ve,Le,Ue)}function U(ve,Me,Le,Ue){return Pe(function(ze){for(var qe=[],Ke=0;Ke<ze.length;++Ke)qe.push(255&ze.charCodeAt(Ke));return qe}(Me),ve,Le,Ue)}function Z(ve,Me,Le,Ue){return Pe(me(Me),ve,Le,Ue)}function N(ve,Me,Le,Ue){return Pe(function(ze,qe){for(var Ke,it,dt=[],kt=0;kt<ze.length&&!((qe-=2)<0);++kt)it=(Ke=ze.charCodeAt(kt))>>8,dt.push(Ke%256),dt.push(it);return dt}(Me,ve.length-Le),ve,Le,Ue)}function G(ve,Me,Le){return h.fromByteArray(0===Me&&Le===ve.length?ve:ve.slice(Me,Le))}function W(ve,Me,Le){Le=Math.min(ve.length,Le);for(var Ue=[],ze=Me;ze<Le;){var qe=ve[ze],Ke=null,it=qe>239?4:qe>223?3:qe>191?2:1;if(ze+it<=Le){var ft=void 0,dt=void 0,kt=void 0,St=void 0;switch(it){case 1:qe<128&&(Ke=qe);break;case 2:128==(192&(ft=ve[ze+1]))&&(St=(31&qe)<<6|63&ft)>127&&(Ke=St);break;case 3:dt=ve[ze+2],128==(192&(ft=ve[ze+1]))&&128==(192&dt)&&(St=(15&qe)<<12|(63&ft)<<6|63&dt)>2047&&(St<55296||St>57343)&&(Ke=St);break;case 4:dt=ve[ze+2],kt=ve[ze+3],128==(192&(ft=ve[ze+1]))&&128==(192&dt)&&128==(192&kt)&&(St=(15&qe)<<18|(63&ft)<<12|(63&dt)<<6|63&kt)>65535&&St<1114112&&(Ke=St)}}null===Ke?(Ke=65533,it=1):Ke>65535&&(Ue.push((Ke-=65536)>>>10&1023|55296),Ke=56320|1023&Ke),Ue.push(Ke),ze+=it}return function(Tt){var lt=Tt.length;if(lt<=ae)return String.fromCharCode.apply(String,Tt);for(var ot="",Rt=0;Rt<lt;)ot+=String.fromCharCode.apply(String,Tt.slice(Rt,Rt+=ae));return ot}(Ue)}(g.TYPED_ARRAY_SUPPORT=function(){try{var ve=new Uint8Array(1),Me={foo:function(){return 42}};return Object.setPrototypeOf(Me,Uint8Array.prototype),Object.setPrototypeOf(ve,Me),42===ve.foo()}catch{return!1}}())||typeof console>"u"||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(g.prototype,"parent",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.buffer}}),Object.defineProperty(g.prototype,"offset",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.byteOffset}}),g.poolSize=8192,g.from=function(ve,Me,Le){return x(ve,Me,Le)},Object.setPrototypeOf(g.prototype,Uint8Array.prototype),Object.setPrototypeOf(g,Uint8Array),g.alloc=function(ve,Me,Le){return ze=Me,qe=Le,v(Ue=ve),Ue<=0?m(Ue):void 0!==ze?"string"==typeof qe?m(Ue).fill(ze,qe):m(Ue).fill(ze):m(Ue);var Ue,ze,qe},g.allocUnsafe=function(ve){return _(ve)},g.allocUnsafeSlow=function(ve){return _(ve)},g.isBuffer=function(ve){return null!=ve&&!0===ve._isBuffer&&ve!==g.prototype},g.compare=function(ve,Me){if(Ae(ve,Uint8Array)&&(ve=g.from(ve,ve.offset,ve.byteLength)),Ae(Me,Uint8Array)&&(Me=g.from(Me,Me.offset,Me.byteLength)),!g.isBuffer(ve)||!g.isBuffer(Me))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ve===Me)return 0;for(var Le=ve.length,Ue=Me.length,ze=0,qe=Math.min(Le,Ue);ze<qe;++ze)if(ve[ze]!==Me[ze]){Le=ve[ze],Ue=Me[ze];break}return Le<Ue?-1:Ue<Le?1:0},g.isEncoding=function(ve){switch(String(ve).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},g.concat=function(ve,Me){if(!Array.isArray(ve))throw new TypeError('"list" argument must be an Array of Buffers');if(0===ve.length)return g.alloc(0);var Le;if(void 0===Me)for(Me=0,Le=0;Le<ve.length;++Le)Me+=ve[Le].length;var Ue=g.allocUnsafe(Me),ze=0;for(Le=0;Le<ve.length;++Le){var qe=ve[Le];if(Ae(qe,Uint8Array))ze+qe.length>Ue.length?(g.isBuffer(qe)||(qe=g.from(qe)),qe.copy(Ue,ze)):Uint8Array.prototype.set.call(Ue,qe,ze);else{if(!g.isBuffer(qe))throw new TypeError('"list" argument must be an Array of Buffers');qe.copy(Ue,ze)}ze+=qe.length}return Ue},g.byteLength=E,g.prototype._isBuffer=!0,g.prototype.swap16=function(){var ve=this.length;if(ve%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Me=0;Me<ve;Me+=2)L(this,Me,Me+1);return this},g.prototype.swap32=function(){var ve=this.length;if(ve%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Me=0;Me<ve;Me+=4)L(this,Me,Me+3),L(this,Me+1,Me+2);return this},g.prototype.swap64=function(){var ve=this.length;if(ve%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Me=0;Me<ve;Me+=8)L(this,Me,Me+7),L(this,Me+1,Me+6),L(this,Me+2,Me+5),L(this,Me+3,Me+4);return this},g.prototype.toString=function(){var ve=this.length;return 0===ve?"":0===arguments.length?W(this,0,ve):P.apply(this,arguments)},g.prototype.toLocaleString=g.prototype.toString,g.prototype.equals=function(ve){if(!g.isBuffer(ve))throw new TypeError("Argument must be a Buffer");return this===ve||0===g.compare(this,ve)},g.prototype.inspect=function(){var ve="",Me=l.IS;return ve=this.toString("hex",0,Me).replace(/(.{2})/g,"$1 ").trim(),this.length>Me&&(ve+=" ... "),"<Buffer "+ve+">"},y&&(g.prototype[y]=g.prototype.inspect),g.prototype.compare=function(ve,Me,Le,Ue,ze){if(Ae(ve,Uint8Array)&&(ve=g.from(ve,ve.offset,ve.byteLength)),!g.isBuffer(ve))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+c(ve));if(void 0===Me&&(Me=0),void 0===Le&&(Le=ve?ve.length:0),void 0===Ue&&(Ue=0),void 0===ze&&(ze=this.length),Me<0||Le>ve.length||Ue<0||ze>this.length)throw new RangeError("out of range index");if(Ue>=ze&&Me>=Le)return 0;if(Ue>=ze)return-1;if(Me>=Le)return 1;if(this===ve)return 0;for(var qe=(ze>>>=0)-(Ue>>>=0),Ke=(Le>>>=0)-(Me>>>=0),it=Math.min(qe,Ke),ft=this.slice(Ue,ze),dt=ve.slice(Me,Le),kt=0;kt<it;++kt)if(ft[kt]!==dt[kt]){qe=ft[kt],Ke=dt[kt];break}return qe<Ke?-1:Ke<qe?1:0},g.prototype.includes=function(ve,Me,Le){return-1!==this.indexOf(ve,Me,Le)},g.prototype.indexOf=function(ve,Me,Le){return O(this,ve,Me,Le,!0)},g.prototype.lastIndexOf=function(ve,Me,Le){return O(this,ve,Me,Le,!1)},g.prototype.write=function(ve,Me,Le,Ue){if(void 0===Me)Ue="utf8",Le=this.length,Me=0;else if(void 0===Le&&"string"==typeof Me)Ue=Me,Le=this.length,Me=0;else{if(!isFinite(Me))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");Me>>>=0,isFinite(Le)?(Le>>>=0,void 0===Ue&&(Ue="utf8")):(Ue=Le,Le=void 0)}var ze=this.length-Me;if((void 0===Le||Le>ze)&&(Le=ze),ve.length>0&&(Le<0||Me<0)||Me>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ue||(Ue="utf8");for(var qe=!1;;)switch(Ue){case"hex":return V(this,ve,Me,Le);case"utf8":case"utf-8":return R(this,ve,Me,Le);case"ascii":case"latin1":case"binary":return U(this,ve,Me,Le);case"base64":return Z(this,ve,Me,Le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,ve,Me,Le);default:if(qe)throw new TypeError("Unknown encoding: "+Ue);Ue=(""+Ue).toLowerCase(),qe=!0}},g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ae=4096;function re(ve,Me,Le){var Ue="";Le=Math.min(ve.length,Le);for(var ze=Me;ze<Le;++ze)Ue+=String.fromCharCode(127&ve[ze]);return Ue}function ne(ve,Me,Le){var Ue="";Le=Math.min(ve.length,Le);for(var ze=Me;ze<Le;++ze)Ue+=String.fromCharCode(ve[ze]);return Ue}function Q(ve,Me,Le){var Ue=ve.length;(!Me||Me<0)&&(Me=0),(!Le||Le<0||Le>Ue)&&(Le=Ue);for(var ze="",qe=Me;qe<Le;++qe)ze+=Oe[ve[qe]];return ze}function $(ve,Me,Le){for(var Ue=ve.slice(Me,Le),ze="",qe=0;qe<Ue.length-1;qe+=2)ze+=String.fromCharCode(Ue[qe]+256*Ue[qe+1]);return ze}function X(ve,Me,Le){if(ve%1!=0||ve<0)throw new RangeError("offset is not uint");if(ve+Me>Le)throw new RangeError("Trying to access beyond buffer length")}function oe(ve,Me,Le,Ue,ze,qe){if(!g.isBuffer(ve))throw new TypeError('"buffer" argument must be a Buffer instance');if(Me>ze||Me<qe)throw new RangeError('"value" argument is out of bounds');if(Le+Ue>ve.length)throw new RangeError("Index out of range")}function fe(ve,Me,Le,Ue,ze){Ie(Me,Ue,ze,ve,Le,7);var qe=Number(Me&BigInt(4294967295));ve[Le++]=qe,ve[Le++]=qe>>=8,ve[Le++]=qe>>=8,ve[Le++]=qe>>=8;var Ke=Number(Me>>BigInt(32)&BigInt(4294967295));return ve[Le++]=Ke,ve[Le++]=Ke>>=8,ve[Le++]=Ke>>=8,ve[Le++]=Ke>>=8,Le}function ue(ve,Me,Le,Ue,ze){Ie(Me,Ue,ze,ve,Le,7);var qe=Number(Me&BigInt(4294967295));ve[Le+7]=qe,ve[Le+6]=qe>>=8,ve[Le+5]=qe>>=8,ve[Le+4]=qe>>=8;var Ke=Number(Me>>BigInt(32)&BigInt(4294967295));return ve[Le+3]=Ke,ve[Le+2]=Ke>>=8,ve[Le+1]=Ke>>=8,ve[Le]=Ke>>=8,Le+8}function ge(ve,Me,Le,Ue,ze,qe){if(Le+Ue>ve.length)throw new RangeError("Index out of range");if(Le<0)throw new RangeError("Index out of range")}function we(ve,Me,Le,Ue,ze){return Me=+Me,Le>>>=0,ze||ge(ve,0,Le,4),u.write(ve,Me,Le,Ue,23,4),Le+4}function Te(ve,Me,Le,Ue,ze){return Me=+Me,Le>>>=0,ze||ge(ve,0,Le,8),u.write(ve,Me,Le,Ue,52,8),Le+8}g.prototype.slice=function(ve,Me){var Le=this.length;(ve=~~ve)<0?(ve+=Le)<0&&(ve=0):ve>Le&&(ve=Le),(Me=void 0===Me?Le:~~Me)<0?(Me+=Le)<0&&(Me=0):Me>Le&&(Me=Le),Me<ve&&(Me=ve);var Ue=this.subarray(ve,Me);return Object.setPrototypeOf(Ue,g.prototype),Ue},g.prototype.readUintLE=g.prototype.readUIntLE=function(ve,Me,Le){ve>>>=0,Me>>>=0,Le||X(ve,Me,this.length);for(var Ue=this[ve],ze=1,qe=0;++qe<Me&&(ze*=256);)Ue+=this[ve+qe]*ze;return Ue},g.prototype.readUintBE=g.prototype.readUIntBE=function(ve,Me,Le){ve>>>=0,Me>>>=0,Le||X(ve,Me,this.length);for(var Ue=this[ve+--Me],ze=1;Me>0&&(ze*=256);)Ue+=this[ve+--Me]*ze;return Ue},g.prototype.readUint8=g.prototype.readUInt8=function(ve,Me){return ve>>>=0,Me||X(ve,1,this.length),this[ve]},g.prototype.readUint16LE=g.prototype.readUInt16LE=function(ve,Me){return ve>>>=0,Me||X(ve,2,this.length),this[ve]|this[ve+1]<<8},g.prototype.readUint16BE=g.prototype.readUInt16BE=function(ve,Me){return ve>>>=0,Me||X(ve,2,this.length),this[ve]<<8|this[ve+1]},g.prototype.readUint32LE=g.prototype.readUInt32LE=function(ve,Me){return ve>>>=0,Me||X(ve,4,this.length),(this[ve]|this[ve+1]<<8|this[ve+2]<<16)+16777216*this[ve+3]},g.prototype.readUint32BE=g.prototype.readUInt32BE=function(ve,Me){return ve>>>=0,Me||X(ve,4,this.length),16777216*this[ve]+(this[ve+1]<<16|this[ve+2]<<8|this[ve+3])},g.prototype.readBigUInt64LE=Ne(function(ve){De(ve>>>=0,"offset");var Me=this[ve],Le=this[ve+7];void 0!==Me&&void 0!==Le||be(ve,this.length-8);var Ue=Me+this[++ve]*Math.pow(2,8)+this[++ve]*Math.pow(2,16)+this[++ve]*Math.pow(2,24),ze=this[++ve]+this[++ve]*Math.pow(2,8)+this[++ve]*Math.pow(2,16)+Le*Math.pow(2,24);return BigInt(Ue)+(BigInt(ze)<<BigInt(32))}),g.prototype.readBigUInt64BE=Ne(function(ve){De(ve>>>=0,"offset");var Me=this[ve],Le=this[ve+7];void 0!==Me&&void 0!==Le||be(ve,this.length-8);var Ue=Me*Math.pow(2,24)+this[++ve]*Math.pow(2,16)+this[++ve]*Math.pow(2,8)+this[++ve],ze=this[++ve]*Math.pow(2,24)+this[++ve]*Math.pow(2,16)+this[++ve]*Math.pow(2,8)+Le;return(BigInt(Ue)<<BigInt(32))+BigInt(ze)}),g.prototype.readIntLE=function(ve,Me,Le){ve>>>=0,Me>>>=0,Le||X(ve,Me,this.length);for(var Ue=this[ve],ze=1,qe=0;++qe<Me&&(ze*=256);)Ue+=this[ve+qe]*ze;return Ue>=(ze*=128)&&(Ue-=Math.pow(2,8*Me)),Ue},g.prototype.readIntBE=function(ve,Me,Le){ve>>>=0,Me>>>=0,Le||X(ve,Me,this.length);for(var Ue=Me,ze=1,qe=this[ve+--Ue];Ue>0&&(ze*=256);)qe+=this[ve+--Ue]*ze;return qe>=(ze*=128)&&(qe-=Math.pow(2,8*Me)),qe},g.prototype.readInt8=function(ve,Me){return ve>>>=0,Me||X(ve,1,this.length),128&this[ve]?-1*(255-this[ve]+1):this[ve]},g.prototype.readInt16LE=function(ve,Me){ve>>>=0,Me||X(ve,2,this.length);var Le=this[ve]|this[ve+1]<<8;return 32768&Le?4294901760|Le:Le},g.prototype.readInt16BE=function(ve,Me){ve>>>=0,Me||X(ve,2,this.length);var Le=this[ve+1]|this[ve]<<8;return 32768&Le?4294901760|Le:Le},g.prototype.readInt32LE=function(ve,Me){return ve>>>=0,Me||X(ve,4,this.length),this[ve]|this[ve+1]<<8|this[ve+2]<<16|this[ve+3]<<24},g.prototype.readInt32BE=function(ve,Me){return ve>>>=0,Me||X(ve,4,this.length),this[ve]<<24|this[ve+1]<<16|this[ve+2]<<8|this[ve+3]},g.prototype.readBigInt64LE=Ne(function(ve){De(ve>>>=0,"offset");var Me=this[ve],Le=this[ve+7];void 0!==Me&&void 0!==Le||be(ve,this.length-8);var Ue=this[ve+4]+this[ve+5]*Math.pow(2,8)+this[ve+6]*Math.pow(2,16)+(Le<<24);return(BigInt(Ue)<<BigInt(32))+BigInt(Me+this[++ve]*Math.pow(2,8)+this[++ve]*Math.pow(2,16)+this[++ve]*Math.pow(2,24))}),g.prototype.readBigInt64BE=Ne(function(ve){De(ve>>>=0,"offset");var Me=this[ve],Le=this[ve+7];void 0!==Me&&void 0!==Le||be(ve,this.length-8);var Ue=(Me<<24)+this[++ve]*Math.pow(2,16)+this[++ve]*Math.pow(2,8)+this[++ve];return(BigInt(Ue)<<BigInt(32))+BigInt(this[++ve]*Math.pow(2,24)+this[++ve]*Math.pow(2,16)+this[++ve]*Math.pow(2,8)+Le)}),g.prototype.readFloatLE=function(ve,Me){return ve>>>=0,Me||X(ve,4,this.length),u.read(this,ve,!0,23,4)},g.prototype.readFloatBE=function(ve,Me){return ve>>>=0,Me||X(ve,4,this.length),u.read(this,ve,!1,23,4)},g.prototype.readDoubleLE=function(ve,Me){return ve>>>=0,Me||X(ve,8,this.length),u.read(this,ve,!0,52,8)},g.prototype.readDoubleBE=function(ve,Me){return ve>>>=0,Me||X(ve,8,this.length),u.read(this,ve,!1,52,8)},g.prototype.writeUintLE=g.prototype.writeUIntLE=function(ve,Me,Le,Ue){ve=+ve,Me>>>=0,Le>>>=0,Ue||oe(this,ve,Me,Le,Math.pow(2,8*Le)-1,0);var ze=1,qe=0;for(this[Me]=255&ve;++qe<Le&&(ze*=256);)this[Me+qe]=ve/ze&255;return Me+Le},g.prototype.writeUintBE=g.prototype.writeUIntBE=function(ve,Me,Le,Ue){ve=+ve,Me>>>=0,Le>>>=0,Ue||oe(this,ve,Me,Le,Math.pow(2,8*Le)-1,0);var ze=Le-1,qe=1;for(this[Me+ze]=255&ve;--ze>=0&&(qe*=256);)this[Me+ze]=ve/qe&255;return Me+Le},g.prototype.writeUint8=g.prototype.writeUInt8=function(ve,Me,Le){return ve=+ve,Me>>>=0,Le||oe(this,ve,Me,1,255,0),this[Me]=255&ve,Me+1},g.prototype.writeUint16LE=g.prototype.writeUInt16LE=function(ve,Me,Le){return ve=+ve,Me>>>=0,Le||oe(this,ve,Me,2,65535,0),this[Me]=255&ve,this[Me+1]=ve>>>8,Me+2},g.prototype.writeUint16BE=g.prototype.writeUInt16BE=function(ve,Me,Le){return ve=+ve,Me>>>=0,Le||oe(this,ve,Me,2,65535,0),this[Me]=ve>>>8,this[Me+1]=255&ve,Me+2},g.prototype.writeUint32LE=g.prototype.writeUInt32LE=function(ve,Me,Le){return ve=+ve,Me>>>=0,Le||oe(this,ve,Me,4,4294967295,0),this[Me+3]=ve>>>24,this[Me+2]=ve>>>16,this[Me+1]=ve>>>8,this[Me]=255&ve,Me+4},g.prototype.writeUint32BE=g.prototype.writeUInt32BE=function(ve,Me,Le){return ve=+ve,Me>>>=0,Le||oe(this,ve,Me,4,4294967295,0),this[Me]=ve>>>24,this[Me+1]=ve>>>16,this[Me+2]=ve>>>8,this[Me+3]=255&ve,Me+4},g.prototype.writeBigUInt64LE=Ne(function(ve){return fe(this,ve,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),g.prototype.writeBigUInt64BE=Ne(function(ve){return ue(this,ve,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),g.prototype.writeIntLE=function(ve,Me,Le,Ue){if(ve=+ve,Me>>>=0,!Ue){var ze=Math.pow(2,8*Le-1);oe(this,ve,Me,Le,ze-1,-ze)}var qe=0,Ke=1,it=0;for(this[Me]=255&ve;++qe<Le&&(Ke*=256);)ve<0&&0===it&&0!==this[Me+qe-1]&&(it=1),this[Me+qe]=(ve/Ke>>0)-it&255;return Me+Le},g.prototype.writeIntBE=function(ve,Me,Le,Ue){if(ve=+ve,Me>>>=0,!Ue){var ze=Math.pow(2,8*Le-1);oe(this,ve,Me,Le,ze-1,-ze)}var qe=Le-1,Ke=1,it=0;for(this[Me+qe]=255&ve;--qe>=0&&(Ke*=256);)ve<0&&0===it&&0!==this[Me+qe+1]&&(it=1),this[Me+qe]=(ve/Ke>>0)-it&255;return Me+Le},g.prototype.writeInt8=function(ve,Me,Le){return ve=+ve,Me>>>=0,Le||oe(this,ve,Me,1,127,-128),ve<0&&(ve=255+ve+1),this[Me]=255&ve,Me+1},g.prototype.writeInt16LE=function(ve,Me,Le){return ve=+ve,Me>>>=0,Le||oe(this,ve,Me,2,32767,-32768),this[Me]=255&ve,this[Me+1]=ve>>>8,Me+2},g.prototype.writeInt16BE=function(ve,Me,Le){return ve=+ve,Me>>>=0,Le||oe(this,ve,Me,2,32767,-32768),this[Me]=ve>>>8,this[Me+1]=255&ve,Me+2},g.prototype.writeInt32LE=function(ve,Me,Le){return ve=+ve,Me>>>=0,Le||oe(this,ve,Me,4,2147483647,-2147483648),this[Me]=255&ve,this[Me+1]=ve>>>8,this[Me+2]=ve>>>16,this[Me+3]=ve>>>24,Me+4},g.prototype.writeInt32BE=function(ve,Me,Le){return ve=+ve,Me>>>=0,Le||oe(this,ve,Me,4,2147483647,-2147483648),ve<0&&(ve=4294967295+ve+1),this[Me]=ve>>>24,this[Me+1]=ve>>>16,this[Me+2]=ve>>>8,this[Me+3]=255&ve,Me+4},g.prototype.writeBigInt64LE=Ne(function(ve){return fe(this,ve,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),g.prototype.writeBigInt64BE=Ne(function(ve){return ue(this,ve,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),g.prototype.writeFloatLE=function(ve,Me,Le){return we(this,ve,Me,!0,Le)},g.prototype.writeFloatBE=function(ve,Me,Le){return we(this,ve,Me,!1,Le)},g.prototype.writeDoubleLE=function(ve,Me,Le){return Te(this,ve,Me,!0,Le)},g.prototype.writeDoubleBE=function(ve,Me,Le){return Te(this,ve,Me,!1,Le)},g.prototype.copy=function(ve,Me,Le,Ue){if(!g.isBuffer(ve))throw new TypeError("argument should be a Buffer");if(Le||(Le=0),Ue||0===Ue||(Ue=this.length),Me>=ve.length&&(Me=ve.length),Me||(Me=0),Ue>0&&Ue<Le&&(Ue=Le),Ue===Le||0===ve.length||0===this.length)return 0;if(Me<0)throw new RangeError("targetStart out of bounds");if(Le<0||Le>=this.length)throw new RangeError("Index out of range");if(Ue<0)throw new RangeError("sourceEnd out of bounds");Ue>this.length&&(Ue=this.length),ve.length-Me<Ue-Le&&(Ue=ve.length-Me+Le);var ze=Ue-Le;return this===ve&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(Me,Le,Ue):Uint8Array.prototype.set.call(ve,this.subarray(Le,Ue),Me),ze},g.prototype.fill=function(ve,Me,Le,Ue){if("string"==typeof ve){if("string"==typeof Me?(Ue=Me,Me=0,Le=this.length):"string"==typeof Le&&(Ue=Le,Le=this.length),void 0!==Ue&&"string"!=typeof Ue)throw new TypeError("encoding must be a string");if("string"==typeof Ue&&!g.isEncoding(Ue))throw new TypeError("Unknown encoding: "+Ue);if(1===ve.length){var ze=ve.charCodeAt(0);("utf8"===Ue&&ze<128||"latin1"===Ue)&&(ve=ze)}}else"number"==typeof ve?ve&=255:"boolean"==typeof ve&&(ve=Number(ve));if(Me<0||this.length<Me||this.length<Le)throw new RangeError("Out of range index");if(Le<=Me)return this;var qe;if(Me>>>=0,Le=void 0===Le?this.length:Le>>>0,ve||(ve=0),"number"==typeof ve)for(qe=Me;qe<Le;++qe)this[qe]=ve;else{var Ke=g.isBuffer(ve)?ve:g.from(ve,Ue),it=Ke.length;if(0===it)throw new TypeError('The value "'+ve+'" is invalid for argument "value"');for(qe=0;qe<Le-Me;++qe)this[qe+Me]=Ke[qe%it]}return this};var xe={};function ye(ve,Me,Le){xe[ve]=function(Ue){function ze(){var it,dt;return function(St,Tt){if(!(St instanceof Tt))throw new TypeError("Cannot call a class as a function")}(this,ze),this,dt=a(dt=ze),it=function(St,Tt){if(Tt&&("object"===c(Tt)||"function"==typeof Tt))return Tt;if(void 0!==Tt)throw new TypeError("Derived constructors may only return object or undefined");return function(lt){if(void 0===lt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return lt}(St)}(this,n()?Reflect.construct(dt,[],a(this).constructor):dt.apply(this,undefined)),Object.defineProperty(it,"message",{value:Me.apply(it,arguments),writable:!0,configurable:!0}),it.name="".concat(it.name," [").concat(ve,"]"),delete it.name,it}return function(it,ft){if("function"!=typeof ft&&null!==ft)throw new TypeError("Super expression must either be null or a function");it.prototype=Object.create(ft&&ft.prototype,{constructor:{value:it,writable:!0,configurable:!0}}),Object.defineProperty(it,"prototype",{writable:!1}),ft&&s(it,ft)}(ze,Ue),qe=ze,(Ke=[{key:"code",get:function(){return ve},set:function(it){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:it,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(ve,"]: ").concat(this.message)}}])&&function i(ve,Me){for(var Le=0;Le<Me.length;Le++){var Ue=Me[Le];Ue.enumerable=Ue.enumerable||!1,Ue.configurable=!0,"value"in Ue&&(Ue.writable=!0),Object.defineProperty(ve,r(Ue.key),Ue)}}(qe.prototype,Ke),Object.defineProperty(qe,"prototype",{writable:!1}),qe;var qe,Ke}(Le)}function _e(ve){for(var Me="",Le=ve.length,Ue="-"===ve[0]?1:0;Le>=Ue+4;Le-=3)Me="_".concat(ve.slice(Le-3,Le)).concat(Me);return"".concat(ve.slice(0,Le)).concat(Me)}function Ie(ve,Me,Le,Ue,ze,qe){if(ve>Le||ve<Me){var Ke,it="bigint"==typeof Me?"n":"";throw Ke=qe>3?0===Me||Me===BigInt(0)?">= 0".concat(it," and < 2").concat(it," ** ").concat(8*(qe+1)).concat(it):">= -(2".concat(it," ** ").concat(8*(qe+1)-1).concat(it,") and < 2 ** ")+"".concat(8*(qe+1)-1).concat(it):">= ".concat(Me).concat(it," and <= ").concat(Le).concat(it),new xe.ERR_OUT_OF_RANGE("value",Ke,ve)}var ft,dt,kt;ft=Ue,kt=qe,De(dt=ze,"offset"),void 0!==ft[dt]&&void 0!==ft[dt+kt]||be(dt,ft.length-(kt+1))}function De(ve,Me){if("number"!=typeof ve)throw new xe.ERR_INVALID_ARG_TYPE(Me,"number",ve)}function be(ve,Me,Le){throw Math.floor(ve)!==ve?(De(ve,Le),new xe.ERR_OUT_OF_RANGE(Le||"offset","an integer",ve)):Me<0?new xe.ERR_BUFFER_OUT_OF_BOUNDS:new xe.ERR_OUT_OF_RANGE(Le||"offset",">= ".concat(Le?1:0," and <= ").concat(Me),ve)}ye("ERR_BUFFER_OUT_OF_BOUNDS",function(ve){return ve?"".concat(ve," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),ye("ERR_INVALID_ARG_TYPE",function(ve,Me){return'The "'.concat(ve,'" argument must be of type number. Received type ').concat(c(Me))},TypeError),ye("ERR_OUT_OF_RANGE",function(ve,Me,Le){var Ue='The value of "'.concat(ve,'" is out of range.'),ze=Le;return Number.isInteger(Le)&&Math.abs(Le)>Math.pow(2,32)?ze=_e(String(Le)):"bigint"==typeof Le&&(ze=String(Le),(Le>Math.pow(BigInt(2),BigInt(32))||Le<-Math.pow(BigInt(2),BigInt(32)))&&(ze=_e(ze)),ze+="n"),Ue+" It must be ".concat(Me,". Received ").concat(ze)},RangeError);var he=/[^+/0-9A-Za-z-_]/g;function ce(ve,Me){var Le;Me=Me||1/0;for(var Ue=ve.length,ze=null,qe=[],Ke=0;Ke<Ue;++Ke){if((Le=ve.charCodeAt(Ke))>55295&&Le<57344){if(!ze){if(Le>56319){(Me-=3)>-1&&qe.push(239,191,189);continue}if(Ke+1===Ue){(Me-=3)>-1&&qe.push(239,191,189);continue}ze=Le;continue}if(Le<56320){(Me-=3)>-1&&qe.push(239,191,189),ze=Le;continue}Le=65536+(ze-55296<<10|Le-56320)}else ze&&(Me-=3)>-1&&qe.push(239,191,189);if(ze=null,Le<128){if((Me-=1)<0)break;qe.push(Le)}else if(Le<2048){if((Me-=2)<0)break;qe.push(Le>>6|192,63&Le|128)}else if(Le<65536){if((Me-=3)<0)break;qe.push(Le>>12|224,Le>>6&63|128,63&Le|128)}else{if(!(Le<1114112))throw new Error("Invalid code point");if((Me-=4)<0)break;qe.push(Le>>18|240,Le>>12&63|128,Le>>6&63|128,63&Le|128)}}return qe}function me(ve){return h.toByteArray(function(Me){if((Me=(Me=Me.split("=")[0]).trim().replace(he,"")).length<2)return"";for(;Me.length%4!=0;)Me+="=";return Me}(ve))}function Pe(ve,Me,Le,Ue){var ze;for(ze=0;ze<Ue&&!(ze+Le>=Me.length||ze>=ve.length);++ze)Me[ze+Le]=ve[ze];return ze}function Ae(ve,Me){return ve instanceof Me||null!=ve&&null!=ve.constructor&&null!=ve.constructor.name&&ve.constructor.name===Me.name}function Ce(ve){return ve!=ve}var Oe=function(){for(var ve="0123456789abcdef",Me=new Array(256),Le=0;Le<16;++Le)for(var Ue=16*Le,ze=0;ze<16;++ze)Me[Ue+ze]=ve[Le]+ve[ze];return Me}();function Ne(ve){return typeof BigInt>"u"?je:ve}function je(){throw new Error("BigInt not supported")}},9216:function(p){"use strict";p.exports=r,p.exports.isMobile=r,p.exports.default=r;var l=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,t=/CrOS/,i=/android|ipad|playbook|silk/i;function r(n){n||(n={});var a=n.ua;if(a||typeof navigator>"u"||(a=navigator.userAgent),a&&a.headers&&"string"==typeof a.headers["user-agent"]&&(a=a.headers["user-agent"]),"string"!=typeof a)return!1;var s=l.test(a)&&!t.test(a)||!!n.tablet&&i.test(a);return!s&&n.tablet&&n.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==a.indexOf("Macintosh")&&-1!==a.indexOf("Safari")&&(s=!0),s}},6296:function(p,l,t){"use strict";p.exports=function(c){var h=(c=c||{}).eye||[0,0,1],u=c.center||[0,0,0],y=c.up||[0,1,0],d=c.distanceLimits||[0,1/0],m=c.mode||"turntable",g=i(),x=r(),v=n();return g.setDistanceLimits(d[0],d[1]),g.lookAt(0,h,u,y),x.setDistanceLimits(d[0],d[1]),x.lookAt(0,h,u,y),v.setDistanceLimits(d[0],d[1]),v.lookAt(0,h,u,y),new a({turntable:g,orbit:x,matrix:v},m)};var i=t(7261),r=t(9977),n=t(4192);function a(c,h){this._controllerNames=Object.keys(c),this._controllerList=this._controllerNames.map(function(u){return c[u]}),this._mode=h,this._active=c[h],this._active||(this._mode="turntable",this._active=c.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var s=a.prototype;s.flush=function(c){for(var h=this._controllerList,u=0;u<h.length;++u)h[u].flush(c)},s.idle=function(c){for(var h=this._controllerList,u=0;u<h.length;++u)h[u].idle(c)},s.lookAt=function(c,h,u,y){for(var d=this._controllerList,m=0;m<d.length;++m)d[m].lookAt(c,h,u,y)},s.rotate=function(c,h,u,y){for(var d=this._controllerList,m=0;m<d.length;++m)d[m].rotate(c,h,u,y)},s.pan=function(c,h,u,y){for(var d=this._controllerList,m=0;m<d.length;++m)d[m].pan(c,h,u,y)},s.translate=function(c,h,u,y){for(var d=this._controllerList,m=0;m<d.length;++m)d[m].translate(c,h,u,y)},s.setMatrix=function(c,h){for(var u=this._controllerList,y=0;y<u.length;++y)u[y].setMatrix(c,h)},s.setDistanceLimits=function(c,h){for(var u=this._controllerList,y=0;y<u.length;++y)u[y].setDistanceLimits(c,h)},s.setDistance=function(c,h){for(var u=this._controllerList,y=0;y<u.length;++y)u[y].setDistance(c,h)},s.recalcMatrix=function(c){this._active.recalcMatrix(c)},s.getDistance=function(c){return this._active.getDistance(c)},s.getDistanceLimits=function(c){return this._active.getDistanceLimits(c)},s.lastT=function(){return this._active.lastT()},s.setMode=function(c){if(c!==this._mode){var h=this._controllerNames.indexOf(c);if(!(h<0)){var u=this._active,y=this._controllerList[h],d=Math.max(u.lastT(),y.lastT());u.recalcMatrix(d),y.setMatrix(d,u.computedMatrix),this._active=y,this._mode=c,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},s.getMode=function(){return this._mode}},7169:function(p,l,t){"use strict";var i=typeof WeakMap>"u"?t(1538):WeakMap,r=t(2762),n=t(8116),a=new i;p.exports=function(s){var c=a.get(s),h=c&&(c._triangleBuffer.handle||c._triangleBuffer.buffer);if(!h||!s.isBuffer(h)){var u=r(s,new Float32Array([-1,-1,-1,4,4,-1]));(c=n(s,[{buffer:u,type:s.FLOAT,size:2}]))._triangleBuffer=u,a.set(s,c)}c.bind(),s.drawArrays(s.TRIANGLES,0,3),c.unbind()}},1085:function(p,l,t){var i=t(1371);p.exports=function(r,n,a){n="number"==typeof n?n:1,a=a||": ";var s=r.split(/\r?\n/),c=String(s.length+n-1).length;return s.map(function(h,u){var y=u+n,d=String(y).length;return i(y,c-d)+a+h}).join("\n")}},3952:function(p,l,t){"use strict";p.exports=function(n){var a=n.length;if(0===a)return[];if(1===a)return[0];for(var s=n[0].length,c=[n[0]],h=[0],u=1;u<a;++u)if(c.push(n[u]),r(c,s)){if(h.push(u),h.length===s+1)return h}else c.pop();return h};var i=t(3250);function r(n,a){for(var s=new Array(a+1),c=0;c<n.length;++c)s[c]=n[c];for(c=0;c<=n.length;++c){for(var h=n.length;h<=a;++h){for(var u=new Array(a),y=0;y<a;++y)u[y]=Math.pow(h+1-c,y);s[h]=u}if(i.apply(void 0,s))return!0}return!1}},5995:function(p,l,t){"use strict";p.exports=function(n,a){return i(a).filter(function(s){for(var c=new Array(s.length),h=0;h<s.length;++h)c[h]=a[s[h]];return r(c)*n<1})};var i=t(7642),r=t(6037)},3502:function(p,l,t){p.exports=function(n,a){return r(i(n,a))};var i=t(5995),r=t(9127)},6468:function(p){p.exports=function(l){return atob(l)}},2642:function(p,l,t){"use strict";p.exports=function(n,a){for(var s=a.length,c=new Array(s+1),h=0;h<s;++h){for(var u=new Array(s+1),y=0;y<=s;++y)u[y]=n[y][h];c[h]=u}for(c[s]=new Array(s+1),h=0;h<=s;++h)c[s][h]=1;var d=new Array(s+1);for(h=0;h<s;++h)d[h]=a[h];d[s]=1;var m=i(c,d),g=r(m[s+1]);0===g&&(g=1);var x=new Array(s+1);for(h=0;h<=s;++h)x[h]=r(m[h])/g;return x};var i=t(727);function r(n){for(var a=0,s=0;s<n.length;++s)a+=n[s];return a}},7507:function(p,l){"use strict";l.byteLength=function(h){var u=s(h),d=u[1];return 3*(u[0]+d)/4-d},l.toByteArray=function(h){var u,y,w,d=s(h),m=d[0],g=d[1],x=new r(3*(m+(w=g))/4-w),v=0,_=g>0?m-4:m;for(y=0;y<_;y+=4)u=i[h.charCodeAt(y)]<<18|i[h.charCodeAt(y+1)]<<12|i[h.charCodeAt(y+2)]<<6|i[h.charCodeAt(y+3)],x[v++]=u>>16&255,x[v++]=u>>8&255,x[v++]=255&u;return 2===g&&(u=i[h.charCodeAt(y)]<<2|i[h.charCodeAt(y+1)]>>4,x[v++]=255&u),1===g&&(u=i[h.charCodeAt(y)]<<10|i[h.charCodeAt(y+1)]<<4|i[h.charCodeAt(y+2)]>>2,x[v++]=u>>8&255,x[v++]=255&u),x},l.fromByteArray=function(h){for(var u,y=h.length,d=y%3,m=[],g=16383,x=0,v=y-d;x<v;x+=g)m.push(c(h,x,x+g>v?v:x+g));return 1===d?m.push(t[(u=h[y-1])>>2]+t[u<<4&63]+"=="):2===d&&m.push(t[(u=(h[y-2]<<8)+h[y-1])>>10]+t[u>>4&63]+t[u<<2&63]+"="),m.join("")};for(var t=[],i=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)t[a]=n[a],i[n.charCodeAt(a)]=a;function s(h){var u=h.length;if(u%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=h.indexOf("=");return-1===y&&(y=u),[y,y===u?0:4-y%4]}function c(h,u,y){for(var m,g=[],x=u;x<y;x+=3)g.push(t[(m=(h[x]<<16&16711680)+(h[x+1]<<8&65280)+(255&h[x+2]))>>18&63]+t[m>>12&63]+t[m>>6&63]+t[63&m]);return g.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},3865:function(p,l,t){"use strict";var i=t(869);p.exports=function(r,n){return i(r[0].mul(n[1]).add(n[0].mul(r[1])),r[1].mul(n[1]))}},1318:function(p){"use strict";p.exports=function(l,t){return l[0].mul(t[1]).cmp(t[0].mul(l[1]))}},8697:function(p,l,t){"use strict";var i=t(869);p.exports=function(r,n){return i(r[0].mul(n[1]),r[1].mul(n[0]))}},7842:function(p,l,t){"use strict";var i=t(6330),r=t(1533),n=t(2651),a=t(4387),s=t(869),c=t(8697);p.exports=function h(u,y){if(i(u))return y?c(u,h(y)):[u[0].clone(),u[1].clone()];var d,m,g=0;if(r(u))d=u.clone();else if("string"==typeof u)d=a(u);else{if(0===u)return[n(0),n(1)];if(u===Math.floor(u))d=n(u);else{for(;u!==Math.floor(u);)u*=Math.pow(2,256),g-=256;d=n(u)}}if(i(y))d.mul(y[1]),m=y[0].clone();else if(r(y))m=y.clone();else if("string"==typeof y)m=a(y);else if(y)if(y===Math.floor(y))m=n(y);else{for(;y!==Math.floor(y);)y*=Math.pow(2,256),g+=256;m=n(y)}else m=n(1);return g>0?d=d.ushln(g):g<0&&(m=m.ushln(-g)),s(d,m)}},6330:function(p,l,t){"use strict";var i=t(1533);p.exports=function(r){return Array.isArray(r)&&2===r.length&&i(r[0])&&i(r[1])}},5716:function(p,l,t){"use strict";var i=t(6859);p.exports=function(r){return r.cmp(new i(0))}},1369:function(p,l,t){"use strict";var i=t(5716);p.exports=function(r){var n=r.length,a=r.words,s=0;if(1===n)s=a[0];else if(2===n)s=a[0]+67108864*a[1];else for(var c=0;c<n;c++)s+=a[c]*Math.pow(67108864,c);return i(r)*s}},4025:function(p,l,t){"use strict";var i=t(2361),r=t(8828).countTrailingZeros;p.exports=function(n){var a=r(i.lo(n));if(a<32)return a;var s=r(i.hi(n));return s>20?52:s+32}},1533:function(p,l,t){"use strict";t(6859),p.exports=function(i){return i&&"object"==typeof i&&!!i.words}},2651:function(p,l,t){"use strict";var i=t(6859),r=t(2361);p.exports=function(n){var a=r.exponent(n);return a<52?new i(n):new i(n*Math.pow(2,52-a)).ushln(a-52)}},869:function(p,l,t){"use strict";var i=t(2651),r=t(5716);p.exports=function(n,a){var s=r(n),c=r(a);if(0===s)return[i(0),i(1)];if(0===c)return[i(0),i(0)];c<0&&(n=n.neg(),a=a.neg());var h=n.gcd(a);return h.cmpn(1)?[n.div(h),a.div(h)]:[n,a]}},4387:function(p,l,t){"use strict";var i=t(6859);p.exports=function(r){return new i(r)}},6504:function(p,l,t){"use strict";var i=t(869);p.exports=function(r,n){return i(r[0].mul(n[0]),r[1].mul(n[1]))}},7721:function(p,l,t){"use strict";var i=t(5716);p.exports=function(r){return i(r[0])*i(r[1])}},5572:function(p,l,t){"use strict";var i=t(869);p.exports=function(r,n){return i(r[0].mul(n[1]).sub(r[1].mul(n[0])),r[1].mul(n[1]))}},946:function(p,l,t){"use strict";var i=t(1369),r=t(4025);p.exports=function(n){var a=n[0],s=n[1];if(0===a.cmpn(0))return 0;var c=a.abs().divmod(s.abs()),u=i(c.div),y=c.mod,d=a.negative!==s.negative?-1:1;if(0===y.cmpn(0))return d*u;if(u){var m=r(u)+4;return d*(u+(x=i(y.ushln(m).divRound(s)))*Math.pow(2,-m))}var g=s.bitLength()-y.bitLength()+53,x=i(y.ushln(g).divRound(s));return g<1023?d*x*Math.pow(2,-g):d*(x*=Math.pow(2,-1023))*Math.pow(2,1023-g)}},2478:function(p){"use strict";function l(s,c,h,u,y){for(var d=y+1;u<=y;){var m=u+y>>>1,g=s[m];(void 0!==h?h(g,c):g-c)>=0?(d=m,y=m-1):u=m+1}return d}function t(s,c,h,u,y){for(var d=y+1;u<=y;){var m=u+y>>>1,g=s[m];(void 0!==h?h(g,c):g-c)>0?(d=m,y=m-1):u=m+1}return d}function i(s,c,h,u,y){for(var d=u-1;u<=y;){var m=u+y>>>1,g=s[m];(void 0!==h?h(g,c):g-c)<0?(d=m,u=m+1):y=m-1}return d}function r(s,c,h,u,y){for(var d=u-1;u<=y;){var m=u+y>>>1,g=s[m];(void 0!==h?h(g,c):g-c)<=0?(d=m,u=m+1):y=m-1}return d}function n(s,c,h,u,y){for(;u<=y;){var d=u+y>>>1,m=s[d],g=void 0!==h?h(m,c):m-c;if(0===g)return d;g<=0?u=d+1:y=d-1}return-1}function a(s,c,h,u,y,d){return"function"==typeof h?d(s,c,h,void 0===u?0:0|u,void 0===y?s.length-1:0|y):d(s,c,void 0,void 0===h?0:0|h,void 0===u?s.length-1:0|u)}p.exports={ge:function(s,c,h,u,y){return a(s,c,h,u,y,l)},gt:function(s,c,h,u,y){return a(s,c,h,u,y,t)},lt:function(s,c,h,u,y){return a(s,c,h,u,y,i)},le:function(s,c,h,u,y){return a(s,c,h,u,y,r)},eq:function(s,c,h,u,y){return a(s,c,h,u,y,n)}}},8828:function(p,l){"use strict";function t(r){var n=32;return(r&=-r)&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}l.INT_BITS=32,l.INT_MAX=2147483647,l.INT_MIN=-2147483648,l.sign=function(r){return(r>0)-(r<0)},l.abs=function(r){var n=r>>31;return(r^n)-n},l.min=function(r,n){return n^(r^n)&-(r<n)},l.max=function(r,n){return r^(r^n)&-(r<n)},l.isPow2=function(r){return!(r&r-1||!r)},l.log2=function(r){var n,a;return n=(r>65535)<<4,n|=a=((r>>>=n)>255)<<3,n|=a=((r>>>=a)>15)<<2,(n|=a=((r>>>=a)>3)<<1)|(r>>>=a)>>1},l.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},l.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},l.countTrailingZeros=t,l.nextPow2=function(r){return r+=0===r,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,1+((r|=r>>>8)|r>>>16)},l.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},l.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var i=new Array(256);(function(r){for(var n=0;n<256;++n){var a=n,s=n,c=7;for(a>>>=1;a;a>>>=1)s<<=1,s|=1&a,--c;r[n]=s<<c&255}})(i),l.reverse=function(r){return i[255&r]<<24|i[r>>>8&255]<<16|i[r>>>16&255]<<8|i[r>>>24&255]},l.interleave2=function(r,n){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))<<1},l.deinterleave2=function(r,n){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>n&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},l.interleave3=function(r,n,a){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<1)|(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<2},l.deinterleave3=function(r,n){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>n&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},l.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>t(r)+1}},6859:function(p,l,t){!function(i,r){"use strict";function n(R,U){if(!R)throw new Error(U||"Assertion failed")}function a(R,U){R.super_=U;var Z=function(){};Z.prototype=U.prototype,R.prototype=new Z,R.prototype.constructor=R}function s(R,U,Z){if(s.isBN(R))return R;this.negative=0,this.words=null,this.length=0,this.red=null,null!==R&&("le"!==U&&"be"!==U||(Z=U,U=10),this._init(R||0,U||10,Z||"be"))}var c;"object"==typeof i?i.exports=s:r.BN=s,s.BN=s,s.wordSize=26;try{c=typeof window<"u"&&void 0!==window.Buffer?window.Buffer:t(7790).Buffer}catch{}function h(R,U){var Z=R.charCodeAt(U);return Z>=65&&Z<=70?Z-55:Z>=97&&Z<=102?Z-87:Z-48&15}function u(R,U,Z){var N=h(R,Z);return Z-1>=U&&(N|=h(R,Z-1)<<4),N}function y(R,U,Z,N){for(var G=0,W=Math.min(R.length,Z),ae=U;ae<W;ae++){var re=R.charCodeAt(ae)-48;G*=N,G+=re>=49?re-49+10:re>=17?re-17+10:re}return G}s.isBN=function(R){return R instanceof s||null!==R&&"object"==typeof R&&R.constructor.wordSize===s.wordSize&&Array.isArray(R.words)},s.max=function(R,U){return R.cmp(U)>0?R:U},s.min=function(R,U){return R.cmp(U)<0?R:U},s.prototype._init=function(R,U,Z){if("number"==typeof R)return this._initNumber(R,U,Z);if("object"==typeof R)return this._initArray(R,U,Z);"hex"===U&&(U=16),n(U===(0|U)&&U>=2&&U<=36);var N=0;"-"===(R=R.toString().replace(/\s+/g,""))[0]&&(N++,this.negative=1),N<R.length&&(16===U?this._parseHex(R,N,Z):(this._parseBase(R,U,N),"le"===Z&&this._initArray(this.toArray(),U,Z)))},s.prototype._initNumber=function(R,U,Z){R<0&&(this.negative=1,R=-R),R<67108864?(this.words=[67108863&R],this.length=1):R<4503599627370496?(this.words=[67108863&R,R/67108864&67108863],this.length=2):(n(R<9007199254740992),this.words=[67108863&R,R/67108864&67108863,1],this.length=3),"le"===Z&&this._initArray(this.toArray(),U,Z)},s.prototype._initArray=function(R,U,Z){if(n("number"==typeof R.length),R.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(R.length/3),this.words=new Array(this.length);for(var N=0;N<this.length;N++)this.words[N]=0;var G,W,ae=0;if("be"===Z)for(N=R.length-1,G=0;N>=0;N-=3)this.words[G]|=(W=R[N]|R[N-1]<<8|R[N-2]<<16)<<ae&67108863,this.words[G+1]=W>>>26-ae&67108863,(ae+=24)>=26&&(ae-=26,G++);else if("le"===Z)for(N=0,G=0;N<R.length;N+=3)this.words[G]|=(W=R[N]|R[N+1]<<8|R[N+2]<<16)<<ae&67108863,this.words[G+1]=W>>>26-ae&67108863,(ae+=24)>=26&&(ae-=26,G++);return this.strip()},s.prototype._parseHex=function(R,U,Z){this.length=Math.ceil((R.length-U)/6),this.words=new Array(this.length);for(var N=0;N<this.length;N++)this.words[N]=0;var G,W=0,ae=0;if("be"===Z)for(N=R.length-1;N>=U;N-=2)G=u(R,U,N)<<W,this.words[ae]|=67108863&G,W>=18?(W-=18,this.words[ae+=1]|=G>>>26):W+=8;else for(N=(R.length-U)%2==0?U+1:U;N<R.length;N+=2)G=u(R,U,N)<<W,this.words[ae]|=67108863&G,W>=18?(W-=18,this.words[ae+=1]|=G>>>26):W+=8;this.strip()},s.prototype._parseBase=function(R,U,Z){this.words=[0],this.length=1;for(var N=0,G=1;G<=67108863;G*=U)N++;N--,G=G/U|0;for(var W=R.length-Z,ae=W%N,re=Math.min(W,W-ae)+Z,ne=0,Q=Z;Q<re;Q+=N)ne=y(R,Q,Q+N,U),this.imuln(G),this.words[0]+ne<67108864?this.words[0]+=ne:this._iaddn(ne);if(0!==ae){var $=1;for(ne=y(R,Q,R.length,U),Q=0;Q<ae;Q++)$*=U;this.imuln($),this.words[0]+ne<67108864?this.words[0]+=ne:this._iaddn(ne)}this.strip()},s.prototype.copy=function(R){R.words=new Array(this.length);for(var U=0;U<this.length;U++)R.words[U]=this.words[U];R.length=this.length,R.negative=this.negative,R.red=this.red},s.prototype.clone=function(){var R=new s(null);return this.copy(R),R},s.prototype._expand=function(R){for(;this.length<R;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],m=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],g=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function x(R,U,Z){Z.negative=U.negative^R.negative;var N=R.length+U.length|0;Z.length=N,N=N-1|0;var G=0|R.words[0],W=0|U.words[0],ae=G*W,ne=ae/67108864|0;Z.words[0]=67108863&ae;for(var Q=1;Q<N;Q++){for(var $=ne>>>26,X=67108863&ne,oe=Math.min(Q,U.length-1),fe=Math.max(0,Q-R.length+1);fe<=oe;fe++)$+=(ae=(G=0|R.words[Q-fe|0])*(W=0|U.words[fe])+X)/67108864|0,X=67108863&ae;Z.words[Q]=0|X,ne=0|$}return 0!==ne?Z.words[Q]=0|ne:Z.length--,Z.strip()}s.prototype.toString=function(R,U){var Z;if(U=0|U||1,16===(R=R||10)||"hex"===R){Z="";for(var N=0,G=0,W=0;W<this.length;W++){var ae=this.words[W],re=(16777215&(ae<<N|G)).toString(16);Z=0!=(G=ae>>>24-N&16777215)||W!==this.length-1?d[6-re.length]+re+Z:re+Z,(N+=2)>=26&&(N-=26,W--)}for(0!==G&&(Z=G.toString(16)+Z);Z.length%U!=0;)Z="0"+Z;return 0!==this.negative&&(Z="-"+Z),Z}if(R===(0|R)&&R>=2&&R<=36){var ne=m[R],Q=g[R];Z="";var $=this.clone();for($.negative=0;!$.isZero();){var X=$.modn(Q).toString(R);Z=($=$.idivn(Q)).isZero()?X+Z:d[ne-X.length]+X+Z}for(this.isZero()&&(Z="0"+Z);Z.length%U!=0;)Z="0"+Z;return 0!==this.negative&&(Z="-"+Z),Z}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var R=this.words[0];return 2===this.length?R+=67108864*this.words[1]:3===this.length&&1===this.words[2]?R+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-R:R},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(R,U){return n(void 0!==c),this.toArrayLike(c,R,U)},s.prototype.toArray=function(R,U){return this.toArrayLike(Array,R,U)},s.prototype.toArrayLike=function(R,U,Z){var N=this.byteLength(),G=Z||Math.max(1,N);n(N<=G,"byte array longer than desired length"),n(G>0,"Requested array length <= 0"),this.strip();var W,ae,re="le"===U,ne=new R(G),Q=this.clone();if(re){for(ae=0;!Q.isZero();ae++)W=Q.andln(255),Q.iushrn(8),ne[ae]=W;for(;ae<G;ae++)ne[ae]=0}else{for(ae=0;ae<G-N;ae++)ne[ae]=0;for(ae=0;!Q.isZero();ae++)W=Q.andln(255),Q.iushrn(8),ne[G-ae-1]=W}return ne},s.prototype._countBits=Math.clz32?function(R){return 32-Math.clz32(R)}:function(R){var U=R,Z=0;return U>=4096&&(Z+=13,U>>>=13),U>=64&&(Z+=7,U>>>=7),U>=8&&(Z+=4,U>>>=4),U>=2&&(Z+=2,U>>>=2),Z+U},s.prototype._zeroBits=function(R){if(0===R)return 26;var U=R,Z=0;return!(8191&U)&&(Z+=13,U>>>=13),!(127&U)&&(Z+=7,U>>>=7),!(15&U)&&(Z+=4,U>>>=4),!(3&U)&&(Z+=2,U>>>=2),!(1&U)&&Z++,Z},s.prototype.bitLength=function(){var U=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+U},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var R=0,U=0;U<this.length;U++){var Z=this._zeroBits(this.words[U]);if(R+=Z,26!==Z)break}return R},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(R){return 0!==this.negative?this.abs().inotn(R).iaddn(1):this.clone()},s.prototype.fromTwos=function(R){return this.testn(R-1)?this.notn(R).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(R){for(;this.length<R.length;)this.words[this.length++]=0;for(var U=0;U<R.length;U++)this.words[U]=this.words[U]|R.words[U];return this.strip()},s.prototype.ior=function(R){return n(0==(this.negative|R.negative)),this.iuor(R)},s.prototype.or=function(R){return this.length>R.length?this.clone().ior(R):R.clone().ior(this)},s.prototype.uor=function(R){return this.length>R.length?this.clone().iuor(R):R.clone().iuor(this)},s.prototype.iuand=function(R){var U;U=this.length>R.length?R:this;for(var Z=0;Z<U.length;Z++)this.words[Z]=this.words[Z]&R.words[Z];return this.length=U.length,this.strip()},s.prototype.iand=function(R){return n(0==(this.negative|R.negative)),this.iuand(R)},s.prototype.and=function(R){return this.length>R.length?this.clone().iand(R):R.clone().iand(this)},s.prototype.uand=function(R){return this.length>R.length?this.clone().iuand(R):R.clone().iuand(this)},s.prototype.iuxor=function(R){var U,Z;this.length>R.length?(U=this,Z=R):(U=R,Z=this);for(var N=0;N<Z.length;N++)this.words[N]=U.words[N]^Z.words[N];if(this!==U)for(;N<U.length;N++)this.words[N]=U.words[N];return this.length=U.length,this.strip()},s.prototype.ixor=function(R){return n(0==(this.negative|R.negative)),this.iuxor(R)},s.prototype.xor=function(R){return this.length>R.length?this.clone().ixor(R):R.clone().ixor(this)},s.prototype.uxor=function(R){return this.length>R.length?this.clone().iuxor(R):R.clone().iuxor(this)},s.prototype.inotn=function(R){n("number"==typeof R&&R>=0);var U=0|Math.ceil(R/26),Z=R%26;this._expand(U),Z>0&&U--;for(var N=0;N<U;N++)this.words[N]=67108863&~this.words[N];return Z>0&&(this.words[N]=~this.words[N]&67108863>>26-Z),this.strip()},s.prototype.notn=function(R){return this.clone().inotn(R)},s.prototype.setn=function(R,U){n("number"==typeof R&&R>=0);var Z=R/26|0,N=R%26;return this._expand(Z+1),this.words[Z]=U?this.words[Z]|1<<N:this.words[Z]&~(1<<N),this.strip()},s.prototype.iadd=function(R){var U,Z,N;if(0!==this.negative&&0===R.negative)return this.negative=0,U=this.isub(R),this.negative^=1,this._normSign();if(0===this.negative&&0!==R.negative)return R.negative=0,U=this.isub(R),R.negative=1,U._normSign();this.length>R.length?(Z=this,N=R):(Z=R,N=this);for(var G=0,W=0;W<N.length;W++)this.words[W]=67108863&(U=(0|Z.words[W])+(0|N.words[W])+G),G=U>>>26;for(;0!==G&&W<Z.length;W++)this.words[W]=67108863&(U=(0|Z.words[W])+G),G=U>>>26;if(this.length=Z.length,0!==G)this.words[this.length]=G,this.length++;else if(Z!==this)for(;W<Z.length;W++)this.words[W]=Z.words[W];return this},s.prototype.add=function(R){var U;return 0!==R.negative&&0===this.negative?(R.negative=0,U=this.sub(R),R.negative^=1,U):0===R.negative&&0!==this.negative?(this.negative=0,U=R.sub(this),this.negative=1,U):this.length>R.length?this.clone().iadd(R):R.clone().iadd(this)},s.prototype.isub=function(R){if(0!==R.negative){R.negative=0;var U=this.iadd(R);return R.negative=1,U._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(R),this.negative=1,this._normSign();var Z,N,G=this.cmp(R);if(0===G)return this.negative=0,this.length=1,this.words[0]=0,this;G>0?(Z=this,N=R):(Z=R,N=this);for(var W=0,ae=0;ae<N.length;ae++)W=(U=(0|Z.words[ae])-(0|N.words[ae])+W)>>26,this.words[ae]=67108863&U;for(;0!==W&&ae<Z.length;ae++)W=(U=(0|Z.words[ae])+W)>>26,this.words[ae]=67108863&U;if(0===W&&ae<Z.length&&Z!==this)for(;ae<Z.length;ae++)this.words[ae]=Z.words[ae];return this.length=Math.max(this.length,ae),Z!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(R){return this.clone().isub(R)};var v=function(R,U,Z){var N,G,W,ae=R.words,re=U.words,ne=Z.words,Q=0,$=0|ae[0],X=8191&$,oe=$>>>13,fe=0|ae[1],ue=8191&fe,ge=fe>>>13,we=0|ae[2],Te=8191&we,xe=we>>>13,ye=0|ae[3],_e=8191&ye,Ie=ye>>>13,De=0|ae[4],be=8191&De,he=De>>>13,ce=0|ae[5],me=8191&ce,Pe=ce>>>13,Ae=0|ae[6],Ce=8191&Ae,Oe=Ae>>>13,Ne=0|ae[7],je=8191&Ne,ve=Ne>>>13,Me=0|ae[8],Le=8191&Me,Ue=Me>>>13,ze=0|ae[9],qe=8191&ze,Ke=ze>>>13,it=0|re[0],ft=8191&it,dt=it>>>13,kt=0|re[1],St=8191&kt,Tt=kt>>>13,lt=0|re[2],ot=8191&lt,Rt=lt>>>13,Vt=0|re[3],Ht=8191&Vt,zt=Vt>>>13,Qe=0|re[4],nt=8191&Qe,We=Qe>>>13,et=0|re[5],gt=8191&et,ht=et>>>13,Ge=0|re[6],He=8191&Ge,ut=Ge>>>13,tt=0|re[7],xt=8191&tt,At=tt>>>13,Mt=0|re[8],yt=8191&Mt,Pt=Mt>>>13,Ct=0|re[9],Dt=8191&Ct,Ut=Ct>>>13;Z.negative=R.negative^U.negative,Z.length=19;var Bt=(Q+(N=Math.imul(X,ft))|0)+((8191&(G=(G=Math.imul(X,dt))+Math.imul(oe,ft)|0))<<13)|0;Q=((W=Math.imul(oe,dt))+(G>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,N=Math.imul(ue,ft),G=(G=Math.imul(ue,dt))+Math.imul(ge,ft)|0,W=Math.imul(ge,dt);var qt=(Q+(N=N+Math.imul(X,St)|0)|0)+((8191&(G=(G=G+Math.imul(X,Tt)|0)+Math.imul(oe,St)|0))<<13)|0;Q=((W=W+Math.imul(oe,Tt)|0)+(G>>>13)|0)+(qt>>>26)|0,qt&=67108863,N=Math.imul(Te,ft),G=(G=Math.imul(Te,dt))+Math.imul(xe,ft)|0,W=Math.imul(xe,dt),N=N+Math.imul(ue,St)|0,G=(G=G+Math.imul(ue,Tt)|0)+Math.imul(ge,St)|0,W=W+Math.imul(ge,Tt)|0;var an=(Q+(N=N+Math.imul(X,ot)|0)|0)+((8191&(G=(G=G+Math.imul(X,Rt)|0)+Math.imul(oe,ot)|0))<<13)|0;Q=((W=W+Math.imul(oe,Rt)|0)+(G>>>13)|0)+(an>>>26)|0,an&=67108863,N=Math.imul(_e,ft),G=(G=Math.imul(_e,dt))+Math.imul(Ie,ft)|0,W=Math.imul(Ie,dt),N=N+Math.imul(Te,St)|0,G=(G=G+Math.imul(Te,Tt)|0)+Math.imul(xe,St)|0,W=W+Math.imul(xe,Tt)|0,N=N+Math.imul(ue,ot)|0,G=(G=G+Math.imul(ue,Rt)|0)+Math.imul(ge,ot)|0,W=W+Math.imul(ge,Rt)|0;var mn=(Q+(N=N+Math.imul(X,Ht)|0)|0)+((8191&(G=(G=G+Math.imul(X,zt)|0)+Math.imul(oe,Ht)|0))<<13)|0;Q=((W=W+Math.imul(oe,zt)|0)+(G>>>13)|0)+(mn>>>26)|0,mn&=67108863,N=Math.imul(be,ft),G=(G=Math.imul(be,dt))+Math.imul(he,ft)|0,W=Math.imul(he,dt),N=N+Math.imul(_e,St)|0,G=(G=G+Math.imul(_e,Tt)|0)+Math.imul(Ie,St)|0,W=W+Math.imul(Ie,Tt)|0,N=N+Math.imul(Te,ot)|0,G=(G=G+Math.imul(Te,Rt)|0)+Math.imul(xe,ot)|0,W=W+Math.imul(xe,Rt)|0,N=N+Math.imul(ue,Ht)|0,G=(G=G+Math.imul(ue,zt)|0)+Math.imul(ge,Ht)|0,W=W+Math.imul(ge,zt)|0;var Qt=(Q+(N=N+Math.imul(X,nt)|0)|0)+((8191&(G=(G=G+Math.imul(X,We)|0)+Math.imul(oe,nt)|0))<<13)|0;Q=((W=W+Math.imul(oe,We)|0)+(G>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,N=Math.imul(me,ft),G=(G=Math.imul(me,dt))+Math.imul(Pe,ft)|0,W=Math.imul(Pe,dt),N=N+Math.imul(be,St)|0,G=(G=G+Math.imul(be,Tt)|0)+Math.imul(he,St)|0,W=W+Math.imul(he,Tt)|0,N=N+Math.imul(_e,ot)|0,G=(G=G+Math.imul(_e,Rt)|0)+Math.imul(Ie,ot)|0,W=W+Math.imul(Ie,Rt)|0,N=N+Math.imul(Te,Ht)|0,G=(G=G+Math.imul(Te,zt)|0)+Math.imul(xe,Ht)|0,W=W+Math.imul(xe,zt)|0,N=N+Math.imul(ue,nt)|0,G=(G=G+Math.imul(ue,We)|0)+Math.imul(ge,nt)|0,W=W+Math.imul(ge,We)|0;var sn=(Q+(N=N+Math.imul(X,gt)|0)|0)+((8191&(G=(G=G+Math.imul(X,ht)|0)+Math.imul(oe,gt)|0))<<13)|0;Q=((W=W+Math.imul(oe,ht)|0)+(G>>>13)|0)+(sn>>>26)|0,sn&=67108863,N=Math.imul(Ce,ft),G=(G=Math.imul(Ce,dt))+Math.imul(Oe,ft)|0,W=Math.imul(Oe,dt),N=N+Math.imul(me,St)|0,G=(G=G+Math.imul(me,Tt)|0)+Math.imul(Pe,St)|0,W=W+Math.imul(Pe,Tt)|0,N=N+Math.imul(be,ot)|0,G=(G=G+Math.imul(be,Rt)|0)+Math.imul(he,ot)|0,W=W+Math.imul(he,Rt)|0,N=N+Math.imul(_e,Ht)|0,G=(G=G+Math.imul(_e,zt)|0)+Math.imul(Ie,Ht)|0,W=W+Math.imul(Ie,zt)|0,N=N+Math.imul(Te,nt)|0,G=(G=G+Math.imul(Te,We)|0)+Math.imul(xe,nt)|0,W=W+Math.imul(xe,We)|0,N=N+Math.imul(ue,gt)|0,G=(G=G+Math.imul(ue,ht)|0)+Math.imul(ge,gt)|0,W=W+Math.imul(ge,ht)|0;var Kt=(Q+(N=N+Math.imul(X,He)|0)|0)+((8191&(G=(G=G+Math.imul(X,ut)|0)+Math.imul(oe,He)|0))<<13)|0;Q=((W=W+Math.imul(oe,ut)|0)+(G>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,N=Math.imul(je,ft),G=(G=Math.imul(je,dt))+Math.imul(ve,ft)|0,W=Math.imul(ve,dt),N=N+Math.imul(Ce,St)|0,G=(G=G+Math.imul(Ce,Tt)|0)+Math.imul(Oe,St)|0,W=W+Math.imul(Oe,Tt)|0,N=N+Math.imul(me,ot)|0,G=(G=G+Math.imul(me,Rt)|0)+Math.imul(Pe,ot)|0,W=W+Math.imul(Pe,Rt)|0,N=N+Math.imul(be,Ht)|0,G=(G=G+Math.imul(be,zt)|0)+Math.imul(he,Ht)|0,W=W+Math.imul(he,zt)|0,N=N+Math.imul(_e,nt)|0,G=(G=G+Math.imul(_e,We)|0)+Math.imul(Ie,nt)|0,W=W+Math.imul(Ie,We)|0,N=N+Math.imul(Te,gt)|0,G=(G=G+Math.imul(Te,ht)|0)+Math.imul(xe,gt)|0,W=W+Math.imul(xe,ht)|0,N=N+Math.imul(ue,He)|0,G=(G=G+Math.imul(ue,ut)|0)+Math.imul(ge,He)|0,W=W+Math.imul(ge,ut)|0;var qn=(Q+(N=N+Math.imul(X,xt)|0)|0)+((8191&(G=(G=G+Math.imul(X,At)|0)+Math.imul(oe,xt)|0))<<13)|0;Q=((W=W+Math.imul(oe,At)|0)+(G>>>13)|0)+(qn>>>26)|0,qn&=67108863,N=Math.imul(Le,ft),G=(G=Math.imul(Le,dt))+Math.imul(Ue,ft)|0,W=Math.imul(Ue,dt),N=N+Math.imul(je,St)|0,G=(G=G+Math.imul(je,Tt)|0)+Math.imul(ve,St)|0,W=W+Math.imul(ve,Tt)|0,N=N+Math.imul(Ce,ot)|0,G=(G=G+Math.imul(Ce,Rt)|0)+Math.imul(Oe,ot)|0,W=W+Math.imul(Oe,Rt)|0,N=N+Math.imul(me,Ht)|0,G=(G=G+Math.imul(me,zt)|0)+Math.imul(Pe,Ht)|0,W=W+Math.imul(Pe,zt)|0,N=N+Math.imul(be,nt)|0,G=(G=G+Math.imul(be,We)|0)+Math.imul(he,nt)|0,W=W+Math.imul(he,We)|0,N=N+Math.imul(_e,gt)|0,G=(G=G+Math.imul(_e,ht)|0)+Math.imul(Ie,gt)|0,W=W+Math.imul(Ie,ht)|0,N=N+Math.imul(Te,He)|0,G=(G=G+Math.imul(Te,ut)|0)+Math.imul(xe,He)|0,W=W+Math.imul(xe,ut)|0,N=N+Math.imul(ue,xt)|0,G=(G=G+Math.imul(ue,At)|0)+Math.imul(ge,xt)|0,W=W+Math.imul(ge,At)|0;var Fn=(Q+(N=N+Math.imul(X,yt)|0)|0)+((8191&(G=(G=G+Math.imul(X,Pt)|0)+Math.imul(oe,yt)|0))<<13)|0;Q=((W=W+Math.imul(oe,Pt)|0)+(G>>>13)|0)+(Fn>>>26)|0,Fn&=67108863,N=Math.imul(qe,ft),G=(G=Math.imul(qe,dt))+Math.imul(Ke,ft)|0,W=Math.imul(Ke,dt),N=N+Math.imul(Le,St)|0,G=(G=G+Math.imul(Le,Tt)|0)+Math.imul(Ue,St)|0,W=W+Math.imul(Ue,Tt)|0,N=N+Math.imul(je,ot)|0,G=(G=G+Math.imul(je,Rt)|0)+Math.imul(ve,ot)|0,W=W+Math.imul(ve,Rt)|0,N=N+Math.imul(Ce,Ht)|0,G=(G=G+Math.imul(Ce,zt)|0)+Math.imul(Oe,Ht)|0,W=W+Math.imul(Oe,zt)|0,N=N+Math.imul(me,nt)|0,G=(G=G+Math.imul(me,We)|0)+Math.imul(Pe,nt)|0,W=W+Math.imul(Pe,We)|0,N=N+Math.imul(be,gt)|0,G=(G=G+Math.imul(be,ht)|0)+Math.imul(he,gt)|0,W=W+Math.imul(he,ht)|0,N=N+Math.imul(_e,He)|0,G=(G=G+Math.imul(_e,ut)|0)+Math.imul(Ie,He)|0,W=W+Math.imul(Ie,ut)|0,N=N+Math.imul(Te,xt)|0,G=(G=G+Math.imul(Te,At)|0)+Math.imul(xe,xt)|0,W=W+Math.imul(xe,At)|0,N=N+Math.imul(ue,yt)|0,G=(G=G+Math.imul(ue,Pt)|0)+Math.imul(ge,yt)|0,W=W+Math.imul(ge,Pt)|0;var Sn=(Q+(N=N+Math.imul(X,Dt)|0)|0)+((8191&(G=(G=G+Math.imul(X,Ut)|0)+Math.imul(oe,Dt)|0))<<13)|0;Q=((W=W+Math.imul(oe,Ut)|0)+(G>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,N=Math.imul(qe,St),G=(G=Math.imul(qe,Tt))+Math.imul(Ke,St)|0,W=Math.imul(Ke,Tt),N=N+Math.imul(Le,ot)|0,G=(G=G+Math.imul(Le,Rt)|0)+Math.imul(Ue,ot)|0,W=W+Math.imul(Ue,Rt)|0,N=N+Math.imul(je,Ht)|0,G=(G=G+Math.imul(je,zt)|0)+Math.imul(ve,Ht)|0,W=W+Math.imul(ve,zt)|0,N=N+Math.imul(Ce,nt)|0,G=(G=G+Math.imul(Ce,We)|0)+Math.imul(Oe,nt)|0,W=W+Math.imul(Oe,We)|0,N=N+Math.imul(me,gt)|0,G=(G=G+Math.imul(me,ht)|0)+Math.imul(Pe,gt)|0,W=W+Math.imul(Pe,ht)|0,N=N+Math.imul(be,He)|0,G=(G=G+Math.imul(be,ut)|0)+Math.imul(he,He)|0,W=W+Math.imul(he,ut)|0,N=N+Math.imul(_e,xt)|0,G=(G=G+Math.imul(_e,At)|0)+Math.imul(Ie,xt)|0,W=W+Math.imul(Ie,At)|0,N=N+Math.imul(Te,yt)|0,G=(G=G+Math.imul(Te,Pt)|0)+Math.imul(xe,yt)|0,W=W+Math.imul(xe,Pt)|0;var hn=(Q+(N=N+Math.imul(ue,Dt)|0)|0)+((8191&(G=(G=G+Math.imul(ue,Ut)|0)+Math.imul(ge,Dt)|0))<<13)|0;Q=((W=W+Math.imul(ge,Ut)|0)+(G>>>13)|0)+(hn>>>26)|0,hn&=67108863,N=Math.imul(qe,ot),G=(G=Math.imul(qe,Rt))+Math.imul(Ke,ot)|0,W=Math.imul(Ke,Rt),N=N+Math.imul(Le,Ht)|0,G=(G=G+Math.imul(Le,zt)|0)+Math.imul(Ue,Ht)|0,W=W+Math.imul(Ue,zt)|0,N=N+Math.imul(je,nt)|0,G=(G=G+Math.imul(je,We)|0)+Math.imul(ve,nt)|0,W=W+Math.imul(ve,We)|0,N=N+Math.imul(Ce,gt)|0,G=(G=G+Math.imul(Ce,ht)|0)+Math.imul(Oe,gt)|0,W=W+Math.imul(Oe,ht)|0,N=N+Math.imul(me,He)|0,G=(G=G+Math.imul(me,ut)|0)+Math.imul(Pe,He)|0,W=W+Math.imul(Pe,ut)|0,N=N+Math.imul(be,xt)|0,G=(G=G+Math.imul(be,At)|0)+Math.imul(he,xt)|0,W=W+Math.imul(he,At)|0,N=N+Math.imul(_e,yt)|0,G=(G=G+Math.imul(_e,Pt)|0)+Math.imul(Ie,yt)|0,W=W+Math.imul(Ie,Pt)|0;var wn=(Q+(N=N+Math.imul(Te,Dt)|0)|0)+((8191&(G=(G=G+Math.imul(Te,Ut)|0)+Math.imul(xe,Dt)|0))<<13)|0;Q=((W=W+Math.imul(xe,Ut)|0)+(G>>>13)|0)+(wn>>>26)|0,wn&=67108863,N=Math.imul(qe,Ht),G=(G=Math.imul(qe,zt))+Math.imul(Ke,Ht)|0,W=Math.imul(Ke,zt),N=N+Math.imul(Le,nt)|0,G=(G=G+Math.imul(Le,We)|0)+Math.imul(Ue,nt)|0,W=W+Math.imul(Ue,We)|0,N=N+Math.imul(je,gt)|0,G=(G=G+Math.imul(je,ht)|0)+Math.imul(ve,gt)|0,W=W+Math.imul(ve,ht)|0,N=N+Math.imul(Ce,He)|0,G=(G=G+Math.imul(Ce,ut)|0)+Math.imul(Oe,He)|0,W=W+Math.imul(Oe,ut)|0,N=N+Math.imul(me,xt)|0,G=(G=G+Math.imul(me,At)|0)+Math.imul(Pe,xt)|0,W=W+Math.imul(Pe,At)|0,N=N+Math.imul(be,yt)|0,G=(G=G+Math.imul(be,Pt)|0)+Math.imul(he,yt)|0,W=W+Math.imul(he,Pt)|0;var pn=(Q+(N=N+Math.imul(_e,Dt)|0)|0)+((8191&(G=(G=G+Math.imul(_e,Ut)|0)+Math.imul(Ie,Dt)|0))<<13)|0;Q=((W=W+Math.imul(Ie,Ut)|0)+(G>>>13)|0)+(pn>>>26)|0,pn&=67108863,N=Math.imul(qe,nt),G=(G=Math.imul(qe,We))+Math.imul(Ke,nt)|0,W=Math.imul(Ke,We),N=N+Math.imul(Le,gt)|0,G=(G=G+Math.imul(Le,ht)|0)+Math.imul(Ue,gt)|0,W=W+Math.imul(Ue,ht)|0,N=N+Math.imul(je,He)|0,G=(G=G+Math.imul(je,ut)|0)+Math.imul(ve,He)|0,W=W+Math.imul(ve,ut)|0,N=N+Math.imul(Ce,xt)|0,G=(G=G+Math.imul(Ce,At)|0)+Math.imul(Oe,xt)|0,W=W+Math.imul(Oe,At)|0,N=N+Math.imul(me,yt)|0,G=(G=G+Math.imul(me,Pt)|0)+Math.imul(Pe,yt)|0,W=W+Math.imul(Pe,Pt)|0;var An=(Q+(N=N+Math.imul(be,Dt)|0)|0)+((8191&(G=(G=G+Math.imul(be,Ut)|0)+Math.imul(he,Dt)|0))<<13)|0;Q=((W=W+Math.imul(he,Ut)|0)+(G>>>13)|0)+(An>>>26)|0,An&=67108863,N=Math.imul(qe,gt),G=(G=Math.imul(qe,ht))+Math.imul(Ke,gt)|0,W=Math.imul(Ke,ht),N=N+Math.imul(Le,He)|0,G=(G=G+Math.imul(Le,ut)|0)+Math.imul(Ue,He)|0,W=W+Math.imul(Ue,ut)|0,N=N+Math.imul(je,xt)|0,G=(G=G+Math.imul(je,At)|0)+Math.imul(ve,xt)|0,W=W+Math.imul(ve,At)|0,N=N+Math.imul(Ce,yt)|0,G=(G=G+Math.imul(Ce,Pt)|0)+Math.imul(Oe,yt)|0,W=W+Math.imul(Oe,Pt)|0;var On=(Q+(N=N+Math.imul(me,Dt)|0)|0)+((8191&(G=(G=G+Math.imul(me,Ut)|0)+Math.imul(Pe,Dt)|0))<<13)|0;Q=((W=W+Math.imul(Pe,Ut)|0)+(G>>>13)|0)+(On>>>26)|0,On&=67108863,N=Math.imul(qe,He),G=(G=Math.imul(qe,ut))+Math.imul(Ke,He)|0,W=Math.imul(Ke,ut),N=N+Math.imul(Le,xt)|0,G=(G=G+Math.imul(Le,At)|0)+Math.imul(Ue,xt)|0,W=W+Math.imul(Ue,At)|0,N=N+Math.imul(je,yt)|0,G=(G=G+Math.imul(je,Pt)|0)+Math.imul(ve,yt)|0,W=W+Math.imul(ve,Pt)|0;var Dn=(Q+(N=N+Math.imul(Ce,Dt)|0)|0)+((8191&(G=(G=G+Math.imul(Ce,Ut)|0)+Math.imul(Oe,Dt)|0))<<13)|0;Q=((W=W+Math.imul(Oe,Ut)|0)+(G>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,N=Math.imul(qe,xt),G=(G=Math.imul(qe,At))+Math.imul(Ke,xt)|0,W=Math.imul(Ke,At),N=N+Math.imul(Le,yt)|0,G=(G=G+Math.imul(Le,Pt)|0)+Math.imul(Ue,yt)|0,W=W+Math.imul(Ue,Pt)|0;var Vn=(Q+(N=N+Math.imul(je,Dt)|0)|0)+((8191&(G=(G=G+Math.imul(je,Ut)|0)+Math.imul(ve,Dt)|0))<<13)|0;Q=((W=W+Math.imul(ve,Ut)|0)+(G>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,N=Math.imul(qe,yt),G=(G=Math.imul(qe,Pt))+Math.imul(Ke,yt)|0,W=Math.imul(Ke,Pt);var Gn=(Q+(N=N+Math.imul(Le,Dt)|0)|0)+((8191&(G=(G=G+Math.imul(Le,Ut)|0)+Math.imul(Ue,Dt)|0))<<13)|0;Q=((W=W+Math.imul(Ue,Ut)|0)+(G>>>13)|0)+(Gn>>>26)|0,Gn&=67108863;var Nn=(Q+(N=Math.imul(qe,Dt))|0)+((8191&(G=(G=Math.imul(qe,Ut))+Math.imul(Ke,Dt)|0))<<13)|0;return Q=((W=Math.imul(Ke,Ut))+(G>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,ne[0]=Bt,ne[1]=qt,ne[2]=an,ne[3]=mn,ne[4]=Qt,ne[5]=sn,ne[6]=Kt,ne[7]=qn,ne[8]=Fn,ne[9]=Sn,ne[10]=hn,ne[11]=wn,ne[12]=pn,ne[13]=An,ne[14]=On,ne[15]=Dn,ne[16]=Vn,ne[17]=Gn,ne[18]=Nn,0!==Q&&(ne[19]=Q,Z.length++),Z};function _(R,U,Z){return(new f).mulp(R,U,Z)}function f(R,U){this.x=R,this.y=U}Math.imul||(v=x),s.prototype.mulTo=function(R,U){var N=this.length+R.length;return 10===this.length&&10===R.length?v(this,R,U):N<63?x(this,R,U):N<1024?function(G,W,ae){ae.negative=W.negative^G.negative,ae.length=G.length+W.length;for(var re=0,ne=0,Q=0;Q<ae.length-1;Q++){var $=ne;ne=0;for(var X=67108863&re,oe=Math.min(Q,W.length-1),fe=Math.max(0,Q-G.length+1);fe<=oe;fe++){var ge=(0|G.words[Q-fe])*(0|W.words[fe]),we=67108863&ge;X=67108863&(we=we+X|0),ne+=($=($=$+(ge/67108864|0)|0)+(we>>>26)|0)>>>26,$&=67108863}ae.words[Q]=X,re=$,$=ne}return 0!==re?ae.words[Q]=re:ae.length--,ae.strip()}(this,R,U):_(this,R,U)},f.prototype.makeRBT=function(R){for(var U=new Array(R),Z=s.prototype._countBits(R)-1,N=0;N<R;N++)U[N]=this.revBin(N,Z,R);return U},f.prototype.revBin=function(R,U,Z){if(0===R||R===Z-1)return R;for(var N=0,G=0;G<U;G++)N|=(1&R)<<U-G-1,R>>=1;return N},f.prototype.permute=function(R,U,Z,N,G,W){for(var ae=0;ae<W;ae++)N[ae]=U[R[ae]],G[ae]=Z[R[ae]]},f.prototype.transform=function(R,U,Z,N,G,W){this.permute(W,R,U,Z,N,G);for(var ae=1;ae<G;ae<<=1)for(var re=ae<<1,ne=Math.cos(2*Math.PI/re),Q=Math.sin(2*Math.PI/re),$=0;$<G;$+=re)for(var X=ne,oe=Q,fe=0;fe<ae;fe++){var ue=Z[$+fe],ge=N[$+fe],we=Z[$+fe+ae],Te=N[$+fe+ae],xe=X*we-oe*Te;Te=X*Te+oe*we,Z[$+fe]=ue+(we=xe),N[$+fe]=ge+Te,Z[$+fe+ae]=ue-we,N[$+fe+ae]=ge-Te,fe!==re&&(xe=ne*X-Q*oe,oe=ne*oe+Q*X,X=xe)}},f.prototype.guessLen13b=function(R,U){var Z=1|Math.max(U,R),N=1&Z,G=0;for(Z=Z/2|0;Z;Z>>>=1)G++;return 1<<G+1+N},f.prototype.conjugate=function(R,U,Z){if(!(Z<=1))for(var N=0;N<Z/2;N++){var G=R[N];R[N]=R[Z-N-1],R[Z-N-1]=G,G=U[N],U[N]=-U[Z-N-1],U[Z-N-1]=-G}},f.prototype.normalize13b=function(R,U){for(var Z=0,N=0;N<U/2;N++){var G=8192*Math.round(R[2*N+1]/U)+Math.round(R[2*N]/U)+Z;R[N]=67108863&G,Z=G<67108864?0:G/67108864|0}return R},f.prototype.convert13b=function(R,U,Z,N){for(var G=0,W=0;W<U;W++)Z[2*W]=8191&(G+=0|R[W]),Z[2*W+1]=8191&(G>>>=13),G>>>=13;for(W=2*U;W<N;++W)Z[W]=0;n(0===G),n(0==(-8192&G))},f.prototype.stub=function(R){for(var U=new Array(R),Z=0;Z<R;Z++)U[Z]=0;return U},f.prototype.mulp=function(R,U,Z){var N=2*this.guessLen13b(R.length,U.length),G=this.makeRBT(N),W=this.stub(N),ae=new Array(N),re=new Array(N),ne=new Array(N),Q=new Array(N),$=new Array(N),X=new Array(N),oe=Z.words;oe.length=N,this.convert13b(R.words,R.length,ae,N),this.convert13b(U.words,U.length,Q,N),this.transform(ae,W,re,ne,N,G),this.transform(Q,W,$,X,N,G);for(var fe=0;fe<N;fe++){var ue=re[fe]*$[fe]-ne[fe]*X[fe];ne[fe]=re[fe]*X[fe]+ne[fe]*$[fe],re[fe]=ue}return this.conjugate(re,ne,N),this.transform(re,ne,oe,W,N,G),this.conjugate(oe,W,N),this.normalize13b(oe,N),Z.negative=R.negative^U.negative,Z.length=R.length+U.length,Z.strip()},s.prototype.mul=function(R){var U=new s(null);return U.words=new Array(this.length+R.length),this.mulTo(R,U)},s.prototype.mulf=function(R){var U=new s(null);return U.words=new Array(this.length+R.length),_(this,R,U)},s.prototype.imul=function(R){return this.clone().mulTo(R,this)},s.prototype.imuln=function(R){n("number"==typeof R),n(R<67108864);for(var U=0,Z=0;Z<this.length;Z++){var N=(0|this.words[Z])*R,G=(67108863&N)+(67108863&U);U>>=26,U+=N/67108864|0,U+=G>>>26,this.words[Z]=67108863&G}return 0!==U&&(this.words[Z]=U,this.length++),this},s.prototype.muln=function(R){return this.clone().imuln(R)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(R){var U=function(W){for(var ae=new Array(W.bitLength()),re=0;re<ae.length;re++){var Q=re%26;ae[re]=(W.words[re/26|0]&1<<Q)>>>Q}return ae}(R);if(0===U.length)return new s(1);for(var Z=this,N=0;N<U.length&&0===U[N];N++,Z=Z.sqr());if(++N<U.length)for(var G=Z.sqr();N<U.length;N++,G=G.sqr())0!==U[N]&&(Z=Z.mul(G));return Z},s.prototype.iushln=function(R){n("number"==typeof R&&R>=0);var U,Z=R%26,N=(R-Z)/26,G=67108863>>>26-Z<<26-Z;if(0!==Z){var W=0;for(U=0;U<this.length;U++){var ae=this.words[U]&G;this.words[U]=(0|this.words[U])-ae<<Z|W,W=ae>>>26-Z}W&&(this.words[U]=W,this.length++)}if(0!==N){for(U=this.length-1;U>=0;U--)this.words[U+N]=this.words[U];for(U=0;U<N;U++)this.words[U]=0;this.length+=N}return this.strip()},s.prototype.ishln=function(R){return n(0===this.negative),this.iushln(R)},s.prototype.iushrn=function(R,U,Z){var N;n("number"==typeof R&&R>=0),N=U?(U-U%26)/26:0;var G=R%26,W=Math.min((R-G)/26,this.length),ae=67108863^67108863>>>G<<G,re=Z;if(N-=W,N=Math.max(0,N),re){for(var ne=0;ne<W;ne++)re.words[ne]=this.words[ne];re.length=W}if(0!==W)if(this.length>W)for(this.length-=W,ne=0;ne<this.length;ne++)this.words[ne]=this.words[ne+W];else this.words[0]=0,this.length=1;var Q=0;for(ne=this.length-1;ne>=0&&(0!==Q||ne>=N);ne--){var $=0|this.words[ne];this.words[ne]=Q<<26-G|$>>>G,Q=$&ae}return re&&0!==Q&&(re.words[re.length++]=Q),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(R,U,Z){return n(0===this.negative),this.iushrn(R,U,Z)},s.prototype.shln=function(R){return this.clone().ishln(R)},s.prototype.ushln=function(R){return this.clone().iushln(R)},s.prototype.shrn=function(R){return this.clone().ishrn(R)},s.prototype.ushrn=function(R){return this.clone().iushrn(R)},s.prototype.testn=function(R){n("number"==typeof R&&R>=0);var U=R%26,Z=(R-U)/26;return!(this.length<=Z||!(this.words[Z]&1<<U))},s.prototype.imaskn=function(R){n("number"==typeof R&&R>=0);var U=R%26,Z=(R-U)/26;return n(0===this.negative,"imaskn works only with positive numbers"),this.length<=Z?this:(0!==U&&Z++,this.length=Math.min(Z,this.length),0!==U&&(this.words[this.length-1]&=67108863^67108863>>>U<<U),this.strip())},s.prototype.maskn=function(R){return this.clone().imaskn(R)},s.prototype.iaddn=function(R){return n("number"==typeof R),n(R<67108864),R<0?this.isubn(-R):0!==this.negative?1===this.length&&(0|this.words[0])<R?(this.words[0]=R-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(R),this.negative=1,this):this._iaddn(R)},s.prototype._iaddn=function(R){this.words[0]+=R;for(var U=0;U<this.length&&this.words[U]>=67108864;U++)this.words[U]-=67108864,U===this.length-1?this.words[U+1]=1:this.words[U+1]++;return this.length=Math.max(this.length,U+1),this},s.prototype.isubn=function(R){if(n("number"==typeof R),n(R<67108864),R<0)return this.iaddn(-R);if(0!==this.negative)return this.negative=0,this.iaddn(R),this.negative=1,this;if(this.words[0]-=R,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var U=0;U<this.length&&this.words[U]<0;U++)this.words[U]+=67108864,this.words[U+1]-=1;return this.strip()},s.prototype.addn=function(R){return this.clone().iaddn(R)},s.prototype.subn=function(R){return this.clone().isubn(R)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(R,U,Z){var N,G;this._expand(R.length+Z);var ae=0;for(N=0;N<R.length;N++){G=(0|this.words[N+Z])+ae;var re=(0|R.words[N])*U;ae=((G-=67108863&re)>>26)-(re/67108864|0),this.words[N+Z]=67108863&G}for(;N<this.length-Z;N++)ae=(G=(0|this.words[N+Z])+ae)>>26,this.words[N+Z]=67108863&G;if(0===ae)return this.strip();for(n(-1===ae),ae=0,N=0;N<this.length;N++)ae=(G=-(0|this.words[N])+ae)>>26,this.words[N]=67108863&G;return this.negative=1,this.strip()},s.prototype._wordDiv=function(R,U){var Z,N=this.clone(),G=R,W=0|G.words[G.length-1];0!=(Z=26-this._countBits(W))&&(G=G.ushln(Z),N.iushln(Z),W=0|G.words[G.length-1]);var ae,re=N.length-G.length;if("mod"!==U){(ae=new s(null)).length=re+1,ae.words=new Array(ae.length);for(var ne=0;ne<ae.length;ne++)ae.words[ne]=0}var Q=N.clone()._ishlnsubmul(G,1,re);0===Q.negative&&(N=Q,ae&&(ae.words[re]=1));for(var $=re-1;$>=0;$--){var X=67108864*(0|N.words[G.length+$])+(0|N.words[G.length+$-1]);for(X=Math.min(X/W|0,67108863),N._ishlnsubmul(G,X,$);0!==N.negative;)X--,N.negative=0,N._ishlnsubmul(G,1,$),N.isZero()||(N.negative^=1);ae&&(ae.words[$]=X)}return ae&&ae.strip(),N.strip(),"div"!==U&&0!==Z&&N.iushrn(Z),{div:ae||null,mod:N}},s.prototype.divmod=function(R,U,Z){return n(!R.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===R.negative?(W=this.neg().divmod(R,U),"mod"!==U&&(N=W.div.neg()),"div"!==U&&(G=W.mod.neg(),Z&&0!==G.negative&&G.iadd(R)),{div:N,mod:G}):0===this.negative&&0!==R.negative?(W=this.divmod(R.neg(),U),"mod"!==U&&(N=W.div.neg()),{div:N,mod:W.mod}):this.negative&R.negative?(W=this.neg().divmod(R.neg(),U),"div"!==U&&(G=W.mod.neg(),Z&&0!==G.negative&&G.isub(R)),{div:W.div,mod:G}):R.length>this.length||this.cmp(R)<0?{div:new s(0),mod:this}:1===R.length?"div"===U?{div:this.divn(R.words[0]),mod:null}:"mod"===U?{div:null,mod:new s(this.modn(R.words[0]))}:{div:this.divn(R.words[0]),mod:new s(this.modn(R.words[0]))}:this._wordDiv(R,U);var N,G,W},s.prototype.div=function(R){return this.divmod(R,"div",!1).div},s.prototype.mod=function(R){return this.divmod(R,"mod",!1).mod},s.prototype.umod=function(R){return this.divmod(R,"mod",!0).mod},s.prototype.divRound=function(R){var U=this.divmod(R);if(U.mod.isZero())return U.div;var Z=0!==U.div.negative?U.mod.isub(R):U.mod,N=R.ushrn(1),G=R.andln(1),W=Z.cmp(N);return W<0||1===G&&0===W?U.div:0!==U.div.negative?U.div.isubn(1):U.div.iaddn(1)},s.prototype.modn=function(R){n(R<=67108863);for(var U=67108864%R,Z=0,N=this.length-1;N>=0;N--)Z=(U*Z+(0|this.words[N]))%R;return Z},s.prototype.idivn=function(R){n(R<=67108863);for(var U=0,Z=this.length-1;Z>=0;Z--){var N=(0|this.words[Z])+67108864*U;this.words[Z]=N/R|0,U=N%R}return this.strip()},s.prototype.divn=function(R){return this.clone().idivn(R)},s.prototype.egcd=function(R){n(0===R.negative),n(!R.isZero());var U=this,Z=R.clone();U=0!==U.negative?U.umod(R):U.clone();for(var N=new s(1),G=new s(0),W=new s(0),ae=new s(1),re=0;U.isEven()&&Z.isEven();)U.iushrn(1),Z.iushrn(1),++re;for(var ne=Z.clone(),Q=U.clone();!U.isZero();){for(var $=0,X=1;!(U.words[0]&X)&&$<26;++$,X<<=1);if($>0)for(U.iushrn($);$-- >0;)(N.isOdd()||G.isOdd())&&(N.iadd(ne),G.isub(Q)),N.iushrn(1),G.iushrn(1);for(var oe=0,fe=1;!(Z.words[0]&fe)&&oe<26;++oe,fe<<=1);if(oe>0)for(Z.iushrn(oe);oe-- >0;)(W.isOdd()||ae.isOdd())&&(W.iadd(ne),ae.isub(Q)),W.iushrn(1),ae.iushrn(1);U.cmp(Z)>=0?(U.isub(Z),N.isub(W),G.isub(ae)):(Z.isub(U),W.isub(N),ae.isub(G))}return{a:W,b:ae,gcd:Z.iushln(re)}},s.prototype._invmp=function(R){n(0===R.negative),n(!R.isZero());var U=this,Z=R.clone();U=0!==U.negative?U.umod(R):U.clone();for(var N,G=new s(1),W=new s(0),ae=Z.clone();U.cmpn(1)>0&&Z.cmpn(1)>0;){for(var re=0,ne=1;!(U.words[0]&ne)&&re<26;++re,ne<<=1);if(re>0)for(U.iushrn(re);re-- >0;)G.isOdd()&&G.iadd(ae),G.iushrn(1);for(var Q=0,$=1;!(Z.words[0]&$)&&Q<26;++Q,$<<=1);if(Q>0)for(Z.iushrn(Q);Q-- >0;)W.isOdd()&&W.iadd(ae),W.iushrn(1);U.cmp(Z)>=0?(U.isub(Z),G.isub(W)):(Z.isub(U),W.isub(G))}return(N=0===U.cmpn(1)?G:W).cmpn(0)<0&&N.iadd(R),N},s.prototype.gcd=function(R){if(this.isZero())return R.abs();if(R.isZero())return this.abs();var U=this.clone(),Z=R.clone();U.negative=0,Z.negative=0;for(var N=0;U.isEven()&&Z.isEven();N++)U.iushrn(1),Z.iushrn(1);for(;;){for(;U.isEven();)U.iushrn(1);for(;Z.isEven();)Z.iushrn(1);var G=U.cmp(Z);if(G<0){var W=U;U=Z,Z=W}else if(0===G||0===Z.cmpn(1))break;U.isub(Z)}return Z.iushln(N)},s.prototype.invm=function(R){return this.egcd(R).a.umod(R)},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.andln=function(R){return this.words[0]&R},s.prototype.bincn=function(R){n("number"==typeof R);var U=R%26,Z=(R-U)/26,N=1<<U;if(this.length<=Z)return this._expand(Z+1),this.words[Z]|=N,this;for(var G=N,W=Z;0!==G&&W<this.length;W++){var ae=0|this.words[W];G=(ae+=G)>>>26,this.words[W]=ae&=67108863}return 0!==G&&(this.words[W]=G,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(R){var U,Z=R<0;if(0!==this.negative&&!Z)return-1;if(0===this.negative&&Z)return 1;if(this.strip(),this.length>1)U=1;else{Z&&(R=-R),n(R<=67108863,"Number is too big");var N=0|this.words[0];U=N===R?0:N<R?-1:1}return 0!==this.negative?0|-U:U},s.prototype.cmp=function(R){if(0!==this.negative&&0===R.negative)return-1;if(0===this.negative&&0!==R.negative)return 1;var U=this.ucmp(R);return 0!==this.negative?0|-U:U},s.prototype.ucmp=function(R){if(this.length>R.length)return 1;if(this.length<R.length)return-1;for(var U=0,Z=this.length-1;Z>=0;Z--){var N=0|this.words[Z],G=0|R.words[Z];if(N!==G){N<G?U=-1:N>G&&(U=1);break}}return U},s.prototype.gtn=function(R){return 1===this.cmpn(R)},s.prototype.gt=function(R){return 1===this.cmp(R)},s.prototype.gten=function(R){return this.cmpn(R)>=0},s.prototype.gte=function(R){return this.cmp(R)>=0},s.prototype.ltn=function(R){return-1===this.cmpn(R)},s.prototype.lt=function(R){return-1===this.cmp(R)},s.prototype.lten=function(R){return this.cmpn(R)<=0},s.prototype.lte=function(R){return this.cmp(R)<=0},s.prototype.eqn=function(R){return 0===this.cmpn(R)},s.prototype.eq=function(R){return 0===this.cmp(R)},s.red=function(R){return new z(R)},s.prototype.toRed=function(R){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),R.convertTo(this)._forceRed(R)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(R){return this.red=R,this},s.prototype.forceRed=function(R){return n(!this.red,"Already a number in reduction context"),this._forceRed(R)},s.prototype.redAdd=function(R){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,R)},s.prototype.redIAdd=function(R){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,R)},s.prototype.redSub=function(R){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,R)},s.prototype.redISub=function(R){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,R)},s.prototype.redShl=function(R){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,R)},s.prototype.redMul=function(R){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.mul(this,R)},s.prototype.redIMul=function(R){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.imul(this,R)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(R){return n(this.red&&!R.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,R)};var C={k256:null,p224:null,p192:null,p25519:null};function w(R,U){this.name=R,this.p=new s(U,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function P(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function L(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function O(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function z(R){if("string"==typeof R){var U=s._prime(R);this.m=U.p,this.prime=U}else n(R.gtn(1),"modulus must be greater than 1"),this.m=R,this.prime=null}function V(R){z.call(this,R),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var R=new s(null);return R.words=new Array(Math.ceil(this.n/13)),R},w.prototype.ireduce=function(R){var U,Z=R;do{this.split(Z,this.tmp),U=(Z=(Z=this.imulK(Z)).iadd(this.tmp)).bitLength()}while(U>this.n);var N=U<this.n?-1:Z.ucmp(this.p);return 0===N?(Z.words[0]=0,Z.length=1):N>0?Z.isub(this.p):void 0!==Z.strip?Z.strip():Z._strip(),Z},w.prototype.split=function(R,U){R.iushrn(this.n,0,U)},w.prototype.imulK=function(R){return R.imul(this.k)},a(E,w),E.prototype.split=function(R,U){for(var Z=4194303,N=Math.min(R.length,9),G=0;G<N;G++)U.words[G]=R.words[G];if(U.length=N,R.length<=9)return R.words[0]=0,void(R.length=1);var W=R.words[9];for(U.words[U.length++]=W&Z,G=10;G<R.length;G++){var ae=0|R.words[G];R.words[G-10]=(ae&Z)<<4|W>>>22,W=ae}R.words[G-10]=W>>>=22,R.length-=0===W&&R.length>10?10:9},E.prototype.imulK=function(R){R.words[R.length]=0,R.words[R.length+1]=0,R.length+=2;for(var U=0,Z=0;Z<R.length;Z++){var N=0|R.words[Z];R.words[Z]=67108863&(U+=977*N),U=64*N+(U/67108864|0)}return 0===R.words[R.length-1]&&(R.length--,0===R.words[R.length-1]&&R.length--),R},a(P,w),a(L,w),a(O,w),O.prototype.imulK=function(R){for(var U=0,Z=0;Z<R.length;Z++){var N=19*(0|R.words[Z])+U,G=67108863&N;N>>>=26,R.words[Z]=G,U=N}return 0!==U&&(R.words[R.length++]=U),R},s._prime=function(R){if(C[R])return C[R];var U;if("k256"===R)U=new E;else if("p224"===R)U=new P;else if("p192"===R)U=new L;else{if("p25519"!==R)throw new Error("Unknown prime "+R);U=new O}return C[R]=U,U},z.prototype._verify1=function(R){n(0===R.negative,"red works only with positives"),n(R.red,"red works only with red numbers")},z.prototype._verify2=function(R,U){n(0==(R.negative|U.negative),"red works only with positives"),n(R.red&&R.red===U.red,"red works only with red numbers")},z.prototype.imod=function(R){return this.prime?this.prime.ireduce(R)._forceRed(this):R.umod(this.m)._forceRed(this)},z.prototype.neg=function(R){return R.isZero()?R.clone():this.m.sub(R)._forceRed(this)},z.prototype.add=function(R,U){this._verify2(R,U);var Z=R.add(U);return Z.cmp(this.m)>=0&&Z.isub(this.m),Z._forceRed(this)},z.prototype.iadd=function(R,U){this._verify2(R,U);var Z=R.iadd(U);return Z.cmp(this.m)>=0&&Z.isub(this.m),Z},z.prototype.sub=function(R,U){this._verify2(R,U);var Z=R.sub(U);return Z.cmpn(0)<0&&Z.iadd(this.m),Z._forceRed(this)},z.prototype.isub=function(R,U){this._verify2(R,U);var Z=R.isub(U);return Z.cmpn(0)<0&&Z.iadd(this.m),Z},z.prototype.shl=function(R,U){return this._verify1(R),this.imod(R.ushln(U))},z.prototype.imul=function(R,U){return this._verify2(R,U),this.imod(R.imul(U))},z.prototype.mul=function(R,U){return this._verify2(R,U),this.imod(R.mul(U))},z.prototype.isqr=function(R){return this.imul(R,R.clone())},z.prototype.sqr=function(R){return this.mul(R,R)},z.prototype.sqrt=function(R){if(R.isZero())return R.clone();var U=this.m.andln(3);if(n(U%2==1),3===U){var Z=this.m.add(new s(1)).iushrn(2);return this.pow(R,Z)}for(var N=this.m.subn(1),G=0;!N.isZero()&&0===N.andln(1);)G++,N.iushrn(1);n(!N.isZero());var W=new s(1).toRed(this),ae=W.redNeg(),re=this.m.subn(1).iushrn(1),ne=this.m.bitLength();for(ne=new s(2*ne*ne).toRed(this);0!==this.pow(ne,re).cmp(ae);)ne.redIAdd(ae);for(var Q=this.pow(ne,N),$=this.pow(R,N.addn(1).iushrn(1)),X=this.pow(R,N),oe=G;0!==X.cmp(W);){for(var fe=X,ue=0;0!==fe.cmp(W);ue++)fe=fe.redSqr();n(ue<oe);var ge=this.pow(Q,new s(1).iushln(oe-ue-1));$=$.redMul(ge),Q=ge.redSqr(),X=X.redMul(Q),oe=ue}return $},z.prototype.invm=function(R){var U=R._invmp(this.m);return 0!==U.negative?(U.negative=0,this.imod(U).redNeg()):this.imod(U)},z.prototype.pow=function(R,U){if(U.isZero())return new s(1).toRed(this);if(0===U.cmpn(1))return R.clone();var Z=new Array(16);Z[0]=new s(1).toRed(this),Z[1]=R;for(var N=2;N<Z.length;N++)Z[N]=this.mul(Z[N-1],R);var G=Z[0],W=0,ae=0,re=U.bitLength()%26;for(0===re&&(re=26),N=U.length-1;N>=0;N--){for(var ne=U.words[N],Q=re-1;Q>=0;Q--){var $=ne>>Q&1;G!==Z[0]&&(G=this.sqr(G)),0!==$||0!==W?(W<<=1,W|=$,(4==++ae||0===N&&0===Q)&&(G=this.mul(G,Z[W]),ae=0,W=0)):ae=0}re=26}return G},z.prototype.convertTo=function(R){var U=R.umod(this.m);return U===R?U.clone():U},z.prototype.convertFrom=function(R){var U=R.clone();return U.red=null,U},s.mont=function(R){return new V(R)},a(V,z),V.prototype.convertTo=function(R){return this.imod(R.ushln(this.shift))},V.prototype.convertFrom=function(R){var U=this.imod(R.mul(this.rinv));return U.red=null,U},V.prototype.imul=function(R,U){if(R.isZero()||U.isZero())return R.words[0]=0,R.length=1,R;var Z=R.imul(U),N=Z.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),G=Z.isub(N).iushrn(this.shift),W=G;return G.cmp(this.m)>=0?W=G.isub(this.m):G.cmpn(0)<0&&(W=G.iadd(this.m)),W._forceRed(this)},V.prototype.mul=function(R,U){if(R.isZero()||U.isZero())return new s(0)._forceRed(this);var Z=R.mul(U),N=Z.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),G=Z.isub(N).iushrn(this.shift),W=G;return G.cmp(this.m)>=0?W=G.isub(this.m):G.cmpn(0)<0&&(W=G.iadd(this.m)),W._forceRed(this)},V.prototype.invm=function(R){return this.imod(R._invmp(this.m).mul(this.r2))._forceRed(this)}}(p=t.nmd(p),this)},6204:function(p){"use strict";p.exports=function(l){var t,i,r,n=l.length,a=0;for(t=0;t<n;++t)a+=l[t].length;var s=new Array(a),c=0;for(t=0;t<n;++t){var h=l[t],u=h.length;for(i=0;i<u;++i){var y=s[c++]=new Array(u-1),d=0;for(r=0;r<u;++r)r!==i&&(y[d++]=h[r]);if(1&i){var m=y[1];y[1]=y[0],y[0]=m}}}return s}},6867:function(p,l,t){"use strict";p.exports=function(y,d,m){switch(arguments.length){case 1:return i=[],h(g=y,g,u,!0),i;case 2:return"function"==typeof d?h(y,y,d,!0):(i=[],h(y,d,u,!1),i);case 3:return h(y,d,m,!1);default:throw new Error("box-intersect: Invalid arguments")}var g};var i,r=t(1888),n=t(855),a=t(7150);function s(y,d){for(var m=0;m<y;++m)if(!(d[m]<=d[m+y]))return!0;return!1}function c(y,d,m,g){for(var x=0,v=0,_=0,f=y.length;_<f;++_){var C=y[_];if(!s(d,C)){for(var w=0;w<2*d;++w)m[x++]=C[w];g[v++]=_}}return v}function h(y,d,m,g){var x=y.length,v=d.length;if(!(x<=0||v<=0)){var _=y[0].length>>>1;if(!(_<=0)){var f,C=r.mallocDouble(2*_*x),w=r.mallocInt32(x);if((x=c(y,_,C,w))>0){if(1===_&&g)n.init(x),f=n.sweepComplete(_,m,0,x,C,w,0,x,C,w);else{var E=r.mallocDouble(2*_*v),P=r.mallocInt32(v);(v=c(d,_,E,P))>0&&(n.init(x+v),f=1===_?n.sweepBipartite(_,m,0,x,C,w,0,v,E,P):a(_,m,g,x,C,w,v,E,P),r.free(E),r.free(P))}r.free(C),r.free(w)}return f}}}function u(y,d){i.push([y,d])}},2455:function(p,l){"use strict";function t(i){return i?function(r,n,a,s,c,h,u,y,d,m,g){return c-s>d-y?function(x,v,_,f,C,w,E,P,L,O,z){for(var V=2*x,R=f,U=V*f;R<C;++R,U+=V){var Z=w[v+U],N=w[v+U+x],G=E[R];e:for(var W=P,ae=V*P;W<L;++W,ae+=V){var Q=z[W];if(!(O[v+ae+x]<Z||N<O[v+ae])){for(var $=v+1;$<x;++$)if(w[$+x+U]<O[$+ae]||O[$+x+ae]<w[$+U])continue e;var ge=_(G,Q);if(void 0!==ge)return ge}}}}(r,n,a,s,c,h,u,y,d,m,g):function(x,v,_,f,C,w,E,P,L,O,z){for(var V=2*x,R=P,U=V*P;R<L;++R,U+=V){var Z=O[v+U],N=O[v+U+x],G=z[R];e:for(var W=f,ae=V*f;W<C;++W,ae+=V){var Q=E[W];if(!(N<w[v+ae]||w[v+ae+x]<Z)){for(var $=v+1;$<x;++$)if(w[$+x+ae]<O[$+U]||O[$+x+U]<w[$+ae])continue e;var ge=_(Q,G);if(void 0!==ge)return ge}}}}(r,n,a,s,c,h,u,y,d,m,g)}:function(r,n,a,s,c,h,u,y,d,m,g,x){return h-c>m-d?s?function(v,_,f,C,w,E,P,L,O,z,V){for(var R=2*v,U=C,Z=R*C;U<w;++U,Z+=R){var N=E[_+Z],G=E[_+Z+v],W=P[U];e:for(var ae=L,re=R*L;ae<O;++ae,re+=R){var ne=z[_+re],Q=V[ae];if(!(ne<=N||G<ne)){for(var $=_+1;$<v;++$)if(E[$+v+Z]<z[$+re]||z[$+v+re]<E[$+Z])continue e;var ge=f(Q,W);if(void 0!==ge)return ge}}}}(r,n,a,c,h,u,y,d,m,g,x):function(v,_,f,C,w,E,P,L,O,z,V){for(var R=2*v,U=C,Z=R*C;U<w;++U,Z+=R){var N=E[_+Z],G=E[_+Z+v],W=P[U];e:for(var ae=L,re=R*L;ae<O;++ae,re+=R){var ne=z[_+re],Q=V[ae];if(!(ne<N||G<ne)){for(var $=_+1;$<v;++$)if(E[$+v+Z]<z[$+re]||z[$+v+re]<E[$+Z])continue e;var ge=f(W,Q);if(void 0!==ge)return ge}}}}(r,n,a,c,h,u,y,d,m,g,x):s?function(v,_,f,C,w,E,P,L,O,z,V){for(var R=2*v,U=L,Z=R*L;U<O;++U,Z+=R){var N=z[_+Z],G=V[U];e:for(var W=C,ae=R*C;W<w;++W,ae+=R){var Q=P[W];if(!(N<=E[_+ae]||E[_+ae+v]<N)){for(var $=_+1;$<v;++$)if(E[$+v+ae]<z[$+Z]||z[$+v+Z]<E[$+ae])continue e;var ge=f(G,Q);if(void 0!==ge)return ge}}}}(r,n,a,c,h,u,y,d,m,g,x):function(v,_,f,C,w,E,P,L,O,z,V){for(var R=2*v,U=L,Z=R*L;U<O;++U,Z+=R){var N=z[_+Z],G=V[U];e:for(var W=C,ae=R*C;W<w;++W,ae+=R){var Q=P[W];if(!(N<E[_+ae]||E[_+ae+v]<N)){for(var $=_+1;$<v;++$)if(E[$+v+ae]<z[$+Z]||z[$+v+Z]<E[$+ae])continue e;var ge=f(Q,G);if(void 0!==ge)return ge}}}}(r,n,a,c,h,u,y,d,m,g,x)}}l.partial=t(!1),l.full=t(!0)},7150:function(p,l,t){"use strict";p.exports=function(R,U,Z,N,G,W,ae,re,ne){!function(Ue,ze){var qe=8*r.log2(ze+1)*(Ue+1)|0,Ke=r.nextPow2(w*qe);P.length<Ke&&(i.free(P),P=i.mallocInt32(Ke));var it=r.nextPow2(E*qe);L.length<it&&(i.free(L),L=i.mallocDouble(it))}(R,N+ae);var Q,$=0,X=2*R;for(O($++,0,0,N,0,ae,Z?16:0,-1/0,1/0),Z||O($++,0,0,ae,0,N,1,-1/0,1/0);$>0;){var oe=($-=1)*w,fe=P[oe],ue=P[oe+1],ge=P[oe+2],we=P[oe+3],Te=P[oe+4],xe=P[oe+5],ye=$*E,_e=L[ye],Ie=L[ye+1],De=1&xe,be=!!(16&xe),he=G,ce=W,me=re,Pe=ne;if(De&&(he=re,ce=ne,me=G,Pe=W),!(2&xe&&ue>=(ge=v(R,fe,ue,ge,he,ce,Ie))||4&xe&&(ue=_(R,fe,ue,ge,he,ce,_e))>=ge)){var Ae=ge-ue,Ce=Te-we;if(be){if(R*Ae*(Ae+Ce)<m){if(void 0!==(Q=c.scanComplete(R,fe,U,ue,ge,he,ce,we,Te,me,Pe)))return Q;continue}}else{if(R*Math.min(Ae,Ce)<y){if(void 0!==(Q=a(R,fe,U,De,ue,ge,he,ce,we,Te,me,Pe)))return Q;continue}if(R*Ae*Ce<d){if(void 0!==(Q=c.scanBipartite(R,fe,U,De,ue,ge,he,ce,we,Te,me,Pe)))return Q;continue}}var Oe=g(R,fe,ue,ge,he,ce,_e,Ie);if(ue<Oe)if(R*(Oe-ue)<y){if(void 0!==(Q=s(R,fe+1,U,ue,Oe,he,ce,we,Te,me,Pe)))return Q}else if(fe===R-2){if(void 0!==(Q=De?c.sweepBipartite(R,U,we,Te,me,Pe,ue,Oe,he,ce):c.sweepBipartite(R,U,ue,Oe,he,ce,we,Te,me,Pe)))return Q}else O($++,fe+1,ue,Oe,we,Te,De,-1/0,1/0),O($++,fe+1,we,Te,ue,Oe,1^De,-1/0,1/0);if(Oe<ge){var Ne=h(R,fe,we,Te,me,Pe),je=me[X*Ne+fe],ve=x(R,fe,Ne,Te,me,Pe,je);if(ve<Te&&O($++,fe,Oe,ge,ve,Te,(4|De)+(be?16:0),je,Ie),we<Ne&&O($++,fe,Oe,ge,we,Ne,(2|De)+(be?16:0),_e,je),Ne+1===ve){if(void 0!==(Q=be?V(R,fe,U,Oe,ge,he,ce,Ne,me,Pe[Ne]):z(R,fe,U,De,Oe,ge,he,ce,Ne,me,Pe[Ne])))return Q}else if(Ne<ve){var Me;if(be){if(Oe<(Me=f(R,fe,Oe,ge,he,ce,je))){var Le=x(R,fe,Oe,Me,he,ce,je);if(fe===R-2){if(Oe<Le&&void 0!==(Q=c.sweepComplete(R,U,Oe,Le,he,ce,Ne,ve,me,Pe))||Le<Me&&void 0!==(Q=c.sweepBipartite(R,U,Le,Me,he,ce,Ne,ve,me,Pe)))return Q}else Oe<Le&&O($++,fe+1,Oe,Le,Ne,ve,16,-1/0,1/0),Le<Me&&(O($++,fe+1,Le,Me,Ne,ve,0,-1/0,1/0),O($++,fe+1,Ne,ve,Le,Me,1,-1/0,1/0))}}else Oe<(Me=De?C(R,fe,Oe,ge,he,ce,je):f(R,fe,Oe,ge,he,ce,je))&&(fe===R-2?Q=De?c.sweepBipartite(R,U,Ne,ve,me,Pe,Oe,Me,he,ce):c.sweepBipartite(R,U,Oe,Me,he,ce,Ne,ve,me,Pe):(O($++,fe+1,Oe,Me,Ne,ve,De,-1/0,1/0),O($++,fe+1,Ne,ve,Oe,Me,1^De,-1/0,1/0)))}}}}};var i=t(1888),r=t(8828),n=t(2455),a=n.partial,s=n.full,c=t(855),h=t(3545),u=t(8105),y=128,d=1<<22,m=1<<22,g=u("!(lo>=p0)&&!(p1>=hi)"),x=u("lo===p0"),v=u("lo<p0"),_=u("hi<=p0"),f=u("lo<=p0&&p0<=hi"),C=u("lo<p0&&p0<=hi"),w=6,E=2,P=i.mallocInt32(1024),L=i.mallocDouble(1024);function O(R,U,Z,N,G,W,ae,re,ne){var Q=w*R;P[Q]=U,P[Q+1]=Z,P[Q+2]=N,P[Q+3]=G,P[Q+4]=W,P[Q+5]=ae;var $=E*R;L[$]=re,L[$+1]=ne}function z(R,U,Z,N,G,W,ae,re,ne,Q,$){var X=2*R,oe=ne*X,fe=Q[oe+U];e:for(var ue=G,ge=G*X;ue<W;++ue,ge+=X){var we=ae[ge+U],Te=ae[ge+U+R];if(!(fe<we||Te<fe||N&&fe===we)){for(var xe,ye=re[ue],_e=U+1;_e<R;++_e)if(we=ae[ge+_e],(Te=ae[ge+_e+R])<Q[oe+_e]||Q[oe+_e+R]<we)continue e;if(void 0!==(xe=N?Z($,ye):Z(ye,$)))return xe}}}function V(R,U,Z,N,G,W,ae,re,ne,Q){var $=2*R,X=re*$,oe=ne[X+U];e:for(var fe=N,ue=N*$;fe<G;++fe,ue+=$){var ge=ae[fe];if(ge!==Q){var we=W[ue+U],Te=W[ue+U+R];if(!(oe<we||Te<oe)){for(var xe=U+1;xe<R;++xe)if(we=W[ue+xe],(Te=W[ue+xe+R])<ne[X+xe]||ne[X+xe+R]<we)continue e;var Ie=Z(ge,Q);if(void 0!==Ie)return Ie}}}}},3545:function(p,l,t){"use strict";p.exports=function(a,s,c,h,u,y){if(h<=c+1)return c;for(var d=c,m=h,g=h+c>>>1,x=2*a,v=g,_=u[x*g+s];d<m;){if(m-d<r){n(a,s,d,m,u,y),_=u[x*g+s];break}var f=m-d,C=Math.random()*f+d|0,w=u[x*C+s],E=Math.random()*f+d|0,P=u[x*E+s],L=Math.random()*f+d|0,O=u[x*L+s];w<=P?O>=P?(v=E,_=P):w>=O?(v=C,_=w):(v=L,_=O):P>=O?(v=E,_=P):O>=w?(v=C,_=w):(v=L,_=O);for(var z=x*(m-1),V=x*v,R=0;R<x;++R,++z,++V){var U=u[z];u[z]=u[V],u[V]=U}var Z=y[m-1];for(y[m-1]=y[v],y[v]=Z,z=x*(m-1),V=x*(v=i(a,s,d,m-1,u,y,_)),R=0;R<x;++R,++z,++V)U=u[z],u[z]=u[V],u[V]=U;if(Z=y[m-1],y[m-1]=y[v],y[v]=Z,g<v){for(m=v-1;d<m&&u[x*(m-1)+s]===_;)m-=1;m+=1}else{if(!(v<g))break;for(d=v+1;d<m&&u[x*d+s]===_;)d+=1}}return i(a,s,c,g,u,y,u[x*g+s])};var i=t(8105)("lo<p0"),r=8;function n(a,s,c,h,u,y){for(var d=2*a,m=d*(c+1)+s,g=c+1;g<h;++g,m+=d)for(var x=u[m],v=g,_=d*(g-1);v>c&&u[_+s]>x;--v,_-=d){for(var f=_,C=_+d,w=0;w<d;++w,++f,++C){var E=u[f];u[f]=u[C],u[C]=E}var P=y[v];y[v]=y[v-1],y[v-1]=P}}},8105:function(p){"use strict";p.exports=function(t){return l[t]};var l={"lo===p0":function(t,i,r,n,a,s,c){for(var h=2*t,u=h*r,y=u,d=r,m=i,g=r;n>g;++g,u+=h)if(a[u+m]===c)if(d===g)d+=1,y+=h;else{for(var x=0;h>x;++x){var v=a[u+x];a[u+x]=a[y],a[y++]=v}var _=s[g];s[g]=s[d],s[d++]=_}return d},"lo<p0":function(t,i,r,n,a,s,c){for(var h=2*t,u=h*r,y=u,d=r,m=i,g=r;n>g;++g,u+=h)if(a[u+m]<c)if(d===g)d+=1,y+=h;else{for(var x=0;h>x;++x){var v=a[u+x];a[u+x]=a[y],a[y++]=v}var _=s[g];s[g]=s[d],s[d++]=_}return d},"lo<=p0":function(t,i,r,n,a,s,c){for(var h=2*t,u=h*r,y=u,d=r,m=t+i,g=r;n>g;++g,u+=h)if(a[u+m]<=c)if(d===g)d+=1,y+=h;else{for(var x=0;h>x;++x){var v=a[u+x];a[u+x]=a[y],a[y++]=v}var _=s[g];s[g]=s[d],s[d++]=_}return d},"hi<=p0":function(t,i,r,n,a,s,c){for(var h=2*t,u=h*r,y=u,d=r,m=t+i,g=r;n>g;++g,u+=h)if(a[u+m]<=c)if(d===g)d+=1,y+=h;else{for(var x=0;h>x;++x){var v=a[u+x];a[u+x]=a[y],a[y++]=v}var _=s[g];s[g]=s[d],s[d++]=_}return d},"lo<p0&&p0<=hi":function(t,i,r,n,a,s,c){for(var h=2*t,u=h*r,y=u,d=r,m=i,g=t+i,x=r;n>x;++x,u+=h)if(a[u+m]<c&&c<=a[u+g])if(d===x)d+=1,y+=h;else{for(var f=0;h>f;++f){var C=a[u+f];a[u+f]=a[y],a[y++]=C}var w=s[x];s[x]=s[d],s[d++]=w}return d},"lo<=p0&&p0<=hi":function(t,i,r,n,a,s,c){for(var h=2*t,u=h*r,y=u,d=r,m=i,g=t+i,x=r;n>x;++x,u+=h)if(a[u+m]<=c&&c<=a[u+g])if(d===x)d+=1,y+=h;else{for(var f=0;h>f;++f){var C=a[u+f];a[u+f]=a[y],a[y++]=C}var w=s[x];s[x]=s[d],s[d++]=w}return d},"!(lo>=p0)&&!(p1>=hi)":function(t,i,r,n,a,s,c,h){for(var u=2*t,y=u*r,d=y,m=r,g=i,x=t+i,v=r;n>v;++v,y+=u)if(!(a[y+g]>=c||h>=a[y+x]))if(m===v)m+=1,d+=u;else{for(var C=0;u>C;++C){var w=a[y+C];a[y+C]=a[d],a[d++]=w}var E=s[v];s[v]=s[m],s[m++]=E}return m}}},1811:function(p){"use strict";p.exports=function(u,y){y<=4*l?t(0,y-1,u):h(0,y-1,u)};var l=32;function t(u,y,d){for(var m=2*(u+1),g=u+1;g<=y;++g){for(var x=d[m++],v=d[m++],_=g,f=m-2;_-- >u;){var C=d[f-2],w=d[f-1];if(C<x||C===x&&w<v)break;d[f]=C,d[f+1]=w,f-=2}d[f]=x,d[f+1]=v}}function i(u,y,d){var m=d[u*=2],g=d[u+1];d[u]=d[y*=2],d[u+1]=d[y+1],d[y]=m,d[y+1]=g}function r(u,y,d){d[u*=2]=d[y*=2],d[u+1]=d[y+1]}function n(u,y,d,m){d*=2;var g=m[u*=2],x=m[u+1];m[u]=m[y*=2],m[u+1]=m[y+1],m[y]=m[d],m[y+1]=m[d+1],m[d]=g,m[d+1]=x}function a(u,y,d,m,g){g[u*=2]=g[y*=2],g[y]=d,g[u+1]=g[y+1],g[y+1]=m}function s(u,y,d){var m=d[u*=2],g=d[y*=2];return!(m<g)&&(m!==g||d[u+1]>d[y+1])}function c(u,y,d,m){var g=m[u*=2];return g<y||g===y&&m[u+1]<d}function h(u,y,d){var m=(y-u+1)/6|0,g=u+m,x=y-m,v=u+y>>1,_=v-m,f=v+m,C=g,w=_,E=v,P=f,L=x,O=u+1,z=y-1,V=0;s(C,w,d)&&(V=C,C=w,w=V),s(P,L,d)&&(V=P,P=L,L=V),s(C,E,d)&&(V=C,C=E,E=V),s(w,E,d)&&(V=w,w=E,E=V),s(C,P,d)&&(V=C,C=P,P=V),s(E,P,d)&&(V=E,E=P,P=V),s(w,L,d)&&(V=w,w=L,L=V),s(w,E,d)&&(V=w,w=E,E=V),s(P,L,d)&&(V=P,P=L,L=V);for(var R=d[2*w],U=d[2*w+1],Z=d[2*P],N=d[2*P+1],G=2*C,W=2*E,ae=2*L,re=2*g,ne=2*v,Q=2*x,$=0;$<2;++$){var oe=d[W+$],fe=d[ae+$];d[re+$]=d[G+$],d[ne+$]=oe,d[Q+$]=fe}r(_,u,d),r(f,y,d);for(var ue=O;ue<=z;++ue)if(c(ue,R,U,d))ue!==O&&i(ue,O,d),++O;else if(!c(ue,Z,N,d))for(;;){if(c(z,Z,N,d)){c(z,R,U,d)?(n(ue,O,z,d),++O,--z):(i(ue,z,d),--z);break}if(--z<ue)break}a(u,O-1,R,U,d),a(y,z+1,Z,N,d),O-2-u<=l?t(u,O-2,d):h(u,O-2,d),y-(z+2)<=l?t(z+2,y,d):h(z+2,y,d),z-O<=l?t(O,z,d):h(O,z,d)}},855:function(p,l,t){"use strict";p.exports={init:function(_){var f=r.nextPow2(_);c.length<f&&(i.free(c),c=i.mallocInt32(f)),h.length<f&&(i.free(h),h=i.mallocInt32(f)),u.length<f&&(i.free(u),u=i.mallocInt32(f)),y.length<f&&(i.free(y),y=i.mallocInt32(f)),d.length<f&&(i.free(d),d=i.mallocInt32(f)),m.length<f&&(i.free(m),m=i.mallocInt32(f));var C=8*f;g.length<C&&(i.free(g),g=i.mallocDouble(C))},sweepBipartite:function(_,f,C,w,E,P,L,O,z,V){for(var R=0,U=2*_,Z=_-1,N=U-1,G=C;G<w;++G){var W=P[G],ae=U*G;g[R++]=E[ae+Z],g[R++]=-(W+1),g[R++]=E[ae+N],g[R++]=W}for(G=L;G<O;++G){W=V[G]+a;var re=U*G;g[R++]=z[re+Z],g[R++]=-W,g[R++]=z[re+N],g[R++]=W}var ne=R>>>1;n(g,ne);var Q=0,$=0;for(G=0;G<ne;++G){var X=0|g[2*G+1];if(X>=a)x(u,y,$--,X=X-a|0);else if(X>=0)x(c,h,Q--,X);else if(X<=-a){X=-X-a|0;for(var oe=0;oe<Q;++oe)if(void 0!==(fe=f(c[oe],X)))return fe;v(u,y,$++,X)}else{for(X=-X-1|0,oe=0;oe<$;++oe){var fe;if(void 0!==(fe=f(X,u[oe])))return fe}v(c,h,Q++,X)}}},sweepComplete:function(_,f,C,w,E,P,L,O,z,V){for(var R=0,U=2*_,Z=_-1,N=U-1,G=C;G<w;++G){var W=P[G]+1<<1,ae=U*G;g[R++]=E[ae+Z],g[R++]=-W,g[R++]=E[ae+N],g[R++]=W}for(G=L;G<O;++G){W=V[G]+1<<1;var re=U*G;g[R++]=z[re+Z],g[R++]=1|-W,g[R++]=z[re+N],g[R++]=1|W}var ne=R>>>1;n(g,ne);var Q=0,$=0,X=0;for(G=0;G<ne;++G){var oe=0|g[2*G+1],fe=1&oe;if(G<ne-1&&oe>>1==g[2*G+3]>>1&&(fe=2,G+=1),oe<0){for(var ue=-(oe>>1)-1,ge=0;ge<X;++ge)if(void 0!==(we=f(d[ge],ue)))return we;if(0!==fe)for(ge=0;ge<Q;++ge)if(void 0!==(we=f(c[ge],ue)))return we;if(1!==fe)for(ge=0;ge<$;++ge){var we;if(void 0!==(we=f(u[ge],ue)))return we}0===fe?v(c,h,Q++,ue):1===fe?v(u,y,$++,ue):2===fe&&v(d,m,X++,ue)}else ue=(oe>>1)-1,0===fe?x(c,h,Q--,ue):1===fe?x(u,y,$--,ue):2===fe&&x(d,m,X--,ue)}},scanBipartite:function(_,f,C,w,E,P,L,O,z,V,R,U){var Z=0,N=2*_,G=f,W=f+_,ae=1,re=1;w?re=a:ae=a;for(var ne=E;ne<P;++ne){var Q=ne+ae,$=N*ne;g[Z++]=L[$+G],g[Z++]=-Q,g[Z++]=L[$+W],g[Z++]=Q}for(ne=z;ne<V;++ne)Q=ne+re,g[Z++]=R[N*ne+G],g[Z++]=-Q;var oe=Z>>>1;n(g,oe);var fe=0;for(ne=0;ne<oe;++ne){var ue=0|g[2*ne+1];if(ue<0){var ge=!1;if((Q=-ue)>=a?(ge=!w,Q-=a):(ge=!!w,Q-=1),ge)v(c,h,fe++,Q);else{var we=U[Q],Te=N*Q,xe=R[Te+f+1],ye=R[Te+f+1+_];e:for(var _e=0;_e<fe;++_e){var Ie=c[_e],De=N*Ie;if(!(ye<L[De+f+1]||L[De+f+1+_]<xe)){for(var be=f+2;be<_;++be)if(R[Te+be+_]<L[De+be]||L[De+be+_]<R[Te+be])continue e;var he,ce=O[Ie];if(void 0!==(he=w?C(we,ce):C(ce,we)))return he}}}}else x(c,h,fe--,ue-ae)}},scanComplete:function(_,f,C,w,E,P,L,O,z,V,R){for(var U=0,Z=2*_,N=f,G=f+_,W=w;W<E;++W){var ae=W+a,re=Z*W;g[U++]=P[re+N],g[U++]=-ae,g[U++]=P[re+G],g[U++]=ae}for(W=O;W<z;++W)ae=W+1,g[U++]=V[Z*W+N],g[U++]=-ae;var Q=U>>>1;n(g,Q);var $=0;for(W=0;W<Q;++W){var X=0|g[2*W+1];if(X<0)if((ae=-X)>=a)c[$++]=ae-a;else{var oe=R[ae-=1],fe=Z*ae,ue=V[fe+f+1],ge=V[fe+f+1+_];e:for(var we=0;we<$;++we){var Te=c[we],xe=L[Te];if(xe===oe)break;var ye=Z*Te;if(!(ge<P[ye+f+1]||P[ye+f+1+_]<ue)){for(var _e=f+2;_e<_;++_e)if(V[fe+_e+_]<P[ye+_e]||P[ye+_e+_]<V[fe+_e])continue e;var Ie=C(xe,oe);if(void 0!==Ie)return Ie}}}else{for(ae=X-a,we=$-1;we>=0;--we)if(c[we]===ae){for(_e=we+1;_e<$;++_e)c[_e-1]=c[_e];break}--$}}}};var i=t(1888),r=t(8828),n=t(1811),a=1<<28,s=1024,c=i.mallocInt32(s),h=i.mallocInt32(s),u=i.mallocInt32(s),y=i.mallocInt32(s),d=i.mallocInt32(s),m=i.mallocInt32(s),g=i.mallocDouble(8192);function x(_,f,C,w){var E=f[w],P=_[C-1];_[E]=P,f[P]=E}function v(_,f,C,w){_[C]=w,f[w]=C}},2538:function(p,l,t){"use strict";var i=t(8902),r=t(5542),n=t(2272),a=t(5023);function s(u){return[Math.min(u[0],u[1]),Math.max(u[0],u[1])]}function c(u,y){return u[0]-y[0]||u[1]-y[1]}function h(u,y,d){return y in u?u[y]:d}p.exports=function(u,y,d){Array.isArray(y)?(d=d||{},y=y||[]):(d=y||{},y=[]);var m=!!h(d,"delaunay",!0),g=!!h(d,"interior",!0),x=!!h(d,"exterior",!0),v=!!h(d,"infinity",!1);if(!g&&!x||0===u.length)return[];var _=i(u,y);if(m||g!==x||v){for(var f=r(u.length,y.map(s).sort(c)),C=0;C<_.length;++C){var w=_[C];f.addTriangle(w[0],w[1],w[2])}return m&&n(u,f),x?g?v?a(f,0,v):f.cells():a(f,1,v):a(f,-1)}return _}},2272:function(p,l,t){"use strict";var i=t(2646)[4];function r(n,a,s,c,h,u){var y=a.opposite(c,h);if(!(y<0)){if(h<c){var d=c;c=h,h=d,d=u,u=y,y=d}a.isConstraint(c,h)||i(n[c],n[h],n[u],n[y])<0&&s.push(c,h)}}t(2478),p.exports=function(n,a){for(var s=[],c=n.length,h=a.stars,u=0;u<c;++u)for(var y=h[u],d=1;d<y.length;d+=2)if(!((v=y[d])<u||a.isConstraint(u,v))){for(var m=y[d-1],g=-1,x=1;x<y.length;x+=2)if(y[x-1]===v){g=y[x];break}g<0||i(n[u],n[v],n[m],n[g])<0&&s.push(u,v)}for(;s.length>0;){for(var v=s.pop(),_=(m=-1,g=-1,y=h[u=s.pop()],1);_<y.length;_+=2){var f=y[_-1],C=y[_];f===v?g=C:C===v&&(m=f)}m<0||g<0||i(n[u],n[v],n[m],n[g])>=0||(a.flip(u,v),r(n,a,s,m,u,g),r(n,a,s,u,g,m),r(n,a,s,g,v,m),r(n,a,s,v,m,g))}}},5023:function(p,l,t){"use strict";var i,r=t(2478);function n(s,c,h,u,y,d,m){this.cells=s,this.neighbor=c,this.flags=u,this.constraint=h,this.active=y,this.next=d,this.boundary=m}function a(s,c){return s[0]-c[0]||s[1]-c[1]||s[2]-c[2]}p.exports=function(s,c,h){var u=function(L,O){for(var z=L.cells(),V=z.length,R=0;R<V;++R){var U=(X=z[R])[0],Z=X[1],N=X[2];Z<N?Z<U&&(X[0]=Z,X[1]=N,X[2]=U):N<U&&(X[0]=N,X[1]=U,X[2]=Z)}z.sort(a);var G=new Array(V);for(R=0;R<G.length;++R)G[R]=0;var W=[],ae=[],re=new Array(3*V),ne=new Array(3*V),Q=null;O&&(Q=[]);var $=new n(z,re,ne,G,W,ae,Q);for(R=0;R<V;++R)for(var X=z[R],oe=0;oe<3;++oe){var fe=re[3*R+oe]=$.locate(Z=X[(oe+1)%3],U=X[oe],L.opposite(Z,U)),ue=ne[3*R+oe]=L.isConstraint(U,Z);fe<0&&(ue?ae.push(R):(W.push(R),G[R]=1),O&&Q.push([Z,U,-1]))}return $}(s,h);if(0===c)return h?u.cells.concat(u.boundary):u.cells;for(var y=1,d=u.active,m=u.next,g=u.flags,x=u.cells,v=u.constraint,_=u.neighbor;d.length>0||m.length>0;){for(;d.length>0;){var f=d.pop();if(g[f]!==-y){g[f]=y;for(var C=0;C<3;++C){var w=_[3*f+C];w>=0&&0===g[w]&&(v[3*f+C]?m.push(w):(d.push(w),g[w]=y))}}}var E=m;m=d,d=E,m.length=0,y=-y}var P=function(L,O,z){for(var V=0,R=0;R<L.length;++R)O[R]===z&&(L[V++]=L[R]);return L.length=V,L}(x,g,c);return h?P.concat(u.boundary):P},n.prototype.locate=(i=[0,0,0],function(s,c,h){var u=s,y=c,d=h;return c<h?c<s&&(u=c,y=h,d=s):h<s&&(u=h,y=s,d=c),u<0?-1:(i[0]=u,i[1]=y,i[2]=d,r.eq(this.cells,i,a))})},8902:function(p,l,t){"use strict";var i=t(2478),r=t(3250)[3];function n(m,g,x,v,_){this.a=m,this.b=g,this.idx=x,this.lowerIds=v,this.upperIds=_}function a(m,g,x,v){this.a=m,this.b=g,this.type=x,this.idx=v}function s(m,g){var x=m.a[0]-g.a[0]||m.a[1]-g.a[1]||m.type-g.type;return x||(0!==m.type&&(x=r(m.a,m.b,g.b))?x:m.idx-g.idx)}function c(m,g){return r(m.a,m.b,g)}function h(m,g,x,v,_){for(var f=i.lt(g,v,c),C=i.gt(g,v,c),w=f;w<C;++w){for(var E=g[w],P=E.lowerIds,L=P.length;L>1&&r(x[P[L-2]],x[P[L-1]],v)>0;)m.push([P[L-1],P[L-2],_]),L-=1;P.length=L,P.push(_);var O=E.upperIds;for(L=O.length;L>1&&r(x[O[L-2]],x[O[L-1]],v)<0;)m.push([O[L-2],O[L-1],_]),L-=1;O.length=L,O.push(_)}}function u(m,g){var x;return(x=m.a[0]<g.a[0]?r(m.a,m.b,g.a):r(g.b,g.a,m.a))?x:(x=g.b[0]<m.b[0]?r(m.a,m.b,g.b):r(g.b,g.a,m.b))||m.idx-g.idx}function y(m,g,x){var v=i.le(m,x,u),_=m[v],f=_.upperIds,C=f[f.length-1];_.upperIds=[C],m.splice(v+1,0,new n(x.a,x.b,x.idx,[C],f))}function d(m,g,x){var v=x.a;x.a=x.b,x.b=v;var _=i.eq(m,x,u);m[_-1].upperIds=m[_].upperIds,m.splice(_,1)}p.exports=function(m,g){for(var x=m.length,v=g.length,_=[],f=0;f<x;++f)_.push(new a(m[f],null,0,f));for(f=0;f<v;++f){var C=g[f],w=m[C[0]],E=m[C[1]];w[0]<E[0]?_.push(new a(w,E,2,f),new a(E,w,1,f)):w[0]>E[0]&&_.push(new a(E,w,2,f),new a(w,E,1,f))}_.sort(s);for(var P=_[0].a[0]-(1+Math.abs(_[0].a[0]))*Math.pow(2,-52),L=[new n([P,1],[P,0],-1,[],[],[],[])],O=[],z=(f=0,_.length);f<z;++f){var V=_[f],R=V.type;0===R?h(O,L,m,V.a,V.idx):2===R?y(L,0,V):d(L,0,V)}return O}},5542:function(p,l,t){"use strict";var i=t(2478);function r(s,c){this.stars=s,this.edges=c}p.exports=function(s,c){for(var h=new Array(s),u=0;u<s;++u)h[u]=[];return new r(h,c)};var n=r.prototype;function a(s,c,h){for(var u=1,y=s.length;u<y;u+=2)if(s[u-1]===c&&s[u]===h)return s[u-1]=s[y-2],s[u]=s[y-1],void(s.length=y-2)}n.isConstraint=function(){var s=[0,0];function c(h,u){return h[0]-u[0]||h[1]-u[1]}return function(h,u){return s[0]=Math.min(h,u),s[1]=Math.max(h,u),i.eq(this.edges,s,c)>=0}}(),n.removeTriangle=function(s,c,h){var u=this.stars;a(u[s],c,h),a(u[c],h,s),a(u[h],s,c)},n.addTriangle=function(s,c,h){var u=this.stars;u[s].push(c,h),u[c].push(h,s),u[h].push(s,c)},n.opposite=function(s,c){for(var h=this.stars[c],u=1,y=h.length;u<y;u+=2)if(h[u]===s)return h[u-1];return-1},n.flip=function(s,c){var h=this.opposite(s,c),u=this.opposite(c,s);this.removeTriangle(s,c,h),this.removeTriangle(c,s,u),this.addTriangle(s,u,h),this.addTriangle(c,h,u)},n.edges=function(){for(var s=this.stars,c=[],h=0,u=s.length;h<u;++h)for(var y=s[h],d=0,m=y.length;d<m;d+=2)c.push([y[d],y[d+1]]);return c},n.cells=function(){for(var s=this.stars,c=[],h=0,u=s.length;h<u;++h)for(var y=s[h],d=0,m=y.length;d<m;d+=2){var g=y[d],x=y[d+1];h<Math.min(g,x)&&c.push([h,g,x])}return c}},2419:function(p){"use strict";p.exports=function(l){for(var t=1,i=1;i<l.length;++i)for(var r=0;r<i;++r)if(l[i]<l[r])t=-t;else if(l[r]===l[i])return 0;return t}},3628:function(p,l,t){"use strict";var i=t(1338),r=t(727);function n(c,h){for(var u=0,y=c.length,d=0;d<y;++d)u+=c[d]*h[d];return u}function a(c){var h=c.length;if(0===h)return[];var u=i([c.length+1,c.length+1],1),y=i([c.length+1],1);u[h][h]=0;for(var d=0;d<h;++d){for(var m=0;m<=d;++m)u[m][d]=u[d][m]=2*n(c[d],c[m]);y[d]=n(c[d],c[d])}var g=r(u,y),x=0,v=g[h+1];for(d=0;d<v.length;++d)x+=v[d];var _=new Array(h);for(d=0;d<h;++d){v=g[d];var f=0;for(m=0;m<v.length;++m)f+=v[m];_[d]=f/x}return _}function s(c){if(0===c.length)return[];for(var h=c[0].length,u=i([h]),y=a(c),d=0;d<c.length;++d)for(var m=0;m<h;++m)u[m]+=c[d][m]*y[d];return u}s.barycenetric=a,p.exports=s},6037:function(p,l,t){p.exports=function(r){for(var n=i(r),a=0,s=0;s<r.length;++s)for(var c=r[s],h=0;h<n.length;++h)a+=Math.pow(c[h]-n[h],2);return Math.sqrt(a/r.length)};var i=t(3628)},332:function(p,l,t){"use strict";p.exports=function(C,w,E){var P,R,Z,N;if(E){P=w;for(var L=new Array(w.length),O=0;O<w.length;++O){var z=w[O];L[O]=[z[0],z[1],E[O]]}w=L}for(var V=(Z=!!E,void 0,_(w,N=g(R=C,[],m(R)),Z),!!N);f(C,w,!!E);)V=!0;if(E&&V)for(P.length=0,E.length=0,O=0;O<w.length;++O)P.push([(z=w[O])[0],z[1]]),E.push(z[2]);return V};var i=t(1755),r=t(6867),n=t(1125),a=t(7842),s=t(1318),c=t(946),h=t(5838),u=t(1278),y=t(3637);function d(C){var w=c(C);return[u(w,-1/0),u(w,1/0)]}function m(C){for(var w=new Array(C.length),E=0;E<C.length;++E){var P=C[E];w[E]=[u(P[0],-1/0),u(P[1],-1/0),u(P[0],1/0),u(P[1],1/0)]}return w}function g(C,w,E){for(var P=w.length,L=new i(P),O=[],z=0;z<w.length;++z){var V=w[z],R=d(V[0]),U=d(V[1]);O.push([u(R[0],-1/0),u(U[0],-1/0),u(R[1],1/0),u(U[1],1/0)])}r(O,function(ae,re){L.link(ae,re)});var Z=!0,N=new Array(P);for(z=0;z<P;++z)(W=L.find(z))!==z&&(Z=!1,C[W]=[Math.min(C[z][0],C[W][0]),Math.min(C[z][1],C[W][1])]);if(Z)return null;var G=0;for(z=0;z<P;++z){var W;(W=L.find(z))===z?(N[z]=G,C[G++]=C[z]):N[z]=-1}for(C.length=G,z=0;z<P;++z)N[z]<0&&(N[z]=N[L.find(z)]);return N}function x(C,w){return C[0]-w[0]||C[1]-w[1]}function v(C,w){return C[0]-w[0]||C[1]-w[1]||(C[2]<w[2]?-1:C[2]>w[2]?1:0)}function _(C,w,E){if(0!==C.length){if(w)for(var P=0;P<C.length;++P){var L=w[(z=C[P])[0]],O=w[z[1]];z[0]=Math.min(L,O),z[1]=Math.max(L,O)}else for(P=0;P<C.length;++P){var z;L=(z=C[P])[0],O=z[1],z[0]=Math.min(L,O),z[1]=Math.max(L,O)}C.sort(E?v:x);var V=1;for(P=1;P<C.length;++P){var R=C[P-1],U=C[P];(U[0]!==R[0]||U[1]!==R[1]||E&&U[2]!==R[2])&&(C[V++]=U)}C.length=V}}function f(C,w,E){var R,U,N,P=function(R,U){for(var Z=new Array(U.length),N=0;N<U.length;++N){var G=U[N],W=R[G[0]],ae=R[G[1]];Z[N]=[u(Math.min(W[0],ae[0]),-1/0),u(Math.min(W[1],ae[1]),-1/0),u(Math.max(W[0],ae[0]),1/0),u(Math.max(W[1],ae[1]),1/0)]}return Z}(C,w),L=(R=C,U=w,N=[],r(P,function(G,W){var ae=U[G],re=U[W];ae[0]!==re[0]&&ae[0]!==re[1]&&ae[1]!==re[0]&&ae[1]!==re[1]&&n(R[ae[0]],R[ae[1]],R[re[0]],R[re[1]])&&N.push([G,W])}),N),O=function(R,U,Z,N){var G=[];return r(Z,N,function(W,ae){var re=U[W];if(re[0]!==ae&&re[1]!==ae){var ne=R[ae];n(R[re[0]],R[re[1]],ne,ne)&&G.push([W,ae])}}),G}(C,w,P,m(C)),z=function(R,U,Z,N,G){var W,ae,re=R.map(function(he){return[a(he[0]),a(he[1])]});for(W=0;W<Z.length;++W){var ne=Z[W],Q=ne[1],$=U[ae=ne[0]],X=U[Q],oe=y(h(R[$[0]]),h(R[$[1]]),h(R[X[0]]),h(R[X[1]]));if(oe){var fe=R.length;R.push([c(oe[0]),c(oe[1])]),re.push(oe),N.push([ae,fe],[Q,fe])}}for(N.sort(function(he,ce){if(he[0]!==ce[0])return he[0]-ce[0];var me=re[he[1]],Pe=re[ce[1]];return s(me[0],Pe[0])||s(me[1],Pe[1])}),W=N.length-1;W>=0;--W){var ue=U[ae=(De=N[W])[0]],ge=ue[0],we=ue[1],Te=R[ge],xe=R[we];if((Te[0]-xe[0]||Te[1]-xe[1])<0){var ye=ge;ge=we,we=ye}ue[0]=ge;var _e,Ie=ue[1]=De[1];for(G&&(_e=ue[2]);W>0&&N[W-1][0]===ae;){var De,be=(De=N[--W])[1];U.push(G?[Ie,be,_e]:[Ie,be]),Ie=be}U.push(G?[Ie,we,_e]:[Ie,we])}return re}(C,w,L,O,E),V=g(C,z);return _(w,V,E),!!V||L.length>0||O.length>0}},3637:function(p,l,t){"use strict";p.exports=function(y,d,m,g){var x=s(d,y),v=s(g,m),_=u(x,v);if(0===a(_))return null;var f=u(v,s(y,m)),C=r(f,_),w=h(x,C);return c(y,w)};var i=t(6504),r=t(8697),n=t(5572),a=t(7721),s=t(544),c=t(2653),h=t(8987);function u(y,d){return n(i(y[0],d[1]),i(y[1],d[0]))}},3642:function(p){p.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},6729:function(p,l,t){"use strict";var i=t(3642),r=t(395);function n(c){return[c[0]/255,c[1]/255,c[2]/255,c[3]]}function a(c){for(var h,u="#",y=0;y<3;++y)u+=("00"+(h=(h=c[y]).toString(16))).substr(h.length);return u}function s(c){return"rgba("+c.join(",")+")"}p.exports=function(c){var h,u,y,d,m,g,x,v,_,f;if(c||(c={}),v=(c.nshades||72)-1,x=c.format||"hex",(g=c.colormap)||(g="jet"),"string"==typeof g){if(g=g.toLowerCase(),!i[g])throw Error(g+" not a supported colorscale");m=i[g]}else{if(!Array.isArray(g))throw Error("unsupported colormap option",g);m=g.slice()}if(m.length>v+1)throw new Error(g+" map requires nshades to be at least size "+m.length);_=Array.isArray(c.alpha)?2!==c.alpha.length?[1,1]:c.alpha.slice():"number"==typeof c.alpha?[c.alpha,c.alpha]:[1,1],h=m.map(function(L){return Math.round(L.index*v)}),_[0]=Math.min(Math.max(_[0],0),1),_[1]=Math.min(Math.max(_[1],0),1);var C=m.map(function(L,O){var z=m[O].index,V=m[O].rgb.slice();return 4===V.length&&V[3]>=0&&V[3]<=1||(V[3]=_[0]+(_[1]-_[0])*z),V}),w=[];for(f=0;f<h.length-1;++f){d=h[f+1]-h[f],u=C[f],y=C[f+1];for(var E=0;E<d;E++){var P=E/d;w.push([Math.round(r(u[0],y[0],P)),Math.round(r(u[1],y[1],P)),Math.round(r(u[2],y[2],P)),r(u[3],y[3],P)])}}return w.push(m[m.length-1].rgb.concat(_[1])),"hex"===x?w=w.map(a):"rgbaString"===x?w=w.map(s):"float"===x&&(w=w.map(n)),w}},3140:function(p,l,t){"use strict";p.exports=function(h,u,y,d){var m=i(u,y,d);if(0===m){var g=r(i(h,u,y)),x=r(i(h,u,d));if(g===x){if(0===g){var v=c(h,u,y);return v===c(h,u,d)?0:v?1:-1}return 0}return 0===x?g>0||c(h,u,d)?-1:1:0===g?x>0||c(h,u,y)?1:-1:r(x-g)}var _=i(h,u,y);return _>0?m>0&&i(h,u,d)>0?1:-1:_<0?m>0||i(h,u,d)>0?1:-1:i(h,u,d)>0||c(h,u,y)?1:-1};var i=t(3250),r=t(8572),n=t(9362),a=t(5382),s=t(8210);function c(h,u,y){var d=n(h[0],-u[0]),m=n(h[1],-u[1]),g=n(y[0],-u[0]),x=n(y[1],-u[1]),v=s(a(d,g),a(m,x));return v[v.length-1]>=0}},8572:function(p){"use strict";p.exports=function(l){return l<0?-1:l>0?1:0}},8507:function(p){p.exports=function(i,r){var n=i.length,a=i.length-r.length;if(a)return a;switch(n){case 0:return 0;case 1:return i[0]-r[0];case 2:return i[0]+i[1]-r[0]-r[1]||l(i[0],i[1])-l(r[0],r[1]);case 3:var s=i[0]+i[1],c=r[0]+r[1];if(a=s+i[2]-(c+r[2]))return a;var h=l(i[0],i[1]),u=l(r[0],r[1]);return l(h,i[2])-l(u,r[2])||l(h+i[2],s)-l(u+r[2],c);case 4:var y=i[0],d=i[1],m=i[2],g=i[3],x=r[0],v=r[1],_=r[2],f=r[3];return y+d+m+g-(x+v+_+f)||l(y,d,m,g)-l(x,v,_,f,x)||l(y+d,y+m,y+g,d+m,d+g,m+g)-l(x+v,x+_,x+f,v+_,v+f,_+f)||l(y+d+m,y+d+g,y+m+g,d+m+g)-l(x+v+_,x+v+f,x+_+f,v+_+f);default:for(var C=i.slice().sort(t),w=r.slice().sort(t),E=0;E<n;++E)if(a=C[E]-w[E])return a;return 0}};var l=Math.min;function t(i,r){return i-r}},3788:function(p,l,t){"use strict";var i=t(8507),r=t(2419);p.exports=function(n,a){return i(n,a)||r(n)-r(a)}},7352:function(p,l,t){"use strict";var i=t(5721),r=t(4750),n=t(2690);p.exports=function(a){var s=a.length;if(0===s)return[];if(1===s)return[[0]];var c=a[0].length;return 0===c?[]:1===c?i(a):2===c?r(a):n(a,c)}},5721:function(p){"use strict";p.exports=function(l){for(var t=0,i=0,r=1;r<l.length;++r)l[r][0]<l[t][0]&&(t=r),l[r][0]>l[i][0]&&(i=r);return t<i?[[t],[i]]:t>i?[[i],[t]]:[[t]]}},4750:function(p,l,t){"use strict";p.exports=function(r){var n=i(r),a=n.length;if(a<=2)return[];for(var s=new Array(a),c=n[a-1],h=0;h<a;++h){var u=n[h];s[h]=[c,u],c=u}return s};var i=t(3090)},2690:function(p,l,t){"use strict";p.exports=function(n,a){try{return i(n,!0)}catch{var s=r(n);if(s.length<=a)return[];var c=function(u,y){for(var d=u.length,m=new Array(d),g=0;g<y.length;++g)m[g]=u[y[g]];var x=y.length;for(g=0;g<d;++g)y.indexOf(g)<0&&(m[x++]=u[g]);return m}(n,s);return function(u,y){for(var d=u.length,m=y.length,g=0;g<d;++g)for(var x=u[g],v=0;v<x.length;++v){var _=x[v];if(_<m)x[v]=y[_];else{_-=m;for(var f=0;f<m;++f)_>=y[f]&&(_+=1);x[v]=_}}return u}(i(c,!0),s)}};var i=t(8954),r=t(3952)},4769:function(p){"use strict";p.exports=function(l,t,i,r,n,a){var s=n-1,c=n*n,h=s*s,u=(1+2*n)*h,y=n*h,d=c*(3-2*n),m=c*s;if(l.length){a||(a=new Array(l.length));for(var g=l.length-1;g>=0;--g)a[g]=u*l[g]+y*t[g]+d*i[g]+m*r[g];return a}return u*l+y*t+d*i+m*r},p.exports.derivative=function(l,t,i,r,n,a){var s=6*n*n-6*n,c=3*n*n-4*n+1,h=-6*n*n+6*n,u=3*n*n-2*n;if(l.length){a||(a=new Array(l.length));for(var y=l.length-1;y>=0;--y)a[y]=s*l[y]+c*t[y]+h*i[y]+u*r[y];return a}return s*l+c*t+h*i[y]+u*r}},7642:function(p,l,t){"use strict";var i=t(8954),r=t(1682);function n(s,c){this.point=s,this.index=c}function a(s,c){for(var h=s.point,u=c.point,y=h.length,d=0;d<y;++d){var m=u[d]-h[d];if(m)return m}return 0}p.exports=function(s,c){var h=s.length;if(0===h)return[];var u=s[0].length;if(u<1)return[];if(1===u)return function(z,V,R){if(1===z)return R?[[-1,0]]:[];var U=V.map(function(ae,re){return[ae[0],re]});U.sort(function(ae,re){return ae[0]-re[0]});for(var Z=new Array(z-1),N=1;N<z;++N)Z[N-1]=[U[N-1][1],U[N][1]];return R&&Z.push([-1,Z[0][1]],[Z[z-1][1],-1]),Z}(h,s,c);for(var y=new Array(h),d=1,m=0;m<h;++m){for(var g=s[m],x=new Array(u+1),v=0,_=0;_<u;++_){var f=g[_];x[_]=f,v+=f*f}x[u]=v,y[m]=new n(x,m),d=Math.max(v,d)}r(y,a),h=y.length;var C=new Array(h+u+1),w=new Array(h+u+1),E=(u+1)*(u+1)*d,P=new Array(u+1);for(m=0;m<=u;++m)P[m]=0;for(P[u]=E,C[0]=P.slice(),w[0]=-1,m=0;m<=u;++m)(x=P.slice())[m]=1,C[m+1]=x,w[m+1]=-1;for(m=0;m<h;++m){var L=y[m];C[m+u+1]=L.point,w[m+u+1]=L.index}var O=i(C,!1);if(O=O.filter(c?function(z){for(var V=0,R=0;R<=u;++R){var U=w[z[R]];if(U<0&&++V>=2)return!1;z[R]=U}return!0}:function(z){for(var V=0;V<=u;++V){var R=w[z[V]];if(R<0)return!1;z[V]=R}return!0}),1&u)for(m=0;m<O.length;++m)x=(L=O[m])[0],L[0]=L[1],L[1]=x;return O}},2361:function(p){var l=!1;if(typeof Float64Array<"u"){var t=new Float64Array(1),i=new Uint32Array(t.buffer);t[0]=1,l=!0,1072693248===i[1]?(p.exports=function(n){return t[0]=n,[i[0],i[1]]},p.exports.pack=function(n,a){return i[0]=n,i[1]=a,t[0]},p.exports.lo=function(n){return t[0]=n,i[0]},p.exports.hi=function(n){return t[0]=n,i[1]}):1072693248===i[0]?(p.exports=function(n){return t[0]=n,[i[1],i[0]]},p.exports.pack=function(n,a){return i[1]=n,i[0]=a,t[0]},p.exports.lo=function(n){return t[0]=n,i[1]},p.exports.hi=function(n){return t[0]=n,i[0]}):l=!1}if(!l){var r=new Buffer(8);p.exports=function(n){return r.writeDoubleLE(n,0,!0),[r.readUInt32LE(0,!0),r.readUInt32LE(4,!0)]},p.exports.pack=function(n,a){return r.writeUInt32LE(n,0,!0),r.writeUInt32LE(a,4,!0),r.readDoubleLE(0,!0)},p.exports.lo=function(n){return r.writeDoubleLE(n,0,!0),r.readUInt32LE(0,!0)},p.exports.hi=function(n){return r.writeDoubleLE(n,0,!0),r.readUInt32LE(4,!0)}}p.exports.sign=function(n){return p.exports.hi(n)>>>31},p.exports.exponent=function(n){return(p.exports.hi(n)<<1>>>21)-1023},p.exports.fraction=function(n){var a=p.exports.lo(n),s=p.exports.hi(n),c=1048575&s;return 2146435072&s&&(c+=1048576),[a,c]},p.exports.denormalized=function(n){return!(2146435072&p.exports.hi(n))}},1338:function(p){"use strict";function l(t,i,r){var n=0|t[r];if(n<=0)return[];var a,s=new Array(n);if(r===t.length-1)for(a=0;a<n;++a)s[a]=i;else for(a=0;a<n;++a)s[a]=l(t,i,r+1);return s}p.exports=function(t,i){switch(void 0===i&&(i=0),typeof t){case"number":if(t>0)return function(r,n){var a,s;for(a=new Array(r),s=0;s<r;++s)a[s]=n;return a}(0|t,i);break;case"object":if("number"==typeof t.length)return l(t,i,0)}return[]}},3134:function(p,l,t){"use strict";p.exports=function(r,n){var a=r.length;if("number"!=typeof n){n=0;for(var s=0;s<a;++s){var c=r[s];n=Math.max(n,c[0],c[1])}n=1+(0|n)}n|=0;var h=new Array(n);for(s=0;s<n;++s)h[s]=[];for(s=0;s<a;++s)h[(c=r[s])[0]].push(c[1]),h[c[1]].push(c[0]);for(var u=0;u<n;++u)i(h[u],function(y,d){return y-d});return h};var i=t(1682)},5033:function(p){"use strict";p.exports=function(l,t,i){var r=t||0,n=i||1;return[[l[12]+l[0],l[13]+l[1],l[14]+l[2],l[15]+l[3]],[l[12]-l[0],l[13]-l[1],l[14]-l[2],l[15]-l[3]],[l[12]+l[4],l[13]+l[5],l[14]+l[6],l[15]+l[7]],[l[12]-l[4],l[13]-l[5],l[14]-l[6],l[15]-l[7]],[r*l[12]+l[8],r*l[13]+l[9],r*l[14]+l[10],r*l[15]+l[11]],[n*l[12]-l[8],n*l[13]-l[9],n*l[14]-l[10],n*l[15]-l[11]]]}},9215:function(p,l,t){"use strict";p.exports=function(h,u,y){switch(arguments.length){case 0:return new a([0],[0],0);case 1:return"number"==typeof h?new a(d=c(h),d,0):new a(h,c(h.length),0);case 2:var d;if("number"==typeof u)return new a(h,d=c(h.length),+u);y=0;case 3:if(h.length!==u.length)throw new Error("state and velocity lengths must match");return new a(h,u,y)}};var i=t(4769),r=t(2478);function n(h,u,y){return Math.min(u,Math.max(h,y))}function a(h,u,y){this.dimension=h.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var d=0;d<this.dimension;++d)this.bounds[0][d]=-1/0,this.bounds[1][d]=1/0;this._state=h.slice().reverse(),this._velocity=u.slice().reverse(),this._time=[y],this._scratch=[h.slice(),h.slice(),h.slice(),h.slice(),h.slice()]}var s=a.prototype;function c(h){for(var u=new Array(h),y=0;y<h;++y)u[y]=0;return u}s.flush=function(h){var u=r.gt(this._time,h)-1;u<=0||(this._time.splice(0,u),this._state.splice(0,u*this.dimension),this._velocity.splice(0,u*this.dimension))},s.curve=function(h){var u=this._time,y=u.length,d=r.le(u,h),m=this._scratch[0],g=this._state,x=this._velocity,v=this.dimension,_=this.bounds;if(d<0)for(var f=v-1,C=0;C<v;++C,--f)m[C]=g[f];else if(d>=y-1){f=g.length-1;var w=h-u[y-1];for(C=0;C<v;++C,--f)m[C]=g[f]+w*x[f]}else{f=v*(d+1)-1;var E=u[d],P=u[d+1]-E||1,L=this._scratch[1],O=this._scratch[2],z=this._scratch[3],V=this._scratch[4],R=!0;for(C=0;C<v;++C,--f)L[C]=g[f],z[C]=x[f]*P,O[C]=g[f+v],V[C]=x[f+v]*P,R=R&&L[C]===O[C]&&z[C]===V[C]&&0===z[C];if(R)for(C=0;C<v;++C)m[C]=L[C];else i(L,z,O,V,(h-E)/P,m)}var U=_[0],Z=_[1];for(C=0;C<v;++C)m[C]=n(U[C],Z[C],m[C]);return m},s.dcurve=function(h){var u=this._time,y=u.length,d=r.le(u,h),m=this._scratch[0],g=this._state,x=this._velocity,v=this.dimension;if(d>=y-1)for(var _=g.length-1,f=0;f<v;++f,--_)m[f]=x[_];else{_=v*(d+1)-1;var C=u[d],w=u[d+1]-C||1,E=this._scratch[1],P=this._scratch[2],L=this._scratch[3],O=this._scratch[4],z=!0;for(f=0;f<v;++f,--_)E[f]=g[_],L[f]=x[_]*w,P[f]=g[_+v],O[f]=x[_+v]*w,z=z&&E[f]===P[f]&&L[f]===O[f]&&0===L[f];if(z)for(f=0;f<v;++f)m[f]=0;else for(i.derivative(E,L,P,O,(h-C)/w,m),f=0;f<v;++f)m[f]/=w}return m},s.lastT=function(){var h=this._time;return h[h.length-1]},s.stable=function(){for(var h=this._velocity,u=h.length,y=this.dimension-1;y>=0;--y)if(h[--u])return!1;return!0},s.jump=function(h){var u=this.lastT(),y=this.dimension;if(!(h<u||arguments.length!==y+1)){var d=this._state,m=this._velocity,g=d.length-this.dimension,x=this.bounds,v=x[0],_=x[1];this._time.push(u,h);for(var f=0;f<2;++f)for(var C=0;C<y;++C)d.push(d[g++]),m.push(0);for(this._time.push(h),C=y;C>0;--C)d.push(n(v[C-1],_[C-1],arguments[C])),m.push(0)}},s.push=function(h){var u=this.lastT(),y=this.dimension;if(!(h<u||arguments.length!==y+1)){var d=this._state,m=this._velocity,g=d.length-this.dimension,x=h-u,v=this.bounds,_=v[0],f=v[1],C=x>1e-6?1/x:0;this._time.push(h);for(var w=y;w>0;--w){var E=n(_[w-1],f[w-1],arguments[w]);d.push(E),m.push((E-d[g++])*C)}}},s.set=function(h){var u=this.dimension;if(!(h<this.lastT()||arguments.length!==u+1)){var y=this._state,d=this._velocity,m=this.bounds,g=m[0],x=m[1];this._time.push(h);for(var v=u;v>0;--v)y.push(n(g[v-1],x[v-1],arguments[v])),d.push(0)}},s.move=function(h){var u=this.lastT(),y=this.dimension;if(!(h<=u||arguments.length!==y+1)){var d=this._state,m=this._velocity,g=d.length-this.dimension,x=this.bounds,v=x[0],_=x[1],f=h-u,C=f>1e-6?1/f:0;this._time.push(h);for(var w=y;w>0;--w){var E=arguments[w];d.push(n(v[w-1],_[w-1],d[g++]+E)),m.push(E*C)}}},s.idle=function(h){var u=this.lastT();if(!(h<u)){var y=this.dimension,d=this._state,m=this._velocity,g=d.length-y,x=this.bounds,v=x[0],_=x[1],f=h-u;this._time.push(h);for(var C=y-1;C>=0;--C)d.push(n(v[C],_[C],d[g]+f*m[g])),m.push(0),g+=1}}},3840:function(p){"use strict";function l(g,x,v,_,f,C){this._color=g,this.key=x,this.value=v,this.left=_,this.right=f,this._count=C}function t(g){return new l(g._color,g.key,g.value,g.left,g.right,g._count)}function i(g,x){return new l(g,x.key,x.value,x.left,x.right,x._count)}function r(g){g._count=1+(g.left?g.left._count:0)+(g.right?g.right._count:0)}function n(g,x){this._compare=g,this.root=x}p.exports=function(g){return new n(g||m,null)};var a=n.prototype;function s(g,x){var v;return x.left&&(v=s(g,x.left))?v:(v=g(x.key,x.value))||(x.right?s(g,x.right):void 0)}function c(g,x,v,_){var f;return x(g,_.key)<=0&&(_.left&&(f=c(g,x,v,_.left))||(f=v(_.key,_.value)))?f:_.right?c(g,x,v,_.right):void 0}function h(g,x,v,_,f){var C,w=v(g,f.key),E=v(x,f.key);return w<=0&&(f.left&&(C=h(g,x,v,_,f.left))||E>0&&(C=_(f.key,f.value)))?C:E>0&&f.right?h(g,x,v,_,f.right):void 0}function u(g,x){this.tree=g,this._stack=x}Object.defineProperty(a,"keys",{get:function(){var g=[];return this.forEach(function(x,v){g.push(x)}),g}}),Object.defineProperty(a,"values",{get:function(){var g=[];return this.forEach(function(x,v){g.push(v)}),g}}),Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}}),a.insert=function(g,x){for(var v=this._compare,_=this.root,f=[],C=[];_;){var w=v(g,_.key);f.push(_),C.push(w),_=w<=0?_.left:_.right}f.push(new l(0,g,x,null,null,1));for(var E=f.length-2;E>=0;--E)_=f[E],f[E]=C[E]<=0?new l(_._color,_.key,_.value,f[E+1],_.right,_._count+1):new l(_._color,_.key,_.value,_.left,f[E+1],_._count+1);for(E=f.length-1;E>1;--E){var P=f[E-1];if(_=f[E],1===P._color||1===_._color)break;var L=f[E-2];if(L.left===P)if(P.left===_){if(!(O=L.right)||0!==O._color){L._color=0,L.left=P.right,P._color=1,P.right=L,f[E-2]=P,f[E-1]=_,r(L),r(P),E>=3&&((z=f[E-3]).left===L?z.left=P:z.right=P);break}P._color=1,L.right=i(1,O),L._color=0,E-=1}else{if(!(O=L.right)||0!==O._color){P.right=_.left,L._color=0,L.left=_.right,_._color=1,_.left=P,_.right=L,f[E-2]=_,f[E-1]=P,r(L),r(P),r(_),E>=3&&((z=f[E-3]).left===L?z.left=_:z.right=_);break}P._color=1,L.right=i(1,O),L._color=0,E-=1}else if(P.right===_){if(!(O=L.left)||0!==O._color){L._color=0,L.right=P.left,P._color=1,P.left=L,f[E-2]=P,f[E-1]=_,r(L),r(P),E>=3&&((z=f[E-3]).right===L?z.right=P:z.left=P);break}P._color=1,L.left=i(1,O),L._color=0,E-=1}else{var O;if(!(O=L.left)||0!==O._color){var z;P.left=_.right,L._color=0,L.right=_.left,_._color=1,_.right=P,_.left=L,f[E-2]=_,f[E-1]=P,r(L),r(P),r(_),E>=3&&((z=f[E-3]).right===L?z.right=_:z.left=_);break}P._color=1,L.left=i(1,O),L._color=0,E-=1}}return f[0]._color=1,new n(v,f[0])},a.forEach=function(g,x,v){if(this.root)switch(arguments.length){case 1:return s(g,this.root);case 2:return c(x,this._compare,g,this.root);case 3:return this._compare(x,v)>=0?void 0:h(x,v,this._compare,g,this.root)}},Object.defineProperty(a,"begin",{get:function(){for(var g=[],x=this.root;x;)g.push(x),x=x.left;return new u(this,g)}}),Object.defineProperty(a,"end",{get:function(){for(var g=[],x=this.root;x;)g.push(x),x=x.right;return new u(this,g)}}),a.at=function(g){if(g<0)return new u(this,[]);for(var x=this.root,v=[];;){if(v.push(x),x.left){if(g<x.left._count){x=x.left;continue}g-=x.left._count}if(!g)return new u(this,v);if(g-=1,!x.right||g>=x.right._count)break;x=x.right}return new u(this,[])},a.ge=function(g){for(var x=this._compare,v=this.root,_=[],f=0;v;){var C=x(g,v.key);_.push(v),C<=0&&(f=_.length),v=C<=0?v.left:v.right}return _.length=f,new u(this,_)},a.gt=function(g){for(var x=this._compare,v=this.root,_=[],f=0;v;){var C=x(g,v.key);_.push(v),C<0&&(f=_.length),v=C<0?v.left:v.right}return _.length=f,new u(this,_)},a.lt=function(g){for(var x=this._compare,v=this.root,_=[],f=0;v;){var C=x(g,v.key);_.push(v),C>0&&(f=_.length),v=C<=0?v.left:v.right}return _.length=f,new u(this,_)},a.le=function(g){for(var x=this._compare,v=this.root,_=[],f=0;v;){var C=x(g,v.key);_.push(v),C>=0&&(f=_.length),v=C<0?v.left:v.right}return _.length=f,new u(this,_)},a.find=function(g){for(var x=this._compare,v=this.root,_=[];v;){var f=x(g,v.key);if(_.push(v),0===f)return new u(this,_);v=f<=0?v.left:v.right}return new u(this,[])},a.remove=function(g){var x=this.find(g);return x?x.remove():this},a.get=function(g){for(var x=this._compare,v=this.root;v;){var _=x(g,v.key);if(0===_)return v.value;v=_<=0?v.left:v.right}};var y=u.prototype;function d(g,x){g.key=x.key,g.value=x.value,g.left=x.left,g.right=x.right,g._color=x._color,g._count=x._count}function m(g,x){return g<x?-1:g>x?1:0}Object.defineProperty(y,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(y,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),y.clone=function(){return new u(this.tree,this._stack.slice())},y.remove=function(){var g=this._stack;if(0===g.length)return this.tree;var x=new Array(g.length),v=g[g.length-1];x[x.length-1]=new l(v._color,v.key,v.value,v.left,v.right,v._count);for(var _=g.length-2;_>=0;--_)x[_]=(v=g[_]).left===g[_+1]?new l(v._color,v.key,v.value,x[_+1],v.right,v._count):new l(v._color,v.key,v.value,v.left,x[_+1],v._count);if((v=x[x.length-1]).left&&v.right){var f=x.length;for(v=v.left;v.right;)x.push(v),v=v.right;var C=x[f-1];for(x.push(new l(v._color,C.key,C.value,v.left,v.right,v._count)),x[f-1].key=v.key,x[f-1].value=v.value,_=x.length-2;_>=f;--_)x[_]=new l((v=x[_])._color,v.key,v.value,v.left,x[_+1],v._count);x[f-1].left=x[f]}if(0===(v=x[x.length-1])._color){var w=x[x.length-2];for(w.left===v?w.left=null:w.right===v&&(w.right=null),x.pop(),_=0;_<x.length;++_)x[_]._count--;return new n(this.tree._compare,x[0])}if(v.left||v.right){for(v.left?d(v,v.left):v.right&&d(v,v.right),v._color=1,_=0;_<x.length-1;++_)x[_]._count--;return new n(this.tree._compare,x[0])}if(1===x.length)return new n(this.tree._compare,null);for(_=0;_<x.length;++_)x[_]._count--;var E=x[x.length-2];return function(P){for(var L,O,z,V,R=P.length-1;R>=0;--R){if(L=P[R],0===R)return void(L._color=1);if((O=P[R-1]).left===L){if((z=O.right).right&&0===z.right._color)return V=(z=O.right=t(z)).right=t(z.right),O.right=z.left,z.left=O,z.right=V,z._color=O._color,L._color=1,O._color=1,V._color=1,r(O),r(z),R>1&&((U=P[R-2]).left===O?U.left=z:U.right=z),void(P[R-1]=z);if(z.left&&0===z.left._color)return V=(z=O.right=t(z)).left=t(z.left),O.right=V.left,z.left=V.right,V.left=O,V.right=z,V._color=O._color,O._color=1,z._color=1,L._color=1,r(O),r(z),r(V),R>1&&((U=P[R-2]).left===O?U.left=V:U.right=V),void(P[R-1]=V);if(1===z._color){if(0===O._color)return O._color=1,void(O.right=i(0,z));O.right=i(0,z);continue}z=t(z),O.right=z.left,z.left=O,z._color=O._color,O._color=0,r(O),r(z),R>1&&((U=P[R-2]).left===O?U.left=z:U.right=z),P[R-1]=z,P[R]=O,R+1<P.length?P[R+1]=L:P.push(L),R+=2}else{if((z=O.left).left&&0===z.left._color)return V=(z=O.left=t(z)).left=t(z.left),O.left=z.right,z.right=O,z.left=V,z._color=O._color,L._color=1,O._color=1,V._color=1,r(O),r(z),R>1&&((U=P[R-2]).right===O?U.right=z:U.left=z),void(P[R-1]=z);if(z.right&&0===z.right._color)return V=(z=O.left=t(z)).right=t(z.right),O.left=V.right,z.right=V.left,V.right=O,V.left=z,V._color=O._color,O._color=1,z._color=1,L._color=1,r(O),r(z),r(V),R>1&&((U=P[R-2]).right===O?U.right=V:U.left=V),void(P[R-1]=V);if(1===z._color){if(0===O._color)return O._color=1,void(O.left=i(0,z));O.left=i(0,z);continue}var U;z=t(z),O.left=z.right,z.right=O,z._color=O._color,O._color=0,r(O),r(z),R>1&&((U=P[R-2]).right===O?U.right=z:U.left=z),P[R-1]=z,P[R]=O,R+1<P.length?P[R+1]=L:P.push(L),R+=2}}}(x),E.left===v?E.left=null:E.right=null,new n(this.tree._compare,x[0])},Object.defineProperty(y,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(y,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(y,"index",{get:function(){var g=0,x=this._stack;if(0===x.length){var v=this.tree.root;return v?v._count:0}x[x.length-1].left&&(g=x[x.length-1].left._count);for(var _=x.length-2;_>=0;--_)x[_+1]===x[_].right&&(++g,x[_].left&&(g+=x[_].left._count));return g},enumerable:!0}),y.next=function(){var g=this._stack;if(0!==g.length){var x=g[g.length-1];if(x.right)for(x=x.right;x;)g.push(x),x=x.left;else for(g.pop();g.length>0&&g[g.length-1].right===x;)x=g[g.length-1],g.pop()}},Object.defineProperty(y,"hasNext",{get:function(){var g=this._stack;if(0===g.length)return!1;if(g[g.length-1].right)return!0;for(var x=g.length-1;x>0;--x)if(g[x-1].left===g[x])return!0;return!1}}),y.update=function(g){var x=this._stack;if(0===x.length)throw new Error("Can't update empty node!");var v=new Array(x.length),_=x[x.length-1];v[v.length-1]=new l(_._color,_.key,g,_.left,_.right,_._count);for(var f=x.length-2;f>=0;--f)v[f]=(_=x[f]).left===x[f+1]?new l(_._color,_.key,_.value,v[f+1],_.right,_._count):new l(_._color,_.key,_.value,_.left,v[f+1],_._count);return new n(this.tree._compare,v[0])},y.prev=function(){var g=this._stack;if(0!==g.length){var x=g[g.length-1];if(x.left)for(x=x.left;x;)g.push(x),x=x.right;else for(g.pop();g.length>0&&g[g.length-1].left===x;)x=g[g.length-1],g.pop()}},Object.defineProperty(y,"hasPrev",{get:function(){var g=this._stack;if(0===g.length)return!1;if(g[g.length-1].left)return!0;for(var x=g.length-1;x>0;--x)if(g[x-1].right===g[x])return!0;return!1}})},3837:function(p,l,t){"use strict";p.exports=function(L,O){var z=new m(L);return z.update(O),z};var i=t(4935),r=t(501),n=t(5304),a=t(6429),s=t(6444),c=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),h=ArrayBuffer,u=DataView;function y(L){return Array.isArray(L)||h.isView(O=L)&&!(O instanceof u);var O}function d(L,O){return L[0]=O[0],L[1]=O[1],L[2]=O[2],L}function m(L){this.gl=L,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickFontStyle=["normal","normal","normal"],this.tickFontWeight=["normal","normal","normal"],this.tickFontVariant=["normal","normal","normal"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["sans-serif","sans-serif","sans-serif"],this.labelFontStyle=["normal","normal","normal"],this.labelFontWeight=["normal","normal","normal"],this.labelFontVariant=["normal","normal","normal"],this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=n(L)}var g=m.prototype;function x(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}g.update=function(L){function O(X,oe,fe){if(fe in L){var ue,ge=L[fe],we=this[fe];this[fe]=ue=(X?y(ge)&&y(ge[0]):y(ge))?[oe(ge[0]),oe(ge[1]),oe(ge[2])]:[oe(ge),oe(ge),oe(ge)];for(var Te=0;Te<3;++Te)if(ue[Te]!==we[Te])return!0}return!1}L=L||{};var z,V=O.bind(this,!1,Number),R=O.bind(this,!1,Boolean),U=O.bind(this,!1,String),Z=O.bind(this,!0,function(X){if(y(X)){if(3===X.length)return[+X[0],+X[1],+X[2],1];if(4===X.length)return[+X[0],+X[1],+X[2],+X[3]]}return[0,0,0,1]}),N=!1,G=!1;if("bounds"in L)for(var W=L.bounds,ae=0;ae<2;++ae)for(var re=0;re<3;++re)W[ae][re]!==this.bounds[ae][re]&&(G=!0),this.bounds[ae][re]=W[ae][re];if("ticks"in L)for(z=L.ticks,N=!0,this.autoTicks=!1,ae=0;ae<3;++ae)this.tickSpacing[ae]=0;else V("tickSpacing")&&(this.autoTicks=!0,G=!0);if(this._firstInit&&("ticks"in L||"tickSpacing"in L||(this.autoTicks=!0),G=!0,N=!0,this._firstInit=!1),G&&this.autoTicks&&(z=s.create(this.bounds,this.tickSpacing),N=!0),N){for(ae=0;ae<3;++ae)z[ae].sort(function(X,oe){return X.x-oe.x});s.equal(z,this.ticks)?N=!1:this.ticks=z}R("tickEnable"),U("tickFont")&&(N=!0),U("tickFontStyle")&&(N=!0),U("tickFontWeight")&&(N=!0),U("tickFontVariant")&&(N=!0),V("tickSize"),V("tickAngle"),V("tickPad"),Z("tickColor");var ne=U("labels");U("labelFont")&&(ne=!0),U("labelFontStyle")&&(ne=!0),U("labelFontWeight")&&(ne=!0),U("labelFontVariant")&&(ne=!0),R("labelEnable"),V("labelSize"),V("labelPad"),Z("labelColor"),R("lineEnable"),R("lineMirror"),V("lineWidth"),Z("lineColor"),R("lineTickEnable"),R("lineTickMirror"),V("lineTickLength"),V("lineTickWidth"),Z("lineTickColor"),R("gridEnable"),V("gridWidth"),Z("gridColor"),R("zeroEnable"),Z("zeroLineColor"),V("zeroLineWidth"),R("backgroundEnable"),Z("backgroundColor");var Q=[{family:this.labelFont[0],style:this.labelFontStyle[0],weight:this.labelFontWeight[0],variant:this.labelFontVariant[0]},{family:this.labelFont[1],style:this.labelFontStyle[1],weight:this.labelFontWeight[1],variant:this.labelFontVariant[1]},{family:this.labelFont[2],style:this.labelFontStyle[2],weight:this.labelFontWeight[2],variant:this.labelFontVariant[2]}],$=[{family:this.tickFont[0],style:this.tickFontStyle[0],weight:this.tickFontWeight[0],variant:this.tickFontVariant[0]},{family:this.tickFont[1],style:this.tickFontStyle[1],weight:this.tickFontWeight[1],variant:this.tickFontVariant[1]},{family:this.tickFont[2],style:this.tickFontStyle[2],weight:this.tickFontWeight[2],variant:this.tickFontVariant[2]}];this._text?this._text&&(ne||N)&&this._text.update(this.bounds,this.labels,Q,this.ticks,$):this._text=i(this.gl,this.bounds,this.labels,Q,this.ticks,$),this._lines&&N&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=r(this.gl,this.bounds,this.ticks))};var v=[new x,new x,new x];function _(L,O,z,V,R){for(var U=L.primalOffset,Z=L.primalMinor,N=L.mirrorOffset,G=L.mirrorMinor,W=V[O],ae=0;ae<3;++ae)if(O!==ae){var re=U,ne=N,Q=Z,$=G;W&1<<ae&&(re=N,ne=U,Q=G,$=Z),re[ae]=z[0][ae],ne[ae]=z[1][ae],R[ae]>0?(Q[ae]=-1,$[ae]=0):(Q[ae]=0,$[ae]=1)}}var f=[0,0,0],C={model:c,view:c,projection:c,_ortho:!1};g.isOpaque=function(){return!0},g.isTransparent=function(){return!1},g.drawTransparent=function(L){};var w=[0,0,0],E=[0,0,0],P=[0,0,0];g.draw=function(L){for(var O=this.gl,z=(L=L||C).model||c,V=L.view||c,R=L.projection||c,U=this.bounds,Z=L._ortho||!1,N=a(z,V,R,U,Z),G=N.cubeEdges,W=N.axis,$=(Z?2:1)*this.pixelRatio*(R[3]*V[12]+R[7]*V[13]+R[11]*V[14]+R[15]*V[15])/O.drawingBufferHeight,X=0;X<3;++X)this.lastCubeProps.cubeEdges[X]=G[X],this.lastCubeProps.axis[X]=W[X];var oe=v;for(X=0;X<3;++X)_(v[X],X,this.bounds,G,W);O=this.gl;var fe,ue,ge,Ne,je,ve,Me,Le,Ue,ze,qe,Ke,we=f;for(X=0;X<3;++X)we[X]=this.backgroundEnable[X]?W[X]:0;for(this._background.draw(z,V,R,U,we,this.backgroundColor),this._lines.bind(z,V,R,this),X=0;X<3;++X){var Te=[0,0,0];Te[X]=W[X]>0?U[1][X]:U[0][X];for(var xe=0;xe<2;++xe){var ye=(X+1+xe)%3,_e=(X+1+(1^xe))%3;this.gridEnable[ye]&&this._lines.drawGrid(ye,_e,this.bounds,Te,this.gridColor[ye],this.gridWidth[ye]*this.pixelRatio)}for(xe=0;xe<2;++xe)ye=(X+1+xe)%3,this.zeroEnable[_e=(X+1+(1^xe))%3]&&Math.min(U[0][_e],U[1][_e])<=0&&Math.max(U[0][_e],U[1][_e])>=0&&this._lines.drawZero(ye,_e,this.bounds,Te,this.zeroLineColor[_e],this.zeroLineWidth[_e]*this.pixelRatio)}for(X=0;X<3;++X){this.lineEnable[X]&&this._lines.drawAxisLine(X,this.bounds,oe[X].primalOffset,this.lineColor[X],this.lineWidth[X]*this.pixelRatio),this.lineMirror[X]&&this._lines.drawAxisLine(X,this.bounds,oe[X].mirrorOffset,this.lineColor[X],this.lineWidth[X]*this.pixelRatio);var Ie=d(w,oe[X].primalMinor),De=d(E,oe[X].mirrorMinor),be=this.lineTickLength;for(xe=0;xe<3;++xe){var he=$/z[5*xe];Ie[xe]*=be[xe]*he,De[xe]*=be[xe]*he}this.lineTickEnable[X]&&this._lines.drawAxisTicks(X,oe[X].primalOffset,Ie,this.lineTickColor[X],this.lineTickWidth[X]*this.pixelRatio),this.lineTickMirror[X]&&this._lines.drawAxisTicks(X,oe[X].mirrorOffset,De,this.lineTickColor[X],this.lineTickWidth[X]*this.pixelRatio)}function ce(Ne){(ge=[0,0,0])[Ne]=1}for(this._lines.unbind(),this._text.bind(z,V,R,this.pixelRatio),X=0;X<3;++X){var Pe=oe[X].primalMinor,Ae=oe[X].mirrorMinor,Ce=d(P,oe[X].primalOffset);for(xe=0;xe<3;++xe)this.lineTickEnable[X]&&(Ce[xe]+=$*Pe[xe]*Math.max(this.lineTickLength[xe],0)/z[5*xe]);var Oe=[0,0,0];if(Oe[X]=1,this.tickEnable[X]){for(-3600===this.tickAngle[X]?(this.tickAngle[X]=0,this.tickAlign[X]="auto"):this.tickAlign[X]=-1,fe[0]="auto"===(fe=[this.tickAlign[X],.5,ue=1])[0]?0:parseInt(""+fe[0]),ge=[0,0,0],Me=void 0,Le=void 0,Ue=void 0,ze=void 0,qe=void 0,Ke=void 0,ze=(je=Pe)[Le=((Ne=X)+2)%3],qe=(ve=Ae)[Me=(Ne+1)%3],Ke=ve[Le],(Ue=je[Me])>0&&Ke>0||Ue>0&&Ke<0||Ue<0&&Ke>0||Ue<0&&Ke<0?ce(Me):(ze>0&&qe>0||ze>0&&qe<0||ze<0&&qe>0||ze<0&&qe<0)&&ce(Le),xe=0;xe<3;++xe)Ce[xe]+=$*Pe[xe]*this.tickPad[xe]/z[5*xe];this._text.drawTicks(X,this.tickSize[X],this.tickAngle[X],Ce,this.tickColor[X],Oe,ge,fe)}if(this.labelEnable[X]){for(ue=0,ge=[0,0,0],this.labels[X].length>4&&(ce(X),ue=1),fe[0]="auto"===(fe=[this.labelAlign[X],.5,ue])[0]?0:parseInt(""+fe[0]),xe=0;xe<3;++xe)Ce[xe]+=$*Pe[xe]*this.labelPad[xe]/z[5*xe];Ce[X]+=.5*(U[0][X]+U[1][X]),this._text.drawLabel(X,this.labelSize[X],this.labelAngle[X],Ce,this.labelColor[X],[0,0,0],ge,fe)}}this._text.unbind()},g.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},5304:function(p,l,t){"use strict";p.exports=function(c){for(var h=[],u=[],y=0,d=0;d<3;++d)for(var m=(d+1)%3,g=(d+2)%3,x=[0,0,0],v=[0,0,0],_=-1;_<=1;_+=2){u.push(y,y+2,y+1,y+1,y+2,y+3),x[d]=_,v[d]=_;for(var f=-1;f<=1;f+=2){x[m]=f;for(var C=-1;C<=1;C+=2)x[g]=C,h.push(x[0],x[1],x[2],v[0],v[1],v[2]),y+=1}var w=m;m=g,g=w}var E=i(c,new Float32Array(h)),P=i(c,new Uint16Array(u),c.ELEMENT_ARRAY_BUFFER),L=r(c,[{buffer:E,type:c.FLOAT,size:3,offset:0,stride:24},{buffer:E,type:c.FLOAT,size:3,offset:12,stride:24}],P),O=n(c);return O.attributes.position.location=0,O.attributes.normal.location=1,new a(c,E,L,O)};var i=t(2762),r=t(8116),n=t(1879).bg;function a(c,h,u,y){this.gl=c,this.buffer=h,this.vao=u,this.shader=y}var s=a.prototype;s.draw=function(c,h,u,y,d,m){for(var g=!1,x=0;x<3;++x)g=g||d[x];if(g){var v=this.gl;v.enable(v.POLYGON_OFFSET_FILL),v.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:c,view:h,projection:u,bounds:y,enable:d,colors:m},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),v.disable(v.POLYGON_OFFSET_FILL)}},s.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},6429:function(p,l,t){"use strict";p.exports=function(f,C,w,E,P){r(s,C,f),r(s,w,s);for(var L=0,O=0;O<2;++O){u[2]=E[O][2];for(var z=0;z<2;++z){u[1]=E[z][1];for(var V=0;V<2;++V)u[0]=E[V][0],d(c[L],u,s),L+=1}}var R=-1;for(O=0;O<8;++O){for(var U=c[O][3],Z=0;Z<3;++Z)h[O][Z]=c[O][Z]/U;P&&(h[O][2]*=-1),U<0&&(R<0||h[O][2]<h[R][2])&&(R=O)}if(R<0){R=0;for(var N=0;N<3;++N){for(var G=(N+2)%3,W=(N+1)%3,ae=-1,re=-1,ne=0;ne<2;++ne){var Q=(X=ne<<N)+(ne<<G)+(1-ne<<W),$=X+(1-ne<<G)+(ne<<W);a(h[X],h[Q],h[$],y)<0||(ne?ae=1:re=1)}if(ae<0||re<0)re>ae&&(R|=1<<N);else{for(ne=0;ne<2;++ne){Q=(X=ne<<N)+(ne<<G)+(1-ne<<W);var X,oe=g([c[X],c[Q],c[$=X+(1-ne<<G)+(ne<<W)],c[X+(1<<G)+(1<<W)]]);ne?ae=oe:re=oe}re>ae&&(R|=1<<N)}}}var fe=7^R,ue=-1;for(O=0;O<8;++O)O!==R&&O!==fe&&(ue<0||h[ue][1]>h[O][1])&&(ue=O);var ge=-1;for(O=0;O<3;++O)(Te=ue^1<<O)!==R&&Te!==fe&&(ge<0&&(ge=Te),(W=h[Te])[0]<h[ge][0]&&(ge=Te));var we=-1;for(O=0;O<3;++O){var Te;(Te=ue^1<<O)!==R&&Te!==fe&&Te!==ge&&(we<0&&(we=Te),(W=h[Te])[0]>h[we][0]&&(we=Te))}var xe=x;xe[0]=xe[1]=xe[2]=0,xe[i.log2(ge^ue)]=ue&ge,xe[i.log2(ue^we)]=ue&we;var ye=7^we;ye===R||ye===fe?xe[i.log2(we^(ye=7^ge))]=ye&we:xe[i.log2(ge^ye)]=ye&ge;var _e=v,Ie=R;for(N=0;N<3;++N)_e[N]=Ie&1<<N?-1:1;return _};var i=t(8828),r=t(6760),n=t(5202),a=t(3250),s=new Array(16),c=new Array(8),h=new Array(8),u=new Array(3),y=[0,0,0];function d(f,C,w){for(var E=0;E<4;++E){f[E]=w[12+E];for(var P=0;P<3;++P)f[E]+=C[P]*w[4*P+E]}}!function(){for(var f=0;f<8;++f)c[f]=[1,1,1,1],h[f]=[1,1,1]}();var m=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function g(f){for(var C=0;C<m.length;++C)if((f=n.positive(f,m[C])).length<3)return 0;var w=f[0],E=w[0]/w[3],P=w[1]/w[3],L=0;for(C=1;C+1<f.length;++C){var O=f[C],z=f[C+1];L+=Math.abs((O[0]/O[3]-E)*(z[1]/z[3]-P)-(O[1]/O[3]-P)*(z[0]/z[3]-E))}return L}var x=[1,1,1],v=[0,0,0],_={cubeEdges:x,axis:v}},501:function(p,l,t){"use strict";p.exports=function(x,v,_){var f=[],C=[0,0,0],w=[0,0,0],E=[0,0,0],P=[0,0,0];f.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var L=0;L<3;++L){for(var O=f.length/3|0,z=0;z<_[L].length;++z){var V=+_[L][z].x;f.push(V,0,1,V,1,1,V,0,-1,V,0,-1,V,1,1,V,1,-1)}var R=f.length/3|0;C[L]=O,w[L]=R-O,O=f.length/3|0;for(var U=0;U<_[L].length;++U)f.push(V=+_[L][U].x,0,1,V,1,1,V,0,-1,V,0,-1,V,1,1,V,1,-1);R=f.length/3|0,E[L]=O,P[L]=R-O}var Z=i(x,new Float32Array(f)),N=r(x,[{buffer:Z,type:x.FLOAT,size:3,stride:0,offset:0}]),G=n(x);return G.attributes.position.location=0,new m(x,Z,N,G,w,C,P,E)};var i=t(2762),r=t(8116),n=t(1879).n,a=[0,0,0],s=[0,0,0],c=[0,0,0],h=[0,0,0],u=[1,1];function y(x){return x[0]=x[1]=x[2]=0,x}function d(x,v){return x[0]=v[0],x[1]=v[1],x[2]=v[2],x}function m(x,v,_,f,C,w,E,P){this.gl=x,this.vertBuffer=v,this.vao=_,this.shader=f,this.tickCount=C,this.tickOffset=w,this.gridCount=E,this.gridOffset=P}var g=m.prototype;g.bind=function(x,v,_){this.shader.bind(),this.shader.uniforms.model=x,this.shader.uniforms.view=v,this.shader.uniforms.projection=_,u[0]=this.gl.drawingBufferWidth,u[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=u,this.vao.bind()},g.unbind=function(){this.vao.unbind()},g.drawAxisLine=function(x,v,_,f,C){var w=y(s);this.shader.uniforms.majorAxis=s,w[x]=v[1][x]-v[0][x],this.shader.uniforms.minorAxis=w;var E,P=d(h,_);P[x]+=v[0][x],this.shader.uniforms.offset=P,this.shader.uniforms.lineWidth=C,this.shader.uniforms.color=f,(E=y(c))[(x+2)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6),(E=y(c))[(x+1)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6)},g.drawAxisTicks=function(x,v,_,f,C){if(this.tickCount[x]){var w=y(a);w[x]=1,this.shader.uniforms.majorAxis=w,this.shader.uniforms.offset=v,this.shader.uniforms.minorAxis=_,this.shader.uniforms.color=f,this.shader.uniforms.lineWidth=C;var E=y(c);E[x]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,this.tickCount[x],this.tickOffset[x])}},g.drawGrid=function(x,v,_,f,C,w){if(this.gridCount[x]){var E=y(s);E[v]=_[1][v]-_[0][v],this.shader.uniforms.minorAxis=E;var P=d(h,f);P[v]+=_[0][v],this.shader.uniforms.offset=P;var L=y(a);L[x]=1,this.shader.uniforms.majorAxis=L;var O=y(c);O[x]=1,this.shader.uniforms.screenAxis=O,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=C,this.vao.draw(this.gl.TRIANGLES,this.gridCount[x],this.gridOffset[x])}},g.drawZero=function(x,v,_,f,C,w){var E=y(s);this.shader.uniforms.majorAxis=E,E[x]=_[1][x]-_[0][x],this.shader.uniforms.minorAxis=E;var P=d(h,f);P[x]+=_[0][x],this.shader.uniforms.offset=P;var L=y(c);L[v]=1,this.shader.uniforms.screenAxis=L,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=C,this.vao.draw(this.gl.TRIANGLES,6)},g.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1879:function(p,l,t){"use strict";var i=t(3236),r=t(9405),n=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * (view * (model * vec4(p, 1.0)));\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),a=i(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);l.n=function(y){return r(y,n,a,null,[{name:"position",type:"vec3"}])};var s=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * (view * (model * vec4(p, 1.0)));\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}\n"]),c=i(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);l.Q=function(y){return r(y,s,c,null,[{name:"position",type:"vec3"}])};var h=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * (view * (model * vec4(nPosition, 1.0)));\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}\n"]),u=i(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);l.bg=function(y){return r(y,h,u,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},4935:function(p,l,t){"use strict";p.exports=function(d,m,g,x,v,_){var f=i(d),C=r(d,[{buffer:f,size:3}]),w=a(d);w.attributes.position.location=0;var E=new h(d,w,f,C);return E.update(m,g,x,v,_),E};var i=t(2762),r=t(8116),n=t(4359),a=t(1879).Q,s=window||S.global||{},c=s.__TEXT_CACHE||{};function h(d,m,g,x){this.gl=d,this.shader=m,this.buffer=g,this.vao=x,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}s.__TEXT_CACHE={};var u=h.prototype,y=[0,0];u.bind=function(d,m,g,x){this.vao.bind(),this.shader.bind();var v=this.shader.uniforms;v.model=d,v.view=m,v.projection=g,v.pixelScale=x,y[0]=this.gl.drawingBufferWidth,y[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=y},u.unbind=function(){this.vao.unbind()},u.update=function(d,m,g,x,v){var _=[];function f(R,U,Z,N,G,W){var ae=[Z.style,Z.weight,Z.variant,Z.family].join("_"),re=c[ae];re||(re=c[ae]={});var ne=re[U];ne||(ne=re[U]=function(Te,xe){try{return n(Te,xe)}catch(ye){return console.warn('error vectorizing text:"'+Te+'" error:',ye),{cells:[],positions:[]}}}(U,{triangles:!0,font:Z.family,fontStyle:Z.style,fontWeight:Z.weight,fontVariant:Z.variant,textAlign:"center",textBaseline:"middle",lineSpacing:G,styletags:W}));for(var Q=(N||12)/12,$=ne.positions,X=ne.cells,oe=0,fe=X.length;oe<fe;++oe)for(var ue=X[oe],ge=2;ge>=0;--ge){var we=$[ue[ge]];_.push(Q*we[0],-Q*we[1],R)}}for(var C=[0,0,0],w=[0,0,0],E=[0,0,0],P=[0,0,0],L={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},O=0;O<3;++O){E[O]=_.length/3|0,f(.5*(d[0][O]+d[1][O]),m[O],g[O],12,1.25,L),P[O]=(_.length/3|0)-E[O],C[O]=_.length/3|0;for(var z=0;z<x[O].length;++z)x[O][z].text&&f(x[O][z].x,x[O][z].text,{family:x[O][z].font||v[O].family,style:v[O].fontStyle||v[O].style,weight:v[O].fontWeight||v[O].weight,variant:v[O].fontVariant||v[O].variant},x[O][z].fontSize||12,1.25,L);w[O]=(_.length/3|0)-C[O]}this.buffer.update(_),this.tickOffset=C,this.tickCount=w,this.labelOffset=E,this.labelCount=P},u.drawTicks=function(d,m,g,x,v,_,f,C){this.tickCount[d]&&(this.shader.uniforms.axis=_,this.shader.uniforms.color=v,this.shader.uniforms.angle=g,this.shader.uniforms.scale=m,this.shader.uniforms.offset=x,this.shader.uniforms.alignDir=f,this.shader.uniforms.alignOpt=C,this.vao.draw(this.gl.TRIANGLES,this.tickCount[d],this.tickOffset[d]))},u.drawLabel=function(d,m,g,x,v,_,f,C){this.labelCount[d]&&(this.shader.uniforms.axis=_,this.shader.uniforms.color=v,this.shader.uniforms.angle=g,this.shader.uniforms.scale=m,this.shader.uniforms.offset=x,this.shader.uniforms.alignDir=f,this.shader.uniforms.alignOpt=C,this.vao.draw(this.gl.TRIANGLES,this.labelCount[d],this.labelOffset[d]))},u.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},6444:function(p,l){"use strict";function t(i,r){var n=i+"",a=n.indexOf("."),s=0;a>=0&&(s=n.length-a-1);var c=Math.pow(10,s),h=Math.round(i*r*c),u=h+"";if(u.indexOf("e")>=0)return u;var y=h/c,d=h%c;h<0?(y=0|-Math.ceil(y),d=0|-d):(y=0|Math.floor(y),d|=0);var m=""+y;if(h<0&&(m="-"+m),s){for(var g=""+d;g.length<s;)g="0"+g;return m+"."+g}return m}l.create=function(i,r){for(var n=[],a=0;a<3;++a){for(var s=[],c=0;c*r[a]<=i[1][a];++c)s.push({x:c*r[a],text:t(r[a],c)});for(c=-1;c*r[a]>=i[0][a];--c)s.push({x:c*r[a],text:t(r[a],c)});n.push(s)}return n},l.equal=function(i,r){for(var n=0;n<3;++n){if(i[n].length!==r[n].length)return!1;for(var a=0;a<i[n].length;++a){var s=i[n][a],c=r[n][a];if(s.x!==c.x||s.text!==c.text||s.font!==c.font||s.fontColor!==c.fontColor||s.fontSize!==c.fontSize||s.dx!==c.dx||s.dy!==c.dy)return!1}}return!0}},5445:function(p,l,t){"use strict";p.exports=function(_,f,C,w,E){var P=f.model||h,L=f.view||h,O=f.projection||h,z=f._ortho||!1,V=_.bounds,R=(E=E||n(P,L,O,V,z)).axis;a(u,L,P),a(u,O,u);for(var U=x,Z=0;Z<3;++Z)U[Z].lo=1/0,U[Z].hi=-1/0,U[Z].pixelsPerDataUnit=1/0;var N=i(s(u,u));s(u,u);for(var G=0;G<3;++G){var W=(G+1)%3,ae=(G+2)%3,re=v;e:for(Z=0;Z<2;++Z){var ne=[];if(R[G]<0!=!!Z){re[G]=V[Z][G];for(var Q=0;Q<2;++Q){re[W]=V[Q^Z][W];for(var $=0;$<2;++$)re[ae]=V[$^Q^Z][ae],ne.push(re.slice())}var X=z?5:4;for(Q=X;Q===X;++Q){if(0===ne.length)continue e;ne=r.positive(ne,N[Q])}for(Q=0;Q<ne.length;++Q){var oe=g(v,u,ae=ne[Q],C,w);for($=0;$<3;++$)U[$].lo=Math.min(U[$].lo,ae[$]),U[$].hi=Math.max(U[$].hi,ae[$]),$!==G&&(U[$].pixelsPerDataUnit=Math.min(U[$].pixelsPerDataUnit,Math.abs(oe[$])))}}}}return U};var i=t(5033),r=t(5202),n=t(6429),a=t(6760),s=t(5665),c=t(5352),h=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),u=new Float32Array(16);function y(_,f,C){this.lo=_,this.hi=f,this.pixelsPerDataUnit=C}var d=[0,0,0,1],m=[0,0,0,1];function g(_,f,C,w,E){for(var P=0;P<3;++P){for(var L=d,O=m,z=0;z<3;++z)O[z]=L[z]=C[z];O[3]=L[3]=1,O[P]+=1,c(O,O,f),O[3]<0&&(_[P]=1/0),L[P]-=1,c(L,L,f),L[3]<0&&(_[P]=1/0);var V=(L[0]/L[3]-O[0]/O[3])*w,R=(L[1]/L[3]-O[1]/O[3])*E;_[P]=.25*Math.sqrt(V*V+R*R)}return _}var x=[new y(1/0,-1/0,1/0),new y(1/0,-1/0,1/0),new y(1/0,-1/0,1/0)],v=[0,0,0]},2762:function(p,l,t){"use strict";var i=t(1888),r=t(5298),n=t(9618),a=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function s(y,d,m,g,x){this.gl=y,this.type=d,this.handle=m,this.length=g,this.usage=x}var c=s.prototype;function h(y,d,m,g,x,v){var _=x.length*x.BYTES_PER_ELEMENT;if(v<0)return y.bufferData(d,x,g),_;if(_+v>m)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return y.bufferSubData(d,v,x),m}c.bind=function(){this.gl.bindBuffer(this.type,this.handle)},c.unbind=function(){this.gl.bindBuffer(this.type,null)},c.dispose=function(){this.gl.deleteBuffer(this.handle)},c.update=function(y,d){if("number"!=typeof d&&(d=-1),this.bind(),"object"==typeof y&&void 0!==y.shape){var m=y.dtype;if(a.indexOf(m)<0&&(m="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(m=gl.getExtension("OES_element_index_uint")&&"uint16"!==m?"uint32":"uint16"),m===y.dtype&&function(_,f){for(var C=1,w=f.length-1;w>=0;--w){if(f[w]!==C)return!1;C*=_[w]}return!0}(y.shape,y.stride))this.length=h(this.gl,this.type,this.length,this.usage,0===y.offset&&y.data.length===y.shape[0]?y.data:y.data.subarray(y.offset,y.shape[0]),d);else{var g=i.malloc(y.size,m),x=n(g,y.shape);r.assign(x,y),this.length=h(this.gl,this.type,this.length,this.usage,d<0?g:g.subarray(0,y.size),d),i.free(g)}}else if(Array.isArray(y)){var v;v=function u(y,d){for(var m=i.malloc(y.length,d),g=y.length,x=0;x<g;++x)m[x]=y[x];return m}(y,this.type===this.gl.ELEMENT_ARRAY_BUFFER?"uint16":"float32"),this.length=h(this.gl,this.type,this.length,this.usage,d<0?v:v.subarray(0,y.length),d),i.free(v)}else if("object"==typeof y&&"number"==typeof y.length)this.length=h(this.gl,this.type,this.length,this.usage,y,d);else{if("number"!=typeof y&&void 0!==y)throw new Error("gl-buffer: Invalid data type");if(d>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(y|=0)<=0&&(y=1),this.gl.bufferData(this.type,0|y,this.usage),this.length=y}},p.exports=function(y,d,m,g){if(g=g||y.DYNAMIC_DRAW,(m=m||y.ARRAY_BUFFER)!==y.ARRAY_BUFFER&&m!==y.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(g!==y.DYNAMIC_DRAW&&g!==y.STATIC_DRAW&&g!==y.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var x=y.createBuffer(),v=new s(y,m,x,0,g);return v.update(d),v}},6405:function(p,l,t){"use strict";var i=t(2931);p.exports=function(n,a){var s=n.positions,c=n.vectors,h={positions:[],vertexIntensity:[],vertexIntensityBounds:n.vertexIntensityBounds,vectors:[],cells:[],coneOffset:n.coneOffset,colormap:n.colormap};if(0===n.positions.length)return a&&(a[0]=[0,0,0],a[1]=[0,0,0]),h;for(var u=0,y=1/0,d=-1/0,m=1/0,g=-1/0,x=1/0,v=-1/0,_=null,f=null,C=[],w=1/0,E=!1,P="raw"===n.coneSizemode,L=0;L<s.length;L++){var O=s[L];y=Math.min(O[0],y),d=Math.max(O[0],d),m=Math.min(O[1],m),g=Math.max(O[1],g),x=Math.min(O[2],x),v=Math.max(O[2],v);var z=c[L];if(i.length(z)>u&&(u=i.length(z)),L&&!P){var V=2*i.distance(_,O)/(i.length(f)+i.length(z));V?(w=Math.min(w,V),E=!1):E=!0}E||(_=O,f=z),C.push(z)}var U=[d,g,v];a&&(a[0]=[y,m,x],a[1]=U),0===u&&(u=1);var Z=1/u;isFinite(w)||(w=1),h.vectorScale=w;var N=n.coneSize||(P?1:.5);n.absoluteConeSize&&(N=n.absoluteConeSize*Z),h.coneScale=N,L=0;for(var G=0;L<s.length;L++)for(var W=(O=s[L])[0],ae=O[1],re=O[2],ne=C[L],Q=i.length(ne)*Z,$=0;$<8;$++){h.positions.push([W,ae,re,G++]),h.positions.push([W,ae,re,G++]),h.positions.push([W,ae,re,G++]),h.positions.push([W,ae,re,G++]),h.positions.push([W,ae,re,G++]),h.positions.push([W,ae,re,G++]),h.vectors.push(ne),h.vectors.push(ne),h.vectors.push(ne),h.vectors.push(ne),h.vectors.push(ne),h.vectors.push(ne),h.vertexIntensity.push(Q,Q,Q),h.vertexIntensity.push(Q,Q,Q);var X=h.positions.length;h.cells.push([X-6,X-5,X-4],[X-3,X-2,X-1])}return h};var r=t(614);p.exports.createMesh=t(9060),p.exports.createConeMesh=function(n,a){return p.exports.createMesh(n,a,{shaders:r,traceType:"cone"})}},9060:function(p,l,t){"use strict";var i=t(9405),r=t(2762),n=t(8116),a=t(7766),s=t(6760),c=t(7608),h=t(9618),u=t(6729),y=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function d(g,x,v,_,f,C,w,E,P,L,O){this.gl=g,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=x,this.dirty=!0,this.triShader=v,this.pickShader=_,this.trianglePositions=f,this.triangleVectors=C,this.triangleColors=E,this.triangleUVs=P,this.triangleIds=w,this.triangleVAO=L,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=O,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=y,this._view=y,this._projection=y,this._resolution=[1,1]}var m=d.prototype;m.isOpaque=function(){return this.opacity>=1},m.isTransparent=function(){return this.opacity<1},m.pickSlots=1,m.setPickBase=function(g){this.pickId=g},m.update=function(g){g=g||{};var x=this.gl;this.dirty=!0,"lightPosition"in g&&(this.lightPosition=g.lightPosition),"opacity"in g&&(this.opacity=g.opacity),"ambient"in g&&(this.ambientLight=g.ambient),"diffuse"in g&&(this.diffuseLight=g.diffuse),"specular"in g&&(this.specularLight=g.specular),"roughness"in g&&(this.roughness=g.roughness),"fresnel"in g&&(this.fresnel=g.fresnel),void 0!==g.tubeScale&&(this.tubeScale=g.tubeScale),void 0!==g.vectorScale&&(this.vectorScale=g.vectorScale),void 0!==g.coneScale&&(this.coneScale=g.coneScale),void 0!==g.coneOffset&&(this.coneOffset=g.coneOffset),g.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=x.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=x.LINEAR,this.texture.setPixels(function(oe){for(var fe=u({colormap:oe,nshades:256,format:"rgba"}),ue=new Uint8Array(1024),ge=0;ge<256;++ge){for(var we=fe[ge],Te=0;Te<3;++Te)ue[4*ge+Te]=we[Te];ue[4*ge+3]=255*we[3]}return h(ue,[256,256,4],[4,0,1])}(g.colormap)),this.texture.generateMipmap());var v=g.cells,_=g.positions,f=g.vectors;if(_&&v&&f){var C=[],w=[],E=[],P=[],L=[];this.cells=v,this.positions=_,this.vectors=f;var O=g.meshColor||[1,1,1,1],z=g.vertexIntensity,V=1/0,R=-1/0;if(z)if(g.vertexIntensityBounds)V=+g.vertexIntensityBounds[0],R=+g.vertexIntensityBounds[1];else for(var U=0;U<z.length;++U){var Z=z[U];V=Math.min(V,Z),R=Math.max(R,Z)}else for(U=0;U<_.length;++U)Z=_[U][2],V=Math.min(V,Z),R=Math.max(R,Z);for(this.intensity=z||function(oe){for(var fe=oe.length,ue=new Array(fe),ge=0;ge<fe;++ge)ue[ge]=oe[ge][2];return ue}(_),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],U=0;U<_.length;++U)for(var N=_[U],G=0;G<3;++G)!isNaN(N[G])&&isFinite(N[G])&&(this.bounds[0][G]=Math.min(this.bounds[0][G],N[G]),this.bounds[1][G]=Math.max(this.bounds[1][G],N[G]));var W=0;e:for(U=0;U<v.length;++U){var ae=v[U];if(3===ae.length){for(G=0;G<3;++G){N=_[ne=ae[G]];for(var re=0;re<3;++re)if(isNaN(N[re])||!isFinite(N[re]))continue e}for(G=0;G<3;++G){var ne;N=_[ne=ae[2-G]],C.push(N[0],N[1],N[2],N[3]);var Q=f[ne];w.push(Q[0],Q[1],Q[2],Q[3]||0);var $;E.push(O[0],O[1],O[2],3===O.length?1:O[3]),P.push(($=z?[(z[ne]-V)/(R-V),0]:[(N[2]-V)/(R-V),0])[0],$[1]),L.push(U)}W+=1}}this.triangleCount=W,this.trianglePositions.update(C),this.triangleVectors.update(w),this.triangleColors.update(E),this.triangleUVs.update(P),this.triangleIds.update(new Uint32Array(L))}},m.drawTransparent=m.draw=function(g){for(var x=this.gl,v=(g=g||{}).model||y,_=g.view||y,f=g.projection||y,C=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],w=0;w<3;++w)C[0][w]=Math.max(C[0][w],this.clipBounds[0][w]),C[1][w]=Math.min(C[1][w],this.clipBounds[1][w]);var E={model:v,view:_,projection:f,inverseModel:y.slice(),clipBounds:C,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};E.inverseModel=c(E.inverseModel,E.model),x.disable(x.CULL_FACE),this.texture.bind(0);var P=new Array(16);for(s(P,E.view,E.model),s(P,E.projection,P),c(P,P),w=0;w<3;++w)E.eyePosition[w]=P[12+w]/P[15];var L=P[15];for(w=0;w<3;++w)L+=this.lightPosition[w]*P[4*w+3];for(w=0;w<3;++w){for(var O=P[12+w],z=0;z<3;++z)O+=P[4*z+w]*this.lightPosition[z];E.lightPosition[w]=O/L}if(this.triangleCount>0){var V=this.triShader;V.bind(),V.uniforms=E,this.triangleVAO.bind(),x.drawArrays(x.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},m.drawPick=function(g){for(var x=this.gl,v=(g=g||{}).model||y,_=g.view||y,f=g.projection||y,C=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],w=0;w<3;++w)C[0][w]=Math.max(C[0][w],this.clipBounds[0][w]),C[1][w]=Math.min(C[1][w],this.clipBounds[1][w]);this._model=[].slice.call(v),this._view=[].slice.call(_),this._projection=[].slice.call(f),this._resolution=[x.drawingBufferWidth,x.drawingBufferHeight];var E={model:v,view:_,projection:f,clipBounds:C,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},P=this.pickShader;P.bind(),P.uniforms=E,this.triangleCount>0&&(this.triangleVAO.bind(),x.drawArrays(x.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},m.pick=function(g){if(!g||g.id!==this.pickId)return null;var x=g.value[0]+256*g.value[1]+65536*g.value[2],v=this.cells[x],_=this.positions[v[1]].slice(0,3),f={position:_,dataCoordinate:_,index:Math.floor(v[1]/48)};return"cone"===this.traceType?f.index=Math.floor(v[1]/48):"streamtube"===this.traceType&&(f.intensity=this.intensity[v[1]],f.velocity=this.vectors[v[1]].slice(0,3),f.divergence=this.vectors[v[1]][3],f.index=x),f},m.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},p.exports=function(g,x,v){var _=v.shaders;1===arguments.length&&(g=(x=g).gl);var U,Z,f=((Z=i(g,(U=_).meshShader.vertex,U.meshShader.fragment,null,U.meshShader.attributes)).attributes.position.location=0,Z.attributes.color.location=2,Z.attributes.uv.location=3,Z.attributes.vector.location=4,Z),C=function(R,U){var Z=i(R,U.pickShader.vertex,U.pickShader.fragment,null,U.pickShader.attributes);return Z.attributes.position.location=0,Z.attributes.id.location=1,Z.attributes.vector.location=4,Z}(g,_),w=a(g,h(new Uint8Array([255,255,255,255]),[1,1,4]));w.generateMipmap(),w.minFilter=g.LINEAR_MIPMAP_LINEAR,w.magFilter=g.LINEAR;var E=r(g),P=r(g),L=r(g),O=r(g),z=r(g),V=new d(g,w,f,C,E,P,z,L,O,n(g,[{buffer:E,type:g.FLOAT,size:4},{buffer:z,type:g.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:L,type:g.FLOAT,size:4},{buffer:O,type:g.FLOAT,size:2},{buffer:P,type:g.FLOAT,size:4}]),v.traceType||"cone");return V.update(x),V}},614:function(p,l,t){var i=t(3236),r=i(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),n=i(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),a=i(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * (view * conePosition);\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),s=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);l.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},l.pickShader={vertex:a,fragment:s,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},737:function(p){p.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},5171:function(p,l,t){var i=t(737);p.exports=function(r){return i[r]}},9165:function(p,l,t){"use strict";p.exports=function(d){var m=d.gl,g=i(m),x=r(m,[{buffer:g,type:m.FLOAT,size:3,offset:0,stride:40},{buffer:g,type:m.FLOAT,size:4,offset:12,stride:40},{buffer:g,type:m.FLOAT,size:3,offset:28,stride:40}]),v=n(m);v.attributes.position.location=0,v.attributes.color.location=1,v.attributes.offset.location=2;var _=new s(m,g,x,v);return _.update(d),_};var i=t(2762),r=t(8116),n=t(3436),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(d,m,g,x){this.gl=d,this.shader=x,this.buffer=m,this.vao=g,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var c=s.prototype;function h(d,m){for(var g=0;g<3;++g)d[0][g]=Math.min(d[0][g],m[g]),d[1][g]=Math.max(d[1][g],m[g])}c.isOpaque=function(){return!this.hasAlpha},c.isTransparent=function(){return this.hasAlpha},c.drawTransparent=c.draw=function(d){var m=this.gl,g=this.shader.uniforms;this.shader.bind();var x=g.view=d.view||a,v=g.projection=d.projection||a;g.model=d.model||a,g.clipBounds=this.clipBounds,g.opacity=this.opacity;var E=(d._ortho?2:1)*this.pixelRatio*(v[3]*x[12]+v[7]*x[13]+v[11]*x[14]+v[15]*x[15])/m.drawingBufferHeight;this.vao.bind();for(var P=0;P<3;++P)m.lineWidth(this.lineWidth[P]*this.pixelRatio),g.capSize=this.capSize[P]*E,this.lineCount[P]&&m.drawArrays(m.LINES,this.lineOffset[P],this.lineCount[P]);this.vao.unbind()};var u=function(){for(var d=new Array(3),m=0;m<3;++m){for(var g=[],x=1;x<=2;++x)for(var v=-1;v<=1;v+=2){var _=[0,0,0];_[(x+m)%3]=v,g.push(_)}d[m]=g}return d}();function y(d,m,g,x){for(var v=u[x],_=0;_<v.length;++_){var f=v[_];d.push(m[0],m[1],m[2],g[0],g[1],g[2],g[3],f[0],f[1],f[2])}return v.length}c.update=function(d){"lineWidth"in(d=d||{})&&(this.lineWidth=d.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in d&&(this.capSize=d.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in d&&(this.opacity=+d.opacity,this.opacity<1&&(this.hasAlpha=!0));var m=d.color||[[0,0,0],[0,0,0],[0,0,0]],g=d.position,x=d.error;if(Array.isArray(m[0])||(m=[m,m,m]),g&&x){var v=[],_=g.length,f=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var C=0;C<3;++C){this.lineOffset[C]=f;e:for(var w=0;w<_;++w){for(var E=g[w],P=0;P<3;++P)if(isNaN(E[P])||!isFinite(E[P]))continue e;var L,O=x[w],z=m[C];Array.isArray(z[0])&&(z=m[w]),3===z.length?z=[z[0],z[1],z[2],1]:4===z.length&&(z=[z[0],z[1],z[2],z[3]],!this.hasAlpha&&z[3]<1&&(this.hasAlpha=!0)),!isNaN(O[0][C])&&!isNaN(O[1][C])&&(O[0][C]<0&&((L=E.slice())[C]+=O[0][C],v.push(E[0],E[1],E[2],z[0],z[1],z[2],z[3],0,0,0,L[0],L[1],L[2],z[0],z[1],z[2],z[3],0,0,0),h(this.bounds,L),f+=2+y(v,L,z,C)),O[1][C]>0&&((L=E.slice())[C]+=O[1][C],v.push(E[0],E[1],E[2],z[0],z[1],z[2],z[3],0,0,0,L[0],L[1],L[2],z[0],z[1],z[2],z[3],0,0,0),h(this.bounds,L),f+=2+y(v,L,z,C)))}this.lineCount[C]=f-this.lineOffset[C]}this.buffer.update(v)}},c.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},3436:function(p,l,t){"use strict";var i=t(3236),r=t(9405),n=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * (view * worldPosition);\n  fragColor           = color;\n  fragPosition        = position;\n}"]),a=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);p.exports=function(s){return r(s,n,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},2260:function(p,l,t){"use strict";var i=t(7766);p.exports=function(_,f,C,w){r||(r=_.FRAMEBUFFER_UNSUPPORTED,n=_.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,a=_.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,s=_.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var E=_.getExtension("WEBGL_draw_buffers");if(!c&&E&&function(U,Z){var N=U.getParameter(Z.MAX_COLOR_ATTACHMENTS_WEBGL);c=new Array(N+1);for(var G=0;G<=N;++G){for(var W=new Array(N),ae=0;ae<G;++ae)W[ae]=U.COLOR_ATTACHMENT0+ae;for(ae=G;ae<N;++ae)W[ae]=U.NONE;c[G]=W}}(_,E),Array.isArray(f)&&(w=C,C=0|f[1],f=0|f[0]),"number"!=typeof f)throw new Error("gl-fbo: Missing shape parameter");var P=_.getParameter(_.MAX_RENDERBUFFER_SIZE);if(f<0||f>P||C<0||C>P)throw new Error("gl-fbo: Parameters are too large for FBO");var L=1;if("color"in(w=w||{})){if((L=Math.max(0|w.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(L>1){if(!E)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(L>_.getParameter(E.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+L+" draw buffers")}}var O=_.UNSIGNED_BYTE,z=_.getExtension("OES_texture_float");if(w.float&&L>0){if(!z)throw new Error("gl-fbo: Context does not support floating point textures");O=_.FLOAT}else w.preferFloat&&L>0&&z&&(O=_.FLOAT);var V=!0;"depth"in w&&(V=!!w.depth);var R=!1;return"stencil"in w&&(R=!!w.stencil),new g(_,f,C,O,L,V,R,E)};var r,n,a,s,c=null;function h(_){return[_.getParameter(_.FRAMEBUFFER_BINDING),_.getParameter(_.RENDERBUFFER_BINDING),_.getParameter(_.TEXTURE_BINDING_2D)]}function u(_,f){_.bindFramebuffer(_.FRAMEBUFFER,f[0]),_.bindRenderbuffer(_.RENDERBUFFER,f[1]),_.bindTexture(_.TEXTURE_2D,f[2])}function y(_){switch(_){case r:throw new Error("gl-fbo: Framebuffer unsupported");case n:throw new Error("gl-fbo: Framebuffer incomplete attachment");case a:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case s:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function d(_,f,C,w,E,P){if(!w)return null;var L=i(_,f,C,E,w);return L.magFilter=_.NEAREST,L.minFilter=_.NEAREST,L.mipSamples=1,L.bind(),_.framebufferTexture2D(_.FRAMEBUFFER,P,_.TEXTURE_2D,L.handle,0),L}function m(_,f,C,w,E){var P=_.createRenderbuffer();return _.bindRenderbuffer(_.RENDERBUFFER,P),_.renderbufferStorage(_.RENDERBUFFER,w,f,C),_.framebufferRenderbuffer(_.FRAMEBUFFER,E,_.RENDERBUFFER,P),P}function g(_,f,C,w,E,P,L,O){this.gl=_,this._shape=[0|f,0|C],this._destroyed=!1,this._ext=O,this.color=new Array(E);for(var z=0;z<E;++z)this.color[z]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=w,this._useDepth=P,this._useStencil=L;var V=this,R=[0|f,0|C];Object.defineProperties(R,{0:{get:function(){return V._shape[0]},set:function(U){return V.width=U}},1:{get:function(){return V._shape[1]},set:function(U){return V.height=U}}}),this._shapeVector=R,function(U){var Z=h(U.gl),N=U.gl,G=U.handle=N.createFramebuffer(),W=U._shape[0],ae=U._shape[1],re=U.color.length,ne=U._ext,Q=U._useStencil,$=U._useDepth,X=U._colorType;N.bindFramebuffer(N.FRAMEBUFFER,G);for(var oe=0;oe<re;++oe)U.color[oe]=d(N,W,ae,X,N.RGBA,N.COLOR_ATTACHMENT0+oe);0===re?(U._color_rb=m(N,W,ae,N.RGBA4,N.COLOR_ATTACHMENT0),ne&&ne.drawBuffersWEBGL(c[0])):re>1&&ne.drawBuffersWEBGL(c[re]);var fe=N.getExtension("WEBGL_depth_texture");fe?Q?U.depth=d(N,W,ae,fe.UNSIGNED_INT_24_8_WEBGL,N.DEPTH_STENCIL,N.DEPTH_STENCIL_ATTACHMENT):$&&(U.depth=d(N,W,ae,N.UNSIGNED_SHORT,N.DEPTH_COMPONENT,N.DEPTH_ATTACHMENT)):$&&Q?U._depth_rb=m(N,W,ae,N.DEPTH_STENCIL,N.DEPTH_STENCIL_ATTACHMENT):$?U._depth_rb=m(N,W,ae,N.DEPTH_COMPONENT16,N.DEPTH_ATTACHMENT):Q&&(U._depth_rb=m(N,W,ae,N.STENCIL_INDEX,N.STENCIL_ATTACHMENT));var ue=N.checkFramebufferStatus(N.FRAMEBUFFER);if(ue!==N.FRAMEBUFFER_COMPLETE){for(U._destroyed=!0,N.bindFramebuffer(N.FRAMEBUFFER,null),N.deleteFramebuffer(U.handle),U.handle=null,U.depth&&(U.depth.dispose(),U.depth=null),U._depth_rb&&(N.deleteRenderbuffer(U._depth_rb),U._depth_rb=null),oe=0;oe<U.color.length;++oe)U.color[oe].dispose(),U.color[oe]=null;U._color_rb&&(N.deleteRenderbuffer(U._color_rb),U._color_rb=null),u(N,Z),y(ue)}u(N,Z)}(this)}var x=g.prototype;function v(_,f,C){if(_._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(_._shape[0]!==f||_._shape[1]!==C){var w=_.gl,E=w.getParameter(w.MAX_RENDERBUFFER_SIZE);if(f<0||f>E||C<0||C>E)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");_._shape[0]=f,_._shape[1]=C;for(var P=h(w),L=0;L<_.color.length;++L)_.color[L].shape=_._shape;_._color_rb&&(w.bindRenderbuffer(w.RENDERBUFFER,_._color_rb),w.renderbufferStorage(w.RENDERBUFFER,w.RGBA4,_._shape[0],_._shape[1])),_.depth&&(_.depth.shape=_._shape),_._depth_rb&&(w.bindRenderbuffer(w.RENDERBUFFER,_._depth_rb),_._useDepth&&_._useStencil?w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_STENCIL,_._shape[0],_._shape[1]):_._useDepth?w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_COMPONENT16,_._shape[0],_._shape[1]):_._useStencil&&w.renderbufferStorage(w.RENDERBUFFER,w.STENCIL_INDEX,_._shape[0],_._shape[1])),w.bindFramebuffer(w.FRAMEBUFFER,_.handle);var O=w.checkFramebufferStatus(w.FRAMEBUFFER);O!==w.FRAMEBUFFER_COMPLETE&&(_.dispose(),u(w,P),y(O)),u(w,P)}}Object.defineProperties(x,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(_){if(Array.isArray(_)||(_=[0|_,0|_]),2!==_.length)throw new Error("gl-fbo: Shape vector must be length 2");var f=0|_[0],C=0|_[1];return v(this,f,C),[f,C]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(_){return v(this,_|=0,this._shape[1]),_},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(_){return v(this,this._shape[0],_|=0),_},enumerable:!1}}),x.bind=function(){if(!this._destroyed){var _=this.gl;_.bindFramebuffer(_.FRAMEBUFFER,this.handle),_.viewport(0,0,this._shape[0],this._shape[1])}},x.dispose=function(){if(!this._destroyed){this._destroyed=!0;var _=this.gl;_.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(_.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var f=0;f<this.color.length;++f)this.color[f].dispose(),this.color[f]=null;this._color_rb&&(_.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},2992:function(p,l,t){var i=t(3387).sprintf,r=t(5171),n=t(1848),a=t(1085);p.exports=function(s,c,h){"use strict";var u=n(c)||"of unknown name (see npm glsl-shader-name)",y="unknown type";void 0!==h&&(y=h===r.FRAGMENT_SHADER?"fragment":"vertex");for(var d=i("Error compiling %s shader %s:\n",y,u),m=i("%s%s",d,s),g=s.split("\n"),x={},v=0;v<g.length;v++){var _=g[v];if(""!==_&&"\0"!==_){var f=parseInt(_.split(":")[2]);if(isNaN(f))throw new Error(i("Could not parse error: %s",_));x[f]=_}}var C=a(c).split("\n");for(v=0;v<C.length;v++)if((x[v+3]||x[v+2]||x[v+1])&&(d+=C[v]+"\n",x[v+1])){var w=x[v+1];w=w.substr(w.split(":",3).join(":").length+1).trim(),d+=i("^^^ %s\n\n",w)}return{long:d.trim(),short:m.trim()}}},2510:function(p,l,t){"use strict";p.exports=function(m,g){var x=m.gl,v=new h(m,a(x,c.vertex,c.fragment),a(x,c.pickVertex,c.pickFragment),s(x),s(x),s(x),s(x));return v.update(g),m.addObject(v),v};var i=t(2478),r=t(7762),n=t(1888),a=t(9405),s=t(2762),c=t(6768);function h(m,g,x,v,_,f,C){this.plot=m,this.shader=g,this.pickShader=x,this.positionBuffer=v,this.weightBuffer=_,this.colorBuffer=f,this.idBuffer=C,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var u,m,g,y=h.prototype,d=[0,0,1,0,0,1,1,0,1,1,0,1];y.draw=(u=[1,0,0,0,1,0,0,0,1],function(){var m=this.plot,g=this.shader,x=this.bounds,v=this.numVertices;if(!(v<=0)){var _=m.gl,f=m.dataBox,w=x[3]-x[1],E=f[2]-f[0],P=f[3]-f[1];u[0]=2*(x[2]-x[0])/E,u[4]=2*w/P,u[6]=2*(x[0]-f[0])/E-1,u[7]=2*(x[1]-f[1])/P-1,g.bind();var L=g.uniforms;L.viewTransform=u,L.shape=this.shape;var O=g.attributes;this.positionBuffer.bind(),O.position.pointer(),this.weightBuffer.bind(),O.weight.pointer(_.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),O.color.pointer(_.UNSIGNED_BYTE,!0),_.drawArrays(_.TRIANGLES,0,v)}}),y.drawPick=(m=[1,0,0,0,1,0,0,0,1],g=[0,0,0,0],function(x){var v=this.plot,_=this.pickShader,f=this.bounds,C=this.numVertices;if(!(C<=0)){var w=v.gl,E=v.dataBox,L=f[3]-f[1],O=E[2]-E[0],z=E[3]-E[1];m[0]=2*(f[2]-f[0])/O,m[4]=2*L/z,m[6]=2*(f[0]-E[0])/O-1,m[7]=2*(f[1]-E[1])/z-1;for(var V=0;V<4;++V)g[V]=x>>8*V&255;this.pickOffset=x,_.bind();var R=_.uniforms;R.viewTransform=m,R.pickOffset=g,R.shape=this.shape;var U=_.attributes;return this.positionBuffer.bind(),U.position.pointer(),this.weightBuffer.bind(),U.weight.pointer(w.UNSIGNED_BYTE,!1),this.idBuffer.bind(),U.pickId.pointer(w.UNSIGNED_BYTE,!1),w.drawArrays(w.TRIANGLES,0,C),x+this.shape[0]*this.shape[1]}}),y.pick=function(m,g,x){var v=this.pickOffset;if(x<v||x>=v+this.shape[0]*this.shape[1])return null;var f=x-v;return{object:this,pointId:f,dataCoord:[this.xData[f%this.shape[0]],this.yData[f/this.shape[0]|0]]}},y.update=function(m){var g=(m=m||{}).shape||[0,0],x=m.x||r(g[0]),v=m.y||r(g[1]),_=m.z||new Float32Array(g[0]*g[1]),f=!1!==m.zsmooth;this.xData=x,this.yData=v;var C,w,E,P,L=m.colorLevels||[0],O=m.colorValues||[0,0,0,1],z=L.length,V=this.bounds;f?(C=V[0]=x[0],w=V[1]=v[0],E=V[2]=x[x.length-1],P=V[3]=v[v.length-1]):(C=V[0]=x[0]+(x[1]-x[0])/2,w=V[1]=v[0]+(v[1]-v[0])/2,E=V[2]=x[x.length-1]+(x[x.length-1]-x[x.length-2])/2,P=V[3]=v[v.length-1]+(v[v.length-1]-v[v.length-2])/2);var R=1/(E-C),U=1/(P-w),Z=g[0],N=g[1];this.shape=[Z,N];var G=(f?(Z-1)*(N-1):Z*N)*(d.length>>>1);this.numVertices=G;for(var W=n.mallocUint8(4*G),ae=n.mallocFloat32(2*G),re=n.mallocUint8(2*G),ne=n.mallocUint32(G),Q=0,$=f?Z-1:Z,X=f?N-1:N,oe=0;oe<X;++oe){var fe,ue;f?(fe=U*(v[oe]-w),ue=U*(v[oe+1]-w)):(fe=oe<N-1?U*(v[oe]-(v[oe+1]-v[oe])/2-w):U*(v[oe]-(v[oe]-v[oe-1])/2-w),ue=oe<N-1?U*(v[oe]+(v[oe+1]-v[oe])/2-w):U*(v[oe]+(v[oe]-v[oe-1])/2-w));for(var ge=0;ge<$;++ge){var we,Te;f?(we=R*(x[ge]-C),Te=R*(x[ge+1]-C)):(we=ge<Z-1?R*(x[ge]-(x[ge+1]-x[ge])/2-C):R*(x[ge]-(x[ge]-x[ge-1])/2-C),Te=ge<Z-1?R*(x[ge]+(x[ge+1]-x[ge])/2-C):R*(x[ge]+(x[ge]-x[ge-1])/2-C));for(var xe=0;xe<d.length;xe+=2){var ye,_e,Ie,De,be=d[xe],he=d[xe+1],ce=_[f?(oe+he)*Z+(ge+be):oe*Z+ge],me=i.le(L,ce);if(me<0)ye=O[0],_e=O[1],Ie=O[2],De=O[3];else if(me===z-1)ye=O[4*z-4],_e=O[4*z-3],Ie=O[4*z-2],De=O[4*z-1];else{var Pe=(ce-L[me])/(L[me+1]-L[me]),Ae=1-Pe,Ce=4*me,Oe=4*(me+1);ye=Ae*O[Ce]+Pe*O[Oe],_e=Ae*O[Ce+1]+Pe*O[Oe+1],Ie=Ae*O[Ce+2]+Pe*O[Oe+2],De=Ae*O[Ce+3]+Pe*O[Oe+3]}W[4*Q]=255*ye,W[4*Q+1]=255*_e,W[4*Q+2]=255*Ie,W[4*Q+3]=255*De,ae[2*Q]=.5*we+.5*Te,ae[2*Q+1]=.5*fe+.5*ue,re[2*Q]=be,re[2*Q+1]=he,ne[Q]=oe*Z+ge,Q+=1}}}this.positionBuffer.update(ae),this.weightBuffer.update(re),this.colorBuffer.update(W),this.idBuffer.update(ne),n.free(ae),n.free(W),n.free(re),n.free(ne)},y.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},6768:function(p,l,t){"use strict";var i=t(3236);p.exports={fragment:i(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:i(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},7319:function(p,l,t){var i=t(3236),r=t(9405),n=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * (view * (model * vec4(p, 1.0)));\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),a=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),s=i(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),c=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];l.createShader=function(h){return r(h,n,a,null,c)},l.createPickShader=function(h){return r(h,n,s,null,c)}},5714:function(p,l,t){"use strict";p.exports=function(C){var w=C.gl||C.scene&&C.scene.gl,E=y(w);E.attributes.position.location=0,E.attributes.nextPosition.location=1,E.attributes.arcLength.location=2,E.attributes.lineWidth.location=3,E.attributes.color.location=4;var P=d(w);P.attributes.position.location=0,P.attributes.nextPosition.location=1,P.attributes.arcLength.location=2,P.attributes.lineWidth.location=3,P.attributes.color.location=4;for(var L=i(w),O=r(w,[{buffer:L,size:3,offset:0,stride:48},{buffer:L,size:3,offset:12,stride:48},{buffer:L,size:1,offset:24,stride:48},{buffer:L,size:1,offset:28,stride:48},{buffer:L,size:4,offset:32,stride:48}]),z=h(new Array(1024),[256,1,4]),V=0;V<1024;++V)z.data[V]=255;var R=n(w,z);R.wrap=w.REPEAT;var U=new _(w,E,P,L,O,R);return U.update(C),U};var i=t(2762),r=t(8116),n=t(7766),a=new Uint8Array(4),s=new Float32Array(a.buffer),c=t(2478),h=t(9618),u=t(7319),y=u.createShader,d=u.createPickShader,m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function g(C,w){for(var E=0,P=0;P<3;++P){var L=C[P]-w[P];E+=L*L}return Math.sqrt(E)}function x(C){for(var w=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)w[0][E]=Math.max(C[0][E],w[0][E]),w[1][E]=Math.min(C[1][E],w[1][E]);return w}function v(C,w,E,P){this.arcLength=C,this.position=w,this.index=E,this.dataCoordinate=P}function _(C,w,E,P,L,O){this.gl=C,this.shader=w,this.pickShader=E,this.buffer=P,this.vao=L,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=O,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var f=_.prototype;f.isTransparent=function(){return this.hasAlpha},f.isOpaque=function(){return!this.hasAlpha},f.pickSlots=1,f.setPickBase=function(C){this.pickId=C},f.drawTransparent=f.draw=function(C){if(this.vertexCount){var w=this.gl,E=this.shader,P=this.vao;E.bind(),E.uniforms={model:C.model||m,view:C.view||m,projection:C.projection||m,clipBounds:x(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[w.drawingBufferWidth,w.drawingBufferHeight],pixelRatio:this.pixelRatio},P.bind(),P.draw(w.TRIANGLE_STRIP,this.vertexCount),P.unbind()}},f.drawPick=function(C){if(this.vertexCount){var w=this.gl,E=this.pickShader,P=this.vao;E.bind(),E.uniforms={model:C.model||m,view:C.view||m,projection:C.projection||m,pickId:this.pickId,clipBounds:x(this.clipBounds),screenShape:[w.drawingBufferWidth,w.drawingBufferHeight],pixelRatio:this.pixelRatio},P.bind(),P.draw(w.TRIANGLE_STRIP,this.vertexCount),P.unbind()}},f.update=function(C){var w,E;this.dirty=!0;var P=!!C.connectGaps;"dashScale"in C&&(this.dashScale=C.dashScale),this.hasAlpha=!1,"opacity"in C&&(this.opacity=+C.opacity,this.opacity<1&&(this.hasAlpha=!0));var L=[],O=[],z=[],V=0,R=0,U=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],Z=C.position||C.positions;if(Z){var N=C.color||C.colors||[0,0,0,1],G=C.lineWidth||1,W=!1;e:for(w=1;w<Z.length;++w){var ae,re,ne,Q=Z[w-1],$=Z[w];for(O.push(V),z.push(Q.slice()),E=0;E<3;++E){if(isNaN(Q[E])||isNaN($[E])||!isFinite(Q[E])||!isFinite($[E])){if(!P&&L.length>0){for(var X=0;X<24;++X)L.push(L[L.length-12]);R+=2,W=!0}continue e}U[0][E]=Math.min(U[0][E],Q[E],$[E]),U[1][E]=Math.max(U[1][E],Q[E],$[E])}Array.isArray(N[0])?(ae=N.length>w-1?N[w-1]:N.length>0?N[N.length-1]:[0,0,0,1],re=N.length>w?N[w]:N.length>0?N[N.length-1]:[0,0,0,1]):ae=re=N,3===ae.length&&(ae=[ae[0],ae[1],ae[2],1]),3===re.length&&(re=[re[0],re[1],re[2],1]),!this.hasAlpha&&ae[3]<1&&(this.hasAlpha=!0),ne=Array.isArray(G)?G.length>w-1?G[w-1]:G.length>0?G[G.length-1]:[0,0,0,1]:G;var oe=V;if(V+=g(Q,$),W){for(E=0;E<2;++E)L.push(Q[0],Q[1],Q[2],$[0],$[1],$[2],oe,ne,ae[0],ae[1],ae[2],ae[3]);R+=2,W=!1}L.push(Q[0],Q[1],Q[2],$[0],$[1],$[2],oe,ne,ae[0],ae[1],ae[2],ae[3],Q[0],Q[1],Q[2],$[0],$[1],$[2],oe,-ne,ae[0],ae[1],ae[2],ae[3],$[0],$[1],$[2],Q[0],Q[1],Q[2],V,-ne,re[0],re[1],re[2],re[3],$[0],$[1],$[2],Q[0],Q[1],Q[2],V,ne,re[0],re[1],re[2],re[3]),R+=4}}if(this.buffer.update(L),O.push(V),z.push(Z[Z.length-1].slice()),this.bounds=U,this.vertexCount=R,this.points=z,this.arcLength=O,"dashes"in C){var fe=C.dashes.slice();for(fe.unshift(0),w=1;w<fe.length;++w)fe[w]=fe[w-1]+fe[w];var ue=h(new Array(1024),[256,1,4]);for(w=0;w<256;++w){for(E=0;E<4;++E)ue.set(w,0,E,0);1&c.le(fe,fe[fe.length-1]*w/255)?ue.set(w,0,0,0):ue.set(w,0,0,255)}this.texture.setPixels(ue)}},f.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},f.pick=function(C){if(!C||C.id!==this.pickId)return null;var Z,N,G,w=(Z=C.value[0],N=C.value[1],G=C.value[2],a[0]=0,a[1]=G,a[2]=N,a[3]=Z,s[0]),E=c.le(this.arcLength,w);if(E<0)return null;if(E===this.arcLength.length-1)return new v(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),E);for(var P=this.points[E],L=this.points[Math.min(E+1,this.points.length-1)],O=(w-this.arcLength[E])/(this.arcLength[E+1]-this.arcLength[E]),z=1-O,V=[0,0,0],R=0;R<3;++R)V[R]=z*P[R]+O*L[R];var U=Math.min(O<.5?E:E+1,this.points.length-1);return new v(w,V,U,this.points[U])}},1903:function(p){p.exports=function(l){var t=new Float32Array(16);return t[0]=l[0],t[1]=l[1],t[2]=l[2],t[3]=l[3],t[4]=l[4],t[5]=l[5],t[6]=l[6],t[7]=l[7],t[8]=l[8],t[9]=l[9],t[10]=l[10],t[11]=l[11],t[12]=l[12],t[13]=l[13],t[14]=l[14],t[15]=l[15],t}},6864:function(p){p.exports=function(){var l=new Float32Array(16);return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}},9921:function(p){p.exports=function(l){var t=l[0],i=l[1],r=l[2],n=l[3],a=l[4],s=l[5],c=l[6],h=l[7],u=l[8],y=l[9],d=l[10],m=l[11],g=l[12],x=l[13],v=l[14],_=l[15];return(t*s-i*a)*(d*_-m*v)-(t*c-r*a)*(y*_-m*x)+(t*h-n*a)*(y*v-d*x)+(i*c-r*s)*(u*_-m*g)-(i*h-n*s)*(u*v-d*g)+(r*h-n*c)*(u*x-y*g)}},7399:function(p){p.exports=function(l,t){var i=t[0],r=t[1],n=t[2],a=t[3],s=i+i,c=r+r,h=n+n,u=i*s,y=r*s,d=r*c,m=n*s,g=n*c,x=n*h,v=a*s,_=a*c,f=a*h;return l[0]=1-d-x,l[1]=y+f,l[2]=m-_,l[3]=0,l[4]=y-f,l[5]=1-u-x,l[6]=g+v,l[7]=0,l[8]=m+_,l[9]=g-v,l[10]=1-u-d,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}},6743:function(p){p.exports=function(l,t,i){var r=t[0],n=t[1],a=t[2],s=t[3],c=r+r,h=n+n,u=a+a,y=r*c,d=r*h,m=r*u,g=n*h,x=n*u,v=a*u,_=s*c,f=s*h,C=s*u;return l[0]=1-(g+v),l[1]=d+C,l[2]=m-f,l[3]=0,l[4]=d-C,l[5]=1-(y+v),l[6]=x+_,l[7]=0,l[8]=m+f,l[9]=x-_,l[10]=1-(y+g),l[11]=0,l[12]=i[0],l[13]=i[1],l[14]=i[2],l[15]=1,l}},7894:function(p){p.exports=function(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}},7608:function(p){p.exports=function(l,t){var i=t[0],r=t[1],n=t[2],a=t[3],s=t[4],c=t[5],h=t[6],u=t[7],y=t[8],d=t[9],m=t[10],g=t[11],x=t[12],v=t[13],_=t[14],f=t[15],C=i*c-r*s,w=i*h-n*s,E=i*u-a*s,P=r*h-n*c,L=r*u-a*c,O=n*u-a*h,z=y*v-d*x,V=y*_-m*x,R=y*f-g*x,U=d*_-m*v,Z=d*f-g*v,N=m*f-g*_,G=C*N-w*Z+E*U+P*R-L*V+O*z;return G?(l[0]=(c*N-h*Z+u*U)*(G=1/G),l[1]=(n*Z-r*N-a*U)*G,l[2]=(v*O-_*L+f*P)*G,l[3]=(m*L-d*O-g*P)*G,l[4]=(h*R-s*N-u*V)*G,l[5]=(i*N-n*R+a*V)*G,l[6]=(_*E-x*O-f*w)*G,l[7]=(y*O-m*E+g*w)*G,l[8]=(s*Z-c*R+u*z)*G,l[9]=(r*R-i*Z-a*z)*G,l[10]=(x*L-v*E+f*C)*G,l[11]=(d*E-y*L-g*C)*G,l[12]=(c*V-s*U-h*z)*G,l[13]=(i*U-r*V+n*z)*G,l[14]=(v*w-x*P-_*C)*G,l[15]=(y*P-d*w+m*C)*G,l):null}},6582:function(p,l,t){var i=t(7894);p.exports=function(r,n,a,s){var c,h,u,y,d,m,g,x,v,_,f=n[0],C=n[1],w=n[2],E=s[0],P=s[1],L=s[2],O=a[0],z=a[1],V=a[2];return Math.abs(f-O)<1e-6&&Math.abs(C-z)<1e-6&&Math.abs(w-V)<1e-6?i(r):(g=f-O,x=C-z,v=w-V,c=P*(v*=_=1/Math.sqrt(g*g+x*x+v*v))-L*(x*=_),h=L*(g*=_)-E*v,u=E*x-P*g,(_=Math.sqrt(c*c+h*h+u*u))?(c*=_=1/_,h*=_,u*=_):(c=0,h=0,u=0),y=x*u-v*h,d=v*c-g*u,m=g*h-x*c,(_=Math.sqrt(y*y+d*d+m*m))?(y*=_=1/_,d*=_,m*=_):(y=0,d=0,m=0),r[0]=c,r[1]=y,r[2]=g,r[3]=0,r[4]=h,r[5]=d,r[6]=x,r[7]=0,r[8]=u,r[9]=m,r[10]=v,r[11]=0,r[12]=-(c*f+h*C+u*w),r[13]=-(y*f+d*C+m*w),r[14]=-(g*f+x*C+v*w),r[15]=1,r)}},6760:function(p){p.exports=function(l,t,i){var r=t[0],n=t[1],a=t[2],s=t[3],c=t[4],h=t[5],u=t[6],y=t[7],d=t[8],m=t[9],g=t[10],x=t[11],v=t[12],_=t[13],f=t[14],C=t[15],w=i[0],E=i[1],P=i[2],L=i[3];return l[0]=w*r+E*c+P*d+L*v,l[1]=w*n+E*h+P*m+L*_,l[2]=w*a+E*u+P*g+L*f,l[3]=w*s+E*y+P*x+L*C,l[4]=(w=i[4])*r+(E=i[5])*c+(P=i[6])*d+(L=i[7])*v,l[5]=w*n+E*h+P*m+L*_,l[6]=w*a+E*u+P*g+L*f,l[7]=w*s+E*y+P*x+L*C,l[8]=(w=i[8])*r+(E=i[9])*c+(P=i[10])*d+(L=i[11])*v,l[9]=w*n+E*h+P*m+L*_,l[10]=w*a+E*u+P*g+L*f,l[11]=w*s+E*y+P*x+L*C,l[12]=(w=i[12])*r+(E=i[13])*c+(P=i[14])*d+(L=i[15])*v,l[13]=w*n+E*h+P*m+L*_,l[14]=w*a+E*u+P*g+L*f,l[15]=w*s+E*y+P*x+L*C,l}},4040:function(p){p.exports=function(l,t,i,r,n,a,s){var c=1/(t-i),h=1/(r-n),u=1/(a-s);return l[0]=-2*c,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*h,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*u,l[11]=0,l[12]=(t+i)*c,l[13]=(n+r)*h,l[14]=(s+a)*u,l[15]=1,l}},4772:function(p){p.exports=function(l,t,i,r,n){var a=1/Math.tan(t/2),s=1/(r-n);return l[0]=a/i,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=a,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=(n+r)*s,l[11]=-1,l[12]=0,l[13]=0,l[14]=2*n*r*s,l[15]=0,l}},6079:function(p){p.exports=function(l,t,i,r){var n,a,s,c,h,u,y,d,m,g,x,v,_,f,C,w,E,P,L,O,z,V,R,U,Z=r[0],N=r[1],G=r[2],W=Math.sqrt(Z*Z+N*N+G*G);return Math.abs(W)<1e-6?null:(Z*=W=1/W,N*=W,G*=W,n=Math.sin(i),s=1-(a=Math.cos(i)),h=t[1],u=t[2],y=t[3],m=t[5],g=t[6],x=t[7],_=t[9],f=t[10],C=t[11],L=Z*N*s-G*n,O=N*N*s+a,z=G*N*s+Z*n,V=Z*G*s+N*n,R=N*G*s-Z*n,U=G*G*s+a,l[0]=(c=t[0])*(w=Z*Z*s+a)+(d=t[4])*(E=N*Z*s+G*n)+(v=t[8])*(P=G*Z*s-N*n),l[1]=h*w+m*E+_*P,l[2]=u*w+g*E+f*P,l[3]=y*w+x*E+C*P,l[4]=c*L+d*O+v*z,l[5]=h*L+m*O+_*z,l[6]=u*L+g*O+f*z,l[7]=y*L+x*O+C*z,l[8]=c*V+d*R+v*U,l[9]=h*V+m*R+_*U,l[10]=u*V+g*R+f*U,l[11]=y*V+x*R+C*U,t!==l&&(l[12]=t[12],l[13]=t[13],l[14]=t[14],l[15]=t[15]),l)}},5567:function(p){p.exports=function(l,t,i){var r=Math.sin(i),n=Math.cos(i),a=t[4],s=t[5],c=t[6],h=t[7],u=t[8],y=t[9],d=t[10],m=t[11];return t!==l&&(l[0]=t[0],l[1]=t[1],l[2]=t[2],l[3]=t[3],l[12]=t[12],l[13]=t[13],l[14]=t[14],l[15]=t[15]),l[4]=a*n+u*r,l[5]=s*n+y*r,l[6]=c*n+d*r,l[7]=h*n+m*r,l[8]=u*n-a*r,l[9]=y*n-s*r,l[10]=d*n-c*r,l[11]=m*n-h*r,l}},2408:function(p){p.exports=function(l,t,i){var r=Math.sin(i),n=Math.cos(i),a=t[0],s=t[1],c=t[2],h=t[3],u=t[8],y=t[9],d=t[10],m=t[11];return t!==l&&(l[4]=t[4],l[5]=t[5],l[6]=t[6],l[7]=t[7],l[12]=t[12],l[13]=t[13],l[14]=t[14],l[15]=t[15]),l[0]=a*n-u*r,l[1]=s*n-y*r,l[2]=c*n-d*r,l[3]=h*n-m*r,l[8]=a*r+u*n,l[9]=s*r+y*n,l[10]=c*r+d*n,l[11]=h*r+m*n,l}},7089:function(p){p.exports=function(l,t,i){var r=Math.sin(i),n=Math.cos(i),a=t[0],s=t[1],c=t[2],h=t[3],u=t[4],y=t[5],d=t[6],m=t[7];return t!==l&&(l[8]=t[8],l[9]=t[9],l[10]=t[10],l[11]=t[11],l[12]=t[12],l[13]=t[13],l[14]=t[14],l[15]=t[15]),l[0]=a*n+u*r,l[1]=s*n+y*r,l[2]=c*n+d*r,l[3]=h*n+m*r,l[4]=u*n-a*r,l[5]=y*n-s*r,l[6]=d*n-c*r,l[7]=m*n-h*r,l}},2504:function(p){p.exports=function(l,t,i){var r=i[0],n=i[1],a=i[2];return l[0]=t[0]*r,l[1]=t[1]*r,l[2]=t[2]*r,l[3]=t[3]*r,l[4]=t[4]*n,l[5]=t[5]*n,l[6]=t[6]*n,l[7]=t[7]*n,l[8]=t[8]*a,l[9]=t[9]*a,l[10]=t[10]*a,l[11]=t[11]*a,l[12]=t[12],l[13]=t[13],l[14]=t[14],l[15]=t[15],l}},7656:function(p){p.exports=function(l,t,i){var r,n,a,s,c,h,u,y,d,m,g,x,v=i[0],_=i[1],f=i[2];return t===l?(l[12]=t[0]*v+t[4]*_+t[8]*f+t[12],l[13]=t[1]*v+t[5]*_+t[9]*f+t[13],l[14]=t[2]*v+t[6]*_+t[10]*f+t[14],l[15]=t[3]*v+t[7]*_+t[11]*f+t[15]):(n=t[1],a=t[2],s=t[3],c=t[4],h=t[5],u=t[6],y=t[7],d=t[8],m=t[9],g=t[10],x=t[11],l[0]=r=t[0],l[1]=n,l[2]=a,l[3]=s,l[4]=c,l[5]=h,l[6]=u,l[7]=y,l[8]=d,l[9]=m,l[10]=g,l[11]=x,l[12]=r*v+c*_+d*f+t[12],l[13]=n*v+h*_+m*f+t[13],l[14]=a*v+u*_+g*f+t[14],l[15]=s*v+y*_+x*f+t[15]),l}},5665:function(p){p.exports=function(l,t){if(l===t){var i=t[1],r=t[2],n=t[3],a=t[6],s=t[7],c=t[11];l[1]=t[4],l[2]=t[8],l[3]=t[12],l[4]=i,l[6]=t[9],l[7]=t[13],l[8]=r,l[9]=a,l[11]=t[14],l[12]=n,l[13]=s,l[14]=c}else l[0]=t[0],l[1]=t[4],l[2]=t[8],l[3]=t[12],l[4]=t[1],l[5]=t[5],l[6]=t[9],l[7]=t[13],l[8]=t[2],l[9]=t[6],l[10]=t[10],l[11]=t[14],l[12]=t[3],l[13]=t[7],l[14]=t[11],l[15]=t[15];return l}},7626:function(p,l,t){"use strict";var i=t(2642),r=t(9346);function n(c,h){for(var u=[0,0,0,0],y=0;y<4;++y)for(var d=0;d<4;++d)u[d]+=c[4*y+d]*h[y];return u}function a(c,h,u,y,d){for(var m=n(y,n(u,n(h,[c[0],c[1],c[2],1]))),g=0;g<3;++g)m[g]/=m[3];return[.5*d[0]*(1+m[0]),.5*d[1]*(1-m[1])]}function s(c,h){for(var u=[0,0,0],y=0;y<c.length;++y)for(var d=c[y],m=h[y],g=0;g<3;++g)u[g]+=m*d[g];return u}p.exports=function(c,h,u,y,d,m){if(1===c.length)return[0,c[0].slice()];for(var g=new Array(c.length),x=0;x<c.length;++x)g[x]=a(c[x],u,y,d,m);var v=0,_=1/0;for(x=0;x<g.length;++x){for(var f=0,C=0;C<2;++C)f+=Math.pow(g[x][C]-h[C],2);f<_&&(_=f,v=x)}var w=function(P,L){if(2===P.length){for(var O=0,z=0,V=0;V<2;++V)O+=Math.pow(L[V]-P[0][V],2),z+=Math.pow(L[V]-P[1][V],2);return(O=Math.sqrt(O))+(z=Math.sqrt(z))<1e-6?[1,0]:[z/(O+z),O/(z+O)]}if(3===P.length){var R=[0,0];return r(P[0],P[1],P[2],L,R),i(P,R)}return[]}(g,h),E=0;for(x=0;x<3;++x){if(w[x]<-.001||w[x]>1.0001)return null;E+=w[x]}return Math.abs(E-1)>.001?null:[v,s(c,w),w]}},840:function(p,l,t){var i=t(3236),r=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * (view * (model * vec4(p, 1.0)));\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),n=i(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),a=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * (view * (model * vec4(position, 1.0)));\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),s=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),c=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * (view * (model * vec4(position, 1.0)));\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),h=i(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),u=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * (view * (model * vec4(position, 1.0)));\n  f_id        = id;\n  f_position  = position;\n}"]),y=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),d=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * (view * (model * vec4(position, 1.0)));\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),m=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * (view * (model * vec4(position, 1.0)));\n}"]),g=i(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);l.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},l.wireShader={vertex:a,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},l.pointShader={vertex:c,fragment:h,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},l.pickShader={vertex:u,fragment:y,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},l.pointPickShader={vertex:d,fragment:y,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},l.contourShader={vertex:m,fragment:g,attributes:[{name:"position",type:"vec3"}]}},7201:function(p,l,t){"use strict";var i=t(9405),r=t(2762),n=t(8116),a=t(7766),s=t(8406),c=t(6760),h=t(7608),u=t(9618),y=t(6729),d=t(7765),m=t(1888),g=t(840),x=t(7626),v=g.meshShader,_=g.wireShader,f=g.pointShader,C=g.pickShader,w=g.pointPickShader,E=g.contourShader,P=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function L(N,G,W,ae,re,ne,Q,$,X,oe,fe,ue,ge,we,Te,xe,ye,_e,Ie,De,be,he,ce,me,Pe,Ae,Ce){this.gl=N,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=G,this.dirty=!0,this.triShader=W,this.lineShader=ae,this.pointShader=re,this.pickShader=ne,this.pointPickShader=Q,this.contourShader=$,this.trianglePositions=X,this.triangleColors=fe,this.triangleNormals=ge,this.triangleUVs=ue,this.triangleIds=oe,this.triangleVAO=we,this.triangleCount=0,this.lineWidth=1,this.edgePositions=Te,this.edgeColors=ye,this.edgeUVs=_e,this.edgeIds=xe,this.edgeVAO=Ie,this.edgeCount=0,this.pointPositions=De,this.pointColors=he,this.pointUVs=ce,this.pointSizes=me,this.pointIds=be,this.pointVAO=Pe,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Ae,this.contourVAO=Ce,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=P,this._view=P,this._projection=P,this._resolution=[1,1]}var O=L.prototype;function z(N,G){if(!G||!G.length)return 1;for(var W=0;W<G.length;++W){if(G.length<2)return 1;if(G[W][0]===N)return G[W][1];if(G[W][0]>N&&W>0){var ae=(G[W][0]-N)/(G[W][0]-G[W-1][0]);return G[W][1]*(1-ae)+ae*G[W-1][1]}}return 1}O.isOpaque=function(){return!this.hasAlpha},O.isTransparent=function(){return this.hasAlpha},O.pickSlots=1,O.setPickBase=function(N){this.pickId=N},O.highlight=function(N){if(N&&this.contourEnable){for(var G=d(this.cells,this.intensity,N.intensity),W=G.cells,ae=G.vertexIds,re=G.vertexWeights,ne=W.length,Q=m.mallocFloat32(6*ne),$=0,X=0;X<ne;++X)for(var oe=W[X],fe=0;fe<2;++fe){var ue=oe[0];2===oe.length&&(ue=oe[fe]);for(var Te=re[ue],xe=1-Te,ye=this.positions[ae[ue][0]],_e=this.positions[ae[ue][1]],Ie=0;Ie<3;++Ie)Q[$++]=Te*ye[Ie]+xe*_e[Ie]}this.contourCount=$/3|0,this.contourPositions.update(Q.subarray(0,$)),m.free(Q)}else this.contourCount=0},O.update=function(N){N=N||{};var G=this.gl;this.dirty=!0,"contourEnable"in N&&(this.contourEnable=N.contourEnable),"contourColor"in N&&(this.contourColor=N.contourColor),"lineWidth"in N&&(this.lineWidth=N.lineWidth),"lightPosition"in N&&(this.lightPosition=N.lightPosition),this.hasAlpha=!1,"opacity"in N&&(this.opacity=N.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in N&&(this.opacityscale=N.opacityscale,this.hasAlpha=!0),"ambient"in N&&(this.ambientLight=N.ambient),"diffuse"in N&&(this.diffuseLight=N.diffuse),"specular"in N&&(this.specularLight=N.specular),"roughness"in N&&(this.roughness=N.roughness),"fresnel"in N&&(this.fresnel=N.fresnel),N.texture?(this.texture.dispose(),this.texture=a(G,N.texture)):N.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=G.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=G.LINEAR,this.texture.setPixels(function(Vt,Ht){for(var zt=y({colormap:Vt,nshades:256,format:"rgba"}),Qe=new Uint8Array(1024),nt=0;nt<256;++nt){for(var We=zt[nt],et=0;et<3;++et)Qe[4*nt+et]=We[et];Qe[4*nt+3]=Ht?255*z(nt/255,Ht):255*We[3]}return u(Qe,[256,256,4],[4,0,1])}(N.colormap,this.opacityscale)),this.texture.generateMipmap());var W=N.cells,ae=N.positions;if(ae&&W){var re=[],ne=[],Q=[],$=[],X=[],oe=[],fe=[],ue=[],ge=[],we=[],Te=[],xe=[],ye=[],_e=[];this.cells=W,this.positions=ae;var Ie=N.vertexNormals,De=N.cellNormals,be=void 0===N.vertexNormalsEpsilon?1e-6:N.vertexNormalsEpsilon;N.useFacetNormals&&!De&&(De=s.faceNormals(W,ae,void 0===N.faceNormalsEpsilon?1e-6:N.faceNormalsEpsilon)),De||Ie||(Ie=s.vertexNormals(W,ae,be));var ce=N.vertexColors,me=N.cellColors,Pe=N.meshColor||[1,1,1,1],Ae=N.vertexUVs,Ce=N.vertexIntensity,Oe=N.cellUVs,Ne=N.cellIntensity,je=1/0,ve=-1/0;if(!Ae&&!Oe)if(Ce)if(N.vertexIntensityBounds)je=+N.vertexIntensityBounds[0],ve=+N.vertexIntensityBounds[1];else for(var Me=0;Me<Ce.length;++Me){var Le=Ce[Me];je=Math.min(je,Le),ve=Math.max(ve,Le)}else if(Ne)if(N.cellIntensityBounds)je=+N.cellIntensityBounds[0],ve=+N.cellIntensityBounds[1];else for(Me=0;Me<Ne.length;++Me)Le=Ne[Me],je=Math.min(je,Le),ve=Math.max(ve,Le);else for(Me=0;Me<ae.length;++Me)Le=ae[Me][2],je=Math.min(je,Le),ve=Math.max(ve,Le);this.intensity=Ce||Ne||function(Vt){for(var Ht=Vt.length,zt=new Array(Ht),Qe=0;Qe<Ht;++Qe)zt[Qe]=Vt[Qe][2];return zt}(ae),this.pickVertex=!(Ne||me);var Ue=N.pointSizes,ze=N.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],Me=0;Me<ae.length;++Me)for(var qe=ae[Me],Ke=0;Ke<3;++Ke)!isNaN(qe[Ke])&&isFinite(qe[Ke])&&(this.bounds[0][Ke]=Math.min(this.bounds[0][Ke],qe[Ke]),this.bounds[1][Ke]=Math.max(this.bounds[1][Ke],qe[Ke]));var it=0,ft=0,dt=0;e:for(Me=0;Me<W.length;++Me){var kt=W[Me];switch(kt.length){case 1:for(qe=ae[Tt=kt[0]],Ke=0;Ke<3;++Ke)if(isNaN(qe[Ke])||!isFinite(qe[Ke]))continue e;we.push(qe[0],qe[1],qe[2]),lt=ce?ce[Tt]:me?me[Me]:Pe,this.opacityscale&&Ce?ne.push(lt[0],lt[1],lt[2],this.opacity*z((Ce[Tt]-je)/(ve-je),this.opacityscale)):3===lt.length?Te.push(lt[0],lt[1],lt[2],this.opacity):(Te.push(lt[0],lt[1],lt[2],lt[3]*this.opacity),lt[3]<1&&(this.hasAlpha=!0)),xe.push((ot=Ae?Ae[Tt]:Ce?[(Ce[Tt]-je)/(ve-je),0]:Oe?Oe[Me]:Ne?[(Ne[Me]-je)/(ve-je),0]:[(qe[2]-je)/(ve-je),0])[0],ot[1]),ye.push(Ue?Ue[Tt]:ze),_e.push(Me),dt+=1;break;case 2:for(Ke=0;Ke<2;++Ke){qe=ae[Tt=kt[Ke]];for(var St=0;St<3;++St)if(isNaN(qe[St])||!isFinite(qe[St]))continue e}for(Ke=0;Ke<2;++Ke)qe=ae[Tt=kt[Ke]],oe.push(qe[0],qe[1],qe[2]),lt=ce?ce[Tt]:me?me[Me]:Pe,this.opacityscale&&Ce?ne.push(lt[0],lt[1],lt[2],this.opacity*z((Ce[Tt]-je)/(ve-je),this.opacityscale)):3===lt.length?fe.push(lt[0],lt[1],lt[2],this.opacity):(fe.push(lt[0],lt[1],lt[2],lt[3]*this.opacity),lt[3]<1&&(this.hasAlpha=!0)),ue.push((ot=Ae?Ae[Tt]:Ce?[(Ce[Tt]-je)/(ve-je),0]:Oe?Oe[Me]:Ne?[(Ne[Me]-je)/(ve-je),0]:[(qe[2]-je)/(ve-je),0])[0],ot[1]),ge.push(Me);ft+=1;break;case 3:for(Ke=0;Ke<3;++Ke)for(qe=ae[Tt=kt[Ke]],St=0;St<3;++St)if(isNaN(qe[St])||!isFinite(qe[St]))continue e;for(Ke=0;Ke<3;++Ke){var Tt,lt,ot,Rt;qe=ae[Tt=kt[2-Ke]],re.push(qe[0],qe[1],qe[2]),(lt=ce?ce[Tt]:me?me[Me]:Pe)?this.opacityscale&&Ce?ne.push(lt[0],lt[1],lt[2],this.opacity*z((Ce[Tt]-je)/(ve-je),this.opacityscale)):3===lt.length?ne.push(lt[0],lt[1],lt[2],this.opacity):(ne.push(lt[0],lt[1],lt[2],lt[3]*this.opacity),lt[3]<1&&(this.hasAlpha=!0)):ne.push(.5,.5,.5,1),$.push((ot=Ae?Ae[Tt]:Ce?[(Ce[Tt]-je)/(ve-je),0]:Oe?Oe[Me]:Ne?[(Ne[Me]-je)/(ve-je),0]:[(qe[2]-je)/(ve-je),0])[0],ot[1]),Q.push((Rt=Ie?Ie[Tt]:De[Me])[0],Rt[1],Rt[2]),X.push(Me)}it+=1}}this.pointCount=dt,this.edgeCount=ft,this.triangleCount=it,this.pointPositions.update(we),this.pointColors.update(Te),this.pointUVs.update(xe),this.pointSizes.update(ye),this.pointIds.update(new Uint32Array(_e)),this.edgePositions.update(oe),this.edgeColors.update(fe),this.edgeUVs.update(ue),this.edgeIds.update(new Uint32Array(ge)),this.trianglePositions.update(re),this.triangleColors.update(ne),this.triangleUVs.update($),this.triangleNormals.update(Q),this.triangleIds.update(new Uint32Array(X))}},O.drawTransparent=O.draw=function(N){for(var G=this.gl,W=(N=N||{}).model||P,ae=N.view||P,re=N.projection||P,ne=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],Q=0;Q<3;++Q)ne[0][Q]=Math.max(ne[0][Q],this.clipBounds[0][Q]),ne[1][Q]=Math.min(ne[1][Q],this.clipBounds[1][Q]);var $={model:W,view:ae,projection:re,inverseModel:P.slice(),clipBounds:ne,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};$.inverseModel=h($.inverseModel,$.model),G.disable(G.CULL_FACE),this.texture.bind(0);var X=new Array(16);for(c(X,$.view,$.model),c(X,$.projection,X),h(X,X),Q=0;Q<3;++Q)$.eyePosition[Q]=X[12+Q]/X[15];var oe,fe=X[15];for(Q=0;Q<3;++Q)fe+=this.lightPosition[Q]*X[4*Q+3];for(Q=0;Q<3;++Q){for(var ue=X[12+Q],ge=0;ge<3;++ge)ue+=X[4*ge+Q]*this.lightPosition[ge];$.lightPosition[Q]=ue/fe}this.triangleCount>0&&((oe=this.triShader).bind(),oe.uniforms=$,this.triangleVAO.bind(),G.drawArrays(G.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((oe=this.lineShader).bind(),oe.uniforms=$,this.edgeVAO.bind(),G.lineWidth(this.lineWidth*this.pixelRatio),G.drawArrays(G.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((oe=this.pointShader).bind(),oe.uniforms=$,this.pointVAO.bind(),G.drawArrays(G.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((oe=this.contourShader).bind(),oe.uniforms=$,this.contourVAO.bind(),G.drawArrays(G.LINES,0,this.contourCount),this.contourVAO.unbind())},O.drawPick=function(N){for(var G=this.gl,W=(N=N||{}).model||P,ae=N.view||P,re=N.projection||P,ne=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],Q=0;Q<3;++Q)ne[0][Q]=Math.max(ne[0][Q],this.clipBounds[0][Q]),ne[1][Q]=Math.min(ne[1][Q],this.clipBounds[1][Q]);this._model=[].slice.call(W),this._view=[].slice.call(ae),this._projection=[].slice.call(re),this._resolution=[G.drawingBufferWidth,G.drawingBufferHeight];var $,X={model:W,view:ae,projection:re,clipBounds:ne,pickId:this.pickId/255};($=this.pickShader).bind(),$.uniforms=X,this.triangleCount>0&&(this.triangleVAO.bind(),G.drawArrays(G.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),G.lineWidth(this.lineWidth*this.pixelRatio),G.drawArrays(G.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&(($=this.pointPickShader).bind(),$.uniforms=X,this.pointVAO.bind(),G.drawArrays(G.POINTS,0,this.pointCount),this.pointVAO.unbind())},O.pick=function(N){if(!N||N.id!==this.pickId)return null;for(var G=N.value[0]+256*N.value[1]+65536*N.value[2],W=this.cells[G],ae=this.positions,re=new Array(W.length),ne=0;ne<W.length;++ne)re[ne]=ae[W[ne]];var Q=N.coord[0],$=N.coord[1];if(!this.pickVertex){var X=this.positions[W[0]],oe=this.positions[W[1]],fe=this.positions[W[2]];return{_cellCenter:!0,position:[Q,$],index:G,cell:W,cellId:G,intensity:this.intensity[G],dataCoordinate:[(X[0]+oe[0]+fe[0])/3,(X[1]+oe[1]+fe[1])/3,(X[2]+oe[2]+fe[2])/3]}}var ge=x(re,[Q*this.pixelRatio,this._resolution[1]-$*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ge)return null;var we=ge[2],Te=0;for(ne=0;ne<W.length;++ne)Te+=we[ne]*this.intensity[W[ne]];return{position:ge[1],index:W[ge[0]],cell:W,cellId:G,intensity:Te,dataCoordinate:this.positions[W[ge[0]]]}},O.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},p.exports=function(N,G){if(1===arguments.length&&(N=(G=N).gl),!(N.getExtension("OES_standard_derivatives")||N.getExtension("MOZ_OES_standard_derivatives")||N.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var je,W=((je=i(N,v.vertex,v.fragment)).attributes.position.location=0,je.attributes.color.location=2,je.attributes.uv.location=3,je.attributes.normal.location=4,je),ae=function(Ne){var je=i(Ne,_.vertex,_.fragment);return je.attributes.position.location=0,je.attributes.color.location=2,je.attributes.uv.location=3,je}(N),re=function V(N){var G=i(N,f.vertex,f.fragment);return G.attributes.position.location=0,G.attributes.color.location=2,G.attributes.uv.location=3,G.attributes.pointSize.location=4,G}(N),ne=function R(N){var G=i(N,C.vertex,C.fragment);return G.attributes.position.location=0,G.attributes.id.location=1,G}(N),Q=function U(N){var G=i(N,w.vertex,w.fragment);return G.attributes.position.location=0,G.attributes.id.location=1,G.attributes.pointSize.location=4,G}(N),$=function Z(N){var G=i(N,E.vertex,E.fragment);return G.attributes.position.location=0,G}(N),X=a(N,u(new Uint8Array([255,255,255,255]),[1,1,4]));X.generateMipmap(),X.minFilter=N.LINEAR_MIPMAP_LINEAR,X.magFilter=N.LINEAR;var oe=r(N),fe=r(N),ue=r(N),ge=r(N),we=r(N),Te=n(N,[{buffer:oe,type:N.FLOAT,size:3},{buffer:we,type:N.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:fe,type:N.FLOAT,size:4},{buffer:ue,type:N.FLOAT,size:2},{buffer:ge,type:N.FLOAT,size:3}]),xe=r(N),ye=r(N),_e=r(N),Ie=r(N),De=n(N,[{buffer:xe,type:N.FLOAT,size:3},{buffer:Ie,type:N.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ye,type:N.FLOAT,size:4},{buffer:_e,type:N.FLOAT,size:2}]),be=r(N),he=r(N),ce=r(N),me=r(N),Pe=r(N),Ae=n(N,[{buffer:be,type:N.FLOAT,size:3},{buffer:Pe,type:N.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:he,type:N.FLOAT,size:4},{buffer:ce,type:N.FLOAT,size:2},{buffer:me,type:N.FLOAT,size:1}]),Ce=r(N),Oe=new L(N,X,W,ae,re,ne,Q,$,oe,we,fe,ue,ge,Te,xe,Ie,ye,_e,De,be,Pe,he,ce,me,Ae,Ce,n(N,[{buffer:Ce,type:N.FLOAT,size:3}]));return Oe.update(G),Oe}},8120:function(p,l,t){"use strict";p.exports=function(u){var y=u.gl;return new a(u,i(y,[0,0,0,1,1,0,1,1]),r(y,n.boxVert,n.lineFrag))};var i=t(2762),r=t(9405),n=t(3603);function a(u,y,d){this.plot=u,this.vbo=y,this.shader=d}var s,c,h=a.prototype;h.bind=function(){var u=this.shader;this.vbo.bind(),this.shader.bind(),u.attributes.coord.pointer(),u.uniforms.screenBox=this.plot.screenBox},h.drawBox=(s=[0,0],c=[0,0],function(u,y,d,m,g){var v=this.shader,_=this.plot.gl;s[0]=u,s[1]=y,c[0]=d,c[1]=m,v.uniforms.lo=s,v.uniforms.hi=c,v.uniforms.color=g,_.drawArrays(_.TRIANGLE_STRIP,0,4)}),h.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},1913:function(p,l,t){"use strict";p.exports=function(x){var v=x.gl;return new s(x,i(v),r(v,a.gridVert,a.gridFrag),r(v,a.tickVert,a.gridFrag))};var i=t(2762),r=t(9405),n=t(2478),a=t(3603);function s(x,v,_,f){this.plot=x,this.vbo=v,this.shader=_,this.tickShader=f,this.ticks=[[],[]]}function c(x,v){return x-v}var h,u,y,d,m,x,v,_,f,C,w,g=s.prototype;g.draw=(h=[0,0],u=[0,0],y=[0,0],function(){for(var x=this.plot,v=this.vbo,_=this.shader,f=this.ticks,C=x.gl,w=x._tickBounds,E=x.dataBox,P=x.viewBox,L=x.gridLineWidth,O=x.gridLineColor,z=x.gridLineEnable,V=x.pixelRatio,R=0;R<2;++R){var U=w[R],N=.5*(E[R+2]+E[R]),G=E[R+2]-E[R];u[R]=2*(w[R+2]-U)/G,h[R]=2*(U-N)/G}_.bind(),v.bind(),_.attributes.dataCoord.pointer(),_.uniforms.dataShift=h,_.uniforms.dataScale=u;var W=0;for(R=0;R<2;++R){y[0]=y[1]=0,y[R]=1,_.uniforms.dataAxis=y,_.uniforms.lineWidth=L[R]/(P[R+2]-P[R])*V,_.uniforms.color=O[R];var ae=6*f[R].length;z[R]&&ae&&C.drawArrays(C.TRIANGLES,W,ae),W+=ae}}),g.drawTickMarks=(x=[0,0],v=[0,0],_=[1,0],f=[0,1],C=[0,0],w=[0,0],function(){for(var E=this.plot,P=this.vbo,L=this.tickShader,O=this.ticks,z=E.gl,V=E._tickBounds,R=E.dataBox,U=E.viewBox,Z=E.pixelRatio,N=E.screenBox,G=N[2]-N[0],W=N[3]-N[1],ae=U[2]-U[0],re=U[3]-U[1],ne=0;ne<2;++ne){var Q=V[ne],X=.5*(R[ne+2]+R[ne]),oe=R[ne+2]-R[ne];v[ne]=2*(V[ne+2]-Q)/oe,x[ne]=2*(Q-X)/oe}v[0]*=ae/G,x[0]*=ae/G,v[1]*=re/W,x[1]*=re/W,L.bind(),P.bind(),L.attributes.dataCoord.pointer();var fe=L.uniforms;fe.dataShift=x,fe.dataScale=v;var ue=E.tickMarkLength,ge=E.tickMarkWidth,we=E.tickMarkColor,Te=6*O[0].length,xe=Math.min(n.ge(O[0],(R[0]-V[0])/(V[2]-V[0]),c),O[0].length),ye=Math.min(n.gt(O[0],(R[2]-V[0])/(V[2]-V[0]),c),O[0].length),_e=0+6*xe,Ie=6*Math.max(0,ye-xe),De=Math.min(n.ge(O[1],(R[1]-V[1])/(V[3]-V[1]),c),O[1].length),be=Math.min(n.gt(O[1],(R[3]-V[1])/(V[3]-V[1]),c),O[1].length),he=Te+6*De,ce=6*Math.max(0,be-De);C[0]=2*(U[0]-ue[1])/G-1,C[1]=(U[3]+U[1])/W-1,w[0]=ue[1]*Z/G,w[1]=ge[1]*Z/W,ce&&(fe.color=we[1],fe.tickScale=w,fe.dataAxis=f,fe.screenOffset=C,z.drawArrays(z.TRIANGLES,he,ce)),C[0]=(U[2]+U[0])/G-1,C[1]=2*(U[1]-ue[0])/W-1,w[0]=ge[0]*Z/G,w[1]=ue[0]*Z/W,Ie&&(fe.color=we[0],fe.tickScale=w,fe.dataAxis=_,fe.screenOffset=C,z.drawArrays(z.TRIANGLES,_e,Ie)),C[0]=2*(U[2]+ue[3])/G-1,C[1]=(U[3]+U[1])/W-1,w[0]=ue[3]*Z/G,w[1]=ge[3]*Z/W,ce&&(fe.color=we[3],fe.tickScale=w,fe.dataAxis=f,fe.screenOffset=C,z.drawArrays(z.TRIANGLES,he,ce)),C[0]=(U[2]+U[0])/G-1,C[1]=2*(U[3]+ue[2])/W-1,w[0]=ge[2]*Z/G,w[1]=ue[2]*Z/W,Ie&&(fe.color=we[2],fe.tickScale=w,fe.dataAxis=_,fe.screenOffset=C,z.drawArrays(z.TRIANGLES,_e,Ie))}),g.update=(d=[1,1,-1,-1,1,-1],m=[1,-1,1,1,-1,-1],function(x){for(var v=x.ticks,_=x.bounds,f=new Float32Array(18*(v[0].length+v[1].length)),C=0,w=[[],[]],E=0;E<2;++E)for(var P=w[E],L=v[E],O=_[E],z=_[E+2],V=0;V<L.length;++V){var R=(L[V].x-O)/(z-O);P.push(R);for(var U=0;U<6;++U)f[C++]=R,f[C++]=d[U],f[C++]=m[U]}this.ticks=w,this.vbo.update(f)}),g.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},4747:function(p,l,t){"use strict";p.exports=function(u){var y=u.gl;return new a(u,i(y,[-1,-1,-1,1,1,-1,1,1]),r(y,n.lineVert,n.lineFrag))};var i=t(2762),r=t(9405),n=t(3603);function a(u,y,d){this.plot=u,this.vbo=y,this.shader=d}var s,c,h=a.prototype;h.bind=function(){var u=this.shader;this.vbo.bind(),this.shader.bind(),u.attributes.coord.pointer(),u.uniforms.screenBox=this.plot.screenBox},h.drawLine=(s=[0,0],c=[0,0],function(u,y,d,m,g,x){var v=this.plot,_=this.shader,f=v.gl;s[0]=u,s[1]=y,c[0]=d,c[1]=m,_.uniforms.start=s,_.uniforms.end=c,_.uniforms.width=g*v.pixelRatio,_.uniforms.color=x,f.drawArrays(f.TRIANGLE_STRIP,0,4)}),h.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3603:function(p,l,t){"use strict";var i=t(3236),r=i(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);p.exports={lineVert:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:r,textVert:i(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:r,gridVert:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:r,boxVert:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},2142:function(p,l,t){"use strict";p.exports=function(v){var _=v.gl;return new c(v,i(_),r(_,s.textVert,s.textFrag))};var i=t(2762),r=t(9405),n=t(529),a=t(2478),s=t(3603);function c(v,_,f){this.plot=v,this.vbo=_,this.shader=f,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var h,u,y,d,m,g,v,_,x=c.prototype;x.drawTicks=(h=[0,0],u=[0,0],y=[0,0],function(v){var _=this.plot,f=this.shader,C=this.tickX[v],w=this.tickOffset[v],E=_.gl,P=_.viewBox,L=_.dataBox,O=_.screenBox,z=_.pixelRatio,V=_.tickEnable,R=_.tickPad,U=_.tickColor,Z=_.tickAngle,N=_.labelEnable,G=_.labelPad,W=_.labelColor,ae=_.labelAngle,re=this.labelOffset[v],ne=this.labelCount[v],Q=a.lt(C,L[v]),$=a.le(C,L[v+2]);h[0]=h[1]=0,h[v]=1,u[v]=(P[2+v]+P[v])/(O[2+v]-O[v])-1;var X=2/O[2+(1^v)]-O[1^v];u[1^v]=X*P[1^v]-1,V[v]&&(u[1^v]-=X*z*R[v],Q<$&&w[$]>w[Q]&&(f.uniforms.dataAxis=h,f.uniforms.screenOffset=u,f.uniforms.color=U[v],f.uniforms.angle=Z[v],E.drawArrays(E.TRIANGLES,w[Q],w[$]-w[Q]))),N[v]&&ne&&(u[1^v]-=X*z*G[v],f.uniforms.dataAxis=y,f.uniforms.screenOffset=u,f.uniforms.color=W[v],f.uniforms.angle=ae[v],E.drawArrays(E.TRIANGLES,re,ne)),u[1^v]=X*P[2+(1^v)]-1,V[v+2]&&(u[1^v]+=X*z*R[v+2],Q<$&&w[$]>w[Q]&&(f.uniforms.dataAxis=h,f.uniforms.screenOffset=u,f.uniforms.color=U[v+2],f.uniforms.angle=Z[v+2],E.drawArrays(E.TRIANGLES,w[Q],w[$]-w[Q]))),N[v+2]&&ne&&(u[1^v]+=X*z*G[v+2],f.uniforms.dataAxis=y,f.uniforms.screenOffset=u,f.uniforms.color=W[v+2],f.uniforms.angle=ae[v+2],E.drawArrays(E.TRIANGLES,re,ne))}),x.drawTitle=(v=[0,0],_=[0,0],function(){var f=this.plot,C=this.shader,w=f.gl,E=f.screenBox,P=f.titleCenter,L=f.titleAngle,O=f.titleColor,z=f.pixelRatio;if(this.titleCount){for(var V=0;V<2;++V)_[V]=2*(P[V]*z-E[V])/(E[2+V]-E[V])-1;C.bind(),C.uniforms.dataAxis=v,C.uniforms.screenOffset=_,C.uniforms.angle=L,C.uniforms.color=O,w.drawArrays(w.TRIANGLES,this.titleOffset,this.titleCount)}}),x.bind=(d=[0,0],m=[0,0],g=[0,0],function(){var v=this.plot,_=this.shader,f=v._tickBounds,C=v.dataBox,w=v.screenBox,E=v.viewBox;_.bind();for(var P=0;P<2;++P){var L=f[P],z=.5*(C[P+2]+C[P]),V=C[P+2]-C[P],U=E[P+2]-E[P],N=w[P+2]-w[P];m[P]=2*(f[P+2]-L)/V*U/N,d[P]=2*(L-z)/V*U/N}g[1]=2*v.pixelRatio/(w[3]-w[1]),g[0]=g[1]*(w[3]-w[1])/(w[2]-w[0]),_.uniforms.dataScale=m,_.uniforms.dataShift=d,_.uniforms.textScale=g,this.vbo.bind(),_.attributes.textCoordinate.pointer()}),x.update=function(v){var _,f,C,w,E,P=[],L=v.ticks,O=v.bounds;for(E=0;E<2;++E){var z=[Math.floor(P.length/3)],V=[-1/0],R=L[E];for(_=0;_<R.length;++_){var U=R[_],Z=U.x,G=U.font||"sans-serif",W=U.fontStyle||"normal",ae=U.fontWeight||"normal",re=U.fontVariant||"normal";w=U.fontSize||12;for(var ne=1/(O[E+2]-O[E]),Q=O[E],$=U.text.split("\n"),X=0;X<$.length;X++)for(C=n(G,$[X],{fontStyle:W,fontWeight:ae,fontVariant:re}).data,f=0;f<C.length;f+=2)P.push(C[f]*w,-C[f+1]*w-X*w*1.2,(Z-Q)*ne);z.push(Math.floor(P.length/3)),V.push(Z)}this.tickOffset[E]=z,this.tickX[E]=V}for(E=0;E<2;++E){for(this.labelOffset[E]=Math.floor(P.length/3),C=n(v.labelFont[E],v.labels[E],{fontStyle:v.labelFontStyle[E],fontWeight:v.labelFontWeight[E],fontVariant:v.labelFontVariant[E],textAlign:"center"}).data,w=v.labelSize[E],_=0;_<C.length;_+=2)P.push(C[_]*w,-C[_+1]*w,0);this.labelCount[E]=Math.floor(P.length/3)-this.labelOffset[E]}for(this.titleOffset=Math.floor(P.length/3),C=n(v.titleFont,v.title,{fontStyle:v.titleFontStyle,fontWeight:v.titleFontWeight,fontVariant:v.titleFontVariant}).data,w=v.titleSize,_=0;_<C.length;_+=2)P.push(C[_]*w,-C[_+1]*w,0);this.titleCount=Math.floor(P.length/3)-this.titleOffset,this.vbo.update(P)},x.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},1850:function(p,l,t){"use strict";p.exports=function(d){var m=d.gl,g=new c(m,i(m,[m.drawingBufferWidth,m.drawingBufferHeight]));return g.grid=r(g),g.text=n(g),g.line=a(g),g.box=s(g),g.update(d),g};var i=t(3589),r=t(1913),n=t(2142),a=t(4747),s=t(8120);function c(d,m){this.gl=d,this.pickBuffer=m,this.screenBox=[0,0,d.drawingBufferWidth,d.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var h=c.prototype;function u(d){for(var m=d.slice(),g=0;g<m.length;++g)m[g]=m[g].slice();return m}function y(d,m){return d.x-m.x}h.setDirty=function(){this.dirty=this.pickDirty=!0},h.setOverlayDirty=function(){this.dirty=!0},h.nextDepthValue=function(){return this._depthCounter++/65536},h.draw=function(){var d=this.gl,m=this.screenBox,g=this.viewBox,x=this.dataBox,v=this.pixelRatio,_=this.grid,f=this.line,C=this.text,w=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,d.bindFramebuffer(d.FRAMEBUFFER,null),d.enable(d.SCISSOR_TEST),d.disable(d.DEPTH_TEST),d.depthFunc(d.LESS),d.depthMask(!1),d.enable(d.BLEND),d.blendEquation(d.FUNC_ADD,d.FUNC_ADD),d.blendFunc(d.ONE,d.ONE_MINUS_SRC_ALPHA),this.borderColor){d.scissor(m[0],m[1],m[2]-m[0],m[3]-m[1]);var E=this.borderColor;d.clearColor(E[0]*E[3],E[1]*E[3],E[2]*E[3],E[3]),d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT)}d.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]),d.viewport(g[0],g[1],g[2]-g[0],g[3]-g[1]);var P=this.backgroundColor;d.clearColor(P[0]*P[3],P[1]*P[3],P[2]*P[3],P[3]),d.clear(d.COLOR_BUFFER_BIT),_.draw();var L=this.zeroLineEnable,O=this.zeroLineColor,z=this.zeroLineWidth;if(L[0]||L[1]){f.bind();for(var V=0;V<2;++V)if(L[V]&&x[V]<=0&&x[V+2]>=0){var R=m[V]-x[V]*(m[V+2]-m[V])/(x[V+2]-x[V]);0===V?f.drawLine(R,m[1],R,m[3],z[V],O[V]):f.drawLine(m[0],R,m[2],R,z[V],O[V])}}for(V=0;V<w.length;++V)w[V].draw();d.viewport(m[0],m[1],m[2]-m[0],m[3]-m[1]),d.scissor(m[0],m[1],m[2]-m[0],m[3]-m[1]),this.grid.drawTickMarks(),f.bind();var U=this.borderLineEnable,Z=this.borderLineWidth,N=this.borderLineColor;for(U[1]&&f.drawLine(g[0],g[1]-.5*Z[1]*v,g[0],g[3]+.5*Z[3]*v,Z[1],N[1]),U[0]&&f.drawLine(g[0]-.5*Z[0]*v,g[1],g[2]+.5*Z[2]*v,g[1],Z[0],N[0]),U[3]&&f.drawLine(g[2],g[1]-.5*Z[1]*v,g[2],g[3]+.5*Z[3]*v,Z[3],N[3]),U[2]&&f.drawLine(g[0]-.5*Z[0]*v,g[3],g[2]+.5*Z[2]*v,g[3],Z[2],N[2]),C.bind(),V=0;V<2;++V)C.drawTicks(V);this.titleEnable&&C.drawTitle();var G=this.overlays;for(V=0;V<G.length;++V)G[V].draw();d.disable(d.SCISSOR_TEST),d.disable(d.BLEND),d.depthMask(!0)}},h.drawPick=function(){if(!this.static){var d=this.pickBuffer;this._pickTimeout=null,d.begin();for(var m=1,g=this.objects,x=0;x<g.length;++x)m=g[x].drawPick(m);d.end()}},h.pick=function(d,m){if(!this.static){var g=this.pixelRatio,x=this.pickPixelRatio,v=this.viewBox,_=0|Math.round((d-v[0]/g)*x),f=0|Math.round((m-v[1]/g)*x),C=this.pickBuffer.query(_,f,this.pickRadius);if(!C)return null;for(var w=C.id+(C.value[0]<<8)+(C.value[1]<<16)+(C.value[2]<<24),E=this.objects,P=0;P<E.length;++P){var L=E[P].pick(_,f,w);if(L)return L}return null}},h.setScreenBox=function(d){var m=this.screenBox,g=this.pixelRatio;m[0]=0|Math.round(d[0]*g),m[1]=0|Math.round(d[1]*g),m[2]=0|Math.round(d[2]*g),m[3]=0|Math.round(d[3]*g),this.setDirty()},h.setDataBox=function(d){var m=this.dataBox;(m[0]!==d[0]||m[1]!==d[1]||m[2]!==d[2]||m[3]!==d[3])&&(m[0]=d[0],m[1]=d[1],m[2]=d[2],m[3]=d[3],this.setDirty())},h.setViewBox=function(d){var m=this.pixelRatio,g=this.viewBox;g[0]=0|Math.round(d[0]*m),g[1]=0|Math.round(d[1]*m),g[2]=0|Math.round(d[2]*m),g[3]=0|Math.round(d[3]*m);var x=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((d[2]-d[0])*x),0|Math.round((d[3]-d[1])*x)],this.setDirty()},h.update=function(d){var m=this.gl;this.pixelRatio=(d=d||{}).pixelRatio||1;var g=this.pixelRatio;this.pickPixelRatio=Math.max(g,1),this.setScreenBox(d.screenBox||[0,0,m.drawingBufferWidth/g,m.drawingBufferHeight/g]),this.setViewBox(d.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/g,.125*(this.screenBox[3]-this.screenBox[1])/g,.875*(this.screenBox[2]-this.screenBox[0])/g,.875*(this.screenBox[3]-this.screenBox[1])/g]);var x=this.viewBox,v=(x[2]-x[0])/(x[3]-x[1]);this.setDataBox(d.dataBox||[-10,-10/v,10,10/v]),this.borderColor=!1!==d.borderColor&&(d.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(d.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(d.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(d.gridLineWidth||[1,1]).slice(),this.gridLineColor=u(d.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(d.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(d.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=u(d.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(d.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(d.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=u(d.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(d.titleCenter||[.5*(x[0]+x[2])/g,(x[3]+120)/g]).slice(),this.titleEnable=!("titleEnable"in d)||!!d.titleEnable,this.titleAngle=d.titleAngle||0,this.titleColor=(d.titleColor||[0,0,0,1]).slice(),this.labelPad=(d.labelPad||[15,15,15,15]).slice(),this.labelAngle=(d.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(d.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=u(d.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(d.tickPad||[15,15,15,15]).slice(),this.tickAngle=(d.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(d.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=u(d.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(d.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(d.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=u(d.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var _=d.ticks||[[],[]],f=this._tickBounds;f[0]=f[1]=1/0,f[2]=f[3]=-1/0;for(var C=0;C<2;++C){var w=_[C].slice(0);0!==w.length&&(w.sort(y),f[C]=Math.min(f[C],w[0].x),f[C+2]=Math.max(f[C+2],w[w.length-1].x))}this.grid.update({bounds:f,ticks:_}),this.text.update({bounds:f,ticks:_,labels:d.labels||["x","y"],labelSize:d.labelSize||[12,12],labelFont:d.labelFont||["sans-serif","sans-serif"],labelFontStyle:d.labelFontStyle||["normal","normal"],labelFontWeight:d.labelFontWeight||["normal","normal"],labelFontVariant:d.labelFontVariant||["normal","normal"],title:d.title||"",titleSize:d.titleSize||18,titleFont:d.titleFont||"sans-serif",titleFontStyle:d.titleFontStyle||"normal",titleFontWeight:d.titleFontWeight||"normal",titleFontVariant:d.titleFontVariant||"normal"}),this.static=!!d.static,this.setDirty()},h.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var d=this.objects.length-1;d>=0;--d)this.objects[d].dispose();for(this.objects.length=0,d=this.overlays.length-1;d>=0;--d)this.overlays[d].dispose();this.overlays.length=0,this.gl=null},h.addObject=function(d){this.objects.indexOf(d)<0&&(this.objects.push(d),this.setDirty())},h.removeObject=function(d){for(var m=this.objects,g=0;g<m.length;++g)if(m[g]===d){m.splice(g,1),this.setDirty();break}},h.addOverlay=function(d){this.overlays.indexOf(d)<0&&(this.overlays.push(d),this.setOverlayDirty())},h.removeOverlay=function(d){for(var m=this.overlays,g=0;g<m.length;++g)if(m[g]===d){m.splice(g,1),this.setOverlayDirty();break}}},4437:function(p,l,t){"use strict";p.exports=function(h,u){h=h||document.body;var y=[.01,1/0];"distanceLimits"in(u=u||{})&&(y[0]=u.distanceLimits[0],y[1]=u.distanceLimits[1]),"zoomMin"in u&&(y[0]=u.zoomMin),"zoomMax"in u&&(y[1]=u.zoomMax);var d=r({center:u.center||[0,0,0],up:u.up||[0,1,0],eye:u.eye||[0,0,10],mode:u.mode||"orbit",distanceLimits:y}),m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],g=0,x=h.clientWidth,v=h.clientHeight,_={keyBindingMode:"rotate",enableWheel:!0,view:d,element:h,delay:u.delay||16,rotateSpeed:u.rotateSpeed||1,zoomSpeed:u.zoomSpeed||1,translateSpeed:u.translateSpeed||1,flipX:!!u.flipX,flipY:!!u.flipY,modes:d.modes,_ortho:u._ortho||u.projection&&"orthographic"===u.projection.type||!1,tick:function(){var f=i(),C=this.delay,w=f-2*C;d.idle(f-C),d.recalcMatrix(w),d.flush(f-(100+2*C));for(var E=!0,P=d.computedMatrix,L=0;L<16;++L)E=E&&m[L]===P[L],m[L]=P[L];var O=h.clientWidth===x&&h.clientHeight===v;return x=h.clientWidth,v=h.clientHeight,E?!O:(g=Math.exp(d.computedRadius[0]),!0)},lookAt:function(f,C,w){d.lookAt(d.lastT(),f,C,w)},rotate:function(f,C,w){d.rotate(d.lastT(),f,C,w)},pan:function(f,C,w){d.pan(d.lastT(),f,C,w)},translate:function(f,C,w){d.translate(d.lastT(),f,C,w)}};return Object.defineProperties(_,{matrix:{get:function(){return d.computedMatrix},set:function(f){return d.setMatrix(d.lastT(),f),d.computedMatrix},enumerable:!0},mode:{get:function(){return d.getMode()},set:function(f){var C=d.computedUp.slice(),w=d.computedEye.slice(),E=d.computedCenter.slice();if(d.setMode(f),"turntable"===f){var P=i();d._active.lookAt(P,w,E,C),d._active.lookAt(P+500,w,E,[0,0,1]),d._active.flush(P)}return d.getMode()},enumerable:!0},center:{get:function(){return d.computedCenter},set:function(f){return d.lookAt(d.lastT(),null,f),d.computedCenter},enumerable:!0},eye:{get:function(){return d.computedEye},set:function(f){return d.lookAt(d.lastT(),f),d.computedEye},enumerable:!0},up:{get:function(){return d.computedUp},set:function(f){return d.lookAt(d.lastT(),null,null,f),d.computedUp},enumerable:!0},distance:{get:function(){return g},set:function(f){return d.setDistance(d.lastT(),f),f},enumerable:!0},distanceLimits:{get:function(){return d.getDistanceLimits(y)},set:function(f){return d.setDistanceLimits(f),f},enumerable:!0}}),h.addEventListener("contextmenu",function(f){return f.preventDefault(),!1}),_._lastX=-1,_._lastY=-1,_._lastMods={shift:!1,control:!1,alt:!1,meta:!1},_.enableMouseListeners=function(){function f(C,w,E,P){var L=_.keyBindingMode;if(!1!==L){var O="rotate"===L,z="pan"===L,V="zoom"===L,R=!!P.control,U=!!P.alt,Z=!!P.shift,N=!!(1&C),G=!!(2&C),W=!!(4&C),ae=1/h.clientHeight,re=ae*(w-_._lastX),ne=ae*(E-_._lastY),Q=_.flipX?1:-1,$=_.flipY?1:-1,X=Math.PI*_.rotateSpeed,oe=i();if(-1!==_._lastX&&-1!==_._lastY&&((O&&N&&!R&&!U&&!Z||N&&!R&&!U&&Z)&&d.rotate(oe,Q*X*re,-$*X*ne,0),(z&&N&&!R&&!U&&!Z||G||N&&R&&!U&&!Z)&&d.pan(oe,-_.translateSpeed*re*g,_.translateSpeed*ne*g,0),V&&N&&!R&&!U&&!Z||W||N&&!R&&U&&!Z)){var fe=-_.zoomSpeed*ne/window.innerHeight*(oe-d.lastT())*100;d.pan(oe,0,0,g*(Math.exp(fe)-1))}return _._lastX=w,_._lastY=E,_._lastMods=P,!0}}_.mouseListener=n(h,f),h.addEventListener("touchstart",function(C){var w=s(C.changedTouches[0],h);f(0,w[0],w[1],_._lastMods),f(1,w[0],w[1],_._lastMods)},!!c&&{passive:!0}),h.addEventListener("touchmove",function(C){var w=s(C.changedTouches[0],h);f(1,w[0],w[1],_._lastMods),C.preventDefault()},!!c&&{passive:!1}),h.addEventListener("touchend",function(C){f(0,_._lastX,_._lastY,_._lastMods)},!!c&&{passive:!0}),_.wheelListener=a(h,function(C,w){if(!1!==_.keyBindingMode&&_.enableWheel){var E=_.flipX?1:-1,P=_.flipY?1:-1,L=i();if(Math.abs(C)>Math.abs(w))d.rotate(L,0,0,-C*E*Math.PI*_.rotateSpeed/window.innerWidth);else if(!_._ortho){var O=-_.zoomSpeed*P*w/window.innerHeight*(L-d.lastT())/20;d.pan(L,0,0,g*(Math.exp(O)-1))}}},!0)},_.enableMouseListeners(),_};var i=t(3025),r=t(6296),n=t(351),a=t(8512),s=t(24),c=t(7520)},799:function(p,l,t){var i=t(3236),r=t(9405),n=i(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),a=i(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);p.exports=function(s){return r(s,n,a,null,[{name:"position",type:"vec2"}])}},4100:function(p,l,t){"use strict";var i=t(4437),r=t(3837),n=t(5445),a=t(4449),s=t(3589),c=t(2260),h=t(7169),u=t(351),y=t(4772),d=t(4040),m=t(799),g=t(9216)({tablet:!0,featureDetect:!0});function x(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function v(f){var C=Math.round(Math.log(Math.abs(f))/Math.log(10));if(C<0){var w=Math.round(Math.pow(10,-C));return Math.ceil(f*w)/w}return C>0?(w=Math.round(Math.pow(10,C)),Math.ceil(f/w)*w):Math.ceil(f)}function _(f){return"boolean"!=typeof f||f}p.exports={createScene:function(f){(f=f||{}).camera=f.camera||{};var C=f.canvas;C||(C=document.createElement("canvas"),f.container?f.container.appendChild(C):document.body.appendChild(C));var w=f.gl;if(w||(f.glOptions&&(g=!!f.glOptions.preserveDrawingBuffer),w=function(Ie,De){var be=null;try{(be=Ie.getContext("webgl",De))||(be=Ie.getContext("experimental-webgl",De))}catch{return null}return be}(C,f.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:g})),!w)throw new Error("webgl not supported");var E=f.bounds||[[-10,-10,-10],[10,10,10]],P=new x,L=c(w,w.drawingBufferWidth,w.drawingBufferHeight,{preferFloat:!g}),O=m(w),z=f.cameraObject&&!0===f.cameraObject._ortho||f.camera.projection&&"orthographic"===f.camera.projection.type||!1,V={eye:f.camera.eye||[2,0,0],center:f.camera.center||[0,0,0],up:f.camera.up||[0,1,0],zoomMin:f.camera.zoomMax||.1,zoomMax:f.camera.zoomMin||100,mode:f.camera.mode||"turntable",_ortho:z},R=f.axes||{},U=r(w,R);U.enable=!R.disable;var N=a(w,f.spikes||{}),G=[],W=[],ae=[],re=[],ne=!0,Q=!0,$={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},X=(Q=!0,[w.drawingBufferWidth,w.drawingBufferHeight]),oe=f.cameraObject||i(C,V),fe={gl:w,contextLost:!1,pixelRatio:f.pixelRatio||1,canvas:C,selection:P,camera:oe,axes:U,axesPixels:null,spikes:N,bounds:E,objects:G,shape:X,aspect:f.aspectRatio||[1,1,1],pickRadius:f.pickRadius||10,zNear:f.zNear||.01,zFar:f.zFar||1e3,fovy:f.fovy||Math.PI/4,clearColor:f.clearColor||[0,0,0,0],autoResize:_(f.autoResize),autoBounds:_(f.autoBounds),autoScale:!!f.autoScale,autoCenter:_(f.autoCenter),clipToBounds:_(f.clipToBounds),snapToData:!!f.snapToData,onselect:f.onselect||null,onrender:f.onrender||null,onclick:f.onclick||null,cameraParams:$,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(Ie){this.aspect[0]=Ie.x,this.aspect[1]=Ie.y,this.aspect[2]=Ie.z,Q=!0},setBounds:function(Ie,De){this.bounds[0][Ie]=De.min,this.bounds[1][Ie]=De.max},setClearColor:function(Ie){this.clearColor=Ie},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},ue=[w.drawingBufferWidth/fe.pixelRatio|0,w.drawingBufferHeight/fe.pixelRatio|0];function ge(){if(!fe._stopped&&fe.autoResize){var Ie=C.parentNode,De=1,be=1;Ie&&Ie!==document.body?(De=Ie.clientWidth,be=Ie.clientHeight):(De=window.innerWidth,be=window.innerHeight);var he=0|Math.ceil(De*fe.pixelRatio),ce=0|Math.ceil(be*fe.pixelRatio);if(he!==C.width||ce!==C.height){C.width=he,C.height=ce;var me=C.style;me.position=me.position||"absolute",me.left="0px",me.top="0px",me.width=De+"px",me.height=be+"px",ne=!0}}}function we(){for(var Ie=G.length,De=re.length,be=0;be<De;++be)ae[be]=0;e:for(be=0;be<Ie;++be){var he=G[be],ce=he.pickSlots;if(ce){for(var me=0;me<De;++me)if(ae[me]+ce<255){W[be]=me,he.setPickBase(ae[me]+1),ae[me]+=ce;continue e}var Pe=s(w,X);W[be]=De,re.push(Pe),ae.push(ce),he.setPickBase(1),De+=1}else W[be]=-1}for(;De>0&&0===ae[De-1];)ae.pop(),re.pop().dispose()}function Te(){if(fe.contextLost)return!0;w.isContextLost()&&(fe.contextLost=!0,fe.mouseListener.enabled=!1,fe.selection.object=null,fe.oncontextloss&&fe.oncontextloss())}fe.autoResize&&ge(),window.addEventListener("resize",ge),fe.update=function(Ie){fe._stopped||(Ie=Ie||{},ne=!0,Q=!0)},fe.add=function(Ie){fe._stopped||(Ie.axes=U,G.push(Ie),W.push(-1),ne=!0,Q=!0,we())},fe.remove=function(Ie){if(!fe._stopped){var De=G.indexOf(Ie);De<0||(G.splice(De,1),W.pop(),ne=!0,Q=!0,we())}},fe.dispose=function(){if(!fe._stopped&&(fe._stopped=!0,window.removeEventListener("resize",ge),C.removeEventListener("webglcontextlost",Te),fe.mouseListener.enabled=!1,!fe.contextLost)){U.dispose(),N.dispose();for(var Ie=0;Ie<G.length;++Ie)G[Ie].dispose();for(L.dispose(),Ie=0;Ie<re.length;++Ie)re[Ie].dispose();O.dispose(),w=null,U=null,N=null,G=[]}},fe._mouseRotating=!1,fe._prevButtons=0,fe.enableMouseListeners=function(){fe.mouseListener=u(C,function(Ie,De,be){if(!fe._stopped){var he=re.length,ce=G.length,me=P.object;P.distance=1/0,P.mouse[0]=De,P.mouse[1]=be,P.object=null,P.screen=null,P.dataCoordinate=P.dataPosition=null;var Pe=!1;if(Ie&&fe._prevButtons)fe._mouseRotating=!0;else{fe._mouseRotating&&(Q=!0),fe._mouseRotating=!1;for(var Ae=0;Ae<he;++Ae){var Ce=re[Ae].query(De,ue[1]-be-1,fe.pickRadius);if(Ce){if(Ce.distance>P.distance)continue;for(var Oe=0;Oe<ce;++Oe){var Ne=G[Oe];if(W[Oe]===Ae){var je=Ne.pick(Ce);je&&(P.buttons=Ie,P.screen=Ce.coord,P.distance=Ce.distance,P.object=Ne,P.index=je.distance,P.dataPosition=je.position,P.dataCoordinate=je.dataCoordinate,P.data=je,Pe=!0)}}}}}me&&me!==P.object&&(me.highlight&&me.highlight(null),ne=!0),P.object&&(P.object.highlight&&P.object.highlight(P.data),ne=!0),(Pe=Pe||P.object!==me)&&fe.onselect&&fe.onselect(P),1&Ie&&!(1&fe._prevButtons)&&fe.onclick&&fe.onclick(P),fe._prevButtons=Ie}})},C.addEventListener("webglcontextlost",Te);var xe=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],ye=[xe[0].slice(),xe[1].slice()];function _e(){if(!Te()){ge();var Ie=fe.camera.tick();$.view=fe.camera.matrix,ne=ne||Ie,Q=Q||Ie,U.pixelRatio=fe.pixelRatio,N.pixelRatio=fe.pixelRatio;var De=G.length,be=xe[0],he=xe[1];be[0]=be[1]=be[2]=1/0,he[0]=he[1]=he[2]=-1/0;for(var ce=0;ce<De;++ce){(ze=G[ce]).pixelRatio=fe.pixelRatio,ze.axes=fe.axes,ne=ne||!!ze.dirty,Q=Q||!!ze.dirty;var me=ze.bounds;if(me)for(var Pe=me[0],Ae=me[1],Ce=0;Ce<3;++Ce)be[Ce]=Math.min(be[Ce],Pe[Ce]),he[Ce]=Math.max(he[Ce],Ae[Ce])}var Oe=fe.bounds;if(fe.autoBounds)for(Ce=0;Ce<3;++Ce){if(he[Ce]<be[Ce])be[Ce]=-1,he[Ce]=1;else{be[Ce]===he[Ce]&&(be[Ce]-=1,he[Ce]+=1);var Ne=.05*(he[Ce]-be[Ce]);be[Ce]=be[Ce]-Ne,he[Ce]=he[Ce]+Ne}Oe[0][Ce]=be[Ce],Oe[1][Ce]=he[Ce]}var je=!1;for(Ce=0;Ce<3;++Ce)je=je||ye[0][Ce]!==Oe[0][Ce]||ye[1][Ce]!==Oe[1][Ce],ye[0][Ce]=Oe[0][Ce],ye[1][Ce]=Oe[1][Ce];if(Q=Q||je,ne=ne||je){if(je){var ve=[0,0,0];for(ce=0;ce<3;++ce)ve[ce]=v((Oe[1][ce]-Oe[0][ce])/10);U.update(U.autoTicks?{bounds:Oe,tickSpacing:ve}:{bounds:Oe})}var Me=w.drawingBufferWidth,Le=w.drawingBufferHeight;for(X[0]=Me,X[1]=Le,ue[0]=0|Math.max(Me/fe.pixelRatio,1),ue[1]=0|Math.max(Le/fe.pixelRatio,1),function(qe,Ke){var it=qe.bounds,ft=qe.cameraParams,dt=ft.projection,kt=ft.model,lt=qe.zNear,ot=qe.zFar,Rt=qe.fovy,Vt=qe.gl.drawingBufferWidth/qe.gl.drawingBufferHeight;Ke?(d(dt,-Vt,Vt,-1,1,lt,ot),ft._ortho=!0):(y(dt,Rt,Vt,lt,ot),ft._ortho=!1);for(var Ht=0;Ht<16;++Ht)kt[Ht]=0;kt[15]=1;var zt=0;for(Ht=0;Ht<3;++Ht)zt=Math.max(zt,it[1][Ht]-it[0][Ht]);for(Ht=0;Ht<3;++Ht)kt[5*Ht]=qe.autoScale?qe.aspect[Ht]/(it[1][Ht]-it[0][Ht]):1/zt,qe.autoCenter&&(kt[12+Ht]=.5*-kt[5*Ht]*(it[0][Ht]+it[1][Ht]))}(fe,z),ce=0;ce<De;++ce)(ze=G[ce]).axesBounds=Oe,fe.clipToBounds&&(ze.clipBounds=Oe);P.object&&(N.position=fe.snapToData?P.dataCoordinate:P.dataPosition,N.bounds=Oe),Q&&(Q=!1,function(){if(!Te()){w.colorMask(!0,!0,!0,!0),w.depthMask(!0),w.disable(w.BLEND),w.enable(w.DEPTH_TEST),w.depthFunc(w.LEQUAL);for(var qe=G.length,Ke=re.length,it=0;it<Ke;++it){var ft=re[it];ft.shape=ue,ft.begin();for(var dt=0;dt<qe;++dt)if(W[dt]===it){var kt=G[dt];kt.drawPick&&(kt.pixelRatio=1,kt.drawPick($))}ft.end()}}}()),fe.axesPixels=n(fe.axes,$,Me,Le),fe.onrender&&fe.onrender(),w.bindFramebuffer(w.FRAMEBUFFER,null),w.viewport(0,0,Me,Le),fe.clearRGBA(),w.depthMask(!0),w.colorMask(!0,!0,!0,!0),w.enable(w.DEPTH_TEST),w.depthFunc(w.LEQUAL),w.disable(w.BLEND),w.disable(w.CULL_FACE);var Ue=!1;for(U.enable&&(Ue=Ue||U.isTransparent(),U.draw($)),N.axes=U,P.object&&N.draw($),w.disable(w.CULL_FACE),ce=0;ce<De;++ce)(ze=G[ce]).axes=U,ze.pixelRatio=fe.pixelRatio,ze.isOpaque&&ze.isOpaque()&&ze.draw($),ze.isTransparent&&ze.isTransparent()&&(Ue=!0);if(Ue){for(L.shape=X,L.bind(),w.clear(w.DEPTH_BUFFER_BIT),w.colorMask(!1,!1,!1,!1),w.depthMask(!0),w.depthFunc(w.LESS),U.enable&&U.isTransparent()&&U.drawTransparent($),ce=0;ce<De;++ce)(ze=G[ce]).isOpaque&&ze.isOpaque()&&ze.draw($);for(w.enable(w.BLEND),w.blendEquation(w.FUNC_ADD),w.blendFunc(w.ONE,w.ONE_MINUS_SRC_ALPHA),w.colorMask(!0,!0,!0,!0),w.depthMask(!1),w.clearColor(0,0,0,0),w.clear(w.COLOR_BUFFER_BIT),U.isTransparent()&&U.drawTransparent($),ce=0;ce<De;++ce){var ze;(ze=G[ce]).isTransparent&&ze.isTransparent()&&ze.drawTransparent($)}w.bindFramebuffer(w.FRAMEBUFFER,null),w.blendFunc(w.ONE,w.ONE_MINUS_SRC_ALPHA),w.disable(w.DEPTH_TEST),O.bind(),L.color[0].bind(0),O.uniforms.accumBuffer=0,h(w),w.disable(w.BLEND)}for(ne=!1,ce=0;ce<De;++ce)G[ce].dirty=!1}}}return fe.enableMouseListeners(),function Ie(){fe._stopped||fe.contextLost||(_e(),requestAnimationFrame(Ie))}(),fe.redraw=function(){fe._stopped||(ne=!0,_e())},fe},createCamera:i}},6640:function(p,l,t){var i=t(3236);l.pointVertex=i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),l.pointFragment=i(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),l.pickVertex=i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),l.pickFragment=i(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},4696:function(p,l,t){"use strict";var i=t(9405),r=t(2762),n=t(1888),a=t(6640);function s(y,d,m,g,x){this.plot=y,this.offsetBuffer=d,this.pickBuffer=m,this.shader=g,this.pickShader=x,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}p.exports=function(y,d){var m=y.gl,g=new s(y,r(m),r(m),i(m,a.pointVertex,a.pointFragment),i(m,a.pickVertex,a.pickFragment));return g.update(d),y.addObject(g),g};var c,h,u=s.prototype;u.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},u.update=function(y){var d;function m(w,E){return w in y?y[w]:E}y=y||{},this.sizeMin=m("sizeMin",.5),this.sizeMax=m("sizeMax",20),this.color=m("color",[1,0,0,1]).slice(),this.areaRatio=m("areaRatio",1),this.borderColor=m("borderColor",[0,0,0,1]).slice(),this.blend=m("blend",!1);var g=y.positions.length>>>1,x=y.positions instanceof Float32Array,v=y.idToIndex instanceof Int32Array&&y.idToIndex.length>=g,_=y.positions,f=x?_:n.mallocFloat32(_.length),C=v?y.idToIndex:n.mallocInt32(g);if(x||f.set(_),!v)for(f.set(_),d=0;d<g;d++)C[d]=d;this.points=_,this.offsetBuffer.update(f),this.pickBuffer.update(C),x||n.free(f),v||n.free(C),this.pointCount=g,this.pickOffset=0},u.unifiedDraw=(c=[1,0,0,0,1,0,0,0,1],h=[0,0,0,0],function(y){var d=void 0!==y,m=d?this.pickShader:this.shader,g=this.plot.gl,x=this.plot.dataBox;if(0===this.pointCount)return y;var v=x[2]-x[0],_=x[3]-x[1],f=function(P,L){var O,z=0,V=P.length>>>1;for(O=0;O<V;O++){var R=P[2*O],U=P[2*O+1];R>=L[0]&&R<=L[2]&&U>=L[1]&&U<=L[3]&&z++}return z}(this.points,x),C=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(f,.33333)));c[0]=2/v,c[4]=2/_,c[6]=-2*x[0]/v-1,c[7]=-2*x[1]/_-1,this.offsetBuffer.bind(),m.bind(),m.attributes.position.pointer(),m.uniforms.matrix=c,m.uniforms.color=this.color,m.uniforms.borderColor=this.borderColor,m.uniforms.pointCloud=C<5,m.uniforms.pointSize=C,m.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),d&&(h[0]=255&y,h[1]=y>>8&255,h[2]=y>>16&255,h[3]=y>>24&255,this.pickBuffer.bind(),m.attributes.pickId.pointer(g.UNSIGNED_BYTE),m.uniforms.pickOffset=h,this.pickOffset=y);var w=g.getParameter(g.BLEND),E=g.getParameter(g.DITHER);return w&&!this.blend&&g.disable(g.BLEND),E&&g.disable(g.DITHER),g.drawArrays(g.POINTS,0,this.pointCount),w&&!this.blend&&g.enable(g.BLEND),E&&g.enable(g.DITHER),y+this.pointCount}),u.draw=u.unifiedDraw,u.drawPick=u.unifiedDraw,u.pick=function(y,d,m){var g=this.pickOffset;if(m<g||m>=g+this.pointCount)return null;var v=m-g,_=this.points;return{object:this,pointId:v,dataCoord:[_[2*v],_[2*v+1]]}}},783:function(p){p.exports=function(l,t,i,r){var n,a,s,c,h,u=t[0],y=t[1],d=t[2],m=t[3],g=i[0],x=i[1],v=i[2],_=i[3];return(a=u*g+y*x+d*v+m*_)<0&&(a=-a,g=-g,x=-x,v=-v,_=-_),1-a>1e-6?(n=Math.acos(a),s=Math.sin(n),c=Math.sin((1-r)*n)/s,h=Math.sin(r*n)/s):(c=1-r,h=r),l[0]=c*u+h*g,l[1]=c*y+h*x,l[2]=c*d+h*v,l[3]=c*m+h*_,l}},5964:function(p){"use strict";p.exports=function(l){return l||0===l?l.toString():""}},9366:function(p,l,t){"use strict";var i=t(4359);p.exports=function(n,a,s){var c=[a.style,a.weight,a.variant,a.family].join("_"),h=r[c];if(h||(h=r[c]={}),n in h)return h[n];var u={textAlign:"center",textBaseline:"middle",lineHeight:1,font:a.family,fontStyle:a.style,fontWeight:a.weight,fontVariant:a.variant,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},y=i(n,u);u.triangles=!1;var d,m,g=i(n,u);if(s&&1!==s){for(d=0;d<y.positions.length;++d)for(m=0;m<y.positions[d].length;++m)y.positions[d][m]/=s;for(d=0;d<g.positions.length;++d)for(m=0;m<g.positions[d].length;++m)g.positions[d][m]/=s}var x=[[1/0,1/0],[-1/0,-1/0]],v=g.positions.length;for(d=0;d<v;++d){var _=g.positions[d];for(m=0;m<2;++m)x[0][m]=Math.min(x[0][m],_[m]),x[1][m]=Math.max(x[1][m],_[m])}return h[n]=[y,g,x]};var r={}},1283:function(p,l,t){var i=t(9405),r=t(3236),n=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),a=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),s=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * (view * (model * vec4(position, 1)));\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * (view * (model * vec4(dataPosition, 1)));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),c=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),h=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),u=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],y={vertex:n,fragment:c,attributes:u},d={vertex:a,fragment:c,attributes:u},m={vertex:s,fragment:c,attributes:u},g={vertex:n,fragment:h,attributes:u},x={vertex:a,fragment:h,attributes:u},v={vertex:s,fragment:h,attributes:u};function _(f,C){var w=i(f,C),E=w.attributes;return E.position.location=0,E.color.location=1,E.glyph.location=2,E.id.location=3,w}l.createPerspective=function(f){return _(f,y)},l.createOrtho=function(f){return _(f,d)},l.createProject=function(f){return _(f,m)},l.createPickPerspective=function(f){return _(f,g)},l.createPickOrtho=function(f){return _(f,x)},l.createPickProject=function(f){return _(f,v)}},8418:function(p,l,t){"use strict";var i=t(5219),r=t(2762),n=t(8116),a=t(1888),s=t(6760),c=t(1283),h=t(9366),u=t(5964),y=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],d=ArrayBuffer,m=DataView;function g(ne){return Array.isArray(ne)||d.isView(Q=ne)&&!(Q instanceof m);var Q}function x(ne,Q){var $=ne[0],X=ne[1],oe=ne[2],fe=ne[3];return ne[0]=Q[0]*$+Q[4]*X+Q[8]*oe+Q[12]*fe,ne[1]=Q[1]*$+Q[5]*X+Q[9]*oe+Q[13]*fe,ne[2]=Q[2]*$+Q[6]*X+Q[10]*oe+Q[14]*fe,ne[3]=Q[3]*$+Q[7]*X+Q[11]*oe+Q[15]*fe,ne}function v(ne,Q,$,X){return x(X,X),x(X,X),x(X,X)}function _(ne,Q){this.index=ne,this.dataCoordinate=this.position=Q}function f(ne){return!0===ne||ne>1?1:ne}function C(ne,Q,$,X,oe,fe,ue,ge,we,Te,xe,ye){this.gl=ne,this.pixelRatio=1,this.shader=Q,this.orthoShader=$,this.projectShader=X,this.pointBuffer=oe,this.colorBuffer=fe,this.glyphBuffer=ue,this.idBuffer=ge,this.vao=we,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=Te,this.pickOrthoShader=xe,this.pickProjectShader=ye,this.points=[],this._selectResult=new _(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}p.exports=function(ne){var Q=ne.gl,$=c.createPerspective(Q),X=c.createOrtho(Q),oe=c.createProject(Q),fe=c.createPickPerspective(Q),ue=c.createPickOrtho(Q),ge=c.createPickProject(Q),we=r(Q),Te=r(Q),xe=r(Q),ye=r(Q),_e=new C(Q,$,X,oe,we,Te,xe,ye,n(Q,[{buffer:we,size:3,type:Q.FLOAT},{buffer:Te,size:4,type:Q.FLOAT},{buffer:xe,size:2,type:Q.FLOAT},{buffer:ye,size:4,type:Q.UNSIGNED_BYTE,normalized:!0}]),fe,ue,ge);return _e.update(ne),_e};var w=C.prototype;w.pickSlots=1,w.setPickBase=function(ne){this.pickId=ne},w.isTransparent=function(){if(this.hasAlpha)return!0;for(var ne=0;ne<3;++ne)if(this.axesProject[ne]&&this.projectHasAlpha)return!0;return!1},w.isOpaque=function(){if(!this.hasAlpha)return!0;for(var ne=0;ne<3;++ne)if(this.axesProject[ne]&&!this.projectHasAlpha)return!0;return!1};var E=[0,0],P=[0,0,0],L=[0,0,0],O=[0,0,0,1],z=[0,0,0,1],V=y.slice(),R=[0,0,0],U=[[0,0,0],[0,0,0]];function Z(ne){return ne[0]=ne[1]=ne[2]=0,ne}function N(ne,Q){return ne[0]=Q[0],ne[1]=Q[1],ne[2]=Q[2],ne[3]=1,ne}function G(ne,Q,$,X){return ne[0]=Q[0],ne[1]=Q[1],ne[2]=Q[2],ne[$]=X,ne}var W=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function ae(ne,Q,$,X,oe,fe,ue){var ge=$.gl;if((fe===$.projectHasAlpha||ue)&&function(Te,xe,ye,_e){var Ie,De=xe.axesProject,be=xe.gl,he=Te.uniforms,ce=ye.model||y,me=ye.view||y,Pe=ye.projection||y,Ae=xe.axesBounds,Ce=function(kt){for(var St=U,Tt=0;Tt<2;++Tt)for(var lt=0;lt<3;++lt)St[Tt][lt]=Math.max(Math.min(kt[Tt][lt],1e8),-1e8);return St}(xe.clipBounds);Ie=xe.axes&&xe.axes.lastCubeProps?xe.axes.lastCubeProps.axis:[1,1,1],E[0]=2/be.drawingBufferWidth,E[1]=2/be.drawingBufferHeight,Te.bind(),he.view=me,he.projection=Pe,he.screenSize=E,he.highlightId=xe.highlightId,he.highlightScale=xe.highlightScale,he.clipBounds=Ce,he.pickGroup=xe.pickId/255,he.pixelRatio=_e;for(var Oe=0;Oe<3;++Oe)if(De[Oe]){he.scale=xe.projectScale[Oe],he.opacity=xe.projectOpacity[Oe];for(var Ne=V,je=0;je<16;++je)Ne[je]=0;for(je=0;je<4;++je)Ne[5*je]=1;Ne[5*Oe]=0,Ne[12+Oe]=Ie[Oe]<0?Ae[0][Oe]:Ae[1][Oe],s(Ne,ce,Ne),he.model=Ne;var ve=(Oe+1)%3,Me=(Oe+2)%3,Le=Z(P),Ue=Z(L);Le[ve]=1,Ue[Me]=1;var ze=v(0,0,0,N(O,Le)),qe=v(0,0,0,N(z,Ue));if(Math.abs(ze[1])>Math.abs(qe[1])){var Ke=ze;ze=qe,qe=Ke,Ke=Le,Le=Ue,Ue=Ke;var it=ve;ve=Me,Me=it}ze[0]<0&&(Le[ve]=-1),qe[1]>0&&(Ue[Me]=-1);var ft=0,dt=0;for(je=0;je<4;++je)ft+=Math.pow(ce[4*ve+je],2),dt+=Math.pow(ce[4*Me+je],2);Le[ve]/=Math.sqrt(ft),Ue[Me]/=Math.sqrt(dt),he.axes[0]=Le,he.axes[1]=Ue,he.fragClipBounds[0]=G(R,Ce[0],Oe,-1e8),he.fragClipBounds[1]=G(R,Ce[1],Oe,1e8),xe.vao.bind(),xe.vao.draw(be.TRIANGLES,xe.vertexCount),xe.lineWidth>0&&(be.lineWidth(xe.lineWidth*_e),xe.vao.draw(be.LINES,xe.lineVertexCount,xe.vertexCount)),xe.vao.unbind()}}(Q,$,X,oe),fe===$.hasAlpha||ue){ne.bind();var we=ne.uniforms;we.model=X.model||y,we.view=X.view||y,we.projection=X.projection||y,E[0]=2/ge.drawingBufferWidth,E[1]=2/ge.drawingBufferHeight,we.screenSize=E,we.highlightId=$.highlightId,we.highlightScale=$.highlightScale,we.fragClipBounds=W,we.clipBounds=$.axes.bounds,we.opacity=$.opacity,we.pickGroup=$.pickId/255,we.pixelRatio=oe,$.vao.bind(),$.vao.draw(ge.TRIANGLES,$.vertexCount),$.lineWidth>0&&(ge.lineWidth($.lineWidth*oe),$.vao.draw(ge.LINES,$.lineVertexCount,$.vertexCount)),$.vao.unbind()}}function re(ne,Q,$,X){var oe;oe=g(ne)?Q<ne.length?ne[Q]:void 0:ne,oe=u(oe);var fe=!0;i(oe)&&(oe="\u25bc",fe=!1),$||($={});var ue=$.family;g(ue)&&(ue=ue[Q]),ue||(ue="normal");var ge=$.weight;g(ge)&&(ge=ge[Q]),ge||(ge="normal");var we=$.style;g(we)&&(we=we[Q]),we||(we="normal");var Te=$.variant;g(Te)&&(Te=Te[Q]),Te||(Te="normal");var xe=h(oe,{family:ue,weight:ge,style:we,variant:Te},X);return{mesh:(xe=h(oe,$,X))[0],lines:xe[1],bounds:xe[2],visible:fe}}w.draw=function(ne){ae(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,ne,this.pixelRatio,!1,!1)},w.drawTransparent=function(ne){ae(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,ne,this.pixelRatio,!0,!1)},w.drawPick=function(ne){ae(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,ne,1,!0,!0)},w.pick=function(ne){if(!ne||ne.id!==this.pickId)return null;var Q=ne.value[2]+(ne.value[1]<<8)+(ne.value[0]<<16);if(Q>=this.pointCount||Q<0)return null;var $=this.points[Q],X=this._selectResult;X.index=Q;for(var oe=0;oe<3;++oe)X.position[oe]=X.dataCoordinate[oe]=$[oe];return X},w.highlight=function(ne){if(ne){var Q=ne.index;this.highlightId=[(255&Q)/255,(Q>>8&255)/255,(Q>>16&255)/255,0]}else this.highlightId=[1,1,1,1]},w.update=function(ne){if("perspective"in(ne=ne||{})&&(this.useOrtho=!ne.perspective),"orthographic"in ne&&(this.useOrtho=!!ne.orthographic),"lineWidth"in ne&&(this.lineWidth=ne.lineWidth),"project"in ne)if(g(ne.project))this.axesProject=ne.project;else{var Q=!!ne.project;this.axesProject=[Q,Q,Q]}if("projectScale"in ne)if(g(ne.projectScale))this.projectScale=ne.projectScale.slice();else{var $=+ne.projectScale;this.projectScale=[$,$,$]}if(this.projectHasAlpha=!1,"projectOpacity"in ne){this.projectOpacity=g(ne.projectOpacity)?ne.projectOpacity.slice():[$=+ne.projectOpacity,$,$];for(var X=0;X<3;++X)this.projectOpacity[X]=f(this.projectOpacity[X]),this.projectOpacity[X]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in ne&&(this.opacity=f(ne.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var oe,fe,ue=ne.position,ge={family:ne.font||"normal",style:ne.fontStyle||"normal",weight:ne.fontWeight||"normal",variant:ne.fontVariant||"normal"},we=ne.alignment||[0,0];if(2===we.length)oe=we[0],fe=we[1];else for(oe=[],fe=[],X=0;X<we.length;++X)oe[X]=we[X][0],fe[X]=we[X][1];var Te=[1/0,1/0,1/0],xe=[-1/0,-1/0,-1/0],ye=ne.glyph,_e=ne.color,Ie=ne.size,De=ne.angle,be=ne.lineColor,he=-1,ce=0,me=0,Pe=0;if(ue.length){Pe=ue.length;e:for(X=0;X<Pe;++X){for(var Ae=ue[X],Ce=0;Ce<3;++Ce)if(isNaN(Ae[Ce])||!isFinite(Ae[Ce]))continue e;var Oe=(St=re(ye,X,ge,this.pixelRatio)).mesh,Ne=St.lines,je=St.bounds;ce+=3*Oe.cells.length,me+=2*Ne.edges.length}}var ve=ce+me,Me=a.mallocFloat(3*ve),Le=a.mallocFloat(4*ve),Ue=a.mallocFloat(2*ve),ze=a.mallocUint32(ve);if(ve>0){var qe=0,Ke=ce,it=[0,0,0,1],ft=[0,0,0,1],dt=g(_e)&&g(_e[0]),kt=g(be)&&g(be[0]);e:for(X=0;X<Pe;++X){for(he+=1,Ae=ue[X],Ce=0;Ce<3;++Ce){if(isNaN(Ae[Ce])||!isFinite(Ae[Ce]))continue e;xe[Ce]=Math.max(xe[Ce],Ae[Ce]),Te[Ce]=Math.min(Te[Ce],Ae[Ce])}Oe=(St=re(ye,X,ge,this.pixelRatio)).mesh,Ne=St.lines,je=St.bounds;var St,Tt=St.visible;if(Tt)if(g(_e)){if(3===(lt=dt?X<_e.length?_e[X]:[0,0,0,0]:_e).length){for(Ce=0;Ce<3;++Ce)it[Ce]=lt[Ce];it[3]=1}else if(4===lt.length){for(Ce=0;Ce<4;++Ce)it[Ce]=lt[Ce];!this.hasAlpha&&lt[3]<1&&(this.hasAlpha=!0)}}else it[0]=it[1]=it[2]=0,it[3]=1;else it=[1,1,1,0];if(Tt)if(g(be)){var lt;if(3===(lt=kt?X<be.length?be[X]:[0,0,0,0]:be).length){for(Ce=0;Ce<3;++Ce)ft[Ce]=lt[Ce];ft[Ce]=1}else if(4===lt.length){for(Ce=0;Ce<4;++Ce)ft[Ce]=lt[Ce];!this.hasAlpha&&lt[3]<1&&(this.hasAlpha=!0)}}else ft[0]=ft[1]=ft[2]=0,ft[3]=1;else ft=[1,1,1,0];var ot=.5;Tt?g(Ie)?ot=X<Ie.length?+Ie[X]:12:Ie?ot=+Ie:this.useOrtho&&(ot=12):ot=0;var Rt=0;g(De)?Rt=X<De.length?+De[X]:0:De&&(Rt=+De);var Vt=Math.cos(Rt),Ht=Math.sin(Rt);for(Ae=ue[X],Ce=0;Ce<3;++Ce)xe[Ce]=Math.max(xe[Ce],Ae[Ce]),Te[Ce]=Math.min(Te[Ce],Ae[Ce]);var zt=oe,Qe=fe;zt=0,g(oe)?zt=X<oe.length?oe[X]:0:oe&&(zt=oe),Qe=0,g(fe)?Qe=X<fe.length?fe[X]:0:fe&&(Qe=fe);var nt=[zt*=zt>0?1-je[0][0]:zt<0?1+je[1][0]:1,Qe*=Qe>0?1-je[0][1]:Qe<0?1+je[1][1]:1],We=Oe.cells||[],et=Oe.positions||[];for(Ce=0;Ce<We.length;++Ce)for(var gt=We[Ce],ht=0;ht<3;++ht){for(var Ge=0;Ge<3;++Ge)Me[3*qe+Ge]=Ae[Ge];for(Ge=0;Ge<4;++Ge)Le[4*qe+Ge]=it[Ge];ze[qe]=he;var He=et[gt[ht]];Ue[2*qe]=ot*(Vt*He[0]-Ht*He[1]+nt[0]),Ue[2*qe+1]=ot*(Ht*He[0]+Vt*He[1]+nt[1]),qe+=1}for(We=Ne.edges,et=Ne.positions,Ce=0;Ce<We.length;++Ce)for(gt=We[Ce],ht=0;ht<2;++ht){for(Ge=0;Ge<3;++Ge)Me[3*Ke+Ge]=Ae[Ge];for(Ge=0;Ge<4;++Ge)Le[4*Ke+Ge]=ft[Ge];ze[Ke]=he,Ue[2*Ke]=ot*(Vt*(He=et[gt[ht]])[0]-Ht*He[1]+nt[0]),Ue[2*Ke+1]=ot*(Ht*He[0]+Vt*He[1]+nt[1]),Ke+=1}}}this.bounds=[Te,xe],this.points=ue,this.pointCount=ue.length,this.vertexCount=ce,this.lineVertexCount=me,this.pointBuffer.update(Me),this.colorBuffer.update(Le),this.glyphBuffer.update(Ue),this.idBuffer.update(ze),a.free(Me),a.free(Le),a.free(Ue),a.free(ze)},w.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},4298:function(p,l,t){"use strict";var i=t(3236);l.boxVertex=i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),l.boxFragment=i(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},3161:function(p,l,t){"use strict";var i=t(9405),r=t(2762),n=t(4298);function a(c,h,u){this.plot=c,this.boxBuffer=h,this.boxShader=u,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}p.exports=function(c,h){var u=c.gl,y=new a(c,r(u,[0,0,0,1,1,0,1,1]),i(u,n.boxVertex,n.boxFragment));return y.update(h),c.addOverlay(y),y};var s=a.prototype;s.draw=function(){if(this.enabled){var c=this.plot,h=this.selectBox,u=this.borderWidth,y=this.innerColor,d=this.outerColor,m=this.borderColor,g=c.box,x=c.screenBox,v=c.dataBox,_=c.viewBox,f=c.pixelRatio,C=(h[0]-v[0])*(_[2]-_[0])/(v[2]-v[0])+_[0],w=(h[1]-v[1])*(_[3]-_[1])/(v[3]-v[1])+_[1],E=(h[2]-v[0])*(_[2]-_[0])/(v[2]-v[0])+_[0],P=(h[3]-v[1])*(_[3]-_[1])/(v[3]-v[1])+_[1];if(C=Math.max(C,_[0]),w=Math.max(w,_[1]),E=Math.min(E,_[2]),P=Math.min(P,_[3]),!(E<C||P<w)){g.bind();var L=x[2]-x[0],O=x[3]-x[1];if(this.outerFill&&(g.drawBox(0,0,L,w,d),g.drawBox(0,w,C,P,d),g.drawBox(0,P,L,O,d),g.drawBox(E,w,L,P,d)),this.innerFill&&g.drawBox(C,w,E,P,y),u>0){var z=u*f;g.drawBox(C-z,w-z,E+z,w+z,m),g.drawBox(C-z,P-z,E+z,P+z,m),g.drawBox(C-z,w-z,C+z,P+z,m),g.drawBox(E-z,w-z,E+z,P+z,m)}}}},s.update=function(c){this.innerFill=!!(c=c||{}).innerFill,this.outerFill=!!c.outerFill,this.innerColor=(c.innerColor||[0,0,0,.5]).slice(),this.outerColor=(c.outerColor||[0,0,0,.5]).slice(),this.borderColor=(c.borderColor||[0,0,0,1]).slice(),this.borderWidth=c.borderWidth||0,this.selectBox=(c.selectBox||this.selectBox).slice()},s.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},3589:function(p,l,t){"use strict";p.exports=function(u,y){var d=y[0],m=y[1];return new c(u,i(u,d,m,{}),r.mallocUint8(d*m*4))};var i=t(2260),r=t(1888),n=t(9618),a=t(8828).nextPow2;function s(u,y,d,m,g){this.coord=[u,y],this.id=d,this.value=m,this.distance=g}function c(u,y,d){this.gl=u,this.fbo=y,this.buffer=d,this._readTimeout=null;var m=this;this._readCallback=function(){m.gl&&(y.bind(),u.readPixels(0,0,y.shape[0],y.shape[1],u.RGBA,u.UNSIGNED_BYTE,m.buffer),m._readTimeout=null)}}var h=c.prototype;Object.defineProperty(h,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(u){if(this.gl){this.fbo.shape=u;var y=this.fbo.shape[0],d=this.fbo.shape[1];if(d*y*4>this.buffer.length){r.free(this.buffer);for(var m=this.buffer=r.mallocUint8(a(d*y*4)),g=0;g<d*y*4;++g)m[g]=255}return u}}}),h.begin=function(){var u=this.gl;u&&(this.fbo.bind(),u.clearColor(1,1,1,1),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT))},h.end=function(){var u=this.gl;u&&(u.bindFramebuffer(u.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},h.query=function(u,y,d){if(!this.gl)return null;var m=this.fbo.shape.slice();u|=0,y|=0,"number"!=typeof d&&(d=1);var g=0|Math.min(Math.max(u-d,0),m[0]),x=0|Math.min(Math.max(u+d,0),m[0]),v=0|Math.min(Math.max(y-d,0),m[1]),_=0|Math.min(Math.max(y+d,0),m[1]);if(x<=g||_<=v)return null;var f=[x-g,_-v],C=n(this.buffer,[f[0],f[1],4],[4,4*m[0],1],4*(g+m[0]*v)),w=function(L,O,z){for(var V=1e8,R=-1,U=-1,Z=L.shape[0],N=L.shape[1],G=0;G<Z;G++)for(var W=0;W<N;W++){var ae=L.get(G,W,0),re=L.get(G,W,1),ne=L.get(G,W,2),Q=L.get(G,W,3);if(ae<255||re<255||ne<255||Q<255){var $=O-G,X=z-W,oe=$*$+X*X;oe<V&&(V=oe,R=G,U=W)}}return[R,U,V]}(C.hi(f[0],f[1],1),d,d),E=w[0],P=w[1];return E<0||Math.pow(this.radius,2)<w[2]?null:new s(E+g|0,P+v|0,C.get(E,P,0),[C.get(E,P,1),C.get(E,P,2),C.get(E,P,3)],Math.sqrt(w[2]))},h.dispose=function(){this.gl&&(this.fbo.dispose(),r.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},9405:function(p,l,t){"use strict";var i=t(3327),r=t(8731),n=t(216),a=t(5091),s=t(2145),c=t(8866);function h(d){this.gl=d,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var u=h.prototype;function y(d,m){return d.name<m.name?-1:1}u.bind=function(){var d;this.program||this._relink();var m=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),g=this.gl.lastAttribCount;if(m>g)for(d=g;d<m;d++)this.gl.enableVertexAttribArray(d);else if(g>m)for(d=m;d<g;d++)this.gl.disableVertexAttribArray(d);this.gl.lastAttribCount=m,this.gl.useProgram(this.program)},u.dispose=function(){for(var d=this.gl.lastAttribCount,m=0;m<d;m++)this.gl.disableVertexAttribArray(m);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},u.update=function(d,m,g,x){if(!m||1===arguments.length){var v=d;d=v.vertex,m=v.fragment,g=v.uniforms,x=v.attributes}var _=this,f=_.gl,C=_._vref;_._vref=a.shader(f,f.VERTEX_SHADER,d),C&&C.dispose(),_.vertShader=_._vref.shader;var w=this._fref;if(_._fref=a.shader(f,f.FRAGMENT_SHADER,m),w&&w.dispose(),_.fragShader=_._fref.shader,!g||!x){var E=f.createProgram();if(f.attachShader(E,_.fragShader),f.attachShader(E,_.vertShader),f.linkProgram(E),!f.getProgramParameter(E,f.LINK_STATUS)){var P=f.getProgramInfoLog(E);throw new c(P,"Error linking program:"+P)}g=g||s.uniforms(f,E),x=x||s.attributes(f,E),f.deleteProgram(E)}(x=x.slice()).sort(y);var L,O=[],z=[],V=[];for(L=0;L<x.length;++L){var R=x[L];if(R.type.indexOf("mat")>=0){for(var U=0|R.type.charAt(R.type.length-1),Z=new Array(U),N=0;N<U;++N)Z[N]=V.length,z.push(R.name+"["+N+"]"),"number"==typeof R.location?V.push(R.location+N):Array.isArray(R.location)&&R.location.length===U&&"number"==typeof R.location[N]?V.push(0|R.location[N]):V.push(-1);O.push({name:R.name,type:R.type,locations:Z})}else O.push({name:R.name,type:R.type,locations:[V.length]}),z.push(R.name),V.push("number"==typeof R.location?0|R.location:-1)}var G=0;for(L=0;L<V.length;++L)if(V[L]<0){for(;V.indexOf(G)>=0;)G+=1;V[L]=G}var W=new Array(g.length);function ae(){_.program=a.program(f,_._vref,_._fref,z,V);for(var re=0;re<g.length;++re)W[re]=f.getUniformLocation(_.program,g[re].name)}ae(),_._relink=ae,_.types={uniforms:n(g),attributes:n(x)},_.attributes=r(f,_,O,V),Object.defineProperty(_,"uniforms",i(f,_,g,W))},p.exports=function(d,m,g,x,v){var _=new h(d);return _.update(m,g,x,v),_}},8866:function(p){function l(t,i,r){this.shortMessage=i||"",this.longMessage=r||"",this.rawError=t||"",this.message="gl-shader: "+(i||t||"")+(r?"\n"+r:""),this.stack=(new Error).stack}(l.prototype=new Error).name="GLError",l.prototype.constructor=l,p.exports=l},8731:function(p,l,t){"use strict";p.exports=function(h,u,y,d){for(var m={},g=0,x=y.length;g<x;++g){var v=y[g],_=v.name,f=v.type,C=v.locations;switch(f){case"bool":case"int":case"float":s(h,u,C[0],d,1,m,_);break;default:if(f.indexOf("vec")>=0){if((w=f.charCodeAt(f.length-1)-48)<2||w>4)throw new i("","Invalid data type for attribute "+_+": "+f);s(h,u,C[0],d,w,m,_)}else{if(!(f.indexOf("mat")>=0))throw new i("","Unknown data type for attribute "+_+": "+f);var w;if((w=f.charCodeAt(f.length-1)-48)<2||w>4)throw new i("","Invalid data type for attribute "+_+": "+f);c(h,u,C,d,w,m,_)}}}return m};var i=t(8866);function r(h,u,y,d,m,g){this._gl=h,this._wrapper=u,this._index=y,this._locations=d,this._dimension=m,this._constFunc=g}var n=r.prototype;n.pointer=function(h,u,y,d){var m=this,g=m._gl,x=m._locations[m._index];g.vertexAttribPointer(x,m._dimension,h||g.FLOAT,!!u,y||0,d||0),g.enableVertexAttribArray(x)},n.set=function(h,u,y,d){return this._constFunc(this._locations[this._index],h,u,y,d)},Object.defineProperty(n,"location",{get:function(){return this._locations[this._index]},set:function(h){return h!==this._locations[this._index]&&(this._locations[this._index]=0|h,this._wrapper.program=null),0|h}});var a=[function(h,u,y){return void 0===y.length?h.vertexAttrib1f(u,y):h.vertexAttrib1fv(u,y)},function(h,u,y,d){return void 0===y.length?h.vertexAttrib2f(u,y,d):h.vertexAttrib2fv(u,y)},function(h,u,y,d,m){return void 0===y.length?h.vertexAttrib3f(u,y,d,m):h.vertexAttrib3fv(u,y)},function(h,u,y,d,m,g){return void 0===y.length?h.vertexAttrib4f(u,y,d,m,g):h.vertexAttrib4fv(u,y)}];function s(h,u,y,d,m,g,x){var v=a[m],_=new r(h,u,y,d,m,v);Object.defineProperty(g,x,{set:function(f){return h.disableVertexAttribArray(d[y]),v(h,d[y],f),f},get:function(){return _},enumerable:!0})}function c(h,u,y,d,m,g,x){for(var v=new Array(m),_=new Array(m),f=0;f<m;++f)s(h,u,y[f],d,m,v,f),_[f]=v[f];Object.defineProperty(v,"location",{set:function(E){if(Array.isArray(E))for(var P=0;P<m;++P)_[P].location=E[P];else for(P=0;P<m;++P)_[P].location=E+P;return E},get:function(){for(var E=new Array(m),P=0;P<m;++P)E[P]=d[y[P]];return E},enumerable:!0}),v.pointer=function(E,P,L,O){E=E||h.FLOAT,P=!!P,L=L||m*m,O=O||0;for(var z=0;z<m;++z){var V=d[y[z]];h.vertexAttribPointer(V,m,E,P,L,O+z*m),h.enableVertexAttribArray(V)}};var C=new Array(m),w=h["vertexAttrib"+m+"fv"];Object.defineProperty(g,x,{set:function(E){for(var P=0;P<m;++P){var L=d[y[P]];if(h.disableVertexAttribArray(L),Array.isArray(E[0]))w.call(h,L,E[P]);else{for(var O=0;O<m;++O)C[O]=E[m*P+O];w.call(h,L,C)}}return E},get:function(){return v},enumerable:!0})}},3327:function(p,l,t){"use strict";var i=t(216),r=t(8866);function n(s){return function(){return s}}function a(s,c){for(var h=new Array(s),u=0;u<s;++u)h[u]=c;return h}p.exports=function(s,c,h,u){function y(v){return function(_){for(var f=d("",v),C=0;C<f.length;++C){var w=f[C],E=w[0],P=w[1];if(u[P]){var L=_;if("string"==typeof E&&(0===E.indexOf(".")||0===E.indexOf("["))){var O=E;if(0===E.indexOf(".")&&(O=E.slice(1)),O.indexOf("]")===O.length-1){var z=O.indexOf("["),V=O.slice(0,z),R=O.slice(z+1,O.length-1);L=V?_[V][R]:_[R]}else L=_[O]}var U,Z=h[P].type;switch(Z){case"bool":case"int":case"sampler2D":case"samplerCube":s.uniform1i(u[P],L);break;case"float":s.uniform1f(u[P],L);break;default:var N=Z.indexOf("vec");if(!(0<=N&&N<=1&&Z.length===4+N)){if(0===Z.indexOf("mat")&&4===Z.length){if((U=Z.charCodeAt(Z.length-1)-48)<2||U>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+Z);s["uniformMatrix"+U+"fv"](u[P],!1,L);break}throw new r("","Unknown uniform data type for "+name+": "+Z)}if((U=Z.charCodeAt(Z.length-1)-48)<2||U>4)throw new r("","Invalid data type");switch(Z.charAt(0)){case"b":case"i":s["uniform"+U+"iv"](u[P],L);break;case"v":s["uniform"+U+"fv"](u[P],L);break;default:throw new r("","Unrecognized data type for vector "+name+": "+Z)}}}}}}function d(v,_){if("object"!=typeof _)return[[v,_]];var f=[];for(var C in _){var w=_[C],E=v;parseInt(C)+""===C?E+="["+C+"]":E+="."+C,"object"==typeof w?f.push.apply(f,d(E,w)):f.push([E,w])}return f}function m(v,_,f){if("object"==typeof f){var C=g(f);Object.defineProperty(v,_,{get:n(C),set:y(f),enumerable:!0,configurable:!1})}else u[f]?Object.defineProperty(v,_,{get:(w=f,function(E,P,L){return E.getUniform(P.program,L[w])}),set:y(f),enumerable:!0,configurable:!1}):v[_]=function(E){switch(E){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var P=E.indexOf("vec");if(0<=P&&P<=1&&E.length===4+P){if((L=E.charCodeAt(E.length-1)-48)<2||L>4)throw new r("","Invalid data type");return"b"===E.charAt(0)?a(L,!1):a(L,0)}if(0===E.indexOf("mat")&&4===E.length){var L;if((L=E.charCodeAt(E.length-1)-48)<2||L>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+E);return a(L*L,0)}throw new r("","Unknown uniform data type for "+name+": "+E)}}(h[f].type);var w}function g(v){var _;if(Array.isArray(v)){_=new Array(v.length);for(var f=0;f<v.length;++f)m(_,f,v[f])}else for(var C in _={},v)m(_,C,v[C]);return _}var x=i(h,!0);return{get:n(g(x)),set:y(x),enumerable:!0,configurable:!0}}},216:function(p){"use strict";p.exports=function(l,t){for(var i={},r=0;r<l.length;++r)for(var n=l[r].name.split("."),a=i,s=0;s<n.length;++s){var c=n[s].split("[");if(c.length>1){c[0]in a||(a[c[0]]=[]),a=a[c[0]];for(var h=1;h<c.length;++h){var u=parseInt(c[h]);h<c.length-1||s<n.length-1?(u in a||(a[u]=h<c.length-1?[]:{}),a=a[u]):a[u]=t?r:l[r].type}}else s<n.length-1?(c[0]in a||(a[c[0]]={}),a=a[c[0]]):a[c[0]]=t?r:l[r].type}return i}},2145:function(p,l){"use strict";l.uniforms=function(n,a){for(var s=n.getProgramParameter(a,n.ACTIVE_UNIFORMS),c=[],h=0;h<s;++h){var u=n.getActiveUniform(a,h);if(u){var y=r(n,u.type);if(u.size>1)for(var d=0;d<u.size;++d)c.push({name:u.name.replace("[0]","["+d+"]"),type:y});else c.push({name:u.name,type:y})}}return c},l.attributes=function(n,a){for(var s=n.getProgramParameter(a,n.ACTIVE_ATTRIBUTES),c=[],h=0;h<s;++h){var u=n.getActiveAttrib(a,h);u&&c.push({name:u.name,type:r(n,u.type)})}return c};var t={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},i=null;function r(n,a){if(!i){var s=Object.keys(t);i={};for(var c=0;c<s.length;++c){var h=s[c];i[n[h]]=t[h]}}return i[a]}},5091:function(p,l,t){"use strict";l.shader=function(y,d,m){return u(y).getShaderReference(d,m)},l.program=function(y,d,m,g,x){return u(y).getProgram(d,m,g,x)};var i=t(8866),r=t(2992),n=new(typeof WeakMap>"u"?t(606):WeakMap),a=0;function s(y,d,m,g,x,v,_){this.id=y,this.src=d,this.type=m,this.shader=g,this.count=v,this.programs=[],this.cache=_}function c(y){this.gl=y,this.shaders=[{},{}],this.programs={}}s.prototype.dispose=function(){if(0==--this.count){for(var y=this.cache,d=y.gl,m=this.programs,g=0,x=m.length;g<x;++g){var v=y.programs[m[g]];v&&(delete y.programs[g],d.deleteProgram(v))}d.deleteShader(this.shader),delete y.shaders[this.type===d.FRAGMENT_SHADER|0][this.src]}};var h=c.prototype;function u(y){var d=n.get(y);return d||(d=new c(y),n.set(y,d)),d}h.getShaderReference=function(y,d){var m=this.gl,g=this.shaders[y===m.FRAGMENT_SHADER|0],x=g[d];if(x&&m.isShader(x.shader))x.count+=1;else{var v=function(_,f,C){var w=_.createShader(f);if(_.shaderSource(w,C),_.compileShader(w),!_.getShaderParameter(w,_.COMPILE_STATUS)){var E=_.getShaderInfoLog(w);try{var P=r(E,C,f)}catch(L){throw console.warn("Failed to format compiler error: "+L),new i(E,"Error compiling shader:\n"+E)}throw new i(E,P.short,P.long)}return w}(m,y,d);x=g[d]=new s(a++,d,y,v,[],1,this)}return x},h.getProgram=function(y,d,m,g){var x=[y.id,d.id,m.join(":"),g.join(":")].join("@"),v=this.programs[x];return v&&this.gl.isProgram(v)||(this.programs[x]=v=function(_,f,C,w,E){var P=_.createProgram();_.attachShader(P,f),_.attachShader(P,C);for(var L=0;L<w.length;++L)_.bindAttribLocation(P,E[L],w[L]);if(_.linkProgram(P),!_.getProgramParameter(P,_.LINK_STATUS)){var O=_.getProgramInfoLog(P);throw new i(O,"Error linking program: "+O)}return P}(this.gl,y.shader,d.shader,m,g),y.programs.push(x),d.programs.push(x)),v}},4098:function(p){"use strict";function l(i){this.plot=i,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}p.exports=function(i,r){var n=new l(i);return n.update(r),i.addOverlay(n),n};var t=l.prototype;t.update=function(i){this.enable=((i=i||{}).enable||[!0,!0,!1,!1]).slice(),this.width=(i.width||[1,1,1,1]).slice(),this.color=(i.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(r){return r.slice()}),this.center=(i.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},t.draw=function(){var i=this.enable,r=this.width,n=this.color,a=this.center,s=this.plot,c=s.line,h=s.dataBox,u=s.viewBox;if(c.bind(),h[0]<=a[0]&&a[0]<=h[2]&&h[1]<=a[1]&&a[1]<=h[3]){var y=u[0]+(a[0]-h[0])/(h[2]-h[0])*(u[2]-u[0]),d=u[1]+(a[1]-h[1])/(h[3]-h[1])*(u[3]-u[1]);i[0]&&c.drawLine(y,d,u[0],d,r[0],n[0]),i[1]&&c.drawLine(y,d,y,u[1],r[1],n[1]),i[2]&&c.drawLine(y,d,u[2],d,r[2],n[2]),i[3]&&c.drawLine(y,d,y,u[3],r[3],n[3])}},t.dispose=function(){this.plot.removeOverlay(this)}},1493:function(p,l,t){"use strict";var i=t(3236),r=t(9405),n=i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * (view * (model * vec4(vertexPosition, 1.0)));\n  vec2 clipOffset = (projection * (view * (model * vec4(color, 0.0)))).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),a=i(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);p.exports=function(s){return r(s,n,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},4449:function(p,l,t){"use strict";var i=t(2762),r=t(8116),n=t(1493);p.exports=function(d,m){var g=[];function x(w,E,P,L,O,z){var V=[w,E,P,0,0,0,1];V[L+3]=1,V[L]=O,g.push.apply(g,V),V[6]=-1,g.push.apply(g,V),V[L]=z,g.push.apply(g,V),g.push.apply(g,V),V[6]=1,g.push.apply(g,V),V[L]=O,g.push.apply(g,V)}x(0,0,0,0,0,1),x(0,0,0,1,0,1),x(0,0,0,2,0,1),x(1,0,0,1,-1,1),x(1,0,0,2,-1,1),x(0,1,0,0,-1,1),x(0,1,0,2,-1,1),x(0,0,1,0,-1,1),x(0,0,1,1,-1,1);var v=i(d,g),_=r(d,[{type:d.FLOAT,buffer:v,size:3,offset:0,stride:28},{type:d.FLOAT,buffer:v,size:3,offset:12,stride:28},{type:d.FLOAT,buffer:v,size:1,offset:24,stride:28}]),f=n(d);f.attributes.position.location=0,f.attributes.color.location=1,f.attributes.weight.location=2;var C=new s(d,v,_,f);return C.update(m),C};var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(d,m,g,x){this.gl=d,this.buffer=m,this.vao=g,this.shader=x,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var c=s.prototype,h=[0,0,0],u=[0,0,0],y=[0,0];c.isTransparent=function(){return!1},c.drawTransparent=function(d){},c.draw=function(d){var m=this.gl,g=this.vao,x=this.shader;g.bind(),x.bind();var v,_=d.model||a,f=d.view||a,C=d.projection||a;this.axes&&(v=this.axes.lastCubeProps.axis);for(var w=h,E=u,P=0;P<3;++P)v&&v[P]<0?(w[P]=this.bounds[0][P],E[P]=this.bounds[1][P]):(w[P]=this.bounds[1][P],E[P]=this.bounds[0][P]);for(y[0]=m.drawingBufferWidth,y[1]=m.drawingBufferHeight,x.uniforms.model=_,x.uniforms.view=f,x.uniforms.projection=C,x.uniforms.coordinates=[this.position,w,E],x.uniforms.colors=this.colors,x.uniforms.screenShape=y,P=0;P<3;++P)x.uniforms.lineWidth=this.lineWidth[P]*this.pixelRatio,this.enabled[P]&&(g.draw(m.TRIANGLES,6,6*P),this.drawSides[P]&&g.draw(m.TRIANGLES,12,18+12*P));g.unbind()},c.update=function(d){d&&("bounds"in d&&(this.bounds=d.bounds),"position"in d&&(this.position=d.position),"lineWidth"in d&&(this.lineWidth=d.lineWidth),"colors"in d&&(this.colors=d.colors),"enabled"in d&&(this.enabled=d.enabled),"drawSides"in d&&(this.drawSides=d.drawSides))},c.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},6740:function(p,l,t){var i=t(3236),r=i(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),n=i(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),a=i(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * (view * tubePosition);\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),s=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);l.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},l.pickShader={vertex:a,fragment:s,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7815:function(p,l,t){"use strict";var i=t(2931),r=t(9970),n=["xyz","xzy","yxz","yzx","zxy","zyx"],a=function(y,d){var m,g=y.length;for(m=0;m<g;m++){var x=y[m];if(x===d)return m;if(x>d)return m-1}return m},s=function(y,d,m){return y<d?d:y>m?m:y},c=function(y){var d=1/0;y.sort(function(v,_){return v-_});for(var m=y.length,g=1;g<m;g++){var x=Math.abs(y[g]-y[g-1]);x<d&&(d=x)}return d};p.exports=function(y,d){var m=y.startingPositions,g=y.maxLength||1e3,x=y.tubeSize||1,v=y.absoluteTubeSize,_=y.gridFill||"+x+y+z",f={};-1!==_.indexOf("-x")&&(f.reversedX=!0),-1!==_.indexOf("-y")&&(f.reversedY=!0),-1!==_.indexOf("-z")&&(f.reversedZ=!0),f.filled=n.indexOf(_.replace(/-/g,"").replace(/\+/g,""));var _e,Ie,De,be,C=y.getVelocity||function(_e){return function(Ie,De,be){var he=De.vectors,ce=De.meshgrid,me=Ie[0],Pe=Ie[1],Ae=Ie[2],Ce=ce[0].length,Oe=ce[1].length,Ne=ce[2].length,je=a(ce[0],me),ve=a(ce[1],Pe),Me=a(ce[2],Ae),Le=je+1,Ue=ve+1,ze=Me+1;if(je=s(je,0,Ce-1),Le=s(Le,0,Ce-1),ve=s(ve,0,Oe-1),Ue=s(Ue,0,Oe-1),Me=s(Me,0,Ne-1),ze=s(ze,0,Ne-1),je<0||ve<0||Me<0||Le>Ce-1||Ue>Oe-1||ze>Ne-1)return i.create();var qe,Ke,it,ft,dt,kt,St=ce[0][je],lt=ce[1][ve],Rt=ce[2][Me],Vt=(me-St)/(ce[0][Le]-St),Ht=(Pe-lt)/(ce[1][Ue]-lt),zt=(Ae-Rt)/(ce[2][ze]-Rt);switch(isFinite(Vt)||(Vt=.5),isFinite(Ht)||(Ht=.5),isFinite(zt)||(zt=.5),be.reversedX&&(je=Ce-1-je,Le=Ce-1-Le),be.reversedY&&(ve=Oe-1-ve,Ue=Oe-1-Ue),be.reversedZ&&(Me=Ne-1-Me,ze=Ne-1-ze),be.filled){case 5:dt=Me,kt=ze,it=ve*Ne,ft=Ue*Ne,qe=je*Ne*Oe,Ke=Le*Ne*Oe;break;case 4:dt=Me,kt=ze,qe=je*Ne,Ke=Le*Ne,it=ve*Ne*Ce,ft=Ue*Ne*Ce;break;case 3:it=ve,ft=Ue,dt=Me*Oe,kt=ze*Oe,qe=je*Oe*Ne,Ke=Le*Oe*Ne;break;case 2:it=ve,ft=Ue,qe=je*Oe,Ke=Le*Oe,dt=Me*Oe*Ce,kt=ze*Oe*Ce;break;case 1:qe=je,Ke=Le,dt=Me*Ce,kt=ze*Ce,it=ve*Ce*Ne,ft=Ue*Ce*Ne;break;default:qe=je,Ke=Le,it=ve*Ce,ft=Ue*Ce,dt=Me*Ce*Oe,kt=ze*Ce*Oe}var Qe=he[qe+it+dt],nt=he[qe+it+kt],We=he[qe+ft+dt],et=he[qe+ft+kt],gt=he[Ke+it+dt],ht=he[Ke+it+kt],Ge=he[Ke+ft+dt],He=he[Ke+ft+kt],ut=i.create(),tt=i.create(),xt=i.create(),At=i.create();i.lerp(ut,Qe,gt,Vt),i.lerp(tt,nt,ht,Vt),i.lerp(xt,We,Ge,Vt),i.lerp(At,et,He,Vt);var Mt=i.create(),yt=i.create();i.lerp(Mt,ut,xt,Ht),i.lerp(yt,tt,At,Ht);var Pt=i.create();return i.lerp(Pt,Mt,yt,zt),Pt}(_e,y,f)},w=y.getDivergence||function(_e,Ie){var De=i.create(),be=1e-4;i.add(De,_e,[be,0,0]);var he=C(De);i.subtract(he,he,Ie),i.scale(he,he,1/be),i.add(De,_e,[0,be,0]);var ce=C(De);i.subtract(ce,ce,Ie),i.scale(ce,ce,1/be),i.add(De,_e,[0,0,be]);var me=C(De);return i.subtract(me,me,Ie),i.scale(me,me,1/be),i.add(De,he,ce),i.add(De,De,me),De},E=[],P=d[0][0],L=d[0][1],O=d[0][2],z=d[1][0],V=d[1][1],R=d[1][2],Z=10*i.distance(d[0],d[1])/g,N=Z*Z,G=1,W=0,ae=m.length;ae>1&&(G=function(_e){for(var Ie=[],De=[],be=[],he={},ce={},me={},Pe=_e.length,Ae=0;Ae<Pe;Ae++){var Ce=_e[Ae],Oe=Ce[0],Ne=Ce[1],je=Ce[2];he[Oe]||(Ie.push(Oe),he[Oe]=!0),ce[Ne]||(De.push(Ne),ce[Ne]=!0),me[je]||(be.push(je),me[je]=!0)}var ve=c(Ie),Me=c(De),Le=c(be),Ue=Math.min(ve,Me,Le);return isFinite(Ue)?Ue:1}(m));for(var re=0;re<ae;re++){var ne=i.create();i.copy(ne,m[re]);var Q=[ne],$=[],X=C(ne),oe=ne;$.push(X);var fe=[],ue=w(ne,X),ge=i.length(ue);isFinite(ge)&&ge>W&&(W=ge),fe.push(ge),E.push({points:Q,velocities:$,divergences:fe});for(var we=0;we<100*g&&Q.length<g&&(Ie=void 0,De=void 0,be=void 0,De=(_e=ne)[1],be=_e[2],!((Ie=_e[0])<P||Ie>z||De<L||De>V||be<O||be>R));){we++;var Te=i.clone(X),xe=i.squaredLength(Te);if(0===xe)break;xe>N&&i.scale(Te,Te,Z/Math.sqrt(xe)),i.add(Te,Te,ne),X=C(Te),i.squaredDistance(oe,Te)-N>-1e-4*N&&(Q.push(Te),oe=Te,$.push(X),ue=w(Te,X),ge=i.length(ue),isFinite(ge)&&ge>W&&(W=ge),fe.push(ge)),ne=Te}}var ye=function(_e,Ie,De,be){for(var he=0,ce=0;ce<_e.length;ce++)for(var me=_e[ce].velocities,Pe=0;Pe<me.length;Pe++)he=Math.max(he,i.length(me[Pe]));var Ae=_e.map(function(qe){return function(Ke,it,ft,dt){for(var kt=Ke.points,St=Ke.velocities,Tt=Ke.divergences,lt=[],ot=[],Rt=[],Vt=[],Ht=[],zt=[],Qe=0,nt=0,We=r.create(),et=r.create(),gt=0;gt<kt.length;gt++){var ht=kt[gt],Ge=St[gt],He=Tt[gt];0===it&&(He=.05*ft),nt=i.length(Ge)/dt,We=r.create(),i.copy(We,Ge),We[3]=He;for(var ut=0;ut<8;ut++)Ht[ut]=[ht[0],ht[1],ht[2],ut];if(Vt.length>0)for(ut=0;ut<8;ut++){var tt=(ut+1)%8;lt.push(Vt[ut],Ht[ut],Ht[tt],Ht[tt],Vt[tt],Vt[ut]),Rt.push(et,We,We,We,et,et),zt.push(Qe,nt,nt,nt,Qe,Qe);var xt=lt.length;ot.push([xt-6,xt-5,xt-4],[xt-3,xt-2,xt-1])}var At=Vt;Vt=Ht,Ht=At;var Mt=et;et=We,We=Mt;var yt=Qe;Qe=nt,nt=yt}return{positions:lt,cells:ot,vectors:Rt,vertexIntensity:zt}}(qe,De,be,he)}),Ce=[],Oe=[],Ne=[],je=[];for(ce=0;ce<Ae.length;ce++){var ve=Ae[ce],Me=Ce.length;for(Ce=Ce.concat(ve.positions),Ne=Ne.concat(ve.vectors),je=je.concat(ve.vertexIntensity),Pe=0;Pe<ve.cells.length;Pe++){var Le=ve.cells[Pe],Ue=[];Oe.push(Ue);for(var ze=0;ze<Le.length;ze++)Ue.push(Le[ze]+Me)}}return{positions:Ce,cells:Oe,vectors:Ne,vertexIntensity:je,colormap:Ie}}(E,y.colormap,W,G);return v?ye.tubeScale=v:(0===W&&(W=1),ye.tubeScale=.5*x*G/W),ye};var h=t(6740),u=t(6405).createMesh;p.exports.createTubeMesh=function(y,d){return u(y,d,{shaders:h,traceType:"streamtube"})}},990:function(p,l,t){var i=t(9405),r=t(3236),n=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  mat4 objectOffsetTranslation = mat4(1.0) + mat4(vec4(0), vec4(0), vec4(0), vec4(objectOffset, 0));\n  vec4 worldPosition = (model * objectOffsetTranslation) * vec4(localCoordinate, 1.0);\n  vec4 clipPosition = projection * (view * worldPosition);\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),a=r(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color \u2014 in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),s=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  mat4 objectOffsetTranslation = mat4(1.0) + mat4(vec4(0), vec4(0), vec4(0), vec4(objectOffset, 0));\n  vec4 worldPosition = (model * objectOffsetTranslation) * vec4(dataCoordinate, 1.0);\n\n  vec4 clipPosition = projection * (view * worldPosition);\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),c=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);l.createShader=function(h){var u=i(h,n,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return u.attributes.uv.location=0,u.attributes.f.location=1,u.attributes.normal.location=2,u},l.createPickShader=function(h){var u=i(h,n,c,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return u.attributes.uv.location=0,u.attributes.f.location=1,u.attributes.normal.location=2,u},l.createContourShader=function(h){var u=i(h,s,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return u.attributes.uv.location=0,u.attributes.f.location=1,u},l.createPickContourShader=function(h){var u=i(h,s,c,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return u.attributes.uv.location=0,u.attributes.f.location=1,u}},9499:function(p,l,t){"use strict";p.exports=function(ue){var ge=ue.gl,we=f(ge),Te=w(ge),xe=C(ge),ye=E(ge),_e=r(ge),Ie=n(ge,[{buffer:_e,size:4,stride:P,offset:0},{buffer:_e,size:3,stride:P,offset:16},{buffer:_e,size:3,stride:P,offset:28}]),De=r(ge),be=n(ge,[{buffer:De,size:4,stride:20,offset:0},{buffer:De,size:1,stride:20,offset:16}]),he=r(ge),ce=n(ge,[{buffer:he,size:2,type:ge.FLOAT}]),me=a(ge,1,R,ge.RGBA,ge.UNSIGNED_BYTE);me.minFilter=ge.LINEAR,me.magFilter=ge.LINEAR;var Pe=new U(ge,[0,0],[[0,0,0],[0,0,0]],we,Te,_e,Ie,me,xe,ye,De,be,he,ce,[0,0,0]),Ae={levels:[[],[],[]]};for(var Ce in ue)Ae[Ce]=ue[Ce];return Ae.colormap=Ae.colormap||"jet",Pe.update(Ae),Pe};var i=t(8828),r=t(2762),n=t(8116),a=t(7766),s=t(1888),c=t(6729),h=t(5298),u=t(9994),y=t(9618),d=t(3711),m=t(6760),g=t(7608),x=t(2478),v=t(6199),_=t(990),f=_.createShader,C=_.createContourShader,w=_.createPickShader,E=_.createPickContourShader,P=40,L=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],O=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],z=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function V(ue,ge,we,Te,xe){this.position=ue,this.index=ge,this.uv=we,this.level=Te,this.dataCoordinate=xe}!function(){for(var ue=0;ue<3;++ue){var ge=z[ue],we=(ue+2)%3;ge[(ue+1)%3+0]=1,ge[we+3]=1,ge[ue+6]=1}}();var R=256;function U(ue,ge,we,Te,xe,ye,_e,Ie,De,be,he,ce,me,Pe,Ae){this.gl=ue,this.shape=ge,this.bounds=we,this.objectOffset=Ae,this.intensityBounds=[],this._shader=Te,this._pickShader=xe,this._coordinateBuffer=ye,this._vao=_e,this._colorMap=Ie,this._contourShader=De,this._contourPickShader=be,this._contourBuffer=he,this._contourVAO=ce,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new V([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=me,this._dynamicVAO=Pe,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[y(s.mallocFloat(1024),[0,0]),y(s.mallocFloat(1024),[0,0]),y(s.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var Z=U.prototype;Z.genColormap=function(ue,ge){var we=!1,Te=u([c({colormap:ue,nshades:R,format:"rgba"}).map(function(xe,ye){var _e=ge?function(Ie,De){if(!De||!De.length)return 1;for(var be=0;be<De.length;++be){if(De.length<2)return 1;if(De[be][0]===Ie)return De[be][1];if(De[be][0]>Ie&&be>0){var he=(De[be][0]-Ie)/(De[be][0]-De[be-1][0]);return De[be][1]*(1-he)+he*De[be-1][1]}}return 1}(ye/255,ge):xe[3];return _e<1&&(we=!0),[xe[0],xe[1],xe[2],255*_e]})]);return h.divseq(Te,255),this.hasAlphaScale=we,Te},Z.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},Z.isOpaque=function(){return!this.isTransparent()},Z.pickSlots=1,Z.setPickBase=function(ue){this.pickId=ue};var N=[0,0,0],G={showSurface:!1,showContour:!1,projections:[L.slice(),L.slice(),L.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function W(ue,ge){var we,Te,xe,ye=ge.axes&&ge.axes.lastCubeProps.axis||N,_e=ge.showSurface,Ie=ge.showContour;for(we=0;we<3;++we)for(_e=_e||ge.surfaceProject[we],Te=0;Te<3;++Te)Ie=Ie||ge.contourProject[we][Te];for(we=0;we<3;++we){var De=G.projections[we];for(Te=0;Te<16;++Te)De[Te]=0;for(Te=0;Te<4;++Te)De[5*Te]=1;De[5*we]=0,De[12+we]=ge.axesBounds[+(ye[we]>0)][we],m(De,ue.model,De);var be=G.clipBounds[we];for(xe=0;xe<2;++xe)for(Te=0;Te<3;++Te)be[xe][Te]=ue.clipBounds[xe][Te];be[0][we]=-1e8,be[1][we]=1e8}return G.showSurface=_e,G.showContour=Ie,G}var ae={model:L,view:L,projection:L,inverseModel:L.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},re=L.slice(),ne=[1,0,0,0,1,0,0,0,1];function Q(ue,ge){ue=ue||{};var we=this.gl;we.disable(we.CULL_FACE),this._colorMap.bind(0);var Te=ae;Te.model=ue.model||L,Te.view=ue.view||L,Te.projection=ue.projection||L,Te.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],Te.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],Te.objectOffset=this.objectOffset,Te.contourColor=this.contourColor[0],Te.inverseModel=g(Te.inverseModel,Te.model);for(var xe=0;xe<2;++xe)for(var ye=Te.clipBounds[xe],_e=0;_e<3;++_e)ye[_e]=Math.min(Math.max(this.clipBounds[xe][_e],-1e8),1e8);Te.kambient=this.ambientLight,Te.kdiffuse=this.diffuseLight,Te.kspecular=this.specularLight,Te.roughness=this.roughness,Te.fresnel=this.fresnel,Te.opacity=this.opacity,Te.height=0,Te.permutation=ne,Te.vertexColor=this.vertexColor;var Ie=re;for(m(Ie,Te.view,Te.model),m(Ie,Te.projection,Ie),g(Ie,Ie),xe=0;xe<3;++xe)Te.eyePosition[xe]=Ie[12+xe]/Ie[15];var De=Ie[15];for(xe=0;xe<3;++xe)De+=this.lightPosition[xe]*Ie[4*xe+3];for(xe=0;xe<3;++xe){var be=Ie[12+xe];for(_e=0;_e<3;++_e)be+=Ie[4*_e+xe]*this.lightPosition[_e];Te.lightPosition[xe]=be/De}var he=W(Te,this);if(he.showSurface){for(this._shader.bind(),this._shader.uniforms=Te,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(we.TRIANGLES,this._vertexCount),xe=0;xe<3;++xe)this.surfaceProject[xe]&&this.vertexCount&&(this._shader.uniforms.model=he.projections[xe],this._shader.uniforms.clipBounds=he.clipBounds[xe],this._vao.draw(we.TRIANGLES,this._vertexCount));this._vao.unbind()}if(he.showContour){var ce=this._contourShader;Te.kambient=1,Te.kdiffuse=0,Te.kspecular=0,Te.opacity=1,ce.bind(),ce.uniforms=Te;var me=this._contourVAO;for(me.bind(),xe=0;xe<3;++xe)for(ce.uniforms.permutation=z[xe],we.lineWidth(this.contourWidth[xe]*this.pixelRatio),_e=0;_e<this.contourLevels[xe].length;++_e)_e===this.highlightLevel[xe]?(ce.uniforms.contourColor=this.highlightColor[xe],ce.uniforms.contourTint=this.highlightTint[xe]):0!==_e&&_e-1!==this.highlightLevel[xe]||(ce.uniforms.contourColor=this.contourColor[xe],ce.uniforms.contourTint=this.contourTint[xe]),this._contourCounts[xe][_e]&&(ce.uniforms.height=this.contourLevels[xe][_e],me.draw(we.LINES,this._contourCounts[xe][_e],this._contourOffsets[xe][_e]));for(xe=0;xe<3;++xe)for(ce.uniforms.model=he.projections[xe],ce.uniforms.clipBounds=he.clipBounds[xe],_e=0;_e<3;++_e)if(this.contourProject[xe][_e]){ce.uniforms.permutation=z[_e],we.lineWidth(this.contourWidth[_e]*this.pixelRatio);for(var Pe=0;Pe<this.contourLevels[_e].length;++Pe)Pe===this.highlightLevel[_e]?(ce.uniforms.contourColor=this.highlightColor[_e],ce.uniforms.contourTint=this.highlightTint[_e]):0!==Pe&&Pe-1!==this.highlightLevel[_e]||(ce.uniforms.contourColor=this.contourColor[_e],ce.uniforms.contourTint=this.contourTint[_e]),this._contourCounts[_e][Pe]&&(ce.uniforms.height=this.contourLevels[_e][Pe],me.draw(we.LINES,this._contourCounts[_e][Pe],this._contourOffsets[_e][Pe]))}for(me.unbind(),(me=this._dynamicVAO).bind(),xe=0;xe<3;++xe)if(0!==this._dynamicCounts[xe])for(ce.uniforms.model=Te.model,ce.uniforms.clipBounds=Te.clipBounds,ce.uniforms.permutation=z[xe],we.lineWidth(this.dynamicWidth[xe]*this.pixelRatio),ce.uniforms.contourColor=this.dynamicColor[xe],ce.uniforms.contourTint=this.dynamicTint[xe],ce.uniforms.height=this.dynamicLevel[xe],me.draw(we.LINES,this._dynamicCounts[xe],this._dynamicOffsets[xe]),_e=0;_e<3;++_e)this.contourProject[_e][xe]&&(ce.uniforms.model=he.projections[_e],ce.uniforms.clipBounds=he.clipBounds[_e],me.draw(we.LINES,this._dynamicCounts[xe],this._dynamicOffsets[xe]));me.unbind()}}Z.draw=function(ue){return Q.call(this,ue,!1)},Z.drawTransparent=function(ue){return Q.call(this,ue,!0)};var $={model:L,view:L,projection:L,inverseModel:L,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function X(ue,ge){return Array.isArray(ue)?[ge(ue[0]),ge(ue[1]),ge(ue[2])]:[ge(ue),ge(ue),ge(ue)]}function oe(ue){return Array.isArray(ue)?3===ue.length?[ue[0],ue[1],ue[2],1]:[ue[0],ue[1],ue[2],ue[3]]:[0,0,0,1]}function fe(ue){if(Array.isArray(ue)){if(Array.isArray(ue))return[oe(ue[0]),oe(ue[1]),oe(ue[2])];var ge=oe(ue);return[ge.slice(),ge.slice(),ge.slice()]}}Z.drawPick=function(ue){ue=ue||{};var ge=this.gl;ge.disable(ge.CULL_FACE);var we=$;we.model=ue.model||L,we.view=ue.view||L,we.projection=ue.projection||L,we.shape=this._field[2].shape,we.pickId=this.pickId/255,we.lowerBound=this.bounds[0],we.upperBound=this.bounds[1],we.objectOffset=this.objectOffset,we.permutation=ne;for(var Te=0;Te<2;++Te)for(var xe=we.clipBounds[Te],ye=0;ye<3;++ye)xe[ye]=Math.min(Math.max(this.clipBounds[Te][ye],-1e8),1e8);var _e=W(we,this);if(_e.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=we,this._vao.bind(),this._vao.draw(ge.TRIANGLES,this._vertexCount),Te=0;Te<3;++Te)this.surfaceProject[Te]&&(this._pickShader.uniforms.model=_e.projections[Te],this._pickShader.uniforms.clipBounds=_e.clipBounds[Te],this._vao.draw(ge.TRIANGLES,this._vertexCount));this._vao.unbind()}if(_e.showContour){var Ie=this._contourPickShader;Ie.bind(),Ie.uniforms=we;var De=this._contourVAO;for(De.bind(),ye=0;ye<3;++ye)for(ge.lineWidth(this.contourWidth[ye]*this.pixelRatio),Ie.uniforms.permutation=z[ye],Te=0;Te<this.contourLevels[ye].length;++Te)this._contourCounts[ye][Te]&&(Ie.uniforms.height=this.contourLevels[ye][Te],De.draw(ge.LINES,this._contourCounts[ye][Te],this._contourOffsets[ye][Te]));for(Te=0;Te<3;++Te)for(Ie.uniforms.model=_e.projections[Te],Ie.uniforms.clipBounds=_e.clipBounds[Te],ye=0;ye<3;++ye)if(this.contourProject[Te][ye]){Ie.uniforms.permutation=z[ye],ge.lineWidth(this.contourWidth[ye]*this.pixelRatio);for(var be=0;be<this.contourLevels[ye].length;++be)this._contourCounts[ye][be]&&(Ie.uniforms.height=this.contourLevels[ye][be],De.draw(ge.LINES,this._contourCounts[ye][be],this._contourOffsets[ye][be]))}De.unbind()}},Z.pick=function(ue){if(!ue||ue.id!==this.pickId)return null;var ge=this._field[2].shape,we=this._pickResult,Te=ge[0]*(ue.value[0]+(ue.value[2]>>4)/16)/255,xe=Math.floor(Te),ye=Te-xe,_e=ge[1]*(ue.value[1]+(15&ue.value[2])/16)/255,Ie=Math.floor(_e),De=_e-Ie;xe+=1,Ie+=1;var be=we.position;be[0]=be[1]=be[2]=0;for(var he=0;he<2;++he)for(var ce=he?ye:1-ye,me=0;me<2;++me)for(var Pe=xe+he,Ae=Ie+me,Ce=ce*(me?De:1-De),Oe=0;Oe<3;++Oe)be[Oe]+=this._field[Oe].get(Pe,Ae)*Ce;for(var Ne=this._pickResult.level,je=0;je<3;++je)if(Ne[je]=x.le(this.contourLevels[je],be[je]),Ne[je]<0)this.contourLevels[je].length>0&&(Ne[je]=0);else if(Ne[je]<this.contourLevels[je].length-1){var Me=this.contourLevels[je][Ne[je]+1];Math.abs(this.contourLevels[je][Ne[je]]-be[je])>Math.abs(Me-be[je])&&(Ne[je]+=1)}for(we.index[0]=ye<.5?xe:xe+1,we.index[1]=De<.5?Ie:Ie+1,we.uv[0]=Te/ge[0],we.uv[1]=_e/ge[1],Oe=0;Oe<3;++Oe)we.dataCoordinate[Oe]=this._field[Oe].get(we.index[0],we.index[1]);return we},Z.padField=function(ue,ge){var we=ge.shape.slice(),Te=ue.shape.slice();h.assign(ue.lo(1,1).hi(we[0],we[1]),ge),h.assign(ue.lo(1).hi(we[0],1),ge.hi(we[0],1)),h.assign(ue.lo(1,Te[1]-1).hi(we[0],1),ge.lo(0,we[1]-1).hi(we[0],1)),h.assign(ue.lo(0,1).hi(1,we[1]),ge.hi(1)),h.assign(ue.lo(Te[0]-1,1).hi(1,we[1]),ge.lo(we[0]-1)),ue.set(0,0,ge.get(0,0)),ue.set(0,Te[1]-1,ge.get(0,we[1]-1)),ue.set(Te[0]-1,0,ge.get(we[0]-1,0)),ue.set(Te[0]-1,Te[1]-1,ge.get(we[0]-1,we[1]-1))},Z.update=function(ue){this.objectOffset=(ue=ue||{}).objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in ue&&(this.contourWidth=X(ue.contourWidth,Number)),"showContour"in ue&&(this.showContour=X(ue.showContour,Boolean)),"showSurface"in ue&&(this.showSurface=!!ue.showSurface),"contourTint"in ue&&(this.contourTint=X(ue.contourTint,Boolean)),"contourColor"in ue&&(this.contourColor=fe(ue.contourColor)),"contourProject"in ue&&(this.contourProject=X(ue.contourProject,function(wn){return X(wn,Boolean)})),"surfaceProject"in ue&&(this.surfaceProject=ue.surfaceProject),"dynamicColor"in ue&&(this.dynamicColor=fe(ue.dynamicColor)),"dynamicTint"in ue&&(this.dynamicTint=X(ue.dynamicTint,Number)),"dynamicWidth"in ue&&(this.dynamicWidth=X(ue.dynamicWidth,Number)),"opacity"in ue&&(this.opacity=ue.opacity),"opacityscale"in ue&&(this.opacityscale=ue.opacityscale),"colorBounds"in ue&&(this.colorBounds=ue.colorBounds),"vertexColor"in ue&&(this.vertexColor=ue.vertexColor?1:0),"colormap"in ue&&this._colorMap.setPixels(this.genColormap(ue.colormap,this.opacityscale));var ge=ue.field||ue.coords&&ue.coords[2]||null,we=!1;if(ge||(ge=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in ue||"coords"in ue){var Te=(ge.shape[0]+2)*(ge.shape[1]+2);Te>this._field[2].data.length&&(s.freeFloat(this._field[2].data),this._field[2].data=s.mallocFloat(i.nextPow2(Te))),this._field[2]=y(this._field[2].data,[ge.shape[0]+2,ge.shape[1]+2]),this.padField(this._field[2],ge),this.shape=ge.shape.slice();for(var xe=this.shape,ye=0;ye<2;++ye)this._field[2].size>this._field[ye].data.length&&(s.freeFloat(this._field[ye].data),this._field[ye].data=s.mallocFloat(this._field[2].size)),this._field[ye]=y(this._field[ye].data,[xe[0]+2,xe[1]+2]);if(ue.coords){var _e=ue.coords;if(!Array.isArray(_e)||3!==_e.length)throw new Error("gl-surface: invalid coordinates for x/y");for(ye=0;ye<2;++ye){var Ie=_e[ye];for(me=0;me<2;++me)if(Ie.shape[me]!==xe[me])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[ye],Ie)}}else if(ue.ticks){var De=ue.ticks;if(!Array.isArray(De)||2!==De.length)throw new Error("gl-surface: invalid ticks");for(ye=0;ye<2;++ye){var be=De[ye];if((Array.isArray(be)||be.length)&&(be=y(be)),be.shape[0]!==xe[ye])throw new Error("gl-surface: invalid tick length");var he=y(be.data,xe);he.stride[ye]=be.stride[0],he.stride[1^ye]=0,this.padField(this._field[ye],he)}}else{for(ye=0;ye<2;++ye){var ce=[0,0];ce[ye]=1,this._field[ye]=y(this._field[ye].data,[xe[0]+2,xe[1]+2],ce,0)}this._field[0].set(0,0,0);for(var me=0;me<xe[0];++me)this._field[0].set(me+1,0,me);for(this._field[0].set(xe[0]+1,0,xe[0]-1),this._field[1].set(0,0,0),me=0;me<xe[1];++me)this._field[1].set(0,me+1,me);this._field[1].set(0,xe[1]+1,xe[1]-1)}var Pe=this._field,Ae=y(s.mallocFloat(3*Pe[2].size*2),[3,xe[0]+2,xe[1]+2,2]);for(ye=0;ye<3;++ye)v(Ae.pick(ye),Pe[ye],"mirror");var Ce=y(s.mallocFloat(3*Pe[2].size),[xe[0]+2,xe[1]+2,3]);for(ye=0;ye<xe[0]+2;++ye)for(me=0;me<xe[1]+2;++me){var Oe=Ae.get(0,ye,me,0),Ne=Ae.get(0,ye,me,1),je=Ae.get(1,ye,me,0),ve=Ae.get(1,ye,me,1),Me=Ae.get(2,ye,me,0),Le=Ae.get(2,ye,me,1),Ue=je*Le-ve*Me,ze=Me*Ne-Le*Oe,qe=Oe*ve-Ne*je,Ke=Math.sqrt(Ue*Ue+ze*ze+qe*qe);Ke<1e-8?(Ke=Math.max(Math.abs(Ue),Math.abs(ze),Math.abs(qe)))<1e-8?(qe=1,ze=Ue=0,Ke=1):Ke=1/Ke:Ke=1/Math.sqrt(Ke),Ce.set(ye,me,0,Ue*Ke),Ce.set(ye,me,1,ze*Ke),Ce.set(ye,me,2,qe*Ke)}s.free(Ae.data);var it=[1/0,1/0,1/0],ft=[-1/0,-1/0,-1/0],dt=1/0,kt=-1/0,Tt=s.mallocFloat(i.nextPow2((xe[0]-1)*(xe[1]-1)*6*10)),lt=0,ot=0;for(ye=0;ye<xe[0]-1;++ye)e:for(me=0;me<xe[1]-1;++me){for(var Rt=0;Rt<2;++Rt)for(var Vt=0;Vt<2;++Vt)for(var Ht=0;Ht<3;++Ht){var zt=this._field[Ht].get(1+ye+Rt,1+me+Vt);if(isNaN(zt)||!isFinite(zt))continue e}for(Ht=0;Ht<6;++Ht){var Qe=ye+O[Ht][0],nt=me+O[Ht][1],We=this._field[0].get(Qe+1,nt+1),et=this._field[1].get(Qe+1,nt+1);zt=this._field[2].get(Qe+1,nt+1),Ue=Ce.get(Qe+1,nt+1,0),ze=Ce.get(Qe+1,nt+1,1),qe=Ce.get(Qe+1,nt+1,2),ue.intensity&&(gt=ue.intensity.get(Qe,nt));var gt=ue.intensity?ue.intensity.get(Qe,nt):zt+this.objectOffset[2];Tt[lt++]=Qe,Tt[lt++]=nt,Tt[lt++]=We,Tt[lt++]=et,Tt[lt++]=zt,Tt[lt++]=0,Tt[lt++]=gt,Tt[lt++]=Ue,Tt[lt++]=ze,Tt[lt++]=qe,it[0]=Math.min(it[0],We+this.objectOffset[0]),it[1]=Math.min(it[1],et+this.objectOffset[1]),it[2]=Math.min(it[2],zt+this.objectOffset[2]),dt=Math.min(dt,gt),ft[0]=Math.max(ft[0],We+this.objectOffset[0]),ft[1]=Math.max(ft[1],et+this.objectOffset[1]),ft[2]=Math.max(ft[2],zt+this.objectOffset[2]),kt=Math.max(kt,gt),ot+=1}}for(ue.intensityBounds&&(dt=+ue.intensityBounds[0],kt=+ue.intensityBounds[1]),ye=6;ye<lt;ye+=10)Tt[ye]=(Tt[ye]-dt)/(kt-dt);this._vertexCount=ot,this._coordinateBuffer.update(Tt.subarray(0,lt)),s.freeFloat(Tt),s.free(Ce.data),this.bounds=[it,ft],this.intensity=ue.intensity||this._field[2],this.intensityBounds[0]===dt&&this.intensityBounds[1]===kt||(we=!0),this.intensityBounds=[dt,kt]}if("levels"in ue){var ht=ue.levels;for(ht=Array.isArray(ht[0])?ht.slice():[[],[],ht],ye=0;ye<3;++ye)ht[ye]=ht[ye].slice(),ht[ye].sort(function(wn,pn){return wn-pn});for(ye=0;ye<3;++ye)for(me=0;me<ht[ye].length;++me)ht[ye][me]-=this.objectOffset[ye];e:for(ye=0;ye<3;++ye){if(ht[ye].length!==this.contourLevels[ye].length){we=!0;break}for(me=0;me<ht[ye].length;++me)if(ht[ye][me]!==this.contourLevels[ye][me]){we=!0;break e}}this.contourLevels=ht}if(we){Pe=this._field,xe=this.shape;for(var Ge=[],He=0;He<3;++He){var ut=this.contourLevels[He],tt=[],xt=[],At=[0,0,0];for(ye=0;ye<ut.length;++ye){var Mt=d(this._field[He],ut[ye]);tt.push(Ge.length/5|0),ot=0;e:for(me=0;me<Mt.cells.length;++me){var yt=Mt.cells[me];for(Ht=0;Ht<2;++Ht){var Pt=Mt.positions[yt[Ht]],Ct=Pt[0],Dt=0|Math.floor(Ct),Ut=Ct-Dt,Bt=Pt[1],qt=0|Math.floor(Bt),an=Bt-qt,mn=!1;t:for(var Qt=0;Qt<3;++Qt){At[Qt]=0;var sn=(He+Qt+1)%3;for(Rt=0;Rt<2;++Rt){var Kt=Rt?Ut:1-Ut;for(Qe=0|Math.min(Math.max(Dt+Rt,0),xe[0]),Vt=0;Vt<2;++Vt){var qn=Vt?an:1-an;if(nt=0|Math.min(Math.max(qt+Vt,0),xe[1]),zt=Qt<2?this._field[sn].get(Qe,nt):(this.intensity.get(Qe,nt)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(zt)||isNaN(zt)){mn=!0;break t}At[Qt]+=Kt*qn*zt}}}if(mn){if(Ht>0){for(var Sn=0;Sn<5;++Sn)Ge.pop();ot-=1}continue e}Ge.push(At[0],At[1],Pt[0],Pt[1],At[2]),ot+=1}}xt.push(ot)}this._contourOffsets[He]=tt,this._contourCounts[He]=xt}var hn=s.mallocFloat(Ge.length);for(ye=0;ye<Ge.length;++ye)hn[ye]=Ge[ye];this._contourBuffer.update(hn),s.freeFloat(hn)}},Z.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var ue=0;ue<3;++ue)s.freeFloat(this._field[ue].data)},Z.highlight=function(ue){var ge,we;if(!ue)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(ge=0;ge<3;++ge)this.highlightLevel[ge]=this.enableHighlight[ge]?ue.level[ge]:-1;for(we=this.snapToData?ue.dataCoordinate:ue.position,ge=0;ge<3;++ge)we[ge]-=this.objectOffset[ge];if(this.enableDynamic[0]&&we[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&we[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&we[2]!==this.dynamicLevel[2]){for(var Te=0,xe=this.shape,ye=s.mallocFloat(12*xe[0]*xe[1]),_e=0;_e<3;++_e)if(this.enableDynamic[_e]){this.dynamicLevel[_e]=we[_e];var he=this._field[(_e+1)%3],ce=this._field[(_e+2)%3],me=d(this._field[_e],we[_e]),Pe=me.cells,Ae=me.positions;for(this._dynamicOffsets[_e]=Te,ge=0;ge<Pe.length;++ge)for(var Ce=Pe[ge],Oe=0;Oe<2;++Oe){var Ne=Ae[Ce[Oe]],je=+Ne[0],ve=0|je,Me=0|Math.min(ve+1,xe[0]),Le=je-ve,Ue=1-Le,ze=+Ne[1],qe=0|ze,Ke=0|Math.min(qe+1,xe[1]),it=ze-qe,ft=1-it,dt=Ue*ft,kt=Ue*it,St=Le*ft,Tt=Le*it,lt=dt*he.get(ve,qe)+kt*he.get(ve,Ke)+St*he.get(Me,qe)+Tt*he.get(Me,Ke),ot=dt*ce.get(ve,qe)+kt*ce.get(ve,Ke)+St*ce.get(Me,qe)+Tt*ce.get(Me,Ke);if(isNaN(lt)||isNaN(ot)){Oe&&(Te-=1);break}ye[2*Te+0]=lt,ye[2*Te+1]=ot,Te+=1}this._dynamicCounts[_e]=Te-this._dynamicOffsets[_e]}else this.dynamicLevel[_e]=NaN,this._dynamicCounts[_e]=0;this._dynamicBuffer.update(ye.subarray(0,2*Te)),s.freeFloat(ye)}}},7766:function(p,l,t){"use strict";var i=t(9618),r=t(5298),n=t(1888);p.exports=function(_){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(a||(a=[(w=_).LINEAR,w.NEAREST_MIPMAP_LINEAR,w.LINEAR_MIPMAP_NEAREST,w.LINEAR_MIPMAP_NEAREST],s=[w.NEAREST,w.LINEAR,w.NEAREST_MIPMAP_NEAREST,w.NEAREST_MIPMAP_LINEAR,w.LINEAR_MIPMAP_NEAREST,w.LINEAR_MIPMAP_LINEAR],c=[w.REPEAT,w.CLAMP_TO_EDGE,w.MIRRORED_REPEAT]),"number"==typeof arguments[1])return v(_,arguments[1],arguments[2],arguments[3]||_.RGBA,arguments[4]||_.UNSIGNED_BYTE);var w;if(Array.isArray(arguments[1]))return v(_,0|arguments[1][0],0|arguments[1][1],arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var f=arguments[1],C=h(f)?f:f.raw;if(C)return function(w,E,P,L,O,z){var V=x(w);return w.texImage2D(w.TEXTURE_2D,0,O,O,z,E),new d(w,V,P,L,O,z)}(_,C,0|f.width,0|f.height,arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(f.shape&&f.data&&f.stride)return function(w,E){var P=E.dtype,L=E.shape.slice(),O=w.getParameter(w.MAX_TEXTURE_SIZE);if(L[0]<0||L[0]>O||L[1]<0||L[1]>O)throw new Error("gl-texture2d: Invalid texture size");var z=g(L,E.stride.slice()),V=0;"float32"===P?V=w.FLOAT:"float64"===P?(V=w.FLOAT,z=!1,P="float32"):"uint8"===P?V=w.UNSIGNED_BYTE:(V=w.UNSIGNED_BYTE,z=!1,P="uint8");var R,U,Z=0;if(2===L.length)Z=w.LUMINANCE,E=i(E.data,L=[L[0],L[1],1],[E.stride[0],E.stride[1],1],E.offset);else{if(3!==L.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===L[2])Z=w.ALPHA;else if(2===L[2])Z=w.LUMINANCE_ALPHA;else if(3===L[2])Z=w.RGB;else{if(4!==L[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");Z=w.RGBA}}V!==w.FLOAT||w.getExtension("OES_texture_float")||(V=w.UNSIGNED_BYTE,z=!1);var N=E.size;if(z)R=0===E.offset&&E.data.length===N?E.data:E.data.subarray(E.offset,E.offset+N);else{var G=[L[2],L[2]*L[0],1];U=n.malloc(N,P);var W=i(U,L,G,0);"float32"!==P&&"float64"!==P||V!==w.UNSIGNED_BYTE?r.assign(W,E):u(W,E),R=U.subarray(0,N)}var ae=x(w);return w.texImage2D(w.TEXTURE_2D,0,Z,L[0],L[1],0,Z,V,R),z||n.free(U),new d(w,ae,L[0],L[1],Z,V)}(_,f)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var a=null,s=null,c=null;function h(_){return typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&_ instanceof HTMLVideoElement||typeof ImageData<"u"&&_ instanceof ImageData}var u=function(_,f){r.muls(_,f,255)};function y(_,f,C){var w=_.gl,E=w.getParameter(w.MAX_TEXTURE_SIZE);if(f<0||f>E||C<0||C>E)throw new Error("gl-texture2d: Invalid texture size");return _._shape=[f,C],_.bind(),w.texImage2D(w.TEXTURE_2D,0,_.format,f,C,0,_.format,_.type,null),_._mipLevels=[0],_}function d(_,f,C,w,E,P){this.gl=_,this.handle=f,this.format=E,this.type=P,this._shape=[C,w],this._mipLevels=[0],this._magFilter=_.NEAREST,this._minFilter=_.NEAREST,this._wrapS=_.CLAMP_TO_EDGE,this._wrapT=_.CLAMP_TO_EDGE,this._anisoSamples=1;var L=this,O=[this._wrapS,this._wrapT];Object.defineProperties(O,[{get:function(){return L._wrapS},set:function(V){return L.wrapS=V}},{get:function(){return L._wrapT},set:function(V){return L.wrapT=V}}]),this._wrapVector=O;var z=[this._shape[0],this._shape[1]];Object.defineProperties(z,[{get:function(){return L._shape[0]},set:function(V){return L.width=V}},{get:function(){return L._shape[1]},set:function(V){return L.height=V}}]),this._shapeVector=z}var m=d.prototype;function g(_,f){return 3===_.length?1===f[2]&&f[1]===_[0]*_[2]&&f[0]===_[2]:1===f[0]&&f[1]===_[0]}function x(_){var f=_.createTexture();return _.bindTexture(_.TEXTURE_2D,f),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),f}function v(_,f,C,w,E){var P=_.getParameter(_.MAX_TEXTURE_SIZE);if(f<0||f>P||C<0||C>P)throw new Error("gl-texture2d: Invalid texture shape");if(E===_.FLOAT&&!_.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var L=x(_);return _.texImage2D(_.TEXTURE_2D,0,w,f,C,0,w,E,null),new d(_,L,f,C,w,E)}Object.defineProperties(m,{minFilter:{get:function(){return this._minFilter},set:function(_){this.bind();var f=this.gl;if(this.type===f.FLOAT&&a.indexOf(_)>=0&&(f.getExtension("OES_texture_float_linear")||(_=f.NEAREST)),s.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,_),this._minFilter=_}},magFilter:{get:function(){return this._magFilter},set:function(_){this.bind();var f=this.gl;if(this.type===f.FLOAT&&a.indexOf(_)>=0&&(f.getExtension("OES_texture_float_linear")||(_=f.NEAREST)),s.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,_),this._magFilter=_}},mipSamples:{get:function(){return this._anisoSamples},set:function(_){var f=this._anisoSamples;if(this._anisoSamples=0|Math.max(_,1),f!==this._anisoSamples){var C=this.gl.getExtension("EXT_texture_filter_anisotropic");C&&this.gl.texParameterf(this.gl.TEXTURE_2D,C.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(_){if(this.bind(),c.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,_),this._wrapS=_}},wrapT:{get:function(){return this._wrapT},set:function(_){if(this.bind(),c.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,_),this._wrapT=_}},wrap:{get:function(){return this._wrapVector},set:function(_){if(Array.isArray(_)||(_=[_,_]),2!==_.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var f=0;f<2;++f)if(c.indexOf(_[f])<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);this._wrapS=_[0],this._wrapT=_[1];var C=this.gl;return this.bind(),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,this._wrapS),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,this._wrapT),_}},shape:{get:function(){return this._shapeVector},set:function(_){if(Array.isArray(_)){if(2!==_.length)throw new Error("gl-texture2d: Invalid texture shape")}else _=[0|_,0|_];return y(this,0|_[0],0|_[1]),[0|_[0],0|_[1]]}},width:{get:function(){return this._shape[0]},set:function(_){return y(this,_|=0,this._shape[1]),_}},height:{get:function(){return this._shape[1]},set:function(_){return y(this,this._shape[0],_|=0),_}}}),m.bind=function(_){var f=this.gl;return void 0!==_&&f.activeTexture(f.TEXTURE0+(0|_)),f.bindTexture(f.TEXTURE_2D,this.handle),void 0!==_?0|_:f.getParameter(f.ACTIVE_TEXTURE)-f.TEXTURE0},m.dispose=function(){this.gl.deleteTexture(this.handle)},m.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var _=Math.min(this._shape[0],this._shape[1]),f=0;_>0;++f,_>>>=1)this._mipLevels.indexOf(f)<0&&this._mipLevels.push(f)},m.setPixels=function(_,f,C,w){var E=this.gl;this.bind(),Array.isArray(f)?(w=C,C=0|f[1],f=0|f[0]):(f=f||0,C=C||0),w=w||0;var P=h(_)?_:_.raw;if(P)this._mipLevels.indexOf(w)<0?(E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,this.type,P),this._mipLevels.push(w)):E.texSubImage2D(E.TEXTURE_2D,w,f,C,this.format,this.type,P);else{if(!(_.shape&&_.stride&&_.data))throw new Error("gl-texture2d: Unsupported data type");if(_.shape.length<2||f+_.shape[1]>this._shape[1]>>>w||C+_.shape[0]>this._shape[0]>>>w||f<0||C<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(L,O,z,V,R,U,Z,N){var G=N.dtype,W=N.shape.slice();if(W.length<2||W.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var ae=0,re=0,ne=g(W,N.stride.slice());if("float32"===G?ae=L.FLOAT:"float64"===G?(ae=L.FLOAT,ne=!1,G="float32"):"uint8"===G?ae=L.UNSIGNED_BYTE:(ae=L.UNSIGNED_BYTE,ne=!1,G="uint8"),2===W.length)re=L.LUMINANCE,N=i(N.data,W=[W[0],W[1],1],[N.stride[0],N.stride[1],1],N.offset);else{if(3!==W.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===W[2])re=L.ALPHA;else if(2===W[2])re=L.LUMINANCE_ALPHA;else if(3===W[2])re=L.RGB;else{if(4!==W[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");re=L.RGBA}}if(re!==L.LUMINANCE&&re!==L.ALPHA||R!==L.LUMINANCE&&R!==L.ALPHA||(re=R),re!==R)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var Q=N.size,$=Z.indexOf(V)<0;if($&&Z.push(V),ae===U&&ne)0===N.offset&&N.data.length===Q?$?L.texImage2D(L.TEXTURE_2D,V,R,W[0],W[1],0,R,U,N.data):L.texSubImage2D(L.TEXTURE_2D,V,O,z,W[0],W[1],R,U,N.data):$?L.texImage2D(L.TEXTURE_2D,V,R,W[0],W[1],0,R,U,N.data.subarray(N.offset,N.offset+Q)):L.texSubImage2D(L.TEXTURE_2D,V,O,z,W[0],W[1],R,U,N.data.subarray(N.offset,N.offset+Q));else{var X;X=U===L.FLOAT?n.mallocFloat32(Q):n.mallocUint8(Q);var oe=i(X,W,[W[2],W[2]*W[0],1]);ae===L.FLOAT&&U===L.UNSIGNED_BYTE?u(oe,N):r.assign(oe,N),$?L.texImage2D(L.TEXTURE_2D,V,R,W[0],W[1],0,R,U,X.subarray(0,Q)):L.texSubImage2D(L.TEXTURE_2D,V,O,z,W[0],W[1],R,U,X.subarray(0,Q)),U===L.FLOAT?n.freeFloat32(X):n.freeUint8(X)}}(E,f,C,w,this.format,this.type,this._mipLevels,_)}}},1433:function(p){"use strict";p.exports=function(l,t,i){t?t.bind():l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,null);var r=0|l.getParameter(l.MAX_VERTEX_ATTRIBS);if(i){if(i.length>r)throw new Error("gl-vao: Too many vertex attributes");for(var n=0;n<i.length;++n){var a=i[n];if(a.buffer){var c=a.size||4,h=a.type||l.FLOAT,u=!!a.normalized,y=a.stride||0,d=a.offset||0;a.buffer.bind(),l.enableVertexAttribArray(n),l.vertexAttribPointer(n,c,h,u,y,d)}else{if("number"==typeof a)l.vertexAttrib1f(n,a);else if(1===a.length)l.vertexAttrib1f(n,a[0]);else if(2===a.length)l.vertexAttrib2f(n,a[0],a[1]);else if(3===a.length)l.vertexAttrib3f(n,a[0],a[1],a[2]);else{if(4!==a.length)throw new Error("gl-vao: Invalid vertex attribute");l.vertexAttrib4f(n,a[0],a[1],a[2],a[3])}l.disableVertexAttribArray(n)}}for(;n<r;++n)l.disableVertexAttribArray(n)}else for(l.bindBuffer(l.ARRAY_BUFFER,null),n=0;n<r;++n)l.disableVertexAttribArray(n)}},870:function(p,l,t){"use strict";var i=t(1433);function r(n){this.gl=n,this._elements=null,this._attributes=null,this._elementsType=n.UNSIGNED_SHORT}r.prototype.bind=function(){i(this.gl,this._elements,this._attributes)},r.prototype.update=function(n,a,s){this._elements=a,this._attributes=n,this._elementsType=s||this.gl.UNSIGNED_SHORT},r.prototype.dispose=function(){},r.prototype.unbind=function(){},r.prototype.draw=function(n,a,s){s=s||0;var c=this.gl;this._elements?c.drawElements(n,a,this._elementsType,s):c.drawArrays(n,s,a)},p.exports=function(n){return new r(n)}},7518:function(p,l,t){"use strict";var i=t(1433);function r(a,s,c,h,u,y){this.location=a,this.dimension=s,this.a=c,this.b=h,this.c=u,this.d=y}function n(a,s,c){this.gl=a,this._ext=s,this.handle=c,this._attribs=[],this._useElements=!1,this._elementsType=a.UNSIGNED_SHORT}r.prototype.bind=function(a){switch(this.dimension){case 1:a.vertexAttrib1f(this.location,this.a);break;case 2:a.vertexAttrib2f(this.location,this.a,this.b);break;case 3:a.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:a.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},n.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var a=0;a<this._attribs.length;++a)this._attribs[a].bind(this.gl)},n.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},n.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},n.prototype.update=function(a,s,c){if(this.bind(),i(this.gl,s,a),this.unbind(),this._attribs.length=0,a)for(var h=0;h<a.length;++h){var u=a[h];"number"==typeof u?this._attribs.push(new r(h,1,u)):Array.isArray(u)&&this._attribs.push(new r(h,u.length,u[0],u[1],u[2],u[3]))}this._useElements=!!s,this._elementsType=c||this.gl.UNSIGNED_SHORT},n.prototype.draw=function(a,s,c){c=c||0;var h=this.gl;this._useElements?h.drawElements(a,s,this._elementsType,c):h.drawArrays(a,c,s)},p.exports=function(a,s){return new n(a,s,s.createVertexArrayOES())}},8116:function(p,l,t){"use strict";var i=t(7518),r=t(870);function n(a){this.bindVertexArrayOES=a.bindVertexArray.bind(a),this.createVertexArrayOES=a.createVertexArray.bind(a),this.deleteVertexArrayOES=a.deleteVertexArray.bind(a)}p.exports=function(a,s,c,h){var u,y=a.createVertexArray?new n(a):a.getExtension("OES_vertex_array_object");return(u=y?i(a,y):r(a)).update(s,c,h),u}},5632:function(p){p.exports=function(l,t,i){return l[0]=t[0]+i[0],l[1]=t[1]+i[1],l[2]=t[2]+i[2],l}},8192:function(p,l,t){p.exports=function(a,s){var c=i(a[0],a[1],a[2]),h=i(s[0],s[1],s[2]);r(c,c),r(h,h);var u=n(c,h);return u>1?0:Math.acos(u)};var i=t(2825),r=t(3536),n=t(244)},9226:function(p){p.exports=function(l,t){return l[0]=Math.ceil(t[0]),l[1]=Math.ceil(t[1]),l[2]=Math.ceil(t[2]),l}},3126:function(p){p.exports=function(l){var t=new Float32Array(3);return t[0]=l[0],t[1]=l[1],t[2]=l[2],t}},3990:function(p){p.exports=function(l,t){return l[0]=t[0],l[1]=t[1],l[2]=t[2],l}},1091:function(p){p.exports=function(){var l=new Float32Array(3);return l[0]=0,l[1]=0,l[2]=0,l}},5911:function(p){p.exports=function(l,t,i){var r=t[0],n=t[1],a=t[2],s=i[0],c=i[1],h=i[2];return l[0]=n*h-a*c,l[1]=a*s-r*h,l[2]=r*c-n*s,l}},5455:function(p,l,t){p.exports=t(7056)},7056:function(p){p.exports=function(l,t){var i=t[0]-l[0],r=t[1]-l[1],n=t[2]-l[2];return Math.sqrt(i*i+r*r+n*n)}},4008:function(p,l,t){p.exports=t(6690)},6690:function(p){p.exports=function(l,t,i){return l[0]=t[0]/i[0],l[1]=t[1]/i[1],l[2]=t[2]/i[2],l}},244:function(p){p.exports=function(l,t){return l[0]*t[0]+l[1]*t[1]+l[2]*t[2]}},2613:function(p){p.exports=1e-6},9922:function(p,l,t){p.exports=function(r,n){var a=r[0],s=r[1],c=r[2],h=n[0],u=n[1],y=n[2];return Math.abs(a-h)<=i*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(s-u)<=i*Math.max(1,Math.abs(s),Math.abs(u))&&Math.abs(c-y)<=i*Math.max(1,Math.abs(c),Math.abs(y))};var i=t(2613)},9265:function(p){p.exports=function(l,t){return l[0]===t[0]&&l[1]===t[1]&&l[2]===t[2]}},2681:function(p){p.exports=function(l,t){return l[0]=Math.floor(t[0]),l[1]=Math.floor(t[1]),l[2]=Math.floor(t[2]),l}},5137:function(p,l,t){p.exports=function(r,n,a,s,c,h){var u,y;for(n||(n=3),a||(a=0),y=s?Math.min(s*n+a,r.length):r.length,u=a;u<y;u+=n)i[0]=r[u],i[1]=r[u+1],i[2]=r[u+2],c(i,i,h),r[u]=i[0],r[u+1]=i[1],r[u+2]=i[2];return r};var i=t(1091)()},2825:function(p){p.exports=function(l,t,i){var r=new Float32Array(3);return r[0]=l,r[1]=t,r[2]=i,r}},2931:function(p,l,t){p.exports={EPSILON:t(2613),create:t(1091),clone:t(3126),angle:t(8192),fromValues:t(2825),copy:t(3990),set:t(1463),equals:t(9922),exactEquals:t(9265),add:t(5632),subtract:t(6843),sub:t(2229),multiply:t(5847),mul:t(4505),divide:t(6690),div:t(4008),min:t(8107),max:t(7417),floor:t(2681),ceil:t(9226),round:t(2447),scale:t(6621),scaleAndAdd:t(8489),distance:t(7056),dist:t(5455),squaredDistance:t(2953),sqrDist:t(6141),length:t(1387),len:t(868),squaredLength:t(3066),sqrLen:t(5486),negate:t(5093),inverse:t(811),normalize:t(3536),dot:t(244),cross:t(5911),lerp:t(6658),random:t(7636),transformMat4:t(5673),transformMat3:t(492),transformQuat:t(264),rotateX:t(6894),rotateY:t(109),rotateZ:t(8692),forEach:t(5137)}},811:function(p){p.exports=function(l,t){return l[0]=1/t[0],l[1]=1/t[1],l[2]=1/t[2],l}},868:function(p,l,t){p.exports=t(1387)},1387:function(p){p.exports=function(l){var t=l[0],i=l[1],r=l[2];return Math.sqrt(t*t+i*i+r*r)}},6658:function(p){p.exports=function(l,t,i,r){var n=t[0],a=t[1],s=t[2];return l[0]=n+r*(i[0]-n),l[1]=a+r*(i[1]-a),l[2]=s+r*(i[2]-s),l}},7417:function(p){p.exports=function(l,t,i){return l[0]=Math.max(t[0],i[0]),l[1]=Math.max(t[1],i[1]),l[2]=Math.max(t[2],i[2]),l}},8107:function(p){p.exports=function(l,t,i){return l[0]=Math.min(t[0],i[0]),l[1]=Math.min(t[1],i[1]),l[2]=Math.min(t[2],i[2]),l}},4505:function(p,l,t){p.exports=t(5847)},5847:function(p){p.exports=function(l,t,i){return l[0]=t[0]*i[0],l[1]=t[1]*i[1],l[2]=t[2]*i[2],l}},5093:function(p){p.exports=function(l,t){return l[0]=-t[0],l[1]=-t[1],l[2]=-t[2],l}},3536:function(p){p.exports=function(l,t){var i=t[0],r=t[1],n=t[2],a=i*i+r*r+n*n;return a>0&&(a=1/Math.sqrt(a),l[0]=t[0]*a,l[1]=t[1]*a,l[2]=t[2]*a),l}},7636:function(p){p.exports=function(l,t){t=t||1;var i=2*Math.random()*Math.PI,r=2*Math.random()-1,n=Math.sqrt(1-r*r)*t;return l[0]=Math.cos(i)*n,l[1]=Math.sin(i)*n,l[2]=r*t,l}},6894:function(p){p.exports=function(l,t,i,r){var n=i[1],a=i[2],s=t[1]-n,c=t[2]-a,h=Math.sin(r),u=Math.cos(r);return l[0]=t[0],l[1]=n+s*u-c*h,l[2]=a+s*h+c*u,l}},109:function(p){p.exports=function(l,t,i,r){var n=i[0],a=i[2],s=t[0]-n,c=t[2]-a,h=Math.sin(r),u=Math.cos(r);return l[0]=n+c*h+s*u,l[1]=t[1],l[2]=a+c*u-s*h,l}},8692:function(p){p.exports=function(l,t,i,r){var n=i[0],a=i[1],s=t[0]-n,c=t[1]-a,h=Math.sin(r),u=Math.cos(r);return l[0]=n+s*u-c*h,l[1]=a+s*h+c*u,l[2]=t[2],l}},2447:function(p){p.exports=function(l,t){return l[0]=Math.round(t[0]),l[1]=Math.round(t[1]),l[2]=Math.round(t[2]),l}},6621:function(p){p.exports=function(l,t,i){return l[0]=t[0]*i,l[1]=t[1]*i,l[2]=t[2]*i,l}},8489:function(p){p.exports=function(l,t,i,r){return l[0]=t[0]+i[0]*r,l[1]=t[1]+i[1]*r,l[2]=t[2]+i[2]*r,l}},1463:function(p){p.exports=function(l,t,i,r){return l[0]=t,l[1]=i,l[2]=r,l}},6141:function(p,l,t){p.exports=t(2953)},5486:function(p,l,t){p.exports=t(3066)},2953:function(p){p.exports=function(l,t){var i=t[0]-l[0],r=t[1]-l[1],n=t[2]-l[2];return i*i+r*r+n*n}},3066:function(p){p.exports=function(l){var t=l[0],i=l[1],r=l[2];return t*t+i*i+r*r}},2229:function(p,l,t){p.exports=t(6843)},6843:function(p){p.exports=function(l,t,i){return l[0]=t[0]-i[0],l[1]=t[1]-i[1],l[2]=t[2]-i[2],l}},492:function(p){p.exports=function(l,t,i){var r=t[0],n=t[1],a=t[2];return l[0]=r*i[0]+n*i[3]+a*i[6],l[1]=r*i[1]+n*i[4]+a*i[7],l[2]=r*i[2]+n*i[5]+a*i[8],l}},5673:function(p){p.exports=function(l,t,i){var r=t[0],n=t[1],a=t[2],s=i[3]*r+i[7]*n+i[11]*a+i[15];return l[0]=(i[0]*r+i[4]*n+i[8]*a+i[12])/(s=s||1),l[1]=(i[1]*r+i[5]*n+i[9]*a+i[13])/s,l[2]=(i[2]*r+i[6]*n+i[10]*a+i[14])/s,l}},264:function(p){p.exports=function(l,t,i){var r=t[0],n=t[1],a=t[2],s=i[0],c=i[1],h=i[2],u=i[3],y=u*r+c*a-h*n,d=u*n+h*r-s*a,m=u*a+s*n-c*r,g=-s*r-c*n-h*a;return l[0]=y*u+g*-s+d*-h-m*-c,l[1]=d*u+g*-c+m*-s-y*-h,l[2]=m*u+g*-h+y*-c-d*-s,l}},4361:function(p){p.exports=function(l,t,i){return l[0]=t[0]+i[0],l[1]=t[1]+i[1],l[2]=t[2]+i[2],l[3]=t[3]+i[3],l}},2335:function(p){p.exports=function(l){var t=new Float32Array(4);return t[0]=l[0],t[1]=l[1],t[2]=l[2],t[3]=l[3],t}},2933:function(p){p.exports=function(l,t){return l[0]=t[0],l[1]=t[1],l[2]=t[2],l[3]=t[3],l}},7536:function(p){p.exports=function(){var l=new Float32Array(4);return l[0]=0,l[1]=0,l[2]=0,l[3]=0,l}},4691:function(p){p.exports=function(l,t){var i=t[0]-l[0],r=t[1]-l[1],n=t[2]-l[2],a=t[3]-l[3];return Math.sqrt(i*i+r*r+n*n+a*a)}},1373:function(p){p.exports=function(l,t,i){return l[0]=t[0]/i[0],l[1]=t[1]/i[1],l[2]=t[2]/i[2],l[3]=t[3]/i[3],l}},3750:function(p){p.exports=function(l,t){return l[0]*t[0]+l[1]*t[1]+l[2]*t[2]+l[3]*t[3]}},3390:function(p){p.exports=function(l,t,i,r){var n=new Float32Array(4);return n[0]=l,n[1]=t,n[2]=i,n[3]=r,n}},9970:function(p,l,t){p.exports={create:t(7536),clone:t(2335),fromValues:t(3390),copy:t(2933),set:t(4578),add:t(4361),subtract:t(6860),multiply:t(3576),divide:t(1373),min:t(2334),max:t(160),scale:t(9288),scaleAndAdd:t(4844),distance:t(4691),squaredDistance:t(7960),length:t(6808),squaredLength:t(483),negate:t(1498),inverse:t(4494),normalize:t(5177),dot:t(3750),lerp:t(2573),random:t(9131),transformMat4:t(5352),transformQuat:t(4041)}},4494:function(p){p.exports=function(l,t){return l[0]=1/t[0],l[1]=1/t[1],l[2]=1/t[2],l[3]=1/t[3],l}},6808:function(p){p.exports=function(l){var t=l[0],i=l[1],r=l[2],n=l[3];return Math.sqrt(t*t+i*i+r*r+n*n)}},2573:function(p){p.exports=function(l,t,i,r){var n=t[0],a=t[1],s=t[2],c=t[3];return l[0]=n+r*(i[0]-n),l[1]=a+r*(i[1]-a),l[2]=s+r*(i[2]-s),l[3]=c+r*(i[3]-c),l}},160:function(p){p.exports=function(l,t,i){return l[0]=Math.max(t[0],i[0]),l[1]=Math.max(t[1],i[1]),l[2]=Math.max(t[2],i[2]),l[3]=Math.max(t[3],i[3]),l}},2334:function(p){p.exports=function(l,t,i){return l[0]=Math.min(t[0],i[0]),l[1]=Math.min(t[1],i[1]),l[2]=Math.min(t[2],i[2]),l[3]=Math.min(t[3],i[3]),l}},3576:function(p){p.exports=function(l,t,i){return l[0]=t[0]*i[0],l[1]=t[1]*i[1],l[2]=t[2]*i[2],l[3]=t[3]*i[3],l}},1498:function(p){p.exports=function(l,t){return l[0]=-t[0],l[1]=-t[1],l[2]=-t[2],l[3]=-t[3],l}},5177:function(p){p.exports=function(l,t){var i=t[0],r=t[1],n=t[2],a=t[3],s=i*i+r*r+n*n+a*a;return s>0&&(s=1/Math.sqrt(s),l[0]=i*s,l[1]=r*s,l[2]=n*s,l[3]=a*s),l}},9131:function(p,l,t){var i=t(5177),r=t(9288);p.exports=function(n,a){return a=a||1,n[0]=Math.random(),n[1]=Math.random(),n[2]=Math.random(),n[3]=Math.random(),i(n,n),r(n,n,a),n}},9288:function(p){p.exports=function(l,t,i){return l[0]=t[0]*i,l[1]=t[1]*i,l[2]=t[2]*i,l[3]=t[3]*i,l}},4844:function(p){p.exports=function(l,t,i,r){return l[0]=t[0]+i[0]*r,l[1]=t[1]+i[1]*r,l[2]=t[2]+i[2]*r,l[3]=t[3]+i[3]*r,l}},4578:function(p){p.exports=function(l,t,i,r,n){return l[0]=t,l[1]=i,l[2]=r,l[3]=n,l}},7960:function(p){p.exports=function(l,t){var i=t[0]-l[0],r=t[1]-l[1],n=t[2]-l[2],a=t[3]-l[3];return i*i+r*r+n*n+a*a}},483:function(p){p.exports=function(l){var t=l[0],i=l[1],r=l[2],n=l[3];return t*t+i*i+r*r+n*n}},6860:function(p){p.exports=function(l,t,i){return l[0]=t[0]-i[0],l[1]=t[1]-i[1],l[2]=t[2]-i[2],l[3]=t[3]-i[3],l}},5352:function(p){p.exports=function(l,t,i){var r=t[0],n=t[1],a=t[2],s=t[3];return l[0]=i[0]*r+i[4]*n+i[8]*a+i[12]*s,l[1]=i[1]*r+i[5]*n+i[9]*a+i[13]*s,l[2]=i[2]*r+i[6]*n+i[10]*a+i[14]*s,l[3]=i[3]*r+i[7]*n+i[11]*a+i[15]*s,l}},4041:function(p){p.exports=function(l,t,i){var r=t[0],n=t[1],a=t[2],s=i[0],c=i[1],h=i[2],u=i[3],y=u*r+c*a-h*n,d=u*n+h*r-s*a,m=u*a+s*n-c*r,g=-s*r-c*n-h*a;return l[0]=y*u+g*-s+d*-h-m*-c,l[1]=d*u+g*-c+m*-s-y*-h,l[2]=m*u+g*-h+y*-c-d*-s,l[3]=t[3],l}},1848:function(p,l,t){var i=t(4905),r=t(6468);p.exports=function(n){for(var a=Array.isArray(n)?n:i(n),s=0;s<a.length;s++){var c=a[s];if("preprocessor"===c.type){var h=c.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(h&&h[2]){var y=h[2];return(h[1]?r(y):y).trim()}}}}},5874:function(p,l,t){p.exports=function(L){var O,z,V,R=0,U=0,Z=c,N=[],G=[],W=1,ae=0,re=0,ne=!1,Q=!1,$="",X=n,oe=i;"300 es"===(L=L||{}).version&&(X=s,oe=a);var fe={},ue={};for(R=0;R<X.length;R++)fe[X[R]]=!0;for(R=0;R<oe.length;R++)ue[oe[R]]=!0;return function(me){return G=[],null!==me?function(Pe){var Ae;for(R=0,Pe.toString&&(Pe=Pe.toString()),$+=Pe.replace(/\r\n/g,"\n"),V=$.length;O=$[R],R<V;){switch(Ae=R,Z){case u:R="/"===O&&"*"===z?(N.push(O),ge(N.join("")),Z=c,R+1):(N.push(O),z=O,R+1);break;case y:case d:R="\r"!==O&&"\n"!==O||"\\"===z?(N.push(O),z=O,R+1):(ge(N.join("")),Z=c,R);break;case m:R=_e();break;case g:R="."===O||/[eE]/.test(O)?(N.push(O),Z=x,z=O,R+1):"x"===O&&1===N.length&&"0"===N[0]?(Z=E,N.push(O),z=O,R+1):/[^\d]/.test(O)?(ge(N.join("")),Z=c,R):(N.push(O),z=O,R+1);break;case E:R=/[^a-fA-F0-9]/.test(O)?(ge(N.join("")),Z=c,R):(N.push(O),z=O,R+1);break;case x:"f"===O&&(N.push(O),z=O,R+=1),R=/[eE]/.test(O)?(N.push(O),z=O,R+1):("-"!==O&&"+"!==O||!/[eE]/.test(z))&&/[^\d]/.test(O)?(ge(N.join("")),Z=c,R):(N.push(O),z=O,R+1);break;case h:R=ce();break;case C:R=/[^\s]/g.test(O)?(ge(N.join("")),Z=c,R):(N.push(O),z=O,R+1);break;case c:N=N.length?[]:N,R="/"===z&&"*"===O?(re=U+R-1,Z=u,z=O,R+1):"/"===z&&"/"===O?(re=U+R-1,Z=y,z=O,R+1):"#"===O?(Z=d,re=U+R,R):/\s/.test(O)?(Z=C,re=U+R,R):(ne=/\d/.test(O),Q=/[^\w_]/.test(O),re=U+R,Z=ne?g:Q?m:h,R)}Ae!==R&&("\n"===$[Ae]?(ae=0,++W):++ae)}return U+=R,$=$.slice(R),G}(me):(N.length&&ge(N.join("")),Z=w,ge("(eof)"),G)};function ge(me){me.length&&G.push({type:P[Z],data:me,position:re,line:W,column:ae})}function _e(){if("."===z&&/\d/.test(O))return Z=x,R;if("/"===z&&"*"===O)return Z=u,R;if("/"===z&&"/"===O)return Z=y,R;if("."===O&&N.length){for(;Ie(N););return Z=x,R}if(";"===O||")"===O||"("===O){if(N.length)for(;Ie(N););return ge(O),Z=c,R+1}var me=2===N.length&&"="!==O;if(/[\w_\d\s]/.test(O)||me){for(;Ie(N););return Z=c,R}return N.push(O),z=O,R+1}function Ie(me){for(var Pe,Ae,Ce=0;;){if(Pe=r.indexOf(me.slice(0,me.length+Ce).join("")),Ae=r[Pe],-1===Pe){if(Ce--+me.length>0)continue;Ae=me.slice(0,1).join("")}return ge(Ae),re+=Ae.length,(N=N.slice(Ae.length)).length}}function ce(){if(/[^\d\w_]/.test(O)){var me=N.join("");return Z=ue[me]?f:fe[me]?_:v,ge(N.join("")),Z=c,R}return N.push(O),z=O,R+1}};var i=t(620),r=t(7827),n=t(6852),a=t(7932),s=t(3508),c=999,h=9999,u=0,y=1,d=2,m=3,g=4,x=5,v=6,_=7,f=8,C=9,w=10,E=11,P=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3508:function(p,l,t){var i=t(6852);i=i.slice().filter(function(r){return!/^(gl\_|texture)/.test(r)}),p.exports=i.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},6852:function(p){p.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},7932:function(p,l,t){var i=t(620);p.exports=i.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},620:function(p){p.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},7827:function(p){p.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},4905:function(p,l,t){var i=t(5874);p.exports=function(r,n){var a=i(n),s=[];return(s=s.concat(a(r))).concat(a(null))}},3236:function(p){p.exports=function(l){"string"==typeof l&&(l=[l]);for(var t=[].slice.call(arguments,1),i=[],r=0;r<l.length-1;r++)i.push(l[r],t[r]||"");return i.push(l[r]),i.join("")}},7520:function(p,l,t){"use strict";var i=t(9507);p.exports=i&&function(){var r=!1;try{var n=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch{r=!1}return r}()},3778:function(p,l){l.read=function(t,i,r,n,a){var s,c,h=8*a-n-1,u=(1<<h)-1,y=u>>1,d=-7,m=r?a-1:0,g=r?-1:1,x=t[i+m];for(m+=g,s=x&(1<<-d)-1,x>>=-d,d+=h;d>0;s=256*s+t[i+m],m+=g,d-=8);for(c=s&(1<<-d)-1,s>>=-d,d+=n;d>0;c=256*c+t[i+m],m+=g,d-=8);if(0===s)s=1-y;else{if(s===u)return c?NaN:1/0*(x?-1:1);c+=Math.pow(2,n),s-=y}return(x?-1:1)*c*Math.pow(2,s-n)},l.write=function(t,i,r,n,a,s){var c,h,u,y=8*s-a-1,d=(1<<y)-1,m=d>>1,g=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,x=n?0:s-1,v=n?1:-1,_=i<0||0===i&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(h=isNaN(i)?1:0,c=d):(c=Math.floor(Math.log(i)/Math.LN2),i*(u=Math.pow(2,-c))<1&&(c--,u*=2),(i+=c+m>=1?g/u:g*Math.pow(2,1-m))*u>=2&&(c++,u/=2),c+m>=d?(h=0,c=d):c+m>=1?(h=(i*u-1)*Math.pow(2,a),c+=m):(h=i*Math.pow(2,m-1)*Math.pow(2,a),c=0));a>=8;t[r+x]=255&h,x+=v,h/=256,a-=8);for(c=c<<a|h,y+=a;y>0;t[r+x]=255&c,x+=v,c/=256,y-=8);t[r+x-v]|=128*_}},8954:function(p,l,t){"use strict";p.exports=function(y,d){var m=y.length;if(0===m)throw new Error("Must have at least d+1 points");var g=y[0].length;if(m<=g)throw new Error("Must input at least d+1 points");var x=y.slice(0,g+1),v=i.apply(void 0,x);if(0===v)throw new Error("Input not in general position");for(var _=new Array(g+1),f=0;f<=g;++f)_[f]=f;v<0&&(_[0]=1,_[1]=0);var C=new n(_,new Array(g+1),!1),w=C.adjacent,E=new Array(g+2);for(f=0;f<=g;++f){for(var P=_.slice(),L=0;L<=g;++L)L===f&&(P[L]=-1);var O=P[0];P[0]=P[1],P[1]=O;var z=new n(P,new Array(g+1),!0);w[f]=z,E[f]=z}for(E[g+1]=C,f=0;f<=g;++f){P=w[f].vertices;var V=w[f].adjacent;for(L=0;L<=g;++L){var R=P[L];if(R<0)V[L]=C;else for(var U=0;U<=g;++U)w[U].vertices.indexOf(R)<0&&(V[L]=w[U])}}var Z=new h(g,x,E),N=!!d;for(f=g+1;f<m;++f)Z.insert(y[f],N);return Z.boundary()};var i=t(3250),r=t(6803).Fw;function n(y,d,m){this.vertices=y,this.adjacent=d,this.boundary=m,this.lastVisited=-1}function a(y,d,m){this.vertices=y,this.cell=d,this.index=m}function s(y,d){return r(y.vertices,d.vertices)}n.prototype.flip=function(){var y=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=y;var d=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=d};var c=[];function h(y,d,m){this.dimension=y,this.vertices=d,this.simplices=m,this.interior=m.filter(function(_){return!_.boundary}),this.tuple=new Array(y+1);for(var g=0;g<=y;++g)this.tuple[g]=this.vertices[g];var x,_,v=c[y];v||(v=c[y]=((x=i[y+1])||(x=i),_=x,function(){return _.apply(this,this.tuple)})),this.orient=v}var u=h.prototype;u.handleBoundaryDegeneracy=function(y,d){var m=this.dimension,g=this.vertices.length-1,x=this.tuple,v=this.vertices,_=[y];for(y.lastVisited=-g;_.length>0;)for(var f=(y=_.pop()).adjacent,C=0;C<=m;++C){var w=f[C];if(w.boundary&&!(w.lastVisited<=-g)){for(var E=w.vertices,P=0;P<=m;++P){var L=E[P];x[P]=L<0?d:v[L]}var O=this.orient();if(O>0)return w;w.lastVisited=-g,0===O&&_.push(w)}}return null},u.walk=function(y,d){var m=this.vertices.length-1,g=this.dimension,x=this.vertices,v=this.tuple,_=d?this.interior.length*Math.random()|0:this.interior.length-1,f=this.interior[_];e:for(;!f.boundary;){for(var C=f.vertices,w=f.adjacent,E=0;E<=g;++E)v[E]=x[C[E]];for(f.lastVisited=m,E=0;E<=g;++E){var P=w[E];if(!(P.lastVisited>=m)){var L=v[E];v[E]=y;var O=this.orient();if(v[E]=L,O<0){f=P;continue e}P.lastVisited=P.boundary?-m:m}}return}return f},u.addPeaks=function(y,d){var m=this.vertices.length-1,g=this.dimension,x=this.vertices,v=this.tuple,_=this.interior,f=this.simplices,C=[d];d.lastVisited=m,d.vertices[d.vertices.indexOf(-1)]=m,d.boundary=!1,_.push(d);for(var w=[];C.length>0;){var E=(d=C.pop()).vertices,P=d.adjacent,L=E.indexOf(m);if(!(L<0))for(var O=0;O<=g;++O)if(O!==L){var z=P[O];if(z.boundary&&!(z.lastVisited>=m)){var V=z.vertices;if(z.lastVisited!==-m){for(var R=0,U=0;U<=g;++U)V[U]<0?(R=U,v[U]=y):v[U]=x[V[U]];if(this.orient()>0){V[R]=m,z.boundary=!1,_.push(z),C.push(z),z.lastVisited=m;continue}z.lastVisited=-m}var Z=z.adjacent,N=E.slice(),G=P.slice(),W=new n(N,G,!0);f.push(W);var ae=Z.indexOf(d);if(!(ae<0))for(Z[ae]=W,G[L]=z,N[O]=-1,G[O]=d,P[O]=W,W.flip(),U=0;U<=g;++U){var re=N[U];if(!(re<0||re===m)){for(var ne=new Array(g-1),Q=0,$=0;$<=g;++$){var X=N[$];X<0||$===U||(ne[Q++]=X)}w.push(new a(ne,W,U))}}}}}for(w.sort(s),O=0;O+1<w.length;O+=2){var oe=w[O],fe=w[O+1];oe.index<0||fe.index<0||(oe.cell.adjacent[oe.index]=fe.cell,fe.cell.adjacent[fe.index]=oe.cell)}},u.insert=function(y,d){var m=this.vertices;m.push(y);var g=this.walk(y,d);if(g){for(var x=this.dimension,v=this.tuple,_=0;_<=x;++_){var f=g.vertices[_];v[_]=f<0?y:m[f]}var C=this.orient(v);C<0||(0!==C||(g=this.handleBoundaryDegeneracy(g,y)))&&this.addPeaks(y,g)}},u.boundary=function(){for(var y=this.dimension,d=[],m=this.simplices,g=m.length,x=0;x<g;++x){var v=m[x];if(v.boundary){for(var _=new Array(y),f=v.vertices,C=0,w=0,E=0;E<=y;++E)f[E]>=0?_[C++]=f[E]:w=1&E;if(w===(1&y)){var P=_[0];_[0]=_[1],_[1]=P}d.push(_)}}return d}},3352:function(p,l,t){"use strict";var i=t(2478);function r(C,w,E,P,L){this.mid=C,this.left=w,this.right=E,this.leftPoints=P,this.rightPoints=L,this.count=(w?w.count:0)+(E?E.count:0)+P.length}p.exports=function(C){return new _(C&&0!==C.length?v(C):null)};var n=r.prototype;function a(C,w){C.mid=w.mid,C.left=w.left,C.right=w.right,C.leftPoints=w.leftPoints,C.rightPoints=w.rightPoints,C.count=w.count}function s(C,w){var E=v(w);C.mid=E.mid,C.left=E.left,C.right=E.right,C.leftPoints=E.leftPoints,C.rightPoints=E.rightPoints,C.count=E.count}function c(C,w){var E=C.intervals([]);E.push(w),s(C,E)}function h(C,w){var E=C.intervals([]),P=E.indexOf(w);return P<0?0:(E.splice(P,1),s(C,E),1)}function u(C,w,E){for(var P=0;P<C.length&&C[P][0]<=w;++P){var L=E(C[P]);if(L)return L}}function y(C,w,E){for(var P=C.length-1;P>=0&&C[P][1]>=w;--P){var L=E(C[P]);if(L)return L}}function d(C,w){for(var E=0;E<C.length;++E){var P=w(C[E]);if(P)return P}}function m(C,w){return C-w}function g(C,w){return C[0]-w[0]||C[1]-w[1]}function x(C,w){return C[1]-w[1]||C[0]-w[0]}function v(C){if(0===C.length)return null;for(var w=[],E=0;E<C.length;++E)w.push(C[E][0],C[E][1]);w.sort(m);var P=w[w.length>>1],L=[],O=[],z=[];for(E=0;E<C.length;++E){var V=C[E];V[1]<P?L.push(V):P<V[0]?O.push(V):z.push(V)}var R=z,U=z.slice();return R.sort(g),U.sort(x),new r(P,v(L),v(O),R,U)}function _(C){this.root=C}n.intervals=function(C){return C.push.apply(C,this.leftPoints),this.left&&this.left.intervals(C),this.right&&this.right.intervals(C),C},n.insert=function(C){var w=this.count-this.leftPoints.length;if(this.count+=1,C[1]<this.mid)this.left?4*(this.left.count+1)>3*(w+1)?c(this,C):this.left.insert(C):this.left=v([C]);else if(C[0]>this.mid)this.right?4*(this.right.count+1)>3*(w+1)?c(this,C):this.right.insert(C):this.right=v([C]);else{var E=i.ge(this.leftPoints,C,g),P=i.ge(this.rightPoints,C,x);this.leftPoints.splice(E,0,C),this.rightPoints.splice(P,0,C)}},n.remove=function(C){var w=this.count-this.leftPoints;if(C[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(w-1)?h(this,C):2===(O=this.left.remove(C))?(this.left=null,this.count-=1,1):(1===O&&(this.count-=1),O):0;if(C[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(w-1)?h(this,C):2===(O=this.right.remove(C))?(this.right=null,this.count-=1,1):(1===O&&(this.count-=1),O):0;if(1===this.count)return this.leftPoints[0]===C?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===C){if(this.left&&this.right){for(var E=this,P=this.left;P.right;)E=P,P=P.right;if(E===this)P.right=this.right;else{var L=this.left,O=this.right;E.count-=P.count,E.right=P.left,P.left=L,P.right=O}a(this,P),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else a(this,this.left?this.left:this.right);return 1}for(L=i.ge(this.leftPoints,C,g);L<this.leftPoints.length&&this.leftPoints[L][0]===C[0];++L)if(this.leftPoints[L]===C)for(this.count-=1,this.leftPoints.splice(L,1),O=i.ge(this.rightPoints,C,x);O<this.rightPoints.length&&this.rightPoints[O][1]===C[1];++O)if(this.rightPoints[O]===C)return this.rightPoints.splice(O,1),1;return 0},n.queryPoint=function(C,w){return C<this.mid?this.left&&(E=this.left.queryPoint(C,w))?E:u(this.leftPoints,C,w):C>this.mid?this.right&&(E=this.right.queryPoint(C,w))?E:y(this.rightPoints,C,w):d(this.leftPoints,w);var E},n.queryInterval=function(C,w,E){var P;return C<this.mid&&this.left&&(P=this.left.queryInterval(C,w,E))||w>this.mid&&this.right&&(P=this.right.queryInterval(C,w,E))?P:w<this.mid?u(this.leftPoints,w,E):C>this.mid?y(this.rightPoints,C,E):d(this.leftPoints,E)};var f=_.prototype;f.insert=function(C){this.root?this.root.insert(C):this.root=new r(C[0],null,null,[C],[C])},f.remove=function(C){if(this.root){var w=this.root.remove(C);return 2===w&&(this.root=null),0!==w}return!1},f.queryPoint=function(C,w){if(this.root)return this.root.queryPoint(C,w)},f.queryInterval=function(C,w,E){if(C<=w&&this.root)return this.root.queryInterval(C,w,E)},Object.defineProperty(f,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(f,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},7762:function(p){"use strict";p.exports=function(l){for(var t=new Array(l),i=0;i<l;++i)t[i]=i;return t}},9507:function(p){p.exports=!0},7163:function(p){function l(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}p.exports=function(t){return null!=t&&(l(t)||"function"==typeof(i=t).readFloatLE&&"function"==typeof i.slice&&l(i.slice(0,0))||!!t._isBuffer);var i}},5219:function(p){"use strict";p.exports=function(l){for(var t,i=l.length,r=0;r<i;r++)if(((t=l.charCodeAt(r))<9||t>13)&&32!==t&&133!==t&&160!==t&&5760!==t&&6158!==t&&(t<8192||t>8205)&&8232!==t&&8233!==t&&8239!==t&&8287!==t&&8288!==t&&12288!==t&&65279!==t)return!1;return!0}},395:function(p){p.exports=function(l,t,i){return l*(1-i)+t*i}},2652:function(p,l,t){var i=t(4335),r=t(6864),n=t(1903),a=t(9921),s=t(7608),c=t(5665),h={length:t(1387),normalize:t(3536),dot:t(244),cross:t(5911)},u=r(),y=r(),d=[0,0,0,0],m=[[0,0,0],[0,0,0],[0,0,0]],g=[0,0,0];function x(v,_,f,C,w){v[0]=_[0]*C+f[0]*w,v[1]=_[1]*C+f[1]*w,v[2]=_[2]*C+f[2]*w}p.exports=function(v,_,f,C,w,E){if(_||(_=[0,0,0]),f||(f=[0,0,0]),C||(C=[0,0,0]),w||(w=[0,0,0,1]),E||(E=[0,0,0,1]),!i(u,v)||(n(y,u),y[3]=0,y[7]=0,y[11]=0,y[15]=1,Math.abs(a(y)<1e-8)))return!1;var P,L,O,z,V,R,U,$,X,Z=u[3],N=u[7],G=u[11],W=u[12],ae=u[13],re=u[14],ne=u[15];if(0!==Z||0!==N||0!==G){if(d[0]=Z,d[1]=N,d[2]=G,d[3]=ne,!s(y,y))return!1;c(y,y),z=(L=d)[0],(P=w)[0]=(O=y)[0]*z+O[4]*(V=L[1])+O[8]*(R=L[2])+O[12]*(U=L[3]),P[1]=O[1]*z+O[5]*V+O[9]*R+O[13]*U,P[2]=O[2]*z+O[6]*V+O[10]*R+O[14]*U,P[3]=O[3]*z+O[7]*V+O[11]*R+O[15]*U}else w[0]=w[1]=w[2]=0,w[3]=1;if(_[0]=W,_[1]=ae,_[2]=re,($=m)[0][0]=(X=u)[0],$[0][1]=X[1],$[0][2]=X[2],$[1][0]=X[4],$[1][1]=X[5],$[1][2]=X[6],$[2][0]=X[8],$[2][1]=X[9],$[2][2]=X[10],f[0]=h.length(m[0]),h.normalize(m[0],m[0]),C[0]=h.dot(m[0],m[1]),x(m[1],m[1],m[0],1,-C[0]),f[1]=h.length(m[1]),h.normalize(m[1],m[1]),C[0]/=f[1],C[1]=h.dot(m[0],m[2]),x(m[2],m[2],m[0],1,-C[1]),C[2]=h.dot(m[1],m[2]),x(m[2],m[2],m[1],1,-C[2]),f[2]=h.length(m[2]),h.normalize(m[2],m[2]),C[1]/=f[2],C[2]/=f[2],h.cross(g,m[1],m[2]),h.dot(m[0],g)<0)for(var Q=0;Q<3;Q++)f[Q]*=-1,m[Q][0]*=-1,m[Q][1]*=-1,m[Q][2]*=-1;return E[0]=.5*Math.sqrt(Math.max(1+m[0][0]-m[1][1]-m[2][2],0)),E[1]=.5*Math.sqrt(Math.max(1-m[0][0]+m[1][1]-m[2][2],0)),E[2]=.5*Math.sqrt(Math.max(1-m[0][0]-m[1][1]+m[2][2],0)),E[3]=.5*Math.sqrt(Math.max(1+m[0][0]+m[1][1]+m[2][2],0)),m[2][1]>m[1][2]&&(E[0]=-E[0]),m[0][2]>m[2][0]&&(E[1]=-E[1]),m[1][0]>m[0][1]&&(E[2]=-E[2]),!0}},4335:function(p){p.exports=function(l,t){var i=t[15];if(0===i)return!1;for(var r=1/i,n=0;n<16;n++)l[n]=t[n]*r;return!0}},7442:function(p,l,t){var i=t(6658),r=t(7182),n=t(2652),a=t(9921),s=t(8648),c=y(),h=y(),u=y();function y(){return{translate:d(),scale:d(1),skew:d(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function d(m){return[m||0,m||0,m||0]}p.exports=function(m,g,x,v){if(0===a(g)||0===a(x))return!1;var _=n(g,c.translate,c.scale,c.skew,c.perspective,c.quaternion),f=n(x,h.translate,h.scale,h.skew,h.perspective,h.quaternion);return!(!_||!f||(i(u.translate,c.translate,h.translate,v),i(u.skew,c.skew,h.skew,v),i(u.scale,c.scale,h.scale,v),i(u.perspective,c.perspective,h.perspective,v),s(u.quaternion,c.quaternion,h.quaternion,v),r(m,u.translate,u.scale,u.skew,u.perspective,u.quaternion),0))}},7182:function(p,l,t){var i={identity:t(7894),translate:t(7656),multiply:t(6760),create:t(6864),scale:t(2504),fromRotationTranslation:t(6743)},r=(i.create(),i.create());p.exports=function(n,a,s,c,h,u){return i.identity(n),i.fromRotationTranslation(n,u,a),n[3]=h[0],n[7]=h[1],n[11]=h[2],n[15]=h[3],i.identity(r),0!==c[2]&&(r[9]=c[2],i.multiply(n,n,r)),0!==c[1]&&(r[9]=0,r[8]=c[1],i.multiply(n,n,r)),0!==c[0]&&(r[8]=0,r[4]=c[0],i.multiply(n,n,r)),i.scale(n,n,s),n}},4192:function(p,l,t){"use strict";var i=t(2478),r=t(7442),n=t(7608),a=t(5567),s=t(2408),c=t(7089),h=t(6582),u=t(7656),y=(t(2504),t(3536)),d=[0,0,0];function m(v){this._components=v.slice(),this._time=[0],this.prevMatrix=v.slice(),this.nextMatrix=v.slice(),this.computedMatrix=v.slice(),this.computedInverse=v.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}p.exports=function(v){return new m((v=v||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var g=m.prototype;g.recalcMatrix=function(v){var _=this._time,f=i.le(_,v),C=this.computedMatrix;if(!(f<0)){var w=this._components;if(f===_.length-1)for(var E=16*f,P=0;P<16;++P)C[P]=w[E++];else{var L=_[f+1]-_[f],O=(E=16*f,this.prevMatrix),z=!0;for(P=0;P<16;++P)O[P]=w[E++];var V=this.nextMatrix;for(P=0;P<16;++P)V[P]=w[E++],z=z&&O[P]===V[P];if(L<1e-6||z)for(P=0;P<16;++P)C[P]=O[P];else r(C,O,V,(v-_[f])/L)}var R=this.computedUp;R[0]=C[1],R[1]=C[5],R[2]=C[9],y(R,R);var U=this.computedInverse;n(U,C);var Z=this.computedEye,N=U[15];Z[0]=U[12]/N,Z[1]=U[13]/N,Z[2]=U[14]/N;var G=this.computedCenter,W=Math.exp(this.computedRadius[0]);for(P=0;P<3;++P)G[P]=Z[P]-C[2+4*P]*W}},g.idle=function(v){if(!(v<this.lastT())){for(var _=this._components,f=_.length-16,C=0;C<16;++C)_.push(_[f++]);this._time.push(v)}},g.flush=function(v){var _=i.gt(this._time,v)-2;_<0||(this._time.splice(0,_),this._components.splice(0,16*_))},g.lastT=function(){return this._time[this._time.length-1]},g.lookAt=function(v,_,f,C){this.recalcMatrix(v),this.setMatrix(v,h(this.computedMatrix,_=_||this.computedEye,f=f||d,C=C||this.computedUp));for(var w=0,E=0;E<3;++E)w+=Math.pow(f[E]-_[E],2);w=Math.log(Math.sqrt(w)),this.computedRadius[0]=w},g.rotate=function(v,_,f,C){this.recalcMatrix(v);var w=this.computedInverse;_&&s(w,w,_),f&&a(w,w,f),C&&c(w,w,C),this.setMatrix(v,n(this.computedMatrix,w))};var x=[0,0,0];g.pan=function(v,_,f,C){x[0]=-(_||0),x[1]=-(f||0),x[2]=-(C||0),this.recalcMatrix(v);var w=this.computedInverse;u(w,w,x),this.setMatrix(v,n(w,w))},g.translate=function(v,_,f,C){x[0]=_||0,x[1]=f||0,x[2]=C||0,this.recalcMatrix(v);var w=this.computedMatrix;u(w,w,x),this.setMatrix(v,w)},g.setMatrix=function(v,_){if(!(v<this.lastT())){this._time.push(v);for(var f=0;f<16;++f)this._components.push(_[f])}},g.setDistance=function(v,_){this.computedRadius[0]=_},g.setDistanceLimits=function(v,_){var f=this._limits;f[0]=v,f[1]=_},g.getDistanceLimits=function(v){var _=this._limits;return v?(v[0]=_[0],v[1]=_[1],v):_}},3090:function(p,l,t){"use strict";p.exports=function(r){var n=r.length;if(n<3){for(var a=new Array(n),s=0;s<n;++s)a[s]=s;return 2===n&&r[0][0]===r[1][0]&&r[0][1]===r[1][1]?[0]:a}var c=new Array(n);for(s=0;s<n;++s)c[s]=s;c.sort(function(_,f){return r[_][0]-r[f][0]||r[_][1]-r[f][1]});var h=[c[0],c[1]],u=[c[0],c[1]];for(s=2;s<n;++s){for(var y=c[s],d=r[y],m=h.length;m>1&&i(r[h[m-2]],r[h[m-1]],d)<=0;)m-=1,h.pop();for(h.push(y),m=u.length;m>1&&i(r[u[m-2]],r[u[m-1]],d)>=0;)m-=1,u.pop();u.push(y)}a=new Array(u.length+h.length-2);for(var g=0,x=(s=0,h.length);s<x;++s)a[g++]=h[s];for(var v=u.length-2;v>0;--v)a[g++]=u[v];return a};var i=t(3250)[3]},351:function(p,l,t){"use strict";p.exports=function(r,n){n||(n=r,r=window);var a=0,s=0,c=0,h={shift:!1,alt:!1,control:!1,meta:!1},u=!1;function y(E){var P=!1;return"altKey"in E&&(P=P||E.altKey!==h.alt,h.alt=!!E.altKey),"shiftKey"in E&&(P=P||E.shiftKey!==h.shift,h.shift=!!E.shiftKey),"ctrlKey"in E&&(P=P||E.ctrlKey!==h.control,h.control=!!E.ctrlKey),"metaKey"in E&&(P=P||E.metaKey!==h.meta,h.meta=!!E.metaKey),P}function d(E,P){var L=i.x(P),O=i.y(P);"buttons"in P&&(E=0|P.buttons),(E!==a||L!==s||O!==c||y(P))&&(a=0|E,s=L||0,c=O||0,n&&n(a,s,c,h))}function m(E){d(0,E)}function g(){(a||s||c||h.shift||h.alt||h.meta||h.control)&&(s=c=0,a=0,h.shift=h.alt=h.control=h.meta=!1,n&&n(0,0,0,h))}function x(E){y(E)&&n&&n(a,s,c,h)}function v(E){0===i.buttons(E)?d(0,E):d(a,E)}function _(E){d(a|i.buttons(E),E)}function f(E){d(a&~i.buttons(E),E)}function C(){u||(u=!0,r.addEventListener("mousemove",v),r.addEventListener("mousedown",_),r.addEventListener("mouseup",f),r.addEventListener("mouseleave",m),r.addEventListener("mouseenter",m),r.addEventListener("mouseout",m),r.addEventListener("mouseover",m),r.addEventListener("blur",g),r.addEventListener("keyup",x),r.addEventListener("keydown",x),r.addEventListener("keypress",x),r!==window&&(window.addEventListener("blur",g),window.addEventListener("keyup",x),window.addEventListener("keydown",x),window.addEventListener("keypress",x)))}C();var w={element:r};return Object.defineProperties(w,{enabled:{get:function(){return u},set:function(E){E?C():u&&(u=!1,r.removeEventListener("mousemove",v),r.removeEventListener("mousedown",_),r.removeEventListener("mouseup",f),r.removeEventListener("mouseleave",m),r.removeEventListener("mouseenter",m),r.removeEventListener("mouseout",m),r.removeEventListener("mouseover",m),r.removeEventListener("blur",g),r.removeEventListener("keyup",x),r.removeEventListener("keydown",x),r.removeEventListener("keypress",x),r!==window&&(window.removeEventListener("blur",g),window.removeEventListener("keyup",x),window.removeEventListener("keydown",x),window.removeEventListener("keypress",x)))},enumerable:!0},buttons:{get:function(){return a},enumerable:!0},x:{get:function(){return s},enumerable:!0},y:{get:function(){return c},enumerable:!0},mods:{get:function(){return h},enumerable:!0}}),w};var i=t(4687)},24:function(p){var l={left:0,top:0};p.exports=function(t,i,r){i=i||t.currentTarget||t.srcElement,Array.isArray(r)||(r=[0,0]);var n,a=t.clientX||0,s=t.clientY||0,c=(n=i)===window||n===document||n===document.body?l:n.getBoundingClientRect();return r[0]=a-c.left,r[1]=s-c.top,r}},4687:function(p,l){"use strict";function t(i){return i.target||i.srcElement||window}l.buttons=function(i){if("object"==typeof i){if("buttons"in i)return i.buttons;if("which"in i){if(2===(r=i.which))return 4;if(3===r)return 2;if(r>0)return 1<<r-1}else if("button"in i){var r;if(1===(r=i.button))return 4;if(2===r)return 2;if(r>=0)return 1<<r}}return 0},l.element=t,l.x=function(i){if("object"==typeof i){if("offsetX"in i)return i.offsetX;var r=t(i).getBoundingClientRect();return i.clientX-r.left}return 0},l.y=function(i){if("object"==typeof i){if("offsetY"in i)return i.offsetY;var r=t(i).getBoundingClientRect();return i.clientY-r.top}return 0}},8512:function(p,l,t){"use strict";var i=t(665);p.exports=function(r,n,a){"function"==typeof r&&(a=!!n,n=r,r=window);var s=i("ex",r),c=function(h){a&&h.preventDefault();var u=h.deltaX||0,y=h.deltaY||0,d=h.deltaZ||0,m=1;switch(h.deltaMode){case 1:m=s;break;case 2:m=window.innerHeight}if(y*=m,d*=m,(u*=m)||y||d)return n(u,y,d,h)};return r.addEventListener("wheel",c),c}},2640:function(p,l,t){"use strict";var i=t(1888);p.exports=function(n){function a(d){throw new Error("ndarray-extract-contour: "+d)}"object"!=typeof n&&a("Must specify arguments");var s=n.order;Array.isArray(s)||a("Must specify order");var d,m,g,f,c=n.arrayArguments||1;c<1&&a("Must have at least one array argument"),(n.scalarArguments||0)<0&&a("Scalar arg count must be > 0"),"function"!=typeof n.vertex&&a("Must specify vertex creation function"),"function"!=typeof n.cell&&a("Must specify cell creation function"),"function"!=typeof n.phase&&a("Must specify phase function");for(var h=n.getters||[],u=new Array(c),y=0;y<c;++y)u[y]=h.indexOf(y)>=0;return d=n.vertex,m=n.cell,g=n.phase,f=[u,s].join(","),(0,r[f])(d,m,g,i.mallocUint32,i.freeUint32)};var r={"false,0,1":function(n,a,s,c,h){return function(u,y,d,m){var g,x=0|u.shape[0],v=0|u.shape[1],_=u.data,C=0|u.stride[0],w=0|u.stride[1],E=0|u.offset,P=0|-C,L=0,O=0|-w,z=0,V=-C-w|0,R=0,U=0|C,Z=w-C*x|0,N=0,G=0,W=0,ae=2*x|0,re=c(ae),ne=c(ae),Q=0,$=0,X=-1,oe=-1,fe=0,ue=0|-x,ge=0|x,we=0,Te=-x-1|0,xe=x-1|0,ye=0,_e=0,Ie=0;for(N=0;N<x;++N)re[Q++]=s(_[E],y,d,m),E+=U;if(E+=Z,v>0){if(G=1,re[Q++]=s(_[E],y,d,m),E+=U,x>0)for(N=1,$=re[Q]=s(g=_[E],y,d,m),we=re[Q+ue],ye=re[Q+Te],$===(fe=re[Q+X])&&$===we&&$===ye||(n(N,G,g,L=_[E+P],z=_[E+O],R=_[E+V],$,fe,we,ye,y,d,m),_e=ne[Q]=W++),Q+=1,E+=U,N=2;N<x;++N)$=re[Q]=s(g=_[E],y,d,m),we=re[Q+ue],ye=re[Q+Te],$===(fe=re[Q+X])&&$===we&&$===ye||(n(N,G,g,L=_[E+P],z=_[E+O],R=_[E+V],$,fe,we,ye,y,d,m),_e=ne[Q]=W++,ye!==fe&&a(ne[Q+X],_e,R,L,ye,fe,y,d,m)),Q+=1,E+=U;for(E+=Z,Q=0,Ie=X,X=oe,oe=Ie,Ie=ue,ue=ge,ge=Ie,Ie=Te,Te=xe,xe=Ie,G=2;G<v;++G){if(re[Q++]=s(_[E],y,d,m),E+=U,x>0)for(N=1,$=re[Q]=s(g=_[E],y,d,m),we=re[Q+ue],ye=re[Q+Te],$===(fe=re[Q+X])&&$===we&&$===ye||(n(N,G,g,L=_[E+P],z=_[E+O],R=_[E+V],$,fe,we,ye,y,d,m),_e=ne[Q]=W++,ye!==we&&a(ne[Q+ue],_e,z,R,we,ye,y,d,m)),Q+=1,E+=U,N=2;N<x;++N)$=re[Q]=s(g=_[E],y,d,m),we=re[Q+ue],ye=re[Q+Te],$===(fe=re[Q+X])&&$===we&&$===ye||(n(N,G,g,L=_[E+P],z=_[E+O],R=_[E+V],$,fe,we,ye,y,d,m),_e=ne[Q]=W++,ye!==we&&a(ne[Q+ue],_e,z,R,we,ye,y,d,m),ye!==fe&&a(ne[Q+X],_e,R,L,ye,fe,y,d,m)),Q+=1,E+=U;1&G&&(Q=0),Ie=X,X=oe,oe=Ie,Ie=ue,ue=ge,ge=Ie,Ie=Te,Te=xe,xe=Ie,E+=Z}}h(ne),h(re)}},"false,1,0":function(n,a,s,c,h){return function(u,y,d,m){var g,x=0|u.shape[0],v=0|u.shape[1],_=u.data,C=0|u.stride[0],w=0|u.stride[1],E=0|u.offset,P=0|-C,L=0,O=0|-w,z=0,V=-C-w|0,R=0,U=0|w,Z=C-w*v|0,N=0,G=0,W=0,ae=2*v|0,re=c(ae),ne=c(ae),Q=0,$=0,X=-1,oe=-1,fe=0,ue=0|-v,ge=0|v,we=0,Te=-v-1|0,xe=v-1|0,ye=0,_e=0,Ie=0;for(G=0;G<v;++G)re[Q++]=s(_[E],y,d,m),E+=U;if(E+=Z,x>0){if(N=1,re[Q++]=s(_[E],y,d,m),E+=U,v>0)for(G=1,$=re[Q]=s(g=_[E],y,d,m),fe=re[Q+X],ye=re[Q+Te],$===(we=re[Q+ue])&&$===fe&&$===ye||(n(N,G,g,L=_[E+P],z=_[E+O],R=_[E+V],$,we,fe,ye,y,d,m),_e=ne[Q]=W++),Q+=1,E+=U,G=2;G<v;++G)$=re[Q]=s(g=_[E],y,d,m),fe=re[Q+X],ye=re[Q+Te],$===(we=re[Q+ue])&&$===fe&&$===ye||(n(N,G,g,L=_[E+P],z=_[E+O],R=_[E+V],$,we,fe,ye,y,d,m),_e=ne[Q]=W++,ye!==fe&&a(ne[Q+X],_e,z,R,fe,ye,y,d,m)),Q+=1,E+=U;for(E+=Z,Q=0,Ie=ue,ue=ge,ge=Ie,Ie=X,X=oe,oe=Ie,Ie=Te,Te=xe,xe=Ie,N=2;N<x;++N){if(re[Q++]=s(_[E],y,d,m),E+=U,v>0)for(G=1,$=re[Q]=s(g=_[E],y,d,m),fe=re[Q+X],ye=re[Q+Te],$===(we=re[Q+ue])&&$===fe&&$===ye||(n(N,G,g,L=_[E+P],z=_[E+O],R=_[E+V],$,we,fe,ye,y,d,m),_e=ne[Q]=W++,ye!==we&&a(ne[Q+ue],_e,R,L,ye,we,y,d,m)),Q+=1,E+=U,G=2;G<v;++G)$=re[Q]=s(g=_[E],y,d,m),fe=re[Q+X],ye=re[Q+Te],$===(we=re[Q+ue])&&$===fe&&$===ye||(n(N,G,g,L=_[E+P],z=_[E+O],R=_[E+V],$,we,fe,ye,y,d,m),_e=ne[Q]=W++,ye!==fe&&a(ne[Q+X],_e,z,R,fe,ye,y,d,m),ye!==we&&a(ne[Q+ue],_e,R,L,ye,we,y,d,m)),Q+=1,E+=U;1&N&&(Q=0),Ie=ue,ue=ge,ge=Ie,Ie=X,X=oe,oe=Ie,Ie=Te,Te=xe,xe=Ie,E+=Z}}h(ne),h(re)}}}},6199:function(p,l,t){"use strict";var i=t(1338),r={zero:function(x,v,_,f){var C=x[0];f|=0;var w=0,E=_[0];for(w=0;w<C;++w)v[f]=0,f+=E},fdTemplate1:function(x,v,_,f,C,w,E){var P=x[0],L=_[0],O=-1*L,z=L;f|=0,E|=0;var V=0,R=L,U=w[0];for(V=0;V<P;++V)C[E]=.5*(v[f+O]-v[f+z]),f+=R,E+=U},fdTemplate2:function(x,v,_,f,C,w,E,P,L,O){var z=x[0],V=x[1],R=_[0],U=_[1],N=w[1],W=L[1],ae=-1*R,re=R,ne=-1*U,Q=U;f|=0,E|=0,O|=0;var $=0,X=0,oe=U,fe=R-V*U,ue=N,ge=w[0]-V*N,we=W,Te=L[0]-V*W;for(X=0;X<z;++X){for($=0;$<V;++$)C[E]=.5*(v[f+ae]-v[f+re]),P[O]=.5*(v[f+ne]-v[f+Q]),f+=oe,E+=ue,O+=we;f+=fe,E+=ge,O+=Te}}},n={cdiff:function(x){var v={};return function(_,f,C){var w=_.dtype,E=_.order,P=f.dtype,L=f.order,O=C.dtype,z=C.order,V=[w,E.join(),P,L.join(),O,z.join()].join(),R=v[V];return R||(v[V]=R=x([w,E,P,L,O,z])),R(_.shape.slice(0),_.data,_.stride,0|_.offset,f.data,f.stride,0|f.offset,C.data,C.stride,0|C.offset)}},zero:function(x){var v={};return function(_){var f=_.dtype,C=_.order,w=[f,C.join()].join(),E=v[w];return E||(v[w]=E=x([f,C])),E(_.shape.slice(0),_.data,_.stride,0|_.offset)}},fdTemplate1:function(x){var v={};return function(_,f){var C=_.dtype,w=_.order,E=f.dtype,P=f.order,L=[C,w.join(),E,P.join()].join(),O=v[L];return O||(v[L]=O=x([C,w,E,P])),O(_.shape.slice(0),_.data,_.stride,0|_.offset,f.data,f.stride,0|f.offset)}},fdTemplate2:function(x){var v={};return function(_,f,C){var w=_.dtype,E=_.order,P=f.dtype,L=f.order,O=C.dtype,z=C.order,V=[w,E.join(),P,L.join(),O,z.join()].join(),R=v[V];return R||(v[V]=R=x([w,E,P,L,O,z])),R(_.shape.slice(0),_.data,_.stride,0|_.offset,f.data,f.stride,0|f.offset,C.data,C.stride,0|C.offset)}}};function a(x){return(0,n[x.funcName])(s.bind(void 0,x))}function s(x){return r[x.funcName]}function c(x){return a({funcName:x.funcName})}var h={},u={},y=c({funcName:"cdiff"}),d=c({funcName:"zero"});function m(x){return x in h?h[x]:h[x]=c({funcName:"fdTemplate"+x})}function g(x,v,_,f){return function(C,w){var E=w.shape.slice();return E[0]>2&&E[1]>2&&f(w.pick(-1,-1).lo(1,1).hi(E[0]-2,E[1]-2),C.pick(-1,-1,0).lo(1,1).hi(E[0]-2,E[1]-2),C.pick(-1,-1,1).lo(1,1).hi(E[0]-2,E[1]-2)),E[1]>2&&(_(w.pick(0,-1).lo(1).hi(E[1]-2),C.pick(0,-1,1).lo(1).hi(E[1]-2)),v(C.pick(0,-1,0).lo(1).hi(E[1]-2))),E[1]>2&&(_(w.pick(E[0]-1,-1).lo(1).hi(E[1]-2),C.pick(E[0]-1,-1,1).lo(1).hi(E[1]-2)),v(C.pick(E[0]-1,-1,0).lo(1).hi(E[1]-2))),E[0]>2&&(_(w.pick(-1,0).lo(1).hi(E[0]-2),C.pick(-1,0,0).lo(1).hi(E[0]-2)),v(C.pick(-1,0,1).lo(1).hi(E[0]-2))),E[0]>2&&(_(w.pick(-1,E[1]-1).lo(1).hi(E[0]-2),C.pick(-1,E[1]-1,0).lo(1).hi(E[0]-2)),v(C.pick(-1,E[1]-1,1).lo(1).hi(E[0]-2))),C.set(0,0,0,0),C.set(0,0,1,0),C.set(E[0]-1,0,0,0),C.set(E[0]-1,0,1,0),C.set(0,E[1]-1,0,0),C.set(0,E[1]-1,1,0),C.set(E[0]-1,E[1]-1,0,0),C.set(E[0]-1,E[1]-1,1,0),C}}p.exports=function(x,v,_){return Array.isArray(_)||(_=i(v.dimension,"string"==typeof _?_:"clamp")),0===v.size?x:0===v.dimension?(x.set(0),x):function(f){var C=f.join();if(L=u[C])return L;for(var w=f.length,E=[y,d],P=1;P<=w;++P)E.push(m(P));var L=g.apply(void 0,E);return u[C]=L,L}(_)(x,v)}},4317:function(p){"use strict";function l(n,a){var s=Math.floor(a),c=a-s,u=0<=s+1&&s+1<n.shape[0];return(1-c)*(0<=s&&s<n.shape[0]?+n.get(s):0)+c*(u?+n.get(s+1):0)}function t(n,a,s){var c=Math.floor(a),h=a-c,u=0<=c&&c<n.shape[0],y=0<=c+1&&c+1<n.shape[0],d=Math.floor(s),m=s-d,g=0<=d&&d<n.shape[1],x=0<=d+1&&d+1<n.shape[1],v=u&&g?n.get(c,d):0,_=u&&x?n.get(c,d+1):0;return(1-m)*((1-h)*v+h*(y&&g?n.get(c+1,d):0))+m*((1-h)*_+h*(y&&x?n.get(c+1,d+1):0))}function i(n,a,s,c){var h=Math.floor(a),u=a-h,y=0<=h&&h<n.shape[0],d=0<=h+1&&h+1<n.shape[0],m=Math.floor(s),g=s-m,x=0<=m&&m<n.shape[1],v=0<=m+1&&m+1<n.shape[1],_=Math.floor(c),f=c-_,C=0<=_&&_<n.shape[2],w=0<=_+1&&_+1<n.shape[2],E=y&&x&&C?n.get(h,m,_):0,P=y&&v&&C?n.get(h,m+1,_):0,L=d&&x&&C?n.get(h+1,m,_):0,O=d&&v&&C?n.get(h+1,m+1,_):0,z=y&&x&&w?n.get(h,m,_+1):0,V=y&&v&&w?n.get(h,m+1,_+1):0;return(1-f)*((1-g)*((1-u)*E+u*L)+g*((1-u)*P+u*O))+f*((1-g)*((1-u)*z+u*(d&&x&&w?n.get(h+1,m,_+1):0))+g*((1-u)*V+u*(d&&v&&w?n.get(h+1,m+1,_+1):0)))}function r(n){var a,s,c=0|n.shape.length,h=new Array(c),u=new Array(c),y=new Array(c),d=new Array(c);for(a=0;a<c;++a)s=+arguments[a+1],h[a]=Math.floor(s),u[a]=s-h[a],y[a]=0<=h[a]&&h[a]<n.shape[a],d[a]=0<=h[a]+1&&h[a]+1<n.shape[a];var m,g,x,v=0;e:for(a=0;a<1<<c;++a){for(g=1,x=n.offset,m=0;m<c;++m)if(a&1<<m){if(!d[m])continue e;g*=u[m],x+=n.stride[m]*(h[m]+1)}else{if(!y[m])continue e;g*=1-u[m],x+=n.stride[m]*h[m]}v+=g*n.data[x]}return v}p.exports=function(n,a,s,c){switch(n.shape.length){case 0:return 0;case 1:return l(n,a);case 2:return t(n,a,s);case 3:return i(n,a,s,c);default:return r.apply(void 0,arguments)}},p.exports.d1=l,p.exports.d2=t,p.exports.d3=i},5298:function(p,l){"use strict";var t={"float64,2,1,0":function(){return function(s,c,h,u,y){var d=s[0],m=s[1],g=s[2],v=h[1],_=h[2];u|=0;var f=0,C=0,w=0,E=_,P=v-g*_,L=h[0]-m*v;for(w=0;w<d;++w){for(C=0;C<m;++C){for(f=0;f<g;++f)c[u]/=y,u+=E;u+=P}u+=L}}},"uint8,2,0,1,float64,2,1,0":function(){return function(s,c,h,u,y,d,m,g){for(var x=s[0],v=s[1],_=s[2],f=h[0],C=h[1],w=h[2],E=d[0],P=d[1],L=d[2],O=u|=0,z=m|=0,V=0|s[0];V>0;){V<64?(x=V,V=0):(x=64,V-=64);for(var R=0|s[1];R>0;){R<64?(v=R,R=0):(v=64,R-=64),u=O+V*f+R*C,m=z+V*E+R*P;var U=0,Z=0,N=0,G=w,W=f-_*w,ae=C-x*f,re=L,ne=E-_*L,Q=P-x*E;for(N=0;N<v;++N){for(Z=0;Z<x;++Z){for(U=0;U<_;++U)c[u]=y[m]*g,u+=G,m+=re;u+=W,m+=ne}u+=ae,m+=Q}}}}},"float32,1,0,float32,1,0":function(){return function(s,c,h,u,y,d,m){var g=s[0],x=s[1],_=h[1],C=d[1];u|=0,m|=0;var w=0,E=0,P=_,L=h[0]-x*_,O=C,z=d[0]-x*C;for(E=0;E<g;++E){for(w=0;w<x;++w)c[u]=y[m],u+=P,m+=O;u+=L,m+=z}}},"float32,1,0,float32,0,1":function(){return function(s,c,h,u,y,d,m){for(var g=s[0],x=s[1],v=h[0],_=h[1],f=d[0],C=d[1],w=u|=0,E=m|=0,P=0|s[1];P>0;){P<64?(x=P,P=0):(x=64,P-=64);for(var L=0|s[0];L>0;){L<64?(g=L,L=0):(g=64,L-=64),u=w+P*_+L*v,m=E+P*C+L*f;var O=0,z=0,V=_,R=v-x*_,U=C,Z=f-x*C;for(z=0;z<g;++z){for(O=0;O<x;++O)c[u]=y[m],u+=V,m+=U;u+=R,m+=Z}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(s,c,h,u,y,d,m){for(var g=s[0],x=s[1],v=s[2],_=h[0],f=h[1],C=h[2],w=d[0],E=d[1],P=d[2],L=u|=0,O=m|=0,z=0|s[2];z>0;){z<64?(v=z,z=0):(v=64,z-=64);for(var V=0|s[0];V>0;){V<64?(g=V,V=0):(g=64,V-=64);for(var R=0|s[1];R>0;){R<64?(x=R,R=0):(x=64,R-=64),u=L+z*C+V*_+R*f,m=O+z*P+V*w+R*E;var U=0,Z=0,N=0,G=C,W=_-v*C,ae=f-g*_,re=P,ne=w-v*P,Q=E-g*w;for(N=0;N<x;++N){for(Z=0;Z<g;++Z){for(U=0;U<v;++U)c[u]=y[m],u+=G,m+=re;u+=W,m+=ne}u+=ae,m+=Q}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(s,c,h,u,y,d,m){var g=s[0],x=s[1],v=s[2],_=h[0],C=h[2],w=d[0],P=d[2];u|=0,m|=0;var L=0,O=0,z=0,V=C,R=_-v*C,U=h[1]-g*_,Z=P,N=w-v*P,G=d[1]-g*w;for(z=0;z<x;++z){for(O=0;O<g;++O){for(L=0;L<v;++L)c[u]=y[m],u+=V,m+=Z;u+=R,m+=N}u+=U,m+=G}}}},i=function(s,c){var h=c.join(",");return(0,t[h])()},r={mul:function(s){var c={};return function(h,u,y){var d=h.dtype,m=h.order,g=u.dtype,x=u.order,v=y.dtype,_=y.order,f=[d,m.join(),g,x.join(),v,_.join()].join(),C=c[f];return C||(c[f]=C=s([d,m,g,x,v,_])),C(h.shape.slice(0),h.data,h.stride,0|h.offset,u.data,u.stride,0|u.offset,y.data,y.stride,0|y.offset)}},muls:function(s){var c={};return function(h,u,y){var d=h.dtype,m=h.order,g=u.dtype,x=u.order,v=[d,m.join(),g,x.join()].join(),_=c[v];return _||(c[v]=_=s([d,m,g,x])),_(h.shape.slice(0),h.data,h.stride,0|h.offset,u.data,u.stride,0|u.offset,y)}},mulseq:function(s){var c={};return function(h,u){var y=h.dtype,d=h.order,m=[y,d.join()].join(),g=c[m];return g||(c[m]=g=s([y,d])),g(h.shape.slice(0),h.data,h.stride,0|h.offset,u)}},div:function(s){var c={};return function(h,u,y){var d=h.dtype,m=h.order,g=u.dtype,x=u.order,v=y.dtype,_=y.order,f=[d,m.join(),g,x.join(),v,_.join()].join(),C=c[f];return C||(c[f]=C=s([d,m,g,x,v,_])),C(h.shape.slice(0),h.data,h.stride,0|h.offset,u.data,u.stride,0|u.offset,y.data,y.stride,0|y.offset)}},divs:function(s){var c={};return function(h,u,y){var d=h.dtype,m=h.order,g=u.dtype,x=u.order,v=[d,m.join(),g,x.join()].join(),_=c[v];return _||(c[v]=_=s([d,m,g,x])),_(h.shape.slice(0),h.data,h.stride,0|h.offset,u.data,u.stride,0|u.offset,y)}},divseq:function(s){var c={};return function(h,u){var y=h.dtype,d=h.order,m=[y,d.join()].join(),g=c[m];return g||(c[m]=g=s([y,d])),g(h.shape.slice(0),h.data,h.stride,0|h.offset,u)}},assign:function(s){var c={};return function(h,u){var y=h.dtype,d=h.order,m=u.dtype,g=u.order,x=[y,d.join(),m,g.join()].join(),v=c[x];return v||(c[x]=v=s([y,d,m,g])),v(h.shape.slice(0),h.data,h.stride,0|h.offset,u.data,u.stride,0|u.offset)}}};function n(s){return(0,r[(c={funcName:s.funcName}).funcName])(i.bind(void 0,c));var c}var a={mul:"*",div:"/"};(function(){for(var s in a)l[s]=n({funcName:s}),l[s+"s"]=n({funcName:s+"s"}),l[s+"seq"]=n({funcName:s+"seq"})})(),l.assign=n({funcName:"assign"})},9994:function(p,l,t){"use strict";var i=t(9618),r=t(8277);p.exports=function(n,a){for(var s=[],c=n,h=1;Array.isArray(c);)s.push(c.length),h*=c.length,c=c[0];return 0===s.length?i():(a||(a=i(new Float64Array(h),s)),r(a,n),a)}},8277:function(p){"use strict";var l,t;p.exports=(l=function(){return function(l,t,i,r,n){var a=l[0],s=l[1],c=l[2],u=i[1],y=i[2],d=[0,0,0];r|=0;var m=0,g=0,x=0,v=y,_=u-c*y,f=i[0]-s*u;for(x=0;x<a;++x){for(g=0;g<s;++g){for(m=0;m<c;++m){var C,w=n;for(C=0;C<d.length-1;++C)w=w[d[C]];t[r]=w[d[d.length-1]],r+=v,++d[2]}r+=_,d[2]-=c,++d[1]}r+=f,d[1]-=s,++d[0]}}}.bind(void 0,{funcName:"convert"}),t={},function(i,r){var n=i.dtype,a=i.order,s=[n,a.join()].join(),c=t[s];return c||(t[s]=c=l([n,a])),c(i.shape.slice(0),i.data,i.stride,0|i.offset,r)})},7640:function(p,l,t){"use strict";var i=t(1888);function r(c){return"uint32"===c?[i.mallocUint32,i.freeUint32]:null}var n={"uint32,1,0":function(c,h){return function(u,y,d,m,g,x,v,_,f,C,w){var E,P,L,O,z,V,R,U,Z=u*g+m,N=c(_);for(E=u+1;E<=y;++E){for(P=E,L=Z+=g,z=0,V=Z,O=0;O<_;++O)N[z++]=d[V],V+=f;e:for(;P-- >u;){z=0,V=L-g;t:for(O=0;O<_;++O){if((R=d[V])<(U=N[z]))break e;if(R>U)break t;V+=C,z+=w}for(z=L,V=L-g,O=0;O<_;++O)d[z]=d[V],z+=f,V+=f;L-=g}for(z=L,V=0,O=0;O<_;++O)d[z]=N[V++],z+=f}h(N)}}},a={"uint32,1,0":function(c,h,u){return function y(d,m,g,x,v,_,f,C,w,E,P){var L,O,V,R,U,Z,N,G,W,ae,re,ne,Q,$,X,oe,fe,ue,ge,we,Te,xe,ye,_e,Ie=(m-d+1)/6|0,De=d+Ie,be=m-Ie,he=d+m>>1,ce=he-Ie,me=he+Ie,Pe=De,Ae=ce,Ce=he,Oe=me,Ne=be,je=d+1,ve=m-1,Me=!0,Le=0,Ue=0,ze=0,qe=C,Ke=h(qe),it=h(qe);ae=v*Pe,re=v*Ae,_e=x;e:for(W=0;W<C;++W){if((ze=g[Z=ae+_e]-g[N=re+_e])>0){O=Pe,Pe=Ae,Ae=O;break e}if(ze<0)break e;_e+=E}ae=v*Oe,re=v*Ne,_e=x;e:for(W=0;W<C;++W){if((ze=g[Z=ae+_e]-g[N=re+_e])>0){O=Oe,Oe=Ne,Ne=O;break e}if(ze<0)break e;_e+=E}ae=v*Pe,re=v*Ce,_e=x;e:for(W=0;W<C;++W){if((ze=g[Z=ae+_e]-g[N=re+_e])>0){O=Pe,Pe=Ce,Ce=O;break e}if(ze<0)break e;_e+=E}ae=v*Ae,re=v*Ce,_e=x;e:for(W=0;W<C;++W){if((ze=g[Z=ae+_e]-g[N=re+_e])>0){O=Ae,Ae=Ce,Ce=O;break e}if(ze<0)break e;_e+=E}ae=v*Pe,re=v*Oe,_e=x;e:for(W=0;W<C;++W){if((ze=g[Z=ae+_e]-g[N=re+_e])>0){O=Pe,Pe=Oe,Oe=O;break e}if(ze<0)break e;_e+=E}ae=v*Ce,re=v*Oe,_e=x;e:for(W=0;W<C;++W){if((ze=g[Z=ae+_e]-g[N=re+_e])>0){O=Ce,Ce=Oe,Oe=O;break e}if(ze<0)break e;_e+=E}ae=v*Ae,re=v*Ne,_e=x;e:for(W=0;W<C;++W){if((ze=g[Z=ae+_e]-g[N=re+_e])>0){O=Ae,Ae=Ne,Ne=O;break e}if(ze<0)break e;_e+=E}ae=v*Ae,re=v*Ce,_e=x;e:for(W=0;W<C;++W){if((ze=g[Z=ae+_e]-g[N=re+_e])>0){O=Ae,Ae=Ce,Ce=O;break e}if(ze<0)break e;_e+=E}ae=v*Oe,re=v*Ne,_e=x;e:for(W=0;W<C;++W){if((ze=g[Z=ae+_e]-g[N=re+_e])>0){O=Oe,Oe=Ne,Ne=O;break e}if(ze<0)break e;_e+=E}for(ae=v*Pe,re=v*Ae,ne=v*Ce,Q=v*Oe,$=v*Ne,X=v*De,oe=v*he,fe=v*be,ye=0,_e=x,W=0;W<C;++W)Z=ae+_e,G=ne+_e,ue=Q+_e,ge=$+_e,we=X+_e,Te=oe+_e,xe=fe+_e,Ke[ye]=g[N=re+_e],it[ye]=g[ue],Me=Me&&Ke[ye]===it[ye],V=g[G],R=g[ge],g[we]=g[Z],g[Te]=V,g[xe]=R,++ye,_e+=w;for(ae=v*ce,re=v*d,_e=x,W=0;W<C;++W)g[Z=ae+_e]=g[N=re+_e],_e+=w;for(ae=v*me,re=v*m,_e=x,W=0;W<C;++W)g[Z=ae+_e]=g[N=re+_e],_e+=w;if(Me)for(U=je;U<=ve;++U){for(Z=x+U*v,ye=0,W=0;W<C&&0==(ze=g[Z]-Ke[ye]);++W)ye+=P,Z+=E;if(0!==ze)if(ze<0){if(U!==je)for(ae=v*U,re=v*je,_e=x,W=0;W<C;++W)L=g[Z=ae+_e],g[Z]=g[N=re+_e],g[N]=L,_e+=w;++je}else for(;;){for(Z=x+ve*v,ye=0,W=0;W<C&&0==(ze=g[Z]-Ke[ye]);++W)ye+=P,Z+=E;if(!(ze>0)){if(ze<0){for(ae=v*U,re=v*je,ne=v*ve,_e=x,W=0;W<C;++W)G=ne+_e,L=g[Z=ae+_e],g[Z]=g[N=re+_e],g[N]=g[G],g[G]=L,_e+=w;++je,--ve;break}for(ae=v*U,re=v*ve,_e=x,W=0;W<C;++W)L=g[Z=ae+_e],g[Z]=g[N=re+_e],g[N]=L,_e+=w;--ve;break}ve--}}else for(U=je;U<=ve;++U){for(Z=x+U*v,ye=0,W=0;W<C&&0==(Le=g[Z]-Ke[ye]);++W)ye+=P,Z+=E;if(Le<0){if(U!==je)for(ae=v*U,re=v*je,_e=x,W=0;W<C;++W)L=g[Z=ae+_e],g[Z]=g[N=re+_e],g[N]=L,_e+=w;++je}else{for(Z=x+U*v,ye=0,W=0;W<C&&0==(Ue=g[Z]-it[ye]);++W)ye+=P,Z+=E;if(Ue>0)for(;;){for(Z=x+ve*v,ye=0,W=0;W<C&&0==(ze=g[Z]-it[ye]);++W)ye+=P,Z+=E;if(!(ze>0)){for(Z=x+ve*v,ye=0,W=0;W<C&&0==(ze=g[Z]-Ke[ye]);++W)ye+=P,Z+=E;if(ze<0){for(ae=v*U,re=v*je,ne=v*ve,_e=x,W=0;W<C;++W)G=ne+_e,L=g[Z=ae+_e],g[Z]=g[N=re+_e],g[N]=g[G],g[G]=L,_e+=w;++je,--ve}else{for(ae=v*U,re=v*ve,_e=x,W=0;W<C;++W)L=g[Z=ae+_e],g[Z]=g[N=re+_e],g[N]=L,_e+=w;--ve}break}if(--ve<U)break}}}for(ae=v*d,re=v*(je-1),ye=0,_e=x,W=0;W<C;++W)g[Z=ae+_e]=g[N=re+_e],g[N]=Ke[ye],++ye,_e+=w;for(ae=v*m,re=v*(ve+1),ye=0,_e=x,W=0;W<C;++W)g[Z=ae+_e]=g[N=re+_e],g[N]=it[ye],++ye,_e+=w;if(je-2-d<=32?c(d,je-2,g,x,v,_,f,C,w,E,P):y(d,je-2,g,x,v,_,f,C,w,E,P),m-(ve+2)<=32?c(ve+2,m,g,x,v,_,f,C,w,E,P):y(ve+2,m,g,x,v,_,f,C,w,E,P),Me)return u(Ke),void u(it);if(je<De&&ve>be){e:for(;;){for(Z=x+je*v,ye=0,_e=x,W=0;W<C;++W){if(g[Z]!==Ke[ye])break e;++ye,Z+=w}++je}e:for(;;){for(Z=x+ve*v,ye=0,_e=x,W=0;W<C;++W){if(g[Z]!==it[ye])break e;++ye,Z+=w}--ve}for(U=je;U<=ve;++U){for(Z=x+U*v,ye=0,W=0;W<C&&0==(Le=g[Z]-Ke[ye]);++W)ye+=P,Z+=E;if(0===Le){if(U!==je)for(ae=v*U,re=v*je,_e=x,W=0;W<C;++W)L=g[Z=ae+_e],g[Z]=g[N=re+_e],g[N]=L,_e+=w;++je}else{for(Z=x+U*v,ye=0,W=0;W<C&&0==(Ue=g[Z]-it[ye]);++W)ye+=P,Z+=E;if(0===Ue)for(;;){for(Z=x+ve*v,ye=0,W=0;W<C&&0==(ze=g[Z]-it[ye]);++W)ye+=P,Z+=E;if(0!==ze){for(Z=x+ve*v,ye=0,W=0;W<C&&0==(ze=g[Z]-Ke[ye]);++W)ye+=P,Z+=E;if(ze<0){for(ae=v*U,re=v*je,ne=v*ve,_e=x,W=0;W<C;++W)G=ne+_e,L=g[Z=ae+_e],g[Z]=g[N=re+_e],g[N]=g[G],g[G]=L,_e+=w;++je,--ve}else{for(ae=v*U,re=v*ve,_e=x,W=0;W<C;++W)L=g[Z=ae+_e],g[Z]=g[N=re+_e],g[N]=L,_e+=w;--ve}break}if(--ve<U)break}}}}u(Ke),u(it),ve-je<=32?c(je,ve,g,x,v,_,f,C,w,E,P):y(je,ve,g,x,v,_,f,C,w,E,P)}}},s={"uint32,1,0":function(c,h){return function(u){var y=u.data,d=0|u.offset,m=u.shape,g=u.stride,x=0|g[0],v=0|m[0],_=0|g[1],f=0|m[1],C=_,w=_;v<=32?c(0,v-1,y,d,x,_,v,f,C,w,1):h(0,v-1,y,d,x,_,v,f,C,w,1)}}};p.exports=function(c,h){var g,x,v,_,f,u=[h,c].join(","),y=s[u],d=(g=c,v=r(x=h),_=[x,g].join(","),f=n[_],v?f(v[0],v[1]):f()),m=function(g,x,v){var _=r(x),f=[x,g].join(","),C=a[f];return g.length>1&&_?C(v,_[0],_[1]):C(v)}(c,h,d);return y(d,m)}},446:function(p,l,t){"use strict";var i=t(7640),r={};p.exports=function(n){var a=n.order,s=n.dtype,c=[a,s].join(":"),h=r[c];return h||(r[c]=h=i(a,s)),h(n),n}},9618:function(p,l,t){var i=t(7163),r=typeof Float64Array<"u";function n(u,y){return u[0]-y[0]}function a(){var u,y=this.stride,d=new Array(y.length);for(u=0;u<d.length;++u)d[u]=[Math.abs(y[u]),u];d.sort(n);var m=new Array(d.length);for(u=0;u<m.length;++u)m[u]=d[u][1];return m}var s={T:function(u){function y(m){this.data=m}var d=y.prototype;return d.dtype=u,d.index=function(){return-1},d.size=0,d.dimension=-1,d.shape=d.stride=d.order=[],d.lo=d.hi=d.transpose=d.step=function(){return new y(this.data)},d.get=d.set=function(){},d.pick=function(){return null},function(m){return new y(m)}},0:function(u,y){function d(g,x){this.data=g,this.offset=x}var m=d.prototype;return m.dtype=u,m.index=function(){return this.offset},m.dimension=0,m.size=1,m.shape=m.stride=m.order=[],m.lo=m.hi=m.transpose=m.step=function(){return new d(this.data,this.offset)},m.pick=function(){return y(this.data)},m.valueOf=m.get=function(){return"generic"===u?this.data.get(this.offset):this.data[this.offset]},m.set=function(g){return"generic"===u?this.data.set(this.offset,g):this.data[this.offset]=g},function(g,x,v,_){return new d(g,_)}},1:function(u,y,d){function m(x,v,_,f){this.data=x,this.shape=[v],this.stride=[_],this.offset=0|f}var g=m.prototype;return g.dtype=u,g.dimension=1,Object.defineProperty(g,"size",{get:function(){return this.shape[0]}}),g.order=[0],g.set=function(x,v){return"generic"===u?this.data.set(this.offset+this.stride[0]*x,v):this.data[this.offset+this.stride[0]*x]=v},g.get=function(x){return"generic"===u?this.data.get(this.offset+this.stride[0]*x):this.data[this.offset+this.stride[0]*x]},g.index=function(x){return this.offset+this.stride[0]*x},g.hi=function(x){return new m(this.data,"number"!=typeof x||x<0?this.shape[0]:0|x,this.stride[0],this.offset)},g.lo=function(x){var v=this.offset,_=0,f=this.shape[0],C=this.stride[0];return"number"==typeof x&&x>=0&&(v+=C*(_=0|x),f-=_),new m(this.data,f,C,v)},g.step=function(x){var v=this.shape[0],_=this.stride[0],f=this.offset,C=0,w=Math.ceil;return"number"==typeof x&&((C=0|x)<0?(f+=_*(v-1),v=w(-v/C)):v=w(v/C),_*=C),new m(this.data,v,_,f)},g.transpose=function(x){return new m(this.data,this.shape[x=void 0===x?0:0|x],this.stride[x],this.offset)},g.pick=function(x){var v=[],_=[],f=this.offset;return"number"==typeof x&&x>=0?f=f+this.stride[0]*x|0:(v.push(this.shape[0]),_.push(this.stride[0])),(0,y[v.length+1])(this.data,v,_,f)},function(x,v,_,f){return new m(x,v[0],_[0],f)}},2:function(u,y,d){function m(x,v,_,f,C,w){this.data=x,this.shape=[v,_],this.stride=[f,C],this.offset=0|w}var g=m.prototype;return g.dtype=u,g.dimension=2,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(g,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),g.set=function(x,v,_){return"generic"===u?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*v,_):this.data[this.offset+this.stride[0]*x+this.stride[1]*v]=_},g.get=function(x,v){return"generic"===u?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*v):this.data[this.offset+this.stride[0]*x+this.stride[1]*v]},g.index=function(x,v){return this.offset+this.stride[0]*x+this.stride[1]*v},g.hi=function(x,v){return new m(this.data,"number"!=typeof x||x<0?this.shape[0]:0|x,"number"!=typeof v||v<0?this.shape[1]:0|v,this.stride[0],this.stride[1],this.offset)},g.lo=function(x,v){var _=this.offset,f=0,C=this.shape[0],w=this.shape[1],E=this.stride[0],P=this.stride[1];return"number"==typeof x&&x>=0&&(_+=E*(f=0|x),C-=f),"number"==typeof v&&v>=0&&(_+=P*(f=0|v),w-=f),new m(this.data,C,w,E,P,_)},g.step=function(x,v){var _=this.shape[0],f=this.shape[1],C=this.stride[0],w=this.stride[1],E=this.offset,P=0,L=Math.ceil;return"number"==typeof x&&((P=0|x)<0?(E+=C*(_-1),_=L(-_/P)):_=L(_/P),C*=P),"number"==typeof v&&((P=0|v)<0?(E+=w*(f-1),f=L(-f/P)):f=L(f/P),w*=P),new m(this.data,_,f,C,w,E)},g.transpose=function(x,v){var _=this.shape,f=this.stride;return new m(this.data,_[x=void 0===x?0:0|x],_[v=void 0===v?1:0|v],f[x],f[v],this.offset)},g.pick=function(x,v){var _=[],f=[],C=this.offset;return"number"==typeof x&&x>=0?C=C+this.stride[0]*x|0:(_.push(this.shape[0]),f.push(this.stride[0])),"number"==typeof v&&v>=0?C=C+this.stride[1]*v|0:(_.push(this.shape[1]),f.push(this.stride[1])),(0,y[_.length+1])(this.data,_,f,C)},function(x,v,_,f){return new m(x,v[0],v[1],_[0],_[1],f)}},3:function(u,y,d){function m(x,v,_,f,C,w,E,P){this.data=x,this.shape=[v,_,f],this.stride=[C,w,E],this.offset=0|P}var g=m.prototype;return g.dtype=u,g.dimension=3,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(g,"order",{get:function(){var x=Math.abs(this.stride[0]),v=Math.abs(this.stride[1]),_=Math.abs(this.stride[2]);return x>v?v>_?[2,1,0]:x>_?[1,2,0]:[1,0,2]:x>_?[2,0,1]:_>v?[0,1,2]:[0,2,1]}}),g.set=function(x,v,_,f){return"generic"===u?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*v+this.stride[2]*_,f):this.data[this.offset+this.stride[0]*x+this.stride[1]*v+this.stride[2]*_]=f},g.get=function(x,v,_){return"generic"===u?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*v+this.stride[2]*_):this.data[this.offset+this.stride[0]*x+this.stride[1]*v+this.stride[2]*_]},g.index=function(x,v,_){return this.offset+this.stride[0]*x+this.stride[1]*v+this.stride[2]*_},g.hi=function(x,v,_){return new m(this.data,"number"!=typeof x||x<0?this.shape[0]:0|x,"number"!=typeof v||v<0?this.shape[1]:0|v,"number"!=typeof _||_<0?this.shape[2]:0|_,this.stride[0],this.stride[1],this.stride[2],this.offset)},g.lo=function(x,v,_){var f=this.offset,C=0,w=this.shape[0],E=this.shape[1],P=this.shape[2],L=this.stride[0],O=this.stride[1],z=this.stride[2];return"number"==typeof x&&x>=0&&(f+=L*(C=0|x),w-=C),"number"==typeof v&&v>=0&&(f+=O*(C=0|v),E-=C),"number"==typeof _&&_>=0&&(f+=z*(C=0|_),P-=C),new m(this.data,w,E,P,L,O,z,f)},g.step=function(x,v,_){var f=this.shape[0],C=this.shape[1],w=this.shape[2],E=this.stride[0],P=this.stride[1],L=this.stride[2],O=this.offset,z=0,V=Math.ceil;return"number"==typeof x&&((z=0|x)<0?(O+=E*(f-1),f=V(-f/z)):f=V(f/z),E*=z),"number"==typeof v&&((z=0|v)<0?(O+=P*(C-1),C=V(-C/z)):C=V(C/z),P*=z),"number"==typeof _&&((z=0|_)<0?(O+=L*(w-1),w=V(-w/z)):w=V(w/z),L*=z),new m(this.data,f,C,w,E,P,L,O)},g.transpose=function(x,v,_){var f=this.shape,C=this.stride;return new m(this.data,f[x=void 0===x?0:0|x],f[v=void 0===v?1:0|v],f[_=void 0===_?2:0|_],C[x],C[v],C[_],this.offset)},g.pick=function(x,v,_){var f=[],C=[],w=this.offset;return"number"==typeof x&&x>=0?w=w+this.stride[0]*x|0:(f.push(this.shape[0]),C.push(this.stride[0])),"number"==typeof v&&v>=0?w=w+this.stride[1]*v|0:(f.push(this.shape[1]),C.push(this.stride[1])),"number"==typeof _&&_>=0?w=w+this.stride[2]*_|0:(f.push(this.shape[2]),C.push(this.stride[2])),(0,y[f.length+1])(this.data,f,C,w)},function(x,v,_,f){return new m(x,v[0],v[1],v[2],_[0],_[1],_[2],f)}},4:function(u,y,d){function m(x,v,_,f,C,w,E,P,L,O){this.data=x,this.shape=[v,_,f,C],this.stride=[w,E,P,L],this.offset=0|O}var g=m.prototype;return g.dtype=u,g.dimension=4,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(g,"order",{get:d}),g.set=function(x,v,_,f,C){return"generic"===u?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*v+this.stride[2]*_+this.stride[3]*f,C):this.data[this.offset+this.stride[0]*x+this.stride[1]*v+this.stride[2]*_+this.stride[3]*f]=C},g.get=function(x,v,_,f){return"generic"===u?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*v+this.stride[2]*_+this.stride[3]*f):this.data[this.offset+this.stride[0]*x+this.stride[1]*v+this.stride[2]*_+this.stride[3]*f]},g.index=function(x,v,_,f){return this.offset+this.stride[0]*x+this.stride[1]*v+this.stride[2]*_+this.stride[3]*f},g.hi=function(x,v,_,f){return new m(this.data,"number"!=typeof x||x<0?this.shape[0]:0|x,"number"!=typeof v||v<0?this.shape[1]:0|v,"number"!=typeof _||_<0?this.shape[2]:0|_,"number"!=typeof f||f<0?this.shape[3]:0|f,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},g.lo=function(x,v,_,f){var C=this.offset,w=0,E=this.shape[0],P=this.shape[1],L=this.shape[2],O=this.shape[3],z=this.stride[0],V=this.stride[1],R=this.stride[2],U=this.stride[3];return"number"==typeof x&&x>=0&&(C+=z*(w=0|x),E-=w),"number"==typeof v&&v>=0&&(C+=V*(w=0|v),P-=w),"number"==typeof _&&_>=0&&(C+=R*(w=0|_),L-=w),"number"==typeof f&&f>=0&&(C+=U*(w=0|f),O-=w),new m(this.data,E,P,L,O,z,V,R,U,C)},g.step=function(x,v,_,f){var C=this.shape[0],w=this.shape[1],E=this.shape[2],P=this.shape[3],L=this.stride[0],O=this.stride[1],z=this.stride[2],V=this.stride[3],R=this.offset,U=0,Z=Math.ceil;return"number"==typeof x&&((U=0|x)<0?(R+=L*(C-1),C=Z(-C/U)):C=Z(C/U),L*=U),"number"==typeof v&&((U=0|v)<0?(R+=O*(w-1),w=Z(-w/U)):w=Z(w/U),O*=U),"number"==typeof _&&((U=0|_)<0?(R+=z*(E-1),E=Z(-E/U)):E=Z(E/U),z*=U),"number"==typeof f&&((U=0|f)<0?(R+=V*(P-1),P=Z(-P/U)):P=Z(P/U),V*=U),new m(this.data,C,w,E,P,L,O,z,V,R)},g.transpose=function(x,v,_,f){var C=this.shape,w=this.stride;return new m(this.data,C[x=void 0===x?0:0|x],C[v=void 0===v?1:0|v],C[_=void 0===_?2:0|_],C[f=void 0===f?3:0|f],w[x],w[v],w[_],w[f],this.offset)},g.pick=function(x,v,_,f){var C=[],w=[],E=this.offset;return"number"==typeof x&&x>=0?E=E+this.stride[0]*x|0:(C.push(this.shape[0]),w.push(this.stride[0])),"number"==typeof v&&v>=0?E=E+this.stride[1]*v|0:(C.push(this.shape[1]),w.push(this.stride[1])),"number"==typeof _&&_>=0?E=E+this.stride[2]*_|0:(C.push(this.shape[2]),w.push(this.stride[2])),"number"==typeof f&&f>=0?E=E+this.stride[3]*f|0:(C.push(this.shape[3]),w.push(this.stride[3])),(0,y[C.length+1])(this.data,C,w,E)},function(x,v,_,f){return new m(x,v[0],v[1],v[2],v[3],_[0],_[1],_[2],_[3],f)}},5:function(u,y,d){function m(x,v,_,f,C,w,E,P,L,O,z,V){this.data=x,this.shape=[v,_,f,C,w],this.stride=[E,P,L,O,z],this.offset=0|V}var g=m.prototype;return g.dtype=u,g.dimension=5,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(g,"order",{get:d}),g.set=function(x,v,_,f,C,w){return"generic"===u?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*v+this.stride[2]*_+this.stride[3]*f+this.stride[4]*C,w):this.data[this.offset+this.stride[0]*x+this.stride[1]*v+this.stride[2]*_+this.stride[3]*f+this.stride[4]*C]=w},g.get=function(x,v,_,f,C){return"generic"===u?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*v+this.stride[2]*_+this.stride[3]*f+this.stride[4]*C):this.data[this.offset+this.stride[0]*x+this.stride[1]*v+this.stride[2]*_+this.stride[3]*f+this.stride[4]*C]},g.index=function(x,v,_,f,C){return this.offset+this.stride[0]*x+this.stride[1]*v+this.stride[2]*_+this.stride[3]*f+this.stride[4]*C},g.hi=function(x,v,_,f,C){return new m(this.data,"number"!=typeof x||x<0?this.shape[0]:0|x,"number"!=typeof v||v<0?this.shape[1]:0|v,"number"!=typeof _||_<0?this.shape[2]:0|_,"number"!=typeof f||f<0?this.shape[3]:0|f,"number"!=typeof C||C<0?this.shape[4]:0|C,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},g.lo=function(x,v,_,f,C){var w=this.offset,E=0,P=this.shape[0],L=this.shape[1],O=this.shape[2],z=this.shape[3],V=this.shape[4],R=this.stride[0],U=this.stride[1],Z=this.stride[2],N=this.stride[3],G=this.stride[4];return"number"==typeof x&&x>=0&&(w+=R*(E=0|x),P-=E),"number"==typeof v&&v>=0&&(w+=U*(E=0|v),L-=E),"number"==typeof _&&_>=0&&(w+=Z*(E=0|_),O-=E),"number"==typeof f&&f>=0&&(w+=N*(E=0|f),z-=E),"number"==typeof C&&C>=0&&(w+=G*(E=0|C),V-=E),new m(this.data,P,L,O,z,V,R,U,Z,N,G,w)},g.step=function(x,v,_,f,C){var w=this.shape[0],E=this.shape[1],P=this.shape[2],L=this.shape[3],O=this.shape[4],z=this.stride[0],V=this.stride[1],R=this.stride[2],U=this.stride[3],Z=this.stride[4],N=this.offset,G=0,W=Math.ceil;return"number"==typeof x&&((G=0|x)<0?(N+=z*(w-1),w=W(-w/G)):w=W(w/G),z*=G),"number"==typeof v&&((G=0|v)<0?(N+=V*(E-1),E=W(-E/G)):E=W(E/G),V*=G),"number"==typeof _&&((G=0|_)<0?(N+=R*(P-1),P=W(-P/G)):P=W(P/G),R*=G),"number"==typeof f&&((G=0|f)<0?(N+=U*(L-1),L=W(-L/G)):L=W(L/G),U*=G),"number"==typeof C&&((G=0|C)<0?(N+=Z*(O-1),O=W(-O/G)):O=W(O/G),Z*=G),new m(this.data,w,E,P,L,O,z,V,R,U,Z,N)},g.transpose=function(x,v,_,f,C){var w=this.shape,E=this.stride;return new m(this.data,w[x=void 0===x?0:0|x],w[v=void 0===v?1:0|v],w[_=void 0===_?2:0|_],w[f=void 0===f?3:0|f],w[C=void 0===C?4:0|C],E[x],E[v],E[_],E[f],E[C],this.offset)},g.pick=function(x,v,_,f,C){var w=[],E=[],P=this.offset;return"number"==typeof x&&x>=0?P=P+this.stride[0]*x|0:(w.push(this.shape[0]),E.push(this.stride[0])),"number"==typeof v&&v>=0?P=P+this.stride[1]*v|0:(w.push(this.shape[1]),E.push(this.stride[1])),"number"==typeof _&&_>=0?P=P+this.stride[2]*_|0:(w.push(this.shape[2]),E.push(this.stride[2])),"number"==typeof f&&f>=0?P=P+this.stride[3]*f|0:(w.push(this.shape[3]),E.push(this.stride[3])),"number"==typeof C&&C>=0?P=P+this.stride[4]*C|0:(w.push(this.shape[4]),E.push(this.stride[4])),(0,y[w.length+1])(this.data,w,E,P)},function(x,v,_,f){return new m(x,v[0],v[1],v[2],v[3],v[4],_[0],_[1],_[2],_[3],_[4],f)}}};function c(u,y){var d=-1===y?"T":String(y),m=s[d];return-1===y?m(u):0===y?m(u,h[u][0]):m(u,h[u],a)}var h={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};p.exports=function(u,y,d,m){if(void 0===u)return(0,h.array[0])([]);"number"==typeof u&&(u=[u]),void 0===y&&(y=[u.length]);var g=y.length;if(void 0===d){d=new Array(g);for(var x=g-1,v=1;x>=0;--x)d[x]=v,v*=y[x]}if(void 0===m)for(m=0,x=0;x<g;++x)d[x]<0&&(m-=(y[x]-1)*d[x]);for(var _=function(C){if(i(C))return"buffer";if(r)switch(Object.prototype.toString.call(C)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(C)?"array":"generic"}(u),f=h[_];f.length<=g+1;)f.push(c(_,f.length-1));return(0,f[g+1])(u,y,d,m)}},1278:function(p,l,t){"use strict";var i=t(2361),r=Math.pow(2,-1074),n=-1>>>0;p.exports=function(a,s){if(isNaN(a)||isNaN(s))return NaN;if(a===s)return a;if(0===a)return s<0?-r:r;var c=i.hi(a),h=i.lo(a);return s>a==a>0?h===n?(c+=1,h=0):h+=1:0===h?(h=n,c-=1):h-=1,i.pack(h,c)}},8406:function(p,l){l.vertexNormals=function(t,i,r){for(var n=i.length,a=new Array(n),s=void 0===r?1e-6:r,c=0;c<n;++c)a[c]=[0,0,0];for(c=0;c<t.length;++c)for(var h=t[c],y=h[h.length-1],d=h[0],m=0;m<h.length;++m){for(var g=i[y],x=i[y=d],v=i[d=h[(m+1)%h.length]],_=new Array(3),f=0,C=new Array(3),w=0,E=0;E<3;++E)_[E]=g[E]-x[E],f+=_[E]*_[E],C[E]=v[E]-x[E],w+=C[E]*C[E];if(f*w>s){var P=a[y],L=1/Math.sqrt(f*w);for(E=0;E<3;++E){var O=(E+1)%3,z=(E+2)%3;P[E]+=L*(C[O]*_[z]-C[z]*_[O])}}}for(c=0;c<n;++c){P=a[c];var V=0;for(E=0;E<3;++E)V+=P[E]*P[E];if(V>s)for(L=1/Math.sqrt(V),E=0;E<3;++E)P[E]*=L;else for(E=0;E<3;++E)P[E]=0}return a},l.faceNormals=function(t,i,r){for(var n=t.length,a=new Array(n),s=void 0===r?1e-6:r,c=0;c<n;++c){for(var h=t[c],u=new Array(3),y=0;y<3;++y)u[y]=i[h[y]];var d=new Array(3),m=new Array(3);for(y=0;y<3;++y)d[y]=u[1][y]-u[0][y],m[y]=u[2][y]-u[0][y];var g=new Array(3),x=0;for(y=0;y<3;++y){var v=(y+1)%3,_=(y+2)%3;g[y]=d[v]*m[_]-d[_]*m[v],x+=g[y]*g[y]}for(x=x>s?1/Math.sqrt(x):0,y=0;y<3;++y)g[y]*=x;a[c]=g}return a}},4081:function(p){"use strict";p.exports=function(l,t,i,r,n,a,s,c,h,u){var y=t+a+u;if(d>0){var d=Math.sqrt(y+1);l[0]=.5*(s-h)/d,l[1]=.5*(c-r)/d,l[2]=.5*(i-a)/d,l[3]=.5*d}else{var m=Math.max(t,a,u);d=Math.sqrt(2*m-y+1),t>=m?(l[0]=.5*d,l[1]=.5*(n+i)/d,l[2]=.5*(c+r)/d,l[3]=.5*(s-h)/d):a>=m?(l[0]=.5*(i+n)/d,l[1]=.5*d,l[2]=.5*(h+s)/d,l[3]=.5*(c-r)/d):(l[0]=.5*(r+c)/d,l[1]=.5*(s+h)/d,l[2]=.5*d,l[3]=.5*(i-n)/d)}return l}},9977:function(p,l,t){"use strict";p.exports=function(m){var g=(m=m||{}).center||[0,0,0],x=m.rotation||[0,0,0,1],v=m.radius||1;g=[].slice.call(g,0,3),u(x=[].slice.call(x,0,4),x);var _=new y(x,g,Math.log(v));return _.setDistanceLimits(m.zoomMin,m.zoomMax),("eye"in m||"up"in m)&&_.lookAt(0,m.eye,m.center,m.up),_};var i=t(9215),r=t(6582),n=t(7399),a=t(7608),s=t(4081);function c(m,g,x){return Math.sqrt(Math.pow(m,2)+Math.pow(g,2)+Math.pow(x,2))}function h(m,g,x,v){return Math.sqrt(Math.pow(m,2)+Math.pow(g,2)+Math.pow(x,2)+Math.pow(v,2))}function u(m,g){var x=g[0],v=g[1],_=g[2],f=g[3],C=h(x,v,_,f);C>1e-6?(m[0]=x/C,m[1]=v/C,m[2]=_/C,m[3]=f/C):(m[0]=m[1]=m[2]=0,m[3]=1)}function y(m,g,x){this.radius=i([x]),this.center=i(g),this.rotation=i(m),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var d=y.prototype;d.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},d.recalcMatrix=function(m){this.radius.curve(m),this.center.curve(m),this.rotation.curve(m);var g=this.computedRotation;u(g,g);var x=this.computedMatrix;n(x,g);var v=this.computedCenter,_=this.computedEye,f=this.computedUp,C=Math.exp(this.computedRadius[0]);_[0]=v[0]+C*x[2],_[1]=v[1]+C*x[6],_[2]=v[2]+C*x[10],f[0]=x[1],f[1]=x[5],f[2]=x[9];for(var w=0;w<3;++w){for(var E=0,P=0;P<3;++P)E+=x[w+4*P]*_[P];x[12+w]=-E}},d.getMatrix=function(m,g){this.recalcMatrix(m);var x=this.computedMatrix;if(g){for(var v=0;v<16;++v)g[v]=x[v];return g}return x},d.idle=function(m){this.center.idle(m),this.radius.idle(m),this.rotation.idle(m)},d.flush=function(m){this.center.flush(m),this.radius.flush(m),this.rotation.flush(m)},d.pan=function(m,g,x,v){g=g||0,x=x||0,v=v||0,this.recalcMatrix(m);var _=this.computedMatrix,f=_[1],C=_[5],w=_[9],E=c(f,C,w),P=_[0],L=_[4],O=_[8],z=P*(f/=E)+L*(C/=E)+O*(w/=E),V=c(P-=f*z,L-=C*z,O-=w*z),R=_[2],U=_[6],Z=_[10],N=R*f+U*C+Z*w,G=R*(P/=V)+U*(L/=V)+Z*(O/=V),W=c(R-=N*f+G*P,U-=N*C+G*L,Z-=N*w+G*O);R/=W,U/=W,Z/=W,this.center.move(m,P*g+f*x,L*g+C*x,O*g+w*x);var Q=Math.exp(this.computedRadius[0]);Q=Math.max(1e-4,Q+v),this.radius.set(m,Math.log(Q))},d.rotate=function(m,g,x,v){this.recalcMatrix(m);var _=this.computedMatrix,O=_[2],z=_[6],V=_[10],R=(g=g||0)*_[0]+(x=x||0)*_[1],U=g*_[4]+x*_[5],Z=g*_[8]+x*_[9],N=-(z*Z-V*U),G=-(V*R-O*Z),W=-(O*U-z*R),ae=Math.sqrt(Math.max(0,1-Math.pow(N,2)-Math.pow(G,2)-Math.pow(W,2))),re=h(N,G,W,ae);re>1e-6?(N/=re,G/=re,W/=re,ae/=re):(N=G=W=0,ae=1);var ne=this.computedRotation,Q=ne[0],$=ne[1],X=ne[2],oe=ne[3],fe=Q*ae+oe*N+$*W-X*G,ue=$*ae+oe*G+X*N-Q*W,ge=X*ae+oe*W+Q*G-$*N,we=oe*ae-Q*N-$*G-X*W;if(v){N=O,G=z,W=V;var Te=Math.sin(v)/c(N,G,W);N*=Te,G*=Te,W*=Te,we=we*(ae=Math.cos(g))-(fe=fe*ae+we*N+ue*W-ge*G)*N-(ue=ue*ae+we*G+ge*N-fe*W)*G-(ge=ge*ae+we*W+fe*G-ue*N)*W}var xe=h(fe,ue,ge,we);xe>1e-6?(fe/=xe,ue/=xe,ge/=xe,we/=xe):(fe=ue=ge=0,we=1),this.rotation.set(m,fe,ue,ge,we)},d.lookAt=function(m,g,x,v){this.recalcMatrix(m);var _=this.computedMatrix;r(_,g=g||this.computedEye,x=x||this.computedCenter,v=v||this.computedUp);var f=this.computedRotation;s(f,_[0],_[1],_[2],_[4],_[5],_[6],_[8],_[9],_[10]),u(f,f),this.rotation.set(m,f[0],f[1],f[2],f[3]);for(var C=0,w=0;w<3;++w)C+=Math.pow(x[w]-g[w],2);this.radius.set(m,.5*Math.log(Math.max(C,1e-6))),this.center.set(m,x[0],x[1],x[2])},d.translate=function(m,g,x,v){this.center.move(m,g||0,x||0,v||0)},d.setMatrix=function(m,g){var x=this.computedRotation;s(x,g[0],g[1],g[2],g[4],g[5],g[6],g[8],g[9],g[10]),u(x,x),this.rotation.set(m,x[0],x[1],x[2],x[3]);var v=this.computedMatrix;a(v,g);var _=v[15];if(Math.abs(_)>1e-6){var f=v[12]/_,C=v[13]/_,w=v[14]/_;this.recalcMatrix(m);var E=Math.exp(this.computedRadius[0]);this.center.set(m,f-v[2]*E,C-v[6]*E,w-v[10]*E),this.radius.idle(m)}else this.center.idle(m),this.radius.idle(m)},d.setDistance=function(m,g){g>0&&this.radius.set(m,Math.log(g))},d.setDistanceLimits=function(m,g){m=m>0?Math.log(m):-1/0,g=g>0?Math.log(g):1/0,g=Math.max(g,m),this.radius.bounds[0][0]=m,this.radius.bounds[1][0]=g},d.getDistanceLimits=function(m){var g=this.radius.bounds;return m?(m[0]=Math.exp(g[0][0]),m[1]=Math.exp(g[1][0]),m):[Math.exp(g[0][0]),Math.exp(g[1][0])]},d.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},d.fromJSON=function(m){var g=this.lastT(),x=m.center;x&&this.center.set(g,x[0],x[1],x[2]);var v=m.rotation;v&&this.rotation.set(g,v[0],v[1],v[2],v[3]);var _=m.distance;_&&_>0&&this.radius.set(g,Math.log(_)),this.setDistanceLimits(m.zoomMin,m.zoomMax)}},1371:function(p,l,t){"use strict";var i=t(3233);p.exports=function(r,n,a){return i(a=void 0!==a?a+"":" ",n)+r}},3202:function(p){p.exports=function(l,t){t||(t=[0,""]),l=String(l);var i=parseFloat(l,10);return t[0]=i,t[1]=l.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},3088:function(p,l,t){"use strict";p.exports=function(r,n){for(var a=0|n.length,s=r.length,c=[new Array(a),new Array(a)],h=0;h<a;++h)c[0][h]=[],c[1][h]=[];for(h=0;h<s;++h){var u=r[h];c[0][u[0]].push(u),c[1][u[1]].push(u)}var w,y=[];for(h=0;h<a;++h)c[0][h].length+c[1][h].length===0&&y.push([h]);function d(C,w){var E=c[w][C[w]];E.splice(E.indexOf(C),1)}function m(C,w,E){for(var P,L,O,z=0;z<2;++z)if(c[z][w].length>0){P=c[z][w][0],O=z;break}L=P[1^O];for(var V=0;V<2;++V)for(var R=c[V][w],U=0;U<R.length;++U){var Z=R[U],N=Z[1^V];i(n[C],n[w],n[L],n[N])>0&&(P=Z,L=N,O=V)}return E||P&&d(P,O),L}function g(C,w){var E=c[w][C][0],P=[C];d(E,w);for(var L=E[1^w];;){for(;L!==C;)P.push(L),L=m(P[P.length-2],L,!1);if(c[0][C].length+c[1][C].length===0)break;var O=P[P.length-1],z=C,V=P[1],R=m(O,z,!0);if(i(n[O],n[z],n[V],n[R])<0)break;P.push(C),L=m(O,z)}return P}for(h=0;h<a;++h)for(var v=0;v<2;++v){for(var _=[];c[v][h].length>0;){var f=g(h,v);(w=f)[1]===w[w.length-1]?_.push.apply(_,f):(_.length>0&&y.push(_),_=f)}_.length>0&&y.push(_)}return y};var i=t(3140)},5609:function(p,l,t){"use strict";p.exports=function(r,n){for(var a=i(r,n.length),s=new Array(n.length),c=new Array(n.length),h=[],u=0;u<n.length;++u){var y=a[u].length;c[u]=y,s[u]=!0,y<=1&&h.push(u)}for(;h.length>0;){s[v=h.pop()]=!1;var d=a[v];for(u=0;u<d.length;++u){var m=d[u];0==--c[m]&&h.push(m)}}var g=new Array(n.length),x=[];for(u=0;u<n.length;++u)if(s[u]){var v=x.length;g[u]=v,x.push(n[u])}else g[u]=-1;var _=[];for(u=0;u<r.length;++u){var f=r[u];s[f[0]]&&s[f[1]]&&_.push([g[f[0]],g[f[1]]])}return[_,x]};var i=t(3134)},2095:function(p,l,t){"use strict";p.exports=function(y,d){for(var m=h(y,d),g=(d=m[1]).length,x=i(y=m[0],d.length),v=0;v<g;++v)if(x[v].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var _=r(y,d),f=(_=_.filter(function(Ie){for(var De=Ie.length,be=[0],he=0;he<De;++he){var ce=d[Ie[he]],me=d[Ie[(he+1)%De]],Pe=a(-ce[0],ce[1]),Ae=a(-ce[0],me[1]),Ce=a(me[0],ce[1]),Oe=a(me[0],me[1]);be=s(be,s(s(Pe,Ae),s(Ce,Oe)))}return be[be.length-1]>0})).length,C=new Array(f),w=new Array(f);for(v=0;v<f;++v){C[v]=v;var E=new Array(f),P=_[v].map(function(Ie){return d[Ie]}),L=n([P]),O=0;e:for(var z=0;z<f;++z)if(E[z]=0,v!==z){for(var V=(ye=_[z]).length,R=0;R<V;++R){var U=L(d[ye[R]]);if(0!==U){U<0&&(E[z]=1,O+=1);continue e}}E[z]=1,O+=1}w[v]=[O,v,E]}for(w.sort(function(Ie,De){return De[0]-Ie[0]}),v=0;v<f;++v){var Z=(E=w[v])[1],N=E[2];for(z=0;z<f;++z)N[z]&&(C[z]=Z)}var G=function(Ie){for(var De=new Array(Ie),be=0;be<Ie;++be)De[be]=[];return De}(f);for(v=0;v<f;++v)G[v].push(C[v]),G[C[v]].push(v);var W={},ae=u(g,!1);for(v=0;v<f;++v)for(V=(ye=_[v]).length,z=0;z<V;++z){var re=ye[z],ne=ye[(z+1)%V],Q=Math.min(re,ne)+":"+Math.max(re,ne);if(Q in W){var $=W[Q];G[$].push(v),G[v].push($),ae[re]=ae[ne]=!0}else W[Q]=v}function X(Ie){for(var De=Ie.length,be=0;be<De;++be)if(!ae[Ie[be]])return!1;return!0}var oe=[],fe=u(f,-1);for(v=0;v<f;++v)C[v]!==v||X(_[v])?fe[v]=-1:(oe.push(v),fe[v]=0);for(m=[];oe.length>0;){var ue=oe.pop(),ge=G[ue];c(ge,function(Ie,De){return Ie-De});var we,Te=ge.length,xe=fe[ue];for(0===xe&&(we=[ye=_[ue]]),v=0;v<Te;++v){var ye,_e=ge[v];fe[_e]>=0||(fe[_e]=1^xe,oe.push(_e),0===xe&&(X(ye=_[_e])||(ye.reverse(),we.push(ye))))}0===xe&&m.push(we)}return m};var i=t(3134),r=t(3088),n=t(5085),a=t(5250),s=t(8210),c=t(1682),h=t(5609);function u(y,d){for(var m=new Array(y),g=0;g<y;++g)m[g]=d;return m}},5085:function(p,l,t){p.exports=function(u){for(var y=u.length,d=[],m=[],g=0;g<y;++g)for(var x=u[g],v=x.length,_=v-1,f=0;f<v;_=f++){var C=x[_],w=x[f];C[0]===w[0]?m.push([C,w]):d.push([C,w])}if(0===d.length)return 0===m.length?h:(E=c(m),function(O){return E(O[0],O[1])?0:1});var E,O,z,P=r(d),L=(O=P.slabs,z=P.coordinates,function(V){var R=a.le(z,V[0]);if(R<0)return 1;var U=O[R];if(!U){if(!(R>0&&z[R]===V[0]))return 1;U=O[R-1]}for(var Z=1;U;){var N=U.key,G=i(V,N[0],N[1]);if(N[0][0]<N[1][0])if(G<0)U=U.left;else{if(!(G>0))return 0;Z=-1,U=U.right}else if(G>0)U=U.left;else{if(!(G<0))return 0;Z=1,U=U.right}}return Z});return 0===m.length?L:function(O,z){return function(V){return O(V[0],V[1])?0:z(V)}}(c(m),L)};var i=t(3250)[3],r=t(4209),n=t(3352),a=t(2478);function s(){return!0}function c(u){for(var y={},d=0;d<u.length;++d){var m=u[d],g=m[0][0],x=m[0][1],v=m[1][1],_=[Math.min(x,v),Math.max(x,v)];g in y?y[g].push(_):y[g]=[_]}var E,f={},C=Object.keys(y);for(d=0;d<C.length;++d)f[C[d]]=n(y[C[d]]);return E=f,function(P,L){var O=E[P];return!!O&&!!O.queryPoint(L,s)}}function h(u){return 1}},9346:function(p){"use strict";var l=new Float64Array(4),t=new Float64Array(4),i=new Float64Array(4);p.exports=function(r,n,a,s,c){l.length<s.length&&(l=new Float64Array(s.length),t=new Float64Array(s.length),i=new Float64Array(s.length));for(var h=0;h<s.length;++h)l[h]=r[h]-s[h],t[h]=n[h]-r[h],i[h]=a[h]-r[h];var u=0,y=0,d=0,m=0,g=0,x=0;for(h=0;h<s.length;++h){var v=t[h],_=i[h],f=l[h];u+=v*v,y+=v*_,d+=_*_,m+=f*v,g+=f*_,x+=f*f}var C,w,E,P,L,O=Math.abs(u*d-y*y),z=y*g-d*m,V=y*m-u*g;if(z+V<=O)if(z<0)V<0&&m<0?(V=0,-m>=u?(z=1,C=u+2*m+x):C=m*(z=-m/u)+x):(z=0,g>=0?(V=0,C=x):-g>=d?(V=1,C=d+2*g+x):C=g*(V=-g/d)+x);else if(V<0)V=0,m>=0?(z=0,C=x):-m>=u?(z=1,C=u+2*m+x):C=m*(z=-m/u)+x;else{var R=1/O;C=(z*=R)*(u*z+y*(V*=R)+2*m)+V*(y*z+d*V+2*g)+x}else z<0?(E=d+g)>(w=y+m)?(P=E-w)>=(L=u-2*y+d)?(z=1,V=0,C=u+2*m+x):C=(z=P/L)*(u*z+y*(V=1-z)+2*m)+V*(y*z+d*V+2*g)+x:(z=0,E<=0?(V=1,C=d+2*g+x):g>=0?(V=0,C=x):C=g*(V=-g/d)+x):V<0?(E=u+m)>(w=y+g)?(P=E-w)>=(L=u-2*y+d)?(V=1,z=0,C=d+2*g+x):C=(z=1-(V=P/L))*(u*z+y*V+2*m)+V*(y*z+d*V+2*g)+x:(V=0,E<=0?(z=1,C=u+2*m+x):m>=0?(z=0,C=x):C=m*(z=-m/u)+x):(P=d+g-y-m)<=0?(z=0,V=1,C=d+2*g+x):P>=(L=u-2*y+d)?(z=1,V=0,C=u+2*m+x):C=(z=P/L)*(u*z+y*(V=1-z)+2*m)+V*(y*z+d*V+2*g)+x;var U=1-z-V;for(h=0;h<s.length;++h)c[h]=U*r[h]+z*n[h]+V*a[h];return C<0?0:C}},8648:function(p,l,t){p.exports=t(783)},2653:function(p,l,t){"use strict";var i=t(3865);p.exports=function(r,n){for(var a=r.length,s=new Array(a),c=0;c<a;++c)s[c]=i(r[c],n[c]);return s}},5838:function(p,l,t){"use strict";p.exports=function(r){for(var n=new Array(r.length),a=0;a<r.length;++a)n[a]=i(r[a]);return n};var i=t(7842)},8987:function(p,l,t){"use strict";var i=t(7842),r=t(6504);p.exports=function(n,a){for(var s=i(a),c=n.length,h=new Array(c),u=0;u<c;++u)h[u]=r(n[u],s);return h}},544:function(p,l,t){"use strict";var i=t(5572);p.exports=function(r,n){for(var a=r.length,s=new Array(a),c=0;c<a;++c)s[c]=i(r[c],n[c]);return s}},5771:function(p,l,t){"use strict";var i=t(8507),r=t(3788),n=t(2419);p.exports=function(a){a.sort(r);for(var s=a.length,c=0,h=0;h<s;++h){var u=a[h],y=n(u);if(0!==y){if(c>0){var d=a[c-1];if(0===i(u,d)&&n(d)!==y){c-=1;continue}}a[c++]=u}}return a.length=c,a}},3233:function(p){"use strict";var l,t="";p.exports=function(i,r){if("string"!=typeof i)throw new TypeError("expected a string");if(1===r)return i;if(2===r)return i+i;var n=i.length*r;if(l!==i||void 0===l)l=i,t="";else if(t.length>=n)return t.substr(0,n);for(;n>t.length&&r>1;)1&r&&(t+=i),r>>=1,i+=i;return t=(t+=i).substr(0,n)}},3025:function(p,l,t){p.exports=t.g.performance&&t.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},7004:function(p){"use strict";p.exports=function(l){for(var t=l.length,i=l[l.length-1],r=t,n=t-2;n>=0;--n){var a=i;(h=(c=l[n])-((i=a+c)-a))&&(l[--r]=i,i=h)}var s=0;for(n=r;n<t;++n){var c,h;(h=(c=i)-((i=(a=l[n])+c)-a))&&(l[s++]=h)}return l[s++]=i,l.length=s,l}},2962:function(p,l,t){"use strict";var i=t(5250),r=t(8210),n=t(3012),a=t(7004);function s(g,x,v,_){return function(f){return _(g(v(f[0][0],f[1][1]),v(-f[0][1],f[1][0])))}}function c(g,x,v,_){return function(f){return _(g(x(g(v(f[1][1],f[2][2]),v(-f[1][2],f[2][1])),f[0][0]),g(x(g(v(f[1][0],f[2][2]),v(-f[1][2],f[2][0])),-f[0][1]),x(g(v(f[1][0],f[2][1]),v(-f[1][1],f[2][0])),f[0][2]))))}}function h(g,x,v,_){return function(f){return _(g(g(x(g(x(g(v(f[2][2],f[3][3]),v(-f[2][3],f[3][2])),f[1][1]),g(x(g(v(f[2][1],f[3][3]),v(-f[2][3],f[3][1])),-f[1][2]),x(g(v(f[2][1],f[3][2]),v(-f[2][2],f[3][1])),f[1][3]))),f[0][0]),x(g(x(g(v(f[2][2],f[3][3]),v(-f[2][3],f[3][2])),f[1][0]),g(x(g(v(f[2][0],f[3][3]),v(-f[2][3],f[3][0])),-f[1][2]),x(g(v(f[2][0],f[3][2]),v(-f[2][2],f[3][0])),f[1][3]))),-f[0][1])),g(x(g(x(g(v(f[2][1],f[3][3]),v(-f[2][3],f[3][1])),f[1][0]),g(x(g(v(f[2][0],f[3][3]),v(-f[2][3],f[3][0])),-f[1][1]),x(g(v(f[2][0],f[3][1]),v(-f[2][1],f[3][0])),f[1][3]))),f[0][2]),x(g(x(g(v(f[2][1],f[3][2]),v(-f[2][2],f[3][1])),f[1][0]),g(x(g(v(f[2][0],f[3][2]),v(-f[2][2],f[3][0])),-f[1][1]),x(g(v(f[2][0],f[3][1]),v(-f[2][1],f[3][0])),f[1][2]))),-f[0][3]))))}}function u(g,x,v,_){return function(f){return _(g(g(x(g(g(x(g(x(g(v(f[3][3],f[4][4]),v(-f[3][4],f[4][3])),f[2][2]),g(x(g(v(f[3][2],f[4][4]),v(-f[3][4],f[4][2])),-f[2][3]),x(g(v(f[3][2],f[4][3]),v(-f[3][3],f[4][2])),f[2][4]))),f[1][1]),x(g(x(g(v(f[3][3],f[4][4]),v(-f[3][4],f[4][3])),f[2][1]),g(x(g(v(f[3][1],f[4][4]),v(-f[3][4],f[4][1])),-f[2][3]),x(g(v(f[3][1],f[4][3]),v(-f[3][3],f[4][1])),f[2][4]))),-f[1][2])),g(x(g(x(g(v(f[3][2],f[4][4]),v(-f[3][4],f[4][2])),f[2][1]),g(x(g(v(f[3][1],f[4][4]),v(-f[3][4],f[4][1])),-f[2][2]),x(g(v(f[3][1],f[4][2]),v(-f[3][2],f[4][1])),f[2][4]))),f[1][3]),x(g(x(g(v(f[3][2],f[4][3]),v(-f[3][3],f[4][2])),f[2][1]),g(x(g(v(f[3][1],f[4][3]),v(-f[3][3],f[4][1])),-f[2][2]),x(g(v(f[3][1],f[4][2]),v(-f[3][2],f[4][1])),f[2][3]))),-f[1][4]))),f[0][0]),x(g(g(x(g(x(g(v(f[3][3],f[4][4]),v(-f[3][4],f[4][3])),f[2][2]),g(x(g(v(f[3][2],f[4][4]),v(-f[3][4],f[4][2])),-f[2][3]),x(g(v(f[3][2],f[4][3]),v(-f[3][3],f[4][2])),f[2][4]))),f[1][0]),x(g(x(g(v(f[3][3],f[4][4]),v(-f[3][4],f[4][3])),f[2][0]),g(x(g(v(f[3][0],f[4][4]),v(-f[3][4],f[4][0])),-f[2][3]),x(g(v(f[3][0],f[4][3]),v(-f[3][3],f[4][0])),f[2][4]))),-f[1][2])),g(x(g(x(g(v(f[3][2],f[4][4]),v(-f[3][4],f[4][2])),f[2][0]),g(x(g(v(f[3][0],f[4][4]),v(-f[3][4],f[4][0])),-f[2][2]),x(g(v(f[3][0],f[4][2]),v(-f[3][2],f[4][0])),f[2][4]))),f[1][3]),x(g(x(g(v(f[3][2],f[4][3]),v(-f[3][3],f[4][2])),f[2][0]),g(x(g(v(f[3][0],f[4][3]),v(-f[3][3],f[4][0])),-f[2][2]),x(g(v(f[3][0],f[4][2]),v(-f[3][2],f[4][0])),f[2][3]))),-f[1][4]))),-f[0][1])),g(x(g(g(x(g(x(g(v(f[3][3],f[4][4]),v(-f[3][4],f[4][3])),f[2][1]),g(x(g(v(f[3][1],f[4][4]),v(-f[3][4],f[4][1])),-f[2][3]),x(g(v(f[3][1],f[4][3]),v(-f[3][3],f[4][1])),f[2][4]))),f[1][0]),x(g(x(g(v(f[3][3],f[4][4]),v(-f[3][4],f[4][3])),f[2][0]),g(x(g(v(f[3][0],f[4][4]),v(-f[3][4],f[4][0])),-f[2][3]),x(g(v(f[3][0],f[4][3]),v(-f[3][3],f[4][0])),f[2][4]))),-f[1][1])),g(x(g(x(g(v(f[3][1],f[4][4]),v(-f[3][4],f[4][1])),f[2][0]),g(x(g(v(f[3][0],f[4][4]),v(-f[3][4],f[4][0])),-f[2][1]),x(g(v(f[3][0],f[4][1]),v(-f[3][1],f[4][0])),f[2][4]))),f[1][3]),x(g(x(g(v(f[3][1],f[4][3]),v(-f[3][3],f[4][1])),f[2][0]),g(x(g(v(f[3][0],f[4][3]),v(-f[3][3],f[4][0])),-f[2][1]),x(g(v(f[3][0],f[4][1]),v(-f[3][1],f[4][0])),f[2][3]))),-f[1][4]))),f[0][2]),g(x(g(g(x(g(x(g(v(f[3][2],f[4][4]),v(-f[3][4],f[4][2])),f[2][1]),g(x(g(v(f[3][1],f[4][4]),v(-f[3][4],f[4][1])),-f[2][2]),x(g(v(f[3][1],f[4][2]),v(-f[3][2],f[4][1])),f[2][4]))),f[1][0]),x(g(x(g(v(f[3][2],f[4][4]),v(-f[3][4],f[4][2])),f[2][0]),g(x(g(v(f[3][0],f[4][4]),v(-f[3][4],f[4][0])),-f[2][2]),x(g(v(f[3][0],f[4][2]),v(-f[3][2],f[4][0])),f[2][4]))),-f[1][1])),g(x(g(x(g(v(f[3][1],f[4][4]),v(-f[3][4],f[4][1])),f[2][0]),g(x(g(v(f[3][0],f[4][4]),v(-f[3][4],f[4][0])),-f[2][1]),x(g(v(f[3][0],f[4][1]),v(-f[3][1],f[4][0])),f[2][4]))),f[1][2]),x(g(x(g(v(f[3][1],f[4][2]),v(-f[3][2],f[4][1])),f[2][0]),g(x(g(v(f[3][0],f[4][2]),v(-f[3][2],f[4][0])),-f[2][1]),x(g(v(f[3][0],f[4][1]),v(-f[3][1],f[4][0])),f[2][2]))),-f[1][4]))),-f[0][3]),x(g(g(x(g(x(g(v(f[3][2],f[4][3]),v(-f[3][3],f[4][2])),f[2][1]),g(x(g(v(f[3][1],f[4][3]),v(-f[3][3],f[4][1])),-f[2][2]),x(g(v(f[3][1],f[4][2]),v(-f[3][2],f[4][1])),f[2][3]))),f[1][0]),x(g(x(g(v(f[3][2],f[4][3]),v(-f[3][3],f[4][2])),f[2][0]),g(x(g(v(f[3][0],f[4][3]),v(-f[3][3],f[4][0])),-f[2][2]),x(g(v(f[3][0],f[4][2]),v(-f[3][2],f[4][0])),f[2][3]))),-f[1][1])),g(x(g(x(g(v(f[3][1],f[4][3]),v(-f[3][3],f[4][1])),f[2][0]),g(x(g(v(f[3][0],f[4][3]),v(-f[3][3],f[4][0])),-f[2][1]),x(g(v(f[3][0],f[4][1]),v(-f[3][1],f[4][0])),f[2][3]))),f[1][2]),x(g(x(g(v(f[3][1],f[4][2]),v(-f[3][2],f[4][1])),f[2][0]),g(x(g(v(f[3][0],f[4][2]),v(-f[3][2],f[4][0])),-f[2][1]),x(g(v(f[3][0],f[4][1]),v(-f[3][1],f[4][0])),f[2][2]))),-f[1][3]))),f[0][4])))))}}function y(g){return(2===g?s:3===g?c:4===g?h:5===g?u:void 0)(r,n,i,a)}var d=[function(){return[0]},function(g){return[g[0][0]]}];function m(g,x,v,_,f,C,w,E){return function(P){switch(P.length){case 0:return g(P);case 1:return x(P);case 2:return v(P);case 3:return _(P);case 4:return f(P);case 5:return C(P)}var L=w[P.length];return L||(L=w[P.length]=E(P.length)),L(P)}}!function(){for(;d.length<6;)d.push(y(d.length));p.exports=m.apply(void 0,d.concat([d,y]));for(var g=0;g<d.length;++g)p.exports[g]=d[g]}()},1944:function(p,l,t){"use strict";var i=t(5250),r=t(8210);p.exports=function(n,a){for(var s=i(n[0],a[0]),c=1;c<n.length;++c)s=r(s,i(n[c],a[c]));return s}},2646:function(p,l,t){"use strict";var i=t(5250),r=t(8210),n=t(8545),a=t(3012);function s(x){return(3===x?c:4===x?h:5===x?u:y)(r,n,i,a)}function c(x,v,_,f){return function(C,w,E){var P=_(C[0],C[0]),L=f(P,w[0]),O=f(P,E[0]),z=_(w[0],w[0]),V=f(z,C[0]),R=f(z,E[0]),U=_(E[0],E[0]),Z=f(U,C[0]),N=f(U,w[0]),G=x(v(N,R),v(V,L)),W=v(Z,O),ae=v(G,W);return ae[ae.length-1]}}function h(x,v,_,f){return function(C,w,E,P){var L=x(_(C[0],C[0]),_(C[1],C[1])),O=f(L,w[0]),z=f(L,E[0]),V=f(L,P[0]),R=x(_(w[0],w[0]),_(w[1],w[1])),U=f(R,C[0]),Z=f(R,E[0]),N=f(R,P[0]),G=x(_(E[0],E[0]),_(E[1],E[1])),W=f(G,C[0]),ae=f(G,w[0]),re=f(G,P[0]),ne=x(_(P[0],P[0]),_(P[1],P[1])),Q=f(ne,C[0]),$=f(ne,w[0]),X=f(ne,E[0]),oe=x(x(f(v(X,re),w[1]),x(f(v($,N),-E[1]),f(v(ae,Z),P[1]))),x(f(v($,N),C[1]),x(f(v(Q,V),-w[1]),f(v(U,O),P[1])))),fe=x(x(f(v(X,re),C[1]),x(f(v(Q,V),-E[1]),f(v(W,z),P[1]))),x(f(v(ae,Z),C[1]),x(f(v(W,z),-w[1]),f(v(U,O),E[1])))),ue=v(oe,fe);return ue[ue.length-1]}}function u(x,v,_,f){return function(C,w,E,P,L){var O=x(_(C[0],C[0]),x(_(C[1],C[1]),_(C[2],C[2]))),z=f(O,w[0]),V=f(O,E[0]),R=f(O,P[0]),U=f(O,L[0]),Z=x(_(w[0],w[0]),x(_(w[1],w[1]),_(w[2],w[2]))),N=f(Z,C[0]),G=f(Z,E[0]),W=f(Z,P[0]),ae=f(Z,L[0]),re=x(_(E[0],E[0]),x(_(E[1],E[1]),_(E[2],E[2]))),ne=f(re,C[0]),Q=f(re,w[0]),$=f(re,P[0]),X=f(re,L[0]),oe=x(_(P[0],P[0]),x(_(P[1],P[1]),_(P[2],P[2]))),fe=f(oe,C[0]),ue=f(oe,w[0]),ge=f(oe,E[0]),we=f(oe,L[0]),Te=x(_(L[0],L[0]),x(_(L[1],L[1]),_(L[2],L[2]))),xe=f(Te,C[0]),ye=f(Te,w[0]),_e=f(Te,E[0]),Ie=f(Te,P[0]),De=x(x(x(f(x(f(v(Ie,we),E[1]),x(f(v(_e,X),-P[1]),f(v(ge,$),L[1]))),w[2]),x(f(x(f(v(Ie,we),w[1]),x(f(v(ye,ae),-P[1]),f(v(ue,W),L[1]))),-E[2]),f(x(f(v(_e,X),w[1]),x(f(v(ye,ae),-E[1]),f(v(Q,G),L[1]))),P[2]))),x(f(x(f(v(ge,$),w[1]),x(f(v(ue,W),-E[1]),f(v(Q,G),P[1]))),-L[2]),x(f(x(f(v(Ie,we),w[1]),x(f(v(ye,ae),-P[1]),f(v(ue,W),L[1]))),C[2]),f(x(f(v(Ie,we),C[1]),x(f(v(xe,U),-P[1]),f(v(fe,R),L[1]))),-w[2])))),x(x(f(x(f(v(ye,ae),C[1]),x(f(v(xe,U),-w[1]),f(v(N,z),L[1]))),P[2]),x(f(x(f(v(ue,W),C[1]),x(f(v(fe,R),-w[1]),f(v(N,z),P[1]))),-L[2]),f(x(f(v(ge,$),w[1]),x(f(v(ue,W),-E[1]),f(v(Q,G),P[1]))),C[2]))),x(f(x(f(v(ge,$),C[1]),x(f(v(fe,R),-E[1]),f(v(ne,V),P[1]))),-w[2]),x(f(x(f(v(ue,W),C[1]),x(f(v(fe,R),-w[1]),f(v(N,z),P[1]))),E[2]),f(x(f(v(Q,G),C[1]),x(f(v(ne,V),-w[1]),f(v(N,z),E[1]))),-P[2]))))),be=x(x(x(f(x(f(v(Ie,we),E[1]),x(f(v(_e,X),-P[1]),f(v(ge,$),L[1]))),C[2]),f(x(f(v(Ie,we),C[1]),x(f(v(xe,U),-P[1]),f(v(fe,R),L[1]))),-E[2])),x(f(x(f(v(_e,X),C[1]),x(f(v(xe,U),-E[1]),f(v(ne,V),L[1]))),P[2]),f(x(f(v(ge,$),C[1]),x(f(v(fe,R),-E[1]),f(v(ne,V),P[1]))),-L[2]))),x(x(f(x(f(v(_e,X),w[1]),x(f(v(ye,ae),-E[1]),f(v(Q,G),L[1]))),C[2]),f(x(f(v(_e,X),C[1]),x(f(v(xe,U),-E[1]),f(v(ne,V),L[1]))),-w[2])),x(f(x(f(v(ye,ae),C[1]),x(f(v(xe,U),-w[1]),f(v(N,z),L[1]))),E[2]),f(x(f(v(Q,G),C[1]),x(f(v(ne,V),-w[1]),f(v(N,z),E[1]))),-L[2])))),he=v(De,be);return he[he.length-1]}}function y(x,v,_,f){return function(C,w,E,P,L,O){var z=x(x(_(C[0],C[0]),_(C[1],C[1])),x(_(C[2],C[2]),_(C[3],C[3]))),V=f(z,w[0]),R=f(z,E[0]),U=f(z,P[0]),Z=f(z,L[0]),N=f(z,O[0]),G=x(x(_(w[0],w[0]),_(w[1],w[1])),x(_(w[2],w[2]),_(w[3],w[3]))),W=f(G,C[0]),ae=f(G,E[0]),re=f(G,P[0]),ne=f(G,L[0]),Q=f(G,O[0]),$=x(x(_(E[0],E[0]),_(E[1],E[1])),x(_(E[2],E[2]),_(E[3],E[3]))),X=f($,C[0]),oe=f($,w[0]),fe=f($,P[0]),ue=f($,L[0]),ge=f($,O[0]),we=x(x(_(P[0],P[0]),_(P[1],P[1])),x(_(P[2],P[2]),_(P[3],P[3]))),Te=f(we,C[0]),xe=f(we,w[0]),ye=f(we,E[0]),_e=f(we,L[0]),Ie=f(we,O[0]),De=x(x(_(L[0],L[0]),_(L[1],L[1])),x(_(L[2],L[2]),_(L[3],L[3]))),be=f(De,C[0]),he=f(De,w[0]),ce=f(De,E[0]),me=f(De,P[0]),Pe=f(De,O[0]),Ae=x(x(_(O[0],O[0]),_(O[1],O[1])),x(_(O[2],O[2]),_(O[3],O[3]))),Ce=f(Ae,C[0]),Oe=f(Ae,w[0]),Ne=f(Ae,E[0]),je=f(Ae,P[0]),ve=f(Ae,L[0]),Me=x(x(x(f(x(x(f(x(f(v(ve,Pe),P[1]),x(f(v(je,Ie),-L[1]),f(v(me,_e),O[1]))),E[2]),f(x(f(v(ve,Pe),E[1]),x(f(v(Ne,ge),-L[1]),f(v(ce,ue),O[1]))),-P[2])),x(f(x(f(v(je,Ie),E[1]),x(f(v(Ne,ge),-P[1]),f(v(ye,fe),O[1]))),L[2]),f(x(f(v(me,_e),E[1]),x(f(v(ce,ue),-P[1]),f(v(ye,fe),L[1]))),-O[2]))),w[3]),x(f(x(x(f(x(f(v(ve,Pe),P[1]),x(f(v(je,Ie),-L[1]),f(v(me,_e),O[1]))),w[2]),f(x(f(v(ve,Pe),w[1]),x(f(v(Oe,Q),-L[1]),f(v(he,ne),O[1]))),-P[2])),x(f(x(f(v(je,Ie),w[1]),x(f(v(Oe,Q),-P[1]),f(v(xe,re),O[1]))),L[2]),f(x(f(v(me,_e),w[1]),x(f(v(he,ne),-P[1]),f(v(xe,re),L[1]))),-O[2]))),-E[3]),f(x(x(f(x(f(v(ve,Pe),E[1]),x(f(v(Ne,ge),-L[1]),f(v(ce,ue),O[1]))),w[2]),f(x(f(v(ve,Pe),w[1]),x(f(v(Oe,Q),-L[1]),f(v(he,ne),O[1]))),-E[2])),x(f(x(f(v(Ne,ge),w[1]),x(f(v(Oe,Q),-E[1]),f(v(oe,ae),O[1]))),L[2]),f(x(f(v(ce,ue),w[1]),x(f(v(he,ne),-E[1]),f(v(oe,ae),L[1]))),-O[2]))),P[3]))),x(x(f(x(x(f(x(f(v(je,Ie),E[1]),x(f(v(Ne,ge),-P[1]),f(v(ye,fe),O[1]))),w[2]),f(x(f(v(je,Ie),w[1]),x(f(v(Oe,Q),-P[1]),f(v(xe,re),O[1]))),-E[2])),x(f(x(f(v(Ne,ge),w[1]),x(f(v(Oe,Q),-E[1]),f(v(oe,ae),O[1]))),P[2]),f(x(f(v(ye,fe),w[1]),x(f(v(xe,re),-E[1]),f(v(oe,ae),P[1]))),-O[2]))),-L[3]),f(x(x(f(x(f(v(me,_e),E[1]),x(f(v(ce,ue),-P[1]),f(v(ye,fe),L[1]))),w[2]),f(x(f(v(me,_e),w[1]),x(f(v(he,ne),-P[1]),f(v(xe,re),L[1]))),-E[2])),x(f(x(f(v(ce,ue),w[1]),x(f(v(he,ne),-E[1]),f(v(oe,ae),L[1]))),P[2]),f(x(f(v(ye,fe),w[1]),x(f(v(xe,re),-E[1]),f(v(oe,ae),P[1]))),-L[2]))),O[3])),x(f(x(x(f(x(f(v(ve,Pe),P[1]),x(f(v(je,Ie),-L[1]),f(v(me,_e),O[1]))),w[2]),f(x(f(v(ve,Pe),w[1]),x(f(v(Oe,Q),-L[1]),f(v(he,ne),O[1]))),-P[2])),x(f(x(f(v(je,Ie),w[1]),x(f(v(Oe,Q),-P[1]),f(v(xe,re),O[1]))),L[2]),f(x(f(v(me,_e),w[1]),x(f(v(he,ne),-P[1]),f(v(xe,re),L[1]))),-O[2]))),C[3]),f(x(x(f(x(f(v(ve,Pe),P[1]),x(f(v(je,Ie),-L[1]),f(v(me,_e),O[1]))),C[2]),f(x(f(v(ve,Pe),C[1]),x(f(v(Ce,N),-L[1]),f(v(be,Z),O[1]))),-P[2])),x(f(x(f(v(je,Ie),C[1]),x(f(v(Ce,N),-P[1]),f(v(Te,U),O[1]))),L[2]),f(x(f(v(me,_e),C[1]),x(f(v(be,Z),-P[1]),f(v(Te,U),L[1]))),-O[2]))),-w[3])))),x(x(x(f(x(x(f(x(f(v(ve,Pe),w[1]),x(f(v(Oe,Q),-L[1]),f(v(he,ne),O[1]))),C[2]),f(x(f(v(ve,Pe),C[1]),x(f(v(Ce,N),-L[1]),f(v(be,Z),O[1]))),-w[2])),x(f(x(f(v(Oe,Q),C[1]),x(f(v(Ce,N),-w[1]),f(v(W,V),O[1]))),L[2]),f(x(f(v(he,ne),C[1]),x(f(v(be,Z),-w[1]),f(v(W,V),L[1]))),-O[2]))),P[3]),f(x(x(f(x(f(v(je,Ie),w[1]),x(f(v(Oe,Q),-P[1]),f(v(xe,re),O[1]))),C[2]),f(x(f(v(je,Ie),C[1]),x(f(v(Ce,N),-P[1]),f(v(Te,U),O[1]))),-w[2])),x(f(x(f(v(Oe,Q),C[1]),x(f(v(Ce,N),-w[1]),f(v(W,V),O[1]))),P[2]),f(x(f(v(xe,re),C[1]),x(f(v(Te,U),-w[1]),f(v(W,V),P[1]))),-O[2]))),-L[3])),x(f(x(x(f(x(f(v(me,_e),w[1]),x(f(v(he,ne),-P[1]),f(v(xe,re),L[1]))),C[2]),f(x(f(v(me,_e),C[1]),x(f(v(be,Z),-P[1]),f(v(Te,U),L[1]))),-w[2])),x(f(x(f(v(he,ne),C[1]),x(f(v(be,Z),-w[1]),f(v(W,V),L[1]))),P[2]),f(x(f(v(xe,re),C[1]),x(f(v(Te,U),-w[1]),f(v(W,V),P[1]))),-L[2]))),O[3]),f(x(x(f(x(f(v(je,Ie),E[1]),x(f(v(Ne,ge),-P[1]),f(v(ye,fe),O[1]))),w[2]),f(x(f(v(je,Ie),w[1]),x(f(v(Oe,Q),-P[1]),f(v(xe,re),O[1]))),-E[2])),x(f(x(f(v(Ne,ge),w[1]),x(f(v(Oe,Q),-E[1]),f(v(oe,ae),O[1]))),P[2]),f(x(f(v(ye,fe),w[1]),x(f(v(xe,re),-E[1]),f(v(oe,ae),P[1]))),-O[2]))),C[3]))),x(x(f(x(x(f(x(f(v(je,Ie),E[1]),x(f(v(Ne,ge),-P[1]),f(v(ye,fe),O[1]))),C[2]),f(x(f(v(je,Ie),C[1]),x(f(v(Ce,N),-P[1]),f(v(Te,U),O[1]))),-E[2])),x(f(x(f(v(Ne,ge),C[1]),x(f(v(Ce,N),-E[1]),f(v(X,R),O[1]))),P[2]),f(x(f(v(ye,fe),C[1]),x(f(v(Te,U),-E[1]),f(v(X,R),P[1]))),-O[2]))),-w[3]),f(x(x(f(x(f(v(je,Ie),w[1]),x(f(v(Oe,Q),-P[1]),f(v(xe,re),O[1]))),C[2]),f(x(f(v(je,Ie),C[1]),x(f(v(Ce,N),-P[1]),f(v(Te,U),O[1]))),-w[2])),x(f(x(f(v(Oe,Q),C[1]),x(f(v(Ce,N),-w[1]),f(v(W,V),O[1]))),P[2]),f(x(f(v(xe,re),C[1]),x(f(v(Te,U),-w[1]),f(v(W,V),P[1]))),-O[2]))),E[3])),x(f(x(x(f(x(f(v(Ne,ge),w[1]),x(f(v(Oe,Q),-E[1]),f(v(oe,ae),O[1]))),C[2]),f(x(f(v(Ne,ge),C[1]),x(f(v(Ce,N),-E[1]),f(v(X,R),O[1]))),-w[2])),x(f(x(f(v(Oe,Q),C[1]),x(f(v(Ce,N),-w[1]),f(v(W,V),O[1]))),E[2]),f(x(f(v(oe,ae),C[1]),x(f(v(X,R),-w[1]),f(v(W,V),E[1]))),-O[2]))),-P[3]),f(x(x(f(x(f(v(ye,fe),w[1]),x(f(v(xe,re),-E[1]),f(v(oe,ae),P[1]))),C[2]),f(x(f(v(ye,fe),C[1]),x(f(v(Te,U),-E[1]),f(v(X,R),P[1]))),-w[2])),x(f(x(f(v(xe,re),C[1]),x(f(v(Te,U),-w[1]),f(v(W,V),P[1]))),E[2]),f(x(f(v(oe,ae),C[1]),x(f(v(X,R),-w[1]),f(v(W,V),E[1]))),-P[2]))),O[3]))))),Le=x(x(x(f(x(x(f(x(f(v(ve,Pe),P[1]),x(f(v(je,Ie),-L[1]),f(v(me,_e),O[1]))),E[2]),f(x(f(v(ve,Pe),E[1]),x(f(v(Ne,ge),-L[1]),f(v(ce,ue),O[1]))),-P[2])),x(f(x(f(v(je,Ie),E[1]),x(f(v(Ne,ge),-P[1]),f(v(ye,fe),O[1]))),L[2]),f(x(f(v(me,_e),E[1]),x(f(v(ce,ue),-P[1]),f(v(ye,fe),L[1]))),-O[2]))),C[3]),x(f(x(x(f(x(f(v(ve,Pe),P[1]),x(f(v(je,Ie),-L[1]),f(v(me,_e),O[1]))),C[2]),f(x(f(v(ve,Pe),C[1]),x(f(v(Ce,N),-L[1]),f(v(be,Z),O[1]))),-P[2])),x(f(x(f(v(je,Ie),C[1]),x(f(v(Ce,N),-P[1]),f(v(Te,U),O[1]))),L[2]),f(x(f(v(me,_e),C[1]),x(f(v(be,Z),-P[1]),f(v(Te,U),L[1]))),-O[2]))),-E[3]),f(x(x(f(x(f(v(ve,Pe),E[1]),x(f(v(Ne,ge),-L[1]),f(v(ce,ue),O[1]))),C[2]),f(x(f(v(ve,Pe),C[1]),x(f(v(Ce,N),-L[1]),f(v(be,Z),O[1]))),-E[2])),x(f(x(f(v(Ne,ge),C[1]),x(f(v(Ce,N),-E[1]),f(v(X,R),O[1]))),L[2]),f(x(f(v(ce,ue),C[1]),x(f(v(be,Z),-E[1]),f(v(X,R),L[1]))),-O[2]))),P[3]))),x(x(f(x(x(f(x(f(v(je,Ie),E[1]),x(f(v(Ne,ge),-P[1]),f(v(ye,fe),O[1]))),C[2]),f(x(f(v(je,Ie),C[1]),x(f(v(Ce,N),-P[1]),f(v(Te,U),O[1]))),-E[2])),x(f(x(f(v(Ne,ge),C[1]),x(f(v(Ce,N),-E[1]),f(v(X,R),O[1]))),P[2]),f(x(f(v(ye,fe),C[1]),x(f(v(Te,U),-E[1]),f(v(X,R),P[1]))),-O[2]))),-L[3]),f(x(x(f(x(f(v(me,_e),E[1]),x(f(v(ce,ue),-P[1]),f(v(ye,fe),L[1]))),C[2]),f(x(f(v(me,_e),C[1]),x(f(v(be,Z),-P[1]),f(v(Te,U),L[1]))),-E[2])),x(f(x(f(v(ce,ue),C[1]),x(f(v(be,Z),-E[1]),f(v(X,R),L[1]))),P[2]),f(x(f(v(ye,fe),C[1]),x(f(v(Te,U),-E[1]),f(v(X,R),P[1]))),-L[2]))),O[3])),x(f(x(x(f(x(f(v(ve,Pe),E[1]),x(f(v(Ne,ge),-L[1]),f(v(ce,ue),O[1]))),w[2]),f(x(f(v(ve,Pe),w[1]),x(f(v(Oe,Q),-L[1]),f(v(he,ne),O[1]))),-E[2])),x(f(x(f(v(Ne,ge),w[1]),x(f(v(Oe,Q),-E[1]),f(v(oe,ae),O[1]))),L[2]),f(x(f(v(ce,ue),w[1]),x(f(v(he,ne),-E[1]),f(v(oe,ae),L[1]))),-O[2]))),C[3]),f(x(x(f(x(f(v(ve,Pe),E[1]),x(f(v(Ne,ge),-L[1]),f(v(ce,ue),O[1]))),C[2]),f(x(f(v(ve,Pe),C[1]),x(f(v(Ce,N),-L[1]),f(v(be,Z),O[1]))),-E[2])),x(f(x(f(v(Ne,ge),C[1]),x(f(v(Ce,N),-E[1]),f(v(X,R),O[1]))),L[2]),f(x(f(v(ce,ue),C[1]),x(f(v(be,Z),-E[1]),f(v(X,R),L[1]))),-O[2]))),-w[3])))),x(x(x(f(x(x(f(x(f(v(ve,Pe),w[1]),x(f(v(Oe,Q),-L[1]),f(v(he,ne),O[1]))),C[2]),f(x(f(v(ve,Pe),C[1]),x(f(v(Ce,N),-L[1]),f(v(be,Z),O[1]))),-w[2])),x(f(x(f(v(Oe,Q),C[1]),x(f(v(Ce,N),-w[1]),f(v(W,V),O[1]))),L[2]),f(x(f(v(he,ne),C[1]),x(f(v(be,Z),-w[1]),f(v(W,V),L[1]))),-O[2]))),E[3]),f(x(x(f(x(f(v(Ne,ge),w[1]),x(f(v(Oe,Q),-E[1]),f(v(oe,ae),O[1]))),C[2]),f(x(f(v(Ne,ge),C[1]),x(f(v(Ce,N),-E[1]),f(v(X,R),O[1]))),-w[2])),x(f(x(f(v(Oe,Q),C[1]),x(f(v(Ce,N),-w[1]),f(v(W,V),O[1]))),E[2]),f(x(f(v(oe,ae),C[1]),x(f(v(X,R),-w[1]),f(v(W,V),E[1]))),-O[2]))),-L[3])),x(f(x(x(f(x(f(v(ce,ue),w[1]),x(f(v(he,ne),-E[1]),f(v(oe,ae),L[1]))),C[2]),f(x(f(v(ce,ue),C[1]),x(f(v(be,Z),-E[1]),f(v(X,R),L[1]))),-w[2])),x(f(x(f(v(he,ne),C[1]),x(f(v(be,Z),-w[1]),f(v(W,V),L[1]))),E[2]),f(x(f(v(oe,ae),C[1]),x(f(v(X,R),-w[1]),f(v(W,V),E[1]))),-L[2]))),O[3]),f(x(x(f(x(f(v(me,_e),E[1]),x(f(v(ce,ue),-P[1]),f(v(ye,fe),L[1]))),w[2]),f(x(f(v(me,_e),w[1]),x(f(v(he,ne),-P[1]),f(v(xe,re),L[1]))),-E[2])),x(f(x(f(v(ce,ue),w[1]),x(f(v(he,ne),-E[1]),f(v(oe,ae),L[1]))),P[2]),f(x(f(v(ye,fe),w[1]),x(f(v(xe,re),-E[1]),f(v(oe,ae),P[1]))),-L[2]))),C[3]))),x(x(f(x(x(f(x(f(v(me,_e),E[1]),x(f(v(ce,ue),-P[1]),f(v(ye,fe),L[1]))),C[2]),f(x(f(v(me,_e),C[1]),x(f(v(be,Z),-P[1]),f(v(Te,U),L[1]))),-E[2])),x(f(x(f(v(ce,ue),C[1]),x(f(v(be,Z),-E[1]),f(v(X,R),L[1]))),P[2]),f(x(f(v(ye,fe),C[1]),x(f(v(Te,U),-E[1]),f(v(X,R),P[1]))),-L[2]))),-w[3]),f(x(x(f(x(f(v(me,_e),w[1]),x(f(v(he,ne),-P[1]),f(v(xe,re),L[1]))),C[2]),f(x(f(v(me,_e),C[1]),x(f(v(be,Z),-P[1]),f(v(Te,U),L[1]))),-w[2])),x(f(x(f(v(he,ne),C[1]),x(f(v(be,Z),-w[1]),f(v(W,V),L[1]))),P[2]),f(x(f(v(xe,re),C[1]),x(f(v(Te,U),-w[1]),f(v(W,V),P[1]))),-L[2]))),E[3])),x(f(x(x(f(x(f(v(ce,ue),w[1]),x(f(v(he,ne),-E[1]),f(v(oe,ae),L[1]))),C[2]),f(x(f(v(ce,ue),C[1]),x(f(v(be,Z),-E[1]),f(v(X,R),L[1]))),-w[2])),x(f(x(f(v(he,ne),C[1]),x(f(v(be,Z),-w[1]),f(v(W,V),L[1]))),E[2]),f(x(f(v(oe,ae),C[1]),x(f(v(X,R),-w[1]),f(v(W,V),E[1]))),-L[2]))),-P[3]),f(x(x(f(x(f(v(ye,fe),w[1]),x(f(v(xe,re),-E[1]),f(v(oe,ae),P[1]))),C[2]),f(x(f(v(ye,fe),C[1]),x(f(v(Te,U),-E[1]),f(v(X,R),P[1]))),-w[2])),x(f(x(f(v(xe,re),C[1]),x(f(v(Te,U),-w[1]),f(v(W,V),P[1]))),E[2]),f(x(f(v(oe,ae),C[1]),x(f(v(X,R),-w[1]),f(v(W,V),E[1]))),-P[2]))),L[3]))))),Ue=v(Me,Le);return Ue[Ue.length-1]}}var d=[function(){return 0},function(){return 0},function(){return 0}];function m(x){var v=d[x.length];return v||(v=d[x.length]=s(x.length)),v.apply(void 0,x)}function g(x,v,_,f,C,w,E,P){return function(L,O,z,V,R,U){switch(arguments.length){case 0:case 1:return 0;case 2:return f(L,O);case 3:return C(L,O,z);case 4:return w(L,O,z,V);case 5:return E(L,O,z,V,R);case 6:return P(L,O,z,V,R,U)}for(var Z=new Array(arguments.length),N=0;N<arguments.length;++N)Z[N]=arguments[N];return x(Z)}}!function(){for(;d.length<=6;)d.push(s(d.length));p.exports=g.apply(void 0,[m].concat(d));for(var x=0;x<=6;++x)p.exports[x]=d[x]}()},727:function(p,l,t){"use strict";var i=t(2962);function r(d){return(2===d?n:3===d?a:4===d?s:5===d?c:h)(d<6?i[d]:i)}function n(d){return function(m,g){return[d([[+g[0],+m[0][1]],[+g[1],+m[1][1]]]),d([[+m[0][0],+g[0]],[+m[1][0],+g[1]]]),d(m)]}}function a(d){return function(m,g){return[d([[+g[0],+m[0][1],+m[0][2]],[+g[1],+m[1][1],+m[1][2]],[+g[2],+m[2][1],+m[2][2]]]),d([[+m[0][0],+g[0],+m[0][2]],[+m[1][0],+g[1],+m[1][2]],[+m[2][0],+g[2],+m[2][2]]]),d([[+m[0][0],+m[0][1],+g[0]],[+m[1][0],+m[1][1],+g[1]],[+m[2][0],+m[2][1],+g[2]]]),d(m)]}}function s(d){return function(m,g){return[d([[+g[0],+m[0][1],+m[0][2],+m[0][3]],[+g[1],+m[1][1],+m[1][2],+m[1][3]],[+g[2],+m[2][1],+m[2][2],+m[2][3]],[+g[3],+m[3][1],+m[3][2],+m[3][3]]]),d([[+m[0][0],+g[0],+m[0][2],+m[0][3]],[+m[1][0],+g[1],+m[1][2],+m[1][3]],[+m[2][0],+g[2],+m[2][2],+m[2][3]],[+m[3][0],+g[3],+m[3][2],+m[3][3]]]),d([[+m[0][0],+m[0][1],+g[0],+m[0][3]],[+m[1][0],+m[1][1],+g[1],+m[1][3]],[+m[2][0],+m[2][1],+g[2],+m[2][3]],[+m[3][0],+m[3][1],+g[3],+m[3][3]]]),d([[+m[0][0],+m[0][1],+m[0][2],+g[0]],[+m[1][0],+m[1][1],+m[1][2],+g[1]],[+m[2][0],+m[2][1],+m[2][2],+g[2]],[+m[3][0],+m[3][1],+m[3][2],+g[3]]]),d(m)]}}function c(d){return function(m,g){return[d([[+g[0],+m[0][1],+m[0][2],+m[0][3],+m[0][4]],[+g[1],+m[1][1],+m[1][2],+m[1][3],+m[1][4]],[+g[2],+m[2][1],+m[2][2],+m[2][3],+m[2][4]],[+g[3],+m[3][1],+m[3][2],+m[3][3],+m[3][4]],[+g[4],+m[4][1],+m[4][2],+m[4][3],+m[4][4]]]),d([[+m[0][0],+g[0],+m[0][2],+m[0][3],+m[0][4]],[+m[1][0],+g[1],+m[1][2],+m[1][3],+m[1][4]],[+m[2][0],+g[2],+m[2][2],+m[2][3],+m[2][4]],[+m[3][0],+g[3],+m[3][2],+m[3][3],+m[3][4]],[+m[4][0],+g[4],+m[4][2],+m[4][3],+m[4][4]]]),d([[+m[0][0],+m[0][1],+g[0],+m[0][3],+m[0][4]],[+m[1][0],+m[1][1],+g[1],+m[1][3],+m[1][4]],[+m[2][0],+m[2][1],+g[2],+m[2][3],+m[2][4]],[+m[3][0],+m[3][1],+g[3],+m[3][3],+m[3][4]],[+m[4][0],+m[4][1],+g[4],+m[4][3],+m[4][4]]]),d([[+m[0][0],+m[0][1],+m[0][2],+g[0],+m[0][4]],[+m[1][0],+m[1][1],+m[1][2],+g[1],+m[1][4]],[+m[2][0],+m[2][1],+m[2][2],+g[2],+m[2][4]],[+m[3][0],+m[3][1],+m[3][2],+g[3],+m[3][4]],[+m[4][0],+m[4][1],+m[4][2],+g[4],+m[4][4]]]),d([[+m[0][0],+m[0][1],+m[0][2],+m[0][3],+g[0]],[+m[1][0],+m[1][1],+m[1][2],+m[1][3],+g[1]],[+m[2][0],+m[2][1],+m[2][2],+m[2][3],+g[2]],[+m[3][0],+m[3][1],+m[3][2],+m[3][3],+g[3]],[+m[4][0],+m[4][1],+m[4][2],+m[4][3],+g[4]]]),d(m)]}}function h(d){return function(m,g){return[d([[+g[0],+m[0][1],+m[0][2],+m[0][3],+m[0][4],+m[0][5]],[+g[1],+m[1][1],+m[1][2],+m[1][3],+m[1][4],+m[1][5]],[+g[2],+m[2][1],+m[2][2],+m[2][3],+m[2][4],+m[2][5]],[+g[3],+m[3][1],+m[3][2],+m[3][3],+m[3][4],+m[3][5]],[+g[4],+m[4][1],+m[4][2],+m[4][3],+m[4][4],+m[4][5]],[+g[5],+m[5][1],+m[5][2],+m[5][3],+m[5][4],+m[5][5]]]),d([[+m[0][0],+g[0],+m[0][2],+m[0][3],+m[0][4],+m[0][5]],[+m[1][0],+g[1],+m[1][2],+m[1][3],+m[1][4],+m[1][5]],[+m[2][0],+g[2],+m[2][2],+m[2][3],+m[2][4],+m[2][5]],[+m[3][0],+g[3],+m[3][2],+m[3][3],+m[3][4],+m[3][5]],[+m[4][0],+g[4],+m[4][2],+m[4][3],+m[4][4],+m[4][5]],[+m[5][0],+g[5],+m[5][2],+m[5][3],+m[5][4],+m[5][5]]]),d([[+m[0][0],+m[0][1],+g[0],+m[0][3],+m[0][4],+m[0][5]],[+m[1][0],+m[1][1],+g[1],+m[1][3],+m[1][4],+m[1][5]],[+m[2][0],+m[2][1],+g[2],+m[2][3],+m[2][4],+m[2][5]],[+m[3][0],+m[3][1],+g[3],+m[3][3],+m[3][4],+m[3][5]],[+m[4][0],+m[4][1],+g[4],+m[4][3],+m[4][4],+m[4][5]],[+m[5][0],+m[5][1],+g[5],+m[5][3],+m[5][4],+m[5][5]]]),d([[+m[0][0],+m[0][1],+m[0][2],+g[0],+m[0][4],+m[0][5]],[+m[1][0],+m[1][1],+m[1][2],+g[1],+m[1][4],+m[1][5]],[+m[2][0],+m[2][1],+m[2][2],+g[2],+m[2][4],+m[2][5]],[+m[3][0],+m[3][1],+m[3][2],+g[3],+m[3][4],+m[3][5]],[+m[4][0],+m[4][1],+m[4][2],+g[4],+m[4][4],+m[4][5]],[+m[5][0],+m[5][1],+m[5][2],+g[5],+m[5][4],+m[5][5]]]),d([[+m[0][0],+m[0][1],+m[0][2],+m[0][3],+g[0],+m[0][5]],[+m[1][0],+m[1][1],+m[1][2],+m[1][3],+g[1],+m[1][5]],[+m[2][0],+m[2][1],+m[2][2],+m[2][3],+g[2],+m[2][5]],[+m[3][0],+m[3][1],+m[3][2],+m[3][3],+g[3],+m[3][5]],[+m[4][0],+m[4][1],+m[4][2],+m[4][3],+g[4],+m[4][5]],[+m[5][0],+m[5][1],+m[5][2],+m[5][3],+g[5],+m[5][5]]]),d([[+m[0][0],+m[0][1],+m[0][2],+m[0][3],+m[0][4],+g[0]],[+m[1][0],+m[1][1],+m[1][2],+m[1][3],+m[1][4],+g[1]],[+m[2][0],+m[2][1],+m[2][2],+m[2][3],+m[2][4],+g[2]],[+m[3][0],+m[3][1],+m[3][2],+m[3][3],+m[3][4],+g[3]],[+m[4][0],+m[4][1],+m[4][2],+m[4][3],+m[4][4],+g[4]],[+m[5][0],+m[5][1],+m[5][2],+m[5][3],+m[5][4],+g[5]]]),d(m)]}}var u=[function(){return[[0]]},function(d,m){return[[m[0]],[d[0][0]]]}];function y(d,m,g,x,v,_,f,C){return function(w,E){switch(w.length){case 0:return d(w,E);case 1:return m(w,E);case 2:return g(w,E);case 3:return x(w,E);case 4:return v(w,E);case 5:return _(w,E)}var P=f[w.length];return P||(P=f[w.length]=C(w.length)),P(w,E)}}!function(){for(;u.length<6;)u.push(r(u.length));p.exports=y.apply(void 0,u.concat([u,r]));for(var d=0;d<6;++d)p.exports[d]=u[d]}()},3250:function(p,l,t){"use strict";var i=t(5250),r=t(8210),n=t(3012),a=t(8545);function s(v,_,f,C){return function(w,E,P){var L=v(v(_(E[1],P[0]),_(-P[1],E[0])),v(_(w[1],E[0]),_(-E[1],w[0]))),O=v(_(w[1],P[0]),_(-P[1],w[0])),z=C(L,O);return z[z.length-1]}}function c(v,_,f,C){return function(w,E,P,L){var O=v(v(f(v(_(P[1],L[0]),_(-L[1],P[0])),E[2]),v(f(v(_(E[1],L[0]),_(-L[1],E[0])),-P[2]),f(v(_(E[1],P[0]),_(-P[1],E[0])),L[2]))),v(f(v(_(E[1],L[0]),_(-L[1],E[0])),w[2]),v(f(v(_(w[1],L[0]),_(-L[1],w[0])),-E[2]),f(v(_(w[1],E[0]),_(-E[1],w[0])),L[2])))),z=v(v(f(v(_(P[1],L[0]),_(-L[1],P[0])),w[2]),v(f(v(_(w[1],L[0]),_(-L[1],w[0])),-P[2]),f(v(_(w[1],P[0]),_(-P[1],w[0])),L[2]))),v(f(v(_(E[1],P[0]),_(-P[1],E[0])),w[2]),v(f(v(_(w[1],P[0]),_(-P[1],w[0])),-E[2]),f(v(_(w[1],E[0]),_(-E[1],w[0])),P[2])))),V=C(O,z);return V[V.length-1]}}function h(v,_,f,C){return function(w,E,P,L,O){var z=v(v(v(f(v(f(v(_(L[1],O[0]),_(-O[1],L[0])),P[2]),v(f(v(_(P[1],O[0]),_(-O[1],P[0])),-L[2]),f(v(_(P[1],L[0]),_(-L[1],P[0])),O[2]))),E[3]),v(f(v(f(v(_(L[1],O[0]),_(-O[1],L[0])),E[2]),v(f(v(_(E[1],O[0]),_(-O[1],E[0])),-L[2]),f(v(_(E[1],L[0]),_(-L[1],E[0])),O[2]))),-P[3]),f(v(f(v(_(P[1],O[0]),_(-O[1],P[0])),E[2]),v(f(v(_(E[1],O[0]),_(-O[1],E[0])),-P[2]),f(v(_(E[1],P[0]),_(-P[1],E[0])),O[2]))),L[3]))),v(f(v(f(v(_(P[1],L[0]),_(-L[1],P[0])),E[2]),v(f(v(_(E[1],L[0]),_(-L[1],E[0])),-P[2]),f(v(_(E[1],P[0]),_(-P[1],E[0])),L[2]))),-O[3]),v(f(v(f(v(_(L[1],O[0]),_(-O[1],L[0])),E[2]),v(f(v(_(E[1],O[0]),_(-O[1],E[0])),-L[2]),f(v(_(E[1],L[0]),_(-L[1],E[0])),O[2]))),w[3]),f(v(f(v(_(L[1],O[0]),_(-O[1],L[0])),w[2]),v(f(v(_(w[1],O[0]),_(-O[1],w[0])),-L[2]),f(v(_(w[1],L[0]),_(-L[1],w[0])),O[2]))),-E[3])))),v(v(f(v(f(v(_(E[1],O[0]),_(-O[1],E[0])),w[2]),v(f(v(_(w[1],O[0]),_(-O[1],w[0])),-E[2]),f(v(_(w[1],E[0]),_(-E[1],w[0])),O[2]))),L[3]),v(f(v(f(v(_(E[1],L[0]),_(-L[1],E[0])),w[2]),v(f(v(_(w[1],L[0]),_(-L[1],w[0])),-E[2]),f(v(_(w[1],E[0]),_(-E[1],w[0])),L[2]))),-O[3]),f(v(f(v(_(P[1],L[0]),_(-L[1],P[0])),E[2]),v(f(v(_(E[1],L[0]),_(-L[1],E[0])),-P[2]),f(v(_(E[1],P[0]),_(-P[1],E[0])),L[2]))),w[3]))),v(f(v(f(v(_(P[1],L[0]),_(-L[1],P[0])),w[2]),v(f(v(_(w[1],L[0]),_(-L[1],w[0])),-P[2]),f(v(_(w[1],P[0]),_(-P[1],w[0])),L[2]))),-E[3]),v(f(v(f(v(_(E[1],L[0]),_(-L[1],E[0])),w[2]),v(f(v(_(w[1],L[0]),_(-L[1],w[0])),-E[2]),f(v(_(w[1],E[0]),_(-E[1],w[0])),L[2]))),P[3]),f(v(f(v(_(E[1],P[0]),_(-P[1],E[0])),w[2]),v(f(v(_(w[1],P[0]),_(-P[1],w[0])),-E[2]),f(v(_(w[1],E[0]),_(-E[1],w[0])),P[2]))),-L[3]))))),V=v(v(v(f(v(f(v(_(L[1],O[0]),_(-O[1],L[0])),P[2]),v(f(v(_(P[1],O[0]),_(-O[1],P[0])),-L[2]),f(v(_(P[1],L[0]),_(-L[1],P[0])),O[2]))),w[3]),f(v(f(v(_(L[1],O[0]),_(-O[1],L[0])),w[2]),v(f(v(_(w[1],O[0]),_(-O[1],w[0])),-L[2]),f(v(_(w[1],L[0]),_(-L[1],w[0])),O[2]))),-P[3])),v(f(v(f(v(_(P[1],O[0]),_(-O[1],P[0])),w[2]),v(f(v(_(w[1],O[0]),_(-O[1],w[0])),-P[2]),f(v(_(w[1],P[0]),_(-P[1],w[0])),O[2]))),L[3]),f(v(f(v(_(P[1],L[0]),_(-L[1],P[0])),w[2]),v(f(v(_(w[1],L[0]),_(-L[1],w[0])),-P[2]),f(v(_(w[1],P[0]),_(-P[1],w[0])),L[2]))),-O[3]))),v(v(f(v(f(v(_(P[1],O[0]),_(-O[1],P[0])),E[2]),v(f(v(_(E[1],O[0]),_(-O[1],E[0])),-P[2]),f(v(_(E[1],P[0]),_(-P[1],E[0])),O[2]))),w[3]),f(v(f(v(_(P[1],O[0]),_(-O[1],P[0])),w[2]),v(f(v(_(w[1],O[0]),_(-O[1],w[0])),-P[2]),f(v(_(w[1],P[0]),_(-P[1],w[0])),O[2]))),-E[3])),v(f(v(f(v(_(E[1],O[0]),_(-O[1],E[0])),w[2]),v(f(v(_(w[1],O[0]),_(-O[1],w[0])),-E[2]),f(v(_(w[1],E[0]),_(-E[1],w[0])),O[2]))),P[3]),f(v(f(v(_(E[1],P[0]),_(-P[1],E[0])),w[2]),v(f(v(_(w[1],P[0]),_(-P[1],w[0])),-E[2]),f(v(_(w[1],E[0]),_(-E[1],w[0])),P[2]))),-O[3])))),R=C(z,V);return R[R.length-1]}}function u(v){return(3===v?s:4===v?c:h)(r,i,n,a)}var y=u(3),d=u(4),m=[function(){return 0},function(){return 0},function(v,_){return _[0]-v[0]},function(v,_,f){var C,w=(v[1]-f[1])*(_[0]-f[0]),E=(v[0]-f[0])*(_[1]-f[1]),P=w-E;if(w>0){if(E<=0)return P;C=w+E}else{if(!(w<0)||E>=0)return P;C=-(w+E)}var L=33306690738754716e-32*C;return P>=L||P<=-L?P:y(v,_,f)},function(v,_,f,C){var w=v[0]-C[0],E=_[0]-C[0],P=f[0]-C[0],L=v[1]-C[1],O=_[1]-C[1],z=f[1]-C[1],V=v[2]-C[2],R=_[2]-C[2],U=f[2]-C[2],Z=E*z,N=P*O,G=P*L,W=w*z,ae=w*O,re=E*L,ne=V*(Z-N)+R*(G-W)+U*(ae-re),Q=7771561172376103e-31*((Math.abs(Z)+Math.abs(N))*Math.abs(V)+(Math.abs(G)+Math.abs(W))*Math.abs(R)+(Math.abs(ae)+Math.abs(re))*Math.abs(U));return ne>Q||-ne>Q?ne:d(v,_,f,C)}];function g(v){var _=m[v.length];return _||(_=m[v.length]=u(v.length)),_.apply(void 0,v)}function x(v,_,f,C,w,E,P){return function(L,O,z,V,R){switch(arguments.length){case 0:case 1:return 0;case 2:return C(L,O);case 3:return w(L,O,z);case 4:return E(L,O,z,V);case 5:return P(L,O,z,V,R)}for(var U=new Array(arguments.length),Z=0;Z<arguments.length;++Z)U[Z]=arguments[Z];return v(U)}}!function(){for(;m.length<=5;)m.push(u(m.length));p.exports=x.apply(void 0,[g].concat(m));for(var v=0;v<=5;++v)p.exports[v]=m[v]}()},5382:function(p,l,t){"use strict";var i=t(8210),r=t(3012);p.exports=function(n,a){if(1===n.length)return r(a,n[0]);if(1===a.length)return r(n,a[0]);if(0===n.length||0===a.length)return[0];var s=[0];if(n.length<a.length)for(var c=0;c<n.length;++c)s=i(s,r(a,n[c]));else for(c=0;c<a.length;++c)s=i(s,r(n,a[c]));return s}},3012:function(p,l,t){"use strict";var i=t(5250),r=t(9362);p.exports=function(n,a){var s=n.length;if(1===s){var c=i(n[0],a);return c[0]?c:[c[1]]}var h=new Array(2*s),u=[.1,.1],y=[.1,.1],d=0;i(n[0],a,u),u[0]&&(h[d++]=u[0]);for(var m=1;m<s;++m){i(n[m],a,y),r(u[1],y[0],u),u[0]&&(h[d++]=u[0]);var x=y[1],v=u[1],_=x+v,f=v-(_-x);u[1]=_,f&&(h[d++]=f)}return u[1]&&(h[d++]=u[1]),0===d&&(h[d++]=0),h.length=d,h}},1125:function(p,l,t){"use strict";p.exports=function(r,n,a,s){var c=i(r,a,s),h=i(n,a,s);if(c>0&&h>0||c<0&&h<0)return!1;var u=i(a,r,n),y=i(s,r,n);return!(u>0&&y>0||u<0&&y<0)&&(0!==c||0!==h||0!==u||0!==y||function(d,m,g,x){for(var v=0;v<2;++v){var _=d[v],f=m[v],C=Math.min(_,f),w=Math.max(_,f),E=g[v],P=x[v],L=Math.min(E,P);if(Math.max(E,P)<C||w<L)return!1}return!0}(r,n,a,s))};var i=t(3250)[3]},8545:function(p){"use strict";p.exports=function(l,t){var L,O,z,V,R,i=0|l.length,r=0|t.length;if(1===i&&1===r)return(R=(L=l[0])-((z=L+(O=-t[0]))-(V=z-L))+(O-V))?[R,z]:[z];var n,a,s=new Array(i+r),c=0,h=0,u=0,y=Math.abs,d=l[h],m=y(d),g=-t[u],x=y(g);m<x?(a=d,(h+=1)<i&&(m=y(d=l[h]))):(a=g,(u+=1)<r&&(x=y(g=-t[u]))),h<i&&m<x||u>=r?(n=d,(h+=1)<i&&(m=y(d=l[h]))):(n=g,(u+=1)<r&&(x=y(g=-t[u])));for(var v,_,f=n+a,C=f-n,w=a-C,E=w,P=f;h<i&&u<r;)m<x?(n=d,(h+=1)<i&&(m=y(d=l[h]))):(n=g,(u+=1)<r&&(x=y(g=-t[u]))),(w=(a=E)-(C=(f=n+a)-n))&&(s[c++]=w),E=P-((v=P+f)-(_=v-P))+(f-_),P=v;for(;h<i;)(w=(a=E)-(C=(f=(n=d)+a)-n))&&(s[c++]=w),E=P-((v=P+f)-(_=v-P))+(f-_),P=v,(h+=1)<i&&(d=l[h]);for(;u<r;)(w=(a=E)-(C=(f=(n=g)+a)-n))&&(s[c++]=w),E=P-((v=P+f)-(_=v-P))+(f-_),P=v,(u+=1)<r&&(g=-t[u]);return E&&(s[c++]=E),P&&(s[c++]=P),c||(s[c++]=0),s.length=c,s}},8210:function(p){"use strict";p.exports=function(l,t){var L,O,z,V,R,i=0|l.length,r=0|t.length;if(1===i&&1===r)return(R=(L=l[0])-((z=L+(O=t[0]))-(V=z-L))+(O-V))?[R,z]:[z];var n,a,s=new Array(i+r),c=0,h=0,u=0,y=Math.abs,d=l[h],m=y(d),g=t[u],x=y(g);m<x?(a=d,(h+=1)<i&&(m=y(d=l[h]))):(a=g,(u+=1)<r&&(x=y(g=t[u]))),h<i&&m<x||u>=r?(n=d,(h+=1)<i&&(m=y(d=l[h]))):(n=g,(u+=1)<r&&(x=y(g=t[u])));for(var v,_,f=n+a,C=f-n,w=a-C,E=w,P=f;h<i&&u<r;)m<x?(n=d,(h+=1)<i&&(m=y(d=l[h]))):(n=g,(u+=1)<r&&(x=y(g=t[u]))),(w=(a=E)-(C=(f=n+a)-n))&&(s[c++]=w),E=P-((v=P+f)-(_=v-P))+(f-_),P=v;for(;h<i;)(w=(a=E)-(C=(f=(n=d)+a)-n))&&(s[c++]=w),E=P-((v=P+f)-(_=v-P))+(f-_),P=v,(h+=1)<i&&(d=l[h]);for(;u<r;)(w=(a=E)-(C=(f=(n=g)+a)-n))&&(s[c++]=w),E=P-((v=P+f)-(_=v-P))+(f-_),P=v,(u+=1)<r&&(g=t[u]);return E&&(s[c++]=E),P&&(s[c++]=P),c||(s[c++]=0),s.length=c,s}},9127:function(p,l,t){"use strict";p.exports=function(n){return r(i(n))};var i=t(6204),r=t(5771)},7765:function(p,l,t){"use strict";p.exports=function(s,c,h,u){if(h=h||0,void 0===u&&(u=function(f){for(var C=f.length,w=0,E=0;E<C;++E)w=0|Math.max(w,f[E].length);return w-1}(s)),0===s.length||u<1)return{cells:[],vertexIds:[],vertexWeights:[]};var y=function(f,C){for(var w=f.length,E=r.mallocUint8(w),P=0;P<w;++P)E[P]=f[P]<C|0;return E}(c,+h),d=function(f,C){for(var w=f.length,P=r.mallocUint32(2*(C*(C+1)/2*w|0)),L=0,O=0;O<w;++O)for(var z=f[O],V=(C=z.length,0);V<C;++V)for(var R=0;R<V;++R){var U=z[R],Z=z[V];P[L++]=0|Math.min(U,Z),P[L++]=0|Math.max(U,Z)}n(i(P,[L/2|0,2]));var N=2;for(O=2;O<L;O+=2)P[O-2]===P[O]&&P[O-1]===P[O+1]||(P[N++]=P[O],P[N++]=P[O+1]);return i(P,[N/2|0,2])}(s,u),m=function(f,C,w,E){for(var P=f.data,L=f.shape[0],O=r.mallocDouble(L),z=0,V=0;V<L;++V){var R=P[2*V],U=P[2*V+1];if(w[R]!==w[U]){var Z=C[R],N=C[U];P[2*z]=R,P[2*z+1]=U,O[z++]=(N-E)/(N-Z)}}return f.shape[0]=z,i(O,[z])}(d,c,y,+h),g=function(f,C){var w=r.mallocInt32(2*C),E=f.shape[0],P=f.data;w[0]=0;for(var L=0,O=0;O<E;++O){var z=P[2*O];if(z!==L){for(w[2*L+1]=O;++L<z;)w[2*L]=O,w[2*L+1]=O;w[2*L]=O}}for(w[2*L+1]=E;++L<C;)w[2*L]=w[2*L+1]=E;return w}(d,0|c.length),x=a(u)(s,d.data,g,y),v=function(f){for(var C=0|f.shape[0],w=f.data,E=new Array(C),P=0;P<C;++P)E[P]=[w[2*P],w[2*P+1]];return E}(d),_=[].slice.call(m.data,0,m.shape[0]);return r.free(y),r.free(d.data),r.free(m.data),r.free(g),{cells:x,vertexIds:v,vertexWeights:_}};var i=t(9618),r=t(1888),n=t(446),a=t(1570)},1570:function(p){"use strict";p.exports=function(t){return l[t]()};var l=[function(){return function(t,i,r,n){for(var a=t.length,s=0;s<a;++s);return[]}},function(){function t(i,r,n,a){for(var s=0|Math.min(n,a),c=0|Math.max(n,a),h=i[2*s],u=i[2*s+1];h<u;){var y=h+u>>1,d=r[2*y+1];if(d===c)return y;c<d?u=y:h=y+1}return h}return function(i,r,n,a){for(var s=i.length,c=[],h=0;h<s;++h){var u=i[h];if(2===u.length){var y=(a[u[0]]<<0)+(a[u[1]]<<1);if(0===y||3===y)continue;switch(y){case 0:case 3:break;case 1:c.push([t(n,r,u[0],u[1])]);break;case 2:c.push([t(n,r,u[1],u[0])])}}}return c}},function(){function t(i,r,n,a){for(var s=0|Math.min(n,a),c=0|Math.max(n,a),h=i[2*s],u=i[2*s+1];h<u;){var y=h+u>>1,d=r[2*y+1];if(d===c)return y;c<d?u=y:h=y+1}return h}return function(i,r,n,a){for(var s=i.length,c=[],h=0;h<s;++h){var u=i[h],y=u.length;if(3===y){if(0==(d=(a[u[0]]<<0)+(a[u[1]]<<1)+(a[u[2]]<<2))||7===d)continue;switch(d){case 0:case 7:break;case 1:c.push([t(n,r,u[0],u[2]),t(n,r,u[0],u[1])]);break;case 2:c.push([t(n,r,u[1],u[0]),t(n,r,u[1],u[2])]);break;case 3:c.push([t(n,r,u[0],u[2]),t(n,r,u[1],u[2])]);break;case 4:c.push([t(n,r,u[2],u[1]),t(n,r,u[2],u[0])]);break;case 5:c.push([t(n,r,u[2],u[1]),t(n,r,u[0],u[1])]);break;case 6:c.push([t(n,r,u[1],u[0]),t(n,r,u[2],u[0])])}}else if(2===y){var d;if(0==(d=(a[u[0]]<<0)+(a[u[1]]<<1))||3===d)continue;switch(d){case 0:case 3:break;case 1:c.push([t(n,r,u[0],u[1])]);break;case 2:c.push([t(n,r,u[1],u[0])])}}}return c}},function(){function t(i,r,n,a){for(var s=0|Math.min(n,a),c=0|Math.max(n,a),h=i[2*s],u=i[2*s+1];h<u;){var y=h+u>>1,d=r[2*y+1];if(d===c)return y;c<d?u=y:h=y+1}return h}return function(i,r,n,a){for(var s=i.length,c=[],h=0;h<s;++h){var u=i[h],y=u.length;if(4===y){if(0==(d=(a[u[0]]<<0)+(a[u[1]]<<1)+(a[u[2]]<<2)+(a[u[3]]<<3))||15===d)continue;switch(d){case 0:case 15:break;case 1:c.push([t(n,r,u[0],u[1]),t(n,r,u[0],u[2]),t(n,r,u[0],u[3])]);break;case 2:c.push([t(n,r,u[1],u[2]),t(n,r,u[1],u[0]),t(n,r,u[1],u[3])]);break;case 3:c.push([t(n,r,u[1],u[2]),t(n,r,u[0],u[2]),t(n,r,u[0],u[3])],[t(n,r,u[1],u[3]),t(n,r,u[1],u[2]),t(n,r,u[0],u[3])]);break;case 4:c.push([t(n,r,u[2],u[0]),t(n,r,u[2],u[1]),t(n,r,u[2],u[3])]);break;case 5:c.push([t(n,r,u[0],u[1]),t(n,r,u[2],u[1]),t(n,r,u[0],u[3])],[t(n,r,u[2],u[1]),t(n,r,u[2],u[3]),t(n,r,u[0],u[3])]);break;case 6:c.push([t(n,r,u[2],u[0]),t(n,r,u[1],u[0]),t(n,r,u[1],u[3])],[t(n,r,u[2],u[3]),t(n,r,u[2],u[0]),t(n,r,u[1],u[3])]);break;case 7:c.push([t(n,r,u[0],u[3]),t(n,r,u[1],u[3]),t(n,r,u[2],u[3])]);break;case 8:c.push([t(n,r,u[3],u[1]),t(n,r,u[3],u[0]),t(n,r,u[3],u[2])]);break;case 9:c.push([t(n,r,u[3],u[1]),t(n,r,u[0],u[1]),t(n,r,u[0],u[2])],[t(n,r,u[3],u[2]),t(n,r,u[3],u[1]),t(n,r,u[0],u[2])]);break;case 10:c.push([t(n,r,u[1],u[0]),t(n,r,u[3],u[0]),t(n,r,u[1],u[2])],[t(n,r,u[3],u[0]),t(n,r,u[3],u[2]),t(n,r,u[1],u[2])]);break;case 11:c.push([t(n,r,u[1],u[2]),t(n,r,u[0],u[2]),t(n,r,u[3],u[2])]);break;case 12:c.push([t(n,r,u[3],u[0]),t(n,r,u[2],u[0]),t(n,r,u[2],u[1])],[t(n,r,u[3],u[1]),t(n,r,u[3],u[0]),t(n,r,u[2],u[1])]);break;case 13:c.push([t(n,r,u[0],u[1]),t(n,r,u[2],u[1]),t(n,r,u[3],u[1])]);break;case 14:c.push([t(n,r,u[2],u[0]),t(n,r,u[1],u[0]),t(n,r,u[3],u[0])])}}else if(3===y){if(0==(d=(a[u[0]]<<0)+(a[u[1]]<<1)+(a[u[2]]<<2))||7===d)continue;switch(d){case 0:case 7:break;case 1:c.push([t(n,r,u[0],u[2]),t(n,r,u[0],u[1])]);break;case 2:c.push([t(n,r,u[1],u[0]),t(n,r,u[1],u[2])]);break;case 3:c.push([t(n,r,u[0],u[2]),t(n,r,u[1],u[2])]);break;case 4:c.push([t(n,r,u[2],u[1]),t(n,r,u[2],u[0])]);break;case 5:c.push([t(n,r,u[2],u[1]),t(n,r,u[0],u[1])]);break;case 6:c.push([t(n,r,u[1],u[0]),t(n,r,u[2],u[0])])}}else if(2===y){var d;if(0==(d=(a[u[0]]<<0)+(a[u[1]]<<1))||3===d)continue;switch(d){case 0:case 3:break;case 1:c.push([t(n,r,u[0],u[1])]);break;case 2:c.push([t(n,r,u[1],u[0])])}}}return c}}]},6803:function(p,l,t){"use strict";t(8828),t(1755),l.Fw=function i(r,n){var a=r.length,s=r.length-n.length,c=Math.min;if(s)return s;switch(a){case 0:return 0;case 1:return r[0]-n[0];case 2:return(y=r[0]+r[1]-n[0]-n[1])||c(r[0],r[1])-c(n[0],n[1]);case 3:var h=r[0]+r[1],u=n[0]+n[1];if(y=h+r[2]-(u+n[2]))return y;var y,d=c(r[0],r[1]),m=c(n[0],n[1]);return(y=c(d,r[2])-c(m,n[2]))||c(d+r[2],h)-c(m+n[2],u);default:var g=r.slice(0);g.sort();var x=n.slice(0);x.sort();for(var v=0;v<a;++v)if(s=g[v]-x[v])return s;return 0}}},3105:function(p,l){"use strict";function t(r){var n=32;return(r&=-r)&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}l.INT_BITS=32,l.INT_MAX=2147483647,l.INT_MIN=-2147483648,l.sign=function(r){return(r>0)-(r<0)},l.abs=function(r){var n=r>>31;return(r^n)-n},l.min=function(r,n){return n^(r^n)&-(r<n)},l.max=function(r,n){return r^(r^n)&-(r<n)},l.isPow2=function(r){return!(r&r-1||!r)},l.log2=function(r){var n,a;return n=(r>65535)<<4,n|=a=((r>>>=n)>255)<<3,n|=a=((r>>>=a)>15)<<2,(n|=a=((r>>>=a)>3)<<1)|(r>>>=a)>>1},l.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},l.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},l.countTrailingZeros=t,l.nextPow2=function(r){return r+=0===r,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,1+((r|=r>>>8)|r>>>16)},l.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},l.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var i=new Array(256);(function(r){for(var n=0;n<256;++n){var a=n,s=n,c=7;for(a>>>=1;a;a>>>=1)s<<=1,s|=1&a,--c;r[n]=s<<c&255}})(i),l.reverse=function(r){return i[255&r]<<24|i[r>>>8&255]<<16|i[r>>>16&255]<<8|i[r>>>24&255]},l.interleave2=function(r,n){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))<<1},l.deinterleave2=function(r,n){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>n&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},l.interleave3=function(r,n,a){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<1)|(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<2},l.deinterleave3=function(r,n){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>n&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},l.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>t(r)+1}},2014:function(p,l,t){"use strict";var i=t(3105),r=t(4623);function n(d,m){var g=d.length,x=d.length-m.length,v=Math.min;if(x)return x;switch(g){case 0:return 0;case 1:return d[0]-m[0];case 2:return(C=d[0]+d[1]-m[0]-m[1])||v(d[0],d[1])-v(m[0],m[1]);case 3:var _=d[0]+d[1],f=m[0]+m[1];if(C=_+d[2]-(f+m[2]))return C;var C,w=v(d[0],d[1]),E=v(m[0],m[1]);return(C=v(w,d[2])-v(E,m[2]))||v(w+d[2],_)-v(E+m[2],f);default:var P=d.slice(0);P.sort();var L=m.slice(0);L.sort();for(var O=0;O<g;++O)if(x=P[O]-L[O])return x;return 0}}function a(d,m){return n(d[0],m[0])}function s(d,m){if(m){for(var g=d.length,x=new Array(g),v=0;v<g;++v)x[v]=[d[v],m[v]];for(x.sort(a),v=0;v<g;++v)d[v]=x[v][0],m[v]=x[v][1];return d}return d.sort(n),d}function c(d){if(0===d.length)return[];for(var m=1,g=d.length,x=1;x<g;++x){var v=d[x];if(n(v,d[x-1])){if(x===m){m++;continue}d[m++]=v}}return d.length=m,d}function h(d,m){for(var g=0,x=d.length-1,v=-1;g<=x;){var _=g+x>>1,f=n(d[_],m);f<=0?(0===f&&(v=_),g=_+1):f>0&&(x=_-1)}return v}function u(d,m){for(var g=new Array(d.length),x=0,v=g.length;x<v;++x)g[x]=[];for(var _=[],f=(x=0,m.length);x<f;++x)for(var C=m[x],w=C.length,E=1,P=1<<w;E<P;++E){_.length=i.popCount(E);for(var L=0,O=0;O<w;++O)E&1<<O&&(_[L++]=C[O]);var z=h(d,_);if(!(z<0))for(;g[z++].push(x),!(z>=d.length||0!==n(d[z],_)););}return g}function y(d,m){if(m<0)return[];for(var g=[],x=(1<<m+1)-1,v=0;v<d.length;++v)for(var _=d[v],f=x;f<1<<_.length;f=i.nextCombination(f)){for(var C=new Array(m+1),w=0,E=0;E<_.length;++E)f&1<<E&&(C[w++]=_[E]);g.push(C)}return s(g)}l.dimension=function(d){for(var m=0,g=Math.max,x=0,v=d.length;x<v;++x)m=g(m,d[x].length);return m-1},l.countVertices=function(d){for(var m=-1,g=Math.max,x=0,v=d.length;x<v;++x)for(var _=d[x],f=0,C=_.length;f<C;++f)m=g(m,_[f]);return m+1},l.cloneCells=function(d){for(var m=new Array(d.length),g=0,x=d.length;g<x;++g)m[g]=d[g].slice(0);return m},l.compareCells=n,l.normalize=s,l.unique=c,l.findCell=h,l.incidence=u,l.dual=function(d,m){if(!m)return u(c(y(d,0)),d);for(var g=new Array(m),x=0;x<m;++x)g[x]=[];x=0;for(var v=d.length;x<v;++x)for(var _=d[x],f=0,C=_.length;f<C;++f)g[_[f]].push(x);return g},l.explode=function(d){for(var m=[],g=0,x=d.length;g<x;++g)for(var v=d[g],_=0|v.length,f=1,C=1<<_;f<C;++f){for(var w=[],E=0;E<_;++E)f>>>E&1&&w.push(v[E]);m.push(w)}return s(m)},l.skeleton=y,l.boundary=function(d){for(var m=[],g=0,x=d.length;g<x;++g)for(var v=d[g],_=0,f=v.length;_<f;++_){for(var C=new Array(v.length-1),w=0,E=0;w<f;++w)w!==_&&(C[E++]=v[w]);m.push(C)}return s(m)},l.connectedComponents=function(d,m){return m?function(g,x){for(var v=new r(x),_=0;_<g.length;++_)for(var f=g[_],C=0;C<f.length;++C)for(var w=C+1;w<f.length;++w)v.link(f[C],f[w]);var E=[],P=v.ranks;for(_=0;_<P.length;++_)P[_]=-1;for(_=0;_<g.length;++_){var L=v.find(g[_][0]);P[L]<0?(P[L]=E.length,E.push([g[_].slice(0)])):E[P[L]].push(g[_].slice(0))}return E}(d,m):function(g){for(var x=c(s(y(g,0))),v=new r(x.length),_=0;_<g.length;++_)for(var f=g[_],C=0;C<f.length;++C)for(var w=h(x,[f[C]]),E=C+1;E<f.length;++E)v.link(w,h(x,[f[E]]));var P=[],L=v.ranks;for(_=0;_<L.length;++_)L[_]=-1;for(_=0;_<g.length;++_){var O=v.find(h(x,[g[_][0]]));L[O]<0?(L[O]=P.length,P.push([g[_].slice(0)])):P[L[O]].push(g[_].slice(0))}return P}(d)}},4623:function(p){"use strict";function l(t){this.roots=new Array(t),this.ranks=new Array(t);for(var i=0;i<t;++i)this.roots[i]=i,this.ranks[i]=0}p.exports=l,l.prototype.length=function(){return this.roots.length},l.prototype.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},l.prototype.find=function(t){for(var i=this.roots;i[t]!==t;){var r=i[t];i[t]=i[r],t=r}return t},l.prototype.link=function(t,i){var r=this.find(t),n=this.find(i);if(r!==n){var a=this.ranks,s=this.roots,c=a[r],h=a[n];c<h?s[r]=n:h<c?s[n]=r:(s[n]=r,++a[r])}}},5878:function(p,l,t){"use strict";p.exports=function(n,a,s){for(var c=a.length,h=n.length,u=new Array(c),y=new Array(c),d=new Array(c),m=new Array(c),g=0;g<c;++g)u[g]=y[g]=-1,d[g]=1/0,m[g]=!1;for(g=0;g<h;++g){var x=n[g];if(2!==x.length)throw new Error("Input must be a graph");var v=x[1],_=x[0];y[_]=-1!==y[_]?-2:v,u[v]=-1!==u[v]?-2:_}function f(re){if(m[re])return 1/0;var Q,$,X=u[re],oe=y[re];return X<0||oe<0?1/0:(Q=a[X],$=a[oe],Math.abs(i(a[re],Q,$))/Math.sqrt(Math.pow(Q[0]-$[0],2)+Math.pow(Q[1]-$[1],2)))}function C(re,ne){var Q=R[re],$=R[ne];R[re]=$,R[ne]=Q,U[Q]=ne,U[$]=re}function w(re){return d[R[re]]}function E(re){return 1&re?re-1>>1:(re>>1)-1}function P(re){for(var ne=w(re);;){var Q=ne,$=2*re+1,X=2*(re+1),oe=re;if($<Z){var fe=w($);fe<Q&&(oe=$,Q=fe)}if(X<Z&&w(X)<Q&&(oe=X),oe===re)return re;C(re,oe),re=oe}}function L(re){for(var ne=w(re);re>0;){var Q=E(re);if(!(Q>=0&&ne<w(Q)))return re;C(re,Q),re=Q}}function O(){if(Z>0){var re=R[0];return C(0,Z-1),Z-=1,P(0),re}return-1}function z(re,ne){var Q=R[re];return d[Q]===ne?re:(d[Q]=-1/0,L(re),O(),d[Q]=ne,L((Z+=1)-1))}function V(re){if(!m[re]){m[re]=!0;var ne=u[re],Q=y[re];u[Q]>=0&&(u[Q]=ne),y[ne]>=0&&(y[ne]=Q),U[ne]>=0&&z(U[ne],f(ne)),U[Q]>=0&&z(U[Q],f(Q))}}var R=[],U=new Array(c);for(g=0;g<c;++g)(d[g]=f(g))<1/0?(U[g]=R.length,R.push(g)):U[g]=-1;var Z=R.length;for(g=Z>>1;g>=0;--g)P(g);for(;;){var N=O();if(N<0||d[N]>s)break;V(N)}var G=[];for(g=0;g<c;++g)m[g]||(U[g]=G.length,G.push(a[g].slice()));function W(re,ne){if(re[ne]<0)return ne;var Q=ne,$=ne;do{var X=re[$];if(!m[$]||X<0||X===$||(X=re[$=X],!m[$]||X<0||X===$))break;$=X,Q=re[Q]}while(Q!==$);for(var oe=ne;oe!==$;oe=re[oe])re[oe]=$;return $}var ae=[];return n.forEach(function(re){var ne=W(u,re[0]),Q=W(y,re[1]);if(ne>=0&&Q>=0&&ne!==Q){var $=U[ne],X=U[Q];$!==X&&ae.push([$,X])}}),r.unique(r.normalize(ae)),{positions:G,edges:ae}};var i=t(3250),r=t(2014)},1303:function(p,l,t){"use strict";p.exports=function(n,a){var s,c,h,u;if(a[0][0]<a[1][0])s=a[0],c=a[1];else{if(!(a[0][0]>a[1][0]))return r(a,n);s=a[1],c=a[0]}if(n[0][0]<n[1][0])h=n[0],u=n[1];else{if(!(n[0][0]>n[1][0]))return-r(n,a);h=n[1],u=n[0]}var y=i(s,c,u),d=i(s,c,h);if(y<0){if(d<=0)return y}else if(y>0){if(d>=0)return y}else if(d)return d;if(y=i(u,h,c),d=i(u,h,s),y<0){if(d<=0)return y}else if(y>0){if(d>=0)return y}else if(d)return d;return c[0]-u[0]};var i=t(3250);function r(n,a){var s,c,h,u;if(a[0][0]<a[1][0])s=a[0],c=a[1];else{if(!(a[0][0]>a[1][0])){var y=Math.min(n[0][1],n[1][1]),d=Math.max(n[0][1],n[1][1]),m=Math.min(a[0][1],a[1][1]),g=Math.max(a[0][1],a[1][1]);return d<m?d-m:y>g?y-g:d-g}s=a[1],c=a[0]}n[0][1]<n[1][1]?(h=n[0],u=n[1]):(h=n[1],u=n[0]);var x=i(c,s,h);return x||(x=i(c,s,u))||u-c}},4209:function(p,l,t){"use strict";p.exports=function(d){for(var m=d.length,g=2*m,x=new Array(g),v=0;v<m;++v){var _=d[v],f=_[0][0]<_[1][0];x[2*v]=new y(_[0][0],_,f,v),x[2*v+1]=new y(_[1][0],_,!f,v)}x.sort(function(V,R){var U=V.x-R.x;return U||(U=V.create-R.create)||Math.min(V.segment[0][1],V.segment[1][1])-Math.min(R.segment[0][1],R.segment[1][1])});var C=r(a),w=[],E=[],P=[];for(v=0;v<g;){for(var L=x[v].x,O=[];v<g;){var z=x[v];if(z.x!==L)break;v+=1,z.segment[0][0]===z.x&&z.segment[1][0]===z.x?z.create&&(z.segment[0][1]<z.segment[1][1]?(O.push(new u(z.segment[0][1],z.index,!0,!0)),O.push(new u(z.segment[1][1],z.index,!1,!1))):(O.push(new u(z.segment[1][1],z.index,!0,!1)),O.push(new u(z.segment[0][1],z.index,!1,!0)))):C=z.create?C.insert(z.segment,z.index):C.remove(z.segment)}w.push(C.root),E.push(L),P.push(O)}return new s(w,E,P)};var i=t(2478),r=t(3840),n=t(3250),a=t(1303);function s(d,m,g){this.slabs=d,this.coordinates=m,this.horizontal=g}function c(d,m){return d.y-m}function h(d,m){for(var g=null;d;){var x,v,_=d.key;_[0][0]<_[1][0]?(x=_[0],v=_[1]):(x=_[1],v=_[0]);var f=n(x,v,m);if(f<0)d=d.left;else if(f>0)if(m[0]!==_[1][0])g=d,d=d.right;else{if(C=h(d.right,m))return C;d=d.left}else{if(m[0]!==_[1][0])return d;var C;if(C=h(d.right,m))return C;d=d.left}}return g}function u(d,m,g,x){this.y=d,this.index=m,this.start=g,this.closed=x}function y(d,m,g,x){this.x=d,this.segment=m,this.create=g,this.index=x}s.prototype.castUp=function(d){var m=i.le(this.coordinates,d[0]);if(m<0)return-1;var g=h(this.slabs[m],d),x=-1;if(g&&(x=g.value),this.coordinates[m]===d[0]){var v=null;if(g&&(v=g.key),m>0){var _=h(this.slabs[m-1],d);_&&(v?a(_.key,v)>0&&(v=_.key,x=_.value):(x=_.value,v=_.key))}var f=this.horizontal[m];if(f.length>0){var C=i.ge(f,d[1],c);if(C<f.length){var w=f[C];if(d[1]===w.y){if(w.closed)return w.index;for(;C<f.length-1&&f[C+1].y===d[1];)if((w=f[C+=1]).closed)return w.index;if(w.y===d[1]&&!w.start){if((C+=1)>=f.length)return x;w=f[C]}}if(w.start)if(v){var E=n(v[0],v[1],[d[0],w.y]);v[0][0]>v[1][0]&&(E=-E),E>0&&(x=w.index)}else x=w.index;else w.y!==d[1]&&(x=w.index)}}}return x}},5202:function(p,l,t){"use strict";var i=t(1944),r=t(8210);function n(s,c){var h=r(i(s,c),[c[c.length-1]]);return h[h.length-1]}function a(s,c,h,u){var y=-c/(u-c);y<0?y=0:y>1&&(y=1);for(var d=1-y,m=s.length,g=new Array(m),x=0;x<m;++x)g[x]=y*s[x]+d*h[x];return g}p.exports=function(s,c){for(var h=[],u=[],y=n(s[s.length-1],c),d=s[s.length-1],m=s[0],g=0;g<s.length;++g,d=m){var x=n(m=s[g],c);if(y<0&&x>0||y>0&&x<0){var v=a(d,x,m,y);h.push(v),u.push(v.slice())}x<0?u.push(m.slice()):x>0?h.push(m.slice()):(h.push(m.slice()),u.push(m.slice())),y=x}return{positive:h,negative:u}},p.exports.positive=function(s,c){for(var h=[],u=n(s[s.length-1],c),y=s[s.length-1],d=s[0],m=0;m<s.length;++m,y=d){var g=n(d=s[m],c);(u<0&&g>0||u>0&&g<0)&&h.push(a(y,g,d,u)),g>=0&&h.push(d.slice()),u=g}return h},p.exports.negative=function(s,c){for(var h=[],u=n(s[s.length-1],c),y=s[s.length-1],d=s[0],m=0;m<s.length;++m,y=d){var g=n(d=s[m],c);(u<0&&g>0||u>0&&g<0)&&h.push(a(y,g,d,u)),g<=0&&h.push(d.slice()),u=g}return h}},3387:function(p,l,t){var i;!function(){"use strict";var r={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function n(c){return function(h,u){var y,d,m,g,x,v,_,f,C,w=1,E=h.length,P="";for(d=0;d<E;d++)if("string"==typeof h[d])P+=h[d];else if("object"==typeof h[d]){if((g=h[d]).keys)for(y=u[w],m=0;m<g.keys.length;m++){if(null==y)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',g.keys[m],g.keys[m-1]));y=y[g.keys[m]]}else y=g.param_no?u[g.param_no]:u[w++];if(r.not_type.test(g.type)&&r.not_primitive.test(g.type)&&y instanceof Function&&(y=y()),r.numeric_arg.test(g.type)&&"number"!=typeof y&&isNaN(y))throw new TypeError(n("[sprintf] expecting number but found %T",y));switch(r.number.test(g.type)&&(f=y>=0),g.type){case"b":y=parseInt(y,10).toString(2);break;case"c":y=String.fromCharCode(parseInt(y,10));break;case"d":case"i":y=parseInt(y,10);break;case"j":y=JSON.stringify(y,null,g.width?parseInt(g.width):0);break;case"e":y=g.precision?parseFloat(y).toExponential(g.precision):parseFloat(y).toExponential();break;case"f":y=g.precision?parseFloat(y).toFixed(g.precision):parseFloat(y);break;case"g":y=g.precision?String(Number(y.toPrecision(g.precision))):parseFloat(y);break;case"o":y=(parseInt(y,10)>>>0).toString(8);break;case"s":y=String(y),y=g.precision?y.substring(0,g.precision):y;break;case"t":y=String(!!y),y=g.precision?y.substring(0,g.precision):y;break;case"T":y=Object.prototype.toString.call(y).slice(8,-1).toLowerCase(),y=g.precision?y.substring(0,g.precision):y;break;case"u":y=parseInt(y,10)>>>0;break;case"v":y=y.valueOf(),y=g.precision?y.substring(0,g.precision):y;break;case"x":y=(parseInt(y,10)>>>0).toString(16);break;case"X":y=(parseInt(y,10)>>>0).toString(16).toUpperCase()}r.json.test(g.type)?P+=y:(!r.number.test(g.type)||f&&!g.sign?C="":(C=f?"+":"-",y=y.toString().replace(r.sign,"")),v=g.pad_char?"0"===g.pad_char?"0":g.pad_char.charAt(1):" ",_=g.width-(C+y).length,x=g.width&&_>0?v.repeat(_):"",P+=g.align?C+y+x:"0"===v?C+x+y:x+C+y)}return P}(function(h){if(s[h])return s[h];for(var u,y=h,d=[],m=0;y;){if(null!==(u=r.text.exec(y)))d.push(u[0]);else if(null!==(u=r.modulo.exec(y)))d.push("%");else{if(null===(u=r.placeholder.exec(y)))throw new SyntaxError("[sprintf] unexpected placeholder");if(u[2]){m|=1;var g=[],x=u[2],v=[];if(null===(v=r.key.exec(x)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(g.push(v[1]);""!==(x=x.substring(v[0].length));)if(null!==(v=r.key_access.exec(x)))g.push(v[1]);else{if(null===(v=r.index_access.exec(x)))throw new SyntaxError("[sprintf] failed to parse named argument key");g.push(v[1])}u[2]=g}else m|=2;if(3===m)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");d.push({placeholder:u[0],param_no:u[1],keys:u[2],sign:u[3],pad_char:u[4],align:u[5],width:u[6],precision:u[7],type:u[8]})}y=y.substring(u[0].length)}return s[h]=d}(c),arguments)}function a(c,h){return n.apply(null,[c].concat(h||[]))}var s=Object.create(null);l.sprintf=n,l.vsprintf=a,typeof window<"u"&&(window.sprintf=n,window.vsprintf=a,void 0===(i=function(){return{sprintf:n,vsprintf:a}}.call(l,t,l,p))||(p.exports=i))}()},3711:function(p,l,t){"use strict";p.exports=function(s,c){if(s.dimension<=0)return{positions:[],cells:[]};if(1===s.dimension)return function(y,d){for(var m=r(y,d),g=m.length,x=new Array(g),v=new Array(g),_=0;_<g;++_)x[_]=[m[_]],v[_]=[_];return{positions:x,cells:v}}(s,c);var h=s.order.join()+"-"+s.dtype,u=a[h];return c=+c||0,u||(u=a[h]=function(y,d){var g=n[y.length+"d"];if(g)return g(i,y,d)}(s.order,s.dtype)),u(s,c)};var i=t(2640),r=t(781),n={"2d":function(s,c,h){var u=s({order:c,scalarArguments:3,getters:"generic"===h?[0]:void 0,phase:function(y,d,m,g){return y>g|0},vertex:function(y,d,m,g,x,v,_,f,C,w,E,P,L){var O=(_<<0)+(f<<1)+(C<<2)+(w<<3)|0;if(0!==O&&15!==O)switch(O){case 0:case 15:E.push([y-.5,d-.5]);break;case 1:E.push([y-.25-.25*(g+m-2*L)/(m-g),d-.25-.25*(x+m-2*L)/(m-x)]);break;case 2:E.push([y-.75-.25*(-g-m+2*L)/(g-m),d-.25-.25*(v+g-2*L)/(g-v)]);break;case 3:E.push([y-.5,d-.5-.5*(x+m+v+g-4*L)/(m-x+g-v)]);break;case 4:E.push([y-.25-.25*(v+x-2*L)/(x-v),d-.75-.25*(-x-m+2*L)/(x-m)]);break;case 5:E.push([y-.5-.5*(g+m+v+x-4*L)/(m-g+x-v),d-.5]);break;case 6:E.push([y-.5-.25*(-g-m+v+x)/(g-m+x-v),d-.5-.25*(-x-m+v+g)/(x-m+g-v)]);break;case 7:E.push([y-.75-.25*(v+x-2*L)/(x-v),d-.75-.25*(v+g-2*L)/(g-v)]);break;case 8:E.push([y-.75-.25*(-v-x+2*L)/(v-x),d-.75-.25*(-v-g+2*L)/(v-g)]);break;case 9:E.push([y-.5-.25*(g+m+-v-x)/(m-g+v-x),d-.5-.25*(x+m+-v-g)/(m-x+v-g)]);break;case 10:E.push([y-.5-.5*(-g-m-v-x+4*L)/(g-m+v-x),d-.5]);break;case 11:E.push([y-.25-.25*(-v-x+2*L)/(v-x),d-.75-.25*(x+m-2*L)/(m-x)]);break;case 12:E.push([y-.5,d-.5-.5*(-x-m-v-g+4*L)/(x-m+v-g)]);break;case 13:E.push([y-.75-.25*(g+m-2*L)/(m-g),d-.25-.25*(-v-g+2*L)/(v-g)]);break;case 14:E.push([y-.25-.25*(-g-m+2*L)/(g-m),d-.25-.25*(-x-m+2*L)/(x-m)])}},cell:function(y,d,m,g,x,v,_,f,C){f.push(x?[y,d]:[d,y])}});return function(y,d){var m=[],g=[];return u(y,m,g,d),{positions:m,cells:g}}}},a={}},529:function(p,l,t){"use strict";p.exports=function a(s,c,h){var u=(h=h||{}).fontStyle||"normal",y=h.fontWeight||"normal",d=h.fontVariant||"normal",m=[u,y,d,s].join("_"),g=n[m];g||(g=n[m]={" ":{data:new Float32Array(0),shape:.2}});var x=g[c];if(!x)if(c.length<=1||!/\d/.test(c))x=g[c]=function(V){for(var R=V.cells,U=V.positions,Z=new Float32Array(6*R.length),N=0,G=0,W=0;W<R.length;++W)for(var ae=R[W],re=0;re<3;++re){var ne=U[ae[re]];Z[N++]=ne[0],Z[N++]=ne[1]+1.4,G=Math.max(ne[0],G)}return{data:Z,shape:G}}(i(c,{triangles:!0,font:s,fontStyle:u,fontWeight:y,fontVariant:d,textAlign:h.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var v=c.split(/(\d|\s)/),_=new Array(v.length),f=0,C=0,w=0;w<v.length;++w)_[w]=a(s,v[w]),f+=_[w].data.length,C+=_[w].shape,w>0&&(C+=.02);var E=new Float32Array(f),P=0,L=-.5*C;for(w=0;w<_.length;++w){for(var O=_[w].data,z=0;z<O.length;z+=2)E[P++]=O[z]+L,E[P++]=O[z+1];L+=_[w].shape+.02}x=g[c]={data:E,shape:C}}return x};var i=t(4359),r=window||S.global||{},n=r.__TEXT_CACHE||{};r.__TEXT_CACHE={}},665:function(p,l,t){"use strict";var i=t(3202);p.exports=a;var r=96;function n(s,c){var h=i(getComputedStyle(s).getPropertyValue(c));return h[0]*a(h[1],s)}function a(s,c){switch(c=c||document.body,s=(s||"px").trim().toLowerCase(),c!==window&&c!==document||(c=document.body),s){case"%":return c.clientHeight/100;case"ch":case"ex":return function(h,u){var y=document.createElement("div");y.style["font-size"]="128"+h,u.appendChild(y);var d=n(y,"font-size")/128;return u.removeChild(y),d}(s,c);case"em":return n(c,"font-size");case"rem":return n(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return r;case"cm":return r/2.54;case"mm":return r/25.4;case"pt":return r/72;case"pc":return r/6}return 1}},7261:function(p,l,t){"use strict";p.exports=function(x){var v=(x=x||{}).center||[0,0,0],_=x.up||[0,1,0],f=x.right||y(_),C=x.radius||1,w=x.theta||0,E=x.phi||0;if(v=[].slice.call(v,0,3),_=[].slice.call(_,0,3),s(_,_),f=[].slice.call(f,0,3),s(f,f),"eye"in x){var P=x.eye,L=[P[0]-v[0],P[1]-v[1],P[2]-v[2]];a(f,L,_),h(f[0],f[1],f[2])<1e-6?f=y(_):s(f,f),C=h(L[0],L[1],L[2]);var O=c(_,L)/C,z=c(f,L)/C;E=Math.acos(O),w=Math.acos(z)}return C=Math.log(C),new d(x.zoomMin,x.zoomMax,v,_,f,C,w,E)};var i=t(9215),r=t(7608),n=t(6079),a=t(5911),s=t(3536),c=t(244);function h(x,v,_){return Math.sqrt(Math.pow(x,2)+Math.pow(v,2)+Math.pow(_,2))}function u(x){return Math.min(1,Math.max(-1,x))}function y(x){var v=Math.abs(x[0]),_=Math.abs(x[1]),f=Math.abs(x[2]),C=[0,0,0];v>Math.max(_,f)?C[2]=1:_>Math.max(v,f)?C[0]=1:C[1]=1;for(var w=0,E=0,P=0;P<3;++P)w+=x[P]*x[P],E+=C[P]*x[P];for(P=0;P<3;++P)C[P]-=E/w*x[P];return s(C,C),C}function d(x,v,_,f,C,w,E,P){this.center=i(_),this.up=i(f),this.right=i(C),this.radius=i([w]),this.angle=i([E,P]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(x,v),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var L=0;L<16;++L)this.computedMatrix[L]=.5;this.recalcMatrix(0)}var m=d.prototype;m.setDistanceLimits=function(x,v){x=x>0?Math.log(x):-1/0,v=v>0?Math.log(v):1/0,v=Math.max(v,x),this.radius.bounds[0][0]=x,this.radius.bounds[1][0]=v},m.getDistanceLimits=function(x){var v=this.radius.bounds[0];return x?(x[0]=Math.exp(v[0][0]),x[1]=Math.exp(v[1][0]),x):[Math.exp(v[0][0]),Math.exp(v[1][0])]},m.recalcMatrix=function(x){this.center.curve(x),this.up.curve(x),this.right.curve(x),this.radius.curve(x),this.angle.curve(x);for(var v=this.computedUp,_=this.computedRight,f=0,C=0,w=0;w<3;++w)C+=v[w]*_[w],f+=v[w]*v[w];var E=Math.sqrt(f),P=0;for(w=0;w<3;++w)_[w]-=v[w]*C/f,P+=_[w]*_[w],v[w]/=E;var L=Math.sqrt(P);for(w=0;w<3;++w)_[w]/=L;var O=this.computedToward;a(O,v,_),s(O,O);var z=Math.exp(this.computedRadius[0]),V=this.computedAngle[0],R=this.computedAngle[1],U=Math.cos(V),Z=Math.sin(V),N=Math.cos(R),G=Math.sin(R),W=this.computedCenter,ae=U*N,re=Z*N,ne=G,Q=-U*G,$=-Z*G,X=N,oe=this.computedEye,fe=this.computedMatrix;for(w=0;w<3;++w){var ue=ae*_[w]+re*O[w]+ne*v[w];fe[4*w+1]=Q*_[w]+$*O[w]+X*v[w],fe[4*w+2]=ue,fe[4*w+3]=0}var ge=fe[1],we=fe[5],Te=fe[9],xe=fe[2],ye=fe[6],_e=fe[10],Ie=we*_e-Te*ye,De=Te*xe-ge*_e,be=ge*ye-we*xe,he=h(Ie,De,be);for(De/=he,be/=he,fe[0]=Ie/=he,fe[4]=De,fe[8]=be,w=0;w<3;++w)oe[w]=W[w]+fe[2+4*w]*z;for(w=0;w<3;++w){P=0;for(var ce=0;ce<3;++ce)P+=fe[w+4*ce]*oe[ce];fe[12+w]=-P}fe[15]=1},m.getMatrix=function(x,v){this.recalcMatrix(x);var _=this.computedMatrix;if(v){for(var f=0;f<16;++f)v[f]=_[f];return v}return _};var g=[0,0,0];m.rotate=function(x,v,_,f){if(this.angle.move(x,v,_),f){this.recalcMatrix(x);var C=this.computedMatrix;g[0]=C[2],g[1]=C[6],g[2]=C[10];for(var w=this.computedUp,E=this.computedRight,P=this.computedToward,L=0;L<3;++L)C[4*L]=w[L],C[4*L+1]=E[L],C[4*L+2]=P[L];for(n(C,C,f,g),L=0;L<3;++L)w[L]=C[4*L],E[L]=C[4*L+1];this.up.set(x,w[0],w[1],w[2]),this.right.set(x,E[0],E[1],E[2])}},m.pan=function(x,v,_,f){v=v||0,_=_||0,f=f||0,this.recalcMatrix(x);var C=this.computedMatrix,w=(Math.exp(this.computedRadius[0]),C[1]),E=C[5],P=C[9],L=h(w,E,P),O=C[0],z=C[4],V=C[8],R=O*(w/=L)+z*(E/=L)+V*(P/=L),U=h(O-=w*R,z-=E*R,V-=P*R),Z=(O/=U)*v+w*_,N=(z/=U)*v+E*_,G=(V/=U)*v+P*_;this.center.move(x,Z,N,G);var W=Math.exp(this.computedRadius[0]);W=Math.max(1e-4,W+f),this.radius.set(x,Math.log(W))},m.translate=function(x,v,_,f){this.center.move(x,v||0,_||0,f||0)},m.setMatrix=function(x,v,_,f){var C=1;"number"==typeof _&&(C=0|_),(C<0||C>3)&&(C=1);var w=(C+2)%3;v||(this.recalcMatrix(x),v=this.computedMatrix);var E=v[C],P=v[C+4],L=v[C+8];if(f){var O=Math.abs(E),z=Math.abs(P),V=Math.abs(L),R=Math.max(O,z,V);O===R?(E=E<0?-1:1,P=L=0):V===R?(L=L<0?-1:1,E=P=0):(P=P<0?-1:1,E=L=0)}else{var U=h(E,P,L);E/=U,P/=U,L/=U}var Z,N,G=v[w],W=v[w+4],ae=v[w+8],re=G*E+W*P+ae*L,ne=h(G-=E*re,W-=P*re,ae-=L*re),Q=P*(ae/=ne)-L*(W/=ne),$=L*(G/=ne)-E*ae,X=E*W-P*G,oe=h(Q,$,X);if(Q/=oe,$/=oe,X/=oe,this.center.jump(x,Ce,Oe,Ne),this.radius.idle(x),this.up.jump(x,E,P,L),this.right.jump(x,G,W,ae),2===C){var fe=v[1],ue=v[5],ge=v[9];Z=Ie<0?-Math.PI/2:Math.PI/2,N=Math.atan2(fe*Q+ue*$+ge*X,fe*G+ue*W+ge*ae)}else{var xe=v[2],ye=v[6],_e=v[10],Ie=xe*E+ye*P+_e*L,De=xe*G+ye*W+_e*ae,be=xe*Q+ye*$+_e*X;Z=Math.asin(u(Ie)),N=Math.atan2(be,De)}this.angle.jump(x,N,Z),this.recalcMatrix(x);var he=v[2],ce=v[6],me=v[10],Pe=this.computedMatrix;r(Pe,v);var Ae=Pe[15],Ce=Pe[12]/Ae,Oe=Pe[13]/Ae,Ne=Pe[14]/Ae,je=Math.exp(this.computedRadius[0]);this.center.jump(x,Ce-he*je,Oe-ce*je,Ne-me*je)},m.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},m.idle=function(x){this.center.idle(x),this.up.idle(x),this.right.idle(x),this.radius.idle(x),this.angle.idle(x)},m.flush=function(x){this.center.flush(x),this.up.flush(x),this.right.flush(x),this.radius.flush(x),this.angle.flush(x)},m.setDistance=function(x,v){v>0&&this.radius.set(x,Math.log(v))},m.lookAt=function(x,v,_,f){this.recalcMatrix(x),v=v||this.computedEye,_=_||this.computedCenter;var C=(f=f||this.computedUp)[0],w=f[1],E=f[2],P=h(C,w,E);if(!(P<1e-6)){C/=P,w/=P,E/=P;var L=v[0]-_[0],O=v[1]-_[1],z=v[2]-_[2],V=h(L,O,z);if(!(V<1e-6)){L/=V,O/=V,z/=V;var R=this.computedRight,U=R[0],Z=R[1],N=R[2],G=C*U+w*Z+E*N,W=h(U-=G*C,Z-=G*w,N-=G*E);if(!(W<.01&&(W=h(U=w*z-E*O,Z=E*L-C*z,N=C*O-w*L))<1e-6)){U/=W,Z/=W,N/=W,this.up.set(x,C,w,E),this.right.set(x,U,Z,N),this.center.set(x,_[0],_[1],_[2]),this.radius.set(x,Math.log(V));var ae=w*N-E*Z,re=E*U-C*N,ne=C*Z-w*U,Q=h(ae,re,ne),X=U*L+Z*O+N*z,oe=(ae/=Q)*L+(re/=Q)*O+(ne/=Q)*z,fe=Math.asin(u(C*L+w*O+E*z)),ue=Math.atan2(oe,X),ge=this.angle._state,we=ge[ge.length-1],Te=ge[ge.length-2];we%=2*Math.PI;var xe=Math.abs(we+2*Math.PI-ue),ye=Math.abs(we-ue),_e=Math.abs(we-2*Math.PI-ue);xe<ye&&(we+=2*Math.PI),_e<ye&&(we-=2*Math.PI),this.angle.jump(this.angle.lastT(),we,Te),this.angle.set(x,ue,fe)}}}}},5250:function(p){"use strict";p.exports=function(t,i,r){var n=t*i,a=l*t,s=a-(a-t),c=t-s,h=l*i,u=h-(h-i),y=i-u,d=c*y-(n-s*u-c*u-s*y);return r?(r[0]=d,r[1]=n,r):[d,n]};var l=+(Math.pow(2,27)+1)},9362:function(p){"use strict";p.exports=function(l,t,i){var r=l+t,n=r-l,a=t-n,s=l-(r-n);return i?(i[0]=s+a,i[1]=r,i):[s+a,r]}},1888:function(p,l,t){"use strict";var i=t(8828),r=t(1338),n=t(4793).hp;t.g.__TYPEDARRAY_POOL||(t.g.__TYPEDARRAY_POOL={UINT8:r([32,0]),UINT16:r([32,0]),UINT32:r([32,0]),BIGUINT64:r([32,0]),INT8:r([32,0]),INT16:r([32,0]),INT32:r([32,0]),BIGINT64:r([32,0]),FLOAT:r([32,0]),DOUBLE:r([32,0]),DATA:r([32,0]),UINT8C:r([32,0]),BUFFER:r([32,0])});var a=typeof Uint8ClampedArray<"u",s=typeof BigUint64Array<"u",c=typeof BigInt64Array<"u",h=t.g.__TYPEDARRAY_POOL;h.UINT8C||(h.UINT8C=r([32,0])),h.BIGUINT64||(h.BIGUINT64=r([32,0])),h.BIGINT64||(h.BIGINT64=r([32,0])),h.BUFFER||(h.BUFFER=r([32,0]));var u=h.DATA,y=h.BUFFER;function d(R){if(R){var Z=i.log2(R.length||R.byteLength);u[Z].push(R)}}function m(R){R=i.nextPow2(R);var U=i.log2(R),Z=u[U];return Z.length>0?Z.pop():new ArrayBuffer(R)}function g(R){return new Uint8Array(m(R),0,R)}function x(R){return new Uint16Array(m(2*R),0,R)}function v(R){return new Uint32Array(m(4*R),0,R)}function _(R){return new Int8Array(m(R),0,R)}function f(R){return new Int16Array(m(2*R),0,R)}function C(R){return new Int32Array(m(4*R),0,R)}function w(R){return new Float32Array(m(4*R),0,R)}function E(R){return new Float64Array(m(8*R),0,R)}function P(R){return a?new Uint8ClampedArray(m(R),0,R):g(R)}function L(R){return s?new BigUint64Array(m(8*R),0,R):null}function O(R){return c?new BigInt64Array(m(8*R),0,R):null}function z(R){return new DataView(m(R),0,R)}function V(R){R=i.nextPow2(R);var U=i.log2(R),Z=y[U];return Z.length>0?Z.pop():new n(R)}l.free=function(R){if(n.isBuffer(R))y[i.log2(R.length)].push(R);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(R)&&(R=R.buffer),!R)return;var Z=0|i.log2(R.length||R.byteLength);u[Z].push(R)}},l.freeUint8=l.freeUint16=l.freeUint32=l.freeBigUint64=l.freeInt8=l.freeInt16=l.freeInt32=l.freeBigInt64=l.freeFloat32=l.freeFloat=l.freeFloat64=l.freeDouble=l.freeUint8Clamped=l.freeDataView=function(R){d(R.buffer)},l.freeArrayBuffer=d,l.freeBuffer=function(R){y[i.log2(R.length)].push(R)},l.malloc=function(R,U){if(void 0===U||"arraybuffer"===U)return m(R);switch(U){case"uint8":return g(R);case"uint16":return x(R);case"uint32":return v(R);case"int8":return _(R);case"int16":return f(R);case"int32":return C(R);case"float":case"float32":return w(R);case"double":case"float64":return E(R);case"uint8_clamped":return P(R);case"bigint64":return O(R);case"biguint64":return L(R);case"buffer":return V(R);case"data":case"dataview":return z(R);default:return null}return null},l.mallocArrayBuffer=m,l.mallocUint8=g,l.mallocUint16=x,l.mallocUint32=v,l.mallocInt8=_,l.mallocInt16=f,l.mallocInt32=C,l.mallocFloat32=l.mallocFloat=w,l.mallocFloat64=l.mallocDouble=E,l.mallocUint8Clamped=P,l.mallocBigUint64=L,l.mallocBigInt64=O,l.mallocDataView=z,l.mallocBuffer=V,l.clearCache=function(){for(var R=0;R<32;++R)h.UINT8[R].length=0,h.UINT16[R].length=0,h.UINT32[R].length=0,h.INT8[R].length=0,h.INT16[R].length=0,h.INT32[R].length=0,h.FLOAT[R].length=0,h.DOUBLE[R].length=0,h.BIGUINT64[R].length=0,h.BIGINT64[R].length=0,h.UINT8C[R].length=0,u[R].length=0,y[R].length=0}},1755:function(p){"use strict";function l(i){this.roots=new Array(i),this.ranks=new Array(i);for(var r=0;r<i;++r)this.roots[r]=r,this.ranks[r]=0}p.exports=l;var t=l.prototype;Object.defineProperty(t,"length",{get:function(){return this.roots.length}}),t.makeSet=function(){var i=this.roots.length;return this.roots.push(i),this.ranks.push(0),i},t.find=function(i){for(var r=i,n=this.roots;n[i]!==i;)i=n[i];for(;n[r]!==i;){var a=n[r];n[r]=i,r=a}return i},t.link=function(i,r){var n=this.find(i),a=this.find(r);if(n!==a){var s=this.ranks,c=this.roots,h=s[n],u=s[a];h<u?c[n]=a:u<h?c[a]=n:(c[a]=n,++s[n])}}},1682:function(p){"use strict";p.exports=function(l,t,i){return 0===l.length?l:t?(i||l.sort(t),function(r,n){for(var a=1,s=r.length,c=r[0],h=r[0],u=1;u<s;++u)if(h=c,n(c=r[u],h)){if(u===a){a++;continue}r[a++]=c}return r.length=a,r}(l,t)):(i||l.sort(),function(r){for(var n=1,a=r.length,s=r[0],c=r[0],h=1;h<a;++h,c=s)if(c=s,(s=r[h])!==c){if(h===n){n++;continue}r[n++]=s}return r.length=n,r}(l))}},4359:function(p,l,t){"use strict";p.exports=function(a,s){return"object"==typeof s&&null!==s||(s={}),i(a,s.canvas||r,s.context||n,s)};var i=t(7718),r=null,n=null;typeof document<"u"&&((r=document.createElement("canvas")).width=8192,r.height=1024,n=r.getContext("2d"))},7718:function(p,l,t){p.exports=function(L,O,z,V){var R=64,U=1.25,Z={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return V&&(V.size&&V.size>0&&(R=V.size),V.lineSpacing&&V.lineSpacing>0&&(U=V.lineSpacing),V.styletags&&V.styletags.breaklines&&(Z.breaklines=!!V.styletags.breaklines),V.styletags&&V.styletags.bolds&&(Z.bolds=!!V.styletags.bolds),V.styletags&&V.styletags.italics&&(Z.italics=!!V.styletags.italics),V.styletags&&V.styletags.subscripts&&(Z.subscripts=!!V.styletags.subscripts),V.styletags&&V.styletags.superscripts&&(Z.superscripts=!!V.styletags.superscripts)),z.font=[V.fontStyle,V.fontVariant,V.fontWeight,R+"px",V.font].filter(function(N){return N}).join(" "),z.textAlign="start",z.textBaseline="alphabetic",z.direction="ltr",P(function(N,G,W,ae,re,ne){W=(W=W.replace(/\n/g,"")).replace(/\<br\>/g,!0===ne.breaklines?"\n":" ");var Q="",$=[];for(ue=0;ue<W.length;++ue)$[ue]=Q;!0===ne.bolds&&($=C(h,u,W,$)),!0===ne.italics&&($=C(y,d,W,$)),!0===ne.superscripts&&($=C(m,x,W,$)),!0===ne.subscripts&&($=C(v,f,W,$));var X=[],oe="";for(ue=0;ue<W.length;++ue)null!==$[ue]&&(oe+=W[ue],X.push($[ue]));var fe,ue,ge,we,Te,xe=oe.split("\n"),ye=xe.length,_e=Math.round(re*ae),Ie=ae,De=2*ae,be=0,he=ye*_e+De;N.height<he&&(N.height=he),G.fillStyle="#000",G.fillRect(0,0,N.width,N.height),G.fillStyle="#fff";var ce=0,me="";function Pe(){if(""!==me){var Le=G.measureText(me).width;G.fillText(me,Ie+ge,De+we),ge+=Le}}function Ae(){return Math.round(Te)+"px "}function Ce(Le,Ue){var ze=""+G.font;if(!0===ne.subscripts){var qe=Le.indexOf(_),Ke=Ue.indexOf(_),it=qe>-1?parseInt(Le[1+qe]):0,ft=Ke>-1?parseInt(Ue[1+Ke]):0;it!==ft&&(ze=ze.replace(Ae(),"?px "),Te*=Math.pow(.75,ft-it),ze=ze.replace("?px ",Ae())),we+=.25*_e*(ft-it)}if(!0===ne.superscripts){var dt=Le.indexOf(g),kt=Ue.indexOf(g),St=dt>-1?parseInt(Le[1+dt]):0,Tt=kt>-1?parseInt(Ue[1+kt]):0;St!==Tt&&(ze=ze.replace(Ae(),"?px "),Te*=Math.pow(.75,Tt-St),ze=ze.replace("?px ",Ae())),we-=.25*_e*(Tt-St)}if(!0===ne.bolds){var lt=Le.indexOf(u)>-1,ot=Ue.indexOf(u)>-1;!lt&&ot&&(ze=Rt?ze.replace("italic ","italic bold "):"bold "+ze),lt&&!ot&&(ze=ze.replace("bold ",""))}if(!0===ne.italics){var Rt=Le.indexOf(d)>-1,Vt=Ue.indexOf(d)>-1;!Rt&&Vt&&(ze="italic "+ze),Rt&&!Vt&&(ze=ze.replace("italic ",""))}G.font=ze}for(fe=0;fe<ye;++fe){var Oe=xe[fe]+"\n";for(ge=0,we=fe*_e,Te=ae,me="",ue=0;ue<Oe.length;++ue){var Ne=ue+ce<X.length?X[ue+ce]:X[X.length-1];Q===Ne?me+=Oe[ue]:(Pe(),me=Oe[ue],void 0!==Ne&&(Ce(Q,Ne),Q=Ne))}Pe(),ce+=Oe.length;var je=0|Math.round(ge+2*Ie);be<je&&(be=je)}var ve=be,Me=De+_e*ye;return r(G.getImageData(0,0,ve,Me).data,[Me,ve,4]).pick(-1,-1,0).transpose(1,0)}(O,z,L,R,U,Z),V,R)},p.exports.processPixels=P;var i=t(3711),r=t(9618),n=t(5878),a=t(332),s=t(2538),c=t(2095),h="b",u="b|",y="i",d="i|",m="sup",g="+",x="+1",v="sub",_="-",f="-1";function C(L,O,z,V){for(var R="<"+L+">",U="</"+L+">",Z=R.length,N=U.length,G=O[0]===g||O[0]===_,W=0,ae=-N;W>-1&&-1!==(W=z.indexOf(R,W))&&-1!==(ae=z.indexOf(U,W+Z))&&!(ae<=W);){for(var re=W;re<ae+N;++re)if(re<W+Z||re>=ae)V[re]=null,z=z.substr(0,re)+" "+z.substr(re+1);else if(null!==V[re]){var ne=V[re].indexOf(O[0]);-1===ne?V[re]+=O:G&&(V[re]=V[re].substr(0,ne+1)+(1+parseInt(V[re][ne+1]))+V[re].substr(ne+2))}var Q=W+Z,$=z.substr(Q,ae-Q).indexOf(R);W=-1!==$?$:ae+N}return V}function E(L,O,z,V){var R=function w(L,O){var z=i(L,128);return O?n(z.cells,z.positions,.25):{edges:z.cells,positions:z.positions}}(L,V),U=function(fe,ue,ge){for(var we=ue.textAlign||"start",Te=ue.textBaseline||"alphabetic",xe=[1<<30,1<<30],ye=[0,0],_e=fe.length,Ie=0;Ie<_e;++Ie)for(var De=fe[Ie],be=0;be<2;++be)xe[be]=0|Math.min(xe[be],De[be]),ye[be]=0|Math.max(ye[be],De[be]);var he=0;switch(we){case"center":he=-.5*(xe[0]+ye[0]);break;case"right":case"end":he=-ye[0];break;case"left":case"start":he=-xe[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+we+"'")}var ce=0;switch(Te){case"hanging":case"top":ce=-xe[1];break;case"middle":ce=-.5*(xe[1]+ye[1]);break;case"alphabetic":case"ideographic":ce=-3*ge;break;case"bottom":ce=-ye[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+Te+"'")}var me=1/ge;return"lineHeight"in ue?me*=+ue.lineHeight:"width"in ue?me=ue.width/(ye[0]-xe[0]):"height"in ue&&(me=ue.height/(ye[1]-xe[1])),fe.map(function(Pe){return[me*(Pe[0]+he),me*(Pe[1]+ce)]})}(R.positions,O,z),Z=R.edges,N="ccw"===O.orientation;if(a(U,Z),O.polygons||O.polygon||O.polyline){for(var G=c(Z,U),W=new Array(G.length),ae=0;ae<G.length;++ae){for(var re=G[ae],ne=new Array(re.length),Q=0;Q<re.length;++Q){for(var $=re[Q],X=new Array($.length),oe=0;oe<$.length;++oe)X[oe]=U[$[oe]].slice();N&&X.reverse(),ne[Q]=X}W[ae]=ne}return W}return O.triangles||O.triangulate||O.triangle?{cells:s(U,Z,{delaunay:!1,exterior:!1,interior:!0}),positions:U}:{edges:Z,positions:U}}function P(L,O,z){try{return E(L,O,z,!0)}catch{}try{return E(L,O,z,!1)}catch{}return O.polygons||O.polyline||O.polygon?[]:O.triangles||O.triangulate||O.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},1538:function(p){!function(){"use strict";if(typeof ses>"u"||!ses.ok||ses.ok()){typeof ses<"u"&&(ses.weakMapPermitHostObjects=v);var l=!1;if("function"==typeof WeakMap){var t=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var i=new t,r=Object.freeze({});if(i.set(r,1),1===i.get(r))return void(p.exports=WeakMap);l=!0}}var n=Object.getOwnPropertyNames,a=Object.defineProperty,s=Object.isExtensible,c="weakmap:",h=c+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var u=new ArrayBuffer(25),y=new Uint8Array(u);crypto.getRandomValues(y),h=c+"rand:"+Array.prototype.map.call(y,function(E){return(E%36).toString(36)}).join("")+"___"}if(a(Object,"getOwnPropertyNames",{value:function(E){return n(E).filter(_)}}),"getPropertyNames"in Object){var d=Object.getPropertyNames;a(Object,"getPropertyNames",{value:function(E){return d(E).filter(_)}})}!function(){var E=Object.freeze;a(Object,"freeze",{value:function(O){return f(O),E(O)}});var P=Object.seal;a(Object,"seal",{value:function(O){return f(O),P(O)}});var L=Object.preventExtensions;a(Object,"preventExtensions",{value:function(O){return f(O),L(O)}})}();var m=!1,g=0,x=function(){this instanceof x||w();var E=[],P=[],L=g++;return Object.create(x.prototype,{get___:{value:C(function(O,z){var V,R=f(O);return R?L in R?R[L]:z:(V=E.indexOf(O))>=0?P[V]:z})},has___:{value:C(function(O){var z=f(O);return z?L in z:E.indexOf(O)>=0})},set___:{value:C(function(O,z){var V,R=f(O);return R?R[L]=z:(V=E.indexOf(O))>=0?P[V]=z:(P[V=E.length]=z,E[V]=O),this})},delete___:{value:C(function(O){var z,V,R=f(O);return R?L in R&&delete R[L]:!((z=E.indexOf(O))<0||(V=E.length-1,E[z]=void 0,P[z]=P[V],E[z]=E[V],E.length=V,P.length=V,0))})}})};x.prototype=Object.create(Object.prototype,{get:{value:function(E,P){return this.get___(E,P)},writable:!0,configurable:!0},has:{value:function(E){return this.has___(E)},writable:!0,configurable:!0},set:{value:function(E,P){return this.set___(E,P)},writable:!0,configurable:!0},delete:{value:function(E){return this.delete___(E)},writable:!0,configurable:!0}}),"function"==typeof t?function(){function E(){this instanceof x||w();var P,L=new t,O=void 0,z=!1;return P=l?function(V,R){return L.set(V,R),L.has(V)||(O||(O=new x),O.set(V,R)),this}:function(V,R){if(z)try{L.set(V,R)}catch{O||(O=new x),O.set___(V,R)}else L.set(V,R);return this},Object.create(x.prototype,{get___:{value:C(function(V,R){return O?L.has(V)?L.get(V):O.get___(V,R):L.get(V,R)})},has___:{value:C(function(V){return L.has(V)||!!O&&O.has___(V)})},set___:{value:C(P)},delete___:{value:C(function(V){var R=!!L.delete(V);return O&&O.delete___(V)||R})},permitHostObjects___:{value:C(function(V){if(V!==v)throw new Error("bogus call to permitHostObjects___");z=!0})}})}l&&typeof Proxy<"u"&&(Proxy=void 0),E.prototype=x.prototype,p.exports=E,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),p.exports=x)}function v(E){E.permitHostObjects___&&E.permitHostObjects___(v)}function _(E){return!(E.substr(0,8)==c&&"___"===E.substr(E.length-3))}function f(E){if(E!==Object(E))throw new TypeError("Not an object: "+E);var P=E[h];if(P&&P.key===E)return P;if(s(E)){P={key:E};try{return a(E,h,{value:P,writable:!1,enumerable:!1,configurable:!1}),P}catch{return}}}function C(E){return E.prototype=null,Object.freeze(E)}function w(){m||typeof console>"u"||(m=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},236:function(p,l,t){var i=t(8284);p.exports=function(){var r={};return function(n){if(("object"!=typeof n||null===n)&&"function"!=typeof n)throw new Error("Weakmap-shim: Key must be object");var a=n.valueOf(r);return a&&a.identity===r?a:i(n,r)}}},8284:function(p){p.exports=function(l,t){var i={identity:t},r=l.valueOf;return Object.defineProperty(l,"valueOf",{value:function(n){return n!==t?r.apply(this,arguments):i},writable:!0}),i}},606:function(p,l,t){var i=t(236);p.exports=function(){var r=i();return{get:function(n,a){var s=r(n);return s.hasOwnProperty("value")?s.value:a},set:function(n,a){return r(n).value=a,this},has:function(n){return"value"in r(n)},delete:function(n){return delete r(n).value}}}},3349:function(p){"use strict";var l,t;p.exports=(l=function(){return function(l,t,i,r,n,a){var s=l[0],c=i[0],h=[0],u=c;r|=0;var y=0,d=c;for(y=0;y<s;++y){var m=t[r]-a,g=t[r+u]-a;m>=0!=g>=0&&n.push(h[0]+.5+.5*(m+g)/(m-g)),r+=d,++h[0]}}}.bind(void 0,{funcName:"zeroCrossings"}),t={},function(i,r,n){var a=i.dtype,s=i.order,c=[a,s.join()].join(),h=t[c];return h||(t[c]=h=l([a,s])),h(i.shape.slice(0),i.data,i.stride,0|i.offset,r,n)})},781:function(p,l,t){"use strict";p.exports=function(r,n){var a=[];return n=+n||0,i(r.hi(r.shape[0]-1),a,n),a};var i=t(3349)},7790:function(){}},o={};function T(p){var l=o[p];if(void 0!==l)return l.exports;var t=o[p]={id:p,loaded:!1,exports:{}};return k[p].call(t.exports,t,t.exports,T),t.loaded=!0,t.exports}T.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),T.nmd=function(p){return p.paths=[],p.children||(p.children=[]),p};var b=T(1964);ie.exports=b}()},33576:function(ie,F,e){"use strict";function k(he){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ce){return ce.__proto__||Object.getPrototypeOf(ce)})(he)}function o(he){if(void 0===he)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return he}function T(he,ce){return(T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(me,Pe){return me.__proto__=Pe,me})(he,ce)}function b(he){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ce){return typeof ce}:function(ce){return ce&&"function"==typeof Symbol&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce})(he)}var p=e(59968),l=e(35984),t="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;F.Buffer=n,F.SlowBuffer=function(he){return+he!=he&&(he=0),n.alloc(+he)},F.INSPECT_MAX_BYTES=50;var i=2147483647;function r(he){if(he>i)throw new RangeError('The value "'+he+'" is invalid for option "size"');var ce=new Uint8Array(he);return Object.setPrototypeOf(ce,n.prototype),ce}function n(he,ce,me){if("number"==typeof he){if("string"==typeof ce)throw new TypeError('The "string" argument must be of type string. Received type number');return c(he)}return a(he,ce,me)}function a(he,ce,me){if("string"==typeof he)return function(Ce,Oe){if("string"==typeof Oe&&""!==Oe||(Oe="utf8"),!n.isEncoding(Oe))throw new TypeError("Unknown encoding: "+Oe);var Ne=0|d(Ce,Oe),je=r(Ne),ve=je.write(Ce,Oe);return ve!==Ne&&(je=je.slice(0,ve)),je}(he,ce);if(ArrayBuffer.isView(he))return function(Ce){if(ye(Ce,Uint8Array)){var Oe=new Uint8Array(Ce);return u(Oe.buffer,Oe.byteOffset,Oe.byteLength)}return h(Ce)}(he);if(null==he)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+b(he));if(ye(he,ArrayBuffer)||he&&ye(he.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ye(he,SharedArrayBuffer)||he&&ye(he.buffer,SharedArrayBuffer)))return u(he,ce,me);if("number"==typeof he)throw new TypeError('The "value" argument must not be of type number. Received type number');var Pe=he.valueOf&&he.valueOf();if(null!=Pe&&Pe!==he)return n.from(Pe,ce,me);var Ae=function(Ce){if(n.isBuffer(Ce)){var Oe=0|y(Ce.length),Ne=r(Oe);return 0===Ne.length||Ce.copy(Ne,0,0,Oe),Ne}return void 0!==Ce.length?"number"!=typeof Ce.length||_e(Ce.length)?r(0):h(Ce):"Buffer"===Ce.type&&Array.isArray(Ce.data)?h(Ce.data):void 0}(he);if(Ae)return Ae;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof he[Symbol.toPrimitive])return n.from(he[Symbol.toPrimitive]("string"),ce,me);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+b(he))}function s(he){if("number"!=typeof he)throw new TypeError('"size" argument must be of type number');if(he<0)throw new RangeError('The value "'+he+'" is invalid for option "size"')}function c(he){return s(he),r(he<0?0:0|y(he))}function h(he){for(var ce=he.length<0?0:0|y(he.length),me=r(ce),Pe=0;Pe<ce;Pe+=1)me[Pe]=255&he[Pe];return me}function u(he,ce,me){if(ce<0||he.byteLength<ce)throw new RangeError('"offset" is outside of buffer bounds');if(he.byteLength<ce+(me||0))throw new RangeError('"length" is outside of buffer bounds');var Pe;return Pe=void 0===ce&&void 0===me?new Uint8Array(he):void 0===me?new Uint8Array(he,ce):new Uint8Array(he,ce,me),Object.setPrototypeOf(Pe,n.prototype),Pe}function y(he){if(he>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|he}function d(he,ce){if(n.isBuffer(he))return he.length;if(ArrayBuffer.isView(he)||ye(he,ArrayBuffer))return he.byteLength;if("string"!=typeof he)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+b(he));var me=he.length,Pe=arguments.length>2&&!0===arguments[2];if(!Pe&&0===me)return 0;for(var Ae=!1;;)switch(ce){case"ascii":case"latin1":case"binary":return me;case"utf8":case"utf-8":return we(he).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*me;case"hex":return me>>>1;case"base64":return Te(he).length;default:if(Ae)return Pe?-1:we(he).length;ce=(""+ce).toLowerCase(),Ae=!0}}function m(he,ce,me){var Pe=!1;if((void 0===ce||ce<0)&&(ce=0),ce>this.length||((void 0===me||me>this.length)&&(me=this.length),me<=0)||(me>>>=0)<=(ce>>>=0))return"";for(he||(he="utf8");;)switch(he){case"hex":return R(this,ce,me);case"utf8":case"utf-8":return L(this,ce,me);case"ascii":return z(this,ce,me);case"latin1":case"binary":return V(this,ce,me);case"base64":return P(this,ce,me);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,ce,me);default:if(Pe)throw new TypeError("Unknown encoding: "+he);he=(he+"").toLowerCase(),Pe=!0}}function g(he,ce,me){var Pe=he[ce];he[ce]=he[me],he[me]=Pe}function x(he,ce,me,Pe,Ae){if(0===he.length)return-1;if("string"==typeof me?(Pe=me,me=0):me>2147483647?me=2147483647:me<-2147483648&&(me=-2147483648),_e(me=+me)&&(me=Ae?0:he.length-1),me<0&&(me=he.length+me),me>=he.length){if(Ae)return-1;me=he.length-1}else if(me<0){if(!Ae)return-1;me=0}if("string"==typeof ce&&(ce=n.from(ce,Pe)),n.isBuffer(ce))return 0===ce.length?-1:v(he,ce,me,Pe,Ae);if("number"==typeof ce)return ce&=255,"function"==typeof Uint8Array.prototype.indexOf?Ae?Uint8Array.prototype.indexOf.call(he,ce,me):Uint8Array.prototype.lastIndexOf.call(he,ce,me):v(he,[ce],me,Pe,Ae);throw new TypeError("val must be string, number or Buffer")}function v(he,ce,me,Pe,Ae){var Ce,Oe=1,Ne=he.length,je=ce.length;if(void 0!==Pe&&("ucs2"===(Pe=String(Pe).toLowerCase())||"ucs-2"===Pe||"utf16le"===Pe||"utf-16le"===Pe)){if(he.length<2||ce.length<2)return-1;Oe=2,Ne/=2,je/=2,me/=2}function ve(ze,qe){return 1===Oe?ze[qe]:ze.readUInt16BE(qe*Oe)}if(Ae){var Me=-1;for(Ce=me;Ce<Ne;Ce++)if(ve(he,Ce)===ve(ce,-1===Me?0:Ce-Me)){if(-1===Me&&(Me=Ce),Ce-Me+1===je)return Me*Oe}else-1!==Me&&(Ce-=Ce-Me),Me=-1}else for(me+je>Ne&&(me=Ne-je),Ce=me;Ce>=0;Ce--){for(var Le=!0,Ue=0;Ue<je;Ue++)if(ve(he,Ce+Ue)!==ve(ce,Ue)){Le=!1;break}if(Le)return Ce}return-1}function _(he,ce,me,Pe){me=Number(me)||0;var Ae=he.length-me;Pe?(Pe=Number(Pe))>Ae&&(Pe=Ae):Pe=Ae;var Ce,Oe=ce.length;for(Pe>Oe/2&&(Pe=Oe/2),Ce=0;Ce<Pe;++Ce){var Ne=parseInt(ce.substr(2*Ce,2),16);if(_e(Ne))return Ce;he[me+Ce]=Ne}return Ce}function f(he,ce,me,Pe){return xe(we(ce,he.length-me),he,me,Pe)}function C(he,ce,me,Pe){return xe(function(Ae){for(var Ce=[],Oe=0;Oe<Ae.length;++Oe)Ce.push(255&Ae.charCodeAt(Oe));return Ce}(ce),he,me,Pe)}function w(he,ce,me,Pe){return xe(Te(ce),he,me,Pe)}function E(he,ce,me,Pe){return xe(function(Ae,Ce){for(var Oe,Ne,ve=[],Me=0;Me<Ae.length&&!((Ce-=2)<0);++Me)Ne=(Oe=Ae.charCodeAt(Me))>>8,ve.push(Oe%256),ve.push(Ne);return ve}(ce,he.length-me),he,me,Pe)}function P(he,ce,me){return p.fromByteArray(0===ce&&me===he.length?he:he.slice(ce,me))}function L(he,ce,me){me=Math.min(he.length,me);for(var Pe=[],Ae=ce;Ae<me;){var Ce=he[Ae],Oe=null,Ne=Ce>239?4:Ce>223?3:Ce>191?2:1;if(Ae+Ne<=me){var je=void 0,ve=void 0,Me=void 0,Le=void 0;switch(Ne){case 1:Ce<128&&(Oe=Ce);break;case 2:128==(192&(je=he[Ae+1]))&&(Le=(31&Ce)<<6|63&je)>127&&(Oe=Le);break;case 3:ve=he[Ae+2],128==(192&(je=he[Ae+1]))&&128==(192&ve)&&(Le=(15&Ce)<<12|(63&je)<<6|63&ve)>2047&&(Le<55296||Le>57343)&&(Oe=Le);break;case 4:ve=he[Ae+2],Me=he[Ae+3],128==(192&(je=he[Ae+1]))&&128==(192&ve)&&128==(192&Me)&&(Le=(15&Ce)<<18|(63&je)<<12|(63&ve)<<6|63&Me)>65535&&Le<1114112&&(Oe=Le)}}null===Oe?(Oe=65533,Ne=1):Oe>65535&&(Pe.push((Oe-=65536)>>>10&1023|55296),Oe=56320|1023&Oe),Pe.push(Oe),Ae+=Ne}return function(Ue){var ze=Ue.length;if(ze<=O)return String.fromCharCode.apply(String,Ue);for(var qe="",Ke=0;Ke<ze;)qe+=String.fromCharCode.apply(String,Ue.slice(Ke,Ke+=O));return qe}(Pe)}F.kMaxLength=i,(n.TYPED_ARRAY_SUPPORT=function(){try{var he=new Uint8Array(1),ce={foo:function(){return 42}};return Object.setPrototypeOf(ce,Uint8Array.prototype),Object.setPrototypeOf(he,ce),42===he.foo()}catch{return!1}}())||typeof console>"u"||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.byteOffset}}),n.poolSize=8192,n.from=function(he,ce,me){return a(he,ce,me)},Object.setPrototypeOf(n.prototype,Uint8Array.prototype),Object.setPrototypeOf(n,Uint8Array),n.alloc=function(he,ce,me){return Ae=ce,Ce=me,s(Pe=he),Pe<=0?r(Pe):void 0!==Ae?"string"==typeof Ce?r(Pe).fill(Ae,Ce):r(Pe).fill(Ae):r(Pe);var Pe,Ae,Ce},n.allocUnsafe=function(he){return c(he)},n.allocUnsafeSlow=function(he){return c(he)},n.isBuffer=function(he){return null!=he&&!0===he._isBuffer&&he!==n.prototype},n.compare=function(he,ce){if(ye(he,Uint8Array)&&(he=n.from(he,he.offset,he.byteLength)),ye(ce,Uint8Array)&&(ce=n.from(ce,ce.offset,ce.byteLength)),!n.isBuffer(he)||!n.isBuffer(ce))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(he===ce)return 0;for(var me=he.length,Pe=ce.length,Ae=0,Ce=Math.min(me,Pe);Ae<Ce;++Ae)if(he[Ae]!==ce[Ae]){me=he[Ae],Pe=ce[Ae];break}return me<Pe?-1:Pe<me?1:0},n.isEncoding=function(he){switch(String(he).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(he,ce){if(!Array.isArray(he))throw new TypeError('"list" argument must be an Array of Buffers');if(0===he.length)return n.alloc(0);var me;if(void 0===ce)for(ce=0,me=0;me<he.length;++me)ce+=he[me].length;var Pe=n.allocUnsafe(ce),Ae=0;for(me=0;me<he.length;++me){var Ce=he[me];if(ye(Ce,Uint8Array))Ae+Ce.length>Pe.length?(n.isBuffer(Ce)||(Ce=n.from(Ce)),Ce.copy(Pe,Ae)):Uint8Array.prototype.set.call(Pe,Ce,Ae);else{if(!n.isBuffer(Ce))throw new TypeError('"list" argument must be an Array of Buffers');Ce.copy(Pe,Ae)}Ae+=Ce.length}return Pe},n.byteLength=d,n.prototype._isBuffer=!0,n.prototype.swap16=function(){var he=this.length;if(he%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ce=0;ce<he;ce+=2)g(this,ce,ce+1);return this},n.prototype.swap32=function(){var he=this.length;if(he%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ce=0;ce<he;ce+=4)g(this,ce,ce+3),g(this,ce+1,ce+2);return this},n.prototype.swap64=function(){var he=this.length;if(he%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ce=0;ce<he;ce+=8)g(this,ce,ce+7),g(this,ce+1,ce+6),g(this,ce+2,ce+5),g(this,ce+3,ce+4);return this},n.prototype.toString=function(){var he=this.length;return 0===he?"":0===arguments.length?L(this,0,he):m.apply(this,arguments)},n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=function(he){if(!n.isBuffer(he))throw new TypeError("Argument must be a Buffer");return this===he||0===n.compare(this,he)},n.prototype.inspect=function(){var he="",ce=F.INSPECT_MAX_BYTES;return he=this.toString("hex",0,ce).replace(/(.{2})/g,"$1 ").trim(),this.length>ce&&(he+=" ... "),"<Buffer "+he+">"},t&&(n.prototype[t]=n.prototype.inspect),n.prototype.compare=function(he,ce,me,Pe,Ae){if(ye(he,Uint8Array)&&(he=n.from(he,he.offset,he.byteLength)),!n.isBuffer(he))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+b(he));if(void 0===ce&&(ce=0),void 0===me&&(me=he?he.length:0),void 0===Pe&&(Pe=0),void 0===Ae&&(Ae=this.length),ce<0||me>he.length||Pe<0||Ae>this.length)throw new RangeError("out of range index");if(Pe>=Ae&&ce>=me)return 0;if(Pe>=Ae)return-1;if(ce>=me)return 1;if(this===he)return 0;for(var Ce=(Ae>>>=0)-(Pe>>>=0),Oe=(me>>>=0)-(ce>>>=0),Ne=Math.min(Ce,Oe),je=this.slice(Pe,Ae),ve=he.slice(ce,me),Me=0;Me<Ne;++Me)if(je[Me]!==ve[Me]){Ce=je[Me],Oe=ve[Me];break}return Ce<Oe?-1:Oe<Ce?1:0},n.prototype.includes=function(he,ce,me){return-1!==this.indexOf(he,ce,me)},n.prototype.indexOf=function(he,ce,me){return x(this,he,ce,me,!0)},n.prototype.lastIndexOf=function(he,ce,me){return x(this,he,ce,me,!1)},n.prototype.write=function(he,ce,me,Pe){if(void 0===ce)Pe="utf8",me=this.length,ce=0;else if(void 0===me&&"string"==typeof ce)Pe=ce,me=this.length,ce=0;else{if(!isFinite(ce))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");ce>>>=0,isFinite(me)?(me>>>=0,void 0===Pe&&(Pe="utf8")):(Pe=me,me=void 0)}var Ae=this.length-ce;if((void 0===me||me>Ae)&&(me=Ae),he.length>0&&(me<0||ce<0)||ce>this.length)throw new RangeError("Attempt to write outside buffer bounds");Pe||(Pe="utf8");for(var Ce=!1;;)switch(Pe){case"hex":return _(this,he,ce,me);case"utf8":case"utf-8":return f(this,he,ce,me);case"ascii":case"latin1":case"binary":return C(this,he,ce,me);case"base64":return w(this,he,ce,me);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,he,ce,me);default:if(Ce)throw new TypeError("Unknown encoding: "+Pe);Pe=(""+Pe).toLowerCase(),Ce=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function z(he,ce,me){var Pe="";me=Math.min(he.length,me);for(var Ae=ce;Ae<me;++Ae)Pe+=String.fromCharCode(127&he[Ae]);return Pe}function V(he,ce,me){var Pe="";me=Math.min(he.length,me);for(var Ae=ce;Ae<me;++Ae)Pe+=String.fromCharCode(he[Ae]);return Pe}function R(he,ce,me){var Pe=he.length;(!ce||ce<0)&&(ce=0),(!me||me<0||me>Pe)&&(me=Pe);for(var Ae="",Ce=ce;Ce<me;++Ce)Ae+=Ie[he[Ce]];return Ae}function U(he,ce,me){for(var Pe=he.slice(ce,me),Ae="",Ce=0;Ce<Pe.length-1;Ce+=2)Ae+=String.fromCharCode(Pe[Ce]+256*Pe[Ce+1]);return Ae}function Z(he,ce,me){if(he%1!=0||he<0)throw new RangeError("offset is not uint");if(he+ce>me)throw new RangeError("Trying to access beyond buffer length")}function N(he,ce,me,Pe,Ae,Ce){if(!n.isBuffer(he))throw new TypeError('"buffer" argument must be a Buffer instance');if(ce>Ae||ce<Ce)throw new RangeError('"value" argument is out of bounds');if(me+Pe>he.length)throw new RangeError("Index out of range")}function G(he,ce,me,Pe,Ae){oe(ce,Pe,Ae,he,me,7);var Ce=Number(ce&BigInt(4294967295));he[me++]=Ce,he[me++]=Ce>>=8,he[me++]=Ce>>=8,he[me++]=Ce>>=8;var Oe=Number(ce>>BigInt(32)&BigInt(4294967295));return he[me++]=Oe,he[me++]=Oe>>=8,he[me++]=Oe>>=8,he[me++]=Oe>>=8,me}function W(he,ce,me,Pe,Ae){oe(ce,Pe,Ae,he,me,7);var Ce=Number(ce&BigInt(4294967295));he[me+7]=Ce,he[me+6]=Ce>>=8,he[me+5]=Ce>>=8,he[me+4]=Ce>>=8;var Oe=Number(ce>>BigInt(32)&BigInt(4294967295));return he[me+3]=Oe,he[me+2]=Oe>>=8,he[me+1]=Oe>>=8,he[me]=Oe>>=8,me+8}function ae(he,ce,me,Pe,Ae,Ce){if(me+Pe>he.length)throw new RangeError("Index out of range");if(me<0)throw new RangeError("Index out of range")}function re(he,ce,me,Pe,Ae){return ce=+ce,me>>>=0,Ae||ae(he,0,me,4),l.write(he,ce,me,Pe,23,4),me+4}function ne(he,ce,me,Pe,Ae){return ce=+ce,me>>>=0,Ae||ae(he,0,me,8),l.write(he,ce,me,Pe,52,8),me+8}n.prototype.slice=function(he,ce){var me=this.length;(he=~~he)<0?(he+=me)<0&&(he=0):he>me&&(he=me),(ce=void 0===ce?me:~~ce)<0?(ce+=me)<0&&(ce=0):ce>me&&(ce=me),ce<he&&(ce=he);var Pe=this.subarray(he,ce);return Object.setPrototypeOf(Pe,n.prototype),Pe},n.prototype.readUintLE=n.prototype.readUIntLE=function(he,ce,me){he>>>=0,ce>>>=0,me||Z(he,ce,this.length);for(var Pe=this[he],Ae=1,Ce=0;++Ce<ce&&(Ae*=256);)Pe+=this[he+Ce]*Ae;return Pe},n.prototype.readUintBE=n.prototype.readUIntBE=function(he,ce,me){he>>>=0,ce>>>=0,me||Z(he,ce,this.length);for(var Pe=this[he+--ce],Ae=1;ce>0&&(Ae*=256);)Pe+=this[he+--ce]*Ae;return Pe},n.prototype.readUint8=n.prototype.readUInt8=function(he,ce){return he>>>=0,ce||Z(he,1,this.length),this[he]},n.prototype.readUint16LE=n.prototype.readUInt16LE=function(he,ce){return he>>>=0,ce||Z(he,2,this.length),this[he]|this[he+1]<<8},n.prototype.readUint16BE=n.prototype.readUInt16BE=function(he,ce){return he>>>=0,ce||Z(he,2,this.length),this[he]<<8|this[he+1]},n.prototype.readUint32LE=n.prototype.readUInt32LE=function(he,ce){return he>>>=0,ce||Z(he,4,this.length),(this[he]|this[he+1]<<8|this[he+2]<<16)+16777216*this[he+3]},n.prototype.readUint32BE=n.prototype.readUInt32BE=function(he,ce){return he>>>=0,ce||Z(he,4,this.length),16777216*this[he]+(this[he+1]<<16|this[he+2]<<8|this[he+3])},n.prototype.readBigUInt64LE=De(function(he){fe(he>>>=0,"offset");var ce=this[he],me=this[he+7];void 0!==ce&&void 0!==me||ue(he,this.length-8);var Pe=ce+this[++he]*Math.pow(2,8)+this[++he]*Math.pow(2,16)+this[++he]*Math.pow(2,24),Ae=this[++he]+this[++he]*Math.pow(2,8)+this[++he]*Math.pow(2,16)+me*Math.pow(2,24);return BigInt(Pe)+(BigInt(Ae)<<BigInt(32))}),n.prototype.readBigUInt64BE=De(function(he){fe(he>>>=0,"offset");var ce=this[he],me=this[he+7];void 0!==ce&&void 0!==me||ue(he,this.length-8);var Pe=ce*Math.pow(2,24)+this[++he]*Math.pow(2,16)+this[++he]*Math.pow(2,8)+this[++he],Ae=this[++he]*Math.pow(2,24)+this[++he]*Math.pow(2,16)+this[++he]*Math.pow(2,8)+me;return(BigInt(Pe)<<BigInt(32))+BigInt(Ae)}),n.prototype.readIntLE=function(he,ce,me){he>>>=0,ce>>>=0,me||Z(he,ce,this.length);for(var Pe=this[he],Ae=1,Ce=0;++Ce<ce&&(Ae*=256);)Pe+=this[he+Ce]*Ae;return Pe>=(Ae*=128)&&(Pe-=Math.pow(2,8*ce)),Pe},n.prototype.readIntBE=function(he,ce,me){he>>>=0,ce>>>=0,me||Z(he,ce,this.length);for(var Pe=ce,Ae=1,Ce=this[he+--Pe];Pe>0&&(Ae*=256);)Ce+=this[he+--Pe]*Ae;return Ce>=(Ae*=128)&&(Ce-=Math.pow(2,8*ce)),Ce},n.prototype.readInt8=function(he,ce){return he>>>=0,ce||Z(he,1,this.length),128&this[he]?-1*(255-this[he]+1):this[he]},n.prototype.readInt16LE=function(he,ce){he>>>=0,ce||Z(he,2,this.length);var me=this[he]|this[he+1]<<8;return 32768&me?4294901760|me:me},n.prototype.readInt16BE=function(he,ce){he>>>=0,ce||Z(he,2,this.length);var me=this[he+1]|this[he]<<8;return 32768&me?4294901760|me:me},n.prototype.readInt32LE=function(he,ce){return he>>>=0,ce||Z(he,4,this.length),this[he]|this[he+1]<<8|this[he+2]<<16|this[he+3]<<24},n.prototype.readInt32BE=function(he,ce){return he>>>=0,ce||Z(he,4,this.length),this[he]<<24|this[he+1]<<16|this[he+2]<<8|this[he+3]},n.prototype.readBigInt64LE=De(function(he){fe(he>>>=0,"offset");var ce=this[he],me=this[he+7];void 0!==ce&&void 0!==me||ue(he,this.length-8);var Pe=this[he+4]+this[he+5]*Math.pow(2,8)+this[he+6]*Math.pow(2,16)+(me<<24);return(BigInt(Pe)<<BigInt(32))+BigInt(ce+this[++he]*Math.pow(2,8)+this[++he]*Math.pow(2,16)+this[++he]*Math.pow(2,24))}),n.prototype.readBigInt64BE=De(function(he){fe(he>>>=0,"offset");var ce=this[he],me=this[he+7];void 0!==ce&&void 0!==me||ue(he,this.length-8);var Pe=(ce<<24)+this[++he]*Math.pow(2,16)+this[++he]*Math.pow(2,8)+this[++he];return(BigInt(Pe)<<BigInt(32))+BigInt(this[++he]*Math.pow(2,24)+this[++he]*Math.pow(2,16)+this[++he]*Math.pow(2,8)+me)}),n.prototype.readFloatLE=function(he,ce){return he>>>=0,ce||Z(he,4,this.length),l.read(this,he,!0,23,4)},n.prototype.readFloatBE=function(he,ce){return he>>>=0,ce||Z(he,4,this.length),l.read(this,he,!1,23,4)},n.prototype.readDoubleLE=function(he,ce){return he>>>=0,ce||Z(he,8,this.length),l.read(this,he,!0,52,8)},n.prototype.readDoubleBE=function(he,ce){return he>>>=0,ce||Z(he,8,this.length),l.read(this,he,!1,52,8)},n.prototype.writeUintLE=n.prototype.writeUIntLE=function(he,ce,me,Pe){he=+he,ce>>>=0,me>>>=0,Pe||N(this,he,ce,me,Math.pow(2,8*me)-1,0);var Ae=1,Ce=0;for(this[ce]=255&he;++Ce<me&&(Ae*=256);)this[ce+Ce]=he/Ae&255;return ce+me},n.prototype.writeUintBE=n.prototype.writeUIntBE=function(he,ce,me,Pe){he=+he,ce>>>=0,me>>>=0,Pe||N(this,he,ce,me,Math.pow(2,8*me)-1,0);var Ae=me-1,Ce=1;for(this[ce+Ae]=255&he;--Ae>=0&&(Ce*=256);)this[ce+Ae]=he/Ce&255;return ce+me},n.prototype.writeUint8=n.prototype.writeUInt8=function(he,ce,me){return he=+he,ce>>>=0,me||N(this,he,ce,1,255,0),this[ce]=255&he,ce+1},n.prototype.writeUint16LE=n.prototype.writeUInt16LE=function(he,ce,me){return he=+he,ce>>>=0,me||N(this,he,ce,2,65535,0),this[ce]=255&he,this[ce+1]=he>>>8,ce+2},n.prototype.writeUint16BE=n.prototype.writeUInt16BE=function(he,ce,me){return he=+he,ce>>>=0,me||N(this,he,ce,2,65535,0),this[ce]=he>>>8,this[ce+1]=255&he,ce+2},n.prototype.writeUint32LE=n.prototype.writeUInt32LE=function(he,ce,me){return he=+he,ce>>>=0,me||N(this,he,ce,4,4294967295,0),this[ce+3]=he>>>24,this[ce+2]=he>>>16,this[ce+1]=he>>>8,this[ce]=255&he,ce+4},n.prototype.writeUint32BE=n.prototype.writeUInt32BE=function(he,ce,me){return he=+he,ce>>>=0,me||N(this,he,ce,4,4294967295,0),this[ce]=he>>>24,this[ce+1]=he>>>16,this[ce+2]=he>>>8,this[ce+3]=255&he,ce+4},n.prototype.writeBigUInt64LE=De(function(he){return G(this,he,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),n.prototype.writeBigUInt64BE=De(function(he){return W(this,he,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),n.prototype.writeIntLE=function(he,ce,me,Pe){if(he=+he,ce>>>=0,!Pe){var Ae=Math.pow(2,8*me-1);N(this,he,ce,me,Ae-1,-Ae)}var Ce=0,Oe=1,Ne=0;for(this[ce]=255&he;++Ce<me&&(Oe*=256);)he<0&&0===Ne&&0!==this[ce+Ce-1]&&(Ne=1),this[ce+Ce]=(he/Oe>>0)-Ne&255;return ce+me},n.prototype.writeIntBE=function(he,ce,me,Pe){if(he=+he,ce>>>=0,!Pe){var Ae=Math.pow(2,8*me-1);N(this,he,ce,me,Ae-1,-Ae)}var Ce=me-1,Oe=1,Ne=0;for(this[ce+Ce]=255&he;--Ce>=0&&(Oe*=256);)he<0&&0===Ne&&0!==this[ce+Ce+1]&&(Ne=1),this[ce+Ce]=(he/Oe>>0)-Ne&255;return ce+me},n.prototype.writeInt8=function(he,ce,me){return he=+he,ce>>>=0,me||N(this,he,ce,1,127,-128),he<0&&(he=255+he+1),this[ce]=255&he,ce+1},n.prototype.writeInt16LE=function(he,ce,me){return he=+he,ce>>>=0,me||N(this,he,ce,2,32767,-32768),this[ce]=255&he,this[ce+1]=he>>>8,ce+2},n.prototype.writeInt16BE=function(he,ce,me){return he=+he,ce>>>=0,me||N(this,he,ce,2,32767,-32768),this[ce]=he>>>8,this[ce+1]=255&he,ce+2},n.prototype.writeInt32LE=function(he,ce,me){return he=+he,ce>>>=0,me||N(this,he,ce,4,2147483647,-2147483648),this[ce]=255&he,this[ce+1]=he>>>8,this[ce+2]=he>>>16,this[ce+3]=he>>>24,ce+4},n.prototype.writeInt32BE=function(he,ce,me){return he=+he,ce>>>=0,me||N(this,he,ce,4,2147483647,-2147483648),he<0&&(he=4294967295+he+1),this[ce]=he>>>24,this[ce+1]=he>>>16,this[ce+2]=he>>>8,this[ce+3]=255&he,ce+4},n.prototype.writeBigInt64LE=De(function(he){return G(this,he,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),n.prototype.writeBigInt64BE=De(function(he){return W(this,he,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),n.prototype.writeFloatLE=function(he,ce,me){return re(this,he,ce,!0,me)},n.prototype.writeFloatBE=function(he,ce,me){return re(this,he,ce,!1,me)},n.prototype.writeDoubleLE=function(he,ce,me){return ne(this,he,ce,!0,me)},n.prototype.writeDoubleBE=function(he,ce,me){return ne(this,he,ce,!1,me)},n.prototype.copy=function(he,ce,me,Pe){if(!n.isBuffer(he))throw new TypeError("argument should be a Buffer");if(me||(me=0),Pe||0===Pe||(Pe=this.length),ce>=he.length&&(ce=he.length),ce||(ce=0),Pe>0&&Pe<me&&(Pe=me),Pe===me||0===he.length||0===this.length)return 0;if(ce<0)throw new RangeError("targetStart out of bounds");if(me<0||me>=this.length)throw new RangeError("Index out of range");if(Pe<0)throw new RangeError("sourceEnd out of bounds");Pe>this.length&&(Pe=this.length),he.length-ce<Pe-me&&(Pe=he.length-ce+me);var Ae=Pe-me;return this===he&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(ce,me,Pe):Uint8Array.prototype.set.call(he,this.subarray(me,Pe),ce),Ae},n.prototype.fill=function(he,ce,me,Pe){if("string"==typeof he){if("string"==typeof ce?(Pe=ce,ce=0,me=this.length):"string"==typeof me&&(Pe=me,me=this.length),void 0!==Pe&&"string"!=typeof Pe)throw new TypeError("encoding must be a string");if("string"==typeof Pe&&!n.isEncoding(Pe))throw new TypeError("Unknown encoding: "+Pe);if(1===he.length){var Ae=he.charCodeAt(0);("utf8"===Pe&&Ae<128||"latin1"===Pe)&&(he=Ae)}}else"number"==typeof he?he&=255:"boolean"==typeof he&&(he=Number(he));if(ce<0||this.length<ce||this.length<me)throw new RangeError("Out of range index");if(me<=ce)return this;var Ce;if(ce>>>=0,me=void 0===me?this.length:me>>>0,he||(he=0),"number"==typeof he)for(Ce=ce;Ce<me;++Ce)this[Ce]=he;else{var Oe=n.isBuffer(he)?he:n.from(he,Pe),Ne=Oe.length;if(0===Ne)throw new TypeError('The value "'+he+'" is invalid for argument "value"');for(Ce=0;Ce<me-ce;++Ce)this[Ce+ce]=Oe[Ce%Ne]}return this};var Q={};function $(he,ce,me){Q[he]=function(Pe){function Ae(){var Ne,ve;return function(je,ve){if(!(je instanceof ve))throw new TypeError("Cannot call a class as a function")}(this,Ae),this,ve=k(ve=Ae),Ne=function(Le,Ue){if(Ue&&("object"===b(Ue)||"function"==typeof Ue))return Ue;if(void 0!==Ue)throw new TypeError("Derived constructors may only return object or undefined");return o(Le)}(this,function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{return!1}}()?Reflect.construct(ve,[],k(this).constructor):ve.apply(this,undefined)),Object.defineProperty(o(Ne),"message",{value:ce.apply(o(Ne),arguments),writable:!0,configurable:!0}),Ne.name="".concat(Ne.name," [").concat(he,"]"),delete Ne.name,Ne}var Ce,Oe;return function(Ne,je){if("function"!=typeof je&&null!==je)throw new TypeError("Super expression must either be null or a function");Ne.prototype=Object.create(je&&je.prototype,{constructor:{value:Ne,writable:!0,configurable:!0}}),Object.defineProperty(Ne,"prototype",{writable:!1}),je&&T(Ne,je)}(Ae,Pe),Ce=Ae,(Oe=[{key:"code",get:function(){return he},set:function(Ne){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ne,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(he,"]: ").concat(this.message)}}])&&function S(he,ce){for(var me=0;me<ce.length;me++){var Pe=ce[me];Pe.enumerable=Pe.enumerable||!1,Pe.configurable=!0,"value"in Pe&&(Pe.writable=!0),Object.defineProperty(he,(Ae=function(Ce,Oe){if("object"!==b(Ce)||null===Ce)return Ce;var Ne=Ce[Symbol.toPrimitive];if(void 0!==Ne){var je=Ne.call(Ce,"string");if("object"!==b(je))return je;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Ce)}(Pe.key),"symbol"===b(Ae)?Ae:String(Ae)),Pe)}var Ae}(Ce.prototype,Oe),Object.defineProperty(Ce,"prototype",{writable:!1}),Ae}(me)}function X(he){for(var ce="",me=he.length,Pe="-"===he[0]?1:0;me>=Pe+4;me-=3)ce="_".concat(he.slice(me-3,me)).concat(ce);return"".concat(he.slice(0,me)).concat(ce)}function oe(he,ce,me,Pe,Ae,Ce){if(he>me||he<ce){var Oe,Ne="bigint"==typeof ce?"n":"";throw Oe=Ce>3?0===ce||ce===BigInt(0)?">= 0".concat(Ne," and < 2").concat(Ne," ** ").concat(8*(Ce+1)).concat(Ne):">= -(2".concat(Ne," ** ").concat(8*(Ce+1)-1).concat(Ne,") and < 2 ** ")+"".concat(8*(Ce+1)-1).concat(Ne):">= ".concat(ce).concat(Ne," and <= ").concat(me).concat(Ne),new Q.ERR_OUT_OF_RANGE("value",Oe,he)}var je,ve,Me;je=Pe,Me=Ce,fe(ve=Ae,"offset"),void 0!==je[ve]&&void 0!==je[ve+Me]||ue(ve,je.length-(Me+1))}function fe(he,ce){if("number"!=typeof he)throw new Q.ERR_INVALID_ARG_TYPE(ce,"number",he)}function ue(he,ce,me){throw Math.floor(he)!==he?(fe(he,me),new Q.ERR_OUT_OF_RANGE(me||"offset","an integer",he)):ce<0?new Q.ERR_BUFFER_OUT_OF_BOUNDS:new Q.ERR_OUT_OF_RANGE(me||"offset",">= ".concat(me?1:0," and <= ").concat(ce),he)}$("ERR_BUFFER_OUT_OF_BOUNDS",function(he){return he?"".concat(he," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),$("ERR_INVALID_ARG_TYPE",function(he,ce){return'The "'.concat(he,'" argument must be of type number. Received type ').concat(b(ce))},TypeError),$("ERR_OUT_OF_RANGE",function(he,ce,me){var Pe='The value of "'.concat(he,'" is out of range.'),Ae=me;return Number.isInteger(me)&&Math.abs(me)>Math.pow(2,32)?Ae=X(String(me)):"bigint"==typeof me&&(Ae=String(me),(me>Math.pow(BigInt(2),BigInt(32))||me<-Math.pow(BigInt(2),BigInt(32)))&&(Ae=X(Ae)),Ae+="n"),Pe+" It must be ".concat(ce,". Received ").concat(Ae)},RangeError);var ge=/[^+/0-9A-Za-z-_]/g;function we(he,ce){var me;ce=ce||1/0;for(var Pe=he.length,Ae=null,Ce=[],Oe=0;Oe<Pe;++Oe){if((me=he.charCodeAt(Oe))>55295&&me<57344){if(!Ae){if(me>56319){(ce-=3)>-1&&Ce.push(239,191,189);continue}if(Oe+1===Pe){(ce-=3)>-1&&Ce.push(239,191,189);continue}Ae=me;continue}if(me<56320){(ce-=3)>-1&&Ce.push(239,191,189),Ae=me;continue}me=65536+(Ae-55296<<10|me-56320)}else Ae&&(ce-=3)>-1&&Ce.push(239,191,189);if(Ae=null,me<128){if((ce-=1)<0)break;Ce.push(me)}else if(me<2048){if((ce-=2)<0)break;Ce.push(me>>6|192,63&me|128)}else if(me<65536){if((ce-=3)<0)break;Ce.push(me>>12|224,me>>6&63|128,63&me|128)}else{if(!(me<1114112))throw new Error("Invalid code point");if((ce-=4)<0)break;Ce.push(me>>18|240,me>>12&63|128,me>>6&63|128,63&me|128)}}return Ce}function Te(he){return p.toByteArray(function(ce){if((ce=(ce=ce.split("=")[0]).trim().replace(ge,"")).length<2)return"";for(;ce.length%4!=0;)ce+="=";return ce}(he))}function xe(he,ce,me,Pe){var Ae;for(Ae=0;Ae<Pe&&!(Ae+me>=ce.length||Ae>=he.length);++Ae)ce[Ae+me]=he[Ae];return Ae}function ye(he,ce){return he instanceof ce||null!=he&&null!=he.constructor&&null!=he.constructor.name&&he.constructor.name===ce.name}function _e(he){return he!=he}var Ie=function(){for(var he="0123456789abcdef",ce=new Array(256),me=0;me<16;++me)for(var Pe=16*me,Ae=0;Ae<16;++Ae)ce[Pe+Ae]=he[me]+he[Ae];return ce}();function De(he){return typeof BigInt>"u"?be:he}function be(){throw new Error("BigInt not supported")}},25928:function(ie){"use strict";ie.exports=k,ie.exports.isMobile=k,ie.exports.default=k;var F=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,e=/CrOS/,S=/android|ipad|playbook|silk/i;function k(o){o||(o={});var T=o.ua;if(T||typeof navigator>"u"||(T=navigator.userAgent),T&&T.headers&&"string"==typeof T.headers["user-agent"]&&(T=T.headers["user-agent"]),"string"!=typeof T)return!1;var b=F.test(T)&&!e.test(T)||!!o.tablet&&S.test(T);return!b&&o.tablet&&o.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==T.indexOf("Macintosh")&&-1!==T.indexOf("Safari")&&(b=!0),b}},48932:function(ie,F,e){"use strict";e.r(F),e.d(F,{sankeyCenter:function(){return r},sankeyCircular:function(){return P},sankeyJustify:function(){return i},sankeyLeft:function(){return l},sankeyRight:function(){return t}});var S=e(84706),k=e(34712),o=e(10132),T=e(6688),b=e.n(T);function p(xe){return xe.target.depth}function l(xe){return xe.depth}function t(xe,ye){return ye-1-xe.height}function i(xe,ye){return xe.sourceLinks.length?xe.depth:ye-1}function r(xe){return xe.targetLinks.length?xe.depth:xe.sourceLinks.length?(0,S.SY)(xe.sourceLinks,p)-1:0}function n(xe){return function(){return xe}}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(xe){return typeof xe}:function(xe){return xe&&"function"==typeof Symbol&&xe.constructor===Symbol&&xe!==Symbol.prototype?"symbol":typeof xe};function s(xe,ye){return h(xe.source,ye.source)||xe.index-ye.index}function c(xe,ye){return h(xe.target,ye.target)||xe.index-ye.index}function h(xe,ye){return xe.partOfCycle===ye.partOfCycle?xe.y0-ye.y0:"top"===xe.circularLinkType||"bottom"===ye.circularLinkType?-1:1}function u(xe){return xe.value}function y(xe){return(xe.y0+xe.y1)/2}function d(xe){return y(xe.source)}function m(xe){return y(xe.target)}function g(xe){return xe.index}function x(xe){return xe.nodes}function v(xe){return xe.links}function _(xe,ye){var _e=xe.get(ye);if(!_e)throw new Error("missing: "+ye);return _e}function f(xe,ye){return ye(xe)}var C=25,w=10,E=.3;function P(){var xe,ye,_e=0,Ie=0,De=1,be=1,he=24,ce=g,me=i,Pe=x,Ae=v,Ce=32,Oe=2,Ne=null;function je(){var Me={nodes:Pe.apply(null,arguments),links:Ae.apply(null,arguments)};(function(Ue){Ue.nodes.forEach(function(qe,Ke){qe.index=Ke,qe.sourceLinks=[],qe.targetLinks=[]});var ze=(0,k.kH)(Ue.nodes,ce);Ue.links.forEach(function(qe,Ke){qe.index=Ke;var it=qe.source,ft=qe.target;"object"!==(void 0===it?"undefined":a(it))&&(it=qe.source=_(ze,it)),"object"!==(void 0===ft?"undefined":a(ft))&&(ft=qe.target=_(ze,ft)),it.sourceLinks.push(qe),ft.targetLinks.push(qe)})})(Me),function(Ue,ze,qe){var Ke=0;if(null===qe){for(var it=[],ft=0;ft<Ue.links.length;ft++){var dt=Ue.links[ft],kt=dt.source.index,St=dt.target.index;it[kt]||(it[kt]=[]),it[St]||(it[St]=[]),-1===it[kt].indexOf(St)&&it[kt].push(St)}var Tt=b()(it);Tt.sort(function(Rt,Vt){return Rt.length-Vt.length});var lt={};for(ft=0;ft<Tt.length;ft++){var ot=Tt[ft].slice(-2);lt[ot[0]]||(lt[ot[0]]={}),lt[ot[0]][ot[1]]=!0}Ue.links.forEach(function(Rt){var Vt=Rt.target.index,Ht=Rt.source.index;Vt===Ht||lt[Ht]&&lt[Ht][Vt]?(Rt.circular=!0,Rt.circularLinkID=Ke,Ke+=1):Rt.circular=!1})}else Ue.links.forEach(function(Rt){Rt.source[qe]<Rt.target[qe]?Rt.circular=!1:(Rt.circular=!0,Rt.circularLinkID=Ke,Ke+=1)})}(Me,0,Ne),Me.nodes.forEach(function(ze){ze.partOfCycle=!1,ze.value=Math.max((0,S.oh)(ze.sourceLinks,u),(0,S.oh)(ze.targetLinks,u)),ze.sourceLinks.forEach(function(qe){qe.circular&&(ze.partOfCycle=!0,ze.circularLinkType=qe.circularLinkType)}),ze.targetLinks.forEach(function(qe){qe.circular&&(ze.partOfCycle=!0,ze.circularLinkType=qe.circularLinkType)})}),function(Ue){var ze,qe,Ke;for(ze=Ue.nodes,qe=[],Ke=0;ze.length;++Ke,ze=qe,qe=[])ze.forEach(function(it){it.depth=Ke,it.sourceLinks.forEach(function(ft){qe.indexOf(ft.target)<0&&!ft.circular&&qe.push(ft.target)})});for(ze=Ue.nodes,qe=[],Ke=0;ze.length;++Ke,ze=qe,qe=[])ze.forEach(function(it){it.height=Ke,it.targetLinks.forEach(function(ft){qe.indexOf(ft.source)<0&&!ft.circular&&qe.push(ft.source)})});Ue.nodes.forEach(function(it){it.column=Math.floor(me.call(null,it,Ke))})}(Me),L(Me,ce),function(Ue,ze,qe){var Ke=(0,k.UJ)().key(function(St){return St.column}).sortKeys(S.XE).entries(Ue.nodes).map(function(St){return St.values});(function(St){if(ye){var Tt=1/0;Ke.forEach(function(Vt){var Ht=be*ye/(Vt.length+1);Tt=Ht<Tt?Ht:Tt}),xe=Tt}var lt=(0,S.SY)(Ke,function(Vt){return(be-Ie-(Vt.length-1)*xe)/(0,S.oh)(Vt,u)});lt*=E,Ue.links.forEach(function(Vt){Vt.width=Vt.value*lt});var Vt,Ht,zt,Qe,nt,We,ot=(Ht=0,zt=0,Qe=0,nt=0,We=(0,S.kv)((Vt=Ue).nodes,function(et){return et.column}),Vt.links.forEach(function(et){et.circular&&("top"==et.circularLinkType?Ht+=et.width:zt+=et.width,0==et.target.column&&(nt+=et.width),et.source.column==We&&(Qe+=et.width))}),{top:Ht=Ht>0?Ht+C+w:Ht,bottom:zt=zt>0?zt+C+w:zt,left:nt=nt>0?nt+C+w:nt,right:Qe=Qe>0?Qe+C+w:Qe}),Rt=function(Vt,Ht){var zt=(0,S.kv)(Vt.nodes,function(gt){return gt.column}),Qe=De-_e,nt=be-Ie,We=Qe/(Qe+Ht.right+Ht.left),et=nt/(nt+Ht.top+Ht.bottom);return _e=_e*We+Ht.left,De=0==Ht.right?De:De*We,Ie=Ie*et+Ht.top,be*=et,Vt.nodes.forEach(function(gt){gt.x0=_e+gt.column*((De-_e-he)/zt),gt.x1=gt.x0+he}),et}(Ue,ot);lt*=Rt,Ue.links.forEach(function(Vt){Vt.width=Vt.value*lt}),Ke.forEach(function(Vt){var Ht=Vt.length;Vt.forEach(function(zt,Qe){zt.depth==Ke.length-1&&1==Ht||0==zt.depth&&1==Ht?(zt.y0=be/2-zt.value*lt,zt.y1=zt.y0+zt.value*lt):zt.partOfCycle?0==z(zt,St)?(zt.y0=be/2+Qe,zt.y1=zt.y0+zt.value*lt):"top"==zt.circularLinkType?(zt.y0=Ie+Qe,zt.y1=zt.y0+zt.value*lt):(zt.y0=be-zt.value*lt-Qe,zt.y1=zt.y0+zt.value*lt):0==ot.top||0==ot.bottom?(zt.y0=(be-Ie)/Ht*Qe,zt.y1=zt.y0+zt.value*lt):(zt.y0=(be-Ie)/2-Ht/2+Qe,zt.y1=zt.y0+zt.value*lt)})})})(qe),kt();for(var it=1,ft=ze;ft>0;--ft)dt(it*=.99,qe),kt();function dt(St,Tt){var lt=Ke.length;Ke.forEach(function(ot){var Rt=ot.length,Vt=ot[0].depth;ot.forEach(function(Ht){var zt;if((Ht.sourceLinks.length||Ht.targetLinks.length)&&!(Ht.partOfCycle&&z(Ht,Tt)>0))if(0==Vt&&1==Rt)Ht.y0=be/2-(zt=Ht.y1-Ht.y0)/2,Ht.y1=be/2+zt/2;else if(Vt==lt-1&&1==Rt)Ht.y0=be/2-(zt=Ht.y1-Ht.y0)/2,Ht.y1=be/2+zt/2;else{var Qe=(0,S.mo)(Ht.sourceLinks,m),nt=(0,S.mo)(Ht.targetLinks,d),We=((Qe&&nt?(Qe+nt)/2:Qe||nt)-y(Ht))*St;Ht.y0+=We,Ht.y1+=We}})})}function kt(){Ke.forEach(function(St){var Tt,lt,ot,Rt=Ie,Vt=St.length;for(St.sort(h),ot=0;ot<Vt;++ot)(lt=Rt-(Tt=St[ot]).y0)>0&&(Tt.y0+=lt,Tt.y1+=lt),Rt=Tt.y1+xe;if((lt=Rt-xe-be)>0)for(Rt=Tt.y0-=lt,Tt.y1-=lt,ot=Vt-2;ot>=0;--ot)(lt=(Tt=St[ot]).y1+xe-Rt)>0&&(Tt.y0-=lt,Tt.y1-=lt),Rt=Tt.y0})}}(Me,Ce,ce),ve(Me);for(var Le=0;Le<4;Le++)fe(Me,be,ce),ue(Me,0,ce),X(Me,Ie,be,ce),fe(Me,be,ce),ue(Me,0,ce);return function(Ue,ze,qe){var Ke=Ue.nodes,it=Ue.links,ft=!1,dt=!1;if(it.forEach(function(Tt){"top"==Tt.circularLinkType?ft=!0:"bottom"==Tt.circularLinkType&&(dt=!0)}),0==ft||0==dt){var kt=(0,S.SY)(Ke,function(Tt){return Tt.y0}),St=(qe-ze)/((0,S.kv)(Ke,function(Tt){return Tt.y1})-kt);Ke.forEach(function(Tt){var lt=(Tt.y1-Tt.y0)*St;Tt.y0=(Tt.y0-kt)*St,Tt.y1=Tt.y0+lt}),it.forEach(function(Tt){Tt.y0=(Tt.y0-kt)*St,Tt.y1=(Tt.y1-kt)*St,Tt.width=Tt.width*St})}}(Me,Ie,be),U(Me,Oe,be,ce),Me}function ve(Me){Me.nodes.forEach(function(Le){Le.sourceLinks.sort(c),Le.targetLinks.sort(s)}),Me.nodes.forEach(function(Le){var Ue=Le.y0,ze=Ue,qe=Le.y1,Ke=qe;Le.sourceLinks.forEach(function(it){it.circular?(it.y0=qe-it.width/2,qe-=it.width):(it.y0=Ue+it.width/2,Ue+=it.width)}),Le.targetLinks.forEach(function(it){it.circular?(it.y1=Ke-it.width/2,Ke-=it.width):(it.y1=ze+it.width/2,ze+=it.width)})})}return je.nodeId=function(Me){return arguments.length?(ce="function"==typeof Me?Me:n(Me),je):ce},je.nodeAlign=function(Me){return arguments.length?(me="function"==typeof Me?Me:n(Me),je):me},je.nodeWidth=function(Me){return arguments.length?(he=+Me,je):he},je.nodePadding=function(Me){return arguments.length?(xe=+Me,je):xe},je.nodes=function(Me){return arguments.length?(Pe="function"==typeof Me?Me:n(Me),je):Pe},je.links=function(Me){return arguments.length?(Ae="function"==typeof Me?Me:n(Me),je):Ae},je.size=function(Me){return arguments.length?(_e=Ie=0,De=+Me[0],be=+Me[1],je):[De-_e,be-Ie]},je.extent=function(Me){return arguments.length?(_e=+Me[0][0],De=+Me[1][0],Ie=+Me[0][1],be=+Me[1][1],je):[[_e,Ie],[De,be]]},je.iterations=function(Me){return arguments.length?(Ce=+Me,je):Ce},je.circularLinkGap=function(Me){return arguments.length?(Oe=+Me,je):Oe},je.nodePaddingRatio=function(Me){return arguments.length?(ye=+Me,je):ye},je.sortNodes=function(Me){return arguments.length?(Ne=Me,je):Ne},je.update=function(Me){return L(Me,ce),ve(Me),Me.links.forEach(function(Le){Le.circular&&(Le.circularLinkType=Le.y0+Le.y1<be?"top":"bottom",Le.source.circularLinkType=Le.circularLinkType,Le.target.circularLinkType=Le.circularLinkType)}),fe(Me,be,ce,!1),ue(Me,0,ce),U(Me,Oe,be,ce),Me},je}function L(xe,ye){var _e=0,Ie=0;xe.links.forEach(function(De){De.circular&&(De.circularLinkType=De.source.circularLinkType||De.target.circularLinkType?De.source.circularLinkType?De.source.circularLinkType:De.target.circularLinkType:_e<Ie?"top":"bottom","top"==De.circularLinkType?_e+=1:Ie+=1,xe.nodes.forEach(function(be){f(be,ye)!=f(De.source,ye)&&f(be,ye)!=f(De.target,ye)||(be.circularLinkType=De.circularLinkType)}))}),xe.links.forEach(function(De){De.circular&&(De.source.circularLinkType==De.target.circularLinkType&&(De.circularLinkType=De.source.circularLinkType),Te(De,ye)&&(De.circularLinkType=De.source.circularLinkType))})}function O(xe){var ye=Math.abs(xe.y1-xe.y0),_e=Math.abs(xe.target.x0-xe.source.x1);return Math.atan(_e/ye)}function z(xe,ye){var _e=0;xe.sourceLinks.forEach(function(De){_e=De.circular&&!Te(De,ye)?_e+1:_e});var Ie=0;return xe.targetLinks.forEach(function(De){Ie=De.circular&&!Te(De,ye)?Ie+1:Ie}),_e+Ie}function V(xe){var _e=0;xe.source.sourceLinks.forEach(function(be){_e=be.circular?_e+1:_e});var De=0;return xe.target.targetLinks.forEach(function(be){De=be.circular?De+1:De}),!(_e>1||De>1)}function R(xe,ye,_e){return xe.sort(Z),xe.forEach(function(Ie,De){var be,he,ce=0;if(Te(Ie,_e)&&V(Ie))Ie.circularPathData.verticalBuffer=ce+Ie.width/2;else{for(var me=0;me<De;me++)if(!((be=xe[De]).source.column<(he=xe[me]).target.column||be.target.column>he.source.column)){var Pe=xe[me].circularPathData.verticalBuffer+xe[me].width/2+ye;ce=Pe>ce?Pe:ce}Ie.circularPathData.verticalBuffer=ce+Ie.width/2}}),xe}function U(xe,ye,_e,Ie){var De=(0,S.SY)(xe.links,function(be){return be.source.y0});xe.links.forEach(function(be){be.circular&&(be.circularPathData={})}),R(xe.links.filter(function(be){return"top"==be.circularLinkType}),ye,Ie),R(xe.links.filter(function(be){return"bottom"==be.circularLinkType}),ye,Ie),xe.links.forEach(function(be){if(be.circular){if(be.circularPathData.arcRadius=be.width+w,be.circularPathData.leftNodeBuffer=5,be.circularPathData.rightNodeBuffer=5,be.circularPathData.sourceWidth=be.source.x1-be.source.x0,be.circularPathData.sourceX=be.source.x0+be.circularPathData.sourceWidth,be.circularPathData.targetX=be.target.x0,be.circularPathData.sourceY=be.y0,be.circularPathData.targetY=be.y1,Te(be,Ie)&&V(be))be.circularPathData.leftSmallArcRadius=w+be.width/2,be.circularPathData.leftLargeArcRadius=w+be.width/2,be.circularPathData.rightSmallArcRadius=w+be.width/2,be.circularPathData.rightLargeArcRadius=w+be.width/2,"bottom"==be.circularLinkType?(be.circularPathData.verticalFullExtent=be.source.y1+C+be.circularPathData.verticalBuffer,be.circularPathData.verticalLeftInnerExtent=be.circularPathData.verticalFullExtent-be.circularPathData.leftLargeArcRadius,be.circularPathData.verticalRightInnerExtent=be.circularPathData.verticalFullExtent-be.circularPathData.rightLargeArcRadius):(be.circularPathData.verticalFullExtent=be.source.y0-C-be.circularPathData.verticalBuffer,be.circularPathData.verticalLeftInnerExtent=be.circularPathData.verticalFullExtent+be.circularPathData.leftLargeArcRadius,be.circularPathData.verticalRightInnerExtent=be.circularPathData.verticalFullExtent+be.circularPathData.rightLargeArcRadius);else{var he=be.source.column,ce=be.circularLinkType,me=xe.links.filter(function(Ce){return Ce.source.column==he&&Ce.circularLinkType==ce});me.sort("bottom"==be.circularLinkType?G:N);var Pe=0;me.forEach(function(Ce,Oe){Ce.circularLinkID==be.circularLinkID&&(be.circularPathData.leftSmallArcRadius=w+be.width/2+Pe,be.circularPathData.leftLargeArcRadius=w+be.width/2+Oe*ye+Pe),Pe+=Ce.width}),he=be.target.column,(me=xe.links.filter(function(Ce){return Ce.target.column==he&&Ce.circularLinkType==ce})).sort("bottom"==be.circularLinkType?ae:W),Pe=0,me.forEach(function(Ce,Oe){Ce.circularLinkID==be.circularLinkID&&(be.circularPathData.rightSmallArcRadius=w+be.width/2+Pe,be.circularPathData.rightLargeArcRadius=w+be.width/2+Oe*ye+Pe),Pe+=Ce.width}),"bottom"==be.circularLinkType?(be.circularPathData.verticalFullExtent=Math.max(_e,be.source.y1,be.target.y1)+C+be.circularPathData.verticalBuffer,be.circularPathData.verticalLeftInnerExtent=be.circularPathData.verticalFullExtent-be.circularPathData.leftLargeArcRadius,be.circularPathData.verticalRightInnerExtent=be.circularPathData.verticalFullExtent-be.circularPathData.rightLargeArcRadius):(be.circularPathData.verticalFullExtent=De-C-be.circularPathData.verticalBuffer,be.circularPathData.verticalLeftInnerExtent=be.circularPathData.verticalFullExtent+be.circularPathData.leftLargeArcRadius,be.circularPathData.verticalRightInnerExtent=be.circularPathData.verticalFullExtent+be.circularPathData.rightLargeArcRadius)}be.circularPathData.leftInnerExtent=be.circularPathData.sourceX+be.circularPathData.leftNodeBuffer,be.circularPathData.rightInnerExtent=be.circularPathData.targetX-be.circularPathData.rightNodeBuffer,be.circularPathData.leftFullExtent=be.circularPathData.sourceX+be.circularPathData.leftLargeArcRadius+be.circularPathData.leftNodeBuffer,be.circularPathData.rightFullExtent=be.circularPathData.targetX-be.circularPathData.rightLargeArcRadius-be.circularPathData.rightNodeBuffer}if(be.circular)be.path="top"==(Ce=be).circularLinkType?"M"+Ce.circularPathData.sourceX+" "+Ce.circularPathData.sourceY+" L"+Ce.circularPathData.leftInnerExtent+" "+Ce.circularPathData.sourceY+" A"+Ce.circularPathData.leftLargeArcRadius+" "+Ce.circularPathData.leftSmallArcRadius+" 0 0 0 "+Ce.circularPathData.leftFullExtent+" "+(Ce.circularPathData.sourceY-Ce.circularPathData.leftSmallArcRadius)+" L"+Ce.circularPathData.leftFullExtent+" "+Ce.circularPathData.verticalLeftInnerExtent+" A"+Ce.circularPathData.leftLargeArcRadius+" "+Ce.circularPathData.leftLargeArcRadius+" 0 0 0 "+Ce.circularPathData.leftInnerExtent+" "+Ce.circularPathData.verticalFullExtent+" L"+Ce.circularPathData.rightInnerExtent+" "+Ce.circularPathData.verticalFullExtent+" A"+Ce.circularPathData.rightLargeArcRadius+" "+Ce.circularPathData.rightLargeArcRadius+" 0 0 0 "+Ce.circularPathData.rightFullExtent+" "+Ce.circularPathData.verticalRightInnerExtent+" L"+Ce.circularPathData.rightFullExtent+" "+(Ce.circularPathData.targetY-Ce.circularPathData.rightSmallArcRadius)+" A"+Ce.circularPathData.rightLargeArcRadius+" "+Ce.circularPathData.rightSmallArcRadius+" 0 0 0 "+Ce.circularPathData.rightInnerExtent+" "+Ce.circularPathData.targetY+" L"+Ce.circularPathData.targetX+" "+Ce.circularPathData.targetY:"M"+Ce.circularPathData.sourceX+" "+Ce.circularPathData.sourceY+" L"+Ce.circularPathData.leftInnerExtent+" "+Ce.circularPathData.sourceY+" A"+Ce.circularPathData.leftLargeArcRadius+" "+Ce.circularPathData.leftSmallArcRadius+" 0 0 1 "+Ce.circularPathData.leftFullExtent+" "+(Ce.circularPathData.sourceY+Ce.circularPathData.leftSmallArcRadius)+" L"+Ce.circularPathData.leftFullExtent+" "+Ce.circularPathData.verticalLeftInnerExtent+" A"+Ce.circularPathData.leftLargeArcRadius+" "+Ce.circularPathData.leftLargeArcRadius+" 0 0 1 "+Ce.circularPathData.leftInnerExtent+" "+Ce.circularPathData.verticalFullExtent+" L"+Ce.circularPathData.rightInnerExtent+" "+Ce.circularPathData.verticalFullExtent+" A"+Ce.circularPathData.rightLargeArcRadius+" "+Ce.circularPathData.rightLargeArcRadius+" 0 0 1 "+Ce.circularPathData.rightFullExtent+" "+Ce.circularPathData.verticalRightInnerExtent+" L"+Ce.circularPathData.rightFullExtent+" "+(Ce.circularPathData.targetY+Ce.circularPathData.rightSmallArcRadius)+" A"+Ce.circularPathData.rightLargeArcRadius+" "+Ce.circularPathData.rightSmallArcRadius+" 0 0 1 "+Ce.circularPathData.rightInnerExtent+" "+Ce.circularPathData.targetY+" L"+Ce.circularPathData.targetX+" "+Ce.circularPathData.targetY;else{var Ae=(0,o.ak)().source(function(Ce){return[Ce.source.x0+(Ce.source.x1-Ce.source.x0),Ce.y0]}).target(function(Ce){return[Ce.target.x0,Ce.y1]});be.path=Ae(be)}var Ce})}function Z(xe,ye){return re(xe)==re(ye)?"bottom"==xe.circularLinkType?G(xe,ye):N(xe,ye):re(ye)-re(xe)}function N(xe,ye){return xe.y0-ye.y0}function G(xe,ye){return ye.y0-xe.y0}function W(xe,ye){return xe.y1-ye.y1}function ae(xe,ye){return ye.y1-xe.y1}function re(xe){return xe.target.column-xe.source.column}function ne(xe){return xe.target.x0-xe.source.x1}function Q(xe,ye){var _e=O(xe),Ie=ne(ye)/Math.tan(_e);return"up"==we(xe)?xe.y1+Ie:xe.y1-Ie}function $(xe,ye){var _e=O(xe),Ie=ne(ye)/Math.tan(_e);return"up"==we(xe)?xe.y1-Ie:xe.y1+Ie}function X(xe,ye,_e,Ie){xe.links.forEach(function(De){if(!De.circular&&De.target.column-De.source.column>1){var be=De.source.column+1,he=De.target.column-1,ce=1,me=he-be+1;for(ce=1;be<=he;be++,ce++)xe.nodes.forEach(function(Pe){if(Pe.column==be){var Ae,Ce=ce/(me+1),Oe=Math.pow(1-Ce,3),Ne=3*Ce*Math.pow(1-Ce,2),je=3*Math.pow(Ce,2)*(1-Ce),ve=Math.pow(Ce,3),Me=Oe*De.y0+Ne*De.y0+je*De.y1+ve*De.y1,Le=Me-De.width/2,Ue=Me+De.width/2;Le>Pe.y0&&Le<Pe.y1?(Ae=Pe.y1-Le+10,Pe=oe(Pe,Ae="bottom"==Pe.circularLinkType?Ae:-Ae,ye,_e),xe.nodes.forEach(function(ze){var qe,Ke;f(ze,Ie)!=f(Pe,Ie)&&ze.column==Pe.column&&((qe=Pe).y0>(Ke=ze).y0&&qe.y0<Ke.y1||qe.y1>Ke.y0&&qe.y1<Ke.y1||qe.y0<Ke.y0&&qe.y1>Ke.y1)&&oe(ze,Ae,ye,_e)})):(Ue>Pe.y0&&Ue<Pe.y1||Le<Pe.y0&&Ue>Pe.y1)&&(Pe=oe(Pe,Ae=Ue-Pe.y0+10,ye,_e),xe.nodes.forEach(function(ze){f(ze,Ie)!=f(Pe,Ie)&&ze.column==Pe.column&&ze.y0<Pe.y1&&ze.y1>Pe.y1&&oe(ze,Ae,ye,_e)}))}})}})}function oe(xe,ye,_e,Ie){return xe.y0+ye>=_e&&xe.y1+ye<=Ie&&(xe.y0=xe.y0+ye,xe.y1=xe.y1+ye,xe.targetLinks.forEach(function(De){De.y1=De.y1+ye}),xe.sourceLinks.forEach(function(De){De.y0=De.y0+ye})),xe}function fe(xe,ye,_e,Ie){xe.nodes.forEach(function(De){Ie&&De.y+(De.y1-De.y0)>ye&&(De.y=De.y-(De.y+(De.y1-De.y0)-ye));var be=xe.links.filter(function(me){return f(me.source,_e)==f(De,_e)}),he=be.length;he>1&&be.sort(function(me,Pe){if(!me.circular&&!Pe.circular){if(me.target.column==Pe.target.column||!ge(me,Pe))return me.y1-Pe.y1;if(me.target.column>Pe.target.column){var Ae=$(Pe,me);return me.y1-Ae}if(Pe.target.column>me.target.column)return $(me,Pe)-Pe.y1}return me.circular&&!Pe.circular?"top"==me.circularLinkType?-1:1:Pe.circular&&!me.circular?"top"==Pe.circularLinkType?1:-1:me.circular&&Pe.circular?me.circularLinkType===Pe.circularLinkType&&"top"==me.circularLinkType?me.target.column===Pe.target.column?me.target.y1-Pe.target.y1:Pe.target.column-me.target.column:me.circularLinkType===Pe.circularLinkType&&"bottom"==me.circularLinkType?me.target.column===Pe.target.column?Pe.target.y1-me.target.y1:me.target.column-Pe.target.column:"top"==me.circularLinkType?-1:1:void 0});var ce=De.y0;be.forEach(function(me){me.y0=ce+me.width/2,ce+=me.width}),be.forEach(function(me,Pe){if("bottom"==me.circularLinkType){for(var Ae=Pe+1,Ce=0;Ae<he;Ae++)Ce+=be[Ae].width;me.y0=De.y1-Ce-me.width/2}})})}function ue(xe,ye,_e){xe.nodes.forEach(function(Ie){var De=xe.links.filter(function(ce){return f(ce.target,_e)==f(Ie,_e)}),be=De.length;be>1&&De.sort(function(ce,me){if(!ce.circular&&!me.circular){if(ce.source.column==me.source.column||!ge(ce,me))return ce.y0-me.y0;if(me.source.column<ce.source.column){var Pe=Q(me,ce);return ce.y0-Pe}if(ce.source.column<me.source.column)return Q(ce,me)-me.y0}return ce.circular&&!me.circular?"top"==ce.circularLinkType?-1:1:me.circular&&!ce.circular?"top"==me.circularLinkType?1:-1:ce.circular&&me.circular?ce.circularLinkType===me.circularLinkType&&"top"==ce.circularLinkType?ce.source.column===me.source.column?ce.source.y1-me.source.y1:ce.source.column-me.source.column:ce.circularLinkType===me.circularLinkType&&"bottom"==ce.circularLinkType?ce.source.column===me.source.column?ce.source.y1-me.source.y1:me.source.column-ce.source.column:"top"==ce.circularLinkType?-1:1:void 0});var he=Ie.y0;De.forEach(function(ce){ce.y1=he+ce.width/2,he+=ce.width}),De.forEach(function(ce,me){if("bottom"==ce.circularLinkType){for(var Pe=me+1,Ae=0;Pe<be;Pe++)Ae+=De[Pe].width;ce.y1=Ie.y1-Ae-ce.width/2}})})}function ge(xe,ye){return we(xe)==we(ye)}function we(xe){return xe.y0-xe.y1>0?"up":"down"}function Te(xe,ye){return f(xe.source,ye)==f(xe.target,ye)}},26800:function(ie,F,e){"use strict";e.r(F),e.d(F,{sankey:function(){return g},sankeyCenter:function(){return l},sankeyJustify:function(){return p},sankeyLeft:function(){return T},sankeyLinkHorizontal:function(){return f},sankeyRight:function(){return b}});var S=e(84706),k=e(34712);function o(C){return C.target.depth}function T(C){return C.depth}function b(C,w){return w-1-C.height}function p(C,w){return C.sourceLinks.length?C.depth:w-1}function l(C){return C.targetLinks.length?C.depth:C.sourceLinks.length?(0,S.SY)(C.sourceLinks,o)-1:0}function t(C){return function(){return C}}function i(C,w){return n(C.source,w.source)||C.index-w.index}function r(C,w){return n(C.target,w.target)||C.index-w.index}function n(C,w){return C.y0-w.y0}function a(C){return C.value}function s(C){return(C.y0+C.y1)/2}function c(C){return s(C.source)*C.value}function h(C){return s(C.target)*C.value}function u(C){return C.index}function y(C){return C.nodes}function d(C){return C.links}function m(C,w){var E=C.get(w);if(!E)throw new Error("missing: "+w);return E}function g(){var C=0,w=0,E=1,P=1,L=24,O=8,z=u,V=p,R=y,U=d,Z=32;function N(){var W={nodes:R.apply(null,arguments),links:U.apply(null,arguments)};return function(ae){ae.nodes.forEach(function(ne,Q){ne.index=Q,ne.sourceLinks=[],ne.targetLinks=[]});var re=(0,k.kH)(ae.nodes,z);ae.links.forEach(function(ne,Q){ne.index=Q;var $=ne.source,X=ne.target;"object"!=typeof $&&($=ne.source=m(re,$)),"object"!=typeof X&&(X=ne.target=m(re,X)),$.sourceLinks.push(ne),X.targetLinks.push(ne)})}(W),W.nodes.forEach(function(re){re.value=Math.max((0,S.oh)(re.sourceLinks,a),(0,S.oh)(re.targetLinks,a))}),function(ae){var re,ne,Q;for(re=ae.nodes,ne=[],Q=0;re.length;++Q,re=ne,ne=[])re.forEach(function(X){X.depth=Q,X.sourceLinks.forEach(function(oe){ne.indexOf(oe.target)<0&&ne.push(oe.target)})});for(re=ae.nodes,ne=[],Q=0;re.length;++Q,re=ne,ne=[])re.forEach(function(X){X.height=Q,X.targetLinks.forEach(function(oe){ne.indexOf(oe.source)<0&&ne.push(oe.source)})});var $=(E-C-L)/(Q-1);ae.nodes.forEach(function(X){X.x1=(X.x0=C+Math.max(0,Math.min(Q-1,Math.floor(V.call(null,X,Q))))*$)+L})}(W),function(ae){var re=(0,k.UJ)().key(function(fe){return fe.x0}).sortKeys(S.XE).entries(ae.nodes).map(function(fe){return fe.values});(function(){var fe=(0,S.kv)(re,function(we){return we.length}),ue=.6666666666666666*(P-w)/(fe-1);O>ue&&(O=ue);var ge=(0,S.SY)(re,function(we){return(P-w-(we.length-1)*O)/(0,S.oh)(we,a)});re.forEach(function(we){we.forEach(function(Te,xe){Te.y1=(Te.y0=xe)+Te.value*ge})}),ae.links.forEach(function(we){we.width=we.value*ge})})(),oe();for(var ne=1,Q=Z;Q>0;--Q)X(ne*=.99),oe(),$(ne),oe();function $(fe){re.forEach(function(ue){ue.forEach(function(ge){if(ge.targetLinks.length){var we=((0,S.oh)(ge.targetLinks,c)/(0,S.oh)(ge.targetLinks,a)-s(ge))*fe;ge.y0+=we,ge.y1+=we}})})}function X(fe){re.slice().reverse().forEach(function(ue){ue.forEach(function(ge){if(ge.sourceLinks.length){var we=((0,S.oh)(ge.sourceLinks,h)/(0,S.oh)(ge.sourceLinks,a)-s(ge))*fe;ge.y0+=we,ge.y1+=we}})})}function oe(){re.forEach(function(fe){var ue,ge,we,Te=w,xe=fe.length;for(fe.sort(n),we=0;we<xe;++we)(ge=Te-(ue=fe[we]).y0)>0&&(ue.y0+=ge,ue.y1+=ge),Te=ue.y1+O;if((ge=Te-O-P)>0)for(Te=ue.y0-=ge,ue.y1-=ge,we=xe-2;we>=0;--we)(ge=(ue=fe[we]).y1+O-Te)>0&&(ue.y0-=ge,ue.y1-=ge),Te=ue.y0})}}(W),G(W),W}function G(W){W.nodes.forEach(function(ae){ae.sourceLinks.sort(r),ae.targetLinks.sort(i)}),W.nodes.forEach(function(ae){var re=ae.y0,ne=re;ae.sourceLinks.forEach(function(Q){Q.y0=re+Q.width/2,re+=Q.width}),ae.targetLinks.forEach(function(Q){Q.y1=ne+Q.width/2,ne+=Q.width})})}return N.update=function(W){return G(W),W},N.nodeId=function(W){return arguments.length?(z="function"==typeof W?W:t(W),N):z},N.nodeAlign=function(W){return arguments.length?(V="function"==typeof W?W:t(W),N):V},N.nodeWidth=function(W){return arguments.length?(L=+W,N):L},N.nodePadding=function(W){return arguments.length?(O=+W,N):O},N.nodes=function(W){return arguments.length?(R="function"==typeof W?W:t(W),N):R},N.links=function(W){return arguments.length?(U="function"==typeof W?W:t(W),N):U},N.size=function(W){return arguments.length?(C=w=0,E=+W[0],P=+W[1],N):[E-C,P-w]},N.extent=function(W){return arguments.length?(C=+W[0][0],E=+W[1][0],w=+W[0][1],P=+W[1][1],N):[[C,w],[E,P]]},N.iterations=function(W){return arguments.length?(Z=+W,N):Z},N}var x=e(10132);function v(C){return[C.source.x1,C.y0]}function _(C){return[C.target.x0,C.y1]}function f(){return(0,x.ak)().source(v).target(_)}},33428:function(ie,F,e){var S,k;(function(){var o={version:"3.8.2"},T=[].slice,b=function(I){return T.call(I)},p=self.document;function l(I){return I&&(I.ownerDocument||I.document||I).documentElement}function t(I){return I&&(I.ownerDocument&&I.ownerDocument.defaultView||I.document&&I||I.defaultView)}if(p)try{b(p.documentElement.childNodes)}catch{b=function(H){for(var te=H.length,le=new Array(te);te--;)le[te]=H[te];return le}}if(Date.now||(Date.now=function(){return+new Date}),p)try{p.createElement("DIV").style.setProperty("opacity",0,"")}catch{var i=this.Element.prototype,r=i.setAttribute,n=i.setAttributeNS,a=this.CSSStyleDeclaration.prototype,s=a.setProperty;i.setAttribute=function(H,te){r.call(this,H,te+"")},i.setAttributeNS=function(H,te,le){n.call(this,H,te,le+"")},a.setProperty=function(H,te,le){s.call(this,H,te+"",le)}}function c(I,H){return I<H?-1:I>H?1:I>=H?0:NaN}function h(I){return null===I?NaN:+I}function u(I){return!isNaN(I)}function y(I){return{left:function(H,te,le,pe){for(arguments.length<3&&(le=0),arguments.length<4&&(pe=H.length);le<pe;){var ke=le+pe>>>1;I(H[ke],te)<0?le=ke+1:pe=ke}return le},right:function(H,te,le,pe){for(arguments.length<3&&(le=0),arguments.length<4&&(pe=H.length);le<pe;){var ke=le+pe>>>1;I(H[ke],te)>0?pe=ke:le=ke+1}return le}}}o.ascending=c,o.descending=function(I,H){return H<I?-1:H>I?1:H>=I?0:NaN},o.min=function(I,H){var te,le,pe=-1,ke=I.length;if(1===arguments.length){for(;++pe<ke;)if(null!=(le=I[pe])&&le>=le){te=le;break}for(;++pe<ke;)null!=(le=I[pe])&&te>le&&(te=le)}else{for(;++pe<ke;)if(null!=(le=H.call(I,I[pe],pe))&&le>=le){te=le;break}for(;++pe<ke;)null!=(le=H.call(I,I[pe],pe))&&te>le&&(te=le)}return te},o.max=function(I,H){var te,le,pe=-1,ke=I.length;if(1===arguments.length){for(;++pe<ke;)if(null!=(le=I[pe])&&le>=le){te=le;break}for(;++pe<ke;)null!=(le=I[pe])&&le>te&&(te=le)}else{for(;++pe<ke;)if(null!=(le=H.call(I,I[pe],pe))&&le>=le){te=le;break}for(;++pe<ke;)null!=(le=H.call(I,I[pe],pe))&&le>te&&(te=le)}return te},o.extent=function(I,H){var te,le,pe,ke=-1,Fe=I.length;if(1===arguments.length){for(;++ke<Fe;)if(null!=(le=I[ke])&&le>=le){te=pe=le;break}for(;++ke<Fe;)null!=(le=I[ke])&&(te>le&&(te=le),pe<le&&(pe=le))}else{for(;++ke<Fe;)if(null!=(le=H.call(I,I[ke],ke))&&le>=le){te=pe=le;break}for(;++ke<Fe;)null!=(le=H.call(I,I[ke],ke))&&(te>le&&(te=le),pe<le&&(pe=le))}return[te,pe]},o.sum=function(I,H){var te,le=0,pe=I.length,ke=-1;if(1===arguments.length)for(;++ke<pe;)u(te=+I[ke])&&(le+=te);else for(;++ke<pe;)u(te=+H.call(I,I[ke],ke))&&(le+=te);return le},o.mean=function(I,H){var te,le=0,pe=I.length,ke=-1,Fe=pe;if(1===arguments.length)for(;++ke<pe;)u(te=h(I[ke]))?le+=te:--Fe;else for(;++ke<pe;)u(te=h(H.call(I,I[ke],ke)))?le+=te:--Fe;if(Fe)return le/Fe},o.quantile=function(I,H){var te=(I.length-1)*H+1,le=Math.floor(te),pe=+I[le-1],ke=te-le;return ke?pe+ke*(I[le]-pe):pe},o.median=function(I,H){var te,le=[],pe=I.length,ke=-1;if(1===arguments.length)for(;++ke<pe;)u(te=h(I[ke]))&&le.push(te);else for(;++ke<pe;)u(te=h(H.call(I,I[ke],ke)))&&le.push(te);if(le.length)return o.quantile(le.sort(c),.5)},o.variance=function(I,H){var te,le,pe=I.length,ke=0,Fe=0,Ve=-1,Xe=0;if(1===arguments.length)for(;++Ve<pe;)u(te=h(I[Ve]))&&(Fe+=(le=te-ke)*(te-(ke+=le/++Xe)));else for(;++Ve<pe;)u(te=h(H.call(I,I[Ve],Ve)))&&(Fe+=(le=te-ke)*(te-(ke+=le/++Xe)));if(Xe>1)return Fe/(Xe-1)},o.deviation=function(){var I=o.variance.apply(this,arguments);return I&&Math.sqrt(I)};var d=y(c);function m(I){return I.length}o.bisectLeft=d.left,o.bisect=o.bisectRight=d.right,o.bisector=function(I){return y(1===I.length?function(H,te){return c(I(H),te)}:I)},o.shuffle=function(I,H,te){(ke=arguments.length)<3&&(te=I.length,ke<2&&(H=0));for(var le,pe,ke=te-H;ke;)pe=Math.random()*ke--|0,le=I[ke+H],I[ke+H]=I[pe+H],I[pe+H]=le;return I},o.permute=function(I,H){for(var te=H.length,le=new Array(te);te--;)le[te]=I[H[te]];return le},o.pairs=function(I){for(var H=0,te=I.length-1,le=I[0],pe=new Array(te<0?0:te);H<te;)pe[H]=[le,le=I[++H]];return pe},o.transpose=function(I){if(!(pe=I.length))return[];for(var H=-1,te=o.min(I,m),le=new Array(te);++H<te;)for(var pe,ke=-1,Fe=le[H]=new Array(pe);++ke<pe;)Fe[ke]=I[ke][H];return le},o.zip=function(){return o.transpose(arguments)},o.keys=function(I){var H=[];for(var te in I)H.push(te);return H},o.values=function(I){var H=[];for(var te in I)H.push(I[te]);return H},o.entries=function(I){var H=[];for(var te in I)H.push({key:te,value:I[te]});return H},o.merge=function(I){for(var H,te,le,pe=I.length,ke=-1,Fe=0;++ke<pe;)Fe+=I[ke].length;for(te=new Array(Fe);--pe>=0;)for(H=(le=I[pe]).length;--H>=0;)te[--Fe]=le[H];return te};var g=Math.abs;function x(I,H){for(var te in H)Object.defineProperty(I.prototype,te,{value:H[te],enumerable:!1})}function v(){this._=Object.create(null)}o.range=function(I,H,te){if(arguments.length<3&&(te=1,arguments.length<2&&(H=I,I=0)),(H-I)/te==1/0)throw new Error("infinite range");var le,pe=[],ke=function(Ve){for(var Xe=1;Ve*Xe%1;)Xe*=10;return Xe}(g(te)),Fe=-1;if(I*=ke,H*=ke,(te*=ke)<0)for(;(le=I+te*++Fe)>H;)pe.push(le/ke);else for(;(le=I+te*++Fe)<H;)pe.push(le/ke);return pe},o.map=function(I,H){var te=new v;if(I instanceof v)I.forEach(function(Ve,Xe){te.set(Ve,Xe)});else if(Array.isArray(I)){var le,pe=-1,ke=I.length;if(1===arguments.length)for(;++pe<ke;)te.set(pe,I[pe]);else for(;++pe<ke;)te.set(H.call(I,le=I[pe],pe),le)}else for(var Fe in I)te.set(Fe,I[Fe]);return te};var _="__proto__",f="\0";function C(I){return(I+="")===_||I[0]===f?f+I:I}function w(I){return(I+="")[0]===f?I.slice(1):I}function E(I){return C(I)in this._}function P(I){return(I=C(I))in this._&&delete this._[I]}function L(){var I=[];for(var H in this._)I.push(w(H));return I}function O(){var I=0;for(var H in this._)++I;return I}function z(){for(var I in this._)return!1;return!0}function V(){this._=Object.create(null)}function R(I){return I}function U(I,H,te){return function(){var le=te.apply(H,arguments);return le===H?I:le}}function Z(I,H){if(H in I)return H;H=H.charAt(0).toUpperCase()+H.slice(1);for(var te=0,le=N.length;te<le;++te){var pe=N[te]+H;if(pe in I)return pe}}x(v,{has:E,get:function(I){return this._[C(I)]},set:function(I,H){return this._[C(I)]=H},remove:P,keys:L,values:function(){var I=[];for(var H in this._)I.push(this._[H]);return I},entries:function(){var I=[];for(var H in this._)I.push({key:w(H),value:this._[H]});return I},size:O,empty:z,forEach:function(I){for(var H in this._)I.call(this,w(H),this._[H])}}),o.nest=function(){var I,H,te={},le=[],pe=[];function ke(Ve,Xe,Je){if(Je>=le.length)return H?H.call(te,Xe):I?Xe.sort(I):Xe;for(var ct,vt,_t,It,Ft=-1,Ot=Xe.length,Yt=le[Je++],jt=new v;++Ft<Ot;)(It=jt.get(ct=Yt(vt=Xe[Ft])))?It.push(vt):jt.set(ct,[vt]);return Ve?(vt=Ve(),_t=function(ln,tn){vt.set(ln,ke(Ve,tn,Je))}):(vt={},_t=function(ln,tn){vt[ln]=ke(Ve,tn,Je)}),jt.forEach(_t),vt}function Fe(Ve,Xe){if(Xe>=le.length)return Ve;var Je=[],ct=pe[Xe++];return Ve.forEach(function(vt,_t){Je.push({key:vt,values:Fe(_t,Xe)})}),ct?Je.sort(function(vt,_t){return ct(vt.key,_t.key)}):Je}return te.map=function(Ve,Xe){return ke(Xe,Ve,0)},te.entries=function(Ve){return Fe(ke(o.map,Ve,0),0)},te.key=function(Ve){return le.push(Ve),te},te.sortKeys=function(Ve){return pe[le.length-1]=Ve,te},te.sortValues=function(Ve){return I=Ve,te},te.rollup=function(Ve){return H=Ve,te},te},o.set=function(I){var H=new V;if(I)for(var te=0,le=I.length;te<le;++te)H.add(I[te]);return H},x(V,{has:E,add:function(I){return this._[C(I+="")]=!0,I},remove:P,values:L,size:O,empty:z,forEach:function(I){for(var H in this._)I.call(this,w(H))}}),o.behavior={},o.rebind=function(I,H){for(var te,le=1,pe=arguments.length;++le<pe;)I[te=arguments[le]]=U(I,H,H[te]);return I};var N=["webkit","ms","moz","Moz","o","O"];function G(){}function W(){}function ae(I){var H=[],te=new v;function le(){for(var pe,ke=H,Fe=-1,Ve=ke.length;++Fe<Ve;)(pe=ke[Fe].on)&&pe.apply(this,arguments);return I}return le.on=function(pe,ke){var Fe,Ve=te.get(pe);return arguments.length<2?Ve&&Ve.on:(Ve&&(Ve.on=null,H=H.slice(0,Fe=H.indexOf(Ve)).concat(H.slice(Fe+1)),te.remove(pe)),ke&&H.push(te.set(pe,{on:ke})),I)},le}function re(){o.event.preventDefault()}function ne(){for(var I,H=o.event;I=H.sourceEvent;)H=I;return H}function Q(I){for(var H=new W,te=0,le=arguments.length;++te<le;)H[arguments[te]]=ae(H);return H.of=function(pe,ke){return function(Fe){try{var Ve=Fe.sourceEvent=o.event;Fe.target=I,o.event=Fe,H[Fe.type].apply(pe,ke)}finally{o.event=Ve}}},H}o.dispatch=function(){for(var I=new W,H=-1,te=arguments.length;++H<te;)I[arguments[H]]=ae(I);return I},W.prototype.on=function(I,H){var te=I.indexOf("."),le="";if(te>=0&&(le=I.slice(te+1),I=I.slice(0,te)),I)return arguments.length<2?this[I].on(le):this[I].on(le,H);if(2===arguments.length){if(null==H)for(I in this)this.hasOwnProperty(I)&&this[I].on(le,null);return this}},o.event=null,o.requote=function(I){return I.replace($,"\\$&")};var $=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,X={}.__proto__?function(I,H){I.__proto__=H}:function(I,H){for(var te in H)I[te]=H[te]};function oe(I){return X(I,we),I}var fe=function(I,H){return H.querySelector(I)},ue=function(I,H){return H.querySelectorAll(I)},ge=function(I,H){var te=I.matches||I[Z(I,"matchesSelector")];return(ge=function(le,pe){return te.call(le,pe)})(I,H)};"function"==typeof Sizzle&&(fe=function(I,H){return Sizzle(I,H)[0]||null},ue=Sizzle,ge=Sizzle.matchesSelector),o.selection=function(){return o.select(p.documentElement)};var we=o.selection.prototype=[];function Te(I){return"function"==typeof I?I:function(){return fe(I,this)}}function xe(I){return"function"==typeof I?I:function(){return ue(I,this)}}we.select=function(I){var H,te,le,pe,ke=[];I=Te(I);for(var Fe=-1,Ve=this.length;++Fe<Ve;){ke.push(H=[]),H.parentNode=(le=this[Fe]).parentNode;for(var Xe=-1,Je=le.length;++Xe<Je;)(pe=le[Xe])?(H.push(te=I.call(pe,pe.__data__,Xe,Fe)),te&&"__data__"in pe&&(te.__data__=pe.__data__)):H.push(null)}return oe(ke)},we.selectAll=function(I){var H,te,le=[];I=xe(I);for(var pe=-1,ke=this.length;++pe<ke;)for(var Fe=this[pe],Ve=-1,Xe=Fe.length;++Ve<Xe;)(te=Fe[Ve])&&(le.push(H=b(I.call(te,te.__data__,Ve,pe))),H.parentNode=te);return oe(le)};var ye="http://www.w3.org/1999/xhtml",_e={svg:"http://www.w3.org/2000/svg",xhtml:ye,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ie(I,H){return I=o.ns.qualify(I),null==H?I.local?function(){this.removeAttributeNS(I.space,I.local)}:function(){this.removeAttribute(I)}:"function"==typeof H?I.local?function(){var te=H.apply(this,arguments);null==te?this.removeAttributeNS(I.space,I.local):this.setAttributeNS(I.space,I.local,te)}:function(){var te=H.apply(this,arguments);null==te?this.removeAttribute(I):this.setAttribute(I,te)}:I.local?function(){this.setAttributeNS(I.space,I.local,H)}:function(){this.setAttribute(I,H)}}function De(I){return I.trim().replace(/\s+/g," ")}function be(I){return new RegExp("(?:^|\\s+)"+o.requote(I)+"(?:\\s+|$)","g")}function he(I){return(I+"").trim().split(/^|\s+/)}function ce(I,H){var te=(I=he(I).map(me)).length;return"function"==typeof H?function(){for(var le=-1,pe=H.apply(this,arguments);++le<te;)I[le](this,pe)}:function(){for(var le=-1;++le<te;)I[le](this,H)}}function me(I){var H=be(I);return function(te,le){if(pe=te.classList)return le?pe.add(I):pe.remove(I);var pe=te.getAttribute("class")||"";le?(H.lastIndex=0,H.test(pe)||te.setAttribute("class",De(pe+" "+I))):te.setAttribute("class",De(pe.replace(H," ")))}}function Pe(I,H,te){return null==H?function(){this.style.removeProperty(I)}:"function"==typeof H?function(){var le=H.apply(this,arguments);null==le?this.style.removeProperty(I):this.style.setProperty(I,le,te)}:function(){this.style.setProperty(I,H,te)}}function Ae(I,H){return null==H?function(){delete this[I]}:"function"==typeof H?function(){var te=H.apply(this,arguments);null==te?delete this[I]:this[I]=te}:function(){this[I]=H}}function Ce(I){return"function"==typeof I?I:(I=o.ns.qualify(I)).local?function(){return this.ownerDocument.createElementNS(I.space,I.local)}:function(){var H=this.ownerDocument,te=this.namespaceURI;return te===ye&&H.documentElement.namespaceURI===ye?H.createElement(I):H.createElementNS(te,I)}}function Oe(){var I=this.parentNode;I&&I.removeChild(this)}function Ne(I){return{__data__:I}}function je(I){return function(){return ge(this,I)}}function ve(I){return arguments.length||(I=c),function(H,te){return H&&te?I(H.__data__,te.__data__):!H-!te}}function Me(I,H){for(var te=0,le=I.length;te<le;te++)for(var pe,ke=I[te],Fe=0,Ve=ke.length;Fe<Ve;Fe++)(pe=ke[Fe])&&H(pe,Fe,te);return I}function Le(I){return X(I,Ue),I}o.ns={prefix:_e,qualify:function(I){var H=I.indexOf(":"),te=I;return H>=0&&"xmlns"!==(te=I.slice(0,H))&&(I=I.slice(H+1)),_e.hasOwnProperty(te)?{space:_e[te],local:I}:I}},we.attr=function(I,H){if(arguments.length<2){if("string"==typeof I){var te=this.node();return(I=o.ns.qualify(I)).local?te.getAttributeNS(I.space,I.local):te.getAttribute(I)}for(H in I)this.each(Ie(H,I[H]));return this}return this.each(Ie(I,H))},we.classed=function(I,H){if(arguments.length<2){if("string"==typeof I){var te=this.node(),le=(I=he(I)).length,pe=-1;if(H=te.classList){for(;++pe<le;)if(!H.contains(I[pe]))return!1}else for(H=te.getAttribute("class");++pe<le;)if(!be(I[pe]).test(H))return!1;return!0}for(H in I)this.each(ce(H,I[H]));return this}return this.each(ce(I,H))},we.style=function(I,H,te){var le=arguments.length;if(le<3){if("string"!=typeof I){for(te in le<2&&(H=""),I)this.each(Pe(te,I[te],H));return this}if(le<2){var pe=this.node();return t(pe).getComputedStyle(pe,null).getPropertyValue(I)}te=""}return this.each(Pe(I,H,te))},we.property=function(I,H){if(arguments.length<2){if("string"==typeof I)return this.node()[I];for(H in I)this.each(Ae(H,I[H]));return this}return this.each(Ae(I,H))},we.text=function(I){return arguments.length?this.each("function"==typeof I?function(){var H=I.apply(this,arguments);this.textContent=H??""}:null==I?function(){this.textContent=""}:function(){this.textContent=I}):this.node().textContent},we.html=function(I){return arguments.length?this.each("function"==typeof I?function(){var H=I.apply(this,arguments);this.innerHTML=H??""}:null==I?function(){this.innerHTML=""}:function(){this.innerHTML=I}):this.node().innerHTML},we.append=function(I){return I=Ce(I),this.select(function(){return this.appendChild(I.apply(this,arguments))})},we.insert=function(I,H){return I=Ce(I),H=Te(H),this.select(function(){return this.insertBefore(I.apply(this,arguments),H.apply(this,arguments)||null)})},we.remove=function(){return this.each(Oe)},we.data=function(I,H){var te,le,pe=-1,ke=this.length;if(!arguments.length){for(I=new Array(ke=(te=this[0]).length);++pe<ke;)(le=te[pe])&&(I[pe]=le.__data__);return I}function Fe(ct,vt){var _t,It,Ft,Ot=ct.length,Yt=vt.length,jt=Math.min(Ot,Yt),ln=new Array(Yt),tn=new Array(Yt),Jt=new Array(Ot);if(H){var Mn,Ln=new v,Un=new Array(Ot);for(_t=-1;++_t<Ot;)(It=ct[_t])&&(Ln.has(Mn=H.call(It,It.__data__,_t))?Jt[_t]=It:Ln.set(Mn,It),Un[_t]=Mn);for(_t=-1;++_t<Yt;)(It=Ln.get(Mn=H.call(vt,Ft=vt[_t],_t)))?!0!==It&&(ln[_t]=It,It.__data__=Ft):tn[_t]=Ne(Ft),Ln.set(Mn,!0);for(_t=-1;++_t<Ot;)_t in Un&&!0!==Ln.get(Un[_t])&&(Jt[_t]=ct[_t])}else{for(_t=-1;++_t<jt;)Ft=vt[_t],(It=ct[_t])?(It.__data__=Ft,ln[_t]=It):tn[_t]=Ne(Ft);for(;_t<Yt;++_t)tn[_t]=Ne(vt[_t]);for(;_t<Ot;++_t)Jt[_t]=ct[_t]}tn.update=ln,tn.parentNode=ln.parentNode=Jt.parentNode=ct.parentNode,Ve.push(tn),Xe.push(ln),Je.push(Jt)}var Ve=Le([]),Xe=oe([]),Je=oe([]);if("function"==typeof I)for(;++pe<ke;)Fe(te=this[pe],I.call(te,te.parentNode.__data__,pe));else for(;++pe<ke;)Fe(te=this[pe],I);return Xe.enter=function(){return Ve},Xe.exit=function(){return Je},Xe},we.datum=function(I){return arguments.length?this.property("__data__",I):this.property("__data__")},we.filter=function(I){var H,te,le,pe=[];"function"!=typeof I&&(I=je(I));for(var ke=0,Fe=this.length;ke<Fe;ke++){pe.push(H=[]),H.parentNode=(te=this[ke]).parentNode;for(var Ve=0,Xe=te.length;Ve<Xe;Ve++)(le=te[Ve])&&I.call(le,le.__data__,Ve,ke)&&H.push(le)}return oe(pe)},we.order=function(){for(var I=-1,H=this.length;++I<H;)for(var te,le=this[I],pe=le.length-1,ke=le[pe];--pe>=0;)(te=le[pe])&&(ke&&ke!==te.nextSibling&&ke.parentNode.insertBefore(te,ke),ke=te);return this},we.sort=function(I){I=ve.apply(this,arguments);for(var H=-1,te=this.length;++H<te;)this[H].sort(I);return this.order()},we.each=function(I){return Me(this,function(H,te,le){I.call(H,H.__data__,te,le)})},we.call=function(I){var H=b(arguments);return I.apply(H[0]=this,H),this},we.empty=function(){return!this.node()},we.node=function(){for(var I=0,H=this.length;I<H;I++)for(var te=this[I],le=0,pe=te.length;le<pe;le++){var ke=te[le];if(ke)return ke}return null},we.size=function(){var I=0;return Me(this,function(){++I}),I};var Ue=[];function ze(I,H,te){var le="__on"+I,pe=I.indexOf("."),ke=Ke;pe>0&&(I=I.slice(0,pe));var Fe=qe.get(I);function Ve(){var Xe=this[le];Xe&&(this.removeEventListener(I,Xe,Xe.$),delete this[le])}return Fe&&(I=Fe,ke=it),pe?H?function(){var Xe=ke(H,b(arguments));Ve.call(this),this.addEventListener(I,this[le]=Xe,Xe.$=te),Xe._=H}:Ve:H?G:function(){var Xe,Je=new RegExp("^__on([^.]+)"+o.requote(I)+"$");for(var ct in this)if(Xe=ct.match(Je)){var vt=this[ct];this.removeEventListener(Xe[1],vt,vt.$),delete this[ct]}}}o.selection.enter=Le,o.selection.enter.prototype=Ue,Ue.append=we.append,Ue.empty=we.empty,Ue.node=we.node,Ue.call=we.call,Ue.size=we.size,Ue.select=function(I){for(var H,te,le,pe,ke,Fe=[],Ve=-1,Xe=this.length;++Ve<Xe;){le=(pe=this[Ve]).update,Fe.push(H=[]),H.parentNode=pe.parentNode;for(var Je=-1,ct=pe.length;++Je<ct;)(ke=pe[Je])?(H.push(le[Je]=te=I.call(pe.parentNode,ke.__data__,Je,Ve)),te.__data__=ke.__data__):H.push(null)}return oe(Fe)},Ue.insert=function(I,H){var te,le,pe;return arguments.length<2&&(te=this,H=function(ke,Fe,Ve){var Xe,Je=te[Ve].update,ct=Je.length;for(Ve!=pe&&(pe=Ve,le=0),Fe>=le&&(le=Fe+1);!(Xe=Je[le])&&++le<ct;);return Xe}),we.insert.call(this,I,H)},o.select=function(I){var H;return"string"==typeof I?(H=[fe(I,p)]).parentNode=p.documentElement:(H=[I]).parentNode=l(I),oe([H])},o.selectAll=function(I){var H;return"string"==typeof I?(H=b(ue(I,p))).parentNode=p.documentElement:(H=b(I)).parentNode=null,oe([H])},we.on=function(I,H,te){var le=arguments.length;if(le<3){if("string"!=typeof I){for(te in le<2&&(H=!1),I)this.each(ze(te,I[te],H));return this}if(le<2)return(le=this.node()["__on"+I])&&le._;te=!1}return this.each(ze(I,H,te))};var qe=o.map({mouseenter:"mouseover",mouseleave:"mouseout"});function Ke(I,H){return function(te){var le=o.event;o.event=te,H[0]=this.__data__;try{I.apply(this,H)}finally{o.event=le}}}function it(I,H){var te=Ke(I,H);return function(le){var ke=le.relatedTarget;ke&&(ke===this||8&ke.compareDocumentPosition(this))||te.call(this,le)}}p&&qe.forEach(function(I){"on"+I in p&&qe.remove(I)});var ft,dt=0;function kt(I){var H=".dragsuppress-"+ ++dt,te="click"+H,le=o.select(t(I)).on("touchmove"+H,re).on("dragstart"+H,re).on("selectstart"+H,re);if(null==ft&&(ft=!("onselectstart"in I)&&Z(I.style,"userSelect")),ft){var pe=l(I).style,ke=pe[ft];pe[ft]="none"}return function(Fe){if(le.on(H,null),ft&&(pe[ft]=ke),Fe){var Ve=function(){le.on(te,null)};le.on(te,function(){re(),Ve()},!0),setTimeout(Ve,0)}}}o.mouse=function(I){return Tt(I,ne())};var St=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Tt(I,H){H.changedTouches&&(H=H.changedTouches[0]);var te=I.ownerSVGElement||I;if(te.createSVGPoint){var le=te.createSVGPoint();if(St<0){var pe=t(I);if(pe.scrollX||pe.scrollY){var ke=(te=o.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();St=!(ke.f||ke.e),te.remove()}}return St?(le.x=H.pageX,le.y=H.pageY):(le.x=H.clientX,le.y=H.clientY),[(le=le.matrixTransform(I.getScreenCTM().inverse())).x,le.y]}var Fe=I.getBoundingClientRect();return[H.clientX-Fe.left-I.clientLeft,H.clientY-Fe.top-I.clientTop]}function lt(){return o.event.changedTouches[0].identifier}o.touch=function(I,H,te){if(arguments.length<3&&(te=H,H=ne().changedTouches),H)for(var le,pe=0,ke=H.length;pe<ke;++pe)if((le=H[pe]).identifier===te)return Tt(I,le)},o.behavior.drag=function(){var I=Q(pe,"drag","dragstart","dragend"),H=null,te=ke(G,o.mouse,t,"mousemove","mouseup"),le=ke(lt,o.touch,R,"touchmove","touchend");function pe(){this.on("mousedown.drag",te).on("touchstart.drag",le)}function ke(Fe,Ve,Xe,Je,ct){return function(){var vt,It=o.event.target.correspondingElement||o.event.target,Ft=this.parentNode,Ot=I.of(this,arguments),Yt=0,jt=Fe(),ln=".drag"+(null==jt?"":"-"+jt),tn=o.select(Xe(It)).on(Je+ln,function(){var Ln,Un,Xn=Ve(Ft,jt);Xn&&(Yt|=(Ln=Xn[0]-Mn[0])|(Un=Xn[1]-Mn[1]),Mn=Xn,Ot({type:"drag",x:Xn[0]+vt[0],y:Xn[1]+vt[1],dx:Ln,dy:Un}))}).on(ct+ln,function(){Ve(Ft,jt)&&(tn.on(Je+ln,null).on(ct+ln,null),Jt(Yt),Ot({type:"dragend"}))}),Jt=kt(It),Mn=Ve(Ft,jt);vt=H?[(vt=H.apply(this,arguments)).x-Mn[0],vt.y-Mn[1]]:[0,0],Ot({type:"dragstart"})}}return pe.origin=function(Fe){return arguments.length?(H=Fe,pe):H},o.rebind(pe,I,"on")},o.touches=function(I,H){return arguments.length<2&&(H=ne().touches),H?b(H).map(function(te){var le=Tt(I,te);return le.identifier=te.identifier,le}):[]};var ot=1e-6,Rt=ot*ot,Vt=Math.PI,Ht=2*Vt,zt=Ht-ot,Qe=Vt/2,nt=Vt/180,We=180/Vt;function et(I){return I>1?Qe:I<-1?-Qe:Math.asin(I)}function gt(I){return((I=Math.exp(I))+1/I)/2}var ht=Math.SQRT2;o.interpolateZoom=function(I,H){var te,le,pe=I[0],ke=I[1],Fe=I[2],Je=H[2],ct=H[0]-pe,vt=H[1]-ke,_t=ct*ct+vt*vt;if(_t<Rt)le=Math.log(Je/Fe)/ht,te=function(ln){return[pe+ln*ct,ke+ln*vt,Fe*Math.exp(ht*ln*le)]};else{var It=Math.sqrt(_t),Ft=(Je*Je-Fe*Fe+4*_t)/(2*Fe*2*It),Ot=(Je*Je-Fe*Fe-4*_t)/(2*Je*2*It),Yt=Math.log(Math.sqrt(Ft*Ft+1)-Ft),jt=Math.log(Math.sqrt(Ot*Ot+1)-Ot);le=(jt-Yt)/ht,te=function(ln){var tn,Un,Jt=ln*le,Mn=gt(Yt),Ln=Fe/(2*It)*(Mn*(tn=ht*Jt+Yt,((tn=Math.exp(2*tn))-1)/(tn+1))-(Un=Yt,((Un=Math.exp(Un))-1/Un)/2));return[pe+Ln*ct,ke+Ln*vt,Fe*Mn/gt(ht*Jt+Yt)]}}return te.duration=1e3*le,te},o.behavior.zoom=function(){var I,H,te,le,pe,ke,Fe,Ve,Xe,Je={x:0,y:0,k:1},ct=[960,500],vt=ut,_t=250,It=0,Ft="mousedown.zoom",Ot="mousemove.zoom",Yt="mouseup.zoom",jt="touchstart.zoom",ln=Q(tn,"zoomstart","zoom","zoomend");function tn(_r){_r.on(Ft,hr).on(He+".zoom",Nr).on("dblclick.zoom",ei).on(jt,Cr)}function Jt(_r){return[(_r[0]-Je.x)/Je.k,(_r[1]-Je.y)/Je.k]}function Mn(_r){Je.k=Math.max(vt[0],Math.min(vt[1],_r))}function Ln(_r,Sr){var Hr;Je.x+=_r[0]-(Sr=[(Hr=Sr)[0]*Je.k+Je.x,Hr[1]*Je.k+Je.y])[0],Je.y+=_r[1]-Sr[1]}function Un(_r,Sr,Hr,Pr){_r.__chart__={x:Je.x,y:Je.y,k:Je.k},Mn(Math.pow(2,Pr)),Ln(H=Sr,Hr),_r=o.select(_r),_t>0&&(_r=_r.transition().duration(_t)),_r.call(tn.event)}function Xn(){Fe&&Fe.domain(ke.range().map(function(_r){return(_r-Je.x)/Je.k}).map(ke.invert)),Xe&&Xe.domain(Ve.range().map(function(_r){return(_r-Je.y)/Je.k}).map(Ve.invert))}function sr(_r){It++||_r({type:"zoomstart"})}function xr(_r){Xn(),_r({type:"zoom",scale:Je.k,translate:[Je.x,Je.y]})}function Mr(_r){--It||(_r({type:"zoomend"}),H=null)}function hr(){var _r=this,Sr=ln.of(_r,arguments),Hr=0,Pr=o.select(t(_r)).on(Ot,function(){Hr=1,Ln(o.mouse(_r),Kr),xr(Sr)}).on(Yt,function(){Pr.on(Ot,null).on(Yt,null),ii(Hr),Mr(Sr)}),Kr=Jt(o.mouse(_r)),ii=kt(_r);Yo.call(_r),sr(Sr)}function Cr(){var _r,Sr=this,Hr=ln.of(Sr,arguments),Pr={},Kr=0,ii=".zoom-"+o.event.changedTouches[0].identifier,di="touchmove"+ii,mi="touchend"+ii,Ti=[],Li=o.select(Sr),pa=kt(Sr);function Pa(){var Ki=o.touches(Sr);return _r=Je.k,Ki.forEach(function(Pi){Pi.identifier in Pr&&(Pr[Pi.identifier]=Jt(Pi))}),Ki}function to(){var Ki=o.event.target;o.select(Ki).on(di,Ja).on(mi,ya),Ti.push(Ki);for(var Pi=o.event.changedTouches,ga=0,ia=Pi.length;ga<ia;++ga)Pr[Pi[ga].identifier]=null;var bi=Pa(),Ma=Date.now();if(1===bi.length){if(Ma-pe<500){var ma=bi[0];Un(Sr,ma,Pr[ma.identifier],Math.floor(Math.log(Je.k)/Math.LN2)+1),re()}pe=Ma}else if(bi.length>1){var Wa=bi[1],$s=(ma=bi[0])[0]-Wa[0],hc=ma[1]-Wa[1];Kr=$s*$s+hc*hc}}function Ja(){var Ki,Pi,ga,ia,bi=o.touches(Sr);Yo.call(Sr);for(var Ma=0,ma=bi.length;Ma<ma;++Ma,ia=null)if(ia=Pr[(ga=bi[Ma]).identifier]){if(Pi)break;Ki=ga,Pi=ia}if(ia){var Wa=(Wa=ga[0]-Ki[0])*Wa+(Wa=ga[1]-Ki[1])*Wa,$s=Kr&&Math.sqrt(Wa/Kr);Ki=[(Ki[0]+ga[0])/2,(Ki[1]+ga[1])/2],Pi=[(Pi[0]+ia[0])/2,(Pi[1]+ia[1])/2],Mn($s*_r)}pe=null,Ln(Ki,Pi),xr(Hr)}function ya(){if(o.event.touches.length){for(var Ki=o.event.changedTouches,Pi=0,ga=Ki.length;Pi<ga;++Pi)delete Pr[Ki[Pi].identifier];for(var ia in Pr)return void Pa()}o.selectAll(Ti).on(ii,null),Li.on(Ft,hr).on(jt,Cr),pa(),Mr(Hr)}to(),sr(Hr),Li.on(Ft,null).on(jt,to)}function Nr(){var _r=ln.of(this,arguments);le?clearTimeout(le):(Yo.call(this),I=Jt(H=te||o.mouse(this)),sr(_r)),le=setTimeout(function(){le=null,Mr(_r)},50),re(),Mn(Math.pow(2,.002*Ge())*Je.k),Ln(H,I),xr(_r)}function ei(){var _r=o.mouse(this),Sr=Math.log(Je.k)/Math.LN2;Un(this,_r,Jt(_r),o.event.shiftKey?Math.ceil(Sr)-1:Math.floor(Sr)+1)}return He||(He="onwheel"in p?(Ge=function(){return-o.event.deltaY*(o.event.deltaMode?120:1)},"wheel"):"onmousewheel"in p?(Ge=function(){return o.event.wheelDelta},"mousewheel"):(Ge=function(){return-o.event.detail},"MozMousePixelScroll")),tn.event=function(_r){_r.each(function(){var Sr=ln.of(this,arguments),Hr=Je;La?o.select(this).transition().each("start.zoom",function(){Je=this.__chart__||{x:0,y:0,k:1},sr(Sr)}).tween("zoom:zoom",function(){var Pr=ct[0],ii=H?H[0]:Pr/2,di=H?H[1]:ct[1]/2,mi=o.interpolateZoom([(ii-Je.x)/Je.k,(di-Je.y)/Je.k,Pr/Je.k],[(ii-Hr.x)/Hr.k,(di-Hr.y)/Hr.k,Pr/Hr.k]);return function(Ti){var Li=mi(Ti),pa=Pr/Li[2];this.__chart__=Je={x:ii-Li[0]*pa,y:di-Li[1]*pa,k:pa},xr(Sr)}}).each("interrupt.zoom",function(){Mr(Sr)}).each("end.zoom",function(){Mr(Sr)}):(this.__chart__=Je,sr(Sr),xr(Sr),Mr(Sr))})},tn.translate=function(_r){return arguments.length?(Je={x:+_r[0],y:+_r[1],k:Je.k},Xn(),tn):[Je.x,Je.y]},tn.scale=function(_r){return arguments.length?(Je={x:Je.x,y:Je.y,k:null},Mn(+_r),Xn(),tn):Je.k},tn.scaleExtent=function(_r){return arguments.length?(vt=null==_r?ut:[+_r[0],+_r[1]],tn):vt},tn.center=function(_r){return arguments.length?(te=_r&&[+_r[0],+_r[1]],tn):te},tn.size=function(_r){return arguments.length?(ct=_r&&[+_r[0],+_r[1]],tn):ct},tn.duration=function(_r){return arguments.length?(_t=+_r,tn):_t},tn.x=function(_r){return arguments.length?(Fe=_r,ke=_r.copy(),Je={x:0,y:0,k:1},tn):Fe},tn.y=function(_r){return arguments.length?(Xe=_r,Ve=_r.copy(),Je={x:0,y:0,k:1},tn):Xe},o.rebind(tn,ln,"on")};var Ge,He,ut=[0,1/0];function tt(){}function xt(I,H,te){return this instanceof xt?(this.h=+I,this.s=+H,void(this.l=+te)):arguments.length<2?I instanceof xt?new xt(I.h,I.s,I.l):An(""+I,On,xt):new xt(I,H,te)}o.color=tt,tt.prototype.toString=function(){return this.rgb()+""},o.hsl=xt;var At=xt.prototype=new tt;function Mt(I,H,te){var le,pe;function ke(Fe){return Math.round(255*((Ve=Fe)>360?Ve-=360:Ve<0&&(Ve+=360),Ve<60?le+(pe-le)*Ve/60:Ve<180?pe:Ve<240?le+(pe-le)*(240-Ve)/60:le));var Ve}return I=isNaN(I)?0:(I%=360)<0?I+360:I,H=isNaN(H)||H<0?0:H>1?1:H,le=2*(te=te<0?0:te>1?1:te)-(pe=te<=.5?te*(1+H):te+H-te*H),new Fn(ke(I+120),ke(I),ke(I-120))}function yt(I,H,te){return this instanceof yt?(this.h=+I,this.c=+H,void(this.l=+te)):arguments.length<2?I instanceof yt?new yt(I.h,I.c,I.l):(le=I instanceof Dt?I.l:(I=Dn((I=o.rgb(I)).r,I.g,I.b)).l,pe=I.a,ke=I.b,le>0?new yt(Math.atan2(ke,pe)*We,Math.sqrt(pe*pe+ke*ke),le):new yt(NaN,NaN,le)):new yt(I,H,te);var le,pe,ke}At.brighter=function(I){return I=Math.pow(.7,arguments.length?I:1),new xt(this.h,this.s,this.l/I)},At.darker=function(I){return I=Math.pow(.7,arguments.length?I:1),new xt(this.h,this.s,I*this.l)},At.rgb=function(){return Mt(this.h,this.s,this.l)},o.hcl=yt;var Pt=yt.prototype=new tt;function Ct(I,H,te){return isNaN(I)&&(I=0),isNaN(H)&&(H=0),new Dt(te,Math.cos(I*=nt)*H,Math.sin(I)*H)}function Dt(I,H,te){return this instanceof Dt?(this.l=+I,this.a=+H,void(this.b=+te)):arguments.length<2?I instanceof Dt?new Dt(I.l,I.a,I.b):I instanceof yt?Ct(I.h,I.c,I.l):Dn((I=Fn(I)).r,I.g,I.b):new Dt(I,H,te)}Pt.brighter=function(I){return new yt(this.h,this.c,Math.min(100,this.l+Ut*(arguments.length?I:1)))},Pt.darker=function(I){return new yt(this.h,this.c,Math.max(0,this.l-Ut*(arguments.length?I:1)))},Pt.rgb=function(){return Ct(this.h,this.c,this.l).rgb()},o.lab=Dt;var Ut=18,Bt=.95047,qt=1,an=1.08883,mn=Dt.prototype=new tt;function Qt(I,H,te){var le=(I+16)/116,pe=le+H/500,ke=le-te/200;return new Fn(qn(3.2404542*(pe=sn(pe)*Bt)-1.5371385*(le=sn(le)*qt)-.4985314*(ke=sn(ke)*an)),qn(-.969266*pe+1.8760108*le+.041556*ke),qn(.0556434*pe-.2040259*le+1.0572252*ke))}function sn(I){return I>.206893034?I*I*I:(I-.13793103448275862)/7.787037}function Kt(I){return I>.008856?Math.pow(I,.3333333333333333):7.787037*I+.13793103448275862}function qn(I){return Math.round(255*(I<=.00304?12.92*I:1.055*Math.pow(I,.4166666666666667)-.055))}function Fn(I,H,te){return this instanceof Fn?(this.r=~~I,this.g=~~H,void(this.b=~~te)):arguments.length<2?I instanceof Fn?new Fn(I.r,I.g,I.b):An(""+I,Fn,Mt):new Fn(I,H,te)}function Sn(I){return new Fn(I>>16,I>>8&255,255&I)}function hn(I){return Sn(I)+""}mn.brighter=function(I){return new Dt(Math.min(100,this.l+Ut*(arguments.length?I:1)),this.a,this.b)},mn.darker=function(I){return new Dt(Math.max(0,this.l-Ut*(arguments.length?I:1)),this.a,this.b)},mn.rgb=function(){return Qt(this.l,this.a,this.b)},o.rgb=Fn;var wn=Fn.prototype=new tt;function pn(I){return I<16?"0"+Math.max(0,I).toString(16):Math.min(255,I).toString(16)}function An(I,H,te){var le,pe,ke,Fe=0,Ve=0,Xe=0;if(le=/([a-z]+)\((.*)\)/.exec(I=I.toLowerCase()))switch(pe=le[2].split(","),le[1]){case"hsl":return te(parseFloat(pe[0]),parseFloat(pe[1])/100,parseFloat(pe[2])/100);case"rgb":return H(Gn(pe[0]),Gn(pe[1]),Gn(pe[2]))}return(ke=Nn.get(I))?H(ke.r,ke.g,ke.b):(null==I||"#"!==I.charAt(0)||isNaN(ke=parseInt(I.slice(1),16))||(4===I.length?(Fe=(3840&ke)>>4,Fe|=Fe>>4,Ve=240&ke,Ve|=Ve>>4,Xe=15&ke,Xe|=Xe<<4):7===I.length&&(Fe=(16711680&ke)>>16,Ve=(65280&ke)>>8,Xe=255&ke)),H(Fe,Ve,Xe))}function On(I,H,te){var le,pe,ke=Math.min(I/=255,H/=255,te/=255),Fe=Math.max(I,H,te),Ve=Fe-ke,Xe=(Fe+ke)/2;return Ve?(pe=Xe<.5?Ve/(Fe+ke):Ve/(2-Fe-ke),le=I==Fe?(H-te)/Ve+(H<te?6:0):H==Fe?(te-I)/Ve+2:(I-H)/Ve+4,le*=60):(le=NaN,pe=Xe>0&&Xe<1?0:le),new xt(le,pe,Xe)}function Dn(I,H,te){var le=Kt((.4124564*(I=Vn(I))+.3575761*(H=Vn(H))+.1804375*(te=Vn(te)))/Bt),pe=Kt((.2126729*I+.7151522*H+.072175*te)/qt);return Dt(116*pe-16,500*(le-pe),200*(pe-Kt((.0193339*I+.119192*H+.9503041*te)/an)))}function Vn(I){return(I/=255)<=.04045?I/12.92:Math.pow((I+.055)/1.055,2.4)}function Gn(I){var H=parseFloat(I);return"%"===I.charAt(I.length-1)?Math.round(2.55*H):H}wn.brighter=function(I){I=Math.pow(.7,arguments.length?I:1);var H=this.r,te=this.g,le=this.b;return H||te||le?(H&&H<30&&(H=30),te&&te<30&&(te=30),le&&le<30&&(le=30),new Fn(Math.min(255,H/I),Math.min(255,te/I),Math.min(255,le/I))):new Fn(30,30,30)},wn.darker=function(I){return new Fn((I=Math.pow(.7,arguments.length?I:1))*this.r,I*this.g,I*this.b)},wn.hsl=function(){return On(this.r,this.g,this.b)},wn.toString=function(){return"#"+pn(this.r)+pn(this.g)+pn(this.b)};var Nn=o.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function ir(I){return"function"==typeof I?I:function(){return I}}function $n(I){return function(H,te,le){return 2===arguments.length&&"function"==typeof te&&(le=te,te=null),mr(H,te,I,le)}}function mr(I,H,te,le){var ct,pe={},ke=o.dispatch("beforesend","progress","load","error"),Fe={},Ve=new XMLHttpRequest,Xe=null;function Je(){var ct,_t,It,vt=Ve.status;if(!vt&&((It=(_t=Ve).responseType)&&"text"!==It?_t.response:_t.responseText)||vt>=200&&vt<300||304===vt){try{ct=te.call(pe,Ve)}catch(_t){return void ke.error.call(pe,_t)}ke.load.call(pe,ct)}else ke.error.call(pe,Ve)}return self.XDomainRequest&&!("withCredentials"in Ve)&&/^(http(s)?:)?\/\//.test(I)&&(Ve=new XDomainRequest),"onload"in Ve?Ve.onload=Ve.onerror=Je:Ve.onreadystatechange=function(){Ve.readyState>3&&Je()},Ve.onprogress=function(ct){var vt=o.event;o.event=ct;try{ke.progress.call(pe,Ve)}finally{o.event=vt}},pe.header=function(ct,vt){return ct=(ct+"").toLowerCase(),arguments.length<2?Fe[ct]:(null==vt?delete Fe[ct]:Fe[ct]=vt+"",pe)},pe.mimeType=function(ct){return arguments.length?(H=null==ct?null:ct+"",pe):H},pe.responseType=function(ct){return arguments.length?(Xe=ct,pe):Xe},pe.response=function(ct){return te=ct,pe},["get","post"].forEach(function(ct){pe[ct]=function(){return pe.send.apply(pe,[ct].concat(b(arguments)))}}),pe.send=function(ct,vt,_t){if(2===arguments.length&&"function"==typeof vt&&(_t=vt,vt=null),Ve.open(ct,I,!0),null==H||"accept"in Fe||(Fe.accept=H+",*/*"),Ve.setRequestHeader)for(var It in Fe)Ve.setRequestHeader(It,Fe[It]);return null!=H&&Ve.overrideMimeType&&Ve.overrideMimeType(H),null!=Xe&&(Ve.responseType=Xe),null!=_t&&pe.on("error",_t).on("load",function(Ft){_t(null,Ft)}),ke.beforesend.call(pe,Ve),Ve.send(vt??null),pe},pe.abort=function(){return Ve.abort(),pe},o.rebind(pe,ke,"on"),null==le?pe:pe.get(1===(ct=le).length?function(vt,_t){ct(null==vt?_t:null)}:ct)}Nn.forEach(function(I,H){Nn.set(I,Sn(H))}),o.functor=ir,o.xhr=$n(R),o.dsv=function(I,H){var te=new RegExp('["'+I+"\n]"),le=I.charCodeAt(0);function pe(Je,ct,vt){arguments.length<3&&(vt=ct,ct=null);var _t=mr(Je,H,null==ct?ke:Fe(ct),vt);return _t.row=function(It){return arguments.length?_t.response(null==(ct=It)?ke:Fe(It)):ct},_t}function ke(Je){return pe.parse(Je.responseText)}function Fe(Je){return function(ct){return pe.parse(ct.responseText,Je)}}function Ve(Je){return Je.map(Xe).join(I)}function Xe(Je){return te.test(Je)?'"'+Je.replace(/\"/g,'""')+'"':Je}return pe.parse=function(Je,ct){var vt;return pe.parseRows(Je,function(_t,It){if(vt)return vt(_t,It-1);var Ft=function(Ot){for(var Yt={},jt=_t.length,ln=0;ln<jt;++ln)Yt[_t[ln]]=Ot[ln];return Yt};vt=ct?function(Ot,Yt){return ct(Ft(Ot),Yt)}:Ft})},pe.parseRows=function(Je,ct){var vt,_t,It={},Ft={},Ot=[],Yt=Je.length,jt=0,ln=0;function tn(){if(jt>=Yt)return Ft;if(_t)return _t=!1,It;var Mn=jt;if(34===Je.charCodeAt(Mn)){for(var Ln=Mn;Ln++<Yt;)if(34===Je.charCodeAt(Ln)){if(34!==Je.charCodeAt(Ln+1))break;++Ln}return jt=Ln+2,13===(Un=Je.charCodeAt(Ln+1))?(_t=!0,10===Je.charCodeAt(Ln+2)&&++jt):10===Un&&(_t=!0),Je.slice(Mn+1,Ln).replace(/""/g,'"')}for(;jt<Yt;){var Un,Xn=1;if(10===(Un=Je.charCodeAt(jt++)))_t=!0;else if(13===Un)_t=!0,10===Je.charCodeAt(jt)&&(++jt,++Xn);else if(Un!==le)continue;return Je.slice(Mn,jt-Xn)}return Je.slice(Mn)}for(;(vt=tn())!==Ft;){for(var Jt=[];vt!==It&&vt!==Ft;)Jt.push(vt),vt=tn();ct&&null==(Jt=ct(Jt,ln++))||Ot.push(Jt)}return Ot},pe.format=function(Je){if(Array.isArray(Je[0]))return pe.formatRows(Je);var ct=new V,vt=[];return Je.forEach(function(_t){for(var It in _t)ct.has(It)||vt.push(ct.add(It))}),[vt.map(Xe).join(I)].concat(Je.map(function(_t){return vt.map(function(It){return Xe(_t[It])}).join(I)})).join("\n")},pe.formatRows=function(Je){return Je.map(Ve).join("\n")},pe},o.csv=o.dsv(",","text/csv"),o.tsv=o.dsv("\t","text/tab-separated-values");var lr,vr,or,Or,fn=this[Z(this,"requestAnimationFrame")]||function(I){setTimeout(I,17)};function gn(I,H,te){var le=arguments.length;le<2&&(H=0),le<3&&(te=Date.now());var pe={c:I,t:te+H,n:null};return vr?vr.n=pe:lr=pe,vr=pe,or||(Or=clearTimeout(Or),or=1,fn(Hn)),pe}function Hn(){var I=En(),H=Zn()-I;H>24?(isFinite(H)&&(clearTimeout(Or),Or=setTimeout(Hn,H)),or=0):(or=1,fn(Hn))}function En(){for(var I=Date.now(),H=lr;H;)I>=H.t&&H.c(I-H.t)&&(H.c=null),H=H.n;return I}function Zn(){for(var I,H=lr,te=1/0;H;)H.c?(H.t<te&&(te=H.t),H=(I=H).n):H=I?I.n=H.n:lr=H.n;return vr=I,te}function Kn(I){return I[0]}function tr(I){return I[1]}function fr(I){for(var H,te,le,pe=I.length,ke=[0,1],Fe=2,Ve=2;Ve<pe;Ve++){for(;Fe>1&&((te=I[ke[Fe-1]])[0]-(H=I[ke[Fe-2]])[0])*((le=I[Ve])[1]-H[1])-(te[1]-H[1])*(le[0]-H[0])<=0;)--Fe;ke[Fe++]=Ve}return ke.slice(0,Fe)}function Dr(I,H){return I[0]-H[0]||I[1]-H[1]}o.timer=function(){gn.apply(this,arguments)},o.timer.flush=function(){En(),Zn()},o.round=function(I,H){return H?Math.round(I*(H=Math.pow(10,H)))/H:Math.round(I)},o.geom={},o.geom.hull=function(I){var H=Kn,te=tr;if(arguments.length)return le(I);function le(pe){if(pe.length<3)return[];var ke,Fe=ir(H),Ve=ir(te),Xe=pe.length,Je=[],ct=[];for(ke=0;ke<Xe;ke++)Je.push([+Fe.call(this,pe[ke],ke),+Ve.call(this,pe[ke],ke),ke]);for(Je.sort(Dr),ke=0;ke<Xe;ke++)ct.push([Je[ke][0],-Je[ke][1]]);var vt=fr(Je),_t=fr(ct),It=_t[0]===vt[0],Ft=_t[_t.length-1]===vt[vt.length-1],Ot=[];for(ke=vt.length-1;ke>=0;--ke)Ot.push(pe[Je[vt[ke]][2]]);for(ke=+It;ke<_t.length-Ft;++ke)Ot.push(pe[Je[_t[ke]][2]]);return Ot}return le.x=function(pe){return arguments.length?(H=pe,le):H},le.y=function(pe){return arguments.length?(te=pe,le):te},le},o.geom.polygon=function(I){return X(I,cn),I};var cn=o.geom.polygon.prototype=[];function In(I,H,te){return(te[0]-H[0])*(I[1]-H[1])<(te[1]-H[1])*(I[0]-H[0])}function Nt(I,H,te,le){var pe=I[0],ke=te[0],Fe=H[0]-pe,Ve=le[0]-ke,Xe=I[1],Je=te[1],ct=H[1]-Xe,vt=le[1]-Je,_t=(Ve*(Xe-Je)-vt*(pe-ke))/(vt*Fe-Ve*ct);return[pe+_t*Fe,Xe+_t*ct]}function Zt(I){var H=I[0],te=I[I.length-1];return!(H[0]-te[0]||H[1]-te[1])}cn.area=function(){for(var I,H=-1,te=this.length,le=this[te-1],pe=0;++H<te;)pe+=(I=le)[1]*(le=this[H])[0]-I[0]*le[1];return.5*pe},cn.centroid=function(I){var H,te,le=-1,pe=this.length,ke=0,Fe=0,Ve=this[pe-1];for(arguments.length||(I=-1/(6*this.area()));++le<pe;)ke+=((H=Ve)[0]+(Ve=this[le])[0])*(te=H[0]*Ve[1]-Ve[0]*H[1]),Fe+=(H[1]+Ve[1])*te;return[ke*I,Fe*I]},cn.clip=function(I){for(var H,te,le,pe,ke,Fe,Ve=Zt(I),Xe=-1,Je=this.length-Zt(this),ct=this[Je-1];++Xe<Je;){for(H=I.slice(),I.length=0,pe=this[Xe],ke=H[(le=H.length-Ve)-1],te=-1;++te<le;)In(Fe=H[te],ct,pe)?(In(ke,ct,pe)||I.push(Nt(ke,Fe,ct,pe)),I.push(Fe)):In(ke,ct,pe)&&I.push(Nt(ke,Fe,ct,pe)),ke=Fe;Ve&&I.push(I[0]),ct=pe}return I};var un,Tn,kn,Pn,yn,on=[],nn=[];function dn(){Xi(this),this.edge=this.site=this.circle=null}function xn(I){var H=on.pop()||new dn;return H.site=I,H}function Bn(I){Lr(I),kn.remove(I),on.push(I),Xi(I)}function Wn(I){var H=I.circle,te=H.x,le=H.cy,pe={x:te,y:le},ke=I.P,Fe=I.N,Ve=[I];Bn(I);for(var Xe=ke;Xe.circle&&g(te-Xe.circle.x)<ot&&g(le-Xe.circle.cy)<ot;)ke=Xe.P,Ve.unshift(Xe),Bn(Xe),Xe=ke;Ve.unshift(Xe),Lr(Xe);for(var Je=Fe;Je.circle&&g(te-Je.circle.x)<ot&&g(le-Je.circle.cy)<ot;)Fe=Je.N,Ve.push(Je),Bn(Je),Je=Fe;Ve.push(Je),Lr(Je);var ct,vt=Ve.length;for(ct=1;ct<vt;++ct)Fr((Je=Ve[ct]).edge,(Xe=Ve[ct-1]).site,Je.site,pe);(Je=Ve[vt-1]).edge=kr((Xe=Ve[0]).site,Je.site,null,pe),pr(Xe),pr(Je)}function Qn(I){for(var H,te,le,pe,ke=I.x,Fe=I.y,Ve=kn._;Ve;)if((le=ar(Ve,Fe)-ke)>ot)Ve=Ve.L;else{if(!((pe=ke-yr(Ve,Fe))>ot)){le>-ot?(H=Ve.P,te=Ve):pe>-ot?(H=Ve,te=Ve.N):H=te=Ve;break}if(!Ve.R){H=Ve;break}Ve=Ve.R}var Xe=xn(I);if(kn.insert(H,Xe),H||te){if(H===te)return Lr(H),te=xn(H.site),kn.insert(Xe,te),Xe.edge=te.edge=kr(H.site,Xe.site),pr(H),void pr(te);if(te){Lr(H),Lr(te);var Je=H.site,ct=Je.x,vt=Je.y,_t=I.x-ct,It=I.y-vt,Ft=te.site,Ot=Ft.x-ct,Yt=Ft.y-vt,jt=2*(_t*Yt-It*Ot),ln=_t*_t+It*It,tn=Ot*Ot+Yt*Yt,Jt={x:(Yt*ln-It*tn)/jt+ct,y:(_t*tn-Ot*ln)/jt+vt};Fr(te.edge,Je,Ft,Jt),Xe.edge=kr(Je,I,null,Jt),te.edge=kr(I,Ft,null,Jt),pr(H),pr(te)}else Xe.edge=kr(H.site,Xe.site)}}function ar(I,H){var te=I.site,le=te.x,pe=te.y,ke=pe-H;if(!ke)return le;var Fe=I.P;if(!Fe)return-1/0;var Ve=(te=Fe.site).x,Xe=te.y,Je=Xe-H;if(!Je)return Ve;var ct=Ve-le,vt=1/ke-1/Je,_t=ct/Je;return vt?(-_t+Math.sqrt(_t*_t-2*vt*(ct*ct/(-2*Je)-Xe+Je/2+pe-ke/2)))/vt+le:(le+Ve)/2}function yr(I,H){var te=I.N;if(te)return ar(te,H);var le=I.site;return le.y===H?le.x:1/0}function ur(I){this.site=I,this.edges=[]}function gr(I,H){return H.angle-I.angle}function br(){Xi(this),this.x=this.y=this.arc=this.site=this.cy=null}function pr(I){var H=I.P,te=I.N;if(H&&te){var le=H.site,pe=I.site,ke=te.site;if(le!==ke){var Fe=pe.x,Ve=pe.y,Xe=le.x-Fe,Je=le.y-Ve,ct=ke.x-Fe,vt=2*(Xe*(Yt=ke.y-Ve)-Je*ct);if(!(vt>=-Rt)){var _t=Xe*Xe+Je*Je,It=ct*ct+Yt*Yt,Ft=(Yt*_t-Je*It)/vt,Ot=(Xe*It-ct*_t)/vt,Yt=Ot+Ve,jt=nn.pop()||new br;jt.arc=I,jt.site=pe,jt.x=Ft+Fe,jt.y=Yt+Math.sqrt(Ft*Ft+Ot*Ot),jt.cy=Yt,I.circle=jt;for(var ln=null,tn=yn._;tn;)if(jt.y<tn.y||jt.y===tn.y&&jt.x<=tn.x){if(!tn.L){ln=tn.P;break}tn=tn.L}else{if(!tn.R){ln=tn;break}tn=tn.R}yn.insert(ln,jt),ln||(Pn=jt)}}}}function Lr(I){var H=I.circle;H&&(H.P||(Pn=H.N),yn.remove(H),nn.push(H),Xi(H),I.circle=null)}function Ur(I,H){var te=I.b;if(te)return!0;var le,pe,ke=I.a,Fe=H[0][0],Ve=H[1][0],Xe=H[0][1],Je=H[1][1],ct=I.l,vt=I.r,_t=ct.x,It=ct.y,Ft=vt.x,Ot=vt.y,Yt=(_t+Ft)/2;if(Ot===It){if(Yt<Fe||Yt>=Ve)return;if(_t>Ft){if(ke){if(ke.y>=Je)return}else ke={x:Yt,y:Xe};te={x:Yt,y:Je}}else{if(ke){if(ke.y<Xe)return}else ke={x:Yt,y:Je};te={x:Yt,y:Xe}}}else if(pe=(It+Ot)/2-(le=(_t-Ft)/(Ot-It))*Yt,le<-1||le>1)if(_t>Ft){if(ke){if(ke.y>=Je)return}else ke={x:(Xe-pe)/le,y:Xe};te={x:(Je-pe)/le,y:Je}}else{if(ke){if(ke.y<Xe)return}else ke={x:(Je-pe)/le,y:Je};te={x:(Xe-pe)/le,y:Xe}}else if(It<Ot){if(ke){if(ke.x>=Ve)return}else ke={x:Fe,y:le*Fe+pe};te={x:Ve,y:le*Ve+pe}}else{if(ke){if(ke.x<Fe)return}else ke={x:Ve,y:le*Ve+pe};te={x:Fe,y:le*Fe+pe}}return I.a=ke,I.b=te,!0}function zr(I,H){this.l=I,this.r=H,this.a=this.b=null}function kr(I,H,te,le){var pe=new zr(I,H);return un.push(pe),te&&Fr(pe,I,H,te),le&&Fr(pe,H,I,le),Tn[I.i].edges.push(new Qr(pe,I,H)),Tn[H.i].edges.push(new Qr(pe,H,I)),pe}function Fr(I,H,te,le){I.a||I.b?I.l===te?I.b=le:I.a=le:(I.a=le,I.l=H,I.r=te)}function Qr(I,H,te){var le=I.a,pe=I.b;this.edge=I,this.site=H,this.angle=te?Math.atan2(te.y-H.y,te.x-H.x):I.l===H?Math.atan2(pe.x-le.x,le.y-pe.y):Math.atan2(le.x-pe.x,pe.y-le.y)}function ai(){this._=null}function Xi(I){I.U=I.C=I.L=I.R=I.P=I.N=null}function da(I,H){var te=H,le=H.R,pe=te.U;pe?pe.L===te?pe.L=le:pe.R=le:I._=le,le.U=pe,te.U=le,te.R=le.L,te.R&&(te.R.U=te),le.L=te}function Ba(I,H){var te=H,le=H.L,pe=te.U;pe?pe.L===te?pe.L=le:pe.R=le:I._=le,le.U=pe,te.U=le,te.L=le.R,te.L&&(te.L.U=te),le.R=te}function ea(I){for(;I.L;)I=I.L;return I}function Ea(I,H){var te,le,pe,ke=I.sort(so).pop();for(un=[],Tn=new Array(I.length),kn=new ai,yn=new ai;;)if(pe=Pn,ke&&(!pe||ke.y<pe.y||ke.y===pe.y&&ke.x<pe.x))ke.x===te&&ke.y===le||(Tn[ke.i]=new ur(ke),Qn(ke),te=ke.x,le=ke.y),ke=I.pop();else{if(!pe)break;Wn(pe.arc)}H&&(function(Ve){for(var Xe,Je,ct,vt,_t,It=un,Ft=(Je=Ve[0][0],ct=Ve[0][1],vt=Ve[1][0],_t=Ve[1][1],function(Yt){var jt,ln=Yt.a,tn=Yt.b,Jt=ln.x,Mn=ln.y,Ln=0,Un=1,Xn=tn.x-Jt,sr=tn.y-Mn;if(jt=Je-Jt,Xn||!(jt>0)){if(jt/=Xn,Xn<0){if(jt<Ln)return;jt<Un&&(Un=jt)}else if(Xn>0){if(jt>Un)return;jt>Ln&&(Ln=jt)}if(jt=vt-Jt,Xn||!(jt<0)){if(jt/=Xn,Xn<0){if(jt>Un)return;jt>Ln&&(Ln=jt)}else if(Xn>0){if(jt<Ln)return;jt<Un&&(Un=jt)}if(jt=ct-Mn,sr||!(jt>0)){if(jt/=sr,sr<0){if(jt<Ln)return;jt<Un&&(Un=jt)}else if(sr>0){if(jt>Un)return;jt>Ln&&(Ln=jt)}if(jt=_t-Mn,sr||!(jt<0)){if(jt/=sr,sr<0){if(jt>Un)return;jt>Ln&&(Ln=jt)}else if(sr>0){if(jt<Ln)return;jt<Un&&(Un=jt)}return Ln>0&&(Yt.a={x:Jt+Ln*Xn,y:Mn+Ln*sr}),Un<1&&(Yt.b={x:Jt+Un*Xn,y:Mn+Un*sr}),Yt}}}}}),Ot=It.length;Ot--;)(!Ur(Xe=It[Ot],Ve)||!Ft(Xe)||g(Xe.a.x-Xe.b.x)<ot&&g(Xe.a.y-Xe.b.y)<ot)&&(Xe.a=Xe.b=null,It.splice(Ot,1))}(H),function(Ve){for(var Xe,Je,ct,vt,_t,It,Ft,Ot,Yt,jt,ln=Ve[0][0],tn=Ve[1][0],Jt=Ve[0][1],Mn=Ve[1][1],Ln=Tn,Un=Ln.length;Un--;)if((_t=Ln[Un])&&_t.prepare())for(Ot=(Ft=_t.edges).length,It=0;It<Ot;)ct=(jt=Ft[It].end()).x,vt=jt.y,Xe=(Yt=Ft[++It%Ot].start()).x,Je=Yt.y,(g(ct-Xe)>ot||g(vt-Je)>ot)&&(Ft.splice(It,0,new Qr((Xn=_t.site,sr=jt,xr=g(ct-ln)<ot&&Mn-vt>ot?{x:ln,y:g(Xe-ln)<ot?Je:Mn}:g(vt-Mn)<ot&&tn-ct>ot?{x:g(Je-Mn)<ot?Xe:tn,y:Mn}:g(ct-tn)<ot&&vt-Jt>ot?{x:tn,y:g(Xe-tn)<ot?Je:Jt}:g(vt-Jt)<ot&&ct-ln>ot?{x:g(Je-Jt)<ot?Xe:ln,y:Jt}:null,Mr=void 0,(Mr=new zr(Xn,null)).a=sr,Mr.b=xr,un.push(Mr),Mr),_t.site,null)),++Ot);var Xn,sr,xr,Mr}(H));var Fe={cells:Tn,edges:un};return kn=yn=un=Tn=null,Fe}function so(I,H){return H.y-I.y||H.x-I.x}ur.prototype.prepare=function(){for(var I,H=this.edges,te=H.length;te--;)(I=H[te].edge).b&&I.a||H.splice(te,1);return H.sort(gr),H.length},Qr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ai.prototype={insert:function(I,H){var te,le,pe;if(I){if(H.P=I,H.N=I.N,I.N&&(I.N.P=H),I.N=H,I.R){for(I=I.R;I.L;)I=I.L;I.L=H}else I.R=H;te=I}else this._?(I=ea(this._),H.P=null,H.N=I,I.P=I.L=H,te=I):(H.P=H.N=null,this._=H,te=null);for(H.L=H.R=null,H.U=te,H.C=!0,I=H;te&&te.C;)te===(le=te.U).L?(pe=le.R)&&pe.C?(te.C=pe.C=!1,le.C=!0,I=le):(I===te.R&&(da(this,te),te=(I=te).U),te.C=!1,le.C=!0,Ba(this,le)):(pe=le.L)&&pe.C?(te.C=pe.C=!1,le.C=!0,I=le):(I===te.L&&(Ba(this,te),te=(I=te).U),te.C=!1,le.C=!0,da(this,le)),te=I.U;this._.C=!1},remove:function(I){I.N&&(I.N.P=I.P),I.P&&(I.P.N=I.N),I.N=I.P=null;var H,te,le,pe=I.U,ke=I.L,Fe=I.R;if(te=ke?Fe?ea(Fe):ke:Fe,pe?pe.L===I?pe.L=te:pe.R=te:this._=te,ke&&Fe?(le=te.C,te.C=I.C,te.L=ke,ke.U=te,te!==Fe?(pe=te.U,te.U=I.U,pe.L=I=te.R,te.R=Fe,Fe.U=te):(te.U=pe,pe=te,I=te.R)):(le=I.C,I=te),I&&(I.U=pe),!le)if(I&&I.C)I.C=!1;else{do{if(I===this._)break;if(I===pe.L){if((H=pe.R).C&&(H.C=!1,pe.C=!0,da(this,pe),H=pe.R),H.L&&H.L.C||H.R&&H.R.C){H.R&&H.R.C||(H.L.C=!1,H.C=!0,Ba(this,H),H=pe.R),H.C=pe.C,pe.C=H.R.C=!1,da(this,pe),I=this._;break}}else if((H=pe.L).C&&(H.C=!1,pe.C=!0,Ba(this,pe),H=pe.L),H.L&&H.L.C||H.R&&H.R.C){H.L&&H.L.C||(H.R.C=!1,H.C=!0,da(this,H),H=pe.L),H.C=pe.C,pe.C=H.L.C=!1,Ba(this,pe),I=this._;break}H.C=!0,I=pe,pe=pe.U}while(!I.C);I&&(I.C=!1)}}},o.geom.voronoi=function(I){var H=Kn,te=tr,le=H,pe=te,ke=li;if(I)return Fe(I);function Fe(Xe){var Je=new Array(Xe.length),ct=ke[0][0],vt=ke[0][1],_t=ke[1][0],It=ke[1][1];return Ea(Ve(Xe),ke).cells.forEach(function(Ft,Ot){var Yt=Ft.edges,jt=Ft.site;(Je[Ot]=Yt.length?Yt.map(function(ln){var tn=ln.start();return[tn.x,tn.y]}):jt.x>=ct&&jt.x<=_t&&jt.y>=vt&&jt.y<=It?[[ct,It],[_t,It],[_t,vt],[ct,vt]]:[]).point=Xe[Ot]}),Je}function Ve(Xe){return Xe.map(function(Je,ct){return{x:Math.round(le(Je,ct)/ot)*ot,y:Math.round(pe(Je,ct)/ot)*ot,i:ct}})}return Fe.links=function(Xe){return Ea(Ve(Xe)).edges.filter(function(Je){return Je.l&&Je.r}).map(function(Je){return{source:Xe[Je.l.i],target:Xe[Je.r.i]}})},Fe.triangles=function(Xe){var Je=[];return Ea(Ve(Xe)).cells.forEach(function(ct,vt){for(var _t,It,Ft,Ot,Yt=ct.site,jt=ct.edges.sort(gr),ln=-1,tn=jt.length,Jt=jt[tn-1].edge,Mn=Jt.l===Yt?Jt.r:Jt.l;++ln<tn;)_t=Mn,Mn=(Jt=jt[ln].edge).l===Yt?Jt.r:Jt.l,vt<_t.i&&vt<Mn.i&&((It=Yt).x-(Ot=Mn).x)*((Ft=_t).y-It.y)-(It.x-Ft.x)*(Ot.y-It.y)<0&&Je.push([Xe[vt],Xe[_t.i],Xe[Mn.i]])}),Je},Fe.x=function(Xe){return arguments.length?(le=ir(H=Xe),Fe):H},Fe.y=function(Xe){return arguments.length?(pe=ir(te=Xe),Fe):te},Fe.clipExtent=function(Xe){return arguments.length?(ke=Xe??li,Fe):ke===li?null:ke},Fe.size=function(Xe){return arguments.length?Fe.clipExtent(Xe&&[[0,0],Xe]):ke===li?null:ke&&ke[1]},Fe};var li=[[-1e6,-1e6],[1e6,1e6]];function za(I){return I.x}function No(I){return I.y}function Na(I,H,te,le,pe,ke){if(!I(H,te,le,pe,ke)){var Fe=.5*(te+pe),Ve=.5*(le+ke),Xe=H.nodes;Xe[0]&&Na(I,Xe[0],te,le,Fe,Ve),Xe[1]&&Na(I,Xe[1],Fe,le,pe,Ve),Xe[2]&&Na(I,Xe[2],te,Ve,Fe,ke),Xe[3]&&Na(I,Xe[3],Fe,Ve,pe,ke)}}function js(I,H){I=o.rgb(I),H=o.rgb(H);var te=I.r,le=I.g,pe=I.b,ke=H.r-te,Fe=H.g-le,Ve=H.b-pe;return function(Xe){return"#"+pn(Math.round(te+ke*Xe))+pn(Math.round(le+Fe*Xe))+pn(Math.round(pe+Ve*Xe))}}function Ia(I,H){var te,le={},pe={};for(te in I)te in H?le[te]=Eo(I[te],H[te]):pe[te]=I[te];for(te in H)te in I||(pe[te]=H[te]);return function(ke){for(te in le)pe[te]=le[te](ke);return pe}}function Qa(I,H){return I=+I,H=+H,function(te){return I*(1-te)+H*te}}function ds(I,H){var te,le,pe,ke=Cs.lastIndex=xl.lastIndex=0,Fe=-1,Ve=[],Xe=[];for(I+="",H+="";(te=Cs.exec(I))&&(le=xl.exec(H));)(pe=le.index)>ke&&(pe=H.slice(ke,pe),Ve[Fe]?Ve[Fe]+=pe:Ve[++Fe]=pe),(te=te[0])===(le=le[0])?Ve[Fe]?Ve[Fe]+=le:Ve[++Fe]=le:(Ve[++Fe]=null,Xe.push({i:Fe,x:Qa(te,le)})),ke=xl.lastIndex;return ke<H.length&&(pe=H.slice(ke),Ve[Fe]?Ve[Fe]+=pe:Ve[++Fe]=pe),Ve.length<2?Xe[0]?(H=Xe[0].x,function(Je){return H(Je)+""}):function(){return H}:(H=Xe.length,function(Je){for(var ct,vt=0;vt<H;++vt)Ve[(ct=Xe[vt]).i]=ct.x(Je);return Ve.join("")})}o.geom.delaunay=function(I){return o.geom.voronoi().triangles(I)},o.geom.quadtree=function(I,H,te,le,pe){var ke,Fe=Kn,Ve=tr;if(ke=arguments.length)return Fe=za,Ve=No,3===ke&&(pe=te,le=H,te=H=0),Xe(I);function Xe(Je){var ct,vt,_t,It,Ft,Ot,Yt,jt,ln,tn=ir(Fe),Jt=ir(Ve);if(null!=H)Ot=H,Yt=te,jt=le,ln=pe;else if(jt=ln=-(Ot=Yt=1/0),vt=[],_t=[],Ft=Je.length,ke)for(It=0;It<Ft;++It)(ct=Je[It]).x<Ot&&(Ot=ct.x),ct.y<Yt&&(Yt=ct.y),ct.x>jt&&(jt=ct.x),ct.y>ln&&(ln=ct.y),vt.push(ct.x),_t.push(ct.y);else for(It=0;It<Ft;++It){var Mn=+tn(ct=Je[It],It),Ln=+Jt(ct,It);Mn<Ot&&(Ot=Mn),Ln<Yt&&(Yt=Ln),Mn>jt&&(jt=Mn),Ln>ln&&(ln=Ln),vt.push(Mn),_t.push(Ln)}var Un=jt-Ot,Xn=ln-Yt;function sr(hr,Cr,Nr,ei,_r,Sr,Hr,Pr){if(!isNaN(Nr)&&!isNaN(ei))if(hr.leaf){var Kr=hr.x,ii=hr.y;if(null!=Kr)if(g(Kr-Nr)+g(ii-ei)<.01)xr(hr,Cr,Nr,ei,_r,Sr,Hr,Pr);else{var di=hr.point;hr.x=hr.y=hr.point=null,xr(hr,di,Kr,ii,_r,Sr,Hr,Pr),xr(hr,Cr,Nr,ei,_r,Sr,Hr,Pr)}else hr.x=Nr,hr.y=ei,hr.point=Cr}else xr(hr,Cr,Nr,ei,_r,Sr,Hr,Pr)}function xr(hr,Cr,Nr,ei,_r,Sr,Hr,Pr){var Kr=.5*(_r+Hr),ii=.5*(Sr+Pr),di=Nr>=Kr,mi=ei>=ii,Ti=mi<<1|di;hr.leaf=!1,di?_r=Kr:Hr=Kr,mi?Sr=ii:Pr=ii,sr(hr=hr.nodes[Ti]||(hr.nodes[Ti]={leaf:!0,nodes:[],point:null,x:null,y:null}),Cr,Nr,ei,_r,Sr,Hr,Pr)}Un>Xn?ln=Yt+Un:jt=Ot+Xn;var Mr={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(hr){sr(Mr,hr,+tn(hr,++It),+Jt(hr,It),Ot,Yt,jt,ln)},visit:function(hr){Na(hr,Mr,Ot,Yt,jt,ln)},find:function(hr){return Nr=hr[0],ei=hr[1],ii=1/0,function di(mi,Ti,Li,pa,Pa){if(!(Ti>Hr||Li>Pr||pa<_r||Pa<Sr)){if(to=mi.point){var to,Ja=Nr-mi.x,ya=ei-mi.y,Ki=Ja*Ja+ya*ya;if(Ki<ii){var Pi=Math.sqrt(ii=Ki);_r=Nr-Pi,Sr=ei-Pi,Hr=Nr+Pi,Pr=ei+Pi,Kr=to}}for(var ga=mi.nodes,ia=.5*(Ti+pa),bi=.5*(Li+Pa),Ma=(ei>=bi)<<1|Nr>=ia,ma=Ma+4;Ma<ma;++Ma)if(mi=ga[3&Ma])switch(3&Ma){case 0:di(mi,Ti,Li,ia,bi);break;case 1:di(mi,ia,Li,pa,bi);break;case 2:di(mi,Ti,bi,ia,Pa);break;case 3:di(mi,ia,bi,pa,Pa)}}}(Mr,_r=Ot,Sr=Yt,Hr=jt,Pr=ln),Kr;var Nr,ei,_r,Sr,Hr,Pr,Kr,ii}};if(It=-1,null==H){for(;++It<Ft;)sr(Mr,Je[It],vt[It],_t[It],Ot,Yt,jt,ln);--It}else Je.forEach(Mr.add);return vt=_t=Je=ct=null,Mr}return Xe.x=function(Je){return arguments.length?(Fe=Je,Xe):Fe},Xe.y=function(Je){return arguments.length?(Ve=Je,Xe):Ve},Xe.extent=function(Je){return arguments.length?(null==Je?H=te=le=pe=null:(H=+Je[0][0],te=+Je[0][1],le=+Je[1][0],pe=+Je[1][1]),Xe):null==H?null:[[H,te],[le,pe]]},Xe.size=function(Je){return arguments.length?(null==Je?H=te=le=pe=null:(H=te=0,le=+Je[0],pe=+Je[1]),Xe):null==H?null:[le-H,pe-te]},Xe},o.interpolateRgb=js,o.interpolateObject=Ia,o.interpolateNumber=Qa,o.interpolateString=ds;var Cs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xl=new RegExp(Cs.source,"g");function Eo(I,H){for(var te,le=o.interpolators.length;--le>=0&&!(te=o.interpolators[le](I,H)););return te}function $o(I,H){var te,le=[],pe=[],ke=I.length,Fe=H.length,Ve=Math.min(I.length,H.length);for(te=0;te<Ve;++te)le.push(Eo(I[te],H[te]));for(;te<ke;++te)pe[te]=I[te];for(;te<Fe;++te)pe[te]=H[te];return function(Xe){for(te=0;te<Ve;++te)pe[te]=le[te](Xe);return pe}}o.interpolate=Eo,o.interpolators=[function(I,H){var te=typeof H;return("string"===te?Nn.has(H.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(H)?js:ds:H instanceof tt?js:Array.isArray(H)?$o:"object"===te&&isNaN(H)?Ia:Qa)(I,H)}],o.interpolateArray=$o;var Es=function(){return R},Ei=o.map({linear:Es,poly:function(I){return function(H){return Math.pow(H,I)}},quad:function(){return Ao},cubic:function(){return vo},sin:function(){return _l},exp:function(){return Oa},circle:function(){return al},elastic:function(I,H){var te;return arguments.length<2&&(H=.45),arguments.length?te=H/Ht*Math.asin(1/I):(I=1,te=H/4),function(le){return 1+I*Math.pow(2,-10*le)*Math.sin((le-te)*Ht/H)}},back:function(I){return I||(I=1.70158),function(H){return H*H*((I+1)*H-I)}},bounce:function(){return Us}}),Fa=o.map({in:R,out:Io,"in-out":To,"out-in":function(I){return To(Io(I))}});function Io(I){return function(H){return 1-I(1-H)}}function To(I){return function(H){return.5*(H<.5?I(2*H):2-I(2-2*H))}}function Ao(I){return I*I}function vo(I){return I*I*I}function ps(I){if(I<=0)return 0;if(I>=1)return 1;var H=I*I,te=H*I;return 4*(I<.5?te:3*(I-H)+te-.75)}function _l(I){return 1-Math.cos(I*Qe)}function Oa(I){return Math.pow(2,10*(I-1))}function al(I){return 1-Math.sqrt(1-I*I)}function Us(I){return I<.36363636363636365?7.5625*I*I:I<.7272727272727273?7.5625*(I-=.5454545454545454)*I+.75:I<.9090909090909091?7.5625*(I-=.8181818181818182)*I+.9375:7.5625*(I-=.9545454545454546)*I+.984375}function Ul(I,H){return H-=I,function(te){return Math.round(I+H*te)}}function Xc(I){var H,te,le,pe=[I.a,I.b],ke=[I.c,I.d],Fe=Is(pe),Ve=Vs(pe,ke),Xe=Is(((H=ke)[0]+=(le=-Ve)*(te=pe)[0],H[1]+=le*te[1],H))||0;pe[0]*ke[1]<ke[0]*pe[1]&&(pe[0]*=-1,pe[1]*=-1,Fe*=-1,Ve*=-1),this.rotate=(Fe?Math.atan2(pe[1],pe[0]):Math.atan2(-ke[0],ke[1]))*We,this.translate=[I.e,I.f],this.scale=[Fe,Xe],this.skew=Xe?Math.atan2(Ve,Xe)*We:0}function Vs(I,H){return I[0]*H[0]+I[1]*H[1]}function Is(I){var H=Math.sqrt(Vs(I,I));return H&&(I[0]/=H,I[1]/=H),H}o.ease=function(I){var H,te=I.indexOf("-"),le=te>=0?I.slice(0,te):I,pe=te>=0?I.slice(te+1):"in";return le=Ei.get(le)||Es,pe=Fa.get(pe)||R,H=pe(le.apply(null,T.call(arguments,1))),function(ke){return ke<=0?0:ke>=1?1:H(ke)}},o.interpolateHcl=function(I,H){I=o.hcl(I),H=o.hcl(H);var te=I.h,le=I.c,pe=I.l,ke=H.h-te,Fe=H.c-le,Ve=H.l-pe;return isNaN(Fe)&&(Fe=0,le=isNaN(le)?H.c:le),isNaN(ke)?(ke=0,te=isNaN(te)?H.h:te):ke>180?ke-=360:ke<-180&&(ke+=360),function(Xe){return Ct(te+ke*Xe,le+Fe*Xe,pe+Ve*Xe)+""}},o.interpolateHsl=function(I,H){I=o.hsl(I),H=o.hsl(H);var te=I.h,le=I.s,pe=I.l,ke=H.h-te,Fe=H.s-le,Ve=H.l-pe;return isNaN(Fe)&&(Fe=0,le=isNaN(le)?H.s:le),isNaN(ke)?(ke=0,te=isNaN(te)?H.h:te):ke>180?ke-=360:ke<-180&&(ke+=360),function(Xe){return Mt(te+ke*Xe,le+Fe*Xe,pe+Ve*Xe)+""}},o.interpolateLab=function(I,H){I=o.lab(I),H=o.lab(H);var te=I.l,le=I.a,pe=I.b,ke=H.l-te,Fe=H.a-le,Ve=H.b-pe;return function(Xe){return Qt(te+ke*Xe,le+Fe*Xe,pe+Ve*Xe)+""}},o.interpolateRound=Ul,o.transform=function(I){var H=p.createElementNS(o.ns.prefix.svg,"g");return(o.transform=function(te){if(null!=te){H.setAttribute("transform",te);var le=H.transform.baseVal.consolidate()}return new Xc(le?le.matrix:ac)})(I)},Xc.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ac={a:1,b:0,c:0,d:1,e:0,f:0};function jo(I){return I.length?I.pop()+",":""}function pu(I,H){var pe,ke,Fe,te=[],le=[];return I=o.transform(I),H=o.transform(H),function(pe,ke,Fe,Ve){if(pe[0]!==ke[0]||pe[1]!==ke[1]){var Xe=Fe.push("translate(",null,",",null,")");Ve.push({i:Xe-4,x:Qa(pe[0],ke[0])},{i:Xe-2,x:Qa(pe[1],ke[1])})}else(ke[0]||ke[1])&&Fe.push("translate("+ke+")")}(I.translate,H.translate,te,le),Fe=te,(pe=I.rotate)!==(ke=H.rotate)?(pe-ke>180?ke+=360:ke-pe>180&&(pe+=360),le.push({i:Fe.push(jo(Fe)+"rotate(",null,")")-2,x:Qa(pe,ke)})):ke&&Fe.push(jo(Fe)+"rotate("+ke+")"),function(pe,ke,Fe,Ve){pe!==ke?Ve.push({i:Fe.push(jo(Fe)+"skewX(",null,")")-2,x:Qa(pe,ke)}):ke&&Fe.push(jo(Fe)+"skewX("+ke+")")}(I.skew,H.skew,te,le),function(pe,ke,Fe,Ve){if(pe[0]!==ke[0]||pe[1]!==ke[1]){var Xe=Fe.push(jo(Fe)+"scale(",null,",",null,")");Ve.push({i:Xe-4,x:Qa(pe[0],ke[0])},{i:Xe-2,x:Qa(pe[1],ke[1])})}else 1===ke[0]&&1===ke[1]||Fe.push(jo(Fe)+"scale("+ke+")")}(I.scale,H.scale,te,le),I=H=null,function(pe){for(var ke,Fe=-1,Ve=le.length;++Fe<Ve;)te[(ke=le[Fe]).i]=ke.x(pe);return te.join("")}}function Xu(I,H){return H=(H-=I=+I)||1/H,function(te){return(te-I)/H}}function Ku(I,H){return H=(H-=I=+I)||1/H,function(te){return Math.max(0,Math.min(1,(te-I)/H))}}function bl(I){for(var H=I.source,te=I.target,le=function(Fe,Ve){if(Fe===Ve)return Fe;for(var Xe=gs(Fe),Je=gs(Ve),ct=Xe.pop(),vt=Je.pop(),_t=null;ct===vt;)_t=ct,ct=Xe.pop(),vt=Je.pop();return _t}(H,te),pe=[H];H!==le;)pe.push(H=H.parent);for(var ke=pe.length;te!==le;)pe.splice(ke,0,te),te=te.parent;return pe}function gs(I){for(var H=[],te=I.parent;null!=te;)H.push(I),I=te,te=te.parent;return H.push(I),H}function Vl(I){I.fixed|=2}function Gs(I){I.fixed&=-7}function wl(I){I.fixed|=4,I.px=I.x,I.py=I.y}function Tl(I){I.fixed&=-5}function ms(I,H,te){var le=0,pe=0;if(I.charge=0,!I.leaf)for(var ke,Fe=I.nodes,Ve=Fe.length,Xe=-1;++Xe<Ve;)null!=(ke=Fe[Xe])&&(ms(ke,H,te),I.charge+=ke.charge,le+=ke.charge*ke.cx,pe+=ke.charge*ke.cy);if(I.point){I.leaf||(I.point.x+=Math.random()-.5,I.point.y+=Math.random()-.5);var Je=H*te[I.point.index];I.charge+=I.pointCharge=Je,le+=Je*I.point.x,pe+=Je*I.point.y}I.cx=le/I.charge,I.cy=pe/I.charge}o.interpolateTransform=pu,o.layout={},o.layout.bundle=function(){return function(I){for(var H=[],te=-1,le=I.length;++te<le;)H.push(bl(I[te]));return H}},o.layout.chord=function(){var I,H,te,le,pe,ke,Fe,Ve={},Xe=0;function Je(){var vt,_t,It,Ft,Ot,Yt={},jt=[],ln=o.range(le),tn=[];for(I=[],H=[],vt=0,Ft=-1;++Ft<le;){for(_t=0,Ot=-1;++Ot<le;)_t+=te[Ft][Ot];jt.push(_t),tn.push(o.range(le)),vt+=_t}for(pe&&ln.sort(function(Mr,hr){return pe(jt[Mr],jt[hr])}),ke&&tn.forEach(function(Mr,hr){Mr.sort(function(Cr,Nr){return ke(te[hr][Cr],te[hr][Nr])})}),vt=(Ht-Xe*le)/vt,_t=0,Ft=-1;++Ft<le;){for(It=_t,Ot=-1;++Ot<le;){var Jt=ln[Ft],Mn=tn[Jt][Ot],Ln=te[Jt][Mn],Un=_t,Xn=_t+=Ln*vt;Yt[Jt+"-"+Mn]={index:Jt,subindex:Mn,startAngle:Un,endAngle:Xn,value:Ln}}H[Jt]={index:Jt,startAngle:It,endAngle:_t,value:jt[Jt]},_t+=Xe}for(Ft=-1;++Ft<le;)for(Ot=Ft-1;++Ot<le;){var sr=Yt[Ft+"-"+Ot],xr=Yt[Ot+"-"+Ft];(sr.value||xr.value)&&I.push(sr.value<xr.value?{source:xr,target:sr}:{source:sr,target:xr})}Fe&&ct()}function ct(){I.sort(function(vt,_t){return Fe((vt.source.value+vt.target.value)/2,(_t.source.value+_t.target.value)/2)})}return Ve.matrix=function(vt){return arguments.length?(le=(te=vt)&&te.length,I=H=null,Ve):te},Ve.padding=function(vt){return arguments.length?(Xe=vt,I=H=null,Ve):Xe},Ve.sortGroups=function(vt){return arguments.length?(pe=vt,I=H=null,Ve):pe},Ve.sortSubgroups=function(vt){return arguments.length?(ke=vt,I=null,Ve):ke},Ve.sortChords=function(vt){return arguments.length?(Fe=vt,I&&ct(),Ve):Fe},Ve.chords=function(){return I||Je(),I},Ve.groups=function(){return H||Je(),H},Ve},o.layout.force=function(){var I,H,te,le,pe,ke,Fe={},Ve=o.dispatch("start","tick","end"),Xe=[1,1],Je=.9,ct=Ac,vt=Ls,_t=-30,It=Ps,Ft=.1,Ot=.64,Yt=[],jt=[];function ln(Jt){return function(Mn,Ln,Un,Xn){if(Mn.point!==Jt){var sr=Mn.cx-Jt.x,xr=Mn.cy-Jt.y,Mr=Xn-Ln,hr=sr*sr+xr*xr;if(Mr*Mr/Ot<hr){if(hr<It){var Cr=Mn.charge/hr;Jt.px-=sr*Cr,Jt.py-=xr*Cr}return!0}Mn.point&&hr&&hr<It&&(Jt.px-=sr*(Cr=Mn.pointCharge/hr),Jt.py-=xr*Cr)}return!Mn.charge}}function tn(Jt){Jt.px=o.event.x,Jt.py=o.event.y,Fe.resume()}return Fe.tick=function(){if((te*=.99)<.005)return I=null,Ve.end({type:"end",alpha:te=0}),!0;var Jt,Mn,Ln,Un,Xn,sr,xr,Mr,hr,Cr=Yt.length,Nr=jt.length;for(Mn=0;Mn<Nr;++Mn)Un=(Ln=jt[Mn]).source,(sr=(Mr=(Xn=Ln.target).x-Un.x)*Mr+(hr=Xn.y-Un.y)*hr)&&(Mr*=sr=te*pe[Mn]*((sr=Math.sqrt(sr))-le[Mn])/sr,hr*=sr,Xn.x-=Mr*(xr=Un.weight+Xn.weight?Un.weight/(Un.weight+Xn.weight):.5),Xn.y-=hr*xr,Un.x+=Mr*(xr=1-xr),Un.y+=hr*xr);if((xr=te*Ft)&&(Mr=Xe[0]/2,hr=Xe[1]/2,Mn=-1,xr))for(;++Mn<Cr;)(Ln=Yt[Mn]).x+=(Mr-Ln.x)*xr,Ln.y+=(hr-Ln.y)*xr;if(_t)for(ms(Jt=o.geom.quadtree(Yt),te,ke),Mn=-1;++Mn<Cr;)(Ln=Yt[Mn]).fixed||Jt.visit(ln(Ln));for(Mn=-1;++Mn<Cr;)(Ln=Yt[Mn]).fixed?(Ln.x=Ln.px,Ln.y=Ln.py):(Ln.x-=(Ln.px-(Ln.px=Ln.x))*Je,Ln.y-=(Ln.py-(Ln.py=Ln.y))*Je);Ve.tick({type:"tick",alpha:te})},Fe.nodes=function(Jt){return arguments.length?(Yt=Jt,Fe):Yt},Fe.links=function(Jt){return arguments.length?(jt=Jt,Fe):jt},Fe.size=function(Jt){return arguments.length?(Xe=Jt,Fe):Xe},Fe.linkDistance=function(Jt){return arguments.length?(ct="function"==typeof Jt?Jt:+Jt,Fe):ct},Fe.distance=Fe.linkDistance,Fe.linkStrength=function(Jt){return arguments.length?(vt="function"==typeof Jt?Jt:+Jt,Fe):vt},Fe.friction=function(Jt){return arguments.length?(Je=+Jt,Fe):Je},Fe.charge=function(Jt){return arguments.length?(_t="function"==typeof Jt?Jt:+Jt,Fe):_t},Fe.chargeDistance=function(Jt){return arguments.length?(It=Jt*Jt,Fe):Math.sqrt(It)},Fe.gravity=function(Jt){return arguments.length?(Ft=+Jt,Fe):Ft},Fe.theta=function(Jt){return arguments.length?(Ot=Jt*Jt,Fe):Math.sqrt(Ot)},Fe.alpha=function(Jt){return arguments.length?(Jt=+Jt,te?Jt>0?te=Jt:(I.c=null,I.t=NaN,I=null,Ve.end({type:"end",alpha:te=0})):Jt>0&&(Ve.start({type:"start",alpha:te=Jt}),I=gn(Fe.tick)),Fe):te},Fe.start=function(){var Jt,Mn,Ln,Un=Yt.length,Xn=jt.length,sr=Xe[0],xr=Xe[1];for(Jt=0;Jt<Un;++Jt)(Ln=Yt[Jt]).index=Jt,Ln.weight=0;for(Jt=0;Jt<Xn;++Jt)"number"==typeof(Ln=jt[Jt]).source&&(Ln.source=Yt[Ln.source]),"number"==typeof Ln.target&&(Ln.target=Yt[Ln.target]),++Ln.source.weight,++Ln.target.weight;for(Jt=0;Jt<Un;++Jt)Ln=Yt[Jt],isNaN(Ln.x)&&(Ln.x=Mr("x",sr)),isNaN(Ln.y)&&(Ln.y=Mr("y",xr)),isNaN(Ln.px)&&(Ln.px=Ln.x),isNaN(Ln.py)&&(Ln.py=Ln.y);if(le=[],"function"==typeof ct)for(Jt=0;Jt<Xn;++Jt)le[Jt]=+ct.call(this,jt[Jt],Jt);else for(Jt=0;Jt<Xn;++Jt)le[Jt]=ct;if(pe=[],"function"==typeof vt)for(Jt=0;Jt<Xn;++Jt)pe[Jt]=+vt.call(this,jt[Jt],Jt);else for(Jt=0;Jt<Xn;++Jt)pe[Jt]=vt;if(ke=[],"function"==typeof _t)for(Jt=0;Jt<Un;++Jt)ke[Jt]=+_t.call(this,Yt[Jt],Jt);else for(Jt=0;Jt<Un;++Jt)ke[Jt]=_t;function Mr(hr,Cr){if(!Mn){for(Mn=new Array(Un),Sr=0;Sr<Un;++Sr)Mn[Sr]=[];for(Sr=0;Sr<Xn;++Sr){var Nr=jt[Sr];Mn[Nr.source.index].push(Nr.target),Mn[Nr.target.index].push(Nr.source)}}for(var ei,_r=Mn[Jt],Sr=-1,Hr=_r.length;++Sr<Hr;)if(!isNaN(ei=_r[Sr][hr]))return ei;return Math.random()*Cr}return Fe.resume()},Fe.resume=function(){return Fe.alpha(.1)},Fe.stop=function(){return Fe.alpha(0)},Fe.drag=function(){if(H||(H=o.behavior.drag().origin(R).on("dragstart.force",Vl).on("drag.force",tn).on("dragend.force",Gs)),!arguments.length)return H;this.on("mouseover.force",wl).on("mouseout.force",Tl).call(H)},o.rebind(Fe,Ve,"on")};var Ac=20,Ls=1,Ps=1/0;function Hs(I,H){return o.rebind(I,H,"sort","children","value"),I.nodes=I,I.links=oc,I}function ol(I,H){for(var te=[I];null!=(I=te.pop());)if(H(I),(pe=I.children)&&(le=pe.length))for(var le,pe;--le>=0;)te.push(pe[le])}function ki(I,H){for(var te=[I],le=[];null!=(I=te.pop());)if(le.push(I),(ke=I.children)&&(pe=ke.length))for(var pe,ke,Fe=-1;++Fe<pe;)te.push(ke[Fe]);for(;null!=(I=le.pop());)H(I)}function vs(I){return I.children}function Kc(I){return I.value}function kc(I,H){return H.value-I.value}function oc(I){return o.merge(I.map(function(H){return(H.children||[]).map(function(te){return{source:H,target:te}})}))}o.layout.hierarchy=function(){var I=kc,H=vs,te=Kc;function le(pe){var ke,Fe=[pe],Ve=[];for(pe.depth=0;null!=(ke=Fe.pop());)if(Ve.push(ke),(Je=H.call(le,ke,ke.depth))&&(Xe=Je.length)){for(var Xe,Je,ct;--Xe>=0;)Fe.push(ct=Je[Xe]),ct.parent=ke,ct.depth=ke.depth+1;te&&(ke.value=0),ke.children=Je}else te&&(ke.value=+te.call(le,ke,ke.depth)||0),delete ke.children;return ki(pe,function(vt){var _t,It;I&&(_t=vt.children)&&_t.sort(I),te&&(It=vt.parent)&&(It.value+=vt.value)}),Ve}return le.sort=function(pe){return arguments.length?(I=pe,le):I},le.children=function(pe){return arguments.length?(H=pe,le):H},le.value=function(pe){return arguments.length?(te=pe,le):te},le.revalue=function(pe){return te&&(ol(pe,function(ke){ke.children&&(ke.value=0)}),ki(pe,function(ke){var Fe;ke.children||(ke.value=+te.call(le,ke,ke.depth)||0),(Fe=ke.parent)&&(Fe.value+=ke.value)})),pe},le},o.layout.partition=function(){var I=o.layout.hierarchy(),H=[1,1];function te(ke,Fe,Ve,Xe){var Je=ke.children;if(ke.x=Fe,ke.y=ke.depth*Xe,ke.dx=Ve,ke.dy=Xe,Je&&(ct=Je.length)){var ct,vt,_t,It=-1;for(Ve=ke.value?Ve/ke.value:0;++It<ct;)te(vt=Je[It],Fe,_t=vt.value*Ve,Xe),Fe+=_t}}function le(ke){var Fe=ke.children,Ve=0;if(Fe&&(Xe=Fe.length))for(var Xe,Je=-1;++Je<Xe;)Ve=Math.max(Ve,le(Fe[Je]));return 1+Ve}function pe(ke,Fe){var Ve=I.call(this,ke,Fe);return te(Ve[0],0,H[0],H[1]/le(Ve[0])),Ve}return pe.size=function(ke){return arguments.length?(H=ke,pe):H},Hs(pe,I)},o.layout.pie=function(){var I=Number,H=Mc,te=0,le=Ht,pe=0;function ke(Fe){var Ve,Xe=Fe.length,Je=Fe.map(function(ln,tn){return+I.call(ke,ln,tn)}),ct=+("function"==typeof te?te.apply(this,arguments):te),vt=("function"==typeof le?le.apply(this,arguments):le)-ct,_t=Math.min(Math.abs(vt)/Xe,+("function"==typeof pe?pe.apply(this,arguments):pe)),It=_t*(vt<0?-1:1),Ft=o.sum(Je),Ot=Ft?(vt-Xe*It)/Ft:0,Yt=o.range(Xe),jt=[];return null!=H&&Yt.sort(H===Mc?function(ln,tn){return Je[tn]-Je[ln]}:function(ln,tn){return H(Fe[ln],Fe[tn])}),Yt.forEach(function(ln){jt[ln]={data:Fe[ln],value:Ve=Je[ln],startAngle:ct,endAngle:ct+=Ve*Ot+It,padAngle:_t}}),jt}return ke.value=function(Fe){return arguments.length?(I=Fe,ke):I},ke.sort=function(Fe){return arguments.length?(H=Fe,ke):H},ke.startAngle=function(Fe){return arguments.length?(te=Fe,ke):te},ke.endAngle=function(Fe){return arguments.length?(le=Fe,ke):le},ke.padAngle=function(Fe){return arguments.length?(pe=Fe,ke):pe},ke};var Mc={};function Qo(I){return I.x}function Jc(I){return I.y}function $c(I,H,te){I.y0=H,I.y=te}o.layout.stack=function(){var I=R,H=ka,te=Os,le=$c,pe=Qo,ke=Jc;function Fe(Ve,Xe){if(!(_t=Ve.length))return Ve;var Je=Ve.map(function(ln,tn){return I.call(Fe,ln,tn)}),ct=Je.map(function(ln){return ln.map(function(tn,Jt){return[pe.call(Fe,tn,Jt),ke.call(Fe,tn,Jt)]})}),vt=H.call(Fe,ct,Xe);Je=o.permute(Je,vt),ct=o.permute(ct,vt);var _t,It,Ft,Ot,Yt=te.call(Fe,ct,Xe),jt=Je[0].length;for(Ft=0;Ft<jt;++Ft)for(le.call(Fe,Je[0][Ft],Ot=Yt[Ft],ct[0][Ft][1]),It=1;It<_t;++It)le.call(Fe,Je[It][Ft],Ot+=ct[It-1][Ft][1],ct[It][Ft][1]);return Ve}return Fe.values=function(Ve){return arguments.length?(I=Ve,Fe):I},Fe.order=function(Ve){return arguments.length?(H="function"==typeof Ve?Ve:es.get(Ve)||ka,Fe):H},Fe.offset=function(Ve){return arguments.length?(te="function"==typeof Ve?Ve:Al.get(Ve)||Os,Fe):te},Fe.x=function(Ve){return arguments.length?(pe=Ve,Fe):pe},Fe.y=function(Ve){return arguments.length?(ke=Ve,Fe):ke},Fe.out=function(Ve){return arguments.length?(le=Ve,Fe):le},Fe};var es=o.map({"inside-out":function(I){var H,te,le=I.length,pe=I.map(sc),ke=I.map(Mu),Fe=o.range(le).sort(function(vt,_t){return pe[vt]-pe[_t]}),Ve=0,Xe=0,Je=[],ct=[];for(H=0;H<le;++H)te=Fe[H],Ve<Xe?(Ve+=ke[te],Je.push(te)):(Xe+=ke[te],ct.push(te));return ct.reverse().concat(Je)},reverse:function(I){return o.range(I.length).reverse()},default:ka}),Al=o.map({silhouette:function(I){var H,te,le,pe=I.length,ke=I[0].length,Fe=[],Ve=0,Xe=[];for(te=0;te<ke;++te){for(H=0,le=0;H<pe;H++)le+=I[H][te][1];le>Ve&&(Ve=le),Fe.push(le)}for(te=0;te<ke;++te)Xe[te]=(Ve-Fe[te])/2;return Xe},wiggle:function(I){var H,te,le,pe,ke,Fe,Ve,Xe,Je,ct=I.length,vt=I[0],_t=vt.length,It=[];for(It[0]=Xe=Je=0,te=1;te<_t;++te){for(H=0,pe=0;H<ct;++H)pe+=I[H][te][1];for(H=0,ke=0,Ve=vt[te][0]-vt[te-1][0];H<ct;++H){for(le=0,Fe=(I[H][te][1]-I[H][te-1][1])/(2*Ve);le<H;++le)Fe+=(I[le][te][1]-I[le][te-1][1])/Ve;ke+=Fe*I[H][te][1]}It[te]=Xe-=pe?ke/pe*Ve:0,Xe<Je&&(Je=Xe)}for(te=0;te<_t;++te)It[te]-=Je;return It},expand:function(I){var H,te,le,pe=I.length,ke=I[0].length,Fe=1/pe,Ve=[];for(te=0;te<ke;++te){for(H=0,le=0;H<pe;H++)le+=I[H][te][1];if(le)for(H=0;H<pe;H++)I[H][te][1]/=le;else for(H=0;H<pe;H++)I[H][te][1]=Fe}for(te=0;te<ke;++te)Ve[te]=0;return Ve},zero:Os});function ka(I){return o.range(I.length)}function Os(I){for(var H=-1,te=I[0].length,le=[];++H<te;)le[H]=0;return le}function sc(I){for(var H,te=1,le=0,pe=I[0][1],ke=I.length;te<ke;++te)(H=I[te][1])>pe&&(le=te,pe=H);return le}function Mu(I){return I.reduce(Sc,0)}function Sc(I,H){return I+H[1]}function Uo(I,H){return ts(I,Math.ceil(Math.log(H.length)/Math.LN2+1))}function ts(I,H){for(var te=-1,le=+I[0],pe=(I[1]-le)/H,ke=[];++te<=H;)ke[te]=pe*te+le;return ke}function Qc(I){return[o.min(I),o.max(I)]}function Cc(I,H){return I.value-H.value}function Gl(I,H){var te=I._pack_next;I._pack_next=H,H._pack_prev=I,H._pack_next=te,te._pack_prev=H}function sl(I,H){I._pack_next=H,H._pack_prev=I}function kl(I,H){var te=H.x-I.x,le=H.y-I.y,pe=I.r+H.r;return.999*pe*pe>te*te+le*le}function Lo(I){if((H=I.children)&&(Xe=H.length)){var H,te,le,pe,ke,Fe,Ve,Xe,Je=1/0,ct=-1/0,vt=1/0,_t=-1/0;if(H.forEach(ll),(te=H[0]).x=-te.r,te.y=0,tn(te),Xe>1&&((le=H[1]).x=le.r,le.y=0,tn(le),Xe>2))for(qi(te,le,pe=H[2]),tn(pe),Gl(te,pe),te._pack_prev=pe,Gl(pe,le),le=te._pack_next,ke=3;ke<Xe;ke++){qi(te,le,pe=H[ke]);var It=0,Ft=1,Ot=1;for(Fe=le._pack_next;Fe!==le;Fe=Fe._pack_next,Ft++)if(kl(Fe,pe)){It=1;break}if(1==It)for(Ve=te._pack_prev;Ve!==Fe._pack_prev&&!kl(Ve,pe);Ve=Ve._pack_prev,Ot++);It?(Ft<Ot||Ft==Ot&&le.r<te.r?sl(te,le=Fe):sl(te=Ve,le),ke--):(Gl(te,pe),le=pe,tn(pe))}var Yt=(Je+ct)/2,jt=(vt+_t)/2,ln=0;for(ke=0;ke<Xe;ke++)(pe=H[ke]).x-=Yt,pe.y-=jt,ln=Math.max(ln,pe.r+Math.sqrt(pe.x*pe.x+pe.y*pe.y));I.r=ln,H.forEach(lc)}function tn(Jt){Je=Math.min(Jt.x-Jt.r,Je),ct=Math.max(Jt.x+Jt.r,ct),vt=Math.min(Jt.y-Jt.r,vt),_t=Math.max(Jt.y+Jt.r,_t)}}function ll(I){I._pack_next=I._pack_prev=I}function lc(I){delete I._pack_next,delete I._pack_prev}function Ec(I,H,te,le){var pe=I.children;if(I.x=H+=le*I.x,I.y=te+=le*I.y,I.r*=le,pe)for(var ke=-1,Fe=pe.length;++ke<Fe;)Ec(pe[ke],H,te,le)}function qi(I,H,te){var le=I.r+te.r,pe=H.x-I.x,ke=H.y-I.y;if(le&&(pe||ke)){var Fe=H.r+te.r,Ve=pe*pe+ke*ke,Xe=.5+((le*=le)-(Fe*=Fe))/(2*Ve),Je=Math.sqrt(Math.max(0,2*Fe*(le+Ve)-(le-=Ve)*le-Fe*Fe))/(2*Ve);te.x=I.x+Xe*pe+Je*ke,te.y=I.y+Xe*ke-Je*pe}else te.x=I.x+le,te.y=I.y}function cl(I,H){return I.parent==H.parent?1:2}function lo(I){var H=I.children;return H.length?H[0]:I.t}function ys(I){var H,te=I.children;return(H=te.length)?te[H-1]:I.t}function Di(I,H,te){var le=te/(H.i-I.i);H.c-=le,H.s+=te,I.c+=le,H.z+=te,H.m+=te}function Ui(I,H,te){return I.a.parent===H.parent?I.a:te}function Vo(I){var H=I.children;return H&&H.length?Vo(H[0]):I}function ul(I){var H,te=I.children;return te&&(H=te.length)?ul(te[H-1]):I}function Hl(I){return{x:I.x,y:I.y,dx:I.dx,dy:I.dy}}function cc(I,H){var te=I.x+H[3],le=I.y+H[0],pe=I.dx-H[1]-H[3],ke=I.dy-H[0]-H[2];return pe<0&&(te+=pe/2,pe=0),ke<0&&(le+=ke/2,ke=0),{x:te,y:le,dx:pe,dy:ke}}function ql(I){var H=I[0],te=I[I.length-1];return H<te?[H,te]:[te,H]}function Ic(I){return I.rangeExtent?I.rangeExtent():ql(I.range())}function Go(I,H,te,le){var pe=te(I[0],I[1]),ke=le(H[0],H[1]);return function(Fe){return ke(pe(Fe))}}function qs(I,H){var te,le=0,pe=I.length-1,ke=I[le],Fe=I[pe];return Fe<ke&&(te=le,le=pe,pe=te,te=ke,ke=Fe,Fe=te),I[le]=H.floor(ke),I[pe]=H.ceil(Fe),I}function Ml(I){return I?{floor:function(H){return Math.floor(H/I)*I},ceil:function(H){return Math.ceil(H/I)*I}}:yo}o.layout.histogram=function(){var I=!0,H=Number,te=Qc,le=Uo;function pe(ke,Fe){for(var Ve,Xe,Je=[],ct=ke.map(H,this),vt=te.call(this,ct,Fe),_t=le.call(this,vt,ct,Fe),It=(Fe=-1,ct.length),Ft=_t.length-1,Ot=I?1:1/It;++Fe<Ft;)(Ve=Je[Fe]=[]).dx=_t[Fe+1]-(Ve.x=_t[Fe]),Ve.y=0;if(Ft>0)for(Fe=-1;++Fe<It;)(Xe=ct[Fe])>=vt[0]&&Xe<=vt[1]&&((Ve=Je[o.bisect(_t,Xe,1,Ft)-1]).y+=Ot,Ve.push(ke[Fe]));return Je}return pe.value=function(ke){return arguments.length?(H=ke,pe):H},pe.range=function(ke){return arguments.length?(te=ir(ke),pe):te},pe.bins=function(ke){return arguments.length?(le="number"==typeof ke?function(Fe){return ts(Fe,ke)}:ir(ke),pe):le},pe.frequency=function(ke){return arguments.length?(I=!!ke,pe):I},pe},o.layout.pack=function(){var I,H=o.layout.hierarchy().sort(Cc),te=0,le=[1,1];function pe(ke,Fe){var Ve=H.call(this,ke,Fe),Xe=Ve[0],Je=le[0],ct=le[1],vt=null==I?Math.sqrt:"function"==typeof I?I:function(){return I};if(Xe.x=Xe.y=0,ki(Xe,function(It){It.r=+vt(It.value)}),ki(Xe,Lo),te){var _t=te*(I?1:Math.max(2*Xe.r/Je,2*Xe.r/ct))/2;ki(Xe,function(It){It.r+=_t}),ki(Xe,Lo),ki(Xe,function(It){It.r-=_t})}return Ec(Xe,Je/2,ct/2,I?1:1/Math.max(2*Xe.r/Je,2*Xe.r/ct)),Ve}return pe.size=function(ke){return arguments.length?(le=ke,pe):le},pe.radius=function(ke){return arguments.length?(I=null==ke||"function"==typeof ke?ke:+ke,pe):I},pe.padding=function(ke){return arguments.length?(te=+ke,pe):te},Hs(pe,H)},o.layout.tree=function(){var I=o.layout.hierarchy().sort(null).value(null),H=cl,te=[1,1],le=null;function pe(Xe,Je){var ct=I.call(this,Xe,Je),vt=ct[0],_t=function(tn){for(var Jt,Mn={A:null,children:[tn]},Ln=[Mn];null!=(Jt=Ln.pop());)for(var Un,Xn=Jt.children,sr=0,xr=Xn.length;sr<xr;++sr)Ln.push((Xn[sr]=Un={_:Xn[sr],parent:Jt,children:(Un=Xn[sr].children)&&Un.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:sr}).a=Un);return Mn.children[0]}(vt);if(ki(_t,ke),_t.parent.m=-_t.z,ol(_t,Fe),le)ol(vt,Ve);else{var It=vt,Ft=vt,Ot=vt;ol(vt,function(tn){tn.x<It.x&&(It=tn),tn.x>Ft.x&&(Ft=tn),tn.depth>Ot.depth&&(Ot=tn)});var Yt=H(It,Ft)/2-It.x,jt=te[0]/(Ft.x+H(Ft,It)/2+Yt),ln=te[1]/(Ot.depth||1);ol(vt,function(tn){tn.x=(tn.x+Yt)*jt,tn.y=tn.depth*ln})}return ct}function ke(Xe){var Je=Xe.children,ct=Xe.parent.children,vt=Xe.i?ct[Xe.i-1]:null;if(Je.length){!function(It){for(var Ft,Ot=0,Yt=0,jt=It.children,ln=jt.length;--ln>=0;)(Ft=jt[ln]).z+=Ot,Ft.m+=Ot,Ot+=Ft.s+(Yt+=Ft.c)}(Xe);var _t=(Je[0].z+Je[Je.length-1].z)/2;vt?(Xe.z=vt.z+H(Xe._,vt._),Xe.m=Xe.z-_t):Xe.z=_t}else vt&&(Xe.z=vt.z+H(Xe._,vt._));Xe.parent.A=function(It,Ft,Ot){if(Ft){for(var Yt,jt=It,ln=It,tn=Ft,Jt=jt.parent.children[0],Mn=jt.m,Ln=ln.m,Un=tn.m,Xn=Jt.m;tn=ys(tn),jt=lo(jt),tn&&jt;)Jt=lo(Jt),(ln=ys(ln)).a=It,(Yt=tn.z+Un-jt.z-Mn+H(tn._,jt._))>0&&(Di(Ui(tn,It,Ot),It,Yt),Mn+=Yt,Ln+=Yt),Un+=tn.m,Mn+=jt.m,Xn+=Jt.m,Ln+=ln.m;tn&&!ys(ln)&&(ln.t=tn,ln.m+=Un-Ln),jt&&!lo(Jt)&&(Jt.t=jt,Jt.m+=Mn-Xn,Ot=It)}return Ot}(Xe,vt,Xe.parent.A||ct[0])}function Fe(Xe){Xe._.x=Xe.z+Xe.parent.m,Xe.m+=Xe.parent.m}function Ve(Xe){Xe.x*=te[0],Xe.y=Xe.depth*te[1]}return pe.separation=function(Xe){return arguments.length?(H=Xe,pe):H},pe.size=function(Xe){return arguments.length?(le=null==(te=Xe)?Ve:null,pe):le?null:te},pe.nodeSize=function(Xe){return arguments.length?(le=null==(te=Xe)?null:Ve,pe):le?te:null},Hs(pe,I)},o.layout.cluster=function(){var I=o.layout.hierarchy().sort(null).value(null),H=cl,te=[1,1],le=!1;function pe(ke,Fe){var Ve,Xe=I.call(this,ke,Fe),Je=Xe[0],ct=0;ki(Je,function(Ot){var jt,Yt=Ot.children;Yt&&Yt.length?(Ot.x=(jt=Yt).reduce(function(ln,tn){return ln+tn.x},0)/jt.length,Ot.y=function(jt){return 1+o.max(jt,function(ln){return ln.y})}(Yt)):(Ot.x=Ve?ct+=H(Ot,Ve):0,Ot.y=0,Ve=Ot)});var vt=Vo(Je),_t=ul(Je),It=vt.x-H(vt,_t)/2,Ft=_t.x+H(_t,vt)/2;return ki(Je,le?function(Ot){Ot.x=(Ot.x-Je.x)*te[0],Ot.y=(Je.y-Ot.y)*te[1]}:function(Ot){Ot.x=(Ot.x-It)/(Ft-It)*te[0],Ot.y=(1-(Je.y?Ot.y/Je.y:1))*te[1]}),Xe}return pe.separation=function(ke){return arguments.length?(H=ke,pe):H},pe.size=function(ke){return arguments.length?(le=null==(te=ke),pe):le?null:te},pe.nodeSize=function(ke){return arguments.length?(le=null!=(te=ke),pe):le?te:null},Hs(pe,I)},o.layout.treemap=function(){var I,H=o.layout.hierarchy(),te=Math.round,le=[1,1],pe=null,ke=Hl,Fe=!1,Ve="squarify",Xe=.5*(1+Math.sqrt(5));function Je(Ot,Yt){for(var jt,ln,tn=-1,Jt=Ot.length;++tn<Jt;)ln=(jt=Ot[tn]).value*(Yt<0?0:Yt),jt.area=isNaN(ln)||ln<=0?0:ln}function ct(Ot){var Yt=Ot.children;if(Yt&&Yt.length){var jt,ln,tn,Jt=ke(Ot),Mn=[],Ln=Yt.slice(),Un=1/0,Xn="slice"===Ve?Jt.dx:"dice"===Ve?Jt.dy:"slice-dice"===Ve?1&Ot.depth?Jt.dy:Jt.dx:Math.min(Jt.dx,Jt.dy);for(Je(Ln,Jt.dx*Jt.dy/Ot.value),Mn.area=0;(tn=Ln.length)>0;)Mn.push(jt=Ln[tn-1]),Mn.area+=jt.area,"squarify"!==Ve||(ln=_t(Mn,Xn))<=Un?(Ln.pop(),Un=ln):(Mn.area-=Mn.pop().area,It(Mn,Xn,Jt,!1),Xn=Math.min(Jt.dx,Jt.dy),Mn.length=Mn.area=0,Un=1/0);Mn.length&&(It(Mn,Xn,Jt,!0),Mn.length=Mn.area=0),Yt.forEach(ct)}}function vt(Ot){var Yt=Ot.children;if(Yt&&Yt.length){var jt,ln=ke(Ot),tn=Yt.slice(),Jt=[];for(Je(tn,ln.dx*ln.dy/Ot.value),Jt.area=0;jt=tn.pop();)Jt.push(jt),Jt.area+=jt.area,null!=jt.z&&(It(Jt,jt.z?ln.dx:ln.dy,ln,!tn.length),Jt.length=Jt.area=0);Yt.forEach(vt)}}function _t(Ot,Yt){for(var jt,ln=Ot.area,tn=0,Jt=1/0,Mn=-1,Ln=Ot.length;++Mn<Ln;)(jt=Ot[Mn].area)&&(jt<Jt&&(Jt=jt),jt>tn&&(tn=jt));return Yt*=Yt,(ln*=ln)?Math.max(Yt*tn*Xe/ln,ln/(Yt*Jt*Xe)):1/0}function It(Ot,Yt,jt,ln){var tn,Jt=-1,Mn=Ot.length,Ln=jt.x,Un=jt.y,Xn=Yt?te(Ot.area/Yt):0;if(Yt==jt.dx){for((ln||Xn>jt.dy)&&(Xn=jt.dy);++Jt<Mn;)(tn=Ot[Jt]).x=Ln,tn.y=Un,tn.dy=Xn,Ln+=tn.dx=Math.min(jt.x+jt.dx-Ln,Xn?te(tn.area/Xn):0);tn.z=!0,tn.dx+=jt.x+jt.dx-Ln,jt.y+=Xn,jt.dy-=Xn}else{for((ln||Xn>jt.dx)&&(Xn=jt.dx);++Jt<Mn;)(tn=Ot[Jt]).x=Ln,tn.y=Un,tn.dx=Xn,Un+=tn.dy=Math.min(jt.y+jt.dy-Un,Xn?te(tn.area/Xn):0);tn.z=!1,tn.dy+=jt.y+jt.dy-Un,jt.x+=Xn,jt.dx-=Xn}}function Ft(Ot){var Yt=I||H(Ot),jt=Yt[0];return jt.x=jt.y=0,jt.value?(jt.dx=le[0],jt.dy=le[1]):jt.dx=jt.dy=0,I&&H.revalue(jt),Je([jt],jt.dx*jt.dy/jt.value),(I?vt:ct)(jt),Fe&&(I=Yt),Yt}return Ft.size=function(Ot){return arguments.length?(le=Ot,Ft):le},Ft.padding=function(Ot){if(!arguments.length)return pe;var jt;return ke=null==(pe=Ot)?Hl:"function"==(jt=typeof Ot)?function(ln){var tn=Ot.call(Ft,ln,ln.depth);return null==tn?Hl(ln):cc(ln,"number"==typeof tn?[tn,tn,tn,tn]:tn)}:("number"===jt&&(Ot=[Ot,Ot,Ot,Ot]),function Yt(ln){return cc(ln,Ot)}),Ft},Ft.round=function(Ot){return arguments.length?(te=Ot?Math.round:Number,Ft):te!=Number},Ft.sticky=function(Ot){return arguments.length?(Fe=Ot,I=null,Ft):Fe},Ft.ratio=function(Ot){return arguments.length?(Xe=Ot,Ft):Xe},Ft.mode=function(Ot){return arguments.length?(Ve=Ot+"",Ft):Ve},Hs(Ft,H)},o.random={normal:function(I,H){var te=arguments.length;return te<2&&(H=1),te<1&&(I=0),function(){var le,pe,ke;do{ke=(le=2*Math.random()-1)*le+(pe=2*Math.random()-1)*pe}while(!ke||ke>1);return I+H*le*Math.sqrt(-2*Math.log(ke)/ke)}},logNormal:function(){var I=o.random.normal.apply(o,arguments);return function(){return Math.exp(I())}},bates:function(I){var H=o.random.irwinHall(I);return function(){return H()/I}},irwinHall:function(I){return function(){for(var H=0,te=0;te<I;te++)H+=Math.random();return H}}},o.scale={};var yo={floor:R,ceil:R};function Wl(I,H,te,le){var pe=[],ke=[],Fe=0,Ve=Math.min(I.length,H.length)-1;for(I[Ve]<I[0]&&(I=I.slice().reverse(),H=H.slice().reverse());++Fe<=Ve;)pe.push(te(I[Fe-1],I[Fe])),ke.push(le(H[Fe-1],H[Fe]));return function(Xe){var Je=o.bisect(I,Xe,1,Ve)-1;return ke[Je](pe[Je](Xe))}}function Ho(I,H,te,le){var pe,ke;function Fe(){var Xe=Math.min(I.length,H.length)>2?Wl:Go,Je=le?Ku:Xu;return pe=Xe(I,H,Je,te),ke=Xe(H,I,Je,Eo),Ve}function Ve(Xe){return pe(Xe)}return Ve.invert=function(Xe){return ke(Xe)},Ve.domain=function(Xe){return arguments.length?(I=Xe.map(Number),Fe()):I},Ve.range=function(Xe){return arguments.length?(H=Xe,Fe()):H},Ve.rangeRound=function(Xe){return Ve.range(Xe).interpolate(Ul)},Ve.clamp=function(Xe){return arguments.length?(le=Xe,Fe()):le},Ve.interpolate=function(Xe){return arguments.length?(te=Xe,Fe()):te},Ve.ticks=function(Xe){return Ha(I,Xe)},Ve.tickFormat=function(Xe,Je){return d3_scale_linearTickFormat(I,Xe,Je)},Ve.nice=function(Xe){return eo(I,Xe),Fe()},Ve.copy=function(){return Ho(I,H,te,le)},Fe()}function Ka(I,H){return o.rebind(I,H,"range","rangeRound","interpolate","clamp")}function eo(I,H){return qs(I,Ml(Wi(I,H)[2])),qs(I,Ml(Wi(I,H)[2])),I}function Wi(I,H){null==H&&(H=10);var te=ql(I),le=te[1]-te[0],pe=Math.pow(10,Math.floor(Math.log(le/H)/Math.LN10)),ke=H/le*pe;return ke<=.15?pe*=10:ke<=.35?pe*=5:ke<=.75&&(pe*=2),te[0]=Math.ceil(te[0]/pe)*pe,te[1]=Math.floor(te[1]/pe)*pe+.5*pe,te[2]=pe,te}function Ha(I,H){return o.range.apply(o,Wi(I,H))}function Ws(I,H,te,le){function pe(Ve){return(te?Math.log(Ve<0?0:Ve):-Math.log(Ve>0?0:-Ve))/Math.log(H)}function ke(Ve){return te?Math.pow(H,Ve):-Math.pow(H,-Ve)}function Fe(Ve){return I(pe(Ve))}return Fe.invert=function(Ve){return ke(I.invert(Ve))},Fe.domain=function(Ve){return arguments.length?(te=Ve[0]>=0,I.domain((le=Ve.map(Number)).map(pe)),Fe):le},Fe.base=function(Ve){return arguments.length?(H=+Ve,I.domain(le.map(pe)),Fe):H},Fe.nice=function(){var Ve=qs(le.map(pe),te?Math:Sl);return I.domain(Ve),le=Ve.map(ke),Fe},Fe.ticks=function(){var Ve=ql(le),Xe=[],Je=Ve[0],ct=Ve[1],vt=Math.floor(pe(Je)),_t=Math.ceil(pe(ct)),It=H%1?2:H;if(isFinite(_t-vt)){if(te){for(;vt<_t;vt++)for(var Ft=1;Ft<It;Ft++)Xe.push(ke(vt)*Ft);Xe.push(ke(vt))}else for(Xe.push(ke(vt));vt++<_t;)for(Ft=It-1;Ft>0;Ft--)Xe.push(ke(vt)*Ft);for(vt=0;Xe[vt]<Je;vt++);for(_t=Xe.length;Xe[_t-1]>ct;_t--);Xe=Xe.slice(vt,_t)}return Xe},Fe.copy=function(){return Ws(I.copy(),H,te,le)},Ka(Fe,I)}o.scale.linear=function(){return Ho([0,1],[0,1],Eo,!1)},o.scale.log=function(){return Ws(o.scale.linear().domain([0,1]),10,!0,[1,10])};var Sl={floor:function(I){return-Math.ceil(-I)},ceil:function(I){return-Math.floor(-I)}};function co(I,H,te){var le=hl(H),pe=hl(1/H);function ke(Fe){return I(le(Fe))}return ke.invert=function(Fe){return pe(I.invert(Fe))},ke.domain=function(Fe){return arguments.length?(I.domain((te=Fe.map(Number)).map(le)),ke):te},ke.ticks=function(Fe){return Ha(te,Fe)},ke.tickFormat=function(Fe,Ve){return d3_scale_linearTickFormat(te,Fe,Ve)},ke.nice=function(Fe){return ke.domain(eo(te,Fe))},ke.exponent=function(Fe){return arguments.length?(le=hl(H=Fe),pe=hl(1/H),I.domain(te.map(le)),ke):H},ke.copy=function(){return co(I.copy(),H,te)},Ka(ke,I)}function hl(I){return function(H){return H<0?-Math.pow(-H,I):Math.pow(H,I)}}function uo(I,H){var te,le,pe;function ke(Ve){return le[((te.get(Ve)||("range"===H.t?te.set(Ve,I.push(Ve)):NaN))-1)%le.length]}function Fe(Ve,Xe){return o.range(I.length).map(function(Je){return Ve+Xe*Je})}return ke.domain=function(Ve){if(!arguments.length)return I;I=[],te=new v;for(var Xe,Je=-1,ct=Ve.length;++Je<ct;)te.has(Xe=Ve[Je])||te.set(Xe,I.push(Xe));return ke[H.t].apply(ke,H.a)},ke.range=function(Ve){return arguments.length?(le=Ve,pe=0,H={t:"range",a:arguments},ke):le},ke.rangePoints=function(Ve,Xe){arguments.length<2&&(Xe=0);var Je=Ve[0],ct=Ve[1],vt=I.length<2?(Je=(Je+ct)/2,0):(ct-Je)/(I.length-1+Xe);return le=Fe(Je+vt*Xe/2,vt),pe=0,H={t:"rangePoints",a:arguments},ke},ke.rangeRoundPoints=function(Ve,Xe){arguments.length<2&&(Xe=0);var Je=Ve[0],ct=Ve[1],vt=I.length<2?(Je=ct=Math.round((Je+ct)/2),0):(ct-Je)/(I.length-1+Xe)|0;return le=Fe(Je+Math.round(vt*Xe/2+(ct-Je-(I.length-1+Xe)*vt)/2),vt),pe=0,H={t:"rangeRoundPoints",a:arguments},ke},ke.rangeBands=function(Ve,Xe,Je){arguments.length<2&&(Xe=0),arguments.length<3&&(Je=Xe);var ct=Ve[1]<Ve[0],vt=Ve[ct-0],_t=(Ve[1-ct]-vt)/(I.length-Xe+2*Je);return le=Fe(vt+_t*Je,_t),ct&&le.reverse(),pe=_t*(1-Xe),H={t:"rangeBands",a:arguments},ke},ke.rangeRoundBands=function(Ve,Xe,Je){arguments.length<2&&(Xe=0),arguments.length<3&&(Je=Xe);var ct=Ve[1]<Ve[0],vt=Ve[ct-0],_t=Ve[1-ct],It=Math.floor((_t-vt)/(I.length-Xe+2*Je));return le=Fe(vt+Math.round((_t-vt-(I.length-Xe)*It)/2),It),ct&&le.reverse(),pe=Math.round(It*(1-Xe)),H={t:"rangeRoundBands",a:arguments},ke},ke.rangeBand=function(){return pe},ke.rangeExtent=function(){return ql(H.a[0])},ke.copy=function(){return uo(I,H)},ke.domain(I)}o.scale.pow=function(){return co(o.scale.linear(),1,[0,1])},o.scale.sqrt=function(){return o.scale.pow().exponent(.5)},o.scale.ordinal=function(){return uo([],{t:"range",a:[[]]})},o.scale.category10=function(){return o.scale.ordinal().range(Yl)},o.scale.category20=function(){return o.scale.ordinal().range(Po)},o.scale.category20b=function(){return o.scale.ordinal().range(ko)},o.scale.category20c=function(){return o.scale.ordinal().range(qo)};var Yl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(hn),Po=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(hn),ko=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(hn),qo=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(hn);function na(I,H){var te;function le(){var ke=0,Fe=H.length;for(te=[];++ke<Fe;)te[ke-1]=o.quantile(I,ke/Fe);return pe}function pe(ke){if(!isNaN(ke=+ke))return H[o.bisect(te,ke)]}return pe.domain=function(ke){return arguments.length?(I=ke.map(h).filter(u).sort(c),le()):I},pe.range=function(ke){return arguments.length?(H=ke,le()):H},pe.quantiles=function(){return te},pe.invertExtent=function(ke){return(ke=H.indexOf(ke))<0?[NaN,NaN]:[ke>0?te[ke-1]:I[0],ke<te.length?te[ke]:I[I.length-1]]},pe.copy=function(){return na(I,H)},le()}function ns(I,H,te){var le,pe;function ke(Ve){return te[Math.max(0,Math.min(pe,Math.floor(le*(Ve-I))))]}function Fe(){return le=te.length/(H-I),pe=te.length-1,ke}return ke.domain=function(Ve){return arguments.length?(I=+Ve[0],H=+Ve[Ve.length-1],Fe()):[I,H]},ke.range=function(Ve){return arguments.length?(te=Ve,Fe()):te},ke.invertExtent=function(Ve){return[Ve=(Ve=te.indexOf(Ve))<0?NaN:Ve/le+I,Ve+1/le]},ke.copy=function(){return ns(I,H,te)},Fe()}function $r(I,H){function te(le){if(le<=le)return H[o.bisect(I,le)]}return te.domain=function(le){return arguments.length?(I=le,te):I},te.range=function(le){return arguments.length?(H=le,te):H},te.invertExtent=function(le){return le=H.indexOf(le),[I[le-1],I[le]]},te.copy=function(){return $r(I,H)},te}function fl(I){function H(te){return+te}return H.invert=H,H.domain=H.range=function(te){return arguments.length?(I=te.map(H),H):I},H.ticks=function(te){return Ha(I,te)},H.tickFormat=function(te,le){return d3_scale_linearTickFormat(I,te,le)},H.copy=function(){return fl(I)},H}function Lc(){return 0}o.scale.quantile=function(){return na([],[])},o.scale.quantize=function(){return ns(0,1,[0,1])},o.scale.threshold=function(){return $r([.5],[0,1])},o.scale.identity=function(){return fl([0,1])},o.svg={},o.svg.arc=function(){var I=Ds,H=Cl,te=Lc,le=Rs,pe=rs,ke=Br,Fe=Pc;function Ve(){var Je=Math.max(0,+I.apply(this,arguments)),ct=Math.max(0,+H.apply(this,arguments)),vt=pe.apply(this,arguments)-Qe,_t=ke.apply(this,arguments)-Qe,It=Math.abs(_t-vt),Ft=vt>_t?0:1;if(ct<Je&&(Ot=ct,ct=Je,Je=Ot),It>=zt)return Xe(ct,Ft)+(Je?Xe(Je,1-Ft):"")+"Z";var Ot,Yt,jt,ln,tn,Jt,Mn,Ln,Un,Xn,sr,xr,Mr=0,hr=0,Cr=[];if((ln=(+Fe.apply(this,arguments)||0)/2)&&(jt=le===Rs?Math.sqrt(Je*Je+ct*ct):+le.apply(this,arguments),Ft||(hr*=-1),ct&&(hr=et(jt/ct*Math.sin(ln))),Je&&(Mr=et(jt/Je*Math.sin(ln)))),ct){tn=ct*Math.cos(vt+hr),Jt=ct*Math.sin(vt+hr),Mn=ct*Math.cos(_t-hr),Ln=ct*Math.sin(_t-hr);var Nr=Math.abs(_t-vt-2*hr)<=Vt?0:1;if(hr&&xs(tn,Jt,Mn,Ln)===Ft^Nr){var ei=(vt+_t)/2;tn=ct*Math.cos(ei),Jt=ct*Math.sin(ei),Mn=Ln=null}}else tn=Jt=0;if(Je){Un=Je*Math.cos(_t-Mr),Xn=Je*Math.sin(_t-Mr),sr=Je*Math.cos(vt+Mr),xr=Je*Math.sin(vt+Mr);var _r=Math.abs(vt-_t+2*Mr)<=Vt?0:1;if(Mr&&xs(Un,Xn,sr,xr)===1-Ft^_r){var Sr=(vt+_t)/2;Un=Je*Math.cos(Sr),Xn=Je*Math.sin(Sr),sr=xr=null}}else Un=Xn=0;if(It>ot&&(Ot=Math.min(Math.abs(ct-Je)/2,+te.apply(this,arguments)))>.001){Yt=Je<ct^Ft?0:1;var Hr=Ot,Pr=Ot;if(It<Vt){var Kr=null==sr?[Un,Xn]:null==Mn?[tn,Jt]:Nt([tn,Jt],[sr,xr],[Mn,Ln],[Un,Xn]),ii=tn-Kr[0],di=Jt-Kr[1],mi=Mn-Kr[0],Ti=Ln-Kr[1],Li=1/Math.sin(Math.acos((ii*mi+di*Ti)/(Math.sqrt(ii*ii+di*di)*Math.sqrt(mi*mi+Ti*Ti)))/2),pa=Math.sqrt(Kr[0]*Kr[0]+Kr[1]*Kr[1]);Pr=Math.min(Ot,(Je-pa)/(Li-1)),Hr=Math.min(Ot,(ct-pa)/(Li+1))}if(null!=Mn){var Pa=qa(null==sr?[Un,Xn]:[sr,xr],[tn,Jt],ct,Hr,Ft),to=qa([Mn,Ln],[Un,Xn],ct,Hr,Ft);Ot===Hr?Cr.push("M",Pa[0],"A",Hr,",",Hr," 0 0,",Yt," ",Pa[1],"A",ct,",",ct," 0 ",1-Ft^xs(Pa[1][0],Pa[1][1],to[1][0],to[1][1]),",",Ft," ",to[1],"A",Hr,",",Hr," 0 0,",Yt," ",to[0]):Cr.push("M",Pa[0],"A",Hr,",",Hr," 0 1,",Yt," ",to[0])}else Cr.push("M",tn,",",Jt);if(null!=sr){var Ja=qa([tn,Jt],[sr,xr],Je,-Pr,Ft),ya=qa([Un,Xn],null==Mn?[tn,Jt]:[Mn,Ln],Je,-Pr,Ft);Ot===Pr?Cr.push("L",ya[0],"A",Pr,",",Pr," 0 0,",Yt," ",ya[1],"A",Je,",",Je," 0 ",Ft^xs(ya[1][0],ya[1][1],Ja[1][0],Ja[1][1]),",",1-Ft," ",Ja[1],"A",Pr,",",Pr," 0 0,",Yt," ",Ja[0]):Cr.push("L",ya[0],"A",Pr,",",Pr," 0 0,",Yt," ",Ja[0])}else Cr.push("L",Un,",",Xn)}else Cr.push("M",tn,",",Jt),null!=Mn&&Cr.push("A",ct,",",ct," 0 ",Nr,",",Ft," ",Mn,",",Ln),Cr.push("L",Un,",",Xn),null!=sr&&Cr.push("A",Je,",",Je," 0 ",_r,",",1-Ft," ",sr,",",xr);return Cr.push("Z"),Cr.join("")}function Xe(Je,ct){return"M0,"+Je+"A"+Je+","+Je+" 0 1,"+ct+" 0,"+-Je+"A"+Je+","+Je+" 0 1,"+ct+" 0,"+Je}return Ve.innerRadius=function(Je){return arguments.length?(I=ir(Je),Ve):I},Ve.outerRadius=function(Je){return arguments.length?(H=ir(Je),Ve):H},Ve.cornerRadius=function(Je){return arguments.length?(te=ir(Je),Ve):te},Ve.padRadius=function(Je){return arguments.length?(le=Je==Rs?Rs:ir(Je),Ve):le},Ve.startAngle=function(Je){return arguments.length?(pe=ir(Je),Ve):pe},Ve.endAngle=function(Je){return arguments.length?(ke=ir(Je),Ve):ke},Ve.padAngle=function(Je){return arguments.length?(Fe=ir(Je),Ve):Fe},Ve.centroid=function(){var Je=(+I.apply(this,arguments)+ +H.apply(this,arguments))/2,ct=(+pe.apply(this,arguments)+ +ke.apply(this,arguments))/2-Qe;return[Math.cos(ct)*Je,Math.sin(ct)*Je]},Ve};var Rs="auto";function Ds(I){return I.innerRadius}function Cl(I){return I.outerRadius}function rs(I){return I.startAngle}function Br(I){return I.endAngle}function Pc(I){return I&&I.padAngle}function xs(I,H,te,le){return(I-te)*H-(H-le)*I>0?0:1}function qa(I,H,te,le,pe){var ke=I[0]-H[0],Fe=I[1]-H[1],Ve=(pe?le:-le)/Math.sqrt(ke*ke+Fe*Fe),Xe=Ve*Fe,Je=-Ve*ke,ct=I[0]+Xe,vt=I[1]+Je,_t=H[0]+Xe,It=H[1]+Je,Ft=(ct+_t)/2,Ot=(vt+It)/2,Yt=_t-ct,jt=It-vt,ln=Yt*Yt+jt*jt,tn=te-le,Jt=ct*It-_t*vt,Mn=(jt<0?-1:1)*Math.sqrt(Math.max(0,tn*tn*ln-Jt*Jt)),Ln=(Jt*jt-Yt*Mn)/ln,Un=(-Jt*Yt-jt*Mn)/ln,Xn=(Jt*jt+Yt*Mn)/ln,sr=(-Jt*Yt+jt*Mn)/ln,xr=Ln-Ft,Mr=Un-Ot,hr=Xn-Ft,Cr=sr-Ot;return xr*xr+Mr*Mr>hr*hr+Cr*Cr&&(Ln=Xn,Un=sr),[[Ln-Xe,Un-Je],[Ln*te/tn,Un*te/tn]]}function dl(){return!0}function Wo(I){var H=Kn,te=tr,le=dl,pe=ho,ke=pe.key,Fe=.7;function Ve(Xe){var Je,ct=[],vt=[],_t=-1,It=Xe.length,Ft=ir(H),Ot=ir(te);function Yt(){ct.push("M",pe(I(vt),Fe))}for(;++_t<It;)le.call(this,Je=Xe[_t],_t)?vt.push([+Ft.call(this,Je,_t),+Ot.call(this,Je,_t)]):vt.length&&(Yt(),vt=[]);return vt.length&&Yt(),ct.length?ct.join(""):null}return Ve.x=function(Xe){return arguments.length?(H=Xe,Ve):H},Ve.y=function(Xe){return arguments.length?(te=Xe,Ve):te},Ve.defined=function(Xe){return arguments.length?(le=Xe,Ve):le},Ve.interpolate=function(Xe){return arguments.length?(ke="function"==typeof Xe?pe=Xe:(pe=_s.get(Xe)||ho).key,Ve):ke},Ve.tension=function(Xe){return arguments.length?(Fe=Xe,Ve):Fe},Ve}o.svg.line=function(){return Wo(R)};var _s=o.map({linear:ho,"linear-closed":bs,step:function(I){for(var H=0,te=I.length,le=I[0],pe=[le[0],",",le[1]];++H<te;)pe.push("H",(le[0]+(le=I[H])[0])/2,"V",le[1]);return te>1&&pe.push("H",le[0]),pe.join("")},"step-before":ws,"step-after":Ys,basis:zi,"basis-open":function(I){if(I.length<4)return ho(I);for(var H,te=[],le=-1,pe=I.length,ke=[0],Fe=[0];++le<3;)ke.push((H=I[le])[0]),Fe.push(H[1]);for(te.push(ja(Ua,ke)+","+ja(Ua,Fe)),--le;++le<pe;)H=I[le],ke.shift(),ke.push(H[0]),Fe.shift(),Fe.push(H[1]),Zl(te,ke,Fe);return te.join("")},"basis-closed":function(I){for(var H,te,le=-1,pe=I.length,ke=pe+4,Fe=[],Ve=[];++le<4;)Fe.push((te=I[le%pe])[0]),Ve.push(te[1]);for(H=[ja(Ua,Fe),",",ja(Ua,Ve)],--le;++le<ke;)te=I[le%pe],Fe.shift(),Fe.push(te[0]),Ve.shift(),Ve.push(te[1]),Zl(H,Fe,Ve);return H.join("")},bundle:function(I,H){var te=I.length-1;if(te)for(var le,pe,ke=I[0][0],Fe=I[0][1],Ve=I[te][0]-ke,Xe=I[te][1]-Fe,Je=-1;++Je<=te;)(le=I[Je])[0]=H*le[0]+(1-H)*(ke+(pe=Je/te)*Ve),le[1]=H*le[1]+(1-H)*(Fe+pe*Xe);return zi(I)},cardinal:function(I,H){return I.length<3?ho(I):I[0]+El(I,Zs(I,H))},"cardinal-open":function(I,H){return I.length<4?ho(I):I[1]+El(I.slice(1,-1),Zs(I,H))},"cardinal-closed":function(I,H){return I.length<3?bs(I):I[0]+El((I.push(I[0]),I),Zs([I[I.length-2]].concat(I,[I[1]]),H))},monotone:function(I){return I.length<3?ho(I):I[0]+El(I,function(H){for(var te,le,pe,ke,Fe=[],Ve=function(ct){for(var vt=0,_t=ct.length-1,It=[],Ft=ct[0],Ot=ct[1],Yt=It[0]=uc(Ft,Ot);++vt<_t;)It[vt]=(Yt+(Yt=uc(Ft=Ot,Ot=ct[vt+1])))/2;return It[vt]=Yt,It}(H),Xe=-1,Je=H.length-1;++Xe<Je;)te=uc(H[Xe],H[Xe+1]),g(te)<ot?Ve[Xe]=Ve[Xe+1]=0:(ke=(le=Ve[Xe]/te)*le+(pe=Ve[Xe+1]/te)*pe)>9&&(ke=3*te/Math.sqrt(ke),Ve[Xe]=ke*le,Ve[Xe+1]=ke*pe);for(Xe=-1;++Xe<=Je;)ke=(H[Math.min(Je,Xe+1)][0]-H[Math.max(0,Xe-1)][0])/(6*(1+Ve[Xe]*Ve[Xe])),Fe.push([ke||0,Ve[Xe]*ke||0]);return Fe}(I))}});function ho(I){return I.length>1?I.join("L"):I+"Z"}function bs(I){return I.join("L")+"Z"}function ws(I){for(var H=0,te=I.length,le=I[0],pe=[le[0],",",le[1]];++H<te;)pe.push("V",(le=I[H])[1],"H",le[0]);return pe.join("")}function Ys(I){for(var H=0,te=I.length,le=I[0],pe=[le[0],",",le[1]];++H<te;)pe.push("H",(le=I[H])[0],"V",le[1]);return pe.join("")}function El(I,H){if(H.length<1||I.length!=H.length&&I.length!=H.length+2)return ho(I);var te=I.length!=H.length,le="",pe=I[0],ke=I[1],Fe=H[0],Ve=Fe,Xe=1;if(te&&(le+="Q"+(ke[0]-2*Fe[0]/3)+","+(ke[1]-2*Fe[1]/3)+","+ke[0]+","+ke[1],pe=I[1],Xe=2),H.length>1){ke=I[Xe],Xe++,le+="C"+(pe[0]+Fe[0])+","+(pe[1]+Fe[1])+","+(ke[0]-(Ve=H[1])[0])+","+(ke[1]-Ve[1])+","+ke[0]+","+ke[1];for(var Je=2;Je<H.length;Je++,Xe++)le+="S"+((ke=I[Xe])[0]-(Ve=H[Je])[0])+","+(ke[1]-Ve[1])+","+ke[0]+","+ke[1]}if(te){var ct=I[Xe];le+="Q"+(ke[0]+2*Ve[0]/3)+","+(ke[1]+2*Ve[1]/3)+","+ct[0]+","+ct[1]}return le}function Zs(I,H){for(var te,le=[],pe=(1-H)/2,ke=I[0],Fe=I[1],Ve=1,Xe=I.length;++Ve<Xe;)te=ke,ke=Fe,le.push([pe*((Fe=I[Ve])[0]-te[0]),pe*(Fe[1]-te[1])]);return le}function zi(I){if(I.length<3)return ho(I);var H=1,te=I.length,le=I[0],pe=le[0],ke=le[1],Fe=[pe,pe,pe,(le=I[1])[0]],Ve=[ke,ke,ke,le[1]],Xe=[pe,",",ke,"L",ja(Ua,Fe),",",ja(Ua,Ve)];for(I.push(I[te-1]);++H<=te;)le=I[H],Fe.shift(),Fe.push(le[0]),Ve.shift(),Ve.push(le[1]),Zl(Xe,Fe,Ve);return I.pop(),Xe.push("L",le),Xe.join("")}function ja(I,H){return I[0]*H[0]+I[1]*H[1]+I[2]*H[2]+I[3]*H[3]}_s.forEach(function(I,H){H.key=I,H.closed=/-closed$/.test(I)});var Oo=[0,2/3,1/3,0],zs=[0,1/3,2/3,0],Ua=[0,1/6,2/3,1/6];function Zl(I,H,te){I.push("C",ja(Oo,H),",",ja(Oo,te),",",ja(zs,H),",",ja(zs,te),",",ja(Ua,H),",",ja(Ua,te))}function uc(I,H){return(H[1]-I[1])/(H[0]-I[0])}function xo(I){for(var H,te,le,pe=-1,ke=I.length;++pe<ke;)te=(H=I[pe])[0],le=H[1]-Qe,H[0]=te*Math.cos(le),H[1]=te*Math.sin(le);return I}function Ii(I){var H=Kn,te=Kn,le=0,pe=tr,ke=dl,Fe=ho,Ve=Fe.key,Xe=Fe,Je="L",ct=.7;function vt(_t){var It,Ft,Ot,Yt=[],jt=[],ln=[],tn=-1,Jt=_t.length,Mn=ir(H),Ln=ir(le),Un=H===te?function(){return Ft}:ir(te),Xn=le===pe?function(){return Ot}:ir(pe);function sr(){Yt.push("M",Fe(I(ln),ct),Je,Xe(I(jt.reverse()),ct),"Z")}for(;++tn<Jt;)ke.call(this,It=_t[tn],tn)?(jt.push([Ft=+Mn.call(this,It,tn),Ot=+Ln.call(this,It,tn)]),ln.push([+Un.call(this,It,tn),+Xn.call(this,It,tn)])):jt.length&&(sr(),jt=[],ln=[]);return jt.length&&sr(),Yt.length?Yt.join(""):null}return vt.x=function(_t){return arguments.length?(H=te=_t,vt):te},vt.x0=function(_t){return arguments.length?(H=_t,vt):H},vt.x1=function(_t){return arguments.length?(te=_t,vt):te},vt.y=function(_t){return arguments.length?(le=pe=_t,vt):pe},vt.y0=function(_t){return arguments.length?(le=_t,vt):le},vt.y1=function(_t){return arguments.length?(pe=_t,vt):pe},vt.defined=function(_t){return arguments.length?(ke=_t,vt):ke},vt.interpolate=function(_t){return arguments.length?(Ve="function"==typeof _t?Fe=_t:(Fe=_s.get(_t)||ho).key,Xe=Fe.reverse||Fe,Je=Fe.closed?"M":"L",vt):Ve},vt.tension=function(_t){return arguments.length?(ct=_t,vt):ct},vt}function Fs(I){return I.source}function Xs(I){return I.target}function Ts(I){return I.radius}function Ks(I){return[I.x,I.y]}function Xl(){return 64}function As(){return"circle"}function la(I){var H=Math.sqrt(I/Vt);return"M0,"+H+"A"+H+","+H+" 0 1,1 0,"+-H+"A"+H+","+H+" 0 1,1 0,"+H+"Z"}o.svg.line.radial=function(){var I=Wo(xo);return I.radius=I.x,delete I.x,I.angle=I.y,delete I.y,I},ws.reverse=Ys,Ys.reverse=ws,o.svg.area=function(){return Ii(R)},o.svg.area.radial=function(){var I=Ii(xo);return I.radius=I.x,delete I.x,I.innerRadius=I.x0,delete I.x0,I.outerRadius=I.x1,delete I.x1,I.angle=I.y,delete I.y,I.startAngle=I.y0,delete I.y0,I.endAngle=I.y1,delete I.y1,I},o.svg.chord=function(){var I=Fs,H=Xs,te=Ts,le=rs,pe=Br;function ke(Je,ct){var vt,_t,It=Fe(this,I,Je,ct),Ft=Fe(this,H,Je,ct);return"M"+It.p0+Ve(It.r,It.p1,It.a1-It.a0)+((vt=It).a0==(_t=Ft).a0&&vt.a1==_t.a1?Xe(0,0,0,It.p0):Xe(0,0,0,Ft.p0)+Ve(Ft.r,Ft.p1,Ft.a1-Ft.a0)+Xe(0,0,0,It.p0))+"Z"}function Fe(Je,ct,vt,_t){var It=ct.call(Je,vt,_t),Ft=te.call(Je,It,_t),Ot=le.call(Je,It,_t)-Qe,Yt=pe.call(Je,It,_t)-Qe;return{r:Ft,a0:Ot,a1:Yt,p0:[Ft*Math.cos(Ot),Ft*Math.sin(Ot)],p1:[Ft*Math.cos(Yt),Ft*Math.sin(Yt)]}}function Ve(Je,ct,vt){return"A"+Je+","+Je+" 0 "+ +(vt>Vt)+",1 "+ct}function Xe(Je,ct,vt,_t){return"Q 0,0 "+_t}return ke.radius=function(Je){return arguments.length?(te=ir(Je),ke):te},ke.source=function(Je){return arguments.length?(I=ir(Je),ke):I},ke.target=function(Je){return arguments.length?(H=ir(Je),ke):H},ke.startAngle=function(Je){return arguments.length?(le=ir(Je),ke):le},ke.endAngle=function(Je){return arguments.length?(pe=ir(Je),ke):pe},ke},o.svg.diagonal=function(){var I=Fs,H=Xs,te=Ks;function le(pe,ke){var Fe=I.call(this,pe,ke),Ve=H.call(this,pe,ke),Xe=(Fe.y+Ve.y)/2,Je=[Fe,{x:Fe.x,y:Xe},{x:Ve.x,y:Xe},Ve];return"M"+(Je=Je.map(te))[0]+"C"+Je[1]+" "+Je[2]+" "+Je[3]}return le.source=function(pe){return arguments.length?(I=ir(pe),le):I},le.target=function(pe){return arguments.length?(H=ir(pe),le):H},le.projection=function(pe){return arguments.length?(te=pe,le):te},le},o.svg.diagonal.radial=function(){var I=o.svg.diagonal(),H=Ks,te=I.projection;return I.projection=function(le){return arguments.length?te((pe=H=le,function(){var ke=pe.apply(this,arguments),Fe=ke[0],Ve=ke[1]-Qe;return[Fe*Math.cos(Ve),Fe*Math.sin(Ve)]})):H;var pe},I},o.svg.symbol=function(){var I=As,H=Xl;function te(le,pe){return(Il.get(I.call(this,le,pe))||la)(H.call(this,le,pe))}return te.type=function(le){return arguments.length?(I=ir(le),te):I},te.size=function(le){return arguments.length?(H=ir(le),te):H},te};var Il=o.map({circle:la,cross:function(I){var H=Math.sqrt(I/5)/2;return"M"+-3*H+","+-H+"H"+-H+"V"+-3*H+"H"+H+"V"+-H+"H"+3*H+"V"+H+"H"+H+"V"+3*H+"H"+-H+"V"+H+"H"+-3*H+"Z"},diamond:function(I){var H=Math.sqrt(I/(2*ti)),te=H*ti;return"M0,"+-H+"L"+te+",0 0,"+H+" "+-te+",0Z"},square:function(I){var H=Math.sqrt(I)/2;return"M"+-H+","+-H+"L"+H+","+-H+" "+H+","+H+" "+-H+","+H+"Z"},"triangle-down":function(I){var H=Math.sqrt(I/Xr),te=H*Xr/2;return"M0,"+te+"L"+H+","+-te+" "+-H+","+-te+"Z"},"triangle-up":function(I){var H=Math.sqrt(I/Xr),te=H*Xr/2;return"M0,"+-te+"L"+H+","+te+" "+-H+","+te+"Z"}});o.svg.symbolTypes=Il.keys();var Xr=Math.sqrt(3),ti=Math.tan(30*nt);we.transition=function(I){for(var H,te,le=La||++eu,pe=ra(I),ke=[],Fe=gi||{time:Date.now(),ease:ps,delay:0,duration:250},Ve=-1,Xe=this.length;++Ve<Xe;){ke.push(H=[]);for(var Je=this[Ve],ct=-1,vt=Je.length;++ct<vt;)(te=Je[ct])&&Mo(te,ct,pe,le,Fe),H.push(te)}return as(ke,pe,le)},we.interrupt=function(I){return this.each(null==I?Yo:is(ra(I)))};var Yo=is(ra());function is(I){return function(){var H,te,le;(H=this[I])&&(le=H[te=H.active])&&(le.timer.c=null,le.timer.t=NaN,--H.count?delete H[te]:delete this[I],H.active+=.5,le.event&&le.event.interrupt.call(this,this.__data__,le.index))}}function as(I,H,te){return X(I,ta),I.namespace=H,I.id=te,I}var La,gi,ta=[],eu=0;function Zo(I,H,te,le){var pe=I.id,ke=I.namespace;return Me(I,"function"==typeof te?function(Fe,Ve,Xe){Fe[ke][pe].tween.set(H,le(te.call(Fe,Fe.__data__,Ve,Xe)))}:(te=le(te),function(Fe){Fe[ke][pe].tween.set(H,te)}))}function wi(I){return null==I&&(I=""),function(){this.textContent=I}}function ra(I){return null==I?"__transition__":"__transition_"+I+"__"}function Mo(I,H,te,le,pe){var ke,Fe,Ve,Xe,Je,ct=I[te]||(I[te]={active:0,count:0}),vt=ct[le];function _t(Ft){var Ot=ct.active,Yt=ct[Ot];for(var jt in Yt&&(Yt.timer.c=null,Yt.timer.t=NaN,--ct.count,delete ct[Ot],Yt.event&&Yt.event.interrupt.call(I,I.__data__,Yt.index)),ct)if(+jt<le){var ln=ct[jt];ln.timer.c=null,ln.timer.t=NaN,--ct.count,delete ct[jt]}Fe.c=It,gn(function(){return Fe.c&&It(Ft||1)&&(Fe.c=null,Fe.t=NaN),1},0,ke),ct.active=le,vt.event&&vt.event.start.call(I,I.__data__,H),Je=[],vt.tween.forEach(function(tn,Jt){(Jt=Jt.call(I,I.__data__,H))&&Je.push(Jt)}),Xe=vt.ease,Ve=vt.duration}function It(Ft){for(var Ot=Ft/Ve,Yt=Xe(Ot),jt=Je.length;jt>0;)Je[--jt].call(I,Yt);if(Ot>=1)return vt.event&&vt.event.end.call(I,I.__data__,H),--ct.count?delete ct[le]:delete I[te],1}vt||(Fe=gn(function(Ft){var Ot=vt.delay;if(Fe.t=Ot+ke,Ot<=Ft)return _t(Ft-Ot);Fe.c=_t},0,ke=pe.time),vt=ct[le]={tween:new v,time:ke,timer:Fe,delay:pe.delay,duration:pe.duration,ease:pe.ease,index:H},pe=null,++ct.count)}ta.call=we.call,ta.empty=we.empty,ta.node=we.node,ta.size=we.size,o.transition=function(I,H){return I&&I.transition?La?I.transition(H):I:o.selection().transition(I)},o.transition.prototype=ta,ta.select=function(I){var H,te,le,pe=this.id,ke=this.namespace,Fe=[];I=Te(I);for(var Ve=-1,Xe=this.length;++Ve<Xe;){Fe.push(H=[]);for(var Je=this[Ve],ct=-1,vt=Je.length;++ct<vt;)(le=Je[ct])&&(te=I.call(le,le.__data__,ct,Ve))?("__data__"in le&&(te.__data__=le.__data__),Mo(te,ct,ke,pe,le[ke][pe]),H.push(te)):H.push(null)}return as(Fe,ke,pe)},ta.selectAll=function(I){var H,te,le,pe,ke,Fe=this.id,Ve=this.namespace,Xe=[];I=xe(I);for(var Je=-1,ct=this.length;++Je<ct;)for(var vt=this[Je],_t=-1,It=vt.length;++_t<It;)if(le=vt[_t]){ke=le[Ve][Fe],te=I.call(le,le.__data__,_t,Je),Xe.push(H=[]);for(var Ft=-1,Ot=te.length;++Ft<Ot;)(pe=te[Ft])&&Mo(pe,Ft,Ve,Fe,ke),H.push(pe)}return as(Xe,Ve,Fe)},ta.filter=function(I){var H,te,le=[];"function"!=typeof I&&(I=je(I));for(var pe=0,ke=this.length;pe<ke;pe++){le.push(H=[]);for(var Fe,Ve=0,Xe=(Fe=this[pe]).length;Ve<Xe;Ve++)(te=Fe[Ve])&&I.call(te,te.__data__,Ve,pe)&&H.push(te)}return as(le,this.namespace,this.id)},ta.tween=function(I,H){var te=this.id,le=this.namespace;return arguments.length<2?this.node()[le][te].tween.get(I):Me(this,null==H?function(pe){pe[le][te].tween.remove(I)}:function(pe){pe[le][te].tween.set(I,H)})},ta.attr=function(I,H){if(arguments.length<2){for(H in I)this.attr(H,I[H]);return this}var te="transform"==I?pu:Eo,le=o.ns.qualify(I);function pe(){this.removeAttribute(le)}function ke(){this.removeAttributeNS(le.space,le.local)}return Zo(this,"attr."+I,H,le.local?function(Fe){return null==Fe?ke:(Fe+="",function(){var Ve,Xe=this.getAttributeNS(le.space,le.local);return Xe!==Fe&&(Ve=te(Xe,Fe),function(Je){this.setAttributeNS(le.space,le.local,Ve(Je))})})}:function(Fe){return null==Fe?pe:(Fe+="",function(){var Ve,Xe=this.getAttribute(le);return Xe!==Fe&&(Ve=te(Xe,Fe),function(Je){this.setAttribute(le,Ve(Je))})})})},ta.attrTween=function(I,H){var te=o.ns.qualify(I);return this.tween("attr."+I,te.local?function(le,pe){var ke=H.call(this,le,pe,this.getAttributeNS(te.space,te.local));return ke&&function(Fe){this.setAttributeNS(te.space,te.local,ke(Fe))}}:function(le,pe){var ke=H.call(this,le,pe,this.getAttribute(te));return ke&&function(Fe){this.setAttribute(te,ke(Fe))}})},ta.style=function(I,H,te){var le=arguments.length;if(le<3){if("string"!=typeof I){for(te in le<2&&(H=""),I)this.style(te,I[te],H);return this}te=""}function pe(){this.style.removeProperty(I)}return Zo(this,"style."+I,H,function(ke){return null==ke?pe:(ke+="",function(){var Fe,Ve=t(this).getComputedStyle(this,null).getPropertyValue(I);return Ve!==ke&&(Fe=Eo(Ve,ke),function(Xe){this.style.setProperty(I,Fe(Xe),te)})})})},ta.styleTween=function(I,H,te){return arguments.length<3&&(te=""),this.tween("style."+I,function(le,pe){var ke=H.call(this,le,pe,t(this).getComputedStyle(this,null).getPropertyValue(I));return ke&&function(Fe){this.style.setProperty(I,ke(Fe),te)}})},ta.text=function(I){return Zo(this,"text",I,wi)},ta.remove=function(){var I=this.namespace;return this.each("end.transition",function(){var H;this[I].count<2&&(H=this.parentNode)&&H.removeChild(this)})},ta.ease=function(I){var H=this.id,te=this.namespace;return arguments.length<1?this.node()[te][H].ease:("function"!=typeof I&&(I=o.ease.apply(o,arguments)),Me(this,function(le){le[te][H].ease=I}))},ta.delay=function(I){var H=this.id,te=this.namespace;return arguments.length<1?this.node()[te][H].delay:Me(this,"function"==typeof I?function(le,pe,ke){le[te][H].delay=+I.call(le,le.__data__,pe,ke)}:(I=+I,function(le){le[te][H].delay=I}))},ta.duration=function(I){var H=this.id,te=this.namespace;return arguments.length<1?this.node()[te][H].duration:Me(this,"function"==typeof I?function(le,pe,ke){le[te][H].duration=Math.max(1,I.call(le,le.__data__,pe,ke))}:(I=Math.max(1,I),function(le){le[te][H].duration=I}))},ta.each=function(I,H){var te=this.id,le=this.namespace;if(arguments.length<2){var pe=gi,ke=La;try{La=te,Me(this,function(Fe,Ve,Xe){gi=Fe[le][te],I.call(Fe,Fe.__data__,Ve,Xe)})}finally{gi=pe,La=ke}}else Me(this,function(Fe){var Ve=Fe[le][te];(Ve.event||(Ve.event=o.dispatch("start","end","interrupt"))).on(I,H)});return this},ta.transition=function(){for(var I,H,te,le=this.id,pe=++eu,ke=this.namespace,Fe=[],Ve=0,Xe=this.length;Ve<Xe;Ve++){Fe.push(I=[]);for(var Je,ct=0,vt=(Je=this[Ve]).length;ct<vt;ct++)(H=Je[ct])&&Mo(H,ct,ke,pe,{time:(te=H[ke][le]).time,ease:te.ease,delay:te.delay+te.duration,duration:te.duration}),I.push(H)}return as(Fe,ke,pe)},o.svg.axis=function(){var I,H=o.scale.linear(),te=os,le=6,pe=6,ke=3,Fe=[10],Ve=null;function Xe(Je){Je.each(function(){var ct,vt=o.select(this),_t=this.__chart__||H,It=this.__chart__=H.copy(),Ft=Ve??(It.ticks?It.ticks.apply(It,Fe):It.domain()),Ot=I??(It.tickFormat?It.tickFormat.apply(It,Fe):R),Yt=vt.selectAll(".tick").data(Ft,It),jt=Yt.enter().insert("g",".domain").attr("class","tick").style("opacity",ot),ln=o.transition(Yt.exit()).style("opacity",ot).remove(),tn=o.transition(Yt.order()).style("opacity",1),Jt=Math.max(le,0)+ke,Mn=Ic(It),Ln=vt.selectAll(".domain").data([0]),Un=(Ln.enter().append("path").attr("class","domain"),o.transition(Ln));jt.append("line"),jt.append("text");var Xn,sr,xr,Mr,hr=jt.select("line"),Cr=tn.select("line"),Nr=Yt.select("text").text(Ot),ei=jt.select("text"),_r=tn.select("text"),Sr="top"===te||"left"===te?-1:1;if("bottom"===te||"top"===te?(ct=rt,Xn="x",xr="y",sr="x2",Mr="y2",Nr.attr("dy",Sr<0?"0em":".71em").style("text-anchor","middle"),Un.attr("d","M"+Mn[0]+","+Sr*pe+"V0H"+Mn[1]+"V"+Sr*pe)):(ct=st,Xn="y",xr="x",sr="y2",Mr="x2",Nr.attr("dy",".32em").style("text-anchor",Sr<0?"end":"start"),Un.attr("d","M"+Sr*pe+","+Mn[0]+"H0V"+Mn[1]+"H"+Sr*pe)),hr.attr(Mr,Sr*le),ei.attr(xr,Sr*Jt),Cr.attr(sr,0).attr(Mr,Sr*le),_r.attr(Xn,0).attr(xr,Sr*Jt),It.rangeBand){var Hr=It,Pr=Hr.rangeBand()/2;_t=It=function(Kr){return Hr(Kr)+Pr}}else _t.rangeBand?_t=It:ln.call(ct,It,_t);jt.call(ct,_t,It),tn.call(ct,It,It)})}return Xe.scale=function(Je){return arguments.length?(H=Je,Xe):H},Xe.orient=function(Je){return arguments.length?(te=Je in Js?Je+"":os,Xe):te},Xe.ticks=function(){return arguments.length?(Fe=b(arguments),Xe):Fe},Xe.tickValues=function(Je){return arguments.length?(Ve=Je,Xe):Ve},Xe.tickFormat=function(Je){return arguments.length?(I=Je,Xe):I},Xe.tickSize=function(Je){var ct=arguments.length;return ct?(le=+Je,pe=+arguments[ct-1],Xe):le},Xe.innerTickSize=function(Je){return arguments.length?(le=+Je,Xe):le},Xe.outerTickSize=function(Je){return arguments.length?(pe=+Je,Xe):pe},Xe.tickPadding=function(Je){return arguments.length?(ke=+Je,Xe):ke},Xe.tickSubdivide=function(){return arguments.length&&Xe},Xe};var os="bottom",Js={top:1,right:1,bottom:1,left:1};function rt(I,H,te){I.attr("transform",function(le){var pe=H(le);return"translate("+(isFinite(pe)?pe:te(le))+",0)"})}function st(I,H,te){I.attr("transform",function(le){var pe=H(le);return"translate(0,"+(isFinite(pe)?pe:te(le))+")"})}o.svg.brush=function(){var I,H,te=Q(ct,"brushstart","brush","brushend"),le=null,pe=null,ke=[0,0],Fe=[0,0],Ve=!0,Xe=!0,Je=j[0];function ct(Ot){Ot.each(function(){var Yt=o.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Ft).on("touchstart.brush",Ft),jt=Yt.selectAll(".background").data([0]);jt.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Yt.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var ln=Yt.selectAll(".resize").data(Je,R);ln.exit().remove(),ln.enter().append("g").attr("class",function(Ln){return"resize "+Ln}).style("cursor",function(Ln){return pt[Ln]}).append("rect").attr("x",function(Ln){return/[ew]$/.test(Ln)?-3:null}).attr("y",function(Ln){return/^[ns]/.test(Ln)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),ln.style("display",ct.empty()?"none":null);var tn,Jt=o.transition(Yt),Mn=o.transition(jt);le&&(tn=Ic(le),Mn.attr("x",tn[0]).attr("width",tn[1]-tn[0]),_t(Jt)),pe&&(tn=Ic(pe),Mn.attr("y",tn[0]).attr("height",tn[1]-tn[0]),It(Jt)),vt(Jt)})}function vt(Ot){Ot.selectAll(".resize").attr("transform",function(Yt){return"translate("+ke[+/e$/.test(Yt)]+","+Fe[+/^s/.test(Yt)]+")"})}function _t(Ot){Ot.select(".extent").attr("x",ke[0]),Ot.selectAll(".extent,.n>rect,.s>rect").attr("width",ke[1]-ke[0])}function It(Ot){Ot.select(".extent").attr("y",Fe[0]),Ot.selectAll(".extent,.e>rect,.w>rect").attr("height",Fe[1]-Fe[0])}function Ft(){var Ot,Yt,jt=this,ln=o.select(o.event.target),tn=te.of(jt,arguments),Jt=o.select(jt),Mn=ln.datum(),Ln=!/^(n|s)$/.test(Mn)&&le,Un=!/^(e|w)$/.test(Mn)&&pe,Xn=ln.classed("extent"),sr=kt(jt),xr=o.mouse(jt),Mr=o.select(t(jt)).on("keydown.brush",function(){32==o.event.keyCode&&(Xn||(Ot=null,xr[0]-=ke[1],xr[1]-=Fe[1],Xn=2),re())}).on("keyup.brush",function(){32==o.event.keyCode&&2==Xn&&(xr[0]+=ke[1],xr[1]+=Fe[1],Xn=0,re())});if(o.event.changedTouches?Mr.on("touchmove.brush",Nr).on("touchend.brush",_r):Mr.on("mousemove.brush",Nr).on("mouseup.brush",_r),Jt.interrupt().selectAll("*").interrupt(),Xn)xr[0]=ke[0]-xr[0],xr[1]=Fe[0]-xr[1];else if(Mn){var hr=+/w$/.test(Mn),Cr=+/^n/.test(Mn);Yt=[ke[1-hr]-xr[0],Fe[1-Cr]-xr[1]],xr[0]=ke[hr],xr[1]=Fe[Cr]}else o.event.altKey&&(Ot=xr.slice());function Nr(){var Sr=o.mouse(jt),Hr=!1;Yt&&(Sr[0]+=Yt[0],Sr[1]+=Yt[1]),Xn||(o.event.altKey?(Ot||(Ot=[(ke[0]+ke[1])/2,(Fe[0]+Fe[1])/2]),xr[0]=ke[+(Sr[0]<Ot[0])],xr[1]=Fe[+(Sr[1]<Ot[1])]):Ot=null),Ln&&ei(Sr,le,0)&&(_t(Jt),Hr=!0),Un&&ei(Sr,pe,1)&&(It(Jt),Hr=!0),Hr&&(vt(Jt),tn({type:"brush",mode:Xn?"move":"resize"}))}function ei(Sr,Hr,Pr){var Kr,ii,di=Ic(Hr),mi=di[0],Ti=di[1],Li=xr[Pr],pa=Pr?Fe:ke,Pa=pa[1]-pa[0];if(Xn&&(mi-=Li,Ti-=Pa+Li),Kr=(Pr?Xe:Ve)?Math.max(mi,Math.min(Ti,Sr[Pr])):Sr[Pr],Xn?ii=(Kr+=Li)+Pa:(Ot&&(Li=Math.max(mi,Math.min(Ti,2*Ot[Pr]-Kr))),Li<Kr?(ii=Kr,Kr=Li):ii=Li),pa[0]!=Kr||pa[1]!=ii)return Pr?H=null:I=null,pa[0]=Kr,pa[1]=ii,!0}function _r(){Nr(),Jt.style("pointer-events","all").selectAll(".resize").style("display",ct.empty()?"none":null),o.select("body").style("cursor",null),Mr.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),sr(),tn({type:"brushend"})}Jt.style("pointer-events","none").selectAll(".resize").style("display",null),o.select("body").style("cursor",ln.style("cursor")),tn({type:"brushstart"}),Nr()}return ct.event=function(Ot){Ot.each(function(){var Yt=te.of(this,arguments),jt={x:ke,y:Fe,i:I,j:H},ln=this.__chart__||jt;this.__chart__=jt,La?o.select(this).transition().each("start.brush",function(){I=ln.i,H=ln.j,ke=ln.x,Fe=ln.y,Yt({type:"brushstart"})}).tween("brush:brush",function(){var tn=$o(ke,jt.x),Jt=$o(Fe,jt.y);return I=H=null,function(Mn){ke=jt.x=tn(Mn),Fe=jt.y=Jt(Mn),Yt({type:"brush",mode:"resize"})}}).each("end.brush",function(){I=jt.i,H=jt.j,Yt({type:"brush",mode:"resize"}),Yt({type:"brushend"})}):(Yt({type:"brushstart"}),Yt({type:"brush",mode:"resize"}),Yt({type:"brushend"}))})},ct.x=function(Ot){return arguments.length?(Je=j[!(le=Ot)<<1|!pe],ct):le},ct.y=function(Ot){return arguments.length?(Je=j[!le<<1|!(pe=Ot)],ct):pe},ct.clamp=function(Ot){return arguments.length?(le&&pe?(Ve=!!Ot[0],Xe=!!Ot[1]):le?Ve=!!Ot:pe&&(Xe=!!Ot),ct):le&&pe?[Ve,Xe]:le?Ve:pe?Xe:null},ct.extent=function(Ot){var Yt,jt,ln,tn,Jt;return arguments.length?(le&&(Yt=Ot[0],jt=Ot[1],pe&&(Yt=Yt[0],jt=jt[0]),I=[Yt,jt],le.invert&&(Yt=le(Yt),jt=le(jt)),jt<Yt&&(Jt=Yt,Yt=jt,jt=Jt),Yt==ke[0]&&jt==ke[1]||(ke=[Yt,jt])),pe&&(ln=Ot[0],tn=Ot[1],le&&(ln=ln[1],tn=tn[1]),H=[ln,tn],pe.invert&&(ln=pe(ln),tn=pe(tn)),tn<ln&&(Jt=ln,ln=tn,tn=Jt),ln==Fe[0]&&tn==Fe[1]||(Fe=[ln,tn])),ct):(le&&(I?(Yt=I[0],jt=I[1]):(Yt=ke[0],jt=ke[1],le.invert&&(Yt=le.invert(Yt),jt=le.invert(jt)),jt<Yt&&(Jt=Yt,Yt=jt,jt=Jt))),pe&&(H?(ln=H[0],tn=H[1]):(ln=Fe[0],tn=Fe[1],pe.invert&&(ln=pe.invert(ln),tn=pe.invert(tn)),tn<ln&&(Jt=ln,ln=tn,tn=Jt))),le&&pe?[[Yt,ln],[jt,tn]]:le?[Yt,jt]:pe&&[ln,tn])},ct.clear=function(){return ct.empty()||(ke=[0,0],Fe=[0,0],I=H=null),ct},ct.empty=function(){return!!le&&ke[0]==ke[1]||!!pe&&Fe[0]==Fe[1]},o.rebind(ct,te,"on")};var pt={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},j=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function Y(I){return JSON.parse(I.responseText)}function q(I){var H=p.createRange();return H.selectNode(p.body),H.createContextualFragment(I.responseText)}o.text=$n(function(I){return I.responseText}),o.json=function(I,H){return mr(I,"application/json",Y,H)},o.html=function(I,H){return mr(I,"text/html",q,H)},o.xml=$n(function(I){return I.responseXML}),void 0===(k="function"==typeof(S=o)?S.call(F,e,F,ie):S)||(ie.exports=k)}).apply(self)},3480:function(ie){ie.exports=function(){"use strict";var F,e,S;function k(o,T){if(F)if(e){var b="var sharedChunk = {}; ("+F+")(sharedChunk); ("+e+")(sharedChunk);",p={};F(p),S=T(p),typeof window<"u"&&(S.workerUrl=window.URL.createObjectURL(new Blob([b],{type:"text/javascript"})))}else e=T;else F=T}return k(0,function(o){function T(M,D){return M(D={exports:{}},D.exports),D.exports}var b="1.13.4",p=l;function l(M,D,K,de){this.cx=3*M,this.bx=3*(K-M)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*D,this.by=3*(de-D)-this.cy,this.ay=1-this.cy-this.by,this.p1x=M,this.p1y=de,this.p2x=K,this.p2y=de}l.prototype.sampleCurveX=function(M){return((this.ax*M+this.bx)*M+this.cx)*M},l.prototype.sampleCurveY=function(M){return((this.ay*M+this.by)*M+this.cy)*M},l.prototype.sampleCurveDerivativeX=function(M){return(3*this.ax*M+2*this.bx)*M+this.cx},l.prototype.solveCurveX=function(M,D){var K,de,Ee,Be,Ye;for(void 0===D&&(D=1e-6),Ee=M,Ye=0;Ye<8;Ye++){if(Be=this.sampleCurveX(Ee)-M,Math.abs(Be)<D)return Ee;var at=this.sampleCurveDerivativeX(Ee);if(Math.abs(at)<1e-6)break;Ee-=Be/at}if((Ee=M)<(K=0))return K;if(Ee>(de=1))return de;for(;K<de;){if(Be=this.sampleCurveX(Ee),Math.abs(Be-M)<D)return Ee;M>Be?K=Ee:de=Ee,Ee=.5*(de-K)+K}return Ee},l.prototype.solve=function(M,D){return this.sampleCurveY(this.solveCurveX(M,D))};var t=i;function i(M,D){this.x=M,this.y=D}i.prototype={clone:function(){return new i(this.x,this.y)},add:function(M){return this.clone()._add(M)},sub:function(M){return this.clone()._sub(M)},multByPoint:function(M){return this.clone()._multByPoint(M)},divByPoint:function(M){return this.clone()._divByPoint(M)},mult:function(M){return this.clone()._mult(M)},div:function(M){return this.clone()._div(M)},rotate:function(M){return this.clone()._rotate(M)},rotateAround:function(M,D){return this.clone()._rotateAround(M,D)},matMult:function(M){return this.clone()._matMult(M)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(M){return this.x===M.x&&this.y===M.y},dist:function(M){return Math.sqrt(this.distSqr(M))},distSqr:function(M){var D=M.x-this.x,K=M.y-this.y;return D*D+K*K},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(M){return Math.atan2(this.y-M.y,this.x-M.x)},angleWith:function(M){return this.angleWithSep(M.x,M.y)},angleWithSep:function(M,D){return Math.atan2(this.x*D-this.y*M,this.x*M+this.y*D)},_matMult:function(M){var K=M[2]*this.x+M[3]*this.y;return this.x=M[0]*this.x+M[1]*this.y,this.y=K,this},_add:function(M){return this.x+=M.x,this.y+=M.y,this},_sub:function(M){return this.x-=M.x,this.y-=M.y,this},_mult:function(M){return this.x*=M,this.y*=M,this},_div:function(M){return this.x/=M,this.y/=M,this},_multByPoint:function(M){return this.x*=M.x,this.y*=M.y,this},_divByPoint:function(M){return this.x/=M.x,this.y/=M.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var M=this.y;return this.y=this.x,this.x=-M,this},_rotate:function(M){var D=Math.cos(M),K=Math.sin(M),Ee=K*this.x+D*this.y;return this.x=D*this.x-K*this.y,this.y=Ee,this},_rotateAround:function(M,D){var K=Math.cos(M),de=Math.sin(M),Be=D.y+de*(this.x-D.x)+K*(this.y-D.y);return this.x=D.x+K*(this.x-D.x)-de*(this.y-D.y),this.y=Be,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(M){return M instanceof i?M:Array.isArray(M)?new i(M[0],M[1]):M};var r=typeof self<"u"?self:{},n=Math.pow(2,53)-1;function a(M,D,K,de){var Ee=new p(M,D,K,de);return function(Be){return Ee.solve(Be)}}var s=a(.25,.1,.25,1);function c(M,D,K){return Math.min(K,Math.max(D,M))}function h(M,D,K){var de=K-D,Ee=((M-D)%de+de)%de+D;return Ee===D?K:Ee}function u(M){for(var D=[],K=arguments.length-1;K-- >0;)D[K]=arguments[K+1];for(var de=0,Ee=D;de<Ee.length;de+=1){var Be=Ee[de];for(var Ye in Be)M[Ye]=Be[Ye]}return M}var y=1;function d(){return y++}function m(){return function M(D){return D?(D^16*Math.random()>>D/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,M)}()}function g(M){return!!M&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(M)}function x(M,D){M.forEach(function(K){D[K]&&(D[K]=D[K].bind(D))})}function v(M,D){return-1!==M.indexOf(D,M.length-D.length)}function _(M,D,K){var de={};for(var Ee in M)de[Ee]=D.call(K||this,M[Ee],Ee,M);return de}function f(M,D,K){var de={};for(var Ee in M)D.call(K||this,M[Ee],Ee,M)&&(de[Ee]=M[Ee]);return de}function C(M){return Array.isArray(M)?M.map(C):"object"==typeof M&&M?_(M,C):M}var w={};function E(M){w[M]||(typeof console<"u"&&console.warn(M),w[M]=!0)}function P(M,D,K){return(K.y-M.y)*(D.x-M.x)>(D.y-M.y)*(K.x-M.x)}function L(M){for(var D=0,K=0,de=M.length,Ee=de-1,Be=void 0,Ye=void 0;K<de;Ee=K++)D+=((Ye=M[Ee]).x-(Be=M[K]).x)*(Be.y+Ye.y);return D}function O(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function z(M){var D={};if(M.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(de,Ee,Be,Ye){var at=Be||Ye;return D[Ee]=!at||at.toLowerCase(),""}),D["max-age"]){var K=parseInt(D["max-age"],10);isNaN(K)?delete D["max-age"]:D["max-age"]=K}return D}var V=null;function R(M){if(null==V){var D=M.navigator?M.navigator.userAgent:null;V=!!M.safari||!(!D||!(/\b(iPad|iPhone|iPod)\b/.test(D)||D.match("Safari")&&!D.match("Chrome")))}return V}function U(M){try{var D=r[M];return D.setItem("_mapbox_test_",1),D.removeItem("_mapbox_test_"),!0}catch{return!1}}var Z,N,G,W,ae=r.performance&&r.performance.now?r.performance.now.bind(r.performance):Date.now.bind(Date),re=r.requestAnimationFrame||r.mozRequestAnimationFrame||r.webkitRequestAnimationFrame||r.msRequestAnimationFrame,ne=r.cancelAnimationFrame||r.mozCancelAnimationFrame||r.webkitCancelAnimationFrame||r.msCancelAnimationFrame,Q={now:ae,frame:function(M){var D=re(M);return{cancel:function(){return ne(D)}}},getImageData:function(M,D){void 0===D&&(D=0);var K=r.document.createElement("canvas"),de=K.getContext("2d");if(!de)throw new Error("failed to create canvas 2d context");return K.width=M.width,K.height=M.height,de.drawImage(M,0,0,M.width,M.height),de.getImageData(-D,-D,M.width+2*D,M.height+2*D)},resolveURL:function(M){return Z||(Z=r.document.createElement("a")),Z.href=M,Z.href},hardwareConcurrency:r.navigator&&r.navigator.hardwareConcurrency||4,get devicePixelRatio(){return r.devicePixelRatio},get prefersReducedMotion(){return!!r.matchMedia&&(null==N&&(N=r.matchMedia("(prefers-reduced-motion: reduce)")),N.matches)}},$={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},X={supported:!1,testSupport:function(M){!oe&&W&&(fe?ue(M):G=M)}},oe=!1,fe=!1;function ue(M){var D=M.createTexture();M.bindTexture(M.TEXTURE_2D,D);try{if(M.texImage2D(M.TEXTURE_2D,0,M.RGBA,M.RGBA,M.UNSIGNED_BYTE,W),M.isContextLost())return;X.supported=!0}catch{}M.deleteTexture(D),oe=!0}r.document&&((W=r.document.createElement("img")).onload=function(){G&&ue(G),G=null,fe=!0},W.onerror=function(){oe=!0,G=null},W.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var ge="01",we=function(M,D){this._transformRequestFn=M,this._customAccessToken=D,this._createSkuToken()};function Te(M){return 0===M.indexOf("mapbox:")}we.prototype._createSkuToken=function(){var M=function(){for(var D="",K=0;K<10;K++)D+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ge,D].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=M.token,this._skuTokenExpiresAt=M.tokenExpiresAt},we.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},we.prototype.transformRequest=function(M,D){return this._transformRequestFn&&this._transformRequestFn(M,D)||{url:M}},we.prototype.normalizeStyleURL=function(M,D){if(!Te(M))return M;var K=Ie(M);return K.path="/styles/v1"+K.path,this._makeAPIURL(K,this._customAccessToken||D)},we.prototype.normalizeGlyphsURL=function(M,D){if(!Te(M))return M;var K=Ie(M);return K.path="/fonts/v1"+K.path,this._makeAPIURL(K,this._customAccessToken||D)},we.prototype.normalizeSourceURL=function(M,D){if(!Te(M))return M;var K=Ie(M);return K.path="/v4/"+K.authority+".json",K.params.push("secure"),this._makeAPIURL(K,this._customAccessToken||D)},we.prototype.normalizeSpriteURL=function(M,D,K,de){var Ee=Ie(M);return Te(M)?(Ee.path="/styles/v1"+Ee.path+"/sprite"+D+K,this._makeAPIURL(Ee,this._customAccessToken||de)):(Ee.path+=""+D+K,De(Ee))},we.prototype.normalizeTileURL=function(M,D){if(this._isSkuTokenExpired()&&this._createSkuToken(),M&&!Te(M))return M;var K=Ie(M);K.path=K.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Q.devicePixelRatio>=2||512===D?"@2x":"")+(X.supported?".webp":"$1")),K.path=K.path.replace(/^.+\/v4\//,"/"),K.path="/v4"+K.path;var Be=this._customAccessToken||function(Ye){for(var at=0,mt=Ye;at<mt.length;at+=1){var Et=mt[at].match(/^access_token=(.*)$/);if(Et)return Et[1]}return null}(K.params)||$.ACCESS_TOKEN;return $.REQUIRE_ACCESS_TOKEN&&Be&&this._skuToken&&K.params.push("sku="+this._skuToken),this._makeAPIURL(K,Be)},we.prototype.canonicalizeTileURL=function(M,D){var K=Ie(M);if(!K.path.match(/(^\/v4\/)/)||!K.path.match(/\.[\w]+$/))return M;var de="mapbox://tiles/";de+=K.path.replace("/v4/","");var Ee=K.params;return D&&(Ee=Ee.filter(function(Be){return!Be.match(/^access_token=/)})),Ee.length&&(de+="?"+Ee.join("&")),de},we.prototype.canonicalizeTileset=function(M,D){for(var K=!!D&&Te(D),de=[],Ee=0,Be=M.tiles||[];Ee<Be.length;Ee+=1){var Ye=Be[Ee];ye(Ye)?de.push(this.canonicalizeTileURL(Ye,K)):de.push(Ye)}return de},we.prototype._makeAPIURL=function(M,D){var K="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",de=Ie($.API_URL);if(M.protocol=de.protocol,M.authority=de.authority,"http"===M.protocol){var Ee=M.params.indexOf("secure");Ee>=0&&M.params.splice(Ee,1)}if("/"!==de.path&&(M.path=""+de.path+M.path),!$.REQUIRE_ACCESS_TOKEN)return De(M);if(!(D=D||$.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+K);if("s"===D[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+K);return M.params=M.params.filter(function(Be){return-1===Be.indexOf("access_token")}),M.params.push("access_token="+D),De(M)};var xe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function ye(M){return xe.test(M)}var _e=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ie(M){var D=M.match(_e);if(!D)throw new Error("Unable to parse URL object");return{protocol:D[1],authority:D[2],path:D[3]||"/",params:D[4]?D[4].split("&"):[]}}function De(M){var D=M.params.length?"?"+M.params.join("&"):"";return M.protocol+"://"+M.authority+M.path+D}var be="mapbox.eventData";function he(M){if(!M)return null;var K=M.split(".");if(!K||3!==K.length)return null;try{return JSON.parse(decodeURIComponent(r.atob(K[1]).split("").map(function(de){return"%"+("00"+de.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var ce=function(M){this.type=M,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};ce.prototype.getStorageKey=function(M){var D,de=he($.ACCESS_TOKEN);return D=de&&de.u?r.btoa(encodeURIComponent(de.u).replace(/%([0-9A-F]{2})/g,function(Ee,Be){return String.fromCharCode(+("0x"+Be))})):$.ACCESS_TOKEN||"",M?be+"."+M+":"+D:be+":"+D},ce.prototype.fetchEventData=function(){var M=U("localStorage"),D=this.getStorageKey(),K=this.getStorageKey("uuid");if(M)try{var de=r.localStorage.getItem(D);de&&(this.eventData=JSON.parse(de));var Ee=r.localStorage.getItem(K);Ee&&(this.anonId=Ee)}catch{E("Unable to read from LocalStorage")}},ce.prototype.saveEventData=function(){var M=U("localStorage"),D=this.getStorageKey(),K=this.getStorageKey("uuid");if(M)try{r.localStorage.setItem(K,this.anonId),Object.keys(this.eventData).length>=1&&r.localStorage.setItem(D,JSON.stringify(this.eventData))}catch{E("Unable to write to LocalStorage")}},ce.prototype.processRequests=function(M){},ce.prototype.postEvent=function(M,D,K,de){var Ee=this;if($.EVENTS_URL){var Be=Ie($.EVENTS_URL);Be.params.push("access_token="+(de||$.ACCESS_TOKEN||""));var Ye={event:this.type,created:new Date(M).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:b,skuId:ge,userId:this.anonId},at=D?u(Ye,D):Ye,mt={url:De(Be),headers:{"Content-Type":"text/plain"},body:JSON.stringify([at])};this.pendingRequest=zt(mt,function(Et){Ee.pendingRequest=null,K(Et),Ee.saveEventData(),Ee.processRequests(de)})}},ce.prototype.queueRequest=function(M,D){this.queue.push(M),this.processRequests(D)};var me,Pe,Ae=function(M){function D(){M.call(this,"map.load"),this.success={},this.skuToken=""}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype.postMapLoadEvent=function(K,de,Ee,Be){this.skuToken=Ee,($.EVENTS_URL&&Be||$.ACCESS_TOKEN&&Array.isArray(K)&&K.some(function(Ye){return Te(Ye)||ye(Ye)}))&&this.queueRequest({id:de,timestamp:Date.now()},Be)},D.prototype.processRequests=function(K){var de=this;if(!this.pendingRequest&&0!==this.queue.length){var Ee=this.queue.shift(),Be=Ee.id,Ye=Ee.timestamp;Be&&this.success[Be]||(this.anonId||this.fetchEventData(),g(this.anonId)||(this.anonId=m()),this.postEvent(Ye,{skuToken:this.skuToken},function(at){at||Be&&(de.success[Be]=!0)},K))}},D}(ce),Ce=function(M){function D(K){M.call(this,"appUserTurnstile"),this._customAccessToken=K}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype.postTurnstileEvent=function(K,de){$.EVENTS_URL&&$.ACCESS_TOKEN&&Array.isArray(K)&&K.some(function(Ee){return Te(Ee)||ye(Ee)})&&this.queueRequest(Date.now(),de)},D.prototype.processRequests=function(K){var de=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var Ee=he($.ACCESS_TOKEN),Be=Ee?Ee.u:$.ACCESS_TOKEN,Ye=Be!==this.eventData.tokenU;g(this.anonId)||(this.anonId=m(),Ye=!0);var at=this.queue.shift();if(this.eventData.lastSuccess){var mt=new Date(this.eventData.lastSuccess),Et=new Date(at),Lt=(at-this.eventData.lastSuccess)/864e5;Ye=Ye||Lt>=1||Lt<-1||mt.getDate()!==Et.getDate()}else Ye=!0;if(!Ye)return this.processRequests();this.postEvent(at,{"enabled.telemetry":!1},function(Wt){Wt||(de.eventData.lastSuccess=at,de.eventData.tokenU=Be)},K)}},D}(ce),Oe=new Ce,Ne=Oe.postTurnstileEvent.bind(Oe),je=new Ae,ve=je.postMapLoadEvent.bind(je),Me="mapbox-tiles",Le=500,Ue=50,ze=42e4;function qe(){r.caches&&!me&&(me=r.caches.open(Me))}function it(M){var D=M.indexOf("?");return D<0?M:M.slice(0,D)}var dt,kt=1/0;function St(){return null==dt&&(dt=r.OffscreenCanvas&&new r.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof r.createImageBitmap),dt}var Tt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Tt);var lt=function(M){function D(K,de,Ee){401===de&&ye(Ee)&&(K+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),M.call(this,K),this.status=de,this.url=Ee,this.name=this.constructor.name,this.message=K}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},D}(Error),ot=O()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===r.location.protocol?r.parent:r).location.href};function Rt(M,D){var K,de=new r.AbortController,Ee=new r.Request(M.url,{method:M.method||"GET",body:M.body,credentials:M.credentials,headers:M.headers,referrer:ot(),signal:de.signal}),Be=!1,Ye=!1,at=(K=Ee.url).indexOf("sku=")>0&&ye(K);"json"===M.type&&Ee.headers.set("Accept","application/json");var mt=function(Lt,Wt,en){if(!Ye){if(Lt&&"SecurityError"!==Lt.message&&E(Lt),Wt&&en)return Et(Wt);var Xt=Date.now();r.fetch(Ee).then(function(vn){if(vn.ok){var bn=at?vn.clone():null;return Et(vn,bn,Xt)}return D(new lt(vn.statusText,vn.status,M.url))}).catch(function(vn){20!==vn.code&&D(new Error(vn.message))})}},Et=function(Lt,Wt,en){("arrayBuffer"===M.type?Lt.arrayBuffer():"json"===M.type?Lt.json():Lt.text()).then(function(Xt){Ye||(Wt&&en&&function Ke(M,D,K){if(qe(),me){var de={status:D.status,statusText:D.statusText,headers:new r.Headers};D.headers.forEach(function(Be,Ye){return de.headers.set(Ye,Be)});var Ee=z(D.headers.get("Cache-Control")||"");Ee["no-store"]||(Ee["max-age"]&&de.headers.set("Expires",new Date(K+1e3*Ee["max-age"]).toUTCString()),new Date(de.headers.get("Expires")).getTime()-K<ze||function(Be,Ye){if(void 0===Pe)try{new Response(new ReadableStream),Pe=!0}catch{Pe=!1}Pe?Ye(Be.body):Be.blob().then(Ye)}(D,function(Be){var Ye=new r.Response(Be,de);qe(),me&&me.then(function(at){return at.put(it(M.url),Ye)}).catch(function(at){return E(at.message)})}))}}(Ee,Wt,en),Be=!0,D(null,Xt,Lt.headers.get("Cache-Control"),Lt.headers.get("Expires")))}).catch(function(Xt){Ye||D(new Error(Xt.message))})};return at?function ft(M,D){if(qe(),!me)return D(null);var K=it(M.url);me.then(function(de){de.match(K).then(function(Ee){var Be=function(Ye){if(!Ye)return!1;var at=new Date(Ye.headers.get("Expires")||0),mt=z(Ye.headers.get("Cache-Control")||"");return at>Date.now()&&!mt["no-cache"]}(Ee);de.delete(K),Be&&de.put(K,Ee.clone()),D(null,Ee,Be)}).catch(D)}).catch(D)}(Ee,mt):mt(null,null),{cancel:function(){Ye=!0,Be||de.abort()}}}var Qe,nt,Vt=function(M,D){if(!(/^file:/.test(K=M.url)||/^file:/.test(ot())&&!/^\w+:/.test(K))){if(r.fetch&&r.Request&&r.AbortController&&r.Request.prototype.hasOwnProperty("signal"))return Rt(M,D);if(O()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",M,D,void 0,!0)}var K;return function(de,Ee){var Be=new r.XMLHttpRequest;for(var Ye in Be.open(de.method||"GET",de.url,!0),"arrayBuffer"===de.type&&(Be.responseType="arraybuffer"),de.headers)Be.setRequestHeader(Ye,de.headers[Ye]);return"json"===de.type&&(Be.responseType="text",Be.setRequestHeader("Accept","application/json")),Be.withCredentials="include"===de.credentials,Be.onerror=function(){Ee(new Error(Be.statusText))},Be.onload=function(){if((Be.status>=200&&Be.status<300||0===Be.status)&&null!==Be.response){var at=Be.response;if("json"===de.type)try{at=JSON.parse(Be.response)}catch(mt){return Ee(mt)}Ee(null,at,Be.getResponseHeader("Cache-Control"),Be.getResponseHeader("Expires"))}else Ee(new lt(Be.statusText,Be.status,de.url))},Be.send(de.body),{cancel:function(){return Be.abort()}}}(M,D)},Ht=function(M,D){return Vt(u(M,{type:"arrayBuffer"}),D)},zt=function(M,D){return Vt(u(M,{method:"POST"}),D)},We="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Qe=[],nt=0;var et=function(M,D){if(X.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),nt>=$.MAX_PARALLEL_IMAGE_REQUESTS){var K={requestParameters:M,callback:D,cancelled:!1,cancel:function(){this.cancelled=!0}};return Qe.push(K),K}nt++;var de=!1,Ee=function(){if(!de)for(de=!0,nt--;Qe.length&&nt<$.MAX_PARALLEL_IMAGE_REQUESTS;){var Ye=Qe.shift();Ye.cancelled||(Ye.cancel=et(Ye.requestParameters,Ye.callback).cancel)}},Be=Ht(M,function(Ye,at,mt,Et){var Wt,en;Ee(),Ye?D(Ye):at&&(St()?(Wt=D,en=new r.Blob([new Uint8Array(at)],{type:"image/png"}),r.createImageBitmap(en).then(function(Xt){Wt(null,Xt)}).catch(function(Xt){Wt(new Error("Could not load image because of "+Xt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(Lt,Wt,en,Xt){var vn=new r.Image,bn=r.URL;vn.onload=function(){Wt(null,vn),bn.revokeObjectURL(vn.src),vn.onload=null,r.requestAnimationFrame(function(){vn.src=We})},vn.onerror=function(){return Wt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var zn=new r.Blob([new Uint8Array(Lt)],{type:"image/png"});vn.cacheControl=en,vn.expires=Xt,vn.src=Lt.byteLength?bn.createObjectURL(zn):We}(at,D,mt,Et))});return{cancel:function(){Be.cancel(),Ee()}}};function gt(M,D,K){K[M]&&-1!==K[M].indexOf(D)||(K[M]=K[M]||[],K[M].push(D))}function ht(M,D,K){if(K&&K[M]){var de=K[M].indexOf(D);-1!==de&&K[M].splice(de,1)}}var Ge=function(M,D){void 0===D&&(D={}),u(this,D),this.type=M},He=function(M){function D(K,de){void 0===de&&(de={}),M.call(this,"error",u({error:K},de))}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D}(Ge),ut=function(){};ut.prototype.on=function(M,D){return this._listeners=this._listeners||{},gt(M,D,this._listeners),this},ut.prototype.off=function(M,D){return ht(M,D,this._listeners),ht(M,D,this._oneTimeListeners),this},ut.prototype.once=function(M,D){return this._oneTimeListeners=this._oneTimeListeners||{},gt(M,D,this._oneTimeListeners),this},ut.prototype.fire=function(M,D){"string"==typeof M&&(M=new Ge(M,D||{}));var K=M.type;if(this.listens(K)){M.target=this;for(var de=0,Ee=this._listeners&&this._listeners[K]?this._listeners[K].slice():[];de<Ee.length;de+=1)Ee[de].call(this,M);for(var Be=0,Ye=this._oneTimeListeners&&this._oneTimeListeners[K]?this._oneTimeListeners[K].slice():[];Be<Ye.length;Be+=1){var at=Ye[Be];ht(K,at,this._oneTimeListeners),at.call(this,M)}var mt=this._eventedParent;mt&&(u(M,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),mt.fire(M))}else M instanceof He&&console.error(M.error);return this},ut.prototype.listens=function(M){return this._listeners&&this._listeners[M]&&this._listeners[M].length>0||this._oneTimeListeners&&this._oneTimeListeners[M]&&this._oneTimeListeners[M].length>0||this._eventedParent&&this._eventedParent.listens(M)},ut.prototype.setEventedParent=function(M,D){return this._eventedParent=M,this._eventedParentData=D,this};var tt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},xt=function(M,D,K,de){this.message=(M?M+": ":"")+K,de&&(this.identifier=de),null!=D&&D.__line__&&(this.line=D.__line__)};function At(M){var K=M.value;return K?[new xt(M.key,K,"constants have been deprecated as of v8")]:[]}function Mt(M){for(var D=[],K=arguments.length-1;K-- >0;)D[K]=arguments[K+1];for(var de=0,Ee=D;de<Ee.length;de+=1){var Be=Ee[de];for(var Ye in Be)M[Ye]=Be[Ye]}return M}function yt(M){return M instanceof Number||M instanceof String||M instanceof Boolean?M.valueOf():M}function Pt(M){if(Array.isArray(M))return M.map(Pt);if(M instanceof Object&&!(M instanceof Number||M instanceof String||M instanceof Boolean)){var D={};for(var K in M)D[K]=Pt(M[K]);return D}return yt(M)}var Ct=function(M){function D(K,de){M.call(this,de),this.message=de,this.key=K}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D}(Error),Dt=function(M,D){void 0===D&&(D=[]),this.parent=M,this.bindings={};for(var K=0,de=D;K<de.length;K+=1){var Ee=de[K];this.bindings[Ee[0]]=Ee[1]}};Dt.prototype.concat=function(M){return new Dt(this,M)},Dt.prototype.get=function(M){if(this.bindings[M])return this.bindings[M];if(this.parent)return this.parent.get(M);throw new Error(M+" not found in scope.")},Dt.prototype.has=function(M){return!!this.bindings[M]||!!this.parent&&this.parent.has(M)};var Ut={kind:"null"},Bt={kind:"number"},qt={kind:"string"},an={kind:"boolean"},mn={kind:"color"},Qt={kind:"object"},sn={kind:"value"},Kt={kind:"collator"},qn={kind:"formatted"},Fn={kind:"resolvedImage"};function Sn(M,D){return{kind:"array",itemType:M,N:D}}function hn(M){if("array"===M.kind){var D=hn(M.itemType);return"number"==typeof M.N?"array<"+D+", "+M.N+">":"value"===M.itemType.kind?"array":"array<"+D+">"}return M.kind}var wn=[Ut,Bt,qt,an,mn,qn,Qt,Sn(sn),Fn];function pn(M,D){if("error"===D.kind)return null;if("array"===M.kind){if("array"===D.kind&&(0===D.N&&"value"===D.itemType.kind||!pn(M.itemType,D.itemType))&&("number"!=typeof M.N||M.N===D.N))return null}else{if(M.kind===D.kind)return null;if("value"===M.kind)for(var K=0,de=wn;K<de.length;K+=1)if(!pn(de[K],D))return null}return"Expected "+hn(M)+" but found "+hn(D)+" instead."}function An(M,D){return D.some(function(K){return K.kind===M.kind})}function On(M,D){return D.some(function(K){return"null"===K?null===M:"array"===K?Array.isArray(M):"object"===K?M&&!Array.isArray(M)&&"object"==typeof M:K===typeof M})}var Vn=T(function(M,D){var K={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function de(mt){return(mt=Math.round(mt))<0?0:mt>255?255:mt}function Be(mt){return de("%"===mt[mt.length-1]?parseFloat(mt)/100*255:parseInt(mt))}function Ye(mt){return function Ee(mt){return mt<0?0:mt>1?1:mt}("%"===mt[mt.length-1]?parseFloat(mt)/100:parseFloat(mt))}function at(mt,Et,Lt){return Lt<0?Lt+=1:Lt>1&&(Lt-=1),6*Lt<1?mt+(Et-mt)*Lt*6:2*Lt<1?Et:3*Lt<2?mt+(Et-mt)*(2/3-Lt)*6:mt}try{D.parseCSSColor=function(mt){var Et,Lt=mt.replace(/ /g,"").toLowerCase();if(Lt in K)return K[Lt].slice();if("#"===Lt[0])return 4===Lt.length?(Et=parseInt(Lt.substr(1),16))>=0&&Et<=4095?[(3840&Et)>>4|(3840&Et)>>8,240&Et|(240&Et)>>4,15&Et|(15&Et)<<4,1]:null:7===Lt.length&&(Et=parseInt(Lt.substr(1),16))>=0&&Et<=16777215?[(16711680&Et)>>16,(65280&Et)>>8,255&Et,1]:null;var Wt=Lt.indexOf("("),en=Lt.indexOf(")");if(-1!==Wt&&en+1===Lt.length){var Xt=Lt.substr(0,Wt),vn=Lt.substr(Wt+1,en-(Wt+1)).split(","),bn=1;switch(Xt){case"rgba":if(4!==vn.length)return null;bn=Ye(vn.pop());case"rgb":return 3!==vn.length?null:[Be(vn[0]),Be(vn[1]),Be(vn[2]),bn];case"hsla":if(4!==vn.length)return null;bn=Ye(vn.pop());case"hsl":if(3!==vn.length)return null;var zn=(parseFloat(vn[0])%360+360)%360/360,Rn=Ye(vn[1]),Jn=Ye(vn[2]),nr=Jn<=.5?Jn*(Rn+1):Jn+Rn-Jn*Rn,cr=2*Jn-nr;return[de(255*at(cr,nr,zn+1/3)),de(255*at(cr,nr,zn)),de(255*at(cr,nr,zn-1/3)),bn];default:return null}}return null}}catch{}}).parseCSSColor,Gn=function(M,D,K,de){void 0===de&&(de=1),this.r=M,this.g=D,this.b=K,this.a=de};Gn.parse=function(M){if(M){if(M instanceof Gn)return M;if("string"==typeof M){var D=Vn(M);if(D)return new Gn(D[0]/255*D[3],D[1]/255*D[3],D[2]/255*D[3],D[3])}}},Gn.prototype.toString=function(){var M=this.toArray(),K=M[1],de=M[2],Ee=M[3];return"rgba("+Math.round(M[0])+","+Math.round(K)+","+Math.round(de)+","+Ee+")"},Gn.prototype.toArray=function(){var M=this,Ee=M.a;return 0===Ee?[0,0,0,0]:[255*M.r/Ee,255*M.g/Ee,255*M.b/Ee,Ee]},Gn.black=new Gn(0,0,0,1),Gn.white=new Gn(1,1,1,1),Gn.transparent=new Gn(0,0,0,0),Gn.red=new Gn(1,0,0,1);var Nn=function(M,D,K){this.sensitivity=M?D?"variant":"case":D?"accent":"base",this.locale=K,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Nn.prototype.compare=function(M,D){return this.collator.compare(M,D)},Nn.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var ir=function(M,D,K,de,Ee){this.text=M,this.image=D,this.scale=K,this.fontStack=de,this.textColor=Ee},$n=function(M){this.sections=M};$n.fromString=function(M){return new $n([new ir(M,null,null,null,null)])},$n.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(M){return 0!==M.text.length||M.image&&0!==M.image.name.length})},$n.factory=function(M){return M instanceof $n?M:$n.fromString(M)},$n.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(M){return M.text}).join("")},$n.prototype.serialize=function(){for(var M=["format"],D=0,K=this.sections;D<K.length;D+=1){var de=K[D];if(de.image)M.push(["image",de.image.name]);else{M.push(de.text);var Ee={};de.fontStack&&(Ee["text-font"]=["literal",de.fontStack.split(",")]),de.scale&&(Ee["font-scale"]=de.scale),de.textColor&&(Ee["text-color"]=["rgba"].concat(de.textColor.toArray())),M.push(Ee)}}return M};var mr=function(M){this.name=M.name,this.available=M.available};function lr(M,D,K,de){return"number"==typeof M&&M>=0&&M<=255&&"number"==typeof D&&D>=0&&D<=255&&"number"==typeof K&&K>=0&&K<=255?void 0===de||"number"==typeof de&&de>=0&&de<=1?null:"Invalid rgba value ["+[M,D,K,de].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof de?[M,D,K,de]:[M,D,K]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function vr(M){if(null===M||"string"==typeof M||"boolean"==typeof M||"number"==typeof M||M instanceof Gn||M instanceof Nn||M instanceof $n||M instanceof mr)return!0;if(Array.isArray(M)){for(var D=0,K=M;D<K.length;D+=1)if(!vr(K[D]))return!1;return!0}if("object"==typeof M){for(var de in M)if(!vr(M[de]))return!1;return!0}return!1}function or(M){if(null===M)return Ut;if("string"==typeof M)return qt;if("boolean"==typeof M)return an;if("number"==typeof M)return Bt;if(M instanceof Gn)return mn;if(M instanceof Nn)return Kt;if(M instanceof $n)return qn;if(M instanceof mr)return Fn;if(Array.isArray(M)){for(var D,K=M.length,de=0,Ee=M;de<Ee.length;de+=1){var Be=or(Ee[de]);if(D){if(D===Be)continue;D=sn;break}D=Be}return Sn(D||sn,K)}return Qt}function Or(M){var D=typeof M;return null===M?"":"string"===D||"number"===D||"boolean"===D?String(M):M instanceof Gn||M instanceof $n||M instanceof mr?M.toString():JSON.stringify(M)}mr.prototype.toString=function(){return this.name},mr.fromString=function(M){return M?new mr({name:M,available:!1}):null},mr.prototype.serialize=function(){return["image",this.name]};var fn=function(M,D){this.type=M,this.value=D};fn.parse=function(M,D){if(2!==M.length)return D.error("'literal' expression requires exactly one argument, but found "+(M.length-1)+" instead.");if(!vr(M[1]))return D.error("invalid value");var K=M[1],de=or(K),Ee=D.expectedType;return"array"!==de.kind||0!==de.N||!Ee||"array"!==Ee.kind||"number"==typeof Ee.N&&0!==Ee.N||(de=Ee),new fn(de,K)},fn.prototype.evaluate=function(){return this.value},fn.prototype.eachChild=function(){},fn.prototype.outputDefined=function(){return!0},fn.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Gn?["rgba"].concat(this.value.toArray()):this.value instanceof $n?this.value.serialize():this.value};var gn=function(M){this.name="ExpressionEvaluationError",this.message=M};gn.prototype.toJSON=function(){return this.message};var Hn={string:qt,number:Bt,boolean:an,object:Qt},En=function(M,D){this.type=M,this.args=D};En.parse=function(M,D){if(M.length<2)return D.error("Expected at least one argument.");var K,de=1,Ee=M[0];if("array"===Ee){var Be,Ye;if(M.length>2){var at=M[1];if("string"!=typeof at||!(at in Hn)||"object"===at)return D.error('The item type argument of "array" must be one of string, number, boolean',1);Be=Hn[at],de++}else Be=sn;if(M.length>3){if(null!==M[2]&&("number"!=typeof M[2]||M[2]<0||M[2]!==Math.floor(M[2])))return D.error('The length argument to "array" must be a positive integer literal',2);Ye=M[2],de++}K=Sn(Be,Ye)}else K=Hn[Ee];for(var mt=[];de<M.length;de++){var Et=D.parse(M[de],de,sn);if(!Et)return null;mt.push(Et)}return new En(K,mt)},En.prototype.evaluate=function(M){for(var D=0;D<this.args.length;D++){var K=this.args[D].evaluate(M);if(!pn(this.type,or(K)))return K;if(D===this.args.length-1)throw new gn("Expected value to be of type "+hn(this.type)+", but found "+hn(or(K))+" instead.")}return null},En.prototype.eachChild=function(M){this.args.forEach(M)},En.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},En.prototype.serialize=function(){var M=this.type,D=[M.kind];if("array"===M.kind){var K=M.itemType;if("string"===K.kind||"number"===K.kind||"boolean"===K.kind){D.push(K.kind);var de=M.N;("number"==typeof de||this.args.length>1)&&D.push(de)}}return D.concat(this.args.map(function(Ee){return Ee.serialize()}))};var Zn=function(M){this.type=qn,this.sections=M};Zn.parse=function(M,D){if(M.length<2)return D.error("Expected at least one argument.");var K=M[1];if(!Array.isArray(K)&&"object"==typeof K)return D.error("First argument must be an image or text section.");for(var de=[],Ee=!1,Be=1;Be<=M.length-1;++Be){var Ye=M[Be];if(Ee&&"object"==typeof Ye&&!Array.isArray(Ye)){Ee=!1;var at=null;if(Ye["font-scale"]&&!(at=D.parse(Ye["font-scale"],1,Bt)))return null;var mt=null;if(Ye["text-font"]&&!(mt=D.parse(Ye["text-font"],1,Sn(qt))))return null;var Et=null;if(Ye["text-color"]&&!(Et=D.parse(Ye["text-color"],1,mn)))return null;var Lt=de[de.length-1];Lt.scale=at,Lt.font=mt,Lt.textColor=Et}else{var Wt=D.parse(M[Be],1,sn);if(!Wt)return null;var en=Wt.type.kind;if("string"!==en&&"value"!==en&&"null"!==en&&"resolvedImage"!==en)return D.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");Ee=!0,de.push({content:Wt,scale:null,font:null,textColor:null})}}return new Zn(de)},Zn.prototype.evaluate=function(M){return new $n(this.sections.map(function(D){var K=D.content.evaluate(M);return or(K)===Fn?new ir("",K,null,null,null):new ir(Or(K),null,D.scale?D.scale.evaluate(M):null,D.font?D.font.evaluate(M).join(","):null,D.textColor?D.textColor.evaluate(M):null)}))},Zn.prototype.eachChild=function(M){for(var D=0,K=this.sections;D<K.length;D+=1){var de=K[D];M(de.content),de.scale&&M(de.scale),de.font&&M(de.font),de.textColor&&M(de.textColor)}},Zn.prototype.outputDefined=function(){return!1},Zn.prototype.serialize=function(){for(var M=["format"],D=0,K=this.sections;D<K.length;D+=1){var de=K[D];M.push(de.content.serialize());var Ee={};de.scale&&(Ee["font-scale"]=de.scale.serialize()),de.font&&(Ee["text-font"]=de.font.serialize()),de.textColor&&(Ee["text-color"]=de.textColor.serialize()),M.push(Ee)}return M};var Kn=function(M){this.type=Fn,this.input=M};Kn.parse=function(M,D){if(2!==M.length)return D.error("Expected two arguments.");var K=D.parse(M[1],1,qt);return K?new Kn(K):D.error("No image name provided.")},Kn.prototype.evaluate=function(M){var D=this.input.evaluate(M),K=mr.fromString(D);return K&&M.availableImages&&(K.available=M.availableImages.indexOf(D)>-1),K},Kn.prototype.eachChild=function(M){M(this.input)},Kn.prototype.outputDefined=function(){return!1},Kn.prototype.serialize=function(){return["image",this.input.serialize()]};var tr={"to-boolean":an,"to-color":mn,"to-number":Bt,"to-string":qt},fr=function(M,D){this.type=M,this.args=D};fr.parse=function(M,D){if(M.length<2)return D.error("Expected at least one argument.");var K=M[0];if(("to-boolean"===K||"to-string"===K)&&2!==M.length)return D.error("Expected one argument.");for(var de=tr[K],Ee=[],Be=1;Be<M.length;Be++){var Ye=D.parse(M[Be],Be,sn);if(!Ye)return null;Ee.push(Ye)}return new fr(de,Ee)},fr.prototype.evaluate=function(M){if("boolean"===this.type.kind)return!!this.args[0].evaluate(M);if("color"===this.type.kind){for(var D,K,de=0,Ee=this.args;de<Ee.length;de+=1){if(K=null,(D=Ee[de].evaluate(M))instanceof Gn)return D;if("string"==typeof D){var Be=M.parseColor(D);if(Be)return Be}else if(Array.isArray(D)&&!(K=D.length<3||D.length>4?"Invalid rbga value "+JSON.stringify(D)+": expected an array containing either three or four numeric values.":lr(D[0],D[1],D[2],D[3])))return new Gn(D[0]/255,D[1]/255,D[2]/255,D[3])}throw new gn(K||"Could not parse color from value '"+("string"==typeof D?D:String(JSON.stringify(D)))+"'")}if("number"===this.type.kind){for(var Ye=null,at=0,mt=this.args;at<mt.length;at+=1){if(null===(Ye=mt[at].evaluate(M)))return 0;var Et=Number(Ye);if(!isNaN(Et))return Et}throw new gn("Could not convert "+JSON.stringify(Ye)+" to number.")}return"formatted"===this.type.kind?$n.fromString(Or(this.args[0].evaluate(M))):"resolvedImage"===this.type.kind?mr.fromString(Or(this.args[0].evaluate(M))):Or(this.args[0].evaluate(M))},fr.prototype.eachChild=function(M){this.args.forEach(M)},fr.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},fr.prototype.serialize=function(){if("formatted"===this.type.kind)return new Zn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Kn(this.args[0]).serialize();var M=["to-"+this.type.kind];return this.eachChild(function(D){M.push(D.serialize())}),M};var Dr=["Unknown","Point","LineString","Polygon"],cn=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};cn.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},cn.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Dr[this.feature.type]:this.feature.type:null},cn.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},cn.prototype.canonicalID=function(){return this.canonical},cn.prototype.properties=function(){return this.feature&&this.feature.properties||{}},cn.prototype.parseColor=function(M){var D=this._parseColorCache[M];return D||(D=this._parseColorCache[M]=Gn.parse(M)),D};var In=function(M,D,K,de){this.name=M,this.type=D,this._evaluate=K,this.args=de};In.prototype.evaluate=function(M){return this._evaluate(M,this.args)},In.prototype.eachChild=function(M){this.args.forEach(M)},In.prototype.outputDefined=function(){return!1},In.prototype.serialize=function(){return[this.name].concat(this.args.map(function(M){return M.serialize()}))},In.parse=function(M,D){var K,de=M[0],Ee=In.definitions[de];if(!Ee)return D.error('Unknown expression "'+de+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Be=Array.isArray(Ee)?Ee[0]:Ee.type,Ye=Array.isArray(Ee)?[[Ee[1],Ee[2]]]:Ee.overloads,at=Ye.filter(function(hi){var ri=hi[0];return!Array.isArray(ri)||ri.length===M.length-1}),mt=null,Et=0,Lt=at;Et<Lt.length;Et+=1){var Wt=Lt[Et],en=Wt[0],Xt=Wt[1];mt=new zr(D.registry,D.path,null,D.scope);for(var vn=[],bn=!1,zn=1;zn<M.length;zn++){var Rn=M[zn],Jn=Array.isArray(en)?en[zn-1]:en.type,nr=mt.parse(Rn,1+vn.length,Jn);if(!nr){bn=!0;break}vn.push(nr)}if(!bn)if(Array.isArray(en)&&en.length!==vn.length)mt.error("Expected "+en.length+" arguments, but found "+vn.length+" instead.");else{for(var cr=0;cr<vn.length;cr++){var dr=Array.isArray(en)?en[cr]:en.type,wr=vn[cr];mt.concat(cr+1).checkSubtype(dr,wr.type)}if(0===mt.errors.length)return new In(de,Be,Xt,vn)}}if(1===at.length)(K=D.errors).push.apply(K,mt.errors);else{for(var jr=(at.length?at:Ye).map(function(hi){return ri=hi[0],Array.isArray(ri)?"("+ri.map(hn).join(", ")+")":"("+hn(ri.type)+"...)";var ri}).join(" | "),Rr=[],Vr=1;Vr<M.length;Vr++){var Wr=D.parse(M[Vr],1+Rr.length);if(!Wr)return null;Rr.push(hn(Wr.type))}D.error("Expected arguments of type "+jr+", but found ("+Rr.join(", ")+") instead.")}return null},In.register=function(M,D){for(var K in In.definitions=D,D)M[K]=In};var Nt=function(M,D,K){this.type=Kt,this.locale=K,this.caseSensitive=M,this.diacriticSensitive=D};Nt.parse=function(M,D){if(2!==M.length)return D.error("Expected one argument.");var K=M[1];if("object"!=typeof K||Array.isArray(K))return D.error("Collator options argument must be an object.");var de=D.parse(void 0!==K["case-sensitive"]&&K["case-sensitive"],1,an);if(!de)return null;var Ee=D.parse(void 0!==K["diacritic-sensitive"]&&K["diacritic-sensitive"],1,an);if(!Ee)return null;var Be=null;return K.locale&&!(Be=D.parse(K.locale,1,qt))?null:new Nt(de,Ee,Be)},Nt.prototype.evaluate=function(M){return new Nn(this.caseSensitive.evaluate(M),this.diacriticSensitive.evaluate(M),this.locale?this.locale.evaluate(M):null)},Nt.prototype.eachChild=function(M){M(this.caseSensitive),M(this.diacriticSensitive),this.locale&&M(this.locale)},Nt.prototype.outputDefined=function(){return!1},Nt.prototype.serialize=function(){var M={};return M["case-sensitive"]=this.caseSensitive.serialize(),M["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(M.locale=this.locale.serialize()),["collator",M]};var Zt=8192;function un(M,D){M[0]=Math.min(M[0],D[0]),M[1]=Math.min(M[1],D[1]),M[2]=Math.max(M[2],D[0]),M[3]=Math.max(M[3],D[1])}function Tn(M,D){return!(M[0]<=D[0]||M[2]>=D[2]||M[1]<=D[1]||M[3]>=D[3])}function kn(M,D){var de=(180+M[0])/360,Ee=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+M[1]*Math.PI/360)))/360,Be=Math.pow(2,D.z);return[Math.round(de*Be*Zt),Math.round(Ee*Be*Zt)]}function Pn(M,D,K){return D[1]>M[1]!=K[1]>M[1]&&M[0]<(K[0]-D[0])*(M[1]-D[1])/(K[1]-D[1])+D[0]}function yn(M,D){for(var K=!1,de=0,Ee=D.length;de<Ee;de++)for(var Be=D[de],Ye=0,at=Be.length;Ye<at-1;Ye++){if(void 0,void 0,void 0,void 0,(Wt=(mt=M)[0]-(Et=Be[Ye])[0])*(vn=mt[1]-(Lt=Be[Ye+1])[1])-(Xt=mt[0]-Lt[0])*(en=mt[1]-Et[1])==0&&Wt*Xt<=0&&en*vn<=0)return!1;Pn(M,Be[Ye],Be[Ye+1])&&(K=!K)}var mt,Et,Lt,Wt,en,Xt,vn;return K}function on(M,D){for(var K=0;K<D.length;K++)if(yn(M,D[K]))return!0;return!1}function nn(M,D,K,de){var mt=de[0]-K[0],Et=de[1]-K[1],Lt=(M[0]-K[0])*Et-mt*(M[1]-K[1]),Wt=(D[0]-K[0])*Et-mt*(D[1]-K[1]);return Lt>0&&Wt<0||Lt<0&&Wt>0}function dn(M,D,K){for(var de=0,Ee=K;de<Ee.length;de+=1)for(var Be=Ee[de],Ye=0;Ye<Be.length-1;++Ye)if(void 0,void 0,(Wt=[(Lt=Be[Ye+1])[0]-(Et=Be[Ye])[0],Lt[1]-Et[1]])[0]*(en=[(mt=D)[0]-(at=M)[0],mt[1]-at[1]])[1]-Wt[1]*en[0]!=0&&nn(at,mt,Et,Lt)&&nn(Et,Lt,at,mt))return!0;var at,mt,Et,Lt,Wt,en;return!1}function xn(M,D){for(var K=0;K<M.length;++K)if(!yn(M[K],D))return!1;for(var de=0;de<M.length-1;++de)if(dn(M[de],M[de+1],D))return!1;return!0}function Bn(M,D){for(var K=0;K<D.length;K++)if(xn(M,D[K]))return!0;return!1}function Wn(M,D,K){for(var de=[],Ee=0;Ee<M.length;Ee++){for(var Be=[],Ye=0;Ye<M[Ee].length;Ye++){var at=kn(M[Ee][Ye],K);un(D,at),Be.push(at)}de.push(Be)}return de}function Qn(M,D,K){for(var de=[],Ee=0;Ee<M.length;Ee++){var Be=Wn(M[Ee],D,K);de.push(Be)}return de}function ar(M,D,K,de){if(M[0]<K[0]||M[0]>K[2]){var Ee=.5*de,Be=M[0]-K[0]>Ee?-de:K[0]-M[0]>Ee?de:0;0===Be&&(Be=M[0]-K[2]>Ee?-de:K[2]-M[0]>Ee?de:0),M[0]+=Be}un(D,M)}function yr(M,D,K,de){for(var Ee=Math.pow(2,de.z)*Zt,Be=[de.x*Zt,de.y*Zt],Ye=[],at=0,mt=M;at<mt.length;at+=1)for(var Et=0,Lt=mt[at];Et<Lt.length;Et+=1){var Wt=Lt[Et],en=[Wt.x+Be[0],Wt.y+Be[1]];ar(en,D,K,Ee),Ye.push(en)}return Ye}function ur(M,D,K,de){for(var Ee=Math.pow(2,de.z)*Zt,Be=[de.x*Zt,de.y*Zt],Ye=[],at=0,mt=M;at<mt.length;at+=1){for(var Et=[],Lt=0,Wt=mt[at];Lt<Wt.length;Lt+=1){var en=Wt[Lt],Xt=[en.x+Be[0],en.y+Be[1]];un(D,Xt),Et.push(Xt)}Ye.push(Et)}if(D[2]-D[0]<=Ee/2){(Jn=D)[0]=Jn[1]=1/0,Jn[2]=Jn[3]=-1/0;for(var vn=0,bn=Ye;vn<bn.length;vn+=1)for(var zn=0,Rn=bn[vn];zn<Rn.length;zn+=1)ar(Rn[zn],D,K,Ee)}var Jn;return Ye}var gr=function(M,D){this.type=an,this.geojson=M,this.geometries=D};function br(M){if(M instanceof In&&("get"===M.name&&1===M.args.length||"feature-state"===M.name||"has"===M.name&&1===M.args.length||"properties"===M.name||"geometry-type"===M.name||"id"===M.name||/^filter-/.test(M.name))||M instanceof gr)return!1;var D=!0;return M.eachChild(function(K){D&&!br(K)&&(D=!1)}),D}function pr(M){if(M instanceof In&&"feature-state"===M.name)return!1;var D=!0;return M.eachChild(function(K){D&&!pr(K)&&(D=!1)}),D}function Lr(M,D){if(M instanceof In&&D.indexOf(M.name)>=0)return!1;var K=!0;return M.eachChild(function(de){K&&!Lr(de,D)&&(K=!1)}),K}gr.parse=function(M,D){if(2!==M.length)return D.error("'within' expression requires exactly one argument, but found "+(M.length-1)+" instead.");if(vr(M[1])){var K=M[1];if("FeatureCollection"===K.type)for(var de=0;de<K.features.length;++de){var Ee=K.features[de].geometry.type;if("Polygon"===Ee||"MultiPolygon"===Ee)return new gr(K,K.features[de].geometry)}else if("Feature"===K.type){var Be=K.geometry.type;if("Polygon"===Be||"MultiPolygon"===Be)return new gr(K,K.geometry)}else if("Polygon"===K.type||"MultiPolygon"===K.type)return new gr(K,K)}return D.error("'within' expression requires valid geojson object that contains polygon geometry type.")},gr.prototype.evaluate=function(M){if(null!=M.geometry()&&null!=M.canonicalID()){if("Point"===M.geometryType())return function(D,K){var de=[1/0,1/0,-1/0,-1/0],Ee=[1/0,1/0,-1/0,-1/0],Be=D.canonicalID();if("Polygon"===K.type){var Ye=Wn(K.coordinates,Ee,Be),at=yr(D.geometry(),de,Ee,Be);if(!Tn(de,Ee))return!1;for(var mt=0,Et=at;mt<Et.length;mt+=1)if(!yn(Et[mt],Ye))return!1}if("MultiPolygon"===K.type){var Lt=Qn(K.coordinates,Ee,Be),Wt=yr(D.geometry(),de,Ee,Be);if(!Tn(de,Ee))return!1;for(var en=0,Xt=Wt;en<Xt.length;en+=1)if(!on(Xt[en],Lt))return!1}return!0}(M,this.geometries);if("LineString"===M.geometryType())return function(D,K){var de=[1/0,1/0,-1/0,-1/0],Ee=[1/0,1/0,-1/0,-1/0],Be=D.canonicalID();if("Polygon"===K.type){var Ye=Wn(K.coordinates,Ee,Be),at=ur(D.geometry(),de,Ee,Be);if(!Tn(de,Ee))return!1;for(var mt=0,Et=at;mt<Et.length;mt+=1)if(!xn(Et[mt],Ye))return!1}if("MultiPolygon"===K.type){var Lt=Qn(K.coordinates,Ee,Be),Wt=ur(D.geometry(),de,Ee,Be);if(!Tn(de,Ee))return!1;for(var en=0,Xt=Wt;en<Xt.length;en+=1)if(!Bn(Xt[en],Lt))return!1}return!0}(M,this.geometries)}return!1},gr.prototype.eachChild=function(){},gr.prototype.outputDefined=function(){return!0},gr.prototype.serialize=function(){return["within",this.geojson]};var Ur=function(M,D){this.type=D.type,this.name=M,this.boundExpression=D};Ur.parse=function(M,D){if(2!==M.length||"string"!=typeof M[1])return D.error("'var' expression requires exactly one string literal argument.");var K=M[1];return D.scope.has(K)?new Ur(K,D.scope.get(K)):D.error('Unknown variable "'+K+'". Make sure "'+K+'" has been bound in an enclosing "let" expression before using it.',1)},Ur.prototype.evaluate=function(M){return this.boundExpression.evaluate(M)},Ur.prototype.eachChild=function(){},Ur.prototype.outputDefined=function(){return!1},Ur.prototype.serialize=function(){return["var",this.name]};var zr=function(M,D,K,de,Ee){void 0===D&&(D=[]),void 0===de&&(de=new Dt),void 0===Ee&&(Ee=[]),this.registry=M,this.path=D,this.key=D.map(function(Be){return"["+Be+"]"}).join(""),this.scope=de,this.errors=Ee,this.expectedType=K};function kr(M){if(M instanceof Ur)return kr(M.boundExpression);if(M instanceof In&&"error"===M.name||M instanceof Nt||M instanceof gr)return!1;var D=M instanceof fr||M instanceof En,K=!0;return M.eachChild(function(de){K=D?K&&kr(de):K&&de instanceof fn}),!!K&&br(M)&&Lr(M,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Fr(M,D){for(var K,Ee=M.length-1,Be=0,Ye=Ee,at=0;Be<=Ye;)if((K=M[at=Math.floor((Be+Ye)/2)])<=D){if(at===Ee||D<M[at+1])return at;Be=at+1}else{if(!(K>D))throw new gn("Input is not a number.");Ye=at-1}return 0}zr.prototype.parse=function(M,D,K,de,Ee){return void 0===Ee&&(Ee={}),D?this.concat(D,K,de)._parse(M,Ee):this._parse(M,Ee)},zr.prototype._parse=function(M,D){function K(Et,Lt,Wt){return"assert"===Wt?new En(Lt,[Et]):"coerce"===Wt?new fr(Lt,[Et]):Et}if(null!==M&&"string"!=typeof M&&"boolean"!=typeof M&&"number"!=typeof M||(M=["literal",M]),Array.isArray(M)){if(0===M.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var de=M[0];if("string"!=typeof de)return this.error("Expression name must be a string, but found "+typeof de+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var Ee=this.registry[de];if(Ee){var Be=Ee.parse(M,this);if(!Be)return null;if(this.expectedType){var Ye=this.expectedType,at=Be.type;if("string"!==Ye.kind&&"number"!==Ye.kind&&"boolean"!==Ye.kind&&"object"!==Ye.kind&&"array"!==Ye.kind||"value"!==at.kind)if("color"!==Ye.kind&&"formatted"!==Ye.kind&&"resolvedImage"!==Ye.kind||"value"!==at.kind&&"string"!==at.kind){if(this.checkSubtype(Ye,at))return null}else Be=K(Be,Ye,D.typeAnnotation||"coerce");else Be=K(Be,Ye,D.typeAnnotation||"assert")}if(!(Be instanceof fn)&&"resolvedImage"!==Be.type.kind&&kr(Be)){var mt=new cn;try{Be=new fn(Be.type,Be.evaluate(mt))}catch(Et){return this.error(Et.message),null}}return Be}return this.error('Unknown expression "'+de+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===M?"'undefined' value invalid. Use null instead.":"object"==typeof M?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof M+" instead.")},zr.prototype.concat=function(M,D,K){var de="number"==typeof M?this.path.concat(M):this.path,Ee=K?this.scope.concat(K):this.scope;return new zr(this.registry,de,D||null,Ee,this.errors)},zr.prototype.error=function(M){for(var D=[],K=arguments.length-1;K-- >0;)D[K]=arguments[K+1];var de=""+this.key+D.map(function(Ee){return"["+Ee+"]"}).join("");this.errors.push(new Ct(de,M))},zr.prototype.checkSubtype=function(M,D){var K=pn(M,D);return K&&this.error(K),K};var Qr=function(M,D,K){this.type=M,this.input=D,this.labels=[],this.outputs=[];for(var de=0,Ee=K;de<Ee.length;de+=1){var Be=Ee[de],at=Be[1];this.labels.push(Be[0]),this.outputs.push(at)}};function ai(M,D,K){return M*(1-K)+D*K}Qr.parse=function(M,D){if(M.length-1<4)return D.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if((M.length-1)%2!=0)return D.error("Expected an even number of arguments.");var K=D.parse(M[1],1,Bt);if(!K)return null;var de=[],Ee=null;D.expectedType&&"value"!==D.expectedType.kind&&(Ee=D.expectedType);for(var Be=1;Be<M.length;Be+=2){var Ye=1===Be?-1/0:M[Be],at=M[Be+1],mt=Be,Et=Be+1;if("number"!=typeof Ye)return D.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',mt);if(de.length&&de[de.length-1][0]>=Ye)return D.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',mt);var Lt=D.parse(at,Et,Ee);if(!Lt)return null;Ee=Ee||Lt.type,de.push([Ye,Lt])}return new Qr(Ee,K,de)},Qr.prototype.evaluate=function(M){var D=this.labels,K=this.outputs;if(1===D.length)return K[0].evaluate(M);var de=this.input.evaluate(M);if(de<=D[0])return K[0].evaluate(M);var Ee=D.length;return de>=D[Ee-1]?K[Ee-1].evaluate(M):K[Fr(D,de)].evaluate(M)},Qr.prototype.eachChild=function(M){M(this.input);for(var D=0,K=this.outputs;D<K.length;D+=1)M(K[D])},Qr.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})},Qr.prototype.serialize=function(){for(var M=["step",this.input.serialize()],D=0;D<this.labels.length;D++)D>0&&M.push(this.labels[D]),M.push(this.outputs[D].serialize());return M};var Xi=Object.freeze({__proto__:null,number:ai,color:function(M,D,K){return new Gn(ai(M.r,D.r,K),ai(M.g,D.g,K),ai(M.b,D.b,K),ai(M.a,D.a,K))},array:function(M,D,K){return M.map(function(de,Ee){return ai(de,D[Ee],K)})}}),Ea=4/29,so=6/29,li=3*so*so,za=so*so*so,No=Math.PI/180,Na=180/Math.PI;function js(M){return M>za?Math.pow(M,.3333333333333333):M/li+Ea}function Ia(M){return M>so?M*M*M:li*(M-Ea)}function Qa(M){return 255*(M<=.0031308?12.92*M:1.055*Math.pow(M,.4166666666666667)-.055)}function ds(M){return(M/=255)<=.04045?M/12.92:Math.pow((M+.055)/1.055,2.4)}function Cs(M){var D=ds(M.r),K=ds(M.g),de=ds(M.b),Ee=js((.4124564*D+.3575761*K+.1804375*de)/.95047),Be=js((.2126729*D+.7151522*K+.072175*de)/1);return{l:116*Be-16,a:500*(Ee-Be),b:200*(Be-js((.0193339*D+.119192*K+.9503041*de)/1.08883)),alpha:M.a}}function xl(M){var D=(M.l+16)/116,K=isNaN(M.a)?D:D+M.a/500,de=isNaN(M.b)?D:D-M.b/200;return D=1*Ia(D),K=.95047*Ia(K),de=1.08883*Ia(de),new Gn(Qa(3.2404542*K-1.5371385*D-.4985314*de),Qa(-.969266*K+1.8760108*D+.041556*de),Qa(.0556434*K-.2040259*D+1.0572252*de),M.alpha)}function Eo(M,D,K){var de=D-M;return M+K*(de>180||de<-180?de-360*Math.round(de/360):de)}var $o={forward:Cs,reverse:xl,interpolate:function(M,D,K){return{l:ai(M.l,D.l,K),a:ai(M.a,D.a,K),b:ai(M.b,D.b,K),alpha:ai(M.alpha,D.alpha,K)}}},Es={forward:function(M){var D=Cs(M),K=D.l,de=D.a,Ee=D.b,Be=Math.atan2(Ee,de)*Na;return{h:Be<0?Be+360:Be,c:Math.sqrt(de*de+Ee*Ee),l:K,alpha:M.a}},reverse:function(M){var D=M.h*No,K=M.c;return xl({l:M.l,a:Math.cos(D)*K,b:Math.sin(D)*K,alpha:M.alpha})},interpolate:function(M,D,K){return{h:Eo(M.h,D.h,K),c:ai(M.c,D.c,K),l:ai(M.l,D.l,K),alpha:ai(M.alpha,D.alpha,K)}}},Ei=Object.freeze({__proto__:null,lab:$o,hcl:Es}),Fa=function(M,D,K,de,Ee){this.type=M,this.operator=D,this.interpolation=K,this.input=de,this.labels=[],this.outputs=[];for(var Be=0,Ye=Ee;Be<Ye.length;Be+=1){var at=Ye[Be],Et=at[1];this.labels.push(at[0]),this.outputs.push(Et)}};function Io(M,D,K,de){var Ee=de-K,Be=M-K;return 0===Ee?0:1===D?Be/Ee:(Math.pow(D,Be)-1)/(Math.pow(D,Ee)-1)}Fa.interpolationFactor=function(M,D,K,de){var Ee=0;if("exponential"===M.name)Ee=Io(D,M.base,K,de);else if("linear"===M.name)Ee=Io(D,1,K,de);else if("cubic-bezier"===M.name){var Be=M.controlPoints;Ee=new p(Be[0],Be[1],Be[2],Be[3]).solve(Io(D,1,K,de))}return Ee},Fa.parse=function(M,D){var K=M[0],de=M[1],Ee=M[2],Be=M.slice(3);if(!Array.isArray(de)||0===de.length)return D.error("Expected an interpolation type expression.",1);if("linear"===de[0])de={name:"linear"};else if("exponential"===de[0]){var Ye=de[1];if("number"!=typeof Ye)return D.error("Exponential interpolation requires a numeric base.",1,1);de={name:"exponential",base:Ye}}else{if("cubic-bezier"!==de[0])return D.error("Unknown interpolation type "+String(de[0]),1,0);var at=de.slice(1);if(4!==at.length||at.some(function(zn){return"number"!=typeof zn||zn<0||zn>1}))return D.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);de={name:"cubic-bezier",controlPoints:at}}if(M.length-1<4)return D.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if((M.length-1)%2!=0)return D.error("Expected an even number of arguments.");if(!(Ee=D.parse(Ee,2,Bt)))return null;var mt=[],Et=null;"interpolate-hcl"===K||"interpolate-lab"===K?Et=mn:D.expectedType&&"value"!==D.expectedType.kind&&(Et=D.expectedType);for(var Lt=0;Lt<Be.length;Lt+=2){var Wt=Be[Lt],en=Be[Lt+1],Xt=Lt+3,vn=Lt+4;if("number"!=typeof Wt)return D.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Xt);if(mt.length&&mt[mt.length-1][0]>=Wt)return D.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Xt);var bn=D.parse(en,vn,Et);if(!bn)return null;Et=Et||bn.type,mt.push([Wt,bn])}return"number"===Et.kind||"color"===Et.kind||"array"===Et.kind&&"number"===Et.itemType.kind&&"number"==typeof Et.N?new Fa(Et,K,de,Ee,mt):D.error("Type "+hn(Et)+" is not interpolatable.")},Fa.prototype.evaluate=function(M){var D=this.labels,K=this.outputs;if(1===D.length)return K[0].evaluate(M);var de=this.input.evaluate(M);if(de<=D[0])return K[0].evaluate(M);var Ee=D.length;if(de>=D[Ee-1])return K[Ee-1].evaluate(M);var Be=Fr(D,de),mt=Fa.interpolationFactor(this.interpolation,de,D[Be],D[Be+1]),Et=K[Be].evaluate(M),Lt=K[Be+1].evaluate(M);return"interpolate"===this.operator?Xi[this.type.kind.toLowerCase()](Et,Lt,mt):"interpolate-hcl"===this.operator?Es.reverse(Es.interpolate(Es.forward(Et),Es.forward(Lt),mt)):$o.reverse($o.interpolate($o.forward(Et),$o.forward(Lt),mt))},Fa.prototype.eachChild=function(M){M(this.input);for(var D=0,K=this.outputs;D<K.length;D+=1)M(K[D])},Fa.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})},Fa.prototype.serialize=function(){var M;M="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var D=[this.operator,M,this.input.serialize()],K=0;K<this.labels.length;K++)D.push(this.labels[K],this.outputs[K].serialize());return D};var To=function(M,D){this.type=M,this.args=D};To.parse=function(M,D){if(M.length<2)return D.error("Expectected at least one argument.");var K=null,de=D.expectedType;de&&"value"!==de.kind&&(K=de);for(var Ee=[],Be=0,Ye=M.slice(1);Be<Ye.length;Be+=1){var mt=D.parse(Ye[Be],1+Ee.length,K,void 0,{typeAnnotation:"omit"});if(!mt)return null;K=K||mt.type,Ee.push(mt)}var Et=de&&Ee.some(function(Lt){return pn(de,Lt.type)});return new To(Et?sn:K,Ee)},To.prototype.evaluate=function(M){for(var D,K=null,de=0,Ee=0,Be=this.args;Ee<Be.length&&(de++,(K=Be[Ee].evaluate(M))&&K instanceof mr&&!K.available&&(D||(D=K.name),K=null,de===this.args.length&&(K=D)),null===K);Ee+=1);return K},To.prototype.eachChild=function(M){this.args.forEach(M)},To.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},To.prototype.serialize=function(){var M=["coalesce"];return this.eachChild(function(D){M.push(D.serialize())}),M};var Ao=function(M,D){this.type=D.type,this.bindings=[].concat(M),this.result=D};Ao.prototype.evaluate=function(M){return this.result.evaluate(M)},Ao.prototype.eachChild=function(M){for(var D=0,K=this.bindings;D<K.length;D+=1)M(K[D][1]);M(this.result)},Ao.parse=function(M,D){if(M.length<4)return D.error("Expected at least 3 arguments, but found "+(M.length-1)+" instead.");for(var K=[],de=1;de<M.length-1;de+=2){var Ee=M[de];if("string"!=typeof Ee)return D.error("Expected string, but found "+typeof Ee+" instead.",de);if(/[^a-zA-Z0-9_]/.test(Ee))return D.error("Variable names must contain only alphanumeric characters or '_'.",de);var Be=D.parse(M[de+1],de+1);if(!Be)return null;K.push([Ee,Be])}var Ye=D.parse(M[M.length-1],M.length-1,D.expectedType,K);return Ye?new Ao(K,Ye):null},Ao.prototype.outputDefined=function(){return this.result.outputDefined()},Ao.prototype.serialize=function(){for(var M=["let"],D=0,K=this.bindings;D<K.length;D+=1){var de=K[D];M.push(de[0],de[1].serialize())}return M.push(this.result.serialize()),M};var vo=function(M,D,K){this.type=M,this.index=D,this.input=K};vo.parse=function(M,D){if(3!==M.length)return D.error("Expected 2 arguments, but found "+(M.length-1)+" instead.");var K=D.parse(M[1],1,Bt),de=D.parse(M[2],2,Sn(D.expectedType||sn));return K&&de?new vo(de.type.itemType,K,de):null},vo.prototype.evaluate=function(M){var D=this.index.evaluate(M),K=this.input.evaluate(M);if(D<0)throw new gn("Array index out of bounds: "+D+" < 0.");if(D>=K.length)throw new gn("Array index out of bounds: "+D+" > "+(K.length-1)+".");if(D!==Math.floor(D))throw new gn("Array index must be an integer, but found "+D+" instead.");return K[D]},vo.prototype.eachChild=function(M){M(this.index),M(this.input)},vo.prototype.outputDefined=function(){return!1},vo.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var ps=function(M,D){this.type=an,this.needle=M,this.haystack=D};ps.parse=function(M,D){if(3!==M.length)return D.error("Expected 2 arguments, but found "+(M.length-1)+" instead.");var K=D.parse(M[1],1,sn),de=D.parse(M[2],2,sn);return K&&de?An(K.type,[an,qt,Bt,Ut,sn])?new ps(K,de):D.error("Expected first argument to be of type boolean, string, number or null, but found "+hn(K.type)+" instead"):null},ps.prototype.evaluate=function(M){var D=this.needle.evaluate(M),K=this.haystack.evaluate(M);if(!K)return!1;if(!On(D,["boolean","string","number","null"]))throw new gn("Expected first argument to be of type boolean, string, number or null, but found "+hn(or(D))+" instead.");if(!On(K,["string","array"]))throw new gn("Expected second argument to be of type array or string, but found "+hn(or(K))+" instead.");return K.indexOf(D)>=0},ps.prototype.eachChild=function(M){M(this.needle),M(this.haystack)},ps.prototype.outputDefined=function(){return!0},ps.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var _l=function(M,D,K){this.type=Bt,this.needle=M,this.haystack=D,this.fromIndex=K};_l.parse=function(M,D){if(M.length<=2||M.length>=5)return D.error("Expected 3 or 4 arguments, but found "+(M.length-1)+" instead.");var K=D.parse(M[1],1,sn),de=D.parse(M[2],2,sn);if(!K||!de)return null;if(!An(K.type,[an,qt,Bt,Ut,sn]))return D.error("Expected first argument to be of type boolean, string, number or null, but found "+hn(K.type)+" instead");if(4===M.length){var Ee=D.parse(M[3],3,Bt);return Ee?new _l(K,de,Ee):null}return new _l(K,de)},_l.prototype.evaluate=function(M){var D=this.needle.evaluate(M),K=this.haystack.evaluate(M);if(!On(D,["boolean","string","number","null"]))throw new gn("Expected first argument to be of type boolean, string, number or null, but found "+hn(or(D))+" instead.");if(!On(K,["string","array"]))throw new gn("Expected second argument to be of type array or string, but found "+hn(or(K))+" instead.");if(this.fromIndex){var de=this.fromIndex.evaluate(M);return K.indexOf(D,de)}return K.indexOf(D)},_l.prototype.eachChild=function(M){M(this.needle),M(this.haystack),this.fromIndex&&M(this.fromIndex)},_l.prototype.outputDefined=function(){return!1},_l.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var M=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),M]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Oa=function(M,D,K,de,Ee,Be){this.inputType=M,this.type=D,this.input=K,this.cases=de,this.outputs=Ee,this.otherwise=Be};Oa.parse=function(M,D){if(M.length<5)return D.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if(M.length%2!=1)return D.error("Expected an even number of arguments.");var K,de;D.expectedType&&"value"!==D.expectedType.kind&&(de=D.expectedType);for(var Ee={},Be=[],Ye=2;Ye<M.length-1;Ye+=2){var at=M[Ye],mt=M[Ye+1];Array.isArray(at)||(at=[at]);var Et=D.concat(Ye);if(0===at.length)return Et.error("Expected at least one branch label.");for(var Lt=0,Wt=at;Lt<Wt.length;Lt+=1){var en=Wt[Lt];if("number"!=typeof en&&"string"!=typeof en)return Et.error("Branch labels must be numbers or strings.");if("number"==typeof en&&Math.abs(en)>Number.MAX_SAFE_INTEGER)return Et.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof en&&Math.floor(en)!==en)return Et.error("Numeric branch labels must be integer values.");if(K){if(Et.checkSubtype(K,or(en)))return null}else K=or(en);if(void 0!==Ee[String(en)])return Et.error("Branch labels must be unique.");Ee[String(en)]=Be.length}var Xt=D.parse(mt,Ye,de);if(!Xt)return null;de=de||Xt.type,Be.push(Xt)}var vn=D.parse(M[1],1,sn);if(!vn)return null;var bn=D.parse(M[M.length-1],M.length-1,de);return bn?"value"!==vn.type.kind&&D.concat(1).checkSubtype(K,vn.type)?null:new Oa(K,de,vn,Ee,Be,bn):null},Oa.prototype.evaluate=function(M){var D=this.input.evaluate(M);return(or(D)===this.inputType&&this.outputs[this.cases[D]]||this.otherwise).evaluate(M)},Oa.prototype.eachChild=function(M){M(this.input),this.outputs.forEach(M),M(this.otherwise)},Oa.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})&&this.otherwise.outputDefined()},Oa.prototype.serialize=function(){for(var M=this,D=["match",this.input.serialize()],K=[],de={},Ee=0,Be=Object.keys(this.cases).sort();Ee<Be.length;Ee+=1){var Ye=Be[Ee];void 0===(Wt=de[this.cases[Ye]])?(de[this.cases[Ye]]=K.length,K.push([this.cases[Ye],[Ye]])):K[Wt][1].push(Ye)}for(var at=function(Xt){return"number"===M.inputType.kind?Number(Xt):Xt},mt=0,Et=K;mt<Et.length;mt+=1){var Lt=Et[mt],Wt=Lt[0],en=Lt[1];D.push(1===en.length?at(en[0]):en.map(at)),D.push(this.outputs[outputIndex$1].serialize())}return D.push(this.otherwise.serialize()),D};var al=function(M,D,K){this.type=M,this.branches=D,this.otherwise=K};al.parse=function(M,D){if(M.length<4)return D.error("Expected at least 3 arguments, but found only "+(M.length-1)+".");if(M.length%2!=0)return D.error("Expected an odd number of arguments.");var K;D.expectedType&&"value"!==D.expectedType.kind&&(K=D.expectedType);for(var de=[],Ee=1;Ee<M.length-1;Ee+=2){var Be=D.parse(M[Ee],Ee,an);if(!Be)return null;var Ye=D.parse(M[Ee+1],Ee+1,K);if(!Ye)return null;de.push([Be,Ye]),K=K||Ye.type}var at=D.parse(M[M.length-1],M.length-1,K);return at?new al(K,de,at):null},al.prototype.evaluate=function(M){for(var D=0,K=this.branches;D<K.length;D+=1){var de=K[D],Be=de[1];if(de[0].evaluate(M))return Be.evaluate(M)}return this.otherwise.evaluate(M)},al.prototype.eachChild=function(M){for(var D=0,K=this.branches;D<K.length;D+=1){var de=K[D],Be=de[1];M(de[0]),M(Be)}M(this.otherwise)},al.prototype.outputDefined=function(){return this.branches.every(function(M){return M[1].outputDefined()})&&this.otherwise.outputDefined()},al.prototype.serialize=function(){var M=["case"];return this.eachChild(function(D){M.push(D.serialize())}),M};var Us=function(M,D,K,de){this.type=M,this.input=D,this.beginIndex=K,this.endIndex=de};function Ul(M,D){return"=="===M||"!="===M?"boolean"===D.kind||"string"===D.kind||"number"===D.kind||"null"===D.kind||"value"===D.kind:"string"===D.kind||"number"===D.kind||"value"===D.kind}function Xc(M,D,K,de){return 0===de.compare(D,K)}function Vs(M,D,K){var de="=="!==M&&"!="!==M;return function(){function Ee(Be,Ye,at){this.type=an,this.lhs=Be,this.rhs=Ye,this.collator=at,this.hasUntypedArgument="value"===Be.type.kind||"value"===Ye.type.kind}return Ee.parse=function(Be,Ye){if(3!==Be.length&&4!==Be.length)return Ye.error("Expected two or three arguments.");var at=Be[0],mt=Ye.parse(Be[1],1,sn);if(!mt)return null;if(!Ul(at,mt.type))return Ye.concat(1).error('"'+at+"\" comparisons are not supported for type '"+hn(mt.type)+"'.");var Et=Ye.parse(Be[2],2,sn);if(!Et)return null;if(!Ul(at,Et.type))return Ye.concat(2).error('"'+at+"\" comparisons are not supported for type '"+hn(Et.type)+"'.");if(mt.type.kind!==Et.type.kind&&"value"!==mt.type.kind&&"value"!==Et.type.kind)return Ye.error("Cannot compare types '"+hn(mt.type)+"' and '"+hn(Et.type)+"'.");de&&("value"===mt.type.kind&&"value"!==Et.type.kind?mt=new En(Et.type,[mt]):"value"!==mt.type.kind&&"value"===Et.type.kind&&(Et=new En(mt.type,[Et])));var Lt=null;if(4===Be.length){if("string"!==mt.type.kind&&"string"!==Et.type.kind&&"value"!==mt.type.kind&&"value"!==Et.type.kind)return Ye.error("Cannot use collator to compare non-string types.");if(!(Lt=Ye.parse(Be[3],3,Kt)))return null}return new Ee(mt,Et,Lt)},Ee.prototype.evaluate=function(Be){var Ye=this.lhs.evaluate(Be),at=this.rhs.evaluate(Be);if(de&&this.hasUntypedArgument){var mt=or(Ye),Et=or(at);if(mt.kind!==Et.kind||"string"!==mt.kind&&"number"!==mt.kind)throw new gn('Expected arguments for "'+M+'" to be (string, string) or (number, number), but found ('+mt.kind+", "+Et.kind+") instead.")}if(this.collator&&!de&&this.hasUntypedArgument){var Lt=or(Ye),Wt=or(at);if("string"!==Lt.kind||"string"!==Wt.kind)return D(Be,Ye,at)}return this.collator?K(Be,Ye,at,this.collator.evaluate(Be)):D(Be,Ye,at)},Ee.prototype.eachChild=function(Be){Be(this.lhs),Be(this.rhs),this.collator&&Be(this.collator)},Ee.prototype.outputDefined=function(){return!0},Ee.prototype.serialize=function(){var Be=[M];return this.eachChild(function(Ye){Be.push(Ye.serialize())}),Be},Ee}()}Us.parse=function(M,D){if(M.length<=2||M.length>=5)return D.error("Expected 3 or 4 arguments, but found "+(M.length-1)+" instead.");var K=D.parse(M[1],1,sn),de=D.parse(M[2],2,Bt);if(!K||!de)return null;if(!An(K.type,[Sn(sn),qt,sn]))return D.error("Expected first argument to be of type array or string, but found "+hn(K.type)+" instead");if(4===M.length){var Ee=D.parse(M[3],3,Bt);return Ee?new Us(K.type,K,de,Ee):null}return new Us(K.type,K,de)},Us.prototype.evaluate=function(M){var D=this.input.evaluate(M),K=this.beginIndex.evaluate(M);if(!On(D,["string","array"]))throw new gn("Expected first argument to be of type array or string, but found "+hn(or(D))+" instead.");if(this.endIndex){var de=this.endIndex.evaluate(M);return D.slice(K,de)}return D.slice(K)},Us.prototype.eachChild=function(M){M(this.input),M(this.beginIndex),this.endIndex&&M(this.endIndex)},Us.prototype.outputDefined=function(){return!1},Us.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var M=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),M]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Is=Vs("==",function(M,D,K){return D===K},Xc),ac=Vs("!=",function(M,D,K){return D!==K},function(M,D,K,de){return!Xc(0,D,K,de)}),jo=Vs("<",function(M,D,K){return D<K},function(M,D,K,de){return de.compare(D,K)<0}),pu=Vs(">",function(M,D,K){return D>K},function(M,D,K,de){return de.compare(D,K)>0}),Xu=Vs("<=",function(M,D,K){return D<=K},function(M,D,K,de){return de.compare(D,K)<=0}),Ku=Vs(">=",function(M,D,K){return D>=K},function(M,D,K,de){return de.compare(D,K)>=0}),bl=function(M,D,K,de,Ee){this.type=qt,this.number=M,this.locale=D,this.currency=K,this.minFractionDigits=de,this.maxFractionDigits=Ee};bl.parse=function(M,D){if(3!==M.length)return D.error("Expected two arguments.");var K=D.parse(M[1],1,Bt);if(!K)return null;var de=M[2];if("object"!=typeof de||Array.isArray(de))return D.error("NumberFormat options argument must be an object.");var Ee=null;if(de.locale&&!(Ee=D.parse(de.locale,1,qt)))return null;var Be=null;if(de.currency&&!(Be=D.parse(de.currency,1,qt)))return null;var Ye=null;if(de["min-fraction-digits"]&&!(Ye=D.parse(de["min-fraction-digits"],1,Bt)))return null;var at=null;return de["max-fraction-digits"]&&!(at=D.parse(de["max-fraction-digits"],1,Bt))?null:new bl(K,Ee,Be,Ye,at)},bl.prototype.evaluate=function(M){return new Intl.NumberFormat(this.locale?this.locale.evaluate(M):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(M):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(M):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(M):void 0}).format(this.number.evaluate(M))},bl.prototype.eachChild=function(M){M(this.number),this.locale&&M(this.locale),this.currency&&M(this.currency),this.minFractionDigits&&M(this.minFractionDigits),this.maxFractionDigits&&M(this.maxFractionDigits)},bl.prototype.outputDefined=function(){return!1},bl.prototype.serialize=function(){var M={};return this.locale&&(M.locale=this.locale.serialize()),this.currency&&(M.currency=this.currency.serialize()),this.minFractionDigits&&(M["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(M["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),M]};var gs=function(M){this.type=Bt,this.input=M};gs.parse=function(M,D){if(2!==M.length)return D.error("Expected 1 argument, but found "+(M.length-1)+" instead.");var K=D.parse(M[1],1);return K?"array"!==K.type.kind&&"string"!==K.type.kind&&"value"!==K.type.kind?D.error("Expected argument of type string or array, but found "+hn(K.type)+" instead."):new gs(K):null},gs.prototype.evaluate=function(M){var D=this.input.evaluate(M);if("string"==typeof D||Array.isArray(D))return D.length;throw new gn("Expected value to be of type string or array, but found "+hn(or(D))+" instead.")},gs.prototype.eachChild=function(M){M(this.input)},gs.prototype.outputDefined=function(){return!1},gs.prototype.serialize=function(){var M=["length"];return this.eachChild(function(D){M.push(D.serialize())}),M};var Vl={"==":Is,"!=":ac,">":pu,"<":jo,">=":Ku,"<=":Xu,array:En,at:vo,boolean:En,case:al,coalesce:To,collator:Nt,format:Zn,image:Kn,in:ps,"index-of":_l,interpolate:Fa,"interpolate-hcl":Fa,"interpolate-lab":Fa,length:gs,let:Ao,literal:fn,match:Oa,number:En,"number-format":bl,object:En,slice:Us,step:Qr,string:En,"to-boolean":fr,"to-color":fr,"to-number":fr,"to-string":fr,var:Ur,within:gr};function Gs(M,D){var K=D[0],de=D[1],Ee=D[2],Be=D[3];K=K.evaluate(M),de=de.evaluate(M),Ee=Ee.evaluate(M);var Ye=Be?Be.evaluate(M):1,at=lr(K,de,Ee,Ye);if(at)throw new gn(at);return new Gn(K/255*Ye,de/255*Ye,Ee/255*Ye,Ye)}function wl(M,D){return M in D}function Tl(M,D){var K=D[M];return void 0===K?null:K}function ms(M){return{type:M}}function Ac(M){return{result:"success",value:M}}function Ls(M){return{result:"error",value:M}}function Ps(M){return"data-driven"===M["property-type"]||"cross-faded-data-driven"===M["property-type"]}function Hs(M){return!!M.expression&&M.expression.parameters.indexOf("zoom")>-1}function ol(M){return!!M.expression&&M.expression.interpolated}function ki(M){return M instanceof Number?"number":M instanceof String?"string":M instanceof Boolean?"boolean":Array.isArray(M)?"array":null===M?"null":typeof M}function vs(M){return"object"==typeof M&&null!==M&&!Array.isArray(M)}function Kc(M){return M}function kc(M,D){var K,de,Ee,Be="color"===D.type,Ye=M.stops&&"object"==typeof M.stops[0][0],mt=Ye||!(Ye||void 0!==M.property),Et=M.type||(ol(D)?"exponential":"interval");if(Be&&((M=Mt({},M)).stops&&(M.stops=M.stops.map(function(Rr){return[Rr[0],Gn.parse(Rr[1])]})),M.default=Gn.parse(M.default?M.default:D.default)),M.colorSpace&&"rgb"!==M.colorSpace&&!Ei[M.colorSpace])throw new Error("Unknown color space: "+M.colorSpace);if("exponential"===Et)K=Jc;else if("interval"===Et)K=Qo;else if("categorical"===Et){K=Mc,de=Object.create(null);for(var Lt=0,Wt=M.stops;Lt<Wt.length;Lt+=1){var en=Wt[Lt];de[en[0]]=en[1]}Ee=typeof M.stops[0][0]}else{if("identity"!==Et)throw new Error('Unknown function type "'+Et+'"');K=$c}if(Ye){for(var Xt={},vn=[],bn=0;bn<M.stops.length;bn++){var zn=M.stops[bn],Rn=zn[0].zoom;void 0===Xt[Rn]&&(Xt[Rn]={zoom:Rn,type:M.type,property:M.property,default:M.default,stops:[]},vn.push(Rn)),Xt[Rn].stops.push([zn[0].value,zn[1]])}for(var Jn=[],nr=0,cr=vn;nr<cr.length;nr+=1){var dr=cr[nr];Jn.push([Xt[dr].zoom,kc(Xt[dr],D)])}var wr={name:"linear"};return{kind:"composite",interpolationType:wr,interpolationFactor:Fa.interpolationFactor.bind(void 0,wr),zoomStops:Jn.map(function(Rr){return Rr[0]}),evaluate:function(Rr,Vr){var Wr=Rr.zoom;return Jc({stops:Jn,base:M.base},D,Wr).evaluate(Wr,Vr)}}}if(mt){var jr="exponential"===Et?{name:"exponential",base:void 0!==M.base?M.base:1}:null;return{kind:"camera",interpolationType:jr,interpolationFactor:Fa.interpolationFactor.bind(void 0,jr),zoomStops:M.stops.map(function(Rr){return Rr[0]}),evaluate:function(Rr){return K(M,D,Rr.zoom,de,Ee)}}}return{kind:"source",evaluate:function(Rr,Vr){var Wr=Vr&&Vr.properties?Vr.properties[M.property]:void 0;return void 0===Wr?oc(M.default,D.default):K(M,D,Wr,de,Ee)}}}function oc(M,D,K){return void 0!==M?M:void 0!==D?D:void 0!==K?K:void 0}function Mc(M,D,K,de,Ee){return oc(typeof K===Ee?de[K]:void 0,M.default,D.default)}function Qo(M,D,K){if("number"!==ki(K))return oc(M.default,D.default);var de=M.stops.length;if(1===de||K<=M.stops[0][0])return M.stops[0][1];if(K>=M.stops[de-1][0])return M.stops[de-1][1];var Ee=Fr(M.stops.map(function(Be){return Be[0]}),K);return M.stops[Ee][1]}function Jc(M,D,K){var de=void 0!==M.base?M.base:1;if("number"!==ki(K))return oc(M.default,D.default);var Ee=M.stops.length;if(1===Ee||K<=M.stops[0][0])return M.stops[0][1];if(K>=M.stops[Ee-1][0])return M.stops[Ee-1][1];var en,Xt,bn,zn,Be=Fr(M.stops.map(function(Wt){return Wt[0]}),K),Ye=(en=de,zn=K-(Xt=M.stops[Be][0]),0==(bn=M.stops[Be+1][0]-Xt)?0:1===en?zn/bn:(Math.pow(en,zn)-1)/(Math.pow(en,bn)-1)),at=M.stops[Be][1],mt=M.stops[Be+1][1],Et=Xi[D.type]||Kc;if(M.colorSpace&&"rgb"!==M.colorSpace){var Lt=Ei[M.colorSpace];Et=function(Wt,en){return Lt.reverse(Lt.interpolate(Lt.forward(Wt),Lt.forward(en),Ye))}}return"function"==typeof at.evaluate?{evaluate:function(){for(var Wt=[],en=arguments.length;en--;)Wt[en]=arguments[en];var Xt=at.evaluate.apply(void 0,Wt),vn=mt.evaluate.apply(void 0,Wt);if(void 0!==Xt&&void 0!==vn)return Et(Xt,vn,Ye)}}:Et(at,mt,Ye)}function $c(M,D,K){return"color"===D.type?K=Gn.parse(K):"formatted"===D.type?K=$n.fromString(K.toString()):"resolvedImage"===D.type?K=mr.fromString(K.toString()):ki(K)===D.type||"enum"===D.type&&D.values[K]||(K=void 0),oc(K,M.default,D.default)}In.register(Vl,{error:[{kind:"error"},[qt],function(M,D){throw new gn(D[0].evaluate(M))}],typeof:[qt,[sn],function(M,D){return hn(or(D[0].evaluate(M)))}],"to-rgba":[Sn(Bt,4),[mn],function(M,D){return D[0].evaluate(M).toArray()}],rgb:[mn,[Bt,Bt,Bt],Gs],rgba:[mn,[Bt,Bt,Bt,Bt],Gs],has:{type:an,overloads:[[[qt],function(M,D){return wl(D[0].evaluate(M),M.properties())}],[[qt,Qt],function(M,D){var de=D[1];return wl(D[0].evaluate(M),de.evaluate(M))}]]},get:{type:sn,overloads:[[[qt],function(M,D){return Tl(D[0].evaluate(M),M.properties())}],[[qt,Qt],function(M,D){var de=D[1];return Tl(D[0].evaluate(M),de.evaluate(M))}]]},"feature-state":[sn,[qt],function(M,D){return Tl(D[0].evaluate(M),M.featureState||{})}],properties:[Qt,[],function(M){return M.properties()}],"geometry-type":[qt,[],function(M){return M.geometryType()}],id:[sn,[],function(M){return M.id()}],zoom:[Bt,[],function(M){return M.globals.zoom}],"heatmap-density":[Bt,[],function(M){return M.globals.heatmapDensity||0}],"line-progress":[Bt,[],function(M){return M.globals.lineProgress||0}],accumulated:[sn,[],function(M){return void 0===M.globals.accumulated?null:M.globals.accumulated}],"+":[Bt,ms(Bt),function(M,D){for(var K=0,de=0,Ee=D;de<Ee.length;de+=1)K+=Ee[de].evaluate(M);return K}],"*":[Bt,ms(Bt),function(M,D){for(var K=1,de=0,Ee=D;de<Ee.length;de+=1)K*=Ee[de].evaluate(M);return K}],"-":{type:Bt,overloads:[[[Bt,Bt],function(M,D){var de=D[1];return D[0].evaluate(M)-de.evaluate(M)}],[[Bt],function(M,D){return-D[0].evaluate(M)}]]},"/":[Bt,[Bt,Bt],function(M,D){var de=D[1];return D[0].evaluate(M)/de.evaluate(M)}],"%":[Bt,[Bt,Bt],function(M,D){var de=D[1];return D[0].evaluate(M)%de.evaluate(M)}],ln2:[Bt,[],function(){return Math.LN2}],pi:[Bt,[],function(){return Math.PI}],e:[Bt,[],function(){return Math.E}],"^":[Bt,[Bt,Bt],function(M,D){var de=D[1];return Math.pow(D[0].evaluate(M),de.evaluate(M))}],sqrt:[Bt,[Bt],function(M,D){return Math.sqrt(D[0].evaluate(M))}],log10:[Bt,[Bt],function(M,D){return Math.log(D[0].evaluate(M))/Math.LN10}],ln:[Bt,[Bt],function(M,D){return Math.log(D[0].evaluate(M))}],log2:[Bt,[Bt],function(M,D){return Math.log(D[0].evaluate(M))/Math.LN2}],sin:[Bt,[Bt],function(M,D){return Math.sin(D[0].evaluate(M))}],cos:[Bt,[Bt],function(M,D){return Math.cos(D[0].evaluate(M))}],tan:[Bt,[Bt],function(M,D){return Math.tan(D[0].evaluate(M))}],asin:[Bt,[Bt],function(M,D){return Math.asin(D[0].evaluate(M))}],acos:[Bt,[Bt],function(M,D){return Math.acos(D[0].evaluate(M))}],atan:[Bt,[Bt],function(M,D){return Math.atan(D[0].evaluate(M))}],min:[Bt,ms(Bt),function(M,D){return Math.min.apply(Math,D.map(function(K){return K.evaluate(M)}))}],max:[Bt,ms(Bt),function(M,D){return Math.max.apply(Math,D.map(function(K){return K.evaluate(M)}))}],abs:[Bt,[Bt],function(M,D){return Math.abs(D[0].evaluate(M))}],round:[Bt,[Bt],function(M,D){var K=D[0].evaluate(M);return K<0?-Math.round(-K):Math.round(K)}],floor:[Bt,[Bt],function(M,D){return Math.floor(D[0].evaluate(M))}],ceil:[Bt,[Bt],function(M,D){return Math.ceil(D[0].evaluate(M))}],"filter-==":[an,[qt,sn],function(M,D){var K=D[0],de=D[1];return M.properties()[K.value]===de.value}],"filter-id-==":[an,[sn],function(M,D){var K=D[0];return M.id()===K.value}],"filter-type-==":[an,[qt],function(M,D){var K=D[0];return M.geometryType()===K.value}],"filter-<":[an,[qt,sn],function(M,D){var K=D[0],de=D[1],Ee=M.properties()[K.value],Be=de.value;return typeof Ee==typeof Be&&Ee<Be}],"filter-id-<":[an,[sn],function(M,D){var K=D[0],de=M.id(),Ee=K.value;return typeof de==typeof Ee&&de<Ee}],"filter->":[an,[qt,sn],function(M,D){var K=D[0],de=D[1],Ee=M.properties()[K.value],Be=de.value;return typeof Ee==typeof Be&&Ee>Be}],"filter-id->":[an,[sn],function(M,D){var K=D[0],de=M.id(),Ee=K.value;return typeof de==typeof Ee&&de>Ee}],"filter-<=":[an,[qt,sn],function(M,D){var K=D[0],de=D[1],Ee=M.properties()[K.value],Be=de.value;return typeof Ee==typeof Be&&Ee<=Be}],"filter-id-<=":[an,[sn],function(M,D){var K=D[0],de=M.id(),Ee=K.value;return typeof de==typeof Ee&&de<=Ee}],"filter->=":[an,[qt,sn],function(M,D){var K=D[0],de=D[1],Ee=M.properties()[K.value],Be=de.value;return typeof Ee==typeof Be&&Ee>=Be}],"filter-id->=":[an,[sn],function(M,D){var K=D[0],de=M.id(),Ee=K.value;return typeof de==typeof Ee&&de>=Ee}],"filter-has":[an,[sn],function(M,D){return D[0].value in M.properties()}],"filter-has-id":[an,[],function(M){return null!==M.id()&&void 0!==M.id()}],"filter-type-in":[an,[Sn(qt)],function(M,D){return D[0].value.indexOf(M.geometryType())>=0}],"filter-id-in":[an,[Sn(sn)],function(M,D){return D[0].value.indexOf(M.id())>=0}],"filter-in-small":[an,[qt,Sn(sn)],function(M,D){var K=D[0];return D[1].value.indexOf(M.properties()[K.value])>=0}],"filter-in-large":[an,[qt,Sn(sn)],function(M,D){var K=D[0],de=D[1];return function(Ee,Be,Ye,at){for(;Ye<=at;){var mt=Ye+at>>1;if(Be[mt]===Ee)return!0;Be[mt]>Ee?at=mt-1:Ye=mt+1}return!1}(M.properties()[K.value],de.value,0,de.value.length-1)}],all:{type:an,overloads:[[[an,an],function(M,D){var de=D[1];return D[0].evaluate(M)&&de.evaluate(M)}],[ms(an),function(M,D){for(var K=0,de=D;K<de.length;K+=1)if(!de[K].evaluate(M))return!1;return!0}]]},any:{type:an,overloads:[[[an,an],function(M,D){var de=D[1];return D[0].evaluate(M)||de.evaluate(M)}],[ms(an),function(M,D){for(var K=0,de=D;K<de.length;K+=1)if(de[K].evaluate(M))return!0;return!1}]]},"!":[an,[an],function(M,D){return!D[0].evaluate(M)}],"is-supported-script":[an,[qt],function(M,D){var de=M.globals&&M.globals.isSupportedScript;return!de||de(D[0].evaluate(M))}],upcase:[qt,[qt],function(M,D){return D[0].evaluate(M).toUpperCase()}],downcase:[qt,[qt],function(M,D){return D[0].evaluate(M).toLowerCase()}],concat:[qt,ms(sn),function(M,D){return D.map(function(K){return Or(K.evaluate(M))}).join("")}],"resolved-locale":[qt,[Kt],function(M,D){return D[0].evaluate(M).resolvedLocale()}]});var es=function(M,D){var K;this.expression=M,this._warningHistory={},this._evaluator=new cn,this._defaultValue=D?"color"===(K=D).type&&vs(K.default)?new Gn(0,0,0,0):"color"===K.type?Gn.parse(K.default)||null:void 0===K.default?null:K.default:null,this._enumValues=D&&"enum"===D.type?D.values:null};function Al(M){return Array.isArray(M)&&M.length>0&&"string"==typeof M[0]&&M[0]in Vl}function ka(M,D){var Ee,Be,K=new zr(Vl,[],D?(Be={color:mn,string:qt,number:Bt,enum:qt,boolean:an,formatted:qn,resolvedImage:Fn},"array"===(Ee=D).type?Sn(Be[Ee.value]||sn,Ee.length):Be[Ee.type]):void 0),de=K.parse(M,void 0,void 0,void 0,D&&"string"===D.type?{typeAnnotation:"coerce"}:void 0);return de?Ac(new es(de,D)):Ls(K.errors)}es.prototype.evaluateWithoutErrorHandling=function(M,D,K,de,Ee,Be){return this._evaluator.globals=M,this._evaluator.feature=D,this._evaluator.featureState=K,this._evaluator.canonical=de,this._evaluator.availableImages=Ee||null,this._evaluator.formattedSection=Be,this.expression.evaluate(this._evaluator)},es.prototype.evaluate=function(M,D,K,de,Ee,Be){this._evaluator.globals=M,this._evaluator.feature=D||null,this._evaluator.featureState=K||null,this._evaluator.canonical=de,this._evaluator.availableImages=Ee||null,this._evaluator.formattedSection=Be||null;try{var Ye=this.expression.evaluate(this._evaluator);if(null==Ye||"number"==typeof Ye&&Ye!=Ye)return this._defaultValue;if(this._enumValues&&!(Ye in this._enumValues))throw new gn("Expected value to be one of "+Object.keys(this._enumValues).map(function(at){return JSON.stringify(at)}).join(", ")+", but found "+JSON.stringify(Ye)+" instead.");return Ye}catch(at){return this._warningHistory[at.message]||(this._warningHistory[at.message]=!0,typeof console<"u"&&console.warn(at.message)),this._defaultValue}};var Os=function(M,D){this.kind=M,this._styleExpression=D,this.isStateDependent="constant"!==M&&!pr(D.expression)};Os.prototype.evaluateWithoutErrorHandling=function(M,D,K,de,Ee,Be){return this._styleExpression.evaluateWithoutErrorHandling(M,D,K,de,Ee,Be)},Os.prototype.evaluate=function(M,D,K,de,Ee,Be){return this._styleExpression.evaluate(M,D,K,de,Ee,Be)};var sc=function(M,D,K,de){this.kind=M,this.zoomStops=K,this._styleExpression=D,this.isStateDependent="camera"!==M&&!pr(D.expression),this.interpolationType=de};function Mu(M,D){if("error"===(M=ka(M,D)).result)return M;var K=M.value.expression,de=br(K);if(!de&&!Ps(D))return Ls([new Ct("","data expressions not supported")]);var Ee=Lr(K,["zoom"]);if(!Ee&&!Hs(D))return Ls([new Ct("","zoom expressions not supported")]);var Be=Uo(K);return Be||Ee?Be instanceof Ct?Ls([Be]):Be instanceof Fa&&!ol(D)?Ls([new Ct("",'"interpolate" expressions cannot be used with this property')]):Ac(Be?new sc(de?"camera":"composite",M.value,Be.labels,Be instanceof Fa?Be.interpolation:void 0):new Os(de?"constant":"source",M.value)):Ls([new Ct("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}sc.prototype.evaluateWithoutErrorHandling=function(M,D,K,de,Ee,Be){return this._styleExpression.evaluateWithoutErrorHandling(M,D,K,de,Ee,Be)},sc.prototype.evaluate=function(M,D,K,de,Ee,Be){return this._styleExpression.evaluate(M,D,K,de,Ee,Be)},sc.prototype.interpolationFactor=function(M,D,K){return this.interpolationType?Fa.interpolationFactor(this.interpolationType,M,D,K):0};var Sc=function(M,D){this._parameters=M,this._specification=D,Mt(this,kc(this._parameters,this._specification))};function Uo(M){var D=null;if(M instanceof Ao)D=Uo(M.result);else if(M instanceof To)for(var K=0,de=M.args;K<de.length&&!(D=Uo(de[K]));K+=1);else(M instanceof Qr||M instanceof Fa)&&M.input instanceof In&&"zoom"===M.input.name&&(D=M);return D instanceof Ct||M.eachChild(function(Be){var Ye=Uo(Be);Ye instanceof Ct?D=Ye:!D&&Ye?D=new Ct("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):D&&Ye&&D!==Ye&&(D=new Ct("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),D}function ts(M){var D=M.key,K=M.value,de=M.valueSpec||{},Ee=M.objectElementValidators||{},Be=M.style,Ye=M.styleSpec,at=[],mt=ki(K);if("object"!==mt)return[new xt(D,K,"object expected, "+mt+" found")];for(var Et in K){var Lt=Et.split(".")[0],Wt=de[Lt]||de["*"],en=void 0;if(Ee[Lt])en=Ee[Lt];else if(de[Lt])en=Ho;else if(Ee["*"])en=Ee["*"];else{if(!de["*"]){at.push(new xt(D,K[Et],'unknown property "'+Et+'"'));continue}en=Ho}at=at.concat(en({key:(D&&D+".")+Et,value:K[Et],valueSpec:Wt,style:Be,styleSpec:Ye,object:K,objectKey:Et},K))}for(var Xt in de)Ee[Xt]||de[Xt].required&&void 0===de[Xt].default&&void 0===K[Xt]&&at.push(new xt(D,K,'missing required property "'+Xt+'"'));return at}function Qc(M){var D=M.value,K=M.valueSpec,de=M.style,Ee=M.styleSpec,Be=M.key,Ye=M.arrayElementValidator||Ho;if("array"!==ki(D))return[new xt(Be,D,"array expected, "+ki(D)+" found")];if(K.length&&D.length!==K.length)return[new xt(Be,D,"array length "+K.length+" expected, length "+D.length+" found")];if(K["min-length"]&&D.length<K["min-length"])return[new xt(Be,D,"array length at least "+K["min-length"]+" expected, length "+D.length+" found")];var at={type:K.value,values:K.values};Ee.$version<7&&(at.function=K.function),"object"===ki(K.value)&&(at=K.value);for(var mt=[],Et=0;Et<D.length;Et++)mt=mt.concat(Ye({array:D,arrayIndex:Et,value:D[Et],valueSpec:at,style:de,styleSpec:Ee,key:Be+"["+Et+"]"}));return mt}function Cc(M){var D=M.key,K=M.value,de=M.valueSpec,Ee=ki(K);return"number"===Ee&&K!=K&&(Ee="NaN"),"number"!==Ee?[new xt(D,K,"number expected, "+Ee+" found")]:"minimum"in de&&K<de.minimum?[new xt(D,K,K+" is less than the minimum value "+de.minimum)]:"maximum"in de&&K>de.maximum?[new xt(D,K,K+" is greater than the maximum value "+de.maximum)]:[]}function Gl(M){var D,K,de,Ee=M.valueSpec,Be=yt(M.value.type),Ye={},at="categorical"!==Be&&void 0===M.value.property,mt=!at,Et="array"===ki(M.value.stops)&&"array"===ki(M.value.stops[0])&&"object"===ki(M.value.stops[0][0]),Lt=ts({key:M.key,value:M.value,valueSpec:M.styleSpec.function,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{stops:function(Xt){if("identity"===Be)return[new xt(Xt.key,Xt.value,'identity function may not have a "stops" property')];var vn=[],bn=Xt.value;return vn=vn.concat(Qc({key:Xt.key,value:bn,valueSpec:Xt.valueSpec,style:Xt.style,styleSpec:Xt.styleSpec,arrayElementValidator:Wt})),"array"===ki(bn)&&0===bn.length&&vn.push(new xt(Xt.key,bn,"array must have at least one stop")),vn},default:function(Xt){return Ho({key:Xt.key,value:Xt.value,valueSpec:Ee,style:Xt.style,styleSpec:Xt.styleSpec})}}});return"identity"===Be&&at&&Lt.push(new xt(M.key,M.value,'missing required property "property"')),"identity"===Be||M.value.stops||Lt.push(new xt(M.key,M.value,'missing required property "stops"')),"exponential"===Be&&M.valueSpec.expression&&!ol(M.valueSpec)&&Lt.push(new xt(M.key,M.value,"exponential functions not supported")),M.styleSpec.$version>=8&&(mt&&!Ps(M.valueSpec)?Lt.push(new xt(M.key,M.value,"property functions not supported")):at&&!Hs(M.valueSpec)&&Lt.push(new xt(M.key,M.value,"zoom functions not supported"))),"categorical"!==Be&&!Et||void 0!==M.value.property||Lt.push(new xt(M.key,M.value,'"property" property is required')),Lt;function Wt(Xt){var vn=[],bn=Xt.value,zn=Xt.key;if("array"!==ki(bn))return[new xt(zn,bn,"array expected, "+ki(bn)+" found")];if(2!==bn.length)return[new xt(zn,bn,"array length 2 expected, length "+bn.length+" found")];if(Et){if("object"!==ki(bn[0]))return[new xt(zn,bn,"object expected, "+ki(bn[0])+" found")];if(void 0===bn[0].zoom)return[new xt(zn,bn,"object stop key must have zoom")];if(void 0===bn[0].value)return[new xt(zn,bn,"object stop key must have value")];if(de&&de>yt(bn[0].zoom))return[new xt(zn,bn[0].zoom,"stop zoom values must appear in ascending order")];yt(bn[0].zoom)!==de&&(de=yt(bn[0].zoom),K=void 0,Ye={}),vn=vn.concat(ts({key:zn+"[0]",value:bn[0],valueSpec:{zoom:{}},style:Xt.style,styleSpec:Xt.styleSpec,objectElementValidators:{zoom:Cc,value:en}}))}else vn=vn.concat(en({key:zn+"[0]",value:bn[0],valueSpec:{},style:Xt.style,styleSpec:Xt.styleSpec},bn));return Al(Pt(bn[1]))?vn.concat([new xt(zn+"[1]",bn[1],"expressions are not allowed in function stops.")]):vn.concat(Ho({key:zn+"[1]",value:bn[1],valueSpec:Ee,style:Xt.style,styleSpec:Xt.styleSpec}))}function en(Xt,vn){var bn=ki(Xt.value),zn=yt(Xt.value),Rn=null!==Xt.value?Xt.value:vn;if(D){if(bn!==D)return[new xt(Xt.key,Rn,bn+" stop domain type must match previous stop domain type "+D)]}else D=bn;if("number"!==bn&&"string"!==bn&&"boolean"!==bn)return[new xt(Xt.key,Rn,"stop domain value must be a number, string, or boolean")];if("number"!==bn&&"categorical"!==Be){var Jn="number expected, "+bn+" found";return Ps(Ee)&&void 0===Be&&(Jn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new xt(Xt.key,Rn,Jn)]}return"categorical"!==Be||"number"!==bn||isFinite(zn)&&Math.floor(zn)===zn?"categorical"!==Be&&"number"===bn&&void 0!==K&&zn<K?[new xt(Xt.key,Rn,"stop domain values must appear in ascending order")]:(K=zn,"categorical"===Be&&zn in Ye?[new xt(Xt.key,Rn,"stop domain values must be unique")]:(Ye[zn]=!0,[])):[new xt(Xt.key,Rn,"integer expected, found "+zn)]}}function sl(M){var D=("property"===M.expressionContext?Mu:ka)(Pt(M.value),M.valueSpec);if("error"===D.result)return D.value.map(function(de){return new xt(""+M.key+de.key,M.value,de.message)});var K=D.value.expression||D.value._styleExpression.expression;if("property"===M.expressionContext&&"text-font"===M.propertyKey&&!K.outputDefined())return[new xt(M.key,M.value,'Invalid data expression for "'+M.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===M.expressionContext&&"layout"===M.propertyType&&!pr(K))return[new xt(M.key,M.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===M.expressionContext&&!pr(K))return[new xt(M.key,M.value,'"feature-state" data expressions are not supported with filters.')];if(M.expressionContext&&0===M.expressionContext.indexOf("cluster")){if(!Lr(K,["zoom","feature-state"]))return[new xt(M.key,M.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===M.expressionContext&&!br(K))return[new xt(M.key,M.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function kl(M){var D=M.key,K=M.value,de=M.valueSpec,Ee=[];return Array.isArray(de.values)?-1===de.values.indexOf(yt(K))&&Ee.push(new xt(D,K,"expected one of ["+de.values.join(", ")+"], "+JSON.stringify(K)+" found")):-1===Object.keys(de.values).indexOf(yt(K))&&Ee.push(new xt(D,K,"expected one of ["+Object.keys(de.values).join(", ")+"], "+JSON.stringify(K)+" found")),Ee}function Lo(M){if(!0===M||!1===M)return!0;if(!Array.isArray(M)||0===M.length)return!1;switch(M[0]){case"has":return M.length>=2&&"$id"!==M[1]&&"$type"!==M[1];case"in":return M.length>=3&&("string"!=typeof M[1]||Array.isArray(M[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==M.length||Array.isArray(M[1])||Array.isArray(M[2]);case"any":case"all":for(var D=0,K=M.slice(1);D<K.length;D+=1){var de=K[D];if(!Lo(de)&&"boolean"!=typeof de)return!1}return!0;default:return!0}}Sc.deserialize=function(M){return new Sc(M._parameters,M._specification)},Sc.serialize=function(M){return{_parameters:M._parameters,_specification:M._specification}};var ll={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function lc(M){if(null==M)return{filter:function(){return!0},needGeometry:!1};Lo(M)||(M=cl(M));var D=ka(M,ll);if("error"===D.result)throw new Error(D.value.map(function(K){return K.key+": "+K.message}).join(", "));return{filter:function(K,de,Ee){return D.value.evaluate(K,de,{},Ee)},needGeometry:qi(M)}}function Ec(M,D){return M<D?-1:M>D?1:0}function qi(M){if(!Array.isArray(M))return!1;if("within"===M[0])return!0;for(var D=1;D<M.length;D++)if(qi(M[D]))return!0;return!1}function cl(M){if(!M)return!0;var D,K=M[0];return M.length<=1?"any"!==K:"=="===K?lo(M[1],M[2],"=="):"!="===K?Ui(lo(M[1],M[2],"==")):"<"===K||">"===K||"<="===K||">="===K?lo(M[1],M[2],K):"any"===K?(D=M.slice(1),["any"].concat(D.map(cl))):"all"===K?["all"].concat(M.slice(1).map(cl)):"none"===K?["all"].concat(M.slice(1).map(cl).map(Ui)):"in"===K?ys(M[1],M.slice(2)):"!in"===K?Ui(ys(M[1],M.slice(2))):"has"===K?Di(M[1]):"!has"===K?Ui(Di(M[1])):"within"!==K||M}function lo(M,D,K){switch(M){case"$type":return["filter-type-"+K,D];case"$id":return["filter-id-"+K,D];default:return["filter-"+K,M,D]}}function ys(M,D){if(0===D.length)return!1;switch(M){case"$type":return["filter-type-in",["literal",D]];case"$id":return["filter-id-in",["literal",D]];default:return D.length>200&&!D.some(function(K){return typeof K!=typeof D[0]})?["filter-in-large",M,["literal",D.sort(Ec)]]:["filter-in-small",M,["literal",D]]}}function Di(M){switch(M){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",M]}}function Ui(M){return["!",M]}function Vo(M){return Lo(Pt(M.value))?sl(Mt({},M,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ul(M)}function ul(M){var D=M.value,K=M.key;if("array"!==ki(D))return[new xt(K,D,"array expected, "+ki(D)+" found")];var de,Ee=M.styleSpec,Be=[];if(D.length<1)return[new xt(K,D,"filter array must have at least 1 element")];switch(Be=Be.concat(kl({key:K+"[0]",value:D[0],valueSpec:Ee.filter_operator,style:M.style,styleSpec:M.styleSpec})),yt(D[0])){case"<":case"<=":case">":case">=":D.length>=2&&"$type"===yt(D[1])&&Be.push(new xt(K,D,'"$type" cannot be use with operator "'+D[0]+'"'));case"==":case"!=":3!==D.length&&Be.push(new xt(K,D,'filter array for operator "'+D[0]+'" must have 3 elements'));case"in":case"!in":D.length>=2&&"string"!==(de=ki(D[1]))&&Be.push(new xt(K+"[1]",D[1],"string expected, "+de+" found"));for(var Ye=2;Ye<D.length;Ye++)de=ki(D[Ye]),"$type"===yt(D[1])?Be=Be.concat(kl({key:K+"["+Ye+"]",value:D[Ye],valueSpec:Ee.geometry_type,style:M.style,styleSpec:M.styleSpec})):"string"!==de&&"number"!==de&&"boolean"!==de&&Be.push(new xt(K+"["+Ye+"]",D[Ye],"string, number, or boolean expected, "+de+" found"));break;case"any":case"all":case"none":for(var at=1;at<D.length;at++)Be=Be.concat(ul({key:K+"["+at+"]",value:D[at],style:M.style,styleSpec:M.styleSpec}));break;case"has":case"!has":de=ki(D[1]),2!==D.length?Be.push(new xt(K,D,'filter array for "'+D[0]+'" operator must have 2 elements')):"string"!==de&&Be.push(new xt(K+"[1]",D[1],"string expected, "+de+" found"));break;case"within":de=ki(D[1]),2!==D.length?Be.push(new xt(K,D,'filter array for "'+D[0]+'" operator must have 2 elements')):"object"!==de&&Be.push(new xt(K+"[1]",D[1],"object expected, "+de+" found"))}return Be}function Hl(M,D){var K=M.key,de=M.style,Ee=M.styleSpec,Be=M.value,Ye=M.objectKey,at=Ee[D+"_"+M.layerType];if(!at)return[];var mt=Ye.match(/^(.*)-transition$/);if("paint"===D&&mt&&at[mt[1]]&&at[mt[1]].transition)return Ho({key:K,value:Be,valueSpec:Ee.transition,style:de,styleSpec:Ee});var Et,Lt=M.valueSpec||at[Ye];if(!Lt)return[new xt(K,Be,'unknown property "'+Ye+'"')];if("string"===ki(Be)&&Ps(Lt)&&!Lt.tokens&&(Et=/^{([^}]+)}$/.exec(Be)))return[new xt(K,Be,'"'+Ye+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(Et[1])+" }`.")];var Wt=[];return"symbol"===M.layerType&&("text-field"===Ye&&de&&!de.glyphs&&Wt.push(new xt(K,Be,'use of "text-field" requires a style "glyphs" property')),"text-font"===Ye&&vs(Pt(Be))&&"identity"===yt(Be.type)&&Wt.push(new xt(K,Be,'"text-font" does not support identity functions'))),Wt.concat(Ho({key:M.key,value:Be,valueSpec:Lt,style:de,styleSpec:Ee,expressionContext:"property",propertyType:D,propertyKey:Ye}))}function cc(M){return Hl(M,"paint")}function ql(M){return Hl(M,"layout")}function Ic(M){var D=[],K=M.value,de=M.key,Ee=M.style,Be=M.styleSpec;K.type||K.ref||D.push(new xt(de,K,'either "type" or "ref" is required'));var Ye,at=yt(K.type),mt=yt(K.ref);if(K.id)for(var Et=yt(K.id),Lt=0;Lt<M.arrayIndex;Lt++){var Wt=Ee.layers[Lt];yt(Wt.id)===Et&&D.push(new xt(de,K.id,'duplicate layer id "'+K.id+'", previously used at line '+Wt.id.__line__))}if("ref"in K)["type","source","source-layer","filter","layout"].forEach(function(vn){vn in K&&D.push(new xt(de,K[vn],'"'+vn+'" is prohibited for ref layers'))}),Ee.layers.forEach(function(vn){yt(vn.id)===mt&&(Ye=vn)}),Ye?Ye.ref?D.push(new xt(de,K.ref,"ref cannot reference another ref layer")):at=yt(Ye.type):D.push(new xt(de,K.ref,'ref layer "'+mt+'" not found'));else if("background"!==at)if(K.source){var en=Ee.sources&&Ee.sources[K.source],Xt=en&&yt(en.type);en?"vector"===Xt&&"raster"===at?D.push(new xt(de,K.source,'layer "'+K.id+'" requires a raster source')):"raster"===Xt&&"raster"!==at?D.push(new xt(de,K.source,'layer "'+K.id+'" requires a vector source')):"vector"!==Xt||K["source-layer"]?"raster-dem"===Xt&&"hillshade"!==at?D.push(new xt(de,K.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==at||!K.paint||!K.paint["line-gradient"]||"geojson"===Xt&&en.lineMetrics||D.push(new xt(de,K,'layer "'+K.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):D.push(new xt(de,K,'layer "'+K.id+'" must specify a "source-layer"')):D.push(new xt(de,K.source,'source "'+K.source+'" not found'))}else D.push(new xt(de,K,'missing required property "source"'));return D=D.concat(ts({key:de,value:K,valueSpec:Be.layer,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Ho({key:de+".type",value:K.type,valueSpec:Be.layer.type,style:M.style,styleSpec:M.styleSpec,object:K,objectKey:"type"})},filter:Vo,layout:function(vn){return ts({layer:K,key:vn.key,value:vn.value,style:vn.style,styleSpec:vn.styleSpec,objectElementValidators:{"*":function(bn){return ql(Mt({layerType:at},bn))}}})},paint:function(vn){return ts({layer:K,key:vn.key,value:vn.value,style:vn.style,styleSpec:vn.styleSpec,objectElementValidators:{"*":function(bn){return cc(Mt({layerType:at},bn))}}})}}}))}function Go(M){var D=M.value,K=M.key,de=ki(D);return"string"!==de?[new xt(K,D,"string expected, "+de+" found")]:[]}var qs={promoteId:function(M){var D=M.key,K=M.value;if("string"===ki(K))return Go({key:D,value:K});var de=[];for(var Ee in K)de.push.apply(de,Go({key:D+"."+Ee,value:K[Ee]}));return de}};function Ml(M){var D=M.value,K=M.key,de=M.styleSpec,Ee=M.style;if(!D.type)return[new xt(K,D,'"type" is required')];var Be,Ye=yt(D.type);switch(Ye){case"vector":case"raster":case"raster-dem":return ts({key:K,value:D,valueSpec:de["source_"+Ye.replace("-","_")],style:M.style,styleSpec:de,objectElementValidators:qs});case"geojson":if(Be=ts({key:K,value:D,valueSpec:de.source_geojson,style:Ee,styleSpec:de,objectElementValidators:qs}),D.cluster)for(var at in D.clusterProperties){var mt=D.clusterProperties[at],Et=mt[0],Wt="string"==typeof Et?[Et,["accumulated"],["get",at]]:Et;Be.push.apply(Be,sl({key:K+"."+at+".map",value:mt[1],expressionContext:"cluster-map"})),Be.push.apply(Be,sl({key:K+"."+at+".reduce",value:Wt,expressionContext:"cluster-reduce"}))}return Be;case"video":return ts({key:K,value:D,valueSpec:de.source_video,style:Ee,styleSpec:de});case"image":return ts({key:K,value:D,valueSpec:de.source_image,style:Ee,styleSpec:de});case"canvas":return[new xt(K,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return kl({key:K+".type",value:D.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:Ee,styleSpec:de})}}function yo(M){var D=M.value,K=M.styleSpec,de=K.light,Ee=M.style,Be=[],Ye=ki(D);if(void 0===D)return Be;if("object"!==Ye)return Be.concat([new xt("light",D,"object expected, "+Ye+" found")]);for(var at in D){var mt=at.match(/^(.*)-transition$/);Be=Be.concat(mt&&de[mt[1]]&&de[mt[1]].transition?Ho({key:at,value:D[at],valueSpec:K.transition,style:Ee,styleSpec:K}):de[at]?Ho({key:at,value:D[at],valueSpec:de[at],style:Ee,styleSpec:K}):[new xt(at,D[at],'unknown property "'+at+'"')])}return Be}var Wl={"*":function(){return[]},array:Qc,boolean:function(M){var D=M.value,K=M.key,de=ki(D);return"boolean"!==de?[new xt(K,D,"boolean expected, "+de+" found")]:[]},number:Cc,color:function(M){var D=M.key,K=M.value,de=ki(K);return"string"!==de?[new xt(D,K,"color expected, "+de+" found")]:null===Vn(K)?[new xt(D,K,'color expected, "'+K+'" found')]:[]},constants:At,enum:kl,filter:Vo,function:Gl,layer:Ic,object:ts,source:Ml,light:yo,string:Go,formatted:function(M){return 0===Go(M).length?[]:sl(M)},resolvedImage:function(M){return 0===Go(M).length?[]:sl(M)}};function Ho(M){var D=M.value,K=M.valueSpec,de=M.styleSpec;return K.expression&&vs(yt(D))?Gl(M):K.expression&&Al(Pt(D))?sl(M):K.type&&Wl[K.type]?Wl[K.type](M):ts(Mt({},M,{valueSpec:K.type?de[K.type]:K}))}function Ka(M){var D=M.value,K=M.key,de=Go(M);return de.length||(-1===D.indexOf("{fontstack}")&&de.push(new xt(K,D,'"glyphs" url must include a "{fontstack}" token')),-1===D.indexOf("{range}")&&de.push(new xt(K,D,'"glyphs" url must include a "{range}" token'))),de}function eo(M,D){void 0===D&&(D=tt);var K=[];return K=K.concat(Ho({key:"",value:M,valueSpec:D.$root,styleSpec:D,style:M,objectElementValidators:{glyphs:Ka,"*":function(){return[]}}})),M.constants&&(K=K.concat(At({key:"constants",value:M.constants,style:M,styleSpec:D}))),Wi(K)}function Wi(M){return[].concat(M).sort(function(D,K){return D.line-K.line})}function Ha(M){return function(){for(var D=[],K=arguments.length;K--;)D[K]=arguments[K];return Wi(M.apply(this,D))}}eo.source=Ha(Ml),eo.light=Ha(yo),eo.layer=Ha(Ic),eo.filter=Ha(Vo),eo.paintProperty=Ha(cc),eo.layoutProperty=Ha(ql);var Ws=eo,Sl=Ws.light,co=Ws.paintProperty,hl=Ws.layoutProperty;function uo(M,D){var K=!1;if(D&&D.length)for(var de=0,Ee=D;de<Ee.length;de+=1)M.fire(new He(new Error(Ee[de].message))),K=!0;return K}var Yl=ko,Po=3;function ko(M,D,K){var de=this.cells=[];if(M instanceof ArrayBuffer){this.arrayBuffer=M;var Ee=new Int32Array(this.arrayBuffer);M=Ee[0],this.d=(D=Ee[1])+2*(K=Ee[2]);for(var Be=0;Be<this.d*this.d;Be++){var Ye=Ee[Po+Be],at=Ee[Po+Be+1];de.push(Ye===at?null:Ee.subarray(Ye,at))}var Et=Ee[Po+de.length+1];this.keys=Ee.subarray(Ee[Po+de.length],Et),this.bboxes=Ee.subarray(Et),this.insert=this._insertReadonly}else{this.d=D+2*K;for(var Lt=0;Lt<this.d*this.d;Lt++)de.push([]);this.keys=[],this.bboxes=[]}this.n=D,this.extent=M,this.padding=K,this.scale=D/M,this.uid=0;var Wt=K/D*M;this.min=-Wt,this.max=M+Wt}ko.prototype.insert=function(M,D,K,de,Ee){this._forEachCell(D,K,de,Ee,this._insertCell,this.uid++),this.keys.push(M),this.bboxes.push(D),this.bboxes.push(K),this.bboxes.push(de),this.bboxes.push(Ee)},ko.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ko.prototype._insertCell=function(M,D,K,de,Ee,Be){this.cells[Ee].push(Be)},ko.prototype.query=function(M,D,K,de,Ee){var Be=this.min,Ye=this.max;if(M<=Be&&D<=Be&&Ye<=K&&Ye<=de&&!Ee)return Array.prototype.slice.call(this.keys);var at=[];return this._forEachCell(M,D,K,de,this._queryCell,at,{},Ee),at},ko.prototype._queryCell=function(M,D,K,de,Ee,Be,Ye,at){var mt=this.cells[Ee];if(null!==mt)for(var Et=this.keys,Lt=this.bboxes,Wt=0;Wt<mt.length;Wt++){var en=mt[Wt];if(void 0===Ye[en]){var Xt=4*en;(at?at(Lt[Xt+0],Lt[Xt+1],Lt[Xt+2],Lt[Xt+3]):M<=Lt[Xt+2]&&D<=Lt[Xt+3]&&K>=Lt[Xt+0]&&de>=Lt[Xt+1])?(Ye[en]=!0,Be.push(Et[en])):Ye[en]=!1}}},ko.prototype._forEachCell=function(M,D,K,de,Ee,Be,Ye,at){for(var mt=this._convertToCellCoord(M),Et=this._convertToCellCoord(D),Lt=this._convertToCellCoord(K),Wt=this._convertToCellCoord(de),en=mt;en<=Lt;en++)for(var Xt=Et;Xt<=Wt;Xt++){var vn=this.d*Xt+en;if((!at||at(this._convertFromCellCoord(en),this._convertFromCellCoord(Xt),this._convertFromCellCoord(en+1),this._convertFromCellCoord(Xt+1)))&&Ee.call(this,M,D,K,de,vn,Be,Ye,at))return}},ko.prototype._convertFromCellCoord=function(M){return(M-this.padding)/this.scale},ko.prototype._convertToCellCoord=function(M){return Math.max(0,Math.min(this.d-1,Math.floor(M*this.scale)+this.padding))},ko.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var M=this.cells,D=Po+this.cells.length+1+1,K=0,de=0;de<this.cells.length;de++)K+=this.cells[de].length;var Ee=new Int32Array(D+K+this.keys.length+this.bboxes.length);Ee[0]=this.extent,Ee[1]=this.n,Ee[2]=this.padding;for(var Be=D,Ye=0;Ye<M.length;Ye++){var at=M[Ye];Ee[Po+Ye]=Be,Ee.set(at,Be),Be+=at.length}return Ee[Po+M.length]=Be,Ee.set(this.keys,Be),Ee[Po+M.length+1]=Be+=this.keys.length,Ee.set(this.bboxes,Be),Be+=this.bboxes.length,Ee.buffer};var qo=r.ImageData,na=r.ImageBitmap,ns={};function $r(M,D,K){void 0===K&&(K={}),Object.defineProperty(D,"_classRegistryKey",{value:M,writeable:!1}),ns[M]={klass:D,omit:K.omit||[],shallow:K.shallow||[]}}for(var fl in $r("Object",Object),Yl.serialize=function(M,D){var K=M.toArrayBuffer();return D&&D.push(K),{buffer:K}},Yl.deserialize=function(M){return new Yl(M.buffer)},$r("Grid",Yl),$r("Color",Gn),$r("Error",Error),$r("ResolvedImage",mr),$r("StylePropertyFunction",Sc),$r("StyleExpression",es,{omit:["_evaluator"]}),$r("ZoomDependentExpression",sc),$r("ZoomConstantExpression",Os),$r("CompoundExpression",In,{omit:["_evaluate"]}),Vl)Vl[fl]._classRegistryKey||$r("Expression_"+fl,Vl[fl]);function Lc(M){return M&&typeof ArrayBuffer<"u"&&(M instanceof ArrayBuffer||M.constructor&&"ArrayBuffer"===M.constructor.name)}function Rs(M){return na&&M instanceof na}function Ds(M,D){if(null==M||"boolean"==typeof M||"number"==typeof M||"string"==typeof M||M instanceof Boolean||M instanceof Number||M instanceof String||M instanceof Date||M instanceof RegExp)return M;if(Lc(M)||Rs(M))return D&&D.push(M),M;if(ArrayBuffer.isView(M)){var K=M;return D&&D.push(K.buffer),K}if(M instanceof qo)return D&&D.push(M.data.buffer),M;if(Array.isArray(M)){for(var de=[],Ee=0,Be=M;Ee<Be.length;Ee+=1)de.push(Ds(Be[Ee],D));return de}if("object"==typeof M){var at=M.constructor,mt=at._classRegistryKey;if(!mt)throw new Error("can't serialize object of unregistered class");var Et=at.serialize?at.serialize(M,D):{};if(!at.serialize){for(var Lt in M)if(M.hasOwnProperty(Lt)&&!(ns[mt].omit.indexOf(Lt)>=0)){var Wt=M[Lt];Et[Lt]=ns[mt].shallow.indexOf(Lt)>=0?Wt:Ds(Wt,D)}M instanceof Error&&(Et.message=M.message)}if(Et.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==mt&&(Et.$name=mt),Et}throw new Error("can't serialize object of type "+typeof M)}function Cl(M){if(null==M||"boolean"==typeof M||"number"==typeof M||"string"==typeof M||M instanceof Boolean||M instanceof Number||M instanceof String||M instanceof Date||M instanceof RegExp||Lc(M)||Rs(M)||ArrayBuffer.isView(M)||M instanceof qo)return M;if(Array.isArray(M))return M.map(Cl);if("object"==typeof M){var D=M.$name||"Object",K=ns[D].klass;if(!K)throw new Error("can't deserialize unregistered class "+D);if(K.deserialize)return K.deserialize(M);for(var de=Object.create(K.prototype),Ee=0,Be=Object.keys(M);Ee<Be.length;Ee+=1){var Ye=Be[Ee];if("$name"!==Ye){var at=M[Ye];de[Ye]=ns[D].shallow.indexOf(Ye)>=0?at:Cl(at)}}return de}throw new Error("can't deserialize object of type "+typeof M)}var rs=function(){this.first=!0};rs.prototype.update=function(M,D){var K=Math.floor(M);return this.first?(this.first=!1,this.lastIntegerZoom=K,this.lastIntegerZoomTime=0,this.lastZoom=M,this.lastFloorZoom=K,!0):(this.lastFloorZoom>K?(this.lastIntegerZoom=K+1,this.lastIntegerZoomTime=D):this.lastFloorZoom<K&&(this.lastIntegerZoom=K,this.lastIntegerZoomTime=D),M!==this.lastZoom&&(this.lastZoom=M,this.lastFloorZoom=K,!0))};var Br={"Latin-1 Supplement":function(M){return M>=128&&M<=255},Arabic:function(M){return M>=1536&&M<=1791},"Arabic Supplement":function(M){return M>=1872&&M<=1919},"Arabic Extended-A":function(M){return M>=2208&&M<=2303},"Hangul Jamo":function(M){return M>=4352&&M<=4607},"Unified Canadian Aboriginal Syllabics":function(M){return M>=5120&&M<=5759},Khmer:function(M){return M>=6016&&M<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(M){return M>=6320&&M<=6399},"General Punctuation":function(M){return M>=8192&&M<=8303},"Letterlike Symbols":function(M){return M>=8448&&M<=8527},"Number Forms":function(M){return M>=8528&&M<=8591},"Miscellaneous Technical":function(M){return M>=8960&&M<=9215},"Control Pictures":function(M){return M>=9216&&M<=9279},"Optical Character Recognition":function(M){return M>=9280&&M<=9311},"Enclosed Alphanumerics":function(M){return M>=9312&&M<=9471},"Geometric Shapes":function(M){return M>=9632&&M<=9727},"Miscellaneous Symbols":function(M){return M>=9728&&M<=9983},"Miscellaneous Symbols and Arrows":function(M){return M>=11008&&M<=11263},"CJK Radicals Supplement":function(M){return M>=11904&&M<=12031},"Kangxi Radicals":function(M){return M>=12032&&M<=12255},"Ideographic Description Characters":function(M){return M>=12272&&M<=12287},"CJK Symbols and Punctuation":function(M){return M>=12288&&M<=12351},Hiragana:function(M){return M>=12352&&M<=12447},Katakana:function(M){return M>=12448&&M<=12543},Bopomofo:function(M){return M>=12544&&M<=12591},"Hangul Compatibility Jamo":function(M){return M>=12592&&M<=12687},Kanbun:function(M){return M>=12688&&M<=12703},"Bopomofo Extended":function(M){return M>=12704&&M<=12735},"CJK Strokes":function(M){return M>=12736&&M<=12783},"Katakana Phonetic Extensions":function(M){return M>=12784&&M<=12799},"Enclosed CJK Letters and Months":function(M){return M>=12800&&M<=13055},"CJK Compatibility":function(M){return M>=13056&&M<=13311},"CJK Unified Ideographs Extension A":function(M){return M>=13312&&M<=19903},"Yijing Hexagram Symbols":function(M){return M>=19904&&M<=19967},"CJK Unified Ideographs":function(M){return M>=19968&&M<=40959},"Yi Syllables":function(M){return M>=40960&&M<=42127},"Yi Radicals":function(M){return M>=42128&&M<=42191},"Hangul Jamo Extended-A":function(M){return M>=43360&&M<=43391},"Hangul Syllables":function(M){return M>=44032&&M<=55215},"Hangul Jamo Extended-B":function(M){return M>=55216&&M<=55295},"Private Use Area":function(M){return M>=57344&&M<=63743},"CJK Compatibility Ideographs":function(M){return M>=63744&&M<=64255},"Arabic Presentation Forms-A":function(M){return M>=64336&&M<=65023},"Vertical Forms":function(M){return M>=65040&&M<=65055},"CJK Compatibility Forms":function(M){return M>=65072&&M<=65103},"Small Form Variants":function(M){return M>=65104&&M<=65135},"Arabic Presentation Forms-B":function(M){return M>=65136&&M<=65279},"Halfwidth and Fullwidth Forms":function(M){return M>=65280&&M<=65519}};function Pc(M){for(var D=0,K=M;D<K.length;D+=1)if(xs(K[D].charCodeAt(0)))return!0;return!1}function xs(M){return!(746!==M&&747!==M&&(M<4352||!(Br["Bopomofo Extended"](M)||Br.Bopomofo(M)||Br["CJK Compatibility Forms"](M)&&!(M>=65097&&M<=65103)||Br["CJK Compatibility Ideographs"](M)||Br["CJK Compatibility"](M)||Br["CJK Radicals Supplement"](M)||Br["CJK Strokes"](M)||!(!Br["CJK Symbols and Punctuation"](M)||M>=12296&&M<=12305||M>=12308&&M<=12319||12336===M)||Br["CJK Unified Ideographs Extension A"](M)||Br["CJK Unified Ideographs"](M)||Br["Enclosed CJK Letters and Months"](M)||Br["Hangul Compatibility Jamo"](M)||Br["Hangul Jamo Extended-A"](M)||Br["Hangul Jamo Extended-B"](M)||Br["Hangul Jamo"](M)||Br["Hangul Syllables"](M)||Br.Hiragana(M)||Br["Ideographic Description Characters"](M)||Br.Kanbun(M)||Br["Kangxi Radicals"](M)||Br["Katakana Phonetic Extensions"](M)||Br.Katakana(M)&&12540!==M||!(!Br["Halfwidth and Fullwidth Forms"](M)||65288===M||65289===M||65293===M||M>=65306&&M<=65310||65339===M||65341===M||65343===M||M>=65371&&M<=65503||65507===M||M>=65512&&M<=65519)||!(!Br["Small Form Variants"](M)||M>=65112&&M<=65118||M>=65123&&M<=65126)||Br["Unified Canadian Aboriginal Syllabics"](M)||Br["Unified Canadian Aboriginal Syllabics Extended"](M)||Br["Vertical Forms"](M)||Br["Yijing Hexagram Symbols"](M)||Br["Yi Syllables"](M)||Br["Yi Radicals"](M))))}function qa(M){return!(xs(M)||(D=M,Br["Latin-1 Supplement"](D)&&(167===D||169===D||174===D||177===D||188===D||189===D||190===D||215===D||247===D)||Br["General Punctuation"](D)&&(8214===D||8224===D||8225===D||8240===D||8241===D||8251===D||8252===D||8258===D||8263===D||8264===D||8265===D||8273===D)||Br["Letterlike Symbols"](D)||Br["Number Forms"](D)||Br["Miscellaneous Technical"](D)&&(D>=8960&&D<=8967||D>=8972&&D<=8991||D>=8996&&D<=9e3||9003===D||D>=9085&&D<=9114||D>=9150&&D<=9165||9167===D||D>=9169&&D<=9179||D>=9186&&D<=9215)||Br["Control Pictures"](D)&&9251!==D||Br["Optical Character Recognition"](D)||Br["Enclosed Alphanumerics"](D)||Br["Geometric Shapes"](D)||Br["Miscellaneous Symbols"](D)&&!(D>=9754&&D<=9759)||Br["Miscellaneous Symbols and Arrows"](D)&&(D>=11026&&D<=11055||D>=11088&&D<=11097||D>=11192&&D<=11243)||Br["CJK Symbols and Punctuation"](D)||Br.Katakana(D)||Br["Private Use Area"](D)||Br["CJK Compatibility Forms"](D)||Br["Small Form Variants"](D)||Br["Halfwidth and Fullwidth Forms"](D)||8734===D||8756===D||8757===D||D>=9984&&D<=10087||D>=10102&&D<=10131||65532===D||65533===D));var D}function dl(M){return Br.Arabic(M)||Br["Arabic Supplement"](M)||Br["Arabic Extended-A"](M)||Br["Arabic Presentation Forms-A"](M)||Br["Arabic Presentation Forms-B"](M)}function Wo(M){return M>=1424&&M<=2303||Br["Arabic Presentation Forms-A"](M)||Br["Arabic Presentation Forms-B"](M)}function _s(M,D){return!(!D&&Wo(M)||M>=2304&&M<=3583||M>=3840&&M<=4255||Br.Khmer(M))}function ho(M){for(var D=0,K=M;D<K.length;D+=1)if(Wo(K[D].charCodeAt(0)))return!0;return!1}var bs="deferred",ws="loading",Ys="loaded",Zs=null,zi="unavailable",ja=null,Oo=function(M){M&&"string"==typeof M&&M.indexOf("NetworkError")>-1&&(zi="error"),Zs&&Zs(M)};function zs(){Ua.fire(new Ge("pluginStateChange",{pluginStatus:zi,pluginURL:ja}))}var Ua=new ut,Zl=function(){return zi},uc=function(){if(zi!==bs||!ja)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");zi=ws,zs(),ja&&Ht({url:ja},function(M){M?Oo(M):(zi=Ys,zs())})},xo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return zi===Ys||null!=xo.applyArabicShaping},isLoading:function(){return zi===ws},setState:function(M){zi=M.pluginStatus,ja=M.pluginURL},isParsed:function(){return null!=xo.applyArabicShaping&&null!=xo.processBidirectionalText&&null!=xo.processStyledBidirectionalText},getPluginURL:function(){return ja}},Ii=function(M,D){this.zoom=M,D?(this.now=D.now,this.fadeDuration=D.fadeDuration,this.zoomHistory=D.zoomHistory,this.transition=D.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new rs,this.transition={})};Ii.prototype.isSupportedScript=function(M){return function(D,K){for(var de=0,Ee=D;de<Ee.length;de+=1)if(!_s(Ee[de].charCodeAt(0),K))return!1;return!0}(M,xo.isLoaded())},Ii.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Ii.prototype.getCrossfadeParameters=function(){var M=this.zoom,D=M-Math.floor(M),K=this.crossFadingFactor();return M>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:D+(1-D)*K}:{fromScale:.5,toScale:1,t:1-(1-K)*D}};var Fs=function(M,D){this.property=M,this.value=D,this.expression=function(K,de){if(vs(K))return new Sc(K,de);if(Al(K)){var Ee=Mu(K,de);if("error"===Ee.result)throw new Error(Ee.value.map(function(Ye){return Ye.key+": "+Ye.message}).join(", "));return Ee.value}var Be=K;return"string"==typeof K&&"color"===de.type&&(Be=Gn.parse(K)),{kind:"constant",evaluate:function(){return Be}}}(void 0===D?M.specification.default:D,M.specification)};Fs.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Fs.prototype.possiblyEvaluate=function(M,D,K){return this.property.possiblyEvaluate(this,M,D,K)};var Xs=function(M){this.property=M,this.value=new Fs(M,void 0)};Xs.prototype.transitioned=function(M,D){return new Ks(this.property,this.value,D,u({},M.transition,this.transition),M.now)},Xs.prototype.untransitioned=function(){return new Ks(this.property,this.value,null,{},0)};var Ts=function(M){this._properties=M,this._values=Object.create(M.defaultTransitionablePropertyValues)};Ts.prototype.getValue=function(M){return C(this._values[M].value.value)},Ts.prototype.setValue=function(M,D){this._values.hasOwnProperty(M)||(this._values[M]=new Xs(this._values[M].property)),this._values[M].value=new Fs(this._values[M].property,null===D?void 0:C(D))},Ts.prototype.getTransition=function(M){return C(this._values[M].transition)},Ts.prototype.setTransition=function(M,D){this._values.hasOwnProperty(M)||(this._values[M]=new Xs(this._values[M].property)),this._values[M].transition=C(D)||void 0},Ts.prototype.serialize=function(){for(var M={},D=0,K=Object.keys(this._values);D<K.length;D+=1){var de=K[D],Ee=this.getValue(de);void 0!==Ee&&(M[de]=Ee);var Be=this.getTransition(de);void 0!==Be&&(M[de+"-transition"]=Be)}return M},Ts.prototype.transitioned=function(M,D){for(var K=new Xl(this._properties),de=0,Ee=Object.keys(this._values);de<Ee.length;de+=1){var Be=Ee[de];K._values[Be]=this._values[Be].transitioned(M,D._values[Be])}return K},Ts.prototype.untransitioned=function(){for(var M=new Xl(this._properties),D=0,K=Object.keys(this._values);D<K.length;D+=1){var de=K[D];M._values[de]=this._values[de].untransitioned()}return M};var Ks=function(M,D,K,de,Ee){this.property=M,this.value=D,this.begin=Ee+de.delay||0,this.end=this.begin+de.duration||0,M.specification.transition&&(de.delay||de.duration)&&(this.prior=K)};Ks.prototype.possiblyEvaluate=function(M,D,K){var de=M.now||0,Ee=this.value.possiblyEvaluate(M,D,K),Be=this.prior;if(Be){if(de>this.end)return this.prior=null,Ee;if(this.value.isDataDriven())return this.prior=null,Ee;if(de<this.begin)return Be.possiblyEvaluate(M,D,K);var Ye=(de-this.begin)/(this.end-this.begin);return this.property.interpolate(Be.possiblyEvaluate(M,D,K),Ee,function(at){if(at<=0)return 0;if(at>=1)return 1;var mt=at*at,Et=mt*at;return 4*(at<.5?Et:3*(at-mt)+Et-.75)}(Ye))}return Ee};var Xl=function(M){this._properties=M,this._values=Object.create(M.defaultTransitioningPropertyValues)};Xl.prototype.possiblyEvaluate=function(M,D,K){for(var de=new Il(this._properties),Ee=0,Be=Object.keys(this._values);Ee<Be.length;Ee+=1){var Ye=Be[Ee];de._values[Ye]=this._values[Ye].possiblyEvaluate(M,D,K)}return de},Xl.prototype.hasTransition=function(){for(var M=0,D=Object.keys(this._values);M<D.length;M+=1)if(this._values[D[M]].prior)return!0;return!1};var As=function(M){this._properties=M,this._values=Object.create(M.defaultPropertyValues)};As.prototype.getValue=function(M){return C(this._values[M].value)},As.prototype.setValue=function(M,D){this._values[M]=new Fs(this._values[M].property,null===D?void 0:C(D))},As.prototype.serialize=function(){for(var M={},D=0,K=Object.keys(this._values);D<K.length;D+=1){var de=K[D],Ee=this.getValue(de);void 0!==Ee&&(M[de]=Ee)}return M},As.prototype.possiblyEvaluate=function(M,D,K){for(var de=new Il(this._properties),Ee=0,Be=Object.keys(this._values);Ee<Be.length;Ee+=1){var Ye=Be[Ee];de._values[Ye]=this._values[Ye].possiblyEvaluate(M,D,K)}return de};var la=function(M,D,K){this.property=M,this.value=D,this.parameters=K};la.prototype.isConstant=function(){return"constant"===this.value.kind},la.prototype.constantOr=function(M){return"constant"===this.value.kind?this.value.value:M},la.prototype.evaluate=function(M,D,K,de){return this.property.evaluate(this.value,this.parameters,M,D,K,de)};var Il=function(M){this._properties=M,this._values=Object.create(M.defaultPossiblyEvaluatedValues)};Il.prototype.get=function(M){return this._values[M]};var Xr=function(M){this.specification=M};Xr.prototype.possiblyEvaluate=function(M,D){return M.expression.evaluate(D)},Xr.prototype.interpolate=function(M,D,K){var de=Xi[this.specification.type];return de?de(M,D,K):M};var ti=function(M,D){this.specification=M,this.overrides=D};ti.prototype.possiblyEvaluate=function(M,D,K,de){return new la(this,"constant"===M.expression.kind||"camera"===M.expression.kind?{kind:"constant",value:M.expression.evaluate(D,null,{},K,de)}:M.expression,D)},ti.prototype.interpolate=function(M,D,K){if("constant"!==M.value.kind||"constant"!==D.value.kind)return M;if(void 0===M.value.value||void 0===D.value.value)return new la(this,{kind:"constant",value:void 0},M.parameters);var de=Xi[this.specification.type];return de?new la(this,{kind:"constant",value:de(M.value.value,D.value.value,K)},M.parameters):M},ti.prototype.evaluate=function(M,D,K,de,Ee,Be){return"constant"===M.kind?M.value:M.evaluate(D,K,de,Ee,Be)};var Yo=function(M){function D(){M.apply(this,arguments)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype.possiblyEvaluate=function(K,de,Ee,Be){if(void 0===K.value)return new la(this,{kind:"constant",value:void 0},de);if("constant"===K.expression.kind){var Ye=K.expression.evaluate(de,null,{},Ee,Be),at="resolvedImage"===K.property.specification.type&&"string"!=typeof Ye?Ye.name:Ye,mt=this._calculate(at,at,at,de);return new la(this,{kind:"constant",value:mt},de)}if("camera"===K.expression.kind){var Et=this._calculate(K.expression.evaluate({zoom:de.zoom-1}),K.expression.evaluate({zoom:de.zoom}),K.expression.evaluate({zoom:de.zoom+1}),de);return new la(this,{kind:"constant",value:Et},de)}return new la(this,K.expression,de)},D.prototype.evaluate=function(K,de,Ee,Be,Ye,at){if("source"===K.kind){var mt=K.evaluate(de,Ee,Be,Ye,at);return this._calculate(mt,mt,mt,de)}return"composite"===K.kind?this._calculate(K.evaluate({zoom:Math.floor(de.zoom)-1},Ee,Be),K.evaluate({zoom:Math.floor(de.zoom)},Ee,Be),K.evaluate({zoom:Math.floor(de.zoom)+1},Ee,Be),de):K.value},D.prototype._calculate=function(K,de,Ee,Be){return Be.zoom>Be.zoomHistory.lastIntegerZoom?{from:K,to:de}:{from:Ee,to:de}},D.prototype.interpolate=function(K){return K},D}(ti),is=function(M){this.specification=M};is.prototype.possiblyEvaluate=function(M,D,K,de){if(void 0!==M.value){if("constant"===M.expression.kind){var Ee=M.expression.evaluate(D,null,{},K,de);return this._calculate(Ee,Ee,Ee,D)}return this._calculate(M.expression.evaluate(new Ii(Math.floor(D.zoom-1),D)),M.expression.evaluate(new Ii(Math.floor(D.zoom),D)),M.expression.evaluate(new Ii(Math.floor(D.zoom+1),D)),D)}},is.prototype._calculate=function(M,D,K,de){return de.zoom>de.zoomHistory.lastIntegerZoom?{from:M,to:D}:{from:K,to:D}},is.prototype.interpolate=function(M){return M};var as=function(M){this.specification=M};as.prototype.possiblyEvaluate=function(M,D,K,de){return!!M.expression.evaluate(D,null,{},K,de)},as.prototype.interpolate=function(){return!1};var La=function(M){for(var D in this.properties=M,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],M){var K=M[D];K.specification.overridable&&this.overridableProperties.push(D);var de=this.defaultPropertyValues[D]=new Fs(K,void 0),Ee=this.defaultTransitionablePropertyValues[D]=new Xs(K);this.defaultTransitioningPropertyValues[D]=Ee.untransitioned(),this.defaultPossiblyEvaluatedValues[D]=de.possiblyEvaluate({})}};$r("DataDrivenProperty",ti),$r("DataConstantProperty",Xr),$r("CrossFadedDataDrivenProperty",Yo),$r("CrossFadedProperty",is),$r("ColorRampProperty",as);var gi="-transition",ta=function(M){function D(K,de){if(M.call(this),this.id=K.id,this.type=K.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==K.type&&(this.metadata=K.metadata,this.minzoom=K.minzoom,this.maxzoom=K.maxzoom,"background"!==K.type&&(this.source=K.source,this.sourceLayer=K["source-layer"],this.filter=K.filter),de.layout&&(this._unevaluatedLayout=new As(de.layout)),de.paint)){for(var Ee in this._transitionablePaint=new Ts(de.paint),K.paint)this.setPaintProperty(Ee,K.paint[Ee],{validate:!1});for(var Be in K.layout)this.setLayoutProperty(Be,K.layout[Be],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Il(de.paint)}}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},D.prototype.getLayoutProperty=function(K){return"visibility"===K?this.visibility:this._unevaluatedLayout.getValue(K)},D.prototype.setLayoutProperty=function(K,de,Ee){void 0===Ee&&(Ee={}),null!=de&&this._validate(hl,"layers."+this.id+".layout."+K,K,de,Ee)||("visibility"!==K?this._unevaluatedLayout.setValue(K,de):this.visibility=de)},D.prototype.getPaintProperty=function(K){return v(K,gi)?this._transitionablePaint.getTransition(K.slice(0,-11)):this._transitionablePaint.getValue(K)},D.prototype.setPaintProperty=function(K,de,Ee){if(void 0===Ee&&(Ee={}),null!=de&&this._validate(co,"layers."+this.id+".paint."+K,K,de,Ee))return!1;if(v(K,gi))return this._transitionablePaint.setTransition(K.slice(0,-11),de||void 0),!1;var Ye=this._transitionablePaint._values[K],at="cross-faded-data-driven"===Ye.property.specification["property-type"],mt=Ye.value.isDataDriven(),Et=Ye.value;this._transitionablePaint.setValue(K,de),this._handleSpecialPaintPropertyUpdate(K);var Lt=this._transitionablePaint._values[K].value;return Lt.isDataDriven()||mt||at||this._handleOverridablePaintPropertyUpdate(K,Et,Lt)},D.prototype._handleSpecialPaintPropertyUpdate=function(K){},D.prototype._handleOverridablePaintPropertyUpdate=function(K,de,Ee){return!1},D.prototype.isHidden=function(K){return!!(this.minzoom&&K<this.minzoom)||!!(this.maxzoom&&K>=this.maxzoom)||"none"===this.visibility},D.prototype.updateTransitions=function(K){this._transitioningPaint=this._transitionablePaint.transitioned(K,this._transitioningPaint)},D.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},D.prototype.recalculate=function(K,de){K.getCrossfadeParameters&&(this._crossfadeParameters=K.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(K,void 0,de)),this.paint=this._transitioningPaint.possiblyEvaluate(K,void 0,de)},D.prototype.serialize=function(){var K={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(K.layout=K.layout||{},K.layout.visibility=this.visibility),f(K,function(de,Ee){return!(void 0===de||"layout"===Ee&&!Object.keys(de).length||"paint"===Ee&&!Object.keys(de).length)})},D.prototype._validate=function(K,de,Ee,Be,Ye){return void 0===Ye&&(Ye={}),(!Ye||!1!==Ye.validate)&&uo(this,K.call(Ws,{key:de,layerType:this.type,objectKey:Ee,value:Be,styleSpec:tt,style:{glyphs:!0,sprite:!0}}))},D.prototype.is3D=function(){return!1},D.prototype.isTileClipped=function(){return!1},D.prototype.hasOffscreenPass=function(){return!1},D.prototype.resize=function(){},D.prototype.isStateDependent=function(){for(var K in this.paint._values){var de=this.paint.get(K);if(de instanceof la&&Ps(de.property.specification)&&("source"===de.value.kind||"composite"===de.value.kind)&&de.value.isStateDependent)return!0}return!1},D}(ut),eu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Zo=function(M,D){this._structArray=M,this._pos1=D*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},wi=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function ra(M,D){void 0===D&&(D=1);var K=0,de=0;return{members:M.map(function(Ee){var Ye=eu[Ee.type].BYTES_PER_ELEMENT,at=K=Mo(K,Math.max(D,Ye)),mt=Ee.components||1;return de=Math.max(de,Ye),K+=Ye*mt,{name:Ee.name,type:Ee.type,components:mt,offset:at}}),size:Mo(K,Math.max(de,D)),alignment:D}}function Mo(M,D){return Math.ceil(M/D)*D}wi.serialize=function(M,D){return M._trim(),D&&(M.isTransferred=!0,D.push(M.arrayBuffer)),{length:M.length,arrayBuffer:M.arrayBuffer}},wi.deserialize=function(M){var D=Object.create(this.prototype);return D.arrayBuffer=M.arrayBuffer,D.length=M.length,D.capacity=M.arrayBuffer.byteLength/D.bytesPerElement,D._refreshViews(),D},wi.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},wi.prototype.clear=function(){this.length=0},wi.prototype.resize=function(M){this.reserve(M),this.length=M},wi.prototype.reserve=function(M){if(M>this.capacity){this.capacity=Math.max(M,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var D=this.uint8;this._refreshViews(),D&&this.uint8.set(D)}},wi.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var os=function(M){function D(){M.apply(this,arguments)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,de){var Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,K,de)},D.prototype.emplace=function(K,de,Ee){var Be=2*K;return this.int16[Be+0]=de,this.int16[Be+1]=Ee,K},D}(wi);os.prototype.bytesPerElement=4,$r("StructArrayLayout2i4",os);var Js=function(M){function D(){M.apply(this,arguments)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,de,Ee,Be){var Ye=this.length;return this.resize(Ye+1),this.emplace(Ye,K,de,Ee,Be)},D.prototype.emplace=function(K,de,Ee,Be,Ye){var at=4*K;return this.int16[at+0]=de,this.int16[at+1]=Ee,this.int16[at+2]=Be,this.int16[at+3]=Ye,K},D}(wi);Js.prototype.bytesPerElement=8,$r("StructArrayLayout4i8",Js);var rt=function(M){function D(){M.apply(this,arguments)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,de,Ee,Be,Ye,at){var mt=this.length;return this.resize(mt+1),this.emplace(mt,K,de,Ee,Be,Ye,at)},D.prototype.emplace=function(K,de,Ee,Be,Ye,at,mt){var Et=6*K;return this.int16[Et+0]=de,this.int16[Et+1]=Ee,this.int16[Et+2]=Be,this.int16[Et+3]=Ye,this.int16[Et+4]=at,this.int16[Et+5]=mt,K},D}(wi);rt.prototype.bytesPerElement=12,$r("StructArrayLayout2i4i12",rt);var st=function(M){function D(){M.apply(this,arguments)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,de,Ee,Be,Ye,at){var mt=this.length;return this.resize(mt+1),this.emplace(mt,K,de,Ee,Be,Ye,at)},D.prototype.emplace=function(K,de,Ee,Be,Ye,at,mt){var Et=4*K,Lt=8*K;return this.int16[Et+0]=de,this.int16[Et+1]=Ee,this.uint8[Lt+4]=Be,this.uint8[Lt+5]=Ye,this.uint8[Lt+6]=at,this.uint8[Lt+7]=mt,K},D}(wi);st.prototype.bytesPerElement=8,$r("StructArrayLayout2i4ub8",st);var pt=function(M){function D(){M.apply(this,arguments)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,de){var Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,K,de)},D.prototype.emplace=function(K,de,Ee){var Be=2*K;return this.float32[Be+0]=de,this.float32[Be+1]=Ee,K},D}(wi);pt.prototype.bytesPerElement=8,$r("StructArrayLayout2f8",pt);var j=function(M){function D(){M.apply(this,arguments)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,de,Ee,Be,Ye,at,mt,Et,Lt,Wt){var en=this.length;return this.resize(en+1),this.emplace(en,K,de,Ee,Be,Ye,at,mt,Et,Lt,Wt)},D.prototype.emplace=function(K,de,Ee,Be,Ye,at,mt,Et,Lt,Wt,en){var Xt=10*K;return this.uint16[Xt+0]=de,this.uint16[Xt+1]=Ee,this.uint16[Xt+2]=Be,this.uint16[Xt+3]=Ye,this.uint16[Xt+4]=at,this.uint16[Xt+5]=mt,this.uint16[Xt+6]=Et,this.uint16[Xt+7]=Lt,this.uint16[Xt+8]=Wt,this.uint16[Xt+9]=en,K},D}(wi);j.prototype.bytesPerElement=20,$r("StructArrayLayout10ui20",j);var Y=function(M){function D(){M.apply(this,arguments)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,de,Ee,Be,Ye,at,mt,Et,Lt,Wt,en,Xt){var vn=this.length;return this.resize(vn+1),this.emplace(vn,K,de,Ee,Be,Ye,at,mt,Et,Lt,Wt,en,Xt)},D.prototype.emplace=function(K,de,Ee,Be,Ye,at,mt,Et,Lt,Wt,en,Xt,vn){var bn=12*K;return this.int16[bn+0]=de,this.int16[bn+1]=Ee,this.int16[bn+2]=Be,this.int16[bn+3]=Ye,this.uint16[bn+4]=at,this.uint16[bn+5]=mt,this.uint16[bn+6]=Et,this.uint16[bn+7]=Lt,this.int16[bn+8]=Wt,this.int16[bn+9]=en,this.int16[bn+10]=Xt,this.int16[bn+11]=vn,K},D}(wi);Y.prototype.bytesPerElement=24,$r("StructArrayLayout4i4ui4i24",Y);var q=function(M){function D(){M.apply(this,arguments)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,de,Ee){var Be=this.length;return this.resize(Be+1),this.emplace(Be,K,de,Ee)},D.prototype.emplace=function(K,de,Ee,Be){var Ye=3*K;return this.float32[Ye+0]=de,this.float32[Ye+1]=Ee,this.float32[Ye+2]=Be,K},D}(wi);q.prototype.bytesPerElement=12,$r("StructArrayLayout3f12",q);var I=function(M){function D(){M.apply(this,arguments)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K){var de=this.length;return this.resize(de+1),this.emplace(de,K)},D.prototype.emplace=function(K,de){return this.uint32[1*K+0]=de,K},D}(wi);I.prototype.bytesPerElement=4,$r("StructArrayLayout1ul4",I);var H=function(M){function D(){M.apply(this,arguments)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,de,Ee,Be,Ye,at,mt,Et,Lt){var Wt=this.length;return this.resize(Wt+1),this.emplace(Wt,K,de,Ee,Be,Ye,at,mt,Et,Lt)},D.prototype.emplace=function(K,de,Ee,Be,Ye,at,mt,Et,Lt,Wt){var en=10*K,Xt=5*K;return this.int16[en+0]=de,this.int16[en+1]=Ee,this.int16[en+2]=Be,this.int16[en+3]=Ye,this.int16[en+4]=at,this.int16[en+5]=mt,this.uint32[Xt+3]=Et,this.uint16[en+8]=Lt,this.uint16[en+9]=Wt,K},D}(wi);H.prototype.bytesPerElement=20,$r("StructArrayLayout6i1ul2ui20",H);var te=function(M){function D(){M.apply(this,arguments)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,de,Ee,Be,Ye,at){var mt=this.length;return this.resize(mt+1),this.emplace(mt,K,de,Ee,Be,Ye,at)},D.prototype.emplace=function(K,de,Ee,Be,Ye,at,mt){var Et=6*K;return this.int16[Et+0]=de,this.int16[Et+1]=Ee,this.int16[Et+2]=Be,this.int16[Et+3]=Ye,this.int16[Et+4]=at,this.int16[Et+5]=mt,K},D}(wi);te.prototype.bytesPerElement=12,$r("StructArrayLayout2i2i2i12",te);var le=function(M){function D(){M.apply(this,arguments)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,de,Ee,Be,Ye){var at=this.length;return this.resize(at+1),this.emplace(at,K,de,Ee,Be,Ye)},D.prototype.emplace=function(K,de,Ee,Be,Ye,at){var mt=4*K,Et=8*K;return this.float32[mt+0]=de,this.float32[mt+1]=Ee,this.float32[mt+2]=Be,this.int16[Et+6]=Ye,this.int16[Et+7]=at,K},D}(wi);le.prototype.bytesPerElement=16,$r("StructArrayLayout2f1f2i16",le);var pe=function(M){function D(){M.apply(this,arguments)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,de,Ee,Be){var Ye=this.length;return this.resize(Ye+1),this.emplace(Ye,K,de,Ee,Be)},D.prototype.emplace=function(K,de,Ee,Be,Ye){var at=12*K,mt=3*K;return this.uint8[at+0]=de,this.uint8[at+1]=Ee,this.float32[mt+1]=Be,this.float32[mt+2]=Ye,K},D}(wi);pe.prototype.bytesPerElement=12,$r("StructArrayLayout2ub2f12",pe);var ke=function(M){function D(){M.apply(this,arguments)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,de,Ee){var Be=this.length;return this.resize(Be+1),this.emplace(Be,K,de,Ee)},D.prototype.emplace=function(K,de,Ee,Be){var Ye=3*K;return this.uint16[Ye+0]=de,this.uint16[Ye+1]=Ee,this.uint16[Ye+2]=Be,K},D}(wi);ke.prototype.bytesPerElement=6,$r("StructArrayLayout3ui6",ke);var Fe=function(M){function D(){M.apply(this,arguments)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,de,Ee,Be,Ye,at,mt,Et,Lt,Wt,en,Xt,vn,bn,zn,Rn,Jn){var nr=this.length;return this.resize(nr+1),this.emplace(nr,K,de,Ee,Be,Ye,at,mt,Et,Lt,Wt,en,Xt,vn,bn,zn,Rn,Jn)},D.prototype.emplace=function(K,de,Ee,Be,Ye,at,mt,Et,Lt,Wt,en,Xt,vn,bn,zn,Rn,Jn,nr){var cr=24*K,dr=12*K,wr=48*K;return this.int16[cr+0]=de,this.int16[cr+1]=Ee,this.uint16[cr+2]=Be,this.uint16[cr+3]=Ye,this.uint32[dr+2]=at,this.uint32[dr+3]=mt,this.uint32[dr+4]=Et,this.uint16[cr+10]=Lt,this.uint16[cr+11]=Wt,this.uint16[cr+12]=en,this.float32[dr+7]=Xt,this.float32[dr+8]=vn,this.uint8[wr+36]=bn,this.uint8[wr+37]=zn,this.uint8[wr+38]=Rn,this.uint32[dr+10]=Jn,this.int16[cr+22]=nr,K},D}(wi);Fe.prototype.bytesPerElement=48,$r("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Fe);var Ve=function(M){function D(){M.apply(this,arguments)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,de,Ee,Be,Ye,at,mt,Et,Lt,Wt,en,Xt,vn,bn,zn,Rn,Jn,nr,cr,dr,wr,jr,Rr,Vr,Wr,hi,ri,fi){var oi=this.length;return this.resize(oi+1),this.emplace(oi,K,de,Ee,Be,Ye,at,mt,Et,Lt,Wt,en,Xt,vn,bn,zn,Rn,Jn,nr,cr,dr,wr,jr,Rr,Vr,Wr,hi,ri,fi)},D.prototype.emplace=function(K,de,Ee,Be,Ye,at,mt,Et,Lt,Wt,en,Xt,vn,bn,zn,Rn,Jn,nr,cr,dr,wr,jr,Rr,Vr,Wr,hi,ri,fi,oi){var ni=34*K,Fi=17*K;return this.int16[ni+0]=de,this.int16[ni+1]=Ee,this.int16[ni+2]=Be,this.int16[ni+3]=Ye,this.int16[ni+4]=at,this.int16[ni+5]=mt,this.int16[ni+6]=Et,this.int16[ni+7]=Lt,this.uint16[ni+8]=Wt,this.uint16[ni+9]=en,this.uint16[ni+10]=Xt,this.uint16[ni+11]=vn,this.uint16[ni+12]=bn,this.uint16[ni+13]=zn,this.uint16[ni+14]=Rn,this.uint16[ni+15]=Jn,this.uint16[ni+16]=nr,this.uint16[ni+17]=cr,this.uint16[ni+18]=dr,this.uint16[ni+19]=wr,this.uint16[ni+20]=jr,this.uint16[ni+21]=Rr,this.uint16[ni+22]=Vr,this.uint32[Fi+12]=Wr,this.float32[Fi+13]=hi,this.float32[Fi+14]=ri,this.float32[Fi+15]=fi,this.float32[Fi+16]=oi,K},D}(wi);Ve.prototype.bytesPerElement=68,$r("StructArrayLayout8i15ui1ul4f68",Ve);var Xe=function(M){function D(){M.apply(this,arguments)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K){var de=this.length;return this.resize(de+1),this.emplace(de,K)},D.prototype.emplace=function(K,de){return this.float32[1*K+0]=de,K},D}(wi);Xe.prototype.bytesPerElement=4,$r("StructArrayLayout1f4",Xe);var Je=function(M){function D(){M.apply(this,arguments)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,de,Ee){var Be=this.length;return this.resize(Be+1),this.emplace(Be,K,de,Ee)},D.prototype.emplace=function(K,de,Ee,Be){var Ye=3*K;return this.int16[Ye+0]=de,this.int16[Ye+1]=Ee,this.int16[Ye+2]=Be,K},D}(wi);Je.prototype.bytesPerElement=6,$r("StructArrayLayout3i6",Je);var ct=function(M){function D(){M.apply(this,arguments)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,de,Ee){var Be=this.length;return this.resize(Be+1),this.emplace(Be,K,de,Ee)},D.prototype.emplace=function(K,de,Ee,Be){var at=4*K;return this.uint32[2*K+0]=de,this.uint16[at+2]=Ee,this.uint16[at+3]=Be,K},D}(wi);ct.prototype.bytesPerElement=8,$r("StructArrayLayout1ul2ui8",ct);var vt=function(M){function D(){M.apply(this,arguments)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,de){var Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,K,de)},D.prototype.emplace=function(K,de,Ee){var Be=2*K;return this.uint16[Be+0]=de,this.uint16[Be+1]=Ee,K},D}(wi);vt.prototype.bytesPerElement=4,$r("StructArrayLayout2ui4",vt);var _t=function(M){function D(){M.apply(this,arguments)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K){var de=this.length;return this.resize(de+1),this.emplace(de,K)},D.prototype.emplace=function(K,de){return this.uint16[1*K+0]=de,K},D}(wi);_t.prototype.bytesPerElement=2,$r("StructArrayLayout1ui2",_t);var It=function(M){function D(){M.apply(this,arguments)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(K,de,Ee,Be){var Ye=this.length;return this.resize(Ye+1),this.emplace(Ye,K,de,Ee,Be)},D.prototype.emplace=function(K,de,Ee,Be,Ye){var at=4*K;return this.float32[at+0]=de,this.float32[at+1]=Ee,this.float32[at+2]=Be,this.float32[at+3]=Ye,K},D}(wi);It.prototype.bytesPerElement=16,$r("StructArrayLayout4f16",It);var Ft=function(M){function D(){M.apply(this,arguments)}M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D;var K={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return K.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},K.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},K.x1.get=function(){return this._structArray.int16[this._pos2+2]},K.y1.get=function(){return this._structArray.int16[this._pos2+3]},K.x2.get=function(){return this._structArray.int16[this._pos2+4]},K.y2.get=function(){return this._structArray.int16[this._pos2+5]},K.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},K.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},K.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},K.anchorPoint.get=function(){return new t(this.anchorPointX,this.anchorPointY)},Object.defineProperties(D.prototype,K),D}(Zo);Ft.prototype.size=20;var Ot=function(M){function D(){M.apply(this,arguments)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype.get=function(K){return new Ft(this,K)},D}(H);$r("CollisionBoxArray",Ot);var Yt=function(M){function D(){M.apply(this,arguments)}M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D;var K={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return K.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},K.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},K.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},K.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},K.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},K.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},K.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},K.segment.get=function(){return this._structArray.uint16[this._pos2+10]},K.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},K.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},K.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},K.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},K.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},K.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},K.placedOrientation.set=function(de){this._structArray.uint8[this._pos1+37]=de},K.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},K.hidden.set=function(de){this._structArray.uint8[this._pos1+38]=de},K.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},K.crossTileID.set=function(de){this._structArray.uint32[this._pos4+10]=de},K.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(D.prototype,K),D}(Zo);Yt.prototype.size=48;var jt=function(M){function D(){M.apply(this,arguments)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype.get=function(K){return new Yt(this,K)},D}(Fe);$r("PlacedSymbolArray",jt);var ln=function(M){function D(){M.apply(this,arguments)}M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D;var K={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return K.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},K.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},K.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},K.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},K.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},K.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},K.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},K.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},K.key.get=function(){return this._structArray.uint16[this._pos2+8]},K.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},K.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},K.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},K.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},K.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},K.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},K.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},K.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},K.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},K.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},K.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},K.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},K.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},K.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},K.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},K.crossTileID.set=function(de){this._structArray.uint32[this._pos4+12]=de},K.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},K.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},K.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},K.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(D.prototype,K),D}(Zo);ln.prototype.size=68;var tn=function(M){function D(){M.apply(this,arguments)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype.get=function(K){return new ln(this,K)},D}(Ve);$r("SymbolInstanceArray",tn);var Jt=function(M){function D(){M.apply(this,arguments)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype.getoffsetX=function(K){return this.float32[1*K+0]},D}(Xe);$r("GlyphOffsetArray",Jt);var Mn=function(M){function D(){M.apply(this,arguments)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype.getx=function(K){return this.int16[3*K+0]},D.prototype.gety=function(K){return this.int16[3*K+1]},D.prototype.gettileUnitDistanceFromAnchor=function(K){return this.int16[3*K+2]},D}(Je);$r("SymbolLineVertexArray",Mn);var Ln=function(M){function D(){M.apply(this,arguments)}M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D;var K={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return K.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},K.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},K.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(D.prototype,K),D}(Zo);Ln.prototype.size=8;var Un=function(M){function D(){M.apply(this,arguments)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype.get=function(K){return new Ln(this,K)},D}(ct);$r("FeatureIndexArray",Un);var Xn=ra([{name:"a_pos",components:2,type:"Int16"}],4).members,sr=function(M){void 0===M&&(M=[]),this.segments=M};function xr(M,D){return 256*(M=c(Math.floor(M),0,255))+c(Math.floor(D),0,255)}sr.prototype.prepareSegment=function(M,D,K,de){var Ee=this.segments[this.segments.length-1];return M>sr.MAX_VERTEX_ARRAY_LENGTH&&E("Max vertices per segment is "+sr.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+M),(!Ee||Ee.vertexLength+M>sr.MAX_VERTEX_ARRAY_LENGTH||Ee.sortKey!==de)&&(Ee={vertexOffset:D.length,primitiveOffset:K.length,vertexLength:0,primitiveLength:0},void 0!==de&&(Ee.sortKey=de),this.segments.push(Ee)),Ee},sr.prototype.get=function(){return this.segments},sr.prototype.destroy=function(){for(var M=0,D=this.segments;M<D.length;M+=1){var K=D[M];for(var de in K.vaos)K.vaos[de].destroy()}},sr.simpleSegment=function(M,D,K,de){return new sr([{vertexOffset:M,primitiveOffset:D,vertexLength:K,primitiveLength:de,vaos:{},sortKey:0}])},sr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,$r("SegmentVector",sr);var Mr=ra([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),hr=T(function(M){M.exports=function(D,K){var de,Ee,Be,Ye,at,mt,Et,Lt;for(Ee=D.length-(de=3&D.length),Be=K,at=3432918353,mt=461845907,Lt=0;Lt<Ee;)Et=255&D.charCodeAt(Lt)|(255&D.charCodeAt(++Lt))<<8|(255&D.charCodeAt(++Lt))<<16|(255&D.charCodeAt(++Lt))<<24,++Lt,Be=27492+(65535&(Ye=5*(65535&(Be=(Be^=Et=(65535&(Et=(Et=(65535&Et)*at+(((Et>>>16)*at&65535)<<16)&4294967295)<<15|Et>>>17))*mt+(((Et>>>16)*mt&65535)<<16)&4294967295)<<13|Be>>>19))+((5*(Be>>>16)&65535)<<16)&4294967295))+((58964+(Ye>>>16)&65535)<<16);switch(Et=0,de){case 3:Et^=(255&D.charCodeAt(Lt+2))<<16;case 2:Et^=(255&D.charCodeAt(Lt+1))<<8;case 1:Be^=Et=(65535&(Et=(Et=(65535&(Et^=255&D.charCodeAt(Lt)))*at+(((Et>>>16)*at&65535)<<16)&4294967295)<<15|Et>>>17))*mt+(((Et>>>16)*mt&65535)<<16)&4294967295}return Be^=D.length,Be=2246822507*(65535&(Be^=Be>>>16))+((2246822507*(Be>>>16)&65535)<<16)&4294967295,Be=3266489909*(65535&(Be^=Be>>>13))+((3266489909*(Be>>>16)&65535)<<16)&4294967295,(Be^=Be>>>16)>>>0}}),Cr=T(function(M){M.exports=function(D,K){for(var de,Ee=D.length,Be=K^Ee,Ye=0;Ee>=4;)de=1540483477*(65535&(de=255&D.charCodeAt(Ye)|(255&D.charCodeAt(++Ye))<<8|(255&D.charCodeAt(++Ye))<<16|(255&D.charCodeAt(++Ye))<<24))+((1540483477*(de>>>16)&65535)<<16),Be=1540483477*(65535&Be)+((1540483477*(Be>>>16)&65535)<<16)^(de=1540483477*(65535&(de^=de>>>24))+((1540483477*(de>>>16)&65535)<<16)),Ee-=4,++Ye;switch(Ee){case 3:Be^=(255&D.charCodeAt(Ye+2))<<16;case 2:Be^=(255&D.charCodeAt(Ye+1))<<8;case 1:Be=1540483477*(65535&(Be^=255&D.charCodeAt(Ye)))+((1540483477*(Be>>>16)&65535)<<16)}return Be=1540483477*(65535&(Be^=Be>>>13))+((1540483477*(Be>>>16)&65535)<<16),(Be^=Be>>>15)>>>0}}),Nr=hr,_r=Cr;Nr.murmur3=hr,Nr.murmur2=_r;var Sr=function(){this.ids=[],this.positions=[],this.indexed=!1};Sr.prototype.add=function(M,D,K,de){this.ids.push(Pr(M)),this.positions.push(D,K,de)},Sr.prototype.getPositions=function(M){for(var D=Pr(M),K=0,de=this.ids.length-1;K<de;){var Ee=K+de>>1;this.ids[Ee]>=D?de=Ee:K=Ee+1}for(var Be=[];this.ids[K]===D;)Be.push({index:this.positions[3*K],start:this.positions[3*K+1],end:this.positions[3*K+2]}),K++;return Be},Sr.serialize=function(M,D){var K=new Float64Array(M.ids),de=new Uint32Array(M.positions);return Kr(K,de,0,K.length-1),D&&D.push(K.buffer,de.buffer),{ids:K,positions:de}},Sr.deserialize=function(M){var D=new Sr;return D.ids=M.ids,D.positions=M.positions,D.indexed=!0,D};var Hr=Math.pow(2,53)-1;function Pr(M){var D=+M;return!isNaN(D)&&D<=Hr?D:Nr(String(M))}function Kr(M,D,K,de){for(;K<de;){for(var Ee=M[K+de>>1],Be=K-1,Ye=de+1;;){do{Be++}while(M[Be]<Ee);do{Ye--}while(M[Ye]>Ee);if(Be>=Ye)break;ii(M,Be,Ye),ii(D,3*Be,3*Ye),ii(D,3*Be+1,3*Ye+1),ii(D,3*Be+2,3*Ye+2)}Ye-K<de-Ye?(Kr(M,D,K,Ye),K=Ye+1):(Kr(M,D,Ye+1,de),de=Ye)}}function ii(M,D,K){var de=M[D];M[D]=M[K],M[K]=de}$r("FeaturePositionMap",Sr);var di=function(M,D){this.gl=M.gl,this.location=D},mi=function(M){function D(K,de){M.call(this,K,de),this.current=0}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype.set=function(K){this.current!==K&&(this.current=K,this.gl.uniform1i(this.location,K))},D}(di),Ti=function(M){function D(K,de){M.call(this,K,de),this.current=0}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype.set=function(K){this.current!==K&&(this.current=K,this.gl.uniform1f(this.location,K))},D}(di),Li=function(M){function D(K,de){M.call(this,K,de),this.current=[0,0]}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype.set=function(K){K[0]===this.current[0]&&K[1]===this.current[1]||(this.current=K,this.gl.uniform2f(this.location,K[0],K[1]))},D}(di),pa=function(M){function D(K,de){M.call(this,K,de),this.current=[0,0,0]}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype.set=function(K){K[0]===this.current[0]&&K[1]===this.current[1]&&K[2]===this.current[2]||(this.current=K,this.gl.uniform3f(this.location,K[0],K[1],K[2]))},D}(di),Pa=function(M){function D(K,de){M.call(this,K,de),this.current=[0,0,0,0]}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype.set=function(K){K[0]===this.current[0]&&K[1]===this.current[1]&&K[2]===this.current[2]&&K[3]===this.current[3]||(this.current=K,this.gl.uniform4f(this.location,K[0],K[1],K[2],K[3]))},D}(di),to=function(M){function D(K,de){M.call(this,K,de),this.current=Gn.transparent}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype.set=function(K){K.r===this.current.r&&K.g===this.current.g&&K.b===this.current.b&&K.a===this.current.a||(this.current=K,this.gl.uniform4f(this.location,K.r,K.g,K.b,K.a))},D}(di),Ja=new Float32Array(16),ya=function(M){function D(K,de){M.call(this,K,de),this.current=Ja}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype.set=function(K){if(K[12]!==this.current[12]||K[0]!==this.current[0])return this.current=K,void this.gl.uniformMatrix4fv(this.location,!1,K);for(var de=1;de<16;de++)if(K[de]!==this.current[de]){this.current=K,this.gl.uniformMatrix4fv(this.location,!1,K);break}},D}(di);function Ki(M){return[xr(255*M.r,255*M.g),xr(255*M.b,255*M.a)]}var Pi=function(M,D,K){this.value=M,this.uniformNames=D.map(function(de){return"u_"+de}),this.type=K};Pi.prototype.setUniform=function(M,D,K){M.set(K.constantOr(this.value))},Pi.prototype.getBinding=function(M,D,K){return"color"===this.type?new to(M,D):new Ti(M,D)};var ga=function(M,D){this.uniformNames=D.map(function(K){return"u_"+K}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};ga.prototype.setConstantPatternPositions=function(M,D){this.pixelRatioFrom=D.pixelRatio,this.pixelRatioTo=M.pixelRatio,this.patternFrom=D.tlbr,this.patternTo=M.tlbr},ga.prototype.setUniform=function(M,D,K,de){var Ee="u_pattern_to"===de?this.patternTo:"u_pattern_from"===de?this.patternFrom:"u_pixel_ratio_to"===de?this.pixelRatioTo:"u_pixel_ratio_from"===de?this.pixelRatioFrom:null;Ee&&M.set(Ee)},ga.prototype.getBinding=function(M,D,K){return"u_pattern"===K.substr(0,9)?new Pa(M,D):new Ti(M,D)};var ia=function(M,D,K,de){this.expression=M,this.type=K,this.maxValue=0,this.paintVertexAttributes=D.map(function(Ee){return{name:"a_"+Ee,type:"Float32",components:"color"===K?2:1,offset:0}}),this.paintVertexArray=new de};ia.prototype.populatePaintArray=function(M,D,K,de,Ee){var Be=this.paintVertexArray.length,Ye=this.expression.evaluate(new Ii(0),D,{},de,[],Ee);this.paintVertexArray.resize(M),this._setPaintValue(Be,M,Ye)},ia.prototype.updatePaintArray=function(M,D,K,de){var Ee=this.expression.evaluate({zoom:0},K,de);this._setPaintValue(M,D,Ee)},ia.prototype._setPaintValue=function(M,D,K){if("color"===this.type)for(var de=Ki(K),Ee=M;Ee<D;Ee++)this.paintVertexArray.emplace(Ee,de[0],de[1]);else{for(var Be=M;Be<D;Be++)this.paintVertexArray.emplace(Be,K);this.maxValue=Math.max(this.maxValue,Math.abs(K))}},ia.prototype.upload=function(M){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=M.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ia.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var bi=function(M,D,K,de,Ee,Be){this.expression=M,this.uniformNames=D.map(function(Ye){return"u_"+Ye+"_t"}),this.type=K,this.useIntegerZoom=de,this.zoom=Ee,this.maxValue=0,this.paintVertexAttributes=D.map(function(Ye){return{name:"a_"+Ye,type:"Float32",components:"color"===K?4:2,offset:0}}),this.paintVertexArray=new Be};bi.prototype.populatePaintArray=function(M,D,K,de,Ee){var Be=this.expression.evaluate(new Ii(this.zoom),D,{},de,[],Ee),Ye=this.expression.evaluate(new Ii(this.zoom+1),D,{},de,[],Ee),at=this.paintVertexArray.length;this.paintVertexArray.resize(M),this._setPaintValue(at,M,Be,Ye)},bi.prototype.updatePaintArray=function(M,D,K,de){var Ee=this.expression.evaluate({zoom:this.zoom},K,de),Be=this.expression.evaluate({zoom:this.zoom+1},K,de);this._setPaintValue(M,D,Ee,Be)},bi.prototype._setPaintValue=function(M,D,K,de){if("color"===this.type)for(var Ee=Ki(K),Be=Ki(de),Ye=M;Ye<D;Ye++)this.paintVertexArray.emplace(Ye,Ee[0],Ee[1],Be[0],Be[1]);else{for(var at=M;at<D;at++)this.paintVertexArray.emplace(at,K,de);this.maxValue=Math.max(this.maxValue,Math.abs(K),Math.abs(de))}},bi.prototype.upload=function(M){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=M.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},bi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},bi.prototype.setUniform=function(M,D){var K=this.useIntegerZoom?Math.floor(D.zoom):D.zoom,de=c(this.expression.interpolationFactor(K,this.zoom,this.zoom+1),0,1);M.set(de)},bi.prototype.getBinding=function(M,D,K){return new Ti(M,D)};var Ma=function(M,D,K,de,Ee,Be){this.expression=M,this.type=D,this.useIntegerZoom=K,this.zoom=de,this.layerId=Be,this.zoomInPaintVertexArray=new Ee,this.zoomOutPaintVertexArray=new Ee};Ma.prototype.populatePaintArray=function(M,D,K){var de=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(M),this.zoomOutPaintVertexArray.resize(M),this._setPaintValues(de,M,D.patterns&&D.patterns[this.layerId],K)},Ma.prototype.updatePaintArray=function(M,D,K,de,Ee){this._setPaintValues(M,D,K.patterns&&K.patterns[this.layerId],Ee)},Ma.prototype._setPaintValues=function(M,D,K,de){if(de&&K){var at=de[K.min],mt=de[K.mid],Et=de[K.max];if(at&&mt&&Et)for(var Lt=M;Lt<D;Lt++)this.zoomInPaintVertexArray.emplace(Lt,mt.tl[0],mt.tl[1],mt.br[0],mt.br[1],at.tl[0],at.tl[1],at.br[0],at.br[1],mt.pixelRatio,at.pixelRatio),this.zoomOutPaintVertexArray.emplace(Lt,mt.tl[0],mt.tl[1],mt.br[0],mt.br[1],Et.tl[0],Et.tl[1],Et.br[0],Et.br[1],mt.pixelRatio,Et.pixelRatio)}},Ma.prototype.upload=function(M){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=M.createVertexBuffer(this.zoomInPaintVertexArray,Mr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=M.createVertexBuffer(this.zoomOutPaintVertexArray,Mr.members,this.expression.isStateDependent))},Ma.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var ma=function(M,D,K){this.binders={},this._buffers=[];var de=[];for(var Ee in M.paint._values)if(K(Ee)){var Be=M.paint.get(Ee);if(Be instanceof la&&Ps(Be.property.specification)){var Ye=$s(Ee,M.type),at=Be.value,mt=Be.property.specification.type,Et=Be.property.useIntegerZoom,Lt=Be.property.specification["property-type"],Wt="cross-faded"===Lt||"cross-faded-data-driven"===Lt;if("constant"===at.kind)this.binders[Ee]=Wt?new ga(at.value,Ye):new Pi(at.value,Ye,mt),de.push("/u_"+Ee);else if("source"===at.kind||Wt){var en=hc(Ee,mt,"source");this.binders[Ee]=Wt?new Ma(at,mt,Et,D,en,M.id):new ia(at,Ye,mt,en),de.push("/a_"+Ee)}else{var Xt=hc(Ee,mt,"composite");this.binders[Ee]=new bi(at,Ye,mt,Et,D,Xt),de.push("/z_"+Ee)}}}this.cacheKey=de.sort().join("")};ma.prototype.getMaxValue=function(M){var D=this.binders[M];return D instanceof ia||D instanceof bi?D.maxValue:0},ma.prototype.populatePaintArrays=function(M,D,K,de,Ee){for(var Be in this.binders){var Ye=this.binders[Be];(Ye instanceof ia||Ye instanceof bi||Ye instanceof Ma)&&Ye.populatePaintArray(M,D,K,de,Ee)}},ma.prototype.setConstantPatternPositions=function(M,D){for(var K in this.binders){var de=this.binders[K];de instanceof ga&&de.setConstantPatternPositions(M,D)}},ma.prototype.updatePaintArrays=function(M,D,K,de,Ee){var Be=!1;for(var Ye in M)for(var at=0,mt=D.getPositions(Ye);at<mt.length;at+=1){var Et=mt[at],Lt=K.feature(Et.index);for(var Wt in this.binders){var en=this.binders[Wt];if((en instanceof ia||en instanceof bi||en instanceof Ma)&&!0===en.expression.isStateDependent){var Xt=de.paint.get(Wt);en.expression=Xt.value,en.updatePaintArray(Et.start,Et.end,Lt,M[Ye],Ee),Be=!0}}}return Be},ma.prototype.defines=function(){var M=[];for(var D in this.binders){var K=this.binders[D];(K instanceof Pi||K instanceof ga)&&M.push.apply(M,K.uniformNames.map(function(de){return"#define HAS_UNIFORM_"+de}))}return M},ma.prototype.getBinderAttributes=function(){var M=[];for(var D in this.binders){var K=this.binders[D];if(K instanceof ia||K instanceof bi)for(var de=0;de<K.paintVertexAttributes.length;de++)M.push(K.paintVertexAttributes[de].name);else if(K instanceof Ma)for(var Ee=0;Ee<Mr.members.length;Ee++)M.push(Mr.members[Ee].name)}return M},ma.prototype.getBinderUniforms=function(){var M=[];for(var D in this.binders){var K=this.binders[D];if(K instanceof Pi||K instanceof ga||K instanceof bi)for(var de=0,Ee=K.uniformNames;de<Ee.length;de+=1)M.push(Ee[de])}return M},ma.prototype.getPaintVertexBuffers=function(){return this._buffers},ma.prototype.getUniforms=function(M,D){var K=[];for(var de in this.binders){var Ee=this.binders[de];if(Ee instanceof Pi||Ee instanceof ga||Ee instanceof bi)for(var Be=0,Ye=Ee.uniformNames;Be<Ye.length;Be+=1){var at=Ye[Be];if(D[at]){var mt=Ee.getBinding(M,D[at],at);K.push({name:at,property:de,binding:mt})}}}return K},ma.prototype.setUniforms=function(M,D,K,de){for(var Ee=0,Be=D;Ee<Be.length;Ee+=1){var Ye=Be[Ee],at=Ye.name,mt=Ye.property;this.binders[mt].setUniform(Ye.binding,de,K.get(mt),at)}},ma.prototype.updatePaintBuffers=function(M){for(var D in this._buffers=[],this.binders){var K=this.binders[D];if(M&&K instanceof Ma){var de=2===M.fromScale?K.zoomInPaintVertexBuffer:K.zoomOutPaintVertexBuffer;de&&this._buffers.push(de)}else(K instanceof ia||K instanceof bi)&&K.paintVertexBuffer&&this._buffers.push(K.paintVertexBuffer)}},ma.prototype.upload=function(M){for(var D in this.binders){var K=this.binders[D];(K instanceof ia||K instanceof bi||K instanceof Ma)&&K.upload(M)}this.updatePaintBuffers()},ma.prototype.destroy=function(){for(var M in this.binders){var D=this.binders[M];(D instanceof ia||D instanceof bi||D instanceof Ma)&&D.destroy()}};var Wa=function(M,D,K){void 0===K&&(K=function(){return!0}),this.programConfigurations={};for(var de=0,Ee=M;de<Ee.length;de+=1){var Be=Ee[de];this.programConfigurations[Be.id]=new ma(Be,D,K)}this.needsUpload=!1,this._featureMap=new Sr,this._bufferOffset=0};function $s(M,D){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[M]||[M.replace(D+"-","").replace(/-/g,"_")]}function hc(M,D,K){var Ee={"line-pattern":{source:j,composite:j},"fill-pattern":{source:j,composite:j},"fill-extrusion-pattern":{source:j,composite:j}}[M];return Ee&&Ee[K]||{color:{source:pt,composite:It},number:{source:Xe,composite:pt}}[D][K]}Wa.prototype.populatePaintArrays=function(M,D,K,de,Ee,Be){for(var Ye in this.programConfigurations)this.programConfigurations[Ye].populatePaintArrays(M,D,de,Ee,Be);void 0!==D.id&&this._featureMap.add(D.id,K,this._bufferOffset,M),this._bufferOffset=M,this.needsUpload=!0},Wa.prototype.updatePaintArrays=function(M,D,K,de){for(var Ee=0,Be=K;Ee<Be.length;Ee+=1){var Ye=Be[Ee];this.needsUpload=this.programConfigurations[Ye.id].updatePaintArrays(M,this._featureMap,D,Ye,de)||this.needsUpload}},Wa.prototype.get=function(M){return this.programConfigurations[M]},Wa.prototype.upload=function(M){if(this.needsUpload){for(var D in this.programConfigurations)this.programConfigurations[D].upload(M);this.needsUpload=!1}},Wa.prototype.destroy=function(){for(var M in this.programConfigurations)this.programConfigurations[M].destroy()},$r("ConstantBinder",Pi),$r("CrossFadedConstantBinder",ga),$r("SourceExpressionBinder",ia),$r("CrossFadedCompositeBinder",Ma),$r("CompositeExpressionBinder",bi),$r("ProgramConfiguration",ma,{omit:["_buffers"]}),$r("ProgramConfigurationSet",Wa);var Oi=8192,fc=Math.pow(2,14)-1,dc=-fc-1;function Bs(M){for(var D=Oi/M.extent,K=M.loadGeometry(),de=0;de<K.length;de++)for(var Ee=K[de],Be=0;Be<Ee.length;Be++){var Ye=Ee[Be],at=Math.round(Ye.x*D),mt=Math.round(Ye.y*D);Ye.x=c(at,dc,fc),Ye.y=c(mt,dc,fc),(at<Ye.x||at>Ye.x+1||mt<Ye.y||mt>Ye.y+1)&&E("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return K}function xa(M,D){return{type:M.type,id:M.id,properties:M.properties,geometry:D?Bs(M):[]}}function Ro(M,D,K,de,Ee){M.emplaceBack(2*D+(de+1)/2,2*K+(Ee+1)/2)}var Yi=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(D){return D.id}),this.index=M.index,this.hasPattern=!1,this.layoutVertexArray=new os,this.indexArray=new ke,this.segments=new sr,this.programConfigurations=new Wa(M.layers,M.zoom),this.stateDependentLayerIds=this.layers.filter(function(D){return D.isStateDependent()}).map(function(D){return D.id})};function Kl(M,D){for(var K=0;K<M.length;K++)if(pl(D,M[K]))return!0;for(var de=0;de<D.length;de++)if(pl(M,D[de]))return!0;return!!$l(M,D)}function pc(M,D,K){return!!pl(M,D)||!!Ql(D,M,K)}function Jl(M,D){if(1===M.length)return Oc(D,M[0]);for(var K=0;K<D.length;K++)for(var de=D[K],Ee=0;Ee<de.length;Ee++)if(pl(M,de[Ee]))return!0;for(var Be=0;Be<M.length;Be++)if(Oc(D,M[Be]))return!0;for(var Ye=0;Ye<D.length;Ye++)if($l(M,D[Ye]))return!0;return!1}function gu(M,D,K){if(M.length>1){if($l(M,D))return!0;for(var de=0;de<D.length;de++)if(Ql(D[de],M,K))return!0}for(var Ee=0;Ee<M.length;Ee++)if(Ql(M[Ee],D,K))return!0;return!1}function $l(M,D){if(0===M.length||0===D.length)return!1;for(var K=0;K<M.length-1;K++)for(var de=M[K],Ee=M[K+1],Be=0;Be<D.length-1;Be++)if(Su(de,Ee,D[Be],D[Be+1]))return!0;return!1}function Su(M,D,K,de){return P(M,K,de)!==P(D,K,de)&&P(M,D,K)!==P(M,D,de)}function Ql(M,D,K){var de=K*K;if(1===D.length)return M.distSqr(D[0])<de;for(var Ee=1;Ee<D.length;Ee++)if(Cu(M,D[Ee-1],D[Ee])<de)return!0;return!1}function Cu(M,D,K){var de=D.distSqr(K);if(0===de)return M.distSqr(D);var Ee=((M.x-D.x)*(K.x-D.x)+(M.y-D.y)*(K.y-D.y))/de;return M.distSqr(Ee<0?D:Ee>1?K:K.sub(D)._mult(Ee)._add(D))}function Oc(M,D){for(var K,de,Ee,Be=!1,Ye=0;Ye<M.length;Ye++)for(var at=0,mt=(K=M[Ye]).length-1;at<K.length;mt=at++)(de=K[at]).y>D.y!=(Ee=K[mt]).y>D.y&&D.x<(Ee.x-de.x)*(D.y-de.y)/(Ee.y-de.y)+de.x&&(Be=!Be);return Be}function pl(M,D){for(var K=!1,de=0,Ee=M.length-1;de<M.length;Ee=de++){var Be=M[de],Ye=M[Ee];Be.y>D.y!=Ye.y>D.y&&D.x<(Ye.x-Be.x)*(D.y-Be.y)/(Ye.y-Be.y)+Be.x&&(K=!K)}return K}function tu(M,D,K){var de=K[0],Ee=K[2];if(M.x<de.x&&D.x<de.x||M.x>Ee.x&&D.x>Ee.x||M.y<de.y&&D.y<de.y||M.y>Ee.y&&D.y>Ee.y)return!1;var Be=P(M,D,K[0]);return Be!==P(M,D,K[1])||Be!==P(M,D,K[2])||Be!==P(M,D,K[3])}function Rc(M,D,K){var de=D.paint.get(M).value;return"constant"===de.kind?de.value:K.programConfigurations.get(D.id).getMaxValue(M)}function Ju(M){return Math.sqrt(M[0]*M[0]+M[1]*M[1])}function $u(M,D,K,de,Ee){if(!D[0]&&!D[1])return M;var Be=t.convert(D)._mult(Ee);"viewport"===K&&Be._rotate(-de);for(var Ye=[],at=0;at<M.length;at++)Ye.push(M[at].sub(Be));return Ye}Yi.prototype.populate=function(M,D,K){var de=this.layers[0],Ee=[],Be=null;"circle"===de.type&&(Be=de.layout.get("circle-sort-key"));for(var Ye=0,at=M;Ye<at.length;Ye+=1){var mt=at[Ye],Et=mt.feature,Lt=mt.id,Wt=mt.index,en=mt.sourceLayerIndex,Xt=this.layers[0]._featureFilter.needGeometry,vn=xa(Et,Xt);if(this.layers[0]._featureFilter.filter(new Ii(this.zoom),vn,K)){var bn=Be?Be.evaluate(vn,{},K):void 0,zn={id:Lt,properties:Et.properties,type:Et.type,sourceLayerIndex:en,index:Wt,geometry:Xt?vn.geometry:Bs(Et),patterns:{},sortKey:bn};Ee.push(zn)}}Be&&Ee.sort(function(Vr,Wr){return Vr.sortKey-Wr.sortKey});for(var Rn=0,Jn=Ee;Rn<Jn.length;Rn+=1){var nr=Jn[Rn],dr=nr.geometry,wr=nr.index,jr=nr.sourceLayerIndex,Rr=M[wr].feature;this.addFeature(nr,dr,wr,K),D.featureIndex.insert(Rr,dr,wr,jr,this.index)}},Yi.prototype.update=function(M,D,K){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,D,this.stateDependentLayers,K)},Yi.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Yi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Yi.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,Xn),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},Yi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Yi.prototype.addFeature=function(M,D,K,de){for(var Ee=0,Be=D;Ee<Be.length;Ee+=1)for(var Ye=0,at=Be[Ee];Ye<at.length;Ye+=1){var mt=at[Ye],Et=mt.x,Lt=mt.y;if(!(Et<0||Et>=Oi||Lt<0||Lt>=Oi)){var Wt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,M.sortKey),en=Wt.vertexLength;Ro(this.layoutVertexArray,Et,Lt,-1,-1),Ro(this.layoutVertexArray,Et,Lt,1,-1),Ro(this.layoutVertexArray,Et,Lt,1,1),Ro(this.layoutVertexArray,Et,Lt,-1,1),this.indexArray.emplaceBack(en,en+1,en+2),this.indexArray.emplaceBack(en,en+3,en+2),Wt.vertexLength+=4,Wt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,K,{},de)},$r("CircleBucket",Yi,{omit:["layers"]});var e0=new La({"circle-sort-key":new ti(tt.layout_circle["circle-sort-key"])}),t0={paint:new La({"circle-radius":new ti(tt.paint_circle["circle-radius"]),"circle-color":new ti(tt.paint_circle["circle-color"]),"circle-blur":new ti(tt.paint_circle["circle-blur"]),"circle-opacity":new ti(tt.paint_circle["circle-opacity"]),"circle-translate":new Xr(tt.paint_circle["circle-translate"]),"circle-translate-anchor":new Xr(tt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Xr(tt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Xr(tt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ti(tt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ti(tt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ti(tt.paint_circle["circle-stroke-opacity"])}),layout:e0},Qs=typeof Float32Array<"u"?Float32Array:Array;function Qu(M){return M[0]=1,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=1,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[10]=1,M[11]=0,M[12]=0,M[13]=0,M[14]=0,M[15]=1,M}function Vf(M,D,K){var de=D[0],Ee=D[1],Be=D[2],Ye=D[3],at=D[4],mt=D[5],Et=D[6],Lt=D[7],Wt=D[8],en=D[9],Xt=D[10],vn=D[11],bn=D[12],zn=D[13],Rn=D[14],Jn=D[15],nr=K[0],cr=K[1],dr=K[2],wr=K[3];return M[0]=nr*de+cr*at+dr*Wt+wr*bn,M[1]=nr*Ee+cr*mt+dr*en+wr*zn,M[2]=nr*Be+cr*Et+dr*Xt+wr*Rn,M[3]=nr*Ye+cr*Lt+dr*vn+wr*Jn,M[4]=(nr=K[4])*de+(cr=K[5])*at+(dr=K[6])*Wt+(wr=K[7])*bn,M[5]=nr*Ee+cr*mt+dr*en+wr*zn,M[6]=nr*Be+cr*Et+dr*Xt+wr*Rn,M[7]=nr*Ye+cr*Lt+dr*vn+wr*Jn,M[8]=(nr=K[8])*de+(cr=K[9])*at+(dr=K[10])*Wt+(wr=K[11])*bn,M[9]=nr*Ee+cr*mt+dr*en+wr*zn,M[10]=nr*Be+cr*Et+dr*Xt+wr*Rn,M[11]=nr*Ye+cr*Lt+dr*vn+wr*Jn,M[12]=(nr=K[12])*de+(cr=K[13])*at+(dr=K[14])*Wt+(wr=K[15])*bn,M[13]=nr*Ee+cr*mt+dr*en+wr*zn,M[14]=nr*Be+cr*Et+dr*Xt+wr*Rn,M[15]=nr*Ye+cr*Lt+dr*vn+wr*Jn,M}Math.hypot||(Math.hypot=function(){for(var M=arguments,D=0,K=arguments.length;K--;)D+=M[K]*M[K];return Math.sqrt(D)});var Gf,M,n0=Vf;function cf(M,D,K){var de=D[0],Ee=D[1],Be=D[2],Ye=D[3];return M[0]=K[0]*de+K[4]*Ee+K[8]*Be+K[12]*Ye,M[1]=K[1]*de+K[5]*Ee+K[9]*Be+K[13]*Ye,M[2]=K[2]*de+K[6]*Ee+K[10]*Be+K[14]*Ye,M[3]=K[3]*de+K[7]*Ee+K[11]*Be+K[15]*Ye,M}Gf=new Qs(3),Qs!=Float32Array&&(Gf[0]=0,Gf[1]=0,Gf[2]=0),M=new Qs(4),Qs!=Float32Array&&(M[0]=0,M[1]=0,M[2]=0,M[3]=0);var Ud=(function(){var M=new Qs(2);Qs!=Float32Array&&(M[0]=0,M[1]=0)}(),function(M){function D(K){M.call(this,K,t0)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype.createBucket=function(K){return new Yi(K)},D.prototype.queryRadius=function(K){var de=K;return Rc("circle-radius",this,de)+Rc("circle-stroke-width",this,de)+Ju(this.paint.get("circle-translate"))},D.prototype.queryIntersectsFeature=function(K,de,Ee,Be,Ye,at,mt,Et){for(var Lt=$u(K,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),at.angle,mt),Wt=this.paint.get("circle-radius").evaluate(de,Ee)+this.paint.get("circle-stroke-width").evaluate(de,Ee),en="map"===this.paint.get("circle-pitch-alignment"),Xt=en?Lt:function(jr,Rr){return jr.map(function(Vr){return uf(Vr,Rr)})}(Lt,Et),vn=en?Wt*mt:Wt,bn=0,zn=Be;bn<zn.length;bn+=1)for(var Rn=0,Jn=zn[bn];Rn<Jn.length;Rn+=1){var nr=Jn[Rn],cr=en?nr:uf(nr,Et),dr=vn,wr=cf([],[nr.x,nr.y,0,1],Et);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?dr*=wr[3]/at.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(dr*=at.cameraToCenterDistance/wr[3]),pc(Xt,cr,dr))return!0}return!1},D}(ta));function uf(M,D){var K=cf([],[M.x,M.y,0,1],D);return new t(K[0]/K[3],K[1]/K[3])}var qf=function(M){function D(){M.apply(this,arguments)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D}(Yi);function Ch(M,D,K,de){var Ee=D.width,Be=D.height;if(de){if(de instanceof Uint8ClampedArray)de=new Uint8Array(de.buffer);else if(de.length!==Ee*Be*K)throw new RangeError("mismatched image size")}else de=new Uint8Array(Ee*Be*K);return M.width=Ee,M.height=Be,M.data=de,M}function hf(M,D,K){var de=D.width,Ee=D.height;if(de!==M.width||Ee!==M.height){var Be=Ch({},{width:de,height:Ee},K);Eh(M,Be,{x:0,y:0},{x:0,y:0},{width:Math.min(M.width,de),height:Math.min(M.height,Ee)},K),M.width=de,M.height=Ee,M.data=Be.data}}function Eh(M,D,K,de,Ee,Be){if(0===Ee.width||0===Ee.height)return D;if(Ee.width>M.width||Ee.height>M.height||K.x>M.width-Ee.width||K.y>M.height-Ee.height)throw new RangeError("out of range source coordinates for image copy");if(Ee.width>D.width||Ee.height>D.height||de.x>D.width-Ee.width||de.y>D.height-Ee.height)throw new RangeError("out of range destination coordinates for image copy");for(var Ye=M.data,at=D.data,mt=0;mt<Ee.height;mt++)for(var Et=((K.y+mt)*M.width+K.x)*Be,Lt=((de.y+mt)*D.width+de.x)*Be,Wt=0;Wt<Ee.width*Be;Wt++)at[Lt+Wt]=Ye[Et+Wt];return D}$r("HeatmapBucket",qf,{omit:["layers"]});var mu=function(M,D){Ch(this,M,1,D)};mu.prototype.resize=function(M){hf(this,M,1)},mu.prototype.clone=function(){return new mu({width:this.width,height:this.height},new Uint8Array(this.data))},mu.copy=function(M,D,K,de,Ee){Eh(M,D,K,de,Ee,1)};var fo=function(M,D){Ch(this,M,4,D)};fo.prototype.resize=function(M){hf(this,M,4)},fo.prototype.replace=function(M,D){D?this.data.set(M):this.data=M instanceof Uint8ClampedArray?new Uint8Array(M.buffer):M},fo.prototype.clone=function(){return new fo({width:this.width,height:this.height},new Uint8Array(this.data))},fo.copy=function(M,D,K,de,Ee){Eh(M,D,K,de,Ee,4)},$r("AlphaImage",mu),$r("RGBAImage",fo);var a0={paint:new La({"heatmap-radius":new ti(tt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ti(tt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Xr(tt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new as(tt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Xr(tt.paint_heatmap["heatmap-opacity"])})};function ff(M){var D={},K=M.resolution||256,de=M.clips?M.clips.length:1,Ee=M.image||new fo({width:K,height:de}),Be=function(vn,bn,zn){D[M.evaluationKey]=zn;var Rn=M.expression.evaluate(D);Ee.data[vn+bn+0]=Math.floor(255*Rn.r/Rn.a),Ee.data[vn+bn+1]=Math.floor(255*Rn.g/Rn.a),Ee.data[vn+bn+2]=Math.floor(255*Rn.b/Rn.a),Ee.data[vn+bn+3]=Math.floor(255*Rn.a)};if(M.clips)for(var Ye=0,at=0;Ye<de;++Ye,at+=4*K)for(var mt=0,Et=0;mt<K;mt++,Et+=4){var Lt=mt/(K-1),Wt=M.clips[Ye];Be(at,Et,Wt.start*(1-Lt)+Wt.end*Lt)}else for(var en=0,Xt=0;en<K;en++,Xt+=4)Be(0,Xt,en/(K-1));return Ee}var Vd=function(M){function D(K){M.call(this,K,a0),this._updateColorRamp()}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype.createBucket=function(K){return new qf(K)},D.prototype._handleSpecialPaintPropertyUpdate=function(K){"heatmap-color"===K&&this._updateColorRamp()},D.prototype._updateColorRamp=function(){this.colorRamp=ff({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},D.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},D.prototype.queryRadius=function(){return 0},D.prototype.queryIntersectsFeature=function(){return!1},D.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},D}(ta),cg={paint:new La({"hillshade-illumination-direction":new Xr(tt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Xr(tt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Xr(tt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Xr(tt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Xr(tt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Xr(tt.paint_hillshade["hillshade-accent-color"])})},Gd=function(M){function D(K){M.call(this,K,cg)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},D}(ta),eh=ra([{name:"a_pos",components:2,type:"Int16"}],4).members,df=Eu,Wf=Eu;function Eu(M,D,K){K=K||2;var de,Ee,Be,Ye,at,mt,Et,Lt=D&&D.length,Wt=Lt?D[0]*K:M.length,en=Hd(M,0,Wt,K,!0),Xt=[];if(!en||en.next===en.prev)return Xt;if(Lt&&(en=function(bn,zn,Rn,Jn){var nr,cr,dr,wr=[];for(nr=0,cr=zn.length;nr<cr;nr++)(dr=Hd(bn,zn[nr]*Jn,nr<cr-1?zn[nr+1]*Jn:bn.length,Jn,!1))===dr.next&&(dr.steiner=!0),wr.push(Ns(dr));for(wr.sort(Ll),nr=0;nr<wr.length;nr++)ss(wr[nr],Rn),Rn=Dc(Rn,Rn.next);return Rn}(M,D,en,K)),M.length>80*K){de=Be=M[0],Ee=Ye=M[1];for(var vn=K;vn<Wt;vn+=K)(at=M[vn])<de&&(de=at),(mt=M[vn+1])<Ee&&(Ee=mt),at>Be&&(Be=at),mt>Ye&&(Ye=mt);Et=0!==(Et=Math.max(Be-de,Ye-Ee))?1/Et:0}return Ih(en,Xt,K,de,Ee,Et),Xt}function Hd(M,D,K,de,Ee){var Be,Ye;if(Ee===Zf(M,D,K,de)>0)for(Be=D;Be<K;Be+=de)Ye=qd(Be,M[Be],M[Be+1],Ye);else for(Be=K-de;Be>=D;Be-=de)Ye=qd(Be,M[Be],M[Be+1],Ye);return Ye&&pf(Ye,Ye.next)&&(ca(Ye),Ye=Ye.next),Ye}function Dc(M,D){if(!M)return M;D||(D=M);var K,de=M;do{if(K=!1,de.steiner||!pf(de,de.next)&&0!==Zi(de.prev,de,de.next))de=de.next;else{if(ca(de),(de=D=de.prev)===de.next)break;K=!0}}while(K||de!==D);return D}function Ih(M,D,K,de,Ee,Be,Ye){if(M){!Ye&&Be&&function(Lt,Wt,en,Xt){var vn=Lt;do{null===vn.z&&(vn.z=Lu(vn.x,vn.y,Wt,en,Xt)),vn.prevZ=vn.prev,vn.nextZ=vn.next,vn=vn.next}while(vn!==Lt);vn.prevZ.nextZ=null,vn.prevZ=null,function(bn){var zn,Rn,Jn,nr,cr,dr,wr,jr,Rr=1;do{for(Rn=bn,bn=null,cr=null,dr=0;Rn;){for(dr++,Jn=Rn,wr=0,zn=0;zn<Rr&&(wr++,Jn=Jn.nextZ);zn++);for(jr=Rr;wr>0||jr>0&&Jn;)0!==wr&&(0===jr||!Jn||Rn.z<=Jn.z)?(nr=Rn,Rn=Rn.nextZ,wr--):(nr=Jn,Jn=Jn.nextZ,jr--),cr?cr.nextZ=nr:bn=nr,nr.prevZ=cr,cr=nr;Rn=Jn}cr.nextZ=null,Rr*=2}while(dr>1)}(vn)}(M,de,Ee,Be);for(var at,mt,Et=M;M.prev!==M.next;)if(at=M.prev,mt=M.next,Be?th(M,de,Ee,Be):Iu(M))D.push(at.i/K),D.push(M.i/K),D.push(mt.i/K),ca(M),M=mt.next,Et=mt.next;else if((M=mt)===Et){Ye?1===Ye?Ih(M=_o(Dc(M),D,K),D,K,de,Ee,Be,2):2===Ye&&ui(M,D,K,de,Ee,Be):Ih(Dc(M),D,K,de,Ee,Be,1);break}}}function Iu(M){var D=M.prev,K=M,de=M.next;if(Zi(D,K,de)>=0)return!1;for(var Ee=M.next.next;Ee!==M.prev;){if(Pu(D.x,D.y,K.x,K.y,de.x,de.y,Ee.x,Ee.y)&&Zi(Ee.prev,Ee,Ee.next)>=0)return!1;Ee=Ee.next}return!0}function th(M,D,K,de){var Ee=M.prev,Be=M,Ye=M.next;if(Zi(Ee,Be,Ye)>=0)return!1;for(var Et=Ee.x>Be.x?Ee.x>Ye.x?Ee.x:Ye.x:Be.x>Ye.x?Be.x:Ye.x,Lt=Ee.y>Be.y?Ee.y>Ye.y?Ee.y:Ye.y:Be.y>Ye.y?Be.y:Ye.y,Wt=Lu(Ee.x<Be.x?Ee.x<Ye.x?Ee.x:Ye.x:Be.x<Ye.x?Be.x:Ye.x,Ee.y<Be.y?Ee.y<Ye.y?Ee.y:Ye.y:Be.y<Ye.y?Be.y:Ye.y,D,K,de),en=Lu(Et,Lt,D,K,de),Xt=M.prevZ,vn=M.nextZ;Xt&&Xt.z>=Wt&&vn&&vn.z<=en;){if(Xt!==M.prev&&Xt!==M.next&&Pu(Ee.x,Ee.y,Be.x,Be.y,Ye.x,Ye.y,Xt.x,Xt.y)&&Zi(Xt.prev,Xt,Xt.next)>=0||(Xt=Xt.prevZ,vn!==M.prev&&vn!==M.next&&Pu(Ee.x,Ee.y,Be.x,Be.y,Ye.x,Ye.y,vn.x,vn.y)&&Zi(vn.prev,vn,vn.next)>=0))return!1;vn=vn.nextZ}for(;Xt&&Xt.z>=Wt;){if(Xt!==M.prev&&Xt!==M.next&&Pu(Ee.x,Ee.y,Be.x,Be.y,Ye.x,Ye.y,Xt.x,Xt.y)&&Zi(Xt.prev,Xt,Xt.next)>=0)return!1;Xt=Xt.prevZ}for(;vn&&vn.z<=en;){if(vn!==M.prev&&vn!==M.next&&Pu(Ee.x,Ee.y,Be.x,Be.y,Ye.x,Ye.y,vn.x,vn.y)&&Zi(vn.prev,vn,vn.next)>=0)return!1;vn=vn.nextZ}return!0}function _o(M,D,K){var de=M;do{var Ee=de.prev,Be=de.next.next;!pf(Ee,Be)&&gc(Ee,de,de.next,Be)&&Lh(Ee,Be)&&Lh(Be,Ee)&&(D.push(Ee.i/K),D.push(de.i/K),D.push(Be.i/K),ca(de),ca(de.next),de=M=Be),de=de.next}while(de!==M);return Dc(de)}function ui(M,D,K,de,Ee,Be){var Ye=M;do{for(var at=Ye.next.next;at!==Ye.prev;){if(Ye.i!==at.i&&o0(Ye,at)){var mt=Yf(Ye,at);return Ye=Dc(Ye,Ye.next),mt=Dc(mt,mt.next),Ih(Ye,D,K,de,Ee,Be),void Ih(mt,D,K,de,Ee,Be)}at=at.next}Ye=Ye.next}while(Ye!==M)}function Ll(M,D){return M.x-D.x}function ss(M,D){if(D=function(de,Ee){var Be,Ye=Ee,at=de.x,mt=de.y,Et=-1/0;do{if(mt<=Ye.y&&mt>=Ye.next.y&&Ye.next.y!==Ye.y){var Lt=Ye.x+(mt-Ye.y)*(Ye.next.x-Ye.x)/(Ye.next.y-Ye.y);if(Lt<=at&&Lt>Et){if(Et=Lt,Lt===at){if(mt===Ye.y)return Ye;if(mt===Ye.next.y)return Ye.next}Be=Ye.x<Ye.next.x?Ye:Ye.next}}Ye=Ye.next}while(Ye!==Ee);if(!Be)return null;if(at===Et)return Be;var Wt,en=Be,Xt=Be.x,vn=Be.y,bn=1/0;Ye=Be;do{at>=Ye.x&&Ye.x>=Xt&&at!==Ye.x&&Pu(mt<vn?at:Et,mt,Xt,vn,mt<vn?Et:at,mt,Ye.x,Ye.y)&&(Wt=Math.abs(mt-Ye.y)/(at-Ye.x),Lh(Ye,de)&&(Wt<bn||Wt===bn&&(Ye.x>Be.x||Ye.x===Be.x&&zc(Be,Ye)))&&(Be=Ye,bn=Wt)),Ye=Ye.next}while(Ye!==en);return Be}(M,D)){var K=Yf(D,M);Dc(D,D.next),Dc(K,K.next)}}function zc(M,D){return Zi(M.prev,M,D.prev)<0&&Zi(D.next,M,M.next)<0}function Lu(M,D,K,de,Ee){return(M=1431655765&((M=858993459&((M=252645135&((M=16711935&((M=32767*(M-K)*Ee)|M<<8))|M<<4))|M<<2))|M<<1))|(D=1431655765&((D=858993459&((D=252645135&((D=16711935&((D=32767*(D-de)*Ee)|D<<8))|D<<4))|D<<2))|D<<1))<<1}function Ns(M){var D=M,K=M;do{(D.x<K.x||D.x===K.x&&D.y<K.y)&&(K=D),D=D.next}while(D!==M);return K}function Pu(M,D,K,de,Ee,Be,Ye,at){return(Ee-Ye)*(D-at)-(M-Ye)*(Be-at)>=0&&(M-Ye)*(de-at)-(K-Ye)*(D-at)>=0&&(K-Ye)*(Be-at)-(Ee-Ye)*(de-at)>=0}function o0(M,D){return M.next.i!==D.i&&M.prev.i!==D.i&&!function(K,de){var Ee=K;do{if(Ee.i!==K.i&&Ee.next.i!==K.i&&Ee.i!==de.i&&Ee.next.i!==de.i&&gc(Ee,Ee.next,K,de))return!0;Ee=Ee.next}while(Ee!==K);return!1}(M,D)&&(Lh(M,D)&&Lh(D,M)&&function(K,de){var Ee=K,Be=!1,Ye=(K.x+de.x)/2,at=(K.y+de.y)/2;do{Ee.y>at!=Ee.next.y>at&&Ee.next.y!==Ee.y&&Ye<(Ee.next.x-Ee.x)*(at-Ee.y)/(Ee.next.y-Ee.y)+Ee.x&&(Be=!Be),Ee=Ee.next}while(Ee!==K);return Be}(M,D)&&(Zi(M.prev,M,D.prev)||Zi(M,D.prev,D))||pf(M,D)&&Zi(M.prev,M,M.next)>0&&Zi(D.prev,D,D.next)>0)}function Zi(M,D,K){return(D.y-M.y)*(K.x-D.x)-(D.x-M.x)*(K.y-D.y)}function pf(M,D){return M.x===D.x&&M.y===D.y}function gc(M,D,K,de){var Ee=mc(Zi(M,D,K)),Be=mc(Zi(M,D,de)),Ye=mc(Zi(K,de,M)),at=mc(Zi(K,de,D));return Ee!==Be&&Ye!==at||!(0!==Ee||!Ou(M,K,D))||!(0!==Be||!Ou(M,de,D))||!(0!==Ye||!Ou(K,M,de))||!(0!==at||!Ou(K,D,de))}function Ou(M,D,K){return D.x<=Math.max(M.x,K.x)&&D.x>=Math.min(M.x,K.x)&&D.y<=Math.max(M.y,K.y)&&D.y>=Math.min(M.y,K.y)}function mc(M){return M>0?1:M<0?-1:0}function Lh(M,D){return Zi(M.prev,M,M.next)<0?Zi(M,D,M.next)>=0&&Zi(M,M.prev,D)>=0:Zi(M,D,M.prev)<0||Zi(M,M.next,D)<0}function Yf(M,D){var K=new Ir(M.i,M.x,M.y),de=new Ir(D.i,D.x,D.y),Ee=M.next,Be=D.prev;return M.next=D,D.prev=M,K.next=Ee,Ee.prev=K,de.next=K,K.prev=de,Be.next=de,de.prev=Be,de}function qd(M,D,K,de){var Ee=new Ir(M,D,K);return de?(Ee.next=de.next,Ee.prev=de,de.next.prev=Ee,de.next=Ee):(Ee.prev=Ee,Ee.next=Ee),Ee}function ca(M){M.next.prev=M.prev,M.prev.next=M.next,M.prevZ&&(M.prevZ.nextZ=M.nextZ),M.nextZ&&(M.nextZ.prevZ=M.prevZ)}function Ir(M,D,K){this.i=M,this.x=D,this.y=K,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Zf(M,D,K,de){for(var Ee=0,Be=D,Ye=K-de;Be<K;Be+=de)Ee+=(M[Ye]-M[Be])*(M[Be+1]+M[Ye+1]),Ye=Be;return Ee}function s0(M,D,K,de,Ee){Wd(M,D,K||0,de||M.length-1,Ee||l0)}function Wd(M,D,K,de,Ee){for(;de>K;){if(de-K>600){var Be=de-K+1,Ye=D-K+1,at=Math.log(Be),mt=.5*Math.exp(2*at/3),Et=.5*Math.sqrt(at*mt*(Be-mt)/Be)*(Ye-Be/2<0?-1:1);Wd(M,D,Math.max(K,Math.floor(D-Ye*mt/Be+Et)),Math.min(de,Math.floor(D+(Be-Ye)*mt/Be+Et)),Ee)}var Lt=M[D],Wt=K,en=de;for(Ph(M,K,D),Ee(M[de],Lt)>0&&Ph(M,K,de);Wt<en;){for(Ph(M,Wt,en),Wt++,en--;Ee(M[Wt],Lt)<0;)Wt++;for(;Ee(M[en],Lt)>0;)en--}0===Ee(M[K],Lt)?Ph(M,K,en):Ph(M,++en,de),en<=D&&(K=en+1),D<=en&&(de=en-1)}}function Ph(M,D,K){var de=M[D];M[D]=M[K],M[K]=de}function l0(M,D){return M<D?-1:M>D?1:0}function Ru(M,D){var K=M.length;if(K<=1)return[M];for(var de,Ee,Be=[],Ye=0;Ye<K;Ye++){var at=L(M[Ye]);0!==at&&(M[Ye].area=Math.abs(at),void 0===Ee&&(Ee=at<0),Ee===at<0?(de&&Be.push(de),de=[M[Ye]]):de.push(M[Ye]))}if(de&&Be.push(de),D>1)for(var mt=0;mt<Be.length;mt++)Be[mt].length<=D||(s0(Be[mt],D,1,Be[mt].length-1,ji),Be[mt]=Be[mt].slice(0,D));return Be}function ji(M,D){return D.area-M.area}function aa(M,D,K){for(var de=K.patternDependencies,Ee=!1,Be=0,Ye=D;Be<Ye.length;Be+=1){var at=Ye[Be].paint.get(M+"-pattern");at.isConstant()||(Ee=!0);var mt=at.constantOr(null);mt&&(Ee=!0,de[mt.to]=!0,de[mt.from]=!0)}return Ee}function Fc(M,D,K,de,Ee){for(var Be=Ee.patternDependencies,Ye=0,at=D;Ye<at.length;Ye+=1){var mt=at[Ye],Et=mt.paint.get(M+"-pattern").value;if("constant"!==Et.kind){var Lt=Et.evaluate({zoom:de-1},K,{},Ee.availableImages),Wt=Et.evaluate({zoom:de},K,{},Ee.availableImages),en=Et.evaluate({zoom:de+1},K,{},Ee.availableImages);Wt=Wt&&Wt.name?Wt.name:Wt,en=en&&en.name?en.name:en,Be[Lt=Lt&&Lt.name?Lt.name:Lt]=!0,Be[Wt]=!0,Be[en]=!0,K.patterns[mt.id]={min:Lt,mid:Wt,max:en}}}return K}Eu.deviation=function(M,D,K,de){var Ee=D&&D.length,Ye=Math.abs(Zf(M,0,Ee?D[0]*K:M.length,K));if(Ee)for(var at=0,mt=D.length;at<mt;at++)Ye-=Math.abs(Zf(M,D[at]*K,at<mt-1?D[at+1]*K:M.length,K));var Wt=0;for(at=0;at<de.length;at+=3){var en=de[at]*K,Xt=de[at+1]*K,vn=de[at+2]*K;Wt+=Math.abs((M[en]-M[vn])*(M[Xt+1]-M[en+1])-(M[en]-M[Xt])*(M[vn+1]-M[en+1]))}return 0===Ye&&0===Wt?0:Math.abs((Wt-Ye)/Ye)},Eu.flatten=function(M){for(var D=M[0][0].length,K={vertices:[],holes:[],dimensions:D},de=0,Ee=0;Ee<M.length;Ee++){for(var Be=0;Be<M[Ee].length;Be++)for(var Ye=0;Ye<D;Ye++)K.vertices.push(M[Ee][Be][Ye]);Ee>0&&K.holes.push(de+=M[Ee-1].length)}return K},df.default=Wf;var vc=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(D){return D.id}),this.index=M.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new os,this.indexArray=new ke,this.indexArray2=new vt,this.programConfigurations=new Wa(M.layers,M.zoom),this.segments=new sr,this.segments2=new sr,this.stateDependentLayerIds=this.layers.filter(function(D){return D.isStateDependent()}).map(function(D){return D.id})};vc.prototype.populate=function(M,D,K){this.hasPattern=aa("fill",this.layers,D);for(var de=this.layers[0].layout.get("fill-sort-key"),Ee=[],Be=0,Ye=M;Be<Ye.length;Be+=1){var at=Ye[Be],mt=at.feature,Et=at.id,Lt=at.index,Wt=at.sourceLayerIndex,en=this.layers[0]._featureFilter.needGeometry,Xt=xa(mt,en);if(this.layers[0]._featureFilter.filter(new Ii(this.zoom),Xt,K)){var vn=de?de.evaluate(Xt,{},K,D.availableImages):void 0,bn={id:Et,properties:mt.properties,type:mt.type,sourceLayerIndex:Wt,index:Lt,geometry:en?Xt.geometry:Bs(mt),patterns:{},sortKey:vn};Ee.push(bn)}}de&&Ee.sort(function(Vr,Wr){return Vr.sortKey-Wr.sortKey});for(var zn=0,Rn=Ee;zn<Rn.length;zn+=1){var Jn=Rn[zn],cr=Jn.geometry,dr=Jn.index,wr=Jn.sourceLayerIndex;if(this.hasPattern){var jr=Fc("fill",this.layers,Jn,this.zoom,D);this.patternFeatures.push(jr)}else this.addFeature(Jn,cr,dr,K,{});D.featureIndex.insert(M[dr].feature,cr,dr,wr,this.index)}},vc.prototype.update=function(M,D,K){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,D,this.stateDependentLayers,K)},vc.prototype.addFeatures=function(M,D,K){for(var de=0,Ee=this.patternFeatures;de<Ee.length;de+=1){var Be=Ee[de];this.addFeature(Be,Be.geometry,Be.index,D,K)}},vc.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},vc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},vc.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,eh),this.indexBuffer=M.createIndexBuffer(this.indexArray),this.indexBuffer2=M.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(M),this.uploaded=!0},vc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},vc.prototype.addFeature=function(M,D,K,de,Ee){for(var Be=0,Ye=Ru(D,500);Be<Ye.length;Be+=1){for(var at=Ye[Be],mt=0,Et=0,Lt=at;Et<Lt.length;Et+=1)mt+=Lt[Et].length;for(var Wt=this.segments.prepareSegment(mt,this.layoutVertexArray,this.indexArray),en=Wt.vertexLength,Xt=[],vn=[],bn=0,zn=at;bn<zn.length;bn+=1){var Rn=zn[bn];if(0!==Rn.length){Rn!==at[0]&&vn.push(Xt.length/2);var Jn=this.segments2.prepareSegment(Rn.length,this.layoutVertexArray,this.indexArray2),nr=Jn.vertexLength;this.layoutVertexArray.emplaceBack(Rn[0].x,Rn[0].y),this.indexArray2.emplaceBack(nr+Rn.length-1,nr),Xt.push(Rn[0].x),Xt.push(Rn[0].y);for(var cr=1;cr<Rn.length;cr++)this.layoutVertexArray.emplaceBack(Rn[cr].x,Rn[cr].y),this.indexArray2.emplaceBack(nr+cr-1,nr+cr),Xt.push(Rn[cr].x),Xt.push(Rn[cr].y);Jn.vertexLength+=Rn.length,Jn.primitiveLength+=Rn.length}}for(var dr=df(Xt,vn),wr=0;wr<dr.length;wr+=3)this.indexArray.emplaceBack(en+dr[wr],en+dr[wr+1],en+dr[wr+2]);Wt.vertexLength+=mt,Wt.primitiveLength+=dr.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,K,Ee,de)},$r("FillBucket",vc,{omit:["layers","patternFeatures"]});var Yd=new La({"fill-sort-key":new ti(tt.layout_fill["fill-sort-key"])}),c0={paint:new La({"fill-antialias":new Xr(tt.paint_fill["fill-antialias"]),"fill-opacity":new ti(tt.paint_fill["fill-opacity"]),"fill-color":new ti(tt.paint_fill["fill-color"]),"fill-outline-color":new ti(tt.paint_fill["fill-outline-color"]),"fill-translate":new Xr(tt.paint_fill["fill-translate"]),"fill-translate-anchor":new Xr(tt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Yo(tt.paint_fill["fill-pattern"])}),layout:Yd},u0=function(M){function D(K){M.call(this,K,c0)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype.recalculate=function(K,de){M.prototype.recalculate.call(this,K,de);var Ee=this.paint._values["fill-outline-color"];"constant"===Ee.value.kind&&void 0===Ee.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},D.prototype.createBucket=function(K){return new vc(K)},D.prototype.queryRadius=function(){return Ju(this.paint.get("fill-translate"))},D.prototype.queryIntersectsFeature=function(K,de,Ee,Be,Ye,at,mt){return Jl($u(K,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),at.angle,mt),Be)},D.prototype.isTileClipped=function(){return!0},D}(ta),h0=ra([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Zd=nh;function nh(M,D,K,de,Ee){this.properties={},this.extent=K,this.type=0,this._pbf=M,this._geometry=-1,this._keys=de,this._values=Ee,M.readFields(Si,this,D)}function Si(M,D,K){1==M?D.id=K.readVarint():2==M?function(de,Ee){for(var Be=de.readVarint()+de.pos;de.pos<Be;){var Ye=Ee._keys[de.readVarint()],at=Ee._values[de.readVarint()];Ee.properties[Ye]=at}}(K,D):3==M?D.type=K.readVarint():4==M&&(D._geometry=K.pos)}function f0(M){for(var D,K,de=0,Ee=0,Be=M.length,Ye=Be-1;Ee<Be;Ye=Ee++)de+=((K=M[Ye]).x-(D=M[Ee]).x)*(D.y+K.y);return de}nh.types=["Unknown","Point","LineString","Polygon"],nh.prototype.loadGeometry=function(){var M=this._pbf;M.pos=this._geometry;for(var D,K=M.readVarint()+M.pos,de=1,Ee=0,Be=0,Ye=0,at=[];M.pos<K;){if(Ee<=0){var mt=M.readVarint();de=7&mt,Ee=mt>>3}if(Ee--,1===de||2===de)Be+=M.readSVarint(),Ye+=M.readSVarint(),1===de&&(D&&at.push(D),D=[]),D.push(new t(Be,Ye));else{if(7!==de)throw new Error("unknown command "+de);D&&D.push(D[0].clone())}}return D&&at.push(D),at},nh.prototype.bbox=function(){var M=this._pbf;M.pos=this._geometry;for(var D=M.readVarint()+M.pos,K=1,de=0,Ee=0,Be=0,Ye=1/0,at=-1/0,mt=1/0,Et=-1/0;M.pos<D;){if(de<=0){var Lt=M.readVarint();K=7&Lt,de=Lt>>3}if(de--,1===K||2===K)(Ee+=M.readSVarint())<Ye&&(Ye=Ee),Ee>at&&(at=Ee),(Be+=M.readSVarint())<mt&&(mt=Be),Be>Et&&(Et=Be);else if(7!==K)throw new Error("unknown command "+K)}return[Ye,mt,at,Et]},nh.prototype.toGeoJSON=function(M,D,K){var de,Ee,Be=this.extent*Math.pow(2,K),Ye=this.extent*M,at=this.extent*D,mt=this.loadGeometry(),Et=nh.types[this.type];function Lt(Xt){for(var vn=0;vn<Xt.length;vn++){var bn=Xt[vn];Xt[vn]=[360*(bn.x+Ye)/Be-180,360/Math.PI*Math.atan(Math.exp((180-360*(bn.y+at)/Be)*Math.PI/180))-90]}}switch(this.type){case 1:var Wt=[];for(de=0;de<mt.length;de++)Wt[de]=mt[de][0];Lt(mt=Wt);break;case 2:for(de=0;de<mt.length;de++)Lt(mt[de]);break;case 3:for(mt=function(Xt){var vn=Xt.length;if(vn<=1)return[Xt];for(var bn,zn,Rn=[],Jn=0;Jn<vn;Jn++){var nr=f0(Xt[Jn]);0!==nr&&(void 0===zn&&(zn=nr<0),zn===nr<0?(bn&&Rn.push(bn),bn=[Xt[Jn]]):bn.push(Xt[Jn]))}return bn&&Rn.push(bn),Rn}(mt),de=0;de<mt.length;de++)for(Ee=0;Ee<mt[de].length;Ee++)Lt(mt[de][Ee])}1===mt.length?mt=mt[0]:Et="Multi"+Et;var en={type:"Feature",geometry:{type:Et,coordinates:mt},properties:this.properties};return"id"in this&&(en.id=this.id),en};var Xf=Kf;function Kf(M,D){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=M,this._keys=[],this._values=[],this._features=[],M.readFields(nu,this,D),this.length=this._features.length}function nu(M,D,K){15===M?D.version=K.readVarint():1===M?D.name=K.readString():5===M?D.extent=K.readVarint():2===M?D._features.push(K.pos):3===M?D._keys.push(K.readString()):4===M&&D._values.push(function(de){for(var Ee=null,Be=de.readVarint()+de.pos;de.pos<Be;){var Ye=de.readVarint()>>3;Ee=1===Ye?de.readString():2===Ye?de.readFloat():3===Ye?de.readDouble():4===Ye?de.readVarint64():5===Ye?de.readVarint():6===Ye?de.readSVarint():7===Ye?de.readBoolean():null}return Ee}(K))}function yc(M,D,K){if(3===M){var de=new Xf(K,K.readVarint()+K.pos);de.length&&(D[de.name]=de)}}Kf.prototype.feature=function(M){if(M<0||M>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[M];var D=this._pbf.readVarint()+this._pbf.pos;return new Zd(this._pbf,D,this.extent,this._keys,this._values)};var rh={VectorTile:function(M,D){this.layers=M.readFields(yc,{},D)},VectorTileFeature:Zd,VectorTileLayer:Xf},d0=rh.VectorTileFeature.types,Jf=Math.pow(2,13);function Oh(M,D,K,de,Ee,Be,Ye,at){M.emplaceBack(D,K,2*Math.floor(de*Jf)+Ye,Ee*Jf*2,Be*Jf*2,Math.round(at))}var xc=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(D){return D.id}),this.index=M.index,this.hasPattern=!1,this.layoutVertexArray=new rt,this.indexArray=new ke,this.programConfigurations=new Wa(M.layers,M.zoom),this.segments=new sr,this.stateDependentLayerIds=this.layers.filter(function(D){return D.isStateDependent()}).map(function(D){return D.id})};function p0(M,D){return M.x===D.x&&(M.x<0||M.x>Oi)||M.y===D.y&&(M.y<0||M.y>Oi)}xc.prototype.populate=function(M,D,K){this.features=[],this.hasPattern=aa("fill-extrusion",this.layers,D);for(var de=0,Ee=M;de<Ee.length;de+=1){var Be=Ee[de],Ye=Be.feature,at=Be.id,mt=Be.index,Et=Be.sourceLayerIndex,Lt=this.layers[0]._featureFilter.needGeometry,Wt=xa(Ye,Lt);if(this.layers[0]._featureFilter.filter(new Ii(this.zoom),Wt,K)){var en={id:at,sourceLayerIndex:Et,index:mt,geometry:Lt?Wt.geometry:Bs(Ye),properties:Ye.properties,type:Ye.type,patterns:{}};this.hasPattern?this.features.push(Fc("fill-extrusion",this.layers,en,this.zoom,D)):this.addFeature(en,en.geometry,mt,K,{}),D.featureIndex.insert(Ye,en.geometry,mt,Et,this.index,!0)}}},xc.prototype.addFeatures=function(M,D,K){for(var de=0,Ee=this.features;de<Ee.length;de+=1){var Be=Ee[de];this.addFeature(Be,Be.geometry,Be.index,D,K)}},xc.prototype.update=function(M,D,K){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,D,this.stateDependentLayers,K)},xc.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},xc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},xc.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,h0),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},xc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},xc.prototype.addFeature=function(M,D,K,de,Ee){for(var Be=0,Ye=Ru(D,500);Be<Ye.length;Be+=1){for(var at=Ye[Be],mt=0,Et=0,Lt=at;Et<Lt.length;Et+=1)mt+=Lt[Et].length;for(var Wt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),en=0,Xt=at;en<Xt.length;en+=1){var vn=Xt[en];if(0!==vn.length&&!((Fi=vn).every(function(_i){return _i.x<0})||Fi.every(function(_i){return _i.x>Oi})||Fi.every(function(_i){return _i.y<0})||Fi.every(function(_i){return _i.y>Oi})))for(var bn=0,zn=0;zn<vn.length;zn++){var Rn=vn[zn];if(zn>=1){var Jn=vn[zn-1];if(!p0(Rn,Jn)){Wt.vertexLength+4>sr.MAX_VERTEX_ARRAY_LENGTH&&(Wt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var nr=Rn.sub(Jn)._perp()._unit(),cr=Jn.dist(Rn);bn+cr>32768&&(bn=0),Oh(this.layoutVertexArray,Rn.x,Rn.y,nr.x,nr.y,0,0,bn),Oh(this.layoutVertexArray,Rn.x,Rn.y,nr.x,nr.y,0,1,bn),Oh(this.layoutVertexArray,Jn.x,Jn.y,nr.x,nr.y,0,0,bn+=cr),Oh(this.layoutVertexArray,Jn.x,Jn.y,nr.x,nr.y,0,1,bn);var dr=Wt.vertexLength;this.indexArray.emplaceBack(dr,dr+2,dr+1),this.indexArray.emplaceBack(dr+1,dr+2,dr+3),Wt.vertexLength+=4,Wt.primitiveLength+=2}}}}if(Wt.vertexLength+mt>sr.MAX_VERTEX_ARRAY_LENGTH&&(Wt=this.segments.prepareSegment(mt,this.layoutVertexArray,this.indexArray)),"Polygon"===d0[M.type]){for(var wr=[],jr=[],Rr=Wt.vertexLength,Vr=0,Wr=at;Vr<Wr.length;Vr+=1){var hi=Wr[Vr];if(0!==hi.length){hi!==at[0]&&jr.push(wr.length/2);for(var ri=0;ri<hi.length;ri++){var fi=hi[ri];Oh(this.layoutVertexArray,fi.x,fi.y,0,0,1,1,0),wr.push(fi.x),wr.push(fi.y)}}}for(var oi=df(wr,jr),ni=0;ni<oi.length;ni+=3)this.indexArray.emplaceBack(Rr+oi[ni],Rr+oi[ni+2],Rr+oi[ni+1]);Wt.primitiveLength+=oi.length/3,Wt.vertexLength+=mt}}var Fi;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,K,Ee,de)},$r("FillExtrusionBucket",xc,{omit:["layers","features"]});var g0={paint:new La({"fill-extrusion-opacity":new Xr(tt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ti(tt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Xr(tt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Xr(tt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Yo(tt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ti(tt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ti(tt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Xr(tt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},m0=function(M){function D(K){M.call(this,K,g0)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype.createBucket=function(K){return new xc(K)},D.prototype.queryRadius=function(){return Ju(this.paint.get("fill-extrusion-translate"))},D.prototype.is3D=function(){return!0},D.prototype.queryIntersectsFeature=function(K,de,Ee,Be,Ye,at,mt,Et){var Lt=$u(K,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),at.angle,mt),Wt=this.paint.get("fill-extrusion-height").evaluate(de,Ee),en=this.paint.get("fill-extrusion-base").evaluate(de,Ee),Xt=function(bn,zn,Rn,Jn){for(var nr=[],cr=0,dr=bn;cr<dr.length;cr+=1){var wr=dr[cr],jr=[wr.x,wr.y,0,1];cf(jr,jr,zn),nr.push(new t(jr[0]/jr[3],jr[1]/jr[3]))}return nr}(Lt,Et),vn=function(bn,zn,Rn,Jn){for(var nr=[],cr=[],dr=Jn[8]*zn,wr=Jn[9]*zn,jr=Jn[10]*zn,Rr=Jn[11]*zn,Vr=Jn[8]*Rn,Wr=Jn[9]*Rn,hi=Jn[10]*Rn,ri=Jn[11]*Rn,fi=0,oi=bn;fi<oi.length;fi+=1){for(var ni=[],Fi=[],_i=0,ha=oi[fi];_i<ha.length;_i+=1){var ci=ha[_i],oa=ci.x,_a=ci.y,sa=Jn[0]*oa+Jn[4]*_a+Jn[12],Ji=Jn[1]*oa+Jn[5]*_a+Jn[13],ba=Jn[2]*oa+Jn[6]*_a+Jn[14],no=Jn[3]*oa+Jn[7]*_a+Jn[15],Da=ba+jr,So=no+Rr,Jo=sa+Vr,Do=Ji+Wr,ls=ba+hi,zo=no+ri,ro=new t((sa+dr)/So,(Ji+wr)/So);ro.z=Da/So,ni.push(ro);var Fo=new t(Jo/zo,Do/zo);Fo.z=ls/zo,Fi.push(Fo)}nr.push(ni),cr.push(Fi)}return[nr,cr]}(Be,en,Wt,Et);return function(bn,zn,Rn){var Jn=1/0;Jl(Rn,zn)&&(Jn=ih(Rn,zn[0]));for(var nr=0;nr<zn.length;nr++)for(var cr=zn[nr],dr=bn[nr],wr=0;wr<cr.length-1;wr++){var jr=cr[wr],Wr=[jr,cr[wr+1],dr[wr+1],dr[wr],jr];Kl(Rn,Wr)&&(Jn=Math.min(Jn,ih(Rn,Wr)))}return Jn!==1/0&&Jn}(vn[0],vn[1],Xt)},D}(ta);function Rh(M,D){return M.x*D.x+M.y*D.y}function ih(M,D){if(1===M.length){for(var K,de=0,Ee=D[de++];!K||Ee.equals(K);)if(!(K=D[de++]))return 1/0;for(;de<D.length;de++){var Be=D[de],Ye=M[0],at=K.sub(Ee),mt=Be.sub(Ee),Et=Ye.sub(Ee),Lt=Rh(at,at),Wt=Rh(at,mt),en=Rh(mt,mt),Xt=Rh(Et,at),vn=Rh(Et,mt),bn=Lt*en-Wt*Wt,zn=(en*Xt-Wt*vn)/bn,Rn=(Lt*vn-Wt*Xt)/bn,nr=Ee.z*(1-zn-Rn)+K.z*zn+Be.z*Rn;if(isFinite(nr))return nr}return 1/0}for(var cr=1/0,dr=0,wr=D;dr<wr.length;dr+=1)cr=Math.min(cr,wr[dr].z);return cr}var v0=ra([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,y0=ra([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,x0=rh.VectorTileFeature.types,Xd=Math.cos(Math.PI/180*37.5),Kd=Math.pow(2,14)/.5,Xo=function(M){var D=this;this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(K){return K.id}),this.index=M.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(K){D.gradients[K.id]={}}),this.layoutVertexArray=new st,this.layoutVertexArray2=new pt,this.indexArray=new ke,this.programConfigurations=new Wa(M.layers,M.zoom),this.segments=new sr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(K){return K.isStateDependent()}).map(function(K){return K.id})};Xo.prototype.populate=function(M,D,K){this.hasPattern=aa("line",this.layers,D);for(var de=this.layers[0].layout.get("line-sort-key"),Ee=[],Be=0,Ye=M;Be<Ye.length;Be+=1){var at=Ye[Be],mt=at.feature,Et=at.id,Lt=at.index,Wt=at.sourceLayerIndex,en=this.layers[0]._featureFilter.needGeometry,Xt=xa(mt,en);if(this.layers[0]._featureFilter.filter(new Ii(this.zoom),Xt,K)){var vn=de?de.evaluate(Xt,{},K):void 0,bn={id:Et,properties:mt.properties,type:mt.type,sourceLayerIndex:Wt,index:Lt,geometry:en?Xt.geometry:Bs(mt),patterns:{},sortKey:vn};Ee.push(bn)}}de&&Ee.sort(function(Vr,Wr){return Vr.sortKey-Wr.sortKey});for(var zn=0,Rn=Ee;zn<Rn.length;zn+=1){var Jn=Rn[zn],cr=Jn.geometry,dr=Jn.index,wr=Jn.sourceLayerIndex;if(this.hasPattern){var jr=Fc("line",this.layers,Jn,this.zoom,D);this.patternFeatures.push(jr)}else this.addFeature(Jn,cr,dr,K,{});D.featureIndex.insert(M[dr].feature,cr,dr,wr,this.index)}},Xo.prototype.update=function(M,D,K){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,D,this.stateDependentLayers,K)},Xo.prototype.addFeatures=function(M,D,K){for(var de=0,Ee=this.patternFeatures;de<Ee.length;de+=1){var Be=Ee[de];this.addFeature(Be,Be.geometry,Be.index,D,K)}},Xo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Xo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Xo.prototype.upload=function(M){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=M.createVertexBuffer(this.layoutVertexArray2,y0)),this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,v0),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},Xo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Xo.prototype.lineFeatureClips=function(M){if(M.properties&&M.properties.hasOwnProperty("mapbox_clip_start")&&M.properties.hasOwnProperty("mapbox_clip_end"))return{start:+M.properties.mapbox_clip_start,end:+M.properties.mapbox_clip_end}},Xo.prototype.addFeature=function(M,D,K,de,Ee){var Be=this.layers[0].layout,Ye=Be.get("line-join").evaluate(M,{}),at=Be.get("line-cap"),mt=Be.get("line-miter-limit"),Et=Be.get("line-round-limit");this.lineClips=this.lineFeatureClips(M);for(var Lt=0,Wt=D;Lt<Wt.length;Lt+=1)this.addLine(Wt[Lt],M,Ye,at,mt,Et);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,K,Ee,de)},Xo.prototype.addLine=function(M,D,K,de,Ee,Be){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var Ye=0;Ye<M.length-1;Ye++)this.totalDistance+=M[Ye].dist(M[Ye+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var at="Polygon"===x0[D.type],mt=M.length;mt>=2&&M[mt-1].equals(M[mt-2]);)mt--;for(var Et=0;Et<mt-1&&M[Et].equals(M[Et+1]);)Et++;if(!(mt<(at?3:2))){"bevel"===K&&(Ee=1.05);var Lt,Wt=this.overscaling<=16?15*Oi/(512*this.overscaling):0,en=this.segments.prepareSegment(10*mt,this.layoutVertexArray,this.indexArray),Xt=void 0,vn=void 0,bn=void 0,zn=void 0;this.e1=this.e2=-1,at&&(zn=M[Et].sub(Lt=M[mt-2])._unit()._perp());for(var Rn=Et;Rn<mt;Rn++)if(!(vn=Rn===mt-1?at?M[Et+1]:void 0:M[Rn+1])||!M[Rn].equals(vn)){zn&&(bn=zn),Lt&&(Xt=Lt),Lt=M[Rn],zn=vn?vn.sub(Lt)._unit()._perp():bn;var Jn=(bn=bn||zn).add(zn);0===Jn.x&&0===Jn.y||Jn._unit();var nr=bn.x*zn.x+bn.y*zn.y,cr=Jn.x*zn.x+Jn.y*zn.y,dr=0!==cr?1/cr:1/0,wr=2*Math.sqrt(2-2*cr),jr=cr<Xd&&Xt&&vn,Rr=bn.x*zn.y-bn.y*zn.x>0;if(jr&&Rn>Et){var Vr=Lt.dist(Xt);if(Vr>2*Wt){var Wr=Lt.sub(Lt.sub(Xt)._mult(Wt/Vr)._round());this.updateDistance(Xt,Wr),this.addCurrentVertex(Wr,bn,0,0,en),Xt=Wr}}var hi=Xt&&vn,ri=hi?K:at?"butt":de;if(hi&&"round"===ri&&(dr<Be?ri="miter":dr<=2&&(ri="fakeround")),"miter"===ri&&dr>Ee&&(ri="bevel"),"bevel"===ri&&(dr>2&&(ri="flipbevel"),dr<Ee&&(ri="miter")),Xt&&this.updateDistance(Xt,Lt),"miter"===ri)Jn._mult(dr),this.addCurrentVertex(Lt,Jn,0,0,en);else if("flipbevel"===ri){if(dr>100)Jn=zn.mult(-1);else{var fi=dr*bn.add(zn).mag()/bn.sub(zn).mag();Jn._perp()._mult(fi*(Rr?-1:1))}this.addCurrentVertex(Lt,Jn,0,0,en),this.addCurrentVertex(Lt,Jn.mult(-1),0,0,en)}else if("bevel"===ri||"fakeround"===ri){var oi=-Math.sqrt(dr*dr-1),ni=Rr?oi:0,Fi=Rr?0:oi;if(Xt&&this.addCurrentVertex(Lt,bn,ni,Fi,en),"fakeround"===ri)for(var _i=Math.round(180*wr/Math.PI/20),ha=1;ha<_i;ha++){var ci=ha/_i;if(.5!==ci){var oa=ci-.5;ci+=ci*oa*(ci-1)*((1.0904+nr*(nr*(3.55645-1.43519*nr)-3.2452))*oa*oa+(.848013+nr*(.215638*nr-1.06021)))}var _a=zn.sub(bn)._mult(ci)._add(bn)._unit()._mult(Rr?-1:1);this.addHalfVertex(Lt,_a.x,_a.y,!1,Rr,0,en)}vn&&this.addCurrentVertex(Lt,zn,-ni,-Fi,en)}else if("butt"===ri)this.addCurrentVertex(Lt,Jn,0,0,en);else if("square"===ri){var sa=Xt?1:-1;this.addCurrentVertex(Lt,Jn,sa,sa,en)}else"round"===ri&&(Xt&&(this.addCurrentVertex(Lt,bn,0,0,en),this.addCurrentVertex(Lt,bn,1,1,en,!0)),vn&&(this.addCurrentVertex(Lt,zn,-1,-1,en,!0),this.addCurrentVertex(Lt,zn,0,0,en)));if(jr&&Rn<mt-1){var Ji=Lt.dist(vn);if(Ji>2*Wt){var ba=Lt.add(vn.sub(Lt)._mult(Wt/Ji)._round());this.updateDistance(Lt,ba),this.addCurrentVertex(ba,zn,0,0,en),Lt=ba}}}}},Xo.prototype.addCurrentVertex=function(M,D,K,de,Ee,Be){void 0===Be&&(Be=!1);var mt=D.y*de-D.x,Et=-D.y-D.x*de;this.addHalfVertex(M,D.x+D.y*K,D.y-D.x*K,Be,!1,K,Ee),this.addHalfVertex(M,mt,Et,Be,!0,-de,Ee),this.distance>Kd/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(M,D,K,de,Ee,Be))},Xo.prototype.addHalfVertex=function(M,D,K,de,Ee,Be,Ye){var Et=.5*(this.lineClips?this.scaledDistance*(Kd-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((M.x<<1)+(de?1:0),(M.y<<1)+(Ee?1:0),Math.round(63*D)+128,Math.round(63*K)+128,1+(0===Be?0:Be<0?-1:1)|(63&Et)<<2,Et>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var Wt=Ye.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Wt),Ye.primitiveLength++),Ee?this.e2=Wt:this.e1=Wt},Xo.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Xo.prototype.updateDistance=function(M,D){this.distance+=M.dist(D),this.updateScaledDistance()},$r("LineBucket",Xo,{omit:["layers","patternFeatures"]});var Dh=new La({"line-cap":new Xr(tt.layout_line["line-cap"]),"line-join":new ti(tt.layout_line["line-join"]),"line-miter-limit":new Xr(tt.layout_line["line-miter-limit"]),"line-round-limit":new Xr(tt.layout_line["line-round-limit"]),"line-sort-key":new ti(tt.layout_line["line-sort-key"])}),ah={paint:new La({"line-opacity":new ti(tt.paint_line["line-opacity"]),"line-color":new ti(tt.paint_line["line-color"]),"line-translate":new Xr(tt.paint_line["line-translate"]),"line-translate-anchor":new Xr(tt.paint_line["line-translate-anchor"]),"line-width":new ti(tt.paint_line["line-width"]),"line-gap-width":new ti(tt.paint_line["line-gap-width"]),"line-offset":new ti(tt.paint_line["line-offset"]),"line-blur":new ti(tt.paint_line["line-blur"]),"line-dasharray":new is(tt.paint_line["line-dasharray"]),"line-pattern":new Yo(tt.paint_line["line-pattern"]),"line-gradient":new as(tt.paint_line["line-gradient"])}),layout:Dh},_0=function(M){function D(){M.apply(this,arguments)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype.possiblyEvaluate=function(K,de){return de=new Ii(Math.floor(de.zoom),{now:de.now,fadeDuration:de.fadeDuration,zoomHistory:de.zoomHistory,transition:de.transition}),M.prototype.possiblyEvaluate.call(this,K,de)},D.prototype.evaluate=function(K,de,Ee,Be){return de=u({},de,{zoom:Math.floor(de.zoom)}),M.prototype.evaluate.call(this,K,de,Ee,Be)},D}(ti),Jd=new _0(ah.paint.properties["line-width"].specification);Jd.useIntegerZoom=!0;var b0=function(M){function D(K){M.call(this,K,ah),this.gradientVersion=0}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype._handleSpecialPaintPropertyUpdate=function(K){"line-gradient"===K&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Qr,this.gradientVersion=(this.gradientVersion+1)%n)},D.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},D.prototype.recalculate=function(K,de){M.prototype.recalculate.call(this,K,de),this.paint._values["line-floorwidth"]=Jd.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,K)},D.prototype.createBucket=function(K){return new Xo(K)},D.prototype.queryRadius=function(K){var de=K,Ee=$d(Rc("line-width",this,de),Rc("line-gap-width",this,de)),Be=Rc("line-offset",this,de);return Ee/2+Math.abs(Be)+Ju(this.paint.get("line-translate"))},D.prototype.queryIntersectsFeature=function(K,de,Ee,Be,Ye,at,mt){var Et=$u(K,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),at.angle,mt),Lt=mt/2*$d(this.paint.get("line-width").evaluate(de,Ee),this.paint.get("line-gap-width").evaluate(de,Ee)),Wt=this.paint.get("line-offset").evaluate(de,Ee);return Wt&&(Be=function(en,Xt){for(var vn=[],bn=new t(0,0),zn=0;zn<en.length;zn++){for(var Rn=en[zn],Jn=[],nr=0;nr<Rn.length;nr++){var dr=Rn[nr],wr=Rn[nr+1],jr=0===nr?bn:dr.sub(Rn[nr-1])._unit()._perp(),Rr=nr===Rn.length-1?bn:wr.sub(dr)._unit()._perp(),Vr=jr._add(Rr)._unit();Vr._mult(1/(Vr.x*Rr.x+Vr.y*Rr.y)),Jn.push(Vr._mult(Xt)._add(dr))}vn.push(Jn)}return vn}(Be,Wt*mt)),function(en,Xt,vn){for(var bn=0;bn<Xt.length;bn++){var zn=Xt[bn];if(en.length>=3)for(var Rn=0;Rn<zn.length;Rn++)if(pl(en,zn[Rn]))return!0;if(gu(en,zn,vn))return!0}return!1}(Et,Be,Lt)},D.prototype.isTileClipped=function(){return!0},D}(ta);function $d(M,D){return D>0?D+2*M:M}var w0=ra([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),ml=ra([{name:"a_projected_pos",components:3,type:"Float32"}],4),ru=(ra([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),ra([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Qd=(ra([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),ra([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),zh=ra([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function $f(M,D,K){return M.sections.forEach(function(de){var Ee,Ye,at;de.text=(Ee=de.text,Ye=K,"uppercase"===(at=D.layout.get("text-transform").evaluate(Ye,{}))?Ee=Ee.toLocaleUpperCase():"lowercase"===at&&(Ee=Ee.toLocaleLowerCase()),xo.applyArabicShaping&&(Ee=xo.applyArabicShaping(Ee)),Ee)}),M}ra([{name:"triangle",components:3,type:"Uint16"}]),ra([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ra([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ra([{type:"Float32",name:"offsetX"}]),ra([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var oh={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},po=24,Qf=function(M,D,K,de,Ee){var Be,Ye,at=8*Ee-de-1,mt=(1<<at)-1,Et=mt>>1,Lt=-7,Wt=K?Ee-1:0,en=K?-1:1,Xt=M[D+Wt];for(Wt+=en,Be=Xt&(1<<-Lt)-1,Xt>>=-Lt,Lt+=at;Lt>0;Be=256*Be+M[D+Wt],Wt+=en,Lt-=8);for(Ye=Be&(1<<-Lt)-1,Be>>=-Lt,Lt+=de;Lt>0;Ye=256*Ye+M[D+Wt],Wt+=en,Lt-=8);if(0===Be)Be=1-Et;else{if(Be===mt)return Ye?NaN:1/0*(Xt?-1:1);Ye+=Math.pow(2,de),Be-=Et}return(Xt?-1:1)*Ye*Math.pow(2,Be-de)},Fh=function(M,D,K,de,Ee,Be){var Ye,at,mt,Et=8*Be-Ee-1,Lt=(1<<Et)-1,Wt=Lt>>1,en=23===Ee?Math.pow(2,-24)-Math.pow(2,-77):0,Xt=de?0:Be-1,vn=de?1:-1,bn=D<0||0===D&&1/D<0?1:0;for(D=Math.abs(D),isNaN(D)||D===1/0?(at=isNaN(D)?1:0,Ye=Lt):(Ye=Math.floor(Math.log(D)/Math.LN2),D*(mt=Math.pow(2,-Ye))<1&&(Ye--,mt*=2),(D+=Ye+Wt>=1?en/mt:en*Math.pow(2,1-Wt))*mt>=2&&(Ye++,mt/=2),Ye+Wt>=Lt?(at=0,Ye=Lt):Ye+Wt>=1?(at=(D*mt-1)*Math.pow(2,Ee),Ye+=Wt):(at=D*Math.pow(2,Wt-1)*Math.pow(2,Ee),Ye=0));Ee>=8;M[K+Xt]=255&at,Xt+=vn,at/=256,Ee-=8);for(Ye=Ye<<Ee|at,Et+=Ee;Et>0;M[K+Xt]=255&Ye,Xt+=vn,Ye/=256,Et-=8);M[K+Xt-vn]|=128*bn},Du=Sa;function Sa(M){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(M)?M:new Uint8Array(M||0),this.pos=0,this.type=0,this.length=this.buf.length}Sa.Varint=0,Sa.Fixed64=1,Sa.Bytes=2,Sa.Fixed32=5;var ed=4294967296,td=1/ed,nd=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function iu(M){return M.type===Sa.Bytes?M.readVarint()+M.pos:M.pos+1}function ep(M,D,K){var de=D<=16383?1:D<=2097151?2:D<=268435455?3:Math.floor(Math.log(D)/(7*Math.LN2));K.realloc(de);for(var Ee=K.pos-1;Ee>=M;Ee--)K.buf[Ee+de]=K.buf[Ee]}function Bh(M,D){for(var K=0;K<M.length;K++)D.writeVarint(M[K])}function tp(M,D){for(var K=0;K<M.length;K++)D.writeSVarint(M[K])}function rd(M,D){for(var K=0;K<M.length;K++)D.writeFloat(M[K])}function np(M,D){for(var K=0;K<M.length;K++)D.writeDouble(M[K])}function rp(M,D){for(var K=0;K<M.length;K++)D.writeBoolean(M[K])}function T0(M,D){for(var K=0;K<M.length;K++)D.writeFixed32(M[K])}function ip(M,D){for(var K=0;K<M.length;K++)D.writeSFixed32(M[K])}function A0(M,D){for(var K=0;K<M.length;K++)D.writeFixed64(M[K])}function k0(M,D){for(var K=0;K<M.length;K++)D.writeSFixed64(M[K])}function Nh(M,D){return(M[D]|M[D+1]<<8|M[D+2]<<16)+16777216*M[D+3]}function sh(M,D,K){M[K]=D,M[K+1]=D>>>8,M[K+2]=D>>>16,M[K+3]=D>>>24}function ap(M,D){return(M[D]|M[D+1]<<8|M[D+2]<<16)+(M[D+3]<<24)}Sa.prototype={destroy:function(){this.buf=null},readFields:function(M,D,K){for(K=K||this.length;this.pos<K;){var de=this.readVarint(),Ee=de>>3,Be=this.pos;this.type=7&de,M(Ee,D,this),this.pos===Be&&this.skip(de)}return D},readMessage:function(M,D){return this.readFields(M,D,this.readVarint()+this.pos)},readFixed32:function(){var M=Nh(this.buf,this.pos);return this.pos+=4,M},readSFixed32:function(){var M=ap(this.buf,this.pos);return this.pos+=4,M},readFixed64:function(){var M=Nh(this.buf,this.pos)+Nh(this.buf,this.pos+4)*ed;return this.pos+=8,M},readSFixed64:function(){var M=Nh(this.buf,this.pos)+ap(this.buf,this.pos+4)*ed;return this.pos+=8,M},readFloat:function(){var M=Qf(this.buf,this.pos,!0,23,4);return this.pos+=4,M},readDouble:function(){var M=Qf(this.buf,this.pos,!0,52,8);return this.pos+=8,M},readVarint:function(M){var D,K,de=this.buf;return D=127&(K=de[this.pos++]),K<128?D:(D|=(127&(K=de[this.pos++]))<<7,K<128?D:(D|=(127&(K=de[this.pos++]))<<14,K<128?D:(D|=(127&(K=de[this.pos++]))<<21,K<128?D:function(Ee,Be,Ye){var at,mt,Et=Ye.buf;if(at=(112&(mt=Et[Ye.pos++]))>>4,mt<128||(at|=(127&(mt=Et[Ye.pos++]))<<3,mt<128)||(at|=(127&(mt=Et[Ye.pos++]))<<10,mt<128)||(at|=(127&(mt=Et[Ye.pos++]))<<17,mt<128)||(at|=(127&(mt=Et[Ye.pos++]))<<24,mt<128)||(at|=(1&(mt=Et[Ye.pos++]))<<31,mt<128))return function au(M,D,K){return K?4294967296*D+(M>>>0):4294967296*(D>>>0)+(M>>>0)}(Ee,at,Be);throw new Error("Expected varint not more than 10 bytes")}(D|=(15&(K=de[this.pos]))<<28,M,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var M=this.readVarint();return M%2==1?(M+1)/-2:M/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var M=this.readVarint()+this.pos,D=this.pos;return this.pos=M,M-D>=12&&nd?nd.decode(this.buf.subarray(D,M)):function(K,de,Ee){for(var Be="",Ye=de;Ye<Ee;){var at,mt,Et,Lt=K[Ye],Wt=null,en=Lt>239?4:Lt>223?3:Lt>191?2:1;if(Ye+en>Ee)break;1===en?Lt<128&&(Wt=Lt):2===en?128==(192&(at=K[Ye+1]))&&(Wt=(31&Lt)<<6|63&at)<=127&&(Wt=null):3===en?(mt=K[Ye+2],128==(192&(at=K[Ye+1]))&&128==(192&mt)&&((Wt=(15&Lt)<<12|(63&at)<<6|63&mt)<=2047||Wt>=55296&&Wt<=57343)&&(Wt=null)):4===en&&(mt=K[Ye+2],Et=K[Ye+3],128==(192&(at=K[Ye+1]))&&128==(192&mt)&&128==(192&Et)&&((Wt=(15&Lt)<<18|(63&at)<<12|(63&mt)<<6|63&Et)<=65535||Wt>=1114112)&&(Wt=null)),null===Wt?(Wt=65533,en=1):Wt>65535&&(Wt-=65536,Be+=String.fromCharCode(Wt>>>10&1023|55296),Wt=56320|1023&Wt),Be+=String.fromCharCode(Wt),Ye+=en}return Be}(this.buf,D,M)},readBytes:function(){var M=this.readVarint()+this.pos,D=this.buf.subarray(this.pos,M);return this.pos=M,D},readPackedVarint:function(M,D){if(this.type!==Sa.Bytes)return M.push(this.readVarint(D));var K=iu(this);for(M=M||[];this.pos<K;)M.push(this.readVarint(D));return M},readPackedSVarint:function(M){if(this.type!==Sa.Bytes)return M.push(this.readSVarint());var D=iu(this);for(M=M||[];this.pos<D;)M.push(this.readSVarint());return M},readPackedBoolean:function(M){if(this.type!==Sa.Bytes)return M.push(this.readBoolean());var D=iu(this);for(M=M||[];this.pos<D;)M.push(this.readBoolean());return M},readPackedFloat:function(M){if(this.type!==Sa.Bytes)return M.push(this.readFloat());var D=iu(this);for(M=M||[];this.pos<D;)M.push(this.readFloat());return M},readPackedDouble:function(M){if(this.type!==Sa.Bytes)return M.push(this.readDouble());var D=iu(this);for(M=M||[];this.pos<D;)M.push(this.readDouble());return M},readPackedFixed32:function(M){if(this.type!==Sa.Bytes)return M.push(this.readFixed32());var D=iu(this);for(M=M||[];this.pos<D;)M.push(this.readFixed32());return M},readPackedSFixed32:function(M){if(this.type!==Sa.Bytes)return M.push(this.readSFixed32());var D=iu(this);for(M=M||[];this.pos<D;)M.push(this.readSFixed32());return M},readPackedFixed64:function(M){if(this.type!==Sa.Bytes)return M.push(this.readFixed64());var D=iu(this);for(M=M||[];this.pos<D;)M.push(this.readFixed64());return M},readPackedSFixed64:function(M){if(this.type!==Sa.Bytes)return M.push(this.readSFixed64());var D=iu(this);for(M=M||[];this.pos<D;)M.push(this.readSFixed64());return M},skip:function(M){var D=7&M;if(D===Sa.Varint)for(;this.buf[this.pos++]>127;);else if(D===Sa.Bytes)this.pos=this.readVarint()+this.pos;else if(D===Sa.Fixed32)this.pos+=4;else{if(D!==Sa.Fixed64)throw new Error("Unimplemented type: "+D);this.pos+=8}},writeTag:function(M,D){this.writeVarint(M<<3|D)},realloc:function(M){for(var D=this.length||16;D<this.pos+M;)D*=2;if(D!==this.length){var K=new Uint8Array(D);K.set(this.buf),this.buf=K,this.length=D}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(M){this.realloc(4),sh(this.buf,M,this.pos),this.pos+=4},writeSFixed32:function(M){this.realloc(4),sh(this.buf,M,this.pos),this.pos+=4},writeFixed64:function(M){this.realloc(8),sh(this.buf,-1&M,this.pos),sh(this.buf,Math.floor(M*td),this.pos+4),this.pos+=8},writeSFixed64:function(M){this.realloc(8),sh(this.buf,-1&M,this.pos),sh(this.buf,Math.floor(M*td),this.pos+4),this.pos+=8},writeVarint:function(M){(M=+M||0)>268435455||M<0?function(D,K){var de,Ee,Be,at;if(D>=0?(de=D%4294967296|0,Ee=D/4294967296|0):(Ee=~(-D/4294967296),4294967295^(de=~(-D%4294967296))?de=de+1|0:(de=0,Ee=Ee+1|0)),D>=0x10000000000000000||D<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");K.realloc(10),Be=de,(at=K).buf[at.pos++]=127&Be|128,Be>>>=7,at.buf[at.pos++]=127&Be|128,Be>>>=7,at.buf[at.pos++]=127&Be|128,Be>>>=7,at.buf[at.pos++]=127&Be|128,at.buf[at.pos]=127&(Be>>>=7),function(Be,Ye){var at=(7&Be)<<4;Ye.buf[Ye.pos++]|=at|((Be>>>=3)?128:0),Be&&(Ye.buf[Ye.pos++]=127&Be|((Be>>>=7)?128:0),Be&&(Ye.buf[Ye.pos++]=127&Be|((Be>>>=7)?128:0),Be&&(Ye.buf[Ye.pos++]=127&Be|((Be>>>=7)?128:0),Be&&(Ye.buf[Ye.pos++]=127&Be|((Be>>>=7)?128:0),Be&&(Ye.buf[Ye.pos++]=127&Be)))))}(Ee,K)}(M,this):(this.realloc(4),this.buf[this.pos++]=127&M|(M>127?128:0),M<=127||(this.buf[this.pos++]=127&(M>>>=7)|(M>127?128:0),M<=127||(this.buf[this.pos++]=127&(M>>>=7)|(M>127?128:0),M<=127||(this.buf[this.pos++]=M>>>7&127))))},writeSVarint:function(M){this.writeVarint(M<0?2*-M-1:2*M)},writeBoolean:function(M){this.writeVarint(!!M)},writeString:function(M){M=String(M),this.realloc(4*M.length),this.pos++;var D=this.pos;this.pos=function(de,Ee,Be){for(var Ye,at,mt=0;mt<Ee.length;mt++){if((Ye=Ee.charCodeAt(mt))>55295&&Ye<57344){if(!at){Ye>56319||mt+1===Ee.length?(de[Be++]=239,de[Be++]=191,de[Be++]=189):at=Ye;continue}if(Ye<56320){de[Be++]=239,de[Be++]=191,de[Be++]=189,at=Ye;continue}Ye=at-55296<<10|Ye-56320|65536,at=null}else at&&(de[Be++]=239,de[Be++]=191,de[Be++]=189,at=null);Ye<128?de[Be++]=Ye:(Ye<2048?de[Be++]=Ye>>6|192:(Ye<65536?de[Be++]=Ye>>12|224:(de[Be++]=Ye>>18|240,de[Be++]=Ye>>12&63|128),de[Be++]=Ye>>6&63|128),de[Be++]=63&Ye|128)}return Be}(this.buf,M,this.pos);var K=this.pos-D;K>=128&&ep(D,K,this),this.pos=D-1,this.writeVarint(K),this.pos+=K},writeFloat:function(M){this.realloc(4),Fh(this.buf,M,this.pos,!0,23,4),this.pos+=4},writeDouble:function(M){this.realloc(8),Fh(this.buf,M,this.pos,!0,52,8),this.pos+=8},writeBytes:function(M){var D=M.length;this.writeVarint(D),this.realloc(D);for(var K=0;K<D;K++)this.buf[this.pos++]=M[K]},writeRawMessage:function(M,D){this.pos++;var K=this.pos;M(D,this);var de=this.pos-K;de>=128&&ep(K,de,this),this.pos=K-1,this.writeVarint(de),this.pos+=de},writeMessage:function(M,D,K){this.writeTag(M,Sa.Bytes),this.writeRawMessage(D,K)},writePackedVarint:function(M,D){D.length&&this.writeMessage(M,Bh,D)},writePackedSVarint:function(M,D){D.length&&this.writeMessage(M,tp,D)},writePackedBoolean:function(M,D){D.length&&this.writeMessage(M,rp,D)},writePackedFloat:function(M,D){D.length&&this.writeMessage(M,rd,D)},writePackedDouble:function(M,D){D.length&&this.writeMessage(M,np,D)},writePackedFixed32:function(M,D){D.length&&this.writeMessage(M,T0,D)},writePackedSFixed32:function(M,D){D.length&&this.writeMessage(M,ip,D)},writePackedFixed64:function(M,D){D.length&&this.writeMessage(M,A0,D)},writePackedSFixed64:function(M,D){D.length&&this.writeMessage(M,k0,D)},writeBytesField:function(M,D){this.writeTag(M,Sa.Bytes),this.writeBytes(D)},writeFixed32Field:function(M,D){this.writeTag(M,Sa.Fixed32),this.writeFixed32(D)},writeSFixed32Field:function(M,D){this.writeTag(M,Sa.Fixed32),this.writeSFixed32(D)},writeFixed64Field:function(M,D){this.writeTag(M,Sa.Fixed64),this.writeFixed64(D)},writeSFixed64Field:function(M,D){this.writeTag(M,Sa.Fixed64),this.writeSFixed64(D)},writeVarintField:function(M,D){this.writeTag(M,Sa.Varint),this.writeVarint(D)},writeSVarintField:function(M,D){this.writeTag(M,Sa.Varint),this.writeSVarint(D)},writeStringField:function(M,D){this.writeTag(M,Sa.Bytes),this.writeString(D)},writeFloatField:function(M,D){this.writeTag(M,Sa.Fixed32),this.writeFloat(D)},writeDoubleField:function(M,D){this.writeTag(M,Sa.Fixed64),this.writeDouble(D)},writeBooleanField:function(M,D){this.writeVarintField(M,!!D)}};var id=3;function M0(M,D,K){1===M&&K.readMessage(op,D)}function op(M,D,K){if(3===M){var de=K.readMessage(S0,{}),Ye=de.width,at=de.height,mt=de.left,Et=de.top,Lt=de.advance;D.push({id:de.id,bitmap:new mu({width:Ye+2*id,height:at+2*id},de.bitmap),metrics:{width:Ye,height:at,left:mt,top:Et,advance:Lt}})}}function S0(M,D,K){1===M?D.id=K.readVarint():2===M?D.bitmap=K.readBytes():3===M?D.width=K.readVarint():4===M?D.height=K.readVarint():5===M?D.left=K.readSVarint():6===M?D.top=K.readSVarint():7===M&&(D.advance=K.readVarint())}var sp=id;function ou(M){for(var D=0,K=0,de=0,Ee=M;de<Ee.length;de+=1){var Be=Ee[de];D+=Be.w*Be.h,K=Math.max(K,Be.w)}M.sort(function(bn,zn){return zn.h-bn.h});for(var Ye=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(D/.95)),K),h:1/0}],at=0,mt=0,Et=0,Lt=M;Et<Lt.length;Et+=1)for(var Wt=Lt[Et],en=Ye.length-1;en>=0;en--){var Xt=Ye[en];if(!(Wt.w>Xt.w||Wt.h>Xt.h)){if(Wt.x=Xt.x,Wt.y=Xt.y,mt=Math.max(mt,Wt.y+Wt.h),at=Math.max(at,Wt.x+Wt.w),Wt.w===Xt.w&&Wt.h===Xt.h){var vn=Ye.pop();en<Ye.length&&(Ye[en]=vn)}else Wt.h===Xt.h?(Xt.x+=Wt.w,Xt.w-=Wt.w):Wt.w===Xt.w?(Xt.y+=Wt.h,Xt.h-=Wt.h):(Ye.push({x:Xt.x+Wt.w,y:Xt.y,w:Xt.w-Wt.w,h:Wt.h}),Xt.y+=Wt.h,Xt.h-=Wt.h);break}}return{w:at,h:mt,fill:D/(at*mt)||0}}var lh=function(M,D){var K=D.pixelRatio,de=D.version,Ee=D.stretchX,Be=D.stretchY,Ye=D.content;this.paddedRect=M,this.pixelRatio=K,this.stretchX=Ee,this.stretchY=Be,this.content=Ye,this.version=de},vu={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};vu.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},vu.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},vu.tlbr.get=function(){return this.tl.concat(this.br)},vu.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(lh.prototype,vu);var jh=function(M,D){var K={},de={};this.haveRenderCallbacks=[];var Ee=[];this.addImages(M,K,Ee),this.addImages(D,de,Ee);var Be=ou(Ee),mt=new fo({width:Be.w||1,height:Be.h||1});for(var Et in M){var Lt=M[Et],Wt=K[Et].paddedRect;fo.copy(Lt.data,mt,{x:0,y:0},{x:Wt.x+1,y:Wt.y+1},Lt.data)}for(var en in D){var Xt=D[en],vn=de[en].paddedRect,bn=vn.x+1,zn=vn.y+1,Rn=Xt.data.width,Jn=Xt.data.height;fo.copy(Xt.data,mt,{x:0,y:0},{x:bn,y:zn},Xt.data),fo.copy(Xt.data,mt,{x:0,y:Jn-1},{x:bn,y:zn-1},{width:Rn,height:1}),fo.copy(Xt.data,mt,{x:0,y:0},{x:bn,y:zn+Jn},{width:Rn,height:1}),fo.copy(Xt.data,mt,{x:Rn-1,y:0},{x:bn-1,y:zn},{width:1,height:Jn}),fo.copy(Xt.data,mt,{x:0,y:0},{x:bn+Rn,y:zn},{width:1,height:Jn})}this.image=mt,this.iconPositions=K,this.patternPositions=de};jh.prototype.addImages=function(M,D,K){for(var de in M){var Ee=M[de],Be={x:0,y:0,w:Ee.data.width+2,h:Ee.data.height+2};K.push(Be),D[de]=new lh(Be,Ee),Ee.hasRenderCallback&&this.haveRenderCallbacks.push(de)}},jh.prototype.patchUpdatedImages=function(M,D){for(var K in M.dispatchRenderCallbacks(this.haveRenderCallbacks),M.updatedImages)this.patchUpdatedImage(this.iconPositions[K],M.getImage(K),D),this.patchUpdatedImage(this.patternPositions[K],M.getImage(K),D)},jh.prototype.patchUpdatedImage=function(M,D,K){if(M&&D&&M.version!==D.version){M.version=D.version;var de=M.tl;K.update(D.data,void 0,{x:de[0],y:de[1]})}},$r("ImagePosition",lh),$r("ImageAtlas",jh);var Ko={horizontal:1,vertical:2,horizontalOnly:3},Pl=function(){this.scale=1,this.fontStack="",this.imageName=null};Pl.forText=function(M,D){var K=new Pl;return K.scale=M||1,K.fontStack=D,K},Pl.forImage=function(M){var D=new Pl;return D.imageName=M,D};var Vi=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function ch(M,D,K,de,Ee,Be,Ye,at,mt,Et,Lt,Wt,en,Xt,vn,bn){var zn,Rn=Vi.fromFeature(M,Ee);Wt===Ko.vertical&&Rn.verticalizePunctuation();var Jn=xo.processBidirectionalText,nr=xo.processStyledBidirectionalText;if(Jn&&1===Rn.sections.length){zn=[];for(var cr=0,dr=Jn(Rn.toString(),vi(Rn,Et,Be,D,de,Xt,vn));cr<dr.length;cr+=1){var wr=dr[cr],jr=new Vi;jr.text=wr,jr.sections=Rn.sections;for(var Rr=0;Rr<wr.length;Rr++)jr.sectionIndex.push(0);zn.push(jr)}}else if(nr){zn=[];for(var Vr=0,Wr=nr(Rn.text,Rn.sectionIndex,vi(Rn,Et,Be,D,de,Xt,vn));Vr<Wr.length;Vr+=1){var hi=Wr[Vr],ri=new Vi;ri.text=hi[0],ri.sectionIndex=hi[1],ri.sections=Rn.sections,zn.push(ri)}}else zn=function(ni,Fi){for(var _i=[],ha=ni.text,ci=0,oa=0,_a=Fi;oa<_a.length;oa+=1){var sa=_a[oa];_i.push(ni.substring(ci,sa)),ci=sa}return ci<ha.length&&_i.push(ni.substring(ci,ha.length)),_i}(Rn,vi(Rn,Et,Be,D,de,Xt,vn));var fi=[],oi={positionedLines:fi,text:Rn.toString(),top:Lt[1],bottom:Lt[1],left:Lt[0],right:Lt[0],writingMode:Wt,iconsInText:!1,verticalizable:!1};return function(ni,Fi,_i,ha,ci,oa,_a,sa,Ji,ba,no,Da){for(var So=0,Jo=-17,Do=0,ls=0,zo="right"===sa?1:"left"===sa?0:.5,ro=0,Fo=0,Co=ci;Fo<Co.length;Fo+=1){var wo=Co[Fo];wo.trim();var Ai=wo.getMaxScale(),Gi=(Ai-1)*po,Ya={positionedGlyphs:[],lineOffset:0};ni.positionedLines[ro]=Ya;var wa=Ya.positionedGlyphs,Va=0;if(wo.length()){for(var Ca=0;Ca<wo.length();Ca++){var $i=wo.getSection(Ca),Za=wo.getSectionIndex(Ca),Ss=wo.getCharCode(Ca),tl=0,cs=null,Ol=null,Rl=null,io=po,us=!(Ji===Ko.horizontal||!no&&!xs(Ss)||no&&(gf[Ss]||dl(Ss)));if($i.imageName){var hs=ha[$i.imageName];if(!hs)continue;Rl=$i.imageName,ni.iconsInText=ni.iconsInText||!0,Ol=hs.paddedRect;var Dl=hs.displaySize;$i.scale=$i.scale*po/Da,tl=Gi+(po-Dl[1]*$i.scale),io=(cs={width:Dl[0],height:Dl[1],left:1,top:-sp,advance:us?Dl[1]:Dl[0]}).advance;var pi=us?Dl[0]*$i.scale-po*Ai:Dl[1]*$i.scale-po*Ai;pi>0&&pi>Va&&(Va=pi)}else{var kf=_i[$i.fontStack],bu=kf&&kf[Ss];if(bu&&bu.rect)Ol=bu.rect,cs=bu.metrics;else{var Mf=Fi[$i.fontStack],hu=Mf&&Mf[Ss];if(!hu)continue;cs=hu.metrics}tl=(Ai-$i.scale)*po}us?(ni.verticalizable=!0,wa.push({glyph:Ss,imageName:Rl,x:So,y:Jo+tl,vertical:us,scale:$i.scale,fontStack:$i.fontStack,sectionIndex:Za,metrics:cs,rect:Ol}),So+=io*$i.scale+ba):(wa.push({glyph:Ss,imageName:Rl,x:So,y:Jo+tl,vertical:us,scale:$i.scale,fontStack:$i.fontStack,sectionIndex:Za,metrics:cs,rect:Ol}),So+=cs.advance*$i.scale+ba)}0!==wa.length&&(Do=Math.max(So-ba,Do),C0(wa,0,wa.length-1,zo,Va)),So=0;var Sf=oa*Ai+Va;Ya.lineOffset=Math.max(Va,Gi),Jo+=Sf,ls=Math.max(Sf,ls),++ro}else Jo+=oa,++ro}var vh=Jo- -17,Cf=ad(_a),Ef=Cf.horizontalAlign,yh=Cf.verticalAlign;(function(pd,Kh,jc,xh,gd,If,_h,Lf,Pf){var Of,bh=(Kh-jc)*gd;Of=If!==_h?-Lf*xh- -17:(-xh*Pf+.5)*_h;for(var ec=0,tc=pd;ec<tc.length;ec+=1)for(var nl=0,zl=tc[ec].positionedGlyphs;nl<zl.length;nl+=1){var nc=zl[nl];nc.x+=bh,nc.y+=Of}})(ni.positionedLines,zo,Ef,yh,Do,ls,oa,vh,ci.length),ni.top+=-yh*vh,ni.bottom=ni.top+vh,ni.left+=-Ef*Do,ni.right=ni.left+Do}(oi,D,K,de,zn,Ye,at,mt,Wt,Et,en,bn),!function(ni){for(var Fi=0,_i=ni;Fi<_i.length;Fi+=1)if(0!==_i[Fi].positionedGlyphs.length)return!1;return!0}(fi)&&oi}Vi.fromFeature=function(M,D){for(var K=new Vi,de=0;de<M.sections.length;de++){var Ee=M.sections[de];Ee.image?K.addImageSection(Ee):K.addTextSection(Ee,D)}return K},Vi.prototype.length=function(){return this.text.length},Vi.prototype.getSection=function(M){return this.sections[this.sectionIndex[M]]},Vi.prototype.getSectionIndex=function(M){return this.sectionIndex[M]},Vi.prototype.getCharCode=function(M){return this.text.charCodeAt(M)},Vi.prototype.verticalizePunctuation=function(){this.text=function(M){for(var D="",K=0;K<M.length;K++){var de=M.charCodeAt(K+1)||null,Ee=M.charCodeAt(K-1)||null;de&&qa(de)&&!oh[M[K+1]]||Ee&&qa(Ee)&&!oh[M[K-1]]||!oh[M[K]]?D+=M[K]:D+=oh[M[K]]}return D}(this.text)},Vi.prototype.trim=function(){for(var M=0,D=0;D<this.text.length&&gf[this.text.charCodeAt(D)];D++)M++;for(var K=this.text.length,de=this.text.length-1;de>=0&&de>=M&&gf[this.text.charCodeAt(de)];de--)K--;this.text=this.text.substring(M,K),this.sectionIndex=this.sectionIndex.slice(M,K)},Vi.prototype.substring=function(M,D){var K=new Vi;return K.text=this.text.substring(M,D),K.sectionIndex=this.sectionIndex.slice(M,D),K.sections=this.sections,K},Vi.prototype.toString=function(){return this.text},Vi.prototype.getMaxScale=function(){var M=this;return this.sectionIndex.reduce(function(D,K){return Math.max(D,M.sections[K].scale)},0)},Vi.prototype.addTextSection=function(M,D){this.text+=M.text,this.sections.push(Pl.forText(M.scale,M.fontStack||D));for(var K=this.sections.length-1,de=0;de<M.text.length;++de)this.sectionIndex.push(K)},Vi.prototype.addImageSection=function(M){var D=M.image?M.image.name:"";if(0!==D.length){var K=this.getNextImageSectionCharCode();K?(this.text+=String.fromCharCode(K),this.sections.push(Pl.forImage(D)),this.sectionIndex.push(this.sections.length-1)):E("Reached maximum number of images 6401")}else E("Can't add FormattedSection with an empty image.")},Vi.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var gf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},el={};function su(M,D,K,de,Ee,Be){if(D.imageName){var Ye=de[D.imageName];return Ye?Ye.displaySize[0]*D.scale*po/Be+Ee:0}var at=K[D.fontStack],mt=at&&at[M];return mt?mt.metrics.advance*D.scale+Ee:0}function Ms(M,D,K,de){var Ee=Math.pow(M-D,2);return de?M<D?Ee/2:2*Ee:Ee+Math.abs(K)*K}function mf(M,D,K){var de=0;return 10===M&&(de-=1e4),K&&(de+=150),40!==M&&65288!==M||(de+=50),41!==D&&65289!==D||(de+=50),de}function lp(M,D,K,de,Ee,Be){for(var Ye=null,at=Ms(D,K,Ee,Be),mt=0,Et=de;mt<Et.length;mt+=1){var Lt=Et[mt],Wt=Ms(D-Lt.x,K,Ee,Be)+Lt.badness;Wt<=at&&(Ye=Lt,at=Wt)}return{index:M,x:D,priorBreak:Ye,badness:at}}function cp(M){return M?cp(M.priorBreak).concat(M.index):[]}function vi(M,D,K,de,Ee,Be,Ye){if("point"!==Be)return[];if(!M)return[];for(var at=[],mt=function(zn,Rn,Jn,nr,cr,dr){for(var wr=0,jr=0;jr<zn.length();jr++){var Rr=zn.getSection(jr);wr+=su(zn.getCharCode(jr),Rr,nr,cr,Rn,dr)}return wr/Math.max(1,Math.ceil(wr/Jn))}(M,D,K,de,Ee,Ye),Et=M.text.indexOf("\u200b")>=0,Lt=0,Wt=0;Wt<M.length();Wt++){var en=M.getSection(Wt),Xt=M.getCharCode(Wt);if(gf[Xt]||(Lt+=su(Xt,en,de,Ee,D,Ye)),Wt<M.length()-1){var vn=!((bn=Xt)<11904||!(Br["Bopomofo Extended"](bn)||Br.Bopomofo(bn)||Br["CJK Compatibility Forms"](bn)||Br["CJK Compatibility Ideographs"](bn)||Br["CJK Compatibility"](bn)||Br["CJK Radicals Supplement"](bn)||Br["CJK Strokes"](bn)||Br["CJK Symbols and Punctuation"](bn)||Br["CJK Unified Ideographs Extension A"](bn)||Br["CJK Unified Ideographs"](bn)||Br["Enclosed CJK Letters and Months"](bn)||Br["Halfwidth and Fullwidth Forms"](bn)||Br.Hiragana(bn)||Br["Ideographic Description Characters"](bn)||Br["Kangxi Radicals"](bn)||Br["Katakana Phonetic Extensions"](bn)||Br.Katakana(bn)||Br["Vertical Forms"](bn)||Br["Yi Radicals"](bn)||Br["Yi Syllables"](bn)));(el[Xt]||vn||en.imageName)&&at.push(lp(Wt+1,Lt,mt,at,mf(Xt,M.getCharCode(Wt+1),vn&&Et),!1))}}var bn;return cp(lp(M.length(),Lt,mt,at,0,!0))}function ad(M){var D=.5,K=.5;switch(M){case"right":case"top-right":case"bottom-right":D=1;break;case"left":case"top-left":case"bottom-left":D=0}switch(M){case"bottom":case"bottom-right":case"bottom-left":K=1;break;case"top":case"top-right":case"top-left":K=0}return{horizontalAlign:D,verticalAlign:K}}function C0(M,D,K,de,Ee){if(de||Ee)for(var Be=M[K],at=(M[K].x+Be.metrics.advance*Be.scale)*de,mt=D;mt<=K;mt++)M[mt].x-=at,M[mt].y+=Ee}function up(M,D,K,de,Ee,Be){var Ye,at=M.image;if(at.content){var mt=at.content,Et=at.pixelRatio||1;Ye=[mt[0]/Et,mt[1]/Et,at.displaySize[0]-mt[2]/Et,at.displaySize[1]-mt[3]/Et]}var Lt,Wt,en,Xt,vn=D.left*Be,bn=D.right*Be;"width"===K||"both"===K?(Xt=Ee[0]+vn-de[3],Wt=Ee[0]+bn+de[1]):Wt=(Xt=Ee[0]+(vn+bn-at.displaySize[0])/2)+at.displaySize[0];var zn=D.top*Be,Rn=D.bottom*Be;return"height"===K||"both"===K?(Lt=Ee[1]+zn-de[0],en=Ee[1]+Rn+de[2]):en=(Lt=Ee[1]+(zn+Rn-at.displaySize[1])/2)+at.displaySize[1],{image:at,top:Lt,right:Wt,bottom:en,left:Xt,collisionPadding:Ye}}el[10]=!0,el[32]=!0,el[38]=!0,el[40]=!0,el[41]=!0,el[43]=!0,el[45]=!0,el[47]=!0,el[173]=!0,el[183]=!0,el[8203]=!0,el[8208]=!0,el[8211]=!0,el[8231]=!0;var yu=function(M){function D(K,de,Ee,Be){M.call(this,K,de),this.angle=Ee,void 0!==Be&&(this.segment=Be)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype.clone=function(){return new D(this.x,this.y,this.angle,this.segment)},D}(t);$r("Anchor",yu);var _c=128;function Vh(M,D){var K=D.expression;if("constant"===K.kind)return{kind:"constant",layoutSize:K.evaluate(new Ii(M+1))};if("source"===K.kind)return{kind:"source"};for(var de=K.zoomStops,Ee=K.interpolationType,Be=0;Be<de.length&&de[Be]<=M;)Be++;for(var Ye=Be=Math.max(0,Be-1);Ye<de.length&&de[Ye]<M+1;)Ye++;Ye=Math.min(de.length-1,Ye);var at=de[Be],mt=de[Ye];return"composite"===K.kind?{kind:"composite",minZoom:at,maxZoom:mt,interpolationType:Ee}:{kind:"camera",minZoom:at,maxZoom:mt,minSize:K.evaluate(new Ii(at)),maxSize:K.evaluate(new Ii(mt)),interpolationType:Ee}}function hp(M,D,K){var de=D.uSize,Be=K.lowerSize;return"source"===M.kind?Be/_c:"composite"===M.kind?ai(Be/_c,K.upperSize/_c,D.uSizeT):de}function fp(M,D){var K=0,de=0;if("constant"===M.kind)de=M.layoutSize;else if("source"!==M.kind){var Ee=M.interpolationType,at=Ee?c(Fa.interpolationFactor(Ee,D,M.minZoom,M.maxZoom),0,1):0;"camera"===M.kind?de=ai(M.minSize,M.maxSize,at):K=at}return{uSizeT:K,uSize:de}}var E0=Object.freeze({__proto__:null,getSizeData:Vh,evaluateSizeForFeature:hp,evaluateSizeForZoom:fp,SIZE_PACK_FACTOR:_c});function dp(M,D,K,de,Ee){if(void 0===D.segment)return!0;for(var Be=D,Ye=D.segment+1,at=0;at>-K/2;){if(--Ye<0)return!1;at-=M[Ye].dist(Be),Be=M[Ye]}at+=M[Ye].dist(M[Ye+1]),Ye++;for(var mt=[],Et=0;at<K/2;){var Wt=M[Ye],en=M[Ye+1];if(!en)return!1;var Xt=M[Ye-1].angleTo(Wt)-Wt.angleTo(en);for(Xt=Math.abs((Xt+3*Math.PI)%(2*Math.PI)-Math.PI),mt.push({distance:at,angleDelta:Xt}),Et+=Xt;at-mt[0].distance>de;)Et-=mt.shift().angleDelta;if(Et>Ee)return!1;Ye++,at+=Wt.dist(en)}return!0}function pp(M){for(var D=0,K=0;K<M.length-1;K++)D+=M[K].dist(M[K+1]);return D}function gp(M,D,K){return M?.6*D*K:0}function mp(M,D){return Math.max(M?M.right-M.left:0,D?D.right-D.left:0)}function vp(M,D,K,de,Ee,Be){for(var Ye=gp(K,Ee,Be),at=mp(K,de)*Be,mt=0,Et=pp(M)/2,Lt=0;Lt<M.length-1;Lt++){var Wt=M[Lt],en=M[Lt+1],Xt=Wt.dist(en);if(mt+Xt>Et){var vn=(Et-mt)/Xt,bn=ai(Wt.x,en.x,vn),zn=ai(Wt.y,en.y,vn),Rn=new yu(bn,zn,en.angleTo(Wt),Lt);return Rn._round(),!Ye||dp(M,Rn,at,Ye,D)?Rn:void 0}mt+=Xt}}function I0(M,D,K,de,Ee,Be,Ye,at,mt){var Et=gp(de,Be,Ye),Lt=mp(de,Ee),Wt=Lt*Ye,en=0===M[0].x||M[0].x===mt||0===M[0].y||M[0].y===mt;return D-Wt<D/4&&(D=Wt+D/4),yp(M,en?D/2*at%D:(Lt/2+2*Be)*Ye*at%D,D,Et,K,Wt,en,!1,mt)}function yp(M,D,K,de,Ee,Be,Ye,at,mt){for(var Et=Be/2,Lt=pp(M),Wt=0,en=D-K,Xt=[],vn=0;vn<M.length-1;vn++){for(var bn=M[vn],zn=M[vn+1],Rn=bn.dist(zn),Jn=zn.angleTo(bn);en+K<Wt+Rn;){var nr=((en+=K)-Wt)/Rn,cr=ai(bn.x,zn.x,nr),dr=ai(bn.y,zn.y,nr);if(cr>=0&&cr<mt&&dr>=0&&dr<mt&&en-Et>=0&&en+Et<=Lt){var wr=new yu(cr,dr,Jn,vn);wr._round(),de&&!dp(M,wr,Be,de,Ee)||Xt.push(wr)}}Wt+=Rn}return at||Xt.length||Ye||(Xt=yp(M,Wt/2,K,de,Ee,Be,Ye,!0,mt)),Xt}function vf(M,D,K,de,Ee){for(var Be=[],Ye=0;Ye<M.length;Ye++)for(var at=M[Ye],mt=void 0,Et=0;Et<at.length-1;Et++){var Lt=at[Et],Wt=at[Et+1];Lt.x<D&&Wt.x<D||(Lt.x<D?Lt=new t(D,Lt.y+(D-Lt.x)/(Wt.x-Lt.x)*(Wt.y-Lt.y))._round():Wt.x<D&&(Wt=new t(D,Lt.y+(D-Lt.x)/(Wt.x-Lt.x)*(Wt.y-Lt.y))._round()),Lt.y<K&&Wt.y<K||(Lt.y<K?Lt=new t(Lt.x+(K-Lt.y)/(Wt.y-Lt.y)*(Wt.x-Lt.x),K)._round():Wt.y<K&&(Wt=new t(Lt.x+(K-Lt.y)/(Wt.y-Lt.y)*(Wt.x-Lt.x),K)._round()),Lt.x>=de&&Wt.x>=de||(Lt.x>=de?Lt=new t(de,Lt.y+(de-Lt.x)/(Wt.x-Lt.x)*(Wt.y-Lt.y))._round():Wt.x>=de&&(Wt=new t(de,Lt.y+(de-Lt.x)/(Wt.x-Lt.x)*(Wt.y-Lt.y))._round()),Lt.y>=Ee&&Wt.y>=Ee||(Lt.y>=Ee?Lt=new t(Lt.x+(Ee-Lt.y)/(Wt.y-Lt.y)*(Wt.x-Lt.x),Ee)._round():Wt.y>=Ee&&(Wt=new t(Lt.x+(Ee-Lt.y)/(Wt.y-Lt.y)*(Wt.x-Lt.x),Ee)._round()),mt&&Lt.equals(mt[mt.length-1])||Be.push(mt=[Lt]),mt.push(Wt)))))}return Be}var Bc=1;function xp(M,D,K,de){var Ee=[],Be=M.image,Ye=Be.pixelRatio,at=Be.paddedRect.w-2*Bc,mt=Be.paddedRect.h-2*Bc,Et=M.right-M.left,Lt=M.bottom-M.top,Wt=Be.stretchX||[[0,at]],en=Be.stretchY||[[0,mt]],Xt=function(oa,_a){return oa+_a[1]-_a[0]},vn=Wt.reduce(Xt,0),bn=en.reduce(Xt,0),zn=at-vn,Rn=mt-bn,Jn=0,nr=vn,cr=0,dr=bn,wr=0,jr=zn,Rr=0,Vr=Rn;if(Be.content&&de){var Wr=Be.content;Jn=yf(Wt,0,Wr[0]),cr=yf(en,0,Wr[1]),nr=yf(Wt,Wr[0],Wr[2]),dr=yf(en,Wr[1],Wr[3]),wr=Wr[0]-Jn,Rr=Wr[1]-cr,jr=Wr[2]-Wr[0]-nr,Vr=Wr[3]-Wr[1]-dr}var hi=function(oa,_a,sa,Ji){var ba=uh(oa.stretch-Jn,nr,Et,M.left),no=bc(oa.fixed-wr,jr,oa.stretch,vn),Da=uh(_a.stretch-cr,dr,Lt,M.top),So=bc(_a.fixed-Rr,Vr,_a.stretch,bn),Jo=uh(sa.stretch-Jn,nr,Et,M.left),Do=bc(sa.fixed-wr,jr,sa.stretch,vn),ls=uh(Ji.stretch-cr,dr,Lt,M.top),zo=bc(Ji.fixed-Rr,Vr,Ji.stretch,bn),ro=new t(ba,Da),Fo=new t(Jo,Da),Co=new t(Jo,ls),wo=new t(ba,ls),Ai=new t(no/Ye,So/Ye),Gi=new t(Do/Ye,zo/Ye),Ya=D*Math.PI/180;if(Ya){var wa=Math.sin(Ya),Va=Math.cos(Ya),Ca=[Va,-wa,wa,Va];ro._matMult(Ca),Fo._matMult(Ca),wo._matMult(Ca),Co._matMult(Ca)}var $i=oa.stretch+oa.fixed,Ss=_a.stretch+_a.fixed;return{tl:ro,tr:Fo,bl:wo,br:Co,tex:{x:Be.paddedRect.x+Bc+$i,y:Be.paddedRect.y+Bc+Ss,w:sa.stretch+sa.fixed-$i,h:Ji.stretch+Ji.fixed-Ss},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ai,pixelOffsetBR:Gi,minFontScaleX:jr/Ye/Et,minFontScaleY:Vr/Ye/Lt,isSDF:K}};if(de&&(Be.stretchX||Be.stretchY))for(var ri=_p(Wt,zn,vn),fi=_p(en,Rn,bn),oi=0;oi<ri.length-1;oi++)for(var ni=ri[oi],Fi=ri[oi+1],_i=0;_i<fi.length-1;_i++)Ee.push(hi(ni,fi[_i],Fi,fi[_i+1]));else Ee.push(hi({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:at+1},{fixed:0,stretch:mt+1}));return Ee}function yf(M,D,K){for(var de=0,Ee=0,Be=M;Ee<Be.length;Ee+=1){var Ye=Be[Ee];de+=Math.max(D,Math.min(K,Ye[1]))-Math.max(D,Math.min(K,Ye[0]))}return de}function _p(M,D,K){for(var de=[{fixed:-Bc,stretch:0}],Ee=0,Be=M;Ee<Be.length;Ee+=1){var Ye=Be[Ee],at=Ye[0],mt=Ye[1],Et=de[de.length-1];de.push({fixed:at-Et.stretch,stretch:Et.stretch}),de.push({fixed:at-Et.stretch,stretch:Et.stretch+(mt-at)})}return de.push({fixed:D+Bc,stretch:K}),de}function uh(M,D,K,de){return M/D*K+de}function bc(M,D,K,de){return M-D*K/de}var hh=function(M,D,K,de,Ee,Be,Ye,at,mt,Et){if(this.boxStartIndex=M.length,mt){var Lt=Be.top,Wt=Be.bottom,en=Be.collisionPadding;en&&(Lt-=en[1],Wt+=en[3]);var Xt=Wt-Lt;Xt>0&&(Xt=Math.max(10,Xt),this.circleDiameter=Xt)}else{var vn=Be.top*Ye-at,bn=Be.bottom*Ye+at,zn=Be.left*Ye-at,Rn=Be.right*Ye+at,Jn=Be.collisionPadding;if(Jn&&(zn-=Jn[0]*Ye,vn-=Jn[1]*Ye,Rn+=Jn[2]*Ye,bn+=Jn[3]*Ye),Et){var nr=new t(zn,vn),cr=new t(Rn,vn),dr=new t(zn,bn),wr=new t(Rn,bn),jr=Et*Math.PI/180;nr._rotate(jr),cr._rotate(jr),dr._rotate(jr),wr._rotate(jr),zn=Math.min(nr.x,cr.x,dr.x,wr.x),Rn=Math.max(nr.x,cr.x,dr.x,wr.x),vn=Math.min(nr.y,cr.y,dr.y,wr.y),bn=Math.max(nr.y,cr.y,dr.y,wr.y)}M.emplaceBack(D.x,D.y,zn,vn,Rn,bn,K,de,Ee)}this.boxEndIndex=M.length},Gh=function(M,D){if(void 0===M&&(M=[]),void 0===D&&(D=L0),this.data=M,this.length=this.data.length,this.compare=D,this.length>0)for(var K=(this.length>>1)-1;K>=0;K--)this._down(K)};function L0(M,D){return M<D?-1:M>D?1:0}function P0(M,D,K){void 0===D&&(D=1),void 0===K&&(K=!1);for(var de=1/0,Ee=1/0,Be=-1/0,Ye=-1/0,at=M[0],mt=0;mt<at.length;mt++){var Et=at[mt];(!mt||Et.x<de)&&(de=Et.x),(!mt||Et.y<Ee)&&(Ee=Et.y),(!mt||Et.x>Be)&&(Be=Et.x),(!mt||Et.y>Ye)&&(Ye=Et.y)}var en=Math.min(Be-de,Ye-Ee),Xt=en/2,vn=new Gh([],bp);if(0===en)return new t(de,Ee);for(var bn=de;bn<Be;bn+=en)for(var zn=Ee;zn<Ye;zn+=en)vn.push(new fh(bn+Xt,zn+Xt,Xt,M));for(var Rn=function(cr){for(var dr=0,wr=0,jr=0,Rr=cr[0],Vr=0,Wr=Rr.length,hi=Wr-1;Vr<Wr;hi=Vr++){var ri=Rr[Vr],fi=Rr[hi],oi=ri.x*fi.y-fi.x*ri.y;wr+=(ri.x+fi.x)*oi,jr+=(ri.y+fi.y)*oi,dr+=3*oi}return new fh(wr/dr,jr/dr,0,cr)}(M),Jn=vn.length;vn.length;){var nr=vn.pop();(nr.d>Rn.d||!Rn.d)&&(Rn=nr,K&&console.log("found best %d after %d probes",Math.round(1e4*nr.d)/1e4,Jn)),nr.max-Rn.d<=D||(vn.push(new fh(nr.p.x-(Xt=nr.h/2),nr.p.y-Xt,Xt,M)),vn.push(new fh(nr.p.x+Xt,nr.p.y-Xt,Xt,M)),vn.push(new fh(nr.p.x-Xt,nr.p.y+Xt,Xt,M)),vn.push(new fh(nr.p.x+Xt,nr.p.y+Xt,Xt,M)),Jn+=4)}return K&&(console.log("num probes: "+Jn),console.log("best distance: "+Rn.d)),Rn.p}function bp(M,D){return D.max-M.max}function fh(M,D,K,de){this.p=new t(M,D),this.h=K,this.d=function(Ee,Be){for(var Ye=!1,at=1/0,mt=0;mt<Be.length;mt++)for(var Et=Be[mt],Lt=0,Wt=Et.length,en=Wt-1;Lt<Wt;en=Lt++){var Xt=Et[Lt],vn=Et[en];Xt.y>Ee.y!=vn.y>Ee.y&&Ee.x<(vn.x-Xt.x)*(Ee.y-Xt.y)/(vn.y-Xt.y)+Xt.x&&(Ye=!Ye),at=Math.min(at,Cu(Ee,Xt,vn))}return(Ye?1:-1)*Math.sqrt(at)}(this.p,de),this.max=this.d+this.h*Math.SQRT2}Gh.prototype.push=function(M){this.data.push(M),this.length++,this._up(this.length-1)},Gh.prototype.pop=function(){if(0!==this.length){var M=this.data[0],D=this.data.pop();return this.length--,this.length>0&&(this.data[0]=D,this._down(0)),M}},Gh.prototype.peek=function(){return this.data[0]},Gh.prototype._up=function(M){for(var D=this.data,K=this.compare,de=D[M];M>0;){var Ee=M-1>>1,Be=D[Ee];if(K(de,Be)>=0)break;D[M]=Be,M=Ee}D[M]=de},Gh.prototype._down=function(M){for(var D=this.data,K=this.compare,de=this.length>>1,Ee=D[M];M<de;){var Be=1+(M<<1),Ye=D[Be],at=Be+1;if(at<this.length&&K(D[at],Ye)<0&&(Be=at,Ye=D[at]),K(Ye,Ee)>=0)break;D[M]=Ye,M=Be}D[M]=Ee};var xf=Number.POSITIVE_INFINITY;function O0(M,D){return D[1]!==xf?function(K,de,Ee){var Be=0,Ye=0;switch(de=Math.abs(de),Ee=Math.abs(Ee),K){case"top-right":case"top-left":case"top":Ye=Ee-7;break;case"bottom-right":case"bottom-left":case"bottom":Ye=7-Ee}switch(K){case"top-right":case"bottom-right":case"right":Be=-de;break;case"top-left":case"bottom-left":case"left":Be=de}return[Be,Ye]}(M,D[0],D[1]):function(K,de){var Ee=0,Be=0;de<0&&(de=0);var Ye=de/Math.sqrt(2);switch(K){case"top-right":case"top-left":Be=Ye-7;break;case"bottom-right":case"bottom-left":Be=7-Ye;break;case"bottom":Be=7-de;break;case"top":Be=de-7}switch(K){case"top-right":case"bottom-right":Ee=-Ye;break;case"top-left":case"bottom-left":Ee=Ye;break;case"left":Ee=de;break;case"right":Ee=-de}return[Ee,Be]}(M,D[0])}function wp(M){switch(M){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var zu=32640;function od(M,D,K,de,Ee,Be,Ye,at,mt,Et,Lt,Wt,en,Xt,vn){var bn=function(cr,dr,wr,jr,Rr,Vr,Wr,hi){for(var ri=jr.layout.get("text-rotate").evaluate(Vr,{})*Math.PI/180,fi=[],oi=0,ni=dr.positionedLines;oi<ni.length;oi+=1)for(var Fi=ni[oi],_i=0,ha=Fi.positionedGlyphs;_i<ha.length;_i+=1){var ci=ha[_i];if(ci.rect){var oa=ci.rect||{},_a=sp+1,sa=!0,Ji=1,ba=0,no=(Rr||hi)&&ci.vertical,Da=ci.metrics.advance*ci.scale/2;if(hi&&dr.verticalizable&&(ba=Fi.lineOffset/2-(ci.imageName?-(po-ci.metrics.width*ci.scale)/2:(ci.scale-1)*po)),ci.imageName){var Do=Wr[ci.imageName];sa=Do.sdf,_a=1/(Ji=Do.pixelRatio)}var ls=Rr?[ci.x+Da,ci.y]:[0,0],zo=Rr?[0,0]:[ci.x+Da+wr[0],ci.y+wr[1]-ba],ro=[0,0];no&&(ro=zo,zo=[0,0]);var Fo=(ci.metrics.left-_a)*ci.scale-Da+zo[0],Co=(-ci.metrics.top-_a)*ci.scale+zo[1],wo=Fo+oa.w*ci.scale/Ji,Ai=Co+oa.h*ci.scale/Ji,Gi=new t(Fo,Co),Ya=new t(wo,Co),wa=new t(Fo,Ai),Va=new t(wo,Ai);if(no){var Ca=new t(-Da,Da- -17),$i=-Math.PI/2,Za=po/2-Da,tl=new t(22-Za,-(ci.imageName?Za:0)),cs=new(Function.prototype.bind.apply(t,[null].concat(ro)));Gi._rotateAround($i,Ca)._add(tl)._add(cs),Ya._rotateAround($i,Ca)._add(tl)._add(cs),wa._rotateAround($i,Ca)._add(tl)._add(cs),Va._rotateAround($i,Ca)._add(tl)._add(cs)}if(ri){var Ol=Math.sin(ri),Rl=Math.cos(ri),io=[Rl,-Ol,Ol,Rl];Gi._matMult(io),Ya._matMult(io),wa._matMult(io),Va._matMult(io)}var us=new t(0,0),hs=new t(0,0);fi.push({tl:Gi,tr:Ya,bl:wa,br:Va,tex:oa,writingMode:dr.writingMode,glyphOffset:ls,sectionIndex:ci.sectionIndex,isSDF:sa,pixelOffsetTL:us,pixelOffsetBR:hs,minFontScaleX:0,minFontScaleY:0})}}return fi}(0,K,at,Ee,Be,Ye,de,M.allowVerticalPlacement),zn=M.textSizeData,Rn=null;"source"===zn.kind?(Rn=[_c*Ee.layout.get("text-size").evaluate(Ye,{})])[0]>zu&&E(M.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===zn.kind&&((Rn=[_c*Xt.compositeTextSizes[0].evaluate(Ye,{},vn),_c*Xt.compositeTextSizes[1].evaluate(Ye,{},vn)])[0]>zu||Rn[1]>zu)&&E(M.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),M.addSymbols(M.text,bn,Rn,at,Be,Ye,Et,D,mt.lineStartIndex,mt.lineLength,en,vn);for(var Jn=0,nr=Lt;Jn<nr.length;Jn+=1)Wt[nr[Jn]]=M.text.placedSymbolArray.length-1;return 4*bn.length}function R0(M){for(var D in M)return M[D];return null}function D0(M,D,K,de){var Ee=M.compareText;if(D in Ee){for(var Be=Ee[D],Ye=Be.length-1;Ye>=0;Ye--)if(de.dist(Be[Ye])<K)return!0}else Ee[D]=[];return Ee[D].push(de),!1}var z0=rh.VectorTileFeature.types,Tp=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function dh(M,D,K,de,Ee,Be,Ye,at,mt,Et,Lt,Wt,en){var Xt=at?Math.min(zu,Math.round(at[0])):0,vn=at?Math.min(zu,Math.round(at[1])):0;M.emplaceBack(D,K,Math.round(32*de),Math.round(32*Ee),Be,Ye,(Xt<<1)+(mt?1:0),vn,16*Et,16*Lt,256*Wt,256*en)}function Ap(M,D,K){M.emplaceBack(D.x,D.y,K),M.emplaceBack(D.x,D.y,K),M.emplaceBack(D.x,D.y,K),M.emplaceBack(D.x,D.y,K)}function ug(M){for(var D=0,K=M.sections;D<K.length;D+=1)if(ho(K[D].text))return!0;return!1}var ph=function(M){this.layoutVertexArray=new Y,this.indexArray=new ke,this.programConfigurations=M,this.segments=new sr,this.dynamicLayoutVertexArray=new q,this.opacityVertexArray=new I,this.placedSymbolArray=new jt};ph.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},ph.prototype.upload=function(M,D,K,de){this.isEmpty()||(K&&(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,w0.members),this.indexBuffer=M.createIndexBuffer(this.indexArray,D),this.dynamicLayoutVertexBuffer=M.createVertexBuffer(this.dynamicLayoutVertexArray,ml.members,!0),this.opacityVertexBuffer=M.createVertexBuffer(this.opacityVertexArray,Tp,!0),this.opacityVertexBuffer.itemSize=1),(K||de)&&this.programConfigurations.upload(M))},ph.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},$r("SymbolBuffers",ph);var qh=function(M,D,K){this.layoutVertexArray=new M,this.layoutAttributes=D,this.indexArray=new K,this.segments=new sr,this.collisionVertexArray=new pe};qh.prototype.upload=function(M){this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=M.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=M.createVertexBuffer(this.collisionVertexArray,ru.members,!0)},qh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},$r("CollisionBuffers",qh);var ua=function(M){this.collisionBoxArray=M.collisionBoxArray,this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(Ye){return Ye.id}),this.index=M.index,this.pixelRatio=M.pixelRatio,this.sourceLayerIndex=M.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Qu([]),this.placementViewportMatrix=Qu([]);var D=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Vh(this.zoom,D["text-size"]),this.iconSizeData=Vh(this.zoom,D["icon-size"]);var K=this.layers[0].layout,de=K.get("symbol-sort-key"),Ee=K.get("symbol-z-order");this.canOverlap=K.get("text-allow-overlap")||K.get("icon-allow-overlap")||K.get("text-ignore-placement")||K.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==Ee&&void 0!==de.constantOr(1),this.sortFeaturesByY=("viewport-y"===Ee||"auto"===Ee&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===K.get("symbol-placement")&&(this.writingModes=K.get("text-writing-mode").map(function(Ye){return Ko[Ye]})),this.stateDependentLayerIds=this.layers.filter(function(Ye){return Ye.isStateDependent()}).map(function(Ye){return Ye.id}),this.sourceID=M.sourceID};ua.prototype.createArrays=function(){this.text=new ph(new Wa(this.layers,this.zoom,function(M){return/^text/.test(M)})),this.icon=new ph(new Wa(this.layers,this.zoom,function(M){return/^icon/.test(M)})),this.glyphOffsetArray=new Jt,this.lineVertexArray=new Mn,this.symbolInstances=new tn},ua.prototype.calculateGlyphDependencies=function(M,D,K,de,Ee){for(var Be=0;Be<M.length;Be++)if(D[M.charCodeAt(Be)]=!0,(K||de)&&Ee){var Ye=oh[M.charAt(Be)];Ye&&(D[Ye.charCodeAt(0)]=!0)}},ua.prototype.populate=function(M,D,K){var de=this.layers[0],Ee=de.layout,Be=Ee.get("text-font"),Ye=Ee.get("text-field"),at=Ee.get("icon-image"),mt=("constant"!==Ye.value.kind||Ye.value.value instanceof $n&&!Ye.value.value.isEmpty()||Ye.value.value.toString().length>0)&&("constant"!==Be.value.kind||Be.value.value.length>0),Et="constant"!==at.value.kind||!!at.value.value||Object.keys(at.parameters).length>0,Lt=Ee.get("symbol-sort-key");if(this.features=[],mt||Et){for(var Wt=D.iconDependencies,en=D.glyphDependencies,Xt=D.availableImages,vn=new Ii(this.zoom),bn=0,zn=M;bn<zn.length;bn+=1){var Rn=zn[bn],Jn=Rn.feature,nr=Rn.id,cr=Rn.index,dr=Rn.sourceLayerIndex,wr=de._featureFilter.needGeometry,jr=xa(Jn,wr);if(de._featureFilter.filter(vn,jr,K)){wr||(jr.geometry=Bs(Jn));var Rr=void 0;if(mt){var Vr=de.getValueAndResolveTokens("text-field",jr,K,Xt),Wr=$n.factory(Vr);ug(Wr)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Zl()||this.hasRTLText&&xo.isParsed())&&(Rr=$f(Wr,de,jr))}var hi=void 0;if(Et){var ri=de.getValueAndResolveTokens("icon-image",jr,K,Xt);hi=ri instanceof mr?ri:mr.fromString(ri)}if(Rr||hi){var fi=this.sortFeaturesByKey?Lt.evaluate(jr,{},K):void 0;if(this.features.push({id:nr,text:Rr,icon:hi,index:cr,sourceLayerIndex:dr,geometry:jr.geometry,properties:Jn.properties,type:z0[Jn.type],sortKey:fi}),hi&&(Wt[hi.name]=!0),Rr){var ni=Be.evaluate(jr,{},K).join(","),Fi="map"===Ee.get("text-rotation-alignment")&&"point"!==Ee.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ko.vertical)>=0;for(var _i=0,ha=Rr.sections;_i<ha.length;_i+=1){var ci=ha[_i];if(ci.image)Wt[ci.image.name]=!0;else{var oa=Pc(Rr.toString()),_a=ci.fontStack||ni,sa=en[_a]=en[_a]||{};this.calculateGlyphDependencies(ci.text,sa,Fi,this.allowVerticalPlacement,oa)}}}}}}"line"===Ee.get("symbol-placement")&&(this.features=function(Ji){var ba={},no={},Da=[],So=0;function Jo(Va){Da.push(Ji[Va]),So++}function Do(Va,Ca,$i){var Za=no[Va];return delete no[Va],no[Ca]=Za,Da[Za].geometry[0].pop(),Da[Za].geometry[0]=Da[Za].geometry[0].concat($i[0]),Za}function ls(Va,Ca,$i){var Za=ba[Ca];return delete ba[Ca],ba[Va]=Za,Da[Za].geometry[0].shift(),Da[Za].geometry[0]=$i[0].concat(Da[Za].geometry[0]),Za}function zo(Va,Ca,$i){var Za=$i?Ca[0][Ca[0].length-1]:Ca[0][0];return Va+":"+Za.x+":"+Za.y}for(var ro=0;ro<Ji.length;ro++){var Fo=Ji[ro],Co=Fo.geometry,wo=Fo.text?Fo.text.toString():null;if(wo){var Ai=zo(wo,Co),Gi=zo(wo,Co,!0);if(Ai in no&&Gi in ba&&no[Ai]!==ba[Gi]){var Ya=ls(Ai,Gi,Co),wa=Do(Ai,Gi,Da[Ya].geometry);delete ba[Ai],delete no[Gi],no[zo(wo,Da[wa].geometry,!0)]=wa,Da[Ya].geometry=null}else Ai in no?Do(Ai,Gi,Co):Gi in ba?ls(Ai,Gi,Co):(Jo(ro),ba[Ai]=So-1,no[Gi]=So-1)}else Jo(ro)}return Da.filter(function(Va){return Va.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Ji,ba){return Ji.sortKey-ba.sortKey})}},ua.prototype.update=function(M,D,K){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(M,D,this.layers,K),this.icon.programConfigurations.updatePaintArrays(M,D,this.layers,K))},ua.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},ua.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},ua.prototype.upload=function(M){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(M),this.iconCollisionBox.upload(M)),this.text.upload(M,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(M,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},ua.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},ua.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},ua.prototype.addToLineVertexArray=function(M,D){var K=this.lineVertexArray.length;if(void 0!==M.segment){for(var de=M.dist(D[M.segment+1]),Ee=M.dist(D[M.segment]),Be={},Ye=M.segment+1;Ye<D.length;Ye++)Be[Ye]={x:D[Ye].x,y:D[Ye].y,tileUnitDistanceFromAnchor:de},Ye<D.length-1&&(de+=D[Ye+1].dist(D[Ye]));for(var at=M.segment||0;at>=0;at--)Be[at]={x:D[at].x,y:D[at].y,tileUnitDistanceFromAnchor:Ee},at>0&&(Ee+=D[at-1].dist(D[at]));for(var mt=0;mt<D.length;mt++){var Et=Be[mt];this.lineVertexArray.emplaceBack(Et.x,Et.y,Et.tileUnitDistanceFromAnchor)}}return{lineStartIndex:K,lineLength:this.lineVertexArray.length-K}},ua.prototype.addSymbols=function(M,D,K,de,Ee,Be,Ye,at,mt,Et,Lt,Wt){for(var en=M.indexArray,Xt=M.layoutVertexArray,vn=M.segments.prepareSegment(4*D.length,Xt,en,this.canOverlap?Be.sortKey:void 0),bn=this.glyphOffsetArray.length,zn=vn.vertexLength,Rn=this.allowVerticalPlacement&&Ye===Ko.vertical?Math.PI/2:0,Jn=Be.text&&Be.text.sections,nr=0;nr<D.length;nr++){var cr=D[nr],dr=cr.tl,wr=cr.tr,jr=cr.bl,Rr=cr.br,Vr=cr.tex,Wr=cr.pixelOffsetTL,hi=cr.pixelOffsetBR,ri=cr.minFontScaleX,fi=cr.minFontScaleY,oi=cr.glyphOffset,ni=cr.isSDF,Fi=cr.sectionIndex,_i=vn.vertexLength,ha=oi[1];dh(Xt,at.x,at.y,dr.x,ha+dr.y,Vr.x,Vr.y,K,ni,Wr.x,Wr.y,ri,fi),dh(Xt,at.x,at.y,wr.x,ha+wr.y,Vr.x+Vr.w,Vr.y,K,ni,hi.x,Wr.y,ri,fi),dh(Xt,at.x,at.y,jr.x,ha+jr.y,Vr.x,Vr.y+Vr.h,K,ni,Wr.x,hi.y,ri,fi),dh(Xt,at.x,at.y,Rr.x,ha+Rr.y,Vr.x+Vr.w,Vr.y+Vr.h,K,ni,hi.x,hi.y,ri,fi),Ap(M.dynamicLayoutVertexArray,at,Rn),en.emplaceBack(_i,_i+1,_i+2),en.emplaceBack(_i+1,_i+2,_i+3),vn.vertexLength+=4,vn.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(oi[0]),nr!==D.length-1&&Fi===D[nr+1].sectionIndex||M.programConfigurations.populatePaintArrays(Xt.length,Be,Be.index,{},Wt,Jn&&Jn[Fi])}M.placedSymbolArray.emplaceBack(at.x,at.y,bn,this.glyphOffsetArray.length-bn,zn,mt,Et,at.segment,K?K[0]:0,K?K[1]:0,de[0],de[1],Ye,0,!1,0,Lt)},ua.prototype._addCollisionDebugVertex=function(M,D,K,de,Ee,Be){return D.emplaceBack(0,0),M.emplaceBack(K.x,K.y,de,Ee,Math.round(Be.x),Math.round(Be.y))},ua.prototype.addCollisionDebugVertices=function(M,D,K,de,Ee,Be,Ye){var at=Ee.segments.prepareSegment(4,Ee.layoutVertexArray,Ee.indexArray),mt=at.vertexLength,Et=Ee.layoutVertexArray,Lt=Ee.collisionVertexArray,Wt=Ye.anchorX,en=Ye.anchorY;this._addCollisionDebugVertex(Et,Lt,Be,Wt,en,new t(M,D)),this._addCollisionDebugVertex(Et,Lt,Be,Wt,en,new t(K,D)),this._addCollisionDebugVertex(Et,Lt,Be,Wt,en,new t(K,de)),this._addCollisionDebugVertex(Et,Lt,Be,Wt,en,new t(M,de)),at.vertexLength+=4;var Xt=Ee.indexArray;Xt.emplaceBack(mt,mt+1),Xt.emplaceBack(mt+1,mt+2),Xt.emplaceBack(mt+2,mt+3),Xt.emplaceBack(mt+3,mt),at.primitiveLength+=4},ua.prototype.addDebugCollisionBoxes=function(M,D,K,de){for(var Ee=M;Ee<D;Ee++){var Be=this.collisionBoxArray.get(Ee);this.addCollisionDebugVertices(Be.x1,Be.y1,Be.x2,Be.y2,de?this.textCollisionBox:this.iconCollisionBox,Be.anchorPoint,K)}},ua.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new qh(te,Qd.members,vt),this.iconCollisionBox=new qh(te,Qd.members,vt);for(var M=0;M<this.symbolInstances.length;M++){var D=this.symbolInstances.get(M);this.addDebugCollisionBoxes(D.textBoxStartIndex,D.textBoxEndIndex,D,!0),this.addDebugCollisionBoxes(D.verticalTextBoxStartIndex,D.verticalTextBoxEndIndex,D,!0),this.addDebugCollisionBoxes(D.iconBoxStartIndex,D.iconBoxEndIndex,D,!1),this.addDebugCollisionBoxes(D.verticalIconBoxStartIndex,D.verticalIconBoxEndIndex,D,!1)}},ua.prototype._deserializeCollisionBoxesForSymbol=function(M,D,K,de,Ee,Be,Ye,at,mt){for(var Et={},Lt=D;Lt<K;Lt++){var Wt=M.get(Lt);Et.textBox={x1:Wt.x1,y1:Wt.y1,x2:Wt.x2,y2:Wt.y2,anchorPointX:Wt.anchorPointX,anchorPointY:Wt.anchorPointY},Et.textFeatureIndex=Wt.featureIndex;break}for(var en=de;en<Ee;en++){var Xt=M.get(en);Et.verticalTextBox={x1:Xt.x1,y1:Xt.y1,x2:Xt.x2,y2:Xt.y2,anchorPointX:Xt.anchorPointX,anchorPointY:Xt.anchorPointY},Et.verticalTextFeatureIndex=Xt.featureIndex;break}for(var vn=Be;vn<Ye;vn++){var bn=M.get(vn);Et.iconBox={x1:bn.x1,y1:bn.y1,x2:bn.x2,y2:bn.y2,anchorPointX:bn.anchorPointX,anchorPointY:bn.anchorPointY},Et.iconFeatureIndex=bn.featureIndex;break}for(var zn=at;zn<mt;zn++){var Rn=M.get(zn);Et.verticalIconBox={x1:Rn.x1,y1:Rn.y1,x2:Rn.x2,y2:Rn.y2,anchorPointX:Rn.anchorPointX,anchorPointY:Rn.anchorPointY},Et.verticalIconFeatureIndex=Rn.featureIndex;break}return Et},ua.prototype.deserializeCollisionBoxes=function(M){this.collisionArrays=[];for(var D=0;D<this.symbolInstances.length;D++){var K=this.symbolInstances.get(D);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(M,K.textBoxStartIndex,K.textBoxEndIndex,K.verticalTextBoxStartIndex,K.verticalTextBoxEndIndex,K.iconBoxStartIndex,K.iconBoxEndIndex,K.verticalIconBoxStartIndex,K.verticalIconBoxEndIndex))}},ua.prototype.hasTextData=function(){return this.text.segments.get().length>0},ua.prototype.hasIconData=function(){return this.icon.segments.get().length>0},ua.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},ua.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},ua.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},ua.prototype.addIndicesForPlacedSymbol=function(M,D){for(var K=M.placedSymbolArray.get(D),de=K.vertexStartIndex+4*K.numGlyphs,Ee=K.vertexStartIndex;Ee<de;Ee+=4)M.indexArray.emplaceBack(Ee,Ee+1,Ee+2),M.indexArray.emplaceBack(Ee+1,Ee+2,Ee+3)},ua.prototype.getSortedSymbolIndexes=function(M){if(this.sortedAngle===M&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var D=Math.sin(M),K=Math.cos(M),de=[],Ee=[],Be=[],Ye=0;Ye<this.symbolInstances.length;++Ye){Be.push(Ye);var at=this.symbolInstances.get(Ye);de.push(0|Math.round(D*at.anchorX+K*at.anchorY)),Ee.push(at.featureIndex)}return Be.sort(function(mt,Et){return de[mt]-de[Et]||Ee[Et]-Ee[mt]}),Be},ua.prototype.addToSortKeyRanges=function(M,D){var K=this.sortKeyRanges[this.sortKeyRanges.length-1];K&&K.sortKey===D?K.symbolInstanceEnd=M+1:this.sortKeyRanges.push({sortKey:D,symbolInstanceStart:M,symbolInstanceEnd:M+1})},ua.prototype.sortFeatures=function(M){var D=this;if(this.sortFeaturesByY&&this.sortedAngle!==M&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(M),this.sortedAngle=M,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var K=0,de=this.symbolInstanceIndexes;K<de.length;K+=1){var Be=this.symbolInstances.get(de[K]);this.featureSortOrder.push(Be.featureIndex),[Be.rightJustifiedTextSymbolIndex,Be.centerJustifiedTextSymbolIndex,Be.leftJustifiedTextSymbolIndex].forEach(function(Ye,at,mt){Ye>=0&&mt.indexOf(Ye)===at&&D.addIndicesForPlacedSymbol(D.text,Ye)}),Be.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Be.verticalPlacedTextSymbolIndex),Be.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Be.placedIconSymbolIndex),Be.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Be.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},$r("SymbolBucket",ua,{omit:["layers","collisionBoxArray","features","compareText"]}),ua.MAX_GLYPHS=65535,ua.addDynamicAttributes=Ap;var F0=new La({"symbol-placement":new Xr(tt.layout_symbol["symbol-placement"]),"symbol-spacing":new Xr(tt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Xr(tt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ti(tt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Xr(tt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Xr(tt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Xr(tt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Xr(tt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Xr(tt.layout_symbol["icon-rotation-alignment"]),"icon-size":new ti(tt.layout_symbol["icon-size"]),"icon-text-fit":new Xr(tt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Xr(tt.layout_symbol["icon-text-fit-padding"]),"icon-image":new ti(tt.layout_symbol["icon-image"]),"icon-rotate":new ti(tt.layout_symbol["icon-rotate"]),"icon-padding":new Xr(tt.layout_symbol["icon-padding"]),"icon-keep-upright":new Xr(tt.layout_symbol["icon-keep-upright"]),"icon-offset":new ti(tt.layout_symbol["icon-offset"]),"icon-anchor":new ti(tt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Xr(tt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Xr(tt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Xr(tt.layout_symbol["text-rotation-alignment"]),"text-field":new ti(tt.layout_symbol["text-field"]),"text-font":new ti(tt.layout_symbol["text-font"]),"text-size":new ti(tt.layout_symbol["text-size"]),"text-max-width":new ti(tt.layout_symbol["text-max-width"]),"text-line-height":new Xr(tt.layout_symbol["text-line-height"]),"text-letter-spacing":new ti(tt.layout_symbol["text-letter-spacing"]),"text-justify":new ti(tt.layout_symbol["text-justify"]),"text-radial-offset":new ti(tt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Xr(tt.layout_symbol["text-variable-anchor"]),"text-anchor":new ti(tt.layout_symbol["text-anchor"]),"text-max-angle":new Xr(tt.layout_symbol["text-max-angle"]),"text-writing-mode":new Xr(tt.layout_symbol["text-writing-mode"]),"text-rotate":new ti(tt.layout_symbol["text-rotate"]),"text-padding":new Xr(tt.layout_symbol["text-padding"]),"text-keep-upright":new Xr(tt.layout_symbol["text-keep-upright"]),"text-transform":new ti(tt.layout_symbol["text-transform"]),"text-offset":new ti(tt.layout_symbol["text-offset"]),"text-allow-overlap":new Xr(tt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Xr(tt.layout_symbol["text-ignore-placement"]),"text-optional":new Xr(tt.layout_symbol["text-optional"])}),sd={paint:new La({"icon-opacity":new ti(tt.paint_symbol["icon-opacity"]),"icon-color":new ti(tt.paint_symbol["icon-color"]),"icon-halo-color":new ti(tt.paint_symbol["icon-halo-color"]),"icon-halo-width":new ti(tt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ti(tt.paint_symbol["icon-halo-blur"]),"icon-translate":new Xr(tt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Xr(tt.paint_symbol["icon-translate-anchor"]),"text-opacity":new ti(tt.paint_symbol["text-opacity"]),"text-color":new ti(tt.paint_symbol["text-color"],{runtimeType:mn,getOverride:function(M){return M.textColor},hasOverride:function(M){return!!M.textColor}}),"text-halo-color":new ti(tt.paint_symbol["text-halo-color"]),"text-halo-width":new ti(tt.paint_symbol["text-halo-width"]),"text-halo-blur":new ti(tt.paint_symbol["text-halo-blur"]),"text-translate":new Xr(tt.paint_symbol["text-translate"]),"text-translate-anchor":new Xr(tt.paint_symbol["text-translate-anchor"])}),layout:F0},gh=function(M){this.type=M.property.overrides?M.property.overrides.runtimeType:Ut,this.defaultValue=M};gh.prototype.evaluate=function(M){if(M.formattedSection){var D=this.defaultValue.property.overrides;if(D&&D.hasOverride(M.formattedSection))return D.getOverride(M.formattedSection)}return M.feature&&M.featureState?this.defaultValue.evaluate(M.feature,M.featureState):this.defaultValue.property.specification.default},gh.prototype.eachChild=function(M){this.defaultValue.isConstant()||M(this.defaultValue.value._styleExpression.expression)},gh.prototype.outputDefined=function(){return!1},gh.prototype.serialize=function(){return null},$r("FormatSectionOverride",gh,{omit:["defaultValue"]});var B0=function(M){function D(K){M.call(this,K,sd)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype.recalculate=function(K,de){if(M.prototype.recalculate.call(this,K,de),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var Ee=this.layout.get("text-writing-mode");if(Ee){for(var Be=[],Ye=0,at=Ee;Ye<at.length;Ye+=1){var mt=at[Ye];Be.indexOf(mt)<0&&Be.push(mt)}this.layout._values["text-writing-mode"]=Be}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},D.prototype.getValueAndResolveTokens=function(K,de,Ee,Be){var mt,Ye=this.layout.get(K).evaluate(de,{},Ee,Be),at=this._unevaluatedLayout._values[K];return at.isDataDriven()||Al(at.value)||!Ye?Ye:(mt=de.properties,Ye.replace(/{([^{}]+)}/g,function(Lt,Wt){return Wt in mt?String(mt[Wt]):""}))},D.prototype.createBucket=function(K){return new ua(K)},D.prototype.queryRadius=function(){return 0},D.prototype.queryIntersectsFeature=function(){return!1},D.prototype._setPaintOverrides=function(){for(var K=0,de=sd.paint.overridableProperties;K<de.length;K+=1){var Ee=de[K];if(D.hasPaintOverride(this.layout,Ee)){var Be,Ye=this.paint.get(Ee),at=new gh(Ye),mt=new es(at,Ye.property.specification);Be="constant"===Ye.value.kind||"source"===Ye.value.kind?new Os("source",mt):new sc("composite",mt,Ye.value.zoomStops,Ye.value._interpolationType),this.paint._values[Ee]=new la(Ye.property,Be,Ye.parameters)}}},D.prototype._handleOverridablePaintPropertyUpdate=function(K,de,Ee){return!(!this.layout||de.isDataDriven()||Ee.isDataDriven())&&D.hasPaintOverride(this.layout,K)},D.hasPaintOverride=function(K,de){var Ee=K.get("text-field"),Be=sd.paint.properties[de],Ye=!1,at=function(Lt){for(var Wt=0,en=Lt;Wt<en.length;Wt+=1)if(Be.overrides&&Be.overrides.hasOverride(en[Wt]))return void(Ye=!0)};if("constant"===Ee.value.kind&&Ee.value.value instanceof $n)at(Ee.value.value.sections);else if("source"===Ee.value.kind){var mt=function(Lt){Ye||(Lt instanceof fn&&or(Lt.value)===qn?at(Lt.value.sections):Lt instanceof Zn?at(Lt.sections):Lt.eachChild(mt))},Et=Ee.value;Et._styleExpression&&mt(Et._styleExpression.expression)}return Ye},D}(ta),Wh={paint:new La({"background-color":new Xr(tt.paint_background["background-color"]),"background-pattern":new is(tt.paint_background["background-pattern"]),"background-opacity":new Xr(tt.paint_background["background-opacity"])})},bf=function(M){function D(K){M.call(this,K,Wh)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D}(ta),N0={paint:new La({"raster-opacity":new Xr(tt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Xr(tt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Xr(tt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Xr(tt.paint_raster["raster-brightness-max"]),"raster-saturation":new Xr(tt.paint_raster["raster-saturation"]),"raster-contrast":new Xr(tt.paint_raster["raster-contrast"]),"raster-resampling":new Xr(tt.paint_raster["raster-resampling"]),"raster-fade-duration":new Xr(tt.paint_raster["raster-fade-duration"])})},j0=function(M){function D(K){M.call(this,K,N0)}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D}(ta),U0=function(M){function D(K){M.call(this,K,{}),this.implementation=K}return M&&(D.__proto__=M),(D.prototype=Object.create(M&&M.prototype)).constructor=D,D.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},D.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},D.prototype.recalculate=function(){},D.prototype.updateTransitions=function(){},D.prototype.hasTransition=function(){},D.prototype.serialize=function(){},D.prototype.onAdd=function(K){this.implementation.onAdd&&this.implementation.onAdd(K,K.painter.context.gl)},D.prototype.onRemove=function(K){this.implementation.onRemove&&this.implementation.onRemove(K,K.painter.context.gl)},D}(ta),V0={circle:Ud,heatmap:Vd,hillshade:Gd,fill:u0,"fill-extrusion":m0,line:b0,symbol:B0,background:bf,raster:j0},xu=r.HTMLImageElement,kp=r.HTMLCanvasElement,Mp=r.HTMLVideoElement,Sp=r.ImageData,wf=r.ImageBitmap,Fu=function(M,D,K,de){this.context=M,this.format=K,this.texture=M.gl.createTexture(),this.update(D,de)};Fu.prototype.update=function(M,D,K){var de=M.width,Ee=M.height,Be=!(this.size&&this.size[0]===de&&this.size[1]===Ee||K),Ye=this.context,at=Ye.gl;if(this.useMipmap=!(!D||!D.useMipmap),at.bindTexture(at.TEXTURE_2D,this.texture),Ye.pixelStoreUnpackFlipY.set(!1),Ye.pixelStoreUnpack.set(1),Ye.pixelStoreUnpackPremultiplyAlpha.set(this.format===at.RGBA&&(!D||!1!==D.premultiply)),Be)this.size=[de,Ee],M instanceof xu||M instanceof kp||M instanceof Mp||M instanceof Sp||wf&&M instanceof wf?at.texImage2D(at.TEXTURE_2D,0,this.format,this.format,at.UNSIGNED_BYTE,M):at.texImage2D(at.TEXTURE_2D,0,this.format,de,Ee,0,this.format,at.UNSIGNED_BYTE,M.data);else{var mt=K||{x:0,y:0},Et=mt.x,Lt=mt.y;M instanceof xu||M instanceof kp||M instanceof Mp||M instanceof Sp||wf&&M instanceof wf?at.texSubImage2D(at.TEXTURE_2D,0,Et,Lt,at.RGBA,at.UNSIGNED_BYTE,M):at.texSubImage2D(at.TEXTURE_2D,0,Et,Lt,de,Ee,at.RGBA,at.UNSIGNED_BYTE,M.data)}this.useMipmap&&this.isSizePowerOfTwo()&&at.generateMipmap(at.TEXTURE_2D)},Fu.prototype.bind=function(M,D,K){var de=this.context.gl;de.bindTexture(de.TEXTURE_2D,this.texture),K!==de.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(K=de.LINEAR),M!==this.filter&&(de.texParameteri(de.TEXTURE_2D,de.TEXTURE_MAG_FILTER,M),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_MIN_FILTER,K||M),this.filter=M),D!==this.wrap&&(de.texParameteri(de.TEXTURE_2D,de.TEXTURE_WRAP_S,D),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_WRAP_T,D),this.wrap=D)},Fu.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Fu.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var ld=function(M){var D=this;this._callback=M,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){D._triggered=!1,D._callback()})};ld.prototype.trigger=function(){var M=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){M._triggered=!1,M._callback()},0))},ld.prototype.remove=function(){delete this._channel,this._callback=function(){}};var mh=function(M,D,K){this.target=M,this.parent=D,this.mapId=K,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},x(["receive","process"],this),this.invoker=new ld(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=O()?M:r};function Cp(M,D,K){var de=2*Math.PI*6378137/256/Math.pow(2,K);return[M*de-2*Math.PI*6378137/2,D*de-2*Math.PI*6378137/2]}mh.prototype.send=function(M,D,K,de,Ee){var Be=this;void 0===Ee&&(Ee=!1);var Ye=Math.round(1e18*Math.random()).toString(36).substring(0,10);K&&(this.callbacks[Ye]=K);var at=R(this.globalScope)?void 0:[];return this.target.postMessage({id:Ye,type:M,hasCallback:!!K,targetMapId:de,mustQueue:Ee,sourceMapId:this.mapId,data:Ds(D,at)},at),{cancel:function(){K&&delete Be.callbacks[Ye],Be.target.postMessage({id:Ye,type:"<cancel>",targetMapId:de,sourceMapId:Be.mapId})}}},mh.prototype.receive=function(M){var D=M.data,K=D.id;if(K&&(!D.targetMapId||this.mapId===D.targetMapId))if("<cancel>"===D.type){delete this.tasks[K];var de=this.cancelCallbacks[K];delete this.cancelCallbacks[K],de&&de()}else O()||D.mustQueue?(this.tasks[K]=D,this.taskQueue.push(K),this.invoker.trigger()):this.processTask(K,D)},mh.prototype.process=function(){if(this.taskQueue.length){var M=this.taskQueue.shift(),D=this.tasks[M];delete this.tasks[M],this.taskQueue.length&&this.invoker.trigger(),D&&this.processTask(M,D)}},mh.prototype.processTask=function(M,D){var K=this;if("<response>"===D.type){var de=this.callbacks[M];delete this.callbacks[M],de&&(D.error?de(Cl(D.error)):de(null,Cl(D.data)))}else{var Ee=!1,Be=R(this.globalScope)?void 0:[],Ye=D.hasCallback?function(Lt,Wt){Ee=!0,delete K.cancelCallbacks[M],K.target.postMessage({id:M,type:"<response>",sourceMapId:K.mapId,error:Lt?Ds(Lt):null,data:Ds(Wt,Be)},Be)}:function(Lt){Ee=!0},at=null,mt=Cl(D.data);if(this.parent[D.type])at=this.parent[D.type](D.sourceMapId,mt,Ye);else if(this.parent.getWorkerSource){var Et=D.type.split(".");at=this.parent.getWorkerSource(D.sourceMapId,Et[0],mt.source)[Et[1]](mt,Ye)}else Ye(new Error("Could not find function "+D.type));!Ee&&at&&at.cancel&&(this.cancelCallbacks[M]=at.cancel)}},mh.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var go=function(M,D){M&&(D?this.setSouthWest(M).setNorthEast(D):4===M.length?this.setSouthWest([M[0],M[1]]).setNorthEast([M[2],M[3]]):this.setSouthWest(M[0]).setNorthEast(M[1]))};go.prototype.setNorthEast=function(M){return this._ne=M instanceof Ra?new Ra(M.lng,M.lat):Ra.convert(M),this},go.prototype.setSouthWest=function(M){return this._sw=M instanceof Ra?new Ra(M.lng,M.lat):Ra.convert(M),this},go.prototype.extend=function(M){var D,K,de=this._sw,Ee=this._ne;if(M instanceof Ra)D=M,K=M;else{if(!(M instanceof go))return Array.isArray(M)?4===M.length||M.every(Array.isArray)?this.extend(go.convert(M)):this.extend(Ra.convert(M)):this;if(K=M._ne,!(D=M._sw)||!K)return this}return de||Ee?(de.lng=Math.min(D.lng,de.lng),de.lat=Math.min(D.lat,de.lat),Ee.lng=Math.max(K.lng,Ee.lng),Ee.lat=Math.max(K.lat,Ee.lat)):(this._sw=new Ra(D.lng,D.lat),this._ne=new Ra(K.lng,K.lat)),this},go.prototype.getCenter=function(){return new Ra((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},go.prototype.getSouthWest=function(){return this._sw},go.prototype.getNorthEast=function(){return this._ne},go.prototype.getNorthWest=function(){return new Ra(this.getWest(),this.getNorth())},go.prototype.getSouthEast=function(){return new Ra(this.getEast(),this.getSouth())},go.prototype.getWest=function(){return this._sw.lng},go.prototype.getSouth=function(){return this._sw.lat},go.prototype.getEast=function(){return this._ne.lng},go.prototype.getNorth=function(){return this._ne.lat},go.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},go.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},go.prototype.isEmpty=function(){return!(this._sw&&this._ne)},go.prototype.contains=function(M){var D=Ra.convert(M),K=D.lng,de=D.lat,Be=this._sw.lng<=K&&K<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Be=this._sw.lng>=K&&K>=this._ne.lng),this._sw.lat<=de&&de<=this._ne.lat&&Be},go.convert=function(M){return!M||M instanceof go?M:new go(M)};var Ep=6371008.8,Ra=function(M,D){if(isNaN(M)||isNaN(D))throw new Error("Invalid LngLat object: ("+M+", "+D+")");if(this.lng=+M,this.lat=+D,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Ra.prototype.wrap=function(){return new Ra(h(this.lng,-180,180),this.lat)},Ra.prototype.toArray=function(){return[this.lng,this.lat]},Ra.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Ra.prototype.distanceTo=function(M){var D=Math.PI/180,K=this.lat*D,de=M.lat*D,Ee=Math.sin(K)*Math.sin(de)+Math.cos(K)*Math.cos(de)*Math.cos((M.lng-this.lng)*D);return Ep*Math.acos(Math.min(Ee,1))},Ra.prototype.toBounds=function(M){void 0===M&&(M=0);var D=360*M/40075017,K=D/Math.cos(Math.PI/180*this.lat);return new go(new Ra(this.lng-K,this.lat-D),new Ra(this.lng+K,this.lat+D))},Ra.convert=function(M){if(M instanceof Ra)return M;if(Array.isArray(M)&&(2===M.length||3===M.length))return new Ra(Number(M[0]),Number(M[1]));if(!Array.isArray(M)&&"object"==typeof M&&null!==M)return new Ra(Number("lng"in M?M.lng:M.lon),Number(M.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Ip=2*Math.PI*Ep;function Yh(M){return Ip*Math.cos(M*Math.PI/180)}function cd(M){return(180+M)/360}function ud(M){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+M*Math.PI/360)))/360}function Lp(M,D){return M/Yh(D)}function hd(M){return 360/Math.PI*Math.atan(Math.exp((180-360*M)*Math.PI/180))-90}var lu=function(M,D,K){void 0===K&&(K=0),this.x=+M,this.y=+D,this.z=+K};lu.fromLngLat=function(M,D){void 0===D&&(D=0);var K=Ra.convert(M);return new lu(cd(K.lng),ud(K.lat),Lp(D,K.lat))},lu.prototype.toLngLat=function(){return new Ra(360*this.x-180,hd(this.y))},lu.prototype.toAltitude=function(){return this.z*Yh(hd(this.y))},lu.prototype.meterInMercatorCoordinateUnits=function(){return 1/Ip*(M=hd(this.y),1/Math.cos(M*Math.PI/180));var M};var Nc=function(M,D,K){this.z=M,this.x=D,this.y=K,this.key=Zh(0,M,M,D,K)};Nc.prototype.equals=function(M){return this.z===M.z&&this.x===M.x&&this.y===M.y},Nc.prototype.url=function(M,D){var K,de,Ee,Be,Ye,at=(de=this.y,Ee=this.z,Be=Cp(256*(K=this.x),256*(de=Math.pow(2,Ee)-de-1),Ee),Ye=Cp(256*(K+1),256*(de+1),Ee),Be[0]+","+Be[1]+","+Ye[0]+","+Ye[1]),mt=function(Et,Lt,Wt){for(var en,Xt="",vn=Et;vn>0;vn--)Xt+=(Lt&(en=1<<vn-1)?1:0)+(Wt&en?2:0);return Xt}(this.z,this.x,this.y);return M[(this.x+this.y)%M.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===D?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",mt).replace("{bbox-epsg-3857}",at)},Nc.prototype.getTilePoint=function(M){var D=Math.pow(2,this.z);return new t((M.x*D-this.x)*Oi,(M.y*D-this.y)*Oi)},Nc.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Pp=function(M,D){this.wrap=M,this.canonical=D,this.key=Zh(M,D.z,D.z,D.x,D.y)},mo=function(M,D,K,de,Ee){this.overscaledZ=M,this.wrap=D,this.canonical=new Nc(K,+de,+Ee),this.key=Zh(D,M,K,de,Ee)};function Zh(M,D,K,de,Ee){(M*=2)<0&&(M=-1*M-1);var Be=1<<K;return(Be*Be*M+Be*Ee+de).toString(36)+K.toString(36)+D.toString(36)}mo.prototype.equals=function(M){return this.overscaledZ===M.overscaledZ&&this.wrap===M.wrap&&this.canonical.equals(M.canonical)},mo.prototype.scaledTo=function(M){var D=this.canonical.z-M;return M>this.canonical.z?new mo(M,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new mo(M,this.wrap,M,this.canonical.x>>D,this.canonical.y>>D)},mo.prototype.calculateScaledKey=function(M,D){var K=this.canonical.z-M;return M>this.canonical.z?Zh(this.wrap*+D,M,this.canonical.z,this.canonical.x,this.canonical.y):Zh(this.wrap*+D,M,M,this.canonical.x>>K,this.canonical.y>>K)},mo.prototype.isChildOf=function(M){if(M.wrap!==this.wrap)return!1;var D=this.canonical.z-M.canonical.z;return 0===M.overscaledZ||M.overscaledZ<this.overscaledZ&&M.canonical.x===this.canonical.x>>D&&M.canonical.y===this.canonical.y>>D},mo.prototype.children=function(M){if(this.overscaledZ>=M)return[new mo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var D=this.canonical.z+1,K=2*this.canonical.x,de=2*this.canonical.y;return[new mo(D,this.wrap,D,K,de),new mo(D,this.wrap,D,K+1,de),new mo(D,this.wrap,D,K,de+1),new mo(D,this.wrap,D,K+1,de+1)]},mo.prototype.isLessThan=function(M){return this.wrap<M.wrap||!(this.wrap>M.wrap)&&(this.overscaledZ<M.overscaledZ||!(this.overscaledZ>M.overscaledZ)&&(this.canonical.x<M.canonical.x||!(this.canonical.x>M.canonical.x)&&this.canonical.y<M.canonical.y))},mo.prototype.wrapped=function(){return new mo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},mo.prototype.unwrapTo=function(M){return new mo(this.overscaledZ,M,this.canonical.z,this.canonical.x,this.canonical.y)},mo.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},mo.prototype.toUnwrapped=function(){return new Pp(this.wrap,this.canonical)},mo.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},mo.prototype.getTilePoint=function(M){return this.canonical.getTilePoint(new lu(M.x-this.wrap,M.y))},$r("CanonicalTileID",Nc),$r("OverscaledTileID",mo,{omit:["posMatrix"]});var cu=function(M,D,K){if(this.uid=M,D.height!==D.width)throw new RangeError("DEM tiles must be square");if(K&&"mapbox"!==K&&"terrarium"!==K)return E('"'+K+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=D.height;var de=this.dim=D.height-2;this.data=new Uint32Array(D.data.buffer),this.encoding=K||"mapbox";for(var Ee=0;Ee<de;Ee++)this.data[this._idx(-1,Ee)]=this.data[this._idx(0,Ee)],this.data[this._idx(de,Ee)]=this.data[this._idx(de-1,Ee)],this.data[this._idx(Ee,-1)]=this.data[this._idx(Ee,0)],this.data[this._idx(Ee,de)]=this.data[this._idx(Ee,de-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(de,-1)]=this.data[this._idx(de-1,0)],this.data[this._idx(-1,de)]=this.data[this._idx(0,de-1)],this.data[this._idx(de,de)]=this.data[this._idx(de-1,de-1)]};cu.prototype.get=function(M,D){var K=new Uint8Array(this.data.buffer),de=4*this._idx(M,D);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(K[de],K[de+1],K[de+2])},cu.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,.00390625,32768]:[6553.6,25.6,.1,1e4]},cu.prototype._idx=function(M,D){if(M<-1||M>=this.dim+1||D<-1||D>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(D+1)*this.stride+(M+1)},cu.prototype._unpackMapbox=function(M,D,K){return(256*M*256+256*D+K)/10-1e4},cu.prototype._unpackTerrarium=function(M,D,K){return 256*M+D+K/256-32768},cu.prototype.getPixels=function(){return new fo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},cu.prototype.backfillBorder=function(M,D,K){if(this.dim!==M.dim)throw new Error("dem dimension mismatch");var de=D*this.dim,Ee=D*this.dim+this.dim,Be=K*this.dim,Ye=K*this.dim+this.dim;switch(D){case-1:de=Ee-1;break;case 1:Ee=de+1}switch(K){case-1:Be=Ye-1;break;case 1:Ye=Be+1}for(var at=-D*this.dim,mt=-K*this.dim,Et=Be;Et<Ye;Et++)for(var Lt=de;Lt<Ee;Lt++)this.data[this._idx(Lt,Et)]=M.data[this._idx(Lt+at,Et+mt)]},$r("DEMData",cu);var Tf=function(M){this._stringToNumber={},this._numberToString=[];for(var D=0;D<M.length;D++){var K=M[D];this._stringToNumber[K]=D,this._numberToString[D]=K}};Tf.prototype.encode=function(M){return this._stringToNumber[M]},Tf.prototype.decode=function(M){return this._numberToString[M]};var Xh=function(M,D,K,de,Ee){this.type="Feature",this._vectorTileFeature=M,M._z=D,M._x=K,M._y=de,this.properties=M.properties,this.id=Ee},Af={geometry:{configurable:!0}};Af.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Af.geometry.set=function(M){this._geometry=M},Xh.prototype.toJSON=function(){var M={geometry:this.geometry};for(var D in this)"_geometry"!==D&&"_vectorTileFeature"!==D&&(M[D]=this[D]);return M},Object.defineProperties(Xh.prototype,Af);var wc=function(){this.state={},this.stateChanges={},this.deletedStates={}};wc.prototype.updateState=function(M,D,K){var de=String(D);if(this.stateChanges[M]=this.stateChanges[M]||{},this.stateChanges[M][de]=this.stateChanges[M][de]||{},u(this.stateChanges[M][de],K),null===this.deletedStates[M])for(var Ee in this.deletedStates[M]={},this.state[M])Ee!==de&&(this.deletedStates[M][Ee]=null);else if(this.deletedStates[M]&&null===this.deletedStates[M][de])for(var Be in this.deletedStates[M][de]={},this.state[M][de])K[Be]||(this.deletedStates[M][de][Be]=null);else for(var Ye in K)this.deletedStates[M]&&this.deletedStates[M][de]&&null===this.deletedStates[M][de][Ye]&&delete this.deletedStates[M][de][Ye]},wc.prototype.removeFeatureState=function(M,D,K){if(null!==this.deletedStates[M]){var de=String(D);if(this.deletedStates[M]=this.deletedStates[M]||{},K&&void 0!==D)null!==this.deletedStates[M][de]&&(this.deletedStates[M][de]=this.deletedStates[M][de]||{},this.deletedStates[M][de][K]=null);else if(void 0!==D)if(this.stateChanges[M]&&this.stateChanges[M][de])for(K in this.deletedStates[M][de]={},this.stateChanges[M][de])this.deletedStates[M][de][K]=null;else this.deletedStates[M][de]=null;else this.deletedStates[M]=null}},wc.prototype.getState=function(M,D){var K=String(D),Be=u({},(this.state[M]||{})[K],(this.stateChanges[M]||{})[K]);if(null===this.deletedStates[M])return{};if(this.deletedStates[M]){var Ye=this.deletedStates[M][D];if(null===Ye)return{};for(var at in Ye)delete Be[at]}return Be},wc.prototype.initializeTileState=function(M,D){M.setFeatureState(this.state,D)},wc.prototype.coalesceChanges=function(M,D){var K={};for(var de in this.stateChanges){this.state[de]=this.state[de]||{};var Ee={};for(var Be in this.stateChanges[de])this.state[de][Be]||(this.state[de][Be]={}),u(this.state[de][Be],this.stateChanges[de][Be]),Ee[Be]=this.state[de][Be];K[de]=Ee}for(var Ye in this.deletedStates){this.state[Ye]=this.state[Ye]||{};var at={};if(null===this.deletedStates[Ye])for(var mt in this.state[Ye])at[mt]={},this.state[Ye][mt]={};else for(var Et in this.deletedStates[Ye]){if(null===this.deletedStates[Ye][Et])this.state[Ye][Et]={};else for(var Lt=0,Wt=Object.keys(this.deletedStates[Ye][Et]);Lt<Wt.length;Lt+=1)delete this.state[Ye][Et][Wt[Lt]];at[Et]=this.state[Ye][Et]}K[Ye]=K[Ye]||{},u(K[Ye],at)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(K).length)for(var Xt in M)M[Xt].setFeatureState(K,D)};var uu=function(M,D){this.tileID=M,this.x=M.canonical.x,this.y=M.canonical.y,this.z=M.canonical.z,this.grid=new Yl(Oi,16,0),this.grid3D=new Yl(Oi,16,0),this.featureIndexArray=new Un,this.promoteId=D};function Op(M,D,K,de,Ee){return _(M,function(Be,Ye){var at=D instanceof Il?D.get(Ye):null;return at&&at.evaluate?at.evaluate(K,de,Ee):at})}function fd(M){for(var D=1/0,K=1/0,de=-1/0,Ee=-1/0,Be=0,Ye=M;Be<Ye.length;Be+=1){var at=Ye[Be];D=Math.min(D,at.x),K=Math.min(K,at.y),de=Math.max(de,at.x),Ee=Math.max(Ee,at.y)}return{minX:D,minY:K,maxX:de,maxY:Ee}}function G0(M,D){return D-M}uu.prototype.insert=function(M,D,K,de,Ee,Be){var Ye=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(K,de,Ee);for(var at=Be?this.grid3D:this.grid,mt=0;mt<D.length;mt++){for(var Et=D[mt],Lt=[1/0,1/0,-1/0,-1/0],Wt=0;Wt<Et.length;Wt++){var en=Et[Wt];Lt[0]=Math.min(Lt[0],en.x),Lt[1]=Math.min(Lt[1],en.y),Lt[2]=Math.max(Lt[2],en.x),Lt[3]=Math.max(Lt[3],en.y)}Lt[0]<Oi&&Lt[1]<Oi&&Lt[2]>=0&&Lt[3]>=0&&at.insert(Ye,Lt[0],Lt[1],Lt[2],Lt[3])}},uu.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new rh.VectorTile(new Du(this.rawTileData)).layers,this.sourceLayerCoder=new Tf(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},uu.prototype.query=function(M,D,K,de){var Ee=this;this.loadVTLayers();for(var Be=M.params||{},Ye=Oi/M.tileSize/M.scale,at=lc(Be.filter),mt=M.queryGeometry,Et=M.queryPadding*Ye,Lt=fd(mt),Wt=this.grid.query(Lt.minX-Et,Lt.minY-Et,Lt.maxX+Et,Lt.maxY+Et),en=fd(M.cameraQueryGeometry),Xt=0,vn=this.grid3D.query(en.minX-Et,en.minY-Et,en.maxX+Et,en.maxY+Et,function(cr,dr,wr,jr){return function(Rr,Vr,Wr,hi,ri){for(var fi=0,oi=Rr;fi<oi.length;fi+=1){var ni=oi[fi];if(Vr<=ni.x&&Wr<=ni.y&&hi>=ni.x&&ri>=ni.y)return!0}var Fi=[new t(Vr,Wr),new t(Vr,ri),new t(hi,ri),new t(hi,Wr)];if(Rr.length>2)for(var _i=0,ha=Fi;_i<ha.length;_i+=1)if(pl(Rr,ha[_i]))return!0;for(var ci=0;ci<Rr.length-1;ci++)if(tu(Rr[ci],Rr[ci+1],Fi))return!0;return!1}(M.cameraQueryGeometry,cr-Et,dr-Et,wr+Et,jr+Et)});Xt<vn.length;Xt+=1)Wt.push(vn[Xt]);Wt.sort(G0);for(var zn,Rn={},Jn=function(cr){var dr=Wt[cr];if(dr!==zn){zn=dr;var wr=Ee.featureIndexArray.get(dr),jr=null;Ee.loadMatchingFeature(Rn,wr.bucketIndex,wr.sourceLayerIndex,wr.featureIndex,at,Be.layers,Be.availableImages,D,K,de,function(Rr,Vr,Wr){return jr||(jr=Bs(Rr)),Vr.queryIntersectsFeature(mt,Rr,Wr,jr,Ee.z,M.transform,Ye,M.pixelPosMatrix)})}},nr=0;nr<Wt.length;nr++)Jn(nr);return Rn},uu.prototype.loadMatchingFeature=function(M,D,K,de,Ee,Be,Ye,at,mt,Et,Lt){var Wt=this.bucketLayerIDs[D];if(!Be||function(Rr,Vr){for(var Wr=0;Wr<Rr.length;Wr++)if(Vr.indexOf(Rr[Wr])>=0)return!0;return!1}(Be,Wt)){var en=this.sourceLayerCoder.decode(K),Xt=this.vtLayers[en].feature(de);if(Ee.needGeometry){var vn=xa(Xt,!0);if(!Ee.filter(new Ii(this.tileID.overscaledZ),vn,this.tileID.canonical))return}else if(!Ee.filter(new Ii(this.tileID.overscaledZ),Xt))return;for(var bn=this.getId(Xt,en),zn=0;zn<Wt.length;zn++){var Rn=Wt[zn];if(!(Be&&Be.indexOf(Rn)<0)){var Jn=at[Rn];if(Jn){var nr={};void 0!==bn&&Et&&(nr=Et.getState(Jn.sourceLayer||"_geojsonTileLayer",bn));var cr=u({},mt[Rn]);cr.paint=Op(cr.paint,Jn.paint,Xt,nr,Ye),cr.layout=Op(cr.layout,Jn.layout,Xt,nr,Ye);var dr=!Lt||Lt(Xt,Jn,nr);if(dr){var wr=new Xh(Xt,this.z,this.x,this.y,bn);wr.layer=cr;var jr=M[Rn];void 0===jr&&(jr=M[Rn]=[]),jr.push({featureIndex:de,feature:wr,intersectionZ:dr})}}}}}},uu.prototype.lookupSymbolFeatures=function(M,D,K,de,Ee,Be,Ye,at){var mt={};this.loadVTLayers();for(var Et=lc(Ee),Lt=0,Wt=M;Lt<Wt.length;Lt+=1)this.loadMatchingFeature(mt,K,de,Wt[Lt],Et,Be,Ye,at,D);return mt},uu.prototype.hasLayer=function(M){for(var D=0,K=this.bucketLayerIDs;D<K.length;D+=1)for(var de=0,Ee=K[D];de<Ee.length;de+=1)if(M===Ee[de])return!0;return!1},uu.prototype.getId=function(M,D){var K=M.id;return this.promoteId&&"boolean"==typeof(K=M.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[D]])&&(K=Number(K)),K},$r("FeatureIndex",uu,{omit:["rawTileData","sourceLayerCoder"]});var bo=function(M,D){this.tileID=M,this.uid=d(),this.uses=0,this.tileSize=D,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};bo.prototype.registerFadeDuration=function(M){var D=M+this.timeAdded;D<Q.now()||this.fadeEndTime&&D<this.fadeEndTime||(this.fadeEndTime=D)},bo.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},bo.prototype.loadVectorData=function(M,D,K){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",M){for(var de in M.featureIndex&&(this.latestFeatureIndex=M.featureIndex,M.rawTileData?(this.latestRawTileData=M.rawTileData,this.latestFeatureIndex.rawTileData=M.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=M.collisionBoxArray,this.buckets=function(Et,Lt){var Wt={};if(!Lt)return Wt;for(var en=function(){var bn=vn[Xt],zn=bn.layerIds.map(function(cr){return Lt.getLayer(cr)}).filter(Boolean);if(0!==zn.length){bn.layers=zn,bn.stateDependentLayerIds&&(bn.stateDependentLayers=bn.stateDependentLayerIds.map(function(cr){return zn.filter(function(dr){return dr.id===cr})[0]}));for(var Rn=0,Jn=zn;Rn<Jn.length;Rn+=1)Wt[Jn[Rn].id]=bn}},Xt=0,vn=Et;Xt<vn.length;Xt+=1)en();return Wt}(M.buckets,D.style),this.hasSymbolBuckets=!1,this.buckets){var Ee=this.buckets[de];if(Ee instanceof ua){if(this.hasSymbolBuckets=!0,!K)break;Ee.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Be in this.buckets){var Ye=this.buckets[Be];if(Ye instanceof ua&&Ye.hasRTLText){this.hasRTLText=!0,xo.isLoading()||xo.isLoaded()||"deferred"!==Zl()||uc();break}}for(var at in this.queryPadding=0,this.buckets){var mt=this.buckets[at];this.queryPadding=Math.max(this.queryPadding,D.style.getLayer(at).queryRadius(mt))}M.imageAtlas&&(this.imageAtlas=M.imageAtlas),M.glyphAtlasImage&&(this.glyphAtlasImage=M.glyphAtlasImage)}else this.collisionBoxArray=new Ot},bo.prototype.unloadVectorData=function(){for(var M in this.buckets)this.buckets[M].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},bo.prototype.getBucket=function(M){return this.buckets[M.id]},bo.prototype.upload=function(M){for(var D in this.buckets){var K=this.buckets[D];K.uploadPending()&&K.upload(M)}var de=M.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Fu(M,this.imageAtlas.image,de.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Fu(M,this.glyphAtlasImage,de.ALPHA),this.glyphAtlasImage=null)},bo.prototype.prepare=function(M){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(M,this.imageAtlasTexture)},bo.prototype.queryRenderedFeatures=function(M,D,K,de,Ee,Be,Ye,at,mt,Et){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:de,cameraQueryGeometry:Ee,scale:Be,tileSize:this.tileSize,pixelPosMatrix:Et,transform:at,params:Ye,queryPadding:this.queryPadding*mt},M,D,K):{}},bo.prototype.querySourceFeatures=function(M,D){var K=this.latestFeatureIndex;if(K&&K.rawTileData){var de=K.loadVTLayers(),Ee=D?D.sourceLayer:"",Be=de._geojsonTileLayer||de[Ee];if(Be)for(var Ye=lc(D&&D.filter),at=this.tileID.canonical,mt=at.z,Et=at.x,Lt=at.y,Wt={z:mt,x:Et,y:Lt},en=0;en<Be.length;en++){var Xt=Be.feature(en);if(Ye.needGeometry){var vn=xa(Xt,!0);if(!Ye.filter(new Ii(this.tileID.overscaledZ),vn,this.tileID.canonical))continue}else if(!Ye.filter(new Ii(this.tileID.overscaledZ),Xt))continue;var bn=K.getId(Xt,Ee),zn=new Xh(Xt,mt,Et,Lt,bn);zn.tile=Wt,M.push(zn)}}},bo.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},bo.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},bo.prototype.setExpiryData=function(M){var D=this.expirationTime;if(M.cacheControl){var K=z(M.cacheControl);K["max-age"]&&(this.expirationTime=Date.now()+1e3*K["max-age"])}else M.expires&&(this.expirationTime=new Date(M.expires).getTime());if(this.expirationTime){var de=Date.now(),Ee=!1;if(this.expirationTime>de)Ee=!1;else if(D)if(this.expirationTime<D)Ee=!0;else{var Be=this.expirationTime-D;Be?this.expirationTime=de+Math.max(Be,3e4):Ee=!0}else Ee=!0;Ee?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},bo.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},bo.prototype.setFeatureState=function(M,D){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(M).length){var K=this.latestFeatureIndex.loadVTLayers();for(var de in this.buckets)if(D.style.hasLayer(de)){var Ee=this.buckets[de],Be=Ee.layers[0].sourceLayer||"_geojsonTileLayer",Ye=K[Be],at=M[Be];if(Ye&&at&&0!==Object.keys(at).length){Ee.update(at,Ye,this.imageAtlas&&this.imageAtlas.patternPositions||{});var mt=D&&D.style&&D.style.getLayer(de);mt&&(this.queryPadding=Math.max(this.queryPadding,mt.queryRadius(Ee)))}}}},bo.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},bo.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Q.now()},bo.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},bo.prototype.setHoldDuration=function(M){this.symbolFadeHoldUntil=Q.now()+M},bo.prototype.setDependencies=function(M,D){for(var K={},de=0,Ee=D;de<Ee.length;de+=1)K[Ee[de]]=!0;this.dependencies[M]=K},bo.prototype.hasDependency=function(M,D){for(var K=0,de=M;K<de.length;K+=1){var Be=this.dependencies[de[K]];if(Be)for(var Ye=0,at=D;Ye<at.length;Ye+=1)if(Be[at[Ye]])return!0}return!1};var _u=r.performance,Rp=function(M){this._marks={start:[M.url,"start"].join("#"),end:[M.url,"end"].join("#"),measure:M.url.toString()},_u.mark(this._marks.start)};Rp.prototype.finish=function(){_u.mark(this._marks.end);var M=_u.getEntriesByName(this._marks.measure);return 0===M.length&&(_u.measure(this._marks.measure,this._marks.start,this._marks.end),M=_u.getEntriesByName(this._marks.measure),_u.clearMarks(this._marks.start),_u.clearMarks(this._marks.end),_u.clearMeasures(this._marks.measure)),M},o.Actor=mh,o.AlphaImage=mu,o.CanonicalTileID=Nc,o.CollisionBoxArray=Ot,o.Color=Gn,o.DEMData=cu,o.DataConstantProperty=Xr,o.DictionaryCoder=Tf,o.EXTENT=Oi,o.ErrorEvent=He,o.EvaluationParameters=Ii,o.Event=Ge,o.Evented=ut,o.FeatureIndex=uu,o.FillBucket=vc,o.FillExtrusionBucket=xc,o.ImageAtlas=jh,o.ImagePosition=lh,o.LineBucket=Xo,o.LngLat=Ra,o.LngLatBounds=go,o.MercatorCoordinate=lu,o.ONE_EM=po,o.OverscaledTileID=mo,o.Point=t,o.Point$1=t,o.Properties=La,o.Protobuf=Du,o.RGBAImage=fo,o.RequestManager=we,o.RequestPerformance=Rp,o.ResourceType=Tt,o.SegmentVector=sr,o.SourceFeatureState=wc,o.StructArrayLayout1ui2=_t,o.StructArrayLayout2f1f2i16=le,o.StructArrayLayout2i4=os,o.StructArrayLayout3ui6=ke,o.StructArrayLayout4i8=Js,o.SymbolBucket=ua,o.Texture=Fu,o.Tile=bo,o.Transitionable=Ts,o.Uniform1f=Ti,o.Uniform1i=mi,o.Uniform2f=Li,o.Uniform3f=pa,o.Uniform4f=Pa,o.UniformColor=to,o.UniformMatrix4f=ya,o.UnwrappedTileID=Pp,o.ValidationError=xt,o.WritingMode=Ko,o.ZoomHistory=rs,o.add=function(M,D,K){return M[0]=D[0]+K[0],M[1]=D[1]+K[1],M[2]=D[2]+K[2],M},o.addDynamicAttributes=Ap,o.asyncAll=function(M,D,K){if(!M.length)return K(null,[]);var de=M.length,Ee=new Array(M.length),Be=null;M.forEach(function(Ye,at){D(Ye,function(mt,Et){mt&&(Be=mt),Ee[at]=Et,0==--de&&K(Be,Ee)})})},o.bezier=a,o.bindAll=x,o.browser=Q,o.cacheEntryPossiblyAdded=function(M){++kt>Ue&&(M.getActor().send("enforceCacheSizeLimit",Le),kt=0)},o.clamp=c,o.clearTileCache=function(M){var D=r.caches.delete(Me);M&&D.catch(M).then(function(){return M()})},o.clipLine=vf,o.clone=function(M){var D=new Qs(16);return D[0]=M[0],D[1]=M[1],D[2]=M[2],D[3]=M[3],D[4]=M[4],D[5]=M[5],D[6]=M[6],D[7]=M[7],D[8]=M[8],D[9]=M[9],D[10]=M[10],D[11]=M[11],D[12]=M[12],D[13]=M[13],D[14]=M[14],D[15]=M[15],D},o.clone$1=C,o.clone$2=function(M){var D=new Qs(3);return D[0]=M[0],D[1]=M[1],D[2]=M[2],D},o.collisionCircleLayout=zh,o.config=$,o.create=function(){var M=new Qs(16);return Qs!=Float32Array&&(M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[11]=0,M[12]=0,M[13]=0,M[14]=0),M[0]=1,M[5]=1,M[10]=1,M[15]=1,M},o.create$1=function(){var M=new Qs(9);return Qs!=Float32Array&&(M[1]=0,M[2]=0,M[3]=0,M[5]=0,M[6]=0,M[7]=0),M[0]=1,M[4]=1,M[8]=1,M},o.create$2=function(){var M=new Qs(4);return Qs!=Float32Array&&(M[1]=0,M[2]=0),M[0]=1,M[3]=1,M},o.createCommonjsModule=T,o.createExpression=ka,o.createLayout=ra,o.createStyleLayer=function(M){return"custom"===M.type?new U0(M):new V0[M.type](M)},o.cross=function(M,D,K){var de=D[0],Ee=D[1],Be=D[2],Ye=K[0],at=K[1],mt=K[2];return M[0]=Ee*mt-Be*at,M[1]=Be*Ye-de*mt,M[2]=de*at-Ee*Ye,M},o.deepEqual=function M(D,K){if(Array.isArray(D)){if(!Array.isArray(K)||D.length!==K.length)return!1;for(var de=0;de<D.length;de++)if(!M(D[de],K[de]))return!1;return!0}if("object"==typeof D&&null!==D&&null!==K){if("object"!=typeof K||Object.keys(D).length!==Object.keys(K).length)return!1;for(var Ee in D)if(!M(D[Ee],K[Ee]))return!1;return!0}return D===K},o.dot=function(M,D){return M[0]*D[0]+M[1]*D[1]+M[2]*D[2]},o.dot$1=function(M,D){return M[0]*D[0]+M[1]*D[1]+M[2]*D[2]+M[3]*D[3]},o.ease=s,o.emitValidationErrors=uo,o.endsWith=v,o.enforceCacheSizeLimit=function(M){qe(),me&&me.then(function(D){D.keys().then(function(K){for(var de=0;de<K.length-M;de++)D.delete(K[de])})})},o.evaluateSizeForFeature=hp,o.evaluateSizeForZoom=fp,o.evaluateVariableOffset=O0,o.evented=Ua,o.extend=u,o.featureFilter=lc,o.filterObject=f,o.fromRotation=function(M,D){var K=Math.sin(D),de=Math.cos(D);return M[0]=de,M[1]=K,M[2]=0,M[3]=-K,M[4]=de,M[5]=0,M[6]=0,M[7]=0,M[8]=1,M},o.getAnchorAlignment=ad,o.getAnchorJustification=wp,o.getArrayBuffer=Ht,o.getImage=et,o.getJSON=function(M,D){return Vt(u(M,{type:"json"}),D)},o.getRTLTextPluginStatus=Zl,o.getReferrer=ot,o.getVideo=function(M,D){var K,de,Ee=r.document.createElement("video");Ee.muted=!0,Ee.onloadstart=function(){D(null,Ee)};for(var Be=0;Be<M.length;Be++){var Ye=r.document.createElement("source");K=M[Be],de=void 0,(de=r.document.createElement("a")).href=K,de.protocol===r.document.location.protocol&&de.host===r.document.location.host||(Ee.crossOrigin="Anonymous"),Ye.src=M[Be],Ee.appendChild(Ye)}return{cancel:function(){}}},o.identity=Qu,o.invert=function(M,D){var K=D[0],de=D[1],Ee=D[2],Be=D[3],Ye=D[4],at=D[5],mt=D[6],Et=D[7],Lt=D[8],Wt=D[9],en=D[10],Xt=D[11],vn=D[12],bn=D[13],zn=D[14],Rn=D[15],Jn=K*at-de*Ye,nr=K*mt-Ee*Ye,cr=K*Et-Be*Ye,dr=de*mt-Ee*at,wr=de*Et-Be*at,jr=Ee*Et-Be*mt,Rr=Lt*bn-Wt*vn,Vr=Lt*zn-en*vn,Wr=Lt*Rn-Xt*vn,hi=Wt*zn-en*bn,ri=Wt*Rn-Xt*bn,fi=en*Rn-Xt*zn,oi=Jn*fi-nr*ri+cr*hi+dr*Wr-wr*Vr+jr*Rr;return oi?(M[0]=(at*fi-mt*ri+Et*hi)*(oi=1/oi),M[1]=(Ee*ri-de*fi-Be*hi)*oi,M[2]=(bn*jr-zn*wr+Rn*dr)*oi,M[3]=(en*wr-Wt*jr-Xt*dr)*oi,M[4]=(mt*Wr-Ye*fi-Et*Vr)*oi,M[5]=(K*fi-Ee*Wr+Be*Vr)*oi,M[6]=(zn*cr-vn*jr-Rn*nr)*oi,M[7]=(Lt*jr-en*cr+Xt*nr)*oi,M[8]=(Ye*ri-at*Wr+Et*Rr)*oi,M[9]=(de*Wr-K*ri-Be*Rr)*oi,M[10]=(vn*wr-bn*cr+Rn*Jn)*oi,M[11]=(Wt*cr-Lt*wr-Xt*Jn)*oi,M[12]=(at*Vr-Ye*hi-mt*Rr)*oi,M[13]=(K*hi-de*Vr+Ee*Rr)*oi,M[14]=(bn*nr-vn*dr-zn*Jn)*oi,M[15]=(Lt*dr-Wt*nr+en*Jn)*oi,M):null},o.isChar=Br,o.isMapboxURL=Te,o.keysDifference=function(M,D){var K=[];for(var de in M)de in D||K.push(de);return K},o.makeRequest=Vt,o.mapObject=_,o.mercatorXfromLng=cd,o.mercatorYfromLat=ud,o.mercatorZfromAltitude=Lp,o.mul=n0,o.multiply=Vf,o.mvt=rh,o.nextPowerOfTwo=function(M){return M<=1?1:Math.pow(2,Math.ceil(Math.log(M)/Math.LN2))},o.normalize=function(M,D){var K=D[0],de=D[1],Ee=D[2],Be=K*K+de*de+Ee*Ee;return Be>0&&(Be=1/Math.sqrt(Be)),M[0]=D[0]*Be,M[1]=D[1]*Be,M[2]=D[2]*Be,M},o.number=ai,o.offscreenCanvasSupported=St,o.ortho=function(M,D,K,de,Ee,Be,Ye){var at=1/(D-K),mt=1/(de-Ee),Et=1/(Be-Ye);return M[0]=-2*at,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=-2*mt,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[10]=2*Et,M[11]=0,M[12]=(D+K)*at,M[13]=(Ee+de)*mt,M[14]=(Ye+Be)*Et,M[15]=1,M},o.parseGlyphPBF=function(M){return new Du(M).readFields(M0,[])},o.pbf=Du,o.performSymbolLayout=function(M,D,K,de,Ee,Be,Ye){M.createArrays(),M.tilePixelRatio=Oi/(512*M.overscaling),M.compareText={},M.iconsNeedLinear=!1;var mt=M.layers[0].layout,Et=M.layers[0]._unevaluatedLayout._values,Lt={};if("composite"===M.textSizeData.kind){var Wt=M.textSizeData,Xt=Wt.maxZoom;Lt.compositeTextSizes=[Et["text-size"].possiblyEvaluate(new Ii(Wt.minZoom),Ye),Et["text-size"].possiblyEvaluate(new Ii(Xt),Ye)]}if("composite"===M.iconSizeData.kind){var vn=M.iconSizeData,zn=vn.maxZoom;Lt.compositeIconSizes=[Et["icon-size"].possiblyEvaluate(new Ii(vn.minZoom),Ye),Et["icon-size"].possiblyEvaluate(new Ii(zn),Ye)]}Lt.layoutTextSize=Et["text-size"].possiblyEvaluate(new Ii(M.zoom+1),Ye),Lt.layoutIconSize=Et["icon-size"].possiblyEvaluate(new Ii(M.zoom+1),Ye),Lt.textMaxSize=Et["text-size"].possiblyEvaluate(new Ii(18));for(var Rn=mt.get("text-line-height")*po,Jn="map"===mt.get("text-rotation-alignment")&&"point"!==mt.get("symbol-placement"),nr=mt.get("text-keep-upright"),cr=mt.get("text-size"),dr=function(){var Rr=jr[wr],Vr=mt.get("text-font").evaluate(Rr,{},Ye).join(","),Wr=cr.evaluate(Rr,{},Ye),hi=Lt.layoutTextSize.evaluate(Rr,{},Ye),ri=Lt.layoutIconSize.evaluate(Rr,{},Ye),fi={horizontal:{},vertical:void 0},oi=Rr.text,ni=[0,0];if(oi){var Fi=oi.toString(),_i=mt.get("text-letter-spacing").evaluate(Rr,{},Ye)*po,ha=function(Ai){for(var Gi=0,Ya=Ai;Gi<Ya.length;Gi+=1)if(wa=Ya[Gi].charCodeAt(0),Br.Arabic(wa)||Br["Arabic Supplement"](wa)||Br["Arabic Extended-A"](wa)||Br["Arabic Presentation Forms-A"](wa)||Br["Arabic Presentation Forms-B"](wa))return!1;var wa;return!0}(Fi)?_i:0,ci=mt.get("text-anchor").evaluate(Rr,{},Ye),oa=mt.get("text-variable-anchor");if(!oa){var _a=mt.get("text-radial-offset").evaluate(Rr,{},Ye);ni=_a?O0(ci,[_a*po,xf]):mt.get("text-offset").evaluate(Rr,{},Ye).map(function(Ai){return Ai*po})}var sa=Jn?"center":mt.get("text-justify").evaluate(Rr,{},Ye),Ji=mt.get("symbol-placement"),ba="point"===Ji?mt.get("text-max-width").evaluate(Rr,{},Ye)*po:0,no=function(){M.allowVerticalPlacement&&Pc(Fi)&&(fi.vertical=ch(oi,D,K,Ee,Vr,ba,Rn,ci,"left",ha,ni,Ko.vertical,!0,Ji,hi,Wr))};if(!Jn&&oa){for(var Da="auto"===sa?oa.map(function(Ai){return wp(Ai)}):[sa],So=!1,Jo=0;Jo<Da.length;Jo++){var Do=Da[Jo];if(!fi.horizontal[Do])if(So)fi.horizontal[Do]=fi.horizontal[0];else{var ls=ch(oi,D,K,Ee,Vr,ba,Rn,"center",Do,ha,ni,Ko.horizontal,!1,Ji,hi,Wr);ls&&(fi.horizontal[Do]=ls,So=1===ls.positionedLines.length)}}no()}else{"auto"===sa&&(sa=wp(ci));var zo=ch(oi,D,K,Ee,Vr,ba,Rn,ci,sa,ha,ni,Ko.horizontal,!1,Ji,hi,Wr);zo&&(fi.horizontal[sa]=zo),no(),Pc(Fi)&&Jn&&nr&&(fi.vertical=ch(oi,D,K,Ee,Vr,ba,Rn,ci,sa,ha,ni,Ko.vertical,!1,Ji,hi,Wr))}}var Ai,Gi,wa,Ss,cs,ro=void 0,Fo=!1;if(Rr.icon&&Rr.icon.name){var Co=de[Rr.icon.name];Co&&(Ai=Ee[Rr.icon.name],Gi=mt.get("icon-offset").evaluate(Rr,{},Ye),wa=ad(mt.get("icon-anchor").evaluate(Rr,{},Ye)),ro={image:Ai,top:cs=Gi[1]-Ai.displaySize[1]*wa.verticalAlign,bottom:cs+Ai.displaySize[1],left:Ss=Gi[0]-Ai.displaySize[0]*wa.horizontalAlign,right:Ss+Ai.displaySize[0]},Fo=Co.sdf,void 0===M.sdfIcons?M.sdfIcons=Co.sdf:M.sdfIcons!==Co.sdf&&E("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Co.pixelRatio!==M.pixelRatio||0!==mt.get("icon-rotate").constantOr(1))&&(M.iconsNeedLinear=!0))}var wo=R0(fi.horizontal)||fi.vertical;M.iconsInText=!!wo&&wo.iconsInText,(wo||ro)&&function(Ai,Gi,Ya,wa,Va,Ca,$i,Za,Ss,tl,cs){var Ol=Ca.textMaxSize.evaluate(Gi,{});void 0===Ol&&(Ol=$i);var Rl,io=Ai.layers[0].layout,us=io.get("icon-offset").evaluate(Gi,{},cs),hs=R0(Ya.horizontal),pi=$i/24,kf=Ai.tilePixelRatio*pi,bu=Ai.tilePixelRatio*Ol/24,Mf=Ai.tilePixelRatio*Za,hu=Ai.tilePixelRatio*io.get("symbol-spacing"),dd=io.get("text-padding")*Ai.tilePixelRatio,Sf=io.get("icon-padding")*Ai.tilePixelRatio,vh=io.get("text-max-angle")/180*Math.PI,Cf="map"===io.get("text-rotation-alignment")&&"point"!==io.get("symbol-placement"),Ef="map"===io.get("icon-rotation-alignment")&&"point"!==io.get("symbol-placement"),yh=io.get("symbol-placement"),pd=hu/2,Kh=io.get("icon-text-fit");wa&&"none"!==Kh&&(Ai.allowVerticalPlacement&&Ya.vertical&&(Rl=up(wa,Ya.vertical,Kh,io.get("icon-text-fit-padding"),us,pi)),hs&&(wa=up(wa,hs,Kh,io.get("icon-text-fit-padding"),us,pi)));var jc=function(H0,Bu){Bu.x<0||Bu.x>=Oi||Bu.y<0||Bu.y>=Oi||function($a,Tc,q0,Tu,rc,zp,zf,Uc,Jh,$h,Qh,ef,bd,wd,tf,Td,Fp,Bp,Np,jp,vl,Ff,Up,Vc,W0){var Vp,Au,wh,Nu,ju,Uu=$a.addToLineVertexArray(Tc,q0),Y0=0,Gp=0,Ad=0,Vu=0,kd=-1,Hp=-1,rl={},Fl=Nr(""),Md=0,qp=0;if(void 0===Uc._unevaluatedLayout.getValue("text-radial-offset")?(Md=(Vp=Uc.layout.get("text-offset").evaluate(vl,{},Vc).map(function(Ga){return Ga*po}))[0],qp=Vp[1]):(Md=Uc.layout.get("text-radial-offset").evaluate(vl,{},Vc)*po,qp=xf),$a.allowVerticalPlacement&&Tu.vertical){var Z0=Uc.layout.get("text-rotate").evaluate(vl,{},Vc)+90;Nu=new hh(Jh,Tc,$h,Qh,ef,Tu.vertical,bd,wd,tf,Z0),zf&&(ju=new hh(Jh,Tc,$h,Qh,ef,zf,Fp,Bp,tf,Z0))}if(rc){var Sd=Uc.layout.get("icon-rotate").evaluate(vl,{}),Cd="none"!==Uc.layout.get("icon-text-fit"),X0=xp(rc,Sd,Up,Cd),Gc=zf?xp(zf,Sd,Up,Cd):void 0;wh=new hh(Jh,Tc,$h,Qh,ef,rc,Fp,Bp,!1,Sd),Y0=4*X0.length;var Yp=$a.iconSizeData,Th=null;"source"===Yp.kind?(Th=[_c*Uc.layout.get("icon-size").evaluate(vl,{})])[0]>zu&&E($a.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===Yp.kind&&((Th=[_c*Ff.compositeIconSizes[0].evaluate(vl,{},Vc),_c*Ff.compositeIconSizes[1].evaluate(vl,{},Vc)])[0]>zu||Th[1]>zu)&&E($a.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),$a.addSymbols($a.icon,X0,Th,jp,Np,vl,!1,Tc,Uu.lineStartIndex,Uu.lineLength,-1,Vc),kd=$a.icon.placedSymbolArray.length-1,Gc&&(Gp=4*Gc.length,$a.addSymbols($a.icon,Gc,Th,jp,Np,vl,Ko.vertical,Tc,Uu.lineStartIndex,Uu.lineLength,-1,Vc),Hp=$a.icon.placedSymbolArray.length-1)}for(var Bf in Tu.horizontal){var Nf=Tu.horizontal[Bf];if(!Au){Fl=Nr(Nf.text);var Zp=Uc.layout.get("text-rotate").evaluate(vl,{},Vc);Au=new hh(Jh,Tc,$h,Qh,ef,Nf,bd,wd,tf,Zp)}var Ed=1===Nf.positionedLines.length;if(Ad+=od($a,Tc,Nf,zp,Uc,tf,vl,Td,Uu,Tu.vertical?Ko.horizontal:Ko.horizontalOnly,Ed?Object.keys(Tu.horizontal):[Bf],rl,kd,Ff,Vc),Ed)break}Tu.vertical&&(Vu+=od($a,Tc,Tu.vertical,zp,Uc,tf,vl,Td,Uu,Ko.vertical,["vertical"],rl,Hp,Ff,Vc));var $t=Au?Au.boxStartIndex:$a.collisionBoxArray.length,Id=Au?Au.boxEndIndex:$a.collisionBoxArray.length,Ld=Nu?Nu.boxStartIndex:$a.collisionBoxArray.length,Pd=Nu?Nu.boxEndIndex:$a.collisionBoxArray.length,K0=wh?wh.boxStartIndex:$a.collisionBoxArray.length,J0=wh?wh.boxEndIndex:$a.collisionBoxArray.length,fa=ju?ju.boxStartIndex:$a.collisionBoxArray.length,$0=ju?ju.boxEndIndex:$a.collisionBoxArray.length,ic=-1,Hc=function(Ga,Q0){return Ga&&Ga.circleDiameter?Math.max(Ga.circleDiameter,Q0):Q0};ic=Hc(Au,ic),ic=Hc(Nu,ic),ic=Hc(wh,ic);var Od=(ic=Hc(ju,ic))>-1?1:0;Od&&(ic*=W0/po),$a.glyphOffsetArray.length>=ua.MAX_GLYPHS&&E("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==vl.sortKey&&$a.addToSortKeyRanges($a.symbolInstances.length,vl.sortKey),$a.symbolInstances.emplaceBack(Tc.x,Tc.y,rl.right>=0?rl.right:-1,rl.center>=0?rl.center:-1,rl.left>=0?rl.left:-1,rl.vertical||-1,kd,Hp,Fl,$t,Id,Ld,Pd,K0,J0,fa,$0,$h,Ad,Vu,Y0,Gp,Od,0,bd,Md,qp,ic)}(Ai,Bu,H0,Ya,wa,Va,Rl,Ai.layers[0],Ai.collisionBoxArray,Gi.index,Gi.sourceLayerIndex,Ai.index,kf,dd,Cf,Ss,Mf,Sf,Ef,us,Gi,Ca,tl,cs,$i)};if("line"===yh)for(var xh=0,gd=vf(Gi.geometry,0,0,Oi,Oi);xh<gd.length;xh+=1)for(var If=gd[xh],_h=0,Lf=I0(If,hu,vh,Ya.vertical||hs,wa,24,bu,Ai.overscaling,Oi);_h<Lf.length;_h+=1){var Pf=Lf[_h];hs&&D0(Ai,hs.text,pd,Pf)||jc(If,Pf)}else if("line-center"===yh)for(var bh=0,Of=Gi.geometry;bh<Of.length;bh+=1){var ec=Of[bh];if(ec.length>1){var tc=vp(ec,vh,Ya.vertical||hs,wa,24,bu);tc&&jc(ec,tc)}}else if("Polygon"===Gi.type)for(var nl=0,zl=Ru(Gi.geometry,0);nl<zl.length;nl+=1){var nc=zl[nl],md=P0(nc,16);jc(nc[0],new yu(md.x,md.y,0))}else if("LineString"===Gi.type)for(var Rf=0,Df=Gi.geometry;Rf<Df.length;Rf+=1){var vd=Df[Rf];jc(vd,new yu(vd[0].x,vd[0].y,0))}else if("Point"===Gi.type)for(var yd=0,Dp=Gi.geometry;yd<Dp.length;yd+=1)for(var wu=0,xd=Dp[yd];wu<xd.length;wu+=1){var _d=xd[wu];jc([_d],new yu(_d.x,_d.y,0))}}(M,Rr,fi,ro,de,Lt,hi,ri,ni,Fo,Ye)},wr=0,jr=M.features;wr<jr.length;wr+=1)dr();Be&&M.generateCollisionDebugBuffers()},o.perspective=function(M,D,K,de,Ee){var Be,Ye=1/Math.tan(D/2);return M[0]=Ye/K,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=Ye,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[11]=-1,M[12]=0,M[13]=0,M[15]=0,null!=Ee&&Ee!==1/0?(M[10]=(Ee+de)*(Be=1/(de-Ee)),M[14]=2*Ee*de*Be):(M[10]=-1,M[14]=-2*de),M},o.pick=function(M,D){for(var K={},de=0;de<D.length;de++){var Ee=D[de];Ee in M&&(K[Ee]=M[Ee])}return K},o.plugin=xo,o.polygonIntersectsPolygon=Kl,o.postMapLoadEvent=ve,o.postTurnstileEvent=Ne,o.potpack=ou,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.register=$r,o.registerForPluginStateChange=function(M){return M({pluginStatus:zi,pluginURL:ja}),Ua.on("pluginStateChange",M),M},o.renderColorRamp=ff,o.rotate=function(M,D,K){var de=D[0],Ee=D[1],Be=D[2],Ye=D[3],at=Math.sin(K),mt=Math.cos(K);return M[0]=de*mt+Be*at,M[1]=Ee*mt+Ye*at,M[2]=de*-at+Be*mt,M[3]=Ee*-at+Ye*mt,M},o.rotateX=function(M,D,K){var de=Math.sin(K),Ee=Math.cos(K),Be=D[4],Ye=D[5],at=D[6],mt=D[7],Et=D[8],Lt=D[9],Wt=D[10],en=D[11];return D!==M&&(M[0]=D[0],M[1]=D[1],M[2]=D[2],M[3]=D[3],M[12]=D[12],M[13]=D[13],M[14]=D[14],M[15]=D[15]),M[4]=Be*Ee+Et*de,M[5]=Ye*Ee+Lt*de,M[6]=at*Ee+Wt*de,M[7]=mt*Ee+en*de,M[8]=Et*Ee-Be*de,M[9]=Lt*Ee-Ye*de,M[10]=Wt*Ee-at*de,M[11]=en*Ee-mt*de,M},o.rotateZ=function(M,D,K){var de=Math.sin(K),Ee=Math.cos(K),Be=D[0],Ye=D[1],at=D[2],mt=D[3],Et=D[4],Lt=D[5],Wt=D[6],en=D[7];return D!==M&&(M[8]=D[8],M[9]=D[9],M[10]=D[10],M[11]=D[11],M[12]=D[12],M[13]=D[13],M[14]=D[14],M[15]=D[15]),M[0]=Be*Ee+Et*de,M[1]=Ye*Ee+Lt*de,M[2]=at*Ee+Wt*de,M[3]=mt*Ee+en*de,M[4]=Et*Ee-Be*de,M[5]=Lt*Ee-Ye*de,M[6]=Wt*Ee-at*de,M[7]=en*Ee-mt*de,M},o.scale=function(M,D,K){var de=K[0],Ee=K[1],Be=K[2];return M[0]=D[0]*de,M[1]=D[1]*de,M[2]=D[2]*de,M[3]=D[3]*de,M[4]=D[4]*Ee,M[5]=D[5]*Ee,M[6]=D[6]*Ee,M[7]=D[7]*Ee,M[8]=D[8]*Be,M[9]=D[9]*Be,M[10]=D[10]*Be,M[11]=D[11]*Be,M[12]=D[12],M[13]=D[13],M[14]=D[14],M[15]=D[15],M},o.scale$1=function(M,D,K){return M[0]=D[0]*K,M[1]=D[1]*K,M[2]=D[2]*K,M[3]=D[3]*K,M},o.scale$2=function(M,D,K){return M[0]=D[0]*K,M[1]=D[1]*K,M[2]=D[2]*K,M},o.setCacheLimits=function(M,D){Le=M,Ue=D},o.setRTLTextPlugin=function(M,D,K){if(void 0===K&&(K=!1),zi===bs||zi===ws||zi===Ys)throw new Error("setRTLTextPlugin cannot be called multiple times.");ja=Q.resolveURL(M),zi=bs,Zs=D,zs(),K||uc()},o.sphericalToCartesian=function(M){var D=M[0],K=M[1],de=M[2];return K+=90,K*=Math.PI/180,de*=Math.PI/180,{x:D*Math.cos(K)*Math.sin(de),y:D*Math.sin(K)*Math.sin(de),z:D*Math.cos(de)}},o.sqrLen=function(M){var D=M[0],K=M[1];return D*D+K*K},o.styleSpec=tt,o.sub=function(M,D,K){return M[0]=D[0]-K[0],M[1]=D[1]-K[1],M[2]=D[2]-K[2],M},o.symbolSize=E0,o.transformMat3=function(M,D,K){var de=D[0],Ee=D[1],Be=D[2];return M[0]=de*K[0]+Ee*K[3]+Be*K[6],M[1]=de*K[1]+Ee*K[4]+Be*K[7],M[2]=de*K[2]+Ee*K[5]+Be*K[8],M},o.transformMat4=cf,o.translate=function(M,D,K){var de,Ee,Be,Ye,at,mt,Et,Lt,Wt,en,Xt,vn,bn=K[0],zn=K[1],Rn=K[2];return D===M?(M[12]=D[0]*bn+D[4]*zn+D[8]*Rn+D[12],M[13]=D[1]*bn+D[5]*zn+D[9]*Rn+D[13],M[14]=D[2]*bn+D[6]*zn+D[10]*Rn+D[14],M[15]=D[3]*bn+D[7]*zn+D[11]*Rn+D[15]):(Ee=D[1],Be=D[2],Ye=D[3],at=D[4],mt=D[5],Et=D[6],Lt=D[7],Wt=D[8],en=D[9],Xt=D[10],vn=D[11],M[0]=de=D[0],M[1]=Ee,M[2]=Be,M[3]=Ye,M[4]=at,M[5]=mt,M[6]=Et,M[7]=Lt,M[8]=Wt,M[9]=en,M[10]=Xt,M[11]=vn,M[12]=de*bn+at*zn+Wt*Rn+D[12],M[13]=Ee*bn+mt*zn+en*Rn+D[13],M[14]=Be*bn+Et*zn+Xt*Rn+D[14],M[15]=Ye*bn+Lt*zn+vn*Rn+D[15]),M},o.triggerPluginCompletionEvent=Oo,o.uniqueId=d,o.validateCustomStyleLayer=function(M){var D=[],K=M.id;return void 0===K&&D.push({message:"layers."+K+': missing required property "id"'}),void 0===M.render&&D.push({message:"layers."+K+': missing required method "render"'}),M.renderingMode&&"2d"!==M.renderingMode&&"3d"!==M.renderingMode&&D.push({message:"layers."+K+': property "renderingMode" must be either "2d" or "3d"'}),D},o.validateLight=Sl,o.validateStyle=Ws,o.values=function(M){var D=[];for(var K in M)D.push(M[K]);return D},o.vectorTile=rh,o.version=b,o.warnOnce=E,o.webpSupported=X,o.window=r,o.wrap=h}),k(0,function(o){function T(Qe){var nt=typeof Qe;if("number"===nt||"boolean"===nt||"string"===nt||null==Qe)return JSON.stringify(Qe);if(Array.isArray(Qe)){for(var We="[",et=0,gt=Qe;et<gt.length;et+=1)We+=T(gt[et])+",";return We+"]"}for(var ht=Object.keys(Qe).sort(),Ge="{",He=0;He<ht.length;He++)Ge+=JSON.stringify(ht[He])+":"+T(Qe[ht[He]])+",";return Ge+"}"}function b(Qe){for(var nt="",We=0,et=o.refProperties;We<et.length;We+=1)nt+="/"+T(Qe[et[We]]);return nt}var p=function(Qe){this.keyCache={},Qe&&this.replace(Qe)};p.prototype.replace=function(Qe){this._layerConfigs={},this._layers={},this.update(Qe,[])},p.prototype.update=function(Qe,nt){for(var We=this,et=0,gt=Qe;et<gt.length;et+=1){var ht=gt[et];this._layerConfigs[ht.id]=ht;var Ge=this._layers[ht.id]=o.createStyleLayer(ht);Ge._featureFilter=o.featureFilter(Ge.filter),this.keyCache[ht.id]&&delete this.keyCache[ht.id]}for(var He=0,ut=nt;He<ut.length;He+=1){var tt=ut[He];delete this.keyCache[tt],delete this._layerConfigs[tt],delete this._layers[tt]}this.familiesBySource={};for(var xt=0,At=function(Bt,qt){for(var an={},mn=0;mn<Bt.length;mn++){var Qt=qt&&qt[Bt[mn].id]||b(Bt[mn]);qt&&(qt[Bt[mn].id]=Qt);var sn=an[Qt];sn||(sn=an[Qt]=[]),sn.push(Bt[mn])}var Kt=[];for(var qn in an)Kt.push(an[qn]);return Kt}(o.values(this._layerConfigs),this.keyCache);xt<At.length;xt+=1){var Mt=At[xt].map(function(Bt){return We._layers[Bt.id]}),yt=Mt[0];if("none"!==yt.visibility){var Pt=yt.source||"",Ct=this.familiesBySource[Pt];Ct||(Ct=this.familiesBySource[Pt]={});var Dt=yt.sourceLayer||"_geojsonTileLayer",Ut=Ct[Dt];Ut||(Ut=Ct[Dt]=[]),Ut.push(Mt)}}};var l=function(Qe){var nt={},We=[];for(var et in Qe){var gt=Qe[et],ht=nt[et]={};for(var Ge in gt){var He=gt[+Ge];if(He&&0!==He.bitmap.width&&0!==He.bitmap.height){var ut={x:0,y:0,w:He.bitmap.width+2,h:He.bitmap.height+2};We.push(ut),ht[Ge]={rect:ut,metrics:He.metrics}}}}var tt=o.potpack(We),Mt=new o.AlphaImage({width:tt.w||1,height:tt.h||1});for(var yt in Qe){var Pt=Qe[yt];for(var Ct in Pt){var Dt=Pt[+Ct];if(Dt&&0!==Dt.bitmap.width&&0!==Dt.bitmap.height){var Ut=nt[yt][Ct].rect;o.AlphaImage.copy(Dt.bitmap,Mt,{x:0,y:0},{x:Ut.x+1,y:Ut.y+1},Dt.bitmap)}}}this.image=Mt,this.positions=nt};o.register("GlyphAtlas",l);var t=function(Qe){this.tileID=new o.OverscaledTileID(Qe.tileID.overscaledZ,Qe.tileID.wrap,Qe.tileID.canonical.z,Qe.tileID.canonical.x,Qe.tileID.canonical.y),this.uid=Qe.uid,this.zoom=Qe.zoom,this.pixelRatio=Qe.pixelRatio,this.tileSize=Qe.tileSize,this.source=Qe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Qe.showCollisionBoxes,this.collectResourceTiming=!!Qe.collectResourceTiming,this.returnDependencies=!!Qe.returnDependencies,this.promoteId=Qe.promoteId};function i(Qe,nt,We){for(var et=new o.EvaluationParameters(nt),gt=0,ht=Qe;gt<ht.length;gt+=1)ht[gt].recalculate(et,We)}function r(Qe,nt){var We=o.getArrayBuffer(Qe.request,function(et,gt,ht,Ge){et?nt(et):gt&&nt(null,{vectorTile:new o.vectorTile.VectorTile(new o.pbf(gt)),rawData:gt,cacheControl:ht,expires:Ge})});return function(){We.cancel(),nt()}}t.prototype.parse=function(Qe,nt,We,et,gt){var ht=this;this.status="parsing",this.data=Qe,this.collisionBoxArray=new o.CollisionBoxArray;var Ge=new o.DictionaryCoder(Object.keys(Qe.layers).sort()),He=new o.FeatureIndex(this.tileID,this.promoteId);He.bucketLayerIDs=[];var ut,tt,xt,At,Mt={},yt={featureIndex:He,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:We},Pt=nt.familiesBySource[this.source];for(var Ct in Pt){var Dt=Qe.layers[Ct];if(Dt){1===Dt.version&&o.warnOnce('Vector tile source "'+this.source+'" layer "'+Ct+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Ut=Ge.encode(Ct),Bt=[],qt=0;qt<Dt.length;qt++){var an=Dt.feature(qt),mn=He.getId(an,Ct);Bt.push({feature:an,id:mn,index:qt,sourceLayerIndex:Ut})}for(var Qt=0,sn=Pt[Ct];Qt<sn.length;Qt+=1){var Kt=sn[Qt],qn=Kt[0];qn.minzoom&&this.zoom<Math.floor(qn.minzoom)||qn.maxzoom&&this.zoom>=qn.maxzoom||"none"!==qn.visibility&&(i(Kt,this.zoom,We),(Mt[qn.id]=qn.createBucket({index:He.bucketLayerIDs.length,layers:Kt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ut,sourceID:this.source})).populate(Bt,yt,this.tileID.canonical),He.bucketLayerIDs.push(Kt.map(function(pn){return pn.id})))}}}var Fn=o.mapObject(yt.glyphDependencies,function(pn){return Object.keys(pn).map(Number)});Object.keys(Fn).length?et.send("getGlyphs",{uid:this.uid,stacks:Fn},function(pn,An){ut||(ut=pn,tt=An,wn.call(ht))}):tt={};var Sn=Object.keys(yt.iconDependencies);Sn.length?et.send("getImages",{icons:Sn,source:this.source,tileID:this.tileID,type:"icons"},function(pn,An){ut||(ut=pn,xt=An,wn.call(ht))}):xt={};var hn=Object.keys(yt.patternDependencies);function wn(){if(ut)return gt(ut);if(tt&&xt&&At){var pn=new l(tt),An=new o.ImageAtlas(xt,At);for(var On in Mt){var Dn=Mt[On];Dn instanceof o.SymbolBucket?(i(Dn.layers,this.zoom,We),o.performSymbolLayout(Dn,tt,pn.positions,xt,An.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Dn.hasPattern&&(Dn instanceof o.LineBucket||Dn instanceof o.FillBucket||Dn instanceof o.FillExtrusionBucket)&&(i(Dn.layers,this.zoom,We),Dn.addFeatures(yt,this.tileID.canonical,An.patternPositions))}this.status="done",gt(null,{buckets:o.values(Mt).filter(function(Vn){return!Vn.isEmpty()}),featureIndex:He,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:pn.image,imageAtlas:An,glyphMap:this.returnDependencies?tt:null,iconMap:this.returnDependencies?xt:null,glyphPositions:this.returnDependencies?pn.positions:null})}}hn.length?et.send("getImages",{icons:hn,source:this.source,tileID:this.tileID,type:"patterns"},function(pn,An){ut||(ut=pn,At=An,wn.call(ht))}):At={},wn.call(this)};var n=function(Qe,nt,We,et){this.actor=Qe,this.layerIndex=nt,this.availableImages=We,this.loadVectorData=et||r,this.loading={},this.loaded={}};n.prototype.loadTile=function(Qe,nt){var We=this,et=Qe.uid;this.loading||(this.loading={});var gt=!!(Qe&&Qe.request&&Qe.request.collectResourceTiming)&&new o.RequestPerformance(Qe.request),ht=this.loading[et]=new t(Qe);ht.abort=this.loadVectorData(Qe,function(Ge,He){if(delete We.loading[et],Ge||!He)return ht.status="done",We.loaded[et]=ht,nt(Ge);var ut=He.rawData,tt={};He.expires&&(tt.expires=He.expires),He.cacheControl&&(tt.cacheControl=He.cacheControl);var xt={};if(gt){var At=gt.finish();At&&(xt.resourceTiming=JSON.parse(JSON.stringify(At)))}ht.vectorTile=He.vectorTile,ht.parse(He.vectorTile,We.layerIndex,We.availableImages,We.actor,function(Mt,yt){if(Mt||!yt)return nt(Mt);nt(null,o.extend({rawTileData:ut.slice(0)},yt,tt,xt))}),We.loaded=We.loaded||{},We.loaded[et]=ht})},n.prototype.reloadTile=function(Qe,nt){var We=this,et=this.loaded,gt=Qe.uid,ht=this;if(et&&et[gt]){var Ge=et[gt];Ge.showCollisionBoxes=Qe.showCollisionBoxes;var He=function(ut,tt){var xt=Ge.reloadCallback;xt&&(delete Ge.reloadCallback,Ge.parse(Ge.vectorTile,ht.layerIndex,We.availableImages,ht.actor,xt)),nt(ut,tt)};"parsing"===Ge.status?Ge.reloadCallback=He:"done"===Ge.status&&(Ge.vectorTile?Ge.parse(Ge.vectorTile,this.layerIndex,this.availableImages,this.actor,He):He())}},n.prototype.abortTile=function(Qe,nt){var We=this.loading,et=Qe.uid;We&&We[et]&&We[et].abort&&(We[et].abort(),delete We[et]),nt()},n.prototype.removeTile=function(Qe,nt){var We=this.loaded,et=Qe.uid;We&&We[et]&&delete We[et],nt()};var a=o.window.ImageBitmap,s=function(){this.loaded={}};s.prototype.loadTile=function(Qe,nt){var We=Qe.uid,et=Qe.encoding,gt=Qe.rawImageData,ht=a&&gt instanceof a?this.getImageData(gt):gt,Ge=new o.DEMData(We,ht,et);this.loaded=this.loaded||{},this.loaded[We]=Ge,nt(null,Ge)},s.prototype.getImageData=function(Qe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Qe.width,Qe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Qe.width,this.offscreenCanvas.height=Qe.height,this.offscreenCanvasContext.drawImage(Qe,0,0,Qe.width,Qe.height);var nt=this.offscreenCanvasContext.getImageData(-1,-1,Qe.width+2,Qe.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new o.RGBAImage({width:nt.width,height:nt.height},nt.data)},s.prototype.removeTile=function(Qe){var nt=this.loaded,We=Qe.uid;nt&&nt[We]&&delete nt[We]};var c=function Qe(nt,We){var et,gt=nt&&nt.type;if("FeatureCollection"===gt)for(et=0;et<nt.features.length;et++)Qe(nt.features[et],We);else if("GeometryCollection"===gt)for(et=0;et<nt.geometries.length;et++)Qe(nt.geometries[et],We);else if("Feature"===gt)Qe(nt.geometry,We);else if("Polygon"===gt)h(nt.coordinates,We);else if("MultiPolygon"===gt)for(et=0;et<nt.coordinates.length;et++)h(nt.coordinates[et],We);return nt};function h(Qe,nt){if(0!==Qe.length){u(Qe[0],nt);for(var We=1;We<Qe.length;We++)u(Qe[We],!nt)}}function u(Qe,nt){for(var We=0,et=0,gt=Qe.length,ht=gt-1;et<gt;ht=et++)We+=(Qe[et][0]-Qe[ht][0])*(Qe[ht][1]+Qe[et][1]);We>=0!=!!nt&&Qe.reverse()}var y=o.vectorTile.VectorTileFeature.prototype.toGeoJSON,d=function(Qe){this._feature=Qe,this.extent=o.EXTENT,this.type=Qe.type,this.properties=Qe.tags,"id"in Qe&&!isNaN(Qe.id)&&(this.id=parseInt(Qe.id,10))};d.prototype.loadGeometry=function(){if(1===this._feature.type){for(var Qe=[],nt=0,We=this._feature.geometry;nt<We.length;nt+=1){var et=We[nt];Qe.push([new o.Point$1(et[0],et[1])])}return Qe}for(var gt=[],ht=0,Ge=this._feature.geometry;ht<Ge.length;ht+=1){for(var He=[],ut=0,tt=Ge[ht];ut<tt.length;ut+=1){var xt=tt[ut];He.push(new o.Point$1(xt[0],xt[1]))}gt.push(He)}return gt},d.prototype.toGeoJSON=function(Qe,nt,We){return y.call(this,Qe,nt,We)};var m=function(Qe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=Qe.length,this._features=Qe};m.prototype.feature=function(Qe){return new d(this._features[Qe])};var g=o.vectorTile.VectorTileFeature,x=v;function v(Qe,nt){this.options=nt||{},this.features=Qe,this.length=Qe.length}function _(Qe,nt){this.id="number"==typeof Qe.id?Qe.id:void 0,this.type=Qe.type,this.rawGeometry=1===Qe.type?[Qe.geometry]:Qe.geometry,this.properties=Qe.tags,this.extent=nt||4096}v.prototype.feature=function(Qe){return new _(this.features[Qe],this.options.extent)},_.prototype.loadGeometry=function(){var Qe=this.rawGeometry;this.geometry=[];for(var nt=0;nt<Qe.length;nt++){for(var We=Qe[nt],et=[],gt=0;gt<We.length;gt++)et.push(new o.Point$1(We[gt][0],We[gt][1]));this.geometry.push(et)}return this.geometry},_.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Qe=this.geometry,nt=1/0,We=-1/0,et=1/0,gt=-1/0,ht=0;ht<Qe.length;ht++)for(var Ge=Qe[ht],He=0;He<Ge.length;He++){var ut=Ge[He];nt=Math.min(nt,ut.x),We=Math.max(We,ut.x),et=Math.min(et,ut.y),gt=Math.max(gt,ut.y)}return[nt,et,We,gt]},_.prototype.toGeoJSON=g.prototype.toGeoJSON;var f=P,E=x;function P(Qe){var nt=new o.pbf;return function(We,et){for(var gt in We.layers)et.writeMessage(3,L,We.layers[gt])}(Qe,nt),nt.finish()}function L(Qe,nt){var We;nt.writeVarintField(15,Qe.version||1),nt.writeStringField(1,Qe.name||""),nt.writeVarintField(5,Qe.extent||4096);var et={keys:[],values:[],keycache:{},valuecache:{}};for(We=0;We<Qe.length;We++)et.feature=Qe.feature(We),nt.writeMessage(2,O,et);var gt=et.keys;for(We=0;We<gt.length;We++)nt.writeStringField(3,gt[We]);var ht=et.values;for(We=0;We<ht.length;We++)nt.writeMessage(4,Z,ht[We])}function O(Qe,nt){var We=Qe.feature;void 0!==We.id&&nt.writeVarintField(1,We.id),nt.writeMessage(2,z,Qe),nt.writeVarintField(3,We.type),nt.writeMessage(4,U,We)}function z(Qe,nt){var We=Qe.feature,et=Qe.keys,gt=Qe.values,ht=Qe.keycache,Ge=Qe.valuecache;for(var He in We.properties){var ut=ht[He];void 0===ut&&(et.push(He),ht[He]=ut=et.length-1),nt.writeVarint(ut);var tt=We.properties[He],xt=typeof tt;"string"!==xt&&"boolean"!==xt&&"number"!==xt&&(tt=JSON.stringify(tt));var At=xt+":"+tt,Mt=Ge[At];void 0===Mt&&(gt.push(tt),Ge[At]=Mt=gt.length-1),nt.writeVarint(Mt)}}function V(Qe,nt){return(nt<<3)+(7&Qe)}function R(Qe){return Qe<<1^Qe>>31}function U(Qe,nt){for(var We=Qe.loadGeometry(),et=Qe.type,gt=0,ht=0,Ge=We.length,He=0;He<Ge;He++){var ut=We[He],tt=1;1===et&&(tt=ut.length),nt.writeVarint(V(1,tt));for(var xt=3===et?ut.length-1:ut.length,At=0;At<xt;At++){1===At&&1!==et&&nt.writeVarint(V(2,xt-1));var Mt=ut[At].x-gt,yt=ut[At].y-ht;nt.writeVarint(R(Mt)),nt.writeVarint(R(yt)),gt+=Mt,ht+=yt}3===et&&nt.writeVarint(V(7,1))}}function Z(Qe,nt){var We=typeof Qe;"string"===We?nt.writeStringField(1,Qe):"boolean"===We?nt.writeBooleanField(7,Qe):"number"===We&&(Qe%1!=0?nt.writeDoubleField(3,Qe):Qe<0?nt.writeSVarintField(6,Qe):nt.writeVarintField(5,Qe))}function N(Qe,nt,We,et,gt,ht){if(!(gt-et<=We)){var Ge=et+gt>>1;G(Qe,nt,Ge,et,gt,ht%2),N(Qe,nt,We,et,Ge-1,ht+1),N(Qe,nt,We,Ge+1,gt,ht+1)}}function G(Qe,nt,We,et,gt,ht){for(;gt>et;){if(gt-et>600){var Ge=gt-et+1,He=We-et+1,ut=Math.log(Ge),tt=.5*Math.exp(2*ut/3),xt=.5*Math.sqrt(ut*tt*(Ge-tt)/Ge)*(He-Ge/2<0?-1:1);G(Qe,nt,We,Math.max(et,Math.floor(We-He*tt/Ge+xt)),Math.min(gt,Math.floor(We+(Ge-He)*tt/Ge+xt)),ht)}var At=nt[2*We+ht],Mt=et,yt=gt;for(W(Qe,nt,et,We),nt[2*gt+ht]>At&&W(Qe,nt,et,gt);Mt<yt;){for(W(Qe,nt,Mt,yt),Mt++,yt--;nt[2*Mt+ht]<At;)Mt++;for(;nt[2*yt+ht]>At;)yt--}nt[2*et+ht]===At?W(Qe,nt,et,yt):W(Qe,nt,++yt,gt),yt<=We&&(et=yt+1),We<=yt&&(gt=yt-1)}}function W(Qe,nt,We,et){ae(Qe,We,et),ae(nt,2*We,2*et),ae(nt,2*We+1,2*et+1)}function ae(Qe,nt,We){var et=Qe[nt];Qe[nt]=Qe[We],Qe[We]=et}function re(Qe,nt,We,et){var gt=Qe-We,ht=nt-et;return gt*gt+ht*ht}f.fromVectorTileJs=P,f.fromGeojsonVt=function(Qe,nt){nt=nt||{};var We={};for(var et in Qe)We[et]=new x(Qe[et].features,nt),We[et].name=et,We[et].version=nt.version,We[et].extent=nt.extent;return P({layers:We})},f.GeoJSONWrapper=E;var ne=function(Qe){return Qe[0]},Q=function(Qe){return Qe[1]},$=function(Qe,nt,We,et,gt){void 0===nt&&(nt=ne),void 0===We&&(We=Q),void 0===et&&(et=64),void 0===gt&&(gt=Float64Array),this.nodeSize=et,this.points=Qe;for(var ht=Qe.length<65536?Uint16Array:Uint32Array,Ge=this.ids=new ht(Qe.length),He=this.coords=new gt(2*Qe.length),ut=0;ut<Qe.length;ut++)Ge[ut]=ut,He[2*ut]=nt(Qe[ut]),He[2*ut+1]=We(Qe[ut]);N(Ge,He,et,0,Ge.length-1,0)};$.prototype.range=function(Qe,nt,We,et){return function(gt,ht,Ge,He,ut,tt,xt){for(var At,Mt,yt=[0,gt.length-1,0],Pt=[];yt.length;){var Ct=yt.pop(),Dt=yt.pop(),Ut=yt.pop();if(Dt-Ut<=xt)for(var Bt=Ut;Bt<=Dt;Bt++)Mt=ht[2*Bt+1],(At=ht[2*Bt])>=Ge&&At<=ut&&Mt>=He&&Mt<=tt&&Pt.push(gt[Bt]);else{var qt=Math.floor((Ut+Dt)/2);Mt=ht[2*qt+1],(At=ht[2*qt])>=Ge&&At<=ut&&Mt>=He&&Mt<=tt&&Pt.push(gt[qt]);var an=(Ct+1)%2;(0===Ct?Ge<=At:He<=Mt)&&(yt.push(Ut),yt.push(qt-1),yt.push(an)),(0===Ct?ut>=At:tt>=Mt)&&(yt.push(qt+1),yt.push(Dt),yt.push(an))}}return Pt}(this.ids,this.coords,Qe,nt,We,et,this.nodeSize)},$.prototype.within=function(Qe,nt,We){return function(et,gt,ht,Ge,He,ut){for(var tt=[0,et.length-1,0],xt=[],At=He*He;tt.length;){var Mt=tt.pop(),yt=tt.pop(),Pt=tt.pop();if(yt-Pt<=ut)for(var Ct=Pt;Ct<=yt;Ct++)re(gt[2*Ct],gt[2*Ct+1],ht,Ge)<=At&&xt.push(et[Ct]);else{var Dt=Math.floor((Pt+yt)/2),Ut=gt[2*Dt],Bt=gt[2*Dt+1];re(Ut,Bt,ht,Ge)<=At&&xt.push(et[Dt]);var qt=(Mt+1)%2;(0===Mt?ht-He<=Ut:Ge-He<=Bt)&&(tt.push(Pt),tt.push(Dt-1),tt.push(qt)),(0===Mt?ht+He>=Ut:Ge+He>=Bt)&&(tt.push(Dt+1),tt.push(yt),tt.push(qt))}}return xt}(this.ids,this.coords,Qe,nt,We,this.nodeSize)};var X={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Qe){return Qe}},oe=function(Qe){this.options=ye(Object.create(X),Qe),this.trees=new Array(this.options.maxZoom+1)};function fe(Qe,nt,We,et,gt){return{x:Qe,y:nt,zoom:1/0,id:We,parentId:-1,numPoints:et,properties:gt}}function ue(Qe,nt){var We=Qe.geometry.coordinates,gt=We[1];return{x:Te(We[0]),y:xe(gt),zoom:1/0,index:nt,parentId:-1}}function ge(Qe){return{type:"Feature",id:Qe.id,properties:we(Qe),geometry:{type:"Point",coordinates:[(et=Qe.x,360*(et-.5)),(nt=Qe.y,We=(180-360*nt)*Math.PI/180,360*Math.atan(Math.exp(We))/Math.PI-90)]}};var nt,We,et}function we(Qe){var nt=Qe.numPoints,We=nt>=1e4?Math.round(nt/1e3)+"k":nt>=1e3?Math.round(nt/100)/10+"k":nt;return ye(ye({},Qe.properties),{cluster:!0,cluster_id:Qe.id,point_count:nt,point_count_abbreviated:We})}function Te(Qe){return Qe/360+.5}function xe(Qe){var nt=Math.sin(Qe*Math.PI/180),We=.5-.25*Math.log((1+nt)/(1-nt))/Math.PI;return We<0?0:We>1?1:We}function ye(Qe,nt){for(var We in nt)Qe[We]=nt[We];return Qe}function _e(Qe){return Qe.x}function Ie(Qe){return Qe.y}function De(Qe,nt,We,et){for(var gt,ht=et,Ge=We-nt>>1,He=We-nt,ut=Qe[nt],tt=Qe[nt+1],xt=Qe[We],At=Qe[We+1],Mt=nt+3;Mt<We;Mt+=3){var yt=be(Qe[Mt],Qe[Mt+1],ut,tt,xt,At);if(yt>ht)gt=Mt,ht=yt;else if(yt===ht){var Pt=Math.abs(Mt-Ge);Pt<He&&(gt=Mt,He=Pt)}}ht>et&&(gt-nt>3&&De(Qe,nt,gt,et),Qe[gt+2]=ht,We-gt>3&&De(Qe,gt,We,et))}function be(Qe,nt,We,et,gt,ht){var Ge=gt-We,He=ht-et;if(0!==Ge||0!==He){var ut=((Qe-We)*Ge+(nt-et)*He)/(Ge*Ge+He*He);ut>1?(We=gt,et=ht):ut>0&&(We+=Ge*ut,et+=He*ut)}return(Ge=Qe-We)*Ge+(He=nt-et)*He}function he(Qe,nt,We,et){var gt={id:void 0===Qe?null:Qe,type:nt,geometry:We,tags:et,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ht){var Ge=ht.geometry,He=ht.type;if("Point"===He||"MultiPoint"===He||"LineString"===He)ce(ht,Ge);else if("Polygon"===He||"MultiLineString"===He)for(var ut=0;ut<Ge.length;ut++)ce(ht,Ge[ut]);else if("MultiPolygon"===He)for(ut=0;ut<Ge.length;ut++)for(var tt=0;tt<Ge[ut].length;tt++)ce(ht,Ge[ut][tt])}(gt),gt}function ce(Qe,nt){for(var We=0;We<nt.length;We+=3)Qe.minX=Math.min(Qe.minX,nt[We]),Qe.minY=Math.min(Qe.minY,nt[We+1]),Qe.maxX=Math.max(Qe.maxX,nt[We]),Qe.maxY=Math.max(Qe.maxY,nt[We+1])}function me(Qe,nt,We,et){if(nt.geometry){var gt=nt.geometry.coordinates,ht=nt.geometry.type,Ge=Math.pow(We.tolerance/((1<<We.maxZoom)*We.extent),2),He=[],ut=nt.id;if(We.promoteId?ut=nt.properties[We.promoteId]:We.generateId&&(ut=et||0),"Point"===ht)Pe(gt,He);else if("MultiPoint"===ht)for(var tt=0;tt<gt.length;tt++)Pe(gt[tt],He);else if("LineString"===ht)Ae(gt,He,Ge,!1);else if("MultiLineString"===ht){if(We.lineMetrics){for(tt=0;tt<gt.length;tt++)Ae(gt[tt],He=[],Ge,!1),Qe.push(he(ut,"LineString",He,nt.properties));return}Ce(gt,He,Ge,!1)}else if("Polygon"===ht)Ce(gt,He,Ge,!0);else{if("MultiPolygon"!==ht){if("GeometryCollection"===ht){for(tt=0;tt<nt.geometry.geometries.length;tt++)me(Qe,{id:ut,geometry:nt.geometry.geometries[tt],properties:nt.properties},We,et);return}throw new Error("Input data is not a valid GeoJSON object.")}for(tt=0;tt<gt.length;tt++){var xt=[];Ce(gt[tt],xt,Ge,!0),He.push(xt)}}Qe.push(he(ut,ht,He,nt.properties))}}function Pe(Qe,nt){nt.push(Oe(Qe[0])),nt.push(Ne(Qe[1])),nt.push(0)}function Ae(Qe,nt,We,et){for(var gt,ht,Ge=0,He=0;He<Qe.length;He++){var ut=Oe(Qe[He][0]),tt=Ne(Qe[He][1]);nt.push(ut),nt.push(tt),nt.push(0),He>0&&(Ge+=et?(gt*tt-ut*ht)/2:Math.sqrt(Math.pow(ut-gt,2)+Math.pow(tt-ht,2))),gt=ut,ht=tt}var xt=nt.length-3;nt[2]=1,De(nt,0,xt,We),nt[xt+2]=1,nt.size=Math.abs(Ge),nt.start=0,nt.end=nt.size}function Ce(Qe,nt,We,et){for(var gt=0;gt<Qe.length;gt++){var ht=[];Ae(Qe[gt],ht,We,et),nt.push(ht)}}function Oe(Qe){return Qe/360+.5}function Ne(Qe){var nt=Math.sin(Qe*Math.PI/180),We=.5-.25*Math.log((1+nt)/(1-nt))/Math.PI;return We<0?0:We>1?1:We}function je(Qe,nt,We,et,gt,ht,Ge,He){if(et/=nt,ht>=(We/=nt)&&Ge<et)return Qe;if(Ge<We||ht>=et)return null;for(var ut=[],tt=0;tt<Qe.length;tt++){var xt=Qe[tt],At=xt.geometry,Mt=xt.type,yt=0===gt?xt.minX:xt.minY,Pt=0===gt?xt.maxX:xt.maxY;if(yt>=We&&Pt<et)ut.push(xt);else if(!(Pt<We||yt>=et)){var Ct=[];if("Point"===Mt||"MultiPoint"===Mt)ve(At,Ct,We,et,gt);else if("LineString"===Mt)Me(At,Ct,We,et,gt,!1,He.lineMetrics);else if("MultiLineString"===Mt)Ue(At,Ct,We,et,gt,!1);else if("Polygon"===Mt)Ue(At,Ct,We,et,gt,!0);else if("MultiPolygon"===Mt)for(var Dt=0;Dt<At.length;Dt++){var Ut=[];Ue(At[Dt],Ut,We,et,gt,!0),Ut.length&&Ct.push(Ut)}if(Ct.length){if(He.lineMetrics&&"LineString"===Mt){for(Dt=0;Dt<Ct.length;Dt++)ut.push(he(xt.id,Mt,Ct[Dt],xt.tags));continue}"LineString"!==Mt&&"MultiLineString"!==Mt||(1===Ct.length?(Mt="LineString",Ct=Ct[0]):Mt="MultiLineString"),"Point"!==Mt&&"MultiPoint"!==Mt||(Mt=3===Ct.length?"Point":"MultiPoint"),ut.push(he(xt.id,Mt,Ct,xt.tags))}}}return ut.length?ut:null}function ve(Qe,nt,We,et,gt){for(var ht=0;ht<Qe.length;ht+=3){var Ge=Qe[ht+gt];Ge>=We&&Ge<=et&&(nt.push(Qe[ht]),nt.push(Qe[ht+1]),nt.push(Qe[ht+2]))}}function Me(Qe,nt,We,et,gt,ht,Ge){for(var He,ut,tt=Le(Qe),xt=0===gt?qe:Ke,At=Qe.start,Mt=0;Mt<Qe.length-3;Mt+=3){var yt=Qe[Mt],Pt=Qe[Mt+1],Ct=Qe[Mt+2],Dt=Qe[Mt+3],Ut=Qe[Mt+4],Bt=0===gt?yt:Pt,qt=0===gt?Dt:Ut,an=!1;Ge&&(He=Math.sqrt(Math.pow(yt-Dt,2)+Math.pow(Pt-Ut,2))),Bt<We?qt>We&&(ut=xt(tt,yt,Pt,Dt,Ut,We),Ge&&(tt.start=At+He*ut)):Bt>et?qt<et&&(ut=xt(tt,yt,Pt,Dt,Ut,et),Ge&&(tt.start=At+He*ut)):ze(tt,yt,Pt,Ct),qt<We&&Bt>=We&&(ut=xt(tt,yt,Pt,Dt,Ut,We),an=!0),qt>et&&Bt<=et&&(ut=xt(tt,yt,Pt,Dt,Ut,et),an=!0),!ht&&an&&(Ge&&(tt.end=At+He*ut),nt.push(tt),tt=Le(Qe)),Ge&&(At+=He)}var mn=Qe.length-3;yt=Qe[mn],Pt=Qe[mn+1],Ct=Qe[mn+2],(Bt=0===gt?yt:Pt)>=We&&Bt<=et&&ze(tt,yt,Pt,Ct),mn=tt.length-3,ht&&mn>=3&&(tt[mn]!==tt[0]||tt[mn+1]!==tt[1])&&ze(tt,tt[0],tt[1],tt[2]),tt.length&&nt.push(tt)}function Le(Qe){var nt=[];return nt.size=Qe.size,nt.start=Qe.start,nt.end=Qe.end,nt}function Ue(Qe,nt,We,et,gt,ht){for(var Ge=0;Ge<Qe.length;Ge++)Me(Qe[Ge],nt,We,et,gt,ht,!1)}function ze(Qe,nt,We,et){Qe.push(nt),Qe.push(We),Qe.push(et)}function qe(Qe,nt,We,et,gt,ht){var Ge=(ht-nt)/(et-nt);return Qe.push(ht),Qe.push(We+(gt-We)*Ge),Qe.push(1),Ge}function Ke(Qe,nt,We,et,gt,ht){var Ge=(ht-We)/(gt-We);return Qe.push(nt+(et-nt)*Ge),Qe.push(ht),Qe.push(1),Ge}function it(Qe,nt){for(var We=[],et=0;et<Qe.length;et++){var gt,ht=Qe[et],Ge=ht.type;if("Point"===Ge||"MultiPoint"===Ge||"LineString"===Ge)gt=ft(ht.geometry,nt);else if("MultiLineString"===Ge||"Polygon"===Ge){gt=[];for(var He=0;He<ht.geometry.length;He++)gt.push(ft(ht.geometry[He],nt))}else if("MultiPolygon"===Ge)for(gt=[],He=0;He<ht.geometry.length;He++){for(var ut=[],tt=0;tt<ht.geometry[He].length;tt++)ut.push(ft(ht.geometry[He][tt],nt));gt.push(ut)}We.push(he(ht.id,Ge,gt,ht.tags))}return We}function ft(Qe,nt){var We=[];We.size=Qe.size,void 0!==Qe.start&&(We.start=Qe.start,We.end=Qe.end);for(var et=0;et<Qe.length;et+=3)We.push(Qe[et]+nt,Qe[et+1],Qe[et+2]);return We}function dt(Qe,nt){if(Qe.transformed)return Qe;var We,et,gt,ht=1<<Qe.z,Ge=Qe.x,He=Qe.y;for(We=0;We<Qe.features.length;We++){var ut=Qe.features[We],tt=ut.geometry,xt=ut.type;if(ut.geometry=[],1===xt)for(et=0;et<tt.length;et+=2)ut.geometry.push(kt(tt[et],tt[et+1],nt,ht,Ge,He));else for(et=0;et<tt.length;et++){var At=[];for(gt=0;gt<tt[et].length;gt+=2)At.push(kt(tt[et][gt],tt[et][gt+1],nt,ht,Ge,He));ut.geometry.push(At)}}return Qe.transformed=!0,Qe}function kt(Qe,nt,We,et,gt,ht){return[Math.round(We*(Qe*et-gt)),Math.round(We*(nt*et-ht))]}function St(Qe,nt,We,et,gt){for(var ht=nt===gt.maxZoom?0:gt.tolerance/((1<<nt)*gt.extent),Ge={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:We,y:et,z:nt,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},He=0;He<Qe.length;He++){Ge.numFeatures++,Tt(Ge,Qe[He],ht,gt);var ut=Qe[He].minX,tt=Qe[He].minY,xt=Qe[He].maxX,At=Qe[He].maxY;ut<Ge.minX&&(Ge.minX=ut),tt<Ge.minY&&(Ge.minY=tt),xt>Ge.maxX&&(Ge.maxX=xt),At>Ge.maxY&&(Ge.maxY=At)}return Ge}function Tt(Qe,nt,We,et){var gt=nt.geometry,ht=nt.type,Ge=[];if("Point"===ht||"MultiPoint"===ht)for(var He=0;He<gt.length;He+=3)Ge.push(gt[He]),Ge.push(gt[He+1]),Qe.numPoints++,Qe.numSimplified++;else if("LineString"===ht)lt(Ge,gt,Qe,We,!1,!1);else if("MultiLineString"===ht||"Polygon"===ht)for(He=0;He<gt.length;He++)lt(Ge,gt[He],Qe,We,"Polygon"===ht,0===He);else if("MultiPolygon"===ht)for(var ut=0;ut<gt.length;ut++){var tt=gt[ut];for(He=0;He<tt.length;He++)lt(Ge,tt[He],Qe,We,!0,0===He)}if(Ge.length){var xt=nt.tags||null;if("LineString"===ht&&et.lineMetrics){for(var At in xt={},nt.tags)xt[At]=nt.tags[At];xt.mapbox_clip_start=gt.start/gt.size,xt.mapbox_clip_end=gt.end/gt.size}var Mt={geometry:Ge,type:"Polygon"===ht||"MultiPolygon"===ht?3:"LineString"===ht||"MultiLineString"===ht?2:1,tags:xt};null!==nt.id&&(Mt.id=nt.id),Qe.features.push(Mt)}}function lt(Qe,nt,We,et,gt,ht){var Ge=et*et;if(et>0&&nt.size<(gt?Ge:et))We.numPoints+=nt.length/3;else{for(var He=[],ut=0;ut<nt.length;ut+=3)(0===et||nt[ut+2]>Ge)&&(We.numSimplified++,He.push(nt[ut]),He.push(nt[ut+1])),We.numPoints++;gt&&function(tt,xt){for(var At=0,Mt=0,yt=tt.length,Pt=yt-2;Mt<yt;Pt=Mt,Mt+=2)At+=(tt[Mt]-tt[Pt])*(tt[Mt+1]+tt[Pt+1]);if(At>0===xt)for(Mt=0,yt=tt.length;Mt<yt/2;Mt+=2){var Ct=tt[Mt],Dt=tt[Mt+1];tt[Mt]=tt[yt-2-Mt],tt[Mt+1]=tt[yt-1-Mt],tt[yt-2-Mt]=Ct,tt[yt-1-Mt]=Dt}}(He,ht),Qe.push(He)}}function ot(Qe,nt){var We=(nt=this.options=function(gt,ht){for(var Ge in ht)gt[Ge]=ht[Ge];return gt}(Object.create(this.options),nt)).debug;if(We&&console.time("preprocess data"),nt.maxZoom<0||nt.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(nt.promoteId&&nt.generateId)throw new Error("promoteId and generateId cannot be used together.");var gt,ht,Ge,He,ut,tt,et=function(gt,ht){var Ge=[];if("FeatureCollection"===gt.type)for(var He=0;He<gt.features.length;He++)me(Ge,gt.features[He],ht,He);else me(Ge,"Feature"===gt.type?gt:{geometry:gt},ht);return Ge}(Qe,nt);this.tiles={},this.tileCoords=[],We&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",nt.indexMaxZoom,nt.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(gt=et,ht=nt,Ge=ht.buffer/ht.extent,He=gt,ut=je(gt,1,-1-Ge,Ge,0,-1,2,ht),tt=je(gt,1,1-Ge,2+Ge,0,-1,2,ht),(ut||tt)&&(He=je(gt,1,-Ge,1+Ge,0,-1,2,ht)||[],ut&&(He=it(ut,1).concat(He)),tt&&(He=He.concat(it(tt,-1)))),et=He).length&&this.splitTile(et,0,0,0),We&&(et.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Rt(Qe,nt,We){return 32*((1<<Qe)*We+nt)+Qe}function Vt(Qe,nt){var We=Qe.tileID.canonical;if(!this._geoJSONIndex)return nt(null,null);var et=this._geoJSONIndex.getTile(We.z,We.x,We.y);if(!et)return nt(null,null);var gt=new m(et.features),ht=f(gt);0===ht.byteOffset&&ht.byteLength===ht.buffer.byteLength||(ht=new Uint8Array(ht)),nt(null,{vectorTile:gt,rawData:ht.buffer})}oe.prototype.load=function(Qe){var nt=this.options,We=nt.log,et=nt.minZoom,gt=nt.maxZoom,ht=nt.nodeSize;We&&console.time("total time");var Ge="prepare "+Qe.length+" points";We&&console.time(Ge),this.points=Qe;for(var He=[],ut=0;ut<Qe.length;ut++)Qe[ut].geometry&&He.push(ue(Qe[ut],ut));this.trees[gt+1]=new $(He,_e,Ie,ht,Float32Array),We&&console.timeEnd(Ge);for(var tt=gt;tt>=et;tt--){var xt=+Date.now();He=this._cluster(He,tt),this.trees[tt]=new $(He,_e,Ie,ht,Float32Array),We&&console.log("z%d: %d clusters in %dms",tt,He.length,+Date.now()-xt)}return We&&console.timeEnd("total time"),this},oe.prototype.getClusters=function(Qe,nt){var We=((Qe[0]+180)%360+360)%360-180,et=Math.max(-90,Math.min(90,Qe[1])),gt=180===Qe[2]?180:((Qe[2]+180)%360+360)%360-180,ht=Math.max(-90,Math.min(90,Qe[3]));if(Qe[2]-Qe[0]>=360)We=-180,gt=180;else if(We>gt){var Ge=this.getClusters([We,et,180,ht],nt),He=this.getClusters([-180,et,gt,ht],nt);return Ge.concat(He)}for(var ut=this.trees[this._limitZoom(nt)],tt=[],xt=0,At=ut.range(Te(We),xe(ht),Te(gt),xe(et));xt<At.length;xt+=1){var yt=ut.points[At[xt]];tt.push(yt.numPoints?ge(yt):this.points[yt.index])}return tt},oe.prototype.getChildren=function(Qe){var nt=this._getOriginId(Qe),We=this._getOriginZoom(Qe),et="No cluster with the specified id.",gt=this.trees[We];if(!gt)throw new Error(et);var ht=gt.points[nt];if(!ht)throw new Error(et);for(var Ge=this.options.radius/(this.options.extent*Math.pow(2,We-1)),He=[],ut=0,tt=gt.within(ht.x,ht.y,Ge);ut<tt.length;ut+=1){var At=gt.points[tt[ut]];At.parentId===Qe&&He.push(At.numPoints?ge(At):this.points[At.index])}if(0===He.length)throw new Error(et);return He},oe.prototype.getLeaves=function(Qe,nt,We){var et=[];return this._appendLeaves(et,Qe,nt=nt||10,We=We||0,0),et},oe.prototype.getTile=function(Qe,nt,We){var et=this.trees[this._limitZoom(Qe)],gt=Math.pow(2,Qe),ht=this.options,He=ht.radius/ht.extent,ut=(We-He)/gt,tt=(We+1+He)/gt,xt={features:[]};return this._addTileFeatures(et.range((nt-He)/gt,ut,(nt+1+He)/gt,tt),et.points,nt,We,gt,xt),0===nt&&this._addTileFeatures(et.range(1-He/gt,ut,1,tt),et.points,gt,We,gt,xt),nt===gt-1&&this._addTileFeatures(et.range(0,ut,He/gt,tt),et.points,-1,We,gt,xt),xt.features.length?xt:null},oe.prototype.getClusterExpansionZoom=function(Qe){for(var nt=this._getOriginZoom(Qe)-1;nt<=this.options.maxZoom;){var We=this.getChildren(Qe);if(nt++,1!==We.length)break;Qe=We[0].properties.cluster_id}return nt},oe.prototype._appendLeaves=function(Qe,nt,We,et,gt){for(var ht=0,Ge=this.getChildren(nt);ht<Ge.length;ht+=1){var He=Ge[ht],ut=He.properties;if(ut&&ut.cluster?gt+ut.point_count<=et?gt+=ut.point_count:gt=this._appendLeaves(Qe,ut.cluster_id,We,et,gt):gt<et?gt++:Qe.push(He),Qe.length===We)break}return gt},oe.prototype._addTileFeatures=function(Qe,nt,We,et,gt,ht){for(var Ge=0,He=Qe;Ge<He.length;Ge+=1){var ut=nt[He[Ge]],tt=ut.numPoints,xt={type:1,geometry:[[Math.round(this.options.extent*(ut.x*gt-We)),Math.round(this.options.extent*(ut.y*gt-et))]],tags:tt?we(ut):this.points[ut.index].properties},At=void 0;tt?At=ut.id:this.options.generateId?At=ut.index:this.points[ut.index].id&&(At=this.points[ut.index].id),void 0!==At&&(xt.id=At),ht.features.push(xt)}},oe.prototype._limitZoom=function(Qe){return Math.max(this.options.minZoom,Math.min(+Qe,this.options.maxZoom+1))},oe.prototype._cluster=function(Qe,nt){for(var We=[],et=this.options,Ge=et.reduce,He=et.minPoints,ut=et.radius/(et.extent*Math.pow(2,nt)),tt=0;tt<Qe.length;tt++){var xt=Qe[tt];if(!(xt.zoom<=nt)){xt.zoom=nt;for(var At=this.trees[nt+1],Mt=At.within(xt.x,xt.y,ut),yt=xt.numPoints||1,Pt=yt,Ct=0,Dt=Mt;Ct<Dt.length;Ct+=1){var Bt=At.points[Dt[Ct]];Bt.zoom>nt&&(Pt+=Bt.numPoints||1)}if(Pt>=He){for(var qt=xt.x*yt,an=xt.y*yt,mn=Ge&&yt>1?this._map(xt,!0):null,Qt=(tt<<5)+(nt+1)+this.points.length,sn=0,Kt=Mt;sn<Kt.length;sn+=1){var Fn=At.points[Kt[sn]];if(!(Fn.zoom<=nt)){Fn.zoom=nt;var Sn=Fn.numPoints||1;qt+=Fn.x*Sn,an+=Fn.y*Sn,Fn.parentId=Qt,Ge&&(mn||(mn=this._map(xt,!0)),Ge(mn,this._map(Fn)))}}xt.parentId=Qt,We.push(fe(qt/Pt,an/Pt,Qt,Pt,mn))}else if(We.push(xt),Pt>1)for(var hn=0,wn=Mt;hn<wn.length;hn+=1){var An=At.points[wn[hn]];An.zoom<=nt||(An.zoom=nt,We.push(An))}}}return We},oe.prototype._getOriginId=function(Qe){return Qe-this.points.length>>5},oe.prototype._getOriginZoom=function(Qe){return(Qe-this.points.length)%32},oe.prototype._map=function(Qe,nt){if(Qe.numPoints)return nt?ye({},Qe.properties):Qe.properties;var We=this.points[Qe.index].properties,et=this.options.map(We);return nt&&et===We?ye({},et):et},ot.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ot.prototype.splitTile=function(Qe,nt,We,et,gt,ht,Ge){for(var He=[Qe,nt,We,et],ut=this.options,tt=ut.debug;He.length;){et=He.pop(),We=He.pop(),nt=He.pop(),Qe=He.pop();var xt=1<<nt,At=Rt(nt,We,et),Mt=this.tiles[At];if(!Mt&&(tt>1&&console.time("creation"),Mt=this.tiles[At]=St(Qe,nt,We,et,ut),this.tileCoords.push({z:nt,x:We,y:et}),tt)){tt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",nt,We,et,Mt.numFeatures,Mt.numPoints,Mt.numSimplified),console.timeEnd("creation"));var yt="z"+nt;this.stats[yt]=(this.stats[yt]||0)+1,this.total++}if(Mt.source=Qe,gt){if(nt===ut.maxZoom||nt===gt)continue;var Pt=1<<gt-nt;if(We!==Math.floor(ht/Pt)||et!==Math.floor(Ge/Pt))continue}else if(nt===ut.indexMaxZoom||Mt.numPoints<=ut.indexMaxPoints)continue;if(Mt.source=null,0!==Qe.length){tt>1&&console.time("clipping");var Ct,Dt,Ut,Bt,qt,an,mn=.5*ut.buffer/ut.extent,Qt=.5-mn,sn=.5+mn,Kt=1+mn;Ct=Dt=Ut=Bt=null,qt=je(Qe,xt,We-mn,We+sn,0,Mt.minX,Mt.maxX,ut),an=je(Qe,xt,We+Qt,We+Kt,0,Mt.minX,Mt.maxX,ut),Qe=null,qt&&(Ct=je(qt,xt,et-mn,et+sn,1,Mt.minY,Mt.maxY,ut),Dt=je(qt,xt,et+Qt,et+Kt,1,Mt.minY,Mt.maxY,ut),qt=null),an&&(Ut=je(an,xt,et-mn,et+sn,1,Mt.minY,Mt.maxY,ut),Bt=je(an,xt,et+Qt,et+Kt,1,Mt.minY,Mt.maxY,ut),an=null),tt>1&&console.timeEnd("clipping"),He.push(Ct||[],nt+1,2*We,2*et),He.push(Dt||[],nt+1,2*We,2*et+1),He.push(Ut||[],nt+1,2*We+1,2*et),He.push(Bt||[],nt+1,2*We+1,2*et+1)}}},ot.prototype.getTile=function(Qe,nt,We){var et=this.options,gt=et.extent,ht=et.debug;if(Qe<0||Qe>24)return null;var Ge=1<<Qe,He=Rt(Qe,nt=(nt%Ge+Ge)%Ge,We);if(this.tiles[He])return dt(this.tiles[He],gt);ht>1&&console.log("drilling down to z%d-%d-%d",Qe,nt,We);for(var ut,tt=Qe,xt=nt,At=We;!ut&&tt>0;)tt--,xt=Math.floor(xt/2),At=Math.floor(At/2),ut=this.tiles[Rt(tt,xt,At)];return ut&&ut.source?(ht>1&&console.log("found parent tile z%d-%d-%d",tt,xt,At),ht>1&&console.time("drilling down"),this.splitTile(ut.source,tt,xt,At,Qe,nt,We),ht>1&&console.timeEnd("drilling down"),this.tiles[He]?dt(this.tiles[He],gt):null):null};var Ht=function(Qe){function nt(We,et,gt,ht){Qe.call(this,We,et,gt,Vt),ht&&(this.loadGeoJSON=ht)}return Qe&&(nt.__proto__=Qe),(nt.prototype=Object.create(Qe&&Qe.prototype)).constructor=nt,nt.prototype.loadData=function(We,et){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=et,this._pendingLoadDataParams=We,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},nt.prototype._loadData=function(){var We=this;if(this._pendingCallback&&this._pendingLoadDataParams){var et=this._pendingCallback,gt=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ht=!!(gt&&gt.request&&gt.request.collectResourceTiming)&&new o.RequestPerformance(gt.request);this.loadGeoJSON(gt,function(Ge,He){if(Ge||!He)return et(Ge);if("object"!=typeof He)return et(new Error("Input data given to '"+gt.source+"' is not a valid GeoJSON object."));c(He,!0);try{if(gt.filter){var ut=o.createExpression(gt.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===ut.result)throw new Error(ut.value.map(function(Mt){return Mt.key+": "+Mt.message}).join(", "));var tt=He.features.filter(function(Mt){return ut.value.evaluate({zoom:0},Mt)});He={type:"FeatureCollection",features:tt}}We._geoJSONIndex=gt.cluster?new oe(function(Mt){var yt=Mt.superclusterOptions,Pt=Mt.clusterProperties;if(!Pt||!yt)return yt;for(var Ct={},Dt={},Ut={accumulated:null,zoom:0},Bt={properties:null},qt=Object.keys(Pt),an=0,mn=qt;an<mn.length;an+=1){var Qt=mn[an],sn=Pt[Qt],Kt=sn[0],Fn=o.createExpression(sn[1]),Sn=o.createExpression("string"==typeof Kt?[Kt,["accumulated"],["get",Qt]]:Kt);Ct[Qt]=Fn.value,Dt[Qt]=Sn.value}return yt.map=function(hn){Bt.properties=hn;for(var wn={},pn=0,An=qt;pn<An.length;pn+=1){var On=An[pn];wn[On]=Ct[On].evaluate(Ut,Bt)}return wn},yt.reduce=function(hn,wn){Bt.properties=wn;for(var pn=0,An=qt;pn<An.length;pn+=1){var On=An[pn];Ut.accumulated=hn[On],hn[On]=Dt[On].evaluate(Ut,Bt)}},yt}(gt)).load(He.features):new ot(Mt=He,gt.geojsonVtOptions)}catch(Mt){return et(Mt)}var Mt;We.loaded={};var xt={};if(ht){var At=ht.finish();At&&(xt.resourceTiming={},xt.resourceTiming[gt.source]=JSON.parse(JSON.stringify(At)))}et(null,xt)})}},nt.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},nt.prototype.reloadTile=function(We,et){var gt=this.loaded;return gt&&gt[We.uid]?Qe.prototype.reloadTile.call(this,We,et):this.loadTile(We,et)},nt.prototype.loadGeoJSON=function(We,et){if(We.request)o.getJSON(We.request,et);else{if("string"!=typeof We.data)return et(new Error("Input data given to '"+We.source+"' is not a valid GeoJSON object."));try{return et(null,JSON.parse(We.data))}catch{return et(new Error("Input data given to '"+We.source+"' is not a valid GeoJSON object."))}}},nt.prototype.removeSource=function(We,et){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),et()},nt.prototype.getClusterExpansionZoom=function(We,et){try{et(null,this._geoJSONIndex.getClusterExpansionZoom(We.clusterId))}catch(gt){et(gt)}},nt.prototype.getClusterChildren=function(We,et){try{et(null,this._geoJSONIndex.getChildren(We.clusterId))}catch(gt){et(gt)}},nt.prototype.getClusterLeaves=function(We,et){try{et(null,this._geoJSONIndex.getLeaves(We.clusterId,We.limit,We.offset))}catch(gt){et(gt)}},nt}(n),zt=function(Qe){var nt=this;this.self=Qe,this.actor=new o.Actor(Qe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:n,geojson:Ht},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(We,et){if(nt.workerSourceTypes[We])throw new Error('Worker source with name "'+We+'" already registered.');nt.workerSourceTypes[We]=et},this.self.registerRTLTextPlugin=function(We){if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=We.applyArabicShaping,o.plugin.processBidirectionalText=We.processBidirectionalText,o.plugin.processStyledBidirectionalText=We.processStyledBidirectionalText}};return zt.prototype.setReferrer=function(Qe,nt){this.referrer=nt},zt.prototype.setImages=function(Qe,nt,We){for(var et in this.availableImages[Qe]=nt,this.workerSources[Qe]){var gt=this.workerSources[Qe][et];for(var ht in gt)gt[ht].availableImages=nt}We()},zt.prototype.setLayers=function(Qe,nt,We){this.getLayerIndex(Qe).replace(nt),We()},zt.prototype.updateLayers=function(Qe,nt,We){this.getLayerIndex(Qe).update(nt.layers,nt.removedIds),We()},zt.prototype.loadTile=function(Qe,nt,We){this.getWorkerSource(Qe,nt.type,nt.source).loadTile(nt,We)},zt.prototype.loadDEMTile=function(Qe,nt,We){this.getDEMWorkerSource(Qe,nt.source).loadTile(nt,We)},zt.prototype.reloadTile=function(Qe,nt,We){this.getWorkerSource(Qe,nt.type,nt.source).reloadTile(nt,We)},zt.prototype.abortTile=function(Qe,nt,We){this.getWorkerSource(Qe,nt.type,nt.source).abortTile(nt,We)},zt.prototype.removeTile=function(Qe,nt,We){this.getWorkerSource(Qe,nt.type,nt.source).removeTile(nt,We)},zt.prototype.removeDEMTile=function(Qe,nt){this.getDEMWorkerSource(Qe,nt.source).removeTile(nt)},zt.prototype.removeSource=function(Qe,nt,We){if(this.workerSources[Qe]&&this.workerSources[Qe][nt.type]&&this.workerSources[Qe][nt.type][nt.source]){var et=this.workerSources[Qe][nt.type][nt.source];delete this.workerSources[Qe][nt.type][nt.source],void 0!==et.removeSource?et.removeSource(nt,We):We()}},zt.prototype.loadWorkerSource=function(Qe,nt,We){try{this.self.importScripts(nt.url),We()}catch(et){We(et.toString())}},zt.prototype.syncRTLPluginState=function(Qe,nt,We){try{o.plugin.setState(nt);var et=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&null!=et){this.self.importScripts(et);var gt=o.plugin.isParsed();We(gt?void 0:new Error("RTL Text Plugin failed to import scripts from "+et),gt)}}catch(ht){We(ht.toString())}},zt.prototype.getAvailableImages=function(Qe){var nt=this.availableImages[Qe];return nt||(nt=[]),nt},zt.prototype.getLayerIndex=function(Qe){var nt=this.layerIndexes[Qe];return nt||(nt=this.layerIndexes[Qe]=new p),nt},zt.prototype.getWorkerSource=function(Qe,nt,We){var et=this;return this.workerSources[Qe]||(this.workerSources[Qe]={}),this.workerSources[Qe][nt]||(this.workerSources[Qe][nt]={}),this.workerSources[Qe][nt][We]||(this.workerSources[Qe][nt][We]=new this.workerSourceTypes[nt]({send:function(ht,Ge,He){et.actor.send(ht,Ge,He,Qe)}},this.getLayerIndex(Qe),this.getAvailableImages(Qe))),this.workerSources[Qe][nt][We]},zt.prototype.getDEMWorkerSource=function(Qe,nt){return this.demWorkerSources[Qe]||(this.demWorkerSources[Qe]={}),this.demWorkerSources[Qe][nt]||(this.demWorkerSources[Qe][nt]=new s),this.demWorkerSources[Qe][nt]},zt.prototype.enforceCacheSizeLimit=function(Qe,nt){o.enforceCacheSizeLimit(nt)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new zt(self)),zt}),k(0,function(o){var T=o.createCommonjsModule(function(j){function Y(H){return!q(H)}function q(H){return typeof window<"u"&&typeof document<"u"?Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var le,pe,ke=new Blob([""],{type:"text/javascript"}),Fe=URL.createObjectURL(ke);try{pe=new Worker(Fe),le=!0}catch{le=!1}return pe&&pe.terminate(),URL.revokeObjectURL(Fe),le}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var le=document.createElement("canvas");le.width=le.height=1;var pe=le.getContext("2d");if(!pe)return!1;var ke=pe.getImageData(0,0,1,1);return ke&&ke.width===le.width}()?(void 0===I[te=H&&H.failIfMajorPerformanceCaveat]&&(I[te]=function(le){var Fe,Ve,Xe,pe=(Fe=le,Ve=document.createElement("canvas"),(Xe=Object.create(Y.webGLContextAttributes)).failIfMajorPerformanceCaveat=Fe,Ve.probablySupportsContext?Ve.probablySupportsContext("webgl",Xe)||Ve.probablySupportsContext("experimental-webgl",Xe):Ve.supportsContext?Ve.supportsContext("webgl",Xe)||Ve.supportsContext("experimental-webgl",Xe):Ve.getContext("webgl",Xe)||Ve.getContext("experimental-webgl",Xe));if(!pe)return!1;var ke=pe.createShader(pe.VERTEX_SHADER);return!(!ke||pe.isContextLost())&&(pe.shaderSource(ke,"void main() {}"),pe.compileShader(ke),!0===pe.getShaderParameter(ke,pe.COMPILE_STATUS))}(te)),I[te]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser";var te}j.exports?j.exports=Y:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=Y,window.mapboxgl.notSupportedReason=q);var I={};Y.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),b={create:function(j,Y,q){var I=o.window.document.createElement(j);return void 0!==Y&&(I.className=Y),q&&q.appendChild(I),I},createNS:function(j,Y){return o.window.document.createElementNS(j,Y)}},p=o.window.document&&o.window.document.documentElement.style;function l(j){if(!p)return j[0];for(var Y=0;Y<j.length;Y++)if(j[Y]in p)return j[Y];return j[0]}var t,i=l(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);b.disableDrag=function(){p&&i&&(t=p[i],p[i]="none")},b.enableDrag=function(){p&&i&&(p[i]=t)};var r=l(["transform","WebkitTransform"]);b.setTransform=function(j,Y){j.style[r]=Y};var n=!1;try{var a=Object.defineProperty({},"passive",{get:function(){n=!0}});o.window.addEventListener("test",a,a),o.window.removeEventListener("test",a,a)}catch{n=!1}b.addEventListener=function(j,Y,q,I){void 0===I&&(I={}),j.addEventListener(Y,q,"passive"in I&&n?I:I.capture)},b.removeEventListener=function(j,Y,q,I){void 0===I&&(I={}),j.removeEventListener(Y,q,"passive"in I&&n?I:I.capture)};var s=function(j){j.preventDefault(),j.stopPropagation(),o.window.removeEventListener("click",s,!0)};function c(j){var Y=j.userImage;return!!(Y&&Y.render&&Y.render())&&(j.data.replace(new Uint8Array(Y.data.buffer)),!0)}b.suppressClick=function(){o.window.addEventListener("click",s,!0),o.window.setTimeout(function(){o.window.removeEventListener("click",s,!0)},0)},b.mousePos=function(j,Y){var q=j.getBoundingClientRect();return new o.Point(Y.clientX-q.left-j.clientLeft,Y.clientY-q.top-j.clientTop)},b.touchPos=function(j,Y){for(var q=j.getBoundingClientRect(),I=[],H=0;H<Y.length;H++)I.push(new o.Point(Y[H].clientX-q.left-j.clientLeft,Y[H].clientY-q.top-j.clientTop));return I},b.mouseButton=function(j){return void 0!==o.window.InstallTrigger&&2===j.button&&j.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:j.button},b.remove=function(j){j.parentNode&&j.parentNode.removeChild(j)};var h=function(j){function Y(){j.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.isLoaded=function(){return this.loaded},Y.prototype.setLoaded=function(q){if(this.loaded!==q&&(this.loaded=q,q)){for(var I=0,H=this.requestors;I<H.length;I+=1){var te=H[I];this._notify(te.ids,te.callback)}this.requestors=[]}},Y.prototype.getImage=function(q){return this.images[q]},Y.prototype.addImage=function(q,I){this._validate(q,I)&&(this.images[q]=I)},Y.prototype._validate=function(q,I){var H=!0;return this._validateStretch(I.stretchX,I.data&&I.data.width)||(this.fire(new o.ErrorEvent(new Error('Image "'+q+'" has invalid "stretchX" value'))),H=!1),this._validateStretch(I.stretchY,I.data&&I.data.height)||(this.fire(new o.ErrorEvent(new Error('Image "'+q+'" has invalid "stretchY" value'))),H=!1),this._validateContent(I.content,I)||(this.fire(new o.ErrorEvent(new Error('Image "'+q+'" has invalid "content" value'))),H=!1),H},Y.prototype._validateStretch=function(q,I){if(!q)return!0;for(var H=0,te=0,le=q;te<le.length;te+=1){var pe=le[te];if(pe[0]<H||pe[1]<pe[0]||I<pe[1])return!1;H=pe[1]}return!0},Y.prototype._validateContent=function(q,I){return!(q&&(4!==q.length||q[0]<0||I.data.width<q[0]||q[1]<0||I.data.height<q[1]||q[2]<0||I.data.width<q[2]||q[3]<0||I.data.height<q[3]||q[2]<q[0]||q[3]<q[1]))},Y.prototype.updateImage=function(q,I){I.version=this.images[q].version+1,this.images[q]=I,this.updatedImages[q]=!0},Y.prototype.removeImage=function(q){var I=this.images[q];delete this.images[q],delete this.patterns[q],I.userImage&&I.userImage.onRemove&&I.userImage.onRemove()},Y.prototype.listImages=function(){return Object.keys(this.images)},Y.prototype.getImages=function(q,I){var H=!0;if(!this.isLoaded())for(var te=0,le=q;te<le.length;te+=1)this.images[le[te]]||(H=!1);this.isLoaded()||H?this._notify(q,I):this.requestors.push({ids:q,callback:I})},Y.prototype._notify=function(q,I){for(var H={},te=0,le=q;te<le.length;te+=1){var pe=le[te];this.images[pe]||this.fire(new o.Event("styleimagemissing",{id:pe}));var ke=this.images[pe];ke?H[pe]={data:ke.data.clone(),pixelRatio:ke.pixelRatio,sdf:ke.sdf,version:ke.version,stretchX:ke.stretchX,stretchY:ke.stretchY,content:ke.content,hasRenderCallback:!(!ke.userImage||!ke.userImage.render)}:o.warnOnce('Image "'+pe+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}I(null,H)},Y.prototype.getPixelSize=function(){var q=this.atlasImage;return{width:q.width,height:q.height}},Y.prototype.getPattern=function(q){var I=this.patterns[q],H=this.getImage(q);if(!H)return null;if(I&&I.position.version===H.version)return I.position;if(I)I.position.version=H.version;else{var te={w:H.data.width+2,h:H.data.height+2,x:0,y:0},le=new o.ImagePosition(te,H);this.patterns[q]={bin:te,position:le}}return this._updatePatternAtlas(),this.patterns[q].position},Y.prototype.bind=function(q){var I=q.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(q,this.atlasImage,I.RGBA),this.atlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE)},Y.prototype._updatePatternAtlas=function(){var q=[];for(var I in this.patterns)q.push(this.patterns[I].bin);var H=o.potpack(q),te=H.w,le=H.h,pe=this.atlasImage;for(var ke in pe.resize({width:te||1,height:le||1}),this.patterns){var Fe=this.patterns[ke].bin,Ve=Fe.x+1,Xe=Fe.y+1,Je=this.images[ke].data,ct=Je.width,vt=Je.height;o.RGBAImage.copy(Je,pe,{x:0,y:0},{x:Ve,y:Xe},{width:ct,height:vt}),o.RGBAImage.copy(Je,pe,{x:0,y:vt-1},{x:Ve,y:Xe-1},{width:ct,height:1}),o.RGBAImage.copy(Je,pe,{x:0,y:0},{x:Ve,y:Xe+vt},{width:ct,height:1}),o.RGBAImage.copy(Je,pe,{x:ct-1,y:0},{x:Ve-1,y:Xe},{width:1,height:vt}),o.RGBAImage.copy(Je,pe,{x:0,y:0},{x:Ve+ct,y:Xe},{width:1,height:vt})}this.dirty=!0},Y.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},Y.prototype.dispatchRenderCallbacks=function(q){for(var I=0,H=q;I<H.length;I+=1){var te=H[I];if(!this.callbackDispatchedThisFrame[te]){this.callbackDispatchedThisFrame[te]=!0;var le=this.images[te];c(le)&&this.updateImage(te,le)}}},Y}(o.Evented),u=m,y=m,d=1e20;function m(j,Y,q,I,H,te){this.fontSize=j||24,this.buffer=void 0===Y?3:Y,this.cutoff=I||.25,this.fontFamily=H||"sans-serif",this.fontWeight=te||"normal",this.radius=q||8;var le=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=le,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(le*le),this.gridInner=new Float64Array(le*le),this.f=new Float64Array(le),this.d=new Float64Array(le),this.z=new Float64Array(le+1),this.v=new Int16Array(le),this.middle=Math.round(le/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function g(j,Y,q,I,H,te,le){for(var pe=0;pe<Y;pe++){for(var ke=0;ke<q;ke++)I[ke]=j[ke*Y+pe];for(x(I,H,te,le,q),ke=0;ke<q;ke++)j[ke*Y+pe]=H[ke]}for(ke=0;ke<q;ke++){for(pe=0;pe<Y;pe++)I[pe]=j[ke*Y+pe];for(x(I,H,te,le,Y),pe=0;pe<Y;pe++)j[ke*Y+pe]=Math.sqrt(H[pe])}}function x(j,Y,q,I,H){q[0]=0,I[0]=-d,I[1]=+d;for(var te=1,le=0;te<H;te++){for(var pe=(j[te]+te*te-(j[q[le]]+q[le]*q[le]))/(2*te-2*q[le]);pe<=I[le];)le--,pe=(j[te]+te*te-(j[q[le]]+q[le]*q[le]))/(2*te-2*q[le]);q[++le]=te,I[le]=pe,I[le+1]=+d}for(te=0,le=0;te<H;te++){for(;I[le+1]<te;)le++;Y[te]=(te-q[le])*(te-q[le])+j[q[le]]}}m.prototype.draw=function(j){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(j,this.buffer,this.middle);for(var Y=this.ctx.getImageData(0,0,this.size,this.size),q=new Uint8ClampedArray(this.size*this.size),I=0;I<this.size*this.size;I++){var H=Y.data[4*I+3]/255;this.gridOuter[I]=1===H?0:0===H?d:Math.pow(Math.max(0,.5-H),2),this.gridInner[I]=1===H?d:0===H?0:Math.pow(Math.max(0,H-.5),2)}for(g(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),g(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),I=0;I<this.size*this.size;I++)q[I]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[I]-this.gridInner[I])/this.radius+this.cutoff))));return q},u.default=y;var v=function(j,Y){this.requestManager=j,this.localIdeographFontFamily=Y,this.entries={}};v.prototype.setURL=function(j){this.url=j},v.prototype.getGlyphs=function(j,Y){var q=this,I=[];for(var H in j)for(var te=0,le=j[H];te<le.length;te+=1)I.push({stack:H,id:le[te]});o.asyncAll(I,function(ke,Fe){var Ve=ke.stack,Xe=ke.id,Je=q.entries[Ve];Je||(Je=q.entries[Ve]={glyphs:{},requests:{},ranges:{}});var ct=Je.glyphs[Xe];if(void 0===ct){if(ct=q._tinySDF(Je,Ve,Xe))return Je.glyphs[Xe]=ct,void Fe(null,{stack:Ve,id:Xe,glyph:ct});var vt=Math.floor(Xe/256);if(256*vt>65535)Fe(new Error("glyphs > 65535 not supported"));else if(Je.ranges[vt])Fe(null,{stack:Ve,id:Xe,glyph:ct});else{var _t=Je.requests[vt];_t||(_t=Je.requests[vt]=[],v.loadGlyphRange(Ve,vt,q.url,q.requestManager,function(It,Ft){if(Ft){for(var Ot in Ft)q._doesCharSupportLocalGlyph(+Ot)||(Je.glyphs[+Ot]=Ft[+Ot]);Je.ranges[vt]=!0}for(var Yt=0,jt=_t;Yt<jt.length;Yt+=1)(0,jt[Yt])(It,Ft);delete Je.requests[vt]})),_t.push(function(It,Ft){It?Fe(It):Ft&&Fe(null,{stack:Ve,id:Xe,glyph:Ft[Xe]||null})})}}else Fe(null,{stack:Ve,id:Xe,glyph:ct})},function(ke,Fe){if(ke)Y(ke);else if(Fe){for(var Ve={},Xe=0,Je=Fe;Xe<Je.length;Xe+=1){var ct=Je[Xe],vt=ct.stack,_t=ct.id,It=ct.glyph;(Ve[vt]||(Ve[vt]={}))[_t]=It&&{id:It.id,bitmap:It.bitmap.clone(),metrics:It.metrics}}Y(null,Ve)}})},v.prototype._doesCharSupportLocalGlyph=function(j){return!!this.localIdeographFontFamily&&(o.isChar["CJK Unified Ideographs"](j)||o.isChar["Hangul Syllables"](j)||o.isChar.Hiragana(j)||o.isChar.Katakana(j))},v.prototype._tinySDF=function(j,Y,q){var I=this.localIdeographFontFamily;if(I&&this._doesCharSupportLocalGlyph(q)){var H=j.tinySDF;if(!H){var te="400";/bold/i.test(Y)?te="900":/medium/i.test(Y)?te="500":/light/i.test(Y)&&(te="200"),H=j.tinySDF=new v.TinySDF(24,3,8,.25,I,te)}return{id:q,bitmap:new o.AlphaImage({width:30,height:30},H.draw(String.fromCharCode(q))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},v.loadGlyphRange=function(j,Y,q,I,H){var te=256*Y,le=te+255,pe=I.transformRequest(I.normalizeGlyphsURL(q).replace("{fontstack}",j).replace("{range}",te+"-"+le),o.ResourceType.Glyphs);o.getArrayBuffer(pe,function(ke,Fe){if(ke)H(ke);else if(Fe){for(var Ve={},Xe=0,Je=o.parseGlyphPBF(Fe);Xe<Je.length;Xe+=1){var ct=Je[Xe];Ve[ct.id]=ct}H(null,Ve)}})},v.TinySDF=u;var _=function(){this.specification=o.styleSpec.light.position};_.prototype.possiblyEvaluate=function(j,Y){return o.sphericalToCartesian(j.expression.evaluate(Y))},_.prototype.interpolate=function(j,Y,q){return{x:o.number(j.x,Y.x,q),y:o.number(j.y,Y.y,q),z:o.number(j.z,Y.z,q)}};var f=new o.Properties({anchor:new o.DataConstantProperty(o.styleSpec.light.anchor),position:new _,color:new o.DataConstantProperty(o.styleSpec.light.color),intensity:new o.DataConstantProperty(o.styleSpec.light.intensity)}),w=function(j){function Y(q){j.call(this),this._transitionable=new o.Transitionable(f),this.setLight(q),this._transitioning=this._transitionable.untransitioned()}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getLight=function(){return this._transitionable.serialize()},Y.prototype.setLight=function(q,I){if(void 0===I&&(I={}),!this._validate(o.validateLight,q,I))for(var H in q){var te=q[H];o.endsWith(H,"-transition")?this._transitionable.setTransition(H.slice(0,-11),te):this._transitionable.setValue(H,te)}},Y.prototype.updateTransitions=function(q){this._transitioning=this._transitionable.transitioned(q,this._transitioning)},Y.prototype.hasTransition=function(){return this._transitioning.hasTransition()},Y.prototype.recalculate=function(q){this.properties=this._transitioning.possiblyEvaluate(q)},Y.prototype._validate=function(q,I,H){return(!H||!1!==H.validate)&&o.emitValidationErrors(this,q.call(o.validateStyle,o.extend({value:I,style:{glyphs:!0,sprite:!0},styleSpec:o.styleSpec})))},Y}(o.Evented),E=function(j,Y){this.width=j,this.height=Y,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};E.prototype.getDash=function(j,Y){var q=j.join(",")+String(Y);return this.dashEntry[q]||(this.dashEntry[q]=this.addDash(j,Y)),this.dashEntry[q]},E.prototype.getDashRanges=function(j,Y,q){var I=[],H=j.length%2==1?-j[j.length-1]*q:0,te=j[0]*q,le=!0;I.push({left:H,right:te,isDash:le,zeroLength:0===j[0]});for(var pe=j[0],ke=1;ke<j.length;ke++){var Fe=j[ke];H=pe*q,te=(pe+=Fe)*q,I.push({left:H,right:te,isDash:le=!le,zeroLength:0===Fe})}return I},E.prototype.addRoundDash=function(j,Y,q){for(var I=Y/2,H=-q;H<=q;H++)for(var le=this.width*(this.nextRow+q+H),pe=0,ke=j[pe],Fe=0;Fe<this.width;Fe++){Fe/ke.right>1&&(ke=j[++pe]);var Ve=Math.abs(Fe-ke.left),Xe=Math.abs(Fe-ke.right),Je=Math.min(Ve,Xe),ct=void 0,vt=H/q*(I+1);if(ke.isDash){var _t=I-Math.abs(vt);ct=Math.sqrt(Je*Je+_t*_t)}else ct=I-Math.sqrt(Je*Je+vt*vt);this.data[le+Fe]=Math.max(0,Math.min(255,ct+128))}},E.prototype.addRegularDash=function(j){for(var Y=j.length-1;Y>=0;--Y){var q=j[Y],I=j[Y+1];q.zeroLength?j.splice(Y,1):I&&I.isDash===q.isDash&&(I.left=q.left,j.splice(Y,1))}var H=j[0],te=j[j.length-1];H.isDash===te.isDash&&(H.left=te.left-this.width,te.right=H.right+this.width);for(var le=this.width*this.nextRow,pe=0,ke=j[pe],Fe=0;Fe<this.width;Fe++){Fe/ke.right>1&&(ke=j[++pe]);var Ve=Math.abs(Fe-ke.left),Xe=Math.abs(Fe-ke.right),Je=Math.min(Ve,Xe);this.data[le+Fe]=Math.max(0,Math.min(255,(ke.isDash?Je:-Je)+128))}},E.prototype.addDash=function(j,Y){var q=Y?7:0,I=2*q+1;if(this.nextRow+I>this.height)return o.warnOnce("LineAtlas out of space"),null;for(var H=0,te=0;te<j.length;te++)H+=j[te];if(0!==H){var le=this.width/H,pe=this.getDashRanges(j,this.width,le);Y?this.addRoundDash(pe,le,q):this.addRegularDash(pe)}var ke={y:(this.nextRow+q+.5)/this.height,height:2*q/this.height,width:H};return this.nextRow+=I,this.dirty=!0,ke},E.prototype.bind=function(j){var Y=j.gl;this.texture?(Y.bindTexture(Y.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,Y.texSubImage2D(Y.TEXTURE_2D,0,0,0,this.width,this.height,Y.ALPHA,Y.UNSIGNED_BYTE,this.data))):(this.texture=Y.createTexture(),Y.bindTexture(Y.TEXTURE_2D,this.texture),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_S,Y.REPEAT),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_T,Y.REPEAT),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_MIN_FILTER,Y.LINEAR),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_MAG_FILTER,Y.LINEAR),Y.texImage2D(Y.TEXTURE_2D,0,Y.ALPHA,this.width,this.height,0,Y.ALPHA,Y.UNSIGNED_BYTE,this.data))};var P=function j(Y,q){this.workerPool=Y,this.actors=[],this.currentActor=0,this.id=o.uniqueId();for(var I=this.workerPool.acquire(this.id),H=0;H<I.length;H++){var le=new j.Actor(I[H],q,this.id);le.name="Worker "+H,this.actors.push(le)}};function L(j,Y,q){var I=function(H,te){if(H)return q(H);if(te){var le=o.pick(o.extend(te,j),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);te.vector_layers&&(le.vectorLayers=te.vector_layers,le.vectorLayerIds=le.vectorLayers.map(function(pe){return pe.id})),le.tiles=Y.canonicalizeTileset(le,j.url),q(null,le)}};return j.url?o.getJSON(Y.transformRequest(Y.normalizeSourceURL(j.url),o.ResourceType.Source),I):o.browser.frame(function(){return I(null,j)})}P.prototype.broadcast=function(j,Y,q){o.asyncAll(this.actors,function(I,H){I.send(j,Y,H)},q=q||function(){})},P.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},P.prototype.remove=function(){this.actors.forEach(function(j){j.remove()}),this.actors=[],this.workerPool.release(this.id)},P.Actor=o.Actor;var O=function(j,Y,q){this.bounds=o.LngLatBounds.convert(this.validateBounds(j)),this.minzoom=Y||0,this.maxzoom=q||24};O.prototype.validateBounds=function(j){return Array.isArray(j)&&4===j.length?[Math.max(-180,j[0]),Math.max(-90,j[1]),Math.min(180,j[2]),Math.min(90,j[3])]:[-180,-90,180,90]},O.prototype.contains=function(j){var Y=Math.pow(2,j.z),q=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*Y),I=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*Y),H=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*Y),te=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*Y);return j.x>=q&&j.x<H&&j.y>=I&&j.y<te};var z=function(j){function Y(q,I,H,te){if(j.call(this),this.id=q,this.dispatcher=H,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(I,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},I),this._collectResourceTiming=I.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(te)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.load=function(){var q=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=L(this._options,this.map._requestManager,function(I,H){q._tileJSONRequest=null,q._loaded=!0,I?q.fire(new o.ErrorEvent(I)):H&&(o.extend(q,H),H.bounds&&(q.tileBounds=new O(H.bounds,q.minzoom,q.maxzoom)),o.postTurnstileEvent(H.tiles,q.map._requestManager._customAccessToken),o.postMapLoadEvent(H.tiles,q.map._getMapId(),q.map._requestManager._skuToken,q.map._requestManager._customAccessToken),q.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),q.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.hasTile=function(q){return!this.tileBounds||this.tileBounds.contains(q.canonical)},Y.prototype.onAdd=function(q){this.map=q,this.load()},Y.prototype.setSourceProperty=function(q){this._tileJSONRequest&&this._tileJSONRequest.cancel(),q(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},Y.prototype.setTiles=function(q){var I=this;return this.setSourceProperty(function(){I._options.tiles=q}),this},Y.prototype.setUrl=function(q){var I=this;return this.setSourceProperty(function(){I.url=q,I._options.url=q}),this},Y.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},Y.prototype.serialize=function(){return o.extend({},this._options)},Y.prototype.loadTile=function(q,I){var H=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme)),te={request:this.map._requestManager.transformRequest(H,o.ResourceType.Tile),uid:q.uid,tileID:q.tileID,zoom:q.tileID.overscaledZ,tileSize:this.tileSize*q.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function le(pe,ke){return delete q.request,q.aborted?I(null):pe&&404!==pe.status?I(pe):(ke&&ke.resourceTiming&&(q.resourceTiming=ke.resourceTiming),this.map._refreshExpiredTiles&&ke&&q.setExpiryData(ke),q.loadVectorData(ke,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),I(null),void(q.reloadCallback&&(this.loadTile(q,q.reloadCallback),q.reloadCallback=null)))}te.request.collectResourceTiming=this._collectResourceTiming,q.actor&&"expired"!==q.state?"loading"===q.state?q.reloadCallback=I:q.request=q.actor.send("reloadTile",te,le.bind(this)):(q.actor=this.dispatcher.getActor(),q.request=q.actor.send("loadTile",te,le.bind(this)))},Y.prototype.abortTile=function(q){q.request&&(q.request.cancel(),delete q.request),q.actor&&q.actor.send("abortTile",{uid:q.uid,type:this.type,source:this.id},void 0)},Y.prototype.unloadTile=function(q){q.unloadVectorData(),q.actor&&q.actor.send("removeTile",{uid:q.uid,type:this.type,source:this.id},void 0)},Y.prototype.hasTransition=function(){return!1},Y}(o.Evented),V=function(j){function Y(q,I,H,te){j.call(this),this.id=q,this.dispatcher=H,this.setEventedParent(te),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},I),o.extend(this,o.pick(I,["url","scheme","tileSize"]))}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.load=function(){var q=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=L(this._options,this.map._requestManager,function(I,H){q._tileJSONRequest=null,q._loaded=!0,I?q.fire(new o.ErrorEvent(I)):H&&(o.extend(q,H),H.bounds&&(q.tileBounds=new O(H.bounds,q.minzoom,q.maxzoom)),o.postTurnstileEvent(H.tiles),o.postMapLoadEvent(H.tiles,q.map._getMapId(),q.map._requestManager._skuToken),q.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),q.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.onAdd=function(q){this.map=q,this.load()},Y.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},Y.prototype.serialize=function(){return o.extend({},this._options)},Y.prototype.hasTile=function(q){return!this.tileBounds||this.tileBounds.contains(q.canonical)},Y.prototype.loadTile=function(q,I){var H=this,te=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);q.request=o.getImage(this.map._requestManager.transformRequest(te,o.ResourceType.Tile),function(le,pe){if(delete q.request,q.aborted)q.state="unloaded",I(null);else if(le)q.state="errored",I(le);else if(pe){H.map._refreshExpiredTiles&&q.setExpiryData(pe),delete pe.cacheControl,delete pe.expires;var ke=H.map.painter.context,Fe=ke.gl;q.texture=H.map.painter.getTileTexture(pe.width),q.texture?q.texture.update(pe,{useMipmap:!0}):(q.texture=new o.Texture(ke,pe,Fe.RGBA,{useMipmap:!0}),q.texture.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE,Fe.LINEAR_MIPMAP_NEAREST),ke.extTextureFilterAnisotropic&&Fe.texParameterf(Fe.TEXTURE_2D,ke.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ke.extTextureFilterAnisotropicMax)),q.state="loaded",o.cacheEntryPossiblyAdded(H.dispatcher),I(null)}})},Y.prototype.abortTile=function(q,I){q.request&&(q.request.cancel(),delete q.request),I()},Y.prototype.unloadTile=function(q,I){q.texture&&this.map.painter.saveTileTexture(q.texture),I()},Y.prototype.hasTransition=function(){return!1},Y}(o.Evented),R=function(j){function Y(q,I,H,te){j.call(this,q,I,H,te),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},I),this.encoding=I.encoding||"mapbox"}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},Y.prototype.loadTile=function(q,I){var H=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function te(le,pe){le&&(q.state="errored",I(le)),pe&&(q.dem=pe,q.needsHillshadePrepare=!0,q.state="loaded",I(null))}q.request=o.getImage(this.map._requestManager.transformRequest(H,o.ResourceType.Tile),function(le,pe){if(delete q.request,q.aborted)q.state="unloaded",I(null);else if(le)q.state="errored",I(le);else if(pe){this.map._refreshExpiredTiles&&q.setExpiryData(pe),delete pe.cacheControl,delete pe.expires;var ke=o.window.ImageBitmap&&pe instanceof o.window.ImageBitmap&&o.offscreenCanvasSupported()?pe:o.browser.getImageData(pe,1),Fe={uid:q.uid,coord:q.tileID,source:this.id,rawImageData:ke,encoding:this.encoding};q.actor&&"expired"!==q.state||(q.actor=this.dispatcher.getActor(),q.actor.send("loadDEMTile",Fe,te.bind(this)))}}.bind(this)),q.neighboringTiles=this._getNeighboringTiles(q.tileID)},Y.prototype._getNeighboringTiles=function(q){var I=q.canonical,H=Math.pow(2,I.z),te=(I.x-1+H)%H,le=0===I.x?q.wrap-1:q.wrap,pe=(I.x+1+H)%H,ke=I.x+1===H?q.wrap+1:q.wrap,Fe={};return Fe[new o.OverscaledTileID(q.overscaledZ,le,I.z,te,I.y).key]={backfilled:!1},Fe[new o.OverscaledTileID(q.overscaledZ,ke,I.z,pe,I.y).key]={backfilled:!1},I.y>0&&(Fe[new o.OverscaledTileID(q.overscaledZ,le,I.z,te,I.y-1).key]={backfilled:!1},Fe[new o.OverscaledTileID(q.overscaledZ,q.wrap,I.z,I.x,I.y-1).key]={backfilled:!1},Fe[new o.OverscaledTileID(q.overscaledZ,ke,I.z,pe,I.y-1).key]={backfilled:!1}),I.y+1<H&&(Fe[new o.OverscaledTileID(q.overscaledZ,le,I.z,te,I.y+1).key]={backfilled:!1},Fe[new o.OverscaledTileID(q.overscaledZ,q.wrap,I.z,I.x,I.y+1).key]={backfilled:!1},Fe[new o.OverscaledTileID(q.overscaledZ,ke,I.z,pe,I.y+1).key]={backfilled:!1}),Fe},Y.prototype.unloadTile=function(q){q.demTexture&&this.map.painter.saveTileTexture(q.demTexture),q.fbo&&(q.fbo.destroy(),delete q.fbo),q.dem&&delete q.dem,delete q.neighboringTiles,q.state="unloaded",q.actor&&q.actor.send("removeDEMTile",{uid:q.uid,source:this.id})},Y}(V),U=function(j){function Y(q,I,H,te){j.call(this),this.id=q,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=H.getActor(),this.setEventedParent(te),this._data=I.data,this._options=o.extend({},I),this._collectResourceTiming=I.collectResourceTiming,this._resourceTiming=[],void 0!==I.maxzoom&&(this.maxzoom=I.maxzoom),I.type&&(this.type=I.type),I.attribution&&(this.attribution=I.attribution),this.promoteId=I.promoteId;var le=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:I.cluster||!1,geojsonVtOptions:{buffer:(void 0!==I.buffer?I.buffer:128)*le,tolerance:(void 0!==I.tolerance?I.tolerance:.375)*le,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:I.lineMetrics||!1,generateId:I.generateId||!1},superclusterOptions:{maxZoom:void 0!==I.clusterMaxZoom?Math.min(I.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,I.clusterMinPoints||2),extent:o.EXTENT,radius:(I.clusterRadius||50)*le,log:!1,generateId:I.generateId||!1},clusterProperties:I.clusterProperties,filter:I.filter},I.workerOptions)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.load=function(){var q=this;this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(I){if(I)q.fire(new o.ErrorEvent(I));else{var H={dataType:"source",sourceDataType:"metadata"};q._collectResourceTiming&&q._resourceTiming&&q._resourceTiming.length>0&&(H.resourceTiming=q._resourceTiming,q._resourceTiming=[]),q.fire(new o.Event("data",H))}})},Y.prototype.onAdd=function(q){this.map=q,this.load()},Y.prototype.setData=function(q){var I=this;return this._data=q,this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(H){if(H)I.fire(new o.ErrorEvent(H));else{var te={dataType:"source",sourceDataType:"content"};I._collectResourceTiming&&I._resourceTiming&&I._resourceTiming.length>0&&(te.resourceTiming=I._resourceTiming,I._resourceTiming=[]),I.fire(new o.Event("data",te))}}),this},Y.prototype.getClusterExpansionZoom=function(q,I){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:q,source:this.id},I),this},Y.prototype.getClusterChildren=function(q,I){return this.actor.send("geojson.getClusterChildren",{clusterId:q,source:this.id},I),this},Y.prototype.getClusterLeaves=function(q,I,H,te){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:q,limit:I,offset:H},te),this},Y.prototype._updateWorkerData=function(q){var I=this;this._loaded=!1;var H=o.extend({},this.workerOptions),te=this._data;"string"==typeof te?(H.request=this.map._requestManager.transformRequest(o.browser.resolveURL(te),o.ResourceType.Source),H.request.collectResourceTiming=this._collectResourceTiming):H.data=JSON.stringify(te),this.actor.send(this.type+".loadData",H,function(le,pe){I._removed||pe&&pe.abandoned||(I._loaded=!0,pe&&pe.resourceTiming&&pe.resourceTiming[I.id]&&(I._resourceTiming=pe.resourceTiming[I.id].slice(0)),I.actor.send(I.type+".coalesce",{source:H.source},null),q(le))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.loadTile=function(q,I){var H=this,te=q.actor?"reloadTile":"loadTile";q.actor=this.actor,q.request=this.actor.send(te,{type:this.type,uid:q.uid,tileID:q.tileID,zoom:q.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(pe,ke){return delete q.request,q.unloadVectorData(),q.aborted?I(null):pe?I(pe):(q.loadVectorData(ke,H.map.painter,"reloadTile"===te),I(null))})},Y.prototype.abortTile=function(q){q.request&&(q.request.cancel(),delete q.request),q.aborted=!0},Y.prototype.unloadTile=function(q){q.unloadVectorData(),this.actor.send("removeTile",{uid:q.uid,type:this.type,source:this.id})},Y.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},Y.prototype.serialize=function(){return o.extend({},this._options,{type:this.type,data:this._data})},Y.prototype.hasTransition=function(){return!1},Y}(o.Evented),Z=o.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),N=function(j){function Y(q,I,H,te){j.call(this),this.id=q,this.dispatcher=H,this.coordinates=I.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(te),this.options=I}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.load=function(q,I){var H=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),function(te,le){H._loaded=!0,te?H.fire(new o.ErrorEvent(te)):le&&(H.image=le,q&&(H.coordinates=q),I&&I(),H._finishLoading())})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.updateImage=function(q){var I=this;return this.image&&q.url?(this.options.url=q.url,this.load(q.coordinates,function(){I.texture=null}),this):this},Y.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))},Y.prototype.onAdd=function(q){this.map=q,this.load()},Y.prototype.setCoordinates=function(q){var I=this;this.coordinates=q;var H=q.map(o.MercatorCoordinate.fromLngLat);this.tileID=function(le){for(var pe=1/0,ke=1/0,Fe=-1/0,Ve=-1/0,Xe=0,Je=le;Xe<Je.length;Xe+=1){var ct=Je[Xe];pe=Math.min(pe,ct.x),ke=Math.min(ke,ct.y),Fe=Math.max(Fe,ct.x),Ve=Math.max(Ve,ct.y)}var It=Math.max(Fe-pe,Ve-ke),Ft=Math.max(0,Math.floor(-Math.log(It)/Math.LN2)),Ot=Math.pow(2,Ft);return new o.CanonicalTileID(Ft,Math.floor((pe+Fe)/2*Ot),Math.floor((ke+Ve)/2*Ot))}(H),this.minzoom=this.maxzoom=this.tileID.z;var te=H.map(function(le){return I.tileID.getTilePoint(le)._round()});return this._boundsArray=new o.StructArrayLayout4i8,this._boundsArray.emplaceBack(te[0].x,te[0].y,0,0),this._boundsArray.emplaceBack(te[1].x,te[1].y,o.EXTENT,0),this._boundsArray.emplaceBack(te[3].x,te[3].y,0,o.EXTENT),this._boundsArray.emplaceBack(te[2].x,te[2].y,o.EXTENT,o.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this},Y.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var q=this.map.painter.context,I=q.gl;for(var H in this.boundsBuffer||(this.boundsBuffer=q.createVertexBuffer(this._boundsArray,Z.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new o.Texture(q,this.image,I.RGBA),this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE)),this.tiles){var te=this.tiles[H];"loaded"!==te.state&&(te.state="loaded",te.texture=this.texture)}}},Y.prototype.loadTile=function(q,I){this.tileID&&this.tileID.equals(q.tileID.canonical)?(this.tiles[String(q.tileID.wrap)]=q,q.buckets={},I(null)):(q.state="errored",I(null))},Y.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return!1},Y}(o.Evented),G=function(j){function Y(q,I,H,te){j.call(this,q,I,H,te),this.roundZoom=!0,this.type="video",this.options=I}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.load=function(){var q=this;this._loaded=!1;var I=this.options;this.urls=[];for(var H=0,te=I.urls;H<te.length;H+=1)this.urls.push(this.map._requestManager.transformRequest(te[H],o.ResourceType.Source).url);o.getVideo(this.urls,function(pe,ke){q._loaded=!0,pe?q.fire(new o.ErrorEvent(pe)):ke&&(q.video=ke,q.video.loop=!0,q.video.addEventListener("playing",function(){q.map.triggerRepaint()}),q.map&&q.video.play(),q._finishLoading())})},Y.prototype.pause=function(){this.video&&this.video.pause()},Y.prototype.play=function(){this.video&&this.video.play()},Y.prototype.seek=function(q){if(this.video){var I=this.video.seekable;q<I.start(0)||q>I.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+I.start(0)+" and "+I.end(0)+"-second mark."))):this.video.currentTime=q}},Y.prototype.getVideo=function(){return this.video},Y.prototype.onAdd=function(q){this.map||(this.map=q,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},Y.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var q=this.map.painter.context,I=q.gl;for(var H in this.boundsBuffer||(this.boundsBuffer=q.createVertexBuffer(this._boundsArray,Z.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE),I.texSubImage2D(I.TEXTURE_2D,0,0,0,I.RGBA,I.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(q,this.video,I.RGBA),this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE)),this.tiles){var te=this.tiles[H];"loaded"!==te.state&&(te.state="loaded",te.texture=this.texture)}}},Y.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return this.video&&!this.video.paused},Y}(N),W=function(j){function Y(q,I,H,te){j.call(this,q,I,H,te),I.coordinates?Array.isArray(I.coordinates)&&4===I.coordinates.length&&!I.coordinates.some(function(le){return!Array.isArray(le)||2!==le.length||le.some(function(pe){return"number"!=typeof pe})})||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+q,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+q,null,'missing required property "coordinates"'))),I.animate&&"boolean"!=typeof I.animate&&this.fire(new o.ErrorEvent(new o.ValidationError("sources."+q,null,'optional "animate" property must be a boolean value'))),I.canvas?"string"==typeof I.canvas||I.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+q,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+q,null,'missing required property "canvas"'))),this.options=I,this.animate=void 0===I.animate||I.animate}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},Y.prototype.getCanvas=function(){return this.canvas},Y.prototype.onAdd=function(q){this.map=q,this.load(),this.canvas&&this.animate&&this.play()},Y.prototype.onRemove=function(){this.pause()},Y.prototype.prepare=function(){var q=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,q=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,q=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var I=this.map.painter.context,H=I.gl;for(var te in this.boundsBuffer||(this.boundsBuffer=I.createVertexBuffer(this._boundsArray,Z.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(q||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(I,this.canvas,H.RGBA,{premultiply:!0}),this.tiles){var le=this.tiles[te];"loaded"!==le.state&&(le.state="loaded",le.texture=this.texture)}}},Y.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return this._playing},Y.prototype._hasInvalidDimensions=function(){for(var q=0,I=[this.canvas.width,this.canvas.height];q<I.length;q+=1){var H=I[q];if(isNaN(H)||H<=0)return!0}return!1},Y}(N),ae={vector:z,raster:V,"raster-dem":R,geojson:U,video:G,image:N,canvas:W};function re(j,Y){var q=o.identity([]);return o.translate(q,q,[1,1,0]),o.scale(q,q,[.5*j.width,.5*j.height,1]),o.multiply(q,q,j.calculatePosMatrix(Y.toUnwrapped()))}function ne(j,Y,q,I,H,te){var le=function(_t,It,Ft){if(_t)for(var Ot=0,Yt=_t;Ot<Yt.length;Ot+=1){var jt=It[Yt[Ot]];if(jt&&jt.source===Ft&&"fill-extrusion"===jt.type)return!0}else for(var ln in It){var tn=It[ln];if(tn.source===Ft&&"fill-extrusion"===tn.type)return!0}return!1}(H&&H.layers,Y,j.id),pe=te.maxPitchScaleFactor(),ke=j.tilesIn(I,pe,le);ke.sort(Q);for(var Fe=[],Ve=0,Xe=ke;Ve<Xe.length;Ve+=1){var Je=Xe[Ve];Fe.push({wrappedTileID:Je.tileID.wrapped().key,queryResults:Je.tile.queryRenderedFeatures(Y,q,j._state,Je.queryGeometry,Je.cameraQueryGeometry,Je.scale,H,te,pe,re(j.transform,Je.tileID))})}var ct=function(_t){for(var It={},Ft={},Ot=0,Yt=_t;Ot<Yt.length;Ot+=1){var jt=Yt[Ot],ln=jt.queryResults,tn=jt.wrappedTileID,Jt=Ft[tn]=Ft[tn]||{};for(var Mn in ln)for(var Ln=ln[Mn],Un=Jt[Mn]=Jt[Mn]||{},Xn=It[Mn]=It[Mn]||[],sr=0,xr=Ln;sr<xr.length;sr+=1){var Mr=xr[sr];Un[Mr.featureIndex]||(Un[Mr.featureIndex]=!0,Xn.push(Mr))}}return It}(Fe);for(var vt in ct)ct[vt].forEach(function(_t){var It=_t.feature,Ft=j.getFeatureState(It.layer["source-layer"],It.id);It.source=It.layer.source,It.layer["source-layer"]&&(It.sourceLayer=It.layer["source-layer"]),It.state=Ft});return ct}function Q(j,Y){var q=j.tileID,I=Y.tileID;return q.overscaledZ-I.overscaledZ||q.canonical.y-I.canonical.y||q.wrap-I.wrap||q.canonical.x-I.canonical.x}var $=function(j,Y){this.max=j,this.onRemove=Y,this.reset()};$.prototype.reset=function(){for(var j in this.data)for(var Y=0,q=this.data[j];Y<q.length;Y+=1){var I=q[Y];I.timeout&&clearTimeout(I.timeout),this.onRemove(I.value)}return this.data={},this.order=[],this},$.prototype.add=function(j,Y,q){var I=this,H=j.wrapped().key;void 0===this.data[H]&&(this.data[H]=[]);var te={value:Y,timeout:void 0};if(void 0!==q&&(te.timeout=setTimeout(function(){I.remove(j,te)},q)),this.data[H].push(te),this.order.push(H),this.order.length>this.max){var le=this._getAndRemoveByKey(this.order[0]);le&&this.onRemove(le)}return this},$.prototype.has=function(j){return j.wrapped().key in this.data},$.prototype.getAndRemove=function(j){return this.has(j)?this._getAndRemoveByKey(j.wrapped().key):null},$.prototype._getAndRemoveByKey=function(j){var Y=this.data[j].shift();return Y.timeout&&clearTimeout(Y.timeout),0===this.data[j].length&&delete this.data[j],this.order.splice(this.order.indexOf(j),1),Y.value},$.prototype.getByKey=function(j){var Y=this.data[j];return Y?Y[0].value:null},$.prototype.get=function(j){return this.has(j)?this.data[j.wrapped().key][0].value:null},$.prototype.remove=function(j,Y){if(!this.has(j))return this;var q=j.wrapped().key,I=void 0===Y?0:this.data[q].indexOf(Y),H=this.data[q][I];return this.data[q].splice(I,1),H.timeout&&clearTimeout(H.timeout),0===this.data[q].length&&delete this.data[q],this.onRemove(H.value),this.order.splice(this.order.indexOf(q),1),this},$.prototype.setMaxSize=function(j){for(this.max=j;this.order.length>this.max;){var Y=this._getAndRemoveByKey(this.order[0]);Y&&this.onRemove(Y)}return this},$.prototype.filter=function(j){var Y=[];for(var q in this.data)for(var I=0,H=this.data[q];I<H.length;I+=1){var te=H[I];j(te.value)||Y.push(te)}for(var le=0,pe=Y;le<pe.length;le+=1){var ke=pe[le];this.remove(ke.value.tileID,ke)}};var X=function(j,Y,q){this.context=j;var I=j.gl;this.buffer=I.createBuffer(),this.dynamicDraw=!!q,this.context.unbindVAO(),j.bindElementBuffer.set(this.buffer),I.bufferData(I.ELEMENT_ARRAY_BUFFER,Y.arrayBuffer,this.dynamicDraw?I.DYNAMIC_DRAW:I.STATIC_DRAW),this.dynamicDraw||delete Y.arrayBuffer};X.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},X.prototype.updateData=function(j){var Y=this.context.gl;this.context.unbindVAO(),this.bind(),Y.bufferSubData(Y.ELEMENT_ARRAY_BUFFER,0,j.arrayBuffer)},X.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var oe={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},fe=function(j,Y,q,I){this.length=Y.length,this.attributes=q,this.itemSize=Y.bytesPerElement,this.dynamicDraw=I,this.context=j;var H=j.gl;this.buffer=H.createBuffer(),j.bindVertexBuffer.set(this.buffer),H.bufferData(H.ARRAY_BUFFER,Y.arrayBuffer,this.dynamicDraw?H.DYNAMIC_DRAW:H.STATIC_DRAW),this.dynamicDraw||delete Y.arrayBuffer};fe.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},fe.prototype.updateData=function(j){var Y=this.context.gl;this.bind(),Y.bufferSubData(Y.ARRAY_BUFFER,0,j.arrayBuffer)},fe.prototype.enableAttributes=function(j,Y){for(var q=0;q<this.attributes.length;q++){var H=Y.attributes[this.attributes[q].name];void 0!==H&&j.enableVertexAttribArray(H)}},fe.prototype.setVertexAttribPointers=function(j,Y,q){for(var I=0;I<this.attributes.length;I++){var H=this.attributes[I],te=Y.attributes[H.name];void 0!==te&&j.vertexAttribPointer(te,H.components,j[oe[H.type]],!1,this.itemSize,H.offset+this.itemSize*(q||0))}},fe.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ue=function(j){this.gl=j.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ue.prototype.get=function(){return this.current},ue.prototype.set=function(j){},ue.prototype.getDefault=function(){return this.default},ue.prototype.setDefault=function(){this.set(this.default)};var ge=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getDefault=function(){return o.Color.transparent},Y.prototype.set=function(q){var I=this.current;(q.r!==I.r||q.g!==I.g||q.b!==I.b||q.a!==I.a||this.dirty)&&(this.gl.clearColor(q.r,q.g,q.b,q.a),this.current=q,this.dirty=!1)},Y}(ue),we=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getDefault=function(){return 1},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.clearDepth(q),this.current=q,this.dirty=!1)},Y}(ue),Te=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getDefault=function(){return 0},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.clearStencil(q),this.current=q,this.dirty=!1)},Y}(ue),xe=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getDefault=function(){return[!0,!0,!0,!0]},Y.prototype.set=function(q){var I=this.current;(q[0]!==I[0]||q[1]!==I[1]||q[2]!==I[2]||q[3]!==I[3]||this.dirty)&&(this.gl.colorMask(q[0],q[1],q[2],q[3]),this.current=q,this.dirty=!1)},Y}(ue),ye=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!0},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.depthMask(q),this.current=q,this.dirty=!1)},Y}(ue),_e=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getDefault=function(){return 255},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.stencilMask(q),this.current=q,this.dirty=!1)},Y}(ue),Ie=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},Y.prototype.set=function(q){var I=this.current;(q.func!==I.func||q.ref!==I.ref||q.mask!==I.mask||this.dirty)&&(this.gl.stencilFunc(q.func,q.ref,q.mask),this.current=q,this.dirty=!1)},Y}(ue),De=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getDefault=function(){var q=this.gl;return[q.KEEP,q.KEEP,q.KEEP]},Y.prototype.set=function(q){var I=this.current;(q[0]!==I[0]||q[1]!==I[1]||q[2]!==I[2]||this.dirty)&&(this.gl.stencilOp(q[0],q[1],q[2]),this.current=q,this.dirty=!1)},Y}(ue),be=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var I=this.gl;q?I.enable(I.STENCIL_TEST):I.disable(I.STENCIL_TEST),this.current=q,this.dirty=!1}},Y}(ue),he=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getDefault=function(){return[0,1]},Y.prototype.set=function(q){var I=this.current;(q[0]!==I[0]||q[1]!==I[1]||this.dirty)&&(this.gl.depthRange(q[0],q[1]),this.current=q,this.dirty=!1)},Y}(ue),ce=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var I=this.gl;q?I.enable(I.DEPTH_TEST):I.disable(I.DEPTH_TEST),this.current=q,this.dirty=!1}},Y}(ue),me=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getDefault=function(){return this.gl.LESS},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.depthFunc(q),this.current=q,this.dirty=!1)},Y}(ue),Pe=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var I=this.gl;q?I.enable(I.BLEND):I.disable(I.BLEND),this.current=q,this.dirty=!1}},Y}(ue),Ae=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getDefault=function(){var q=this.gl;return[q.ONE,q.ZERO]},Y.prototype.set=function(q){var I=this.current;(q[0]!==I[0]||q[1]!==I[1]||this.dirty)&&(this.gl.blendFunc(q[0],q[1]),this.current=q,this.dirty=!1)},Y}(ue),Ce=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getDefault=function(){return o.Color.transparent},Y.prototype.set=function(q){var I=this.current;(q.r!==I.r||q.g!==I.g||q.b!==I.b||q.a!==I.a||this.dirty)&&(this.gl.blendColor(q.r,q.g,q.b,q.a),this.current=q,this.dirty=!1)},Y}(ue),Oe=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getDefault=function(){return this.gl.FUNC_ADD},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.blendEquation(q),this.current=q,this.dirty=!1)},Y}(ue),Ne=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var I=this.gl;q?I.enable(I.CULL_FACE):I.disable(I.CULL_FACE),this.current=q,this.dirty=!1}},Y}(ue),je=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getDefault=function(){return this.gl.BACK},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.cullFace(q),this.current=q,this.dirty=!1)},Y}(ue),ve=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getDefault=function(){return this.gl.CCW},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.frontFace(q),this.current=q,this.dirty=!1)},Y}(ue),Me=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.useProgram(q),this.current=q,this.dirty=!1)},Y}(ue),Le=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getDefault=function(){return this.gl.TEXTURE0},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.activeTexture(q),this.current=q,this.dirty=!1)},Y}(ue),Ue=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getDefault=function(){var q=this.gl;return[0,0,q.drawingBufferWidth,q.drawingBufferHeight]},Y.prototype.set=function(q){var I=this.current;(q[0]!==I[0]||q[1]!==I[1]||q[2]!==I[2]||q[3]!==I[3]||this.dirty)&&(this.gl.viewport(q[0],q[1],q[2],q[3]),this.current=q,this.dirty=!1)},Y}(ue),ze=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var I=this.gl;I.bindFramebuffer(I.FRAMEBUFFER,q),this.current=q,this.dirty=!1}},Y}(ue),qe=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var I=this.gl;I.bindRenderbuffer(I.RENDERBUFFER,q),this.current=q,this.dirty=!1}},Y}(ue),Ke=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var I=this.gl;I.bindTexture(I.TEXTURE_2D,q),this.current=q,this.dirty=!1}},Y}(ue),it=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var I=this.gl;I.bindBuffer(I.ARRAY_BUFFER,q),this.current=q,this.dirty=!1}},Y}(ue),ft=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){var I=this.gl;I.bindBuffer(I.ELEMENT_ARRAY_BUFFER,q),this.current=q,this.dirty=!1},Y}(ue),dt=function(j){function Y(q){j.call(this,q),this.vao=q.extVertexArrayObject}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){this.vao&&(q!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(q),this.current=q,this.dirty=!1)},Y}(ue),kt=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getDefault=function(){return 4},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var I=this.gl;I.pixelStorei(I.UNPACK_ALIGNMENT,q),this.current=q,this.dirty=!1}},Y}(ue),St=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var I=this.gl;I.pixelStorei(I.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q),this.current=q,this.dirty=!1}},Y}(ue),Tt=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var I=this.gl;I.pixelStorei(I.UNPACK_FLIP_Y_WEBGL,q),this.current=q,this.dirty=!1}},Y}(ue),lt=function(j){function Y(q,I){j.call(this,q),this.context=q,this.parent=I}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y}(ue),ot=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.setDirty=function(){this.dirty=!0},Y.prototype.set=function(q){if(q!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var I=this.gl;I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_2D,q,0),this.current=q,this.dirty=!1}},Y}(lt),Rt=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.set=function(q){if(q!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var I=this.gl;I.framebufferRenderbuffer(I.FRAMEBUFFER,I.DEPTH_ATTACHMENT,I.RENDERBUFFER,q),this.current=q,this.dirty=!1}},Y}(lt),Vt=function(j,Y,q,I){this.context=j,this.width=Y,this.height=q;var te=this.framebuffer=j.gl.createFramebuffer();this.colorAttachment=new ot(j,te),I&&(this.depthAttachment=new Rt(j,te))};Vt.prototype.destroy=function(){var j=this.context.gl,Y=this.colorAttachment.get();if(Y&&j.deleteTexture(Y),this.depthAttachment){var q=this.depthAttachment.get();q&&j.deleteRenderbuffer(q)}j.deleteFramebuffer(this.framebuffer)};var Ht=function(j,Y,q){this.func=j,this.mask=Y,this.range=q};Ht.ReadOnly=!1,Ht.ReadWrite=!0,Ht.disabled=new Ht(519,Ht.ReadOnly,[0,1]);var Qe=function(j,Y,q,I,H,te){this.test=j,this.ref=Y,this.mask=q,this.fail=I,this.depthFail=H,this.pass=te};Qe.disabled=new Qe({func:519,mask:0},0,0,7680,7680,7680);var nt=function(j,Y,q){this.blendFunction=j,this.blendColor=Y,this.mask=q};nt.disabled=new nt(nt.Replace=[1,0],o.Color.transparent,[!1,!1,!1,!1]),nt.unblended=new nt(nt.Replace,o.Color.transparent,[!0,!0,!0,!0]),nt.alphaBlended=new nt([1,771],o.Color.transparent,[!0,!0,!0,!0]);var We=function(j,Y,q){this.enable=j,this.mode=Y,this.frontFace=q};We.disabled=new We(!1,1029,2305),We.backCCW=new We(!0,1029,2305);var et=function(j){this.gl=j,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ge(this),this.clearDepth=new we(this),this.clearStencil=new Te(this),this.colorMask=new xe(this),this.depthMask=new ye(this),this.stencilMask=new _e(this),this.stencilFunc=new Ie(this),this.stencilOp=new De(this),this.stencilTest=new be(this),this.depthRange=new he(this),this.depthTest=new ce(this),this.depthFunc=new me(this),this.blend=new Pe(this),this.blendFunc=new Ae(this),this.blendColor=new Ce(this),this.blendEquation=new Oe(this),this.cullFace=new Ne(this),this.cullFaceSide=new je(this),this.frontFace=new ve(this),this.program=new Me(this),this.activeTexture=new Le(this),this.viewport=new Ue(this),this.bindFramebuffer=new ze(this),this.bindRenderbuffer=new qe(this),this.bindTexture=new Ke(this),this.bindVertexBuffer=new it(this),this.bindElementBuffer=new ft(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new dt(this),this.pixelStoreUnpack=new kt(this),this.pixelStoreUnpackPremultiplyAlpha=new St(this),this.pixelStoreUnpackFlipY=new Tt(this),this.extTextureFilterAnisotropic=j.getExtension("EXT_texture_filter_anisotropic")||j.getExtension("MOZ_EXT_texture_filter_anisotropic")||j.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=j.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=j.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(j.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=j.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=j.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=j.getParameter(j.MAX_TEXTURE_SIZE)};et.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},et.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},et.prototype.createIndexBuffer=function(j,Y){return new X(this,j,Y)},et.prototype.createVertexBuffer=function(j,Y,q){return new fe(this,j,Y,q)},et.prototype.createRenderbuffer=function(j,Y,q){var I=this.gl,H=I.createRenderbuffer();return this.bindRenderbuffer.set(H),I.renderbufferStorage(I.RENDERBUFFER,j,Y,q),this.bindRenderbuffer.set(null),H},et.prototype.createFramebuffer=function(j,Y,q){return new Vt(this,j,Y,q)},et.prototype.clear=function(j){var Y=j.color,q=j.depth,I=this.gl,H=0;Y&&(H|=I.COLOR_BUFFER_BIT,this.clearColor.set(Y),this.colorMask.set([!0,!0,!0,!0])),void 0!==q&&(H|=I.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(q),this.depthMask.set(!0)),I.clear(H)},et.prototype.setCullFace=function(j){!1===j.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(j.mode),this.frontFace.set(j.frontFace))},et.prototype.setDepthMode=function(j){j.func!==this.gl.ALWAYS||j.mask?(this.depthTest.set(!0),this.depthFunc.set(j.func),this.depthMask.set(j.mask),this.depthRange.set(j.range)):this.depthTest.set(!1)},et.prototype.setStencilMode=function(j){j.test.func!==this.gl.ALWAYS||j.mask?(this.stencilTest.set(!0),this.stencilMask.set(j.mask),this.stencilOp.set([j.fail,j.depthFail,j.pass]),this.stencilFunc.set({func:j.test.func,ref:j.ref,mask:j.test.mask})):this.stencilTest.set(!1)},et.prototype.setColorMode=function(j){o.deepEqual(j.blendFunction,nt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(j.blendFunction),this.blendColor.set(j.blendColor)),this.colorMask.set(j.mask)},et.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var gt=function(j){function Y(q,I,H){var te=this;j.call(this),this.id=q,this.dispatcher=H,this.on("data",function(le){"source"===le.dataType&&"metadata"===le.sourceDataType&&(te._sourceLoaded=!0),te._sourceLoaded&&!te._paused&&"source"===le.dataType&&"content"===le.sourceDataType&&(te.reload(),te.transform&&te.update(te.transform))}),this.on("error",function(){te._sourceErrored=!0}),this._source=function(le,pe,ke,Fe){var Ve=new ae[pe.type](le,pe,ke,Fe);if(Ve.id!==le)throw new Error("Expected Source id to be "+le+" instead of "+Ve.id);return o.bindAll(["load","abort","unload","serialize","prepare"],Ve),Ve}(q,I,H,this),this._tiles={},this._cache=new $(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new o.SourceFeatureState}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.onAdd=function(q){this.map=q,this._maxTileCacheSize=q?q._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(q)},Y.prototype.onRemove=function(q){this._source&&this._source.onRemove&&this._source.onRemove(q)},Y.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var q in this._tiles){var I=this._tiles[q];if("loaded"!==I.state&&"errored"!==I.state)return!1}return!0},Y.prototype.getSource=function(){return this._source},Y.prototype.pause=function(){this._paused=!0},Y.prototype.resume=function(){if(this._paused){var q=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,q&&this.reload(),this.transform&&this.update(this.transform)}},Y.prototype._loadTile=function(q,I){return this._source.loadTile(q,I)},Y.prototype._unloadTile=function(q){if(this._source.unloadTile)return this._source.unloadTile(q,function(){})},Y.prototype._abortTile=function(q){if(this._source.abortTile)return this._source.abortTile(q,function(){})},Y.prototype.serialize=function(){return this._source.serialize()},Y.prototype.prepare=function(q){for(var I in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var H=this._tiles[I];H.upload(q),H.prepare(this.map.style.imageManager)}},Y.prototype.getIds=function(){return o.values(this._tiles).map(function(q){return q.tileID}).sort(ht).map(function(q){return q.key})},Y.prototype.getRenderableIds=function(q){var I=this,H=[];for(var te in this._tiles)this._isIdRenderable(te,q)&&H.push(this._tiles[te]);return q?H.sort(function(le,pe){var ke=le.tileID,Fe=pe.tileID,Ve=new o.Point(ke.canonical.x,ke.canonical.y)._rotate(I.transform.angle),Xe=new o.Point(Fe.canonical.x,Fe.canonical.y)._rotate(I.transform.angle);return ke.overscaledZ-Fe.overscaledZ||Xe.y-Ve.y||Xe.x-Ve.x}).map(function(le){return le.tileID.key}):H.map(function(le){return le.tileID}).sort(ht).map(function(le){return le.key})},Y.prototype.hasRenderableParent=function(q){var I=this.findLoadedParent(q,0);return!!I&&this._isIdRenderable(I.tileID.key)},Y.prototype._isIdRenderable=function(q,I){return this._tiles[q]&&this._tiles[q].hasData()&&!this._coveredTiles[q]&&(I||!this._tiles[q].holdingForFade())},Y.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var q in this._cache.reset(),this._tiles)"errored"!==this._tiles[q].state&&this._reloadTile(q,"reloading")},Y.prototype._reloadTile=function(q,I){var H=this._tiles[q];H&&("loading"!==H.state&&(H.state=I),this._loadTile(H,this._tileLoaded.bind(this,H,q,I)))},Y.prototype._tileLoaded=function(q,I,H,te){if(te)return q.state="errored",void(404!==te.status?this._source.fire(new o.ErrorEvent(te,{tile:q})):this.update(this.transform));q.timeAdded=o.browser.now(),"expired"===H&&(q.refreshedUponExpiration=!0),this._setTileReloadTimer(I,q),"raster-dem"===this.getSource().type&&q.dem&&this._backfillDEM(q),this._state.initializeTileState(q,this.map?this.map.painter:null),this._source.fire(new o.Event("data",{dataType:"source",tile:q,coord:q.tileID}))},Y.prototype._backfillDEM=function(q){for(var I=this.getRenderableIds(),H=0;H<I.length;H++){var te=I[H];if(q.neighboringTiles&&q.neighboringTiles[te]){var le=this.getTileByID(te);pe(q,le),pe(le,q)}}function pe(ke,Fe){ke.needsHillshadePrepare=!0;var Ve=Fe.tileID.canonical.x-ke.tileID.canonical.x,Xe=Fe.tileID.canonical.y-ke.tileID.canonical.y,Je=Math.pow(2,ke.tileID.canonical.z),ct=Fe.tileID.key;0===Ve&&0===Xe||Math.abs(Xe)>1||(Math.abs(Ve)>1&&(1===Math.abs(Ve+Je)?Ve+=Je:1===Math.abs(Ve-Je)&&(Ve-=Je)),Fe.dem&&ke.dem&&(ke.dem.backfillBorder(Fe.dem,Ve,Xe),ke.neighboringTiles&&ke.neighboringTiles[ct]&&(ke.neighboringTiles[ct].backfilled=!0)))}},Y.prototype.getTile=function(q){return this.getTileByID(q.key)},Y.prototype.getTileByID=function(q){return this._tiles[q]},Y.prototype._retainLoadedChildren=function(q,I,H,te){for(var le in this._tiles){var pe=this._tiles[le];if(!(te[le]||!pe.hasData()||pe.tileID.overscaledZ<=I||pe.tileID.overscaledZ>H)){for(var ke=pe.tileID;pe&&pe.tileID.overscaledZ>I+1;){var Fe=pe.tileID.scaledTo(pe.tileID.overscaledZ-1);(pe=this._tiles[Fe.key])&&pe.hasData()&&(ke=Fe)}for(var Ve=ke;Ve.overscaledZ>I;)if(q[(Ve=Ve.scaledTo(Ve.overscaledZ-1)).key]){te[ke.key]=ke;break}}}},Y.prototype.findLoadedParent=function(q,I){if(q.key in this._loadedParentTiles){var H=this._loadedParentTiles[q.key];return H&&H.tileID.overscaledZ>=I?H:null}for(var te=q.overscaledZ-1;te>=I;te--){var le=q.scaledTo(te),pe=this._getLoadedTile(le);if(pe)return pe}},Y.prototype._getLoadedTile=function(q){var I=this._tiles[q.key];return I&&I.hasData()?I:this._cache.getByKey(q.wrapped().key)},Y.prototype.updateCacheSize=function(q){var I=(Math.ceil(q.width/this._source.tileSize)+1)*(Math.ceil(q.height/this._source.tileSize)+1),H=Math.floor(5*I),te="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,H):H;this._cache.setMaxSize(te)},Y.prototype.handleWrapJump=function(q){var H=Math.round((q-(void 0===this._prevLng?q:this._prevLng))/360);if(this._prevLng=q,H){var te={};for(var le in this._tiles){var pe=this._tiles[le];pe.tileID=pe.tileID.unwrapTo(pe.tileID.wrap+H),te[pe.tileID.key]=pe}for(var ke in this._tiles=te,this._timers)clearTimeout(this._timers[ke]),delete this._timers[ke];for(var Fe in this._tiles)this._setTileReloadTimer(Fe,this._tiles[Fe])}},Y.prototype.update=function(q){var I=this;if(this.transform=q,this._sourceLoaded&&!this._paused){var H;this.updateCacheSize(q),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?H=q.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Jt){return new o.OverscaledTileID(Jt.canonical.z,Jt.wrap,Jt.canonical.z,Jt.canonical.x,Jt.canonical.y)}):(H=q.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(H=H.filter(function(Jt){return I._source.hasTile(Jt)}))):H=[];var te=q.coveringZoomLevel(this._source),le=Math.max(te-Y.maxOverzooming,this._source.minzoom),pe=Math.max(te+Y.maxUnderzooming,this._source.minzoom),ke=this._updateRetainedTiles(H,te);if(Ge(this._source.type)){for(var Fe={},Ve={},Xe=0,Je=Object.keys(ke);Xe<Je.length;Xe+=1){var ct=Je[Xe],vt=ke[ct],_t=this._tiles[ct];if(_t&&!(_t.fadeEndTime&&_t.fadeEndTime<=o.browser.now())){var It=this.findLoadedParent(vt,le);It&&(this._addTile(It.tileID),Fe[It.tileID.key]=It.tileID),Ve[ct]=vt}}for(var Ft in this._retainLoadedChildren(Ve,te,pe,ke),Fe)ke[Ft]||(this._coveredTiles[Ft]=!0,ke[Ft]=Fe[Ft])}for(var Ot in ke)this._tiles[Ot].clearFadeHold();for(var Yt=0,jt=o.keysDifference(this._tiles,ke);Yt<jt.length;Yt+=1){var ln=jt[Yt],tn=this._tiles[ln];tn.hasSymbolBuckets&&!tn.holdingForFade()?tn.setHoldDuration(this.map._fadeDuration):tn.hasSymbolBuckets&&!tn.symbolFadeFinished()||this._removeTile(ln)}this._updateLoadedParentTileCache()}},Y.prototype.releaseSymbolFadeTiles=function(){for(var q in this._tiles)this._tiles[q].holdingForFade()&&this._removeTile(q)},Y.prototype._updateRetainedTiles=function(q,I){for(var H={},te={},le=Math.max(I-Y.maxOverzooming,this._source.minzoom),pe=Math.max(I+Y.maxUnderzooming,this._source.minzoom),ke={},Fe=0,Ve=q;Fe<Ve.length;Fe+=1){var Xe=Ve[Fe],Je=this._addTile(Xe);H[Xe.key]=Xe,Je.hasData()||I<this._source.maxzoom&&(ke[Xe.key]=Xe)}this._retainLoadedChildren(ke,I,pe,H);for(var ct=0,vt=q;ct<vt.length;ct+=1){var _t=vt[ct],It=this._tiles[_t.key];if(!It.hasData()){if(I+1>this._source.maxzoom){var Ft=_t.children(this._source.maxzoom)[0],Ot=this.getTile(Ft);if(Ot&&Ot.hasData()){H[Ft.key]=Ft;continue}}else{var Yt=_t.children(this._source.maxzoom);if(H[Yt[0].key]&&H[Yt[1].key]&&H[Yt[2].key]&&H[Yt[3].key])continue}for(var jt=It.wasRequested(),ln=_t.overscaledZ-1;ln>=le;--ln){var tn=_t.scaledTo(ln);if(te[tn.key]||(te[tn.key]=!0,!(It=this.getTile(tn))&&jt&&(It=this._addTile(tn)),It&&(H[tn.key]=tn,jt=It.wasRequested(),It.hasData())))break}}}return H},Y.prototype._updateLoadedParentTileCache=function(){for(var q in this._loadedParentTiles={},this._tiles){for(var I=[],H=void 0,te=this._tiles[q].tileID;te.overscaledZ>0;){if(te.key in this._loadedParentTiles){H=this._loadedParentTiles[te.key];break}I.push(te.key);var le=te.scaledTo(te.overscaledZ-1);if(H=this._getLoadedTile(le))break;te=le}for(var pe=0,ke=I;pe<ke.length;pe+=1)this._loadedParentTiles[ke[pe]]=H}},Y.prototype._addTile=function(q){var I=this._tiles[q.key];if(I)return I;(I=this._cache.getAndRemove(q))&&(this._setTileReloadTimer(q.key,I),I.tileID=q,this._state.initializeTileState(I,this.map?this.map.painter:null),this._cacheTimers[q.key]&&(clearTimeout(this._cacheTimers[q.key]),delete this._cacheTimers[q.key],this._setTileReloadTimer(q.key,I)));var H=!!I;return H||(I=new o.Tile(q,this._source.tileSize*q.overscaleFactor()),this._loadTile(I,this._tileLoaded.bind(this,I,q.key,I.state))),I?(I.uses++,this._tiles[q.key]=I,H||this._source.fire(new o.Event("dataloading",{tile:I,coord:I.tileID,dataType:"source"})),I):null},Y.prototype._setTileReloadTimer=function(q,I){var H=this;q in this._timers&&(clearTimeout(this._timers[q]),delete this._timers[q]);var te=I.getExpiryTimeout();te&&(this._timers[q]=setTimeout(function(){H._reloadTile(q,"expired"),delete H._timers[q]},te))},Y.prototype._removeTile=function(q){var I=this._tiles[q];I&&(I.uses--,delete this._tiles[q],this._timers[q]&&(clearTimeout(this._timers[q]),delete this._timers[q]),I.uses>0||(I.hasData()&&"reloading"!==I.state?this._cache.add(I.tileID,I,I.getExpiryTimeout()):(I.aborted=!0,this._abortTile(I),this._unloadTile(I))))},Y.prototype.clearTiles=function(){for(var q in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(q);this._cache.reset()},Y.prototype.tilesIn=function(q,I,H){var te=this,le=[],pe=this.transform;if(!pe)return le;for(var ke=H?pe.getCameraQueryGeometry(q):q,Fe=q.map(function(ln){return pe.pointCoordinate(ln)}),Ve=ke.map(function(ln){return pe.pointCoordinate(ln)}),Xe=this.getIds(),Je=1/0,ct=1/0,vt=-1/0,_t=-1/0,It=0,Ft=Ve;It<Ft.length;It+=1){var Ot=Ft[It];Je=Math.min(Je,Ot.x),ct=Math.min(ct,Ot.y),vt=Math.max(vt,Ot.x),_t=Math.max(_t,Ot.y)}for(var Yt=function(ln){var tn=te._tiles[Xe[ln]];if(!tn.holdingForFade()){var Jt=tn.tileID,Mn=Math.pow(2,pe.zoom-tn.tileID.overscaledZ),Ln=I*tn.queryPadding*o.EXTENT/tn.tileSize/Mn,Un=[Jt.getTilePoint(new o.MercatorCoordinate(Je,ct)),Jt.getTilePoint(new o.MercatorCoordinate(vt,_t))];if(Un[0].x-Ln<o.EXTENT&&Un[0].y-Ln<o.EXTENT&&Un[1].x+Ln>=0&&Un[1].y+Ln>=0){var Xn=Fe.map(function(xr){return Jt.getTilePoint(xr)}),sr=Ve.map(function(xr){return Jt.getTilePoint(xr)});le.push({tile:tn,tileID:Jt,queryGeometry:Xn,cameraQueryGeometry:sr,scale:Mn})}}},jt=0;jt<Xe.length;jt++)Yt(jt);return le},Y.prototype.getVisibleCoordinates=function(q){for(var I=this,H=this.getRenderableIds(q).map(function(ke){return I._tiles[ke].tileID}),te=0,le=H;te<le.length;te+=1){var pe=le[te];pe.posMatrix=this.transform.calculatePosMatrix(pe.toUnwrapped())}return H},Y.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ge(this._source.type))for(var q in this._tiles){var I=this._tiles[q];if(void 0!==I.fadeEndTime&&I.fadeEndTime>=o.browser.now())return!0}return!1},Y.prototype.setFeatureState=function(q,I,H){this._state.updateState(q=q||"_geojsonTileLayer",I,H)},Y.prototype.removeFeatureState=function(q,I,H){this._state.removeFeatureState(q=q||"_geojsonTileLayer",I,H)},Y.prototype.getFeatureState=function(q,I){return this._state.getState(q=q||"_geojsonTileLayer",I)},Y.prototype.setDependencies=function(q,I,H){var te=this._tiles[q];te&&te.setDependencies(I,H)},Y.prototype.reloadTilesForDependencies=function(q,I){for(var H in this._tiles)this._tiles[H].hasDependency(q,I)&&this._reloadTile(H,"reloading");this._cache.filter(function(te){return!te.hasDependency(q,I)})},Y}(o.Evented);function ht(j,Y){var q=Math.abs(2*j.wrap)-+(j.wrap<0),I=Math.abs(2*Y.wrap)-+(Y.wrap<0);return j.overscaledZ-Y.overscaledZ||I-q||Y.canonical.y-j.canonical.y||Y.canonical.x-j.canonical.x}function Ge(j){return"raster"===j||"image"===j||"video"===j}function He(){return new o.window.Worker(pt.workerUrl)}gt.maxOverzooming=10,gt.maxUnderzooming=3;var ut="mapboxgl_preloaded_worker_pool",tt=function(){this.active={}};tt.prototype.acquire=function(j){if(!this.workers)for(this.workers=[];this.workers.length<tt.workerCount;)this.workers.push(new He);return this.active[j]=!0,this.workers.slice()},tt.prototype.release=function(j){delete this.active[j],0===this.numActive()&&(this.workers.forEach(function(Y){Y.terminate()}),this.workers=null)},tt.prototype.isPreloaded=function(){return!!this.active[ut]},tt.prototype.numActive=function(){return Object.keys(this.active).length};var xt,At=Math.floor(o.browser.hardwareConcurrency/2);function Mt(){return xt||(xt=new tt),xt}function yt(j,Y){var q={};for(var I in j)"ref"!==I&&(q[I]=j[I]);return o.refProperties.forEach(function(H){H in Y&&(q[H]=Y[H])}),q}function Pt(j){j=j.slice();for(var Y=Object.create(null),q=0;q<j.length;q++)Y[j[q].id]=j[q];for(var I=0;I<j.length;I++)"ref"in j[I]&&(j[I]=yt(j[I],Y[j[I].ref]));return j}tt.workerCount=Math.max(Math.min(At,6),1);var Ct={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Dt(j,Y,q){q.push({command:Ct.addSource,args:[j,Y[j]]})}function Ut(j,Y,q){Y.push({command:Ct.removeSource,args:[j]}),q[j]=!0}function Bt(j,Y,q,I){Ut(j,q,I),Dt(j,Y,q)}function qt(j,Y,q){var I;for(I in j[q])if(j[q].hasOwnProperty(I)&&"data"!==I&&!o.deepEqual(j[q][I],Y[q][I]))return!1;for(I in Y[q])if(Y[q].hasOwnProperty(I)&&"data"!==I&&!o.deepEqual(j[q][I],Y[q][I]))return!1;return!0}function an(j,Y,q,I,H,te){var le;for(le in Y=Y||{},j=j||{})j.hasOwnProperty(le)&&(o.deepEqual(j[le],Y[le])||q.push({command:te,args:[I,le,Y[le],H]}));for(le in Y)Y.hasOwnProperty(le)&&!j.hasOwnProperty(le)&&(o.deepEqual(j[le],Y[le])||q.push({command:te,args:[I,le,Y[le],H]}))}function mn(j){return j.id}function Qt(j,Y){return j[Y.id]=Y,j}var Kt=function(j,Y){this.reset(j,Y)};Kt.prototype.reset=function(j,Y){this.points=j||[],this._distances=[0];for(var q=1;q<this.points.length;q++)this._distances[q]=this._distances[q-1]+this.points[q].dist(this.points[q-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(Y||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Kt.prototype.lerp=function(j){if(1===this.points.length)return this.points[0];j=o.clamp(j,0,1);for(var Y=1,q=this._distances[Y],I=j*this.paddedLength+this.padding;q<I&&Y<this._distances.length;)q=this._distances[++Y];var H=Y-1,te=this._distances[H],le=q-te,pe=le>0?(I-te)/le:0;return this.points[H].mult(1-pe).add(this.points[Y].mult(pe))};var qn=function(j,Y,q){var I=this.boxCells=[],H=this.circleCells=[];this.xCellCount=Math.ceil(j/q),this.yCellCount=Math.ceil(Y/q);for(var te=0;te<this.xCellCount*this.yCellCount;te++)I.push([]),H.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=j,this.height=Y,this.xScale=this.xCellCount/j,this.yScale=this.yCellCount/Y,this.boxUid=0,this.circleUid=0};function Fn(j,Y,q,I,H){var te=o.create();return Y?(o.scale(te,te,[1/H,1/H,1]),q||o.rotateZ(te,te,I.angle)):o.multiply(te,I.labelPlaneMatrix,j),te}function Sn(j,Y,q,I,H){if(Y){var te=o.clone(j);return o.scale(te,te,[H,H,1]),q||o.rotateZ(te,te,-I.angle),te}return I.glCoordMatrix}function hn(j,Y){var q=[j.x,j.y,0,1];mr(q,q,Y);var I=q[3];return{point:new o.Point(q[0]/I,q[1]/I),signedDistanceFromCamera:I}}function wn(j,Y){return.5+j/Y*.5}function pn(j,Y){var q=j[0]/j[3],I=j[1]/j[3];return q>=-Y[0]&&q<=Y[0]&&I>=-Y[1]&&I<=Y[1]}function An(j,Y,q,I,H,te,le,pe){var ke=I?j.textSizeData:j.iconSizeData,Fe=o.evaluateSizeForZoom(ke,q.transform.zoom),Ve=[256/q.width*2+1,256/q.height*2+1],Xe=I?j.text.dynamicLayoutVertexArray:j.icon.dynamicLayoutVertexArray;Xe.clear();for(var Je=j.lineVertexArray,ct=I?j.text.placedSymbolArray:j.icon.placedSymbolArray,vt=q.transform.width/q.transform.height,_t=!1,It=0;It<ct.length;It++){var Ft=ct.get(It);if(Ft.hidden||Ft.writingMode===o.WritingMode.vertical&&!_t)$n(Ft.numGlyphs,Xe);else{_t=!1;var Ot=[Ft.anchorX,Ft.anchorY,0,1];if(o.transformMat4(Ot,Ot,Y),pn(Ot,Ve)){var jt=wn(q.transform.cameraToCenterDistance,Ot[3]),ln=o.evaluateSizeForFeature(ke,Fe,Ft),tn=le?ln/jt:ln*jt,Jt=new o.Point(Ft.anchorX,Ft.anchorY),Mn=hn(Jt,H).point,Ln={},Un=Vn(Ft,tn,!1,pe,Y,H,te,j.glyphOffsetArray,Je,Xe,Mn,Jt,Ln,vt);_t=Un.useVertical,(Un.notEnoughRoom||_t||Un.needsFlipping&&Vn(Ft,tn,!0,pe,Y,H,te,j.glyphOffsetArray,Je,Xe,Mn,Jt,Ln,vt).notEnoughRoom)&&$n(Ft.numGlyphs,Xe)}else $n(Ft.numGlyphs,Xe)}}I?j.text.dynamicLayoutVertexBuffer.updateData(Xe):j.icon.dynamicLayoutVertexBuffer.updateData(Xe)}function On(j,Y,q,I,H,te,le,pe,ke,Fe,Ve){var Xe=pe.glyphStartIndex+pe.numGlyphs,Je=pe.lineStartIndex,ct=pe.lineStartIndex+pe.lineLength,vt=Y.getoffsetX(pe.glyphStartIndex),_t=Y.getoffsetX(Xe-1),It=Nn(j*vt,q,I,H,te,le,pe.segment,Je,ct,ke,Fe,Ve);if(!It)return null;var Ft=Nn(j*_t,q,I,H,te,le,pe.segment,Je,ct,ke,Fe,Ve);return Ft?{first:It,last:Ft}:null}function Dn(j,Y,q,I){return j===o.WritingMode.horizontal&&Math.abs(q.y-Y.y)>Math.abs(q.x-Y.x)*I?{useVertical:!0}:(j===o.WritingMode.vertical?Y.y<q.y:Y.x>q.x)?{needsFlipping:!0}:null}function Vn(j,Y,q,I,H,te,le,pe,ke,Fe,Ve,Xe,Je,ct){var vt,_t=Y/24,It=j.lineOffsetX*_t,Ft=j.lineOffsetY*_t;if(j.numGlyphs>1){var Ot=j.glyphStartIndex+j.numGlyphs,Yt=j.lineStartIndex,jt=j.lineStartIndex+j.lineLength,ln=On(_t,pe,It,Ft,q,Ve,Xe,j,ke,te,Je);if(!ln)return{notEnoughRoom:!0};var tn=hn(ln.first.point,le).point,Jt=hn(ln.last.point,le).point;if(I&&!q){var Mn=Dn(j.writingMode,tn,Jt,ct);if(Mn)return Mn}vt=[ln.first];for(var Ln=j.glyphStartIndex+1;Ln<Ot-1;Ln++)vt.push(Nn(_t*pe.getoffsetX(Ln),It,Ft,q,Ve,Xe,j.segment,Yt,jt,ke,te,Je));vt.push(ln.last)}else{if(I&&!q){var Un=hn(Xe,H).point,Xn=j.lineStartIndex+j.segment+1,sr=new o.Point(ke.getx(Xn),ke.gety(Xn)),xr=hn(sr,H),Mr=xr.signedDistanceFromCamera>0?xr.point:Gn(Xe,sr,Un,1,H),hr=Dn(j.writingMode,Un,Mr,ct);if(hr)return hr}var Cr=Nn(_t*pe.getoffsetX(j.glyphStartIndex),It,Ft,q,Ve,Xe,j.segment,j.lineStartIndex,j.lineStartIndex+j.lineLength,ke,te,Je);if(!Cr)return{notEnoughRoom:!0};vt=[Cr]}for(var Nr=0,ei=vt;Nr<ei.length;Nr+=1){var _r=ei[Nr];o.addDynamicAttributes(Fe,_r.point,_r.angle)}return{}}function Gn(j,Y,q,I,H){var te=hn(j.add(j.sub(Y)._unit()),H).point,le=q.sub(te);return q.add(le._mult(I/le.mag()))}function Nn(j,Y,q,I,H,te,le,pe,ke,Fe,Ve,Xe){var Je=I?j-Y:j+Y,ct=Je>0?1:-1,vt=0;I&&(ct*=-1,vt=Math.PI),ct<0&&(vt+=Math.PI);for(var _t=ct>0?pe+le:pe+le+1,It=H,Ft=H,Ot=0,Yt=0,jt=Math.abs(Je),ln=[];Ot+Yt<=jt;){if((_t+=ct)<pe||_t>=ke)return null;if(Ft=It,ln.push(It),void 0===(It=Xe[_t])){var tn=new o.Point(Fe.getx(_t),Fe.gety(_t)),Jt=hn(tn,Ve);if(Jt.signedDistanceFromCamera>0)It=Xe[_t]=Jt.point;else{var Mn=_t-ct;It=Gn(0===Ot?te:new o.Point(Fe.getx(Mn),Fe.gety(Mn)),tn,Ft,jt-Ot+1,Ve)}}Ot+=Yt,Yt=Ft.dist(It)}var Ln=(jt-Ot)/Yt,Un=It.sub(Ft),Xn=Un.mult(Ln)._add(Ft);Xn._add(Un._unit()._perp()._mult(q*ct));var sr=vt+Math.atan2(It.y-Ft.y,It.x-Ft.x);return ln.push(Xn),{point:Xn,angle:sr,path:ln}}qn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},qn.prototype.insert=function(j,Y,q,I,H){this._forEachCell(Y,q,I,H,this._insertBoxCell,this.boxUid++),this.boxKeys.push(j),this.bboxes.push(Y),this.bboxes.push(q),this.bboxes.push(I),this.bboxes.push(H)},qn.prototype.insertCircle=function(j,Y,q,I){this._forEachCell(Y-I,q-I,Y+I,q+I,this._insertCircleCell,this.circleUid++),this.circleKeys.push(j),this.circles.push(Y),this.circles.push(q),this.circles.push(I)},qn.prototype._insertBoxCell=function(j,Y,q,I,H,te){this.boxCells[H].push(te)},qn.prototype._insertCircleCell=function(j,Y,q,I,H,te){this.circleCells[H].push(te)},qn.prototype._query=function(j,Y,q,I,H,te){if(q<0||j>this.width||I<0||Y>this.height)return!H&&[];var le=[];if(j<=0&&Y<=0&&this.width<=q&&this.height<=I){if(H)return!0;for(var pe=0;pe<this.boxKeys.length;pe++)le.push({key:this.boxKeys[pe],x1:this.bboxes[4*pe],y1:this.bboxes[4*pe+1],x2:this.bboxes[4*pe+2],y2:this.bboxes[4*pe+3]});for(var ke=0;ke<this.circleKeys.length;ke++){var Fe=this.circles[3*ke],Ve=this.circles[3*ke+1],Xe=this.circles[3*ke+2];le.push({key:this.circleKeys[ke],x1:Fe-Xe,y1:Ve-Xe,x2:Fe+Xe,y2:Ve+Xe})}return te?le.filter(te):le}return this._forEachCell(j,Y,q,I,this._queryCell,le,{hitTest:H,seenUids:{box:{},circle:{}}},te),H?le.length>0:le},qn.prototype._queryCircle=function(j,Y,q,I,H){var te=j-q,le=j+q,pe=Y-q,ke=Y+q;if(le<0||te>this.width||ke<0||pe>this.height)return!I&&[];var Fe=[];return this._forEachCell(te,pe,le,ke,this._queryCellCircle,Fe,{hitTest:I,circle:{x:j,y:Y,radius:q},seenUids:{box:{},circle:{}}},H),I?Fe.length>0:Fe},qn.prototype.query=function(j,Y,q,I,H){return this._query(j,Y,q,I,!1,H)},qn.prototype.hitTest=function(j,Y,q,I,H){return this._query(j,Y,q,I,!0,H)},qn.prototype.hitTestCircle=function(j,Y,q,I){return this._queryCircle(j,Y,q,!0,I)},qn.prototype._queryCell=function(j,Y,q,I,H,te,le,pe){var ke=le.seenUids,Fe=this.boxCells[H];if(null!==Fe)for(var Ve=this.bboxes,Xe=0,Je=Fe;Xe<Je.length;Xe+=1){var ct=Je[Xe];if(!ke.box[ct]){ke.box[ct]=!0;var vt=4*ct;if(j<=Ve[vt+2]&&Y<=Ve[vt+3]&&q>=Ve[vt+0]&&I>=Ve[vt+1]&&(!pe||pe(this.boxKeys[ct]))){if(le.hitTest)return te.push(!0),!0;te.push({key:this.boxKeys[ct],x1:Ve[vt],y1:Ve[vt+1],x2:Ve[vt+2],y2:Ve[vt+3]})}}}var _t=this.circleCells[H];if(null!==_t)for(var It=this.circles,Ft=0,Ot=_t;Ft<Ot.length;Ft+=1){var Yt=Ot[Ft];if(!ke.circle[Yt]){ke.circle[Yt]=!0;var jt=3*Yt;if(this._circleAndRectCollide(It[jt],It[jt+1],It[jt+2],j,Y,q,I)&&(!pe||pe(this.circleKeys[Yt]))){if(le.hitTest)return te.push(!0),!0;var ln=It[jt],tn=It[jt+1],Jt=It[jt+2];te.push({key:this.circleKeys[Yt],x1:ln-Jt,y1:tn-Jt,x2:ln+Jt,y2:tn+Jt})}}}},qn.prototype._queryCellCircle=function(j,Y,q,I,H,te,le,pe){var ke=le.circle,Fe=le.seenUids,Ve=this.boxCells[H];if(null!==Ve)for(var Xe=this.bboxes,Je=0,ct=Ve;Je<ct.length;Je+=1){var vt=ct[Je];if(!Fe.box[vt]){Fe.box[vt]=!0;var _t=4*vt;if(this._circleAndRectCollide(ke.x,ke.y,ke.radius,Xe[_t+0],Xe[_t+1],Xe[_t+2],Xe[_t+3])&&(!pe||pe(this.boxKeys[vt])))return te.push(!0),!0}}var It=this.circleCells[H];if(null!==It)for(var Ft=this.circles,Ot=0,Yt=It;Ot<Yt.length;Ot+=1){var jt=Yt[Ot];if(!Fe.circle[jt]){Fe.circle[jt]=!0;var ln=3*jt;if(this._circlesCollide(Ft[ln],Ft[ln+1],Ft[ln+2],ke.x,ke.y,ke.radius)&&(!pe||pe(this.circleKeys[jt])))return te.push(!0),!0}}},qn.prototype._forEachCell=function(j,Y,q,I,H,te,le,pe){for(var ke=this._convertToXCellCoord(j),Fe=this._convertToYCellCoord(Y),Ve=this._convertToXCellCoord(q),Xe=this._convertToYCellCoord(I),Je=ke;Je<=Ve;Je++)for(var ct=Fe;ct<=Xe;ct++)if(H.call(this,j,Y,q,I,this.xCellCount*ct+Je,te,le,pe))return},qn.prototype._convertToXCellCoord=function(j){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(j*this.xScale)))},qn.prototype._convertToYCellCoord=function(j){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(j*this.yScale)))},qn.prototype._circlesCollide=function(j,Y,q,I,H,te){var le=I-j,pe=H-Y,ke=q+te;return ke*ke>le*le+pe*pe},qn.prototype._circleAndRectCollide=function(j,Y,q,I,H,te,le){var pe=(te-I)/2,ke=Math.abs(j-(I+pe));if(ke>pe+q)return!1;var Fe=(le-H)/2,Ve=Math.abs(Y-(H+Fe));if(Ve>Fe+q)return!1;if(ke<=pe||Ve<=Fe)return!0;var Xe=ke-pe,Je=Ve-Fe;return Xe*Xe+Je*Je<=q*q};var ir=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function $n(j,Y){for(var q=0;q<j;q++){var I=Y.length;Y.resize(I+4),Y.float32.set(ir,3*I)}}function mr(j,Y,q){var I=Y[0],H=Y[1];return j[0]=q[0]*I+q[4]*H+q[12],j[1]=q[1]*I+q[5]*H+q[13],j[3]=q[3]*I+q[7]*H+q[15],j}var lr=100,vr=function(j,Y,q){void 0===Y&&(Y=new qn(j.width+200,j.height+200,25)),void 0===q&&(q=new qn(j.width+200,j.height+200,25)),this.transform=j,this.grid=Y,this.ignoredGrid=q,this.pitchfactor=Math.cos(j._pitch)*j.cameraToCenterDistance,this.screenRightBoundary=j.width+lr,this.screenBottomBoundary=j.height+lr,this.gridRightBoundary=j.width+200,this.gridBottomBoundary=j.height+200};function or(j,Y,q){return Y*(o.EXTENT/(j.tileSize*Math.pow(2,q-j.tileID.overscaledZ)))}vr.prototype.placeCollisionBox=function(j,Y,q,I,H){var te=this.projectAndGetPerspectiveRatio(I,j.anchorPointX,j.anchorPointY),le=q*te.perspectiveRatio,pe=j.x1*le+te.point.x,ke=j.y1*le+te.point.y,Fe=j.x2*le+te.point.x,Ve=j.y2*le+te.point.y;return!this.isInsideGrid(pe,ke,Fe,Ve)||!Y&&this.grid.hitTest(pe,ke,Fe,Ve,H)?{box:[],offscreen:!1}:{box:[pe,ke,Fe,Ve],offscreen:this.isOffscreen(pe,ke,Fe,Ve)}},vr.prototype.placeCollisionCircles=function(j,Y,q,I,H,te,le,pe,ke,Fe,Ve,Xe,Je){var ct=[],vt=new o.Point(Y.anchorX,Y.anchorY),_t=hn(vt,te),It=wn(this.transform.cameraToCenterDistance,_t.signedDistanceFromCamera),Ft=(Fe?H/It:H*It)/o.ONE_EM,Ot=hn(vt,le).point,Yt=On(Ft,I,Y.lineOffsetX*Ft,Y.lineOffsetY*Ft,!1,Ot,vt,Y,q,le,{}),jt=!1,ln=!1,tn=!0;if(Yt){for(var Jt=.5*Xe*It+Je,Mn=new o.Point(-100,-100),Ln=new o.Point(this.screenRightBoundary,this.screenBottomBoundary),Un=new Kt,Xn=Yt.first,sr=Yt.last,xr=[],Mr=Xn.path.length-1;Mr>=1;Mr--)xr.push(Xn.path[Mr]);for(var hr=1;hr<sr.path.length;hr++)xr.push(sr.path[hr]);var Cr=2.5*Jt;if(pe){var Nr=xr.map(function(Pi){return hn(Pi,pe)});xr=Nr.some(function(Pi){return Pi.signedDistanceFromCamera<=0})?[]:Nr.map(function(Pi){return Pi.point})}var ei=[];if(xr.length>0){for(var _r=xr[0].clone(),Sr=xr[0].clone(),Hr=1;Hr<xr.length;Hr++)_r.x=Math.min(_r.x,xr[Hr].x),_r.y=Math.min(_r.y,xr[Hr].y),Sr.x=Math.max(Sr.x,xr[Hr].x),Sr.y=Math.max(Sr.y,xr[Hr].y);ei=_r.x>=Mn.x&&Sr.x<=Ln.x&&_r.y>=Mn.y&&Sr.y<=Ln.y?[xr]:Sr.x<Mn.x||_r.x>Ln.x||Sr.y<Mn.y||_r.y>Ln.y?[]:o.clipLine([xr],Mn.x,Mn.y,Ln.x,Ln.y)}for(var Pr=0,Kr=ei;Pr<Kr.length;Pr+=1){var di;Un.reset(Kr[Pr],.25*Jt),di=Un.length<=.5*Jt?1:Math.ceil(Un.paddedLength/Cr)+1;for(var mi=0;mi<di;mi++){var Ti=mi/Math.max(di-1,1),Li=Un.lerp(Ti),pa=Li.x+lr,Pa=Li.y+lr;ct.push(pa,Pa,Jt,0);var to=pa-Jt,Ja=Pa-Jt,ya=pa+Jt,Ki=Pa+Jt;if(tn=tn&&this.isOffscreen(to,Ja,ya,Ki),ln=ln||this.isInsideGrid(to,Ja,ya,Ki),!j&&this.grid.hitTestCircle(pa,Pa,Jt,Ve)&&(jt=!0,!ke))return{circles:[],offscreen:!1,collisionDetected:jt}}}}return{circles:!ke&&jt||!ln?[]:ct,offscreen:tn,collisionDetected:jt}},vr.prototype.queryRenderedSymbols=function(j){if(0===j.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var Y=[],q=1/0,I=1/0,H=-1/0,te=-1/0,le=0,pe=j;le<pe.length;le+=1){var ke=pe[le],Fe=new o.Point(ke.x+lr,ke.y+lr);q=Math.min(q,Fe.x),I=Math.min(I,Fe.y),H=Math.max(H,Fe.x),te=Math.max(te,Fe.y),Y.push(Fe)}for(var Ve={},Xe={},Je=0,ct=this.grid.query(q,I,H,te).concat(this.ignoredGrid.query(q,I,H,te));Je<ct.length;Je+=1){var vt=ct[Je],_t=vt.key;if(void 0===Ve[_t.bucketInstanceId]&&(Ve[_t.bucketInstanceId]={}),!Ve[_t.bucketInstanceId][_t.featureIndex]){var It=[new o.Point(vt.x1,vt.y1),new o.Point(vt.x2,vt.y1),new o.Point(vt.x2,vt.y2),new o.Point(vt.x1,vt.y2)];o.polygonIntersectsPolygon(Y,It)&&(Ve[_t.bucketInstanceId][_t.featureIndex]=!0,void 0===Xe[_t.bucketInstanceId]&&(Xe[_t.bucketInstanceId]=[]),Xe[_t.bucketInstanceId].push(_t.featureIndex))}}return Xe},vr.prototype.insertCollisionBox=function(j,Y,q,I,H){(Y?this.ignoredGrid:this.grid).insert({bucketInstanceId:q,featureIndex:I,collisionGroupID:H},j[0],j[1],j[2],j[3])},vr.prototype.insertCollisionCircles=function(j,Y,q,I,H){for(var te=Y?this.ignoredGrid:this.grid,le={bucketInstanceId:q,featureIndex:I,collisionGroupID:H},pe=0;pe<j.length;pe+=4)te.insertCircle(le,j[pe],j[pe+1],j[pe+2])},vr.prototype.projectAndGetPerspectiveRatio=function(j,Y,q){var I=[Y,q,0,1];return mr(I,I,j),{point:new o.Point((I[0]/I[3]+1)/2*this.transform.width+lr,(-I[1]/I[3]+1)/2*this.transform.height+lr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/I[3]*.5}},vr.prototype.isOffscreen=function(j,Y,q,I){return q<lr||j>=this.screenRightBoundary||I<lr||Y>this.screenBottomBoundary},vr.prototype.isInsideGrid=function(j,Y,q,I){return q>=0&&j<this.gridRightBoundary&&I>=0&&Y<this.gridBottomBoundary},vr.prototype.getViewportMatrix=function(){var j=o.identity([]);return o.translate(j,j,[-100,-100,0]),j};var Or=function(j,Y,q,I){this.opacity=j?Math.max(0,Math.min(1,j.opacity+(j.placed?Y:-Y))):I&&q?1:0,this.placed=q};Or.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var fn=function(j,Y,q,I,H){this.text=new Or(j?j.text:null,Y,q,H),this.icon=new Or(j?j.icon:null,Y,I,H)};fn.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var gn=function(j,Y,q){this.text=j,this.icon=Y,this.skipFade=q},Hn=function(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]},En=function(j,Y,q,I,H){this.bucketInstanceId=j,this.featureIndex=Y,this.sourceLayerIndex=q,this.bucketIndex=I,this.tileID=H},Zn=function(j){this.crossSourceCollisions=j,this.maxGroupID=0,this.collisionGroups={}};function Kn(j,Y,q,I,H){var te=o.getAnchorAlignment(j),le=-(te.horizontalAlign-.5)*Y,pe=-(te.verticalAlign-.5)*q,ke=o.evaluateVariableOffset(j,I);return new o.Point(le+ke[0]*H,pe+ke[1]*H)}function tr(j,Y,q,I,H,te){var le=j.x1,pe=j.x2,ke=j.y1,Fe=j.y2,Ve=j.anchorPointX,Xe=j.anchorPointY,Je=new o.Point(Y,q);return I&&Je._rotate(H?te:-te),{x1:le+Je.x,y1:ke+Je.y,x2:pe+Je.x,y2:Fe+Je.y,anchorPointX:Ve,anchorPointY:Xe}}Zn.prototype.get=function(j){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[j]){var Y=++this.maxGroupID;this.collisionGroups[j]={ID:Y,predicate:function(q){return q.collisionGroupID===Y}}}return this.collisionGroups[j]};var fr=function(j,Y,q,I){this.transform=j.clone(),this.collisionIndex=new vr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=Y,this.retainedQueryData={},this.collisionGroups=new Zn(q),this.collisionCircleArrays={},this.prevPlacement=I,I&&(I.prevPlacement=void 0),this.placedOrientations={}};function Dr(j,Y,q,I,H){j.emplaceBack(Y?1:0,q?1:0,I||0,H||0),j.emplaceBack(Y?1:0,q?1:0,I||0,H||0),j.emplaceBack(Y?1:0,q?1:0,I||0,H||0),j.emplaceBack(Y?1:0,q?1:0,I||0,H||0)}fr.prototype.getBucketParts=function(j,Y,q,I){var H=q.getBucket(Y),te=q.latestFeatureIndex;if(H&&te&&Y.id===H.layerIds[0]){var le=q.collisionBoxArray,pe=H.layers[0].layout,ke=Math.pow(2,this.transform.zoom-q.tileID.overscaledZ),Fe=q.tileSize/o.EXTENT,Ve=this.transform.calculatePosMatrix(q.tileID.toUnwrapped()),Xe="map"===pe.get("text-pitch-alignment"),Je="map"===pe.get("text-rotation-alignment"),ct=or(q,1,this.transform.zoom),vt=Fn(Ve,Xe,Je,this.transform,ct),_t=null;if(Xe){var It=Sn(Ve,Xe,Je,this.transform,ct);_t=o.multiply([],this.transform.labelPlaneMatrix,It)}this.retainedQueryData[H.bucketInstanceId]=new En(H.bucketInstanceId,te,H.sourceLayerIndex,H.index,q.tileID);var Ft={bucket:H,layout:pe,posMatrix:Ve,textLabelPlaneMatrix:vt,labelToScreenMatrix:_t,scale:ke,textPixelRatio:Fe,holdingForFade:q.holdingForFade(),collisionBoxArray:le,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(H.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(H.sourceID)};if(I)for(var Ot=0,Yt=H.sortKeyRanges;Ot<Yt.length;Ot+=1){var jt=Yt[Ot];j.push({sortKey:jt.sortKey,symbolInstanceStart:jt.symbolInstanceStart,symbolInstanceEnd:jt.symbolInstanceEnd,parameters:Ft})}else j.push({symbolInstanceStart:0,symbolInstanceEnd:H.symbolInstances.length,parameters:Ft})}},fr.prototype.attemptAnchorPlacement=function(j,Y,q,I,H,te,le,pe,ke,Fe,Ve,Xe,Je,ct,vt){var _t,It=[Xe.textOffset0,Xe.textOffset1],Ft=Kn(j,q,I,It,H),Ot=this.collisionIndex.placeCollisionBox(tr(Y,Ft.x,Ft.y,te,le,this.transform.angle),Ve,pe,ke,Fe.predicate);if(!vt||0!==this.collisionIndex.placeCollisionBox(tr(vt,Ft.x,Ft.y,te,le,this.transform.angle),Ve,pe,ke,Fe.predicate).box.length)return Ot.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Xe.crossTileID]&&this.prevPlacement.placements[Xe.crossTileID]&&this.prevPlacement.placements[Xe.crossTileID].text&&(_t=this.prevPlacement.variableOffsets[Xe.crossTileID].anchor),this.variableOffsets[Xe.crossTileID]={textOffset:It,width:q,height:I,anchor:j,textBoxScale:H,prevAnchor:_t},this.markUsedJustification(Je,j,Xe,ct),Je.allowVerticalPlacement&&(this.markUsedOrientation(Je,ct,Xe),this.placedOrientations[Xe.crossTileID]=ct),{shift:Ft,placedGlyphBoxes:Ot}):void 0},fr.prototype.placeLayerBucketPart=function(j,Y,q){var I=this,H=j.parameters,te=H.bucket,le=H.layout,pe=H.posMatrix,ke=H.textLabelPlaneMatrix,Fe=H.labelToScreenMatrix,Ve=H.textPixelRatio,Xe=H.holdingForFade,Je=H.collisionBoxArray,ct=H.partiallyEvaluatedTextSize,vt=H.collisionGroup,_t=le.get("text-optional"),It=le.get("icon-optional"),Ft=le.get("text-allow-overlap"),Ot=le.get("icon-allow-overlap"),Yt="map"===le.get("text-rotation-alignment"),jt="map"===le.get("text-pitch-alignment"),ln="none"!==le.get("icon-text-fit"),tn="viewport-y"===le.get("symbol-z-order"),Jt=Ft&&(Ot||!te.hasIconData()||It),Mn=Ot&&(Ft||!te.hasTextData()||_t);!te.collisionArrays&&Je&&te.deserializeCollisionBoxes(Je);var Ln=function(hr,Cr){if(!Y[hr.crossTileID])if(Xe)I.placements[hr.crossTileID]=new gn(!1,!1,!1);else{var Nr,ei=!1,_r=!1,Sr=!0,Hr=null,Pr={box:null,offscreen:null},Kr={box:null,offscreen:null},ii=null,di=null,mi=0,Ti=0,Li=0;Cr.textFeatureIndex?mi=Cr.textFeatureIndex:hr.useRuntimeCollisionCircles&&(mi=hr.featureIndex),Cr.verticalTextFeatureIndex&&(Ti=Cr.verticalTextFeatureIndex);var pa=Cr.textBox;if(pa){var Pa=function(xa){var Ro=o.WritingMode.horizontal;if(te.allowVerticalPlacement&&!xa&&I.prevPlacement){var Yi=I.prevPlacement.placedOrientations[hr.crossTileID];Yi&&(I.placedOrientations[hr.crossTileID]=Yi,I.markUsedOrientation(te,Ro=Yi,hr))}return Ro},to=function(xa,Ro){if(te.allowVerticalPlacement&&hr.numVerticalGlyphVertices>0&&Cr.verticalTextBox)for(var Yi=0,Kl=te.writingModes;Yi<Kl.length&&(Kl[Yi]===o.WritingMode.vertical?(Pr=Ro(),Kr=Pr):Pr=xa(),!(Pr&&Pr.box&&Pr.box.length));Yi+=1);else Pr=xa()};if(le.get("text-variable-anchor")){var Ja=le.get("text-variable-anchor");if(I.prevPlacement&&I.prevPlacement.variableOffsets[hr.crossTileID]){var ya=I.prevPlacement.variableOffsets[hr.crossTileID];Ja.indexOf(ya.anchor)>0&&(Ja=Ja.filter(function(xa){return xa!==ya.anchor})).unshift(ya.anchor)}var Ki=function(xa,Ro,Yi){for(var Kl=xa.x2-xa.x1,pc=xa.y2-xa.y1,Jl=hr.textBoxScale,gu=ln&&!Ot?Ro:null,$l={box:[],offscreen:!1},Su=Ft?2*Ja.length:Ja.length,Ql=0;Ql<Su;++Ql){var pl=I.attemptAnchorPlacement(Ja[Ql%Ja.length],xa,Kl,pc,Jl,Yt,jt,Ve,pe,vt,Ql>=Ja.length,hr,te,Yi,gu);if(pl&&($l=pl.placedGlyphBoxes)&&$l.box&&$l.box.length){ei=!0,Hr=pl.shift;break}}return $l};to(function(){return Ki(pa,Cr.iconBox,o.WritingMode.horizontal)},function(){var xa=Cr.verticalTextBox;return te.allowVerticalPlacement&&!(Pr&&Pr.box&&Pr.box.length)&&hr.numVerticalGlyphVertices>0&&xa?Ki(xa,Cr.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null}}),Pr&&(ei=Pr.box,Sr=Pr.offscreen);var Pi=Pa(Pr&&Pr.box);if(!ei&&I.prevPlacement){var ga=I.prevPlacement.variableOffsets[hr.crossTileID];ga&&(I.variableOffsets[hr.crossTileID]=ga,I.markUsedJustification(te,ga.anchor,hr,Pi))}}else{var ia=function(xa,Ro){var Yi=I.collisionIndex.placeCollisionBox(xa,Ft,Ve,pe,vt.predicate);return Yi&&Yi.box&&Yi.box.length&&(I.markUsedOrientation(te,Ro,hr),I.placedOrientations[hr.crossTileID]=Ro),Yi};to(function(){return ia(pa,o.WritingMode.horizontal)},function(){var xa=Cr.verticalTextBox;return te.allowVerticalPlacement&&hr.numVerticalGlyphVertices>0&&xa?ia(xa,o.WritingMode.vertical):{box:null,offscreen:null}}),Pa(Pr&&Pr.box&&Pr.box.length)}}if(ei=(Nr=Pr)&&Nr.box&&Nr.box.length>0,Sr=Nr&&Nr.offscreen,hr.useRuntimeCollisionCircles){var bi=te.text.placedSymbolArray.get(hr.centerJustifiedTextSymbolIndex),Ma=o.evaluateSizeForFeature(te.textSizeData,ct,bi),ma=le.get("text-padding");ii=I.collisionIndex.placeCollisionCircles(Ft,bi,te.lineVertexArray,te.glyphOffsetArray,Ma,pe,ke,Fe,q,jt,vt.predicate,hr.collisionCircleDiameter,ma),ei=Ft||ii.circles.length>0&&!ii.collisionDetected,Sr=Sr&&ii.offscreen}if(Cr.iconFeatureIndex&&(Li=Cr.iconFeatureIndex),Cr.iconBox){var $s=function(xa){var Ro=ln&&Hr?tr(xa,Hr.x,Hr.y,Yt,jt,I.transform.angle):xa;return I.collisionIndex.placeCollisionBox(Ro,Ot,Ve,pe,vt.predicate)};_r=Kr&&Kr.box&&Kr.box.length&&Cr.verticalIconBox?(di=$s(Cr.verticalIconBox)).box.length>0:(di=$s(Cr.iconBox)).box.length>0,Sr=Sr&&di.offscreen}var hc=_t||0===hr.numHorizontalGlyphVertices&&0===hr.numVerticalGlyphVertices,Oi=It||0===hr.numIconVertices;if(hc||Oi?Oi?hc||(_r=_r&&ei):ei=_r&&ei:_r=ei=_r&&ei,ei&&Nr&&Nr.box&&I.collisionIndex.insertCollisionBox(Nr.box,le.get("text-ignore-placement"),te.bucketInstanceId,Kr&&Kr.box&&Ti?Ti:mi,vt.ID),_r&&di&&I.collisionIndex.insertCollisionBox(di.box,le.get("icon-ignore-placement"),te.bucketInstanceId,Li,vt.ID),ii&&(ei&&I.collisionIndex.insertCollisionCircles(ii.circles,le.get("text-ignore-placement"),te.bucketInstanceId,mi,vt.ID),q)){var fc=te.bucketInstanceId,dc=I.collisionCircleArrays[fc];void 0===dc&&(dc=I.collisionCircleArrays[fc]=new Hn);for(var Bs=0;Bs<ii.circles.length;Bs+=4)dc.circles.push(ii.circles[Bs+0]),dc.circles.push(ii.circles[Bs+1]),dc.circles.push(ii.circles[Bs+2]),dc.circles.push(ii.collisionDetected?1:0)}I.placements[hr.crossTileID]=new gn(ei||Jt,_r||Mn,Sr||te.justReloaded),Y[hr.crossTileID]=!0}};if(tn)for(var Un=te.getSortedSymbolIndexes(this.transform.angle),Xn=Un.length-1;Xn>=0;--Xn){var sr=Un[Xn];Ln(te.symbolInstances.get(sr),te.collisionArrays[sr])}else for(var xr=j.symbolInstanceStart;xr<j.symbolInstanceEnd;xr++)Ln(te.symbolInstances.get(xr),te.collisionArrays[xr]);if(q&&te.bucketInstanceId in this.collisionCircleArrays){var Mr=this.collisionCircleArrays[te.bucketInstanceId];o.invert(Mr.invProjMatrix,pe),Mr.viewportMatrix=this.collisionIndex.getViewportMatrix()}te.justReloaded=!1},fr.prototype.markUsedJustification=function(j,Y,q,I){var H;H=I===o.WritingMode.vertical?q.verticalPlacedTextSymbolIndex:{left:q.leftJustifiedTextSymbolIndex,center:q.centerJustifiedTextSymbolIndex,right:q.rightJustifiedTextSymbolIndex}[o.getAnchorJustification(Y)];for(var le=0,pe=[q.leftJustifiedTextSymbolIndex,q.centerJustifiedTextSymbolIndex,q.rightJustifiedTextSymbolIndex,q.verticalPlacedTextSymbolIndex];le<pe.length;le+=1){var ke=pe[le];ke>=0&&(j.text.placedSymbolArray.get(ke).crossTileID=H>=0&&ke!==H?0:q.crossTileID)}},fr.prototype.markUsedOrientation=function(j,Y,q){for(var I=Y===o.WritingMode.horizontal||Y===o.WritingMode.horizontalOnly?Y:0,H=Y===o.WritingMode.vertical?Y:0,te=0,le=[q.leftJustifiedTextSymbolIndex,q.centerJustifiedTextSymbolIndex,q.rightJustifiedTextSymbolIndex];te<le.length;te+=1)j.text.placedSymbolArray.get(le[te]).placedOrientation=I;q.verticalPlacedTextSymbolIndex&&(j.text.placedSymbolArray.get(q.verticalPlacedTextSymbolIndex).placedOrientation=H)},fr.prototype.commit=function(j){this.commitTime=j,this.zoomAtLastRecencyCheck=this.transform.zoom;var Y=this.prevPlacement,q=!1;this.prevZoomAdjustment=Y?Y.zoomAdjustment(this.transform.zoom):0;var I=Y?Y.symbolFadeChange(j):1,H=Y?Y.opacities:{},te=Y?Y.variableOffsets:{},le=Y?Y.placedOrientations:{};for(var pe in this.placements){var ke=this.placements[pe],Fe=H[pe];Fe?(this.opacities[pe]=new fn(Fe,I,ke.text,ke.icon),q=q||ke.text!==Fe.text.placed||ke.icon!==Fe.icon.placed):(this.opacities[pe]=new fn(null,I,ke.text,ke.icon,ke.skipFade),q=q||ke.text||ke.icon)}for(var Ve in H){var Xe=H[Ve];if(!this.opacities[Ve]){var Je=new fn(Xe,I,!1,!1);Je.isHidden()||(this.opacities[Ve]=Je,q=q||Xe.text.placed||Xe.icon.placed)}}for(var ct in te)this.variableOffsets[ct]||!this.opacities[ct]||this.opacities[ct].isHidden()||(this.variableOffsets[ct]=te[ct]);for(var vt in le)this.placedOrientations[vt]||!this.opacities[vt]||this.opacities[vt].isHidden()||(this.placedOrientations[vt]=le[vt]);q?this.lastPlacementChangeTime=j:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=Y?Y.lastPlacementChangeTime:j)},fr.prototype.updateLayerOpacities=function(j,Y){for(var q={},I=0,H=Y;I<H.length;I+=1){var te=H[I],le=te.getBucket(j);le&&te.latestFeatureIndex&&j.id===le.layerIds[0]&&this.updateBucketOpacities(le,q,te.collisionBoxArray)}},fr.prototype.updateBucketOpacities=function(j,Y,q){var I=this;j.hasTextData()&&j.text.opacityVertexArray.clear(),j.hasIconData()&&j.icon.opacityVertexArray.clear(),j.hasIconCollisionBoxData()&&j.iconCollisionBox.collisionVertexArray.clear(),j.hasTextCollisionBoxData()&&j.textCollisionBox.collisionVertexArray.clear();var H=j.layers[0].layout,te=new fn(null,0,!1,!1,!0),le=H.get("text-allow-overlap"),pe=H.get("icon-allow-overlap"),ke=H.get("text-variable-anchor"),Fe="map"===H.get("text-rotation-alignment"),Ve="map"===H.get("text-pitch-alignment"),Xe="none"!==H.get("icon-text-fit"),Je=new fn(null,0,le&&(pe||!j.hasIconData()||H.get("icon-optional")),pe&&(le||!j.hasTextData()||H.get("text-optional")),!0);!j.collisionArrays&&q&&(j.hasIconCollisionBoxData()||j.hasTextCollisionBoxData())&&j.deserializeCollisionBoxes(q);for(var ct=function(Ft,Ot,Yt){for(var jt=0;jt<Ot/4;jt++)Ft.opacityVertexArray.emplaceBack(Yt)},vt=function(Ft){var Ot=j.symbolInstances.get(Ft),Yt=Ot.numHorizontalGlyphVertices,jt=Ot.numVerticalGlyphVertices,ln=Ot.crossTileID,Jt=I.opacities[ln];Y[ln]?Jt=te:Jt||(I.opacities[ln]=Jt=Je),Y[ln]=!0;var Ln=Ot.numIconVertices>0,Un=I.placedOrientations[Ot.crossTileID],Xn=Un===o.WritingMode.vertical,sr=Un===o.WritingMode.horizontal||Un===o.WritingMode.horizontalOnly;if(Yt>0||jt>0){var xr=Pn(Jt.text);ct(j.text,Yt,Xn?yn:xr),ct(j.text,jt,sr?yn:xr);var Cr=Jt.text.isHidden();[Ot.rightJustifiedTextSymbolIndex,Ot.centerJustifiedTextSymbolIndex,Ot.leftJustifiedTextSymbolIndex].forEach(function(Li){Li>=0&&(j.text.placedSymbolArray.get(Li).hidden=Cr||Xn?1:0)}),Ot.verticalPlacedTextSymbolIndex>=0&&(j.text.placedSymbolArray.get(Ot.verticalPlacedTextSymbolIndex).hidden=Cr||sr?1:0);var Nr=I.variableOffsets[Ot.crossTileID];Nr&&I.markUsedJustification(j,Nr.anchor,Ot,Un);var ei=I.placedOrientations[Ot.crossTileID];ei&&(I.markUsedJustification(j,"left",Ot,ei),I.markUsedOrientation(j,ei,Ot))}if(Ln){var _r=Pn(Jt.icon),Sr=!(Xe&&Ot.verticalPlacedIconSymbolIndex&&Xn);Ot.placedIconSymbolIndex>=0&&(ct(j.icon,Ot.numIconVertices,Sr?_r:yn),j.icon.placedSymbolArray.get(Ot.placedIconSymbolIndex).hidden=Jt.icon.isHidden()),Ot.verticalPlacedIconSymbolIndex>=0&&(ct(j.icon,Ot.numVerticalIconVertices,Sr?yn:_r),j.icon.placedSymbolArray.get(Ot.verticalPlacedIconSymbolIndex).hidden=Jt.icon.isHidden())}if(j.hasIconCollisionBoxData()||j.hasTextCollisionBoxData()){var Kr=j.collisionArrays[Ft];if(Kr){var ii=new o.Point(0,0);if(Kr.textBox||Kr.verticalTextBox){var di=!0;if(ke){var mi=I.variableOffsets[ln];mi?(ii=Kn(mi.anchor,mi.width,mi.height,mi.textOffset,mi.textBoxScale),Fe&&ii._rotate(Ve?I.transform.angle:-I.transform.angle)):di=!1}Kr.textBox&&Dr(j.textCollisionBox.collisionVertexArray,Jt.text.placed,!di||Xn,ii.x,ii.y),Kr.verticalTextBox&&Dr(j.textCollisionBox.collisionVertexArray,Jt.text.placed,!di||sr,ii.x,ii.y)}var Ti=!(sr||!Kr.verticalIconBox);Kr.iconBox&&Dr(j.iconCollisionBox.collisionVertexArray,Jt.icon.placed,Ti,Xe?ii.x:0,Xe?ii.y:0),Kr.verticalIconBox&&Dr(j.iconCollisionBox.collisionVertexArray,Jt.icon.placed,!Ti,Xe?ii.x:0,Xe?ii.y:0)}}},_t=0;_t<j.symbolInstances.length;_t++)vt(_t);if(j.sortFeatures(this.transform.angle),this.retainedQueryData[j.bucketInstanceId]&&(this.retainedQueryData[j.bucketInstanceId].featureSortOrder=j.featureSortOrder),j.hasTextData()&&j.text.opacityVertexBuffer&&j.text.opacityVertexBuffer.updateData(j.text.opacityVertexArray),j.hasIconData()&&j.icon.opacityVertexBuffer&&j.icon.opacityVertexBuffer.updateData(j.icon.opacityVertexArray),j.hasIconCollisionBoxData()&&j.iconCollisionBox.collisionVertexBuffer&&j.iconCollisionBox.collisionVertexBuffer.updateData(j.iconCollisionBox.collisionVertexArray),j.hasTextCollisionBoxData()&&j.textCollisionBox.collisionVertexBuffer&&j.textCollisionBox.collisionVertexBuffer.updateData(j.textCollisionBox.collisionVertexArray),j.bucketInstanceId in this.collisionCircleArrays){var It=this.collisionCircleArrays[j.bucketInstanceId];j.placementInvProjMatrix=It.invProjMatrix,j.placementViewportMatrix=It.viewportMatrix,j.collisionCircleArray=It.circles,delete this.collisionCircleArrays[j.bucketInstanceId]}},fr.prototype.symbolFadeChange=function(j){return 0===this.fadeDuration?1:(j-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},fr.prototype.zoomAdjustment=function(j){return Math.max(0,(this.transform.zoom-j)/1.5)},fr.prototype.hasTransitions=function(j){return this.stale||j-this.lastPlacementChangeTime<this.fadeDuration},fr.prototype.stillRecent=function(j,Y){var q=this.zoomAtLastRecencyCheck===Y?1-this.zoomAdjustment(Y):1;return this.zoomAtLastRecencyCheck=Y,this.commitTime+this.fadeDuration*q>j},fr.prototype.setStale=function(){this.stale=!0};var cn=Math.pow(2,25),In=Math.pow(2,24),Nt=Math.pow(2,17),Zt=Math.pow(2,16),un=Math.pow(2,9),Tn=Math.pow(2,8),kn=Math.pow(2,1);function Pn(j){if(0===j.opacity&&!j.placed)return 0;if(1===j.opacity&&j.placed)return 4294967295;var Y=j.placed?1:0,q=Math.floor(127*j.opacity);return q*cn+Y*In+q*Nt+Y*Zt+q*un+Y*Tn+q*kn+Y}var yn=0,on=function(j){this._sortAcrossTiles="viewport-y"!==j.layout.get("symbol-z-order")&&void 0!==j.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};on.prototype.continuePlacement=function(j,Y,q,I,H){for(var te=this._bucketParts;this._currentTileIndex<j.length;)if(Y.getBucketParts(te,I,j[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,H())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,te.sort(function(ke,Fe){return ke.sortKey-Fe.sortKey}));this._currentPartIndex<te.length;)if(Y.placeLayerBucketPart(te[this._currentPartIndex],this._seenCrossTileIDs,q),this._currentPartIndex++,H())return!0;return!1};var nn=function(j,Y,q,I,H,te,le){this.placement=new fr(j,H,te,le),this._currentPlacementIndex=Y.length-1,this._forceFullPlacement=q,this._showCollisionBoxes=I,this._done=!1};nn.prototype.isDone=function(){return this._done},nn.prototype.continuePlacement=function(j,Y,q){for(var I=this,H=o.browser.now(),te=function(){var ke=o.browser.now()-H;return!I._forceFullPlacement&&ke>2};this._currentPlacementIndex>=0;){var le=Y[j[this._currentPlacementIndex]],pe=this.placement.collisionIndex.transform.zoom;if("symbol"===le.type&&(!le.minzoom||le.minzoom<=pe)&&(!le.maxzoom||le.maxzoom>pe)){if(this._inProgressLayer||(this._inProgressLayer=new on(le)),this._inProgressLayer.continuePlacement(q[le.source],this.placement,this._showCollisionBoxes,le,te))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},nn.prototype.commit=function(j){return this.placement.commit(j),this.placement};var dn=512/o.EXTENT/2,xn=function(j,Y,q){this.tileID=j,this.indexedSymbolInstances={},this.bucketInstanceId=q;for(var I=0;I<Y.length;I++){var H=Y.get(I),te=H.key;this.indexedSymbolInstances[te]||(this.indexedSymbolInstances[te]=[]),this.indexedSymbolInstances[te].push({crossTileID:H.crossTileID,coord:this.getScaledCoordinates(H,j)})}};xn.prototype.getScaledCoordinates=function(j,Y){var I=dn/Math.pow(2,Y.canonical.z-this.tileID.canonical.z);return{x:Math.floor((Y.canonical.x*o.EXTENT+j.anchorX)*I),y:Math.floor((Y.canonical.y*o.EXTENT+j.anchorY)*I)}},xn.prototype.findMatches=function(j,Y,q){for(var I=this.tileID.canonical.z<Y.canonical.z?1:Math.pow(2,this.tileID.canonical.z-Y.canonical.z),H=0;H<j.length;H++){var te=j.get(H);if(!te.crossTileID){var le=this.indexedSymbolInstances[te.key];if(le)for(var pe=this.getScaledCoordinates(te,Y),ke=0,Fe=le;ke<Fe.length;ke+=1){var Ve=Fe[ke];if(Math.abs(Ve.coord.x-pe.x)<=I&&Math.abs(Ve.coord.y-pe.y)<=I&&!q[Ve.crossTileID]){q[Ve.crossTileID]=!0,te.crossTileID=Ve.crossTileID;break}}}}};var Bn=function(){this.maxCrossTileID=0};Bn.prototype.generate=function(){return++this.maxCrossTileID};var Wn=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Wn.prototype.handleWrapJump=function(j){var Y=Math.round((j-this.lng)/360);if(0!==Y)for(var q in this.indexes){var I=this.indexes[q],H={};for(var te in I){var le=I[te];le.tileID=le.tileID.unwrapTo(le.tileID.wrap+Y),H[le.tileID.key]=le}this.indexes[q]=H}this.lng=j},Wn.prototype.addBucket=function(j,Y,q){if(this.indexes[j.overscaledZ]&&this.indexes[j.overscaledZ][j.key]){if(this.indexes[j.overscaledZ][j.key].bucketInstanceId===Y.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(j.overscaledZ,this.indexes[j.overscaledZ][j.key])}for(var I=0;I<Y.symbolInstances.length;I++)Y.symbolInstances.get(I).crossTileID=0;this.usedCrossTileIDs[j.overscaledZ]||(this.usedCrossTileIDs[j.overscaledZ]={});var H=this.usedCrossTileIDs[j.overscaledZ];for(var te in this.indexes){var le=this.indexes[te];if(Number(te)>j.overscaledZ)for(var pe in le){var ke=le[pe];ke.tileID.isChildOf(j)&&ke.findMatches(Y.symbolInstances,j,H)}else{var Fe=le[j.scaledTo(Number(te)).key];Fe&&Fe.findMatches(Y.symbolInstances,j,H)}}for(var Ve=0;Ve<Y.symbolInstances.length;Ve++){var Xe=Y.symbolInstances.get(Ve);Xe.crossTileID||(Xe.crossTileID=q.generate(),H[Xe.crossTileID]=!0)}return void 0===this.indexes[j.overscaledZ]&&(this.indexes[j.overscaledZ]={}),this.indexes[j.overscaledZ][j.key]=new xn(j,Y.symbolInstances,Y.bucketInstanceId),!0},Wn.prototype.removeBucketCrossTileIDs=function(j,Y){for(var q in Y.indexedSymbolInstances)for(var I=0,H=Y.indexedSymbolInstances[q];I<H.length;I+=1)delete this.usedCrossTileIDs[j][H[I].crossTileID]},Wn.prototype.removeStaleBuckets=function(j){var Y=!1;for(var q in this.indexes){var I=this.indexes[q];for(var H in I)j[I[H].bucketInstanceId]||(this.removeBucketCrossTileIDs(q,I[H]),delete I[H],Y=!0)}return Y};var Qn=function(){this.layerIndexes={},this.crossTileIDs=new Bn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Qn.prototype.addLayer=function(j,Y,q){var I=this.layerIndexes[j.id];void 0===I&&(I=this.layerIndexes[j.id]=new Wn);var H=!1,te={};I.handleWrapJump(q);for(var le=0,pe=Y;le<pe.length;le+=1){var ke=pe[le],Fe=ke.getBucket(j);Fe&&j.id===Fe.layerIds[0]&&(Fe.bucketInstanceId||(Fe.bucketInstanceId=++this.maxBucketInstanceId),I.addBucket(ke.tileID,Fe,this.crossTileIDs)&&(H=!0),te[Fe.bucketInstanceId]=!0)}return I.removeStaleBuckets(te)&&(H=!0),H},Qn.prototype.pruneUnusedLayers=function(j){var Y={};for(var q in j.forEach(function(I){Y[I]=!0}),this.layerIndexes)Y[q]||delete this.layerIndexes[q]};var ar=function(j,Y){return o.emitValidationErrors(j,Y&&Y.filter(function(q){return"source.canvas"!==q.identifier}))},yr=o.pick(Ct,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),ur=o.pick(Ct,["setCenter","setZoom","setBearing","setPitch"]),gr=function(){var j={},Y=o.styleSpec.$version;for(var q in o.styleSpec.$root){var H,I=o.styleSpec.$root[q];I.required&&null!=(H="version"===q?Y:"array"===I.type?[]:{})&&(j[q]=H)}return j}(),br=function(j){function Y(q,I){var H=this;void 0===I&&(I={}),j.call(this),this.map=q,this.dispatcher=new P(Mt(),this),this.imageManager=new h,this.imageManager.setEventedParent(this),this.glyphManager=new v(q._requestManager,I.localIdeographFontFamily),this.lineAtlas=new E(256,512),this.crossTileSymbolIndex=new Qn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());var te=this;this._rtlTextPluginCallback=Y.registerForPluginStateChange(function(le){te.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:le.pluginStatus,pluginURL:le.pluginURL},function(ke,Fe){if(o.triggerPluginCompletionEvent(ke),Fe&&Fe.every(function(Xe){return Xe}))for(var Ve in te.sourceCaches)te.sourceCaches[Ve].reload()})}),this.on("data",function(le){if("source"===le.dataType&&"metadata"===le.sourceDataType){var pe=H.sourceCaches[le.sourceId];if(pe){var ke=pe.getSource();if(ke&&ke.vectorLayerIds)for(var Fe in H._layers){var Ve=H._layers[Fe];Ve.source===ke.id&&H._validateLayer(Ve)}}}})}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.loadURL=function(q,I){var H=this;void 0===I&&(I={}),this.fire(new o.Event("dataloading",{dataType:"style"}));var te="boolean"==typeof I.validate?I.validate:!o.isMapboxURL(q);q=this.map._requestManager.normalizeStyleURL(q,I.accessToken);var le=this.map._requestManager.transformRequest(q,o.ResourceType.Style);this._request=o.getJSON(le,function(pe,ke){H._request=null,pe?H.fire(new o.ErrorEvent(pe)):ke&&H._load(ke,te)})},Y.prototype.loadJSON=function(q,I){var H=this;void 0===I&&(I={}),this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.browser.frame(function(){H._request=null,H._load(q,!1!==I.validate)})},Y.prototype.loadEmpty=function(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(gr,!1)},Y.prototype._load=function(q,I){if(!I||!ar(this,o.validateStyle(q))){for(var H in this._loaded=!0,this.stylesheet=q,q.sources)this.addSource(H,q.sources[H],{validate:!1});q.sprite?this._loadSprite(q.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(q.glyphs);var te=Pt(this.stylesheet.layers);this._order=te.map(function(Fe){return Fe.id}),this._layers={},this._serializedLayers={};for(var le=0,pe=te;le<pe.length;le+=1){var ke=pe[le];(ke=o.createStyleLayer(ke)).setEventedParent(this,{layer:{id:ke.id}}),this._layers[ke.id]=ke,this._serializedLayers[ke.id]=ke.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}},Y.prototype._loadSprite=function(q){var I=this;this._spriteRequest=function(H,te,le){var pe,ke,Fe,Ve=o.browser.devicePixelRatio>1?"@2x":"",Xe=o.getJSON(te.transformRequest(te.normalizeSpriteURL(H,Ve,".json"),o.ResourceType.SpriteJSON),function(vt,_t){Xe=null,Fe||(Fe=vt,pe=_t,ct())}),Je=o.getImage(te.transformRequest(te.normalizeSpriteURL(H,Ve,".png"),o.ResourceType.SpriteImage),function(vt,_t){Je=null,Fe||(Fe=vt,ke=_t,ct())});function ct(){if(Fe)le(Fe);else if(pe&&ke){var vt=o.browser.getImageData(ke),_t={};for(var It in pe){var Ft=pe[It],Ot=Ft.width,Yt=Ft.height,jt=Ft.x,ln=Ft.y,tn=Ft.sdf,Jt=Ft.pixelRatio,Mn=Ft.stretchX,Ln=Ft.stretchY,Un=Ft.content,Xn=new o.RGBAImage({width:Ot,height:Yt});o.RGBAImage.copy(vt,Xn,{x:jt,y:ln},{x:0,y:0},{width:Ot,height:Yt}),_t[It]={data:Xn,pixelRatio:Jt,sdf:tn,stretchX:Mn,stretchY:Ln,content:Un}}le(null,_t)}}return{cancel:function(){Xe&&(Xe.cancel(),Xe=null),Je&&(Je.cancel(),Je=null)}}}(q,this.map._requestManager,function(H,te){if(I._spriteRequest=null,H)I.fire(new o.ErrorEvent(H));else if(te)for(var le in te)I.imageManager.addImage(le,te[le]);I.imageManager.setLoaded(!0),I._availableImages=I.imageManager.listImages(),I.dispatcher.broadcast("setImages",I._availableImages),I.fire(new o.Event("data",{dataType:"style"}))})},Y.prototype._validateLayer=function(q){var I=this.sourceCaches[q.source];if(I){var H=q.sourceLayer;if(H){var te=I.getSource();("geojson"===te.type||te.vectorLayerIds&&-1===te.vectorLayerIds.indexOf(H))&&this.fire(new o.ErrorEvent(new Error('Source layer "'+H+'" does not exist on source "'+te.id+'" as specified by style layer "'+q.id+'"')))}}},Y.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var q in this.sourceCaches)if(!this.sourceCaches[q].loaded())return!1;return!!this.imageManager.isLoaded()},Y.prototype._serializeLayers=function(q){for(var I=[],H=0,te=q;H<te.length;H+=1){var pe=this._layers[te[H]];"custom"!==pe.type&&I.push(pe.serialize())}return I},Y.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var q in this.sourceCaches)if(this.sourceCaches[q].hasTransition())return!0;for(var I in this._layers)if(this._layers[I].hasTransition())return!0;return!1},Y.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},Y.prototype.update=function(q){if(this._loaded){var I=this._changed;if(this._changed){var H=Object.keys(this._updatedLayers),te=Object.keys(this._removedLayers);for(var le in(H.length||te.length)&&this._updateWorkerLayers(H,te),this._updatedSources){var pe=this._updatedSources[le];"reload"===pe?this._reloadSource(le):"clear"===pe&&this._clearSource(le)}for(var ke in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[ke].updateTransitions(q);this.light.updateTransitions(q),this._resetUpdates()}var Fe={};for(var Ve in this.sourceCaches){var Xe=this.sourceCaches[Ve];Fe[Ve]=Xe.used,Xe.used=!1}for(var Je=0,ct=this._order;Je<ct.length;Je+=1){var _t=this._layers[ct[Je]];_t.recalculate(q,this._availableImages),!_t.isHidden(q.zoom)&&_t.source&&(this.sourceCaches[_t.source].used=!0)}for(var It in Fe){var Ft=this.sourceCaches[It];Fe[It]!==Ft.used&&Ft.fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:It}))}this.light.recalculate(q),this.z=q.zoom,I&&this.fire(new o.Event("data",{dataType:"style"}))}},Y.prototype._updateTilesForChangedImages=function(){var q=Object.keys(this._changedImages);if(q.length){for(var I in this.sourceCaches)this.sourceCaches[I].reloadTilesForDependencies(["icons","patterns"],q);this._changedImages={}}},Y.prototype._updateWorkerLayers=function(q,I){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(q),removedIds:I})},Y.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},Y.prototype.setState=function(q){var I=this;if(this._checkLoaded(),ar(this,o.validateStyle(q)))return!1;(q=o.clone$1(q)).layers=Pt(q.layers);var H=function sn(j,Y){if(!j)return[{command:Ct.setStyle,args:[Y]}];var q=[];try{if(!o.deepEqual(j.version,Y.version))return[{command:Ct.setStyle,args:[Y]}];o.deepEqual(j.center,Y.center)||q.push({command:Ct.setCenter,args:[Y.center]}),o.deepEqual(j.zoom,Y.zoom)||q.push({command:Ct.setZoom,args:[Y.zoom]}),o.deepEqual(j.bearing,Y.bearing)||q.push({command:Ct.setBearing,args:[Y.bearing]}),o.deepEqual(j.pitch,Y.pitch)||q.push({command:Ct.setPitch,args:[Y.pitch]}),o.deepEqual(j.sprite,Y.sprite)||q.push({command:Ct.setSprite,args:[Y.sprite]}),o.deepEqual(j.glyphs,Y.glyphs)||q.push({command:Ct.setGlyphs,args:[Y.glyphs]}),o.deepEqual(j.transition,Y.transition)||q.push({command:Ct.setTransition,args:[Y.transition]}),o.deepEqual(j.light,Y.light)||q.push({command:Ct.setLight,args:[Y.light]});var I={},H=[];!function(le,pe,ke,Fe){var Ve;for(Ve in pe=pe||{},le=le||{})le.hasOwnProperty(Ve)&&(pe.hasOwnProperty(Ve)||Ut(Ve,ke,Fe));for(Ve in pe)pe.hasOwnProperty(Ve)&&(le.hasOwnProperty(Ve)?o.deepEqual(le[Ve],pe[Ve])||("geojson"===le[Ve].type&&"geojson"===pe[Ve].type&&qt(le,pe,Ve)?ke.push({command:Ct.setGeoJSONSourceData,args:[Ve,pe[Ve].data]}):Bt(Ve,pe,ke,Fe)):Dt(Ve,pe,ke))}(j.sources,Y.sources,H,I);var te=[];j.layers&&j.layers.forEach(function(le){I[le.source]?q.push({command:Ct.removeLayer,args:[le.id]}):te.push(le)}),q=q.concat(H),function(le,pe,ke){pe=pe||[];var Fe,Ve,Xe,Je,ct,vt,_t,It=(le=le||[]).map(mn),Ft=pe.map(mn),Ot=le.reduce(Qt,{}),Yt=pe.reduce(Qt,{}),jt=It.slice(),ln=Object.create(null);for(Fe=0,Ve=0;Fe<It.length;Fe++)Yt.hasOwnProperty(Xe=It[Fe])?Ve++:(ke.push({command:Ct.removeLayer,args:[Xe]}),jt.splice(jt.indexOf(Xe,Ve),1));for(Fe=0,Ve=0;Fe<Ft.length;Fe++)jt[jt.length-1-Fe]!==(Xe=Ft[Ft.length-1-Fe])&&(Ot.hasOwnProperty(Xe)?(ke.push({command:Ct.removeLayer,args:[Xe]}),jt.splice(jt.lastIndexOf(Xe,jt.length-Ve),1)):Ve++,ke.push({command:Ct.addLayer,args:[Yt[Xe],vt=jt[jt.length-Fe]]}),jt.splice(jt.length-Fe,0,Xe),ln[Xe]=!0);for(Fe=0;Fe<Ft.length;Fe++)if(Je=Ot[Xe=Ft[Fe]],ct=Yt[Xe],!ln[Xe]&&!o.deepEqual(Je,ct))if(o.deepEqual(Je.source,ct.source)&&o.deepEqual(Je["source-layer"],ct["source-layer"])&&o.deepEqual(Je.type,ct.type)){for(_t in an(Je.layout,ct.layout,ke,Xe,null,Ct.setLayoutProperty),an(Je.paint,ct.paint,ke,Xe,null,Ct.setPaintProperty),o.deepEqual(Je.filter,ct.filter)||ke.push({command:Ct.setFilter,args:[Xe,ct.filter]}),o.deepEqual(Je.minzoom,ct.minzoom)&&o.deepEqual(Je.maxzoom,ct.maxzoom)||ke.push({command:Ct.setLayerZoomRange,args:[Xe,ct.minzoom,ct.maxzoom]}),Je)Je.hasOwnProperty(_t)&&"layout"!==_t&&"paint"!==_t&&"filter"!==_t&&"metadata"!==_t&&"minzoom"!==_t&&"maxzoom"!==_t&&(0===_t.indexOf("paint.")?an(Je[_t],ct[_t],ke,Xe,_t.slice(6),Ct.setPaintProperty):o.deepEqual(Je[_t],ct[_t])||ke.push({command:Ct.setLayerProperty,args:[Xe,_t,ct[_t]]}));for(_t in ct)ct.hasOwnProperty(_t)&&!Je.hasOwnProperty(_t)&&"layout"!==_t&&"paint"!==_t&&"filter"!==_t&&"metadata"!==_t&&"minzoom"!==_t&&"maxzoom"!==_t&&(0===_t.indexOf("paint.")?an(Je[_t],ct[_t],ke,Xe,_t.slice(6),Ct.setPaintProperty):o.deepEqual(Je[_t],ct[_t])||ke.push({command:Ct.setLayerProperty,args:[Xe,_t,ct[_t]]}))}else ke.push({command:Ct.removeLayer,args:[Xe]}),vt=jt[jt.lastIndexOf(Xe)+1],ke.push({command:Ct.addLayer,args:[ct,vt]})}(te,Y.layers,q)}catch(le){console.warn("Unable to compute style diff:",le),q=[{command:Ct.setStyle,args:[Y]}]}return q}(this.serialize(),q).filter(function(le){return!(le.command in ur)});if(0===H.length)return!1;var te=H.filter(function(le){return!(le.command in yr)});if(te.length>0)throw new Error("Unimplemented: "+te.map(function(le){return le.command}).join(", ")+".");return H.forEach(function(le){"setTransition"!==le.command&&I[le.command].apply(I,le.args)}),this.stylesheet=q,!0},Y.prototype.addImage=function(q,I){if(this.getImage(q))return this.fire(new o.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(q,I),this._afterImageUpdated(q)},Y.prototype.updateImage=function(q,I){this.imageManager.updateImage(q,I)},Y.prototype.getImage=function(q){return this.imageManager.getImage(q)},Y.prototype.removeImage=function(q){if(!this.getImage(q))return this.fire(new o.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(q),this._afterImageUpdated(q)},Y.prototype._afterImageUpdated=function(q){this._availableImages=this.imageManager.listImages(),this._changedImages[q]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))},Y.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},Y.prototype.addSource=function(q,I,H){var te=this;if(void 0===H&&(H={}),this._checkLoaded(),void 0!==this.sourceCaches[q])throw new Error("There is already a source with this ID");if(!I.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(I).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(I.type)>=0&&this._validate(o.validateStyle.source,"sources."+q,I,null,H))){this.map&&this.map._collectResourceTiming&&(I.collectResourceTiming=!0);var le=this.sourceCaches[q]=new gt(q,I,this.dispatcher);le.style=this,le.setEventedParent(this,function(){return{isSourceLoaded:te.loaded(),source:le.serialize(),sourceId:q}}),le.onAdd(this.map),this._changed=!0}},Y.prototype.removeSource=function(q){if(this._checkLoaded(),void 0===this.sourceCaches[q])throw new Error("There is no source with this ID");for(var I in this._layers)if(this._layers[I].source===q)return this.fire(new o.ErrorEvent(new Error('Source "'+q+'" cannot be removed while layer "'+I+'" is using it.')));var H=this.sourceCaches[q];delete this.sourceCaches[q],delete this._updatedSources[q],H.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:q})),H.setEventedParent(null),H.clearTiles(),H.onRemove&&H.onRemove(this.map),this._changed=!0},Y.prototype.setGeoJSONSourceData=function(q,I){this._checkLoaded(),this.sourceCaches[q].getSource().setData(I),this._changed=!0},Y.prototype.getSource=function(q){return this.sourceCaches[q]&&this.sourceCaches[q].getSource()},Y.prototype.addLayer=function(q,I,H){void 0===H&&(H={}),this._checkLoaded();var te=q.id;if(this.getLayer(te))this.fire(new o.ErrorEvent(new Error('Layer with id "'+te+'" already exists on this map')));else{var le;if("custom"===q.type){if(ar(this,o.validateCustomStyleLayer(q)))return;le=o.createStyleLayer(q)}else{if("object"==typeof q.source&&(this.addSource(te,q.source),q=o.clone$1(q),q=o.extend(q,{source:te})),this._validate(o.validateStyle.layer,"layers."+te,q,{arrayIndex:-1},H))return;le=o.createStyleLayer(q),this._validateLayer(le),le.setEventedParent(this,{layer:{id:te}}),this._serializedLayers[le.id]=le.serialize()}var pe=I?this._order.indexOf(I):this._order.length;if(I&&-1===pe)this.fire(new o.ErrorEvent(new Error('Layer with id "'+I+'" does not exist on this map.')));else{if(this._order.splice(pe,0,te),this._layerOrderChanged=!0,this._layers[te]=le,this._removedLayers[te]&&le.source&&"custom"!==le.type){var ke=this._removedLayers[te];delete this._removedLayers[te],ke.type!==le.type?this._updatedSources[le.source]="clear":(this._updatedSources[le.source]="reload",this.sourceCaches[le.source].pause())}this._updateLayer(le),le.onAdd&&le.onAdd(this.map)}}},Y.prototype.moveLayer=function(q,I){if(this._checkLoaded(),this._changed=!0,this._layers[q]){if(q!==I){var H=this._order.indexOf(q);this._order.splice(H,1);var te=I?this._order.indexOf(I):this._order.length;I&&-1===te?this.fire(new o.ErrorEvent(new Error('Layer with id "'+I+'" does not exist on this map.'))):(this._order.splice(te,0,q),this._layerOrderChanged=!0)}}else this.fire(new o.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be moved.")))},Y.prototype.removeLayer=function(q){this._checkLoaded();var I=this._layers[q];if(I){I.setEventedParent(null);var H=this._order.indexOf(q);this._order.splice(H,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[q]=I,delete this._layers[q],delete this._serializedLayers[q],delete this._updatedLayers[q],delete this._updatedPaintProps[q],I.onRemove&&I.onRemove(this.map)}else this.fire(new o.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be removed.")))},Y.prototype.getLayer=function(q){return this._layers[q]},Y.prototype.hasLayer=function(q){return q in this._layers},Y.prototype.setLayerZoomRange=function(q,I,H){this._checkLoaded();var te=this.getLayer(q);te?te.minzoom===I&&te.maxzoom===H||(null!=I&&(te.minzoom=I),null!=H&&(te.maxzoom=H),this._updateLayer(te)):this.fire(new o.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot have zoom extent.")))},Y.prototype.setFilter=function(q,I,H){void 0===H&&(H={}),this._checkLoaded();var te=this.getLayer(q);if(te){if(!o.deepEqual(te.filter,I))return null==I?(te.filter=void 0,void this._updateLayer(te)):void(this._validate(o.validateStyle.filter,"layers."+te.id+".filter",I,null,H)||(te.filter=o.clone$1(I),this._updateLayer(te)))}else this.fire(new o.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be filtered.")))},Y.prototype.getFilter=function(q){return o.clone$1(this.getLayer(q).filter)},Y.prototype.setLayoutProperty=function(q,I,H,te){void 0===te&&(te={}),this._checkLoaded();var le=this.getLayer(q);le?o.deepEqual(le.getLayoutProperty(I),H)||(le.setLayoutProperty(I,H,te),this._updateLayer(le)):this.fire(new o.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be styled.")))},Y.prototype.getLayoutProperty=function(q,I){var H=this.getLayer(q);if(H)return H.getLayoutProperty(I);this.fire(new o.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style.")))},Y.prototype.setPaintProperty=function(q,I,H,te){void 0===te&&(te={}),this._checkLoaded();var le=this.getLayer(q);le?o.deepEqual(le.getPaintProperty(I),H)||(le.setPaintProperty(I,H,te)&&this._updateLayer(le),this._changed=!0,this._updatedPaintProps[q]=!0):this.fire(new o.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be styled.")))},Y.prototype.getPaintProperty=function(q,I){return this.getLayer(q).getPaintProperty(I)},Y.prototype.setFeatureState=function(q,I){this._checkLoaded();var H=q.source,te=q.sourceLayer,le=this.sourceCaches[H];if(void 0!==le){var pe=le.getSource().type;"geojson"===pe&&te?this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==pe||te?(void 0===q.id&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),le.setFeatureState(te,q.id,I)):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+H+"' does not exist in the map's style.")))},Y.prototype.removeFeatureState=function(q,I){this._checkLoaded();var H=q.source,te=this.sourceCaches[H];if(void 0!==te){var le=te.getSource().type,pe="vector"===le?q.sourceLayer:void 0;"vector"!==le||pe?I&&"string"!=typeof q.id&&"number"!=typeof q.id?this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):te.removeFeatureState(pe,q.id,I):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+H+"' does not exist in the map's style.")))},Y.prototype.getFeatureState=function(q){this._checkLoaded();var I=q.source,H=q.sourceLayer,te=this.sourceCaches[I];if(void 0!==te){if("vector"!==te.getSource().type||H)return void 0===q.id&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),te.getFeatureState(H,q.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+I+"' does not exist in the map's style.")))},Y.prototype.getTransition=function(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},Y.prototype.serialize=function(){return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:o.mapObject(this.sourceCaches,function(q){return q.serialize()}),layers:this._serializeLayers(this._order)},function(q){return void 0!==q})},Y.prototype._updateLayer=function(q){this._updatedLayers[q.id]=!0,q.source&&!this._updatedSources[q.source]&&"raster"!==this.sourceCaches[q.source].getSource().type&&(this._updatedSources[q.source]="reload",this.sourceCaches[q.source].pause()),this._changed=!0},Y.prototype._flattenAndSortRenderedFeatures=function(q){for(var I=this,H=function(Un){return"fill-extrusion"===I._layers[Un].type},te={},le=[],pe=this._order.length-1;pe>=0;pe--){var ke=this._order[pe];if(H(ke)){te[ke]=pe;for(var Fe=0,Ve=q;Fe<Ve.length;Fe+=1){var Xe=Ve[Fe][ke];if(Xe)for(var Je=0,ct=Xe;Je<ct.length;Je+=1)le.push(ct[Je])}}}le.sort(function(Un,Xn){return Xn.intersectionZ-Un.intersectionZ});for(var _t=[],It=this._order.length-1;It>=0;It--){var Ft=this._order[It];if(H(Ft))for(var Ot=le.length-1;Ot>=0;Ot--){var Yt=le[Ot].feature;if(te[Yt.layer.id]<It)break;_t.push(Yt),le.pop()}else for(var jt=0,ln=q;jt<ln.length;jt+=1){var tn=ln[jt][Ft];if(tn)for(var Jt=0,Mn=tn;Jt<Mn.length;Jt+=1)_t.push(Mn[Jt].feature)}}return _t},Y.prototype.queryRenderedFeatures=function(q,I,H){I&&I.filter&&this._validate(o.validateStyle.filter,"queryRenderedFeatures.filter",I.filter,null,I);var te={};if(I&&I.layers){if(!Array.isArray(I.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var le=0,pe=I.layers;le<pe.length;le+=1){var ke=pe[le],Fe=this._layers[ke];if(!Fe)return this.fire(new o.ErrorEvent(new Error("The layer '"+ke+"' does not exist in the map's style and cannot be queried for features."))),[];te[Fe.source]=!0}}var Ve=[];for(var Xe in I.availableImages=this._availableImages,this.sourceCaches)I.layers&&!te[Xe]||Ve.push(ne(this.sourceCaches[Xe],this._layers,this._serializedLayers,q,I,H));return this.placement&&Ve.push(function(Je,ct,vt,_t,It,Ft,Ot){for(var Yt={},jt=Ft.queryRenderedSymbols(_t),ln=[],tn=0,Jt=Object.keys(jt).map(Number);tn<Jt.length;tn+=1)ln.push(Ot[Jt[tn]]);ln.sort(Q);for(var Ln=function(){var Mr=Xn[Un],hr=Mr.featureIndex.lookupSymbolFeatures(jt[Mr.bucketInstanceId],ct,Mr.bucketIndex,Mr.sourceLayerIndex,It.filter,It.layers,It.availableImages,Je);for(var Cr in hr){var Nr=Yt[Cr]=Yt[Cr]||[],ei=hr[Cr];ei.sort(function(Pr,Kr){var ii=Mr.featureSortOrder;if(ii){var di=ii.indexOf(Pr.featureIndex);return ii.indexOf(Kr.featureIndex)-di}return Kr.featureIndex-Pr.featureIndex});for(var _r=0,Sr=ei;_r<Sr.length;_r+=1)Nr.push(Sr[_r])}},Un=0,Xn=ln;Un<Xn.length;Un+=1)Ln();var sr=function(Mr){Yt[Mr].forEach(function(hr){var Cr=hr.feature,ei=vt[Je[Mr].source].getFeatureState(Cr.layer["source-layer"],Cr.id);Cr.source=Cr.layer.source,Cr.layer["source-layer"]&&(Cr.sourceLayer=Cr.layer["source-layer"]),Cr.state=ei})};for(var xr in Yt)sr(xr);return Yt}(this._layers,this._serializedLayers,this.sourceCaches,q,I,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Ve)},Y.prototype.querySourceFeatures=function(q,I){I&&I.filter&&this._validate(o.validateStyle.filter,"querySourceFeatures.filter",I.filter,null,I);var H=this.sourceCaches[q];return H?function(te,le){for(var pe=te.getRenderableIds().map(function(ct){return te.getTileByID(ct)}),ke=[],Fe={},Ve=0;Ve<pe.length;Ve++){var Xe=pe[Ve],Je=Xe.tileID.canonical.key;Fe[Je]||(Fe[Je]=!0,Xe.querySourceFeatures(ke,le))}return ke}(H,I):[]},Y.prototype.addSourceType=function(q,I,H){return Y.getSourceType(q)?H(new Error('A source type called "'+q+'" already exists.')):(Y.setSourceType(q,I),I.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:q,url:I.workerSourceURL},H):H(null,null))},Y.prototype.getLight=function(){return this.light.getLight()},Y.prototype.setLight=function(q,I){void 0===I&&(I={}),this._checkLoaded();var H=this.light.getLight(),te=!1;for(var le in q)if(!o.deepEqual(q[le],H[le])){te=!0;break}if(te){var pe={now:o.browser.now(),transition:o.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(q,I),this.light.updateTransitions(pe)}},Y.prototype._validate=function(q,I,H,te,le){return void 0===le&&(le={}),(!le||!1!==le.validate)&&ar(this,q.call(o.validateStyle,o.extend({key:I,style:this.serialize(),value:H,styleSpec:o.styleSpec},te)))},Y.prototype._remove=function(){for(var q in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[q].setEventedParent(null);for(var I in this.sourceCaches)this.sourceCaches[I].clearTiles(),this.sourceCaches[I].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},Y.prototype._clearSource=function(q){this.sourceCaches[q].clearTiles()},Y.prototype._reloadSource=function(q){this.sourceCaches[q].resume(),this.sourceCaches[q].reload()},Y.prototype._updateSources=function(q){for(var I in this.sourceCaches)this.sourceCaches[I].update(q)},Y.prototype._generateCollisionBoxes=function(){for(var q in this.sourceCaches)this._reloadSource(q)},Y.prototype._updatePlacement=function(q,I,H,te,le){void 0===le&&(le=!1);for(var pe=!1,ke=!1,Fe={},Ve=0,Xe=this._order;Ve<Xe.length;Ve+=1){var ct=this._layers[Xe[Ve]];if("symbol"===ct.type){if(!Fe[ct.source]){var vt=this.sourceCaches[ct.source];Fe[ct.source]=vt.getRenderableIds(!0).map(function(jt){return vt.getTileByID(jt)}).sort(function(jt,ln){return ln.tileID.overscaledZ-jt.tileID.overscaledZ||(jt.tileID.isLessThan(ln.tileID)?-1:1)})}var _t=this.crossTileSymbolIndex.addLayer(ct,Fe[ct.source],q.center.lng);pe=pe||_t}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((le=le||this._layerOrderChanged||0===H)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.browser.now(),q.zoom))&&(this.pauseablePlacement=new nn(q,this._order,le,I,H,te,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Fe),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.browser.now()),ke=!0),pe&&this.pauseablePlacement.placement.setStale()),ke||pe)for(var It=0,Ft=this._order;It<Ft.length;It+=1){var Yt=this._layers[Ft[It]];"symbol"===Yt.type&&this.placement.updateLayerOpacities(Yt,Fe[Yt.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.browser.now())},Y.prototype._releaseSymbolFadeTiles=function(){for(var q in this.sourceCaches)this.sourceCaches[q].releaseSymbolFadeTiles()},Y.prototype.getImages=function(q,I,H){this.imageManager.getImages(I.icons,H),this._updateTilesForChangedImages();var te=this.sourceCaches[I.source];te&&te.setDependencies(I.tileID.key,I.type,I.icons)},Y.prototype.getGlyphs=function(q,I,H){this.glyphManager.getGlyphs(I.stacks,H)},Y.prototype.getResource=function(q,I,H){return o.makeRequest(I,H)},Y}(o.Evented);br.getSourceType=function(j){return ae[j]},br.setSourceType=function(j,Y){ae[j]=Y},br.registerForPluginStateChange=o.registerForPluginStateChange;var pr=o.createLayout([{name:"a_pos",type:"Int16",components:2}]),Lr=Ei("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Ur=Ei("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),zr=Ei("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),kr=Ei("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Fr=Ei("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Qr=Ei("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),ai=Ei("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Xi=Ei("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),da=Ei("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Ba=Ei("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),ea=Ei("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),Ea=Ei("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),so=Ei("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),li=Ei("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),za=Ei("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),No=Ei("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),Na=Ei("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),js=Ei("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Ia=Ei("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Qa=Ei("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),ds=Ei("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),Cs=Ei("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),xl=Ei("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Eo=Ei("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),$o=Ei("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),Es=Ei("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function Ei(j,Y){var q=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,I=Y.match(/attribute ([\w]+) ([\w]+)/g),H=j.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),te=Y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),le=te?te.concat(H):H,pe={};return{fragmentSource:j=j.replace(q,function(ke,Fe,Ve,Xe,Je){return pe[Je]=!0,"define"===Fe?"\n#ifndef HAS_UNIFORM_u_"+Je+"\nvarying "+Ve+" "+Xe+" "+Je+";\n#else\nuniform "+Ve+" "+Xe+" u_"+Je+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+Je+"\n    "+Ve+" "+Xe+" "+Je+" = u_"+Je+";\n#endif\n"}),vertexSource:Y=Y.replace(q,function(ke,Fe,Ve,Xe,Je){var ct="float"===Xe?"vec2":"vec4",vt=Je.match(/color/)?"color":ct;return pe[Je]?"define"===Fe?"\n#ifndef HAS_UNIFORM_u_"+Je+"\nuniform lowp float u_"+Je+"_t;\nattribute "+Ve+" "+ct+" a_"+Je+";\nvarying "+Ve+" "+Xe+" "+Je+";\n#else\nuniform "+Ve+" "+Xe+" u_"+Je+";\n#endif\n":"vec4"===vt?"\n#ifndef HAS_UNIFORM_u_"+Je+"\n    "+Je+" = a_"+Je+";\n#else\n    "+Ve+" "+Xe+" "+Je+" = u_"+Je+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Je+"\n    "+Je+" = unpack_mix_"+vt+"(a_"+Je+", u_"+Je+"_t);\n#else\n    "+Ve+" "+Xe+" "+Je+" = u_"+Je+";\n#endif\n":"define"===Fe?"\n#ifndef HAS_UNIFORM_u_"+Je+"\nuniform lowp float u_"+Je+"_t;\nattribute "+Ve+" "+ct+" a_"+Je+";\n#else\nuniform "+Ve+" "+Xe+" u_"+Je+";\n#endif\n":"vec4"===vt?"\n#ifndef HAS_UNIFORM_u_"+Je+"\n    "+Ve+" "+Xe+" "+Je+" = a_"+Je+";\n#else\n    "+Ve+" "+Xe+" "+Je+" = u_"+Je+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Je+"\n    "+Ve+" "+Xe+" "+Je+" = unpack_mix_"+vt+"(a_"+Je+", u_"+Je+"_t);\n#else\n    "+Ve+" "+Xe+" "+Je+" = u_"+Je+";\n#endif\n"}),staticAttributes:I,staticUniforms:le}}var Fa=Object.freeze({__proto__:null,prelude:Lr,background:Ur,backgroundPattern:zr,circle:kr,clippingMask:Fr,heatmap:Qr,heatmapTexture:ai,collisionBox:Xi,collisionCircle:da,debug:Ba,fill:ea,fillOutline:Ea,fillOutlinePattern:so,fillPattern:li,fillExtrusion:za,fillExtrusionPattern:No,hillshadePrepare:Na,hillshade:js,line:Ia,lineGradient:Qa,linePattern:ds,lineSDF:Cs,raster:xl,symbolIcon:Eo,symbolSDF:$o,symbolTextAndIcon:Es}),Io=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function To(j){for(var Y=[],q=0;q<j.length;q++)if(null!==j[q]){var I=j[q].split(" ");Y.push(I.pop())}return Y}Io.prototype.bind=function(j,Y,q,I,H,te,le,pe){this.context=j;for(var ke=this.boundPaintVertexBuffers.length!==I.length,Fe=0;!ke&&Fe<I.length;Fe++)this.boundPaintVertexBuffers[Fe]!==I[Fe]&&(ke=!0);j.extVertexArrayObject&&this.vao&&this.boundProgram===Y&&this.boundLayoutVertexBuffer===q&&!ke&&this.boundIndexBuffer===H&&this.boundVertexOffset===te&&this.boundDynamicVertexBuffer===le&&this.boundDynamicVertexBuffer2===pe?(j.bindVertexArrayOES.set(this.vao),le&&le.bind(),H&&H.dynamicDraw&&H.bind(),pe&&pe.bind()):this.freshBind(Y,q,I,H,te,le,pe)},Io.prototype.freshBind=function(j,Y,q,I,H,te,le){var pe,ke=j.numAttributes,Fe=this.context,Ve=Fe.gl;if(Fe.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Fe.extVertexArrayObject.createVertexArrayOES(),Fe.bindVertexArrayOES.set(this.vao),pe=0,this.boundProgram=j,this.boundLayoutVertexBuffer=Y,this.boundPaintVertexBuffers=q,this.boundIndexBuffer=I,this.boundVertexOffset=H,this.boundDynamicVertexBuffer=te,this.boundDynamicVertexBuffer2=le;else{pe=Fe.currentNumAttributes||0;for(var Xe=ke;Xe<pe;Xe++)Ve.disableVertexAttribArray(Xe)}Y.enableAttributes(Ve,j);for(var Je=0,ct=q;Je<ct.length;Je+=1)ct[Je].enableAttributes(Ve,j);te&&te.enableAttributes(Ve,j),le&&le.enableAttributes(Ve,j),Y.bind(),Y.setVertexAttribPointers(Ve,j,H);for(var vt=0,_t=q;vt<_t.length;vt+=1){var It=_t[vt];It.bind(),It.setVertexAttribPointers(Ve,j,H)}te&&(te.bind(),te.setVertexAttribPointers(Ve,j,H)),I&&I.bind(),le&&(le.bind(),le.setVertexAttribPointers(Ve,j,H)),Fe.currentNumAttributes=ke},Io.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Ao=function(j,Y,q,I,H,te){var le=j.gl;this.program=le.createProgram();for(var pe=To(q.staticAttributes),ke=I?I.getBinderAttributes():[],Fe=pe.concat(ke),Ve=q.staticUniforms?To(q.staticUniforms):[],Xe=I?I.getBinderUniforms():[],Je=[],ct=0,vt=Ve.concat(Xe);ct<vt.length;ct+=1){var _t=vt[ct];Je.indexOf(_t)<0&&Je.push(_t)}var It=I?I.defines():[];te&&It.push("#define OVERDRAW_INSPECTOR;");var Ft=It.concat(Lr.fragmentSource,q.fragmentSource).join("\n"),Ot=It.concat(Lr.vertexSource,q.vertexSource).join("\n"),Yt=le.createShader(le.FRAGMENT_SHADER);if(le.isContextLost())this.failedToCreate=!0;else{le.shaderSource(Yt,Ft),le.compileShader(Yt),le.attachShader(this.program,Yt);var jt=le.createShader(le.VERTEX_SHADER);if(le.isContextLost())this.failedToCreate=!0;else{le.shaderSource(jt,Ot),le.compileShader(jt),le.attachShader(this.program,jt),this.attributes={};var ln={};this.numAttributes=Fe.length;for(var tn=0;tn<this.numAttributes;tn++)Fe[tn]&&(le.bindAttribLocation(this.program,tn,Fe[tn]),this.attributes[Fe[tn]]=tn);le.linkProgram(this.program),le.deleteShader(jt),le.deleteShader(Yt);for(var Jt=0;Jt<Je.length;Jt++){var Mn=Je[Jt];if(Mn&&!ln[Mn]){var Ln=le.getUniformLocation(this.program,Mn);Ln&&(ln[Mn]=Ln)}}this.fixedUniforms=H(j,ln),this.binderUniforms=I?I.getUniforms(j,ln):[]}}};function vo(j,Y,q){var I=1/or(q,1,Y.transform.tileZoom),H=Math.pow(2,q.tileID.overscaledZ),te=q.tileSize*Math.pow(2,Y.transform.tileZoom)/H,le=te*(q.tileID.canonical.x+q.tileID.wrap*H),pe=te*q.tileID.canonical.y;return{u_image:0,u_texsize:q.imageAtlasTexture.size,u_scale:[I,j.fromScale,j.toScale],u_fade:j.t,u_pixel_coord_upper:[le>>16,pe>>16],u_pixel_coord_lower:[65535&le,65535&pe]}}Ao.prototype.draw=function(j,Y,q,I,H,te,le,pe,ke,Fe,Ve,Xe,Je,ct,vt,_t){var It,Ft=j.gl;if(!this.failedToCreate){for(var Ot in j.program.set(this.program),j.setDepthMode(q),j.setStencilMode(I),j.setColorMode(H),j.setCullFace(te),this.fixedUniforms)this.fixedUniforms[Ot].set(le[Ot]);ct&&ct.setUniforms(j,this.binderUniforms,Xe,{zoom:Je});for(var Yt=(It={},It[Ft.LINES]=2,It[Ft.TRIANGLES]=3,It[Ft.LINE_STRIP]=1,It)[Y],jt=0,ln=Ve.get();jt<ln.length;jt+=1){var tn=ln[jt],Jt=tn.vaos||(tn.vaos={});(Jt[pe]||(Jt[pe]=new Io)).bind(j,this,ke,ct?ct.getPaintVertexBuffers():[],Fe,tn.vertexOffset,vt,_t),Ft.drawElements(Y,tn.primitiveLength*Yt,Ft.UNSIGNED_SHORT,tn.primitiveOffset*Yt*2)}}};var ps=function(j,Y,q,I){var H=Y.style.light,te=H.properties.get("position"),le=[te.x,te.y,te.z],pe=o.create$1();"viewport"===H.properties.get("anchor")&&o.fromRotation(pe,-Y.transform.angle),o.transformMat3(le,le,pe);var ke=H.properties.get("color");return{u_matrix:j,u_lightpos:le,u_lightintensity:H.properties.get("intensity"),u_lightcolor:[ke.r,ke.g,ke.b],u_vertical_gradient:+q,u_opacity:I}},_l=function(j,Y,q,I,H,te,le){return o.extend(ps(j,Y,q,I),vo(te,Y,le),{u_height_factor:-Math.pow(2,H.overscaledZ)/le.tileSize/8})},Oa=function(j){return{u_matrix:j}},al=function(j,Y,q,I){return o.extend(Oa(j),vo(q,Y,I))},Us=function(j,Y){return{u_matrix:j,u_world:Y}},Ul=function(j,Y,q,I,H){return o.extend(al(j,Y,q,I),{u_world:H})},Xc=function(j,Y,q,I){var H,te,le=j.transform;if("map"===I.paint.get("circle-pitch-alignment")){var pe=or(q,1,le.zoom);H=!0,te=[pe,pe]}else H=!1,te=le.pixelsToGLUnits;return{u_camera_to_center_distance:le.cameraToCenterDistance,u_scale_with_map:+("map"===I.paint.get("circle-pitch-scale")),u_matrix:j.translatePosMatrix(Y.posMatrix,q,I.paint.get("circle-translate"),I.paint.get("circle-translate-anchor")),u_pitch_with_map:+H,u_device_pixel_ratio:o.browser.devicePixelRatio,u_extrude_scale:te}},Vs=function(j,Y,q){var I=or(q,1,Y.zoom),H=Math.pow(2,Y.zoom-q.tileID.overscaledZ),te=q.tileID.overscaleFactor();return{u_matrix:j,u_camera_to_center_distance:Y.cameraToCenterDistance,u_pixels_to_tile_units:I,u_extrude_scale:[Y.pixelsToGLUnits[0]/(I*H),Y.pixelsToGLUnits[1]/(I*H)],u_overscale_factor:te}},Is=function(j,Y,q){return{u_matrix:j,u_inv_matrix:Y,u_camera_to_center_distance:q.cameraToCenterDistance,u_viewport_size:[q.width,q.height]}},ac=function(j,Y,q){return void 0===q&&(q=1),{u_matrix:j,u_color:Y,u_overlay:0,u_overlay_scale:q}},jo=function(j){return{u_matrix:j}},pu=function(j,Y,q,I){return{u_matrix:j,u_extrude_scale:or(Y,1,q),u_intensity:I}},gs=function(j,Y,q){var I=j.transform;return{u_matrix:ms(j,Y,q),u_ratio:1/or(Y,1,I.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_units_to_pixels:[1/I.pixelsToGLUnits[0],1/I.pixelsToGLUnits[1]]}},Vl=function(j,Y,q,I){return o.extend(gs(j,Y,q),{u_image:0,u_image_height:I})},Gs=function(j,Y,q,I){var H=j.transform,te=Tl(Y,H);return{u_matrix:ms(j,Y,q),u_texsize:Y.imageAtlasTexture.size,u_ratio:1/or(Y,1,H.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_image:0,u_scale:[te,I.fromScale,I.toScale],u_fade:I.t,u_units_to_pixels:[1/H.pixelsToGLUnits[0],1/H.pixelsToGLUnits[1]]}},wl=function(j,Y,q,I,H){var le=j.lineAtlas,pe=Tl(Y,j.transform),ke="round"===q.layout.get("line-cap"),Fe=le.getDash(I.from,ke),Ve=le.getDash(I.to,ke),Xe=Fe.width*H.fromScale,Je=Ve.width*H.toScale;return o.extend(gs(j,Y,q),{u_patternscale_a:[pe/Xe,-Fe.height/2],u_patternscale_b:[pe/Je,-Ve.height/2],u_sdfgamma:le.width/(256*Math.min(Xe,Je)*o.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Fe.y,u_tex_y_b:Ve.y,u_mix:H.t})};function Tl(j,Y){return 1/or(j,1,Y.tileZoom)}function ms(j,Y,q){return j.translatePosMatrix(Y.tileID.posMatrix,Y,q.paint.get("line-translate"),q.paint.get("line-translate-anchor"))}var Ac=function(j,Y,q,I,H){return{u_matrix:j,u_tl_parent:Y,u_scale_parent:q,u_buffer_scale:1,u_fade_t:I.mix,u_opacity:I.opacity*H.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:H.paint.get("raster-brightness-min"),u_brightness_high:H.paint.get("raster-brightness-max"),u_saturation_factor:(le=H.paint.get("raster-saturation"),le>0?1-1/(1.001-le):-le),u_contrast_factor:(te=H.paint.get("raster-contrast"),te>0?1/(1-te):1+te),u_spin_weights:Ls(H.paint.get("raster-hue-rotate"))};var te,le};function Ls(j){j*=Math.PI/180;var Y=Math.sin(j),q=Math.cos(j);return[(2*q+1)/3,(-Math.sqrt(3)*Y-q+1)/3,(Math.sqrt(3)*Y-q+1)/3]}var Ps,Hs=function(j,Y,q,I,H,te,le,pe,ke,Fe){var Ve=H.transform;return{u_is_size_zoom_constant:+("constant"===j||"source"===j),u_is_size_feature_constant:+("constant"===j||"camera"===j),u_size_t:Y?Y.uSizeT:0,u_size:Y?Y.uSize:0,u_camera_to_center_distance:Ve.cameraToCenterDistance,u_pitch:Ve.pitch/360*2*Math.PI,u_rotate_symbol:+q,u_aspect_ratio:Ve.width/Ve.height,u_fade_change:H.options.fadeDuration?H.symbolFadeChange:1,u_matrix:te,u_label_plane_matrix:le,u_coord_matrix:pe,u_is_text:+ke,u_pitch_with_map:+I,u_texsize:Fe,u_texture:0}},ol=function(j,Y,q,I,H,te,le,pe,ke,Fe,Ve){var Xe=H.transform;return o.extend(Hs(j,Y,q,I,H,te,le,pe,ke,Fe),{u_gamma_scale:I?Math.cos(Xe._pitch)*Xe.cameraToCenterDistance:1,u_device_pixel_ratio:o.browser.devicePixelRatio,u_is_halo:+Ve})},ki=function(j,Y,q,I,H,te,le,pe,ke,Fe){return o.extend(ol(j,Y,q,I,H,te,le,pe,!0,ke,!0),{u_texsize_icon:Fe,u_texture_icon:1})},vs=function(j,Y,q){return{u_matrix:j,u_opacity:Y,u_color:q}},Kc=function(j,Y,q,I,H,te){return o.extend((pe=te,Fe=H,Ve=(ke=q).imageManager.getPattern((le=I).from.toString()),Xe=ke.imageManager.getPattern(le.to.toString()),ct=(Je=ke.imageManager.getPixelSize()).width,vt=Je.height,_t=Math.pow(2,Fe.tileID.overscaledZ),Ft=(It=Fe.tileSize*Math.pow(2,ke.transform.tileZoom)/_t)*(Fe.tileID.canonical.x+Fe.tileID.wrap*_t),Ot=It*Fe.tileID.canonical.y,{u_image:0,u_pattern_tl_a:Ve.tl,u_pattern_br_a:Ve.br,u_pattern_tl_b:Xe.tl,u_pattern_br_b:Xe.br,u_texsize:[ct,vt],u_mix:pe.t,u_pattern_size_a:Ve.displaySize,u_pattern_size_b:Xe.displaySize,u_scale_a:pe.fromScale,u_scale_b:pe.toScale,u_tile_units_to_pixels:1/or(Fe,1,ke.transform.tileZoom),u_pixel_coord_upper:[Ft>>16,Ot>>16],u_pixel_coord_lower:[65535&Ft,65535&Ot]}),{u_matrix:j,u_opacity:Y});var le,pe,ke,Fe,Ve,Xe,Je,ct,vt,_t,It,Ft,Ot},kc={fillExtrusion:function(j,Y){return{u_matrix:new o.UniformMatrix4f(j,Y.u_matrix),u_lightpos:new o.Uniform3f(j,Y.u_lightpos),u_lightintensity:new o.Uniform1f(j,Y.u_lightintensity),u_lightcolor:new o.Uniform3f(j,Y.u_lightcolor),u_vertical_gradient:new o.Uniform1f(j,Y.u_vertical_gradient),u_opacity:new o.Uniform1f(j,Y.u_opacity)}},fillExtrusionPattern:function(j,Y){return{u_matrix:new o.UniformMatrix4f(j,Y.u_matrix),u_lightpos:new o.Uniform3f(j,Y.u_lightpos),u_lightintensity:new o.Uniform1f(j,Y.u_lightintensity),u_lightcolor:new o.Uniform3f(j,Y.u_lightcolor),u_vertical_gradient:new o.Uniform1f(j,Y.u_vertical_gradient),u_height_factor:new o.Uniform1f(j,Y.u_height_factor),u_image:new o.Uniform1i(j,Y.u_image),u_texsize:new o.Uniform2f(j,Y.u_texsize),u_pixel_coord_upper:new o.Uniform2f(j,Y.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(j,Y.u_pixel_coord_lower),u_scale:new o.Uniform3f(j,Y.u_scale),u_fade:new o.Uniform1f(j,Y.u_fade),u_opacity:new o.Uniform1f(j,Y.u_opacity)}},fill:function(j,Y){return{u_matrix:new o.UniformMatrix4f(j,Y.u_matrix)}},fillPattern:function(j,Y){return{u_matrix:new o.UniformMatrix4f(j,Y.u_matrix),u_image:new o.Uniform1i(j,Y.u_image),u_texsize:new o.Uniform2f(j,Y.u_texsize),u_pixel_coord_upper:new o.Uniform2f(j,Y.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(j,Y.u_pixel_coord_lower),u_scale:new o.Uniform3f(j,Y.u_scale),u_fade:new o.Uniform1f(j,Y.u_fade)}},fillOutline:function(j,Y){return{u_matrix:new o.UniformMatrix4f(j,Y.u_matrix),u_world:new o.Uniform2f(j,Y.u_world)}},fillOutlinePattern:function(j,Y){return{u_matrix:new o.UniformMatrix4f(j,Y.u_matrix),u_world:new o.Uniform2f(j,Y.u_world),u_image:new o.Uniform1i(j,Y.u_image),u_texsize:new o.Uniform2f(j,Y.u_texsize),u_pixel_coord_upper:new o.Uniform2f(j,Y.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(j,Y.u_pixel_coord_lower),u_scale:new o.Uniform3f(j,Y.u_scale),u_fade:new o.Uniform1f(j,Y.u_fade)}},circle:function(j,Y){return{u_camera_to_center_distance:new o.Uniform1f(j,Y.u_camera_to_center_distance),u_scale_with_map:new o.Uniform1i(j,Y.u_scale_with_map),u_pitch_with_map:new o.Uniform1i(j,Y.u_pitch_with_map),u_extrude_scale:new o.Uniform2f(j,Y.u_extrude_scale),u_device_pixel_ratio:new o.Uniform1f(j,Y.u_device_pixel_ratio),u_matrix:new o.UniformMatrix4f(j,Y.u_matrix)}},collisionBox:function(j,Y){return{u_matrix:new o.UniformMatrix4f(j,Y.u_matrix),u_camera_to_center_distance:new o.Uniform1f(j,Y.u_camera_to_center_distance),u_pixels_to_tile_units:new o.Uniform1f(j,Y.u_pixels_to_tile_units),u_extrude_scale:new o.Uniform2f(j,Y.u_extrude_scale),u_overscale_factor:new o.Uniform1f(j,Y.u_overscale_factor)}},collisionCircle:function(j,Y){return{u_matrix:new o.UniformMatrix4f(j,Y.u_matrix),u_inv_matrix:new o.UniformMatrix4f(j,Y.u_inv_matrix),u_camera_to_center_distance:new o.Uniform1f(j,Y.u_camera_to_center_distance),u_viewport_size:new o.Uniform2f(j,Y.u_viewport_size)}},debug:function(j,Y){return{u_color:new o.UniformColor(j,Y.u_color),u_matrix:new o.UniformMatrix4f(j,Y.u_matrix),u_overlay:new o.Uniform1i(j,Y.u_overlay),u_overlay_scale:new o.Uniform1f(j,Y.u_overlay_scale)}},clippingMask:function(j,Y){return{u_matrix:new o.UniformMatrix4f(j,Y.u_matrix)}},heatmap:function(j,Y){return{u_extrude_scale:new o.Uniform1f(j,Y.u_extrude_scale),u_intensity:new o.Uniform1f(j,Y.u_intensity),u_matrix:new o.UniformMatrix4f(j,Y.u_matrix)}},heatmapTexture:function(j,Y){return{u_matrix:new o.UniformMatrix4f(j,Y.u_matrix),u_world:new o.Uniform2f(j,Y.u_world),u_image:new o.Uniform1i(j,Y.u_image),u_color_ramp:new o.Uniform1i(j,Y.u_color_ramp),u_opacity:new o.Uniform1f(j,Y.u_opacity)}},hillshade:function(j,Y){return{u_matrix:new o.UniformMatrix4f(j,Y.u_matrix),u_image:new o.Uniform1i(j,Y.u_image),u_latrange:new o.Uniform2f(j,Y.u_latrange),u_light:new o.Uniform2f(j,Y.u_light),u_shadow:new o.UniformColor(j,Y.u_shadow),u_highlight:new o.UniformColor(j,Y.u_highlight),u_accent:new o.UniformColor(j,Y.u_accent)}},hillshadePrepare:function(j,Y){return{u_matrix:new o.UniformMatrix4f(j,Y.u_matrix),u_image:new o.Uniform1i(j,Y.u_image),u_dimension:new o.Uniform2f(j,Y.u_dimension),u_zoom:new o.Uniform1f(j,Y.u_zoom),u_unpack:new o.Uniform4f(j,Y.u_unpack)}},line:function(j,Y){return{u_matrix:new o.UniformMatrix4f(j,Y.u_matrix),u_ratio:new o.Uniform1f(j,Y.u_ratio),u_device_pixel_ratio:new o.Uniform1f(j,Y.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(j,Y.u_units_to_pixels)}},lineGradient:function(j,Y){return{u_matrix:new o.UniformMatrix4f(j,Y.u_matrix),u_ratio:new o.Uniform1f(j,Y.u_ratio),u_device_pixel_ratio:new o.Uniform1f(j,Y.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(j,Y.u_units_to_pixels),u_image:new o.Uniform1i(j,Y.u_image),u_image_height:new o.Uniform1f(j,Y.u_image_height)}},linePattern:function(j,Y){return{u_matrix:new o.UniformMatrix4f(j,Y.u_matrix),u_texsize:new o.Uniform2f(j,Y.u_texsize),u_ratio:new o.Uniform1f(j,Y.u_ratio),u_device_pixel_ratio:new o.Uniform1f(j,Y.u_device_pixel_ratio),u_image:new o.Uniform1i(j,Y.u_image),u_units_to_pixels:new o.Uniform2f(j,Y.u_units_to_pixels),u_scale:new o.Uniform3f(j,Y.u_scale),u_fade:new o.Uniform1f(j,Y.u_fade)}},lineSDF:function(j,Y){return{u_matrix:new o.UniformMatrix4f(j,Y.u_matrix),u_ratio:new o.Uniform1f(j,Y.u_ratio),u_device_pixel_ratio:new o.Uniform1f(j,Y.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(j,Y.u_units_to_pixels),u_patternscale_a:new o.Uniform2f(j,Y.u_patternscale_a),u_patternscale_b:new o.Uniform2f(j,Y.u_patternscale_b),u_sdfgamma:new o.Uniform1f(j,Y.u_sdfgamma),u_image:new o.Uniform1i(j,Y.u_image),u_tex_y_a:new o.Uniform1f(j,Y.u_tex_y_a),u_tex_y_b:new o.Uniform1f(j,Y.u_tex_y_b),u_mix:new o.Uniform1f(j,Y.u_mix)}},raster:function(j,Y){return{u_matrix:new o.UniformMatrix4f(j,Y.u_matrix),u_tl_parent:new o.Uniform2f(j,Y.u_tl_parent),u_scale_parent:new o.Uniform1f(j,Y.u_scale_parent),u_buffer_scale:new o.Uniform1f(j,Y.u_buffer_scale),u_fade_t:new o.Uniform1f(j,Y.u_fade_t),u_opacity:new o.Uniform1f(j,Y.u_opacity),u_image0:new o.Uniform1i(j,Y.u_image0),u_image1:new o.Uniform1i(j,Y.u_image1),u_brightness_low:new o.Uniform1f(j,Y.u_brightness_low),u_brightness_high:new o.Uniform1f(j,Y.u_brightness_high),u_saturation_factor:new o.Uniform1f(j,Y.u_saturation_factor),u_contrast_factor:new o.Uniform1f(j,Y.u_contrast_factor),u_spin_weights:new o.Uniform3f(j,Y.u_spin_weights)}},symbolIcon:function(j,Y){return{u_is_size_zoom_constant:new o.Uniform1i(j,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(j,Y.u_is_size_feature_constant),u_size_t:new o.Uniform1f(j,Y.u_size_t),u_size:new o.Uniform1f(j,Y.u_size),u_camera_to_center_distance:new o.Uniform1f(j,Y.u_camera_to_center_distance),u_pitch:new o.Uniform1f(j,Y.u_pitch),u_rotate_symbol:new o.Uniform1i(j,Y.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(j,Y.u_aspect_ratio),u_fade_change:new o.Uniform1f(j,Y.u_fade_change),u_matrix:new o.UniformMatrix4f(j,Y.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(j,Y.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(j,Y.u_coord_matrix),u_is_text:new o.Uniform1i(j,Y.u_is_text),u_pitch_with_map:new o.Uniform1i(j,Y.u_pitch_with_map),u_texsize:new o.Uniform2f(j,Y.u_texsize),u_texture:new o.Uniform1i(j,Y.u_texture)}},symbolSDF:function(j,Y){return{u_is_size_zoom_constant:new o.Uniform1i(j,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(j,Y.u_is_size_feature_constant),u_size_t:new o.Uniform1f(j,Y.u_size_t),u_size:new o.Uniform1f(j,Y.u_size),u_camera_to_center_distance:new o.Uniform1f(j,Y.u_camera_to_center_distance),u_pitch:new o.Uniform1f(j,Y.u_pitch),u_rotate_symbol:new o.Uniform1i(j,Y.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(j,Y.u_aspect_ratio),u_fade_change:new o.Uniform1f(j,Y.u_fade_change),u_matrix:new o.UniformMatrix4f(j,Y.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(j,Y.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(j,Y.u_coord_matrix),u_is_text:new o.Uniform1i(j,Y.u_is_text),u_pitch_with_map:new o.Uniform1i(j,Y.u_pitch_with_map),u_texsize:new o.Uniform2f(j,Y.u_texsize),u_texture:new o.Uniform1i(j,Y.u_texture),u_gamma_scale:new o.Uniform1f(j,Y.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(j,Y.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(j,Y.u_is_halo)}},symbolTextAndIcon:function(j,Y){return{u_is_size_zoom_constant:new o.Uniform1i(j,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(j,Y.u_is_size_feature_constant),u_size_t:new o.Uniform1f(j,Y.u_size_t),u_size:new o.Uniform1f(j,Y.u_size),u_camera_to_center_distance:new o.Uniform1f(j,Y.u_camera_to_center_distance),u_pitch:new o.Uniform1f(j,Y.u_pitch),u_rotate_symbol:new o.Uniform1i(j,Y.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(j,Y.u_aspect_ratio),u_fade_change:new o.Uniform1f(j,Y.u_fade_change),u_matrix:new o.UniformMatrix4f(j,Y.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(j,Y.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(j,Y.u_coord_matrix),u_is_text:new o.Uniform1i(j,Y.u_is_text),u_pitch_with_map:new o.Uniform1i(j,Y.u_pitch_with_map),u_texsize:new o.Uniform2f(j,Y.u_texsize),u_texsize_icon:new o.Uniform2f(j,Y.u_texsize_icon),u_texture:new o.Uniform1i(j,Y.u_texture),u_texture_icon:new o.Uniform1i(j,Y.u_texture_icon),u_gamma_scale:new o.Uniform1f(j,Y.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(j,Y.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(j,Y.u_is_halo)}},background:function(j,Y){return{u_matrix:new o.UniformMatrix4f(j,Y.u_matrix),u_opacity:new o.Uniform1f(j,Y.u_opacity),u_color:new o.UniformColor(j,Y.u_color)}},backgroundPattern:function(j,Y){return{u_matrix:new o.UniformMatrix4f(j,Y.u_matrix),u_opacity:new o.Uniform1f(j,Y.u_opacity),u_image:new o.Uniform1i(j,Y.u_image),u_pattern_tl_a:new o.Uniform2f(j,Y.u_pattern_tl_a),u_pattern_br_a:new o.Uniform2f(j,Y.u_pattern_br_a),u_pattern_tl_b:new o.Uniform2f(j,Y.u_pattern_tl_b),u_pattern_br_b:new o.Uniform2f(j,Y.u_pattern_br_b),u_texsize:new o.Uniform2f(j,Y.u_texsize),u_mix:new o.Uniform1f(j,Y.u_mix),u_pattern_size_a:new o.Uniform2f(j,Y.u_pattern_size_a),u_pattern_size_b:new o.Uniform2f(j,Y.u_pattern_size_b),u_scale_a:new o.Uniform1f(j,Y.u_scale_a),u_scale_b:new o.Uniform1f(j,Y.u_scale_b),u_pixel_coord_upper:new o.Uniform2f(j,Y.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(j,Y.u_pixel_coord_lower),u_tile_units_to_pixels:new o.Uniform1f(j,Y.u_tile_units_to_pixels)}}};function oc(j,Y,q,I,H,te,le){for(var pe=j.context,ke=pe.gl,Fe=j.useProgram("collisionBox"),Ve=[],Xe=0,Je=0,ct=0;ct<I.length;ct++){var vt=I[ct],_t=Y.getTile(vt),It=_t.getBucket(q);if(It){var Ft=vt.posMatrix;0===H[0]&&0===H[1]||(Ft=j.translatePosMatrix(vt.posMatrix,_t,H,te));var Ot=le?It.textCollisionBox:It.iconCollisionBox,Yt=It.collisionCircleArray;if(Yt.length>0){var jt=o.create(),ln=Ft;o.mul(jt,It.placementInvProjMatrix,j.transform.glCoordMatrix),o.mul(jt,jt,It.placementViewportMatrix),Ve.push({circleArray:Yt,circleOffset:Je,transform:ln,invTransform:jt}),Je=Xe+=Yt.length/4}Ot&&Fe.draw(pe,ke.LINES,Ht.disabled,Qe.disabled,j.colorModeForRenderPass(),We.disabled,Vs(Ft,j.transform,_t),q.id,Ot.layoutVertexBuffer,Ot.indexBuffer,Ot.segments,null,j.transform.zoom,null,null,Ot.collisionVertexBuffer)}}if(le&&Ve.length){var tn=j.useProgram("collisionCircle"),Jt=new o.StructArrayLayout2f1f2i16;Jt.resize(4*Xe),Jt._trim();for(var Mn=0,Ln=0,Un=Ve;Ln<Un.length;Ln+=1)for(var Xn=Un[Ln],sr=0;sr<Xn.circleArray.length/4;sr++){var xr=4*sr,Mr=Xn.circleArray[xr+0],hr=Xn.circleArray[xr+1],Cr=Xn.circleArray[xr+2],Nr=Xn.circleArray[xr+3];Jt.emplace(Mn++,Mr,hr,Cr,Nr,0),Jt.emplace(Mn++,Mr,hr,Cr,Nr,1),Jt.emplace(Mn++,Mr,hr,Cr,Nr,2),Jt.emplace(Mn++,Mr,hr,Cr,Nr,3)}(!Ps||Ps.length<2*Xe)&&(Ps=function(ii){var di=2*ii,mi=new o.StructArrayLayout3ui6;mi.resize(di),mi._trim();for(var Ti=0;Ti<di;Ti++){var Li=6*Ti;mi.uint16[Li+0]=4*Ti+0,mi.uint16[Li+1]=4*Ti+1,mi.uint16[Li+2]=4*Ti+2,mi.uint16[Li+3]=4*Ti+2,mi.uint16[Li+4]=4*Ti+3,mi.uint16[Li+5]=4*Ti+0}return mi}(Xe));for(var ei=pe.createIndexBuffer(Ps,!0),_r=pe.createVertexBuffer(Jt,o.collisionCircleLayout.members,!0),Sr=0,Hr=Ve;Sr<Hr.length;Sr+=1){var Pr=Hr[Sr],Kr=Is(Pr.transform,Pr.invTransform,j.transform);tn.draw(pe,ke.TRIANGLES,Ht.disabled,Qe.disabled,j.colorModeForRenderPass(),We.disabled,Kr,q.id,_r,ei,o.SegmentVector.simpleSegment(0,2*Pr.circleOffset,Pr.circleArray.length,Pr.circleArray.length/2),null,j.transform.zoom,null,null,null)}_r.destroy(),ei.destroy()}}var Mc=o.identity(new Float32Array(16));function Qo(j,Y,q,I,H,te){var le=o.getAnchorAlignment(j),pe=-(le.horizontalAlign-.5)*Y,ke=-(le.verticalAlign-.5)*q,Fe=o.evaluateVariableOffset(j,I);return new o.Point((pe/H+Fe[0])*te,(ke/H+Fe[1])*te)}function Jc(j,Y,q,I,H,te,le,pe,ke,Fe,Ve){var Xe=j.text.placedSymbolArray,Je=j.text.dynamicLayoutVertexArray,ct=j.icon.dynamicLayoutVertexArray,vt={};Je.clear();for(var _t=0;_t<Xe.length;_t++){var It=Xe.get(_t),Ot=It.hidden||!It.crossTileID||j.allowVerticalPlacement&&!It.placedOrientation?null:I[It.crossTileID];if(Ot){var Yt=new o.Point(It.anchorX,It.anchorY),jt=hn(Yt,q?pe:le),ln=wn(te.cameraToCenterDistance,jt.signedDistanceFromCamera),tn=H.evaluateSizeForFeature(j.textSizeData,Fe,It)*ln/o.ONE_EM;q&&(tn*=j.tilePixelRatio/ke);for(var Ln=Qo(Ot.anchor,Ot.width,Ot.height,Ot.textOffset,Ot.textBoxScale,tn),Un=q?hn(Yt.add(Ln),le).point:jt.point.add(Y?Ln.rotate(-te.angle):Ln),Xn=j.allowVerticalPlacement&&It.placedOrientation===o.WritingMode.vertical?Math.PI/2:0,sr=0;sr<It.numGlyphs;sr++)o.addDynamicAttributes(Je,Un,Xn);Ve&&It.associatedIconIndex>=0&&(vt[It.associatedIconIndex]={shiftedAnchor:Un,angle:Xn})}else $n(It.numGlyphs,Je)}if(Ve){ct.clear();for(var xr=j.icon.placedSymbolArray,Mr=0;Mr<xr.length;Mr++){var hr=xr.get(Mr);if(hr.hidden)$n(hr.numGlyphs,ct);else{var Cr=vt[Mr];if(Cr)for(var Nr=0;Nr<hr.numGlyphs;Nr++)o.addDynamicAttributes(ct,Cr.shiftedAnchor,Cr.angle);else $n(hr.numGlyphs,ct)}}j.icon.dynamicLayoutVertexBuffer.updateData(ct)}j.text.dynamicLayoutVertexBuffer.updateData(Je)}function $c(j,Y,q){return q.iconsInText&&Y?"symbolTextAndIcon":j?"symbolSDF":"symbolIcon"}function es(j,Y,q,I,H,te,le,pe,ke,Fe,Ve,Xe){for(var Je=j.context,ct=Je.gl,vt=j.transform,_t="map"===pe,It="map"===ke,Ft=_t&&"point"!==q.layout.get("symbol-placement"),Ot=_t&&!It&&!Ft,Yt=void 0!==q.layout.get("symbol-sort-key").constantOr(1),jt=!1,ln=j.depthModeForSublayer(0,Ht.ReadOnly),tn=q.layout.get("text-variable-anchor"),Jt=[],Mn=0,Ln=I;Mn<Ln.length;Mn+=1){var Un=Ln[Mn],Xn=Y.getTile(Un),sr=Xn.getBucket(q);if(sr){var xr=H?sr.text:sr.icon;if(xr&&xr.segments.get().length){var Mr=xr.programConfigurations.get(q.id),hr=H||sr.sdfIcons,Cr=H?sr.textSizeData:sr.iconSizeData,Nr=It||0!==vt.pitch,ei=j.useProgram($c(hr,H,sr),Mr),_r=o.evaluateSizeForZoom(Cr,vt.zoom),Sr=void 0,Hr=[0,0],Pr=void 0,Kr=void 0,ii=null,di=void 0;if(H)Pr=Xn.glyphAtlasTexture,Kr=ct.LINEAR,Sr=Xn.glyphAtlasTexture.size,sr.iconsInText&&(Hr=Xn.imageAtlasTexture.size,ii=Xn.imageAtlasTexture,di=Nr||j.options.rotating||j.options.zooming||"composite"===Cr.kind||"camera"===Cr.kind?ct.LINEAR:ct.NEAREST);else{var Ti=1!==q.layout.get("icon-size").constantOr(0)||sr.iconsNeedLinear;Pr=Xn.imageAtlasTexture,Kr=hr||j.options.rotating||j.options.zooming||Ti||Nr?ct.LINEAR:ct.NEAREST,Sr=Xn.imageAtlasTexture.size}var Li=or(Xn,1,j.transform.zoom),pa=Fn(Un.posMatrix,It,_t,j.transform,Li),Pa=Sn(Un.posMatrix,It,_t,j.transform,Li),to=tn&&sr.hasTextData(),Ja="none"!==q.layout.get("icon-text-fit")&&to&&sr.hasIconData();Ft&&An(sr,Un.posMatrix,j,H,pa,Pa,It,Fe);var ya=j.translatePosMatrix(Un.posMatrix,Xn,te,le),Ki=Ft||H&&tn||Ja?Mc:pa,Pi=j.translatePosMatrix(Pa,Xn,te,le,!0),ga=hr&&0!==q.paint.get(H?"text-halo-width":"icon-halo-width").constantOr(1),ia={program:ei,buffers:xr,uniformValues:hr?sr.iconsInText?ki(Cr.kind,_r,Ot,It,j,ya,Ki,Pi,Sr,Hr):ol(Cr.kind,_r,Ot,It,j,ya,Ki,Pi,H,Sr,!0):Hs(Cr.kind,_r,Ot,It,j,ya,Ki,Pi,H,Sr),atlasTexture:Pr,atlasTextureIcon:ii,atlasInterpolation:Kr,atlasInterpolationIcon:di,isSDF:hr,hasHalo:ga};if(Yt&&sr.canOverlap){jt=!0;for(var bi=0,Ma=xr.segments.get();bi<Ma.length;bi+=1){var ma=Ma[bi];Jt.push({segments:new o.SegmentVector([ma]),sortKey:ma.sortKey,state:ia})}}else Jt.push({segments:xr.segments,sortKey:0,state:ia})}}}jt&&Jt.sort(function(dc,Bs){return dc.sortKey-Bs.sortKey});for(var Wa=0,$s=Jt;Wa<$s.length;Wa+=1){var hc=$s[Wa],Oi=hc.state;if(Je.activeTexture.set(ct.TEXTURE0),Oi.atlasTexture.bind(Oi.atlasInterpolation,ct.CLAMP_TO_EDGE),Oi.atlasTextureIcon&&(Je.activeTexture.set(ct.TEXTURE1),Oi.atlasTextureIcon&&Oi.atlasTextureIcon.bind(Oi.atlasInterpolationIcon,ct.CLAMP_TO_EDGE)),Oi.isSDF){var fc=Oi.uniformValues;Oi.hasHalo&&(fc.u_is_halo=1,Al(Oi.buffers,hc.segments,q,j,Oi.program,ln,Ve,Xe,fc)),fc.u_is_halo=0}Al(Oi.buffers,hc.segments,q,j,Oi.program,ln,Ve,Xe,Oi.uniformValues)}}function Al(j,Y,q,I,H,te,le,pe,ke){var Fe=I.context;H.draw(Fe,Fe.gl.TRIANGLES,te,le,pe,We.disabled,ke,q.id,j.layoutVertexBuffer,j.indexBuffer,Y,q.paint,I.transform.zoom,j.programConfigurations.get(q.id),j.dynamicLayoutVertexBuffer,j.opacityVertexBuffer)}function ka(j,Y,q,I,H,te,le){var pe,ke,Fe,Ve,Xe,Je=j.context.gl,ct=q.paint.get("fill-pattern"),vt=ct&&ct.constantOr(1),_t=q.getCrossfadeParameters();le?(ke=vt&&!q.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",pe=Je.LINES):(ke=vt?"fillPattern":"fill",pe=Je.TRIANGLES);for(var It=0,Ft=I;It<Ft.length;It+=1){var Ot=Ft[It],Yt=Y.getTile(Ot);if(!vt||Yt.patternsLoaded()){var jt=Yt.getBucket(q);if(jt){var ln=jt.programConfigurations.get(q.id),tn=j.useProgram(ke,ln);vt&&(j.context.activeTexture.set(Je.TEXTURE0),Yt.imageAtlasTexture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE),ln.updatePaintBuffers(_t));var Jt=ct.constantOr(null);if(Jt&&Yt.imageAtlas){var Mn=Yt.imageAtlas,Ln=Mn.patternPositions[Jt.to.toString()],Un=Mn.patternPositions[Jt.from.toString()];Ln&&Un&&ln.setConstantPatternPositions(Ln,Un)}var Xn=j.translatePosMatrix(Ot.posMatrix,Yt,q.paint.get("fill-translate"),q.paint.get("fill-translate-anchor"));if(le){Ve=jt.indexBuffer2,Xe=jt.segments2;var sr=[Je.drawingBufferWidth,Je.drawingBufferHeight];Fe="fillOutlinePattern"===ke&&vt?Ul(Xn,j,_t,Yt,sr):Us(Xn,sr)}else Ve=jt.indexBuffer,Xe=jt.segments,Fe=vt?al(Xn,j,_t,Yt):Oa(Xn);tn.draw(j.context,pe,H,j.stencilModeForClipping(Ot),te,We.disabled,Fe,q.id,jt.layoutVertexBuffer,Ve,Xe,q.paint,j.transform.zoom,ln)}}}}function Os(j,Y,q,I,H,te,le){for(var pe=j.context,ke=pe.gl,Fe=q.paint.get("fill-extrusion-pattern"),Ve=Fe.constantOr(1),Xe=q.getCrossfadeParameters(),Je=q.paint.get("fill-extrusion-opacity"),ct=0,vt=I;ct<vt.length;ct+=1){var _t=vt[ct],It=Y.getTile(_t),Ft=It.getBucket(q);if(Ft){var Ot=Ft.programConfigurations.get(q.id),Yt=j.useProgram(Ve?"fillExtrusionPattern":"fillExtrusion",Ot);Ve&&(j.context.activeTexture.set(ke.TEXTURE0),It.imageAtlasTexture.bind(ke.LINEAR,ke.CLAMP_TO_EDGE),Ot.updatePaintBuffers(Xe));var jt=Fe.constantOr(null);if(jt&&It.imageAtlas){var ln=It.imageAtlas,tn=ln.patternPositions[jt.to.toString()],Jt=ln.patternPositions[jt.from.toString()];tn&&Jt&&Ot.setConstantPatternPositions(tn,Jt)}var Mn=j.translatePosMatrix(_t.posMatrix,It,q.paint.get("fill-extrusion-translate"),q.paint.get("fill-extrusion-translate-anchor")),Ln=q.paint.get("fill-extrusion-vertical-gradient"),Un=Ve?_l(Mn,j,Ln,Je,_t,Xe,It):ps(Mn,j,Ln,Je);Yt.draw(pe,pe.gl.TRIANGLES,H,te,le,We.backCCW,Un,q.id,Ft.layoutVertexBuffer,Ft.indexBuffer,Ft.segments,q.paint,j.transform.zoom,Ot)}}}function sc(j,Y,q,I,H,te){var le=j.context,pe=le.gl,ke=Y.fbo;if(ke){var Fe=j.useProgram("hillshade");le.activeTexture.set(pe.TEXTURE0),pe.bindTexture(pe.TEXTURE_2D,ke.colorAttachment.get());var Ve=function(j,Y,q){var I=q.paint.get("hillshade-shadow-color"),H=q.paint.get("hillshade-highlight-color"),te=q.paint.get("hillshade-accent-color"),le=q.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===q.paint.get("hillshade-illumination-anchor")&&(le-=j.transform.angle);var pe,ke,Fe,Ve=!j.options.moving;return{u_matrix:j.transform.calculatePosMatrix(Y.tileID.toUnwrapped(),Ve),u_image:0,u_latrange:(pe=Y.tileID,ke=Math.pow(2,pe.canonical.z),Fe=pe.canonical.y,[new o.MercatorCoordinate(0,Fe/ke).toLngLat().lat,new o.MercatorCoordinate(0,(Fe+1)/ke).toLngLat().lat]),u_light:[q.paint.get("hillshade-exaggeration"),le],u_shadow:I,u_highlight:H,u_accent:te}}(j,Y,q);Fe.draw(le,pe.TRIANGLES,I,H,te,We.disabled,Ve,q.id,j.rasterBoundsBuffer,j.quadTriangleIndexBuffer,j.rasterBoundsSegments)}}function Mu(j,Y,q,I,H,te){var le=j.context,pe=le.gl,ke=Y.dem;if(ke&&ke.data){var Fe=ke.dim,Ve=ke.stride,Xe=ke.getPixels();if(le.activeTexture.set(pe.TEXTURE1),le.pixelStoreUnpackPremultiplyAlpha.set(!1),Y.demTexture=Y.demTexture||j.getTileTexture(Ve),Y.demTexture){var Je=Y.demTexture;Je.update(Xe,{premultiply:!1}),Je.bind(pe.NEAREST,pe.CLAMP_TO_EDGE)}else Y.demTexture=new o.Texture(le,Xe,pe.RGBA,{premultiply:!1}),Y.demTexture.bind(pe.NEAREST,pe.CLAMP_TO_EDGE);le.activeTexture.set(pe.TEXTURE0);var ct=Y.fbo;if(!ct){var vt=new o.Texture(le,{width:Fe,height:Fe,data:null},pe.RGBA);vt.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),(ct=Y.fbo=le.createFramebuffer(Fe,Fe,!0)).colorAttachment.set(vt.texture)}le.bindFramebuffer.set(ct.framebuffer),le.viewport.set([0,0,Fe,Fe]),j.useProgram("hillshadePrepare").draw(le,pe.TRIANGLES,I,H,te,We.disabled,function(j,Y){var q=Y.stride,I=o.create();return o.ortho(I,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(I,I,[0,-o.EXTENT,0]),{u_matrix:I,u_image:1,u_dimension:[q,q],u_zoom:j.overscaledZ,u_unpack:Y.getUnpackVector()}}(Y.tileID,ke),q.id,j.rasterBoundsBuffer,j.quadTriangleIndexBuffer,j.rasterBoundsSegments),Y.needsHillshadePrepare=!1}}function Sc(j,Y,q,I,H){var te=I.paint.get("raster-fade-duration");if(te>0){var le=o.browser.now(),pe=(le-j.timeAdded)/te,ke=Y?(le-Y.timeAdded)/te:-1,Fe=q.getSource(),Ve=H.coveringZoomLevel({tileSize:Fe.tileSize,roundZoom:Fe.roundZoom}),Xe=!Y||Math.abs(Y.tileID.overscaledZ-Ve)>Math.abs(j.tileID.overscaledZ-Ve),Je=Xe&&j.refreshedUponExpiration?1:o.clamp(Xe?pe:1-ke,0,1);return j.refreshedUponExpiration&&pe>=1&&(j.refreshedUponExpiration=!1),Y?{opacity:1,mix:1-Je}:{opacity:Je,mix:0}}return{opacity:1,mix:0}}var Uo=new o.Color(1,0,0,1),ts=new o.Color(0,1,0,1),Qc=new o.Color(0,0,1,1),Cc=new o.Color(1,0,1,1),Gl=new o.Color(0,1,1,1);function kl(j,Y,q,I){ll(j,0,Y+q/2,j.transform.width,q,I)}function Lo(j,Y,q,I){ll(j,Y-q/2,0,q,j.transform.height,I)}function ll(j,Y,q,I,H,te){var le=j.context,pe=le.gl;pe.enable(pe.SCISSOR_TEST),pe.scissor(Y*o.browser.devicePixelRatio,q*o.browser.devicePixelRatio,I*o.browser.devicePixelRatio,H*o.browser.devicePixelRatio),le.clear({color:te}),pe.disable(pe.SCISSOR_TEST)}function lc(j,Y,q){var I=j.context,H=I.gl,te=q.posMatrix,le=j.useProgram("debug"),pe=Ht.disabled,ke=Qe.disabled,Fe=j.colorModeForRenderPass();I.activeTexture.set(H.TEXTURE0),j.emptyTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE),le.draw(I,H.LINE_STRIP,pe,ke,Fe,We.disabled,ac(te,o.Color.red),"$debug",j.debugBuffer,j.tileBorderIndexBuffer,j.debugSegments);var Xe=Y.getTileByID(q.key).latestRawTileData,ct=Math.floor((Xe&&Xe.byteLength||0)/1024),vt=Y.getTile(q).tileSize,_t=512/Math.min(vt,512)*(q.overscaledZ/j.transform.zoom)*.5,It=q.canonical.toString();q.overscaledZ!==q.canonical.z&&(It+=" => "+q.overscaledZ),function(Ft,Ot){Ft.initDebugOverlayCanvas();var Yt=Ft.debugOverlayCanvas,jt=Ft.context.gl,ln=Ft.debugOverlayCanvas.getContext("2d");ln.clearRect(0,0,Yt.width,Yt.height),ln.shadowColor="white",ln.shadowBlur=2,ln.lineWidth=1.5,ln.strokeStyle="white",ln.textBaseline="top",ln.font="bold 36px Open Sans, sans-serif",ln.fillText(Ot,5,5),ln.strokeText(Ot,5,5),Ft.debugOverlayTexture.update(Yt),Ft.debugOverlayTexture.bind(jt.LINEAR,jt.CLAMP_TO_EDGE)}(j,It+" "+ct+"kb"),le.draw(I,H.TRIANGLES,pe,ke,nt.alphaBlended,We.disabled,ac(te,o.Color.transparent,_t),"$debug",j.debugBuffer,j.quadTriangleIndexBuffer,j.debugSegments)}var Ec={symbol:function(j,Y,q,I,H){if("translucent"===j.renderPass){var te=Qe.disabled,le=j.colorModeForRenderPass();q.layout.get("text-variable-anchor")&&function(pe,ke,Fe,Ve,Xe,Je,ct){for(var vt=ke.transform,_t="map"===Xe,It="map"===Je,Ft=0,Ot=pe;Ft<Ot.length;Ft+=1){var Yt=Ot[Ft],jt=Ve.getTile(Yt),ln=jt.getBucket(Fe);if(ln&&ln.text&&ln.text.segments.get().length){var Jt=o.evaluateSizeForZoom(ln.textSizeData,vt.zoom),Mn=or(jt,1,ke.transform.zoom),Ln=Fn(Yt.posMatrix,It,_t,ke.transform,Mn),Un="none"!==Fe.layout.get("icon-text-fit")&&ln.hasIconData();if(Jt){var Xn=Math.pow(2,vt.zoom-jt.tileID.overscaledZ);Jc(ln,_t,It,ct,o.symbolSize,vt,Ln,Yt.posMatrix,Xn,Jt,Un)}}}}(I,j,q,Y,q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),H),0!==q.paint.get("icon-opacity").constantOr(1)&&es(j,Y,q,I,!1,q.paint.get("icon-translate"),q.paint.get("icon-translate-anchor"),q.layout.get("icon-rotation-alignment"),q.layout.get("icon-pitch-alignment"),q.layout.get("icon-keep-upright"),te,le),0!==q.paint.get("text-opacity").constantOr(1)&&es(j,Y,q,I,!0,q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),q.layout.get("text-keep-upright"),te,le),Y.map.showCollisionBoxes&&(oc(j,Y,q,I,q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),!0),oc(j,Y,q,I,q.paint.get("icon-translate"),q.paint.get("icon-translate-anchor"),!1))}},circle:function(j,Y,q,I){if("translucent"===j.renderPass){var H=q.paint.get("circle-opacity"),te=q.paint.get("circle-stroke-width"),le=q.paint.get("circle-stroke-opacity"),pe=void 0!==q.layout.get("circle-sort-key").constantOr(1);if(0!==H.constantOr(1)||0!==te.constantOr(1)&&0!==le.constantOr(1)){for(var ke=j.context,Fe=ke.gl,Ve=j.depthModeForSublayer(0,Ht.ReadOnly),Xe=Qe.disabled,Je=j.colorModeForRenderPass(),ct=[],vt=0;vt<I.length;vt++){var _t=I[vt],It=Y.getTile(_t),Ft=It.getBucket(q);if(Ft){var Ot=Ft.programConfigurations.get(q.id),Yt={programConfiguration:Ot,program:j.useProgram("circle",Ot),layoutVertexBuffer:Ft.layoutVertexBuffer,indexBuffer:Ft.indexBuffer,uniformValues:Xc(j,_t,It,q)};if(pe)for(var jt=0,ln=Ft.segments.get();jt<ln.length;jt+=1){var tn=ln[jt];ct.push({segments:new o.SegmentVector([tn]),sortKey:tn.sortKey,state:Yt})}else ct.push({segments:Ft.segments,sortKey:0,state:Yt})}}pe&&ct.sort(function(Nr,ei){return Nr.sortKey-ei.sortKey});for(var Jt=0,Mn=ct;Jt<Mn.length;Jt+=1){var Ln=Mn[Jt],Un=Ln.state;Un.program.draw(ke,Fe.TRIANGLES,Ve,Xe,Je,We.disabled,Un.uniformValues,q.id,Un.layoutVertexBuffer,Un.indexBuffer,Ln.segments,q.paint,j.transform.zoom,Un.programConfiguration)}}}},heatmap:function(j,Y,q,I){if(0!==q.paint.get("heatmap-opacity"))if("offscreen"===j.renderPass){var H=j.context,te=H.gl,le=Qe.disabled,pe=new nt([te.ONE,te.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(_t,It,Ft){var Ot=_t.gl;_t.activeTexture.set(Ot.TEXTURE1),_t.viewport.set([0,0,It.width/4,It.height/4]);var ln,tn,Jt,Mn,Ln,Yt=Ft.heatmapFbo;if(Yt)Ot.bindTexture(Ot.TEXTURE_2D,Yt.colorAttachment.get()),_t.bindFramebuffer.set(Yt.framebuffer);else{var jt=Ot.createTexture();Ot.bindTexture(Ot.TEXTURE_2D,jt),Ot.texParameteri(Ot.TEXTURE_2D,Ot.TEXTURE_WRAP_S,Ot.CLAMP_TO_EDGE),Ot.texParameteri(Ot.TEXTURE_2D,Ot.TEXTURE_WRAP_T,Ot.CLAMP_TO_EDGE),Ot.texParameteri(Ot.TEXTURE_2D,Ot.TEXTURE_MIN_FILTER,Ot.LINEAR),Ot.texParameteri(Ot.TEXTURE_2D,Ot.TEXTURE_MAG_FILTER,Ot.LINEAR),Jt=jt,Mn=Yt=Ft.heatmapFbo=_t.createFramebuffer(It.width/4,It.height/4,!1),(Ln=(ln=_t).gl).texImage2D(Ln.TEXTURE_2D,0,Ln.RGBA,(tn=It).width/4,tn.height/4,0,Ln.RGBA,ln.extRenderToTextureHalfFloat?ln.extTextureHalfFloat.HALF_FLOAT_OES:Ln.UNSIGNED_BYTE,null),Mn.colorAttachment.set(Jt)}})(H,j,q),H.clear({color:o.Color.transparent});for(var ke=0;ke<I.length;ke++){var Fe=I[ke];if(!Y.hasRenderableParent(Fe)){var Ve=Y.getTile(Fe),Xe=Ve.getBucket(q);if(Xe){var Je=Xe.programConfigurations.get(q.id);j.useProgram("heatmap",Je).draw(H,te.TRIANGLES,Ht.disabled,le,pe,We.disabled,pu(Fe.posMatrix,Ve,j.transform.zoom,q.paint.get("heatmap-intensity")),q.id,Xe.layoutVertexBuffer,Xe.indexBuffer,Xe.segments,q.paint,j.transform.zoom,Je)}}}H.viewport.set([0,0,j.width,j.height])}else"translucent"===j.renderPass&&(j.context.setColorMode(j.colorModeForRenderPass()),function(_t,It){var Ft=_t.context,Ot=Ft.gl,Yt=It.heatmapFbo;if(Yt){Ft.activeTexture.set(Ot.TEXTURE0),Ot.bindTexture(Ot.TEXTURE_2D,Yt.colorAttachment.get()),Ft.activeTexture.set(Ot.TEXTURE1);var jt=It.colorRampTexture;jt||(jt=It.colorRampTexture=new o.Texture(Ft,It.colorRamp,Ot.RGBA)),jt.bind(Ot.LINEAR,Ot.CLAMP_TO_EDGE),_t.useProgram("heatmapTexture").draw(Ft,Ot.TRIANGLES,Ht.disabled,Qe.disabled,_t.colorModeForRenderPass(),We.disabled,function(j,Y,q,I){var H=o.create();o.ortho(H,0,j.width,j.height,0,0,1);var te=j.context.gl;return{u_matrix:H,u_world:[te.drawingBufferWidth,te.drawingBufferHeight],u_image:q,u_color_ramp:I,u_opacity:Y.paint.get("heatmap-opacity")}}(_t,It,0,1),It.id,_t.viewportBuffer,_t.quadTriangleIndexBuffer,_t.viewportSegments,It.paint,_t.transform.zoom)}}(j,q))},line:function(j,Y,q,I){if("translucent"===j.renderPass){var H=q.paint.get("line-opacity"),te=q.paint.get("line-width");if(0!==H.constantOr(1)&&0!==te.constantOr(1))for(var le=j.depthModeForSublayer(0,Ht.ReadOnly),pe=j.colorModeForRenderPass(),ke=q.paint.get("line-dasharray"),Fe=q.paint.get("line-pattern"),Ve=Fe.constantOr(1),Xe=q.paint.get("line-gradient"),Je=q.getCrossfadeParameters(),ct=Ve?"linePattern":ke?"lineSDF":Xe?"lineGradient":"line",vt=j.context,_t=vt.gl,It=!0,Ft=0,Ot=I;Ft<Ot.length;Ft+=1){var Yt=Ot[Ft],jt=Y.getTile(Yt);if(!Ve||jt.patternsLoaded()){var ln=jt.getBucket(q);if(ln){var tn=ln.programConfigurations.get(q.id),Jt=j.context.program.get(),Mn=j.useProgram(ct,tn),Ln=It||Mn.program!==Jt,Un=Fe.constantOr(null);if(Un&&jt.imageAtlas){var Xn=jt.imageAtlas,sr=Xn.patternPositions[Un.to.toString()],xr=Xn.patternPositions[Un.from.toString()];sr&&xr&&tn.setConstantPatternPositions(sr,xr)}var Mr=Ve?Gs(j,jt,q,Je):ke?wl(j,jt,q,ke,Je):Xe?Vl(j,jt,q,ln.lineClipsArray.length):gs(j,jt,q);if(Ve)vt.activeTexture.set(_t.TEXTURE0),jt.imageAtlasTexture.bind(_t.LINEAR,_t.CLAMP_TO_EDGE),tn.updatePaintBuffers(Je);else if(ke&&(Ln||j.lineAtlas.dirty))vt.activeTexture.set(_t.TEXTURE0),j.lineAtlas.bind(vt);else if(Xe){var hr=ln.gradients[q.id],Cr=hr.texture;if(q.gradientVersion!==hr.version){var Nr=256;if(q.stepInterpolant){var ei=Y.getSource().maxzoom,_r=Yt.canonical.z===ei?Math.ceil(1<<j.transform.maxZoom-Yt.canonical.z):1;Nr=o.clamp(o.nextPowerOfTwo(ln.maxLineLength/o.EXTENT*1024*_r),256,vt.maxTextureSize)}hr.gradient=o.renderColorRamp({expression:q.gradientExpression(),evaluationKey:"lineProgress",resolution:Nr,image:hr.gradient||void 0,clips:ln.lineClipsArray}),hr.texture?hr.texture.update(hr.gradient):hr.texture=new o.Texture(vt,hr.gradient,_t.RGBA),hr.version=q.gradientVersion,Cr=hr.texture}vt.activeTexture.set(_t.TEXTURE0),Cr.bind(q.stepInterpolant?_t.NEAREST:_t.LINEAR,_t.CLAMP_TO_EDGE)}Mn.draw(vt,_t.TRIANGLES,le,j.stencilModeForClipping(Yt),pe,We.disabled,Mr,q.id,ln.layoutVertexBuffer,ln.indexBuffer,ln.segments,q.paint,j.transform.zoom,tn,ln.layoutVertexBuffer2),It=!1}}}}},fill:function(j,Y,q,I){var H=q.paint.get("fill-color"),te=q.paint.get("fill-opacity");if(0!==te.constantOr(1)){var le=j.colorModeForRenderPass(),pe=q.paint.get("fill-pattern"),ke=j.opaquePassEnabledForLayer()&&!pe.constantOr(1)&&1===H.constantOr(o.Color.transparent).a&&1===te.constantOr(0)?"opaque":"translucent";if(j.renderPass===ke){var Fe=j.depthModeForSublayer(1,"opaque"===j.renderPass?Ht.ReadWrite:Ht.ReadOnly);ka(j,Y,q,I,Fe,le,!1)}if("translucent"===j.renderPass&&q.paint.get("fill-antialias")){var Ve=j.depthModeForSublayer(q.getPaintProperty("fill-outline-color")?2:0,Ht.ReadOnly);ka(j,Y,q,I,Ve,le,!0)}}},"fill-extrusion":function(j,Y,q,I){var H=q.paint.get("fill-extrusion-opacity");if(0!==H&&"translucent"===j.renderPass){var te=new Ht(j.context.gl.LEQUAL,Ht.ReadWrite,j.depthRangeFor3D);if(1!==H||q.paint.get("fill-extrusion-pattern").constantOr(1))Os(j,Y,q,I,te,Qe.disabled,nt.disabled),Os(j,Y,q,I,te,j.stencilModeFor3D(),j.colorModeForRenderPass());else{var le=j.colorModeForRenderPass();Os(j,Y,q,I,te,Qe.disabled,le)}}},hillshade:function(j,Y,q,I){if("offscreen"===j.renderPass||"translucent"===j.renderPass){for(var H=j.context,te=j.depthModeForSublayer(0,Ht.ReadOnly),le=j.colorModeForRenderPass(),pe="translucent"===j.renderPass?j.stencilConfigForOverlap(I):[{},I],ke=pe[0],Fe=0,Ve=pe[1];Fe<Ve.length;Fe+=1){var Xe=Ve[Fe],Je=Y.getTile(Xe);Je.needsHillshadePrepare&&"offscreen"===j.renderPass?Mu(j,Je,q,te,Qe.disabled,le):"translucent"===j.renderPass&&sc(j,Je,q,te,ke[Xe.overscaledZ],le)}H.viewport.set([0,0,j.width,j.height])}},raster:function(j,Y,q,I){if("translucent"===j.renderPass&&0!==q.paint.get("raster-opacity")&&I.length)for(var H=j.context,te=H.gl,le=Y.getSource(),pe=j.useProgram("raster"),ke=j.colorModeForRenderPass(),Fe=le instanceof N?[{},I]:j.stencilConfigForOverlap(I),Ve=Fe[0],Xe=Fe[1],Je=Xe[Xe.length-1].overscaledZ,ct=!j.options.moving,vt=0,_t=Xe;vt<_t.length;vt+=1){var It=_t[vt],Ft=j.depthModeForSublayer(It.overscaledZ-Je,1===q.paint.get("raster-opacity")?Ht.ReadWrite:Ht.ReadOnly,te.LESS),Ot=Y.getTile(It),Yt=j.transform.calculatePosMatrix(It.toUnwrapped(),ct);Ot.registerFadeDuration(q.paint.get("raster-fade-duration"));var jt=Y.findLoadedParent(It,0),ln=Sc(Ot,jt,Y,q,j.transform),tn=void 0,Jt=void 0,Mn="nearest"===q.paint.get("raster-resampling")?te.NEAREST:te.LINEAR;H.activeTexture.set(te.TEXTURE0),Ot.texture.bind(Mn,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST),H.activeTexture.set(te.TEXTURE1),jt?(jt.texture.bind(Mn,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST),tn=Math.pow(2,jt.tileID.overscaledZ-Ot.tileID.overscaledZ),Jt=[Ot.tileID.canonical.x*tn%1,Ot.tileID.canonical.y*tn%1]):Ot.texture.bind(Mn,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST);var Ln=Ac(Yt,Jt||[0,0],tn||1,ln,q);le instanceof N?pe.draw(H,te.TRIANGLES,Ft,Qe.disabled,ke,We.disabled,Ln,q.id,le.boundsBuffer,j.quadTriangleIndexBuffer,le.boundsSegments):pe.draw(H,te.TRIANGLES,Ft,Ve[It.overscaledZ],ke,We.disabled,Ln,q.id,j.rasterBoundsBuffer,j.quadTriangleIndexBuffer,j.rasterBoundsSegments)}},background:function(j,Y,q){var I=q.paint.get("background-color"),H=q.paint.get("background-opacity");if(0!==H){var te=j.context,le=te.gl,pe=j.transform,ke=pe.tileSize,Fe=q.paint.get("background-pattern");if(!j.isPatternMissing(Fe)){var Ve=!Fe&&1===I.a&&1===H&&j.opaquePassEnabledForLayer()?"opaque":"translucent";if(j.renderPass===Ve){var Xe=Qe.disabled,Je=j.depthModeForSublayer(0,"opaque"===Ve?Ht.ReadWrite:Ht.ReadOnly),ct=j.colorModeForRenderPass(),vt=j.useProgram(Fe?"backgroundPattern":"background"),_t=pe.coveringTiles({tileSize:ke});Fe&&(te.activeTexture.set(le.TEXTURE0),j.imageManager.bind(j.context));for(var It=q.getCrossfadeParameters(),Ft=0,Ot=_t;Ft<Ot.length;Ft+=1){var Yt=Ot[Ft],jt=j.transform.calculatePosMatrix(Yt.toUnwrapped()),ln=Fe?Kc(jt,H,j,Fe,{tileID:Yt,tileSize:ke},It):vs(jt,H,I);vt.draw(te,le.TRIANGLES,Je,Xe,ct,We.disabled,ln,q.id,j.tileExtentBuffer,j.quadTriangleIndexBuffer,j.tileExtentSegments)}}}}},debug:function(j,Y,q){for(var I=0;I<q.length;I++)lc(j,Y,q[I])},custom:function(j,Y,q){var I=j.context,H=q.implementation;if("offscreen"===j.renderPass){var te=H.prerender;te&&(j.setCustomLayerDefaults(),I.setColorMode(j.colorModeForRenderPass()),te.call(H,I.gl,j.transform.customLayerMatrix()),I.setDirty(),j.setBaseState())}else if("translucent"===j.renderPass){j.setCustomLayerDefaults(),I.setColorMode(j.colorModeForRenderPass()),I.setStencilMode(Qe.disabled);var le="3d"===H.renderingMode?new Ht(j.context.gl.LEQUAL,Ht.ReadWrite,j.depthRangeFor3D):j.depthModeForSublayer(0,Ht.ReadOnly);I.setDepthMode(le),H.render(I.gl,j.transform.customLayerMatrix()),I.setDirty(),j.setBaseState(),I.bindFramebuffer.set(null)}}},qi=function(j,Y){this.context=new et(j),this.transform=Y,this._tileTextures={},this.setup(),this.numSublayers=gt.maxUnderzooming+gt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Qn,this.gpuTimers={}};qi.prototype.resize=function(j,Y){if(this.width=j*o.browser.devicePixelRatio,this.height=Y*o.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var q=0,I=this.style._order;q<I.length;q+=1)this.style._layers[I[q]].resize()},qi.prototype.setup=function(){var j=this.context,Y=new o.StructArrayLayout2i4;Y.emplaceBack(0,0),Y.emplaceBack(o.EXTENT,0),Y.emplaceBack(0,o.EXTENT),Y.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=j.createVertexBuffer(Y,pr.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);var q=new o.StructArrayLayout2i4;q.emplaceBack(0,0),q.emplaceBack(o.EXTENT,0),q.emplaceBack(0,o.EXTENT),q.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=j.createVertexBuffer(q,pr.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);var I=new o.StructArrayLayout4i8;I.emplaceBack(0,0,0,0),I.emplaceBack(o.EXTENT,0,o.EXTENT,0),I.emplaceBack(0,o.EXTENT,0,o.EXTENT),I.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.rasterBoundsBuffer=j.createVertexBuffer(I,Z.members),this.rasterBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);var H=new o.StructArrayLayout2i4;H.emplaceBack(0,0),H.emplaceBack(1,0),H.emplaceBack(0,1),H.emplaceBack(1,1),this.viewportBuffer=j.createVertexBuffer(H,pr.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);var te=new o.StructArrayLayout1ui2;te.emplaceBack(0),te.emplaceBack(1),te.emplaceBack(3),te.emplaceBack(2),te.emplaceBack(0),this.tileBorderIndexBuffer=j.createIndexBuffer(te);var le=new o.StructArrayLayout3ui6;le.emplaceBack(0,1,2),le.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=j.createIndexBuffer(le),this.emptyTexture=new o.Texture(j,{width:1,height:1,data:new Uint8Array([0,0,0,0])},j.gl.RGBA);var pe=this.context.gl;this.stencilClearMode=new Qe({func:pe.ALWAYS,mask:0},0,255,pe.ZERO,pe.ZERO,pe.ZERO)},qi.prototype.clearStencil=function(){var j=this.context,Y=j.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var q=o.create();o.ortho(q,0,this.width,this.height,0,0,1),o.scale(q,q,[Y.drawingBufferWidth,Y.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(j,Y.TRIANGLES,Ht.disabled,this.stencilClearMode,nt.disabled,We.disabled,jo(q),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},qi.prototype._renderTileClippingMasks=function(j,Y){if(this.currentStencilSource!==j.source&&j.isTileClipped()&&Y&&Y.length){this.currentStencilSource=j.source;var q=this.context,I=q.gl;this.nextStencilID+Y.length>256&&this.clearStencil(),q.setColorMode(nt.disabled),q.setDepthMode(Ht.disabled);var H=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var te=0,le=Y;te<le.length;te+=1){var pe=le[te],ke=this._tileClippingMaskIDs[pe.key]=this.nextStencilID++;H.draw(q,I.TRIANGLES,Ht.disabled,new Qe({func:I.ALWAYS,mask:0},ke,255,I.KEEP,I.KEEP,I.REPLACE),nt.disabled,We.disabled,jo(pe.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},qi.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var j=this.nextStencilID++,Y=this.context.gl;return new Qe({func:Y.NOTEQUAL,mask:255},j,255,Y.KEEP,Y.KEEP,Y.REPLACE)},qi.prototype.stencilModeForClipping=function(j){var Y=this.context.gl;return new Qe({func:Y.EQUAL,mask:255},this._tileClippingMaskIDs[j.key],0,Y.KEEP,Y.KEEP,Y.REPLACE)},qi.prototype.stencilConfigForOverlap=function(j){var Y,q=this.context.gl,I=j.sort(function(ke,Fe){return Fe.overscaledZ-ke.overscaledZ}),H=I[I.length-1].overscaledZ,te=I[0].overscaledZ-H+1;if(te>1){this.currentStencilSource=void 0,this.nextStencilID+te>256&&this.clearStencil();for(var le={},pe=0;pe<te;pe++)le[pe+H]=new Qe({func:q.GEQUAL,mask:255},pe+this.nextStencilID,255,q.KEEP,q.KEEP,q.REPLACE);return this.nextStencilID+=te,[le,I]}return[(Y={},Y[H]=Qe.disabled,Y),I]},qi.prototype.colorModeForRenderPass=function(){var j=this.context.gl;if(this._showOverdrawInspector){var Y=.125;return new nt([j.CONSTANT_COLOR,j.ONE],new o.Color(Y,Y,Y,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?nt.unblended:nt.alphaBlended},qi.prototype.depthModeForSublayer=function(j,Y,q){if(!this.opaquePassEnabledForLayer())return Ht.disabled;var I=1-((1+this.currentLayer)*this.numSublayers+j)*this.depthEpsilon;return new Ht(q||this.context.gl.LEQUAL,Y,[I,I])},qi.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},qi.prototype.render=function(j,Y){var q=this;this.style=j,this.options=Y,this.lineAtlas=j.lineAtlas,this.imageManager=j.imageManager,this.glyphManager=j.glyphManager,this.symbolFadeChange=j.placement.symbolFadeChange(o.browser.now()),this.imageManager.beginFrame();var I=this.style._order,H=this.style.sourceCaches;for(var te in H){var le=H[te];le.used&&le.prepare(this.context)}var pe,ke,Fe={},Ve={},Xe={};for(var Je in H){var ct=H[Je];Fe[Je]=ct.getVisibleCoordinates(),Ve[Je]=Fe[Je].slice().reverse(),Xe[Je]=ct.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var vt=0;vt<I.length;vt++)if(this.style._layers[I[vt]].is3D()){this.opaquePassCutoff=vt;break}this.renderPass="offscreen";for(var It=0,Ft=I;It<Ft.length;It+=1){var Yt=this.style._layers[Ft[It]];if(Yt.hasOffscreenPass()&&!Yt.isHidden(this.transform.zoom)){var jt=Ve[Yt.source];("custom"===Yt.type||jt.length)&&this.renderLayer(this,H[Yt.source],Yt,jt)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:Y.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=Y.showOverdrawInspector,this.depthRangeFor3D=[0,1-(j._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=I.length-1;this.currentLayer>=0;this.currentLayer--){var ln=this.style._layers[I[this.currentLayer]],tn=H[ln.source],Jt=Fe[ln.source];this._renderTileClippingMasks(ln,Jt),this.renderLayer(this,tn,ln,Jt)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<I.length;this.currentLayer++){var Mn=this.style._layers[I[this.currentLayer]],Ln=H[Mn.source],Un=("symbol"===Mn.type?Xe:Ve)[Mn.source];this._renderTileClippingMasks(Mn,Fe[Mn.source]),this.renderLayer(this,Ln,Mn,Un)}this.options.showTileBoundaries&&(o.values(this.style._layers).forEach(function(Xn){Xn.source&&!Xn.isHidden(q.transform.zoom)&&(Xn.source!==(ke&&ke.id)&&(ke=q.style.sourceCaches[Xn.source]),(!pe||pe.getSource().maxzoom<ke.getSource().maxzoom)&&(pe=ke))}),pe&&Ec.debug(this,pe,pe.getVisibleCoordinates())),this.options.showPadding&&function sl(j){var Y=j.transform.padding;kl(j,j.transform.height-(Y.top||0),3,Uo),kl(j,Y.bottom||0,3,ts),Lo(j,Y.left||0,3,Qc),Lo(j,j.transform.width-(Y.right||0),3,Cc);var I,H,te,le,q=j.transform.centerPoint;ll(I=j,(H=q.x)-1,(te=j.transform.height-q.y)-10,2,20,le=Gl),ll(I,H-10,te-1,20,2,le)}(this),this.context.setDefault()},qi.prototype.renderLayer=function(j,Y,q,I){q.isHidden(this.transform.zoom)||("background"===q.type||"custom"===q.type||I.length)&&(this.id=q.id,this.gpuTimingStart(q),Ec[q.type](j,Y,q,I,this.style.placement.variableOffsets),this.gpuTimingEnd())},qi.prototype.gpuTimingStart=function(j){if(this.options.gpuTiming){var Y=this.context.extTimerQuery,q=this.gpuTimers[j.id];q||(q=this.gpuTimers[j.id]={calls:0,cpuTime:0,query:Y.createQueryEXT()}),q.calls++,Y.beginQueryEXT(Y.TIME_ELAPSED_EXT,q.query)}},qi.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var j=this.context.extTimerQuery;j.endQueryEXT(j.TIME_ELAPSED_EXT)}},qi.prototype.collectGpuTimers=function(){var j=this.gpuTimers;return this.gpuTimers={},j},qi.prototype.queryGpuTimers=function(j){var Y={};for(var q in j){var I=j[q],H=this.context.extTimerQuery,te=H.getQueryObjectEXT(I.query,H.QUERY_RESULT_EXT)/1e6;H.deleteQueryEXT(I.query),Y[q]=te}return Y},qi.prototype.translatePosMatrix=function(j,Y,q,I,H){if(!q[0]&&!q[1])return j;var te=H?"map"===I?this.transform.angle:0:"viewport"===I?-this.transform.angle:0;if(te){var le=Math.sin(te),pe=Math.cos(te);q=[q[0]*pe-q[1]*le,q[0]*le+q[1]*pe]}var ke=[H?q[0]:or(Y,q[0],this.transform.zoom),H?q[1]:or(Y,q[1],this.transform.zoom),0],Fe=new Float32Array(16);return o.translate(Fe,j,ke),Fe},qi.prototype.saveTileTexture=function(j){var Y=this._tileTextures[j.size[0]];Y?Y.push(j):this._tileTextures[j.size[0]]=[j]},qi.prototype.getTileTexture=function(j){var Y=this._tileTextures[j];return Y&&Y.length>0?Y.pop():null},qi.prototype.isPatternMissing=function(j){if(!j)return!1;if(!j.from||!j.to)return!0;var Y=this.imageManager.getPattern(j.from.toString()),q=this.imageManager.getPattern(j.to.toString());return!Y||!q},qi.prototype.useProgram=function(j,Y){this.cache=this.cache||{};var q=""+j+(Y?Y.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[q]||(this.cache[q]=new Ao(this.context,j,Fa[j],Y,kc[j],this._showOverdrawInspector)),this.cache[q]},qi.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},qi.prototype.setBaseState=function(){var j=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(j.FUNC_ADD)},qi.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},qi.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var cl=function(j,Y){this.points=j,this.planes=Y};cl.fromInvProjectionMatrix=function(j,Y,q){var I=Math.pow(2,q),H=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(le){return o.transformMat4([],le,j)}).map(function(le){return o.scale$1([],le,1/le[3]/Y*I)}),te=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(le){var pe=o.sub([],H[le[0]],H[le[1]]),ke=o.sub([],H[le[2]],H[le[1]]),Fe=o.normalize([],o.cross([],pe,ke)),Ve=-o.dot(Fe,H[le[1]]);return Fe.concat(Ve)});return new cl(H,te)};var lo=function(j,Y){this.min=j,this.max=Y,this.center=o.scale$2([],o.add([],this.min,this.max),.5)};lo.prototype.quadrant=function(j){for(var Y=[j%2==0,j<2],q=o.clone$2(this.min),I=o.clone$2(this.max),H=0;H<Y.length;H++)q[H]=Y[H]?this.min[H]:this.center[H],I[H]=Y[H]?this.center[H]:this.max[H];return I[2]=this.max[2],new lo(q,I)},lo.prototype.distanceX=function(j){return Math.max(Math.min(this.max[0],j[0]),this.min[0])-j[0]},lo.prototype.distanceY=function(j){return Math.max(Math.min(this.max[1],j[1]),this.min[1])-j[1]},lo.prototype.intersects=function(j){for(var Y=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],q=!0,I=0;I<j.planes.length;I++){for(var H=j.planes[I],te=0,le=0;le<Y.length;le++)te+=o.dot$1(H,Y[le])>=0;if(0===te)return 0;te!==Y.length&&(q=!1)}if(q)return 2;for(var pe=0;pe<3;pe++){for(var ke=Number.MAX_VALUE,Fe=-Number.MAX_VALUE,Ve=0;Ve<j.points.length;Ve++){var Xe=j.points[Ve][pe]-this.min[pe];ke=Math.min(ke,Xe),Fe=Math.max(Fe,Xe)}if(Fe<0||ke>this.max[pe]-this.min[pe])return 0}return 1};var ys=function(j,Y,q,I){if(void 0===j&&(j=0),void 0===Y&&(Y=0),void 0===q&&(q=0),void 0===I&&(I=0),isNaN(j)||j<0||isNaN(Y)||Y<0||isNaN(q)||q<0||isNaN(I)||I<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=j,this.bottom=Y,this.left=q,this.right=I};ys.prototype.interpolate=function(j,Y,q){return null!=Y.top&&null!=j.top&&(this.top=o.number(j.top,Y.top,q)),null!=Y.bottom&&null!=j.bottom&&(this.bottom=o.number(j.bottom,Y.bottom,q)),null!=Y.left&&null!=j.left&&(this.left=o.number(j.left,Y.left,q)),null!=Y.right&&null!=j.right&&(this.right=o.number(j.right,Y.right,q)),this},ys.prototype.getCenter=function(j,Y){var q=o.clamp((this.left+j-this.right)/2,0,j),I=o.clamp((this.top+Y-this.bottom)/2,0,Y);return new o.Point(q,I)},ys.prototype.equals=function(j){return this.top===j.top&&this.bottom===j.bottom&&this.left===j.left&&this.right===j.right},ys.prototype.clone=function(){return new ys(this.top,this.bottom,this.left,this.right)},ys.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Di=function(j,Y,q,I,H){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===H||H,this._minZoom=j||0,this._maxZoom=Y||22,this._minPitch=q??0,this._maxPitch=I??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ys,this._posMatrixCache={},this._alignedPosMatrixCache={}},Ui={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Di.prototype.clone=function(){var j=new Di(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return j.tileSize=this.tileSize,j.latRange=this.latRange,j.width=this.width,j.height=this.height,j._center=this._center,j.zoom=this.zoom,j.angle=this.angle,j._fov=this._fov,j._pitch=this._pitch,j._unmodified=this._unmodified,j._edgeInsets=this._edgeInsets.clone(),j._calcMatrices(),j},Ui.minZoom.get=function(){return this._minZoom},Ui.minZoom.set=function(j){this._minZoom!==j&&(this._minZoom=j,this.zoom=Math.max(this.zoom,j))},Ui.maxZoom.get=function(){return this._maxZoom},Ui.maxZoom.set=function(j){this._maxZoom!==j&&(this._maxZoom=j,this.zoom=Math.min(this.zoom,j))},Ui.minPitch.get=function(){return this._minPitch},Ui.minPitch.set=function(j){this._minPitch!==j&&(this._minPitch=j,this.pitch=Math.max(this.pitch,j))},Ui.maxPitch.get=function(){return this._maxPitch},Ui.maxPitch.set=function(j){this._maxPitch!==j&&(this._maxPitch=j,this.pitch=Math.min(this.pitch,j))},Ui.renderWorldCopies.get=function(){return this._renderWorldCopies},Ui.renderWorldCopies.set=function(j){void 0===j?j=!0:null===j&&(j=!1),this._renderWorldCopies=j},Ui.worldSize.get=function(){return this.tileSize*this.scale},Ui.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Ui.size.get=function(){return new o.Point(this.width,this.height)},Ui.bearing.get=function(){return-this.angle/Math.PI*180},Ui.bearing.set=function(j){var Y=-o.wrap(j,-180,180)*Math.PI/180;this.angle!==Y&&(this._unmodified=!1,this.angle=Y,this._calcMatrices(),this.rotationMatrix=o.create$2(),o.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Ui.pitch.get=function(){return this._pitch/Math.PI*180},Ui.pitch.set=function(j){var Y=o.clamp(j,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==Y&&(this._unmodified=!1,this._pitch=Y,this._calcMatrices())},Ui.fov.get=function(){return this._fov/Math.PI*180},Ui.fov.set=function(j){j=Math.max(.01,Math.min(60,j)),this._fov!==j&&(this._unmodified=!1,this._fov=j/180*Math.PI,this._calcMatrices())},Ui.zoom.get=function(){return this._zoom},Ui.zoom.set=function(j){var Y=Math.min(Math.max(j,this.minZoom),this.maxZoom);this._zoom!==Y&&(this._unmodified=!1,this._zoom=Y,this.scale=this.zoomScale(Y),this.tileZoom=Math.floor(Y),this.zoomFraction=Y-this.tileZoom,this._constrain(),this._calcMatrices())},Ui.center.get=function(){return this._center},Ui.center.set=function(j){j.lat===this._center.lat&&j.lng===this._center.lng||(this._unmodified=!1,this._center=j,this._constrain(),this._calcMatrices())},Ui.padding.get=function(){return this._edgeInsets.toJSON()},Ui.padding.set=function(j){this._edgeInsets.equals(j)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,j,1),this._calcMatrices())},Ui.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Di.prototype.isPaddingEqual=function(j){return this._edgeInsets.equals(j)},Di.prototype.interpolatePadding=function(j,Y,q){this._unmodified=!1,this._edgeInsets.interpolate(j,Y,q),this._constrain(),this._calcMatrices()},Di.prototype.coveringZoomLevel=function(j){var Y=(j.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/j.tileSize));return Math.max(0,Y)},Di.prototype.getVisibleUnwrappedCoordinates=function(j){var Y=[new o.UnwrappedTileID(0,j)];if(this._renderWorldCopies)for(var q=this.pointCoordinate(new o.Point(0,0)),I=this.pointCoordinate(new o.Point(this.width,0)),H=this.pointCoordinate(new o.Point(this.width,this.height)),te=this.pointCoordinate(new o.Point(0,this.height)),le=Math.floor(Math.min(q.x,I.x,H.x,te.x)),pe=Math.floor(Math.max(q.x,I.x,H.x,te.x)),ke=le-1;ke<=pe+1;ke++)0!==ke&&Y.push(new o.UnwrappedTileID(ke,j));return Y},Di.prototype.coveringTiles=function(j){var Y=this.coveringZoomLevel(j),q=Y;if(void 0!==j.minzoom&&Y<j.minzoom)return[];void 0!==j.maxzoom&&Y>j.maxzoom&&(Y=j.maxzoom);var I=o.MercatorCoordinate.fromLngLat(this.center),H=Math.pow(2,Y),te=[H*I.x,H*I.y,0],le=cl.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,Y),pe=j.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(pe=Y);var ke=function(Un){return{aabb:new lo([Un*H,0,0],[(Un+1)*H,H,0]),zoom:0,x:0,y:0,wrap:Un,fullyVisible:!1}},Fe=[],Ve=[],Xe=Y,Je=j.reparseOverscaled?q:Y;if(this._renderWorldCopies)for(var ct=1;ct<=3;ct++)Fe.push(ke(-ct)),Fe.push(ke(ct));for(Fe.push(ke(0));Fe.length>0;){var vt=Fe.pop(),_t=vt.x,It=vt.y,Ft=vt.fullyVisible;if(!Ft){var Ot=vt.aabb.intersects(le);if(0===Ot)continue;Ft=2===Ot}var Yt=vt.aabb.distanceX(te),jt=vt.aabb.distanceY(te),ln=Math.max(Math.abs(Yt),Math.abs(jt));if(vt.zoom===Xe||ln>3+(1<<Xe-vt.zoom)-2&&vt.zoom>=pe)Ve.push({tileID:new o.OverscaledTileID(vt.zoom===Xe?Je:vt.zoom,vt.wrap,vt.zoom,_t,It),distanceSq:o.sqrLen([te[0]-.5-_t,te[1]-.5-It])});else for(var Jt=0;Jt<4;Jt++){var Mn=(_t<<1)+Jt%2,Ln=(It<<1)+(Jt>>1);Fe.push({aabb:vt.aabb.quadrant(Jt),zoom:vt.zoom+1,x:Mn,y:Ln,wrap:vt.wrap,fullyVisible:Ft})}}return Ve.sort(function(Un,Xn){return Un.distanceSq-Xn.distanceSq}).map(function(Un){return Un.tileID})},Di.prototype.resize=function(j,Y){this.width=j,this.height=Y,this.pixelsToGLUnits=[2/j,-2/Y],this._constrain(),this._calcMatrices()},Ui.unmodified.get=function(){return this._unmodified},Di.prototype.zoomScale=function(j){return Math.pow(2,j)},Di.prototype.scaleZoom=function(j){return Math.log(j)/Math.LN2},Di.prototype.project=function(j){var Y=o.clamp(j.lat,-this.maxValidLatitude,this.maxValidLatitude);return new o.Point(o.mercatorXfromLng(j.lng)*this.worldSize,o.mercatorYfromLat(Y)*this.worldSize)},Di.prototype.unproject=function(j){return new o.MercatorCoordinate(j.x/this.worldSize,j.y/this.worldSize).toLngLat()},Ui.point.get=function(){return this.project(this.center)},Di.prototype.setLocationAtPoint=function(j,Y){var q=this.pointCoordinate(Y),I=this.pointCoordinate(this.centerPoint),H=this.locationCoordinate(j),te=new o.MercatorCoordinate(H.x-(q.x-I.x),H.y-(q.y-I.y));this.center=this.coordinateLocation(te),this._renderWorldCopies&&(this.center=this.center.wrap())},Di.prototype.locationPoint=function(j){return this.coordinatePoint(this.locationCoordinate(j))},Di.prototype.pointLocation=function(j){return this.coordinateLocation(this.pointCoordinate(j))},Di.prototype.locationCoordinate=function(j){return o.MercatorCoordinate.fromLngLat(j)},Di.prototype.coordinateLocation=function(j){return j.toLngLat()},Di.prototype.pointCoordinate=function(j){var Y=[j.x,j.y,0,1],q=[j.x,j.y,1,1];o.transformMat4(Y,Y,this.pixelMatrixInverse),o.transformMat4(q,q,this.pixelMatrixInverse);var I=Y[3],H=q[3],pe=Y[1]/I,ke=q[1]/H,Fe=Y[2]/I,Ve=q[2]/H,Xe=Fe===Ve?0:(0-Fe)/(Ve-Fe);return new o.MercatorCoordinate(o.number(Y[0]/I,q[0]/H,Xe)/this.worldSize,o.number(pe,ke,Xe)/this.worldSize)},Di.prototype.coordinatePoint=function(j){var Y=[j.x*this.worldSize,j.y*this.worldSize,0,1];return o.transformMat4(Y,Y,this.pixelMatrix),new o.Point(Y[0]/Y[3],Y[1]/Y[3])},Di.prototype.getBounds=function(){return(new o.LngLatBounds).extend(this.pointLocation(new o.Point(0,0))).extend(this.pointLocation(new o.Point(this.width,0))).extend(this.pointLocation(new o.Point(this.width,this.height))).extend(this.pointLocation(new o.Point(0,this.height)))},Di.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new o.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Di.prototype.setMaxBounds=function(j){j?(this.lngRange=[j.getWest(),j.getEast()],this.latRange=[j.getSouth(),j.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Di.prototype.calculatePosMatrix=function(j,Y){void 0===Y&&(Y=!1);var q=j.key,I=Y?this._alignedPosMatrixCache:this._posMatrixCache;if(I[q])return I[q];var H=j.canonical,te=this.worldSize/this.zoomScale(H.z),le=H.x+Math.pow(2,H.z)*j.wrap,pe=o.identity(new Float64Array(16));return o.translate(pe,pe,[le*te,H.y*te,0]),o.scale(pe,pe,[te/o.EXTENT,te/o.EXTENT,1]),o.multiply(pe,Y?this.alignedProjMatrix:this.projMatrix,pe),I[q]=new Float32Array(pe),I[q]},Di.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Di.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var j,Y,q,I,H=-90,te=90,le=-180,pe=180,ke=this.size,Fe=this._unmodified;if(this.latRange){var Ve=this.latRange;H=o.mercatorYfromLat(Ve[1])*this.worldSize,j=(te=o.mercatorYfromLat(Ve[0])*this.worldSize)-H<ke.y?ke.y/(te-H):0}if(this.lngRange){var Xe=this.lngRange;le=o.mercatorXfromLng(Xe[0])*this.worldSize,Y=(pe=o.mercatorXfromLng(Xe[1])*this.worldSize)-le<ke.x?ke.x/(pe-le):0}var Je=this.point,ct=Math.max(Y||0,j||0);if(ct)return this.center=this.unproject(new o.Point(Y?(pe+le)/2:Je.x,j?(te+H)/2:Je.y)),this.zoom+=this.scaleZoom(ct),this._unmodified=Fe,void(this._constraining=!1);if(this.latRange){var vt=Je.y,_t=ke.y/2;vt-_t<H&&(I=H+_t),vt+_t>te&&(I=te-_t)}if(this.lngRange){var It=Je.x,Ft=ke.x/2;It-Ft<le&&(q=le+Ft),It+Ft>pe&&(q=pe-Ft)}void 0===q&&void 0===I||(this.center=this.unproject(new o.Point(void 0!==q?q:Je.x,void 0!==I?I:Je.y))),this._unmodified=Fe,this._constraining=!1}},Di.prototype._calcMatrices=function(){if(this.height){var Y=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var q=Math.PI/2+this._pitch,I=this._fov*(.5+Y.y/this.height),H=Math.sin(I)*this.cameraToCenterDistance/Math.sin(o.clamp(Math.PI-q-I,.01,Math.PI-.01)),te=this.point,le=te.x,pe=te.y,ke=1.01*(Math.cos(Math.PI/2-this._pitch)*H+this.cameraToCenterDistance),Fe=this.height/50,Ve=new Float64Array(16);o.perspective(Ve,this._fov,this.width/this.height,Fe,ke),Ve[8]=2*-Y.x/this.width,Ve[9]=2*Y.y/this.height,o.scale(Ve,Ve,[1,-1,1]),o.translate(Ve,Ve,[0,0,-this.cameraToCenterDistance]),o.rotateX(Ve,Ve,this._pitch),o.rotateZ(Ve,Ve,this.angle),o.translate(Ve,Ve,[-le,-pe,0]),this.mercatorMatrix=o.scale([],Ve,[this.worldSize,this.worldSize,this.worldSize]),o.scale(Ve,Ve,[1,1,o.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=Ve,this.invProjMatrix=o.invert([],this.projMatrix);var Xe=this.width%2/2,Je=this.height%2/2,ct=Math.cos(this.angle),vt=Math.sin(this.angle),_t=le-Math.round(le)+ct*Xe+vt*Je,It=pe-Math.round(pe)+ct*Je+vt*Xe,Ft=new Float64Array(Ve);if(o.translate(Ft,Ft,[_t>.5?_t-1:_t,It>.5?It-1:It,0]),this.alignedProjMatrix=Ft,Ve=o.create(),o.scale(Ve,Ve,[this.width/2,-this.height/2,1]),o.translate(Ve,Ve,[1,-1,0]),this.labelPlaneMatrix=Ve,Ve=o.create(),o.scale(Ve,Ve,[1,-1,1]),o.translate(Ve,Ve,[-1,-1,0]),o.scale(Ve,Ve,[2/this.width,2/this.height,1]),this.glCoordMatrix=Ve,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(Ve=o.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=Ve,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Di.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var j=this.pointCoordinate(new o.Point(0,0)),Y=[j.x*this.worldSize,j.y*this.worldSize,0,1];return o.transformMat4(Y,Y,this.pixelMatrix)[3]/this.cameraToCenterDistance},Di.prototype.getCameraPoint=function(){var Y=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.Point(0,Y))},Di.prototype.getCameraQueryGeometry=function(j){var Y=this.getCameraPoint();if(1===j.length)return[j[0],Y];for(var q=Y.x,I=Y.y,H=Y.x,te=Y.y,le=0,pe=j;le<pe.length;le+=1){var ke=pe[le];q=Math.min(q,ke.x),I=Math.min(I,ke.y),H=Math.max(H,ke.x),te=Math.max(te,ke.y)}return[new o.Point(q,I),new o.Point(H,I),new o.Point(H,te),new o.Point(q,te),new o.Point(q,I)]},Object.defineProperties(Di.prototype,Ui);var Vo=function(j){var Y,I,H,te;this._hashName=j&&encodeURIComponent(j),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(Y=this._updateHashUnthrottled.bind(this),300,I=!1,H=null,te=function(){H=null,I&&(Y(),H=setTimeout(te,300),I=!1)},function(){return I=!0,H||te(),H})};Vo.prototype.addTo=function(j){return this._map=j,o.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Vo.prototype.remove=function(){return o.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Vo.prototype.getHashString=function(j){var Y=this._map.getCenter(),q=Math.round(100*this._map.getZoom())/100,I=Math.ceil((q*Math.LN2+Math.log(512/360/.5))/Math.LN10),H=Math.pow(10,I),te=Math.round(Y.lng*H)/H,le=Math.round(Y.lat*H)/H,pe=this._map.getBearing(),ke=this._map.getPitch(),Fe="";if(Fe+=j?"/"+te+"/"+le+"/"+q:q+"/"+le+"/"+te,(pe||ke)&&(Fe+="/"+Math.round(10*pe)/10),ke&&(Fe+="/"+Math.round(ke)),this._hashName){var Ve=this._hashName,Xe=!1,Je=o.window.location.hash.slice(1).split("&").map(function(ct){var vt=ct.split("=")[0];return vt===Ve?(Xe=!0,vt+"="+Fe):ct}).filter(function(ct){return ct});return Xe||Je.push(Ve+"="+Fe),"#"+Je.join("&")}return"#"+Fe},Vo.prototype._getCurrentHash=function(){var j,Y=this,q=o.window.location.hash.replace("#","");return this._hashName?(q.split("&").map(function(I){return I.split("=")}).forEach(function(I){I[0]===Y._hashName&&(j=I)}),(j&&j[1]||"").split("/")):q.split("/")},Vo.prototype._onHashChange=function(){var j=this._getCurrentHash();if(j.length>=3&&!j.some(function(q){return isNaN(q)})){var Y=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(j[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+j[2],+j[1]],zoom:+j[0],bearing:Y,pitch:+(j[4]||0)}),!0}return!1},Vo.prototype._updateHashUnthrottled=function(){var j=o.window.location.href.replace(/(#.+)?$/,this.getHashString());try{o.window.history.replaceState(o.window.history.state,null,j)}catch{}};var ul={linearity:.3,easing:o.bezier(0,0,.3,1)},Hl=o.extend({deceleration:2500,maxSpeed:1400},ul),cc=o.extend({deceleration:20,maxSpeed:1400},ul),ql=o.extend({deceleration:1e3,maxSpeed:360},ul),Ic=o.extend({deceleration:1e3,maxSpeed:90},ul),Go=function(j){this._map=j,this.clear()};function qs(j,Y){(!j.duration||j.duration<Y.duration)&&(j.duration=Y.duration,j.easing=Y.easing)}function Ml(j,Y,q){var I=q.maxSpeed,H=q.linearity,te=q.deceleration,le=o.clamp(j*H/(Y/1e3),-I,I),pe=Math.abs(le)/(te*H);return{easing:q.easing,duration:1e3*pe,amount:le*(pe/2)}}Go.prototype.clear=function(){this._inertiaBuffer=[]},Go.prototype.record=function(j){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.browser.now(),settings:j})},Go.prototype._drainInertiaBuffer=function(){for(var j=this._inertiaBuffer,Y=o.browser.now();j.length>0&&Y-j[0].time>160;)j.shift()},Go.prototype._onMoveEnd=function(j){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var Y={zoom:0,bearing:0,pitch:0,pan:new o.Point(0,0),pinchAround:void 0,around:void 0},q=0,I=this._inertiaBuffer;q<I.length;q+=1){var H=I[q].settings;Y.zoom+=H.zoomDelta||0,Y.bearing+=H.bearingDelta||0,Y.pitch+=H.pitchDelta||0,H.panDelta&&Y.pan._add(H.panDelta),H.around&&(Y.around=H.around),H.pinchAround&&(Y.pinchAround=H.pinchAround)}var te=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,le={};if(Y.pan.mag()){var pe=Ml(Y.pan.mag(),te,o.extend({},Hl,j||{}));le.offset=Y.pan.mult(pe.amount/Y.pan.mag()),le.center=this._map.transform.center,qs(le,pe)}if(Y.zoom){var ke=Ml(Y.zoom,te,cc);le.zoom=this._map.transform.zoom+ke.amount,qs(le,ke)}if(Y.bearing){var Fe=Ml(Y.bearing,te,ql);le.bearing=this._map.transform.bearing+o.clamp(Fe.amount,-179,179),qs(le,Fe)}if(Y.pitch){var Ve=Ml(Y.pitch,te,Ic);le.pitch=this._map.transform.pitch+Ve.amount,qs(le,Ve)}if(le.zoom||le.bearing){var Xe=void 0===Y.pinchAround?Y.around:Y.pinchAround;le.around=Xe?this._map.unproject(Xe):this._map.getCenter()}return this.clear(),o.extend(le,{noMoveStart:!0})}};var yo=function(j){function Y(I,H,te,le){void 0===le&&(le={});var pe=b.mousePos(H.getCanvasContainer(),te),ke=H.unproject(pe);j.call(this,I,o.extend({point:pe,lngLat:ke,originalEvent:te},le)),this._defaultPrevented=!1,this.target=H}j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y;var q={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},q.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,q),Y}(o.Event),Wl=function(j){function Y(I,H,te){var le="touchend"===I?te.changedTouches:te.touches,pe=b.touchPos(H.getCanvasContainer(),le),ke=pe.map(function(Xe){return H.unproject(Xe)}),Fe=pe.reduce(function(Xe,Je,ct,vt){return Xe.add(Je.div(vt.length))},new o.Point(0,0)),Ve=H.unproject(Fe);j.call(this,I,{points:pe,point:Fe,lngLats:ke,lngLat:Ve,originalEvent:te}),this._defaultPrevented=!1}j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y;var q={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},q.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,q),Y}(o.Event),Ho=function(j){function Y(I,H,te){j.call(this,I,{originalEvent:te}),this._defaultPrevented=!1}j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y;var q={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},q.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,q),Y}(o.Event),Ka=function(j,Y){this._map=j,this._clickTolerance=Y.clickTolerance};Ka.prototype.reset=function(){delete this._mousedownPos},Ka.prototype.wheel=function(j){return this._firePreventable(new Ho(j.type,this._map,j))},Ka.prototype.mousedown=function(j,Y){return this._mousedownPos=Y,this._firePreventable(new yo(j.type,this._map,j))},Ka.prototype.mouseup=function(j){this._map.fire(new yo(j.type,this._map,j))},Ka.prototype.click=function(j,Y){this._mousedownPos&&this._mousedownPos.dist(Y)>=this._clickTolerance||this._map.fire(new yo(j.type,this._map,j))},Ka.prototype.dblclick=function(j){return this._firePreventable(new yo(j.type,this._map,j))},Ka.prototype.mouseover=function(j){this._map.fire(new yo(j.type,this._map,j))},Ka.prototype.mouseout=function(j){this._map.fire(new yo(j.type,this._map,j))},Ka.prototype.touchstart=function(j){return this._firePreventable(new Wl(j.type,this._map,j))},Ka.prototype.touchmove=function(j){this._map.fire(new Wl(j.type,this._map,j))},Ka.prototype.touchend=function(j){this._map.fire(new Wl(j.type,this._map,j))},Ka.prototype.touchcancel=function(j){this._map.fire(new Wl(j.type,this._map,j))},Ka.prototype._firePreventable=function(j){if(this._map.fire(j),j.defaultPrevented)return{}},Ka.prototype.isEnabled=function(){return!0},Ka.prototype.isActive=function(){return!1},Ka.prototype.enable=function(){},Ka.prototype.disable=function(){};var eo=function(j){this._map=j};eo.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},eo.prototype.mousemove=function(j){this._map.fire(new yo(j.type,this._map,j))},eo.prototype.mousedown=function(){this._delayContextMenu=!0},eo.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new yo("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},eo.prototype.contextmenu=function(j){this._delayContextMenu?this._contextMenuEvent=j:this._map.fire(new yo(j.type,this._map,j)),this._map.listens("contextmenu")&&j.preventDefault()},eo.prototype.isEnabled=function(){return!0},eo.prototype.isActive=function(){return!1},eo.prototype.enable=function(){},eo.prototype.disable=function(){};var Wi=function(j,Y){this._map=j,this._el=j.getCanvasContainer(),this._container=j.getContainer(),this._clickTolerance=Y.clickTolerance||1};function Ha(j,Y){for(var q={},I=0;I<j.length;I++)q[j[I].identifier]=Y[I];return q}Wi.prototype.isEnabled=function(){return!!this._enabled},Wi.prototype.isActive=function(){return!!this._active},Wi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Wi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Wi.prototype.mousedown=function(j,Y){this.isEnabled()&&j.shiftKey&&0===j.button&&(b.disableDrag(),this._startPos=this._lastPos=Y,this._active=!0)},Wi.prototype.mousemoveWindow=function(j,Y){if(this._active){var q=Y;if(!(this._lastPos.equals(q)||!this._box&&q.dist(this._startPos)<this._clickTolerance)){var I=this._startPos;this._lastPos=q,this._box||(this._box=b.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",j));var H=Math.min(I.x,q.x),te=Math.max(I.x,q.x),le=Math.min(I.y,q.y),pe=Math.max(I.y,q.y);b.setTransform(this._box,"translate("+H+"px,"+le+"px)"),this._box.style.width=te-H+"px",this._box.style.height=pe-le+"px"}}},Wi.prototype.mouseupWindow=function(j,Y){var q=this;if(this._active&&0===j.button){var I=this._startPos,H=Y;if(this.reset(),b.suppressClick(),I.x!==H.x||I.y!==H.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:j})),{cameraAnimation:function(te){return te.fitScreenCoordinates(I,H,q._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",j)}},Wi.prototype.keydown=function(j){this._active&&27===j.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",j))},Wi.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(b.remove(this._box),this._box=null),b.enableDrag(),delete this._startPos,delete this._lastPos},Wi.prototype._fireEvent=function(j,Y){return this._map.fire(new o.Event(j,{originalEvent:Y}))};var Ws=function(j){this.reset(),this.numTouches=j.numTouches};Ws.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Ws.prototype.touchstart=function(j,Y,q){(this.centroid||q.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=j.timeStamp),q.length===this.numTouches&&(this.centroid=function(I){for(var H=new o.Point(0,0),te=0,le=I;te<le.length;te+=1)H._add(le[te]);return H.div(I.length)}(Y),this.touches=Ha(q,Y)))},Ws.prototype.touchmove=function(j,Y,q){if(!this.aborted&&this.centroid){var I=Ha(q,Y);for(var H in this.touches){var le=I[H];(!le||le.dist(this.touches[H])>30)&&(this.aborted=!0)}}},Ws.prototype.touchend=function(j,Y,q){if((!this.centroid||j.timeStamp-this.startTime>500)&&(this.aborted=!0),0===q.length){var I=!this.aborted&&this.centroid;if(this.reset(),I)return I}};var Sl=function(j){this.singleTap=new Ws(j),this.numTaps=j.numTaps,this.reset()};Sl.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Sl.prototype.touchstart=function(j,Y,q){this.singleTap.touchstart(j,Y,q)},Sl.prototype.touchmove=function(j,Y,q){this.singleTap.touchmove(j,Y,q)},Sl.prototype.touchend=function(j,Y,q){var I=this.singleTap.touchend(j,Y,q);if(I){var H=j.timeStamp-this.lastTime<500,te=!this.lastTap||this.lastTap.dist(I)<30;if(H&&te||this.reset(),this.count++,this.lastTime=j.timeStamp,this.lastTap=I,this.count===this.numTaps)return this.reset(),I}};var co=function(){this._zoomIn=new Sl({numTouches:1,numTaps:2}),this._zoomOut=new Sl({numTouches:2,numTaps:1}),this.reset()};co.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},co.prototype.touchstart=function(j,Y,q){this._zoomIn.touchstart(j,Y,q),this._zoomOut.touchstart(j,Y,q)},co.prototype.touchmove=function(j,Y,q){this._zoomIn.touchmove(j,Y,q),this._zoomOut.touchmove(j,Y,q)},co.prototype.touchend=function(j,Y,q){var I=this,H=this._zoomIn.touchend(j,Y,q),te=this._zoomOut.touchend(j,Y,q);return H?(this._active=!0,j.preventDefault(),setTimeout(function(){return I.reset()},0),{cameraAnimation:function(le){return le.easeTo({duration:300,zoom:le.getZoom()+1,around:le.unproject(H)},{originalEvent:j})}}):te?(this._active=!0,j.preventDefault(),setTimeout(function(){return I.reset()},0),{cameraAnimation:function(le){return le.easeTo({duration:300,zoom:le.getZoom()-1,around:le.unproject(te)},{originalEvent:j})}}):void 0},co.prototype.touchcancel=function(){this.reset()},co.prototype.enable=function(){this._enabled=!0},co.prototype.disable=function(){this._enabled=!1,this.reset()},co.prototype.isEnabled=function(){return this._enabled},co.prototype.isActive=function(){return this._active};var hl={0:1,2:2},uo=function(j){this.reset(),this._clickTolerance=j.clickTolerance||1};uo.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},uo.prototype._correctButton=function(j,Y){return!1},uo.prototype._move=function(j,Y){return{}},uo.prototype.mousedown=function(j,Y){if(!this._lastPoint){var q=b.mouseButton(j);this._correctButton(j,q)&&(this._lastPoint=Y,this._eventButton=q)}},uo.prototype.mousemoveWindow=function(j,Y){var I,te,q=this._lastPoint;if(q)if(j.preventDefault(),te=hl[this._eventButton],void 0===(I=j).buttons||(I.buttons&te)!==te)this.reset();else if(this._moved||!(Y.dist(q)<this._clickTolerance))return this._moved=!0,this._lastPoint=Y,this._move(q,Y)},uo.prototype.mouseupWindow=function(j){this._lastPoint&&b.mouseButton(j)===this._eventButton&&(this._moved&&b.suppressClick(),this.reset())},uo.prototype.enable=function(){this._enabled=!0},uo.prototype.disable=function(){this._enabled=!1,this.reset()},uo.prototype.isEnabled=function(){return this._enabled},uo.prototype.isActive=function(){return this._active};var Yl=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.mousedown=function(q,I){j.prototype.mousedown.call(this,q,I),this._lastPoint&&(this._active=!0)},Y.prototype._correctButton=function(q,I){return 0===I&&!q.ctrlKey},Y.prototype._move=function(q,I){return{around:I,panDelta:I.sub(q)}},Y}(uo),Po=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype._correctButton=function(q,I){return 0===I&&q.ctrlKey||2===I},Y.prototype._move=function(q,I){var H=.8*(I.x-q.x);if(H)return this._active=!0,{bearingDelta:H}},Y.prototype.contextmenu=function(q){q.preventDefault()},Y}(uo),ko=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype._correctButton=function(q,I){return 0===I&&q.ctrlKey||2===I},Y.prototype._move=function(q,I){var H=-.5*(I.y-q.y);if(H)return this._active=!0,{pitchDelta:H}},Y.prototype.contextmenu=function(q){q.preventDefault()},Y}(uo),qo=function(j){this._minTouches=1,this._clickTolerance=j.clickTolerance||1,this.reset()};qo.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new o.Point(0,0)},qo.prototype.touchstart=function(j,Y,q){return this._calculateTransform(j,Y,q)},qo.prototype.touchmove=function(j,Y,q){if(this._active&&!(q.length<this._minTouches))return j.preventDefault(),this._calculateTransform(j,Y,q)},qo.prototype.touchend=function(j,Y,q){this._calculateTransform(j,Y,q),this._active&&q.length<this._minTouches&&this.reset()},qo.prototype.touchcancel=function(){this.reset()},qo.prototype._calculateTransform=function(j,Y,q){q.length>0&&(this._active=!0);var I=Ha(q,Y),H=new o.Point(0,0),te=new o.Point(0,0),le=0;for(var pe in I){var ke=I[pe],Fe=this._touches[pe];Fe&&(H._add(ke),te._add(ke.sub(Fe)),le++,I[pe]=ke)}if(this._touches=I,!(le<this._minTouches)&&te.mag()){var Ve=te.div(le);if(this._sum._add(Ve),!(this._sum.mag()<this._clickTolerance))return{around:H.div(le),panDelta:Ve}}},qo.prototype.enable=function(){this._enabled=!0},qo.prototype.disable=function(){this._enabled=!1,this.reset()},qo.prototype.isEnabled=function(){return this._enabled},qo.prototype.isActive=function(){return this._active};var na=function(){this.reset()};function ns(j,Y,q){for(var I=0;I<j.length;I++)if(j[I].identifier===q)return Y[I]}function $r(j,Y){return Math.log(j/Y)/Math.LN2}na.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},na.prototype._start=function(j){},na.prototype._move=function(j,Y,q){return{}},na.prototype.touchstart=function(j,Y,q){this._firstTwoTouches||q.length<2||(this._firstTwoTouches=[q[0].identifier,q[1].identifier],this._start([Y[0],Y[1]]))},na.prototype.touchmove=function(j,Y,q){if(this._firstTwoTouches){j.preventDefault();var I=this._firstTwoTouches,te=I[1],le=ns(q,Y,I[0]),pe=ns(q,Y,te);if(le&&pe){var ke=this._aroundCenter?null:le.add(pe).div(2);return this._move([le,pe],ke,j)}}},na.prototype.touchend=function(j,Y,q){if(this._firstTwoTouches){var I=this._firstTwoTouches,te=I[1],le=ns(q,Y,I[0]),pe=ns(q,Y,te);le&&pe||(this._active&&b.suppressClick(),this.reset())}},na.prototype.touchcancel=function(){this.reset()},na.prototype.enable=function(j){this._enabled=!0,this._aroundCenter=!!j&&"center"===j.around},na.prototype.disable=function(){this._enabled=!1,this.reset()},na.prototype.isEnabled=function(){return this._enabled},na.prototype.isActive=function(){return this._active};var fl=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.reset=function(){j.prototype.reset.call(this),delete this._distance,delete this._startDistance},Y.prototype._start=function(q){this._startDistance=this._distance=q[0].dist(q[1])},Y.prototype._move=function(q,I){var H=this._distance;if(this._distance=q[0].dist(q[1]),this._active||!(Math.abs($r(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:$r(this._distance,H),pinchAround:I}},Y}(na);function Lc(j,Y){return 180*j.angleWith(Y)/Math.PI}var Rs=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.reset=function(){j.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},Y.prototype._start=function(q){this._startVector=this._vector=q[0].sub(q[1]),this._minDiameter=q[0].dist(q[1])},Y.prototype._move=function(q,I){var H=this._vector;if(this._vector=q[0].sub(q[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Lc(this._vector,H),pinchAround:I}},Y.prototype._isBelowThreshold=function(q){this._minDiameter=Math.min(this._minDiameter,q.mag());var I=25/(Math.PI*this._minDiameter)*360,H=Lc(q,this._startVector);return Math.abs(H)<I},Y}(na);function Ds(j){return Math.abs(j.y)>Math.abs(j.x)}var Cl=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.reset=function(){j.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},Y.prototype._start=function(q){this._lastPoints=q,Ds(q[0].sub(q[1]))&&(this._valid=!1)},Y.prototype._move=function(q,I,H){var te=q[0].sub(this._lastPoints[0]),le=q[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(te,le,H.timeStamp),this._valid)return this._lastPoints=q,this._active=!0,{pitchDelta:(te.y+le.y)/2*-.5}},Y.prototype.gestureBeginsVertically=function(q,I,H){if(void 0!==this._valid)return this._valid;var te=q.mag()>=2,le=I.mag()>=2;if(te||le){if(!te||!le)return void 0===this._firstMove&&(this._firstMove=H),H-this._firstMove<100&&void 0;var pe=q.y>0==I.y>0;return Ds(q)&&Ds(I)&&pe}},Y}(na),rs={panStep:100,bearingStep:15,pitchStep:10},Br=function(){var j=rs;this._panStep=j.panStep,this._bearingStep=j.bearingStep,this._pitchStep=j.pitchStep,this._rotationDisabled=!1};function Pc(j){return j*(2-j)}Br.prototype.reset=function(){this._active=!1},Br.prototype.keydown=function(j){var Y=this;if(!(j.altKey||j.ctrlKey||j.metaKey)){var q=0,I=0,H=0,te=0,le=0;switch(j.keyCode){case 61:case 107:case 171:case 187:q=1;break;case 189:case 109:case 173:q=-1;break;case 37:j.shiftKey?I=-1:(j.preventDefault(),te=-1);break;case 39:j.shiftKey?I=1:(j.preventDefault(),te=1);break;case 38:j.shiftKey?H=1:(j.preventDefault(),le=-1);break;case 40:j.shiftKey?H=-1:(j.preventDefault(),le=1);break;default:return}return this._rotationDisabled&&(I=0,H=0),{cameraAnimation:function(pe){var ke=pe.getZoom();pe.easeTo({duration:300,easeId:"keyboardHandler",easing:Pc,zoom:q?Math.round(ke)+q*(j.shiftKey?2:1):ke,bearing:pe.getBearing()+I*Y._bearingStep,pitch:pe.getPitch()+H*Y._pitchStep,offset:[-te*Y._panStep,-le*Y._panStep],center:pe.getCenter()},{originalEvent:j})}}}},Br.prototype.enable=function(){this._enabled=!0},Br.prototype.disable=function(){this._enabled=!1,this.reset()},Br.prototype.isEnabled=function(){return this._enabled},Br.prototype.isActive=function(){return this._active},Br.prototype.disableRotation=function(){this._rotationDisabled=!0},Br.prototype.enableRotation=function(){this._rotationDisabled=!1};var xs=4.000244140625,qa=function(j,Y){this._map=j,this._el=j.getCanvasContainer(),this._handler=Y,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,o.bindAll(["_onTimeout"],this)};qa.prototype.setZoomRate=function(j){this._defaultZoomRate=j},qa.prototype.setWheelZoomRate=function(j){this._wheelZoomRate=j},qa.prototype.isEnabled=function(){return!!this._enabled},qa.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},qa.prototype.isZooming=function(){return!!this._zooming},qa.prototype.enable=function(j){this.isEnabled()||(this._enabled=!0,this._aroundCenter=j&&"center"===j.around)},qa.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},qa.prototype.wheel=function(j){if(this.isEnabled()){var Y=j.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*j.deltaY:j.deltaY,q=o.browser.now(),I=q-(this._lastWheelEventTime||0);this._lastWheelEventTime=q,0!==Y&&Y%xs==0?this._type="wheel":0!==Y&&Math.abs(Y)<4?this._type="trackpad":I>400?(this._type=null,this._lastValue=Y,this._timeout=setTimeout(this._onTimeout,40,j)):this._type||(this._type=Math.abs(I*Y)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,Y+=this._lastValue)),j.shiftKey&&Y&&(Y/=4),this._type&&(this._lastWheelEvent=j,this._delta-=Y,this._active||this._start(j)),j.preventDefault()}},qa.prototype._onTimeout=function(j){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(j)},qa.prototype._start=function(j){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var Y=b.mousePos(this._el,j);this._around=o.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(Y)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},qa.prototype.renderFrame=function(){var j=this;if(this._frameId&&(this._frameId=null,this.isActive())){var Y=this._map.transform;if(0!==this._delta){var q="wheel"===this._type&&Math.abs(this._delta)>xs?this._wheelZoomRate:this._defaultZoomRate,I=2/(1+Math.exp(-Math.abs(this._delta*q)));this._delta<0&&0!==I&&(I=1/I);var H="number"==typeof this._targetZoom?Y.zoomScale(this._targetZoom):Y.scale;this._targetZoom=Math.min(Y.maxZoom,Math.max(Y.minZoom,Y.scaleZoom(H*I))),"wheel"===this._type&&(this._startZoom=Y.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var te,le="number"==typeof this._targetZoom?this._targetZoom:Y.zoom,pe=this._startZoom,ke=this._easing,Fe=!1;if("wheel"===this._type&&pe&&ke){var Ve=Math.min((o.browser.now()-this._lastWheelEventTime)/200,1),Xe=ke(Ve);te=o.number(pe,le,Xe),Ve<1?this._frameId||(this._frameId=!0):Fe=!0}else te=le,Fe=!0;return this._active=!0,Fe&&(this._active=!1,this._finishTimeout=setTimeout(function(){j._zooming=!1,j._handler._triggerRenderFrame(),delete j._targetZoom,delete j._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Fe,zoomDelta:te-Y.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},qa.prototype._smoothOutEasing=function(j){var Y=o.ease;if(this._prevEase){var q=this._prevEase,I=(o.browser.now()-q.start)/q.duration,H=q.easing(I+.01)-q.easing(I),te=.27/Math.sqrt(H*H+1e-4)*.01,le=Math.sqrt(.0729-te*te);Y=o.bezier(te,le,.25,1)}return this._prevEase={start:o.browser.now(),duration:j,easing:Y},Y},qa.prototype.reset=function(){this._active=!1};var dl=function(j,Y){this._clickZoom=j,this._tapZoom=Y};dl.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},dl.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},dl.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},dl.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Wo=function(){this.reset()};Wo.prototype.reset=function(){this._active=!1},Wo.prototype.dblclick=function(j,Y){return j.preventDefault(),{cameraAnimation:function(q){q.easeTo({duration:300,zoom:q.getZoom()+(j.shiftKey?-1:1),around:q.unproject(Y)},{originalEvent:j})}}},Wo.prototype.enable=function(){this._enabled=!0},Wo.prototype.disable=function(){this._enabled=!1,this.reset()},Wo.prototype.isEnabled=function(){return this._enabled},Wo.prototype.isActive=function(){return this._active};var _s=function(){this._tap=new Sl({numTouches:1,numTaps:1}),this.reset()};_s.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},_s.prototype.touchstart=function(j,Y,q){this._swipePoint||(this._tapTime&&j.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?q.length>0&&(this._swipePoint=Y[0],this._swipeTouch=q[0].identifier):this._tap.touchstart(j,Y,q))},_s.prototype.touchmove=function(j,Y,q){if(this._tapTime){if(this._swipePoint){if(q[0].identifier!==this._swipeTouch)return;var I=Y[0],H=I.y-this._swipePoint.y;return this._swipePoint=I,j.preventDefault(),this._active=!0,{zoomDelta:H/128}}}else this._tap.touchmove(j,Y,q)},_s.prototype.touchend=function(j,Y,q){this._tapTime?this._swipePoint&&0===q.length&&this.reset():this._tap.touchend(j,Y,q)&&(this._tapTime=j.timeStamp)},_s.prototype.touchcancel=function(){this.reset()},_s.prototype.enable=function(){this._enabled=!0},_s.prototype.disable=function(){this._enabled=!1,this.reset()},_s.prototype.isEnabled=function(){return this._enabled},_s.prototype.isActive=function(){return this._active};var ho=function(j,Y,q){this._el=j,this._mousePan=Y,this._touchPan=q};ho.prototype.enable=function(j){this._inertiaOptions=j||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},ho.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},ho.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},ho.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var bs=function(j,Y,q){this._pitchWithRotate=j.pitchWithRotate,this._mouseRotate=Y,this._mousePitch=q};bs.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},bs.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},bs.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},bs.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var ws=function(j,Y,q,I){this._el=j,this._touchZoom=Y,this._touchRotate=q,this._tapDragZoom=I,this._rotationDisabled=!1,this._enabled=!0};ws.prototype.enable=function(j){this._touchZoom.enable(j),this._rotationDisabled||this._touchRotate.enable(j),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},ws.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},ws.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},ws.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},ws.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},ws.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Ys=function(j){return j.zoom||j.drag||j.pitch||j.rotate},El=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y}(o.Event);function Zs(j){return j.panDelta&&j.panDelta.mag()||j.zoomDelta||j.bearingDelta||j.pitchDelta}var zi=function(j,Y){this._map=j,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Go(j),this._bearingSnap=Y.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(Y),o.bindAll(["handleEvent","handleWindowEvent"],this);var q=this._el;this._listeners=[[q,"touchstart",{passive:!0}],[q,"touchmove",{passive:!1}],[q,"touchend",void 0],[q,"touchcancel",void 0],[q,"mousedown",void 0],[q,"mousemove",void 0],[q,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[q,"mouseover",void 0],[q,"mouseout",void 0],[q,"dblclick",void 0],[q,"click",void 0],[q,"keydown",{capture:!1}],[q,"keyup",void 0],[q,"wheel",{passive:!1}],[q,"contextmenu",void 0],[o.window,"blur",void 0]];for(var I=0,H=this._listeners;I<H.length;I+=1){var te=H[I],le=te[0];b.addEventListener(le,te[1],le===o.window.document?this.handleWindowEvent:this.handleEvent,te[2])}};zi.prototype.destroy=function(){for(var j=0,Y=this._listeners;j<Y.length;j+=1){var q=Y[j],I=q[0];b.removeEventListener(I,q[1],I===o.window.document?this.handleWindowEvent:this.handleEvent,q[2])}},zi.prototype._addDefaultHandlers=function(j){var Y=this._map,q=Y.getCanvasContainer();this._add("mapEvent",new Ka(Y,j));var I=Y.boxZoom=new Wi(Y,j);this._add("boxZoom",I);var H=new co,te=new Wo;Y.doubleClickZoom=new dl(te,H),this._add("tapZoom",H),this._add("clickZoom",te);var le=new _s;this._add("tapDragZoom",le);var pe=Y.touchPitch=new Cl;this._add("touchPitch",pe);var ke=new Po(j),Fe=new ko(j);Y.dragRotate=new bs(j,ke,Fe),this._add("mouseRotate",ke,["mousePitch"]),this._add("mousePitch",Fe,["mouseRotate"]);var Ve=new Yl(j),Xe=new qo(j);Y.dragPan=new ho(q,Ve,Xe),this._add("mousePan",Ve),this._add("touchPan",Xe,["touchZoom","touchRotate"]);var Je=new Rs,ct=new fl;Y.touchZoomRotate=new ws(q,ct,Je,le),this._add("touchRotate",Je,["touchPan","touchZoom"]),this._add("touchZoom",ct,["touchPan","touchRotate"]);var vt=Y.scrollZoom=new qa(Y,this);this._add("scrollZoom",vt,["mousePan"]);var _t=Y.keyboard=new Br;this._add("keyboard",_t),this._add("blockableMapEvent",new eo(Y));for(var It=0,Ft=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];It<Ft.length;It+=1){var Ot=Ft[It];j.interactive&&j[Ot]&&Y[Ot].enable(j[Ot])}},zi.prototype._add=function(j,Y,q){this._handlers.push({handlerName:j,handler:Y,allowed:q}),this._handlersById[j]=Y},zi.prototype.stop=function(j){if(!this._updatingCamera){for(var Y=0,q=this._handlers;Y<q.length;Y+=1)q[Y].handler.reset();this._inertia.clear(),this._fireEvents({},{},j),this._changes=[]}},zi.prototype.isActive=function(){for(var j=0,Y=this._handlers;j<Y.length;j+=1)if(Y[j].handler.isActive())return!0;return!1},zi.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},zi.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},zi.prototype.isMoving=function(){return!!Ys(this._eventsInProgress)||this.isZooming()},zi.prototype._blockedByActive=function(j,Y,q){for(var I in j)if(I!==q&&(!Y||Y.indexOf(I)<0))return!0;return!1},zi.prototype.handleWindowEvent=function(j){this.handleEvent(j,j.type+"Window")},zi.prototype._getMapTouches=function(j){for(var Y=[],q=0,I=j;q<I.length;q+=1){var H=I[q];this._el.contains(H.target)&&Y.push(H)}return Y},zi.prototype.handleEvent=function(j,Y){if("blur"!==j.type){this._updatingCamera=!0;for(var q="renderFrame"===j.type?void 0:j,I={needsRenderFrame:!1},H={},te={},le=j.touches?this._getMapTouches(j.touches):void 0,pe=le?b.touchPos(this._el,le):b.mousePos(this._el,j),ke=0,Fe=this._handlers;ke<Fe.length;ke+=1){var Ve=Fe[ke],Xe=Ve.handlerName,Je=Ve.handler,ct=Ve.allowed;if(Je.isEnabled()){var vt=void 0;this._blockedByActive(te,ct,Xe)?Je.reset():Je[Y||j.type]&&(vt=Je[Y||j.type](j,pe,le),this.mergeHandlerResult(I,H,vt,Xe,q),vt&&vt.needsRenderFrame&&this._triggerRenderFrame()),(vt||Je.isActive())&&(te[Xe]=Je)}}var _t={};for(var It in this._previousActiveHandlers)te[It]||(_t[It]=q);this._previousActiveHandlers=te,(Object.keys(_t).length||Zs(I))&&(this._changes.push([I,H,_t]),this._triggerRenderFrame()),(Object.keys(te).length||Zs(I))&&this._map._stop(!0),this._updatingCamera=!1;var Ft=I.cameraAnimation;Ft&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ft(this._map))}else this.stop(!0)},zi.prototype.mergeHandlerResult=function(j,Y,q,I,H){if(q){o.extend(j,q);var te={handlerName:I,originalEvent:q.originalEvent||H};void 0!==q.zoomDelta&&(Y.zoom=te),void 0!==q.panDelta&&(Y.drag=te),void 0!==q.pitchDelta&&(Y.pitch=te),void 0!==q.bearingDelta&&(Y.rotate=te)}},zi.prototype._applyChanges=function(){for(var j={},Y={},q={},I=0,H=this._changes;I<H.length;I+=1){var te=H[I],le=te[0],pe=te[1],ke=te[2];le.panDelta&&(j.panDelta=(j.panDelta||new o.Point(0,0))._add(le.panDelta)),le.zoomDelta&&(j.zoomDelta=(j.zoomDelta||0)+le.zoomDelta),le.bearingDelta&&(j.bearingDelta=(j.bearingDelta||0)+le.bearingDelta),le.pitchDelta&&(j.pitchDelta=(j.pitchDelta||0)+le.pitchDelta),void 0!==le.around&&(j.around=le.around),void 0!==le.pinchAround&&(j.pinchAround=le.pinchAround),le.noInertia&&(j.noInertia=le.noInertia),o.extend(Y,pe),o.extend(q,ke)}this._updateMapTransform(j,Y,q),this._changes=[]},zi.prototype._updateMapTransform=function(j,Y,q){var I=this._map,H=I.transform;if(!Zs(j))return this._fireEvents(Y,q,!0);var te=j.panDelta,le=j.zoomDelta,pe=j.bearingDelta,ke=j.pitchDelta,Fe=j.around,Ve=j.pinchAround;void 0!==Ve&&(Fe=Ve),I._stop(!0),Fe=Fe||I.transform.centerPoint;var Xe=H.pointLocation(te?Fe.sub(te):Fe);pe&&(H.bearing+=pe),ke&&(H.pitch+=ke),le&&(H.zoom+=le),H.setLocationAtPoint(Xe,Fe),this._map._update(),j.noInertia||this._inertia.record(j),this._fireEvents(Y,q,!0)},zi.prototype._fireEvents=function(j,Y,q){var I=this,H=Ys(this._eventsInProgress),te=Ys(j),le={};for(var pe in j)this._eventsInProgress[pe]||(le[pe+"start"]=j[pe].originalEvent),this._eventsInProgress[pe]=j[pe];for(var Fe in!H&&te&&this._fireEvent("movestart",te.originalEvent),le)this._fireEvent(Fe,le[Fe]);for(var Ve in te&&this._fireEvent("move",te.originalEvent),j)this._fireEvent(Ve,j[Ve].originalEvent);var Je,ct={};for(var vt in this._eventsInProgress){var _t=this._eventsInProgress[vt],It=_t.handlerName,Ft=_t.originalEvent;this._handlersById[It].isActive()||(delete this._eventsInProgress[vt],ct[vt+"end"]=Je=Y[It]||Ft)}for(var Ot in ct)this._fireEvent(Ot,ct[Ot]);var Yt=Ys(this._eventsInProgress);if(q&&(H||te)&&!Yt){this._updatingCamera=!0;var jt=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ln=function(tn){return 0!==tn&&-I._bearingSnap<tn&&tn<I._bearingSnap};jt?(ln(jt.bearing||this._map.getBearing())&&(jt.bearing=0),this._map.easeTo(jt,{originalEvent:Je})):(this._map.fire(new o.Event("moveend",{originalEvent:Je})),ln(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},zi.prototype._fireEvent=function(j,Y){this._map.fire(new o.Event(j,Y?{originalEvent:Y}:{}))},zi.prototype._requestFrame=function(){var j=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(Y){delete j._frameId,j.handleEvent(new El("renderFrame",{timeStamp:Y})),j._applyChanges()})},zi.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var ja=function(j){function Y(q,I){j.call(this),this._moving=!1,this._zooming=!1,this.transform=q,this._bearingSnap=I.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.getCenter=function(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)},Y.prototype.setCenter=function(q,I){return this.jumpTo({center:q},I)},Y.prototype.panBy=function(q,I,H){return q=o.Point.convert(q).mult(-1),this.panTo(this.transform.center,o.extend({offset:q},I),H)},Y.prototype.panTo=function(q,I,H){return this.easeTo(o.extend({center:q},I),H)},Y.prototype.getZoom=function(){return this.transform.zoom},Y.prototype.setZoom=function(q,I){return this.jumpTo({zoom:q},I),this},Y.prototype.zoomTo=function(q,I,H){return this.easeTo(o.extend({zoom:q},I),H)},Y.prototype.zoomIn=function(q,I){return this.zoomTo(this.getZoom()+1,q,I),this},Y.prototype.zoomOut=function(q,I){return this.zoomTo(this.getZoom()-1,q,I),this},Y.prototype.getBearing=function(){return this.transform.bearing},Y.prototype.setBearing=function(q,I){return this.jumpTo({bearing:q},I),this},Y.prototype.getPadding=function(){return this.transform.padding},Y.prototype.setPadding=function(q,I){return this.jumpTo({padding:q},I),this},Y.prototype.rotateTo=function(q,I,H){return this.easeTo(o.extend({bearing:q},I),H)},Y.prototype.resetNorth=function(q,I){return this.rotateTo(0,o.extend({duration:1e3},q),I),this},Y.prototype.resetNorthPitch=function(q,I){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},q),I),this},Y.prototype.snapToNorth=function(q,I){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(q,I):this},Y.prototype.getPitch=function(){return this.transform.pitch},Y.prototype.setPitch=function(q,I){return this.jumpTo({pitch:q},I),this},Y.prototype.cameraForBounds=function(q,I){q=o.LngLatBounds.convert(q);var H=I&&I.bearing||0;return this._cameraForBoxAndBearing(q.getNorthWest(),q.getSouthEast(),H,I)},Y.prototype._cameraForBoxAndBearing=function(q,I,H,te){var le={top:0,bottom:0,right:0,left:0};if("number"==typeof(te=o.extend({padding:le,offset:[0,0],maxZoom:this.transform.maxZoom},te)).padding){var pe=te.padding;te.padding={top:pe,bottom:pe,right:pe,left:pe}}te.padding=o.extend(le,te.padding);var ke=this.transform,Fe=ke.padding,Ve=ke.project(o.LngLat.convert(q)),Xe=ke.project(o.LngLat.convert(I)),Je=Ve.rotate(-H*Math.PI/180),ct=Xe.rotate(-H*Math.PI/180),vt=new o.Point(Math.max(Je.x,ct.x),Math.max(Je.y,ct.y)),_t=new o.Point(Math.min(Je.x,ct.x),Math.min(Je.y,ct.y)),It=vt.sub(_t),Ft=(ke.width-(Fe.left+Fe.right+te.padding.left+te.padding.right))/It.x,Ot=(ke.height-(Fe.top+Fe.bottom+te.padding.top+te.padding.bottom))/It.y;if(!(Ot<0||Ft<0)){var Yt=Math.min(ke.scaleZoom(ke.scale*Math.min(Ft,Ot)),te.maxZoom),jt="number"==typeof te.offset.x?new o.Point(te.offset.x,te.offset.y):o.Point.convert(te.offset),Jt=new o.Point((te.padding.left-te.padding.right)/2,(te.padding.top-te.padding.bottom)/2).rotate(H*Math.PI/180),Mn=jt.add(Jt).mult(ke.scale/ke.zoomScale(Yt));return{center:ke.unproject(Ve.add(Xe).div(2).sub(Mn)),zoom:Yt,bearing:H}}o.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},Y.prototype.fitBounds=function(q,I,H){return this._fitInternal(this.cameraForBounds(q,I),I,H)},Y.prototype.fitScreenCoordinates=function(q,I,H,te,le){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.Point.convert(q)),this.transform.pointLocation(o.Point.convert(I)),H,te),te,le)},Y.prototype._fitInternal=function(q,I,H){return q?(delete(I=o.extend(q,I)).padding,I.linear?this.easeTo(I,H):this.flyTo(I,H)):this},Y.prototype.jumpTo=function(q,I){this.stop();var H=this.transform,te=!1,le=!1,pe=!1;return"zoom"in q&&H.zoom!==+q.zoom&&(te=!0,H.zoom=+q.zoom),void 0!==q.center&&(H.center=o.LngLat.convert(q.center)),"bearing"in q&&H.bearing!==+q.bearing&&(le=!0,H.bearing=+q.bearing),"pitch"in q&&H.pitch!==+q.pitch&&(pe=!0,H.pitch=+q.pitch),null==q.padding||H.isPaddingEqual(q.padding)||(H.padding=q.padding),this.fire(new o.Event("movestart",I)).fire(new o.Event("move",I)),te&&this.fire(new o.Event("zoomstart",I)).fire(new o.Event("zoom",I)).fire(new o.Event("zoomend",I)),le&&this.fire(new o.Event("rotatestart",I)).fire(new o.Event("rotate",I)).fire(new o.Event("rotateend",I)),pe&&this.fire(new o.Event("pitchstart",I)).fire(new o.Event("pitch",I)).fire(new o.Event("pitchend",I)),this.fire(new o.Event("moveend",I))},Y.prototype.easeTo=function(q,I){var H=this;this._stop(!1,q.easeId),(!1===(q=o.extend({offset:[0,0],duration:500,easing:o.ease},q)).animate||!q.essential&&o.browser.prefersReducedMotion)&&(q.duration=0);var te=this.transform,le=this.getZoom(),pe=this.getBearing(),ke=this.getPitch(),Fe=this.getPadding(),Ve="zoom"in q?+q.zoom:le,Xe="bearing"in q?this._normalizeBearing(q.bearing,pe):pe,Je="pitch"in q?+q.pitch:ke,ct="padding"in q?q.padding:te.padding,vt=o.Point.convert(q.offset),_t=te.centerPoint.add(vt),It=te.pointLocation(_t),Ft=o.LngLat.convert(q.center||It);this._normalizeCenter(Ft);var Ot,Yt,jt=te.project(It),ln=te.project(Ft).sub(jt),tn=te.zoomScale(Ve-le);q.around&&(Ot=o.LngLat.convert(q.around),Yt=te.locationPoint(Ot));var Jt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Ve!==le,this._rotating=this._rotating||pe!==Xe,this._pitching=this._pitching||Je!==ke,this._padding=!te.isPaddingEqual(ct),this._easeId=q.easeId,this._prepareEase(I,q.noMoveStart,Jt),this._ease(function(Mn){if(H._zooming&&(te.zoom=o.number(le,Ve,Mn)),H._rotating&&(te.bearing=o.number(pe,Xe,Mn)),H._pitching&&(te.pitch=o.number(ke,Je,Mn)),H._padding&&(te.interpolatePadding(Fe,ct,Mn),_t=te.centerPoint.add(vt)),Ot)te.setLocationAtPoint(Ot,Yt);else{var Ln=te.zoomScale(te.zoom-le),Un=Ve>le?Math.min(2,tn):Math.max(.5,tn),Xn=Math.pow(Un,1-Mn),sr=te.unproject(jt.add(ln.mult(Mn*Xn)).mult(Ln));te.setLocationAtPoint(te.renderWorldCopies?sr.wrap():sr,_t)}H._fireMoveEvents(I)},function(Mn){H._afterEase(I,Mn)},q),this},Y.prototype._prepareEase=function(q,I,H){void 0===H&&(H={}),this._moving=!0,I||H.moving||this.fire(new o.Event("movestart",q)),this._zooming&&!H.zooming&&this.fire(new o.Event("zoomstart",q)),this._rotating&&!H.rotating&&this.fire(new o.Event("rotatestart",q)),this._pitching&&!H.pitching&&this.fire(new o.Event("pitchstart",q))},Y.prototype._fireMoveEvents=function(q){this.fire(new o.Event("move",q)),this._zooming&&this.fire(new o.Event("zoom",q)),this._rotating&&this.fire(new o.Event("rotate",q)),this._pitching&&this.fire(new o.Event("pitch",q))},Y.prototype._afterEase=function(q,I){if(!this._easeId||!I||this._easeId!==I){delete this._easeId;var H=this._zooming,te=this._rotating,le=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,H&&this.fire(new o.Event("zoomend",q)),te&&this.fire(new o.Event("rotateend",q)),le&&this.fire(new o.Event("pitchend",q)),this.fire(new o.Event("moveend",q))}},Y.prototype.flyTo=function(q,I){var H=this;if(!q.essential&&o.browser.prefersReducedMotion){var te=o.pick(q,["center","zoom","bearing","pitch","around"]);return this.jumpTo(te,I)}this.stop(),q=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},q);var le=this.transform,pe=this.getZoom(),ke=this.getBearing(),Fe=this.getPitch(),Ve=this.getPadding(),Xe="zoom"in q?o.clamp(+q.zoom,le.minZoom,le.maxZoom):pe,Je="bearing"in q?this._normalizeBearing(q.bearing,ke):ke,ct="pitch"in q?+q.pitch:Fe,vt="padding"in q?q.padding:le.padding,_t=le.zoomScale(Xe-pe),It=o.Point.convert(q.offset),Ft=le.centerPoint.add(It),Ot=le.pointLocation(Ft),Yt=o.LngLat.convert(q.center||Ot);this._normalizeCenter(Yt);var jt=le.project(Ot),ln=le.project(Yt).sub(jt),tn=q.curve,Jt=Math.max(le.width,le.height),Mn=Jt/_t,Ln=ln.mag();if("minZoom"in q){var Un=o.clamp(Math.min(q.minZoom,pe,Xe),le.minZoom,le.maxZoom),Xn=Jt/le.zoomScale(Un-pe);tn=Math.sqrt(Xn/Ln*2)}var sr=tn*tn;function xr(Pr){var Kr=(Mn*Mn-Jt*Jt+(Pr?-1:1)*sr*sr*Ln*Ln)/(2*(Pr?Mn:Jt)*sr*Ln);return Math.log(Math.sqrt(Kr*Kr+1)-Kr)}function Mr(Pr){return(Math.exp(Pr)-Math.exp(-Pr))/2}function hr(Pr){return(Math.exp(Pr)+Math.exp(-Pr))/2}var Cr=xr(0),Nr=function(Pr){return hr(Cr)/hr(Cr+tn*Pr)},ei=function(Pr){return Jt*((hr(Cr)*(Mr(Kr=Cr+tn*Pr)/hr(Kr))-Mr(Cr))/sr)/Ln;var Kr},_r=(xr(1)-Cr)/tn;if(Math.abs(Ln)<1e-6||!isFinite(_r)){if(Math.abs(Jt-Mn)<1e-6)return this.easeTo(q,I);var Sr=Mn<Jt?-1:1;_r=Math.abs(Math.log(Mn/Jt))/tn,ei=function(){return 0},Nr=function(Pr){return Math.exp(Sr*tn*Pr)}}return q.duration="duration"in q?+q.duration:1e3*_r/("screenSpeed"in q?+q.screenSpeed/tn:+q.speed),q.maxDuration&&q.duration>q.maxDuration&&(q.duration=0),this._zooming=!0,this._rotating=ke!==Je,this._pitching=ct!==Fe,this._padding=!le.isPaddingEqual(vt),this._prepareEase(I,!1),this._ease(function(Pr){var Kr=Pr*_r,ii=1/Nr(Kr);le.zoom=1===Pr?Xe:pe+le.scaleZoom(ii),H._rotating&&(le.bearing=o.number(ke,Je,Pr)),H._pitching&&(le.pitch=o.number(Fe,ct,Pr)),H._padding&&(le.interpolatePadding(Ve,vt,Pr),Ft=le.centerPoint.add(It));var di=1===Pr?Yt:le.unproject(jt.add(ln.mult(ei(Kr))).mult(ii));le.setLocationAtPoint(le.renderWorldCopies?di.wrap():di,Ft),H._fireMoveEvents(I)},function(){return H._afterEase(I)},q),this},Y.prototype.isEasing=function(){return!!this._easeFrameId},Y.prototype.stop=function(){return this._stop()},Y.prototype._stop=function(q,I){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var H=this._onEaseEnd;delete this._onEaseEnd,H.call(this,I)}if(!q){var te=this.handlers;te&&te.stop(!1)}return this},Y.prototype._ease=function(q,I,H){!1===H.animate||0===H.duration?(q(1),I()):(this._easeStart=o.browser.now(),this._easeOptions=H,this._onEaseFrame=q,this._onEaseEnd=I,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},Y.prototype._renderFrameCallback=function(){var q=Math.min((o.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(q)),q<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},Y.prototype._normalizeBearing=function(q,I){q=o.wrap(q,-180,180);var H=Math.abs(q-I);return Math.abs(q-360-I)<H&&(q-=360),Math.abs(q+360-I)<H&&(q+=360),q},Y.prototype._normalizeCenter=function(q){var I=this.transform;if(I.renderWorldCopies&&!I.lngRange){var H=q.lng-I.center.lng;q.lng+=H>180?-360:H<-180?360:0}},Y}(o.Evented),Oo=function(j){void 0===j&&(j={}),this.options=j,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Oo.prototype.getDefaultPosition=function(){return"bottom-right"},Oo.prototype.onAdd=function(j){var Y=this.options&&this.options.compact;return this._map=j,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=b.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=b.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),Y&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===Y&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Oo.prototype.onRemove=function(){b.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Oo.prototype._setElementTitle=function(j,Y){var q=this._map._getUIString("AttributionControl."+Y);j.title=q,j.setAttribute("aria-label",q)},Oo.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Oo.prototype._updateEditLink=function(){var j=this._editLink;j||(j=this._editLink=this._container.querySelector(".mapbox-improve-map"));var Y=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(j){var q=Y.reduce(function(I,H,te){return H.value&&(I+=H.key+"="+H.value+(te<Y.length-1?"&":"")),I},"?");j.href=o.config.FEEDBACK_URL+"/"+q+(this._map._hash?this._map._hash.getHashString(!0):""),j.rel="noopener nofollow",this._setElementTitle(j,"MapFeedback")}},Oo.prototype._updateData=function(j){!j||"metadata"!==j.sourceDataType&&"visibility"!==j.sourceDataType&&"style"!==j.dataType||(this._updateAttributions(),this._updateEditLink())},Oo.prototype._updateAttributions=function(){if(this._map.style){var j=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?j=j.concat(this.options.customAttribution.map(function(pe){return"string"!=typeof pe?"":pe})):"string"==typeof this.options.customAttribution&&j.push(this.options.customAttribution)),this._map.style.stylesheet){var Y=this._map.style.stylesheet;this.styleOwner=Y.owner,this.styleId=Y.id}var q=this._map.style.sourceCaches;for(var I in q){var H=q[I];if(H.used){var te=H.getSource();te.attribution&&j.indexOf(te.attribution)<0&&j.push(te.attribution)}}j.sort(function(pe,ke){return pe.length-ke.length});var le=(j=j.filter(function(pe,ke){for(var Fe=ke+1;Fe<j.length;Fe++)if(j[Fe].indexOf(pe)>=0)return!1;return!0})).join(" | ");le!==this._attribHTML&&(this._attribHTML=le,j.length?(this._innerContainer.innerHTML=le,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Oo.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var zs=function(){o.bindAll(["_updateLogo"],this),o.bindAll(["_updateCompact"],this)};zs.prototype.onAdd=function(j){this._map=j,this._container=b.create("div","mapboxgl-ctrl");var Y=b.create("a","mapboxgl-ctrl-logo");return Y.target="_blank",Y.rel="noopener nofollow",Y.href="https://www.mapbox.com/",Y.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),Y.setAttribute("rel","noopener nofollow"),this._container.appendChild(Y),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},zs.prototype.onRemove=function(){b.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},zs.prototype.getDefaultPosition=function(){return"bottom-left"},zs.prototype._updateLogo=function(j){j&&"metadata"!==j.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},zs.prototype._logoRequired=function(){if(this._map.style){var j=this._map.style.sourceCaches;for(var Y in j)if(j[Y].getSource().mapbox_logo)return!0;return!1}},zs.prototype._updateCompact=function(){var j=this._container.children;if(j.length){var Y=j[0];this._map.getCanvasContainer().offsetWidth<250?Y.classList.add("mapboxgl-compact"):Y.classList.remove("mapboxgl-compact")}};var Ua=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Ua.prototype.add=function(j){var Y=++this._id;return this._queue.push({callback:j,id:Y,cancelled:!1}),Y},Ua.prototype.remove=function(j){for(var Y=this._currentlyRunning,q=0,I=Y?this._queue.concat(Y):this._queue;q<I.length;q+=1){var H=I[q];if(H.id===j)return void(H.cancelled=!0)}},Ua.prototype.run=function(j){void 0===j&&(j=0);var Y=this._currentlyRunning=this._queue;this._queue=[];for(var q=0,I=Y;q<I.length;q+=1){var H=I[q];if(!H.cancelled&&(H.callback(j),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Ua.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Zl={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},uc=o.window.HTMLImageElement,xo=o.window.HTMLElement,Ii=o.window.ImageBitmap,Xs={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Ts=function(j){function Y(I){var H=this;if(null!=(I=o.extend({},Xs,I)).minZoom&&null!=I.maxZoom&&I.minZoom>I.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=I.minPitch&&null!=I.maxPitch&&I.minPitch>I.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=I.minPitch&&I.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=I.maxPitch&&I.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var te=new Di(I.minZoom,I.maxZoom,I.minPitch,I.maxPitch,I.renderWorldCopies);if(j.call(this,te,I),this._interactive=I.interactive,this._maxTileCacheSize=I.maxTileCacheSize,this._failIfMajorPerformanceCaveat=I.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=I.preserveDrawingBuffer,this._antialias=I.antialias,this._trackResize=I.trackResize,this._bearingSnap=I.bearingSnap,this._refreshExpiredTiles=I.refreshExpiredTiles,this._fadeDuration=I.fadeDuration,this._crossSourceCollisions=I.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=I.collectResourceTiming,this._renderTaskQueue=new Ua,this._controls=[],this._mapId=o.uniqueId(),this._locale=o.extend({},Zl,I.locale),this._clickTolerance=I.clickTolerance,this._requestManager=new o.RequestManager(I.transformRequest,I.accessToken),"string"==typeof I.container){if(this._container=o.window.document.getElementById(I.container),!this._container)throw new Error("Container '"+I.container+"' not found.")}else{if(!(I.container instanceof xo))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=I.container}if(I.maxBounds&&this.setMaxBounds(I.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return H._update(!1)}),this.on("moveend",function(){return H._update(!1)}),this.on("zoom",function(){return H._update(!0)}),void 0!==o.window&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new zi(this,I),this._hash=I.hash&&new Vo("string"==typeof I.hash&&I.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:I.center,zoom:I.zoom,bearing:I.bearing,pitch:I.pitch}),I.bounds&&(this.resize(),this.fitBounds(I.bounds,o.extend({},I.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=I.localIdeographFontFamily,I.style&&this.setStyle(I.style,{localIdeographFontFamily:I.localIdeographFontFamily}),I.attributionControl&&this.addControl(new Oo({customAttribution:I.customAttribution})),this.addControl(new zs,I.logoPosition),this.on("style.load",function(){H.transform.unmodified&&H.jumpTo(H.style.stylesheet)}),this.on("data",function(pe){H._update("style"===pe.dataType),H.fire(new o.Event(pe.dataType+"data",pe))}),this.on("dataloading",function(pe){H.fire(new o.Event(pe.dataType+"dataloading",pe))})}j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y;var q={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return Y.prototype._getMapId=function(){return this._mapId},Y.prototype.addControl=function(I,H){if(void 0===H&&(H=I.getDefaultPosition?I.getDefaultPosition():"top-right"),!I||!I.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var te=I.onAdd(this);this._controls.push(I);var le=this._controlPositions[H];return-1!==H.indexOf("bottom")?le.insertBefore(te,le.firstChild):le.appendChild(te),this},Y.prototype.removeControl=function(I){if(!I||!I.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var H=this._controls.indexOf(I);return H>-1&&this._controls.splice(H,1),I.onRemove(this),this},Y.prototype.hasControl=function(I){return this._controls.indexOf(I)>-1},Y.prototype.resize=function(I){var H=this._containerDimensions(),te=H[0],le=H[1];this._resizeCanvas(te,le),this.transform.resize(te,le),this.painter.resize(te,le);var pe=!this._moving;return pe&&(this.stop(),this.fire(new o.Event("movestart",I)).fire(new o.Event("move",I))),this.fire(new o.Event("resize",I)),pe&&this.fire(new o.Event("moveend",I)),this},Y.prototype.getBounds=function(){return this.transform.getBounds()},Y.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},Y.prototype.setMaxBounds=function(I){return this.transform.setMaxBounds(o.LngLatBounds.convert(I)),this._update()},Y.prototype.setMinZoom=function(I){if((I=I??-2)>=-2&&I<=this.transform.maxZoom)return this.transform.minZoom=I,this._update(),this.getZoom()<I&&this.setZoom(I),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},Y.prototype.getMinZoom=function(){return this.transform.minZoom},Y.prototype.setMaxZoom=function(I){if((I=I??22)>=this.transform.minZoom)return this.transform.maxZoom=I,this._update(),this.getZoom()>I&&this.setZoom(I),this;throw new Error("maxZoom must be greater than the current minZoom")},Y.prototype.getMaxZoom=function(){return this.transform.maxZoom},Y.prototype.setMinPitch=function(I){if((I=I??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(I>=0&&I<=this.transform.maxPitch)return this.transform.minPitch=I,this._update(),this.getPitch()<I&&this.setPitch(I),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},Y.prototype.getMinPitch=function(){return this.transform.minPitch},Y.prototype.setMaxPitch=function(I){if((I=I??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(I>=this.transform.minPitch)return this.transform.maxPitch=I,this._update(),this.getPitch()>I&&this.setPitch(I),this;throw new Error("maxPitch must be greater than the current minPitch")},Y.prototype.getMaxPitch=function(){return this.transform.maxPitch},Y.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},Y.prototype.setRenderWorldCopies=function(I){return this.transform.renderWorldCopies=I,this._update()},Y.prototype.project=function(I){return this.transform.locationPoint(o.LngLat.convert(I))},Y.prototype.unproject=function(I){return this.transform.pointLocation(o.Point.convert(I))},Y.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},Y.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},Y.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},Y.prototype._createDelegatedListener=function(I,H,te){var le,pe=this;if("mouseenter"===I||"mouseover"===I){var ke=!1;return{layer:H,listener:te,delegates:{mousemove:function(Ve){var Xe=pe.getLayer(H)?pe.queryRenderedFeatures(Ve.point,{layers:[H]}):[];Xe.length?ke||(ke=!0,te.call(pe,new yo(I,pe,Ve.originalEvent,{features:Xe}))):ke=!1},mouseout:function(){ke=!1}}}}if("mouseleave"===I||"mouseout"===I){var Fe=!1;return{layer:H,listener:te,delegates:{mousemove:function(Ve){(pe.getLayer(H)?pe.queryRenderedFeatures(Ve.point,{layers:[H]}):[]).length?Fe=!0:Fe&&(Fe=!1,te.call(pe,new yo(I,pe,Ve.originalEvent)))},mouseout:function(Ve){Fe&&(Fe=!1,te.call(pe,new yo(I,pe,Ve.originalEvent)))}}}}return{layer:H,listener:te,delegates:(le={},le[I]=function(Ve){var Xe=pe.getLayer(H)?pe.queryRenderedFeatures(Ve.point,{layers:[H]}):[];Xe.length&&(Ve.features=Xe,te.call(pe,Ve),delete Ve.features)},le)}},Y.prototype.on=function(I,H,te){if(void 0===te)return j.prototype.on.call(this,I,H);var le=this._createDelegatedListener(I,H,te);for(var pe in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[I]=this._delegatedListeners[I]||[],this._delegatedListeners[I].push(le),le.delegates)this.on(pe,le.delegates[pe]);return this},Y.prototype.once=function(I,H,te){if(void 0===te)return j.prototype.once.call(this,I,H);var le=this._createDelegatedListener(I,H,te);for(var pe in le.delegates)this.once(pe,le.delegates[pe]);return this},Y.prototype.off=function(I,H,te){var le=this;return void 0===te?j.prototype.off.call(this,I,H):(this._delegatedListeners&&this._delegatedListeners[I]&&function(pe){for(var ke=pe[I],Fe=0;Fe<ke.length;Fe++){var Ve=ke[Fe];if(Ve.layer===H&&Ve.listener===te){for(var Xe in Ve.delegates)le.off(Xe,Ve.delegates[Xe]);return ke.splice(Fe,1),le}}}(this._delegatedListeners),this)},Y.prototype.queryRenderedFeatures=function(I,H){if(!this.style)return[];var te;if(void 0!==H||void 0===I||I instanceof o.Point||Array.isArray(I)||(H=I,I=void 0),H=H||{},(I=I||[[0,0],[this.transform.width,this.transform.height]])instanceof o.Point||"number"==typeof I[0])te=[o.Point.convert(I)];else{var le=o.Point.convert(I[0]),pe=o.Point.convert(I[1]);te=[le,new o.Point(pe.x,le.y),pe,new o.Point(le.x,pe.y),le]}return this.style.queryRenderedFeatures(te,H,this.transform)},Y.prototype.querySourceFeatures=function(I,H){return this.style.querySourceFeatures(I,H)},Y.prototype.setStyle=function(I,H){return!1!==(H=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},H)).diff&&H.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&I?(this._diffStyle(I,H),this):(this._localIdeographFontFamily=H.localIdeographFontFamily,this._updateStyle(I,H))},Y.prototype._getUIString=function(I){var H=this._locale[I];if(null==H)throw new Error("Missing UI string '"+I+"'");return H},Y.prototype._updateStyle=function(I,H){return this.style&&(this.style.setEventedParent(null),this.style._remove()),I?(this.style=new br(this,H||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof I?this.style.loadURL(I):this.style.loadJSON(I),this):(delete this.style,this)},Y.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new br(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},Y.prototype._diffStyle=function(I,H){var te=this;if("string"==typeof I){var le=this._requestManager.normalizeStyleURL(I),pe=this._requestManager.transformRequest(le,o.ResourceType.Style);o.getJSON(pe,function(ke,Fe){ke?te.fire(new o.ErrorEvent(ke)):Fe&&te._updateDiff(Fe,H)})}else"object"==typeof I&&this._updateDiff(I,H)},Y.prototype._updateDiff=function(I,H){try{this.style.setState(I)&&this._update(!0)}catch(te){o.warnOnce("Unable to perform style diff: "+(te.message||te.error||te)+".  Rebuilding the style from scratch."),this._updateStyle(I,H)}},Y.prototype.getStyle=function(){if(this.style)return this.style.serialize()},Y.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():o.warnOnce("There is no style added to the map.")},Y.prototype.addSource=function(I,H){return this._lazyInitEmptyStyle(),this.style.addSource(I,H),this._update(!0)},Y.prototype.isSourceLoaded=function(I){var H=this.style&&this.style.sourceCaches[I];if(void 0!==H)return H.loaded();this.fire(new o.ErrorEvent(new Error("There is no source with ID '"+I+"'")))},Y.prototype.areTilesLoaded=function(){var I=this.style&&this.style.sourceCaches;for(var H in I){var te=I[H]._tiles;for(var le in te){var pe=te[le];if("loaded"!==pe.state&&"errored"!==pe.state)return!1}}return!0},Y.prototype.addSourceType=function(I,H,te){return this._lazyInitEmptyStyle(),this.style.addSourceType(I,H,te)},Y.prototype.removeSource=function(I){return this.style.removeSource(I),this._update(!0)},Y.prototype.getSource=function(I){return this.style.getSource(I)},Y.prototype.addImage=function(I,H,te){void 0===te&&(te={});var le=te.pixelRatio;void 0===le&&(le=1);var pe=te.sdf;void 0===pe&&(pe=!1);var ke=te.stretchX,Fe=te.stretchY,Ve=te.content;if(this._lazyInitEmptyStyle(),H instanceof uc||Ii&&H instanceof Ii){var Xe=o.browser.getImageData(H);this.style.addImage(I,{data:new o.RGBAImage({width:Xe.width,height:Xe.height},Xe.data),pixelRatio:le,stretchX:ke,stretchY:Fe,content:Ve,sdf:pe,version:0})}else{if(void 0===H.width||void 0===H.height)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Ot=H;this.style.addImage(I,{data:new o.RGBAImage({width:H.width,height:H.height},new Uint8Array(H.data)),pixelRatio:le,stretchX:ke,stretchY:Fe,content:Ve,sdf:pe,version:0,userImage:Ot}),Ot.onAdd&&Ot.onAdd(this,I)}},Y.prototype.updateImage=function(I,H){var te=this.style.getImage(I);if(!te)return this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var le=H instanceof uc||Ii&&H instanceof Ii?o.browser.getImageData(H):H,pe=le.width,ke=le.height,Fe=le.data;return void 0===pe||void 0===ke?this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):pe!==te.data.width||ke!==te.data.height?this.fire(new o.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(te.data.replace(Fe,!(H instanceof uc||Ii&&H instanceof Ii)),void this.style.updateImage(I,te))},Y.prototype.hasImage=function(I){return I?!!this.style.getImage(I):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)},Y.prototype.removeImage=function(I){this.style.removeImage(I)},Y.prototype.loadImage=function(I,H){o.getImage(this._requestManager.transformRequest(I,o.ResourceType.Image),H)},Y.prototype.listImages=function(){return this.style.listImages()},Y.prototype.addLayer=function(I,H){return this._lazyInitEmptyStyle(),this.style.addLayer(I,H),this._update(!0)},Y.prototype.moveLayer=function(I,H){return this.style.moveLayer(I,H),this._update(!0)},Y.prototype.removeLayer=function(I){return this.style.removeLayer(I),this._update(!0)},Y.prototype.getLayer=function(I){return this.style.getLayer(I)},Y.prototype.setLayerZoomRange=function(I,H,te){return this.style.setLayerZoomRange(I,H,te),this._update(!0)},Y.prototype.setFilter=function(I,H,te){return void 0===te&&(te={}),this.style.setFilter(I,H,te),this._update(!0)},Y.prototype.getFilter=function(I){return this.style.getFilter(I)},Y.prototype.setPaintProperty=function(I,H,te,le){return void 0===le&&(le={}),this.style.setPaintProperty(I,H,te,le),this._update(!0)},Y.prototype.getPaintProperty=function(I,H){return this.style.getPaintProperty(I,H)},Y.prototype.setLayoutProperty=function(I,H,te,le){return void 0===le&&(le={}),this.style.setLayoutProperty(I,H,te,le),this._update(!0)},Y.prototype.getLayoutProperty=function(I,H){return this.style.getLayoutProperty(I,H)},Y.prototype.setLight=function(I,H){return void 0===H&&(H={}),this._lazyInitEmptyStyle(),this.style.setLight(I,H),this._update(!0)},Y.prototype.getLight=function(){return this.style.getLight()},Y.prototype.setFeatureState=function(I,H){return this.style.setFeatureState(I,H),this._update()},Y.prototype.removeFeatureState=function(I,H){return this.style.removeFeatureState(I,H),this._update()},Y.prototype.getFeatureState=function(I){return this.style.getFeatureState(I)},Y.prototype.getContainer=function(){return this._container},Y.prototype.getCanvasContainer=function(){return this._canvasContainer},Y.prototype.getCanvas=function(){return this._canvas},Y.prototype._containerDimensions=function(){var I=0,H=0;return this._container&&(I=this._container.clientWidth||400,H=this._container.clientHeight||300),[I,H]},Y.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},Y.prototype._setupContainer=function(){var I=this._container;I.classList.add("mapboxgl-map"),(this._missingCSSCanary=b.create("div","mapboxgl-canary",I)).style.visibility="hidden",this._detectMissingCSS();var H=this._canvasContainer=b.create("div","mapboxgl-canvas-container",I);this._interactive&&H.classList.add("mapboxgl-interactive"),this._canvas=b.create("canvas","mapboxgl-canvas",H),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var te=this._containerDimensions();this._resizeCanvas(te[0],te[1]);var le=this._controlContainer=b.create("div","mapboxgl-control-container",I),pe=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(ke){pe[ke]=b.create("div","mapboxgl-ctrl-"+ke,le)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},Y.prototype._resizeCanvas=function(I,H){var te=o.browser.devicePixelRatio||1;this._canvas.width=te*I,this._canvas.height=te*H,this._canvas.style.width=I+"px",this._canvas.style.height=H+"px"},Y.prototype._setupPainter=function(){var I=o.extend({},T.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),H=this._canvas.getContext("webgl",I)||this._canvas.getContext("experimental-webgl",I);H?(this.painter=new qi(H,this.transform),o.webpSupported.testSupport(H)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))},Y.prototype._contextLost=function(I){I.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:I}))},Y.prototype._contextRestored=function(I){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:I}))},Y.prototype._onMapScroll=function(I){if(I.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},Y.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},Y.prototype._update=function(I){return this.style?(this._styleDirty=this._styleDirty||I,this._sourcesDirty=!0,this.triggerRepaint(),this):this},Y.prototype._requestRenderFrame=function(I){return this._update(),this._renderTaskQueue.add(I)},Y.prototype._cancelRenderFrame=function(I){this._renderTaskQueue.remove(I)},Y.prototype._render=function(I){var H,te=this,le=0,pe=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(H=pe.createQueryEXT(),pe.beginQueryEXT(pe.TIME_ELAPSED_EXT,H),le=o.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(I),!this._removed){var ke=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Fe=this.transform.zoom,Ve=o.browser.now();this.style.zoomHistory.update(Fe,Ve);var Xe=new o.EvaluationParameters(Fe,{now:Ve,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Je=Xe.crossFadingFactor();1===Je&&Je===this._crossFadingFactor||(ke=!0,this._crossFadingFactor=Je),this.style.update(Xe)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&(this.style.hasTransitions()||ke)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var ct=o.browser.now()-le;pe.endQueryEXT(pe.TIME_ELAPSED_EXT,H),setTimeout(function(){var It=pe.getQueryObjectEXT(H,pe.QUERY_RESULT_EXT)/1e6;pe.deleteQueryEXT(H),te.fire(new o.Event("gpu-timing-frame",{cpuTime:ct,gpuTime:It}))},50)}if(this.listens("gpu-timing-layer")){var vt=this.painter.collectGpuTimers();setTimeout(function(){var It=te.painter.queryGpuTimers(vt);te.fire(new o.Event("gpu-timing-layer",{layerTimes:It}))},50)}var _t=this._sourcesDirty||this._styleDirty||this._placementDirty;return _t||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.Event("idle")),!this._loaded||this._fullyLoaded||_t||(this._fullyLoaded=!0),this}},Y.prototype.remove=function(){this._hash&&this._hash.remove();for(var I=0,H=this._controls;I<H.length;I+=1)H[I].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==o.window&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1));var te=this.painter.context.gl.getExtension("WEBGL_lose_context");te&&te.loseContext&&te.loseContext(),Ks(this._canvasContainer),Ks(this._controlContainer),Ks(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new o.Event("remove"))},Y.prototype.triggerRepaint=function(){var I=this;this.style&&!this._frame&&(this._frame=o.browser.frame(function(H){I._frame=null,I._render(H)}))},Y.prototype._onWindowOnline=function(){this._update()},Y.prototype._onWindowResize=function(I){this._trackResize&&this.resize({originalEvent:I})._update()},q.showTileBoundaries.get=function(){return!!this._showTileBoundaries},q.showTileBoundaries.set=function(I){this._showTileBoundaries!==I&&(this._showTileBoundaries=I,this._update())},q.showPadding.get=function(){return!!this._showPadding},q.showPadding.set=function(I){this._showPadding!==I&&(this._showPadding=I,this._update())},q.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},q.showCollisionBoxes.set=function(I){this._showCollisionBoxes!==I&&(this._showCollisionBoxes=I,I?this.style._generateCollisionBoxes():this._update())},q.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},q.showOverdrawInspector.set=function(I){this._showOverdrawInspector!==I&&(this._showOverdrawInspector=I,this._update())},q.repaint.get=function(){return!!this._repaint},q.repaint.set=function(I){this._repaint!==I&&(this._repaint=I,this.triggerRepaint())},q.vertices.get=function(){return!!this._vertices},q.vertices.set=function(I){this._vertices=I,this._update()},Y.prototype._setCacheLimits=function(I,H){o.setCacheLimits(I,H)},q.version.get=function(){return o.version},Object.defineProperties(Y.prototype,q),Y}(ja);function Ks(j){j.parentNode&&j.parentNode.removeChild(j)}var Xl={showCompass:!0,showZoom:!0,visualizePitch:!1},As=function(j){var Y=this;this.options=o.extend({},Xl,j),this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(q){return q.preventDefault()}),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(q){return Y._map.zoomIn({},{originalEvent:q})}),b.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(q){return Y._map.zoomOut({},{originalEvent:q})}),b.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(q){Y.options.visualizePitch?Y._map.resetNorthPitch({},{originalEvent:q}):Y._map.resetNorth({},{originalEvent:q})}),this._compassIcon=b.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};As.prototype._updateZoomButtons=function(){var j=this._map.getZoom(),Y=j===this._map.getMaxZoom(),q=j===this._map.getMinZoom();this._zoomInButton.disabled=Y,this._zoomOutButton.disabled=q,this._zoomInButton.setAttribute("aria-disabled",Y.toString()),this._zoomOutButton.setAttribute("aria-disabled",q.toString())},As.prototype._rotateCompassArrow=function(){var j=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=j},As.prototype.onAdd=function(j){return this._map=j,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new la(this._map,this._compass,this.options.visualizePitch)),this._container},As.prototype.onRemove=function(){b.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},As.prototype._createButton=function(j,Y){var q=b.create("button",j,this._container);return q.type="button",q.addEventListener("click",Y),q},As.prototype._setButtonTitle=function(j,Y){var q=this._map._getUIString("NavigationControl."+Y);j.title=q,j.setAttribute("aria-label",q)};var la=function(j,Y,q){void 0===q&&(q=!1),this._clickTolerance=10,this.element=Y,this.mouseRotate=new Po({clickTolerance:j.dragRotate._mouseRotate._clickTolerance}),this.map=j,q&&(this.mousePitch=new ko({clickTolerance:j.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),b.addEventListener(Y,"mousedown",this.mousedown),b.addEventListener(Y,"touchstart",this.touchstart,{passive:!1}),b.addEventListener(Y,"touchmove",this.touchmove),b.addEventListener(Y,"touchend",this.touchend),b.addEventListener(Y,"touchcancel",this.reset)};function Il(j,Y,q){if(j=new o.LngLat(j.lng,j.lat),Y){var I=new o.LngLat(j.lng-360,j.lat),H=new o.LngLat(j.lng+360,j.lat),te=q.locationPoint(j).distSqr(Y);q.locationPoint(I).distSqr(Y)<te?j=I:q.locationPoint(H).distSqr(Y)<te&&(j=H)}for(;Math.abs(j.lng-q.center.lng)>180;){var le=q.locationPoint(j);if(le.x>=0&&le.y>=0&&le.x<=q.width&&le.y<=q.height)break;j.lng>q.center.lng?j.lng-=360:j.lng+=360}return j}la.prototype.down=function(j,Y){this.mouseRotate.mousedown(j,Y),this.mousePitch&&this.mousePitch.mousedown(j,Y),b.disableDrag()},la.prototype.move=function(j,Y){var q=this.map,I=this.mouseRotate.mousemoveWindow(j,Y);if(I&&I.bearingDelta&&q.setBearing(q.getBearing()+I.bearingDelta),this.mousePitch){var H=this.mousePitch.mousemoveWindow(j,Y);H&&H.pitchDelta&&q.setPitch(q.getPitch()+H.pitchDelta)}},la.prototype.off=function(){var j=this.element;b.removeEventListener(j,"mousedown",this.mousedown),b.removeEventListener(j,"touchstart",this.touchstart,{passive:!1}),b.removeEventListener(j,"touchmove",this.touchmove),b.removeEventListener(j,"touchend",this.touchend),b.removeEventListener(j,"touchcancel",this.reset),this.offTemp()},la.prototype.offTemp=function(){b.enableDrag(),b.removeEventListener(o.window,"mousemove",this.mousemove),b.removeEventListener(o.window,"mouseup",this.mouseup)},la.prototype.mousedown=function(j){this.down(o.extend({},j,{ctrlKey:!0,preventDefault:function(){return j.preventDefault()}}),b.mousePos(this.element,j)),b.addEventListener(o.window,"mousemove",this.mousemove),b.addEventListener(o.window,"mouseup",this.mouseup)},la.prototype.mousemove=function(j){this.move(j,b.mousePos(this.element,j))},la.prototype.mouseup=function(j){this.mouseRotate.mouseupWindow(j),this.mousePitch&&this.mousePitch.mouseupWindow(j),this.offTemp()},la.prototype.touchstart=function(j){1!==j.targetTouches.length?this.reset():(this._startPos=this._lastPos=b.touchPos(this.element,j.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return j.preventDefault()}},this._startPos))},la.prototype.touchmove=function(j){1!==j.targetTouches.length?this.reset():(this._lastPos=b.touchPos(this.element,j.targetTouches)[0],this.move({preventDefault:function(){return j.preventDefault()}},this._lastPos))},la.prototype.touchend=function(j){0===j.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},la.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Xr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ti(j,Y,q){var I=j.classList;for(var H in Xr)I.remove("mapboxgl-"+q+"-anchor-"+H);I.add("mapboxgl-"+q+"-anchor-"+Y)}var Yo,is=function(j){function Y(q,I){if(j.call(this),(q instanceof o.window.HTMLElement||I)&&(q=o.extend({element:q},I)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=q&&q.anchor||"center",this._color=q&&q.color||"#3FB1CE",this._scale=q&&q.scale||1,this._draggable=q&&q.draggable||!1,this._clickTolerance=q&&q.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=q&&q.rotation||0,this._rotationAlignment=q&&q.rotationAlignment||"auto",this._pitchAlignment=q&&q.pitchAlignment&&"auto"!==q.pitchAlignment?q.pitchAlignment:this._rotationAlignment,q&&q.element)this._element=q.element,this._offset=o.Point.convert(q&&q.offset||[0,0]);else{this._defaultMarker=!0,this._element=b.create("div"),this._element.setAttribute("aria-label","Map marker");var H=b.createNS("http://www.w3.org/2000/svg","svg");H.setAttributeNS(null,"display","block"),H.setAttributeNS(null,"height","41px"),H.setAttributeNS(null,"width","27px"),H.setAttributeNS(null,"viewBox","0 0 27 41");var te=b.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"stroke","none"),te.setAttributeNS(null,"stroke-width","1"),te.setAttributeNS(null,"fill","none"),te.setAttributeNS(null,"fill-rule","evenodd");var le=b.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"fill-rule","nonzero");var pe=b.createNS("http://www.w3.org/2000/svg","g");pe.setAttributeNS(null,"transform","translate(3.0, 29.0)"),pe.setAttributeNS(null,"fill","#000000");for(var ke=0,Fe=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];ke<Fe.length;ke+=1){var Ve=Fe[ke],Xe=b.createNS("http://www.w3.org/2000/svg","ellipse");Xe.setAttributeNS(null,"opacity","0.04"),Xe.setAttributeNS(null,"cx","10.5"),Xe.setAttributeNS(null,"cy","5.80029008"),Xe.setAttributeNS(null,"rx",Ve.rx),Xe.setAttributeNS(null,"ry",Ve.ry),pe.appendChild(Xe)}var Je=b.createNS("http://www.w3.org/2000/svg","g");Je.setAttributeNS(null,"fill",this._color);var ct=b.createNS("http://www.w3.org/2000/svg","path");ct.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Je.appendChild(ct);var vt=b.createNS("http://www.w3.org/2000/svg","g");vt.setAttributeNS(null,"opacity","0.25"),vt.setAttributeNS(null,"fill","#000000");var _t=b.createNS("http://www.w3.org/2000/svg","path");_t.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),vt.appendChild(_t);var It=b.createNS("http://www.w3.org/2000/svg","g");It.setAttributeNS(null,"transform","translate(6.0, 7.0)"),It.setAttributeNS(null,"fill","#FFFFFF");var Ft=b.createNS("http://www.w3.org/2000/svg","g");Ft.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Ot=b.createNS("http://www.w3.org/2000/svg","circle");Ot.setAttributeNS(null,"fill","#000000"),Ot.setAttributeNS(null,"opacity","0.25"),Ot.setAttributeNS(null,"cx","5.5"),Ot.setAttributeNS(null,"cy","5.5"),Ot.setAttributeNS(null,"r","5.4999962");var Yt=b.createNS("http://www.w3.org/2000/svg","circle");Yt.setAttributeNS(null,"fill","#FFFFFF"),Yt.setAttributeNS(null,"cx","5.5"),Yt.setAttributeNS(null,"cy","5.5"),Yt.setAttributeNS(null,"r","5.4999962"),Ft.appendChild(Ot),Ft.appendChild(Yt),le.appendChild(pe),le.appendChild(Je),le.appendChild(vt),le.appendChild(It),le.appendChild(Ft),H.appendChild(le),H.setAttributeNS(null,"height",41*this._scale+"px"),H.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(H),this._offset=o.Point.convert(q&&q.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(jt){jt.preventDefault()}),this._element.addEventListener("mousedown",function(jt){jt.preventDefault()}),ti(this._element,this._anchor,"marker"),this._popup=null}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.addTo=function(q){return this.remove(),this._map=q,q.getCanvasContainer().appendChild(this._element),q.on("move",this._update),q.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},Y.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),b.remove(this._element),this._popup&&this._popup.remove(),this},Y.prototype.getLngLat=function(){return this._lngLat},Y.prototype.setLngLat=function(q){return this._lngLat=o.LngLat.convert(q),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},Y.prototype.getElement=function(){return this._element},Y.prototype.setPopup=function(q){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),q){if(!("offset"in q.options)){var H=Math.sqrt(Math.pow(13.5,2)/2);q.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[H,-1*(24.6+H)],"bottom-right":[-H,-1*(24.6+H)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=q,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},Y.prototype._onKeyPress=function(q){var I=q.code,H=q.charCode||q.keyCode;"Space"!==I&&"Enter"!==I&&32!==H&&13!==H||this.togglePopup()},Y.prototype._onMapClick=function(q){var I=q.originalEvent.target,H=this._element;this._popup&&(I===H||H.contains(I))&&this.togglePopup()},Y.prototype.getPopup=function(){return this._popup},Y.prototype.togglePopup=function(){var q=this._popup;return q?(q.isOpen()?q.remove():q.addTo(this._map),this):this},Y.prototype._update=function(q){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Il(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var I="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?I="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(I="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var H="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?H="rotateX(0deg)":"map"===this._pitchAlignment&&(H="rotateX("+this._map.getPitch()+"deg)"),q&&"moveend"!==q.type||(this._pos=this._pos.round()),b.setTransform(this._element,Xr[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+H+" "+I)}},Y.prototype.getOffset=function(){return this._offset},Y.prototype.setOffset=function(q){return this._offset=o.Point.convert(q),this._update(),this},Y.prototype._onMove=function(q){if(!this._isDragging){var I=this._clickTolerance||this._map._clickTolerance;this._isDragging=q.point.dist(this._pointerdownPos)>=I}this._isDragging&&(this._pos=q.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag")))},Y.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new o.Event("dragend")),this._state="inactive"},Y.prototype._addDragHandler=function(q){this._element.contains(q.originalEvent.target)&&(q.preventDefault(),this._positionDelta=q.point.sub(this._pos).add(this._offset),this._pointerdownPos=q.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},Y.prototype.setDraggable=function(q){return this._draggable=!!q,this._map&&(q?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},Y.prototype.isDraggable=function(){return this._draggable},Y.prototype.setRotation=function(q){return this._rotation=q||0,this._update(),this},Y.prototype.getRotation=function(){return this._rotation},Y.prototype.setRotationAlignment=function(q){return this._rotationAlignment=q||"auto",this._update(),this},Y.prototype.getRotationAlignment=function(){return this._rotationAlignment},Y.prototype.setPitchAlignment=function(q){return this._pitchAlignment=q&&"auto"!==q?q:this._rotationAlignment,this._update(),this},Y.prototype.getPitchAlignment=function(){return this._pitchAlignment},Y}(o.Evented),as={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},La=0,gi=!1,ta=function(j){function Y(q){j.call(this),this.options=o.extend({},as,q),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.onAdd=function(q){return this._map=q,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),I=this._setupUI,void 0!==Yo?I(Yo):void 0!==o.window.navigator.permissions?o.window.navigator.permissions.query({name:"geolocation"}).then(function(H){I(Yo="denied"!==H.state)}):I(Yo=!!o.window.navigator.geolocation),this._container;var I},Y.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),b.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,La=0,gi=!1},Y.prototype._isOutOfMapMaxBounds=function(q){var I=this._map.getMaxBounds(),H=q.coords;return I&&(H.longitude<I.getWest()||H.longitude>I.getEast()||H.latitude<I.getSouth()||H.latitude>I.getNorth())},Y.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},Y.prototype._onSuccess=function(q){if(this._map){if(this._isOutOfMapMaxBounds(q))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",q)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=q,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(q),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(q),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",q)),this._finish()}},Y.prototype._updateCamera=function(q){var I=new o.LngLat(q.coords.longitude,q.coords.latitude),H=q.coords.accuracy,te=this._map.getBearing(),le=o.extend({bearing:te},this.options.fitBoundsOptions);this._map.fitBounds(I.toBounds(H),le,{geolocateSource:!0})},Y.prototype._updateMarker=function(q){if(q){var I=new o.LngLat(q.coords.longitude,q.coords.latitude);this._accuracyCircleMarker.setLngLat(I).addTo(this._map),this._userLocationDotMarker.setLngLat(I).addTo(this._map),this._accuracy=q.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},Y.prototype._updateCircleRadius=function(){var q=this._map._container.clientHeight/2,I=this._map.unproject([0,q]),H=this._map.unproject([1,q]),te=I.distanceTo(H),le=Math.ceil(2*this._accuracy/te);this._circleElement.style.width=le+"px",this._circleElement.style.height=le+"px"},Y.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},Y.prototype._onError=function(q){if(this._map){if(this.options.trackUserLocation)if(1===q.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var I=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=I,this._geolocateButton.setAttribute("aria-label",I),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===q.code&&gi)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",q)),this._finish()}},Y.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},Y.prototype._setupUI=function(q){var I=this;if(this._container.addEventListener("contextmenu",function(le){return le.preventDefault()}),this._geolocateButton=b.create("button","mapboxgl-ctrl-geolocate",this._container),b.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===q){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var H=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=H,this._geolocateButton.setAttribute("aria-label",H)}else{var te=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=te,this._geolocateButton.setAttribute("aria-label",te)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=b.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new is(this._dotElement),this._circleElement=b.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new is({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(le){le.geolocateSource||"ACTIVE_LOCK"!==I._watchState||le.originalEvent&&"resize"===le.originalEvent.type||(I._watchState="BACKGROUND",I._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),I._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),I.fire(new o.Event("trackuserlocationend")))})},Y.prototype.trigger=function(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":La--,gi=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var q;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++La>1?(q={maximumAge:6e5,timeout:0},gi=!0):(q=this.options.positionOptions,gi=!1),this._geolocationWatchID=o.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,q)}}else o.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},Y.prototype._clearWatch=function(){o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},Y}(o.Evented),eu={maxWidth:100,unit:"metric"},Zo=function(j){this.options=o.extend({},eu,j),o.bindAll(["_onMove","setUnit"],this)};function wi(j,Y,q){var I=q&&q.maxWidth||100,H=j._container.clientHeight/2,te=j.unproject([0,H]),le=j.unproject([I,H]),pe=te.distanceTo(le);if(q&&"imperial"===q.unit){var ke=3.2808*pe;ke>5280?ra(Y,I,ke/5280,j._getUIString("ScaleControl.Miles")):ra(Y,I,ke,j._getUIString("ScaleControl.Feet"))}else q&&"nautical"===q.unit?ra(Y,I,pe/1852,j._getUIString("ScaleControl.NauticalMiles")):pe>=1e3?ra(Y,I,pe/1e3,j._getUIString("ScaleControl.Kilometers")):ra(Y,I,pe,j._getUIString("ScaleControl.Meters"))}function ra(j,Y,q,I){var H,te,le,Fe,Ve,pe=(H=q,(te=Math.pow(10,(""+Math.floor(H)).length-1))*((le=H/te)>=10?10:le>=5?5:le>=3?3:le>=2?2:le>=1?1:(Fe=le,Ve=Math.pow(10,Math.ceil(-Math.log(Fe)/Math.LN10)),Math.round(Fe*Ve)/Ve)));j.style.width=Y*(pe/q)+"px",j.innerHTML=pe+"&nbsp;"+I}Zo.prototype.getDefaultPosition=function(){return"bottom-left"},Zo.prototype._onMove=function(){wi(this._map,this._container,this.options)},Zo.prototype.onAdd=function(j){return this._map=j,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",j.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Zo.prototype.onRemove=function(){b.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Zo.prototype.setUnit=function(j){this.options.unit=j,wi(this._map,this._container,this.options)};var Mo=function(j){this._fullscreen=!1,j&&j.container&&(j.container instanceof o.window.HTMLElement?this._container=j.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in o.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in o.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in o.window.document&&(this._fullscreenchange="MSFullscreenChange")};Mo.prototype.onAdd=function(j){return this._map=j,this._container||(this._container=this._map.getContainer()),this._controlContainer=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Mo.prototype.onRemove=function(){b.remove(this._controlContainer),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Mo.prototype._checkFullscreenSupport=function(){return!!(o.window.document.fullscreenEnabled||o.window.document.mozFullScreenEnabled||o.window.document.msFullscreenEnabled||o.window.document.webkitFullscreenEnabled)},Mo.prototype._setupUI=function(){var j=this._fullscreenButton=b.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);b.create("span","mapboxgl-ctrl-icon",j).setAttribute("aria-hidden",!0),j.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Mo.prototype._updateTitle=function(){var j=this._getTitle();this._fullscreenButton.setAttribute("aria-label",j),this._fullscreenButton.title=j},Mo.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Mo.prototype._isFullscreen=function(){return this._fullscreen},Mo.prototype._changeIcon=function(){(o.window.document.fullscreenElement||o.window.document.mozFullScreenElement||o.window.document.webkitFullscreenElement||o.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Mo.prototype._onClickFullscreen=function(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.mozCancelFullScreen?o.window.document.mozCancelFullScreen():o.window.document.msExitFullscreen?o.window.document.msExitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var os={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Js=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),rt=function(j){function Y(q){j.call(this),this.options=o.extend(Object.create(os),q),o.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return j&&(Y.__proto__=j),(Y.prototype=Object.create(j&&j.prototype)).constructor=Y,Y.prototype.addTo=function(q){return this._map&&this.remove(),this._map=q,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new o.Event("open")),this},Y.prototype.isOpen=function(){return!!this._map},Y.prototype.remove=function(){return this._content&&b.remove(this._content),this._container&&(b.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new o.Event("close")),this},Y.prototype.getLngLat=function(){return this._lngLat},Y.prototype.setLngLat=function(q){return this._lngLat=o.LngLat.convert(q),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},Y.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},Y.prototype.getElement=function(){return this._container},Y.prototype.setText=function(q){return this.setDOMContent(o.window.document.createTextNode(q))},Y.prototype.setHTML=function(q){var I,H=o.window.document.createDocumentFragment(),te=o.window.document.createElement("body");for(te.innerHTML=q;I=te.firstChild;)H.appendChild(I);return this.setDOMContent(H)},Y.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},Y.prototype.setMaxWidth=function(q){return this.options.maxWidth=q,this._update(),this},Y.prototype.setDOMContent=function(q){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=b.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(q),this._createCloseButton(),this._update(),this._focusFirstElement(),this},Y.prototype.addClassName=function(q){this._container&&this._container.classList.add(q)},Y.prototype.removeClassName=function(q){this._container&&this._container.classList.remove(q)},Y.prototype.setOffset=function(q){return this.options.offset=q,this._update(),this},Y.prototype.toggleClassName=function(q){if(this._container)return this._container.classList.toggle(q)},Y.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=b.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},Y.prototype._onMouseUp=function(q){this._update(q.point)},Y.prototype._onMouseMove=function(q){this._update(q.point)},Y.prototype._onDrag=function(q){this._update(q.point)},Y.prototype._update=function(q){var I=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=b.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=b.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Je){return I._container.classList.add(Je)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Il(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||q)){var te=this._pos=this._trackPointer&&q?q:this._map.project(this._lngLat),le=this.options.anchor,pe=st(this.options.offset);if(!le){var ke,Fe=this._container.offsetWidth,Ve=this._container.offsetHeight;ke=te.y+pe.bottom.y<Ve?["top"]:te.y>this._map.transform.height-Ve?["bottom"]:[],te.x<Fe/2?ke.push("left"):te.x>this._map.transform.width-Fe/2&&ke.push("right"),le=0===ke.length?"bottom":ke.join("-")}var Xe=te.add(pe[le]).round();b.setTransform(this._container,Xr[le]+" translate("+Xe.x+"px,"+Xe.y+"px)"),ti(this._container,le,"popup")}},Y.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var q=this._container.querySelector(Js);q&&q.focus()}},Y.prototype._onClose=function(){this.remove()},Y}(o.Evented);function st(j){if(j){if("number"==typeof j){var Y=Math.round(Math.sqrt(.5*Math.pow(j,2)));return{center:new o.Point(0,0),top:new o.Point(0,j),"top-left":new o.Point(Y,Y),"top-right":new o.Point(-Y,Y),bottom:new o.Point(0,-j),"bottom-left":new o.Point(Y,-Y),"bottom-right":new o.Point(-Y,-Y),left:new o.Point(j,0),right:new o.Point(-j,0)}}if(j instanceof o.Point||Array.isArray(j)){var q=o.Point.convert(j);return{center:q,top:q,"top-left":q,"top-right":q,bottom:q,"bottom-left":q,"bottom-right":q,left:q,right:q}}return{center:o.Point.convert(j.center||[0,0]),top:o.Point.convert(j.top||[0,0]),"top-left":o.Point.convert(j["top-left"]||[0,0]),"top-right":o.Point.convert(j["top-right"]||[0,0]),bottom:o.Point.convert(j.bottom||[0,0]),"bottom-left":o.Point.convert(j["bottom-left"]||[0,0]),"bottom-right":o.Point.convert(j["bottom-right"]||[0,0]),left:o.Point.convert(j.left||[0,0]),right:o.Point.convert(j.right||[0,0])}}return st(new o.Point(0,0))}var pt={version:o.version,supported:T,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:Ts,NavigationControl:As,GeolocateControl:ta,AttributionControl:Oo,ScaleControl:Zo,FullscreenControl:Mo,Popup:rt,Marker:is,Style:br,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.Point,MercatorCoordinate:o.MercatorCoordinate,Evented:o.Evented,config:o.config,prewarm:function(){Mt().acquire(ut)},clearPrewarmedResources:function(){var j=xt;j&&(j.isPreloaded()&&1===j.numActive()?(j.release(ut),xt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(j){o.config.ACCESS_TOKEN=j},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(j){o.config.API_URL=j},get workerCount(){return tt.workerCount},set workerCount(j){tt.workerCount=j},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(j){o.config.MAX_PARALLEL_IMAGE_REQUESTS=j},clearStorage:function(j){o.clearTileCache(j)},workerUrl:""};return pt}),S}()},3108:function(ie,F,e){"use strict";ie.exports=e(26099)},26099:function(ie,F,e){"use strict";var S=e(64928),k=e(32420),o=e(51160),T=e(76752),b=e(55616),p=e(31264),l=e(47520),t=e(18400),i=e(72512),r=e(76244);function n(a,s){for(var c=s[0],h=s[1],u=1/(s[2]-c),y=1/(s[3]-h),d=new Array(a.length),m=0,g=a.length/2;m<g;m++)d[2*m]=k((a[2*m]-c)*u,0,1),d[2*m+1]=k((a[2*m+1]-h)*y,0,1);return d}ie.exports=function(a,s){s||(s={}),a=l(a,"float64"),s=b(s,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var c=p(s.maxDepth,255),h=p(s.bounds,T(a,2));h[0]===h[2]&&h[2]++,h[1]===h[3]&&h[3]++;var u,y=n(a,h),d=a.length>>>1;s.dtype||(s.dtype="array"),"string"==typeof s.dtype?u=new(i(s.dtype))(d):s.dtype&&(u=s.dtype,Array.isArray(u)&&(u.length=d));for(var m=0;m<d;++m)u[m]=m;var g=[],x=[],v=[],_=[];!function z(V,R,U,Z,N,G){if(!Z.length)return null;var W=g[N]||(g[N]=[]),ae=v[N]||(v[N]=[]),re=x[N]||(x[N]=[]),ne=W.length;if(++N>c||G>1073741824){for(var Q=0;Q<Z.length;Q++)W.push(Z[Q]),ae.push(G),re.push(null,null,null,null);return ne}if(W.push(Z[0]),ae.push(G),Z.length<=1)return re.push(null,null,null,null),ne;for(var $=.5*U,X=V+$,oe=R+$,fe=[],ue=[],ge=[],we=[],Te=1,xe=Z.length;Te<xe;Te++){var ye=Z[Te],Ie=y[2*ye+1];y[2*ye]<X?Ie<oe?fe.push(ye):ue.push(ye):Ie<oe?ge.push(ye):we.push(ye)}return re.push(z(V,R,$,fe,N,G<<=2),z(V,oe,$,ue,N,G+1),z(X,R,$,ge,N,G+2),z(X,oe,$,we,N,G+3)),ne}(0,0,1,u,0,1);for(var f=0,C=0;C<g.length;C++){var w=g[C];if(u.set)u.set(w,f);else for(var E=0,P=w.length;E<P;E++)u[E+f]=w[E];var L=f+g[C].length;_[C]=[f,L],f=L}return u.range=function(){for(var z,V=[],R=arguments.length;R--;)V[R]=arguments[R];if(t(V[V.length-1])){var U=V.pop();V.length||null==U.x&&null==U.l&&null==U.left||(V=[U],z={}),z=b(U,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else z={};V.length||(V=h);var Z,N=o.apply(void 0,V),G=[Math.min(N.x,N.x+N.width),Math.min(N.y,N.y+N.height),Math.max(N.x,N.x+N.width),Math.max(N.y,N.y+N.height)],W=G[0],ae=G[1],re=G[2],ne=G[3],Q=n([W,ae,re,ne],h),$=Q[0],X=Q[1],oe=Q[2],fe=Q[3],ue=p(z.level,g.length);if(null!=z.d&&("number"==typeof z.d?Z=[z.d,z.d]:z.d.length&&(Z=z.d),ue=Math.min(Math.max(Math.ceil(-r(Math.abs(Z[0])/(h[2]-h[0]))),Math.ceil(-r(Math.abs(Z[1])/(h[3]-h[1])))),ue)),ue=Math.min(ue,g.length),z.lod)return function(we,Te,xe,ye,_e){for(var Ie=[],De=0;De<_e;De++){var be=v[De],he=_[De][0],ce=O(we,Te,De),me=O(xe,ye,De),Pe=S.ge(be,ce),Ae=S.gt(be,me,Pe,be.length-1);Ie[De]=[Pe+he,Ae+he]}return Ie}($,X,oe,fe,ue);var ge=[];return function we(Te,xe,ye,_e,Ie,De){if(null!==Ie&&null!==De&&!($>Te+ye||X>xe+ye||oe<Te||fe<xe||_e>=ue||Ie===De)){var be=g[_e];void 0===De&&(De=be.length);for(var he=Ie;he<De;he++){var ce=be[he],me=a[2*ce],Pe=a[2*ce+1];me>=W&&me<=re&&Pe>=ae&&Pe<=ne&&ge.push(ce)}var Ae=x[_e],Ce=Ae[4*Ie+0],Oe=Ae[4*Ie+1],Ne=Ae[4*Ie+2],je=Ae[4*Ie+3],ve=function(Ue,ze){for(var qe=null,Ke=0;null===qe;)if(qe=Ue[4*ze+Ke],++Ke>Ue.length)return null;return qe}(Ae,Ie+1),Me=.5*ye,Le=_e+1;we(Te,xe,Me,Le,Ce,Oe||Ne||je||ve),we(Te,xe+Me,Me,Le,Oe,Ne||je||ve),we(Te+Me,xe,Me,Le,Ne,je||ve),we(Te+Me,xe+Me,Me,Le,je,ve)}}(0,0,1,0,0,1),ge},u;function O(z,V,R){for(var U=1,Z=.5,N=.5,G=.5,W=0;W<R;W++)U<<=2,U+=z<Z?V<N?0:1:V<N?2:3,G*=.5,Z+=z<Z?-G:G,N+=V<N?-G:G;return U}}},40440:function(ie,F,e){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var S=e(3256),k=6378137;function o(p){var l=0;if(p&&p.length>0){l+=Math.abs(T(p[0]));for(var t=1;t<p.length;t++)l-=Math.abs(T(p[t]))}return l}function T(p){var l,t,i,r,n,a,s=0,c=p.length;if(c>2){for(a=0;a<c;a++)a===c-2?(i=c-2,r=c-1,n=0):a===c-1?(i=c-1,r=0,n=1):(i=a,r=a+1,n=a+2),l=p[i],t=p[r],s+=(b(p[n][0])-b(l[0]))*Math.sin(b(t[1]));s=s*k*k/2}return s}function b(p){return p*Math.PI/180}F.default=function(p){return S.geomReduce(p,function(l,t){return l+function(i){var r,n=0;switch(i.type){case"Polygon":return o(i.coordinates);case"MultiPolygon":for(r=0;r<i.coordinates.length;r++)n+=o(i.coordinates[r]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)},0)}},46284:function(ie,F){"use strict";function e(a,s,c){void 0===c&&(c={});var h={type:"Feature"};return(0===c.id||c.id)&&(h.id=c.id),c.bbox&&(h.bbox=c.bbox),h.properties=s||{},h.geometry=a,h}function S(a,s,c){if(void 0===c&&(c={}),!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!n(a[0])||!n(a[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:a},s,c)}function k(a,s,c){void 0===c&&(c={});for(var h=0,u=a;h<u.length;h++){var y=u[h];if(y.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var d=0;d<y[y.length-1].length;d++)if(y[y.length-1][d]!==y[0][d])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},s,c)}function o(a,s,c){if(void 0===c&&(c={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},s,c)}function T(a,s){void 0===s&&(s={});var c={type:"FeatureCollection"};return s.id&&(c.id=s.id),s.bbox&&(c.bbox=s.bbox),c.features=a,c}function b(a,s,c){return void 0===c&&(c={}),e({type:"MultiLineString",coordinates:a},s,c)}function p(a,s,c){return void 0===c&&(c={}),e({type:"MultiPoint",coordinates:a},s,c)}function l(a,s,c){return void 0===c&&(c={}),e({type:"MultiPolygon",coordinates:a},s,c)}function t(a,s){void 0===s&&(s="kilometers");var c=F.factors[s];if(!c)throw new Error(s+" units is invalid");return a*c}function i(a,s){void 0===s&&(s="kilometers");var c=F.factors[s];if(!c)throw new Error(s+" units is invalid");return a/c}function r(a){return a%(2*Math.PI)*180/Math.PI}function n(a){return!isNaN(a)&&null!==a&&!Array.isArray(a)}Object.defineProperty(F,"__esModule",{value:!0}),F.earthRadius=6371008.8,F.factors={centimeters:100*F.earthRadius,centimetres:100*F.earthRadius,degrees:F.earthRadius/111325,feet:3.28084*F.earthRadius,inches:39.37*F.earthRadius,kilometers:F.earthRadius/1e3,kilometres:F.earthRadius/1e3,meters:F.earthRadius,metres:F.earthRadius,miles:F.earthRadius/1609.344,millimeters:1e3*F.earthRadius,millimetres:1e3*F.earthRadius,nauticalmiles:F.earthRadius/1852,radians:1,yards:1.0936*F.earthRadius},F.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/F.earthRadius,yards:1.0936133},F.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},F.feature=e,F.geometry=function(a,s,c){switch(void 0===c&&(c={}),a){case"Point":return S(s).geometry;case"LineString":return o(s).geometry;case"Polygon":return k(s).geometry;case"MultiPoint":return p(s).geometry;case"MultiLineString":return b(s).geometry;case"MultiPolygon":return l(s).geometry;default:throw new Error(a+" is invalid")}},F.point=S,F.points=function(a,s,c){return void 0===c&&(c={}),T(a.map(function(h){return S(h,s)}),c)},F.polygon=k,F.polygons=function(a,s,c){return void 0===c&&(c={}),T(a.map(function(h){return k(h,s)}),c)},F.lineString=o,F.lineStrings=function(a,s,c){return void 0===c&&(c={}),T(a.map(function(h){return o(h,s)}),c)},F.featureCollection=T,F.multiLineString=b,F.multiPoint=p,F.multiPolygon=l,F.geometryCollection=function(a,s,c){return void 0===c&&(c={}),e({type:"GeometryCollection",geometries:a},s,c)},F.round=function(a,s){if(void 0===s&&(s=0),s&&!(s>=0))throw new Error("precision must be a positive number");var c=Math.pow(10,s||0);return Math.round(a*c)/c},F.radiansToLength=t,F.lengthToRadians=i,F.lengthToDegrees=function(a,s){return r(i(a,s))},F.bearingToAzimuth=function(a){var s=a%360;return s<0&&(s+=360),s},F.radiansToDegrees=r,F.degreesToRadians=function(a){return a%360*Math.PI/180},F.convertLength=function(a,s,c){if(void 0===s&&(s="kilometers"),void 0===c&&(c="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(i(a,s),c)},F.convertArea=function(a,s,c){if(void 0===s&&(s="meters"),void 0===c&&(c="kilometers"),!(a>=0))throw new Error("area must be a positive number");var h=F.areaFactors[s];if(!h)throw new Error("invalid original units");var u=F.areaFactors[c];if(!u)throw new Error("invalid final units");return a/h*u},F.isNumber=n,F.isObject=function(a){return!!a&&a.constructor===Object},F.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(4!==a.length&&6!==a.length)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(s){if(!n(s))throw new Error("bbox must only contain numbers")})},F.validateId=function(a){if(!a)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof a))throw new Error("id must be a number or a string")}},3256:function(ie,F,e){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var S=e(46284);function k(i,r,n){if(null!==i)for(var a,s,c,h,u,y,d,m,g=0,x=0,v=i.type,_="FeatureCollection"===v,f="Feature"===v,C=_?i.features.length:1,w=0;w<C;w++){u=(m=!!(d=_?i.features[w].geometry:f?i.geometry:i)&&"GeometryCollection"===d.type)?d.geometries.length:1;for(var E=0;E<u;E++){var P=0,L=0;if(null!==(h=m?d.geometries[E]:d)){y=h.coordinates;var O=h.type;switch(g=!n||"Polygon"!==O&&"MultiPolygon"!==O?0:1,O){case null:break;case"Point":if(!1===r(y,x,w,P,L))return!1;x++,P++;break;case"LineString":case"MultiPoint":for(a=0;a<y.length;a++){if(!1===r(y[a],x,w,P,L))return!1;x++,"MultiPoint"===O&&P++}"LineString"===O&&P++;break;case"Polygon":case"MultiLineString":for(a=0;a<y.length;a++){for(s=0;s<y[a].length-g;s++){if(!1===r(y[a][s],x,w,P,L))return!1;x++}"MultiLineString"===O&&P++,"Polygon"===O&&L++}"Polygon"===O&&P++;break;case"MultiPolygon":for(a=0;a<y.length;a++){for(L=0,s=0;s<y[a].length;s++){for(c=0;c<y[a][s].length-g;c++){if(!1===r(y[a][s][c],x,w,P,L))return!1;x++}L++}P++}break;case"GeometryCollection":for(a=0;a<h.geometries.length;a++)if(!1===k(h.geometries[a],r,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(i,r){var n;switch(i.type){case"FeatureCollection":for(n=0;n<i.features.length&&!1!==r(i.features[n].properties,n);n++);break;case"Feature":r(i.properties,0)}}function T(i,r){if("Feature"===i.type)r(i,0);else if("FeatureCollection"===i.type)for(var n=0;n<i.features.length&&!1!==r(i.features[n],n);n++);}function b(i,r){var n,a,s,c,h,u,y,d,m,g,x=0,v="FeatureCollection"===i.type,_="Feature"===i.type,f=v?i.features.length:1;for(n=0;n<f;n++){for(d=v?i.features[n].properties:_?i.properties:{},m=v?i.features[n].bbox:_?i.bbox:void 0,g=v?i.features[n].id:_?i.id:void 0,h=(y=!!(u=v?i.features[n].geometry:_?i.geometry:i)&&"GeometryCollection"===u.type)?u.geometries.length:1,s=0;s<h;s++)if(null!==(c=y?u.geometries[s]:u))switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===r(c,x,d,m,g))return!1;break;case"GeometryCollection":for(a=0;a<c.geometries.length;a++)if(!1===r(c.geometries[a],x,d,m,g))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===r(null,x,d,m,g))return!1;x++}}function p(i,r){b(i,function(n,a,s,c,h){var u,y=null===n?null:n.type;switch(y){case null:case"Point":case"LineString":case"Polygon":return!1!==r(S.feature(n,s,{bbox:c,id:h}),a,0)&&void 0}switch(y){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon"}for(var d=0;d<n.coordinates.length;d++)if(!1===r(S.feature({type:u,coordinates:n.coordinates[d]},s),a,d))return!1})}function l(i,r){p(i,function(n,a,s){var c=0;if(n.geometry){var h=n.geometry.type;if("Point"!==h&&"MultiPoint"!==h){var u,y=0,d=0,m=0;return!1!==k(n,function(g,x,v,_,f){if(void 0===u||a>y||_>d||f>m)return u=g,y=a,d=_,m=f,void(c=0);var C=S.lineString([u,g],n.properties);if(!1===r(C,a,s,f,c))return!1;c++,u=g})&&void 0}}})}function t(i,r){if(!i)throw new Error("geojson is required");p(i,function(n,a,s){if(null!==n.geometry){var h=n.geometry.coordinates;switch(n.geometry.type){case"LineString":if(!1===r(n,a,s,0,0))return!1;break;case"Polygon":for(var u=0;u<h.length;u++)if(!1===r(S.lineString(h[u],n.properties),a,s,u))return!1}}})}F.coordEach=k,F.coordReduce=function(i,r,n,a){var s=n;return k(i,function(c,h,u,y,d){s=0===h&&void 0===n?c:r(s,c,h,u,y,d)},a),s},F.propEach=o,F.propReduce=function(i,r,n){var a=n;return o(i,function(s,c){a=0===c&&void 0===n?s:r(a,s,c)}),a},F.featureEach=T,F.featureReduce=function(i,r,n){var a=n;return T(i,function(s,c){a=0===c&&void 0===n?s:r(a,s,c)}),a},F.coordAll=function(i){var r=[];return k(i,function(n){r.push(n)}),r},F.geomEach=b,F.geomReduce=function(i,r,n){var a=n;return b(i,function(s,c,h,u,y){a=0===c&&void 0===n?s:r(a,s,c,h,u,y)}),a},F.flattenEach=p,F.flattenReduce=function(i,r,n){var a=n;return p(i,function(s,c,h){a=0===c&&0===h&&void 0===n?s:r(a,s,c,h)}),a},F.segmentEach=l,F.segmentReduce=function(i,r,n){var a=n,s=!1;return l(i,function(c,h,u,y,d){a=!1===s&&void 0===n?c:r(a,c,h,u,y,d),s=!0}),a},F.lineEach=t,F.lineReduce=function(i,r,n){var a=n;return t(i,function(s,c,h,u){a=0===c&&void 0===n?s:r(a,s,c,h,u)}),a},F.findSegment=function(i,r){if(!S.isObject(r=r||{}))throw new Error("options is invalid");var n,a=r.featureIndex||0,s=r.multiFeatureIndex||0,c=r.geometryIndex||0,h=r.segmentIndex||0,u=r.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),u=u||i.features[a].properties,n=i.features[a].geometry;break;case"Feature":u=u||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var y=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return h<0&&(h=y.length+h-1),S.lineString([y[h],y[h+1]],u,r);case"Polygon":return c<0&&(c=y.length+c),h<0&&(h=y[c].length+h-1),S.lineString([y[c][h],y[c][h+1]],u,r);case"MultiLineString":return s<0&&(s=y.length+s),h<0&&(h=y[s].length+h-1),S.lineString([y[s][h],y[s][h+1]],u,r);case"MultiPolygon":return s<0&&(s=y.length+s),c<0&&(c=y[s].length+c),h<0&&(h=y[s][c].length-h-1),S.lineString([y[s][c][h],y[s][c][h+1]],u,r)}throw new Error("geojson is invalid")},F.findPoint=function(i,r){if(!S.isObject(r=r||{}))throw new Error("options is invalid");var n,a=r.featureIndex||0,s=r.multiFeatureIndex||0,c=r.geometryIndex||0,h=r.coordIndex||0,u=r.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),u=u||i.features[a].properties,n=i.features[a].geometry;break;case"Feature":u=u||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var y=n.coordinates;switch(n.type){case"Point":return S.point(y,u,r);case"MultiPoint":return s<0&&(s=y.length+s),S.point(y[s],u,r);case"LineString":return h<0&&(h=y.length+h),S.point(y[h],u,r);case"Polygon":return c<0&&(c=y.length+c),h<0&&(h=y[c].length+h),S.point(y[c][h],u,r);case"MultiLineString":return s<0&&(s=y.length+s),h<0&&(h=y[s].length+h),S.point(y[s][h],u,r);case"MultiPolygon":return s<0&&(s=y.length+s),c<0&&(c=y[s].length+c),h<0&&(h=y[s][c].length-h),S.point(y[s][c][h],u,r)}throw new Error("geojson is invalid")}},42428:function(ie,F,e){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var S=e(84880);function k(o){var T=[1/0,1/0,-1/0,-1/0];return S.coordEach(o,function(b){T[0]>b[0]&&(T[0]=b[0]),T[1]>b[1]&&(T[1]=b[1]),T[2]<b[0]&&(T[2]=b[0]),T[3]<b[1]&&(T[3]=b[1])}),T}k.default=k,F.default=k},76796:function(ie,F){"use strict";function e(a,s,c){void 0===c&&(c={});var h={type:"Feature"};return(0===c.id||c.id)&&(h.id=c.id),c.bbox&&(h.bbox=c.bbox),h.properties=s||{},h.geometry=a,h}function S(a,s,c){if(void 0===c&&(c={}),!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!n(a[0])||!n(a[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:a},s,c)}function k(a,s,c){void 0===c&&(c={});for(var h=0,u=a;h<u.length;h++){var y=u[h];if(y.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var d=0;d<y[y.length-1].length;d++)if(y[y.length-1][d]!==y[0][d])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},s,c)}function o(a,s,c){if(void 0===c&&(c={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},s,c)}function T(a,s){void 0===s&&(s={});var c={type:"FeatureCollection"};return s.id&&(c.id=s.id),s.bbox&&(c.bbox=s.bbox),c.features=a,c}function b(a,s,c){return void 0===c&&(c={}),e({type:"MultiLineString",coordinates:a},s,c)}function p(a,s,c){return void 0===c&&(c={}),e({type:"MultiPoint",coordinates:a},s,c)}function l(a,s,c){return void 0===c&&(c={}),e({type:"MultiPolygon",coordinates:a},s,c)}function t(a,s){void 0===s&&(s="kilometers");var c=F.factors[s];if(!c)throw new Error(s+" units is invalid");return a*c}function i(a,s){void 0===s&&(s="kilometers");var c=F.factors[s];if(!c)throw new Error(s+" units is invalid");return a/c}function r(a){return a%(2*Math.PI)*180/Math.PI}function n(a){return!isNaN(a)&&null!==a&&!Array.isArray(a)}Object.defineProperty(F,"__esModule",{value:!0}),F.earthRadius=6371008.8,F.factors={centimeters:100*F.earthRadius,centimetres:100*F.earthRadius,degrees:F.earthRadius/111325,feet:3.28084*F.earthRadius,inches:39.37*F.earthRadius,kilometers:F.earthRadius/1e3,kilometres:F.earthRadius/1e3,meters:F.earthRadius,metres:F.earthRadius,miles:F.earthRadius/1609.344,millimeters:1e3*F.earthRadius,millimetres:1e3*F.earthRadius,nauticalmiles:F.earthRadius/1852,radians:1,yards:1.0936*F.earthRadius},F.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/F.earthRadius,yards:1.0936133},F.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},F.feature=e,F.geometry=function(a,s,c){switch(void 0===c&&(c={}),a){case"Point":return S(s).geometry;case"LineString":return o(s).geometry;case"Polygon":return k(s).geometry;case"MultiPoint":return p(s).geometry;case"MultiLineString":return b(s).geometry;case"MultiPolygon":return l(s).geometry;default:throw new Error(a+" is invalid")}},F.point=S,F.points=function(a,s,c){return void 0===c&&(c={}),T(a.map(function(h){return S(h,s)}),c)},F.polygon=k,F.polygons=function(a,s,c){return void 0===c&&(c={}),T(a.map(function(h){return k(h,s)}),c)},F.lineString=o,F.lineStrings=function(a,s,c){return void 0===c&&(c={}),T(a.map(function(h){return o(h,s)}),c)},F.featureCollection=T,F.multiLineString=b,F.multiPoint=p,F.multiPolygon=l,F.geometryCollection=function(a,s,c){return void 0===c&&(c={}),e({type:"GeometryCollection",geometries:a},s,c)},F.round=function(a,s){if(void 0===s&&(s=0),s&&!(s>=0))throw new Error("precision must be a positive number");var c=Math.pow(10,s||0);return Math.round(a*c)/c},F.radiansToLength=t,F.lengthToRadians=i,F.lengthToDegrees=function(a,s){return r(i(a,s))},F.bearingToAzimuth=function(a){var s=a%360;return s<0&&(s+=360),s},F.radiansToDegrees=r,F.degreesToRadians=function(a){return a%360*Math.PI/180},F.convertLength=function(a,s,c){if(void 0===s&&(s="kilometers"),void 0===c&&(c="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(i(a,s),c)},F.convertArea=function(a,s,c){if(void 0===s&&(s="meters"),void 0===c&&(c="kilometers"),!(a>=0))throw new Error("area must be a positive number");var h=F.areaFactors[s];if(!h)throw new Error("invalid original units");var u=F.areaFactors[c];if(!u)throw new Error("invalid final units");return a/h*u},F.isNumber=n,F.isObject=function(a){return!!a&&a.constructor===Object},F.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(4!==a.length&&6!==a.length)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(s){if(!n(s))throw new Error("bbox must only contain numbers")})},F.validateId=function(a){if(!a)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof a))throw new Error("id must be a number or a string")}},84880:function(ie,F,e){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var S=e(76796);function k(i,r,n){if(null!==i)for(var a,s,c,h,u,y,d,m,g=0,x=0,v=i.type,_="FeatureCollection"===v,f="Feature"===v,C=_?i.features.length:1,w=0;w<C;w++){u=(m=!!(d=_?i.features[w].geometry:f?i.geometry:i)&&"GeometryCollection"===d.type)?d.geometries.length:1;for(var E=0;E<u;E++){var P=0,L=0;if(null!==(h=m?d.geometries[E]:d)){y=h.coordinates;var O=h.type;switch(g=!n||"Polygon"!==O&&"MultiPolygon"!==O?0:1,O){case null:break;case"Point":if(!1===r(y,x,w,P,L))return!1;x++,P++;break;case"LineString":case"MultiPoint":for(a=0;a<y.length;a++){if(!1===r(y[a],x,w,P,L))return!1;x++,"MultiPoint"===O&&P++}"LineString"===O&&P++;break;case"Polygon":case"MultiLineString":for(a=0;a<y.length;a++){for(s=0;s<y[a].length-g;s++){if(!1===r(y[a][s],x,w,P,L))return!1;x++}"MultiLineString"===O&&P++,"Polygon"===O&&L++}"Polygon"===O&&P++;break;case"MultiPolygon":for(a=0;a<y.length;a++){for(L=0,s=0;s<y[a].length;s++){for(c=0;c<y[a][s].length-g;c++){if(!1===r(y[a][s][c],x,w,P,L))return!1;x++}L++}P++}break;case"GeometryCollection":for(a=0;a<h.geometries.length;a++)if(!1===k(h.geometries[a],r,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(i,r){var n;switch(i.type){case"FeatureCollection":for(n=0;n<i.features.length&&!1!==r(i.features[n].properties,n);n++);break;case"Feature":r(i.properties,0)}}function T(i,r){if("Feature"===i.type)r(i,0);else if("FeatureCollection"===i.type)for(var n=0;n<i.features.length&&!1!==r(i.features[n],n);n++);}function b(i,r){var n,a,s,c,h,u,y,d,m,g,x=0,v="FeatureCollection"===i.type,_="Feature"===i.type,f=v?i.features.length:1;for(n=0;n<f;n++){for(d=v?i.features[n].properties:_?i.properties:{},m=v?i.features[n].bbox:_?i.bbox:void 0,g=v?i.features[n].id:_?i.id:void 0,h=(y=!!(u=v?i.features[n].geometry:_?i.geometry:i)&&"GeometryCollection"===u.type)?u.geometries.length:1,s=0;s<h;s++)if(null!==(c=y?u.geometries[s]:u))switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===r(c,x,d,m,g))return!1;break;case"GeometryCollection":for(a=0;a<c.geometries.length;a++)if(!1===r(c.geometries[a],x,d,m,g))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===r(null,x,d,m,g))return!1;x++}}function p(i,r){b(i,function(n,a,s,c,h){var u,y=null===n?null:n.type;switch(y){case null:case"Point":case"LineString":case"Polygon":return!1!==r(S.feature(n,s,{bbox:c,id:h}),a,0)&&void 0}switch(y){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon"}for(var d=0;d<n.coordinates.length;d++)if(!1===r(S.feature({type:u,coordinates:n.coordinates[d]},s),a,d))return!1})}function l(i,r){p(i,function(n,a,s){var c=0;if(n.geometry){var h=n.geometry.type;if("Point"!==h&&"MultiPoint"!==h){var u,y=0,d=0,m=0;return!1!==k(n,function(g,x,v,_,f){if(void 0===u||a>y||_>d||f>m)return u=g,y=a,d=_,m=f,void(c=0);var C=S.lineString([u,g],n.properties);if(!1===r(C,a,s,f,c))return!1;c++,u=g})&&void 0}}})}function t(i,r){if(!i)throw new Error("geojson is required");p(i,function(n,a,s){if(null!==n.geometry){var h=n.geometry.coordinates;switch(n.geometry.type){case"LineString":if(!1===r(n,a,s,0,0))return!1;break;case"Polygon":for(var u=0;u<h.length;u++)if(!1===r(S.lineString(h[u],n.properties),a,s,u))return!1}}})}F.coordEach=k,F.coordReduce=function(i,r,n,a){var s=n;return k(i,function(c,h,u,y,d){s=0===h&&void 0===n?c:r(s,c,h,u,y,d)},a),s},F.propEach=o,F.propReduce=function(i,r,n){var a=n;return o(i,function(s,c){a=0===c&&void 0===n?s:r(a,s,c)}),a},F.featureEach=T,F.featureReduce=function(i,r,n){var a=n;return T(i,function(s,c){a=0===c&&void 0===n?s:r(a,s,c)}),a},F.coordAll=function(i){var r=[];return k(i,function(n){r.push(n)}),r},F.geomEach=b,F.geomReduce=function(i,r,n){var a=n;return b(i,function(s,c,h,u,y){a=0===c&&void 0===n?s:r(a,s,c,h,u,y)}),a},F.flattenEach=p,F.flattenReduce=function(i,r,n){var a=n;return p(i,function(s,c,h){a=0===c&&0===h&&void 0===n?s:r(a,s,c,h)}),a},F.segmentEach=l,F.segmentReduce=function(i,r,n){var a=n,s=!1;return l(i,function(c,h,u,y,d){a=!1===s&&void 0===n?c:r(a,c,h,u,y,d),s=!0}),a},F.lineEach=t,F.lineReduce=function(i,r,n){var a=n;return t(i,function(s,c,h,u){a=0===c&&void 0===n?s:r(a,s,c,h,u)}),a},F.findSegment=function(i,r){if(!S.isObject(r=r||{}))throw new Error("options is invalid");var n,a=r.featureIndex||0,s=r.multiFeatureIndex||0,c=r.geometryIndex||0,h=r.segmentIndex||0,u=r.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),u=u||i.features[a].properties,n=i.features[a].geometry;break;case"Feature":u=u||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var y=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return h<0&&(h=y.length+h-1),S.lineString([y[h],y[h+1]],u,r);case"Polygon":return c<0&&(c=y.length+c),h<0&&(h=y[c].length+h-1),S.lineString([y[c][h],y[c][h+1]],u,r);case"MultiLineString":return s<0&&(s=y.length+s),h<0&&(h=y[s].length+h-1),S.lineString([y[s][h],y[s][h+1]],u,r);case"MultiPolygon":return s<0&&(s=y.length+s),c<0&&(c=y[s].length+c),h<0&&(h=y[s][c].length-h-1),S.lineString([y[s][c][h],y[s][c][h+1]],u,r)}throw new Error("geojson is invalid")},F.findPoint=function(i,r){if(!S.isObject(r=r||{}))throw new Error("options is invalid");var n,a=r.featureIndex||0,s=r.multiFeatureIndex||0,c=r.geometryIndex||0,h=r.coordIndex||0,u=r.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),u=u||i.features[a].properties,n=i.features[a].geometry;break;case"Feature":u=u||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var y=n.coordinates;switch(n.type){case"Point":return S.point(y,u,r);case"MultiPoint":return s<0&&(s=y.length+s),S.point(y[s],u,r);case"LineString":return h<0&&(h=y.length+h),S.point(y[h],u,r);case"Polygon":return c<0&&(c=y.length+c),h<0&&(h=y[c].length+h),S.point(y[c][h],u,r);case"MultiLineString":return s<0&&(s=y.length+s),h<0&&(h=y[s].length+h),S.point(y[s][h],u,r);case"MultiPolygon":return s<0&&(s=y.length+s),c<0&&(c=y[s].length+c),h<0&&(h=y[s][c].length-h),S.point(y[s][c][h],u,r)}throw new Error("geojson is invalid")}},77844:function(ie,F,e){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var S=e(43752),k=e(49840);F.default=function(o,T){void 0===T&&(T={});var b=0,p=0,l=0;return S.coordEach(o,function(t){b+=t[0],p+=t[1],l++}),k.point([b/l,p/l],T.properties)}},49840:function(ie,F){"use strict";function e(a,s,c){void 0===c&&(c={});var h={type:"Feature"};return(0===c.id||c.id)&&(h.id=c.id),c.bbox&&(h.bbox=c.bbox),h.properties=s||{},h.geometry=a,h}function S(a,s,c){return void 0===c&&(c={}),e({type:"Point",coordinates:a},s,c)}function k(a,s,c){void 0===c&&(c={});for(var h=0,u=a;h<u.length;h++){var y=u[h];if(y.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var d=0;d<y[y.length-1].length;d++)if(y[y.length-1][d]!==y[0][d])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},s,c)}function o(a,s,c){if(void 0===c&&(c={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},s,c)}function T(a,s){void 0===s&&(s={});var c={type:"FeatureCollection"};return s.id&&(c.id=s.id),s.bbox&&(c.bbox=s.bbox),c.features=a,c}function b(a,s,c){return void 0===c&&(c={}),e({type:"MultiLineString",coordinates:a},s,c)}function p(a,s,c){return void 0===c&&(c={}),e({type:"MultiPoint",coordinates:a},s,c)}function l(a,s,c){return void 0===c&&(c={}),e({type:"MultiPolygon",coordinates:a},s,c)}function t(a,s){void 0===s&&(s="kilometers");var c=F.factors[s];if(!c)throw new Error(s+" units is invalid");return a*c}function i(a,s){void 0===s&&(s="kilometers");var c=F.factors[s];if(!c)throw new Error(s+" units is invalid");return a/c}function r(a){return a%(2*Math.PI)*180/Math.PI}function n(a){return!isNaN(a)&&null!==a&&!Array.isArray(a)&&!/^\s*$/.test(a)}Object.defineProperty(F,"__esModule",{value:!0}),F.earthRadius=6371008.8,F.factors={centimeters:100*F.earthRadius,centimetres:100*F.earthRadius,degrees:F.earthRadius/111325,feet:3.28084*F.earthRadius,inches:39.37*F.earthRadius,kilometers:F.earthRadius/1e3,kilometres:F.earthRadius/1e3,meters:F.earthRadius,metres:F.earthRadius,miles:F.earthRadius/1609.344,millimeters:1e3*F.earthRadius,millimetres:1e3*F.earthRadius,nauticalmiles:F.earthRadius/1852,radians:1,yards:F.earthRadius/1.0936},F.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/F.earthRadius,yards:.91441111923921},F.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},F.feature=e,F.geometry=function(a,s,c){switch(void 0===c&&(c={}),a){case"Point":return S(s).geometry;case"LineString":return o(s).geometry;case"Polygon":return k(s).geometry;case"MultiPoint":return p(s).geometry;case"MultiLineString":return b(s).geometry;case"MultiPolygon":return l(s).geometry;default:throw new Error(a+" is invalid")}},F.point=S,F.points=function(a,s,c){return void 0===c&&(c={}),T(a.map(function(h){return S(h,s)}),c)},F.polygon=k,F.polygons=function(a,s,c){return void 0===c&&(c={}),T(a.map(function(h){return k(h,s)}),c)},F.lineString=o,F.lineStrings=function(a,s,c){return void 0===c&&(c={}),T(a.map(function(h){return o(h,s)}),c)},F.featureCollection=T,F.multiLineString=b,F.multiPoint=p,F.multiPolygon=l,F.geometryCollection=function(a,s,c){return void 0===c&&(c={}),e({type:"GeometryCollection",geometries:a},s,c)},F.round=function(a,s){if(void 0===s&&(s=0),s&&!(s>=0))throw new Error("precision must be a positive number");var c=Math.pow(10,s||0);return Math.round(a*c)/c},F.radiansToLength=t,F.lengthToRadians=i,F.lengthToDegrees=function(a,s){return r(i(a,s))},F.bearingToAzimuth=function(a){var s=a%360;return s<0&&(s+=360),s},F.radiansToDegrees=r,F.degreesToRadians=function(a){return a%360*Math.PI/180},F.convertLength=function(a,s,c){if(void 0===s&&(s="kilometers"),void 0===c&&(c="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(i(a,s),c)},F.convertArea=function(a,s,c){if(void 0===s&&(s="meters"),void 0===c&&(c="kilometers"),!(a>=0))throw new Error("area must be a positive number");var h=F.areaFactors[s];if(!h)throw new Error("invalid original units");var u=F.areaFactors[c];if(!u)throw new Error("invalid final units");return a/h*u},F.isNumber=n,F.isObject=function(a){return!!a&&a.constructor===Object},F.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(4!==a.length&&6!==a.length)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(s){if(!n(s))throw new Error("bbox must only contain numbers")})},F.validateId=function(a){if(!a)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof a))throw new Error("id must be a number or a string")},F.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},F.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},F.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},F.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},F.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},F.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},F.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},43752:function(ie,F,e){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var S=e(49840);function k(i,r,n){if(null!==i)for(var a,s,c,h,u,y,d,m,g=0,x=0,v=i.type,_="FeatureCollection"===v,f="Feature"===v,C=_?i.features.length:1,w=0;w<C;w++){u=(m=!!(d=_?i.features[w].geometry:f?i.geometry:i)&&"GeometryCollection"===d.type)?d.geometries.length:1;for(var E=0;E<u;E++){var P=0,L=0;if(null!==(h=m?d.geometries[E]:d)){y=h.coordinates;var O=h.type;switch(g=!n||"Polygon"!==O&&"MultiPolygon"!==O?0:1,O){case null:break;case"Point":if(!1===r(y,x,w,P,L))return!1;x++,P++;break;case"LineString":case"MultiPoint":for(a=0;a<y.length;a++){if(!1===r(y[a],x,w,P,L))return!1;x++,"MultiPoint"===O&&P++}"LineString"===O&&P++;break;case"Polygon":case"MultiLineString":for(a=0;a<y.length;a++){for(s=0;s<y[a].length-g;s++){if(!1===r(y[a][s],x,w,P,L))return!1;x++}"MultiLineString"===O&&P++,"Polygon"===O&&L++}"Polygon"===O&&P++;break;case"MultiPolygon":for(a=0;a<y.length;a++){for(L=0,s=0;s<y[a].length;s++){for(c=0;c<y[a][s].length-g;c++){if(!1===r(y[a][s][c],x,w,P,L))return!1;x++}L++}P++}break;case"GeometryCollection":for(a=0;a<h.geometries.length;a++)if(!1===k(h.geometries[a],r,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(i,r){var n;switch(i.type){case"FeatureCollection":for(n=0;n<i.features.length&&!1!==r(i.features[n].properties,n);n++);break;case"Feature":r(i.properties,0)}}function T(i,r){if("Feature"===i.type)r(i,0);else if("FeatureCollection"===i.type)for(var n=0;n<i.features.length&&!1!==r(i.features[n],n);n++);}function b(i,r){var n,a,s,c,h,u,y,d,m,g,x=0,v="FeatureCollection"===i.type,_="Feature"===i.type,f=v?i.features.length:1;for(n=0;n<f;n++){for(d=v?i.features[n].properties:_?i.properties:{},m=v?i.features[n].bbox:_?i.bbox:void 0,g=v?i.features[n].id:_?i.id:void 0,h=(y=!!(u=v?i.features[n].geometry:_?i.geometry:i)&&"GeometryCollection"===u.type)?u.geometries.length:1,s=0;s<h;s++)if(null!==(c=y?u.geometries[s]:u))switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===r(c,x,d,m,g))return!1;break;case"GeometryCollection":for(a=0;a<c.geometries.length;a++)if(!1===r(c.geometries[a],x,d,m,g))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===r(null,x,d,m,g))return!1;x++}}function p(i,r){b(i,function(n,a,s,c,h){var u,y=null===n?null:n.type;switch(y){case null:case"Point":case"LineString":case"Polygon":return!1!==r(S.feature(n,s,{bbox:c,id:h}),a,0)&&void 0}switch(y){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon"}for(var d=0;d<n.coordinates.length;d++)if(!1===r(S.feature({type:u,coordinates:n.coordinates[d]},s),a,d))return!1})}function l(i,r){p(i,function(n,a,s){var c=0;if(n.geometry){var h=n.geometry.type;if("Point"!==h&&"MultiPoint"!==h){var u,y=0,d=0,m=0;return!1!==k(n,function(g,x,v,_,f){if(void 0===u||a>y||_>d||f>m)return u=g,y=a,d=_,m=f,void(c=0);var C=S.lineString([u,g],n.properties);if(!1===r(C,a,s,f,c))return!1;c++,u=g})&&void 0}}})}function t(i,r){if(!i)throw new Error("geojson is required");p(i,function(n,a,s){if(null!==n.geometry){var h=n.geometry.coordinates;switch(n.geometry.type){case"LineString":if(!1===r(n,a,s,0,0))return!1;break;case"Polygon":for(var u=0;u<h.length;u++)if(!1===r(S.lineString(h[u],n.properties),a,s,u))return!1}}})}F.coordEach=k,F.coordReduce=function(i,r,n,a){var s=n;return k(i,function(c,h,u,y,d){s=0===h&&void 0===n?c:r(s,c,h,u,y,d)},a),s},F.propEach=o,F.propReduce=function(i,r,n){var a=n;return o(i,function(s,c){a=0===c&&void 0===n?s:r(a,s,c)}),a},F.featureEach=T,F.featureReduce=function(i,r,n){var a=n;return T(i,function(s,c){a=0===c&&void 0===n?s:r(a,s,c)}),a},F.coordAll=function(i){var r=[];return k(i,function(n){r.push(n)}),r},F.geomEach=b,F.geomReduce=function(i,r,n){var a=n;return b(i,function(s,c,h,u,y){a=0===c&&void 0===n?s:r(a,s,c,h,u,y)}),a},F.flattenEach=p,F.flattenReduce=function(i,r,n){var a=n;return p(i,function(s,c,h){a=0===c&&0===h&&void 0===n?s:r(a,s,c,h)}),a},F.segmentEach=l,F.segmentReduce=function(i,r,n){var a=n,s=!1;return l(i,function(c,h,u,y,d){a=!1===s&&void 0===n?c:r(a,c,h,u,y,d),s=!0}),a},F.lineEach=t,F.lineReduce=function(i,r,n){var a=n;return t(i,function(s,c,h,u){a=0===c&&void 0===n?s:r(a,s,c,h,u)}),a},F.findSegment=function(i,r){if(!S.isObject(r=r||{}))throw new Error("options is invalid");var n,a=r.featureIndex||0,s=r.multiFeatureIndex||0,c=r.geometryIndex||0,h=r.segmentIndex||0,u=r.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),u=u||i.features[a].properties,n=i.features[a].geometry;break;case"Feature":u=u||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var y=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return h<0&&(h=y.length+h-1),S.lineString([y[h],y[h+1]],u,r);case"Polygon":return c<0&&(c=y.length+c),h<0&&(h=y[c].length+h-1),S.lineString([y[c][h],y[c][h+1]],u,r);case"MultiLineString":return s<0&&(s=y.length+s),h<0&&(h=y[s].length+h-1),S.lineString([y[s][h],y[s][h+1]],u,r);case"MultiPolygon":return s<0&&(s=y.length+s),c<0&&(c=y[s].length+c),h<0&&(h=y[s][c].length-h-1),S.lineString([y[s][c][h],y[s][c][h+1]],u,r)}throw new Error("geojson is invalid")},F.findPoint=function(i,r){if(!S.isObject(r=r||{}))throw new Error("options is invalid");var n,a=r.featureIndex||0,s=r.multiFeatureIndex||0,c=r.geometryIndex||0,h=r.coordIndex||0,u=r.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),u=u||i.features[a].properties,n=i.features[a].geometry;break;case"Feature":u=u||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var y=n.coordinates;switch(n.type){case"Point":return S.point(y,u,r);case"MultiPoint":return s<0&&(s=y.length+s),S.point(y[s],u,r);case"LineString":return h<0&&(h=y.length+h),S.point(y[h],u,r);case"Polygon":return c<0&&(c=y.length+c),h<0&&(h=y[c].length+h),S.point(y[c][h],u,r);case"MultiLineString":return s<0&&(s=y.length+s),h<0&&(h=y[s].length+h),S.point(y[s][h],u,r);case"MultiPolygon":return s<0&&(s=y.length+s),c<0&&(c=y[s].length+c),h<0&&(h=y[s][c].length-h),S.point(y[s][c][h],u,r)}throw new Error("geojson is invalid")}},49972:function(ie){ie.exports=function(F){var e=0,S=0,k=0,o=0;return F.map(function(T){var b=(T=T.slice())[0],p=b.toUpperCase();if(b!=p)switch(T[0]=p,b){case"a":T[6]+=k,T[7]+=o;break;case"v":T[1]+=o;break;case"h":T[1]+=k;break;default:for(var l=1;l<T.length;)T[l++]+=k,T[l++]+=o}switch(p){case"Z":k=e,o=S;break;case"H":k=T[1];break;case"V":o=T[1];break;case"M":k=e=T[1],o=S=T[2];break;default:k=T[T.length-2],o=T[T.length-1]}return T})}},76752:function(ie){"use strict";ie.exports=function(F,e){if(!F||null==F.length)throw Error("Argument should be an array");e=null==e?1:Math.floor(e);for(var S=Array(2*e),k=0;k<e;k++){for(var o=-1/0,T=1/0,b=k,p=F.length;b<p;b+=e)F[b]>o&&(o=F[b]),F[b]<T&&(T=F[b]);S[k]=T,S[e+k]=o}return S}},10272:function(ie){"use strict";ie.exports=function(F,e,S){if("function"==typeof Array.prototype.findIndex)return F.findIndex(e,S);if("function"!=typeof e)throw new TypeError("predicate must be a function");var k=Object(F),o=k.length;if(0===o)return-1;for(var T=0;T<o;T++)if(e.call(S,k[T],T,k))return T;return-1}},71152:function(ie,F,e){"use strict";var S=e(76752);ie.exports=function(k,o,T){if(!k||null==k.length)throw Error("Argument should be an array");null==o&&(o=1),null==T&&(T=S(k,o));for(var b=0;b<o;b++){var p=T[o+b],l=T[b],t=b,i=k.length;if(p===1/0&&l===-1/0)for(t=b;t<i;t+=o)k[t]=k[t]===p?1:k[t]===l?0:.5;else if(p===1/0)for(t=b;t<i;t+=o)k[t]=k[t]===p?1:0;else if(l===-1/0)for(t=b;t<i;t+=o)k[t]=k[t]===l?0:1;else{var r=p-l;for(t=b;t<i;t+=o)isNaN(k[t])||(k[t]=0===r?.5:(k[t]-l)/r)}}return k}},67752:function(ie){ie.exports=function(F,e){var S="number"==typeof F,k="number"==typeof e;S&&!k?(e=F,F=0):S||k||(F=0,e=0);var o=(e|=0)-(F|=0);if(o<0)throw new Error("array length must be positive");for(var T=new Array(o),b=0,p=F;b<o;b++,p++)T[b]=p;return T}},45408:function(ie,F,e){"use strict";var S=e(4168);function k(R){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(U){return typeof U}:function(U){return U&&"function"==typeof Symbol&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(R)}var o,T,b=e(86832).codes,p=b.ERR_AMBIGUOUS_ARGUMENT,l=b.ERR_INVALID_ARG_TYPE,t=b.ERR_INVALID_ARG_VALUE,i=b.ERR_INVALID_RETURN_VALUE,r=b.ERR_MISSING_ARGS,n=e(26144),a=e(35840).inspect,s=e(35840).types,c=s.isPromise,h=s.isRegExp,u=Object.assign?Object.assign:e(60964).assign,y=Object.is?Object.is:e(39896);function d(){var R=e(25116);o=R.isDeepEqual,T=R.isDeepStrictEqual}var m=!1,g=ie.exports=f,x={};function v(R){throw R.message instanceof Error?R.message:new n(R)}function _(R,U,Z,N){if(!Z){var G=!1;if(0===U)G=!0,N="No value argument passed to `assert.ok()`";else if(N instanceof Error)throw N;var W=new n({actual:Z,expected:!0,message:N,operator:"==",stackStartFn:R});throw W.generatedMessage=G,W}}function f(){for(var R=arguments.length,U=new Array(R),Z=0;Z<R;Z++)U[Z]=arguments[Z];_.apply(void 0,[f,U.length].concat(U))}g.fail=function R(U,Z,N,G,W){var ae,re=arguments.length;if(0===re?ae="Failed":1===re?(N=U,U=void 0):(!1===m&&(m=!0,(S.emitWarning?S.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===re&&(G="!=")),N instanceof Error)throw N;var ne={actual:U,expected:Z,operator:void 0===G?"fail":G,stackStartFn:W||R};void 0!==N&&(ne.message=N);var Q=new n(ne);throw ae&&(Q.message=ae,Q.generatedMessage=!0),Q},g.AssertionError=n,g.ok=f,g.equal=function R(U,Z,N){if(arguments.length<2)throw new r("actual","expected");U!=Z&&v({actual:U,expected:Z,message:N,operator:"==",stackStartFn:R})},g.notEqual=function R(U,Z,N){if(arguments.length<2)throw new r("actual","expected");U==Z&&v({actual:U,expected:Z,message:N,operator:"!=",stackStartFn:R})},g.deepEqual=function R(U,Z,N){if(arguments.length<2)throw new r("actual","expected");void 0===o&&d(),o(U,Z)||v({actual:U,expected:Z,message:N,operator:"deepEqual",stackStartFn:R})},g.notDeepEqual=function R(U,Z,N){if(arguments.length<2)throw new r("actual","expected");void 0===o&&d(),o(U,Z)&&v({actual:U,expected:Z,message:N,operator:"notDeepEqual",stackStartFn:R})},g.deepStrictEqual=function R(U,Z,N){if(arguments.length<2)throw new r("actual","expected");void 0===o&&d(),T(U,Z)||v({actual:U,expected:Z,message:N,operator:"deepStrictEqual",stackStartFn:R})},g.notDeepStrictEqual=function R(U,Z,N){if(arguments.length<2)throw new r("actual","expected");void 0===o&&d(),T(U,Z)&&v({actual:U,expected:Z,message:N,operator:"notDeepStrictEqual",stackStartFn:R})},g.strictEqual=function R(U,Z,N){if(arguments.length<2)throw new r("actual","expected");y(U,Z)||v({actual:U,expected:Z,message:N,operator:"strictEqual",stackStartFn:R})},g.notStrictEqual=function R(U,Z,N){if(arguments.length<2)throw new r("actual","expected");y(U,Z)&&v({actual:U,expected:Z,message:N,operator:"notStrictEqual",stackStartFn:R})};var C=function R(U,Z,N){var G=this;(function(W,ae){if(!(W instanceof ae))throw new TypeError("Cannot call a class as a function")})(this,R),Z.forEach(function(W){W in U&&(G[W]=void 0!==N&&"string"==typeof N[W]&&h(U[W])&&U[W].test(N[W])?N[W]:U[W])})};function w(R,U,Z,N){if("function"!=typeof U){if(h(U))return U.test(R);if(2===arguments.length)throw new l("expected",["Function","RegExp"],U);if("object"!==k(R)||null===R){var G=new n({actual:R,expected:U,message:Z,operator:"deepStrictEqual",stackStartFn:N});throw G.operator=N.name,G}var W=Object.keys(U);if(U instanceof Error)W.push("name","message");else if(0===W.length)throw new t("error",U,"may not be an empty object");return void 0===o&&d(),W.forEach(function(ae){"string"==typeof R[ae]&&h(U[ae])&&U[ae].test(R[ae])||function(re,ne,Q,$,X,oe){if(!(Q in re)||!T(re[Q],ne[Q])){if(!$){var fe=new C(re,X),ue=new C(ne,X,re),ge=new n({actual:fe,expected:ue,operator:"deepStrictEqual",stackStartFn:oe});throw ge.actual=re,ge.expected=ne,ge.operator=oe.name,ge}v({actual:re,expected:ne,message:$,operator:oe.name,stackStartFn:oe})}}(R,U,ae,Z,W,N)}),!0}return void 0!==U.prototype&&R instanceof U||!Error.isPrototypeOf(U)&&!0===U.call({},R)}function E(R){if("function"!=typeof R)throw new l("fn","Function",R);try{R()}catch(U){return U}return x}function P(R){return c(R)||null!==R&&"object"===k(R)&&"function"==typeof R.then&&"function"==typeof R.catch}function L(R){return Promise.resolve().then(function(){var U;if("function"==typeof R){if(!P(U=R()))throw new i("instance of Promise","promiseFn",U)}else{if(!P(R))throw new l("promiseFn",["Function","Promise"],R);U=R}return Promise.resolve().then(function(){return U}).then(function(){return x}).catch(function(Z){return Z})})}function O(R,U,Z,N){if("string"==typeof Z){if(4===arguments.length)throw new l("error",["Object","Error","Function","RegExp"],Z);if("object"===k(U)&&null!==U){if(U.message===Z)throw new p("error/message",'The error message "'.concat(U.message,'" is identical to the message.'))}else if(U===Z)throw new p("error/message",'The error "'.concat(U,'" is identical to the message.'));N=Z,Z=void 0}else if(null!=Z&&"object"!==k(Z)&&"function"!=typeof Z)throw new l("error",["Object","Error","Function","RegExp"],Z);if(U===x){var G="";Z&&Z.name&&(G+=" (".concat(Z.name,")")),G+=N?": ".concat(N):".",v({actual:void 0,expected:Z,operator:R.name,message:"Missing expected ".concat("rejects"===R.name?"rejection":"exception").concat(G),stackStartFn:R})}if(Z&&!w(U,Z,N,R))throw U}function z(R,U,Z,N){if(U!==x){if("string"==typeof Z&&(N=Z,Z=void 0),!Z||w(U,Z)){var G=N?": ".concat(N):".";v({actual:U,expected:Z,operator:R.name,message:"Got unwanted ".concat("doesNotReject"===R.name?"rejection":"exception").concat(G,"\n")+'Actual message: "'.concat(U&&U.message,'"'),stackStartFn:R})}throw U}}function V(){for(var R=arguments.length,U=new Array(R),Z=0;Z<R;Z++)U[Z]=arguments[Z];_.apply(void 0,[V,U.length].concat(U))}g.throws=function R(U){for(var Z=arguments.length,N=new Array(Z>1?Z-1:0),G=1;G<Z;G++)N[G-1]=arguments[G];O.apply(void 0,[R,E(U)].concat(N))},g.rejects=function R(U){for(var Z=arguments.length,N=new Array(Z>1?Z-1:0),G=1;G<Z;G++)N[G-1]=arguments[G];return L(U).then(function(W){return O.apply(void 0,[R,W].concat(N))})},g.doesNotThrow=function R(U){for(var Z=arguments.length,N=new Array(Z>1?Z-1:0),G=1;G<Z;G++)N[G-1]=arguments[G];z.apply(void 0,[R,E(U)].concat(N))},g.doesNotReject=function R(U){for(var Z=arguments.length,N=new Array(Z>1?Z-1:0),G=1;G<Z;G++)N[G-1]=arguments[G];return L(U).then(function(W){return z.apply(void 0,[R,W].concat(N))})},g.ifError=function R(U){if(null!=U){var Z="ifError got unwanted exception: ";"object"===k(U)&&"string"==typeof U.message?Z+=0===U.message.length&&U.constructor?U.constructor.name:U.message:Z+=a(U);var N=new n({actual:U,expected:null,operator:"ifError",message:Z,stackStartFn:R}),G=U.stack;if("string"==typeof G){var W=G.split("\n");W.shift();for(var ae=N.stack.split("\n"),re=0;re<W.length;re++){var ne=ae.indexOf(W[re]);if(-1!==ne){ae=ae.slice(0,ne);break}}N.stack="".concat(ae.join("\n"),"\n").concat(W.join("\n"))}throw N}},g.strict=u(V,g,{equal:g.strictEqual,deepEqual:g.deepStrictEqual,notEqual:g.notStrictEqual,notDeepEqual:g.notDeepStrictEqual}),g.strict.strict=g.strict},26144:function(ie,F,e){"use strict";var S=e(4168);function k(v,_,f){return _ in v?Object.defineProperty(v,_,{value:f,enumerable:!0,configurable:!0,writable:!0}):v[_]=f,v}function T(v,_){return!_||"object"!==r(_)&&"function"!=typeof _?b(v):_}function b(v){if(void 0===v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function p(v){var _="function"==typeof Map?new Map:void 0;return p=function(f){if(null===f||-1===Function.toString.call(f).indexOf("[native code]"))return f;if("function"!=typeof f)throw new TypeError("Super expression must either be null or a function");if(void 0!==_){if(_.has(f))return _.get(f);_.set(f,w)}function w(){return l(f,arguments,i(this).constructor)}return w.prototype=Object.create(f.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),t(w,f)},p(v)}function l(v,_,f){return(l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(C,w,E){var P=[null];P.push.apply(P,w);var L=new(Function.bind.apply(C,P));return E&&t(L,E.prototype),L}).apply(null,arguments)}function t(v,_){return(t=Object.setPrototypeOf||function(f,C){return f.__proto__=C,f})(v,_)}function i(v){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)})(v)}function r(v){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_){return typeof _}:function(_){return _&&"function"==typeof Symbol&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(v)}var n=e(35840).inspect,a=e(86832).codes.ERR_INVALID_ARG_TYPE;function s(v,_,f){return(void 0===f||f>v.length)&&(f=v.length),v.substring(f-_.length,f)===_}var c="",h="",u="",y="",d={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function m(v){var _=Object.keys(v),f=Object.create(Object.getPrototypeOf(v));return _.forEach(function(C){f[C]=v[C]}),Object.defineProperty(f,"message",{value:v.message}),f}function g(v){return n(v,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var x=function(v){function _(w){var E;if(function(ae,re){if(!(ae instanceof re))throw new TypeError("Cannot call a class as a function")}(this,_),"object"!==r(w)||null===w)throw new a("options","Object",w);var P=w.message,L=w.operator,O=w.stackStartFn,z=w.actual,V=w.expected,R=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=P)E=T(this,i(_).call(this,String(P)));else if(S.stderr&&S.stderr.isTTY&&(S.stderr&&S.stderr.getColorDepth&&1!==S.stderr.getColorDepth()?(c="\x1b[34m",h="\x1b[32m",y="\x1b[39m",u="\x1b[31m"):(c="",h="",y="",u="")),"object"===r(z)&&null!==z&&"object"===r(V)&&null!==V&&"stack"in z&&z instanceof Error&&"stack"in V&&V instanceof Error&&(z=m(z),V=m(V)),"deepStrictEqual"===L||"strictEqual"===L)E=T(this,i(_).call(this,function(ae,re,ne){var Q="",$="",X=0,oe="",fe=!1,ue=g(ae),ge=ue.split("\n"),we=g(re).split("\n"),Te=0,xe="";if("strictEqual"===ne&&"object"===r(ae)&&"object"===r(re)&&null!==ae&&null!==re&&(ne="strictEqualObject"),1===ge.length&&1===we.length&&ge[0]!==we[0]){var ye=ge[0].length+we[0].length;if(ye<=10){if(!("object"===r(ae)&&null!==ae||"object"===r(re)&&null!==re||0===ae&&0===re))return"".concat(d[ne],"\n\n")+"".concat(ge[0]," !== ").concat(we[0],"\n")}else if("strictEqualObject"!==ne&&ye<(S.stderr&&S.stderr.isTTY?S.stderr.columns:80)){for(;ge[0][Te]===we[0][Te];)Te++;Te>2&&(xe="\n  ".concat(function(Ne,je){if(je=Math.floor(je),0==Ne.length||0==je)return"";var ve=Ne.length*je;for(je=Math.floor(Math.log(je)/Math.log(2));je;)Ne+=Ne,je--;return Ne+Ne.substring(0,ve-Ne.length)}(" ",Te),"^"),Te=0)}}for(var _e=ge[ge.length-1],Ie=we[we.length-1];_e===Ie&&(Te++<2?oe="\n  ".concat(_e).concat(oe):Q=_e,ge.pop(),we.pop(),0!==ge.length&&0!==we.length);)_e=ge[ge.length-1],Ie=we[we.length-1];var De=Math.max(ge.length,we.length);if(0===De){var be=ue.split("\n");if(be.length>30)for(be[26]="".concat(c,"...").concat(y);be.length>27;)be.pop();return"".concat(d.notIdentical,"\n\n").concat(be.join("\n"),"\n")}Te>3&&(oe="\n".concat(c,"...").concat(y).concat(oe),fe=!0),""!==Q&&(oe="\n  ".concat(Q).concat(oe),Q="");var he=0,ce=d[ne]+"\n".concat(h,"+ actual").concat(y," ").concat(u,"- expected").concat(y),me=" ".concat(c,"...").concat(y," Lines skipped");for(Te=0;Te<De;Te++){var Pe=Te-X;if(ge.length<Te+1)Pe>1&&Te>2&&(Pe>4?($+="\n".concat(c,"...").concat(y),fe=!0):Pe>3&&($+="\n  ".concat(we[Te-2]),he++),$+="\n  ".concat(we[Te-1]),he++),X=Te,Q+="\n".concat(u,"-").concat(y," ").concat(we[Te]),he++;else if(we.length<Te+1)Pe>1&&Te>2&&(Pe>4?($+="\n".concat(c,"...").concat(y),fe=!0):Pe>3&&($+="\n  ".concat(ge[Te-2]),he++),$+="\n  ".concat(ge[Te-1]),he++),X=Te,$+="\n".concat(h,"+").concat(y," ").concat(ge[Te]),he++;else{var Ae=we[Te],Ce=ge[Te],Oe=Ce!==Ae&&(!s(Ce,",")||Ce.slice(0,-1)!==Ae);Oe&&s(Ae,",")&&Ae.slice(0,-1)===Ce&&(Oe=!1,Ce+=","),Oe?(Pe>1&&Te>2&&(Pe>4?($+="\n".concat(c,"...").concat(y),fe=!0):Pe>3&&($+="\n  ".concat(ge[Te-2]),he++),$+="\n  ".concat(ge[Te-1]),he++),X=Te,$+="\n".concat(h,"+").concat(y," ").concat(Ce),Q+="\n".concat(u,"-").concat(y," ").concat(Ae),he+=2):($+=Q,Q="",1!==Pe&&0!==Te||($+="\n  ".concat(Ce),he++))}if(he>20&&Te<De-2)return"".concat(ce).concat(me,"\n").concat($,"\n").concat(c,"...").concat(y).concat(Q,"\n")+"".concat(c,"...").concat(y)}return"".concat(ce).concat(fe?me:"","\n").concat($).concat(Q).concat(oe).concat(xe)}(z,V,L)));else if("notDeepStrictEqual"===L||"notStrictEqual"===L){var U=d[L],Z=g(z).split("\n");if("notStrictEqual"===L&&"object"===r(z)&&null!==z&&(U=d.notStrictEqualObject),Z.length>30)for(Z[26]="".concat(c,"...").concat(y);Z.length>27;)Z.pop();E=T(this,1===Z.length?i(_).call(this,"".concat(U," ").concat(Z[0])):i(_).call(this,"".concat(U,"\n\n").concat(Z.join("\n"),"\n")))}else{var N=g(z),G="",W=d[L];"notDeepEqual"===L||"notEqual"===L?(N="".concat(d[L],"\n\n").concat(N)).length>1024&&(N="".concat(N.slice(0,1021),"...")):(G="".concat(g(V)),N.length>512&&(N="".concat(N.slice(0,509),"...")),G.length>512&&(G="".concat(G.slice(0,509),"...")),"deepEqual"===L||"equal"===L?N="".concat(W,"\n\n").concat(N,"\n\nshould equal\n\n"):G=" ".concat(L," ").concat(G)),E=T(this,i(_).call(this,"".concat(N).concat(G)))}return Error.stackTraceLimit=R,E.generatedMessage=!P,Object.defineProperty(b(E),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),E.code="ERR_ASSERTION",E.actual=z,E.expected=V,E.operator=L,Error.captureStackTrace&&Error.captureStackTrace(b(E),O),E.name="AssertionError",T(E)}var C;return function(w,E){if("function"!=typeof E&&null!==E)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(E&&E.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),E&&t(w,E)}(_,v),C=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:n.custom,value:function(w,E){return n(this,function(P){for(var L=1;L<arguments.length;L++){var O=null!=arguments[L]?arguments[L]:{},z=Object.keys(O);"function"==typeof Object.getOwnPropertySymbols&&(z=z.concat(Object.getOwnPropertySymbols(O).filter(function(V){return Object.getOwnPropertyDescriptor(O,V).enumerable}))),z.forEach(function(V){k(P,V,O[V])})}return P}({},E,{customInspect:!1,depth:0}))}}],C&&function o(v,_){for(var f=0;f<_.length;f++){var C=_[f];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(v,C.key,C)}}(_.prototype,C),_}(p(Error));ie.exports=x},86832:function(ie,F,e){"use strict";function S(i){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(i)}function k(i){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(i)}function o(i,r){return(o=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n})(i,r)}var T,b,p={};function l(i,r,n){n||(n=Error);var a=function(s){function c(h,u,y){var d,m,g,x;return function(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}(this,c),(d=function(m,g){return!g||"object"!==S(g)&&"function"!=typeof g?function(x){if(void 0===x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}(m):g}(this,k(c).call(this,(m=h,g=u,x=y,"string"==typeof r?r:r(m,g,x))))).code=i,d}return function(h,u){if("function"!=typeof u&&null!==u)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(u&&u.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),u&&o(h,u)}(c,s),c}(n);p[i]=a}function t(i,r){if(Array.isArray(i)){var n=i.length;return i=i.map(function(a){return String(a)}),n>2?"one of ".concat(r," ").concat(i.slice(0,n-1).join(", "),", or ")+i[n-1]:2===n?"one of ".concat(r," ").concat(i[0]," or ").concat(i[1]):"of ".concat(r," ").concat(i[0])}return"of ".concat(r," ").concat(String(i))}l("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),l("ERR_INVALID_ARG_TYPE",function(i,r,n){var a,c,h,u,d,g;if(void 0===T&&(T=e(45408)),T("string"==typeof i,"'name' must be a string"),"string"==typeof r&&("not ","not "===r.substr(0,4))?(a="must not be",r=r.replace(/^not /,"")):a="must be",d=i," argument",(void 0===g||g>d.length)&&(g=d.length)," argument"===d.substring(g-9,g))c="The ".concat(i," ").concat(a," ").concat(t(r,"type"));else{var y=("number"!=typeof u&&(u=0),u+1>(h=i).length||-1===h.indexOf(".",u)?"argument":"property");c='The "'.concat(i,'" ').concat(y," ").concat(a," ").concat(t(r,"type"))}return c+". Received type ".concat(S(n))},TypeError),l("ERR_INVALID_ARG_VALUE",function(i,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===b&&(b=e(35840));var a=b.inspect(r);return a.length>128&&(a="".concat(a.slice(0,128),"...")),"The argument '".concat(i,"' ").concat(n,". Received ").concat(a)},TypeError,RangeError),l("ERR_INVALID_RETURN_VALUE",function(i,r,n){var a;return a=n&&n.constructor&&n.constructor.name?"instance of ".concat(n.constructor.name):"type ".concat(S(n)),"Expected ".concat(i,' to be returned from the "').concat(r,'"')+" function but got ".concat(a,".")},TypeError),l("ERR_MISSING_ARGS",function(){for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];void 0===T&&(T=e(45408)),T(r.length>0,"At least one arg needs to be specified");var a="The ",s=r.length;switch(r=r.map(function(c){return'"'.concat(c,'"')}),s){case 1:a+="".concat(r[0]," argument");break;case 2:a+="".concat(r[0]," and ").concat(r[1]," arguments");break;default:a+=r.slice(0,s-1).join(", "),a+=", and ".concat(r[s-1]," arguments")}return"".concat(a," must be specified")},TypeError),ie.exports.codes=p},25116:function(ie,F,e){"use strict";function S(X,oe){return function(fe){if(Array.isArray(fe))return fe}(X)||function(fe,ue){var ge=[],we=!0,Te=!1,xe=void 0;try{for(var ye,_e=fe[Symbol.iterator]();!(we=(ye=_e.next()).done)&&(ge.push(ye.value),!ue||ge.length!==ue);we=!0);}catch(Ie){Te=!0,xe=Ie}finally{try{we||null==_e.return||_e.return()}finally{if(Te)throw xe}}return ge}(X,oe)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function k(X){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(oe){return typeof oe}:function(oe){return oe&&"function"==typeof Symbol&&oe.constructor===Symbol&&oe!==Symbol.prototype?"symbol":typeof oe})(X)}var o=void 0!==/a/g.flags,T=function(X){var oe=[];return X.forEach(function(fe){return oe.push(fe)}),oe},b=function(X){var oe=[];return X.forEach(function(fe,ue){return oe.push([ue,fe])}),oe},p=Object.is?Object.is:e(39896),l=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},t=Number.isNaN?Number.isNaN:e(1560);function i(X){return X.call.bind(X)}var r=i(Object.prototype.hasOwnProperty),n=i(Object.prototype.propertyIsEnumerable),a=i(Object.prototype.toString),s=e(35840).types,c=s.isAnyArrayBuffer,h=s.isArrayBufferView,u=s.isDate,y=s.isMap,d=s.isRegExp,m=s.isSet,g=s.isNativeError,x=s.isBoxedPrimitive,v=s.isNumberObject,_=s.isStringObject,f=s.isBooleanObject,C=s.isBigIntObject,w=s.isSymbolObject,E=s.isFloat32Array,P=s.isFloat64Array;function L(X){if(0===X.length||X.length>10)return!0;for(var oe=0;oe<X.length;oe++){var fe=X.charCodeAt(oe);if(fe<48||fe>57)return!0}return 10===X.length&&X>=Math.pow(2,32)}function O(X){return Object.keys(X).filter(L).concat(l(X).filter(Object.prototype.propertyIsEnumerable.bind(X)))}function z(X,oe){if(X===oe)return 0;for(var fe=X.length,ue=oe.length,ge=0,we=Math.min(fe,ue);ge<we;++ge)if(X[ge]!==oe[ge]){fe=X[ge],ue=oe[ge];break}return fe<ue?-1:ue<fe?1:0}var V=0,R=1,U=2,Z=3;function N(X,oe,fe,ue){if(X===oe)return 0!==X||!fe||p(X,oe);if(fe){if("object"!==k(X))return"number"==typeof X&&t(X)&&t(oe);if("object"!==k(oe)||null===X||null===oe||Object.getPrototypeOf(X)!==Object.getPrototypeOf(oe))return!1}else{if(null===X||"object"!==k(X))return(null===oe||"object"!==k(oe))&&X==oe;if(null===oe||"object"!==k(oe))return!1}var ge,we,Te,xe,he,ce,ye=a(X);if(ye!==a(oe))return!1;if(Array.isArray(X)){if(X.length!==oe.length)return!1;var _e=O(X),Ie=O(oe);return _e.length===Ie.length&&W(X,oe,fe,ue,R,_e)}if("[object Object]"===ye&&(!y(X)&&y(oe)||!m(X)&&m(oe)))return!1;if(u(X)){if(!u(oe)||Date.prototype.getTime.call(X)!==Date.prototype.getTime.call(oe))return!1}else if(d(X)){if(!d(oe)||(Te=X,xe=oe,!(o?Te.source===xe.source&&Te.flags===xe.flags:RegExp.prototype.toString.call(Te)===RegExp.prototype.toString.call(xe))))return!1}else if(g(X)||X instanceof Error){if(X.message!==oe.message||X.name!==oe.name)return!1}else{if(h(X)){if(fe||!E(X)&&!P(X)){if((he=X).byteLength!==(ce=oe).byteLength||0!==z(new Uint8Array(he.buffer,he.byteOffset,he.byteLength),new Uint8Array(ce.buffer,ce.byteOffset,ce.byteLength)))return!1}else if(!function(he,ce){if(he.byteLength!==ce.byteLength)return!1;for(var me=0;me<he.byteLength;me++)if(he[me]!==ce[me])return!1;return!0}(X,oe))return!1;var De=O(X),be=O(oe);return De.length===be.length&&W(X,oe,fe,ue,V,De)}if(m(X))return!(!m(oe)||X.size!==oe.size)&&W(X,oe,fe,ue,U);if(y(X))return!(!y(oe)||X.size!==oe.size)&&W(X,oe,fe,ue,Z);if(c(X)){if((ge=X).byteLength!==(we=oe).byteLength||0!==z(new Uint8Array(ge),new Uint8Array(we)))return!1}else if(x(X)&&!function(he,ce){return v(he)?v(ce)&&p(Number.prototype.valueOf.call(he),Number.prototype.valueOf.call(ce)):_(he)?_(ce)&&String.prototype.valueOf.call(he)===String.prototype.valueOf.call(ce):f(he)?f(ce)&&Boolean.prototype.valueOf.call(he)===Boolean.prototype.valueOf.call(ce):C(he)?C(ce)&&BigInt.prototype.valueOf.call(he)===BigInt.prototype.valueOf.call(ce):w(ce)&&Symbol.prototype.valueOf.call(he)===Symbol.prototype.valueOf.call(ce)}(X,oe))return!1}return W(X,oe,fe,ue,V)}function G(X,oe){return oe.filter(function(fe){return n(X,fe)})}function W(X,oe,fe,ue,ge,we){if(5===arguments.length){we=Object.keys(X);var Te=Object.keys(oe);if(we.length!==Te.length)return!1}for(var xe=0;xe<we.length;xe++)if(!r(oe,we[xe]))return!1;if(fe&&5===arguments.length){var ye=l(X);if(0!==ye.length){var _e=0;for(xe=0;xe<ye.length;xe++){var Ie=ye[xe];if(n(X,Ie)){if(!n(oe,Ie))return!1;we.push(Ie),_e++}else if(n(oe,Ie))return!1}var De=l(oe);if(ye.length!==De.length&&G(oe,De).length!==_e)return!1}else{var be=l(oe);if(0!==be.length&&0!==G(oe,be).length)return!1}}if(0===we.length&&(ge===V||ge===R&&0===X.length||0===X.size))return!0;if(void 0===ue)ue={val1:new Map,val2:new Map,position:0};else{var he=ue.val1.get(X);if(void 0!==he){var ce=ue.val2.get(oe);if(void 0!==ce)return he===ce}ue.position++}ue.val1.set(X,ue.position),ue.val2.set(oe,ue.position);var me=function(Pe,Ae,Ce,Oe,Ne,je){var ve=0;if(je===U){if(!function(ze,qe,Ke,it){for(var ft=null,dt=T(ze),kt=0;kt<dt.length;kt++){var St=dt[kt];if("object"===k(St)&&null!==St)null===ft&&(ft=new Set),ft.add(St);else if(!qe.has(St)){if(Ke||!ne(ze,qe,St))return!1;null===ft&&(ft=new Set),ft.add(St)}}if(null!==ft){for(var Tt=T(qe),lt=0;lt<Tt.length;lt++){var ot=Tt[lt];if("object"===k(ot)&&null!==ot){if(!ae(ft,ot,Ke,it))return!1}else if(!Ke&&!ze.has(ot)&&!ae(ft,ot,Ke,it))return!1}return 0===ft.size}return!0}(Pe,Ae,Ce,Ne))return!1}else if(je===Z){if(!function(ze,qe,Ke,it){for(var ft=null,dt=b(ze),kt=0;kt<dt.length;kt++){var St=S(dt[kt],2),Tt=St[0],lt=St[1];if("object"===k(Tt)&&null!==Tt)null===ft&&(ft=new Set),ft.add(Tt);else{var ot=qe.get(Tt);if(void 0===ot&&!qe.has(Tt)||!N(lt,ot,Ke,it)){if(Ke||!Q(ze,qe,Tt,lt,it))return!1;null===ft&&(ft=new Set),ft.add(Tt)}}}if(null!==ft){for(var Rt=b(qe),Vt=0;Vt<Rt.length;Vt++){var Ht=S(Rt[Vt],2),zt=(Tt=Ht[0],Ht[1]);if("object"===k(Tt)&&null!==Tt){if(!$(ft,ze,Tt,zt,Ke,it))return!1}else if(!(Ke||ze.has(Tt)&&N(ze.get(Tt),zt,!1,it)||$(ft,ze,Tt,zt,!1,it)))return!1}return 0===ft.size}return!0}(Pe,Ae,Ce,Ne))return!1}else if(je===R)for(;ve<Pe.length;ve++){if(!r(Pe,ve)){if(r(Ae,ve))return!1;for(var Me=Object.keys(Pe);ve<Me.length;ve++){var Le=Me[ve];if(!r(Ae,Le)||!N(Pe[Le],Ae[Le],Ce,Ne))return!1}return Me.length===Object.keys(Ae).length}if(!r(Ae,ve)||!N(Pe[ve],Ae[ve],Ce,Ne))return!1}for(ve=0;ve<Oe.length;ve++){var Ue=Oe[ve];if(!N(Pe[Ue],Ae[Ue],Ce,Ne))return!1}return!0}(X,oe,fe,we,ue,ge);return ue.val1.delete(X),ue.val2.delete(oe),me}function ae(X,oe,fe,ue){for(var ge=T(X),we=0;we<ge.length;we++){var Te=ge[we];if(N(oe,Te,fe,ue))return X.delete(Te),!0}return!1}function re(X){switch(k(X)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":X=+X;case"number":if(t(X))return!1}return!0}function ne(X,oe,fe){var ue=re(fe);return ue??(oe.has(ue)&&!X.has(ue))}function Q(X,oe,fe,ue,ge){var we=re(fe);if(null!=we)return we;var Te=oe.get(we);return!(void 0===Te&&!oe.has(we)||!N(ue,Te,!1,ge))&&!X.has(we)&&N(ue,Te,!1,ge)}function $(X,oe,fe,ue,ge,we){for(var Te=T(X),xe=0;xe<Te.length;xe++){var ye=Te[xe];if(N(fe,ye,ge,we)&&N(ue,oe.get(ye),ge,we))return X.delete(ye),!0}return!1}ie.exports={isDeepEqual:function(X,oe){return N(X,oe,!1)},isDeepStrictEqual:function(X,oe){return N(X,oe,!0)}}},83160:function(ie,F,e){"use strict";e.r(F),e.d(F,{decode:function(){return b},encode:function(){return T}});for(var S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k=typeof Uint8Array>"u"?[]:new Uint8Array(256),o=0;o<64;o++)k[S.charCodeAt(o)]=o;var T=function(p){var l,t=new Uint8Array(p),i=t.length,r="";for(l=0;l<i;l+=3)r+=S[t[l]>>2],r+=S[(3&t[l])<<4|t[l+1]>>4],r+=S[(15&t[l+1])<<2|t[l+2]>>6],r+=S[63&t[l+2]];return i%3==2?r=r.substring(0,r.length-1)+"=":i%3==1&&(r=r.substring(0,r.length-2)+"=="),r},b=function(p){var l,t,i,r,n,a=.75*p.length,s=p.length,c=0;"="===p[p.length-1]&&(a--,"="===p[p.length-2]&&a--);var h=new ArrayBuffer(a),u=new Uint8Array(h);for(l=0;l<s;l+=4)t=k[p.charCodeAt(l)],i=k[p.charCodeAt(l+1)],r=k[p.charCodeAt(l+2)],n=k[p.charCodeAt(l+3)],u[c++]=t<<2|i>>4,u[c++]=(15&i)<<4|r>>2,u[c++]=(3&r)<<6|63&n;return h}},59968:function(ie,F){"use strict";F.byteLength=function(l){var t=b(l),r=t[1];return 3*(t[0]+r)/4-r},F.toByteArray=function(l){var t,i,d,r=b(l),n=r[0],a=r[1],s=new k(3*(n+(d=a))/4-d),c=0,h=a>0?n-4:n;for(i=0;i<h;i+=4)t=S[l.charCodeAt(i)]<<18|S[l.charCodeAt(i+1)]<<12|S[l.charCodeAt(i+2)]<<6|S[l.charCodeAt(i+3)],s[c++]=t>>16&255,s[c++]=t>>8&255,s[c++]=255&t;return 2===a&&(t=S[l.charCodeAt(i)]<<2|S[l.charCodeAt(i+1)]>>4,s[c++]=255&t),1===a&&(t=S[l.charCodeAt(i)]<<10|S[l.charCodeAt(i+1)]<<4|S[l.charCodeAt(i+2)]>>2,s[c++]=t>>8&255,s[c++]=255&t),s},F.fromByteArray=function(l){for(var t,i=l.length,r=i%3,n=[],a=16383,s=0,c=i-r;s<c;s+=a)n.push(p(l,s,s+a>c?c:s+a));return 1===r?n.push(e[(t=l[i-1])>>2]+e[t<<4&63]+"=="):2===r&&n.push(e[(t=(l[i-2]<<8)+l[i-1])>>10]+e[t>>4&63]+e[t<<2&63]+"="),n.join("")};for(var e=[],S=[],k=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=0;T<64;++T)e[T]=o[T],S[o.charCodeAt(T)]=T;function b(l){var t=l.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=l.indexOf("=");return-1===i&&(i=t),[i,i===t?0:4-i%4]}function p(l,t,i){for(var n,a=[],s=t;s<i;s+=3)a.push(e[(n=(l[s]<<16&16711680)+(l[s+1]<<8&65280)+(255&l[s+2]))>>18&63]+e[n>>12&63]+e[n>>6&63]+e[63&n]);return a.join("")}S["-".charCodeAt(0)]=62,S["_".charCodeAt(0)]=63},64928:function(ie){"use strict";function F(b,p,l,t,i){for(var r=i+1;t<=i;){var n=t+i>>>1,a=b[n];(void 0!==l?l(a,p):a-p)>=0?(r=n,i=n-1):t=n+1}return r}function e(b,p,l,t,i){for(var r=i+1;t<=i;){var n=t+i>>>1,a=b[n];(void 0!==l?l(a,p):a-p)>0?(r=n,i=n-1):t=n+1}return r}function S(b,p,l,t,i){for(var r=t-1;t<=i;){var n=t+i>>>1,a=b[n];(void 0!==l?l(a,p):a-p)<0?(r=n,t=n+1):i=n-1}return r}function k(b,p,l,t,i){for(var r=t-1;t<=i;){var n=t+i>>>1,a=b[n];(void 0!==l?l(a,p):a-p)<=0?(r=n,t=n+1):i=n-1}return r}function o(b,p,l,t,i){for(;t<=i;){var r=t+i>>>1,n=b[r],a=void 0!==l?l(n,p):n-p;if(0===a)return r;a<=0?t=r+1:i=r-1}return-1}function T(b,p,l,t,i,r){return"function"==typeof l?r(b,p,l,void 0===t?0:0|t,void 0===i?b.length-1:0|i):r(b,p,void 0,void 0===l?0:0|l,void 0===t?b.length-1:0|t)}ie.exports={ge:function(b,p,l,t,i){return T(b,p,l,t,i,F)},gt:function(b,p,l,t,i){return T(b,p,l,t,i,e)},lt:function(b,p,l,t,i){return T(b,p,l,t,i,S)},le:function(b,p,l,t,i){return T(b,p,l,t,i,k)},eq:function(b,p,l,t,i){return T(b,p,l,t,i,o)}}},308:function(ie,F){"use strict";function e(k){var o=32;return(k&=-k)&&o--,65535&k&&(o-=16),16711935&k&&(o-=8),252645135&k&&(o-=4),858993459&k&&(o-=2),1431655765&k&&(o-=1),o}F.INT_BITS=32,F.INT_MAX=2147483647,F.INT_MIN=-2147483648,F.sign=function(k){return(k>0)-(k<0)},F.abs=function(k){var o=k>>31;return(k^o)-o},F.min=function(k,o){return o^(k^o)&-(k<o)},F.max=function(k,o){return k^(k^o)&-(k<o)},F.isPow2=function(k){return!(k&k-1||!k)},F.log2=function(k){var o,T;return o=(k>65535)<<4,o|=T=((k>>>=o)>255)<<3,o|=T=((k>>>=T)>15)<<2,(o|=T=((k>>>=T)>3)<<1)|(k>>>=T)>>1},F.log10=function(k){return k>=1e9?9:k>=1e8?8:k>=1e7?7:k>=1e6?6:k>=1e5?5:k>=1e4?4:k>=1e3?3:k>=100?2:k>=10?1:0},F.popCount=function(k){return 16843009*((k=(858993459&(k-=k>>>1&1431655765))+(k>>>2&858993459))+(k>>>4)&252645135)>>>24},F.countTrailingZeros=e,F.nextPow2=function(k){return k+=0===k,--k,k|=k>>>1,k|=k>>>2,k|=k>>>4,1+((k|=k>>>8)|k>>>16)},F.prevPow2=function(k){return k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,(k|=k>>>16)-(k>>>1)},F.parity=function(k){return k^=k>>>16,k^=k>>>8,k^=k>>>4,27030>>>(k&=15)&1};var S=new Array(256);(function(k){for(var o=0;o<256;++o){var T=o,b=o,p=7;for(T>>>=1;T;T>>>=1)b<<=1,b|=1&T,--p;k[o]=b<<p&255}})(S),F.reverse=function(k){return S[255&k]<<24|S[k>>>8&255]<<16|S[k>>>16&255]<<8|S[k>>>24&255]},F.interleave2=function(k,o){return(k=1431655765&((k=858993459&((k=252645135&((k=16711935&((k&=65535)|k<<8))|k<<4))|k<<2))|k<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o&=65535)|o<<8))|o<<4))|o<<2))|o<<1))<<1},F.deinterleave2=function(k,o){return(k=65535&((k=16711935&((k=252645135&((k=858993459&((k=k>>>o&1431655765)|k>>>1))|k>>>2))|k>>>4))|k>>>16))<<16>>16},F.interleave3=function(k,o,T){return k=1227133513&((k=3272356035&((k=251719695&((k=4278190335&((k&=1023)|k<<16))|k<<8))|k<<4))|k<<2),(k|=(o=1227133513&((o=3272356035&((o=251719695&((o=4278190335&((o&=1023)|o<<16))|o<<8))|o<<4))|o<<2))<<1)|(T=1227133513&((T=3272356035&((T=251719695&((T=4278190335&((T&=1023)|T<<16))|T<<8))|T<<4))|T<<2))<<2},F.deinterleave3=function(k,o){return(k=1023&((k=4278190335&((k=251719695&((k=3272356035&((k=k>>>o&1227133513)|k>>>2))|k>>>4))|k>>>8))|k>>>16))<<22>>22},F.nextCombination=function(k){var o=k|k-1;return o+1|(~o&-~o)-1>>>e(k)+1}},29620:function(ie,F,e){"use strict";var S=e(32420);ie.exports=function(b,p){p||(p={});var l,t,i,r,n,a,c,u,y,d=null==p.cutoff?.25:p.cutoff,m=null==p.radius?8:p.radius,g=p.channel||0;if(ArrayBuffer.isView(b)||Array.isArray(b)){if(!p.width||!p.height)throw Error("For raw data width and height should be provided by options");l=p.width,t=p.height,r=b,a=p.stride?p.stride:Math.floor(b.length/l/t)}else window.HTMLCanvasElement&&b instanceof window.HTMLCanvasElement?(r=(c=b).getContext("2d").getImageData(0,0,l=c.width,t=c.height).data,a=4):window.CanvasRenderingContext2D&&b instanceof window.CanvasRenderingContext2D?(l=(c=b.canvas).width,r=b.getImageData(0,0,l,t=c.height).data,a=4):window.ImageData&&b instanceof window.ImageData&&(l=b.width,t=b.height,r=b.data,a=4);if(i=Math.max(l,t),window.Uint8ClampedArray&&r instanceof window.Uint8ClampedArray||window.Uint8Array&&r instanceof window.Uint8Array)for(n=r,r=Array(l*t),u=0,y=n.length;u<y;u++)r[u]=n[u*a+g]/255;else if(1!==a)throw Error("Raw data can have only 1 value per pixel");var x=Array(l*t),v=Array(l*t),_=Array(i),f=Array(i),C=Array(i+1),w=Array(i);for(u=0,y=l*t;u<y;u++){var E=r[u];x[u]=1===E?0:0===E?k:Math.pow(Math.max(0,.5-E),2),v[u]=1===E?k:0===E?0:Math.pow(Math.max(0,E-.5),2)}o(x,l,t,_,f,w,C),o(v,l,t,_,f,w,C);var P=window.Float32Array?new Float32Array(l*t):new Array(l*t);for(u=0,y=l*t;u<y;u++)P[u]=S(1-((x[u]-v[u])/m+d),0,1);return P};var k=1e20;function o(b,p,l,t,i,r,n){for(var a=0;a<p;a++){for(var s=0;s<l;s++)t[s]=b[s*p+a];for(T(t,i,r,n,l),s=0;s<l;s++)b[s*p+a]=i[s]}for(s=0;s<l;s++){for(a=0;a<p;a++)t[a]=b[s*p+a];for(T(t,i,r,n,p),a=0;a<p;a++)b[s*p+a]=Math.sqrt(i[a])}}function T(b,p,l,t,i){l[0]=0,t[0]=-k,t[1]=+k;for(var r=1,n=0;r<i;r++){for(var a=(b[r]+r*r-(b[l[n]]+l[n]*l[n]))/(2*r-2*l[n]);a<=t[n];)n--,a=(b[r]+r*r-(b[l[n]]+l[n]*l[n]))/(2*r-2*l[n]);l[++n]=r,t[n]=a,t[n+1]=+k}for(r=0,n=0;r<i;r++){for(;t[n+1]<r;)n++;p[r]=(r-l[n])*(r-l[n])+b[l[n]]}}},99676:function(ie,F,e){"use strict";var S=e(53664),k=e(57916),o=k(S("String.prototype.indexOf"));ie.exports=function(T,b){var p=S(T,!!b);return"function"==typeof p&&o(T,".prototype.")>-1?k(p):p}},57916:function(ie,F,e){"use strict";var S=e(8844),k=e(53664),o=e(14500),T=k("%TypeError%"),b=k("%Function.prototype.apply%"),p=k("%Function.prototype.call%"),l=k("%Reflect.apply%",!0)||S.call(p,b),t=k("%Object.defineProperty%",!0),i=k("%Math.max%");if(t)try{t({},"a",{value:1})}catch{t=null}ie.exports=function(n){if("function"!=typeof n)throw new T("a function is required");var a=l(S,p,arguments);return o(a,1+i(0,n.length-(arguments.length-1)),!0)};var r=function(){return l(S,b,arguments)};t?t(ie.exports,"apply",{value:r}):ie.exports.apply=r},32420:function(ie){ie.exports=function(F,e,S){return e<S?F<e?e:F>S?S:F:F<S?S:F>e?e:F}},3808:function(ie,F,e){"use strict";var S=e(32420);function k(o,T){null==T&&(T=!0);var b=o[0],p=o[1],l=o[2],t=o[3];return null==t&&(t=T?1:255),T&&(b*=255,p*=255,l*=255,t*=255),16777216*(b=255&S(b,0,255))+((p=255&S(p,0,255))<<16)+((l=255&S(l,0,255))<<8)+(255&S(t,0,255))}ie.exports=k,ie.exports.to=k,ie.exports.from=function(o,T){var b=(o=+o)>>>24,p=(16711680&o)>>>16,l=(65280&o)>>>8,t=255&o;return!1===T?[b,p,l,t]:[b/255,p/255,l/255,t/255]}},17592:function(ie){"use strict";ie.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},72160:function(ie,F,e){"use strict";var S=e(96824),k=e(32420),o=e(72512);ie.exports=function(T,b){"float"!==b&&b||(b="array"),"uint"===b&&(b="uint8"),"uint_clamped"===b&&(b="uint8_clamped");var t,p=new(o(b))(4),l="uint8"!==b&&"uint8_clamped"!==b;return T.length&&"string"!=typeof T||((T=S(T))[0]/=255,T[1]/=255,T[2]/=255),(t=T)instanceof Uint8Array||t instanceof Uint8ClampedArray||Array.isArray(t)&&(t[0]>1||0===t[0])&&(t[1]>1||0===t[1])&&(t[2]>1||0===t[2])&&(!t[3]||t[3]>1)?(p[0]=T[0],p[1]=T[1],p[2]=T[2],p[3]=null!=T[3]?T[3]:255,l&&(p[0]/=255,p[1]/=255,p[2]/=255,p[3]/=255),p):(l?(p[0]=T[0],p[1]=T[1],p[2]=T[2],p[3]=null!=T[3]?T[3]:1):(p[0]=k(Math.floor(255*T[0]),0,255),p[1]=k(Math.floor(255*T[1]),0,255),p[2]=k(Math.floor(255*T[2]),0,255),p[3]=null==T[3]?255:k(Math.floor(255*T[3]),0,255)),p)}},96824:function(ie,F,e){"use strict";var S=e(95532),k=e(53576),o=e(32420);ie.exports=function(T){var b,p=S(T);return p.space?((b=Array(3))[0]=o(p.values[0],0,255),b[1]=o(p.values[1],0,255),b[2]=o(p.values[2],0,255),"h"===p.space[0]&&(b=k.rgb(b)),b.push(o(p.alpha,0,1)),b):[]}},95532:function(ie,F,e){"use strict";var S=e(17592);ie.exports=function(o){var T,b,p=[],l=1;if("string"==typeof o)if(o=o.toLowerCase(),S[o])p=S[o].slice(),b="rgb";else if("transparent"===o)l=0,b="rgb",p=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(o)){var t=o.slice(1);l=1,(n=t.length)<=4?(p=[parseInt(t[0]+t[0],16),parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16)],4===n&&(l=parseInt(t[3]+t[3],16)/255)):(p=[parseInt(t[0]+t[1],16),parseInt(t[2]+t[3],16),parseInt(t[4]+t[5],16)],8===n&&(l=parseInt(t[6]+t[7],16)/255)),p[0]||(p[0]=0),p[1]||(p[1]=0),p[2]||(p[2]=0),b="rgb"}else if(T=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(o)){var i=T[1],r="rgb"===i;b=t=i.replace(/a$/,"");var n="cmyk"===t?4:"gray"===t?1:3;p=T[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(a,s){if(/%$/.test(a))return s===n?parseFloat(a)/100:"rgb"===t?255*parseFloat(a)/100:parseFloat(a);if("h"===t[s]){if(/deg$/.test(a))return parseFloat(a);if(void 0!==k[a])return k[a]}return parseFloat(a)}),i===t&&p.push(1),l=r||void 0===p[n]?1:p[n],p=p.slice(0,n)}else o.length>10&&/[0-9](?:\s|\/)/.test(o)&&(p=o.match(/([0-9]+)/g).map(function(a){return parseFloat(a)}),b=o.match(/([a-z])/gi).join("").toLowerCase());else isNaN(o)?Array.isArray(o)||o.length?(p=[o[0],o[1],o[2]],b="rgb",l=4===o.length?o[3]:1):o instanceof Object&&(null!=o.r||null!=o.red||null!=o.R?(b="rgb",p=[o.r||o.red||o.R||0,o.g||o.green||o.G||0,o.b||o.blue||o.B||0]):(b="hsl",p=[o.h||o.hue||o.H||0,o.s||o.saturation||o.S||0,o.l||o.lightness||o.L||o.b||o.brightness]),l=o.a||o.alpha||o.opacity||1,null!=o.opacity&&(l/=100)):(b="rgb",p=[o>>>16,(65280&o)>>>8,255&o]);return{space:b,values:p,alpha:l}};var k={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},53576:function(ie,F,e){"use strict";var S=e(19336);ie.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(k){var o,T,b,p,l,t=k[0]/360,i=k[1]/100,r=k[2]/100;if(0===i)return[l=255*r,l,l];o=2*r-(T=r<.5?r*(1+i):r+i-r*i),p=[0,0,0];for(var n=0;n<3;n++)(b=t+.3333333333333333*-(n-1))<0?b++:b>1&&b--,p[n]=255*(l=6*b<1?o+6*(T-o)*b:2*b<1?T:3*b<2?o+(T-o)*(.6666666666666666-b)*6:o);return p}},S.hsl=function(k){var o,T,b=k[0]/255,p=k[1]/255,l=k[2]/255,t=Math.min(b,p,l),i=Math.max(b,p,l),r=i-t;return i===t?o=0:b===i?o=(p-l)/r:p===i?o=2+(l-b)/r:l===i&&(o=4+(b-p)/r),(o=Math.min(60*o,360))<0&&(o+=360),T=(t+i)/2,[o,100*(i===t?0:T<=.5?r/(i+t):r/(2-i-t)),100*T]}},19336:function(ie){"use strict";ie.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},36116:function(ie){ie.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xe7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xe9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xe9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xe3)o.?tom(e|\xe9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},42771:function(ie,F,e){"use strict";ie.exports={parse:e(46416),stringify:e(49395)}},8744:function(ie,F,e){"use strict";var S=e(30584);ie.exports={isSize:function(k){return/^[\d\.]/.test(k)||-1!==k.indexOf("/")||-1!==S.indexOf(k)}}},46416:function(ie,F,e){"use strict";var S=e(92384),k=e(68194),o=e(3748),T=e(2904),b=e(47916),p=e(7294),l=e(39956),t=e(8744).isSize;ie.exports=r;var i=r.cache={};function r(a){if("string"!=typeof a)throw new Error("Font argument must be a string.");if(i[a])return i[a];if(""===a)throw new Error("Cannot parse an empty string.");if(-1!==o.indexOf(a))return i[a]={system:a};for(var s,c={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},h=l(a,/\s+/);s=h.shift();){if(-1!==k.indexOf(s))return["style","variant","weight","stretch"].forEach(function(y){c[y]=s}),i[a]=c;if(-1===b.indexOf(s))if("normal"!==s&&"small-caps"!==s)if(-1===p.indexOf(s)){if(-1===T.indexOf(s)){if(t(s)){var u=l(s,"/");if(c.size=u[0],null!=u[1]?c.lineHeight=n(u[1]):"/"===h[0]&&(h.shift(),c.lineHeight=n(h.shift())),!h.length)throw new Error("Missing required font-family.");return c.family=l(h.join(" "),/\s*,\s*/).map(S),i[a]=c}throw new Error("Unknown or unsupported font token: "+s)}c.weight=s}else c.stretch=s;else c.variant=s;else c.style=s}throw new Error("Missing required font-size.")}function n(a){var s=parseFloat(a);return s.toString()===a?s:a}},49395:function(ie,F,e){"use strict";var S=e(55616),k=e(8744).isSize,o=a(e(68194)),T=a(e(3748)),b=a(e(2904)),p=a(e(47916)),l=a(e(7294)),t={normal:1,"small-caps":1},i={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},r="serif";function n(s,c){if(s&&!c[s]&&!o[s])throw Error("Unknown keyword `"+s+"`");return s}function a(s){for(var c={},h=0;h<s.length;h++)c[s[h]]=1;return c}ie.exports=function(s){if((s=S(s,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return s.system&&n(s.system,T),s.system;if(n(s.style,p),n(s.variant,t),n(s.weight,b),n(s.stretch,l),null==s.size&&(s.size="1rem"),"number"==typeof s.size&&(s.size+="px"),!k)throw Error("Bad size value `"+s.size+"`");s.family||(s.family=r),Array.isArray(s.family)&&(s.family.length||(s.family=[r]),s.family=s.family.map(function(h){return i[h]?h:'"'+h+'"'}).join(", "));var c=[];return c.push(s.style),s.variant!==s.style&&c.push(s.variant),s.weight!==s.variant&&s.weight!==s.style&&c.push(s.weight),s.stretch!==s.weight&&s.stretch!==s.variant&&s.stretch!==s.style&&c.push(s.stretch),c.push(s.size+(null==s.lineHeight||"normal"===s.lineHeight||s.lineHeight+""=="1"?"":"/"+s.lineHeight)),c.push(s.family),c.filter(Boolean).join(" ")}},27940:function(ie,F,e){"use strict";var S,k=e(81680),o=e(18496),T=e(87396),b=e(95920),p=e(50868),l=e(84323),t=Function.prototype.bind,i=Object.defineProperty,r=Object.prototype.hasOwnProperty;S=function(n,a,s){var c,h=o(a)&&T(a.value);return delete(c=b(a)).writable,delete c.value,c.get=function(){return!s.overwriteDefinition&&r.call(this,n)?h:(a.value=t.call(h,s.resolveContext?s.resolveContext(this):this),i(this,n,a),this[n])},c},ie.exports=function(n){var a=p(arguments[1]);return k(a.resolveContext)&&T(a.resolveContext),l(n,function(s,c){return S(c,s,a)})}},21092:function(ie,F,e){"use strict";var S=e(81680),k=e(85488),o=e(38452),T=e(50868),b=e(71056),p=ie.exports=function(l,t){var i,r,n,a,s;return arguments.length<2||"string"!=typeof l?(a=t,t=l,l=null):a=arguments[2],S(l)?(i=b.call(l,"c"),r=b.call(l,"e"),n=b.call(l,"w")):(i=n=!0,r=!1),s={value:t,configurable:i,enumerable:r,writable:n},a?o(T(a),s):s};p.gs=function(l,t,i){var r,n,a,s;return"string"!=typeof l?(a=i,i=t,t=l,l=null):a=arguments[3],S(t)?k(t)?S(i)?k(i)||(a=i,i=void 0):i=void 0:(a=t,t=i=void 0):t=void 0,S(l)?(r=b.call(l,"c"),n=b.call(l,"e")):(r=!0,n=!1),s={get:t,set:i,configurable:r,enumerable:n},a?o(T(a),s):s}},84706:function(ie,F,e){"use strict";function S(a,s){return a<s?-1:a>s?1:a>=s?0:NaN}var k,o;function b(a,s){var c,h,u=a.length,y=-1;if(null==s){for(;++y<u;)if(null!=(c=a[y])&&c>=c)for(h=c;++y<u;)null!=(c=a[y])&&c>h&&(h=c)}else for(;++y<u;)if(null!=(c=s(a[y],y,a))&&c>=c)for(h=c;++y<u;)null!=(c=s(a[y],y,a))&&c>h&&(h=c);return h}function p(a){return null===a?NaN:+a}function l(a,s){var c,h=a.length,u=h,y=-1,d=0;if(null==s)for(;++y<h;)isNaN(c=p(a[y]))?--u:d+=c;else for(;++y<h;)isNaN(c=p(s(a[y],y,a)))?--u:d+=c;if(u)return d/u}function t(a){for(var s,c,h,u=a.length,y=-1,d=0;++y<u;)d+=a[y].length;for(c=new Array(d);--u>=0;)for(s=(h=a[u]).length;--s>=0;)c[--d]=h[s];return c}function i(a,s){var c,h,u=a.length,y=-1;if(null==s){for(;++y<u;)if(null!=(c=a[y])&&c>=c)for(h=c;++y<u;)null!=(c=a[y])&&h>c&&(h=c)}else for(;++y<u;)if(null!=(c=s(a[y],y,a))&&c>=c)for(h=c;++y<u;)null!=(c=s(a[y],y,a))&&h>c&&(h=c);return h}function r(a,s,c){a=+a,s=+s,c=(u=arguments.length)<2?(s=a,a=0,1):u<3?1:+c;for(var h=-1,u=0|Math.max(0,Math.ceil((s-a)/c)),y=new Array(u);++h<u;)y[h]=a+h*c;return y}function n(a,s){var c,h=a.length,u=-1,y=0;if(null==s)for(;++u<h;)(c=+a[u])&&(y+=c);else for(;++u<h;)(c=+s(a[u],u,a))&&(y+=c);return y}e.d(F,{XE:function(){return S},kv:function(){return b},mo:function(){return l},Uf:function(){return t},SY:function(){return i},ik:function(){return r},oh:function(){return n}}),1===(k=S).length&&(o=k,k=function(a,s){return S(o(a),s)}),Math.sqrt(50),Math.sqrt(10),Math.sqrt(2)},34712:function(ie,F,e){"use strict";e.d(F,{kH:function(){return T},UJ:function(){return b}});var S="$";function k(){}function o(a,s){var c=new k;if(a instanceof k)a.each(function(m,g){c.set(g,m)});else if(Array.isArray(a)){var h,u=-1,y=a.length;if(null==s)for(;++u<y;)c.set(u,a[u]);else for(;++u<y;)c.set(s(h=a[u],u,a),h)}else if(a)for(var d in a)c.set(d,a[d]);return c}k.prototype=o.prototype={constructor:k,has:function(a){return S+a in this},get:function(a){return this[S+a]},set:function(a,s){return this[S+a]=s,this},remove:function(a){var s=S+a;return s in this&&delete this[s]},clear:function(){for(var a in this)a[0]===S&&delete this[a]},keys:function(){var a=[];for(var s in this)s[0]===S&&a.push(s.slice(1));return a},values:function(){var a=[];for(var s in this)s[0]===S&&a.push(this[s]);return a},entries:function(){var a=[];for(var s in this)s[0]===S&&a.push({key:s.slice(1),value:this[s]});return a},size:function(){var a=0;for(var s in this)s[0]===S&&++a;return a},empty:function(){for(var a in this)if(a[0]===S)return!1;return!0},each:function(a){for(var s in this)s[0]===S&&a(this[s],s.slice(1),this)}};var T=o;function b(){var a,s,c,h=[],u=[];function y(m,g,x,v){if(g>=h.length)return null!=a&&m.sort(a),null!=s?s(m):m;for(var _,f,C,w=-1,E=m.length,P=h[g++],L=T(),O=x();++w<E;)(C=L.get(_=P(f=m[w])+""))?C.push(f):L.set(_,[f]);return L.each(function(z,V){v(O,V,y(z,g,x,v))}),O}function d(m,g){if(++g>h.length)return m;var x,v=u[g-1];return null!=s&&g>=h.length?x=m.entries():(x=[],m.each(function(_,f){x.push({key:f,values:d(_,g)})})),null!=v?x.sort(function(_,f){return v(_.key,f.key)}):x}return c={object:function(m){return y(m,0,p,l)},map:function(m){return y(m,0,t,i)},entries:function(m){return d(y(m,0,t,i),0)},key:function(m){return h.push(m),c},sortKeys:function(m){return u[h.length-1]=m,c},sortValues:function(m){return a=m,c},rollup:function(m){return s=m,c}}}function p(){return{}}function l(a,s,c){a[s]=c}function t(){return T()}function i(a,s,c){a.set(s,c)}function r(){}var n=T.prototype;r.prototype=function(a,s){var c=new r;if(a instanceof r)a.each(function(y){c.add(y)});else if(a){var h=-1,u=a.length;if(null==s)for(;++h<u;)c.add(a[h]);else for(;++h<u;)c.add(s(a[h],h,a))}return c}.prototype={constructor:r,has:n.has,add:function(a){return this[S+(a+="")]=a,this},remove:n.remove,clear:n.clear,values:n.keys,size:n.size,empty:n.empty,each:n.each}},49812:function(ie,F,e){"use strict";function S(ye,_e){var Ie;function De(){var be,he,ce=Ie.length,me=0,Pe=0;for(be=0;be<ce;++be)me+=(he=Ie[be]).x,Pe+=he.y;for(me=me/ce-ye,Pe=Pe/ce-_e,be=0;be<ce;++be)(he=Ie[be]).x-=me,he.y-=Pe}return null==ye&&(ye=0),null==_e&&(_e=0),De.initialize=function(be){Ie=be},De.x=function(be){return arguments.length?(ye=+be,De):ye},De.y=function(be){return arguments.length?(_e=+be,De):_e},De}function k(ye){return function(){return ye}}function o(){return 1e-6*(Math.random()-.5)}function T(ye,_e,Ie,De){if(isNaN(_e)||isNaN(Ie))return ye;var be,he,ce,me,Pe,Ae,Ce,Oe,Ne,je=ye._root,ve={data:De},Me=ye._x0,Le=ye._y0,Ue=ye._x1,ze=ye._y1;if(!je)return ye._root=ve,ye;for(;je.length;)if((Ae=_e>=(he=(Me+Ue)/2))?Me=he:Ue=he,(Ce=Ie>=(ce=(Le+ze)/2))?Le=ce:ze=ce,be=je,!(je=je[Oe=Ce<<1|Ae]))return be[Oe]=ve,ye;if(me=+ye._x.call(null,je.data),Pe=+ye._y.call(null,je.data),_e===me&&Ie===Pe)return ve.next=je,be?be[Oe]=ve:ye._root=ve,ye;do{be=be?be[Oe]=new Array(4):ye._root=new Array(4),(Ae=_e>=(he=(Me+Ue)/2))?Me=he:Ue=he,(Ce=Ie>=(ce=(Le+ze)/2))?Le=ce:ze=ce}while((Oe=Ce<<1|Ae)==(Ne=(Pe>=ce)<<1|me>=he));return be[Ne]=je,be[Oe]=ve,ye}function b(ye,_e,Ie,De,be){this.node=ye,this.x0=_e,this.y0=Ie,this.x1=De,this.y1=be}function p(ye){return ye[0]}function l(ye){return ye[1]}function t(ye,_e,Ie){var De=new i(_e??p,Ie??l,NaN,NaN,NaN,NaN);return null==ye?De:De.addAll(ye)}function i(ye,_e,Ie,De,be,he){this._x=ye,this._y=_e,this._x0=Ie,this._y0=De,this._x1=be,this._y1=he,this._root=void 0}function r(ye){for(var _e={data:ye.data},Ie=_e;ye=ye.next;)Ie=Ie.next={data:ye.data};return _e}e.r(F),e.d(F,{forceCenter:function(){return S},forceCollide:function(){return c},forceLink:function(){return d},forceManyBody:function(){return ge},forceRadial:function(){return we},forceSimulation:function(){return ue},forceX:function(){return Te},forceY:function(){return xe}});var n=t.prototype=i.prototype;function a(ye){return ye.x+ye.vx}function s(ye){return ye.y+ye.vy}function c(ye){var _e,Ie,De=1,be=1;function he(){for(var Pe,Ae,Ce,Oe,Ne,je,ve,Me=_e.length,Le=0;Le<be;++Le)for(Ae=t(_e,a,s).visitAfter(ce),Pe=0;Pe<Me;++Pe)ve=(je=Ie[(Ce=_e[Pe]).index])*je,Oe=Ce.x+Ce.vx,Ne=Ce.y+Ce.vy,Ae.visit(Ue);function Ue(ze,qe,Ke,it,ft){var dt=ze.data,kt=ze.r,St=je+kt;if(!dt)return qe>Oe+St||it<Oe-St||Ke>Ne+St||ft<Ne-St;if(dt.index>Ce.index){var Tt=Oe-dt.x-dt.vx,lt=Ne-dt.y-dt.vy,ot=Tt*Tt+lt*lt;ot<St*St&&(0===Tt&&(ot+=(Tt=o())*Tt),0===lt&&(ot+=(lt=o())*lt),ot=(St-(ot=Math.sqrt(ot)))/ot*De,Ce.vx+=(Tt*=ot)*(St=(kt*=kt)/(ve+kt)),Ce.vy+=(lt*=ot)*St,dt.vx-=Tt*(St=1-St),dt.vy-=lt*St)}}}function ce(Pe){if(Pe.data)return Pe.r=Ie[Pe.data.index];for(var Ae=Pe.r=0;Ae<4;++Ae)Pe[Ae]&&Pe[Ae].r>Pe.r&&(Pe.r=Pe[Ae].r)}function me(){if(_e){var Pe,Ae,Ce=_e.length;for(Ie=new Array(Ce),Pe=0;Pe<Ce;++Pe)Ie[(Ae=_e[Pe]).index]=+ye(Ae,Pe,_e)}}return"function"!=typeof ye&&(ye=k(null==ye?1:+ye)),he.initialize=function(Pe){_e=Pe,me()},he.iterations=function(Pe){return arguments.length?(be=+Pe,he):be},he.strength=function(Pe){return arguments.length?(De=+Pe,he):De},he.radius=function(Pe){return arguments.length?(ye="function"==typeof Pe?Pe:k(+Pe),me(),he):ye},he}n.copy=function(){var ye,_e,Ie=new i(this._x,this._y,this._x0,this._y0,this._x1,this._y1),De=this._root;if(!De)return Ie;if(!De.length)return Ie._root=r(De),Ie;for(ye=[{source:De,target:Ie._root=new Array(4)}];De=ye.pop();)for(var be=0;be<4;++be)(_e=De.source[be])&&(_e.length?ye.push({source:_e,target:De.target[be]=new Array(4)}):De.target[be]=r(_e));return Ie},n.add=function(ye){var _e=+this._x.call(null,ye),Ie=+this._y.call(null,ye);return T(this.cover(_e,Ie),_e,Ie,ye)},n.addAll=function(ye){var _e,Ie,De,be,he=ye.length,ce=new Array(he),me=new Array(he),Pe=1/0,Ae=1/0,Ce=-1/0,Oe=-1/0;for(Ie=0;Ie<he;++Ie)isNaN(De=+this._x.call(null,_e=ye[Ie]))||isNaN(be=+this._y.call(null,_e))||(ce[Ie]=De,me[Ie]=be,De<Pe&&(Pe=De),De>Ce&&(Ce=De),be<Ae&&(Ae=be),be>Oe&&(Oe=be));if(Pe>Ce||Ae>Oe)return this;for(this.cover(Pe,Ae).cover(Ce,Oe),Ie=0;Ie<he;++Ie)T(this,ce[Ie],me[Ie],ye[Ie]);return this},n.cover=function(ye,_e){if(isNaN(ye=+ye)||isNaN(_e=+_e))return this;var Ie=this._x0,De=this._y0,be=this._x1,he=this._y1;if(isNaN(Ie))be=(Ie=Math.floor(ye))+1,he=(De=Math.floor(_e))+1;else{for(var ce,me,Pe=be-Ie,Ae=this._root;Ie>ye||ye>=be||De>_e||_e>=he;)switch(me=(_e<De)<<1|ye<Ie,(ce=new Array(4))[me]=Ae,Ae=ce,Pe*=2,me){case 0:be=Ie+Pe,he=De+Pe;break;case 1:Ie=be-Pe,he=De+Pe;break;case 2:be=Ie+Pe,De=he-Pe;break;case 3:Ie=be-Pe,De=he-Pe}this._root&&this._root.length&&(this._root=Ae)}return this._x0=Ie,this._y0=De,this._x1=be,this._y1=he,this},n.data=function(){var ye=[];return this.visit(function(_e){if(!_e.length)do{ye.push(_e.data)}while(_e=_e.next)}),ye},n.extent=function(ye){return arguments.length?this.cover(+ye[0][0],+ye[0][1]).cover(+ye[1][0],+ye[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},n.find=function(ye,_e,Ie){var De,be,he,ce,me,Pe,Ae,Ce=this._x0,Oe=this._y0,Ne=this._x1,je=this._y1,ve=[],Me=this._root;for(Me&&ve.push(new b(Me,Ce,Oe,Ne,je)),null==Ie?Ie=1/0:(Ce=ye-Ie,Oe=_e-Ie,Ne=ye+Ie,je=_e+Ie,Ie*=Ie);Pe=ve.pop();)if(!(!(Me=Pe.node)||(be=Pe.x0)>Ne||(he=Pe.y0)>je||(ce=Pe.x1)<Ce||(me=Pe.y1)<Oe))if(Me.length){var Le=(be+ce)/2,Ue=(he+me)/2;ve.push(new b(Me[3],Le,Ue,ce,me),new b(Me[2],be,Ue,Le,me),new b(Me[1],Le,he,ce,Ue),new b(Me[0],be,he,Le,Ue)),(Ae=(_e>=Ue)<<1|ye>=Le)&&(Pe=ve[ve.length-1],ve[ve.length-1]=ve[ve.length-1-Ae],ve[ve.length-1-Ae]=Pe)}else{var ze=ye-+this._x.call(null,Me.data),qe=_e-+this._y.call(null,Me.data),Ke=ze*ze+qe*qe;if(Ke<Ie){var it=Math.sqrt(Ie=Ke);Ce=ye-it,Oe=_e-it,Ne=ye+it,je=_e+it,De=Me.data}}return De},n.remove=function(ye){if(isNaN(he=+this._x.call(null,ye))||isNaN(ce=+this._y.call(null,ye)))return this;var _e,Ie,De,be,he,ce,me,Pe,Ae,Ce,Oe,Ne,je=this._root,ve=this._x0,Me=this._y0,Le=this._x1,Ue=this._y1;if(!je)return this;if(je.length)for(;;){if((Ae=he>=(me=(ve+Le)/2))?ve=me:Le=me,(Ce=ce>=(Pe=(Me+Ue)/2))?Me=Pe:Ue=Pe,_e=je,!(je=je[Oe=Ce<<1|Ae]))return this;if(!je.length)break;(_e[Oe+1&3]||_e[Oe+2&3]||_e[Oe+3&3])&&(Ie=_e,Ne=Oe)}for(;je.data!==ye;)if(De=je,!(je=je.next))return this;return(be=je.next)&&delete je.next,De?(be?De.next=be:delete De.next,this):_e?(be?_e[Oe]=be:delete _e[Oe],(je=_e[0]||_e[1]||_e[2]||_e[3])&&je===(_e[3]||_e[2]||_e[1]||_e[0])&&!je.length&&(Ie?Ie[Ne]=je:this._root=je),this):(this._root=be,this)},n.removeAll=function(ye){for(var _e=0,Ie=ye.length;_e<Ie;++_e)this.remove(ye[_e]);return this},n.root=function(){return this._root},n.size=function(){var ye=0;return this.visit(function(_e){if(!_e.length)do{++ye}while(_e=_e.next)}),ye},n.visit=function(ye){var _e,Ie,De,be,he,ce,me=[],Pe=this._root;for(Pe&&me.push(new b(Pe,this._x0,this._y0,this._x1,this._y1));_e=me.pop();)if(!ye(Pe=_e.node,De=_e.x0,be=_e.y0,he=_e.x1,ce=_e.y1)&&Pe.length){var Ae=(De+he)/2,Ce=(be+ce)/2;(Ie=Pe[3])&&me.push(new b(Ie,Ae,Ce,he,ce)),(Ie=Pe[2])&&me.push(new b(Ie,De,Ce,Ae,ce)),(Ie=Pe[1])&&me.push(new b(Ie,Ae,be,he,Ce)),(Ie=Pe[0])&&me.push(new b(Ie,De,be,Ae,Ce))}return this},n.visitAfter=function(ye){var _e,Ie=[],De=[];for(this._root&&Ie.push(new b(this._root,this._x0,this._y0,this._x1,this._y1));_e=Ie.pop();){var be=_e.node;if(be.length){var he,ce=_e.x0,me=_e.y0,Pe=_e.x1,Ae=_e.y1,Ce=(ce+Pe)/2,Oe=(me+Ae)/2;(he=be[0])&&Ie.push(new b(he,ce,me,Ce,Oe)),(he=be[1])&&Ie.push(new b(he,Ce,me,Pe,Oe)),(he=be[2])&&Ie.push(new b(he,ce,Oe,Ce,Ae)),(he=be[3])&&Ie.push(new b(he,Ce,Oe,Pe,Ae))}De.push(_e)}for(;_e=De.pop();)ye(_e.node,_e.x0,_e.y0,_e.x1,_e.y1);return this},n.x=function(ye){return arguments.length?(this._x=ye,this):this._x},n.y=function(ye){return arguments.length?(this._y=ye,this):this._y};var h=e(34712);function u(ye){return ye.index}function y(ye,_e){var Ie=ye.get(_e);if(!Ie)throw new Error("missing: "+_e);return Ie}function d(ye){var _e,Ie,De,be,he,ce=u,me=function(ve){return 1/Math.min(be[ve.source.index],be[ve.target.index])},Pe=k(30),Ae=1;function Ce(ve){for(var Me=0,Le=ye.length;Me<Ae;++Me)for(var Ue,ze,qe,Ke,it,ft,dt,kt=0;kt<Le;++kt)ze=(Ue=ye[kt]).source,Ke=(qe=Ue.target).x+qe.vx-ze.x-ze.vx||o(),it=qe.y+qe.vy-ze.y-ze.vy||o(),Ke*=ft=((ft=Math.sqrt(Ke*Ke+it*it))-Ie[kt])/ft*ve*_e[kt],it*=ft,qe.vx-=Ke*(dt=he[kt]),qe.vy-=it*dt,ze.vx+=Ke*(dt=1-dt),ze.vy+=it*dt}function Oe(){if(De){var ve,Me,Le=De.length,Ue=ye.length,ze=(0,h.kH)(De,ce);for(ve=0,be=new Array(Le);ve<Ue;++ve)(Me=ye[ve]).index=ve,"object"!=typeof Me.source&&(Me.source=y(ze,Me.source)),"object"!=typeof Me.target&&(Me.target=y(ze,Me.target)),be[Me.source.index]=(be[Me.source.index]||0)+1,be[Me.target.index]=(be[Me.target.index]||0)+1;for(ve=0,he=new Array(Ue);ve<Ue;++ve)he[ve]=be[(Me=ye[ve]).source.index]/(be[Me.source.index]+be[Me.target.index]);_e=new Array(Ue),Ne(),Ie=new Array(Ue),je()}}function Ne(){if(De)for(var ve=0,Me=ye.length;ve<Me;++ve)_e[ve]=+me(ye[ve],ve,ye)}function je(){if(De)for(var ve=0,Me=ye.length;ve<Me;++ve)Ie[ve]=+Pe(ye[ve],ve,ye)}return null==ye&&(ye=[]),Ce.initialize=function(ve){De=ve,Oe()},Ce.links=function(ve){return arguments.length?(ye=ve,Oe(),Ce):ye},Ce.id=function(ve){return arguments.length?(ce=ve,Ce):ce},Ce.iterations=function(ve){return arguments.length?(Ae=+ve,Ce):Ae},Ce.strength=function(ve){return arguments.length?(me="function"==typeof ve?ve:k(+ve),Ne(),Ce):me},Ce.distance=function(ve){return arguments.length?(Pe="function"==typeof ve?ve:k(+ve),je(),Ce):Pe},Ce}var m={value:function(){}};function g(){for(var ye,_e=0,Ie=arguments.length,De={};_e<Ie;++_e){if(!(ye=arguments[_e]+"")||ye in De||/[\s.]/.test(ye))throw new Error("illegal type: "+ye);De[ye]=[]}return new x(De)}function x(ye){this._=ye}function v(ye,_e){for(var Ie,De=0,be=ye.length;De<be;++De)if((Ie=ye[De]).name===_e)return Ie.value}function _(ye,_e,Ie){for(var De=0,be=ye.length;De<be;++De)if(ye[De].name===_e){ye[De]=m,ye=ye.slice(0,De).concat(ye.slice(De+1));break}return null!=Ie&&ye.push({name:_e,value:Ie}),ye}x.prototype=g.prototype={constructor:x,on:function(ye,_e){var Ie,De,be=this._,he=(De=be,(ye+"").trim().split(/^|\s+/).map(function(Pe){var Ae="",Ce=Pe.indexOf(".");if(Ce>=0&&(Ae=Pe.slice(Ce+1),Pe=Pe.slice(0,Ce)),Pe&&!De.hasOwnProperty(Pe))throw new Error("unknown type: "+Pe);return{type:Pe,name:Ae}})),ce=-1,me=he.length;if(!(arguments.length<2)){if(null!=_e&&"function"!=typeof _e)throw new Error("invalid callback: "+_e);for(;++ce<me;)if(Ie=(ye=he[ce]).type)be[Ie]=_(be[Ie],ye.name,_e);else if(null==_e)for(Ie in be)be[Ie]=_(be[Ie],ye.name,null);return this}for(;++ce<me;)if((Ie=(ye=he[ce]).type)&&(Ie=v(be[Ie],ye.name)))return Ie},copy:function(){var ye={},_e=this._;for(var Ie in _e)ye[Ie]=_e[Ie].slice();return new x(ye)},call:function(ye,_e){if((Ie=arguments.length-2)>0)for(var Ie,De,be=new Array(Ie),he=0;he<Ie;++he)be[he]=arguments[he+2];if(!this._.hasOwnProperty(ye))throw new Error("unknown type: "+ye);for(he=0,Ie=(De=this._[ye]).length;he<Ie;++he)De[he].value.apply(_e,be)},apply:function(ye,_e,Ie){if(!this._.hasOwnProperty(ye))throw new Error("unknown type: "+ye);for(var De=this._[ye],be=0,he=De.length;be<he;++be)De[be].value.apply(_e,Ie)}};var f,C,w=g,E=0,P=0,L=0,O=1e3,z=0,V=0,R=0,U="object"==typeof performance&&performance.now?performance:Date,Z="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(ye){setTimeout(ye,17)};function N(){return V||(Z(G),V=U.now()+R)}function G(){V=0}function W(){this._call=this._time=this._next=null}function ae(ye,_e,Ie){var De=new W;return De.restart(ye,_e,Ie),De}function re(){V=(z=U.now())+R,E=P=0;try{!function(){N(),++E;for(var ye,_e=f;_e;)(ye=V-_e._time)>=0&&_e._call.call(null,ye),_e=_e._next;--E}()}finally{E=0,function(){for(var ye,_e,Ie=f,De=1/0;Ie;)Ie._call?(De>Ie._time&&(De=Ie._time),ye=Ie,Ie=Ie._next):(_e=Ie._next,Ie._next=null,Ie=ye?ye._next=_e:f=_e);C=ye,Q(De)}(),V=0}}function ne(){var ye=U.now(),_e=ye-z;_e>O&&(R-=_e,z=ye)}function Q(ye){E||(P&&(P=clearTimeout(P)),ye-V>24?(ye<1/0&&(P=setTimeout(re,ye-U.now()-R)),L&&(L=clearInterval(L))):(L||(z=U.now(),L=setInterval(ne,O)),E=1,Z(re)))}function $(ye){return ye.x}function X(ye){return ye.y}W.prototype=ae.prototype={constructor:W,restart:function(ye,_e,Ie){if("function"!=typeof ye)throw new TypeError("callback is not a function");Ie=(null==Ie?N():+Ie)+(null==_e?0:+_e),this._next||C===this||(C?C._next=this:f=this,C=this),this._call=ye,this._time=Ie,Q()},stop:function(){this._call&&(this._call=null,this._time=1/0,Q())}};var oe=10,fe=Math.PI*(3-Math.sqrt(5));function ue(ye){var _e,Ie=1,De=.001,be=1-Math.pow(De,1/300),he=0,ce=.6,me=(0,h.kH)(),Pe=ae(Ce),Ae=w("tick","end");function Ce(){Oe(),Ae.call("tick",_e),Ie<De&&(Pe.stop(),Ae.call("end",_e))}function Oe(ve){var Me,Le,Ue=ye.length;void 0===ve&&(ve=1);for(var ze=0;ze<ve;++ze)for(Ie+=(he-Ie)*be,me.each(function(qe){qe(Ie)}),Me=0;Me<Ue;++Me)null==(Le=ye[Me]).fx?Le.x+=Le.vx*=ce:(Le.x=Le.fx,Le.vx=0),null==Le.fy?Le.y+=Le.vy*=ce:(Le.y=Le.fy,Le.vy=0);return _e}function Ne(){for(var ve,Me=0,Le=ye.length;Me<Le;++Me){if((ve=ye[Me]).index=Me,null!=ve.fx&&(ve.x=ve.fx),null!=ve.fy&&(ve.y=ve.fy),isNaN(ve.x)||isNaN(ve.y)){var Ue=oe*Math.sqrt(Me),ze=Me*fe;ve.x=Ue*Math.cos(ze),ve.y=Ue*Math.sin(ze)}(isNaN(ve.vx)||isNaN(ve.vy))&&(ve.vx=ve.vy=0)}}function je(ve){return ve.initialize&&ve.initialize(ye),ve}return null==ye&&(ye=[]),Ne(),_e={tick:Oe,restart:function(){return Pe.restart(Ce),_e},stop:function(){return Pe.stop(),_e},nodes:function(ve){return arguments.length?(ye=ve,Ne(),me.each(je),_e):ye},alpha:function(ve){return arguments.length?(Ie=+ve,_e):Ie},alphaMin:function(ve){return arguments.length?(De=+ve,_e):De},alphaDecay:function(ve){return arguments.length?(be=+ve,_e):+be},alphaTarget:function(ve){return arguments.length?(he=+ve,_e):he},velocityDecay:function(ve){return arguments.length?(ce=1-ve,_e):1-ce},force:function(ve,Me){return arguments.length>1?(null==Me?me.remove(ve):me.set(ve,je(Me)),_e):me.get(ve)},find:function(ve,Me,Le){var Ue,ze,qe,Ke,it,ft=0,dt=ye.length;for(null==Le?Le=1/0:Le*=Le,ft=0;ft<dt;++ft)(qe=(Ue=ve-(Ke=ye[ft]).x)*Ue+(ze=Me-Ke.y)*ze)<Le&&(it=Ke,Le=qe);return it},on:function(ve,Me){return arguments.length>1?(Ae.on(ve,Me),_e):Ae.on(ve)}}}function ge(){var ye,_e,Ie,De,be=k(-30),he=1,ce=1/0,me=.81;function Pe(Ne){var je,ve=ye.length,Me=t(ye,$,X).visitAfter(Ce);for(Ie=Ne,je=0;je<ve;++je)_e=ye[je],Me.visit(Oe)}function Ae(){if(ye){var Ne,je,ve=ye.length;for(De=new Array(ve),Ne=0;Ne<ve;++Ne)De[(je=ye[Ne]).index]=+be(je,Ne,ye)}}function Ce(Ne){var je,ve,Me,Le,Ue,ze=0,qe=0;if(Ne.length){for(Me=Le=Ue=0;Ue<4;++Ue)(je=Ne[Ue])&&(ve=Math.abs(je.value))&&(ze+=je.value,qe+=ve,Me+=ve*je.x,Le+=ve*je.y);Ne.x=Me/qe,Ne.y=Le/qe}else{(je=Ne).x=je.data.x,je.y=je.data.y;do{ze+=De[je.data.index]}while(je=je.next)}Ne.value=ze}function Oe(Ne,je,ve,Me){if(!Ne.value)return!0;var Le=Ne.x-_e.x,Ue=Ne.y-_e.y,ze=Me-je,qe=Le*Le+Ue*Ue;if(ze*ze/me<qe)return qe<ce&&(0===Le&&(qe+=(Le=o())*Le),0===Ue&&(qe+=(Ue=o())*Ue),qe<he&&(qe=Math.sqrt(he*qe)),_e.vx+=Le*Ne.value*Ie/qe,_e.vy+=Ue*Ne.value*Ie/qe),!0;if(!(Ne.length||qe>=ce)){(Ne.data!==_e||Ne.next)&&(0===Le&&(qe+=(Le=o())*Le),0===Ue&&(qe+=(Ue=o())*Ue),qe<he&&(qe=Math.sqrt(he*qe)));do{Ne.data!==_e&&(_e.vx+=Le*(ze=De[Ne.data.index]*Ie/qe),_e.vy+=Ue*ze)}while(Ne=Ne.next)}}return Pe.initialize=function(Ne){ye=Ne,Ae()},Pe.strength=function(Ne){return arguments.length?(be="function"==typeof Ne?Ne:k(+Ne),Ae(),Pe):be},Pe.distanceMin=function(Ne){return arguments.length?(he=Ne*Ne,Pe):Math.sqrt(he)},Pe.distanceMax=function(Ne){return arguments.length?(ce=Ne*Ne,Pe):Math.sqrt(ce)},Pe.theta=function(Ne){return arguments.length?(me=Ne*Ne,Pe):Math.sqrt(me)},Pe}function we(ye,_e,Ie){var De,be,he,ce=k(.1);function me(Ae){for(var Ce=0,Oe=De.length;Ce<Oe;++Ce){var Ne=De[Ce],je=Ne.x-_e||1e-6,ve=Ne.y-Ie||1e-6,Me=Math.sqrt(je*je+ve*ve),Le=(he[Ce]-Me)*be[Ce]*Ae/Me;Ne.vx+=je*Le,Ne.vy+=ve*Le}}function Pe(){if(De){var Ae,Ce=De.length;for(be=new Array(Ce),he=new Array(Ce),Ae=0;Ae<Ce;++Ae)he[Ae]=+ye(De[Ae],Ae,De),be[Ae]=isNaN(he[Ae])?0:+ce(De[Ae],Ae,De)}}return"function"!=typeof ye&&(ye=k(+ye)),null==_e&&(_e=0),null==Ie&&(Ie=0),me.initialize=function(Ae){De=Ae,Pe()},me.strength=function(Ae){return arguments.length?(ce="function"==typeof Ae?Ae:k(+Ae),Pe(),me):ce},me.radius=function(Ae){return arguments.length?(ye="function"==typeof Ae?Ae:k(+Ae),Pe(),me):ye},me.x=function(Ae){return arguments.length?(_e=+Ae,me):_e},me.y=function(Ae){return arguments.length?(Ie=+Ae,me):Ie},me}function Te(ye){var _e,Ie,De,be=k(.1);function he(me){for(var Pe,Ae=0,Ce=_e.length;Ae<Ce;++Ae)(Pe=_e[Ae]).vx+=(De[Ae]-Pe.x)*Ie[Ae]*me}function ce(){if(_e){var me,Pe=_e.length;for(Ie=new Array(Pe),De=new Array(Pe),me=0;me<Pe;++me)Ie[me]=isNaN(De[me]=+ye(_e[me],me,_e))?0:+be(_e[me],me,_e)}}return"function"!=typeof ye&&(ye=k(null==ye?0:+ye)),he.initialize=function(me){_e=me,ce()},he.strength=function(me){return arguments.length?(be="function"==typeof me?me:k(+me),ce(),he):be},he.x=function(me){return arguments.length?(ye="function"==typeof me?me:k(+me),ce(),he):ye},he}function xe(ye){var _e,Ie,De,be=k(.1);function he(me){for(var Pe,Ae=0,Ce=_e.length;Ae<Ce;++Ae)(Pe=_e[Ae]).vy+=(De[Ae]-Pe.y)*Ie[Ae]*me}function ce(){if(_e){var me,Pe=_e.length;for(Ie=new Array(Pe),De=new Array(Pe),me=0;me<Pe;++me)Ie[me]=isNaN(De[me]=+ye(_e[me],me,_e))?0:+be(_e[me],me,_e)}}return"function"!=typeof ye&&(ye=k(null==ye?0:+ye)),he.initialize=function(me){_e=me,ce()},he.strength=function(me){return arguments.length?(be="function"==typeof me?me:k(+me),ce(),he):be},he.y=function(me){return arguments.length?(ye="function"==typeof me?me:k(+me),ce(),he):ye},he}},57624:function(ie,F,e){"use strict";function S(c,h){if((u=(c=h?c.toExponential(h-1):c.toExponential()).indexOf("e"))<0)return null;var u,y=c.slice(0,u);return[y.length>1?y[0]+y.slice(2):y,+c.slice(u+1)]}e.d(F,{E9:function(){return r},SO:function(){return s}});var k,o=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function T(c){if(!(h=o.exec(c)))throw new Error("invalid format: "+c);var h;return new b({fill:h[1],align:h[2],sign:h[3],symbol:h[4],zero:h[5],width:h[6],comma:h[7],precision:h[8]&&h[8].slice(1),trim:h[9],type:h[10]})}function b(c){this.fill=void 0===c.fill?" ":c.fill+"",this.align=void 0===c.align?">":c.align+"",this.sign=void 0===c.sign?"-":c.sign+"",this.symbol=void 0===c.symbol?"":c.symbol+"",this.zero=!!c.zero,this.width=void 0===c.width?void 0:+c.width,this.comma=!!c.comma,this.precision=void 0===c.precision?void 0:+c.precision,this.trim=!!c.trim,this.type=void 0===c.type?"":c.type+""}function p(c,h){var u=S(c,h);if(!u)return c+"";var y=u[0],d=u[1];return d<0?"0."+new Array(-d).join("0")+y:y.length>d+1?y.slice(0,d+1)+"."+y.slice(d+1):y+new Array(d-y.length+2).join("0")}T.prototype=b.prototype,b.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var l={"%":function(c,h){return(100*c).toFixed(h)},b:function(c){return Math.round(c).toString(2)},c:function(c){return c+""},d:function(c){return Math.abs(c=Math.round(c))>=1e21?c.toLocaleString("en").replace(/,/g,""):c.toString(10)},e:function(c,h){return c.toExponential(h)},f:function(c,h){return c.toFixed(h)},g:function(c,h){return c.toPrecision(h)},o:function(c){return Math.round(c).toString(8)},p:function(c,h){return p(100*c,h)},r:p,s:function(c,h){var u=S(c,h);if(!u)return c+"";var y=u[0],d=u[1],m=d-(k=3*Math.max(-8,Math.min(8,Math.floor(d/3))))+1,g=y.length;return m===g?y:m>g?y+new Array(m-g+1).join("0"):m>0?y.slice(0,m)+"."+y.slice(m):"0."+new Array(1-m).join("0")+S(c,Math.max(0,h+m-1))[0]},X:function(c){return Math.round(c).toString(16).toUpperCase()},x:function(c){return Math.round(c).toString(16)}};function t(c){return c}var i,r,n=Array.prototype.map,a=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function s(c){var h,u,w,y=void 0===c.grouping||void 0===c.thousands?t:(h=n.call(c.grouping,Number),u=c.thousands+"",function(w,E){for(var P=w.length,L=[],O=0,z=h[0],V=0;P>0&&z>0&&(V+z+1>E&&(z=Math.max(1,E-V)),L.push(w.substring(P-=z,P+z)),!((V+=z+1)>E));)z=h[O=(O+1)%h.length];return L.reverse().join(u)}),d=void 0===c.currency?"":c.currency[0]+"",m=void 0===c.currency?"":c.currency[1]+"",g=void 0===c.decimal?".":c.decimal+"",x=void 0===c.numerals?t:(w=n.call(c.numerals,String),function(E){return E.replace(/[0-9]/g,function(P){return w[+P]})}),v=void 0===c.percent?"%":c.percent+"",_=void 0===c.minus?"-":c.minus+"",f=void 0===c.nan?"NaN":c.nan+"";function C(w){var E=(w=T(w)).fill,P=w.align,L=w.sign,O=w.symbol,z=w.zero,V=w.width,R=w.comma,U=w.precision,Z=w.trim,N=w.type;"n"===N?(R=!0,N="g"):l[N]||(void 0===U&&(U=12),Z=!0,N="g"),(z||"0"===E&&"="===P)&&(z=!0,E="0",P="=");var G="$"===O?d:"#"===O&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",W="$"===O?m:/[%p]/.test(N)?v:"",ae=l[N],re=/[defgprs%]/.test(N);function ne(Q){var $,X,oe,fe=G,ue=W;if("c"===N)ue=ae(Q)+ue,Q="";else{var ge=(Q=+Q)<0||1/Q<0;if(Q=isNaN(Q)?f:ae(Math.abs(Q),U),Z&&(Q=function(xe){e:for(var ye,_e=xe.length,Ie=1,De=-1;Ie<_e;++Ie)switch(xe[Ie]){case".":De=ye=Ie;break;case"0":0===De&&(De=Ie),ye=Ie;break;default:if(!+xe[Ie])break e;De>0&&(De=0)}return De>0?xe.slice(0,De)+xe.slice(ye+1):xe}(Q)),ge&&0==+Q&&"+"!==L&&(ge=!1),fe=(ge?"("===L?L:_:"-"===L||"("===L?"":L)+fe,ue=("s"===N?a[8+k/3]:"")+ue+(ge&&"("===L?")":""),re)for($=-1,X=Q.length;++$<X;)if(48>(oe=Q.charCodeAt($))||oe>57){ue=(46===oe?g+Q.slice($+1):Q.slice($))+ue,Q=Q.slice(0,$);break}}R&&!z&&(Q=y(Q,1/0));var we=fe.length+Q.length+ue.length,Te=we<V?new Array(V-we+1).join(E):"";switch(R&&z&&(Q=y(Te+Q,Te.length?V-ue.length:1/0),Te=""),P){case"<":Q=fe+Q+ue+Te;break;case"=":Q=fe+Te+Q+ue;break;case"^":Q=Te.slice(0,we=Te.length>>1)+fe+Q+ue+Te.slice(we);break;default:Q=Te+fe+Q+ue}return x(Q)}return U=void 0===U?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,U)):Math.max(0,Math.min(20,U)),ne.toString=function(){return w+""},ne}return{format:C,formatPrefix:function(w,E){var P,L=C(((w=T(w)).type="f",w)),O=3*Math.max(-8,Math.min(8,Math.floor((P=E,((P=S(Math.abs(P)))?P[1]:NaN)/3)))),z=Math.pow(10,-O),V=a[8+O/3];return function(R){return L(z*R)+V}}}}i=s({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),r=i.format},87108:function(ie,F,e){"use strict";e.r(F),e.d(F,{geoAiry:function(){return R},geoAiryRaw:function(){return V},geoAitoff:function(){return Z},geoAitoffRaw:function(){return U},geoArmadillo:function(){return G},geoArmadilloRaw:function(){return N},geoAugust:function(){return ae},geoAugustRaw:function(){return W},geoBaker:function(){return $},geoBakerRaw:function(){return Q},geoBerghaus:function(){return fe},geoBerghausRaw:function(){return oe},geoBertin1953:function(){return Ie},geoBertin1953Raw:function(){return _e},geoBoggs:function(){return Ce},geoBoggsRaw:function(){return Ae},geoBonne:function(){return Me},geoBonneRaw:function(){return ve},geoBottomley:function(){return Ue},geoBottomleyRaw:function(){return Le},geoBromley:function(){return qe},geoBromleyRaw:function(){return ze},geoChamberlin:function(){return ot},geoChamberlinAfrica:function(){return lt},geoChamberlinRaw:function(){return St},geoCollignon:function(){return Vt},geoCollignonRaw:function(){return Rt},geoCraig:function(){return zt},geoCraigRaw:function(){return Ht},geoCraster:function(){return We},geoCrasterRaw:function(){return nt},geoCylindricalEqualArea:function(){return gt},geoCylindricalEqualAreaRaw:function(){return et},geoCylindricalStereographic:function(){return Ge},geoCylindricalStereographicRaw:function(){return ht},geoEckert1:function(){return ut},geoEckert1Raw:function(){return He},geoEckert2:function(){return xt},geoEckert2Raw:function(){return tt},geoEckert3:function(){return Mt},geoEckert3Raw:function(){return At},geoEckert4:function(){return Pt},geoEckert4Raw:function(){return yt},geoEckert5:function(){return Dt},geoEckert5Raw:function(){return Ct},geoEckert6:function(){return Bt},geoEckert6Raw:function(){return Ut},geoEisenlohr:function(){return mn},geoEisenlohrRaw:function(){return an},geoFahey:function(){return Kt},geoFaheyRaw:function(){return sn},geoFoucaut:function(){return Fn},geoFoucautRaw:function(){return qn},geoFoucautSinusoidal:function(){return hn},geoFoucautSinusoidalRaw:function(){return Sn},geoGilbert:function(){return Dn},geoGingery:function(){return ir},geoGingeryRaw:function(){return Vn},geoGinzburg4:function(){return lr},geoGinzburg4Raw:function(){return mr},geoGinzburg5:function(){return or},geoGinzburg5Raw:function(){return vr},geoGinzburg6:function(){return fn},geoGinzburg6Raw:function(){return Or},geoGinzburg8:function(){return Hn},geoGinzburg8Raw:function(){return gn},geoGinzburg9:function(){return Zn},geoGinzburg9Raw:function(){return En},geoGringorten:function(){return fr},geoGringortenQuincuncial:function(){return uo},geoGringortenRaw:function(){return tr},geoGuyou:function(){return Nt},geoGuyouRaw:function(){return In},geoHammer:function(){return Te},geoHammerRaw:function(){return ge},geoHammerRetroazimuthal:function(){return kn},geoHammerRetroazimuthalRaw:function(){return un},geoHealpix:function(){return Qn},geoHealpixRaw:function(){return dn},geoHill:function(){return yr},geoHillRaw:function(){return ar},geoHomolosine:function(){return Ur},geoHomolosineRaw:function(){return Lr},geoHufnagel:function(){return kr},geoHufnagelRaw:function(){return zr},geoHyperelliptical:function(){return Xi},geoHyperellipticalRaw:function(){return ai},geoInterrupt:function(){return ea},geoInterruptedBoggs:function(){return so},geoInterruptedHomolosine:function(){return za},geoInterruptedMollweide:function(){return Na},geoInterruptedMollweideHemispheres:function(){return Ia},geoInterruptedQuarticAuthalic:function(){return Qo},geoInterruptedSinuMollweide:function(){return ds},geoInterruptedSinusoidal:function(){return xl},geoKavrayskiy7:function(){return $o},geoKavrayskiy7Raw:function(){return Eo},geoLagrange:function(){return Ei},geoLagrangeRaw:function(){return Es},geoLarrivee:function(){return To},geoLarriveeRaw:function(){return Io},geoLaskowski:function(){return vo},geoLaskowskiRaw:function(){return Ao},geoLittrow:function(){return _l},geoLittrowRaw:function(){return ps},geoLoximuthal:function(){return al},geoLoximuthalRaw:function(){return Oa},geoMiller:function(){return Ul},geoMillerRaw:function(){return Us},geoModifiedStereographic:function(){return Gs},geoModifiedStereographicAlaska:function(){return Xu},geoModifiedStereographicGs48:function(){return Ku},geoModifiedStereographicGs50:function(){return bl},geoModifiedStereographicLee:function(){return Vl},geoModifiedStereographicMiller:function(){return gs},geoModifiedStereographicRaw:function(){return Xc},geoMollweide:function(){return ce},geoMollweideRaw:function(){return he},geoMtFlatPolarParabolic:function(){return Ac},geoMtFlatPolarParabolicRaw:function(){return ms},geoMtFlatPolarQuartic:function(){return Ps},geoMtFlatPolarQuarticRaw:function(){return Ls},geoMtFlatPolarSinusoidal:function(){return ol},geoMtFlatPolarSinusoidalRaw:function(){return Hs},geoNaturalEarth:function(){return ki.c},geoNaturalEarth2:function(){return Kc},geoNaturalEarth2Raw:function(){return vs},geoNaturalEarthRaw:function(){return ki.g},geoNellHammer:function(){return oc},geoNellHammerRaw:function(){return kc},geoNicolosi:function(){return $c},geoNicolosiRaw:function(){return Jc},geoPatterson:function(){return Cc},geoPattersonRaw:function(){return Qc},geoPeirceQuincuncial:function(){return Yl},geoPierceQuincuncial:function(){return Yl},geoPolyconic:function(){return sl},geoPolyconicRaw:function(){return Gl},geoPolyhedral:function(){return qi},geoPolyhedralButterfly:function(){return ul},geoPolyhedralCollignon:function(){return ql},geoPolyhedralWaterman:function(){return Ic},geoProject:function(){return Wl},geoQuantize:function(){return Po},geoQuincuncial:function(){return hl},geoRectangularPolyconic:function(){return qo},geoRectangularPolyconicRaw:function(){return ko},geoRobinson:function(){return $r},geoRobinsonRaw:function(){return ns},geoSatellite:function(){return Lc},geoSatelliteRaw:function(){return fl},geoSinuMollweide:function(){return pr},geoSinuMollweideRaw:function(){return br},geoSinusoidal:function(){return je},geoSinusoidalRaw:function(){return Ne},geoStitch:function(){return ja},geoTimes:function(){return zs},geoTimesRaw:function(){return Oo},geoTwoPointAzimuthal:function(){return xo},geoTwoPointAzimuthalRaw:function(){return Zl},geoTwoPointAzimuthalUsa:function(){return uc},geoTwoPointEquidistant:function(){return Xs},geoTwoPointEquidistantRaw:function(){return Ii},geoTwoPointEquidistantUsa:function(){return Fs},geoVanDerGrinten:function(){return Ks},geoVanDerGrinten2:function(){return As},geoVanDerGrinten2Raw:function(){return Xl},geoVanDerGrinten3:function(){return Il},geoVanDerGrinten3Raw:function(){return la},geoVanDerGrinten4:function(){return ti},geoVanDerGrinten4Raw:function(){return Xr},geoVanDerGrintenRaw:function(){return Ts},geoWagner:function(){return is},geoWagner4:function(){return eu},geoWagner4Raw:function(){return ta},geoWagner6:function(){return wi},geoWagner6Raw:function(){return Zo},geoWagner7:function(){return as},geoWagnerRaw:function(){return Yo},geoWiechel:function(){return Mo},geoWiechelRaw:function(){return ra},geoWinkel3:function(){return Js},geoWinkel3Raw:function(){return os}});var S=e(87952),k=Math.abs,o=Math.atan,T=Math.atan2,b=Math.cos,p=Math.exp,l=Math.floor,t=Math.log,i=Math.max,r=Math.min,n=Math.pow,a=Math.round,s=Math.sign||function(rt){return rt>0?1:rt<0?-1:0},c=Math.sin,h=Math.tan,u=1e-6,y=1e-12,d=Math.PI,m=d/2,g=d/4,x=Math.SQRT1_2,v=L(2),_=L(d),f=2*d,C=180/d,w=d/180;function E(rt){return rt>1?m:rt<-1?-m:Math.asin(rt)}function P(rt){return rt>1?0:rt<-1?d:Math.acos(rt)}function L(rt){return rt>0?Math.sqrt(rt):0}function O(rt){return(p(rt)-p(-rt))/2}function z(rt){return(p(rt)+p(-rt))/2}function V(rt){var st=h(rt/2),pt=2*t(b(rt/2))/(st*st);function j(Y,q){var I=b(Y),H=b(q),te=c(q),le=H*I,pe=-((1-le?t((1+le)/2)/(1-le):-.5)+pt/(1+le));return[pe*H*c(Y),pe*te]}return j.invert=function(Y,q){var I,H=L(Y*Y+q*q),te=-rt/2,le=50;if(!H)return[0,0];do{var pe=te/2,ke=b(pe),Fe=c(pe),Ve=Fe/ke,Xe=-t(k(ke));te-=I=(2/Ve*Xe-pt*Ve-H)/(-Xe/(Fe*Fe)+1-pt/(2*ke*ke))*(ke<0?.7:1)}while(k(I)>u&&--le>0);var Je=c(te);return[T(Y*Je,H*b(te)),E(q*Je/H)]},j}function R(){var rt=m,st=(0,S.U)(V),pt=st(rt);return pt.radius=function(j){return arguments.length?st(rt=j*w):rt*C},pt.scale(179.976).clipAngle(147)}function U(rt,st){var Y,pt=b(st),j=(Y=P(pt*b(rt/=2)))?Y/Math.sin(Y):1;return[2*pt*c(rt)*j,c(st)*j]}function Z(){return(0,S.c)(U).scale(152.63)}function N(rt){var st=c(rt),pt=b(rt),j=rt>=0?1:-1,Y=h(j*rt),q=(1+st-pt)/2;function I(H,te){var le=b(te),pe=b(H/=2);return[(1+le)*c(H),(j*te>-T(pe,Y)-.001?0:10*-j)+q+c(te)*pt-(1+le)*st*pe]}return I.invert=function(H,te){var le=0,pe=0,ke=50;do{var Fe=b(le),Ve=c(le),Xe=b(pe),Je=c(pe),ct=1+Xe,vt=ct*Ve-H,_t=q+Je*pt-ct*st*Fe-te,It=ct*Fe/2,Ft=-Ve*Je,Ot=st*ct*Ve/2,Yt=pt*Xe+st*Fe*Je,jt=Ft*Ot-Yt*It,ln=(_t*Ft-vt*Yt)/jt/2,tn=(vt*Ot-_t*It)/jt;k(tn)>2&&(tn/=2),le-=ln,pe-=tn}while((k(ln)>u||k(tn)>u)&&--ke>0);return j*pe>-T(b(le),Y)-.001?[2*le,pe]:null},I}function G(){var rt=20*w,st=rt>=0?1:-1,pt=h(st*rt),j=(0,S.U)(N),Y=j(rt),q=Y.stream;return Y.parallel=function(I){return arguments.length?(pt=h((st=(rt=I*w)>=0?1:-1)*rt),j(rt)):rt*C},Y.stream=function(I){var H=Y.rotate(),te=q(I),le=(Y.rotate([0,0]),q(I)),pe=Y.precision();return Y.rotate(H),te.sphere=function(){le.polygonStart(),le.lineStart();for(var ke=-180*st;st*ke<180;ke+=90*st)le.point(ke,90*st);if(rt)for(;st*(ke-=3*st*pe)>=-180;)le.point(ke,st*-T(b(ke*w/2),pt)*C);le.lineEnd(),le.polygonEnd()},te},Y.scale(218.695).center([0,28.0974])}function W(rt,st){var pt=h(st/2),j=L(1-pt*pt),Y=1+j*b(rt/=2),q=c(rt)*j/Y,I=pt/Y,H=q*q,te=I*I;return[1.3333333333333333*q*(3+H-3*te),1.3333333333333333*I*(3+3*H-te)]}function ae(){return(0,S.c)(W).scale(66.1603)}U.invert=function(rt,st){if(!(rt*rt+4*st*st>d*d+u)){var pt=rt,j=st,Y=25;do{var q,I=c(pt),H=c(pt/2),te=b(pt/2),le=c(j),pe=b(j),ke=c(2*j),Fe=le*le,Ve=pe*pe,Xe=H*H,Je=1-Ve*te*te,ct=Je?P(pe*te)*L(q=1/Je):q=0,vt=2*ct*pe*H-rt,_t=ct*le-st,It=q*(Ve*Xe+ct*pe*te*Fe),Ft=q*(.5*I*ke-2*ct*le*H),Ot=.25*q*(ke*H-ct*le*Ve*I),Yt=q*(Fe*te+ct*Xe*pe),jt=Ft*Ot-Yt*It;if(!jt)break;var ln=(_t*Ft-vt*Yt)/jt,tn=(vt*Ot-_t*It)/jt;pt-=ln,j-=tn}while((k(ln)>u||k(tn)>u)&&--Y>0);return[pt,j]}},W.invert=function(rt,st){if(st*=.375,!(rt*=.375)&&k(st)>1)return null;var le,pt=1+rt*rt+st*st,j=L((pt-L(pt*pt-4*st*st))/2),Y=E(j)/3,q=j?(le=k(st/j),t(le+L(le*le-1))/3):function(le){return t(le+L(le*le+1))}(k(rt))/3,I=b(Y),H=z(q),te=H*H-I*I;return[2*s(rt)*T(O(q)*I,.25-te),2*s(st)*T(H*c(Y),.25+te)]};var re=L(8),ne=t(1+v);function Q(rt,st){var pt=k(st);return pt<g?[rt,t(h(g+st/2))]:[rt*b(pt)*(2*v-1/c(pt)),s(st)*(2*v*(pt-g)-t(h(pt/2)))]}function $(){return(0,S.c)(Q).scale(112.314)}Q.invert=function(rt,st){if((j=k(st))<ne)return[rt,2*o(p(st))-m];var pt,j,Y=g,q=25;do{var I=b(Y/2),H=h(Y/2);Y-=pt=(re*(Y-g)-t(H)-j)/(re-I*I/(2*H))}while(k(pt)>y&&--q>0);return[rt/(b(Y)*(re-1/c(Y))),s(st)*Y]};var X=e(69020);function oe(rt){var st=2*d/rt;function pt(j,Y){var q=(0,X.O)(j,Y);if(k(j)>m){var I=T(q[1],q[0]),H=L(q[0]*q[0]+q[1]*q[1]),te=st*a((I-m)/st)+m,le=T(c(I-=te),2-b(I));I=te+E(d/H*c(le))-le,q[0]=H*b(I),q[1]=H*c(I)}return q}return pt.invert=function(j,Y){var q=L(j*j+Y*Y);if(q>m){var I=T(Y,j),H=st*a((I-m)/st)+m,te=I>H?-1:1,le=q*b(H-I),pe=1/h(te*P((le-d)/L(d*(d-2*le)+q*q)));I=H+2*o((pe+te*L(pe*pe-3))/3),j=q*b(I),Y=q*c(I)}return X.O.invert(j,Y)},pt}function fe(){var rt=5,st=(0,S.U)(oe),pt=st(rt),j=pt.stream,Y=.01,q=-b(Y*w),I=c(Y*w);return pt.lobes=function(H){return arguments.length?st(rt=+H):rt},pt.stream=function(H){var te=pt.rotate(),le=j(H),pe=(pt.rotate([0,0]),j(H));return pt.rotate(te),le.sphere=function(){pe.polygonStart(),pe.lineStart();for(var ke=0,Fe=360/rt,Ve=2*d/rt,Xe=90-180/rt,Je=m;ke<rt;++ke,Xe-=Fe,Je-=Ve)pe.point(T(I*b(Je),q)*C,E(I*c(Je))*C),Xe<-90?(pe.point(-90,-180-Xe-Y),pe.point(-90,-180-Xe+Y)):(pe.point(90,Xe+Y),pe.point(90,Xe-Y));pe.lineEnd(),pe.polygonEnd()},le},pt.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}var ue=e(54724);function ge(rt,st){if(arguments.length<2&&(st=rt),1===st)return ue.y;if(st===1/0)return we;function pt(j,Y){var q=(0,ue.y)(j/st,Y);return q[0]*=rt,q}return pt.invert=function(j,Y){var q=ue.y.invert(j/rt,Y);return q[0]*=st,q},pt}function we(rt,st){return[rt*b(st)/b(st/=2),2*c(st)]}function Te(){var rt=2,st=(0,S.U)(ge),pt=st(rt);return pt.coefficient=function(j){return arguments.length?st(rt=+j):rt},pt.scale(169.529)}function xe(rt,st,pt){var j,Y,q,I=100;pt=void 0===pt?0:+pt,st=+st;do{(Y=rt(pt))===(q=rt(pt+u))&&(q=Y+u),pt-=j=-1*u*(Y-st)/(Y-q)}while(I-- >0&&k(j)>u);return I<0?NaN:pt}function ye(rt,st,pt){return void 0===st&&(st=40),void 0===pt&&(pt=y),function(j,Y,q,I){var H,te,le;q=void 0===q?0:+q,I=void 0===I?0:+I;for(var pe=0;pe<st;pe++){var ke=rt(q,I),Fe=ke[0]-j,Ve=ke[1]-Y;if(k(Fe)<pt&&k(Ve)<pt)break;var Xe=Fe*Fe+Ve*Ve;if(Xe>H)q-=te/=2,I-=le/=2;else{H=Xe;var Je=(q>0?-1:1)*pt,ct=(I>0?-1:1)*pt,vt=rt(q+Je,I),_t=rt(q,I+ct),It=(vt[0]-ke[0])/Je,Ft=(vt[1]-ke[1])/Je,Ot=(_t[0]-ke[0])/ct,Yt=(_t[1]-ke[1])/ct,jt=Yt*It-Ft*Ot,ln=(k(jt)<.5?.5:1)/jt;if(q+=te=(Ve*Ot-Fe*Yt)*ln,I+=le=(Fe*Ft-Ve*It)*ln,k(te)<pt&&k(le)<pt)break}}return[q,I]}}function _e(){var rt=ge(1.68,2);function st(pt,j){if(pt+j<-1.4){var Y=(pt-j+1.6)*(pt+j+1.4)/8;pt+=Y,j-=.8*Y*c(j+d/2)}var q=rt(pt,j),I=(1-b(pt*j))/12;return q[1]<0&&(q[0]*=1+I),q[1]>0&&(q[1]*=1+I/1.5*q[0]*q[0]),q}return st.invert=ye(st),st}function Ie(){return(0,S.c)(_e()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function De(rt,st){var pt,j=rt*c(st),Y=30;do{st-=pt=(st+c(st)-j)/(1+b(st))}while(k(pt)>u&&--Y>0);return st/2}function be(rt,st,pt){function j(Y,q){return[rt*Y*b(q=De(pt,q)),st*c(q)]}return j.invert=function(Y,q){return q=E(q/st),[Y/(rt*b(q)),E((2*q+c(2*q))/pt)]},j}we.invert=function(rt,st){var pt=2*E(st/2);return[rt*b(pt/2)/b(pt),pt]};var he=be(v/m,v,d);function ce(){return(0,S.c)(he).scale(169.529)}var me=2.00276,Pe=1.11072;function Ae(rt,st){var pt=De(d,st);return[me*rt/(1/b(st)+Pe/b(pt)),(st+v*c(pt))/me]}function Ce(){return(0,S.c)(Ae).scale(160.857)}function Oe(rt){var st=0,pt=(0,S.U)(rt),j=pt(st);return j.parallel=function(Y){return arguments.length?pt(st=Y*w):st*C},j}function Ne(rt,st){return[rt*b(st),st]}function je(){return(0,S.c)(Ne).scale(152.63)}function ve(rt){if(!rt)return Ne;var st=1/h(rt);function pt(j,Y){var q=st+rt-Y,I=q&&j*b(Y)/q;return[q*c(I),st-q*b(I)]}return pt.invert=function(j,Y){var q=L(j*j+(Y=st-Y)*Y),I=st+rt-q;return[q/b(I)*T(j,Y),I]},pt}function Me(){return Oe(ve).scale(123.082).center([0,26.1441]).parallel(45)}function Le(rt){function st(pt,j){var Y=m-j,q=Y&&pt*rt*c(Y)/Y;return[Y*c(q)/rt,m-Y*b(q)]}return st.invert=function(pt,j){var Y=pt*rt,q=m-j,I=L(Y*Y+q*q),H=T(Y,q);return[(I?I/c(I):1)*H/rt,m-I]},st}function Ue(){var rt=.5,st=(0,S.U)(Le),pt=st(rt);return pt.fraction=function(j){return arguments.length?st(rt=+j):rt},pt.scale(158.837)}Ae.invert=function(rt,st){var pt,j,Y=me*st,q=st<0?-g:g,I=25;do{j=Y-v*c(q),q-=pt=(c(2*q)+2*q-d*c(j))/(2*b(2*q)+2+d*b(j)*v*b(q))}while(k(pt)>u&&--I>0);return j=Y-v*c(q),[rt*(1/b(j)+Pe/b(q))/me,j]},Ne.invert=function(rt,st){return[rt/b(st),st]};var ze=be(1,4/d,d);function qe(){return(0,S.c)(ze).scale(152.63)}var Ke=e(24052),it=e(92992);function ft(rt,st,pt,j,Y,q){var I,H=b(q);if(k(rt)>1||k(q)>1)I=P(pt*Y+st*j*H);else{var te=c(rt/2),le=c(q/2);I=2*E(L(te*te+st*j*le*le))}return k(I)>u?[I,T(j*c(q),st*Y-pt*j*H)]:[0,0]}function dt(rt,st,pt){return P((rt*rt+st*st-pt*pt)/(2*rt*st))}function kt(rt){return rt-2*d*l((rt+d)/(2*d))}function St(rt,st,pt){for(var j,Y=[[rt[0],rt[1],c(rt[1]),b(rt[1])],[st[0],st[1],c(st[1]),b(st[1])],[pt[0],pt[1],c(pt[1]),b(pt[1])]],q=Y[2],I=0;I<3;++I,q=j)q.v=ft((j=Y[I])[1]-q[1],q[3],q[2],j[3],j[2],j[0]-q[0]),q.point=[0,0];var H=dt(Y[0].v[0],Y[2].v[0],Y[1].v[0]),te=dt(Y[0].v[0],Y[1].v[0],Y[2].v[0]),le=d-H;Y[2].point[1]=0,Y[0].point[0]=-(Y[1].point[0]=Y[0].v[0]/2);var pe=[Y[2].point[0]=Y[0].point[0]+Y[2].v[0]*b(H),2*(Y[0].point[1]=Y[1].point[1]=Y[2].v[0]*c(H))];return function(ke,Fe){var Ve,Xe=c(Fe),Je=b(Fe),ct=new Array(3);for(Ve=0;Ve<3;++Ve){var vt=Y[Ve];if(ct[Ve]=ft(Fe-vt[1],vt[3],vt[2],Je,Xe,ke-vt[0]),!ct[Ve][0])return vt.point;ct[Ve][1]=kt(ct[Ve][1]-vt.v[1])}var _t=pe.slice();for(Ve=0;Ve<3;++Ve){var Ft=dt(Y[Ve].v[0],ct[Ve][0],ct[2==Ve?0:Ve+1][0]);ct[Ve][1]<0&&(Ft=-Ft),Ve?1==Ve?(_t[0]-=ct[Ve][0]*b(Ft=te-Ft),_t[1]-=ct[Ve][0]*c(Ft)):(_t[0]+=ct[Ve][0]*b(Ft=le-Ft),_t[1]+=ct[Ve][0]*c(Ft)):(_t[0]+=ct[Ve][0]*b(Ft),_t[1]-=ct[Ve][0]*c(Ft))}return _t[0]/=3,_t[1]/=3,_t}}function Tt(rt){return rt[0]*=w,rt[1]*=w,rt}function lt(){return ot([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function ot(rt,st,pt){var j=(0,Ke.c)({type:"MultiPoint",coordinates:[rt,st,pt]}),Y=[-j[0],-j[1]],q=(0,it.c)(Y),I=St(Tt(q(rt)),Tt(q(st)),Tt(q(pt)));I.invert=ye(I);var H=(0,S.c)(I).rotate(Y),te=H.center;return delete H.rotate,H.center=function(le){return arguments.length?te(q(le)):q.invert(te())},H.clipAngle(90)}function Rt(rt,st){var pt=L(1-c(st));return[2/_*rt*pt,_*(1-pt)]}function Vt(){return(0,S.c)(Rt).scale(95.6464).center([0,30])}function Ht(rt){var st=h(rt);function pt(j,Y){return[j,(j?j/c(j):1)*(c(Y)*b(j)-st*b(Y))]}return pt.invert=st?function(j,Y){j&&(Y*=c(j)/j);var q=b(j);return[j,2*T(L(q*q+st*st-Y*Y)-q,st-Y)]}:function(j,Y){return[j,E(j?Y*h(j)/j:Y)]},pt}function zt(){return Oe(Ht).scale(249.828).clipAngle(90)}Rt.invert=function(rt,st){var pt=(pt=st/_-1)*pt;return[pt>0?rt*L(d/pt)/2:0,E(1-pt)]};var Qe=L(3);function nt(rt,st){return[Qe*rt*(2*b(2*st/3)-1)/_,Qe*_*c(st/3)]}function We(){return(0,S.c)(nt).scale(156.19)}function et(rt){var st=b(rt);function pt(j,Y){return[j*st,c(Y)/st]}return pt.invert=function(j,Y){return[j/st,E(Y*st)]},pt}function gt(){return Oe(et).parallel(38.58).scale(195.044)}function ht(rt){var st=b(rt);function pt(j,Y){return[j*st,(1+st)*h(Y/2)]}return pt.invert=function(j,Y){return[j/st,2*o(Y/(1+st))]},pt}function Ge(){return Oe(ht).scale(124.75)}function He(rt,st){var pt=L(8/(3*d));return[pt*rt*(1-k(st)/d),pt*st]}function ut(){return(0,S.c)(He).scale(165.664)}function tt(rt,st){var pt=L(4-3*c(k(st)));return[2/L(6*d)*rt*pt,s(st)*L(2*d/3)*(2-pt)]}function xt(){return(0,S.c)(tt).scale(165.664)}function At(rt,st){var pt=L(d*(4+d));return[2/pt*rt*(1+L(1-4*st*st/(d*d))),4/pt*st]}function Mt(){return(0,S.c)(At).scale(180.739)}function yt(rt,st){var pt=(2+m)*c(st);st/=2;for(var j=0,Y=1/0;j<10&&k(Y)>u;j++){var q=b(st);st-=Y=(st+c(st)*(q+2)-pt)/(2*q*(1+q))}return[2/L(d*(4+d))*rt*(1+b(st)),2*L(d/(4+d))*c(st)]}function Pt(){return(0,S.c)(yt).scale(180.739)}function Ct(rt,st){return[rt*(1+b(st))/L(2+d),2*st/L(2+d)]}function Dt(){return(0,S.c)(Ct).scale(173.044)}function Ut(rt,st){for(var pt=(1+m)*c(st),j=0,Y=1/0;j<10&&k(Y)>u;j++)st-=Y=(st+c(st)-pt)/(1+b(st));return pt=L(2+d),[rt*(1+b(st))/pt,2*st/pt]}function Bt(){return(0,S.c)(Ut).scale(173.044)}nt.invert=function(rt,st){var pt=3*E(st/(Qe*_));return[_*rt/(Qe*(2*b(2*pt/3)-1)),pt]},He.invert=function(rt,st){var pt=L(8/(3*d)),j=st/pt;return[rt/(pt*(1-k(j)/d)),j]},tt.invert=function(rt,st){var pt=2-k(st)/L(2*d/3);return[rt*L(6*d)/(2*pt),s(st)*E((4-pt*pt)/3)]},At.invert=function(rt,st){var pt=L(d*(4+d))/2;return[rt*pt/(1+L(1-st*st*(4+d)/(4*d))),st*pt/2]},yt.invert=function(rt,st){var pt=st*L((4+d)/d)/2,j=E(pt),Y=b(j);return[rt/(2/L(d*(4+d))*(1+Y)),E((j+pt*(Y+2))/(2+m))]},Ct.invert=function(rt,st){var pt=L(2+d),j=st*pt/2;return[pt*rt/(1+b(j)),j]},Ut.invert=function(rt,st){var pt=1+m,j=L(pt/2);return[2*rt*j/(1+b(st*=j)),E((st+c(st))/pt)]};var qt=3+2*v;function an(rt,st){var pt=c(rt/=2),j=b(rt),Y=L(b(st)),q=b(st/=2),I=c(st)/(q+v*j*Y),H=L(2/(1+I*I)),te=L((v*q+(j+pt)*Y)/(v*q+(j-pt)*Y));return[qt*(H*(te-1/te)-2*t(te)),qt*(H*I*(te+1/te)-2*o(I))]}function mn(){return(0,S.c)(an).scale(62.5271)}an.invert=function(rt,st){if(!(pt=W.invert(rt/1.2,1.065*st)))return null;var pt,j=pt[0],Y=pt[1],q=20;rt/=qt,st/=qt;do{var I=j/2,H=Y/2,te=c(I),le=b(I),pe=c(H),ke=b(H),Fe=b(Y),Ve=L(Fe),Xe=pe/(ke+v*le*Ve),Je=Xe*Xe,ct=L(2/(1+Je)),vt=(v*ke+(le+te)*Ve)/(v*ke+(le-te)*Ve),_t=L(vt),It=_t-1/_t,Ft=_t+1/_t,Ot=ct*It-2*t(_t)-rt,Yt=ct*Xe*Ft-2*o(Xe)-st,jt=pe&&x*Ve*te*Je/pe,ln=(v*le*ke+Ve)/(2*(ke+v*le*Ve)*(ke+v*le*Ve)*Ve),tn=-.5*Xe*ct*ct*ct,Jt=tn*jt,Mn=tn*ln,Ln=(Ln=2*ke+v*Ve*(le-te))*Ln*_t,Un=(v*le*ke*Ve+Fe)/Ln,Xn=-v*te*pe/(Ve*Ln),sr=It*Jt-2*Un/_t+ct*(Un+Un/vt),xr=It*Mn-2*Xn/_t+ct*(Xn+Xn/vt),Mr=Xe*Ft*Jt-2*jt/(1+Je)+ct*Ft*jt+ct*Xe*(Un-Un/vt),hr=Xe*Ft*Mn-2*ln/(1+Je)+ct*Ft*ln+ct*Xe*(Xn-Xn/vt),Cr=xr*Mr-hr*sr;if(!Cr)break;var Nr=(Yt*xr-Ot*hr)/Cr,ei=(Ot*Mr-Yt*sr)/Cr;j-=Nr,Y=i(-m,r(m,Y-ei))}while((k(Nr)>u||k(ei)>u)&&--q>0);return k(k(Y)-m)<u?[0,Y]:q&&[j,Y]};var Qt=b(35*w);function sn(rt,st){var pt=h(st/2);return[rt*Qt*L(1-pt*pt),(1+Qt)*pt]}function Kt(){return(0,S.c)(sn).scale(137.152)}function qn(rt,st){var pt=st/2,j=b(pt);return[2*rt/_*b(st)*j*j,_*h(pt)]}function Fn(){return(0,S.c)(qn).scale(135.264)}function Sn(rt){var st=1-rt,pt=Y(d,0)[0]-Y(-d,0)[0],j=L(2*(Y(0,m)[1]-Y(0,-m)[1])/pt);function Y(H,te){var le=b(te),pe=c(te);return[le/(st+rt*le)*H,st*te+rt*pe]}function q(H,te){var le=Y(H,te);return[le[0]*j,le[1]/j]}function I(H){return q(0,H)[1]}return q.invert=function(H,te){var le=xe(I,te);return[H/j*(rt+st/b(le)),le]},q}function hn(){var rt=.5,st=(0,S.U)(Sn),pt=st(rt);return pt.alpha=function(j){return arguments.length?st(rt=+j):rt},pt.scale(168.725)}sn.invert=function(rt,st){var pt=st/(1+Qt);return[rt&&rt/(Qt*L(1-pt*pt)),2*o(pt)]},qn.invert=function(rt,st){var pt=o(st/_),j=b(pt),Y=2*pt;return[rt*_/2/(b(Y)*j*j),Y]};var wn=e(4888),pn=e(69604);function An(rt){return[rt[0]/2,E(h(rt[1]/2*w))*C]}function On(rt){return[2*rt[0],2*o(c(rt[1]*w))*C]}function Dn(rt){null==rt&&(rt=wn.c);var st=rt(),pt=(0,pn.c)().scale(C).precision(0).clipAngle(null).translate([0,0]);function j(q){return st(An(q))}function Y(q){j[q]=function(){return arguments.length?(st[q].apply(st,arguments),j):st[q]()}}return st.invert&&(j.invert=function(q){return On(st.invert(q))}),j.stream=function(q){var I=st.stream(q),H=pt.stream({point:function(te,le){I.point(te/2,E(h(-le/2*w))*C)},lineStart:function(){I.lineStart()},lineEnd:function(){I.lineEnd()},polygonStart:function(){I.polygonStart()},polygonEnd:function(){I.polygonEnd()}});return H.sphere=I.sphere,H},j.rotate=function(q){return arguments.length?(pt.rotate(q),j):pt.rotate()},j.center=function(q){return arguments.length?(st.center(An(q)),j):On(st.center())},Y("angle"),Y("clipAngle"),Y("clipExtent"),Y("fitExtent"),Y("fitHeight"),Y("fitSize"),Y("fitWidth"),Y("scale"),Y("translate"),Y("precision"),j.scale(249.5)}function Vn(rt,st){var pt=2*d/st,j=rt*rt;function Y(q,I){var H=(0,X.O)(q,I),te=H[0],le=H[1],pe=te*te+le*le;if(pe>j){var ke=L(pe),Fe=T(le,te),Ve=pt*a(Fe/pt),Xe=Fe-Ve,Je=rt*b(Xe),ct=(rt*c(Xe)-Xe*c(Je))/(m-Je),vt=Gn(Xe,ct),_t=(d-rt)/Nn(vt,Je,d);te=ke;var It,Ft=50;do{te-=It=(rt+Nn(vt,Je,te)*_t-ke)/(vt(te)*_t)}while(k(It)>u&&--Ft>0);le=Xe*c(te),te<m&&(le-=ct*(te-m));var Ot=c(Ve),Yt=b(Ve);H[0]=te*Yt-le*Ot,H[1]=te*Ot+le*Yt}return H}return Y.invert=function(q,I){var H=q*q+I*I;if(H>j){var te=L(H),le=T(I,q),pe=pt*a(le/pt),ke=le-pe;q=te*b(ke),I=te*c(ke);for(var Fe=q-m,Ve=c(q),Xe=I/Ve,Je=q<m?1/0:0,ct=10;;){var vt=rt*c(Xe),_t=rt*b(Xe),It=c(_t),Ft=m-_t,Ot=(vt-Xe*It)/Ft,Yt=Gn(Xe,Ot);if(k(Je)<y||! --ct)break;Xe-=Je=(Xe*Ve-Ot*Fe-I)/(Ve-2*Fe*(Ft*(_t+Xe*vt*b(_t)-It)-vt*(vt-Xe*It))/(Ft*Ft))}q=(te=rt+Nn(Yt,_t,q)*(d-rt)/Nn(Yt,_t,d))*b(le=pe+Xe),I=te*c(le)}return X.O.invert(q,I)},Y}function Gn(rt,st){return function(pt){var j=rt*b(pt);return pt<m&&(j-=st),L(1+j*j)}}function Nn(rt,st,pt){for(var j=(pt-st)/50,Y=rt(st)+rt(pt),q=1,I=st;q<50;++q)Y+=2*rt(I+=j);return.5*Y*j}function ir(){var rt=6,st=30*w,pt=b(st),j=c(st),Y=(0,S.U)(Vn),q=Y(st,rt),I=q.stream,H=-b(.01*w),te=c(.01*w);return q.radius=function(le){return arguments.length?(pt=b(st=le*w),j=c(st),Y(st,rt)):st*C},q.lobes=function(le){return arguments.length?Y(st,rt=+le):rt},q.stream=function(le){var pe=q.rotate(),ke=I(le),Fe=(q.rotate([0,0]),I(le));return q.rotate(pe),ke.sphere=function(){Fe.polygonStart(),Fe.lineStart();for(var Ve=0,Xe=2*d/rt,Je=0;Ve<rt;++Ve,Je-=Xe)Fe.point(T(te*b(Je),H)*C,E(te*c(Je))*C),Fe.point(T(j*b(Je-Xe/2),pt)*C,E(j*c(Je-Xe/2))*C);Fe.lineEnd(),Fe.polygonEnd()},ke},q.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function $n(rt,st,pt,j,Y,q,I,H){function te(le,pe){if(!pe)return[rt*le/d,0];var ke=pe*pe,Fe=rt+ke*(st+ke*(pt+ke*j)),Ve=pe*(Y-1+ke*(q-H+ke*I)),Xe=(Fe*Fe+Ve*Ve)/(2*Ve),Je=le*E(Fe/Xe)/d;return[Xe*c(Je),pe*(1+ke*H)+Xe*(1-b(Je))]}return arguments.length<8&&(H=0),te.invert=function(le,pe){var ke,Fe,Ve=d*le/rt,Xe=pe,Je=50;do{var ct=Xe*Xe,vt=rt+ct*(st+ct*(pt+ct*j)),_t=Xe*(Y-1+ct*(q-H+ct*I)),It=vt*vt+_t*_t,Ft=2*_t,Ot=It/Ft,Yt=Ot*Ot,jt=E(vt/Ot)/d,ln=Ve*jt,tn=vt*vt,Jt=(2*st+ct*(4*pt+6*ct*j))*Xe,Mn=Y+ct*(3*q+5*ct*I),Ln=(2*(vt*Jt+_t*(Mn-1))*Ft-It*(2*(Mn-1)))/(Ft*Ft),Un=b(ln),Xn=c(ln),sr=Ot*Un,xr=Ot*Xn,Mr=Ve/d*(1/L(1-tn/Yt))*(Jt*Ot-vt*Ln)/Yt,hr=xr-le,Cr=Xe*(1+ct*H)+Ot-sr-pe,Nr=Ln*Xn+sr*Mr,ei=sr*jt,_r=1+Ln-(Ln*Un-xr*Mr),Sr=xr*jt,Hr=Nr*Sr-_r*ei;if(!Hr)break;Ve-=ke=(Cr*Nr-hr*_r)/Hr,Xe-=Fe=(hr*Sr-Cr*ei)/Hr}while((k(ke)>u||k(Fe)>u)&&--Je>0);return[Ve,Xe]},te}var mr=$n(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function lr(){return(0,S.c)(mr).scale(149.995)}var vr=$n(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function or(){return(0,S.c)(vr).scale(153.93)}var Or=$n(5/6*d,-.62636,-.0344,0,1.3493,-.05524,0,.045);function fn(){return(0,S.c)(Or).scale(130.945)}function gn(rt,st){var pt=rt*rt,j=st*st;return[rt*(1-.162388*j)*(.87-952426e-9*pt*pt),st*(1+j/12)]}function Hn(){return(0,S.c)(gn).scale(131.747)}gn.invert=function(rt,st){var pt,j=rt,Y=st,q=50;do{var I=Y*Y;Y-=pt=(Y*(1+I/12)-st)/(1+I/4)}while(k(pt)>u&&--q>0);q=50,rt/=1-.162388*I;do{var H=(H=j*j)*H;j-=pt=(j*(.87-952426e-9*H)-rt)/(.87-.00476213*H)}while(k(pt)>u&&--q>0);return[j,Y]};var En=$n(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Zn(){return(0,S.c)(En).scale(131.087)}function Kn(rt){var st=rt(m,0)[0]-rt(-m,0)[0];function pt(j,Y){var q=j>0?-.5:.5,I=rt(j+q*d,Y);return I[0]-=q*st,I}return rt.invert&&(pt.invert=function(j,Y){var q=j>0?-.5:.5,I=rt.invert(j+q*st,Y),H=I[0]-q*d;return H<-d?H+=2*d:H>d&&(H-=2*d),I[0]=H,I}),pt}function tr(rt,st){var pt=s(rt),j=s(st),Y=b(st),q=b(rt)*Y,I=c(rt)*Y,H=c(j*st);rt=k(T(I,H)),st=E(q),k(rt-m)>u&&(rt%=m);var te=function(le,pe){if(pe===m)return[0,0];var ke,Fe,Ve=c(pe),Xe=Ve*Ve,Je=Xe*Xe,ct=1+Je,vt=1+3*Je,_t=1-Je,It=E(1/L(ct)),Ft=_t+Xe*ct*It,Ot=(1-Ve)/Ft,Yt=L(Ot),jt=Ot*ct,ln=L(jt),tn=Yt*_t;if(0===le)return[0,-(tn+Xe*ln)];var Jt,Mn=b(pe),Ln=1/Mn,Un=2*Ve*Mn,Xn=(-Ft*Mn-(-3*Xe+It*vt)*Un*(1-Ve))/(Ft*Ft),sr=-Ln*Un,xr=-Ln*(Xe*ct*Xn+Ot*vt*Un),Mr=-2*Ln*(_t*(.5*Xn/Yt)-2*Xe*Yt*Un),hr=4*le/d;if(le>.222*d||pe<d/4&&le>.175*d){if(ke=(tn+Xe*L(jt*(1+Je)-tn*tn))/(1+Je),le>d/4)return[ke,ke];var Cr=ke,Nr=.5*ke;ke=.5*(Nr+Cr),Fe=50;do{var ei=ke*(Mr+sr*L(jt-ke*ke))+xr*E(ke/ln)-hr;if(!ei)break;ei<0?Nr=ke:Cr=ke,ke=.5*(Nr+Cr)}while(k(Cr-Nr)>u&&--Fe>0)}else{ke=u,Fe=25;do{var _r=ke*ke,Sr=L(jt-_r),Hr=Mr+sr*Sr,Pr=ke*Hr+xr*E(ke/ln)-hr;ke-=Jt=Sr?Pr/(Hr+(xr-sr*_r)/Sr):0}while(k(Jt)>u&&--Fe>0)}return[ke,-tn-Xe*L(jt-ke*ke)]}(rt>d/4?m-rt:rt,st);return rt>d/4&&(H=te[0],te[0]=-te[1],te[1]=-H),te[0]*=pt,te[1]*=-j,te}function fr(){return(0,S.c)(Kn(tr)).scale(239.75)}function Dr(rt,st){var pt,j,Y,q,I,H;if(st<u)return[(q=c(rt))-(pt=st*(rt-q*(j=b(rt)))/4)*j,j+pt*q,1-st*q*q/2,rt-pt];if(st>=1-u)return pt=(1-st)/4,Y=1/(j=z(rt)),[(q=((H=p(2*(H=rt)))-1)/(H+1))+pt*((I=j*O(rt))-rt)/(j*j),Y-pt*q*Y*(I-rt),Y+pt*q*Y*(I+rt),2*o(p(rt))-m+pt*(I-rt)/j];var te=[1,0,0,0,0,0,0,0,0],le=[L(st),0,0,0,0,0,0,0,0],pe=0;for(j=L(1-st),I=1;k(le[pe]/te[pe])>u&&pe<8;)pt=te[pe++],le[pe]=(pt-j)/2,te[pe]=(pt+j)/2,j=L(pt*j),I*=2;Y=I*te[pe]*rt;do{Y=(E(q=le[pe]*c(j=Y)/te[pe])+Y)/2}while(--pe);return[c(Y),q=b(Y),q/b(Y-j),Y]}function cn(rt,st){if(!st)return rt;if(1===st)return t(h(rt/2+g));for(var pt=1,j=L(1-st),Y=L(st),q=0;k(Y)>u;q++){if(rt%d){var I=o(j*h(rt)/pt);I<0&&(I+=d),rt+=I+~~(rt/d)*d}else rt+=rt;Y=(pt+j)/2,j=L(pt*j),Y=((pt=Y)-j)/2}return rt/(n(2,q)*pt)}function In(rt,st){var le,pe,ke,Fe,Ve,pt=(v-1)/(v+1),j=L(1-pt*pt),Y=cn(m,j*j),q=t(h(d/4+k(st)/2)),I=p(-1*q)/L(pt),H=(le=I*b(-1*rt),Fe=(pe=I*c(-1*rt))+1,[.5*((le>=0?m:-m)-T(Ve=1-(ke=le*le)-pe*pe,2*le)),-.25*t(Ve*Ve+4*ke)+.5*t(Fe*Fe+ke)]),te=function(le,pe,ke){var Fe=k(le),Ve=O(k(pe));if(Fe){var Xe=1/c(Fe),Je=1/(h(Fe)*h(Fe)),ct=-(Je+ke*(Ve*Ve*Xe*Xe)-1+ke),vt=(-ct+L(ct*ct-(ke-1)*Je*4))/2;return[cn(o(1/L(vt)),ke)*s(le),cn(o(L((vt/Je-1)/ke)),1-ke)*s(pe)]}return[0,cn(o(Ve),1-ke)*s(pe)]}(H[0],H[1],j*j);return[-te[1],(st>=0?1:-1)*(.5*Y-te[0])]}function Nt(){return(0,S.c)(Kn(In)).scale(151.496)}tr.invert=function(rt,st){k(rt)>1&&(rt=2*s(rt)-rt),k(st)>1&&(st=2*s(st)-st);var pt=s(rt),j=s(st),Y=-pt*rt,q=-j*st,I=q/Y<1,H=function(ke,Fe){for(var Ve=0,Xe=1,Je=.5,ct=50;;){var vt=Je*Je,_t=L(Je),It=E(1/L(1+vt)),Ft=1-vt+Je*(1+vt)*It,Ot=(1-_t)/Ft,Yt=L(Ot),jt=Ot*(1+vt),ln=Yt*(1-vt),tn=L(jt-ke*ke),Jt=Fe+ln+Je*tn;if(k(Xe-Ve)<y||0==--ct||0===Jt)break;Jt>0?Ve=Je:Xe=Je,Je=.5*(Ve+Xe)}if(!ct)return null;var Mn=E(_t),Ln=b(Mn),Un=1/Ln,Xn=2*_t*Ln,sr=(-Ft*Ln-(-3*Je+It*(1+3*vt))*Xn*(1-_t))/(Ft*Ft);return[d/4*(ke*(-2*Un*(.5*sr/Yt*(1-vt)-2*Je*Yt*Xn)+-Un*Xn*tn)+-Un*(Je*(1+vt)*sr+Ot*(1+3*vt)*Xn)*E(ke/L(jt))),Mn]}(I?q:Y,I?Y:q),te=H[0],le=H[1],pe=b(le);return I&&(te=-m-te),[pt*(T(c(te)*pe,-c(le))+d),j*E(b(te)*pe)]},In.invert=function(rt,st){var pt,j,Y,q,I,H,Fe,Ve,Xe,te=(v-1)/(v+1),le=L(1-te*te),pe=(j=-rt,Y=le*le,(pt=.5*cn(m,le*le)-st)?(q=Dr(pt,Y),j?(H=(I=Dr(j,1-Y))[1]*I[1]+Y*q[0]*q[0]*I[0]*I[0],[[q[0]*I[2]/H,q[1]*q[2]*I[0]*I[1]/H],[q[1]*I[1]/H,-q[0]*q[2]*I[0]*I[2]/H],[q[2]*I[1]*I[2]/H,-Y*q[0]*q[1]*I[0]/H]]):[[q[0],0],[q[1],0],[q[2],0]]):[[0,(I=Dr(j,1-Y))[0]/I[1]],[1/I[1],0],[I[2]/I[1],0]]),ke=[((Fe=pe[0])[0]*(Ve=pe[1])[0]+Fe[1]*Ve[1])/(Xe=Ve[0]*Ve[0]+Ve[1]*Ve[1]),(Fe[1]*Ve[0]-Fe[0]*Ve[1])/Xe];return[T(ke[1],ke[0])/-1,2*o(p(-.5*t(te*ke[0]*ke[0]+te*ke[1]*ke[1])))-m]};var Zt=e(61780);function un(rt){var st=c(rt),pt=b(rt),j=Tn(rt);function Y(q,I){var H=j(q,I);q=H[0];var te=c(I=H[1]),le=b(I),pe=b(q),ke=P(st*te+pt*le*pe),Fe=c(ke),Ve=k(Fe)>u?ke/Fe:1;return[Ve*pt*c(q),(k(q)>m?Ve:-Ve)*(st*le-pt*te*pe)]}return j.invert=Tn(-rt),Y.invert=function(q,I){var H=L(q*q+I*I),te=-c(H),le=b(H),pe=H*le,ke=-I*te,Fe=H*st,Ve=L(pe*pe+ke*ke-Fe*Fe),Xe=T(pe*Fe+ke*Ve,ke*Fe-pe*Ve),Je=(H>m?-1:1)*T(q*te,H*b(Xe)*le+I*c(Xe)*te);return j.invert(Je,Xe)},Y}function Tn(rt){var st=c(rt),pt=b(rt);return function(j,Y){var q=b(Y),I=b(j)*q,H=c(j)*q,te=c(Y);return[T(H,I*pt-te*st),E(te*pt+I*st)]}}function kn(){var rt=0,st=(0,S.U)(un),pt=st(rt),j=pt.rotate,Y=pt.stream,q=(0,Zt.c)();return pt.parallel=function(I){if(!arguments.length)return rt*C;var H=pt.rotate();return st(rt=I*w).rotate(H)},pt.rotate=function(I){return arguments.length?(j.call(pt,[I[0],I[1]-rt*C]),q.center([-I[0],-I[1]]),pt):((I=j.call(pt))[1]+=rt*C,I)},pt.stream=function(I){return(I=Y(I)).sphere=function(){I.polygonStart();var H,te=q.radius(89.99)().coordinates[0],le=te.length-1,pe=-1;for(I.lineStart();++pe<le;)I.point((H=te[pe])[0],H[1]);for(I.lineEnd(),le=(te=q.radius(90.01)().coordinates[0]).length-1,I.lineStart();--pe>=0;)I.point((H=te[pe])[0],H[1]);I.lineEnd(),I.polygonEnd()},I},pt.scale(79.4187).parallel(45).clipAngle(179.999)}var Pn=e(84706),yn=e(16016),on=E(1-1/3)*C,nn=et(0);function dn(rt){var st=on*w,pt=Rt(d,st)[0]-Rt(-d,st)[0],j=nn(0,st)[1],Y=Rt(0,st)[1],q=_-Y,I=f/rt,H=4/f,te=j+q*q*4/f;function le(pe,ke){var Fe,Ve=k(ke);if(Ve>st){var Xe=r(rt-1,i(0,l((pe+d)/I)));(Fe=Rt(pe+=d*(rt-1)/rt-Xe*I,Ve))[0]=Fe[0]*f/pt-f*(rt-1)/(2*rt)+Xe*f/rt,Fe[1]=j+4*(Fe[1]-Y)*q/f,ke<0&&(Fe[1]=-Fe[1])}else Fe=nn(pe,ke);return Fe[0]*=H,Fe[1]/=te,Fe}return le.invert=function(pe,ke){pe/=H;var Fe=k(ke*=te);if(Fe>j){var Ve=r(rt-1,i(0,l((pe+d)/I))),Xe=Rt.invert(pe=(pe+d*(rt-1)/rt-Ve*I)*pt/f,.25*(Fe-j)*f/q+Y);return Xe[0]-=d*(rt-1)/rt-Ve*I,ke<0&&(Xe[1]=-Xe[1]),Xe}return nn.invert(pe,ke)},le}function xn(rt,st){return[rt,1&st?90-u:on]}function Bn(rt,st){return[rt,1&st?-90+u:-on]}function Wn(rt){return[rt[0]*(1-u),rt[1]]}function Qn(){var rt=4,st=(0,S.U)(dn),pt=st(rt),j=pt.stream;return pt.lobes=function(Y){return arguments.length?st(rt=+Y):rt},pt.stream=function(Y){var q=pt.rotate(),I=j(Y),H=(pt.rotate([0,0]),j(Y));return pt.rotate(q),I.sphere=function(){var te,le;(0,yn.c)((le=[].concat((0,Pn.ik)(-180,180+(te=180/rt)/2,te).map(xn),(0,Pn.ik)(180,-180-te/2,-te).map(Bn)),{type:"Polygon",coordinates:[180===te?le.map(Wn):le]}),H)},I},pt.scale(239.75)}function ar(rt){var st,pt=1+rt,j=E(c(1/pt)),Y=2*L(d/(st=d+4*j*pt)),q=.5*Y*(pt+L(rt*(2+rt))),I=rt*rt,H=pt*pt;function te(le,pe){var ke,Fe,Ve=1-c(pe);if(Ve&&Ve<2){var Xe,Je=m-pe,ct=25;do{var vt=c(Je),_t=b(Je),It=j+T(vt,pt-_t),Ft=1+H-2*pt*_t;Je-=Xe=(Je-I*j-pt*vt+Ft*It-.5*Ve*st)/(2*pt*vt*It)}while(k(Xe)>y&&--ct>0);ke=Y*L(Ft),Fe=le*It/d}else ke=Y*(rt+Ve),Fe=le*j/d;return[ke*c(Fe),q-ke*b(Fe)]}return te.invert=function(le,pe){var ke=le*le+(pe-=q)*pe,Fe=(1+H-ke/(Y*Y))/(2*pt),Ve=P(Fe),Xe=c(Ve),Je=j+T(Xe,pt-Fe);return[E(le/L(ke))*d/Je,E(1-2*(Ve-I*j-pt*Xe+(1+H-2*pt*Fe)*Je)/st)]},te}function yr(){var rt=1,st=(0,S.U)(ar),pt=st(rt);return pt.ratio=function(j){return arguments.length?st(rt=+j):rt},pt.scale(167.774).center([0,18.67])}var ur=.7109889596207567,gr=.0528035274542;function br(rt,st){return st>-ur?((rt=he(rt,st))[1]+=gr,rt):Ne(rt,st)}function pr(){return(0,S.c)(br).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function Lr(rt,st){return k(st)>ur?((rt=he(rt,st))[1]-=st>0?gr:-gr,rt):Ne(rt,st)}function Ur(){return(0,S.c)(Lr).scale(152.63)}function zr(rt,st,pt,j){var Y=L(4*d/(2*pt+(1+rt-st/2)*c(2*pt)+(rt+st)/2*c(4*pt)+st/2*c(6*pt))),q=L(j*c(pt)*L((1+rt*b(2*pt)+st*b(4*pt))/(1+rt+st))),I=pt*te(1);function H(ke){return L(1+rt*b(2*ke)+st*b(4*ke))}function te(ke){var Fe=ke*pt;return(2*Fe+(1+rt-st/2)*c(2*Fe)+(rt+st)/2*c(4*Fe)+st/2*c(6*Fe))/pt}function le(ke){return H(ke)*c(ke)}var pe=function(ke,Fe){var Ve=pt*xe(te,I*c(Fe)/pt,Fe/d);isNaN(Ve)&&(Ve=pt*s(Fe));var Xe=Y*H(Ve);return[Xe*q*ke/d*b(Ve),Xe/q*c(Ve)]};return pe.invert=function(ke,Fe){var Ve=xe(le,Fe*q/Y);return[ke*d/(b(Ve)*Y*q*H(Ve)),E(pt*te(Ve/pt)/I)]},0===pt&&(Y=L(j/d),(pe=function(ke,Fe){return[ke*Y,c(Fe)/Y]}).invert=function(ke,Fe){return[ke/Y,E(Fe*Y)]}),pe}function kr(){var rt=1,st=0,pt=45*w,j=2,Y=(0,S.U)(zr),q=Y(rt,st,pt,j);return q.a=function(I){return arguments.length?Y(rt=+I,st,pt,j):rt},q.b=function(I){return arguments.length?Y(rt,st=+I,pt,j):st},q.psiMax=function(I){return arguments.length?Y(rt,st,pt=+I*w,j):pt*C},q.ratio=function(I){return arguments.length?Y(rt,st,pt,j=+I):j},q.scale(180.739)}function Fr(rt,st,pt,j,Y,q,I,H,te,le,pe){if(pe.nanEncountered)return NaN;var ke,Fe,Ve,Xe,Je,ct,vt,_t,It,Ft;if(Fe=rt(st+.25*(ke=pt-st)),Ve=rt(pt-.25*ke),isNaN(Fe))pe.nanEncountered=!0;else{if(!isNaN(Ve))return Ft=((ct=(Xe=ke*(j+4*Fe+Y)/12)+(Je=ke*(Y+4*Ve+q)/12))-I)/15,le>te?(pe.maxDepthCount++,ct+Ft):Math.abs(Ft)<H?ct+Ft:(_t=Fr(rt,st,vt=st+.5*ke,j,Fe,Y,Xe,.5*H,te,le+1,pe),isNaN(_t)?(pe.nanEncountered=!0,NaN):(It=Fr(rt,vt,pt,Y,Ve,q,Je,.5*H,te,le+1,pe),isNaN(It)?(pe.nanEncountered=!0,NaN):_t+It));pe.nanEncountered=!0}}function Qr(rt,st,pt,j,Y){void 0===j&&(j=1e-8),void 0===Y&&(Y=20);var q=rt(st),I=rt(.5*(st+pt)),H=rt(pt);return Fr(rt,st,pt,q,I,H,(q+4*I+H)*(pt-st)/6,j,Y,1,{maxDepthCount:0,nanEncountered:!1})}function ai(rt,st,pt){function j(Ve){return rt+(1-rt)*n(1-n(Ve,st),1/st)}function Y(Ve){return Qr(j,0,Ve,1e-4)}for(var q=1/Y(1),I=1e3,H=1.00000001*q,te=[],le=0;le<=I;le++)te.push(Y(le/I)*H);function pe(Ve){var Xe=0,Je=I,ct=500;do{te[ct]>Ve?Je=ct:Xe=ct,ct=Xe+Je>>1}while(ct>Xe);var vt=te[ct+1]-te[ct];return vt&&(vt=(Ve-te[ct+1])/vt),(ct+1+vt)/I}var ke=2*pe(1)/d*q/pt,Fe=function(Ve,Xe){var Je=pe(k(c(Xe))),ct=j(Je)*Ve;return Je/=ke,[ct,Xe>=0?Je:-Je]};return Fe.invert=function(Ve,Xe){var Je;return k(Xe*=ke)<1&&(Je=s(Xe)*E(Y(k(Xe))*q)),[Ve/j(k(Xe)),Je]},Fe}function Xi(){var rt=0,st=2.5,pt=1.183136,j=(0,S.U)(ai),Y=j(rt,st,pt);return Y.alpha=function(q){return arguments.length?j(rt=+q,st,pt):rt},Y.k=function(q){return arguments.length?j(rt,st=+q,pt):st},Y.gamma=function(q){return arguments.length?j(rt,st,pt=+q):pt},Y.scale(152.63)}function da(rt,st){return k(rt[0]-st[0])<u&&k(rt[1]-st[1])<u}function Ba(rt,st){for(var pt,j,Y,q=-1,I=rt.length,H=rt[0],te=[];++q<I;){j=((pt=rt[q])[0]-H[0])/st,Y=(pt[1]-H[1])/st;for(var le=0;le<st;++le)te.push([H[0]+le*j,H[1]+le*Y]);H=pt}return te.push(pt),te}function ea(rt,st,pt){var j,Y;function q(te,le){for(var pe=le<0?-1:1,ke=st[+(le<0)],Fe=0,Ve=ke.length-1;Fe<Ve&&te>ke[Fe][2][0];++Fe);var Xe=rt(te-ke[Fe][1][0],le);return Xe[0]+=rt(ke[Fe][1][0],pe*le>pe*ke[Fe][0][1]?ke[Fe][0][1]:le)[0],Xe}pt?q.invert=pt(q):rt.invert&&(q.invert=function(te,le){for(var pe=Y[+(le<0)],ke=st[+(le<0)],Fe=0,Ve=pe.length;Fe<Ve;++Fe){var Xe=pe[Fe];if(Xe[0][0]<=te&&te<Xe[1][0]&&Xe[0][1]<=le&&le<Xe[1][1]){var Je=rt.invert(te-rt(ke[Fe][1][0],0)[0],le);return Je[0]+=ke[Fe][1][0],da(q(Je[0],Je[1]),[te,le])?Je:null}}});var I=(0,S.c)(q),H=I.stream;return I.stream=function(te){var le=I.rotate(),pe=H(te),ke=(I.rotate([0,0]),H(te));return I.rotate(le),pe.sphere=function(){(0,yn.c)(j,ke)},pe},I.lobes=function(te){return arguments.length?(j=function(le){var pe,ke,Ve,Xe,ct,vt=[],_t=le[0].length;for(ct=0;ct<_t;++ct)ke=(pe=le[0][ct])[0][0],vt.push(Ba([[ke+u,pe[0][1]+u],[ke+u,(Ve=pe[1][1])-u],[(Xe=pe[2][0])-u,Ve-u],[Xe-u,pe[2][1]+u]],30));for(ct=le[1].length-1;ct>=0;--ct)ke=(pe=le[1][ct])[0][0],vt.push(Ba([[(Xe=pe[2][0])-u,pe[2][1]-u],[Xe-u,(Ve=pe[1][1])+u],[ke+u,Ve+u],[ke+u,pe[0][1]-u]],30));return{type:"Polygon",coordinates:[(0,Pn.Uf)(vt)]}}(te),st=te.map(function(le){return le.map(function(pe){return[[pe[0][0]*w,pe[0][1]*w],[pe[1][0]*w,pe[1][1]*w],[pe[2][0]*w,pe[2][1]*w]]})}),Y=st.map(function(le){return le.map(function(pe){var ke,Fe=rt(pe[0][0],pe[0][1])[0],Ve=rt(pe[2][0],pe[2][1])[0],Xe=rt(pe[1][0],pe[0][1])[1],Je=rt(pe[1][0],pe[1][1])[1];return Xe>Je&&(ke=Xe,Xe=Je,Je=ke),[[Fe,Xe],[Ve,Je]]})}),I):st.map(function(le){return le.map(function(pe){return[[pe[0][0]*C,pe[0][1]*C],[pe[1][0]*C,pe[1][1]*C],[pe[2][0]*C,pe[2][1]*C]]})})},null!=st&&I.lobes(st),I}br.invert=function(rt,st){return st>-ur?he.invert(rt,st-gr):Ne.invert(rt,st)},Lr.invert=function(rt,st){return k(st)>ur?he.invert(rt,st+(st>0?gr:-gr)):Ne.invert(rt,st)};var Ea=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function so(){return ea(Ae,Ea).scale(160.857)}var li=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function za(){return ea(Lr,li).scale(152.63)}var No=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Na(){return ea(he,No).scale(169.529)}var js=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Ia(){return ea(he,js).scale(169.529).rotate([20,0])}var Qa=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function ds(){return ea(br,Qa,ye).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var Cs=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function xl(){return ea(Ne,Cs).scale(152.63).rotate([-20,0])}function Eo(rt,st){return[3/f*rt*L(d*d/3-st*st),st]}function $o(){return(0,S.c)(Eo).scale(158.837)}function Es(rt){function st(pt,j){if(k(k(j)-m)<u)return[0,j<0?-2:2];var Y=c(j),q=n((1+Y)/(1-Y),rt/2),I=.5*(q+1/q)+b(pt*=rt);return[2*c(pt)/I,(q-1/q)/I]}return st.invert=function(pt,j){var Y=k(j);if(k(Y-2)<u)return pt?null:[0,s(j)*m];if(Y>2)return null;var q=(pt/=2)*pt,I=(j/=2)*j,H=2*j/(1+q+I);return H=n((1+H)/(1-H),1/rt),[T(2*pt,1-q-I)/rt,E((H-1)/(H+1))]},st}function Ei(){var rt=.5,st=(0,S.U)(Es),pt=st(rt);return pt.spacing=function(j){return arguments.length?st(rt=+j):rt},pt.scale(124.75)}Eo.invert=function(rt,st){return[f/3*rt/L(d*d/3-st*st),st]};var Fa=d/v;function Io(rt,st){return[rt*(1+L(b(st)))/2,st/(b(st/2)*b(rt/6))]}function To(){return(0,S.c)(Io).scale(97.2672)}function Ao(rt,st){var pt=rt*rt,j=st*st;return[rt*(.975534+j*(-.0143059*pt-.119161+-.0547009*j)),st*(1.00384+pt*(.0802894+-.02855*j+199025e-9*pt)+j*(.0998909+-.0491032*j))]}function vo(){return(0,S.c)(Ao).scale(139.98)}function ps(rt,st){return[c(rt)/b(st),h(st)*b(rt)]}function _l(){return(0,S.c)(ps).scale(144.049).clipAngle(89.999)}function Oa(rt){var st=b(rt),pt=h(g+rt/2);function j(Y,q){var I=q-rt,H=k(I)<u?Y*st:k(H=g+q/2)<u||k(k(H)-m)<u?0:Y*I/t(h(H)/pt);return[H,I]}return j.invert=function(Y,q){var I,H=q+rt;return[k(q)<u?Y/st:k(I=g+H/2)<u||k(k(I)-m)<u?0:Y*t(h(I)/pt)/q,H]},j}function al(){return Oe(Oa).parallel(40).scale(158.837)}function Us(rt,st){return[rt,1.25*t(h(g+.4*st))]}function Ul(){return(0,S.c)(Us).scale(108.318)}function Xc(rt){var st=rt.length-1;function pt(j,Y){for(var q,I=b(Y),H=2/(1+I*b(j)),te=H*I*c(j),le=H*c(Y),pe=st,ke=rt[pe],Fe=ke[0],Ve=ke[1];--pe>=0;)Fe=(ke=rt[pe])[0]+te*(q=Fe)-le*Ve,Ve=ke[1]+te*Ve+le*q;return[Fe=te*(q=Fe)-le*Ve,Ve=te*Ve+le*q]}return pt.invert=function(j,Y){var q=20,I=j,H=Y;do{for(var te,le=st,pe=rt[le],ke=pe[0],Fe=pe[1],Ve=0,Xe=0;--le>=0;)Ve=ke+I*(te=Ve)-H*Xe,Xe=Fe+I*Xe+H*te,ke=(pe=rt[le])[0]+I*(te=ke)-H*Fe,Fe=pe[1]+I*Fe+H*te;var Je,ct,vt=(Ve=ke+I*(te=Ve)-H*Xe)*Ve+(Xe=Fe+I*Xe+H*te)*Xe;I-=Je=((ke=I*(te=ke)-H*Fe-j)*Ve+(Fe=I*Fe+H*te-Y)*Xe)/vt,H-=ct=(Fe*Ve-ke*Xe)/vt}while(k(Je)+k(ct)>u*u&&--q>0);if(q){var _t=L(I*I+H*H),It=2*o(.5*_t),Ft=c(It);return[T(I*Ft,_t*b(It)),_t?E(H*Ft/_t):0]}},pt}Io.invert=function(rt,st){var pt=k(rt),j=k(st),Y=u,q=m;j<Fa?q*=j/Fa:Y+=6*P(Fa/j);for(var I=0;I<25;I++){var H=c(q),te=L(b(q)),le=c(q/2),pe=b(q/2),ke=c(Y/6),Fe=b(Y/6),Ve=.5*Y*(1+te)-pt,Xe=q/(pe*Fe)-j,Je=te?-.25*Y*H/te:0,ct=.5*(1+te),vt=(1+.5*q*le/pe)/(pe*Fe),_t=q/pe*(ke/6)/(Fe*Fe),It=Je*_t-vt*ct,Ft=(Ve*_t-Xe*ct)/It,Ot=(Xe*Je-Ve*vt)/It;if(q-=Ft,Y-=Ot,k(Ft)<u&&k(Ot)<u)break}return[rt<0?-Y:Y,st<0?-q:q]},Ao.invert=function(rt,st){var pt=s(rt)*d,j=st/2,Y=50;do{var q=pt*pt,I=j*j,H=pt*j,te=pt*(.975534+I*(-.0143059*q-.119161+-.0547009*I))-rt,le=j*(1.00384+q*(.0802894+-.02855*I+199025e-9*q)+I*(.0998909+-.0491032*I))-st,pe=.975534-I*(.119161+3*q*.0143059+.0547009*I),ke=-H*(.238322+.2188036*I+.0286118*q),Fe=H*(.1605788+7961e-7*q+-.0571*I),Ve=1.00384+q*(.0802894+199025e-9*q)+I*(3*(.0998909-.02855*q)-.245516*I),Xe=ke*Fe-Ve*pe,Je=(le*ke-te*Ve)/Xe,ct=(te*Fe-le*pe)/Xe;pt-=Je,j-=ct}while((k(Je)>u||k(ct)>u)&&--Y>0);return Y&&[pt,j]},ps.invert=function(rt,st){var pt=rt*rt,j=st*st+1,Y=pt+j,q=rt?x*L((Y-L(Y*Y-4*pt))/pt):1/L(j);return[E(rt*q),s(st)*P(q)]},Us.invert=function(rt,st){return[rt,2.5*o(p(.8*st))-.625*d]};var Vs=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Is=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],ac=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],jo=[[.9245,0],[0,0],[.01943,0]],pu=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Xu(){return Gs(Vs,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function Ku(){return Gs(Is,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function bl(){return Gs(ac,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function gs(){return Gs(jo,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function Vl(){return Gs(pu,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Gs(rt,st){var pt=(0,S.c)(Xc(rt)).rotate(st).clipAngle(90),j=(0,it.c)(st),Y=pt.center;return delete pt.rotate,pt.center=function(q){return arguments.length?Y(j(q)):j.invert(Y())},pt}var wl=L(6),Tl=L(7);function ms(rt,st){var pt=E(7*c(st)/(3*wl));return[wl*rt*(2*b(2*pt/3)-1)/Tl,9*c(pt/3)/Tl]}function Ac(){return(0,S.c)(ms).scale(164.859)}function Ls(rt,st){for(var pt,j=(1+x)*c(st),Y=st,q=0;q<25&&(Y-=pt=(c(Y/2)+c(Y)-j)/(.5*b(Y/2)+b(Y)),!(k(pt)<u));q++);return[rt*(1+2*b(Y)/b(Y/2))/(3*v),2*L(3)*c(Y/2)/L(2+v)]}function Ps(){return(0,S.c)(Ls).scale(188.209)}function Hs(rt,st){for(var pt,j=L(6/(4+d)),Y=(1+d/4)*c(st),q=st/2,I=0;I<25&&(q-=pt=(q/2+c(q)-Y)/(.5+b(q)),!(k(pt)<u));I++);return[j*(.5+b(q))*rt/1.5,j*q]}function ol(){return(0,S.c)(Hs).scale(166.518)}ms.invert=function(rt,st){var pt=3*E(st*Tl/9);return[rt*Tl/(wl*(2*b(2*pt/3)-1)),E(3*c(pt)*wl/7)]},Ls.invert=function(rt,st){var pt=st*L(2+v)/(2*L(3)),j=2*E(pt);return[3*v*rt/(1+2*b(j)/b(j/2)),E((pt+c(j))/(1+x))]},Hs.invert=function(rt,st){var pt=L(6/(4+d)),j=st/pt;return k(k(j)-m)<u&&(j=j<0?-m:m),[1.5*rt/(pt*(.5+b(j))),E((j/2+c(j))/(1+d/4))]};var ki=e(47984);function vs(rt,st){var pt=st*st,j=pt*pt,Y=pt*j;return[rt*(.84719-.13063*pt+Y*Y*(.05494*pt-.04515-.02326*j+.00331*Y)),st*(1.01183+j*j*(.01926*pt-.02625-.00396*j))]}function Kc(){return(0,S.c)(vs).scale(175.295)}function kc(rt,st){return[rt*(1+b(st))/2,2*(st-h(st/2))]}function oc(){return(0,S.c)(kc).scale(152.63)}vs.invert=function(rt,st){var pt,j,Y,q,I=st,H=25;do{I-=pt=(I*(1.01183+(Y=(j=I*I)*j)*Y*(.01926*j-.02625-.00396*Y))-st)/(1.01183+Y*Y*(.21186*j-.23625+-.05148*Y))}while(k(pt)>y&&--H>0);return[rt/(.84719-.13063*(j=I*I)+(q=j*(Y=j*j))*q*(.05494*j-.04515-.02326*Y+.00331*q)),I]},kc.invert=function(rt,st){for(var pt=st/2,j=0,Y=1/0;j<10&&k(Y)>u;++j){var q=b(st/2);st-=Y=(st-h(st/2)-pt)/(1-.5/(q*q))}return[2*rt/(1+b(st)),st]};var Mc=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Qo(){return ea(ge(1/0),Mc).rotate([20,0]).scale(152.63)}function Jc(rt,st){var pt=c(st),j=b(st),Y=s(rt);if(0===rt||k(st)===m)return[0,st];if(0===st)return[rt,0];if(k(rt)===m)return[rt*j,m*pt];var q=d/(2*rt)-2*rt/d,I=2*st/d,H=(1-I*I)/(pt-I),te=q*q,le=H*H,pe=1+te/le,ke=1+le/te,Fe=(q*pt/H-q/2)/pe,Ve=(le*pt/te+H/2)/ke,Xe=Ve*Ve-(le*pt*pt/te+H*pt-1)/ke;return[m*(Fe+L(Fe*Fe+j*j/pe)*Y),m*(Ve+L(Xe<0?0:Xe)*s(-st*q)*Y)]}function $c(){return(0,S.c)(Jc).scale(127.267)}Jc.invert=function(rt,st){var pt=(rt/=m)*rt,j=pt+(st/=m)*st,Y=d*d;return[rt?(j-1+L((1-j)*(1-j)+4*pt))/(2*rt)*m:0,xe(function(q){return j*(d*c(q)-2*q)*d+4*q*q*(st-c(q))+2*d*q-Y*st},0)]};var es=1.0148,Al=.23185,ka=-.14499,Os=.02406,sc=es,Mu=5*Al,Sc=7*ka,Uo=9*Os,ts=1.790857183;function Qc(rt,st){var pt=st*st;return[rt,st*(es+pt*pt*(Al+pt*(ka+Os*pt)))]}function Cc(){return(0,S.c)(Qc).scale(139.319)}function Gl(rt,st){if(k(st)<u)return[rt,0];var pt=h(st),j=rt*c(st);return[c(j)/pt,st+(1-b(j))/pt]}function sl(){return(0,S.c)(Gl).scale(103.74)}Qc.invert=function(rt,st){st>ts?st=ts:st<-1.790857183&&(st=-1.790857183);var pt,j=st;do{var Y=j*j;j-=pt=(j*(es+Y*Y*(Al+Y*(ka+Os*Y)))-st)/(sc+Y*Y*(Mu+Y*(Sc+Uo*Y)))}while(k(pt)>u);return[rt,j]},Gl.invert=function(rt,st){if(k(st)<u)return[rt,0];var pt,j=rt*rt+st*st,Y=.5*st,q=10;do{var I=h(Y),H=1/b(Y),te=j-2*st*Y+Y*Y;Y-=pt=(I*te+2*(Y-st))/(2+te*H*H+2*(Y-st)*I)}while(k(pt)>u&&--q>0);return I=h(Y),[(k(st)<k(Y+1/I)?E(rt*I):s(st)*s(rt)*(P(k(rt*I))+m))/c(Y),Y]};var kl=e(13696),Lo=e(27284);function ll(rt,st){return[rt[0]*st[0]+rt[1]*st[3],rt[0]*st[1]+rt[1]*st[4],rt[0]*st[2]+rt[1]*st[5]+rt[2],rt[3]*st[0]+rt[4]*st[3],rt[3]*st[1]+rt[4]*st[4],rt[3]*st[2]+rt[4]*st[5]+rt[5]]}function lc(rt,st){return[rt[0]-st[0],rt[1]-st[1]]}function Ec(rt){return L(rt[0]*rt[0]+rt[1]*rt[1])}function qi(rt,st,pt){function j(H,te){var le,pe=st(H,te),ke=pe.project([H*C,te*C]);return(le=pe.transform)?[le[0]*ke[0]+le[1]*ke[1]+le[2],-(le[3]*ke[0]+le[4]*ke[1]+le[5])]:(ke[1]=-ke[1],ke)}function Y(H,te){var ct,vt,le=H.project.invert,pe=H.transform,ke=te;if(pe&&(ke=[(pe=[(vt=1/((ct=pe)[0]*ct[4]-ct[1]*ct[3]))*ct[4],-vt*ct[1],vt*(ct[1]*ct[5]-ct[2]*ct[4]),-vt*ct[3],vt*ct[0],vt*(ct[2]*ct[3]-ct[0]*ct[5])])[0]*ke[0]+pe[1]*ke[1]+pe[2],pe[3]*ke[0]+pe[4]*ke[1]+pe[5]]),le&&H===function(ct){return st(ct[0]*w,ct[1]*w)}(Fe=le(ke)))return Fe;for(var Fe,Ve=H.children,Xe=0,Je=Ve&&Ve.length;Xe<Je;++Xe)if(Fe=Y(Ve[Xe],te))return Fe}(function H(te,le){if(te.edges=function(Ot){for(var Yt=Ot.length,jt=[],ln=Ot[Yt-1],tn=0;tn<Yt;++tn)jt.push([ln,ln=Ot[tn]]);return jt}(te.face),le.face){var pe=te.shared=function(Ot,Yt){for(var jt,ln,tn=Ot.length,Jt=null,Mn=0;Mn<tn;++Mn){jt=Ot[Mn];for(var Ln=Yt.length;--Ln>=0;)if(jt[0]===(ln=Yt[Ln])[0]&&jt[1]===ln[1]){if(Jt)return[Jt,jt];Jt=jt}}}(te.face,le.face),ke=(Je=pe.map(le.project),ct=pe.map(te.project),vt=lc(Je[1],Je[0]),_t=lc(ct[1],ct[0]),It=T((Ot=vt)[0]*(Yt=_t)[1]-Ot[1]*Yt[0],Ot[0]*Yt[0]+Ot[1]*Yt[1]),Ft=Ec(vt)/Ec(_t),ll([1,0,Je[0][0],0,1,Je[0][1]],ll([Ft,0,0,0,Ft,0],ll([b(It),c(It),0,-c(It),b(It),0],[1,0,-ct[0][0],0,1,-ct[0][1]]))));te.transform=le.transform?ll(le.transform,ke):ke;for(var Fe=le.edges,Ve=0,Xe=Fe.length;Ve<Xe;++Ve)lo(pe[0],Fe[Ve][1])&&lo(pe[1],Fe[Ve][0])&&(Fe[Ve]=te),lo(pe[0],Fe[Ve][0])&&lo(pe[1],Fe[Ve][1])&&(Fe[Ve]=te);for(Ve=0,Xe=(Fe=te.edges).length;Ve<Xe;++Ve)lo(pe[0],Fe[Ve][0])&&lo(pe[1],Fe[Ve][1])&&(Fe[Ve]=le),lo(pe[0],Fe[Ve][1])&&lo(pe[1],Fe[Ve][0])&&(Fe[Ve]=le)}else te.transform=le.transform;var Ot,Yt,Je,ct,vt,_t,It,Ft;return te.children&&te.children.forEach(function(Ot){H(Ot,te)}),te})(rt,{transform:null}),ys(rt)&&(j.invert=function(H,te){var le=Y(rt,[H,-te]);return le&&(le[0]*=w,le[1]*=w,le)});var q=(0,S.c)(j),I=q.stream;return q.stream=function(H){var te=q.rotate(),le=I(H),pe=(q.rotate([0,0]),I(H));return q.rotate(te),le.sphere=function(){pe.polygonStart(),pe.lineStart(),cl(pe,rt),pe.lineEnd(),pe.polygonEnd()},le},q.angle(null==pt?-30:pt*C)}function cl(rt,st,pt){var j,Y,q=st.edges,I=q.length,H={type:"MultiPoint",coordinates:st.face},te=st.face.filter(function(Je){return 90!==k(Je[1])}),le=(0,kl.c)({type:"MultiPoint",coordinates:te}),pe=!1,ke=-1,Fe=le[1][0]-le[0][0],Ve=180===Fe||360===Fe?[(le[0][0]+le[1][0])/2,(le[0][1]+le[1][1])/2]:(0,Ke.c)(H);if(pt)for(;++ke<I&&q[ke]!==pt;);++ke;for(var Xe=0;Xe<I;++Xe)Y=q[(Xe+ke)%I],Array.isArray(Y)?(pe||(rt.point((j=(0,Lo.c)(Y[0],Ve)(u))[0],j[1]),pe=!0),rt.point((j=(0,Lo.c)(Y[1],Ve)(u))[0],j[1])):(pe=!1,Y!==pt&&cl(rt,Y,st))}function lo(rt,st){return rt&&st&&rt[0]===st[0]&&rt[1]===st[1]}function ys(rt){return rt.project.invert||rt.children&&rt.children.some(ys)}var Di=e(53285),Ui=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Vo=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(rt){return rt.map(function(st){return Ui[st]})});function ul(rt){rt=rt||function(pt){var j=(0,Ke.c)({type:"MultiPoint",coordinates:pt});return(0,Di.c)().scale(1).translate([0,0]).rotate([-j[0],-j[1]])};var st=Vo.map(function(pt){return{face:pt,project:rt(pt)}});return[-1,0,0,1,0,1,4,5].forEach(function(pt,j){var Y=st[pt];Y&&(Y.children||(Y.children=[])).push(st[j])}),qi(st[0],function(pt,j){return st[pt<-d/2?j<0?6:4:pt<0?j<0?2:0:pt<d/2?j<0?3:1:j<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var Hl=2/L(3);function cc(rt,st){var pt=Rt(rt,st);return[pt[0]*Hl,pt[1]]}function ql(rt){rt=rt||function(pt){var j=(0,Ke.c)({type:"MultiPoint",coordinates:pt});return(0,S.c)(cc).translate([0,0]).scale(1).rotate(j[1]>0?[-j[0],0]:[180-j[0],180])};var st=Vo.map(function(pt){return{face:pt,project:rt(pt)}});return[-1,0,0,1,0,1,4,5].forEach(function(pt,j){var Y=st[pt];Y&&(Y.children||(Y.children=[])).push(st[j])}),qi(st[0],function(pt,j){return st[pt<-d/2?j<0?6:4:pt<0?j<0?2:0:pt<d/2?j<0?3:1:j<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function Ic(rt){rt=rt||function(q){var I=6===q.length?(0,Ke.c)({type:"MultiPoint",coordinates:q}):q[0];return(0,Di.c)().scale(1).translate([0,0]).rotate([-I[0],-I[1]])};var st=Vo.map(function(q){for(var I,H=q.map(Ml),te=H.length,le=H[te-1],pe=[],ke=0;ke<te;++ke)pe.push(qs([.9486832980505138*le[0]+.31622776601683794*(I=H[ke])[0],.9486832980505138*le[1]+.31622776601683794*I[1],.9486832980505138*le[2]+.31622776601683794*I[2]]),qs([.9486832980505138*I[0]+.31622776601683794*le[0],.9486832980505138*I[1]+.31622776601683794*le[1],.9486832980505138*I[2]+.31622776601683794*le[2]])),le=I;return pe}),pt=[],j=[-1,0,0,1,0,1,4,5];st.forEach(function(q,I){for(var H,te,le=Vo[I],pe=le.length,ke=pt[I]=[],Fe=0;Fe<pe;++Fe)st.push([le[Fe],q[(2*Fe+2)%(2*pe)],q[(2*Fe+1)%(2*pe)]]),j.push(I),ke.push((H=Ml(q[(2*Fe+2)%(2*pe)]),te=Ml(q[(2*Fe+1)%(2*pe)]),[H[1]*te[2]-H[2]*te[1],H[2]*te[0]-H[0]*te[2],H[0]*te[1]-H[1]*te[0]]))});var Y=st.map(function(q){return{project:rt(q),face:q}});return j.forEach(function(q,I){var H=Y[q];H&&(H.children||(H.children=[])).push(Y[I])}),qi(Y[0],function(q,I){var H=b(I),te=[H*b(q),H*c(q),c(I)],le=q<-d/2?I<0?6:4:q<0?I<0?2:0:q<d/2?I<0?3:1:I<0?7:5,pe=pt[le];return Y[Go(pe[0],te)<0?8+3*le:Go(pe[1],te)<0?8+3*le+1:Go(pe[2],te)<0?8+3*le+2:le]}).angle(-30).scale(110.625).center([0,45])}function Go(rt,st){for(var pt=0,j=rt.length,Y=0;pt<j;++pt)Y+=rt[pt]*st[pt];return Y}function qs(rt){return[T(rt[1],rt[0])*C,E(i(-1,r(1,rt[2])))*C]}function Ml(rt){var st=rt[0]*w,pt=rt[1]*w,j=b(pt);return[j*b(st),j*c(st),c(pt)]}function yo(){}function Wl(rt,st){var pt,j=st.stream;if(!j)throw new Error("invalid projection");switch(rt&&rt.type){case"Feature":pt=Ka;break;case"FeatureCollection":pt=Ho;break;default:pt=eo}return pt(rt,j)}function Ho(rt,st){return{type:"FeatureCollection",features:rt.features.map(function(pt){return Ka(pt,st)})}}function Ka(rt,st){return{type:"Feature",id:rt.id,properties:rt.properties,geometry:eo(rt.geometry,st)}}function eo(rt,st){if(!rt)return null;if("GeometryCollection"===rt.type)return Y=st,{type:"GeometryCollection",geometries:rt.geometries.map(function(q){return eo(q,Y)})};var Y,pt;switch(rt.type){case"Point":case"MultiPoint":pt=Ws;break;case"LineString":case"MultiLineString":pt=Sl;break;case"Polygon":case"MultiPolygon":case"Sphere":pt=co;break;default:return null}return(0,yn.c)(rt,st(pt)),pt.result()}cc.invert=function(rt,st){return Rt.invert(rt/Hl,st)};var Wi=[],Ha=[],Ws={point:function(rt,st){Wi.push([rt,st])},result:function(){var rt=Wi.length?Wi.length<2?{type:"Point",coordinates:Wi[0]}:{type:"MultiPoint",coordinates:Wi}:null;return Wi=[],rt}},Sl={lineStart:yo,point:function(rt,st){Wi.push([rt,st])},lineEnd:function(){Wi.length&&(Ha.push(Wi),Wi=[])},result:function(){var rt=Ha.length?Ha.length<2?{type:"LineString",coordinates:Ha[0]}:{type:"MultiLineString",coordinates:Ha}:null;return Ha=[],rt}},co={polygonStart:yo,lineStart:yo,point:function(rt,st){Wi.push([rt,st])},lineEnd:function(){var rt=Wi.length;if(rt){do{Wi.push(Wi[0].slice())}while(++rt<4);Ha.push(Wi),Wi=[]}},polygonEnd:yo,result:function(){if(!Ha.length)return null;var rt=[],st=[];return Ha.forEach(function(pt){!function(j){if((Y=j.length)<4)return!1;for(var Y,q=0,I=j[Y-1][1]*j[0][0]-j[Y-1][0]*j[0][1];++q<Y;)I+=j[q-1][1]*j[q][0]-j[q-1][0]*j[q][1];return I<=0}(pt)?st.push(pt):rt.push([pt])}),st.forEach(function(pt){var j=pt[0];rt.some(function(Y){if(function(q,I){for(var H=I[0],te=I[1],le=!1,pe=0,ke=q.length,Fe=ke-1;pe<ke;Fe=pe++){var Ve=q[pe],Xe=Ve[0],Je=Ve[1],ct=q[Fe],_t=ct[1];Je>te^_t>te&&H<(ct[0]-Xe)*(te-Je)/(_t-Je)+Xe&&(le=!le)}return le}(Y[0],j))return Y.push(pt),!0})||rt.push([pt])}),Ha=[],rt.length?rt.length>1?{type:"MultiPolygon",coordinates:rt}:{type:"Polygon",coordinates:rt[0]}:null}};function hl(rt){var st=rt(m,0)[0]-rt(-m,0)[0];function pt(j,Y){var q=k(j)<m,I=rt(q?j:j>0?j-d:j+d,Y),H=(I[0]-I[1])*x,te=(I[0]+I[1])*x;if(q)return[H,te];var le=st*x,pe=H>0^te>0?-1:1;return[pe*H-s(te)*le,pe*te-s(H)*le]}return rt.invert&&(pt.invert=function(j,Y){var q=(j+Y)*x,I=(Y-j)*x,H=k(q)<.5*st&&k(I)<.5*st;if(!H){var te=st*x,le=q>0^I>0?-1:1,pe=-le*j+(I>0?1:-1)*te,ke=-le*Y+(q>0?1:-1)*te;q=(-pe-ke)*x,I=(pe-ke)*x}var Fe=rt.invert(q,I);return H||(Fe[0]+=q>0?d:-d),Fe}),(0,S.c)(pt).rotate([-90,-90,45]).clipAngle(179.999)}function uo(){return hl(tr).scale(176.423)}function Yl(){return hl(In).scale(111.48)}function Po(rt,st){if(!(0<=(st=+st)&&st<=20))throw new Error("invalid digits");function pt(le){var pe=le.length,ke=2,Fe=new Array(pe);for(Fe[0]=+le[0].toFixed(st),Fe[1]=+le[1].toFixed(st);ke<pe;)Fe[ke]=le[ke],++ke;return Fe}function j(le){return le.map(pt)}function Y(le){for(var pe=pt(le[0]),ke=[pe],Fe=1;Fe<le.length;Fe++){var Ve=pt(le[Fe]);(Ve.length>2||Ve[0]!=pe[0]||Ve[1]!=pe[1])&&(ke.push(Ve),pe=Ve)}return 1===ke.length&&le.length>1&&ke.push(pt(le[le.length-1])),ke}function q(le){return le.map(Y)}function I(le){if(null==le)return le;var pe;switch(le.type){case"GeometryCollection":pe={type:"GeometryCollection",geometries:le.geometries.map(I)};break;case"Point":pe={type:"Point",coordinates:pt(le.coordinates)};break;case"MultiPoint":pe={type:le.type,coordinates:j(le.coordinates)};break;case"LineString":pe={type:le.type,coordinates:Y(le.coordinates)};break;case"MultiLineString":case"Polygon":pe={type:le.type,coordinates:q(le.coordinates)};break;case"MultiPolygon":pe={type:"MultiPolygon",coordinates:le.coordinates.map(q)};break;default:return le}return null!=le.bbox&&(pe.bbox=le.bbox),pe}function H(le){var pe={type:"Feature",properties:le.properties,geometry:I(le.geometry)};return null!=le.id&&(pe.id=le.id),null!=le.bbox&&(pe.bbox=le.bbox),pe}if(null!=rt)switch(rt.type){case"Feature":return H(rt);case"FeatureCollection":var te={type:"FeatureCollection",features:rt.features.map(H)};return null!=rt.bbox&&(te.bbox=rt.bbox),te;default:return I(rt)}return rt}function ko(rt){var st=c(rt);function pt(j,Y){var q=st?h(j*st/2)/st:j/2;if(!Y)return[2*q,-rt];var I=2*o(q*c(Y)),H=1/h(Y);return[c(I)*H,Y+(1-b(I))*H-rt]}return pt.invert=function(j,Y){if(k(Y+=rt)<u)return[st?2*o(st*j/2)/st:j,0];var q,I=j*j+Y*Y,H=0,te=10;do{var le=h(H),pe=1/b(H),ke=I-2*Y*H+H*H;H-=q=(le*ke+2*(H-Y))/(2+ke*pe*pe+2*(H-Y)*le)}while(k(q)>u&&--te>0);var Fe=j*(le=h(H)),Ve=h(k(Y)<k(H+1/le)?.5*E(Fe):.5*P(Fe)+d/4)/c(H);return[st?2*o(st*Ve)/st:2*Ve,H]},pt}function qo(){return Oe(ko).scale(131.215)}var na=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function ns(rt,st){var pt,j=r(18,36*k(st)/d),Y=l(j),q=j-Y,I=(pt=na[Y])[0],H=pt[1],te=(pt=na[++Y])[0],le=pt[1],pe=(pt=na[r(19,++Y)])[0],ke=pt[1];return[rt*(te+q*(pe-I)/2+q*q*(pe-2*te+I)/2),(st>0?m:-m)*(le+q*(ke-H)/2+q*q*(ke-2*le+H)/2)]}function $r(){return(0,S.c)(ns).scale(152.63)}function fl(rt,st){var pt=function(I){function H(te,le){var pe=b(le),ke=(I-1)/(I-pe*b(te));return[ke*pe*c(te),ke*c(le)]}return H.invert=function(te,le){var pe=te*te+le*le,ke=L(pe),Fe=(I-L(1-pe*(I+1)/(I-1)))/((I-1)/ke+ke/(I-1));return[T(te*Fe,ke*L(1-Fe*Fe)),ke?E(le*Fe/ke):0]},H}(rt);if(!st)return pt;var j=b(st),Y=c(st);function q(I,H){var te=pt(I,H),le=te[1],pe=le*Y/(rt-1)+j;return[te[0]*j/pe,le/pe]}return q.invert=function(I,H){var te=(rt-1)/(rt-1-H*Y);return pt.invert(te*I,te*H*j)},q}function Lc(){var rt=2,st=0,pt=(0,S.U)(fl),j=pt(rt,st);return j.distance=function(Y){return arguments.length?pt(rt=+Y,st):rt},j.tilt=function(Y){return arguments.length?pt(rt,st=Y*w):st*C},j.scale(432.147).clipAngle(P(1/rt)*C-1e-6)}na.forEach(function(rt){rt[1]*=1.0144}),ns.invert=function(rt,st){var pt=st/m,j=90*pt,Y=r(18,k(j/5)),q=i(0,l(Y));do{var I=na[q][1],H=na[q+1][1],te=na[r(19,q+2)][1],le=te-I,pe=te-2*H+I,ke=2*(k(pt)-H)/le,Fe=pe/le,Ve=ke*(1-Fe*ke*(1-2*Fe*ke));if(Ve>=0||1===q){j=(st>=0?5:-5)*(Ve+Y);var Xe,Je=50;do{Ve=(Y=r(18,k(j)/5))-(q=l(Y)),I=na[q][1],H=na[q+1][1],te=na[r(19,q+2)][1],j-=(Xe=(st>=0?m:-m)*(H+Ve*(te-I)/2+Ve*Ve*(te-2*H+I)/2)-st)*C}while(k(Xe)>y&&--Je>0);break}}while(--q>=0);var ct=na[q][0],vt=na[q+1][0],_t=na[r(19,q+2)][0];return[rt/(vt+Ve*(_t-ct)/2+Ve*Ve*(_t-2*vt+ct)/2),j*w]};var Rs=1e-4,Ds=1e4,Cl=-180,rs=Cl+Rs,Br=180,Pc=Br-Rs,xs=-90,qa=xs+Rs,dl=90,Wo=dl-Rs;function _s(rt){return rt.length>0}function ho(rt){return rt===xs||rt===dl?[0,rt]:[Cl,(st=rt,Math.floor(st*Ds)/Ds)];var st}function bs(rt){var st=rt[0],pt=rt[1],j=!1;return st<=rs?(st=Cl,j=!0):st>=Pc&&(st=Br,j=!0),pt<=qa?(pt=xs,j=!0):pt>=Wo&&(pt=dl,j=!0),j?[st,pt]:rt}function ws(rt){return rt.map(bs)}function Ys(rt,st,pt){for(var j=0,Y=rt.length;j<Y;++j){var q=rt[j].slice();pt.push({index:-1,polygon:st,ring:q});for(var I=0,H=q.length;I<H;++I){var te=q[I],le=te[0],pe=te[1];if(le<=rs||le>=Pc||pe<=qa||pe>=Wo){q[I]=bs(te);for(var ke=I+1;ke<H;++ke){var Fe=q[ke],Ve=Fe[0],Xe=Fe[1];if(Ve>rs&&Ve<Pc&&Xe>qa&&Xe<Wo)break}if(ke===I+1)continue;if(I){var Je={index:-1,polygon:st,ring:q.slice(0,I+1)};Je.ring[Je.ring.length-1]=ho(pe),pt[pt.length-1]=Je}else pt.pop();if(ke>=H)break;pt.push({index:-1,polygon:st,ring:q=q.slice(ke-1)}),q[0]=ho(q[0][1]),I=-1,H=q.length}}}}function El(rt){var st,pt,j,Y,q,I,H=rt.length,te={},le={};for(st=0;st<H;++st)(j=(pt=rt[st]).ring[0])[0]!==(q=pt.ring[pt.ring.length-1])[0]||j[1]!==q[1]?(pt.index=st,te[j]=le[q]=pt):(pt.polygon.push(pt.ring),rt[st]=null);for(st=0;st<H;++st)if(pt=rt[st]){if(Y=le[j=pt.ring[0]],I=te[q=pt.ring[pt.ring.length-1]],delete te[j],delete le[q],j[0]===q[0]&&j[1]===q[1]){pt.polygon.push(pt.ring);continue}Y?(delete le[j],delete te[Y.ring[0]],Y.ring.pop(),rt[Y.index]=null,pt={index:-1,polygon:Y.polygon,ring:Y.ring.concat(pt.ring)},Y===I?pt.polygon.push(pt.ring):(pt.index=H++,rt.push(te[pt.ring[0]]=le[pt.ring[pt.ring.length-1]]=pt))):I?(delete te[q],delete le[I.ring[I.ring.length-1]],pt.ring.pop(),pt={index:H++,polygon:I.polygon,ring:pt.ring.concat(I.ring)},rt[I.index]=null,rt.push(te[pt.ring[0]]=le[pt.ring[pt.ring.length-1]]=pt)):(pt.ring.push(pt.ring[0]),pt.polygon.push(pt.ring))}}function Zs(rt){var st={type:"Feature",geometry:zi(rt.geometry)};return null!=rt.id&&(st.id=rt.id),null!=rt.bbox&&(st.bbox=rt.bbox),null!=rt.properties&&(st.properties=rt.properties),st}function zi(rt){if(null==rt)return rt;var st,pt,j,Y;switch(rt.type){case"GeometryCollection":st={type:"GeometryCollection",geometries:rt.geometries.map(zi)};break;case"Point":st={type:"Point",coordinates:bs(rt.coordinates)};break;case"MultiPoint":case"LineString":st={type:rt.type,coordinates:ws(rt.coordinates)};break;case"MultiLineString":st={type:"MultiLineString",coordinates:rt.coordinates.map(ws)};break;case"Polygon":var q=[];Ys(rt.coordinates,q,pt=[]),El(pt),st={type:"Polygon",coordinates:q};break;case"MultiPolygon":pt=[],j=-1,Y=rt.coordinates.length;for(var I=new Array(Y);++j<Y;)Ys(rt.coordinates[j],I[j]=[],pt);El(pt),st={type:"MultiPolygon",coordinates:I.filter(_s)};break;default:return rt}return null!=rt.bbox&&(st.bbox=rt.bbox),st}function ja(rt){if(null==rt)return rt;switch(rt.type){case"Feature":return Zs(rt);case"FeatureCollection":var st={type:"FeatureCollection",features:rt.features.map(Zs)};return null!=rt.bbox&&(st.bbox=rt.bbox),st;default:return zi(rt)}}function Oo(rt,st){var pt=h(st/2),j=c(g*pt);return[rt*(.74482-.34588*j*j),1.70711*pt]}function zs(){return(0,S.c)(Oo).scale(146.153)}function Ua(rt,st,pt){var j=(0,Lo.c)(st,pt),Y=j(.5),q=(0,it.c)([-Y[0],-Y[1]])(st),I=j.distance/2,H=-E(c(q[1]*w)/c(I)),te=[-Y[0],-Y[1],-(q[0]>0?d-H:H)*C],le=(0,S.c)(rt(I)).rotate(te),pe=(0,it.c)(te),ke=le.center;return delete le.rotate,le.center=function(Fe){return arguments.length?ke(pe(Fe)):pe.invert(ke())},le.clipAngle(90)}function Zl(rt){var st=b(rt);function pt(j,Y){var q=(0,Di.Y)(j,Y);return q[0]*=st,q}return pt.invert=function(j,Y){return Di.Y.invert(j/st,Y)},pt}function uc(){return xo([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function xo(rt,st){return Ua(Zl,rt,st)}function Ii(rt){if(!(rt*=2))return X.O;var st=-rt/2,pt=-st,j=rt*rt,Y=h(pt),q=.5/c(pt);function I(H,te){var le=P(b(te)*b(H-st)),pe=P(b(te)*b(H-pt));return[((le*=le)-(pe*=pe))/(2*rt),(te<0?-1:1)*L(4*j*pe-(j-le+pe)*(j-le+pe))/(2*rt)]}return I.invert=function(H,te){var le,pe,ke=te*te,Fe=b(L(ke+(le=H+st)*le)),Ve=b(L(ke+(le=H+pt)*le));return[T(pe=Fe-Ve,le=(Fe+Ve)*Y),(te<0?-1:1)*P(L(le*le+pe*pe)*q)]},I}function Fs(){return Xs([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function Xs(rt,st){return Ua(Ii,rt,st)}function Ts(rt,st){if(k(st)<u)return[rt,0];var pt=k(st/m),j=E(pt);if(k(rt)<u||k(k(st)-m)<u)return[0,s(st)*d*h(j/2)];var Y=b(j),q=k(d/rt-rt/d)/2,I=q*q,H=Y/(pt+Y-1),te=H*(2/pt-1),le=te*te,pe=le+I,ke=H-le,Fe=I+H;return[s(rt)*d*(q*ke+L(I*ke*ke-pe*(H*H-le)))/pe,s(st)*d*(te*Fe-q*L((I+1)*pe-Fe*Fe))/pe]}function Ks(){return(0,S.c)(Ts).scale(79.4183)}function Xl(rt,st){if(k(st)<u)return[rt,0];var pt=k(st/m),j=E(pt);if(k(rt)<u||k(k(st)-m)<u)return[0,s(st)*d*h(j/2)];var Y=b(j),q=k(d/rt-rt/d)/2,I=q*q,H=Y*(L(1+I)-q*Y)/(1+I*pt*pt);return[s(rt)*d*H,s(st)*d*L(1-H*(2*q+H))]}function As(){return(0,S.c)(Xl).scale(79.4183)}function la(rt,st){if(k(st)<u)return[rt,0];var pt=st/m,j=E(pt);if(k(rt)<u||k(k(st)-m)<u)return[0,d*h(j/2)];var Y=(d/rt-rt/d)/2,q=pt/(1+b(j));return[d*(s(rt)*L(Y*Y+1-q*q)-Y),d*q]}function Il(){return(0,S.c)(la).scale(79.4183)}function Xr(rt,st){if(!st)return[rt,0];var pt=k(st);if(!rt||pt===m)return[0,st];var j=pt/m,Y=j*j,q=(8*j-Y*(Y+2)-5)/(2*Y*(j-1)),I=q*q,H=j*q,te=Y+I+2*H,le=j+3*q,pe=rt/m,ke=pe+1/pe,Fe=s(k(rt)-m)*L(ke*ke-4),Ve=Fe*Fe,Xe=(Fe*(te+I-1)+2*L(te*(Y+I*Ve-1)+(1-Y)*(Y*(le*le+4*I)+12*H*I+4*I*I)))/(4*te+Ve);return[s(rt)*m*Xe,s(st)*m*L(1+Fe*k(Xe)-Xe*Xe)]}function ti(){return(0,S.c)(Xr).scale(127.16)}function Yo(rt,st,pt,j){var Y=d/3;rt=i(rt,u),st=i(st,u),rt=r(rt,m),st=r(st,d-u),pt=i(pt,0),pt=r(pt,100-u);var q=(j=i(j,u))/100,I=P((pt/100+1)*b(Y))/Y,H=c(rt)/c(I*m),te=st/d,le=L(q*c(rt/2)/c(st/2));return function(pe,ke,Fe,Ve,Xe){function Je(ct,vt){var _t=Fe*c(Ve*vt),It=L(1-_t*_t),Ft=L(2/(1+It*b(ct*=Xe)));return[pe*It*Ft*c(ct),ke*_t*Ft]}return Je.invert=function(ct,vt){var _t=ct/pe,It=vt/ke,Ft=L(_t*_t+It*It),Ot=2*E(Ft/2);return[T(ct*h(Ot),pe*Ft)/Xe,Ft&&E(vt*c(Ot)/(ke*Fe*Ft))/Ve]},Je}(le/L(te*H*I),1/(le*L(te*H*I)),H,I,te)}function is(){var rt=65*w,st=60*w,pt=20,j=200,Y=(0,S.U)(Yo),q=Y(rt,st,pt,j);return q.poleline=function(I){return arguments.length?Y(rt=+I*w,st,pt,j):rt*C},q.parallels=function(I){return arguments.length?Y(rt,st=+I*w,pt,j):st*C},q.inflation=function(I){return arguments.length?Y(rt,st,pt=+I,j):pt},q.ratio=function(I){return arguments.length?Y(rt,st,pt,j=+I):j},q.scale(163.775)}function as(){return is().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}Oo.invert=function(rt,st){var pt=st/1.70711,j=c(g*pt);return[rt/(.74482-.34588*j*j),2*o(pt)]},Ts.invert=function(rt,st){if(k(st)<u)return[rt,0];if(k(rt)<u)return[0,m*c(2*o(st/d))];var pt=(rt/=d)*rt,j=(st/=d)*st,Y=pt+j,q=Y*Y,I=-k(st)*(1+Y),H=I-2*j+pt,te=-2*I+1+2*j+q,le=j/te+(2*H*H*H/(te*te*te)-9*I*H/(te*te))/27,pe=(I-H*H/(3*te))/te,ke=2*L(-pe/3),Fe=P(3*le/(pe*ke))/3;return[d*(Y-1+L(1+2*(pt-j)+q))/(2*rt),s(st)*d*(-ke*b(Fe+d/3)-H/(3*te))]},Xl.invert=function(rt,st){if(!rt)return[0,m*c(2*o(st/d))];var pt=k(rt/d),j=(1-pt*pt-(st/=d)*st)/(2*pt),Y=L(j*j+1);return[s(rt)*d*(Y-j),s(st)*m*c(2*T(L((1-2*j*pt)*(j+Y)-pt),L(Y+j+pt)))]},la.invert=function(rt,st){if(!st)return[rt,0];var pt=st/d,j=(d*d*(1-pt*pt)-rt*rt)/(2*d*rt);return[rt?d*(s(rt)*L(j*j+1)-j):0,m*c(2*o(pt))]},Xr.invert=function(rt,st){var pt;if(!rt||!st)return[rt,st];st/=d;var j=s(rt)*rt/m,Y=(j*j-1+4*st*st)/k(j),q=Y*Y,I=2*st,H=50;do{var te=I*I,le=(8*I-te*(te+2)-5)/(2*te*(I-1)),pe=(3*I-te*I-10)/(2*te*I),ke=le*le,Fe=I*le,Ve=I+le,Xe=Ve*Ve,Je=I+3*le,ct=-2*Ve*(4*Fe*ke+(1-4*te+3*te*te)*(1+pe)+ke*(14*te-6-q+(8*te-8-2*q)*pe)+Fe*(12*te-8+(10*te-10-q)*pe)),vt=L(Xe*(te+ke*q-1)+(1-te)*(te*(Je*Je+4*ke)+ke*(12*Fe+4*ke)));I-=pt=(Y*(Xe+ke-1)+2*vt-j*(4*Xe+q))/(Y*(2*le*pe+2*Ve*(1+pe))+ct/vt-8*Ve*(Y*(-1+ke+Xe)+2*vt)*(1+pe)/(q+4*Xe))}while(pt>u&&--H>0);return[s(rt)*(L(Y*Y+4)+Y)*d/4,m*I]};var La=4*d+3*L(3),gi=2*L(2*d*L(3)/La),ta=be(gi*L(3)/d,gi,La/6);function eu(){return(0,S.c)(ta).scale(176.84)}function Zo(rt,st){return[rt*L(1-3*st*st/(d*d)),st]}function wi(){return(0,S.c)(Zo).scale(152.63)}function ra(rt,st){var pt=b(st),j=b(rt)*pt,Y=1-j,q=b(rt=T(c(rt)*pt,-c(st))),I=c(rt);return[I*(pt=L(1-j*j))-q*Y,-q*pt-I*Y]}function Mo(){return(0,S.c)(ra).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function os(rt,st){var pt=U(rt,st);return[(pt[0]+rt/m)/2,(pt[1]+st)/2]}function Js(){return(0,S.c)(os).scale(158.837)}Zo.invert=function(rt,st){return[rt/L(1-3*st*st/(d*d)),st]},ra.invert=function(rt,st){var pt=(rt*rt+st*st)/-2,j=L(-pt*(2+pt)),Y=st*pt+rt*j,q=rt*pt-st*j,I=L(q*q+Y*Y);return[T(j*Y,I*(1+pt)),I?-E(j*q/I):0]},os.invert=function(rt,st){var pt=rt,j=st,Y=25;do{var q,I=b(j),H=c(j),te=c(2*j),le=H*H,pe=I*I,ke=c(pt),Fe=b(pt/2),Ve=c(pt/2),Xe=Ve*Ve,Je=1-pe*Fe*Fe,ct=Je?P(I*Fe)*L(q=1/Je):q=0,vt=.5*(2*ct*I*Ve+pt/m)-rt,_t=.5*(ct*H+j)-st,It=.5*q*(pe*Xe+ct*I*Fe*le)+.5/m,Ft=q*(ke*te/4-ct*H*Ve),Ot=.125*q*(te*Ve-ct*H*pe*ke),Yt=.5*q*(le*Fe+ct*Xe*I)+.5,jt=Ft*Ot-Yt*It,ln=(_t*Ft-vt*Yt)/jt,tn=(vt*Ot-_t*It)/jt;pt-=ln,j-=tn}while((k(ln)>u||k(tn)>u)&&--Y>0);return[pt,j]}},88728:function(ie,F,e){"use strict";function S(){return new k}function k(){this.reset()}e.d(F,{c:function(){return S}}),k.prototype={constructor:k,reset:function(){this.s=this.t=0},add:function(b){T(o,b,this.t),T(this,o.s,this.s),this.s?this.t+=o.t:this.s=o.t},valueOf:function(){return this.s}};var o=new k;function T(b,p,l){var t=b.s=p+l,i=t-p;b.t=p-(t-i)+(l-i)}},95384:function(ie,F,e){"use strict";e.d(F,{cp:function(){return y},mQ:function(){return r},oB:function(){return a}});var S,k,o,T,b,p=e(88728),l=e(64528),t=e(70932),i=e(16016),r=(0,p.c)(),n=(0,p.c)(),a={point:t.c,lineStart:t.c,lineEnd:t.c,polygonStart:function(){r.reset(),a.lineStart=s,a.lineEnd=c},polygonEnd:function(){var d=+r;n.add(d<0?l.kD+d:d),this.lineStart=this.lineEnd=this.point=t.c},sphere:function(){n.add(l.kD)}};function s(){a.point=h}function c(){u(S,k)}function h(d,m){a.point=u,S=d,k=m,o=d*=l.qw,T=(0,l.W8)(m=(m*=l.qw)/2+l.wL),b=(0,l.g$)(m)}function u(d,m){m=(m*=l.qw)/2+l.wL;var g=(d*=l.qw)-o,x=g>=0?1:-1,v=x*g,_=(0,l.W8)(m),f=(0,l.g$)(m),C=b*f,w=T*_+C*(0,l.W8)(v),E=C*x*(0,l.g$)(v);r.add((0,l.WE)(E,w)),o=d,T=_,b=f}function y(d){return n.reset(),(0,i.c)(d,a),2*n}},13696:function(ie,F,e){"use strict";e.d(F,{c:function(){return P}});var S,k,o,T,b,p,l,t,i,r,n=e(88728),a=e(95384),s=e(84220),c=e(64528),h=e(16016),u=(0,n.c)(),y={point:d,lineStart:g,lineEnd:x,polygonStart:function(){y.point=v,y.lineStart=_,y.lineEnd=f,u.reset(),a.oB.polygonStart()},polygonEnd:function(){a.oB.polygonEnd(),y.point=d,y.lineStart=g,y.lineEnd=x,a.mQ<0?(S=-(o=180),k=-(T=90)):u>c.Gg?T=90:u<-c.Gg&&(k=-90),r[0]=S,r[1]=o},sphere:function(){S=-(o=180),k=-(T=90)}};function d(L,O){i.push(r=[S=L,o=L]),O<k&&(k=O),O>T&&(T=O)}function m(L,O){var z=(0,s.ux)([L*c.qw,O*c.qw]);if(t){var V=(0,s.CW)(t,z),U=(0,s.CW)([V[1],-V[0],0],V);(0,s.cJ)(U),U=(0,s.G)(U);var Z,N=L-b,G=N>0?1:-1,W=U[0]*c.oh*G,ae=(0,c.a2)(N)>180;ae^(G*b<W&&W<G*L)?(Z=U[1]*c.oh)>T&&(T=Z):ae^(G*b<(W=(W+360)%360-180)&&W<G*L)?(Z=-U[1]*c.oh)<k&&(k=Z):(O<k&&(k=O),O>T&&(T=O)),ae?L<b?C(S,L)>C(S,o)&&(o=L):C(L,o)>C(S,o)&&(S=L):o>=S?(L<S&&(S=L),L>o&&(o=L)):L>b?C(S,L)>C(S,o)&&(o=L):C(L,o)>C(S,o)&&(S=L)}else i.push(r=[S=L,o=L]);O<k&&(k=O),O>T&&(T=O),t=z,b=L}function g(){y.point=m}function x(){r[0]=S,r[1]=o,y.point=d,t=null}function v(L,O){if(t){var z=L-b;u.add((0,c.a2)(z)>180?z+(z>0?360:-360):z)}else p=L,l=O;a.oB.point(L,O),m(L,O)}function _(){a.oB.lineStart()}function f(){v(p,l),a.oB.lineEnd(),(0,c.a2)(u)>c.Gg&&(S=-(o=180)),r[0]=S,r[1]=o,t=null}function C(L,O){return(O-=L)<0?O+360:O}function w(L,O){return L[0]-O[0]}function E(L,O){return L[0]<=L[1]?L[0]<=O&&O<=L[1]:O<L[0]||L[1]<O}function P(L){var O,z,V,R,U,Z,N;if(T=o=-(S=k=1/0),i=[],(0,h.c)(L,y),z=i.length){for(i.sort(w),O=1,U=[V=i[0]];O<z;++O)E(V,(R=i[O])[0])||E(V,R[1])?(C(V[0],R[1])>C(V[0],V[1])&&(V[1]=R[1]),C(R[0],V[1])>C(V[0],V[1])&&(V[0]=R[0])):U.push(V=R);for(Z=-1/0,O=0,V=U[z=U.length-1];O<=z;V=R,++O)(N=C(V[1],(R=U[O])[0]))>Z&&(Z=N,S=R[0],o=V[1])}return i=r=null,S===1/0||k===1/0?[[NaN,NaN],[NaN,NaN]]:[[S,k],[o,T]]}},84220:function(ie,F,e){"use strict";e.d(F,{CW:function(){return b},Ez:function(){return T},G:function(){return k},cJ:function(){return t},mg:function(){return p},ux:function(){return o},wx:function(){return l}});var S=e(64528);function k(i){return[(0,S.WE)(i[1],i[0]),(0,S.qR)(i[2])]}function o(i){var r=i[0],n=i[1],a=(0,S.W8)(n);return[a*(0,S.W8)(r),a*(0,S.g$)(r),(0,S.g$)(n)]}function T(i,r){return i[0]*r[0]+i[1]*r[1]+i[2]*r[2]}function b(i,r){return[i[1]*r[2]-i[2]*r[1],i[2]*r[0]-i[0]*r[2],i[0]*r[1]-i[1]*r[0]]}function p(i,r){i[0]+=r[0],i[1]+=r[1],i[2]+=r[2]}function l(i,r){return[i[0]*r,i[1]*r,i[2]*r]}function t(i){var r=(0,S._I)(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);i[0]/=r,i[1]/=r,i[2]/=r}},24052:function(ie,F,e){"use strict";e.d(F,{c:function(){return z}});var S,k,o,T,b,p,l,t,i,r,n,a,s,c,h,u,y=e(64528),d=e(70932),m=e(16016),g={sphere:d.c,point:x,lineStart:_,lineEnd:w,polygonStart:function(){g.lineStart=E,g.lineEnd=P},polygonEnd:function(){g.lineStart=_,g.lineEnd=w}};function x(V,R){V*=y.qw;var U=(0,y.W8)(R*=y.qw);v(U*(0,y.W8)(V),U*(0,y.g$)(V),(0,y.g$)(R))}function v(V,R,U){++S,o+=(V-o)/S,T+=(R-T)/S,b+=(U-b)/S}function _(){g.point=f}function f(V,R){V*=y.qw;var U=(0,y.W8)(R*=y.qw);c=U*(0,y.W8)(V),h=U*(0,y.g$)(V),u=(0,y.g$)(R),g.point=C,v(c,h,u)}function C(V,R){V*=y.qw;var U=(0,y.W8)(R*=y.qw),Z=U*(0,y.W8)(V),N=U*(0,y.g$)(V),G=(0,y.g$)(R),W=(0,y.WE)((0,y._I)((W=h*G-u*N)*W+(W=u*Z-c*G)*W+(W=c*N-h*Z)*W),c*Z+h*N+u*G);k+=W,p+=W*(c+(c=Z)),l+=W*(h+(h=N)),t+=W*(u+(u=G)),v(c,h,u)}function w(){g.point=x}function E(){g.point=L}function P(){O(a,s),g.point=x}function L(V,R){a=V,s=R,V*=y.qw,R*=y.qw,g.point=O;var U=(0,y.W8)(R);c=U*(0,y.W8)(V),h=U*(0,y.g$)(V),u=(0,y.g$)(R),v(c,h,u)}function O(V,R){V*=y.qw;var U=(0,y.W8)(R*=y.qw),Z=U*(0,y.W8)(V),N=U*(0,y.g$)(V),G=(0,y.g$)(R),W=h*G-u*N,ae=u*Z-c*G,re=c*N-h*Z,ne=(0,y._I)(W*W+ae*ae+re*re),Q=(0,y.qR)(ne),$=ne&&-Q/ne;i+=$*W,r+=$*ae,n+=$*re,k+=Q,p+=Q*(c+(c=Z)),l+=Q*(h+(h=N)),t+=Q*(u+(u=G)),v(c,h,u)}function z(V){S=k=o=T=b=p=l=t=i=r=n=0,(0,m.c)(V,g);var R=i,U=r,Z=n,N=R*R+U*U+Z*Z;return N<y.a8&&(R=p,U=l,Z=t,k<y.Gg&&(R=o,U=T,Z=b),(N=R*R+U*U+Z*Z)<y.a8)?[NaN,NaN]:[(0,y.WE)(U,R)*y.oh,(0,y.qR)(Z/(0,y._I)(N))*y.oh]}},61780:function(ie,F,e){"use strict";e.d(F,{Q:function(){return b},c:function(){return l}});var S=e(84220);function k(t){return function(){return t}}var o=e(64528),T=e(92992);function b(t,i,r,n,a,s){if(r){var c=(0,o.W8)(i),h=(0,o.g$)(i),u=n*r;null==a?(a=i+n*o.kD,s=i-u/2):(a=p(c,a),s=p(c,s),(n>0?a<s:a>s)&&(a+=n*o.kD));for(var y,d=a;n>0?d>s:d<s;d-=u)y=(0,S.G)([c,-h*(0,o.W8)(d),-h*(0,o.g$)(d)]),t.point(y[0],y[1])}}function p(t,i){(i=(0,S.ux)(i))[0]-=t,(0,S.cJ)(i);var r=(0,o.mE)(-i[1]);return((-i[2]<0?-r:r)+o.kD-o.Gg)%o.kD}function l(){var t,i,r=k([0,0]),n=k(90),a=k(6),s={point:function(h,u){t.push(h=i(h,u)),h[0]*=o.oh,h[1]*=o.oh}};function c(){var h=r.apply(this,arguments),u=n.apply(this,arguments)*o.qw,y=a.apply(this,arguments)*o.qw;return t=[],i=(0,T.O)(-h[0]*o.qw,-h[1]*o.qw,0).invert,b(s,u,y,1),h={type:"Polygon",coordinates:[t]},t=i=null,h}return c.center=function(h){return arguments.length?(r="function"==typeof h?h:k([+h[0],+h[1]]),c):r},c.radius=function(h){return arguments.length?(n="function"==typeof h?h:k(+h),c):n},c.precision=function(h){return arguments.length?(a="function"==typeof h?h:k(+h),c):a},c}},78284:function(ie,F,e){"use strict";var S=e(14229),k=e(64528);F.c=(0,S.c)(function(){return!0},function(o){var T,b=NaN,p=NaN,l=NaN;return{lineStart:function(){o.lineStart(),T=1},point:function(t,i){var a,s,c,h,u,y,d,r=t>0?k.pi:-k.pi,n=(0,k.a2)(t-b);(0,k.a2)(n-k.pi)<k.Gg?(o.point(b,p=(p+i)/2>0?k.or:-k.or),o.point(l,p),o.lineEnd(),o.lineStart(),o.point(r,p),o.point(t,p),T=0):l!==r&&n>=k.pi&&((0,k.a2)(b-l)<k.Gg&&(b-=l*k.Gg),(0,k.a2)(t-r)<k.Gg&&(t-=r*k.Gg),s=p,h=i,d=(0,k.g$)((a=b)-(c=t)),p=(0,k.a2)(d)>k.Gg?(0,k.MQ)(((0,k.g$)(s)*(y=(0,k.W8)(h))*(0,k.g$)(c)-(0,k.g$)(h)*(u=(0,k.W8)(s))*(0,k.g$)(a))/(u*y*d)):(s+h)/2,o.point(l,p),o.lineEnd(),o.lineStart(),o.point(r,p),T=0),o.point(b=t,p=i),l=r},lineEnd:function(){o.lineEnd(),b=p=NaN},clean:function(){return 2-T}}},function(o,T,b,p){var l;if(null==o)p.point(-k.pi,l=b*k.or),p.point(0,l),p.point(k.pi,l),p.point(k.pi,0),p.point(k.pi,-l),p.point(0,-l),p.point(-k.pi,-l),p.point(-k.pi,0),p.point(-k.pi,l);else if((0,k.a2)(o[0]-T[0])>k.Gg){var t=o[0]<T[0]?k.pi:-k.pi;p.point(-t,l=b*t/2),p.point(0,l),p.point(t,l)}else p.point(T[0],T[1])},[-k.pi,-k.or])},97208:function(ie,F,e){"use strict";e.d(F,{c:function(){return k}});var S=e(70932);function k(){var o,T=[];return{point:function(b,p,l){o.push([b,p,l])},lineStart:function(){T.push(o=[])},lineEnd:S.c,rejoin:function(){T.length>1&&T.push(T.pop().concat(T.shift()))},result:function(){var b=T;return T=[],o=null,b}}}},2728:function(ie,F,e){"use strict";e.d(F,{c:function(){return p}});var S=e(84220),k=e(61780),o=e(64528),T=e(41860),b=e(14229);function p(l){var t=(0,o.W8)(l),i=6*o.qw,r=t>0,n=(0,o.a2)(t)>o.Gg;function a(h,u){return(0,o.W8)(h)*(0,o.W8)(u)>t}function s(h,u,y){var d=(0,S.ux)(h),m=(0,S.ux)(u),g=[1,0,0],x=(0,S.CW)(d,m),v=(0,S.Ez)(x,x),_=x[0],f=v-_*_;if(!f)return!y&&h;var C=t*v/f,w=-t*_/f,E=(0,S.CW)(g,x),P=(0,S.wx)(g,C),L=(0,S.wx)(x,w);(0,S.mg)(P,L);var O=E,z=(0,S.Ez)(P,O),V=(0,S.Ez)(O,O),R=z*z-V*((0,S.Ez)(P,P)-1);if(!(R<0)){var U=(0,o._I)(R),Z=(0,S.wx)(O,(-z-U)/V);if((0,S.mg)(Z,P),Z=(0,S.G)(Z),!y)return Z;var N,G=h[0],W=u[0],ae=h[1],re=u[1];W<G&&(N=G,G=W,W=N);var ne=W-G,Q=(0,o.a2)(ne-o.pi)<o.Gg;if(!Q&&re<ae&&(N=ae,ae=re,re=N),Q||ne<o.Gg?Q?ae+re>0^Z[1]<((0,o.a2)(Z[0]-G)<o.Gg?ae:re):ae<=Z[1]&&Z[1]<=re:ne>o.pi^(G<=Z[0]&&Z[0]<=W)){var $=(0,S.wx)(O,(-z+U)/V);return(0,S.mg)($,P),[Z,(0,S.G)($)]}}}function c(h,u){var y=r?l:o.pi-l,d=0;return h<-y?d|=1:h>y&&(d|=2),u<-y?d|=4:u>y&&(d|=8),d}return(0,b.c)(a,function(h){var u,y,d,m,g;return{lineStart:function(){m=d=!1,g=1},point:function(x,v){var _,f=[x,v],C=a(x,v),w=r?C?0:c(x,v):C?c(x+(x<0?o.pi:-o.pi),v):0;if(!u&&(m=d=C)&&h.lineStart(),C!==d&&(!(_=s(u,f))||(0,T.c)(u,_)||(0,T.c)(f,_))&&(f[2]=1),C!==d)g=0,C?(h.lineStart(),_=s(f,u),h.point(_[0],_[1])):(_=s(u,f),h.point(_[0],_[1],2),h.lineEnd()),u=_;else if(n&&u&&r^C){var E;w&y||!(E=s(f,u,!0))||(g=0,r?(h.lineStart(),h.point(E[0][0],E[0][1]),h.point(E[1][0],E[1][1]),h.lineEnd()):(h.point(E[1][0],E[1][1]),h.lineEnd(),h.lineStart(),h.point(E[0][0],E[0][1],3)))}!C||u&&(0,T.c)(u,f)||h.point(f[0],f[1]),u=f,d=C,y=w},lineEnd:function(){d&&h.lineEnd(),u=null},clean:function(){return g|(m&&d)<<1}}},function(h,u,y,d){(0,k.Q)(d,l,i,y,h,u)},r?[0,-l]:[-o.pi,l-o.pi])}},14229:function(ie,F,e){"use strict";e.d(F,{c:function(){return p}});var S=e(97208),k=e(32232),o=e(64528),T=e(58196),b=e(84706);function p(i,r,n,a){return function(s){var c,h,u,y=r(s),d=(0,S.c)(),m=r(d),g=!1,x={point:v,lineStart:f,lineEnd:C,polygonStart:function(){x.point=w,x.lineStart=E,x.lineEnd=P,h=[],c=[]},polygonEnd:function(){x.point=v,x.lineStart=f,x.lineEnd=C,h=(0,b.Uf)(h);var L=(0,T.c)(c,a);h.length?(g||(s.polygonStart(),g=!0),(0,k.c)(h,t,L,n,s)):L&&(g||(s.polygonStart(),g=!0),s.lineStart(),n(null,null,1,s),s.lineEnd()),g&&(s.polygonEnd(),g=!1),h=c=null},sphere:function(){s.polygonStart(),s.lineStart(),n(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function v(L,O){i(L,O)&&s.point(L,O)}function _(L,O){y.point(L,O)}function f(){x.point=_,y.lineStart()}function C(){x.point=v,y.lineEnd()}function w(L,O){u.push([L,O]),m.point(L,O)}function E(){m.lineStart(),u=[]}function P(){w(u[0][0],u[0][1]),m.lineEnd();var L,O,z,V,R=m.clean(),U=d.result(),Z=U.length;if(u.pop(),c.push(u),u=null,Z)if(1&R){if((O=(z=U[0]).length-1)>0){for(g||(s.polygonStart(),g=!0),s.lineStart(),L=0;L<O;++L)s.point((V=z[L])[0],V[1]);s.lineEnd()}}else Z>1&&2&R&&U.push(U.pop().concat(U.shift())),h.push(U.filter(l))}return x}}function l(i){return i.length>1}function t(i,r){return((i=i.x)[0]<0?i[1]-o.or-o.Gg:o.or-i[1])-((r=r.x)[0]<0?r[1]-o.or-o.Gg:o.or-r[1])}},21676:function(ie,F,e){"use strict";e.d(F,{c:function(){return l}});var S=e(64528),k=e(97208),o=e(32232),T=e(84706),b=1e9,p=-b;function l(t,i,r,n){function a(y,d){return t<=y&&y<=r&&i<=d&&d<=n}function s(y,d,m,g){var x=0,v=0;if(null==y||(x=c(y,m))!==(v=c(d,m))||u(y,d)<0^m>0)do{g.point(0===x||3===x?t:r,x>1?n:i)}while((x=(x+m+4)%4)!==v);else g.point(d[0],d[1])}function c(y,d){return(0,S.a2)(y[0]-t)<S.Gg?d>0?0:3:(0,S.a2)(y[0]-r)<S.Gg?d>0?2:1:(0,S.a2)(y[1]-i)<S.Gg?d>0?1:0:d>0?3:2}function h(y,d){return u(y.x,d.x)}function u(y,d){var m=c(y,1),g=c(d,1);return m!==g?m-g:0===m?d[1]-y[1]:1===m?y[0]-d[0]:2===m?y[1]-d[1]:d[0]-y[0]}return function(y){var d,m,g,x,v,_,f,C,w,E,P,L=y,O=(0,k.c)(),z={point:V,lineStart:function(){z.point=R,m&&m.push(g=[]),E=!0,w=!1,f=C=NaN},lineEnd:function(){d&&(R(x,v),_&&w&&O.rejoin(),d.push(O.result())),z.point=V,w&&L.lineEnd()},polygonStart:function(){L=O,d=[],m=[],P=!0},polygonEnd:function(){var U=function(){for(var G=0,W=0,ae=m.length;W<ae;++W)for(var re,ne,Q=m[W],$=1,X=Q.length,oe=Q[0],fe=oe[0],ue=oe[1];$<X;++$)re=fe,ne=ue,fe=(oe=Q[$])[0],ue=oe[1],ne<=n?ue>n&&(fe-re)*(n-ne)>(ue-ne)*(t-re)&&++G:ue<=n&&(fe-re)*(n-ne)<(ue-ne)*(t-re)&&--G;return G}(),Z=P&&U,N=(d=(0,T.Uf)(d)).length;(Z||N)&&(y.polygonStart(),Z&&(y.lineStart(),s(null,null,1,y),y.lineEnd()),N&&(0,o.c)(d,h,U,s,y),y.polygonEnd()),L=y,d=m=g=null}};function V(U,Z){a(U,Z)&&L.point(U,Z)}function R(U,Z){var N=a(U,Z);if(m&&g.push([U,Z]),E)x=U,v=Z,_=N,E=!1,N&&(L.lineStart(),L.point(U,Z));else if(N&&w)L.point(U,Z);else{var G=[f=Math.max(p,Math.min(b,f)),C=Math.max(p,Math.min(b,C))],W=[U=Math.max(p,Math.min(b,U)),Z=Math.max(p,Math.min(b,Z))];!function(ae,re,ne,Q,$,X){var oe,fe=ae[0],ue=ae[1],ge=0,we=1,Te=re[0]-fe,xe=re[1]-ue;if(oe=ne-fe,Te||!(oe>0)){if(oe/=Te,Te<0){if(oe<ge)return;oe<we&&(we=oe)}else if(Te>0){if(oe>we)return;oe>ge&&(ge=oe)}if(oe=$-fe,Te||!(oe<0)){if(oe/=Te,Te<0){if(oe>we)return;oe>ge&&(ge=oe)}else if(Te>0){if(oe<ge)return;oe<we&&(we=oe)}if(oe=Q-ue,xe||!(oe>0)){if(oe/=xe,xe<0){if(oe<ge)return;oe<we&&(we=oe)}else if(xe>0){if(oe>we)return;oe>ge&&(ge=oe)}if(oe=X-ue,xe||!(oe<0)){if(oe/=xe,xe<0){if(oe>we)return;oe>ge&&(ge=oe)}else if(xe>0){if(oe<ge)return;oe<we&&(we=oe)}return ge>0&&(ae[0]=fe+ge*Te,ae[1]=ue+ge*xe),we<1&&(re[0]=fe+we*Te,re[1]=ue+we*xe),!0}}}}}(G,W,t,i,r,n)?N&&(L.lineStart(),L.point(U,Z),P=!1):(w||(L.lineStart(),L.point(G[0],G[1])),L.point(W[0],W[1]),N||L.lineEnd(),P=!1)}f=U,C=Z,w=N}return z}}},32232:function(ie,F,e){"use strict";e.d(F,{c:function(){return T}});var S=e(41860),k=e(64528);function o(p,l,t,i){this.x=p,this.z=l,this.o=t,this.e=i,this.v=!1,this.n=this.p=null}function T(p,l,t,i,r){var n,a,s=[],c=[];if(p.forEach(function(g){if(!((x=g.length-1)<=0)){var x,v,_=g[0],f=g[x];if((0,S.c)(_,f)){if(!_[2]&&!f[2]){for(r.lineStart(),n=0;n<x;++n)r.point((_=g[n])[0],_[1]);return void r.lineEnd()}f[0]+=2*k.Gg}s.push(v=new o(_,g,null,!0)),c.push(v.o=new o(_,null,v,!1)),s.push(v=new o(f,g,null,!1)),c.push(v.o=new o(f,null,v,!0))}}),s.length){for(c.sort(l),b(s),b(c),n=0,a=c.length;n<a;++n)c[n].e=t=!t;for(var h,u,y=s[0];;){for(var d=y,m=!0;d.v;)if((d=d.n)===y)return;h=d.z,r.lineStart();do{if(d.v=d.o.v=!0,d.e){if(m)for(n=0,a=h.length;n<a;++n)r.point((u=h[n])[0],u[1]);else i(d.x,d.n.x,1,r);d=d.n}else{if(m)for(n=(h=d.p.z).length-1;n>=0;--n)r.point((u=h[n])[0],u[1]);else i(d.x,d.p.x,-1,r);d=d.p}h=(d=d.o).z,m=!m}while(!d.v);r.lineEnd()}}}function b(p){if(l=p.length){for(var l,t,i=0,r=p[0];++i<l;)r.n=t=p[i],t.p=r,r=t;r.n=t=p[0],t.p=r}}},68120:function(ie,F,e){"use strict";function S(k,o){function T(b,p){return b=k(b,p),o(b[0],b[1])}return k.invert&&o.invert&&(T.invert=function(b,p){return(b=o.invert(b,p))&&k.invert(b[0],b[1])}),T}e.d(F,{c:function(){return S}})},7376:function(ie,F,e){"use strict";function S(k){return k}e.d(F,{c:function(){return S}})},83356:function(ie,F,e){"use strict";e.r(F),e.d(F,{geoAlbers:function(){return Mt},geoAlbersUsa:function(){return Pt},geoArea:function(){return S.cp},geoAzimuthalEqualArea:function(){return Ct.c},geoAzimuthalEqualAreaRaw:function(){return Ct.y},geoAzimuthalEquidistant:function(){return Dt.c},geoAzimuthalEquidistantRaw:function(){return Dt.O},geoBounds:function(){return k.c},geoCentroid:function(){return o.c},geoCircle:function(){return T.c},geoClipAntimeridian:function(){return b.c},geoClipCircle:function(){return p.c},geoClipExtent:function(){return t},geoClipRectangle:function(){return l.c},geoConicConformal:function(){return sn},geoConicConformalRaw:function(){return Qt},geoConicEqualArea:function(){return At},geoConicEqualAreaRaw:function(){return xt},geoConicEquidistant:function(){return Fn},geoConicEquidistantRaw:function(){return qn},geoContains:function(){return U},geoDistance:function(){return C},geoEqualEarth:function(){return Dn},geoEqualEarthRaw:function(){return On},geoEquirectangular:function(){return Kt.c},geoEquirectangularRaw:function(){return Kt.u},geoGnomonic:function(){return Vn.c},geoGnomonicRaw:function(){return Vn.Y},geoGraticule:function(){return W},geoGraticule10:function(){return ae},geoIdentity:function(){return Nn},geoInterpolate:function(){return X.c},geoLength:function(){return v},geoMercator:function(){return qt},geoMercatorRaw:function(){return Bt},geoNaturalEarth1:function(){return ir.c},geoNaturalEarth1Raw:function(){return ir.g},geoOrthographic:function(){return $n.c},geoOrthographicRaw:function(){return $n.t},geoPath:function(){return He},geoProjection:function(){return ut.c},geoProjectionMutator:function(){return ut.U},geoRotation:function(){return Ut.c},geoStereographic:function(){return vr},geoStereographicRaw:function(){return lr},geoStream:function(){return u.c},geoTransform:function(){return Gn.c},geoTransverseMercator:function(){return Or},geoTransverseMercatorRaw:function(){return or}});var S=e(95384),k=e(13696),o=e(24052),T=e(61780),b=e(78284),p=e(2728),l=e(21676);function t(){var fn,gn,Hn,En=0,Zn=0,Kn=960,tr=500;return Hn={stream:function(fr){return fn&&gn===fr?fn:fn=(0,l.c)(En,Zn,Kn,tr)(gn=fr)},extent:function(fr){return arguments.length?(En=+fr[0][0],Zn=+fr[0][1],Kn=+fr[1][0],tr=+fr[1][1],fn=gn=null,Hn):[[En,Zn],[Kn,tr]]}}}var i,r,n,a=e(58196),s=e(88728),c=e(64528),h=e(70932),u=e(16016),y=(0,s.c)(),d={sphere:h.c,point:h.c,lineStart:function(){d.point=g,d.lineEnd=m},lineEnd:h.c,polygonStart:h.c,polygonEnd:h.c};function m(){d.point=d.lineEnd=h.c}function g(fn,gn){i=fn*=c.qw,r=(0,c.g$)(gn*=c.qw),n=(0,c.W8)(gn),d.point=x}function x(fn,gn){fn*=c.qw;var Hn=(0,c.g$)(gn*=c.qw),En=(0,c.W8)(gn),Zn=(0,c.a2)(fn-i),Kn=(0,c.W8)(Zn),tr=En*(0,c.g$)(Zn),fr=n*Hn-r*En*Kn,Dr=r*Hn+n*En*Kn;y.add((0,c.WE)((0,c._I)(tr*tr+fr*fr),Dr)),i=fn,r=Hn,n=En}function v(fn){return y.reset(),(0,u.c)(fn,d),+y}var _=[null,null],f={type:"LineString",coordinates:_};function C(fn,gn){return _[0]=fn,_[1]=gn,v(f)}var w={Feature:function(fn,gn){return P(fn.geometry,gn)},FeatureCollection:function(fn,gn){for(var Hn=fn.features,En=-1,Zn=Hn.length;++En<Zn;)if(P(Hn[En].geometry,gn))return!0;return!1}},E={Sphere:function(){return!0},Point:function(fn,gn){return L(fn.coordinates,gn)},MultiPoint:function(fn,gn){for(var Hn=fn.coordinates,En=-1,Zn=Hn.length;++En<Zn;)if(L(Hn[En],gn))return!0;return!1},LineString:function(fn,gn){return O(fn.coordinates,gn)},MultiLineString:function(fn,gn){for(var Hn=fn.coordinates,En=-1,Zn=Hn.length;++En<Zn;)if(O(Hn[En],gn))return!0;return!1},Polygon:function(fn,gn){return z(fn.coordinates,gn)},MultiPolygon:function(fn,gn){for(var Hn=fn.coordinates,En=-1,Zn=Hn.length;++En<Zn;)if(z(Hn[En],gn))return!0;return!1},GeometryCollection:function(fn,gn){for(var Hn=fn.geometries,En=-1,Zn=Hn.length;++En<Zn;)if(P(Hn[En],gn))return!0;return!1}};function P(fn,gn){return!(!fn||!E.hasOwnProperty(fn.type))&&E[fn.type](fn,gn)}function L(fn,gn){return 0===C(fn,gn)}function O(fn,gn){for(var Hn,En,Zn,Kn=0,tr=fn.length;Kn<tr;Kn++){if(0===(En=C(fn[Kn],gn))||Kn>0&&(Zn=C(fn[Kn],fn[Kn-1]))>0&&Hn<=Zn&&En<=Zn&&(Hn+En-Zn)*(1-Math.pow((Hn-En)/Zn,2))<c.a8*Zn)return!0;Hn=En}return!1}function z(fn,gn){return!!(0,a.c)(fn.map(V),R(gn))}function V(fn){return(fn=fn.map(R)).pop(),fn}function R(fn){return[fn[0]*c.qw,fn[1]*c.qw]}function U(fn,gn){return(fn&&w.hasOwnProperty(fn.type)?w[fn.type]:P)(fn,gn)}var Z=e(84706);function N(fn,gn,Hn){var En=(0,Z.ik)(fn,gn-c.Gg,Hn).concat(gn);return function(Zn){return En.map(function(Kn){return[Zn,Kn]})}}function G(fn,gn,Hn){var En=(0,Z.ik)(fn,gn-c.Gg,Hn).concat(gn);return function(Zn){return En.map(function(Kn){return[Kn,Zn]})}}function W(){var fn,gn,Hn,En,Zn,Kn,tr,fr,Dr,cn,In,Nt,Zt=10,un=Zt,Tn=90,kn=360,Pn=2.5;function yn(){return{type:"MultiLineString",coordinates:on()}}function on(){return(0,Z.ik)((0,c.Km)(En/Tn)*Tn,Hn,Tn).map(In).concat((0,Z.ik)((0,c.Km)(fr/kn)*kn,tr,kn).map(Nt)).concat((0,Z.ik)((0,c.Km)(gn/Zt)*Zt,fn,Zt).filter(function(nn){return(0,c.a2)(nn%Tn)>c.Gg}).map(Dr)).concat((0,Z.ik)((0,c.Km)(Kn/un)*un,Zn,un).filter(function(nn){return(0,c.a2)(nn%kn)>c.Gg}).map(cn))}return yn.lines=function(){return on().map(function(nn){return{type:"LineString",coordinates:nn}})},yn.outline=function(){return{type:"Polygon",coordinates:[In(En).concat(Nt(tr).slice(1),In(Hn).reverse().slice(1),Nt(fr).reverse().slice(1))]}},yn.extent=function(nn){return arguments.length?yn.extentMajor(nn).extentMinor(nn):yn.extentMinor()},yn.extentMajor=function(nn){return arguments.length?(fr=+nn[0][1],tr=+nn[1][1],(En=+nn[0][0])>(Hn=+nn[1][0])&&(nn=En,En=Hn,Hn=nn),fr>tr&&(nn=fr,fr=tr,tr=nn),yn.precision(Pn)):[[En,fr],[Hn,tr]]},yn.extentMinor=function(nn){return arguments.length?(Kn=+nn[0][1],Zn=+nn[1][1],(gn=+nn[0][0])>(fn=+nn[1][0])&&(nn=gn,gn=fn,fn=nn),Kn>Zn&&(nn=Kn,Kn=Zn,Zn=nn),yn.precision(Pn)):[[gn,Kn],[fn,Zn]]},yn.step=function(nn){return arguments.length?yn.stepMajor(nn).stepMinor(nn):yn.stepMinor()},yn.stepMajor=function(nn){return arguments.length?(Tn=+nn[0],kn=+nn[1],yn):[Tn,kn]},yn.stepMinor=function(nn){return arguments.length?(Zt=+nn[0],un=+nn[1],yn):[Zt,un]},yn.precision=function(nn){return arguments.length?(Pn=+nn,Dr=N(Kn,Zn,90),cn=G(gn,fn,Pn),In=N(fr,tr,90),Nt=G(En,Hn,Pn),yn):Pn},yn.extentMajor([[-180,-90+c.Gg],[180,90-c.Gg]]).extentMinor([[-180,-80-c.Gg],[180,80+c.Gg]])}function ae(){return W()()}var re,ne,Q,$,X=e(27284),oe=e(7376),fe=(0,s.c)(),ue=(0,s.c)(),ge={point:h.c,lineStart:h.c,lineEnd:h.c,polygonStart:function(){ge.lineStart=we,ge.lineEnd=ye},polygonEnd:function(){ge.lineStart=ge.lineEnd=ge.point=h.c,fe.add((0,c.a2)(ue)),ue.reset()},result:function(){var fn=fe/2;return fe.reset(),fn}};function we(){ge.point=Te}function Te(fn,gn){ge.point=xe,re=Q=fn,ne=$=gn}function xe(fn,gn){ue.add($*fn-Q*gn),Q=fn,$=gn}function ye(){xe(re,ne)}var _e,Ie,De,be,he=ge,ce=e(73784),me=0,Pe=0,Ae=0,Ce=0,Oe=0,Ne=0,je=0,ve=0,Me=0,Le={point:Ue,lineStart:ze,lineEnd:it,polygonStart:function(){Le.lineStart=ft,Le.lineEnd=dt},polygonEnd:function(){Le.point=Ue,Le.lineStart=ze,Le.lineEnd=it},result:function(){var fn=Me?[je/Me,ve/Me]:Ne?[Ce/Ne,Oe/Ne]:Ae?[me/Ae,Pe/Ae]:[NaN,NaN];return me=Pe=Ae=Ce=Oe=Ne=je=ve=Me=0,fn}};function Ue(fn,gn){me+=fn,Pe+=gn,++Ae}function ze(){Le.point=qe}function qe(fn,gn){Le.point=Ke,Ue(De=fn,be=gn)}function Ke(fn,gn){var Hn=fn-De,En=gn-be,Zn=(0,c._I)(Hn*Hn+En*En);Ce+=Zn*(De+fn)/2,Oe+=Zn*(be+gn)/2,Ne+=Zn,Ue(De=fn,be=gn)}function it(){Le.point=Ue}function ft(){Le.point=kt}function dt(){St(_e,Ie)}function kt(fn,gn){Le.point=St,Ue(_e=De=fn,Ie=be=gn)}function St(fn,gn){var Hn=fn-De,En=gn-be,Zn=(0,c._I)(Hn*Hn+En*En);Ce+=Zn*(De+fn)/2,Oe+=Zn*(be+gn)/2,Ne+=Zn,je+=(Zn=be*fn-De*gn)*(De+fn),ve+=Zn*(be+gn),Me+=3*Zn,Ue(De=fn,be=gn)}var Tt=Le;function lt(fn){this._context=fn}lt.prototype={_radius:4.5,pointRadius:function(fn){return this._radius=fn,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(fn,gn){switch(this._point){case 0:this._context.moveTo(fn,gn),this._point=1;break;case 1:this._context.lineTo(fn,gn);break;default:this._context.moveTo(fn+this._radius,gn),this._context.arc(fn,gn,this._radius,0,c.kD)}},result:h.c};var ot,Rt,Vt,Ht,zt,Qe=(0,s.c)(),nt={point:h.c,lineStart:function(){nt.point=We},lineEnd:function(){ot&&et(Rt,Vt),nt.point=h.c},polygonStart:function(){ot=!0},polygonEnd:function(){ot=null},result:function(){var fn=+Qe;return Qe.reset(),fn}};function We(fn,gn){nt.point=et,Rt=Ht=fn,Vt=zt=gn}function et(fn,gn){Qe.add((0,c._I)((Ht-=fn)*Ht+(zt-=gn)*zt)),Ht=fn,zt=gn}var gt=nt;function ht(){this._string=[]}function Ge(fn){return"m0,"+fn+"a"+fn+","+fn+" 0 1,1 0,"+-2*fn+"a"+fn+","+fn+" 0 1,1 0,"+2*fn+"z"}function He(fn,gn){var Hn,En,Zn=4.5;function Kn(tr){return tr&&("function"==typeof Zn&&En.pointRadius(+Zn.apply(this,arguments)),(0,u.c)(tr,Hn(En))),En.result()}return Kn.area=function(tr){return(0,u.c)(tr,Hn(he)),he.result()},Kn.measure=function(tr){return(0,u.c)(tr,Hn(gt)),gt.result()},Kn.bounds=function(tr){return(0,u.c)(tr,Hn(ce.c)),ce.c.result()},Kn.centroid=function(tr){return(0,u.c)(tr,Hn(Tt)),Tt.result()},Kn.projection=function(tr){return arguments.length?(Hn=null==tr?(fn=null,oe.c):(fn=tr).stream,Kn):fn},Kn.context=function(tr){return arguments.length?(En=null==tr?(gn=null,new ht):new lt(gn=tr),"function"!=typeof Zn&&En.pointRadius(Zn),Kn):gn},Kn.pointRadius=function(tr){return arguments.length?(Zn="function"==typeof tr?tr:(En.pointRadius(+tr),+tr),Kn):Zn},Kn.projection(fn).context(gn)}ht.prototype={_radius:4.5,_circle:Ge(4.5),pointRadius:function(fn){return(fn=+fn)!==this._radius&&(this._radius=fn,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(fn,gn){switch(this._point){case 0:this._string.push("M",fn,",",gn),this._point=1;break;case 1:this._string.push("L",fn,",",gn);break;default:null==this._circle&&(this._circle=Ge(this._radius)),this._string.push("M",fn,",",gn,this._circle)}},result:function(){if(this._string.length){var fn=this._string.join("");return this._string=[],fn}return null}};var ut=e(87952);function tt(fn){var gn=0,Hn=c.pi/3,En=(0,ut.U)(fn),Zn=En(gn,Hn);return Zn.parallels=function(Kn){return arguments.length?En(gn=Kn[0]*c.qw,Hn=Kn[1]*c.qw):[gn*c.oh,Hn*c.oh]},Zn}function xt(fn,gn){var Hn=(0,c.g$)(fn),En=(Hn+(0,c.g$)(gn))/2;if((0,c.a2)(En)<c.Gg)return function(fr){var Dr=(0,c.W8)(fr);function cn(In,Nt){return[In*Dr,(0,c.g$)(Nt)/Dr]}return cn.invert=function(In,Nt){return[In/Dr,(0,c.qR)(Nt*Dr)]},cn}(fn);var Zn=1+Hn*(2*En-Hn),Kn=(0,c._I)(Zn)/En;function tr(fr,Dr){var cn=(0,c._I)(Zn-2*En*(0,c.g$)(Dr))/En;return[cn*(0,c.g$)(fr*=En),Kn-cn*(0,c.W8)(fr)]}return tr.invert=function(fr,Dr){var cn=Kn-Dr,In=(0,c.WE)(fr,(0,c.a2)(cn))*(0,c.kq)(cn);return cn*En<0&&(In-=c.pi*(0,c.kq)(fr)*(0,c.kq)(cn)),[In/En,(0,c.qR)((Zn-(fr*fr+cn*cn)*En*En)/(2*En))]},tr}function At(){return tt(xt).scale(155.424).center([0,33.6442])}function Mt(){return At().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var yt=e(86420);function Pt(){var fn,gn,Hn,En,Zn,Kn,tr=Mt(),fr=At().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Dr=At().rotate([157,0]).center([-3,19.9]).parallels([8,18]),cn={point:function(Zt,un){Kn=[Zt,un]}};function In(Zt){var un=Zt[0],Tn=Zt[1];return Kn=null,Hn.point(un,Tn),Kn||(En.point(un,Tn),Kn)||(Zn.point(un,Tn),Kn)}function Nt(){return fn=gn=null,In}return In.invert=function(Zt){var un=tr.scale(),Tn=tr.translate(),kn=(Zt[0]-Tn[0])/un,Pn=(Zt[1]-Tn[1])/un;return(Pn>=.12&&Pn<.234&&kn>=-.425&&kn<-.214?fr:Pn>=.166&&Pn<.234&&kn>=-.214&&kn<-.115?Dr:tr).invert(Zt)},In.stream=function(Zt){return fn&&gn===Zt?fn:(un=[tr.stream(gn=Zt),fr.stream(Zt),Dr.stream(Zt)],Tn=un.length,fn={point:function(kn,Pn){for(var yn=-1;++yn<Tn;)un[yn].point(kn,Pn)},sphere:function(){for(var kn=-1;++kn<Tn;)un[kn].sphere()},lineStart:function(){for(var kn=-1;++kn<Tn;)un[kn].lineStart()},lineEnd:function(){for(var kn=-1;++kn<Tn;)un[kn].lineEnd()},polygonStart:function(){for(var kn=-1;++kn<Tn;)un[kn].polygonStart()},polygonEnd:function(){for(var kn=-1;++kn<Tn;)un[kn].polygonEnd()}});var un,Tn},In.precision=function(Zt){return arguments.length?(tr.precision(Zt),fr.precision(Zt),Dr.precision(Zt),Nt()):tr.precision()},In.scale=function(Zt){return arguments.length?(tr.scale(Zt),fr.scale(.35*Zt),Dr.scale(Zt),In.translate(tr.translate())):tr.scale()},In.translate=function(Zt){if(!arguments.length)return tr.translate();var un=tr.scale(),Tn=+Zt[0],kn=+Zt[1];return Hn=tr.translate(Zt).clipExtent([[Tn-.455*un,kn-.238*un],[Tn+.455*un,kn+.238*un]]).stream(cn),En=fr.translate([Tn-.307*un,kn+.201*un]).clipExtent([[Tn-.425*un+c.Gg,kn+.12*un+c.Gg],[Tn-.214*un-c.Gg,kn+.234*un-c.Gg]]).stream(cn),Zn=Dr.translate([Tn-.205*un,kn+.212*un]).clipExtent([[Tn-.214*un+c.Gg,kn+.166*un+c.Gg],[Tn-.115*un-c.Gg,kn+.234*un-c.Gg]]).stream(cn),Nt()},In.fitExtent=function(Zt,un){return(0,yt.QX)(In,Zt,un)},In.fitSize=function(Zt,un){return(0,yt.UV)(In,Zt,un)},In.fitWidth=function(Zt,un){return(0,yt.Qx)(In,Zt,un)},In.fitHeight=function(Zt,un){return(0,yt.OW)(In,Zt,un)},In.scale(1070)}var Ct=e(54724),Dt=e(69020),Ut=e(92992);function Bt(fn,gn){return[fn,(0,c.Yz)((0,c.a6)((c.or+gn)/2))]}function qt(){return an(Bt).scale(961/c.kD)}function an(fn){var gn,Hn,En,Zn=(0,ut.c)(fn),Kn=Zn.center,tr=Zn.scale,fr=Zn.translate,Dr=Zn.clipExtent,cn=null;function In(){var Nt=c.pi*tr(),Zt=Zn((0,Ut.c)(Zn.rotate()).invert([0,0]));return Dr(null==cn?[[Zt[0]-Nt,Zt[1]-Nt],[Zt[0]+Nt,Zt[1]+Nt]]:fn===Bt?[[Math.max(Zt[0]-Nt,cn),gn],[Math.min(Zt[0]+Nt,Hn),En]]:[[cn,Math.max(Zt[1]-Nt,gn)],[Hn,Math.min(Zt[1]+Nt,En)]])}return Zn.scale=function(Nt){return arguments.length?(tr(Nt),In()):tr()},Zn.translate=function(Nt){return arguments.length?(fr(Nt),In()):fr()},Zn.center=function(Nt){return arguments.length?(Kn(Nt),In()):Kn()},Zn.clipExtent=function(Nt){return arguments.length?(null==Nt?cn=gn=Hn=En=null:(cn=+Nt[0][0],gn=+Nt[0][1],Hn=+Nt[1][0],En=+Nt[1][1]),In()):null==cn?null:[[cn,gn],[Hn,En]]},In()}function mn(fn){return(0,c.a6)((c.or+fn)/2)}function Qt(fn,gn){var Hn=(0,c.W8)(fn),En=fn===gn?(0,c.g$)(fn):(0,c.Yz)(Hn/(0,c.W8)(gn))/(0,c.Yz)(mn(gn)/mn(fn)),Zn=Hn*(0,c.g3)(mn(fn),En)/En;if(!En)return Bt;function Kn(tr,fr){Zn>0?fr<-c.or+c.Gg&&(fr=-c.or+c.Gg):fr>c.or-c.Gg&&(fr=c.or-c.Gg);var Dr=Zn/(0,c.g3)(mn(fr),En);return[Dr*(0,c.g$)(En*tr),Zn-Dr*(0,c.W8)(En*tr)]}return Kn.invert=function(tr,fr){var Dr=Zn-fr,cn=(0,c.kq)(En)*(0,c._I)(tr*tr+Dr*Dr),In=(0,c.WE)(tr,(0,c.a2)(Dr))*(0,c.kq)(Dr);return Dr*En<0&&(In-=c.pi*(0,c.kq)(tr)*(0,c.kq)(Dr)),[In/En,2*(0,c.MQ)((0,c.g3)(Zn/cn,1/En))-c.or]},Kn}function sn(){return tt(Qt).scale(109.5).parallels([30,30])}Bt.invert=function(fn,gn){return[fn,2*(0,c.MQ)((0,c.oN)(gn))-c.or]};var Kt=e(69604);function qn(fn,gn){var Hn=(0,c.W8)(fn),En=fn===gn?(0,c.g$)(fn):(Hn-(0,c.W8)(gn))/(gn-fn),Zn=Hn/En+fn;if((0,c.a2)(En)<c.Gg)return Kt.u;function Kn(tr,fr){var Dr=Zn-fr,cn=En*tr;return[Dr*(0,c.g$)(cn),Zn-Dr*(0,c.W8)(cn)]}return Kn.invert=function(tr,fr){var Dr=Zn-fr,cn=(0,c.WE)(tr,(0,c.a2)(Dr))*(0,c.kq)(Dr);return Dr*En<0&&(cn-=c.pi*(0,c.kq)(tr)*(0,c.kq)(Dr)),[cn/En,Zn-(0,c.kq)(En)*(0,c._I)(tr*tr+Dr*Dr)]},Kn}function Fn(){return tt(qn).scale(131.154).center([0,13.9389])}var Sn=1.340264,hn=-.081106,wn=893e-6,pn=.003796,An=(0,c._I)(3)/2;function On(fn,gn){var Hn=(0,c.qR)(An*(0,c.g$)(gn)),En=Hn*Hn,Zn=En*En*En;return[fn*(0,c.W8)(Hn)/(An*(Sn+3*hn*En+Zn*(7*wn+9*pn*En))),Hn*(Sn+hn*En+Zn*(wn+pn*En))]}function Dn(){return(0,ut.c)(On).scale(177.158)}On.invert=function(fn,gn){for(var Hn,En=gn,Zn=En*En,Kn=Zn*Zn*Zn,tr=0;tr<12&&(Kn=(Zn=(En-=Hn=(En*(Sn+hn*Zn+Kn*(wn+pn*Zn))-gn)/(Sn+3*hn*Zn+Kn*(7*wn+9*pn*Zn)))*En)*Zn*Zn,!((0,c.a2)(Hn)<c.a8));++tr);return[An*fn*(Sn+3*hn*Zn+Kn*(7*wn+9*pn*Zn))/(0,c.W8)(En),(0,c.qR)((0,c.g$)(En)/An)]};var Vn=e(53285),Gn=e(15196);function Nn(){var fn,gn,Hn,En,Zn,Kn,tr,fr=1,Dr=0,cn=0,In=1,Nt=1,Zt=0,un=null,Tn=1,kn=1,Pn=(0,Gn.s)({point:function(dn,xn){var Bn=nn([dn,xn]);this.stream.point(Bn[0],Bn[1])}}),yn=oe.c;function on(){return Tn=fr*In,kn=fr*Nt,Kn=tr=null,nn}function nn(dn){var xn=dn[0]*Tn,Bn=dn[1]*kn;if(Zt){var Wn=Bn*fn-xn*gn;xn=xn*fn+Bn*gn,Bn=Wn}return[xn+Dr,Bn+cn]}return nn.invert=function(dn){var xn=dn[0]-Dr,Bn=dn[1]-cn;if(Zt){var Wn=Bn*fn+xn*gn;xn=xn*fn-Bn*gn,Bn=Wn}return[xn/Tn,Bn/kn]},nn.stream=function(dn){return Kn&&tr===dn?Kn:Kn=Pn(yn(tr=dn))},nn.postclip=function(dn){return arguments.length?(yn=dn,un=Hn=En=Zn=null,on()):yn},nn.clipExtent=function(dn){return arguments.length?(yn=null==dn?(un=Hn=En=Zn=null,oe.c):(0,l.c)(un=+dn[0][0],Hn=+dn[0][1],En=+dn[1][0],Zn=+dn[1][1]),on()):null==un?null:[[un,Hn],[En,Zn]]},nn.scale=function(dn){return arguments.length?(fr=+dn,on()):fr},nn.translate=function(dn){return arguments.length?(Dr=+dn[0],cn=+dn[1],on()):[Dr,cn]},nn.angle=function(dn){return arguments.length?(gn=(0,c.g$)(Zt=dn%360*c.qw),fn=(0,c.W8)(Zt),on()):Zt*c.oh},nn.reflectX=function(dn){return arguments.length?(In=dn?-1:1,on()):In<0},nn.reflectY=function(dn){return arguments.length?(Nt=dn?-1:1,on()):Nt<0},nn.fitExtent=function(dn,xn){return(0,yt.QX)(nn,dn,xn)},nn.fitSize=function(dn,xn){return(0,yt.UV)(nn,dn,xn)},nn.fitWidth=function(dn,xn){return(0,yt.Qx)(nn,dn,xn)},nn.fitHeight=function(dn,xn){return(0,yt.OW)(nn,dn,xn)},nn}var ir=e(47984),$n=e(4888),mr=e(62280);function lr(fn,gn){var Hn=(0,c.W8)(gn),En=1+(0,c.W8)(fn)*Hn;return[Hn*(0,c.g$)(fn)/En,(0,c.g$)(gn)/En]}function vr(){return(0,ut.c)(lr).scale(250).clipAngle(142)}function or(fn,gn){return[(0,c.Yz)((0,c.a6)((c.or+gn)/2)),-fn]}function Or(){var fn=an(or),gn=fn.center,Hn=fn.rotate;return fn.center=function(En){return arguments.length?gn([-En[1],En[0]]):[(En=gn())[1],-En[0]]},fn.rotate=function(En){return arguments.length?Hn([En[0],En[1],En.length>2?En[2]+90:90]):[(En=Hn())[0],En[1],En[2]-90]},Hn([0,0,90]).scale(159.155)}lr.invert=(0,mr.g)(function(fn){return 2*(0,c.MQ)(fn)}),or.invert=function(fn,gn){return[-gn,2*(0,c.MQ)((0,c.oN)(fn))-c.or]}},27284:function(ie,F,e){"use strict";e.d(F,{c:function(){return k}});var S=e(64528);function k(o,T){var b=o[0]*S.qw,p=o[1]*S.qw,l=T[0]*S.qw,t=T[1]*S.qw,i=(0,S.W8)(p),r=(0,S.g$)(p),n=(0,S.W8)(t),a=(0,S.g$)(t),s=i*(0,S.W8)(b),c=i*(0,S.g$)(b),h=n*(0,S.W8)(l),u=n*(0,S.g$)(l),y=2*(0,S.qR)((0,S._I)((0,S.SD)(t-p)+i*n*(0,S.SD)(l-b))),d=(0,S.g$)(y),m=y?function(g){var x=(0,S.g$)(g*=y)/d,v=(0,S.g$)(y-g)/d,_=v*s+x*h,f=v*c+x*u,C=v*r+x*a;return[(0,S.WE)(f,_)*S.oh,(0,S.WE)(C,(0,S._I)(_*_+f*f))*S.oh]}:function(){return[b*S.oh,p*S.oh]};return m.distance=y,m}},64528:function(ie,F,e){"use strict";e.d(F,{Gg:function(){return S},Km:function(){return s},MQ:function(){return r},SD:function(){return _},W8:function(){return a},WE:function(){return n},Yz:function(){return h},_I:function(){return m},a2:function(){return i},a6:function(){return g},a8:function(){return k},g$:function(){return y},g3:function(){return u},kD:function(){return p},kq:function(){return d},mE:function(){return x},oN:function(){return c},oh:function(){return l},or:function(){return T},pi:function(){return o},qR:function(){return v},qw:function(){return t},wL:function(){return b}});var S=1e-6,k=1e-12,o=Math.PI,T=o/2,b=o/4,p=2*o,l=180/o,t=o/180,i=Math.abs,r=Math.atan,n=Math.atan2,a=Math.cos,s=Math.ceil,c=Math.exp,h=Math.log,u=Math.pow,y=Math.sin,d=Math.sign||function(f){return f>0?1:f<0?-1:0},m=Math.sqrt,g=Math.tan;function x(f){return f>1?0:f<-1?o:Math.acos(f)}function v(f){return f>1?T:f<-1?-T:Math.asin(f)}function _(f){return(f=y(f/2))*f}},70932:function(ie,F,e){"use strict";function S(){}e.d(F,{c:function(){return S}})},73784:function(ie,F,e){"use strict";var S=e(70932),k=1/0,o=k,T=-k,b=T;F.c={point:function(l,t){l<k&&(k=l),l>T&&(T=l),t<o&&(o=t),t>b&&(b=t)},lineStart:S.c,lineEnd:S.c,polygonStart:S.c,polygonEnd:S.c,result:function(){var l=[[k,o],[T,b]];return T=b=-(o=k=1/0),l}}},41860:function(ie,F,e){"use strict";e.d(F,{c:function(){return k}});var S=e(64528);function k(o,T){return(0,S.a2)(o[0]-T[0])<S.Gg&&(0,S.a2)(o[1]-T[1])<S.Gg}},58196:function(ie,F,e){"use strict";e.d(F,{c:function(){return p}});var S=e(88728),k=e(84220),o=e(64528),T=(0,S.c)();function b(l){return(0,o.a2)(l[0])<=o.pi?l[0]:(0,o.kq)(l[0])*(((0,o.a2)(l[0])+o.pi)%o.kD-o.pi)}function p(l,t){var i=b(t),r=t[1],n=(0,o.g$)(r),a=[(0,o.g$)(i),-(0,o.W8)(i),0],s=0,c=0;T.reset(),1===n?r=o.or+o.Gg:-1===n&&(r=-o.or-o.Gg);for(var h=0,u=l.length;h<u;++h)if(d=(y=l[h]).length)for(var y,d,m=y[d-1],g=b(m),x=m[1]/2+o.wL,v=(0,o.g$)(x),_=(0,o.W8)(x),f=0;f<d;++f,g=w,v=P,_=L,m=C){var C=y[f],w=b(C),E=C[1]/2+o.wL,P=(0,o.g$)(E),L=(0,o.W8)(E),O=w-g,z=O>=0?1:-1,V=z*O,R=V>o.pi,U=v*P;if(T.add((0,o.WE)(U*z*(0,o.g$)(V),_*L+U*(0,o.W8)(V))),s+=R?O+z*o.kD:O,R^g>=i^w>=i){var Z=(0,k.CW)((0,k.ux)(m),(0,k.ux)(C));(0,k.cJ)(Z);var N=(0,k.CW)(a,Z);(0,k.cJ)(N);var G=(R^O>=0?-1:1)*(0,o.qR)(N[2]);(r>G||r===G&&(Z[0]||Z[1]))&&(c+=R^O>=0?1:-1)}}return(s<-o.Gg||s<o.Gg&&T<-o.Gg)^1&c}},62280:function(ie,F,e){"use strict";e.d(F,{a:function(){return k},g:function(){return o}});var S=e(64528);function k(T){return function(b,p){var l=(0,S.W8)(b),t=(0,S.W8)(p),i=T(l*t);return[i*t*(0,S.g$)(b),i*(0,S.g$)(p)]}}function o(T){return function(b,p){var l=(0,S._I)(b*b+p*p),t=T(l),i=(0,S.g$)(t),r=(0,S.W8)(t);return[(0,S.WE)(b*i,l*r),(0,S.qR)(l&&p*i/l)]}}},54724:function(ie,F,e){"use strict";e.d(F,{c:function(){return b},y:function(){return T}});var S=e(64528),k=e(62280),o=e(87952),T=(0,k.a)(function(p){return(0,S._I)(2/(1+p))});function b(){return(0,o.c)(T).scale(124.75).clipAngle(179.999)}T.invert=(0,k.g)(function(p){return 2*(0,S.qR)(p/2)})},69020:function(ie,F,e){"use strict";e.d(F,{O:function(){return T},c:function(){return b}});var S=e(64528),k=e(62280),o=e(87952),T=(0,k.a)(function(p){return(p=(0,S.mE)(p))&&p/(0,S.g$)(p)});function b(){return(0,o.c)(T).scale(79.4188).clipAngle(179.999)}T.invert=(0,k.g)(function(p){return p})},69604:function(ie,F,e){"use strict";e.d(F,{c:function(){return o},u:function(){return k}});var S=e(87952);function k(T,b){return[T,b]}function o(){return(0,S.c)(k).scale(152.63)}k.invert=k},86420:function(ie,F,e){"use strict";e.d(F,{OW:function(){return l},QX:function(){return T},Qx:function(){return p},UV:function(){return b}});var S=e(16016),k=e(73784);function o(t,i,r){var n=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=n&&t.clipExtent(null),(0,S.c)(r,t.stream(k.c)),i(k.c.result()),null!=n&&t.clipExtent(n),t}function T(t,i,r){return o(t,function(n){var a=i[1][0]-i[0][0],s=i[1][1]-i[0][1],c=Math.min(a/(n[1][0]-n[0][0]),s/(n[1][1]-n[0][1])),h=+i[0][0]+(a-c*(n[1][0]+n[0][0]))/2,u=+i[0][1]+(s-c*(n[1][1]+n[0][1]))/2;t.scale(150*c).translate([h,u])},r)}function b(t,i,r){return T(t,[[0,0],i],r)}function p(t,i,r){return o(t,function(n){var a=+i,s=a/(n[1][0]-n[0][0]),c=(a-s*(n[1][0]+n[0][0]))/2,h=-s*n[0][1];t.scale(150*s).translate([c,h])},r)}function l(t,i,r){return o(t,function(n){var a=+i,s=a/(n[1][1]-n[0][1]),c=-s*n[0][0],h=(a-s*(n[1][1]+n[0][1]))/2;t.scale(150*s).translate([c,h])},r)}},53285:function(ie,F,e){"use strict";e.d(F,{Y:function(){return T},c:function(){return b}});var S=e(64528),k=e(62280),o=e(87952);function T(p,l){var t=(0,S.W8)(l),i=(0,S.W8)(p)*t;return[t*(0,S.g$)(p)/i,(0,S.g$)(l)/i]}function b(){return(0,o.c)(T).scale(144.049).clipAngle(60)}T.invert=(0,k.g)(S.MQ)},87952:function(ie,F,e){"use strict";e.d(F,{c:function(){return y},U:function(){return d}});var S=e(78284),k=e(2728),o=e(21676),T=e(68120),b=e(7376),p=e(64528),l=e(92992),t=e(15196),i=e(86420),r=e(84220),n=16,a=(0,p.W8)(30*p.qw);function s(m,g){return+g?function(x,v){function _(f,C,w,E,P,L,O,z,V,R,U,Z,N,G){var W=O-f,ae=z-C,re=W*W+ae*ae;if(re>4*v&&N--){var ne=E+R,Q=P+U,$=L+Z,X=(0,p._I)(ne*ne+Q*Q+$*$),oe=(0,p.qR)($/=X),fe=(0,p.a2)((0,p.a2)($)-1)<p.Gg||(0,p.a2)(w-V)<p.Gg?(w+V)/2:(0,p.WE)(Q,ne),ue=x(fe,oe),ge=ue[0],we=ue[1],Te=ge-f,xe=we-C,ye=ae*Te-W*xe;(ye*ye/re>v||(0,p.a2)((W*Te+ae*xe)/re-.5)>.3||E*R+P*U+L*Z<a)&&(_(f,C,w,E,P,L,ge,we,fe,ne/=X,Q/=X,$,N,G),G.point(ge,we),_(ge,we,fe,ne,Q,$,O,z,V,R,U,Z,N,G))}}return function(f){var C,w,E,P,L,O,z,V,R,U,Z,N,G={point:W,lineStart:ae,lineEnd:ne,polygonStart:function(){f.polygonStart(),G.lineStart=Q},polygonEnd:function(){f.polygonEnd(),G.lineStart=ae}};function W(oe,fe){oe=x(oe,fe),f.point(oe[0],oe[1])}function ae(){V=NaN,G.point=re,f.lineStart()}function re(oe,fe){var ue=(0,r.ux)([oe,fe]),ge=x(oe,fe);_(V,R,z,U,Z,N,V=ge[0],R=ge[1],z=oe,U=ue[0],Z=ue[1],N=ue[2],n,f),f.point(V,R)}function ne(){G.point=W,f.lineEnd()}function Q(){ae(),G.point=$,G.lineEnd=X}function $(oe,fe){re(C=oe,fe),w=V,E=R,P=U,L=Z,O=N,G.point=re}function X(){_(V,R,z,U,Z,N,w,E,C,P,L,O,n,f),G.lineEnd=ne,ne()}return G}}(m,g):(x=m,(0,t.s)({point:function(v,_){v=x(v,_),this.stream.point(v[0],v[1])}}));var x}var c=(0,t.s)({point:function(m,g){this.stream.point(m*p.qw,g*p.qw)}});function h(m,g,x,v,_){function f(C,w){return[g+m*(C*=v),x-m*(w*=_)]}return f.invert=function(C,w){return[(C-g)/m*v,(x-w)/m*_]},f}function u(m,g,x,v,_,f){var C=(0,p.W8)(f),w=(0,p.g$)(f),E=C*m,P=w*m,L=C/m,O=w/m,z=(w*x-C*g)/m,V=(w*g+C*x)/m;function R(U,Z){return[E*(U*=v)-P*(Z*=_)+g,x-P*U-E*Z]}return R.invert=function(U,Z){return[v*(L*U-O*Z+z),_*(V-O*U-L*Z)]},R}function y(m){return d(function(){return m})()}function d(m){var g,x,v,_,f,C,w,E,P,L,O=150,z=480,V=250,R=0,U=0,Z=0,N=0,G=0,W=0,ae=1,re=1,ne=null,Q=S.c,$=null,X=b.c,oe=.5;function fe(Te){return E(Te[0]*p.qw,Te[1]*p.qw)}function ue(Te){return(Te=E.invert(Te[0],Te[1]))&&[Te[0]*p.oh,Te[1]*p.oh]}function ge(){var Te=u(O,0,0,ae,re,W).apply(null,g(R,U)),xe=(W?u:h)(O,z-Te[0],V-Te[1],ae,re,W);return x=(0,l.O)(Z,N,G),w=(0,T.c)(g,xe),E=(0,T.c)(x,w),C=s(w,oe),we()}function we(){return P=L=null,fe}return fe.stream=function(Te){return P&&L===Te?P:P=c((xe=x,(0,t.s)({point:function(ye,_e){var Ie=xe(ye,_e);return this.stream.point(Ie[0],Ie[1])}}))(Q(C(X(L=Te)))));var xe},fe.preclip=function(Te){return arguments.length?(Q=Te,ne=void 0,we()):Q},fe.postclip=function(Te){return arguments.length?(X=Te,$=v=_=f=null,we()):X},fe.clipAngle=function(Te){return arguments.length?(Q=+Te?(0,k.c)(ne=Te*p.qw):(ne=null,S.c),we()):ne*p.oh},fe.clipExtent=function(Te){return arguments.length?(X=null==Te?($=v=_=f=null,b.c):(0,o.c)($=+Te[0][0],v=+Te[0][1],_=+Te[1][0],f=+Te[1][1]),we()):null==$?null:[[$,v],[_,f]]},fe.scale=function(Te){return arguments.length?(O=+Te,ge()):O},fe.translate=function(Te){return arguments.length?(z=+Te[0],V=+Te[1],ge()):[z,V]},fe.center=function(Te){return arguments.length?(R=Te[0]%360*p.qw,U=Te[1]%360*p.qw,ge()):[R*p.oh,U*p.oh]},fe.rotate=function(Te){return arguments.length?(Z=Te[0]%360*p.qw,N=Te[1]%360*p.qw,G=Te.length>2?Te[2]%360*p.qw:0,ge()):[Z*p.oh,N*p.oh,G*p.oh]},fe.angle=function(Te){return arguments.length?(W=Te%360*p.qw,ge()):W*p.oh},fe.reflectX=function(Te){return arguments.length?(ae=Te?-1:1,ge()):ae<0},fe.reflectY=function(Te){return arguments.length?(re=Te?-1:1,ge()):re<0},fe.precision=function(Te){return arguments.length?(C=s(w,oe=Te*Te),we()):(0,p._I)(oe)},fe.fitExtent=function(Te,xe){return(0,i.QX)(fe,Te,xe)},fe.fitSize=function(Te,xe){return(0,i.UV)(fe,Te,xe)},fe.fitWidth=function(Te,xe){return(0,i.Qx)(fe,Te,xe)},fe.fitHeight=function(Te,xe){return(0,i.OW)(fe,Te,xe)},function(){return g=m.apply(this,arguments),fe.invert=g.invert&&ue,ge()}}},47984:function(ie,F,e){"use strict";e.d(F,{c:function(){return T},g:function(){return o}});var S=e(87952),k=e(64528);function o(b,p){var l=p*p,t=l*l;return[b*(.8707-.131979*l+t*(t*(.003971*l-.001529*t)-.013791)),p*(1.007226+l*(.015085+t*(.028874*l-.044475-.005916*t)))]}function T(){return(0,S.c)(o).scale(175.295)}o.invert=function(b,p){var l,t=p,i=25;do{var r=t*t,n=r*r;t-=l=(t*(1.007226+r*(.015085+n*(.028874*r-.044475-.005916*n)))-p)/(1.007226+r*(.045255+n*(.259866*r-.311325-.06507600000000001*n)))}while((0,k.a2)(l)>k.Gg&&--i>0);return[b/(.8707+(r=t*t)*(r*(r*r*r*(.003971-.001529*r)-.013791)-.131979)),t]}},4888:function(ie,F,e){"use strict";e.d(F,{c:function(){return b},t:function(){return T}});var S=e(64528),k=e(62280),o=e(87952);function T(p,l){return[(0,S.W8)(l)*(0,S.g$)(p),(0,S.g$)(l)]}function b(){return(0,o.c)(T).scale(249.5).clipAngle(90+S.Gg)}T.invert=(0,k.g)(S.qR)},92992:function(ie,F,e){"use strict";e.d(F,{O:function(){return T},c:function(){return t}});var S=e(68120),k=e(64528);function o(i,r){return[(0,k.a2)(i)>k.pi?i+Math.round(-i/k.kD)*k.kD:i,r]}function T(i,r,n){return(i%=k.kD)?r||n?(0,S.c)(p(i),l(r,n)):p(i):r||n?l(r,n):o}function b(i){return function(r,n){return[(r+=i)>k.pi?r-k.kD:r<-k.pi?r+k.kD:r,n]}}function p(i){var r=b(i);return r.invert=b(-i),r}function l(i,r){var n=(0,k.W8)(i),a=(0,k.g$)(i),s=(0,k.W8)(r),c=(0,k.g$)(r);function h(u,y){var d=(0,k.W8)(y),m=(0,k.W8)(u)*d,g=(0,k.g$)(u)*d,x=(0,k.g$)(y),v=x*n+m*a;return[(0,k.WE)(g*s-v*c,m*n-x*a),(0,k.qR)(v*s+g*c)]}return h.invert=function(u,y){var d=(0,k.W8)(y),m=(0,k.W8)(u)*d,g=(0,k.g$)(u)*d,x=(0,k.g$)(y),v=x*s-g*c;return[(0,k.WE)(g*s+x*c,m*n+v*a),(0,k.qR)(v*n-m*a)]},h}function t(i){function r(n){return(n=i(n[0]*k.qw,n[1]*k.qw))[0]*=k.oh,n[1]*=k.oh,n}return i=T(i[0]*k.qw,i[1]*k.qw,i.length>2?i[2]*k.qw:0),r.invert=function(n){return(n=i.invert(n[0]*k.qw,n[1]*k.qw))[0]*=k.oh,n[1]*=k.oh,n},r}o.invert=o},16016:function(ie,F,e){"use strict";function S(l,t){l&&o.hasOwnProperty(l.type)&&o[l.type](l,t)}e.d(F,{c:function(){return p}});var k={Feature:function(l,t){S(l.geometry,t)},FeatureCollection:function(l,t){for(var i=l.features,r=-1,n=i.length;++r<n;)S(i[r].geometry,t)}},o={Sphere:function(l,t){t.sphere()},Point:function(l,t){t.point((l=l.coordinates)[0],l[1],l[2])},MultiPoint:function(l,t){for(var i=l.coordinates,r=-1,n=i.length;++r<n;)t.point((l=i[r])[0],l[1],l[2])},LineString:function(l,t){T(l.coordinates,t,0)},MultiLineString:function(l,t){for(var i=l.coordinates,r=-1,n=i.length;++r<n;)T(i[r],t,0)},Polygon:function(l,t){b(l.coordinates,t)},MultiPolygon:function(l,t){for(var i=l.coordinates,r=-1,n=i.length;++r<n;)b(i[r],t)},GeometryCollection:function(l,t){for(var i=l.geometries,r=-1,n=i.length;++r<n;)S(i[r],t)}};function T(l,t,i){var r,n=-1,a=l.length-i;for(t.lineStart();++n<a;)t.point((r=l[n])[0],r[1],r[2]);t.lineEnd()}function b(l,t){var i=-1,r=l.length;for(t.polygonStart();++i<r;)T(l[i],t,1);t.polygonEnd()}function p(l,t){l&&k.hasOwnProperty(l.type)?k[l.type](l,t):S(l,t)}},15196:function(ie,F,e){"use strict";function S(T){return{stream:k(T)}}function k(T){return function(b){var p=new o;for(var l in T)p[l]=T[l];return p.stream=b,p}}function o(){}e.d(F,{c:function(){return S},s:function(){return k}}),o.prototype={constructor:o,point:function(T,b){this.stream.point(T,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},74148:function(ie,F,e){"use strict";function S(ce,me){return ce.parent===me.parent?1:2}function k(ce,me){return ce+me.x}function o(ce,me){return Math.max(ce,me.y)}function T(){var ce=S,me=1,Pe=1,Ae=!1;function Ce(Oe){var Ne,je=0;Oe.eachAfter(function(ze){var Ke,qe=ze.children;qe?(ze.x=(Ke=qe).reduce(k,0)/Ke.length,ze.y=function(Ke){return 1+Ke.reduce(o,0)}(qe)):(ze.x=Ne?je+=ce(ze,Ne):0,ze.y=0,Ne=ze)});var ve=function(ze){for(var qe;qe=ze.children;)ze=qe[0];return ze}(Oe),Me=function(ze){for(var qe;qe=ze.children;)ze=qe[qe.length-1];return ze}(Oe),Le=ve.x-ce(ve,Me)/2,Ue=Me.x+ce(Me,ve)/2;return Oe.eachAfter(Ae?function(ze){ze.x=(ze.x-Oe.x)*me,ze.y=(Oe.y-ze.y)*Pe}:function(ze){ze.x=(ze.x-Le)/(Ue-Le)*me,ze.y=(1-(Oe.y?ze.y/Oe.y:1))*Pe})}return Ce.separation=function(Oe){return arguments.length?(ce=Oe,Ce):ce},Ce.size=function(Oe){return arguments.length?(Ae=!1,me=+Oe[0],Pe=+Oe[1],Ce):Ae?null:[me,Pe]},Ce.nodeSize=function(Oe){return arguments.length?(Ae=!0,me=+Oe[0],Pe=+Oe[1],Ce):Ae?[me,Pe]:null},Ce}function b(ce){var me=0,Pe=ce.children,Ae=Pe&&Pe.length;if(Ae)for(;--Ae>=0;)me+=Pe[Ae].value;else me=1;ce.value=me}function p(ce,me){var Pe,Ae,Ce,Oe,Ne,je=new r(ce),ve=+ce.value&&(je.value=ce.value),Me=[je];for(null==me&&(me=l);Pe=Me.pop();)if(ve&&(Pe.value=+Pe.data.value),(Ce=me(Pe.data))&&(Ne=Ce.length))for(Pe.children=new Array(Ne),Oe=Ne-1;Oe>=0;--Oe)Me.push(Ae=Pe.children[Oe]=new r(Ce[Oe])),Ae.parent=Pe,Ae.depth=Pe.depth+1;return je.eachBefore(i)}function l(ce){return ce.children}function t(ce){ce.data=ce.data.data}function i(ce){var me=0;do{ce.height=me}while((ce=ce.parent)&&ce.height<++me)}function r(ce){this.data=ce,this.depth=this.height=0,this.parent=null}e.r(F),e.d(F,{cluster:function(){return T},hierarchy:function(){return p},pack:function(){return O},packEnclose:function(){return a},packSiblings:function(){return C},partition:function(){return N},stratify:function(){return Q},tree:function(){return we},treemap:function(){return Ie},treemapBinary:function(){return De},treemapDice:function(){return Z},treemapResquarify:function(){return he},treemapSlice:function(){return Te},treemapSliceDice:function(){return be},treemapSquarify:function(){return _e}}),r.prototype=p.prototype={constructor:r,count:function(){return this.eachAfter(b)},each:function(ce){var me,Pe,Ae,Ce,Oe=this,Ne=[Oe];do{for(me=Ne.reverse(),Ne=[];Oe=me.pop();)if(ce(Oe),Pe=Oe.children)for(Ae=0,Ce=Pe.length;Ae<Ce;++Ae)Ne.push(Pe[Ae])}while(Ne.length);return this},eachAfter:function(ce){for(var me,Pe,Ae,Ce=this,Oe=[Ce],Ne=[];Ce=Oe.pop();)if(Ne.push(Ce),me=Ce.children)for(Pe=0,Ae=me.length;Pe<Ae;++Pe)Oe.push(me[Pe]);for(;Ce=Ne.pop();)ce(Ce);return this},eachBefore:function(ce){for(var me,Pe,Ae=this,Ce=[Ae];Ae=Ce.pop();)if(ce(Ae),me=Ae.children)for(Pe=me.length-1;Pe>=0;--Pe)Ce.push(me[Pe]);return this},sum:function(ce){return this.eachAfter(function(me){for(var Pe=+ce(me.data)||0,Ae=me.children,Ce=Ae&&Ae.length;--Ce>=0;)Pe+=Ae[Ce].value;me.value=Pe})},sort:function(ce){return this.eachBefore(function(me){me.children&&me.children.sort(ce)})},path:function(ce){for(var me=this,Pe=function(Oe,Ne){if(Oe===Ne)return Oe;var je=Oe.ancestors(),ve=Ne.ancestors(),Me=null;for(Oe=je.pop(),Ne=ve.pop();Oe===Ne;)Me=Oe,Oe=je.pop(),Ne=ve.pop();return Me}(me,ce),Ae=[me];me!==Pe;)Ae.push(me=me.parent);for(var Ce=Ae.length;ce!==Pe;)Ae.splice(Ce,0,ce),ce=ce.parent;return Ae},ancestors:function(){for(var ce=this,me=[ce];ce=ce.parent;)me.push(ce);return me},descendants:function(){var ce=[];return this.each(function(me){ce.push(me)}),ce},leaves:function(){var ce=[];return this.eachBefore(function(me){me.children||ce.push(me)}),ce},links:function(){var ce=this,me=[];return ce.each(function(Pe){Pe!==ce&&me.push({source:Pe.parent,target:Pe})}),me},copy:function(){return p(this).eachBefore(t)}};var n=Array.prototype.slice;function a(ce){for(var me,Pe,Ae=0,Ce=(ce=function(Ne){for(var je,ve,Me=Ne.length;Me;)ve=Math.random()*Me--|0,je=Ne[Me],Ne[Me]=Ne[ve],Ne[ve]=je;return Ne}(n.call(ce))).length,Oe=[];Ae<Ce;)me=ce[Ae],Pe&&h(Pe,me)?++Ae:(Pe=y(Oe=s(Oe,me)),Ae=0);return Pe}function s(ce,me){var Pe,Ae;if(u(me,ce))return[me];for(Pe=0;Pe<ce.length;++Pe)if(c(me,ce[Pe])&&u(d(ce[Pe],me),ce))return[ce[Pe],me];for(Pe=0;Pe<ce.length-1;++Pe)for(Ae=Pe+1;Ae<ce.length;++Ae)if(c(d(ce[Pe],ce[Ae]),me)&&c(d(ce[Pe],me),ce[Ae])&&c(d(ce[Ae],me),ce[Pe])&&u(m(ce[Pe],ce[Ae],me),ce))return[ce[Pe],ce[Ae],me];throw new Error}function c(ce,me){var Pe=ce.r-me.r,Ae=me.x-ce.x,Ce=me.y-ce.y;return Pe<0||Pe*Pe<Ae*Ae+Ce*Ce}function h(ce,me){var Pe=ce.r-me.r+1e-6,Ae=me.x-ce.x,Ce=me.y-ce.y;return Pe>0&&Pe*Pe>Ae*Ae+Ce*Ce}function u(ce,me){for(var Pe=0;Pe<me.length;++Pe)if(!h(ce,me[Pe]))return!1;return!0}function y(ce){switch(ce.length){case 1:return{x:(me=ce[0]).x,y:me.y,r:me.r};case 2:return d(ce[0],ce[1]);case 3:return m(ce[0],ce[1],ce[2])}var me}function d(ce,me){var Pe=ce.x,Ae=ce.y,Ce=ce.r,Oe=me.x,Ne=me.y,je=me.r,ve=Oe-Pe,Me=Ne-Ae,Le=je-Ce,Ue=Math.sqrt(ve*ve+Me*Me);return{x:(Pe+Oe+ve/Ue*Le)/2,y:(Ae+Ne+Me/Ue*Le)/2,r:(Ue+Ce+je)/2}}function m(ce,me,Pe){var Ae=ce.x,Ce=ce.y,Oe=ce.r,Ne=me.x,je=me.y,ve=me.r,Me=Pe.x,Le=Pe.y,Ue=Pe.r,ze=Ae-Ne,qe=Ae-Me,Ke=Ce-je,it=Ce-Le,ft=ve-Oe,dt=Ue-Oe,kt=Ae*Ae+Ce*Ce-Oe*Oe,St=kt-Ne*Ne-je*je+ve*ve,Tt=kt-Me*Me-Le*Le+Ue*Ue,lt=qe*Ke-ze*it,ot=(Ke*Tt-it*St)/(2*lt)-Ae,Rt=(it*ft-Ke*dt)/lt,Vt=(qe*St-ze*Tt)/(2*lt)-Ce,Ht=(ze*dt-qe*ft)/lt,zt=Rt*Rt+Ht*Ht-1,Qe=2*(Oe+ot*Rt+Vt*Ht),nt=ot*ot+Vt*Vt-Oe*Oe,We=-(zt?(Qe+Math.sqrt(Qe*Qe-4*zt*nt))/(2*zt):nt/Qe);return{x:Ae+ot+Rt*We,y:Ce+Vt+Ht*We,r:We}}function g(ce,me,Pe){var Ae,Ce,Oe,Ne,je=ce.x-me.x,ve=ce.y-me.y,Me=je*je+ve*ve;Me?(Ce=me.r+Pe.r,Ne=ce.r+Pe.r,(Ce*=Ce)>(Ne*=Ne)?(Ae=(Me+Ne-Ce)/(2*Me),Oe=Math.sqrt(Math.max(0,Ne/Me-Ae*Ae)),Pe.x=ce.x-Ae*je-Oe*ve,Pe.y=ce.y-Ae*ve+Oe*je):(Ae=(Me+Ce-Ne)/(2*Me),Oe=Math.sqrt(Math.max(0,Ce/Me-Ae*Ae)),Pe.x=me.x+Ae*je-Oe*ve,Pe.y=me.y+Ae*ve+Oe*je)):(Pe.x=me.x+Pe.r,Pe.y=me.y)}function x(ce,me){var Pe=ce.r+me.r-1e-6,Ae=me.x-ce.x,Ce=me.y-ce.y;return Pe>0&&Pe*Pe>Ae*Ae+Ce*Ce}function v(ce){var me=ce._,Pe=ce.next._,Ae=me.r+Pe.r,Ce=(me.x*Pe.r+Pe.x*me.r)/Ae,Oe=(me.y*Pe.r+Pe.y*me.r)/Ae;return Ce*Ce+Oe*Oe}function _(ce){this._=ce,this.next=null,this.previous=null}function f(ce){if(!(Ce=ce.length))return 0;var me,Pe,Ae,Ce,Oe,Ne,je,ve,Me,Le,Ue;if((me=ce[0]).x=0,me.y=0,!(Ce>1))return me.r;if(me.x=-(Pe=ce[1]).r,Pe.x=me.r,Pe.y=0,!(Ce>2))return me.r+Pe.r;g(Pe,me,Ae=ce[2]),me=new _(me),Pe=new _(Pe),Ae=new _(Ae),me.next=Ae.previous=Pe,Pe.next=me.previous=Ae,Ae.next=Pe.previous=me;e:for(je=3;je<Ce;++je){g(me._,Pe._,Ae=ce[je]),Ae=new _(Ae),ve=Pe.next,Me=me.previous,Le=Pe._.r,Ue=me._.r;do{if(Le<=Ue){if(x(ve._,Ae._)){me.next=Pe=ve,Pe.previous=me,--je;continue e}Le+=ve._.r,ve=ve.next}else{if(x(Me._,Ae._)){(me=Me).next=Pe,Pe.previous=me,--je;continue e}Ue+=Me._.r,Me=Me.previous}}while(ve!==Me.next);for(Ae.previous=me,Ae.next=Pe,me.next=Pe.previous=Pe=Ae,Oe=v(me);(Ae=Ae.next)!==Pe;)(Ne=v(Ae))<Oe&&(me=Ae,Oe=Ne);Pe=me.next}for(me=[Pe._],Ae=Pe;(Ae=Ae.next)!==Pe;)me.push(Ae._);for(Ae=a(me),je=0;je<Ce;++je)(me=ce[je]).x-=Ae.x,me.y-=Ae.y;return Ae.r}function C(ce){return f(ce),ce}function w(ce){if("function"!=typeof ce)throw new Error;return ce}function E(){return 0}function P(ce){return function(){return ce}}function L(ce){return Math.sqrt(ce.value)}function O(){var ce=null,me=1,Pe=1,Ae=E;function Ce(Oe){return Oe.x=me/2,Oe.y=Pe/2,ce?Oe.eachBefore(z(ce)).eachAfter(V(Ae,.5)).eachBefore(R(1)):Oe.eachBefore(z(L)).eachAfter(V(E,1)).eachAfter(V(Ae,Oe.r/Math.min(me,Pe))).eachBefore(R(Math.min(me,Pe)/(2*Oe.r))),Oe}return Ce.radius=function(Oe){return arguments.length?(ce=null==(Ne=Oe)?null:w(Ne),Ce):ce;var Ne},Ce.size=function(Oe){return arguments.length?(me=+Oe[0],Pe=+Oe[1],Ce):[me,Pe]},Ce.padding=function(Oe){return arguments.length?(Ae="function"==typeof Oe?Oe:P(+Oe),Ce):Ae},Ce}function z(ce){return function(me){me.children||(me.r=Math.max(0,+ce(me)||0))}}function V(ce,me){return function(Pe){if(Ae=Pe.children){var Ae,Ce,Oe,Ne=Ae.length,je=ce(Pe)*me||0;if(je)for(Ce=0;Ce<Ne;++Ce)Ae[Ce].r+=je;if(Oe=f(Ae),je)for(Ce=0;Ce<Ne;++Ce)Ae[Ce].r-=je;Pe.r=Oe+je}}}function R(ce){return function(me){var Pe=me.parent;me.r*=ce,Pe&&(me.x=Pe.x+ce*me.x,me.y=Pe.y+ce*me.y)}}function U(ce){ce.x0=Math.round(ce.x0),ce.y0=Math.round(ce.y0),ce.x1=Math.round(ce.x1),ce.y1=Math.round(ce.y1)}function Z(ce,me,Pe,Ae,Ce){for(var Oe,Ne=ce.children,je=-1,ve=Ne.length,Me=ce.value&&(Ae-me)/ce.value;++je<ve;)(Oe=Ne[je]).y0=Pe,Oe.y1=Ce,Oe.x0=me,Oe.x1=me+=Oe.value*Me}function N(){var ce=1,me=1,Pe=0,Ae=!1;function Ce(Oe){var je,ve,Ne=Oe.height+1;return Oe.x0=Oe.y0=Pe,Oe.x1=ce,Oe.y1=me/Ne,Oe.eachBefore((je=me,ve=Ne,function(Me){Me.children&&Z(Me,Me.x0,je*(Me.depth+1)/ve,Me.x1,je*(Me.depth+2)/ve);var Le=Me.x0,Ue=Me.y0,ze=Me.x1-Pe,qe=Me.y1-Pe;ze<Le&&(Le=ze=(Le+ze)/2),qe<Ue&&(Ue=qe=(Ue+qe)/2),Me.x0=Le,Me.y0=Ue,Me.x1=ze,Me.y1=qe})),Ae&&Oe.eachBefore(U),Oe}return Ce.round=function(Oe){return arguments.length?(Ae=!!Oe,Ce):Ae},Ce.size=function(Oe){return arguments.length?(ce=+Oe[0],me=+Oe[1],Ce):[ce,me]},Ce.padding=function(Oe){return arguments.length?(Pe=+Oe,Ce):Pe},Ce}var G="$",W={depth:-1},ae={};function re(ce){return ce.id}function ne(ce){return ce.parentId}function Q(){var ce=re,me=ne;function Pe(Ae){var Ce,Oe,Ne,je,ve,Me,Le,Ue=Ae.length,ze=new Array(Ue),qe={};for(Oe=0;Oe<Ue;++Oe)ve=ze[Oe]=new r(Ce=Ae[Oe]),null!=(Me=ce(Ce,Oe,Ae))&&(Me+="")&&(qe[Le=G+(ve.id=Me)]=Le in qe?ae:ve);for(Oe=0;Oe<Ue;++Oe)if(ve=ze[Oe],null!=(Me=me(Ae[Oe],Oe,Ae))&&(Me+="")){if(!(je=qe[G+Me]))throw new Error("missing: "+Me);if(je===ae)throw new Error("ambiguous: "+Me);je.children?je.children.push(ve):je.children=[ve],ve.parent=je}else{if(Ne)throw new Error("multiple roots");Ne=ve}if(!Ne)throw new Error("no root");if(Ne.parent=W,Ne.eachBefore(function(Ke){Ke.depth=Ke.parent.depth+1,--Ue}).eachBefore(i),Ne.parent=null,Ue>0)throw new Error("cycle");return Ne}return Pe.id=function(Ae){return arguments.length?(ce=w(Ae),Pe):ce},Pe.parentId=function(Ae){return arguments.length?(me=w(Ae),Pe):me},Pe}function $(ce,me){return ce.parent===me.parent?1:2}function X(ce){var me=ce.children;return me?me[0]:ce.t}function oe(ce){var me=ce.children;return me?me[me.length-1]:ce.t}function fe(ce,me,Pe){var Ae=Pe/(me.i-ce.i);me.c-=Ae,me.s+=Pe,ce.c+=Ae,me.z+=Pe,me.m+=Pe}function ue(ce,me,Pe){return ce.a.parent===me.parent?ce.a:Pe}function ge(ce,me){this._=ce,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=me}function we(){var ce=$,me=1,Pe=1,Ae=null;function Ce(ve){var Me=function(dt){for(var kt,St,Tt,lt,ot,Rt=new ge(dt,0),Vt=[Rt];kt=Vt.pop();)if(Tt=kt._.children)for(kt.children=new Array(ot=Tt.length),lt=ot-1;lt>=0;--lt)Vt.push(St=kt.children[lt]=new ge(Tt[lt],lt)),St.parent=kt;return(Rt.parent=new ge(null,0)).children=[Rt],Rt}(ve);if(Me.eachAfter(Oe),Me.parent.m=-Me.z,Me.eachBefore(Ne),Ae)ve.eachBefore(je);else{var Le=ve,Ue=ve,ze=ve;ve.eachBefore(function(dt){dt.x<Le.x&&(Le=dt),dt.x>Ue.x&&(Ue=dt),dt.depth>ze.depth&&(ze=dt)});var qe=Le===Ue?1:ce(Le,Ue)/2,Ke=qe-Le.x,it=me/(Ue.x+qe+Ke),ft=Pe/(ze.depth||1);ve.eachBefore(function(dt){dt.x=(dt.x+Ke)*it,dt.y=dt.depth*ft})}return ve}function Oe(ve){var Me=ve.children,Le=ve.parent.children,Ue=ve.i?Le[ve.i-1]:null;if(Me){!function(qe){for(var Ke,it=0,ft=0,dt=qe.children,kt=dt.length;--kt>=0;)(Ke=dt[kt]).z+=it,Ke.m+=it,it+=Ke.s+(ft+=Ke.c)}(ve);var ze=(Me[0].z+Me[Me.length-1].z)/2;Ue?(ve.z=Ue.z+ce(ve._,Ue._),ve.m=ve.z-ze):ve.z=ze}else Ue&&(ve.z=Ue.z+ce(ve._,Ue._));ve.parent.A=function(qe,Ke,it){if(Ke){for(var ft,dt=qe,kt=qe,St=Ke,Tt=dt.parent.children[0],lt=dt.m,ot=kt.m,Rt=St.m,Vt=Tt.m;St=oe(St),dt=X(dt),St&&dt;)Tt=X(Tt),(kt=oe(kt)).a=qe,(ft=St.z+Rt-dt.z-lt+ce(St._,dt._))>0&&(fe(ue(St,qe,it),qe,ft),lt+=ft,ot+=ft),Rt+=St.m,lt+=dt.m,Vt+=Tt.m,ot+=kt.m;St&&!oe(kt)&&(kt.t=St,kt.m+=Rt-ot),dt&&!X(Tt)&&(Tt.t=dt,Tt.m+=lt-Vt,it=qe)}return it}(ve,Ue,ve.parent.A||Le[0])}function Ne(ve){ve._.x=ve.z+ve.parent.m,ve.m+=ve.parent.m}function je(ve){ve.x*=me,ve.y=ve.depth*Pe}return Ce.separation=function(ve){return arguments.length?(ce=ve,Ce):ce},Ce.size=function(ve){return arguments.length?(Ae=!1,me=+ve[0],Pe=+ve[1],Ce):Ae?null:[me,Pe]},Ce.nodeSize=function(ve){return arguments.length?(Ae=!0,me=+ve[0],Pe=+ve[1],Ce):Ae?[me,Pe]:null},Ce}function Te(ce,me,Pe,Ae,Ce){for(var Oe,Ne=ce.children,je=-1,ve=Ne.length,Me=ce.value&&(Ce-Pe)/ce.value;++je<ve;)(Oe=Ne[je]).x0=me,Oe.x1=Ae,Oe.y0=Pe,Oe.y1=Pe+=Oe.value*Me}ge.prototype=Object.create(r.prototype);var xe=(1+Math.sqrt(5))/2;function ye(ce,me,Pe,Ae,Ce,Oe){for(var Ne,je,ve,Me,Le,Ue,ze,qe,Ke,it,ft,dt=[],kt=me.children,St=0,Tt=0,lt=kt.length,ot=me.value;St<lt;){ve=Ce-Pe,Me=Oe-Ae;do{Le=kt[Tt++].value}while(!Le&&Tt<lt);for(Ue=ze=Le,ft=Le*Le*(it=Math.max(Me/ve,ve/Me)/(ot*ce)),Ke=Math.max(ze/ft,ft/Ue);Tt<lt;++Tt){if(Le+=je=kt[Tt].value,je<Ue&&(Ue=je),je>ze&&(ze=je),ft=Le*Le*it,(qe=Math.max(ze/ft,ft/Ue))>Ke){Le-=je;break}Ke=qe}dt.push(Ne={value:Le,dice:ve<Me,children:kt.slice(St,Tt)}),Ne.dice?Z(Ne,Pe,Ae,Ce,ot?Ae+=Me*Le/ot:Oe):Te(Ne,Pe,Ae,ot?Pe+=ve*Le/ot:Ce,Oe),ot-=Le,St=Tt}return dt}var _e=function ce(me){function Pe(Ae,Ce,Oe,Ne,je){ye(me,Ae,Ce,Oe,Ne,je)}return Pe.ratio=function(Ae){return ce((Ae=+Ae)>1?Ae:1)},Pe}(xe);function Ie(){var ce=_e,me=!1,Pe=1,Ae=1,Ce=[0],Oe=E,Ne=E,je=E,ve=E,Me=E;function Le(ze){return ze.x0=ze.y0=0,ze.x1=Pe,ze.y1=Ae,ze.eachBefore(Ue),Ce=[0],me&&ze.eachBefore(U),ze}function Ue(ze){var qe=Ce[ze.depth],Ke=ze.x0+qe,it=ze.y0+qe,ft=ze.x1-qe,dt=ze.y1-qe;ft<Ke&&(Ke=ft=(Ke+ft)/2),dt<it&&(it=dt=(it+dt)/2),ze.x0=Ke,ze.y0=it,ze.x1=ft,ze.y1=dt,ze.children&&(qe=Ce[ze.depth+1]=Oe(ze)/2,Ke+=Me(ze)-qe,it+=Ne(ze)-qe,(ft-=je(ze)-qe)<Ke&&(Ke=ft=(Ke+ft)/2),(dt-=ve(ze)-qe)<it&&(it=dt=(it+dt)/2),ce(ze,Ke,it,ft,dt))}return Le.round=function(ze){return arguments.length?(me=!!ze,Le):me},Le.size=function(ze){return arguments.length?(Pe=+ze[0],Ae=+ze[1],Le):[Pe,Ae]},Le.tile=function(ze){return arguments.length?(ce=w(ze),Le):ce},Le.padding=function(ze){return arguments.length?Le.paddingInner(ze).paddingOuter(ze):Le.paddingInner()},Le.paddingInner=function(ze){return arguments.length?(Oe="function"==typeof ze?ze:P(+ze),Le):Oe},Le.paddingOuter=function(ze){return arguments.length?Le.paddingTop(ze).paddingRight(ze).paddingBottom(ze).paddingLeft(ze):Le.paddingTop()},Le.paddingTop=function(ze){return arguments.length?(Ne="function"==typeof ze?ze:P(+ze),Le):Ne},Le.paddingRight=function(ze){return arguments.length?(je="function"==typeof ze?ze:P(+ze),Le):je},Le.paddingBottom=function(ze){return arguments.length?(ve="function"==typeof ze?ze:P(+ze),Le):ve},Le.paddingLeft=function(ze){return arguments.length?(Me="function"==typeof ze?ze:P(+ze),Le):Me},Le}function De(ce,me,Pe,Ae,Ce){var Oe,Ne,je=ce.children,ve=je.length,Me=new Array(ve+1);for(Me[0]=Ne=Oe=0;Oe<ve;++Oe)Me[Oe+1]=Ne+=je[Oe].value;!function Le(Ue,ze,qe,Ke,it,ft,dt){if(Ue>=ze-1){var kt=je[Ue];return kt.x0=Ke,kt.y0=it,kt.x1=ft,void(kt.y1=dt)}for(var St=Me[Ue],Tt=qe/2+St,lt=Ue+1,ot=ze-1;lt<ot;){var Rt=lt+ot>>>1;Me[Rt]<Tt?lt=Rt+1:ot=Rt}Tt-Me[lt-1]<Me[lt]-Tt&&Ue+1<lt&&--lt;var Vt=Me[lt]-St,Ht=qe-Vt;if(ft-Ke>dt-it){var zt=(Ke*Ht+ft*Vt)/qe;Le(Ue,lt,Vt,Ke,it,zt,dt),Le(lt,ze,Ht,zt,it,ft,dt)}else{var Qe=(it*Ht+dt*Vt)/qe;Le(Ue,lt,Vt,Ke,it,ft,Qe),Le(lt,ze,Ht,Ke,Qe,ft,dt)}}(0,ve,ce.value,me,Pe,Ae,Ce)}function be(ce,me,Pe,Ae,Ce){(1&ce.depth?Te:Z)(ce,me,Pe,Ae,Ce)}var he=function ce(me){function Pe(Ae,Ce,Oe,Ne,je){if((ve=Ae._squarify)&&ve.ratio===me)for(var ve,Me,Le,Ue,ze,qe=-1,Ke=ve.length,it=Ae.value;++qe<Ke;){for(Le=(Me=ve[qe]).children,Ue=Me.value=0,ze=Le.length;Ue<ze;++Ue)Me.value+=Le[Ue].value;Me.dice?Z(Me,Ce,Oe,Ne,Oe+=(je-Oe)*Me.value/it):Te(Me,Ce,Oe,Ce+=(Ne-Ce)*Me.value/it,je),it-=Me.value}else Ae._squarify=ve=ye(me,Ae,Ce,Oe,Ne,je),ve.ratio=me}return Pe.ratio=function(Ae){return ce((Ae=+Ae)>1?Ae:1)},Pe}(xe)},10132:function(ie,F,e){"use strict";e.d(F,{ak:function(){return h}});var S=Math.PI,k=2*S,o=1e-6,T=k-o;function b(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function p(){return new b}b.prototype=p.prototype={constructor:b,moveTo:function(u,y){this._+="M"+(this._x0=this._x1=+u)+","+(this._y0=this._y1=+y)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(u,y){this._+="L"+(this._x1=+u)+","+(this._y1=+y)},quadraticCurveTo:function(u,y,d,m){this._+="Q"+ +u+","+ +y+","+(this._x1=+d)+","+(this._y1=+m)},bezierCurveTo:function(u,y,d,m,g,x){this._+="C"+ +u+","+ +y+","+ +d+","+ +m+","+(this._x1=+g)+","+(this._y1=+x)},arcTo:function(u,y,d,m,g){var x=this._x1,v=this._y1,_=(d=+d)-(u=+u),f=(m=+m)-(y=+y),C=x-u,w=v-y,E=C*C+w*w;if((g=+g)<0)throw new Error("negative radius: "+g);if(null===this._x1)this._+="M"+(this._x1=u)+","+(this._y1=y);else if(E>o)if(Math.abs(w*_-f*C)>o&&g){var P=d-x,L=m-v,O=_*_+f*f,z=P*P+L*L,V=Math.sqrt(O),R=Math.sqrt(E),U=g*Math.tan((S-Math.acos((O+E-z)/(2*V*R)))/2),Z=U/R,N=U/V;Math.abs(Z-1)>o&&(this._+="L"+(u+Z*C)+","+(y+Z*w)),this._+="A"+g+","+g+",0,0,"+ +(w*P>C*L)+","+(this._x1=u+N*_)+","+(this._y1=y+N*f)}else this._+="L"+(this._x1=u)+","+(this._y1=y)},arc:function(u,y,d,m,g,x){u=+u,y=+y,x=!!x;var v=(d=+d)*Math.cos(m),_=d*Math.sin(m),f=u+v,C=y+_,w=1^x,E=x?m-g:g-m;if(d<0)throw new Error("negative radius: "+d);null===this._x1?this._+="M"+f+","+C:(Math.abs(this._x1-f)>o||Math.abs(this._y1-C)>o)&&(this._+="L"+f+","+C),d&&(E<0&&(E=E%k+k),E>T?this._+="A"+d+","+d+",0,1,"+w+","+(u-v)+","+(y-_)+"A"+d+","+d+",0,1,"+w+","+(this._x1=f)+","+(this._y1=C):E>o&&(this._+="A"+d+","+d+",0,"+ +(E>=S)+","+w+","+(this._x1=u+d*Math.cos(g))+","+(this._y1=y+d*Math.sin(g))))},rect:function(u,y,d,m){this._+="M"+(this._x0=this._x1=+u)+","+(this._y0=this._y1=+y)+"h"+ +d+"v"+ +m+"h"+-d+"Z"},toString:function(){return this._}};var l=p,t=Array.prototype.slice;function i(u){return function(){return u}}function r(u){return u[0]}function n(u){return u[1]}function a(u){return u.source}function s(u){return u.target}function c(u,y,d,m,g){u.moveTo(y,d),u.bezierCurveTo(y=(y+m)/2,d,y,g,m,g)}function h(){return function(u){var y=a,d=s,m=r,g=n,x=null;function v(){var _,f=t.call(arguments),C=y.apply(this,f),w=d.apply(this,f);if(x||(x=_=l()),u(x,+m.apply(this,(f[0]=C,f)),+g.apply(this,f),+m.apply(this,(f[0]=w,f)),+g.apply(this,f)),_)return x=null,_+""||null}return v.source=function(_){return arguments.length?(y=_,v):y},v.target=function(_){return arguments.length?(d=_,v):d},v.x=function(_){return arguments.length?(m="function"==typeof _?_:i(+_),v):m},v.y=function(_){return arguments.length?(g="function"==typeof _?_:i(+_),v):g},v.context=function(_){return arguments.length?(x=_??null,v):x},v}(c)}},94336:function(ie,F,e){"use strict";e.d(F,{Yn:function(){return a},m_:function(){return r},E9:function(){return s}});var S=e(8208),k=e(58931),o=e(46192),T=e(68936),b=e(32171),p=e(53528);function l(lt){if(0<=lt.y&&lt.y<100){var ot=new Date(-1,lt.m,lt.d,lt.H,lt.M,lt.S,lt.L);return ot.setFullYear(lt.y),ot}return new Date(lt.y,lt.m,lt.d,lt.H,lt.M,lt.S,lt.L)}function t(lt){if(0<=lt.y&&lt.y<100){var ot=new Date(Date.UTC(-1,lt.m,lt.d,lt.H,lt.M,lt.S,lt.L));return ot.setUTCFullYear(lt.y),ot}return new Date(Date.UTC(lt.y,lt.m,lt.d,lt.H,lt.M,lt.S,lt.L))}function i(lt,ot,Rt){return{y:lt,m:ot,d:Rt,H:0,M:0,S:0,L:0}}function r(lt){var ot=lt.dateTime,Rt=lt.date,Vt=lt.time,Ht=lt.periods,zt=lt.days,Qe=lt.shortDays,nt=lt.months,We=lt.shortMonths,et=g(Ht),gt=x(Ht),ht=g(zt),Ge=x(zt),He=g(Qe),ut=x(Qe),tt=g(nt),xt=x(nt),At=g(We),Mt=x(We),yt={a:function(qt){return Qe[qt.getDay()]},A:function(qt){return zt[qt.getDay()]},b:function(qt){return We[qt.getMonth()]},B:function(qt){return nt[qt.getMonth()]},c:null,d:Q,e:Q,f:ue,H:$,I:X,j:oe,L:fe,m:ge,M:we,p:function(qt){return Ht[+(qt.getHours()>=12)]},q:function(qt){return 1+~~(qt.getMonth()/3)},Q:St,s:Tt,S:Te,u:xe,U:ye,V:_e,w:Ie,W:De,x:null,X:null,y:be,Y:he,Z:ce,"%":kt},Pt={a:function(qt){return Qe[qt.getUTCDay()]},A:function(qt){return zt[qt.getUTCDay()]},b:function(qt){return We[qt.getUTCMonth()]},B:function(qt){return nt[qt.getUTCMonth()]},c:null,d:me,e:me,f:Ne,H:Pe,I:Ae,j:Ce,L:Oe,m:je,M:ve,p:function(qt){return Ht[+(qt.getUTCHours()>=12)]},q:function(qt){return 1+~~(qt.getUTCMonth()/3)},Q:St,s:Tt,S:Me,u:Le,U:Ue,V:ze,w:qe,W:Ke,x:null,X:null,y:it,Y:ft,Z:dt,"%":kt},Ct={a:function(qt,an,mn){var Qt=He.exec(an.slice(mn));return Qt?(qt.w=ut[Qt[0].toLowerCase()],mn+Qt[0].length):-1},A:function(qt,an,mn){var Qt=ht.exec(an.slice(mn));return Qt?(qt.w=Ge[Qt[0].toLowerCase()],mn+Qt[0].length):-1},b:function(qt,an,mn){var Qt=At.exec(an.slice(mn));return Qt?(qt.m=Mt[Qt[0].toLowerCase()],mn+Qt[0].length):-1},B:function(qt,an,mn){var Qt=tt.exec(an.slice(mn));return Qt?(qt.m=xt[Qt[0].toLowerCase()],mn+Qt[0].length):-1},c:function(qt,an,mn){return Bt(qt,ot,an,mn)},d:V,e:V,f:W,H:U,I:U,j:R,L:G,m:z,M:Z,p:function(qt,an,mn){var Qt=et.exec(an.slice(mn));return Qt?(qt.p=gt[Qt[0].toLowerCase()],mn+Qt[0].length):-1},q:O,Q:re,s:ne,S:N,u:_,U:f,V:C,w:v,W:w,x:function(qt,an,mn){return Bt(qt,Rt,an,mn)},X:function(qt,an,mn){return Bt(qt,Vt,an,mn)},y:P,Y:E,Z:L,"%":ae};function Dt(qt,an){return function(mn){var Qt,sn,Kt,qn=[],Fn=-1,Sn=0,hn=qt.length;for(mn instanceof Date||(mn=new Date(+mn));++Fn<hn;)37===qt.charCodeAt(Fn)&&(qn.push(qt.slice(Sn,Fn)),null!=(sn=c[Qt=qt.charAt(++Fn)])?Qt=qt.charAt(++Fn):sn="e"===Qt?" ":"0",(Kt=an[Qt])&&(Qt=Kt(mn,sn)),qn.push(Qt),Sn=Fn+1);return qn.push(qt.slice(Sn,Fn)),qn.join("")}}function Ut(qt,an){return function(mn){var Qt,sn,Kt=i(1900,void 0,1);if(Bt(Kt,qt,mn+="",0)!=mn.length)return null;if("Q"in Kt)return new Date(Kt.Q);if("s"in Kt)return new Date(1e3*Kt.s+("L"in Kt?Kt.L:0));if(an&&!("Z"in Kt)&&(Kt.Z=0),"p"in Kt&&(Kt.H=Kt.H%12+12*Kt.p),void 0===Kt.m&&(Kt.m="q"in Kt?Kt.q:0),"V"in Kt){if(Kt.V<1||Kt.V>53)return null;"w"in Kt||(Kt.w=1),"Z"in Kt?(sn=(Qt=t(i(Kt.y,0,1))).getUTCDay(),Qt=sn>4||0===sn?S.ot.ceil(Qt):(0,S.ot)(Qt),Qt=k.c.offset(Qt,7*(Kt.V-1)),Kt.y=Qt.getUTCFullYear(),Kt.m=Qt.getUTCMonth(),Kt.d=Qt.getUTCDate()+(Kt.w+6)%7):(sn=(Qt=l(i(Kt.y,0,1))).getDay(),Qt=sn>4||0===sn?o.qT.ceil(Qt):(0,o.qT)(Qt),Qt=T.c.offset(Qt,7*(Kt.V-1)),Kt.y=Qt.getFullYear(),Kt.m=Qt.getMonth(),Kt.d=Qt.getDate()+(Kt.w+6)%7)}else("W"in Kt||"U"in Kt)&&("w"in Kt||(Kt.w="u"in Kt?Kt.u%7:"W"in Kt?1:0),sn="Z"in Kt?t(i(Kt.y,0,1)).getUTCDay():l(i(Kt.y,0,1)).getDay(),Kt.m=0,Kt.d="W"in Kt?(Kt.w+6)%7+7*Kt.W-(sn+5)%7:Kt.w+7*Kt.U-(sn+6)%7);return"Z"in Kt?(Kt.H+=Kt.Z/100|0,Kt.M+=Kt.Z%100,t(Kt)):l(Kt)}}function Bt(qt,an,mn,Qt){for(var sn,Kt,qn=0,Fn=an.length,Sn=mn.length;qn<Fn;){if(Qt>=Sn)return-1;if(37===(sn=an.charCodeAt(qn++))){if(sn=an.charAt(qn++),!(Kt=Ct[sn in c?an.charAt(qn++):sn])||(Qt=Kt(qt,mn,Qt))<0)return-1}else if(sn!=mn.charCodeAt(Qt++))return-1}return Qt}return yt.x=Dt(Rt,yt),yt.X=Dt(Vt,yt),yt.c=Dt(ot,yt),Pt.x=Dt(Rt,Pt),Pt.X=Dt(Vt,Pt),Pt.c=Dt(ot,Pt),{format:function(qt){var an=Dt(qt+="",yt);return an.toString=function(){return qt},an},parse:function(qt){var an=Ut(qt+="",!1);return an.toString=function(){return qt},an},utcFormat:function(qt){var an=Dt(qt+="",Pt);return an.toString=function(){return qt},an},utcParse:function(qt){var an=Ut(qt+="",!0);return an.toString=function(){return qt},an}}}var n,a,s,c={"-":"",_:" ",0:"0"},h=/^\s*\d+/,u=/^%/,y=/[\\^$*+?|[\]().{}]/g;function d(lt,ot,Rt){var Vt=lt<0?"-":"",Ht=(Vt?-lt:lt)+"",zt=Ht.length;return Vt+(zt<Rt?new Array(Rt-zt+1).join(ot)+Ht:Ht)}function m(lt){return lt.replace(y,"\\$&")}function g(lt){return new RegExp("^(?:"+lt.map(m).join("|")+")","i")}function x(lt){for(var ot={},Rt=-1,Vt=lt.length;++Rt<Vt;)ot[lt[Rt].toLowerCase()]=Rt;return ot}function v(lt,ot,Rt){var Vt=h.exec(ot.slice(Rt,Rt+1));return Vt?(lt.w=+Vt[0],Rt+Vt[0].length):-1}function _(lt,ot,Rt){var Vt=h.exec(ot.slice(Rt,Rt+1));return Vt?(lt.u=+Vt[0],Rt+Vt[0].length):-1}function f(lt,ot,Rt){var Vt=h.exec(ot.slice(Rt,Rt+2));return Vt?(lt.U=+Vt[0],Rt+Vt[0].length):-1}function C(lt,ot,Rt){var Vt=h.exec(ot.slice(Rt,Rt+2));return Vt?(lt.V=+Vt[0],Rt+Vt[0].length):-1}function w(lt,ot,Rt){var Vt=h.exec(ot.slice(Rt,Rt+2));return Vt?(lt.W=+Vt[0],Rt+Vt[0].length):-1}function E(lt,ot,Rt){var Vt=h.exec(ot.slice(Rt,Rt+4));return Vt?(lt.y=+Vt[0],Rt+Vt[0].length):-1}function P(lt,ot,Rt){var Vt=h.exec(ot.slice(Rt,Rt+2));return Vt?(lt.y=+Vt[0]+(+Vt[0]>68?1900:2e3),Rt+Vt[0].length):-1}function L(lt,ot,Rt){var Vt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(ot.slice(Rt,Rt+6));return Vt?(lt.Z=Vt[1]?0:-(Vt[2]+(Vt[3]||"00")),Rt+Vt[0].length):-1}function O(lt,ot,Rt){var Vt=h.exec(ot.slice(Rt,Rt+1));return Vt?(lt.q=3*Vt[0]-3,Rt+Vt[0].length):-1}function z(lt,ot,Rt){var Vt=h.exec(ot.slice(Rt,Rt+2));return Vt?(lt.m=Vt[0]-1,Rt+Vt[0].length):-1}function V(lt,ot,Rt){var Vt=h.exec(ot.slice(Rt,Rt+2));return Vt?(lt.d=+Vt[0],Rt+Vt[0].length):-1}function R(lt,ot,Rt){var Vt=h.exec(ot.slice(Rt,Rt+3));return Vt?(lt.m=0,lt.d=+Vt[0],Rt+Vt[0].length):-1}function U(lt,ot,Rt){var Vt=h.exec(ot.slice(Rt,Rt+2));return Vt?(lt.H=+Vt[0],Rt+Vt[0].length):-1}function Z(lt,ot,Rt){var Vt=h.exec(ot.slice(Rt,Rt+2));return Vt?(lt.M=+Vt[0],Rt+Vt[0].length):-1}function N(lt,ot,Rt){var Vt=h.exec(ot.slice(Rt,Rt+2));return Vt?(lt.S=+Vt[0],Rt+Vt[0].length):-1}function G(lt,ot,Rt){var Vt=h.exec(ot.slice(Rt,Rt+3));return Vt?(lt.L=+Vt[0],Rt+Vt[0].length):-1}function W(lt,ot,Rt){var Vt=h.exec(ot.slice(Rt,Rt+6));return Vt?(lt.L=Math.floor(Vt[0]/1e3),Rt+Vt[0].length):-1}function ae(lt,ot,Rt){var Vt=u.exec(ot.slice(Rt,Rt+1));return Vt?Rt+Vt[0].length:-1}function re(lt,ot,Rt){var Vt=h.exec(ot.slice(Rt));return Vt?(lt.Q=+Vt[0],Rt+Vt[0].length):-1}function ne(lt,ot,Rt){var Vt=h.exec(ot.slice(Rt));return Vt?(lt.s=+Vt[0],Rt+Vt[0].length):-1}function Q(lt,ot){return d(lt.getDate(),ot,2)}function $(lt,ot){return d(lt.getHours(),ot,2)}function X(lt,ot){return d(lt.getHours()%12||12,ot,2)}function oe(lt,ot){return d(1+T.c.count((0,b.c)(lt),lt),ot,3)}function fe(lt,ot){return d(lt.getMilliseconds(),ot,3)}function ue(lt,ot){return fe(lt,ot)+"000"}function ge(lt,ot){return d(lt.getMonth()+1,ot,2)}function we(lt,ot){return d(lt.getMinutes(),ot,2)}function Te(lt,ot){return d(lt.getSeconds(),ot,2)}function xe(lt){var ot=lt.getDay();return 0===ot?7:ot}function ye(lt,ot){return d(o.uU.count((0,b.c)(lt)-1,lt),ot,2)}function _e(lt,ot){var Rt=lt.getDay();return lt=Rt>=4||0===Rt?(0,o.kD)(lt):o.kD.ceil(lt),d(o.kD.count((0,b.c)(lt),lt)+(4===(0,b.c)(lt).getDay()),ot,2)}function Ie(lt){return lt.getDay()}function De(lt,ot){return d(o.qT.count((0,b.c)(lt)-1,lt),ot,2)}function be(lt,ot){return d(lt.getFullYear()%100,ot,2)}function he(lt,ot){return d(lt.getFullYear()%1e4,ot,4)}function ce(lt){var ot=lt.getTimezoneOffset();return(ot>0?"-":(ot*=-1,"+"))+d(ot/60|0,"0",2)+d(ot%60,"0",2)}function me(lt,ot){return d(lt.getUTCDate(),ot,2)}function Pe(lt,ot){return d(lt.getUTCHours(),ot,2)}function Ae(lt,ot){return d(lt.getUTCHours()%12||12,ot,2)}function Ce(lt,ot){return d(1+k.c.count((0,p.c)(lt),lt),ot,3)}function Oe(lt,ot){return d(lt.getUTCMilliseconds(),ot,3)}function Ne(lt,ot){return Oe(lt,ot)+"000"}function je(lt,ot){return d(lt.getUTCMonth()+1,ot,2)}function ve(lt,ot){return d(lt.getUTCMinutes(),ot,2)}function Me(lt,ot){return d(lt.getUTCSeconds(),ot,2)}function Le(lt){var ot=lt.getUTCDay();return 0===ot?7:ot}function Ue(lt,ot){return d(S.EV.count((0,p.c)(lt)-1,lt),ot,2)}function ze(lt,ot){var Rt=lt.getUTCDay();return lt=Rt>=4||0===Rt?(0,S.yA)(lt):S.yA.ceil(lt),d(S.yA.count((0,p.c)(lt),lt)+(4===(0,p.c)(lt).getUTCDay()),ot,2)}function qe(lt){return lt.getUTCDay()}function Ke(lt,ot){return d(S.ot.count((0,p.c)(lt)-1,lt),ot,2)}function it(lt,ot){return d(lt.getUTCFullYear()%100,ot,2)}function ft(lt,ot){return d(lt.getUTCFullYear()%1e4,ot,4)}function dt(){return"+0000"}function kt(){return"%"}function St(lt){return+lt}function Tt(lt){return Math.floor(+lt/1e3)}n=r({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),a=n.format,s=n.utcFormat},68936:function(ie,F,e){"use strict";e.d(F,{m:function(){return T}});var S=e(81628),k=e(69792),o=(0,S.c)(function(b){b.setHours(0,0,0,0)},function(b,p){b.setDate(b.getDate()+p)},function(b,p){return(p-b-(p.getTimezoneOffset()-b.getTimezoneOffset())*k.iy)/k.SK},function(b){return b.getDate()-1});F.c=o;var T=o.range},69792:function(ie,F,e){"use strict";e.d(F,{KK:function(){return b},SK:function(){return T},cg:function(){return o},iy:function(){return k},yc:function(){return S}});var S=1e3,k=6e4,o=36e5,T=864e5,b=6048e5},73220:function(ie,F,e){"use strict";e.r(F),e.d(F,{timeDay:function(){return h.c},timeDays:function(){return h.m},timeFriday:function(){return u.iB},timeFridays:function(){return u.sJ},timeHour:function(){return s},timeHours:function(){return c},timeInterval:function(){return S.c},timeMillisecond:function(){return o},timeMilliseconds:function(){return T},timeMinute:function(){return r},timeMinutes:function(){return n},timeMonday:function(){return u.qT},timeMondays:function(){return u.QP},timeMonth:function(){return d},timeMonths:function(){return m},timeSaturday:function(){return u.Wc},timeSaturdays:function(){return u.aI},timeSecond:function(){return l},timeSeconds:function(){return t},timeSunday:function(){return u.uU},timeSundays:function(){return u.Ab},timeThursday:function(){return u.kD},timeThursdays:function(){return u.eC},timeTuesday:function(){return u.Mf},timeTuesdays:function(){return u.Oc},timeWednesday:function(){return u.eg},timeWednesdays:function(){return u.sn},timeWeek:function(){return u.uU},timeWeeks:function(){return u.Ab},timeYear:function(){return g.c},timeYears:function(){return g.Q},utcDay:function(){return E.c},utcDays:function(){return E.o},utcFriday:function(){return P.od},utcFridays:function(){return P.iG},utcHour:function(){return C},utcHours:function(){return w},utcMillisecond:function(){return o},utcMilliseconds:function(){return T},utcMinute:function(){return v},utcMinutes:function(){return _},utcMonday:function(){return P.ot},utcMondays:function(){return P.iO},utcMonth:function(){return O},utcMonths:function(){return z},utcSaturday:function(){return P.Ad},utcSaturdays:function(){return P.K8},utcSecond:function(){return l},utcSeconds:function(){return t},utcSunday:function(){return P.EV},utcSundays:function(){return P.Wq},utcThursday:function(){return P.yA},utcThursdays:function(){return P.ob},utcTuesday:function(){return P.sG},utcTuesdays:function(){return P.kl},utcWednesday:function(){return P._6},utcWednesdays:function(){return P.W_},utcWeek:function(){return P.EV},utcWeeks:function(){return P.Wq},utcYear:function(){return V.c},utcYears:function(){return V.i}});var S=e(81628),k=(0,S.c)(function(){},function(R,U){R.setTime(+R+U)},function(R,U){return U-R});k.every=function(R){return R=Math.floor(R),isFinite(R)&&R>0?R>1?(0,S.c)(function(U){U.setTime(Math.floor(U/R)*R)},function(U,Z){U.setTime(+U+Z*R)},function(U,Z){return(Z-U)/R}):k:null};var o=k,T=k.range,b=e(69792),p=(0,S.c)(function(R){R.setTime(R-R.getMilliseconds())},function(R,U){R.setTime(+R+U*b.yc)},function(R,U){return(U-R)/b.yc},function(R){return R.getUTCSeconds()}),l=p,t=p.range,i=(0,S.c)(function(R){R.setTime(R-R.getMilliseconds()-R.getSeconds()*b.yc)},function(R,U){R.setTime(+R+U*b.iy)},function(R,U){return(U-R)/b.iy},function(R){return R.getMinutes()}),r=i,n=i.range,a=(0,S.c)(function(R){R.setTime(R-R.getMilliseconds()-R.getSeconds()*b.yc-R.getMinutes()*b.iy)},function(R,U){R.setTime(+R+U*b.cg)},function(R,U){return(U-R)/b.cg},function(R){return R.getHours()}),s=a,c=a.range,h=e(68936),u=e(46192),y=(0,S.c)(function(R){R.setDate(1),R.setHours(0,0,0,0)},function(R,U){R.setMonth(R.getMonth()+U)},function(R,U){return U.getMonth()-R.getMonth()+12*(U.getFullYear()-R.getFullYear())},function(R){return R.getMonth()}),d=y,m=y.range,g=e(32171),x=(0,S.c)(function(R){R.setUTCSeconds(0,0)},function(R,U){R.setTime(+R+U*b.iy)},function(R,U){return(U-R)/b.iy},function(R){return R.getUTCMinutes()}),v=x,_=x.range,f=(0,S.c)(function(R){R.setUTCMinutes(0,0,0)},function(R,U){R.setTime(+R+U*b.cg)},function(R,U){return(U-R)/b.cg},function(R){return R.getUTCHours()}),C=f,w=f.range,E=e(58931),P=e(8208),L=(0,S.c)(function(R){R.setUTCDate(1),R.setUTCHours(0,0,0,0)},function(R,U){R.setUTCMonth(R.getUTCMonth()+U)},function(R,U){return U.getUTCMonth()-R.getUTCMonth()+12*(U.getUTCFullYear()-R.getUTCFullYear())},function(R){return R.getUTCMonth()}),O=L,z=L.range,V=e(53528)},81628:function(ie,F,e){"use strict";e.d(F,{c:function(){return o}});var S=new Date,k=new Date;function o(T,b,p,l){function t(i){return T(i=0===arguments.length?new Date:new Date(+i)),i}return t.floor=function(i){return T(i=new Date(+i)),i},t.ceil=function(i){return T(i=new Date(i-1)),b(i,1),T(i),i},t.round=function(i){var r=t(i),n=t.ceil(i);return i-r<n-i?r:n},t.offset=function(i,r){return b(i=new Date(+i),null==r?1:Math.floor(r)),i},t.range=function(i,r,n){var a,s=[];if(i=t.ceil(i),n=null==n?1:Math.floor(n),!(i<r&&n>0))return s;do{s.push(a=new Date(+i)),b(i,n),T(i)}while(a<i&&i<r);return s},t.filter=function(i){return o(function(r){if(r>=r)for(;T(r),!i(r);)r.setTime(r-1)},function(r,n){if(r>=r)if(n<0)for(;++n<=0;)for(;b(r,-1),!i(r););else for(;--n>=0;)for(;b(r,1),!i(r););})},p&&(t.count=function(i,r){return S.setTime(+i),k.setTime(+r),T(S),T(k),Math.floor(p(S,k))},t.every=function(i){return i=Math.floor(i),isFinite(i)&&i>0?i>1?t.filter(l?function(r){return l(r)%i==0}:function(r){return t.count(0,r)%i==0}):t:null}),t}},58931:function(ie,F,e){"use strict";e.d(F,{o:function(){return T}});var S=e(81628),k=e(69792),o=(0,S.c)(function(b){b.setUTCHours(0,0,0,0)},function(b,p){b.setUTCDate(b.getUTCDate()+p)},function(b,p){return(p-b)/k.SK},function(b){return b.getUTCDate()-1});F.c=o;var T=o.range},8208:function(ie,F,e){"use strict";e.d(F,{Ad:function(){return r},EV:function(){return T},K8:function(){return y},W_:function(){return c},Wq:function(){return n},_6:function(){return l},iG:function(){return u},iO:function(){return a},kl:function(){return s},ob:function(){return h},od:function(){return i},ot:function(){return b},sG:function(){return p},yA:function(){return t}});var S=e(81628),k=e(69792);function o(d){return(0,S.c)(function(m){m.setUTCDate(m.getUTCDate()-(m.getUTCDay()+7-d)%7),m.setUTCHours(0,0,0,0)},function(m,g){m.setUTCDate(m.getUTCDate()+7*g)},function(m,g){return(g-m)/k.KK})}var T=o(0),b=o(1),p=o(2),l=o(3),t=o(4),i=o(5),r=o(6),n=T.range,a=b.range,s=p.range,c=l.range,h=t.range,u=i.range,y=r.range},53528:function(ie,F,e){"use strict";e.d(F,{i:function(){return o}});var S=e(81628),k=(0,S.c)(function(T){T.setUTCMonth(0,1),T.setUTCHours(0,0,0,0)},function(T,b){T.setUTCFullYear(T.getUTCFullYear()+b)},function(T,b){return b.getUTCFullYear()-T.getUTCFullYear()},function(T){return T.getUTCFullYear()});k.every=function(T){return isFinite(T=Math.floor(T))&&T>0?(0,S.c)(function(b){b.setUTCFullYear(Math.floor(b.getUTCFullYear()/T)*T),b.setUTCMonth(0,1),b.setUTCHours(0,0,0,0)},function(b,p){b.setUTCFullYear(b.getUTCFullYear()+p*T)}):null},F.c=k;var o=k.range},46192:function(ie,F,e){"use strict";e.d(F,{Ab:function(){return n},Mf:function(){return p},Oc:function(){return s},QP:function(){return a},Wc:function(){return r},aI:function(){return y},eC:function(){return h},eg:function(){return l},iB:function(){return i},kD:function(){return t},qT:function(){return b},sJ:function(){return u},sn:function(){return c},uU:function(){return T}});var S=e(81628),k=e(69792);function o(d){return(0,S.c)(function(m){m.setDate(m.getDate()-(m.getDay()+7-d)%7),m.setHours(0,0,0,0)},function(m,g){m.setDate(m.getDate()+7*g)},function(m,g){return(g-m-(g.getTimezoneOffset()-m.getTimezoneOffset())*k.iy)/k.KK})}var T=o(0),b=o(1),p=o(2),l=o(3),t=o(4),i=o(5),r=o(6),n=T.range,a=b.range,s=p.range,c=l.range,h=t.range,u=i.range,y=r.range},32171:function(ie,F,e){"use strict";e.d(F,{Q:function(){return o}});var S=e(81628),k=(0,S.c)(function(T){T.setMonth(0,1),T.setHours(0,0,0,0)},function(T,b){T.setFullYear(T.getFullYear()+b)},function(T,b){return b.getFullYear()-T.getFullYear()},function(T){return T.getFullYear()});k.every=function(T){return isFinite(T=Math.floor(T))&&T>0?(0,S.c)(function(b){b.setFullYear(Math.floor(b.getFullYear()/T)*T),b.setMonth(0,1),b.setHours(0,0,0,0)},function(b,p){b.setFullYear(b.getFullYear()+p*T)}):null},F.c=k;var o=k.range},64348:function(ie,F,e){"use strict";var S=e(39640)(),k=e(53664),o=S&&k("%Object.defineProperty%",!0);if(o)try{o({},"a",{value:1})}catch{o=!1}var T=k("%SyntaxError%"),b=k("%TypeError%"),p=e(2304);ie.exports=function(l,t,i){if(!l||"object"!=typeof l&&"function"!=typeof l)throw new b("`obj` must be an object or a function`");if("string"!=typeof t&&"symbol"!=typeof t)throw new b("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new b("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new b("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new b("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new b("`loose`, if provided, must be a boolean");var r=arguments.length>3?arguments[3]:null,n=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,s=arguments.length>6&&arguments[6],c=!!p&&p(l,t);if(o)o(l,t,{configurable:null===a&&c?c.configurable:!a,enumerable:null===r&&c?c.enumerable:!r,value:i,writable:null===n&&c?c.writable:!n});else{if(!s&&(r||n||a))throw new T("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");l[t]=i}}},81288:function(ie,F,e){"use strict";var S=e(41820),k="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),o=Object.prototype.toString,T=Array.prototype.concat,b=Object.defineProperty,p=e(39640)(),l=b&&p,t=function(r,n,a,s){if(n in r)if(!0===s){if(r[n]===a)return}else if("function"!=typeof(c=s)||"[object Function]"!==o.call(c)||!s())return;var c;l?b(r,n,{configurable:!0,enumerable:!1,value:a,writable:!0}):r[n]=a},i=function(r,n){var a=arguments.length>2?arguments[2]:{},s=S(n);k&&(s=T.call(s,Object.getOwnPropertySymbols(n)));for(var c=0;c<s.length;c+=1)t(r,s[c],n[s[c]],a[s[c]])};i.supportsDescriptors=!!l,ie.exports=i},31264:function(ie){ie.exports=function(){for(var F=0;F<arguments.length;F++)if(void 0!==arguments[F])return arguments[F]}},63768:function(ie){"use strict";ie.exports=S;var F=(S.canvas=document.createElement("canvas")).getContext("2d"),e=k([32,126]);function S(o,T){Array.isArray(o)&&(o=o.join(", "));var b,p={},l=16,t=.05;T&&(2===T.length&&"number"==typeof T[0]?b=k(T):Array.isArray(T)?b=T:(T.o?b=k(T.o):T.pairs&&(b=T.pairs),T.fontSize&&(l=T.fontSize),null!=T.threshold&&(t=T.threshold))),b||(b=e),F.font=l+"px "+o;for(var i=0;i<b.length;i++){var r=b[i],n=F.measureText(r[0]).width+F.measureText(r[1]).width,a=F.measureText(r).width;Math.abs(n-a)>l*t&&(p[r]=(a-n)/l*1e3)}return p}function k(o){for(var T=[],b=o[0];b<=o[1];b++)for(var p=String.fromCharCode(b),l=o[0];l<o[1];l++){var t=p+String.fromCharCode(l);T.push(t)}return T}S.createPairs=k,S.ascii=e},22235:function(ie,F,e){var S=e(49972),k=e(48816),o={M:"moveTo",C:"bezierCurveTo"};ie.exports=function(T,b){T.beginPath(),k(S(b)).forEach(function(p){var l=p[0],t=p.slice(1);T[o[l]].apply(T,t)}),T.closePath()}},72512:function(ie){ie.exports=function(F){switch(F){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},10352:function(ie){"use strict";function F(e,S,k){var o=0|e[k];if(o<=0)return[];var T,b=new Array(o);if(k===e.length-1)for(T=0;T<o;++T)b[T]=S;else for(T=0;T<o;++T)b[T]=F(e,S,k+1);return b}ie.exports=function(e,S){switch(void 0===S&&(S=0),typeof e){case"number":if(e>0)return function(k,o){var T,b;for(T=new Array(k),b=0;b<k;++b)T[b]=o;return T}(0|e,S);break;case"object":if("number"==typeof e.length)return F(e,S,0)}return[]}},28912:function(ie){"use strict";function F(C,w,E){E=E||2;var P,L,O,z,V,R,U,Z=w&&w.length,N=Z?w[0]*E:C.length,G=e(C,0,N,E,!0),W=[];if(!G||G.next===G.prev)return W;if(Z&&(G=function(re,ne,Q,$){var X,oe,fe,ue=[];for(X=0,oe=ne.length;X<oe;X++)(fe=e(re,ne[X]*$,X<oe-1?ne[X+1]*$:re.length,$,!1))===fe.next&&(fe.steiner=!0),ue.push(n(fe));for(ue.sort(l),X=0;X<ue.length;X++)t(ue[X],Q),Q=S(Q,Q.next);return Q}(C,w,G,E)),C.length>80*E){P=O=C[0],L=z=C[1];for(var ae=E;ae<N;ae+=E)(V=C[ae])<P&&(P=V),(R=C[ae+1])<L&&(L=R),V>O&&(O=V),R>z&&(z=R);U=0!==(U=Math.max(O-P,z-L))?1/U:0}return k(G,W,E,P,L,U),W}function e(C,w,E,P,L){var O,z;if(L===f(C,w,E,P)>0)for(O=w;O<E;O+=P)z=x(O,C[O],C[O+1],z);else for(O=E-P;O>=w;O-=P)z=x(O,C[O],C[O+1],z);return z&&h(z,z.next)&&(v(z),z=z.next),z}function S(C,w){if(!C)return C;w||(w=C);var E,P=C;do{if(E=!1,P.steiner||!h(P,P.next)&&0!==c(P.prev,P,P.next))P=P.next;else{if(v(P),(P=w=P.prev)===P.next)break;E=!0}}while(E||P!==w);return w}function k(C,w,E,P,L,O,z){if(C){!z&&O&&function(Z,N,G,W){var ae=Z;do{null===ae.z&&(ae.z=r(ae.x,ae.y,N,G,W)),ae.prevZ=ae.prev,ae.nextZ=ae.next,ae=ae.next}while(ae!==Z);ae.prevZ.nextZ=null,ae.prevZ=null,function(re){var ne,Q,$,X,oe,fe,ue,ge,we=1;do{for(Q=re,re=null,oe=null,fe=0;Q;){for(fe++,$=Q,ue=0,ne=0;ne<we&&(ue++,$=$.nextZ);ne++);for(ge=we;ue>0||ge>0&&$;)0!==ue&&(0===ge||!$||Q.z<=$.z)?(X=Q,Q=Q.nextZ,ue--):(X=$,$=$.nextZ,ge--),oe?oe.nextZ=X:re=X,X.prevZ=oe,oe=X;Q=$}oe.nextZ=null,we*=2}while(fe>1)}(ae)}(C,P,L,O);for(var V,R,U=C;C.prev!==C.next;)if(V=C.prev,R=C.next,O?T(C,P,L,O):o(C))w.push(V.i/E),w.push(C.i/E),w.push(R.i/E),v(C),C=R.next,U=R.next;else if((C=R)===U){z?1===z?k(C=b(S(C),w,E),w,E,P,L,O,2):2===z&&p(C,w,E,P,L,O):k(S(C),w,E,P,L,O,1);break}}}function o(C){var w=C.prev,E=C,P=C.next;if(c(w,E,P)>=0)return!1;for(var L=C.next.next;L!==C.prev;){if(a(w.x,w.y,E.x,E.y,P.x,P.y,L.x,L.y)&&c(L.prev,L,L.next)>=0)return!1;L=L.next}return!0}function T(C,w,E,P){var L=C.prev,O=C,z=C.next;if(c(L,O,z)>=0)return!1;for(var U=L.x>O.x?L.x>z.x?L.x:z.x:O.x>z.x?O.x:z.x,Z=L.y>O.y?L.y>z.y?L.y:z.y:O.y>z.y?O.y:z.y,N=r(L.x<O.x?L.x<z.x?L.x:z.x:O.x<z.x?O.x:z.x,L.y<O.y?L.y<z.y?L.y:z.y:O.y<z.y?O.y:z.y,w,E,P),G=r(U,Z,w,E,P),W=C.prevZ,ae=C.nextZ;W&&W.z>=N&&ae&&ae.z<=G;){if(W!==C.prev&&W!==C.next&&a(L.x,L.y,O.x,O.y,z.x,z.y,W.x,W.y)&&c(W.prev,W,W.next)>=0||(W=W.prevZ,ae!==C.prev&&ae!==C.next&&a(L.x,L.y,O.x,O.y,z.x,z.y,ae.x,ae.y)&&c(ae.prev,ae,ae.next)>=0))return!1;ae=ae.nextZ}for(;W&&W.z>=N;){if(W!==C.prev&&W!==C.next&&a(L.x,L.y,O.x,O.y,z.x,z.y,W.x,W.y)&&c(W.prev,W,W.next)>=0)return!1;W=W.prevZ}for(;ae&&ae.z<=G;){if(ae!==C.prev&&ae!==C.next&&a(L.x,L.y,O.x,O.y,z.x,z.y,ae.x,ae.y)&&c(ae.prev,ae,ae.next)>=0)return!1;ae=ae.nextZ}return!0}function b(C,w,E){var P=C;do{var L=P.prev,O=P.next.next;!h(L,O)&&u(L,P,P.next,O)&&m(L,O)&&m(O,L)&&(w.push(L.i/E),w.push(P.i/E),w.push(O.i/E),v(P),v(P.next),P=C=O),P=P.next}while(P!==C);return S(P)}function p(C,w,E,P,L,O){var z=C;do{for(var V=z.next.next;V!==z.prev;){if(z.i!==V.i&&s(z,V)){var R=g(z,V);return z=S(z,z.next),R=S(R,R.next),k(z,w,E,P,L,O),void k(R,w,E,P,L,O)}V=V.next}z=z.next}while(z!==C)}function l(C,w){return C.x-w.x}function t(C,w){if(w=function(P,L){var O,z=L,V=P.x,R=P.y,U=-1/0;do{if(R<=z.y&&R>=z.next.y&&z.next.y!==z.y){var Z=z.x+(R-z.y)*(z.next.x-z.x)/(z.next.y-z.y);if(Z<=V&&Z>U){if(U=Z,Z===V){if(R===z.y)return z;if(R===z.next.y)return z.next}O=z.x<z.next.x?z:z.next}}z=z.next}while(z!==L);if(!O)return null;if(V===U)return O;var N,G=O,W=O.x,ae=O.y,re=1/0;z=O;do{V>=z.x&&z.x>=W&&V!==z.x&&a(R<ae?V:U,R,W,ae,R<ae?U:V,R,z.x,z.y)&&(N=Math.abs(R-z.y)/(V-z.x),m(z,P)&&(N<re||N===re&&(z.x>O.x||z.x===O.x&&i(O,z)))&&(O=z,re=N)),z=z.next}while(z!==G);return O}(C,w)){var E=g(w,C);S(w,w.next),S(E,E.next)}}function i(C,w){return c(C.prev,C,w.prev)<0&&c(w.next,C,C.next)<0}function r(C,w,E,P,L){return(C=1431655765&((C=858993459&((C=252645135&((C=16711935&((C=32767*(C-E)*L)|C<<8))|C<<4))|C<<2))|C<<1))|(w=1431655765&((w=858993459&((w=252645135&((w=16711935&((w=32767*(w-P)*L)|w<<8))|w<<4))|w<<2))|w<<1))<<1}function n(C){var w=C,E=C;do{(w.x<E.x||w.x===E.x&&w.y<E.y)&&(E=w),w=w.next}while(w!==C);return E}function a(C,w,E,P,L,O,z,V){return(L-z)*(w-V)-(C-z)*(O-V)>=0&&(C-z)*(P-V)-(E-z)*(w-V)>=0&&(E-z)*(O-V)-(L-z)*(P-V)>=0}function s(C,w){return C.next.i!==w.i&&C.prev.i!==w.i&&!function(E,P){var L=E;do{if(L.i!==E.i&&L.next.i!==E.i&&L.i!==P.i&&L.next.i!==P.i&&u(L,L.next,E,P))return!0;L=L.next}while(L!==E);return!1}(C,w)&&(m(C,w)&&m(w,C)&&function(E,P){var L=E,O=!1,z=(E.x+P.x)/2,V=(E.y+P.y)/2;do{L.y>V!=L.next.y>V&&L.next.y!==L.y&&z<(L.next.x-L.x)*(V-L.y)/(L.next.y-L.y)+L.x&&(O=!O),L=L.next}while(L!==E);return O}(C,w)&&(c(C.prev,C,w.prev)||c(C,w.prev,w))||h(C,w)&&c(C.prev,C,C.next)>0&&c(w.prev,w,w.next)>0)}function c(C,w,E){return(w.y-C.y)*(E.x-w.x)-(w.x-C.x)*(E.y-w.y)}function h(C,w){return C.x===w.x&&C.y===w.y}function u(C,w,E,P){var L=d(c(C,w,E)),O=d(c(C,w,P)),z=d(c(E,P,C)),V=d(c(E,P,w));return L!==O&&z!==V||!(0!==L||!y(C,E,w))||!(0!==O||!y(C,P,w))||!(0!==z||!y(E,C,P))||!(0!==V||!y(E,w,P))}function y(C,w,E){return w.x<=Math.max(C.x,E.x)&&w.x>=Math.min(C.x,E.x)&&w.y<=Math.max(C.y,E.y)&&w.y>=Math.min(C.y,E.y)}function d(C){return C>0?1:C<0?-1:0}function m(C,w){return c(C.prev,C,C.next)<0?c(C,w,C.next)>=0&&c(C,C.prev,w)>=0:c(C,w,C.prev)<0||c(C,C.next,w)<0}function g(C,w){var E=new _(C.i,C.x,C.y),P=new _(w.i,w.x,w.y),L=C.next,O=w.prev;return C.next=w,w.prev=C,E.next=L,L.prev=E,P.next=E,E.prev=P,O.next=P,P.prev=O,P}function x(C,w,E,P){var L=new _(C,w,E);return P?(L.next=P.next,L.prev=P,P.next.prev=L,P.next=L):(L.prev=L,L.next=L),L}function v(C){C.next.prev=C.prev,C.prev.next=C.next,C.prevZ&&(C.prevZ.nextZ=C.nextZ),C.nextZ&&(C.nextZ.prevZ=C.prevZ)}function _(C,w,E){this.i=C,this.x=w,this.y=E,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function f(C,w,E,P){for(var L=0,O=w,z=E-P;O<E;O+=P)L+=(C[z]-C[O])*(C[O+1]+C[z+1]),z=O;return L}ie.exports=F,ie.exports.default=F,F.deviation=function(C,w,E,P){var L=w&&w.length,z=Math.abs(f(C,0,L?w[0]*E:C.length,E));if(L)for(var V=0,R=w.length;V<R;V++)z-=Math.abs(f(C,w[V]*E,V<R-1?w[V+1]*E:C.length,E));var N=0;for(V=0;V<P.length;V+=3){var G=P[V]*E,W=P[V+1]*E,ae=P[V+2]*E;N+=Math.abs((C[G]-C[ae])*(C[W+1]-C[G+1])-(C[G]-C[W])*(C[ae+1]-C[G+1]))}return 0===z&&0===N?0:Math.abs((N-z)/z)},F.flatten=function(C){for(var w=C[0][0].length,E={vertices:[],holes:[],dimensions:w},P=0,L=0;L<C.length;L++){for(var O=0;O<C[L].length;O++)for(var z=0;z<w;z++)E.vertices.push(C[L][O][z]);L>0&&E.holes.push(P+=C[L-1].length)}return E}},6688:function(ie,F,e){var S=e(78484);ie.exports=function(k,o){var T,b=[],p=[],l=[],t={},i=[];function r(m){l[m]=!1,t.hasOwnProperty(m)&&Object.keys(t[m]).forEach(function(g){delete t[m][g],l[g]&&r(g)})}function n(m){var g,x,v=!1;for(p.push(m),l[m]=!0,g=0;g<i[m].length;g++)(x=i[m][g])===T?(a(T,p),v=!0):l[x]||(v=n(x));if(v)r(m);else for(g=0;g<i[m].length;g++){var _=t[x=i[m][g]];_||(t[x]=_={}),_[x]=!0}return p.pop(),v}function a(m,g){var x=[].concat(g).concat(m);o?o(n):b.push(x)}function s(m){!function(E){for(var P=0;P<k.length;P++)P<E&&(k[P]=[]),k[P]=k[P].filter(function(L){return L>=E})}(m);for(var g,x=S(k).components.filter(function(E){return E.length>1}),v=1/0,_=0;_<x.length;_++)for(var f=0;f<x[_].length;f++)x[_][f]<v&&(v=x[_][f],g=_);var C=x[g];return!!C&&{leastVertex:v,adjList:k.map(function(E,P){return-1===C.indexOf(P)?[]:E.filter(function(L){return-1!==C.indexOf(L)})})}}T=0;for(var c=k.length;T<c;){var h=s(T);if(T=h.leastVertex,i=h.adjList){for(var u=0;u<i.length;u++)for(var y=0;y<i[u].length;y++){var d=i[u][y];l[+d]=!1,t[d]={}}n(T),T+=1}else T=c}return o?void 0:b}},41476:function(ie,F,e){"use strict";var S=e(9252);ie.exports=function(){return S(this).length=0,this}},74772:function(ie,F,e){"use strict";ie.exports=e(44716)()?Array.from:e(80816)},44716:function(ie){"use strict";ie.exports=function(){var F,e,S=Array.from;return"function"==typeof S&&!(!(e=S(F=["raz","dwa"]))||e===F||"dwa"!==e[1])}},80816:function(ie,F,e){"use strict";var S=e(92664).iterator,k=e(60948),o=e(17024),T=e(81304),b=e(34044),p=e(9252),l=e(42584),t=e(29768),i=Array.isArray,r=Function.prototype.call,n={configurable:!0,enumerable:!0,writable:!0,value:null},a=Object.defineProperty;ie.exports=function(s){var c,h,u,y,d,m,g,x,v,_,f=arguments[1],C=arguments[2];if(s=Object(p(s)),l(f)&&b(f),this&&this!==Array&&o(this))c=this;else{if(!f){if(k(s))return 1!==(d=s.length)?Array.apply(null,s):((y=new Array(1))[0]=s[0],y);if(i(s)){for(y=new Array(d=s.length),h=0;h<d;++h)y[h]=s[h];return y}}y=[]}if(!i(s))if(void 0!==(v=s[S])){for(g=b(v).call(s),c&&(y=new c),x=g.next(),h=0;!x.done;)_=f?r.call(f,C,x.value,h):x.value,c?(n.value=_,a(y,h,n)):y[h]=_,x=g.next(),++h;d=h}else if(t(s)){for(d=s.length,c&&(y=new c),h=0,u=0;h<d;++h)_=s[h],h+1<d&&(m=_.charCodeAt(0))>=55296&&m<=56319&&(_+=s[++h]),_=f?r.call(f,C,_,u):_,c?(n.value=_,a(y,u,n)):y[u]=_,++u;d=u}if(void 0===d)for(d=T(s.length),c&&(y=new c(d)),h=0;h<d;++h)_=f?r.call(f,C,s[h],h):s[h],c?(n.value=_,a(y,h,n)):y[h]=_;return c&&(n.value=null,y.length=d),y}},60948:function(ie){"use strict";var F=Object.prototype.toString,e=F.call(function(){return arguments}());ie.exports=function(S){return F.call(S)===e}},17024:function(ie){"use strict";var F=Object.prototype.toString,e=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);ie.exports=function(S){return"function"==typeof S&&e(F.call(S))}},33208:function(ie){"use strict";ie.exports=function(){}},85608:function(ie,F,e){"use strict";ie.exports=e(37328)()?Math.sign:e(92928)},37328:function(ie){"use strict";ie.exports=function(){var F=Math.sign;return"function"==typeof F&&1===F(10)&&-1===F(-20)}},92928:function(ie){"use strict";ie.exports=function(F){return F=Number(F),isNaN(F)||0===F?F:F>0?1:-1}},96936:function(ie,F,e){"use strict";var S=e(85608),k=Math.abs,o=Math.floor;ie.exports=function(T){return isNaN(T)?0:0!==(T=Number(T))&&isFinite(T)?S(T)*o(k(T)):T}},81304:function(ie,F,e){"use strict";var S=e(96936),k=Math.max;ie.exports=function(o){return k(0,S(o))}},14428:function(ie,F,e){"use strict";var S=e(34044),k=e(9252),o=Function.prototype.bind,T=Function.prototype.call,b=Object.keys,p=Object.prototype.propertyIsEnumerable;ie.exports=function(l,t){return function(i,r){var n,a=arguments[2],s=arguments[3];return i=Object(k(i)),S(r),n=b(i),s&&n.sort("function"==typeof s?o.call(s,i):void 0),"function"!=typeof l&&(l=n[l]),T.call(l,n,function(c,h){return p.call(i,c)?T.call(r,a,i[c],c,i,h):t})}}},38452:function(ie,F,e){"use strict";ie.exports=e(96276)()?Object.assign:e(81892)},96276:function(ie){"use strict";ie.exports=function(){var F,e=Object.assign;return"function"==typeof e&&(e(F={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),F.foo+F.bar+F.trzy==="razdwatrzy")}},81892:function(ie,F,e){"use strict";var S=e(54768),k=e(9252),o=Math.max;ie.exports=function(T,b){var p,l,t,i=o(arguments.length,2);for(T=Object(k(T)),t=function(r){try{T[r]=b[r]}catch(n){p||(p=n)}},l=1;l<i;++l)S(b=arguments[l]).forEach(t);if(void 0!==p)throw p;return T}},95920:function(ie,F,e){"use strict";var S=e(74772),k=e(38452),o=e(9252);ie.exports=function(T){var b=Object(o(T)),p=arguments[1],l=Object(arguments[2]);if(b!==T&&!p)return b;var t={};return p?S(p,function(i){(l.ensure||i in T)&&(t[i]=T[i])}):k(t,T),t}},14452:function(ie,F,e){"use strict";var S,k,o,T,b=Object.create;e(63092)()||(S=e(8672)),ie.exports=S?1!==S.level?b:(k={},o={},T={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(p){o[p]="__proto__"!==p?T:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(k,o),Object.defineProperty(S,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:k}),function(p,l){return b(null===p?k:p,l)}):b},42748:function(ie,F,e){"use strict";ie.exports=e(14428)("forEach")},69127:function(ie,F,e){"use strict";var S=e(42584),k={function:!0,object:!0};ie.exports=function(o){return S(o)&&k[typeof o]||!1}},42584:function(ie,F,e){"use strict";var S=e(33208)();ie.exports=function(k){return k!==S&&null!==k}},54768:function(ie,F,e){"use strict";ie.exports=e(87888)()?Object.keys:e(89592)},87888:function(ie){"use strict";ie.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},89592:function(ie,F,e){"use strict";var S=e(42584),k=Object.keys;ie.exports=function(o){return k(S(o)?Object(o):o)}},84323:function(ie,F,e){"use strict";var S=e(34044),k=e(42748),o=Function.prototype.call;ie.exports=function(T,b){var p={},l=arguments[2];return S(b),k(T,function(t,i,r,n){p[i]=o.call(b,l,t,i,r,n)}),p}},50868:function(ie,F,e){"use strict";var S=e(42584),k=Array.prototype.forEach,o=Object.create;ie.exports=function(T){var b=o(null);return k.call(arguments,function(p){S(p)&&function(l,t){var i;for(i in l)t[i]=l[i]}(Object(p),b)}),b}},69932:function(ie,F,e){"use strict";ie.exports=e(63092)()?Object.setPrototypeOf:e(8672)},63092:function(ie){"use strict";var F=Object.create,e=Object.getPrototypeOf,S={};ie.exports=function(){var k=Object.setPrototypeOf;return"function"==typeof k&&e(k((arguments[0]||F)(null),S))===S}},8672:function(ie,F,e){"use strict";var S,k,o,T,b=e(69127),p=e(9252),l=Object.prototype.isPrototypeOf,t=Object.defineProperty,i={configurable:!0,enumerable:!1,writable:!0,value:void 0};S=function(r,n){if(p(r),null===n||b(n))return r;throw new TypeError("Prototype must be null or an object")},ie.exports=(k=function(){var r,n=Object.create(null),a={},s=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(s){try{(r=s.set).call(n,a)}catch{}if(Object.getPrototypeOf(n)===a)return{set:r,level:2}}return n.__proto__=a,Object.getPrototypeOf(n)===a?{level:2}:((n={}).__proto__=a,Object.getPrototypeOf(n)===a&&{level:1})}())?(2===k.level?k.set?(T=k.set,o=function(r,n){return T.call(S(r,n),n),r}):o=function(r,n){return S(r,n).__proto__=n,r}:o=function r(n,a){var s;return S(n,a),(s=l.call(r.nullPolyfill,n))&&delete r.nullPolyfill.__proto__,null===a&&(a=r.nullPolyfill),n.__proto__=a,s&&t(r.nullPolyfill,"__proto__",i),n},Object.defineProperty(o,"level",{configurable:!1,enumerable:!1,writable:!1,value:k.level})):null,e(14452)},34044:function(ie){"use strict";ie.exports=function(F){if("function"!=typeof F)throw new TypeError(F+" is not a function");return F}},92584:function(ie,F,e){"use strict";var S=e(69127);ie.exports=function(k){if(!S(k))throw new TypeError(k+" is not an Object");return k}},9252:function(ie,F,e){"use strict";var S=e(42584);ie.exports=function(k){if(!S(k))throw new TypeError("Cannot use null or undefined");return k}},71056:function(ie,F,e){"use strict";ie.exports=e(42976)()?String.prototype.contains:e(93040)},42976:function(ie){"use strict";var F="razdwatrzy";ie.exports=function(){return"function"==typeof F.contains&&!0===F.contains("dwa")&&!1===F.contains("foo")}},93040:function(ie){"use strict";var F=String.prototype.indexOf;ie.exports=function(e){return F.call(this,e,arguments[1])>-1}},29768:function(ie){"use strict";var F=Object.prototype.toString,e=F.call("");ie.exports=function(S){return"string"==typeof S||S&&"object"==typeof S&&(S instanceof String||F.call(S)===e)||!1}},82252:function(ie){"use strict";var F=Object.create(null),e=Math.random;ie.exports=function(){var S;do{S=e().toString(36).slice(2)}while(F[S]);return S}},52104:function(ie,F,e){"use strict";var S,k=e(69932),o=e(71056),T=e(21092),b=e(92664),p=e(85512),l=Object.defineProperty;S=ie.exports=function(t,i){if(!(this instanceof S))throw new TypeError("Constructor requires 'new'");p.call(this,t),i=i?o.call(i,"key+value")?"key+value":o.call(i,"key")?"key":"value":"value",l(this,"__kind__",T("",i))},k&&k(S,p),delete S.prototype.constructor,S.prototype=Object.create(p.prototype,{_resolve:T(function(t){return"value"===this.__kind__?this.__list__[t]:"key+value"===this.__kind__?[t,this.__list__[t]]:t})}),l(S.prototype,b.toStringTag,T("c","Array Iterator"))},76024:function(ie,F,e){"use strict";var S=e(60948),k=e(34044),o=e(29768),T=e(76252),b=Array.isArray,p=Function.prototype.call,l=Array.prototype.some;ie.exports=function(t,i){var r,n,a,s,c,h,u,y,d=arguments[2];if(b(t)||S(t)?r="array":o(t)?r="string":t=T(t),k(i),a=function(){s=!0},"array"!==r)if("string"!==r)for(n=t.next();!n.done;){if(p.call(i,d,n.value,a),s)return;n=t.next()}else for(h=t.length,c=0;c<h&&(u=t[c],c+1<h&&(y=u.charCodeAt(0))>=55296&&y<=56319&&(u+=t[++c]),p.call(i,d,u,a),!s);++c);else l.call(t,function(m){return p.call(i,d,m,a),s})}},76252:function(ie,F,e){"use strict";var S=e(60948),k=e(29768),o=e(52104),T=e(80940),b=e(52891),p=e(92664).iterator;ie.exports=function(l){return"function"==typeof b(l)[p]?l[p]():S(l)?new o(l):k(l)?new T(l):new o(l)}},85512:function(ie,F,e){"use strict";var S,k=e(41476),o=e(38452),T=e(34044),b=e(9252),p=e(21092),l=e(27940),t=e(92664),i=Object.defineProperty,r=Object.defineProperties;ie.exports=S=function(n,a){if(!(this instanceof S))throw new TypeError("Constructor requires 'new'");r(this,{__list__:p("w",b(n)),__context__:p("w",a),__nextIndex__:p("w",0)}),a&&(T(a.on),a.on("_add",this._onAdd),a.on("_delete",this._onDelete),a.on("_clear",this._onClear))},delete S.prototype.constructor,r(S.prototype,o({_next:p(function(){var n;if(this.__list__)return this.__redo__&&void 0!==(n=this.__redo__.shift())?n:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:p(function(){return this._createResult(this._next())}),_createResult:p(function(n){return void 0===n?{done:!0,value:void 0}:{done:!1,value:this._resolve(n)}}),_resolve:p(function(n){return this.__list__[n]}),_unBind:p(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:p(function(){return"[object "+(this[t.toStringTag]||"Object")+"]"})},l({_onAdd:p(function(n){n>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(a,s){a>=n&&(this.__redo__[s]=++a)},this),this.__redo__.push(n)):i(this,"__redo__",p("c",[n])))}),_onDelete:p(function(n){var a;n>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(a=this.__redo__.indexOf(n))&&this.__redo__.splice(a,1),this.__redo__.forEach(function(s,c){s>n&&(this.__redo__[c]=--s)},this)))}),_onClear:p(function(){this.__redo__&&k.call(this.__redo__),this.__nextIndex__=0})}))),i(S.prototype,t.iterator,p(function(){return this}))},76368:function(ie,F,e){"use strict";var S=e(60948),k=e(42584),o=e(29768),T=e(92664).iterator,b=Array.isArray;ie.exports=function(p){return!(!k(p)||!b(p)&&!o(p)&&!S(p)&&"function"!=typeof p[T])}},80940:function(ie,F,e){"use strict";var S,k=e(69932),o=e(21092),T=e(92664),b=e(85512),p=Object.defineProperty;S=ie.exports=function(l){if(!(this instanceof S))throw new TypeError("Constructor requires 'new'");l=String(l),b.call(this,l),p(this,"__length__",o("",l.length))},k&&k(S,b),delete S.prototype.constructor,S.prototype=Object.create(b.prototype,{_next:o(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:o(function(l){var t,i=this.__list__[l];return this.__nextIndex__===this.__length__?i:(t=i.charCodeAt(0))>=55296&&t<=56319?i+this.__list__[this.__nextIndex__++]:i})}),p(S.prototype,T.toStringTag,o("c","String Iterator"))},52891:function(ie,F,e){"use strict";var S=e(76368);ie.exports=function(k){if(!S(k))throw new TypeError(k+" is not iterable");return k}},60964:function(ie){"use strict";function F(e,S){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var k=Object(e),o=1;o<arguments.length;o++){var T=arguments[o];if(null!=T)for(var b=Object.keys(Object(T)),p=0,l=b.length;p<l;p++){var t=b[p],i=Object.getOwnPropertyDescriptor(T,t);void 0!==i&&i.enumerable&&(k[t]=T[t])}}return k}ie.exports={assign:F,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:F})}}},92664:function(ie,F,e){"use strict";ie.exports=e(43580)()?e(12296).Symbol:e(18376)},43580:function(ie,F,e){"use strict";var S=e(12296),k={object:!0,symbol:!0};ie.exports=function(){var o,T=S.Symbol;if("function"!=typeof T)return!1;o=T("test symbol");try{String(o)}catch{return!1}return!!k[typeof T.iterator]&&!!k[typeof T.toPrimitive]&&!!k[typeof T.toStringTag]}},53908:function(ie){"use strict";ie.exports=function(F){return!!F&&("symbol"==typeof F||!!F.constructor&&"Symbol"===F.constructor.name&&"Symbol"===F[F.constructor.toStringTag])}},96863:function(ie,F,e){"use strict";var S=e(21092),o=Object.defineProperty,T=Object.prototype,b=(0,Object.create)(null);ie.exports=function(p){for(var l,t,i=0;b[p+(i||"")];)++i;return b[p+=i||""]=!0,o(T,l="@@"+p,S.gs(null,function(r){t||(t=!0,o(this,l,S(r)),t=!1)})),l}},53540:function(ie,F,e){"use strict";var S=e(21092),k=e(12296).Symbol;ie.exports=function(o){return Object.defineProperties(o,{hasInstance:S("",k&&k.hasInstance||o("hasInstance")),isConcatSpreadable:S("",k&&k.isConcatSpreadable||o("isConcatSpreadable")),iterator:S("",k&&k.iterator||o("iterator")),match:S("",k&&k.match||o("match")),replace:S("",k&&k.replace||o("replace")),search:S("",k&&k.search||o("search")),species:S("",k&&k.species||o("species")),split:S("",k&&k.split||o("split")),toPrimitive:S("",k&&k.toPrimitive||o("toPrimitive")),toStringTag:S("",k&&k.toStringTag||o("toStringTag")),unscopables:S("",k&&k.unscopables||o("unscopables"))})}},73852:function(ie,F,e){"use strict";var S=e(21092),k=e(63948),o=Object.create(null);ie.exports=function(T){return Object.defineProperties(T,{for:S(function(b){return o[b]?o[b]:o[b]=T(String(b))}),keyFor:S(function(b){var p;for(p in k(b),o)if(o[p]===b)return p})})}},18376:function(ie,F,e){"use strict";var S,k,o,T=e(21092),b=e(63948),p=e(12296).Symbol,l=e(96863),t=e(53540),i=e(73852),r=Object.create,n=Object.defineProperties,a=Object.defineProperty;if("function"==typeof p)try{String(p()),o=!0}catch{}else p=null;k=function(s){if(this instanceof k)throw new TypeError("Symbol is not a constructor");return S(s)},ie.exports=S=function s(c){var h;if(this instanceof s)throw new TypeError("Symbol is not a constructor");return o?p(c):(h=r(k.prototype),c=void 0===c?"":String(c),n(h,{__description__:T("",c),__name__:T("",l(c))}))},t(S),i(S),n(k.prototype,{constructor:T(S),toString:T("",function(){return this.__name__})}),n(S.prototype,{toString:T(function(){return"Symbol ("+b(this).__description__+")"}),valueOf:T(function(){return b(this)})}),a(S.prototype,S.toPrimitive,T("",function(){var s=b(this);return"symbol"==typeof s?s:s.toString()})),a(S.prototype,S.toStringTag,T("c","Symbol")),a(k.prototype,S.toStringTag,T("c",S.prototype[S.toStringTag])),a(k.prototype,S.toPrimitive,T("c",S.prototype[S.toPrimitive]))},63948:function(ie,F,e){"use strict";var S=e(53908);ie.exports=function(k){if(!S(k))throw new TypeError(k+" is not a symbol");return k}},60463:function(ie,F,e){"use strict";ie.exports=e(96979)()?WeakMap:e(64864)},96979:function(ie){"use strict";ie.exports=function(){var F,e;if("function"!=typeof WeakMap)return!1;try{F=new WeakMap([[e={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return"[object WeakMap]"===String(F)&&"function"==typeof F.set&&F.set({},1)===F&&"function"==typeof F.delete&&"function"==typeof F.has&&"one"===F.get(e)}},69876:function(ie){"use strict";ie.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},64864:function(ie,F,e){"use strict";var S,k=e(42584),o=e(69932),T=e(92584),b=e(9252),p=e(82252),l=e(21092),t=e(76252),i=e(76024),r=e(92664).toStringTag,n=e(69876),a=Array.isArray,s=Object.defineProperty,c=Object.prototype.hasOwnProperty,h=Object.getPrototypeOf;ie.exports=S=function(){var u,y=arguments[0];if(!(this instanceof S))throw new TypeError("Constructor requires 'new'");return u=n&&o&&WeakMap!==S?o(new WeakMap,h(this)):this,k(y)&&(a(y)||(y=t(y))),s(u,"__weakMapData__",l("c","$weakMap$"+p())),y&&i(y,function(d){b(d),u.set(d[0],d[1])}),u},n&&(o&&o(S,WeakMap),S.prototype=Object.create(WeakMap.prototype,{constructor:l(S)})),Object.defineProperties(S.prototype,{delete:l(function(u){return!!c.call(T(u),this.__weakMapData__)&&(delete u[this.__weakMapData__],!0)}),get:l(function(u){if(c.call(T(u),this.__weakMapData__))return u[this.__weakMapData__]}),has:l(function(u){return c.call(T(u),this.__weakMapData__)}),set:l(function(u,y){return s(T(u),this.__weakMapData__,l("c",y)),this}),toString:l(function(){return"[object WeakMap]"})}),s(S.prototype,r,l("c","WeakMap"))},61252:function(ie){"use strict";var F,e="object"==typeof Reflect?Reflect:null,S=e&&"function"==typeof e.apply?e.apply:function(c,h,u){return Function.prototype.apply.call(c,h,u)};F=e&&"function"==typeof e.ownKeys?e.ownKeys:Object.getOwnPropertySymbols?function(c){return Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c))}:function(c){return Object.getOwnPropertyNames(c)};var k=Number.isNaN||function(c){return c!=c};function o(){o.init.call(this)}ie.exports=o,ie.exports.once=function(c,h){return new Promise(function(u,y){function d(g){c.removeListener(h,m),y(g)}function m(){"function"==typeof c.removeListener&&c.removeListener("error",d),u([].slice.call(arguments))}var g;s(c,h,m,{once:!0}),"error"!==h&&("function"==typeof(g=c).on&&s(g,"error",d,{once:!0}))})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var T=10;function b(c){if("function"!=typeof c)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof c)}function p(c){return void 0===c._maxListeners?o.defaultMaxListeners:c._maxListeners}function l(c,h,u,y){var d,m,g;if(b(u),void 0===(m=c._events)?(m=c._events=Object.create(null),c._eventsCount=0):(void 0!==m.newListener&&(c.emit("newListener",h,u.listener?u.listener:u),m=c._events),g=m[h]),void 0===g)g=m[h]=u,++c._eventsCount;else if("function"==typeof g?g=m[h]=y?[u,g]:[g,u]:y?g.unshift(u):g.push(u),(d=p(c))>0&&g.length>d&&!g.warned){g.warned=!0;var v=new Error("Possible EventEmitter memory leak detected. "+g.length+" "+String(h)+" listeners added. Use emitter.setMaxListeners() to increase limit");v.name="MaxListenersExceededWarning",v.emitter=c,v.type=h,v.count=g.length,console&&console.warn&&console.warn(v)}return c}function t(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function i(c,h,u){var y={fired:!1,wrapFn:void 0,target:c,type:h,listener:u},d=t.bind(y);return d.listener=u,y.wrapFn=d,d}function r(c,h,u){var y=c._events;if(void 0===y)return[];var d=y[h];return void 0===d?[]:"function"==typeof d?u?[d.listener||d]:[d]:u?function(m){for(var g=new Array(m.length),x=0;x<g.length;++x)g[x]=m[x].listener||m[x];return g}(d):a(d,d.length)}function n(c){var h=this._events;if(void 0!==h){var u=h[c];if("function"==typeof u)return 1;if(void 0!==u)return u.length}return 0}function a(c,h){for(var u=new Array(h),y=0;y<h;++y)u[y]=c[y];return u}function s(c,h,u,y){if("function"==typeof c.on)y.once?c.once(h,u):c.on(h,u);else{if("function"!=typeof c.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof c);c.addEventListener(h,function d(m){y.once&&c.removeEventListener(h,d),u(m)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return T},set:function(c){if("number"!=typeof c||c<0||k(c))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+c+".");T=c}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(c){if("number"!=typeof c||c<0||k(c))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+c+".");return this._maxListeners=c,this},o.prototype.getMaxListeners=function(){return p(this)},o.prototype.emit=function(c){for(var h=[],u=1;u<arguments.length;u++)h.push(arguments[u]);var y="error"===c,d=this._events;if(void 0!==d)y=y&&void 0===d.error;else if(!y)return!1;if(y){var m;if(h.length>0&&(m=h[0]),m instanceof Error)throw m;var g=new Error("Unhandled error."+(m?" ("+m.message+")":""));throw g.context=m,g}var x=d[c];if(void 0===x)return!1;if("function"==typeof x)S(x,this,h);else{var v=x.length,_=a(x,v);for(u=0;u<v;++u)S(_[u],this,h)}return!0},o.prototype.on=o.prototype.addListener=function(c,h){return l(this,c,h,!1)},o.prototype.prependListener=function(c,h){return l(this,c,h,!0)},o.prototype.once=function(c,h){return b(h),this.on(c,i(this,c,h)),this},o.prototype.prependOnceListener=function(c,h){return b(h),this.prependListener(c,i(this,c,h)),this},o.prototype.off=o.prototype.removeListener=function(c,h){var u,y,d,m,g;if(b(h),void 0===(y=this._events))return this;if(void 0===(u=y[c]))return this;if(u===h||u.listener===h)0==--this._eventsCount?this._events=Object.create(null):(delete y[c],y.removeListener&&this.emit("removeListener",c,u.listener||h));else if("function"!=typeof u){for(d=-1,m=u.length-1;m>=0;m--)if(u[m]===h||u[m].listener===h){g=u[m].listener,d=m;break}if(d<0)return this;0===d?u.shift():function(x,v){for(;v+1<x.length;v++)x[v]=x[v+1];x.pop()}(u,d),1===u.length&&(y[c]=u[0]),void 0!==y.removeListener&&this.emit("removeListener",c,g||h)}return this},o.prototype.removeAllListeners=function(c){var h,u,y;if(void 0===(u=this._events))return this;if(void 0===u.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==u[c]&&(0==--this._eventsCount?this._events=Object.create(null):delete u[c]),this;if(0===arguments.length){var d,m=Object.keys(u);for(y=0;y<m.length;++y)"removeListener"!==(d=m[y])&&this.removeAllListeners(d);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(h=u[c]))this.removeListener(c,h);else if(void 0!==h)for(y=h.length-1;y>=0;y--)this.removeListener(c,h[y]);return this},o.prototype.listeners=function(c){return r(this,c,!0)},o.prototype.rawListeners=function(c){return r(this,c,!1)},o.listenerCount=function(c,h){return"function"==typeof c.listenerCount?c.listenerCount(h):n.call(c,h)},o.prototype.listenerCount=n,o.prototype.eventNames=function(){return this._eventsCount>0?F(this._events):[]}},39072:function(ie){var F=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};ie.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return F()}try{return __global__||F()}finally{delete Object.prototype.__global__}}()},12296:function(ie,F,e){"use strict";ie.exports=e(45072)()?globalThis:e(39072)},45072:function(ie){"use strict";ie.exports=function(){return"object"==typeof globalThis&&!!globalThis&&globalThis.Array===Array}},38248:function(ie,F,e){"use strict";var S=e(94576);ie.exports=function(k){var o=typeof k;if("string"===o){var T=k;if(0==(k=+k)&&S(T))return!1}else if("number"!==o)return!1;return k-k<1}},47520:function(ie,F,e){var S=e(72512);ie.exports=function(k,o,T){if(!k)throw new TypeError("must specify data as first parameter");if(T=0|+(T||0),Array.isArray(k)&&k[0]&&"number"==typeof k[0][0]){var b,p,l,t,i=k[0].length,r=k.length*i;o&&"string"!=typeof o||(o=new(S(o||"float32"))(r+T));var n=o.length-T;if(r!==n)throw new Error("source length "+r+" ("+i+"x"+k.length+") does not match destination length "+n);for(b=0,l=T;b<k.length;b++)for(p=0;p<i;p++)o[l++]=null===k[b][p]?NaN:k[b][p]}else if(o&&"string"!=typeof o)o.set(k,T);else{var a=S(o||"float32");if(Array.isArray(k)||"array"===o)for(b=0,l=T,t=(o=new a(k.length+T)).length;l<t;l++,b++)o[l]=null===k[b]?NaN:k[b];else 0===T?o=new a(k):(o=new a(k.length+T)).set(k,T)}return o}},33888:function(ie,F,e){"use strict";var S=e(49395),k=[32,126];ie.exports=function(o){var T=(o=o||{}).shape?o.shape:o.canvas?[o.canvas.width,o.canvas.height]:[512,512],b=o.canvas||document.createElement("canvas"),p=o.font,l="number"==typeof o.step?[o.step,o.step]:o.step||[32,32],t=o.chars||k;if(p&&"string"!=typeof p&&(p=S(p)),Array.isArray(t)){if(2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]){for(var i=[],r=t[0],n=0;r<=t[1];r++)i[n++]=String.fromCharCode(r);t=i}}else t=String(t).split("");T=T.slice(),b.width=T[0],b.height=T[1];var a=b.getContext("2d");a.fillStyle="#000",a.fillRect(0,0,b.width,b.height),a.font=p,a.textAlign="center",a.textBaseline="middle",a.fillStyle="#fff";var s=l[0]/2,c=l[1]/2;for(r=0;r<t.length;r++)a.fillText(t[r],s,c),(s+=l[0])>T[0]-l[0]/2&&(s=l[0]/2,c+=l[1]);return b}},71920:function(ie){"use strict";function F(o,T){T||(T={}),("string"==typeof o||Array.isArray(o))&&(T.family=o);var b=Array.isArray(T.family)?T.family.join(", "):T.family;if(!b)throw Error("`family` must be defined");var p=T.size||T.fontSize||T.em||48,t=(o=[T.style||T.fontStyle||"",T.weight||T.fontWeight||"",p].join(" ")+"px "+b,T.origin||"top");if(F.cache[b]&&p<=F.cache[b].em)return e(F.cache[b],t);var i=T.canvas||F.canvas,r=i.getContext("2d"),n={upper:void 0!==T.upper?T.upper:"H",lower:void 0!==T.lower?T.lower:"x",descent:void 0!==T.descent?T.descent:"p",ascent:void 0!==T.ascent?T.ascent:"h",tittle:void 0!==T.tittle?T.tittle:"i",overshoot:void 0!==T.overshoot?T.overshoot:"O"},a=Math.ceil(1.5*p);i.height=a,i.width=.5*a,r.font=o;var s="H",c={top:0};r.clearRect(0,0,a,a),r.textBaseline="top",r.fillStyle="black",r.fillText(s,0,0);var h=S(r.getImageData(0,0,a,a));r.clearRect(0,0,a,a),r.textBaseline="bottom",r.fillText(s,0,a);var u=S(r.getImageData(0,0,a,a));c.lineHeight=c.bottom=a-u+h,r.clearRect(0,0,a,a),r.textBaseline="alphabetic",r.fillText(s,0,a);var y=a-S(r.getImageData(0,0,a,a))-1+h;c.baseline=c.alphabetic=y,r.clearRect(0,0,a,a),r.textBaseline="middle",r.fillText(s,0,.5*a);var d=S(r.getImageData(0,0,a,a));c.median=c.middle=a-d-1+h-.5*a,r.clearRect(0,0,a,a),r.textBaseline="hanging",r.fillText(s,0,.5*a);var m=S(r.getImageData(0,0,a,a));c.hanging=a-m-1+h-.5*a,r.clearRect(0,0,a,a),r.textBaseline="ideographic",r.fillText(s,0,a);var g=S(r.getImageData(0,0,a,a));if(c.ideographic=a-g-1+h,n.upper&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.upper,0,0),c.upper=S(r.getImageData(0,0,a,a)),c.capHeight=c.baseline-c.upper),n.lower&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.lower,0,0),c.lower=S(r.getImageData(0,0,a,a)),c.xHeight=c.baseline-c.lower),n.tittle&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.tittle,0,0),c.tittle=S(r.getImageData(0,0,a,a))),n.ascent&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.ascent,0,0),c.ascent=S(r.getImageData(0,0,a,a))),n.descent&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.descent,0,0),c.descent=k(r.getImageData(0,0,a,a))),n.overshoot){r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.overshoot,0,0);var x=k(r.getImageData(0,0,a,a));c.overshoot=x-y}for(var v in c)c[v]/=p;return c.em=p,F.cache[b]=c,e(c,t)}function e(o,T){var b={};for(var p in"string"==typeof T&&(T=o[T]),o)"em"!==p&&(b[p]=o[p]-T);return b}function S(o){for(var T=o.height,b=o.data,p=3;p<b.length;p+=4)if(0!==b[p])return Math.floor(.25*(p-3)/T)}function k(o){for(var T=o.height,b=o.data,p=b.length-1;p>0;p-=4)if(0!==b[p])return Math.floor(.25*(p-3)/T)}ie.exports=F,F.canvas=document.createElement("canvas"),F.cache={}},46492:function(ie,F,e){"use strict";var S=e(90720),k=Object.prototype.toString,o=Object.prototype.hasOwnProperty;ie.exports=function(T,b,p){if(!S(b))throw new TypeError("iterator must be a function");var l;arguments.length>=3&&(l=p),"[object Array]"===k.call(T)?function(t,i,r){for(var n=0,a=t.length;n<a;n++)o.call(t,n)&&(null==r?i(t[n],n,t):i.call(r,t[n],n,t))}(T,b,l):"string"==typeof T?function(t,i,r){for(var n=0,a=t.length;n<a;n++)null==r?i(t.charAt(n),n,t):i.call(r,t.charAt(n),n,t)}(T,b,l):function(t,i,r){for(var n in t)o.call(t,n)&&(null==r?i(t[n],n,t):i.call(r,t[n],n,t))}(T,b,l)}},74336:function(ie){"use strict";var F=Object.prototype.toString,e=Math.max,S=function(k,o){for(var T=[],b=0;b<k.length;b+=1)T[b]=k[b];for(var p=0;p<o.length;p+=1)T[p+k.length]=o[p];return T};ie.exports=function(k){var o=this;if("function"!=typeof o||"[object Function]"!==F.apply(o))throw new TypeError("Function.prototype.bind called on incompatible "+o);for(var T,b=function(r,n){for(var a=[],s=1,c=0;s<r.length;s+=1,c+=1)a[c]=r[s];return a}(arguments),p=e(0,o.length-b.length),l=[],t=0;t<p;t++)l[t]="$"+t;if(T=Function("binder","return function ("+function(r,n){for(var a="",s=0;s<r.length;s+=1)a+=r[s],s+1<r.length&&(a+=",");return a}(l)+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof T){var r=o.apply(this,S(b,arguments));return Object(r)===r?r:this}return o.apply(k,S(b,arguments))}),o.prototype){var i=function(){};i.prototype=o.prototype,T.prototype=new i,i.prototype=null}return T}},8844:function(ie,F,e){"use strict";var S=e(74336);ie.exports=Function.prototype.bind||S},13380:function(ie){ie.exports=function(F,e){if("string"!=typeof F)throw new TypeError("must specify type string");if(e=e||{},typeof document>"u"&&!e.canvas)return null;var S=e.canvas||document.createElement("canvas");"number"==typeof e.width&&(S.width=e.width),"number"==typeof e.height&&(S.height=e.height);var k,o=e;try{var T=[F];0===F.indexOf("webgl")&&T.push("experimental-"+F);for(var b=0;b<T.length;b++)if(k=S.getContext(T[b],o))return k}catch{k=null}return k||null}},53664:function(ie,F,e){"use strict";var S,k=SyntaxError,o=Function,T=TypeError,b=function(P){try{return o('"use strict"; return ('+P+").constructor;")()}catch{}},p=Object.getOwnPropertyDescriptor;if(p)try{p({},"")}catch{p=null}var l=function(){throw new T},t=p?function(){try{return l}catch{try{return p(arguments,"callee").get}catch{return l}}}():l,i=e(71080)(),r=e(69572)(),n=Object.getPrototypeOf||(r?function(P){return P.__proto__}:null),a={},s=typeof Uint8Array<"u"&&n?n(Uint8Array):S,c={"%AggregateError%":typeof AggregateError>"u"?S:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?S:ArrayBuffer,"%ArrayIteratorPrototype%":i&&n?n([][Symbol.iterator]()):S,"%AsyncFromSyncIteratorPrototype%":S,"%AsyncFunction%":a,"%AsyncGenerator%":a,"%AsyncGeneratorFunction%":a,"%AsyncIteratorPrototype%":a,"%Atomics%":typeof Atomics>"u"?S:Atomics,"%BigInt%":typeof BigInt>"u"?S:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?S:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?S:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?S:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?S:Float32Array,"%Float64Array%":typeof Float64Array>"u"?S:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?S:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":a,"%Int8Array%":typeof Int8Array>"u"?S:Int8Array,"%Int16Array%":typeof Int16Array>"u"?S:Int16Array,"%Int32Array%":typeof Int32Array>"u"?S:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":i&&n?n(n([][Symbol.iterator]())):S,"%JSON%":"object"==typeof JSON?JSON:S,"%Map%":typeof Map>"u"?S:Map,"%MapIteratorPrototype%":typeof Map<"u"&&i&&n?n((new Map)[Symbol.iterator]()):S,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?S:Promise,"%Proxy%":typeof Proxy>"u"?S:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?S:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?S:Set,"%SetIteratorPrototype%":typeof Set<"u"&&i&&n?n((new Set)[Symbol.iterator]()):S,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?S:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":i&&n?n(""[Symbol.iterator]()):S,"%Symbol%":i?Symbol:S,"%SyntaxError%":k,"%ThrowTypeError%":t,"%TypedArray%":s,"%TypeError%":T,"%Uint8Array%":typeof Uint8Array>"u"?S:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?S:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?S:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?S:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?S:WeakMap,"%WeakRef%":typeof WeakRef>"u"?S:WeakRef,"%WeakSet%":typeof WeakSet>"u"?S:WeakSet};if(n)try{null.error}catch(P){var h=n(n(P));c["%Error.prototype%"]=h}var u=function P(L){var O;if("%AsyncFunction%"===L)O=b("async function () {}");else if("%GeneratorFunction%"===L)O=b("function* () {}");else if("%AsyncGeneratorFunction%"===L)O=b("async function* () {}");else if("%AsyncGenerator%"===L){var z=P("%AsyncGeneratorFunction%");z&&(O=z.prototype)}else if("%AsyncIteratorPrototype%"===L){var V=P("%AsyncGenerator%");V&&n&&(O=n(V.prototype))}return c[L]=O,O},y={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},d=e(8844),m=e(92064),g=d.call(Function.call,Array.prototype.concat),x=d.call(Function.apply,Array.prototype.splice),v=d.call(Function.call,String.prototype.replace),_=d.call(Function.call,String.prototype.slice),f=d.call(Function.call,RegExp.prototype.exec),C=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,w=/\\(\\)?/g,E=function(P,L){var O,z=P;if(m(y,z)&&(z="%"+(O=y[z])[0]+"%"),m(c,z)){var V=c[z];if(V===a&&(V=u(z)),void 0===V&&!L)throw new T("intrinsic "+P+" exists, but is not available. Please file an issue!");return{alias:O,name:z,value:V}}throw new k("intrinsic "+P+" does not exist!")};ie.exports=function(P,L){if("string"!=typeof P||0===P.length)throw new T("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof L)throw new T('"allowMissing" argument must be a boolean');if(null===f(/^%?[^%]*%?$/,P))throw new k("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var O=function($){var X=_($,0,1),oe=_($,-1);if("%"===X&&"%"!==oe)throw new k("invalid intrinsic syntax, expected closing `%`");if("%"===oe&&"%"!==X)throw new k("invalid intrinsic syntax, expected opening `%`");var fe=[];return v($,C,function(ue,ge,we,Te){fe[fe.length]=we?v(Te,w,"$1"):ge||ue}),fe}(P),z=O.length>0?O[0]:"",V=E("%"+z+"%",L),R=V.name,U=V.value,Z=!1,N=V.alias;N&&(z=N[0],x(O,g([0,1],N)));for(var G=1,W=!0;G<O.length;G+=1){var ae=O[G],re=_(ae,0,1),ne=_(ae,-1);if(('"'===re||"'"===re||"`"===re||'"'===ne||"'"===ne||"`"===ne)&&re!==ne)throw new k("property names with quotes must have matching quotes");if("constructor"!==ae&&W||(Z=!0),m(c,R="%"+(z+="."+ae)+"%"))U=c[R];else if(null!=U){if(!(ae in U)){if(!L)throw new T("base intrinsic for "+P+" exists, but the property is not available.");return}if(p&&G+1>=O.length){var Q=p(U,ae);U=(W=!!Q)&&"get"in Q&&!("originalValue"in Q.get)?Q.get:U[ae]}else W=m(U,ae),U=U[ae];W&&!Z&&(c[R]=U)}}return U}},12408:function(ie){ie.exports=function(F,e){var S=e[0],k=e[1],o=e[2],T=e[3],b=e[4],p=e[5],l=e[6],t=e[7],i=e[8],r=e[9],n=e[10],a=e[11],s=e[12],c=e[13],h=e[14],u=e[15];return F[0]=p*(n*u-a*h)-r*(l*u-t*h)+c*(l*a-t*n),F[1]=-(k*(n*u-a*h)-r*(o*u-T*h)+c*(o*a-T*n)),F[2]=k*(l*u-t*h)-p*(o*u-T*h)+c*(o*t-T*l),F[3]=-(k*(l*a-t*n)-p*(o*a-T*n)+r*(o*t-T*l)),F[4]=-(b*(n*u-a*h)-i*(l*u-t*h)+s*(l*a-t*n)),F[5]=S*(n*u-a*h)-i*(o*u-T*h)+s*(o*a-T*n),F[6]=-(S*(l*u-t*h)-b*(o*u-T*h)+s*(o*t-T*l)),F[7]=S*(l*a-t*n)-b*(o*a-T*n)+i*(o*t-T*l),F[8]=b*(r*u-a*c)-i*(p*u-t*c)+s*(p*a-t*r),F[9]=-(S*(r*u-a*c)-i*(k*u-T*c)+s*(k*a-T*r)),F[10]=S*(p*u-t*c)-b*(k*u-T*c)+s*(k*t-T*p),F[11]=-(S*(p*a-t*r)-b*(k*a-T*r)+i*(k*t-T*p)),F[12]=-(b*(r*h-n*c)-i*(p*h-l*c)+s*(p*n-l*r)),F[13]=S*(r*h-n*c)-i*(k*h-o*c)+s*(k*n-o*r),F[14]=-(S*(p*h-l*c)-b*(k*h-o*c)+s*(k*l-o*p)),F[15]=S*(p*n-l*r)-b*(k*n-o*r)+i*(k*l-o*p),F}},76860:function(ie){ie.exports=function(F){var e=new Float32Array(16);return e[0]=F[0],e[1]=F[1],e[2]=F[2],e[3]=F[3],e[4]=F[4],e[5]=F[5],e[6]=F[6],e[7]=F[7],e[8]=F[8],e[9]=F[9],e[10]=F[10],e[11]=F[11],e[12]=F[12],e[13]=F[13],e[14]=F[14],e[15]=F[15],e}},64492:function(ie){ie.exports=function(F,e){return F[0]=e[0],F[1]=e[1],F[2]=e[2],F[3]=e[3],F[4]=e[4],F[5]=e[5],F[6]=e[6],F[7]=e[7],F[8]=e[8],F[9]=e[9],F[10]=e[10],F[11]=e[11],F[12]=e[12],F[13]=e[13],F[14]=e[14],F[15]=e[15],F}},54212:function(ie){ie.exports=function(){var F=new Float32Array(16);return F[0]=1,F[1]=0,F[2]=0,F[3]=0,F[4]=0,F[5]=1,F[6]=0,F[7]=0,F[8]=0,F[9]=0,F[10]=1,F[11]=0,F[12]=0,F[13]=0,F[14]=0,F[15]=1,F}},70800:function(ie){ie.exports=function(F){var e=F[0],S=F[1],k=F[2],o=F[3],T=F[4],b=F[5],p=F[6],l=F[7],t=F[8],i=F[9],r=F[10],n=F[11],a=F[12],s=F[13],c=F[14],h=F[15];return(e*b-S*T)*(r*h-n*c)-(e*p-k*T)*(i*h-n*s)+(e*l-o*T)*(i*c-r*s)+(S*p-k*b)*(t*h-n*a)-(S*l-o*b)*(t*c-r*a)+(k*l-o*p)*(t*s-i*a)}},61784:function(ie){ie.exports=function(F,e){var S=e[0],k=e[1],o=e[2],T=e[3],b=S+S,p=k+k,l=o+o,t=S*b,i=k*b,r=k*p,n=o*b,a=o*p,s=o*l,c=T*b,h=T*p,u=T*l;return F[0]=1-r-s,F[1]=i+u,F[2]=n-h,F[3]=0,F[4]=i-u,F[5]=1-t-s,F[6]=a+c,F[7]=0,F[8]=n+h,F[9]=a-c,F[10]=1-t-r,F[11]=0,F[12]=0,F[13]=0,F[14]=0,F[15]=1,F}},91616:function(ie){ie.exports=function(F,e,S){var k,o,T,b=S[0],p=S[1],l=S[2],t=Math.sqrt(b*b+p*p+l*l);return Math.abs(t)<1e-6?null:(b*=t=1/t,p*=t,l*=t,k=Math.sin(e),T=1-(o=Math.cos(e)),F[0]=b*b*T+o,F[1]=p*b*T+l*k,F[2]=l*b*T-p*k,F[3]=0,F[4]=b*p*T-l*k,F[5]=p*p*T+o,F[6]=l*p*T+b*k,F[7]=0,F[8]=b*l*T+p*k,F[9]=p*l*T-b*k,F[10]=l*l*T+o,F[11]=0,F[12]=0,F[13]=0,F[14]=0,F[15]=1,F)}},51944:function(ie){ie.exports=function(F,e,S){var k=e[0],o=e[1],T=e[2],b=e[3],p=k+k,l=o+o,t=T+T,i=k*p,r=k*l,n=k*t,a=o*l,s=o*t,c=T*t,h=b*p,u=b*l,y=b*t;return F[0]=1-(a+c),F[1]=r+y,F[2]=n-u,F[3]=0,F[4]=r-y,F[5]=1-(i+c),F[6]=s+h,F[7]=0,F[8]=n+u,F[9]=s-h,F[10]=1-(i+a),F[11]=0,F[12]=S[0],F[13]=S[1],F[14]=S[2],F[15]=1,F}},69444:function(ie){ie.exports=function(F,e){return F[0]=e[0],F[1]=0,F[2]=0,F[3]=0,F[4]=0,F[5]=e[1],F[6]=0,F[7]=0,F[8]=0,F[9]=0,F[10]=e[2],F[11]=0,F[12]=0,F[13]=0,F[14]=0,F[15]=1,F}},48268:function(ie){ie.exports=function(F,e){return F[0]=1,F[1]=0,F[2]=0,F[3]=0,F[4]=0,F[5]=1,F[6]=0,F[7]=0,F[8]=0,F[9]=0,F[10]=1,F[11]=0,F[12]=e[0],F[13]=e[1],F[14]=e[2],F[15]=1,F}},21856:function(ie){ie.exports=function(F,e){var S=Math.sin(e),k=Math.cos(e);return F[0]=1,F[1]=0,F[2]=0,F[3]=0,F[4]=0,F[5]=k,F[6]=S,F[7]=0,F[8]=0,F[9]=-S,F[10]=k,F[11]=0,F[12]=0,F[13]=0,F[14]=0,F[15]=1,F}},79216:function(ie){ie.exports=function(F,e){var S=Math.sin(e),k=Math.cos(e);return F[0]=k,F[1]=0,F[2]=-S,F[3]=0,F[4]=0,F[5]=1,F[6]=0,F[7]=0,F[8]=S,F[9]=0,F[10]=k,F[11]=0,F[12]=0,F[13]=0,F[14]=0,F[15]=1,F}},57736:function(ie){ie.exports=function(F,e){var S=Math.sin(e),k=Math.cos(e);return F[0]=k,F[1]=S,F[2]=0,F[3]=0,F[4]=-S,F[5]=k,F[6]=0,F[7]=0,F[8]=0,F[9]=0,F[10]=1,F[11]=0,F[12]=0,F[13]=0,F[14]=0,F[15]=1,F}},38848:function(ie){ie.exports=function(F,e,S,k,o,T,b){var p=1/(S-e),l=1/(o-k),t=1/(T-b);return F[0]=2*T*p,F[1]=0,F[2]=0,F[3]=0,F[4]=0,F[5]=2*T*l,F[6]=0,F[7]=0,F[8]=(S+e)*p,F[9]=(o+k)*l,F[10]=(b+T)*t,F[11]=-1,F[12]=0,F[13]=0,F[14]=b*T*2*t,F[15]=0,F}},36635:function(ie){ie.exports=function(F){return F[0]=1,F[1]=0,F[2]=0,F[3]=0,F[4]=0,F[5]=1,F[6]=0,F[7]=0,F[8]=0,F[9]=0,F[10]=1,F[11]=0,F[12]=0,F[13]=0,F[14]=0,F[15]=1,F}},36524:function(ie,F,e){ie.exports={create:e(54212),clone:e(76860),copy:e(64492),identity:e(36635),transpose:e(86520),invert:e(4308),adjoint:e(12408),determinant:e(70800),multiply:e(80944),translate:e(35176),scale:e(68152),rotate:e(30016),rotateX:e(15456),rotateY:e(64840),rotateZ:e(4192),fromRotation:e(91616),fromRotationTranslation:e(51944),fromScaling:e(69444),fromTranslation:e(48268),fromXRotation:e(21856),fromYRotation:e(79216),fromZRotation:e(57736),fromQuat:e(61784),frustum:e(38848),perspective:e(51296),perspectiveFromFieldOfView:e(63688),ortho:e(97688),lookAt:e(56508),str:e(89412)}},4308:function(ie){ie.exports=function(F,e){var S=e[0],k=e[1],o=e[2],T=e[3],b=e[4],p=e[5],l=e[6],t=e[7],i=e[8],r=e[9],n=e[10],a=e[11],s=e[12],c=e[13],h=e[14],u=e[15],y=S*p-k*b,d=S*l-o*b,m=S*t-T*b,g=k*l-o*p,x=k*t-T*p,v=o*t-T*l,_=i*c-r*s,f=i*h-n*s,C=i*u-a*s,w=r*h-n*c,E=r*u-a*c,P=n*u-a*h,L=y*P-d*E+m*w+g*C-x*f+v*_;return L?(F[0]=(p*P-l*E+t*w)*(L=1/L),F[1]=(o*E-k*P-T*w)*L,F[2]=(c*v-h*x+u*g)*L,F[3]=(n*x-r*v-a*g)*L,F[4]=(l*C-b*P-t*f)*L,F[5]=(S*P-o*C+T*f)*L,F[6]=(h*m-s*v-u*d)*L,F[7]=(i*v-n*m+a*d)*L,F[8]=(b*E-p*C+t*_)*L,F[9]=(k*C-S*E-T*_)*L,F[10]=(s*x-c*m+u*y)*L,F[11]=(r*m-i*x-a*y)*L,F[12]=(p*f-b*w-l*_)*L,F[13]=(S*w-k*f+o*_)*L,F[14]=(c*d-s*g-h*y)*L,F[15]=(i*g-r*d+n*y)*L,F):null}},56508:function(ie,F,e){var S=e(36635);ie.exports=function(k,o,T,b){var p,l,t,i,r,n,a,s,c,h,u=o[0],y=o[1],d=o[2],m=b[0],g=b[1],x=b[2],v=T[0],_=T[1],f=T[2];return Math.abs(u-v)<1e-6&&Math.abs(y-_)<1e-6&&Math.abs(d-f)<1e-6?S(k):(a=u-v,s=y-_,c=d-f,p=g*(c*=h=1/Math.sqrt(a*a+s*s+c*c))-x*(s*=h),l=x*(a*=h)-m*c,t=m*s-g*a,(h=Math.sqrt(p*p+l*l+t*t))?(p*=h=1/h,l*=h,t*=h):(p=0,l=0,t=0),i=s*t-c*l,r=c*p-a*t,n=a*l-s*p,(h=Math.sqrt(i*i+r*r+n*n))?(i*=h=1/h,r*=h,n*=h):(i=0,r=0,n=0),k[0]=p,k[1]=i,k[2]=a,k[3]=0,k[4]=l,k[5]=r,k[6]=s,k[7]=0,k[8]=t,k[9]=n,k[10]=c,k[11]=0,k[12]=-(p*u+l*y+t*d),k[13]=-(i*u+r*y+n*d),k[14]=-(a*u+s*y+c*d),k[15]=1,k)}},80944:function(ie){ie.exports=function(F,e,S){var k=e[0],o=e[1],T=e[2],b=e[3],p=e[4],l=e[5],t=e[6],i=e[7],r=e[8],n=e[9],a=e[10],s=e[11],c=e[12],h=e[13],u=e[14],y=e[15],d=S[0],m=S[1],g=S[2],x=S[3];return F[0]=d*k+m*p+g*r+x*c,F[1]=d*o+m*l+g*n+x*h,F[2]=d*T+m*t+g*a+x*u,F[3]=d*b+m*i+g*s+x*y,F[4]=(d=S[4])*k+(m=S[5])*p+(g=S[6])*r+(x=S[7])*c,F[5]=d*o+m*l+g*n+x*h,F[6]=d*T+m*t+g*a+x*u,F[7]=d*b+m*i+g*s+x*y,F[8]=(d=S[8])*k+(m=S[9])*p+(g=S[10])*r+(x=S[11])*c,F[9]=d*o+m*l+g*n+x*h,F[10]=d*T+m*t+g*a+x*u,F[11]=d*b+m*i+g*s+x*y,F[12]=(d=S[12])*k+(m=S[13])*p+(g=S[14])*r+(x=S[15])*c,F[13]=d*o+m*l+g*n+x*h,F[14]=d*T+m*t+g*a+x*u,F[15]=d*b+m*i+g*s+x*y,F}},97688:function(ie){ie.exports=function(F,e,S,k,o,T,b){var p=1/(e-S),l=1/(k-o),t=1/(T-b);return F[0]=-2*p,F[1]=0,F[2]=0,F[3]=0,F[4]=0,F[5]=-2*l,F[6]=0,F[7]=0,F[8]=0,F[9]=0,F[10]=2*t,F[11]=0,F[12]=(e+S)*p,F[13]=(o+k)*l,F[14]=(b+T)*t,F[15]=1,F}},51296:function(ie){ie.exports=function(F,e,S,k,o){var T=1/Math.tan(e/2),b=1/(k-o);return F[0]=T/S,F[1]=0,F[2]=0,F[3]=0,F[4]=0,F[5]=T,F[6]=0,F[7]=0,F[8]=0,F[9]=0,F[10]=(o+k)*b,F[11]=-1,F[12]=0,F[13]=0,F[14]=2*o*k*b,F[15]=0,F}},63688:function(ie){ie.exports=function(F,e,S,k){var o=Math.tan(e.upDegrees*Math.PI/180),T=Math.tan(e.downDegrees*Math.PI/180),b=Math.tan(e.leftDegrees*Math.PI/180),p=Math.tan(e.rightDegrees*Math.PI/180),l=2/(b+p),t=2/(o+T);return F[0]=l,F[1]=0,F[2]=0,F[3]=0,F[4]=0,F[5]=t,F[6]=0,F[7]=0,F[8]=-(b-p)*l*.5,F[9]=(o-T)*t*.5,F[10]=k/(S-k),F[11]=-1,F[12]=0,F[13]=0,F[14]=k*S/(S-k),F[15]=0,F}},30016:function(ie){ie.exports=function(F,e,S,k){var o,T,b,p,l,t,i,r,n,a,s,c,h,u,y,d,m,g,x,v,_,f,C,w,E=k[0],P=k[1],L=k[2],O=Math.sqrt(E*E+P*P+L*L);return Math.abs(O)<1e-6?null:(E*=O=1/O,P*=O,L*=O,o=Math.sin(S),b=1-(T=Math.cos(S)),l=e[1],t=e[2],i=e[3],n=e[5],a=e[6],s=e[7],h=e[9],u=e[10],y=e[11],x=E*P*b-L*o,v=P*P*b+T,_=L*P*b+E*o,f=E*L*b+P*o,C=P*L*b-E*o,w=L*L*b+T,F[0]=(p=e[0])*(d=E*E*b+T)+(r=e[4])*(m=P*E*b+L*o)+(c=e[8])*(g=L*E*b-P*o),F[1]=l*d+n*m+h*g,F[2]=t*d+a*m+u*g,F[3]=i*d+s*m+y*g,F[4]=p*x+r*v+c*_,F[5]=l*x+n*v+h*_,F[6]=t*x+a*v+u*_,F[7]=i*x+s*v+y*_,F[8]=p*f+r*C+c*w,F[9]=l*f+n*C+h*w,F[10]=t*f+a*C+u*w,F[11]=i*f+s*C+y*w,e!==F&&(F[12]=e[12],F[13]=e[13],F[14]=e[14],F[15]=e[15]),F)}},15456:function(ie){ie.exports=function(F,e,S){var k=Math.sin(S),o=Math.cos(S),T=e[4],b=e[5],p=e[6],l=e[7],t=e[8],i=e[9],r=e[10],n=e[11];return e!==F&&(F[0]=e[0],F[1]=e[1],F[2]=e[2],F[3]=e[3],F[12]=e[12],F[13]=e[13],F[14]=e[14],F[15]=e[15]),F[4]=T*o+t*k,F[5]=b*o+i*k,F[6]=p*o+r*k,F[7]=l*o+n*k,F[8]=t*o-T*k,F[9]=i*o-b*k,F[10]=r*o-p*k,F[11]=n*o-l*k,F}},64840:function(ie){ie.exports=function(F,e,S){var k=Math.sin(S),o=Math.cos(S),T=e[0],b=e[1],p=e[2],l=e[3],t=e[8],i=e[9],r=e[10],n=e[11];return e!==F&&(F[4]=e[4],F[5]=e[5],F[6]=e[6],F[7]=e[7],F[12]=e[12],F[13]=e[13],F[14]=e[14],F[15]=e[15]),F[0]=T*o-t*k,F[1]=b*o-i*k,F[2]=p*o-r*k,F[3]=l*o-n*k,F[8]=T*k+t*o,F[9]=b*k+i*o,F[10]=p*k+r*o,F[11]=l*k+n*o,F}},4192:function(ie){ie.exports=function(F,e,S){var k=Math.sin(S),o=Math.cos(S),T=e[0],b=e[1],p=e[2],l=e[3],t=e[4],i=e[5],r=e[6],n=e[7];return e!==F&&(F[8]=e[8],F[9]=e[9],F[10]=e[10],F[11]=e[11],F[12]=e[12],F[13]=e[13],F[14]=e[14],F[15]=e[15]),F[0]=T*o+t*k,F[1]=b*o+i*k,F[2]=p*o+r*k,F[3]=l*o+n*k,F[4]=t*o-T*k,F[5]=i*o-b*k,F[6]=r*o-p*k,F[7]=n*o-l*k,F}},68152:function(ie){ie.exports=function(F,e,S){var k=S[0],o=S[1],T=S[2];return F[0]=e[0]*k,F[1]=e[1]*k,F[2]=e[2]*k,F[3]=e[3]*k,F[4]=e[4]*o,F[5]=e[5]*o,F[6]=e[6]*o,F[7]=e[7]*o,F[8]=e[8]*T,F[9]=e[9]*T,F[10]=e[10]*T,F[11]=e[11]*T,F[12]=e[12],F[13]=e[13],F[14]=e[14],F[15]=e[15],F}},89412:function(ie){ie.exports=function(F){return"mat4("+F[0]+", "+F[1]+", "+F[2]+", "+F[3]+", "+F[4]+", "+F[5]+", "+F[6]+", "+F[7]+", "+F[8]+", "+F[9]+", "+F[10]+", "+F[11]+", "+F[12]+", "+F[13]+", "+F[14]+", "+F[15]+")"}},35176:function(ie){ie.exports=function(F,e,S){var k,o,T,b,p,l,t,i,r,n,a,s,c=S[0],h=S[1],u=S[2];return e===F?(F[12]=e[0]*c+e[4]*h+e[8]*u+e[12],F[13]=e[1]*c+e[5]*h+e[9]*u+e[13],F[14]=e[2]*c+e[6]*h+e[10]*u+e[14],F[15]=e[3]*c+e[7]*h+e[11]*u+e[15]):(o=e[1],T=e[2],b=e[3],p=e[4],l=e[5],t=e[6],i=e[7],r=e[8],n=e[9],a=e[10],s=e[11],F[0]=k=e[0],F[1]=o,F[2]=T,F[3]=b,F[4]=p,F[5]=l,F[6]=t,F[7]=i,F[8]=r,F[9]=n,F[10]=a,F[11]=s,F[12]=k*c+p*h+r*u+e[12],F[13]=o*c+l*h+n*u+e[13],F[14]=T*c+t*h+a*u+e[14],F[15]=b*c+i*h+s*u+e[15]),F}},86520:function(ie){ie.exports=function(F,e){if(F===e){var S=e[1],k=e[2],o=e[3],T=e[6],b=e[7],p=e[11];F[1]=e[4],F[2]=e[8],F[3]=e[12],F[4]=S,F[6]=e[9],F[7]=e[13],F[8]=k,F[9]=T,F[11]=e[14],F[12]=o,F[13]=b,F[14]=p}else F[0]=e[0],F[1]=e[4],F[2]=e[8],F[3]=e[12],F[4]=e[1],F[5]=e[5],F[6]=e[9],F[7]=e[13],F[8]=e[2],F[9]=e[6],F[10]=e[10],F[11]=e[14],F[12]=e[3],F[13]=e[7],F[14]=e[11],F[15]=e[15];return F}},23352:function(ie,F,e){"use strict";var S=e(42771),k=e(55616),o=e(28624),T=e(55212),b=e(60463),p=e(72160),l=e(33888),t=e(14144),i=e(51160),r=e(58908),n=e(65819),a=e(23464),s=e(63768),c=e(50896),h=e(71920),u=e(47520),y=e(308).nextPow2,d=new b,m=!1;if(document.body){var g=document.body.appendChild(document.createElement("div"));g.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(g).fontStretch&&(m=!0),document.body.removeChild(g)}var x=function(v){var _;this.gl="function"==typeof(_=v)&&_._gl&&_.prop&&_.texture&&_.buffer?(v={regl:v}).regl._gl:T(v),this.shader=d.get(this.gl),this.regl=this.shader?this.shader.regl:v.regl||o({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),d.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(r(v)?v:{})};x.prototype.createShader=function(){var v=this.regl,_=v({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:v.prop("count"),offset:v.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:v.this("sizeBuffer")},width:{offset:0,stride:8,buffer:v.this("sizeBuffer")},char:v.this("charBuffer"),position:v.this("position")},uniforms:{atlasSize:function(f,C){return[C.atlas.width,C.atlas.height]},atlasDim:function(f,C){return[C.atlas.cols,C.atlas.rows]},atlas:function(f,C){return C.atlas.texture},charStep:function(f,C){return C.atlas.step},em:function(f,C){return C.atlas.em},color:v.prop("color"),opacity:v.prop("opacity"),viewport:v.this("viewportArray"),scale:v.this("scale"),align:v.prop("align"),baseline:v.prop("baseline"),translate:v.this("translate"),positionOffset:v.prop("positionOffset")},primitive:"points",viewport:v.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\tvec2 offset = floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ vec2(positionOffset.x, -positionOffset.y)))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position = (position + translate) * scale;\n\t\t\t\tposition += offset * scale;\n\n\t\t\t\tcharCoord = position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position = vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize = charStep;\n\n\t\t\t\tcharId.x = mod(char, atlasDim.x);\n\t\t\t\tcharId.y = floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth = width * em;\n\n\t\t\t\tfontColor = color / 255.;\n\t\t\t}",frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform sampler2D atlas;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep = floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y = charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth = ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) > halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) < halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv += charId * charStep;\n\t\t\t\tuv = uv / atlasSize;\n\n\t\t\t\tvec4 color = fontColor;\n\t\t\t\tvec4 mask = texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY = lightness(mask);\n\t\t\t\t// float colorY = lightness(color);\n\t\t\t\tcolor.a *= maskY;\n\t\t\t\tcolor.a *= opacity;\n\n\t\t\t\t// color.a += .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb += (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor = color;\n\t\t\t}"});return{regl:v,draw:_,atlas:{}}},x.prototype.update=function(v){var _=this;if("string"==typeof v)v={text:v};else if(!v)return;null!=(v=k(v,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity&&(this.opacity=Array.isArray(v.opacity)?v.opacity.map(function(me){return parseFloat(me)}):parseFloat(v.opacity)),null!=v.viewport&&(this.viewport=i(v.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null!=v.kerning&&(this.kerning=v.kerning),null!=v.offset&&("number"==typeof v.offset&&(v.offset=[v.offset,0]),this.positionOffset=u(v.offset)),v.direction&&(this.direction=v.direction),v.range&&(this.range=v.range,this.scale=[1/(v.range[2]-v.range[0]),1/(v.range[3]-v.range[1])],this.translate=[-v.range[0],-v.range[1]]),v.scale&&(this.scale=v.scale),v.translate&&(this.translate=v.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||v.font||(v.font=x.baseFontSize+"px sans-serif");var f,C=!1,w=!1;if(v.font&&(Array.isArray(v.font)?v.font:[v.font]).forEach(function(me,Pe){if("string"==typeof me)try{me=S.parse(me)}catch{me=S.parse(x.baseFontSize+"px "+me)}else{var Ae=me.style,Ce=me.weight,Oe=me.stretch,Ne=me.variant;me=S.parse(S.stringify(me)),Ae&&(me.style=Ae),Ce&&(me.weight=Ce),Oe&&(me.stretch=Oe),Ne&&(me.variant=Ne)}var je=S.stringify({size:x.baseFontSize,family:me.family,stretch:m?me.stretch:void 0,variant:me.variant,weight:me.weight,style:me.style}),ve=n(me.size),Me=Math.round(ve[0]*a(ve[1]));if(Me!==_.fontSize[Pe]&&(w=!0,_.fontSize[Pe]=Me),!(_.font[Pe]&&je==_.font[Pe].baseString||(C=!0,_.font[Pe]=x.fonts[je],_.font[Pe]))){var Le=me.family.join(", "),Ue=[me.style];me.style!=me.variant&&Ue.push(me.variant),me.variant!=me.weight&&Ue.push(me.weight),m&&me.weight!=me.stretch&&Ue.push(me.stretch),_.font[Pe]={baseString:je,family:Le,weight:me.weight,stretch:me.stretch,style:me.style,variant:me.variant,width:{},kerning:{},metrics:h(Le,{origin:"top",fontSize:x.baseFontSize,fontStyle:Ue.join(" ")})},x.fonts[je]=_.font[Pe]}}),(C||w)&&this.font.forEach(function(me,Pe){var Ae=S.stringify({size:_.fontSize[Pe],family:me.family,stretch:m?me.stretch:void 0,variant:me.variant,weight:me.weight,style:me.style});_.fontAtlas[Pe]=_.shader.atlas[Ae],_.fontAtlas[Pe]||(_.shader.atlas[Ae]=_.fontAtlas[Pe]={fontString:Ae,step:2*Math.ceil(_.fontSize[Pe]*me.metrics.bottom*.5),em:_.fontSize[Pe],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:_.regl.texture()}),null==v.text&&(v.text=_.text)}),"string"==typeof v.text&&v.position&&v.position.length>2){for(var E=Array(.5*v.position.length),P=0;P<E.length;P++)E[P]=v.text;v.text=E}if(null!=v.text||C){if(this.textOffsets=[0],Array.isArray(v.text)){this.count=v.text[0].length,this.counts=[this.count];for(var L=1;L<v.text.length;L++)this.textOffsets[L]=this.textOffsets[L-1]+v.text[L-1].length,this.count+=v.text[L].length,this.counts.push(v.text[L].length);this.text=v.text.join("")}else this.text=v.text,this.count=this.text.length,this.counts=[this.count];f=[],this.font.forEach(function(me,Pe){x.atlasContext.font=me.baseString;for(var Ae=_.fontAtlas[Pe],Ce=0;Ce<_.text.length;Ce++){var Oe=_.text.charAt(Ce);if(null==Ae.ids[Oe]&&(Ae.ids[Oe]=Ae.chars.length,Ae.chars.push(Oe),f.push(Oe)),null==me.width[Oe]&&(me.width[Oe]=x.atlasContext.measureText(Oe).width/x.baseFontSize,_.kerning)){var Ne=[];for(var je in me.width)Ne.push(je+Oe,Oe+je);c(me.kerning,s(me.family,{pairs:Ne}))}}})}if(v.position)if(v.position.length>2){for(var O=!v.position[0].length,z=t.mallocFloat(2*this.count),V=0,R=0;V<this.counts.length;V++){var U=this.counts[V];if(O)for(var Z=0;Z<U;Z++)z[R++]=v.position[2*V],z[R++]=v.position[2*V+1];else for(var N=0;N<U;N++)z[R++]=v.position[V][0],z[R++]=v.position[V][1]}this.position.call?this.position({type:"float",data:z}):this.position=this.regl.buffer({type:"float",data:z}),t.freeFloat(z)}else this.position.destroy&&this.position.destroy(),this.position={constant:v.position};if(v.text||C){var G=t.mallocUint8(this.count),W=t.mallocFloat(2*this.count);this.textWidth=[];for(var ae=0,re=0;ae<this.counts.length;ae++){for(var ne=this.counts[ae],Q=this.font[ae]||this.font[0],$=this.fontAtlas[ae]||this.fontAtlas[0],X=0;X<ne;X++){var oe=this.text.charAt(re),fe=this.text.charAt(re-1);if(G[re]=$.ids[oe],W[2*re]=Q.width[oe],X){var we=W[2*re-1]+.5*W[2*re-2]+.5*W[2*re];if(this.kerning){var Te=Q.kerning[fe+oe];Te&&(we+=.001*Te)}W[2*re+1]=we}else W[2*re+1]=.5*W[2*re];re++}this.textWidth.push(W.length?.5*W[2*re-2]+W[2*re-1]:0)}v.align||(v.align=this.align),this.charBuffer({data:G,type:"uint8",usage:"stream"}),this.sizeBuffer({data:W,type:"float",usage:"stream"}),t.freeUint8(G),t.freeFloat(W),f.length&&this.font.forEach(function(me,Pe){var Ae=_.fontAtlas[Pe],Ce=Ae.step,Oe=Math.floor(x.maxAtlasSize/Ce),Ne=Math.min(Oe,Ae.chars.length),je=Math.ceil(Ae.chars.length/Ne),ve=y(Ne*Ce),Me=y(je*Ce);Ae.width=ve,Ae.height=Me,Ae.rows=je,Ae.cols=Ne,Ae.em&&Ae.texture({data:l({canvas:x.atlasCanvas,font:Ae.fontString,chars:Ae.chars,shape:[ve,Me],step:[Ce,Ce]})})})}if(v.align&&(this.align=v.align,this.alignOffset=this.textWidth.map(function(me,Pe){var Ae=Array.isArray(_.align)?_.align.length>1?_.align[Pe]:_.align[0]:_.align;if("number"==typeof Ae)return Ae;switch(Ae){case"right":case"end":return-me;case"center":case"centre":case"middle":return.5*-me}return 0})),null==this.baseline&&null==v.baseline&&(v.baseline=0),null!=v.baseline&&(this.baseline=v.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(me,Pe){var Ae=(_.font[Pe]||_.font[0]).metrics,Ce=0;return-1*((Ce+=.5*Ae.bottom)+("number"==typeof me?me-Ae.baseline:-Ae[me]))})),null!=v.color)if(v.color||(v.color="transparent"),"string"!=typeof v.color&&isNaN(v.color)){var xe;if("number"==typeof v.color[0]&&v.color.length>this.counts.length){var ye=v.color.length;xe=t.mallocUint8(ye);for(var _e=(v.color.subarray||v.color.slice).bind(v.color),Ie=0;Ie<ye;Ie+=4)xe.set(p(_e(Ie,Ie+4),"uint8"),Ie)}else{var De=v.color.length;xe=t.mallocUint8(4*De);for(var be=0;be<De;be++)xe.set(p(v.color[be]||0,"uint8"),4*be)}this.color=xe}else this.color=p(v.color,"uint8");if(v.position||v.text||v.color||v.baseline||v.align||v.font||v.offset||v.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var he=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(he);for(var ce=0;ce<this.batch.length;ce++)this.batch[ce]={count:this.counts.length>1?this.counts[ce]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[ce]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*ce,4*ce+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[ce]:this.opacity,baseline:null!=this.baselineOffset[ce]?this.baselineOffset[ce]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[ce]?this.alignOffset[ce]:this.alignOffset[0]:0,atlas:this.fontAtlas[ce]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*ce,2*ce+2):this.positionOffset}}else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:[]},x.prototype.destroy=function(){},x.prototype.kerning=!0,x.prototype.position={constant:new Float32Array(2)},x.prototype.translate=null,x.prototype.scale=null,x.prototype.font=null,x.prototype.text="",x.prototype.positionOffset=[0,0],x.prototype.opacity=1,x.prototype.color=new Uint8Array([0,0,0,255]),x.prototype.alignOffset=[0,0],x.maxAtlasSize=1024,x.atlasCanvas=document.createElement("canvas"),x.atlasContext=x.atlasCanvas.getContext("2d",{alpha:!1}),x.baseFontSize=64,x.fonts={},ie.exports=x},55212:function(ie,F,e){"use strict";var S=e(55616);function k(b){if(b.container)if(b.container==document.body)document.body.style.width||(b.canvas.width=b.width||b.pixelRatio*e.g.innerWidth),document.body.style.height||(b.canvas.height=b.height||b.pixelRatio*e.g.innerHeight);else{var p=b.container.getBoundingClientRect();b.canvas.width=b.width||p.right-p.left,b.canvas.height=b.height||p.bottom-p.top}}function o(b){return"function"==typeof b.getContext&&"width"in b&&"height"in b}function T(){var b=document.createElement("canvas");return b.style.position="absolute",b.style.top=0,b.style.left=0,b}ie.exports=function(b){var p,t;if(b?"string"==typeof b&&(b={container:b}):b={},(b=o(b)||"string"==typeof(p=b).nodeName&&"function"==typeof p.appendChild&&"function"==typeof p.getBoundingClientRect?{container:b}:(t=b,"function"==typeof t.drawArrays||"function"==typeof t.drawElements?{gl:b}:S(b,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0))).pixelRatio||(b.pixelRatio=e.g.pixelRatio||1),b.gl)return b.gl;if(b.canvas&&(b.container=b.canvas.parentNode),b.container){if("string"==typeof b.container){var l=document.querySelector(b.container);if(!l)throw Error("Element "+b.container+" is not found");b.container=l}o(b.container)?(b.canvas=b.container,b.container=b.canvas.parentNode):b.canvas||(b.canvas=T(),b.container.appendChild(b.canvas),k(b))}else if(!b.canvas){if(typeof document>"u")throw Error("Not DOM environment. Use headless-gl.");b.container=document.body||document.documentElement,b.canvas=T(),b.container.appendChild(b.canvas),k(b)}return b.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(t){try{b.gl=b.canvas.getContext(t,b.attrs)}catch{}return b.gl}),b.gl}},26444:function(ie){ie.exports=function(F){"string"==typeof F&&(F=[F]);for(var e=[].slice.call(arguments,1),S=[],k=0;k<F.length-1;k++)S.push(F[k],e[k]||"");return S.push(F[k]),S.join("")}},2304:function(ie,F,e){"use strict";var S=e(53664)("%Object.getOwnPropertyDescriptor%",!0);if(S)try{S([],"length")}catch{S=null}ie.exports=S},52264:function(ie,F,e){"use strict";var S,k=e(24200);S="function"==typeof e.g.matchMedia?!e.g.matchMedia("(hover: none)").matches:k,ie.exports=S},89184:function(ie,F,e){"use strict";var S=e(24200);ie.exports=S&&function(){var k=!1;try{var o=Object.defineProperty({},"passive",{get:function(){k=!0}});window.addEventListener("test",null,o),window.removeEventListener("test",null,o)}catch{k=!1}return k}()},39640:function(ie,F,e){"use strict";var S=e(53664)("%Object.defineProperty%",!0),k=function(){if(S)try{return S({},"a",{value:1}),!0}catch{return!1}return!1};k.hasArrayLengthDefineBug=function(){if(!k())return null;try{return 1!==S([],"length",{value:1}).length}catch{return!0}},ie.exports=k},69572:function(ie){"use strict";var F={foo:{}},e=Object;ie.exports=function(){return{__proto__:F}.foo===F.foo&&!({__proto__:null}instanceof e)}},71080:function(ie,F,e){"use strict";var S=typeof Symbol<"u"&&Symbol,k=e(89320);ie.exports=function(){return"function"==typeof S&&"function"==typeof Symbol&&"symbol"==typeof S("foo")&&"symbol"==typeof Symbol("bar")&&k()}},89320:function(ie){"use strict";ie.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var F={},e=Symbol("test"),S=Object(e);if("string"==typeof e||"[object Symbol]"!==Object.prototype.toString.call(e)||"[object Symbol]"!==Object.prototype.toString.call(S))return!1;for(e in F[e]=42,F)return!1;if("function"==typeof Object.keys&&0!==Object.keys(F).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(F).length)return!1;var k=Object.getOwnPropertySymbols(F);if(1!==k.length||k[0]!==e||!Object.prototype.propertyIsEnumerable.call(F,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(F,e);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},46672:function(ie,F,e){"use strict";var S=e(89320);ie.exports=function(){return S()&&!!Symbol.toStringTag}},92064:function(ie,F,e){"use strict";var S=Function.prototype.call,k=Object.prototype.hasOwnProperty,o=e(8844);ie.exports=o.call(S,k)},35984:function(ie,F){F.read=function(e,S,k,o,T){var b,p,l=8*T-o-1,t=(1<<l)-1,i=t>>1,r=-7,n=k?T-1:0,a=k?-1:1,s=e[S+n];for(n+=a,b=s&(1<<-r)-1,s>>=-r,r+=l;r>0;b=256*b+e[S+n],n+=a,r-=8);for(p=b&(1<<-r)-1,b>>=-r,r+=o;r>0;p=256*p+e[S+n],n+=a,r-=8);if(0===b)b=1-i;else{if(b===t)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,o),b-=i}return(s?-1:1)*p*Math.pow(2,b-o)},F.write=function(e,S,k,o,T,b){var p,l,t,i=8*b-T-1,r=(1<<i)-1,n=r>>1,a=23===T?Math.pow(2,-24)-Math.pow(2,-77):0,s=o?0:b-1,c=o?1:-1,h=S<0||0===S&&1/S<0?1:0;for(S=Math.abs(S),isNaN(S)||S===1/0?(l=isNaN(S)?1:0,p=r):(p=Math.floor(Math.log(S)/Math.LN2),S*(t=Math.pow(2,-p))<1&&(p--,t*=2),(S+=p+n>=1?a/t:a*Math.pow(2,1-n))*t>=2&&(p++,t/=2),p+n>=r?(l=0,p=r):p+n>=1?(l=(S*t-1)*Math.pow(2,T),p+=n):(l=S*Math.pow(2,n-1)*Math.pow(2,T),p=0));T>=8;e[k+s]=255&l,s+=c,l/=256,T-=8);for(p=p<<T|l,i+=T;i>0;e[k+s]=255&p,s+=c,p/=256,i-=8);e[k+s-c]|=128*h}},6768:function(ie){ie.exports="function"==typeof Object.create?function(F,e){e&&(F.super_=e,F.prototype=Object.create(e.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}))}:function(F,e){if(e){F.super_=e;var S=function(){};S.prototype=e.prototype,F.prototype=new S,F.prototype.constructor=F}}},91148:function(ie,F,e){"use strict";var S=e(46672)(),k=e(99676)("Object.prototype.toString"),o=function(p){return!(S&&p&&"object"==typeof p&&Symbol.toStringTag in p)&&"[object Arguments]"===k(p)},T=function(p){return!!o(p)||null!==p&&"object"==typeof p&&"number"==typeof p.length&&p.length>=0&&"[object Array]"!==k(p)&&"[object Function]"===k(p.callee)},b=function(){return o(arguments)}();o.isLegacyArguments=T,ie.exports=b?o:T},24200:function(ie){ie.exports=!0},90720:function(ie){"use strict";var F,e,S=Function.prototype.toString,k="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof k&&"function"==typeof Object.defineProperty)try{F=Object.defineProperty({},"length",{get:function(){throw e}}),e={},k(function(){throw 42},null,F)}catch(n){n!==e&&(k=null)}else k=null;var o=/^\s*class\b/,T=function(n){try{var a=S.call(n);return o.test(a)}catch{return!1}},b=function(n){try{return!T(n)&&(S.call(n),!0)}catch{return!1}},p=Object.prototype.toString,l="function"==typeof Symbol&&!!Symbol.toStringTag,t=!(0 in[,]),i=function(){return!1};if("object"==typeof document){var r=document.all;p.call(r)===p.call(document.all)&&(i=function(n){if((t||!n)&&(void 0===n||"object"==typeof n))try{var a=p.call(n);return("[object HTMLAllCollection]"===a||"[object HTML document.all class]"===a||"[object HTMLCollection]"===a||"[object Object]"===a)&&null==n("")}catch{}return!1})}ie.exports=k?function(n){if(i(n))return!0;if(!n||"function"!=typeof n&&"object"!=typeof n)return!1;try{k(n,null,F)}catch(a){if(a!==e)return!1}return!T(n)&&b(n)}:function(n){if(i(n))return!0;if(!n||"function"!=typeof n&&"object"!=typeof n)return!1;if(l)return b(n);if(T(n))return!1;var a=p.call(n);return!("[object Function]"!==a&&"[object GeneratorFunction]"!==a&&!/^\[object HTML/.test(a))&&b(n)}},84420:function(ie,F,e){"use strict";var S,k=Object.prototype.toString,o=Function.prototype.toString,T=/^\s*(?:function)?\*/,b=e(46672)(),p=Object.getPrototypeOf;ie.exports=function(l){if("function"!=typeof l)return!1;if(T.test(o.call(l)))return!0;if(!b)return"[object GeneratorFunction]"===k.call(l);if(!p)return!1;if(void 0===S){var t=function(){if(!b)return!1;try{return Function("return function*() {}")()}catch{}}();S=!!t&&p(t)}return p(l)===S}},96604:function(ie){"use strict";ie.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},85992:function(ie){"use strict";ie.exports=function(F){return F!=F}},1560:function(ie,F,e){"use strict";var S=e(57916),k=e(81288),o=e(85992),T=e(57740),b=e(59736),p=S(T(),Number);k(p,{getPolyfill:T,implementation:o,shim:b}),ie.exports=p},57740:function(ie,F,e){"use strict";var S=e(85992);ie.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:S}},59736:function(ie,F,e){"use strict";var S=e(81288),k=e(57740);ie.exports=function(){var o=k();return S(Number,{isNaN:o},{isNaN:function(){return Number.isNaN!==o}}),o}},18400:function(ie){"use strict";ie.exports=function(F){var e=typeof F;return null!==F&&("object"===e||"function"===e)}},58908:function(ie){"use strict";var F=Object.prototype.toString;ie.exports=function(e){var S;return"[object Object]"===F.call(e)&&(null===(S=Object.getPrototypeOf(e))||S===Object.getPrototypeOf({}))}},94576:function(ie){"use strict";ie.exports=function(F){for(var e,S=F.length,k=0;k<S;k++)if(((e=F.charCodeAt(k))<9||e>13)&&32!==e&&133!==e&&160!==e&&5760!==e&&6158!==e&&(e<8192||e>8205)&&8232!==e&&8233!==e&&8239!==e&&8287!==e&&8288!==e&&12288!==e&&65279!==e)return!1;return!0}},53520:function(ie){"use strict";ie.exports=function(F){return"string"==typeof F&&(F=F.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(F)&&/[\dz]$/i.test(F)&&F.length>4))}},7728:function(ie,F,e){"use strict";var S=e(46492),k=e(63436),o=e(99676),T=o("Object.prototype.toString"),b=e(46672)(),p=e(2304),l=typeof globalThis>"u"?e.g:globalThis,t=k(),i=o("Array.prototype.indexOf",!0)||function(s,c){for(var h=0;h<s.length;h+=1)if(s[h]===c)return h;return-1},r=o("String.prototype.slice"),n={},a=Object.getPrototypeOf;b&&p&&a&&S(t,function(s){var c=new l[s];if(Symbol.toStringTag in c){var h=a(c),u=p(h,Symbol.toStringTag);if(!u){var y=a(h);u=p(y,Symbol.toStringTag)}n[s]=u.get}}),ie.exports=function(s){if(!s||"object"!=typeof s)return!1;if(!b||!(Symbol.toStringTag in s)){var c=r(T(s),8,-1);return i(t,c)>-1}return!!p&&(h=s,u=!1,S(n,function(y,d){if(!u)try{u=y.call(h)===d}catch{}}),u);var h,u}},76244:function(ie){"use strict";ie.exports=Math.log2||function(F){return Math.log(F)*Math.LOG2E}},62644:function(ie,F,e){"use strict";ie.exports=function(k,o){o||(o=k,k=window);var T=0,b=0,p=0,l={shift:!1,alt:!1,control:!1,meta:!1},t=!1;function i(m){var g=!1;return"altKey"in m&&(g=g||m.altKey!==l.alt,l.alt=!!m.altKey),"shiftKey"in m&&(g=g||m.shiftKey!==l.shift,l.shift=!!m.shiftKey),"ctrlKey"in m&&(g=g||m.ctrlKey!==l.control,l.control=!!m.ctrlKey),"metaKey"in m&&(g=g||m.metaKey!==l.meta,l.meta=!!m.metaKey),g}function r(m,g){var x=S.x(g),v=S.y(g);"buttons"in g&&(m=0|g.buttons),(m!==T||x!==b||v!==p||i(g))&&(T=0|m,b=x||0,p=v||0,o&&o(T,b,p,l))}function n(m){r(0,m)}function a(){(T||b||p||l.shift||l.alt||l.meta||l.control)&&(b=p=0,T=0,l.shift=l.alt=l.control=l.meta=!1,o&&o(0,0,0,l))}function s(m){i(m)&&o&&o(T,b,p,l)}function c(m){0===S.buttons(m)?r(0,m):r(T,m)}function h(m){r(T|S.buttons(m),m)}function u(m){r(T&~S.buttons(m),m)}function y(){t||(t=!0,k.addEventListener("mousemove",c),k.addEventListener("mousedown",h),k.addEventListener("mouseup",u),k.addEventListener("mouseleave",n),k.addEventListener("mouseenter",n),k.addEventListener("mouseout",n),k.addEventListener("mouseover",n),k.addEventListener("blur",a),k.addEventListener("keyup",s),k.addEventListener("keydown",s),k.addEventListener("keypress",s),k!==window&&(window.addEventListener("blur",a),window.addEventListener("keyup",s),window.addEventListener("keydown",s),window.addEventListener("keypress",s)))}y();var d={element:k};return Object.defineProperties(d,{enabled:{get:function(){return t},set:function(m){m?y():t&&(t=!1,k.removeEventListener("mousemove",c),k.removeEventListener("mousedown",h),k.removeEventListener("mouseup",u),k.removeEventListener("mouseleave",n),k.removeEventListener("mouseenter",n),k.removeEventListener("mouseout",n),k.removeEventListener("mouseover",n),k.removeEventListener("blur",a),k.removeEventListener("keyup",s),k.removeEventListener("keydown",s),k.removeEventListener("keypress",s),k!==window&&(window.removeEventListener("blur",a),window.removeEventListener("keyup",s),window.removeEventListener("keydown",s),window.removeEventListener("keypress",s)))},enumerable:!0},buttons:{get:function(){return T},enumerable:!0},x:{get:function(){return b},enumerable:!0},y:{get:function(){return p},enumerable:!0},mods:{get:function(){return l},enumerable:!0}}),d};var S=e(93784)},29128:function(ie){var F={left:0,top:0};ie.exports=function(e,S,k){S=S||e.currentTarget||e.srcElement,Array.isArray(k)||(k=[0,0]);var o,T=e.clientX||0,b=e.clientY||0,p=(o=S)===window||o===document||o===document.body?F:o.getBoundingClientRect();return k[0]=T-p.left,k[1]=b-p.top,k}},93784:function(ie,F){"use strict";function e(S){return S.target||S.srcElement||window}F.buttons=function(S){if("object"==typeof S){if("buttons"in S)return S.buttons;if("which"in S){if(2===(k=S.which))return 4;if(3===k)return 2;if(k>0)return 1<<k-1}else if("button"in S){var k;if(1===(k=S.button))return 4;if(2===k)return 2;if(k>=0)return 1<<k}}return 0},F.element=e,F.x=function(S){if("object"==typeof S){if("offsetX"in S)return S.offsetX;var k=e(S).getBoundingClientRect();return S.clientX-k.left}return 0},F.y=function(S){if("object"==typeof S){if("offsetY"in S)return S.offsetY;var k=e(S).getBoundingClientRect();return S.clientY-k.top}return 0}},97264:function(ie,F,e){"use strict";var S=e(23464);ie.exports=function(k,o,T){"function"==typeof k&&(T=!!o,o=k,k=window);var b=S("ex",k),p=function(l){T&&l.preventDefault();var t=l.deltaX||0,i=l.deltaY||0,r=l.deltaZ||0,n=1;switch(l.deltaMode){case 1:n=b;break;case 2:n=window.innerHeight}if(i*=n,r*=n,(t*=n)||i||r)return o(t,i,r,l)};return k.addEventListener("wheel",p),p}},88324:function(ie,F,e){var S,k,o;(o=void 0!==e.g?e.g:this)[k="Promise"]=o[k]||function(){"use strict";var b,p,l,t=Object.prototype.toString,i=typeof setImmediate<"u"?function(x){return setImmediate(x)}:setTimeout;try{Object.defineProperty({},"x",{}),b=function(x,v,_,f){return Object.defineProperty(x,v,{value:_,writable:!0,configurable:!1!==f})}}catch{b=function(v,_,f){return v[_]=f,v}}function r(x,v){l.add(x,v),p||(p=i(l.drain))}function n(x){var v,_=typeof x;return null==x||"object"!=_&&"function"!=_||(v=x.then),"function"==typeof v&&v}function a(){for(var x=0;x<this.chain.length;x++)s(this,1===this.state?this.chain[x].success:this.chain[x].failure,this.chain[x]);this.chain.length=0}function s(x,v,_){var f,C;try{!1===v?_.reject(x.msg):(f=!0===v?x.msg:v.call(void 0,x.msg))===_.promise?_.reject(TypeError("Promise-chain cycle")):(C=n(f))?C.call(f,_.resolve,_.reject):_.resolve(f)}catch(w){_.reject(w)}}function c(x){var v,_=this;if(!_.triggered){_.triggered=!0,_.def&&(_=_.def);try{(v=n(x))?r(function(){var f=new y(_);try{v.call(x,function(){c.apply(f,arguments)},function(){h.apply(f,arguments)})}catch(C){h.call(f,C)}}):(_.msg=x,_.state=1,_.chain.length>0&&r(a,_))}catch(f){h.call(new y(_),f)}}}function h(x){var v=this;v.triggered||(v.triggered=!0,v.def&&(v=v.def),v.msg=x,v.state=2,v.chain.length>0&&r(a,v))}function u(x,v,_,f){for(var C=0;C<v.length;C++)!function(w){x.resolve(v[w]).then(function(E){_(w,E)},f)}(C)}function y(x){this.def=x,this.triggered=!1}function d(x){this.promise=x,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function m(x){if("function"!=typeof x)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var v=new d(this);this.then=function(_,f){var C={success:"function"!=typeof _||_,failure:"function"==typeof f&&f};return C.promise=new this.constructor(function(w,E){if("function"!=typeof w||"function"!=typeof E)throw TypeError("Not a function");C.resolve=w,C.reject=E}),v.chain.push(C),0!==v.state&&r(a,v),C.promise},this.catch=function(_){return this.then(void 0,_)};try{x.call(void 0,function(_){c.call(v,_)},function(_){h.call(v,_)})}catch(_){h.call(v,_)}}l=function(){var x,v,_;function f(C,w){this.fn=C,this.self=w,this.next=void 0}return{add:function(C,w){_=new f(C,w),v?v.next=_:x=_,v=_,_=void 0},drain:function(){var C=x;for(x=v=p=void 0;C;)C.fn.call(C.self),C=C.next}}}();var g=b({},"constructor",m,!1);return m.prototype=g,b(g,"__NPO__",0,!1),b(m,"resolve",function(x){return x&&"object"==typeof x&&1===x.__NPO__?x:new this(function(v,_){if("function"!=typeof v||"function"!=typeof _)throw TypeError("Not a function");v(x)})}),b(m,"reject",function(x){return new this(function(v,_){if("function"!=typeof v||"function"!=typeof _)throw TypeError("Not a function");_(x)})}),b(m,"all",function(x){var v=this;return"[object Array]"!=t.call(x)?v.reject(TypeError("Not an array")):0===x.length?v.resolve([]):new v(function(_,f){if("function"!=typeof _||"function"!=typeof f)throw TypeError("Not a function");var C=x.length,w=Array(C),E=0;u(v,x,function(P,L){w[P]=L,++E===C&&_(w)},f)})}),b(m,"race",function(x){var v=this;return"[object Array]"!=t.call(x)?v.reject(TypeError("Not an array")):new v(function(_,f){if("function"!=typeof _||"function"!=typeof f)throw TypeError("Not a function");u(v,x,function(C,w){_(w)},f)})}),m}(),ie.exports?ie.exports=o[k]:void 0===(S=function(){return o[k]}.call(F,e,F,ie))||(ie.exports=S)},48816:function(ie){var F=Math.PI,e=b(120);function S(p,l,t,i){return["C",p,l,t,i,t,i]}function k(p,l,t,i,r,n){return["C",p/3+.6666666666666666*t,l/3+.6666666666666666*i,r/3+.6666666666666666*t,n/3+.6666666666666666*i,r,n]}function o(p,l,t,i,r,n,a,s,c,h){if(h)C=h[0],w=h[1],_=h[2],f=h[3];else{var u=T(p,l,-r);l=u.y;var y=((p=u.x)-(s=(u=T(s,c,-r)).x))/2,d=(l-(c=u.y))/2,m=y*y/(t*t)+d*d/(i*i);m>1&&(t*=m=Math.sqrt(m),i*=m);var g=t*t,x=i*i,v=(n==a?-1:1)*Math.sqrt(Math.abs((g*x-g*d*d-x*y*y)/(g*d*d+x*y*y)));v==1/0&&(v=1);var _=v*t*d/i+(p+s)/2,f=v*-i*y/t+(l+c)/2,C=Math.asin(((l-f)/i).toFixed(9)),w=Math.asin(((c-f)/i).toFixed(9));(C=p<_?F-C:C)<0&&(C=2*F+C),(w=s<_?F-w:w)<0&&(w=2*F+w),a&&C>w&&(C-=2*F),!a&&w>C&&(w-=2*F)}if(Math.abs(w-C)>e){var E=w,P=s,L=c;w=C+e*(a&&w>C?1:-1);var O=o(s=_+t*Math.cos(w),c=f+i*Math.sin(w),t,i,r,0,a,P,L,[w,E,_,f])}var z=Math.tan((w-C)/4),V=4/3*t*z,R=4/3*i*z,U=[2*p-(p+V*Math.sin(C)),2*l-(l-R*Math.cos(C)),s+V*Math.sin(w),c-R*Math.cos(w),s,c];if(h)return U;O&&(U=U.concat(O));for(var Z=0;Z<U.length;){var N=T(U[Z],U[Z+1],r);U[Z++]=N.x,U[Z++]=N.y}return U}function T(p,l,t){return{x:p*Math.cos(t)-l*Math.sin(t),y:p*Math.sin(t)+l*Math.cos(t)}}function b(p){return p*(F/180)}ie.exports=function(p){for(var l,t=[],i=0,r=0,n=0,a=0,s=null,c=null,h=0,u=0,y=0,d=p.length;y<d;y++){var m=p[y],g=m[0];switch(g){case"M":n=m[1],a=m[2];break;case"A":(m=o(h,u,m[1],m[2],b(m[3]),m[4],m[5],m[6],m[7])).unshift("C"),m.length>7&&(t.push(m.splice(0,7)),m.unshift("C"));break;case"S":var x=h,v=u;"C"!=l&&"S"!=l||(x+=x-i,v+=v-r),m=["C",x,v,m[1],m[2],m[3],m[4]];break;case"T":"Q"==l||"T"==l?(s=2*h-s,c=2*u-c):(s=h,c=u),m=k(h,u,s,c,m[1],m[2]);break;case"Q":s=m[1],c=m[2],m=k(h,u,m[1],m[2],m[3],m[4]);break;case"L":m=S(h,u,m[1],m[2]);break;case"H":m=S(h,u,m[1],u);break;case"V":m=S(h,u,h,m[1]);break;case"Z":m=S(h,u,n,a)}l=g,h=m[m.length-2],u=m[m.length-1],m.length>4?(i=m[m.length-4],r=m[m.length-3]):(i=h,r=u),t.push(m)}return t}},50896:function(ie){"use strict";var F=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;ie.exports=function(){try{if(!Object.assign)return!1;var k=new String("abc");if(k[5]="de","5"===Object.getOwnPropertyNames(k)[0])return!1;for(var o={},T=0;T<10;T++)o["_"+String.fromCharCode(T)]=T;if("0123456789"!==Object.getOwnPropertyNames(o).map(function(p){return o[p]}).join(""))return!1;var b={};return"abcdefghijklmnopqrst".split("").forEach(function(p){b[p]=p}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},b)).join("")}catch{return!1}}()?Object.assign:function(k,o){for(var T,b,p=function(r){if(null==r)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}(k),l=1;l<arguments.length;l++){for(var t in T=Object(arguments[l]))e.call(T,t)&&(p[t]=T[t]);if(F){b=F(T);for(var i=0;i<b.length;i++)S.call(T,b[i])&&(p[b[i]]=T[b[i]])}}return p}},76835:function(ie){"use strict";var F=function(e){return e!=e};ie.exports=function(e,S){return 0===e&&0===S?1/e==1/S:e===S||!(!F(e)||!F(S))}},39896:function(ie,F,e){"use strict";var S=e(81288),k=e(57916),o=e(76835),T=e(66148),b=e(16408),p=k(T(),Object);S(p,{getPolyfill:T,implementation:o,shim:b}),ie.exports=p},66148:function(ie,F,e){"use strict";var S=e(76835);ie.exports=function(){return"function"==typeof Object.is?Object.is:S}},16408:function(ie,F,e){"use strict";var S=e(66148),k=e(81288);ie.exports=function(){var o=S();return k(Object,{is:o},{is:function(){return Object.is!==o}}),o}},32764:function(ie,F,e){"use strict";var S;if(!Object.keys){var k=Object.prototype.hasOwnProperty,o=Object.prototype.toString,T=e(97344),b=Object.prototype.propertyIsEnumerable,p=!b.call({toString:null},"toString"),l=b.call(function(){},"prototype"),t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=function(a){var s=a.constructor;return s&&s.prototype===a},r={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},n=function(){if(typeof window>"u")return!1;for(var a in window)try{if(!r["$"+a]&&k.call(window,a)&&null!==window[a]&&"object"==typeof window[a])try{i(window[a])}catch{return!0}}catch{return!0}return!1}();S=function(a){var s=null!==a&&"object"==typeof a,c="[object Function]"===o.call(a),h=T(a),u=s&&"[object String]"===o.call(a),y=[];if(!s&&!c&&!h)throw new TypeError("Object.keys called on a non-object");var d=l&&c;if(u&&a.length>0&&!k.call(a,0))for(var m=0;m<a.length;++m)y.push(String(m));if(h&&a.length>0)for(var g=0;g<a.length;++g)y.push(String(g));else for(var x in a)d&&"prototype"===x||!k.call(a,x)||y.push(String(x));if(p)for(var v=function(f){if(typeof window>"u"||!n)return i(f);try{return i(f)}catch{return!1}}(a),_=0;_<t.length;++_)v&&"constructor"===t[_]||!k.call(a,t[_])||y.push(t[_]);return y}}ie.exports=S},41820:function(ie,F,e){"use strict";var S=Array.prototype.slice,k=e(97344),o=Object.keys,T=o?function(p){return o(p)}:e(32764),b=Object.keys;T.shim=function(){if(Object.keys){var p=function(){var l=Object.keys(arguments);return l&&l.length===arguments.length}(1,2);p||(Object.keys=function(l){return k(l)?b(S.call(l)):b(l)})}else Object.keys=T;return Object.keys||T},ie.exports=T},97344:function(ie){"use strict";var F=Object.prototype.toString;ie.exports=function(e){var S=F.call(e),k="[object Arguments]"===S;return k||(k="[object Array]"!==S&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===F.call(e.callee)),k}},32868:function(ie){"use strict";function F(k,o){if("string"!=typeof k)return[k];var T=[k];"string"==typeof o||Array.isArray(o)?o={brackets:o}:o||(o={});var b=o.brackets?Array.isArray(o.brackets)?o.brackets:[o.brackets]:["{}","[]","()"],p=o.escape||"___",l=!!o.flat;b.forEach(function(i){var r=new RegExp(["\\",i[0],"[^\\",i[0],"\\",i[1],"]*\\",i[1]].join("")),n=[];function a(s,c,h){var u=T.push(s.slice(i[0].length,-i[1].length))-1;return n.push(u),p+u+p}T.forEach(function(s,c){for(var h,u=0;s!=h;)if(h=s,s=s.replace(r,a),u++>1e4)throw Error("References have circular dependency. Please, check them.");T[c]=s}),n=n.reverse(),T=T.map(function(s){return n.forEach(function(c){s=s.replace(new RegExp("(\\"+p+c+"\\"+p+")","g"),i[0]+"$1"+i[1])}),s})});var t=new RegExp("\\"+p+"([0-9]+)\\"+p);return l?T:function i(r,n,a){for(var s,c=[],h=0;s=t.exec(r);){if(h++>1e4)throw Error("Circular references in parenthesis");c.push(r.slice(0,s.index)),c.push(i(n[s[1]],n)),r=r.slice(s.index+s[0].length)}return c.push(r),c}(T[0],T)}function e(k,o){if(o&&o.flat){var T,b=o&&o.escape||"___",p=k[0];if(!p)return"";for(var l=new RegExp("\\"+b+"([0-9]+)\\"+b),t=0;p!=T;){if(t++>1e4)throw Error("Circular references in "+k);T=p,p=p.replace(l,i)}return p}return k.reduce(function r(n,a){return Array.isArray(a)&&(a=a.reduce(r,"")),n+a},"");function i(r,n){if(null==k[n])throw Error("Reference "+n+"is undefined");return k[n]}}function S(k,o){return Array.isArray(k)?e(k,o):F(k,o)}S.parse=F,S.stringify=e,ie.exports=S},51160:function(ie,F,e){"use strict";var S=e(55616);ie.exports=function(k){var o;return arguments.length>1&&(k=arguments),"string"==typeof k?k=k.split(/\s/).map(parseFloat):"number"==typeof k&&(k=[k]),k.length&&"number"==typeof k[0]?o=1===k.length?{width:k[0],height:k[0],x:0,y:0}:2===k.length?{width:k[0],height:k[1],x:0,y:0}:{x:k[0],y:k[1],width:k[2]-k[0]||0,height:k[3]-k[1]||0}:k&&((o={x:(k=S(k,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:k.top||0}).width=null==k.width?k.right?k.right-o.x:0:k.width,o.height=null==k.height?k.bottom?k.bottom-o.y:0:k.height),o}},21984:function(ie){ie.exports=function(k){var o=[];return k.replace(e,function(T,b,p){var i,l=b.toLowerCase();for(i=void 0,p=(i=p.match(S))?i.map(Number):[],"m"==l&&p.length>2&&(o.push([b].concat(p.splice(0,2))),l="l",b="m"==b?"l":"L");;){if(p.length==F[l])return p.unshift(b),o.push(p);if(p.length<F[l])throw new Error("malformed path data");o.push([b].concat(p.splice(0,F[l])))}}),o};var F={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/gi,S=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},65819:function(ie){ie.exports=function(F,e){e||(e=[0,""]),F=String(F);var S=parseFloat(F,10);return e[0]=S,e[1]=F.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},41984:function(ie,F,e){var S=e(4168);(function(){var k,o,T,b,p,l;typeof performance<"u"&&null!==performance&&performance.now?ie.exports=function(){return performance.now()}:null!=S&&S.hrtime?(ie.exports=function(){return(k()-p)/1e6},o=S.hrtime,b=(k=function(){var t;return 1e9*(t=o())[0]+t[1]})(),l=1e9*S.uptime(),p=b-l):Date.now?(ie.exports=function(){return Date.now()-T},T=Date.now()):(ie.exports=function(){return(new Date).getTime()-T},T=(new Date).getTime())}).call(this)},55616:function(ie){"use strict";ie.exports=function(S,k,o){var T,b,p={};if("string"==typeof k&&(k=e(k)),Array.isArray(k)){var l={};for(b=0;b<k.length;b++)l[k[b]]=!0;k=l}for(T in k)k[T]=e(k[T]);var t={};for(T in k){var i=k[T];if(Array.isArray(i))for(b=0;b<i.length;b++){var r=i[b];if(o&&(t[r]=!0),r in S){if(p[T]=S[r],o)for(var n=b;n<i.length;n++)t[i[n]]=!0;break}}else T in S&&(k[T]&&(p[T]=S[T]),o&&(t[T]=!0))}if(o)for(T in S)t[T]||(p[T]=S[T]);return p};var F={};function e(S){return F[S]?F[S]:("string"==typeof S&&(S=F[S]=S.split(/\s*,\s*|\s+/)),S)}},61456:function(ie){ie.exports=function(F,e,S,k){var o=F[0],T=F[1],b=!1;void 0===S&&(S=0),void 0===k&&(k=e.length);for(var p=k-S,l=0,t=p-1;l<p;t=l++){var i=e[l+S][0],r=e[l+S][1],a=e[t+S][1];r>T!=a>T&&o<(e[t+S][0]-i)*(T-r)/(a-r)+i&&(b=!b)}return b}},14756:function(ie,F,e){var S,k=e(7688),o=e(28648),T=e(72200),b=e(11403),p=e(82368),l=e(17792),t=!1,i=o();function r(n,a,s){var c=S.segments(n),h=S.segments(a),u=s(S.combine(c,h));return S.polygon(u)}S={buildLog:function(n){return!0===n?t=k():!1===n&&(t=!1),!1!==t&&t.list},epsilon:function(n){return i.epsilon(n)},segments:function(n){var a=T(!0,i,t);return n.regions.forEach(a.addRegion),{segments:a.calculate(n.inverted),inverted:n.inverted}},combine:function(n,a){return{combined:T(!1,i,t).calculate(n.segments,n.inverted,a.segments,a.inverted),inverted1:n.inverted,inverted2:a.inverted}},selectUnion:function(n){return{segments:p.union(n.combined,t),inverted:n.inverted1||n.inverted2}},selectIntersect:function(n){return{segments:p.intersect(n.combined,t),inverted:n.inverted1&&n.inverted2}},selectDifference:function(n){return{segments:p.difference(n.combined,t),inverted:n.inverted1&&!n.inverted2}},selectDifferenceRev:function(n){return{segments:p.differenceRev(n.combined,t),inverted:!n.inverted1&&n.inverted2}},selectXor:function(n){return{segments:p.xor(n.combined,t),inverted:n.inverted1!==n.inverted2}},polygon:function(n){return{regions:b(n.segments,i,t),inverted:n.inverted}},polygonFromGeoJSON:function(n){return l.toPolygon(S,n)},polygonToGeoJSON:function(n){return l.fromPolygon(S,i,n)},union:function(n,a){return r(n,a,S.selectUnion)},intersect:function(n,a){return r(n,a,S.selectIntersect)},difference:function(n,a){return r(n,a,S.selectDifference)},differenceRev:function(n,a){return r(n,a,S.selectDifferenceRev)},xor:function(n,a){return r(n,a,S.selectXor)}},"object"==typeof window&&(window.PolyBool=S),ie.exports=S},7688:function(ie){ie.exports=function(){var F,e=0,S=!1;function k(o,T){return F.list.push({type:o,data:T?JSON.parse(JSON.stringify(T)):void 0}),F}return F={list:[],segmentId:function(){return e++},checkIntersection:function(o,T){return k("check",{seg1:o,seg2:T})},segmentChop:function(o,T){return k("div_seg",{seg:o,pt:T}),k("chop",{seg:o,pt:T})},statusRemove:function(o){return k("pop_seg",{seg:o})},segmentUpdate:function(o){return k("seg_update",{seg:o})},segmentNew:function(o,T){return k("new_seg",{seg:o,primary:T})},segmentRemove:function(o){return k("rem_seg",{seg:o})},tempStatus:function(o,T,b){return k("temp_status",{seg:o,above:T,below:b})},rewind:function(o){return k("rewind",{seg:o})},status:function(o,T,b){return k("status",{seg:o,above:T,below:b})},vert:function(o){return o===S?F:(S=o,k("vert",{x:o}))},log:function(o){return"string"!=typeof o&&(o=JSON.stringify(o,!1,"  ")),k("log",{txt:o})},reset:function(){return k("reset")},selected:function(o){return k("selected",{segs:o})},chainStart:function(o){return k("chain_start",{seg:o})},chainRemoveHead:function(o,T){return k("chain_rem_head",{index:o,pt:T})},chainRemoveTail:function(o,T){return k("chain_rem_tail",{index:o,pt:T})},chainNew:function(o,T){return k("chain_new",{pt1:o,pt2:T})},chainMatch:function(o){return k("chain_match",{index:o})},chainClose:function(o){return k("chain_close",{index:o})},chainAddHead:function(o,T){return k("chain_add_head",{index:o,pt:T})},chainAddTail:function(o,T){return k("chain_add_tail",{index:o,pt:T})},chainConnect:function(o,T){return k("chain_con",{index1:o,index2:T})},chainReverse:function(o){return k("chain_rev",{index:o})},chainJoin:function(o,T){return k("chain_join",{index1:o,index2:T})},done:function(){return k("done")}}}},28648:function(ie){ie.exports=function(F){"number"!=typeof F&&(F=1e-10);var e={epsilon:function(S){return"number"==typeof S&&(F=S),F},pointAboveOrOnLine:function(S,k,o){var T=k[0],b=k[1];return(o[0]-T)*(S[1]-b)-(o[1]-b)*(S[0]-T)>=-F},pointBetween:function(S,k,o){var b=o[0]-k[0],l=o[1]-k[1],t=(S[0]-k[0])*b+(S[1]-k[1])*l;return!(t<F||t-(b*b+l*l)>-F)},pointsSameX:function(S,k){return Math.abs(S[0]-k[0])<F},pointsSameY:function(S,k){return Math.abs(S[1]-k[1])<F},pointsSame:function(S,k){return e.pointsSameX(S,k)&&e.pointsSameY(S,k)},pointsCompare:function(S,k){return e.pointsSameX(S,k)?e.pointsSameY(S,k)?0:S[1]<k[1]?-1:1:S[0]<k[0]?-1:1},pointsCollinear:function(S,k,o){return Math.abs((S[0]-k[0])*(k[1]-o[1])-(k[0]-o[0])*(S[1]-k[1]))<F},linesIntersect:function(S,k,o,T){var b=k[0]-S[0],p=k[1]-S[1],l=T[0]-o[0],t=T[1]-o[1],i=b*t-p*l;if(Math.abs(i)<F)return!1;var r=S[0]-o[0],n=S[1]-o[1],a=(l*n-t*r)/i,s=(b*n-p*r)/i,c={alongA:0,alongB:0,pt:[S[0]+a*b,S[1]+a*p]};return c.alongA=a<=-F?-2:a<F?-1:a-1<=-F?0:a-1<F?1:2,c.alongB=s<=-F?-2:s<F?-1:s-1<=-F?0:s-1<F?1:2,c},pointInsideRegion:function(S,k){for(var o=S[0],T=S[1],b=k[k.length-1][0],p=k[k.length-1][1],l=!1,t=0;t<k.length;t++){var i=k[t][0],r=k[t][1];r-T>F!=p-T>F&&(b-i)*(T-r)/(p-r)+i-o>F&&(l=!l),b=i,p=r}return l}};return e}},17792:function(ie){ie.exports={toPolygon:function(e,S){function k(b){if(b.length<=0)return e.segments({inverted:!1,regions:[]});function p(i){var r=i.slice(0,i.length-1);return e.segments({inverted:!1,regions:[r]})}for(var l=p(b[0]),t=1;t<b.length;t++)l=e.selectDifference(e.combine(l,p(b[t])));return l}if("Polygon"===S.type)return e.polygon(k(S.coordinates));if("MultiPolygon"===S.type){for(var o=e.segments({inverted:!1,regions:[]}),T=0;T<S.coordinates.length;T++)o=e.selectUnion(e.combine(o,k(S.coordinates[T])));return e.polygon(o)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,S,k){function o(s,c){return S.pointInsideRegion([.5*(s[0][0]+s[1][0]),.5*(s[0][1]+s[1][1])],c)}function T(s){return{region:s,children:[]}}k=e.polygon(e.segments(k));var b=T(null);function p(s,c){for(var h=0;h<s.children.length;h++)if(o(c,(y=s.children[h]).region))return void p(y,c);var u=T(c);for(h=0;h<s.children.length;h++){var y;o((y=s.children[h]).region,c)&&(u.children.push(y),s.children.splice(h,1),h--)}s.children.push(u)}for(var l=0;l<k.regions.length;l++){var t=k.regions[l];t.length<3||p(b,t)}function i(s,c){for(var h=0,u=s[s.length-1][0],y=s[s.length-1][1],d=[],m=0;m<s.length;m++){var g=s[m][0],x=s[m][1];d.push([g,x]),h+=x*u-g*y,u=g,y=x}return h<0!==c&&d.reverse(),d.push([d[0][0],d[0][1]]),d}var r=[];function n(s){var c=[i(s.region,!1)];r.push(c);for(var h=0;h<s.children.length;h++)c.push(a(s.children[h]))}function a(s){for(var c=0;c<s.children.length;c++)n(s.children[c]);return i(s.region,!0)}for(l=0;l<b.children.length;l++)n(b.children[l]);return r.length<=0?{type:"Polygon",coordinates:[]}:1==r.length?{type:"Polygon",coordinates:r[0]}:{type:"MultiPolygon",coordinates:r}}}},72200:function(ie,F,e){var S=e(48088);ie.exports=function(k,o,T){function b(n,a,s){return{id:T?T.segmentId():-1,start:n,end:a,myFill:{above:s.myFill.above,below:s.myFill.below},otherFill:null}}var p=S.create();function l(n,a){p.insertBefore(n,function(s){return c=n.isStart,u=a,y=s.isStart,m=s.other.pt,(0!==(g=o.pointsCompare(n.pt,d=s.pt))?g:o.pointsSame(u,m)?0:c!==y?c?1:-1:o.pointAboveOrOnLine(u,y?d:m,y?m:d)?1:-1)<0;var c,u,y,d,m,g})}function t(n,a){var c,u,s=(l(u=S.node({isStart:!0,pt:(c=n).start,seg:c,primary:a,other:null,status:null}),c.end),u);return function(c,h,u){var y=S.node({isStart:!1,pt:h.end,seg:h,primary:u,other:c,status:null});c.other=y,l(y,c.pt)}(s,n,a),s}function i(n,a){var c,h,s=b(a,n.seg.end,n.seg);return c=n,h=a,T&&T.segmentChop(c.seg,h),c.other.remove(),c.seg.end=h,c.other.pt=h,l(c.other,c.pt),t(s,n.primary)}function r(n,a){var s=S.create();function c(E){return s.findTransition(function(P){var L,O,z,V,R,U;return V=(L=E).seg.end,(o.pointsCollinear(z=L.seg.start,R=(O=P.ev).seg.start,U=O.seg.end)?o.pointsCollinear(V,R,U)||o.pointAboveOrOnLine(V,R,U)?1:-1:o.pointAboveOrOnLine(z,R,U)?1:-1)>0})}function h(E,P){var L=E.seg,O=P.seg,z=L.start,V=L.end,R=O.start,U=O.end;T&&T.checkIntersection(L,O);var Z=o.linesIntersect(z,V,R,U);if(!1===Z){if(!o.pointsCollinear(z,V,R)||o.pointsSame(z,U)||o.pointsSame(V,R))return!1;var N=o.pointsSame(z,R),G=o.pointsSame(V,U);if(N&&G)return P;var W=!N&&o.pointBetween(z,R,U),ae=!G&&o.pointBetween(V,R,U);if(N)return ae?i(P,V):i(E,U),P;W&&(G||(ae?i(P,V):i(E,U)),i(P,z))}else 0===Z.alongA&&(-1===Z.alongB?i(E,R):0===Z.alongB?i(E,Z.pt):1===Z.alongB&&i(E,U)),0===Z.alongB&&(-1===Z.alongA?i(P,z):0===Z.alongA?i(P,Z.pt):1===Z.alongA&&i(P,V));return!1}for(var u=[];!p.isEmpty();){var y=p.getHead();if(T&&T.vert(y.pt[0]),y.isStart){let E=function(){if(m){var P=h(y,m);if(P)return P}return!!g&&h(y,g)};T&&T.segmentNew(y.seg,y.primary);var d=c(y),m=d.before?d.before.ev:null,g=d.after?d.after.ev:null;T&&T.tempStatus(y.seg,!!m&&m.seg,!!g&&g.seg);var x,v,_=E();if(_&&(k?(v=null===y.seg.myFill.below||y.seg.myFill.above!==y.seg.myFill.below)&&(_.seg.myFill.above=!_.seg.myFill.above):_.seg.otherFill=y.seg.myFill,T&&T.segmentUpdate(_.seg),y.other.remove(),y.remove()),p.getHead()!==y){T&&T.rewind(y.seg);continue}k?(v=null===y.seg.myFill.below||y.seg.myFill.above!==y.seg.myFill.below,y.seg.myFill.below=g?g.seg.myFill.above:n,y.seg.myFill.above=v?!y.seg.myFill.below:y.seg.myFill.below):null===y.seg.otherFill&&(y.seg.otherFill={above:x=g?y.primary===g.primary?g.seg.otherFill.above:g.seg.myFill.above:y.primary?a:n,below:x}),T&&T.status(y.seg,!!m&&m.seg,!!g&&g.seg),y.other.status=d.insert(S.node({ev:y}))}else{var f=y.status;if(null===f)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(s.exists(f.prev)&&s.exists(f.next)&&h(f.prev.ev,f.next.ev),T&&T.statusRemove(f.ev.seg),f.remove(),!y.primary){var C=y.seg.myFill;y.seg.myFill=y.seg.otherFill,y.seg.otherFill=C}u.push(y.seg)}p.getHead().remove()}return T&&T.done(),u}return k?{addRegion:function(n){for(var a,s,c,h=n[n.length-1],u=0;u<n.length;u++){var y=o.pointsCompare(a=h,h=n[u]);0!==y&&t((s=y<0?a:h,c=y<0?h:a,{id:T?T.segmentId():-1,start:s,end:c,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(n){return r(n,!1)}}:{calculate:function(n,a,s,c){return n.forEach(function(h){t(b(h.start,h.end,h),!0)}),s.forEach(function(h){t(b(h.start,h.end,h),!1)}),r(a,c)}}}},48088:function(ie){ie.exports={create:function(){var F={root:{root:!0,next:null},exists:function(e){return null!==e&&e!==F.root},isEmpty:function(){return null===F.root.next},getHead:function(){return F.root.next},insertBefore:function(e,S){for(var k=F.root,o=F.root.next;null!==o;){if(S(o))return e.prev=o.prev,e.next=o,o.prev.next=e,void(o.prev=e);k=o,o=o.next}k.next=e,e.prev=k,e.next=null},findTransition:function(e){for(var S=F.root,k=F.root.next;null!==k&&!e(k);)S=k,k=k.next;return{before:S===F.root?null:S,after:k,insert:function(o){return o.prev=S,o.next=k,S.next=o,null!==k&&(k.prev=o),o}}}};return F},node:function(F){return F.prev=null,F.next=null,F.remove=function(){F.prev.next=F.next,F.next&&(F.next.prev=F.prev),F.prev=null,F.next=null},F}}},11403:function(ie){ie.exports=function(F,e,S){var k=[],o=[];return F.forEach(function(T){var b=T.start,p=T.end;if(e.pointsSame(b,p))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{S&&S.chainStart(T);for(var l={index:0,matches_head:!1,matches_pt1:!1},t={index:0,matches_head:!1,matches_pt1:!1},i=l,r=0;r<k.length;r++){var n=(u=k[r])[0],a=u[u.length-1];if(e.pointsSame(n,b)){if(f(r,!0,!0))break}else if(e.pointsSame(n,p)){if(f(r,!0,!1))break}else if(e.pointsSame(a,b)){if(f(r,!1,!0))break}else if(e.pointsSame(a,p)&&f(r,!1,!1))break}if(i===l)return k.push([b,p]),void(S&&S.chainNew(b,p));if(i===t){S&&S.chainMatch(l.index);var s=l.index,c=l.matches_pt1?p:b,h=l.matches_head,u=k[s],y=h?u[0]:u[u.length-1],d=h?u[1]:u[u.length-2],m=h?u[u.length-1]:u[0],g=h?u[u.length-2]:u[1];return e.pointsCollinear(d,y,c)&&(h?(S&&S.chainRemoveHead(l.index,c),u.shift()):(S&&S.chainRemoveTail(l.index,c),u.pop()),y=d),e.pointsSame(m,c)?(k.splice(s,1),e.pointsCollinear(g,m,y)&&(h?(S&&S.chainRemoveTail(l.index,y),u.pop()):(S&&S.chainRemoveHead(l.index,y),u.shift())),S&&S.chainClose(l.index),void o.push(u)):void(h?(S&&S.chainAddHead(l.index,c),u.unshift(c)):(S&&S.chainAddTail(l.index,c),u.push(c)))}var x=l.index,v=t.index;S&&S.chainConnect(x,v);var _=k[x].length<k[v].length;l.matches_head?t.matches_head?_?(C(x),w(x,v)):(C(v),w(v,x)):w(v,x):t.matches_head?w(x,v):_?(C(x),w(v,x)):(C(v),w(x,v))}function f(E,P,L){return i.index=E,i.matches_head=P,i.matches_pt1=L,i===l?(i=t,!1):(i=null,!0)}function C(E){S&&S.chainReverse(E),k[E].reverse()}function w(E,P){var L=k[E],O=k[P],z=L[L.length-1],V=L[L.length-2],R=O[0],U=O[1];e.pointsCollinear(V,z,R)&&(S&&S.chainRemoveTail(E,z),L.pop(),z=V),e.pointsCollinear(z,R,U)&&(S&&S.chainRemoveHead(P,R),O.shift()),S&&S.chainJoin(E,P),k[E]=L.concat(O),k.splice(P,1)}}),o}},82368:function(ie){function F(S,k,o){var T=[];return S.forEach(function(b){var p=(b.myFill.above?8:0)+(b.myFill.below?4:0)+(b.otherFill&&b.otherFill.above?2:0)+(b.otherFill&&b.otherFill.below?1:0);0!==k[p]&&T.push({id:o?o.segmentId():-1,start:b.start,end:b.end,myFill:{above:1===k[p],below:2===k[p]},otherFill:null})}),o&&o.selected(T),T}ie.exports={union:function(S,k){return F(S,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],k)},intersect:function(S,k){return F(S,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],k)},difference:function(S,k){return F(S,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],k)},differenceRev:function(S,k){return F(S,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],k)},xor:function(S,k){return F(S,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],k)}}},9696:function(ie,F,e){"use strict";var S=e(29936).Transform,k=e(55619);function o(){S.call(this,{readableObjectMode:!0})}function T(b,p,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name=this.constructor.name,this.message=b,p&&(this.code=p),l&&(this.statusCode=l)}(o.prototype=Object.create(S.prototype)).constructor=o,k(o.prototype),F.gS=function(b,p,l){for(var t=p,i=0;i<l.length;)if(b[t++]!==l[i++])return!1;return!0},F.wR=function(b,p){var l=[],t=0;if(p&&"hex"===p)for(;t<b.length;)l.push(parseInt(b.slice(t,t+2),16)),t+=2;else for(;t<b.length;t++)l.push(255&b.charCodeAt(t));return l},F.Bz=function(b,p){return b[p]|b[p+1]<<8},F.eW=function(b,p){return b[p+1]|b[p]<<8},F.st=function(b,p){return b[p]|b[p+1]<<8|b[p+2]<<16|16777216*b[p+3]},F.eI=function(b,p){return b[p+3]|b[p+2]<<8|b[p+1]<<16|16777216*b[p]},(T.prototype=Object.create(Error.prototype)).constructor=T},11688:function(ie){"use strict";function F(k,o){var T=new Error(k);return T.code=o,T}function e(k){try{return decodeURIComponent(escape(k))}catch{return k}}function S(k,o,T){this.input=k.subarray(o,T),this.start=o;var b=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\0"!==b&&"MM\0*"!==b)throw F("invalid TIFF signature","EBADDATA");this.big_endian="M"===b[0]}S.prototype.each=function(k){this.aborted=!1;var o=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:o}];this.ifds_to_read.length>0&&!this.aborted;){var T=this.ifds_to_read.shift();T.offset&&this.scan_ifd(T.id,T.offset,k)}},S.prototype.read_uint16=function(k){var o=this.input;if(k+2>o.length)throw F("unexpected EOF","EBADDATA");return this.big_endian?256*o[k]+o[k+1]:o[k]+256*o[k+1]},S.prototype.read_uint32=function(k){var o=this.input;if(k+4>o.length)throw F("unexpected EOF","EBADDATA");return this.big_endian?16777216*o[k]+65536*o[k+1]+256*o[k+2]+o[k+3]:o[k]+256*o[k+1]+65536*o[k+2]+16777216*o[k+3]},S.prototype.is_subifd_link=function(k,o){return 0===k&&34665===o||0===k&&34853===o||34665===k&&40965===o},S.prototype.exif_format_length=function(k){switch(k){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},S.prototype.exif_format_read=function(k,o){var T;switch(k){case 1:case 2:return this.input[o];case 6:return(T=this.input[o])|33554430*(128&T);case 3:return this.read_uint16(o);case 8:return(T=this.read_uint16(o))|131070*(32768&T);case 4:return this.read_uint32(o);case 9:return 0|this.read_uint32(o);default:return null}},S.prototype.scan_ifd=function(k,o,T){var b=this.read_uint16(o);o+=2;for(var p=0;p<b;p++){var l=this.read_uint16(o),t=this.read_uint16(o+2),i=this.read_uint32(o+4),r=this.exif_format_length(t),n=i*r,a=n<=4?o+8:this.read_uint32(o+8),s=!1;if(a+n>this.input.length)throw F("unexpected EOF","EBADDATA");for(var c=[],h=a,u=0;u<i;u++,h+=r){var y=this.exif_format_read(t,h);if(null===y){c=null;break}c.push(y)}if(Array.isArray(c)&&2===t&&(c=e(String.fromCharCode.apply(null,c)))&&"\0"===c[c.length-1]&&(c=c.slice(0,-1)),this.is_subifd_link(k,l)&&Array.isArray(c)&&Number.isInteger(c[0])&&c[0]>0&&(this.ifds_to_read.push({id:l,offset:c[0]}),s=!0),!1===T({is_big_endian:this.big_endian,ifd:k,tag:l,format:t,count:i,entry_offset:o+this.start,data_length:n,data_offset:a+this.start,value:c,is_subifd_link:s}))return void(this.aborted=!0);o+=12}0===k&&this.ifds_to_read.push({id:1,offset:this.read_uint32(o)})},ie.exports.ExifParser=S,ie.exports.get_orientation=function(k){var o=0;try{return new S(k,0,k.length).each(function(T){if(0===T.ifd&&274===T.tag&&Array.isArray(T.value))return o=T.value[0],!1}),o}catch{return-1}}},44600:function(ie,F,e){"use strict";var S=e(9696).eW,k=e(9696).eI;function o(i,r){if(i.length<4+r)return null;var n=k(i,r);return i.length<n+r||n<8?null:{boxtype:String.fromCharCode.apply(null,i.slice(r+4,r+8)),data:i.slice(r+8,r+n),end:r+n}}function T(i,r){for(var n=0;;){var a=o(i,n);if(!a)break;switch(a.boxtype){case"ispe":r.sizes.push({width:k(a.data,4),height:k(a.data,8)});break;case"irot":r.transforms.push({type:"irot",value:3&a.data[0]});break;case"imir":r.transforms.push({type:"imir",value:1&a.data[0]})}n=a.end}}function b(i,r,n){for(var a=0,s=0;s<n;s++)a=256*a+(i[r+s]||0);return a}function p(i,r){for(var n=i[4]>>4&15,a=15&i[4],s=i[5]>>4&15,c=S(i,6),h=8,u=0;u<c;u++){var y=S(i,h),d=S(i,h+=2),m=b(i,h+=2,s),g=S(i,h+=s);if(h+=2,0===d&&1===g){var x=b(i,h,n),v=b(i,h+n,a);r.item_loc[y]={length:v,offset:x+m}}h+=g*(n+a)}}function l(i,r){for(var n=S(i,4),a=6,s=0;s<n;s++){var c=o(i,a);if(!c)break;if("infe"===c.boxtype){for(var h=S(c.data,4),u="",y=8;y<c.data.length&&c.data[y];y++)u+=String.fromCharCode(c.data[y]);r.item_inf[u]=h}a=c.end}}function t(i,r){for(var n=0;;){var a=o(i,n);if(!a)break;"ipco"===a.boxtype&&T(a.data,r),n=a.end}}ie.exports.unbox=o,ie.exports.readSizeFromMeta=function(i){var r={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(y,d){for(var m=4;;){var g=o(y,m);if(!g)break;"iprp"===g.boxtype&&t(g.data,d),"iloc"===g.boxtype&&p(g.data,d),"iinf"===g.boxtype&&l(g.data,d),m=g.end}}(i,r),r.sizes.length){var n,a,s,c=(a=(n=r.sizes).reduce(function(y,d){return y.width>d.width||y.width===d.width&&y.height>d.height?y:d}),s=n.reduce(function(y,d){return y.height>d.height||y.height===d.height&&y.width>d.width?y:d}),a.width>s.height||a.width===s.height&&a.height>s.width?a:s),h=1;r.transforms.forEach(function(y){var d={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},m={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if("imir"===y.type&&(h=0===y.value?m[h]:d[h=d[h=m[h]]]),"irot"===y.type)for(var g=0;g<y.value;g++)h=d[h]});var u=null;return r.item_inf.Exif&&(u=r.item_loc[r.item_inf.Exif]),{width:c.width,height:c.height,orientation:r.transforms.length?h:null,variants:r.sizes,exif_location:u}}},ie.exports.getMimeType=function(i){var r=String.fromCharCode.apply(null,i.slice(0,4)),n={};n[r]=!0;for(var a=8;a<i.length;a+=4)n[String.fromCharCode.apply(null,i.slice(a,a+4))]=!0;if(n.mif1||n.msf1||n.miaf)return"avif"===r||"avis"===r||"avio"===r?{type:"avif",mime:"image/avif"}:"heic"===r||"heix"===r?{type:"heic",mime:"image/heic"}:"hevc"===r||"hevx"===r?{type:"heic",mime:"image/heic-sequence"}:n.avif||n.avis?{type:"avif",mime:"image/avif"}:n.heic||n.heix||n.hevc||n.hevx||n.heis?n.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},40528:function(ie,F,e){"use strict";var S=e(9696).wR,k=e(9696).gS,o=e(9696).eI,T=e(44600),b=e(11688),p=S("ftyp");ie.exports=function(l){if(k(l,4,p)){var t=T.unbox(l,0);if(t){var i=T.getMimeType(t.data);if(i){for(var r,n=t.end;;){var a=T.unbox(l,n);if(!a)break;if(n=a.end,"mdat"===a.boxtype)return;if("meta"===a.boxtype){r=a.data;break}}if(r){var s=T.readSizeFromMeta(r);if(s){var c={width:s.width,height:s.height,type:i.type,mime:i.mime,wUnits:"px",hUnits:"px"};if(s.variants.length>1&&(c.variants=s.variants),s.orientation&&(c.orientation=s.orientation),s.exif_location&&s.exif_location.offset+s.exif_location.length<=l.length){var h=o(l,s.exif_location.offset),u=l.slice(s.exif_location.offset+h+4,s.exif_location.offset+s.exif_location.length),y=b.get_orientation(u);y>0&&(c.orientation=y)}return c}}}}}}},38728:function(ie,F,e){"use strict";var S=e(9696).wR,k=e(9696).gS,o=e(9696).Bz,T=S("BM");ie.exports=function(b){if(!(b.length<26)&&k(b,0,T))return{width:o(b,18),height:o(b,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},5588:function(ie,F,e){"use strict";var S=e(9696).wR,k=e(9696).gS,o=e(9696).Bz,T=S("GIF87a"),b=S("GIF89a");ie.exports=function(p){if(!(p.length<10)&&(k(p,0,T)||k(p,0,b)))return{width:o(p,6),height:o(p,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},41924:function(ie,F,e){"use strict";var S=e(9696).Bz;ie.exports=function(k){var o=S(k,0),T=S(k,2),b=S(k,4);if(0===o&&1===T&&b){for(var p=[],l={width:0,height:0},t=0;t<b;t++){var i=k[6+16*t]||256,r=k[6+16*t+1]||256,n={width:i,height:r};p.push(n),(i>l.width||r>l.height)&&(l=n)}return{width:l.width,height:l.height,variants:p,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},87968:function(ie,F,e){"use strict";var S=e(9696).eW,k=e(9696).wR,o=e(9696).gS,T=e(11688),b=k("Exif\0\0");ie.exports=function(p){if(!(p.length<2)&&255===p[0]&&216===p[1]&&255===p[2])for(var l=2;;){for(;;){if(p.length-l<2)return;if(255===p[l++])break}for(var t,i,r=p[l++];255===r;)r=p[l++];if(208<=r&&r<=217||1===r)t=0;else{if(!(192<=r&&r<=254)||p.length-l<2)return;t=S(p,l)-2,l+=2}if(217===r||218===r)return;if(225===r&&t>=10&&o(p,l,b)&&(i=T.get_orientation(p.slice(l+6,l+t))),t>=5&&192<=r&&r<=207&&196!==r&&200!==r&&204!==r){if(p.length-l<t)return;var n={width:S(p,l+3),height:S(p,l+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return i>0&&(n.orientation=i),n}l+=t}}},37276:function(ie,F,e){"use strict";var S=e(9696).wR,k=e(9696).gS,o=e(9696).eI,T=S("\x89PNG\r\n\x1a\n"),b=S("IHDR");ie.exports=function(p){if(!(p.length<24)&&k(p,0,T)&&k(p,12,b))return{width:o(p,16),height:o(p,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},90328:function(ie,F,e){"use strict";var S=e(9696).wR,k=e(9696).gS,o=e(9696).eI,T=S("8BPS\0\x01");ie.exports=function(b){if(!(b.length<22)&&k(b,0,T))return{width:o(b,18),height:o(b,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},16024:function(ie){"use strict";function F(l){return"number"==typeof l&&isFinite(l)&&l>0}var e=/<[-_.:a-zA-Z0-9][^>]*>/,S=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,k=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,o=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,T=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,b=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function p(l){return b.test(l)?l.match(b)[0]:"px"}ie.exports=function(l){if(function(m){var g,x=0,v=m.length;for(239===m[0]&&187===m[1]&&191===m[2]&&(x=3);x<v&&(32===(g=m[x])||9===g||13===g||10===g);)x++;return x!==v&&60===m[x]}(l)){for(var t="",i=0;i<l.length;i++)t+=String.fromCharCode(l[i]);var r=(t.match(e)||[""])[0];if(S.test(r)){var n=(g=(m=r).match(k),x=m.match(o),v=m.match(T),{width:g&&(g[1]||g[2]),height:x&&(x[1]||x[2]),viewbox:v&&(v[1]||v[2])}),a=parseFloat(n.width),s=parseFloat(n.height);if(n.width&&n.height)return F(a)&&F(s)?{width:a,height:s,type:"svg",mime:"image/svg+xml",wUnits:p(n.width),hUnits:p(n.height)}:void 0;var c=(n.viewbox||"").split(" "),h={width:c[2],height:c[3]},u=parseFloat(h.width),y=parseFloat(h.height);if(F(u)&&F(y)&&p(h.width)===p(h.height)){var d=u/y;return n.width?F(a)?{width:a,height:a/d,type:"svg",mime:"image/svg+xml",wUnits:p(n.width),hUnits:p(n.width)}:void 0:n.height?F(s)?{width:s*d,height:s,type:"svg",mime:"image/svg+xml",wUnits:p(n.height),hUnits:p(n.height)}:void 0:{width:u,height:y,type:"svg",mime:"image/svg+xml",wUnits:p(h.width),hUnits:p(h.height)}}}}var m,g,x,v}},98792:function(ie,F,e){"use strict";var S=e(9696).wR,k=e(9696).gS,o=e(9696).Bz,T=e(9696).eW,b=e(9696).st,p=e(9696).eI,l=S("II*\0"),t=S("MM\0*");function i(a,s,c){return c?T(a,s):o(a,s)}function r(a,s,c){return c?p(a,s):b(a,s)}function n(a,s,c){var h=i(a,s+2,c);return 1!==r(a,s+4,c)||3!==h&&4!==h?null:3===h?i(a,s+8,c):r(a,s+8,c)}ie.exports=function(a){if(!(a.length<8)&&(k(a,0,l)||k(a,0,t))){var s=77===a[0],c=r(a,4,s)-8;if(!(c<0)){var h=c+8;if(!(a.length-h<2)){var u=12*i(a,h+0,s);if(!(u<=0||(h+=2,a.length-h<u))){var y,d,m,g;for(y=0;y<u;y+=12)256===(g=i(a,h+y,s))?d=n(a,h+y,s):257===g&&(m=n(a,h+y,s));return d&&m?{width:d,height:m,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},20704:function(ie,F,e){"use strict";var S=e(9696).wR,k=e(9696).gS,o=e(9696).Bz,T=e(9696).st,b=e(11688),p=S("RIFF"),l=S("WEBP");function t(n,a){if(157===n[a+3]&&1===n[a+4]&&42===n[a+5])return{width:16383&o(n,a+6),height:16383&o(n,a+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function i(n,a){if(47===n[a]){var s=T(n,a+1);return{width:1+(16383&s),height:1+(s>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function r(n,a){return{width:1+(n[a+6]<<16|n[a+5]<<8|n[a+4]),height:1+(n[a+9]<<a|n[a+8]<<8|n[a+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}ie.exports=function(n){if(!(n.length<16)&&(k(n,0,p)||k(n,8,l))){var a=12,s=null,c=0,h=T(n,4)+8;if(!(h>n.length)){for(;a+8<h;)if(0!==n[a]){var u=String.fromCharCode.apply(null,n.slice(a,a+4)),y=T(n,a+4);"VP8 "===u&&y>=10?s=s||t(n,a+8):"VP8L"===u&&y>=9?s=s||i(n,a+8):"VP8X"===u&&y>=10?s=s||r(n,a+8):"EXIF"===u&&(c=b.get_orientation(n.slice(a+8,a+8+y)),a=1/0),a+=8+y}else a++;if(s)return c>0&&(s.orientation=c),s}}}},87480:function(ie,F,e){"use strict";ie.exports={avif:e(40528),bmp:e(38728),gif:e(5588),ico:e(41924),jpeg:e(87968),png:e(37276),psd:e(90328),svg:e(16024),tiff:e(98792),webp:e(20704)}},19480:function(ie,F,e){"use strict";var S=e(87480);ie.exports=function(k){return function(o){for(var T=Object.keys(S),b=0;b<T.length;b++){var p=S[T[b]](o);if(p)return p}return null}(k)},ie.exports.parsers=S},4168:function(ie){var F,e,S=ie.exports={};function k(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function T(s){if(F===setTimeout)return setTimeout(s,0);if((F===k||!F)&&setTimeout)return F=setTimeout,setTimeout(s,0);try{return F(s,0)}catch{try{return F.call(null,s,0)}catch{return F.call(this,s,0)}}}!function(){try{F="function"==typeof setTimeout?setTimeout:k}catch{F=k}try{e="function"==typeof clearTimeout?clearTimeout:o}catch{e=o}}();var b,p=[],l=!1,t=-1;function i(){l&&b&&(l=!1,b.length?p=b.concat(p):t=-1,p.length&&r())}function r(){if(!l){var s=T(i);l=!0;for(var c=p.length;c;){for(b=p,p=[];++t<c;)b&&b[t].run();t=-1,c=p.length}b=null,l=!1,function(h){if(e===clearTimeout)return clearTimeout(h);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(h);try{return e(h)}catch{try{return e.call(null,h)}catch{return e.call(this,h)}}}(s)}}function n(s,c){this.fun=s,this.array=c}function a(){}S.nextTick=function(s){var c=new Array(arguments.length-1);if(arguments.length>1)for(var h=1;h<arguments.length;h++)c[h-1]=arguments[h];p.push(new n(s,c)),1!==p.length||l||T(r)},n.prototype.run=function(){this.fun.apply(null,this.array)},S.title="browser",S.browser=!0,S.env={},S.argv=[],S.version="",S.versions={},S.on=a,S.addListener=a,S.once=a,S.off=a,S.removeListener=a,S.removeAllListeners=a,S.emit=a,S.prependListener=a,S.prependOnceListener=a,S.listeners=function(s){return[]},S.binding=function(s){throw new Error("process.binding is not supported")},S.cwd=function(){return"/"},S.chdir=function(s){throw new Error("process.chdir is not supported")},S.umask=function(){return 0}},3951:function(ie,F,e){for(var S=e(41984),k=typeof window>"u"?e.g:window,o=["moz","webkit"],T="AnimationFrame",b=k["request"+T],p=k["cancel"+T]||k["cancelRequest"+T],l=0;!b&&l<o.length;l++)b=k[o[l]+"Request"+T],p=k[o[l]+"Cancel"+T]||k[o[l]+"CancelRequest"+T];if(!b||!p){var t=0,i=0,r=[];b=function(n){if(0===r.length){var a=S(),s=Math.max(0,16.666666666666668-(a-t));t=s+a,setTimeout(function(){var c=r.slice(0);r.length=0;for(var h=0;h<c.length;h++)if(!c[h].cancelled)try{c[h].callback(t)}catch(u){setTimeout(function(){throw u},0)}},Math.round(s))}return r.push({handle:++i,callback:n,cancelled:!1}),i},p=function(n){for(var a=0;a<r.length;a++)r[a].handle===n&&(r[a].cancelled=!0)}}ie.exports=function(n){return b.call(k,n)},ie.exports.cancel=function(){p.apply(k,arguments)},ie.exports.polyfill=function(n){n||(n=k),n.requestAnimationFrame=b,n.cancelAnimationFrame=p}},24544:function(ie,F,e){"use strict";var S=e(76752),k=e(72160),o=e(45223),T=e(55616),b=e(50896),p=e(47520),l=e(37816),t=l.float32,i=l.fract32;ie.exports=function(n,a){if("function"==typeof n?(a||(a={}),a.regl=n):a=n,a.length&&(a.positions=a),!(n=a.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var s,c,h,u,y,d,m=n._gl,g={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},x=[];return u=n.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),c=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),h=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),y=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),d=n.buffer({usage:"static",type:"float",data:r}),C(a),s=n({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor = color / 255.;\n\n\t\t\tvec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position = position + dxy;\n\n\t\t\tvec2 pos = (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos += pixelOffset / viewport.zw;\n\n\t\t\tgl_Position = vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = fragColor;\n\t\t\tgl_FragColor.a *= opacity;\n\t\t}\n\t\t",uniforms:{range:n.prop("range"),lineWidth:n.prop("lineWidth"),capSize:n.prop("capSize"),opacity:n.prop("opacity"),scale:n.prop("scale"),translate:n.prop("translate"),scaleFract:n.prop("scaleFract"),translateFract:n.prop("translateFract"),viewport:function(E,P){return[P.viewport.x,P.viewport.y,E.viewportWidth,E.viewportHeight]}},attributes:{color:{buffer:u,offset:function(E,P){return 4*P.offset},divisor:1},position:{buffer:c,offset:function(E,P){return 8*P.offset},divisor:1},positionFract:{buffer:h,offset:function(E,P){return 8*P.offset},divisor:1},error:{buffer:y,offset:function(E,P){return 16*P.offset},divisor:1},direction:{buffer:d,stride:24,offset:0},lineOffset:{buffer:d,stride:24,offset:8},capOffset:{buffer:d,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:n.prop("viewport")},viewport:n.prop("viewport"),stencil:!1,instances:n.prop("count"),count:r.length}),b(v,{update:C,draw:_,destroy:w,regl:n,gl:m,canvas:m.canvas,groups:x}),v;function v(E){E?C(E):null===E&&w(),_()}function _(E){if("number"==typeof E)return f(E);E&&!Array.isArray(E)&&(E=[E]),n._refresh(),x.forEach(function(P,L){P&&(E&&(P.draw=!!E[L]),P.draw?f(L):P.draw=!0)})}function f(E){"number"==typeof E&&(E=x[E]),null!=E&&E&&E.count&&E.color&&E.opacity&&E.positions&&E.positions.length>1&&(E.scaleRatio=[E.scale[0]*E.viewport.width,E.scale[1]*E.viewport.height],s(E),E.after&&E.after(E))}function C(E){if(E){null!=E.length?"number"==typeof E[0]&&(E=[{positions:E}]):Array.isArray(E)||(E=[E]);var P=0,L=0;if(v.groups=x=E.map(function(N,G){var W=x[G];return N&&("function"==typeof N?N={after:N}:"number"==typeof N[0]&&(N={positions:N}),N=T(N,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),W||(x[G]=W={id:G,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},N=b({},g,N)),o(W,N,[{lineWidth:function(ae){return.5*+ae},capSize:function(ae){return.5*+ae},opacity:parseFloat,errors:function(ae){return ae=p(ae),L+=ae.length,ae},positions:function(ae,re){return ae=p(ae,"float64"),re.count=Math.floor(ae.length/2),re.bounds=S(ae,2),re.offset=P,P+=re.count,ae}},{color:function(ae,re){var ne=re.count;if(ae||(ae="transparent"),!Array.isArray(ae)||"number"==typeof ae[0]){var Q=ae;ae=Array(ne);for(var $=0;$<ne;$++)ae[$]=Q}if(ae.length<ne)throw Error("Not enough colors");for(var X=new Uint8Array(4*ne),oe=0;oe<ne;oe++){var fe=k(ae[oe],"uint8");X.set(fe,4*oe)}return X},range:function(ae,re,ne){return ae||(ae=re.bounds),re.scale=[1/(ae[2]-ae[0]),1/(ae[3]-ae[1])],re.translate=[-ae[0],-ae[1]],re.scaleFract=i(re.scale),re.translateFract=i(re.translate),ae},viewport:function(ae){var re;return Array.isArray(ae)?re={x:ae[0],y:ae[1],width:ae[2]-ae[0],height:ae[3]-ae[1]}:ae?((re={x:ae.x||ae.left||0,y:ae.y||ae.top||0}).width=ae.right?ae.right-re.x:ae.w||ae.width||0,re.height=ae.bottom?ae.bottom-re.y:ae.h||ae.height||0):re={x:0,y:0,width:m.drawingBufferWidth,height:m.drawingBufferHeight},re}}])),W}),P||L){var O=x.reduce(function(N,G,W){return N+(G?G.count:0)},0),z=new Float64Array(2*O),V=new Uint8Array(4*O),R=new Float32Array(4*O);x.forEach(function(N,G){if(N){var W=N.positions,re=N.offset,Q=N.errors;N.count&&(V.set(N.color,4*re),R.set(Q,4*re),z.set(W,2*re))}});var U=t(z);c(U);var Z=i(z,U);h(Z),u(V),y(R)}}}function w(){c.destroy(),h.destroy(),u.destroy(),y.destroy(),d.destroy()}};var r=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},13472:function(ie,F,e){"use strict";var S=e(72160),k=e(76752),o=e(50896),T=e(55616),b=e(47520),p=e(28912),l=e(71152),t=e(37816),i=t.float32,r=t.fract32,n=e(60463),a=e(51160),s=e(10272);function c(h,u){if(!(this instanceof c))return new c(h,u);if("function"==typeof h?(u||(u={}),u.regl=h):u=h,u.length&&(u.positions=u),!(h=u.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=h._gl,this.regl=h,this.passes=[],this.shaders=c.shaders.has(h)?c.shaders.get(h):c.shaders.set(h,c.createShaders(h)).get(h),this.update(u)}ie.exports=c,c.dashMult=2,c.maxPatternLength=256,c.precisionThreshold=3e6,c.maxPoints=1e4,c.maxLines=2048,c.shaders=new n,c.createShaders=function(h){var u,y=h.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),d={primitive:"triangle strip",instances:h.prop("count"),count:4,offset:0,uniforms:{miterMode:function(g,x){return"round"===x.join?2:1},miterLimit:h.prop("miterLimit"),scale:h.prop("scale"),scaleFract:h.prop("scaleFract"),translateFract:h.prop("translateFract"),translate:h.prop("translate"),thickness:h.prop("thickness"),dashTexture:h.prop("dashTexture"),opacity:h.prop("opacity"),pixelRatio:h.context("pixelRatio"),id:h.prop("id"),dashLength:h.prop("dashLength"),viewport:function(g,x){return[x.viewport.x,x.viewport.y,g.viewportWidth,g.viewportHeight]},depth:h.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(g,x){return!x.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:h.prop("viewport")},viewport:h.prop("viewport")},m=h(o({vert:"\nprecision highp float;\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineOffset = lineTop * 2. - 1.;\n\n\tvec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent = normalize(diff * scale * viewport.zw);\n\tvec2 normal = vec2(-tangent.y, tangent.x);\n\n\tvec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n",frag:"\nprecision highp float;\n\nuniform float dashLength, pixelRatio, thickness, opacity, id;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha = 1.;\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n",attributes:{lineEnd:{buffer:y,divisor:0,stride:8,offset:0},lineTop:{buffer:y,divisor:0,stride:8,offset:4},aCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:h.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:h.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:h.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},d));try{u=h(o({cull:{enable:!0,face:"back"},vert:"\nprecision highp float;\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIFF = 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio = adjustedScale * viewport.zw;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineBot = 1. - lineTop;\n\n\tfragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n\tif (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\n\tvec2 prevDiff = aCoord - prevCoord;\n\tvec2 currDiff = bCoord - aCoord;\n\tvec2 nextDiff = nextCoord - bCoord;\n\n\tvec2 prevTangent = normalize(prevDiff * scaleRatio);\n\tvec2 currTangent = normalize(currDiff * scaleRatio);\n\tvec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal = vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection = normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff = abs(prevTangent - currTangent);\n\tvec2 nextTanDiff = abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {\n\t\tstartJoinDirection = currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {\n\t\tendJoinDirection = currNormal;\n\t}\n\tif (aCoord == bCoord) {\n\t\tendJoinDirection = startJoinDirection;\n\t\tcurrNormal = prevNormal;\n\t\tcurrTangent = prevTangent;\n\t}\n\n\ttangent = currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift = dot(currNormal, startJoinDirection);\n\tfloat endJoinShift = dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio = abs(1. / startJoinShift);\n\tfloat endMiterRatio = abs(1. / endJoinShift);\n\n\tvec2 startJoin = startJoinDirection * startMiterRatio;\n\tvec2 endJoin = endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin = sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin = -startTopJoin;\n\n\tendTopJoin = sign(endJoinShift) * endJoin * .5;\n\tendBotJoin = -endTopJoin;\n\n\tvec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\tbool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -= normalWidth * endTopJoin;\n\t\tbTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -= normalWidth * startBotJoin;\n\t\taBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition = (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition = (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition = (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition = (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter = step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n",frag:"\nprecision highp float;\n\nuniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha = 1., distToStart, distToEnd;\n\tfloat cutoff = thickness * .5;\n\n\t//bevel miter\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n",attributes:{lineEnd:{buffer:y,divisor:0,stride:8,offset:0},lineTop:{buffer:y,divisor:0,stride:8,offset:4},aColor:{buffer:h.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:h.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},d))}catch{u=m}return{fill:h({primitive:"triangle",elements:function(g,x){return x.triangles},offset:0,vert:"\nprecision highp float;\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n\tfloat depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n\tfragColor.a *= opacity;\n}\n",frag:"\nprecision highp float;\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor = fragColor;\n}\n",uniforms:{scale:h.prop("scale"),color:h.prop("fill"),scaleFract:h.prop("scaleFract"),translateFract:h.prop("translateFract"),translate:h.prop("translate"),opacity:h.prop("opacity"),pixelRatio:h.context("pixelRatio"),id:h.prop("id"),viewport:function(g,x){return[x.viewport.x,x.viewport.y,g.viewportWidth,g.viewportHeight]}},attributes:{position:{buffer:h.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:h.prop("positionFractBuffer"),stride:8,offset:8}},blend:d.blend,depth:{enable:!1},scissor:d.scissor,stencil:d.stencil,viewport:d.viewport}),rect:m,miter:u}},c.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},c.prototype.render=function(){for(var h,u=[],y=arguments.length;y--;)u[y]=arguments[y];u.length&&(h=this).update.apply(h,u),this.draw()},c.prototype.draw=function(){for(var h=this,u=[],y=arguments.length;y--;)u[y]=arguments[y];return(u.length?u:this.passes).forEach(function(d,m){var g;if(d&&Array.isArray(d))return(g=h).draw.apply(g,d);"number"==typeof d&&(d=h.passes[d]),d&&d.count>1&&d.opacity&&(h.regl._refresh(),d.fill&&d.triangles&&d.triangles.length>2&&h.shaders.fill(d),d.thickness&&(d.scale[0]*d.viewport.width>c.precisionThreshold||d.scale[1]*d.viewport.height>c.precisionThreshold||"rect"===d.join||!d.join&&(d.thickness<=2||d.count>=c.maxPoints)?h.shaders.rect(d):h.shaders.miter(d)))}),this},c.prototype.update=function(h){var u=this;if(h){null!=h.length?"number"==typeof h[0]&&(h=[{positions:h}]):Array.isArray(h)||(h=[h]);var y=this.regl,d=this.gl;if(h.forEach(function(_,f){var C=u.passes[f];if(void 0!==_)if(null!==_){if("number"==typeof _[0]&&(_={positions:_}),_=T(_,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),C||(u.passes[f]=C={id:f,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:y.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:y.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:y.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:y.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},_=o({},c.defaults,_)),null!=_.thickness&&(C.thickness=parseFloat(_.thickness)),null!=_.opacity&&(C.opacity=parseFloat(_.opacity)),null!=_.miterLimit&&(C.miterLimit=parseFloat(_.miterLimit)),null!=_.overlay&&(C.overlay=!!_.overlay,f<c.maxLines&&(C.depth=2*(c.maxLines-1-f%c.maxLines)/c.maxLines-1)),null!=_.join&&(C.join=_.join),null!=_.hole&&(C.hole=_.hole),null!=_.fill&&(C.fill=_.fill?S(_.fill,"uint8"):null),null!=_.viewport&&(C.viewport=a(_.viewport)),C.viewport||(C.viewport=a([d.drawingBufferWidth,d.drawingBufferHeight])),null!=_.close&&(C.close=_.close),null===_.positions&&(_.positions=[]),_.positions){var w,E;if(_.positions.x&&_.positions.y){var P=_.positions.x,L=_.positions.y;E=C.count=Math.max(P.length,L.length),w=new Float64Array(2*E);for(var O=0;O<E;O++)w[2*O]=P[O],w[2*O+1]=L[O]}else w=b(_.positions,"float64"),E=C.count=Math.floor(w.length/2);var z=C.bounds=k(w,2);if(C.fill){for(var V=[],R={},U=0,Z=0,N=0,G=C.count;Z<G;Z++){var W=w[2*Z],ae=w[2*Z+1];isNaN(W)||isNaN(ae)||null==W||null==ae?(W=w[2*U],ae=w[2*U+1],R[Z]=U):U=Z,V[N++]=W,V[N++]=ae}if(_.splitNull){C.count-1 in R||(R[C.count]=C.count-1);var re=Object.keys(R).map(Number).sort(function(St,Tt){return St-Tt}),ne=[],Q=0,$=null!=C.hole?C.hole[0]:null;if(null!=$){var X=s(re,function(St){return St>=$});(re=re.slice(0,X)).push($)}for(var oe=function(St){var Tt=V.slice(2*Q,2*re[St]).concat($?V.slice(2*$):[]),lt=(C.hole||[]).map(function(Rt){return Rt-$+(re[St]-Q)}),ot=p(Tt,lt);ot=ot.map(function(Rt){return Rt+Q+(Rt+Q<re[St]?0:$-re[St])}),ne.push.apply(ne,ot),Q=re[St]+1},fe=0;fe<re.length;fe++)oe(fe);for(var ue=0,ge=ne.length;ue<ge;ue++)null!=R[ne[ue]]&&(ne[ue]=R[ne[ue]]);C.triangles=ne}else{for(var we=p(V,C.hole||[]),Te=0,xe=we.length;Te<xe;Te++)null!=R[we[Te]]&&(we[Te]=R[we[Te]]);C.triangles=we}}var ye=new Float64Array(w);l(ye,2,z);var _e=new Float64Array(2*E+6);C.close?w[0]===w[2*E-2]&&w[1]===w[2*E-1]?(_e[0]=ye[2*E-4],_e[1]=ye[2*E-3]):(_e[0]=ye[2*E-2],_e[1]=ye[2*E-1]):(_e[0]=ye[0],_e[1]=ye[1]),_e.set(ye,2),C.close?w[0]===w[2*E-2]&&w[1]===w[2*E-1]?(_e[2*E+2]=ye[2],_e[2*E+3]=ye[3],C.count-=1):(_e[2*E+2]=ye[0],_e[2*E+3]=ye[1],_e[2*E+4]=ye[2],_e[2*E+5]=ye[3]):(_e[2*E+2]=ye[2*E-2],_e[2*E+3]=ye[2*E-1],_e[2*E+4]=ye[2*E-2],_e[2*E+5]=ye[2*E-1]);var Ie=i(_e);C.positionBuffer(Ie);var De=r(_e,Ie);C.positionFractBuffer(De)}if(_.range?C.range=_.range:C.range||(C.range=C.bounds),(_.range||_.positions)&&C.count){var be=C.bounds,me=C.range[2]-C.range[0],Pe=C.range[3]-C.range[1];C.scale=[(be[2]-be[0])/me,(be[3]-be[1])/Pe],C.translate=[-C.range[0]/me+be[0]/me||0,-C.range[1]/Pe+be[1]/Pe||0],C.scaleFract=r(C.scale),C.translateFract=r(C.translate)}if(_.dashes){var Ae,Ce=0;if(!_.dashes||_.dashes.length<2)Ce=1,Ae=new Uint8Array([255,255,255,255,255,255,255,255]);else{Ce=0;for(var Oe=0;Oe<_.dashes.length;++Oe)Ce+=_.dashes[Oe];Ae=new Uint8Array(Ce*c.dashMult);for(var Ne=0,je=255,ve=0;ve<2;ve++)for(var Me=0;Me<_.dashes.length;++Me){for(var Le=0,Ue=_.dashes[Me]*c.dashMult*.5;Le<Ue;++Le)Ae[Ne++]=je;je^=255}}C.dashLength=Ce,C.dashTexture({channels:1,data:Ae,width:Ae.length,height:1,mag:"linear",min:"linear"},0,0)}if(_.color){var ze=C.count,qe=_.color;qe||(qe="transparent");var Ke=new Uint8Array(4*ze+4);if(Array.isArray(qe)&&"number"!=typeof qe[0]){for(var it=0;it<ze;it++){var ft=S(qe[it],"uint8");Ke.set(ft,4*it)}Ke.set(S(qe[0],"uint8"),4*ze)}else for(var dt=S(qe,"uint8"),kt=0;kt<ze+1;kt++)Ke.set(dt,4*kt);C.colorBuffer({usage:"dynamic",type:"uint8",data:Ke})}}else u.passes[f]=null}),h.length<this.passes.length){for(var m=h.length;m<this.passes.length;m++){var g=this.passes[m];g&&(g.colorBuffer.destroy(),g.positionBuffer.destroy(),g.dashTexture.destroy())}this.passes.length=h.length}for(var x=[],v=0;v<this.passes.length;v++)null!==this.passes[v]&&x.push(this.passes[v]);return this.passes=x,this}},c.prototype.destroy=function(){return this.passes.forEach(function(h){h.colorBuffer.destroy(),h.positionBuffer.destroy(),h.dashTexture.destroy()}),this.passes.length=0,this}},38540:function(ie,F,e){"use strict";function S(m,g){return function(x){if(Array.isArray(x))return x}(m)||function(x,v){var _=null==x?null:typeof Symbol<"u"&&x[Symbol.iterator]||x["@@iterator"];if(null!=_){var f,C,w,E,P=[],L=!0,O=!1;try{if(w=(_=_.call(x)).next,0===v){if(Object(_)!==_)return;L=!1}else for(;!(L=(f=w.call(_)).done)&&(P.push(f.value),P.length!==v);L=!0);}catch(z){O=!0,C=z}finally{try{if(!L&&null!=_.return&&(E=_.return(),Object(E)!==E))return}finally{if(O)throw C}}return P}}(m,g)||k(m,g)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(m,g){if(m){if("string"==typeof m)return o(m,g);var x=Object.prototype.toString.call(m).slice(8,-1);return"Object"===x&&m.constructor&&(x=m.constructor.name),"Map"===x||"Set"===x?Array.from(m):"Arguments"===x||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?o(m,g):void 0}}function o(m,g){(null==g||g>m.length)&&(g=m.length);for(var x=0,v=new Array(g);x<g;x++)v[x]=m[x];return v}var T=e(72160),b=e(76752),p=e(3808),l=e(3108),t=e(50896),i=e(26444),r=e(55616),n=e(45223),a=e(47520),s=e(96604),c=e(37816),h=e(51160),u=y;function y(m,g){var x=this;if(!(this instanceof y))return new y(m,g);"function"==typeof m?(g||(g={}),g.regl=m):(g=m,m=null),g&&g.length&&(g.positions=g);var v,_=(m=g.regl)._gl,f=[];this.tooManyColors=s,v=m.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),t(this,{regl:m,gl:_,groups:[],markerCache:[null],markerTextures:[null],palette:f,paletteIds:{},paletteTexture:v,maxColors:255,maxSize:100,canvas:_.canvas}),this.update(g);var C={uniforms:{constPointSize:!!g.constPointSize,opacity:m.prop("opacity"),paletteSize:function(P,L){return[x.tooManyColors?0:255,v.height]},pixelRatio:m.context("pixelRatio"),scale:m.prop("scale"),scaleFract:m.prop("scaleFract"),translate:m.prop("translate"),translateFract:m.prop("translateFract"),markerTexture:m.prop("markerTexture"),paletteTexture:v},attributes:{x:function(P,L){return L.xAttr||{buffer:L.positionBuffer,stride:8,offset:0}},y:function(P,L){return L.yAttr||{buffer:L.positionBuffer,stride:8,offset:4}},xFract:function(P,L){return L.xAttr?{constant:[0,0]}:{buffer:L.positionFractBuffer,stride:8,offset:0}},yFract:function(P,L){return L.yAttr?{constant:[0,0]}:{buffer:L.positionFractBuffer,stride:8,offset:4}},size:function(P,L){return L.size.length?{buffer:L.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*L.size/x.maxSize)]}},borderSize:function(P,L){return L.borderSize.length?{buffer:L.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*L.borderSize/x.maxSize)]}},colorId:function(P,L){return L.color.length?{buffer:L.colorBuffer,stride:x.tooManyColors?8:4,offset:0}:{constant:x.tooManyColors?f.slice(4*L.color,4*L.color+4):[L.color]}},borderColorId:function(P,L){return L.borderColor.length?{buffer:L.colorBuffer,stride:x.tooManyColors?8:4,offset:x.tooManyColors?4:2}:{constant:x.tooManyColors?f.slice(4*L.borderColor,4*L.borderColor+4):[L.borderColor]}},isActive:function(P,L){return!0===L.activation?{constant:[1]}:L.activation?L.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:m.prop("viewport")},viewport:m.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:m.prop("elements"),count:m.prop("count"),offset:m.prop("offset"),primitive:"points"},w=t({},C);w.frag=i(["precision highp float;\n#define GLSLIFY 1\n\nuniform float opacity;\nuniform sampler2D markerTexture;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]),w.vert=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\n// `invariant` effectively turns off optimizations for the position.\n// We need this because -fast-math on M1 Macs is re-ordering\n// floating point operations in a way that causes floating point\n// precision limits to put points in the wrong locations.\ninvariant gl_Position;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pointSizeScale;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}\n"]),this.drawMarker=m(w);var E=t({},C);E.frag=i(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nuniform float opacity;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius > 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]),E.vert=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\n// `invariant` effectively turns off optimizations for the position.\n// We need this because -fast-math on M1 Macs is re-ordering\n// floating point operations in a way that causes floating point\n// precision limits to put points in the wrong locations.\ninvariant gl_Position;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 paletteSize, scale, scaleFract, translate, translateFract;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pointSizeScale;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),s&&(E.frag=E.frag.replace("smoothstep","smoothStep"),w.frag=w.frag.replace("smoothstep","smoothStep")),this.drawCircle=m(E)}y.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},y.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},y.prototype.draw=function(){for(var m=this,g=arguments.length,x=new Array(g),v=0;v<g;v++)x[v]=arguments[v];var _=this.groups;if(1===x.length&&Array.isArray(x[0])&&(null===x[0][0]||Array.isArray(x[0][0]))&&(x=x[0]),this.regl._refresh(),x.length)for(var f=0;f<x.length;f++)this.drawItem(f,x[f]);else _.forEach(function(C,w){m.drawItem(w)});return this},y.prototype.drawItem=function(m,g){var x,v=this.groups,_=v[m];if("number"==typeof g&&(m=g,_=v[g],g=null),_&&_.count&&_.opacity){_.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,_,g));for(var f=[],C=1;C<_.activation.length;C++)_.activation[C]&&(!0===_.activation[C]||_.activation[C].data.length)&&f.push.apply(f,function(w){if(Array.isArray(w))return o(w)}(x=this.getMarkerDrawOptions(C,_,g))||function(w){if(typeof Symbol<"u"&&null!=w[Symbol.iterator]||null!=w["@@iterator"])return Array.from(w)}(x)||k(x)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());f.length&&this.drawMarker(f)}},y.prototype.getMarkerDrawOptions=function(m,g,x){var v=g.range,_=g.tree,f=g.viewport,C=g.activation,w=g.selectionBuffer,E=g.count;if(!_)return x?[t({},g,{markerTexture:this.markerTextures[m],activation:C[m],count:x.length,elements:x,offset:0})]:[t({},g,{markerTexture:this.markerTextures[m],activation:C[m],offset:0})];var P=[],L=_.range(v,{lod:!0,px:[(v[2]-v[0])/f.width,(v[3]-v[1])/f.height]});if(x){for(var O=C[m].data,z=new Uint8Array(E),V=0;V<x.length;V++){var R=x[V];z[R]=O?O[R]:1}w.subdata(z)}for(var U=L.length;U--;){var Z=S(L[U],2),N=Z[0];P.push(t({},g,{markerTexture:this.markerTextures[m],activation:x?w:C[m],offset:N,count:Z[1]-N}))}return P},y.prototype.update=function(){for(var m=this,g=arguments.length,x=new Array(g),v=0;v<g;v++)x[v]=arguments[v];if(x.length){1===x.length&&Array.isArray(x[0])&&(x=x[0]);var _=this.groups,f=this.gl,C=this.regl,w=this.maxSize,E=this.maxColors,P=this.palette;this.groups=_=x.map(function(L,O){var z=_[O];if(void 0===L)return z;null===L?L={positions:null}:"function"==typeof L?L={ondraw:L}:"number"==typeof L[0]&&(L={positions:L}),null===(L=r(L,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions&&(L.positions=[]),null!=L.tooManyColors&&(m.tooManyColors=L.tooManyColors),z||(_[O]=z={id:O,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:C.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:C.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:C.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:C.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:C.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},L=t({},y.defaults,L)),L.positions&&!("marker"in L)&&(L.marker=z.marker,delete z.marker),L.marker&&!("positions"in L)&&(L.positions=z.positions,delete z.positions);var V=0,R=0;if(n(z,L,[{snap:!0,size:function(xe,ye){return null==xe&&(xe=y.defaults.size),V+=xe&&xe.length?1:0,xe},borderSize:function(xe,ye){return null==xe&&(xe=y.defaults.borderSize),V+=xe&&xe.length?1:0,xe},opacity:parseFloat,color:function(xe,ye){return null==xe&&(xe=y.defaults.color),xe=m.updateColor(xe),R++,xe},borderColor:function(xe,ye){return null==xe&&(xe=y.defaults.borderColor),xe=m.updateColor(xe),R++,xe},bounds:function(xe,ye,_e){return"range"in _e||(_e.range=null),xe},positions:function(xe,ye,_e){var Ie=ye.snap,De=ye.positionBuffer,be=ye.positionFractBuffer,he=ye.selectionBuffer;if(xe.x||xe.y)return ye.xAttr=xe.x.length?{buffer:C.buffer(xe.x),offset:0,stride:4,count:xe.x.length}:{buffer:xe.x.buffer,offset:4*xe.x.offset||0,stride:4*(xe.x.stride||1),count:xe.x.count},ye.yAttr=xe.y.length?{buffer:C.buffer(xe.y),offset:0,stride:4,count:xe.y.length}:{buffer:xe.y.buffer,offset:4*xe.y.offset||0,stride:4*(xe.y.stride||1),count:xe.y.count},ye.count=Math.max(ye.xAttr.count,ye.yAttr.count),xe;xe=a(xe,"float64");var ce=ye.count=Math.floor(xe.length/2),me=ye.bounds=ce?b(xe,2):null;if(_e.range||ye.range||(delete ye.range,_e.range=me),_e.marker||ye.marker||(delete ye.marker,_e.marker=null),Ie&&(!0===Ie||ce>Ie)?ye.tree=l(xe,{bounds:me}):Ie&&Ie.length&&(ye.tree=Ie),ye.tree){var Pe={primitive:"points",usage:"static",data:ye.tree,type:"uint32"};ye.elements?ye.elements(Pe):ye.elements=C.elements(Pe)}var Ae=c.float32(xe);return De({data:Ae,usage:"dynamic"}),be({data:c.fract32(xe,Ae),usage:"dynamic"}),he({data:new Uint8Array(ce),type:"uint8",usage:"stream"}),xe}},{marker:function(xe,ye,_e){var Ie=ye.activation;if(Ie.forEach(function(Ae){return Ae&&Ae.destroy&&Ae.destroy()}),Ie.length=0,xe&&"number"!=typeof xe[0]){for(var De=[],be=0,he=Math.min(xe.length,ye.count);be<he;be++){var ce=m.addMarker(xe[be]);De[ce]||(De[ce]=new Uint8Array(ye.count)),De[ce][be]=1}for(var me=0;me<De.length;me++)if(De[me]){var Pe={data:De[me],type:"uint8",usage:"static"};Ie[me]?Ie[me](Pe):Ie[me]=C.buffer(Pe),Ie[me].data=De[me]}}else Ie[m.addMarker(xe)]=!0;return xe},range:function(xe,ye,_e){var Ie=ye.bounds;if(Ie)return xe||(xe=Ie),ye.scale=[1/(xe[2]-xe[0]),1/(xe[3]-xe[1])],ye.translate=[-xe[0],-xe[1]],ye.scaleFract=c.fract(ye.scale),ye.translateFract=c.fract(ye.translate),xe},viewport:function(xe){return h(xe||[f.drawingBufferWidth,f.drawingBufferHeight])}}]),V){var Z=z.count,N=z.size,G=z.borderSize,W=z.sizeBuffer,ae=new Uint8Array(2*Z);if(N.length||G.length)for(var re=0;re<Z;re++)ae[2*re]=Math.round(255*(null==N[re]?N:N[re])/w),ae[2*re+1]=Math.round(255*(null==G[re]?G:G[re])/w);W({data:ae,usage:"dynamic"})}if(R){var ne,$=z.count,X=z.color,oe=z.borderColor,fe=z.colorBuffer;if(m.tooManyColors){if(X.length||oe.length){ne=new Uint8Array(8*$);for(var ue=0;ue<$;ue++){var ge=X[ue];ne[8*ue]=P[4*ge],ne[8*ue+1]=P[4*ge+1],ne[8*ue+2]=P[4*ge+2],ne[8*ue+3]=P[4*ge+3];var we=oe[ue];ne[8*ue+4]=P[4*we],ne[8*ue+5]=P[4*we+1],ne[8*ue+6]=P[4*we+2],ne[8*ue+7]=P[4*we+3]}}}else if(X.length||oe.length){ne=new Uint8Array(4*$+2);for(var Te=0;Te<$;Te++)null!=X[Te]&&(ne[4*Te]=X[Te]%E,ne[4*Te+1]=Math.floor(X[Te]/E)),null!=oe[Te]&&(ne[4*Te+2]=oe[Te]%E,ne[4*Te+3]=Math.floor(oe[Te]/E))}fe({data:ne||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return z})}},y.prototype.addMarker=function(m){var g,x=this.markerTextures,v=this.regl,_=this.markerCache,f=null==m?0:_.indexOf(m);if(f>=0)return f;if(m instanceof Uint8Array||m instanceof Uint8ClampedArray)g=m;else{g=new Uint8Array(m.length);for(var C=0,w=m.length;C<w;C++)g[C]=255*m[C]}var E=Math.floor(Math.sqrt(g.length));return f=x.length,_.push(m),x.push(v.texture({channels:1,data:g,radius:E,mag:"linear",min:"linear"})),f},y.prototype.updateColor=function(m){var g=this.paletteIds,x=this.palette,v=this.maxColors;Array.isArray(m)||(m=[m]);var _=[];if("number"==typeof m[0]){var f=[];if(Array.isArray(m))for(var C=0;C<m.length;C+=4)f.push(m.slice(C,C+4));else for(var w=0;w<m.length;w+=4)f.push(m.subarray(w,w+4));m=f}for(var E=0;E<m.length;E++){var P=m[E];P=T(P,"uint8");var L=p(P,!1);if(null==g[L]){var O=x.length;g[L]=Math.floor(O/4),x[O]=P[0],x[O+1]=P[1],x[O+2]=P[2],x[O+3]=P[3]}_[E]=g[L]}return!this.tooManyColors&&x.length>4*v&&(this.tooManyColors=!0),this.updatePalette(x),1===_.length?_[0]:_},y.prototype.updatePalette=function(m){if(!this.tooManyColors){var g=this.maxColors,x=this.paletteTexture,v=Math.ceil(.25*m.length/g);if(v>1)for(var _=.25*(m=m.slice()).length%g;_<v*g;_++)m.push(0,0,0,0);x.height<v&&x.resize(g,v),x.subimage({width:Math.min(.25*m.length,g),height:v,data:m},0,0)}},y.prototype.destroy=function(){return this.groups.forEach(function(m){m.sizeBuffer.destroy(),m.positionBuffer.destroy(),m.positionFractBuffer.destroy(),m.colorBuffer.destroy(),m.activation.forEach(function(g){return g&&g.destroy&&g.destroy()}),m.selectionBuffer.destroy(),m.elements&&m.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(m){return m&&m.destroy&&m.destroy()}),this};var d=e(50896);ie.exports=function(m,g){var x=new u(m,g),v=x.render.bind(x);return d(v,{render:v,update:x.update.bind(x),draw:x.draw.bind(x),destroy:x.destroy.bind(x),regl:x.regl,gl:x.gl,canvas:x.gl.canvas,groups:x.groups,markers:x.markerCache,palette:x.palette}),v}},55795:function(ie,F,e){"use strict";var S=e(38540),k=e(55616),o=e(76752),T=e(3951),b=e(67752),p=e(51160),l=e(47520);function t(a,s){if(!(this instanceof t))return new t(a,s);this.traces=[],this.passes={},this.regl=a,this.scatter=S(a),this.canvas=this.scatter.canvas}function i(a,s,c){return(null!=a.id?a.id:a)<<16|(255&s)<<8|255&c}function r(a,s,c){var h,u,y,d,m=a[s],g=a[c];return m.length>2?(h=m[1],u=m[3]):m.length?(h=m[0],u=m[1]):(h=m.y,u=m.y+m.height),g.length>2?(y=g[0],d=g[2]):g.length?(y=g[0],d=g[1]):(y=g.x,d=g.x+g.width),[y,h,d,u]}function n(a){if("number"==typeof a)return[a,a,a,a];if(2===a.length)return[a[0],a[1],a[0],a[1]];var s=p(a);return[s.x,s.y,s.x+s.width,s.y+s.height]}ie.exports=t,t.prototype.render=function(){for(var a,s=this,c=[],h=arguments.length;h--;)c[h]=arguments[h];return c.length&&(a=this).update.apply(a,c),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?null==this.planned&&(this.planned=T(function(){s.draw(),s.dirty=!0,s.planned=null})):(this.draw(),this.dirty=!0,T(function(){s.dirty=!1})),this)},t.prototype.update=function(){for(var a,s=[],c=arguments.length;c--;)s[c]=arguments[c];if(s.length){for(var h=0;h<s.length;h++)this.updateItem(h,s[h]);this.traces=this.traces.filter(Boolean);for(var u=[],y=0,d=0;d<this.traces.length;d++){for(var m=this.traces[d],g=this.traces[d].passes,x=0;x<g.length;x++)u.push(this.passes[g[x]]);m.passOffset=y,y+=m.passes.length}return(a=this.scatter).update.apply(a,u),this}},t.prototype.updateItem=function(a,s){var c=this.regl;if(null===s)return this.traces[a]=null,this;if(!s)return this;var h,u=k(s,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),y=this.traces[a]||(this.traces[a]={id:a,buffer:c.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:p([c._gl.drawingBufferWidth,c._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(null!=u.color&&(y.color=u.color),null!=u.size&&(y.size=u.size),null!=u.marker&&(y.marker=u.marker),null!=u.borderColor&&(y.borderColor=u.borderColor),null!=u.borderSize&&(y.borderSize=u.borderSize),null!=u.opacity&&(y.opacity=u.opacity),u.viewport&&(y.viewport=p(u.viewport)),null!=u.diagonal&&(y.diagonal=u.diagonal),null!=u.upper&&(y.upper=u.upper),null!=u.lower&&(y.lower=u.lower),u.data){y.buffer(l(u.data)),y.columns=u.data.length,y.count=u.data[0].length,y.bounds=[];for(var d=0;d<y.columns;d++)y.bounds[d]=o(u.data[d],1)}u.range&&(y.range=u.range,h=y.range&&"number"!=typeof y.range[0]),u.domain&&(y.domain=u.domain);var m=!1;null!=u.padding&&(Array.isArray(u.padding)&&u.padding.length===y.columns&&"number"==typeof u.padding[u.padding.length-1]?(y.padding=u.padding.map(n),m=!0):y.padding=n(u.padding));var g=y.columns,x=y.count,v=y.viewport.width,_=y.viewport.height,f=y.viewport.x,C=y.viewport.y,w=v/g,E=_/g;y.passes=[];for(var P=0;P<g;P++)for(var L=0;L<g;L++)if((y.diagonal||L!==P)&&(y.upper||!(P>L))&&(y.lower||!(P<L))){var O=i(y.id,P,L),z=this.passes[O]||(this.passes[O]={});if(u.data&&(z.positions=u.transpose?{x:{buffer:y.buffer,offset:L,count:x,stride:g},y:{buffer:y.buffer,offset:P,count:x,stride:g}}:{x:{buffer:y.buffer,offset:L*x,count:x},y:{buffer:y.buffer,offset:P*x,count:x}},z.bounds=r(y.bounds,P,L)),u.domain||u.viewport||u.data){var V=m?r(y.padding,P,L):y.padding;if(y.domain){var R=r(y.domain,P,L);z.viewport=[f+R[0]*v+V[0],C+R[1]*_+V[1],f+R[2]*v-V[2],C+R[3]*_-V[3]]}else z.viewport=[f+L*w+w*V[0],C+P*E+E*V[1],f+(L+1)*w-w*V[2],C+(P+1)*E-E*V[3]]}u.color&&(z.color=y.color),u.size&&(z.size=y.size),u.marker&&(z.marker=y.marker),u.borderSize&&(z.borderSize=y.borderSize),u.borderColor&&(z.borderColor=y.borderColor),u.opacity&&(z.opacity=y.opacity),u.range&&(z.range=h?r(y.range,P,L):y.range||z.bounds),y.passes.push(O)}return this},t.prototype.draw=function(){for(var a,s=[],c=arguments.length;c--;)s[c]=arguments[c];if(s.length){for(var h=[],u=0;u<s.length;u++)if("number"==typeof s[u]){var y=this.traces[s[u]],m=y.passOffset;h.push.apply(h,b(m,m+y.passes.length))}else if(s[u].length){var g=s[u],x=this.traces[u],v=x.passes,_=x.passOffset;v=v.map(function(f,C){h[_+C]=g})}(a=this.scatter).draw.apply(a,h)}else this.scatter.draw();return this},t.prototype.destroy=function(){return this.traces.forEach(function(a){a.buffer&&a.buffer.destroy&&a.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},28624:function(ie){ie.exports=function(){function F(We,et){this.id=oe++,this.type=We,this.data=et}function e(We){if(0===We.length)return[];var et=We.charAt(0),gt=We.charAt(We.length-1);if(1<We.length&&et===gt&&('"'===et||"'"===et))return['"'+We.substr(1,We.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(et=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(We))return e(We.substr(0,et.index)).concat(e(et[1])).concat(e(We.substr(et.index+et[0].length)));if(1===(et=We.split(".")).length)return['"'+We.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(We=[],gt=0;gt<et.length;++gt)We=We.concat(e(et[gt]));return We}function S(We){return"["+e(We).join("][")+"]"}function k(We){return"string"==typeof We?We.split():We}function o(We){return"string"==typeof We?document.querySelector(We):We}function b(We,et){for(var gt=Array(We),ht=0;ht<We;++ht)gt[ht]=et(ht);return gt}function p(We){var et,gt;return et=(65535<We)<<4,et|=gt=(255<(We>>>=et))<<3,(et|=gt=(15<(We>>>=gt))<<2)|(gt=(3<(We>>>=gt))<<1)|We>>>gt>>1}function l(){function We(ht){e:{for(var Ge=16;268435456>=Ge;Ge*=16)if(ht<=Ge){ht=Ge;break e}ht=0}return 0<(Ge=gt[p(ht)>>2]).length?Ge.pop():new ArrayBuffer(ht)}function et(ht){gt[p(ht.byteLength)>>2].push(ht)}var gt=b(8,function(){return[]});return{alloc:We,free:et,allocType:function(ht,Ge){var He=null;switch(ht){case 5120:He=new Int8Array(We(Ge),0,Ge);break;case 5121:He=new Uint8Array(We(Ge),0,Ge);break;case 5122:He=new Int16Array(We(2*Ge),0,Ge);break;case 5123:He=new Uint16Array(We(2*Ge),0,Ge);break;case 5124:He=new Int32Array(We(4*Ge),0,Ge);break;case 5125:He=new Uint32Array(We(4*Ge),0,Ge);break;case 5126:He=new Float32Array(We(4*Ge),0,Ge);break;default:return null}return He.length!==Ge?He.subarray(0,Ge):He},freeType:function(ht){et(ht.buffer)}}}function t(We){return!!We&&"object"==typeof We&&Array.isArray(We.shape)&&Array.isArray(We.stride)&&"number"==typeof We.offset&&We.shape.length===We.stride.length&&(Array.isArray(We.data)||xe(We.data))}function i(We,et,gt,ht,Ge,He){for(var ut=0;ut<et;++ut)for(var tt=We[ut],xt=0;xt<gt;++xt)for(var At=tt[xt],Mt=0;Mt<ht;++Mt)Ge[He++]=At[Mt]}function r(We,et,gt,ht,Ge){for(var He=1,ut=gt+1;ut<et.length;++ut)He*=et[ut];var tt=et[gt];if(et.length-gt==4){var xt=et[gt+1],At=et[gt+2];for(et=et[gt+3],ut=0;ut<tt;++ut)i(We[ut],xt,At,et,ht,Ge),Ge+=He}else for(ut=0;ut<tt;++ut)r(We[ut],et,gt+1,ht,Ge),Ge+=He}function n(We){return 0|Ie[Object.prototype.toString.call(We)]}function a(We,et){for(var gt=0;gt<et.length;++gt)We[gt]=et[gt]}function s(We,et,gt,ht,Ge,He,ut){for(var tt=0,xt=0;xt<gt;++xt)for(var At=0;At<ht;++At)We[tt++]=et[Ge*xt+He*At+ut]}function u(We){for(var et=we.allocType(5123,We.length),gt=0;gt<We.length;++gt)if(isNaN(We[gt]))et[gt]=65535;else if(We[gt]===1/0)et[gt]=31744;else if(We[gt]===-1/0)et[gt]=64512;else{Ae[0]=We[gt];var ht=(He=Ce[0])>>>31<<15,Ge=(He<<1>>>24)-127,He=He>>13&1023;et[gt]=-24>Ge?ht:-14>Ge?ht+(He+1024>>-14-Ge):15<Ge?ht+31744:ht+(Ge+15<<10)+He}return et}function y(We){return Array.isArray(We)||xe(We)}function d(We){return"[object "+We+"]"}function m(We){return Array.isArray(We)&&(0===We.length||"number"==typeof We[0])}function g(We){return!(!Array.isArray(We)||0===We.length||!y(We[0]))}function x(We){return Object.prototype.toString.call(We)}function v(We){if(!We)return!1;var et=x(We);return 0<=Ke.indexOf(et)||m(We)||g(We)||t(We)}function _(We,et){36193===We.type?(We.data=u(et),we.freeType(et)):We.data=et}function f(We,et,gt,ht,Ge,He){if(We=void 0!==ft[We]?ft[We]:je[We]*it[et],He&&(We*=6),Ge){for(ht=0;1<=gt;)ht+=We*gt*gt,gt/=2;return ht}return We*gt*ht}function E(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function z(We,et){return We>>>et|We<<32-et}function V(We,et){var gt=(65535&We)+(65535&et);return(We>>16)+(et>>16)+(gt>>16)<<16|65535&gt}function R(We){return Array.prototype.slice.call(We)}function U(We){return R(We).join("")}function N(We){return Array.isArray(We)||xe(We)||t(We)}function G(We){return We.sort(function(et,gt){return"viewport"===et?-1:"viewport"===gt?1:et<gt?-1:1})}function W(We,et,gt,ht){this.thisDep=We,this.contextDep=et,this.propDep=gt,this.append=ht}function ae(We){return We&&!(We.thisDep||We.contextDep||We.propDep)}function re(We){return new W(!1,!1,!1,We)}function ne(We,et){var gt=We.type;if(0===gt)return new W(!0,1<=(gt=We.data.length),2<=gt,et);if(4===gt)return new W((gt=We.data).thisDep,gt.contextDep,gt.propDep,et);if(5===gt)return new W(!1,!1,!1,et);if(6===gt){for(var ht=gt=!1,Ge=!1,He=0;He<We.data.length;++He){var ut=We.data[He];1===ut.type?Ge=!0:2===ut.type?ht=!0:3===ut.type?gt=!0:0===ut.type?(gt=!0,1<=(ut=ut.data)&&(ht=!0),2<=ut&&(Ge=!0)):4===ut.type&&(gt=gt||ut.data.thisDep,ht=ht||ut.data.contextDep,Ge=Ge||ut.data.propDep)}return new W(gt,ht,Ge,et)}return new W(3===gt,2===gt,1===gt,et)}function Q(We,et,gt,ht,Ge,He,ut,tt,xt,At,Mt,yt,Pt,Ct,Dt,Ut){function Bt(Nt){return Nt.replace(".","_")}function qt(Nt,Zt,un){var Tn=Bt(Nt);Kn.push(Nt),Zn[Tn]=En[Tn]=!!un,tr[Tn]=Zt}function an(Nt,Zt,un){var Tn=Bt(Nt);Kn.push(Nt),Array.isArray(un)?(En[Tn]=un.slice(),Zn[Tn]=un.slice()):En[Tn]=Zn[Tn]=un,fr[Tn]=Zt}function mn(){var Nt=function Z(We){function et(){var Mt=[],yt=[];return X(function(){Mt.push.apply(Mt,R(arguments))},{def:function(){var Pt="v"+Ge++;return yt.push(Pt),0<arguments.length&&(Mt.push(Pt,"="),Mt.push.apply(Mt,R(arguments)),Mt.push(";")),Pt},toString:function(){return U([0<yt.length?"var "+yt.join(",")+";":"",U(Mt)])}})}function gt(){function Mt(Ut,Bt){Pt(Ut,Bt,"=",yt.def(Ut,Bt),";")}var yt=et(),Pt=et(),Ct=yt.toString,Dt=Pt.toString;return X(function(){yt.apply(yt,R(arguments))},{def:yt.def,entry:yt,exit:Pt,save:Mt,set:function(Ut,Bt,qt){Mt(Ut,Bt),yt(Ut,Bt,"=",qt,";")},toString:function(){return Ct()+Dt()}})}var ht=We&&We.cache,Ge=0,He=[],ut=[],tt=[],xt=et(),At={};return{global:xt,link:function(Mt,yt){var Pt=yt&&yt.stable;if(!Pt)for(var Ct=0;Ct<ut.length;++Ct)if(ut[Ct]===Mt&&!tt[Ct])return He[Ct];return Ct="g"+Ge++,He.push(Ct),ut.push(Mt),tt.push(Pt),Ct},block:et,proc:function(Mt,yt){function Pt(){var Bt="a"+Ct.length;return Ct.push(Bt),Bt}var Ct=[];yt=yt||0;for(var Dt=0;Dt<yt;++Dt)Pt();var Ut=(Dt=gt()).toString;return At[Mt]=X(Dt,{arg:Pt,toString:function(){return U(["function(",Ct.join(),"){",Ut(),"}"])}})},scope:gt,cond:function(){var Mt=U(arguments),yt=gt(),Pt=gt(),Ct=yt.toString,Dt=Pt.toString;return X(yt,{then:function(){return yt.apply(yt,R(arguments)),this},else:function(){return Pt.apply(Pt,R(arguments)),this},toString:function(){var Ut=Dt();return Ut&&(Ut="else{"+Ut+"}"),U(["if(",Mt,"){",Ct(),"}",Ut])}})},compile:function(){var Mt=['"use strict";',xt,"return {"];Object.keys(At).forEach(function(Ct){Mt.push('"',Ct,'":',At[Ct].toString(),",")}),Mt.push("}");var yt,Pt=U(Mt).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return ht&&(yt=function(Ct){for(var Dt,Ut="",Bt=0;Bt<Ct.length;Bt++)Dt=Ct.charCodeAt(Bt),Ut+="0123456789abcdef".charAt(Dt>>>4&15)+"0123456789abcdef".charAt(15&Dt);return Ut}(function(Ct){for(var Dt=Array(Ct.length>>2),Ut=0;Ut<Dt.length;Ut++)Dt[Ut]=0;for(Ut=0;Ut<8*Ct.length;Ut+=8)Dt[Ut>>5]|=(255&Ct.charCodeAt(Ut/8))<<24-Ut%32;var Bt,qt,an,mn,Qt,sn,Kt,qn,Fn,Sn,hn,wn=8*Ct.length;for(Ct=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Ut=Array(64),Dt[wn>>5]|=128<<24-wn%32,Dt[15+(wn+64>>9<<4)]=wn,qn=0;qn<Dt.length;qn+=16){for(wn=Ct[0],Bt=Ct[1],qt=Ct[2],an=Ct[3],mn=Ct[4],Qt=Ct[5],sn=Ct[6],Kt=Ct[7],Fn=0;64>Fn;Fn++){var pn;16>Fn?Ut[Fn]=Dt[Fn+qn]:(Sn=Fn,hn=V(hn=z(hn=Ut[Fn-2],17)^z(hn,19)^hn>>>10,Ut[Fn-7]),pn=z(pn=Ut[Fn-15],7)^z(pn,18)^pn>>>3,Ut[Sn]=V(V(hn,pn),Ut[Fn-16])),Sn=V(V(V(V(Kt,Sn=z(Sn=mn,6)^z(Sn,11)^z(Sn,25)),mn&Qt^~mn&sn),lt[Fn]),Ut[Fn]),hn=V(Kt=z(Kt=wn,2)^z(Kt,13)^z(Kt,22),wn&Bt^wn&qt^Bt&qt),Kt=sn,sn=Qt,Qt=mn,mn=V(an,Sn),an=qt,qt=Bt,Bt=wn,wn=V(Sn,hn)}Ct[0]=V(wn,Ct[0]),Ct[1]=V(Bt,Ct[1]),Ct[2]=V(qt,Ct[2]),Ct[3]=V(an,Ct[3]),Ct[4]=V(mn,Ct[4]),Ct[5]=V(Qt,Ct[5]),Ct[6]=V(sn,Ct[6]),Ct[7]=V(Kt,Ct[7])}for(Dt="",Ut=0;Ut<32*Ct.length;Ut+=8)Dt+=String.fromCharCode(Ct[Ut>>5]>>>24-Ut%32&255);return Dt}(function(Ct){for(var Dt,Ut,Bt="",qt=-1;++qt<Ct.length;)Dt=Ct.charCodeAt(qt),Ut=qt+1<Ct.length?Ct.charCodeAt(qt+1):0,55296<=Dt&&56319>=Dt&&56320<=Ut&&57343>=Ut&&(Dt=65536+((1023&Dt)<<10)+(1023&Ut),qt++),127>=Dt?Bt+=String.fromCharCode(Dt):2047>=Dt?Bt+=String.fromCharCode(192|Dt>>>6&31,128|63&Dt):65535>=Dt?Bt+=String.fromCharCode(224|Dt>>>12&15,128|Dt>>>6&63,128|63&Dt):2097151>=Dt&&(Bt+=String.fromCharCode(240|Dt>>>18&7,128|Dt>>>12&63,128|Dt>>>6&63,128|63&Dt));return Bt}(Pt))),ht[yt])?ht[yt].apply(null,ut):(Pt=Function.apply(null,He.concat(Pt)),ht&&(ht[yt]=Pt),Pt.apply(null,ut))}}}({cache:Dt}),Zt=Nt.link,un=Nt.global;Nt.id=In++,Nt.batchId="0";var Tn=Zt(Dr),kn=Nt.shared={props:"a0"};Object.keys(Dr).forEach(function(dn){kn[dn]=un.def(Tn,".",dn)});var Pn=Nt.next={},yn=Nt.current={};Object.keys(fr).forEach(function(dn){Array.isArray(En[dn])&&(Pn[dn]=un.def(kn.next,".",dn),yn[dn]=un.def(kn.current,".",dn))});var on=Nt.constants={};Object.keys(cn).forEach(function(dn){on[dn]=un.def(JSON.stringify(cn[dn]))}),Nt.invoke=function(dn,xn){switch(xn.type){case 0:var Bn=["this",kn.context,kn.props,Nt.batchId];return dn.def(Zt(xn.data),".call(",Bn.slice(0,Math.max(xn.data.length+1,4)),")");case 1:return dn.def(kn.props,xn.data);case 2:return dn.def(kn.context,xn.data);case 3:return dn.def("this",xn.data);case 4:return xn.data.append(Nt,dn),xn.data.ref;case 5:return xn.data.toString();case 6:return xn.data.map(function(Wn){return Nt.invoke(dn,Wn)})}},Nt.attribCache={};var nn={};return Nt.scopeAttrib=function(dn){if((dn=et.id(dn))in nn)return nn[dn];var xn=At.scope[dn];return xn||(xn=At.scope[dn]=new or),nn[dn]=Zt(xn)},Nt}function Fn(Nt,Zt,un,Tn,kn){function Pn(yr){var ur=on[yr];ur&&(dn[yr]=ur)}var yr,gr,br,pr,yn=function(yr,ur){if("string"==typeof(gr=yr.static).frag&&"string"==typeof gr.vert){if(0<Object.keys(ur.dynamic).length)return null;var gr=ur.static,br=Object.keys(gr);if(0<br.length&&"number"==typeof gr[br[0]]){for(var pr=[],Lr=0;Lr<br.length;++Lr)pr.push([0|gr[br[Lr]],br[Lr]]);return pr}}return null}(Nt,Zt),on=function(yr,ur,gr){function br(zr){if(zr in pr){var kr=pr[zr];zr=!0;var Fr,Qr,ai=0|kr.x,Xi=0|kr.y;return"width"in kr?Fr=0|kr.width:zr=!1,"height"in kr?Qr=0|kr.height:zr=!1,new W(!zr&&ur&&ur.thisDep,!zr&&ur&&ur.contextDep,!zr&&ur&&ur.propDep,function(Ba,ea){var Ea=Ba.shared.context,so=Fr;"width"in kr||(so=ea.def(Ea,".","framebufferWidth","-",ai));var li=Qr;return"height"in kr||(li=ea.def(Ea,".","framebufferHeight","-",Xi)),[ai,Xi,so,li]})}if(zr in Lr){var da=Lr[zr];return zr=ne(da,function(Ba,ea){var Ea=Ba.invoke(ea,da),so=Ba.shared.context,li=ea.def(Ea,".x|0"),za=ea.def(Ea,".y|0");return[li,za,ea.def('"width" in ',Ea,"?",Ea,".width|0:","(",so,".","framebufferWidth","-",li,")"),Ea=ea.def('"height" in ',Ea,"?",Ea,".height|0:","(",so,".","framebufferHeight","-",za,")")]}),ur&&(zr.thisDep=zr.thisDep||ur.thisDep,zr.contextDep=zr.contextDep||ur.contextDep,zr.propDep=zr.propDep||ur.propDep),zr}return ur?new W(ur.thisDep,ur.contextDep,ur.propDep,function(Ba,ea){var Ea=Ba.shared.context;return[0,0,ea.def(Ea,".","framebufferWidth"),ea.def(Ea,".","framebufferHeight")]}):null}var pr=yr.static,Lr=yr.dynamic;if(yr=br("viewport")){var Ur=yr;yr=new W(yr.thisDep,yr.contextDep,yr.propDep,function(zr,kr){var Fr=Ur.append(zr,kr),Qr=zr.shared.context;return kr.set(Qr,".viewportWidth",Fr[2]),kr.set(Qr,".viewportHeight",Fr[3]),Fr})}return{viewport:yr,scissor_box:br("scissor.box")}}(Nt,Bn=function Qt(Nt,Zt){var un=Nt.static,Tn=Nt.dynamic;if("framebuffer"in un){var kn=un.framebuffer;return kn?(kn=tt.getFramebuffer(kn),re(function(yn,on){var nn=yn.link(kn),dn=yn.shared;return on.set(dn.framebuffer,".next",nn),on.set(dn=dn.context,".framebufferWidth",nn+".width"),on.set(dn,".framebufferHeight",nn+".height"),nn})):re(function(yn,on){var nn=yn.shared;return on.set(nn.framebuffer,".next","null"),on.set(nn=nn.context,".framebufferWidth",nn+".drawingBufferWidth"),on.set(nn,".framebufferHeight",nn+".drawingBufferHeight"),"null"})}if("framebuffer"in Tn){var Pn=Tn.framebuffer;return ne(Pn,function(yn,on){var nn=yn.invoke(on,Pn),dn=yn.shared,xn=dn.framebuffer;return nn=on.def(xn,".getFramebuffer(",nn,")"),on.set(xn,".next",nn),on.set(dn=dn.context,".framebufferWidth",nn+"?"+nn+".width:"+dn+".drawingBufferWidth"),on.set(dn,".framebufferHeight",nn+"?"+nn+".height:"+dn+".drawingBufferHeight"),nn})}return null}(Nt)),nn=function Kt(Nt,Zt){function un(ar,yr){if(ar in Tn){var ur=0|Tn[ar];return yr?Pn.offset=ur:Pn.instances=ur,re(function(br,pr){return yr&&(br.OFFSET=ur),ur})}if(ar in kn){var gr=kn[ar];return ne(gr,function(br,pr){var Lr=br.invoke(pr,gr);return yr&&(br.OFFSET=Lr),Lr})}if(yr){if(nn)return re(function(br,pr){return br.OFFSET=0});if(yn)return new W(on.thisDep,on.contextDep,on.propDep,function(br,pr){return pr.def(br.shared.vao+".currentVAO?"+br.shared.vao+".currentVAO.offset:0")})}else if(yn)return new W(on.thisDep,on.contextDep,on.propDep,function(br,pr){return pr.def(br.shared.vao+".currentVAO?"+br.shared.vao+".currentVAO.instances:-1")});return null}var Tn=Nt.static,kn=Nt.dynamic,Pn={},yn=!1,on=function(){if("vao"in Tn){var ar=Tn.vao;return null!==ar&&null===At.getVAO(ar)&&(ar=At.createVAO(ar)),yn=!0,Pn.vao=ar,re(function(ur){var gr=At.getVAO(ar);return gr?ur.link(gr):"null"})}if("vao"in kn){yn=!0;var yr=kn.vao;return ne(yr,function(ur,gr){var br=ur.invoke(gr,yr);return gr.def(ur.shared.vao+".getVAO("+br+")")})}return null}(),nn=!1,dn=function(){if("elements"in Tn){var ar=Tn.elements;if(Pn.elements=ar,N(ar)){var yr=Pn.elements=He.create(ar,!0);ar=He.getElements(yr),nn=!0}else ar&&(ar=He.getElements(ar),nn=!0);return(yr=re(function(gr,br){if(ar){var pr=gr.link(ar);return gr.ELEMENTS=pr}return gr.ELEMENTS=null})).value=ar,yr}if("elements"in kn){nn=!0;var ur=kn.elements;return ne(ur,function(gr,br){var pr=(Lr=gr.shared).isBufferArgs,Lr=Lr.elements,Ur=gr.invoke(br,ur),zr=br.def("null");return pr=br.def(pr,"(",Ur,")"),Ur=gr.cond(pr).then(zr,"=",Lr,".createStream(",Ur,");").else(zr,"=",Lr,".getElements(",Ur,");"),br.entry(Ur),br.exit(gr.cond(pr).then(Lr,".destroyStream(",zr,");")),gr.ELEMENTS=zr})}return yn?new W(on.thisDep,on.contextDep,on.propDep,function(gr,br){return br.def(gr.shared.vao+".currentVAO?"+gr.shared.elements+".getElements("+gr.shared.vao+".currentVAO.elements):null")}):null}(),xn=un("offset",!0),Bn=function(){if("primitive"in Tn){var ar=Tn.primitive;return Pn.primitive=ar,re(function(ur,gr){return Pe[ar]})}if("primitive"in kn){var yr=kn.primitive;return ne(yr,function(ur,gr){var br=ur.constants.primTypes,pr=ur.invoke(gr,yr);return gr.def(br,"[",pr,"]")})}return nn?ae(dn)?re(dn.value?function(ur,gr){return gr.def(ur.ELEMENTS,".primType")}:function(){return 4}):new W(dn.thisDep,dn.contextDep,dn.propDep,function(ur,gr){var br=ur.ELEMENTS;return gr.def(br,"?",br,".primType:",4)}):yn?new W(on.thisDep,on.contextDep,on.propDep,function(ur,gr){return gr.def(ur.shared.vao+".currentVAO?"+ur.shared.vao+".currentVAO.primitive:4")}):null}(),Wn=function(){if("count"in Tn){var ar=0|Tn.count;return Pn.count=ar,re(function(){return ar})}if("count"in kn){var yr=kn.count;return ne(yr,function(ur,gr){return ur.invoke(gr,yr)})}return nn?ae(dn)?dn?xn?new W(xn.thisDep,xn.contextDep,xn.propDep,function(ur,gr){return gr.def(ur.ELEMENTS,".vertCount-",ur.OFFSET)}):re(function(ur,gr){return gr.def(ur.ELEMENTS,".vertCount")}):re(function(){return-1}):new W(dn.thisDep||xn.thisDep,dn.contextDep||xn.contextDep,dn.propDep||xn.propDep,function(ur,gr){var br=ur.ELEMENTS;return ur.OFFSET?gr.def(br,"?",br,".vertCount-",ur.OFFSET,":-1"):gr.def(br,"?",br,".vertCount:-1")}):yn?new W(on.thisDep,on.contextDep,on.propDep,function(ur,gr){return gr.def(ur.shared.vao,".currentVAO?",ur.shared.vao,".currentVAO.count:-1")}):null}(),Qn=un("instances",!1);return{elements:dn,primitive:Bn,count:Wn,instances:Qn,offset:xn,vao:on,vaoActive:yn,elementsActive:nn,static:Pn}}(Nt),dn=(gr=(yr=Nt).static,br=yr.dynamic,pr={},Kn.forEach(function(Lr){function Ur(kr,Fr){if(Lr in gr){var Qr=kr(gr[Lr]);pr[zr]=re(function(){return Qr})}else if(Lr in br){var ai=br[Lr];pr[zr]=ne(ai,function(Xi,da){return Fr(Xi,da,Xi.invoke(da,ai))})}}var zr=Bt(Lr);switch(Lr){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return Ur(function(kr){return kr},function(kr,Fr,Qr){return Qr});case"depth.func":return Ur(function(kr){return Ht[kr]},function(kr,Fr,Qr){return Fr.def(kr.constants.compareFuncs,"[",Qr,"]")});case"depth.range":return Ur(function(kr){return kr},function(kr,Fr,Qr){return[Fr.def("+",Qr,"[0]"),Fr=Fr.def("+",Qr,"[1]")]});case"blend.func":return Ur(function(kr){return[Vt["srcRGB"in kr?kr.srcRGB:kr.src],Vt["dstRGB"in kr?kr.dstRGB:kr.dst],Vt["srcAlpha"in kr?kr.srcAlpha:kr.src],Vt["dstAlpha"in kr?kr.dstAlpha:kr.dst]]},function(kr,Fr,Qr){function ai(ea,Ea){return Fr.def('"',ea,Ea,'" in ',Qr,"?",Qr,".",ea,Ea,":",Qr,".",ea)}kr=kr.constants.blendFuncs;var Xi=ai("src","RGB"),da=ai("dst","RGB"),Ba=(Xi=Fr.def(kr,"[",Xi,"]"),Fr.def(kr,"[",ai("src","Alpha"),"]"));return[Xi,da=Fr.def(kr,"[",da,"]"),Ba,kr=Fr.def(kr,"[",ai("dst","Alpha"),"]")]});case"blend.equation":return Ur(function(kr){return"string"==typeof kr?[Or[kr],Or[kr]]:"object"==typeof kr?[Or[kr.rgb],Or[kr.alpha]]:void 0},function(kr,Fr,Qr){var ai=kr.constants.blendEquations,Xi=Fr.def(),da=Fr.def();return(kr=kr.cond("typeof ",Qr,'==="string"')).then(Xi,"=",da,"=",ai,"[",Qr,"];"),kr.else(Xi,"=",ai,"[",Qr,".rgb];",da,"=",ai,"[",Qr,".alpha];"),Fr(kr),[Xi,da]});case"blend.color":return Ur(function(kr){return b(4,function(Fr){return+kr[Fr]})},function(kr,Fr,Qr){return b(4,function(ai){return Fr.def("+",Qr,"[",ai,"]")})});case"stencil.mask":return Ur(function(kr){return 0|kr},function(kr,Fr,Qr){return Fr.def(Qr,"|0")});case"stencil.func":return Ur(function(kr){return[Ht[kr.cmp||"keep"],kr.ref||0,"mask"in kr?kr.mask:-1]},function(kr,Fr,Qr){return[kr=Fr.def('"cmp" in ',Qr,"?",kr.constants.compareFuncs,"[",Qr,".cmp]",":",7680),Fr.def(Qr,".ref|0"),Fr=Fr.def('"mask" in ',Qr,"?",Qr,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return Ur(function(kr){return["stencil.opBack"===Lr?1029:1028,zt[kr.fail||"keep"],zt[kr.zfail||"keep"],zt[kr.zpass||"keep"]]},function(kr,Fr,Qr){function ai(da){return Fr.def('"',da,'" in ',Qr,"?",Xi,"[",Qr,".",da,"]:",7680)}var Xi=kr.constants.stencilOps;return["stencil.opBack"===Lr?1029:1028,ai("fail"),ai("zfail"),ai("zpass")]});case"polygonOffset.offset":return Ur(function(kr){return[0|kr.factor,0|kr.units]},function(kr,Fr,Qr){return[Fr.def(Qr,".factor|0"),Fr=Fr.def(Qr,".units|0")]});case"cull.face":return Ur(function(kr){var Fr=0;return"front"===kr?Fr=1028:"back"===kr&&(Fr=1029),Fr},function(kr,Fr,Qr){return Fr.def(Qr,'==="front"?',1028,":",1029)});case"frontFace":return Ur(function(kr){return Qe[kr]},function(kr,Fr,Qr){return Fr.def(Qr+'==="cw"?2304:2305')});case"colorMask":return Ur(function(kr){return kr.map(function(Fr){return!!Fr})},function(kr,Fr,Qr){return b(4,function(ai){return"!!"+Qr+"["+ai+"]"})});case"sample.coverage":return Ur(function(kr){return["value"in kr?kr.value:1,!!kr.invert]},function(kr,Fr,Qr){return[Fr.def('"value" in ',Qr,"?+",Qr,".value:1"),Fr=Fr.def("!!",Qr,".invert")]})}}),pr),xn=function sn(Nt,Zt,un){function Tn(dn){if(dn in kn){var xn=et.id(kn[dn]);return(dn=re(function(){return xn})).id=xn,dn}if(dn in Pn){var Bn=Pn[dn];return ne(Bn,function(Wn,Qn){var ar=Wn.invoke(Qn,Bn);return Qn.def(Wn.shared.strings,".id(",ar,")")})}return null}var kn=Nt.static,Pn=Nt.dynamic,yn=Tn("frag"),on=Tn("vert"),nn=null;return ae(yn)&&ae(on)?(nn=Mt.program(on.id,yn.id,null,un),Nt=re(function(dn,xn){return dn.link(nn)})):Nt=new W(yn&&yn.thisDep||on&&on.thisDep,yn&&yn.contextDep||on&&on.contextDep,yn&&yn.propDep||on&&on.propDep,function(dn,xn){var Bn,Wn,Qn=dn.shared.shader;return Bn=yn?yn.append(dn,xn):xn.def(Qn,".","frag"),Wn=on?on.append(dn,xn):xn.def(Qn,".","vert"),xn.def(Qn+".program("+Wn+","+Bn+")")}),{frag:yn,vert:on,progVar:Nt,program:nn}}(Nt,0,yn);Pn("viewport"),Pn(Bt("scissor.box"));var Bn,Wn=0<Object.keys(dn).length;if((Bn={framebuffer:Bn,draw:nn,shader:xn,state:dn,dirty:Wn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(yr){var ur,gr=yr.static;if(yr=yr.dynamic,"profile"in gr){var br=!!gr.profile;(ur=re(function(Lr,Ur){return br})).enable=br}else if("profile"in yr){var pr=yr.profile;ur=ne(pr,function(Lr,Ur){return Lr.invoke(Ur,pr)})}return ur}(Nt),Bn.uniforms=function(yr,ur){var gr=yr.static,br=yr.dynamic,pr={};return Object.keys(gr).forEach(function(Lr){var Ur,zr=gr[Lr];if("number"==typeof zr||"boolean"==typeof zr)Ur=re(function(){return zr});else if("function"==typeof zr){var kr=zr._reglType;"texture2d"===kr||"textureCube"===kr?Ur=re(function(Fr){return Fr.link(zr)}):"framebuffer"!==kr&&"framebufferCube"!==kr||(Ur=re(function(Fr){return Fr.link(zr.color[0])}))}else y(zr)&&(Ur=re(function(Fr){return Fr.global.def("[",b(zr.length,function(Qr){return zr[Qr]}),"]")}));Ur.value=zr,pr[Lr]=Ur}),Object.keys(br).forEach(function(Lr){var Ur=br[Lr];pr[Lr]=ne(Ur,function(zr,kr){return zr.invoke(kr,Ur)})}),pr}(un),Bn.drawVAO=Bn.scopeVAO=nn.vao,!Bn.drawVAO&&xn.program&&!yn&&gt.angle_instanced_arrays&&nn.static.elements){var Qn=!0;if(Nt=xn.program.attributes.map(function(yr){return yr=Zt.static[yr],Qn=Qn&&!!yr,yr}),Qn&&0<Nt.length){var ar=At.getVAO(At.createVAO({attributes:Nt,elements:nn.static.elements}));Bn.drawVAO=new W(null,null,null,function(yr,ur){return yr.link(ar)}),Bn.useVAO=!0}}return yn?Bn.useVAO=!0:Bn.attributes=function qn(Nt,Zt){var un=Nt.static,Tn=Nt.dynamic,kn={};return Object.keys(un).forEach(function(Pn){var yn=un[Pn],on=et.id(Pn),nn=new or;if(N(yn))nn.state=1,nn.buffer=Ge.getBuffer(Ge.create(yn,34962,!1,!0)),nn.type=0;else if(xn=Ge.getBuffer(yn))nn.state=1,nn.buffer=xn,nn.type=0;else if("constant"in yn){var dn=yn.constant;nn.buffer="null",nn.state=2,"number"==typeof dn?nn.x=dn:ot.forEach(function(ur,gr){gr<dn.length&&(nn[ur]=dn[gr])})}else{var xn=N(yn.buffer)?Ge.getBuffer(Ge.create(yn.buffer,34962,!1,!0)):Ge.getBuffer(yn.buffer),Bn=0|yn.offset,Wn=0|yn.stride,Qn=0|yn.size,ar=!!yn.normalized,yr=0;"type"in yn&&(yr=De[yn.type]),yn=0|yn.divisor,nn.buffer=xn,nn.state=1,nn.size=Qn,nn.normalized=ar,nn.type=yr||xn.dtype,nn.offset=Bn,nn.stride=Wn,nn.divisor=yn}kn[Pn]=re(function(ur,gr){var br=ur.attribCache;if(on in br)return br[on];var pr={isStream:!1};return Object.keys(nn).forEach(function(Lr){pr[Lr]=nn[Lr]}),nn.buffer&&(pr.buffer=ur.link(nn.buffer),pr.type=pr.type||pr.buffer+".dtype"),br[on]=pr})}),Object.keys(Tn).forEach(function(Pn){var yn=Tn[Pn];kn[Pn]=ne(yn,function(on,nn){function dn(br){nn(ar[br],"=",xn,".",br,"|0;")}var xn=on.invoke(nn,yn),Bn=on.shared,Wn=on.constants,Qn=Bn.isBufferArgs,ar=(Bn=Bn.buffer,{isStream:nn.def(!1)}),yr=new or;yr.state=1,Object.keys(yr).forEach(function(br){ar[br]=nn.def(""+yr[br])});var ur=ar.buffer,gr=ar.type;return nn("if(",Qn,"(",xn,")){",ar.isStream,"=true;",ur,"=",Bn,".createStream(",34962,",",xn,");",gr,"=",ur,".dtype;","}else{",ur,"=",Bn,".getBuffer(",xn,");","if(",ur,"){",gr,"=",ur,".dtype;",'}else if("constant" in ',xn,"){",ar.state,"=",2,";","if(typeof "+xn+'.constant === "number"){',ar[ot[0]],"=",xn,".constant;",ot.slice(1).map(function(br){return ar[br]}).join("="),"=0;","}else{",ot.map(function(br,pr){return ar[br]+"="+xn+".constant.length>"+pr+"?"+xn+".constant["+pr+"]:0;"}).join(""),"}}else{","if(",Qn,"(",xn,".buffer)){",ur,"=",Bn,".createStream(",34962,",",xn,".buffer);","}else{",ur,"=",Bn,".getBuffer(",xn,".buffer);","}",gr,'="type" in ',xn,"?",Wn.glTypes,"[",xn,".type]:",ur,".dtype;",ar.normalized,"=!!",xn,".normalized;"),dn("size"),dn("offset"),dn("stride"),dn("divisor"),nn("}}"),nn.exit("if(",ar.isStream,"){",Bn,".destroyStream(",ur,");","}"),ar})}),kn}(Zt),Bn.context=function(yr){var ur=yr.static,gr=yr.dynamic,br={};return Object.keys(ur).forEach(function(pr){var Lr=ur[pr];br[pr]=re(function(Ur,zr){return"number"==typeof Lr||"boolean"==typeof Lr?""+Lr:Ur.link(Lr)})}),Object.keys(gr).forEach(function(pr){var Lr=gr[pr];br[pr]=ne(Lr,function(Ur,zr){return Ur.invoke(zr,Lr)})}),br}(Tn),Bn}function Sn(Nt,Zt,un){var Tn=Nt.shared.context,kn=Nt.scope();Object.keys(un).forEach(function(Pn){Zt.save(Tn,"."+Pn);var yn=un[Pn].append(Nt,Zt);Array.isArray(yn)?kn(Tn,".",Pn,"=[",yn.join(),"];"):kn(Tn,".",Pn,"=",yn,";")}),Zt(kn)}function hn(Nt,Zt,un,Tn){var kn,Pn=(on=Nt.shared).gl,yn=on.framebuffer;gn&&(kn=Zt.def(on.extensions,".webgl_draw_buffers"));var on=(nn=Nt.constants).drawBuffer,nn=nn.backBuffer;Nt=un?un.append(Nt,Zt):Zt.def(yn,".next"),Tn||Zt("if(",Nt,"!==",yn,".cur){"),Zt("if(",Nt,"){",Pn,".bindFramebuffer(",36160,",",Nt,".framebuffer);"),gn&&Zt(kn,".drawBuffersWEBGL(",on,"[",Nt,".colorAttachments.length]);"),Zt("}else{",Pn,".bindFramebuffer(",36160,",null);"),gn&&Zt(kn,".drawBuffersWEBGL(",nn,");"),Zt("}",yn,".cur=",Nt,";"),Tn||Zt("}")}function wn(Nt,Zt,un){var Tn=Nt.shared,kn=Tn.gl,Pn=Nt.current,yn=Nt.next,on=Tn.current,nn=Tn.next,dn=Nt.cond(on,".dirty");Kn.forEach(function(xn){var Bn,Wn;if(!((xn=Bt(xn))in un.state))if(xn in yn){Bn=yn[xn],Wn=Pn[xn];var Qn=b(En[xn].length,function(ar){return dn.def(Bn,"[",ar,"]")});dn(Nt.cond(Qn.map(function(ar,yr){return ar+"!=="+Wn+"["+yr+"]"}).join("||")).then(kn,".",fr[xn],"(",Qn,");",Qn.map(function(ar,yr){return Wn+"["+yr+"]="+ar}).join(";"),";"))}else Bn=dn.def(nn,".",xn),Qn=Nt.cond(Bn,"!==",on,".",xn),dn(Qn),xn in tr?Qn(Nt.cond(Bn).then(kn,".enable(",tr[xn],");").else(kn,".disable(",tr[xn],");"),on,".",xn,"=",Bn,";"):Qn(kn,".",fr[xn],"(",Bn,");",on,".",xn,"=",Bn,";")}),0===Object.keys(un.state).length&&dn(on,".dirty=false;"),Zt(dn)}function pn(Nt,Zt,un,Tn){var kn,Pn=Nt.shared,yn=Nt.current,on=Pn.current,nn=Pn.gl;G(Object.keys(un)).forEach(function(dn){var xn=un[dn];if(!Tn||Tn(xn)){var Bn=xn.append(Nt,Zt);if(tr[dn]){var Wn=tr[dn];ae(xn)?(kn=Nt.link(Bn,{stable:!0}),Zt(Nt.cond(kn).then(nn,".enable(",Wn,");").else(nn,".disable(",Wn,");")),Zt(on,".",dn,"=",kn,";")):(Zt(Nt.cond(Bn).then(nn,".enable(",Wn,");").else(nn,".disable(",Wn,");")),Zt(on,".",dn,"=",Bn,";"))}else if(y(Bn)){var Qn=yn[dn];Zt(nn,".",fr[dn],"(",Bn,");",Bn.map(function(ar,yr){return Qn+"["+yr+"]="+ar}).join(";"),";")}else ae(xn)?(kn=Nt.link(Bn,{stable:!0}),Zt(nn,".",fr[dn],"(",kn,");",on,".",dn,"=",kn,";")):Zt(nn,".",fr[dn],"(",Bn,");",on,".",dn,"=",Bn,";")}})}function An(Nt,Zt){fn&&(Nt.instancing=Zt.def(Nt.shared.extensions,".angle_instanced_arrays"))}function On(Nt,Zt,un,Tn,kn){function Pn(){return typeof performance>"u"?"Date.now()":"performance.now()"}function yn(yr){yr(dn=Zt.def(),"=",Pn(),";"),"string"==typeof kn?yr(Wn,".count+=",kn,";"):yr(Wn,".count++;"),Ct&&(Tn?yr(xn=Zt.def(),"=",ar,".getNumPendingQueries();"):yr(ar,".beginQuery(",Wn,");"))}function on(yr){yr(Wn,".cpuTime+=",Pn(),"-",dn,";"),Ct&&(Tn?yr(ar,".pushScopeStats(",xn,",",ar,".getNumPendingQueries(),",Wn,");"):yr(ar,".endQuery();"))}function nn(yr){var ur=Zt.def(Qn,".profile");Zt(Qn,".profile=",yr,";"),Zt.exit(Qn,".profile=",ur,";")}var dn,xn,Bn=Nt.shared,Wn=Nt.stats,Qn=Bn.current,ar=Bn.timer;if(un=un.profile){if(ae(un))return void(un.enable?(yn(Zt),on(Zt.exit),nn("true")):nn("false"));nn(un=un.append(Nt,Zt))}else un=Zt.def(Qn,".profile");yn(Bn=Nt.block()),Zt("if(",un,"){",Bn,"}"),on(Nt=Nt.block()),Zt.exit("if(",un,"){",Nt,"}")}function Dn(Nt,Zt,un,Tn,kn){var yn=Nt.shared;Tn.forEach(function(on){var nn,dn=on.name,xn=un.attributes[dn];if(xn){if(!kn(xn))return;nn=xn.append(Nt,Zt)}else{if(!kn(nt))return;var Bn=Nt.scopeAttrib(dn);nn={},Object.keys(new or).forEach(function(Wn){nn[Wn]=Zt.def(Bn,".",Wn)})}!function Pn(on,nn,dn){function xn(){Zt("if(!",ar,".buffer){",Wn,".enableVertexAttribArray(",Qn,");}");var br,pr=dn.type;br=dn.size?Zt.def(dn.size,"||",nn):nn,Zt("if(",ar,".type!==",pr,"||",ar,".size!==",br,"||",gr.map(function(Lr){return ar+"."+Lr+"!=="+dn[Lr]}).join("||"),"){",Wn,".bindBuffer(",34962,",",yr,".buffer);",Wn,".vertexAttribPointer(",[Qn,br,pr,dn.normalized,dn.stride,dn.offset],");",ar,".type=",pr,";",ar,".size=",br,";",gr.map(function(Lr){return ar+"."+Lr+"="+dn[Lr]+";"}).join(""),"}"),fn&&Zt("if(",ar,".divisor!==",pr=dn.divisor,"){",Nt.instancing,".vertexAttribDivisorANGLE(",[Qn,pr],");",ar,".divisor=",pr,";}")}function Bn(){Zt("if(",ar,".buffer){",Wn,".disableVertexAttribArray(",Qn,");",ar,".buffer=null;","}if(",ot.map(function(br,pr){return ar+"."+br+"!=="+ur[pr]}).join("||"),"){",Wn,".vertexAttrib4f(",Qn,",",ur,");",ot.map(function(br,pr){return ar+"."+br+"="+ur[pr]+";"}).join(""),"}")}var Wn=yn.gl,Qn=Zt.def(on,".location"),ar=Zt.def(yn.attributes,"[",Qn,"]"),yr=dn.buffer,ur=[dn.x,dn.y,dn.z,dn.w],gr=["buffer","normalized","offset","stride"];1===(on=dn.state)?xn():2===on?Bn():(Zt("if(",on,"===",1,"){"),xn(),Zt("}else{"),Bn(),Zt("}"))}(Nt.link(on),function(Wn){switch(Wn){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(on.info.type),nn)})}function Vn(Nt,Zt,un,Tn,kn,Pn){for(var yn,on=Nt.shared,nn=on.gl,dn=0;dn<Tn.length;++dn){var xn,Bn=(ar=Tn[dn]).name,Wn=ar.info.type,Qn=un.uniforms[Bn],ar=Nt.link(ar)+".location";if(Qn){if(!kn(Qn))continue;if(ae(Qn)){if(Bn=Qn.value,35678===Wn||35680===Wn)Zt(nn,".uniform1i(",ar,",",(Wn=Nt.link(Bn._texture||Bn.color[0]._texture))+".bind());"),Zt.exit(Wn,".unbind();");else if(35674===Wn||35675===Wn||35676===Wn)Qn=2,35675===Wn?Qn=3:35676===Wn&&(Qn=4),Zt(nn,".uniformMatrix",Qn,"fv(",ar,",false,",Bn=Nt.global.def("new Float32Array(["+Array.prototype.slice.call(Bn)+"])"),");");else{switch(Wn){case 5126:yn="1f";break;case 35664:yn="2f";break;case 35665:yn="3f";break;case 35666:yn="4f";break;case 35670:case 5124:yn="1i";break;case 35671:case 35667:yn="2i";break;case 35672:case 35668:yn="3i";break;case 35673:case 35669:yn="4i"}Zt(nn,".uniform",yn,"(",ar,",",y(Bn)?Array.prototype.slice.call(Bn):Bn,");")}continue}xn=Qn.append(Nt,Zt)}else{if(!kn(nt))continue;xn=Zt.def(on.uniforms,"[",et.id(Bn),"]")}switch(35678===Wn?Zt("if(",xn,"&&",xn,'._reglType==="framebuffer"){',xn,"=",xn,".color[0];","}"):35680===Wn&&Zt("if(",xn,"&&",xn,'._reglType==="framebufferCube"){',xn,"=",xn,".color[0];","}"),Bn=1,Wn){case 35678:case 35680:Wn=Zt.def(xn,"._texture"),Zt(nn,".uniform1i(",ar,",",Wn,".bind());"),Zt.exit(Wn,".unbind();");continue;case 5124:case 35670:yn="1i";break;case 35667:case 35671:yn="2i",Bn=2;break;case 35668:case 35672:yn="3i",Bn=3;break;case 35669:case 35673:yn="4i",Bn=4;break;case 5126:yn="1f";break;case 35664:yn="2f",Bn=2;break;case 35665:yn="3f",Bn=3;break;case 35666:yn="4f",Bn=4;break;case 35674:yn="Matrix2fv";break;case 35675:yn="Matrix3fv";break;case 35676:yn="Matrix4fv"}if("M"===yn.charAt(0)){Zt(nn,".uniform",yn,"(",ar,","),ar=Math.pow(Wn-35674+2,2);var yr=Nt.global.def("new Float32Array(",ar,")");Array.isArray(xn)?Zt("false,(",b(ar,function(gr){return yr+"["+gr+"]="+xn[gr]}),",",yr,")"):Zt("false,(Array.isArray(",xn,")||",xn," instanceof Float32Array)?",xn,":(",b(ar,function(gr){return yr+"["+gr+"]="+xn+"["+gr+"]"}),",",yr,")"),Zt(");")}else{if(1<Bn){Wn=[];var ur=[];for(Qn=0;Qn<Bn;++Qn)Array.isArray(xn)?ur.push(xn[Qn]):ur.push(Zt.def(xn+"["+Qn+"]")),Pn&&Wn.push(Zt.def());Pn&&Zt("if(!",Nt.batchId,"||",Wn.map(function(gr,br){return gr+"!=="+ur[br]}).join("||"),"){",Wn.map(function(gr,br){return gr+"="+ur[br]+";"}).join("")),Zt(nn,".uniform",yn,"(",ar,",",ur.join(","),");")}else Pn&&(Wn=Zt.def(),Zt("if(!",Nt.batchId,"||",Wn,"!==",xn,"){",Wn,"=",xn,";")),Zt(nn,".uniform",yn,"(",ar,",",xn,");");Pn&&Zt("}")}}}function Gn(Nt,Zt,un,Tn){function kn(pr){var Lr=Wn[pr];return Lr?Lr.append(Nt,Lr.contextDep&&Tn.contextDynamic||Lr.propDep?un:Zt):Zt.def(Bn,".",pr)}function Pn(){function pr(){un(nn,".drawElementsInstancedANGLE(",[ar,ur,gr,yr+"<<(("+gr+"-5121)>>1)",on],");")}function Lr(){un(nn,".drawArraysInstancedANGLE(",[ar,yr,ur,on],");")}Qn&&"null"!==Qn?br?pr():(un("if(",Qn,"){"),pr(),un("}else{"),Lr(),un("}")):Lr()}function yn(){function pr(){un(xn+".drawElements("+[ar,ur,gr,yr+"<<(("+gr+"-5121)>>1)"]+");")}function Lr(){un(xn+".drawArrays("+[ar,yr,ur]+");")}Qn&&"null"!==Qn?br?pr():(un("if(",Qn,"){"),pr(),un("}else{"),Lr(),un("}")):Lr()}var on,nn,pr,Lr,dn=Nt.shared,xn=dn.gl,Bn=dn.draw,Wn=Tn.draw,Qn=(Lr=Zt,(pr=Wn.elements)?((pr.contextDep&&Tn.contextDynamic||pr.propDep)&&(Lr=un),pr=pr.append(Nt,Lr),Wn.elementsActive&&Lr("if("+pr+")"+xn+".bindBuffer(34963,"+pr+".buffer.buffer);")):(pr=Lr.def(),Lr(pr,"=",Bn,".","elements",";","if(",pr,"){",xn,".bindBuffer(",34963,",",pr,".buffer.buffer);}","else if(",dn.vao,".currentVAO){",pr,"=",Nt.shared.elements+".getElements("+dn.vao,".currentVAO.elements);",Hn?"":"if("+pr+")"+xn+".bindBuffer(34963,"+pr+".buffer.buffer);","}")),pr),ar=kn("primitive"),yr=kn("offset"),ur=function(){var pr=Wn.count,Lr=Zt;return pr?((pr.contextDep&&Tn.contextDynamic||pr.propDep)&&(Lr=un),pr=pr.append(Nt,Lr)):pr=Lr.def(Bn,".","count"),pr}();if("number"==typeof ur){if(0===ur)return}else un("if(",ur,"){"),un.exit("}");fn&&(on=kn("instances"),nn=Nt.instancing);var gr=Qn+".type",br=Wn.elements&&ae(Wn.elements)&&!Wn.vaoActive;fn&&("number"!=typeof on||0<=on)?"string"==typeof on?(un("if(",on,">0){"),Pn(),un("}else if(",on,"<0){"),yn(),un("}")):Pn():yn()}function Nn(Nt,Zt,un,Tn,kn){return kn=(Zt=mn()).proc("body",kn),fn&&(Zt.instancing=kn.def(Zt.shared.extensions,".angle_instanced_arrays")),Nt(Zt,kn,un,Tn),Zt.compile().body}function ir(Nt,Zt,un,Tn){An(Nt,Zt),un.useVAO?un.drawVAO?Zt(Nt.shared.vao,".setVAO(",un.drawVAO.append(Nt,Zt),");"):Zt(Nt.shared.vao,".setVAO(",Nt.shared.vao,".targetVAO);"):(Zt(Nt.shared.vao,".setVAO(null);"),Dn(Nt,Zt,un,Tn.attributes,function(){return!0})),Vn(Nt,Zt,un,Tn.uniforms,function(){return!0},!1),Gn(Nt,Zt,Zt,un)}function $n(Nt,Zt,un,Tn){function kn(){return!0}Nt.batchId="a1",An(Nt,Zt),Dn(Nt,Zt,un,Tn.attributes,kn),Vn(Nt,Zt,un,Tn.uniforms,kn,!1),Gn(Nt,Zt,Zt,un)}function mr(Nt,Zt,un,Tn){function kn(Bn){return Bn.contextDep&&yn||Bn.propDep}function Pn(Bn){return!kn(Bn)}An(Nt,Zt);var yn=un.contextDep,on=Zt.def(),nn=Zt.def();Nt.shared.props=nn,Nt.batchId=on;var dn=Nt.scope(),xn=Nt.scope();Zt(dn.entry,"for(",on,"=0;",on,"<","a1",";++",on,"){",nn,"=","a0","[",on,"];",xn,"}",dn.exit),un.needsContext&&Sn(Nt,xn,un.context),un.needsFramebuffer&&hn(Nt,xn,un.framebuffer),pn(Nt,xn,un.state,kn),un.profile&&kn(un.profile)&&On(Nt,xn,un,!1,!0),Tn?(un.useVAO?un.drawVAO?kn(un.drawVAO)?xn(Nt.shared.vao,".setVAO(",un.drawVAO.append(Nt,xn),");"):dn(Nt.shared.vao,".setVAO(",un.drawVAO.append(Nt,dn),");"):dn(Nt.shared.vao,".setVAO(",Nt.shared.vao,".targetVAO);"):(dn(Nt.shared.vao,".setVAO(null);"),Dn(Nt,dn,un,Tn.attributes,Pn),Dn(Nt,xn,un,Tn.attributes,kn)),Vn(Nt,dn,un,Tn.uniforms,Pn,!1),Vn(Nt,xn,un,Tn.uniforms,kn,!0),Gn(Nt,dn,xn,un)):(Zt=Nt.global.def("{}"),Tn=un.shader.progVar.append(Nt,xn),nn=xn.def(Tn,".id"),dn=xn.def(Zt,"[",nn,"]"),xn(Nt.shared.gl,".useProgram(",Tn,".program);","if(!",dn,"){",dn,"=",Zt,"[",nn,"]=",Nt.link(function(Bn){return Nn($n,Nt,un,Bn,2)}),"(",Tn,");}",dn,".call(this,a0[",on,"],",on,");"))}function vr(Nt,Zt,un){var Tn=Zt.static[un];if(Tn&&function(xn){if("object"==typeof xn&&!y(xn)){for(var Bn=Object.keys(xn),Wn=0;Wn<Bn.length;++Wn)if(fe.isDynamic(xn[Bn[Wn]]))return!0;return!1}}(Tn)){var kn=Nt.global,Pn=Object.keys(Tn),yn=!1,on=!1,nn=!1,dn=Nt.global.def("{}");Pn.forEach(function(xn){var Bn=Tn[xn];if(fe.isDynamic(Bn))"function"==typeof Bn&&(Bn=Tn[xn]=fe.unbox(Bn)),xn=ne(Bn,null),yn=yn||xn.thisDep,nn=nn||xn.propDep,on=on||xn.contextDep;else{switch(kn(dn,".",xn,"="),typeof Bn){case"number":kn(Bn);break;case"string":kn('"',Bn,'"');break;case"object":Array.isArray(Bn)&&kn("[",Bn.join(),"]");break;default:kn(Nt.link(Bn))}kn(";")}}),Zt.dynamic[un]=new fe.DynamicVariable(4,{thisDep:yn,contextDep:on,propDep:nn,ref:dn,append:function(xn,Bn){Pn.forEach(function(Wn){var Qn=Tn[Wn];fe.isDynamic(Qn)&&(Qn=xn.invoke(Bn,Qn),Bn(dn,".",Wn,"=",Qn,";"))})}}),delete Zt.static[un]}}var or=At.Record,Or={add:32774,subtract:32778,"reverse subtract":32779};gt.ext_blend_minmax&&(Or.min=32775,Or.max=32776);var fn=gt.angle_instanced_arrays,gn=gt.webgl_draw_buffers,Hn=gt.oes_vertex_array_object,En={dirty:!0,profile:Ut.profile},Zn={},Kn=[],tr={},fr={};qt("dither",3024),qt("blend.enable",3042),an("blend.color","blendColor",[0,0,0,0]),an("blend.equation","blendEquationSeparate",[32774,32774]),an("blend.func","blendFuncSeparate",[1,0,1,0]),qt("depth.enable",2929,!0),an("depth.func","depthFunc",513),an("depth.range","depthRange",[0,1]),an("depth.mask","depthMask",!0),an("colorMask","colorMask",[!0,!0,!0,!0]),qt("cull.enable",2884),an("cull.face","cullFace",1029),an("frontFace","frontFace",2305),an("lineWidth","lineWidth",1),qt("polygonOffset.enable",32823),an("polygonOffset.offset","polygonOffset",[0,0]),qt("sample.alpha",32926),qt("sample.enable",32928),an("sample.coverage","sampleCoverage",[1,!1]),qt("stencil.enable",2960),an("stencil.mask","stencilMask",-1),an("stencil.func","stencilFunc",[519,0,-1]),an("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),an("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),qt("scissor.enable",3089),an("scissor.box","scissor",[0,0,We.drawingBufferWidth,We.drawingBufferHeight]),an("viewport","viewport",[0,0,We.drawingBufferWidth,We.drawingBufferHeight]);var Dr={gl:We,context:Pt,strings:et,next:Zn,current:En,draw:yt,elements:He,buffer:Ge,shader:Mt,attributes:At.state,vao:At,uniforms:xt,framebuffer:tt,extensions:gt,timer:Ct,isBufferArgs:N},cn={primTypes:Pe,compareFuncs:Ht,blendFuncs:Vt,blendEquations:Or,stencilOps:zt,glTypes:De,orientationType:Qe};gn&&(cn.backBuffer=[1029],cn.drawBuffer=b(ht.maxDrawbuffers,function(Nt){return 0===Nt?[0]:b(Nt,function(Zt){return 36064+Zt})}));var In=0;return{next:Zn,current:En,procs:function(){var Nt=mn(),Zt=Nt.proc("poll"),un=Nt.proc("refresh"),Tn=Nt.block();Zt(Tn),un(Tn);var kn,Pn=(nn=Nt.shared).gl,yn=nn.next,on=nn.current;Tn(on,".dirty=false;"),hn(Nt,Zt),hn(Nt,un,null,!0),fn&&(kn=Nt.link(fn)),gt.oes_vertex_array_object&&un(Nt.link(gt.oes_vertex_array_object),".bindVertexArrayOES(null);");var nn=un.def(nn.attributes),dn=un.def(0),xn=Nt.cond(dn,".buffer");xn.then(Pn,".enableVertexAttribArray(i);",Pn,".bindBuffer(",34962,",",dn,".buffer.buffer);",Pn,".vertexAttribPointer(i,",dn,".size,",dn,".type,",dn,".normalized,",dn,".stride,",dn,".offset);").else(Pn,".disableVertexAttribArray(i);",Pn,".vertexAttrib4f(i,",dn,".x,",dn,".y,",dn,".z,",dn,".w);",dn,".buffer=null;");var Bn=Nt.link(ht.maxAttributes,{stable:!0});return un("for(var i=0;i<",Bn,";++i){",dn,"=",nn,"[i];",xn,"}"),fn&&un("for(var i=0;i<",Bn,";++i){",kn,".vertexAttribDivisorANGLE(i,",nn,"[i].divisor);","}"),un(Nt.shared.vao,".currentVAO=null;",Nt.shared.vao,".setVAO(",Nt.shared.vao,".targetVAO);"),Object.keys(tr).forEach(function(Wn){var Qn=tr[Wn],ar=Tn.def(yn,".",Wn),yr=Nt.block();yr("if(",ar,"){",Pn,".enable(",Qn,")}else{",Pn,".disable(",Qn,")}",on,".",Wn,"=",ar,";"),un(yr),Zt("if(",ar,"!==",on,".",Wn,"){",yr,"}")}),Object.keys(fr).forEach(function(Wn){var Qn,ar,yr=fr[Wn],ur=En[Wn],gr=Nt.block();gr(Pn,".",yr,"("),y(ur)?(yr=ur.length,Qn=Nt.global.def(yn,".",Wn),ar=Nt.global.def(on,".",Wn),gr(b(yr,function(br){return Qn+"["+br+"]"}),");",b(yr,function(br){return ar+"["+br+"]="+Qn+"["+br+"];"}).join("")),Zt("if(",b(yr,function(br){return Qn+"["+br+"]!=="+ar+"["+br+"]"}).join("||"),"){",gr,"}")):(Qn=Tn.def(yn,".",Wn),ar=Tn.def(on,".",Wn),gr(Qn,");",on,".",Wn,"=",Qn,";"),Zt("if(",Qn,"!==",ar,"){",gr,"}")),un(gr)}),Nt.compile()}(),compile:function(Nt,Zt,un,Tn,kn){var Pn=mn();Pn.stats=Pn.link(kn),Object.keys(Zt.static).forEach(function(on){vr(Pn,Zt,on)}),Rt.forEach(function(on){vr(Pn,Nt,on)});var yn=Fn(Nt,Zt,un,Tn);return yn.shader.program&&(yn.shader.program.attributes.sort(function(on,nn){return on.name<nn.name?-1:1}),yn.shader.program.uniforms.sort(function(on,nn){return on.name<nn.name?-1:1})),function(on,nn){var dn=on.proc("draw",1);An(on,dn),Sn(on,dn,nn.context),hn(on,dn,nn.framebuffer),wn(on,dn,nn),pn(on,dn,nn.state),On(on,dn,nn,!1,!0);var xn=nn.shader.progVar.append(on,dn);if(dn(on.shared.gl,".useProgram(",xn,".program);"),nn.shader.program)ir(on,dn,nn,nn.shader.program);else{dn(on.shared.vao,".setVAO(null);");var Bn=on.global.def("{}"),Wn=dn.def(xn,".id"),Qn=dn.def(Bn,"[",Wn,"]");dn(on.cond(Qn).then(Qn,".call(this,a0);").else(Qn,"=",Bn,"[",Wn,"]=",on.link(function(ar){return Nn(ir,on,nn,ar,1)}),"(",xn,");",Qn,".call(this,a0);"))}0<Object.keys(nn.state).length&&dn(on.shared.current,".dirty=true;"),on.shared.vao&&dn(on.shared.vao,".setVAO(null);")}(Pn,yn),function lr(Nt,Zt){function un(on){var nn=Zt.shader[on];nn&&(nn=nn.append(Nt,Tn),isNaN(nn)?Tn.set(kn.shader,"."+on,nn):Tn.set(kn.shader,"."+on,Nt.link(nn,{stable:!0})))}var Tn=Nt.proc("scope",3);Nt.batchId="a2";var kn=Nt.shared,Pn=kn.current;if(Sn(Nt,Tn,Zt.context),Zt.framebuffer&&Zt.framebuffer.append(Nt,Tn),G(Object.keys(Zt.state)).forEach(function(on){var nn=Zt.state[on],dn=nn.append(Nt,Tn);y(dn)?dn.forEach(function(xn,Bn){isNaN(xn)?Tn.set(Nt.next[on],"["+Bn+"]",xn):Tn.set(Nt.next[on],"["+Bn+"]",Nt.link(xn,{stable:!0}))}):ae(nn)?Tn.set(kn.next,"."+on,Nt.link(dn,{stable:!0})):Tn.set(kn.next,"."+on,dn)}),On(Nt,Tn,Zt,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(on){var nn=Zt.draw[on];nn&&(nn=nn.append(Nt,Tn),isNaN(nn)?Tn.set(kn.draw,"."+on,nn):Tn.set(kn.draw,"."+on,Nt.link(nn),{stable:!0}))}),Object.keys(Zt.uniforms).forEach(function(on){var nn=Zt.uniforms[on].append(Nt,Tn);Array.isArray(nn)&&(nn="["+nn.map(function(dn){return isNaN(dn)?dn:Nt.link(dn,{stable:!0})})+"]"),Tn.set(kn.uniforms,"["+Nt.link(et.id(on),{stable:!0})+"]",nn)}),Object.keys(Zt.attributes).forEach(function(on){var nn=Zt.attributes[on].append(Nt,Tn),dn=Nt.scopeAttrib(on);Object.keys(new or).forEach(function(xn){Tn.set(dn,"."+xn,nn[xn])})}),Zt.scopeVAO){var yn=Zt.scopeVAO.append(Nt,Tn);isNaN(yn)?Tn.set(kn.vao,".targetVAO",yn):Tn.set(kn.vao,".targetVAO",Nt.link(yn,{stable:!0}))}un("vert"),un("frag"),0<Object.keys(Zt.state).length&&(Tn(Pn,".dirty=true;"),Tn.exit(Pn,".dirty=true;")),Tn("a1(",Nt.shared.context,",a0,",Nt.batchId,");")}(Pn,yn),function(on,nn){function dn(ur){return ur.contextDep&&Bn||ur.propDep}var xn=on.proc("batch",2);on.batchId="0",An(on,xn);var Bn=!1,Wn=!0;Object.keys(nn.context).forEach(function(ur){Bn=Bn||nn.context[ur].propDep}),Bn||(Sn(on,xn,nn.context),Wn=!1);var Qn=!1;if((ar=nn.framebuffer)?(ar.propDep?Bn=Qn=!0:ar.contextDep&&Bn&&(Qn=!0),Qn||hn(on,xn,ar)):hn(on,xn,null),nn.state.viewport&&nn.state.viewport.propDep&&(Bn=!0),wn(on,xn,nn),pn(on,xn,nn.state,function(ur){return!dn(ur)}),nn.profile&&dn(nn.profile)||On(on,xn,nn,!1,"a1"),nn.contextDep=Bn,nn.needsContext=Wn,nn.needsFramebuffer=Qn,(Wn=nn.shader.progVar).contextDep&&Bn||Wn.propDep)mr(on,xn,nn,null);else if(Wn=Wn.append(on,xn),xn(on.shared.gl,".useProgram(",Wn,".program);"),nn.shader.program)mr(on,xn,nn,nn.shader.program);else{xn(on.shared.vao,".setVAO(null);");var ar=on.global.def("{}"),yr=(Qn=xn.def(Wn,".id"),xn.def(ar,"[",Qn,"]"));xn(on.cond(yr).then(yr,".call(this,a0,a1);").else(yr,"=",ar,"[",Qn,"]=",on.link(function(ur){return Nn(mr,on,nn,ur,2)}),"(",Wn,");",yr,".call(this,a0,a1);"))}0<Object.keys(nn.state).length&&xn(on.shared.current,".dirty=true;"),on.shared.vao&&xn(on.shared.vao,".setVAO(null);")}(Pn,yn),X(Pn.compile(),{destroy:function(){yn.shader.program.destroy()}})}}}function $(We,et){for(var gt=0;gt<We.length;++gt)if(We[gt]===et)return gt;return-1}var X=function(We,et){for(var gt=Object.keys(et),ht=0;ht<gt.length;++ht)We[gt[ht]]=et[gt[ht]];return We},oe=0,fe={DynamicVariable:F,define:function(We,et){return new F(We,S(et+""))},isDynamic:function(We){return"function"==typeof We&&!We._reglType||We instanceof F},unbox:function We(et,gt){return"function"==typeof et?new F(0,et):"number"==typeof et||"boolean"==typeof et?new F(5,et):Array.isArray(et)?new F(6,et.map(function(ht,Ge){return We(ht,gt+"["+Ge+"]")})):et instanceof F?et:void 0},accessor:S},ue={next:"function"==typeof requestAnimationFrame?function(We){return requestAnimationFrame(We)}:function(We){return setTimeout(We,16)},cancel:"function"==typeof cancelAnimationFrame?function(We){return cancelAnimationFrame(We)}:clearTimeout},ge=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},we=l();we.zero=l();var xe=function(We){return We instanceof Uint8Array||We instanceof Uint16Array||We instanceof Uint32Array||We instanceof Int8Array||We instanceof Int16Array||We instanceof Int32Array||We instanceof Float32Array||We instanceof Float64Array||We instanceof Uint8ClampedArray},ye=function(We){return Object.keys(We).map(function(et){return We[et]})},_e={shape:function(We){for(var et=[];We.length;We=We[0])et.push(We.length);return et},flatten:function(We,et,gt,ht){var Ge=1;if(et.length)for(var He=0;He<et.length;++He)Ge*=et[He];else Ge=0;switch(gt=ht||we.allocType(gt,Ge),et.length){case 0:break;case 1:for(ht=et[0],et=0;et<ht;++et)gt[et]=We[et];break;case 2:for(ht=et[0],et=et[1],He=Ge=0;He<ht;++He)for(var ut=We[He],tt=0;tt<et;++tt)gt[Ge++]=ut[tt];break;case 3:i(We,et[0],et[1],et[2],gt,0);break;default:r(We,et,0,gt,0)}return gt}},Ie={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},De={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},be={dynamic:35048,stream:35040,static:35044},he=_e.flatten,ce=_e.shape,me=[];me[5120]=1,me[5122]=2,me[5124]=4,me[5121]=1,me[5123]=2,me[5125]=4,me[5126]=4;var Pe={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ae=new Float32Array(1),Ce=new Uint32Array(Ae.buffer),Oe=[9984,9986,9985,9987],Ne=[0,6409,6410,6407,6408],je={};je[6409]=je[6406]=je[6402]=1,je[34041]=je[6410]=2,je[6407]=je[35904]=3,je[6408]=je[35906]=4;var ve=d("HTMLCanvasElement"),Me=d("OffscreenCanvas"),Le=d("CanvasRenderingContext2D"),Ue=d("ImageBitmap"),ze=d("HTMLImageElement"),qe=d("HTMLVideoElement"),Ke=Object.keys(Ie).concat([ve,Me,Le,Ue,ze,qe]),it=[];it[5121]=1,it[5126]=4,it[36193]=2,it[5123]=2,it[5125]=4;var ft=[];ft[32854]=2,ft[32855]=2,ft[36194]=2,ft[34041]=4,ft[33776]=.5,ft[33777]=.5,ft[33778]=1,ft[33779]=1,ft[35986]=.5,ft[35987]=1,ft[34798]=1,ft[35840]=.5,ft[35841]=.25,ft[35842]=.5,ft[35843]=.25,ft[36196]=.5;var dt=[];dt[32854]=2,dt[32855]=2,dt[36194]=2,dt[33189]=2,dt[36168]=1,dt[34041]=4,dt[35907]=4,dt[34836]=16,dt[34842]=8,dt[34843]=6;var St=[];St[6408]=4,St[6407]=3;var Tt=[];Tt[5121]=1,Tt[5126]=4,Tt[36193]=2;var lt=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],ot=["x","y","z","w"],Rt="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Vt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ht={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},zt={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Qe={cw:2304,ccw:2305},nt=new W(!1,!1,!1,function(){});return function(We){function et(){if(0===$n.length)Qt&&Qt.update(),or=null;else{or=ue.next(et),Mt();for(var fn=$n.length-1;0<=fn;--fn){var gn=$n[fn];gn&&gn(Fn,null,0)}Ct.flush(),Qt&&Qt.update()}}function gt(){!or&&0<$n.length&&(or=ue.next(et))}function ht(){or&&(ue.cancel(et),or=null)}function Ge(fn){fn.preventDefault(),ht(),mr.forEach(function(gn){gn()})}function He(fn){Ct.getError(),Ut.restore(),An.restore(),hn.restore(),On.restore(),Dn.restore(),Vn.restore(),pn.restore(),Qt&&Qt.restore(),Gn.procs.refresh(),gt(),lr.forEach(function(gn){gn()})}function ut(fn){function gn(Nt,Zt){var un={},Tn={};return Object.keys(Nt).forEach(function(kn){var Pn=Nt[kn];if(fe.isDynamic(Pn))Tn[kn]=fe.unbox(Pn,kn);else{if(Zt&&Array.isArray(Pn))for(var yn=0;yn<Pn.length;++yn)if(fe.isDynamic(Pn[yn]))return void(Tn[kn]=fe.unbox(Pn,kn));un[kn]=Pn}}),{dynamic:Tn,static:un}}var Hn=gn(fn.context||{},!0),En=gn(fn.uniforms||{},!0),Zn=gn(fn.attributes||{},!1);fn=gn(function(Nt){function Zt(Tn){if(Tn in un){var kn=un[Tn];delete un[Tn],Object.keys(kn).forEach(function(Pn){un[Tn+"."+Pn]=kn[Pn]})}}var un=X({},Nt);return delete un.uniforms,delete un.attributes,delete un.context,delete un.vao,"stencil"in un&&un.stencil.op&&(un.stencil.opBack=un.stencil.opFront=un.stencil.op,delete un.stencil.op),Zt("blend"),Zt("depth"),Zt("cull"),Zt("stencil"),Zt("polygonOffset"),Zt("scissor"),Zt("sample"),"vao"in Nt&&(un.vao=Nt.vao),un}(fn),!1);var Kn={gpuTime:0,cpuTime:0,count:0},tr=Gn.compile(fn,Zn,En,Hn,Kn),fr=tr.draw,Dr=tr.batch,cn=tr.scope,In=[];return X(function(Nt,Zt){var un;if("function"==typeof Nt)return cn.call(this,null,Nt,0);if("function"==typeof Zt)if("number"==typeof Nt)for(un=0;un<Nt;++un)cn.call(this,null,Zt,un);else{if(!Array.isArray(Nt))return cn.call(this,Nt,Zt,0);for(un=0;un<Nt.length;++un)cn.call(this,Nt[un],Zt,un)}else if("number"==typeof Nt){if(0<Nt)return Dr.call(this,function(Tn){for(;In.length<Tn;)In.push(null);return In}(0|Nt),0|Nt)}else{if(!Array.isArray(Nt))return fr.call(this,Nt);if(Nt.length)return Dr.call(this,Nt,Nt.length)}},{stats:Kn,destroy:function(){tr.destroy()}})}function tt(fn,gn){var Hn=0;Gn.procs.poll();var En=gn.color;En&&(Ct.clearColor(+En[0]||0,+En[1]||0,+En[2]||0,+En[3]||0),Hn|=16384),"depth"in gn&&(Ct.clearDepth(+gn.depth),Hn|=256),"stencil"in gn&&(Ct.clearStencil(0|gn.stencil),Hn|=1024),Ct.clear(Hn)}function xt(fn){return $n.push(fn),gt(),{cancel:function(){var gn=$($n,fn);$n[gn]=function Hn(){var En=$($n,Hn);$n[En]=$n[$n.length-1],--$n.length,0>=$n.length&&ht()}}}}function At(){var fn=Nn.viewport,gn=Nn.scissor_box;fn[0]=fn[1]=gn[0]=gn[1]=0,Fn.viewportWidth=Fn.framebufferWidth=Fn.drawingBufferWidth=fn[2]=gn[2]=Ct.drawingBufferWidth,Fn.viewportHeight=Fn.framebufferHeight=Fn.drawingBufferHeight=fn[3]=gn[3]=Ct.drawingBufferHeight}function Mt(){Fn.tick+=1,Fn.time=Pt(),At(),Gn.procs.poll()}function yt(){On.refresh(),At(),Gn.procs.refresh(),Qt&&Qt.update()}function Pt(){return(ge()-sn)/1e3}if(!(We=function T(We){var et,gt,ht,Ge,He=We||{};We={};var ut=[],tt=[],xt=typeof window>"u"?1:window.devicePixelRatio,At=!1,Mt={},yt=function(Ct){},Pt=function(){};if("string"==typeof He?et=document.querySelector(He):"object"==typeof He&&("string"==typeof He.nodeName&&"function"==typeof He.appendChild&&"function"==typeof He.getBoundingClientRect?et=He:"function"==typeof He.drawArrays||"function"==typeof He.drawElements?ht=(Ge=He).canvas:("gl"in He?Ge=He.gl:"canvas"in He?ht=o(He.canvas):"container"in He&&(gt=o(He.container)),"attributes"in He&&(We=He.attributes),"extensions"in He&&(ut=k(He.extensions)),"optionalExtensions"in He&&(tt=k(He.optionalExtensions)),"onDone"in He&&(yt=He.onDone),"profile"in He&&(At=!!He.profile),"pixelRatio"in He&&(xt=+He.pixelRatio),"cachedCode"in He&&(Mt=He.cachedCode))),et&&("canvas"===et.nodeName.toLowerCase()?ht=et:gt=et),!Ge){if(!ht){if(!(et=function(Ct,Dt,Ut){function Bt(){var mn=window.innerWidth,Qt=window.innerHeight;Ct!==document.body&&(mn=(Qt=an.getBoundingClientRect()).right-Qt.left,Qt=Qt.bottom-Qt.top),an.width=Ut*mn,an.height=Ut*Qt}var qt,an=document.createElement("canvas");return X(an.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),Ct.appendChild(an),Ct===document.body&&(an.style.position="absolute",X(Ct.style,{margin:0,padding:0})),Ct!==document.body&&"function"==typeof ResizeObserver?(qt=new ResizeObserver(function(){setTimeout(Bt)})).observe(Ct):window.addEventListener("resize",Bt,!1),Bt(),{canvas:an,onDestroy:function(){qt?qt.disconnect():window.removeEventListener("resize",Bt),Ct.removeChild(an)}}}(gt||document.body,0,xt)))return null;ht=et.canvas,Pt=et.onDestroy}void 0===We.premultipliedAlpha&&(We.premultipliedAlpha=!0),Ge=function(Ct,Dt){function Ut(Bt){try{return Ct.getContext(Bt,Dt)}catch{return null}}return Ut("webgl")||Ut("experimental-webgl")||Ut("webgl-experimental")}(ht,We)}return Ge?{gl:Ge,canvas:ht,container:gt,extensions:ut,optionalExtensions:tt,pixelRatio:xt,profile:At,cachedCode:Mt,onDone:yt,onDestroy:Pt}:(Pt(),yt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}(We)))return null;var Ct=We.gl,Dt=Ct.getContextAttributes();Ct.isContextLost();var Ut=function(fn,gn){function Hn(tr){var fr;tr=tr.toLowerCase();try{fr=En[tr]=fn.getExtension(tr)}catch{}return!!fr}for(var En={},Zn=0;Zn<gn.extensions.length;++Zn){var Kn=gn.extensions[Zn];if(!Hn(Kn))return gn.onDestroy(),gn.onDone('"'+Kn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return gn.optionalExtensions.forEach(Hn),{extensions:En,restore:function(){Object.keys(En).forEach(function(tr){if(En[tr]&&!Hn(tr))throw Error("(regl): error restoring extension "+tr)})}}}(Ct,We);if(!Ut)return null;var fn,gn,Bt=(fn={"":0},gn=[""],{id:function(Hn){var En=fn[Hn];return En||(En=fn[Hn]=gn.length,gn.push(Hn),En)},str:function(Hn){return gn[Hn]}}),qt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},an=We.cachedCode||{},mn=Ut.extensions,Qt=function(fn,gn){function Hn(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function En(In,Nt,Zt){var un=tr.pop()||new Hn;un.startQueryIndex=In,un.endQueryIndex=Nt,un.sum=0,un.stats=Zt,fr.push(un)}if(!gn.ext_disjoint_timer_query)return null;var Zn=[],Kn=[],tr=[],fr=[],Dr=[],cn=[];return{beginQuery:function(In){var Nt=Zn.pop()||gn.ext_disjoint_timer_query.createQueryEXT();gn.ext_disjoint_timer_query.beginQueryEXT(35007,Nt),Kn.push(Nt),En(Kn.length-1,Kn.length,In)},endQuery:function(){gn.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:En,update:function(){var In,Nt;if(0!==(In=Kn.length)){cn.length=Math.max(cn.length,In+1),Dr.length=Math.max(Dr.length,In+1),Dr[0]=0;var Zt=cn[0]=0;for(Nt=In=0;Nt<Kn.length;++Nt){var un=Kn[Nt];gn.ext_disjoint_timer_query.getQueryObjectEXT(un,34919)?(Zt+=gn.ext_disjoint_timer_query.getQueryObjectEXT(un,34918),Zn.push(un)):Kn[In++]=un,Dr[Nt+1]=Zt,cn[Nt+1]=In}for(Kn.length=In,Nt=In=0;Nt<fr.length;++Nt){var Tn=(Zt=fr[Nt]).startQueryIndex;Zt.sum+=Dr[un=Zt.endQueryIndex]-Dr[Tn],(un=cn[un])===(Tn=cn[Tn])?(Zt.stats.gpuTime+=Zt.sum/1e6,tr.push(Zt)):(Zt.startQueryIndex=Tn,Zt.endQueryIndex=un,fr[In++]=Zt)}fr.length=In}},getNumPendingQueries:function(){return Kn.length},clear:function(){Zn.push.apply(Zn,Kn);for(var In=0;In<Zn.length;In++)gn.ext_disjoint_timer_query.deleteQueryEXT(Zn[In]);Kn.length=0,Zn.length=0},restore:function(){Kn.length=0,Zn.length=0}}}(0,mn),sn=ge(),Kt=Ct.drawingBufferWidth,qn=Ct.drawingBufferHeight,Fn={tick:0,time:0,viewportWidth:Kt,viewportHeight:qn,framebufferWidth:Kt,framebufferHeight:qn,drawingBufferWidth:Kt,drawingBufferHeight:qn,pixelRatio:We.pixelRatio},Sn=(Kt={elements:null,primitive:4,count:-1,offset:0,instances:-1},function(We,et){var gt=1;et.ext_texture_filter_anisotropic&&(gt=We.getParameter(34047));var ht=1,Ge=1;et.webgl_draw_buffers&&(ht=We.getParameter(34852),Ge=We.getParameter(36063));var He=!!et.oes_texture_float;if(He){He=We.createTexture(),We.bindTexture(3553,He),We.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var ut=We.createFramebuffer();if(We.bindFramebuffer(36160,ut),We.framebufferTexture2D(36160,36064,3553,He,0),We.bindTexture(3553,null),36053!==We.checkFramebufferStatus(36160))He=!1;else{We.viewport(0,0,1,1),We.clearColor(1,0,0,1),We.clear(16384);var tt=we.allocType(5126,4);We.readPixels(0,0,1,1,6408,5126,tt),We.getError()?He=!1:(We.deleteFramebuffer(ut),We.deleteTexture(He),He=1===tt[0]),we.freeType(tt)}}return tt=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(tt=We.createTexture(),ut=we.allocType(5121,36),We.activeTexture(33984),We.bindTexture(34067,tt),We.texImage2D(34069,0,6408,3,3,0,6408,5121,ut),we.freeType(ut),We.bindTexture(34067,null),We.deleteTexture(tt),tt=!We.getError()),{colorBits:[We.getParameter(3410),We.getParameter(3411),We.getParameter(3412),We.getParameter(3413)],depthBits:We.getParameter(3414),stencilBits:We.getParameter(3415),subpixelBits:We.getParameter(3408),extensions:Object.keys(et).filter(function(xt){return!!et[xt]}),maxAnisotropic:gt,maxDrawbuffers:ht,maxColorAttachments:Ge,pointSizeDims:We.getParameter(33901),lineWidthDims:We.getParameter(33902),maxViewportDims:We.getParameter(3386),maxCombinedTextureUnits:We.getParameter(35661),maxCubeMapSize:We.getParameter(34076),maxRenderbufferSize:We.getParameter(34024),maxTextureUnits:We.getParameter(34930),maxTextureSize:We.getParameter(3379),maxAttributes:We.getParameter(34921),maxVertexUniforms:We.getParameter(36347),maxVertexTextureUnits:We.getParameter(35660),maxVaryingVectors:We.getParameter(36348),maxFragmentUniforms:We.getParameter(36349),glsl:We.getParameter(35724),renderer:We.getParameter(7937),vendor:We.getParameter(7936),version:We.getParameter(7938),readFloat:He,npotTextureCube:tt}}(Ct,mn)),hn=function c(We,et,gt,ht){function Ge(yt){this.id=xt++,this.buffer=We.createBuffer(),this.type=yt,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,gt.profile&&(this.stats={size:0})}function He(yt,Pt,Ct){yt.byteLength=Pt.byteLength,We.bufferData(yt.type,Pt,Ct)}function ut(yt,Pt,Ct,Dt,Ut,Bt){if(yt.usage=Ct,Array.isArray(Pt)){if(yt.dtype=Dt||5126,0<Pt.length)if(Array.isArray(Pt[0])){Ut=ce(Pt);for(var qt=Dt=1;qt<Ut.length;++qt)Dt*=Ut[qt];yt.dimension=Dt,He(yt,Pt=he(Pt,Ut,yt.dtype),Ct),Bt?yt.persistentData=Pt:we.freeType(Pt)}else"number"==typeof Pt[0]?(yt.dimension=Ut,a(Ut=we.allocType(yt.dtype,Pt.length),Pt),He(yt,Ut,Ct),Bt?yt.persistentData=Ut:we.freeType(Ut)):xe(Pt[0])&&(yt.dimension=Pt[0].length,yt.dtype=Dt||n(Pt[0])||5126,He(yt,Pt=he(Pt,[Pt.length,Pt[0].length],yt.dtype),Ct),Bt?yt.persistentData=Pt:we.freeType(Pt))}else if(xe(Pt))yt.dtype=Dt||n(Pt),yt.dimension=Ut,He(yt,Pt,Ct),Bt&&(yt.persistentData=new Uint8Array(new Uint8Array(Pt.buffer)));else if(t(Pt)){var an=Pt.stride,mn=(qt=Pt.offset,0),Qt=0,sn=0,Kt=0;1===(Ut=Pt.shape).length?(mn=Ut[0],Qt=1,sn=an[0],Kt=0):2===Ut.length&&(mn=Ut[0],Qt=Ut[1],sn=an[0],Kt=an[1]),yt.dtype=Dt||n(Pt.data)||5126,yt.dimension=Qt,s(Ut=we.allocType(yt.dtype,mn*Qt),Pt.data,mn,Qt,sn,Kt,qt),He(yt,Ut,Ct),Bt?yt.persistentData=Ut:we.freeType(Ut)}else Pt instanceof ArrayBuffer&&(yt.dtype=5121,yt.dimension=Ut,He(yt,Pt,Ct),Bt&&(yt.persistentData=new Uint8Array(new Uint8Array(Pt))))}function tt(yt){et.bufferCount--,ht(yt),We.deleteBuffer(yt.buffer),yt.buffer=null,delete At[yt.id]}var xt=0,At={};Ge.prototype.bind=function(){We.bindBuffer(this.type,this.buffer)},Ge.prototype.destroy=function(){tt(this)};var Mt=[];return gt.profile&&(et.getTotalBufferSize=function(){var yt=0;return Object.keys(At).forEach(function(Pt){yt+=At[Pt].stats.size}),yt}),{create:function(yt,Pt,Ct,Dt){function Ut(qt){var an=35044,mn=null,Qt=0,sn=0,Kt=1;return Array.isArray(qt)||xe(qt)||t(qt)||qt instanceof ArrayBuffer?mn=qt:"number"==typeof qt?Qt=0|qt:qt&&("data"in qt&&(mn=qt.data),"usage"in qt&&(an=be[qt.usage]),"type"in qt&&(sn=De[qt.type]),"dimension"in qt&&(Kt=0|qt.dimension),"length"in qt&&(Qt=0|qt.length)),Bt.bind(),mn?ut(Bt,mn,an,sn,Kt,Dt):(Qt&&We.bufferData(Bt.type,Qt,an),Bt.dtype=sn||5121,Bt.usage=an,Bt.dimension=Kt,Bt.byteLength=Qt),gt.profile&&(Bt.stats.size=Bt.byteLength*me[Bt.dtype]),Ut}et.bufferCount++;var Bt=new Ge(Pt);return At[Bt.id]=Bt,Ct||Ut(yt),Ut._reglType="buffer",Ut._buffer=Bt,Ut.subdata=function(qt,an){var mn,Qt=0|(an||0);if(Bt.bind(),xe(qt)||qt instanceof ArrayBuffer)We.bufferSubData(Bt.type,Qt,qt);else if(Array.isArray(qt)){if(0<qt.length)if("number"==typeof qt[0]){var sn=we.allocType(Bt.dtype,qt.length);a(sn,qt),We.bufferSubData(Bt.type,Qt,sn),we.freeType(sn)}else(Array.isArray(qt[0])||xe(qt[0]))&&(mn=ce(qt),sn=he(qt,mn,Bt.dtype),We.bufferSubData(Bt.type,Qt,sn),we.freeType(sn))}else if(t(qt)){var Kt=qt.stride,qn=sn=0,Fn=0,Sn=0;1===(mn=qt.shape).length?(sn=mn[0],qn=1,Fn=Kt[0],Sn=0):2===mn.length&&(sn=mn[0],qn=mn[1],Fn=Kt[0],Sn=Kt[1]),mn=Array.isArray(qt.data)?Bt.dtype:n(qt.data),s(mn=we.allocType(mn,sn*qn),qt.data,sn,qn,Fn,Sn,qt.offset),We.bufferSubData(Bt.type,Qt,mn),we.freeType(mn)}return Ut},gt.profile&&(Ut.stats=Bt.stats),Ut.destroy=function(){tt(Bt)},Ut},createStream:function(yt,Pt){var Ct=Mt.pop();return Ct||(Ct=new Ge(yt)),Ct.bind(),ut(Ct,Pt,35040,0,1,!1),Ct},destroyStream:function(yt){Mt.push(yt)},clear:function(){ye(At).forEach(tt),Mt.forEach(tt)},getBuffer:function(yt){return yt&&yt._buffer instanceof Ge?yt._buffer:null},restore:function(){ye(At).forEach(function(yt){yt.buffer=We.createBuffer(),We.bindBuffer(yt.type,yt.buffer),We.bufferData(yt.type,yt.persistentData||yt.byteLength,yt.usage)})},_initBuffer:ut}}(Ct,qt,We,function(fn){return pn.destroyBuffer(fn)}),wn=function h(We,et,gt,ht){function Ge(yt){this.id=xt++,tt[this.id]=this,this.buffer=yt,this.primType=4,this.type=this.vertCount=0}function He(yt,Pt,Ct,Dt,Ut,Bt,qt){var an;if(yt.buffer.bind(),Pt?((an=qt)||xe(Pt)&&(!t(Pt)||xe(Pt.data))||(an=et.oes_element_index_uint?5125:5123),gt._initBuffer(yt.buffer,Pt,Ct,an,3)):(We.bufferData(34963,Bt,Ct),yt.buffer.dtype=an||5121,yt.buffer.usage=Ct,yt.buffer.dimension=3,yt.buffer.byteLength=Bt),an=qt,!qt){switch(yt.buffer.dtype){case 5121:case 5120:an=5121;break;case 5123:case 5122:an=5123;break;case 5125:case 5124:an=5125}yt.buffer.dtype=an}yt.type=an,0>(Pt=Ut)&&(Pt=yt.buffer.byteLength,5123===an?Pt>>=1:5125===an&&(Pt>>=2)),yt.vertCount=Pt,Pt=Dt,0>Dt&&(Pt=4,1===(Dt=yt.buffer.dimension)&&(Pt=0),2===Dt&&(Pt=1),3===Dt&&(Pt=4)),yt.primType=Pt}function ut(yt){ht.elementsCount--,delete tt[yt.id],yt.buffer.destroy(),yt.buffer=null}var tt={},xt=0,At={uint8:5121,uint16:5123};et.oes_element_index_uint&&(At.uint32=5125),Ge.prototype.bind=function(){this.buffer.bind()};var Mt=[];return{create:function(yt,Pt){function Ct(Bt){if(Bt)if("number"==typeof Bt)Dt(Bt),Ut.primType=4,Ut.vertCount=0|Bt,Ut.type=5121;else{var qt=null,an=35044,mn=-1,Qt=-1,sn=0,Kt=0;Array.isArray(Bt)||xe(Bt)||t(Bt)?qt=Bt:("data"in Bt&&(qt=Bt.data),"usage"in Bt&&(an=be[Bt.usage]),"primitive"in Bt&&(mn=Pe[Bt.primitive]),"count"in Bt&&(Qt=0|Bt.count),"type"in Bt&&(Kt=At[Bt.type]),"length"in Bt?sn=0|Bt.length:(sn=Qt,5123===Kt||5122===Kt?sn*=2:5125!==Kt&&5124!==Kt||(sn*=4))),He(Ut,qt,an,mn,Qt,sn,Kt)}else Dt(),Ut.primType=4,Ut.vertCount=0,Ut.type=5121;return Ct}var Dt=gt.create(null,34963,!0),Ut=new Ge(Dt._buffer);return ht.elementsCount++,Ct(yt),Ct._reglType="elements",Ct._elements=Ut,Ct.subdata=function(Bt,qt){return Dt.subdata(Bt,qt),Ct},Ct.destroy=function(){ut(Ut)},Ct},createStream:function(yt){var Pt=Mt.pop();return Pt||(Pt=new Ge(gt.create(null,34963,!0,!1)._buffer)),He(Pt,yt,35040,-1,-1,0,0),Pt},destroyStream:function(yt){Mt.push(yt)},getElements:function(yt){return"function"==typeof yt&&yt._elements instanceof Ge?yt._elements:null},clear:function(){ye(tt).forEach(ut)}}}(Ct,mn,hn,qt),pn=function P(We,et,gt,ht,Ge,He,ut){function tt(){this.id=++Mt,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var Ct=et.oes_vertex_array_object;this.vao=Ct?Ct.createVertexArrayOES():null,yt[this.id]=this,this.buffers=[]}var xt=gt.maxAttributes,At=Array(xt);for(gt=0;gt<xt;++gt)At[gt]=new E;var Mt=0,yt={},Pt={Record:E,scope:{},state:At,currentVAO:null,targetVAO:null,restore:et.oes_vertex_array_object?function(){et.oes_vertex_array_object&&ye(yt).forEach(function(Ct){Ct.refresh()})}:function(){},createVAO:function(Ct){function Dt(Bt){var qt;Array.isArray(Bt)?(qt=Bt,Ut.elements&&Ut.ownsElements&&Ut.elements.destroy(),Ut.elements=null,Ut.ownsElements=!1,Ut.offset=0,Ut.count=0,Ut.instances=-1,Ut.primitive=4):(Bt.elements?(qt=Bt.elements,Ut.ownsElements?("function"==typeof qt&&"elements"===qt._reglType?Ut.elements.destroy():Ut.elements(qt),Ut.ownsElements=!1):He.getElements(Bt.elements)?(Ut.elements=Bt.elements,Ut.ownsElements=!1):(Ut.elements=He.create(Bt.elements),Ut.ownsElements=!0)):(Ut.elements=null,Ut.ownsElements=!1),qt=Bt.attributes,Ut.offset=0,Ut.count=-1,Ut.instances=-1,Ut.primitive=4,Ut.elements&&(Ut.count=Ut.elements._elements.vertCount,Ut.primitive=Ut.elements._elements.primType),"offset"in Bt&&(Ut.offset=0|Bt.offset),"count"in Bt&&(Ut.count=0|Bt.count),"instances"in Bt&&(Ut.instances=0|Bt.instances),"primitive"in Bt&&(Ut.primitive=Pe[Bt.primitive])),Bt={};var an=Ut.attributes;an.length=qt.length;for(var mn=0;mn<qt.length;++mn){var Qt,sn=qt[mn],Kt=an[mn]=new E,qn=sn.data||sn;Array.isArray(qn)||xe(qn)||t(qn)?(Ut.buffers[mn]&&(Qt=Ut.buffers[mn],xe(qn)&&Qt._buffer.byteLength>=qn.byteLength?Qt.subdata(qn):(Qt.destroy(),Ut.buffers[mn]=null)),Ut.buffers[mn]||(Qt=Ut.buffers[mn]=Ge.create(sn,34962,!1,!0)),Kt.buffer=Ge.getBuffer(Qt),Kt.size=0|Kt.buffer.dimension,Kt.normalized=!1,Kt.type=Kt.buffer.dtype,Kt.offset=0,Kt.stride=0,Kt.divisor=0,Kt.state=1,Bt[mn]=1):Ge.getBuffer(sn)?(Kt.buffer=Ge.getBuffer(sn),Kt.size=0|Kt.buffer.dimension,Kt.normalized=!1,Kt.type=Kt.buffer.dtype,Kt.offset=0,Kt.stride=0,Kt.divisor=0,Kt.state=1):Ge.getBuffer(sn.buffer)?(Kt.buffer=Ge.getBuffer(sn.buffer),Kt.size=0|(+sn.size||Kt.buffer.dimension),Kt.normalized=!!sn.normalized||!1,Kt.type="type"in sn?De[sn.type]:Kt.buffer.dtype,Kt.offset=0|(sn.offset||0),Kt.stride=0|(sn.stride||0),Kt.divisor=0|(sn.divisor||0),Kt.state=1):"x"in sn&&(Kt.x=+sn.x||0,Kt.y=+sn.y||0,Kt.z=+sn.z||0,Kt.w=+sn.w||0,Kt.state=2)}for(Qt=0;Qt<Ut.buffers.length;++Qt)!Bt[Qt]&&Ut.buffers[Qt]&&(Ut.buffers[Qt].destroy(),Ut.buffers[Qt]=null);return Ut.refresh(),Dt}var Ut=new tt;return ht.vaoCount+=1,Dt.destroy=function(){for(var Bt=0;Bt<Ut.buffers.length;++Bt)Ut.buffers[Bt]&&Ut.buffers[Bt].destroy();Ut.buffers.length=0,Ut.ownsElements&&(Ut.elements.destroy(),Ut.elements=null,Ut.ownsElements=!1),Ut.destroy()},Dt._vao=Ut,Dt._reglType="vao",Dt(Ct)},getVAO:function(Ct){return"function"==typeof Ct&&Ct._vao?Ct._vao:null},destroyBuffer:function(Ct){for(var Dt=0;Dt<At.length;++Dt){var Ut=At[Dt];Ut.buffer===Ct&&(We.disableVertexAttribArray(Dt),Ut.buffer=null)}},setVAO:et.oes_vertex_array_object?function(Ct){Ct!==Pt.currentVAO&&(et.oes_vertex_array_object.bindVertexArrayOES(Ct?Ct.vao:null),Pt.currentVAO=Ct)}:function(Ct){if(Ct!==Pt.currentVAO){if(Ct)Ct.bindAttrs();else{for(var Dt=et.angle_instanced_arrays,Ut=0;Ut<At.length;++Ut){var Bt=At[Ut];Bt.buffer?(We.enableVertexAttribArray(Ut),Bt.buffer.bind(),We.vertexAttribPointer(Ut,Bt.size,Bt.type,Bt.normalized,Bt.stride,Bt.offfset),Dt&&Bt.divisor&&Dt.vertexAttribDivisorANGLE(Ut,Bt.divisor)):(We.disableVertexAttribArray(Ut),We.vertexAttrib4f(Ut,Bt.x,Bt.y,Bt.z,Bt.w))}We.bindBuffer(34963,ut.elements?ut.elements.buffer.buffer:null)}Pt.currentVAO=Ct}},clear:et.oes_vertex_array_object?function(){ye(yt).forEach(function(Ct){Ct.destroy()})}:function(){}};return tt.prototype.bindAttrs=function(){for(var Ct=et.angle_instanced_arrays,Dt=this.attributes,Ut=0;Ut<Dt.length;++Ut){var Bt=Dt[Ut];Bt.buffer?(We.enableVertexAttribArray(Ut),We.bindBuffer(34962,Bt.buffer.buffer),We.vertexAttribPointer(Ut,Bt.size,Bt.type,Bt.normalized,Bt.stride,Bt.offset),Ct&&Bt.divisor&&Ct.vertexAttribDivisorANGLE(Ut,Bt.divisor)):(We.disableVertexAttribArray(Ut),We.vertexAttrib4f(Ut,Bt.x,Bt.y,Bt.z,Bt.w))}for(Ct=Dt.length;Ct<xt;++Ct)We.disableVertexAttribArray(Ct);(Ct=He.getElements(this.elements))?We.bindBuffer(34963,Ct.buffer.buffer):We.bindBuffer(34963,null)},tt.prototype.refresh=function(){var Ct=et.oes_vertex_array_object;Ct&&(Ct.bindVertexArrayOES(this.vao),this.bindAttrs(),Pt.currentVAO=null,Ct.bindVertexArrayOES(null))},tt.prototype.destroy=function(){if(this.vao){var Ct=et.oes_vertex_array_object;this===Pt.currentVAO&&(Pt.currentVAO=null,Ct.bindVertexArrayOES(null)),Ct.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),yt[this.id]&&(delete yt[this.id],--ht.vaoCount)},Pt}(Ct,mn,Sn,qt,hn,wn,Kt),An=function L(We,et,gt,ht){function Ge(Dt,Ut,Bt,qt){this.name=Dt,this.id=Ut,this.location=Bt,this.info=qt}function He(Dt,Ut){for(var Bt=0;Bt<Dt.length;++Bt)if(Dt[Bt].id===Ut.id)return void(Dt[Bt].location=Ut.location);Dt.push(Ut)}function ut(Dt,Ut,Bt){if(!(an=(Bt=35632===Dt?At:Mt)[Ut])){var qt=et.str(Ut),an=We.createShader(Dt);We.shaderSource(an,qt),We.compileShader(an),Bt[Ut]=an}return an}function tt(Dt,Ut){this.id=Ct++,this.fragId=Dt,this.vertId=Ut,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,ht.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function xt(Dt,Ut,Bt){var qt;qt=ut(35632,Dt.fragId);var an=ut(35633,Dt.vertId);if(Ut=Dt.program=We.createProgram(),We.attachShader(Ut,qt),We.attachShader(Ut,an),Bt)for(qt=0;qt<Bt.length;++qt)We.bindAttribLocation(Ut,(an=Bt[qt])[0],an[1]);We.linkProgram(Ut),an=We.getProgramParameter(Ut,35718),ht.profile&&(Dt.stats.uniformsCount=an);var mn=Dt.uniforms;for(qt=0;qt<an;++qt)if(Bt=We.getActiveUniform(Ut,qt))if(1<Bt.size)for(var Qt=0;Qt<Bt.size;++Qt){var sn=Bt.name.replace("[0]","["+Qt+"]");He(mn,new Ge(sn,et.id(sn),We.getUniformLocation(Ut,sn),Bt))}else He(mn,new Ge(Bt.name,et.id(Bt.name),We.getUniformLocation(Ut,Bt.name),Bt));for(an=We.getProgramParameter(Ut,35721),ht.profile&&(Dt.stats.attributesCount=an),Dt=Dt.attributes,qt=0;qt<an;++qt)(Bt=We.getActiveAttrib(Ut,qt))&&He(Dt,new Ge(Bt.name,et.id(Bt.name),We.getAttribLocation(Ut,Bt.name),Bt))}var At={},Mt={},yt={},Pt=[],Ct=0;return ht.profile&&(gt.getMaxUniformsCount=function(){var Dt=0;return Pt.forEach(function(Ut){Ut.stats.uniformsCount>Dt&&(Dt=Ut.stats.uniformsCount)}),Dt},gt.getMaxAttributesCount=function(){var Dt=0;return Pt.forEach(function(Ut){Ut.stats.attributesCount>Dt&&(Dt=Ut.stats.attributesCount)}),Dt}),{clear:function(){var Dt=We.deleteShader.bind(We);ye(At).forEach(Dt),At={},ye(Mt).forEach(Dt),Mt={},Pt.forEach(function(Ut){We.deleteProgram(Ut.program)}),Pt.length=0,yt={},gt.shaderCount=0},program:function(Dt,Ut,Bt,qt){var an=yt[Ut];an||(an=yt[Ut]={});var mn=an[Dt];if(mn&&(mn.refCount++,!qt))return mn;var Qt=new tt(Ut,Dt);return gt.shaderCount++,xt(Qt,Bt,qt),mn||(an[Dt]=Qt),Pt.push(Qt),X(Qt,{destroy:function(){if(Qt.refCount--,0>=Qt.refCount){We.deleteProgram(Qt.program);var sn=Pt.indexOf(Qt);Pt.splice(sn,1),gt.shaderCount--}0>=an[Qt.vertId].refCount&&(We.deleteShader(Mt[Qt.vertId]),delete Mt[Qt.vertId],delete yt[Qt.fragId][Qt.vertId]),Object.keys(yt[Qt.fragId]).length||(We.deleteShader(At[Qt.fragId]),delete At[Qt.fragId],delete yt[Qt.fragId])}})},restore:function(){At={},Mt={};for(var Dt=0;Dt<Pt.length;++Dt)xt(Pt[Dt],null,Pt[Dt].attributes.map(function(Ut){return[Ut.location,Ut.name]}))},shader:ut,frag:-1,vert:-1}}(Ct,Bt,qt,We),On=function C(We,et,gt,ht,Ge,He,ut){function tt(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function xt(cn,In){cn.internalformat=In.internalformat,cn.format=In.format,cn.type=In.type,cn.compressed=In.compressed,cn.premultiplyAlpha=In.premultiplyAlpha,cn.flipY=In.flipY,cn.unpackAlignment=In.unpackAlignment,cn.colorSpace=In.colorSpace,cn.width=In.width,cn.height=In.height,cn.channels=In.channels}function At(cn,In){if("object"==typeof In&&In){"premultiplyAlpha"in In&&(cn.premultiplyAlpha=In.premultiplyAlpha),"flipY"in In&&(cn.flipY=In.flipY),"alignment"in In&&(cn.unpackAlignment=In.alignment),"colorSpace"in In&&(cn.colorSpace=Gn[In.colorSpace]),"type"in In&&(cn.type=Nn[In.type]);var Nt=cn.width,Zt=cn.height,un=cn.channels,Tn=!1;"shape"in In?(Nt=In.shape[0],Zt=In.shape[1],3===In.shape.length&&(un=In.shape[2],Tn=!0)):("radius"in In&&(Nt=Zt=In.radius),"width"in In&&(Nt=In.width),"height"in In&&(Zt=In.height),"channels"in In&&(un=In.channels,Tn=!0)),cn.width=0|Nt,cn.height=0|Zt,cn.channels=0|un,Nt=!1,"format"in In&&(Zt=cn.internalformat=ir[Nt=In.format],cn.format=Hn[Zt],Nt in Nn&&!("type"in In)&&(cn.type=Nn[Nt]),Nt in $n&&(cn.compressed=!0),Nt=!0),!Tn&&Nt?cn.channels=je[cn.format]:Tn&&!Nt&&cn.channels!==Ne[cn.format]&&(cn.format=cn.internalformat=Ne[cn.channels])}}function Mt(cn){We.pixelStorei(37440,cn.flipY),We.pixelStorei(37441,cn.premultiplyAlpha),We.pixelStorei(37443,cn.colorSpace),We.pixelStorei(3317,cn.unpackAlignment)}function yt(){tt.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Pt(cn,In){var Nt=null;if(v(In)?Nt=In:In&&(At(cn,In),"x"in In&&(cn.xOffset=0|In.x),"y"in In&&(cn.yOffset=0|In.y),v(In.data)&&(Nt=In.data)),In.copy){var Zt=Ge.viewportWidth,un=Ge.viewportHeight;cn.width=cn.width||Zt-cn.xOffset,cn.height=cn.height||un-cn.yOffset,cn.needsCopy=!0}else if(Nt){if(xe(Nt))cn.channels=cn.channels||4,cn.data=Nt,"type"in In||5121!==cn.type||(cn.type=0|Ie[Object.prototype.toString.call(Nt)]);else if(m(Nt)){switch(cn.channels=cn.channels||4,un=(Zt=Nt).length,cn.type){case 5121:case 5123:case 5125:case 5126:(un=we.allocType(cn.type,un)).set(Zt),cn.data=un;break;case 36193:cn.data=u(Zt)}cn.alignment=1,cn.needsFree=!0}else if(t(Nt)){Zt=Nt.data,Array.isArray(Zt)||5121!==cn.type||(cn.type=0|Ie[Object.prototype.toString.call(Zt)]);var Tn,kn,Pn,yn,on=Nt.stride;3===(un=Nt.shape).length?(Pn=un[2],yn=on[2]):yn=Pn=1,Tn=un[0],kn=un[1],un=on[0],on=on[1],cn.alignment=1,cn.width=Tn,cn.height=kn,cn.channels=Pn,cn.format=cn.internalformat=Ne[Pn],cn.needsFree=!0,Tn=yn,Nt=Nt.offset;for(var nn=we.allocType(36193===cn.type?5126:cn.type,(Pn=cn.width)*(yn=cn.height)*(kn=cn.channels)),dn=0,xn=0;xn<yn;++xn)for(var Bn=0;Bn<Pn;++Bn)for(var Wn=0;Wn<kn;++Wn)nn[dn++]=Zt[un*Bn+on*xn+Tn*Wn+Nt];_(cn,nn)}else if(x(Nt)===ve||x(Nt)===Me||x(Nt)===Le)cn.element=x(Nt)===ve||x(Nt)===Me?Nt:Nt.canvas,cn.width=cn.element.width,cn.height=cn.element.height,cn.channels=4;else if(x(Nt)===Ue)cn.element=Nt,cn.width=Nt.width,cn.height=Nt.height,cn.channels=4;else if(x(Nt)===ze)cn.element=Nt,cn.width=Nt.naturalWidth,cn.height=Nt.naturalHeight,cn.channels=4;else if(x(Nt)===qe)cn.element=Nt,cn.width=Nt.videoWidth,cn.height=Nt.videoHeight,cn.channels=4;else if(g(Nt)){for(Zt=cn.width||Nt[0].length,un=cn.height||Nt.length,on=cn.channels,on=y(Nt[0][0])?on||Nt[0][0].length:on||1,Tn=_e.shape(Nt),Pn=1,yn=0;yn<Tn.length;++yn)Pn*=Tn[yn];Pn=we.allocType(36193===cn.type?5126:cn.type,Pn),_e.flatten(Nt,Tn,"",Pn),_(cn,Pn),cn.alignment=1,cn.width=Zt,cn.height=un,cn.channels=on,cn.format=cn.internalformat=Ne[on],cn.needsFree=!0}}else cn.width=cn.width||1,cn.height=cn.height||1,cn.channels=cn.channels||4}function Ct(cn,In,Nt,Zt,un){var Tn=cn.element,kn=cn.data,Pn=cn.internalformat,yn=cn.format,on=cn.type,nn=cn.width,dn=cn.height;Mt(cn),Tn?We.texSubImage2D(In,un,Nt,Zt,yn,on,Tn):cn.compressed?We.compressedTexSubImage2D(In,un,Nt,Zt,Pn,nn,dn,kn):cn.needsCopy?(ht(),We.copyTexSubImage2D(In,un,Nt,Zt,cn.xOffset,cn.yOffset,nn,dn)):We.texSubImage2D(In,un,Nt,Zt,nn,dn,yn,on,kn)}function Dt(){return En.pop()||new yt}function Ut(cn){cn.needsFree&&we.freeType(cn.data),yt.call(cn),En.push(cn)}function Bt(){tt.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function qt(cn,In,Nt){var Zt=cn.images[0]=Dt();cn.mipmask=1,Zt.width=cn.width=In,Zt.height=cn.height=Nt,Zt.channels=cn.channels=4}function an(cn,In){var Nt=null;if(v(In))xt(Nt=cn.images[0]=Dt(),cn),Pt(Nt,In),cn.mipmask=1;else if(At(cn,In),Array.isArray(In.mipmap))for(var Zt=In.mipmap,un=0;un<Zt.length;++un)xt(Nt=cn.images[un]=Dt(),cn),Nt.width>>=un,Nt.height>>=un,Pt(Nt,Zt[un]),cn.mipmask|=1<<un;else xt(Nt=cn.images[0]=Dt(),cn),Pt(Nt,In),cn.mipmask=1;xt(cn,cn.images[0])}function mn(cn,In){for(var Nt=cn.images,Zt=0;Zt<Nt.length&&Nt[Zt];++Zt){var un=Nt[Zt],Tn=In,kn=Zt,Pn=un.element,yn=un.data,on=un.internalformat,nn=un.format,dn=un.type,xn=un.width,Bn=un.height;Mt(un),Pn?We.texImage2D(Tn,kn,nn,nn,dn,Pn):un.compressed?We.compressedTexImage2D(Tn,kn,on,xn,Bn,0,yn):un.needsCopy?(ht(),We.copyTexImage2D(Tn,kn,nn,un.xOffset,un.yOffset,xn,Bn,0)):We.texImage2D(Tn,kn,nn,xn,Bn,0,nn,dn,yn||null)}}function Qt(){var cn=Zn.pop()||new Bt;tt.call(cn);for(var In=cn.mipmask=0;16>In;++In)cn.images[In]=null;return cn}function sn(cn){for(var In=cn.images,Nt=0;Nt<In.length;++Nt)In[Nt]&&Ut(In[Nt]),In[Nt]=null;Zn.push(cn)}function Kt(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function qn(cn,In){"min"in In&&(cn.minFilter=Vn[In.min],0<=Oe.indexOf(cn.minFilter)&&!("faces"in In)&&(cn.genMipmaps=!0)),"mag"in In&&(cn.magFilter=Dn[In.mag]);var Nt=cn.wrapS,Zt=cn.wrapT;if("wrap"in In){var un=In.wrap;"string"==typeof un?Nt=Zt=On[un]:Array.isArray(un)&&(Nt=On[un[0]],Zt=On[un[1]])}else"wrapS"in In&&(Nt=On[In.wrapS]),"wrapT"in In&&(Zt=On[In.wrapT]);if(cn.wrapS=Nt,cn.wrapT=Zt,"anisotropic"in In&&(cn.anisotropic=In.anisotropic),"mipmap"in In){switch(Nt=!1,typeof In.mipmap){case"string":cn.mipmapHint=An[In.mipmap],Nt=cn.genMipmaps=!0;break;case"boolean":Nt=cn.genMipmaps=In.mipmap;break;case"object":cn.genMipmaps=!1,Nt=!0}!Nt||"min"in In||(cn.minFilter=9984)}}function Fn(cn,In){We.texParameteri(In,10241,cn.minFilter),We.texParameteri(In,10240,cn.magFilter),We.texParameteri(In,10242,cn.wrapS),We.texParameteri(In,10243,cn.wrapT),et.ext_texture_filter_anisotropic&&We.texParameteri(In,34046,cn.anisotropic),cn.genMipmaps&&(We.hint(33170,cn.mipmapHint),We.generateMipmap(In))}function Sn(cn){tt.call(this),this.mipmask=0,this.internalformat=6408,this.id=Kn++,this.refCount=1,this.target=cn,this.texture=We.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Kt,ut.profile&&(this.stats={size:0})}function hn(cn){We.activeTexture(33984),We.bindTexture(cn.target,cn.texture)}function wn(){var cn=Dr[0];cn?We.bindTexture(cn.target,cn.texture):We.bindTexture(3553,null)}function pn(cn){var In=cn.texture,Nt=cn.unit,Zt=cn.target;0<=Nt&&(We.activeTexture(33984+Nt),We.bindTexture(Zt,null),Dr[Nt]=null),We.deleteTexture(In),cn.texture=null,cn.params=null,cn.pixels=null,cn.refCount=0,delete tr[cn.id],He.textureCount--}var An={"don't care":4352,"dont care":4352,nice:4354,fast:4353},On={repeat:10497,clamp:33071,mirror:33648},Dn={nearest:9728,linear:9729},Vn=X({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Dn),Gn={none:0,browser:37444},Nn={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},ir={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},$n={};et.ext_srgb&&(ir.srgb=35904,ir.srgba=35906),et.oes_texture_float&&(Nn.float32=Nn.float=5126),et.oes_texture_half_float&&(Nn.float16=Nn["half float"]=36193),et.webgl_depth_texture&&(X(ir,{depth:6402,"depth stencil":34041}),X(Nn,{uint16:5123,uint32:5125,"depth stencil":34042})),et.webgl_compressed_texture_s3tc&&X($n,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),et.webgl_compressed_texture_atc&&X($n,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),et.webgl_compressed_texture_pvrtc&&X($n,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),et.webgl_compressed_texture_etc1&&($n["rgb etc1"]=36196);var mr=Array.prototype.slice.call(We.getParameter(34467));Object.keys($n).forEach(function(cn){var In=$n[cn];0<=mr.indexOf(In)&&(ir[cn]=In)});var lr=Object.keys(ir);gt.textureFormats=lr;var vr=[];Object.keys(ir).forEach(function(cn){vr[ir[cn]]=cn});var or=[];Object.keys(Nn).forEach(function(cn){or[Nn[cn]]=cn});var Or=[];Object.keys(Dn).forEach(function(cn){Or[Dn[cn]]=cn});var fn=[];Object.keys(Vn).forEach(function(cn){fn[Vn[cn]]=cn});var gn=[];Object.keys(On).forEach(function(cn){gn[On[cn]]=cn});var Hn=lr.reduce(function(cn,In){var Nt=ir[In];return cn[Nt]=6409===Nt||6406===Nt||6409===Nt||6410===Nt||6402===Nt||34041===Nt||et.ext_srgb&&(35904===Nt||35906===Nt)?Nt:32855===Nt||0<=In.indexOf("rgba")?6408:6407,cn},{}),En=[],Zn=[],Kn=0,tr={},fr=gt.maxTextureUnits,Dr=Array(fr).map(function(){return null});return X(Sn.prototype,{bind:function(){this.bindCount+=1;var cn=this.unit;if(0>cn){for(var In=0;In<fr;++In){var Nt=Dr[In];if(Nt){if(0<Nt.bindCount)continue;Nt.unit=-1}Dr[In]=this,cn=In;break}ut.profile&&He.maxTextureUnits<cn+1&&(He.maxTextureUnits=cn+1),this.unit=cn,We.activeTexture(33984+cn),We.bindTexture(this.target,this.texture)}return cn},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&pn(this)}}),ut.profile&&(He.getTotalTextureSize=function(){var cn=0;return Object.keys(tr).forEach(function(In){cn+=tr[In].stats.size}),cn}),{create2D:function(cn,In){function Nt(un,Tn){var kn=Zt.texInfo;Kt.call(kn);var Pn=Qt();return"number"==typeof un?qt(Pn,0|un,"number"==typeof Tn?0|Tn:0|un):un?(qn(kn,un),an(Pn,un)):qt(Pn,1,1),kn.genMipmaps&&(Pn.mipmask=(Pn.width<<1)-1),Zt.mipmask=Pn.mipmask,xt(Zt,Pn),Zt.internalformat=Pn.internalformat,Nt.width=Pn.width,Nt.height=Pn.height,hn(Zt),mn(Pn,3553),Fn(kn,3553),wn(),sn(Pn),ut.profile&&(Zt.stats.size=f(Zt.internalformat,Zt.type,Pn.width,Pn.height,kn.genMipmaps,!1)),Nt.format=vr[Zt.internalformat],Nt.type=or[Zt.type],Nt.mag=Or[kn.magFilter],Nt.min=fn[kn.minFilter],Nt.wrapS=gn[kn.wrapS],Nt.wrapT=gn[kn.wrapT],Nt}var Zt=new Sn(3553);return tr[Zt.id]=Zt,He.textureCount++,Nt(cn,In),Nt.subimage=function(un,Tn,kn,Pn){Tn|=0,kn|=0,Pn|=0;var yn=Dt();return xt(yn,Zt),yn.width=0,yn.height=0,Pt(yn,un),yn.width=yn.width||(Zt.width>>Pn)-Tn,yn.height=yn.height||(Zt.height>>Pn)-kn,hn(Zt),Ct(yn,3553,Tn,kn,Pn),wn(),Ut(yn),Nt},Nt.resize=function(un,Tn){var kn=0|un,Pn=0|Tn||kn;if(kn===Zt.width&&Pn===Zt.height)return Nt;Nt.width=Zt.width=kn,Nt.height=Zt.height=Pn,hn(Zt);for(var yn=0;Zt.mipmask>>yn;++yn){var on=kn>>yn,nn=Pn>>yn;if(!on||!nn)break;We.texImage2D(3553,yn,Zt.format,on,nn,0,Zt.format,Zt.type,null)}return wn(),ut.profile&&(Zt.stats.size=f(Zt.internalformat,Zt.type,kn,Pn,!1,!1)),Nt},Nt._reglType="texture2d",Nt._texture=Zt,ut.profile&&(Nt.stats=Zt.stats),Nt.destroy=function(){Zt.decRef()},Nt},createCube:function(cn,In,Nt,Zt,un,Tn){function kn(on,nn,dn,xn,Bn,Wn){var Qn,ar=Pn.texInfo;for(Kt.call(ar),Qn=0;6>Qn;++Qn)yn[Qn]=Qt();if("number"!=typeof on&&on){if("object"==typeof on)if(nn)an(yn[0],on),an(yn[1],nn),an(yn[2],dn),an(yn[3],xn),an(yn[4],Bn),an(yn[5],Wn);else if(qn(ar,on),At(Pn,on),"faces"in on)for(on=on.faces,Qn=0;6>Qn;++Qn)xt(yn[Qn],Pn),an(yn[Qn],on[Qn]);else for(Qn=0;6>Qn;++Qn)an(yn[Qn],on)}else for(on=0|on||1,Qn=0;6>Qn;++Qn)qt(yn[Qn],on,on);for(xt(Pn,yn[0]),Pn.mipmask=ar.genMipmaps?(yn[0].width<<1)-1:yn[0].mipmask,Pn.internalformat=yn[0].internalformat,kn.width=yn[0].width,kn.height=yn[0].height,hn(Pn),Qn=0;6>Qn;++Qn)mn(yn[Qn],34069+Qn);for(Fn(ar,34067),wn(),ut.profile&&(Pn.stats.size=f(Pn.internalformat,Pn.type,kn.width,kn.height,ar.genMipmaps,!0)),kn.format=vr[Pn.internalformat],kn.type=or[Pn.type],kn.mag=Or[ar.magFilter],kn.min=fn[ar.minFilter],kn.wrapS=gn[ar.wrapS],kn.wrapT=gn[ar.wrapT],Qn=0;6>Qn;++Qn)sn(yn[Qn]);return kn}var Pn=new Sn(34067);tr[Pn.id]=Pn,He.cubeCount++;var yn=Array(6);return kn(cn,In,Nt,Zt,un,Tn),kn.subimage=function(on,nn,dn,xn,Bn){dn|=0,xn|=0,Bn|=0;var Wn=Dt();return xt(Wn,Pn),Wn.width=0,Wn.height=0,Pt(Wn,nn),Wn.width=Wn.width||(Pn.width>>Bn)-dn,Wn.height=Wn.height||(Pn.height>>Bn)-xn,hn(Pn),Ct(Wn,34069+on,dn,xn,Bn),wn(),Ut(Wn),kn},kn.resize=function(on){if((on|=0)!==Pn.width){kn.width=Pn.width=on,kn.height=Pn.height=on,hn(Pn);for(var nn=0;6>nn;++nn)for(var dn=0;Pn.mipmask>>dn;++dn)We.texImage2D(34069+nn,dn,Pn.format,on>>dn,on>>dn,0,Pn.format,Pn.type,null);return wn(),ut.profile&&(Pn.stats.size=f(Pn.internalformat,Pn.type,kn.width,kn.height,!1,!0)),kn}},kn._reglType="textureCube",kn._texture=Pn,ut.profile&&(kn.stats=Pn.stats),kn.destroy=function(){Pn.decRef()},kn},clear:function(){for(var cn=0;cn<fr;++cn)We.activeTexture(33984+cn),We.bindTexture(3553,null),Dr[cn]=null;ye(tr).forEach(pn),He.cubeCount=0,He.textureCount=0},getTexture:function(cn){return null},restore:function(){for(var cn=0;cn<fr;++cn){var In=Dr[cn];In&&(In.bindCount=0,In.unit=-1,Dr[cn]=null)}ye(tr).forEach(function(Nt){Nt.texture=We.createTexture(),We.bindTexture(Nt.target,Nt.texture);for(var Zt=0;32>Zt;++Zt)if(Nt.mipmask&1<<Zt)if(3553===Nt.target)We.texImage2D(3553,Zt,Nt.internalformat,Nt.width>>Zt,Nt.height>>Zt,0,Nt.internalformat,Nt.type,null);else for(var un=0;6>un;++un)We.texImage2D(34069+un,Zt,Nt.internalformat,Nt.width>>Zt,Nt.height>>Zt,0,Nt.internalformat,Nt.type,null);Fn(Nt.texInfo,Nt.target)})},refresh:function(){for(var cn=0;cn<fr;++cn){var In=Dr[cn];In&&(In.bindCount=0,In.unit=-1,Dr[cn]=null),We.activeTexture(33984+cn),We.bindTexture(3553,null),We.bindTexture(34067,null)}}}}(Ct,mn,Sn,function(){Gn.procs.poll()},Fn,qt,We),Dn=function(We,et,gt,ht,Ge){function He(yt){this.id=At++,this.refCount=1,this.renderbuffer=yt,this.format=32854,this.height=this.width=0,Ge.profile&&(this.stats={size:0})}function ut(yt){var Pt=yt.renderbuffer;We.bindRenderbuffer(36161,null),We.deleteRenderbuffer(Pt),yt.renderbuffer=null,yt.refCount=0,delete Mt[yt.id],ht.renderbufferCount--}var tt={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};et.ext_srgb&&(tt.srgba=35907),et.ext_color_buffer_half_float&&(tt.rgba16f=34842,tt.rgb16f=34843),et.webgl_color_buffer_float&&(tt.rgba32f=34836);var xt=[];Object.keys(tt).forEach(function(yt){xt[tt[yt]]=yt});var At=0,Mt={};return He.prototype.decRef=function(){0>=--this.refCount&&ut(this)},Ge.profile&&(ht.getTotalRenderbufferSize=function(){var yt=0;return Object.keys(Mt).forEach(function(Pt){yt+=Mt[Pt].stats.size}),yt}),{create:function(yt,Pt){function Ct(Ut,Bt){var qt=0,an=0,mn=32854;if("object"==typeof Ut&&Ut?("shape"in Ut?(qt=0|(an=Ut.shape)[0],an=0|an[1]):("radius"in Ut&&(qt=an=0|Ut.radius),"width"in Ut&&(qt=0|Ut.width),"height"in Ut&&(an=0|Ut.height)),"format"in Ut&&(mn=tt[Ut.format])):"number"==typeof Ut?(qt=0|Ut,an="number"==typeof Bt?0|Bt:qt):Ut||(qt=an=1),qt!==Dt.width||an!==Dt.height||mn!==Dt.format)return Ct.width=Dt.width=qt,Ct.height=Dt.height=an,Dt.format=mn,We.bindRenderbuffer(36161,Dt.renderbuffer),We.renderbufferStorage(36161,mn,qt,an),Ge.profile&&(Dt.stats.size=dt[Dt.format]*Dt.width*Dt.height),Ct.format=xt[Dt.format],Ct}var Dt=new He(We.createRenderbuffer());return Mt[Dt.id]=Dt,ht.renderbufferCount++,Ct(yt,Pt),Ct.resize=function(Ut,Bt){var qt=0|Ut,an=0|Bt||qt;return qt===Dt.width&&an===Dt.height||(Ct.width=Dt.width=qt,Ct.height=Dt.height=an,We.bindRenderbuffer(36161,Dt.renderbuffer),We.renderbufferStorage(36161,Dt.format,qt,an),Ge.profile&&(Dt.stats.size=dt[Dt.format]*Dt.width*Dt.height)),Ct},Ct._reglType="renderbuffer",Ct._renderbuffer=Dt,Ge.profile&&(Ct.stats=Dt.stats),Ct.destroy=function(){Dt.decRef()},Ct},clear:function(){ye(Mt).forEach(ut)},restore:function(){ye(Mt).forEach(function(yt){yt.renderbuffer=We.createRenderbuffer(),We.bindRenderbuffer(36161,yt.renderbuffer),We.renderbufferStorage(36161,yt.format,yt.width,yt.height)}),We.bindRenderbuffer(36161,null)}}}(Ct,mn,0,qt,We),Vn=function w(We,et,gt,ht,Ge,He){function ut(Sn,hn,wn){this.target=Sn,this.texture=hn,this.renderbuffer=wn;var pn=Sn=0;hn?(Sn=hn.width,pn=hn.height):wn&&(Sn=wn.width,pn=wn.height),this.width=Sn,this.height=pn}function tt(Sn){Sn&&(Sn.texture&&Sn.texture._texture.decRef(),Sn.renderbuffer&&Sn.renderbuffer._renderbuffer.decRef())}function xt(Sn,hn,wn){Sn&&(Sn.texture?Sn.texture._texture.refCount+=1:Sn.renderbuffer._renderbuffer.refCount+=1)}function At(Sn,hn){hn&&(hn.texture?We.framebufferTexture2D(36160,Sn,hn.target,hn.texture._texture.texture,0):We.framebufferRenderbuffer(36160,Sn,36161,hn.renderbuffer._renderbuffer.renderbuffer))}function Mt(Sn){var hn=3553,wn=null,pn=null,An=Sn;return"object"==typeof Sn&&(An=Sn.data,"target"in Sn&&(hn=0|Sn.target)),"texture2d"===(Sn=An._reglType)||"textureCube"===Sn?wn=An:"renderbuffer"===Sn&&(pn=An,hn=36161),new ut(hn,wn,pn)}function yt(Sn,hn,wn,pn,An){return wn?((Sn=ht.create2D({width:Sn,height:hn,format:pn,type:An}))._texture.refCount=0,new ut(3553,Sn,null)):((Sn=Ge.create({width:Sn,height:hn,format:pn}))._renderbuffer.refCount=0,new ut(36161,null,Sn))}function Pt(Sn){return Sn&&(Sn.texture||Sn.renderbuffer)}function Ct(Sn,hn,wn){Sn&&(Sn.texture?Sn.texture.resize(hn,wn):Sn.renderbuffer&&Sn.renderbuffer.resize(hn,wn),Sn.width=hn,Sn.height=wn)}function Dt(){this.id=qn++,Fn[this.id]=this,this.framebuffer=We.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Ut(Sn){Sn.colorAttachments.forEach(tt),tt(Sn.depthAttachment),tt(Sn.stencilAttachment),tt(Sn.depthStencilAttachment)}function Bt(Sn){We.deleteFramebuffer(Sn.framebuffer),Sn.framebuffer=null,He.framebufferCount--,delete Fn[Sn.id]}function qt(Sn){var hn;We.bindFramebuffer(36160,Sn.framebuffer);var wn=Sn.colorAttachments;for(hn=0;hn<wn.length;++hn)At(36064+hn,wn[hn]);for(hn=wn.length;hn<gt.maxColorAttachments;++hn)We.framebufferTexture2D(36160,36064+hn,3553,null,0);We.framebufferTexture2D(36160,33306,3553,null,0),We.framebufferTexture2D(36160,36096,3553,null,0),We.framebufferTexture2D(36160,36128,3553,null,0),At(36096,Sn.depthAttachment),At(36128,Sn.stencilAttachment),At(33306,Sn.depthStencilAttachment),We.checkFramebufferStatus(36160),We.isContextLost(),We.bindFramebuffer(36160,mn.next?mn.next.framebuffer:null),mn.cur=mn.next,We.getError()}function an(Sn,hn){function wn(An,On){var Dn,Vn=0,Gn=0,Nn=!0,ir=!0;Dn=null;var $n=!0,mr="rgba",lr="uint8",vr=1,or=null,Or=null,fn=null,gn=!1;"number"==typeof An?(Vn=0|An,Gn=0|On||Vn):An?("shape"in An?(Vn=(Gn=An.shape)[0],Gn=Gn[1]):("radius"in An&&(Vn=Gn=An.radius),"width"in An&&(Vn=An.width),"height"in An&&(Gn=An.height)),("color"in An||"colors"in An)&&(Dn=An.color||An.colors,Array.isArray(Dn)),Dn||("colorCount"in An&&(vr=0|An.colorCount),"colorTexture"in An&&($n=!!An.colorTexture,mr="rgba4"),"colorType"in An&&(lr=An.colorType,!$n)&&("half float"===lr||"float16"===lr?mr="rgba16f":"float"!==lr&&"float32"!==lr||(mr="rgba32f")),"colorFormat"in An&&(0<=Qt.indexOf(mr=An.colorFormat)?$n=!0:0<=sn.indexOf(mr)&&($n=!1))),("depthTexture"in An||"depthStencilTexture"in An)&&(gn=!(!An.depthTexture&&!An.depthStencilTexture)),"depth"in An&&("boolean"==typeof An.depth?Nn=An.depth:(or=An.depth,ir=!1)),"stencil"in An&&("boolean"==typeof An.stencil?ir=An.stencil:(Or=An.stencil,Nn=!1)),"depthStencil"in An&&("boolean"==typeof An.depthStencil?Nn=ir=An.depthStencil:(fn=An.depthStencil,ir=Nn=!1))):Vn=Gn=1;var Hn=null,En=null,Zn=null,Kn=null;if(Array.isArray(Dn))Hn=Dn.map(Mt);else if(Dn)Hn=[Mt(Dn)];else for(Hn=Array(vr),Dn=0;Dn<vr;++Dn)Hn[Dn]=yt(Vn,Gn,$n,mr,lr);for(Vn=Vn||Hn[0].width,Gn=Gn||Hn[0].height,or?En=Mt(or):Nn&&!ir&&(En=yt(Vn,Gn,gn,"depth","uint32")),Or?Zn=Mt(Or):ir&&!Nn&&(Zn=yt(Vn,Gn,!1,"stencil","uint8")),fn?Kn=Mt(fn):!or&&!Or&&ir&&Nn&&(Kn=yt(Vn,Gn,gn,"depth stencil","depth stencil")),Nn=null,Dn=0;Dn<Hn.length;++Dn)xt(Hn[Dn]),Hn[Dn]&&Hn[Dn].texture&&(ir=St[Hn[Dn].texture._texture.format]*Tt[Hn[Dn].texture._texture.type],null===Nn&&(Nn=ir));return xt(En),xt(Zn),xt(Kn),Ut(pn),pn.width=Vn,pn.height=Gn,pn.colorAttachments=Hn,pn.depthAttachment=En,pn.stencilAttachment=Zn,pn.depthStencilAttachment=Kn,wn.color=Hn.map(Pt),wn.depth=Pt(En),wn.stencil=Pt(Zn),wn.depthStencil=Pt(Kn),wn.width=pn.width,wn.height=pn.height,qt(pn),wn}var pn=new Dt;return He.framebufferCount++,wn(Sn,hn),X(wn,{resize:function(An,On){var Dn=Math.max(0|An,1),Vn=Math.max(0|On||Dn,1);if(Dn===pn.width&&Vn===pn.height)return wn;for(var Gn=pn.colorAttachments,Nn=0;Nn<Gn.length;++Nn)Ct(Gn[Nn],Dn,Vn);return Ct(pn.depthAttachment,Dn,Vn),Ct(pn.stencilAttachment,Dn,Vn),Ct(pn.depthStencilAttachment,Dn,Vn),pn.width=wn.width=Dn,pn.height=wn.height=Vn,qt(pn),wn},_reglType:"framebuffer",_framebuffer:pn,destroy:function(){Bt(pn),Ut(pn)},use:function(An){mn.setFBO({framebuffer:wn},An)}})}var mn={cur:null,next:null,dirty:!1,setFBO:null},Qt=["rgba"],sn=["rgba4","rgb565","rgb5 a1"];et.ext_srgb&&sn.push("srgba"),et.ext_color_buffer_half_float&&sn.push("rgba16f","rgb16f"),et.webgl_color_buffer_float&&sn.push("rgba32f");var Kt=["uint8"];et.oes_texture_half_float&&Kt.push("half float","float16"),et.oes_texture_float&&Kt.push("float","float32");var qn=0,Fn={};return X(mn,{getFramebuffer:function(Sn){return"function"==typeof Sn&&"framebuffer"===Sn._reglType&&(Sn=Sn._framebuffer)instanceof Dt?Sn:null},create:an,createCube:function(Sn){function hn(pn){var An,On={color:null},Dn=0,Vn=null;An="rgba";var Gn="uint8",Nn=1;if("number"==typeof pn?Dn=0|pn:pn?("shape"in pn?Dn=pn.shape[0]:("radius"in pn&&(Dn=0|pn.radius),"width"in pn?Dn=0|pn.width:"height"in pn&&(Dn=0|pn.height)),("color"in pn||"colors"in pn)&&(Vn=pn.color||pn.colors,Array.isArray(Vn)),Vn||("colorCount"in pn&&(Nn=0|pn.colorCount),"colorType"in pn&&(Gn=pn.colorType),"colorFormat"in pn&&(An=pn.colorFormat)),"depth"in pn&&(On.depth=pn.depth),"stencil"in pn&&(On.stencil=pn.stencil),"depthStencil"in pn&&(On.depthStencil=pn.depthStencil)):Dn=1,Vn)if(Array.isArray(Vn))for(pn=[],An=0;An<Vn.length;++An)pn[An]=Vn[An];else pn=[Vn];else for(pn=Array(Nn),Vn={radius:Dn,format:An,type:Gn},An=0;An<Nn;++An)pn[An]=ht.createCube(Vn);for(On.color=Array(pn.length),An=0;An<pn.length;++An)Nn=pn[An],Dn=Dn||Nn.width,On.color[An]={target:34069,data:pn[An]};for(An=0;6>An;++An){for(Nn=0;Nn<pn.length;++Nn)On.color[Nn].target=34069+An;0<An&&(On.depth=wn[0].depth,On.stencil=wn[0].stencil,On.depthStencil=wn[0].depthStencil),wn[An]?wn[An](On):wn[An]=an(On)}return X(hn,{width:Dn,height:Dn,color:pn})}var wn=Array(6);return hn(Sn),X(hn,{faces:wn,resize:function(pn){var An=0|pn;if(An===hn.width)return hn;var On=hn.color;for(pn=0;pn<On.length;++pn)On[pn].resize(An);for(pn=0;6>pn;++pn)wn[pn].resize(An);return hn.width=hn.height=An,hn},_reglType:"framebufferCube",destroy:function(){wn.forEach(function(pn){pn.destroy()})}})},clear:function(){ye(Fn).forEach(Bt)},restore:function(){mn.cur=null,mn.next=null,mn.dirty=!0,ye(Fn).forEach(function(Sn){Sn.framebuffer=We.createFramebuffer(),qt(Sn)})}})}(Ct,mn,Sn,On,Dn,qt),Gn=Q(Ct,Bt,mn,Sn,hn,wn,0,Vn,{},pn,An,Kt,Fn,Qt,an,We),Nn=(Bt=function O(We,et,gt,ht,Ge,He,ut){function tt(xt){var At;At=null===et.next?5121:et.next.colorAttachments[0].texture._texture.type;var Mt=0,yt=0,Pt=ht.framebufferWidth,Ct=ht.framebufferHeight,Dt=null;return xe(xt)?Dt=xt:xt&&(Mt=0|xt.x,yt=0|xt.y,Pt=0|(xt.width||ht.framebufferWidth-Mt),Ct=0|(xt.height||ht.framebufferHeight-yt),Dt=xt.data||null),gt(),xt=Pt*Ct*4,Dt||(5121===At?Dt=new Uint8Array(xt):5126===At&&(Dt=Dt||new Float32Array(xt))),We.pixelStorei(3333,4),We.readPixels(Mt,yt,Pt,Ct,6408,At,Dt),Dt}return function(xt){return xt&&"framebuffer"in xt?(et.setFBO({framebuffer:(At=xt).framebuffer},function(){Mt=tt(At)}),Mt):tt(xt);var At,Mt}}(Ct,Vn,Gn.procs.poll,Fn),Gn.next),ir=Ct.canvas,$n=[],mr=[],lr=[],vr=[We.onDestroy],or=null;ir&&(ir.addEventListener("webglcontextlost",Ge,!1),ir.addEventListener("webglcontextrestored",He,!1));var Or=Vn.setFBO=ut({framebuffer:fe.define.call(null,1,"framebuffer")});return yt(),Dt=X(ut,{clear:function(fn){if("framebuffer"in fn)if(fn.framebuffer&&"framebufferCube"===fn.framebuffer_reglType)for(var gn=0;6>gn;++gn)Or(X({framebuffer:fn.framebuffer.faces[gn]},fn),tt);else Or(fn,tt);else tt(0,fn)},prop:fe.define.bind(null,1),context:fe.define.bind(null,2),this:fe.define.bind(null,3),draw:ut({}),buffer:function(fn){return hn.create(fn,34962,!1,!1)},elements:function(fn){return wn.create(fn,!1)},texture:On.create2D,cube:On.createCube,renderbuffer:Dn.create,framebuffer:Vn.create,framebufferCube:Vn.createCube,vao:pn.createVAO,attributes:Dt,frame:xt,on:function(fn,gn){var Hn;switch(fn){case"frame":return xt(gn);case"lost":Hn=mr;break;case"restore":Hn=lr;break;case"destroy":Hn=vr}return Hn.push(gn),{cancel:function(){for(var En=0;En<Hn.length;++En)if(Hn[En]===gn){Hn[En]=Hn[Hn.length-1],Hn.pop();break}}}},limits:Sn,hasExtension:function(fn){return 0<=Sn.extensions.indexOf(fn.toLowerCase())},read:Bt,destroy:function(){$n.length=0,ht(),ir&&(ir.removeEventListener("webglcontextlost",Ge),ir.removeEventListener("webglcontextrestored",He)),An.clear(),Vn.clear(),Dn.clear(),pn.clear(),On.clear(),wn.clear(),hn.clear(),Qt&&Qt.clear(),vr.forEach(function(fn){fn()})},_gl:Ct,_refresh:yt,poll:function(){Mt(),Qt&&Qt.update()},now:Pt,stats:qt,getCachedCode:function(){return an},preloadCachedCode:function(fn){Object.entries(fn).forEach(function(gn){an[gn[0]]=gn[1]})}}),We.onDone(null,Dt),Dt}}()},30456:function(ie,F,e){var S=e(33576),k=S.Buffer;function o(b,p){for(var l in b)p[l]=b[l]}function T(b,p,l){return k(b,p,l)}k.from&&k.alloc&&k.allocUnsafe&&k.allocUnsafeSlow?ie.exports=S:(o(S,F),F.Buffer=T),T.prototype=Object.create(k.prototype),o(k,T),T.from=function(b,p,l){if("number"==typeof b)throw new TypeError("Argument must not be a number");return k(b,p,l)},T.alloc=function(b,p,l){if("number"!=typeof b)throw new TypeError("Argument must be a number");var t=k(b);return void 0!==p?"string"==typeof l?t.fill(p,l):t.fill(p):t.fill(0),t},T.allocUnsafe=function(b){if("number"!=typeof b)throw new TypeError("Argument must be a number");return k(b)},T.allocUnsafeSlow=function(b){if("number"!=typeof b)throw new TypeError("Argument must be a number");return S.SlowBuffer(b)}},14500:function(ie,F,e){"use strict";var S=e(53664),k=e(64348),o=e(39640)(),T=e(2304),b=S("%TypeError%"),p=S("%Math.floor%");ie.exports=function(l,t){if("function"!=typeof l)throw new b("`fn` is not a function");if("number"!=typeof t||t<0||t>4294967295||p(t)!==t)throw new b("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],r=!0,n=!0;if("length"in l&&T){var a=T(l,"length");a&&!a.configurable&&(r=!1),a&&!a.writable&&(n=!1)}return(r||n||!i)&&(o?k(l,"length",t,!0,!0):k(l,"length",t)),l}},29936:function(ie,F,e){ie.exports=k;var S=e(61252).EventEmitter;function k(){S.call(this)}e(6768)(k,S),k.Readable=e(12348),k.Writable=e(11288),k.Duplex=e(15316),k.Transform=e(22477),k.PassThrough=e(27136),k.finished=e(15932),k.pipeline=e(38180),k.Stream=k,k.prototype.pipe=function(o,T){var b=this;function p(s){o.writable&&!1===o.write(s)&&b.pause&&b.pause()}function l(){b.readable&&b.resume&&b.resume()}b.on("data",p),o.on("drain",l),o._isStdio||T&&!1===T.end||(b.on("end",i),b.on("close",r));var t=!1;function i(){t||(t=!0,o.end())}function r(){t||(t=!0,"function"==typeof o.destroy&&o.destroy())}function n(s){if(a(),0===S.listenerCount(this,"error"))throw s}function a(){b.removeListener("data",p),o.removeListener("drain",l),b.removeListener("end",i),b.removeListener("close",r),b.removeListener("error",n),o.removeListener("error",n),b.removeListener("end",a),b.removeListener("close",a),o.removeListener("close",a)}return b.on("error",n),o.on("error",n),b.on("end",a),b.on("close",a),o.on("close",a),o.emit("pipe",b),o}},92784:function(ie){"use strict";var F={};function e(k,o,T){T||(T=Error);var b=function(p){var l,t;function i(r,n,a){return p.call(this,"string"==typeof o?o:o(r,n,a))||this}return t=p,(l=i).prototype=Object.create(t.prototype),l.prototype.constructor=l,l.__proto__=t,i}(T);b.prototype.name=T.name,b.prototype.code=k,F[k]=b}function S(k,o){if(Array.isArray(k)){var T=k.length;return k=k.map(function(b){return String(b)}),T>2?"one of ".concat(o," ").concat(k.slice(0,T-1).join(", "),", or ")+k[T-1]:2===T?"one of ".concat(o," ").concat(k[0]," or ").concat(k[1]):"of ".concat(o," ").concat(k[0])}return"of ".concat(o," ").concat(String(k))}e("ERR_INVALID_OPT_VALUE",function(k,o){return'The value "'+o+'" is invalid for option "'+k+'"'},TypeError),e("ERR_INVALID_ARG_TYPE",function(k,o,T){var b,l,t,i,n,s;if("string"==typeof o&&("not ","not "===o.substr(0,4))?(b="must not be",o=o.replace(/^not /,"")):b="must be",n=k," argument",(void 0===s||s>n.length)&&(s=n.length)," argument"===n.substring(s-9,s))l="The ".concat(k," ").concat(b," ").concat(S(o,"type"));else{var r=("number"!=typeof i&&(i=0),i+1>(t=k).length||-1===t.indexOf(".",i)?"argument":"property");l='The "'.concat(k,'" ').concat(r," ").concat(b," ").concat(S(o,"type"))}return l+". Received type ".concat(typeof T)},TypeError),e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),e("ERR_METHOD_NOT_IMPLEMENTED",function(k){return"The "+k+" method is not implemented"}),e("ERR_STREAM_PREMATURE_CLOSE","Premature close"),e("ERR_STREAM_DESTROYED",function(k){return"Cannot call "+k+" after a stream was destroyed"}),e("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),e("ERR_STREAM_WRITE_AFTER_END","write after end"),e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),e("ERR_UNKNOWN_ENCODING",function(k){return"Unknown encoding: "+k},TypeError),e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),ie.exports.i=F},15316:function(ie,F,e){"use strict";var S=e(4168),k=Object.keys||function(n){var a=[];for(var s in n)a.push(s);return a};ie.exports=t;var o=e(12348),T=e(11288);e(6768)(t,o);for(var b=k(T.prototype),p=0;p<b.length;p++){var l=b[p];t.prototype[l]||(t.prototype[l]=T.prototype[l])}function t(n){if(!(this instanceof t))return new t(n);o.call(this,n),T.call(this,n),this.allowHalfOpen=!0,n&&(!1===n.readable&&(this.readable=!1),!1===n.writable&&(this.writable=!1),!1===n.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",i)))}function i(){this._writableState.ended||S.nextTick(r,this)}function r(n){n.end()}Object.defineProperty(t.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(t.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(t.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(t.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(n){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=n,this._writableState.destroyed=n)}})},27136:function(ie,F,e){"use strict";ie.exports=k;var S=e(22477);function k(o){if(!(this instanceof k))return new k(o);S.call(this,o)}e(6768)(k,S),k.prototype._transform=function(o,T,b){b(null,o)}},12348:function(ie,F,e){"use strict";var S,k=e(4168);ie.exports=_,_.ReadableState=v,e(61252);var o,T=function(re,ne){return re.listeners(ne).length},b=e(4776),p=e(33576).Buffer,l=e.g.Uint8Array||function(){},t=e(19768);o=t&&t.debuglog?t.debuglog("stream"):function(){};var i,r,n,a=e(47264),s=e(55324),c=e(24888).getHighWaterMark,h=e(92784).i,u=h.ERR_INVALID_ARG_TYPE,y=h.ERR_STREAM_PUSH_AFTER_EOF,d=h.ERR_METHOD_NOT_IMPLEMENTED,m=h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e(6768)(_,b);var g=s.errorOrDestroy,x=["error","close","destroy","pause","resume"];function v(re,ne,Q){S=S||e(15316),"boolean"!=typeof Q&&(Q=ne instanceof S),this.objectMode=!!(re=re||{}).objectMode,Q&&(this.objectMode=this.objectMode||!!re.readableObjectMode),this.highWaterMark=c(this,re,"readableHighWaterMark",Q),this.buffer=new a,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==re.emitClose,this.autoDestroy=!!re.autoDestroy,this.destroyed=!1,this.defaultEncoding=re.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,re.encoding&&(i||(i=e(86032).o),this.decoder=new i(re.encoding),this.encoding=re.encoding)}function _(re){if(S=S||e(15316),!(this instanceof _))return new _(re);this._readableState=new v(re,this,this instanceof S),this.readable=!0,re&&("function"==typeof re.read&&(this._read=re.read),"function"==typeof re.destroy&&(this._destroy=re.destroy)),b.call(this)}function f(re,ne,Q,$,X){o("readableAddChunk",ne);var oe,ue,ge,we,Te,fe=re._readableState;if(null===ne)fe.reading=!1,function(ue,ge){if(o("onEofChunk"),!ge.ended){if(ge.decoder){var we=ge.decoder.end();we&&we.length&&(ge.buffer.push(we),ge.length+=ge.objectMode?1:we.length)}ge.ended=!0,ge.sync?P(ue):(ge.needReadable=!1,ge.emittedReadable||(ge.emittedReadable=!0,L(ue)))}}(re,fe);else if(X||(ue=fe,p.isBuffer(Te=ge=ne)||Te instanceof l||"string"==typeof ge||void 0===ge||ue.objectMode||(we=new u("chunk",["string","Buffer","Uint8Array"],ge)),oe=we),oe)g(re,oe);else if(fe.objectMode||ne&&ne.length>0)if("string"==typeof ne||fe.objectMode||Object.getPrototypeOf(ne)===p.prototype||(ne=function(ue){return p.from(ue)}(ne)),$)fe.endEmitted?g(re,new m):C(re,fe,ne,!0);else if(fe.ended)g(re,new y);else{if(fe.destroyed)return!1;fe.reading=!1,fe.decoder&&!Q?(ne=fe.decoder.write(ne),fe.objectMode||0!==ne.length?C(re,fe,ne,!1):O(re,fe)):C(re,fe,ne,!1)}else $||(fe.reading=!1,O(re,fe));return!fe.ended&&(fe.length<fe.highWaterMark||0===fe.length)}function C(re,ne,Q,$){ne.flowing&&0===ne.length&&!ne.sync?(ne.awaitDrain=0,re.emit("data",Q)):(ne.length+=ne.objectMode?1:Q.length,$?ne.buffer.unshift(Q):ne.buffer.push(Q),ne.needReadable&&P(re)),O(re,ne)}Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(re){this._readableState&&(this._readableState.destroyed=re)}}),_.prototype.destroy=s.destroy,_.prototype._undestroy=s.undestroy,_.prototype._destroy=function(re,ne){ne(re)},_.prototype.push=function(re,ne){var Q,$=this._readableState;return $.objectMode?Q=!0:"string"==typeof re&&((ne=ne||$.defaultEncoding)!==$.encoding&&(re=p.from(re,ne),ne=""),Q=!0),f(this,re,ne,!1,Q)},_.prototype.unshift=function(re){return f(this,re,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(re){i||(i=e(86032).o);var ne=new i(re);this._readableState.decoder=ne,this._readableState.encoding=this._readableState.decoder.encoding;for(var Q=this._readableState.buffer.head,$="";null!==Q;)$+=ne.write(Q.data),Q=Q.next;return this._readableState.buffer.clear(),""!==$&&this._readableState.buffer.push($),this._readableState.length=$.length,this};var w=1073741824;function E(re,ne){return re<=0||0===ne.length&&ne.ended?0:ne.objectMode?1:re!=re?ne.flowing&&ne.length?ne.buffer.head.data.length:ne.length:(re>ne.highWaterMark&&(ne.highWaterMark=((Q=re)>=w?Q=w:(Q--,Q|=Q>>>1,Q|=Q>>>2,Q|=Q>>>4,Q|=Q>>>8,Q|=Q>>>16,Q++),Q)),re<=ne.length?re:ne.ended?ne.length:(ne.needReadable=!0,0));var Q}function P(re){var ne=re._readableState;o("emitReadable",ne.needReadable,ne.emittedReadable),ne.needReadable=!1,ne.emittedReadable||(o("emitReadable",ne.flowing),ne.emittedReadable=!0,k.nextTick(L,re))}function L(re){var ne=re._readableState;o("emitReadable_",ne.destroyed,ne.length,ne.ended),ne.destroyed||!ne.length&&!ne.ended||(re.emit("readable"),ne.emittedReadable=!1),ne.needReadable=!ne.flowing&&!ne.ended&&ne.length<=ne.highWaterMark,Z(re)}function O(re,ne){ne.readingMore||(ne.readingMore=!0,k.nextTick(z,re,ne))}function z(re,ne){for(;!ne.reading&&!ne.ended&&(ne.length<ne.highWaterMark||ne.flowing&&0===ne.length);){var Q=ne.length;if(o("maybeReadMore read 0"),re.read(0),Q===ne.length)break}ne.readingMore=!1}function V(re){var ne=re._readableState;ne.readableListening=re.listenerCount("readable")>0,ne.resumeScheduled&&!ne.paused?ne.flowing=!0:re.listenerCount("data")>0&&re.resume()}function R(re){o("readable nexttick read 0"),re.read(0)}function U(re,ne){o("resume",ne.reading),ne.reading||re.read(0),ne.resumeScheduled=!1,re.emit("resume"),Z(re),ne.flowing&&!ne.reading&&re.read(0)}function Z(re){var ne=re._readableState;for(o("flow",ne.flowing);ne.flowing&&null!==re.read(););}function N(re,ne){return 0===ne.length?null:(ne.objectMode?Q=ne.buffer.shift():!re||re>=ne.length?(Q=ne.decoder?ne.buffer.join(""):1===ne.buffer.length?ne.buffer.first():ne.buffer.concat(ne.length),ne.buffer.clear()):Q=ne.buffer.consume(re,ne.decoder),Q);var Q}function G(re){var ne=re._readableState;o("endReadable",ne.endEmitted),ne.endEmitted||(ne.ended=!0,k.nextTick(W,ne,re))}function W(re,ne){if(o("endReadableNT",re.endEmitted,re.length),!re.endEmitted&&0===re.length&&(re.endEmitted=!0,ne.readable=!1,ne.emit("end"),re.autoDestroy)){var Q=ne._writableState;(!Q||Q.autoDestroy&&Q.finished)&&ne.destroy()}}function ae(re,ne){for(var Q=0,$=re.length;Q<$;Q++)if(re[Q]===ne)return Q;return-1}_.prototype.read=function(re){o("read",re),re=parseInt(re,10);var ne=this._readableState,Q=re;if(0!==re&&(ne.emittedReadable=!1),0===re&&ne.needReadable&&((0!==ne.highWaterMark?ne.length>=ne.highWaterMark:ne.length>0)||ne.ended))return o("read: emitReadable",ne.length,ne.ended),0===ne.length&&ne.ended?G(this):P(this),null;if(0===(re=E(re,ne))&&ne.ended)return 0===ne.length&&G(this),null;var $,X=ne.needReadable;return o("need readable",X),(0===ne.length||ne.length-re<ne.highWaterMark)&&o("length less than watermark",X=!0),ne.ended||ne.reading?o("reading or ended",X=!1):X&&(o("do read"),ne.reading=!0,ne.sync=!0,0===ne.length&&(ne.needReadable=!0),this._read(ne.highWaterMark),ne.sync=!1,ne.reading||(re=E(Q,ne))),null===($=re>0?N(re,ne):null)?(ne.needReadable=ne.length<=ne.highWaterMark,re=0):(ne.length-=re,ne.awaitDrain=0),0===ne.length&&(ne.ended||(ne.needReadable=!0),Q!==re&&ne.ended&&G(this)),null!==$&&this.emit("data",$),$},_.prototype._read=function(re){g(this,new d("_read()"))},_.prototype.pipe=function(re,ne){var Q=this,$=this._readableState;switch($.pipesCount){case 0:$.pipes=re;break;case 1:$.pipes=[$.pipes,re];break;default:$.pipes.push(re)}$.pipesCount+=1,o("pipe count=%d opts=%j",$.pipesCount,ne);var X=ne&&!1===ne.end||re===k.stdout||re===k.stderr?ye:oe;function oe(){o("onend"),re.end()}$.endEmitted?k.nextTick(X):Q.once("end",X),re.on("unpipe",function _e(Ie,De){o("onunpipe"),Ie===Q&&De&&!1===De.hasUnpiped&&(De.hasUnpiped=!0,o("cleanup"),re.removeListener("close",Te),re.removeListener("finish",xe),re.removeListener("drain",fe),re.removeListener("error",we),re.removeListener("unpipe",_e),Q.removeListener("end",oe),Q.removeListener("end",ye),Q.removeListener("data",ge),ue=!0,!$.awaitDrain||re._writableState&&!re._writableState.needDrain||fe())});var _e,fe=(_e=Q,function(){var Ie=_e._readableState;o("pipeOnDrain",Ie.awaitDrain),Ie.awaitDrain&&Ie.awaitDrain--,0===Ie.awaitDrain&&T(_e,"data")&&(Ie.flowing=!0,Z(_e))});re.on("drain",fe);var ue=!1;function ge(_e){o("ondata");var Ie=re.write(_e);o("dest.write",Ie),!1===Ie&&((1===$.pipesCount&&$.pipes===re||$.pipesCount>1&&-1!==ae($.pipes,re))&&!ue&&(o("false write response, pause",$.awaitDrain),$.awaitDrain++),Q.pause())}function we(_e){o("onerror",_e),ye(),re.removeListener("error",we),0===T(re,"error")&&g(re,_e)}function Te(){re.removeListener("finish",xe),ye()}function xe(){o("onfinish"),re.removeListener("close",Te),ye()}function ye(){o("unpipe"),Q.unpipe(re)}return Q.on("data",ge),function(_e,Ie,De){if("function"==typeof _e.prependListener)return _e.prependListener(Ie,De);_e._events&&_e._events[Ie]?Array.isArray(_e._events[Ie])?_e._events[Ie].unshift(De):_e._events[Ie]=[De,_e._events[Ie]]:_e.on(Ie,De)}(re,"error",we),re.once("close",Te),re.once("finish",xe),re.emit("pipe",Q),$.flowing||(o("pipe resume"),Q.resume()),re},_.prototype.unpipe=function(re){var ne=this._readableState,Q={hasUnpiped:!1};if(0===ne.pipesCount)return this;if(1===ne.pipesCount)return re&&re!==ne.pipes||(re||(re=ne.pipes),ne.pipes=null,ne.pipesCount=0,ne.flowing=!1,re&&re.emit("unpipe",this,Q)),this;if(!re){var $=ne.pipes,X=ne.pipesCount;ne.pipes=null,ne.pipesCount=0,ne.flowing=!1;for(var oe=0;oe<X;oe++)$[oe].emit("unpipe",this,{hasUnpiped:!1});return this}var fe=ae(ne.pipes,re);return-1===fe||(ne.pipes.splice(fe,1),ne.pipesCount-=1,1===ne.pipesCount&&(ne.pipes=ne.pipes[0]),re.emit("unpipe",this,Q)),this},_.prototype.addListener=_.prototype.on=function(re,ne){var Q=b.prototype.on.call(this,re,ne),$=this._readableState;return"data"===re?($.readableListening=this.listenerCount("readable")>0,!1!==$.flowing&&this.resume()):"readable"===re&&($.endEmitted||$.readableListening||($.readableListening=$.needReadable=!0,$.flowing=!1,$.emittedReadable=!1,o("on readable",$.length,$.reading),$.length?P(this):$.reading||k.nextTick(R,this))),Q},_.prototype.removeListener=function(re,ne){var Q=b.prototype.removeListener.call(this,re,ne);return"readable"===re&&k.nextTick(V,this),Q},_.prototype.removeAllListeners=function(re){var ne=b.prototype.removeAllListeners.apply(this,arguments);return"readable"!==re&&void 0!==re||k.nextTick(V,this),ne},_.prototype.resume=function(){var Q,re=this._readableState;return re.flowing||(o("resume"),re.flowing=!re.readableListening,this,(Q=re).resumeScheduled||(Q.resumeScheduled=!0,k.nextTick(U,this,Q))),re.paused=!1,this},_.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},_.prototype.wrap=function(re){var ne=this,Q=this._readableState,$=!1;for(var X in re.on("end",function(){if(o("wrapped end"),Q.decoder&&!Q.ended){var fe=Q.decoder.end();fe&&fe.length&&ne.push(fe)}ne.push(null)}),re.on("data",function(fe){o("wrapped data"),Q.decoder&&(fe=Q.decoder.write(fe)),Q.objectMode&&null==fe||(Q.objectMode||fe&&fe.length)&&(ne.push(fe)||($=!0,re.pause()))}),re)void 0===this[X]&&"function"==typeof re[X]&&(this[X]=function(fe){return function(){return re[fe].apply(re,arguments)}}(X));for(var oe=0;oe<x.length;oe++)re.on(x[oe],this.emit.bind(this,x[oe]));return this._read=function(fe){o("wrapped _read",fe),$&&($=!1,re.resume())},this},"function"==typeof Symbol&&(_.prototype[Symbol.asyncIterator]=function(){return void 0===r&&(r=e(60328)),r(this)}),Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(_.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(_.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(re){this._readableState&&(this._readableState.flowing=re)}}),_._fromList=N,Object.defineProperty(_.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(_.from=function(re,ne){return void 0===n&&(n=e(90555)),n(_,re,ne)})},22477:function(ie,F,e){"use strict";ie.exports=t;var S=e(92784).i,k=S.ERR_METHOD_NOT_IMPLEMENTED,o=S.ERR_MULTIPLE_CALLBACK,T=S.ERR_TRANSFORM_ALREADY_TRANSFORMING,b=S.ERR_TRANSFORM_WITH_LENGTH_0,p=e(15316);function l(n,a){var s=this._transformState;s.transforming=!1;var c=s.writecb;if(null===c)return this.emit("error",new o);s.writechunk=null,s.writecb=null,null!=a&&this.push(a),c(n);var h=this._readableState;h.reading=!1,(h.needReadable||h.length<h.highWaterMark)&&this._read(h.highWaterMark)}function t(n){if(!(this instanceof t))return new t(n);p.call(this,n),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,n&&("function"==typeof n.transform&&(this._transform=n.transform),"function"==typeof n.flush&&(this._flush=n.flush)),this.on("prefinish",i)}function i(){var n=this;"function"!=typeof this._flush||this._readableState.destroyed?r(this,null,null):this._flush(function(a,s){r(n,a,s)})}function r(n,a,s){if(a)return n.emit("error",a);if(null!=s&&n.push(s),n._writableState.length)throw new b;if(n._transformState.transforming)throw new T;return n.push(null)}e(6768)(t,p),t.prototype.push=function(n,a){return this._transformState.needTransform=!1,p.prototype.push.call(this,n,a)},t.prototype._transform=function(n,a,s){s(new k("_transform()"))},t.prototype._write=function(n,a,s){var c=this._transformState;if(c.writecb=s,c.writechunk=n,c.writeencoding=a,!c.transforming){var h=this._readableState;(c.needTransform||h.needReadable||h.length<h.highWaterMark)&&this._read(h.highWaterMark)}},t.prototype._read=function(n){var a=this._transformState;null===a.writechunk||a.transforming?a.needTransform=!0:(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform))},t.prototype._destroy=function(n,a){p.prototype._destroy.call(this,n,function(s){a(s)})}},11288:function(ie,F,e){"use strict";var S,k=e(4168);function o(O){var z=this;this.next=null,this.entry=null,this.finish=function(){!function(V,R,U){var Z=V.entry;for(V.entry=null;Z;){var N=Z.callback;R.pendingcb--,N(void 0),Z=Z.next}R.corkedRequestsFree.next=V}(z,O)}}ie.exports=_,_.WritableState=v;var T,b={deprecate:e(96656)},p=e(4776),l=e(33576).Buffer,t=e.g.Uint8Array||function(){},i=e(55324),r=e(24888).getHighWaterMark,n=e(92784).i,a=n.ERR_INVALID_ARG_TYPE,s=n.ERR_METHOD_NOT_IMPLEMENTED,c=n.ERR_MULTIPLE_CALLBACK,h=n.ERR_STREAM_CANNOT_PIPE,u=n.ERR_STREAM_DESTROYED,y=n.ERR_STREAM_NULL_VALUES,d=n.ERR_STREAM_WRITE_AFTER_END,m=n.ERR_UNKNOWN_ENCODING,g=i.errorOrDestroy;function x(){}function v(O,z,V){S=S||e(15316),"boolean"!=typeof V&&(V=z instanceof S),this.objectMode=!!(O=O||{}).objectMode,V&&(this.objectMode=this.objectMode||!!O.writableObjectMode),this.highWaterMark=r(this,O,"writableHighWaterMark",V),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===O.decodeStrings),this.defaultEncoding=O.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(U){!function(Z,N){var ne,G=Z._writableState,W=G.sync,ae=G.writecb;if("function"!=typeof ae)throw new c;if((ne=G).writing=!1,ne.writecb=null,ne.length-=ne.writelen,ne.writelen=0,N)!function(ne,Q,$,X,oe){--Q.pendingcb,$?(k.nextTick(oe,X),k.nextTick(L,ne,Q),ne._writableState.errorEmitted=!0,g(ne,X)):(oe(X),ne._writableState.errorEmitted=!0,g(ne,X),L(ne,Q))}(Z,G,W,N,ae);else{var re=E(G)||Z.destroyed;re||G.corked||G.bufferProcessing||!G.bufferedRequest||w(Z,G),W?k.nextTick(C,Z,G,re,ae):C(Z,G,re,ae)}}(z,U)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==O.emitClose,this.autoDestroy=!!O.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function _(O){var z=this instanceof(S=S||e(15316));if(!z&&!T.call(_,this))return new _(O);this._writableState=new v(O,this,z),this.writable=!0,O&&("function"==typeof O.write&&(this._write=O.write),"function"==typeof O.writev&&(this._writev=O.writev),"function"==typeof O.destroy&&(this._destroy=O.destroy),"function"==typeof O.final&&(this._final=O.final)),p.call(this)}function f(O,z,V,R,U,Z,N){z.writelen=R,z.writecb=N,z.writing=!0,z.sync=!0,z.destroyed?z.onwrite(new u("write")):V?O._writev(U,z.onwrite):O._write(U,Z,z.onwrite),z.sync=!1}function C(O,z,V,R){var U,Z;V||(U=O,0===(Z=z).length&&Z.needDrain&&(Z.needDrain=!1,U.emit("drain"))),z.pendingcb--,R(),L(O,z)}function w(O,z){z.bufferProcessing=!0;var V=z.bufferedRequest;if(O._writev&&V&&V.next){var U=new Array(z.bufferedRequestCount),Z=z.corkedRequestsFree;Z.entry=V;for(var N=0,G=!0;V;)U[N]=V,V.isBuf||(G=!1),V=V.next,N+=1;U.allBuffers=G,f(O,z,!0,z.length,U,"",Z.finish),z.pendingcb++,z.lastBufferedRequest=null,Z.next?(z.corkedRequestsFree=Z.next,Z.next=null):z.corkedRequestsFree=new o(z),z.bufferedRequestCount=0}else{for(;V;){var W=V.chunk;if(f(O,z,!1,z.objectMode?1:W.length,W,V.encoding,V.callback),V=V.next,z.bufferedRequestCount--,z.writing)break}null===V&&(z.lastBufferedRequest=null)}z.bufferedRequest=V,z.bufferProcessing=!1}function E(O){return O.ending&&0===O.length&&null===O.bufferedRequest&&!O.finished&&!O.writing}function P(O,z){O._final(function(V){z.pendingcb--,V&&g(O,V),z.prefinished=!0,O.emit("prefinish"),L(O,z)})}function L(O,z){var U,Z,V=E(z);if(V&&(U=O,(Z=z).prefinished||Z.finalCalled||("function"!=typeof U._final||Z.destroyed?(Z.prefinished=!0,U.emit("prefinish")):(Z.pendingcb++,Z.finalCalled=!0,k.nextTick(P,U,Z))),0===z.pendingcb&&(z.finished=!0,O.emit("finish"),z.autoDestroy))){var R=O._readableState;(!R||R.autoDestroy&&R.endEmitted)&&O.destroy()}return V}e(6768)(_,p),v.prototype.getBuffer=function(){for(var O=this.bufferedRequest,z=[];O;)z.push(O),O=O.next;return z},function(){try{Object.defineProperty(v.prototype,"buffer",{get:b.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(T=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(O){return!!T.call(this,O)||this===_&&O&&O._writableState instanceof v}})):T=function(O){return O instanceof this},_.prototype.pipe=function(){g(this,new h)},_.prototype.write=function(O,z,V){var R,G,W,ae,U=this._writableState,Z=!1,N=!U.objectMode&&(l.isBuffer(R=O)||R instanceof t);return N&&!l.isBuffer(O)&&(O=l.from(O)),"function"==typeof z&&(V=z,z=null),N?z="buffer":z||(z=U.defaultEncoding),"function"!=typeof V&&(V=x),U.ending?(G=this,W=V,ae=new d,g(G,ae),k.nextTick(W,ae)):(N||function(G,W,ae,re){var ne;return null===ae?ne=new y:"string"==typeof ae||W.objectMode||(ne=new a("chunk",["string","Buffer"],ae)),!ne||(g(G,ne),k.nextTick(re,ne),!1)}(this,U,O,V))&&(U.pendingcb++,Z=function(G,W,ae,re,ne,Q){if(!ae){var $=(ge=re,(ue=W).objectMode||!1===ue.decodeStrings||"string"!=typeof ge||(ge=l.from(ge,ne)),ge);re!==$&&(ae=!0,ne="buffer",re=$)}var ue,ge,X=W.objectMode?1:re.length;W.length+=X;var oe=W.length<W.highWaterMark;if(oe||(W.needDrain=!0),W.writing||W.corked){var fe=W.lastBufferedRequest;W.lastBufferedRequest={chunk:re,encoding:ne,isBuf:ae,callback:Q,next:null},fe?fe.next=W.lastBufferedRequest:W.bufferedRequest=W.lastBufferedRequest,W.bufferedRequestCount+=1}else f(G,W,!1,X,re,ne,Q);return oe}(this,U,N,O,z,V)),Z},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var O=this._writableState;O.corked&&(O.corked--,O.writing||O.corked||O.bufferProcessing||!O.bufferedRequest||w(this,O))},_.prototype.setDefaultEncoding=function(O){if("string"==typeof O&&(O=O.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((O+"").toLowerCase())>-1))throw new m(O);return this._writableState.defaultEncoding=O,this},Object.defineProperty(_.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(O,z,V){V(new s("_write()"))},_.prototype._writev=null,_.prototype.end=function(O,z,V){var U,Z,N,R=this._writableState;return"function"==typeof O?(V=O,O=null,z=null):"function"==typeof z&&(V=z,z=null),null!=O&&this.write(O,z),R.corked&&(R.corked=1,this.uncork()),R.ending||(U=this,N=V,(Z=R).ending=!0,L(U,Z),N&&(Z.finished?k.nextTick(N):U.once("finish",N)),Z.ended=!0,U.writable=!1),this},Object.defineProperty(_.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(O){this._writableState&&(this._writableState.destroyed=O)}}),_.prototype.destroy=i.destroy,_.prototype._undestroy=i.undestroy,_.prototype._destroy=function(O,z){z(O)}},60328:function(ie,F,e){"use strict";var S,k=e(4168);function o(y,d,m){return d in y?Object.defineProperty(y,d,{value:m,enumerable:!0,configurable:!0,writable:!0}):y[d]=m,y}var T=e(15932),b=Symbol("lastResolve"),p=Symbol("lastReject"),l=Symbol("error"),t=Symbol("ended"),i=Symbol("lastPromise"),r=Symbol("handlePromise"),n=Symbol("stream");function a(y,d){return{value:y,done:d}}function s(y){var d=y[b];if(null!==d){var m=y[n].read();null!==m&&(y[i]=null,y[b]=null,y[p]=null,d(a(m,!1)))}}function c(y){k.nextTick(s,y)}var h=Object.getPrototypeOf(function(){}),u=Object.setPrototypeOf((o(S={get stream(){return this[n]},next:function(){var y=this,d=this[l];if(null!==d)return Promise.reject(d);if(this[t])return Promise.resolve(a(void 0,!0));if(this[n].destroyed)return new Promise(function(v,_){k.nextTick(function(){y[l]?_(y[l]):v(a(void 0,!0))})});var m,v,_,g=this[i];if(g)m=new Promise((v=g,_=this,function(f,C){v.then(function(){_[t]?f(a(void 0,!0)):_[r](f,C)},C)}));else{var x=this[n].read();if(null!==x)return Promise.resolve(a(x,!1));m=new Promise(this[r])}return this[i]=m,m}},Symbol.asyncIterator,function(){return this}),o(S,"return",function(){var y=this;return new Promise(function(d,m){y[n].destroy(null,function(g){g?m(g):d(a(void 0,!0))})})}),S),h);ie.exports=function(y){var d,m=Object.create(u,(o(d={},n,{value:y,writable:!0}),o(d,b,{value:null,writable:!0}),o(d,p,{value:null,writable:!0}),o(d,l,{value:null,writable:!0}),o(d,t,{value:y._readableState.endEmitted,writable:!0}),o(d,r,{value:function(g,x){var v=m[n].read();v?(m[i]=null,m[b]=null,m[p]=null,g(a(v,!1))):(m[b]=g,m[p]=x)},writable:!0}),d));return m[i]=null,T(y,function(g){if(g&&"ERR_STREAM_PREMATURE_CLOSE"!==g.code){var x=m[p];return null!==x&&(m[i]=null,m[b]=null,m[p]=null,x(g)),void(m[l]=g)}var v=m[b];null!==v&&(m[i]=null,m[b]=null,m[p]=null,v(a(void 0,!0))),m[t]=!0}),y.on("readable",c.bind(null,m)),m}},47264:function(ie,F,e){"use strict";function S(l,t){var i=Object.keys(l);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(l);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(l,n).enumerable})),i.push.apply(i,r)}return i}function k(l,t,i){return t in l?Object.defineProperty(l,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):l[t]=i,l}var T=e(33576).Buffer,b=e(21576).inspect,p=b&&b.custom||"inspect";ie.exports=function(){function l(){(function(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")})(this,l),this.head=null,this.tail=null,this.length=0}var i;return i=[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};0===this.length&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(0!==this.length){var r=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(0===this.length)return"";for(var n=this.head,a=""+n.data;n=n.next;)a+=r+n.data;return a}},{key:"concat",value:function(r){if(0===this.length)return T.alloc(0);for(var c=T.allocUnsafe(r>>>0),h=this.head,u=0;h;)T.prototype.copy.call(h.data,c,u),u+=h.data.length,h=h.next;return c}},{key:"consume",value:function(r,n){var a;return r<this.head.data.length?(a=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):a=r===this.head.data.length?this.shift():n?this._getString(r):this._getBuffer(r),a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,a=1,s=n.data;for(r-=s.length;n=n.next;){var c=n.data,h=r>c.length?c.length:r;if(s+=h===c.length?c:c.slice(0,r),0==(r-=h)){h===c.length?(++a,this.head=n.next?n.next:this.tail=null):(this.head=n,n.data=c.slice(h));break}++a}return this.length-=a,s}},{key:"_getBuffer",value:function(r){var n=T.allocUnsafe(r),a=this.head,s=1;for(a.data.copy(n),r-=a.data.length;a=a.next;){var c=a.data,h=r>c.length?c.length:r;if(c.copy(n,n.length-r,0,h),0==(r-=h)){h===c.length?(++s,this.head=a.next?a.next:this.tail=null):(this.head=a,a.data=c.slice(h));break}++s}return this.length-=s,n}},{key:p,value:function(r,n){return b(this,function(a){for(var s=1;s<arguments.length;s++){var c=null!=arguments[s]?arguments[s]:{};s%2?S(Object(c),!0).forEach(function(h){k(a,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):S(Object(c)).forEach(function(h){Object.defineProperty(a,h,Object.getOwnPropertyDescriptor(c,h))})}return a}({},n,{depth:0,customInspect:!1}))}}],i&&function o(l,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(l,r.key,r)}}(l.prototype,i),l}()},55324:function(ie,F,e){"use strict";var S=e(4168);function k(b,p){T(b,p),o(b)}function o(b){b._writableState&&!b._writableState.emitClose||b._readableState&&!b._readableState.emitClose||b.emit("close")}function T(b,p){b.emit("error",p)}ie.exports={destroy:function(b,p){var l=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(p?p(b):b&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,S.nextTick(T,this,b)):S.nextTick(T,this,b)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(b||null,function(r){!p&&r?l._writableState?l._writableState.errorEmitted?S.nextTick(o,l):(l._writableState.errorEmitted=!0,S.nextTick(k,l,r)):S.nextTick(k,l,r):p?(S.nextTick(o,l),p(r)):S.nextTick(o,l)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(b,p){var l=b._readableState,t=b._writableState;l&&l.autoDestroy||t&&t.autoDestroy?b.destroy(p):b.emit("error",p)}}},15932:function(ie,F,e){"use strict";var S=e(92784).i.ERR_STREAM_PREMATURE_CLOSE;function k(){}ie.exports=function o(T,b,p){if("function"==typeof b)return o(T,null,b);var y,d;b||(b={}),y=p||k,d=!1,p=function(){if(!d){d=!0;for(var m=arguments.length,g=new Array(m),x=0;x<m;x++)g[x]=arguments[x];y.apply(this,g)}};var l=b.readable||!1!==b.readable&&T.readable,t=b.writable||!1!==b.writable&&T.writable,i=function(){T.writable||n()},r=T._writableState&&T._writableState.finished,n=function(){t=!1,r=!0,l||p.call(T)},a=T._readableState&&T._readableState.endEmitted,s=function(){l=!1,a=!0,t||p.call(T)},c=function(y){p.call(T,y)},h=function(){var y;return l&&!a?(T._readableState&&T._readableState.ended||(y=new S),p.call(T,y)):t&&!r?(T._writableState&&T._writableState.ended||(y=new S),p.call(T,y)):void 0},u=function(){T.req.on("finish",n)};return function(y){return y.setHeader&&"function"==typeof y.abort}(T)?(T.on("complete",n),T.on("abort",h),T.req?u():T.on("request",u)):t&&!T._writableState&&(T.on("end",i),T.on("close",i)),T.on("end",s),T.on("finish",n),!1!==b.error&&T.on("error",c),T.on("close",h),function(){T.removeListener("complete",n),T.removeListener("abort",h),T.removeListener("request",u),T.req&&T.req.removeListener("finish",n),T.removeListener("end",i),T.removeListener("close",i),T.removeListener("finish",n),T.removeListener("end",s),T.removeListener("error",c),T.removeListener("close",h)}}},90555:function(ie){ie.exports=function(){throw new Error("Readable.from is not available in the browser")}},38180:function(ie,F,e){"use strict";var S,k=e(92784).i,o=k.ERR_MISSING_ARGS,T=k.ERR_STREAM_DESTROYED;function b(t){if(t)throw t}function p(t){t()}function l(t,i){return t.pipe(i)}ie.exports=function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];var n,c,a=(c=i).length?"function"!=typeof c[c.length-1]?b:c.pop():b;if(Array.isArray(i[0])&&(i=i[0]),i.length<2)throw new o("streams");var s=i.map(function(c,h){var u=h<i.length-1;return function(y,d,m,g){var _,f;_=g,f=!1,g=function(){f||(f=!0,_.apply(void 0,arguments))};var x=!1;y.on("close",function(){x=!0}),void 0===S&&(S=e(15932)),S(y,{readable:d,writable:m},function(_){if(_)return g(_);x=!0,g()});var v=!1;return function(_){if(!x&&!v)return v=!0,function(f){return f.setHeader&&"function"==typeof f.abort}(y)?y.abort():"function"==typeof y.destroy?y.destroy():void g(_||new T("pipe"))}}(c,u,h>0,function(y){n||(n=y),y&&s.forEach(p),u||(s.forEach(p),a(n))})});return i.reduce(l)}},24888:function(ie,F,e){"use strict";var S=e(92784).i.ERR_INVALID_OPT_VALUE;ie.exports={getHighWaterMark:function(k,o,T,b){var l,p=null!=(l=o).highWaterMark?l.highWaterMark:b?l[T]:null;if(null!=p){if(!isFinite(p)||Math.floor(p)!==p||p<0)throw new S(b?T:"highWaterMark",p);return Math.floor(p)}return k.objectMode?16:16384}}},4776:function(ie,F,e){ie.exports=e(61252).EventEmitter},86032:function(ie,F,e){"use strict";var S=e(30456).Buffer,k=S.isEncoding||function(a){switch((a=""+a)&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(a){var s;switch(this.encoding=function(c){var h=function(u){if(!u)return"utf8";for(var y;;)switch(u){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return u;default:if(y)return;u=(""+u).toLowerCase(),y=!0}}(c);if("string"!=typeof h&&(S.isEncoding===k||!k(c)))throw new Error("Unknown encoding: "+c);return h||c}(a),this.encoding){case"utf16le":this.text=p,this.end=l,s=4;break;case"utf8":this.fillLast=b,s=4;break;case"base64":this.text=t,this.end=i,s=3;break;default:return this.write=r,void(this.end=n)}this.lastNeed=0,this.lastTotal=0,this.lastChar=S.allocUnsafe(s)}function T(a){return a<=127?0:a>>5==6?2:a>>4==14?3:a>>3==30?4:a>>6==2?-1:-2}function b(a){var s=this.lastTotal-this.lastNeed,c=function(h,u,y){if(128!=(192&u[0]))return h.lastNeed=0,"\ufffd";if(h.lastNeed>1&&u.length>1){if(128!=(192&u[1]))return h.lastNeed=1,"\ufffd";if(h.lastNeed>2&&u.length>2&&128!=(192&u[2]))return h.lastNeed=2,"\ufffd"}}(this,a);return void 0!==c?c:this.lastNeed<=a.length?(a.copy(this.lastChar,s,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(a.copy(this.lastChar,s,0,a.length),void(this.lastNeed-=a.length))}function p(a,s){if((a.length-s)%2==0){var c=a.toString("utf16le",s);if(c){var h=c.charCodeAt(c.length-1);if(h>=55296&&h<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=a[a.length-1],a.toString("utf16le",s,a.length-1)}function l(a){var s=a&&a.length?this.write(a):"";return this.lastNeed?s+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):s}function t(a,s){var c=(a.length-s)%3;return 0===c?a.toString("base64",s):(this.lastNeed=3-c,this.lastTotal=3,1===c?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]),a.toString("base64",s,a.length-c))}function i(a){var s=a&&a.length?this.write(a):"";return this.lastNeed?s+this.lastChar.toString("base64",0,3-this.lastNeed):s}function r(a){return a.toString(this.encoding)}function n(a){return a&&a.length?this.write(a):""}F.o=o,o.prototype.write=function(a){if(0===a.length)return"";var s,c;if(this.lastNeed){if(void 0===(s=this.fillLast(a)))return"";c=this.lastNeed,this.lastNeed=0}else c=0;return c<a.length?s?s+this.text(a,c):this.text(a,c):s||""},o.prototype.end=function(a){var s=a&&a.length?this.write(a):"";return this.lastNeed?s+"\ufffd":s},o.prototype.text=function(a,s){var c=function(u,y,d){var m=y.length-1;if(m<d)return 0;var g=T(y[m]);return g>=0?(g>0&&(u.lastNeed=g-1),g):--m<d||-2===g?0:(g=T(y[m]))>=0?(g>0&&(u.lastNeed=g-2),g):--m<d||-2===g?0:(g=T(y[m]))>=0?(g>0&&(2===g?g=0:u.lastNeed=g-3),g):0}(this,a,s);if(!this.lastNeed)return a.toString("utf8",s);this.lastTotal=c;var h=a.length-(c-this.lastNeed);return a.copy(this.lastChar,0,h),a.toString("utf8",s,h)},o.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length),this.lastNeed-=a.length}},55619:function(ie,F,e){var S=e(45408),k=e(86844)("stream-parser");ie.exports=function(u){var y=u&&"function"==typeof u._transform;if(!(y||u&&"function"==typeof u._write))throw new Error("must pass a Writable or Transform stream in");k("extending Parser into stream"),u._bytes=t,u._skipBytes=i,y&&(u._passthrough=r),y?u._transform=a:u._write=n};var o=-1,T=0,b=1,p=2;function l(u){k("initializing parser stream"),u._parserBytesLeft=0,u._parserBuffers=[],u._parserBuffered=0,u._parserState=o,u._parserCallback=null,"function"==typeof u.push&&(u._parserOutput=u.push.bind(u)),u._parserInit=!0}function t(u,y){S(!this._parserCallback,'there is already a "callback" set!'),S(isFinite(u)&&u>0,'can only buffer a finite number of bytes > 0, got "'+u+'"'),this._parserInit||l(this),k("buffering %o bytes",u),this._parserBytesLeft=u,this._parserCallback=y,this._parserState=T}function i(u,y){S(!this._parserCallback,'there is already a "callback" set!'),S(u>0,'can only skip > 0 bytes, got "'+u+'"'),this._parserInit||l(this),k("skipping %o bytes",u),this._parserBytesLeft=u,this._parserCallback=y,this._parserState=b}function r(u,y){S(!this._parserCallback,'There is already a "callback" set!'),S(u>0,'can only pass through > 0 bytes, got "'+u+'"'),this._parserInit||l(this),k("passing through %o bytes",u),this._parserBytesLeft=u,this._parserCallback=y,this._parserState=p}function n(u,y,d){this._parserInit||l(this),k("write(%o bytes)",u.length),"function"==typeof y&&(d=y),c(this,u,null,d)}function a(u,y,d){this._parserInit||l(this),k("transform(%o bytes)",u.length),"function"!=typeof y&&(y=this._parserOutput),c(this,u,y,d)}function s(u,y,d,m){if(u._parserBytesLeft-=y.length,k("%o bytes left for stream piece",u._parserBytesLeft),u._parserState===T?(u._parserBuffers.push(y),u._parserBuffered+=y.length):u._parserState===p&&d(y),0!==u._parserBytesLeft)return m;var g=u._parserCallback;if(g&&u._parserState===T&&u._parserBuffers.length>1&&(y=Buffer.concat(u._parserBuffers,u._parserBuffered)),u._parserState!==T&&(y=null),u._parserCallback=null,u._parserBuffered=0,u._parserState=o,u._parserBuffers.splice(0),g){var x=[];y&&x.push(y),d&&x.push(d);var v=g.length>x.length;v&&x.push(h(m));var _=g.apply(u,x);if(!v||m===_)return m}}var c=h(function u(y,d,m,g){return y._parserBytesLeft<=0?g(new Error("got data but not currently parsing anything")):d.length<=y._parserBytesLeft?function(){return s(y,d,m,g)}:function(){var x=d.slice(0,y._parserBytesLeft);return s(y,x,m,function(v){return v?g(v):d.length>x.length?function(){return u(y,d.slice(x.length),m,g)}:void 0})}});function h(u){return function(){for(var y=u.apply(this,arguments);"function"==typeof y;)y=y();return y}}},86844:function(ie,F,e){var S=e(4168);function k(){var o;try{o=F.storage.debug}catch{}return!o&&void 0!==S&&"env"in S&&(o=S.env.DEBUG),o}(F=ie.exports=e(89416)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},F.formatArgs=function(o){var T=this.useColors;if(o[0]=(T?"%c":"")+this.namespace+(T?" %c":" ")+o[0]+(T?"%c ":" ")+"+"+F.humanize(this.diff),T){var b="color: "+this.color;o.splice(1,0,b,"color: inherit");var p=0,l=0;o[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(p++,"%c"===t&&(l=p))}),o.splice(l,0,b)}},F.save=function(o){try{null==o?F.storage.removeItem("debug"):F.storage.debug=o}catch{}},F.load=k,F.useColors=function(){return!(typeof window>"u"||!window.process||"renderer"!==window.process.type)||typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},F.storage=typeof chrome<"u"&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),F.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],F.formatters.j=function(o){try{return JSON.stringify(o)}catch(T){return"[UnexpectedJSONParseError]: "+T.message}},F.enable(k())},89416:function(ie,F,e){var S;function k(o){function T(){if(T.enabled){var b=T,p=+new Date;b.diff=p-(S||p),b.prev=S,b.curr=p,S=p;for(var t=new Array(arguments.length),i=0;i<t.length;i++)t[i]=arguments[i];t[0]=F.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var r=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(n,a){if("%%"===n)return n;r++;var s=F.formatters[a];return"function"==typeof s&&(n=s.call(b,t[r]),t.splice(r,1),r--),n}),F.formatArgs.call(b,t),(T.log||F.log||console.log.bind(console)).apply(b,t)}}return T.namespace=o,T.enabled=F.enabled(o),T.useColors=F.useColors(),T.color=function(b){var p,l=0;for(p in b)l=(l<<5)-l+b.charCodeAt(p),l|=0;return F.colors[Math.abs(l)%F.colors.length]}(o),"function"==typeof F.init&&F.init(T),T}(F=ie.exports=k.debug=k.default=k).coerce=function(o){return o instanceof Error?o.stack||o.message:o},F.disable=function(){F.enable("")},F.enable=function(o){F.save(o),F.names=[],F.skips=[];for(var T=("string"==typeof o?o:"").split(/[\s,]+/),b=T.length,p=0;p<b;p++)T[p]&&("-"===(o=T[p].replace(/\*/g,".*?"))[0]?F.skips.push(new RegExp("^"+o.substr(1)+"$")):F.names.push(new RegExp("^"+o+"$")))},F.enabled=function(o){var T,b;for(T=0,b=F.skips.length;T<b;T++)if(F.skips[T].test(o))return!1;for(T=0,b=F.names.length;T<b;T++)if(F.names[T].test(o))return!0;return!1},F.humanize=e(93744),F.names=[],F.skips=[],F.formatters={}},93744:function(ie){var F=1e3,e=60*F,S=60*e,k=24*S;function o(T,b,p){if(!(T<b))return T<1.5*b?Math.floor(T/b)+" "+p:Math.ceil(T/b)+" "+p+"s"}ie.exports=function(T,b){b=b||{};var p,t,l=typeof T;if("string"===l&&T.length>0)return function(t){if(!((t=String(t)).length>100)){var i=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(i){var r=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"days":case"day":case"d":return r*k;case"hours":case"hour":case"hrs":case"hr":case"h":return r*S;case"minutes":case"minute":case"mins":case"min":case"m":return r*e;case"seconds":case"second":case"secs":case"sec":case"s":return r*F;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(T);if("number"===l&&!1===isNaN(T))return b.long?o(p=T,k,"day")||o(p,S,"hour")||o(p,e,"minute")||o(p,F,"second")||p+" ms":(t=T)>=k?Math.round(t/k)+"d":t>=S?Math.round(t/S)+"h":t>=e?Math.round(t/e)+"m":t>=F?Math.round(t/F)+"s":t+"ms";throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(T))}},39956:function(ie,F,e){"use strict";var S=e(32868);ie.exports=function(k,o,T){if(null==k)throw Error("First argument should be a string");if(null==o)throw Error("Separator should be a string or a RegExp");T?("string"==typeof T||Array.isArray(T))&&(T={ignore:T}):T={},null==T.escape&&(T.escape=!0),null==T.ignore?T.ignore=["[]","()","{}","<>",'""',"''","``","\u201c\u201d","\xab\xbb"]:("string"==typeof T.ignore&&(T.ignore=[T.ignore]),T.ignore=T.ignore.map(function(n){return 1===n.length&&(n+=n),n}));var b=S.parse(k,{flat:!0,brackets:T.ignore}),p=b[0].split(o);if(T.escape){for(var l=[],t=0;t<p.length;t++){var i=p[t];"\\"===i[i.length-1]&&"\\"!==i[i.length-2]?(l.push(i+o+p[t+1]),t++):l.push(i)}p=l}for(t=0;t<p.length;t++)b[0]=p[t],p[t]=S.stringify(b,{flat:!0});return p}},78484:function(ie){"use strict";ie.exports=function(F){for(var e=F.length,S=new Array(e),k=new Array(e),o=new Array(e),T=new Array(e),b=new Array(e),p=new Array(e),l=0;l<e;++l)S[l]=-1,k[l]=0,o[l]=!1,T[l]=0,b[l]=-1,p[l]=[];var t,i=0,r=[],n=[];function a(h){var u=[h],y=[h];for(S[h]=k[h]=i,o[h]=!0,i+=1;y.length>0;){var d=F[h=y[y.length-1]];if(T[h]<d.length){for(var m=T[h];m<d.length;++m){var g=d[m];if(S[g]<0){S[g]=k[g]=i,o[g]=!0,i+=1,u.push(g),y.push(g);break}o[g]&&(k[h]=0|Math.min(k[h],k[g])),b[g]>=0&&p[h].push(b[g])}T[h]=m}else{if(k[h]===S[h]){var x=[],v=[],_=0;for(m=u.length-1;m>=0;--m){var f=u[m];if(o[f]=!1,x.push(f),v.push(p[f]),_+=p[f].length,b[f]=r.length,f===h){u.length=m;break}}r.push(x);var C=new Array(_);for(m=0;m<v.length;m++)for(var w=0;w<v[m].length;w++)C[--_]=v[m][w];n.push(C)}y.pop()}}}for(l=0;l<e;++l)S[l]<0&&a(l);for(l=0;l<n.length;l++){var s=n[l];if(0!==s.length){s.sort(function(h,u){return h-u}),t=[s[0]];for(var c=1;c<s.length;c++)s[c]!==s[c-1]&&t.push(s[c]);n[l]=t}}return{components:r,adjacencyList:n}}},92848:function(ie,F,e){"use strict";e.r(F);var S=2*Math.PI,k=function(b,p,l,t,i,r,n){var a=b.x,s=b.y;return{x:t*(a*=p)-i*(s*=l)+r,y:i*a+t*s+n}},o=function(b,p){var l=1.5707963267948966===p?.551915024494:-1.5707963267948966===p?-.551915024494:1.3333333333333333*Math.tan(p/4),t=Math.cos(b),i=Math.sin(b),r=Math.cos(b+p),n=Math.sin(b+p);return[{x:t-i*l,y:i+t*l},{x:r+n*l,y:n-r*l},{x:r,y:n}]},T=function(b,p,l,t){var i=b*l+p*t;return i>1&&(i=1),i<-1&&(i=-1),(b*t-p*l<0?-1:1)*Math.acos(i)};F.default=function(b){var p=b.px,l=b.py,t=b.cx,i=b.cy,r=b.rx,n=b.ry,a=b.xAxisRotation,s=void 0===a?0:a,c=b.largeArcFlag,h=void 0===c?0:c,u=b.sweepFlag,y=void 0===u?0:u,d=[];if(0===r||0===n)return[];var m=Math.sin(s*S/360),g=Math.cos(s*S/360),x=g*(p-t)/2+m*(l-i)/2,v=-m*(p-t)/2+g*(l-i)/2;if(0===x&&0===v)return[];r=Math.abs(r),n=Math.abs(n);var _=Math.pow(x,2)/Math.pow(r,2)+Math.pow(v,2)/Math.pow(n,2);_>1&&(r*=Math.sqrt(_),n*=Math.sqrt(_));var C=function(R,U){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return function(Z,N){var G=[],W=!0,ae=!1,re=void 0;try{for(var ne,Q=Z[Symbol.iterator]();!(W=(ne=Q.next()).done)&&(G.push(ne.value),4!==G.length);W=!0);}catch($){ae=!0,re=$}finally{try{!W&&Q.return&&Q.return()}finally{if(ae)throw re}}return G}(R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(function(R,U,Z,N,G,W,ae,re,ne,Q,$,X){var oe=Math.pow(G,2),fe=Math.pow(W,2),ue=Math.pow($,2),ge=Math.pow(X,2),we=oe*fe-oe*ge-fe*ue;we<0&&(we=0),we/=oe*ge+fe*ue;var Te=(we=Math.sqrt(we)*(ae===re?-1:1))*G/W*X,xe=we*-W/G*$,ye=Q*Te-ne*xe+(R+Z)/2,_e=ne*Te+Q*xe+(U+N)/2,Ie=($-Te)/G,De=(X-xe)/W,be=(-$-Te)/G,he=(-X-xe)/W,ce=T(1,0,Ie,De),me=T(Ie,De,be,he);return 0===re&&me>0&&(me-=S),1===re&&me<0&&(me+=S),[ye,_e,ce,me]}(p,l,t,i,r,n,h,y,m,g,x,v)),w=C[0],E=C[1],P=C[2],L=C[3],O=Math.abs(L)/(S/4);Math.abs(1-O)<1e-7&&(O=1);var z=Math.max(Math.ceil(O),1);L/=z;for(var V=0;V<z;V++)d.push(o(P,L)),P+=L;return d.map(function(R){var U=k(R[0],r,n,g,m,w,E),Z=U.x,N=U.y,G=k(R[1],r,n,g,m,w,E),W=G.x,ae=G.y,re=k(R[2],r,n,g,m,w,E);return{x1:Z,y1:N,x2:W,y2:ae,x:re.x,y:re.y}})}},74840:function(ie,F,e){"use strict";var S=e(21984),k=e(49972),o=e(41976),T=e(53520),b=e(45408);ie.exports=function(p){if(Array.isArray(p)&&1===p.length&&"string"==typeof p[0]&&(p=p[0]),"string"==typeof p&&(b(T(p),"String is not an SVG path."),p=S(p)),b(Array.isArray(p),"Argument should be a string or an array of path segments."),p=k(p),!(p=o(p)).length)return[0,0,0,0];for(var l=[1/0,1/0,-1/0,-1/0],t=0,i=p.length;t<i;t++)for(var r=p[t].slice(1),n=0;n<r.length;n+=2)r[n+0]<l[0]&&(l[0]=r[n+0]),r[n+1]<l[1]&&(l[1]=r[n+1]),r[n+0]>l[2]&&(l[2]=r[n+0]),r[n+1]>l[3]&&(l[3]=r[n+1]);return l}},41976:function(ie,F,e){"use strict";ie.exports=function(T){for(var b,p=[],l=0,t=0,i=0,r=0,n=null,a=null,s=0,c=0,h=0,u=T.length;h<u;h++){var y=T[h],d=y[0];switch(d){case"M":i=y[1],r=y[2];break;case"A":var m=S({px:s,py:c,cx:y[6],cy:y[7],rx:y[1],ry:y[2],xAxisRotation:y[3],largeArcFlag:y[4],sweepFlag:y[5]});if(!m.length)continue;for(var g,x=0;x<m.length;x++)y=["C",(g=m[x]).x1,g.y1,g.x2,g.y2,g.x,g.y],x<m.length-1&&p.push(y);break;case"S":var v=s,_=c;"C"!=b&&"S"!=b||(v+=v-l,_+=_-t),y=["C",v,_,y[1],y[2],y[3],y[4]];break;case"T":"Q"==b||"T"==b?(n=2*s-n,a=2*c-a):(n=s,a=c),y=o(s,c,n,a,y[1],y[2]);break;case"Q":n=y[1],a=y[2],y=o(s,c,y[1],y[2],y[3],y[4]);break;case"L":y=k(s,c,y[1],y[2]);break;case"H":y=k(s,c,y[1],c);break;case"V":y=k(s,c,s,y[1]);break;case"Z":y=k(s,c,i,r)}b=d,s=y[y.length-2],c=y[y.length-1],y.length>4?(l=y[y.length-4],t=y[y.length-3]):(l=s,t=c),p.push(y)}return p};var S=e(92848);function k(T,b,p,l){return["C",T,b,p,l,p,l]}function o(T,b,p,l,t,i){return["C",T/3+.6666666666666666*p,b/3+.6666666666666666*l,t/3+.6666666666666666*p,i/3+.6666666666666666*l,t,i]}},20472:function(ie,F,e){"use strict";var S,k=e(74840),o=e(21984),T=e(22235),b=e(53520),p=e(29620),l=document.createElement("canvas"),t=l.getContext("2d");ie.exports=function(i,r){if(!b(i))throw Error("Argument should be valid svg path string");var n,a;r||(r={}),r.shape?(n=r.shape[0],a=r.shape[1]):(n=l.width=r.w||r.width||200,a=l.height=r.h||r.height||200);var s=Math.min(n,a),c=r.stroke||0,h=r.viewbox||r.viewBox||k(i),u=[n/(h[2]-h[0]),a/(h[3]-h[1])],y=Math.min(u[0]||0,u[1]||0)/2;if(t.fillStyle="black",t.fillRect(0,0,n,a),t.fillStyle="white",c&&("number"!=typeof c&&(c=1),t.strokeStyle=c>0?"white":"black",t.lineWidth=Math.abs(c)),t.translate(.5*n,.5*a),t.scale(y,y),function(){if(null!=S)return S;var g=document.createElement("canvas").getContext("2d");if(g.canvas.width=g.canvas.height=1,!window.Path2D)return S=!1;var x=new Path2D("M0,0h1v1h-1v-1Z");g.fillStyle="black",g.fill(x);var v=g.getImageData(0,0,1,1);return S=v&&v.data&&255===v.data[3]}()){var d=new Path2D(i);t.fill(d),c&&t.stroke(d)}else{var m=o(i);T(t,m),t.fill(),c&&t.stroke()}return t.setTransform(1,0,0,1,0,0),p(t,{cutoff:null!=r.cutoff?r.cutoff:.5,radius:null!=r.radius?r.radius:.5*s})}},49760:function(ie,F,e){var S;!function(k){var o=/^\s+/,T=/\s+$/,b=0,p=k.round,l=k.min,t=k.max,i=k.random;function r($,X){if(X=X||{},($=$||"")instanceof r)return $;if(!(this instanceof r))return new r($,X);var fe,ge,we,Te,xe,ye,_e,Ie,De,be,oe=(Te={r:0,g:0,b:0},xe=1,ye=null,_e=null,Ie=null,De=!1,be=!1,"string"==typeof(fe=$)&&(fe=function(he){he=he.replace(o,"").replace(T,"").toLowerCase();var ce,me=!1;if(P[he])he=P[he],me=!0;else if("transparent"==he)return{r:0,g:0,b:0,a:0,format:"name"};return(ce=ne.rgb.exec(he))?{r:ce[1],g:ce[2],b:ce[3]}:(ce=ne.rgba.exec(he))?{r:ce[1],g:ce[2],b:ce[3],a:ce[4]}:(ce=ne.hsl.exec(he))?{h:ce[1],s:ce[2],l:ce[3]}:(ce=ne.hsla.exec(he))?{h:ce[1],s:ce[2],l:ce[3],a:ce[4]}:(ce=ne.hsv.exec(he))?{h:ce[1],s:ce[2],v:ce[3]}:(ce=ne.hsva.exec(he))?{h:ce[1],s:ce[2],v:ce[3],a:ce[4]}:(ce=ne.hex8.exec(he))?{r:R(ce[1]),g:R(ce[2]),b:R(ce[3]),a:G(ce[4]),format:me?"name":"hex8"}:(ce=ne.hex6.exec(he))?{r:R(ce[1]),g:R(ce[2]),b:R(ce[3]),format:me?"name":"hex"}:(ce=ne.hex4.exec(he))?{r:R(ce[1]+""+ce[1]),g:R(ce[2]+""+ce[2]),b:R(ce[3]+""+ce[3]),a:G(ce[4]+""+ce[4]),format:me?"name":"hex8"}:!!(ce=ne.hex3.exec(he))&&{r:R(ce[1]+""+ce[1]),g:R(ce[2]+""+ce[2]),b:R(ce[3]+""+ce[3]),format:me?"name":"hex"}}(fe)),"object"==typeof fe&&(Q(fe.r)&&Q(fe.g)&&Q(fe.b)?(ge=fe.g,we=fe.b,Te={r:255*z(fe.r,255),g:255*z(ge,255),b:255*z(we,255)},De=!0,be="%"===String(fe.r).substr(-1)?"prgb":"rgb"):Q(fe.h)&&Q(fe.s)&&Q(fe.v)?(ye=Z(fe.s),_e=Z(fe.v),Te=function(he,ce,me){he=6*z(he,360),ce=z(ce,100),me=z(me,100);var Pe=k.floor(he),Ae=he-Pe,Ce=me*(1-ce),Oe=me*(1-Ae*ce),Ne=me*(1-(1-Ae)*ce),je=Pe%6;return{r:255*[me,Oe,Ce,Ce,Ne,me][je],g:255*[Ne,me,me,Oe,Ce,Ce][je],b:255*[Ce,Ce,Ne,me,me,Oe][je]}}(fe.h,ye,_e),De=!0,be="hsv"):Q(fe.h)&&Q(fe.s)&&Q(fe.l)&&(ye=Z(fe.s),Ie=Z(fe.l),Te=function(he,ce,me){var Pe,Ae,Ce;function Oe(ve,Me,Le){return Le<0&&(Le+=1),Le>1&&(Le-=1),Le<1/6?ve+6*(Me-ve)*Le:Le<.5?Me:Le<2/3?ve+(Me-ve)*(2/3-Le)*6:ve}if(he=z(he,360),ce=z(ce,100),me=z(me,100),0===ce)Pe=Ae=Ce=me;else{var Ne=me<.5?me*(1+ce):me+ce-me*ce,je=2*me-Ne;Pe=Oe(je,Ne,he+1/3),Ae=Oe(je,Ne,he),Ce=Oe(je,Ne,he-1/3)}return{r:255*Pe,g:255*Ae,b:255*Ce}}(fe.h,ye,Ie),De=!0,be="hsl"),fe.hasOwnProperty("a")&&(xe=fe.a)),xe=O(xe),{ok:De,format:fe.format||be,r:l(255,t(Te.r,0)),g:l(255,t(Te.g,0)),b:l(255,t(Te.b,0)),a:xe});this._originalInput=$,this._r=oe.r,this._g=oe.g,this._b=oe.b,this._a=oe.a,this._roundA=p(100*this._a)/100,this._format=X.format||oe.format,this._gradientType=X.gradientType,this._r<1&&(this._r=p(this._r)),this._g<1&&(this._g=p(this._g)),this._b<1&&(this._b=p(this._b)),this._ok=oe.ok,this._tc_id=b++}function n($,X,oe){$=z($,255),X=z(X,255),oe=z(oe,255);var fe,ue,ge=t($,X,oe),we=l($,X,oe),Te=(ge+we)/2;if(ge==we)fe=ue=0;else{var xe=ge-we;switch(ue=Te>.5?xe/(2-ge-we):xe/(ge+we),ge){case $:fe=(X-oe)/xe+(X<oe?6:0);break;case X:fe=(oe-$)/xe+2;break;case oe:fe=($-X)/xe+4}fe/=6}return{h:fe,s:ue,l:Te}}function a($,X,oe){$=z($,255),X=z(X,255),oe=z(oe,255);var fe,ue,ge=t($,X,oe),we=l($,X,oe),Te=ge,xe=ge-we;if(ue=0===ge?0:xe/ge,ge==we)fe=0;else{switch(ge){case $:fe=(X-oe)/xe+(X<oe?6:0);break;case X:fe=(oe-$)/xe+2;break;case oe:fe=($-X)/xe+4}fe/=6}return{h:fe,s:ue,v:Te}}function s($,X,oe,fe){var ue=[U(p($).toString(16)),U(p(X).toString(16)),U(p(oe).toString(16))];return fe&&ue[0].charAt(0)==ue[0].charAt(1)&&ue[1].charAt(0)==ue[1].charAt(1)&&ue[2].charAt(0)==ue[2].charAt(1)?ue[0].charAt(0)+ue[1].charAt(0)+ue[2].charAt(0):ue.join("")}function c($,X,oe,fe){return[U(N(fe)),U(p($).toString(16)),U(p(X).toString(16)),U(p(oe).toString(16))].join("")}function h($,X){X=0===X?0:X||10;var oe=r($).toHsl();return oe.s-=X/100,oe.s=V(oe.s),r(oe)}function u($,X){X=0===X?0:X||10;var oe=r($).toHsl();return oe.s+=X/100,oe.s=V(oe.s),r(oe)}function y($){return r($).desaturate(100)}function d($,X){X=0===X?0:X||10;var oe=r($).toHsl();return oe.l+=X/100,oe.l=V(oe.l),r(oe)}function m($,X){X=0===X?0:X||10;var oe=r($).toRgb();return oe.r=t(0,l(255,oe.r-p(-X/100*255))),oe.g=t(0,l(255,oe.g-p(-X/100*255))),oe.b=t(0,l(255,oe.b-p(-X/100*255))),r(oe)}function g($,X){X=0===X?0:X||10;var oe=r($).toHsl();return oe.l-=X/100,oe.l=V(oe.l),r(oe)}function x($,X){var oe=r($).toHsl(),fe=(oe.h+X)%360;return oe.h=fe<0?360+fe:fe,r(oe)}function v($){var X=r($).toHsl();return X.h=(X.h+180)%360,r(X)}function _($){var X=r($).toHsl(),oe=X.h;return[r($),r({h:(oe+120)%360,s:X.s,l:X.l}),r({h:(oe+240)%360,s:X.s,l:X.l})]}function f($){var X=r($).toHsl(),oe=X.h;return[r($),r({h:(oe+90)%360,s:X.s,l:X.l}),r({h:(oe+180)%360,s:X.s,l:X.l}),r({h:(oe+270)%360,s:X.s,l:X.l})]}function C($){var X=r($).toHsl(),oe=X.h;return[r($),r({h:(oe+72)%360,s:X.s,l:X.l}),r({h:(oe+216)%360,s:X.s,l:X.l})]}function w($,X,oe){X=X||6,oe=oe||30;var fe=r($).toHsl(),ue=360/oe,ge=[r($)];for(fe.h=(fe.h-(ue*X>>1)+720)%360;--X;)fe.h=(fe.h+ue)%360,ge.push(r(fe));return ge}function E($,X){X=X||6;for(var oe=r($).toHsv(),fe=oe.h,ue=oe.s,ge=oe.v,we=[],Te=1/X;X--;)we.push(r({h:fe,s:ue,v:ge})),ge=(ge+Te)%1;return we}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var $=this.toRgb();return(299*$.r+587*$.g+114*$.b)/1e3},getLuminance:function(){var $,X,oe,fe=this.toRgb();return X=fe.g/255,oe=fe.b/255,.2126*(($=fe.r/255)<=.03928?$/12.92:k.pow(($+.055)/1.055,2.4))+.7152*(X<=.03928?X/12.92:k.pow((X+.055)/1.055,2.4))+.0722*(oe<=.03928?oe/12.92:k.pow((oe+.055)/1.055,2.4))},setAlpha:function($){return this._a=O($),this._roundA=p(100*this._a)/100,this},toHsv:function(){var $=a(this._r,this._g,this._b);return{h:360*$.h,s:$.s,v:$.v,a:this._a}},toHsvString:function(){var $=a(this._r,this._g,this._b),X=p(360*$.h),oe=p(100*$.s),fe=p(100*$.v);return 1==this._a?"hsv("+X+", "+oe+"%, "+fe+"%)":"hsva("+X+", "+oe+"%, "+fe+"%, "+this._roundA+")"},toHsl:function(){var $=n(this._r,this._g,this._b);return{h:360*$.h,s:$.s,l:$.l,a:this._a}},toHslString:function(){var $=n(this._r,this._g,this._b),X=p(360*$.h),oe=p(100*$.s),fe=p(100*$.l);return 1==this._a?"hsl("+X+", "+oe+"%, "+fe+"%)":"hsla("+X+", "+oe+"%, "+fe+"%, "+this._roundA+")"},toHex:function($){return s(this._r,this._g,this._b,$)},toHexString:function($){return"#"+this.toHex($)},toHex8:function($){return oe=this._g,fe=this._b,ue=this._a,ge=$,we=[U(p(this._r).toString(16)),U(p(oe).toString(16)),U(p(fe).toString(16)),U(N(ue))],ge&&we[0].charAt(0)==we[0].charAt(1)&&we[1].charAt(0)==we[1].charAt(1)&&we[2].charAt(0)==we[2].charAt(1)&&we[3].charAt(0)==we[3].charAt(1)?we[0].charAt(0)+we[1].charAt(0)+we[2].charAt(0)+we[3].charAt(0):we.join("");var oe,fe,ue,ge,we},toHex8String:function($){return"#"+this.toHex8($)},toRgb:function(){return{r:p(this._r),g:p(this._g),b:p(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+p(this._r)+", "+p(this._g)+", "+p(this._b)+")":"rgba("+p(this._r)+", "+p(this._g)+", "+p(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:p(100*z(this._r,255))+"%",g:p(100*z(this._g,255))+"%",b:p(100*z(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+p(100*z(this._r,255))+"%, "+p(100*z(this._g,255))+"%, "+p(100*z(this._b,255))+"%)":"rgba("+p(100*z(this._r,255))+"%, "+p(100*z(this._g,255))+"%, "+p(100*z(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(L[s(this._r,this._g,this._b,!0)]||!1)},toFilter:function($){var X="#"+c(this._r,this._g,this._b,this._a),oe=X,fe=this._gradientType?"GradientType = 1, ":"";if($){var ue=r($);oe="#"+c(ue._r,ue._g,ue._b,ue._a)}return"progid:DXImageTransform.Microsoft.gradient("+fe+"startColorstr="+X+",endColorstr="+oe+")"},toString:function($){var X=!!$;$=$||this._format;var oe=!1;return X||!(this._a<1&&this._a>=0)||"hex"!==$&&"hex6"!==$&&"hex3"!==$&&"hex4"!==$&&"hex8"!==$&&"name"!==$?("rgb"===$&&(oe=this.toRgbString()),"prgb"===$&&(oe=this.toPercentageRgbString()),"hex"!==$&&"hex6"!==$||(oe=this.toHexString()),"hex3"===$&&(oe=this.toHexString(!0)),"hex4"===$&&(oe=this.toHex8String(!0)),"hex8"===$&&(oe=this.toHex8String()),"name"===$&&(oe=this.toName()),"hsl"===$&&(oe=this.toHslString()),"hsv"===$&&(oe=this.toHsvString()),oe||this.toHexString()):"name"===$&&0===this._a?this.toName():this.toRgbString()},clone:function(){return r(this.toString())},_applyModification:function($,X){var oe=$.apply(null,[this].concat([].slice.call(X)));return this._r=oe._r,this._g=oe._g,this._b=oe._b,this.setAlpha(oe._a),this},lighten:function(){return this._applyModification(d,arguments)},brighten:function(){return this._applyModification(m,arguments)},darken:function(){return this._applyModification(g,arguments)},desaturate:function(){return this._applyModification(h,arguments)},saturate:function(){return this._applyModification(u,arguments)},greyscale:function(){return this._applyModification(y,arguments)},spin:function(){return this._applyModification(x,arguments)},_applyCombination:function($,X){return $.apply(null,[this].concat([].slice.call(X)))},analogous:function(){return this._applyCombination(w,arguments)},complement:function(){return this._applyCombination(v,arguments)},monochromatic:function(){return this._applyCombination(E,arguments)},splitcomplement:function(){return this._applyCombination(C,arguments)},triad:function(){return this._applyCombination(_,arguments)},tetrad:function(){return this._applyCombination(f,arguments)}},r.fromRatio=function($,X){if("object"==typeof $){var oe={};for(var fe in $)$.hasOwnProperty(fe)&&(oe[fe]="a"===fe?$[fe]:Z($[fe]));$=oe}return r($,X)},r.equals=function($,X){return!(!$||!X)&&r($).toRgbString()==r(X).toRgbString()},r.random=function(){return r.fromRatio({r:i(),g:i(),b:i()})},r.mix=function($,X,oe){oe=0===oe?0:oe||50;var fe=r($).toRgb(),ue=r(X).toRgb(),ge=oe/100;return r({r:(ue.r-fe.r)*ge+fe.r,g:(ue.g-fe.g)*ge+fe.g,b:(ue.b-fe.b)*ge+fe.b,a:(ue.a-fe.a)*ge+fe.a})},r.readability=function($,X){var oe=r($),fe=r(X);return(k.max(oe.getLuminance(),fe.getLuminance())+.05)/(k.min(oe.getLuminance(),fe.getLuminance())+.05)},r.isReadable=function($,X,oe){var fe,ue,ge,we,Te,xe=r.readability($,X);switch(ue=!1,(ge=oe,"AA"!==(we=((ge=ge||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==we&&(we="AA"),"small"!==(Te=(ge.size||"small").toLowerCase())&&"large"!==Te&&(Te="small"),fe={level:we,size:Te}).level+fe.size){case"AAsmall":case"AAAlarge":ue=xe>=4.5;break;case"AAlarge":ue=xe>=3;break;case"AAAsmall":ue=xe>=7}return ue},r.mostReadable=function($,X,oe){var fe,ue,ge,we,Te=null,xe=0;ue=(oe=oe||{}).includeFallbackColors,ge=oe.level,we=oe.size;for(var ye=0;ye<X.length;ye++)(fe=r.readability($,X[ye]))>xe&&(xe=fe,Te=r(X[ye]));return r.isReadable($,Te,{level:ge,size:we})||!ue?Te:(oe.includeFallbackColors=!1,r.mostReadable($,["#fff","#000"],oe))};var P=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},L=r.hexNames=function($){var X={};for(var oe in $)$.hasOwnProperty(oe)&&(X[$[oe]]=oe);return X}(P);function O($){return $=parseFloat($),(isNaN($)||$<0||$>1)&&($=1),$}function z($,X){var fe;"string"==typeof(fe=$)&&-1!=fe.indexOf(".")&&1===parseFloat(fe)&&($="100%");var oe=function(fe){return"string"==typeof fe&&-1!=fe.indexOf("%")}($);return $=l(X,t(0,parseFloat($))),oe&&($=parseInt($*X,10)/100),k.abs($-X)<1e-6?1:$%X/parseFloat(X)}function V($){return l(1,t(0,$))}function R($){return parseInt($,16)}function U($){return 1==$.length?"0"+$:""+$}function Z($){return $<=1&&($=100*$+"%"),$}function N($){return k.round(255*parseFloat($)).toString(16)}function G($){return R($)/255}var W,ae,re,ne=(ae="[\\s|\\(]+("+(W="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+W+")[,|\\s]+("+W+")\\s*\\)?",re="[\\s|\\(]+("+W+")[,|\\s]+("+W+")[,|\\s]+("+W+")[,|\\s]+("+W+")\\s*\\)?",{CSS_UNIT:new RegExp(W),rgb:new RegExp("rgb"+ae),rgba:new RegExp("rgba"+re),hsl:new RegExp("hsl"+ae),hsla:new RegExp("hsla"+re),hsv:new RegExp("hsv"+ae),hsva:new RegExp("hsva"+re),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function Q($){return!!ne.CSS_UNIT.exec($)}ie.exports?ie.exports=r:void 0===(S=function(){return r}.call(F,e,F,ie))||(ie.exports=S)}(Math)},37816:function(ie){"use strict";ie.exports=e,ie.exports.float32=ie.exports.float=e,ie.exports.fract32=ie.exports.fract=function(S,k){if(S.length){if(S instanceof Float32Array)return new Float32Array(S.length);k instanceof Float32Array||(k=e(S));for(var o=0,T=k.length;o<T;o++)k[o]=S[o]-k[o];return k}return e(S-e(S))};var F=new Float32Array(1);function e(S){return S.length?S instanceof Float32Array?S:new Float32Array(S):(F[0]=S,F[0])}},23464:function(ie,F,e){"use strict";var S=e(65819);ie.exports=T;var k=96;function o(b,p){var l=S(getComputedStyle(b).getPropertyValue(p));return l[0]*T(l[1],b)}function T(b,p){switch(p=p||document.body,b=(b||"px").trim().toLowerCase(),p!==window&&p!==document||(p=document.body),b){case"%":return p.clientHeight/100;case"ch":case"ex":return function(l,t){var i=document.createElement("div");i.style["font-size"]="128"+l,t.appendChild(i);var r=o(i,"font-size")/128;return t.removeChild(i),r}(b,p);case"em":return o(p,"font-size");case"rem":return o(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return k;case"cm":return k/2.54;case"mm":return k/25.4;case"pt":return k/72;case"pc":return k/6}return 1}},55712:function(ie,F,e){"use strict";function S(T){return T}function k(T,b){return"string"==typeof b&&(b=T.objects[b]),"GeometryCollection"===b.type?{type:"FeatureCollection",features:b.geometries.map(function(p){return o(T,p)})}:o(T,b)}function o(T,b){var p=b.id,l=b.bbox,t=null==b.properties?{}:b.properties,i=function(r,n){var a=function(m){if(null==m)return S;var g,x,v=m.scale[0],_=m.scale[1],f=m.translate[0],C=m.translate[1];return function(w,E){E||(g=x=0);var P=2,L=w.length,O=new Array(L);for(O[0]=(g+=w[0])*v+f,O[1]=(x+=w[1])*_+C;P<L;)O[P]=w[P],++P;return O}}(r.transform),s=r.arcs;function c(m,g){g.length&&g.pop();for(var x=s[m<0?~m:m],v=0,_=x.length;v<_;++v)g.push(a(x[v],v));m<0&&function(f,C){for(var w,E=f.length,P=E-C;P<--E;)w=f[P],f[P++]=f[E],f[E]=w}(g,_)}function h(m){return a(m)}function u(m){for(var g=[],x=0,v=m.length;x<v;++x)c(m[x],g);return g.length<2&&g.push(g[0]),g}function y(m){for(var g=u(m);g.length<4;)g.push(g[0]);return g}function d(m){return m.map(y)}return function m(g){var x,v=g.type;switch(v){case"GeometryCollection":return{type:v,geometries:g.geometries.map(m)};case"Point":x=h(g.coordinates);break;case"MultiPoint":x=g.coordinates.map(h);break;case"LineString":x=u(g.arcs);break;case"MultiLineString":x=g.arcs.map(u);break;case"Polygon":x=d(g.arcs);break;case"MultiPolygon":x=g.arcs.map(d);break;default:return null}return{type:v,coordinates:x}}(n)}(T,b);return null==p&&null==l?{type:"Feature",properties:t,geometry:i}:null==l?{type:"Feature",id:p,properties:t,geometry:i}:{type:"Feature",id:p,bbox:l,properties:t,geometry:i}}e.d(F,{NO:function(){return k}})},73384:function(ie,F,e){"use strict";var S=e(54612);ie.exports=function(k){if("function"!=typeof k||!hasOwnProperty.call(k,"length"))return!1;try{if("number"!=typeof k.length||"function"!=typeof k.call||"function"!=typeof k.apply)return!1}catch{return!1}return!S(k)}},57980:function(ie,F,e){"use strict";var S=e(81680),k=e(7328),o=e(33940),T=e(18856),b=function(p,l){return p.replace("%v",T(l))};ie.exports=function(p,l,t){if(!k(t))throw new TypeError(b(l,p));if(!S(p)){if("default"in t)return t.default;if(t.isOptional)return null}var i=o(t.errorMessage);throw S(i)||(i=l),new TypeError(b(i,p))}},32336:function(ie){"use strict";ie.exports=function(F){try{return F.toString()}catch{try{return String(F)}catch{return null}}}},18856:function(ie,F,e){"use strict";var S=e(32336),k=/[\n\r\u2028\u2029]/g;ie.exports=function(o){var T=S(o);return null===T?"<Non-coercible to string value>":(T.length>100&&(T=T.slice(0,99)+"\u2026"),T=T.replace(k,function(b){switch(b){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},7328:function(ie,F,e){"use strict";var S=e(81680),k={object:!0,function:!0,undefined:!0};ie.exports=function(o){return!!S(o)&&hasOwnProperty.call(k,typeof o)}},87396:function(ie,F,e){"use strict";var S=e(57980),k=e(85488);ie.exports=function(o){return k(o)?o:S(o,"%v is not a plain function",arguments[1])}},85488:function(ie,F,e){"use strict";var S=e(73384),k=/^\s*class[\s{/}]/,o=Function.prototype.toString;ie.exports=function(T){return!!S(T)&&!k.test(o.call(T))}},54612:function(ie,F,e){"use strict";var S=e(7328);ie.exports=function(k){if(!S(k))return!1;try{return!!k.constructor&&k.constructor.prototype===k}catch{return!1}}},33940:function(ie,F,e){"use strict";var S=e(81680),k=e(7328),o=Object.prototype.toString;ie.exports=function(T){if(!S(T))return null;if(k(T)){var b=T.toString;if("function"!=typeof b||b===o)return null}try{return""+T}catch{return null}}},18496:function(ie,F,e){"use strict";var S=e(57980),k=e(81680);ie.exports=function(o){return k(o)?o:S(o,"Cannot use %v",arguments[1])}},81680:function(ie){"use strict";ie.exports=function(F){return null!=F}},14144:function(ie,F,e){"use strict";var S=e(308),k=e(10352),o=e(33576).Buffer;e.g.__TYPEDARRAY_POOL||(e.g.__TYPEDARRAY_POOL={UINT8:k([32,0]),UINT16:k([32,0]),UINT32:k([32,0]),BIGUINT64:k([32,0]),INT8:k([32,0]),INT16:k([32,0]),INT32:k([32,0]),BIGINT64:k([32,0]),FLOAT:k([32,0]),DOUBLE:k([32,0]),DATA:k([32,0]),UINT8C:k([32,0]),BUFFER:k([32,0])});var T=typeof Uint8ClampedArray<"u",b=typeof BigUint64Array<"u",p=typeof BigInt64Array<"u",l=e.g.__TYPEDARRAY_POOL;l.UINT8C||(l.UINT8C=k([32,0])),l.BIGUINT64||(l.BIGUINT64=k([32,0])),l.BIGINT64||(l.BIGINT64=k([32,0])),l.BUFFER||(l.BUFFER=k([32,0]));var t=l.DATA,i=l.BUFFER;function r(C){if(C){var E=S.log2(C.length||C.byteLength);t[E].push(C)}}function n(C){C=S.nextPow2(C);var w=S.log2(C),E=t[w];return E.length>0?E.pop():new ArrayBuffer(C)}function a(C){return new Uint8Array(n(C),0,C)}function s(C){return new Uint16Array(n(2*C),0,C)}function c(C){return new Uint32Array(n(4*C),0,C)}function h(C){return new Int8Array(n(C),0,C)}function u(C){return new Int16Array(n(2*C),0,C)}function y(C){return new Int32Array(n(4*C),0,C)}function d(C){return new Float32Array(n(4*C),0,C)}function m(C){return new Float64Array(n(8*C),0,C)}function g(C){return T?new Uint8ClampedArray(n(C),0,C):a(C)}function x(C){return b?new BigUint64Array(n(8*C),0,C):null}function v(C){return p?new BigInt64Array(n(8*C),0,C):null}function _(C){return new DataView(n(C),0,C)}function f(C){C=S.nextPow2(C);var w=S.log2(C),E=i[w];return E.length>0?E.pop():new o(C)}F.free=function(C){if(o.isBuffer(C))i[S.log2(C.length)].push(C);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(C)&&(C=C.buffer),!C)return;var E=0|S.log2(C.length||C.byteLength);t[E].push(C)}},F.freeUint8=F.freeUint16=F.freeUint32=F.freeBigUint64=F.freeInt8=F.freeInt16=F.freeInt32=F.freeBigInt64=F.freeFloat32=F.freeFloat=F.freeFloat64=F.freeDouble=F.freeUint8Clamped=F.freeDataView=function(C){r(C.buffer)},F.freeArrayBuffer=r,F.freeBuffer=function(C){i[S.log2(C.length)].push(C)},F.malloc=function(C,w){if(void 0===w||"arraybuffer"===w)return n(C);switch(w){case"uint8":return a(C);case"uint16":return s(C);case"uint32":return c(C);case"int8":return h(C);case"int16":return u(C);case"int32":return y(C);case"float":case"float32":return d(C);case"double":case"float64":return m(C);case"uint8_clamped":return g(C);case"bigint64":return v(C);case"biguint64":return x(C);case"buffer":return f(C);case"data":case"dataview":return _(C);default:return null}return null},F.mallocArrayBuffer=n,F.mallocUint8=a,F.mallocUint16=s,F.mallocUint32=c,F.mallocInt8=h,F.mallocInt16=u,F.mallocInt32=y,F.mallocFloat32=F.mallocFloat=d,F.mallocFloat64=F.mallocDouble=m,F.mallocUint8Clamped=g,F.mallocBigUint64=x,F.mallocBigInt64=v,F.mallocDataView=_,F.mallocBuffer=f,F.clearCache=function(){for(var C=0;C<32;++C)l.UINT8[C].length=0,l.UINT16[C].length=0,l.UINT32[C].length=0,l.INT8[C].length=0,l.INT16[C].length=0,l.INT32[C].length=0,l.FLOAT[C].length=0,l.DOUBLE[C].length=0,l.BIGUINT64[C].length=0,l.BIGINT64[C].length=0,l.UINT8C[C].length=0,t[C].length=0,i[C].length=0}},92384:function(ie){var F=/[\'\"]/;ie.exports=function(e){return e?(F.test(e.charAt(0))&&(e=e.substr(1)),F.test(e.charAt(e.length-1))&&(e=e.substr(0,e.length-1)),e):""}},45223:function(ie){"use strict";ie.exports=function(F,e,S){Array.isArray(S)||(S=[].slice.call(arguments,2));for(var k=0,o=S.length;k<o;k++){var T=S[k];for(var b in T)if((void 0===e[b]||Array.isArray(e[b])||F[b]!==e[b])&&b in e){var p;if(!0===T[b])p=e[b];else if(!1===T[b]||"function"==typeof T[b]&&void 0===(p=T[b](e[b],F,e)))continue;F[b]=p}}return F}},96656:function(ie,F,e){function S(k){try{if(!e.g.localStorage)return!1}catch{return!1}var o=e.g.localStorage[k];return null!=o&&"true"===String(o).toLowerCase()}ie.exports=function(k,o){if(S("noDeprecation"))return k;var T=!1;return function(){if(!T){if(S("throwDeprecation"))throw new Error(o);S("traceDeprecation")?console.trace(o):console.warn(o),T=!0}return k.apply(this,arguments)}}},75272:function(ie){ie.exports=function(F){return F&&"object"==typeof F&&"function"==typeof F.copy&&"function"==typeof F.fill&&"function"==typeof F.readUInt8}},41088:function(ie,F,e){"use strict";var S=e(91148),k=e(84420),o=e(96632),T=e(7728);function b(z){return z.call.bind(z)}var p=typeof BigInt<"u",l=typeof Symbol<"u",t=b(Object.prototype.toString),i=b(Number.prototype.valueOf),r=b(String.prototype.valueOf),n=b(Boolean.prototype.valueOf);if(p)var a=b(BigInt.prototype.valueOf);if(l)var s=b(Symbol.prototype.valueOf);function c(z,V){if("object"!=typeof z)return!1;try{return V(z),!0}catch{return!1}}function h(z){return"[object Map]"===t(z)}function u(z){return"[object Set]"===t(z)}function y(z){return"[object WeakMap]"===t(z)}function d(z){return"[object WeakSet]"===t(z)}function m(z){return"[object ArrayBuffer]"===t(z)}function g(z){return typeof ArrayBuffer<"u"&&(m.working?m(z):z instanceof ArrayBuffer)}function x(z){return"[object DataView]"===t(z)}function v(z){return typeof DataView<"u"&&(x.working?x(z):z instanceof DataView)}F.isArgumentsObject=S,F.isGeneratorFunction=k,F.isTypedArray=T,F.isPromise=function(z){return typeof Promise<"u"&&z instanceof Promise||null!==z&&"object"==typeof z&&"function"==typeof z.then&&"function"==typeof z.catch},F.isArrayBufferView=function(z){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(z):T(z)||v(z)},F.isUint8Array=function(z){return"Uint8Array"===o(z)},F.isUint8ClampedArray=function(z){return"Uint8ClampedArray"===o(z)},F.isUint16Array=function(z){return"Uint16Array"===o(z)},F.isUint32Array=function(z){return"Uint32Array"===o(z)},F.isInt8Array=function(z){return"Int8Array"===o(z)},F.isInt16Array=function(z){return"Int16Array"===o(z)},F.isInt32Array=function(z){return"Int32Array"===o(z)},F.isFloat32Array=function(z){return"Float32Array"===o(z)},F.isFloat64Array=function(z){return"Float64Array"===o(z)},F.isBigInt64Array=function(z){return"BigInt64Array"===o(z)},F.isBigUint64Array=function(z){return"BigUint64Array"===o(z)},h.working=typeof Map<"u"&&h(new Map),F.isMap=function(z){return typeof Map<"u"&&(h.working?h(z):z instanceof Map)},u.working=typeof Set<"u"&&u(new Set),F.isSet=function(z){return typeof Set<"u"&&(u.working?u(z):z instanceof Set)},y.working=typeof WeakMap<"u"&&y(new WeakMap),F.isWeakMap=function(z){return typeof WeakMap<"u"&&(y.working?y(z):z instanceof WeakMap)},d.working=typeof WeakSet<"u"&&d(new WeakSet),F.isWeakSet=function(z){return d(z)},m.working=typeof ArrayBuffer<"u"&&m(new ArrayBuffer),F.isArrayBuffer=g,x.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&x(new DataView(new ArrayBuffer(1),0,1)),F.isDataView=v;var _=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function f(z){return"[object SharedArrayBuffer]"===t(z)}function C(z){return void 0!==_&&(void 0===f.working&&(f.working=f(new _)),f.working?f(z):z instanceof _)}function w(z){return c(z,i)}function E(z){return c(z,r)}function P(z){return c(z,n)}function L(z){return p&&c(z,a)}function O(z){return l&&c(z,s)}F.isSharedArrayBuffer=C,F.isAsyncFunction=function(z){return"[object AsyncFunction]"===t(z)},F.isMapIterator=function(z){return"[object Map Iterator]"===t(z)},F.isSetIterator=function(z){return"[object Set Iterator]"===t(z)},F.isGeneratorObject=function(z){return"[object Generator]"===t(z)},F.isWebAssemblyCompiledModule=function(z){return"[object WebAssembly.Module]"===t(z)},F.isNumberObject=w,F.isStringObject=E,F.isBooleanObject=P,F.isBigIntObject=L,F.isSymbolObject=O,F.isBoxedPrimitive=function(z){return w(z)||E(z)||P(z)||L(z)||O(z)},F.isAnyArrayBuffer=function(z){return typeof Uint8Array<"u"&&(g(z)||C(z))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(z){Object.defineProperty(F,z,{enumerable:!1,value:function(){throw new Error(z+" is not supported in userland")}})})},35840:function(ie,F,e){var S=e(4168),k=Object.getOwnPropertyDescriptors||function(O){for(var z=Object.keys(O),V={},R=0;R<z.length;R++)V[z[R]]=Object.getOwnPropertyDescriptor(O,z[R]);return V},o=/%[sdj%]/g;F.format=function(O){if(!y(O)){for(var z=[],V=0;V<arguments.length;V++)z.push(l(arguments[V]));return z.join(" ")}V=1;for(var R=arguments,U=R.length,Z=String(O).replace(o,function(G){if("%%"===G)return"%";if(V>=U)return G;switch(G){case"%s":return String(R[V++]);case"%d":return Number(R[V++]);case"%j":try{return JSON.stringify(R[V++])}catch{return"[Circular]"}default:return G}}),N=R[V];V<U;N=R[++V])h(N)||!g(N)?Z+=" "+N:Z+=" "+l(N);return Z},F.deprecate=function(O,z){if(void 0!==S&&!0===S.noDeprecation)return O;if(void 0===S)return function(){return F.deprecate(O,z).apply(this,arguments)};var V=!1;return function(){if(!V){if(S.throwDeprecation)throw new Error(z);S.traceDeprecation?console.trace(z):console.error(z),V=!0}return O.apply(this,arguments)}};var T={},b=/^$/;if(S.env.NODE_DEBUG){var p=S.env.NODE_DEBUG;p=p.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),b=new RegExp("^"+p+"$","i")}function l(O,z){var V={seen:[],stylize:i};return arguments.length>=3&&(V.depth=arguments[2]),arguments.length>=4&&(V.colors=arguments[3]),c(z)?V.showHidden=z:z&&F._extend(V,z),d(V.showHidden)&&(V.showHidden=!1),d(V.depth)&&(V.depth=2),d(V.colors)&&(V.colors=!1),d(V.customInspect)&&(V.customInspect=!0),V.colors&&(V.stylize=t),r(V,O,V.depth)}function t(O,z){var V=l.styles[z];return V?"\x1b["+l.colors[V][0]+"m"+O+"\x1b["+l.colors[V][1]+"m":O}function i(O,z){return O}function r(O,z,V){if(O.customInspect&&z&&_(z.inspect)&&z.inspect!==F.inspect&&(!z.constructor||z.constructor.prototype!==z)){var R=z.inspect(V,O);return y(R)||(R=r(O,R,V)),R}var U=function(Q,$){if(d($))return Q.stylize("undefined","undefined");if(y($)){var X="'"+JSON.stringify($).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return Q.stylize(X,"string")}return u($)?Q.stylize(""+$,"number"):c($)?Q.stylize(""+$,"boolean"):h($)?Q.stylize("null","null"):void 0}(O,z);if(U)return U;var $,Z=Object.keys(z),N=($={},Z.forEach(function(X,oe){$[X]=!0}),$);if(O.showHidden&&(Z=Object.getOwnPropertyNames(z)),v(z)&&(Z.indexOf("message")>=0||Z.indexOf("description")>=0))return n(z);if(0===Z.length){if(_(z))return O.stylize("[Function"+(z.name?": "+z.name:"")+"]","special");if(m(z))return O.stylize(RegExp.prototype.toString.call(z),"regexp");if(x(z))return O.stylize(Date.prototype.toString.call(z),"date");if(v(z))return n(z)}var W,ae="",re=!1,ne=["{","}"];return s(z)&&(re=!0,ne=["[","]"]),_(z)&&(ae=" [Function"+(z.name?": "+z.name:"")+"]"),m(z)&&(ae=" "+RegExp.prototype.toString.call(z)),x(z)&&(ae=" "+Date.prototype.toUTCString.call(z)),v(z)&&(ae=" "+n(z)),0!==Z.length||re&&0!=z.length?V<0?m(z)?O.stylize(RegExp.prototype.toString.call(z),"regexp"):O.stylize("[Object]","special"):(O.seen.push(z),W=re?function(Q,$,X,oe,fe){for(var ue=[],ge=0,we=$.length;ge<we;++ge)E($,String(ge))?ue.push(a(Q,$,X,oe,String(ge),!0)):ue.push("");return fe.forEach(function(Te){Te.match(/^\d+$/)||ue.push(a(Q,$,X,oe,Te,!0))}),ue}(O,z,V,N,Z):Z.map(function(Q){return a(O,z,V,N,Q,re)}),O.seen.pop(),function(Q,$,X){return Q.reduce(function(oe,fe){return fe.indexOf("\n"),oe+fe.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?X[0]+(""===$?"":$+"\n ")+" "+Q.join(",\n  ")+" "+X[1]:X[0]+$+" "+Q.join(", ")+" "+X[1]}(W,ae,ne)):ne[0]+ae+ne[1]}function n(O){return"["+Error.prototype.toString.call(O)+"]"}function a(O,z,V,R,U,Z){var N,G,W;if((W=Object.getOwnPropertyDescriptor(z,U)||{value:z[U]}).get?G=O.stylize(W.set?"[Getter/Setter]":"[Getter]","special"):W.set&&(G=O.stylize("[Setter]","special")),E(R,U)||(N="["+U+"]"),G||(O.seen.indexOf(W.value)<0?(G=h(V)?r(O,W.value,null):r(O,W.value,V-1)).indexOf("\n")>-1&&(G=Z?G.split("\n").map(function(ae){return"  "+ae}).join("\n").slice(2):"\n"+G.split("\n").map(function(ae){return"   "+ae}).join("\n")):G=O.stylize("[Circular]","special")),d(N)){if(Z&&U.match(/^\d+$/))return G;(N=JSON.stringify(""+U)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(N=N.slice(1,-1),N=O.stylize(N,"name")):(N=N.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),N=O.stylize(N,"string"))}return N+": "+G}function s(O){return Array.isArray(O)}function c(O){return"boolean"==typeof O}function h(O){return null===O}function u(O){return"number"==typeof O}function y(O){return"string"==typeof O}function d(O){return void 0===O}function m(O){return g(O)&&"[object RegExp]"===f(O)}function g(O){return"object"==typeof O&&null!==O}function x(O){return g(O)&&"[object Date]"===f(O)}function v(O){return g(O)&&("[object Error]"===f(O)||O instanceof Error)}function _(O){return"function"==typeof O}function f(O){return Object.prototype.toString.call(O)}function C(O){return O<10?"0"+O.toString(10):O.toString(10)}F.debuglog=function(O){if(O=O.toUpperCase(),!T[O])if(b.test(O)){var z=S.pid;T[O]=function(){var V=F.format.apply(F,arguments);console.error("%s %d: %s",O,z,V)}}else T[O]=function(){};return T[O]},F.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},F.types=e(41088),F.isArray=s,F.isBoolean=c,F.isNull=h,F.isNullOrUndefined=function(O){return null==O},F.isNumber=u,F.isString=y,F.isSymbol=function(O){return"symbol"==typeof O},F.isUndefined=d,F.isRegExp=m,F.types.isRegExp=m,F.isObject=g,F.isDate=x,F.types.isDate=x,F.isError=v,F.types.isNativeError=v,F.isFunction=_,F.isPrimitive=function(O){return null===O||"boolean"==typeof O||"number"==typeof O||"string"==typeof O||"symbol"==typeof O||void 0===O},F.isBuffer=e(75272);var w=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(O,z){return Object.prototype.hasOwnProperty.call(O,z)}F.log=function(){var O,z;console.log("%s - %s",(z=[C((O=new Date).getHours()),C(O.getMinutes()),C(O.getSeconds())].join(":"),[O.getDate(),w[O.getMonth()],z].join(" ")),F.format.apply(F,arguments))},F.inherits=e(6768),F._extend=function(O,z){if(!z||!g(z))return O;for(var V=Object.keys(z),R=V.length;R--;)O[V[R]]=z[V[R]];return O};var P=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function L(O,z){if(!O){var V=new Error("Promise was rejected with a falsy value");V.reason=O,O=V}return z(O)}F.promisify=function(O){if("function"!=typeof O)throw new TypeError('The "original" argument must be of type Function');if(P&&O[P]){var z;if("function"!=typeof(z=O[P]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(z,P,{value:z,enumerable:!1,writable:!1,configurable:!0}),z}function z(){for(var V,R,U=new Promise(function(G,W){V=G,R=W}),Z=[],N=0;N<arguments.length;N++)Z.push(arguments[N]);Z.push(function(G,W){G?R(G):V(W)});try{O.apply(this,Z)}catch(G){R(G)}return U}return Object.setPrototypeOf(z,Object.getPrototypeOf(O)),P&&Object.defineProperty(z,P,{value:z,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(z,k(O))},F.promisify.custom=P,F.callbackify=function(O){if("function"!=typeof O)throw new TypeError('The "original" argument must be of type Function');function z(){for(var V=[],R=0;R<arguments.length;R++)V.push(arguments[R]);var U=V.pop();if("function"!=typeof U)throw new TypeError("The last argument must be of type Function");var Z=this,N=function(){return U.apply(Z,arguments)};O.apply(this,V).then(function(G){S.nextTick(N.bind(null,null,G))},function(G){S.nextTick(L.bind(null,G,N))})}return Object.setPrototypeOf(z,Object.getPrototypeOf(O)),Object.defineProperties(z,k(O)),z}},5408:function(ie,F,e){var S=e(13380);ie.exports=function(k){return S("webgl",k)}},96632:function(ie,F,e){"use strict";var S=e(46492),k=e(63436),o=e(57916),T=e(99676),b=e(2304),p=T("Object.prototype.toString"),l=e(46672)(),t=typeof globalThis>"u"?e.g:globalThis,i=k(),r=T("String.prototype.slice"),n=Object.getPrototypeOf,a=T("Array.prototype.indexOf",!0)||function(c,h){for(var u=0;u<c.length;u+=1)if(c[u]===h)return u;return-1},s={__proto__:null};S(i,l&&b&&n?function(c){var h=new t[c];if(Symbol.toStringTag in h){var u=n(h),y=b(u,Symbol.toStringTag);if(!y){var d=n(u);y=b(d,Symbol.toStringTag)}s["$"+c]=o(y.get)}}:function(c){var h=new t[c],u=h.slice||h.set;u&&(s["$"+c]=o(u))}),ie.exports=function(c){if(!c||"object"!=typeof c)return!1;if(!l){var h=r(p(c),8,-1);return a(i,h)>-1?h:"Object"===h&&(u=c,y=!1,S(s,function(d,m){if(!y)try{d(u),y=r(m,1)}catch{}}),y)}var u,y;return b?function(u){var y=!1;return S(s,function(d,m){if(!y)try{"$"+d(u)===m&&(y=r(m,1))}catch{}}),y}(c):null}},67020:function(ie,F,e){var S=e(38700),k=e(50896),o=S.instance();function T(n){this.local=this.regionalOptions[n||""]||this.regionalOptions[""]}k(T.prototype=new S.baseCalendar,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(n,a){if("string"==typeof n){var s=n.match(p);return s?s[0]:""}var c=this._validateYear(n),h=n.month(),u=""+this.toChineseMonth(c,h);return a&&u.length<2&&(u="0"+u),this.isIntercalaryMonth(c,h)&&(u+="i"),u},monthNames:function(n){if("string"==typeof n){var a=n.match(l);return a?a[0]:""}var s=this._validateYear(n),c=n.month(),h=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"][this.toChineseMonth(s,c)-1];return this.isIntercalaryMonth(s,c)&&(h="\u95f0"+h),h},monthNamesShort:function(n){if("string"==typeof n){var a=n.match(t);return a?a[0]:""}var s=this._validateYear(n),c=n.month(),h=["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"][this.toChineseMonth(s,c)-1];return this.isIntercalaryMonth(s,c)&&(h="\u95f0"+h),h},parseMonth:function(n,a){n=this._validateYear(n);var s,c=parseInt(a);if(isNaN(c))"\u95f0"===a[0]&&(s=!0,a=a.substring(1)),"\u6708"===a[a.length-1]&&(a=a.substring(0,a.length-1)),c=1+["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"].indexOf(a);else{var h=a[a.length-1];s="i"===h||"I"===h}return this.toMonthIndex(n,c,s)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(n,a){if(n.year&&(n=n.year()),"number"!=typeof n||n<1888||n>2111)throw a.replace(/\{0\}/,this.local.name);return n},toMonthIndex:function(n,a,s){var c=this.intercalaryMonth(n);if(s&&a!==c||a<1||a>12)throw S.local.invalidMonth.replace(/\{0\}/,this.local.name);return c?!s&&a<=c?a-1:a:a-1},toChineseMonth:function(n,a){n.year&&(a=(n=n.year()).month());var s=this.intercalaryMonth(n);if(a<0||a>(s?12:11))throw S.local.invalidMonth.replace(/\{0\}/,this.local.name);return s?a<s?a+1:a:a+1},intercalaryMonth:function(n){return n=this._validateYear(n),i[n-i[0]]>>13},isIntercalaryMonth:function(n,a){n.year&&(a=(n=n.year()).month());var s=this.intercalaryMonth(n);return!!s&&s===a},leapYear:function(n){return 0!==this.intercalaryMonth(n)},weekOfYear:function(n,a,s){var c,h=this._validateYear(n,S.local.invalidyear),u=r[h-r[0]];(c=o.newDate(u>>9&4095,u>>5&15,31&u)).add(4-(c.dayOfWeek()||7),"d");var g=this.toJD(n,a,s)-c.toJD();return 1+Math.floor(g/7)},monthsInYear:function(n){return this.leapYear(n)?13:12},daysInMonth:function(n,a){n.year&&(a=n.month(),n=n.year()),n=this._validateYear(n);var s=i[n-i[0]];if(a>(s>>13?12:11))throw S.local.invalidMonth.replace(/\{0\}/,this.local.name);return s&1<<12-a?30:29},weekDay:function(n,a,s){return(this.dayOfWeek(n,a,s)||7)<6},toJD:function(n,a,s){var c=this._validate(n,u,s,S.local.invalidDate);n=this._validateYear(c.year()),a=c.month(),s=c.day();var h=this.isIntercalaryMonth(n,a),u=this.toChineseMonth(n,a),y=function(d,m,g,x,v){var _,f,C;if("object"==typeof d)f=d,_=m||{};else{var w;if(!("number"==typeof d&&d>=1888&&d<=2111))throw new Error("Lunar year outside range 1888-2111");if(!("number"==typeof m&&m>=1&&m<=12))throw new Error("Lunar month outside range 1 - 12");if(!("number"==typeof g&&g>=1&&g<=30))throw new Error("Lunar day outside range 1 - 30");"object"==typeof x?(w=!1,_=x):(w=!!x,_={}),f={year:d,month:m,day:g,isIntercalary:w}}C=f.day-1;var E,P=i[f.year-i[0]],L=P>>13;E=L&&(f.month>L||f.isIntercalary)?f.month:f.month-1;for(var O=0;O<E;O++)C+=P&1<<12-O?30:29;var z=r[f.year-r[0]],V=new Date(z>>9&4095,(z>>5&15)-1,(31&z)+C);return _.year=V.getFullYear(),_.month=1+V.getMonth(),_.day=V.getDate(),_}(n,u,s,h);return o.toJD(y.year,y.month,y.day)},fromJD:function(n){var a=o.fromJD(n),s=function(h,u,y,d){var m,g;if("object"==typeof h)m=h,g=u||{};else{if(!("number"==typeof h&&h>=1888&&h<=2111))throw new Error("Solar year outside range 1888-2111");if(!("number"==typeof u&&u>=1&&u<=12))throw new Error("Solar month outside range 1 - 12");if(!("number"==typeof y&&y>=1&&y<=31))throw new Error("Solar day outside range 1 - 31");m={year:h,month:u,day:y},g={}}var x=r[m.year-r[0]];g.year=(m.year<<9|m.month<<5|m.day)>=x?m.year:m.year-1,x=r[g.year-r[0]];var _,f=new Date(x>>9&4095,(x>>5&15)-1,31&x),C=new Date(m.year,m.month-1,m.day);_=Math.round((C-f)/864e5);var w,E=i[g.year-i[0]];for(w=0;w<13;w++){var P=E&1<<12-w?30:29;if(_<P)break;_-=P}var L=E>>13;return!L||w<L?(g.isIntercalary=!1,g.month=1+w):w===L?(g.isIntercalary=!0,g.month=w):(g.isIntercalary=!1,g.month=w),g.day=1+_,g}(a.year(),a.month(),a.day()),c=this.toMonthIndex(s.year,s.month,s.isIntercalary);return this.newDate(s.year,c,s.day)},fromString:function(n){var a=n.match(b),s=this._validateYear(+a[1]),u=this.toMonthIndex(s,+a[2],!!a[3]);return this.newDate(s,u,+a[4])},add:function(n,a,s){var c=n.year(),h=n.month(),u=this.isIntercalaryMonth(c,h),y=this.toChineseMonth(c,h),d=Object.getPrototypeOf(T.prototype).add.call(this,n,a,s);if("y"===s){var m=d.year(),g=d.month(),x=this.isIntercalaryMonth(m,y),v=this.toMonthIndex(m,y,!(!u||!x));v!==g&&d.month(v)}return d}});var b=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,p=/^\d?\d[iI]?/m,l=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?\u6708/m,t=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?/m;S.calendars.chinese=T;var i=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],r=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},89792:function(ie,F,e){var S=e(38700);function o(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}e(50896)(o.prototype=new S.baseCalendar,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var b=this._validate(T,this.minMonth,this.minDay,S.local.invalidYear);return(T=b.year()+(b.year()<0?1:0))%4==3||T%4==-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,S.local.invalidYear||S.regionalOptions[""].invalidYear),13},weekOfYear:function(T,b,p){var l=this.newDate(T,b,p);return l.add(-l.dayOfWeek(),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(T,b){var p=this._validate(T,b,this.minDay,S.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(13===p.month()&&this.leapYear(p.year())?1:0)},weekDay:function(T,b,p){return(this.dayOfWeek(T,b,p)||7)<6},toJD:function(T,b,p){var l=this._validate(T,b,p,S.local.invalidDate);return(T=l.year())<0&&T++,l.day()+30*(l.month()-1)+365*(T-1)+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var b=Math.floor(T)+.5-this.jdEpoch,p=Math.floor((b-Math.floor((b+366)/1461))/365)+1;p<=0&&p--,b=Math.floor(T)+.5-this.newDate(p,1,1).toJD();var l=Math.floor(b/30)+1;return this.newDate(p,l,b-30*(l-1)+1)}}),S.calendars.coptic=o},55668:function(ie,F,e){var S=e(38700);function o(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}e(50896)(o.prototype=new S.baseCalendar,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(b){return this._validate(b,this.minMonth,this.minDay,S.local.invalidYear),!1},monthsInYear:function(b){return this._validate(b,this.minMonth,this.minDay,S.local.invalidYear),13},daysInYear:function(b){return this._validate(b,this.minMonth,this.minDay,S.local.invalidYear),400},weekOfYear:function(b,p,l){var t=this.newDate(b,p,l);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/8)+1},daysInMonth:function(b,p){var l=this._validate(b,p,this.minDay,S.local.invalidMonth);return this.daysPerMonth[l.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(b,p,l){return(this._validate(b,p,l,S.local.invalidDate).day()+1)%8},weekDay:function(b,p,l){var t=this.dayOfWeek(b,p,l);return t>=2&&t<=6},extraInfo:function(b,p,l){var t=this._validate(b,p,l,S.local.invalidDate);return{century:T[Math.floor((t.year()-1)/100)+1]||""}},toJD:function(b,p,l){var t=this._validate(b,p,l,S.local.invalidDate);return b=t.year()+(t.year()<0?1:0),p=t.month(),(l=t.day())+(p>1?16:0)+(p>2?32*(p-2):0)+400*(b-1)+this.jdEpoch-1},fromJD:function(b){b=Math.floor(b+.5)-Math.floor(this.jdEpoch)-1;var p=Math.floor(b/400)+1;b-=400*(p-1),b+=b>15?16:0;var l=Math.floor(b/32)+1;return this.newDate(p<=0?p-1:p,l,b-32*(l-1)+1)}});var T={20:"Fruitbat",21:"Anchovy"};S.calendars.discworld=o},65168:function(ie,F,e){var S=e(38700);function o(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}e(50896)(o.prototype=new S.baseCalendar,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var b=this._validate(T,this.minMonth,this.minDay,S.local.invalidYear);return(T=b.year()+(b.year()<0?1:0))%4==3||T%4==-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,S.local.invalidYear||S.regionalOptions[""].invalidYear),13},weekOfYear:function(T,b,p){var l=this.newDate(T,b,p);return l.add(-l.dayOfWeek(),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(T,b){var p=this._validate(T,b,this.minDay,S.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(13===p.month()&&this.leapYear(p.year())?1:0)},weekDay:function(T,b,p){return(this.dayOfWeek(T,b,p)||7)<6},toJD:function(T,b,p){var l=this._validate(T,b,p,S.local.invalidDate);return(T=l.year())<0&&T++,l.day()+30*(l.month()-1)+365*(T-1)+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var b=Math.floor(T)+.5-this.jdEpoch,p=Math.floor((b-Math.floor((b+366)/1461))/365)+1;p<=0&&p--,b=Math.floor(T)+.5-this.newDate(p,1,1).toJD();var l=Math.floor(b/30)+1;return this.newDate(p,l,b-30*(l-1)+1)}}),S.calendars.ethiopian=o},2084:function(ie,F,e){var S=e(38700);function o(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}function T(b,p){return b-p*Math.floor(b/p)}e(50896)(o.prototype=new S.baseCalendar,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var p=this._validate(b,this.minMonth,this.minDay,S.local.invalidYear);return this._leapYear(p.year())},_leapYear:function(b){return T(7*(b=b<0?b+1:b)+1,19)<7},monthsInYear:function(b){return this._validate(b,this.minMonth,this.minDay,S.local.invalidYear),this._leapYear(b.year?b.year():b)?13:12},weekOfYear:function(b,p,l){var t=this.newDate(b,p,l);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(b){return b=this._validate(b,this.minMonth,this.minDay,S.local.invalidYear).year(),this.toJD(-1===b?1:b+1,7,1)-this.toJD(b,7,1)},daysInMonth:function(b,p){return b.year&&(p=b.month(),b=b.year()),this._validate(b,p,this.minDay,S.local.invalidMonth),12===p&&this.leapYear(b)||8===p&&5===T(this.daysInYear(b),10)?30:9===p&&3===T(this.daysInYear(b),10)?29:this.daysPerMonth[p-1]},weekDay:function(b,p,l){return 6!==this.dayOfWeek(b,p,l)},extraInfo:function(b,p,l){var t=this._validate(b,p,l,S.local.invalidDate);return{yearType:(this.leapYear(t)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(t)%10-3]}},toJD:function(b,p,l){var t=this._validate(b,p,l,S.local.invalidDate);b=t.year(),p=t.month(),l=t.day();var i=b<=0?b+1:b,r=this.jdEpoch+this._delay1(i)+this._delay2(i)+l+1;if(p<7){for(var n=7;n<=this.monthsInYear(b);n++)r+=this.daysInMonth(b,n);for(n=1;n<p;n++)r+=this.daysInMonth(b,n)}else for(n=7;n<p;n++)r+=this.daysInMonth(b,n);return r},_delay1:function(b){var p=Math.floor((235*b-234)/19),t=29*p+Math.floor((12084+13753*p)/25920);return T(3*(t+1),7)<3&&t++,t},_delay2:function(b){var p=this._delay1(b-1),l=this._delay1(b);return this._delay1(b+1)-l==356?2:l-p==382?1:0},fromJD:function(b){b=Math.floor(b)+.5;for(var p=Math.floor(98496*(b-this.jdEpoch)/35975351)-1;b>=this.toJD(-1===p?1:p+1,7,1);)p++;for(var l=b<this.toJD(p,1,1)?7:1;b>this.toJD(p,l,this.daysInMonth(p,l));)l++;var t=b-this.toJD(p,l,1)+1;return this.newDate(p,l,t)}}),S.calendars.hebrew=o},26368:function(ie,F,e){var S=e(38700);function o(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}e(50896)(o.prototype=new S.baseCalendar,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(T){return(11*this._validate(T,this.minMonth,this.minDay,S.local.invalidYear).year()+14)%30<11},weekOfYear:function(T,b,p){var l=this.newDate(T,b,p);return l.add(-l.dayOfWeek(),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInYear:function(T){return this.leapYear(T)?355:354},daysInMonth:function(T,b){var p=this._validate(T,b,this.minDay,S.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(12===p.month()&&this.leapYear(p.year())?1:0)},weekDay:function(T,b,p){return 5!==this.dayOfWeek(T,b,p)},toJD:function(T,b,p){var l=this._validate(T,b,p,S.local.invalidDate);return T=l.year(),b=l.month(),T=T<=0?T+1:T,(p=l.day())+Math.ceil(29.5*(b-1))+354*(T-1)+Math.floor((3+11*T)/30)+this.jdEpoch-1},fromJD:function(T){T=Math.floor(T)+.5;var b=Math.floor((30*(T-this.jdEpoch)+10646)/10631);b=b<=0?b-1:b;var p=Math.min(12,Math.ceil((T-29-this.toJD(b,1,1))/29.5)+1),l=T-this.toJD(b,p,1)+1;return this.newDate(b,p,l)}}),S.calendars.islamic=o},24747:function(ie,F,e){var S=e(38700);function o(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}e(50896)(o.prototype=new S.baseCalendar,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var b=this._validate(T,this.minMonth,this.minDay,S.local.invalidYear);return(T=b.year()<0?b.year()+1:b.year())%4==0},weekOfYear:function(T,b,p){var l=this.newDate(T,b,p);return l.add(4-(l.dayOfWeek()||7),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(T,b){var p=this._validate(T,b,this.minDay,S.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(2===p.month()&&this.leapYear(p.year())?1:0)},weekDay:function(T,b,p){return(this.dayOfWeek(T,b,p)||7)<6},toJD:function(T,b,p){var l=this._validate(T,b,p,S.local.invalidDate);return T=l.year(),b=l.month(),p=l.day(),T<0&&T++,b<=2&&(T--,b+=12),Math.floor(365.25*(T+4716))+Math.floor(30.6001*(b+1))+p-1524.5},fromJD:function(T){var b=Math.floor(T+.5)+1524,p=Math.floor((b-122.1)/365.25),l=Math.floor(365.25*p),t=Math.floor((b-l)/30.6001),i=t-Math.floor(t<14?1:13),r=p-Math.floor(i>2?4716:4715),n=b-l-Math.floor(30.6001*t);return r<=0&&r--,this.newDate(r,i,n)}}),S.calendars.julian=o},65616:function(ie,F,e){var S=e(38700);function o(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}function T(p,l){return p-l*Math.floor(p/l)}function b(p,l){return T(p-1,l)+1}e(50896)(o.prototype=new S.baseCalendar,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(p){return this._validate(p,this.minMonth,this.minDay,S.local.invalidYear),!1},formatYear:function(p){p=this._validate(p,this.minMonth,this.minDay,S.local.invalidYear).year();var l=Math.floor(p/400);return p%=400,p+=p<0?400:0,l+"."+Math.floor(p/20)+"."+p%20},forYear:function(p){if((p=p.split(".")).length<3)throw"Invalid Mayan year";for(var l=0,t=0;t<p.length;t++){var i=parseInt(p[t],10);if(Math.abs(i)>19||t>0&&i<0)throw"Invalid Mayan year";l=20*l+i}return l},monthsInYear:function(p){return this._validate(p,this.minMonth,this.minDay,S.local.invalidYear),18},weekOfYear:function(p,l,t){return this._validate(p,l,t,S.local.invalidDate),0},daysInYear:function(p){return this._validate(p,this.minMonth,this.minDay,S.local.invalidYear),360},daysInMonth:function(p,l){return this._validate(p,l,this.minDay,S.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(p,l,t){return this._validate(p,l,t,S.local.invalidDate).day()},weekDay:function(p,l,t){return this._validate(p,l,t,S.local.invalidDate),!0},extraInfo:function(p,l,t){var i=this._validate(p,l,t,S.local.invalidDate).toJD(),r=this._toHaab(i),n=this._toTzolkin(i);return{haabMonthName:this.local.haabMonths[r[0]-1],haabMonth:r[0],haabDay:r[1],tzolkinDayName:this.local.tzolkinMonths[n[0]-1],tzolkinDay:n[0],tzolkinTrecena:n[1]}},_toHaab:function(p){var l=T(8+(p-=this.jdEpoch)+340,365);return[Math.floor(l/20)+1,T(l,20)]},_toTzolkin:function(p){return[b(20+(p-=this.jdEpoch),20),b(p+4,13)]},toJD:function(p,l,t){var i=this._validate(p,l,t,S.local.invalidDate);return i.day()+20*i.month()+360*i.year()+this.jdEpoch},fromJD:function(p){p=Math.floor(p)+.5-this.jdEpoch;var l=Math.floor(p/360);p%=360,p+=p<0?360:0;var t=Math.floor(p/20);return this.newDate(l,t,p%20)}}),S.calendars.mayan=o},30632:function(ie,F,e){var S=e(38700),k=e(50896);function o(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}o.prototype=new S.baseCalendar;var T=S.instance("gregorian");k(o.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var p=this._validate(b,this.minMonth,this.minDay,S.local.invalidYear||S.regionalOptions[""].invalidYear);return T.leapYear(p.year()+(p.year()<1?1:0)+1469)},weekOfYear:function(b,p,l){var t=this.newDate(b,p,l);return t.add(1-(t.dayOfWeek()||7),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(b,p){var l=this._validate(b,p,this.minDay,S.local.invalidMonth);return this.daysPerMonth[l.month()-1]+(12===l.month()&&this.leapYear(l.year())?1:0)},weekDay:function(b,p,l){return(this.dayOfWeek(b,p,l)||7)<6},toJD:function(b,p,l){var t=this._validate(b,p,l,S.local.invalidMonth);(b=t.year())<0&&b++;for(var i=t.day(),r=1;r<t.month();r++)i+=this.daysPerMonth[r-1];return i+T.toJD(b+1468,3,13)},fromJD:function(b){b=Math.floor(b+.5);for(var p=Math.floor((b-(this.jdEpoch-1))/366);b>=this.toJD(p+1,1,1);)p++;for(var l=b-Math.floor(this.toJD(p,1,1)+.5)+1,t=1;l>this.daysInMonth(p,t);)l-=this.daysInMonth(p,t),t++;return this.newDate(p,t,l)}}),S.calendars.nanakshahi=o},73040:function(ie,F,e){var S=e(38700);function o(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}e(50896)(o.prototype=new S.baseCalendar,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(T){return this.daysInYear(T)!==this.daysPerYear},weekOfYear:function(T,b,p){var l=this.newDate(T,b,p);return l.add(-l.dayOfWeek(),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInYear:function(T){if(T=this._validate(T,this.minMonth,this.minDay,S.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[T])return this.daysPerYear;for(var b=0,p=this.minMonth;p<=12;p++)b+=this.NEPALI_CALENDAR_DATA[T][p];return b},daysInMonth:function(T,b){return T.year&&(b=T.month(),T=T.year()),this._validate(T,b,this.minDay,S.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[T]?this.daysPerMonth[b-1]:this.NEPALI_CALENDAR_DATA[T][b]},weekDay:function(T,b,p){return 6!==this.dayOfWeek(T,b,p)},toJD:function(T,b,p){var l=this._validate(T,b,p,S.local.invalidDate);T=l.year(),b=l.month(),p=l.day();var t=S.instance(),i=0,r=b,n=T;this._createMissingCalendarData(T);var a=T-(r>9||9===r&&p>=this.NEPALI_CALENDAR_DATA[n][0]?56:57);for(9!==b&&(i=p,r--);9!==r;)r<=0&&(r=12,n--),i+=this.NEPALI_CALENDAR_DATA[n][r],r--;return 9===b?(i+=p-this.NEPALI_CALENDAR_DATA[n][0])<0&&(i+=t.daysInYear(a)):i+=this.NEPALI_CALENDAR_DATA[n][9]-this.NEPALI_CALENDAR_DATA[n][0],t.newDate(a,1,1).add(i,"d").toJD()},fromJD:function(T){var b=S.instance().fromJD(T),p=b.year(),l=b.dayOfYear(),t=p+56;this._createMissingCalendarData(t);for(var i=9,n=this.NEPALI_CALENDAR_DATA[t][i]-this.NEPALI_CALENDAR_DATA[t][0]+1;l>n;)++i>12&&(i=1,t++),n+=this.NEPALI_CALENDAR_DATA[t][i];return this.newDate(t,i,this.NEPALI_CALENDAR_DATA[t][i]-(n-l))},_createMissingCalendarData:function(T){var b=this.daysPerMonth.slice(0);b.unshift(17);for(var p=T-1;p<T+2;p++)void 0===this.NEPALI_CALENDAR_DATA[p]&&(this.NEPALI_CALENDAR_DATA[p]=b)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),S.calendars.nepali=o},1104:function(ie,F,e){var S=e(38700);function o(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}function T(b,p){return b-p*Math.floor(b/p)}e(50896)(o.prototype=new S.baseCalendar,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xe6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xe6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(b){var p=this._validate(b,this.minMonth,this.minDay,S.local.invalidYear);return 682*((p.year()-(p.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(b,p,l){var t=this.newDate(b,p,l);return t.add(-(t.dayOfWeek()+1)%7,"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(b,p){var l=this._validate(b,p,this.minDay,S.local.invalidMonth);return this.daysPerMonth[l.month()-1]+(12===l.month()&&this.leapYear(l.year())?1:0)},weekDay:function(b,p,l){return 5!==this.dayOfWeek(b,p,l)},toJD:function(b,p,l){var t=this._validate(b,p,l,S.local.invalidDate);b=t.year(),p=t.month(),l=t.day();var i=b-(b>=0?474:473),r=474+T(i,2820);return l+(p<=7?31*(p-1):30*(p-1)+6)+Math.floor((682*r-110)/2816)+365*(r-1)+1029983*Math.floor(i/2820)+this.jdEpoch-1},fromJD:function(b){var p=(b=Math.floor(b)+.5)-this.toJD(475,1,1),l=Math.floor(p/1029983),t=T(p,1029983),i=2820;if(1029982!==t){var r=Math.floor(t/366),n=T(t,366);i=Math.floor((2134*r+2816*n+2815)/1028522)+r+1}var a=i+2820*l+474,s=b-this.toJD(a=a<=0?a-1:a,1,1)+1,c=s<=186?Math.ceil(s/31):Math.ceil((s-6)/30),h=b-this.toJD(a,c,1)+1;return this.newDate(a,c,h)}}),S.calendars.persian=o,S.calendars.jalali=o},51456:function(ie,F,e){var S=e(38700),k=e(50896),o=S.instance();function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}k(T.prototype=new S.baseCalendar,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(b){var p=this._validate(b,this.minMonth,this.minDay,S.local.invalidYear);return b=this._t2gYear(p.year()),o.leapYear(b)},weekOfYear:function(b,p,l){var t=this._validate(b,this.minMonth,this.minDay,S.local.invalidYear);return b=this._t2gYear(t.year()),o.weekOfYear(b,t.month(),t.day())},daysInMonth:function(b,p){var l=this._validate(b,p,this.minDay,S.local.invalidMonth);return this.daysPerMonth[l.month()-1]+(2===l.month()&&this.leapYear(l.year())?1:0)},weekDay:function(b,p,l){return(this.dayOfWeek(b,p,l)||7)<6},toJD:function(b,p,l){var t=this._validate(b,p,l,S.local.invalidDate);return b=this._t2gYear(t.year()),o.toJD(b,t.month(),t.day())},fromJD:function(b){var p=o.fromJD(b),l=this._g2tYear(p.year());return this.newDate(l,p.month(),p.day())},_t2gYear:function(b){return b+this.yearsOffset+(b>=-this.yearsOffset&&b<=-1?1:0)},_g2tYear:function(b){return b-this.yearsOffset-(b>=1&&b<=this.yearsOffset?1:0)}}),S.calendars.taiwan=T},4592:function(ie,F,e){var S=e(38700),k=e(50896),o=S.instance();function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}k(T.prototype=new S.baseCalendar,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var p=this._validate(b,this.minMonth,this.minDay,S.local.invalidYear);return b=this._t2gYear(p.year()),o.leapYear(b)},weekOfYear:function(b,p,l){var t=this._validate(b,this.minMonth,this.minDay,S.local.invalidYear);return b=this._t2gYear(t.year()),o.weekOfYear(b,t.month(),t.day())},daysInMonth:function(b,p){var l=this._validate(b,p,this.minDay,S.local.invalidMonth);return this.daysPerMonth[l.month()-1]+(2===l.month()&&this.leapYear(l.year())?1:0)},weekDay:function(b,p,l){return(this.dayOfWeek(b,p,l)||7)<6},toJD:function(b,p,l){var t=this._validate(b,p,l,S.local.invalidDate);return b=this._t2gYear(t.year()),o.toJD(b,t.month(),t.day())},fromJD:function(b){var p=o.fromJD(b),l=this._g2tYear(p.year());return this.newDate(l,p.month(),p.day())},_t2gYear:function(b){return b-this.yearsOffset-(b>=1&&b<=this.yearsOffset?1:0)},_g2tYear:function(b){return b+this.yearsOffset+(b>=-this.yearsOffset&&b<=-1?1:0)}}),S.calendars.thai=T},45348:function(ie,F,e){var S=e(38700);function o(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}e(50896)(o.prototype=new S.baseCalendar,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(b){var p=this._validate(b,this.minMonth,this.minDay,S.local.invalidYear);return 355===this.daysInYear(p.year())},weekOfYear:function(b,p,l){var t=this.newDate(b,p,l);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(b){for(var p=0,l=1;l<=12;l++)p+=this.daysInMonth(b,l);return p},daysInMonth:function(b,p){for(var l=this._validate(b,p,this.minDay,S.local.invalidMonth).toJD()-24e5+.5,t=0,i=0;i<T.length;i++){if(T[i]>l)return T[t]-T[t-1];t++}return 30},weekDay:function(b,p,l){return 5!==this.dayOfWeek(b,p,l)},toJD:function(b,p,l){var t=this._validate(b,p,l,S.local.invalidDate),i=12*(t.year()-1)+t.month()-15292;return t.day()+T[i-1]-1+24e5-.5},fromJD:function(b){for(var p=b-24e5+.5,l=0,t=0;t<T.length&&!(T[t]>p);t++)l++;var i=l+15292,r=Math.floor((i-1)/12);return this.newDate(r+1,i-12*r,p-T[l-1]+1)},isValid:function(b,p,l){var t=S.baseCalendar.prototype.isValid.apply(this,arguments);return t&&(t=(b=null!=b.year?b.year:b)>=1276&&b<=1500),t},_validate:function(b,p,l,t){var i=S.baseCalendar.prototype._validate.apply(this,arguments);if(i.year<1276||i.year>1500)throw t.replace(/\{0\}/,this.local.name);return i}}),S.calendars.ummalqura=o;var T=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},38700:function(ie,F,e){var S=e(50896);function k(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function o(t,i,r,n){if(this._calendar=t,this._year=i,this._month=r,this._day=n,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(l.local.invalidDate||l.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function T(t,i){return"000000".substring(0,i-(t=""+t).length)+t}function b(){this.shortYearCutoff="+10"}function p(t){this.local=this.regionalOptions[t]||this.regionalOptions[""]}S(k.prototype,{instance:function(t,i){t=(t||"gregorian").toLowerCase();var r=this._localCals[t+"-"+(i=i||"")];if(!r&&this.calendars[t]&&(r=new this.calendars[t](i),this._localCals[t+"-"+i]=r),!r)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,t);return r},newDate:function(t,i,r,n,a){return(n=(null!=t&&t.year?t.calendar():"string"==typeof n?this.instance(n,a):n)||this.instance()).newDate(t,i,r)},substituteDigits:function(t){return function(i){return(i+"").replace(/[0-9]/g,function(r){return t[r]})}},substituteChineseDigits:function(t,i){return function(r){for(var n="",a=0;r>0;){var s=r%10;n=(0===s?"":t[s]+i[a])+n,a++,r=Math.floor(r/10)}return 0===n.indexOf(t[1]+i[1])&&(n=n.substr(1)),n||t[0]}}}),S(o.prototype,{newDate:function(t,i,r){return this._calendar.newDate(t??this,i,r)},year:function(t){return 0===arguments.length?this._year:this.set(t,"y")},month:function(t){return 0===arguments.length?this._month:this.set(t,"m")},day:function(t){return 0===arguments.length?this._day:this.set(t,"d")},date:function(t,i,r){if(!this._calendar.isValid(t,i,r))throw(l.local.invalidDate||l.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=t,this._month=i,this._day=r,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(t,i){return this._calendar.add(this,t,i)},set:function(t,i){return this._calendar.set(this,t,i)},compareTo:function(t){if(this._calendar.name!==t._calendar.name)throw(l.local.differentCalendars||l.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,t._calendar.local.name);var i=this._year!==t._year?this._year-t._year:this._month!==t._month?this.monthOfYear()-t.monthOfYear():this._day-t._day;return 0===i?0:i<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(t){return this._calendar.fromJD(t)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(t){return this._calendar.fromJSDate(t)},toString:function(){return(this.year()<0?"-":"")+T(Math.abs(this.year()),4)+"-"+T(this.month(),2)+"-"+T(this.day(),2)}}),S(b.prototype,{_validateLevel:0,newDate:function(t,i,r){return null==t?this.today():(t.year&&(this._validate(t,i,r,l.local.invalidDate||l.regionalOptions[""].invalidDate),r=t.day(),i=t.month(),t=t.year()),new o(this,t,i,r))},today:function(){return this.fromJSDate(new Date)},epoch:function(t){return this._validate(t,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear);return(i.year()<0?"-":"")+T(Math.abs(i.year()),4)},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear),12},monthOfYear:function(t,i){var r=this._validate(t,i,this.minDay,l.local.invalidMonth||l.regionalOptions[""].invalidMonth);return(r.month()+this.monthsInYear(r)-this.firstMonth)%this.monthsInYear(r)+this.minMonth},fromMonthOfYear:function(t,i){var r=(i+this.firstMonth-2*this.minMonth)%this.monthsInYear(t)+this.minMonth;return this._validate(t,r,this.minDay,l.local.invalidMonth||l.regionalOptions[""].invalidMonth),r},daysInYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear);return this.leapYear(i)?366:365},dayOfYear:function(t,i,r){var n=this._validate(t,i,r,l.local.invalidDate||l.regionalOptions[""].invalidDate);return n.toJD()-this.newDate(n.year(),this.fromMonthOfYear(n.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(t,i,r){var n=this._validate(t,i,r,l.local.invalidDate||l.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(n))+2)%this.daysInWeek()},extraInfo:function(t,i,r){return this._validate(t,i,r,l.local.invalidDate||l.regionalOptions[""].invalidDate),{}},add:function(t,i,r){return this._validate(t,this.minMonth,this.minDay,l.local.invalidDate||l.regionalOptions[""].invalidDate),this._correctAdd(t,this._add(t,i,r),i,r)},_add:function(t,i,r){if(this._validateLevel++,"d"===r||"w"===r){var n=t.toJD()+i*("w"===r?this.daysInWeek():1),a=t.calendar().fromJD(n);return this._validateLevel--,[a.year(),a.month(),a.day()]}try{var s=t.year()+("y"===r?i:0),c=t.monthOfYear()+("m"===r?i:0);a=t.day(),"y"===r?(t.month()!==this.fromMonthOfYear(s,c)&&(c=this.newDate(s,t.month(),this.minDay).monthOfYear()),c=Math.min(c,this.monthsInYear(s)),a=Math.min(a,this.daysInMonth(s,this.fromMonthOfYear(s,c)))):"m"===r&&(function(u){for(;c<u.minMonth;)s--,c+=u.monthsInYear(s);for(var y=u.monthsInYear(s);c>y-1+u.minMonth;)s++,c-=y,y=u.monthsInYear(s)}(this),a=Math.min(a,this.daysInMonth(s,this.fromMonthOfYear(s,c))));var h=[s,this.fromMonthOfYear(s,c),a];return this._validateLevel--,h}catch(u){throw this._validateLevel--,u}},_correctAdd:function(t,i,r,n){if(!(this.hasYearZero||"y"!==n&&"m"!==n||0!==i[0]&&t.year()>0==i[0]>0)){var a={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[n];i=this._add(t,r*a[0]+(r<0?-1:1)*a[1],a[2])}return t.date(i[0],i[1],i[2])},set:function(t,i,r){this._validate(t,this.minMonth,this.minDay,l.local.invalidDate||l.regionalOptions[""].invalidDate);var n="y"===r?i:t.year(),a="m"===r?i:t.month(),s="d"===r?i:t.day();return"y"!==r&&"m"!==r||(s=Math.min(s,this.daysInMonth(n,a))),t.date(n,a,s)},isValid:function(t,i,r){this._validateLevel++;var n=this.hasYearZero||0!==t;if(n){var a=this.newDate(t,i,this.minDay);n=i>=this.minMonth&&i-this.minMonth<this.monthsInYear(a)&&r>=this.minDay&&r-this.minDay<this.daysInMonth(a)}return this._validateLevel--,n},toJSDate:function(t,i,r){var n=this._validate(t,i,r,l.local.invalidDate||l.regionalOptions[""].invalidDate);return l.instance().fromJD(this.toJD(n)).toJSDate()},fromJSDate:function(t){return this.fromJD(l.instance().fromJSDate(t).toJD())},_validate:function(t,i,r,n){if(t.year){if(0===this._validateLevel&&this.name!==t.calendar().name)throw(l.local.differentCalendars||l.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,t.calendar().local.name);return t}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(t,i,r))throw n.replace(/\{0\}/,this.local.name);var a=this.newDate(t,i,r);return this._validateLevel--,a}catch(s){throw this._validateLevel--,s}}}),S(p.prototype=new b,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear);return(t=i.year()+(i.year()<0?1:0))%4==0&&(t%100!=0||t%400==0)},weekOfYear:function(t,i,r){var n=this.newDate(t,i,r);return n.add(4-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(t,i){var r=this._validate(t,i,this.minDay,l.local.invalidMonth||l.regionalOptions[""].invalidMonth);return this.daysPerMonth[r.month()-1]+(2===r.month()&&this.leapYear(r.year())?1:0)},weekDay:function(t,i,r){return(this.dayOfWeek(t,i,r)||7)<6},toJD:function(t,i,r){var n=this._validate(t,i,r,l.local.invalidDate||l.regionalOptions[""].invalidDate);t=n.year(),i=n.month(),r=n.day(),t<0&&t++,i<3&&(i+=12,t--);var a=Math.floor(t/100),s=2-a+Math.floor(a/4);return Math.floor(365.25*(t+4716))+Math.floor(30.6001*(i+1))+r+s-1524.5},fromJD:function(t){var i=Math.floor(t+.5),r=Math.floor((i-1867216.25)/36524.25),n=1524+(r=i+1+r-Math.floor(r/4)),a=Math.floor((n-122.1)/365.25),s=Math.floor(365.25*a),c=Math.floor((n-s)/30.6001),h=n-s-Math.floor(30.6001*c),u=c-(c>13.5?13:1),y=a-(u>2.5?4716:4715);return y<=0&&y--,this.newDate(y,u,h)},toJSDate:function(t,i,r){var n=this._validate(t,i,r,l.local.invalidDate||l.regionalOptions[""].invalidDate),a=new Date(n.year(),n.month()-1,n.day());return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a.setHours(a.getHours()>12?a.getHours()+2:0),a},fromJSDate:function(t){return this.newDate(t.getFullYear(),t.getMonth()+1,t.getDate())}});var l=ie.exports=new k;l.cdate=o,l.baseCalendar=b,l.calendars.gregorian=p},15168:function(ie,F,e){var S=e(50896),k=e(38700);S(k.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),k.local=k.regionalOptions[""],S(k.cdate.prototype,{formatDate:function(o,T){return"string"!=typeof o&&(T=o,o=""),this._calendar.formatDate(o||"",this,T)}}),S(k.baseCalendar.prototype,{UNIX_EPOCH:k.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:k.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(o,T,b){if("string"!=typeof o&&(b=T,T=o,o=""),!T)return"";if(T.calendar()!==this)throw k.local.invalidFormat||k.regionalOptions[""].invalidFormat;o=o||this.local.dateFormat;for(var p,l,t,i=(b=b||{}).dayNamesShort||this.local.dayNamesShort,r=b.dayNames||this.local.dayNames,n=b.monthNumbers||this.local.monthNumbers,a=b.monthNamesShort||this.local.monthNamesShort,s=b.monthNames||this.local.monthNames,c=function(f,C){for(var w=1;_+w<o.length&&o.charAt(_+w)===f;)w++;return _+=w-1,Math.floor(w/(C||1))>1},h=function(f,C,w,E){var P=""+C;if(c(f,E))for(;P.length<w;)P="0"+P;return P},u=this,d=function(f,C){return C?"function"==typeof s?s.call(u,f):s[f.month()-u.minMonth]:"function"==typeof a?a.call(u,f):a[f.month()-u.minMonth]},m=this.local.digits,g=function(f){return b.localNumbers&&m?m(f):f},x="",v=!1,_=0;_<o.length;_++)if(v)"'"!==o.charAt(_)||c("'")?x+=o.charAt(_):v=!1;else switch(o.charAt(_)){case"d":x+=g(h("d",T.day(),2));break;case"D":x+=(p=T.dayOfWeek(),l=i,t=r,c("D")?t[p]:l[p]);break;case"o":x+=h("o",T.dayOfYear(),3);break;case"w":x+=h("w",T.weekOfYear(),2);break;case"m":x+=(f=T,"function"==typeof n?n.call(u,f,c("m")):g(h("m",f.month(),2)));break;case"M":x+=d(T,c("M"));break;case"y":x+=c("y",2)?T.year():(T.year()%100<10?"0":"")+T.year()%100;break;case"Y":c("Y",2),x+=T.formatYear();break;case"J":x+=T.toJD();break;case"@":x+=(T.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":x+=(T.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":c("'")?x+="'":v=!0;break;default:x+=o.charAt(_)}var f;return x},parseDate:function(o,T,b){if(null==T)throw k.local.invalidArguments||k.regionalOptions[""].invalidArguments;if(""===(T="object"==typeof T?T.toString():T+""))return null;o=o||this.local.dateFormat;var p=(b=b||{}).shortYearCutoff||this.shortYearCutoff;p="string"!=typeof p?p:this.today().year()%100+parseInt(p,10);for(var l=b.dayNamesShort||this.local.dayNamesShort,t=b.dayNames||this.local.dayNames,i=b.parseMonth||this.local.parseMonth,r=b.monthNumbers||this.local.monthNumbers,n=b.monthNamesShort||this.local.monthNamesShort,a=b.monthNames||this.local.monthNames,s=-1,c=-1,h=-1,u=-1,y=-1,d=!1,m=!1,g=function(z,V){for(var R=1;P+R<o.length&&o.charAt(P+R)===z;)R++;return P+=R-1,Math.floor(R/(V||1))>1},x=function(z,V){var R=g(z,V),U=[2,3,R?4:2,R?4:2,10,11,20]["oyYJ@!".indexOf(z)+1],Z=new RegExp("^-?\\d{1,"+U+"}"),N=T.substring(E).match(Z);if(!N)throw(k.local.missingNumberAt||k.regionalOptions[""].missingNumberAt).replace(/\{0\}/,E);return E+=N[0].length,parseInt(N[0],10)},v=this,_=function(){if("function"==typeof r){g("m");var z=r.call(v,T.substring(E));return E+=z.length,z}return x("m")},f=function(z,V,R,U){for(var Z=g(z,U)?R:V,N=0;N<Z.length;N++)if(T.substr(E,Z[N].length).toLowerCase()===Z[N].toLowerCase())return E+=Z[N].length,N+v.minMonth;throw(k.local.unknownNameAt||k.regionalOptions[""].unknownNameAt).replace(/\{0\}/,E)},C=function(){if("function"==typeof a){var z=g("M")?a.call(v,T.substring(E)):n.call(v,T.substring(E));return E+=z.length,z}return f("M",n,a)},w=function(){if(T.charAt(E)!==o.charAt(P))throw(k.local.unexpectedLiteralAt||k.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,E);E++},E=0,P=0;P<o.length;P++)if(m)"'"!==o.charAt(P)||g("'")?w():m=!1;else switch(o.charAt(P)){case"d":u=x("d");break;case"D":f("D",l,t);break;case"o":y=x("o");break;case"w":x("w");break;case"m":h=_();break;case"M":h=C();break;case"y":var L=P;d=!g("y",2),P=L,c=x("y",2);break;case"Y":c=x("Y",2);break;case"J":s=x("J")+.5,"."===T.charAt(E)&&(E++,x("J"));break;case"@":s=x("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":s=x("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":E=T.length;break;case"'":g("'")?w():m=!0;break;default:w()}if(E<T.length)throw k.local.unexpectedText||k.regionalOptions[""].unexpectedText;if(-1===c?c=this.today().year():c<100&&d&&(c+=-1===p?1900:this.today().year()-this.today().year()%100-(c<=p?0:100)),"string"==typeof h&&(h=i.call(this,c,h)),y>-1){u=y;for(var O=this.daysInMonth(c,h=1);u>O;O=this.daysInMonth(c,h))h++,u-=O}return s>-1?this.fromJD(s):this.newDate(c,h,u)},determineDate:function(o,T,b,p,l){b&&"object"!=typeof b&&(l=p,p=b,b=null),"string"!=typeof p&&(l=p,p="");var t=this;return T=T?T.newDate():null,null==o?T:"string"==typeof o?function(i){try{return t.parseDate(p,i,l)}catch{}for(var r=((i=i.toLowerCase()).match(/^c/)&&b?b.newDate():null)||t.today(),n=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,a=n.exec(i);a;)r.add(parseInt(a[1],10),a[2]||"d"),a=n.exec(i);return r}(o):"number"==typeof o?isNaN(o)||o===1/0||o===-1/0?T:t.today().add(o,"d"):t.newDate(o)}})},21576:function(){},19768:function(){},63436:function(ie,F,e){"use strict";var S=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],k=typeof globalThis>"u"?e.g:globalThis;ie.exports=function(){for(var o=[],T=0;T<S.length;T++)"function"==typeof k[S[T]]&&(o[o.length]=S[T]);return o}},67756:function(ie,F,e){"use strict";function S(xe,ye,_e){xe.prototype=ye.prototype=_e,_e.constructor=xe}function k(xe,ye){var _e=Object.create(xe.prototype);for(var Ie in ye)_e[Ie]=ye[Ie];return _e}function o(){}e.d(F,{qy:function(){return Te},Gz:function(){return Q}});var T=.7,b=1/T,p="\\s*([+-]?\\d+)\\s*",l="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",i=/^#([0-9a-f]{3,8})$/,r=new RegExp("^rgb\\(".concat(p,",").concat(p,",").concat(p,"\\)$")),n=new RegExp("^rgb\\(".concat(t,",").concat(t,",").concat(t,"\\)$")),a=new RegExp("^rgba\\(".concat(p,",").concat(p,",").concat(p,",").concat(l,"\\)$")),s=new RegExp("^rgba\\(".concat(t,",").concat(t,",").concat(t,",").concat(l,"\\)$")),c=new RegExp("^hsl\\(".concat(l,",").concat(t,",").concat(t,"\\)$")),h=new RegExp("^hsla\\(".concat(l,",").concat(t,",").concat(t,",").concat(l,"\\)$")),u={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function y(){return this.rgb().formatHex()}function d(){return this.rgb().formatRgb()}function m(xe){var ye,_e;return xe=(xe+"").trim().toLowerCase(),(ye=i.exec(xe))?(_e=ye[1].length,ye=parseInt(ye[1],16),6===_e?g(ye):3===_e?new _(ye>>8&15|ye>>4&240,ye>>4&15|240&ye,(15&ye)<<4|15&ye,1):8===_e?x(ye>>24&255,ye>>16&255,ye>>8&255,(255&ye)/255):4===_e?x(ye>>12&15|ye>>8&240,ye>>8&15|ye>>4&240,ye>>4&15|240&ye,((15&ye)<<4|15&ye)/255):null):(ye=r.exec(xe))?new _(ye[1],ye[2],ye[3],1):(ye=n.exec(xe))?new _(255*ye[1]/100,255*ye[2]/100,255*ye[3]/100,1):(ye=a.exec(xe))?x(ye[1],ye[2],ye[3],ye[4]):(ye=s.exec(xe))?x(255*ye[1]/100,255*ye[2]/100,255*ye[3]/100,ye[4]):(ye=c.exec(xe))?L(ye[1],ye[2]/100,ye[3]/100,1):(ye=h.exec(xe))?L(ye[1],ye[2]/100,ye[3]/100,ye[4]):u.hasOwnProperty(xe)?g(u[xe]):"transparent"===xe?new _(NaN,NaN,NaN,0):null}function g(xe){return new _(xe>>16&255,xe>>8&255,255&xe,1)}function x(xe,ye,_e,Ie){return Ie<=0&&(xe=ye=_e=NaN),new _(xe,ye,_e,Ie)}function v(xe,ye,_e,Ie){return 1===arguments.length?((De=xe)instanceof o||(De=m(De)),De?new _((De=De.rgb()).r,De.g,De.b,De.opacity):new _):new _(xe,ye,_e,Ie??1);var De}function _(xe,ye,_e,Ie){this.r=+xe,this.g=+ye,this.b=+_e,this.opacity=+Ie}function f(){return"#".concat(P(this.r)).concat(P(this.g)).concat(P(this.b))}function C(){var xe=w(this.opacity);return"".concat(1===xe?"rgb(":"rgba(").concat(E(this.r),", ").concat(E(this.g),", ").concat(E(this.b)).concat(1===xe?")":", ".concat(xe,")"))}function w(xe){return isNaN(xe)?1:Math.max(0,Math.min(1,xe))}function E(xe){return Math.max(0,Math.min(255,Math.round(xe)||0))}function P(xe){return((xe=E(xe))<16?"0":"")+xe.toString(16)}function L(xe,ye,_e,Ie){return Ie<=0?xe=ye=_e=NaN:_e<=0||_e>=1?xe=ye=NaN:ye<=0&&(xe=NaN),new z(xe,ye,_e,Ie)}function O(xe){if(xe instanceof z)return new z(xe.h,xe.s,xe.l,xe.opacity);if(xe instanceof o||(xe=m(xe)),!xe)return new z;if(xe instanceof z)return xe;var ye=(xe=xe.rgb()).r/255,_e=xe.g/255,Ie=xe.b/255,De=Math.min(ye,_e,Ie),be=Math.max(ye,_e,Ie),he=NaN,ce=be-De,me=(be+De)/2;return ce?(he=ye===be?(_e-Ie)/ce+6*(_e<Ie):_e===be?(Ie-ye)/ce+2:(ye-_e)/ce+4,ce/=me<.5?be+De:2-be-De,he*=60):ce=me>0&&me<1?0:he,new z(he,ce,me,xe.opacity)}function z(xe,ye,_e,Ie){this.h=+xe,this.s=+ye,this.l=+_e,this.opacity=+Ie}function V(xe){return(xe=(xe||0)%360)<0?xe+360:xe}function R(xe){return Math.max(0,Math.min(1,xe||0))}function U(xe,ye,_e){return 255*(xe<60?ye+(_e-ye)*xe/60:xe<180?_e:xe<240?ye+(_e-ye)*(240-xe)/60:ye)}function Z(xe,ye,_e,Ie,De){var be=xe*xe,he=be*xe;return((1-3*xe+3*be-he)*ye+(4-6*be+3*he)*_e+(1+3*xe+3*be-3*he)*Ie+he*De)/6}S(o,m,{copy:function(xe){return Object.assign(new this.constructor,this,xe)},displayable:function(){return this.rgb().displayable()},hex:y,formatHex:y,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return O(this).formatHsl()},formatRgb:d,toString:d}),S(_,v,k(o,{brighter:function(xe){return xe=null==xe?b:Math.pow(b,xe),new _(this.r*xe,this.g*xe,this.b*xe,this.opacity)},darker:function(xe){return xe=null==xe?T:Math.pow(T,xe),new _(this.r*xe,this.g*xe,this.b*xe,this.opacity)},rgb:function(){return this},clamp:function(){return new _(E(this.r),E(this.g),E(this.b),w(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:f,formatHex:f,formatHex8:function(){return"#".concat(P(this.r)).concat(P(this.g)).concat(P(this.b)).concat(P(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:C,toString:C})),S(z,function(xe,ye,_e,Ie){return 1===arguments.length?O(xe):new z(xe,ye,_e,Ie??1)},k(o,{brighter:function(xe){return xe=null==xe?b:Math.pow(b,xe),new z(this.h,this.s,this.l*xe,this.opacity)},darker:function(xe){return xe=null==xe?T:Math.pow(T,xe),new z(this.h,this.s,this.l*xe,this.opacity)},rgb:function(){var xe=this.h%360+360*(this.h<0),ye=isNaN(xe)||isNaN(this.s)?0:this.s,_e=this.l,Ie=_e+(_e<.5?_e:1-_e)*ye,De=2*_e-Ie;return new _(U(xe>=240?xe-240:xe+120,De,Ie),U(xe,De,Ie),U(xe<120?xe+240:xe-120,De,Ie),this.opacity)},clamp:function(){return new z(V(this.h),R(this.s),R(this.l),w(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var xe=w(this.opacity);return"".concat(1===xe?"hsl(":"hsla(").concat(V(this.h),", ").concat(100*R(this.s),"%, ").concat(100*R(this.l),"%").concat(1===xe?")":", ".concat(xe,")"))}}));var N=function(xe){return function(){return xe}};function G(xe,ye){var Ie,De,_e=ye-xe;return _e?(Ie=xe,De=_e,function(be){return Ie+be*De}):N(isNaN(xe)?ye:xe)}var W=function xe(ye){var De,_e=1==(De=+(De=ye))?G:function(be,he){return he-be?(ce=be,me=he,Pe=De,ce=Math.pow(ce,Pe),me=Math.pow(me,Pe)-ce,Pe=1/Pe,function(Ae){return Math.pow(ce+Ae*me,Pe)}):N(isNaN(be)?he:be);var ce,me,Pe};function Ie(De,be){var he=_e((De=v(De)).r,(be=v(be)).r),ce=_e(De.g,be.g),me=_e(De.b,be.b),Pe=G(De.opacity,be.opacity);return function(Ae){return De.r=he(Ae),De.g=ce(Ae),De.b=me(Ae),De.opacity=Pe(Ae),De+""}}return Ie.gamma=xe,Ie}(1);function ae(xe){return function(ye){var _e,Ie,De=ye.length,be=new Array(De),he=new Array(De),ce=new Array(De);for(_e=0;_e<De;++_e)Ie=v(ye[_e]),be[_e]=Ie.r||0,he[_e]=Ie.g||0,ce[_e]=Ie.b||0;return be=xe(be),he=xe(he),ce=xe(ce),Ie.opacity=1,function(me){return Ie.r=be(me),Ie.g=he(me),Ie.b=ce(me),Ie+""}}}function re(xe,ye){var _e,Ie=ye?ye.length:0,De=xe?Math.min(Ie,xe.length):0,be=new Array(De),he=new Array(Ie);for(_e=0;_e<De;++_e)be[_e]=Te(xe[_e],ye[_e]);for(;_e<Ie;++_e)he[_e]=ye[_e];return function(ce){for(_e=0;_e<De;++_e)he[_e]=be[_e](ce);return he}}function ne(xe,ye){var _e=new Date;return xe=+xe,ye=+ye,function(Ie){return _e.setTime(xe*(1-Ie)+ye*Ie),_e}}function Q(xe,ye){return xe=+xe,ye=+ye,function(_e){return xe*(1-_e)+ye*_e}}function $(xe){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ye){return typeof ye}:function(ye){return ye&&"function"==typeof Symbol&&ye.constructor===Symbol&&ye!==Symbol.prototype?"symbol":typeof ye})(xe)}function X(xe,ye){var _e,Ie={},De={};for(_e in null!==xe&&"object"===$(xe)||(xe={}),null!==ye&&"object"===$(ye)||(ye={}),ye)_e in xe?Ie[_e]=Te(xe[_e],ye[_e]):De[_e]=ye[_e];return function(be){for(_e in Ie)De[_e]=Ie[_e](be);return De}}ae(function(xe){var ye=xe.length-1;return function(_e){var Ie=_e<=0?_e=0:_e>=1?(_e=1,ye-1):Math.floor(_e*ye),De=xe[Ie],be=xe[Ie+1];return Z((_e-Ie/ye)*ye,Ie>0?xe[Ie-1]:2*De-be,De,be,Ie<ye-1?xe[Ie+2]:2*be-De)}}),ae(function(xe){var ye=xe.length;return function(_e){var Ie=Math.floor(((_e%=1)<0?++_e:_e)*ye);return Z((_e-Ie/ye)*ye,xe[(Ie+ye-1)%ye],xe[Ie%ye],xe[(Ie+1)%ye],xe[(Ie+2)%ye])}});var oe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fe=new RegExp(oe.source,"g");function ue(xe,ye){var _e,Ie,De,Pe,be=oe.lastIndex=fe.lastIndex=0,he=-1,ce=[],me=[];for(xe+="",ye+="";(_e=oe.exec(xe))&&(Ie=fe.exec(ye));)(De=Ie.index)>be&&(De=ye.slice(be,De),ce[he]?ce[he]+=De:ce[++he]=De),(_e=_e[0])===(Ie=Ie[0])?ce[he]?ce[he]+=Ie:ce[++he]=Ie:(ce[++he]=null,me.push({i:he,x:Q(_e,Ie)})),be=fe.lastIndex;return be<ye.length&&(De=ye.slice(be),ce[he]?ce[he]+=De:ce[++he]=De),ce.length<2?me[0]?(Pe=me[0].x,function(Ae){return Pe(Ae)+""}):function(Pe){return function(){return Pe}}(ye):(ye=me.length,function(Pe){for(var Ae,Ce=0;Ce<ye;++Ce)ce[(Ae=me[Ce]).i]=Ae.x(Pe);return ce.join("")})}function ge(xe,ye){ye||(ye=[]);var _e,Ie=xe?Math.min(ye.length,xe.length):0,De=ye.slice();return function(be){for(_e=0;_e<Ie;++_e)De[_e]=xe[_e]*(1-be)+ye[_e]*be;return De}}function we(xe){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ye){return typeof ye}:function(ye){return ye&&"function"==typeof Symbol&&ye.constructor===Symbol&&ye!==Symbol.prototype?"symbol":typeof ye})(xe)}function Te(xe,ye){var _e,Ie,De=we(ye);return null==ye||"boolean"===De?N(ye):("number"===De?Q:"string"===De?(_e=m(ye))?(ye=_e,W):ue:ye instanceof m?W:ye instanceof Date?ne:(Ie=ye,!ArrayBuffer.isView(Ie)||Ie instanceof DataView?Array.isArray(ye)?re:"function"!=typeof ye.valueOf&&"function"!=typeof ye.toString||isNaN(ye)?X:Q:ge))(xe,ye)}},30584:function(ie){"use strict";ie.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},7294:function(ie){"use strict";ie.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},47916:function(ie){"use strict";ie.exports=JSON.parse('["normal","italic","oblique"]')},2904:function(ie){"use strict";ie.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},68194:function(ie){"use strict";ie.exports=JSON.parse('["inherit","initial","unset"]')},3748:function(ie){"use strict";ie.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},Aa={};function Hi(ie){var F=Aa[ie];if(void 0!==F)return F.exports;var e=Aa[ie]={exports:{}};return Zu[ie].call(e.exports,e,e.exports,Hi),e.exports}return Hi.n=function(ie){var F=ie&&ie.__esModule?function(){return ie.default}:function(){return ie};return Hi.d(F,{a:F}),F},Hi.d=function(ie,F){for(var e in F)Hi.o(F,e)&&!Hi.o(ie,e)&&Object.defineProperty(ie,e,{enumerable:!0,get:F[e]})},Hi.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),Hi.o=function(ie,F){return Object.prototype.hasOwnProperty.call(ie,F)},Hi.r=function(ie){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(ie,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ie,"__esModule",{value:!0})},Hi(13792)}()},1414:function(jd){jd.exports=function(){"use strict";function Zu(n,a,s,c,h){!function u(y,d,m,g,x){for(;g>m;){if(g-m>600){var v=g-m+1,_=d-m+1,f=Math.log(v),C=.5*Math.exp(2*f/3),w=.5*Math.sqrt(f*C*(v-C)/v)*(_-v/2<0?-1:1);u(y,d,Math.max(m,Math.floor(d-_*C/v+w)),Math.min(g,Math.floor(d+(v-_)*C/v+w)),x)}var L=y[d],O=m,z=g;for(Aa(y,m,d),x(y[g],L)>0&&Aa(y,m,g);O<z;){for(Aa(y,O,z),O++,z--;x(y[O],L)<0;)O++;for(;x(y[z],L)>0;)z--}0===x(y[m],L)?Aa(y,m,z):Aa(y,++z,g),z<=d&&(m=z+1),d<=z&&(g=z-1)}}(n,a,s||0,c||n.length-1,h||Hi)}function Aa(n,a,s){var c=n[a];n[a]=n[s],n[s]=c}function Hi(n,a){return n<a?-1:n>a?1:0}var ie=function(n){void 0===n&&(n=9),this._maxEntries=Math.max(4,n),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function F(n,a,s){if(!s)return a.indexOf(n);for(var c=0;c<a.length;c++)if(s(n,a[c]))return c;return-1}function e(n,a){S(n,0,n.children.length,a,n)}function S(n,a,s,c,h){h||(h=i(null)),h.minX=1/0,h.minY=1/0,h.maxX=-1/0,h.maxY=-1/0;for(var u=a;u<s;u++){var y=n.children[u];k(h,n.leaf?c(y):y)}return h}function k(n,a){return n.minX=Math.min(n.minX,a.minX),n.minY=Math.min(n.minY,a.minY),n.maxX=Math.max(n.maxX,a.maxX),n.maxY=Math.max(n.maxY,a.maxY),n}function o(n,a){return n.minX-a.minX}function T(n,a){return n.minY-a.minY}function b(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function p(n){return n.maxX-n.minX+(n.maxY-n.minY)}function l(n,a){return n.minX<=a.minX&&n.minY<=a.minY&&a.maxX<=n.maxX&&a.maxY<=n.maxY}function t(n,a){return a.minX<=n.maxX&&a.minY<=n.maxY&&a.maxX>=n.minX&&a.maxY>=n.minY}function i(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function r(n,a,s,c,h){for(var u=[a,s];u.length;)if(!((s=u.pop())-(a=u.pop())<=c)){var y=a+Math.ceil((s-a)/c/2)*c;Zu(n,y,a,s,h),u.push(a,y,y,s)}}return ie.prototype.all=function(){return this._all(this.data,[])},ie.prototype.search=function(n){var a=this.data,s=[];if(!t(n,a))return s;for(var c=this.toBBox,h=[];a;){for(var u=0;u<a.children.length;u++){var y=a.children[u],d=a.leaf?c(y):y;t(n,d)&&(a.leaf?s.push(y):l(n,d)?this._all(y,s):h.push(y))}a=h.pop()}return s},ie.prototype.collides=function(n){var a=this.data;if(!t(n,a))return!1;for(var s=[];a;){for(var c=0;c<a.children.length;c++){var h=a.children[c],u=a.leaf?this.toBBox(h):h;if(t(n,u)){if(a.leaf||l(n,u))return!0;s.push(h)}}a=s.pop()}return!1},ie.prototype.load=function(n){if(!n||!n.length)return this;if(n.length<this._minEntries){for(var a=0;a<n.length;a++)this.insert(n[a]);return this}var s=this._build(n.slice(),0,n.length-1,0);if(this.data.children.length)if(this.data.height===s.height)this._splitRoot(this.data,s);else{if(this.data.height<s.height){var c=this.data;this.data=s,s=c}this._insert(s,this.data.height-s.height-1,!0)}else this.data=s;return this},ie.prototype.insert=function(n){return n&&this._insert(n,this.data.height-1),this},ie.prototype.clear=function(){return this.data=i([]),this},ie.prototype.remove=function(n,a){if(!n)return this;for(var s,c,h,u=this.data,y=this.toBBox(n),d=[],m=[];u||d.length;){if(u||(u=d.pop(),c=d[d.length-1],s=m.pop(),h=!0),u.leaf){var g=F(n,u.children,a);if(-1!==g)return u.children.splice(g,1),d.push(u),this._condense(d),this}h||u.leaf||!l(u,y)?c?(s++,u=c.children[s],h=!1):u=null:(d.push(u),m.push(s),s=0,c=u,u=u.children[0])}return this},ie.prototype.toBBox=function(n){return n},ie.prototype.compareMinX=function(n,a){return n.minX-a.minX},ie.prototype.compareMinY=function(n,a){return n.minY-a.minY},ie.prototype.toJSON=function(){return this.data},ie.prototype.fromJSON=function(n){return this.data=n,this},ie.prototype._all=function(n,a){for(var s=[];n;)n.leaf?a.push.apply(a,n.children):s.push.apply(s,n.children),n=s.pop();return a},ie.prototype._build=function(n,a,s,c){var h,u=s-a+1,y=this._maxEntries;if(u<=y)return e(h=i(n.slice(a,s+1)),this.toBBox),h;c||(c=Math.ceil(Math.log(u)/Math.log(y)),y=Math.ceil(u/Math.pow(y,c-1))),(h=i([])).leaf=!1,h.height=c;var d=Math.ceil(u/y),m=d*Math.ceil(Math.sqrt(y));r(n,a,s,m,this.compareMinX);for(var g=a;g<=s;g+=m){var x=Math.min(g+m-1,s);r(n,g,x,d,this.compareMinY);for(var v=g;v<=x;v+=d){var _=Math.min(v+d-1,x);h.children.push(this._build(n,v,_,c-1))}}return e(h,this.toBBox),h},ie.prototype._chooseSubtree=function(n,a,s,c){for(;c.push(a),!a.leaf&&c.length-1!==s;){for(var h=1/0,u=1/0,y=void 0,d=0;d<a.children.length;d++){var m=a.children[d],g=b(m),x=(v=n,_=m,(Math.max(_.maxX,v.maxX)-Math.min(_.minX,v.minX))*(Math.max(_.maxY,v.maxY)-Math.min(_.minY,v.minY))-g);x<u?(u=x,h=g<h?g:h,y=m):x===u&&g<h&&(h=g,y=m)}a=y||a.children[0]}var v,_;return a},ie.prototype._insert=function(n,a,s){var c=s?n:this.toBBox(n),h=[],u=this._chooseSubtree(c,this.data,a,h);for(u.children.push(n),k(u,c);a>=0&&h[a].children.length>this._maxEntries;)this._split(h,a),a--;this._adjustParentBBoxes(c,h,a)},ie.prototype._split=function(n,a){var s=n[a],c=s.children.length,h=this._minEntries;this._chooseSplitAxis(s,h,c);var u=this._chooseSplitIndex(s,h,c),y=i(s.children.splice(u,s.children.length-u));y.height=s.height,y.leaf=s.leaf,e(s,this.toBBox),e(y,this.toBBox),a?n[a-1].children.push(y):this._splitRoot(s,y)},ie.prototype._splitRoot=function(n,a){this.data=i([n,a]),this.data.height=n.height+1,this.data.leaf=!1,e(this.data,this.toBBox)},ie.prototype._chooseSplitIndex=function(n,a,s){for(var c,h,u,y,d,m,g,x=1/0,v=1/0,_=a;_<=s-a;_++){var f=S(n,0,_,this.toBBox),C=S(n,_,s,this.toBBox),w=(h=f,u=C,void 0,void 0,void 0,void 0,y=Math.max(h.minX,u.minX),d=Math.max(h.minY,u.minY),m=Math.min(h.maxX,u.maxX),g=Math.min(h.maxY,u.maxY),Math.max(0,m-y)*Math.max(0,g-d)),E=b(f)+b(C);w<x?(x=w,c=_,v=E<v?E:v):w===x&&E<v&&(v=E,c=_)}return c||s-a},ie.prototype._chooseSplitAxis=function(n,a,s){var c=n.leaf?this.compareMinX:o,h=n.leaf?this.compareMinY:T;this._allDistMargin(n,a,s,c)<this._allDistMargin(n,a,s,h)&&n.children.sort(c)},ie.prototype._allDistMargin=function(n,a,s,c){n.children.sort(c);for(var h=this.toBBox,u=S(n,0,a,h),y=S(n,s-a,s,h),d=p(u)+p(y),m=a;m<s-a;m++){var g=n.children[m];k(u,n.leaf?h(g):g),d+=p(u)}for(var x=s-a-1;x>=a;x--){var v=n.children[x];k(y,n.leaf?h(v):v),d+=p(y)}return d},ie.prototype._adjustParentBBoxes=function(n,a,s){for(var c=s;c>=0;c--)k(a[c],n)},ie.prototype._condense=function(n){for(var a=n.length-1,s=void 0;a>=0;a--)0===n[a].children.length?a>0?(s=n[a-1].children).splice(s.indexOf(n[a]),1):this.clear():e(n[a],this.toBBox)},ie}()}}]);